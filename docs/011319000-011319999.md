# StackOverflow 问答 11319000-11319999

# git - 如何在没有 .git/ 的文件夹上禁用 git 感知 zsh 主题

> ID：11319005
> 
> 赞同：1
> 
> 时间：2012-07-03T20:53:50.670
> 
> 标签：git, shell, plugins, zsh

我对 oh-my-zsh 附带的 git 插件非常满意，但我还没有弄清楚如何添加一个函数来检查初始化的 git repo（即检查 .git 文件夹）并且不显示如果返回 false，则为分支名称或状态。这是一个很棒的插件，但它确实减慢了外壳速度，我想在其他 90% 的文件夹上关闭它......

```
# get the name of the branch we are on
function git_prompt_info() {
  ref=$(git symbolic-ref HEAD 2> /dev/null) || return
  echo "$ZSH_THEME_GIT_PROMPT_PREFIX${ref#refs/heads/}$(parse_git_dirty)$ZSH_THEME_GIT_PROMPT_SUFFIX"
}

# Checks if working tree is dirty
parse_git_dirty() {
  local SUBMODULE_SYNTAX=''
  if [[ $POST_1_7_2_GIT -gt 0 ]]; then
        SUBMODULE_SYNTAX="--ignore-submodules=dirty"
  fi
  if [[ -n $(git status -s ${SUBMODULE_SYNTAX}  2> /dev/null) ]]; then
    echo "$ZSH_THEME_GIT_PROMPT_DIRTY"
  else
    echo "$ZSH_THEME_GIT_PROMPT_CLEAN"
  fi
}

# Checks if there are commits ahead from remote
function git_prompt_ahead() {
  if $(echo "$(git log origin/$(current_branch)..HEAD 2> /dev/null)" | grep '^commit' &> /dev/null); then
    echo "$ZSH_THEME_GIT_PROMPT_AHEAD"
  fi
}

# Formats prompt string for current git commit short SHA
function git_prompt_short_sha() {
  SHA=$(git rev-parse --short HEAD 2> /dev/null) && echo "$ZSH_THEME_GIT_PROMPT_SHA_BEFORE$SHA$ZSH_THEME_GIT_PROMPT_SHA_AFTER"
}

# Formats prompt string for current git commit long SHA
function git_prompt_long_sha() {
  SHA=$(git rev-parse HEAD 2> /dev/null) && echo "$ZSH_THEME_GIT_PROMPT_SHA_BEFORE$SHA$ZSH_THEME_GIT_PROMPT_SHA_AFTER"
}

# Get the status of the working tree
git_prompt_status() {
  INDEX=$(git status --porcelain 2> /dev/null)
  STATUS=""
  if $(echo "$INDEX" | grep '^?? ' &> /dev/null); then
    STATUS="$ZSH_THEME_GIT_PROMPT_UNTRACKED$STATUS"
  fi
  if $(echo "$INDEX" | grep '^A  ' &> /dev/null); then
    STATUS="$ZSH_THEME_GIT_PROMPT_ADDED$STATUS"
  elif $(echo "$INDEX" | grep '^M  ' &> /dev/null); then
    STATUS="$ZSH_THEME_GIT_PROMPT_ADDED$STATUS"
  fi
  if $(echo "$INDEX" | grep '^ M ' &> /dev/null); then
    STATUS="$ZSH_THEME_GIT_PROMPT_MODIFIED$STATUS"
  elif $(echo "$INDEX" | grep '^AM ' &> /dev/null); then
    STATUS="$ZSH_THEME_GIT_PROMPT_MODIFIED$STATUS"
  elif $(echo "$INDEX" | grep '^ T ' &> /dev/null); then
    STATUS="$ZSH_THEME_GIT_PROMPT_MODIFIED$STATUS"
  fi
  if $(echo "$INDEX" | grep '^R  ' &> /dev/null); then
    STATUS="$ZSH_THEME_GIT_PROMPT_RENAMED$STATUS"
  fi
  if $(echo "$INDEX" | grep '^ D ' &> /dev/null); then
    STATUS="$ZSH_THEME_GIT_PROMPT_DELETED$STATUS"
  elif $(echo "$INDEX" | grep '^AD ' &> /dev/null); then
    STATUS="$ZSH_THEME_GIT_PROMPT_DELETED$STATUS"
  fi
  if $(echo "$INDEX" | grep '^UU ' &> /dev/null); then
    STATUS="$ZSH_THEME_GIT_PROMPT_UNMERGED$STATUS"
  fi
  echo $STATUS
}

#compare the provided version of git to the version installed and on path
#prints 1 if input version <= installed version
#prints -1 otherwise 
function git_compare_version() {
  local INPUT_GIT_VERSION=$1;
  local INSTALLED_GIT_VERSION
  INPUT_GIT_VERSION=(${(s/./)INPUT_GIT_VERSION});
  INSTALLED_GIT_VERSION=($(git --version));
  INSTALLED_GIT_VERSION=(${(s/./)INSTALLED_GIT_VERSION[3]});

  for i in {1..3}; do
    if [[ $INSTALLED_GIT_VERSION[$i] -lt $INPUT_GIT_VERSION[$i] ]]; then
      echo -1
      return 0
    fi
  done
  echo 1
}

#this is unlikely to change so make it all statically assigned
POST_1_7_2_GIT=$(git_compare_version "1.7.2")
#clean up the namespace slightly by removing the checker function
unset -f git_compare_version 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T23:08:27.693

如果您不在 git 文件夹中，您应该编写一个超出脚本的 if 语句。

```
if [ ! -d $PWD/.git ]; then
    exit # or your exit function, like return 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T06:14:51.113

有一个替代框架仅在必要时更新 git 信息，即当您更改目录（`chpwd`钩子）或运行`git`命令时：[zsh-git-prompt](https://github.com/simonair/zsh-git-prompt)。请注意，它需要 Python。将其作为插件集成到 oh-my-zsh 中应该不难。

我在 fork 中所做的关键更改是允许您设置包含插件文件的目录 ( `__GIT_PROMPT_DIR`)。

# x11 - xvfb 左上角调整

> ID：11319007
> 
> 赞同：1
> 
> 时间：2012-07-03T20:53:59.917
> 
> 标签：x11, xorg, xvfb

我有一个 X11 虚拟帧缓冲区，我只想在其中运行一个特定的程序，这样我就可以在不关闭程序的情况下连接和断开与桌面或平板电脑的连接（也无需运行完整的桌面管理器）。一切都很好，除了窗口左上角的窗口每个都关闭了几百像素，是否可以在 xvfb 上调整它？

截屏：![在此处输入图像描述](../Images/2363a7830668a6da37934b914269d1ad.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T03:30:58.743

似乎问题在于没有运行窗口管理器，我以为你可以逃脱它，猜不！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T23:08:59.860

尝试使用选项 '-geometry WIDTHxHEIGHT+0+0' 将 WIDTH 和 HEIGHT 替换为屏幕尺寸来启动您的应用程序。有关 -geometry 选项的说明，请参见“man X”。

# asp.net - 使用 MSChart，将数据点添加到堆叠列

> ID：11319010
> 
> 赞同：1
> 
> 时间：2012-07-03T20:54:10.970
> 
> 标签：asp.net, mschart

我有一个堆积柱形 ms 图表，其中所有图表都有 3 个系列/值。如果存在某种情况，我想在图表中添加一个额外的系列。在下图中，图表上的附加系列出现在索引的第一列和第二列。我希望额外的堆叠列出现在第 2 和第 9 位置。关于我将如何做到这一点的任何想法？

![在此处输入图像描述](../Images/e95b5edd13d87973b3a25b9f40cf328e.png)

```
 protected void Page_Load(object sender, System.EventArgs e)
            { 
                // Populate series data
                Random  random = new Random();
                for(int pointIndex = 0; pointIndex < 10; pointIndex++)
                {

                    Chart1.Series[0].Points.AddY(10);
                    Chart1.Series[1].Points.AddY(50);
                    Chart1.Series[2].Points.AddY(30);

                    if (pointIndex == 1 || pointIndex == 8)
                    {
                        //both commented out code blocks break chart
                        //Chart1.Series[3].Points.AddXY(40,pointIndex);
                        //Chart1.Series[3].Points.AddXY(pointIndex,40);

                        Chart1.Series[3].Points.AddXY(0,40);//.AddXY(0,40);
                    }

                }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T22:15:29.603

所有系列都需要正确对齐。因此，您应该在不需要点的地方输入空数据点。例子

```
if (pointIndex == 1 || pointIndex == 8)
{
  Chart1.Series[3].Points.AddY(40);
}
else
{
  Chart1.Series[3].Points.Add( new DataPoint() { IsEmpty = true } );
} 
```

# sql - 仅在特定服务器上运行代码

> ID：11319016
> 
> 赞同：0
> 
> 时间：2012-07-03T20:54:45.337
> 
> 标签：sql, tsql, sql-server-2008-r2

我编写了一个存储过程来将数据从一个 SQL 服务器传输到另一个。是否可以在存储过程的开头有逻辑只在某个服务器上执行？

例如：

```
If IP!="100.xxx.xxx.xxx" then
   RaiseError 'You cannot run this procedure from this server
end if 
```

我知道一种解决方案是不将 proc 部署到另一台服务器。只是好奇，谢谢。G-

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T20:56:24.997

```
IF UPPER(@@SERVERNAME) = 'YOUR_SERVER'
BEGIN
    -- do stuff
END 
```

注意`@@SERVERNAME`可能包括实例名称信息。所以你也可以说：

```
IF UPPER(@@SERVERNAME) = 'YOUR_SERVER\YOUR_INSTANCE'
BEGIN
    -- do stuff
END 
```

如果您只关心服务器（以及该服务器上的任何实例），则可以使用不同的属性，尽管在集群实例的情况下这将返回节点名称而不是虚拟服务器名称：

```
IF UPPER(SERVERPROPERTY('ComputerNamePhysicalNetBIOS')) = 'YOUR_SERVER'
BEGIN
    -- do stuff
END 
```

如果它是集群的，并且您希望相同的代码阻止执行，除非在该集群中的任何实例上，您可以说：

```
IF UPPER(@@SERVERNAME) = 'YOUR_SERVER'
  OR UPPER(@@SERVERNAME) LIKE 'YOUR_SERVER\%'
BEGIN
    -- do stuff
END 
```

# jquery - 使用 jQuery 将纯文本替换为 html

> ID：11319020
> 
> 赞同：9
> 
> 时间：2012-07-03T20:55:02.783
> 
> 标签：jquery, html, text, replace, replacewith

我正在尝试在 jQuery 中编写一个替换函数，它将用 html 替换特定的单词。

基本上我试图在加载文档时替换类似的`[this]`东西。`<span class='myclass'>`我环顾四周寻找了几个样本，但我看到的几件事我无法开始工作。我仍在学习 jQuery，所以我希望有人可以给我一些建议作为尝试。

在此先感谢，史蒂文。

HTML/文本：

```
[this]hello world![/this]​ 
```

JavaScript：

```
$(document).ready(function() {    
     // Using just replace
     $("body").text().replace(/[this]/g,'<b>')
});​ 
```

- 编辑 -

我使用下面的 Nir ​​演示对函数进行了一些更改。这里有一些关于我在做什么的更多细节。我正在尝试制作一个内联分数，我已经拥有了适当的类和未制作的东西。它在 html 中运行良好，但是当我运行 jQuery 函数时它似乎不起作用。

很明显标签被替换了，但我的css似乎并没有像我提到的那样工作。

这里是 HTML [HERE的链接](http://stevenschemers.com/Fraction.htm)

这里有一个指向 jsfiddle [HERE的链接](http://jsfiddle.net/stevenschemers/juTtG/30/)

```
$(document).ready(function() {    

// Using just replace
var text = $('body').text();
$("body").html(text.replace(/\[math\]/g,'<span class="container">').replace(/\[\/math\]/g,'</span>'));

var textt = $('body').text();
$("body").html(textt.replace(/\[top\]/g,'<div class="containme">').replace(/\[\/top\]/g,'</div>'));

var textl = $('body').text();
$("body").html(textl.replace(/\[line\]/g,'<div class="borderme">&nbsp;</div>'));

var textb = $('body').text();
$("body").html(textb.replace(/\[bot\]/g,'<div class="containme2">').replace(/\[\/bot\]/g,'</div>'));
 });​ 
```

这个 HTML

```
 <span class="readme">Whats up, here's a fraction.&nbsp;
<span class="container">
    <div class="containme">1</div>
    <div class="borderme">&nbsp;</div>
    <div class="containme2">2</div>
    </span>
 &nbsp;&nbsp;Hello? Whats up, here's a fraction.&nbsp;
    <span class="container">
    <div class="containme">1</div>
    <div class="borderme">&nbsp;</div>
    <div class="containme2">2</div>
  </span>
  &nbsp;&nbsp;Hello? Whats up, here's a fraction.&nbsp;
  </span> 
```

到这个缩短的标记

```
<span class="readme"> Whats up, here's a fraction. [math][top]1[/top][line][bot]2[/bot][/math] </span> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T21:10:45.787

javascript replace() 返回一个新字符串，它不会改变原始字符串，所以它可能应该是：

```
$(document).ready(function() {    
    var content = $("body").text().replace(/\[this\]/g,'<b>')
    $("body").html(content);
});​ 
```

请注意，必须对括号进行转义，否则它将用 . 替换括号内的每个字符`<b>`。

这是一个[小提琴](http://jsfiddle.net/juTtG/7/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T21:06:50.167

这是一个[使用正则表达式的演示](http://jsfiddle.net/juTtG/6/)：

```
$(document).ready(function() {    
    // Using just replace
    var text = $('body').text();
    $("body").html(
        text.replace(/\[this\]/g,'<b>').replace(/\[\/this\]/g,'</b>')
    );
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-27T11:28:53.873

由于没有人解释用自定义 HTML 元素替换文本的方法，我现在使用下一个函数：

```
replaceWithAnchor: function (el, text) {
        let anch = $('<span>');
        anch.attr('id', `my-link-1`);
        anch.text(text);

        var content = el.html().replace(text, '<span id="need-to-replace"></span>');
        el.html(content);
        el.find('#need-to-replace').replaceWith(anch);
    } 
```

# php - 如何在 php 中显示 .cfg 文件的上下文？

> ID：11319022
> 
> 赞同：0
> 
> 时间：2012-07-03T20:55:13.550
> 
> 标签：php, config

我有一个包含一些代码的 .cfg 文件。我想在 php 页面中显示整个 .cfg。my_config.cfg 的代码在这里：

```
# ATA/IDE/MFM/RLL support
#
account_name=changl
#
# IDE, ATA and ATAPI Block devices
#
CONFIG_BLK_DEV_IDE=y
CONFIG_BLK_DEV_IDEDISK=y
CONFIG_BLK_DEV_IDECD=n 
```

现在我写了一个 php 代码来检查条件并显示我在 echo 中写的内容。但不是那样，我想显示文件中的所有内容。这是php代码：

```
<?php
$config_file = "my_config.cfg";
$comment = "#";

$fp = fopen($config_file, "r");

while (!feof($fp)) {
  $line = trim(fgets($fp));
  if ($line && !preg_match("/^$comment/", $line)) {
    $pieces = explode("=", $line);
    $option = trim($pieces[0]);
    $value = trim($pieces[1]);
    $config_values[$option] = $value;
  }
}
fclose($fp);

if ($config_values['account_name'] == "changl")
  echo "account_name is changl";
else
  echo "account_name is not changl";
?> 
```

代码工作正常。但我想在文件中显示数据。请任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T21:01:31.530

最简单的方法是使用[`parse_ini_file()`](http://php.net/parse_ini_file)：

```
$config_values = parse_ini_file('my_config.cfg'); 
```

之后，您可以`$config_values`使用任何其他常规数组

# javascript - 在 JavaScript 中，杀死 DOM 元素的正确方法是什么？

> ID：11319024
> 
> 赞同：0
> 
> 时间：2012-07-03T20:55:18.990
> 
> 标签：javascript, dom

我知道我可以将其样式设置为“显示：无”

然而，这只是隐藏它。

我真的很想杀死一个 DOM 元素及其所有子元素。

上下文是我正在 DOM 内部构建一个类似桌面的 GUI 系统（用于学习目的），当“窗口”关闭时，我希望删除该 DIV 及其所有子项。

因此，在 JavaScript 中，我如何告诉 GC “嘿，摆脱这个 DOM 元素，它不再需要了”？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T21:01:54.307

要删除所有元素，我想您可以设置`element.innerHTML`为空字符串（尽管我自己从未尝试过）。否则，您可以使用，如此[处](https://developer.mozilla.org/en/DOM/Node.removeChild)`element.removeChild(child)`所述。

jQuery 还支持`$([selector]).remove([selector])`，它可以更灵活地指定要立即删除哪些元素。`remove` [这里](http://api.jquery.com/remove/)有更多关于 jQuery 的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T20:57:35.700

那么 removeChild 呢？

有关更多信息，请参阅[http://dustindiaz.com/add-and-remove-html-elements-dynamically-with-javascript/](http://dustindiaz.com/add-and-remove-html-elements-dynamically-with-javascript/)

# windows - 在 Windows 上从 Go *net.UDPConn 获取 syscall.Handle？

> ID：11319025
> 
> 赞同：7
> 
> 时间：2012-07-03T20:55:23.323
> 
> 标签：windows, sockets, networking, go, multicast

如何在 Windows 上获取`syscall.Handle`a的底层？`*net.UDPConn`我想要这个句柄来设置`IP_MULTICAST_TTL`via `syscall.SetsockoptInt`。在 Linux 上，我执行以下操作：

```
func setTTL(conn *net.UDPConn, ttl int) error {
    f, err := conn.File()
    if err != nil {
        return err
    }
    defer f.Close()
    fd := int(f.Fd())
    return syscall.SetsockoptInt(fd, syscall.SOL_IP, syscall.IP_MULTICAST_TTL, ttl)
} 
```

但在 Windows 上，隐式inside`dup`失败：`*net.UDPConn``File()`

> 04:24:49 main.go:150: dup: windows 不支持

并在源代码中标记为待办事项。我怎样才能得到这个手柄？如果没有，还有其他方法可以设置 TTL 吗？

# 更新0

我已将缺点提交给 Go 问题跟踪器：

*   [为 *net.UDPConn 设置TTL](http://code.google.com/p/go/issues/detail?id=3826)
*   [在 Windows 上为 netFD 实现 dup](http://code.google.com/p/go/issues/detail?id=3827)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-08T05:16:45.070

简短的回答是不可能的。但既然这不是你想听到的答案，我会给你解决问题的正确方法和错误方法。

## 正确的方式：

1.  为 Windows实现`dup()`。
2.  作为变更集提交到 Go
3.  等待它发布使用它

显然正确的方法有一些问题......但我强烈建议这样做。Go 需要 Windows 开发人员来修复这些类型的严重问题。在 Windows 中无法做到这一点的唯一原因是没有人实现该功能

## 错误的方法：

在您编写的补丁被接受并发布之前，您可以通过 unsafe 伪造它。以下代码通过镜像 a 的确切结构来工作`net.UDPConn`。这包括从网络复制所有构成`UDPConn`. then`unsafe`用于断言 local`UDPConn`与 net 的相同`UDPConn`。编译器无法检查这一点并相信你的话。如果内部结构`net`发生变化，它会编译，但天知道它会做什么。

所有代码都未经测试。

```
package reallyunsafenet

import (
        "net"
        "sync"
        "syscall"
        "unsafe"
)

// copied from go/src/pkg/net/fd_windows.go
type ioResult struct {
        qty uint32
        err error
}

// copied from go/src/pkg/net/fd_windows.go
type netFD struct {
        // locking/lifetime of sysfd
        sysmu   sync.Mutex
        sysref  int
        closing bool

        // immutable until Close
        sysfd       syscall.Handle
        family      int
        sotype      int
        isConnected bool
        net         string
        laddr       net.Addr
        raddr       net.Addr
        resultc     [2]chan ioResult
        errnoc      [2]chan error

        // owned by client
        rdeadline int64
        rio       sync.Mutex
        wdeadline int64
        wio       sync.Mutex
}

// copied from go/src/pkg/net/udpsock_posix.go
type UDPConn struct {
    fd *netFD
}

// function to get fd
func GetFD(conn *net.UDPConn) syscall.Handle {
        c := (*UDPConn)(unsafe.Pointer(conn))
        return c.fd.sysfd
} 
```

# php - 用于密码验证的 PHP 正则表达式

> ID：11319028
> 
> 赞同：4
> 
> 时间：2012-07-03T20:55:34.947
> 
> 标签：php, regex

我没有从脚本中获得预期的效果。我希望密码包含 AZ、az、0-9 和特殊字符。

*   AZ
*   阿兹
*   0-9 >= 2
*   特殊字符 >= 2
*   字符串长度 >= 8

所以我想强制用户使用至少 2 个数字和至少 2 个特殊字符。好的，我的脚本有效，但迫使我背靠背使用数字或字符。我不想要那个。例如密码 testABC55$$ 是有效的——但我不希望这样。

相反，我希望 test$ABC5#8 有效。所以基本上数字/特殊字符可以相同或不同 -> 但必须在字符串中拆分。

PHP代码：

```
$uppercase = preg_match('#[A-Z]#', $password);
$lowercase = preg_match('#[a-z]#', $password);
$number    = preg_match('#[0-9]#', $password);
$special   = preg_match('#[\W]{2,}#', $password); 
$length    = strlen($password) >= 8;

if(!$uppercase || !$lowercase || !$number || !$special || !$length) {
  $errorpw = 'Bad Password'; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-03T21:01:02.340

使用*“可读”*格式（可以优化为更短），因为您是正则表达式新手>>

```
^(?=.{8})(?=.*[A-Z])(?=.*[a-z])(?=.*\d.*\d.*\d)(?=.*[^a-zA-Z\d].*[^a-zA-Z\d].*[^a-zA-Z\d])[-+%#a-zA-Z\d]+$ 
```

将您的特殊字符集添加到`[...]`上面的正则表达式中（我现在只是放在那里*-+%#*）。

* * *

***解释：***

```
^                              - beginning of line/string
(?=.{8})                       - positive lookahead to ensure we have at least 8 chars
(?=.*[A-Z])                    - ...to ensure we have at least one uppercase char
(?=.*[a-z])                    - ...to ensure we have at least one lowercase char
(?=.*\d.*\d.*\d                - ...to ensure we have at least three digits
(?=.*[^a-zA-Z\d].*[^a-zA-Z\d].*[^a-zA-Z\d]) 
                               - ...to ensure we have at least three special chars
                                    (characters other than letters and numbers)
[-+%#a-zA-Z\d]+                - combination of allowed characters
$                              - end of line/string 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T20:58:57.990

```
((?=(.*\d){3,})(?=.*[a-z])(?=.*[A-Z])(?=(.*[!@#$%^&]){3,}).{8,}) 
```

test$ABC5#8 无效，因为您询问的数字和规格符号超过 2 个

```
A-Z
a-z
0-9 > 2
special chars > 2
string length >= 8 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-22T07:45:32.693

对于匹配长度的字符串，包括特殊字符：

$result = preg_match('/^(?=.[az])(?=.[AZ])(?=.\d)(?=.[^A-Za-z\d])[\s\ S]{6,16}$/', $string);

答案解释：[https ://stackoverflow.com/a/46359397/5466401](https://stackoverflow.com/a/46359397/5466401)

# sql - 一次删除表中的一个块

> ID：11319029
> 
> 赞同：4
> 
> 时间：2012-07-03T20:55:35.273
> 
> 标签：sql, sql-server, database, delete-row

我有一个单列表`Ids`，它的列 ID 是 type `uniqueidentifier`。我有另一个表`MyTable`，它有一个 ID 列以及许多其他列。我想`MyTable`一次删除 1000 行，其中的 ID`MyTable`与`Ids`.

```
WHILE 1 = 1 BEGIN
    DELETE t FROM (SELECT TOP 1000 ID FROM Ids) d INNER JOIN MyTable t ON d.ID = t.ID;
    IF @@ROWCOUNT < 1 BREAK;
    WAITFOR DELAY @sleeptime; -- some time to be determined later
END 
```

这似乎不起作用。该声明实际上应该是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-03T21:03:09.843

试试这个：

```
DECLARE @BatchSize INT
SET @BatchSize = 100000

WHILE @BatchSize <> 0
BEGIN 
   DELETE TOP (@BatchSize) t
    FROM [MyTable] t
    INNER JOIN [Ids] d ON d.ID=t.ID
    WHERE ????
   SET @BatchSize = @@rowcount 
END 
```

好处是您需要创建的唯一变量是大小，因为它将它用于 WHILE 循环检查。当删除低于 100000 时，它会将变量设置为该数字，在下一次传递时将没有任何内容可删除，并且行数将为 0......所以你退出。干净，简单，易于理解。当 WHILE 可以解决问题时，切勿使用 CURSOR！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-03T20:59:51.200

尝试`Delete from MyTable WHERE ID in (select top 1000 t.ID from Ids t inner join MyTable d on d.Id = t.Id)`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T21:01:37.007

你也可以试试：

```
set rowcount 1000
delete from mytable where id in (select id from ids)
set rowcount 0  --reset it when you are done. 
```

[http://msdn.microsoft.com/en-us/library/ms188774.aspx](http://msdn.microsoft.com/en-us/library/ms188774.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T21:06:24.310

```
WHILE EXISTS (SELECT TOP 1 * FROM MyTable mt JOIN IDs i ON mt.ID = t.ID)
BEGIN

DELETE TOP (1000) FROM MyTable
FROM MyTable mt JOIN IDS i ON mt.ID = i.ID

--you can wait if you want, but probably not necessary
END 
```

--对不起，快速发布；很着急:)

SQL Server 中的 DELETE 语句支持两个 FROM 子句；第一个 FROM 标识删除行的表，第二个 FROM 子句用于 JOINS。

请参阅：http: [//msdn.microsoft.com/en-us/library/ms189835.aspx](http://msdn.microsoft.com/en-us/library/ms189835.aspx)

# android - 添加新活动时 AndroidMainfest.xml 中出现重复属性错误

> ID：11319033
> 
> 赞同：1
> 
> 时间：2012-07-03T20:55:39.383
> 
> 标签：android, android-intent, android-manifest

我正在制作一个简单的文本字段和“发送”按钮来显示用户在文本字段中键入的任何内容。该程序在 android.com 的 Android 培训教程中有完整的说明。

每当我添加 Activity`DisplayMessageActivity`时，我都会收到“重复属性”作为错误。这是代码：

```
<application

      <activity android.name="DroidStart"/>
      <activity
       android:name="com.start.droidstart.DisplayMessageActivity"
        android:label="@string/title_activity_droid" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

**更新：**我修复了指出的问题，但我仍然收到错误。这是我当前的 AndroidMainfest.xml：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.start.droidstart"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
      <activity
       android:name="DroidStart"
       android:name="com.start.droidstart.DisplayMessageActivity"
       android:label="@string/title_activity_droid" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
        </activity>
</application> 
```

错误看起来像这样

> 解析 XML 时出错；重复属性。键入 Android AAPT 问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2018-02-06T07:27:22.113

我的问题是工具：替换重复。固定容易：

```
tools:replace="android:label,android:theme"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T21:00:21.050

您至少有两个错误：

1.  一定要关闭你的`<application>`标签。
2.  使用`android:name`，不使用`android.name`。

所以前 3 行应该从：

```
<application

      <activity android.name="DroidStart"/> 
```

到

```
<application>

      <activity android:name="DroidStart"/> 
```

**更新：**

在您更新的代码中，您有：

```
 <activity
   android:name="DroidStart"
   android:name="com.start.droidstart.DisplayMessageActivity" 
```

您使用`android:name`了两次，这就是您收到此错误的原因。您可能应该将其更改为：

```
 <activity
   android:name=".DisplayMessageActivity" 
```

假设`DisplayMessageActivity`是您要引用的 Activity 的类名。

最后，你忘记了你的`manifest`结束标签：你应该`</manifest>`在文件的最后有。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T20:57:07.757

改变

```
android.name 
```

进入

```
android:name 
```

在第一行...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-11T17:52:53.173

对于 Instantapp 项目，还要检查您是否拥有

`xmlns:android = "http://schemas.android.com/apk/res/android"`

在清单标记中的应用程序 AndroidManifest.xml 中。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-03T20:58:49.833

采用

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.start.droidstart"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8"
    android:targetSdkVersion="15"   />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/title_activity_droid" >
        <activity
            android:name=".DisplayMessageActivity"
            android:label="@string/title_activity_droid" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name=".DroidStart"/>
    </application>

</manifest> 
```

代替

```
<application
    <activity android.name="DroidStart"/> 
```

您正在使用`"android.name"`而不是`"android:name"`在清单中声明活动，并将第一个应用程序标记关闭为`<application>`

# javascript - (function () { })(); 是什么意思？

> ID：11319034
> 
> 赞同：7
> 
> 时间：2012-07-03T20:55:43.190
> 
> 标签：javascript, function

> **可能重复：**
> [javascript中自执行函数的目的是什么？](https://stackoverflow.com/questions/592396/what-is-the-purpose-of-a-self-executing-function-in-javascript)

什么在 JS 中编写这样的代码：

```
(function (window) { })(window); 
```

或这个：

```
(function () { })(); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-03T20:57:53.413

它创建了`closure`一个私有作用域，将变量隐藏在`global object`

```
// Somewhere...
var x = 2;

...
...
// Your code
var x = "foo" // you override the x defined before.

alert(x); // "foo" 
```

但是当你使用闭包时：

```
var x = 2;
// Doesn't change the global x
(function (){ var x = "foo";})();

alert(x); // 2 
```

关于语法，它只是一个自执行函数，你声明它然后执行它。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-03T20:57:47.940

它是一个自调用匿名函数或函数表达式。它会阻止您在全局范围内创建变量。它还立即调用该函数。

```
function someFunc() {
    // creates a global variable
}

var someFunc = function () {
    // creates a global variable
}

(function(){
    // creates an anonymous function and 
    // runs it without assigning it to a global variable
})(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-03T20:58:27.953

它被称为[闭包](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)。它有助于控制变量的范围，因为 Javascript 将变量提升到其范围的顶部。它们也是立即执行或初始化的匿名函数。

# java - JavaEE 项目部署失败

> ID：11319036
> 
> 赞同：7
> 
> 时间：2012-07-03T20:55:50.500
> 
> 标签：java, jakarta-ee, glassfish, connection

我是 Java EE 的初学者。今天我尝试按照本教程学习 Java EE：http: [//netbeans.org/kb/docs/javaee/javaee-gettingstarted.html](http://netbeans.org/kb/docs/javaee/javaee-gettingstarted.html)

它主要教授如何使用 Netbeans 从 Java Web 类别创建 Web 应用程序。

当我运行应用程序时，我收到了这样的 Build Failed 错误消息：

```
 WebApplication1/build/web&name=WebApplication1&contextroot=/WebApplication1&force=true failed on GlassFish Server 3+ 

     Error occurred during deployment: Exception while preparing the app : Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DatabaseException

    Internal Exception: java.sql.SQLException: Error in allocating a connection. 
Cause: Connection could not be allocated because: java.net.ConnectException : Error connecting to server localhost on port 1527 with message Connection refused.

    Error Code: 0\. Please see server.log for more details.
   WebApplication1/nbproject/build-impl.xml:721: The module has not been deployed.
    See the server log for details.
    BUILD FAILED (total time: 2 seconds) 
```

在创建此项目时，我已经打开 glassfish 服务器并选择 glassfish 作为服务器，但看起来服务器拒绝连接。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T21:54:29.887

转到`persistence.xml`文件，并在其中添加带有数据库连接池名称的“jta-data-source”标签。

您可以在 Glassfish 管理控制台中找到连接池的名称。资源->JDBC->JDBC 连接池

```
<persistence-unit name="Project-name">
    <jta-data-source>jdbc/mysqlpool</jta-data-source>
    <class>....</class>
</persistence-unit> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T21:02:47.443

[Java DB](http://www.oracle.com/technetwork/java/javadb/index.html)在端口 1527上运行。看起来它没有在您的情况下运行。

单击 NetBeans IDE 中的“输出”选项卡并查看“Java DB 数据库进程”控制台。

您应该看到以下几行：

```
Tue Jul 03 20:25:43 BST 2012 : Security manager installed using the Basic server security policy.
Tue Jul 03 20:25:44 BST 2012 : Apache Derby Network Server - 10.8.1.2 - (1095077) started and ready to accept connections on port 1527 
```

如果您没有看到这些行，请尝试调查 Java DB 进程未启动的原因。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-14T19:32:44.103

转到 Glassfish 管理控制台、JDBC、JDBC 连接池，然后检查连接池中的附加属性。就我而言，我有一个 DerbyPool，其中 PortNumber 为 1527，我更改了它。

# visual-studio - VS Extensions 的用户数据应该存储在哪里？

> ID：11319038
> 
> 赞同：2
> 
> 时间：2012-07-03T20:56:08.800
> 
> 标签：visual-studio, vsix

我正在通过 VSIX 项目创建一个 VS 2012 插件。用户将能够保存一些自定义设置。是否有存储此数据的首选位置，以便在更新期间不会覆盖数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T16:34:23.797

如果您的设置页面派生自[DialogPage](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.shell.dialogpage.aspx)，则可以使用[SaveSettingsToStorage](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.shell.dialogpage.savesettingstostorage)方法。对于适合在“工具”>“选项”中显示的选项，我会推荐此路径（这基本上是不特定于特定项目或解决方案的任何内容，因为这是用户希望找到选项的地方）。

如果您的选项特定于解决方案或项目，那么您可以使用其他接口（我相信[IVsSolutionPersistence](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.shell.interop.ivssolutionpersistence.aspx)服务接口就是其中之一），但我对这些不太熟悉。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T16:11:01.223

在 Visual Studio 可扩展性中没有这样的首选位置来存储用户数据。

我想为您的插件存储用户数据的地方超出了 VSX 指南，完全取决于您。您可以使用用户文件夹、注册表或其他任何东西。

# eclipse - Eclipse 调试到运行时生成的源代码

> ID：11319040
> 
> 赞同：2
> 
> 时间：2012-07-03T20:56:10.800
> 
> 标签：eclipse, debugging, eclipse-jdt

我有一个为类生成源代码的项目，然后将源代码编译成字节码（如果有区别，则使用 E​​clipse 编译器），然后使用自定义类加载器加载新创建的类。然后将该类用作常规 Java 类。

我使用 Eclipse，我想为调试器编写插件，这将允许我对不在磁盘上实际存在的生成代码进行源代码调试。我需要一个提示，一个寻找的起点。此类插件应使用的某种扩展点，或 Eclipse 调试器中负责定位字节码源的类的名称。

对不起，如果问题有点模糊，但我需要一个起点来开始挖掘。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T00:19:24.107

看看以下扩展点：

*   org.eclipse.debug.core.sourceLocators
*   org.eclipse.debug.core.sourceContainerTypes
*   org.eclipse.debug.core.sourcePathComputers
*   org.eclipse.debug.ui.sourceContainerPresentations

# entity-framework - 有没有办法对实体框架 EDMX 进行分区？

> ID：11319046
> 
> 赞同：0
> 
> 时间：2012-07-03T20:56:27.277
> 
> 标签：entity-framework, entity-framework-4.3, edmx, edmx-designer

对于大型模型，拥有多个解决特定域（身份验证、customFeature1、customFeature2 等）并在其他 EDMX 中具有这些 EDMX 参考实体的实体框架设计器表面将非常有用。

有没有一种方法可以使用类似于 SQL Management Studio 图表的范例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T22:03:35.393

这是 Visual Studio 2012 中 EF 设计器的一项新功能 - 您仍然有单个 EDMX，但您有多个布局（图表）。[这是设计器中新功能的预览](http://blogs.msdn.com/b/efdesign/archive/2010/10/11/entity-designer-improvements-preview.aspx)。Visual Studio 2010 没有此功能。

只能在非常有限的范围内（仅在 CSDL 中）引用来自其他 EDMX 的实体，并且设计人员根本不支持此功能。

# java - 从慢速流中读取时，BufferedReader.readLine() 是否有可能不读取整行？

> ID：11319049
> 
> 赞同：0
> 
> 时间：2012-07-03T20:56:35.433
> 
> 标签：java, io, bufferedreader

我在我们的一个系统中遇到了一个奇怪的错误，我无法解释。在我们的系统中，后端正在生成一个大型 TSV 输出文件，然后我们使用以下代码通过 HTTP 提供该文件：

```
 BufferedInputStream input = new BufferedInputStream(p.getInputStream(), (int)FileUtils.BYTES_PER_MEGABYTE * 16);
    OutputStream output = resp.getOutputStream();
    byte[] buffer = new byte[(int) (FileUtils.BYTES_PER_KILOBYTE * 8)];
    do
    {
        int read = input.read(buffer);
        if (read <= 0) break;
        output.write(buffer);           
    } while (true);
    input.close();
    output.close(); 
```

然后在客户端有一个 TSV 解析器消耗 HTTP 响应，但是在非常大的输入上，我们开始看到奇怪的工件，其中解析器将报告一行具有错误的项目数，并且错误消息打印它将解析的行和该行将是随机数据块，即不是整行数据

我的第一个想法是生成的 TSV 格式不正确，但我通过直接从后端系统复制文件，然后通过三个独立编写的开源 TSV 解析器（包括客户端代码使用的那个）运行它，几乎排除了这种情况) 并且在本地文件上运行时，它们都能够很好地解析文件。

作为参考，我们使用的 TSV 解析器的代码在[这里](http://svn.apache.org/viewvc/jena/trunk/jena-arq/src/main/java/com/hp/hpl/jena/sparql/resultset/TSVInputIterator.java?view=log)

这使我有两种可能性：

1.  我展示的用于通过 HTTP 复制文件的代码在某些方面存在缺陷 - 在这种情况下，我希望有人指出我犯了哪些愚蠢但不明显的错误！
2.  `BufferedReader.readLine()`消费解析器正在使用哪个不能保证读取整行？如果是这种情况，我不会完全感到惊讶，因为我被 .Net 中慢速网络流上的奇怪读取行为所困扰，所以想知道类似的问题是否适用于 Java？

还是我忽略了其他一些解释？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T20:56:36.540

在发布这个问题时，我突然发现错误是什么（通常！）

我发布的用于复制文件的代码的以下部分不正确：

```
int read = input.read(buffer);
if (read <= 0) break;
output.write(buffer); 
```

它应该如下所示：

```
int read = input.read(buffer);
if (read <= 0) break;
output.write(buffer, 0, read); 
```

问题是我总是将整个缓冲区写入输出流，即使我们从输入中读取的内容少于缓冲区的大小。这意味着在文件的末尾，我们将打印最后一块数据以及缓冲区中剩余的任何内容，因此剩下的随机数据块！

# jquery - Isotope 执行过滤器时将加载图像放在哪里？

> ID：11319056
> 
> 赞同：1
> 
> 时间：2012-07-03T20:56:55.240
> 
> 标签：jquery, jquery-isotope

当要求过滤时，同位素可能需要一段时间才能返回内容。

所以，我想在这种情况下使用 loading.gif。我怀疑一些 jQuery 会做到这一点，但不知道在哪里或应该是什么样子这样做。

同位素很简单：

```
var $container = $('#stream');

$container.imagesLoaded( function(){
  $container.isotope({
 itemSelector: '.stream-class',
 transformsEnabled: false,
  });  
}); 
```

然后，我使用文档中的简单按钮来触发过滤器：

```
$('#filters a').click(function(){
  var selector = $(this).attr('data-filter');
  $container.isotope({ filter: selector });
  return false;
}); 
```

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T05:57:45.937

这对我有用：

```
$('#filters a').click(function() {
    var selector = $(this).attr('data-filter');
    var lastClicked = $("#filtersLoad2").text();

if(lastClicked == selector) {

   return false;    

} 

    $("#filtersLoad").show(); //  Show loading gif in div
    $container.isotope({
        filter: selector
    }, function(){
        $("#filtersLoad").hide();
        $("#filtersLoad2").text(selector); // Store last button clicked
    });

    return false;
}); 
```

希望这对其他人有帮助。

# backbone.js - Backbone.js 重定向到外部 URL

> ID：11319057
> 
> 赞同：3
> 
> 时间：2012-07-03T20:56:57.913
> 
> 标签：backbone.js

我无法重定向到外部 URL。我想知道如何从路由器内部重定向到例如[http://www.google.com 。](http://www.google.com)

我知道我可以使用路由器 .navigate 功能，但会重定向到不同的视图。我将如何重定向到外部 url。

每次我尝试使用：

```
window.location = 'http://www.google.com'; 
```

但它会抱怨，因为它需要一个 MIME 类型的文档，而当前的 MIME 类型是 application/json。那么如何更改 javascript 中的 MIME 类型呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T21:06:20.770

Try:

```
window.location.href = 'http://www.google.com'; 
```

EDIT: Removed `window.location.reload()`, since this will just reload the same page.

# python - app.yaml 配置中的匹配模式，POST 404 错误

> ID：11319059
> 
> 赞同：0
> 
> 时间：2012-07-03T20:57:01.457
> 
> 标签：python, google-app-engine, gql

由于 main.app 是默认页面，不管根目录中的 index.html 页面（不幸的是，GAE 不像 cgi/apache 那样工作），我已经制作了表单页面 main.app，以及查询/响应页面响应.py。提交表单后，我收到错误：

> 未找到错误：/response.py 与应用程序配置中的任何模式都不匹配。

```
application: emot13  
version: 1
runtime: python27
api_version: 1
threadsafe: true 

handlers:
-   url: /stylesheets/
    static_dir: stylesheets
-   url: / 
    script: main.app 
-   url: /.
    script: response.app 
```

主应用程序：

```
#!/usr/bin/env python
import cgi
import urllib
from google.appengine.ext import db
import webapp2

class MainPage(webapp2.RequestHandler):
    def get(self):
        self.response.out.write("""<html>
<body>
<head>
<link type="text/css" rel="stylesheet" href="/stylesheets/main.css" />
</head>
<body>

    <form action="/response.py" method="post"> #also tried "response.py", no difference
    <p>First Name: <input type="text" name="name"/></p>
    <p>How are things?</p>
    <p><input type="radio" name="mood" value="good">Good</p>
    <p><input type="radio" name="mood" value="bad">Bad</p>
    <p><input type="radio" name="mood" value="fair">Fair</p>
    <p><input type="submit" name="submit" value="Process"/></p>
    </form>
</body></html>""")

app = webapp2.WSGIApplication(
                                    [("/", MainPage)],
                                    debug=True)

def main():
        application.run()

if __name__ == "__main__":
        main() 
```

响应.py：

```
#!/usr/bin/env python
import cgi
import time
import datetime 
import urllib
from google.appengine.ext import db
import webapp2

#model
class Visitor(db.Model):
    name = db.StringProperty(required=1)
    mood = db.StringProperty(choices=["good","bad","fair"])
    date = db.DateTimeProperty(auto_now_add=True)

class Response(webapp2.RequestHandler):
    def get(self):
        today = datetime.date.today()
        self.response.out.write("""<html><head>
<link type="text/css" rel="stylesheet" href="/stylesheets/main.css" />
</head>
<body>
        self.response.out.write(today.strftime(<html><body><p style='color:#3E3535'>%A, %d %B</p>)
</body></html> """)  
        localtime = time.localtime(time.time())
        mon = localtime[1] # MONTH
        h = localtime[3] # HOUR
        name = self.request.get("name")
        name = name.capitalize()
        mood = self.request.get("mood")

        # variables and if/elif statements follow; they all work so that is not the problem.

        responses = db.GqlQuery("SELECT * "
                                "FROM Visitor "
                                "ORDER BY date DESC_LIMIT 1")
        for response in responses:                                                                     
            if mood == "bad" and name != "": 
                # responses follow; they all work so that is not the problem. 

class Process(webapp2.RequestHandler):   
    def post(self):
        name = self.request.get("name")
        mood = self.request.get("mood")
        info = Visitor(name = name, mood = mood)
        info.put()
        self.redirect("/")

app = webapp2.WSGIApplication(
                                    [("/", Response),
                                    ("/", Process)], 
                                    debug=True)

# tried uncommenting this as well v v
#def response():
#    application.run()

#if __name__ == "__response__":
#        response() 
```

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T21:32:26.137

问题出在第三个处理程序上，它应该读取

```
-   url: /.*
    script: response.app 
```

或者

```
-   url: /response.py
    script: response.app 
```

您发布的代码将匹配 /a、/b 等。

# pthreads - pthread_cond_timedwait() EINVAL 的根本原因

> ID：11319063
> 
> 赞同：5
> 
> 时间：2012-07-03T20:57:12.270
> 
> 标签：pthreads

我看到在极少数情况下会`pthread_cond_timedwait()`返回`EINVAL`并导致我们的系统发生致命崩溃。我知道这意味着传入的参数之一必须无效，但是 mutex 或 cond 变量如何变得无效？

有没有办法在调用之前检查这些参数`pthread_cond_timedwait()`以防止崩溃？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-03T22:56:36.403

没有明确说明什么是无效的，但这里有一些我观察到的`pthread_cond_timedwait`返回原因`EINVAL`：

*   条件和/或互斥锁未正确初始化。检查初始化返回结果，并验证是否显式链接了正确的 pthread 库。链接各种版本的 glibc 时可能会出现零星问题，导致 init 调用返回成功但对象未正确初始化的情况难以调试。
*   任何未定义的行为都可能导致无效的内部状态，pthread 调用可能检测到也可能检测不到。未定义的行为可能来自：
    *   多次初始化互斥锁或条件变量而不破坏它。
    *   在它被销毁之后，但在它被重新初始化之前使用互斥锁或条件变量。
    *   条件和/或互斥锁由应用程序代码手动覆盖。
    *   线程等待对象时，互斥锁或条件变量被破坏。
*   不同的互斥锁与相同的条件变量一起使用。
*   *abstime*参数的tv_nsec 值小于 0 或大于 1,000,000,000。

如果不手动模仿 pthread 正在执行的验证调用，那么我不知道在调用之前检查参数的方法`pthread_cond_timewait()`。但是，`pthread_cond_timewait()`返回`EINVAL`不应导致致命崩溃，因为它是特定情况。考虑检查可能无法正确处理返回结果的应用程序代码的其他区域。例如，只要返回不是就假定成功的代码`ETIMEDOUT`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-02T08:02:37.007

我想分享一下我在这个问题上的经验，时间值是'timespec'，它的'tv_nsec'范围应该保持在[0, 999999999]内，因此如果你将nano值设置为超过1秒，一些linux可能会返回 EINVAL！

```
struct timespec {
    time_t tv_sec;      /* Seconds */
    long   tv_nsec;     /* Nanoseconds [0 .. 999999999] */ 
}; 
```

希望这能帮助你摆脱困境。

# knockout.js - 我应该如何将 AntiXSS 库与 Knockout 库一起使用？

> ID：11319065
> 
> 赞同：0
> 
> 时间：2012-07-03T20:57:16.630
> 
> 标签：knockout.js, antixsslibrary

在一个工作项目中，我最近被分配使用 AntiXSS 库 (v. 4.2.1) 对用户输入进行编码，即使它已经被废弃并且甚至没有最新版本的文档。我环顾四周，发现我可以使用这样的输入：

```
<input type="text" value='<%= Microsoft.Security.Application.AntiXss.HtmlEncode() %>' /> 
```

不幸的是，我正在处理的项目使用 Knockout 库，所以如果我有：

```
<input type="text" data-bind="value: Something" /> 
```

这样的事情可能吗？

```
 <input type="text" data-bind="value: <%= Microsoft.Security.Application.AntiXss.HtmlEncode(Something) %>" /> 
```

编辑：忘记添加输入是在 .ascx 页面中处理的，而不是 .aspx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T08:19:54.427

Knockout 在客户端 (Javascript) 和 AntiXSS 库在服务器端运行。你不能把这两个东西混在一起。在将属性发送到服务器后，您必须在 ascx 页面的代码隐藏中对属性进行编码。

# mysql - 什么回调用于创建和销毁？

> ID：11319066
> 
> 赞同：0
> 
> 时间：2012-07-03T20:57:26.357
> 
> 标签：mysql, ruby-on-rails, ruby, ruby-on-rails-3, activerecord

我从其他一些帖子中发现 cache_counter 不能在 has_many 关联上完成，所以现在我尝试使用回调手动完成。问题是我听说 after_save 对删除不起作用。我希望在创建或销毁某些东西后调用它。我更困惑，因为如果resource_tags被修改它不会正确更新资源我不认为：/

总的来说，我想确保我做对了。

标签有很多资源，资源有很多标签。

我需要最终找出每个标签有多少资源（我不关心每个资源有多少标签）

tag.rb（不确定是否在此处受保护）

```
 has_many :resource_tags
  has_many :resources, :through => :resource_tags

  attr_accessible :name
  attr_protected :resource_count 
```

资源.rb

```
after_save    :cache_resource_count_on_tags

def cache_resource_count_on_tags
  self.tags.each {|tag| tag.update_attribute(:resource_count, tag.resources.count)}
end 
```

我的迁移：

```
class CreateTags < ActiveRecord::Migration
  def change
    create_table :tags do |t|

      t.string  :name
      t.integer :resources_count, :default => 0

      t.timestamps
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-11-23T23:24:58.950

另一种选择是这样做：

```
after_commit :run_something, on: [:create, :destroy] 
```

这将不同于：

```
after_create :run_something
after_destroy :run_something 
```

As`after_commit`在成功提交数据库更改（创建或删除）之前不会运行回调。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T22:11:09.863

创建后和销毁后调用的回调是 after_create 和 after_destroy，如下所示：http: [//guides.rubyonrails.org/active_record_validations_callbacks.html#available-callbacks](http://guides.rubyonrails.org/active_record_validations_callbacks.html#available-callbacks)

因此，为了在其中一些事件之后运行某些东西，您可以这样做：

```
after_create :run_something
after_destroy :run_something

def run_something
  # ...
end 
```

# objective-c - 根据角速度改变速度

> ID：11319073
> 
> 赞同：0
> 
> 时间：2012-07-03T20:57:49.933
> 
> 标签：objective-c, math, cocos2d-iphone, velocity, angle

我以速度值滚动我的背景，`float speed = 50;`我想根据我的精灵在背景上的角度来改变这个速度值，所以看起来精灵在转弯时正在减速。我所有的访问器和修改器都设置好了，我只是无法计算出根据精灵角速度改变背景速度的公式。

这是我的 mutator，无论我使用什么公式来赋予我价值，它都会在我的更新方法中的每个刻度中被删除，如下所示：

```
-(void) setSpeed:(float) value
{
    Speed -= value;
} 
```

然后要真正让背景移动，我使用：

```
-(void) update:(ccTime)delta
{
    if (background.position.y < background2.position.y)
    {
        background.position = ccp(background.contentSize.width / 2, background.position.y - speed * delta);
        background2.position = ccp(background.contentSize.width / 2, background.position.y + background.contentSize.height);
    }
    else
    {
        background2.position = ccp(background2.contentSize.width / 2, background2.position.y - speed * delta);
        background.position = ccp(background2.contentSize.width / 2, background2.position.y + background.contentSize.height);
    }

    //reset
    if (background.position.y <-background.contentSize.height / 2)
    {
        background.position = ccp(background.contentSize.width / 2 ,background2.position.y + background2.contentSize.height);
    } 
    else if (background2.position.y < -background2.contentSize.height / 2)
    {
        background2.position = ccp(background2.contentSize.width / 2, background.position.y + background.contentSize.height);
    }
} 
```

有任何想法吗？

编辑：

我想这样做的更好方法是使背景的速度值完全由玩家精灵旋转生成的公式确定，而不是我一开始就将速度初始化为 50，对公式有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T23:37:31.097

数学时间！:D

您想要的是找到旋转矢量的 y 分量。矢量的大小等于您的速度（又名速度）。

老提醒：SOH-CAH-TOA！

我们将要使用 CAH：*余弦(angleInRadians) = Adjacent / Hypotenuse* ... 在这种情况下，角度是已知的（精灵旋转），Hypotenuse 是已知的（精灵的模拟速度），而 Adjacent 是你的背景在 y 方向上的未知速度。所以，我们解决“相邻”...

上代码：

```
float spriteSpeed = 50.0;
...
float radians = -CC_DEGREES_TO_RADIANS(yourSprite.rotation);
float backgroundYSpeed = cosf(radians) * spriteSpeed; 
```

您还可以使用 Sine 同时水平移动背景：

```
float backgroundXSpeed = sinf(radians) * spriteSpeed; 
```

# objective-c - 显示 NSPrintPanel/NSPrintOperation 后 EDSDK 回调不起作用

> ID：11319078
> 
> 赞同：1
> 
> 时间：2012-07-03T20:58:30.783
> 
> 标签：objective-c, macos, callback, edsdk, nsprintoperation

我目前正在使用佳能 EDSDK 开发一个应用程序来访问我的 DSLR，它将直接打印拍摄的图像。这里的问题是，在我的应用程序显示 NSPrintPanel 或 NSPrintOperation 之前，我与 EDSDK 接口的代码可以完美运行。如果使用“runModalX”或“beginSheetWith”函数显示其中之一，然后再次退出（取消或确定似乎没有区别），那么 EDSDK 中的回调似乎停止工作。我仍然可以与相机交互，下载实时取景图像，拍摄图像，但依赖回调的动作不再有效。一个示例代码，我如何称呼我的 NSPrintPanel 在这里：

```
NSPrintInfo * printInfo = [NSPrintInfo sharedPrintInfo];
NSPrintPanel * printPanel = [NSPrintPanel printPanel];
NSInteger result = [printPanel runModalWithPrintInfo: printInfo]; 
```

这就是我调用 NSPrintOperation 的方式：

```
//view is a NSView with some data added, info is obtained as above
NSPrintOperation * printOp = [NSPrintOperation printOperationWithView: view printInfo: printInfo];
[printOp setShowsPrintPanel: NO];
[printOp runOperation]; 
```

我的想法是，以某种方式显示此面板会与当前应用程序中发送的消息混淆。Xcode 生成的 Cocoa 应用程序模板已经通过“File->Print”菜单为我的应用程序提供了打印功能。如果打印窗口以这种方式显示，它会导致相同的错误，只有当我的应用程序运行时我在我的应用程序外部（例如来自 Safari）显示打印对话框时，它才不会弄乱 EDSDK。

有没有人知道这里的问题可能是什么，甚至如何解决它？

附带说明：如果我使用佳能示例应用程序“相机控制”并添加上述代码，最终会遇到同样的问题：实时取景仍然有效，与相机的任何交互都有效，但不调用回调（因此发送“拍照”命令甚至可以使用快门，但由于相机正在等待计算机下载拍摄的图像，因此之后没有快门释放）。

# c# - 有没有办法自动将视图模型对象映射到 javascript 对象？

> ID：11319080
> 
> 赞同：3
> 
> 时间：2012-07-03T20:58:44.980
> 
> 标签：c#, javascript, asp.net-mvc-3, razor

这个问题是类似的，但没有结论和“否”的自我接受的答案：[自动从 c# 对象生成 javascript 对象模型](https://stackoverflow.com/q/8028664/1026459)

Darin 的这个答案是将对象映射到 Json 的一个很好的例子，尽管我不确定它是否适用于复杂模型：[https ://stackoverflow.com/a/9007578/1026459](https://stackoverflow.com/a/9007578/1026459)

这是我正在查看的示例。鉴于此设置：

视图模型：

```
public class Avm
{
 public int id { get; set; }
 public string name { get; set; }
 public Foo Foo { get; set; }
}

public class Foo
{
 public int id { get; set; }
 public string description { get; set; }
 public List<Bar> Bars { get; set; }
}

public class Bar
{
 public int id { get; set; }
 public string metal { get; set; }
} 
```

**有没有一种可能的方法来定义这个对象模型**：

javascript对象模型：

```
<script>
 var Avm = {};
 Avm.id = @(Model.id);
 Avm.name = "@(Model.name)";
 Avm.Foo = {};
 Avm.Foo.id = @(Model.Foo.id);
 Avm.Foo.description = "@(Model.Foo.description)";
 Avm.Foo.Bars = [];
 var Bar = function(){
  return
  {
   id : var id,
   metal : var metal;
  };
 }
 var Bar0 = new Bar();
 Bar0.id = @(Model.Foo.Bars[0].id);
 Bar0.metal = "@(Model.Foo.Bars[0].metal)";
 Avm.Foo.Bars.push(Bar0);
 //and so on for each Bar.
</script> 
```

**通过**比手动输入更精确的方法？

或者，也许通过帮助者的某种反思，这样它就会变成

```
<script>
 @Html.GenerateJsObjectModel(Model)
<script> 
```

这将调用辅助方法

```
 public static void GenerateJsObjectModel(
        this HtmlHelper html, dynamic model)
    {
      html.ViewContext.Writer.Write("var Avm = {};");
      html.ViewContext.Writer.Write("Avm.id = " + model.id + ");");
      //etc. (except obviously more generic instead of specific)
    } 
```

这是否已经存在于框架中？在这里使用像 JSON 这样的序列化过程会更好吗？如果是这样，在这种情况下将使用什么类型的钩子来绑定 JSON？

在基于视图模型的 javascript 中创建复杂模型的最佳实践方法是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T21:15:02.353

来自 knockout.js 库的类似内容会是您正在寻找的吗？

示例 JSON 对象：

```
var data = {"menu": {
  "id": "file",
  "value": "File",
  "popup": {
    "menuitem": [
      {"value": "New", "onclick": "CreateNewDoc()"},
      {"value": "Open", "onclick": "OpenDoc()"},
      {"value": "Close", "onclick": "CloseDoc()"}
    ]
  }
}} 
```

示例映射

```
var viewModel = ko.mapping.fromJSON(data); 
```

您可以将视图模型序列化到 JSON 服务器端，然后使用它来自动生成 javascript 视图模型。每次从服务器接收数据时，您只需调用 ko.mapping.fromJSON(data) 调用。

链接到文档（非常好）： http: [//knockoutjs.com/documentation/plugins-mapping.html](http://knockoutjs.com/documentation/plugins-mapping.html)

让我知道这是否有帮助/是您想要的。

编辑：这是一个好的 JSON 序列化库的链接，您可以通过 Nuget 安装它来快速演示。 [http://json.codeplex.com/](http://json.codeplex.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T21:20:02.307

我偏爱使用 JavaScriptSerializer。

不知道如何在这里发布要点，所以这里是要点的链接以及相关的代码：

[https://gist.github.com/3043237](https://gist.github.com/3043237)

索引.cshtml

```
@model JSSerializerSample.Models.IndexViewModel
@{
    ViewBag.Title = "Home Page";
}

<h2>@ViewBag.Message</h2>
<p>
    To learn more about ASP.NET MVC visit <a href="http://asp.net/mvc" title="ASP.NET MVC Website">http://asp.net/mvc</a>.
</p>
<div id="userName"></div>
<div id="message"></div>
<div id="complexProperty1"></div>

<script>
    $(function () {
        var options = @Html.Raw(Model.AsJson());
        $("#userName").html(options.UserName);
        $("#message").html(options.Message);
        $("#complexProperty1").html(options.ComplexProperty.ComplexProperty1);
    });
</script> 
```

复杂视图模型.cs

```
namespace JSSerializerSample.Models
{
    public class ComplexViewModel
    {
        public string ComplexProperty1 { get; set; }
    }
} 
```

索引视图模型.cs

```
namespace JSSerializerSample.Models
{
    public class IndexViewModel : BaseViewModel
    {
        public string Message { get; set; }
        public string UserName { get; set; }

        public ComplexViewModel ComplexProperty { get; set; }
    }
} 
```

BaseViewModel.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Web.Script.Serialization;

namespace JSSerializerSample.Models
{
    public abstract class BaseViewModel
    {
        public string AsJson()
        {
            var serializer = new JavaScriptSerializer();
            return serializer.Serialize(this);
        }
    }
} 
```

完整的代码示例可以在这里下载：[https ://github.com/devlife/Sandbox/tree/master/JSSerializerSample](https://github.com/devlife/Sandbox/tree/master/JSSerializerSample)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T21:15:01.590

听起来不像您在尝试提供 JSON，正如您在[另一篇文章](https://stackoverflow.com/questions/8028664/automatically-generate-javascript-object-model-from-c-sharp-object)的回复中所指出的那样，纯粹是为了数据传输，更像是您在尝试使用 MVC3 提供 JSONP。

使用 MVC3 服务 JSONP 即将成为可能。

[服务器端部分的教程](http://blogorama.nerdworks.in/entry-EnablingJSONPcallsonASPNETMVC.aspx)。

[客户端部分的 CodePen 示例](http://codepen.io/devstruck/pen/2/22)。

# abap - 创建数据和创建对象的区别

> ID：11319089
> 
> 赞同：-2
> 
> 时间：2012-07-03T20:59:14.437
> 
> 标签：abap

我们什么时候使用创建数据，什么时候使用创建对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T04:27:29.233

创建数据：CREATE DATA 语句创建一个匿名数据对象并将引用分配给 dref 引用变量的数据对象。默认情况下，数据对象是在当前程序的内部会话中创建的，只要它存在就一直存在是必须的。如果它不再被引用变量引用，它会被垃圾收集器删除。可以使用添加 area_handle 将数据对象创建为共享对象。

创建对象：CREATE OBJECT 语句生成一个类或对象的实例，并将对象引用分配给 oref 引用变量。创建对象后直接调用类的实例构造函数。

# python - DatabaseError no such table with a ManyToManyField

> ID：11319091
> 
> 赞同：3
> 
> 时间：2012-07-03T20:59:27.150
> 
> 标签：python, django, django-models

所以情况就是这样：我正在向我的事件表中添加一个新列（演示者）。我运行了`alter table`sql 语句，运行`python manage.py syncdb`. 我试图能够选择许多配置文件并将它们存储为演示者。为什么会这样？

```
Exception Type:     DatabaseError
Exception Value:    no such table: events_event_presenters

class Event(models.Model):
    title = models.CharField(max_length=200)
    presenters = models.ManyToManyField(Profile, null=True, blank=True) #new column
    sub_heading = models.CharField(max_length=200)
    description = models.TextField()
    date = models.DateTimeField() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T21:49:15.373

您已将 ManyToMany 字段添加到现有表中，syncdb 不会检测到该字段。对我来说，这似乎是 django 的一个缺陷，但我想这是次要的。生成表的最简单方法是运行

```
./manage.py sql events 
```

然后找到定义`events_event_presenters`并粘贴到您的数据库外壳中，通过

```
./manage.py dbshell 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T21:10:41.667

“没有这样的表”意味着您的数据库不包含具有您编写的名称的表。

检查名称是否与数据库中的名称完全相同（如果您保持大小写更好）。如果名称没问题，请将您创建表的数据库模式的名称设置在表名之前，例如 my_schema.my_table。

# ios - AVAudioSessionCategoryPlayAndRecord with Airplay

> ID：11319100
> 
> 赞同：34
> 
> 时间：2012-07-03T20:59:57.823
> 
> 标签：ios, airplay, avaudiosession

我的应用程序使用麦克风并输出音频，因此我将音频会话设置为播放和录制类别，但这似乎禁用了 Airplay。如果我将类别设置为 Play，Airplay 可以很好地处理我的输出（但显然输入不起作用）。

我尝试过覆盖到扬声器的输出路由，以防它需要通过 Airplay 输出，但没有乐趣。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-10T02:02:16.593

您尝试使用哪种 AirPlay 设备？它有麦克风吗？

如果没有，iOS 在使用 PlayAndRecord 类别时不会将其作为选项显示，因为该设备无法播放**和**录制。不过，它会在使用 Play 类别时出现。

另外，如果您使用的设备是蓝牙设备，您是否将 AVAudioSessionCategoryOptionAllowBluetooth 设置为 YES？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-21T03:28:22.563

来自音频会话编程指南 › 使用类别 ›[为 AirPlay 选择类别和模式](https://developer.apple.com/library/content/documentation/Audio/Conceptual/AudioSessionProgrammingGuide/AudioSessionBasics/AudioSessionBasics.html#//apple_ref/doc/uid/TP40007875-CH3-SW15)：

只有特定类别和模式支持 AirPlay。以下类别同时支持 Airplay 的镜像和非镜像版本：

*   `AVAudioSessionCategorySoloAmbient`
*   `AVAudioSessionCategoryAmbient`
*   `AVAudioSessionCategoryPlayback`

该`AVAudioSessionCategoryPlayAndRecord`类别仅支持镜像 Airplay。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-08T18:42:44.527

你可以试试这段代码

```
// Set AVAudioSession
NSError *sessionError = nil;
[[AVAudioSession sharedInstance] setDelegate:self];
[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayAndRecord error:&sessionError];

// Change the default output audio route
UInt32 doChangeDefaultRoute = 1;
AudioSessionSetProperty(kAudioSessionProperty_OverrideCategoryDefaultToSpeaker,
  sizeof(doChangeDefaultRoute), &doChangeDefaultRoute); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-30T20:07:41.547

如果你想改变音频的去向，你需要调用 AudioSessionSetProperty，并传递给它指定你希望音频去向的常量。这些常数是

kAudioSessionOverrideAudioRoute_None，它指定您希望将音频路由到接收器（如果这是它要去的地方，则为空中播放），或者

kAudioSessionOverrideAudioRoute_Speaker，指定音频应该路由到手机底部的扬声器。

# objective-c - Objective C - 根据类型从基类创建具体的类实例

> ID：11319101
> 
> 赞同：3
> 
> 时间：2012-07-03T21:00:08.957
> 
> 标签：objective-c, ios, oop

举一个真实世界的例子，假设基类是 Vehicle，具体类是 TwoWheeler 和 FourWheeler。现在车辆的类型 - TwoWheeler 或 FourWheeler，由基类 Vehicle 决定。当我使用 alloc-init 方法创建 TwoWheeler/FourWheeler 的实例时，它会调用如下所示的超级实现来设置 Vehicle 类中定义的公共属性的值，并且在这些属性中，其中一个是实际决定类型的类型是 TwoWheeler 或 FourWheeler。

```
 if (self = [super initWithDictionary:dict]){
     [self setOtherAttributes:dict]; 
      return self; 
    } 
```

现在，当我收集到一些车辆时，其中一些可能是 TwoWheeler，而另一些可能是 FourWheeler。因此我不能像这样直接创建 TwoWheeler 或 FourWheeler 的实例

```
Vehicle *v = [[TwoWheeler alloc] initWithDictionary:dict]; 
```

有什么方法可以创建基类的实例，一旦我知道类型，根据类型创建子类的实例并返回它。对于当前的实现，它会导致无限循环，因为我从具体类中调用超级实现。

当我不知道应该事先实例化哪个具体类时，处理这种情况的完美设计是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T21:05:55.067

通常这是通过[Factory](http://en.wikipedia.org/wiki/Factory_method_pattern)完成的。

如果您希望工厂成为基类的一部分，那很好，但将来可能会导致问题。在 Objective C 中，类方法是好的工厂。

```
+ (Vehicle *)vehicleWithDictionary:(NSDictionary *)dict
{
    if ([[dict objectForKey:kVehicleType] isEqualToString:@"TwoWheeler"]) {
        return [[[TwoWheeler alloc] initWithDictionary:dict] autorelease];
    } else if ([[dict objectForKey:kVehicleType] isEqualToString @"FourWheeler"]) {
        return [[[FourWheeler alloc] initWithDictionary:dict] autorelease];
    } else {
        return [[[Vehicle alloc] initWithDictionary:dict] autorelease];
    }
} 
```

工厂可以是 Vehicle 类的一部分并按原样使用。

```
// Instead of [[Vehicle alloc] initWithDictionary:dict]
Vehicle *vehicle = [Vehicle vehicleWithDictionary:dict]; 
```

* * *

**更新**

我想出了一种方法来做被问到的事情。让它成为一个光辉的例子，说明为什么它是一个坏主意以及为什么你永远不应该这样做。

```
- (id)initWithDictionary:(NSDictionary *)dict
{
    self = [super init];
    if (self) {
        // If override is in the dictionary, then it mustn't try to call the subclass.
        if (![dict objectForKey:kOverride]) {
            NSMutableDictionary *overrideDict = [NSMutableDictionary dictionaryWithDictionary:dict];
            [overrideDict setObject:@"override" forKey:kOverride];

            if ([[dict objectForKey:kVehicleType] isEqualToString:@"TwoWheeler"]) {
                [self release];
                return [[[TwoWheeler alloc] initWithDictionary:overrideDict] autorelease];
            } else if ([[dict objectForKey:kVehicleType] isEqualToString @"FourWheeler"]) {
                [self release];
                return [[[FourWheeler alloc] initWithDictionary:overrideDict] autorelease];
            }
        }

        // init as normal
    }

    return self;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T21:09:58.283

您应该使用抽象工厂如下，Vehicle 类将有一个名为 createInstance 的方法，该方法将有一个参数，该参数将决定创建什么考虑示例

```
+ (Vehicle*) createInstance:(int)numberOfWheels
{
    if(numberOfWheels == 2)
    {
        return [[TwoWheeler alloc] init];
    }
    else
    {
        return [[FourWheeler alloc] init];
    }

    return nil;
} 
```

你会这样称呼它

```
Vehicle *v = [Vehicle createInstance:2]; 
```

# html - 位置：相对，溢出：隐藏父级和绝对子级

> ID：11319102
> 
> 赞同：7
> 
> 时间：2012-07-03T21:00:11.640
> 
> 标签：html, css, position, overflow, drop-down-menu

好的，这是一个例子：http: [//jsfiddle.net/jGLvk/405/](http://jsfiddle.net/jGLvk/405/)

如果您将鼠标悬停在 9012 菜单上，您将切下绝对的下拉子菜单。从其任何父项中删除位置：绝对或溢出：隐藏：您将拥有正常工作的下拉菜单。

“Overflow-y:visible” 只会生成滚动条而不是显示菜单。

请帮我！在如此棘手的祖先中，我需要一个常规的超级鱼下拉菜单。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T21:06:13.490

Here, take a look. I'm not sure what the `overflow:hidden` is for, but would it work applied to the div `ul`and not the `div`? If so, well do it, and set the `position: relative` on the div. Take a look -> [http://jsfiddle.net/jGLvk/407/](http://jsfiddle.net/jGLvk/407/)

Since the absolutely positioned elements becomes relative to the `div`, it ignores the `overflow:hidden;` set on the `ul`.

# scala - fold 和 foldLeft 方法的区别

> ID：11319111
> 
> 赞同：56
> 
> 时间：2012-07-03T21:00:35.940
> 
> 标签：scala

我不确定Scala`fold`和`foldLeft`Scala 之间有什么区别。

问题[fold 和 foldLeft 或 foldRight 之间的区别？](https://stackoverflow.com/questions/6253978/difference-between-fold-and-foldleft-or-foldright)有一个关于订购的答案。这是可以理解的。但我仍然不明白为什么这有效（来自 REPL）：

```
scala> Array("1","2","3").foldLeft(0)(_ + _.toInt)
res6: Int = 6 
```

但这不会：

```
scala> Array("1","2","3").fold(0)(_ + _.toInt)
<console>:8: error: value toInt is not a member of Any
              Array("1","2","3").fold(0)(_ + _.toInt)
                                               ^ 
```

这个错误信息是什么意思？

文档中的这一行也让我感到困惑。

> **z** - 折叠操作的中性元素；可以将任意次数添加到结果中，并且不得更改结果（例如，Nil 表示列表连接，0 表示加法，或 1 表示乘法。）

为什么会添加*任意次数*？我认为折叠的工作方式不同。

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-07-03T23:02:29.713

正如 Scala 所定义的，`foldLeft`是线性运算，而`fold`允许是树运算。例如：

```
List(1,2,3,4,5).foldLeft(0)(_ + _)
// This is the only valid order of operations
0+1 = 1
      1+2 = 3
            3+3 = 6
                  6+4 = 10
                        10 + 5 = 15
                                 15  // done

List(1,2,3,4,5).fold(0)(_ + _)
// This is valid
0+1 = 1             0+3 = 3           0+5 = 5
      1+2 = 3             3+4 = 7           5
            3         +         7=10        5
                                  10    +   5 = 15
                                                15  // done 
```

为了允许顺序列表的任意树分解，你必须有一个不做任何事情的零（所以你可以在树中任何你需要的地方添加它）并且你必须创建你认为的相同类型的东西您的二进制参数，因此类型不会根据您分解树的方式而改变。

（能够评估为一棵树对并行化很有好处。如果您希望能够随时转换输出时间，您需要一个组合运算符*和*一个标准的 start-value-transforms-sequence-element-to-desired -type 函数就像`foldLeft`has。Scala 有 this 并调用它`aggregate`，但在某些方面 this 更像`foldLeft`是`fold`。）

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-07-03T21:18:23.367

我不熟悉 Scala，但 Scala 的集合库与 Haskell 的设计相似。这个答案基于 Haskell，对于 Scala 也可能是准确的。

因为`foldLeft`从左到右处理它的输入，它可以有不同的输入和输出类型。另一方面，`fold`可以以各种顺序处理其输入，因此输入和输出必须具有相同的类型。这通过展开折叠表达式最容易看到。 `foldLeft`按特定顺序运行：

```
Array("1","2","3").foldLeft(0)(_ + _.toInt)
= ((0 + "1".toInt) + "2".toInt) + "3".toInt 
```

请注意，数组元素永远不会用作组合函数的第一个参数。它们总是出现在`+`.

`fold`不保证特定的顺序。它可以做各种事情，例如：

```
Array("1","2","3").fold(0)(_ + _.toInt)
=  ((0 + "1".toInt) + "2".toInt) + "3".toInt
or (0 + "1".toInt) + ("2" + "3".toInt).toInt
or "1" + ("2" + ("3" + 0.toInt).toInt).toInt 
```

数组元素可以出现在组合函数的任一参数中。但是你的组合函数期望它的第一个参数是一个 int。如果您不尊重该约束，您最终会将字符串添加到整数！此错误被类型系统捕获。

可以多次引入中性元素，因为通常通过拆分输入并执行多个顺序折叠来实现并行折叠。顺序折叠一次引入了中性元素。想象一个特定的执行，`Array(1,2,3,4).fold(0)(_ + _)`其中数组被拆分为两个单独的数组，这些数组在两个线程中按顺序折叠。（当然，真正的`fold`函数不会把数组吐成多个数组。）一个线程执行`Array(1,2).fold(0)(_ + _)`，计算`0 + 1 + 2`。另一个线程执行`Array(3,4).fold(0)(_ + _)`，计算`0 + 3 + 4`。最后，将两个线程的部分和相加。请注意，中性元素`0`出现两次。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-07-03T21:13:28.423

注意：我在这里可能完全错了。我的 scala 并不完美。

我认为区别在于方法的签名：

```
def fold[A1 >: A](z: A1)(op: (A1, A1) ⇒ A1): A1 
```

对比

```
def foldLeft[B](z: B)(op: (B, T) ⇒ B): B 
```

简而言之，折叠被定义为对某种类型 A1 进行操作，它是数组类型的超类型，对于您的字符串数组，编译器将其定义为“Any”（可能是因为它需要一种可以存储您的 String*或*int-notice的类型传递给 fold Fold 的组合器方法需要两个相同类型的参数？）这也是文档在谈到 z 时的含义 - Fold 的实现可能是它并行组合您的输入，例如：

```
"1" + "2" --\
             --> 3 + 3 -> 6
"3" + *z* --/ 
```

另一方面， foldLeft 对 B 类型（不受约束）进行操作，并且只要求您提供一个组合器方法，该方法采用 B 类型的参数和数组类型的另一个参数（在您的情况下为字符串），并产生一个 B。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-07-03T22:57:11.583

**错误。**您收到编译时错误，因为签名`fold`仅允许折叠类型的值，该类型是集合中值类型的超类型，并且是`String`（您的集合类型）和`Int`（您提供的零的类型）的唯一超类型元素）是`Any`。因此，折叠结果的类型被推断为`Any`- 并且`Any`没有方法`toInt`。

请注意，两个版本的`fold`签名不同：

```
fold[A1 >: A](z: A1)(op: (A1, A1) => A1): A1

foldLeft[B](z: B)(f: (B, A) => B): B 
```

为什么他们有不同的签名？这是因为`fold`可以并行实现，就像并行集合一样。当多个处理器折叠集合中的值时，每个处理器都会获取 type 元素的子集，并通过连续应用来`A`生成 type 的折叠值。这些处理器产生的结果必须组合成一个最终的折叠值——这是使用函数完成的，它就是这样做的。`A1``op``op`

现在，请注意，这不能使用`f`in完成`foldLeft`，因为每个处理器都会产生类型的折叠值`B`。`B`不能使用 组合多个类型的值`f`，因为`f`只能将值`B`与另一个类型的值组合 - 类型和`A`之间没有对应关系。`A``B`

**例子。**在您的示例中，假设第一个处理器采用元素`"1", "2"`，第二个处理器采用 element `"3"`。第一个将产生折叠值`3`，第二个将产生另一个折叠值`3`。现在他们必须结合他们的结果来获得最终的折叠值——这是不可能的，因为闭包`_ + _.toInt`只知道如何结合一个`Int`and`String`而不是 2 个`Int`值。

对于这些类型不同的情况，请使用`aggregate`，其中您必须定义如何组合 type 的两个值`B`：

```
def aggregate[B](z: B)(seqop: (B, A) => B, combop: (B, B) => B): B 
```

上面定义了当`combop`折叠结果和集合中的元素具有不同类型时如何做最后一步。

**中性元素。**如上所述，多个处理器可以折叠集合中的元素子集。它们中的每一个都将通过添加中性元素来开始其折叠值。

在以下示例中：

```
List(1, 2, 3).foldLeft(4)(_ + _) 
```

总是返回`10 = 4 + 1 + 2 + 3`。

但是，`4`不应与 一起使用`fold`，因为它不是中性元素：

```
List(1, 2, 3).fold(4)(_ + _) 
```

以上可能返回`(4 + 1 + 2) + (4 + 3) = 14`或`(4 + 1) + (4 + 2) + (4 + 3) = 18`。如果您不对 使用中性元素`fold`，则结果是不确定的。同理，您可以将`Nil`用作中性元素，但不能用作非空列表。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-07-03T21:35:48.457

正如另一个答案指出的那样，该`fold`方法主要用于支持平行折叠。您可以看到如下。首先，我们可以为整数定义一种包装器，它允许我们跟踪对其实例执行的操作。

```
case class TrackInt(v: Int) {
  val log = collection.mutable.Buffer.empty[Int]
  def plus(that: TrackInt) = {
    this.log += that.v
    that.log += this.v
    new TrackInt(this.v + that.v)
  }
} 
```

接下来我们可以创建这些东西的并行集合和一个标识元素：

```
val xs = (1 to 10).map(TrackInt(_)).par
val zero = TrackInt(0) 
```

首先我们会尝试`foldLeft`：

```
scala> xs.foldLeft(zero)(_ plus _)
res0: TrackInt = TrackInt(55)

scala> zero.log
res1: scala.collection.mutable.Buffer[Int] = ArrayBuffer(1) 
```

因此，正如我们所料，我们的零值只使用一次，因为`foldLeft`执行顺序折叠。接下来我们可以清除日志并尝试`fold`：

```
scala> zero.log.clear()

scala> xs.fold(zero)(_ plus _)
res2: TrackInt = TrackInt(55)

scala> zero.log
res3: scala.collection.mutable.Buffer[Int] = ArrayBuffer(1, 6, 2, 7, 8) 
```

所以我们可以看到折叠已经被并行化，使得零值被多次使用。如果我们再次运行它，我们可能会在日志中看到不同的值。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-07-03T21:13:47.987

## 一般差异

这是方法的原型

```
fold[A1 >: A](z: A1)(op: (A1, A1) ⇒ A1): A1
foldLeft[B](z: B)(f: (B, A) ⇒ B): B 
```

因此，对于 fold 结果是 type`A1 >: A`而不是 any `B`。此外，如文档中`fold`所述，订单不是

## 关于你的错误

键入时`scala> Array("1","2","3").fold(0)(_ + _.toInt)`，您假定`0`an`int`是 的子类型`String`。这就是编译器抛出错误的原因。

## 关于折叠中的奇怪 z

在这里，我们必须查看[执行](https://github.com/scala/scala/blob/v2.9.2/src/library/scala/collection/GenTraversableOnce.scala#L115)以`fold`了解发生了什么。这是我们得到的：

```
def fold[A1 >: A](z: A1)(op: (A1, A1) => A1): A1 = foldLeft(z)(op) 
```

所以基本上，`fold`是一个`foldleft`对输出类型有约束的实现。我们现在可以看到，`z`在实践中将使用与 中相同的方式`foldleft`。因此，我们可以得出结论，之所以做出此评论，是因为在未来的实现中没有任何东西可以保证这种行为。我们现在已经可以看到它了，有[相似之处](https://github.com/scala/scala/blob/v2.9.2/src/library/scala/collection/parallel/ParIterableLike.scala#L397)：

```
def fold[U >: T](z: U)(op: (U, U) => U): U = {
  executeAndWaitResult(new Fold(z, op, splitter))
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-05-20T03:59:00.827

已经提到过，但没有示例：如果您想允许输出和输入的不同数据类型的并行性，您可以使用[`aggregate`](https://www.scala-lang.org/api/2.11.2/index.html#scala.collection.immutable.List)：

```
Array("1","2","3").aggregate(0)(_ + _.toInt, _ + _) 
```

第一个函数首先被调用。然后用第二个函数减少它的结果。请参阅[聚合 scala 函数的说明](https://stackoverflow.com/questions/26761087/explanation-of-the-aggregate-scala-function)。

# python - 如何为 Eric IDE 安装 Django 插件？

> ID：11319116
> 
> 赞同：0
> 
> 时间：2012-07-03T21:01:01.133
> 
> 标签：python, django, ide, eric-ide

我不敢相信我不得不问这个问题，但我花了将近三个小时来寻找答案。无论如何，我在我的 linux 发行版上安装了 Eric IDE 4。我似乎无法将任何插件下载到插件存储库。

我唯一真正想要的是 Django 插件，所以当我在 Eric 中开始一个新项目时，Django 选项会显示。插件存储库只向我显示了一个 .eric4/eric4plugins 的空文件夹，并且没有跟进我可以从其他地方获取插件的位置。实际上，在 Eric 文档网站上有一个提示，但我最终得到的是 eric 的整个后备箱。树干附带的插件只是它附带的基本插件。我没有得到 Django，而且 Eric 网站上的文档严重缺乏并且过于复杂。

任何人都知道我怎样才能让Django snap in？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T23:25:06.937

在`Plugins`下拉菜单中单击`Plugin repository...` 确保存储库 URL 为：`http://eric-ide.python-projects.org/plugins4/repository.xml` ，然后单击更新。

Django 插件将显示在可用插件列表中，单击它，然后单击下载按钮。那应该为您下载插件。

之后，您还需要实际安装插件：在`Plugins dropdown`菜单中单击`Install plugins`. 然后选择你新下载的 Django 插件并安装它。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-11T20:19:09.990

添加到 ryuusenshi 的好答案，您还必须检查环境是否正确设置

```
settings -> preferences -> debugger -> python3 
```

和

```
settings -> preferences -> django 
```

# jquery - 如何用jquery解析这个json？

> ID：11319117
> 
> 赞同：0
> 
> 时间：2012-07-03T21:01:02.083
> 
> 标签：jquery, json

我正在尝试使用 socket.io 创建我的第一个 node.js 程序，我想存储聊天历史记录，然后当用户加入时，将聊天历史记录推送到他的浏览器。我有聊天保存和推送，发送的 json 如下所示：

```
[
    [
        {
            "username": "Warren2",
            "text": "Test"
        },
        {
            "username": "Warren2",
            "text": "Test2"
        },
        {
            "username": "Warren2",
            "text": "Test3"
        }
    ]
] 
```

在我的 html 页面上，我有一个 javascript 有这个

```
socket.on('updatehistory', function(data) {

} 
```

我放在那里的代码将在推送 updatehistory 消息时执行。我是一个n00b，很迷茫哈哈。这是我尝试过的：

```
socket.on('updatehistory', function (data) {
   $.each(json.results, function(username,text){
      $('#conversation').append('<b>'+ username + ':</b> ' + text + '<br>');
  });
}); 
```

这是来自 node.js 的 updatehistory 事件的确切调试消息

```
debug - websocket writing 5:::{"name":"updatehistory","args":[[{"username":"W
arren2","text":"Test"},{"username":"Warren2","text":"Test2"},{"username":"Warren
2","text":"Test3"}]]} 
```

有人可以帮我弄清楚如何解析它（最好用jquery）。谢谢 :D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T21:06:30.650

我喜欢这个解决方案： [http ://www.rahulsingla.com/blog/2010/05/jquery-encode-decode-arbitrary-objects-to-and-from-json/](http://www.rahulsingla.com/blog/2010/05/jquery-encode-decode-arbitrary-objects-to-and-from-json/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T22:00:44.037

如果您想自己完成所有操作，我会给您一种遍历数据的方法，它只有 5 行代码。这是第一个。我已经提醒用户名和密码，以向您展示它在示例中确实有效.

[http://jsfiddle.net/shivkumarganesh/gfff5/](http://jsfiddle.net/shivkumarganesh/gfff5/)

```
 $(document).ready(function(){
        var k=[
    [
        {
            "username": "Warren1",
            "text": "Test"
        },
        {
            "username": "Warren2",
            "text": "Test2"
        },
        {
            "username": "Warren3",
            "text": "Test3"
        }
    ]
];

for(i in k)
    {
    var l=k[i];
     for (j in l)
    {
        alert("Username:"+l[j].username+" --  Message:"+l[j].text);
    }
    }​
    }); 
```

既没有`JSON.parse()`也没有`$.parseJson`工作。所以我认为这是最好的解决方案。

# python - 抓住单个短字符串的两个部分

> ID：11319123
> 
> 赞同：0
> 
> 时间：2012-07-03T21:01:13.510
> 
> 标签：python, regex, id3

我正在寻找`dict`用`TAG`:`definition`对填充 python，并且我正在使用 RegExr [http://gskinner.com/RegExr/](http://gskinner.com/RegExr/)来编写正则表达式

我的第一步是从[http://www.id3.org/id3v2.3.0](http://www.id3.org/id3v2.3.0)或[http://pastebin.com/VJEBGauL](http://pastebin.com/VJEBGauL)解析一行，然后提取 ID3 标记和相关定义。例如第一行：

```
4.20    AENC    [#sec4.20 Audio encryption] 
```

看起来像这样`myDict = {'AENC' : 'Audio encryption'}`

为了获取标签名称，我已经让它寻找至少 3 个空格，然后是 4 个字符，然后是 4 个空格：`{3}[a-zA-Z0-9]{4} {4}`这部分很简单。

第二部分，定义，不适合我。到目前为止，我已经找到了`(?<=(\[#.+?)) A`应该找到的内容，但在`[#`找到: 之前不包括以及不确定的字符集`_A`，但它失败了。如果我删除`.+?`并替换它就可以了`_A`。`s`出了什么问题？*下划线代表空格，SO 上不显示。

**如何`(Audio encryption)`使用 RegEx 从行中获取 ID3v2 标签的定义？**

编辑：感谢我得到的答案`mVChr`，我为其他尝试做同样事情的人写了这篇文章：http: [//pastebin.com/0nT74dpB](http://pastebin.com/0nT74dpB)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T21:06:01.213

您应该使用捕获组`()`仅提取您需要的内容：

```
import re
line = '4.20    AENC    [#sec4.20 Audio encryption]'
full_match = re.search(r'^\S+\s+(\S+)\s+\[#\S+ (.*?)\]', line)
dict_key = full_match.group(1)   # 'AENC'
id3v2_tag = full_match.group(2)  # 'Audio encryption' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T21:25:31.893

像这样的东西？请注意我刚刚用于`line.split()`第一部分的方式。

```
import re
line = '4.20    AENC    [#sec4.20 Audio encryption]'

_, tag, arguments = line.split(None, 2)
m = re.match(r"\[\S+ (.*)\]", arguments)
myDict[tag] = m.groups()[0] 
```

当然，由于 ID3 语法看起来很简单，你可以不用正则表达式来做整个事情：

```
_, tag, arguments = line.split(None, 2)
myDict[tag] = arguments.strip(" []").split(None, 1)[1] 
```

当然，如果`line`是空的，`ValueError`当你尝试将值解包到`_, tag, arguments`. 解决此问题的一种方法是在运行上述代码*之前测试每一行：*

```
for line in file_object:
    if line.strip():
        #the above code here. 
```

# asp.net - 使用多个位置标签进行授权是不好的做法吗？

> ID：11319124
> 
> 赞同：0
> 
> 时间：2012-07-03T21:01:31.420
> 
> 标签：asp.net, asp.net-membership, authorization

我想知道为单个 .aspx 页面授权添加一大堆位置标签是否是不好的做法？

```
<location path="mypage.aspx" >
<system.web>
  <authorization>
    <allow users="User1,User5"/>
    <deny users="*"/>
  </authorization>
</system.web>
</location> 
```

我意识到您可以将路径指定为目录，然后该目录中的所有页面都使用授权规则，但是我希望页面保留在根目录中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T21:05:56.800

这取决于您的权限需要多细，但这肯定是维护的噩梦。如果整个网站都是这样设置的，你付给我的钱就不够维护这样的网站了。

您最好分配角色，将人员分配给角色，并尽可能在文件夹级别和绝对必要的页面级别进行。

当然，例外情况是，如果只有几页这样的页面，这是绝对必要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T21:06:27.833

除了通过采用这种方法来创建更高的维护和更容易出错的情况之外，它本身没有任何问题。如果它是一个包含敏感信息的网站，最好组织得更彻底。

此外，它还取决于网站包含的页面数量。如果整个网站是 4 或 5 页，那是一回事，但如果它是 20-30 或更多....哎呀。

# javascript - 尽管有浏览器设置，是否可以在新窗口而不是新选项卡中弹出链接的 html

> ID：11319133
> 
> 赞同：0
> 
> 时间：2012-07-03T21:02:25.333
> 
> 标签：javascript, firefox, router

我有 mozzilla firefox（技术上是 Aurora 15）浏览器，并且我设置了浏览器，因此所有新窗口都在新选项卡中打开。直到最近，我仍然无法使用任何类型的 javascript 或类似的东西在新窗口中弹出链接。但令我惊讶的是，我的路由器的“站点”能够做到这一点。（你用 192.168.0.1 访问的东西）

我有一个 Netgear 调制解调器路由器 (DG834G)。

当我转到`Basic Settings`页面底部时，我有`Test`一个按钮，当我单击它时，会弹出一个新窗口，每隔几秒钟刷新一次，告诉您连接状态等，如果连接成功，它会将您定向到 netgear 网站。

我不明白的是网站如何在新窗口中弹出。从我看到的路由器正在使用 javascript 来执行此操作。是否可以使用 javascript 完成此操作，或者路由器是否接受特殊处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T21:11:29.657

是的。只需添加宽度和高度，浏览器（不是全部）将在新窗口而不是选项卡中打开它。

```
window.open(url, windowName, "height=200,width=200"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T21:07:39.847

通常会`window.open();`打开一个新窗口。

有关它的更多信息：[https ://developer.mozilla.org/en/DOM/window.open](https://developer.mozilla.org/en/DOM/window.open)

如果这对您不起作用，您能否发布页面中使用的 javascript，以便我们看一下？

# oracle - 如何在 Oracle 中另一个选择查询的 from 子句中使用选择查询中的表名

> ID：11319135
> 
> 赞同：1
> 
> 时间：2012-07-03T21:02:32.077
> 
> 标签：oracle, select

我需要以下输出

*   队列名称：队列的名称
*   状态：0 就绪，1 等待，2 已处理，3 已过期 - 队列表
*   计数：统计该状态的队列表中的记录数。

例子

```
Queue Name         State         Count
---------------------------------------
Email_Q            Processed      5939
Email_response_Q   Waiting         133 
```

我构造了以下SQL

```
SELECT 'select ''' || owner || '.' || name || ''' queue_name, 
        decode(state,0,''Ready'',1,''Waiting'',2,''Processed'',3,''Expired'',''?'') state, 
        count(*) count 
        from ' || owner || '.' || queue_table || 
        ' where q_name = ''' || name || ''' group by state' cmd
  FROM all_queues
 WHERE owner IN ('AMADEUS')
 ORDER BY owner, name; 
```

我能够为 Queue 表构建所有选择。但我想使用 select 语句获取输出。

我在考虑管道功能或使用全局临时表。任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T09:32:09.323

```
DECLARE
   sqlStr VARCHAR2(2000);
BEGIN

   dbms_output.put_line(RPAD('queue_name',30,' ') || RPAD('State',30,' ')  || LPAD('Count',30,' ') );             
   FOR rec_ IN ( SELECT 'select ''' || OWNER || '.' || NAME ||
                        ''' queue_name,          decode(state,0,''Ready'',1,''Waiting'',2,''Processed'',3,''Expired'',''?'') state,          count(*) count          from ' ||
                        OWNER || '.' || QUEUE_TABLE || ' where q_name = ''' || NAME ||
                        ''' group by state' CMD
                 FROM ALL_QUEUES
                 WHERE OWNER IN ('AMADEUS')
                 ORDER BY OWNER, NAME               
               ) LOOP
      sqlStr := 'BEGIN
                    FOR rec_ IN (' || rec_.cmd ||
                                 ') LOOP
                       dbms_output.put_line( RPAD(rec_.queue_name,30,'' '') || RPAD(rec_.State,30,'' '')  || LPAD(rec_.Count,30,'' '') );   
                    END LOOP;
                 END;';
      EXECUTE IMMEDIATE sqlStr ;
   END LOOP;   
END; 
```

# java - 如何使 Android 的 Singleton 对象持久化

> ID：11319136
> 
> 赞同：-1
> 
> 时间：2012-07-03T21:02:33.373
> 
> 标签：java, android, persistent

在我的应用程序中，我有一个与所有活动通信并拥有所有应用程序数据的单例类。突然之间，对象开始变为空。当我更改顶级活动（使用意图）时，它似乎正在发生。是否有一种简单的方法可以确保只要我的活动可见，对象就会持续存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T21:32:09.363

我认为一个新的顶级活动是在一个新的过程中进行的（在[http://developer.android.com/reference/android/app/Activity.html#ProcessLifecycle](http://developer.android.com/reference/android/app/Activity.html#ProcessLifecycle)的行之间阅读）。

Android 更有可能杀死存在于后台的 Activity 进程，这包括顶级 Activity 落后于另一个 Activity 时。

我认为一个更好的解决方案可能是让你的 Singleton 透明地初始化自己，如果需要的话，从磁盘加载和保存任何状态（一个非常标准的单例范例）。没有办法通过跨新旧活动的单个实例来解决您的问题。

编辑：我不相信服务是要走的路。服务用于在手机后台进行活动，而您所说的是数据存储和检索。我认为，最自然的方法是让每个 Activity 对它是否是第一个 Activity 都具有鲁棒性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T21:11:31.810

如果是我，我会使用 a[`Service`](http://developer.android.com/reference/android/app/Service.html)而不是单例来管理跨活动共享的应用程序数据。它会更加健壮。

有关详细信息，请参阅[服务开发人员指南](http://developer.android.com/guide/components/services.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T21:26:45.140

您必须错误地使用单例，单例对象应该在应用程序生命周期内有效。是否重新创建和销毁此应用程序中的活动并不重要。

但是，如果您的单例正在引用活动（例如，活动上下文，活动变量，如小部件），那么即使单例对象本身仍然有效，这些变量/上下文也可能在某些时候无效。

# php - 使用 set_error_handler 多次回显包含错误

> ID：11319137
> 
> 赞同：0
> 
> 时间：2012-07-03T21:02:33.943
> 
> 标签：php, error-handling

为什么包含错误会回显四次？

系统是否尝试 4 次“打开流”？

我做了：

```
function errorHandler($errno, $errstr, $errfile, $errline) {
    if ($errno == E_NOTICE ) {
        echo "<br/>".$errno."== E_NOTICE<br/>";
    }
    if ($errno == E_USER_NOTICE) {
        echo "<br/>".$errno."== E_USER_NOTICE<br/>";
    }
    if ($errno == E_DEPRECATED) {
        echo "<br/>".$errno."== E_DEPRECATED<br/>";
    }
    if ($errno == E_USER_DEPRECATED) {
        echo "<br/>".$errno."== E_USER_DEPRECATED<br/>";
    }
    if ($errno == E_STRICT) {
        echo "<br/>".$errno."== E_STRICT<br/>";
    }
    if ($errno == E_WARNING) {
        echo "<br/>".$errno."== E_WARNING<br/>";
    }
    if ($errno == E_USER_WARNING) {
        echo "<br/>".$errno."== E_USER_WARNING<br/>";
    }
    if ($errno == E_ERROR) {
        echo "<br/>".$errno."== E_ERROR<br/>";
    }
    if ($errno == E_USER_ERROR) {
        echo "<br/>".$errno."== E_USER_ERROR<br/>";
    }
}
set_error_handler("errorHandler"); 
```

结果 ：

```
2== E_WARNING

2== E_WARNING

2== E_WARNING

2== E_WARNING 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T21:36:28.303

如果没有看到与您的错误有关的其他信息，很难说。

> 根据给定的文件路径包含文件，如果没有给出，则根据指定的 include_path 包含文件。如果在 include_path 中找不到该文件，则 include 最终会在失败之前检查调用脚本自己的目录和当前工作目录。如果找不到文件，include 构造将发出警告；这是与 require 不同的行为，后者会发出致命错误。

[include()](http://php.net/manual/en/function.include.php)的文档。

> 在查找要包含的文件时，PHP 会分别考虑包含路径中的每个条目。它将检查第一个路径，如果找不到，则检查下一个路径，直到找到包含的文件或返回警告或错误。您可以在运行时使用 set_include_path() 修改或设置包含路径。

根据包含过程的 PHP[文档](http://www.php.net/manual/en/ini.core.php#ini.include-path)。

在旁注中，我对您提供的自定义`errorHandler()`函数进行了一些修改。

```
<?php
function errorHandler($errno, $errstr, $errfile, $errline) {
    $response;

    switch ($errno){
        case E_NOTICE:
            $reponse = 'E_NOTICE';
            break;

        case E_USER_NOTICE:
            $reponse = 'E_USER_NOTICE';
            break;

        case E_DEPRECATED:
            $reponse = 'E_DEPRECATED';
            break;

        case E_USER_DEPRECATED:
            $reponse = 'E_USER_DEPRECATED';
            break;

        case E_STRICT:
            $reponse = 'E_STRICT';
            break;

        case E_WARNING:
            $reponse = 'E_WARNING';
            break;

        case E_USER_WARNING:
            $reponse = 'E_USER_WARNING';
            break;

        case E_ERROR:
            $reponse = 'E_ERROR';
            break;

        case E_USER_ERROR:
            $reponse = 'E_USER_ERROR';
            break;
    }
    echo "<br />Errno: [$errno]; Type: [$reponse]<br />";
    echo "<br />Error on line [$errline] in file [$errfile]<br />";
    echo "<br />Error: ". $errstr . "<br />";
}

set_error_handler("errorHandler"); 

?> 
```

# ruby-on-rails - 使用现有的 SQL Server 数据库创建网站

> ID：11319139
> 
> 赞同：0
> 
> 时间：2012-07-03T21:02:40.437
> 
> 标签：ruby-on-rails, sql-server, asp.net-mvc

我有一个现有的 SQL Server 数据库，我想创建一个可以使用它的站点。我以前使用过 RoR 和 ASP NET MVC 3，但在这些技术中，数据库似乎是内置在应用程序本身中的。鉴于我的限制（使用现有数据库），实现这一目标的最佳技术是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T21:12:32.370

是的，我必须同意 pst ......这是一个相当广泛的“问题”。我们的大多数新网站都使用 C# 和 ASP.NET 4.0。然后我们使用 WCF 数据层与我们的 SQL 数据库对话，并将自定义对象从 WCF 传递到网站以使用。抽象您的站点和数据层为我们提供了许多好处，但这一切都取决于您的项目范围。当涉及到如何开发前端时，WCF 还为您提供了相当大的灵活性。虽然我们在某些地区从 ASP.NET 网站使用它，但其他地方使用 PHP 使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T21:11:03.480

这当然是意见

你需要的第一件事是freetds，

[freetds.org](http://freetds.org)

然后你需要安装 SQLServer Adapter

[https://github.com/rails-sqlserver/activerecord-sqlserver-adapter.git](https://github.com/rails-sqlserver/activerecord-sqlserver-adapter.git)

然后是 TidyTDS：

[https://github.com/rails-sqlserver/tiny_tds.git](https://github.com/rails-sqlserver/tiny_tds.git)

这篇文章可能会有所帮助：

[对未命名为复数的表使用 ActiveRecord](https://stackoverflow.com/questions/11318725/using-activerecord-for-tables-that-arent-named-as-plurals/11319081#11319081)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T23:09:41.890

如果您的意思是您一直使用从代码生成数据库的 ORM 而不是相反，那么您需要的可能是[Linq to SQL](http://weblogs.asp.net/scottgu/archive/2007/05/19/using-linq-to-sql-part-1.aspx)，但您也可以使用许多其他 ORM 来实现这一点。

# objective-c - iOS 应用程序在 UITextField 文本输入后崩溃，弹出，然后推送我的导航控制器（NSISObjectiveLinearExpression coefficientForVariable）

> ID：11319144
> 
> 赞同：4
> 
> 时间：2012-07-03T21:03:06.280
> 
> 标签：objective-c, ios, xcode, unrecognized-selector

当我执行以下操作时，我的 iOS 应用程序崩溃：

*   在导航控制器中显示我的“登录”视图控制器
*   在上面输入文本`UITextField`，然后尝试登录失败
*   弹回上面的视图控制器
*   推送到不同的视图控制器（在此处崩溃）

如果**我**跳过将文本输入到`UITextField`.

有谁知道为什么？这是我收到的错误消息。

`[NSISObjectiveLinearExpression coefficientForVariable:]: unrecognized selector sent to instance 0x1cd93850`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T14:54:46.253

我也有这个问题。使用 ARC，如果我将 a 添加`UITextField`到原本为空的 xib 并在编辑该字段后弹出导航控制器堆栈的视图控制器，我会发生此崩溃。文本字段没有代表集，也没有连接到它的插座。然而它正在崩溃！

（如果你的情况和我一样，你没有`NSISObjectiveLinearExpression`像 mydogisbox 建议的那样实例化 a 。）

经过大量搜索，我找到[了这个答案](https://stackoverflow.com/a/4066777/168594)，它建议调用`endEditing:`你的`viewWillDisappear`方法。它似乎解决了我的崩溃问题。

```
- (void) viewWillDisappear: (BOOL) animated {
    [super viewWillDisappear: animated];
    NSLog( @"In viewWillDisappear" );
    // Force any text fields that might be being edited to end so the text is stored
    [self.view.window endEditing: YES];
} 
```

# xslt - 是否存在允许检查/解压缩文件的现有 XSLT 扩展？

> ID：11319146
> 
> 赞同：2
> 
> 时间：2012-07-03T21:03:11.353
> 
> 标签：xslt, zip

在我编写自己的 java 扩展之前，我正在寻找一个 xslt 功能或 xslt 扩展，以允许检查 zip 文件的内容并解压缩内容。

我尝试查看 xslt 2.0 规范，没有提到任何解压缩。我尝试了谷歌搜索，得到了一个实验性的 expath.org/mod/zip，但编译器说找不到匹配的函数“entries()”。

谢谢，

杰森

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T01:40:32.610

> 是否存在允许检查/解压缩文件的现有 XSLT 扩展？

**是的——我知道的一个是[EXPath 的 Zip 模块](http://expath.org/modules/zip/)**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T19:19:10.233

我最终用 Java 编写了一个扩展来检查和解压缩 zip 文件。

谢谢，

杰森

# .htaccess - .htaccess - 带有 RewriteRule 代理的 mod_dir

> ID：11319152
> 
> 赞同：0
> 
> 时间：2012-07-03T21:03:56.770
> 
> 标签：.htaccess, mod-rewrite, mod-proxy

我遇到了一个不寻常的问题。我有一系列网站指向我的托管网站，例如：

[http://sub.mydomain.com/help/](http://sub.mydomain.com/help/)

所有这些其他站点都使用这个 .htaccess 文件

```
Options +FollowSymLinks -Indexes
RewriteEngine on

RewriteRule ^(.*)$ http://sub.mydomain.com/$1 [P,E=Proxy-Host:sub.mydomain.com] 
```

它在很大程度上工作得很好。我们将这些其他域之一称为“sub.otherdomain.com”。

如果我去`http://sub.otherdomain.com/help/`它工作正常。

如果我去`http://sub.otherdomain.com/help`它会被重定向到`http://sub.mydomain.com/help/`

原因是[mod_dir](http://httpd.apache.org/docs/2.0/mod/mod_dir.html#directoryindex)将 / 重定向到主域。

我希望它将 / 重定向到代理域。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T20:48:29.237

您需要设置`ProxyPassReverse`. 这不能在 htaccess 中完成。您需要在该`<VirtualHost>`部分中添加它。

# r - What is a fast way to set debugging code at a given line in a function?

> ID：11319161
> 
> 赞同：21
> 
> 时间：2012-07-03T21:04:44.397
> 
> 标签：r, debugging

## Preamble:

R's `trace()` is a powerful debugging tool, allowing users to "insert debugging code at chosen places in any function". Unfortunately, using it from the command-line can be fairly laborious.

As an artificial example, let's say I want to insert debugging code that will report the between-tick interval calculated by `pretty.default()`. I'd like to insert the code immediately after the value of `delta` is calculated, about four lines up from the bottom of the function definition. (Type `pretty.default` to see where I mean.) To indicate that line, I need to find which step in the code it corresponds to. The answer turns out to be step `list(c(12, 3, 3))`, which I zero in on by running through the following steps:

```
as.list(body(pretty.default))
as.list(as.list(body(pretty.default))[[12]])
as.list(as.list(as.list(body(pretty.default))[[12]])[[3]])
as.list(as.list(as.list(body(pretty.default))[[12]])[[3]])[[3]] 
```

I can then insert debugging code like this:

```
trace(what = 'pretty.default',
      tracer = quote(cat("\nThe value of delta is: ", delta, "\n\n")), 
      at = list(c(12,3,3)))
## Try it
a <- pretty(c(1, 7843))
b <- pretty(c(2, 23))
## Clean up
untrace('pretty.default') 
```

## Questions:

So here are my questions: Is there a way to print out a function (or a parsed version of it) with the lines nicely labeled by the steps to which they belong? (According to Venables and Ripley, S-plus has a function `tprint()` that "produces a numbered listing of the body of a function for use with the `at` argument of `trace`", but R seems to have no equivalent.) Alternatively, is there another easier way, from the command line, to quickly set debugging code for a specific line within a function?

## Addendum:

I used the `pretty.default()` example because it is reasonably tame, but with real/interesting functions, repeatedly using `as.list()` quickly gets tiresome and distracting. Here's an example:

```
as.list(as.list(as.list(as.list(as.list(as.list(as.list(as.list(as.list(body(#
model.frame.default))[[26]])[[3]])[[2]])[[4]])[[3]])[[4]])[[4]])[[4]])[[3]] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T21:53:20.853

`pretty.default`这里有一些对and非常有效的东西`model.frame.default`。

```
print.func <- function(func, ...) {
  str(as.list.func(func, ...), comp.str="")
}

as.list.func <- function(func, recurse.keywords = c("{", "if", "repeat", "while", "for", "switch")) {
  as.list.func.recurse(body(func), recurse.keywords)
}

as.list.func.recurse <- function(x, recurse.keywords) {
  x.list <- as.list(x)
  top <- deparse(x.list[[1]])
  if (length(x.list) > 1 && top %in% recurse.keywords) {
    res <- lapply(x.list, as.list.func.recurse, recurse.keywords)
    setNames(res, seq_along(res))
  } else {
    x
  }
} 
```

结果`pretty.default`：

```
> print.func(pretty.default)
List of 13
 1 : symbol {
 2 : language x <- x[is.finite(x <- as.numeric(x))]
 3 :List of 3
  ..$ 1: symbol if
  ..$ 2: language length(x) == 0L
  ..$ 3: language return(x)
 4 :List of 3
  ..$ 1: symbol if
  ..$ 2: language is.na(n <- as.integer(n[1L])) || n < 0L
  ..$ 3: language stop("invalid 'n' value")
 5 :List of 3
  ..$ 1: symbol if
  ..$ 2: language !is.numeric(shrink.sml) || shrink.sml <= 0
  ..$ 3: language stop("'shrink.sml' must be numeric > 0")
 6 :List of 3
  ..$ 1: symbol if
  ..$ 2: language (min.n <- as.integer(min.n)) < 0 || min.n > n
  ..$ 3: language stop("'min.n' must be non-negative integer <= n")
 7 :List of 3
  ..$ 1: symbol if
  ..$ 2: language !is.numeric(high.u.bias) || high.u.bias < 0
  ..$ 3: language stop("'high.u.bias' must be non-negative numeric")
 8 :List of 3
  ..$ 1: symbol if
  ..$ 2: language !is.numeric(u5.bias) || u5.bias < 0
  ..$ 3: language stop("'u5.bias' must be non-negative numeric")
 9 :List of 3
  ..$ 1: symbol if
  ..$ 2: language (eps.correct <- as.integer(eps.correct)) < 0L || eps.correct > 2L
  ..$ 3: language stop("'eps.correct' must be 0, 1, or 2")
 10: language z <- .C("R_pretty", l = as.double(min(x)), u = as.double(max(x)), n = n,      min.n, shrink = as.double(shrink.sml), high.u.fact = as.double(c(high.u.bias,  ...
 11: language s <- seq.int(z$l, z$u, length.out = z$n + 1)
 12:List of 3
  ..$ 1: symbol if
  ..$ 2: language !eps.correct && z$n
  ..$ 3:List of 3
  .. ..$ 1: symbol {
  .. ..$ 2: language delta <- diff(range(z$l, z$u))/z$n
  .. ..$ 3:List of 3
  .. .. ..$ 1: symbol if
  .. .. ..$ 2: language any(small <- abs(s) < 1e-14 * delta)
  .. .. ..$ 3: language s[small] <- 0
 13: symbol s 
```

结果`model.frame.default`：

```
> print.func(model.frame.default)
List of 29
 1 : symbol {
 2 : language possible_newdata <- !missing(data) && is.data.frame(data) && identical(deparse(substitute(data)),      "newdata") && (nr <- nrow(data)) > 0
 3 :List of 3
  ..$ 1: symbol if
  ..$ 2: language !missing(formula) && nargs() == 1 && is.list(formula) && !is.null(m <- formula$model)
  ..$ 3: language return(m)
 4 :List of 3
  ..$ 1: symbol if
  ..$ 2: language !missing(formula) && nargs() == 1 && is.list(formula) && all(c("terms",      "call") %in% names(formula))
  ..$ 3:List of 8
  .. ..$ 1: symbol {
  .. ..$ 2: language fcall <- formula$call
  .. ..$ 3: language m <- match(c("formula", "data", "subset", "weights", "na.action"), names(fcall),      0)
  .. ..$ 4: language fcall <- fcall[c(1, m)]
  .. ..$ 5: language fcall[[1L]] <- as.name("model.frame")
  .. ..$ 6: language env <- environment(formula$terms)
  .. ..$ 7:List of 3
  .. .. ..$ 1: symbol if
  .. .. ..$ 2: language is.null(env)
  .. .. ..$ 3: language env <- parent.frame()
  .. ..$ 8: language return(eval(fcall, env, parent.frame()))
 5 :List of 4
  ..$ 1: symbol if
  ..$ 2: language missing(formula)
  ..$ 3:List of 3
  .. ..$ 1: symbol {
  .. ..$ 2:List of 3
  .. .. ..$ 1: symbol if
  .. .. ..$ 2: language !missing(data) && inherits(data, "data.frame") && length(attr(data, "terms"))
  .. .. ..$ 3: language return(data)
  .. ..$ 3: language formula <- as.formula(data)
  ..$ 4:List of 3
  .. ..$ 1: symbol if
  .. ..$ 2: language missing(data) && inherits(formula, "data.frame")
  .. ..$ 3:List of 4
  .. .. ..$ 1: symbol {
  .. .. ..$ 2:List of 3
  .. .. .. ..$ 1: symbol if
  .. .. .. ..$ 2: language length(attr(formula, "terms"))
  .. .. .. ..$ 3: language return(formula)
  .. .. ..$ 3: language data <- formula
  .. .. ..$ 4: language formula <- as.formula(data)
 6 : language formula <- as.formula(formula)
 7 :List of 3
  ..$ 1: symbol if
  ..$ 2: language missing(na.action)
  ..$ 3:List of 2
  .. ..$ 1: symbol {
  .. ..$ 2:List of 4
  .. .. ..$ 1: symbol if
  .. .. ..$ 2: language !is.null(naa <- attr(data, "na.action")) & mode(naa) != "numeric"
  .. .. ..$ 3: language na.action <- naa
  .. .. ..$ 4:List of 3
  .. .. .. ..$ 1: symbol if
  .. .. .. ..$ 2: language !is.null(naa <- getOption("na.action"))
  .. .. .. ..$ 3: language na.action <- naa
 8 :List of 4
  ..$ 1: symbol if
  ..$ 2: language missing(data)
  ..$ 3: language data <- environment(formula)
  ..$ 4:List of 4
  .. ..$ 1: symbol if
  .. ..$ 2: language !is.data.frame(data) && !is.environment(data) && !is.null(attr(data, "class"))
  .. ..$ 3: language data <- as.data.frame(data)
  .. ..$ 4:List of 3
  .. .. ..$ 1: symbol if
  .. .. ..$ 2: language is.array(data)
  .. .. ..$ 3: language stop("'data' must be a data.frame, not a matrix or an array")
 9 :List of 3
  ..$ 1: symbol if
  ..$ 2: language !inherits(formula, "terms")
  ..$ 3: language formula <- terms(formula, data = data)
 10: language env <- environment(formula)
 11: language rownames <- .row_names_info(data, 0L)
 12: language vars <- attr(formula, "variables")
 13: language predvars <- attr(formula, "predvars")
 14:List of 3
  ..$ 1: symbol if
  ..$ 2: language is.null(predvars)
  ..$ 3: language predvars <- vars
 15: language varnames <- sapply(vars, function(x) paste(deparse(x, width.cutoff = 500),      collapse = " "))[-1L]
 16: language variables <- eval(predvars, data, env)
 17: language resp <- attr(formula, "response")
 18:List of 3
  ..$ 1: symbol if
  ..$ 2: language is.null(rownames) && resp > 0L
  ..$ 3:List of 3
  .. ..$ 1: symbol {
  .. ..$ 2: language lhs <- variables[[resp]]
  .. ..$ 3: language rownames <- if (is.matrix(lhs)) rownames(lhs) else names(lhs)
 19:List of 3
  ..$ 1: symbol if
  ..$ 2: language possible_newdata && length(variables)
  ..$ 3:List of 3
  .. ..$ 1: symbol {
  .. ..$ 2: language nr2 <- max(sapply(variables, NROW))
  .. ..$ 3:List of 3
  .. .. ..$ 1: symbol if
  .. .. ..$ 2: language nr2 != nr
  .. .. ..$ 3: language warning(gettextf("'newdata' had %d rows but variable(s) found have %d rows",      nr, nr2), call. = FALSE)
 20:List of 3
  ..$ 1: symbol if
  ..$ 2: language is.null(attr(formula, "predvars"))
  ..$ 3:List of 3
  .. ..$ 1: symbol {
  .. ..$ 2:List of 4
  .. .. ..$ 1: symbol for
  .. .. ..$ 2: symbol i
  .. .. ..$ 3: language seq_along(varnames)
  .. .. ..$ 4: language predvars[[i + 1]] <- makepredictcall(variables[[i]], vars[[i + 1]])
  .. ..$ 3: language attr(formula, "predvars") <- predvars
 21: language extras <- substitute(list(...))
 22: language extranames <- names(extras[-1L])
 23: language extras <- eval(extras, data, env)
 24: language subset <- eval(substitute(subset), data, env)
 25: language data <- .Internal(model.frame(formula, rownames, variables, varnames, extras,      extranames, subset, na.action))
 26:List of 4
  ..$ 1: symbol if
  ..$ 2: language length(xlev)
  ..$ 3:List of 2
  .. ..$ 1: symbol {
  .. ..$ 2:List of 4
  .. .. ..$ 1: symbol for
  .. .. ..$ 2: symbol nm
  .. .. ..$ 3: language names(xlev)
  .. .. ..$ 4:List of 3
  .. .. .. ..$ 1: symbol if
  .. .. .. ..$ 2: language !is.null(xl <- xlev[[nm]])
  .. .. .. ..$ 3:List of 4
  .. .. .. .. ..$ 1: symbol {
  .. .. .. .. ..$ 2: language xi <- data[[nm]]
  .. .. .. .. ..$ 3:List of 3
  .. .. .. .. .. ..$ 1: symbol if
  .. .. .. .. .. ..$ 2: language is.character(xi)
  .. .. .. .. .. ..$ 3:List of 3
  .. .. .. .. .. .. ..$ 1: symbol {
  .. .. .. .. .. .. ..$ 2: language xi <- as.factor(xi)
  .. .. .. .. .. .. ..$ 3: language warning(gettextf("character variable '%s' changed to a factor", nm), domain = NA)
  .. .. .. .. ..$ 4:List of 4
  .. .. .. .. .. ..$ 1: symbol if
  .. .. .. .. .. ..$ 2: language !is.factor(xi) || is.null(nxl <- levels(xi))
  .. .. .. .. .. ..$ 3: language warning(gettextf("variable '%s' is not a factor", nm), domain = NA)
  .. .. .. .. .. ..$ 4:List of 5
  .. .. .. .. .. .. ..$ 1: symbol {
  .. .. .. .. .. .. ..$ 2: language xi <- xi[, drop = TRUE]
  .. .. .. .. .. .. ..$ 3: language nxl <- levels(xi)
  .. .. .. .. .. .. ..$ 4:List of 3
  .. .. .. .. .. .. .. ..$ 1: symbol if
  .. .. .. .. .. .. .. ..$ 2: language any(m <- is.na(match(nxl, xl)))
  .. .. .. .. .. .. .. ..$ 3: language stop(gettextf("factor '%s' has new level(s) %s", nm, paste(nxl[m], collapse = ", ")),      domain = NA)
  .. .. .. .. .. .. ..$ 5: language data[[nm]] <- factor(xi, levels = xl, exclude = NULL)
  ..$ 4:List of 3
  .. ..$ 1: symbol if
  .. ..$ 2: symbol drop.unused.levels
  .. ..$ 3:List of 2
  .. .. ..$ 1: symbol {
  .. .. ..$ 2:List of 4
  .. .. .. ..$ 1: symbol for
  .. .. .. ..$ 2: symbol nm
  .. .. .. ..$ 3: language names(data)
  .. .. .. ..$ 4:List of 3
  .. .. .. .. ..$ 1: symbol {
  .. .. .. .. ..$ 2: language x <- data[[nm]]
  .. .. .. .. ..$ 3:List of 3
  .. .. .. .. .. ..$ 1: symbol if
  .. .. .. .. .. ..$ 2: language is.factor(x) && length(unique(x[!is.na(x)])) < length(levels(x))
  .. .. .. .. .. ..$ 3: language data[[nm]] <- data[[nm]][, drop = TRUE]
 27: language attr(formula, "dataClasses") <- sapply(data, .MFclass)
 28: language attr(data, "terms") <- formula
 29: symbol data 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-04T01:09:49.617

这是一个方便的包装器，用于检测该片段：

```
library(codetools)
ff <- function(f, tar) {
  cc <- function(e, w) {
    if(length(w$pos) > 0 &&
      grepl(w$tar, paste(deparse(e), collapse = "\n"), fixed = TRUE)) {
      cat(rev(w$pos), ": ", deparse(e), "\n")
      w$ret$vals <- c(w$ret$vals, list(rev(w$pos)))
    }
    w$pos <- c(0, w$pos)
    for (ee in as.list(e)){
      if (!missing(ee)) {      
        w$pos[1] <- w$pos[1] + 1
        walkCode(ee, w)
      }
    }
  }

  w <- list(pos = c(),
            tar = tar,
            ret = new.env(),
            handler = function(v, w) NULL,
            call = cc,
            leaf = function(e, w) NULL)
  walkCode(body(f), w = w)
  w$ret$vals
} 
```

接着，

```
> r <- ff(pretty.default, "delta <- diff(range(z$l, z$u))/z$n")
12 :  if (!eps.correct && z$n) {     delta <- diff(range(z$l, z$u))/z$n     if (any(small <- abs(s) < 1e-14 * delta))          s[small] <- 0 } 
12 3 :  {     delta <- diff(range(z$l, z$u))/z$n     if (any(small <- abs(s) < 1e-14 * delta))          s[small] <- 0 } 
12 3 2 :  delta <- diff(range(z$l, z$u))/z$n 
> r
[[1]]
[1] 12

[[2]]
[1] 12  3

[[3]]
[1] 12  3  2

> r <- ff(model.frame.default, "stop(gettextf(\"factor '%s' has new level(s) %s\", nm, paste(nxl[m],")
26 3 2 4 3 4 4 4 3 :  stop(gettextf("factor '%s' has new level(s) %s", nm, paste(nxl[m],      collapse = ", ")), domain = NA) 
> r
[[1]]
[1] 26  3  2  4  3  4  4  4  3 
```

您可以按内容定义跟踪器：

```
traceby <- function(fun, tar, cer) {
  untrace(deparse(substitute(fun)))
  r <- ff(fun, tar)
  r <- r[which.max(sapply(r, length))]
  trace(what = deparse(substitute(fun)), tracer = cer, at = r)
} 
```

然后，

```
> traceby(pretty.default, "if (any(small <- abs(s) < 1e-14 * delta)) s[small] <- 0", quote(cat("\nThe value of delta is: ", delta, "\n\n")))
Untracing function "pretty.default" in package "base"
12 3 3 :  if (any(small <- abs(s) < 1e-14 * delta)) s[small] <- 0 
Tracing function "pretty.default" in package "base"
[1] "pretty.default"
> a <- pretty(c(1, 7843))
Tracing pretty.default(c(1, 7843)) step 12,3,3 

The value of delta is:  2000 

> b <- pretty(c(2, 23))
Tracing pretty.default(c(2, 23)) step 12,3,3 

The value of delta is:  5 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T07:12:38.600

这是一种利用包中可用于确定与给定源文件中指定行相对应的步骤这一事实`findLineNum()`的方法。`utils`

```
getStep <- function(fun, txt) {
    ## Create a text file into which the function can dumped
    ## and from which it can then be sourced
    tmpfile <- tempfile() 
    on.exit(unlink(tmpfile))
    dump(fun, file = tmpfile)
    ## Find the line containing the code of interest
    lines <- readLines(tmpfile)
    matchlines <- grepl(txt, lines, fixed=TRUE)
    if(sum(matchlines) > 1) {
        stop(paste(dQuote(txt), "matches more than one line in", fun))
    }
    linenum <- which(matchlines)
    ## Use findLineNum() to determine the step corresponding to that line
    source(tmpfile)
    Step <- list(findLineNum(tmpfile, line=linenum)[[1]]$at)
    ## Clean up and return
    rm(list = fun, envir = .GlobalEnv)
    return(Step)
}

## Test it
getStep(fun = "pretty.default",
        txt = "if (any(small <- abs(s) < 1e-14 * delta))")
# [[1]]
# [1] 6  3  3 
```

然后将一小步合并`getStep()`到一个函数中，该函数`fun`在行匹配处插入调试代码`txt`。

```
## Define the function
traceLine <- function(fun, txt, tracer) {
    Step <- getStep(fun = deparse(substitute(fun)), txt = txt)
    trace(what = substitute(fun),
          tracer = tracer,
          at = Step)
}

## Confirm that it works.
traceLine(fun = pretty.default,
          txt = "if (any(small <- abs(s) < 1e-14 * delta))",
          tracer = quote(cat("\nThe value of delta is: ", delta, "\n\n")))
a <- pretty(c(1, 7843))
b <- pretty(c(2, 23))
untrace(pretty.default) 
```

# asp.net - Client Caching turned off because of HttpModule?

> ID：11319164
> 
> 赞同：1
> 
> 时间：2012-07-03T21:04:56.503
> 
> 标签：asp.net, iis, azure, iis-7.5

My application has a custom `HttpModule` that we use for some advanced logging. All it does is add a couple of custom headers to the HTTP response.

The problem I'm having is that when this module is enabled, .CSS files are being returned with an HTTP header of `Cache-Control: no-cache`. When I turn off the module, I get what I'm expecting which is `Cache-Control:max-age=2419200`.

I have my cache enabled with:

```
<staticContent>
    <clientCache cacheControlMode="UseMaxAge" cacheControlMaxAge="28.00:00:00"/>
</staticContent> 
```

I tried to comment out the adding of the custom headers in our `HttpModule`, but that didn't work.

Also, this is only causing problems for the .CSS files. .JS, .PNG, and .GIF for example are all working as I would expect. I can't seem to figure out why .CSS is special.

Not sure why just having that module is causing the cache header to work like that. Any thoughts?

I tried this on IIS7 and IIS7.5\. (Actually it is running in Windows Azure but I don't think that makes a difference).

* * *

Edits: The web.config is very large. I don't want to put the whole thing here. Here is more it:

```
<system.webServer>
    <handlers>
        <add name="pngHandler" path="*.png" verb="*" type="CompanyXXX.Applications.Portal.PngHttpHandler,Portal.System" modules="ManagedPipelineHandler" scriptProcessor="" resourceType="Unspecified" requireAccess="Script" preCondition="" />
        <add name="gifHandler" path="*.gif" verb="*" type="CompanyXXX.Applications.Portal.GifHttpHandler,Portal.System" modules="ManagedPipelineHandler" scriptProcessor="" resourceType="Unspecified" requireAccess="Script" preCondition="" />
        <add name="ScriptResource" preCondition="integratedMode" verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
    </handlers>
    <modules>
        <add name="CookieManagerModule" type="CompanyXXX.Web.CookieManagerModule, Framework.Web" preCondition="" />
        <add name="AuthenticationModule" type="CompanyXXX.Applications.Portal.AuthenticationModule,Portal.System" preCondition="" />
        <add name="ScriptModule" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" preCondition=""/>
        <add name="LoggingModule" type="CompanyXXX.Applications.Portal.LoggingModule,Portal.System"/>
        <add name="RequestReduce" type="RequestReduce.Module.RequestReduceModule, RequestReduce" />
    </modules>
    <validation validateIntegratedModeConfiguration="false" />
    <urlCompression doDynamicCompression="true" doStaticCompression="true" dynamicCompressionBeforeCache="false"/>
    <httpCompression sendCacheHeaders="true">
        <scheme name="gzip" dll="%Windir%\system32\inetsrv\gzip.dll" />
    </httpCompression>
    <staticContent>
        <clientCache cacheControlMode="UseMaxAge" cacheControlMaxAge="28.00:00:00"/>
    </staticContent>
</system.webServer> 
```

As for the code, I can't post it here. All I can say is that it only adds 3 headers to the response.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T12:30:48.820

我有一个类似的问题。

将应用程序池从 pipelineMode 更改为***Classic***，您可以在 Files 的 Response headers 中看到 Cache control max age 标签。

对于经典模式，您需要将处理程序保留在

```
 <system.Web><httpHandlers> <!--add here--></httpHandlers></system.Web> 
```

# ruby-on-rails - Adding a new Couchbase bucket caused BucketNotFound error

> ID：11319166
> 
> 赞同：0
> 
> 时间：2012-07-03T21:05:03.153
> 
> 标签：ruby-on-rails, ruby, memcached, couchbase, membase

I'm using Couchbase 1.8.0 on Mac OS X along with the Ruby libraries to access it. I deleted the default bucket and created by own bucket called 'mybucket', with the password 'password'. I'm accessing the bucket with the following Ruby code:

```
url = "http://127.0.0.1:8091/pools/default"
Couchbase.new(url, :bucket_name => 'mybucket', :bucket_password => 'password') 
```

and I'm getting the following error:

```
Couchbase::Error::BucketNotFound (HTTP/1.1 404 Object Not Found
Server: Couchbase Server 1.8.0r_74_g85f643d-community 
```

Does any one have any thoughts? I've tried rebooting both the server and the rails app (even though I shouldn't have to) and it's still not connecting. I'm not really sure what I'm doing wrong.

Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T21:30:13.330

因此，看起来 Couchbase 网站上的文档在如何连接 Ruby 库方面是错误的。正确的语法如下。

```
bucket = 'mybucket'
password = 'mypassword'
Couchbase.connect("http://localhost:8091/pools/default", :bucket => bucket, :username => bucket, :password => password) 
```

希望这可以帮助任何有同样问题的人！

# mysql - Replace column references in values

> ID：11319167
> 
> 赞同：2
> 
> 时间：2012-07-03T21:05:05.810
> 
> 标签：mysql, sql

I have a table which has two columns (id and word). I have an other table which has a data column and its value references the word in the first table. Here is a sample code:

```
CREATE TABLE `words` (
  `id` TINYINT,
  `word` VARCHAR(50),
  PRIMARY KEY (`id`)
);

INSERT INTO `words` VALUES (1, 'one'), (2, 'two'), (3, 'three');

CREATE TABLE `data` (
  `data` TEXT
);

INSERT INTO `data` VALUES ('foo=bar\nword=one'), ('word=three'); 
```

I would like to replace the references of words to ids. So `word=one` would become `word=1`, `word=three` would become `word=3` and so on. I tried this query, but it doesn't work:

```
UPDATE `data`, `words` SET `data`.`data` = REPLACE(`data`.`data`, CONCAT('word=', `words`.`word`), CONCAT('word=', `words`.`id`)); 
```

Any suggestion or idea how to achieve what I want? Thanks!

Edit: Forgot to mention that data column is in INI format, so other key-value pairs can be in fields too. Adjusted the example.

Edit: Thanks to the idea of @nortphole I managed to build the query that I need:

```
UPDATE `data` SET `data`.`data` = REPLACE(`data`.`data`, CONCAT('word=', SUBSTRING_INDEX(SUBSTRING_INDEX(`data`.`data`, 'word=', -1), '\n', 1)), CONCAT('word=', (SELECT `id` FROM `words` WHERE `words`.`word` = SUBSTRING_INDEX(SUBSTRING_INDEX(`data`.`data`, 'word=', -1), '\n', 1)))); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T21:20:47.557

尝试这样的事情：

```
UPDATE data 
   SET data = CONCAT('word=',(SELECT id 
                                FROM words 
                               WHERE words.word = SUBSTRING_INDEX(data.data,'=',-1))) 
```

抱歉，我这里没有 MySql 来测试它（特别确保 SUBSTRING 在 'word=' 之后得到所有内容）

编辑：我使用带有 -1 的 substring_index 来获取 = 符号的最后一个索引。

# objective-c - C As Principal Class Or; A Cocoa App Without ObjC

> ID：11319170
> 
> 赞同：9
> 
> 时间：2012-07-03T21:05:09.813
> 
> 标签：objective-c, c, macos, cocoa, objective-c-runtime

For those who question my sanity/time-wasting/ability/motives, this thing is a port of the ["Foundation With A Spoon"](https://stackoverflow.com/questions/10289890/how-to-write-ios-app-purely-in-c#comment13239523_10289913) project, now infamous for being an all-C iOS app.

So, I've got a c file raring to go and be the main class behind an all-C mac-app, however, a combination of limiting factors are preventing the application from being launched. As it currently stands, the project is just a main.m and a class called AppDelegate.c, so I entered "AppDelegate" as the name of the principal class in the info.plist, and to my complete surprise, the log printed:

> Unable to find class: AppDelegate, exiting

This would work perfectly well in iOS, because the main function accepts the name of a delegate class, and handles it automatically, but NSApplicationMain() takes no such argument.

Now, I know this stems from the fact that there are no `@interface/@implementation` directives in C, and that's really what the OS seems to be looking for, so I wrote a simple `NSApplication` subclass and provided it as the Principal Class to the plist, and it launched perfectly well. My question is, how could one go about setting a c file as the principal class in a mac application and have it launch correctly?

EDIT: SOLVED! The file may be a .m (framework errors, for some reason), but the allocation of class pairs is enough to slip by. You can download the source for the C-Based Mac App [here](https://github.com/CodaFi/CBasedMacApp). Happy digging!

The code's been written, signed, sealed, and stamped, but all I need is a way around the NSPrincipalClass requirement in the plist.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-03T22:00:35.713

好的，这是一个似乎对我有用的经过大幅改写的答案。

因此，您的问题与主要课程无关。您应该将主要课程保留为`NSApplication`.

正如我之前提到的，主要问题是您没有向 NSApplication 注册适当的应用程序委托。更改主要课程不会解决此问题。一个 NIB 文件可以设置应用程序委托，但这对于这个问题来说真的是矫枉过正。

但是，实际上有几个问题：

1.  您的（发布的）代码是使用一些与 OS X 版本不完全一致的 iOS 类和方法编写的。

2.  您必须确保您的 AppDelegate 类已在系统中注册，然后您必须手动初始化 NSApplication 并设置其应用程序委托。

3.  事实证明，链接在这里**非常**重要。您需要有一些外部符号使链接器将 Foundation 工具包和 AppKit 拖入内存。否则，没有像`NSObject`使用 Objective-C 运行时那样注册类的简单方法。

## iOS v OSX 类

OSX 应用程序委托从 派生`NSObject`，而不是从 派生`UIResponder`，因此行：

```
AppDelClass = objc_allocateClassPair((Class) objc_getClass("UIResponder"), "AppDelegate", 0); 
```

应该读：

```
AppDelClass = objc_allocateClassPair((Class) objc_getClass("NSObject"), "AppDelegate", 0); 
```

此外，OSX 应用程序代理响应的消息与 iOS 应用程序代理不同。特别是，它们需要响应`applicationDidFinishLaunching:`选择器（它需要一个`NSNotifier`类型的对象`id`）。

线

```
class_addMethod(AppDelClass, sel_getUid("application:didFinishLaunchingWithOptions:"), (IMP) AppDel_didFinishLaunching, "i@:@@"); 
```

应该读：

```
class_addMethod(AppDelClass, sel_getUid("applicationDidFinishLaunching:"), (IMP) AppDel_didFinishLaunching, "i@:@"); 
```

请注意，参数 (`"i@:@@"`和`"i@:@"`) 是不同的。

## 设置 NSApplication

`AppDelegate`向 Objective-C 运行时注册有两种选择：

1.  要么用 声明你的`initAppDel`方法`__attribute__((constructor))`，这迫使它被之前的设置代码调用`main`，要么

2.  在实例化对象之前自己调用它。

我一般不相信`__attribute__`标签。它们可能会保持不变，但苹果可能会改变它们。我选择从 拨打`initAppDel`电话`main`。

一旦你`AppDelegate`在系统中注册了你的类，它基本上就像一个 Objective-C 类一样工作。您可以像 Objective-C 类一样实例化它，并且可以像`id`. 它实际上是一个`id`.

要确保 AppDelegate 作为应用程序委托运行，您必须设置`NSAppliction`. 因为您正在滚动自己的应用程序委托，所以您真的不能使用它`NSApplicationMain`来执行此操作。事实证明这并不难：

```
void init_app(void)
{
  objc_msgSend(
      objc_getClass("NSApplication"), 
      sel_getUid("sharedApplication"));

  if (NSApp == NULL)
  {
    fprintf(stderr,"Failed to initialized NSApplication... terminating...\n");
    return;
  }

  id appDelObj = objc_msgSend(
      objc_getClass("AppDelegate"), 
      sel_getUid("alloc"));
  appDelObj = objc_msgSend(appDelObj, sel_getUid("init"));

  objc_msgSend(NSApp, sel_getUid("setDelegate:"), appDelObj);
  objc_msgSend(NSApp, sel_getUid("run"));
} 
```

## 链接和 Objective-C 运行时

所以，这就是问题的真正实质，至少对我而言。`NSObject`除非您实际拥有并`NSApplication`在 Objective-C 运行时中注册，否则上述所有操作都将彻底失败 。

通常，如果您使用的是 Objective-C，编译器会告诉链接器它需要它。它通过在`.o`文件中放置一堆特殊的未解析符号来做到这一点。如果我编译文件 SomeObj.m：

```
#import <Foundation/NSObject.h>

@interface SomeObject : NSObject
@end

@implementation SomeObject
@end 
```

使用`clang -c SomeObj.m`，然后使用 来查看符号`nm SomeObj.o`：

```
0000000000000000 s L_OBJC_CLASS_NAME_
                 U _OBJC_CLASS_$_NSObject
00000000000000c8 S _OBJC_CLASS_$_SomeObject
                 U _OBJC_METACLASS_$_NSObject
00000000000000a0 S _OBJC_METACLASS_$_SomeObject
                 U __objc_empty_cache
                 U __objc_empty_vtable
0000000000000058 s l_OBJC_CLASS_RO_$_SomeObject
0000000000000010 s l_OBJC_METACLASS_RO_$_SomeObject 
```

您会看到所有这些漂亮的`_OBJC_CLASS_$_`符号，`U`左侧带有 a，表示这些符号未解析。当你链接这个文件时，链接器会接受它，然后意识到它必须加载 Foundation 框架来解析引用。这迫使 Foundation 框架将其所有类注册到 Objective-C 运行时。如果您的代码需要 AppKit 框架，则需要类似的东西。

如果我编译您的 AppDelegate 代码，我已将其重命名为“AppDelegate_orig.c”，`clang -c AppDelegate_orig.c`然后 `nm`在其上运行：

```
00000000000001b8 s EH_frame0
000000000000013c s L_.str
0000000000000145 s L_.str1
000000000000014b s L_.str2
0000000000000150 s L_.str3
0000000000000166 s L_.str4
0000000000000172 s L_.str5
000000000000017e s L_.str6
00000000000001a9 s L_.str7
0000000000000008 C _AppDelClass
0000000000000000 T _AppDel_didFinishLaunching
00000000000001d0 S _AppDel_didFinishLaunching.eh
                 U _class_addMethod
00000000000000c0 t _initAppDel
00000000000001f8 s _initAppDel.eh
                 U _objc_allocateClassPair
                 U _objc_getClass
                 U _objc_msgSend
                 U _objc_registerClassPair
                 U _sel_getUid 
```

您会看到没有会强制 Foundation 或 AppKit 框架链接的未解析符号。这意味着我所有的调用都`objc_getClass`将返回 NULL，这意味着整个事情都崩溃了。

我不知道你的其余代码是什么样的，所以这对你来说可能不是问题，但解决这个问题让我自己编译一个修改过的 AppDelegate.c 文件**到**一个（不是很实用的）OSX 应用程序中。

这里的秘诀是找到需要链接器引入Foundation和AppKit的外部符号。事实证明这相对容易。AppKit 提供了一个全局变量`NSApp`来保存应用程序的`NSApplication`. AppKit 框架依赖于 Foundation 框架，所以我们免费获得它。只需声明对此的外部引用就足够了：

```
extern id NSApp; 
```

（注意：您必须在某处实际使用该变量，否则编译器可能会将其优化掉，您将失去所需的框架。）

## 代码和截图：

这是我的 AppDelegate.c 版本。它包括`main`并且应该设置所有内容。结果并不是那么令人兴奋，但它确实在屏幕上打开了一个小窗口。

```
#include <stdio.h>
#include <stdlib.h>

#include <objc/runtime.h>
#include <objc/message.h>

extern id NSApp;

struct AppDel
{
    Class isa;
    id window;
};

// This is a strong reference to the class of the AppDelegate
// (same as [AppDelegate class])
Class AppDelClass;

BOOL AppDel_didFinishLaunching(struct AppDel *self, SEL _cmd, id notification) {
    self->window = objc_msgSend(objc_getClass("NSWindow"),
      sel_getUid("alloc"));

    self->window = objc_msgSend(self->window, 
      sel_getUid("init"));

    objc_msgSend(self->window, 
      sel_getUid("makeKeyAndOrderFront:"),
      self);

    return YES;
}

static void initAppDel() 
{
  AppDelClass = objc_allocateClassPair((Class)
    objc_getClass("NSObject"), "AppDelegate", 0);

  class_addMethod(AppDelClass, 
      sel_getUid("applicationDidFinishLaunching:"), 
      (IMP) AppDel_didFinishLaunching, "i@:@");

  objc_registerClassPair(AppDelClass);
}

void init_app(void)
{
  objc_msgSend(
      objc_getClass("NSApplication"), 
      sel_getUid("sharedApplication"));

  if (NSApp == NULL)
  {
    fprintf(stderr,"Failed to initialized NSApplication...  terminating...\n");
    return;
  }

  id appDelObj = objc_msgSend(
      objc_getClass("AppDelegate"), 
      sel_getUid("alloc"));
  appDelObj = objc_msgSend(appDelObj, sel_getUid("init"));

  objc_msgSend(NSApp, sel_getUid("setDelegate:"), appDelObj);
  objc_msgSend(NSApp, sel_getUid("run"));
}

int main(int argc, char** argv)
{
  initAppDel();
  init_app();
  return EXIT_SUCCESS;
} 
```

像这样编译、安装和运行：

```
clang -g -o AppInC AppDelegate.c -lobjc -framework Foundation -framework AppKit
mkdir -p AppInC.app/Contents/MacOS
cp AppInC AppInC.app/Contents/MacOS/
cp Info.plist AppInC.app/Contents/
open ./AppInC.app 
```

Info.plist 是：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
        <key>CFBundleDevelopmentRegion</key>
        <string>en</string>
        <key>CFBundleExecutable</key>
        <string>AppInC</string>
        <key>CFBundleIconFile</key>
        <string></string>
        <key>CFBundleIdentifier</key>
        <string>com.foo.AppInC</string>
        <key>CFBundleInfoDictionaryVersion</key>
        <string>6.0</string>
        <key>CFBundleName</key>
        <string>AppInC</string>
        <key>CFBundlePackageType</key>
        <string>APPL</string>
        <key>CFBundleShortVersionString</key>
        <string>1.0</string>
        <key>CFBundleSignature</key>
        <string>????</string>
        <key>CFBundleVersion</key>
        <string>1</string>
        <key>LSApplicationCategoryType</key>
        <string>public.app-category.games</string>
        <key>LSMinimumSystemVersion</key>
        <string></string>
        <key>NSPrincipalClass</key>
        <string>NSApplication</string>
</dict>
</plist> 
```

用截图：

![申请截图](../Images/c338d6cac251b455d7afcd895af30053.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-03T21:24:26.603

沿着这条路走下去是疯狂的，或者至少是巨大的时间浪费。Cocoa 应用程序本质上设计为基于 Objective-C 并使用 .app 包装器，该包装器具有非常特定设计的子目录层次结构（包括需要诸如 Info.plist 之类的东西，并且可能需要代码签名）。

你认为你遇到的代表问题完全是一个红鲱鱼；真正的问题是你实际上并没有构建一个合适的 Cocoa 应用程序。

而且，不，它在 iOS 下不会很好地工作，因为该平台甚至更需要以非常特定的方式构建应用程序。

如果你想“包装 C”，那么：

*   从一个基本的 Cocoa 应用程序开始
*   将你的主函数重命名为 mainC() 或其他东西（如果你真的想要，可以从编译器/链接器命令行完成）
*   [理想情况下]移动主线程的所有C goop，这样你就不会阻塞主事件循环

如果您希望“纯 C”作为您的主要课程，那么：

*   创建一个实现类的 .m 文件
*   实现类的方法来调用你的 C 函数

完成——就是这么简单。虽然在你做的时候自己滚动肯定是有教育意义的（不，真的——它是，我鼓励每个人都去探索），它只是重新发明了一个轮子。

tl;dr 如果您正在与系统 API 作斗争，那么您做错了。

* * *

> 当然，但我正在用勺子将 Rich 的基础移植到 OS X。这完全是浪费时间，但至少不会让我气馁

惊人的！

在这种情况下——你会想看看 ruby​​cocoa shell 的实现`pythonw`和/或（IIRC），它允许从相对非基于 .app 包装器的 shell 脚本实现 GUI。

这个问题远远超出了主要课程。考虑到这`[NSBundle mainBundle]`确实需要有意义，并且确实需要封装某种资源。

此外，该`PyObjC`项目在开发基于“shell 脚本”的 Cocoa 应用程序方面进行了许多不同的尝试。您可能想探讨各种示例，因为我认为至少仍然存在一些可以满足您的需求。

谷歌搜索“来自 shell 脚本的 Cocoa 应用程序”等也可能有用，因为在过去的 23 年中这种情况已经出现过多次。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T21:31:19.133

如果您愿意调用 Objective-C 运行时函数但不愿意使用 @implementation（出于任何疯狂的原因），只需使用`objc_allocateClassPair`和朋友创建一个类并将其用作您的主类。

# javascript - Is it a good practice to depend on boolean operators returning one of their operands?

> ID：11319173
> 
> 赞同：2
> 
> 时间：2012-07-03T21:05:14.307
> 
> 标签：javascript

I often rely on the fact that in Javascript conditional operators do not return true or false but one of the arguments.

For example:

```
function(e){
    this.someotherfunction.apply(this, e.config || []); 
} 
```

So far I have not come across any issues and when I tried to find out what Douglas Crockford (read JSLint) has to say about it, I haven't found any issue.

Are there any dangers in using this kind of syntax?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T21:06:27.900

> Are there any dangers in using this kind of syntax ?

No.

(As long as you and all other developers know what this code does...)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T21:09:31.173

[这在许多动态语言](http://en.wikipedia.org/wiki/Short-circuit_evaluation#Support_in_common_programming_languages)中都有完整的文档记录并以这种方式工作。使用这种结构是安全的，并且被广泛认可。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T21:09:37.627

该方法是惯用的 JavaScript。

> 使用这种语法有什么危险吗？

你必须小心知道输入是什么。例如，如果某物需要一个数字，那么您必须说明`0`它是一个错误的值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T21:35:30.410

您可能面临的唯一问题是愤怒的开发人员说他们很难阅读并要求将其重写为。

```
foo : function (e) {
    var config =  e.config || [];
    this.someotherfunction.apply(this,config); 
} 
```

是的，我遇到了那些愤怒的开发者。

# actionscript-3 - Overriding map in a class that extends Array in ActionScript

> ID：11319176
> 
> 赞同：1
> 
> 时间：2012-07-03T21:05:24.620
> 
> 标签：actionscript-3

Say just for fun I want to override `Array` and redefine `map`:

```
public dynamic class MagicArray extends Array {
  public override function map(f:Function, thisObject:* = null):Array {
    var result:Array = [];

    for (var i:int = 0; i < this.length; i++) {
      result.push(f(this[i]));
    }

    return result;
  }
} 
```

We get this error: `Method marked override must override another method.`

Huh?

So I stripped the `override` keyword and tried again. Now, everything compiles fine. But if we try to use it:

```
var a:MagicArray = new MagicArray([1,2,3]);
a.map(function(x) { return x + 1; }); 
```

We get the following error:

`Error: Ambiguous reference to map.`

So what's going on here? How can I override `map`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T21:25:55.307

您是否使扩展成为动态的，您是否使用命名空间，请参见此处[http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b8d829-7fde.html](http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b8d829-7fde.html)

# php - Changing PHP variable from an link

> ID：11319180
> 
> 赞同：2
> 
> 时间：2012-07-03T21:05:43.367
> 
> 标签：php, html

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T21:12:37.177

本质上，您无法*更改变量。*重新加载页面意味着从头开始运行 PHP 程序。您只需为其提供不同的输入。从常规链接，这只能通过 URL 实现。

```
<a href="foo.php?something=a_value"> 
```

查询字符串中的数据可通过以下方式访问`$_GET`

```
echo htmlspecialchars($_GET['something']); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T21:19:47.903

您可以在同一页面上使用 GET 请求，

```
<a href="news.html?page=news.html">News</a> 
```

这将导致点击页面刷新，页面变量的值传递给 php，并可通过

```
$page = $_GET['page'] //at this point, $page will be "news.html" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T22:04:40.930

如果我理解正确，要即时更改包含，正如您所说，您需要使用 AJAX，否则您需要完全刷新。

使用正常链接将数据发送回服务器。

```
<a href="page.php?page=newpage.html">link</a> 
```

然后你可以使用 PHP 的 $_GET 变量，它是一个解析 URL 页面参数的数组。

例子：

```
$page = $_GET['page']
include $page; 
```

如果您使用 jQuery，或者想尝试一种简单的 AJAX 方法，您可以搜索[jQuery.load()](http://api.jquery.com/load/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T01:14:09.003

你也可以使用

```
 $page = $_SERVER['PHP_SELF']; 
```

在 PHP 脚本的顶部。如果您的页面是“somepage.php”，上面将输出

```
 /somepage.php 
```

作为 $page 的值。

要摆脱斜线和 .php，只需使用 substr：

```
 $page = substr($_SERVER['PHP_SELF'],1,-4); 
```

这会给你留下 $page = somepage

# php - Query does not work with Mysqli php class but works in MySQL workbench

> ID：11319181
> 
> 赞同：1
> 
> 时间：2012-07-03T21:05:46.773
> 
> 标签：php, php-mysqlidb

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T05:05:45.920

那不应该是

```
SELECT
m.memberID, m.zoneCode, m.state, m.zone, m.countyName,
CONCAT(m.state,'Z',m.zone) as fullZoneCode,
c.state, c.zone, c.countyName
FROM members_zonesToWatch m
LEFT JOIN countyPublicForcastZoneCorrelation c
ON c.zoneCode = CONCAT(m.state, 'Z', m.zone) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T02:00:02.177

在对您的案例进行测试后，问题`'Z'`是`$db->query`

这是因为当您的语句（从调试器看来，引号变为）时，`MysqliDB`内部使用`mysqli`并`mysqli`引发了异常。`prepare``'``&#39;`

相反，请`MysqliDB`提供`rawQuery`像您这样的案例。所以使用下面的：

```
$result = $db->rawQuery('
    SELECT m.memberID, CONCAT(m.state, ? ,m.zone) as fullZoneCode
    FROM members_zonesToWatch m
    LEFT JOIN countyPublicForcastZoneCorrelation c
    ON c.zoneCode = CONCAT(m.state, ? ,m.zone)',
    array('Z','Z')); 
```

参考：[PHP-MySQLi-Database-Class / MysqliDb.php](https://github.com/ajillion/PHP-MySQLi-Database-Class/blob/master/MysqliDb.php)；

# html - 我的表单提交按钮未正确显示

> ID：11319188
> 
> 赞同：1
> 
> 时间：2012-07-03T21:06:07.630
> 
> 标签：html, forms, submit

我创建了一个将内容提交到电子邮件的表单。我在许多其他网站中使用了完全相同的编码，但对于我的新网站[http://www.peterevansfuneraldirectors.co.uk/contact-us.html](http://www.peterevansfuneraldirectors.co.uk/contact-us.html)，提交按钮只是一个带有文本的灰色方块，而不是通常的按钮. 悬停时手也不会出现。

我的表单代码是...

```
<form action="php/FormToEmail.php" method="post" name="ContactForm" id="ContactForm" onsubmit="MM_validateForm('name','','R','email','','RisEmail','message subject','','R','message','','R');return document.MM_returnValue" >

                <div class="form-text">
                <b>Name<span class="purple">*</span></b><br />
                <input name="name" type="text" id="name" size="35" style="height:23px; background-color:#FFF; color:#000; border: 1px solid #CCC;" />
                </div><br />

                <div class="form-text">
                <b>Email<span class="purple">*</span></b><br />
                <input name="email" type="text" id="email" size="35" style="height:23px; background-color:#FFF; color:#000; border: 1px solid #CCC;" />
                </div><br />

                <div class="form-text">
                <b>Message Subject<span class="purple">*</span></b><br />
                <input name="message subject" type="text" id="message subject" size="35" style="height:23px; background-color:#FFF; color:#000; border: 1px solid #CCC;" />
                </div><br />

                <div class="form-text">
                <b>Message<span class="purple">*</span></b><br />
                <textarea name="message" type="text" id="message" rows="8" cols="55" style="background-color:#FFF; color:#000; border: 1px solid #CCC;" ></textarea>
                </div><br />

                <div class="submit-button">
                <input type="submit" name="submit" value="Submit" />
                </div>

            </form> 
```

提前致谢！

杰克。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T21:09:33.630

这是因为应用于按钮的 CSS 样式。

如果您删除 CSS 样式，它看起来就像一个标准按钮。

如果您想在按钮上使用特定的光标，请查看 CSS [Cursor](http://www.w3schools.com/cssref/pr_class_cursor.asp)样式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T21:09:55.923

那是因为css。您为此元素禁用了边距/填充/边框。

如果我禁用这些样式 - 按钮将正常显示。

看看这个风格：

```
* {
  margin:0; // disable for button
  padding:0; // disable for button
  border:0; // disable for button
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T21:24:38.140

您的 html 没有任何问题。可能您正在使用 css 来设置此按钮的样式。尝试从提交按钮中删除 css“边框”属性。

你有一个很好的 Firefox 插件，叫做 Firebug，它允许你检查 css 属性，如果你找不到导致它的属性，你可以试试。只需右键单击按钮元素并选择“Inspect element with Firebug”。

# asp.net - 从模型的 IEnumerable 初始化 ViewModel 的 IEnumerable

> ID：11319206
> 
> 赞同：0
> 
> 时间：2012-07-03T21:07:32.343
> 
> 标签：asp.net, asp.net-mvc, linq

我有一个“列表”视图，它基本上接收 IEnumerable(Thing) 类型的模型。我无法控制事物；它是外部的。

那已经差不多好了。'Thing' 的属性之一是标志的枚举。我想改进视图中此属性的格式。我已经[阅读了一些策略](https://stackoverflow.com/questions/11200286/how-do-you-make-an-enum-that-has-data-tied-to-it)。我的计划是创建一个更了解格式化的 ViewModel。

我想知道是否有从 IEnumerable(Thing) 创建 IEnumerable(ViewThing) 的直接方法。

一个明显的方法是遍历事物的 IEnumerable，我将为每个事物创建一个 ViewThing 并用事物的数据填充它，从而产生一个 ViewThings 的 IEnumerable。

但是备份，我也对更智能的方法来处理格式化标志以供查看感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T21:22:09.137

您可以使用[AutoMapper](http://automapper.org/)在域模型和视图模型之间进行映射。这个想法是您定义和之间的映射`Thing`，`ThingViewModel`然后 AutoMapper 将负责映射这些对象的集合，这样您就不必迭代：

```
public ActionResult Foo()
{
    IEnumerable<Thing> things = ... get the things from whererver you are getting them
    IEnumerable<ThingViewModel> thingViewModels = Mapper.Map<IEnumerable<Thing>, IEnumerable<ThingViewModel>>(things);
    return View(thingViewModels);
} 
```

现在剩下的就是定义 a`Thing`和之间的映射`ThingViewModel`：

```
Mapper
    .CreateMap<Thing, ThingViewModel>().
    .ForMember(
        dest => dest.SomeProperty,
        opt => opt.MapFrom(src => ... map from the enum property)
    ) 
```

# javascript - 使用 Sencha Touch 将外部页面（不同域）加载到 div

> ID：11319207
> 
> 赞同：1
> 
> 时间：2012-07-03T21:07:36.380
> 
> 标签：javascript, iphone, html, sencha-touch, mobile-application

我有一个我正在尝试构建的设置，它基本上充当 Web 浏览器代理。

基本上，我们有一个我们编写的应用程序，可以让 iPhone 用户在他们的主屏幕上添加书签。当他们查看我们应用程序中的内容时，有时他们会获得一个将他们定向到另一个网站的 URL。当他们在从主屏幕启动应用程序后访问此 URL 时，它会将其加载到应用程序本身中，从而删除他们正在处理的应用程序（这对我们的应用程序来说是不好的行为）。有人告诉我，如果我们在其末尾添加一个查询字符串（“？”），那么它将在 Safari 中启动新页面。

这将是可以接受的行为，除非当他们再次从主屏幕调出应用程序时，它会重新加载页面并且他们会从他们所在的任何地方失去他们的位置（这也是不可接受的）。

为了避免这种情况，对于 iPhone 用户，我添加了一个 div，该 div 旨在用于加载他们想要在我们的应用程序内部查看的页面，这样他们仍然可以有一个后退按钮来返回他们所在的位置。这将是完美的，除非我们在尝试加载外部页面时遇到安全沙箱违规（显然）

你们会推荐什么来解决这个问题？请记住，给这只猫剥皮的方法不止一种，如果有人有任何建议，我很乐意找到更好的解决方案。

我能想出的唯一建议是让我们将应用程序转变为原生 iOS 应用程序，以便当用户离开应用程序时，它可以在后台执行多任务并保持其状态。我们希望尽可能避免这种情况，因为我们必须整合大量额外的物流才能使其与我们正在使用的其他工具一起使用。

# php - 将 HTML 表单数据提交到 div 元素而不刷新页面

> ID：11319212
> 
> 赞同：0
> 
> 时间：2012-07-03T21:07:56.657
> 
> 标签：php, html, ajax

我将在 JQuery 中创建的向下滑动面板放入表格中，该面板包含联系表格。我需要发布该表单数据，但防止在点击提交按钮后重新加载所有页面，因为在页面重新加载后，向下滑动面板也会重新加载并且它会缩小。我只需要刷新 div 元素即可将表单数据发送到 PHP。

```
<div id="form">
    <form id="form" action="/">
       <br />
                <p>
                <label for="name"><small>Name *</small></label><br />
                  <input type="text" name="name" id="name" value="" size="15" />

                </p>
                <p>
                   <label for="email"><small>Mail *</small></label><br />
                  <input type="text" name="email" id="email" value="" size="15" />

                </p>
                <p>
                <label for="comments"><small>Message *</small></label>
                  <textarea name="comments" id="comments" rows="10" cols="5"></textarea>
                </p>
                <p>
                  <input name="submit" type="submit" id="submit" value="Send" />
                  &nbsp;
                  <input name="reset" type="reset" id="reset" tabindex="5" value="Reset" />
                </p>
              </form>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T21:14:35.593

首先制作提交按钮：

```
<input name="submit" type="button" id="submit" value="Send" /> 
```

然后使用这个：

```
$("#submit").click(function(){
  $.post("test.php", $("#form").serialize());
}); 
```

[http://jsfiddle.net/g3Ubh/](http://jsfiddle.net/g3Ubh/)

# html - 为 Qt 传输 html 输入

> ID：11319214
> 
> 赞同：0
> 
> 时间：2012-07-03T21:08:07.303
> 
> 标签：html, c++, qt, qwebview

我有一个`QWebView`和里面，说有一些组合框，单选按钮或某种形式。

在 中显示该网站`QWebView`，有什么方法可以获取已检查/填充的信息或其他信息（html 网页是我的）？

我为此使用Qt。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T21:30:08.630

`QWebElement`您可以使用objects访问这些元素：

```
QWebView myWebView;
QWebPage * webPage = myWebView.page();
QWebFrame * frame = webPage->mainFrame();
QWebElement myElement = frame->documentElement(); 
```

`myElement`可以像在 JavaScript 中使用 DOM API 一样进行操作。关于使用 QWebElement 的更多信息，可以参考 QWebElement 官方文档：http: [//qt-project.org/doc/qt-4.8/qwebelement.html](http://qt-project.org/doc/qt-4.8/qwebelement.html)

# android - EditText 的 Inputtype textPassword 允许使用什么空格

> ID：11319217
> 
> 赞同：0
> 
> 时间：2012-07-03T21:08:34.993
> 
> 标签：android, android-layout

我已将 EditText inputtype 设置为 textPassword，但它允许用户输入例如空格作为密码的一部分。有什么方法可以防止用户在输入密码时输入空格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T21:22:52.620

如果您不想在密码上使用修剪，您应该在 EditText 中放置一个 inputFilter，当用户按下空格按钮或您不想要的每个其他字符时，您应该返回“”。示例（概述）：

```
text = (EditText) findViewById(R.id.edit);
InputFilter filter = new InputFilter() {
     public CharSequence filter(CharSequence source, int start, int end,Spanned dest, int dstart, int dend) { 
        // implementation of what you want or not
    }  
};
text.setFilters(new InputFilter[] { filter }); 
```

# python - 收到消息时更新状态栏？

> ID：11319221
> 
> 赞同：0
> 
> 时间：2012-07-03T21:08:56.163
> 
> 标签：python, pygtk, glade

我对 GUI 设计很陌生，并且很难与我的核心应用程序进行交流。

我有一个用来运行我的核心代码的线程。它在用户单击开始按钮时启动。另一方面，我有我的 gui；我希望在此过程中对其进行更新。

我的线程当前填充了一个队列，我想在状态栏中设置这个队列的消息。

目前，我使用：

```
 while not self.stopPull:
         try:
             print self.mess_queue.get() # would set my status bar
         except Queue.Empty:
            continue 
```

线程代码非常基本：

```
 while not self.stoprequest.isSet():
            bla()#some processing . . .
            self.result_q.put("bla")
            bla()#some other processing . . .
            self.result_q.put("blabla") 
```

问题是，这当然是阻塞的。. .

那么我是否必须创建另一个线程来收听队列中的新消息，或者有没有办法在拉出新消息时产生某种中断？

再一次，我对交流过程完全一无所知，我必须错过一些基本的关键词，因为我在网上找不到关于这个主题的文档。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:23:36.157

为了使 GUI 成为非阻塞的，必须使用线程。

pygtk 常见问题解答有一部分专门用于此： [http ://faq.pygtk.org/index.py?req=all#20.1](http://faq.pygtk.org/index.py?req=all#20.1)

# php - 使用 AJAX 加载图像文件？

> ID：11319222
> 
> 赞同：2
> 
> 时间：2012-07-03T21:08:59.527
> 
> 标签：php, jquery, ajax, image

我想知道是否可以仅使用 AJAX 加载图像（从带有 < input type="file" /> 的表单或其他类似拖放区域的表单）？

我问这个问题是因为每个人都回答：“不，由于安全问题，这绝对不可能。网络浏览器无法访问文件系统”。

那么这个网站是怎么做的：[Mothereffing 动画 Gif](http://mothereffinganimatedgif.com/)呢？

谢谢 ！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T21:18:22.547

我用[谷歌搜索](https://www.google.com/search?q=ajax%20drag%20and%20drop%20file)了“ajax 拖放文件”，第一个结果是[这个](http://valums.com/ajax-upload/)。

简短的回答：是的，很有可能。不过，您应该考虑到，拖放操作并非在每个浏览器/环境中都能完美运行，因此您仍应保留备用按钮以防万一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T21:25:43.063

Mothereffing 动画 Gif 正在使用 Backbone 和此[脚本](http://mothereffinganimatedgif.com/assets/js/models.js)将图像转换为 base64 数据 url。

# boost-spirit - 使用 Spirit.Qi 消除语法糖

> ID：11319223
> 
> 赞同：2
> 
> 时间：2012-07-03T21:09:05.523
> 
> 标签：boost-spirit, boost-spirit-qi, boost-spirit-lex

我正在尝试解析一种类似 lisp 的语言，该语言具有一些常用功能的语法糖。例如，加号函数可以写成 (+ 1 2) 或 1 + 2。我认为在尝试解释语言之前消除句法糖会显着促进解释过程，因为那样的话，唯一的评估规则需要实现的将是函数调用，并且所有中缀运算符都必须具有相应的内置函数。我在想我可以创建一个解析器，它将遍历从词法分析器接收到的标记，并对它们重新排序以将表达式放入前缀符号中。但这将要求解析器的输出也是令牌列表。在 Spirit.Q 中可能吗？据我了解，精灵。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T15:19:19.013

当然，一切皆有可能。

也就是说，你为什么不在 AST 上进行操作呢？

*   解释时不要担心输入表示
*   不用担心在词法分析/解析时进行解释

考虑这样的[AST 表示](https://gist.github.com/3047788#file_expr.hpp)（灵感来自一种简化的 s 表达式）：

```
typedef boost::make_recursive_variant<
        std::string,
        std::vector< boost::recursive_variant_ >
   >::type expr_t; 
```

您将能够定义规则以接受`s_expr`or`binobj`并***解析为相同的 AST***

```
qi::rule<It, std::vector<expr_t>(), Skipper> binop;
qi::rule<It, expr_t(), Skipper> expr, s_expr, name;

expr   = binop | s_expr;

binop = (s_expr >> (string("+") | string("-") | string("*") | string("/")) >> expr)
    [
        phx::push_back(_val, _2),
        phx::push_back(_val, _1),
        phx::push_back(_val, _3)
    ];

name = as_string [ lexeme [ +(graph - char_("()") ) ] ];

s_expr = ('(' > +expr > ')') | name; 
```

* * *

## 完整演示

我在这里有这个想法的完整演示：[https ://gist.github.com/3047788](https://gist.github.com/3047788)

* * *

为了好玩，我投入了

*   使用 karma ( [display.hpp](https://gist.github.com/3047788#file_display.hpp) / [display.cpp](https://gist.github.com/3047788#file_display.cpp) ) 的 AST 转储程序来演示如何`(1 + 3)`将其解析为相同的语法树`(+ 1 3)`
*   一个基本的评估引擎 ( [eval.hpp](https://gist.github.com/3047788#file_eval.hpp) / [eval.cpp](https://gist.github.com/3047788#file_eval.cpp) ) ¹

[test.cpp](https://gist.github.com/3047788#file_test.cpp)的主要演示：

```
int main()
{
    for (const auto input : std::list<std::string> {
         "",
         "(+ 1 3)",
         "(1 + 3)",
         "(1 + 4 / 2)",
         "(1 + (* 4 5 6) / 2)",
         "(avg   1 + (* 4 5 6) / 2)",
         "(trace 1 + (* 4 5 6) / 2 1 1 1 1 999)",
         "(avg   1 + (* 4 5 6) / 2 1 1 1 1 999)",
         "(avg   1 + (* 4 (unknown-function 5) 6) / 2 a b c)",
     })
    {
        std::cout << "----------------------\n";
        expr_t ast = doParse(input, qi::space);

        try 
        {
            std::cout << "eval<double>: " << eval<double>(ast) << std::endl;
            std::cout << "eval<int>   : " << eval<int>   (ast) << std::endl;
        } catch(std::exception const& e)
        {
            std::cerr << e.what() << '\n';
        }
    }
} 
```

结果如下：

```
----------------------
parse failed: ''
warning: undefined '<no ast>'
eval<double>: 0
warning: undefined '<no ast>'
eval<int>   : 0
----------------------
parse success
input       : (+ 1 3)
ast parsed  : (+ 1 3)
eval<double>: 4
eval<int>   : 4
----------------------
parse success
input       : (1 + 3)
ast parsed  : ((+ 1 3))
eval<double>: 4
eval<int>   : 4
----------------------
parse success
input       : (1 + 4 / 2)
ast parsed  : ((+ 1 (/ 4 2)))
eval<double>: 3
eval<int>   : 3
----------------------
parse success
input       : (1 + (* 4 5 6) / 2)
ast parsed  : ((+ 1 (/ (* 4 5 6) 2)))
eval<double>: 61
eval<int>   : 61
----------------------
parse success
input       : (avg   1 + (* 4 5 6) / 2)
ast parsed  : (avg (+ 1 (/ (* 4 5 6) 2)))
eval<double>: 0
eval<int>   : 0
----------------------
parse success
input       : (trace 1 + (* 4 5 6) / 2 1 1 1 1 999)
ast parsed  : (trace (+ 1 (/ (* 4 5 6) 2)) 1 1 1 1 999)
trace( 61 1 1 1 1 999 )
eval<double>: 0
trace( 61 1 1 1 1 999 )
eval<int>   : 0
----------------------
parse success
input       : (avg   1 + (* 4 5 6) / 2 1 1 1 1 999)
ast parsed  : (avg (+ 1 (/ (* 4 5 6) 2)) 1 1 1 1 999)
eval<double>: 167.167
eval<int>   : 167
----------------------
parse success
input       : (avg   1 + (* 4 (unknown-function 5) 6) / 2 a b c)
ast parsed  : (avg (+ 1 (/ (* 4 (unknown-function 5) 6) 2)) a b c)
error: can't apply 'unknown-function' to 1 args (std::exception) 
```

* * *

¹请记住，没有类型系统，这就是为什么您必须指定硬编码数据类型才能将所有值解释为（例如`double result = eval<double>(ast)`）。也没有符号表，所以只有内置函数`+-/*` `trace`和`avg`存在

# ruby-on-rails - 如何对带有约束的 Rails 路由进行功能测试？

> ID：11319224
> 
> 赞同：0
> 
> 时间：2012-07-03T21:09:12.960
> 
> 标签：ruby-on-rails, functional-testing, rails-routing

我有一个 Rails 3 应用程序，并且正在尝试为所有路由编写测试。

想象一下这条非常简单的路线：

```
resources :jobs, :constraints => {:id => /\d+/} 
```

我现在想测试一下。在我的功能测试中，很容易使用Rails 中的[内置断言为肯定情况编写断言：](http://guides.rubyonrails.org/routing.html#testing-routes)

```
assert_routing "jobs/4", { :controller => "jobs", :action => "show", :id => "4" } 
```

断言否定的最佳方法是什么？即“jobs/wibble”，没有通过约束，没有被路由，而是返回一个错误？有没有一些简单的方法来实现“assert_not_routing”或类似的东西？以前有人处理过这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T09:39:12.747

我最后找到的解决方案是在功能测试中测试有效URL的路由，在集成测试中测试无效URL的非路由。

我创建了一个名为 RoutesTest 的新集成测试类，并在其中存储了不应路由到任何地方的所有 URL。

```
require 'test_helper'

class RoutesTest < ActionDispatch::IntegrationTest
  test "broken routes don't work" do
    assert_raise(ActionController::RoutingError) {
      get "/jobs/wibble"
    } 
  end
end 
```

我仍然在功能测试中测试有效路线。这里有一些测试神学失败了，很可能：在我们提出的关于特定测试应该在单元、集成和功能概念中的什么位置的任意且相当荒谬的理论中，这似乎有点奇怪。但我宁愿完成工作，也不愿与人争论测试神学。所以我就是这样做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T22:11:57.257

您是否尝试过为路径声明零路由？

# silverlight - 在我的自定义 ListBoxControl 中看不到所有 ListBoxItem

> ID：11319226
> 
> 赞同：0
> 
> 时间：2012-07-03T21:09:24.363
> 
> 标签：silverlight, windows-phone-7

我有一个自定义 ListBox 控件，我将 Source 设置为 250 个对象的集合。当控件显示时，我对 GetContainerForItemOverride() 和 PrepareContainerForItemOverride() 的覆盖被调用了大约 3 页（其中一页是 ListBoxControl 的高度）的项目。当我向上滑动时，项目会向上滚动，但是一旦 3 页的最后一个项目从底部向上滚动，就不再调用我的 GetContainerForItemOverride() 和 PrepareContainerForItemOverride() 覆盖来获取和显示其余项目。相反，这些项目会按我滑动的量向上滚动。从顶部将最后一个项目带回视图需要相同的滑动量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T07:52:53.483

您是否尝试过使用 ScrollIntoView 方法

# android - 通缉：从 UPC/EAN 条码获取多语言产品信息的 API 用于移动应用

> ID：11319233
> 
> 赞同：1
> 
> 时间：2012-07-03T21:09:39.877
> 
> 标签：android, ios, amazon-web-services, barcode

这里有几个讨论，人们正在寻找可以根据产品 UPC 或 EAN 条形码返回产品信息的服务。

但是，那些讨论的总是有英文结果，只是。我正在寻找的是一种**多语言服务**，它将返回特定语言的产品名称。

另外，我要使用的应用程序不是购物应用程序，只是产品信息。如果可能的话，我需要一个简短的产品名称、一些基本信息和一张照片。价格比较会很好，但它并不是真正需要的。

到目前为止，我查看了 Google 的**Search API for Shopping**，但该 API 限制为每天 2,500 个请求，并且如果您需要取消该配额，则没有具体的定价信息。这个API主要用于价格比较。

亚马逊的**产品广告 API**看起来不错，但他们的 API 条款和条件禁止在移动应用程序中使用这些数据。（对吧？）缓存数据也是被禁止的。（令人惊讶的是，有一些应用程序*必须*在某个地方使用亚马逊的 API，但也许这些应用程序只是在他们的雷达之下。有几篇开发人员的博客文章，他们的应用程序因违反其 API 规则而被亚马逊击落。）

**searchupc**在 Stackoverflow上被推荐了很多，但它不是多语言的。我真的很想知道那个网站怎么不能违反上述亚马逊 API 规则。searchupc 实际上是一个变相的价格比较网站，他们经常返回亚马逊的产品照片网址。此外，他们返回的购物链接使用自己的域进行了混淆，这又违反了亚马逊的规则。这对亚马逊来说怎么可能？我错过了什么吗？

searchupc 有几个类似的网站，抱歉我不会在这里一一列出。其中大多数只有英文，有些返回德文产品名称。除了谷歌和亚马逊，我还没有找到一个允许通过所需语言进行查询的。它们中的大多数似乎是由业余爱好者或 SEO 运营的，许多似乎已被遗弃，甚至无法正常工作，有些提供 API 访问权限，但通常需要预付款或规则不明确。这很令人困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T06:46:15.110

我是[http://aerse.com](http://aerse.com)的代表。Aerse 提供：

*   API 访问和多语言。目前它仅支持英语和俄语产品信息。
*   产品图片
*   [适用于 Android 的](http://aerse.com/omni)移动应用程序。
*   它是完全免费的
*   对请求没有限制（没有那么多客户）

# git - 如何自动化 git merge 不提示确认提交消息？

> ID：11319234
> 
> 赞同：32
> 
> 时间：2012-07-03T21:09:41.307
> 
> 标签：git, automation

我正在尝试使用 git 执行一些自动化脚本，例如更新子模块、移动到适当的标签等简单的事情，但我现在发现的问题之一是 git 现在强制您确认合并消息。有没有办法阻止这种行为的发生？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-07-04T04:39:38.723

您可以添加`--no-edit`开关`git-merge`，它不会要求您确认合并消息。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-08-29T13:21:41.260

为了防止 git 在 mac 上提示您提交提交消息，请将其添加到您的 .bashrc 或 .bash_profile （[阅读有关两个文件之间差异的更多信息](http://www.joshstaiger.org/archives/2005/07/bash_profile_vs.html)）

```
export GIT_MERGE_AUTOEDIT=no 
```

然后在您的终端类型中：

```
source ~/.bashrc 
```

重新加载您的 bash 文件并继续，不受任何干扰。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2020-07-08T14:40:56.740

使用这个命令：

```
git merge other_branch --commit --no-edit 
```

`--commit`在合并后立即自动提交。

`--no-edit`以防止显示提交消息编辑器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-09T21:24:09.950

`vim`您可以通过用`cat`or替换来更改编辑器以使其不显示`true`，例如：

```
GIT_EDITOR=true git merge branch_name 
```

这将自动填充合并消息。

# ruby-on-rails - 如何在 JSON 字符串对象中包含 rails 项目？

> ID：11319238
> 
> 赞同：0
> 
> 时间：2012-07-03T21:10:00.750
> 
> 标签：ruby-on-rails, stripe-payments

我正在尝试将此字符串发送到我的 Stripe 帐户以处理交易，并且我想将所购买商品的 ID 和支付金额作为 JSON 字符串发送。如何在字符串中包含模型的各个部分？

```
customer = Stripe::Customer.create(email: email, description: {"amount:" amount, "id:" idea_id}') 
```

模型的一部分是数量，另一部分是idea_id

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T23:04:01.940

假设您的模型称为 Product

```
@product = Product.find(params[:id])

customer = Stripe::Customer.create(email: email, description: {amount: @product.amount, id: @product.idea_id}.to_json) 
```

或者你也可以使用

```
customer = Stripe::Customer.create(email: email, description: @product.as_json(only: [:amount, :idea_id])) 
```

但是，如果您绝对需要 idea_id 的密钥为“id”，这可能不起作用。在这种情况下使用第一个选项。

希望这可以帮助

# classloader - 用 jodd 加载类并在 drools 中使用它们

> ID：11319239
> 
> 赞同：2
> 
> 时间：2012-07-03T21:10:05.753
> 
> 标签：classloader, drools, jodd

我正在开发一个使用流口水来评估某些对象的系统。但是，这些对象可以是在运行时使用 jodd 加载的类。我可以使用以下功能很好地加载文件：

```
 public static void loadClassFile(File file) {
    try {
        // use Jodd ClassLoaderUtil to load class into the current ClassLoader
        ClassLoaderUtil.defineClass(getBytesFromFile(file));
    } catch (IOException e) {
        exceptionLog(LOG_ERROR, getInstance(), e);
    }
 } 
```

现在假设我创建了一个名为 Tire 的类并使用上面的函数加载它。有没有办法可以在我的规则文件中使用 Tire 类：

```
rule "Tire Operational"
when
    $t: Tire(pressure == 30)
then

end 
```

现在，如果我尝试添加此规则，我会收到一条错误消息，提示无法解析 ObjectType Tire。我的假设是我会以某种方式需要在规则中导入轮胎，但我不确定如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T21:43:03.710

从第 3 版开始就没有使用 Drools，但无论如何都会尝试提供帮助。当您以这种方式加载类时（动态地，在运行时，无论您使用的是 Class.forName() 还是 Jodd），加载的类名根本无法在代码中显式使用。我相信我们可以使用以下 sudo 代码简化您的问题，您首先加载一个类，然后尝试使用它的名称：

```
defineClass('Tire.class');
Tire tire = new Tire(); 
```

这显然不起作用，因为轮胎类型在编译时不可用：编译器不知道您将在执行期间加载什么类型。

可行的是让Tire 实现一些接口（例如VehiclePart）。因此，您可以使用以下 sudo 代码：

```
Class tireClass = defineClass('Tire.class');
VehiclePart tire = tireClass.newInstance();
System.out.println(tire.getPartName()); // prints 'tire' for example 
```

然后也许你可以在接口 VehiclePart 和 getPartName() 属性上构建你的 Drools 规则。

**附录**

仅当接口涵盖动态加载类的所有属性时，上述内容才有意义。在大多数情况下，这不是一个有效的解决方案：动态加载的类根本不共享属性。所以，这是另一种方法。

这个问题可以通过“扩展”类加载器类路径来解决，而不是使用显式类加载。请注意，这是一个*黑客*！

在 Jodd 中，有一个方法：**ClassLoaderUtil.addFileToClassPath()**，可以在运行时向类加载器添加文件或路径。所以这里是对我有用的步骤：

1）将所有动态创建的类放入某个根文件夹中，考虑到它们的包。例如，假设我们要使用一个**jodd.samples.TestBean**类，它有两个属性：*数字*（int）和一个*值*（字符串）。然后我们需要把这个类放到**root/jodd/samples**文件夹中。

2）构建所有动态类后，扩展类加载器路径：

```
ClassLoaderUtil.addFileToClassPath("root", ClassLoader.getSystemClassLoader()); 
```

3) 在创建 KnowledgeBuilder 之前加载类并创建它：

```
Class testBeanClass = Class.forName("jodd.samples.TestBean");
Object testBean = testBeanClass.newInstance(); 
```

4）此时您可以使用BeanUtils（来自Jodd，例如：）来操作testBean实例的属性

5）创建 Drools 东西并将插入 testBean 添加到会话中：

```
knowledgeSession.insert(testBean); 
```

6）在规则文件中使用它：

```
import jodd.samples.TestBean;

rule "xxx"
    when
    $t: TestBean(number == 173)
then
    System.out.println("!!!");
end 
```

这对我有用。请注意，在第 2 步中，您可以尝试使用不同的类加载器，但您可能需要它通过 KnowledgeBuilderConfiguration（即 PackageBuilderConfiguration）将其传递给 KnowledgeBuilderFactory。

**另一种解决方案**

另一种解决方案是简单地将所有对象属性复制到映射中，并在规则文件中处理映射。所以你可以在第 4 步使用这样的东西：

```
Map map = new HashMap();
BeanTool.copy(testBean, map); 
```

稍后（步骤#5）将映射添加到 Drools 上下文而不是 bean 实例。**在这种情况下，使用defineClass()**方法来显式定义每个类会更好。

# asp.net-mvc - 为什么 Chrome 在这两种情况下使用客户端缓存的方式不同？

> ID：11319240
> 
> 赞同：5
> 
> 时间：2012-07-03T21:10:07.390
> 
> 标签：asp.net-mvc, google-chrome, pdf, http-caching

我正在开发一个使用 HTML5 的小型单页应用程序。一个功能是显示嵌入在页面中的 PDF 文档，可以从列表中选择哪些文档。

现在我正在尝试让 Chrome（首先，然后是所有其他现代浏览器）使用本地客户端缓存来完成对 PDF 文档的简单 GET 请求，而无需通过服务器（当然第一次除外）。`<object>`我通过在 HTML 中的元素上设置“数据”属性来请求 PDF 文件。

我找到了XMLHttpRequest （不是）的[工作示例。](http://www.httpwatch.com/demos/ajax_caching/)`<object>`如果您使用 Chrome 的开发人员工具（网络选项卡），您可以看到第一个请求到达服务器，并导致带有以下标头的响应：

```
Cache-Control:public,Public
Content-Encoding:gzip
Content-Length:130
Content-Type:text/plain; charset=utf-8
Date:Tue, 03 Jul 2012 20:34:15 GMT
Expires:Tue, 03 Jul 2012 20:35:15 GMT
Last-Modified:Tue, 03 Jul 2012 20:34:15 GMT
Server:Microsoft-IIS/7.5
Vary:Accept-Encoding 
```

第二个请求是从本地缓存中提供的，没有任何服务器往返，这就是我想要的。

回到我自己的应用程序，然后我使用 ASP-NET MVC 4 并设置

```
[OutputCache(Duration=60)] 
```

在我的控制器上。对该控制器的第一个请求 - 带有 URL`http://localhost:63035/?doi=10.1155/2007/98732`的结果如下：

```
Cache-Control:public, max-age=60, s-maxage=0
Content-Length:238727
Content-Type:application/pdf
Date:Tue, 03 Jul 2012 20:45:08 GMT
Expires:Tue, 03 Jul 2012 20:46:06 GMT
Last-Modified:Tue, 03 Jul 2012 20:45:06 GMT
Server:Microsoft-IIS/8.0
Vary:* 
```

第二个请求导致到服务器的另一次往返，响应速度更快（建议服务器端缓存？）但返回 200 OK 和这些标头：

```
Cache-Control:public, max-age=53, s-maxage=0
Content-Length:238727
Content-Type:application/pdf
Date:Tue, 03 Jul 2012 20:45:13 GMT
Expires:Tue, 03 Jul 2012 20:46:06 GMT
Last-Modified:Tue, 03 Jul 2012 20:45:06 GMT
Server:Microsoft-IIS/8.0
Vary:* 
```

对相同 URL 的第三次请求会导致另一个往返和带有以下标头的 304 响应：

```
Cache-Control:public, max-age=33, s-maxage=0
Date:Tue, 03 Jul 2012 20:45:33 GMT
Expires:Tue, 03 Jul 2012 20:46:06 GMT
Last-Modified:Tue, 03 Jul 2012 20:45:06 GMT
Server:Microsoft-IIS/8.0
Vary:* 
```

**我的问题是**，我应该如何设置 OutputCache 属性以获得所需的行为（即在初始请求的 X 秒内从客户端缓存中填充 PDF 请求）？

`<object>`或者，当我通过在元素上设置“数据”属性来显示 PDF 时，我是否做得不对？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-15T22:56:20.903

客户端从来没有**义务**缓存。每个浏览器都可以自由地使用自己的启发式方法来决定是否值得缓存一个对象。毕竟，缓存的任何使用都会与缓存的其他用途“竞争”。

缓存并非旨在**保证**快速响应；平均而言，它旨在增加**经常使用的不变资源**已经存在的可能性。**您正在尝试做的不是缓存旨在提供帮助的内容。**

根据您报告的结果，您在 2012 年使用的 Chrome 版本认为缓存将在 60 秒后过期且仅被请求一次的对象是没有意义的。所以它在使用后丢弃了第一个副本。然后你第二次询问，它开始给这个 URL 更高的优先级——它一定记住了最近的 URL，并观察到这是第二个请求——它把副本保存在缓存中，但是当第三个请求到来时，要求服务器验证它是否仍然有效（可能是因为到期时间只有几秒钟）。服务器说“304 - 未修改 - 使用您缓存的副本”。它没有再次发送pdf。

恕我直言，对于即将过期的对象，这是合理的缓存行为。

* * *

**如果您想增加 PDF 保留更长时间的机会，请**给出更晚的到期时间，但说它必须与服务器检查以查看它是否仍然有效。

如果使用 HTTP Cache-Control 标头，这可能是： `private, max-age: 3600, must-revalidate`. 这样，您应该会看到到服务器的往返，只要页面有效，它将给出 304 响应。这应该是一个快速响应，因为没有**数据**被发回——使用浏览器的缓存版本。

`private`是可选的——与这种缓存行为无关——我假设无论这个易失的 PDF 是什么，它只对给定的用户有意义和/或不应该在某个共享位置长时间闲逛。

* * *

**如果您真的需要完全不与服务器对话的性能**，那么请考虑编写 javascript 来隐藏/显示包含该 PDF 的 DOM 元素，而不是删除它，并且需要再次请求它。

您的页面 javascript 代码是唯一“理解”您真正希望 PDF 保留的地方，即使您当前没有向用户展示它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T06:15:16.683

您是否尝试过将 OutputCache 的 Location 属性设置为“Client”

```
[OutputCache(Duration=60, Location = OutputCacheLocation.Client)] 
```

默认情况下，位置属性设置为“任何”，这可能意味着响应缓存在客户端、代理或服务器上。

[MSDN 输出缓存](http://msdn.microsoft.com/en-us/library/system.web.ui.outputcachelocation%28v=vs.108%29.aspx)位置的更多信息

# ruby-on-rails - 如何在一个页面上多次使用相同的布局？

> ID：11319246
> 
> 赞同：1
> 
> 时间：2012-07-03T21:10:55.617
> 
> 标签：ruby-on-rails, ruby, layout

TL; DR：如何在一个页面上多次使用相同的布局？所有使用重复布局渲染部分的尝试都会进入第一次使用布局的元素。

快速信息：

使用

```
Rails 2.3.14
Ruby 1.8.7 
```

我的部分使用 content_for，这对于布局来说非常方便。

基本上，我的布局如下所示：

```
<div class="header">
    <%= yield :modal_header %>
</div>
<div class="body">
    <%= yield :modal_body or yield %>
</div> 
```

通常，这就是我使用模态布局的方式：

```
<% content_for :modal_header do %>
    header text / elements
<% end %>

<% content_for :modal_body do %>
    body info / settings for object or warning message, etc
<% end %> 
```

这就是我在页面上呈现模式的方式：

```
<%= render :partial => "section_options", :layout => "modal" %> 
```

效果很好

但

当我在同一页面上尝试呈现另一个模式时：

```
<%= render :partial => "section_content_options", :layout => "modal" %> 
```

这就是我页面顶部的模式发生的情况（首先出现在 HTML 文档中）

```
<div class="header">
    -- header from second partial --
    -- header from first partial --
</div>
<div class="body">
    -- body from second partial --
    -- body from first partial --
</div> 
```

然后在页面的后面，第二部分的内容应该是：一切都正确呈现......为了这个例子：

```
<div class="header">
    section content options
</div>

<div class="body">
   section contents options ... options
   lil confirm / cancel buttons
</div> 
```

有没有办法解决这个问题？这种行为也确实与 javascript 绑定相混淆。所以。对。

rails 2.3.14 中的布局是否存在错误？我必须升级到 Rails 3 才能解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T22:49:50.937

模态框应该使用局部渲染，而不是布局。布局旨在定义*整个*站点的整体布局，而不是特定部分。像模态（根据设计是特定的）之类的东西应该是通过条件或 JavaScript 呈现的部分。

# c++ - 如何从 MPI 程序访问 MySQL（使用 MPICH2）？

> ID：11319248
> 
> 赞同：2
> 
> 时间：2012-07-03T21:11:05.920
> 
> 标签：c++, mysql, parallel-processing, mpi, mpich

我有从 MPI 程序（使用 MPICH2）访问的巨大数据库（DBMS = MySQL）。在这个程序中，我只想知道执行 sql 查询的时间。这是对我的其他并行程序的参考。

当代码从 Visual Studio C++ 运行时，它运行良好（我得到了输出）。但是当它 runed use 时`mpiexec`，没有输出，也没有错误消息。否则，当我尝试一个简单的程序（没有mysql代码，使用mpiexec）时，它运行良好（有输出）。我不应该同时使用 mysql 和 mpi 库吗？

像这样的代码：

```
#include <stdio.h>
#include <windows.h>
#include <mysql.h>
#include <iostream>
#include <winsock.h>
#include <mpi.h>
#include <stdlib.h>

using namespace std;

//namespace for error handling
namespace ekception{
        struct error{
        const char *p;
        error(const char *q){
        p=q;
        }
    };
}

int main(int argc, char *argv[]){
    MYSQL mysql,*sock;
    MYSQL_RES *res;
    int state;
    char *host="localhost";
    char *user="root";
    char *password="";
    char *dbName="sp";
    double start,finish,time;
    long j;
    char s[]="SELECT COUNT(kolom2) FROM coba WHERE kolom1<=";
    char query[BUFSIZ];

    MPI_Init(&argc,&argv);

    for(j=250000;j<=25000000;j+=250000){
    sprintf_s(query,"%s%d",s,j);
    start=MPI_Wtime();
    try{
        mysql_init(&mysql); 
        if(!(sock=mysql_real_connect(&mysql,host,user,password,dbName,0,NULL,0))){
            throw ekception::error("Connection failed\n");
        }
        mysql.reconnect=1;

        state=mysql_query(sock,query);

        if(state!=0){
            throw ekception::error("Query execution Failed\n");
        }

        res=mysql_store_result(sock);
        mysql_free_result(res);
        mysql_close(sock);
    }

    catch(ekception::error e){
        printf("%s\n",e.p);
    }

    finish=MPI_Wtime();
    time=finish-start;
    printf("Data size = %d *** time = %f\n",j,time);
}

MPI_Finalize();
getchar();
return 0;
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T00:56:30.623

我建议如下：

1.  添加以下内容以查看您是否`really`在 MPI 框架中运行：

    ```
    int id, nprocs;

    MPI_Comm_rank(MPI_COMM_WORLD, &id);
    MPI_Comm_size(MPI_COMM_WORLD, &nprocs);

    printf("Sql Init from proc %d out of %d!\n", id, nprocs); 
    ```

我将打印排名 ID 作为所有日志语句的一部分，以便识别打印语句从哪个 MPI 子进程开始。

2\. 可以肯定的是，我宁愿检查返回类型`mysql_init(&mysql);`

3\. 出于调试目的，您可以`getchar()`在调用之后添加一个，`MPI_Init()`以便启动两个进程（假设`mpirun/mpiexec`进程数参数为 2）。然后，您可以在 MVS`attach debugger`窗口中看到两个进程的 processid。然后，您可以将调试器附加到其中一个 MPI 子进程，并查看`sql`给定 mpi 子进程的查询执行失败的原因。

4\. 不知道为什么需要打开/关闭`sql socket`for 循环内部。? 它可以在`for`循环之外。

5\. 交叉检查您的程序是否真的与适当的 mpi lib 链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T20:45:06.570

1.  我们可以同时使用 mysql 和 mpi 库，这是真的。
2.  在这个问题上，可能会导致大量数据（但我不确定）。也许用于保存来自 mysql 查询的数据的 MYSQL_RES 的大小不够。

# c++ - VxWorks的套接字getaddrinfo（）等效函数？

> ID：11319249
> 
> 赞同：1
> 
> 时间：2012-07-03T21:11:16.193
> 
> 标签：c++, sockets, vxworks, cross-compiling

据我所知，VxWorks 没有 getaddrinfo() 函数。是否有任何等价物，或者是否有任何关于如何滚动自己的示例？

或者，填充用于套接字的 addrinfo 结构的另一种方法是什么？

**编辑：** 对于任何偶然发现这个问题的人，我必须说“netdb.h”中有 getaddrinfo() 和 freeaddrinfo() 函数*。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T22:08:05.250

无法访问 VxWorks 系统，我的水晶球告诉我`salSocketFind`。

# ruby-on-rails - 错误的解释器：没有这样的文件或目录

> ID：11319260
> 
> 赞同：6
> 
> 时间：2012-07-03T21:12:07.177
> 
> 标签：ruby-on-rails

我正在阅读 Michael Hartl 的教程，第一次尝试学习 Rails，但遇到了一些问题。我最近重新安装了整个 Rails 安装程序，因为我显然无意中删除了一些重要文件。现在，当我尝试运行测试时，出现以下错误：

```
sh.exe": /c/Program Files (x86)/ruby-1.9.3/bin/bundle: "c:/Program: bad interpre
ter: No such file or directory 
```

我检查了我的 PATH 并尝试使用此处列出的解决方案：[找不到捆绑命令。Bad Interpreter](https://stackoverflow.com/questions/10575644/bundle-command-not-found-bad-interpreter) ..但是在 "C:\Program Files (x86)\ruby-1.9.3\bin" 周围加上引号对我没有任何帮助。

我运行 $ rails -v 并得到以下输出：

```
$ rails -v
←[31mCould not find multi_json-1.3.6 in any of the sources←[0m
←[33mRun `bundle install` to install missing gems.←[0m 
```

然后我尝试运行 $bundle install 并再次遇到以下问题：

```
Tom@TOM-PC /c/sample_app (updating-users)
$ bundle install
sh.exe": /c/Program Files (x86)/ruby-1.9.3/bin/bundle: "c:/Program: bad interpre
ter: No such file or directory 
```

我真的很感激任何帮助——我今天花了 5 个多小时试图回到正轨，但仍然不知所措。如果我遗漏任何相关信息，请告诉我——谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T21:24:10.653

您需要打开此文件`/c/Program Files (x86)/ruby-1.9.3/bin/bundle`并查看其中指定的解释器。大概是这样的`/c/Program Files (x86)/ruby-1.9.3/bin/ruby`。您需要`\`在路径中的所有空格（或带有空格的部分）之前写入或将整个路径放在双引号中：

```
/c/"Program Files (x86)"/ruby-1.9.3/bin/ruby 
```

# c# - 隐藏/显示问卷应用程序上的单选按钮

> ID：11319269
> 
> 赞同：1
> 
> 时间：2012-07-03T21:12:41.693
> 
> 标签：c#, winforms

我正在做一个涉及创建一个简单的测验类型表单应用程序的作业。但是，每当我运行该程序时，只有第一个答案会显示多个问题，而我终其一生都无法弄清楚原因。

这是构造函数：

```
MultipleChoice dlg =
    new MultipleChoice(
        new Question("What is the capital of Zimbabwe?",
            new Answer("Paris", false),
            new Answer("Washington D.C.", false),
            new Answer("Harare", true),
            new Answer("Cairo", false),
            new Answer("N'Djamena", false)));
if (dlg.ShowDialog() == DialogResult.OK)
{
   if (dlg.Correct) MessageBox.Show("You got something right!");
   else MessageBox.Show("You couldn't be more wrong");
} 
```

这是问题表格代码：

```
private Question Q;
public MultipleChoice (Question q)
{
    Q = q;
    InitializeComponent();
    textPrompt.Text = Q.Prompt;
    if (Q.A != null)
    {
        radioA.Text = Q.A.Prompt;
    }
    else radioA.Hide();
    if (Q.B != null)
    {
        radioB.Text = Q.B.Prompt;
    }
    radioB.Hide();
    if (Q.C != null)
    {
        radioC.Text = Q.C.Prompt;
    }
    radioC.Hide();
    if (Q.D != null)
    {
        radioD.Text = Q.D.Prompt;
    }
    radioD.Hide();
    if (Q.E != null)
    {
        radioE.Text = Q.E.Prompt;
    }
    radioE.Hide();
}
public bool Correct
{
    get
    {
        if (Q == null) return false;
        if (Q.A != null && Q.A.Correct && radioA.Checked) return true;
        if (Q.B != null && Q.B.Correct && radioB.Checked) return true;
        if (Q.C != null && Q.C.Correct && radioC.Checked) return true;
        if (Q.D != null && Q.D.Correct && radioD.Checked) return true;
        if (Q.E != null && Q.E.Correct && radioE.Checked) return true;
        return false;
    }
} 
```

我哪里出错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T21:21:22.203

之后没有`else`任何选项`A`：

```
if (Q.B != null) 
{ 
    radioB.Text = Q.B.Prompt; 
} 
radioB.Hide();  //This is **always** going to be called - hiding radioB :) 
```

应该：

```
if (Q.B != null) 
    radioB.Text = Q.B.Prompt; 
else
    radioB.Hide(); 
```

# date-format - 日期格式难题？

> ID：11319270
> 
> 赞同：0
> 
> 时间：2012-07-03T21:12:57.643
> 
> 标签：date-format, php

我有这个来自推特的日期，这代表了推文发布的确切日期，

```
Sun, 01 Jul 2012 19:05:54 +0000 
```

我想要的是将其格式设置为 MM/DD HH:MM，试图寻找 php 日期格式，但找不到一种方法让它看起来完全符合我的要求。有人可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T21:15:56.020

```
print date('m/d h:i',strtotime('Sun, 01 Jul 2012 19:05:54 +0000')); 
```

The [date function](http://php.net/manual/en/function.date.php) for php is a good place to find all sorts of information on this.

This would be pretty simple to search and figure it out. You are looking for a date... ahh, date, that is a php function. When you look that up you will see that it takes some params, a format and a time stamp. Well... You do not have a time stamp you have a string. how do i convert a string to time? Wait, there is a [strtotime function](http://php.net/manual/en/function.strtotime.php) in php. There you have it... run the [date](http://php.net/manual/en/function.date.php) function in php with the way you want the date to look and then convert the string to timestamp with [strtotime](http://php.net/manual/en/function.strtotime.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T21:19:50.057

```
<?php
    date_default_timezone_set("UTC");

    $string = "Sun, 01 Jul 2012 19:05:54 +0000";

    $timestamp = strtotime($string);

    print "Date is " . date("m/d H:i", $timestamp) . "\n";
?> 
```

您可能需要更改时区和/或添加/减去秒数或使用本地时间函数在 TZ 之间进行转换。

# java - Java 程序分级

> ID：11319273
> 
> 赞同：0
> 
> 时间：2012-07-03T21:13:01.723
> 
> 标签：java

我已经在这个程序上工作了几个小时，但我不知道如何让程序从分数文本文件中实际打印成绩

```
public class Assign7{
  private double finalScore;
  private double private_quiz1;
  private double private_quiz2;
  private double private_midTerm;
  private double private_final;
  private final char grade;

  public Assign7(double finalScore){
    private_quiz1 = 1.25;
    private_quiz2 = 1.25;
    private_midTerm = 0.25;
    private_final = 0.50;

       if (finalScore >= 90) {
           grade = 'A';
       } else if (finalScore >= 80) {
           grade = 'B';
       } else if (finalScore >= 70) {
           grade = 'C';
       } else if (finalScore>= 60) {
           grade = 'D';
       } else {
           grade = 'F';
       }
}

  public String toString(){
    return finalScore+":"+private_quiz1+":"+private_quiz2+":"+private_midTerm+":"+private_final;

  }
} 
```

这段代码和这个一样编译

```
import java.util.*;
import java.io.*;

public class Assign7Test{
  public static void main(String[] args)throws Exception{

  int q1,q2;
  int m = 0;
  int f = 0;
  int Record ; 
  String name;

    Scanner myIn = new Scanner( new File("scores.txt") );

    System.out.println( myIn.nextLine() +"  avg  "+"letter");

   while( myIn.hasNext() ){
      name = myIn.next();
      q1 = myIn.nextInt();
      q2 = myIn.nextInt();
      m = myIn.nextInt();
      f = myIn.nextInt();
       Record myR = new Record( name, q1,q2,m,f);
       System.out.println(myR);

      }
    }

public static class Record {

       public Record() {
       }

       public Record(String name, int q1, int q2, int m, int f)
       { 

       } 
   } 
} 
```

一旦编译了代码，我就会得到这个，它会准确计算我在 score.txt 中的数字 名称 quiz1 quiz2 期中最终平均字母

Assign7Test$Record@4bcc946b

分配7测试$记录@642423

```
Exception in thread "main" java.until.InputMismatchException    
    at java.until.Scanner.throwFor(Unknown Source)    
    at java.until.Scanner.next(Unknown Source)    
    at java.until.Scanner.nextInt(Unknown Source)        
    at java.until.Scanner.nextInt(Unknown Source)    
    at Assign7Test.main(Assign7Test.java:25) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T21:16:13.700

Exception aside, you actually *are* printing objects of type `Record`. What you would need to do is override `toString()` to provide a decent representation of your object.

```
@Override
public String toString() {
    return "Something meaningful about your Record object.";
} 
```

I also note that you're advancing the Scanner by use of `nextLine()` in `System.out.println('...')`. You may want to comment that part out of your code.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T21:17:57.453

您收到此错误的原因是因为您需要一个整数，但您的扫描仪接下来读取的不是数字。

此外，将其放入记录的 toString 中以停止打印地址。

IE

```
public static class Record {

   public Record() {
   }

   public Record(String name, int q1, int q2, int m, int f)
   { 

   }
    public String toString(){}//print out stuff here. 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T15:08:24.223

将您的记录更改为这样的内容

```
public static class Record {  
    String name;
    int q1;
    int q2;
    int m;
    int f;

    public Record() {}         
    public Record(String name, int q1, int q2, int m, int f) {
        // here you save the given arguments localy in the Record.
        this.name = name;
        this.q1 = q1;
        this.q2 = q2;
        this.m = m;
        this.f = f;
    }
@Override
public String toString(){
   //here you write out the localy saves variables.
   //this function is called when you write System.out.println(myRecordInstance);
   System.out.println(name + ":" + q1 + ":" + q2 + ":" + m + ":" + f);
} 
```

}

它的作用：您必须通过创建记录来保存参数。另外，如果要使用 System.out.println(myRecordInstance); ，则必须覆盖 toString 方法；相反，您可以在 Record 中编写一个返回 String 的其他函数，并打印出该函数的返回值，例如`System.out.println(myRecordInstace.writeMe());`然后您需要将该函数添加到记录中。

```
public String writeMe(){
System.out.println(name + ":" + q1 + ":" + q2 + ":" + m + ":" + f);
} 
```

# wpf - 实体框架 orderby 不更新数据网格

> ID：11319274
> 
> 赞同：0
> 
> 时间：2012-07-03T21:13:12.933
> 
> 标签：wpf, entity-framework, datagrid, sqlite, sql-order-by

我是 C#、MVVM、WPF 和实体框架的新手

我的问题是，如果我订购数据库（orderby）的读取，如果我添加新行，数据网格将不会改变。如果我不订购它的阅读。

所以添加信息：

我的数据库看起来像这样

```
Table Konto
KontoID
KontoName

Table Buchung
KontoID
BuchungsID
Name
BuchDate 
```

加载 Konto 后，它将加载所有相关的 Buchungen

```
 _entityKontoView = new CollectionViewSource();
 _entityBuchungView = new CollectionViewSource();
 // Loads the Konto
 _entityKontoView.Source = _database.Konto;

 _entityKontoView.View.CurrentChanged += (x, y) =>
 {
   _entityBuchungView.Source = ((Konto)_entityKontoView.View.CurrentItem).Buchung
            //.OrderBy(date => date.BuchDate)
                //.ThenBy(buchnr => buchnr.BuchungsID)
                ;
 };
 _entityKontoView.View.Refresh(); 
```

当我现在这样做时`OrderBy`，新插入行后数据网格将不会更新

我打开数据库实体如下：

```
public static databaseEntities _database = new databaseEntities(); 
```

我在 DataGrid 上的 XAML 绑定：

```
ItemsSource="{Binding EntityBuchungsView.View}" 
```

和我的专栏绑定；

```
Binding="{Binding Name}" 
```

据我使用`_database.Buchung.AddObject(test);`，然后`_database.SaveChanges();`我的 DataGrid 得到了更新。

我有什么错？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T16:00:36.313

如果有人和我有同样的问题

我确实实现了一种刷新视图的新方法：

```
public static void RefreshView(CollectionViewSource entity)
{
    entity.View.Refresh();
} 
```

然后它起作用了

# abcpdf - 尝试将 Gecko 引擎与 ABCPdf 和经典 ASP 一起使用

> ID：11319278
> 
> 赞同：1
> 
> 时间：2012-07-03T21:13:28.463
> 
> 标签：abcpdf

我正在尝试使用 ABCPdf 创建动态 PDF，但没有成功。我复制了他们的示例代码并尝试了它，但我收到一个错误：

无法呈现 HTML。没有可用的 MSHTML 文档。

我试图弄清楚如何使用 Gecko 引擎而不是 IE 来重新渲染页面，但找不到方法。任何帮助都非常感谢......谢谢大家！

达米安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:03:55.203

请参阅[https://stackoverflow.com/a/11504285/1411950](https://stackoverflow.com/a/11504285/1411950)。此示例使用 1 个矩形在每个页面上输出 html->pdf。矩形填充了来自 url 的原始 html / html。它也可以使用 Gecko 引擎。如果要制作动态 pdf，则应使用原始 html 作为其内容。请注意，它应该被包装成类似的东西

```
 const String HtmlWrapper = @"<!DOCTYPE html>
            <html>
                <head profile='http://www.w3.org/2005/10/profile'><title></title>
                    <meta http-equiv='Content-Type' content='text/html; charset=utf-8'>
                    <style type='text/css'>
                    </style>
                </head>
                <body>
                {0}
                </body>
            </html>"; 
```

所有 css 都在标头中的脚本标签中或被引用的位置

# java - 无法创建 onCreate(Bundle) - TheNewBoston 教程 46

> ID：11319283
> 
> 赞同：0
> 
> 时间：2012-07-03T21:13:50.653
> 
> 标签：java, android

像往常一样，我在“com.orkun.deneme”下开设了一个名为“OpenedClass”的新课程，正如 Travis 在教程中所说的那样。再次像往常一样，我右键单击>Source>Override/Impliment Methods。列表活动选项卡下曾经有一个 onCreate(Bundle) 的检查按钮。但这一次没有任何名为 List Activity 的选项卡。只有一个名为 Object 的选项卡。所以我无法创建 onCreate(Bundle) 方法，所以我坚持使用本教程。请帮我。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T21:14:46.660

You need to extend `Activity`.

```
public class OpenedClass extends Activity{

} 
```

# entity-framework-4.3 - 实体框架 4.3.1 添加迁移错误：“支持上下文的模型已更改”

> ID：11319284
> 
> 赞同：0
> 
> 时间：2012-07-03T21:13:51.037
> 
> 标签：entity-framework-4.3, entity-framework-migrations

尝试运行 EF 4.3.1 add-migrations 命令时出现错误：

“自从创建数据库以来，支持 ... 上下文的模型发生了变化”。

这是一个出现错误的序列（尽管我可能尝试了十几个也都失败的变体）......

1) 从一个由 EF Code First 创建的数据库开始（即，已经包含一个只有 InitialCreate 行的 _MigrationHistory 表）。

2）此时应用程序的代码数据模型和数据库是同步的（数据库是应用程序启动时由CF创建的）。

3) 因为我的“服务”项目中有四个 DBContext，所以我没有运行“启用迁移”命令（它不处理多重上下文）。相反，我在 Services 项目和 Configuration.cs 文件中手动创建了 Migrations 文件夹（包含在本文末尾）。[我想我在某处的帖子中读到了这个]

4) 数据库尚未更改，应用程序停止，我使用 VS EDM 编辑器对我的数据模型进行微不足道的更改（向现有实体添加一个属性），并让它生成新类（但不修改数据库，显然）。然后我重建解决方案，一切看起来都很好（当然，不要删除数据库或重新启动应用程序）。

5) 我运行以下 PMC 命令（其中“App”是 Configuration.cs 中的一个类的名称）：

PM> add-migration App_AddTrivial -conf App -project Services -startup Services -verbose

...失败并出现“模型...已更改。考虑使用代码优先迁移...”错误。

我究竟做错了什么？还有其他人是否看到工具中的讽刺意味，告诉我使用我已经尝试使用的东西;-)

从 EF CF 创建的数据库开始设置解决方案的正确步骤是什么？我看过帖子说要使用 -ignorechanges 运行初始迁移，但我已经尝试过了，但没有帮助。实际上，我整天都在测试各种排列，但没有任何效果！

我一定是在做一些非常愚蠢的事情，但我不知道是什么！

谢谢，

爸爸猫

配置.cs：

命名空间 mynamespace { 内部密封类 App : DbMigrationsConfiguration { public App() { AutomaticMigrationsEnabled = false; MigrationsNamespace = "Services.App.Repository.Migrations"; }

```
 protected override void Seed(.Services.App.Repository.ModelContainer context)
    {

    }
}

internal sealed class Catalog : DbMigrationsConfiguration<Services.Catalog.Repository.ModelContainer>
{
    public Catalog()
    {
        AutomaticMigrationsEnabled = false;
        MigrationsNamespace = "Services.Catalog.Repository.Migrations";
    }

    protected override void Seed(Services.Catalog.Repository.ModelContainer context)
    {

    }
}

internal sealed class Portfolio : DbMigrationsConfiguration<Services.PortfolioManagement.Repository.ModelContainer>
{
    public Portfolio()
    {
        AutomaticMigrationsEnabled = false;
        MigrationsNamespace = "Services.PortfolioManagement.Repository.Migrations";
    }

    protected override void Seed(Services.PortfolioManagement.Repository.ModelContainer context)
    {

    }
}

internal sealed class Scheduler : DbMigrationsConfiguration<.Services.Scheduler.Repository.ModelContainer>
{
    public Scheduler()
    {
        AutomaticMigrationsEnabled = false;
        MigrationsNamespace = "Services.Scheduler.Repository.Migrations";
    }

    protected override void Seed(Services.Scheduler.Repository.ModelContainer context)
    {

    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T08:23:14.597

使用 EF 迁移时，每个数据库应该有*一个*数据上下文。我知道它可以变得非常大，但是通过尝试拆分它会遇到几个问题。一是您遇到的迁移问题。稍后，当您尝试从不同的上下文连接表时，您可能会遇到问题。不要那样做，这与 EF 的设计方式背道而驰。

# haskell - Haskell 解析数字行文件的更有效方法

> ID：11319287
> 
> 赞同：7
> 
> 时间：2012-07-03T21:14:13.270
> 
> 标签：haskell

所以我有一个大约 8mb 的文件，每个文件有 6 个整数，由空格分隔。

我目前的解析方法是：

```
tuplify6 :: [a] -> (a, a, a, a, a, a)
tuplify6 [l, m, n, o, p, q] = (l, m, n, o, p, q)

toInts :: String -> (Int, Int, Int, Int, Int, Int)
toInts line =
        tuplify6 $ map read stringNumbers
        where stringNumbers = split " " line 
```

并映射到Ints

```
liftM lines . readFile 
```

这将返回一个元组列表。但是，当我运行它时，加载文件并解析它需要将近 25 秒。有什么办法可以加快速度吗？该文件只是纯文本。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T22:07:25.420

您可以使用 s 来加速它`ByteString`，例如

```
module Main (main) where

import System.Environment (getArgs)
import qualified Data.ByteString.Lazy.Char8 as C
import Data.Char

main :: IO ()
main = do
    args <- getArgs
    mapM_ doFile args

doFile :: FilePath -> IO ()
doFile file = do
    bs <- C.readFile file
    let tups = buildTups 0 [] $ C.dropWhile (not . isDigit) bs
    print (length tups)

buildTups :: Int -> [Int] -> C.ByteString -> [(Int,Int,Int,Int,Int,Int)]
buildTups 6 acc bs = tuplify6 acc : buildTups 0 [] bs
buildTups k acc bs
    | C.null bs = if k == 0 then [] else error ("Bad file format " ++ show k)
    | otherwise = case C.readInt bs of
                    Just (i,rm) -> buildTups (k+1) (i:acc) $ C.dropWhile (not . isDigit) rm
                    Nothing -> error ("No Int found: " ++ show (C.take 100 bs))

tuplify6:: [a] -> (a, a, a, a, a, a)
tuplify6 [l, m, n, o, p, q] = (l, m, n, o, p, q) 
```

跑得很快：

```
$ time ./fileParse IntList 
200000

real    0m0.119s
user    0m0.115s
sys     0m0.003s 
```

对于 8.1 MiB 文件。

~~另一方面，使用`String`s 和您的转换（使用几个`seq`s 来强制评估）也只花费了 0.66 秒，因此大部分时间似乎不是用于解析，而是用于处理结果。~~

糟糕，错过了 a`seq`所以`read`s 实际上没有针对`String`版本进行评估。解决这个问题，`String`+`read`大约需要四秒钟，比`Int`@Rotsor 评论中的自定义解析器略高一点

```
foldl' (\a c -> 10*a + fromEnum c - fromEnum '0') 0 
```

所以解析显然确实花费了大量时间。

# oracle - Can I execute a dynamic sql statement in an after update trigger?

> ID：11319290
> 
> 赞同：1
> 
> 时间：2012-07-03T21:14:28.033
> 
> 标签：oracle, plsql, triggers, dynamic-sql

I am using the following statement:

```
query_str='SELECT :NEW.FIRST_NAME||:NEW.LAST_NAME INTO  HostID 
FROM INPUT_TABLE WHERE INPUT_ID=' 
```

The trigger has the following code:

```
EXECUTE IMMEDIATE query_str ||:NEW.INPUT_ID; 
```

I'm getting the following error when updating INPUT_TABLE: ORA-01008: not all variables bound

If I'm updating a record where input_id=111, I would think Oracle would just execute the following statement:

```
SELECT :NEW.FIRST_NAME||:NEW.LAST_NAME INTO  HostID 
FROM INPUT_TABLE WHERE INPUT_ID=111 
```

Why is it having binding issues?

I'm using SQLDeveloper.

```
create or replace   
TRIGGER DATA_DETAIL_TRIG
AFTER INSERT OR UPDATE
ON INPUT_TABLE
FOR EACH ROW
 DECLARE
   DATA_SOURCE_ID_RET  NUMBER;
   resultcount        NUMBER;
   query_str          VARCHAR2(512);
   using_cl          VARCHAR2(512);
   HostId      VARCHAR2(256);
   DATA_SOURCE_ID       NUMBER;
   INPUT_ID         NUMBER(38,0);
   AUTOGENERATE_IND       VARCHAR2(1);
   autogen_const varchar(200);
   pragma autonomous_transaction;
   CURSOR C_DATA_SOURCES IS 
    SELECT DATA_SOURCE_ID
    FROM DATA_SOURCE_DETAIL
    WHERE AUTOGENERATE_IND='Y'
    AND DATA_SOURCE_REF.ACTIVE_IND='Y';
BEGIN

OPEN C_DATA_SOURCES;
LOOP
  FETCH C_DATA_SOURCES INTO DATA_SOURCE_ID_RET;
  EXIT WHEN C_DATA_SOURCES%NOTFOUND;
    query_str:=getHostQuery( DATA_SOURCE_ID_RET);
--SELECT :FIRST_NAME||:LAST_NAME||to_char(:DOB,'yyyy/mm/dd')    
From INPUT_TABLE WHERE     INPUT_ID=:INPUT_ID
using_cl:=getHostUsing(DATA_SOURCE_ID_RET);
--:NEW.FIRST_NAME, :NEW.LAST_NAME, :NEW.DOB, :NEW.INPUT_ID
EXECUTE IMMEDIATE query_str  INTO HostId USING using_cl;

  IF INSERTING THEN
    INSERT INTO DETAIL_TABLE
  (
  DETAIL_ID,
  INPUT_ID,
  HOST_ID,
  DATA_SOURCE_ID,
  NOTE,
  DATE_MODIFIED
  ) VALUES
  (
   DETAIL_SEQ.NEXTVAL,
    :NEW.INPUT_ID,
    HostId,
    DATA_SOURCE_ID_RET,
    'Autogenerate Data Source Insert for Insert Input',
    SYSDATE
  );

ELSIF UPDATING THEN

SELECT COUNT(DATA_SOURCE_ID) INTO resultcount FROM DETAIL_TABLE WHERE     
INPUT_ID=:NEW.INPUT_ID AND DATA_SOURCE_ID=DATA_SOURCE_ID_RET;
  IF resultcount>0 THEN

    UPDATE DETAIL_TABLE
    SET
  HOST_ID = HostId,
  NOTE ='Autogenerate Data Source Update for Update Input',
  DATE_MODIFIED =SYSDATE
  WHERE INPUT_ID=:NEW.INPUT_ID
  AND DATA_SOURCE_ID=DATA_SOURCE_ID_RET;

  ELSE
      INSERT INTO DETAIL_TABLE
  (
  DETAIL_ID,
  INPUT_ID,
  HOST_ID,
  DATA_SOURCE_ID,
  NOTE,
  DATE_MODIFIED
  ) VALUES
  (
  DETAIL_SEQ.NEXTVAL,
  :NEW.INPUT_ID,
  HostId,
   DATA_SOURCE_ID_RET,
   'Autogenerate Data Source Insert for Update Input ',

    SYSDATE
  );
END IF;
--end if insert or update inside update

END IF;
--end IF UPDATING
END LOOP;
Close C_DATA_SOURCES;

COMMIT;
END DATA_DETAIL_TRIG;
--end trigger 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T21:22:48.403

一旦您将`:new`变量放在引号中，Oracle 就会失去它们作为特殊触发变量的含义，并将它们解释为常规绑定变量。您可能需要`USING`在动态 sql 中使用子句。就像是

```
query_str:='SELECT :FIRST_NAME||:LAST_NAME
 FROM INPUT_TABLE WHERE INPUT_ID=:ID';
EXECUTE IMMEDIATE query_str INTO HostID USING 
  :NEW.FIRST_NAME,:NEW.LAST_NAME,:NEW.INPUT_ID; 
```

* * *

更新。

现在随着更多细节的出现，我想知道你为什么需要查询？据我所知，您只需`HostID`从`INPUT_TABLE`. 但是由于您已经将触发器附加到同一个表，因此您已经拥有所需的所有值并且可以简单地执行

```
HostID := :NEW.FIRST_NAME||:NEW.LAST_NAME; 
```

只有当您查询不同的表时，您的方法才有意义。在这种情况下，正如我所提到的，您不能引用`:NEW`或`:OLD`将它们放在`USING`. 不过，您可以从它们中组合其他价值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T21:58:25.390

@Alex：下面是触发器。

```
create or replace   
TRIGGER DATA_DETAIL_TRIG
AFTER INSERT OR UPDATE
ON INPUT_TABLE
FOR EACH ROW
 DECLARE
   DATA_SOURCE_ID_RET  NUMBER;
   resultcount        NUMBER;
   query_str          VARCHAR2(512);
   using_cl          VARCHAR2(512);
   HostId      VARCHAR2(256);
   DATA_SOURCE_ID       NUMBER;
   INPUT_ID         NUMBER(38,0);
   AUTOGENERATE_IND       VARCHAR2(1);
   autogen_const varchar(200);
   pragma autonomous_transaction;
   CURSOR C_DATA_SOURCES IS 
    SELECT DATA_SOURCE_ID
    FROM DATA_SOURCE_DETAIL
    WHERE AUTOGENERATE_IND='Y'
    AND DATA_SOURCE_REF.ACTIVE_IND='Y';
BEGIN

OPEN C_DATA_SOURCES;
LOOP
  FETCH C_DATA_SOURCES INTO DATA_SOURCE_ID_RET;
  EXIT WHEN C_DATA_SOURCES%NOTFOUND;
    query_str:=getHostQuery( DATA_SOURCE_ID_RET);
--SELECT :FIRST_NAME||:LAST_NAME||to_char(:DOB,'yyyy/mm/dd')    
From INPUT_TABLE WHERE     INPUT_ID=:INPUT_ID
using_cl:=getHostUsing(DATA_SOURCE_ID_RET);
--:NEW.FIRST_NAME, :NEW.LAST_NAME, :NEW.DOB, :NEW.INPUT_ID
EXECUTE IMMEDIATE query_str  INTO HostId USING using_cl;

  IF INSERTING THEN
    INSERT INTO DETAIL_TABLE
  (
  DETAIL_ID,
  INPUT_ID,
  HOST_ID,
  DATA_SOURCE_ID,
  NOTE,
  DATE_MODIFIED
  ) VALUES
  (
   DETAIL_SEQ.NEXTVAL,
    :NEW.INPUT_ID,
    HostId,
    DATA_SOURCE_ID_RET,
    'Autogenerate Data Source Insert for Insert Input',
    SYSDATE
  );

ELSIF UPDATING THEN

SELECT COUNT(DATA_SOURCE_ID) INTO resultcount FROM DETAIL_TABLE WHERE     
INPUT_ID=:NEW.INPUT_ID AND DATA_SOURCE_ID=DATA_SOURCE_ID_RET;
  IF resultcount>0 THEN

    UPDATE DETAIL_TABLE
    SET
  HOST_ID = HostId,
  NOTE ='Autogenerate Data Source Update for Update Input',
  DATE_MODIFIED =SYSDATE
  WHERE INPUT_ID=:NEW.INPUT_ID
  AND DATA_SOURCE_ID=DATA_SOURCE_ID_RET;

  ELSE
      INSERT INTO DETAIL_TABLE
  (
  DETAIL_ID,
  INPUT_ID,
  HOST_ID,
  DATA_SOURCE_ID,
  NOTE,
  DATE_MODIFIED
  ) VALUES
  (
  DETAIL_SEQ.NEXTVAL,
  :NEW.INPUT_ID,
  HostId,
   DATA_SOURCE_ID_RET,
   'Autogenerate Data Source Insert for Update Input ',

    SYSDATE
  );
END IF;
--end if insert or update inside update

END IF;
--end IF UPDATING
END LOOP;
Close C_DATA_SOURCES;

COMMIT;
END DATA_DETAIL_TRIG;
--end trigger 
```

# joomla - Is there documentation on how to upgrade a Joomla extension from 1.5 to 2.5

> ID：11319293
> 
> 赞同：0
> 
> 时间：2012-07-03T21:14:40.193
> 
> 标签：joomla, migrate

I'm in the process of migrating my Joomla 1.5 web site to Joomla 2.5\. I'm using all of the migration tools available, but I have a few, key, extensions, most of which are pretty simple, that are not being upgraded to 2.5\. Is there any clear documentation on what must be done to make these extensions compatible with Joomla 2.5?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T22:39:36.300

是的 - 在[docs.joomla.org](http://docs.joomla.org/)你会发现“[将 Joomla 1.5 扩展适配到 Joomla 1.6](http://docs.joomla.org/Adapting_a_Joomla_1.5_extension_to_Joomla_1.6) ”。

Joomla！1.6 是平台变更点，所以即使它被称为 1.6，主要的架构变更已经到位，成为 2.5

# facebook - Is this Facebook app possible?

> ID：11319299
> 
> 赞同：0
> 
> 时间：2012-07-03T21:15:00.120
> 
> 标签：facebook

I want to create a this Facebook app but I don't know if it's possible.

In this FB app users could send through 2 types of images (images with smiles) to their friends' wall. A smile with a tongue out would be more like a "joke" while a smile with sexy lips would mean a more intimate contact.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T21:44:24.860

我想帮助你至少构建你将如何思考这样的应用程序。

首先也是最重要的，在开始编码之前，请先熟悉[Facebook 平台指南](https://developers.facebook.com/policy/)。这将确保您的应用程序正常运行并保持正常运行。

其次，确定您是否正在尝试构建应用程序、应用程序选项卡或网站。应用程序和应用程序选项卡的功能相似，但可以将应用程序选项卡添加到页面。开发一个也有附带选项卡的应用程序（在画布上独立）也没有错。网站是通过身份验证集成到 facebook 的独立实体，您可以在其中控制整个用户体验。鉴于此处提供的详细信息，您最好从应用程序画布开始。

接下来，确定您将在哪里托管它。我推荐 Heroku，因为他们会为您提供免费的托管空间和 URL，这是设置应用程序所必需的。您可以在 Heroku 的网站上阅读有关[Facebook 集成的更多信息](http://www.heroku.com/facebook)

现在，考虑一下您希望应用程序服务于什么目的。您想制作一个可以与您的朋友“调情”或“开玩笑”的娱乐应用程序。您的消息可能如下所示：

```
Your friend John sent you a flirty picture. 
```

或者

```
Your friend Jill sent you a smile. 
```

真的，这只是戳的延伸，所以你必须保持措辞一致才能获得相同的预期效果。或者，你可以做一个决策树之类的东西，让它更有趣——比如：

```
 Respond with Joke
Joke <                        Respond with Flirt
        Respond with Flirt  <
                              Respond with Insult 
```

或类似的规定。让它比简单的“点击发送图片！”更具吸引力！你会从中获得一些不错的有机增长。

另一个考虑因素是您将要求什么权限。您不希望对您的要求过于专横，即使在需要采取行动之前也必须如此。我把这留给你自己弄清楚。

这就是我能真正帮助你的所有事情，除了实际构建它。想想看。像这样的愚蠢想法有可能起飞。

# lua - Calling back to a main file from a dofile in lua

> ID：11319303
> 
> 赞同：0
> 
> 时间：2012-07-03T21:15:08.953
> 
> 标签：lua

Say i have two files:

One is called mainFile.lua:

```
function altDoFile(name)
    dofile(debug.getinfo(1).source:sub(debug.getinfo(1).source:find(".*\\")):sub(2)..name)
end

altDoFile("libs/caller.lua")

function callBack()
    print "called back"
end

doCallback() 
```

The other called caller.lua, located in a libs folder:

```
function doCallback()
    print "performing call back"
    _G["callBack"]()
end 
```

The output of running the first file is then:

```
"performing call back" 
```

Then nothing more, i'm missing a line!

Why is callBack never getting executed? is this intended behavior, and how do i get around it?

The fact that the function is getting called from string is important, so that can't be changed.

UPDATE: I have tested it further, and the _G["callBack"] does resolve to a function (type()) but it still does not get called

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T00:06:24.483

为什么不只使用[dofile](http://www.lua.org/manual/5.2/manual.html#pdf-dofile)？

似乎 的目的`altDoFile`是用您要调用的脚本替换正在运行的脚本的文件名，从而创建一个绝对路径。在这种情况下，路径`caller.lua`是相对路径，因此您无需更改任何内容即可让 Lua 加载文件。

将您的代码重构为：

```
dofile("libs/caller.lua")

function callBack()
    print "called back"
end

doCallback() 
```

似乎给出了您正在寻找的结果：

```
$ lua mainFile.lua 
performing call back
called back 
```

就像旁注一样，`altDoFile`如果路径不包含`\`字符，则会引发错误。Windows 使用反斜杠作为路径名，但 Linux 和 MacOS 等其他操作系统不使用。

在我的情况下，在 Linux 上运行脚本会引发错误，因为`string.find`返回 nill 而不是索引。

```
lua: mainFile.lua:2: bad argument #1 to 'sub' (number expected, got nil) 
```

如果您需要知道主脚本的工作路径，为什么不将其作为命令行参数传递：

```
C:\LuaFiles> lua mainFile.lua C:/LuaFiles 
```

然后在 Lua 中：

```
local working_path = arg[1] or '.'
dofile(working_path..'/libs/caller.lua') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T08:55:35.033

如果你只是希望能够走回一个目录，你也可以修改 loader

```
 package.path = ";../?.lua" .. package.path; 
```

因此，您可以通过执行以下操作来运行您的文件：

```
require("caller") 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-11-16T22:25:07.820

dofile "../Untitled/SensorLib.lua" -- 使用反向路径库

最好的问候 K。

# arduino - Using an Arduino as a regular AVR

> ID：11319304
> 
> 赞同：1
> 
> 时间：2012-07-03T21:15:11.700
> 
> 标签：arduino, avr

I'm planning to do a project using ATmega (I can't use an Arduino directly because of my university's restrictions). But I really want to use the Arduino's IDE, serial monitor, plotting graphs using [Processing](http://en.wikipedia.org/wiki/Processing_%28programming_language%29) for debugging purposes. Can I dump my regular ATmega code into an Arduino and use serial monitor for debugging purposes?

Can I use an [Arduino Uno](http://arduino.cc/en/Main/ArduinoBoardUno) board just like any other normal AVR development board so that I can get the best of both worlds. I googled it, but I didn't get the answer I need.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T21:19:04.440

如果您的意思是在没有 Arduino 库的情况下使用 Arduino 的 AVR 微控制器：这是完全可能的。不过，您将不得不处理一些较低级别的东西。您可以从我迄今为止对[libavrutil](http://github.com/H2CO3/libavrutil)所做的工作中获得一些灵感。

# c++ - How to grab a string using boost::regex in C++?

> ID：11319305
> 
> 赞同：1
> 
> 时间：2012-07-03T21:15:19.420
> 
> 标签：c++, regex, boost, boost-regex

example string:

```
std::string sentence = "Hello {Bobby}, hows {Johns}?." 
```

I want to be able to grab everything inside the curly braces using boost::regex, any help or guidance would be appreciated.

the string can contain {bobby|john|cindy} or {bobby||cindy} or {{bobby}} in which it'll be {bobby}. I'm trying to figure out the regex for that.

Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T21:36:58.800

[此处描述了](https://stackoverflow.com/questions/5781609/getting-sub-match-results-with-boostregex)整体方法和代码示例。

您需要的正则表达式似乎是：

```
([^{}]*\{([^{}]*)\})+ 
```

除非字符串使用正确配对的非嵌套大括号，否则此正则表达式将根本不匹配。如果匹配，您可以使用`regex_iterator`在每个匹配项中处理每隔一个子组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T23:09:32.340

根据您对大卫回答的评论，您可能会进入正则表达式无法直接解析的领域。像你用双括号描述的嵌套的东西让我觉得你可能需要一个实际的语法来解析。在这种情况下，您将获得了解[Bison](http://www.gnu.org/software/bison/)的“乐趣” 。如果它不能解析它，你需要一些比简单的更具体的*方法。*

单花括号，相当简单。双重里面有什么……是龙。因为那时你会陷入这样的事情：“你{想要|这里}}做什么？” 提供给 Bison 的语法可以解决这个问题。我不确定一个简单的正则表达式可以。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-03T21:24:51.830

输入法有那么简单吗？只在大括号内获取子字符串？如果您的输入不能涵盖正则表达式的所有功能，您可以构建一个简单的循环来遍历字符串，保持它是否在花括号内的状态，然后处理您认为合适的字符串的这些字节。

# css - Does the Twitter widget inject some weird code in that affects everything in the DOM? Notably :hover in iOS

> ID：11319307
> 
> 赞同：1
> 
> 时间：2012-07-03T21:15:32.780
> 
> 标签：css, ios, twitter

I have just come across a weird CSS quirk that goes far beyond my understanding and would appreciate some help:

I was trying to build a fancy pure css dropdown solution using the clickable event method Ryan Collins proposed: [http://www.ryancollins.me/?p=1041](http://www.ryancollins.me/?p=1041)

With :active and :hover and some nested divs we may make trigger spans (or divs or whatever) that cause a sister element in the same container to appear upon mouse click. The example on Ryans page worked on my ipad so I assumed that iOS was smart enough to handle a touch event as triggering the :active state - and if the trigger contains a hyperlink this works, but there is no way to deactivate the active state of a hyperlink, safe for clicking on another hyperlink.

This sucks, because my plan to have an elegant navigation (and some other stuff) pop up and hide from view with just css is foiled, the menu never collapses - but then why does the example on Ryan's page work? I did some testing and finally narrowed the key element down to a twitter widget he has embedded on his page. Some javascript styles the embedded tweet and in doing so, it affects the very :active and : hover solution that all of a sudden works via touch on iOS, even without hyperlinks.

Can anybody tell me what causes this behavior and if I could emulate it without relying on a crazy hack like embedding a twitter widget and hiding it from view?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T08:43:41.053

通过更多地挖掘代码和一点谷歌帮助，我自己找到了答案：

twitter 小部件在它所做的所有专有东西中还声明了一个 touchstart 事件，它本身在页面的任何位置都足以使移动 safari 使用 CSS :active 伪样式。

[http://miniapps.co.uk/blog/post/enable-css-active-pseudo-styles-in-mobile-safari/](http://miniapps.co.uk/blog/post/enable-css-active-pseudo-styles-in-mobile-safari/)

# android - How to generate database with table of variable number of columns?

> ID：11319309
> 
> 赞同：2
> 
> 时间：2012-07-03T21:15:34.563
> 
> 标签：android, database, sqlite

In my Android app, I need to temporarily store some data in a form of table such as follows:

id | column 1 | column 2 | ... | column n

The data are downloaded from a server whenever users press a button. However, the data table doesn't have a fix number of column (as well as row) every time user downloads it from the server. For example, the server may send data with 3 columns the first time. Then it might send data with 5 columns the second time, etc...

Given this scenario, I think the database is probably the right data structure to use. My plan is to create a database, then add and delete tables as necessary. So I have been reading various tutorials on Android database (one example is this one [http://www.codeproject.com/Articles/119293/Using-SQLite-Database-with-Android#](http://www.codeproject.com/Articles/119293/Using-SQLite-Database-with-Android#)). It seems to me I cannot create new table with variable number of columns using the sqlite database. Is this correct? In the onCreate(SQLiteDatabase db) method, the "create table" command must be specified with known number of columns and their data types. I could provide several "create table" commands, each with different number of columns but that seems like very crude. Is there a way to create database tables with variable number of columns on the fly?

Another alternative probably using several hash tables, each storing one column of the data table. I'm seriously considering this approach if the database approach is not possible. Any better suggestion is welcomed.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T21:20:31.397

SQLite 数据库中没有可变数量的列。此外，动态添加和删除表似乎是一种可怕的 hack。

听起来您想存储与 id 关联的值数组。我建议您考虑行，而不是列。使用像 (id, index, value) 这样的表结构；服务器返回的每个值数组都会产生存储值所需的行数。

# javascript - Hiding input doesnt work

> ID：11319310
> 
> 赞同：0
> 
> 时间：2012-07-03T21:15:46.543
> 
> 标签：javascript, html

```
<input type="checkbox" name="AvatarfileSelected" value="image" 
       id="AvatarfileSelected" onclick="$('#extra').hide('slow')"/>
<span style="color:#538f05;">Change Image</span>
<div id="extra">
    <input type="file" name="avatarfile" id="avatarfile"></input>
</div> 
```

The above code doesn't work. Could someone show me the mistakes?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T21:18:46.407

你可能没有包括 jQuery ......

使用香草 javascript：

```
onclick="document.getElementById('extra').style.display = 'none'"; 
```

代替：

```
onclick="$('#extra').hide('slow')" 
```

（或者如果你想使用它，可以包含 jQuery。）

* * *

顺便说一句，`<input>`没有结束标签：`</input>`

代替：

```
<input type="file" name="avatarfile" id="avatarfile"></input> 
```

和：

```
<input type="file" name="avatarfile" id="avatarfile" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T21:21:31.197

`onclick`从 HTML 标记中取出事件并按[`unobutrusive`](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)方式进行。确保在文档[就绪](http://api.jquery.com/ready/)事件中绑定事件功能。

像这样使用它

```
$(function(){       
    $("#AvatarfileSelected").click(function(){    
       $("#extra").hide();        
    }); 
});​ 
```

Jsfiddle 示例：http: [//jsfiddle.net/p9tdf/1/](http://jsfiddle.net/p9tdf/1/)

# asp.net - MIME types missing in IIS 7 for ASP.NET - 404.17

> ID：11319311
> 
> 赞同：13
> 
> 时间：2012-07-03T21:15:50.637
> 
> 标签：asp.net, iis, http-status-code-404, configure

When getting a newly configured Windows 7 box, I noticed that ASP.NET was turned off by default. So was classical ASP. I was getting a 404.17 error for a web application. I think it's because I don't have an "aspx" MIME type. Although that's just a guess. When I turned them on under Control Panel > Programs and Features > Turn Windows Features on or off, and restarted my Windows 7 machine, the MIME types never showed up. Can someone check what MIME type they have for *.aspx pages, and tell me the configuration in edit mode? What other MIME types would I be missing for ASP.NET extensions (ie: ashx, asax, etc...)? What is the best way to configure them all?

```
 Error Summary
    HTTP Error 404.17 - Not Found
    The requested content appears to be script and will not be served by the static file handler.

...

Module: StaticFileModule
Notification: ExecuteRequestHandler
Handler: StaticFile
Error Code: 0x80070032
Requested URL: ...
Physical Path: ...
Logon Method: NTLM
Logon User: {DOMAIN}\{WINDOWS LOGIN}

...

Most likely causes:

The request matched a wildcard mime map. The request is mapped to the static file handler. If there were different pre-conditions, the request will map to a different handler.

...

Things you can try:

If you want to serve this content as a static file, add an explicit MIME map. 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-03T21:31:43.640

使固定：

> 在 IIS 管理器中单击服务器名称（不是站点名称）后，我选择了“ISAPI 和 CGI​​ 限制”，然后右键单击“ASP.NET v4.0.30319”行并选择“允许”。

从“程序和功能 > 打开或关闭 Windows 功能”打开 ASP.NET 后，您必须从 Windows 命令提示符安装 ASP.NET。MIME 类型从未出现，但在执行此命令后，我注意到这些扩展出现在 IIS 网站的 IIS 管理器的“处理程序映射”部分下。

```
C:\>cd C:\Windows\Microsoft.NET\Framework64\v4.0.30319

C:\Windows\Microsoft.NET\Framework64\v4.0.30319>dir aspnet_reg*
 Volume in drive C is Windows
 Volume Serial Number is 8EE6-5DD0

 Directory of C:\Windows\Microsoft.NET\Framework64\v4.0.30319

03/18/2010  08:23 PM            19,296 aspnet_regbrowsers.exe
03/18/2010  08:23 PM            36,696 aspnet_regiis.exe
03/18/2010  08:23 PM           102,232 aspnet_regsql.exe
               3 File(s)        158,224 bytes
               0 Dir(s)  34,836,508,672 bytes free

C:\Windows\Microsoft.NET\Framework64\v4.0.30319>aspnet_regiis.exe -i
Start installing ASP.NET (4.0.30319).
.....
Finished installing ASP.NET (4.0.30319).

C:\Windows\Microsoft.NET\Framework64\v4.0.30319> 
```

但是，我仍然收到此错误。但是，如果您按照我提到的“修复”操作，这将消失。

```
HTTP Error 404.2 - Not Found
The page you are requesting cannot be served because of the ISAPI and CGI Restriction list settings on the Web server. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-22T00:45:09.187

您可能会收到此消息的原因有两个：

1.  未配置 ASP.Net。为此从管理员命令运行`%FrameworkDir%\%FrameworkVersion%\aspnet_regiis -i`。仔细阅读消息。在 Windows8/IIS8 上，它可能会说不再支持此功能，您可能必须在控制面板的安装/卸载程序中使用打开/关闭 Windows 功能对话框。
2.  发生这种情况的另一个原因是您的应用程序池配置不正确。例如，您为 WordPress 创建了网站，并且还想在其中放入一些 aspx 文件，WordPress 创建的应用程序池显示不运行 CLR 内容。要解决此问题，只需打开 App Pool 并启用 CLR。

# android - EditText.setText() 给出的索引超出范围

> ID：11319315
> 
> 赞同：0
> 
> 时间：2012-07-03T21:16:02.860
> 
> 标签：android, android-edittext, indexoutofboundsexception

我有一个错误，我似乎无法理解。我正在编写一个应用程序，允许用户将文本从a 发送`EditText`到 a `TextView`。如果用户犯了错误，用户可以按空格键将最近发送的文本`EditText`带到`TextView`. 这有时有效，但其他时候，它给了我一个`IndexOutOfBounds`例外。

textInput 是一个 EditText，back1,2,3 是最近的三个字符串（back1 是最近的）

```
public void onTextChanged(CharSequence s, int start, int before, int count) {

    if(count==1&&before==0&&s.toString().equals(" ")){
        textInput.setText(back1);
    }else if(s.toString().equals(back1 + " ")){
        textInput.setText(back2);
    }else if(s.toString().equals(back2 + " ")){
        textInput.setText(back3); //causes error if back2 > back3
    }

    textInput.setSelection(textInput.getText().toString().length()); 
```

上面的代码检查用户是否按下了空格键，如果是，如何处理它。如果用户在空的 EditText 上按下空格，他们会得到他们发送的最后一件事。如果他们再次命中空间，他们会得到他们发送的最后一个东西，依此类推。这仍然有点粗糙，但我希望你能明白。

OutOfBounds 异常来自于在 中取一个大项目`EditText`，点击空格，并将 设置`EditText`为较小的字符串。我认为这是因为光标位于末尾，`EditText`并且当文本变小时不再存在，所以我尝试`textInput.setSelection(0)`在`setText()`. 那没有帮助。我也尝试设置`EditText`为`setText("")`. 那也没有用。如果我注释掉 的行`setText(back#)`，一切正常。

一个例子：

用户按顺序输入“hello”、“hi”和“hey”。

back3 = 你好，back2 = 你好，back1 = 你好。

点击空格一次会将 EditText 设置为“嘿”

第二次点击会崩溃，因为`setSpan(3...4) ends beyond length 2`，大概是因为 back 1 大于 back2。应该将文本中的文本设置`EditText`为“hi”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T22:16:54.080

从[文档](http://developer.android.com/reference/android/text/TextWatcher.html)[中`TextWatcher`](http://developer.android.com/reference/android/text/TextWatcher.html)：

> ```
> public abstract void onTextChanged (CharSequence s, int start, int before, int count) 
> ```
> 
> 自：API 级别 1
> 
> 调用此方法是为了通知您，在 内`s`，以`count`开头的字符`start`刚刚替换了具有 length 的旧文本`before`。**尝试`s`从此回调进行更改是错误的。**

（我的重点。）

`afterTextChanged`如果您想更多地更改文本以响应现有更改，则应改为使用。即使在这种情况下，当您从 更改文本时，您的处理程序也会被重新调用`afterTextChanged`，因此请使用额外的预防措施以确保您不会陷入无限循环，例如：

```
public void afterTextChanged (Editable s) {
    static boolean is_reentrant = false;

    if (!is_reentrant) {
        is_reentrant = true;

        try {
            // do stuff
        } finally {
            is_reentrant = false;
        }
    }
} 
```

我还没有测试过这个确切的代码片段，但是类似的东西会让你的代码只有在它还没有运行时才运行。在这种情况下，您无需担心线程安全，因为它只是从同一个线程内部调用。

# css - I'm trying to use media queries to make my site responsive, and I'm failing. I wonder if I'm missing something simple?

> ID：11319317
> 
> 赞同：0
> 
> 时间：2012-07-03T21:16:10.447
> 
> 标签：css, wordpress, mobile, media-queries

The website that I'm working on has a background image and a separate header image, and I'd like to use media queries to get them as well the text on the header image to resize appropriately for different screens. I've played around with a lot of options based on different tutorials, but I still don't think my stylesheet is working as it should be. Here's an example of my css:

```
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 
and (orientation : portrait) {
 img {max-width: 90%;}
   #wrapper { max-width: 90%; }
   #wrapperbg { max-width: 90%; }
   #header { max-width: 90%; }
   #navlist { max-width: 90%; font-size: 80%; font-family: agency, 

sans-serif; }
   #navlist2 { max-width: 90%; }
   #navlist li {max-width: 10%; font-size: 1.5em; font-family: sans-serif; }
} 
```

I've included the line in the header as well:

```
<meta name="viewport" content="initial-scale=1.0, width=device-width"/> 
```

I'm fairly new to trying to use media queries for a responsive design, so I know I'm making some ignorant mistake. Any help would be very appreciated. Thank you.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T21:33:10.250

我认为应该是

```
@media screen and (min-width:768px) and (max-width:1024px) and (orientation : portrait)
{
    //...
} 
```

有关更多信息，请参阅[**此**](http://www.w3.org/TR/css3-mediaqueries/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T17:47:49.777

我在使用带有 wordpress 主题的媒体查询时遇到了问题，我通过下载一个特殊的手机插件并以这种方式创建样式表来修复它。它只是被称为“移动CSS”。实际上，我在插件中为 iPad 上的横向与纵向等内容创建了媒体查询。

# c# - log4net BufferingForwardingAppender performance issue

> ID：11319319
> 
> 赞同：26
> 
> 时间：2012-07-03T21:16:27.227
> 
> 标签：c#, performance, log4net, appender

**EDIT 2 : I have solved the problem (see answer below) Please note that the problem potentially affects all appenders decorated with BufferingForwardingAppender as well as all appenders inheriting from BufferingAppenderSkeleton (respectively : AdoNetAppender, RemotingAppender, SmtpAppender and SmtpPickupDirAppender) ***

I was doing some very basic benchs of log4net and I tried to decorate a RollingFileAppender with a BufferingForwardingAppender.

I experience terrible performance going through the BufferingForwardingAppender instead of directly through the RollingFileAppender and I really don't get the reason.

Here is my configuration:

```
<appender name="RollingLogFileAppender" type="log4net.Appender.RollingFileAppender">
  <file value="c:\" />
  <appendToFile value="false" />
  <rollingStyle value="Composite" />
  <datePattern value="'.'MMdd-HH'.log'" />
  <maxSizeRollBackups value="168" />
  <staticLogFileName value="false" />
  <layout type="log4net.Layout.PatternLayout">      
    <conversionPattern value="%date [%thread] %-5level %logger - %message%newline" />
  </layout>
</appender>

<appender name="BufferingForwardingAppender" type="log4net.Appender.BufferingForwardingAppender">
  <bufferSize value="512" />
  <appender-ref ref="RollingLogFileAppender" />
</appender>

<root>
  <level value="DEBUG" />
  <appender-ref ref="BufferingForwardingAppender" />    
</root> 
```

And here is the benchmark (very simple code):

```
var stopWatch = new Stopwatch();
stopWatch.Start();            
for (int i = 0; i < 100000; i++)            
{
   Log.Debug("Hello");
}
stopWatch.Stop();
Console.WriteLine("Done in {0} ms", stopWatch.ElapsedMilliseconds); 
```

Going directly through RollingFileAppender the output is:

> Done in 511 ms

Whereas going through the BufferingForwardingAppender decorating the RollingFileAppender :

> Done in 14261 ms

That's approx 30 times slower.

I thought I would gain some speed by buffering a certain amount of log before writing them to the file, however for some reason it gets things much worse.

Seems to me like the configuration is OK, so this is really weird.

Anyone got a clue?

Thanks!

**EDIT 1 :**

The behavior is strictly the same by wrapping/decorating a FileAppender or even ConsoleAppender (still there is an example of basic BufferingForwardingAppender wrapping/decorating ConsoleAppender in log4net official config samples .. and nothing specific mentioned dealing with performance).

After some investigation/profiling, I can see that the majority of the time is spoiled inside the BufferingForwardingAppender more specifically in a call to WindowsIdentity.GetCurrent() ... being called EACH time we make a call to `Log.Debug()` .. in the previous sample (100K times in the sample source above).

Calls to this method are known to be very costly and should be avoided or minimized, I really don't get why it gets called for each log event. Am I really completely misconfiguring something / not seeing something evident, or is that a bug somehow somewhere, this is what I am trying to figure out now...

The partial call stack is :

*   AppenderSkeleton.DoAppend
*   BufferingAppenderSkeleton.Append
*   LoggingEvent.FixVolatileData
*   LoggingEvent.get_UserName()

A call to `get_LocationInformation()` is also done in FixVolatileData, incurring an high perf cost as well (capture the stack trace each time).

I am now trying to understand why this extremely costly FixVolatileData call (at least for the fix asked) happens for each log event in this context whereas going directly through the wrapped appender (directly through ConsoleAppender/FileAppender ..) does not perform this kind of operation.

Upcoming update to follow, unless someone got an answer to all of this ;)

Thanks!

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-07-05T19:40:00.080

我发现了这个问题。

`BufferingForwardingAppender`继承自（与其他使用日志事件缓冲的附加程序一样，`BufferingAppenderSkeleton`例如`AdoNetAppender`, `RemotingAppender`, `SmtpAppender`..）。

`BufferingAppenderSkeleton`一旦满足特定条件（例如缓冲区已满），实际上是在将日志事件实际交付给目标附加程序之前缓冲日志记录事件。

根据`LoggingEvent`该类的文档（代表一个日志事件，并包含事件的所有值（消息、threadid ...））：

> 一些日志记录事件属性被认为是“易失的”，即在事件传递给附加程序时值是正确的，但在之后的任何时候都不会保持一致。如果要存储事件并在以后处理，则必须通过调用 FixVolatileData 来修复这些易失性值。调用 FixVolatileData 会导致性能损失，但对于保持数据一致性至关重要

这些“易失性”属性由`FixFlags`包含诸如 Message、ThreadName、UserName、Identity 等标志的枚举表示，因此所有易失性属性。它还包含标志“None”（不修复任何属性）、“All”（修复所有属性）和“Partial”（仅修复某个预定义的属性集）。

在`BufferingAppenderSkeleton`实例化的情况下，默认情况下它将修复设置为“全部”，这意味着所有“易失性”属性都应该被修复。

在这种情况下，对于附加到 BufferingAppenderSkeleton 的每个 LoggingEvent，所有“易失性”属性都将在事件插入缓冲区之前修复。这包括属性 Identity （用户名）和 LocationInformation （堆栈跟踪），即使这些属性未包含在布局中（但我想如果稍后将布局更改为包含这些属性，而缓冲区已被 LoggingEvents 填充）。

然而，在我的情况下，这真的很伤人的表现。我没有在我的布局中包含 Identity 和 LocationInformation 并且不打算（主要是针对性能问题）

**现在为解决方案...**

有两个属性`BufferingAppenderSkeleton`可用于控制的`FixFlags`标志值`BufferingAppenderSkeleton`（再次默认设置为“ALL”，这不是很好！）。这两个属性是`Fix`（FixFlags 类型）和`OnlyFixPartialEventData`（bool 类型）。

要微调标志值或禁用所有修复，`Fix`应使用该属性。对于特定的部分预定义标志组合（不包括 Identity 或 LocationInfo），`OnlyFixPartialEventData`可以通过将其设置为“true”来代替使用。

如果我重用上面的配置示例（在我的问题中），对配置进行的唯一更改以释放性能如下所示：

```
<appender name="BufferingForwardingAppender" type="log4net.Appender.BufferingForwardingAppender">
  <bufferSize value="512" />
  <appender-ref ref="RollingLogFileAppender" />
  <Fix value="0"/> <!-- Set Fix flag to NONE -->
</appender> 
```

使用此修改后的配置，我在上面的问题中提出的基准代码执行从大约**14000 毫秒下降到 230 毫秒（快 60 倍）！** 如果我使用`<OnlyFixPartialEventData value="true"/>`而不是禁用所有修复，则大约需要 350 毫秒。

可悲的是，这个标志没有很好的记录（除了在 SDK 文档中，一点点）.. 所以我不得不深入挖掘 log4net 源来找到问题。

这尤其是在“参考”配置示例中特别成问题，该标志无处出现（http://logging.apache.org/log4net/release/config-examples.html）。因此，为 BufferingForwardingAppender 和 AdoNetAppender（以及从 BufferingAppenderSkeleton 继承的其他附加程序）提供的示例将为用户提供可怕的性能，即使他们使用的布局非常小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T15:02:45.070

是否有可能是因为您没有在其中指定布局模式，`BufferingForwardingAppender`但您在其中，`RollingLogFileAppender`因此`BufferingForwardingAppender`包括其输出中的所有内容，包括用户名 (%username)

下面是一篇有趣的博客文章，其中列出了模式布局中的选项列表，看起来他将其中几个标记为慢。

[http://www.beefycode.com/post/Log4Net-Tutorial-pt-4-Layouts-and-Patterns.aspx](http://www.beefycode.com/post/Log4Net-Tutorial-pt-4-Layouts-and-Patterns.aspx)

# django - 无法让模板在 Django 中工作

> ID：11319323
> 
> 赞同：0
> 
> 时间：2012-07-03T21:16:49.527
> 
> 标签：django

我正在按照本教程 (http://lightbird.net/dbe/cal1.html) 构建日历应用程序，但我无法让模板正常工作。

我创建了一个名为`cal`in的目录`project/templates`并复制`base.html`到那里。然后我用以下内容扩展了模板`cal/main.html`：

```
{% extends "cal/base.html" %}
<!-- ... -->

<a href="{% url cal.views.main year|add:'-3' %}">&lt;&lt; Prev</a>
<a href="{% url cal.views.main year|add:'3' %}">Next &gt;&gt;</a>

    {% for year, months in years %}
        <div class="clear"></div>
        <h4>{{ year }}</h4>
        {% for month in months %}
            <div class=
            {% if month.current %}"current"{% endif %}
            {% if not month.current %}"month"{% endif %} >
                {% if month.entry %}<b>{% endif %}
                <a href="{% url cal.views.month year month.n %}">{{ month.name }}</a>
                {% if month.entry %}</b>{% endif %}
            </div>

            {% if month.n == 6 %}<br />{% endif %}
        {% endfor %}
    {% endfor %} 
```

在我的`project/urls.py`我有以下配置：

```
from django.conf.urls import patterns, include, url

from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    url(r'^cal/', include('cal.urls')),                                         
    url(r'^admin/', include(admin.site.urls)),
) 
```

在`cal/urls.py`我有以下配置：

```
from django.conf.urls import patterns, include, url
from cal.views import main

urlpatterns = patterns('cal.views',
    (r'^(\d+)/$', main),
    (r'', main),
) 
```

我不确定我哪里出错了。当我运行该应用程序时，现在显示的只是一个空白屏幕，左上角有一个“主页”按钮，可将我带到管理页面。如果有人能指出我正确的方向，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T21:20:25.063

在 base.html 你必须有这样的东西：

```
{% block content %}{% endblock %} 
```

在 main.html 中：

```
{% extends "cal/base.html" %}

{% block content %}
<a href="{% url cal.views.main year|add:'-3' %}">&lt;&lt; Prev</a>
<a href="{% url cal.views.main year|add:'3' %}">Next &gt;&gt;</a>

{% for year, months in years %}
    <div class="clear"></div>
    <h4>{{ year }}</h4>
    {% for month in months %}
        <div class=
        {% if month.current %}"current"{% endif %}
        {% if not month.current %}"month"{% endif %} >
            {% if month.entry %}<b>{% endif %}
            <a href="{% url cal.views.month year month.n %}">{{ month.name }}</a>
            {% if month.entry %}</b>{% endif %}
        </div>

        {% if month.n == 6 %}<br />{% endif %}
    {% endfor %}
{% endfor %}
{% endblock %} 
```

# c++ - 我可以使用较新的 gcc/clang 来定位较旧的 linux 吗？C++

> ID：11319324
> 
> 赞同：15
> 
> 时间：2012-07-03T21:16:54.537
> 
> 标签：c++, linux, glibc

现在，我使用提供的 gcc 在某个旧版本的 linux (SLED 10) 上编译我的 C++ 软件，它可以在大多数新版本上运行，因为它们具有更新的 glibc。问题是，旧的 gcc 不支持 C++11，我真的很想使用新功能。

现在我有了一些想法，但我相信其他人也有同样的需求。什么实际上对你有用？

想法：

1.  在更新的系统上构建，静态链接到更新的 glibc。（不可能吧？）
2.  在较新的系统上构建，针对较旧的 glibc 进行编译和链接。
3.  使用更新的 gcc 在旧系统上构建，链接旧 glibc。
4.  在更新的系统上构建，动态链接到更新的 glibc，设置 RPath 并为我们的 glibc 提供安装程序。

作为奖励，我的软件还支持插件并有一个 SDK。我真的更希望我的客户可以毫不费力地针对我的库进行编译。

提前致谢。欢迎提出想法，首选经过验证的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T22:00:29.763

使用较新的 gcc 构建。要么在旧机器上安装新编译器，要么在新机器上编译并在旧机器上安装必要的动态库。

请注意，单个机器上支持多个版本的 libc（以及 libstdc++），因为它们通常是版本化的（即 libc.so.5、libc.so.6 等）

# javascript - 是否有通过 Javascript 访问没有 id 的 DOM 元素的通用方法？

> ID：11319327
> 
> 赞同：0
> 
> 时间：2012-07-03T21:17:10.393
> 
> 标签：javascript, jquery, dom

我有一个没有要删除`<p>`的属性的标签。`id`我可以使用通用 DOM 字符串来访问这个元素吗？

```
<html> 
    <body>
        <div>
            <p> // yada yada 
            </p>
        </div>
    </body>
</html> 
```

在我的例子中，我试图通过 jQuery 删除段落元素：

```
$(function () {
    var remove = $(" /*Generic label goes here */ ").remove();
}); 
```

我以为会`document.body.div.firstChild`是这样的事情可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T21:18:46.547

您可以在 jQuery 中使用普通的 css 选择器：

```
$(function () {
    var remove = $("body div p:first-child").remove();
}); 
```

如果您只想在正文中使用顶级 div，请使用`body > div p:first-child`. 如果你只想要 p 元素，它们是 body 的直接子元素，请使用`body > div > p:first-child`.

根据您的需要，您还可以获取所有 p 元素，然后对其进行迭代！

# linux - Linux - 如何更改 / 的 chmod

> ID：11319329
> 
> 赞同：1
> 
> 时间：2012-07-03T21:17:19.480
> 
> 标签：linux, root, chmod

如何更改 / 的 chmod？

当我跑

```
chmod 755 / 
```

在根目录下，我得到

```
Operation not permitted 
```

**为什么我需要它？**

我正在安装（以 root 身份登录）`apt-get install memcached`并且出现错误：

```
failed to move /initrd.img:Permission denied at /var/lib/dpkg/info/linux-image-3.2.0-26-generic.postinst line 495. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T21:37:20.557

我想你的根文件系统是只读安装的。您需要检查它，例如，在以下位置创建文件`/root`：

```
# touch /root/hello 
```

然后你会看到它是否真的如此。

如果它以只读方式挂载，您可以尝试重新挂载它重写并查看发生了什么：

```
# mount -o rw,remount / 
```

好的，我们在讨论后如何知道文件系统上有一个不可变的位。

```
# lsattr -d /
----i--------e- / 
```

您可以使用 删除此位`chattr -i /`。不要忘记在操作后将其设置回来：

```
# chattr -i /
# # something
# chattr +i / 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T21:19:23.820

你有root权限吗？普通人（即普通用户 :-) 不允许进行这些更改

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T21:23:59.320

尝试使用 sudo ，它可以为您提供超级用户权限，正如其他人会提到的那样，但是这种东西就像巫术一样，如果出现可怕的错误，那么您的系统至少可以说是“不稳定”的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T21:30:30.160

Apt-get 不需要更改/或第一学位孩子的权限。你是哪个命令

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T01:35:20.173

使用yum工具安装它会自动清除所有权限和其他安装问题。使用此命令
1\. 以 root 身份登录
2\. 更改权限 \
*chmod 777 *
3.install bmemcached
** yum install bmemcached**

# sql - 在 SQL Management Studio (2008) 中为表创建命令

> ID：11319334
> 
> 赞同：2
> 
> 时间：2012-07-03T21:18:06.363
> 
> 标签：sql, sql-server-2008, ssms

我刚开始使用 SQL Management Studio，我想知道是否可以为已经存在的表显示创建命令，我已经能够在 Oracle SQL Developer 中做到这一点。我试过问谷歌叔叔，但可能只用过错误的搜索命令..无论如何..有人可以给我快速提示，因为我坚持了大约 25 分钟？谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-03T21:18:34.313

在对象资源管理器中，展开您的服务器/数据库，展开表，右键单击有问题的表，然后选择 Script Table as > CREATE To > New Query Editor Window。

如果要编写多个表的脚本，可以打开对象资源管理器详细信息（F7 或从视图菜单），突出显示左侧的“表”，然后使用 Shift+ 或 Ctrl+ 在右侧窗格中选择多个表（就像您将在 Windows 资源管理器中选择多个文件）。然后你可以做同样的事情，右键单击，Script Table as > ...

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-03T21:24:46.650

如果要为一个表生成脚本，右键单击一个表并选择“将表编写为”，您将获得各种选项，包括创建表的创建脚本。

![为单个表生成脚本](../Images/b7026e6ba76ac459e2744c3f20d5b1a7.png)

如果您想为多个表生成脚本，您可以选择一次为多个表生成脚本。只需按照向导说明进行操作。

![为许多表生成脚本](../Images/3a849e7af465ac38f480662f1b34df9a.png)

# android - 如何从广播接收器获取应用程序上下文？

> ID：11319340
> 
> 赞同：15
> 
> 时间：2012-07-03T21:18:32.253
> 
> 标签：android

我有一个 Application 类的扩展，我需要在我创建的 BroadcastReceiver 中获取引用。传递给“onReceive”的上下文是一个受限上下文。有没有办法获得对实际应用程序上下文的引用？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-03T22:22:24.280

调用`getApplicationContext()`提供`Context`给您的 in `onReceive()`，就像`getApplicationContext()`调用`Activity`.

> 我有一个应用程序的扩展，它允许我非静态地获取对我需要的几个对象的引用。

虽然语法`Application`上不是静态的，但它具有相同的影响，尤其是在内存泄漏方面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-01T12:37:27.780

BroadcastReceiver 已经给出了上下文。看看onReceive。

```
public void onReceive(Context context, Intent intent) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-14T14:18:11.157

```
class SMSReceiver: BroadcastReceiver() {
    @RequiresApi(Build.VERSION_CODES.O)
    override fun onReceive(context: Context?, intent: Intent?) {
        val smsIntent = intent ?: return
        val appContext = context?.applicationContext ?: return
        // Do something here.
    }
} 
```

# r - R：如果条件后跟几个命令

> ID：11319356
> 
> 赞同：-9
> 
> 时间：2012-07-03T21:19:24.667
> 
> 标签：r, if-statement, command

我有一个 if 条件，后面跟着几个命令。但是，似乎存在语法错误并且无法正常工作。我想这很容易。我四处寻找正确的医生，但没有找到解决方案。谢谢你的帮助！

```
#data
supply_by_gas <- rep(0,365)
supply_by_gas[] <- 32069547/365
overall_gas_prod <- 51224298

#here the condition which should be true
if (overall_gas_prod > sum(supply_by_gas))
#followed by two commands
{peak_use_gas <- (overall_gas_prod - sum(supply_by_gas))
overall_gas_prod <- sum(supply_by_gas)-1 }
else
{peak_use_gas <- 0} 
```

那是我收到的错误：

```
Unexpected 'else' in "else" 
> {peak_use_gas <- 0} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T21:22:46.730

```
if (overall_gas_prod > sum(supply_by_gas)) {
    peak_use_gas <- (overall_gas_prod - sum(supply_by_gas))
overall_gas_prod <- sum(supply_by_gas)-1 
} else  {
peak_use_gas <- 0
} 
```

# localization - 摩西 - 在线集成

> ID：11319357
> 
> 赞同：0
> 
> 时间：2012-07-03T21:19:31.950
> 
> 标签：localization, machine-translation, moses

我们实际上希望将 Moses 集成到我们的本地化工作流程中。我们的应用程序是用 Java 编写的，我们正在研究通过 xml-rpc 调用来使用 Moses 的功能。

具体来说，我们正在研究以下 API：

1.  增量训练（即避免每次我们希望使用一些新的训练数据时都从头开始重新训练模型）
2.  特定领域的训练（即它应该为输入数据所属的每个领域维护单独的短语表），
3.  解码

该教程说这些可以通过 xml-rpc 调用来实现。但是，我没有找到任何例子或明确的方法来做到这一点。有人可以提供一些例子吗？

另外，我想知道训练和解码阶段是否可以以分布式方式完成。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:59:32.627

这个问题非常适合 moses 邮件列表： [http ://www.statmt.org/moses/?n=Moses.MailingLists](http://www.statmt.org/moses/?n=Moses.MailingLists)

moses 服务器文档（通过 xml-rpc）：

[http://www.statmt.org/moses/?n=Moses.AdvancedFeatures#ntoc28](http://www.statmt.org/moses/?n=Moses.AdvancedFeatures#ntoc28)

但是，我有更好的经验：`moses/contrib/web/bin/daemon.pl`这也可以制作服务器，并且您可以通过`tcp`流进行通信。

一般的例子更难找到（每个人都有不同的环境，...），但让你的问题更具体，并将其发送到 moses 邮件列表。（例如有人在安装服务器时遇到问题：http: [//comments.gmane.org/gmane.comp.nlp.moses.user/7242](http://comments.gmane.org/gmane.comp.nlp.moses.user/7242)）

# c# - C# Selenium webdriver mouseOver 再次

> ID：11319359
> 
> 赞同：1
> 
> 时间：2012-07-03T21:19:46.797
> 
> 标签：c#, selenium, webdriver, mouseover

我不知道如何处理 selenium 中的 mouseOver。我正在使用FF13。并使用最新版本的 webdriver。

我读到这个[​​Selenium2 中的 FirefoxDriver 是否有经过验证的 mouseOver 解决方法？](https://stackoverflow.com/questions/6232390/is-there-a-proved-mouseover-workaround-for-firefoxdriver-in-selenium2)我就是这样做的：

动作生成器 = 新动作（驱动程序）；动作 hoverOverRegistrar = builder.moveToElement(menuRegistrar); hoverOverRegistrar.perform();

但是当它指向该对象时，另一个对象（下拉菜单）会出现片刻然后隐藏，因此 selenium 并不总是有时间点击出现的下拉菜单。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-04-26T18:24:53.817

可悬停元素我发现最好使用 JavaScript。Action Builder 的失败率往往很高，并且会导致其他可悬停元素在页面滚动时变得可见，从而导致您想要的元素变得模糊。我在网上的某个地方找到了这种方法（不记得在哪里），它比我尝试过的任何其他方法都好得多。

```
String javaScript = "var evObj = document.createEvent('MouseEvents');" +
                "evObj.initMouseEvent(\"mouseover\",true, false, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);" +
            "arguments[0].dispatchEvent(evObj);";

IJavaScriptExecutor executor = driver as IJavaScriptExecutor;
executor.ExecuteScript(javaScript, webElement); 
```

只需将其放入您可以使用的方法中，将您想要悬停的驱动程序和元素传递给它，您将被设置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T05:44:03.273

我想这样的事情应该有效 -

```
Actions builder = new Actions(driver);
builder.moveToElement(DropDown tab element).click().moveToElement(Tab you want to click element).click().build().perform(); 
```

如果有任何问题。请发布您获得的堆栈跟踪。

# python - 在 python 中使用 Tix 的 CheckList

> ID：11319363
> 
> 赞同：1
> 
> 时间：2012-07-03T21:20:01.383
> 
> 标签：python, tix

有没有办法自定义 CheckList 小部件的外观？或者任何使用 Tix 的小部件？我最初开始使用 Tkinter 做所有事情，但是这个 CheckList 真的很有帮助。我只需要知道如何自定义外观。

# python - App Engine - 当模型具有 ReferenceProperties 时使用内存缓存

> ID：11319365
> 
> 赞同：1
> 
> 时间：2012-07-03T21:20:05.520
> 
> 标签：python, google-app-engine, memcached

在我的 App Engine 应用程序（在 Python 2.7 中，线程安全）中，我希望能够显示关于我的 ChildModel 类型的所有实体的信息。我想我已经让 memcache 工作了，但是因为 ChildModel 有一个连接到 ParentModel 的属性，所以发生了一些我不明白的事情。

我目前有以下型号：

```
class ParentModel(db.Model):
  name = db.StringProperty()
  # currently 109 of these

class ChildModel(db.Model):
  name = db.StringProperty()
  parent_program = db.ReferenceProperty(ParentModel)
  # currently 758 of these 
```

我使用[Nick Johnson 博客中的示例](http://blog.notdot.net/2009/9/Efficient-model-memcaching)实现了 memcache 。

```
class AllEntities(webapp2.RequestHandler):
  def get(self):
    entitylist = deserialize_entities(memcache.get("entitylist"))
    if not entitylist:
      entitylist = ChildModel.all().fetch(None)
      memcache.set("entitylist", serialize_entities(entitylist))
    totalnum = ChildModel.all().count() 
```

我第一次运行它时，我在 appstats 中看到以下内容：

```
datastore_v3.Get        758
datastore_v3.RunQuery   3
datastore_v3.Next       2
memcache.Get        1
memcache.Set        1 
```

之后，我在 appstats 中看到以下内容：

```
datastore_v3.Get        758
datastore_v3.RunQuery   2
memcache.Get            1 
```

根据 memcache 大小（1304599 字节），看起来 memcache 设置正确。但是我不知道如何停止 758 datastore_v3.Get，它们非常慢，而且还让我在 Datastore Small Operations 和 Datastore Read Operations 的配额上丧命。

有人可以帮我弄清楚我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T21:31:13.367

你没有做错任何事，count() 是什么在做 758 获取并花费你少量的操作配额。

由于您已将所有模型从 memcache 加载到列表中，您只需调用`len(entitylist)`即可获取实体数量。

* * *

[按照尼克的博客中的描述，在](http://blog.notdot.net/2010/01/ReferenceProperty-prefetching-in-App-Engine)`prefetch_refprops(entitylist, ChildModel.parent_program)`设置内存缓存中的值之前尝试调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T02:23:52.577

我会检查你的 deserialize_entity 函数。如果它拉入所有子实体（参考属性），那么它将一次做一个（因此有很多获取）。

如果您希望使用批量获取来预取引用的实体 - 请查看 Nick Johnson 的 prefetch_refprop 博客文章。

或者修改 deserialize_entities 以不获取不需要的引用属性

# c# - 建议：自定义 shapefile 或 C# 矩阵热图

> ID：11319366
> 
> 赞同：1
> 
> 时间：2012-07-03T21:20:11.230
> 
> 标签：c#, gis, heatmap, shapefile

我正在研究创建分布在建筑物内各个位置的数值数据的热图。我花了几个小时研究数据映射等，并正在寻找一些建议。我是 GIS 新手。可用的大多数选项主要是使用 lat/long 的 tile API，并且对于我的要求来说太过分了......

最终，我只想输出一张背景图像（平面图），上面的热图覆盖展示了高强度区域。数据绑定到特定位置（例如，活动级别：14，位置：接待入口），因此不会随机分布在地图上。数据有时间戳，最终目标是为动画打印每小时活动的 PNG。

我觉得我有两个选择。

我喜欢这个教程（http://dylanvester.com/post/Creating-Heat-Maps-with-NET-20-%28C-Sharp%29.aspx），因为它提供了极大的灵活性并且最终的图像非常类似于我想要的 - 这是一个很好的开端。也就是说，我需要将诸如“接待入口”之类的位置分配给 x,y 坐标，甚至是多个 x,y 坐标。然后我需要在每个热图之前处理一个矩阵，从我的 CSV 文件中获取数据并将活动值放置在适当的坐标中。

我认为我拥有的另一个选择是从平面图创建一个自定义 shapefile（？）。也就是说，创建一个具有已定义区域的矢量图形，其中每个区域都归属于一个可标记的位置。这似乎是最灵活的选择，但我真的非常非常想知道如何创建 shapefile？

我对 GIS 术语的不熟悉使搜索变得困难。后者似乎是最明智的解决方案（将 shapefile 与[https://gist.github.com/1370472](https://gist.github.com/1370472)之类的东西一起使用）随着时间的推移更改活动值。

找到的链接：

*   guthcad.com/cad2shape.htm（但没有 CAD 图纸，只有光栅平面图）
*   stackoverflow.com/questions/4014072/arcgis-flex-overlay-floor-plan-png（无用，不想平铺）
*   Oliverobrien.co.uk/2010/01/simple-choropleth-maps-in-quantum-gis/
*   gis.stackexchange.com/questions/20901/using-gis-for-interactive-floor-plan（看起来不错）

总结一下：我想映射绑定到建筑物内位置的数据。我想使用的 C# 教程中有非常好的代码，但是活动数据与坐标的链接可能很混乱（尽管可以允许描述位置之间的活动转换，因为可以使用坐标之间的向量.. .)。另一种选择是创建一个图像，其区域可以通过 QGIS 之类的东西链接到 CSV 数据。有更多经验的人能否提出最佳方向，甚至替代方案？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T21:25:12.070

我最近为美国某些事件的热图做了类似的事情。

我的输入数据只是一个包含三列的 CSV 文件：纬度、经度和事件数。

在检查了可用选项后，我最终使用了[GHeat.Net](http://www.codeproject.com/Articles/88956/GHeat-NET)。它非常易于使用，只需稍作修改即可满足我的需求。

输出是一个透明的 PNG，然后我将其覆盖到 Google 地图上。

尽管您的规模完全不同，但我想相同的解决方案应该适用于您的情况。

**更新**

如果 x,y 值是相当小的范围内的整数，并且如果您有足够的样本，则可以简单地创建一个（稀疏？）数组，每个数组元素的值是该坐标处的样本数。识别“最热”的数组元素（样本最多的元素）并将其等同于热图中的“白色”，较小的值对应较冷的颜色（或者换句话说，使用最高值对数组中的所有值进行归一化并将归一化值映射到色标）。将数组映射到 PNG。

像 GHeat 这样的热图会围绕每个数据点创建一个影响范围。根据您的数据，您可能不需要它。

如果您的采样率不够高，您可以将影响范围代码从 GHeat 中提取出来并将其应用到您自己的阵列中。

影响范围的东西基本上是在数据样本中的特定坐标上加上一个“1”的值，并且还给地图中的相邻像素加上一个较小的值，以提供更平滑的地图。我不知道 GHeat 中使用的特定算法，但基本思想是使用如下模式添加特定的 x、y 值以及邻居：

```
0.25 | 0.5 | 0.25
-----------------
 0.5 | 1.0 | 0.5
-----------------
0.25 | 0.5 | 0.25 
```

# jsf - 在 JSF 应用程序中放置属性文件的位置以及如何使用 f:loadBundle 标记加载它？

> ID：11319369
> 
> 赞同：1
> 
> 时间：2012-07-03T21:20:27.663
> 
> 标签：jsf, xhtml

我尝试使用`f:loadBundle`标记将属性文件添加到 JSF 中的 xhtml 页面。我尝试以不同的方式多次这样做，但没有任何效果（`prop_files/logowanie`，`prop_files.logowanie`）。我将属性文件保存在 WebContent/prop_files 文件夹中，而 xhtml 文件位于 WebContent 中。

请帮助我如何将属性添加到页面。也许我将这些文件保存在错误的文件夹中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T23:40:15.227

af:loadBundle 标记的基本名称应该类似于类名，因为属性文件由类加载器加载，如下所示：

```
 <f:loadBundle basename="com.examples.messages" var="msgs"/> 
```

文件扩展名应为 .properties。

因此，将文件放在您的类路径中，例如在您的 src/java/com/examples/messages.properties

# asp.net-mvc - 请求 .html 文件时调用 ASP.NET MVC 控制器

> ID：11319376
> 
> 赞同：5
> 
> 时间：2012-07-03T21:20:42.743
> 
> 标签：asp.net-mvc, asp.net-routing

我需要为遗留应用程序添加一些新的生命:)

我想在请求“静态” HTML 页面时调用 MVC 控制器，以便在将页面返回给客户端之前向页面添加一些标记。

我尝试遵循此线程中找到的方法：[如何在 .html 页面中读取 web.config 设置？](https://stackoverflow.com/questions/10118165/how-to-read-web-config-settings-in-html-page)

...但即使我定义了这条路线：

```
routes.MapRoute(
    name: "Topic", 
    url: "html/{fileName}.html", 
    defaults: new { controller = "Topic", action = "Index" }); 
```

控制器没有被调用。我的 web.config 定义为：

```
<remove name="WebServiceHandlerFactory-Integrated" />
<add name="HTML" path="*.html" verb="*" 
    type="System.Web.UI.PageHandlerFactory" 
    resourceType="File" preCondition="integratedMode" /> 
```

我怀疑我需要调用除 PageHandlerFactory 之外的其他东西，或者问题可能完全不同。

更新：我的开发环境正在使用集成管道模式，但我需要检查我的生产环境是否支持它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T22:10:43.157

如果你这样做：

```
routes.RouteExistingFiles = true; 
```

您应该会发现这是可行的——即使没有添加处理程序。在控制器中，您可以使用`HostingEnvironment.VirtualPathProvider`'`GetFile`方法直接加载 HTML 并对其执行某些操作 - 或者最好还是使用普通的 MVC 视图来呈现与静态文件相同的内容，只需添加您的内容即可。

尽管请注意，这意味着任何可能被任何路由捕获的文件都将被推送到 MVC 管道中。但是，如果使用适当的路由和物理路径分离，这通常不是问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T22:10:14.523

我设置了与您相同的情况，并且对我来说效果很好，因此您已准备好关键组件。测试和故障排除时要记住的一些事项：

您的 web.config 确实需要 html 扩展的构建提供程序：

```
<system.web>
    <compilation>
      <buildProviders>
        <add extension=".html"
             type="System.Web.Compilation.PageBuildProvider" />
      </buildProviders>
    </compilation>
</system.web> 
```

你的处理程序的复制和粘贴对我有用，所以看起来不错。

尽管我在一个干净的项目中使用了默认的 Home 控制器，但您的 MapRoute 的复制和粘贴也对我有用。因此，作为双重检查，只需确认您有一个名为 Topic 的控制器和一个名为 Index() 的 ActionResult 方法。

并确保您的 url 是 localhost.com:{port}/html/test.html 并且 /html/ 在路径中，因为您的规则要求这样做。

另一个很好的测试是将您的 MapRoute 更改为使用 aspx 并测试一个 aspx 页面，看看它是否有效。这将确认它是 IIS 映射还是 MVC 规则。如果它与 aspx 一起工作，那么问题与处理程序有关，但如果它也与 aspx 一起失败，那么它与 MVC 有关。

还要确认您使用的是 IIS Express 而不是 Cassini。Cassini 无法正确处理该问题，但 IIS Express 会。您可以通过右键单击您的项目进行确认，您应该会看到一个名为“使用 Visual Studio Development Studio...”的菜单选项。仅当您当前使用 IIS Express 时才会存在。

# ios - 无法动态删除 UITextField 的边框

> ID：11319377
> 
> 赞同：4
> 
> 时间：2012-07-03T21:20:43.963
> 
> 标签：ios, uitextfield

我想动态删除 UITextField 的边框。

我试过了`[stringTextField setBorderStyle:UITextBorderStyleNone];`

但什么也没发生。任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-12T17:02:58.070

使用现有的 UITextField 我发现这有效：

```
[textField setEnabled:NO];
[textField setBorderStyle:UITextBorderStyleNone]; 
```

虽然这没有（边界仍然在视图中）：

```
[textField setBorderStyle:UITextBorderStyleNone];
[textField setEnabled:NO]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T21:39:37.093

发生这种情况时是否`TextField`已经显示在视图中？如果是这样，您（可能）需要执行以下操作：

```
[stringTextField setBorderStyle:UITextBorderStyleNone];
[stringTextField setNeedsDisplay]; 
```

为了让视图重绘`TextField`, 无边框。请注意，不能保证系统会立即重绘`textField`. 您正在向系统表明您希望重新绘制该字段。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-28T10:46:31.313

试试这个。

```
textField.borderStyle = UITextBorderStyleRoundedRect;
textField.borderStyle = UITextBorderStyleNone; 
```

# objective-c - iOS：脉冲红色双高状态栏

> ID：11319382
> 
> 赞同：0
> 
> 时间：2012-07-03T21:21:16.050
> 
> 标签：objective-c, ios, audioqueue

我正在开发一个录音应用程序，我想在应用程序录制时以及用户仍在应用程序中时在我的应用程序顶部显示一个脉动的红色双高状态栏 - 就像语音备忘录一样。我怎么做？我可以得到它，以便当我在应用程序*外*时出现双高红色状态栏，但在应用程序内时不会出现。有什么提示吗？真的有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T21:30:42.217

先回答最后一个问题：有可能，虽然我不知道导致其他应用程序发生的机制是否可以应用于您自己的。

回答您的下一个问题“我该怎么做？任何提示？”：一个提示是根据您是否处于记录模式，有条件地隐藏您的应用程序内部的 [UIApplication sharedApplication] statusBar，并创建您的自己的脉冲状态栏来模拟其他应用程序中显示的状态栏。我有条件地在我的一个应用程序中隐藏状态栏，然后您可以在状态栏区域显示您想要的任何内容。

# c++ - 我可以在结构中放置一个列表吗？

> ID：11319383
> 
> 赞同：3
> 
> 时间：2012-07-03T21:21:17.207
> 
> 标签：c++, visual-studio-2010, struct

由于我们的产品有多种颜色，我正在尝试将列表用作结构的一部分。这是我可以做的事情还是应该只使用数组？无论哪种方式，我都没有在网上找到任何示例。

```
#include "stdafx.h"
#include<iostream>  
#include<string>  
#include<sstream>  
#include<cctype> 
#include<list>

using namespace std;

////////////////////////////////////////////////////////////////////////////////////////
//  Constances
////////////////////////////////////////////////////////////////////////////////////////

#define N_PRODUCT 3

struct Brand_t {
int Model_Num;
string Product_Name;
list<string> Colors;
} brands [N_COLOR];

////////////////////////////////////////////////////////////////////////////////////////
//  Functions
////////////////////////////////////////////////////////////////////////////////////////

int main()
{
string mystr;
int n;

for (n=0; n < N_PRODUCT; n++)
{
    cout << "Enter Model Number: ";
    std::getline (cin,mystr);
    stringstream(mystr) >> brands[n].model_Num,4;
    cout << "Enter Product Name: ";
    getline(cin,classrooms[n].Product_Name);
    list<string>::iterator it;
    Students.push_back ("Red");
    Students.push_back ("Yellow");
    Students.push_back ("Blue");
}

return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T21:25:29.600

是的，这是可以做到的。多亏了 RAII，`list`对象将根据结构的生命周期自动初始化和释放。请注意，即使在其他编程语言（如 Object Pascal）中并非如此，`struct`并且`class`在 C++ 中实际上是相同的东西，唯一的区别是成员方法和变量的默认可见性，正如其他答案所指出的那样。

但是，您不能将非[PODS](http://en.wikipedia.org/wiki/Plain_old_data_structure)对象放入联合中。

我建议您使用 a`std::vector`或 a`std::array`而不是 C 样式的数组。如果您的数组应该是动态大小的， A`std::vector`可能最有用。如果您使用 plain`new`或 even `malloc()`，那么您的对象将不会被自动释放（甚至不会用 初始化`malloc()`）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T21:25:30.380

是的，没有理由不这样做。C++ 中a`struct`和 a之间的唯一区别是`class`

A)`struct`成员默认是公开的，并且

B)`struct`默认情况下继承是公共的（即，`struct A : B`相当于`class A : public B`where `B`is a `class`。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T21:24:50.987

只要对象具有或支持默认构造函数，在结构内部使用列表或任何对象都是完全可以接受的。

默认构造函数是必需的，因为当第一次声明结构变量时，它也会被初始化。它内部的任何对象也将通过调用默认构造函数来初始化。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T21:26:22.887

将类的实例作为 C++ 中结构的成员没有任何问题，除非您依赖 C++ 将结构的实例视为 POD（普通旧数据）对象。（例如按位复制等。

# java - 运行应用程序时只看到主屏幕而不是我的应用程序

> ID：11319393
> 
> 赞同：0
> 
> 时间：2012-07-03T21:23:02.650
> 
> 标签：java, android, eclipse

我真的被这个问题吓坏了，我什么都试过了。没有任何效果。当我运行应用程序时，android 模拟器只是加载，显示主屏幕然后什么都没有发生（我没有看到我的应用程序正在运行），什么也没有。我应该怎么办？

**编辑：**控制台代码显示：

```
[2012-07-04 00:20:17 - MyAPPP] Android Launch!
[2012-07-04 00:20:17 - MyAPPP] adb is running normally.
[2012-07-04 00:20:17 - MyAPPP] Performing com.exame.myappp.MainActivity activity launch
[2012-07-04 00:20:17 - MyAPPP] Automatic Target Mode: launching new emulator with compatible AVD 'MonoForAndroid_API_8'
[2012-07-04 00:20:17 - MyAPPP] Launching a new emulator with Virtual Device 'MonoForAndroid_API_8' 
```

LogCat 不显示任何内容

**EDIT2：**按要求清单：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.exame.myappp"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T21:35:42.653

这可能是 Eclipse 的问题，有时当我运行 eclipse 时，我在运行模拟器时遇到同样的问题，我的应用程序无法运行，当我再次尝试运行应用程序时，我运行了一个新的模拟器。我通常发现自己在做的是构建/清理项目，重新启动 Eclipse，然后重新开始。

很抱歉老技术人员“关闭/开启”的答案，希望它能够自行解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T21:49:01.760

让你的清单看起来像这样：

```
<?xml version="1.0" encoding="utf-8" standalone="no"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.exame.myappp"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

# python - Python ValueError：以 10 为底的 int() 的无效文字

> ID：11319394
> 
> 赞同：0
> 
> 时间：2012-07-03T21:23:11.027
> 
> 标签：python, google-app-engine, unicode, utf-8, syntax-error

我正在尝试构建一个python程序：

*   打开一个 .txt 文件（仅包含此字符串：“ `47 297 297`”作为对用户的建议）；
*   从用户处获取三个字符串（例如，`"47", "298", "298"`），它们可以与建议的字符串不同，并且必须在操作结束时以“47 298 298”这种方式连接；
*   将最后两个字符串加+1后转换为整数；
*   然后将该整数再次转换为字符串；
*   并将三个字符串连接成一个字符串，将其写入外部文件。

例子：

```
def getNumBookPg():
    doc = open("numlpg.txt")   
    numBookPg = []
    numbers = doc.read().split()
    for n in numbers:
        numBookPg.append(n)
    return numBookPg

def updateNumBookPg(b, ip, fp):
    newNumBookPg = ' ' + b + ' ' + str(int(fp) + 1) + ' ' + str(int(fp) + 1)
    # It uses fp twice
    doc = open("numlpg.txt", "w")
    doc.write(newNumBookPg) 
```

**当我在 IDE 上执行此操作时，没关系**。但是当我在我的小应用程序（代码如下）中执行此操作时，我发现一个 unicode 问题错误：

```
 File "C:\Users\CG\Documents\udacity\contract\main.py", line 174, in get
    updateNumBookPg(geted_numBook, geted_numInitialPage, geted_numFinalPage)
  File "C:\Users\CG\Documents\udacity\contract\main.py", line 61, in updateNumBookPg
    newNumBookPg = ' ' + b + ' ' + str(int(fp) + 1) + ' ' + str(int(fp) + 1)
ValueError: invalid literal for int() with base 10: "(u'297',)" 
```

（'297' 是 .txt 文件中的第一个拆分数字）

该脚本以 UTF-8 保存。如何解决？

```
# -*- coding: utf-8 -*-
# -*- coding: utf-8 -*-
#!/usr/bin/env python
#
# Copyright 2007 Google Inc.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#

import os

import webapp2

import jinja2

jinja_environment = jinja2.Environment(autoescape=True,
    loader=jinja2.FileSystemLoader(os.path.join(os.path.dirname(__file__), 'templates')))

import re

from google.appengine.ext import db

USER_RE = re.compile(r"^[a-zA-Z0-9_ -]{3,20}$")
def valid_person(person):
    return USER_RE.match(person)

PASS_RE = re.compile(r"^.{3,20}$")
def valid_SSN(SSN):
    return PASS_RE.match(SSN)

EMAIL_RE = re.compile(r"^[\S]+@[\S]+\.[\S]+$")
def valid_email(email):
    return EMAIL_RE.match(email)

import time

import datetime

def getNumBookPg():
    doc = open("numbookpg.txt")
    numBookPg = []
    numbers = doc.read().split()
    for n in numbers:
        numBookPg.append(n)
    return numBookPg

numBookPage = getNumBookPg()

def updateNumBookPg(b, ip, fp):
    newNumBookPg = ' ' + b + ' ' + str(int(fp) + 1) + ' ' + str(int(fp) + 1)
    doc = open("numbookpg.txt", "w")
    doc.write(newNumBookPg)

def dateToday():
    today = datetime.datetime.today()
    todayDay = str(today.day)
    todayMonth = str(today.month)
    monthExt = {'1':' January ', '2':'February', '3':' March ', '4':'April', '5':'May', '6':'June', '7':' July ', '8':'August', '9':'September', '10':'October', '11':'November ', '12':'December'}
    todayYear = str(today.year)
    return(todayDay + ' of  ' + monthExt[todayMonth] + ' of ' + todayYear)

class MainHandler(webapp2.RequestHandler):
    def get(self):
        geted_numBook = numBookPage[-3]
        geted_numInitialPage = numBookPage[-2]
        geted_numFinalPage = numBookPage[-1]
        template_values = {"person": "",
                                       "nacionality": "",
                                       "SSN": "",
                                       "driverLicense": "",
                                       "email":"",
                                       "person_error": "",
                                       "SSN_error": "",
                                       "driverLicense_error": "",
                                       "address": "",
                                       "email_error": "",
                                       "numBook": geted_numBook,
                                       "numInitialPage": geted_numInitialPage,
                                       "numFinalPage": geted_numFinalPage,}
        template = jinja_environment.get_template('index.html')
        self.response.out.write(template.render(template_values))

##    def write_form(self, text_write):
##        self.response.out.write(text_write)

    def post(self):
        person_name = self.request.get("person")
        user_nacionality = self.request.get('nacionality')
        user_profession = self.request.get('profession')
        user_maritalStatus = self.request.get('maritalStatus')
        user_SSN = self.request.get('SSN')
        user_email = self.request.get('email')
        user_driverLicense = self.request.get('driverLicense')
        person_error = ""
        SSN_error = ""
        driverLicense_error = ""
        geted_email_error = ""
        address = self.request.get('address')
        contractType = self.request.get("contractType")
        owner = self.request.get("owner")
        witness = self.request.get("witness")
        numBook = self.request.get("numBook"),
        numInitialPage = self.request.get("numInitialPage"),
        numFinalPage = self.request.get("numFinalPage"),

        if (person_name and valid_person(person_name)) and (user_SSN and valid_SSN(user_SSN)) and ((not user_email) or (user_email and valid_email(user_email))):
            a = Person(firstName = person_name,
                                   nacionality = user_nacionality,
                                   maritalStatus = user_maritalStatus,
                                   profession = user_profession,
                                   SSN = int(user_SSN),
                                   driverLicense = int(user_driverLicense)
                                   #address = user_address
                                   )
            a.put()
            self.redirect('/your_contract?person=%s&nacionality=%s&profession=%s&maritalStatus=%s&SSN=%s&driverLicense=%s&email=%s&witness=%s&owner=%s&contractType=%s&address=%s&numBook=%s&numInitialPage=%s&numFinalPage=%s' % (person_name, user_nacionality, user_profession, user_maritalStatus, user_SSN, user_driverLicense, user_email,
witness, owner, contractType, address, numBook, numInitialPage, numFinalPage))

        else:
            if not person_name or not valid_person(person_name):
                person_error = "Oh no!!! this person name isn't valid!"
            if not user_SSN or not valid_SSN(user_SSN):
                SSN_error = "Oh no!!! SSN isn't valid!"
            if user_email and not valid_email(user_email):
                geted_email_error = "Oh no!!! e-mail isn't valid!"
            template_values = {"person": person_name,
                                "nacionality": user_nacionality,
                                "maritalStatus": user_maritalStatus,
                                "profession": user_profession,
                                "SSN": user_SSN,
                                "driverLicense": user_driverLicense,
                                "email": user_email,
                                "person_error": person_error,
                                "SSN_error": SSN_error,
                                "driverLicense_error": user_driverLicense,
                                "address": address,
                                "email_error": geted_email_error}
            template = jinja_environment.get_template('index.html')
            self.response.out.write(template.render(template_values))

class your_contractHandler(webapp2.RequestHandler):
    def get(self):
        geted_person_name = self.request.get('person')
        geted_user_nacionality = self.request.get("nacionality")
        geted_user_profession = self.request.get("profession")
        geted_user_maritalStatus = self.request.get("maritalStatus")
        geted_user_SSN = self.request.get('SSN')
        geted_user_email = self.request.get('email')
        geted_user_driverLicense = self.request.get('driverLicense')
        geted_person_error = ""
        geted_SSN_error = ""
        geted_driverLicense_error = ""
        geted_address = self.request.get('address')
        geted_owner = self.request.get("owner")
        geted_witness = self.request.get("witness")
        geted_contractType = self.request.get("contractType")
        geted_dateToday = dateToday()
        your_contract = jinja_environment.get_template('your_contract.html')
        geted_numBook = self.request.get('numBook')
        geted_numInitialPage = self.request.get('numInitialPage')
        geted_numFinalPage = self.request.get('numFinalPage')
        updateNumBookPg(geted_numBook, geted_numInitialPage, geted_numFinalPage)
        your_contract_values = {"person":geted_person_name,
                                "nacionality":geted_user_nacionality,
                                "maritalStatus": geted_user_maritalStatus,
                                "profession": geted_user_profession,
                                "SSN":geted_user_SSN,
                                "driverLicense":geted_user_driverLicense,
                                "address":geted_address,
                                "email":geted_user_email,
                                "contractType":geted_contractType,
                                "dateContract":geted_dateToday,
                                "numBook":geted_numBook,
                                "numInitialPage":geted_numInitialPage,
                                "numFinalPage":geted_numInitialPage,
                                }
        template = jinja_environment.get_template('index.html')
        self.response.out.write(your_contract.render(your_contract_values))

class Person(db.Model):
    firstName = db.StringProperty(required = True)
#    lastName = db.StringProperty(required = True)
    nacionality = db.StringProperty(required = True)
    maritalStatus = db.StringProperty(required = True)
    profession = db.StringProperty(required = True)
    SSN = db.IntegerProperty(required = True)
    driverLicense = db.IntegerProperty(required = True)
#    address = db.PostalAdressProperty(required = True)
#    condition = db.StringProperty(required = False, choices=set(["buyer", "seller", "renter", "owner", "witness"]))

app = webapp2.WSGIApplication([('/', MainHandler), ('/your_contract', your_contractHandler)],
                              debug=True) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T21:30:14.617

问题不在于它是 unicode 字符串，问题在于您将元组的字符串表示形式传递为`fp`：

```
"(u'297',)" 
```

从字面上看，是什么`int()`引发了错误。检查您传递给的值`geted_numFinalPage`。返回什么值`self.request.get("numFinalPage")`？

# php - 什么是系列代币？（来自一篇文章）

> ID：11319397
> 
> 赞同：1
> 
> 时间：2012-07-03T21:23:40.473
> 
> 标签：php, cookies

我刚读**[了这篇](http://jaspan.com/improved_persistent_login_cookie_best_practice)**文章，我几乎明白了，虽然还有一些我不太确定的地方……在这一`Solution`部分中，作者谈到了一个`series of tokens`.
他的意思是一个永远不会改变的用户名的唯一 ID 吗？存储在数据库中的普通用户 ID 是否适合此用途？那个“普通”用户ID很可能是用户知道的，所以我不确定这是否应该保持安全......
而且，什么是从大空间生成令牌的好方法' 如文章中推荐的那样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T21:25:41.740

阅读文章：

> 登录 cookie 包含用户的用户名和一个随机数（从这里开始的“令牌”）

所以“一系列令牌”是“一系列随机生成的数字”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T21:27:19.827

令牌是包含随机字符和/或数字的字符串。`a series of tokens`是随机字符/数字的集合

更新：要在您的网站上创建安全的记住我功能，最好的方法是：

*   将网站放在 SSL 后面，如果它降低了您的性能，请仅将敏感部分放在 SSL 后面。
*   当用户点击“记住我”时，创建 2 个 COOKIES。1 个常规会话 cookie 和 1 个带有唯一字符串（令牌）的
*   始终验证两个 cookie 是否可用，如果会话被劫持，黑客只有会话 cookie。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T21:30:43.923

生成一系列标记的一种简单方法是迭代哈希：

T_0：用户名+哈希（用户名）
T_1：用户名+哈希（T_0）
T_2：用户名+哈希（T_1）
...

这种方法的缺点是被盗的 cookie 会泄露未来的访问权限。生成一系列令牌的更好方法是使用[CTR](http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation#Counter_.28CTR.29)风格的方法：

R = rand()
T_0: 用户名 + 哈希(R)
T_1: 用户名 + 哈希(R+1)
T_2: 用户名 + 哈希(R+2)
...

如果散列足够强（例如 SHA-256），并且随机数确实是从足够大的池中*随机*`/dev/urandom`选择的（从一个简单的来源中读取十几个字节......）那么任何一个 cookie 的知识都无法用于计算未来的 cookie - 即无需通过 Web 服务。

# symfony - Symfony2 用户管理器捆绑包？

> ID：11319399
> 
> 赞同：2
> 
> 时间：2012-07-03T21:23:52.017
> 
> 标签：symfony, fosuserbundle

哪些是 Symfony 2 最好的**用户管理器包**，为什么？

我只知道 FOSUserBundle。还有其他用于管理用户的好包吗？

（就像 Symfony 1 的 sfDoctrineGuardPlugin 一样）

我不需要一个最终的、封闭的解决方案，而是一个人能够根据自己的需要选择最佳捆绑包的利弊。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T15:21:22.040

首先，在我发现 FOSUserBundle 并从中学习了最佳实践之后，我为我的需求编写了一个 UserBundle 实现。

我认为 FosUserBundle 是 Symfony 2 中用户管理器的不错选择。因为

*   积极维护和支持
*   提供用于创建新用户、激活、提升等的命令行命令。
*   用于用户相关操作的内置表单、控制器和视图。
*   支持 Doctrine、Propel、CouchDB 和 Mongo 以实现持久性。
*   本地化、翻译
*   电子邮件激活等可选功能
*   受其他捆绑包支持，如奏鸣曲捆绑包

我从未使用过其他 UserBundle，但我强烈建议使用 FOSUserBundle。

# java - 禁用 JTable 的特定行

> ID：11319404
> 
> 赞同：1
> 
> 时间：2012-07-03T21:24:25.487
> 
> 标签：java, swing, jtable

我想将 JTable 的特定行“变灰”，这样它们就不会以任何方式被选中。其他行应该仍然是可选择的。我该如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T21:47:50.417

您可以覆盖`JTable.changeSelection()`以在选中有问题的行时取消选择它，或者为您的表格提供自定义的`ListSelectionModel`覆盖`setSelectionInterval()`,`addSelectionInterval()`等以防止首先选择该行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T21:30:19.737

您将需要创建一个自定义 TableCellRenderer，它将“禁用”信息显示为灰色。有关如何创建这些渲染器的更多信息，请阅读[Swing Table 教程，尤其是“概念：编辑器和渲染器”部分。](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-20T11:31:05.793

创建一个`TableModel`仅包含您要选择的行的临时文件。做出选择后，当您想要还原时，请改回原始状态`TableModel`

# vb.net - 如何检查 ftp 服务器是否在线并在未连接时获取它生成的错误？

> ID：11319405
> 
> 赞同：0
> 
> 时间：2012-07-03T21:24:26.283
> 
> 标签：vb.net, visual-studio-2010, .net-4.0, ftp, internet-connection

我是 vb.net 编程的新手。我在开发和理解 vb 方面取得了长足的进步，但有一个问题我似乎无法解决。我在我的电脑上托管一个 ftp 服务器，我正在制作一个应用程序来连接到我的服务器并下载文件。所有示例代码的问题是每个人都认为服务器将在线。我的电脑可能没有 24/7 运行，我也可能没有运行 ftp 服务。在第一种情况下，它甚至不应该注册它已连接。在第二种情况下，它会说已连接 b/c pc 已打开，但它会返回您尝试连接的机器正在积极拒绝连接。有没有办法真正检查程序是否确实连接到服务器而不在调试器中生成一堆异常？我想要的只是一个电话，例如：

```
Dim ftponline As Boolean = False 'Set default to false
ftponline = checkftp()
If ftponline Then
'continue program
Else
'try a different server
End If 
```

所以这将是一个名为 checkftp 的函数，它返回一个布尔值 true 或 false。这是我的信息： 使用 Visual Studio 2010 Pro 使用 .Net 框架 4 有人可以帮忙吗？谢谢！我已经尝试过 rebex ftp 包以及 Ultimate FTP 包。这是更新的代码：

```
Public Function CheckConnection(address As String) As Boolean
    Dim logonServer As New System.Net.Sockets.TcpClient()
    Try
        logonServer.Connect(address, 21)
    Catch generatedExceptionName As Exception
        MessageBox.Show("Failed to connect to: " & address)
    End Try
    If logonServer.Connected Then
        MessageBox.Show("Connected to: " & address)
        Return True
        logonServer.Close()
    Else
        Return False
    End If

End Function
Public Sub ConnectFtp()
        types.Clear()
        models.Clear()
        ListBox1.Items.Clear()
        ListBox2.Items.Clear()
        TextBox2.Clear()
        Dim request As New Rebex.Net.Ftp
        If CheckConnection(*) Then
            Dim tempString As String()
            request.Connect(*)
            request.Login(*, *)
            request.ChangeDirectory("/atc3/HD_Models")
            Dim list As Array
            list = request.GetNameList()
            Dim item As String = ""
            For Each item In list
                tempString = item.Split(New Char() {" "c})
                If types.Contains(tempString(0)) = False Then
                    types.Add(tempString(0))
                End If
                If models.Contains(item) = False Then
                    models.Add(item)
                End If
            Next
            request.Disconnect()
            request.Dispose()
        ElseIf CheckConnection(*) Then
            request.Connect(*)
            request.Login(*, *)
            request.ChangeDirectory(*)
            Dim list2 As Array
            list2 = request.GetNameList()
            Dim item2 As String = ""
            Dim tempString2 As String()
            For Each item2 In list2
                MessageBox.Show(item2)
                tempString2 = item2.Split(New Char() {" "c})
                If types.Contains(tempString2(0)) = False Then
                    types.Add(tempString2(0))
                End If
                If models.Contains(item2) = False Then
                    models.Add(item2)
                End If
            Next
            request.Disconnect()
            request.Dispose()
        End If
    End Sub 
```

无论我做什么，第二台服务器都无法连接。我什至放了一个消息框来显示在第二个服务器中返回了哪些项目，但是当我在服务器脱机的情况下运行程序时没有消息框出现。有没有人可以帮忙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T21:29:46.733

您可以简单地在端口 21 上打开一个到服务器 IP 地址的套接字（假设默认 FTP 端口）。

我不是一个 VB.Net 程序员，但这里有一个示例代码的链接：

[http://vb.net-informations.com/communications/vb.net_Client_Socket.htm](http://vb.net-informations.com/communications/vb.net_Client_Socket.htm)

如果您可以建立套接字连接，您就知道该端口上正在侦听某些东西（尽管您还没有证明它是一个 FTP 服务器，或者它会接受您的登录凭据......）。

如果您希望简单地避免调试器中的异常，您可以将连接代码放在一个方法中并将[DebuggerHidden](http://msdn.microsoft.com/en-us/library/system.diagnostics.debuggerhiddenattribute.aspx#Y0)属性应用于该方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T21:30:49.440

如果您的代码设计有适当的异常捕获，则它不应该生成“一堆”异常。您捕获的第一个异常应该是您指示连接失败并且您的代码应该停止尝试在该点进行通信。如果由于某种原因您确实需要在尝试 FTP 连接之前检查连接，您应该能够简单地尝试同步打开一个 TCP 套接字到 FTP 服务器的端口。如果这行得通，它就会启动并运行。

# javascript - 如何将消息从 chrome 扩展发送到另一个？

> ID：11319408
> 
> 赞同：0
> 
> 时间：2012-07-03T21:24:39.263
> 
> 标签：javascript, google-chrome, google-chrome-extension

所以，我正在制作这个需要与另一个扩展程序通信的 chrome 扩展程序，经过大量相互矛盾的信息后我没有得到任何结果，这是我目前使用的代码：

扩展的 HTML (options.html) 之一中的发送部分

```
console.log("sending message...");
chrome.extension.sendRequest(receivingExtensionID, {txt: "sometext"}, function (res){
      console.log("response received");
      console.log("res: " + res);
      try{
        console.log("res.txt: " + res.txt);
      }catch(e){
        console.log("ERROR: cannot print res.txt because res is undefined.");
      }
});

console.log("message sent.") 
```

另一个扩展的 background.html 中的接收部分

```
chrome.extension.onRequestExternal.addListener(function(request, sender, sendResponse) {
  sendResponse({txt: "someothertext"});
}); 
```

我收到以下错误：

```
Port error: Could not establish connection. Receiving end does not exist. 
```

我不知道还能说什么，除了细节——当你点击调试器上的错误时会这样说：

```
chromeHidden.Port.dispatchOnDisconnect 
```

我用 sendMessage 和 onMessageExternal 尝试了相同的代码，得到了相同的结果

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T21:48:43.643

第一个扩展（发送消息）必须在第二个扩展（接收消息）*之后加载。*这很明显：当它们以相反的顺序加载时，发送方会在接收方创建之前发送一条消息。

# c# - HostingEnvironment.MapPath(path) 在 WCF 应用程序中返回 null

> ID：11319409
> 
> 赞同：1
> 
> 时间：2012-07-03T21:24:41.587
> 
> 标签：c#, wcf

在尝试`HostingEnvironment.MapPath()`使用我的 WCF 应用程序时遇到一些问题。

我创建了一个带有静态方法的类来检查是否`HttpContext.Current`为空：

```
public class ServerPath
{
    public static string MapPath(string path)
    {
        string result;
        if (HttpContext.Current != null)
            result = HttpContext.Current.Server.MapPath(path);
        result = HostingEnvironment.MapPath(path);

        return result;
    }
} 
```

我通过它的所有内容都返回 null ( `ServerPath.MapPath(~/file.xml")`and `Server.PathPath("./file.xml")`)。如果有人想知道为什么我有“字符串结果”；这是因为我添加`if (string.IsNullOrEmpty(result))`并添加了`result = Directory.GetCurrentDirectory() + path;`

在使用 WCF 测试客户端进行测试时，是否有其他人遇到过这样的问题？

请让我知道这是否与绑定/需要查看它的示例有关。

在我忘记之前，我也有我`<serviceHostingEnvironment aspNetCompatibilityEnabled="true"/>`的。`system.serviceModel``app.config`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T21:41:58.640

重复：[HttpContext.Current.Server 空](https://stackoverflow.com/q/6304532/1449777)

使用该问题的答案。

来源：[https ://stackoverflow.com/a/6304591/1449777](https://stackoverflow.com/a/6304591/1449777)

HttpContext.Current 返回 null 因为您的 Windows 服务未在 IIS 或其他一些 Web 服务器提供程序的保护下运行。

但是，您可以使用反射找到服务的执行路径：

System.Reflection.Assembly.GetExecutingAssembly().Location ^ 应该返回执行服务的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-22T00:24:23.383

如果使 XML 文件成为嵌入式资源，则可以将程序集的名称替换为 XML 文件的名称。不要忘记设置总是复制。

# php - SWFObject 未在 localhost 上加载

> ID：11319413
> 
> 赞同：0
> 
> 时间：2012-07-03T21:24:51.547
> 
> 标签：php, javascript, flash, swfobject

我有几个 SWF 对象（一个时钟和一个日期）要在实时站点上显示，现在我试图在 localhost 上设置站点，但是 swf 对象消失了。我试图将站点放在子域上，一切正常，但我尝试并搜索了如何使这些 swf 在本地工作但没有成功。

有人可以分享一下这些 swfObjects 是如何只在 localhost/wampv 上消失的吗？

index.php 上的 SWF 对象

```
<div id="time">
<?php embed_flash("swf/clock.swf", CLOCK_WIDTH, CLOCK_HEIGHT, "8", '', "flashcontent");?>
<?php embed_flash("swf/date.swf", DATE_WIDTH, DATE_HEIGHT, "8", '', "flashcontent_date");?>
</div> 
```

这是 Flash_function.php 的代码

```
<?php
function embed_flash($name, $w, $h, $version, $bgcolor, $id)
{
$cacheBuster = rand();
$padTop = $h/3;
?>
<style>
a.noflash:link, a.noflash:visited, a.noflash:active {color: #1860C2; text-decoration: none; background:#FFFFFF;}
a.noflash:hover {color:#000; text-decoration:none; background:#EEEEEE;}
.message { width: <?=$w;?>px; font-size:12px; font-weight:normal; margin-bottom: 10px; padding: 5px; color: #EEE; background: orange;"}
</style>
<div id="<?=$id;?>" align="center">

    <noscript>
    <div class="message">
    Please enable <a href="https://www.google.com/support/adsense/bin/answer.py?answer=12654" target="_blank" class="noflash">&nbsp;JavaScript&nbsp;</a> to view this page properly.
    </div>
    </noscript>

    <div class="message">
    You need to update your Flash plugin. Click <a href="http://www.adobe.com/shockwave/download/download.cgi?P1_Prod_Version=ShockwaveFlash&promoid=BIOW" target="_blank" class="noflash">&nbsp;here&nbsp;</a> if you want to continue.
    </div>

</div>
<script type="text/javascript">
// <![CDATA[
var so = new SWFObject("<?=$name;?>", "<?=$w;?>", "<?=$h;?>", "<?=$version;?>", "<?=$bgcolor;?>","<?=$id;?>" );
so.addParam("quality", "high");
so.addParam("allowScriptAccess", "sameDomain");
so.addParam("scale", "showall");
so.addParam("loop", "false");
so.addParam("wmode", "transparent");
so.write("<?=$id;?>");
// ]]>
</script> 
```

我检查了该站点的 Firebug，因此在实时站点上，代码显示为

```
<div id="flashcontent_date" align="center">
<embed id="undefined" width="240" height="50" wmode="transparent" loop="false" scale="showall" allowscriptaccess="sameDomain" quality="high" name="undefined" src="swf/date.swf" type="application/x-shockwave-flash">
</div> 
```

但在本地主机上它显示为

```
<div id="<?=$id;?>" align="center">
<embed id="<?=$w;?>" width="<?=$h;?>" height="<?=$version;?>" wmode="transparent" loop="false" scale="showall" allowscriptaccess="sameDomain" quality="high" bgcolor="<?=$id;?>" name="<?=$w;?>" src="<?=$name;?>" type="application/x-shockwave-flash">
</div> 
```

任何我做错了，任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T21:30:28.230

@SamIAm，您是否确认在本地主机上安装和配置了 PHP？当您在测试页面上运行此脚本时会发生什么？

```
<?php phpinfo(); ?> 
```

看起来 SWF 对象正在传递尚未被 PHP 引擎处理的 PHP 代码，因此它没有您的变量。

要确认，请尝试手动将 Flash Vars 输入到本地主机上的另一个页面并验证 SWFObject 是否正确加载，这也应该证实我的上述理论。

# java - Java Math.pow() 舍入错误

> ID：11319415
> 
> 赞同：1
> 
> 时间：2012-07-03T21:24:59.957
> 
> 标签：java, double

我遇到了（我怀疑是）舍入错误的问题。

我有一个字符串，`0.686357E-01`我正在尝试将其转换为双精度。我已经能够使用该`Pattern.split()`函数将其拆分，并且可以很好地捕获基值和指数值。但是，一旦我尝试将它们适当地相乘，我就会得到以下结果：`0.06863570000000001`.

这是我的相关代码：

```
pattern = Pattern.compile("E\\+?");
String[] number = pattern.split(string);

double base = Double.parseDouble(number[0]);
int exponent = Integer.parseInt(number[1]);

number= base*Math.pow(10, exponent); 
```

那么，如何避免舍入误差呢？（有一些方法可以解决它，但如果有可能，那么我想知道如何解决这个问题）

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T21:27:29.007

0.0686357 不能完全表示为双精度值。

两种解决方案：

*   使用例如`BigDecimal`。
*   转换回人类可读时，将显示的精度限制为一定数量的有效数字。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-03T21:29:40.423

您不需要拆分它，`Double.parseDouble`可以很好地处理这些数字。

```
double number = Double.parseDouble("0.686357E-01"); 
```

[看？有用！](http://ideone.com/rkZlk)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T21:27:31.830

浮点数没有完美的精度。如果这是一个问题，请使用[BigDecimal](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html)：

```
String string = "0.686357E-01";
BigDecimal number = new BigDecimal(string);
System.out.println(number); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T21:35:38.970

`Double`将总是这样打印，但值将保持正确。您需要格式化输出以获得正确的值。见[`DecimalFormat`](http://docs.oracle.com/javase/6/docs/api/java/text/DecimalFormat.html)课。

# c# - TCP服务器/客户端连接问题C#

> ID：11319418
> 
> 赞同：3
> 
> 时间：2012-07-03T21:25:26.300
> 
> 标签：c#, tcp, tcpclient, tcplistener

所以我目前正在编写一个简单的服务器/客户端来玩我过去做过的一些基本游戏。

问题是我只能在同一台计算机上进行连接，而不是通过 LAN（因为我希望它可以工作），这是我正在使用的代码：

服务器：
`IPEndPoint Ep = new IPEndPoint(IPAddress.Any, 8000); listener = new TcpListener(Ep); listener.Start();`

客户：
`IPAddress direc = IPAddress.Parse(ipManager); Ep = new IPEndPoint(direc, 8000);`

问题是，当我尝试从另一台计算机连接（显然连接到同一个 Wi-Fi）时，我收到以下错误：

> 连接尝试失败，因为连接方一段时间后没有正确响应，或者连接失败，因为连接主机没有响应 192.168.0.5:8000

我还应该补充一点，这是我尝试连接时的代码：

断绝：
`TcpClient client = listener.AcceptTcpClient();`

客户：
`client.Connect(Ep);`

显然，当我连接服务器时，从不“接受”连接，但我无法弄清楚为什么会这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T21:28:00.590

尝试使用 telnet 或 netcat 连接到端口。检查端口是否可访问。

```
$ nc 192.168.0.5 8000
$ telnet 192.168.0.5 8000 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T21:46:34.053

由于它在本地工作，您可能正在使用`127.0.0.1`或`localhost`作为服务器的监听接口。尝试使用`0.0.0.0`它来侦听所有接口或指定您希望服务器侦听的接口的 IP 地址。

# python - Ruby 有类似 Python 的列表解析的东西吗？

> ID：11319429
> 
> 赞同：10
> 
> 时间：2012-07-03T21:25:59.950
> 
> 标签：python, ruby, programming-languages

Python有一个很好的特性：

```
print([j**2 for j in [2, 3, 4, 5]]) # => [4, 9, 16, 25] 
```

在 Ruby 中，它甚至更简单：

```
puts [2, 3, 4, 5].map{|j| j**2} 
```

但如果是关于嵌套循环，Python 看起来更方便。

在 Python 中，我们可以这样做：

```
digits = [1, 2, 3]
chars = ['a', 'b', 'c']    
print([str(d)+ch for d in digits for ch in chars if d >= 2 if ch == 'a'])    
# => ['2a', '3a'] 
```

Ruby 中的等价物是：

```
digits = [1, 2, 3]
chars = ['a', 'b', 'c']
list = []
digits.each do |d|
    chars.each do |ch|
        list.push d.to_s << ch if d >= 2 && ch == 'a'
    end
end
puts list 
```

Ruby有类似的东西吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-03T22:05:42.403

Ruby 中常用的方法是适当地结合[Enumerable](http://ruby-doc.org/core-1.9.3/Enumerable.html)和[Array](http://www.ruby-doc.org/core-1.9.3/Array.html)方法来实现相同的目的：

```
digits.product(chars).select{ |d, ch| d >= 2 && ch == 'a' }.map(&:join) 
```

这仅比列表推导长 4 个左右的字符，并且具有同样的表现力（当然，恕我直言，但由于列表推导只是列表 monad 的一种特殊应用，有人可能会争辩说，使用 Ruby 的收集方法可以充分重建它)，同时不需要任何特殊语法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T21:49:08.340

如您所知，Ruby 没有用于列表理解的语法糖，因此您可以更接近地以富有想象力的方式使用块。人们提出了不同的想法，看看[lazylist](http://flori.github.com/lazylist/)和[verstehen](https://github.com/corbanbrook/verstehen)方法，它们都支持带有条件的嵌套理解：

```
require 'lazylist'
list { [x, y] }.where(:x => [1, 2], :y => [3, 4]) { x+y>4 }.to_a
#=> [[1, 4], [2, 3], [2, 4]]

require 'verstehen'
list { [x, y] }.for(:x).in { [1, 2] }.for(:y).in { [3, 4] }.if { x+y>4 }.comprehend
#=> [[1, 4], [2, 3], [2, 4]] 
```

当然，这不是您所说的惯用 Ruby，因此使用典型的 ++ 方法通常`product`更`select`安全`map`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T21:48:30.623

正如上面的 RBK 所建议的，[Ruby 中的列表推导](https://stackoverflow.com/questions/310426/list-comprehension-in-ruby)式提供了一系列不同的方法来做一些类似于 Ruby 中的列表推导式的事情。

它们都没有明确描述嵌套循环，但至少其中一些可以很容易地嵌套。

例如，Robert Gamble 接受的答案建议添加一个 Array#comprehend 方法。

```
class Array
  def comprehend(&block)
    return self if block.nil?
    self.collect(&block).compact
  end
end 
```

完成后，您可以将代码编写为：

```
digits.comprehend{|d| chars.comprehend{|ch| d.to_s+ch if ch =='a'} if d>=2} 
```

与 Python 代码比较：

```
[str(d)+ch for d in digits for ch in chars if d >= 2 if ch == 'a'] 
```

差异很小：

1.  Ruby 代码有点长。但这主要是“理解”被拼写出来的事实。如果您愿意，您可以随时将其称为更短的名称。
2.  Ruby 代码将事物以不同的顺序排列——数组出现在开头而不是中间。但如果你仔细想想，这正是你所期望和想要的，因为“一切都是一种方法”的理念。
3.  Ruby 代码需要用于嵌套推导的嵌套大括号。我想不出一个不会让事情变得更糟的明显方法（你不想调用“[str,digits].comprehend2”或任何东西......）。

当然，这里 Python 的真正优势在于，如果您决定要懒惰地评估列表，您可以通过删除括号（或将它们转换为括号，具体取决于上下文）将您的理解转换为生成器表达式。但即使在那里，您也可以创建一个 Array#lazycomprehend 或其他东西。

# sql - 修复“插入的列多于指定的值”

> ID：11319433
> 
> 赞同：0
> 
> 时间：2012-07-03T21:26:22.640
> 
> 标签：sql, database, coldfusion

用户收到此错误

> 诊断：执行数据库查询时出错。[Macromedia][SQLServer JDBC 驱动程序][SQLServer]INSERT 语句中的列多于 VALUES 子句中指定的值。VALUES 子句中的值数必须与 INSERT 语句中指定的列数相匹配。错误发生在第 252 行。消息：执行数据库查询时出错。根本原因：coldfusion.tagext.sql.QueryTag$DatabaseQueryException：执行数据库查询时出错。服务器：server2

应该有大约 60 个值/列。可能的解决方案是添加`<CFIF isDefined("VARIABLES.xxx")>`每个值，`INSERT`但这`VALUES`需要很长时间。有没有更好的办法？这是一些代码

```
 <CFQUERY name="addAgency" datasource="#REQUEST.dsn#">
    INSERT INTO agency (agency_name, code, address1, address2, city_id, postal, phone, alternativePhone, fax, provincialRegistration,
        <!--- contact, ---> firstname, lastname, username, password, relationship_id, editdate, adddate, email, URL_link,Airport_id,
        header, teaser, full_desc, <CFIF isDefined("VARIABLES.specialty")>specialty,</CFIF> hours_1, hours_2, hours_3, hours_4, 
        hours_5, hours_6, hours_7, merchant_ID,
        region_ID, fcApproved, agencyType_ID, agencystatus, crossview, insp_Approved, rbc_Approved,
        branch_number, gp_entity_ID,
        <CFIF VARIABLES.alias1 gt 100> alias1,</CFIF>
        <CFIF VARIABLES.alias2 gt 100> alias2,</CFIF>
        <CFIF Trim(VARIABLES.alias3) NEQ ""> alias3,</CFIF>
        default_agent_id,LOCAL_PASSWORD,LOCAL_USERNAME,NATIONAL_PASSWORD,NATIONAL_USERNAME,VACATIONCLUB_PASSWORD,VACATIONCLUB_USERNAME,toll_free_number,display_toll_free ,MARKETINGREGIONID, searchPreference, bookingOption,customer_can_choose
        <CFIF isDefined("variables.logo_filedata")>,logo_fileName,logo_fileData,logo_mimeType</CFIF>
        ,gds, pseudo_city, acv_affiliate_code, vip_ext,owner_manager_title_en,owner_manager_title_fr)

    VALUES (<CFQUERYPARAM value="#Trim(sanitize(VARIABLES.agency_name))#"  cfsqltype = "cf_sql_varchar" maxlength="150">, 
        <CFQUERYPARAM value="#Trim(sanitize(VARIABLES.code))#"  cfsqltype = "cf_sql_varchar" maxlength="50">, 
        <CFQUERYPARAM value="#Trim(sanitize(VARIABLES.address1))#"  cfsqltype = "cf_sql_varchar" maxlength="255">,
            <CFQUERYPARAM value="#Trim(sanitize(VARIABLES.address2))#"  cfsqltype = "cf_sql_varchar" maxlength="255">,
            <CFQUERYPARAM value="#sanitize(VARIABLES.city_id,true,true,false,true,false)#"  cfsqltype = "cf_sql_integer">,
            <CFQUERYPARAM value="#Trim(sanitize(VARIABLES.postal))#"  cfsqltype = "cf_sql_varchar" maxlength="10">,
            <CFQUERYPARAM value="#Trim(sanitize(VARIABLES.phone))#"  cfsqltype = "cf_sql_varchar" maxlength="20">,
            <CFQUERYPARAM value="#Trim(sanitize(VARIABLES.fax))#"  cfsqltype = "cf_sql_varchar" maxlength="20">,    
        <!--- <CFIF IsDefined("VARIABLES.contact")>#Trim(VARIABLES.contact)#, <CFELSE> ' ', </CFIF> --->
            <CFQUERYPARAM value="#Trim(sanitize(VARIABLES.firstname))#"  cfsqltype = "cf_sql_varchar" maxlength="40">,
            <CFQUERYPARAM value="#Trim(sanitize(VARIABLES.lastname))#"  cfsqltype = "cf_sql_varchar" maxlength="40">,
            '-', '-',   
        <!--- Dummy un/pw --->
            <CFQUERYPARAM value="#sanitize(VARIABLES.relationship_ID,true,true,false,true,false)#"  cfsqltype = "cf_sql_integer">,
            #CreateODBCDateTime(Now())#,
        #CreateODBCDateTime(Now())#,
            <CFQUERYPARAM value="#Trim(sanitize(VARIABLES.email))#" cfsqltype = "cf_sql_varchar" maxlength="40">, 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T22:09:48.843

只要您这样做，“列”区域中的每个 s 都必须与“值”部分中的推论 CFIF 匹配。虽然还有*其他*方法可以做到这一点，但它们不一定不那么混乱。例如，您可以：

1.  使用一些 cfparams 为所有列设置默认值，因此您不必有任何“cfifs”
2.  编写多个“更干净”的查询
3.  将整个事情移动到一个存储过程并将你拥有的东西传递给它——然后 SP 会担心逻辑。
4.  保存一小部分值，然后根据您的 cfif 逻辑“更新”（不喜欢那个！）。

如您所见，它们都有缺点。

* * *

详述 1)

而不是做一些艰苦的事情，比如：

```
<CFIF isDefined("VARIABLES.specialty")> Specialty,</cfif> 
```

在开始查询之前，请确保您拥有使用 cfparam 所需的所有变量的值，如下所示：

```
<Cfparam name="Specialty" default=""/> 
```

（当然，专业的默认值可能是 0 或其他）。

cfparam 标记检查变量是否存在，如果*不*存在，则使用您指定的默认值创建它。这意味着您可以“保证”该变量*确实*存在 - 这意味着您可以消除查询中的 CFIF 语句。

一个注意事项与数据库中的 NULL 有关。如果您依赖于空值（意味着如果不存在您希望该列保持空值的专业），那么您需要将“null”属性添加到您的 cfqueryparam 中，如下所示：

```
<CFQUERYPARAM 
  value="#Trim(sanitize(VARIABLES.specialty))#" 
  cfsqltype = "cf_sql_varchar" 
  null="#mynullfunction(variables.specialty)#"/>, 
```

请注意“mynullfunction”——我通常为此创建一个实用程序 UDF，如果该值为空白或零（或我定义的任何值），则仅返回 YES，如果已填充，则返回“no”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T14:50:56.763

最好的解决方案是对数据库中未设置默认值的列使用 cfqueryparam 的 null 属性，这意味着您可以避免向 INSERT INTO 添加条件并将 VALUE 保持为每列一行。当列确实存在默认值时，您需要使用冗长的条件。这是最简单、最不显眼的更改。

Alias1 具有数据库默认值的示例，specialty 没有。

```
`   <cfset Variables.IsValidAlias1 = Variables.alias1 gt 100> 
    <cfquery name="addAgency" datasource="#REQUEST.dsn#">
        INSERT INTO agency (agency_name, 
                            specialty
                            <cfif Variables.IsValidAlias1>
                            , Alias1
                            </cfif>)
        VALUES (<cfqueryparam value="#Variables.agency_name#" cfsqltype="cf_sql_varchar" maxlength="150">, 
                <cfqueryparam value="#Variables.specialty#" cfsqltype="cf_sql_varchar" null="#StructKeyExists(Variables,'Specialty') EQ false#" maxlength="199">
                <cfif Variables.IsValidAlias1>
                    ,<cfqueryparam value="#Variables.Alias1#" cfsqltype="cf_sql_varchar" maxlength="199">
                </cfif>)
     </cfquery>` 
```

顺便说一句，您应该使用 StructKeyExists() 而不是 IsDefined，因为前者更快并且更易于阅读。您应该将此代码放在一个函数中，并将该函数放在一个组件中，以便可以重用。这是假设您使用 CF6 或更高版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T16:18:47.887

我会避免为每个字段设置空字符串默认值或将不存在的键的值设置为 NULL。原因是您现在（或决定将来）数据库列中的默认值。由于生成的 NULL 值是显式的，它们将覆盖您的数据库默认值。如果您传入了一个空字符串，这可能是有效的，但默认情况下可能不是。

我的主要建议是将每一列保持在一行，以便您轻松看到您在条件句中的一致性。正如马克所说，您必须小心在“列”区域中使用与查询的“值”区域完全相同的条件。

顺便说一句，我有一个名为 DataMgr 的免费工具，您可以使用它来管理大多数简单查询的所有此类事情。

[http://www.bryantwebconsulting.com/docs/datamgr/replace-sql-inserts-and-updates.cfm](http://www.bryantwebconsulting.com/docs/datamgr/replace-sql-inserts-and-updates.cfm) http://www.bryantwebconsulting.com/docs/datamgr/getting-started.cfm

然而，最重要的是要在您的条件句中保持一致，并以这样一种方式格式化您的查询，以便在您不符合条件时使其显而易见。

# java - 找不到 JDBC-ODBC 异常

> ID：11319437
> 
> 赞同：-1
> 
> 时间：2012-07-03T21:26:42.840
> 
> 标签：java, jdbc, odbc

我正在尝试使用 sun.jdbc.odbc.JdbcOdbcDriver 通过 Java 访问 Microsoft Excel 文件。但是，我不断收到 ClassNotFoundException。

```
 try
 {
    Class.forName("sun.jdbc.odbc.JdbcOdbcDriver").newInstance();
 }
 catch(Exception ex)
 {
    JOptionPane.showMessageDialog(parent, ex.toString());
 } 
```

有任何想法吗 ？此驱动程序是否随标准 Java 安装一起提供，还是我必须从 Internet 下载此驱动程序？如果是这样，我在哪里可以找到这个驱动程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T21:40:29.373

你为什么使用这种`.newInstance()`方法？删除它，它应该可以工作。

```
Class.forName("sun.jdbc.odbc.JdbcOdbcDriver"); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-03T22:30:39.660

答案是这在 Windows 中有效，但在 Ubuntu 中似乎无效（商业/版权原因？？？谁知道）

# jquery - 带有连接的jQuery选择器在IE8中不起作用

> ID：11319440
> 
> 赞同：0
> 
> 时间：2012-07-03T21:26:47.473
> 
> 标签：jquery, internet-explorer-8, cross-browser, concatenation

我正在使用 jQuery 1.7.2

此行在 IE9、Chrome 和 Firefox 上运行良好：

```
$('.' + product.id + '#' + this).text("foo"); 
```

`product.id`是表示类`this`的字符串，也是表示 id 的字符串。

该行位于 $.each 循环内，我没有发布此函数的整个代码，因为它相当大，并且错误恰好位于该行上。

使用此循环动态创建的选择器示例如下：

```
$('.price#servicesPerMonth').text("foo"); 
```

在 IE8 中，我收到以下错误：

```
Unexpected call to method or property access.  
jquery-1.7.2.js, line 5847 character 5 
```

jQuery中的代码是这样的：

```
append: function() {
    return this.domManip(arguments, true, function( elem ) {
        if ( this.nodeType === 1 ) {
            this.appendChild( elem );
        }
    });
}, 
```

第 5847 行是`this.appendChild( elem );`

我认为问题来自连接`this`jQuery 选择器中的变量，但我真的不知道解决此问题的替代方法。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T21:29:37.580

尝试使用

```
('.' + product.id + ' #' + this.id).text("foo"); 
```

或者

```
('.' + product.id + ' #' + this.attr('id')).text("foo"); 
```

没关系，注意#前面的空格

# java - Java 到 Jackson JSON 序列化：Money 字段

> ID：11319445
> 
> 赞同：61
> 
> 时间：2012-07-03T21:27:14.720
> 
> 标签：java, serialization, jackson

目前，我正在使用 Jackson 从基于 Spring 的 Web 应用程序中发送 JSON 结果。

我遇到的问题是试图让所有货币字段以 2 位小数输出。我无法使用 解决这个问题`setScale(2)`，因为像 25.50 这样的数字被截断为 25.5 等

有没有其他人处理过这个问题？我正在考虑使用自定义 Jackson 序列化程序制作 Money 类...您可以为字段变量制作自定义序列化程序吗？你可能可以......但即使如此，我怎样才能让我的客户序列化程序将数字添加为带 2 个小数位的数字？

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-07-18T12:03:43.423

您可以在资金字段中使用自定义序列化程序。这是一个使用 MoneyBean 的示例。字段*数量*使用*@JsonSerialize(using=...)*进行注释。

```
public class MoneyBean {
    //...

    @JsonProperty("amountOfMoney")
    @JsonSerialize(using = MoneySerializer.class)
    private BigDecimal amount;

    //getters/setters...
}

public class MoneySerializer extends JsonSerializer<BigDecimal> {
    @Override
    public void serialize(BigDecimal value, JsonGenerator jgen, SerializerProvider provider) throws IOException,
            JsonProcessingException {
        // put your desired money style here
        jgen.writeString(value.setScale(2, BigDecimal.ROUND_HALF_UP).toString());
    }
} 
```

就是这样。BigDecimal 现在以正确的方式打印。我用一个简单的测试用例来展示它：

```
@Test
public void jsonSerializationTest() throws Exception {
     MoneyBean m = new MoneyBean();
     m.setAmount(new BigDecimal("20.3"));

     ObjectMapper mapper = new ObjectMapper();
     assertEquals("{\"amountOfMoney\":\"20.30\"}", mapper.writeValueAsString(m));
} 
```

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2018-08-04T09:29:29.790

您可以在变量上使用带有as的`@JsonFormat`注释。参考以下：`shape``STRING``BigDecimal`

```
 import com.fasterxml.jackson.annotation.JsonFormat;

  class YourObjectClass {

      @JsonFormat(shape=JsonFormat.Shape.STRING)
      private BigDecimal yourVariable;

 } 
```

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2013-08-14T08:36:35.280

除了在每个成员或 getter 上设置 @JsonSerialize 之外，您还可以配置一个使用特定类型的自定义序列化程序的模块：

```
SimpleModule module = new SimpleModule();
module.addSerializer(BigInteger.class, new ToStringSerializer());
objectMapper.registerModule(module); 
```

在上面的例子中，我使用了 to string 序列化器来序列化 BigIntegers（因为 javascript 不能处理这样的数值）。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2016-06-05T23:53:09.760

我是[jackson-datatype-money](https://github.com/zalando/jackson-datatype-money)的维护者之一，所以我对这个答案持保留态度，因为我当然有偏见。该模块应该满足您的需求并且它非常轻量级（没有额外的运行时依赖项）。此外，[Jackson 文档](https://github.com/FasterXML/jackson#third-party-datatype-modules)、[Spring 文档](https://spring.io/blog/2014/12/02/latest-jackson-integration-improvements-in-spring)中都提到了它，甚至已经[讨论](https://github.com/zalando/jackson-datatype-money/issues/3#issuecomment-139030409)了如何将其集成到 Jackson 的官方生态系统中。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-08-15T11:11:35.220

我有同样的问题，我把它格式化为 JSON 作为一个字符串。可能有点小技巧，但很容易实现。

```
private BigDecimal myValue = new BigDecimal("25.50");
...
public String getMyValue() {
    return myValue.setScale(2, BigDecimal.ROUND_HALF_UP).toString();
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-02-27T18:50:41.500

正如[Sahil Chhabra](https://stackoverflow.com/users/1462282/sahil-chhabra)建议的那样，您可以在变量上使用`@JsonFormat`适当的。`shape`如果您想将它应用于`BigDecimal`您拥有的每个字段，您`Dto's`可以覆盖给定类的默认格式。

```
@Configuration
public class JacksonObjectMapperConfiguration {

    @Autowired
    public void customize(ObjectMapper objectMapper) {
         objectMapper
            .configOverride(BigDecimal.class).setFormat(JsonFormat.Value.forShape(JsonFormat.Shape.STRING));
    }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-12-01T01:59:55.330

受[Steve](https://stackoverflow.com/users/279452/steve)启发，并作为 Java 11 的更新。这是我们如何进行 BigDecimal 重新格式化以避免科学记数法。

```
public class PriceSerializer extends JsonSerializer<BigDecimal> {
    @Override
    public void serialize(BigDecimal value, JsonGenerator jgen, SerializerProvider provider) throws IOException {
        // Using writNumber and removing toString make sure the output is number but not String.
        jgen.writeNumber(value.setScale(2, RoundingMode.HALF_UP));
    }
} 
```

# php - 从类中的方法返回多个值

> ID：11319447
> 
> 赞同：1
> 
> 时间：2012-07-03T21:27:25.280
> 
> 标签：php, arrays, oop, methods, return

我正在尝试从一个方法返回多个变量。

这是我到目前为止所尝试的：

这段代码是类中的方法：

```
public function getUserInfo(){
$stmt = $this->dbh->prepare("SELECT user_id FROM oopforum_users WHERE username = ?");
$stmt->bindParam(1, $this->post_data['username']);
$stmt->execute();

while($row = $stmt->fetch(PDO::FETCH_ASSOC)) {

$user_id = $row['user_id'];
$thumb = $row['thumbnail'];
}
return array($user_id, $thumb);
} 
```

我尝试将每个变量放在一个列表中以供调用程序使用：

```
session_start();
require_once('init.php');

$username = trim($_POST['username']);
// create a new object
$login = new Auth($_POST, $dbh);

    if($login->validateLogin()){

        $_SESSION['loggedin'] = true;
        list($user_id, $thumb) = $login->getUserInfo($user_id, $thumb);
        echo $user_id . ' ' . $thumb;

    } 
```

这没有奏效。

如何从类中的方法返回多个变量的数组以在调用程序中使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T21:41:09.797

您在类中定义的方法与您调用的方法不匹配。

```
// In the class, you have:
getUserInfo();

// But you call this:
getUserInfo($user_id, $thumb); 
```

因此，PHP 认为您正在调用不同的方法，因此不返回任何内容（至少在这里没有任何用处）。

您的通话应如下所示：

```
list($user_id, $thumb) = $login->getUserInfo(); //Note that there are no parameters. 
```

## 另外的选择

您应该查看的其他内容是使用关联数组。它看起来像这样：

```
//In the class:
public function getUserInfo() {
  ...
  return array(
    'id'    => $user_id,
    'thumb' => $thumb
  );
}

//And then for your call:
$user = $login->getUserInfo();

echo $user['id'].' '.$user['thumb']; 
```

在编写这样的代码时，这将是我的偏好，因为我更喜欢为相关事物创建一个数组，而不是一组自变量。但这都是偏好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T21:41:20.670

这类似于这个问题[- PHP: Is it possible to return multiple values from a function?](https://stackoverflow.com/questions/3579892/php-is-it-possible-to-return-multiple-values-from-a-function)

你也可以看看这里。他们解释了返回多个值的方法 - [http://php.net/manual/en/functions.returning-values.php](http://php.net/manual/en/functions.returning-values.php)

我注意到的一件事是在这一行

```
list($user_id, $thumb) = $login->getUserInfo($user_id, $thumb); 
```

您在此处传递 2 个参数，但在函数定义部分中您没有参数 -

```
 public function getUserInfo(){
  .....
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T21:30:51.350

```
public function getUserInfo(){
$stmt = $this->dbh->prepare("SELECT user_id FROM oopforum_users WHERE username = ?");
$stmt->bindParam(1, $this->post_data['username']);
$stmt->execute();

while($row = $stmt->fetch(PDO::FETCH_ASSOC)) {

    $user_id = $row['user_id'];
    $thumb = $row['thumbnail'];
    $return[] = array($user_id, $thumb);
}
return $return;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T21:31:41.020

您可以创建一个类，例如 ，`UserInfo`专门用于保存用户信息并将其返回。

您还可以返回一个关联数组，例如..

```
$userInfo = array(
    'id' => ...,
    'thumb' => ...
); 
```

第三种选择是使用引用，但在这种情况下，我建议远离它。

# eclipse - 更改 Eclipse 的服务器 IP 地址

> ID：11319454
> 
> 赞同：-1
> 
> 时间：2012-07-03T21:28:20.830
> 
> 标签：eclipse

我想使用 Eclipse 手动更改服务器的 IP 地址（以便与 Android 移动设备一起使用）。我找到了这个页面：[本地 android 网络](http://juristr.com/blog/2009/10/accessing-host-machine-from-your/)。

但它说我必须在 arguments(x) 下运行/配置，但我在 Eclipse 上没有找到它。你能告诉我在哪里可以找到它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T01:07:57.763

`Run`您可以通过单击菜单、`Run Configurations...`子菜单，然后单击选项卡来找到您要查找的对话框`Arguments`。您还可以单击工具栏上的以下按钮（然后单击`Run Configurations...`和`Arguments`）：

![在此处输入图像描述](../Images/1f00d1a2a24852053ccc2fc01fe9f2b1.png)

`Ok`在单击或之前，不要忘记选择您要运行和/或配置的项目或类`Apply`。

# android - gson：将 /Date(1341348517698+0200)/ 转换为日历

> ID：11319457
> 
> 赞同：2
> 
> 时间：2012-07-03T21:28:40.943
> 
> 标签：android, json, calendar, gson

我正在尝试使用 gson 将作为 JSON (StartDate=/Date(1341348517698+0200)/) 的 DateTime (C#) 反序列化为 Android Calendar 对象...

我已经尝试了以下但没有成功：

```
ObjectWithCalender cal = gson.fromJson(jsonWithDate, ObjectWithCalender.class); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T22:07:24.297

您需要为 Date 创建一个自定义反序列化程序。例如创建这个类：

```
public class DotNetDateDeserializer implements JsonDeserializer<Date> {
   @Override
   public Date deserialize(JsonElement json, Type typfOfT, JsonDeserializationContext context) {
      // this is the place where you convert .NET timestamp into Java Date object
   } 
} 
```

然后在将 JSON 字符串转换为 POJO 之前：

```
GsonBuilder builder = new GsonBuilder();
builder.registerTypeAdapter(Date.class, new DotNetDateDeserializer());
Gson gson = builder.create();
gson.fromJson(jsonString, Class); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T21:31:41.113

使用 unix 时间戳而不是 datetime，datetime 是不明确的结构

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-29T02:19:11.100

```
/**
 * The Class CalendarFromTimestampJsonDeserializer.
 */
    public class CalendarFromTimestampJsonDeserializer implements JsonDeserializer<Calendar>{

        /* (non-Javadoc)
         * @see com.google.gson.JsonDeserializer#deserialize(com.google.gson.JsonElement, java.lang.reflect.Type, com.google.gson.JsonDeserializationContext)
         */
        public Calendar deserialize(JsonElement json, Type typeOfT,
                JsonDeserializationContext context) throws JsonParseException {
            long timestamp = json.getAsLong();
            Calendar calendar = Calendar.getInstance();
            calendar.setTimeInMillis(timestamp);
            return calendar;
        }
    } 
```

进而

```
GsonBuilder builder = new GsonBuilder();
            builder.registerTypeAdapter(Calendar.class, new CalendarFromTimestampJsonDeserializer());
            Gson gson = builder.create(); 
```

在列表的情况下

```
List<ObjectWithCalendar> objList = gson.fromJson(objectJsonArray.toString(), new TypeToken<List<ObjectWithCalendar>>(){}.getType()); 
```

或者一个对象

```
ObjectWithCalendar obj = gson.fromJson(objectJson.toString(), ObjectWithCalendar.class); 
```

# wcf - 在 F5 负载均衡器后面配置 WCF 绑定

> ID：11319460
> 
> 赞同：1
> 
> 时间：2012-07-03T21:29:02.233
> 
> 标签：wcf

我正在尝试在 F5 负载平衡器后面的 IIS 上设置 WCF 服务。F5 处理 SSL，而 WCF 服务在 HTTP 上。这似乎是相当标准的部署方案，但谷歌搜索并没有多大帮助。如果有人可以回答这个问题，请提前感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T22:29:57.730

您可以使用[clearusernamebinding](http://webservices20.blogspot.co.il/2008/11/introducing-wcf-clearusernamebinding.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T08:48:26.520

您可以通过此[链接](http://support.f5.com/kb/en-us/products/big-ip_ltm/manuals/product/ltm_implementation/sol_http_ssl.html)在 F5 负载均衡器上配置 SSL 。

此外，如果您的 WCF 服务具有带有用户名/密码验证的 basicHttpBinding，并且您希望在负载均衡器上卸载 SSL，您可以使用[ClearUserNameBinding](http://webservices20.blogspot.co.il/2008/11/introducing-wcf-clearusernamebinding.html)通过 Http 传递用户名/密码，如 Yaron 所说。

# c++ - 使用 node-gyp 构建时无法加载 node.js 本机插件，但使用 Visual Studio 构建时它可以工作

> ID：11319461
> 
> 赞同：6
> 
> 时间：2012-07-03T21:29:06.117
> 
> 标签：c++, node.js, native, add-on

我已经为 node.js 编写了一个原生插件，用 MSVC++ 编译它，没有 node-gyp，并在节点 REPL 和应用程序中成功使用它。我正在使用 x64 节点并编译 x64 插件。我正在尝试用 node-gyp 构建东西。我已经让 node-gyp 生成一个 Visual Studio 解决方案并编译它，但是出来的插件不起作用。我得到的唯一错误是：

```
Error: The specified procedure could not be found.

    at Object.Module._extensions..node (module.js:480:11)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.require (module.js:362:17)
    at require (module.js:378:17)
    at repl:1:13
    at REPLServer.self.eval (repl.js:111:21)
    at rli.on.e (repl.js:260:20)
    at REPLServer.self.eval (repl.js:118:5)
    at Interface.<anonymous> (repl.js:250:12) 
```

当我运行一个尝试加载插件的脚本时，我得到了这个：

```
module.js:480
  process.dlopen(filename, module.exports);
          ^
Error: The specified procedure could not be found.

    at Object.Module._extensions..node (module.js:480:11)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.require (module.js:362:17)
    at require (module.js:378:17)
    at Object.<anonymous> (c:\blah\testheaders.js:1:75)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12) 
```

我了解到 dlopen 与在 Linux 上加载动态库有关，但找不到任何与节点相关的有用信息（特别是在 Windows 上）。这个插件需要一些第三方 dll，但它们在我的路径上，而且当我在没有 node-gyp 的情况下编译它时，插件工作正常。

我需要做什么才能弄清楚如何完成这项工作？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-05T16:33:05.227

原来问题出在我对 NODE_MODULE 宏的使用上。我有这样的事情：

```
NODE_MODULE(SomeAddonName, Init) 
```

但我的 binding.gyp 有这个：

```
"target_name": "totallyDifferentName", 
```

事实证明，binding.gyp 中的 target_name 必须与模块名称（NODE_MODULE 的第一个参数）相同。

感谢@TooTallNate 帮助我解决这个问题！

# orchardcms - 从 Command 以编程方式创建 Orchard ContentItem

> ID：11319462
> 
> 赞同：1
> 
> 时间：2012-07-03T21:29:18.443
> 
> 标签：orchardcms

我在我的模块中编写了以下简单命令。Faq 类型有一个带有单个字段的自定义部件和一个 BodyPart。_cm.Create(item) 运行后，该项目分配了一个 Id，但我在数据库中找不到它的任何痕迹，它也没有出现在 Orchard 的内容选项卡中。为什么该项目获得一个 Id 但在数据库中找不到？它是否需要驱动程序、视图和位置信息才能显示在内容选项卡中？

```
public class ApiCommands : DefaultOrchardCommandHandler
{
    private readonly IContentManager _cm;

    public ApiCommands(IContentManager cm)
    {
        _cm = cm;
    }

    [CommandName("api seed")]
    public void Seed()
    {
        var item = _cm.New("Faq");
        item.As<FaqPart>().Question = "Why is the sky blue?";
        item.As<BodyPart>().Text = "Shut up and do your homework.";

        _cm.Create(item);
    }
} 
```

我的自定义部分没有驱动程序，这是处理程序：

```
public FaqHandler(IRepository<FaqPartRecord> repository)
{
    Filters.Add(StorageFilter.For(repository));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T17:59:55.640

事实证明我的类型没有附加 CommonPart。在我附加一个并设置部件的 Owner 属性后，我能够保存它。

# iphone - 在 iOS 中通过 Objective-C/Xcode 访问照片库

> ID：11319463
> 
> 赞同：2
> 
> 时间：2012-07-03T21:29:27.330
> 
> 标签：iphone, objective-c, ios, xcode, photo

我正在编写一个 iPhone 应用程序。我想知道是否可以获得存储在 iPhone 库（或模拟器中的照片）的文件/文件名列表。

本质上，我在问我是否可以获取存储在 iPhone 或模拟器上的照片的文件名。

我很感激任何帮助，谢谢！

编辑：

```
image = [UIImage imageNamed:@"/Users/Library/Application Support/iPhone Simulator/5.0/Media/DCIM/100APPLE/IMG_0002.jpg"];
imageView.image = image; 
```

不幸的是，不起作用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-04T07:37:52.070

您只需使用`UIImagePickerController`.

它给出了类似的东西：

```
-(IBAction) getPhoto:(id) sender {
    UIImagePickerController * picker = [[UIImagePickerController alloc] init];

    // Don't forget to add UIImagePickerControllerDelegate in your .h
    picker.delegate = self;

    if((UIButton *) sender == choosePhotoBtn) {
        picker.sourceType = UIImagePickerControllerSourceTypeSavedPhotosAlbum;
    } else {
        picker.sourceType = UIImagePickerControllerSourceTypeCamera;
    }

    [self presentModalViewController:picker animated:YES];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T21:44:09.200

这是此处已提出的 SO 问题的副本-[获取所有相册的列表和每个相册的缩略图](https://stackoverflow.com/questions/9705478/get-list-of-all-photo-albums-and-thumbnails-for-each-album-ios)

从那个答案：看看[AssetsLibrary](https://developer.apple.com/library/ios/#documentation/AssetsLibrary/Reference/AssetsLibraryFramework/_index.html#//apple_ref/doc/uid/TP40009730)框架。

请注意，如果您有权访问 iOS 6 Beta，则需要注意访问这些资产时发生的更改。每个 NDA 都不能再说了。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2015-01-21T18:56:11.950

使用这种方法，您可以轻松地实现它。

[https://www.dropbox.com/sh/trmg44a93hwq35x/AACAVGY6VKEDR0tDUOqoxd-Ba?dl=0](https://www.dropbox.com/sh/trmg44a93hwq35x/AACAVGY6VKEDR0tDUOqoxd-Ba?dl=0)

# trigger.io - 如何使用 Forge 检测用户语言？

> ID：11319464
> 
> 赞同：2
> 
> 时间：2012-07-03T21:29:28.503
> 
> 标签：trigger.io

Android 上的语言检测[似乎并不容易](https://stackoverflow.com/questions/6547642/get-the-language-of-user-in-android)。我还没有亲自测试过，但显然，“navigator.language”总是返回“en”。iOS 和 Android 都可以返回当前的设备语言。有没有一种 Forge 方法可以为我们做原生/js 桥接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:13:43.550

这是我用来实现此目的的代码。

```
if ( navigator && navigator.userAgent && ( lang = navigator.userAgent.match(/android.*\W(\w\w)-(\w\w)\W/i) ) ) {
    lang = lang[1];
}

if ( !lang && navigator ) {
    if (navigator.language) {
        lang = navigator.language;
    } else if ( navigator.browserLanguage ) {
        lang = navigator.browserLanguage;
    } else if ( navigator.systemLanguage ) {
        lang = navigator.systemLanguage;
    } else if ( navigator.userLanguage ) {
        lang = navigator.userLanguage;
    }
    lang = lang.substr( 0, 2 );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T22:52:42.707

目前没有用于检测语言的 Forge API。

可以通过使用 navigate.userAgent 解决您指出的问题：请参阅此问题：

[获取android中用户的语言](https://stackoverflow.com/questions/6547642/get-the-language-of-user-in-android)

# solr - SOLR 中的 Geoclusters

> ID：11319465
> 
> 赞同：4
> 
> 时间：2012-07-03T21:29:32.327
> 
> 标签：solr, geospatial, markerclusterer

我们正在重新实现一个搜索，其中包括需要在地图上聚集的位置。我一直在寻找 SOLR 中的实现，但没有运气。

当前使用地图聚类的搜索位于[http://www.uship.com/find](http://www.uship.com/find)

有没有人见过类似的或有关于如何最好地做到这一点的想法？

问候，尼克

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T02:35:53.727

如果要求对相当少量的点进行聚类，可能少于 1000 个，则不需要涉及 Solr。抓住点并使用[HeatmapJS](http://www.patrick-wied.at/static/heatmapjs/)之类的东西绘制它们。

我认为要求是集群*所有*搜索结果可能是数千甚至数百万个文档。我建议首先在搜索区域的网格上生成密度热图。您可以通过在每个长度（例如 D2RY、D2R、D2、D）索引以 geohash 形式编码的每个点来做到这一点。但是在长度之前加上长度：4_D2RY、3_D2R、2_D2、1_D。这些小字符串进入 Solr 中的多值“字符串”类型字段，然后您将对其进行分面。分面时，您将提出合适的网格分辨率（例如 goehash 前缀长度），然后将其用作前缀查询，例如 facet.prefix=4_ 您可以使用 LatLonType 字段单独索引该点并执行标准边界框在那里查询。此时，你的分面搜索结果将给你的信息填入一个数字网格。*快*——你可以即时生成这样的热图。不过，它将使用相当数量的 RAM，因为这是一个多值字段的分面，该字段将具有大量值。这是我想要添加到新的 Lucene 空间模块（或者可能在 Solr 层）中的东西，它不需要额外的内存并使其变得简单。它不会出现在 Solr 4.0 中，但可能会出现在 4.1 中。

在这个阶段，也许热图就可以了。但是，正如您的问题所述，您可能希望在此之上应用聚类。有人向我介绍了一些可以应用于热图的[有趣的地理聚类算法。](http://web.archive.org/web/20071121140547/http://trib.tv/tech/clustering-points-on-a-google-map/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T07:27:50.730

不知道你有没有搜索过 lucidworks，但是那里有很多有趣的资源：

[使用多边形搜索：Solr 地理空间搜索的另一种方法](https://www.youtube.com/watch?v=BtpBBFeZeeU)

浏览这些：
[http ://www.lucidimagination.com/search/?q=geospatial#%2Fn](http://www.lucidimagination.com/search/?q=geospatial#%2Fn)

已经在 Solr 中实现：
[http](http://wiki.apache.org/solr/SpatialSearch/) ://wiki.apache.org/solr/SpatialSearch/ （这种方法有什么问题？）
[http://wiki.apache.org/solr/SpatialSearchDev](http://wiki.apache.org/solr/SpatialSearchDev)
[https://issues.apache.org/吉拉/浏览/SOLR-3304](https://issues.apache.org/jira/browse/SOLR-3304)

# sql - 如何在 sql server 2008 developer edition 中启用 FILESTREAM 功能

> ID：11319468
> 
> 赞同：1
> 
> 时间：2012-07-03T21:29:40.023
> 
> 标签：sql, sql-server-2008, tsql

我在激活 sql server 2008 中的文件流功能时遇到问题 我已完成以下步骤但未能成功..

1）以管理员身份运行sql server management studio，右键单击服务器实例和Facets，从下拉列表中打开对话框选择服务器配置并从列表中选择FileStreamAccessLevel并设置为FullAcess，然后重新启动实例。然后我运行查询，我再次收到错误 FILESTREAM 功能已禁用。然后我再次执行前面的步骤来查看 Filestream 是否启用，我看到它仍然是禁用的。图片链接： [http ://sdrv.ms/LkHZsn](http://sdrv.ms/LkHZsn)

2）我也打开MSSQLSERVER属性，发现FileStream Tab不存在，不知道为什么？我已经安装了 sql server 2008 developer edition 的所有功能，包括全文搜索、分析服务、集成服务等。图片链接 [http://sdrv.ms/R5Ojm3](http://sdrv.ms/R5Ojm3)

3）我也运行了 spconfigure 命令，但仍然没有成功。我打开服务器实例属性，从左侧窗格中选择高级，然后在文件流访问级别上选择启用完全访问，在单选按钮下方存在名称配置值，当前它是选择的，但是当我选择运行值时，它显示 FileStream 已禁用。图片链接： http: [//sdrv.ms/MUpEiK](http://sdrv.ms/MUpEiK) [http://sdrv.ms/LWx8ow](http://sdrv.ms/LWx8ow)

4）我也打开了sql server config manager，选择sql services但没有出现，见下图。 [http://sdrv.ms/R5PxOa](http://sdrv.ms/R5PxOa) 请帮我解决这个问题

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T11:54:47.333

安装最新的服务包，这应该可以解决配置管理器问题，这将允许您正确配置文件流。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T21:39:21.450

根据[文档](http://msdn.microsoft.com/en-us/library/cc645923%28v=sql.100%29.aspx)，您需要从 SQL Server 配置管理器中启用它。

**编辑：**您没有提到您已经遵循了文档，也没有提到您在 SSCM 中看不到任何服务。根据各种谷歌点击，例如[这个 MS 论坛讨论](http://social.msdn.microsoft.com/Forums/en-US/sqltools/thread/bddbc31f-51c7-4bb8-9274-c15329cc5312/)，`NETWORK SERVICE`帐户的有限权限可能会导致这个问题。

# javascript - JQuery 使图像元素在可点击的 div 中处于非活动状态

> ID：11319484
> 
> 赞同：2
> 
> 时间：2012-07-03T21:30:28.773
> 
> 标签：javascript, jquery, jquery-selectors

我有一个 div 类，单击它会切换动画。在这个 div（具有相同类名的数字之一）中有许多 img 图标。我想保持对 div 的点击，而不是对 div 内的图像的点击 - 最终，点击时图像将触发另一个功能。

到目前为止，我的 JQuery 代码如下：

```
$(document).on('click', '.list_body', function() {
    $(this).nextAll('.list_info:first').slideToggle(500);
    return false;
});

$('.list_body').on('click', 'img', function(e){
    e.preventDefault();
    alert("Test");
});

var ls="<div class='list_body'><div class='lister'><img src='"+path+stat1+"' /><img src='"+path+stat2+"' /><img src='"+path+stat3+"' /><img src='"+path+stat4+"' /><img src='"+path+stat5+"' /></div><div class='lister'>"+split_stats[5]+" "+split_stats[6]+" "+split_stats[7]+"<br />["+split_stats[12]+"]"+"</div><div class='lister'>"+split_stats[13]+"</div><div class='lister'><a href='javascript:void(0);' class='lister_a'>View Appointment &amp; Actions</a></div></div>"

ls+="<div class='list_info'>";
ls+="<ul class='add1'><li>"+split_stats[8]+"</li><li>"+split_stats[9]+"</li><li>"+split_stats[10]+"</li><li>"+split_stats[11]+"</li><li>"+split_stats[12]+"</li></ul>";
ls+="<ul class='add2'><li><strong>Tel: </strong>"+split_stats[14]+"</li><li><strong>Mobile: </strong>"+split_stats[15]+"</li><li><strong>Email: </strong>"+split_stats[16]+"</li><li><strong>Job ID: </strong>"+split_stats[17]+"</li></ul>";
ls+="<div class='bottom_links' data-job_id='"+split_stats[17]+"'><div class='lister'><a href='javascript:void(0);' data-ref1='1' data-job_id='"+split_stats[17]+"'>Print Files</a></div><div class='lister' data-ref1='2'><a href='javascript:void(0);' data-ref1='2' data-job_id='"+split_stats[17]+"'>Add Message</a></div><div class='lister'><a href='javascript:void(0);' data-ref1='3' data-job_id='"+split_stats[17]+"'>Add Tracking No.</a></div><div class='lister'><a href='javascript:void(0);' data-ref1='4' data-job_id='"+split_stats[17]+"'>///</a></div></div>";
ls+="</div>";

$(ls).appendTo('.list_holder');
$('.list_info').hide(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T21:35:14.010

只需为您的图像添加这个：

```
$('.list_body').on('click', 'img', function(  e  ){
    e.preventDefault();

    // your img functions stuff...

}); 
```

`e.preventDefault();`将有助于防止点击事件 - 从图像冒泡到下面的父元素 - 触发不需要的功能。

**阅读更多：** [http ://api.jquery.com/event.preventDefault/](http://api.jquery.com/event.preventDefault/)

# html - 使进度条动态地将宽度更改为容器其余部分的大小

> ID：11319488
> 
> 赞同：2
> 
> 时间：2012-07-03T21:30:43.777
> 
> 标签：html, css

我有一个用 jquery 构建的音频播放器。标记和 css 相对简单，但我无法让进度条随整个容器的宽度改变宽度。

它设置为百分比，但不表现为容器 div 的子项。我猜这与绝对位置有关，但如果我改变了整个事情就会出错。

这是标记

```
<div class="container gradient">

    <div style="width:100px; overflow:hidden; display:inline-block;"><a href="" target="_blank"><img src="" class="artwork" height="100%"></a></div>
    <div class="name">

<p1><a href="" target="_blank"></a><br>
    <b></b></p1>

    </div>
    <div class="logo" style="font-size:12px; text-align:right; font-weight:bold;">

            <br><a href="" target="_blank""></a>
    <br>

    </div>
    <div class="player gradient">

        <a class="controls gradient" id="play" href="" title=""></a>

            <input type="range" id="seek" value="0" max=""/>

    </div><!-- / player -->

</div><!-- / Container--> 
```

和CSS

```
.gradient {
border: 1px solid #C4C4C4;

background: #F2F2F2; 

}

.container {

position: absolute;
width: 100%;
height: 122px;

top: 0%;
left: 0%;

padding: 10px;

.artwork {height:100px; overflow:hidden; margin-left:auto; margin-right:auto;}

.containerLarge {
height: 427px;
}

.name {left:120px; position:absolute; top:7px}
.player {

box-sizing: border-box;
position:absolute;
width:91%;
bottom: 10px;

left:120px;

border-radius: 3px;
padding: 5px;
}

.controls {
border-radius:1em;
background-color:#0485bf;
display: block;
width: 34px;
height: 34px;
background-image: url(../player/src/images/sprite.png);
background-repeat: no-repeat;
float: left;
margin-right: 5px;

}
.controls:hover {background-color:#005b85}

#play {
background-position: 6px 5px;
}

#pause {
background-position: -32px 5px;
}

input[type="range"] {
width: 250px;
margin-top: -5px;
}

#close {
float: right;
background-position: -146px 5px;
display: none;
}

.volume {
position: absolute;
height: 100px;
width: 34px;
border: 1px solid black;
background-color: #242323;
top: -97px;
display: none;
}
input{
display:none\9!important;
}
input[type="range"] {

border: 1px solid #C4C4C4;
position: absolute;
top: 18px;
display: block;
width: 95%;
height: 15px;

-webkit-border-radius: 20px;
-moz-border-radius: 20px;
border-radius: 20px;
background-color: #DBDBDB;
left: 50px;

}

input::-webkit-slider-thumb {
-webkit-appearance: none;
width: 20px;
height: 20px;
border:1px solid #C4C4C4;

-webkit-border-radius: 10px;
border-radius: 10px;
background: #0485bf; 

}

input::-webkit-slider-thumb: hover {opacity : 0.3;filter: alpha(opacity=30)}

.logo {float:right; }

.embed {width:100%; background-color:black } 
```

有问题的主要元素是 .container、.controls、.player 和输入类型范围。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T13:29:01.837

很难从标记中看出发生了什么。哪个元素是进度条？如果某物被绝对定位并设置为 100% 宽度，它将填充屏幕的宽度，而不是其父元素（除非它的父元素设置为 position:relative）。

# php - PHP exec() 函数 windows 7 IIS 7.5

> ID：11319493
> 
> 赞同：1
> 
> 时间：2012-07-03T21:31:07.410
> 
> 标签：php, iis

我正在尝试使用 exec() 运行命令行实用程序，但它不返回任何内容。我在 php.net 上读到需要设置 cmd.exe 的权限以允许 iis 用户运行它。我无法使用我能想到的任何方法来做到这一点。cacls icacls 和标准安全屏幕不起作用。我正在将输出记录到 mysql 数据库。

我的代码如下所示：

```
$Ret = array();
$err = "";
exec("dir", $Ret, $err); 
```

在数据库中，我得到 $Ret 的数组

命令有问题，我对此表示怀疑，或者我需要以某种方式设置权限。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T00:25:05.553

换行：

```
exec("dir", $Ret, $err); 
```

至：

```
$r = exec("dir", $Ret, $err);
echo $r; 
```

您需要将 的返回值捕获`exec`到一个变量中然后渲染它。

或者尝试运行这个：

```
<?php
$a = array();
$e = "";

echo "exec'ing<br/>";
$r = exec("dir", $a, $e);

echo "var_dumping<br/>";

var_dump($a);

echo "=====================\n";

var_dump($e);

echo "=====================\n";

var_dump($r);

?> 
```

如果您在关闭 xdebug 的浏览器中运行它，那么您可能需要查看源代码才能看到结果。

# ruby-on-rails - 创建一个类以在 ruby 1.8.7 中填充页面

> ID：11319494
> 
> 赞同：0
> 
> 时间：2012-07-03T21:31:07.643
> 
> 标签：ruby-on-rails, ruby-1.8.7

我正在尝试创建一个类来填充我网站上的交易标签。

第 1 部分。获取项目关闭日期 (CatalogItem.close_date) 并在关闭后 12 小时内使用所有项目。第 2 部分。使用当前价格 (CatalogItem.current_price) 和估计值 (Item.estimated_price) 计算交易百分比 <-- 您会注意到它们位于不同的表中，但它们由相同的 item_id 标识。

我在 RoR 中是绿色的，所以我无法在课堂上连接它，但我可以让它在控制台中单独工作：

```
hour_diff = (CatalogItem.last.close_date - Time.now) / 1.hour
deal_percentage = (CatalogItem.last.current_price.to_f / Item.last.estimated_price)*100 
```

如您所见，我正在使用我的 .last 数据，但我想创建一个贯穿我所有项目的数组，这就是我的知识枯竭的地方，任何帮助都会非常感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T21:55:14.243

我假设您使用的是 belongs_to，但我认为您想要做的是使用实例方法。这将是您的模型，app/models/catalog_item.rb

```
class CatalogItem < ActiveRecord::Base
  belongs_to :item

  def hours_remaining
    (close_date - Time.now) / 1.hour
  end

  def deal_percentage
    (current_price.to_f / item.estimated_price)*100
  end
end 
```

然后，您可以在如下视图中访问它们：

```
<table>
  <% CatalogItem.all.each do |ci| %>
    <tr>
      <td><%= ci.hours_remaining %></td>
      <td><%= ci.deal_percentage %></td>
    </tr>
  <% end %>
</table> 
```

# perl - 执行 Perl 脚本并在 Windows 批处理脚本中捕获其退出值的语法是什么？

> ID：11319496
> 
> 赞同：1
> 
> 时间：2012-07-03T21:31:13.693
> 
> 标签：perl, batch-file, errorlevel

> **可能重复：**
> [如何从 Windows 命令行获取应用程序退出代码？](https://stackoverflow.com/questions/334879/how-do-i-get-the-application-exit-code-from-a-windows-command-line)

我在批处理中调用的 Perl 脚本返回一个`1`、`2`或`3`。使用参数 829 调用这个 perl 脚本并捕获脚本的退出代码的语法是什么？

```
 Perl.exe listMembership.pl 829 in cmd.exe

 @echo off
 set retVal=Perl.exe listMembership.pl 829
 echo %retVal% 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T21:57:00.463

看看`if /?`命令行的输出。如果没有`cmd`扩展，最低公分母批处理脚本将类似于以下内容：

```
@echo off
Perl.exe listMembership.pl 829
if errorlevel 4 goto error
if errorlevel 3 goto exit3
if errorlevel 2 goto exit2
if errorlevel 1 goto exit1
if errorlevel 0 goto exit0

:error
echo:Unexpected exit code %ERRORLEVEL%
goto end

:exit3
echo:Forbnicate
goto end

:exit2
echo:Colormaticate
goto end

:exit1
echo:Motorcade
goto end

:exit0
echo:Is this really success?
goto end

:end
echo:Done 
```

请记住，`errorlevel`支票必须按降序排列，因为：

```
ERRORLEVEL number 如果最后一个程序运行，则指定一个真条件
                返回等于或大于数字的退出代码
                指定的。
```

# java - 爪哇错误？为什么在 utf8 编码中有额外的零字节？

> ID：11319499
> 
> 赞同：9
> 
> 时间：2012-07-03T21:31:20.013
> 
> 标签：java, utf-8, character-encoding

以下代码

```
public class CharsetProblem {
public static void main(String[] args) {
    //String str = "aaaaaaaaa";
    String str = "aaaaaaaaaa";
    Charset cs1 = Charset.forName("ASCII");
    Charset cs2 = Charset.forName("utf8");

    System.out.println(toHex(cs1.encode(str).array()));
    System.out.println(toHex(cs2.encode(str).array()));

}

public static String toHex(byte[] outputBytes) {

    StringBuilder builder = new StringBuilder();

    for(int i=0; i<outputBytes.length; ++i) {
        builder.append(String.format("%02x", outputBytes[i]));
    }

    return builder.toString();
}
} 
```

返回

```
61616161616161616161
6161616161616161616100 
```

即 utf8 编码返回多余的字节。如果我们取less as，那么我们将没有多余的字节。如果我们采取更多，我们可以获得越来越多的多余字节。

为什么？

如何解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T21:37:53.803

您不能只获取支持数组并使用它。ByteBuffers 有[容量、位置和限制](http://docs.oracle.com/javase/6/docs/api/java/nio/Buffer.html)。

```
System.out.println(cs1.encode(str).remaining());
System.out.println(cs2.encode(str).remaining()); 
```

产生：

```
10
10 
```

试试这个：

```
public static void main(String[] args) {
  //String str = "aaaaaaaaa";
  String str = "aaaaaaaaaa";
  Charset cs1 = Charset.forName("ASCII");
  Charset cs2 = Charset.forName("utf8");

  System.out.println(toHex(cs1.encode(str)));
  System.out.println(toHex(cs2.encode(str)));
}

public static String toHex(ByteBuffer buff) {
  StringBuilder builder = new StringBuilder();
  while (buff.remaining() > 0) {
    builder.append(String.format("%02x", buff.get()));
  }
  return builder.toString();
} 
```

它产生预期的：

```
61616161616161616161
61616161616161616161 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-03T21:37:40.713

您假设 a 的支持数组`ByteBuffer`恰好是容纳内容的正确大小，但不一定。事实上，内容甚至不需要从数组的第一个字节开始！研究一下 API `ByteBuffer`，你就会明白发生了什么：内容从 的返回值开始，`arrayOffset()`到`limit()`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-20T10:55:52.543

答案已经给出，但是当我遇到同样的问题时，我认为提供更多细节可能会很有用：

调用返回的字节数组`cs1.encode(str).array()`或`cs2.encode(str).array()`返回对当时分配给 ByteBuffer 的整个数组的引用。阵列的容量可能大于实际使用的容量。要仅检索使用的部分，您应该执行以下操作：

```
ByteBuffer bf1 = cs1.encode(str);
ByteBuffer bf2 = cs2.encode(str);
System.out.println(toHex(Arrays.copyOf(bf1.array(), bf1.limit())));
System.out.println(toHex(Arrays.copyOf(bf2.array(), bf2.limit()))); 
```

这会产生您期望的结果。

# php - 使用 php 搜索非常大的文件以非常有效地提取块

> ID：11319500
> 
> 赞同：4
> 
> 时间：2012-07-03T21:31:32.057
> 
> 标签：php, performance, file-io

最近我一直为从视频文件中解析元数据而头疼，并发现部分问题是视频制作软件供应商无视各种标准（或至少是解释上的差异）（以及其他原因）。

因此，我需要能够扫描各种格式、容器和编解码器的非常大的视频（和图像）文件，并挖掘元数据。我已经有了 FFMpeg、ExifTool Imagick 和 Exiv2 来处理各种文件类型中不同类型的元数据，并通过各种其他选项来填补其他一些空白（请不要建议库或其他工具，我已经尝试过所有这些： ））。

现在我要扫描大文件（每个最大 2GB）以查找 XMP 块（通常由 Adob​​e 套件和其他一些软件写入电影文件）。我已经编写了一个函数来做到这一点，但我担心它可以改进。

```
function extractBlockReverse($file, $searchStart, $searchEnd)
{
    $handle = fopen($file, "r");
    if($handle)
    {
        $startLen = strlen($searchStart);
        $endLen = strlen($searchEnd);

        for($pos = 0, 
                $output = '', 
                $length = 0, 
                $finished = false, 
                $target = '';
            $length < 10000 && 
                !$finished && 
                fseek($handle, $pos, SEEK_END) !== -1; 
            $pos--)
        {
            $currChar = fgetc($handle);
            if(!empty($output))
            {
                $output = $currChar . $output;
                $length++;

                $target = $currChar . substr($target, 0, $startLen - 1);
                $finished = ($target == $searchStart);
            }
            else
            {
                $target = $currChar . substr($target, 0, $endLen - 1);
                if($target == $searchEnd)
                {
                    $output = $target;
                    $length = $length + $endLen;
                    $target = '';
                }
            }
        }

        fclose($handle);
        return $output;
    }
    else
    {
        throw new Exception('not found file');
    }
    return false;
}

echo extractBlockReverse("very_large_video_file.mov", 
    '<x:xmpmeta', 
    '</x:xmpmeta>'); 
```

目前还可以，但我真的很想在这里充分利用 php 而不会破坏我的服务器，所以我想知道是否有更好的方法来做到这一点（或对代码进行调整以改进它）因为这种方法对于一些简单的事情来说似乎有点过头了，比如找到几根弦然后拉出它们之间的任何东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T22:30:17.467

您可以使用一种快速字符串搜索算法——如[Knuth-Morris-Pratt](http://en.wikipedia.org/wiki/Knuth%E2%80%93Morris%E2%80%93Pratt_algorithm) 或[Boyer-Moore](http://en.wikipedia.org/wiki/Boyer%E2%80%93Moore_string_search_algorithm)来查找开始和结束标签的位置，然后读取它们之间的所有数据。

You should measure their performance though, as with such small search patterns it might turn out that the constant of the chosen algorithm is not good enough for it to be worth it.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T22:57:07.287

With files this big, I think that the most important optimization would be to NOT search the string everywhere. I don't believe that a video or image will ever have a XML block smack in the middle - or if it has, it will likely be garbage.

Okay, it IS possible - TIFF can do this, and JPEG too, and PNG; so why not video formats? But in real world applications, loose-format metadata such as XMP are usually stored last. More rarely, they are stored near the beginning of the file, but that's less common.

Also, I think that most XMP blocks will not have sizes too great (even if Adobe routinely pads them in order to be able to "almost always" quickly update them in-place).

So my first attempt would be to extract the first, say, 100 Kb and last 100 Kb of information from the file. Then scan these two blocks for "

If the search does not succeed, you will still be able to run the exhaustive search, but if it succeeds it will return in one ten-thousandth of the time. Conversely, even if this "trick" only succeeded one time in one thousand, it would still be worthwhile.

# symfony - 在 Symfony 2 中使用 compass/sass

> ID：11319501
> 
> 赞同：5
> 
> 时间：2012-07-03T21:31:34.220
> 
> 标签：symfony, sass, compass-sass

我一直在谷歌搜索这个问题的答案，但还没有找到我正在寻找的东西。

我已经使用 CodeIgniter 几年了，我正沉浸在 Symfony 框架的水中。到目前为止，我喜欢“捆绑”方法，除了我在如何处理资产方面遇到一些问题，特别是 css 文件。

我习惯于使用 Compass 框架，通常会使用编译成一个主样式表的部分来设置目录结构。但是，因为我的 Symfony 项目被拆分成多个包，所以我希望（并且可能*应该*）将每个包的 css 保留在包中，并且在主“web”目录中只有全局模板类的东西。我的问题是这个...

如果我在我的“web”目录中有一个 compass 项目设置，我如何才能包含来自我的各个包的部分？

我曾想过为我创建的每个捆绑包都有单独的指南针项目，但我如何将它们全部组合成一个压缩文件？那是我应该使用 Assetic 的东西吗？坦率地说，这是组织过度杀伤力吗？

其他发现自己处于类似情况的人的任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T07:54:22.250

这看起来像是 Assetic 及其 Sass 过滤器的工作。

您可以在主模板目录中列出所有 sass 文件，assetic 将为您进行压缩。

看起来像这样（取自下面的链接）：

```
{% stylesheets filters="compass"
    "@AlomMainBundle/Resources/assets/css/main.sass"
    "@AlomMainBundle/Resources/assets/css/header.sass"
    "@AlomMainBundle/Resources/assets/css/footer.sass"
%}
    <link rel="stylesheet" href="{{ asset_url }}" />
{% endstylesheets %} 
```

我在网上找到了一个很好的解释：http: [//alexandre-salome.fr/blog/Sass-Compass-Assetic-In-Ten-Minutes](http://alexandre-salome.fr/blog/Sass-Compass-Assetic-In-Ten-Minutes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T18:10:09.437

我最终在主 app/Resources 文件夹中为我的指南针项目创建了一个目录结构。如果需要，我已经能够创建“特定于捆绑包”的目录，然后使用 Compass 将整个文件编译为一个主 css 文件（也存储在 app/Resources/public 中。然后我使用 Assetic 来“发布” （或不管它做什么）使用将样式表包含到我的基本树枝模板中的常规方法将该文件放入我的 Web 根目录中。

# php - Codeigniter 重定向在 IE9 中不起作用

> ID：11319507
> 
> 赞同：1
> 
> 时间：2012-07-03T21:32:02.780
> 
> 标签：php, internet-explorer, codeigniter, redirect, cookies

我在使用 Codeigniter 和 Internet Explorer 时遇到了很大的麻烦。

请查看[示例页面](http://api.karmapa.org/index.php/stream)

在过去的几天里，这是一件非常简单的事情困扰着我。

通过按下登录按钮，我什么也不做，只是调用一个函数 start()

```
public function start()
{
  setcookie('loginstatus', TRUE, time()+7200); // setting a cookie

  redirect('stream', 'location'); // redirecting to the index controller
} 
```

在索引函数中，我执行以下操作：

```
public function index()
{
  if ($this->isuserloggedin() == TRUE)
  {
    echo "The user is already logged in";
    $this->load->view("v_stream_start");
  } else {
    echo "The user still has to login";
    $this->load->view("v_stream_login");
    }
} 
```

这是我检查现有 cookie 的 userisloggedin() 方法：

```
public function isuserloggedin() {   
 if (isset($_COOKIE['loginstatus'])) {
   return TRUE;
 } else {
     return FALSE;
   } 
 } 
```

请检查 IE 与 FF/Safari/Chrome。它适用于除 IE 之外的所有浏览器，我不知道为什么。

一切都按预期运行，直到我调用 redirect() 方法 - 之后 IE 不知何故无法检索 cookie，而所有其他浏览器都可以。

我已经尝试将 ci_session 更改为 ci_session 并检查了准确的服务器时间。

非常感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T00:56:38.187

您是否尝试过使用这些`$this->input->cookie()`方法而不是通过 php 将其设置为原始？

[http://codeigniter.com/user_guide/libraries/input.html](http://codeigniter.com/user_guide/libraries/input.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T10:37:51.293

好吧，灵魂似乎是，你不能在你自己的控制器中重定向到你的索引函数并用 Internet Explorer 检索那里的 cookie。当您重定向到该控制器中的另一个方法时，它正在工作=>`redirect('controllername/methodname);`

# java - Java - 如何查看请求是否来自某个域？

> ID：11319512
> 
> 赞同：1
> 
> 时间：2012-07-03T21:32:28.393
> 
> 标签：java, dns, request, ip, compare

我需要查看请求是否来自某个域（www.domain.com）。

到目前为止，我只知道如何获取请求的 IP 地址（通过使用*request.getRemoteHost()*方法）。问题是一个域可能映射到许多不同的 IP 地址（出于平衡目的），所以我**不能**这样做：

```
 request.getRemoteHost().equals("200.50.40.30") 
```

因为 DNS 在解析 www.domain.com 时可能会返回不同的 IP 地址。

我希望能够做这样的事情：

```
 request.getRemoteHost().equals("www.domain.com") 
```

但到目前为止，我对如何做到这一点一无所知（谷歌也没有帮助我）。

有人有什么想法吗？？

先感谢您！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T21:37:44.370

您可以将 IP 提供给[InetAddress](http://docs.oracle.com/javase/6/docs/api/java/net/InetAddress.html)并调用[getCanonnicalHostName()](http://docs.oracle.com/javase/6/docs/api/java/net/InetAddress.html#getCanonicalHostName%28%29)吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T03:19:47.403

在联系了我试图验证请求来自的域之后，他们向我提供了他们的服务器可能开始请求的整个 IP 范围。掌握了所有这些 IP 和掩码，这就是我为验证请求来自他们所做的操作：

```
 //Those IPs and Maks were provided by the domain
    String[] ipsAndMasks = { "AAA.BBB.CCC.DDD/26",
                         "EEE.BBB.CCC.DDD/24",
                 "FFF.BBB.CCC.DDD/29",
                 "GGG.BBB.CCC.DDD/22"};

    Collection<SubnetInfo> subnets = new ArrayList<SubnetInfo>();
    for (String ipAndMask : ipsAndMasks) {
        subnets.add(new SubnetUtils(ipAndMask).getInfo());
    }

    boolean requestIsComingFromTheCorrectDomain = false;
    String ipAddress = request.getRemoteAddr();
    for (SubnetInfo subnet : subnets) {
        if (subnet.isInRange(ipAddress)) {
            requestIsComingFromTheCorrectDomain = true;
            break;
        }
    } 
```

希望这段代码也能帮助别人！

# c++ - 在 C++ 中搜索合适的数据结构

> ID：11319513
> 
> 赞同：2
> 
> 时间：2012-07-03T21:32:30.450
> 
> 标签：c++, data-structures

建议一个合适的数据结构（在 C++ 中），以便解决下面提到的目的：

1.  在末尾插入一个元素。
2.  从末尾读取和删除一个元素。
3.  从头开始读取和删除元素。
4.  找出是否存在特定元素。

现在我正在使用向量..但是查找特定元素是否存在在向量中具有很大的时间复杂度，因为我的元素没有排序。

有没有比向量更好的数据结构来完成这个..如果是..那么是哪一个，请举个例子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T21:47:00.053

一种可能性是使用[std::set](http://www.cplusplus.com/reference/stl/set/)或[std::unordered_set](http://www.cplusplus.com/reference/stl/unordered_set/)这基本上是一个哈希表并自己维护元素之间的顺序。这将为您提供 O(log(n)) 或摊销的 O(1) 查找复杂性以及在开始/结束时不断插入/删除。在 Java 中，这称为 LinkedHashSet。不幸的是，STL 没有提供这种开箱即用的数据结构，但它应该很容易在 set/unordered_set 或 map/unordered_map 之上实现。

这是一段代码，说明了这个想法：

```
template <typename T>
class linked_set {
 private:
  // Comparator of values with dereferencing.
  struct value_deref_less {
    bool operator()(const T *lhs, const T *rhs) const {
      return *lhs < *rhs;
    }
  };

  typedef std::set<const T*, value_deref_less> Set;
  Set set_;              // Used for quick lookup
  std::deque<T> store_;  // Used for ordered storage. deque is used instead of
                         // vector because the former doesn't invalidate
                         // pointers/iterators when elements are pushed.

 public:
  void push_back(const T& value) {
    store_.push_back(value);
    set_.insert(&store_.back());
    // TODO: handle the case of duplicate elements.
  }

  // TODO: better provide your own iterator.
  typedef typename Set::iterator iterator;

  iterator find(const T& value) { return set_.find(&value); }

  // ...
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T21:59:29.483

You won't be able to have both fast insertions at the two sides AND fast searches with the same container, at least if you restrict the possibilities to the STL. More exotic non-standard containers may help.

But the approach I generally choose in these cases is to use two containers. For storing the elements, the obvious option is std::deque. For searches, make a `std::map<K,V>` in which V is an iterator for the deque. Since insert/delete in deques does not invalidate iterators that are not involved, it should be OK IF you always remember to synchronize the map and the deque (i.e. when you do an insert or delete on the deque, do that also on the map). Another simpler/safer option, instead of using iterators - if after a search in the map you just need the element found (you don't need to visit nearby elements, etc.) - is to have in both the deque and the map smart pointers to the actual objects (more specifically, shared_ptr). Again, you have to be careful to keep both in sync; although it won't be as catastrophic if they loose sync, probably the consistency of your program will be compromised, of course.

```
struct MyItem
{
    std::string name;
    int something;
    int another;
    MyItem(const std::string &name_, int something_, int another_)
        :name(name_), something(something_), another(another_) {}
};

class MyContainer
{
    public:
        typedef std::shared_ptr<MyItem> MyItemPtr;

        void push_front(MyItemPtr item)
        {
            deque.push_front(item);
            assert(map.find(item->name) == map.end());
            map[item->name] = item;
        }
        void push_back(MyItemPtr item)
        {
            deque.push_back(item);
            assert(map.find(item->name) == map.end());
            map[item->name] = item;
        }
        MyItemPtr pop_front()
        {
            item = deque.front();
            deque.pop_front();
            map.erase(item->name);
            return item;
        }
        MyItemPtr pop_back()
        {
            item = deque.back();
            deque.pop_back();
            map.erase(item->name);
            return item;
        }
        MyItemPtr find(const std::string &name)
        {
            std::map<std::string, MyItemPtr>::iterator iter = map.find(name);
            if (iter == map.end())
                return MyItemPtr();
            else
                return iter->second;
        }

    private:
        std::deque<MyItemPtr> deque;
        std::map<std::string, MyItemPtr> map;
}; 
```

To use it:

```
MyContainer container;

MyContainer::MyItemPtr a(new MyItem("blah", 1, 2));
container.push_back(a);
MyContainer::MyItemPtr b(new MyItem("foo", 5, 6));
container.push_front(b);

MyContainer::MyItemPtr f = container.find("blah");
if (f)
    cout << f->name << ", " << f->something << ", " << f->another; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T21:37:29.170

您应该从 a 开始，`std::map`看看对数复杂度是否合适。

B+Tree 会稍微复杂一些，需要您自己的实现或研究才能找到开源实现。但考虑到您引用（搜索）的要求和痛点，如果`std::map`仍然证明不足，这是一个合理的选择。

例如，您可以将一个元素的值映射到它的迭代器 a`std::list`中。所有操作都是 O(lg n) 和`std::map`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T21:45:52.543

您可以保留`vector`，也可以使用 a`std::set`进行快速查询。

该集合不足以从开头/结尾删除元素，因为您并不真正知道您插入的第一个/最后一个元素。您可以保留对这些元素的引用，但为了支持删除，您将需要下一个元素，依此类推，这会降级为使用更多容器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T22:00:01.113

If there is a lot of insert/delete a linked list would be more appropriate.
Beware that a linked list (single or double) will have quite an overhead (usually the size of a pointer, but implementation vary).

The standard template library offers you std::list.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-03T21:36:38.433

使用`std::deque`. 这是一个双端队列，它也用作标准接口的容器，例如`std::stack`.

它通常使用准链表实现，并且在边缘处的插入和删除具有分摊的 O(1) 时间复杂度。

# php - 在启用安全模式的情况下使用 file_exists

> ID：11319515
> 
> 赞同：1
> 
> 时间：2012-07-03T21:32:38.367
> 
> 标签：php, webserver

我正在尝试检查服务器上是否存在文件。我遇到的困难是`file_exists`对于我知道服务器上存在的文件返回 false 。

我的服务器`safe_mode = on`在 php.ini 中配置。因此，我添加了包含我要检查使用的文件的目录

```
include_path=".:/path/to/dir" 
```

我还添加了路径

```
safe_mode_include_dir = /path/to/dir 
```

`file_exists("/path/to/dir/file")`仍然返回 FALSE。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T22:46:44.160

如果您有能力这样做，请禁用`safe_mode`. 它已被 PHP 开发团队弃用，并且自 PHP 5.4.0 起已消失，因此您迟早需要停止依赖它。

如果必须使用`safe_mode`，请将目录添加到`open_basedir`，而不是`include_path`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T22:24:55.530

抱歉，但无法绕过安全模式限制——这就是安全模式的意义所在。如果您想包含该文件，如果您设置了一个允许访问它的路径，您仍然可以这样做`safe_mode_include_dir`，但是没有办法让`stat()`相关函数使用它。

**编辑**

一个可怕且极其危险且不可靠的解决方法可能是：

```
function file_exists_safemode ($file) {

  $oldErrorLevel = error_reporting(E_ALL);
  $oldDisplayErrors = ini_get('display_errors');
  ini_set('display_errors', 1);

  ob_start();
  include $file;
  $result = ob_get_clean();

  ini_set('display_errors', $oldDisplayErrors);
  error_reporting($oldErrorLevel);

  return strpos($result, 'failed to open stream') === FALSE;

} 
```

...但它在很多方面都很讨厌，我绝对**不**推荐这种方法。

# php - 奇怪的错误运行 Behat

> ID：11319518
> 
> 赞同：1
> 
> 时间：2012-07-03T21:32:55.027
> 
> 标签：php, symfony1, jenkins, behat

有没有人在运行 Behat 时遇到以下错误？在我看来，这可能是访问权限问题，但错误消息非常模糊。提到的文件不存在，这就是我猜测访问权限的原因。

但问题是，如果脚本是通过 Jenkins 运行的，那么临时文件就是`C:/Windows/Temp/sf2DA1B.tmp`我无法想象两者都是访问权限问题。

```
PHP Warning:  DOMDocument::schemaValidateSource(): Invalid Schema in phar://C:/Program Files (x86)/Behat/behat.phar/vendor/symfony/dependency-injection/Symfony/Component/DependencyInjection/Loader/XmlFileLoader.php on line 363

  [InvalidArgumentException]

  [ERROR 4] Document is empty (in file:///C:/Users/vaillancourt/AppData/Local/Temp/2/sf2D71B.tmp - line 1, column 1)

  [ERROR 4] Start tag expected, '<' not found (in file:///C:/Users/vaillancourt/AppData/Local/Temp/2/sf2D71B.tmp - line 1, column 1)

  [ERROR 3067] Element '{http://www.w3.org/2001/XMLSchema}import': Failed to parse the XML resource 'file:///C:/Users/vaillancourt/AppData/Local/Temp/2/sf2D71B.tmp'. (in in_memory_buffer - line 8, col
umn 0) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T21:48:45.080

你可以做的是尝试从这里手动下载“services-1.0.xsd” - [http://symfony.com/schema/dic/services/services-1.0.xsd](http://symfony.com/schema/dic/services/services-1.0.xsd)

将文件放入 $PATH_TO_SYMFONY2/Component/DependencyInjection/Loader/schema/dic/services。如果你足够幸运，它会起作用——我的一个测试设置就是这种情况。

# postgresql - PostGIS 转换问题

> ID：11319519
> 
> 赞同：1
> 
> 时间：2012-07-03T21:32:59.617
> 
> 标签：postgresql, postgis

我在使用 PostGIS (1.5.4) 数据时遇到问题。可能是我对这项技术不够熟悉，无法看到明显的情况（我是一名拥有近 4 小时经验的普通专家），但我遇到了一个我无法通过 Google 解决的错误。

我有一个包含多边形数据的表（是的，我检查过；列类型是几何，而不是多边形——Postgres 本机类型）。当我尝试对表运行查询以查找哪个形状包含特定问题时，就会出现问题。

我正在使用以下查询：

```
SELECT * 
FROM geo_shape 
WHERE ST_Contains(geoshp_polygon, POINT(-97.4388046000, 38.1112251000)); 
```

我收到的错误是“错误：函数 st_contains(geometry, point) 不存在”。我尝试使用 CAST() 函数，但得到“错误：无法将类型几何转换为多边形”。我猜这个问题与数据的存储方式有关——PGAdmin 将其显示为十六进制数据。我凭直觉尝试使用`ST_GeomFromHEXEWKB()`，但收到“错误：函数 st_geomfromhexewkb(geometry) 不存在”。

我对这里的问题感到相当困惑，所以任何想法都将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T03:44:30.710

您不能将 PostgreSQL 的[几何数据类型](http://www.postgresql.org/docs/current/static/datatype-geometric.html)与 PostGIS 的几何类型混合，这就是您看到该错误的原因。我建议使用[PostGIS 的几何构造函数](http://postgis.refractions.net/docs/reference.html#Geometry_Constructors)之一来提供帮助：

```
SELECT * 
FROM geo_shape 
WHERE ST_Contains(geoshp_polygon,
                  ST_SetSRID(ST_MakePoint(-97.4388046000, 38.1112251000),4326); 
```

[或者一种非常快速的文本方式是将众所周知的文本](http://en.wikipedia.org/wiki/Well-known_text)拼凑起来：

```
SELECT 'SRID=4326;POINT(-97.4388046000 38.1112251000)'::geometry AS geom; 
```

（这将输出几何类型的 WKB）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T21:49:54.267

st_contains 需要一个 geom,geom 作为参数...

试试这个...

```
SELECT * FROM geo_shape 
WHERE ST_Contains(geoshp_polygon,
      GeomFromText('POINT(-97.4388046000 38.1112251000)')); 
```

编辑更正，发布点数据。ST_geomfromtext 会起作用，有点好奇有什么区别

# php - PHP - 通过 file_get_contents 发布 JSON

> ID：11319520
> 
> 赞同：28
> 
> 时间：2012-07-03T21:33:01.470
> 
> 标签：php, json, rest, post, file-get-contents

我正在尝试将 JSON 内容发布到远程 REST 端点，但是“内容”值在交付时似乎为空。所有其他标头等都被正确接收，并且 Web 服务使用基于浏览器的测试客户端成功测试。

我在下面指定“内容”字段的语法是否有问题？

```
$data = array("username" => "duser", "firstname" => "Demo", "surname" => "User", "email" => "example@example.com");   
$data_string = json_encode($data);

$result = file_get_contents('http://test.com/api/user/create', null, stream_context_create(array(
'http' => array(
'method' => 'POST',
'header' => array('Content-Type: application/json'."\r\n"
. 'Authorization: username:key'."\r\n"
. 'Content-Length: ' . strlen($data_string) . "\r\n"),
'content' => $data_string)
)
));

echo $result; 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-03T21:41:57.343

这是我一直使用的代码，它看起来非常相似（尽管这当然适用于 x-www-form-urlencoded）。也许你`username:key`需要`base64_encode`'d。

```
function file_post_contents($url, $data, $username = null, $password = null)
{
    $postdata = http_build_query($data);

    $opts = array('http' =>
        array(
            'method'  => 'POST',
            'header'  => 'Content-type: application/x-www-form-urlencoded',
            'content' => $postdata
        )
    );

    if($username && $password)
    {
        $opts['http']['header'] = ("Authorization: Basic " . base64_encode("$username:$password"));
    }

    $context = stream_context_create($opts);
    return file_get_contents($url, false, $context);
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2020-08-24T05:35:09.307

问题是关于`json`，为什么接受的答案是关于`x-www-form`？

`Json`有很多很酷的事情要解决，比如`utf8_encode`

```
function my_utf8_encode(array $in): array
{
    foreach ($in as $key => $record) {
        if (is_array($record)) {
            $in[$key] = my_utf8_encode($record);
        } else {
            $in[$key] = utf8_encode($record);
        }
    }

    return $in;
}

function file_post_contents(string $url, array $data, string $username = null, string $password = null)
{
    $data     = my_utf8_encode($data);
    $postdata = json_encode($data);
    if (is_null($postdata)) {
        throw new \Exception('decoding params');
    }

    $opts = array('http' =>
        array(
            'method'  => 'POST',
            'header'  => 'Content-type: application/json',
            'content' => $postdata
        )
    );

    if (!is_null($username) && !is_null($password)) {
        $opts['http']['header'] .= "Authorization: Basic " . base64_encode("$username:$password");
    }

    $context = stream_context_create($opts);

    try {
        $response = file_get_contents($url, false, $context);
    } catch (\ErrorException $ex) {

        throw new \Exception($ex->getMessage(), $ex->getCode(), $ex->getPrevious());
    }
    if ($response === false) {

        throw new \Exception();
    }

    return $response;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-03-02T17:04:53.627

早前的回应

```
function file_post_contents($url, $data, $username = null, $password = null) {
$postdata = http_build_query($data);

$opts = array('http' =>
    array(
        'method'  => 'POST',
        'header'  => 'Content-type: application/x-www-form-urlencoded',
        'content' => $postdata
    )
);

if($username && $password)
{
    $opts['http']['header'] = ("Authorization: Basic " . base64_encode("$username:$password"));
}

$context = stream_context_create($opts);
return file_get_contents($url, false, $context);} 
```

是不正确的。此功能有时有效，但如果您不使用 application/x-www-form-urlencoded 的 Content-type 并传入用户名和密码，它会不准确并且会失败。

它对作者有用，因为 application/x-www-form-urlencoded 是默认的内容类型，但他对用户名和密码的处理覆盖了之前的内容类型声明。

这是修正后的函数：

```
function file_post_contents($url, $data, $username = null, $password = null){
$postdata = http_build_query($data);

$opts = array('http' =>
    array(
        'method'  => 'POST',
        'header'  => "Content-type: application/x-www-form-urlencoded\r\n",
        'content' => $postdata
    )
);

if($username && $password)
{
    $opts['http']['header'] .= ("Authorization: Basic " . base64_encode("$username:$password")); // .= to append to the header array element
}

$context = stream_context_create($opts);
return file_get_contents($url, false, $context);} 
```

注意这一行： $opts['http']['header' .= （点等于附加到数组元素。）

# android - “重置” Robotium searchText

> ID：11319524
> 
> 赞同：0
> 
> 时间：2012-07-03T21:33:15.730
> 
> 标签：android, testing, junit, automation, robotium

我在这里有一个独特的情况。我正在使用 Robotium 测试应用程序，并且在“黑盒”条件下执行此操作。在我的测试中，我有一个标题为“全部”的选项卡，它位于屏幕顶部，我想测试当它被单击时，所有可用的项目都会列出。但是，会发生什么，而不是单击“全部”选项卡，而是单击了名为“高级呼叫管理器”的应用程序。我认为这是因为“全部”是“呼叫”的一部分，并且由于 Robotium 的工作方式，即使它是“呼叫”的一部分，它也会点击“全部”。看了我的代码，你可能明白我的问题是什么了。

所以我的问题是：

有没有办法“重置”Robotium，以便在搜索文本时从页面顶部开始？这是我的代码：

```
solo.waitForText("all"); 
        bw.write("Verify presence of 'all' filter on " + BUSINESS + "-COMMUNICATION page\",\"");
        if(solo.searchText("all")==false){
            bw.write("FAILED \",\" \'all\' filter not found \"\n\"");               
        }else if(solo.searchText("all")==true){
            bw.write("PASSED \",\" \'all\' filter present\"\n\"");
            bw.write("Verify functionality of 'all' filter\",\""); 
            solo.clickOnText("all"); 
            solo.sleep(5000); 
            solo.takeScreenshot(); 
            bw.write("Screenshot taken\",\"" +"See photo: "+ photoFormat.format(new Date()).toString()+"\"\n\"");

        } 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-22T13:00:30.317

```
ViewGroup class will be helpful in this case as you are using tabs in your code.Now find the view using getChildAt() method.

ViewGroup tabs = (ViewGroup) solo.getView(android.R.id.tabs);
View viewYouWantToDoStuffWith = tabs.getChildAt(x); //change x to the index you want.

Now you can perform the click event on tab like below.
solo.clickOnView(viewYouWantToDoStuffWith); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T22:08:55.367

传递给 solo.clickOnText() 的字符串实际上是一个正则表达式。所以我认为你可以通过传递一个匹配'all'但不匹配'call'的RegEx来解决你的问题。

# ios - 无法在 iOS 上获得 Facebook publish_action 权限

> ID：11319530
> 
> 赞同：6
> 
> 时间：2012-07-03T21:33:50.637
> 
> 标签：ios, xcode, facebook, facebook-graph-api, facebook-ios-sdk

我已经花了几个小时在这上面，但无法让它工作。基本上，我只想要我的应用程序中的一个按钮，它会在 Facebook 上“点赞”自己。我已经在开发 Facebook 上创建了该应用程序，并有一个关联的应用程序页面。在我的代码中，我请求这些权限：

```
_permissions =  [NSArray arrayWithObjects:@"publish_stream", @"publish_actions", @"user_birthday", nil]; 
```

我可以很好地检索个人资料图片，但是当我尝试使用此代码“喜欢”时：

```
NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                       _facebook.accessToken, @"access_token",
                                       nil];
        [_facebook requestWithGraphPath:@"329756493773381/og.likes" andParams:params andHttpMethod:@"POST" andDelegate:self]; 
```

我收到此错误响应：

```
(facebookErrDomain error 10000.)" UserInfo=0x20090590 {error={
    code = 200;
    message = "(#200) Requires extended permission: publish_actions";
    type = OAuthException;
}} 
```

登录该应用程序时，Facebook 要求我允许查看我的生日，并告诉我它将代表我发布，但它似乎没有获得 publish_actions 权限。

有什么我需要做的吗？

我看到 Temple Run 有一个 Facebook Like 按钮，按下它会提供奖励金币。这是我希望达到的。

编辑 - - - -

我已将权限更改为 @"publish_actions", @"user_birthday" 现在身份验证对话框说

> “这个应用程序可能会代表您发布，包括您喜欢的对象等等”

这似乎是 publish_actions 权限，但是我仍然收到错误

> message = "(#200) 需要扩展权限：publish_actions";

我改变了这一行：

```
[_facebook requestWithGraphPath:@"329756493773381/og.likes" andParams:params andHttpMethod:@"POST" andDelegate:selrf]; 
```

对此：

```
[_facebook requestWithGraphPath:@"329756493773381/og.likes" andDelegate:self]; 
```

我现在确实收到了回复，尽管它没有发布“喜欢”

这是结果响应：

```
{
    data =     (
    );
    paging =     {
        next = "https://graph.facebook.com/329756493773381/og.likes?sdk=ios&sdk_version=2&access_token=BAAGeAp3ZBGwoBAPICjlgB5zK0YECyP8yElf8hJoMrx8Qs4vjeZAK5PlXFAVbGM1JyXHE0wZBvU0aBeCzCUTZBejQgoJ44CAIQsrG64TfrHdxjMqWD&format=json&offset=25&limit=25";
    };
} 
```

知道接下来要尝试什么吗？

编辑 2 --------------- 我在这方面取得了进展。我已经像这样将用户 ID 添加到图形请求中

```
NSString *graphPath = [NSString stringWithFormat:@"%@/og.likes",facebookID]; 
```

并使用了这些参数

```
NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                       @"AAAGeAp3ZBGwoBABvKjsPZAoQQNG9cDPJI2v2TI8acyyPSNtm9ZBkfydHqVZAjSKWSbLuvFwxyxSrCts7kFZCnh7Y6f5PFNlWb6smF8XF33wlRZBgfLyhT1", @"access_token",
                                       @"http://samples.ogp.me/329756493773381", @"object",
                                       nil]; 
```

现在我的时间轴上出现了类似的内容:-) 我使用的是 Facebook 登录提供的访问令牌，但似乎图形对象提供的访问令牌不同。

现在，我看到的类似的模式是这样的：

> Darren 喜欢 MyAPP 上的对象

是否有可能将其作为

> Darren 喜欢 MyAPP 并链接到应用程序 Facebook 页面？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T10:29:36.090

检查您是否已完成以下步骤：

[https://developers.facebook.com/docs/opengraph/tutorial/](https://developers.facebook.com/docs/opengraph/tutorial/)

“注意：此权限的用户提示将显示在增强身份验证对话框的第一个屏幕中，并且不能作为身份验证流程的一部分撤销。” - 关联

如果你还没有，试试这个：

Auth Dialog -> 配置 Facebook 如何将用户引用到您的应用程序 -> 添加 publish_actions 权限。

[https://developers.facebook.com/docs/opengraph/authentication/](https://developers.facebook.com/docs/opengraph/authentication/)

“要启用新的身份验证对话框，请转到应用仪表板，然后在应用的高级部分启用增强的身份验证对话框设置。” -关联

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T09:03:03.120

这似乎与我在这个 SO 问题上遇到的问题相同： [Facebook iOS SDK 3.0, implement like action on a url?](https://stackoverflow.com/questions/12112847/facebook-ios-sdk-3-0-implement-like-action-on-a-url)

但是，如果您想在应用程序中为您的 facebook 页面点赞，则在 Objective C 中无法做到这一点。只有使用您可以在此处生成的 javascript Like 按钮： [https ://developers.facebook.com/docs/reference/插件/喜欢/](https://developers.facebook.com/docs/reference/plugins/like/)

Temple Run 的做法是在 web 视图中显示 Like 按钮，因此他们的 Like 按钮实际上在他们的服务器上，这可能是一个丑陋的 hack，但可以用于喜欢一个页面。

# java - 为什么 printwriter 将我的消息分成两个字符串？

> ID：11319535
> 
> 赞同：2
> 
> 时间：2012-07-03T21:34:38.740
> 
> 标签：java, string, io

我正在尝试创建一个 java 程序来导致程序[Vulnserver](http://grey-corner.blogspot.com/2010/12/introducing-vulnserver.html)中的缓冲区溢出。

每当我发送一个超过 4094 个字符的字符串时，它都会将命令作为两个字符串接收。它再次将其拆分为三个字符串，长度为 8188 个字符等。

为什么这样做？我该如何阻止它？我正在尝试发送命令 TRUN，后跟 5000 A。它不是接收程序，因为它与 perl 程序一起工作。

```
 package fuzzer;

 import java.io.FileNotFoundException;
 import java.io.PrintWriter;
 import java.net.Socket;
 import java.util.Scanner;

 public class VulnserverFuzz {

public static Socket s;
private static String Command = "TRUN ";//Command TRUN

public static void main(String[] args) throws FileNotFoundException{

    PrintWriter pri = null;
    try {
        s = new Socket("127.0.0.1", 9999);
        pri = new PrintWriter(s.getOutputStream(), true);

    } catch (Exception e) {e.printStackTrace();}
    (new Thread(new VulnThread())).start();//Starts thread to listen for response

    Scanner input = new Scanner(System.in);
    for(int k=0; k<5000; ++k){Command += "A";}// Add 5099 A's to Command

    String bre = (Command);
    pri.println(bre);

    pri.flush();

  }
 } 
```

响应：
TRUN 完成
未知命令

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T11:20:02.493

我没有阅读手册 - 但我认为您从服务器得到的响应是单个命令的响应。

你跑了`TRUN AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA...`——所以它试图运行命令`AAAAAAAAAAAAAAA...`。

响应是： `TRUN Completed`- 表示它运行了`TRUN`命令。
`Unknown Command`- 表示指定为参数 ( `AAAAAAAAAA...`) 的命令未知。

您的代码没有理由拆分请求。

尝试发送命令`TRUN AAA`进行验证 - 你应该得到相同的输出。

# android - Premium/Lite 版本最有效地使用 Android 库？

> ID：11319536
> 
> 赞同：1
> 
> 时间：2012-07-03T21:34:41.613
> 
> 标签：android, android-layout, android-library

我正在尝试创建我的应用程序的 Lite 和 Premium 版本。我没有创建应用程序的两个版本，而是尝试使用两个版本都可以访问的库。

我想知道是否有一种方法可以在不让精简版访问高级图像和 xml 布局的情况下做到这一点。

有没有人有指南或示例，其中精简版的内容少于高级版以及将内容放在哪里？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T21:48:36.327

我敢肯定您已经考虑过这一点，但是在应用程序内部拥有一个用户可以在内部使用来访问高级内容的 IAP 不是更简单吗？

至于你的问题，我在这个主题上找到了一些博客。他们似乎都提倡将精简版和高级版拆分为单独的软件包并编码 Android 以识别用户正在使用的版本的想法。

[http://blog.donnfelker.com/2010/08/05/howto-android-full-and-lite-versions/](http://blog.donnfelker.com/2010/08/05/howto-android-full-and-lite-versions/)

[http://nexus.zteo.com/blog/2010/10/19/3238/](http://nexus.zteo.com/blog/2010/10/19/3238/)

[http://bitowl.wordpress.com/2011/07/06/tutorial-how-to-make-full-and-lite-versions/](http://bitowl.wordpress.com/2011/07/06/tutorial-how-to-make-full-and-lite-versions/)

希望这可以帮助

# android - 字段槽错误的错误请求

> ID：11319537
> 
> 赞同：0
> 
> 时间：2012-07-03T21:34:42.063
> 
> 标签：android, sqlite

```
name = namebox.getText().toString();
db.open();
Cursor c1 = db.executequery("SELECT _id FROM " + DATABASE_TABLE_CUSTOMER + " where name='" +name+"'" );
_id = c1.getInt(c1.getColumnIndex("name"));
Cursor c2 = db.executequery("SELECT amount FROM " + DATABASE_TABLE_CUSTOMER
        +
        " where _id=" + _id);
Double amount = c2.getDouble(c2.getColumnIndex("amount"));
Cursor c3 = db.executequery("SELECT arrear FROM " + DATABASE_TABLE_CUSTOMER + " where CUSTOMER_ID =" + _id);
arrear = c3.getDouble(c3.getColumnIndex("arrear"));
db.close(); 
```

这给了我一个错误的字段错误请求。我的适配器上的 executequery 方法如下所示：

```
public Cursor executequery(String query) throws SQLException
{
    Cursor mCursor = db.rawQuery(query, null);
    if(mCursor != null){
        mCursor.moveToFirst();
    }
    return mCursor;
} 
```

谁能告诉我我做错了什么。我对此很陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T21:49:51.367

你在处理`Cursor1`. `getColumnIndex("name")`不能成功，因为选择的是 ID，而不是名称。它应该是`getColumnIndex("_id")`.

# jquery - jVectormap onRegionOver 回调

> ID：11319538
> 
> 赞同：0
> 
> 时间：2012-07-03T21:34:48.913
> 
> 标签：jquery, jvectormap

我不是 jQuery 人，但在实现 jVectormap 时，我在地图最初加载时包含了一个 onRegionOver 函数。但是，它似乎只触发一次，即#content div 的内容正确显示一次，但在将光标移动到其他状态时仍然存在。我错过了什么？TIA。

```
<script>
$(function(){
  $('.jvectormap').vectorMap({
  map: 'us_en',
  values: associateData,
  scaleColors: ['#C8EEFF', '#0071A4'],
  normalizeFunction: 'polynomial',
  hoverOpacity: 0.7,
  hoverColor: false,
  onLabelShow: function(e, el, code){
  el.html('<strong>'+el.html()+'</strong><br />'+associateData[code]);
  },
  onRegionOver: function(e, code){
    $("#content").replaceWith(contentData[code]);
  },
  markers: [
          {latLng: [43.30, -75.61], name: 'Dans Automotive, Taberg NY', r: 3, fill: 'yellow'},
          {latLng: [41.16, -95.93], name: 'Yecks Auto Repair, Bellevue NE', r:3, fill: 'yellow'},
          {latLng: [41.36, -81.85], name: 'Parkway Express, Berea OH', r:3, fill: 'yellow'},
          {latLng: [41.31, -81.83], name: 'Strongsville Express, Strongsville OH', r:3, fill: 'yellow'},
      {latLng: [41.34, -81.53], name: 'Nordonia Tire &amp; Service, Northfield OH', r:3, fill: 'yellow'}
        ],
        onMarkerLabelShow: function(event, label, index){
          console.log('label-show', label, index);
        },
        onMarkerOver: function(event, index){
          console.log('marker-over', index);
        },
        onMarkerOut: function(event, index){
          console.log('marker-out', index);
        },
        onMarkerClick: function(event, index){
      var url = "http://www.google.com";
      $(location).attr('href',url);
        }
    });
  })
  </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T10:18:51.200

有了这个字符串

```
$("#content").replaceWith(contentData[code]); 
```

`#content`你用其他东西替换元素。之后该`#content`元素不再存在于页面上，并且无法更改。您可能想改用`html`方法：

```
$("#content").html(contentData[code]); 
```

# wso2 - WSO2 身份服务器 - 忘记/重置/电子邮件密码

> ID：11319552
> 
> 赞同：0
> 
> 时间：2012-07-03T21:35:43.230
> 
> 标签：wso2, wso2is

WSO2 身份服务器是否支持允许用户重置或发送密码提醒电子邮件的功能？

我在在线文档中看不到任何关于此功能的信息，也看不到产品。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:19:51.160

我需要对我之前的答案做一个小的更正。目前该功能默认不包含在产品中，您需要通过功能管理器添加。

谢谢

蒂利尼

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T09:57:18.310

WSO2 产品已提供此功能。您可以使用 WSO2 身份服务器快照构建 [1] 来检查这一点。此 [2] 是为 wso2 stratos 编写的，但在碳产品中的想法是相似的。

[1] [http://wso2.org/bamboo/browse/WSO2CARBON-PRODUCTS-266/artifact/JOB1/IS](http://wso2.org/bamboo/browse/WSO2CARBON-PRODUCTS-266/artifact/JOB1/IS)

[2] [https://stratoslive.wso2.com/carbon/admin-mgt/docs/userguide.html](https://stratoslive.wso2.com/carbon/admin-mgt/docs/userguide.html)

[3] 仅供参考：http: [//old.nabble.com/The-forgot-password-functionality-is-included-into-the-products-td33184156.html](http://old.nabble.com/The-forgot-password-functionality-is-included-into-the-products-td33184156.html)

希望这可以帮助。

谢谢

蒂利尼

# xamarin.ios - MonoTouch RedLaser SDK 对象

> ID：11319553
> 
> 赞同：0
> 
> 时间：2012-07-03T21:35:46.070
> 
> 标签：xamarin.ios

我正在尝试将 RedLaser SDK 3.30 与 MonoTouch 一起使用。这是我正在使用的代码：

[https://github.com/mono/monotouch-bindings/tree/master/RedLaser](https://github.com/mono/monotouch-bindings/tree/master/RedLaser)

当我单击迅雷按钮扫描条形码时，我的应用程序在我的 iPod touch 上崩溃。我正在使用ARM7。这是我的崩溃日志：

```
wait_fences: failed to receive reply: 10004003
0   RedLaserSample                      0x01669015 mono_handle_native_sigsegv + 244
1   RedLaserSample                      0x01681cf1 sigabrt_signal_handler + 112
2   libsystem_c.dylib                   0x309cf7ed _sigtramp + 48
3   libsystem_c.dylib                   0x309c520f pthread_kill + 54
4   libsystem_c.dylib                   0x309be29f abort + 94
5   libc++abi.dylib                     0x367cef6b abort_message + 46
6   libc++abi.dylib                     0x367cc34d _ZL17default_terminatev + 24
7   libobjc.A.dylib                     0x3414036f _objc_terminate + 170
8   libc++abi.dylib                     0x367cc3c5 _ZL19safe_handler_callerPFvvE + 76
9   libc++abi.dylib                     0x367cc451 _ZdlPv + 0
10  libc++abi.dylib                     0x367cd79f __cxa_throw + 122
11  RedLaserSample                      0x00040565 _ZN5zxing6qrcode19FinderPatternFinder18selectBestPatternsEv + 172
12  RedLaserSample                      0x000416a5 _ZN5zxing6qrcode19FinderPatternFinder4findERKNS_11DecodeHintsE + 512
13  RedLaserSample                      0x0003a8b3 _ZN5zxing6qrcode8Detector6detectERKNS_11DecodeHintsE + 366
14  RedLaserSample                      0x00046c53 _ZN5zxing6qrcode12QRCodeReader6decodeENS_3RefINS_12BinaryBitmapEEENS_11DecodeHintsE + 130
15  RedLaserSample                      0x0004edcb _ZN5zxing6Reader6decodeENS_3RefINS_12BinaryBitmapEEE + 458
16  RedLaserSample                      0x00055be9 -[FormatReader decode:] + 116
17  RedLaserSample                      0x00013749 -[ZXingDecoder findCodesInBitmap:bytesPerRow:width:height:] + 656
18  RedLaserSample                      0x0005b6df -[BarcodePhotoEngine zxingFindBarcodesInPixmap:] + 222
19  RedLaserSample                      0x00053551 __38-[BarcodeEngine findBarcodesInPixMap:]_block_invoke_066 + 76
20  libdispatch.dylib                   0x35737c59 _dispatch_call_block_and_release + 12
21  libdispatch.dylib                   0x35742cab _dispatch_queue_drain + 274
22  libdispatch.dylib                   0x35742b19 _dispatch_queue_invoke$VARIANT$up + 36
23  libdispatch.dylib                   0x3574378b _dispatch_worker_thread2 + 214
24  libsystem_c.dylib                   0x30980dfb _pthread_wqthread + 294
25  libsystem_c.dylib                   0x30980cd0 start_wqthread + 8 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T16:50:20.557

在当前的 SDK 3.3 版中，QR 码存在问题。当应用程序启动时，单击二维码按钮，它说不。现在扫描正常。

# asp.net - 写入文件时拒绝访问。为什么？

> ID：11319556
> 
> 赞同：1
> 
> 时间：2012-07-03T21:36:38.237
> 
> 标签：asp.net, permissions

我开发了一个 ASP.NET v4 Web 应用程序，我试图将其写入 webroot 中的文件夹。

对于我的一生，我无法让 Windows 7 允许它写入文件，每次我都会收到 Access is Denied 错误。

我在文件夹上尝试过的是

```
attrib -r /foldernameandpath
attrib -r -s /foldernameandpath
Removing Check from ReadOnly attribute in folder properties
Changed owner to folder to current user whom is also the admin
Changed owner to Everyone
Adding Everyone user to folder with all permissions
Changing the folder to the Public Document directory
Changing to the root of the C drive (Out of desperation) 
```

似乎没有任何效果，我想做的就是测试写入是否有效。

现在我知道系统工作正常并且写得很好，因为我在第二台机器上有同样的网络应用程序，将 PDF 写入 C 驱动器没有问题。这第二台机器我只是无法让它允许写入。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T21:47:10.150

哦，为了所有神圣的事物的爱，请放下键盘和鼠标，停止你正在做的事情。你列表中的一些行为让我很害怕。你列出的所有行为很可能是无用的，或者充其量是非常随机的。作为一名 Web 开发人员，您不必为更改文件夹的所有权而烦恼，尤其是 Web 服务器通常使用的 Web 根文件夹。当你这样做时，你最终会来到一个黑暗、寒冷和孤独的地方。上帝只知道你采取了哪些其他绝望的措施。为了您自己的利益，我建议您进行系统还原甚至重新安装系统，以确保您处于健康状态。

让我们退一步，试着理清你在做什么。
首先：您要写入的路径是什么？
第二：您是直接在 Visual Studio 中还是在 II 中运行此应用程序？

如果您正在执行第一个选项，那么您当前的用户帐户就是尝试写入相关路径的帐户。你在那里有写权限吗？
您可以尝试的一件事是使用提升的权限启动 Visual Studio，看看是否可行。如果您在 IIs 中运行，则它是需要写入权限的关联池帐户。您是否正在冒充？如果是这样，请确保模拟帐户具有适当的权限。

您应该只写入应用程序路径中的预定义文件夹，例如 ..\App_Data。

找出您正在运行的帐户并确定您尝试写入的路径的最简单方法是启动`SysIntenals` [进程监视器](http://technet.microsoft.com/en-us/sysinternals/bb896645)`access denied`并找到带有结果的条目。选择该条目的属性并找出哪个帐户尝试执行写入操作。确定后，右键单击有问题的文件夹并授予适当的帐户写入权限。

# hadoop - JobTRacker 是否知道在实际数据传输之前的 shuffle 阶段向每个 reduce 任务传输了多少数据

> ID：11319558
> 
> 赞同：0
> 
> 时间：2012-07-03T21:36:47.210
> 
> 标签：hadoop, reducers

在 Hadoop 中，JobTracker 能否在实际数据移动之前知道每个 ReduceTask 必须检索多少数据（在 shuffle 阶段）？我正在尝试在洗牌阶段收集有关数据移动的统计信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T22:58:38.787

简而言之：它是否知道——也许，它是否使用了这些信息——不。

根据您对`mapred.reduce.slowstart.completed.maps`配置属性的配置，reduce 任务可以在大多数 map 任务完成之前启动，因此调度程序实现在调度 reduce 任务时不会考虑此信息。

也许实现您自己的调度程序，您可以从一些计数器统计信息中检索此信息，但您必须挖掘源代码，我不确定您是否可以访问计数器。

作为替代方案，您能否不使用 map/reduce 计数器和/或任务尝试的日志（也可能是任务跟踪器日志）？

# variables - Prolog中不同变量的混合值

> ID：11319560
> 
> 赞同：0
> 
> 时间：2012-07-03T21:37:00.420
> 
> 标签：variables, prolog, mixing

我在 Prolog 中的一个简单程序遇到了一些问题。我有两个不同的组，我想将一个组的一个元素附加到另一个组，而不直接修改事实（例如：多伦多 = 美国）。

```
country(usa,    northamerica).
country(canada, northamerica).

city​​(chicago,    usa).
city​​(newyork,    usa).
city​​(losangeles, usa).
city​​(dallas,     usa).
city​​(miami,      usa).
city​​(lasvegas,   usa).
city​​(seattle,    usa).

city​​(toronto,    canada).
city​​(vancouver,  canada).
city​​(ottawa,     canada).
city​​(richmond,   canada).
city​​(winnipeg,   canada).
city​​(edmundston, canada).
city​​(hamilton,   canada).

trip(john, usa).
trip(jack, canada). 
```

在这个例子中，约翰去了美国的七个城市，而杰克去了加拿大的其他七个城市。

然而，约翰最近去了多伦多。我想达到以下结果：

```
? - trip_plus(X, john).

X = chicago;
X = newyork;
X = losangeles;
X = dallas;
X = miami;
X = lasvegas;
X = seattle;
X = toronto;

?- yes 
```

我尝试了很多次都没有成功得到上面的结果。我能得到的最接近的是使用以下内容：

```
country(C).
city(Y).
trip(T).
trip_plus(X, T) :- city(Y, C), trip(T, C). 
```

我究竟做错了什么？

谢谢小伙伴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:51:01.847

我不确定我是否正确理解了您：您想创建一个谓词来列出某人访问过的所有城市？我会将我的解决方案分为三种情况。

首先，我们将列出所有直接“到城市旅行”，例如`trip(john, toronto)`，`trip(john, newyork)`。

```
trip_plus(City, Who) :-
  % we grab all the trip(*, *) pairs
  trip(Who, City),
  % and we leave only cities
  city(City, _). 
```

然后我们要列出“乡村旅行”中的所有城市，例如`trip(john, usa)`：

```
trip_plus(City, Who) :-
  % again, we grab all the trip(*, *) pairs
  trip(Who, Country),
  % and we list all cities in given country (if it is a country)
  city(City, Country). 
```

最后，我们要列出“大陆旅行”中的所有城市，例如`trip(jack, northamerica)`：

```
trip_plus(City, Who) :-
  % the same thing
  trip(Who, Continent),
  % we list all countries on the continent
  country(Country, Continent),
  % and we list all cities in given country 
  city(City, Country). 
```

整个谓词如下所示：

```
trip_plus(City, Who) :-
  trip(Who, City),
  city(City, _).
trip_plus(City, Who) :-
  trip(Who, Country),
  city(City, Country).
trip_plus(City, Who) :-
  trip(Who, Continent),
  country(Country, Continent),
  city(City, Country). 
```

所以对于你的世界数据库和那些旅行：

```
trip(john, usa).
trip(jack, canada).
trip(john, toronto). 
```

我们得到：

```
?- trip_plus(X, john).
X = toronto ;
X = chicago ;
X = newyork ;
X = losangeles ;
X = dallas ;
X = miami ;
X = lasvegas ;
X = seattle ;
false. 
```

您可能会注意到这`toronto`是第一个，而条目`trip(john, toronto)`在数据库中是最后一个。这是因为我们首先寻找“到城市”的旅行。如果顺序对你来说很重要，谓词可以这样写：

```
trip_plus(City, Who) :-
  trip(Who, Where),
  (
  city(Where, _), City = Where;
  city(City, Where);
  country(Country, Where), city(City, Country)
  ). 
```

不过我个人觉得不太明显。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T12:30:04.903

好吧，您没有将“约翰前往多伦多”添加到事实列表中，因此它永远不会出现。您可以按如下方式修改您的代码：

```
%This is not needed => country(C). 

city(toronto). %here whatever city john visited
trip(john). %the person's name
trip_plus(X, T) :- trip(T,C), city(X,C) | trip(T) , city(X). 
```

# jquery - 验证多个输入

> ID：11319561
> 
> 赞同：1
> 
> 时间：2012-07-03T21:37:02.603
> 
> 标签：jquery, html

我有许多通过加号和减号动态添加的输入。所有这些输入都将添加到 div encdomlocal 中。我使用以下代码验证输入，然后添加 css，但它没有按预期工作。即它只验证 div 中的第一个输入框。

```
$('#encdomlocal input:nth-child(2)').blur(function() {
    var REGEX = /^[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}$/;
if (REGEX.test($("#encdomlocal input:nth-child(2)").val())) {
  $(this).removeClass();
  $(this).addClass("good");
} 
    else {
      $(this).removeClass();
      $(this).addClass("bad");
   }
}); 
```

任何帮助都会很棒，谢谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T21:41:15.490

如果使用 jQuery 1.7+，则需要为动态创建的输入委托，然后使用[on](http://api.jquery.com/on/)

```
$(document).on('blur','#encdomlocal input:nth-child(2)',function() { 
```

否则，您可以使用[委托](http://api.jquery.com/delegate/)jquery 1.6 及更低版本

```
$(document).delegate('#encdomlocal input:nth-child(2)','blur',function() { 
```

`document`可以替换为任何父元素

更新：

```
if (REGEX.test($(this).val())) { //<-- I don't know what you were testing but using $(this) works here
    $(this).removeClass();
    $(this).addClass("good");
}
else {
    $(this).removeClass();
    $(this).addClass("bad");
} 
```

这是更新的小提琴[http://jsfiddle.net/9DW8f/9/](http://jsfiddle.net/9DW8f/9/)

你正在使用

```
if (REGEX.test($("#encdomlocal input:nth-child(2)").val())) 
```

它正在返回一组元素，因此您没有测试触发`blur`事件的当前文本框

> jQuery 对象：包装集：选择器返回一个称为“包装集”的 jQuery 对象，它是一个类似数组的结构，包含所有选定的 DOM 元素。您可以像数组一样遍历包装集或通过索引器访问单个元素（例如 $(sel)[0]）。更重要的是，您还可以对所有选定的元素应用 jQuery 函数。<

如果您要使用相同的正则表达式，您可以通过用逗号分隔来添加另一个选择器

```
$("#encdomlocal").on("blur", "input:nth-child(2),otherSelector",//<--- use this if regex for validation is the same 
```

如果您使用的是新的正则表达式，您可以使用

```
$(document).on('blur','otherSelector',function() {
    // validation code goes here.  You can pretty much copy the other one and change the regex to what you need
}); 
```

# c# - 我遇到了异常：“mws.Options_DB”的类型初始化程序引发了异常。这是什么意思？

> ID：11319563
> 
> 赞同：0
> 
> 时间：2012-07-03T21:37:18.247
> 
> 标签：c#

可能是什么问题呢 ？每次发生相同的异常时都会发生异常。这是当我单击按钮并调用它时引发异常的行：

```
public void Save()
        {
            Options_DB.Set_Points_Coordinates_List(Point_X);
        } 
```

Point_X 是一个浮点类型的列表

无法弄清楚如何解决问题。

我在 Form1 中有一个按钮单击事件，我在另一个类中调用上面的函数：Save()

当它在 Save() 函数中执行该行时，我在其上使用了一个断点，它转到 Options_DB 类并在它的顶部执行：

```
static List<float> Points_Coordinates;
        static string settings_dir;
        static string settings_file;
        static OptionsFile setting_file;
        static string path_settings;
        static string path_exe;

        static Options_DB()
        {
            // ---  O P E N N I N G   S E T T I N G   F I L E   
            //t = voices_volume_trackbar.ToString();
            path_exe = Path.GetDirectoryName(Application.LocalUserAppDataPath);
            path_settings = Path.GetDirectoryName(Application.LocalUserAppDataPath);
            settings_file = "\\settings.txt";
            settings_dir = path_settings + @"\settings";
            setting_file = new OptionsFile(settings_dir + settings_file); 
```

当它到达该行时：`setting_file = new OptionsFile(settings_dir + settings_file);`它到达 OptionsFile 类并尝试在异常中创建目录和文件：

```
string path_exe;
        string temp_settings_file;
        string temp_settings_dir;
        string Options_File;
        StreamWriter sw;
        StreamReader sr;

/*----------------------------------------------------------
 * Function     : OptionsFile
 * Description  : Constructor
 * Parameters   : file_name is the name of the file to use
 * Return       : none
 * --------------------------------------------------------*/
    public OptionsFile(string settings)
    {

        if (File.Exists(settings))
        {

        }
        else
        {
        FileStream fs=File.Create(settings); 
```

但是一旦断点在线 File.Create(settings); 我看到包含路径和文件名的设置，而不是创建它们，它跳回到 Save() 函数到那里的行，然后抛出异常。

为什么它跳转到 Save() 而不是创建路径和文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T21:40:23.337

该异常意味着该类型的某些静态成员无法初始化或该类型的静态构造函数失败。检查那些。

您的堆栈跟踪清楚地表明问题出在

> 在 D:\C-Sharp\AnimationEditor\AnimationEditor\Options_DB.cs:line 30 中的 mws.Options_DB..cctor()

.cctor() 是静态构造函数。

# iphone - NSURL 连接和 json

> ID：11319572
> 
> 赞同：1
> 
> 时间：2012-07-03T21:38:02.693
> 
> 标签：iphone, objective-c, ios, xcode, nsurlconnection

我知道这是一个愚蠢的问题，但我不知道该怎么做。从此链接 [请求的链接](http://www.goalzz.com/main.aspx?region=-1&area=6&update=true)可以返回带有 NSURLconnection 的 json 数据吗？我希望有人检查此链接并告诉我这是否可能，因为我是这方面的新手。

编辑：

我尝试使用**NSJSONSerialization**

```
- (void)viewDidLoad
{
    NSURLRequest *req = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.goalzz.com/main.aspx?region=-1&area=6&update=true"]];
    connectionData = [[NSURLConnection alloc]initWithRequest:req delegate:self];
    [super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
 }
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
    Data = [[NSMutableData alloc] init];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    [Data appendData:data];
}

 - (void)connectionDidFinishLoading:(NSURLConnection *)connection {
NSError *jsonParsingError = nil;
id object = [NSJSONSerialization JSONObjectWithData:Data options:0 error:&jsonParsingError];

if (jsonParsingError) {
    NSLog(@"JSON ERROR: %@", [jsonParsingError localizedDescription]);
} else {
    NSLog(@"OBJECT: %@", [object class]);
}
} 
```

我在控制台中收到此错误消息：

**JSON 错误：**操作无法完成。（可可错误 3840。）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-03T21:58:28.030

正如上面的评论所暗示的，该链接不返回 JSON。但是，假设您确实有这样的链接，您可以使用 NSJSONSerialization 类将 JSON 数据解析为 Objective-C 类：

[http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40010946](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40010946)

将此与 NSURLConnection 结合起来，您就可以按照您的要求进行操作。下面是实现 NSURLConnection 的演练：

[http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html#//apple_ref/doc/uid/20001836-BAJEAIEE](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html#//apple_ref/doc/uid/20001836-BAJEAIEE)

这是您需要的概述。显然这不是工作代码：

```
- (void)downloadJSONFromURL {
    NSURLRequest *request = ....
    NSURLConnection *urlConnection = [[NSURLConnection alloc] initWithRequest:urlRequest delegate:self];
    // ...
}

NSMutableData *urlData;

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
    urlData = [[NSMutableData alloc] init];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    [urlData appendData:data];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
    NSError *jsonParsingError = nil;
    id object = [NSJSONSerialization JSONObjectWithData:urlData options:0 error:&jsonParsingError];

    if (jsonParsingError) {
        DLog(@"JSON ERROR: %@", [jsonParsingError localizedDescription]);
    } else {
        DLog(@"OBJECT: %@", [object class]);
    }
} 
```

# android - 从服务接收触摸事件

> ID：11319573
> 
> 赞同：1
> 
> 时间：2012-07-03T21:38:15.343
> 
> 标签：android, service, touch-event

我目前正在从服务接收触摸事件。

我认为这样做的一种方法是在系统视图上使用 TouchDelegate，将其边界扩展到屏幕，然后从委托中接收触摸事件。

但是，当我使用

```
((Activity)ctx).getWindow().getDecorView().setTouchDelegate(new TouchDel(bounds, view)); 
```

在我的服务中，我得到一个空指针异常和强制关闭。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T22:29:21.500

确实没有一种机制`Service`可以直接注册 a 以全局接收来自系统的触摸事件。应用程序中的`Activity`UI 需要将它接收到的事件交给你的`Service`. 在不了解您对它们的具体用途的情况下，我只能建议一种通用方法。一种可能的方法可能是：

*   在您的`Activity`类中，覆盖`dispatchTouchEvent()`以在每个事件发送到您的应用程序时得到通知。注意不要覆盖返回行为，这会破坏视图中的触摸处理。
*   `MotionEvent`是`Parcelable`，因此您可以将每个事件打包在一个中`Intent`，并将它们作为启动命令发送到您的`Service`.
*   或者，将您实现`Service`为绑定服务，以便`Activity`应用程序中的每个都可以绑定到它并直接调用方法，并且每个都`MotionEvent`通过这种方式。

# c# - 模型属性不使用 MVC4 显示

> ID：11319574
> 
> 赞同：1
> 
> 时间：2012-07-03T21:38:19.500
> 
> 标签：c#, asp.net-mvc-4

我今天刚开始学习 ASP.NET MVC4。阅读教程、下载 VS 2012 并创建我的第一个 MVC4 应用程序后，我的模型数据没有显示在网页上。

**模型**

```
namespace DistributorManagement.Models
{
    public class Vaporizer
    {
        public int Id { get; set; }    
        public string Manufacturer { get; set; }
    }
} 
```

**控制器**

```
public class VaporizerController : Controller
{
    public ActionResult Index()
    {
        Vaporizer vaporizer = new Vaporizer();
        vaporizer.Id = 1;
        vaporizer.Manufacturer = "Acme";

        return View(vaporizer);
    }
} 
```

**看法**

```
@model DistributorManagement.Models.Vaporizer

@{
    ViewBag.Title = "Vaporizer";
}

<h2>Snuh</h2>

<label>Vaporizer ID</label>
@Html.Display(Model.Id.ToString())
<br />
<label>Manufacturer</label>
@Html.Display(Model.Manufacturer) 
```

**网页**

![在此处输入图像描述](../Images/b36fcab67f0c0247371fb730ae6373f8.png)

我尝试了几种显示蒸发器属性的变体，但网页上没有显示任何内容。知道我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T21:51:21.907

您不应该使用 HtmlHelper 扩展方法“Display”来显示字符串。此方法将“标识包含要显示的属性的对象的表达式”作为字符串参数，而不是实际显示的字符串。

cf：http: [//msdn.microsoft.com/en-us/library/ee310174.aspx](http://msdn.microsoft.com/en-us/library/ee310174.aspx)

在您的情况下，您应该只显示这样的字符串：

```
<label>Vaporizer ID</label>
@Model.Id
<br />
<label>Manufacturer</label>
@Model.Manufacturer 
```

并且应该可以正常工作！

# apache - 在 Apache Webserver 上抛出大量 node.js GET 请求时服务器端 CPU 使用率低

> ID：11319576
> 
> 赞同：1
> 
> 时间：2012-07-03T21:38:41.443
> 
> 标签：apache, http, node.js, load-testing

我目前正在编写一个非常简单的负载测试，使用 node.js 作为测试发起者，Apache 作为我的 WebServer，提供一个简单的 http 网站。如果我使用以下代码发出 1000 个 GET 请求

```
var options = {
  host: 'private.webserver',
  path: '/',
  port: '80',
  method: 'GET'
};
var testnr = 1000;
while(testnr--) http.request(options, function(res){cb();}).end(); 
```

它需要很长时间才能完成（如预期的那样），但在服务器上运行测试时我只看到大约 10-15% 的 CPU 使用率。他们的某种限制器是否处于活动状态？如果我使用 node.js 发起程序的分布式设置，我会看到相同的行为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T21:42:51.633

`http.Agent`具有指示给定代理可以打开多少个套接字连接[的`maxSockets`属性；](http://nodejs.org/docs/latest/api/http.html#http_agent_maxsockets)它默认为 5（因此您实际上一次只发出 5 个 HTTP 请求）。您可以在 上修改此值`http.globalAgent`，这是 http 模块默认用于发出 HTTP 请求的代理：

```
http.globalAgent.maxSockets = 1000 // or as mnay as you want to handle at a time 
```

# entity-framework - Azure：使用 Code First 迁移在暂存环境中进行测试的最佳实践

> ID：11319577
> 
> 赞同：13
> 
> 时间：2012-07-03T21:38:46.900
> 
> 标签：entity-framework, azure, entity-framework-migrations

我在 Windows Azure 中有以下设置：

*   连接到自己的“测试”数据库的“测试”托管服务。
*   连接到自己的“生产”数据库的“生产”托管服务。

当构建在测试中得到验证并准备好投入生产时，我们在生产托管服务中启动“暂存”部署，并进行快速冒烟测试以确保新构建没有完全损坏。暂存实例使用将部署到生产环境的确切位进行部署，因此它与生产数据库通信。当登台成功时，我们点击“VIP 交换”按钮，构建就可以投入生产了。一切都很好。

当数据库模型发生变化时，问题就出现了。我的 Code First 迁移工作完美。我可以添加新的迁移，使用包管理器控制台在本地应用它们，然后在我推送新构建进行测试时生成 SQL 脚本来升级测试数据库。问题是，将 Code First 迁移与暂存/生产部署一起使用的最佳实践是什么？当我部署一个新的构建以进行模型更改时，它希望找到一个与其模型匹配的数据库。但是，如果我将模型更改应用于生产数据库，生产实例会抱怨，因为它的模型不匹配。

我刚刚跳过了分期烟雾测试。我上传到登台，然后更新生产数据库并几乎同时点击“VIP交换”按钮。然后在生产中进行冒烟测试。如果某些东西严重损坏，请“交换 VIP”并恢复数据库更改。

有没有更好的方法来做到这一点，还是差不多？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T00:10:49.073

我不确定什么是最佳做法，因为我找不到任何东西，而且似乎用户正在使用最适合他们的项目并为他们工作的东西。在一种情况下，该解决方案类似于您在其中描述的计划，其中生产数据库为空且暂存数据库首先使用 EF 代码创建并应用迁移。测试完成后，脚本被转移到另一个数据库，该数据库后来与生产连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-26T17:02:40.700

我一直在研究 Azure、EF 等以及与您类似的主题。我不知道目前您的方案的最佳做法是什么。但是，我相信使用 TFS 和/或 Github 的持续集成工具可以最大程度地降低部署风险。我希望下面的文章能给你一个观点。

[点击这里](http://www.sll.it/category/continuous-deployment/)

祝你好运

# php - 根据 mySQL 结果选择选项

> ID：11319578
> 
> 赞同：1
> 
> 时间：2012-07-03T21:38:47.240
> 
> 标签：php, mysql

全部，如果我使用以下数据库字段/值：

```
用户 ID 字段名称 字段值
1 活动时间1 1
1 事件分钟1 30
1 个活动AMPM1 am
1 事件_1 设置
1 活动时间2 5
1 事件分钟2 30
1 个活动AMPM2 am
1 事件_2 取消

```

然后我有以下 HTML/PHP：

```
<?php
for($i=0;$i<50;$i++){
if ($i%2==0){
    echo '<tr bgcolor="#CCCCCC">';
} else {
echo '<tr>';
}
?>
<td><select size="1" id="EventHour<?php echo $i; ?>" name="EventHour<?php echo $i; ?>" > 
    <option>1</option> 
    <option>2</option> 
    <option>3</option> 
    <option>4</option> 
    <option>5</option> 
    <option>6</option> 
    <option>7</option> 
    <option>8</option> 
    <option>9</option> 
    <option>10</option> 
    <option>11</option> 
    <option>12</option> 
  </select> : <select size="1" name="EventMinute<?php echo $i; ?>" id="EventMinute<?php echo $i; ?>" > 
    <option>00</option> 
    <option>05</option> 
    <option>10</option> 
    <option>15</option> 
    <option>20</option> 
    <option>25</option> 
    <option>30</option> 
    <option>35</option> 
    <option>40</option> 
    <option>45</option> 
    <option>50</option> 
    <option>55</option> 
  </select> 
  <select size="1" name="EventAMPM<?php echo $i; ?>" id="EventAMPM<?php echo $i; ?>"> 
    <option>PM</option> 
    <option>AM</option> 
  </select></td> 
<td><b>&nbsp; 
  <select size="1" name="Event_<?php echo $i; ?>" id="Event_<?php echo $i; ?>" class="event_selection"> 
    <option>Select Event...</option> 
    <option value="Set Up">Set Up</option> 
    <option value="Take Down">Take Down</option> 

  </select> 
  </b></td> 
<td>&nbsp;Note:
  <input type="text" name="Note<?php echo $i; ?>" id="Note<?php echo $i; ?>"> 
  </td> 
</tr> 
<?php
}
?> 
```

我想做的是根据数据库结果设置选择值。因此，如果选择 id 是 EventHour1，那么我想让选择选项为 1，如果它是 Event_2，那么我希望选择选项为 Take Down。

我怎样才能用 PHP 来做这件事？任何帮助将不胜感激！

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T22:01:38.573

这是使用数组的基本思想。理想情况下，这些选项将从数据库中读取（当您必须查看要调试的源代码时，`\t`和`\n`只是为了保持输出 HTML 格式干净 -`<?php echo $i?>`如果您愿意，也可以使用方法输出）：

```
$curVal = /* lookup curVal from database for event */
echo "<select size='1' id='EventHour$i' name='EventHour$i'>\n";
$options = array(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12);
foreach ($options as $option) {
    if ($curVal == $option)
        $selected = " selected='selected'";
    else
        $selected = "";
    echo "\t<option$selected>$option</option>\n";
}
echo "</select>\n\n"; 
```

应该为事件 2 呈现类似的内容，例如：

```
<select size='1' id='EventHour2' name='EventHour2'>
    <option>1</option> 
    <option>2</option> 
    <option>3</option> 
    <option>4</option> 
    <option selected='selected'>5</option> 
    <option>6</option> 
    <option>7</option> 
    <option>8</option> 
    <option>9</option> 
    <option>10</option> 
    <option>11</option> 
    <option>12</option>
</select> 
```

演示：http: [//ideone.com/BoEfr](http://ideone.com/BoEfr)

* * *

我也质疑你的数据库设计。如果您尝试将事件存储在数据库中，我认为您将表示问题（字段 ID 等）与数据存储混淆了。您的数据库只需要捕获底层数据语义，即事件的详细信息：

```
event_id | user_id | event_name | hour | minute | am_pm
1        | 1       | Set Up     | 1    | 30     | am
2        | 1       | Take Down  | 5    | 30     | am 
```

然后，当您显示事件时，您会注意以有意义的方式呈现它，即以带有下拉菜单或文本框的表格格式用于数据输入。

# android - 列表中的 CeckAll 按钮，其中包含 Android 中的很多元素

> ID：11319581
> 
> 赞同：-1
> 
> 时间：2012-07-03T21:39:03.903
> 
> 标签：android, listview, checkbox

这是我的情况。
**我所拥有的：**在右上角和自定义元素列表下方带有复选框（称为“checkAll”）的活动：TextView 和复选框。
**我想要什么**：当点击checkAll时，列表中每个项目的所有复选框都被选中。
**问题：**只有当列表的所有项目都在屏幕上可见时，一切才能正常工作。当我有一个包含很多元素的列表（例如 20 个）时，然后单击 checkAll 我的应用程序崩溃。LogCat 说我：NullPointerException 就行了

```
 CheckBox checkBoxInTheItemList = (CheckBox)
                  mList.getChildAt(i).findViewById(R.id.checkBox); 
```

这是我的功能：

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.list_layout_select_friend);  
    checkAll =(CheckBox)findViewById(R.id.checkBoxAll);       
    checkAll.setOnClickListener(new OnClickListener() { 
       @Override
       public void onClick(View arg0) {
          if((checkAll.isChecked())){
           for(int i=1;i<peopleSize;i++){//for each element of my array of Person
             mList=(ListView) findViewById(R.id.list); //This is the id of my List
                                                 //in the list_layout_select_friend
              CheckBox checkBoxInTheItemList = (CheckBox)
              mList.getChildAt(i).findViewById(R.id.checkBox);  //i try to get 
                             //for each item of the List the relative checkBox.                     
        checkBoxInTheItemList.setChecked(true);//Now i checked the checkBox
          }
     }          
    }
    });

} 
```

**编辑：**这是我的适配器，还有 getView 方法

```
public class NewQAAdapterSelectFriends extends BaseAdapter {
private LayoutInflater mInflater;
private Person[] data;

public NewQAAdapterSelectFriends(Context context) { 
    mInflater = LayoutInflater.from(context);
}

public void setData(Person[] data) {
    this.data = data;
}

@Override
public int getCount() {
    return data.length;
}

@Override
public Object getItem(int item) {
    return data[item];
}

@Override
public long getItemId(int position) {
    return position;
}
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    if (convertView == null) {
        convertView = mInflater.inflate(R.layout.item_select_friends, null);
        final ViewHolder viewHolder = new ViewHolder();
        viewHolder.nameText=(TextView) convertView.findViewById(R.id.personName);
        viewHolder.surnameText=(TextView) convertView.findViewById(R.id.personSurname);
        viewHolder.contactImage=(ImageView) convertView.findViewById(R.id.personImage);
        viewHolder.checkBox=(CheckBox)convertView.findViewById(R.id.checkBox);
        convertView.setTag(viewHolder);
        viewHolder.nameText.setTag(viewHolder.nameText);
        viewHolder.nameText.setTag(viewHolder.surnameText);
        viewHolder.contactImage.setTag(data[position]);
        viewHolder.checkBox.setTag(data[position]);// is correct this line??????

    } else {

    }

     ViewHolder holder = (ViewHolder) convertView.getTag();
     holder.nameText.setText(data[position].getName());
     holder.surnameText.setText(data[position].getSurname());
     holder.contactImage.setImageResource(data[position].getPhotoRes());
     holder.contactImage.setScaleType(ScaleType.FIT_XY);
     //here i have to write something for the checkbox, right?
     return convertView;
}

static class ViewHolder {
    TextView nameText;
    TextView surnameText;
    ImageView contactImage;
    CheckBox checkBox;
} 
```

我怎样才能避免这个问题？**我如何检查带有不可见元素的大列表的所有复选框？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T22:18:46.733

为了实现这一点，您需要了解 ListView 的工作原理，即视图回收。在 Android 中创建列表时，会动态创建视图。当您向上和向下滚动时，离开屏幕的列表项需要清除其视图中的数据并重新填充下一个进入的项的信息。这发生在`getView`您的列表适配器中的方法中（顺便说一下，对你发帖很有帮助）。我相信这是您出现空指针异常的原因。这`getChildAt`方法只能返回可见的列表项，因为其他的目前不存在。第一个可见项目将是索引 0。因此，即使您的列表可能有 20 个项目，如果只有 5 个可见，getChildAt 只能返回 5 个，并且请求超出范围的视图可能会导致此异常。

我处理您的项目的方法是拥有一个记录您的列表项目和复选框状态的数据结构。一个非常简单的例子是一个布尔数组，其中真/假值对应于复选框是否被选中。调用时`getView()`，您可以使用`position`参数 a your 作为数组的索引，并根据此选中或取消选中该框。（如果你正确地回收你的视图，你可能应该做这样的事情）如果按下 Check All 按钮，那么只需使数组的每个元素都为真。

一些示例代码可以帮助您。

```
private boolean[] isCheckedArray; //Maintains the checked state of your 

... //At some point, probably onCreate or whenever you get your data, initialize your array. If nothing every starts checked off, initialize the whole array to false

checkAll.setOnClickListener(new OnClickListener() { 
   @Override
   public void onClick(View arg0){
       for(int i=1;i<peopleSize;i++)
             isCheckedArray[i] = true;      
   }
});

...
//And finally, in your getView function
@Override
public View getView(int position, View convertView, ViewGroup parent)
{
     ...
     myCheckBox.setChecked(isCheckedArray[position])
     ...
} 
```

希望这可以帮助。我肯定会研究 Android 中的视图回收，因为它是一个关键概念，并且很好地处理它会为您节省大量时间和头痛。祝你好运。

# jquery - icanhaz 的问题

> ID：11319585
> 
> 赞同：1
> 
> 时间：2012-07-03T21:39:25.350
> 
> 标签：jquery, jsp, icanhaz.js, jsp-fragments

我将以下代码保存在 .jspf 文件中：

```
<!-- include library files -->
<script src="jquery.js"></script>
<script src="icanhaz.js"></script>

<script type="text/html" id="user">
Hello my name is {{ name }}
</script>

<script type="text/javascript">
    $(document).ready(function () {
    user_data_object = {name: "Michael"};

    <!-- 
        This should set user to the string 'Hello my name is Michael'.
        However, ich.user is undefined, so when I make this call, I get the error:

           TypeError: 'undefined' is not a function 
                   (evaluating 'ich.user(user_data_object)'
    -->
    var user = ich.user(user_data_object);
    });

</script> 
```

为什么这不起作用？我进行了测试以确保正确包含 jQuery 和 ich 并且它们是正确的。如果我将此代码放入计算机上的 .html 文件中，它就可以工作。但是，一旦我将它放在 .jspf 文件中的服务器上，它就会停止工作。有任何想法吗？

# function - 可变数量求和函数的正确行为

> ID：11319589
> 
> 赞同：2
> 
> 时间：2012-07-03T21:39:40.507
> 
> 标签：function, math, language-agnostic, sum, language-design

我正在`sum`为一种玩具语言定义一个可变参数函数。对我来说，允许在没有参数和 return 的情况下调用它似乎很自然`0`，但*真正的*语言（及其实现）彼此之间存在分歧。

是否存在返回零比抛出异常更不正确的用例？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T21:41:53.177

从数学上讲，**[空和](http://en.wikipedia.org/wiki/Empty_sum)**（没有数字的总和）被定义为零。从数学上讲，返回零似乎是正确的选择。在这种情况下抛出异常可能会使函数的使用复杂化，因为您必须确保使用 try/catch 保护每个调用，以防您以某种方式提供零参数。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T21:54:39.633

在一种情况下，您可能不希望它返回零：假设您的语言是动态类型的并且允许`+`对非数字类型进行操作（例如，它可能像在 Python 中那样连接字符串）。那么一个空的总和对于它在理论上是什么类型的求和是模棱两可的：你可能希望结果是数字的 0，字符串的 ""，列表的 [] 等等。

如果您的语言是这样的，那么您可能会选择 (1) 无论如何都返回 0 并接受除数字之外`sum(things)+other_thing`不等于`sum(things together with other_thing)`的值，(2) 抛出异常，(3) 返回一些特殊值，添加到时行为类似于 0数字，例如添加到字符串时的“”等，或者（4）无论如何都返回（比如说）0并说0+“”等于“”或类似的东西。如果语言有任何不是玩具的任何危险，请不要执行#4。

哦，还有另一个相关案例：假设您的语言是静态类型的，但具有强大的类型推断机制。然后它可能会区分不求数字和不求字符串，并在两种情况下返回不同的东西。（但是你需要一个相当复杂的类型系统来完成所有这些工作，我猜你不会为玩具语言而烦恼。）

# java - 递归程序

> ID：11319591
> 
> 赞同：6
> 
> 时间：2012-07-03T21:39:47.887
> 
> 标签：java, recursion

我被困在这段代码中：

> 问题：一个孩子可以一次以 1,2 或 3 级的步数跳 n 级楼梯。给定 n 的值，打印出他可以爬楼梯的所有排列。

这是我的代码：

```
 public class HoppingLad
    {
        int count;
        void hop(int n,int present)
        {
            if(n==present)
            {
                count++;
                System.out.println("\nFinished type "+count+" climbing.\n");
            }
            else
            {
                if((n-present)>=1)
                {
                    System.out.print("\nClimbed 1 step.\nReached "+(present+1)+"   ");
                    hop(n,present+1);
                }
                if((n-present)>=2)
                {
                    System.out.print("\nClimbed 2 step. \nReached "+(present+2)+"   ");
                    hop(n,present+2);
                }
                if((n-present)>=3)
                {
                    System.out.print("\nClimbed 3 step. \nReached "+(present+3)+"   ");
                    hop(n,present+3);
                }

            }

        }

        public static void main(String [] args)
        {
            HoppingLad hl=new HoppingLad();
            hl.hop(3, 0);
            System.out.println("There are "+hl.count+" ways to climb.");
        }
    } 
```

输出是：

```
 Climbed 1 step.  
 Reached 1  
 Climbed 1 step.  
 Reached 2  
 Climbed 1 step.  
 Reached 3   
 Finished type 1 climbing.

 Climbed 2 step. 
 Reached 3   
 Finished type 2 climbing.

 Climbed 2 step. 
 Reached 2   
 Climbed 1 step.
 Reached 3   
 Finished type 3 climbing.

 Climbed 3 step. 
 Reached 3   
 Finished type 4 climbing.

 There are 4 ways to climb. 
```

我得到的输出部分正确，部分不完整。爬楼梯的方法数量是正确的，但正如你所注意到的，

> 爬过 2
> 达到 3

部分输出即将到来

> 攀爬 1
> 到达 1

部分在它之前。我已经绘制了递归树，该树甚至表明输出中不存在第一部分。

然而，用户必须从地面得到指导。我尝试了很多东西，但无济于事。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T21:48:30.717

您正在将解决方案打印为部分结果，因此当您获得基于该部分解决方案的新解决方案时，它们不会重复。

换句话说，你这样做（对于 n = 3）

```
 --> state 0
hop(1)  --> state 1 --> print "1"
hop(1)  --> state 2 --> print "1"
hop(1)  --> state 3 --> print "1" --> print "solution"; 
```

然后你回到状态 2（没有进一步的解决方案）并回到状态 1，然后你

```
hop(2) --> state 3 --> print "2" --> print "solution" 
```

不打印允许您进入状态 1 的“1”

解决方案将传递到达实际状态所需的步骤列表，并在达到解决方案时打印所有列表。当然，由于您将为此使用数组或列表，因此当您返回之前的状态时，您需要删除这些步骤。

更新：另一种选择（基于更改输出）可以根据所需的步骤数将答案制成表格。即，输出将是这样的（对于与上述相同的解决方案）：

```
Climbed 1
          -> Climbed 1
                       -> Climbed 1\. Solution Found!
          -> Climbed 2\. Solution Found! 
```

这将允许用户自行重建路径。再说一次，您需要一个新参数来了解当前的步数。

如果您想要数组/列表版本但不想删除项目，您可以克隆列表并将副本传递给下一个函数调用，但这将是低效的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T10:35:12.333

I have implemented this solution. I will email you only if you have completed your homework.

What you can do is maintain a `String` and keep concating the current step taken and when the condition is reached, print the entire `String`, do not print individual steps. That way, you will reduce the overhead of checking at every recursive step how close you are to the solution. You will be sure the path will be printed only if the current step leads to a solution.

For example (suppose n=3)

`3,0,"" -> 3,1,"1" -> 3,2,"11" -> 3,3,"111"` (one solution over, print "111")

In these kind of problems (generally), where you need to make a series of steps to reach a threshold value, the most efficient solution (generally) is to store the list of steps and then print the entire solution rather than printing individual steps. That whay you know you can be sure you gets all solutions covered, and you are not printing when the current step does not lead to a solution.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T21:46:32.100

*您的问题 - 如果我正确理解了这个问题 - 例如，当您考虑从第 0 步爬到第 1 步的可能性时，您只需打印一次*“从 0 爬到 1”然后显示从第 1 步开始的所有可能性。（其中，通常会有很多。）

相反，您需要安排在进行递归时跟踪完整的路线，然后在到达楼梯顶部时打印出整个路线。

例如，您可以通过为`HoppingLad`类提供一个数组来执行此操作，该数组在调用 开始时`hop(n,k)`描述小伙子如何进入`k`。然后，在这种`n==present`情况下，您可以查看该数组以输出关于小伙子如何从 0 变为 的完整描述`n`。

有几种不同的方法来组织这个，而且这个问题看起来更像是家庭作业，所以我不想填写太多细节。尽管如此，我希望以上内容对您有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-10T22:52:49.103

所以这是我的解决方案，虽然它使用 javascript，但它使用 ES6（对于数组上的扩展操作，默认参数，这将在当前版本的 Firefox 中运行良好，我在 Firefox 50 中这样做了）：

```
function getHopPathsCnt(totalsteps, maxhopability, curstep = 0, taken = [], total={count:0}) {
  if (totalsteps === curstep) {
    total.count++;
    console.log('A possible hop path:', taken.join(' '));
  } else {
    for (let hopped = 1; hopped <= maxhopability; hopped++) {
      if (totalsteps - curstep >= hopped)
        getHopPathsCnt(totalsteps, maxhopability, curstep + hopped, [...taken, hopped], total);
    }
  }
  if (curstep === 0) {
    console.error('Total ways to climb', totalsteps, 'steps with up to', maxhopability, 'hops at a time:', total.count);
    return total.count;
  }
} 
```

要使用它：

```
getHopPathsCnt(3, 3); 
```

输出：

> 可能的跳跃路径：1 1 1
> 
> 可能的跳跃路径：1 2
> 
> 可能的跳跃路径：2 1
> 
> 可能的跳跃路径：3
> 
> 一次最多 3 次跳跃 3 级攀登的总方法：4
> 
> 4

## 与上面的 Gareth 不同，我提供完整解决方案的原因

这个问题看起来确实像家庭作业，因此我想分享它。家庭作业旨在开拓新视野。所以有时，当我没有解决方案时，我会一直用我的“当前技能/心态”来强迫它，这可能永远不会让我到任何地方。最终，当我看到解决方案并反过来工作时，它只是为我的“技能/心态”增加了一个新方面。这就是为什么我讨厌看到解决方案说“我不会填写太多细节，因为这似乎是家庭作业”。因为这导致了唯一的学习方法——把问题弄错了，然后我们愚蠢的评分系统给了我们一个不好的分数，然后“从我们的错误中学习”。如果可以避免，我讨厌从错误中学习。我也宁愿不被归入“错误”/“F”的等级，特别是如果我努力的话。

# c# - c#有没有一种简单的方法将月份整数转换为名称

> ID：11319596
> 
> 赞同：2
> 
> 时间：2012-07-03T21:40:19.400
> 
> 标签：c#, asp.net-mvc-3, monthcalendar

我正在尝试为博客应用程序创建存档列表。我有一个具有以下代码片段的 veiw 模型：

```
@model IEnumerable<NPLHBlog.Models.ArchiveListModels>
...
        @foreach (var item in Model)
        {
            <li>@item.ArchiveMonth/@item.ArchiveYear : @item.PostCount</li>
        }
... 
```

我正在尝试将 item.ArchiveMonth 打印为“Jan”而不是“1”。

ArchiveListModel 如下：

```
public class ArchiveListModels
{
    public int ArchiveYear { get; set; }
    public int ArchiveMonth { get; set; }
    public int PostCount { get; set; }
} 
```

和博客从存储库中读取如下：

```
 public IQueryable<ArchiveListModels> ArchiveList()
    {
        var archiveList = from blogs in db.Blogs
                          group blogs by new { blogs.PublishDate.Year, blogs.PublishDate.Month }
                              into dateGroup
                              select new ArchiveListModels()
                              {
                                  ArchiveYear = dateGroup.Key.Year,
                                  ArchiveMonth = dateGroup.Key.Month,
                                  PostCount = dateGroup.Count()
                              };
        return archiveList;
    } 
```

非常感谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-03T21:41:55.287

```
CultureInfo.CurrentCulture.DateTimeFormat.GetMonthName(1); 
```

或缩写

```
CultureInfo.CurrentUICulture.DateTimeFormat.AbbreviatedMonthNames[1]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T21:49:33.703

获取完整的月份名称

```
int month = 1;
System.Globalization.CultureInfo.CurrentUICulture.DateTimeFormat.GetMonthName(month); 
```

或者您可以使用日期时间字符串格式：

```
int month = 1;
var dt = new DateTime(2012, month, 1):
var monthAbbr = dt.ToString("MMM"); 
```

或者您可以对缩写列表进行查找

```
int month = 1;
var monthAbbr =     System.Globalization.CultureInfo.CurrentUICulture.DateTimeFormat.AbbreviatedMonthNames[month]; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-03T21:43:58.030

我相信你想要：

```
.ToString("MMM"); 
```

您甚至可以为特定月份创建自己的 DateTime 对象：

```
DateTime jan = new DateTime(2012, 1, 1);
return jan.Date.ToString("MMM"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-26T01:26:09.050

如果您想将 ViewBags 用于数据库中的数据，您也可以轻松地使用该格式。请记住。

```
@foreach (var item in ViewBag.HealthCare)
{
    @item.Created_Date.ToString("MMMM yyyy")

} 
```

# android - Android 使用 DDMS 调试 ScheduledThreadPoolExecutor

> ID：11319604
> 
> 赞同：0
> 
> 时间：2012-07-03T21:40:55.907
> 
> 标签：android, timer, threadpool, timertask

对于我的 Android 应用程序，我使用 ScheduledThreadPoolExecutor 而不是 Timer，因为它不受时间变化的影响。

使用计时器，您可以通过为其命名来创建它。例如：定时器 myTimer = new Timer("TimerA");

这非常方便，因为在 Threads 视图中使用 DDMS 进行调试时，我可以看到哪些线程正在运行……并使用名称来追溯我的代码。

但是，使用 ScheduledThreadPoolExecutor，我似乎无法给它命名。因此，当在 DDMS 中使用线程视图进行调试时，我看到类似：“pool-4-thread-1”的内容，它没有意义，而且我无法用这样的名称追溯到我的代码。

谁能帮我这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T22:19:27.470

标准 Java API 不支持命名 ThreadPoolExecutor，但是，通过 ThreadFactory 支持命名由 ThreadPoolExecutor 创建的线程，请查看[此处](http://developer.android.com/reference/java/util/concurrent/ThreadPoolExecutor.html)：

> 创建新线程
> 
> 使用 ThreadFactory 创建新线程。如果没有另外指定，则使用 defaultThreadFactory()，它创建的线程都在同一个 ThreadGroup 中，并且具有相同的 NORM_PRIORITY 优先级和非守护进程状态。通过提供不同的 ThreadFactory，您可以更改线程的名称、线程组、优先级、守护程序状态等。如果 ThreadFactory 在从 newThread 返回 null 时未能创建线程，则执行程序将继续，但可能无法执行任何任务。

示例代码：

```
ScheduledThreadPoolExecutor scheduledThreadPoolExecutor = Executors.newScheduledThreadPool(5, new ThreadFactory() {
  final AtomicInteger threadNumber = new AtomicInteger(1);

  @Override
  public Thread newThread(Runnable r) {
    return new Thread(r, "Foo-" + threadNumber.getAndIncrement());
  }
}); 
```

希望这可以帮助。

# c++ - OpenGL着色器拒绝链接

> ID：11319608
> 
> 赞同：4
> 
> 时间：2012-07-03T21:41:16.083
> 
> 标签：c++, opengl, glsl, freeglut

**问题：**

一直在努力让我的代码加载外部着色器，但它不起作用。无论我如何重写代码并再次尝试，我每次都会遇到相同的错误。

着色器编译但不会链接，我在这个函数中有什么做错了吗？顺便说一句，错误捕获块工作得很好。

```
Fragment shader(s) failed to link,  vertex shader(s) failed to link.
ERROR: error(#280) Not all shaders have valid object code.
ERROR: error(#280) Not all shaders have valid object code. 
```

我正在使用 freeglut、x64 windows 7 和 mingw（而且我没有使用 IDE）

**用法：**

在我的主循环中`GLuint programId = loadShader("vertex.shader", "frag.shader");` ，我启用了它`glUseProgram();`

```
GLuint loadShader(const char * vertex_file_path, const char * fragment_file_path) {

    GLuint vertexShaderId = glCreateShader(GL_VERTEX_SHADER);
    GLuint fragmentShaderId = glCreateShader(GL_FRAGMENT_SHADER);
    GLuint programId = glCreateProgram();

    GLint status = GL_FALSE;
    int infoLogLength;
    std::string line = "";

    //read in and compile
    std::string vertexShaderCode = "";
    std::ifstream vifs(vertex_file_path);
    if(!vifs.is_open()) {

        while(getline(vifs, line))
            vertexShaderCode += line +"\n";
        vifs.close();
    }

    const char * vertexStream = vertexShaderCode.c_str();

    std::string fragmentShaderCode = "";
    std::ifstream fifs(fragment_file_path);
    if(!fifs.is_open()) {

        while(getline(fifs, line))
            fragmentShaderCode += line +"\n";
        fifs.close();
    }

    const GLchar * fragmentStream = fragmentShaderCode.c_str();

    glShaderSource(vertexShaderId, 1, &vertexStream, NULL);
    glCompileShader(vertexShaderId);   

    glShaderSource(fragmentShaderId, 1, &fragmentStream, NULL);
    glCompileShader(fragmentShaderId);    

    glGetShaderiv(vertexShaderId, GL_COMPILE_STATUS, &status);
    glGetShaderiv(vertexShaderId, GL_INFO_LOG_LENGTH, &infoLogLength);
    std::vector<char> vertexShaderErrorMessage(infoLogLength);
    glGetShaderInfoLog(vertexShaderId, infoLogLength, NULL, &vertexShaderErrorMessage[0]);
    fprintf(stdout, "%s\n", &vertexShaderErrorMessage[0]);

    glGetShaderiv(fragmentShaderId, GL_COMPILE_STATUS, &status);
    glGetShaderiv(fragmentShaderId, GL_INFO_LOG_LENGTH, &infoLogLength);
    std::vector<char> fragmentShaderErrorMessage(infoLogLength);
    glGetShaderInfoLog(fragmentShaderId, infoLogLength, NULL, &fragmentShaderErrorMessage[0]);
    fprintf(stdout, "%s\n", &fragmentShaderErrorMessage[0]);

    glAttachShader(programId, vertexShaderId);
    glAttachShader(programId, fragmentShaderId);
    glLinkProgram(programId);
    glUseProgram(programId);

    glGetProgramiv(programId, GL_LINK_STATUS, &status);
    glGetProgramiv(programId, GL_INFO_LOG_LENGTH, &infoLogLength);
    std::vector<char> programErrorMessage(std::max(infoLogLength, int(1)) );
    glGetProgramInfoLog(programId, infoLogLength, NULL, &programErrorMessage[0]);
    fprintf(stdout, "%s\n", &programErrorMessage[0]);

    glDeleteShader(vertexShaderId);
    glDeleteShader(fragmentShaderId);

    return programId;
    } 
```

[顶点着色器]

```
#version 400

layout(location=0) in vec4 in_Position;
layout(location=1) in vec4 in_Color;
out vec4 ex_Color;

void main(void) {
    gl_Position = in_Position;
    ex_Color = in_Color;
} 
```

片段着色器

```
#version 400

in vec4 ex_Color;
out vec4 out_Color;

void main(void) {
   out_Color = ex_Color;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T21:59:57.937

You only read the files if they **failed** to open. Right now you're passing empty strings to `glShaderSource`.

Change the `is_open` test (better yet, check `good()` instead of `is_open()`), and things will probably work.

Change

```
std::ifstream vifs(vertex_file_path);
if(!vifs.is_open()) { // <<=== BACKWARDS!

    while (getline(vifs, line))
        vertexShaderCode += line + "\n";
    vifs.close();
} 
```

to

```
{
    std::ifstream vifs(vertex_file_path);
    while(getline(vifs, line))
        vertexShaderCode += line +"\n";
} 
```

Since you're trying to read the whole file, look at some better ways in [this question](https://stackoverflow.com/questions/2602013/read-whole-ascii-file-into-c-stdstring).

# sql - 用另一个查询结果过滤查询结果

> ID：11319611
> 
> 赞同：-1
> 
> 时间：2012-07-03T21:41:21.770
> 
> 标签：sql, sql-server

我有一个查询结果集，其中包含我需要过滤的数据，但是，过滤数据包含在另一个表中，而且该过滤表链接到另一个包含过滤器分组的表。更进一步，分组表包含可能为空的字段，我需要忽略这些字段。我还需要按组表对结果进行分组。关于解决这个问题的最佳方法的任何想法？

**起始数据表**

```
MYID  NAME    ADDRESS        AGE
1     FRED    123 SECOND ST  12
2     JILL    321 FIRST ST   6
3     JOE     54 THIRD ST    4 
```

**过滤表**

```
--Group: table that is keyed via xref to Set table
GROUP_ID AGEFROM    AGETO    MYID
1        3          7        NULL
2        NULL       NULL     2

--Set: table that is xrefed to group table
SET_ID   NAME
5        SET1
6        SET2

--Xref: table connecting Set and Group
SET_ID    GROUP_ID
5         1
5         2
6         1 
```

**使用过滤表作为过滤条件查询起始数据表的期望输出**

```
SET     GROUP     NAME    AGE    ID     ADDRESS
5       1         JILL    6      NULL   321 FIRST ST
5       1         JOE     4      NULL   54 THIRD ST
5       2         JILL    NULL   2      321 FIRST ST
6       1         JILL    6      NULL   321 FIRST ST
6       1         JOE     4      NULL   54 THIRD ST 
```

重申我的需要：我需要输出按组表内容过滤的第一个表的结果，然后考虑到组表中可能的空值以及数据范围，按设置表进行分组。有道理？

实现这一结果的最佳方法是什么？

* * *

谢谢你的输入。我有点困惑，为什么我的请求被认为是不完整的并且上面有负分……我提供了包含要过滤的数据的表格示例，然后提供了其他三个包含过滤数据的表格。我什至后来提供了预期的输出。我正在尝试就能够过滤/搜索数据库并使用过滤数据库作为标准将数据过滤到所需输出的方向获得一些帮助。我认为这里有很棒的 SQL 人员可以帮助我。我对回复有点困惑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T22:36:08.937

您需要使用一些连接，如下所示：

```
SELECT SetTbl.SetID, GroupTbl.GROUP_ID, ResultsTbl.Name, ResultsTbl.Age, ResultsTbl.Address, GroupTbl.MYID
FROM ResultsTbl INNER JOIN GroupTbl
        ON (ResultsTbl.MYID = GroupTbl.MYID OR ResultsTbl.AGE BETWEEN GroupTbl.AGEFROM AND GroupTbl.AGETO)
     INNER JOIN SetTbl
        ON GroupTbl.GROUP_ID = SetTbl.GROUP_ID 
```

你的问题不清楚，所以我不能肯定这是一个答案。请在使用 stackoverflow 时采取以下建议：

*   失去“提前感谢您的帮助！” 线，很好，但不属于这里。
*   您应该尝试解决问题，然后来 stackoverflow 解释您尝试过的内容以及遇到的**具体**问题。

一般而言，您应该查看常见问题解答并非常认真地遵循其指导方针。这样，stackoverflow 将对您和其他人最有用。[https://stackoverflow.com/faq](https://stackoverflow.com/faq)

# internet-explorer - IE、ajax 和“无传输”：$.support.cors = true 也不起作用

> ID：11319618
> 
> 赞同：6
> 
> 时间：2012-07-03T21:41:53.657
> 
> 标签：internet-explorer, jquery

你知道演习......Firefox 和 Chrome 都很好。IE 正在提高我的血压 :)

我已经进行了大量搜索，并且 90% 的内容都说`$.support.cos = true;`在请求之前添加`$.ajax`应该可以解决 IE 跨域问题。

不幸的是，情况似乎并非如此。我仍然得到“没有交通工具”。因此，我在这里寻找任何其他建议、见解等。

# hibernate - Hibernate 返回重复，因为另一个表有重复的值

> ID：11319620
> 
> 赞同：5
> 
> 时间：2012-07-03T21:41:56.957
> 
> 标签：hibernate, annotations, mapping, duplicates, criteria

所以我有一个用户表、项目表和用户角色表。我有一个用户连接到 2 个项目，但是当我只有一个角色给他时，它会返回这 2 个项目，但是如果我有 2 个角色给他，它会返回 4 个角色（2x2 项目）。我该如何防止这种情况

这是我为用户返回项目列表的代码

```
@Override
public List<Project> retrieve(User user) {
    Criteria criteria = super.createCriteria();
    criteria.addOrder(Order.desc("date"));
    criteria.createCriteria("users").add(Restrictions.eq("id", user.getId()));

    return (List<Project>) criteria.list();
} 
```

用户类中的映射

```
@ManyToMany(cascade = CascadeType.ALL)
@JoinTable(name = "Users_Projects",
           joinColumns = @JoinColumn(name = "UserID"), inverseJoinColumns =   @JoinColumn(name = "ProjectID"))
public List<Project> getProjects() {
    return projects;
} 

@ElementCollection(fetch = FetchType.EAGER)
@Enumerated(EnumType.STRING)
@Column(name = "RoleType")
@JoinTable(name = "User_Roles", joinColumns = @JoinColumn(name = "UserID"))
public Set<Role> getRoles() {
    return roles;
} 
```

任何建议这里有什么问题？

tnx

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-03T22:14:11.073

标准查询中重复行问题的经典“修复”，只要您不尝试将它与分页结合起来，它可能会起作用，是添加

```
criteria.setResultTransformer(Criteria.DISTINCT_ROOT_ENTITY); 
```

我相信由于用户角色的急切加载，您的情况正在发生这种情况。将其更改为惰性也可能有效，如果您需要分页，则继续工作。

设置`fetch = FetchType.EAGER`指示 hibernate 在检索用户时始终为用户加载所有角色，它通过始终连接角色表来完成。

不幸的是，该 sql 导致具有相同用户的多条记录（每个角色一个），然后必须在运行 sql 后在 Java 中理顺，这就是结果转换器的作用。

更不幸的是，如果您想通过简单的休眠条件以最自然的方式使用分页，使用`criteria.setFirstResult`and `criteria.setMaxResults`，事情会以错误的顺序发生，因此这些需要结果转换器以避免重复的查询只是不正确分页。

为了更好地理解所有休眠 sql 生成，我建议打开生成的 sql 的日志记录，如[this answer](https://stackoverflow.com/questions/2536829/hibernate-show-real-sql/2538954#2538954) to another SO hibernate question中所述。

# mysql - 更新 wordpress 自定义字段日期格式

> ID：11319622
> 
> 赞同：1
> 
> 时间：2012-07-03T21:41:57.593
> 
> 标签：mysql, wordpress, date, format

由于我的严重疏忽，我将所有日期格式排序为`%M %d %Y (July 3 2012)`而不是`%Y %m %d (2012 07 03)`.

我想将自定义字段（称为“game_release_date”）的所有日期转换为新格式。

到目前为止我得到的代码（但不起作用）是：

```
UPDATE `wp_postmeta` 
SET meta_key = DATE(STR_TO_DATE(game_release_date, '%m %d %Y'))
WHERE DATE(STR_TO_DATE(game_release_date, '%M %d %Y')); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T00:19:10.377

要将包含的字符串`July 03 2012`转换为 MySQL 日期，请使用 MySQL 的[`STR_TO_DATE()`](http://dev.mysql.com/doc/en/date-and-time-functions.html#function_str-to-date)函数：

```
STR_TO_DATE(game_release_date, '%M %d %Y') 
```

我建议将此函数的结果存储在[`DATE`](http://dev.mysql.com/doc/en/datetime.html)数据类型的列中。

要将 MySQL 日期（无论是上述函数的结果还是`DATE`列）转换为`2012 07 03`，请使用 MySQL 的[`DATE_FORMAT()`](http://dev.mysql.com/doc/en/date-and-time-functions.html#function_date-format)函数：

```
DATE_FORMAT(date_value, '%Y %m %d') 
```

因此，如果您想将日期保存在字符串中（通常是个坏主意）但采用新格式：

```
UPDATE wp_postmeta
SET    game_release_date = DATE_FORMAT(
         STR_TO_DATE(game_release_date, '%M %d %Y'),
         '%Y %m %d'
       )
WHERE  meta_key = ... 
```

# sql - 实体框架4.0中的SQL子查询

> ID：11319624
> 
> 赞同：0
> 
> 时间：2012-07-03T21:42:17.283
> 
> 标签：sql, entity-framework-4

如何将此 SQL 查询转换为 Entityframework 查询

```
SELECT DISTINCT
        EP.PrescriptionID
FROM    dbo.tEPPrescriptions EP 
WHERE   EP.CustomerID = 22
        OR ( EP.CustomerID IN (
             SELECT DISTINCT
                    AP.CustomerID
             FROM   dbo.tEPAdditionalPrescribers AP
                    INNER JOIN dbo.tAddresses A ON AP.SupervisorID = A.CustomerID
             WHERE  AP.SupervisorID = 22
                    AND AP.ActiveFlag = 1 )
             AND EP.LocationID IN (
             SELECT DISTINCT
                    AP.LocationID
             FROM   dbo.tEPAdditionalPrescribers AP
                    INNER JOIN dbo.tAddresses A ON AP.SupervisorID = A.CustomerID
             WHERE  AP.SupervisorID = 22
                    AND AP.ActiveFlag = 1 )
           ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T13:59:35.117

像下面这样的事情应该做

```
from epp in context.EPPrescriptions
where 
    epp.CustomerID == 22 || (
    (from epap in context.EPAdditionalPrescribers where epap.SupervisorID == 22 select epap.CustomerID).Contains(epp.CustomerID) &&
    (from ....)
)
select epp.PrescriptionID 
```

希望这有帮助

顺便说一句：什么是 EPPrescription ？

# elasticsearch - 如何在 Cloudfoundry 上运行 Elasticsearch

> ID：11319625
> 
> 赞同：-1
> 
> 时间：2012-07-03T21:42:28.873
> 
> 标签：elasticsearch, cloud-foundry

[https://github.com/cloudfoundry-samples/rails-elastic-search#setting-up-elastic-search](https://github.com/cloudfoundry-samples/rails-elastic-search#setting-up-elastic-search)

上面的链接是我发现的关于在 cloudfoundry 上运行 ES 的唯一信息，它对我不起作用。我下载了最新的 ES，更新了 config/elasticsearch.yml 并复制了 elastic-search-manifest.yml 文件。

下一步说运行，

```
vmc push --manifest=elastic-search-manifest.yml 
```

但 --manifest= 无效。

我尝试运行以下

```
vmc push es_index 
```

但是在部署过程中，我收到了这条消息。

[警告] 无法确定应用程序类型。

```
1: Sinatra
2: Lift
3: WSGI
4: JavaWeb
5: Node
6: PHP
7: Erlang/OTP Rebar
8: Grails
9: Django
10: Rails
11: Spring 
```

我尝试选择 JavaWeb 和 Rais，但它们也不起作用。

似乎我需要以某种方式引导 /bin/elasticsearch 的启动。

更新：我尝试编写一个小 node.js 引导程序来启动弹性搜索过程，但得到了 Permission Denied 错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T20:49:50.887

詹妮弗·希基在评论中的回答：

> 看起来您可能使用的是旧版本的 vmc，因为我没有看到 Standalone 被列为框架类型（这是清单为 ElasticSearch 指定的内容）。尝试执行“gem update vmc”，您应该至少在 0.3.18 上，然后 --manifest 应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T20:37:40.923

我刚试过这个，[https://github.com/cloudfoundry-samples/rails-elastic-search/blob/master/elastic-search-manifest.yml](https://github.com/cloudfoundry-samples/rails-elastic-search/blob/master/elastic-search-manifest.yml)上的说明对我来说很好用 elasticsearch-0.19.11。

要尝试的事情：

*   将清单保存为 manifest.yml - 这是 VMC 查找的默认值，那么您将不需要命令行开关。
*   编辑清单并将名称更改为未使用的名称（它们对于每个 CloudFoundry 都是全局的）。
*   检查您的 VMC 版本。我正在使用 0.3.18，以 api.cloudfoundry.com 作为目标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T19:18:21.047

如果您可以选择运行自己的 cloudfoundry 集群，那么您还有另一个选择：ElasicSearch 已作为服务添加，因此您不再需要将其添加为应用程序。您可以只配置它并将您的应用程序绑定到它，就像您对 MySQL 所做的那样。

# android - Eclipse XML/RSS 解析在希伯来语中

> ID：11319627
> 
> 赞同：0
> 
> 时间：2012-07-03T21:42:41.900
> 
> 标签：android, xml, eclipse, utf-8

我正在关注本教程： [http](http://www.vogella.com/articles/RSSFeed/article.html) ://www.vogella.com/articles/RSSFeed/article.html 它工作得很好，我能够获得我需要的所有信息。但是，所有“字段”内容都是希伯来语，所以当我解析它并显示结果时，我得到的只是这样的（在操作和删除不必要的标签之后）：

```
Question: 1536\. ??? ??? ????? ????? ????? ????? ?????? ??? ???? ???? ??????. ???: 
Answers:
1: ???? ?? ????? ?? ?? ????? ?????? ?? ?????. 
2: ???? ?? ????? ?? ???? ???? ???? ?????.
3: ???? ?? ????? ?? ???? ???? ???? ?????, ????? ?????? ???????.
4: ???? ???? ???? ????? ?? ???? ????, ?? ???? ???? ????- ?????. 
```

XML 以 UTF-8 编码，在 Web 浏览器中看起来应如此。我尝试使用这一行明确设置 ecnoding：

```
XMLEventReader eventReader = inputFactory.createXMLEventReader(in,"UTF-8"); 
```

但这没有用。我尝试将 XML 的编码更改为 unicode（以及上面的行），但结果仍然相同。

我怀疑它可能只是一个 Eclipse 编码问题，因为当做这样的事情时：

```
System.out.println("סתם עברית"); 
```

结果打印`??? ?????`

如果重要，该项目适用于 Android 应用程序。

谁能帮我解决这个问题？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T00:23:55.233

只是为了关闭这个，原因是文件本身的编码错误。

在用希伯来语输入几个单词然后尝试保存文件后，它提醒我编码不同。将其保存为建议的编码后，它就起作用了。

# sql - 使用 Web 服务查询填充 datagridview

> ID：11319628
> 
> 赞同：0
> 
> 时间：2012-07-03T21:42:43.267
> 
> 标签：sql, web-services, inventory

我一直在寻找这个，但我没有成功，我正在创建一个 API 来更新在线商店库存，使用 Web 服务我可以使用 sql 查询访问数据库，有一个类似 ID STOCK
166 1
166 1的表
172 0
172 3
172 2
181 0
181 9
191 1

所以我需要每个 id 的总数，这就是我使用这个 SQL 查询的时候：

```
sqlq= "select Id, sum(Stock) from database group by Id"  

prod = myApiClient.runQuery("webservicepage", key, sqlq, "") 
```

但结果是：

```
prod="1662172518191911" 
```

但我需要这样的datagridview中的结果：

```
id       stock  
166        2  
172        5  
181        9  
191        1 
```

我正在使用 Visual Studio 2010，但我真的不知道如何用 Web 服务查询填充数据网格视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T22:04:24.343

这是一个旧项目的一个小例子，它可能会帮助你：

```
AdminServiceSoapClient CTIData = new AdminServiceSoapClient();
CallInfo[] PhoneCalls = CTIData.GetAllCallsMadeByEmployeeOnDate(numUCID, myDte);
dataGridView1.DataSource = calls;
var Ronas = PhoneCalls.Where(c => c.CallOutcome.Trim() == "RONA").ToList(); 
```

# knockout.js - Knockout subscribe：订阅的 observable 被清理时如何避免两次调用 subscribe？

> ID：11319630
> 
> 赞同：1
> 
> 时间：2012-07-03T21:42:57.437
> 
> 标签：knockout.js, subscribe

我试图弄清楚如何以更简洁的方式避免订阅递归。

在下一个小提琴中展示了如何调用 2 次订阅（对于 observableOne），这是因为我需要初始状态的可观察（即监视订阅）。

可以使用“if”条件（observableTwo）来避免，但我想知道是否有一些函数可以执行此任务而不是“if”条件。我尝试使用 cleanNode 但不起作用。

这是小提琴：http: [//jsfiddle.net/wabe/nLYyf/](http://jsfiddle.net/wabe/nLYyf/)

我不想取消订阅 observable，因为它应该在通话后收听。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T02:14:24.223

问题的一部分，如果您设置设置，它似乎不会触发数据绑定，因此复选框可能最终处于错误状态。

解决这个问题......而不是设置 observableTwo，把它放在超时......

```
setTimeout(function(){ self.observableTwo(''); },0); 
```

对于如何抑制递归通知，我没有看到任何“官方”方式。所以你这样做的方式，或者你可能使用标志的其他变体，或者可能想出一个通用的包装函数来为你整理它。

# javascript - 如何将 inline-javascript 移动到脚本标签？

> ID：11319632
> 
> 赞同：3
> 
> 时间：2012-07-03T21:43:12.447
> 
> 标签：javascript, jquery

所以我有这个运行良好的弹出框，这是弹出框的 html：

```
<div class="popover2"  onmouseover="$(this).mouseleave(function() {$(this).hide(); });">
    <div class="arrow"></div>
    <div class="popover2-inner">
        <span class="popover2-title">Popover() 2</span>
    <div class="popover2-content">
        <ul class="unstyled">
            <li><span>$200 Bronze</span><p>2 hrs. drivers training</p </li>
        </ul>
    </div>
</div> 
```

我有这个实例化代码：

```
 $('.popover2-test').popover({
    placement:'bottom',
    template: $('.popover2'),
    trigger: 'manual',
    animate: false,
    html: true,

        }).click(function(e) {
            e.preventDefault() ;
        }).mouseenter(function(e) {
            $(this).popover('show');
    }); 
```

但我想将内联 onmouseover javascript 内容移到实例化代码中。我不知道该怎么做。任何帮助都很棒，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T21:46:05.383

您是否尝试将这行代码放在实例化代码之后？

```
$('.popover2').mouseleave(function() { $(this).hide(); }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T21:49:14.070

只绑定 mouseleave 事件 onmouseover 是没有意义的，因为 mouseover 事件必须在 mouseleave 之前触发（AFAIK）。所以这会做：

```
$('.popover2').mouseleave(function() {
    $(this).hide();
}); 
```

当然，这假设`.popover2`在您的“实例化代码”运行时存在。

如果不，

```
$('.popover2').live('mouseleave', function() {
    $(this).hide();
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T21:46:15.410

只需删除内联并添加：

```
$('.popover2').mouseleave(function(){
    $(this).hide();
}); 
```

# css - CSS 无法在 IE 8、9 中正确呈现

> ID：11319633
> 
> 赞同：0
> 
> 时间：2012-07-03T21:43:16.657
> 
> 标签：css, internet-explorer

我对[http://abfoodpolicy.com/](http://abfoodpolicy.com/)有疑问。在 IE 8 和 9 中，右侧边栏向左渲染了大约 300 像素。我在 Mac 上工作，并使用 Adob​​e Browserlab 在 IE 中查看页面。我很想知道如何追踪这个问题。我不清楚从哪里开始，因为使用 Firebug 之类的东西并没有帮助。也许我没有正确使用 Firebug 来解决这个问题。

我会很感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T21:51:18.233

尝试`display: table`从`.abfp-content-layout`您的 CSS 中删除：

另外，如果你真的很想在 Mac 上测试 IE，你可以试试这个：[https ://stackoverflow.com/a/3844713/1363726](https://stackoverflow.com/a/3844713/1363726)

# html - ASP.net 文本框验证问题

> ID：11319643
> 
> 赞同：0
> 
> 时间：2012-07-03T21:44:11.810
> 
> 标签：html, validation, asp.net-4.0

我在 ASP.net 文本框控件上有一个正则表达式，用于验证用户输入它应该只是 6 到 200 个字符内的字母和数字这是我的代码

```
<asp:TextBox ID="txtCategory_description" runat="server" Style="width: 485px;" Height="70px"
                                                            TextMode="MultiLine"></asp:TextBox>
                                                    <asp:RegularExpressionValidator ID="RegularExpressionValidator2" runat="server" ErrorMessage="Invalid Category name"
                                                            ValidationExpression="^[a-zA-Z0-9._-]{6,200}$" ControlToValidate="txtCategory_description"
                                                            Display="None"></asp:RegularExpressionValidator> 
```

问题是我在文本框中写了任何像它一样的HTML代码接受它并将我发送到任何人可以帮助我的错误页面吗？

注意：在我的页面上我还有另一个正则表达式，如果我把它们都写错了，那个正则表达式也很好用，如果只是错误的，就会出现问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T22:44:12.020

`^([\-a-zA-Z0-9\._]){6,200}$`

正如@user1428799 所说，您需要 200，而不是 15。

那应该这样做。如果我错了，请纠正我，但连字符需要放在前面（紧跟在**[**之后，否则它被视为范围字符。

**编辑** 您也可以将其转义，因为您可能也必须对点进行转义。

# jquery - Symfony2 路由注释和 JavaScript

> ID：11319645
> 
> 赞同：0
> 
> 时间：2012-07-03T21:44:20.953
> 
> 标签：jquery, symfony, annotations, url-routing

我正在为我的路由使用注释。在我的 index.twig 模板中，我写了一些类似的 JQuery

```
 $(document).ready(function(){
    $('#sortable').NestedSortable(
        {
            accept: 'sort',
            noNestingClass: "no-children",
            helperclass: 'helper',
            autoScroll: true,
            onChange: function(serialized) {
            },
            onStop : function(){
                var element_id = $(this).attr("id");
                var parent_id = $(this).parent().attr("id");
                var prev_sibling_id = $(this).prev().attr("id");
 if(prev_sibling_id=='trash'){
    var data = {PID:element_id};
    $.ajax({
        type: "POST",
        data: data,
        url:"{{ path('v2_pm_patentgroups_trash') }}",
        cache: false,
        success: function(data) {
            document.location.reload(true);
        });
}
else if(parent_id=='sortable'){
     var p_sibling = $(this).prev().attr("value");
     if(p_sibling == null){var p_sibling = 0;}
     var n_sibling = $(this).next().attr("value");
     if(n_sibling == null){var n_sibling = 0;}
     var order = (p_sibling + n_sibling)/2;
     var data = {ID:element_id, ORD:order};
       $.ajax({
         type: "POST",
         data: data,
         url:"{{ path('v2_pm_patentgroups_sortgroups') }}",
         cache: false
       });
} 
```

现在您看到有两个 ajax 调用，一个在组被丢弃时调用，另一个在对组进行排序时调用。

该组是我的树枝文件中的 li 标签

```
 <li id="{{ portfolio_group.id }}" class="sort group" value={{ portfolio_group.order }}>
    <span class="drag-image groupimage">&nbsp;</span>
    <a class='expand'>{{ portfolio_group.name }}</a>
    <a class="button3" href="{{ path('v2_pm_patentgroups_edit', { 'patentgroupId': portfolio_group.id }) }}" ><span> Edit </span></a> 
            <a class="button3" href="{{ path('v2_pm_patentgroups_delete', { 'patentgroupId': portfolio_group.id }) }}" ><span> Delete </span></a>
    <hr class="separator">
 </li> 
```

任何人都可以指导我如何从我的 JS 中给出 url 的路径。我不想使用路由文件。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T21:59:43.850

When I need to pass data from the controller/view to the javascript I usually set data attributes on the relevant HTML tags. For example, if I need a route for an AJAX request I will write:

```
<a href="#updateTarget" class="ajaxTrigger" data-ajax-route="{{ path('my_ajax_route') }}">click here for ajax</a> 
```

and then access it with:

```
$('.ajaxTrigger').on('click', function(){
  $.getJSON($(this).data('ajax-route'), function(response) {
    // do something with response
  });
 }); 
```

There is also a bundle to do much more sophisticated things with dynamic JS routing [https://github.com/FriendsOfSymfony/FOSJsRoutingBundle](https://github.com/FriendsOfSymfony/FOSJsRoutingBundle)

**edit:** For your specific case you could set the route data on the container of the group, the `<ul>`

```
<ul id="portfolioContainer" 
    data-ajax-trash="{{ path('v2_pm_patentgroups_sortgroups') }}" 
    data-ajax-sort="{{ path('v2_pm_patentgroups_sortgroups') }}"> 
```

and then from your JS file you would refer to those data attributes:

```
$.ajax({
    type: "POST",
    data: data,
    url:$('#portfolioContainer').data('ajax-trash'),
    cache: false,
    success: function(data) {
        document.location.reload(true);
    }); 
```

# jquery - 转义撇号读取自 我刚刚在我的 JQuery 的一行中发现了一个错误，我不知道如何处理它。 // Enable valid swatch images $.each(sizes, function (index, element) { $("#variations img[alt='" + element + "']") .parent(). 问问题 问问题 2012-07-03T21:44:47.000 740 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我刚刚在我的 JQuery 的一行中发现了一个错误，我不知道如何处理它。 // Enable valid swatch images $.each(sizes, function (index, element) { $("#variations img[alt='" + element + "']") .parent().removeClass("swatchDisabled").addClass("swatchEnabled"); }); 问题出在 img 的选择器中。alt 属性值中有一个撇号。我无法轻松更改 alt 值，但我需要使用它，因为它包含我的代码逻辑的重要值。 是否有一种优雅的方式来转义这个/包含在这个 alt 标记中的任何撇号，以便 JQuery 不会阻塞它？ $("#variations img[alt='" + element.replace(/'/g, "\\'") + "']") http://jsfiddle.net/UwEqs/ jqueryjquery-selectors 4 1 回答 1 This answer is useful 2 $("#variations img[alt='" + element.replace(/'/g, "\\'") + "']") http://jsfiddle.net/UwEqs/ 于 2012-07-03T21:49:57.493 回答 Related 1 ios - 使用日历事件调用 ios 应用程序 3 java - 为什么这个算法是线性的而不是线性的？ 2 git - 跨不同 SCM 系统同时管理单个项目 2 java - @ApplicationException 的继承可以在 EJB 3.1 中被覆盖吗？ 1 jquery - Flexslider 未正确加载 1 .net - 有什么方法可以确定用户在 WebBrowser.ShowDialog() 中单击了打印还是取消？ 2 ruby - 如何使用 selenium-webdriver 获得倒数第三个值 boo？ 2 c++ - 在标准化之前多久可以使用“字符串”？ 1 android - Environment.getExternalStorageState() 在虚拟设备上返回 false 1 android - 我可以在操作栏中使用 2 导航模式吗？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：11319648
> 
> 赞同：0
> 
> 时间：
> 
> 标签：jquery, jquery-selectors

我刚刚在我的 JQuery 的一行中发现了一个错误，我不知道如何处理它。

```
// Enable valid swatch images
$.each(sizes, function (index, element) {
    $("#variations img[alt='" + element + "']")
         .parent().removeClass("swatchDisabled").addClass("swatchEnabled");
}); 
```

问题出在 img 的选择器中。alt 属性值中有一个撇号。我无法轻松更改 alt 值，但我需要使用它，因为它包含我的代码逻辑的重要值。

是否有一种优雅的方式来转义这个/包含在这个 alt 标记中的任何撇号，以便 JQuery 不会阻塞它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T21:49:57.493

```
$("#variations img[alt='" + element.replace(/'/g, "\\'") + "']") 
```

[http://jsfiddle.net/UwEqs/](http://jsfiddle.net/UwEqs/)

# excel - 多行运行宏

> ID：11319649
> 
> 赞同：0
> 
> 时间：2012-07-03T21:44:47.160
> 
> 标签：excel, vba

我有一个宏，它是为在一行上工作而编写的。我想在所有突出显示的行上运行这个宏。

有没有办法在选定的行之间循环并为每一行运行宏。

由于公司政策，我无法显示整个宏，但它基本上在 excel 中连续取值并将其填充到 word 模板中。这是宏的开始：

```
Sub OpenForm()
With Selection
    Dim pappWord As Object
    Dim docWord As Object
    Dim wb As Excel.Workbook
    Dim TodayDate As String
    Dim Path As String

    Set wb = ActiveWorkbook
    TodayDate = Format(Date, "mmmm d, yyyy")
    Path = wb.Path & "\MAF Template.dot"

    On Error GoTo ErrorHandler

     'Create a new Word Session
    Set pappWord = CreateObject("Word.Application")

    On Error GoTo ErrorHandler

     'Open document in word
    Set docWord = pappWord.Documents.Add(Path)
    'Blank for Qty
    docWord.FormFields("Text38").Result = Range(ActiveCell.EntireRow.Address)(1, 2) 'Part of System (System ID) 
```

....它填充更多字段并以：

```
 With pappWord
        .Visible = True
        .ActiveWindow.WindowState = 0
        .Activate
    End With

     'Release the Word object to save memory and exit macro
ErrorExit:
    Set pappWord = Nothing
    Exit Sub

     'Error Handling routine
ErrorHandler:
    If Err Then
        MsgBox "Error No: " & Err.Number & "; There is a problem"
        If Not pappWord Is Nothing Then
            pappWord.Quit False
        End If
        Resume ErrorExit
    End If
End With
End Sub 
```

所以它适用于单个 excel 行，而不是为每一行运行它，我想选择一些行并在所有行中运行宏。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T21:58:26.610

Try this:

```
Dim a As Range, b As Range

Set a = Selection

For Each b In a.Rows

    b.Value = "xpto"
    //your code will here...but only seeing your code to be more precise

Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T21:50:55.860

问：有没有办法在选定的行之间循环并为每一行运行宏？答：是的。例如，Google 搜索“VBAScript 单元格范围”。例如：

*   [http://support.microsoft.com/kb/291308](http://support.microsoft.com/kb/291308)

*   [http://spreadsheetpage.com/index.php/tip/referring_to_ranges_in_your_vba_code/](http://spreadsheetpage.com/index.php/tip/referring_to_ranges_in_your_vba_code/)

*   [http://www.excel-vba-easy.com/vba-programming-range-excel-vba.html](http://www.excel-vba-easy.com/vba-programming-range-excel-vba.html)

'希望这会有所帮助......至少有一点。

在我们为您提供进一步帮助之前，您必须发布一些代码并详细解释您的应用程序。

# ruby-on-rails - 让字体在 Rails 3.1 中工作？

> ID：11319650
> 
> 赞同：6
> 
> 时间：2012-07-03T21:44:55.247
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.1, font-awesome

我不知道怎么了。看来我做对了。我正在尝试在我的应用程序中使用[Font Awesome](http://fortawesome.github.com/Font-Awesome/#integration)，但字体没有出现。我有一个名为的文件夹`fonts`，`application.rb`其中包含以下行：

```
class Application < Rails::Application
 # Enable the asset pipeline
 config.assets.enabled = true
 # This line
 config.assets.paths << Rails.root.join("app", "assets", "fonts") 
```

而不是拥有 Font-Awesome 附带的 2 个 css 文件（**更改见下文**）（不需要 IE7 文件），我只是将主 css 放在我的`application.css`. 比我更改 url 来检测字体文件。

```
@font-face {
  font-family: "FontAwesome";
  src: url('<%= asset_path('fontawesome-webfont.eot') %>');
  src: url('<%= asset_path('fontawesome-webfont.woff') %>') format('woff'), 
  url('<%= asset_path('fontawesome-webfont.ttf') %>') format('truetype'), 
  url('<%= asset_path('fontawesome-webfont.svg#FontAwesome') %>') format('svg');
  font-weight: normal;
  font-style: normal;
} 
```

每次更改代码后，我都关闭了服务器并重新启动，但仍然没有好处。我错过了什么？

**更新：**

我没有使用 SASS 或 LESS。也许`@font-face`是问题所在？我以前从未见过这种类型的代码使用。

**更新**

我现在正在使用 font-awesome.css 文件。但它没有出现在我的源代码中。

```
<head>
  <link href="/favicon.ico" rel="shortcut icon" type="image/vnd.microsoft.icon">
  <link href="/assets/application.css?body=1" media="screen" rel="stylesheet" type="text/css">
  <link href="/assets/chosen.css?body=1" media="screen" rel="stylesheet" type="text/css">
  <script src="/assets/jquery.js?body=1" type="text/javascript"></script><style type="text/css"></style>
  <script src="/assets/jquery_ujs.js?body=1" type="text/javascript"></script>
  <script src="/assets/application.js?body=1" type="text/javascript"></script>
  <script src="/assets/chosen.jquery.min.js?body=1" type="text/javascript"></script>
</head> 
```

**完整答案**

这就是你如何让它在正常插入的情况下使用 Font-Awesome。

**引用自：[https :](https://gist.github.com/2251151) **//gist.github.com/2251151****

 **```
1\. Download font-awesome from https://github.com/FortAwesome/Font-Awesome

2\. Put the font folder font folder in the app/assets. I renamed the folder from font to fonts to make it clearer

3\. Add config.assets.paths << "#{Rails.root}/app/assets/fonts" to config/application.rb. This is to include the apps/assets/fonts folder in the asset pipeline

4\. Put the font-awesome.css file in the app/assets/stylesheets folder

5\. The first part of the css should be:

@font-face {
    font-family: 'FontAwesome';
    src: url('fontawesome-webfont.eot');
    src: url('fontawesome-webfont.eot?#iefix') format('embedded-opentype'), 
         url('fontawesome-webfont.woff') format('woff'), 
         url('fontawesome-webfont.ttf') format('truetype'), 
         url('fontawesome-webfont.svgz#FontAwesomeRegular') format('svg'), 
         url('fontawesome-webfont.svg#FontAwesomeRegular') format('svg');
    font-weight: normal;
    font-style: normal;
}

#---------------------------------------------------------------------------------------------

You should then be able to use:

<div style="font-size: 24px;">
  <i class="icon-camera-retro"></i> icon-camera-retro
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T01:29:10.423

您确实需要将该代码放入 css.scss 文件中，然后将其包含在 application.css 中（您将需要 css.scss 才能使用asset_paths）

更新：您将需要更改`*= font-awesome`为`*= require font-awesome`并重命名`font-awesome.css`为`font-awesome.css.scss`**

# javascript - 这个 Windows Metro Javascript 导航有什么问题？

> ID：11319651
> 
> 赞同：0
> 
> 时间：2012-07-03T21:45:14.480
> 
> 标签：javascript, microsoft-metro

我正在创建一个 Windows Metro 应用程序，其中 ListViews 作为每个页面上的主要元素。我遇到了在页面之间导航的问题，特别是导航太快：单击一个页面上的 ListView 项目以转到另一个页面，然后单击新页面。当我这样做太快时，我得到这个：

```
Exception was thrown but not handled in user code at line 20, column 13 in ms-appx://01c489fc-0e20-415d-ad4b-2895b4bc6e90/pages/groupedItems/groupedItems.js

0x800a138f - JavaScript runtime error: Unable to get property 'cloneNode' of undefined or null reference

If there is a handler for this exception, the program may be safely continued. 
```

这是什么意思？是否有任何技术可以阻止这种异常并允许快速导航？

这是错误的代码：

```
function multisizeItemTemplateRenderer(itemPromise)
{
    return itemPromise.then(function (currentItem)
    {
        var content;

    // Grab the default item template used on the groupeditems page.
    content = document.getElementById('multiTemplate');

    /*************************
     This line is where it fails:
     *************************/
    var result = content.cloneNode(true);

    // Change the CSS class of the item depending on the group, then set the size in CSS.
    switch (currentItem.groupKey)
    {
        case "1":
            {
                // Decides which item to resize based on items index
                if (currentItem.index == 0 || currentItem.index == 1)
                {
                    result.className = "largeitemtemplate"
                }

                else
                {
                    result.className = "mediumitemtemplate"
                }
                break;
            }

        default:
            {
                result.className = "smallitemtemplate"
            }
    }
    // Because we used a WinJS template, we need to strip off some attributes 
    // for it to render.
    result.attributes.removeNamedItem("data-win-control");
    result.attributes.removeNamedItem("style");
    result.style.overflow = "hidden";

    /************************
     If this try catch isn't here, a RuntimeException occurs during quick navigation.
     ************************/
    try{
        result.getElementsByClassName("item-image")[0].src = currentItem.data.backgroundImage;
        result.getElementsByClassName("item-title")[0].textContent = currentItem.data.title;
    } catch (exception) {
        console.log(exception.name +  ": " + exception.message);
    }
    return result;
});
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T13:44:39.070

我猜你的 ListView 中有很多元素。并且不等待整个页面将完全呈现。在单击此视图中的任何内容之前，请尝试再等一会儿。错误将消失 :) 单击后，新的渲染过程开始并且对象“文档”更改为新的。当前渲染器访问这个新文档，该文档具有另一个结构并且不包含 id='multiTemplate' 的元素。所以 document.getElementById('multiTemplate') 返回 null。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T02:18:09.243

也许[这个 MSDN 教程](http://msdn.microsoft.com/en-us/library/windows/apps/hh972605.aspx)会有所帮助：

```
// Because we used a WinJS template, we need to strip off some attributes 
// for it to render.
result.attributes.removeNamedItem("data-win-control");
result.attributes.removeNamedItem("style");
result.style.overflow = "hidden";

// Because we're doing the rendering, we need to put the data into the item.
// We can't use databinding.
return result; 
```

# php - php 将时间转换为 gmt 格式

> ID：11319653
> 
> 赞同：3
> 
> 时间：2012-07-03T21:45:27.933
> 
> 标签：php, time, gmt

我有这个字符串`2012-06-27 16:17:06`，我想将其转换为 GMT 格式。
我怎样才能做到这一点？

非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T21:47:50.477

使用[gmdate()](http://php.net/manual/en/function.gmdate.php)。
通过使用将当前日期格式转换为 UNIX 时间戳`strtotime`，然后使用`gmdate($format, $timestamp);`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T22:15:19.040

好吧，严格来说你做不到。如果您不知道该日期是在哪个 TZ 中生成的，则无法将其转换为另一个 TZ。

如果该日期来自数据库，您可能可以使用原始 TZ 查询日期。

```
$date = new DateTime( "2011-01-01 15:00:00", $original_TZ ); 
$date->setTimezone( "GMT" ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T21:51:33.960

PHP 的 DateTime 对象是一个不错的选择：

```
$GMT = new DateTimeZone("GMT");
$date = new DateTime( "2011-01-01 15:00:00", $GMT );
$date->setTimezone( $newTZ );
echo $date->format('Y-m-d H:i:s'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T22:05:39.190

```
// Set timeline
$time_line = time() +7200; // <-- this is timeline +2
$h = gmdate('h', $time_line);
$i = gmdate('i', $time_line);
$s = gmdate('s', $time_line);

$time = $h.":".$i.":".$s;

echo $time; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-09-20T13:09:29.167

试试这个，它会工作

```
$newTZ = new DateTimeZone("Asia/Calcutta");
date_default_timezone_set("Asia/Calcutta");  
$GMT = new DateTimeZone("GMT");
$date = new DateTime( "2018-09-20 6:00:00 PM", $newTZ );
$date->setTimezone($GMT);
echo $date->format('Y-m-d H:i:s'); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-03T21:50:33.427

尝试这个。

```
$time = '2012-06-27 16:17:06';
echo date("l, F j, Y, g:i a",strtotime($time) ); // assuming gmt format 
```

取自[如何在 PHP 中获得格林威治标准时间？](https://stackoverflow.com/questions/851574/how-do-i-get-the-gmt-time-in-php)

# iphone - 向下滚动时，在 HTML5 移动应用程序（PhoneGap）（如 Google Plus iPhone 应用程序）中为图像设置动画？

> ID：11319654
> 
> 赞同：1
> 
> 时间：2012-07-03T21:45:33.293
> 
> 标签：iphone, ios, animation, cordova

iPhone 应用程序上的 Google Plus 应用程序在向下滚动应用程序时具有这种动画图像的方式。很难描述。了解动画的最佳方式是下载最新更新，然后滚动浏览您的流。

简而言之，它似乎在您滚动时动态加载图像，然后应用一些动画组合（渐变显示+缩放）使图像慢慢淡入屏幕。动画仅在第一次显示图像时生效。换句话说，在上下滚动时，如果图像已经出现在流中，则动画不会发生。

在为 iOS 设备构建的移动 HTML5 应用程序上模拟此动画的最佳方法是什么，特别是包含在 PhoneGap 中？有人做过吗？动态加载可能是这个动画中最有趣/最具挑战性的元素，因为它非常流畅。

动态加载是否是一种错觉（即，它们实际上是否预加载了所有图像但在滚动时将它们动画化）？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T13:28:32.503

它的工作原理是：

1.  为图像的延迟加载编写代码（HTML+JS+CSS）
2.  修改图片加载代码，结合jquery`fade-in / fade-out`或者`ease-in / ease-out`effects

[您可以从此](https://stackoverflow.com/questions/2784418/lazy-load-images-when-they-come-into-the-viewport)链接找到有关延迟加载图像的有用链接和建议。

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T20:34:06.993

我要说的唯一与大多数其他人所说的不同的是它的动画方式。我怀疑在 HTML5 上下文中，特别是如果在 iOS 上使用 PhoneGap，他们正在使用 jQuery Fade-in-out动画。为什么？因为 webkit-transitions 和 transforms 在移动设备的上下文中更好/更流畅 - 而 PhoneGap 只使用 WebUI 视图。

如前所述，他们可能会延迟加载图像（预加载等）。所以我没有在这个小提琴中包括那个部分。但这里有一个如何使用 CSS3 过渡/变换来模拟缩放和淡入效果的示例。它在移动设备上超级流畅，尤其是与 jQuery 淡入淡出计数器部分相比（它也不会冻结 UI 线程）。

[http://jsfiddle.net/zXBDd/2/](http://jsfiddle.net/zXBDd/2/)

（这个小提琴适用于 webkit 浏览器）

这是适用于 iOS 设备的滚动版本：

[http://ijitsudesign.com/demos/scrollAnim/scrollExample.html](http://ijitsudesign.com/demos/scrollAnim/scrollExample.html)

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T21:38:00.057

当用户滚动到该 div 时，请查看这篇文章[JQuery fade-in a div](https://stackoverflow.com/questions/5367731/jquery-fade-in-a-div-when-user-scrolls-to-that-div)。答案和 Marcel 的 jsfiddle 示例应该足以让您入门。

# google-closure-compiler - 闭包编译器未编译所有符号

> ID：11319656
> 
> 赞同：0
> 
> 时间：2012-07-03T21:45:57.297
> 
> 标签：google-closure-compiler

我正在使用谷歌闭包编译器从我正在编写的库中挤出每个可能的字节。

该库由两个文件组成：

*   主[库](https://github.com/thanpolas/ready.js/blob/master/lib/ready.js)文件
*   我用来[导出库方法的文件](https://github.com/thanpolas/ready.js/blob/master/lib/ready.export.js)

我正在使用闭包构建器使用 ADVANCED_OPTIMIZATIONS 进行编译，我使用的选项在这个[grunt config](https://github.com/thanpolas/ready.js/blob/master/grunt.js)的 'compile' 键中。

阅读[编译后的文件](https://github.com/thanpolas/ready.js/raw/master/dist/ready.min.js)，我可以看到一些符号没有按应有的方式编译。我什至利用了这一事实并省略了导出一个方法，它被导出了（**addListener**）。其他方法只有在我导出它们时才会“未编译”，例如**removeListener**。

因此导出符号的编译代码如下所示：

```
var k = e;
k.C = g;
var l = g.prototype;
l.addCheck = l.j;
l.check = l.k;
l.addCheckListener = l.r;
l.removeCheckListener = l.s;
l.removeListener = l.removeListener; // why is that?
// taking advantage of addListener not being compressed, i omitted it, so saved
// a few more bytes:
// l.addListener = l.addListener; <----
l.isDone = l.o;
l.isDoneCheck = l.p;
k.C.prototype = l;
window.ss = {
    ready: k
}; 
```

为什么会发生这种情况，我可以做些什么来进一步优化生成的代码大小？

作为一个额外的问题，我创建了两个私有方法，以减少编译代码中**setTimeout**和**delete的使用。**然而，编译器选择内联我对这些方法所做的所有调用，导致在编译的源代码中多次调用未压缩的**delete**和**setTimeout 。**

例如

```
function rem(obj, key) { delete obj[key]; }
function doStuff() { 
    var anObject = {key:1};
    rem(anObject, 'key'); // 'key' isn't really a string literal in the code
} 
```

这被编译为：

```
function a(){var b={z:1}; delete b.z} 
```

有什么避免这种情况的提示吗？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T02:14:14.147

首先查看基于类型的属性重命名的闭包编译器维基页面（[https://code.google.com/p/closure-compiler/wiki/ExperimentalTypeBasedPropertyRenaming](https://code.google.com/p/closure-compiler/wiki/ExperimentalTypeBasedPropertyRenaming)）。第二次查看关于字符串内联的编译器常见问题解答（[https://code.google.com/p/closure-compiler/wiki/FAQ#Closure_Compiler_inlined_all_my_strings,_which_made_my_code_size](https://code.google.com/p/closure-compiler/wiki/FAQ#Closure_Compiler_inlined_all_my_strings,_which_made_my_code_size)）并回答问题：你只关心预 gzip 大小.

# ios - 重新加载数据时 UITableView 行不一致错误

> ID：11319658
> 
> 赞同：0
> 
> 时间：2012-07-03T21:46:13.457
> 
> 标签：ios, uitableview

所以我正在删除子视图中的对象，当我将导航堆栈返回到父表视图并重新加载数据时，我得到了错误

> 无效更新：第 4 节中的行数无效。更新后现有节中包含的行数（58）必须等于更新前该节中包含的行数（59），加上或减去数字从该部分插入或删除的行数（0 插入，0 删除）加上或减去移入或移出该部分的行数（0 移入，0 移出）。

所以 58 行的数量是正确的，但是我该如何解决这个错误，因为我实际上并没有删除这个视图中的项目或行，而是删除了子视图中的数据。在重新加载之前，我没有实际删除任何行。这个父视图实际上并不知道子视图在做什么，而只是获取一个新的数据源，其中包含 reload 方法中的所有更改。数据库在子视图中删除了项目，并且在父控制器的表视图中重新加载显示了这个新的更新项目计数。我是否必须计算自上次更新以来减少了多少行并以某种方式减少并设置一些行已删除属性？

调用表的 reloadData 方法时可以忽略一致性检查吗？

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    if (section==recentPhotosCellIndex) {  
       return [arrayOfPosts count] 
    }
    else
       return 1;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T22:03:28.503

您使用什么作为数据源？你确定你也从那里删除它吗？请注意，即删除了 0 行。检查您是否将其从视图以及数据源中删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T22:13:10.543

您还没有硬编码您的部分/行吗？

# wcf - 无法让 KnownType 与 WCF 一起使用

> ID：11319659
> 
> 赞同：1
> 
> 时间：2012-07-03T21:46:14.067
> 
> 标签：wcf, known-types

我在单独的程序集中定义了一个接口和一个类，如下所示：

```
namespace DataInterfaces
{
    public interface IPerson
    {
        string Name { get; set; }
    }
}

namespace DataObjects
{
    [DataContract]
    [KnownType( typeof( IPerson ) ) ]
    public class Person : IPerson
    {
        [DataMember]
        public string Name { get; set; }
    }
} 
```

这是我的服务接口：

```
public interface ICalculator
{
    [OperationContract]
    IPerson GetPerson ( );
} 
```

当我为我的客户更新我的服务参考时，我在 Reference.cs 中得到了这个：

```
public object GetPerson() {
    return base.Channel.GetPerson(); 
```

我希望 KnownType 会给我 IPerson 而不是这里的“对象”。

我也尝试`[KnownType( typeof( Person ) ) ]`过同样的结果。我可以控制客户端和服务器，所以我在这两个地方都有我的 DataObjects（在其中定义了 Person）和 DataInterfaces（在其中定义了 IPerson）程序集。我有什么明显的遗漏吗？我认为 KnownType 是能够使用 WCF 接口的答案。

----- 更多信息 ----- 我从 Person 类中删除了 KnownType 并添加了

```
[ServiceKnownType( typeof( Person ) ) ] 
```

到我的服务接口，正如理查德所建议的那样。客户端代理看起来还是一样的，

```
public object GetPerson() { return base.Channel.GetPerson(); 
```

，但现在它不会爆炸。但是，客户端只有一个“对象”，因此它必须在它有用之前将其转换为 IPerson。

```
 var person = client.GetPerson ( );
        Console.WriteLine ( ( ( IPerson ) person ).Name ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T22:53:27.527

如果您需要服务合同上的 [ServiceKnownType]，则 IPerson 程序集不需要 Person 程序集的知识。

```
[ServiceKnownType(typeof(Person))]
public interface ICalculator
{
    [OperationContract]
    IPerson GetPerson ( );
} 
```

或者，您可以使用采用方法名称的 KnownType[构造函数](http://msdn.microsoft.com/en-us/library/ms584302.aspx)的版本。然后可以从配置文件中找到已知类型

但是，我不明白您为什么在合同上使用接口。契约是传递消息的定义——在这种情况下接口如何提供帮助？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-12T03:20:10.913

继承的整个想法是基类不知道专门的类。用专门的类型装饰数据契约基类（通常定义在一个通用的 dll 中）似乎违反了基本的 OOD 原则？恕我直言 SvcUtil 应该为您完成这项工作，并在生成代理时使用已知类型。似乎在开发 svcutil 时甚至没有考虑基本的 OO。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T22:30:40.770

您需要将 KnownType 放在 IPerson 而不是 Person 上，如下所示：

```
[KnownType(typeof(Person))]
public interface IPerson
{
    string Name { get; set; }
} 
```

# jquery - 如何禁用列表的第一项可排序和放置目标

> ID：11319663
> 
> 赞同：4
> 
> 时间：2012-07-03T21:46:21.657
> 
> 标签：jquery, ruby-on-rails, jquery-ui

我有一个项目列表，我想让列表中的第一个项目不可排序且不可移动。列表中的第一项应始终作为列表中的第一项。但是，我似乎无法让它工作。这是我的排序代码：

```
jQuery ->
  $('#lineup').sortable(
    axis: 'y'
    items: ".ui-state-enabled"
    cancel: ".ui-state-disabled"
    update: ->
      $.post($(this).data('update-url'), $(this).sortable('serialize'))
  ); 
```

我正在使用 content_tag_for 来加载它：

```
%ul.nav.nav-tabs.nav-stacked#lineup{"data-update-url" => sort_lineups_url}
  - @pieces.each_with_index do |piece, index|
    - if index == 0
      = content_tag_for(:li, piece, :class => 'ui-state-disabled') do
        = link_to "#{(index + 1).to_s + ' - ' + piece.name}", '#'
    - else
      = content_tag_for(:li, piece, :class => 'ui-state-enabled') do
        = link_to "#{(index + 1).to_s + ' - ' + piece.name}", '#' 
```

我究竟做错了什么？我所做的一切似乎都无法阻止对第一项进行排序和/或移动

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T23:22:18.727

嗯，很难确定。我以前没有使用过可排序/可拖动组合，而且 UI 文档没有明确说明可排序/可拖动组合。

但是，从我在文档中阅读的内容来看，这样的事情应该可以工作：

```
$(function() {
    $("#lineup li").disableSelection().addClass('ui-state-default').eq(0).addClass('ui-state-disabled');//alternatively, write classes as HTML attributes
    $("#lineup").sortable({
        items: "li:not(.ui-state-disabled)" //should disable draggable and sortable
    });
}); 
```

# objective-c - 如何在 If 语句中使用 NSMutableString 作为条件

> ID：11319664
> 
> 赞同：0
> 
> 时间：2012-07-03T21:46:23.990
> 
> 标签：objective-c, ios, nsstring, asihttprequest, nsmutablestring

我有一个 web 服务和 ios 应用程序。我使用 `ASIHTTPRequest.h, ASIFormDataRequest.h`标头来处理与我的 php 脚本/mysql 数据库的连接

在其中一个视图控制器中，我需要向我的 Web 服务发送多个请求并处理每个响应，并且每次请求后都需要刷新视图控制器的视图和方法。

`ASIHTTPRequest`只有一个`(void)requestFinished:(ASIHTTPRequest *)request`事件，所以我需要在块内处理我的响应`(void)requestFinished:(ASIHTTPRequest *)request`来处理请求我的 requestfinish 方法中的条件`if ([checkRequest rangeOfString:@"like"].location != NSNotFound)`不起作用

VoteMe.h

```
@interface VoteMe : UIViewController<UITextFieldDelegate>{
 NSMutableString  *checkRequest;
}
@property (retain, nonatomic) NSMutableString  *checkRequest; 
```

投票.m

```
@synthesize checkRequest;
- (void)viewDidLoad
{
 [self showPicture];
}

-(void)showPicture
 {
     checkRequest =[NSMutableString stringWithString:@"showPicture"];

     //request a random picture url, from server
     NSURL *url = [NSURL URLWithString:showpicture];
     ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];

     [request setDelegate:self];
     [request startAsynchronous];
} 
-(IBAction)voteLike:(id)sender{

    checkRequest =[NSMutableString stringWithString:@"like"];

    NSURL *url = [NSURL URLWithString:voteup];
    ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];

    [request setDelegate:self];
    [request startAsynchronous];

    [self showPicture];

}
- (void)requestFinished:(ASIHTTPRequest *)request
{    

    if ([checkRequest rangeOfString:@"like"].location != NSNotFound) {
     //do smth
     }

    if ([checkRequest rangeOfString:@"showPicture"].location != NSNotFound) {
    //do someth else
    }
} 
```

上面代码的问题，当`-(IBAction)voteLike:(id)sender`被调用时，它应该将字符串更改`checkRequest`为“喜欢”，所以当响应`ASIFormDataRequest`到达时，如果条件可以正常工作

在断点我看到 checkRequest`Variable is not a CFString`

当我使用`Nsstring`而不是`NSMutableString`它时，结果相同

我知道之后我需要`retain`String`release`但我`alloc`不应该使用我仍然需要`retain/release`

我怎样才能实现我的目标？是否有更好的解决方案来检查 if 语句或修复`NSString`上述`NSmutableString`问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T21:51:41.587

当您将某物定义为属性 ( `checkRequest`)`self.checkRequest`时，请在代码中引用它时使用，除非您有**充分**的理由不这样做。如果您直接访问该变量，则您放在属性语句中的那些属性将被忽略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T21:52:56.920

请求完成时 checkRequest 不是字符串的原因是它已被释放，因为您永远不会保留它。您已经创建了一个保留属性，但在您直接访问实例变量时并未使用它。

要使用您的属性保留 checkRequest，您必须编写

```
self.checkRequest = [NSMutableString stringWithString:@"like"]; 
```

# android - 空闲时更换动态壁纸？

> ID：11319668
> 
> 赞同：1
> 
> 时间：2012-07-03T21:46:36.630
> 
> 标签：android

嗨，我只是想知道 android 中是否有一个选项或应用程序可以在空闲时控制 android 动态壁纸？例如，我有一个动态壁纸，它消耗大量电池，90% 的时间我什至看不到动态壁纸，因为我的手机在口袋里闲置。有什么东西可以控制吗？就像一个应用程序在空闲时自动将背景更改为图像而不是在它退出空闲模式后立即更改回实时 wp？

# sql-server - 如何让我的 webApp 在不同的 DBMS 之间顺利切换（DB 独立性）？

> ID：11319674
> 
> 赞同：3
> 
> 时间：2012-07-03T21:47:11.927
> 
> 标签：sql-server, database, informix, jooq, ddlutils

我有一个以 Informix 作为其后端数据库的 Java Web 应用程序。我的架构中的许多表都包含 CLOB、BLOB 和 SERIAL8 类型的列。现在我决定使用 SQL Server 而不是 Informix，但我发现将上述数据类型转换为相应的 SQL Server 时出现问题，例如当我转向使用 DB2 或 Oracle 时，我也会遇到同样的问题。匹配表之间关系的问题，因为每个数据库供应商都有自己的关系表示。

有没有办法设计我的应用程序和数据库模式，以便它可以与任何数据库服务器交互，而不管其类型如何并且不更改列数据类型？我听说过[DDLUtils](http://db.apache.org/ddlutils/)和[jOOQ](http://www.jooq.org)，但我不知道它们是否适合我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T08:13:51.790

好的，您可以在这里执行多个抽象级别：

首先，您需要将所有数据访问代码集中到独立实现中，并且仅通过接口访问这些代码，这些接口以仅适用于您的应用程序且不受底层数据存储设计影响的格式为您提供所需的数据。

例如，如果您想从某个客户订单中获取零件，请确保您用来查找的方法是处理对象的“业务 ID”的方法，因为实际 ID 在关系数据库中可能很长，但NoSQL 中的 UUID。

通过应用这一点，您将不受数据存储范式的束缚，您可以在平面文件、内存存储、NoSQL 和常规关系数据库实现之间自由切换。

其次，尝试使用像[Hibernate](http://www.hibernate.org/)这样的 ORM 。这允许您使用通用查询语言编写，并且在大多数情况下仅将数据库特定更改限制为配置更改。

第三，如果您需要直接编写 SQL 查询，请确保您编写的是 ANSI 查询而不是特定于数据库的查询，即使您确实要确保这些查询不是您的代码的一部分，而是资源（即属性文件）的一部分，以便您可以根据需要调整和更改它，而无需重新编译二进制文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T03:11:47.427

由于它是一个 Java 应用程序，因此您可以迁移到诸如[Hibernate之类的](http://www.hibernate.org/)[ORM](http://en.wikipedia.org/wiki/Object-relational_mapping)层，该层将抽象数据库详细信息。

Hibernate 支持 20 多个具有[现有方言](http://docs.jboss.org/hibernate/core/3.3/reference/en/html/session-configuration.html#configuration-optional-dialects)的数据库，创建自己的数据库并不难。为了与旧版 Informix SE 7.32 数据库兼容，我不得不这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T14:37:17.057

既然您提到[了 jOOQ](http://www.jooq.org)，我可以根据您的需求为您提供一些关于该工具可以实现什么以及不可以实现什么的见解。使用 jOOQ，您可以：

*   从模型数据库模式生成源代码。这些生成的模式对象与 SQL 方言无关。如果您在模型数据库模式中使用供应商特定的类型，这可能意味着您可能会丢失一些类型信息。
*   编写将在各种数据库上运行的 SQL。jOOQ 处理您的特定于 SQL 方言的事情。许多 jOOQ 用户使用 jOOQ 针对 [Oracle, Postgres], [Oracle, SQL Server, HSQLDB, Sybase] 等组合运行应用程序。

使用 jOOQ，您不能：

*   处理所需的 DDL，以便在各种数据库之间保持兼容。jOOQ 不支持 DDL 抽象。[不过， DdlUtils](http://db.apache.org/ddlutils/)可能是一个很好的解决方案。
*   使用 Informix。正式地，不支持 Informix（尚）

正如其他人所指出的那样，根据您真正想要做的“SQL”有多少，[Hibernate](http://www.hibernate.org/)可能是一个更好的选择。如果您准备将查询需求减少到 HQL 或 JPQL，那么 Hibernate 还可以处理：

*   Informix SQL 方言支持
*   如果您使用域模型优先方法，则生成 DDL（与 jOOQ 不同，它仅支持数据库模型优先方法）

注意，您也可以结合使用 Hibernate 和 jOOQ。另请参阅此相关问题：

[用于仅插入/仅查询应用程序的 ORM 框架](https://stackoverflow.com/questions/8903168/orm-frameworks-used-for-insert-only-query-only-apps)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T02:01:57.393

实现基于 SQL 的数据独立性的唯一方法是使用 ANSI SQL，但这可能无法为您的应用程序需求提供足够的功能。

即使您要使用 JDBC 并将您的 SQL 语句保持在外部，我认为它也不可能实现基于 SQL 的数据库独立性。我认为 ANSI SQL 是朝着这个目标迈出的一步，但是 DB 供应商添加了他们自己的：ANSI SQL 的超集、数据类型、变量命名语法等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T21:50:32.773

您使用独立于数据库的 API（即 JDBC）来编写代码，但将 SQL 保存在外部文本文件中；键/值格式很方便。在运行时，您加载给定数据库所需的查询。

# python - 当python文件必须使用#!/bin/env python时处理多个python版本

> ID：11319676
> 
> 赞同：10
> 
> 时间：2012-07-03T21:47:39.623
> 
> 标签：python, shebang

我有这个问题：

`System A`运行 Ubuntu 并且需要`Python 2.6`一堆不同的东西。
我在本机`Python 2.7`上单独安装。`System A`
`System B``Python 2.7`

我有一个 python 脚本`BLAH`，上面写着`#!/bin/env python`。
再往下，它执行另一个脚本`SIGH`，上面也说：`#!/bin/env python`.

`BLAH`需要在`System A`or上运行`System B`，并且它总是需要运行`Python 2.7`

----
到目前为止我的解决方案的一部分：
有一个包装脚本首先尝试查看是否`which python`指向 Python 2.7
如果没关系，那么`BLAH`使用该路径运行 python。
否则尝试`which python2.7`使用该路径运行`BLAH`，并将该路径添加到`env PATH`.

此解决方案的问题是：

On `System A`（单独安装了 Python 2.7）执行
时`BLAH`，由于我编写了包装脚本，它与 Python 2.7 一起运行（到目前为止还可以..）
当`BLAH`spawns时`SIGH`，`SIGH`使用 shebang 在路径中查找 python 然后它遇到了麻烦，因为它是在`env`'s中寻找 python，`PATH`它应该`python2.7`在路径中寻找。

有没有一种干净的方法来处理这个问题？

提前致谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-03T22:21:24.453

如果您有一个需要某个 python 版本的脚本，例如 2.7，我会将第一行更改为

```
#!/bin/env python2.7 
```

然后确保它`python2.7`在您的路径上（您可能必须根据需要添加符号链接）。在我使用的所有发行版中，这些符号链接已经存在。

（事实上​​，`python`通常是一个符号链接，`pythonX`它是一个符号链接，`pythonX.Y`或者在我的情况下是`python -> python2 -> python2.7`. ）

无需对完整路径进行硬编码，因为这可能因发行版或盒子而异。

但是，由于路径上名为 的可执行文件应该没有歧义`python2.7`，因此您应该没问题，而不必担心硬编码路径。

或者，在第一个脚本中，您可以直接调用 python 解释器，如下所示：

```
subprocess.Popen(['pythonX.Y', SCRIPT_NAME]) 
```

代替

```
subprocess.Popen([SCRIPT_NAME]) 
```

**编辑**正如 JF Sebastian 在评论中指出的那样，您可以在第一个参数中使用[sys.executable](http://docs.python.org/library/sys.html#sys.executable)以确保将第二个脚本传递给与第一个脚本相同的解释器。例如

```
subprocess.Popen([sys.executable, SCRIPT_NAME]) 
```

附带说明一下，这可能有用也可能没用，您可以通过以下方式访问脚本*中“当前”Python 解释器的版本*

```
import sys
print(sys.hexversion) 
```

这可能有助于确定正确的解释器是否正在运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T22:00:49.873

我要做的是首先直接更改`#!/bin/env`路径`python2.7`，例如：`#!/usr/local/bin/python2.7`将工作。

如果系统 A 和 B python2.7 路径位于不同的位置（这似乎是您的情况），您始终可以像这样创建符号链接：

```
ln -s /bin/python2.7 /usr/local/bin/python2.7 
```

它应该可以正常工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T22:41:36.747

为什么不使用 virtualenv？它允许您使用安装的任何 python 版本（除了其他东西）......

```
starenka /tmp % virtualenv test -ppython2.6
Running virtualenv with interpreter /usr/bin/python2.6
New python executable in test/bin/python2.6
Also creating executable in test/bin/python
Installing setuptools............................done.
Installing pip...............done.

starenka /tmp % source test/bin/activate

(test)starenka /tmp % which python
/tmp/test/bin/python

(test)starenka /tmp % python --version
Python 2.6.8

(test)starenka /tmp % echo '#!/usr/bin/env python\nimport sys; print sys.version_info' > test/test.py

(test)starenka /tmp % chmod +x test/test.py

(test)starenka /tmp % test/test.py
(2, 6, 8, 'final', 0)

starenka /tmp % virtualenv test7 -ppython2.7
Running virtualenv with interpreter /usr/bin/python2.7
New python executable in test7/bin/python2.7
Also creating executable in test7/bin/python
Installing setuptools............done.
Installing pip...............done.
starenka /tmp % source test7/bin/activate

(test7)starenka /tmp % which python
/tmp/test7/bin/python

(test7)starenka /tmp % python --version
Python 2.7.3rc2

(test7)starenka /tmp % echo '#!/usr/bin/env python\nimport sys; print sys.version_info' > test7/test.py

(test7)starenka /tmp % chmod +x test7/test.py

(test7)starenka /tmp % test7/test.py
sys.version_info(major=2, minor=7, micro=3, releaselevel='candidate', serial=2) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-02T17:34:38.570

*愚蠢而简单*

在外壳中，如果需要：

```
ln -s /path/to/your/python2.X /usr/local/bin/python2 
```

在 Python 脚本中：

```
#!/bin/bash
"exec" "python2" "$0" 
```

我遇到过这类问题，这个解决方案解决了大多数情况，并且可以轻松地从一个系统移植到另一个系统（您可能面临系统之间的不同路径、不同版本的软件......）。首先创建一个符号链接以确保您将运行正确版本的 Python（现在尤其如此，如果 Python3 只是 Python，您现在永远不会），然后依赖 bash 环境。因此，每次您将系统定位为不需要麻烦的软件包的 util-script 时，您都不会更改您的脚本。

# php - 如何确保日期采用以下格式：MM-DD-YY，包括破折号

> ID：11319680
> 
> 赞同：-1
> 
> 时间：2012-07-03T21:48:00.653
> 
> 标签：php, javascript, regex

我想验证日期是否采用以下格式：MM-DD-YY（包括破折号）。我如何在 PHP（或 JavaScript）中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T22:37:21.003

```
function validate_date($string) {
    $date = DateTime::createFromFormat('m-j-y', $string);
    if ($date === false) {
        return false;
    }
    $dateparts = explode('-', $string);
    if (!checkdate($dateparts[0], $dateparts[1], $dateparts[2])) {
        return false;
    }
    return true; // You can also make this return $date if you want to use it further
}

var_dump(validate_date('02-28-99')); // true
var_dump(validate_date('02-29-99')); // false 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T21:51:36.500

JS

```
function isValidDate(date)
{
    var matches = /^(\d{2})[-\/](\d{2})[-\/](\d{2})$/.exec(date);
    if (matches == null) return false;
    var d = matches[2];
    var m = matches[1] - 1;
    var y = matches[3];
    var composedDate = new Date(y, m, d);
    return composedDate.getDate() == d &&
            composedDate.getMonth() == m &&
            composedDate.getFullYear() == y;
}
console.log(isValidDate('10-12-61'));
console.log(isValidDate('12/11/61')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T21:54:29.377

代码：

```
$d = "02-05-20";

if(strlen($d) == 8 && checkdate($d[0].$d[1],$d[3].$d[4],$d[6].$d[7]))
{
    echo "Valid Date";
} 
```

检查字符串格式是否正确以及日期本身是否有效。

*   `02-05-20`验证`true`
*   `13-05-20`验证`false`（没有第十三个月）
*   `2-5-20`验证`false`

# hadoop - 如何使用 Hadoop MapReduce 处理一个二维数组，每个文件一个？

> ID：11319681
> 
> 赞同：1
> 
> 时间：2012-07-03T21:48:04.510
> 
> 标签：hadoop, mapreduce

我需要将文件作为一个单元读取和处理，而不是逐行读取和处理，并且不清楚如何在 Hadoop MapReduce 应用程序中执行此操作。我需要做的是读取文件的第一行作为标题，我可以将其用作我的键，并将以下几行作为数据来构建一个二维数据数组，我可以将其用作我的值。然后，我将对整个二维数据数组（即值）进行一些分析。

下面是我打算如何解决这个问题，如果这看起来不合理或者如果有更好的方法来解决这个问题，我将非常感谢评论（这是我第一个认真的 MapReduce 应用程序，所以我可能正在制作新手错误）：

1.  我的文本文件输入包含一行包含站信息（名称、纬度/经度、ID 等），然后包含一个或多行包含年份值（即 1956）加上 12 个月值（即 0.3 2.8 4.7 ...）分隔按空格。我必须对整个月值数组 [number_of_years][12] 进行处理，因此每条单独的行在孤立时都是没有意义的。

2.  创建一个自定义键类，使其实现 WritableComparable。这将保存输入文本文件初始行的标题信息。

3.  创建一个自定义输入格式类，其中 a) isSplitable() 方法返回 false，b) getRecordReader() 方法返回一个自定义记录读取器，该读取器知道如何读取文件拆分并将其转换为我的自定义键和值类。

4.  创建一个映射器类，它对输入值（每月值的二维数组）进行分析并输出原始键（站头信息）和输出值（分析值的二维数组）。将只有一个包装减速器类，因为没有真正的减少要做。

目前尚不清楚这是 map reduce 方法的良好/正确应用 a) 因为我正在对映射到单个键的单个值（数据数组）进行分析，并且 b) 因为永远不会超过一个每个键的值（数据数组），则不需要执行真正的缩减。另一个问题是我正在处理的文件相对较小，远小于默认的 64MB 拆分大小。在这种情况下，也许第一个任务是将输入文件合并到一个序列文件中，如 Definitive Hadoop O'Reilly 书中的 SmallFilesToSequenceFileConverter 示例所示（第 2 版中的第 194 页）？

提前感谢您的意见和/或建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T14:05:07.220

看起来你关于编码的计划是正确的，我会做同样的事情。如果您有很多输入文件作为作业的输入提供，您将从 hadoop 中受益，因为每个文件都有自己的 InputSplit，并且在 Hadoop 中执行的映射器的数量与输入拆分的数量相同。太多的小文件会导致 HDFS Namenode 上的内存使用过多。要合并文件，您可以使用 SequenceFiles 或 Hadoop Archives（与 tar 等效的 hadoop）[请参阅 docs](http://hadoop.apache.org/mapreduce/docs/r0.22.0/hadoop_archives.html)。使用 har 文件（Hadoop 档案），每个小文件都有自己的 Mapper。

# iphone - glDrawElements 在 iPhone 上错误地渲染点

> ID：11319691
> 
> 赞同：2
> 
> 时间：2012-07-03T21:48:56.130
> 
> 标签：iphone, ios, opengl-es, xcode4.3

我对 iOS 上的 OpenGL 开发相当陌生。我正在开发能够以 *.ply 文件的形式创建对象的 3D 重建的软件。我正在尝试制作一个 iOS 应用程序来可视化这些简单的仅顶点 *.ply 文件。在 iPhone 和 iPad 模拟器上一切正常，但是当我在 iPhone 上运行它时，视图中呈现的点出现故障并被大方块覆盖。这是比较：[iPhone](http://imgur.com/R1vs2)和[模拟器](http://imgur.com/HnlmB)。有没有人遇到过与 OpenGL 类似的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T22:14:39.967

重要的是要了解，在模拟器上运行 OpenGL ES 代码时，您实际上是在模拟器的软件实现上而不是在 GPU 上运行它。

模拟器的实现与设备 GPU 上的实现接近，但并不完全相同。这意味着错误代码可能会在模拟器上正常渲染。我亲身经历过几次，比如在使用 glbuffers 并且没有分配足够的存储空间时。

显然很难说你的代码哪里出错了，但我建议你仔细检查你的代码并寻找细微的错误。

# python - 如何使用python在两个数组中查找匹配的数据点并返回第三个？

> ID：11319693
> 
> 赞同：2
> 
> 时间：2012-07-03T21:49:04.913
> 
> 标签：python, numpy

我是 python 新手，并试图从其他 2 个数组中创建第三个数组。我有两个变量（X 和 Y）都与深度有关，但不在完全相同的深度点上。我想检查与 X 相关的深度值，并在数组 Y 中找到深度在 X 深度 50 厘米以内的深度值。然后在第三个数组中返回深度和 Y 值。

我认为'for'循环可能会这样做，但我不知道如何。

代码：

```
A = np.genfromtxt('file.txt', names=True)
B = np.genfromtxt('file2.txt', names=True)

Depth1 = A['Depth']
X = A['variable1']

Depth2 = B['Depth']
Y = B['number'] 
```

A 包含 806 行，B 包含 456。

我想过滤 A 并提取对应于 B 中每个深度点 50cm 以内的值（深度和 X），最好提取到另一个数组中。

我怎样才能做到这一点？我发现在线搜索的内容涵盖了带有 for 循环的列表，但不包括数组。

**样本数据：**

```
A = [(0.6, 1.463) (0.95, 1.468) (1.7, 1.465) (2.5, 1.502) (265.38, 1.715) ... (Depth1, X)]
B = [(0.58, 0.726) (0.93, 0.688) (1.69, 0.713) (2.48, 0.606) ... (Depth2, Y)] 
```

**样本输出：**

```
C = [(0.58, 1.463) (0.93, 1.468) (1.69, 1.465) ... (Depth2, X)] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T22:05:28.830

```
depths = [a[(i-50\. <= a) & (a <= i+50.)] for i in b] 
```

**编辑：**回应评论，这不是正在发生的事情。`a`并且`b`是 numpy.arrays；`i-50\. < a`计算一个标志数组，`1`在每个位置的值 > i-50.，然后`a[flagarray]`只返回标志数组包含 1 的条目。`&`组合两个标志数组，以便仅提取感兴趣的值. 希望有帮助。

**编辑2：**类似的东西

```
result = []
for i,n in zip(depth2,y):
    mask = (i-50\. <= a) & (a <= i+50.)
    result.append((n, depth1[mask], x[mask])) 
```

**Edit3：**看起来，对于每个 B 深度，您想要一个值 - 最近对应 A 深度的标签？

```
import numpy as np

a = np.array([[0.6, 1.463], [0.95, 1.468], [1.7, 1.465], [2.5, 1.502], [265.38, 1.715]])
b = np.array([[0.58, 0.726], [0.93, 0.688], [1.69, 0.713], [2.48, 0.606]])

d1 = a[:,0]
x = a[:,1]

d2 = b[:,0]
y = b[:,1]

def find_index_of_nearest_value(array, value):
    return np.abs(array - value).argmin()

c = [(d, x[find_index_of_nearest_value(d1, d)]) for d,y in b] 
```

结果是

```
[(0.58, 1.463), (0.93, 1.468), (1.69, 1.465), (2.48, 1.502)] 
```

这可以通过对深度数组进行排序并按升序遍历它们来加快速度 - 但对于少于 1000 个值，这应该足够快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T22:37:05.180

代码：

```
A = [(0.6, 1.463), (0.95, 1.468), (1.7, 1.465), (2.5, 1.502), (265.38, 1.715)]
B = [(0.58, 0.726), (0.93, 0.688), (1.69, 0.713), (2.48, 0.606)]

tolerance = 0.5 
print "\nTolerance: {0}\n".format(tolerance)

for b in B:
    print "B value: {0}".format(b)
    a_vals = [a for a in A if (b[0] + tolerance) > a[0] > (b[0] - tolerance)]
    print "  A values: {0}".format(a_vals) 
```

输出：

```
Tolerance: 0.5

B value: (0.58, 0.726)
  A values: [(0.6, 1.463), (0.95, 1.468)]
B value: (0.93, 0.688)
  A values: [(0.6, 1.463), (0.95, 1.468)]
B value: (1.69, 0.713)
  A values: [(1.7, 1.465)]
B value: (2.48, 0.606)
  A values: [(2.5, 1.502)] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T22:14:39.513

您可以使用分段函数。例如，要查找大于 4 且小于 6 的数组中的所有项目，如下所示：

```
n = numpy.array(range(10))
n = numpy.piecewise(n, [ n<4, n>6 ], [0, 0, lambda x: x])
n.sort()[::-1] 
```

这种方法不会过滤结果，而是将意外结果设置为零。这具有保持在 numpy 内的优势，这将带来更好的性能。

# r - 如何在 Ubuntu 上安装 R 包“RNetCDF”和“ncdf”？

> ID：11319698
> 
> 赞同：9
> 
> 时间：2012-07-03T21:49:20.083
> 
> 标签：r, installation, deb, netcdf

我想在 Ubuntu 中使用 R 包 RNetCDF 和 ncdf。

当我尝试`install.packages('RNetCDF')`or`install.packages('ncdf')`时，我收到类似的错误：

```
...
ncdf.c:3:20: fatal error: netcdf.h: No such file or directory
compilation terminated.
make: *** [ncdf.o] Error 1
ERROR: compilation failed for package ‘ncdf’
...
Warning message:
In install.packages("ncdf") :
  installation of package ‘ncdf’ had non-zero exit status 
```

安装包`libnetcdf6`和`netcdf-bin`来自 Ubuntu 存储库。我需要做其他事情吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-04T14:43:21.630

您需要安装`-dev`这些包以获取编译包所需的标头。在这种情况下，您需要`libnetcdf-dev`和`udunits-bin``libudunits2-dev`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-07-09T10:06:57.997

就我而言，需要 libudunits2-dev 包。

`sudo apt-get install libudunits2-dev`

由于我从源代码安装了 NetCDF，我必须手动指定*lib*的位置并*包含*文件夹

```
install.packages("/home/user/Downloads/RNetCDF_1.6.1-2.tar.gz", 
repos = NULL,
type="source",
dependencies=FALSE,
configure.args="--with-netcdf-include=/usr/local/netcdf-4.2.1-build/include --with-netcdf-lib=/usr/local/netcdf-4.2.1-build/lib") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-19T15:49:31.710

只是为了澄清一下，因为您最初的问题是在 R 中，并且修复程序是在 R 之外应用的。我最初试图做

> install.packages("libnetcdf-dev")，它不起作用。

相反，从 R 外部： sudo apt-get install libnetcdf-dev

那为我修好了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-15T08:55:17.070

在 Ubuntu 20.04 LTS 中，可以使用 bash 命令安装 ncdf4 包（它[取代 ncdf](http://cirrus.ucsd.edu/%7Epierce/ncdf/)），包括所有依赖项`sudo apt install r-cran-ncdf4`。同样对于 RNetCDF，您可以使用`sudo apt install r-cran-rnetcdf`.

# java - 谷歌自定义搜索 API

> ID：11319705
> 
> 赞同：1
> 
> 时间：2012-07-03T21:50:31.020
> 
> 标签：java, google-api

如何使用 JAVA 使用 Google 自定义搜索 API 的一种方法？Google Search Appliance API 的适当用途是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T03:54:02.567

这是谷歌自定义搜索 API 示例。您需要下载库，示例在这里

```
public class Custom {
public static void main(String args[]) throws IOException  {
        String key="Replace with your API key";
        String qry="batman";// search key word
        URL url = new URL(
                "https://www.googleapis.com/customsearch/v1?               
                key="+key+"&cx="Replace with unique ID"&q="+ qry + 
                "&alt=json");
        HttpURLConnection conn = (HttpURLConnection) url.openConnection();
        conn.setRequestMethod("GET");
        conn.setRequestProperty("Accept", "application/json");
        BufferedReader br = new BufferedReader(new InputStreamReader(
                (conn.getInputStream())));

        String output;
        System.out.println(url);
        System.out.println("Output from Server .... \n");
        while ((output = br.readLine()) != null) {

            if(output.contains("\"link\": \"")){                
                String link=output.substring(output.indexOf("\"link\": \"")+
                       ("\"link\": \"").length(), output.indexOf("\","));
                System.out.println(link);
            }     
        }
        conn.disconnect();   
    }

  } 
```

# ruby-on-rails - rails 什么时候设置会话 id

> ID：11319711
> 
> 赞同：0
> 
> 时间：2012-07-03T21:50:48.773
> 
> 标签：ruby-on-rails, sessionid

在我们的代码中，我们在用户登录时重置会话信息，以便生成新的会话 ID。会话信息在登录过程中在应用程序控制器中重置。该重置清除了登录请求中的会话 ID。

我无法确定何时生成新的会话 ID。有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T22:16:26.427

> 会话被延迟加载。如果您不访问操作代码中的会话，它们将不会被加载。因此，您永远不需要禁用会话，只需不访问它们就可以完成这项工作。

来自[http://guides.rubyonrails.org/action_controller_overview.html#session](http://guides.rubyonrails.org/action_controller_overview.html#session)

这意味着一旦您访问`session`代码中的哈希，它就会生成。

# javascript - 如何在没有代码隐藏访问的情况下将自定义 HTML 属性添加到 ASP.NET 标签？

> ID：11319713
> 
> 赞同：2
> 
> 时间：2012-07-03T21:50:56.717
> 
> 标签：javascript, asp.net, html, server-side, serverside-javascript

我正在对网站进行一些修改，但它由第三方托管，因此我没有代码隐藏访问权限，如何将自定义 HTML 属性（丰富片段）添加到 ASP 标签或其他元素？

代码： `<asp:Label ID="lblPositionTitle" runat="server"></asp:Label>`

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T21:59:21.410

我认为这会起作用：

```
<asp:Label ID="lblPositionTitle" runat="server" richAttribute="value"></asp:Label> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T21:59:32.143

`jquery`可用吗？...只需添加如下属性：

```
<script> 

$("#<%=lblPositionTitle.ClientID%>").attr("newAttributeName", "theValue"); 

</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-09T17:54:58.833

正在使用 HTML5，可以使用 data-* 属性： [https ://www.w3schools.com/tags/att_global_data.asp](https://www.w3schools.com/tags/att_global_data.asp)

# hadoop - Hadoop DFS 的 CopyFromLocal 命令如何工作？

> ID：11319714
> 
> 赞同：2
> 
> 时间：2012-07-03T21:51:15.767
> 
> 标签：hadoop, hdfs

我对如何设置 Hadoop 分布式文件系统以及我的特定设置如何影响它有点困惑。我使用本指南在 Virtual Box 上使用两个虚拟机设置[http://www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-multi-node-cluster/](http://www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-multi-node-cluster/)并运行了示例（只是一个带有 txt 文件输入的简单字数）。到目前为止，我知道 datanode 管理和检索其节点上的文件，而 tasktracker 分析数据。

1) 当您使用命令 -copyFromLocal 时，您是否正在将文件/输入复制到 HDFS？Hadoop是否知道如何在slave/master之间划分信息，它是如何做到的？

2）在上面链接的指南中概述的配置中，技术上是否有两个从设备（主设备既作为主设备又作为从设备）？这是常见的还是主机通常只给jobtracker/namenode任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T22:59:52.643

这里有很多问题。

问题2）

1.  有两台机器
2.  这些机器针对 HDFS 和 Map-Reduce 进行了配置。
3.  HDFS 配置需要 Namenode (master) 和 Datanodes (Slave)
4.  Map-reduce 需要 Jobtracker (master) 和 Tasktracker (Slave)
5.  只配置了一个 Namenode 和 Jobtracker，但您可以在两台机器上拥有 Datanode 和 Tasktracker 服务。不是机器充当主机和从机。这只是服务。您还可以在包含主服务的机器上安装从服务。它适用于简单的开发设置。在大规模部署中，您将主服务专用于不同的机器。

问题 1 第 2 部分）

1.  以复制的方式创建文件块并存储在多个数据节点上是 HDFS 的工作。你不必担心。

问题 1 第 1 部分）

1.  Hadoop 文件操作的模式类似于典型的 Unix 文件操作 - ls、put 等
2.  Hadoop fs -put localefile /data/somefile --> 将本地文件复制到路径 /data/somefile 的 HDFS
3.  使用 put 选项，您还可以从标准输入读取并写入 HDFS 文件
4.  copyFromLocal 类似于 put 选项，只是行为仅限于从本地文件系统复制到 HDFS
5.  请参阅：[http ://hadoop.apache.org/common/docs/r0.20.0/hdfs_shell.html#copyFromLocal](http://hadoop.apache.org/common/docs/r0.20.0/hdfs_shell.html#copyFromLocal)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T23:16:00.707

1)

*   客户端连接到名称节点以在 HDFS 中注册一个新文件。
*   名称节点创建有关文件的一些元数据（使用默认块大小或文件的配置值）
*   对于要写入的每个数据块，客户端查询名称节点以获取块 ID 和目标数据节点列表以将数据写入。然后将数据写入每个数据节点。

Javadoc 中有更多信息`org.apache.hadoop.hdfs.DFSClient.DFSOutputStream`

2) 一些生产系统将被配置为使主节点成为自己的专用节点（允许最大可能的内存分配，并避免 CPU 争用），但如果您有一个较小的集群，那么一个包含名称节点和数据节点的节点可以接受

# algorithm - 变硬币

> ID：11319718
> 
> 赞同：7
> 
> 时间：2012-07-03T21:51:35.893
> 
> 标签：algorithm, dynamic-programming

我正在尝试解决一个经典的动态编程硬币找零问题。这是一个家庭作业问题，我不是在寻找完整的解决方案，只是为了看看我做错了什么。

输入：

*   `x`我们想用硬币支付一定价值的金额。
*   一组`d`表示可用硬币面额的数量（1c、5c、10c、25c、100c、200c）

输出：

*   需要换手付款的最小硬币数量。

假设：

*   收银机操作员拥有无限的硬币供应，并且知道如何提供最佳零钱。

到目前为止我试图做的事情：

我正在尝试构建一个数组 C，使得每个元素 C[i] 是交换金额 i 的硬币的/最小/数量。

C[0] = 0

对于 C[i]，对于所有可用的硬币面额，我通过取所有 C[i-di] 加 1 的最小值来计算它。然后我从可用硬币中取出我挑选的硬币。

这种方法似乎适用于简单的情况，但是当我有时，例如：

99 99 0 0 0 1 0

我的方法失败了，因为以 1 美元换取 2 个硬币比支付 99 美分（交换 99 个硬币）更“便宜”。

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T23:02:16.903

问题似乎是当你达到你正在寻找的价值时你会停下来。如果您继续前进，找出使值大于 x 的最小硬币数量，然后将最小硬币数量添加到寄存器操作员以进行适当更改，并从这个较大的列表中取最小值，您应该能够回答这个问题。

编辑：如果您使用两个数组，您可以稍微简化这一点，一个用于您可以制作的值，一个用于寄存器可以制作的值。然后你可以以某种方式比较它们以获得你的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-01T01:54:16.660

要点：硬币可以重复。

解决方案：构建一个数组，其中 ARR[i] = 最小硬币数以使值 i。

一些伪代码：

```
ARR[MAX] = {MAXIMUM VALUE} // set all elements in the array to have some big value
ARR[0] = 0

for C in coins
 for i = 0; i <= needed_value; ++i
   if i+C <= needed_value && ARR[i+C] > ARR[i]+1
     ARR[i+C] = ARR[i]+1

Example:
coins = {1, 3}
needed_value = 8
ARR[] = 0 INF INF INF INF INF INF INF INF
after using the coin with value 3, we will have
ARR[] = 0 INF INF 1 INF INF 2 INF INF
after using the coin with value 1, we will have
ARR[] = 0 1 2 1 2 3 2 3 4
=> we need 4 coins to make the sum 
```

# objective-c - Cmd + 单击移动状态项

> ID：11319720
> 
> 赞同：6
> 
> 时间：2012-07-03T21:51:40.230
> 
> 标签：objective-c, macos, nsstatusitem

内置电池、Wi-Fi、声音等，Apple 提供的状态项，可以通过使用 cmd + 单击并拖动来拖动到菜单上的任何位置：

![](../Images/0debb03cca8c04dbef8e7d62b222e5a2.png)

如何在我自己的状态项中支持类似的功能？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-03T22:27:59.013

有两种方法可以获取菜单栏右侧的菜单。官方支持的方式是在您的应用程序中创建一个`NSStatusItem`。另一种方法是创建一个`NSMenuExtra`. 您已经注意到一个区别：`NSStatusItem`菜单是固定的，而附加菜单可以通过 cmd 拖动来移动。

另一个主要区别，也是不正式支持 3rd-party menu extras 的原因是，与状态项（作为单独的应用程序运行）不同，menu extras 被加载到 SystemUIServer 进程的地址空间中。这意味着如果他们失控并崩溃，他们可以取消 UI。

您可以在 中查看安装在系统上的 Menu Extras `/System/Library/CoreServices/Menu Extras`。仍然可以创建您自己的并让操作系统加载它们，但是如果您尝试发布结果，您会遇到问题。最好去 bugreport.apple.com 让他们知道 NSStatusItems 应该是可拖动的。

[Wikipedia 上有更多关于 Menu Extras](http://en.wikipedia.org/wiki/Menu_extra)的信息，包括一些[关于构建自己的教程的](http://cocoadevcentral.com/articles/000078.php)链接。

# c - 数组 C 中的最大值

> ID：11319724
> 
> 赞同：1
> 
> 时间：2012-07-03T21:52:06.860
> 
> 标签：c

我得到一个编译错误，我无法真正修复。我需要创建一个初始化 in 数组的程序，然后编写一个最大的函数，该函数接受 2 个参数、一个数组及其长度并返回数组中最大元素的索引。然后我将从 main 调用这个函数。谁能告诉我有什么问题？

```
errors:part1.c: part1.c: In function 'main':
part1.c:6:3: warning: implicit declaration of function 'largest'
part1.c:7:23: error: expected expression before ']' token
part1.c: In function 'largest':
part1.c:17:4: warning: statement with no effect 
```

谢谢！

```
#include <stdio.h>

int main()
{
  int myArray[]={1,2,3,4,5,6};
  largest(myArray,6);
  printf("%d",myArray[]);
  return 0;
} 

int largest(int array[], int length)
{
  length = sizeof(array)/sizeof(array[0]);
  int i = 1;
  int max = array[0];

  for(i; i<length; i++)
  {
    if(max < array[i])
    {
      max = array[i];
    }
  }
  return max;
 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T21:55:02.047

**问题 1**

在定义它之前使用`largest()`in 。`main()`使用原型，或移动上面的定义`main()`。

**问题 2**

在：

```
length = sizeof(array)/sizeof(array[0]); 
```

您将长度声明为`int length`，但为其分配一些类型`size_t`。这导致了`error: 'length' redeclared as different kind of symbol`您问题的原始版本中的错误。

**问题 3**

在

```
for(i; i<length; i++) 
```

你没有给 i 赋值。你的意思

```
for(i=0; i<length; i++) 
```

? 尽管您之前确实为 分配了一个值`i`，但我相信这是导致的`warning: statement with no effect`（尽管在提供的代码中没有行号很难确定）。

此外，C 中的数组是从 0 开始的。您可能希望初始化`i`为 0 而不是 1。

**第 4 期**

在行

```
printf("%d",myArray[]); 
```

您使用 %d 作为格式说明符，这意味着提供的参数应为整数值。您改为提供一个数组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T21:55:07.937

C 一次编译您的代码。这意味着一切都应该在使用**之前**定义。您的函数`largest`是在使用后定义的，因此一旦编译器看到

```
largest(myArray,6); 
```

它仍然不知道`largest`存在！

解决方案是移动`largest`上面的定义`main`，或者更好的是，**前向声明**函数：

```
#include <stdio.h>

int largest(int array[], int length);

int main()
{
    int myArray[]={1,2,3,4,5,6};
    largest(myArray,6);
    printf("%d",myArray[]);
    return 0;
} 

int largest(int array[], int length)
{
    /* implementation of largest */
} 
```

* * *

此外，`sizeof(array)`不会为您提供元素的数量，`largest`因为该信息在函数调用时会丢失。您可以在函数调用中将该表达式上移以计算并传递长度参数：

```
largest(myArray,sizeof(myArray)/sizeof(myArray[0])); 
```

* * *

这也可能是一个错字，但您可能打算存储和打印最大值：

```
int max = largest(myArray,sizeof(myArray)/sizeof(myArray[0]));
printf("%d\n",max); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T21:55:12.957

放置一个`largest()`before声明`main()`来解决*隐式声明警告*：

```
int largest(int array*, int length);

int main() 
```

* * *

错误*错误：']' 标记之前的预期表达式*是由以下原因引起的：

```
printf("%d",myArray[]); 
```

要打印最大值，您需要存储结果`largest()`或将其用作参数`printf()`：

```
printf("%d", largest(myArray, 6)); 
```

* * *

这不是你所期望的：

```
length = sizeof(array)/sizeof(array[0]); 
```

当作为参数传递时，数组会衰减为指针。它相当于：

```
length = sizeof(int*)/sizeof(int); 
```

只需使用`length`参数来控制迭代。建议将参数设置`largest()` `const`为，因为函数不会修改它们。

* * *

*警告：无效的语句*是由以下引起`i;`的`for`：

```
for(i; i<length; i++) 
```

改成：

```
for(; i<length; i++) 
```

或者：

```
for(i = 0; i<length; i++) 
```

或者如果 C99：

```
for(int i = 0; i<length; i++) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T22:00:20.983

您也可以将最大（）的定义移到 main（）的定义之上，它会起作用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T22:03:38.177

许多人指出了许多问题，但很惊讶没有人提到这一点：

```
int largest(int array[], int length)
{
  length = sizeof(array)/sizeof(array[0]); 
```

不，`sizeof`不做你认为它在这里做的事情。它不会神奇地知道分配的大小，只需要底层类型的大小。你所做的相当于`sizeof(int*)/sizeof(int)`.

你应该相信调用者给你的长度参数。无法使用 获取数组的实际大小`sizeof`，只能让调用者告诉你它有多大。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-03T21:55:25.847

您有错误和警告..错误显然更重要。

```
 printf("%d",myArray[]); 
```

`%d`格式规范暗示您要写入一个值，但`int`事实并非如此，并且可能是您的错误的原因。

还有其他警告值得您注意，例如没有为您的“最大”函数提供函数*原型*等，但这些警告对于修复阻止编译的错误是次要的。

当然也应该消除这些警告，或者在检查它们之后有意识地决定忽略它们。

# android - 如何从非活动状态机切换活动？

> ID：11319725
> 
> 赞同：0
> 
> 时间：2012-07-03T21:52:56.440
> 
> 标签：android, class, android-activity, switch-statement, state-machine

# 问题：

> 我已经为我的 android 应用程序编写了状态机。它是独立的类，Android 4.0.3 StateMachine 的扩展。我希望这个SM可以切换活动。
> 是否可以实施？
> 我的意思是这样的事情
> 
> `startActivity(new Intent(CurrentActivity.this, NextActivity.class))`
> 
> 不是从当前活动中调用的，而是在我的状态机中调用的。
> 感谢并为我糟糕的英语感到抱歉。

# 我的解决方案：

### （特别感谢@Jan-Henk）

在我的 CurrentActivity 调用
`stateMachine.sendMessage(SM.MSG_SWITCH_ACTIVITY, CurrentActivity.this);`
和我的 State 中放置下一个代码：

```
@Override
public void exit()
{
    final Intent intent = new Intent(context, NextActivity.class);
    intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK); // necessary to avoid exceptions
    context.startActivity(intent);
}

@Override
public boolean processMessage(final Message message)
{
    boolean returnedValue;
    switch(message.what)
    {
        case MSG_SWITCH_ACTIVITY:
            //sendMessage(obtainMessage(MSG_SWITCH_ACTIVITY));
            context = (Context) message.obj; // context - it's a field of my state machine
            transitionTo(nextActivity);
            returnedValue = HANDLED;
        break;
        default:
            returnedValue = NOT_HANDLED;
        break;
    }           
    return returnedValue;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T22:04:49.893

您可以`startActivity`从 Context 对象调用，请参阅[http://developer.android.com/reference/android/content/Context.html#startActivity(android.content.Intent](http://developer.android.com/reference/android/content/Context.html#startActivity(android.content.Intent) )。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T22:48:00.507

要调用下一个活动，您可以像 Jan-henk 提到的那样简单地设置一个新意图并调用 start 活动

```
Intent intent = new Intent(this, yoursecondclass.class);
startActivity(intent); 
```

# hadoop - 映射期望值的键中的 Hadoop 类型不匹配 文本接收值 LongWritable

> ID：11319727
> 
> 赞同：3
> 
> 时间：2012-07-03T21:53:05.580
> 
> 标签：hadoop

有人知道为什么我会收到此错误吗？我看过很多其他类似的帖子，但大多数都不适用于我，我还尝试了一些适用于我的解决方案，但它们没有用，我确定我只是错过了一些愚蠢的东西， 谢谢您的帮助

```
chris@chrisUHadoop:/usr/local/hadoop-1.0.3/build$ hadoop MaxTemperature 1901 output4
12/07/03 17:23:08 WARN mapred.JobClient: Use GenericOptionsParser for parsing the     arguments. Applications should implement Tool for the same.
12/07/03 17:23:08 INFO input.FileInputFormat: Total input paths to process : 1
12/07/03 17:23:08 INFO util.NativeCodeLoader: Loaded the native-hadoop library
12/07/03 17:23:08 WARN snappy.LoadSnappy: Snappy native library not loaded
12/07/03 17:23:09 INFO mapred.JobClient: Running job: job_201207031642_0005
12/07/03 17:23:10 INFO mapred.JobClient:  map 0% reduce 0%
12/07/03 17:23:28 INFO mapred.JobClient: Task Id : attempt_201207031642_0005_m_000000_0, Status : FAILED
java.io.IOException: Type mismatch in key from map: expected org.apache.hadoop.io.Text, recieved org.apache.hadoop.io.LongWritable
at org.apache.hadoop.mapred.MapTask$MapOutputBuffer.collect(MapTask.java:1014)
at org.apache.hadoop.mapred.MapTask$NewOutputCollector.write(MapTask.java:691)
at org.apache.hadoop.mapreduce.TaskInputOutputContext.write(TaskInputOutputContext.java:80)
at org.apache.hadoop.mapreduce.Mapper.map(Mapper.java:124)
at org.apache.hadoop.mapreduce.Mapper.run(Mapper.java:144)
at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:764)
at org.apache.hadoop.mapred.MapTask.run(MapTask.java:370)
at org.apache.hadoop.mapred.Child$4.run(Child.java:255)
at java.security.AccessController.doPrivileged(Native Method)
at javax.security.auth.Subject.doAs(Subject.java:415)
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121)
at org.apache.hadoop.mapred.Child.main(Child.java:249) 
```

程序：

```
import java.io.IOException;
import org.apache.hadoop.io.IntWritable;
import org.apache.hadoop.io.LongWritable;
import org.apache.hadoop.io.Text;
import org.apache.hadoop.mapreduce.Mapper;

public class MaxTemperatureMapper extends Mapper<LongWritable, Text, Text, IntWritable>{

private static final int MISSING = 9999;

@Override
public void map(LongWritable key, Text value, Context context) throws IOException, InterruptedException
{
    String line = value.toString();
    String year = line.substring(15,19);
    int airTemperature;
    if (line.charAt(87) == '+')
    {
        airTemperature = Integer.parseInt(line.substring(88,92));
    }
    else
    {
        airTemperature = Integer.parseInt(line.substring(87,92));
    }
    String quality = line.substring(92,93);
    if (airTemperature != MISSING && quality.matches("[01459]"))
    {
        context.write(new Text(year), new IntWritable(airTemperature));
    }
}

}

import java.io.IOException;

import org.apache.hadoop.io.IntWritable;
import org.apache.hadoop.io.Text;
import org.apache.hadoop.mapreduce.Reducer;

public class MaxTemperatureReducer extends Reducer<Text, IntWritable, Text, IntWritable>
{
@Override
public void reduce(Text key, Iterable<IntWritable> values, Context context) throws IOException, InterruptedException
{
    int maxValue = Integer.MIN_VALUE;
    for (IntWritable value : values)
    {
        maxValue = Math.max(maxValue, value.get());
    }
    context.write(key, new IntWritable(maxValue));
}
}

import org.apache.hadoop.fs.Path;
import org.apache.hadoop.io.IntWritable;
import org.apache.hadoop.io.Text;
import org.apache.hadoop.mapreduce.Job;
import org.apache.hadoop.mapreduce.lib.input.FileInputFormat;
import org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;

public class MaxTemperature 
{

public static void main(String[] args) throws Exception 
{
    if (args.length != 2)
    {
        System.out.println("Usage: MaxTemperature <input path> <output path>");
        System.exit(-1);
    }

    Job job = new Job();
    job.setJarByClass(MaxTemperature.class);
    job.setJobName("Max temperature");

    FileInputFormat.addInputPath(job, new Path(args[0]));
    FileOutputFormat.setOutputPath(job, new Path(args[1]));

    job.setOutputKeyClass(Text.class);
    job.setOutputValueClass(IntWritable.class);

    System.exit(job.waitForCompletion(true) ? 0 : 1);

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T23:21:09.940

您似乎缺少许多配置属性：

*   Mapper 和 Reducer 类？- 如果未定义，您将默认使用“身份”映射器/还原器

您的具体错误消息是因为身份映射器只输出它传入的相同键/值类型，在这种情况下可能是 LongWritable 类型的键和 Text 类型的值（因为您尚未定义输入格式，默认为可能是 TextInputFormat）。在您的配置中，您已将输出键类型定义为文本，但映射器正在输出 LongWritable，因此出现错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T22:24:37.660

您应该在 job.xml 中设置以下属性

```
<property>
<name>mapred.input.format.class</name>
<value>org.apache.hadoop.mapred.TextInputFormat</value>
<description>The full class name of the InputFormat class to be used for obtaining the input to the mapper.</description>
</property> 
```

# mysql - 无法从 Amazon EC2 中的 Java Servlet 连接到 MySQL

> ID：11319732
> 
> 赞同：0
> 
> 时间：2012-07-03T21:53:25.753
> 
> 标签：mysql, tomcat, amazon-ec2, connector-j

我最近在本地机器上部署了一个`.war`from`Netbeans IDE`到`Amazon EC2`. 我的 Web 应用程序中的 Servlet 使用了 JBDC `Connector/J`，其 jar 文件被复制到 Netbeans 中的库中。WebApp 在我的本地机器上运行良好。但是 Amazon EC2 上 Tomcat 的日志显示错误`the host 'xyz' is not allowed to connect to this MySQL Server`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T23:51:06.250

确认 mysql 的主机信息 - 在 mysql 上运行：

```
select host, user from mysql.user; 
```

如果您的主机/端口信息正确，请尝试检查用于 Web 应用程序的权限。此外，请确保您的数据库服务器能够绑定到指定端口（netstat -an | grep 'port number'）并且客户端应用程序可以连接到该端口（在主机上）。希望能帮助到你

# c# - 重命名和复制程序集是否安全？

> ID：11319735
> 
> 赞同：5
> 
> 时间：2012-07-03T21:53:55.747
> 
> 标签：c#, .net, windows

我最近发现可以通过重命名文件然后执行复制来复制正在使用的程序集。例如

> C:\Folder\MyLibrary.dll
> => 重命名为 C:\Folder\MyLibrary.dll_old
> => 复制新版本 C:\Folder\MyLibrary.dll (v2.0)

有人告诉我，下次应用程序启动时，它将加载这个新程序集。当应用程序继续运行时，它将继续使用旧程序集（即使它已重命名为 _old）。

对我来说似乎是一个黑客。以这种方式更新程序集是否安全？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T07:56:42.847

这是安全的。只要旧程序集保持加载状态，同一个应用程序域就不会尝试再次加载它。文件名对于应用程序的继续执行并不重要。

但是，在生产使用中，您可能必须考虑 3 个以上的同步版本以及最终删除未使用文件的机制。

# javascript - 面向 Ajax 的 JavaScript 的 MVC 替代方案

> ID：11319736
> 
> 赞同：2
> 
> 时间：2012-07-03T21:54:00.240
> 
> 标签：javascript, model-view-controller, design-patterns

因为 Ajax 是异步的，所以会导致逻辑划分。这是我的控制器模块。对服务器的所有数据请求都经过这里并返回这里。

```
function cType( type ) {
    var object_pipe = MType[ type ].pre();
    if ( object_pipe !== 'complete' ) {
        var string_pipe = JSON.stringify( object_pipe );
        cMachine( 'pipe=' + string_pipe , function( text ) { // cMachine is an ajax Call - here is the asynch call back
            MType[ type ].post( text ); 
        } );
    }
} 
```

我在下面创建了模块结构，以便由 ajax 的异步性质分割的“空间”现在组合回一个对象文字。`pre()`指在ajax调用之前，`post()`指在ajax调用之后。

```
/**
 **  MABAdder
 */
MType.MABAdder =
{
    pre : function() { // some logic and view elements called here
    },
    post : function( string_pipe ) { // some logic and view elements called here
    }
}; 
```

这种结构运作良好，只是现在我从技术上打破 MVC 模式的模型调用视图。

然而，代码整洁有序，可扩展性很好。

这是否破坏了健壮代码的任何核心原则？

对我来说，创建一个与 ajax 的异步特性一起工作的模式然后遵守严格的 MVC 模式更有意义。

这是一个可接受的框架种子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T08:57:13.433

> 除了现在我从技术上打破 MVC 模式的模型中调用视图之外，这种结构效果很好。
> 
> 然而，代码整洁有序，可扩展性很好。
> 
> 这是否破坏了健壮代码的任何核心原则？

如果您的模型对象要求您的视图对象正常运行，是的。

从上面的示例中，我不确定您认为模型和视图是什么？

模型是对象的集合/域。它们是完全独立的，具有完整的数据和行为。

视图是对象的另一个领域，也是完全自包含的。您的 View 域的一个示例是一个网页，其中包含类 <button> <form> <table> <div> 等的对象。

异步应该对 MVC 没有影响。

# javascript - 在绘制矩形之前更改 lineCap 和 lineJoin 没有任何作用？

> ID：11319738
> 
> 赞同：1
> 
> 时间：2012-07-03T21:54:24.550
> 
> 标签：javascript, html, canvas

我有这个代码：

```
context.lineWidth = 10;

context.lineCap = "square";
context.lineJoin = "square";

context.strokeRect(x, y, w, h); 
```

`lineWidth`似乎工作得很好，但正在改变`lineCap`并且`lineJoin`没有做任何事情。`lineCap`当我将and设置`lineJoin`为时，矩形仍然是圆角的`"round"`。有人知道为什么是这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T23:40:57.880

这是因为您需要使用`miter`for `lineJoin`since`square`不是有效值。

**[现场演示](http://jsfiddle.net/loktar/MAUd8/)**

> lineJoin 属性定义了 UA 将放置在两条线相交处的角的类型。三个有效值是斜角、圆角和斜角。

**[W3 参考](http://www.w3.org/TR/2dcontext/#dom-context-2d-linejoin)**

此外，如果您只是在做 rects，则不需要`lineCap`

# java - 在封送处理期间 JAXB null 而不是空字符串

> ID：11319741
> 
> 赞同：1
> 
> 时间：2012-07-03T21:54:32.133
> 
> 标签：java, jaxb, jersey

编组字符串时，如何将“null”打印为字段值？

示例：error 和 error_code 是字符串，我想使用“null”作为值，表示服务器端没有发生值/错误。

```
{
   "error_code": null,
   "error": null
} 
```

今天不得不使用EMPTY值，这样“error_code”或者“error”这些字段一般都属于json，如果没有显式初始化为this.errorCode = StringUtils.EMPTY; 所以今天，我有下一个json：

```
{
   "error_code": "",
   "error": ""
} 
```

这是在代码中的样子：

```
@XmlRootElement()
@XmlAccessorType(XmlAccessType.FIELD)
public class Response
{
        @SuppressWarnings("unused")
        private static final Logger log = LoggerFactory.getLogger(Response.class);

        public static final String ERROR_FIELD_NAME = "error";
        public static final String ERROR_CODE_FIELD_NAME = "error_code";

        // @XmlJavaTypeAdapter(CafsResponse.EmptyStringAdapter.class)
        @XmlElement(name = Response.ERROR_CODE_FIELD_NAME)
        private String errorCode;

        // @XmlJavaTypeAdapter(CafsResponse.EmptyStringAdapter.class)
        @XmlElement(name = Response.ERROR_FIELD_NAME)
        private String errorMessage;

    // Empty Constructor
    public Response()
    {
            this.errorCode = StringUtils.EMPTY; // explicit initialization, otherwise error_code will not appear as part of json, how to fix this this ?
            this.errorMessage = StringUtils.EMPTY;
    } 
```

ETC...

```
// Empty Constructor
public Response()
{
        this.errorCode = null; // this variant dosn't work either, and error_code again didn't get to json 
        this.errorMessage = null;
} 
```

看，@XmlJavaTypeAdapter，我认为这可能对我有帮助 - 但没有:)

我将“null”作为字符串而不是空值。

```
if (StringUtils.isEmpty(str))
{
   return null;
}
return str;

{
   "error_code": "null", // this is not whta i wanted to get.
   "error": "null"
} 
```

对此有什么帮助吗？- 问我是否有不清楚的地方。

**完整列表：**

```
/**
 * Empty string Adapter specifying how we want to represent empty strings
 * (if string is empty - treat it as null during marhsaling)
 * 
 */
@SuppressWarnings("unused")
private static class EmptyStringAdapter extends XmlAdapter<String, String>
{

        @Override
        public String unmarshal(String str) throws Exception
        {
                return str;
        }

        @Override
        public String marshal(String str) throws Exception
        {
                if (StringUtils.isEmpty(str))
                {
                        return null;
                }
                return str;
        }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T13:12:12.980

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/#moxy)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

您可以使用 MOXy 作为您的 JSON 提供程序来支持此用例。下面是一个例子：

**回复**

MOXy 会将标记`@XmlElement(nillable=true)`为您正在寻找的表示的属性编组（参见：[http](http://blog.bdoughan.com/2012/04/binding-to-json-xml-handling-null.html) ://blog.bdoughan.com/2012/04/binding-to-json-xml-handling-null.html ）。

```
package forum11319741;

import javax.xml.bind.annotation.*;

@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Response {

        public static final String ERROR_FIELD_NAME = "error";
        public static final String ERROR_CODE_FIELD_NAME = "error_code";

        @XmlElement(name = Response.ERROR_CODE_FIELD_NAME, nillable = true)
        private String errorCode;

        @XmlElement(name = Response.ERROR_FIELD_NAME, nillable = true)
        private String errorMessage;

} 
```

**jaxb.properties**

要将 MOXy 用作您的 JAXB 提供程序，您需要包含一个`jaxb.properties`在与域模型相同的包中调用的文件，其中包含以下条目（请参阅：[http ://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as -你的.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html)）：

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**演示**

```
package forum11319741;

import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Response.class);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.setProperty("eclipselink.media-type", "application/json");
        marshaller.setProperty("eclipselink.json.include-root", false);

        Response response = new Response();
        marshaller.marshal(response, System.out);
    }

} 
```

**输出**

```
{
   "error_code" : null,
   "error" : null
} 
```

**MOXy 和 JAX-RS**

您可以使用`MOXyJsonProvider`该类在 JAX-RS 应用程序中启用 MOXy 作为 JSON 提供程序（请参阅： [http](http://blog.bdoughan.com/2012/05/moxy-as-your-jax-rs-json-provider.html) ://blog.bdoughan.com/2012/05/moxy-as-your-jax-rs-json-provider.html ）。

```
package org.example;

import java.util.*;
import javax.ws.rs.core.Application;
import org.eclipse.persistence.jaxb.rs.MOXyJsonProvider;

public class CustomerApplication  extends Application {

    @Override
    public Set<Class<?>> getClasses() {
        HashSet<Class<?>> set = new HashSet<Class<?>>(2);
        set.add(MOXyJsonProvider.class);
        set.add(CustomerService.class);
        return set;
    }

} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2012/04/binding-to-json-xml-handling-null.html](http://blog.bdoughan.com/2012/04/binding-to-json-xml-handling-null.html)

# javascript - 使用 Javascript/JQuery 并在页面加载时获取未定义的 var

> ID：11319742
> 
> 赞同：0
> 
> 时间：2012-07-03T21:54:34.247
> 
> 标签：javascript, jquery

我有这个 Javascript/JQuery 代码：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

<script type="text/javascript">

    name = $("#name").val();

    alert("Name: " + name);

</script> 
```

这个HTML：

```
<form name="report" action="send.php" method="post">

    <input type="text" name="name" id="name" value="Senna" />
    <input type="submit" value="Send" />

</form> 
```

当页面加载时，我得到“名称：未定义”而不是“名称：塞纳”。

有人可以帮我得到预期的结果吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T21:55:58.327

You should place your code inside the [DOM ready handler](http://api.jquery.com/ready/):

```
$(function() {
    var name = $("#name").val();
    alert("Name: " + name);
}); 
```

Otherwise you are trying the work with elements which are not yet loaded.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T21:57:29.703

> While JavaScript provides the load event for executing code when a page is rendered, this event does not get triggered until all assets such as images have been completely received. In most cases, the script can be run as soon as the DOM hierarchy has been fully constructed. The handler passed to .ready() is guaranteed to be executed after the DOM is ready, so this is usually the best place to attach all other event handlers and run other jQuery code.

You need to indicate to execute the function once the page has been loaded. Currently you are only defining it and not decalring when to execute it.

```
$(document).ready(function(){
    name = $('#name').val();
    alert('Name: ' + name);
}); 
```

Or:

```
$(function(){
    name = $('#name').val();
    alert('Name: ' + name);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T21:56:28.210

You need the `document.ready` callback.

Place your code inside a function like this -

```
$(function(){
  // code goes here
}); 
```

You need to use this callback to know when jQuery *and* the entire DOM is loaded. Only then can you start to manipulate the Markup and CSS with your jQuery code.

* * *

The code above is really just shorthand for this -

```
$(document).ready(function(){
  // code goes here
}); 
```

This uses the `.ready()` method - [http://api.jquery.com/ready/](http://api.jquery.com/ready/)
An extract from the description of the `.ready()` function -

> ... The handler passed to `.ready()` is guaranteed to be executed after the DOM is ready, so this is usually **the best place to attach all other event handlers and run other jQuery code.** ...

[emphasis added]

# yii - yii many_many db 标准过滤器过于具体

> ID：11319746
> 
> 赞同：1
> 
> 时间：2012-07-03T21:55:00.983
> 
> 标签：yii, many-to-many

我的任务模型中有一个 many_many 关系

```
 'keywordlist' => array(self::MANY_MANY, 'Keyword', 'task_keyword(id_task, id_keyword)'), 
```

好吧，我得到了所有这些任务的清单

```
$criteria = new CDbCriteria();
    $criteria->condition = "t.blocked = 0 AND t.answered = 0 AND t.date_deadline > NOW()";
    $criteria->order = 't.id desc'; 
```

好的，现在一个任务可以有一个或 * 关键字。如果我在我的任务上放置一个过滤器

```
$criteria->addCondition('keywordlist.name like \'%html%\'','AND'); 
```

我收到了想要的任务，但只有 html 关键字。该任务还有更多其他关键字不会出现。如何从keywordlist.name 列创建类似in_array 的内容。如果关键字在结果中，则将所有关键字返回给我的任务？

如果我使用例如 %p% 作为关键字搜索，它会显示更多关键字，如果关键字由带有“p”的内容组成。但也不会显示其他关键字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T08:26:16.383

如果我理解正确[addInCondition()](http://www.yiiframework.com/doc/api/1.1/CDbCriteria#addInCondition-detail)就是你要找的

```
$criteria->addInCondition('keywordlist.name',array('html','add','other','keywords','here')); 
```

# jquery - sx:autocompleter onchange not calling JQuery function

> ID：11319756
> 
> 赞同：0
> 
> 时间：2012-07-03T21:55:48.603
> 
> 标签：jquery, json, struts2

I'm using Struts2+Spring MVC+Hibernate and I'm trying to create a dependent drop-down menu. However, my JQuery function is only being called on the page startup, and not when an option is selected in the first menu. The organization drop-down menu is working fine. Here is the **relevant** code:

**Search.jsp**

```
 <%@ taglib prefix="s" uri="/struts-tags" %>
 <%@ taglib prefix="sx" uri="/struts-dojo-tags"%>

<head>
<script type="text/javascript" src="jquery-1.7.2.min.js"></script>
<script type="text/javascript">  
$(function loadFacilities(value){
   $("#facilitySelect").get(0).options.length = 0;
   $("#facilitySelect").get(0).options[0] = new Option("Loading facilities", "-1");
   $.ajax({
      type: "POST",
      url: "DependentFacility",
      data: "{organizationID:" + value+ "}",
      dataType: "json",
      success: function(msg){
          $("#facilitySelect").get(0).options.length = 0;
          $("#facilitySelect").get(0).options[0] = new Option("Select facility", "-1");

          $.each(msg.d, function(index, item){
             $("#facilitySelect").get(0).options[$("#facilitySelect").get(0).options.length] = new Options (item.Display, item.Value); 
          });
      },
      error: function(){
          $("#facilitySelect").get(0).options.length = 0;
          alert("Failed to load facilities");
      }

   });
 });
 </script> 
 </head>

 <div class="element">
<p class="title"><s:property value="getText('global.a_search_screen')" /></p>
<s:form name="ASearch" action="aSearchList" type="POST">
    <p class="content">
        <table class="topSearch">
        //Some Table stuff was here

              <td >
                    <s:url id="organizationList" action="getListOfOrganizations" />
                    <sx:autocompleter href="%{organizationList}" name="organizations" onchange="loadFacilities(this.value)" keyValue="0" value="---- SELECT ONE-----"/>

                </td>
                <td >
                    <select id="facilitySelect"  name="selectedFacility" ></select>
                </td> 
```

**Struts.xml**

```
 <action name="DependentFacility" class="facilityActions">
   <result type="json">
    <param name="root">facility</param>
   </result>
  </action> 
```

**FacilityActions.java**

```
public class FacilityActions implements ModelDriven<FacilityVO> {

FacilityService facilityService;
private Map<String, String> facilities = new HashMap<String, String>();
FacilityVO facility = new FacilityVO();

public void setFacilityService(FacilityService facilityService) {
    this.facilityService = facilityService;
}

public FacilityVO getModel(){
    return facility;
}

public String execute() {
    return Action.SUCCESS;
}   

public String addFacility(){
    try{
        facilityService.addFacility(facility);
        return "SUCCESS";}
    catch(Exception e){
        return "ERROR";
    }catch(Throwable t){
        return "ERROR";
    }
}

public Map<String, String> getFacilities() {

    List<FacilityVO> facilityList = facilityService.listFacilities();

    Iterator<FacilityVO> iterator = facilityList.iterator();
    while (iterator.hasNext()) {
        FacilityVO fac = iterator.next();
        facilities.put(fac.getFacilityName(), Integer.toString(fac.getFacilityId()));
    }

    return facilities;
}   

public FacilityVO getFacility(Object thing){
    System.out.println("got a thing:" + thing.toString());
    return facility;
}

public FacilityVO getFacility(){
    System.out.println("Getting facility but nothing given?");
    return facility;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T23:00:35.703

As the [Ajax and JavaScript recipes show](http://struts.apache.org/2.x/docs/ajax-and-javascript-recipes.html#AjaxandJavaScriptRecipes-Loadcharacterswhileusertypes%2528whentextsize%253E%253D3%2529) the appropriate attribute to set is `loadOnTextChange`.

Remember, these are Dojo widgets, not simple HTML controls–you can't necessarily use standard HTML attributes to modify their behavior.

If you're using JSON, see the [recipe for JSON results](http://struts.apache.org/2.x/docs/ajax-and-javascript-recipes.html#AjaxandJavaScriptRecipes-UsingtheJSONplugintogeneratethevalues%2528oneofthepossibleways%2529); it can be much simpler than you're making it.

# jquery - Jquery validation of a select box

> ID：11319761
> 
> 赞同：0
> 
> 时间：2012-07-03T21:56:01.940
> 
> 标签：jquery, validation, select

I'd would like to use the jquery validation plugin to validate and ensure that the user selects an option. I know that it's working if you leave the first option value blank like this :

```
<select id="jungle" name="jungle" title="Please select something!" validate="required:true">
        <option value=""></option>
        <option value="1">Buga</option>
        <option value="2">Baga</option>
        <option value="3">Oi</option>
    </select> 
```

But I need a solution where I can have the value of the first option not blank as it needs to be filled dynamically. e.g.

```
<select id="jungle" name="jungle" title="Please select something!" validate="required:true">
    <option value="default"></option>
    <option value="1">Buga</option>
    <option value="2">Baga</option>
    <option value="3">Oi</option>
</select> 
```

Does anybody knows how to customize the default validation to have this working ?

# mysql - 对嵌套的外键关系执行 SUM

> ID：11319762
> 
> 赞同：1
> 
> 时间：2012-07-03T21:56:02.263
> 
> 标签：mysql, sql, sqlite, postgresql

我有一些表大致如下：

```
Client:
   id
   name

Employee 
   id 
   name

Email
   id
   to : Client [ForeignKey]
   from : Employee [ForeignKey]

EmailStats (Tracks the stats for a particular single email)
   id
   email : Email [OneToOne]
   curse_words : 10 
```

**我想做的事：**我想获取至少给一个客户写过一封电子邮件的*所有*员工，以及他们在给那个客户的任何电子邮件中诅咒的次数，即特定`Client`回报

```
[
    ('name' : 'Paul', 'total_curses' : 255),
    ('name' : 'Mary', 'total_curses' : 10),
] 
```

**我试过的：**

因为我习惯使用 ORM，所以我对 SQL 的理解很薄弱。我无法理解正常检索`Employees`链接到计算诅咒词的方式。这是我所做的（善良！）：

```
SELECT DISTINCT (
    SELECT SUM(EmailStats.curse_words)
    FROM EmailStats
    INNER JOIN (
      SELECT Email.id
      FROM Email
      INNER JOIN Employee
          ON Email.from = Employee.id
      WHERE Email.to = 5 // Assuming 5 is the client's id
    ) filtered_emails ON EmailStats.email = filtered_emails.id                
) AS 'total_curses', Employee.name
FROM Employee
INNER JOIN Email
   ON  Email.from = Employee.id 
WHERE Email.to = 5 // Assuming 5 is the client's id
ORDER_BY 'total_curses' 
```

这不起作用 - 它似乎获取了正确的`Employees`（那些已发送到的`Client`），但诅咒计数似乎是所有电子邮件的总数，`Client`而不仅仅是来自那个的那些诅咒`Employee`。

我有一种感觉，我在这里严重误解了一些东西，所以如果有人能提供一个如何成功解决这个问题的例子，我会很感激一些指示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T22:03:17.827

您想对加入表的结果进行分组：

```
SELECT   Employee.name, SUM(EmailStats.curse_words) total_curses
FROM     Email
  JOIN EmailStats ON EmailStats.email = Email.id
  JOIN Employee   ON Employee.id      = Email.from
WHERE    Email.to = 5
GROUP BY Employee.id
ORDER BY total_curses DESC 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T22:05:39.313

```
SELECT em.name, sum(s.curse_words) AS total_curses
FROM   employee em
JOIN   email e ON e.from = em.id
LEFT   JOIN emailstats s ON s.email = e.id
WHERE  e.to = $the_one_client
GROUP  BY em.name
ORDER  BY total_curses DESC; 
```

我使用 LEFT JOIN 来确保，因为似乎没有保证，匹配的行`emailstats`确实存在。

# android - Truly live streaming to Android/iPhone

> ID：11319763
> 
> 赞同：0
> 
> 时间：2012-07-03T21:56:18.573
> 
> 标签：android, iphone, windows, ffmpeg, video-streaming

I have spent quite a while (past week) trying this to little avail. However, what I want seems completely unheard of. So far, I have reviewed recommendations available through google, which include encoding a static file into multiple static files in different formats, creating a playlist that hosts static files in an m3u8 file (files which get added to the playlist as streaming continues). I have also seen ideas involving rtmp, rtsp etc which are completely out of the question because of their incompatibility. Ideally, I would have one webpage that would link to the stream (http://server/video.mp4) and/or show it in a webpage (via the video tag). With that in mind, the most likely format would be h264+aac in mp4 container.

Unfortunately, (and probably because the file has no duration metadata) it does not work. I can use a desktop player (such as VLC) to open the stream and play it, but my iPhone and Android both give their respective "Can't be played" messages.

I don't think the problem is caused by the devices' ability to stream, for I have made a streaming shoutcast server work just fine (mp3 only).

Currently, the closest I have become is using the following setup on my win32 machine:

FFMPEG Command:: ffmpeg -f dshow -i video="Logitech Webcam 200":audio="Microphone (Webcam 200)" -b:v 180k -bt 240k -vcodec libx264 -tune zerolatency -profile:v baseline -preset ultrafast -r 10 -strict -2 -acodec aac -ac 2 -ar 48000 -ab 32k -f flv "udp://127.0.0.1:1234"

VLC:: Stream from udp://127.0.0.1:1234 to http:// :8080/video.mp4 (No Transcoding), basically just to convert the UDP stream into an http-accessible stream.

Any hints or suggestions would be warmly welcomed!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T22:33:59.040

对不起，我试图理解你的问题。看来您试图通过 http 从您的服务器在 android 和 iphone 上播放 mp4 对吗？

你有流媒体服务器吗？或者您只是想让手机从您的服务器中提取文件。

如果您没有，我建议您查看 darwin 流媒体服务器 (http://justdevelopment.blogspot.com/2009/10/video-streaming-with-android-phone.html)。它将允许您将视频设置为使用每个设备所需的正确编码进行流式传输。

让我知道这是否有帮助

# cmd - 删除路径后cmd不起作用

> ID：11319765
> 
> 赞同：0
> 
> 时间：2012-07-03T21:56:32.037
> 
> 标签：cmd

错误地我从我的计算机中删除了路径，现在路径为空，我没有还原点或备份来获取路径，现在当我在 cmd 中输入帮助时，我得到了`not a command`，你能告诉我如何获得路径? 或者我必须在路径中输入什么？非常感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T22:02:38.950

查看[Microsoft Windows 上的默认值](http://en.wikipedia.org/wiki/Environment_variable#Default_Values_on_Microsoft_Windows)

# ios - Getting two adjacent UILabels to both align on the inside edge

> ID：11319769
> 
> 赞同：0
> 
> 时间：2012-07-03T21:56:56.063
> 
> 标签：ios, xcode, nib, autoresizingmask

I have a `UIView` which contains two `UILabel` objects, which are populated programmatically. I want the left `UILabel` to be right-aligned, and the right `UILabel` to be left-aligned. This is my pretty ASCII representation:

```
 ___________________
|  ______   ______  |
| |  ASDF| |ASDF  | |
| |______| |______| |
|___________________| 
```

I have tried all sorts of masks and alignment properties to no avail. Here is what I thought the correct solution would be, so perhaps someone can point out the flaw in my understanding.

The container `UIView` needs `UIViewAutoResizingFlexibleWidth` so that it can expand to fit labels with variable widths. Both the left and the right `UILabel` need `UIViewAutoResizingFlexibleWidth` so that they expand to fit content with variable width. The left `UILabel` needs `UIViewAutoresizingFlexibleRightMargin` so that the left margin remains fixed. The right `UILabel` needs `UIViewAutoresizingFlexibleLeftMargin` so that the right margin remains fixed.

Conceptual problem with this implementation:

*   As the texts expand, they could just expand over each other as that would still fit the container

I am having the overlap problem, as well as the right margin does not seem to be fixed like it is supposed to, rather there is just a large gap on the right side.

Does anyone know what might be a solution?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T22:05:07.303

`UILabel`视图不会根据文本自动调整自身大小。`sizeToFit`每次更改文本时，您可能都需要致电。如果希望文本换行，您还需要手动分配行数。

另外，不应该是左标签`UIViewAutoresizingFlexibleLeftMargin`，反之亦然？另一种方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T22:27:58.553

两个观察：

1.  AutoresizingMasks 不会根据视图子视图的变化来扩展视图，而是根据父视图的变化来扩展视图。这里不感兴趣。当超级视图由于方向变化而改变尺寸时，它通常更有用。在其他情况下，理论上您可能会使用 autoresizingMasks，但我认为这不是其中之一。

2.  更合乎逻辑的是，您可以简单地计算适合所需文本所需的文本标签的宽度，然后相应地设置 UILabel 的框架。

要计算两个文本标签的大小，一旦设置了它们的 text 属性，可以执行以下操作：

```
CGSize leftSize  = [leftLabel.text  sizeWithFont:leftLabel.font  forWidth:self.view.frame.size.width lineBreakMode:UILineBreakModeWordWrap];
CGSize rightSize = [rightLabel.text sizeWithFont:rightLabel.font forWidth:self.view.frame.size.width lineBreakMode:UILineBreakModeWordWrap]; 
```

现在您知道两个标签的大小，您可以相应地调整两个标签的框架以及它们的超级视图。

# java - Canvas3D Tabs Stop Rendering Correctly When Tab Removed from JTabbedPane

> ID：11319773
> 
> 赞同：0
> 
> 时间：2012-07-03T21:57:27.980
> 
> 标签：java, swing, awt, java-3d, jtabbedpane

I'm working on a GUI that uses Java3D to display previews of 3d models. I have a JTabbedPane wherein each tab is a Canvas3D to allow loading multiple previews and switching between them. This has been working fine until I got around to adding in the functionality to remove tabs. When a tab is removed, *most of the time*, the remaining tabs stop rendering the 3d models while rarely they will continue working as intended. There is no apparent set of conditions that can determine when the tabs will continue working and when they won't. Loading up a new preview, however, will bring all other tabs right back to life.

Things I've tried:

*   Calling validate on the JTabbedPane
*   Calling invalidate on the JTabbedPane and then validate
*   Calling invalidate/validate on the new currently selected Canvas3D tab
*   Calling repaint() on Canvas3D, JTabbedPane, etc.
*   Calling stopView() startView() on the View object attached to the Canvas3D

Calling isViewRunning() returns true even when it appears it isn't so maybe I'm looking in the completely wrong place for this problem. Any thoughts on this would be very much appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T06:47:08.573

在 6u33 或 7u5 (Win 7 64) 上运行我的应用程序时，Canvas3D 选项卡正确呈现。在“以前”，根据解决方法提示，当删除选项卡时，我在 JTabbedPane 的 ChangeListener 中调用了顶级组件（通常是 JFrame）上的验证。

# magento - Changing SKU in existing order

> ID：11319775
> 
> 赞同：0
> 
> 时间：2012-07-03T21:57:33.140
> 
> 标签：magento

Would anyone be kind enough to explain how to change a SKU in an existing order? We import orders from a 3rd party and the SKUs have spaces in them, which need to be removed. I looked at sales_flat_order_item but not sure how to change. Any help will be very appreciated!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T08:22:32.907

删除订单商品 SKU 中的空白的一种可能方法是如下所示：

```
$iIncrementId = '911';
$oOrder = Mage::getModel('sales/order')->load($iIncrementId, 'increment_id');
foreach ($oOrder->getAllVisibleItems() as $oItem) {
    $oItem
        ->setSku(str_replace(' ', '', $oItem->getSku()))
        ->save();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T23:05:31.143

我猜您的意思是更改订单号，因为 SKU 与产品相关，而不是订单。

没有 UI 方法可以更改订单号（有几个扩展，但我强烈建议不要使用其中的任何一个），但如果您有权访问数据库，您可以自己更改它。表 sales_flat_order 有一个 increment_id 字段，其中存储了订单号。该字段是一个 varchar(50) 表示它支持字母数字值。

Magento 在该字段上保留一个唯一索引，因此将无法保留重复项....除非您运行的是 1.4.x 之前的 Magento 版本（实际上是 1.4.0.22）。如果是这种情况，请注意不要重复任何 increment_ids，并尽可能坚持使用数值以防止此错误[http://www.magentocommerce.com/bug-tracking/issue?issue=13625](http://www.magentocommerce.com/bug-tracking/issue?issue=13625)

如果您无权访问数据库，您始终可以创建一个升级脚本来完成这项工作，但添加一些逻辑以避免重复，否则安装脚本会打到您的脸上，并且在您修复它之前网站将无法运行

# c# - Is there a way to avoid the taskbar getting focus when running a form?

> ID：11319776
> 
> 赞同：1
> 
> 时间：2012-07-03T21:57:41.053
> 
> 标签：c#, winforms, taskbar

I am building a small program I want to hover over the other programs, and I use `TopMost` to handle this quite well.

Now my issue is that once I work in my tool, it also brings the Windows Taskbar forward, whereas I would like not to pull it to the top.

Is there a way to address this?

An acceptable workaround would be to "restore focus" on previous active program, is there an easy way to do this? (like Alt + Tab)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T22:52:28.927

对于问题的“恢复焦点”部分，您可以轻松地使用 form.activate 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T22:21:22.760

您是否尝试过[`ShowInTaskbar`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.showintaskbar.aspx)将表单的属性设置为 False？这将导致您的表单不显示在 Windows 任务栏中。

# css - 无法在 IE8 中将半透明渐变滤镜与阴影滤镜结合使用

> ID：11319787
> 
> 赞同：1
> 
> 时间：2012-07-03T21:58:34.290
> 
> 标签：css, internet-explorer, internet-explorer-8

我试图在 IE8 中模拟将 RGBA 背景和框阴影应用于 div 的效果。如果我设置一个不透明的背景，我可以使用微软的“阴影”过滤器来成功实现盒子阴影效果。背景设置为“透明”，我可以通过应用“渐变”滤镜获得 RGBA 背景。但是，如果我尝试像这样组合两个过滤器，

```
div#translucentBG {
  zoom       : 1;
  background : transparent;

  filter: 
    progid:DXImageTransform.Microsoft.Gradient(StartColorStr=#80464646, EndColorStr=#80464646),
    progid:DXImageTransform.Microsoft.Shadow(Color=#ffffff, Strength=5, Direction=0),
    progid:DXImageTransform.Microsoft.Shadow(Color=#ffffff, Strength=5, Direction=90),
    progid:DXImageTransform.Microsoft.Shadow(Color=#ffffff, Strength=5, Direction=180),
    progid:DXImageTransform.Microsoft.Shadow(Color=#ffffff, Strength=5, Direction=270);
} 
```

那么 div 将具有正确的框阴影但不透明的 #464646 背景。只需删除所有阴影过滤器，神奇地，div 再次变为半透明。这很令人沮丧。由于 IE 完美地分别渲染了这两种效果，我无法想象为什么在组合它们时会失败。我知道可能有可用的解决方法和替代方法，但我真正感兴趣的是为什么上述技术会失败。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T00:08:20.180

## 解释

我设置了[这个小提琴](http://jsfiddle.net/XWmey/12/)供人们查看效果（当然是在 IE8 中）。

我相信原因是渐变注册为“填充”值，当它注册时，阴影本身会在其*后面*填充实体。这实际上消除了您可能正在寻求的透明度（也就是说，它*是透明*的，它只是显示到下面的阴影，它*是不透明*的，因此覆盖了背景）。请注意`div`，我的示例小提琴中的最后一个根本没有“显示”，因为当“阴影”没有填充时，不会应用投影。

阴影实际上填充在您的渐变后面，这一事实进一步支持了当仅应用 a时，就像在[这个小提琴](http://jsfiddle.net/XWmey/13/)`border`上的最后一个一样，阴影也“进入”了 div。所以阴影不仅仅是一个“边缘”属性，它不会填充到对象的填充下方。`div`

## 箱影比较

[这个小提琴](http://jsfiddle.net/XWmey/20/)显示了`box-shadow`实现。

请注意，对于[的规范](http://www.w3.org/TR/css3-background/#the-box-shadow)与使用 IE过滤器`box-shadow`看到的行为不同。`Shadow`您并没有“被 FF/Chrome 中 box-shadow 属性的行为所迷惑，它就像一个边缘属性”，因为*它是一个**边缘**属性*。（好吧，也许您误以为 IE 过滤器也能正常工作。）它不会*填充*到框本身的后面，除非`inset`关键字是定义的一部分（在这种情况下，它只填充到内部）。`box-shadow`规范说（强调）：

> 外部 box-shadow 投射阴影***，就好像元素的边框框是 opaque 一样***。阴影仅***绘制在边框边缘之外***：它被剪裁在元素的边框框内。

这正是您在 FF/Chrome 中看到的。IE 过滤器早在很久以前就存在`box-shadow`了，它的实现方式明显不同。请注意，我在上面的引用中还强调了元素被视为不透明的，这意味着即使 a`background: transparent`也会显示阴影（如底部的示例小提琴所示）。这也不同于 IE`Shadow`过滤器。

# vb.net - 删除文本框中的结束字符而不重写所有数据

> ID：11319788
> 
> 赞同：2
> 
> 时间：2012-07-03T21:58:38.540
> 
> 标签：vb.net, serial-communication

我正在编写一个程序来通过串行端口进行通信。所有发送的数据都被镜像回来。一切正常，除了退格键。当我点击退格按钮时，我知道如何删除文本框中最后一个字符的唯一方法是使用 mid 函数，然后用新数据覆盖当前数据。当大量数据在 Richtextbox 中时，它开始闪烁。我曾尝试使用richtextbox.text.remove 函数，但出现此错误。“索引和计数必须引用字符串中的位置。参数名称：计数”

```
RichTextBox1.Text.Remove(RichTextBox1.TextLength, 1) 
```

我试图将一些数字放入不会导致它出错但没有从richtextbox中删除数据的函数中。

这是传输数据的代码

```
 KeyCharString = e.KeyChar 'stores key being pressed into KeyCharString
    Try
        SerialPort1.Write(KeyCharString) 'tx data for key being pressed
    Catch ex As Exception
        MsgBox(ex.Message) 'Displays error if serialport1 cannot be written to
    End Try

    If Asc(KeyCharString) = 8 Then 'If char is a backspace remove precious character and exit sub
        RichTextBox1.Text = RichTextBox1.Text.Remove(RichTextBox1.TextLength, 1)
        'RichTextBox1.Text = Mid(RichTextBox1.Text, 1, RichTextBox1.TextLength - 1)'Old code used to remove the character.  Causes the richtextbox to flicker when rewriting the data
        Exit Sub
    End If 
```

这是接收数据的代码

```
 receivedString = SerialPort1.ReadExisting.ToString

    If Asc(receivedString) = 8 Then 'deletes the received data if it is a backspace
        receivedString = ""
        Exit Sub
    End If
    RichTextBox1.AppendText(receivedString) 'adds new data to the richtextbox 
```

有没有办法从 Richtextbox 中删除 1 个字符而不重写其中的所有数据？此外，richtextbox 是只读的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T22:48:17.047

您使用的[String.Remove](http://msdn.microsoft.com/en-us/library/9ad138yc)方法返回一个字符串，它不对原始字符串做任何事情。

来自 MSDN 链接：

> 返回一个新字符串，其中当前实例中的所有字符（从指定位置开始到最后一个位置）都已被删除。

试试这个，但我不确定闪烁：

```
RichTextBox1.Text = RichTextBox1.Text.Remove(RichTextBox1.TextLength - 1, 1) 
```

或类似的东西：

```
RichTextBox1.SelectionStart = RichTextBox1.TextLength - 1
RichTextBox1.SelectionLength = 1
RichTextBox1.ReadOnly = False
RichTextBox1.SelectedText = ""
RichTextBox1.ReadOnly = True 
```

# django-admin - Django-Admin 覆盖外键字段的默认表单字段

> ID：11319790
> 
> 赞同：1
> 
> 时间：2012-07-03T21:59:05.777
> 
> 标签：django-admin, foreign-keys

我已阅读文档并尝试实现对默认表单字段的覆盖，以仅在我的管理员中显示属于当前用户（发布者）的项目。我有一个 SimpleSubscriber 模型，其中包含一个名为 sub_type 的对象，它是模型 Product 的 ForeignKey。还有一个 Publisher 模型，SimpleSubscriber 和 Product 都有称为 publisher 的 ForeignKey 对象。在我的 admin.py 我有这个：

```
def formfield_for_foreignkey(self, db_field, request, **kwargs):
   if db_field.name == "sub_type":
       kwargs["queryset"] = SimpleSubscriber.objects.filter(sub_type=request.user)
   return super(SimpleSubscriberAdmin, self).formfield_for_foreignkey(db_field, request, **kwargs) 
```

在文档中，它最初有

```
kwargs["queryset"] = SimpleSubscriber.objects.filter(owner=request.user) 
```

但是我得到了“FieldError：无法将关键字'所有者'解析到字段中”，所以我用 sub_type 替换了所有者，但是用订阅者填充了列表。它应该是子类型（产品）的列表。

如何让此列表仅显示属于当前用户（发布者）的子类型（产品）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T16:50:35.323

所以我在这里回答我自己的问题。

```
def formfield_for_foreignkey(self, db_field, request, **kwargs):
   if db_field.name == "sub_type":
       subtype = Product.objects.all()
       if not request.user.is_superuser:
           kwargs["queryset"] = subtype.filter(publisher=request.user)
       else:
           kwargs["queryset"] = subtype
   return super(SimpleSubscriberAdmin, self).formfield_for_foreignkey(db_field, request, **kwargs) 
```

我需要改变

```
kwargs["queryset"] = SimpleSubscriber.objects.filter(sub_type=request.user) 
```

对此：

```
subtype = Product.objects.all()
    if not request.user.is_superuser:
        kwargs["queryset"] = subtype.filter(publisher=request.user)
    else:
        kwargs["queryset"] = subtype 
```

我正在学习过滤 ForeignKey 对象的艰难方法。希望这可以避免某人头痛。

# android - Is there a way to use a DexClassLoader without using reflection *everywhere*?

> ID：11319791
> 
> 赞同：1
> 
> 时间：2012-07-03T21:59:06.493
> 
> 标签：android, classloader

I have a library that I plan on using in dex form. I want to compile directly against this library, but not export it. Instead I want to drop it in my resources and use a class loader to actually instantiate it.

So here's my library:

```
public class Foo {
  public doFoo(String message) {
  }

  public doFoo(int count, String message) {
  }
} 
```

Now I want to call `doFoo()`. A lot. More than it's probably reasonable to use reflection for. Right now it works with:

```
public class FooConsumer {
  private final DexClassLoader fooLoader;

  public FooConsumer(DexClassLoader fooLoader) {
    this.fooLoader = fooLoader;
  }

  public void go() {
    Class<?> fooClass = fooLoader.loadClass("com.library.Foo");
    Object fooInstance = fooClass.newInstance();
    Method fooMethodDoFoo = fooClass.getMethod("doFoo", String.class);
    fooMethodDoFoo.invoke(fooInstance, "Hello World");
  } 
```

This is obviously fugly. Especially since I haven't included any of the exception handling, as there are half a dozen throwables to catch in there. I could cache a bunch of stuff, helping me with speed a bit, but not a lot.

Normally I'd have both aware of a third library that has an interface, but the library has some static methods and I can't edit it anyway. It'd be really nice if I could do something like:

```
public class FooConsumer {
  private FooAccessor accessor;

  public FooConsumer(DexClassLoader fooLoader) {
    Object fooInstance = fooLoader.loadClass("com.library.Foo").newInstance();
    Log.i("TEST", "fooInstance: " + fooInstance);
    this.accessor = new FooAccessor(fooInstance);
  }

  public void go() {
    accessor.doFoo("Hello World");
  }

  private static class FooAccessor {
    private Foo fooInstance;

    public FooAccessor(Object instance) {
      fooInstance = (Foo)instance;
    }

    public void doFoo(String message) {
      fooInstance.doFoo(message);
    }
  }
} 
```

See what I did there? The inner class is just a wrapper around the Foo object, I've linked against it, but not exported it, and all is good in the world. But it doesn't work. In logcat I get

```
I/TEST: fooInstance: com.library.Foo@413b1b68
E/AndroidRuntime: java.lang.NoClassDefFoundError: com.library.Foo
  ... 
```

Is there a way to have FooAccessor use the class loader I passed in? Or is the use of class loaders a damnation into reflection hell.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-18T01:55:40.697

你可能想看看这个要点。

[https://gist.github.com/nickcaballero/7045993](https://gist.github.com/nickcaballero/7045993)

它使用反射将新的 DexClassLoader 合并到库存的 BaseDexClassLoader。

# html - How to embed links (anchor tag) into HTML context from UIBINDER in gwt

> ID：11319793
> 
> 赞同：0
> 
> 时间：2012-07-03T21:59:21.407
> 
> 标签：html, gwt, hyperlink, anchor, uibinder

I have a HTML widget in my ui.xml which I am using in Uibinder to populate data as given below:

ui.xml ->

```
 <g:HTML ui:field="operationsDetailTableTemplate" visible="false">
    <table class="{style.LAYOUT_STYLE}" width="100%" border="1">
        <tr>
            <td><img src="images/indent-blue.gif"/></td>
            <td>
                <table class="{style.DEFAULT_STYLE}">
                    <thead>
                           <tr>
                               <th>OperationUuid</th>
                                                    ....
                           </tr>
                     </thead>
                      <tbody>
                            <tr>
                                <td>%s</td>
                                 ...
                             </tr>
                      </tbody>
                  </table>
             </td>
        </tr>
         ....
</g:html>

Uibinder.java--->

 String htmlText = operationsDetailTableTemplate.getHTML()
                   .replaceFirst("%s", toSafeString(operation.getOperationUuid()))
                   ....
 HTML html = new HTML(htmlText);
 operationsDetail.add(html); 
```

The above is done in a for loop for each of the operation retrieved from the database. My question is how I can embed a hyperlink or an anchor tag on one of the cell (eg. operation id ) for each of the operation set retrieved. I also wish to have a listener attached to it.

P.S. - It does not allow me to have a anchor tag in HTML in ui.xml.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T00:06:19.387

您最好按照设计使用的方式使用这些工具：`ui:field="foo"`在`<td>`and `@UiField Element foo`+上使用，`foo.setInnerHTML(toSafeString(...))`而不是提取 HTML、修改它并在其他地方重新注入。您也可以使用 a`<g:Anchor>`并附加 an`@UiHandler`来处理`ClickEvent`s。

您使用 UiBinder 的方式让我想到`SafeHtmlTemplates`了新的`UiRenderer`aka *UiBinder for Cells*：[https ://developers.google.com/web-toolkit/doc/latest/DevGuideUiBinder#Rendering_HTML_for_Cells](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiBinder#Rendering_HTML_for_Cells)

# regex - RegEx：匹配任何以特定字符开头的字符串的组

> ID：11319801
> 
> 赞同：1
> 
> 时间：2012-07-03T21:59:59.727
> 
> 标签：regex, google-analytics

我正在 Google Analytics 中创建一些报告。我正在尝试编写一个匹配的正则表达式

www.website.com/

www.website.com/?_string_begins_with_question_mark

但**不会**匹配

www.website.com/string_doesnt_begin_with_question_mark

使用 Reggy（带有 POSIX Extended），我尝试创建一个可选组，该组将匹配以问号开头的字符串，后跟任意数量的字符。我想

(\?.+)?

会做的伎俩，但它忽略问号要求，并匹配任何字符串。

我尝试了一些变化：

www.website.com/(\?(.+))?

www.website.com/(\?.+)?

www.website.com/(?.+)?

等等。

任何帮助表示赞赏 - 对不起，如果这已经被问到了！我是 RegEx 的新手。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T22:05:15.933

你的正则表达式

```
www.website.com/(\?.+)? 
```

仍然会匹配任何包含的东西，`www.website.com/`不管斜线后面是什么。您是否尝试过附加`$`（输入结束标记）？

```
www\.website\.com/(?:\?.+)?$ 
```

（转义点以获得更精确；这`?:`只是表明该组没有特殊含义且不必记住的一种方式——如果您省略这一点，您可以通过 访问该组的内容`\1`，例如，在替换操作。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T22:10:51.673

试试这个

```
www.website.com/\?(.+) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T08:41:11.617

我会建议

```
www.website.com/($|\?.+$) 
```

空或问号加上一些字符串

# excel - SAS: export multiple procedures output to Excel using ODS

> ID：11319804
> 
> 赞同：0
> 
> 时间：2012-07-03T22:00:11.077
> 
> 标签：excel, sas

I am running bunch of tobit models on SAS. I want to transfer the output to Excel, but I want the output from all models to be in one Excel book (as opposed to creating one book for each model.) How would one do that? Many thanks.

I have the following code, but it only reports on of the results

```
 ODS TAGSETS.EXCELXP
  file='C:\Documents and Settings\Administrator\My Documents\...\Results.xls'
  STYLE=minimal
  OPTIONS ( Orientation = 'landscape'
  FitToPage = 'yes'
  Pages_FitWidth = '1'
  Pages_FitHeight = '100' );

  Proc qlim Data=AD.Data;
  class var1;
  model don =var1 var2;
  endogenous don ~ truncated (lb = 1);
  Run;

  Proc qlim Data=AD.Data;
  class var1;
  model don =var1 var2 var1*var2;
  endogenous don ~ truncated (lb = 1);
  Run;
  quit;
  ods tagsets.excelxp close; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T14:50:09.587

ODS 语句控制输出写入的位置。要开始写入新的“工作表”，请使用具有不同 sheet_name 的新 ODS 语句。

这是一个简单的例子：

```
ods tagsets.ExcelXP file="SASHELP.CARS Analysis.xls"
                path="c:\temp" style=minimal;
ods tagsets.ExcelXP options(sheet_name="RawData" embedded_titles='Yes');
title "SASHELP.CARS Listing";
proc print data=SASHELP.CARS noobs;
run;
ods tagsets.ExcelXP options(sheet_name="MakeFreq" embedded_titles='Yes');
title "SASHELP.CARS Stats";
proc freq data=SASHELP.CARS;
     table make;
run;
ods tagsets.ExcelXP close; 
```

请注意，第一个 ODS 语句只定义了工作簿目标和样式。单独的 ODS 语句用于定义每个工作表。

# delphi - 如何将配置信息放入可执行文件中？

> ID：11319805
> 
> 赞同：3
> 
> 时间：2012-07-03T22:00:12.227
> 
> 标签：delphi, ini, delphi-2006, portable-executable

如果我们想在 Delphi 编译器生成的可执行文件中存储关键信息，例如密码和服务器地址，我们如何在不知道最终的可执行文件大小和二进制结构（例如文件末尾）的情况下做到这一点？

***边注：***

要存储的文本已经加密；并且在某些计算机中，Windows 不允许在注册表中写入权限，特别是当用户不是管理员时，并且有黑客监视注册表更改并且智能用户可以找到新的 Windows 注册表项。

**评论**

为什么这个问题被否决了？这是可以实现的！如果对大多数人不感兴趣，则不会计量。

我想到了可升级的 bios 和其他固件，例如可以自我更新的卫星电视信号解码器。这怎么可能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T22:18:03.003

您可以使用 .rc 文件将数据放入最终 .exe 文件内的自定义资源中。然后，您可以在运行时访问该资源，例如使用 TResourceStream，并根据需要解密和使用其内容。但是，您无法在 .exe 运行时将新数据写入资源，因为该文件已被操作系统锁定。如果您需要编写新设置，并且没有对注册表的写入权限，则必须改用单独的文件。Windows 预留了特殊文件夹，用户可以在其用户配置文件中对其进行写访问。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T22:24:39.557

创建字符串表资源是一种方法。

创建一个文本文件。说 secretstuff.rc （必须有 .rc 扩展名），里面有这样的东西。

```
STRINGTABLE
{
  1,"This is my encrypted password in say Base64"
} 
```

使用 BRCC32 将其编译为 .res 文件。

使用编译器指令将其包含在相关代码中

```
{$R secretstuff.res} 
```

之后，您可以使用 TResourceStream 访问。

如果您想更好地管理它，将它们填充到 dll 而不是 exe 中可能是明智之举，那么您可以通过提供新版本的 dll 来更新内容。

有一个更详细的例子，另一个目的但相同的原则[here](http://delphi.about.com/library/weekly/aa011805a.htm)

# javascript - Javascript Undefined Variable Before Function

> ID：11319806
> 
> 赞同：0
> 
> 时间：2012-07-03T22:00:12.837
> 
> 标签：javascript, variables

I have this chunk of javascript that's kind of hacked around from [http://www.developphp.com/view.php?tid=1248](http://www.developphp.com/view.php?tid=1248) and I am seeing an error of "undefined variable - broadcast".

```
function cdtd(broadcast) {
    /* expected date format is Month DD, YYYY HH:MM:SS */
    var nextbroadcast = new Date(broadcast);
    var now = new Date();
    var timeDiff = nextbroadcast.getTime() - now.getTime();
    if (timeDiff <= 0) {
        clearTimeout(timer);
        document.getElementById("countdown").innerHTML = "<a href=\"flconlineservices.php\">Internet broadcast in progress<\/a>";
        /* Run any code needed for countdown completion here */
    }
    var seconds = Math.floor(timeDiff / 1000);
    var minutes = Math.floor(seconds / 60);
    var hours = Math.floor(minutes / 60);
    var days = Math.floor(hours / 24);
    hours %= 24;
    minutes %= 60;
    seconds %= 60;
    document.getElementById("daysBox").innerHTML = days + " d";
    document.getElementById("hoursBox").innerHTML = hours + " h";
    document.getElementById("minsBox").innerHTML = minutes + " m";
    // seconds isn't in our html code (javascript error if this isn't commented out)
    /*document.getElementById("secsBox").innerHTML = seconds + " s";*/
    var timer = setTimeout('cdtd(broadcast)',1000);
} 
```

"broadcast" is passed from the page with this `<script type="text/javascript">cdtd("<?php echo $nextbroadcast; ?>");</script>`. $nextbroadcast is based upon the date/time when the user views the page.

I tried `var broadcast;`, `var broadcast = "";`, and `var broadcast = null;`. Whenever I try to declare the variable, before the function, it breaks the script.

Am I doing something incorrectly? The script is working, just fine, but I'd rather not have the error.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T22:04:36.573

这可能是问题所在：

```
var timer = setTimeout('cdtd(broadcast)',1000); 
```

您应该声明`var timer;`上面的`cdtd()`函数，然后在函数*下方*或*外部*设置它：

```
var func = 'cdtd(' + broadcast + ')';

timer = setTimeout(func,1000); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T22:04:54.360

更改以下行：

`var timer = setTimeout('cdtd(broadcast)',1000);`

对此：

`var timer = setTimeout(function() { cdtd(broadcast); }, 1000);`

# jquery - 使用支持 IE7 的 canvas 或 svg 绘制自定义矩形形状

> ID：11319808
> 
> 赞同：1
> 
> 时间：2012-07-03T22:00:18.027
> 
> 标签：jquery, html, css, canvas, svg

我需要一些方向来使用画布或 svg 甚至使用支持 IE7 的 css 绘制以下自定义形状矩形。

欢迎任何 Javascript Jquery 插件。

[http://jsfiddle.net/349x9/1087/](http://jsfiddle.net/349x9/1087/) 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T22:41:18.570

你可以使用拉斐尔。将代码中的点用于路径所需的坐标。您使用 Raphael 命令创建“画布”...

对于初始化画布的简单命令，请转到此处...

[http://raphaeljs.com/](http://raphaeljs.com/)

直接在这里玩路径.. [http://www.irunmywebsite.com/raphael/additionalhelp.php?q=paper.path](http://www.irunmywebsite.com/raphael/additionalhelp.php?q=paper.path)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T23:09:12.373

CSS 边框三角形是一种适用于 IE7 的解决方案，无需 JavaScript：[jsfiddle demo](http://jsfiddle.net/Matt_Coughlin/3WLXa/3/)。

另一个[演示](http://jsfiddle.net/Matt_Coughlin/Sg3xe/5/)4 种直角三角形。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T22:10:18.460

由于 Canvas 元素在 IE7 中不起作用，我建议您使用 excanvas。它是一个简单的 JavaScript，可以帮助您在页面上呈现 Canvas。只需将其添加到页面的标题中，然后只需添加画布元素并在页面上执行您通常的操作即可使用它。

我在这里更新了它[http://jsfiddle.net/349x9/1088/](http://jsfiddle.net/349x9/1088/)我实际上已经保存了示例。在 IE 上检查 excanvas 的链接是[http://code.google.com/p/explorercanvas/](http://code.google.com/p/explorercanvas/)

可以在下面找到 Canvas 的最佳教程：-

*   [html5canvastutorials](http://www.html5canvastutorials.com/)
*   [developer.mozilla.org](https://developer.mozilla.org/en/HTML%3aCanvas)
*   [html5_ref_canvas](http://www.w3schools.com/html5/html5_ref_canvas.asp)

要了解不同的框架以进一步使用画布，请参阅此链接

*   [10-javascript-canvas-frameworks](http://www.backslash.gr/content/blog/webdevelopment/7-10-javascript-canvas-frameworks)对于一些高级/直观/创造性的工作

# java - 如何在类型为接口的注入点中自动装配实现

> ID：11319814
> 
> 赞同：1
> 
> 时间：2012-07-03T22:00:38.143
> 
> 标签：java, spring, interface, dependency-injection

使用 Spring MVC，我有这个 Controller 类：

```
@Controller
public class LoginController {
    @Autowired
    private LoginService loginService;
    // more code and a setter to loginService
} 
```

`LoginService`是一个接口，其唯一的实现是`LoginServiceImpl`：

```
public class LoginServiceImpl implements LoginService {
    //
} 
```

我的`project-name-servlet.xml`文件是这个：

```
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
       http://www.springframework.org/schema/context 
       http://www.springframework.org/schema/context/spring-context-3.0.xsd">   
    <bean id="viewResolver"
        class="org.springframework.web.servlet.view.UrlBasedViewResolver">
        <property name="viewClass"
            value="org.springframework.web.servlet.view.JstlView" />
        <property name="prefix" value="/" />
        <property name="suffix" value=".jsp" />
    </bean>
    <bean id="loginService" class="my.example.service.impl.LoginServiceImpl" />
    <bean class="my.example.controller.LoginController" />
</beans> 
```

问题是，`loginService`没有注入到控制器中。如果我在 XML 文件中指定注入，如下所示，它可以工作：

```
 <bean id="loginService"
        class="may.example.service.impl.LoginServiceImpl" />
    <bean class="my.example.controller.LoginController">
        <property name="loginService" ref="loginService"></property>
    </bean> 
```

为什么会这样？唯一的实现bean不应该注入接口类型的注入点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T00:44:29.893

您必须添加一个[AutowiredAnnotationBeanPostProcessor](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/beans/factory/annotation/AutowiredAnnotationBeanPostProcessor.html)才能使自动装配工作 - 默认情况下它是 byType，因此您无需执行任何显式操作即可将 loginService 注入到 LoginController 中。就像链接说的那样，你可以放一个`<context:annotation-config/>`or`<context:component-scan/>`来自动注册一个 AutowiredAnnotationBeanPostProcessor。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T22:00:38.690

一个对我有用的解决方案是将 autowire 类型定义为[`byType`](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-factory-autowire)：

```
 <bean id="loginService"
        class="my.example.service.impl.LoginServiceImpl"
            autowire="byType" />
    <bean class="my.example.controller.LoginController"
            autowire="byType" /> 
```

另外，我删除了`@Autowired`注释。

# highcharts - Highcharts：y轴上的allowDecimals当它是对数时被忽略

> ID：11319824
> 
> 赞同：1
> 
> 时间：2012-07-03T22:01:00.613
> 
> 标签：highcharts, logarithm

我已经做了一些修改（我已经将我的 0 数据显示为 0.1，但随后将其修改为 0；因为对数不允许 0 数据），但我最新的问题是当我有对数时y轴并将allowDecimals设置为false，我认为它会被忽略，或者可能是我的黑客正在这样做。为了显示，这里是：

[http://jsfiddle.net/index/wXPUx/](http://jsfiddle.net/index/wXPUx/)

梨形图从 0 开始，但在 y 轴上有 0.2。如何在 y 轴上删除/忽略/不获取小数点？基本上，我只想得到整数，即使它很高。

我希望这很清楚。如果没有，我可以提供更多或更多地澄清我的问题。或者，你们有什么顾虑/想法我有/可以实现（编辑）这个吗？

PS：

苹果图表是为了显示我为什么使用对数 y 轴（与 container2 比较）。小数据一直在底部。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T23:45:59.267

不知道能不能解决你的问题：

```
labels: {
    formatter: function() {
        return (this.value % 1 != 0 ? (this.value != 0.1 ? '' : 0) : this.value);
    }
} 
```

[**演示**](http://jsfiddle.net/ricardolohmann/wXPUx/3/)

# mysql - Codeignighter 记录不会插入

> ID：11319826
> 
> 赞同：1
> 
> 时间：2012-07-03T22:01:24.833
> 
> 标签：mysql, insert

第一次使用 CI，我被这个看似简单的问题搞砸了。我的查询不会插入记录。

为了调试可能的问题，插入代码已被简化，但我仍然没有得到任何乐趣。

本质上，我正在使用；

```
$data = array('post_post' => $this->input->post('ask_question'));
$this->db->insert('posts', $data); 
```

我没有收到任何错误（尽管这可能是由于另一个与 CI 相关的创伤而在 config/database.php 中禁用了它们：-$）

我用过

```
echo print $this->db->last_query(); 
```

获取生成的查询，如下图：

```
INSERT INTO `posts` (`post_post`) VALUES ('some text') 
```

我已将此查询粘贴到 phpMyAdmin 中，它插入没有问题。我什`$this->db->query()`至尝试使用“手动”运行上面的输出查询，但同样，记录不会插入。

数据库表“posts”的方案只是两列，post_id 和 post_post。

请，任何关于这里发生的事情的指示将不胜感激......谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T23:18:03.993

好的..解决了，在与 CI 搞砸之后。

通过将持久连接设置为 false 使其工作。

`$db['default']['pconnect'] = FALSE;`

*叹*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T03:43:23.793

事情通常看起来不错，你所说的一切都表明它应该工作。我的第一直觉是检查您插入的内容是否与您的 SQL 字段兼容。

只是一个很酷的 CI 功能；我建议你看看[CI 数据库事务](http://codeigniter.com/user_guide/database/transactions.html)类。事务允许您将查询/查询包装在事务中，可以在失败时回滚，并且还可以使错误处理更容易：

```
 $this->db->trans_start();
    $this->db->query('INSERT INTO posts ...etc ');
    $this->db->trans_complete();

    if ($this->db->trans_status() === FALSE)
    {
        // generate an error... or use the log_message() function to log your error
    } 
```

或者，您可以做的一件事是将您的 Insert SQL 语句放入 $this->db->[查询](http://codeigniter.com/user_guide/database/queries.html)(your_query_here)，而不是调用 insert。有一个称为[查询](http://codeigniter.com/user_guide/database/queries.html)绑定的 CI 查询功能，它也会自动转义您传递的数据数组。

让我知道它是怎么回事，希望这会有所帮助！

# java - 如何在 activemq.xml 中创建/预配置持久订阅者，以便在 ActiveMQ 启动时准备好这些订阅？

> ID：11319830
> 
> 赞同：4
> 
> 时间：2012-07-03T22:02:32.490
> 
> 标签：java, jms, activemq, publish-subscribe, subscriber

如何在 activemq.xml 中创建/预配置持久订阅者，以便这些订阅在 ActiveMQ 出现时准备就绪？好像订阅者处于离线状态。

我们期待一个固定（但可配置）数量的已知订阅者。想要缓冲从第 1 天开始发布者发送的所有消息，以防并非所有订阅者都已启动。不确定这是否是常见情况，但提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T09:34:52.960

这是一个非常常见的用例。您实际上应该查看的是[复合目的地](http://activemq.apache.org/virtual-destinations.html)，而不是持久主题（此功能存在大量问题，主要问题是默认情况下消息未持久化，因此无法在代理中断中幸存）。

使用此方案，您可以设置一个复合主题，将每条消息转发到多个队列——每个订阅者一个专用的队列。

```
<destinationInterceptors>
  <virtualDestinationInterceptor>
    <virtualDestinations>
      <compositeTopic name="orders">
        <forwardTo>
          <queue physicalName="orders.consumer1" />
          <queue physicalName="orders.consumer2" />
        </forwardTo>
      </compositeTopic>
    </virtualDestinations>
  </virtualDestinationInterceptor>
</destinationInterceptors> 
```

这样，当您的订阅者最终连接到自己的队列时，它会耗尽输入其中的消息。

请注意，请确保您的[内存限制足够大](http://activemq.apache.org/producer-flow-control.html)以处理存储在这些队列中的消息，否则您的代理将出现挂起（称为生产者流控制的代理功能）。

我看到您是新用户，所以如果这回答了您的问题，请打勾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T23:36:36.600

您可以考虑使用持久队列（而不是主题）并使用队列浏览器（订阅者）来接收消息。跟踪序列号的责任在于订阅者方面（不确定在您的情况下是否可行）。队列浏览器不会从持久队列中删除消息。您要么必须使用有时间的消息，要么可能在特定时间段后使用常规队列订阅者来清除旧消息。

具有持久队列的队列浏览器对服务器的负担较少 - 但您正在向订阅者施加更多负载。

希望能帮助到你。

# ios - UITableView 在表格内点击重新排序

> ID：11319831
> 
> 赞同：0
> 
> 时间：2012-07-03T22:02:36.333
> 
> 标签：ios, uitableview

给过去使用过 UITableView 的人的一个问题

我目前在编辑模式下使用 UITableView，并且实现了以下数据源/委托方法

*   `(void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)fromIndexPath toIndexPath:(NSIndexPath *)toIndexPath //which tells me where the cell has been moved to`

*   `(NSIndexPath *)tableView:(UITableView *)tableView targetIndexPathForMoveFromRowAtIndexPath:(NSIndexPath *)sourceIndexPath toProposedIndexPath:(NSIndexPath *)proposedDestinationIndexPath //which tells me where it may be moved`

**我想要实现的目标：当我选择一个单元格并对其重新排序时，只有**当手指在表格视图中时，单元格才应该在表格视图中上下移动。这意味着如果我从表格视图中开始并移到它之外，则单元格应该重新定位并且不让我重新排序单元格。

问题是，在执行重新排序时，无法找出（据我所知）我的手指在哪里。如果我能找出手指的位置，那么就有可能实现这一目标。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T22:07:33.320

看一下 (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 函数。HTH。

# math - 我怎样才能简单地检查一组 n 数字是否都不同？

> ID：11319841
> 
> 赞同：0
> 
> 时间：2012-07-03T22:03:30.260
> 
> 标签：math, numbers, logic

我有 n 个整数，我需要一个快速的逻辑测试来查看它们是否都不同，而且我不想比较每个组合以找到匹配项......关于一个漂亮而优雅的方法的任何想法？

我不在乎你的想法是什么编程语言，我可以转换！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T22:06:36.690

如果您的语言支持，请使用集合数据结构，您还可以考虑保留已看到元素的哈希表。

在python中你可以尝试

```
seen={}
n_already_seen=n in seen
seen[n]=n 
```

`n_already_seen`将是一个布尔值，指示是否已经看到 n。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T22:24:55.093

由于交换性和传递性，您不必检查每个组合；您可以简单地从列表中查看每个条目并对照*它之后*的每个条目检查每个条目。例如：

```
bool areElementsUnique( int[] arr ) {
    for( int i=0; i<arr.Length-1; i++ ) {
        for( int j=i+1; j<arr.Length; j++ ) {
            if( arr[i] == arr[j] ) return false;
        }
    }
    return true;
} 
```

请注意，内部循环不是从头开始，而是从下一个元素 ( `i+1`) 开始。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T23:33:58.333

您可以使用哈希表或使用哈希的 Set 类型的数据结构。然后，您可以将所有元素插入到哈希表或哈希集中，并在插入时检查元素是否已经在表/集中。如果由于某种原因您不想随时检查，您可以插入所有数字，然后检查结构的大小是否小于 n。如果它小于 n，则必须有重复的元素。否则，它们都是独一无二的。

这是一个非常紧凑的 Java 解决方案。时间复杂度摊销为 O(n)，空间复杂度也为 O(n)。

```
public boolean areAllElementsUnique(int [] list)
{
    Set<Integer> set = new HashSet<Integer>();
    for (int number: list)
        if (set.contains(number))
            return false;
        else
            set.add(number);
    return true;
} 
```

# c# - 从使用线程 c# 中获取 DropDownList 选择值

> ID：11319845
> 
> 赞同：0
> 
> 时间：2012-07-03T22:03:43.987
> 
> 标签：c#, multithreading

我有一个启动第二个线程的网络表单，当我启动新线程时，我在网络表单上有一个 DropDownList，选择值为 1，线程函数使用获取值

```
((DropDownList)Page.FindControl("MLprice2_" + _lineRef)).SelectedItem.Value) 
```

这些工作得很好，当我将 DropDownList 值更改为 5 时，问题就来了

```
((DropDownList)Page.FindControl("MLprice2_" + _lineRef)).SelectedItem.Value) 
```

仍然获得价值**1**而不是**5**。

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T05:59:37.093

如果您在网页的生命周期中启动第二个线程，那么在第二个线程完成处理之前，网页可能已经完成了它的生命周期。该网页被阻止被垃圾收集，因为它被第二个线程以某种方式引用（因为您正在那里更新网页）。但是客户端可能已经收到了渲染的网页，因此第二个线程的结果不会到达客户端。它将在服务器（内存中）上更新，但不会在客户端上更新。

我认为有必要采取不同的方法。您必须进行一些额外的异步通信和/或页面更新（想到 ajax 跳转）才能让呈现的页面接收到将下拉列表设置为 5 的信号。

# php - 使用 json_encode 将数组从 PHP 传递到 JavaScript 显示空值

> ID：11319846
> 
> 赞同：0
> 
> 时间：2012-07-03T22:03:48.837
> 
> 标签：php, javascript, json

我正在使用以下代码将数组从 PHP 发送到 JavaScript，但使用`json_encode()`. 这是我的代码：

在 PHP 中：

```
$arr = array();
while($row = mysql_fetch_assoc($result)) {
    $arr[] = $row; 
} 
```

在 JavaScript 中：

```
var test = "<?php echo json_encode($arr); ?>";
alert (test); 
```

var_dump() 的结果：

```
array
  0 => 
    array
      'proj_nbr' => string '0111' (length=4)
      'proj_name' => string 'General' (length=7)
  1 => 
    array
      'proj_nbr' => string '' (length=0)
      'proj_name' => string 'New Project' (length=11) 
```

它只显示空白值。我的 PHP 版本是 5.3.6。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T21:09:51.090

我想通了..我的错误是javascript中的双引号 `var test = "<?php echo json_encode($arr); ?>";`

应该 `var test = <?php echo json_encode($arr); ?>;`

也`mysql_fetch_assoc`改为`mysql_fetch_row`.

但数据不是数组格式。我得到了这种格式的数据`(0111,General,)`。我需要数组格式的数据。有什么建议么？

# java - 从 linux 的服务器终端调用 Java 时的编码问题

> ID：11319851
> 
> 赞同：1
> 
> 时间：2012-07-03T22:04:37.677
> 
> 标签：java, linux, encoding, character-encoding, terminal

我从终端调用 Java 并将阿拉伯字符串作为参数发送到 main 方法，如下所示：

/path/to/java -Dfile.encoding=UTF-8 -classpath "/path/to/bin" path.to.main "مرحبا" 一切正常，我收到的字符串没有任何编码问题......

但是，在服务器上执行相同操作并接收像“????”这样的字符串时，我遇到了编码问题

那么，任何人都可以告诉我如何在我的 linux 服务器上解决这个编码问题吗？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T14:45:34.327

这仍然很模糊..您的意思是 ssh 进入 linux 服务器并在那里运行相同的命令，而不是在本地 Windows 机器上运行？osx？假设您在本地使用 OSX 并运行 ssh 以访问 linux 机器，我会查看您的 ssh 客户端的终端设置。它很可能不支持 UTF-8 编码，而您只是看到终端客户端对它不理解的字符的解释。

# javascript - 单击锚标记时，最外层的 div 必须与其子元素一起隐藏

> ID：11319855
> 
> 赞同：1
> 
> 时间：2012-07-03T22:05:03.550
> 
> 标签：javascript, jquery

我有一个 div 标签，其中包含一个 div 标签，其中包含一个 ul 标签，然后包含许多 li 标签。在这些 li 标签中包含一个锚元素，单击该元素会导致最外层的 div 隐藏。

例如

```
<div class="object" id="123">
  <div>
    <ul>
      <li></li>
      <li><a href="#" id="hide">hide outermost div and its child elements</a></li>
    </ul>
  </div>
</div>

<div class="object" id="124">
  <div>
    <ul>
      <li></li>
      <li><a href="#" id="hide">hide outermost div and its child elements</a></li>
    </ul>
  </div>
</div> 
```

单击锚标记时，最外层的 div 必须与其子元素一起隐藏。

我认为我需要重复使用 parentNode .. 但是有没有更简单的方法可以直接访问最外层的 div 并因此访问它的 id。帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T22:07:39.303

你的问题相当不清楚。听起来您几乎正在寻找一种访问“外部 div”的通用方式*。*如果是这种情况，那么在锚点和外部 div 上都有 id 是没有意义的。如果只有一个“外部 div”和一个锚点来隐藏它，那么您只需要：

```
$('#hide').click(function(){
    $('#123').hide();
}); 
```

如果您想要一种通用的方式来执行此操作，则应该向两者添加类：

```
<div class="outerDiv" id="123">
    <div>
        <ul>
            <li></li>
            <li><a href="#" class="hider" id="hide">hide outermost div and its child elements</a></li>
        </ul>
    </div>
</div> 
```

和：

```
$('.hider').click(function(){
    $(this).closest('.outerDiv').hide();
}); 
```

# objective-c - 在 Objective-C++ 代码中的 C++ 代码中编译 C 代码

> ID：11319858
> 
> 赞同：0
> 
> 时间：2012-07-03T22:05:18.663
> 
> 标签：objective-c, ios, xcode, objective-c++, llvm-3.0

我的问题有点复杂：

**库：** 我有一个用 C 和 C++ 编写的库。它使用 Apple LLVM 在 XCode 中完美编译。这个库本身的工作是由 C 代码完成的，而 C++ 部分只是一个 C++ 接口，因为我更喜欢 C++。理论上我只需要使用 C++ 来与它通信。

**应用程序：** 我在 Objective-C 中有一个使用上述库的应用程序。当然，由于与我的库的通信是通过 C++ 完成的，因此我需要一个 .mm 文件才能从“Objective-C++”调用我的库。

在编译过程中......发生了几种“C”语言的发布：

*   错误：非常量静态数据成员必须被初始化
*   错误：文件范围内不允许语句表达式
*   ETC...

它只发生在 Objective-C++

*   Objective-C++ (app) -> C++ headers (lib) -> C headers (lib, with extern "C") -> **NOT OK!!! 为什么？**

如果我制作另一个 C++ 应用程序来测试库，那就没问题了

*   C++ (app) -> C++ (lib) -> C header (lib, with extern "C") -> **OK**

*详细信息：我一直在这里使用 Apple LLVM 编译器*

**问题：** 如何从 Objective-C++ 代码从 C++ 编译 C 代码？为什么它与从常规 C++ 代码编译不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T03:04:53.047

别忘了做

```
#ifdef __cplusplus
extern "C" {
#endif

<Some C method declaration>

#ifdef __cplusplus
}
#endif 
```

在包含 C 方法声明的头文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T02:58:51.827

经过长时间的尝试和谷歌，我终于可以弄清楚了。在调用 C 头文件之前，我应该取消定义 MAX 和 MIN 宏。由于某种原因，它们是先前定义的。编译器不会精确显示错误。这就是为什么这很困难。我正在使用的 C 框架有它自己的 MAX 和 MIN 宏声明......

另一个可能对其他人有用的非常有趣的事情是，在我们需要做同样的事情之前：如果我们使用一些实现它自己的 max 和 min 的 C 框架，请取消定义 max 和 min（小写）。

它解决了这两个问题。

# image - 图像在 mac 预览中显示颠倒，但在浏览器中显示为右上

> ID：11319861
> 
> 赞同：0
> 
> 时间：2012-07-03T22:05:36.490
> 
> 标签：image, uiimage, jpeg

jpg 在我的 Mac 上颠倒呈现，但在同一 Mac 上的 Safari 浏览器中正确呈现。什么是未正确读取的方向数据？是在 EXIF 里吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T06:25:06.790

以下是如何以正确的方向显示它

```
 if (image.imageOrientation != UIImageOrientationUp)
  {            
    image = [UIImage 
              imageWithCGImage: image.CGImage 
              scale: 1 
              orientation: UIImageOrientationUp];
  } 
```

基于 ravin [Save UIImage 的答案，以错误的方向加载它](https://stackoverflow.com/questions/7838699/save-uiimage-load-it-in-wrong-orientation)

# javascript - 如何确保 Dojo 模块按特定顺序执行？

> ID：11319862
> 
> 赞同：0
> 
> 时间：2012-07-03T22:05:38.847
> 
> 标签：javascript, dojo

所以我使用**Dojo 1.7** 'require' 语法来触发两个模块。但是，调用这些模块的顺序很重要，因为一个模块处理另一个模块的结果。

我不能只是按程序布置它们……我如何确保它们按顺序开火？

```
require(['modules/createElements', 'dojo/domReady!'], 
    function(createElements) {
        createElements.go();
});

require(['modules/modifyElements', 'dojo/domReady!'], 
    function(modifyElements) {
        // This is supposed to modify the elements created
        // by the createElements module, but it usually fires
        // _before_ the elements have been created!
        modifyElements.go();
}); 
```

理想情况下，我希望这两个模块或多或少相互独立（例如，这样`modifyElements`可以作用于任何来源创建的元素），因此`modifyElements`在末尾调用`createElements`是不可取的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T22:08:03.523

啊哈，我在发布这篇文章后不久意识到我可以在一个单一的文件中完成我的所有工作`require`，就像这样：

```
require(['modules/createElements', 'modules/modifyElements', 'dojo/domReady!'],
    function(createElements, modifyElements) {
        createElements.go();
        modifyElements.go();
}); 
```

# ruby - 列出 Mongoid 模型中的动态属性

> ID：11319867
> 
> 赞同：4
> 
> 时间：2012-07-03T22:05:43.433
> 
> 标签：ruby, mongodb, dynamic, mongoid

我已经查看了文档，但我找不到具体的方法来解决这个问题。我已经为模型添加了一些动态属性，我希望能够遍历所有这些属性。

因此，举一个具体的例子：

```
class Order
  include Mongoid::Document

  field :status, type: String, default: "pending"
end 
```

然后我执行以下操作：

```
Order.new(status: "processed", internal_id: "1111") 
```

后来我想回来并能够获得所有动态属性的列表/数组（在这种情况下，就是“internal_id”）。

我仍在挖掘，但我很想听听其他人是否已经解决了这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T23:07:44.333

这将只为您提供给定记录 x 的动态字段名称：

```
dynamic_attribute_names = x.attributes.keys - x.fields.keys 
```

如果您使用其他 Mongoid 功能，则需要减去与这些功能相关的字段：例如`Mongoid::Versioning`：

```
dynamic_attribute_names = (x.attributes.keys - x.fields.keys) - ['versions'] 
```

**要仅获取动态属性的键/值对：**

**确保克隆 attributes() 的结果，否则你修改 x !!**

```
attr_hash = x.attributes.clone  #### make sure to clone this, otherwise you modify x !!
dyn_attr_hash = attr_hash.delete_if{|k,v| ! dynamic_attribute_names.include?(k)} 
```

或在一行中：

```
x.attributes.clone.delete_if{|k,v| ! dynamic_attribute_names.include?(k)} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-07T01:34:57.720

只需在您的模型中包含这样的内容：

```
module DynamicAttributeSupport

  def self.included(base)
    base.send :include, InstanceMethods
  end

  module InstanceMethods
    def dynamic_attributes
      attributes.keys - _protected_attributes[:default].to_a - fields.keys
    end

    def static_attributes
      fields.keys - dynamic_attributes
    end
  end

end 
```

这是一个与之配套的规范：

```
require 'spec_helper'

describe "dynamic attributes" do

  class DynamicAttributeModel
    include Mongoid::Document
    include DynamicAttributeSupport
    field :defined_field, type: String
  end

  it "provides dynamic_attribute helper" do
    d = DynamicAttributeModel.new(age: 45, defined_field: 'George')
    d.dynamic_attributes.should == ['age']
  end

  it "has static attributes" do
    d = DynamicAttributeModel.new(foo: 'bar')
    d.static_attributes.should include('defined_field')
    d.static_attributes.should_not include('foo')
  end

  it "allows creation with dynamic attributes" do
    d = DynamicAttributeModel.create(age: 99, blood_type: 'A')
    d = DynamicAttributeModel.find(d.id)
    d.age.should == 99
    d.blood_type.should == 'A'
    d.dynamic_attributes.should == ['age', 'blood_type']
  end
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T14:22:27.850

所以，我最终做的是这个。我不确定这是否是最好的方法，但它似乎给了我正在寻找的结果。

```
class Order
  def dynamic_attributes
    self.attributes.delete_if { |attribute| 
      self.fields.keys.member? attribute 
    }
  end
end 
```

属性似乎是对象上实际属性的列表，而字段似乎是预定义字段的散列。无法在文档中完全找到它，但我现在要使用它，除非其他人知道更好的方法！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T00:07:40.997

尝试 .methods 或 .instance_variables

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T13:34:21.340

不确定我是否喜欢克隆方法，所以我也写了一个。由此，您也可以轻松构建内容的散列。这仅输出所有动态字段（平面结构）

```
 (d.attributes.keys - d.fields.keys).each {|a| puts "#{a} = #{d[a]}"}; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-18T20:28:52.650

我无法使上述任何解决方案起作用（因为我不想为每个模型添加代码块和代码块，并且由于某种原因，`attributes`模型实例上不存在该方法，对我来说。:/)，所以我决定编写自己的助手来为我做这件事。请注意，此方法包括**动态和预定义字段**。

**助手/mongoid_attribute_helper.rb**：

```
module MongoidAttributeHelper
  def self.included(base)
    base.extend(AttributeMethods)
  end

  module AttributeMethods
    def get_all_attributes
      map = %Q{
          function() {
            for(var key in this)
            {
              emit(key, null);
            }
          }
        }

      reduce = %Q{
          function(key, value) {
            return null;
          }
        }

      hashedResults = self.map_reduce(map, reduce).out(inline: true) # Returns an array of Hashes (i.e. {"_id"=>"EmailAddress", "value"=>nil} )

      # Build an array of just the "_id"s.
      results = Array.new
      hashedResults.each do |value|
        results << value["_id"]
      end

      return results
    end
  end
end 
```

**模型/用户.rb**：

```
class User
   include Mongoid::Document
   include MongoidAttributeHelper
   ...
end 
```

一旦我将上述包含 ( `include MongoidAttributeHelper`) 添加到我想使用此方法的每个模型中，我可以使用`User.get_all_attributes`.

当然，这可能不是最有效或最优雅的方法，但它确实有效。:)

# sql-server-2008 - 如何在 SQL Server 2008 中启用方括号？

> ID：11319871
> 
> 赞同：1
> 
> 时间：2012-07-03T22:06:17.280
> 
> 标签：sql-server-2008, ssms

我希望它自动完成，以便：

```
select id from customers 
```

变成这样：

```
SELECT [id] FROM [customers] 
```

尝试遵循编码标准，这将节省大量不必要的打字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T22:08:48.457

我不相信有任何方法可以设置本机 IntelliSense 来执行此操作。但是您可能对某些类似于第 3 方 IntelliSense 的产品和/或 SQL 格式化程序感到幸运。我不会在这里列出它们，只是因为这个答案会比其中一些（或者至少是我提供的 URL）更持久。搜索引擎应该会引导您找到一些免费解决方案以及各种付费解决方案的试用版。

# html - div右对齐不保持在顶部

> ID：11319872
> 
> 赞同：0
> 
> 时间：2012-07-03T22:06:18.347
> 
> 标签：html, css

当中心 div 的内容非常广泛时，如何将红色框保持在最上面？当居中的 div 有很多内容时，红色的 div 转到另一行。你知道为什么会这样吗？

看看我的代码：http: [//jsfiddle.net/5dC6T/3/](http://jsfiddle.net/5dC6T/3/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T22:18:06.340

问题在于您订购`<div>`元素的方式。尝试：

```
<div>
    <div class="red-box"></div>
    <img class="photo" alt="" />
    <span>Name</span>
    <span>Data</span>
    <span>City</span>
</div> 
```

CSS：

```
/* These two will stay anchored on the right and left */
.red-box { float: right; }
img.photo { float: left; } 
```

我对您当前的代码进行了这些修改：http: [//jsfiddle.net/Wexcode/38qYS/](http://jsfiddle.net/Wexcode/38qYS/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T22:17:47.270

使用这个 CSS：

```
#QuadroEvento div.TopoEvento div.euvou{
    height: 90px;
    width: 90px;
    background-color: red;
    position: absolute;
    right: 0px;
    margin-right: 0px;
}​ 
```

关键是：`position: absolute;`

您也可以使用`position: fixed;`等，更多详细信息请参见此处：http: [//www.w3schools.com/cssref/pr_class_position.asp](http://www.w3schools.com/cssref/pr_class_position.asp)

# javascript - 使用链接调用将文件插入 div 的 javascript 函数

> ID：11319873
> 
> 赞同：0
> 
> 时间：2012-07-03T22:06:23.827
> 
> 标签：javascript, hyperlink, load, external

```
<script type="text/javascript">

function link(page){
   function (e){
        e.preventDefault();
        $('#content').load(page);
   }
}
</script>

<a href="#" onclick="link(gg.htm)">Link</a>

<div id="content"></div> 
```

我很坚持这个 - 任何人都可以指出这个问题吗？当我点击链接时没有任何反应:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T22:08:02.330

更改`link(gg.htm)`方式`link('gg.htm')`

和

```
function link(page){
   function (e){
        e.preventDefault();
        $('#content').load(page);
   }
} 
```

经过

```
function link(page){
    window.event.preventDefault();
    $('#content').load(page);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T22:16:20.733

看起来您正在使用 jQuery，那么为什么不使用他们的事件呢？我可能会做这样的事情：

```
<script type="text/javascript">
$(document).ready(function() {
    $(".load_link").click(function(e) {
        e.preventDefault();
        $("#content").load($(this).data("link"));
    });
});
</script>

<a href="#" data-link="gg.htm" class="load_link">Link</a>

<div id="content"></div> 
```

# ruby-on-rails - 如何仅为 1 个文件调用asset_pipeline？

> ID：11319876
> 
> 赞同：1
> 
> 时间：2012-07-03T22:06:45.153
> 
> 标签：ruby-on-rails, ruby-on-rails-3, asset-pipeline

我试图了解asset_pipeline。

我基本上在 style.css.scss 中有我所有的网站范围的代码（在 application.css.scss 中是 @imported）

我还有一些杂项控制器，它们的代码被我拆分成一个单独的文件，只是为了加载到该页面上。例如，在我的profiles_controller 我有profiles.css.scss 和profiles.js

在文档中它说我可以通过键入有条件地包括那些：

```
<%= stylesheet_link_tag params[:controller] %> 
```

和一个类似的 javascript_include_tag

问题是当我在我的任何没有控制器样式表的页面上查看源代码时，它是找不到 404 文件。我不希望每个控制器有 10 个空白文件和 10 个空白 javascript 文件（那些控制器几乎没有任何额外的 css 或代码，所以我把它放在主 scss 文件中）......我做错了吗？

注意：我已经从 JS 和 css 文件中删除了包含树，因为我不希望包含该文件夹中的任何文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T22:50:35.747

在您的应用程序布局文件中，添加`yield`这样的语句以将样式表作为一次性包含在不同视图中：

```
= stylesheet_link_tag    "application"
= yield :stylesheets 
= javascript_include_tag "application"
= yield :javascripts 
```

然后在要包含样式表的每个视图文件中：

```
= content_for :stylesheets do
  = stylesheet_link_tag "controller_name"

= content_for :javascripts do
  = javascript_include_tag "controller_name" 
```

这将仅将这些文件包含在您需要它们的视图中。

# php - 带有附件的 swiftmailer 和电子邮件表单 - 初学者

> ID：11319878
> 
> 赞同：16
> 
> 时间：2012-07-03T22:06:57.293
> 
> 标签：php, swiftmailer

一如既往，这里是我学到很多东西的地方。我现在有一个新的东西要学：

我有一个html表单：

```
<tr><td width="16%">File attachment</td><td width="2%">:</td><td><input type="file" name="fileatt" /></td></tr> 
```

和一个mail.php：

```
$attachfile=$_POST["fileatt"]; 
```

以及用于发送电子邮件的正确 swiftmailer 代码；

我在谷歌上搜索过，我发现了很多示例如何使用存储在网站上的文件发送附件，但我想即时进行。因此，当您提交按钮时，它会将其发送给人们，而不是上传文件。

```
// Create the Transport
$transport = Swift_SmtpTransport::newInstance('mail.server.co.uk', 25)
->setUsername('user')
->setPassword('pass')
;

// Create the Mailer using your created Transport
$mailer = Swift_Mailer::newInstance($transport);

// Create a message
$message = Swift_Message::newInstance($subject)
  ->setFrom(array('emai@emai.com' => 'name'))

   ->setBody($html, 'text/html')
  ;
// Add alternative parts with addPart()
$message->addPart(strip_tags($html), 'text/plain');

// Send the message
$result = $mailer->send($message); 
```

任何人都可以帮助我如何进行动态文件上传，好吗？提前致谢！！！

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-07-03T23:05:51.547

有一个简单的方法可以做到这一点，你去：

```
$message->attach(
Swift_Attachment::fromPath('/path/to/image.jpg')->setFilename('myfilename.jpg')
); 
```

这是 SwiftMail 可以做到这一点的一种方式，现在只是 /tmp 文件，并将上面的内容转换为以下内容：

假设：fileatt 是 $_FILE 的变量，['tmp_name'] 实际上是 PHP 从表单上传创建的 tmp 文件。

```
$message->attach(
Swift_Attachment::fromPath($_FILES['fileatt']['tmp_name'])->setFilename($_FILES['fileatt']['name'])
); 
```

有关 SwiftMail 附件的更多信息，请参阅此[文档](https://swiftmailer.symfony.com/docs/messages.html#attaching-files)页面

关于 $_FILES 的更多信息可以在 w3schools 上找到，尽管我不喜欢[w3schools](http://www.w3schools.com/php/php_file_upload.asp)，但这个页面是可靠的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-02-10T09:18:26.287

另一种方法是，仅使用一个变量作为路径和文件名：

```
$message->attach(Swift_Attachment::fromPath('full-path-with-attachment-name')); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-13T09:01:55.973

> 单个附件

我的回答与 André Catita 的类似。但是，在 Laravel 6 中，您可以使用**$request**代替**$_FILES**。让我简化上面的代码：

```
$path = $request->file('import')->getPathName();
$fileName = $request->file('import')->getClientOriginalName();      

$message->attach(
        Swift_Attachment::fromPath($path)->setFilename($fileName)
        ); 
```

这里我假设你的文件标签的名字是 import。例如：`<input type="file" name="import" />`

> 多个附件

现在，假设您需要多个附件，而不是单个附件。然后需要更改代码。

首先，您的 html 代码将变为：`<input type="file" name="import[]" multiple />`

对于后端或 laravel；代码将是：

```
$files = $request->file('import');
foreach($files as $file){

        $path = $file->getPathName();
        $fileName = $file->getClientOriginalName();      

        $message->attach(
            Swift_Attachment::fromPath($path)->setFilename($fileName)
            );
} 
```

# javascript - 为多个租户提供良好性能的键/值存储

> ID：11319890
> 
> 赞同：1
> 
> 时间：2012-07-03T22:08:06.673
> 
> 标签：javascript, python, google-app-engine, nosql, multi-tenant

我正在运行一个多租户 GAE 应用程序，其中每个租户可能拥有 1000 到 100k 个文档。
目前我正在尝试制作一个 MVC javascript 客户端应用程序（我的应用程序的管理部分带有 spin.js），我需要 CRUD 端点和一次获取大量序列化对象的能力。对于这个特定的工作，appengine 的速度很慢。我试图将序列化的对象存储在 blobstore 中，但是在读取/写入和将内容更新到 blobstore 之间需要太多时间，并且应用程序变得非常慢。

我想在外部机器上使用 nosql db 来通过 appengine 执行这些操作。一些选项是 mongodb、couchdb 或 redis。但我不确定它们在处理这么多数据和来自不同租户的并发请求/插入时表现如何。

假设我有 20 个租户，每个租户有 50k 文档。这些数据库能够处理这种负载吗？

这甚至是正确的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T06:14:30.953

为什么不使用速度更快的常规 appengine 数据存储而不是 blobstore？只需将您的文档作为 Blob 属性存储在常规实体中。只需确保实体大小不超过 1 MB，在这种情况下，您必须将数据拆分为多个实体。我以这种方式运行一个包含数百万个大 Blob 的应用程序。为了进一步加快速度，使用 memcache 甚至内存缓存。考虑以更快的速度获取最终一致性的实体。使用批量操作或异步 API 尽可能多地并行运行数据库操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T22:17:34.407

从 appengine 调用这些外部机器的开销将比您现在看到的性能更差（我预计）。为什么不把所有东西都移到非 appengine 的机器上呢？

我不能为沙发说话，但只要正确设置并有足够的马力满足您的需求，mongo 或 redis 绝对能够处理严重的负载。

# c# - HttpWebRequest 仅在 .NET 4.0 上运行

> ID：11319891
> 
> 赞同：5
> 
> 时间：2012-07-03T22:08:18.233
> 
> 标签：c#, vb.net, .net-4.0, .net-3.5, httpwebrequest

我遇到了一个奇怪的问题，甚至是 WebRequest 的行为。首先，这就是我想要做的：

```
Dim req As HttpWebRequest = CType(Net.WebRequest.Create("https://cloud.myweb.de/myenginge/dostuff"), HttpWebRequest)

Dim inputString As String = "text=DoStuff"
Dim data As Byte() = System.Text.Encoding.ASCII.GetBytes(inputString)

req.Method = "POST"
req.Accept = "application/xml;q=0.9,*/*;q=0.8"

req.ContentType = "application/x-www-form-urlencoded"
req.ContentLength = data.Length

str2 = req.GetRequestStream()

str2.Write(data, 0, data.Length)
str2.Close()

Dim resp As HttpWebResponse = CType(req.GetResponse, HttpWebResponse)
str = resp.GetResponseStream()
buffer = New IO.StreamReader(str, System.Text.Encoding.ASCII).ReadToEnd 
```

但是在我的编译设置中设置 .NET Frame 3.5 会导致超时：

```
str2 = req.GetRequestStream() 
```

在设置框架版本 4.0 工作时，一切都通过了，没有任何超时问题。有人知道为什么会这样吗？我也试了3.0，还是不行。

（我在这个例子中使用的是 VB.NET，但也欢迎使用 C# 解决方案。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T23:06:08.333

我的猜测是您还有其他一些尚未处理的请求。更新您的代码以`using`在适用的情况下使用该语句（在处理任何实现的对象时，您应该始终使用它`IDisposable`）例如

```
using (var stream = req.GetRequestStream())
{
    ...
} 
```

这将确保所有流在移动到下一个之前可靠地关闭。

**更新**

这绝对不是切换 .NET Framework 的问题，我将您的代码沙箱化到一个小型控制台应用程序中并重新编写代码如下（显然将您的 URL 切换为不同的）：

```
Dim request = CType(WebRequest.Create("https://cloud.myweb.de/myenginge/dostuff"), HttpWebRequest)
Dim data As Byte() = System.Text.Encoding.ASCII.GetBytes("text=DoStuff")
request.Method = WebRequestMethods.Http.Post
request.Accept = "application/xml;q=0.9,*/*;q=0.8"
request.ContentType = "application/x-www-form-urlencoded"
request.ContentLength = data.Length
Using inputStream = request.GetRequestStream()
    inputStream.Write(data, 0, data.Length)
End Using

Dim response = CType(request.GetResponse(), HttpWebResponse)
Dim buffer As String = ""
Using outputStream = response.GetResponseStream()
    Using streamReader = New StreamReader(outputStream, System.Text.Encoding.ASCII)
        buffer = streamReader.ReadToEnd()
    End Using
End Using
Console.WriteLine(buffer) 
```

我每次都得到了成功的回复。我在 .NET 4.0 和 3.5 下运行了相同的代码。[以下是Fiddler](http://fiddler2.com/fiddler2/)提供的每个请求的外观：

> **POST** someurl HTTP/1.1
> **Accept** : application/xml;q=0.9, */* ;q=0.8
> **Content-Type** : application/x-www-form-urlencoded
> **Host** : someurl
> **Content-Length** : 12
> **Expect** : 100-continue
> **Connection** : Keep-活
> 
> 文本=DoStuff

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T08:58:48.277

I would compare the IL code of your exe files using [ILSpy](http://wiki.sharpdevelop.net/MainPage.ashx).
Maybe an inspection on this level gives you an idea where things differ between the versions.

# css - nth-child 没有像预期的那样影响边界

> ID：11319893
> 
> 赞同：0
> 
> 时间：2012-07-03T22:08:45.303
> 
> 标签：css

在为表格设置样式时，我遇到了一个问题，使用 nth-child 选择器，我似乎无法将 TD 设置为边框：无。其他边框样式按预期工作，但无论我做什么，border:none 都会显示继承的边框。

JSfiddle 在这里：http: [//jsfiddle.net/7NUtK/1/](http://jsfiddle.net/7NUtK/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T22:38:21.643

也许这就是你想要的：http: [//jsfiddle.net/thNJb/](http://jsfiddle.net/thNJb/)

我改变了一些选择器。在我看来，你试图让每个时间列都有一个灰色和白色的部分（子列）。

`.schedule col:nth-child(even)`我能想到选择器似乎没有任何效果的两个可能原因是： 1\. 左边框应用于 td，而不是 col，因此要将其设置为 none，您可能需要再次使用 td 进行选择. 2\. 两条规则似乎具有相同的特异性。通常最好使覆盖选择器比它们覆盖的选择器更具体。

但是，不要将border-left应用于所有td，然后尝试在某些cols上将border-left设置为none，您应该只将border-left应用于您实际想要赋予它的tds。（这就是我在分支 jsfiddle 中所做的。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T22:33:10.913

不知道我是否解决了你的问题，但是怎么样

```
.schedule td:nth-child(even){
    border-left: none;
} 
```

? 您不会通过将 some 设置为 cols 来覆盖 td 样式。

# java - SwingWorker 代码问题

> ID：11319894
> 
> 赞同：1
> 
> 时间：2012-07-03T22:08:46.590
> 
> 标签：java, swing, swingworker

我是 Swing 的新手。我已经实现了 SwingWorker 类，但不知何故它没有显示列表。请看下面的代码让我知道为什么它不在“System.out.println”中打印行

下面是 SwingWorker 代码。我也有执行方法的逻辑。当我调试我的代码时，它会进入“RoutingList rlist = new RoutingList();” 线。但是在那一行之后，它把我带到了“FutureTask.java”和它的方法“void innerRun()”，它抛出了一些异常“NoClassDefFound”，它忽略了我的其余代码。

```
private class RoutingDataLoader extends javax.swing.SwingWorker<List<RoutingBean>, RoutingBean> {
    private final RoutingTableModel routingTableModel;
    private final List<RoutingBean> routings = new ArrayList<RoutingBean>();
    private JLabel credits;

    private RoutingDataLoader(RoutingTableModel tableModel) {
        this.routingTableModel = tableModel;
    }

    @Override
    public List<RoutingBean> doInBackground() {

        RoutingList rlist = new RoutingList();
        List<RoutingBean> list = rlist.getRoutingList();

        System.out.println("Routing Size: " + list.size());

        for (int i = 0; i < list.size(); i++) {
            RoutingBean bean = list.get(i);
            routings.add(bean);
            if (routings.size() % 3 == 0) {
                try { // slow it down so we can see progress :-)
                    Thread.sleep(1);
                } catch (Exception ex) {
                }
            }
            publish(bean);
            setProgress(100 * (i+1) / list.size());

        }
        return routings;
    }

    //@Override
    protected void process(List<RoutingBean> moreRoutings) {
        if (credits == null) {
            showCredits();
        }
        routingTableModel.add(moreRoutings);
    }

    // For older Java 6 on OS X
    protected void process(RoutingBean... moreRoutings) {
        for (RoutingBean routing : moreRoutings) {
            routingTableModel.add(routing);
        }
    }

    private void showCredits() {
        credits = new JLabel(getString("DataSheetTable.credits",
                "<html><p align=\"center\">Academy Award data<br>courtesy of Howard Katz</p></html>"));
        credits.setFont(UIManager.getFont("Table.font").deriveFont(24f));
        credits.setHorizontalAlignment(JLabel.CENTER);
        credits.setBorder(new CompoundBorder(new TitledBorder(""),
                new EmptyBorder(20, 20, 20, 20)));
        dataPanel.showMessageLayer(credits, .75f);
    }

    @Override
    protected void done() {
        setProgress(100);
        dataPanel.hideMessageLayer();
    }
} 
```

这是 RoutingList 类

```
public class RoutingList {

private List<RoutingBean> routingList;

public RoutingList(List<RoutingBean> routingList) {
    this.routingList = routingList;
}

public RoutingList() {
    if (this.routingList == null) {
        this.routingList = new ArrayList<RoutingBean>(0);
    }
    retrieveList();
}

public List<RoutingBean> getRoutingList() {
    return routingList;
}

public void setRoutingList(List<RoutingBean> routingList) {
    this.routingList = routingList;
}

public void retrieveList() {

  DecimalFormat myFormatter = new DecimalFormat("0000");

    for (int i = 0; i < 100; i++) {
        RoutingBean bean = new RoutingBean();

        String number  = myFormatter.format(i);

        OrganizationBean homeOrg = new OrganizationBean();
        homeOrg.setOrganization_identifier(GetUniqueIdentifier.getUniqueIdentifier());
        homeOrg.setOrganization_name("HomeOrg_" + number);
        bean.setHome_organization_bean(homeOrg);

        DivisionBean homeDiv = new DivisionBean();
        homeDiv.setDivision_identifier(GetUniqueIdentifier.getUniqueIdentifier());
        homeDiv.setDivision_name("HomeDiv_" + number);
        bean.setHome_division_bean(homeDiv);

        OrganizationBean partOrg = new OrganizationBean();
        partOrg.setOrganization_identifier(GetUniqueIdentifier.getUniqueIdentifier());
        partOrg.setOrganization_name("PartOrg_" + number);
        bean.setPartner_organization_bean(partOrg);

        DivisionBean partDiv = new DivisionBean();
        partDiv.setDivision_identifier(GetUniqueIdentifier.getUniqueIdentifier());
        partDiv.setDivision_name("PartDiv_" + number);
        bean.setPartner_division_bean(partDiv);

        TransactionSetBean transBean = new TransactionSetBean();
        transBean.setTransactionSet_identifier(GetUniqueIdentifier.getUniqueIdentifier());
        transBean.setTransactionSet_name("TransSet_" + number);
        bean.setTransactionSet_bean(transBean);

        DocumentStandardBean docStdBean = new DocumentStandardBean();
        docStdBean.setDocumentStandard_identifier(GetUniqueIdentifier.getUniqueIdentifier());
        docStdBean.setDocumentStandard_name("DocStd_" + number);
        bean.setDocumentStandard_bean(docStdBean);

        bean.setMap_name("MAP_" + number);
        bean.setCommunication_identifier("Communication_" + number);
        bean.setActive_flag("Active");
        bean.setMode("Deferred");

        this.routingList.add(bean);

    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T02:17:22.193

如果`println()`in`doInBackground()`没有打印，请验证您是否实例化了 worker 并调用了它的`execute()`方法，如下所述。您的工作人员中可能不应该有 GUI 组件。您可以在封闭范围内引用您的标签，或利用`setProgress()`. 示例可在[API](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html)和[此处找到](https://stackoverflow.com/a/4637725/230513)。

```
RoutingDataLoader task = new RoutingDataLoader(tableModel);
task.addPropertyChangeListener(new PropertyChangeListener() {

    @Override
    public void propertyChange(PropertyChangeEvent e) {
        // update progress 
    }
});
task.execute(); 
```

# php - 如何增加一天使用 php strftime

> ID：11319896
> 
> 赞同：2
> 
> 时间：2012-07-03T22:08:54.187
> 
> 标签：php, datetime, time

如果我正在格式化这样的日期并想添加一天，有没有办法使用 strftime 来做到这一点？

```
_%Y%m%d 
```

所以我可以这样做：

```
20120704 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T22:19:06.440

我认为您正在寻找[strtotime()](http://us.php.net/strtotime)。像这样的东西：

```
$date = date('Ymd', strtotime('+1 day')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T22:11:24.163

```
$date = strtotime(date("Y-m-d", strtotime($date)) . " +1 day"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T22:21:54.060

[将DateTime](http://www.php.net/manual/en/book.datetime.php)类用于日期可能会更好。

```
$date = new DateTime('2012-07-03');
$date->add(new DateInterval('P1D'));
echo $date->format('Ymd') . "\n"; // Will echo 20120704 
```

# java - 我如何知道某个特定函数的 Java 类是否存在？

> ID：11319900
> 
> 赞同：2
> 
> 时间：2012-07-03T22:09:28.287
> 
> 标签：java, api

我是一名新的编程学生，我第一次介绍 Java 大学课程。Java 中存在某些预制函数，例如`Math.pow(x, y);`or`System.out.println();`但我如何知道其他可用的函数？你有什么方法可以在我不知道的 API 文档中查找这些内容吗？我可以整天浏览这些数据，却找不到任何接近我想要完成的东西。我什至不知道它在什么包中。我知道熟能生巧，但是在我尝试从头开始创建它之前知道是否存在某些东西会很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T22:12:17.403

很有可能，如果您认为其他人可能想要做某事，那么周围就有一个库 - 内置在 JDK 中或作为第 3 方库。

对于您所追求的任何特定功能，最快的方法就是使用 Google，您应该很快找出它是在 JDK 中还是作为库提供。如果失败了，那么这里的（非重复）问题询问是否有人知道具有 Java 的 x 功能的库也很好。

最终，正如您所说，一段时间后，您将对此类常见功能积累相当广泛的知识——这可能比您想象的要快。

# php - 使用 php jquery mysql 和 ajax 无限滚动的问题

> ID：11319902
> 
> 赞同：0
> 
> 时间：2012-07-03T22:09:37.680
> 
> 标签：php, jquery, mysql, ajax, scroll

嗨，我目前正在开发这个网站：

[http://remedia-solutions.com/clientes/0039_kiplingmexico/demo2/](http://remedia-solutions.com/clientes/0039_kiplingmexico/demo2/)

它几乎完成了，但我目前在本节中的“Coleccion”部分有些麻烦你要做的第一件事是选择特定类型的包，一旦你选择它，你只会得到 20 个包（这个包是从一个mysql db）当您到达页面底部时，它将显示另外 20 个袋子。现在这里的问题是，当我到达底部时，JS 函数会运行 5 次：/ 那么有没有一种方法它只运行一次，然后稍等片刻再运行一次？

这是我的 Jquery 代码

一旦您单击“Coleccion”，它将执行以下操作：

```
$("#coleccionmenu span").click(function() {
        $("#coleccionmenu span").removeClass('focuscoleccion')
        $(this).addClass('focuscoleccion');
        $("#contbolsas").fadeOut('fast')
        var id = this.id;

        $.ajax({
          url: "respuestabolsas.php",
          type: "POST",
          data: "id=" + id,

          complete: function() {
            //called when complete
          },

          success: function(x) {
            $("#contbolsas").css("display", "none");
            $("#contbolsas").html(x)
            $(".bolsacargada").css('opacity', '0');
            $("#contbolsas").css("display", "block");
            $(".bolsacargada").each(function(index) {
                $(this).delay(300*index).animate({opacity: 1}, 400);
            });
           hovercolores();
           if ($('#contbolsas > div:contains("Rawr")').length > 0) {
            $("#text").fadeOut()
            return false;
            }
            else{
                $("#text").fadeIn()
               cargamascoleccion(id)
            }

            },

          error: function() {
            //called when there is an error
          },
        });

}); 
```

加载后，我需要您刚刚单击的集合中的 id，因此当您向下滚动时，它仅显示这些集合而不显示其他集合：

```
function cargamascoleccion(id){

        $("#todocoleccion").scroll(function() {

            var bottom = $("#todocoleccion").scrollTop() - $(window).height();

            if( bottom > $(".bolsacargada:last").offset().top + 300 ){

                $.ajax({
                  url: "respuestabolsas2.php",
                  type: "POST",
                  data: "id=" + id + "&idultimabolsa=" + $(".bolsacargada:last").attr('id'),

                  complete: function() {
                    //called when complete
                  },

                  success: function(x) {
                    hovercolores();
                   if(x != ""){

                        $("#contbolsas").append(x)

                   }
                    else{
                        $("#text").fadeOut()
                        return false;
                    }   

                 },

                  error: function() {
                    //called when there is an error
                  },
                });
            }
            });

        } 
```

我怀疑php代码有问题我认为问题出在上面的函数上，因为当我到达最后一个包的偏移量时它运行了4次。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T22:25:37.867

看起来它多次触发 ajax 调用，因为在用户滚动时多次满足条件。您可能希望在执行 ajax 调用之前向 if 语句添加另一个条件，该调用检查它是否已经启动。类似的东西

```
var ajaxComplete = true;
$("#todocoleccion").scroll(function() {

    var bottom = $("#todocoleccion").scrollTop() - $(window).height();

    if (bottom > $(".bolsacargada:last").offset().top + 300 && ajaxComplete) {

        $.ajax({
            url: "respuestabolsas2.php",
            type: "POST",
            data: "id=" + id + "&idultimabolsa=" + $(".bolsacargada:last").attr('id'),
            beforeSend: function() {
                ajaxComplete = false
            },
            complete: function() {
                //called when complete
                ajaxComplete = true;
            },

            success: function(x) {
                hovercolores();
                if (x != "") {

                    $("#contbolsas").append(x)

                }
                else {
                    $("#text").fadeOut()
                    return false;
                }

            },

            error: function() {
                //called when there is an error
            },
        });
    }
});​ 
```

# php - 由于不活动而破坏会话后修改登录页面

> ID：11319905
> 
> 赞同：1
> 
> 时间：2012-07-03T22:09:43.757
> 
> 标签：php

有谁知道当用户因不活动而注销时我可以更改登录页面信息的实用程序或方法。目前，在几分钟不活动后，我弹出一条登录消息并将用户重定向到`logout.html`, ((这是一个 tpl) 会话和 cookie 被破坏的地方。

我目前正在使用以下内容重定向用户：

```
header("Location: " . $this->site->hosts->manager . 'login.php'); 
```

重定向后，我想在登录框下方显示一条警告消息，显示“由于不活动而超时”。

有关如何完成此请求的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T22:11:11.143

您可以使用一个标志来告诉页面用户退出的原因..

```
header("Location: " . $this->site->hosts->manager . 'login.php?reason=timedout');

if (isset($_GET['reason']) && $_GET['reason']=="timedout") { echo 'Your session timed out'; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T22:18:40.277

修改您的重定向代码以将参数附加到 URL 的末尾：

```
header("Location: " . $this->site->hosts->manager . 'login.php?e=0'); 
```

`login.php`然后，您将通过检查参数是否存在来在您的页面上引用此参数。如果存在，则通知用户他们由于不活动而被注销。

```
<?php

$error = (isset($_GET['e']) ? $_GET['e'] : '');
$reasons = array(
    '0' => 'Logged out due to inactivity.',
    '1' => 'Invalid Username/Password.'
    );

if(!empty($error) && $error < count($reasons)){
    echo $reasons[$error];
}
?> 
```

上述解决方案使用数组来存储消息，因为您可以检查其他通知，例如“无效的用户名/密码”。此外，它还会检查以确保指定的值在数组的范围内。

# redis - Dotcloud：如何在启动时加载redis备份文件

> ID：11319906
> 
> 赞同：5
> 
> 时间：2012-07-03T22:09:43.977
> 
> 标签：redis, dotcloud

我找不到让 redis 在启动时在 dotcloud 上加载我自己的 dump.rdb 备份文件的方法。我可以在服务器日志中看到redis正在加载一个文件，但我不知道它在哪里（而且我找不到它）

```
[144] 03 Jul 21:01:18 * DB loaded from disk: 0 seconds 
```

我试图将 dump.rdb 文件放在`/var/lib/redis`目录中，但它没有帮助

谢谢你的帮助

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-04T08:28:21.130

我发现我做错了什么：重新启​​动时，redis 进行转储，并用空转储覆盖我的转储文件并在启动时重新加载空转储。正确的流程是：

```
~$ dotcloud ssh [your service]
~$ sudo /etc/init.d/redis stop
~$ cp [your dump] /var/lib/redis/dump.rdb
~$ sudo /etc/init.d/redis start 
```

# python - 在 Python 中使用列表中的名称在循环中创建新变量

> ID：11319909
> 
> 赞同：5
> 
> 时间：2012-07-03T22:09:54.210
> 
> 标签：python, list, variables, loops

如何使用列表中的名称创建新变量？这个：

```
name = ['mike', 'john', 'steve']   
age = [20, 32, 19]  
index = 0

for e in name:
    name[index] = age[index]
    index = index+1 
```

当然行不通。我应该怎么办？

我想做这个：

```
print mike
>>> 20

print steve
>>> 19 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-03T22:13:59.840

我认为`dictionaries`更适合这个目的：

```
>>> name = ['mike', 'john', 'steve']   

>>> age = [20, 32, 19] 

>>> dic=dict(zip(name, age))

>>> dic['mike']
20
>>> dic['john']
32 
```

但是，如果您仍然想动态创建变量，您可以使用`globals()[]`：

```
>>> for x,y in zip(name, age):
    globals()[x] = y

>>> mike
20
>>> steve
19
>>> john
32 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T22:13:45.720

您*可以*使用`globals()`：

```
globals()[e] = age[index] 
```

不过，一般来说，您不想这样做。字典要方便得多。

```
people = {
    'mike': 20,
    'john': 32,
    'steve': 19
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-28T20:51:19.713

```
name = ['mike', 'john', 'steve']   
age = [20, 32, 19] 
for i in range(len(name)):
    exec("%s = %d" %(name[i], age[i]))
print(mike)
print(john)
print(steve) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-09T09:34:56.217

字典是要走的路！

```
import pandas as pd
import datetime
import pandas_datareader as dr

# Get data for this year, so far
start = datetime.datetime(2019,1,1)
end = datetime.datetime(2019,6,1)

companies = ['AA', 'AAPL', 'BA', 'IBM']
df_dict = {}
for name in companies:
    df_dict[name] = pd.DataFrame()
    df_dict[name] = dr.data.get_data_yahoo(name, start, end)

print()
print(' Apple dataframe ')
print(df_dict['AAPL'].head()) 
```

# javascript - JSON / JQUERY - ajax post，如何在成功函数中处理 XML 数据

> ID：11319916
> 
> 赞同：1
> 
> 时间：2012-07-03T22:10:50.180
> 
> 标签：javascript, jquery, ajax, json

嗨，我正在通过 JSP 发布 ajax 帖子。我以字符串格式发布 JSON 数据（使用 parseJSON 解析，然后我使用 JSON stringify 返回字符串。

这篇文章很好用。但我不知道该怎么做，基本上我将它发送到客户端网关，它将这个 jsonString 转换为 XML 以进行一些内部处理。这项内部工作将生成一个 XML 响应，需要将其发送回我的 JSP。我计划在 ajax 发布“成功”功能设施中接收这个 XML。

到目前为止，我已经能够使用 HTML 的成功功能“数据”项来完成这项工作。但是我不确定当我想要 XML 时如何做到这一点。我该怎么做呢？我如何接收 XML，以及如何托管/查找/显示 XML 以使其在成功的“数据”函数中返回？

我的另一个选择是，如果我想要接收的不是 XML，我可以接收 JSON 数据。如何托管/查找/显示 JSON 数据以使其在成功的“数据”函数中返回？

这是我的邮政编码：

```
$.ajax({   
type:       "POST",   
url:        suppliedURL,   
data:       "jsonData=" + jsonString, // I have already done a json stringify on this.
success:    function(data, textStatus, jqXHR) {   
                alert('Success : ' + data);   .. I want this to be XML
                alert('textStatus : ' + textStatus);   
                alert('jqXHR : ' + jqXHR);   
                var jsonJqXHR = JSON.stringify(jqXHR);  
                alert('jsonJqXHR : ' + jsonJqXHR);   
},   
error:function (xhr, ajaxOptions, thrownError){   
    alert('Error xhr : ' + xhr.status);   
    alert('Error thrown error: ' + thrownError);   
},  
//complete: alert('complete'),  
dataType:   "text" // xml, json, script, text, html                          
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T22:18:36.563

更改`dataType`为`xml`; 之后`data`在`success`方法中将是一个[XML 文档](http://www.w3schools.com/dom/default.asp)。

# javascript - 浏览器的“上一个”按钮位置变化？

> ID：11319918
> 
> 赞同：1
> 
> 时间：2012-07-03T22:10:54.040
> 
> 标签：javascript, jquery, html, css, url

有没有办法改变浏览器中“上一个”按钮的位置？

问题如下：

1.  用户进入页面
2.  用户点击缩略图
3.  大图像出现在弹出窗口（灯箱）和从[http://example.com/](http://example.com/)到[http://example.com/this-image-link/的](http://example.com/this-image-link/)**URL更改**
4.  我单击浏览器中的“上一个”按钮，并将**URL**从[http://example.com/this-image-link/](http://example.com/this-image-link/)更改为[http://example.com/](http://example.com/)但弹出窗口没有消失（并且页面没有刷新）。

在浏览器中单击“返回”后，如何让它返回[http://example.com/并关闭我的弹出窗口？](http://example.com/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T22:17:34.220

我建议您阅读有关操纵浏览器历史记录的内容。这些链接肯定会给你一个很好的介绍：

[历史 API](http://diveintohtml5.info/history.html)

[MDN 操纵浏览器历史](https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history/)

如上所述，如果您想克服跨浏览器限制并避开 JQuery，这个 JS 库也应该可以帮助您。

[历史.js](https://github.com/balupton/history.js)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T22:13:18.737

尝试使用 jQuery Hashchange 插件。为所有浏览器注册哈希更改事件。

[http://benalman.com/projects/jquery-hashchange-plugin/](http://benalman.com/projects/jquery-hashchange-plugin/)

# java - 如何创建可以被多个 Android 项目重用的类的 jar 文件？

> ID：11319924
> 
> 赞同：1
> 
> 时间：2012-07-03T22:11:37.423
> 
> 标签：java, android, eclipse, noclassdeffounderror

这是我到目前为止所遵循的步骤，但没有运气。我对 Java 项目非常陌生，所以我怀疑我可能遗漏了一些明显的东西。

使用 Eclipse，我创建了一个名为 TestSDK 的简单 Java 项目，在其中创建了一个名为 com.test.testsdk 的包，并在其中创建了以下类：

```
package com.test.testsdk;
public class TestClass {
    public void TestMethod() {
    }
} 
```

这编译没有错误或警告。

然后，我使用 Eclipse 和标准导出选项（导出生成的类文件和资源、压缩 JAR 的内容、生成清单文件）将其导出为 JAR 文件 (TestSDK.jar)。我尝试过密封和不密封 JAR，这没有区别。

然后，我从 Wizards 列表中的 File->New->Project 创建一个新的 Android 应用程序项目。这在 Android 模拟器和我的测试设备上编译并运行，没有警告或错误（我收到 hello world 消息）。

然后我添加对我的 TestSDK.jar 文件的引用（使用各种不同的方法，我将在稍后进行扩展），将其导入主（也是唯一的）Android 活动，并尝试实例化我的 TestClass 并在其上调用 TestMethod，像这样：

```
package com.apptest.mobilesdktestapp;

import android.app.Activity;
import android.os.Bundle;

import com.test.testsdk.TestClass;

public class MobileSDKTestAppActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        TestClass test = new TestClass();
        test.TestMethod();
    }
} 
```

这编译得很好，没有警告或错误。但是，当尝试在模拟器或设备上运行它时，我的 LogCat 窗口中出现以下错误：

```
AndroidRuntime    Uncaught handler: thread main exiting due to uncaught exception
AndroidRuntime    java.lang.NoClassDefFoundError: com.test.testsdk.TestClass 
```

在网上搜索`NoClassDefFoundError`结果会得到很多关于如何导入 JAR 文件以使类路径正确的建议。因此，我尝试了以下所有导入 JAR 文件的方法：

1.  “添加外部 JAR...”来自项目属性中 Java 构建路径的库选项卡，然后检查（或不检查，我都尝试过）订单和导出选项卡中的 JAR。还尝试将 JAR 移到 Order and Export 列表的顶部，这没有任何区别。

2.  在项目中创建一个“libs”文件夹，并在那里添加 JAR。我确认 JAR 然后也被添加到项目列表中的“Android Dependencies”中。还尝试右键单击 JAR 文件并选择构建路径->添加到构建路径，这没有任何区别。

3.  将 JAR 移动到我的 Android 应用程序项目目录并执行“添加 JAR ...”而不是步骤 1 中的外部 JAR，以及是否导出以及是否将其移动到订单列表顶部的所有排列。

我随后下载了其他 3rd 方 SDK，这些 SDK 打包为 JAR 文件并将它们包含在同一个 Android 应用程序项目中，并且使用上述 3 种方法中的任何一种都可以正常工作（我能够从这些 SDK 实例化类并使用它们没有错误），这使我相信我在我的 TestSDK 项目和/或类中遗漏了某些东西或做错了什么，这阻止了它在 Android 应用程序项目中的使用。

正如我所说，我对 Java 很陌生，所以我希望它是我忽略的一些简单的东西。任何帮助或指导将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T22:28:01.987

如果你使用的是 R17 或更高版本的 Android 工具和 Eclipse 中的 ADT，那么#2 的第一句是正确答案；您问题中列出的所有其他内容充其量是不必要的，或者最坏的情况是有害的。

我建议您创建一个干净的项目，创建测试活动，创建`libs/`文件夹，将 JAR 复制到`libs/`文件夹中，将代码写入 JAR 的 API，编译并运行。如果这行得通，那么你的原始项目仍然有你之前的努力挥之不去的东西，这让你感到悲伤。如果它失败了，那么就会发生一些相当奇怪的事情。JAR 本身可能没问题，否则会出现编译错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T13:42:54.780

我想我弄清楚了问题所在（或者至少如何解决这个问题，我仍然不是 100% 确定我做了什么）--

当我创建原始 TestSDK java 项目时，我让它在项目创建对话框 (jre7) 中以默认 JRE 为目标。

检查新 Android 应用程序项目的项目属性，Java 编译器部分将“编译器合规性级别”设置为 1.5。因此，我再次尝试重新创建我的 TestSDK 项目，但告诉它使用 J2SE-1.5 作为执行环境而不是默认的 jre7。

完成此操作后，导出 JAR 并将其导入 Android 项目的 libs 目录，我现在能够实例化 TestSDK 类并很好地使用它们，而不会出现 NoClassDefFoundError 异常。

最好的猜测是，Android 应用程序是针对旧版本的 JRE 编译的，而不是我的 TestSDK 类（我相信它的目标是 JavaSE-1.7），导致了这些问题。匹配两个版本已经解决了它。

# css - 如何使：悬停图像与 div 框一起滚动

> ID：11319925
> 
> 赞同：0
> 
> 时间：2012-07-03T22:11:48.350
> 
> 标签：css, html, hover

alite 所以我使用了这个网站的教程：[http ://www.webreference.com/programming/css_gallery/index.html](http://www.webreference.com/programming/css_gallery/index.html)

问题是，当我添加更多图像时，右侧的画廊会超出 div 的边距。为了解决这个问题，我使用了溢出：自动。现在当有更多图像时，我可以向下滚动我的 div。问题是当我将鼠标悬停在 div 的顶部时显示的图像。所以当我向下滚动太多时，图像要么从顶部被剪掉，要么根本不出现。所以它有点像在这个页面上。如果您向下滚动此页面足够远，除非您向上滚动，否则您将不会再看到此帖子。有没有我可以用来解决这个问题的 CSS 代码。基本上我想要它的位置：div 框中的固定效果与悬停的东西。那么我如何编辑教程代码来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T08:53:05.310

问题在于教程中的第 9 步

```
#container li { 
        float:left; 
 } 
```

了解浮点数的一个重要概念是**clear**属性。因为图像的空间超过了包含 div 的空间，所以图像有效地从 div 中掉了出来。有几种方法可以解决此问题。在这里阅读更多[http://css-tricks.com/all-about-floats/](http://css-tricks.com/all-about-floats/)

1.`overflow: auto;`就像你已经实现了

2.定义一个类

```
.clear {
      clear:both;
} 
```

并将 <div class="clear"> 放在容器的结束标记之前

3.使用伪选择器**:after**

```
.clearfix:after { 
   content: "."; 
   visibility: hidden; 
   display: block; 
   height: 0; 
   clear: both;
} 
```

将 <div id="container"> ... 更改为 <div id="container" class="clearfix">

就个人而言，我更喜欢方法 3，因为它使标记更清晰。请注意方法 3 的浏览器兼容性。

# vb6 - 在 VB6 中检测冲突数学运算符的函数

> ID：11319933
> 
> 赞同：3
> 
> 时间：2012-07-03T22:12:30.180
> 
> 标签：vb6, logical-operators, mathematical-expressions

我开发了一个程序，该程序根据州标准使用不同类型的承保范围生成保险报价。现在我想添加指定“规则”的功能。例如，我们可能有 3 种覆盖类型（我们将它们称为 UM、BI 和 PD）。好吧，有些州不允许 PD 大于 BI，而其他州不允许 UM 在没有 BI 的情况下存在。因此，我添加了用户创建这些规则的功能，以便在生成报价时遵循规则，因此在程序生成报价时不会违反州法规。

**问题**

我不希望用户能够选择冲突的规则。用户可以选择任何 VB 数学运算符（>、<、>=、<=、=、<>）并在任一侧设置覆盖范围。他们可以多次执行此操作（但一次只能执行一次），因此他们最终可能会得到如下规则列表：

*   A > B
*   B > C
*   C > A

如您所见，最后一条规则与之前设置的规则冲突。我对此的解决方案是每次用户单击“将规则添加到列表”时验证列表。

假设第三个列表项尚未在列表中，但用户已单击“添加规则”将其放入列表中。验证过程首先检查两个传入变量是否已在同一行上使用。如果没有，它只会在已创建的列表中搜索左侧的传入变量（在本例中为“C”）。如果找到它，则将 tmp1 设置为匹配对面的变量 (tmp1 = 'B')。然后它对右侧的传入变量（在本例中为“A”）执行相同的操作。然后 tmp2 设置为等于 A 对面的变量 (tmp2 = 'B')。如果 tmp1 和 tmp2 相等，则无论使用何种运算符，传入的规则要么是冲突的，要么是不相关的。我很确定这是给定 3 个变量的可靠逻辑。然而，我发现添加任何其他变量都可以轻松绕过我的验证。在任何给定状态下可能有超过 10 种覆盖类型，因此能够验证的不仅仅是 3 种是很重要的。

给定任意数量的变量，是否有任何统一的方法来进行声音验证？任何想法或想法都会受到赞赏。我希望我的解释是有道理的。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:09:26.320

一般来说，这是一个相当困难的问题。您实际上想知道的是，一组命题方程（显然）是否为真。为此，您需要相当于“知道”算术的约束求解器。在 VB6 中不太可能找到它，但您可能能够将其作为子进程调用。

*如果规则是仅*在不等式上的命题方程（AA“，请仅以一种方式编写它们）。其次，尝试解决重言式的命题（参见[Wang 的算法](http://faculty.hampshire.edu/lspector/courses/Logic/Logic.html)，您可能会在 VB6 中笨拙地实现）。

如果命题不是重言式，那么现在您需要将不等式链（例如，A > B > C）构建为图形并查找循环。这失败的地方是当你的命题有析取时，例如，("A>B or B>Q"); 您必须为每种析取组合生成一个不等式链，并丢弃不一致的析取项。如果您将它们全部丢弃，则该集合是不一致的。注意像“A和B”这样的表达；根据 DeMorgans 定理，它们等价于“非 A 或非 B”，例如，“A>B and B>Q”等同于“A<=B or B<=Q”。您可能希望将条件简化为析取范式以避免感到惊讶。

显然有这种不平等的决定程序。它们可能很难实施。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T22:26:43.743

我最好的选择是某种层次的规则树。当用户添加第一条规则（比如 A > B）时，应用程序可以创建这样的数据结构（lowerValues 是一个 Map，其键指向一个值列表）：

```
lowerValues['A'] = ['B'] 
```

现在，当用户添加下一条规则（B > C）时，应用程序可以检查 B 是否已经在任何 lowerValues 列表中（在本例中为 A）。如果发生这种情况，C 被添加到 lowerValues['A']，并且还创建了 lowerValues['B']：

```
lowerValues['A'] = ['B', 'C']
lowerValues['B'] = ['C'] 
```

最后，当用户提供最后一条规则 (C > A) 时，应用程序检查 C 是否在任何 lowerValues 列表中。由于它在 B 和 A 中，因此该规则无效。

希望有帮助。我不记得VB中是否有某种映射。我认为您应该尝试 Dictionary 对象。

为了实现这个想法，所有操作都必须在内部转换为简单类型。因此，例如：

```
A > B 
```

可以翻译为

```
B <= A 
```

祝你好运

# c# - C# 在边缘内绘制图像

> ID：11319937
> 
> 赞同：0
> 
> 时间：2012-07-03T22:12:50.590
> 
> 标签：c#, matlab, paint, edge-detection

我正在开发一个帮助用户有效绘画的应用程序。我有一个 C# 代码，它运行一个 matlab 脚本并获取边缘检测到的参考图像的黑白图像。现在，我开发了允许用户在图像上绘画的代码。我的任务是引导用户在此图像上绘画。本质上，当用户在绘画时，我的任务是查看在检测到的黑白边缘图像上的绘画不会越过边缘。我应该能够检测到当笔画越过边缘时，它应该在该边缘被切断。

我想知道如何存储边缘的信息并检查用户是否达到了边缘。如果有人可以提供一些关于相同的指导方针，那将非常有帮助。

谢谢

已编辑：我上传了一张参考图像及其边缘检测图像。绘画是在边缘检测到的图像上完成的。

![在此处输入图像描述](../Images/5bf0cf43046c58bbacb7dd02e526929f.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T23:11:18.333

看起来您的边缘检测器有问题，因为它为每个边缘生成了一对线。

你的目标`check if the user has hit an edge`意味着你需要一个绝对的决定——边缘或没有边缘。但是像 Sobel 这样的边缘检测算子会在 [0, 255] 范围内为每个像素提供一个“边缘”值。所以你需要更多的处理来做出这个绝对的决定。

简单地对 Sobel 输出进行阈值处理很容易产生噪声。例如，如果在锐利的边缘前面有一个小的失焦物体，它可能会使该点的边缘非常弱。

查看 Canny 边缘检测器。它的滞后步骤有助于连接具有弱点的边缘。输出是二值图像 - 边缘或无边缘。

一旦你有了一个边缘图像，你可以填充背景，将图像分成一组不连贯的前景元素。然后使用[区域标注算法](http://en.wikipedia.org/wiki/Connected-component_labeling)给每个前景元素一个唯一的标签。当用户开始绘画时，记录他们在哪个区域内，然后将绘画限制在该区域。

这个过程高度依赖于边缘检测图像的质量。如果 Canny 检测器无法用边缘完全包围一个区域，它将会非常失败。

# c++ - Python 和 C++ 之间的管道不会关闭

> ID：11319939
> 
> 赞同：3
> 
> 时间：2012-07-03T22:13:07.940
> 
> 标签：c++, python, pipe

我正在使用子进程在 python 中生成一个进程，并希望使用管道从程序中读取输出。即使明确告诉它关闭，C++ 程序似乎也没有关闭管道。

```
#include <cstdlib>
#include <ext/stdio_filebuf.h>
#include <iostream>

int main(int argc, char **argv) {
  int fd = atoi(argv[1]);
  __gnu_cxx::stdio_filebuf<char> buffer(fd, std::ios::out);
  std::ostream stream(&buffer);
  stream << "Hello World" << std::endl;
  buffer.close();
  return 0;
} 
```

我用这个 python 片段调用这个小程序：

```
import os                                                                                         
import subprocess                                                                                 

read, write = os.pipe()                                                                           
proc = subprocess.Popen(["./dummy", str(write)])                                                  
data = os.fdopen(read, "r").read()                                                                
print data 
```

read() 方法不会返回，因为 fd 没有关闭。在python中打开和关闭write fd解决了这个问题。但这对我来说似乎是一个黑客行为。有没有办法在我的 C++ 进程中关闭 fd？

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T22:35:20.263

在 Linux（实际上是所有 POSIX 操作系统）上生成子进程通常是通过`fork`和完成的`exec`。之后`fork`，两个进程都打开了文件。C++ 进程将其关闭，但文件保持打开状态，直到父进程也关闭 fd。这对于使用 的代码来说是正常的`fork`，并且通常由`fork`. 阅读`man`页面`pipe`。我猜python无法知道哪些文件正在传输给子进程，因此不知道在父进程和子进程中要关闭什么。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T22:29:39.073

~~POSIX 文件描述符是进程本地的。Python 工具中的文件描述符`write`在 C++ 进程中无效。~~

也许最简单的方法是让 C++ 进程将其输出写入`stdout`(like `cout <<`)，然后 Python 调用`Popen`using`stdout=PIPE`和 read `proc.stdout`(或 use`proc.communicate()`而不是 using `fdopen`。这在 Windows 中也应该可以工作。

如需将文件描述符作为命令行参数传递，请参阅[Ben Voigt 的回答](https://stackoverflow.com/a/11320161/946850)。

# ruby-on-rails - ruby on rails：需要一个函数来计算时间并以多语言显示

> ID：11319940
> 
> 赞同：1
> 
> 时间：2012-07-03T22:13:09.323
> 
> 标签：ruby-on-rails, function, time

我需要一个自定义函数来计算从未来某个时间点给出的时间 X

它应该从 1 小时倒计时到零

*   1小时
*   59 分钟
*   59 分钟
*   ..
*   10 分钟
*   9 分钟
*   ..
*   1分钟
*   59 秒
*   58 秒
*   57 秒
*   ..
*   1秒

我目前正在使用

`= clean_text distance_of_time_in_words(Time.now, real_time, true)`

使用 clean_text 函数：

```
def clean_text(string)
bad_words = ["less than", "about"]
change_words = ["hours", "minutes"]

bad_words.each do |bad|
  string.gsub!(bad + " ", '')
end

string = string.gsub("hours", "hrs")
string = string.gsub("minutes", "min")
string = string.gsub("minute", "min")
string = string.gsub("half a min", "30 sec")
string = string.gsub("seconds", "sec")

return string 
```

结尾

但这还不够，因为我将“分钟”重写为“分钟”等。为时间编写这样一个自定义函数是一个好的开始？我想这会很复杂，但想知道是否有任何 Rails 内部函数可以使用？

我需要

*   上面列出的倒计时
*   它必须与 i18n 兼容，所以我可以做 1 小时 / 1 小时等

任何人都有一个想法，或者它会是一个真正需要的自定义功能吗？

# solr - Nutch、Hadoop、Solr、MapReduce 和 Mahout 的信息

> ID：11319941
> 
> 赞同：0
> 
> 时间：2012-07-03T22:13:09.527
> 
> 标签：solr, hadoop, mapreduce, nutch, mahout

PS：如果我有任何错误，请纠正我

我正在用 Nutch 和 Solr 构建一个搜索引擎。
我知道通过使用 Solr，我可以提高 Searching 的效率——让 Nutch 独自完成**整个**网络的爬取。
我还知道 Hadoop 用于通过形成集群和 MapReduce 来处理 PB 级的数据。

现在，我想知道的是
1) 因为，我将只在一台机器上运行这些开源软件，即我在本地主机上的笔记本电脑......在我的情况下，Hadoop 在形成集群时有什么好处？如何仅在一台机器上形成集群？

2）在我的情况下，MapReduce 的重要性是什么？

3) MAHOUT、CASSANDRA 和 HBASE 如何影响我的引擎？？？

非常感谢这方面的任何帮助。如果我问了一个菜鸟问题，请向我道歉！
谢谢
问候

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T22:38:37.927

1）因为，我将只在一台机器上运行这些开源软件，即我在本地主机上的笔记本电脑......在我的情况下，Hadoop 在形成集群时有什么好处？

> 创建 Hadoop 是为了处理大规模数据。Hadoop 是一个分布式应用程序。它不会在单台机器上为您带来好处。

如何仅在一台机器上形成集群？

> 以伪集群模式安装 Hadoop

在我的情况下，MapReduce 的重要性是什么？

> 同样，如果您想处理由爬虫抓取的 1000 GB 规模的页面。Map-Reduce 在处理如此大的数据时很有用

MAHOUT、CASSANDRA 和 HBASE 将如何影响我的引擎？？？

> 它们是针对不同需求的不同工具。
> 
> Mahout 是一种机器学习算法，适用于在 Hadoop 或本地文件上作为 map-reduce 任务运行。你想学习像谷歌翻译这样的语言，你可以使用它。
> 
> HBase 是一个 no-sql 数据库，它通过 ad hoc 分析提供更实时的数据处理，其中 map-reduce 更有用。

我建议你回到你的问题陈述，使用尽可能少的工具进行设计，当你点击笔记时，你会明白这些工具中的一些什么时候有用。

# joomla - 如何向与您的组件关联的菜单项添加选项。

> ID：11319943
> 
> 赞同：0
> 
> 时间：2012-07-03T22:13:11.827
> 
> 标签：joomla, joomla-extensions, joomla2.5

我已经在 J​​oomla 2.5 中创建了一个组件，我已经成功安装了它，现在我需要添加一些将在菜单视图中配置的选项。所以当用户向一个菜单添加一个新的菜单项并且菜单类型是我的组件时，他也可以在菜单项视图中选择一些参数。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T23:07:15.883

它位于为 Joomla 2.5 开发 MVC 组件的文档的第一页：

[http://docs.joomla.org/Developing_a_Model-View-Controller_%28MVC%29_Component_for_Joomla!2.5_-_Part_05](http://docs.joomla.org/Developing_a_Model-View-Controller_%28MVC%29_Component_for_Joomla!2.5_-_Part_05)

要从组件中访问这些参数，请查看此页面上的“访问参数 - 前端”：

[http://docs.joomla.org/Component_parameters](http://docs.joomla.org/Component_parameters)

# ruby-on-rails - selenium / capybara - 无法加载 Firefox 配置文件

> ID：11319945
> 
> 赞同：6
> 
> 时间：2012-07-03T22:13:20.913
> 
> 标签：ruby-on-rails, selenium, capybara

当我使用 selenium 运行测试时，浏览器反复弹出，指出找不到 firefox 配置文件。我准备了一个与 selenium 一起使用的 Firefox 配置文件我只是不确定如何告诉 selenium 该配置文件的位置。

如何告诉 Selenium 使用哪个 Firefox 配置文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T19:22:55.723

我遇到了同样的错误。`save_and_open_page`对我来说，结果是在我的测试中调用导致问题。我删除了这些，Firefox 配置文件错误停止了。

我还没有任何需要仅针对水豚/硒的特殊 Firefox 配置文件，但是，为了更彻底地回答您的问题，在尝试解决此问题时，我遇到了以下两种方法来指定 Firefox 的配置文件。

**注意：**这些都没有真正解决我的配置文件错误问题，但我还是把它们包括在这里，因为你问了。

**方法 1：（** 要求项目中的每个开发者在 Firefox 中设置特殊配置文件。）

将以下内容添加到您的 test_helper.rb

```
Capybara.register_driver :my_firefox_driver do |app|
  Capybara::Selenium::Driver.new(app, :browser => :firefox, :profile => 'name_of_existing_profile')
end 
```

**方法 2：（** 不要求项目中的每个开发人员在 Firefox 中设置特殊配置文件。）

将以下内容添加到您的测试 helper.rb

```
require 'selenium-webdriver'

...

  Capybara.register_driver :my_firefox_driver do |app|
    profile = Selenium::WebDriver::Firefox::Profile.new
    Capybara::Selenium::Driver.new(app, :browser => :firefox, :profile => profile)
  end 
```

然后，无论您选择上述哪种方法，都将默认驱动程序设置为新驱动程序，或者通过 `Capybara.current_driver = :my_firefox_driver`在测试开始处放置并确保您的 test_helper.rb 包含一个拆卸任务来选择性地使用新驱动程序，`Capybara.use_default_driver`如果您按照设置说明进行操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-30T12:10:45.723

在 Ruby 中执行此操作需要进行大量调查，但我得到了它的工作。

首先，使用 -p 标志启动 Firefox 以选择配置文件。创建一个新的配置文件并将其存储在项目中的某个位置。在我的情况下，在“firefox_profile”目录中。之后，您需要提示 Selenium 在哪里可以找到此配置文件，为此您可以修改该`layout_on_disk`方法：

```
module Selenium
  module WebDriver
    module Firefox
      class Profile
        def layout_on_disk
          firefox_profile = File.expand_path(File.join(File.dirname(__FILE__),'firefox_profile'))
          profile_dir = create_tmp_copy(firefox_profile)
          FileReaper << profile_dir

          install_extensions(profile_dir)
          delete_lock_files(profile_dir)
          delete_extensions_cache(profile_dir)
          update_user_prefs_in(profile_dir)

          puts "Using temporary Firefox profile in: #{profile_dir} from #{firefox_profile}"
          profile_dir
        end
      end
    end
  end
end 
```

[**要点在这里**](https://gist.github.com/kurtsson/380621b6018b271a034c)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-23T18:11:31.237

我在 Firefox 更新后遇到了这个错误。

我手动打开 Firefox，让它应用更新，然后测试工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-09T16:47:08.083

I also hit this problem and it turned out to be unrelated to the Firefox profile. In my case, it was a classpath incompatibility between the version of Ghostdriver I was using for PhantomJS and the version of Selenium I was using for the FirefoxDriver (I was trying to setup my code to allow for both). Removing the Ghostdriver dependency and commenting out the PhantomJS code made this profile error go away. Really, if I had read the error messages it was giving me more closely, I would have seen that the root cause of the profile error was a missing method due to the class incompatibilities. The specific error was something like:

NoSuchMethodError: org.openqa.selenium.os.CommandLine.waitFor(J)V

# php - 为什么这个 facebook 应用程序不断刷新

> ID：11319947
> 
> 赞同：-2
> 
> 时间：2012-07-03T22:13:38.047
> 
> 标签：php

我恳请您帮助我找出我的应用程序不断刷新的代码中的原因。这不允许我导航到其他页面，我是 php 的学习者，我怀疑这可能是问题，帮助。会不会是php安排的问题？

这是 index.php 中的代码

```
 <script type="text/javascript">
$(document).ready(function() {
    $('#premium_b').click(function(e) {
        e.preventDefault();
        $('#tabs').tabs( "select" , 4 );
    });
    $('#tabs').bind('tabsselect', function(event, ui) {
        if (ui.index == 4 )
            $('#premium_b').css ('display', 'none');
        else
            $('#premium_b').css ('display', 'block');
    }); 
});
</script>
<div id="bloc_134" class="li_bloc"><ul class="menu"><li><a href="http://apps.facebook.com/mtkenya-dev/index.php?p=contact_form_homepage&amp;tab=contact_form_homepage&amp;page_id=" title="contact_form_homepage" class="fbtab">Home</a>
            </li>
            <li><a href="https://apps.facebook.com/mtkenya-dev/index.php?p=contact_form_config&amp;tab=contact_form_config&amp;page_id=" title="contact_form_config" class="fbtab">Config</a>
            </li>
            <li><a href="https://apps.facebook.com/mtkenya-dev/index.php?p=contact_form_export&amp;tab=customize_css&amp;page_id=" title="contact_form_css" class="fbtab">Customize</a>
            </li>
            <li><a href="https://apps.facebook.com/mtkenya-dev/index.php?p=contact_form_export&amp;tab=contact_form_export&amp;page_id=" title="contact_form_export" class="fbtab">Export</a>
            </li>
            <li><a href="https://apps.facebook.com/mtkenya-dev/index.php?p=contact_form_premium&amp;tab=premium&amp;page_id=" title="contact_form_premium" class="fbtab">Premium</a>
            </li>
            <li><a href="https://apps.facebook.com/mtkenya-dev/index.php?p=contact_form_stats&amp;tab=contact_form_stats&amp;page_id=" title="contact_form_stats" class="fbtab">Statistics</a>
            </li>
            <li><a href="https://apps.facebook.com/mtkenya-dev/index.php?p=contact_form_doc&amp;tab=doc&amp;page_id=" title="contact_form_doc" class="fbtab">Doc</a>
            </li>
            <li><a href="https://apps.facebook.com/mtkenya-dev/index.php?p=contact_form_about&amp;tab=contact_form_about&amp;page_id=" title="contact_form_about" class="fbtab">About</a>
            </li>
            <li><a href="https://apps.facebook.com/mtkenya-dev/index.php?p=contact_form_other_app&amp;tab=contact_form_other_app&amp;page_id=" title="contact_form_other_app" class="fbtab">Other Apps</a>
            </li>
            <li><a href="https://apps.facebook.com/mtkenya-dev/index.php?p=contact_form_faq&amp;tab=contact_form_faq&amp;page_id=" title="contact_form_faq" class="fbtab">FAQ</a>
            </li>
            </ul>
            <a href="https://apps.facebook.com/mtkenya-dev/index.php?p=contact_form_premium&amp;tab=premium&amp;page_id=" title="Upgrade to Premium to get white branding and help us improve your favourite apps! : Click her" id="premium_b">Upgrade to Premium to get white branding and help us improve your favourite apps! : Click her</a>
            <div class="clear"></div>
            </div>
                </div>
    <div id="alerts">
            </div>
    <div id="zone2" class="li_zone li_x1 li_y2">

<div id="contact_form_about"><div class="zone2"> 
            </div></div>

<div id="contact_form_config"><div class="zone2"><script type="text/javascript">
function refreshApp (url) {
    $.get(url, function(data) {
      $('*').html(data);
    });
}
$(document).ready(function() {
var options = { 
success: showResponse,
beforeSubmit: disableButton
}; 
$('#tab_info_form_0').ajaxForm(options);
});

function addToPage() {
var obj = {
  method: 'pagetab',
  redirect_uri: 'https://apps.facebook.com/mtkenya-dev/?page_id=#contact_form_config',
};

FB.ui(obj);
}
</script>
<script>top.location.href='https://www.facebook.com/dialog/oauth?client_id=461688580525581&redirect_uri=https%3A%2F%2Fapps.facebook.com%2Fmtkenya-dev%2F%3Ftab%3Dcontact_form_config&scope=email,manage_pages'</script></div>
            <div class="zone2"><script type="text/javascript">
$(document).ready(function() {
var options = { 
success: showResponse,
beforeSubmit: disableButton
}; 
$('#contact_form').ajaxForm(options);
$('#customize_css').ajaxForm(options);
});
</script>
<div id="bloc_133" class="li_bloc"><p>Page non trouv?e</p>
            </div>
            </div>
            </div>

<div id="contact_form_css"><div class="zone2"><script type="text/javascript">
function refreshApp (url) {
    $.get(url, function(data) {
      $('*').html(data);
    });
}
$(document).ready(function() {
var options = { 
success: showResponse,
beforeSubmit: disableButton
}; 
$('#tab_info_form_0').ajaxForm(options);
});

function addToPage() {
var obj = {
  method: 'pagetab',
  redirect_uri: 'https://apps.facebook.com/mtkenya-dev/?page_id=#contact_form_css',
};

FB.ui(obj);
}
</script>
<script>top.location.href='https://www.facebook.com/dialog/oauth?client_id=461688580525581&redirect_uri=https%3A%2F%2Fapps.facebook.com%2Fmtkenya-dev%2F%3Ftab%3Dcontact_form_css&scope=email,manage_pages'</script></div>

            </div>

            <div id="contact_form_doc"><div class="zone2"><script type="text/javascript">
$(function() {
    $("#bloc_223").tabs({
        ajaxOptions: {
            error: function( xhr, status, index, anchor ) {
                $( anchor.hash ).html(  "Couldn't load this tab. We'll try to fix this as soon as possible. ");
            }
        },
        cache: true
    });
});

</script>

            </div>
            </div>

<div id="contact_form_export"><div class="zone2"><script type="text/javascript">
function refreshApp (url) {
    $.get(url, function(data) {
      $('*').html(data);
    });
}
$(document).ready(function() {
var options = { 
success: showResponse,
beforeSubmit: disableButton
}; 
$('#tab_info_form_0').ajaxForm(options);
});

function addToPage() {
var obj = {
  method: 'pagetab',
  redirect_uri: 'https://apps.facebook.com/mtkenya-dev/?page_id=#contact_form_export',
};

FB.ui(obj);
}
</script>
<script>top.location.href='https://www.facebook.com/dialog/oauth?client_id=461688580525581&redirect_uri=https%3A%2F%2Fapps.facebook.com%2Fmtkenya-dev%2F%3Ftab%3Dcontact_form_export&scope=email,manage_pages'</script></div>

    <div id="footer" class="li_zone li_x1 li_y4">&nbsp;</div>
</div>

    </body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T22:23:00.350

好吧，我看到了 3 次：

```
top.location.href=.... 
```

没有任何条件且不在函数调用中。那肯定会让你的页面跳动。

# java - Java 中的 Google Now 语音

> ID：11319952
> 
> 赞同：2
> 
> 时间：2012-07-03T22:13:58.847
> 
> 标签：java, android, text-to-speech, google-now

安卓是开源的，能不能提取出操作系统的语音库？现在谷歌的声音是我听过的最自然的声音，几乎可以被误认为是人类的声音。这对我的家庭自动化系统来说是完美的。

我知道 jellybean 还没有发布，所以目前可能无法访问源代码。语音也有可能不是基于客户端的（我知道 Google Now 不是）。

# variables - 分析服务中是否存在“常量”之类的东西？

> ID：11319954
> 
> 赞同：1
> 
> 时间：2012-07-03T22:14:01.250
> 
> 标签：variables, constants, ssas

SSAS中有常数这样的东西吗？

示例（这确实发生在我所在的地方）每个人都同意将 gigs 转换为 mb 由 1000（而不是 1024）和 tb 转换为 mb 由 1000000。

你会在哪里存储像这样的数字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:45:39.023

如果它在多维数据集中，您可以创建一个计算成员来存储它吗？在多维数据集的计算脚本中定义它，里面有常量就可以了。

```
In cube calculation script:
    CREATE MEMBER CURRENTCUBE.Measures.MBtoGigs AS 1000

Query against the cube:
    SELECT Measures.MBtoGigs ON COLUMNS FROM [Cube] 
```

我要指出的一个可能的陷阱是，使用这样的常量可以改变您期望 NON EMPTY 行为在您的查询中起作用的方式 - 因为常量永远不会“空”。

话虽如此，您可以为计算度量定义自己的非空行为，因此如果遇到任何问题，请记住尝试使用任何涉及常量的计算度量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T09:12:46.227

在哪里\你需要如何使用它？

您始终可以使用具有该值（1000）的列创建一个事实表，它将成为一个度量值组，并将度量值的聚合类型设置为“lastNonempty”。

由于这个值在它自己的 MG 上，它可以很容易地用于不同 MG 上另一个度量的表达式属性

# iphone - Lining Up Bezier curves taken from SVG files

> ID：11319956
> 
> 赞同：0
> 
> 时间：2012-07-03T22:14:33.580
> 
> 标签：iphone, ios, ios5, core-graphics, uibezierpath

So I am currently working on a subclass of UIView which uses [TBXML](https://github.com/71squared/TBXML/) to parse a SVG XML files and strip the 'g' path instructions out. Then it passes these sets of instructions to [SvgToBezier](http://ponderwell.net/2011/05/converting-svg-paths-to-objective-c-paths/) - a simple parser that takes the path instructions as input and returns a UIBezierPath object. Then it draws them in the drawRect method.

The paths render fine, but the problem is they don't line up with each other the way they're supposed to (they way they show up in google chrome, adobe illustrator, etc)

I know the SVGKit library allows parsing of complex svg files, however I want to write this myself so I can expand my understanding of the concepts involved.

First I'll show you my drawRect method, followed by an example SVG file, it's expected output, and it's actual output drawn on the iPhone in a 300x300 rect.

```
- (void)drawRect:(CGRect)rect
{

//getting the XML from set property
TBXMLElement *root = self.svgRoot.rootXMLElement;

//getting the rect tag, which is the background
TBXMLElement *rectColor = [TBXML childElementNamed:@"rect" parentElement:root];

//getting the first g tag
TBXMLElement *g1 = [TBXML childElementNamed:@"g" parentElement:root];

//and it's child path tag
TBXMLElement *path1 = [TBXML childElementNamed:@"path" parentElement:g1];

//getting the sibbling g tag
TBXMLElement *g2 = g1->nextSibling;

//and it's child path tag
TBXMLElement *path2 = [TBXML childElementNamed:@"path" parentElement:g2];

//create a context reference
CGContextRef ctx = UIGraphicsGetCurrentContext();

//flip the context so the origin points jive
CGContextTranslateCTM(ctx, 0, rect.size.height);
CGContextScaleCTM(ctx, 1.0, -1.0);

//get fill color for first path
const char *str1 = [[TBXML valueOfAttributeNamed:@"fill" forElement:g1] cStringUsingEncoding:NSASCIIStringEncoding];
long x1 = strtol(str1+1, NULL, 16);

UIColor *rgb1 = UIColorFromRGB(x1);

//get fill color for second path
const char *str2 = [[TBXML valueOfAttributeNamed:@"fill" forElement:g2] cStringUsingEncoding:NSASCIIStringEncoding];
long x2 = strtol(str2+1, NULL, 16);

UIColor *rgb2 = UIColorFromRGB(x2);

//get fill color for rect background
const char *str3 = [[TBXML valueOfAttributeNamed:@"fill" forElement:rectColor] cStringUsingEncoding:NSASCIIStringEncoding];
long x3 = strtol(str3+1, NULL, 16);

UIColor *rgb3 = UIColorFromRGB(x3);

//turn them into CGColors
CGColorRef color1 = rgb1.CGColor;
CGColorRef color2 = rgb2.CGColor;
CGColorRef color3 = rgb3.CGColor;

//draw the rect background and fill it
CGContextSetFillColorWithColor(ctx, color3);
CGContextFillRect(ctx, CGRectMake(0, 0, rect.size.width, rect.size.height));

//make a bezier path from the first path tag using SvgToBezier
SvgToBezier *bezier1 = [[SvgToBezier alloc] initFromSVGPathNodeDAttr:[TBXML valueOfAttributeNamed:@"d" forElement:path1] rect:rect];

//make second bezier path
SvgToBezier *bezier2 = [[SvgToBezier alloc] initFromSVGPathNodeDAttr:[TBXML valueOfAttributeNamed:@"d" forElement:path2] rect:rect];

//set fill color for first bezier
CGContextSetFillColorWithColor(ctx, color1);

//draw it
UIBezierPath *bezierPath1 = bezier1.bezier;

CGContextAddPath(ctx, bezierPath1.CGPath);
CGContextDrawPath(ctx, kCGPathEOFill);

//second bezier
CGContextSetFillColorWithColor(ctx, color2);

UIBezierPath *bezierPath2 = bezier2.bezier;

CGContextAddPath(ctx, bezierPath2.CGPath);
CGContextDrawPath(ctx, kCGPathEOFill);

} 
```

Here's the [Raw SVG](http://picsilk.com/svgraw.php)

Here's the [Expected Drawing Result](http://picsilk.com/svgrender.php)

And here's the [Actual iPhone Output (screenshot from iOS Simulator)](http://picsilk.com/svgiphone.png)

I've been experimenting with all kinds of calculations and CGAffineTransforms.. left all that out of the code because it will just confuse things imo.

Thanks for any and all help!

Cheers

EDIT: Including another case, just to illustrate the inconsistency (consistency?) of the problem.

[Raw](http://picsilk.com/svgraw2.php)

[Expected](http://picsilk.com/svgrender2.php)

[Actual](http://picsilk.com/svgiphone2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T02:23:06.747

Hey just wanted to let anyone who read this know, I haven't solved the issue and I don't plan on it. I'm using UIWebView instead. Safari seems to render SVGs just fine. I used an HTML wrapper to make the SVG scale to fit its viewport.

I like the UIWebView better anyway because it deems to draw faster than my method.

Cheers

# jquery - jQuery：通过 AJAX 加载时，fadeout() 不适用于绝对定位的元素

> ID：11319957
> 
> 赞同：5
> 
> 时间：2012-07-03T22:14:38.613
> 
> 标签：jquery, css, ajax

我在我正在开发的网站上使用 AJAXify 来实现页面转换，并且在使用 jQuery 时遇到了一些奇怪的行为。

我的代码：

HTML（我正在使用 jQuery 淡出背景）

```
<div id="backgrounds">
<img src="/assets/Uploads/hpbg3.jpg" alt="" class="bodybackground">
<img src="/assets/Uploads/hpbg2.jpg" alt="" class="bodybackground">
<img src="/assets/Uploads/hpbg4.jpg" alt="" class="bodybackground">
<img src="/assets/Uploads/hpbg5.jpg" alt="" class="bodybackground">
</div> 
```

jQuery

```
$('.otherClass').each(function() {
        $('#backgrounds').fadeOut(function(){
                 alert('fade');
            });
});

$('#main .container.homepageClass').each(function() {
        $('#backgrounds').fadeIn();
}); 
```

CSS

```
#backgrounds {display: none; position: absolute; left: 50%; margin-left: -714px;} 
```

当我通过 URL 加载页面而不是通过 AJAX 链接链接到它时，我的 div 正确淡出（并且我收到警报），但是，当我通过 AJAXified 导航链接到它时，淡出不会发生，但是我仍然收到警报，所以 fadeOut() 函数肯定会触发。

当我从 CSS 中删除绝对定位并通过 AJAX 链接到页面时，我的 div 会根据需要淡出（并且我会收到警报）。它似乎只是导致 div 的绝对定位问题。

The fadeIn() works correctly with the absolute positioning when linking to an effected page via AJAX or with a hard load. It is just fadeOut which is causing issues.

Any suggestions?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T23:53:18.323

我设法通过简单地向 div 添加宽度来解决这个问题。离奇

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T22:30:02.083

Try adding a duration to your fadeout function that is really large, i.e 5-10 seconds. If you still don't see the fadeout then you can focus on the css a bit more. Otherwise, you know something is stalling when using Ajaxify, and your fadeout is being triggered and completed before the rendering takes place.

Sorry, can't comment on questions yet - I know this is not an answer.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T22:41:25.303

如果您使用的是Balupton 的[AJAXify 要点](https://gist.github.com/854622)（看起来就是您所提到的），那么我会说我在通过该要点加载 Javascript 代码时遇到了问题。您能否验证您是否正在使用该脚本加载任何 Javascript？尝试在您的每个 AJAXified 页面上包含一个 Javascript，它的作用只不过是`alert("hello");`. 如果您没有看到代码，那么我敢打赌您的 Javascript 甚至都没有触发。如果是这种情况，那么试试这段代码，它对我有用：

```
$scripts.each(function(){
    var $script = $(this), scriptText = $script.text();
    scriptText = "<script>" + scriptText + "</script>";
    contentHtml += scriptText;
}); 
```

# iphone - cell.textLabel 未调整大小

> ID：11319960
> 
> 赞同：0
> 
> 时间：2012-07-03T22:14:48.683
> 
> 标签：iphone

我正在尝试为我们的应用程序创建一个设置。我不确定这里发生了什么。我有一个 UITableViewSyleGrouped 并且在表格的每个部分中，有 1 行。对于我的特定行，它显示了此人的姓名。如果你点击它，那么它会推送到一个新的 tableView，其中包含可供选择的人员列表，然后当你弹回时，标签会更新，但是当我从一个较小的名字变成一个更大的名字时，标签会被截断. 我正在尝试为我们的应用程序创建一个设置。一些字段如下所示：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSUInteger row = [indexPath row];
    if (tableView == _settingsTableView) {
        UITableViewCell *cell = nil;

        NSNumber *aSection = [_tableArray objectAtIndex:indexPath.section];

        if ([aSection integerValue] == SOUNDS)
        {
            cell = [tableView dequeueReusableCellWithIdentifier:@"SwitchCell"];
            if (cell == nil)
            {
                cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"SwitchCell"] autorelease];
            }
            cell.textLabel.text = @"Sounds";
            cell.selectionStyle = UITableViewCellSelectionStyleNone;
            UISwitch *switchView = [[UISwitch alloc] initWithFrame:CGRectZero];
            cell.accessoryView = switchView;
            [switchView setOn:[[Settings sharedInstance] playSounds] animated:NO]; // initialize value from Settings
            [switchView addTarget:self action:@selector(switchChanged:) forControlEvents:UIControlEventValueChanged];
            [switchView release];
        }
        else if ([aSection integerValue] == PERSON) {
            cell = [tableView dequeueReusableCellWithIdentifier:@"PersonCell"];
            if (cell == nil) {
                cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:@"PersonCell"] autorelease];
            }
            Person *p = [_personArray objectAtIndex:row];
            cell.textLabel.text = [NSString stringWithFormat:@"%@ %@", p.firstName, p.lastName];
                        NSLog(@"cL: %@", NSStringFromCGRect(cell.textLabel.frame));
            cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator; 
            cell.selectionStyle = UITableViewCellSelectionStyleNone;
        }
  return cell;
} 
```

我的 PERSON 部分使用户能够更改人员。didSelectRowAtIndexPath 中的代码是

```
else {
    Person *p = [_personArray objectAtIndex:row];
    NSUInteger oldRow = [_lastIndexPath row];
    if (oldRow != row) {
        dmgr.currentPerson = p;

        // Put checkmark on newly selected cell
        UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
        cell.selectionStyle = UITableViewCellSelectionStyleNone;
        cell.accessoryType = UITableViewCellAccessoryCheckmark;

        // Remove checkmark on old cell
        UITableViewCell *oldCell = [tableView cellForRowAtIndexPath:_lastIndexPath];
        oldCell.accessoryType = UITableViewCellAccessoryNone;
        [_settingsTableView deselectRowAtIndexPath:_lastIndexPath animated:YES];
        self.LastIndexPath = indexPath;

        // Update the cell 
        NSIndexPath *path = [NSIndexPath indexPathForRow:0 PERSON];
        UITableViewCell *theCell = [_settingsTableView path];

        theCell.textLabel.text = [NSString stringWithFormat:@"%@ %@", p.firstName, p.lastName];
        [theCell setNeedsDisplay];                
        NSLog(@"ceLL: %@", NSStringFromCGRect(theCell.textLabel.frame));

    }
} 
```

发生的情况是标签被截断，直到我点击标签。（例如 John D... 而不是 John Doe）。为什么标签没有更新？

我试着看框架，我不确定这是否与它有关。我的输出是：

```
cL: {{0, 0}, {0, 0}}
ceLL: {{10, 11}, {76, 21}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T00:01:57.180

UITableViewCell 的 textLabel 字段是常规的 UILabel。您可以设置此属性以使其缩小文本以适应：

```
 theCell.textLabel.adjustsFontSizeToFitWidth = YES; 
```

您还可以设置最小字体大小

```
 theCell.textLabel.minimumFontSize  = whatever 
```

看看 UILabel 上的文档，它会对你有很大帮助。

# php - Heroku上的Imagick-有可能吗？

> ID：11319961
> 
> 赞同：6
> 
> 时间：2012-07-03T22:15:06.553
> 
> 标签：php, heroku, module, imagick

我需要对 jpeg 图像执行一些操作 - Heroku 的 PHP GD 不允许这样做。我读过 Imagick 是可能的，所以我重写了代码，将其推送到 heroku 并......

> PHP 致命错误：在 [...] 中找不到类 'Imagick'

所以我做错了什么（代码在本地工作）？

```
$tlo = new Imagick();
$tlo->newImage(640, 480, new ImagickPixel('white'));
$tlo->setImageFormat('jpg'); 
```

有没有办法在heroku上使用jpg？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2016-02-26T20:05:26.487

一种更简单的方法是使用安装 ImageMagick `composer.json`，如下所述：[https ://devcenter.heroku.com/articles/php-support#using-optional-extensions](https://devcenter.heroku.com/articles/php-support#using-optional-extensions)

您只需要包含`imagick`在该`require`部分并更新作曲家：

```
{
    ...
    "require": {
         "ext-imagick": "*",
         ...
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T02:16:13.110

ImageMagick 是一个命令行实用程序和编程库，必须在系统上安装 Imagick 才能工作。

如果它不适合你，那么大概 Heroku 的 PHP web dynos 默认没有安装这个。您有两个选择：您可以找到一些复杂的方法将 ImageMagick 与您的应用程序本身打包，例如通过将已编译的二进制文件添加到您的 git 源代码树。或者，您可以修改[Heroku PHP buildpack](https://github.com/heroku/heroku-buildpack-php)，这是在部署应用程序之前设置 Web dyno 的一组规则，以安装 ImageMagick 以及 Apache 和 PHP 本身。后一种方法更有可能奏效。

修改 buildpack 后，使用命令行 Heroku 工具（--buildpack 选项）将应用程序更改为指向 buildpack 分支并重新部署。

# javascript - JQuery AJAX 尝试使用“dataType”解析 XML：“JSON”

> ID：11319964
> 
> 赞同：0
> 
> 时间：2012-07-03T22:15:24.910
> 
> 标签：javascript, jquery, ajax

正如标题所示，我有以下内容：

```
$.ajax({
  "url" : ...
, "type" : "GET"
, "dataType" : "JSON"
, "success" : function(response_data) {
    that.data = response_data;
    success(response_data);
  }
, "onerror" : function(data) {
    console.log(JSON.stringify(data));
  }
}); 
```

但是当我运行它时，我得到

```
XML Parsing Error: syntax error Location: moz-nullprincipal 
```

看着萤火虫，我看到请求是

```
Accept  application/json, text/javascript, */*; q=0.01
Accept-Encoding gzip, deflate
Accept-Language en-us,en;q=0.5
Cache-Control   max-age=0
Connection  keep-alive
Host    localhost:8888
Referer http://localhost:8888/
User-Agent  Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:13.0) Gecko/20100101       Firefox/13.0.1
X-Requested-With    XMLHttpRequest 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T22:20:36.720

首先将“JSON”更改为小写“json”。但这是 jQuery 期望从服务器返回的类型，它不一定是服务器将发送的。

您*确定*服务器正在返回 JSON 吗？值得仔细检查。您看过 Fiddler 中的响应吗？如果是 XML，那是服务器的问题，而不是脚本的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T22:57:41.690

好的，非常感谢大家试图回答这个问题。

但事实证明，像往常一样，我没有在这里。

firebug 中显示的 XML 解析错误实际上并不是代码错误，firebug 尝试猜测它是 XML 并对其进行解析失败。

我的问题在程序的其他地方，它已经解决了。

大写与小写“JSON”没有区别。

最大限度

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-30T19:16:58.433

真正的问题是您的服务器没有设置“内容类型”标头。将其设置为“应用程序/json”。

例如在 node.js 中：

```
res.setHeader('Content-type', 'application/json'); 
```

# mysql - SQL Query :: Count 内的参数？

> ID：11319967
> 
> 赞同：3
> 
> 时间：2012-07-03T22:15:33.283
> 
> 标签：mysql, sql

假设我有一个包含列的电影租借人表：

*   用户身份
*   电影ID
*   Rent_Start_date
*   Rent_Due_Date

我正在尝试实现如下所示的输出表：

```
[UserID, Count of Movies Due in 1 Day, Count of Movies Due in 1 Week] 
```

这可以在一个查询中完成吗？我目前有一个 php 脚本，它对 1 天内到期的电影运行 1 个查询，另一个查询在 1 周内运行电影。然后为每个用户 ID 循环这两个查询，基本上逐个插槽填充表。这有点慢。

通过尝试仅使用 1 个查询创建此输出，我尝试了以下操作：

```
 SELECT UserID, count(movieID)
    FROM MovieTable
GROUP BY movieID 
```

但这不会创建到期日期计数列。

是否可以创建一个计数列，其中包含诸如计数（//所有这些都满足 where `Rent_Due_Date - CURDATE() < ONE_WEEK`）之类的论点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T22:18:37.843

您需要按用户而不是电影对结果进行分组：

```
SELECT   UserID,
         SUM(Rent_Due_Date BETWEEN CURRENT_DATE AND CURRENT_DATE + INTERVAL 1 DAY),
         COUNT(*)
FROM     MovieTable
WHERE    Rent_Due_Date BETWEEN CURRENT_DATE AND CURRENT_DATE + INTERVAL 1 WEEK
GROUP BY UserID 
```

# java - 代码优化；测量代码段之间的时间

> ID：11319968
> 
> 赞同：0
> 
> 时间：2012-07-03T22:15:38.550
> 
> 标签：java, time-measurement

我想看看在我的 android 应用程序中执行某个方法需要多长时间。我的第一个想法是做这样的事情：

```
Date date1 = new Date();

doStuff();

Date date2 = new Date();

//compare date difference in ms 
```

但是对于初学者来说，日期对象似乎没有`.getMilliseconds()`，这就是我所追求的。有没有更简单和/或更好的方法来解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T22:17:53.817

您可能希望使用`System.nanoTime()`它来计算时间，因为它使用了可用的最高精度计时器。测试代码效率的另一件事是不要只运行一次，而是重复运行它，并以平均时间作为您的估计。从长远来看，这会产生更好的结果，因为如果其他程序也试图运行，CPU 使用率可能会飙升。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T22:20:23.283

System.currentTimeMillis() 有什么问题？

```
long before = System.currentTimeMillis();
doStuff();
long after = System.currentTimeMillis(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T22:22:40.727

您可以使用 Android 分析工具，当应用程序在模拟器中运行时，它可以在漂亮的图形视图中执行此类操作。

更多信息在这里：http: [//developer.android.com/tools/debugging/debugging-tracing.html](http://developer.android.com/tools/debugging/debugging-tracing.html)

# asp.net-mvc - MVC 3 DevExpress - 返回到控制器的模型是空的

> ID：11319969
> 
> 赞同：2
> 
> 时间：2012-07-03T22:16:02.257
> 
> 标签：asp.net-mvc, asp.net-mvc-3, devexpress

这个问题真的很简单，但我似乎无法解决它。我正在使用带有 DevExpress 组合框的 Razor 引擎。

我有这个代码：

**模型：**

```
public class TestModel
{
    public string Name { get; set; }
    public List<Role> Roles { get; set; }
}

public class Role
{
    public int RoleId { get; set; }
    public string RoleName { get; set; }
} 
```

**控制器**

```
 public ActionResult OpenTest()
    {
        TestModel tm = new TestModel( );
        tm.Roles = new List<Role>( );

        tm.Roles.Add( new Role( ) { RoleId = 1, RoleName = "Role 1" } );
        tm.Roles.Add( new Role( ) { RoleId = 2, RoleName = "Role 2" } );
        tm.Roles.Add( new Role( ) { RoleId = 3, RoleName = "Role 3" } );

        return View( tm );
    } 
```

在这里我可以成功打开视图，并且数据显示正常：

**看法**

```
@model TestDx.Models.TestModel
@{
    ViewBag.Title = "OpenTest";
}
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using ( Html.BeginForm( ) )
{
                        @Html.DevExpress( ).ComboBox(
                    settings =>
                    {
                        settings.Name = "TestDx.Models.TestModel.Roles";
                        settings.Width = 120;
                        settings.SelectedIndex = 0;
                        settings.Properties.DropDownWidth = 300;
                        settings.Properties.DropDownStyle = DevExpress.Web.ASPxEditors.DropDownStyle.DropDownList;
                        settings.Properties.EnableCallbackMode = false;
                        settings.Properties.CallbackPageSize = 30;
                        settings.Properties.IncrementalFilteringMode = DevExpress.Web.ASPxEditors.IncrementalFilteringMode.StartsWith;
                        settings.Properties.TextFormatString = "{0}";
                        settings.Properties.ValueField = "RoleID";
                        settings.Properties.ValueType = typeof( int );

                        settings.Properties.Columns.Add( "RoleID", "RoleID", 10 );
                        settings.Properties.Columns.Add( "RoleName", "RoleName", 100 );

                    } ).BindList( Model.Roles ).GetHtml( )
        <br />
            @Html.DevExpress().Button(
                    settings =>
                    {
                        settings.Name = "btnSave";
                        settings.ClientEnabled = true;
                        settings.ControlStyle.CssClass = "button";
                        settings.ClientVisible = true;

                        settings.Text = "save";
                        settings.UseSubmitBehavior = true;
                        settings.ControlStyle.Font.Bold = true;
                    }).GetHtml()
} 
```

现在这一切都非常简单，我没有用它做任何事情，只是展示它。但是当我点击保存按钮时，我回到控制器，使用这个方法：

```
[HttpPost]
        public ActionResult OpenTest( [ModelBinder( typeof( DevExpressEditorsBinder ) )]TestModel model )
        {
            if ( ModelState.IsValid )
            {
               //
            }

            return View( model );
        } 
```

...这里的模型是空的，角色属性是 0。我不明白为什么会这样？事件组合框名称与其绑定的属性相同，我确信使用推荐的 DevExpress 活页夹。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T20:03:51.653

模型未绑定。您的 RoleID 名称属性必须不同于 Roles[listIndex].RoleID。要将列表绑定到您的模型中，输入名称应为`ListPropName[listIndex].PropNameInsideList`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T19:04:31.713

您的 ComboBox 的名称列出了类型定义。因为您将**TestModel**作为类型传递，所以您的 ComboBox 的名称应该是应该保存角色 Id 的属性。所以活页夹正在尝试填充**model.TestDx.Models.TestModel.Roles**但找不到该字段，因此没有填充任何内容。如果您查看 formCollection 对象，您应该会看到带有值的 ComboBox。

更好的解决方案是在**TestModel**中指定**RoleID**，并将 ComboBox 命名为**RoleID**。在这种情况下，RoleID 应该会自动填充到您的保存中。或者，您可以在视图中指定 Bind 字段，例如：

 ****```
 @Html.DevExpress( ).ComboBox(
                    settings =>
                    {
                        settings.Name = "TestDx.Models.TestModel.Roles";
                        settings.Width = 120;
                        settings.SelectedIndex = 0;
                        settings.Properties.DropDownWidth = 300;
                        settings.Properties.DropDownStyle = DevExpress.Web.ASPxEditors.DropDownStyle.DropDownList;
                        settings.Properties.EnableCallbackMode = false;
                        settings.Properties.CallbackPageSize = 30;
                        settings.Properties.IncrementalFilteringMode = DevExpress.Web.ASPxEditors.IncrementalFilteringMode.StartsWith;
                        settings.Properties.TextFormatString = "{0}";
                        settings.Properties.ValueField = "RoleID";
                        settings.Properties.ValueType = typeof( int );

                        settings.Properties.Columns.Add( "RoleID", "RoleID", 10 );
                        settings.Properties.Columns.Add( "RoleName", "RoleName", 100 );

                    } ).BindList( Model.Roles )
                       .Bind(model.RoleID).GetHtml( ) 
```

这可能适用于您的绑定。****

# firefox-addon - 在右侧创建带有侧边栏的 Firefox 插件

> ID：11319971
> 
> 赞同：1
> 
> 时间：2012-07-03T22:16:12.923
> 
> 标签：firefox-addon, firefox-addon-sdk

我正在尝试编辑[Daniel Buchner 的侧边栏库](https://builder.addons.mozilla.org/library/1023335/revision/26/)，以便侧边栏显示在右侧。我是否按照以下方式做某事？

sidebar.browser.style.MozBoxDirection = 'reverse';

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T20:07:42.243

您的方法不起作用，因为您需要更改侧边栏父框的方向，而不是其子框。但是，这会导致不必要的后果（例如右侧出现的默认侧边栏和左侧的开发人员工具）。所以最好通过改变这一行来解决问题：

```
document.getElementById('browser').insertBefore(clone, splitter); 
```

`appendChild`您可以使用将其添加到容器的末尾，而不是在左侧插入侧边栏。但是，您还必须添加自己的拆分器 - 您可以克隆侧边栏拆分器并更改其 ID。

# javascript - 从 XML 文件加载数据并将其存储在 javascript 对象中

> ID：11319972
> 
> 赞同：0
> 
> 时间：2012-07-03T22:16:18.580
> 
> 标签：javascript, xml, oop

我正在学习 javascript，在 javascripts 对象中保存 xml 数据时遇到了一些问题。我真的不知道它是一些语法数据还是什么，但我无法让它工作：

```
<!DOCTYPE html>
<html>
<body>
<script type="text/javascript">

function book(titl,yea,autho,pric){
    this.title=titl;
    this.year=yea;
    this.author=autho;
    this.price=pric;

this.getTitle = getTit;
this.getYear = getYe;
this.getAuthor = getAuth;
this.getPrice = getPri;

}
function getTit(){ return this.title;}
function getYe(){ return this.year;}
function getAuth(){ return this.author;}
function getPri(){ return this.price;}

var i;
var booki;
var booksArray;
var title;
var year;
var author;
var price;

if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.open("GET","books.xml",false);
xmlhttp.send();
xmlDoc=xmlhttp.responseXML;
booksArray = new Array();

    for(i=0;i<30;i++){
        title=xmlDoc.getElementsByTagName("title")[i].childNodes[0].nodeValue;
        year=xmlDoc.getElementsByTagName("year")[i].childNodes[0].nodeValue;
        author=xmlDoc.getElementsByTagName("author")[i].childNodes[0].nodeValue;
        price=xmlDoc.getElementsByTagName("price")[i].childNodes[0].nodeValue;
        booki = new book(title,year,author,price);
        booksArray[i]=booki;
}

for(i=0;i<30;i++){
title= booksArray[i].getTitle;
year= booksArray[i].getYear;
author= booksArray[i].getAuthor;
price= booksArray[i].getPrice;
document.write(title);
document.write(author);
document.write(year);
document.write(price);

}

</script>
</body>
</html> 
```

好吧，我在这里要做的是将 xml 数据存储在一个对象中，然后存储在一个数组中。之后，我将使用对象的方法显示数据。我知道数据加载良好，但以防万一这里是 xml 文件：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<!-- Edited by XMLSpy® -->
<bookstore>
<book category="COOKING">
<title lang="en">lorem ipsum</title>
<author>Giada De Laurentiis</author>
<year>2005</year>
<price>30.00</price>
</book>
<book category="CHILDREN">
<title lang="en">Harry Potter</title>
<author>J K. Rowling</author>
<year>2005</year>
<price>29.99</price>
</book>
<book category="WEB">
<title lang="en">XQuery Kick Start</title>
<author>James McGovern</author>
<author>Per Bothner</author>
<author>Kurt Cagle</author>
<author>James Linn</author>
<author>Vaidyanathan Nagarajan</author>
<year>2003</year>
<price>49.99</price>
</book>
<book category="WEB">
<title lang="en">Learning XML</title>
<author>Erik T. Ray</author>
<year>2003</year>
<price>39.95</price>
</book>
</bookstore> 
```

知道我做错了什么吗？谢谢！

# ruby-on-rails - should_receive 和 should_not_receive 的 RSpec 都通过了异常

> ID：11319975
> 
> 赞同：9
> 
> 时间：2012-07-03T22:16:31.607
> 
> 标签：ruby-on-rails, rspec

我有一个非常奇怪的 rspec 案例场景。我试图测试我的函数是否正确处理异常。以下是我的代码：

在 User.rb 中：

```
def welcome_user
      begin
        send_welcome_mail(self)
      rescue Exception => exception
         ErrorMessage.add(exception, user_id: self.id)
      end
    end
end 
```

在 user_spec.rb

```
it "adds to error message if an exception is thrown" do
  mock_user = User.new
  mock_user.stub(:send_welcome_mail).and_raise(Exception)
  ErrorMessage.should_receive(:add)
  mock_user.welcome_user
end 
```

测试通过了，但是当我更改`ErrorMessage.should_receive(:add)`为时`ErrorMessage.should_not_receive(:add)`，它也通过了，有什么见解吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T15:29:59.390

由于 rspec 2.11 暴露了我的一项测试以表现出这种“异常”，我决定在 github 上提出这个问题。您可以关注[https://github.com/rspec/rspec-mocks/issues/164的讨论](https://github.com/rspec/rspec-mocks/issues/164)

**摘要**：any_instance.should_not_receive 未定义，避免

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-02-14T07:07:07.450

您可以尝试使用的方法是`.should_receive`结合[`.never`](http://www.rubydoc.info/gems/rspec-mocks/RSpec/Mocks/MessageExpectation#never-instance_method)：

```
ErrorMessage.should_receive(:add).never 
```

# javascript - 如果已经过了 x 时间，如何激活 mouseleave？

> ID：11319976
> 
> 赞同：1
> 
> 时间：2012-07-03T22:16:35.283
> 
> 标签：javascript, jquery

所以，我遇到了这种情况，但是如果用户“mouseleave(s)”超过 x 时间，比如一秒钟，我只想“做某事”。我应该如何实施？

```
$("#someElement, #someOtherElement").mouseleave(function() {
   // Do something.
}); 
```

后来我补充说：

```
 $('.popover3-test').popover({
        placement:'bottom',
        template: $('.popover2'),
        trigger: 'manual',

        }).mouseenter(function(e) {
        $(this).popover('show');

        $(".popover3-test, .popover2").each(function() {
            var t = null;

            $(this)
                .mouseleave(function() {
                    t = setTimeout(function() {
                        $('.popover2').hide();
                    }, 1000); // Or however many milliseconds
                })
                .mouseenter(function() {
                    if(t !== null)
                        clearTimeout(t);
                })
            ;
        });

}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T22:21:51.160

`setTimeout`应该做的伎俩：

```
$("#someElement, #someOtherElement").each(function() {
    var t = null;

    $(this)
        .mouseleave(function() {
            t = setTimeout(function() {
                // Do something.
            }, 1000); // Or however many milliseconds
        })
        .mouseenter(function() {
            if(t !== null) {
                clearTimeout(t);
                t = null;
            }
        })
    ;
}); 
```

编辑：如果你想让它在任何一个上工作，只需删除`.each`：

```
var t = null;

$("#someElement, #someOtherElement")
    .mouseleave(function() {
        t = setTimeout(function() {
            // Do something.
        }, 1000); // Or however many milliseconds
    })
    .mouseenter(function() {
        if(t !== null) {
            clearTimeout(t);
            t = null;
        }
    })
; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T22:22:24.543

```
$("#someElement, #someOtherElement").bind('mouseenter mouseleave', (function() {

    var timer;

    return function (e) {

       if(e.type === 'mouseleave') {
          timer = setTimeout(function () {
             //do something
          }, 1000);
       }  else {
          clearTimeout(timer);
       }

    };

}())); 
```

**编辑**- 可用于多个元素

```
$("#someElement, #someOtherElement").bind('mouseenter mouseleave', function (e) {

       var timer = $(this).data('timer');

       if(e.type === 'mouseleave') {
          timer = setTimeout(function () {
             //do something
          }, 1000);
       }  else {
          clearTimeout(timer);
       }

       $(this).data('timer', timer);    
    };

}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T22:22:08.980

这可能无法按原样工作，但会给您一些想法...

```
var elapsed = 0;
var timer = setInterval(function(){
  elapsed += 20;
  if( elapsed >= 1000 ) {
     doSomething();
     clearInterval(timer);
  }
}, 20 );
$('#some').mouseleave(timer);
$('#some').mouseenter(function(){clearInterval(timer);elapsed=0;}); 
```

# java - VM 参数：以编程方式正确检索

> ID：11319988
> 
> 赞同：2
> 
> 时间：2012-07-03T22:18:10.637
> 
> 标签：java, jvm, arguments

我正在尝试以编程方式从 Java 应用程序中检索 VM 参数。

* * *

在做了一些研究之后，我发现了一个似乎是完美的解决方案：

```
ManagementFactory.getRuntimeMXBean().getInputArguments(); 
```

但是，当参数的内容包含空格字符时，参数将被拆分，并且列表中只出现该空格字符。

使用示例 VM 参数`-Xmx1024mb -javaagent:"C:/Users/Thompson Main/Documents/app.jar"`，将返回以下列表：

```
[0] -> -Xmx1024mb
[1] -> -javaagent:C:/Users/Thompson
[2] -> Main/Documents/app.jar
[3] -> -Dfile.encoding=Cp1252 
```

第二个 VM 参数由于包含不可避免的空格而被切断，我不能假设我的所有用户在文件路径中都缺少空格字符。在我看来，这个错误使 ManagementFactory 和 RuntimeMXBean 无用。

* * *

我做了更多的研究，但我无法找到一种替代的、成功的方法来在 Java 6 中完整地检索 VM 参数（感谢 Jean-Philippe 让我知道它在 Java 7 中有效）。

从应用程序中获取 VM 参数的另一种方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T22:40:33.780

这是一个 JDK 错误，已在 JDK 7 中更正：[RuntimeMXBean.getInputArguments() 不能正确处理带空格的参数](http://bugs.sun.com/bugdatabase/view_bug.do;jsessionid=f84d44729bd8affffffffeb9b87963e2d752?bug_id=6459832)。

*好的解决方案*：升级到 Java 7。

*丑陋的解决方案*：重建参数，但它会很糟糕:(

# android - 如何使用 ksoap2 获取 Web 服务响应

> ID：11319989
> 
> 赞同：0
> 
> 时间：2012-07-03T22:18:16.000
> 
> 标签：android, web-services, android-ksoap2

我正在使用 ksoap2 在我的 android 应用程序中调用 Web 服务。它在很多场合都有效，但不知何故我无法通过这个。我使用下面提到的另一个类从我的活动中调用 Web 服务：

```
public class ServiceCall {
    public static String loginID; 
public static String password; 
public static String authStatus;
public static String firstName;
public static String lastName;

private static final String SOAP_ACTION = "http://www.tempuri.us/";
private static final String NAMESPACE = "http://www.tempuri.us/";
private static final String URL = "http://test.tempuriprojects.com/WebServices/GetWorkData.asmx";

private boolean isResultVector = true;

protected Object call(String soapAction, SoapSerializationEnvelope envelope){
    Object result = null;

    final HttpTransportSE transportSE = new HttpTransportSE(URL);

    transportSE.debug = false;

    //call and Parse Result.        
    try{
        transportSE.call(soapAction, envelope);

        if (!isResultVector){
            result = envelope.getResponse();
            Log.e("RESULT: ", result.toString());
        } else {
            result = envelope.bodyIn;
            Log.e("RESULT1: ", envelope.bodyIn.toString());
        } 
    } catch (final IOException e){
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (final Exception e){
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return result;
}

    public ArrayList<DashboardEntry> getDashboardEntries(DashboardEntryCriteria bean){
    ArrayList<DashboardEntry> dashboardEntryList = new ArrayList<DashboardEntry>();
    try{
        String methodName = "GetDashboardEntries";

        // Create the outgoing message
        final SoapObject requestObject = new SoapObject(NAMESPACE, methodName);

        bean.setLoginID("100");
        bean.setPassword("12345");

        PropertyInfo propertyInfo = new PropertyInfo();
        propertyInfo.setName("dashboardentries");
        propertyInfo.setType(bean.getClass());
        propertyInfo.setValue(bean);
        requestObject.addProperty(propertyInfo);

        //create soap envelop : soap version 1.1 
        final SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.dotNet = true;
        envelope.xsd = "http://tempuri.org/GetDashboardEntries.xsd";
        envelope.addMapping(null, "dashboardentries", new DashboardEntryCriteria().getClass());
        envelope.implicitTypes = true;

        // add the outgoing object as the request
        envelope.setOutputSoapObject(requestObject);

        // call and Parse Result.
        final Object response = this.call(SOAP_ACTION + methodName, envelope);

        SoapObject soapObj = (SoapObject)response;

        int j = 0;
        for(int i=0;  i < length; i++)
        {

            SoapObject result = (SoapObject) soapObj.getProperty(i);

            if(soapObj != null ){

            if(result.hasProperty("AuthStatus") && String.valueOf(result.getProperty("AuthStatus").toString()).equals("Y")){

                loginID = result.getProperty("LoginID").toString(); 
                System.out.println(loginID);
                password = result.getProperty("Password").toString(); 
                System.out.println(password);
                authStatus = result.getProperty("AuthStatus").toString();
                System.out.println(authStatus);

                // Irrelevant code
            }   

            }

        }
    }

    catch(Exception e){
        Log.e("Exception: ", e.toString());
    }
    return dashboardEntryList ;
} 
```

这是 DashboardEntryCriteria bean：

```
public class DashboardEntryCriteria implements KvmSerializable{

private String LoginID;
private String Password;

/**
 * @return the password
 */
public String getPassword() {
    return Password;
}

/**
 * @param password the password to set
 */
public void setPassword(String password) {
    Password = password;
}

/**
 * @return the loginID
 */
public String getLoginID() {
    return LoginID;
}

/**
 * @param loginID the loginID to set
 */
public void setLoginID(String loginID) {
    LoginID = loginID;
}

}

@Override
public Object getProperty(int arg0) {

    switch(arg0){
    case 0 : return LoginID;
    case 1 : return Password;

    }
    return null;

}

@Override
public int getPropertyCount() {
    // TODO Auto-generated method stub
    return 2;
}

@SuppressWarnings("rawtypes")
@Override
public void getPropertyInfo(int arg0, Hashtable arg1, PropertyInfo arg2) {

    switch(arg0){
    case 0 : 
        arg2.name = "LoginID";
        arg2.type = PropertyInfo.STRING_CLASS;
        arg2.namespace = "http://tempuri.org/RxGetWorkEntries.xsd";
        break;
    case 1 : 
        arg2.name = "Password";
        arg2.type = PropertyInfo.STRING_CLASS;
        arg2.namespace = "http://tempuri.org/RxGetWorkEntries.xsd";
        break;

    }

}

@Override
public void setProperty(int arg0, Object arg1) {

    switch(arg0){
    case 0 : 
        LoginID = arg1.toString();
        break;
    case 1 : 
        Password = arg1.toString();
        break;

    }

} 
```

我很肯定错误是在方法中某处的类 ServiceCall 中`getDashboardEntries()`。我注意到，当`call`调用该方法时，它会给出空响应（或“结果”对象）。我确实尝试使用具有相同参数的soapUI 调用Web 服务，它工作得很好。只是为了让您知道 Web 服务没有任何问题。那么知道还有什么可能是错误或丢失的吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T06:14:00.480

您的 SOAP_ACTION 应该是这样的。

```
AppConsts.NAMESPACE =  "http://www.tempuri.us/" 
```

usecaseString = 这应该是您的服务方法名称。
字符串soapAction = AppConsts.NAMESPACE + usecaseString;

[请参阅](https://stackoverflow.com/questions/9396805/create-soap-request-using-ksoap-androidurgent/9413683#9413683)此问题的答案以获取详细说明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T06:18:13.630

你也可以试试这个。

```
 SoapPrimitive resultSoapPrimitive;
        resultSoapPrimitive = (SoapPrimitive) envelope.getResponse();
        if (resultSoapPrimitive != null) {
            result = resultSoapPrimitive.toString(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T06:43:37.773

我会向你推荐[这个](http://seesharpgears.blogspot.com/2010/11/basic-ksoap-android-tutorial.html)教程。完成此操作后，您将能够理解完整的概念。

# android - 从广播接收器启动服务

> ID：11319990
> 
> 赞同：0
> 
> 时间：2012-07-03T22:18:34.977
> 
> 标签：android, android-intent, broadcastreceiver, intentservice

该应用程序的相关部分是`IntentService`( `DatabaseService`) 和`AppWidgetProvider`( `LotWidget`)。在`LotWidget`中，当按下按钮时，`PendingIntent`会触发 a 向自身发送广播，并在 中接收`onReceive()`。到目前为止，所有这些工作都很好。在中，我从以及各种附加`onReceive`内容中读取了动作，然后启动 this或启动 main 。启动活动工作正常，但由于某种原因我无法理解，没有开始。我知道导致意图的代码是通过使用.`Intent``IntentService``Activity``DatabaseService``DatabaseService``Log`

这是`onReceive`代码：

```
@Override
public void onReceive(Context context, Intent intent) {     
    super.onReceive(context, intent);
    if(intent.getAction().equals(RETURN_DATA_WIDGET) && initialize(context)){
        updateWidget(context);
    }
    else if(intent.getAction().equals(INTERNAL_INC)){
        Log.d("WIDG", "Incrememnt");
        Intent incr = new Intent(context, DatabaseService.class);
        incr.setAction(INCREMENT);
        incr.putExtra("incval", intent.getIntExtra("incval", 999));
        context.startService(intent);
    }
    else if(intent.getAction().equals(INTERNAL_UP)){
        Log.d("WIDG", "UPDATE");
        Intent upd = new Intent(context, DatabaseService.class);
        upd.setAction(UPDATE_COUNT);
        context.startService(intent);
    }
    else if(intent.getAction().equals(OPEN_APP)){
        Intent open = new Intent(context, TheLotActivity.class);
        open.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        context.startActivity(open);
    }
} 
```

使用相同的意图`DatabaseService`从 main开始`Activity`工作正常。我的清单将其定义`DatabaseService`为`Service`：

```
<service android:name="com.bsprague.thelot.DatabaseService" >
    </service> 
```

我知道 the`Service`没有被启动，因为 a`Log`的开头没有被显示，尽管当它从 main 发送`onHandleIntent`时它显示得很好。Android 中是否有一些我遗漏的东西使它无法从 a开始？`Intent``Activity``Service``BroadcastReceiver`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T22:24:08.337

~~您正在对 设置一个操作`Intent`，而您`<intent-filter>`没有该操作。您可能会考虑将`setAction()`呼叫替换为呼叫`putExtra()`。~~

没关系-正如您在评论中指出的那样，由于您正在指定组件，因此所有其他路由元素（例如，操作）都将被忽略。您更新评论中的错误表明您`Intent`选择了错误的组件，`LotWidget`而不是`DatabaseService`.

# ios - 我有一个这样的 NSString：“Firstname Lastname”。如何将其转换为“Firstname L.”？

> ID：11319995
> 
> 赞同：5
> 
> 时间：2012-07-03T22:18:52.587
> 
> 标签：ios

我想将其更改为名字和姓氏首字母。

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-03T22:25:01.060

```
NSString* nameStr = @"Firstname Lastname";
NSArray* firstLastStrings = [nameStr componentsSeparatedByString:@" "];
NSString* firstName = [firstLastStrings objectAtIndex:0];
NSString* lastName = [firstLastStrings objectAtIndex:1];
char lastInitialChar = [lastName characterAtIndex:0];
NSString* newNameStr = [NSString stringWithFormat:@"%@ %c.", firstName, lastInitialChar]; 
```

这可能更简洁，但我希望 OP 更清晰 :) 因此所有的临时变量和 var 名称。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T22:27:01.083

这会做到：

```
NSArray *components = [fullname componentsSeparatedByCharactersInSet:[NSCharacterSet whitespaceCharacterSet]];
NSString *firstnameAndLastnameInitial = [NSString stringWithFormat:@"%@ %@.", [components objectAtIndex:0], [[components objectAtIndex:1] substringToIndex:1]]; 
```

This assumes that fullname is an instance of NSString and contains two components separated by whitespace, so you will need to check for that as well.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T22:24:58.780

您可以使用此代码片段，首先使用 分隔字符串`componentsSeparatedByString`，然后再次加入它们，但只能获取第一个字符`Lastname`

```
NSString *str = @"Firstname Lastname";
NSArray *arr = [str componentsSeparatedByString:@" "];
NSString *newString = [NSString stringWithFormat:@"%@ %@.", [arr objectAtIndex:0], [[arr objectAtIndex:1] substringToIndex:1]]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T22:25:11.317

分别获取名称各部分的数组：

```
NSString *sourceName = ...whatever...;

NSArray *nameComponents =
    [sourceName
        componentsSeparatedByCharactersInSet:
            [NSCharacterSet whitespaceCharacterSet]]; 
```

然后，我猜：

```
NSString *compactName =
    [NSString stringWithFormat:@"%@ %@.",
        [nameComponents objectAtIndex:0],
        [[nameComponents lastObject] substringToIndex:1]]; 
```

这将跳过任何中间名，但如果只有一个名字，比如说“Jeffry”，那么它将输出“Jeffry J.”。如果您传入空字符串，那么当您尝试获取时它将引发异常，`objectAtIndex:0`因为该数组将为空。所以你应该检查一下`[nameComponents count]`。