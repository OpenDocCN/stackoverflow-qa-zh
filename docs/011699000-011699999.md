# StackOverflow 问答 11699000-11699999

# php - 以特定时间间隔从 XML 提要更新页面

> ID：11699000
> 
> 赞同：0
> 
> 时间：2012-07-28T06:55:21.677
> 
> 标签：php, xml, api

我真的很讨厌问这些模糊的问题，但我可以使用一些帮助找出实现这个想法的最佳方法。

我正在做的事情相当简单。我正在创建一个页面，该页面将尽可能准确地显示来自多个体育博彩的数据。有几个不同的站点，都有自己的 API，但数据几乎相同。其中一些对每天可以访问的次数有限制，所以我试图弄清楚如何去做。

由于 JavaScript 的整个跨域问题，我正在考虑使用 PHP 进行设置以在本地检索数据。脚本是否有可能每天在特定时间访问每个 API 4 次，在本地解析数据，然后使用 AJAX 或其他方式提供数据？

将数据存储在 MYSQL 数据库中然后查询是否有意义？我要做的似乎就像显示实时 XML 数据一样简单，我只需要找出一种不超过当天 API 调用的方法。一般来说，我对服务器端代码相当陌生，所以如果这很明显，我深表歉意。

如果有人有任何想法，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T07:02:27.747

您确实需要在本地存储数据。它可以是数据库或文件。

设置将是这样的：

*   有一个 PHP 脚本可以

    1.  获取与 API 关联的数据
    2.  将结果存储在缓存文件中
*   有一个每天运行 3 次以上脚本的 CRON 作业

*   有一个将显示缓存文件内容的前端 php 页面。

如果您的服务器过载，您可能会考虑在每次刷新 API 时将前端 php 文件缓存到静态 html 文件。

# html - Onmouseover on child 更改父级颜色

> ID：11699002
> 
> 赞同：-3
> 
> 时间：2012-07-28T06:55:49.157
> 
> 标签：html, css, html-lists, onmouseover

`head`没有背景和黑色，鼠标悬停时它的颜色将是白色和背景黑色，它工作正常但

onmouse over on`content`我想改变颜色`head`？如何？只能使用css吗？

```
 <ul id="meg">
   <li><a href="#">head</a>
    <div>
    <h2>su head</h2>
    <p><a href="#">content</a></p>
    <p><a href="#">content</a></p>
     </div>
    </li>
 <li><a href="#">head</a>
    <div>
    <h2>su head</h2>
    <p><a href="#">content</a></p>
    <p><a href="#">content</a></p>
     </div>
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T07:24:35.037

这可能有效。我知道css能够在结束标签之后影响元素而不是之前，所以这与过去的“+”相反。

```
<style type="text/css">
   #content:hover - #head { background-color: black; color: white; }
  </style>

 <ul id="meg">
   <div id="head">
   <li><a href="#">head</a>
   </div>
   <div id="content">
    <h2>su head</h2>
    <p><a href="#">content</a></p>
    <p><a href="#">content</a></p>
     </div>
    </li>
    </ul> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T07:52:37.420

你可以用 JavaScript 做到这一点。虽然我不完全清楚你想要什么，但我试了一下：

```
<!DOCTYPE html> 
<html>
<head>
<script type="text/javascript">  
function stuff(){
   var k = document.getElementsByTagName('li');
   for (var i = 0; i < k.length; i++) {
        var s = k[i];     
        s.firstChild.style.color = 'white';
        s.firstChild.style.backgroundColor= 'black';
    }
}
</script>
</head>
<body>
  <ul id="meg">
    <li>
       <a href="#">head</a>
       <div>
          <h2>su head</h2>
          <p><a href="#" onmouseover="stuff()">content</a></p>
       </div>
    </li>
  </ul>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T06:58:42.163

考虑使用 JQuery。

本[视频教程](http://www.youtube.com/watch?v=GkwbN3fTgE0&feature=player_embedded)将为您提供帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T07:01:48.043

你试过#meg li a:hover { background-color:#000;color:#FFF; }

# c# - 为什么 Marshal.SizeOf 中的 char 是 4 个字节？

> ID：11699005
> 
> 赞同：2
> 
> 时间：2012-07-28T06:56:18.233
> 
> 标签：c#, data-structures

为什么**char**需要 1 个字节，`Marshal.SizeOf`而**bool**需要 4 个字节。**char**没有比**bool更多的状态吗**

```
char c = '\x0011';
bool b = true;
Console.WriteLine("char: " + Marshal.SizeOf(c).ToString() + "\n" 
                + "bool: " + Marshal.SizeOf(b).ToString());

//char: 1
//bool: 4 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T07:29:49.627

您正在查看 Marshal 类的内容。试试这个看看编译器是怎么想的：

```
 Console.WriteLine("char: " + sizeof(char).ToString() + "\n"
                 + "bool: " + sizeof(bool).ToString()); 
```

> 字符：2
> 布尔值：1

应用于`Marshal.SizeOf()`局部变量不是预期用途。基本思想是您创建一个`struct`for interop，然后填充的概念变得相关。

# javascript - 如何在响应式设计中水平自动滚动图像

> ID：11699013
> 
> 赞同：0
> 
> 时间：2012-07-28T06:57:02.100
> 
> 标签：javascript, css, image, scroll, responsive-design

所以我有这个网站： http: [//onthemouse.com/](http://onthemouse.com/)。`<li>`我使用首页上的标签将我的投资组合图像以网格状排列。我需要它们并排对齐并自动水平滚动，可能使用 javascript 或 jquery（请不要使用其他库）。如果它也有滚动条就好了。我试过这样的事情：

```
.portfolio li {
  width: 438px !important;
  display:inline !important;
} 
```

接着

```
<ul id="thumbs" style="width:100%;list-style:none;display:block;white-space:nowrap;">
    <li class="portfolio" style="width: 438px; opacity: 1;display:inline;">
      <a href="BLAHBLAH" title="BLAHBLAH">
        <img src="BLAHBLAH" alt="" title="" >
      </a>
    </li> 
```

如果您访问页面，那基本上只是一个精简的版本，还有更多相关的标签。但即使仅此代码（所有标签都明显关闭）似乎也不起作用..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T07:36:37.190

从你`display:inline`的attr 中删除`width``style``li`

```
<ul id="thumbs" style="list-style:none;">
<li class="portfolio" style="opacity: 1;">
  <a href="BLAHBLAH" title="BLAHBLAH">
    <img src="BLAHBLAH" alt="" title="" >
  </a>
</li>

#works, #wrapper {
    overflow: visible;
}
body {
    overflow-x:auto;
}
#thumbs .portfolio {
    display:inline-block;
    width: 438px !important;
    float:none !important;
}
#thumbs {
    white-space:nowrap;
}
/* for ie 7*/
*:first-child+html #thumbs .thumb {
    display:inline;
    zoom:1;
}
/* for ie 6*/
*html #thumbs .thumb {
    display:inline;
    zoom:1;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T08:01:47.223

您可以考虑使用 Flexislider 来解决您的问题。这是一个响应式滑块。

[http://www.woothemes.com/flexslider/](http://www.woothemes.com/flexslider/)

# java - 如何创建多选组合

> ID：11699015
> 
> 赞同：0
> 
> 时间：2012-07-28T06:57:44.970
> 
> 标签：java, swing, jcombobox, renderer

我想在 Swing 中创建一个多选组合框，显示用户选择的项目，用分号或其他字符分隔。

例如：

**选择文章**<- 显示用户的选择 选择 文章
没有
文章

如果用户选择了“a”和“the”，则将显示“a; the”而不是“Select article(s)”。

我曾尝试编写这样的组合，但我的问题是“选择文章”没有被当前用户选择替换。

您只能看到类似的内容：
**Select article(s)** <- 显示用户的选择（不被“a; the”替换）
a; 没有
文章_
_

这是我的代码：

```
import java.awt.*;
import java.awt.event.*;
import java.util.*;
import java.util.List;
import javax.swing.*;
import javax.swing.plaf.basic.BasicComboBoxRenderer;

public class MultiSelectionComboBox {

    private DefaultComboBoxModel model;

    private JPanel getContent() {
        Object[] items = { "Select article(s)", "No article", "a", "the" };

        model = new DefaultComboBoxModel(items);
        JComboBox combo = new JComboBox(model);

        SelectionManager manager = new SelectionManager();
        manager.setNonSelectable(items[0]);

        Renderer renderer = new Renderer(manager);
        combo.addActionListener(manager);
        combo.setRenderer(renderer);

        JPanel panel = new JPanel();
        panel.add(combo);
        return panel;
    }

    class SelectionManager implements ActionListener {
        JComboBox combo = null;
        private List<Object> selectedItems = new ArrayList<Object>();
        private Object nonSelectable;

        public void setNonSelectable(Object val) {
            nonSelectable = val;
        }
        public void actionPerformed(ActionEvent e) {
            if (combo == null) {
                combo = (JComboBox) e.getSource();
            }
            Object item = combo.getSelectedItem();
            // Toggle the selection state for item.  
            if (selectedItems.contains(item)) {
                selectedItems.remove(item);
            } else if (!item.equals(nonSelectable)) {
                selectedItems.add(item);
            }

            combo.setSelectedIndex(0);
        }

        public List<Object> getSelectedItems() {
            return selectedItems;
        }
    }

    class Renderer extends BasicComboBoxRenderer {
        SelectionManager selectionManager;

        public Renderer(SelectionManager sm) {
            selectionManager = sm;
        }

        public Component getListCellRendererComponent(JList list, Object value, int index, boolean isSelected,
                boolean cellHasFocus) {
            setFont(list.getFont());

            if (index == 0) { // first item shows currently selected items delimited by ;
                StringBuffer firstItem = new StringBuffer();
                for (Object sel : selectionManager.getSelectedItems()) {
                    firstItem.append(sel + "; ");
                }
                if (firstItem.toString().endsWith("; ")) {
                    firstItem.deleteCharAt(firstItem.length() - 2);
                }
                setText((value == null) ? "" : firstItem.toString());
            } else {// other items
                setText((value == null) ? "" : value.toString());
            }

            return this;
        }
    }

    public static void main(String[] args) {
        JFrame f = new JFrame();
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.getContentPane().add(new MultiSelectionComboBox().getContent());
        f.setSize(300, 145);
        f.setLocation(200, 200);
        f.setVisible(true);
    }
} 
```

我知道组合不适合多选，但在我的情况下，我没有看到更好的 UI 元素，因为我想将这样的组合放在句子中。例如：“ **|a; the|**键在哪里？”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T07:24:39.053

在您的单元格渲染器中，您假设索引 0 是所选值，但事实并非如此。它实际上是-1（或者更准确地说，这是用来表示编辑器值的索引）

```
public Component getListCellRendererComponent(JList list, Object value, int index, boolean isSelected, boolean cellHasFocus) {
    setFont(list.getFont());

    if (index == -1 && selectionManager.getSelectedItems().size() > 0) {
        StringBuffer firstItem = new StringBuffer();
        for (Object sel : selectionManager.getSelectedItems()) {
            firstItem.append(sel + "; ");
        }
        if (firstItem.toString().endsWith("; ")) {
            firstItem.deleteCharAt(firstItem.length() - 2);
        }
        setText((value == null) ? "" : firstItem.toString());
    } else {// other items
        setText((value == null) ? "" : value.toString());
    }

    return this;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T10:01:22.480

The base problem with your code is that you pack *model* responsibilities (== decide about selection) into your *view* (== renderer + action code). Instead, solve them where they belong, that is the model. Below is a very simplistic implementation, just to point the direction:

```
@SuppressWarnings({ "unchecked", "rawtypes" })
public static class MyComboBoxModel extends AbstractListModel
    implements ComboBoxModel {
    public static Object NONE = "none"; 
    List values = new ArrayList();
    List selected = new ArrayList();

    public MyComboBoxModel(Object... values) {
        for (Object object : values) {
            this.values.add(object);
        }
    }

    @Override
    public int getSize() {
        return values.size();
    }

    @Override
    public Object getElementAt(int index) {
        return values.get(index);
    }
    @Override
    public void setSelectedItem(Object anItem) {
        if (anItem == null || anItem == NONE) {
            if (selected.isEmpty()) return;
            selected.clear();
        } else {
            boolean removed = selected.remove(anItem);
            if (!removed) {
                selected.add(anItem);
            }
        }
        fireContentsChanged(this, -1, -1);
    }

    @Override
    public Object getSelectedItem() {
        return selected;
    }

}

// use
MyComboBoxModel model = new MyComboBoxModel(MyComboBoxModel.NONE , "a", "the", "other");
model.setSelectedItem(null);
JComboBox box = new JComboBox(model); 
```

Even with the standard renderer we can see it working :-) A custom renderer can further fine tune the visual representation as you need it - without containing any data related logic.

# mysql - MySQL 创建表时出现错误 1005

> ID：11699016
> 
> 赞同：0
> 
> 时间：2012-07-28T06:57:47.653
> 
> 标签：mysql, mysql-error-1005

运行以下语句时：

```
CREATE  TABLE `intelischool`.`facultyclasses` (
  `id` VARCHAR(45) NOT NULL ,
  `class` VARCHAR(45) NOT NULL ,
  `subject` VARCHAR(45) NOT NULL ,
  `year` VARCHAR(45) NOT NULL ,
  `section` VARCHAR(45) NOT NULL ,
  PRIMARY KEY (`id`, `section`, `year`, `subject`, `class`) ,
  INDEX `id` (`id` ASC) ,
  CONSTRAINT `id`
    FOREIGN KEY (`id` )
    REFERENCES `intelischool`.`faculty` (`id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION) 
```

我得到错误：

```
ERROR 1005: Can't create table 'intelischool.facultyclasses' (errno: 121) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T07:05:05.463

外键定义前缺少逗号

除此以外

删除表并使用索引创建它们（而不是向已创建的表添加索引）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T21:13:37.353

[这个邮件列表线程](http://lists.mysql.com/mysql/164229)是关于同样的问题，并且在那里得出的结论是它是由重复的约束名称引起的。

你可能还有另一个

```
CONSTRAINT `id` 
```

在同一数据库的另一个表中。这些名称在每个数据库中都必须是唯一的。给它起一个名字

```
CONSTRAINT `facultyclasses_foreignkey` 
```

或者只是删除该行并让数据库自动为其生成一个名称。

# java - 从文件中读取时计算数字

> ID：11699019
> 
> 赞同：1
> 
> 时间：2012-07-28T06:58:08.700
> 
> 标签：java, file, io, try-catch

假设我有一个主要是数字的文件，还有一些字母

```
1
4
5
d o
2
8 22
6
f 
```

所以我想计算有多少个数字和字母，我只能使用 nextInt() 方法。这是我正在使用的代码，但由于某种原因，我得到了一个无限循环，在进行了一些调试（打印输入）之后，它会停在第 5 号。为什么我在这里做错了？

```
public static void mixedF() {
        int numbers = 0; 
        int words = 0;
        int num;      
        try {
            Scanner in = new Scanner(new File("myFile.txt"));
            while(in.hasNext()) {
                try {
                    num = in.nextInt();
                    System.out.println(num);
                    numbers++; 
                }
                catch (InputMismatchException e) { words++; }              

                }            

            System.out.println("numbrers: "+numbers);
            System.out.println("words: "+words);
        }
        catch (FileNotFoundException ex) { ex.getMessage(); }        
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T07:09:37.127

您需要添加`in.next();`到`catch`，否则`scanner`将无法前进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T07:33:48.317

问题：您正在使用 nextInt() 函数单独读取整数。

当 Scanner 遇到一个角色时，它会进入 catch 块。尝试在 catch 块中推进扫描仪，否则字符“d”将被一遍又一遍地读取

# java - 程序运行无异常但不显示表名

> ID：11699023
> 
> 赞同：1
> 
> 时间：2012-07-28T06:58:44.220
> 
> 标签：java, mysql, jdbc

我在 mysql 中有一些数据库，它们都包含一些带有几列的表。我从堆栈溢出答案中得到了下面的代码。答案是： [如何在 Java 中检测 SQL 表的存在？](https://stackoverflow.com/questions/927807/how-can-i-detect-a-sql-tables-existence-in-java)

代码给出了输出-

```
Driver Loaded.
Got Connection. 
```

代码-

```
import java.sql.Connection;
import java.sql.DatabaseMetaData;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.Statement;

public class Main {
  public static void main(String[] args) throws Exception {
DatabaseMetaData md = conn.getMetaData();
ResultSet rs = md.getTables(null, null, "%", null);
while (rs.next()) {
  System.out.println(rs.getString(3));
}  }

  static Connection conn;

  static Statement st;

  static {
try {
  // Step 1: Load the JDBC driver.
  System.out.println("Driver Loaded.");
  // Step 2: Establish the connection to the database.
  String url = "jdbc:mysql://localhost:3306/";

  conn = DriverManager.getConnection(url, "cowboy", "123456");
  System.out.println("Got Connection.");

  st = conn.createStatement();
} catch (Exception e) {
  System.err.println("Got an exception! ");
  e.printStackTrace();
  System.exit(0);
}
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T12:39:47.023

在您的代码中，您只

```
System.out.println("Driver Loaded."); 
```

这还不够。**您必须先加载驱动程序！**

```
 Class.forName("com.mysql.jdbc.Driver");
 System.out.println("Driver Loaded."); 
```

**我很惊讶这行得通**

```
conn = DriverManager.getConnection(url, "cowboy", "123456"); 
```

**并且你来到这行代码。**

```
System.out.println("Got Connection."); 
```

使用下面的代码，它会去，但你不会得到一个表列表

```
static {
    try {
      // Step 1: Load the JDBC driver.
      Class.forName("com.mysql.jdbc.Driver");
      System.out.println("Driver Loaded.");
      // Step 2: Establish the connection to the database.
      String url = "jdbc:mysql://localhost";

      conn = DriverManager.getConnection(url,"user","passw");
      System.out.println("Got Connection.");
      ....
      }
} 
```

**正确设置数据库名称**

```
static {
       try {
       // Step 1: Load the JDBC driver.
       Class.forName("com.mysql.jdbc.Driver");
       System.out.println("Driver Loaded.");
       // Step 2: Establish the connection to the database.
       String url = "jdbc:mysql://localhost/myDataBase";
       conn = DriverManager.getConnection(url,"user","passw");
       System.out.println("Got Connection.");
       ....
       }
} 
```

你可以看到你的 myDataBase 表的列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T09:57:01.730

This code is used to display the tables of a specific database, not all tables of all DB. You don't specify any database in your `url` String so there is nothing to display.

If you look carefully at the [link](http://www.java2s.com/Code/JavaAPI/java.sql/DatabaseMetaDatagetTablesStringcatalogStringschemaPatternStringtableNamePatternStringtypes.htm) used to answer the linked question, you can see `String url = "jdbc:hsqldb:data/tutorial";` So you have to be connected to a database first.

PS : You may have to load the driver if you use driver prior to jdbc4, use : `Class.forName("com.mysql.jdbc.Driver");` and be sure the driver is available in the classpath.

# javascript - 在页面刷新或更改后切换 div 保持原样

> ID：11699024
> 
> 赞同：1
> 
> 时间：2012-07-28T06:58:46.977
> 
> 标签：javascript, html, css

在这个例子中。如果页面发生更改或刷新，我需要打开我的 div。我已经给出了我的 HTML 和 Javascript。

这是我的代码所在的地方[http://jsfiddle.net/wasimkazi/fauNg/1/](http://jsfiddle.net/wasimkazi/fauNg/1/)

```
 $(".widget2").hide();
    $(".box2").toggle(function() {
        $(this).next(".widget2").slideDown(200);
    }, function() {
        $(this).next(".widget2").slideUp(200);
    });

    $(".inner").hide();
    $(".box").toggle(function() {
        $(this).next(".inner").slideDown(200);
    }, function() {
        $(this).next(".inner").slideUp(200);
    });?

<div class="box2"><h3>Basketball</h3>
</div>
<div class="widget2" style="display: block; "><div class="widget"><div class="box"><h3>Australia</h3></div>
        <div class="inner" style="display: block; ">
            <ul class="leagues">
                                    <li class="even"><a href="/baloncesto/australian-nbl/" class="league-145">Australian NBL</a></li>
                            </ul>
            <div class="clear-both"></div>
        </div></div>
</div>? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T07:51:16.170

使用[javascript coockie](http://www.quirksmode.org/js/cookies.html)保存每个菜单的`Open`和`close`状态，并在页面加载时读取状态。这是唯一的方法，因为每次刷新页面时，一切都会重置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T07:02:18.013

进行更改时，您可以更改 url 末尾 # 之后的内容。然后当页面重新加载时，您读取散列后的值`$(document).ready()`并相应地进行更改。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-28T07:49:27.527

您可以使用**is**函数检查您的 div 是否隐藏并显示它

```
if($(".selector").is(":hidden"))
   $(".selector").show(); 
```

此外，正如@mikel 所说，将其放在文档就绪函数中以检查页面加载。

```
$(document).ready(function(){
      if($(".selector").is(":hidden"))
       $(".selector").show();
}); 
```

# gcc - 为什么我的交叉编译器工具链不是静态链接？

> ID：11699025
> 
> 赞同：0
> 
> 时间：2012-07-28T06:58:53.200
> 
> 标签：gcc, toolchain, cross-compiling, linux-from-scratch, clfs

我想构建我的交叉编译工具链，我构建成功了。它可以正常使用，但是当我移动它时，它不能工作！

它打印`error while loading shared libraries: libcloog-isl.so.3`，`libcloog-isl`未安装在我的主机中。

我使用 --disable-shared 配置 gcc，但是当我在交叉编译工具链中运行 ldd 到 cc1 时，我发现 ppl、gmp、moc、libgcc_s 和其他一些链接到我的主机库。为什么当我使用 --disable-shared 时它不能静态链接到 cc1。我发现 Sourcery CodeBench 的工具链可以在任何地方运行，它的 cc1 没有链接我的宿主库。

cc1中的静态链接而不是动态链接宿主库应该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T17:16:21.683

您可能已经知道 ld 命令（以及 gcc）将接受**-static**选项，但您可能还需要使用**-static-libgcc**和/或**-static-libstdc++**以确保静态链接到所有库.

# mysql - MySql中的动态列名选择

> ID：11699027
> 
> 赞同：6
> 
> 时间：2012-07-28T06:59:17.983
> 
> 标签：mysql, stored-procedures

我今天被困在 mysql 中，mysql select 语句中需要动态列名。让我解释：

```
sql> select name1 from namescollection. 
sql> select name2 from namescollection. 
sql> select name3 from namescollection. 
```

所以namescollection表有三列，分别是name1、name2、name3我想在我的存储过程中查询这个表，它是动态的1、2、3，并将作为变量传递，但是当我查询时也是在简单的sql上：

```
SELECT concat('name','1') FROM `namescollection` 
```

`name1 ----- name1 rather fetching name1 field's value.`

可以对此提出任何建议，我需要使用正确的函数而不是 concat 虽然我知道在调用 concat 时输出 name1 的权利，但我想将其用作列名。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-28T07:32:14.320

您可以做的是在存储过程中使用准备好的语句，这将允许您执行字符串查询：

举个简单的例子：

```
DELIMITER //
CREATE PROCEDURE selname (IN col VARCHAR(20))
BEGIN
  SET @sql = CONCAT('SELECT ', col, ' FROM tbl');
  PREPARE stmt FROM @sql;
  EXECUTE stmt;
  DEALLOCATE PREPARE stmt;
END//
DELIMITER ; 
```

* * *

使用此[SQLFiddle 演示对其进行测试](http://www.sqlfiddle.com/#!2/68b7f/2/0)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-03-19T10:04:30.527

**存储过程更新语句中的动态列名**：

```
DELIMITER //
CREATE DEFINER=`root`@`localhost` PROCEDURE `selname`()
BEGIN
    declare cl int ;
    declare clvalue int ;

    set cl=1;
    SET clvalue=1;
    while cl < 4 DO
        SET clvalue=clvalue*cl;
        SET @sql = CONCAT('update test set col',cl, '=',clvalue,' where id=1');
        PREPARE stmt FROM @sql;
        EXECUTE stmt;
        DEALLOCATE PREPARE stmt;
        set cl=cl+1;
   end while;

END //
DELIMITER ; 
```

# ruby - 从 Ruby 发布时如何避免 JSON 上的 uri 编码？

> ID：11699038
> 
> 赞同：2
> 
> 时间：2012-07-28T07:01:35.360
> 
> 标签：ruby, json, http, post

我正在尝试编写一个简单的 http 帖子，它将一个 json 正文发送到一个 restful api。我正在使用以下代码：

```
data = {'EmailAddress' => email, 'Name' => 'bobby', 'CustomFields' => [ {'Key' => 'Country', 'Value' => 'canada'}, {'Key' => 'City', 'Value' => 'vancouver'} ], 'Resubscribe' => true }.to_json

require 'net/http'
net = Net::HTTP.new("api.createsend.com", 80)
request = Net::HTTP::Post.new("/api/v3/subscribers/#{@list}.json")
request.basic_auth(@api, 'magic')
request.set_form_data(:body => data)

response = net.start do |http|
http.request(request)
end
puts response.code
puts response.read_body 
```

我遇到的麻烦是正文以字符串而不是十六进制形式发送到服务器。这是我要发送的内容：

> 正文=%7b%22EmailAddress%22%3a%223%40blah.com%22%2c%22Name%22%3a%22bobby%22%2c%22CustomFields%22%3a%5b%7b%22Key%22%3a%22Country %22%2c%22Value%22%3a%22canada%22%7d%2c%7b%22Key%22%3a%22City%22%2c%22Value%22%3a%22vancouver%22%7d%5d%2c%22重新订阅%22%3atrue%7d

这是我要发送的内容：

```
{
  "EmailAddress": "3@blah.com",
  "Name": "bobby",
  "CustomFields" : [
    {
      "Key":"Country",
      "Value":"canada"
    },
    {
      "Key":"City",
      "Value":"vancouver"
    }
  ],
  "Resubscribe": true
} 
```

如何打包这些数据，使其不作为字符串输出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T07:37:37.433

代替：

```
request.set_form_data(:body => data) 
```

试试这样：

```
request.body = data 
```

net/http 不应该对帖子正文进行 uri 编码，如果您看到这种情况发生，那么可能还有其他事情正在这样做，或者您可能只是弄错了。

# c - 使用系统命令

> ID：11699042
> 
> 赞同：-1
> 
> 时间：2012-07-28T07:02:38.293
> 
> 标签：c

我正在使用以下系统命令在我的 c 程序中调用 ffmpeg：

```
system("ffmpeg -t 10 -f video4linux2 -s 640x480 -r 30 -i /dev/video0 -f mp4 /home/somepath/webcam.mp4");
system("ffmpeg -i /home/somepath/webcam.mp4 -r 1 -s 640x480 -f image2 foo-%03d.jpeg"); 
```

问题是我需要在第一个系统在 10 秒后完成后才调用第二个系统。我能想到的唯一方法是使用 thread.sleep() 然后调用它。还有其他更优雅的方法可以实现相同的目标吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T07:11:12.733

阅读一本好书，例如[高级 linux 编程](http://www.advancedlinuxprogramming.com/)或[高级 unix 编程](http://basepath.com/aup/)。

您将了解到基本的进程创建和程序执行与[fork(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/fork.2.html)、[execve(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/execve.2.html)、[waitpid(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/waitpid.2.html)和相关的[系统调用](http://en.wikipedia.org/wiki/System_call)有关。

实际上，`system(3)`是由`fork`then`execve`的then a or实现`/bin/sh`的。`-c``waitpid``wait`

你绝对可以自己`fork`做`execve`。您可能还想处理[SIGCHLD](http://en.wikipedia.org/wiki/SIGCHLD)信号。您不需要任何与线程相关的调用。您可能对[pipe(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/pipe.2.html)、[dup2(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/dup2.2.html)、[poll(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/poll.2.html)、[sigaction(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/sigaction.2.html)、[pause(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/pause.2.html)、[nanosleep(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/nanosleep.2.html)系统调用等感兴趣。

`ffmpeg`如果超过十秒，我不明白你想对你的第一个进程做什么。你想[杀死（2）](http://www.kernel.org/doc/man-pages/online/pages/man2/kill.2.html)它吗？（然后先用 a 杀死`SIGTERM`，然后用 a杀死`SIGQUIT`，最后用 a杀死`SIGKILL`）。

如果您正在编写图形程序，大多数工具包都提供流程处理功能（因为它与事件循环混合在一起）。使用 GTK 考虑使用[g_child_watch_add](http://developer.gnome.org/glib/unstable/glib-The-Main-Event-Loop.html#g-child-watch-add)和[g_spawn_async](http://developer.gnome.org/glib/unstable/glib-Spawning-Processes.html#g-spawn-async)。Qt 有一个`QProcess`类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T07:07:09.097

您可能可以在 bat 文件或 shell 脚本中编写所有命令并调用 bat 文件或 shell 脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T07:11:45.127

引自[http://www.cplusplus.com/reference/clibrary/cstdlib/system/](http://www.cplusplus.com/reference/clibrary/cstdlib/system/)

> int 系统 ( const char * 命令 );
> 
> 执行系统命令
> 
> 调用命令处理器来执行命令。一旦命令执行终止，处理器将控制权交还给程序，返回一个 int 值，其解释取决于系统。

我认为`system`是阻塞的。所以你不需要`sleep`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T07:14:54.697

我认为 sleep 是一个很好的方法，不需要其他解决方案。

# android - 当用户单击文本视图中的链接时如何赶上异常？

> ID：11699045
> 
> 赞同：3
> 
> 时间：2012-07-28T07:03:10.297
> 
> 标签：android

使用 TextView 显示电子邮件，并设置

```
 TextView tvEmail = (TextView)this.findViewById(R.id.tvEmail);
Linkify.addLinks(tvEmail, Linkify.EMAIL_ADDRESSES); 
```

点击上面的邮件地址会引发异常，因为邮件客户端没有找到。如何赶上这个异常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-25T15:14:48.763

我已经遇到了同样的问题，我通过创建一个新类来解决它，该类`null`在实际启动`Intent`.

您所要做的就是`URLSpan`在设置 ' 文本之前替换所有跨度`TextView`（这意味着您不能使用`setAutoLinkMask()`）。

必须这样做，因为`URLSpan`'s`onClick()`方法不执行任何类型的`null`检查。

如何进行：

```
TextView txt = ...
txt.setLinksClickable(true);
txt.setText(SafeURLSpan.parseSafeHtml(<<YOUR STRING GOES HERE>>));
txt.setMovementMethod(LinkMovementMethod.getInstance()); 
```

可用于的字符串种类`<<YOUR STRING GOES HERE>>`：

```
"Click here: <a href=\"http://google.com\">My links</a>"
"Mail me: <a href=\"mailto:john@doe.com\">My email</a>"
... and so on... 
```

这是`SafeURLSPan`类的源代码（我在我的应用[FPlay](https://github.com/carlosrafaelgn/FPlayAndroid)中使用它，并且已经在 Android 10+ 上进行了测试）：

```
import android.content.Context;
import android.content.Intent;
import android.net.Uri;
import android.provider.Browser;
import android.text.Html;
import android.text.Spannable;
import android.text.style.URLSpan;
import android.view.View;

public final class SafeURLSpan extends URLSpan {
    public SafeURLSpan(String url) {
        super(url);
    }

    @Override
    public void onClick(View widget) {
        try {
            final Uri uri = Uri.parse(getURL());
            final Context context = widget.getContext();
            final Intent intent = new Intent(Intent.ACTION_VIEW, uri);
            if (context != null && intent != null) {
                intent.putExtra(Browser.EXTRA_APPLICATION_ID, context.getPackageName());
                context.startActivity(intent);
            }
        } catch (Throwable ex) {
        }
    }

    public static CharSequence parseSafeHtml(CharSequence html) {
        return replaceURLSpans(Html.fromHtml(html.toString()));
    }

    public static CharSequence replaceURLSpans(CharSequence text) {
        if (text instanceof Spannable) {
            final Spannable s = (Spannable)text;
            final URLSpan[] spans = s.getSpans(0, s.length(), URLSpan.class);
            if (spans != null && spans.length > 0) {
                for (int i = spans.length - 1; i >= 0; i--) {
                    final URLSpan span = spans[i];
                    final int start = s.getSpanStart(span);
                    final int end = s.getSpanEnd(span);
                    final int flags = s.getSpanFlags(span);
                    s.removeSpan(span);
                    s.setSpan(new SafeURLSpan(span.getURL()), start, end, flags);
                }
            }
        }
        return text;
    }
} 
```

# cocoa - 通过 setFrameSize 触发 drawRect 在 NSScrollView 中调整自定义 NSView 的大小

> ID：11699048
> 
> 赞同：2
> 
> 时间：2012-07-28T07:04:22.847
> 
> 标签：cocoa, resize, scrollview, nsview, nsscrollview

所以我有这个简单的自定义 NSView-inside-NSScrollView 设置，以编程方式在 awakeFromNib 中构建，就像在 Apple 的 ScrollView 编程指南中一样。

自定义视图（NSScrollView 的 documentView）最初具有一定的帧大小，并且滚动位置保持在自定义视图的原点。没有用户启动，也没有程序化滚动。

现在，从不同的线程，通过发出 performSelectorOnMainThread，我通过在自定义视图上调用 setFrameSize(newSize) 来更改自定义视图的帧大小，只会使其高度变大。原点和宽度保持不变。

现在的问题是，为什么我在自定义视图上得到 drawRect: 调用，大概是由 cocoa 调用的，其脏矩形为 (0, 0, viewwidth, viewheight) ？我认为这很奇怪，至少它不是最优的，因为在一个没有任何变化的区域有一个重绘请求。例如，高度从 10000 扩展到 10300，这与此时在可见矩形中显示的矩形无关（0、0、viewwidth、viewheight）。

从 NSView 的类参考中，我假设 setFrameSize: 不会导致 drawRect: 被触发，只要你不发出 setNeedsDrawInRect: 或类似的。

那么，有谁知道为什么在被包含在 NSScrollView 中的情况下，这个 drawRect: 对包含的视图的调用是由 Cocoa 进行的？哪个对象（NSScrollView、NSClipView、NSNotificationCenter...）正在发出这个调用？

非常感谢任何提示，Joerg

# symfony - 检查路线上的用户界面

> ID：11699055
> 
> 赞同：1
> 
> 时间：2012-07-28T07:06:07.663
> 
> 标签：symfony

***我有不同的用户类型：***

1.  **“UserOne”**类型实现了“UserOne”接口
2.  **“UserTwo”**类型实现了“UserTwo”接口

但是，它们具有相同的作用**`ROLE_USER`**。

他们可以做不同的动作。

我如何确保**`UserOne`**只能访问`app.php/userone/etc...`而不在每个控制器中检查它**`if User implements UserOne`**？据我所知，我们只能在配置文件中使用角色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T10:16:18.873

如果他们能做不同的动作，他们必须扮演不同的角色。在安全设置中声明两个角色

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T10:40:25.860

您应该重新定义路由器服务来[解析参数](https://github.com/symfony/symfony/blob/master/src/Symfony/Bundle/FrameworkBundle/Routing/Router.php#L84)。

[这个答案](https://stackoverflow.com/a/11663641/970721)可能对你有用

# android - Android应用程序中的空指针异常

> ID：11699056
> 
> 赞同：0
> 
> 时间：2012-07-28T07:07:02.610
> 
> 标签：android

我不知道为什么，但是我在`null pointer exceptions`下面的代码中得到了这只是基本代码，但是一旦我单击其中一个图像，就会导致空指针异常

```
public class MainActivity extends Activity implements OnClickListener{

    ImageView img1,img2,img3,img4,img5,img6,img7,img8,img9;
    int i = 0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

    ImageView img1 = (ImageView) findViewById(R.id.ImageView01);
    ImageView img2 = (ImageView) findViewById(R.id.ImageView02);
    ImageView img3 = (ImageView) findViewById(R.id.ImageView03);
    ImageView img4 = (ImageView) findViewById(R.id.ImageView04);
    ImageView img5 = (ImageView) findViewById(R.id.ImageView05);
    ImageView img6 = (ImageView) findViewById(R.id.ImageView06);
    ImageView img7 = (ImageView) findViewById(R.id.ImageView07);
    ImageView img8 = (ImageView) findViewById(R.id.ImageView08);
    ImageView img9 = (ImageView) findViewById(R.id.ImageView09);     
    img1.setOnClickListener(this);       
        img2.setOnClickListener(this);     
        img3.setOnClickListener(this); 
        img4.setOnClickListener(this);
        img5.setOnClickListener(this); 
        img6.setOnClickListener(this);
        img7.setOnClickListener(this);
        img8.setOnClickListener(this);
        img9.setOnClickListener(this);

        if(i == 8){
            //show dialog
            Toast.makeText(getApplicationContext(), "You clicked all 9", Toast.LENGTH_LONG).show();
        }
    }

    @Override
    public void onClick(View v) {
        switch (v.getId()) {
        case R.id.ImageView01:
            // do something
            img1.setVisibility(View.GONE);
            i = i + 1;
            break;
        case R.id.ImageView02:
            // do something
            img2.setVisibility(View.GONE);
            i = i + 1;
            break;
        case R.id.ImageView03:
            // do something     
            img3.setVisibility(View.GONE);
            i = i + 1;
            break;
        case R.id.ImageView04:
            // do something
            img4.setVisibility(View.GONE);
            i = i + 1;
            break;
        case R.id.ImageView05:
            // do something
            img5.setVisibility(View.GONE);
            i = i + 1;
            break;
        case R.id.ImageView06:
            // do something
            img6.setVisibility(View.GONE);
            i = i + 1;
            break;
        case R.id.ImageView07:
            // do something
            img7.setVisibility(View.GONE);
            i = i + 1;
            break;
        case R.id.ImageView08:
            // do something
            img8.setVisibility(View.GONE);
            i = i + 1;
            break;
        case R.id.ImageView09:
            // do something
            img9.setVisibility(View.GONE);
            i = i + 1;
            break;
        }
    } 
```

日志猫：

```
E/AndroidRuntime（1399）：致命异常：主要
E/AndroidRuntime（1399）：java.lang.NullPointerException
E/AndroidRuntime（1399）：在 com.aliancegaming.duckduckgone.MainActivity.onClick（MainActivity.java:49）
E/AndroidRuntime（1399）：在 android.view.View.performClick（View.java:4084）
E/AndroidRuntime（1399）：在 android.view.View$PerformClick.run（View.java:16966）
E/AndroidRuntime（1399）：在 android.os.Handler.handleCallback（Handler.java:615）
E/AndroidRuntime（1399）：在 android.os.Handler.dispatchMessage（Handler.java:92）
E/AndroidRuntime（1399）：在 android.os.Looper.loop（Looper.java:137）
E/AndroidRuntime（1399）：在 android.app.ActivityThread.main（ActivityThread.java:4745）
E/AndroidRuntime（1399）：在 java.lang.reflect.Method.invokeNative（本机方法）
E/AndroidRuntime（1399）：在 java.lang.reflect.Method.invoke（Method.java:511）
E/AndroidRuntime（1399）：在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run（ZygoteInit.java:786）
E/AndroidRuntime（1399）：在 com.android.internal.os.ZygoteInit.main（ZygoteInit.java:553）
E/AndroidRuntime（1399）：在 dalvik.system.NativeStart.main（本机方法）

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T07:10:21.837

来自 XML 布局的所有 imageViews 引用都在之后 `setContentView(R.layout.activity_main);`

**像，**

```
ImageView img1,img2,img3,img4,img5,img6,img7,img8,img9; 

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    img1 = (ImageView) findViewById(R.id.ImageView01);
    img2 = (ImageView) findViewById(R.id.ImageView02);
    img3 = (ImageView) findViewById(R.id.ImageView03);
    img4 = (ImageView) findViewById(R.id.ImageView04);
    img5 = (ImageView) findViewById(R.id.ImageView05);
    img6 = (ImageView) findViewById(R.id.ImageView06);
    img7 = (ImageView) findViewById(R.id.ImageView07);
    img8 = (ImageView) findViewById(R.id.ImageView08);
    img9 = (ImageView) findViewById(R.id.ImageView09);

    img1.setOnClickListener(this);       
    img2.setOnClickListener(this);     
    img3.setOnClickListener(this); 
    img4.setOnClickListener(this);
    img5.setOnClickListener(this); 
    img6.setOnClickListener(this);
    img7.setOnClickListener(this);
    img8.setOnClickListener(this);
    img9.setOnClickListener(this);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T08:39:14.977

```
ImageView img1,img2,img3,img4,img5,img6,img7,img8,img9;
int i = 0;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

img1 = (ImageView) findViewById(R.id.ImageView01);
img2 = (ImageView) findViewById(R.id.ImageView02);
img3 = (ImageView) findViewById(R.id.ImageView03);
img4 = (ImageView) findViewById(R.id.ImageView04);
img5 = (ImageView) findViewById(R.id.ImageView05);
img6 = (ImageView) findViewById(R.id.ImageView06);
img7 = (ImageView) findViewById(R.id.ImageView07);
img8 = (ImageView) findViewById(R.id.ImageView08);
img9 = (ImageView) findViewById(R.id.ImageView09); 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T08:40:29.093

在**onClick() { }**您正在使用**img1 到 img9**

它们是全局声明的对象，未在**onCreate(){}中初始化**

因为在 OnCreate() 中，您将**新的**iimg1 带到了 img9。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T07:12:25.660

把这段代码放在`setContentView(R.layout.activity_main)`下面`onCreate`

```
img1 = (ImageView) findViewById(R.id.ImageView01);
img2 = (ImageView) findViewById(R.id.ImageView02);
img3 = (ImageView) findViewById(R.id.ImageView03);
img4 = (ImageView) findViewById(R.id.ImageView04);
img5 = (ImageView) findViewById(R.id.ImageView05);
img6 = (ImageView) findViewById(R.id.ImageView06);
img7 = (ImageView) findViewById(R.id.ImageView07);
img8 = (ImageView) findViewById(R.id.ImageView08);
img9 = (ImageView) findViewById(R.id.ImageView09); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-28T07:12:41.297

在被调用`findViewById()`之前你不能调用`setCoententView()`

# objective-c - 我的 Objective-C 程序使用正则表达式获取整个 HTML 但有时会发生异常

> ID：11699059
> 
> 赞同：1
> 
> 时间：2012-07-28T07:07:43.260
> 
> 标签：objective-c, regex, facebook, html-parsing

这是关于Objective-C的问题。我编写了使用正则表达式获取整个 HTML 的程序。我已将程序上传到 GitHub。但是，会发生异常。

这个程序的目的是通过正则表达式匹配得到“og:image”。这是通过在 Facebook 中写入 URL 来显示的图像。要设置此图像，请使用 HTML 编写如下：

```
<meta property="og:image"
content="http://business.nikkeibp.co.jp/article/NBD/20120727/235043/zu1.jpg"> 
```

所以我编写了获取整个 HTML 并找到 og:image 部分的程序。代码如下：

```
// Web page address
NSURL *url = [NSURL URLWithString:textField.text];

// Get the web page HTML
NSString *string = 
[NSString stringWithContentsOfURL:url encoding:NSUTF8StringEncoding error:nil];

// prepare regular expression to find text
NSError *error   = nil;
NSRegularExpression *regexp =
[NSRegularExpression regularExpressionWithPattern:
 @"<meta property=\"og:image\" content=\".+\""
                                          options:0
                                            error:&error];

@try {
    // find by regular expression
    NSTextCheckingResult *match =
    [regexp firstMatchInString:string options:0 range:NSMakeRange(0, string.length)];

    // get the first result
    NSRange resultRange = [match rangeAtIndex:0];
    NSLog(@"match=%@", [string substringWithRange:resultRange]); 

    if (match) {

        // get the og:image URL from the find result
        NSRange urlRange = NSMakeRange(resultRange.location + 35, resultRange.length - 35 - 1);
        NSURL *urlOgImage = [NSURL URLWithString:[string substringWithRange:urlRange]];
        imageView.image = [UIImage imageWithData:[NSData dataWithContentsOfURL:urlOgImage]];
    }
} 
```

整个代码在 GitHub 中，如下所示：

[https://github.com/weed/p120728_GetOgImage/blob/master/GetOgImage/ViewController.m](https://github.com/weed/p120728_GetOgImage/blob/master/GetOgImage/ViewController.m)

但是，有时这个程序会通过异常。

*   success case：<a href="http://www.nicovideo.jp/watch/1343369790" rel="nofollow">http://www.nicovideo.jp/watch/1343369790

*   failure case：<a href="http://business.nikkeibp.co.jp/article/NBD/20120727/235043/?ST=pc" rel="nofollow">http://business.nikkeibp.co.jp/article/NBD/20120727/235043/?ST=pc

Screen shots is here: [https://github.com/weed/p120728_GetOgImage/blob/master/readme.md](https://github.com/weed/p120728_GetOgImage/blob/master/readme.md)

Why exception occurs? Please teach me. Thank you for your help.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T10:00:02.060

My friend kindly pointed about considering Character Encoding. The character encoding of first URL page is UTF-8, and the second one is EUC-JP.

With the code below I could get the og:image of second URL I showed above.

```
- (NSString *)encodedStringWithContentsOfURL:(NSURL *)url
{
    // Get the web page HTML
    NSData *data = [NSData dataWithContentsOfURL:url];

    // response
    int enc_arr[] = {
        NSUTF8StringEncoding,           // UTF-8
        NSShiftJISStringEncoding,       // Shift_JIS
        NSJapaneseEUCStringEncoding,    // EUC-JP
        NSISO2022JPStringEncoding,      // JIS
        NSUnicodeStringEncoding,        // Unicode
        NSASCIIStringEncoding           // ASCII
    };
    NSString *data_str = nil;
    int max = sizeof(enc_arr) / sizeof(enc_arr[0]);
    for (int i=0; i<max; i++) {
        data_str = [
               [NSString alloc]
               initWithData : data
               encoding : enc_arr[i]
               ];
        if (data_str!=nil) {
               break;
        }
    }
    return data_str;    
} 
```

I made the check library of character encoding named `NSString+Encode`. The whole code is in GitHub:

[https://github.com/weed/p120728_OgImageLibrary](https://github.com/weed/p120728_OgImageLibrary)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T09:07:43.220

It looks like your regular expression is not matching the result for the second page, have you tested the html source of that page with your regular expression in a regex tester?

Something like this should do the trick: [http://regexpal.com/](http://regexpal.com/)

# html - 移动 HTML5 游戏上的 OpenGL 使用

> ID：11699062
> 
> 赞同：0
> 
> 时间：2012-07-28T07:08:34.847
> 
> 标签：html, mobile, webgl, jscript

我有一个使用 WebGL 在桌面网络浏览器中运行的 HTML5 游戏。显然 HTML5 和 jscript 可以构建到移动平台，但是 WebGL 代码会发生什么？

我认为 WebGL 在移动应用程序中不能很好地工作。

那么如何在移动 HTML5 中使用 OpenGL？是否有与 OpenGL ES 的 jscript 绑定？

谢谢

编辑：为了清楚起见，我说的是本机安装的移动应用程序而不是浏览器。就像使用 PhoneGap 之类的东西一样

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T02:02:25.507

Nicol，appMobi 已将 WebGL 集成到其 iOS 和 Android 原生包装器中，为 HTML5 画布绘图提供了大约 10 倍的性能提升。appMobi 与PhoneGap 类似，在构建HTML5 内部的原生“包装器”，使用JS API 让您的游戏访问所有操作系统功能。这是一个描述加速的页面，我们称之为directCanvas。[http://www.appmobi.com/index.php?q=content/directcanvas-accelerates-html5-game-performance](http://www.appmobi.com/index.php?q=content/directcanvas-accelerates-html5-game-performance)

希望这有帮助！罗伊

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T09:11:19.460

> 我认为 WebGL 在移动应用程序中不能很好地工作。

你有什么想法？WebGL 基于 OpenGL-ES 2.0，这是大多数移动设备支持的 OpenGL-ES 配置文件。所以 WebGL 很好地映射到移动设备的 GPU 功能。这更多的是浏览器支持问题，而不是性能问题。

# maven - 我可以使用 maven deploy 来使用 maven 部署多个 jar 吗？

> ID：11699063
> 
> 赞同：3
> 
> 时间：2012-07-28T07:08:39.433
> 
> 标签：maven

我想知道是否可以使用 Maven 部署插件部署多个 jar？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T07:21:56.487

如果应该从一个模块部署 2 个或更多 JAR，请使用 assembly:single 的 maven-assembly-plugin 目标，并将附加设置为 true： [http ://maven.apache.org/plugins/maven-assembly-plugin/single -mojo.html](http://maven.apache.org/plugins/maven-assembly-plugin/single-mojo.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T07:15:44.843

是的你可以。将您想要部署其 JAR 的所有项目作为父项目的模块，然后当您部署父项目时，将部署所有子项目 JAR。

在此处查看教程：http: [//www.sonatype.com/books/mvnex-book/reference/multimodule.html](http://www.sonatype.com/books/mvnex-book/reference/multimodule.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T18:26:24.907

正如 Nishant 评论的那样，有 2 个案例。

**具有其依赖项的项目**

假设您有一个主项目，例如一个框架，它会生成一堆 jar。因为它是一个大项目，它应该被拆分成许多小项目。但是有一个主项目可以驱动所有其他项目。简而言之，它是一个多 maven 项目

```
+-main-project/
+--src/
| +-- ...
+--pom.xml
|
+--submodule1
| +--src/
| +--pom.xml
+--submodule1
| +--src/
\ +--pom.xml 
```

这将产生至少 2 个 jar（submodule1.jar 和 submodule2.jar）

多模块项目旨在处理这种关系。一个 mvn deploy 将部署所有 jars。

**一个产生 N 个 jars 的简单项目**

考虑您有一个具有多个来源的项目

```
+-main-project/
+--src/
| +--main/
| | +--java-core/
| | |--+/ClassA.java
| | +--java-entities/
| | |--+/ClassE.java
| | +--java-interfaces/
| | |--+/IClass.java
+--pom.xml 
```

这将产生 3 个 jars（核心、实体、接口）。这永远不会成立！规则是 1 个 pom --> 1 个工件（在特殊情况下为 2 个，例如资源、zip、ejb-client...）

因此， mvn deploy 将无法在远程仓库中放置超过 1 个 jar。如果您找到解决方法（使用一些插件），那真是个坏主意。Maven 不是为此而设计的。但是，不用担心，您只需拆分项目以防万一。

我希望它足够清楚，因为您的第一条消息并不准确:)

# jsp - HTTPSession 变量限制

> ID：11699065
> 
> 赞同：7
> 
> 时间：2012-07-28T07:09:15.987
> 
> 标签：jsp, session, servlets, session-variables, httpsession

HTTPSession 变量可以容纳的数据的最大限制（即大小）是多少？如果超过了会发生什么？最重要的是，如果大小超过 HTTPSession 变量可以容纳的最大大小，那么在整个会话中获取数据的替代方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-28T07:21:15.187

除了服务器的内存之外，没有限制。替代方案是

*   以更多内存运行您的服务器
*   配置服务器以将会话交换到磁盘（请参阅[http://tomcat.apache.org/tomcat-7.0-doc/config/manager.html](http://tomcat.apache.org/tomcat-7.0-doc/config/manager.html) for Tomcat）
*   避免将大数据放入会话中，而是使用缓存或数据库来存储它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-02T19:45:19.390

有一个很好的建议是谨慎使用 HttpSession 上的数据会话，主要是因为必须考虑很多点，而不仅仅涉及数据大小。

*   如果连接不安全，HttpSession 可能会被劫持。因此，如果连接不是通过 HTTPS，则与 HTTP 相比，被劫持的机会更高。
*   估计在网络上使用该服务的用户数量。您可以分配世界上所有可能的内存，但如果解决方案是预先分配一个没有任何大小限制的会话，那么当许多用户使用时，JVM 中出现 OutOfMemory 的可能性很高。例如：一个 8 KB 的会话数据乘以 100.000 个用户可以达到 800 MB。
*   在服务器中配置的会话超时，Websphere Application Server 默认设置为 30 分钟。如果会话超时减少，它可能有助于 JVM 过载，另一方面你可以让用户非常愤怒。
*   如果解决方案使用许多服务器（集群），需要考虑的一件事是它们之间的共享 Http 会话。

**更多信息，我建议您阅读Ken Hygh、Ruth Willenborg 和 Stacy Joines 所著的 Java 网站性能分析**一书中的第 2 章 - Http 会话

# python - python：从相对路径导入

> ID：11699069
> 
> 赞同：3
> 
> 时间：2012-07-28T07:09:51.463
> 
> 标签：python, google-app-engine

我正在尝试从名为 template 的文件夹中导入，该文件夹的结构类似于

```
controller/
          /__init__.py
          /login.py # <- I'm here
template/
        /__init__.py # from template import *
        /template.py # contains class Template 
```

python好像能看到需要的类但是导入失败，这是login.py代码

```
import webapp2

import template

class Login(webapp2.RequestHandler):
#class Login(template.Template):

    def get(self):
        self.response.out.write(dir(template)) 
```

印刷

```
['Template', 'Users', '__builtins__', '__doc__', '__file__', '__loader__', '__name__', '__package__', '__path__', 'jinja2', 'os', 'template', 'urllib', 'webapp2'] 
```

切换进口线

```
import webapp2

import template

#class Login(webapp2.RequestHandler):
class Login(template.Template):

    def get(self):
    self.response.out.write(dir(template)) 
```

印刷

```
class Login(template.Template):
AttributeError: 'module' object has no attribute 'Template' 
```

我究竟做错了什么？谢谢

**编辑**：我创建了另一个名为 index 的文件夹，其中包含

```
index/
     /__init__.py # from index import *
     /index.py # class Index
     /index.html 
```

index.py 中的代码是

```
from template import Template
class Index(Template):
    def get(self):
        self.render("/index/index.html") 
```

此代码正常工作，没有任何错误，但一个索引控制器文件夹失败

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T08:28:12.703

问题是什么时候`template/__init__.py`：

```
from template import * 
```

它不是从您认为的地方导入 - 它是从*自身*导入所有内容，因为有一个名为“模板”的文件夹`__init__.py`定义了一个名为“模板”的模块 - 它优先于其中也称为“模板”的模块。你需要明确告诉 Python 你想要内部模块，你可以这样做：

```
from .template import * 
```

# php - php 包含包含 html 标记和 js 脚本的文件

> ID：11699070
> 
> 赞同：0
> 
> 时间：2012-07-28T07:10:01.103
> 
> 标签：php, javascript, include, head

一个非常简单的问题：

*   “Headers.html”包含一堆由 js 脚本驱动的下拉菜单。脚本位于 head 部分，菜单位于 body 部分。

*   “Content1.html”、“Content2.html”等都有自己的<head>和<body>，另外它们在<body>中包含一个PHP include语句，引入了“Headers.html”的元素。

这种安排是非法的，因为它在结果文件中重复了 <head> 和 <body>，对吗？但是，如果我没有在“headers.html”中定义 <head>，我最终会在最终文件的正文中间出现 js 脚本。我想将所有脚本放入第三个文件中，该文件将包含在内容文件的 <head> 中，但这意味着“headers.html”中的菜单不能作为独立的菜单工作，这很烦人。那么，包含包含脚本的 html 文件的最佳做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T07:19:09.987

将脚本和标记严格保存在单独的文件中，并在需要时包含它们。

# objective-c - 将多个任务分派到一个队列，或多个队列，每个队列一个任务

> ID：11699072
> 
> 赞同：1
> 
> 时间：2012-07-28T07:10:30.183
> 
> 标签：objective-c, cocoa-touch, grand-central-dispatch

我想一次启动多个线程，所以我使用了以下代码。

我很困惑是否应该创建一个队列并将许多操作放入其中，或者创建多个队列，每个队列都使用一个操作。

```
dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0);
    for(int INDEX = 0; INDEX < 5; INDEX++) {
        dispatch_async(queue, ^{
            /*some code*/        
        }); 
    } 
```

* * *

```
for(int INDEX = 0; INDEX < 5; INDEX++) {
        dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^{
            /*some code*/        
        }); 
    } 
```

哪个是最优的？另外，GCD 中的线程数有限制吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T07:49:52.370

你没有做多个队列。您正在[检索全局队列之一](http://developer.apple.com/library/mac/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationQueues/OperationQueues.html)。您的应用程序中有三个，您既不能创建也不能销毁它们。

此外，即使您正在创建队列（使用`dispatch_queue_create()`），也不一定要为每个队列创建一个新线程，或者根本不需要创建任何新线程。Grand Central Dispatch 系统为您管理所有线程。GCD 不限制您可以创建的队列数量。

请阅读[GCD 参考](https://developer.apple.com/library/mac/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)和[并发编程指南](http://developer.apple.com/library/mac/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/Introduction/Introduction.html%23//apple_ref/doc/uid/TP40008091-CH1-SW1)。

# c# - 如何在 c# 中循环遍历 textBox(i)？

> ID：11699073
> 
> 赞同：0
> 
> 时间：2012-07-28T07:10:30.277
> 
> 标签：c#, database, dynamic, textbox

我这里有情况。我还没有编写代码，因为我什至没有启动它的想法！我有 10 个文本框和一个按钮，所以当我只输入 3 个文本框时，我将只使用三个文本框，因为我解析到这些文本框的值会进入数据库。我打算在 for 循环中编写一个查询并执行它，以便只有具有值的文本框才能进入数据库。

```
for(int i=0;i<9;i++)
{
 string sql = "Insert Into exprmnt(docid,itemid,doctitle,itemcontent)values("+int.Parse(label6.Text)+","+i+",'"+label5.Text+"','"+textBox[i].Text+"')";

}
   OleDbCommand cmd = new OleDbCommand(sql,con);
  con.Open();

       cmd.ExecuteNonQuery();
  con.Close(); 
```

这是我想要发生的事情，如果我对某些 itemid 'i' 清空 'itemcontent' 没关系，当我保存所有文本框时会发生这种情况，包括那些没有键入任何文本的文本框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T10:51:34.977

终于成功了！！！@yogi 谢谢！

有效的代码是

```
List<TextBox> textBoxList = new List<TextBox>();
          textBoxList.Add(new TextBox { Text = textBox1.Text });
          textBoxList.Add(new TextBox { Text = textBox2.Text });
          textBoxList.Add(new TextBox { Text = textBox3.Text });
          textBoxList.Add(new TextBox { Text = textBox4.Text });

          for (int n = 1; n<4; n++)
          {

              string sql = "Insert Into exprmnt (docid,itemid,doctitle,itemcontent) values(" + int.Parse(label6.Text) + "," + n + ",'" + label5.Text + "','" + textBoxList[n].Text+ "')";

              OleDbCommand cmd = new OleDbCommand(sql, connection);

              connection.Open();

              cmd.ExecuteNonQuery();
              connection.Close();
          } 
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T07:16:42.473

要遍历 textBox，您可以创建一个要循环遍历的 textBoxes 数组：

```
TextBox[] tbs = {textBox1, textBox2, textBox3}; //put all into this array
for(int i = 0; i<tbs.Length; i++)
{
    //use each textBox in here:
    string text = tbs[0].Text; //this is an example of how to get the Text property of each textBox from array
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T07:35:52.343

对于它的价值，您可以使用 Linq 查找填充的文本框。您对 SQL 注入开放。使用参数而不是字符串连接：

```
int docid = int.Parse(label6.Text);
String doctitle = label5.Text;
var filledTextBoxes = this.Controls
                             .OfType<TextBox>()
                             .Select((txt,i) => new { Textbox = txt, Index = i })
                             .Where(x => x.Textbox.Text.Length != 0);
if(filledTextBoxes.Any())
{
    using (OleDbConnection connection = new OleDbConnection(connectionString))
    {
        const String sql = "Insert Into exprmnt(docid,itemid,doctitle,itemcontent)values(@docid, @itemid, @doctitle, @itemcontent)";
        connection.Open();
        foreach(var txt in filledTextBoxes)
        {
            OledDbCommand cmd = new OledDbCommand(sql, connection);
            // Set the parameters.
            cmd.Parameters.Add(
                "@docid", OleDbType.Integer).Value = docid;
            cmd.Parameters.Add(
                "@doctitle", OleDbType.VarChar, 50).Value = doctitle;
            cmd.Parameters.Add(
                "@itemid", OleDbType.Integer).Value = txt.Index;
            cmd.Parameters.Add(
                "@itemcontent", OleDbType.VarChar, 100).Value = txt.Textbox.Text;
            try
            {
                int affectedRecords = cmd.ExecuteNonQuery();
            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.Message);
            }
        } 
    } // The connection is automatically closed when the code exits the using block.
} 
```

请注意，我已使用[`using-statement`](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)来确保连接被释放（关闭）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T07:16:21.950

将您的文本框控件添加到列表中。然后遍历列表。

```
List<TextBox> textBoxList = new List<TextBox>();

for (int i = 0; i < textBoxList.Count; i++) {
    // .. do your thing here, using textBoxList[i].Text for the value in the textbox
} 
```

此外，正如 Tim Schmelter 指出的那样。在连接这样的查询时，您可以接受 SQL 注入。

# regex - 为什么这些正则表达式不同？

> ID：11699078
> 
> 赞同：0
> 
> 时间：2012-07-28T07:11:42.417
> 
> 标签：regex, grep

我正在寻找其中带有撇号的行，并尝试了一些与我相同的表达方式；但是，有些有效，有些则无效。为什么我会出现以下行为：

```
egrep \' file      # works as expected

egrep "\'" file    # seems to return all lines

egrep "[\']" file  # works as expected

egrep '\'' file    # seems to be waiting for more input 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T07:17:13.713

单引号和双引号在转义方面存在差异。放在`echo`前面以查看实际发送到的内容`egrep`：

```
$ echo egrep \' file
egrep ' file
$ echo egrep "\'" file
egrep \' file
$ echo egrep "[\']" file
egrep [\'] file
$ echo egrep '\'' file
> 
```

最后一种情况提示您输入更多信息，因为您仍在单引号表达式中：它不是`\'`单引号中的转义引号 ( )（因为这不是您转义单引号的方式。）它是单引号之间的反斜杠，带有尾随的开盘报价。

顺便说一句，要在单引号字符串中转义单引号，请使用如下结构：

```
$ echo 'foo'\''bar'
foo'bar 
```

这实际上是`\'`在两个单引号字符串之间放置一个裸字引号（）。然后这些都被隐式连接在一起。

我不知道为什么`"\'"`匹配所有行（但似乎确实如此。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T12:40:53.517

我认为你过于复杂了，如果你试图匹配`'`引用它`"`：

```
echo "'" | grep "'" 
```

# asp.net - 无法读取配置部分“System.web”，因为它缺少商会的声明

> ID：11699081
> 
> 赞同：0
> 
> 时间：2012-07-28T07:11:48.143
> 
> 标签：asp.net, vb.net, web-config, custom-errors, system.web

我的 web.config 是

```
<?xml version="1.0"?>
<configuration>

<configSections>
  <sectionGroup name="system.web.extensions" type="System.Web.Configuration.SystemWebExtensionsSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
    <sectionGroup name="scripting" type="System.Web.Configuration.ScriptingSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
      <section name="scriptResourceHandler" type="System.Web.Configuration.ScriptingScriptResourceHandlerSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
      <sectionGroup name="webServices" type="System.Web.Configuration.ScriptingWebServicesSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
        <section name="jsonSerialization" type="System.Web.Configuration.ScriptingJsonSerializationSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="Everywhere" />
        <section name="profileService" type="System.Web.Configuration.ScriptingProfileServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication" />
        <section name="authenticationService" type="System.Web.Configuration.ScriptingAuthenticationServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication" />
        <section name="roleService" type="System.Web.Configuration.ScriptingRoleServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication" />
      </sectionGroup>
    </sectionGroup>
  </sectionGroup>
</configSections>  
<appSettings/>
<connectionStrings/>

<System.web>
    <compilation debug="true" strict="false" explicit="true">
      <assemblies>
        <add assembly="System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
        <add assembly="System.Data.DataSetExtensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
        <add assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        <add assembly="System.Xml.Linq, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
      </assemblies>
    </compilation>

    <authentication mode="Windows" />

    <customErrors mode="RemoteOnly" defaultRedirect="Page1.htm">
      <error statusCode="403" redirect="Page2.htm" />
      <error statusCode="404" redirect="Page3.htm" />
    </customErrors>

    <pages>
      <namespaces>
        <clear />
        <add namespace="System" />
        <add namespace="System.Collections" />
        <add namespace="System.Collections.Generic" />
        <add namespace="System.Collections.Specialized" />
        <add namespace="System.Configuration" />
        <add namespace="System.Text" />
        <add namespace="System.Text.RegularExpressions" />
        <add namespace="System.Linq" />
        <add namespace="System.Xml.Linq" />
        <add namespace="System.Web" />
        <add namespace="System.Web.Caching" />
        <add namespace="System.Web.SessionState" />
        <add namespace="System.Web.Security" />
        <add namespace="System.Web.Profile" />
        <add namespace="System.Web.UI" />
        <add namespace="System.Web.UI.WebControls" />
        <add namespace="System.Web.UI.WebControls.WebParts" />
        <add namespace="System.Web.UI.HtmlControls" />
      </namespaces>
      <controls>
        <add tagPrefix="asp" namespace="System.Web.UI" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        <add tagPrefix="asp" namespace="System.Web.UI.WebControls" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      </controls>
    </pages>

  <httpHandlers>
    <remove verb="*" path="*.asmx"/>
    <add verb="*" path="*.asmx" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    <add verb="*" path="*_AppService.axd" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    <add verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" validate="false"/>
  </httpHandlers>

  <httpModules>
    <add name="ScriptModule" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
  </httpModules>
</System.web>
<system.codedom>
  <compilers>
    <compiler language="vb;vbs;visualbasic;vbscript" extension=".vb" warningLevel="4"
              type="Microsoft.VisualBasic.VBCodeProvider, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <providerOption name="CompilerVersion" value="v3.5"/>
      <providerOption name="OptionInfer" value="true"/>
      <providerOption name="WarnAsError" value="false"/>
    </compiler>
  </compilers>
</system.codedom>

<!-- 
    The system.webServer section is required for running ASP.NET AJAX under Internet
    Information Services 7.0\.  It is not necessary for previous version of IIS.
-->
<system.webServer>
  <validation validateIntegratedModeConfiguration="false"/>
  <modules>
    <remove name="ScriptModule" />
    <add name="ScriptModule" preCondition="managedHandler" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
  </modules>
  <handlers>
    <remove name="WebServiceHandlerFactory-Integrated"/>
    <remove name="ScriptHandlerFactory" />
    <remove name="ScriptHandlerFactoryAppServices" />
    <remove name="ScriptResource" />
    <add name="ScriptHandlerFactory" verb="*" path="*.asmx" preCondition="integratedMode"
         type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    <add name="ScriptHandlerFactoryAppServices" verb="*" path="*_AppService.axd" preCondition="integratedMode"
         type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    <add name="ScriptResource" preCondition="integratedMode" verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
  </handlers>
</system.webServer>
<runtime>
  <assemblyBinding appliesTo="v2.0.50727" xmlns="urn:schemas-microsoft-com:asm.v1">
    <dependentAssembly>
      <assemblyIdentity name="System.Web.Extensions" publicKeyToken="31bf3856ad364e35"/>
      <bindingRedirect oldVersion="1.0.0.0-1.1.0.0" newVersion="3.5.0.0"/>
    </dependentAssembly>
    <dependentAssembly>
      <assemblyIdentity name="System.Web.Extensions.Design" publicKeyToken="31bf3856ad364e35"/>
      <bindingRedirect oldVersion="1.0.0.0-1.1.0.0" newVersion="3.5.0.0"/>
    </dependentAssembly>
  </assemblyBinding>
</runtime>
</configuration> 
```

那么错误是

[http://gauravbansal7.7hostfree.com/htmlparser/default.aspx](http://gauravbansal7.7hostfree.com/htmlparser/default.aspx)

但是如果在 web.config 中我在第 20 行和第 75 行写**system.web 代替 System.web**则错误是

[http://gauravbansal7.7hostfree.com/htmlparser1/default.aspx](http://gauravbansal7.7hostfree.com/htmlparser1/default.aspx)

请指导我如何消除错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T07:18:16.887

一定是`system.web`这样，你就在这里。

对于第二个错误，它来自您的源代码，但由于您没有包含`custom error`标签，您无法看到它。

所以只需包含这个标签，如下所示：

```
<customErrors mode="Off">
</customErrors> 
```

# c++ - 我在哪里可以找到标准容器和算法的所有异常保证？

> ID：11699083
> 
> 赞同：26
> 
> 时间：2012-07-28T07:12:22.187
> 
> 标签：c++, exception, standard-library, c++-faq, exception-safety

是的，我查看了我可以找到的[C++ 标准](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3337.pdf)（或草案），但我没有找到任何全面的 STL 容器提供的异常保证。我所能找到的只是偶尔出现的部分，其中对*某些类型的**某些*功能的描述不完整。或者也许它在那里，但我只是没有找到它，我不知道。

 ***注意：**我***不是***要一份人们能想到的所有保证的清单，基本上就是在[这个问题](https://stackoverflow.com/questions/7403227/where-can-i-find-information-about-c-stl-method-exception-guarantees)中。
我正在寻找这些信息本身的*权威来源*——或者最好是一个免费版本的来源（例如标准草案），我可以或多或少地将其视为官方的。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-28T07:48:58.777

阅读标准可能会让人害怕（让我们回到标准），但是 Bjarne Stroustrup 在他的《C++ 编程语言》一书中就这个主题写了一个非常好的附录。他将此附录张贴在

[http://www.stroustrup.com/3rd_safe0.html](http://www.stroustrup.com/3rd_safe0.html)，位于 [http://www.stroustrup.com/3rd_safe.pdf](http://www.stroustrup.com/3rd_safe.pdf)

它很长很详细（而且写得很好）。例如，您可能会发现第 E.4 节有趣，引用：

> *E.4 标准集装箱保证*
> 
> 如果库操作本身引发异常，它可以——并且确实——确保它所操作的对象处于明确定义的状态。例如， at() 为 vector 抛出 out_of_range （第 16.3.3 节）对于 vector 的异常安全来说不是问题。at() 的编写者可以毫无问题地确保向量在抛出之前处于明确定义的状态。

此外，第 E.4.1 节指出

> 除了基本的保证外，标准库还为一些插入或删除元素的操作提供了强有力的保证。

看看第 956 页。它包含一个保证向量、双端队列、列表和映射的各种操作的表。 **总之，对这些容器的所有操作要么是 nothrow 要么是 strong ，除了提供基本保证的*N 元素 insert into map 。***

注意：上面的文字是旧的，不涉及 C++11，但对于大多数目标和目的来说应该仍然足够正确。

## 当涉及到 C++11...

标准首先声明，关于容器 `array, deque, forward_list, list, vector, map, set, unordered_map, unordered_set, queue,stack`：在

**23.2.1/10**：

> 除非另有规定（见 23.2.4.1、23.2.5.1、23.3.3.4 和 23.3.6.5），本条款中定义的所有容器类型均满足以下附加要求：
> 
> — 如果 insert() 或 emplace() 函数在插入单个元素时抛出异常，则该函数无效。
> — 如果 push_back() 或 push_front() 函数抛出异常，则该函数无效。
> — 没有erase()、clear()、pop_back() 或pop_front() 函数抛出异常。
> — 返回的迭代器的任何复制构造函数或赋值运算符都不会引发异常。
> — 没有 swap() 函数抛出异常。
> — 没有 swap() 函数会使任何引用被交换容器元素的引用、指针或迭代器失效。

上面提到的各个部分中指出的怪癖（每个都称为异常安全保证）主要是关于特殊的撞墙情况，例如在处理来自包含类型的散列、比较操作以及抛出交换和抛出移动的异常时操作。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-28T08:27:58.797

# n3376

## 23.2.1 一般容器要求 [container.requirements.general]

### 第 10 段

> 除非另有规定（见 23.2.4.1、23.2.5.1、23.3.3.4 和 23.3.6.5），本条款中定义的所有容器类型都满足以下附加要求：
> — 如果 insert() 或 emplace() 抛出异常插入单个元素时的函数，该函数没有效果。
> — 如果 push_back() 或 push_front() 函数抛出异常，则该函数无效。
> — 没有erase()、clear()、pop_back() 或pop_front() 函数抛出异常。
> — 返回的迭代器的任何复制构造函数或赋值运算符都不会引发异常。
> — 没有 swap() 函数抛出异常。
> — 没有 swap() 函数会使任何引用被交换容器元素的引用、指针或迭代器失效。
> [注意：end() 迭代器不引用任何元素，因此它可能会失效。——尾注]

## 23.2.4 关联容器 [associative.reqmts]

## 23.2.4.1 异常安全保证 [associative.reqmts.except]

> 1 对于关联容器，没有 clear() 函数抛出异常。除非容器的 Compare 对象（如果有）抛出异常，否则 erase(k) 不会抛出异常。
> 2 对于关联容器，如果插入或 emplace 函数中插入单个元素的任何操作引发异常，则插入无效。
> 3 对于关联容器，没有交换函数会引发异常，除非该异常是由容器的比较对象（如果有）的交换引发的。

## 23.2.5 无序关联容器 [unord.req]

## 23.2.5.1 异常安全保证 [unord.req.except]

> 1 对于无序关联容器，没有 clear() 函数抛出异常。除非容器的 Hash 或 Pred 对象（如果有）抛出异常，否则 erase(k) 不会抛出异常。
> 2 对于无序关联容器，如果在插入单个元素的 insert 或 emplace 函数中除容器的散列函数之外的任何操作引发异常，则插入无效。
> 3 对于无序关联容器，没有交换函数抛出异常，除非该异常是由容器的 Hash 或 Pred 对象（如果有）的交换引发的。
> 4 对于无序关联容器，如果从容器的散列函数或比较函数之外的 rehash() 函数中抛出异常，则 rehash() 函数无效。

## 23.3.3.4 双端队列修饰符 [deque.modifiers]

### 无效 push_back(T&& x); 第 2 段

> 备注：如果不是由 T 的复制构造函数、移动构造函数、赋值运算符或移动赋值运算符引发异常，则没有任何影响。如果非 CopyInsertable T 的移动构造函数抛出异常，则未指定效果。

### 迭代器擦除（首先是 const_iterator，最后是 const_iterator）；第 6 段

> 抛出：除非 T 的复制构造函数、移动构造函数、赋值运算符或移动赋值运算符抛出异常，否则什么都没有。

## 23.3.6.5 矢量修饰符 [vector.modifiers]

### 无效 push_back(T&& x); 第 2 段

> 如果非 CopyInsertable T 的移动构造函数抛出异常，则未指定效果。

### 迭代器擦除（首先是 const_iterator，最后是 const_iterator）；第 5 段

> 抛出：除非 T 的复制构造函数、移动构造函数、赋值运算符或移动赋值运算符抛出异常，否则什么都没有。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-28T20:25:20.500

您链接到的文档，n3337 标准草案，可以被视为官方文件。它是 C++11 标准加上小的编辑更改。

您只需要学习阅读标准，这是可以理解的，因为它并不易于阅读。

要查找任何特定库操作的异常保证，请检查该操作的规范以获取有关异常的注释和注释。如果该函数是成员函数，则检查类型规范以获取有关异常安全的注释以及它满足的要求。然后检查满足的要求，以了解对象必须做出的异常保证来满足这些要求。

对于泛型类型和算法，还要检查对模板参数的要求，以查看这些类型必须满足哪些要求才能使类型或算法或成员函数做出的所有异常保证都保持（如果模板参数不t 满足指定的要求，然后使用带有这些参数的模板具有未定义的行为，并且模板的规范都不适用）。*

# knockout.js - 淘汰映射插件更新数组中的单个项目

> ID：11699089
> 
> 赞同：2
> 
> 时间：2012-07-28T07:13:33.030
> 
> 标签：knockout.js, knockout-mapping-plugin

我在尝试使用映射插件将项目更新为 observableArray 的一部分时遇到问题。

我有以下代码

```
accounts.list = ko.mapping.fromJS(@(Html.Raw(Model.AccountsJSON))); 
```

我有这个绑定到一个表使用

```
<tbody data-bind="foreach: list"> ... </tbody> 
```

这一切正常，然后我有以下功能

```
$('#datatable').delegate(".cancelLock", "click", function() {
        var item = ko.contextFor(this).$data;
        var param = {AccountNumber : item.AccountNumber()}
        $.post('@Url.Action("cancellock","accounts")',param,function(result){
            ko.mapping.fromJSON(result,item);
            if(accounts.lockeditem() == item){
                accounts.lockeditem(0);
            }
        });
    }); 
```

该行`ko.mapping.fromJSON(result,item);`不会导致错误，并且函数继续，但是它不会导致可观察的更新。

我已经尝试将代码更改为`ko.mapping.fromJSON(result,accounts.list);`（并更新我的控制器以返回完整列表）并且这可以正常工作 - 问题是我不想更新整个表，我“只是”想要恢复“项目”回到原来的状态。

我也尝试过使用`item.Updated(result.Updated);`（其中更新是对象的属性之一），这可以按预期工作，但是我宁愿不要在每个属性上手动调用它，除非我必须这样做。

是否可以使用`ko.mapping.fromJSON(result,item);`（或某些变体）？我在做一些愚蠢的错误吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T20:14:05.397

除非我误解了您的意图，否则您可以使用“指定更新目标”下的[映射文档](http://knockoutjs.com/documentation/plugins-mapping.html)`ko.mapping.fromJS`中提到的（或 fromJSON）变体来执行此操作。所以我想你想要这个：

```
ko.mapping.fromJSON(result, {}, item); 
```

这是一个小提琴：http: [//jsfiddle.net/kR4jc/](http://jsfiddle.net/kR4jc/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-07T16:49:49.820

我更新了小提琴以引用 rawgithub.com 和最新的 knockout.js 文件。

[http://jsfiddle.net/kR4jc/5/](http://jsfiddle.net/kR4jc/5/)

```
https://rawgithub.com/SteveSanderson/knockout.mapping/master/build/output/knockout.mapping-latest.debug.js
http://knockoutjs.com/downloads/knockout-2.2.1.js 
```

这篇文章也帮助了我 [https://github.com/SteveSanderson/knockout.mapping/issues/41](https://github.com/SteveSanderson/knockout.mapping/issues/41)

# java - 通过 log4j 将 junit 测试用例的日志保存到单独的文件中

> ID：11699092
> 
> 赞同：0
> 
> 时间：2012-07-28T07:14:02.620
> 
> 标签：java, junit, log4j

我有大量由 JunitCore.run() 运行的 junit 测试用例现在我想将每个用例的日志保存到单独的文件中，但是我的应用程序使用 log4j，所有日志输出都保存在一个大文件中。如何为每个案例创建单独的日志？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T07:23:36.953

我相信这可能会解决您的问题...

[通过 Log4j 创建单独的文件](https://stackoverflow.com/questions/1666121/programmatically-creating-different-log-files-using-log4j)

您可以为不同的附加程序指定各种文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-14T11:54:17.977

1.您必须删除记录器对象上的所有现有附加程序（loggerOBject.removeALLApenders();）

2.Define a new pattern for the logger use PatternLayout API [https://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/PatternLayout.html](https://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/PatternLayout.html)

3.  创建一个新的文件 appender 并将您想要 CREATE/LOG 的日志路径传递给 FileAppender 构造函数

    FileAppender appender = new FileAppender(layout,logpath,false);

4.  将 appender 对象添加到 Logger 对象

    日志.add(appender);

5.  设置记录器的级别

    logger.setLevel((Level) Level.INFO);

# graph - DAG 中可以有多少条边？

> ID：11699095
> 
> 赞同：15
> 
> 时间：2012-07-28T07:14:13.347
> 
> 标签：graph, directed-acyclic-graphs

在一个有 n 个顶点的有向无环图中，有向边的最大可能数量是多少？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-28T07:19:51.110

假设有 N 个顶点/节点，让我们探索构建一个具有最大边的 DAG。考虑任何给定的节点，比如 N1。在这个早期阶段，它可以指向的最大节点数或边数是 N-1。让我们选择第二个节点 N2：它可以指向除自身和 N1 之外的所有节点——即 N-2 个附加边。继续剩余节点，每个节点都可以比之前的节点少一个边。最后一个节点可以指向 0 个其他节点。

所有边的总和：(N-1) + (N-2) + .. + 1 + 0 == (N-1)(N)/2

# sql - 将值从一个表插入到另一个检查 id

> ID：11699096
> 
> 赞同：0
> 
> 时间：2012-07-28T07:14:19.810
> 
> 标签：sql, sql-server, sql-server-2008

我有 2 个表。所有 id 都包含在表一 ( `Tbl_Distributor`) 中。第二张桌子有所有的名字。

我想根据 id 将所有名称添加到第一个表中。

我的选择查询如下。

![在此处输入图像描述](../Images/f67ed5dda3ec5f34f1c8b9951ab835c5.png)

```
 INSERT INTO dbo.Tbl_Distributor(Giv_Name) where dealercode= a.dealercode

 SELECT a.dealercode,d.nameinfull  
 FROM dealerplacement a,dealer d
 where a.dealercode= d.dealercode
 order by a.dealercode ASC 
```

这返回`nameinfull`和`dealercode`。我想将此添加`nameinfull`到`Tbl_Distributor`.

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T07:37:09.400

```
UPDATE R
SET Giv_Name = D.FirstName
FROM
   dbo.Tbl_Distributor R
   INNER JOIN dbo.Dealer D
      ON R.Dis_ID = D.DealerCode 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-28T07:35:40.490

您不能在此处使用 INSERT。您需要使用更新。我会使用游标来完成这样的任务。

```
declare @id int, @name varchar(1000)
DECLARE c CURSOR FOR
SELECT a.dealercode,d.nameinfull  
 FROM dealerplacement a,dealer d
 where a.dealercode= d.dealercode
 order by a.dealercode ASC

OPEN c

FETCH NEXT FROM c 
INTO @id, @name

WHILE @@FETCH_STATUS = 0
BEGIN

update Tbl_Distributor set Giv_Name = @name where dealercode = @id

FETCH NEXT FROM c 
INTO @id, @name
end

CLOSE c;
DEALLOCATE c; 
```

另外，我会在 select 语句中使用 join ：

```
SELECT a.dealercode,d.nameinfull  
FROM dealerplacement a inner join dealer d
on a.dealercode= d.dealercode
order by a.dealercode ASC 
```

# android - 在不使用 edidtext 的情况下获取按下的字符

> ID：11699098
> 
> 赞同：0
> 
> 时间：2012-07-28T07:14:37.310
> 
> 标签：android

1.  我想在代码中得到一个按下的字符而不使用`edittext`.

    如果有人按下“a”或“b”等，就会出现一个黑屏。我想在我的代码中获取这个值。

    我已经使用 editext 和 textwatcher 完成了它，但要求是我们现在不需要使用它们。

2.  我们可以让字符（字母）从上到下随机移动吗

    我关注了一些使用过的链接，`marquee`但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T06:48:36.550

在您的活动中覆盖该方法

```
 @Override
 public boolean onKeyDown(int keyCode, KeyEvent event) {
      if (keyCode == KeyEvent.KEYCODE_A) {
          //Here your black screen if you press A
              return true;

         }
          return super.onKeyDown(keyCode, event);
        } 
```

检查这个[KeyEvent](http://developer.android.com/reference/android/view/KeyEvent.html)；

# android - java.net.SocketException：对等方重置连接

> ID：11699099
> 
> 赞同：2
> 
> 时间：2012-07-28T07:14:42.747
> 
> 标签：android

```
07-28 12:41:40.953: W/System.err(3386): java.net.SocketException: Connection reset by peer
07-28 12:41:40.953: W/System.err(3386):     at org.apache.harmony.luni.platform.OSNetworkSystem.read(Native Method)
07-28 12:41:40.953: W/System.err(3386):     at dalvik.system.BlockGuard$WrappedNetworkSystem.read(BlockGuard.java:273)
07-28 12:41:40.953: W/System.err(3386):     at org.apache.harmony.luni.net.PlainSocketImpl.read(PlainSocketImpl.java:458)
07-28 12:41:40.953: W/System.err(3386):     at org.apache.harmony.luni.net.SocketInputStream.read(SocketInputStream.java:85)
07-28 12:41:40.953: W/System.err(3386):     at java.io.BufferedInputStream.fillbuf(BufferedInputStream.java:166)
07-28 12:41:40.953: W/System.err(3386):     at java.io.BufferedInputStream.read(BufferedInputStream.java:225)
07-28 12:41:40.953: W/System.err(3386):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.readLine(HttpURLConnectionImpl.java:660)
07-28 12:41:40.953: W/System.err(3386):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.readResponseHeaders(HttpURLConnectionImpl.java:690)
07-28 12:41:40.953: W/System.err(3386):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.retrieveResponse(HttpURLConnectionImpl.java:1040)
07-28 12:41:40.953: W/System.err(3386):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:512)
07-28 12:41:40.953: W/System.err(3386):     at com.android.epaisa.Info.submitInfo(Info.java:168)
07-28 12:41:40.953: W/System.err(3386):     at com.android.epaisa.Info.onClick(Info.java:62)
07-28 12:41:40.953: W/System.err(3386):     at android.view.View.performClick(View.java:2485)
07-28 12:41:40.953: W/System.err(3386):     at android.view.View$PerformClick.run(View.java:9080)
07-28 12:41:40.953: W/System.err(3386):     at android.os.Handler.handleCallback(Handler.java:587)
07-28 12:41:40.953: W/System.err(3386):     at android.os.Handler.dispatchMessage(Handler.java:92)
07-28 12:41:40.953: W/System.err(3386):     at android.os.Looper.loop(Looper.java:130)
07-28 12:41:40.953: W/System.err(3386):     at android.app.ActivityThread.main(ActivityThread.java:3687)
07-28 12:41:40.953: W/System.err(3386):     at java.lang.reflect.Method.invokeNative(Native Method)
07-28 12:41:40.953: W/System.err(3386):     at java.lang.reflect.Method.invoke(Method.java:507)
07-28 12:41:40.953: W/System.err(3386):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
07-28 12:41:40.960: W/System.err(3386):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
07-28 12:41:40.960: W/System.err(3386):     at dalvik.system.NativeStart.main(Native Method) 
```

发生错误的行是

```
InputStream is = conn.getInputStream(); 
```

连接是有效的流

请帮我解决问题。尝试访问 JSON 对象时出现此错误。手动检查 URL 后，结果符合预期。我正在尝试发送一个 jpg 图像文件，将其压缩为字节数组，然后通过 Internet 发送。谢谢并恭祝安康，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T09:52:43.893

Guys the error was occurring because of timeout due to slow response in the internet connection and thus the connection was getting reset as per the coding at the backend.

# c# - C#异步套接字：发送base64编码的数据？

> ID：11699101
> 
> 赞同：3
> 
> 时间：2012-07-28T07:14:48.380
> 
> 标签：c#, sockets, base64

我有一个问题，我试图以 base64 格式发送数据。来自客户端的发送效果很好。但是，如果我试图在服务器上反编译 base64，我仍然总是出错，base64 字符无效。

我正在寻找一种方法，将数据从客户端加密到服务器并在服务器上解密，以实现安全传输。

我的代码显示 atm 是这样的： 客户：

```
socket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
socket.BeginConnect(ipAddress, ipAddressPort, new AsyncCallback(testA), null);

protected static void testA (IAsyncResult ar) {
      socket.EndConnect(ar);
      string str = EncodeTo64("Hello world!");
      socket.BeginSend(System.Text.Encoding.UTF8.GetBytes(str), 0, str.Length, SocketFlags.None, new AsyncCallback(testB), socket);
    }
    protected static void testB (IAsyncResult ar) {
      socket.EndSend(ar);
      socket.BeginReceive(bytes, 0, bytes.Length, SocketFlags.None, new AsyncCallback(testC), socket);
    }
    protected static void testC (IAsyncResult ar) {
      socket.EndReceive(ar);
      MessageBox.Show(System.Text.Encoding.UTF8.GetString(bytes));
    }
    static public string EncodeTo64(string toEncode)
    {
      byte[] toEncodeAsBytes
            = System.Text.ASCIIEncoding.ASCII.GetBytes(toEncode);
      string returnValue
            = System.Convert.ToBase64String(toEncodeAsBytes);
      return returnValue;
    }
    static public string DecodeFrom64(string encodedData)
    {
      byte[] encodedDataAsBytes
          = System.Convert.FromBase64String(encodedData);
      string returnValue =
         System.Text.ASCIIEncoding.ASCII.GetString(encodedDataAsBytes);
      return returnValue;
    } 
```

服务器：

```
serverSocket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
IPEndPoint ipEndPoint = new IPEndPoint(IPAddress.Any, 4444);

serverSocket.Bind(ipEndPoint);
serverSocket.Listen(4);

serverSocket.BeginAccept(new AsyncCallback(OnAccept), null);

 protected static byte[] byteData = new byte[1024];
private void OnAccept(IAsyncResult ar)
    {
      Socket clientSocket = serverSocket.EndAccept(ar);

      //Start listening for more clients
      serverSocket.BeginAccept(new AsyncCallback(OnAccept), null);

      //Once the client connects then start receiving the commands from her
      // Create the state object.
      clientSocket.BeginReceive(byteData, 0, byteData.Length, SocketFlags.None,
           new AsyncCallback(OnReceive), clientSocket);
    }

private void OnReceive(IAsyncResult ar) {
      Socket clientSocket = (Socket)ar.AsyncState;
      clientSocket.EndReceive(ar);
MessageBox.Show(DecodeFrom64(System.Text.Encoding.UTF8.GetString(byteData)));
}
    static public string EncodeTo64(string toEncode)
    {
      byte[] toEncodeAsBytes
            = System.Text.ASCIIEncoding.ASCII.GetBytes(toEncode);
      string returnValue
            = System.Convert.ToBase64String(toEncodeAsBytes);
      return returnValue;
    }
    static public string DecodeFrom64(string encodedData)
    {
      byte[] encodedDataAsBytes
          = System.Convert.FromBase64String(encodedData);
      string returnValue =
         System.Text.ASCIIEncoding.ASCII.GetString(encodedDataAsBytes);
      return returnValue;
    }
    public void OnSend(IAsyncResult ar) {
      Socket client = (Socket)ar.AsyncState;
      client.EndSend(ar);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T09:10:17.917

正如 Marc Gravell 所写，您不必要地使网络协议复杂化。网络传输本质上是复杂的，所以避免任何不必要的复杂化！

当他说你必须确保你真的阅读了所有发送的数据时，他也是绝对正确的。请查看文档和那里的示例（尤其是[Socket 类](http://msdn.microsoft.com/en-us/library/attbb8f5)和[Socket.EndReceive](http://msdn.microsoft.com/en-us/library/w7wtt64b)；请注意，只是调用`EndReceive`不足以确保所有内容都已阅读）。要点是：您需要在服务器端有一个循环，以确保已读取所有发送数据。如果要发送的数据很简单并且网络非常可靠（阅读：通过电缆的本地以太网，没有 WiFi；互联网，尤其是移动互联网不可靠），也许只是一个循环直到没有更多数据到达可能就足够了；在任何更复杂的场景中，使用 Marc 建议的框架协议会更明智，这将提供一种更可靠的方式来决定何时结束阅读循环。

您可以使用以下代码轻松重现您的错误：

```
var data = Encoding.ASCII.GetBytes("Hello World!");
var base64 = Convert.ToBase64String(data);
var bytesToSend = Encoding.UTF8.GetBytes(base64);
var stringRecieved = Encoding.UTF8.GetString(bytesToSend).Substring(0, 5);
var decoded = Convert.FromBase64String(stringRecieved);
var result = Encoding.ASCII.GetString(decoded);
Console.WriteLine("{0} -> {1} -> {2}", base64, stringRecieved, result); 
```

模拟`.Substring(0, 5)`尚未完全读取的网络流。如果你删除`.Substring`然后一切正常。为了支持 Marcs 点，以下内容足以发送数据：

```
var bytesToSend = Encoding.UTF8.GetBytes("Hello World!");
var stringRecieved = Encoding.UTF8.GetString(bytesToSend); 
```

另一个重要说明：BASE64 与加密完全无关。它只是一种编码，如 UTF8 或 ASCII。如果您需要安全的通信通道，BASE64 不是解决方案！如果窃听者读取了您的 BASE64 编码消息，他可以轻松识别编码，然后对其进行解码。

如果您需要安全通道，请使用 AES 等强加密标准或使用 TLS 等安全网络协议（例如通过 HTTPS；使用 HTTPS 还可以解决 Marc Gravell 提到的用于更复杂数据交换的“框架”问题）。

# facebook - Facebook 喜欢 winform 应用程序中的按钮

> ID：11699103
> 
> 赞同：0
> 
> 时间：2012-07-28T07:15:06.193
> 
> 标签：facebook, winforms, facebook-like

我想在 winform 应用程序中实现 Facebook 点赞按钮。我找不到任何文件或示例来解决我的要求。这可能来自 winform 应用程序的 LIKES 页面吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T07:19:11.710

我的猜测是您必须在您的 winform 应用程序上创建一个浏览器控件，该控件显示一个包含您喜欢按钮的页面。

[http://msdn.microsoft.com/en-us/library/aa752041%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/aa752041%28v=vs.85%29.aspx)

# asp.net-mvc-3 - 用关联实体填充列表框

> ID：11699111
> 
> 赞同：0
> 
> 时间：2012-07-28T07:16:47.313
> 
> 标签：asp.net-mvc-3, entity-framework-4

我正在构建我的第一个管理代码片段的 MVC(3) 应用程序。

显然我有一个片段的编辑页面，它有一种编程语言（0.* 到 0.1）。

现在我的问题是，如何使用所有当前的编程语言构建一个列表框，以在我的编辑页面上显示一个片段？

我想我可以创建一个 ViewModel 并通过手动查询它们并将它们作为列表传递来填充所有值，但我觉得构建 MVC 的人对此有更简洁的解决方案？我手头有 Apress 提供的“Pro MVC 3”和“Pro Entity Framework”，但似乎找不到答案。

当我尝试：

```
@Html.EditorFor(model => model.Language or model.Language.Name) 
```

我得到错误。

在此先感谢，任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T07:50:57.187

这是我在类似情况下所做的：1）创建一个视图模型来编辑语言

```
 public class LanguagesModel
{

    public IEnumerable<int> SelectedLanguageIds { get; set; }
    public MultiSelectList languages { get; set; }
} 
```

2）在控制器中填充模型：

```
 public ActionResult Index()
    {
        List<Language> languages = _languageService.GetLanguages();//however you get  the languages from your datasource
         var temp = new MultiSelectList(
                            languages.Select(l => new { Value =  l.LanguageId.ToString(), Text = l.Name }),
                            "Value",
                            "Text");

        LanguagesModel model = new LanguagesModel();
        model.languages = temp;

        return View(model);
    } 
```

3) 创建一个使用 DropDownListFor 助手的视图：

```
@model LanguagesModel

 @using (Html.BeginForm(Html.BeginForm("Index", "Home", FormMethod.Post, new { enctype      = "multipart/form-data" })))
{
@Html.ValidationSummary(true)

<fieldset>
     @Html.ListBoxFor(m => m.SelectedLanguageIds, Model.languages)

<p>
        <input type="submit" value="Save" />
</p>
</fieldset>
} 
```

小心用您实际使用的动作和控制器替换“索引”和“主页”。

**编辑**更改代码以使用 ListBox 而不是 DropDownList。受 Darin Dimitrov 回答的启发

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T07:53:55.880

> 我想我可以创建一个 ViewModel

开门见山！这正是我建议你做的。

但是，如果您想坚持使用您的域模型，您可以在视图中进行一些调整，以便能够使用 ListBox 帮助器（完全不推荐的解决方案，但是由于您根据您的标准要求更*整洁的东西）：*

```
@model Snippet
@Html.ListBox(
    "SelectedIds", 
    new MultiSelectList(
        Model.Languages.Select(l => new { Value = l.ID.Tostring(), Text = l.Name }),
        "Value",
        "Text"
    )
) 
```

# perl - Perl：CPAN - 模块修改和添加功能

> ID：11699118
> 
> 赞同：3
> 
> 时间：2012-07-28T07:18:32.370
> 
> 标签：perl, module, cpan

我找到了一个我想更改的模块。

我的问题有一些这样的特点：

*   我想为这个模块**添加功能和灵活性。**
*   现在这个模块解决了任务，但是 web 服务，对于它所写的，改变了 API
*   而且，我想使用这个模块的代码。
*   这**不是**我的模块
*   修复一些错误

在这种情况下我应该如何？

*   继承此模块并添加功能并上传到 CPAN？
*   向作者询问我的修改（和重新加载模块）？
*   还有什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-28T16:00:14.943

有多种方法可以在您使用模块时对其进行修改，我在[Mastering Perl](http://shop.oreilly.com/product/9780596527242.do)中介绍了其中的大部分。

*   正如[Dave Cross 提到](https://stackoverflow.com/a/11699686/8817)的，将修复发送到上游或成为该项目的一部分。听起来你有成为重要贡献者的雄心。:)
*   创建一个子类来替换方法
*   覆盖或重载子例程或方法
*   包装子程序以修改或调整输入或输出（例如[Hook::LexWrap](https://www.metacpan.org/module/Hook::LexWrap)）
*   创建一个本地补丁版本，并将其与主代码分开存储，这样它就不会在升级中消失

例如，这是我在等待上游修复时经常直接在程序代码中执行的操作：

```
use Some::Module;  # load the original first
BEGIN {
   package Some::Module;
   no warnings 'redefine';
   if( $VERSION > 1.23 and $VERSION < 1.45 ) {
     *broken = sub { ... fixed version ... };
     }
   } 
```

这样，即使升级了目标模块，我也可以修复。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-28T09:04:26.793

我认为您的 a 和 b 选项几乎是最好的方法 - 尽管我可能会反过来做。

1.  向模块作者提出您的建议。阅读模块文档以了解作者喜欢如何联系。有的喜欢 email，有的喜欢[RT](http://rt.cpan.org/)，还有的有更具体的方法。如果作者对可以自由应用的新/更改代码和补丁进行测试，他们往往会更喜欢建议。也许代码在 Github 上。你可以分叉它，进行更改并向作者发送拉取请求吗？

2.  如果作者没有反应，那么考虑分叉或子类化他们的代码。在这种情况下，命名很重要，因为您希望人们能够找到您的模块以及原始模块。您还需要仔细记录您的版本与原始版本之间的差异，以便人们可以选择他们想要的版本。

# php - 带有多个提交按钮的 Ajax

> ID：11699119
> 
> 赞同：1
> 
> 时间：2012-07-28T07:19:08.267
> 
> 标签：php, javascript, ajax, jquery

如何更改下面的代码，而不是带有提交按钮的文本输入类型，我想要多个提交按钮，每个按钮都有自己的唯一值？我尝试的一切都以未定义的提交值结束。任何帮助都会很棒！

代码来源：[提交搜索查询并获得搜索结果而不刷新](https://stackoverflow.com/questions/3074380/submit-search-query-get-search-result-without-refresh)

```
<script type="text/javascript">
    $(function() {
        $("#lets_search").bind('submit',function() {
            var value = $('#str').val();
            $.post('db_query.php',{value:value}, function(data){
                $("#search_results").html(data);
            });
            return false;
        });
    });
</script>

<form id="lets_search" action="" >
    Search:<input type="text" name="str" id="str">
    <input type="submit" value="send" name="send" id="send">
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T08:18:23.933

您可以添加多个提交按钮并附加到所有这些`onclick`事件侦听器。单击按钮时 - 获取值并使用 POST 请求发送。

```
<script>
$(function(){
    $('input[type=submit]').click(function(){
        $.post('db_query.php', {value:$(this).val()}, function(data){
            $("#search_results").html(data);
        });
        return false;
    });
});
</script>
<form id="lets_search" action="">
    <input type="submit" name="button1" value="hi"/>
    <input type="submit" name="button2" value="bye"/>
</form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T08:12:53.390

如果您想使用多个提交按钮，您可以捕获点击事件并确定点击了哪个按钮。然后运行不同的 Ajax 提交。这在`enter`被击中时也有效。

```
//submit buttons
<form id="lets_search" action="" >
    Search:<input type="text" name="str" id="str" />
    <input type="submit" value="v1"/>
    <input type="submit" value="v2"/>
    //...more submit buttons
</form>    

//submit func
$(function() {
    $("#lets_search input[type=submit]").click(function() {
         switch  ($(this).val){
             case 'v1':...;
             case 'v2':...
         }
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T08:43:16.357

这是我的版本 - 现在看起来很像 Bingjies，因为它是在我测试他的版本时编写的

[演示](http://jsfiddle.net/mplungjan/XA53C/show)

```
<form id="lets_search" action="" >
Search:<input type="text" name="q" id="q">
<input type="submit" value="Google" name="send" id="google">
<input type="submit" value="Bing" name="send" id="bing">
</form>

$(function() {
  $("#lets_search input[type=submit]").click(function() {
    switch  ($(this).val()) {
        case "Bing" :
            $("#lets_search").attr("action","http://www.bing.com/search");
            break;

        case "Google":
            $("#lets_search").attr("action","https://www.google.com/search");
            break;
    }        
  });
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-28T07:39:06.543

您可以在表单中有多个提交按钮，没问题。它们可能具有相同的名称、类型等，但只是为它们分配不同的值。就像提交按钮 1 可以有 value="hi" 并且 Button 2 可以有 value="bye"。

然后，当为按钮调用操作函数时，您在输入函数时所要做的就是检查：$(this).val

```
HTML:

<input type="submit" name="button1" value="hi"/>
<input type="submit" name="button2" value="bye"/>

jQuery:
$(function() {
    $("#lets_search").bind('submit',function() {
        var value = $(this).val();

        if(value == "hi")
            do_something;
        else
            do_something_else;
    });
}); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-28T07:48:13.567

在这里，我更喜欢 Vamsi 的解决方案 n 为什么不是 Sanjeev mk？

对首选解决方案进行一些额外的思考。

**case: 如果有多个提交按钮**

如果用户在文本字段中并点击回车，系统将假定第一个提交按钮被点击。

> 因此，在这里，最好不要为最终用户的观点设置多个提交按钮

# macos - macos上的模板2.5.1安装问题

> ID：11699122
> 
> 赞同：1
> 
> 时间：2012-07-28T07:19:29.773
> 
> 标签：macos, monodevelop, monogame

Monogame 2.5.1 模板不适用于 MacOS、MonoDev 3.0.3.4

我做了以下但仍然没有模板：

1.  关闭 MonoDevelop
2.  找到你的 MonoDevelop AppBundle
3.  右键单击它并选择“显示包内容”
4.  按 Alt 并将目录 MonoDevelop.MonoGame.2.5 拖放到 ../Contents/MacOS/lib/monodevelop/AddIns/

多次执行上述操作后，仍然无法正常工作。接下来，我尝试了上述相同的步骤，但使用了 MonoDevelop.MonoGame.1.6.0，这一次，在 MonoDevelop“加载项管理器”中，我确实看到了 >Templates > MonoGame Project Template。带有以下消息：“由于缺少依赖项，无法加载此加载项”

基本上，MonoDevelop.MonoGame.2.5 没有出现在“加载项管理器”中并且不起作用，MonoDevelop.MonoGame.1.6.0 确实出现但不起作用。

有没有人知道发生了什么事。

干杯。

# sql - Rails 中基于用户时区的时事通讯

> ID：11699125
> 
> 赞同：0
> 
> 时间：2012-07-28T07:20:03.207
> 
> 标签：sql, ruby-on-rails, ruby, heroku

我正在尝试每天使用列 id、name、balance 和 timezone 更新用户表。余额是否翻了一番。该功能非常简单，但用户必须每天在其时区的 00:00 进行更新。

我最初的想法是检查时区 1 和时区 2 之间的用户并进行更新。

我正在使用 Heroku 调度程序。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T07:44:14.847

您可以在创建时使用 存储用户的时区`before_save`，并每小时安排一次作业。你会找到这样的用户：

```
users = User.find_by_timezone('1234') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T04:31:51.780

# 用户的休息时间不在 00:00 和 01:00 之间

```
Time.zone = user.tz || 'UTC'

break if Time.zone.now.hour != 0 
```

# php - PHP 中的类方法

> ID：11699127
> 
> 赞同：-2
> 
> 时间：2012-07-28T07:20:07.083
> 
> 标签：php, class-method

我来自 Ruby 世界，我目前正在从事一个 PHP 项目。

就像在 Ruby 脚本中一样，是否可以在 PHP 中声明类方法？基本上，我在问 PHP 中以下代码的等价物是什么

```
class A
  def hello; "hello from object"; end
  def self.hello; "hello from class"; end
end 
```

注意实例方法和类方法的区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T07:55:35.257

```
class A
  def hello; "hello from object"; end
  def self.hello; "hello from class"; end
end

class A {
    // attributes or properties
    public $age; 
    private $gender; 
    protected $location; 
    // needs to be static to be called as self:: inside the class
    public static function hello(){
         return "hello from object";
    }
    // use this keyword to be called inside the class
    public function hello1(){
        return "hello from object";
    }
    public function hello2(){
         print(self::hello());
         print(this->hello1());
    }
    // How about private method
    private function hello3(){
         return "hello world";
    }
}

Calling Outside the class

$instance = new A();
//static
$instance::hello();
//non static
$instance->hello1();
$instance->hello2(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T07:59:24.903

在 PHP 中，类方法通常被称为静态方法并被声明为静态方法。直接翻译你的例子： -

```
class A
{
    public function hello()
    {
        return "hello from object";
    }

    //We can't have two methods with the same name.
    public static function s_hello()
    {
        return "hello from class";
    }
} 
```

然后你会调用这样的方法： -

```
//For a static method we don't need an instance
echo A::s_hello;
//But we do for an instance method
$a = new A();
echo $a->hello(); 
```

你也可以有静态属性，所以上面的例子可以这样修改：-

```
class A
{
    private static $s_hello = "hello from class";
    private $hello = "hello from object";

    public function hello()
    {
        return $this->hello;
    }

    //We can't have two methods with the same name.
    public static function s_hello()
    {
        return self::$hello;
    }
} 
```

[http://php.net/manual/en/language.oop5.static.php](http://php.net/manual/en/language.oop5.static.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T07:22:32.170

看静态方法： http: [//php.net/static](http://php.net/static)

静态方法是这样调用的：

```
Foo::aStaticMethod(); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-28T07:46:42.417

php 中没有办法在单个类中对同一个函数进行多个定义

而你可以这样做

```
abstract class A{
 static function hello()
 {
   return 'hello';
 }
}

class B extends class A  
{
  function hello()
  {
  return 'hello from Object';
  }
}

A::hello();
$t = new B();
$t->hello(); 
```

# c++ - 使用 libCURL 的简单 HTTP Post

> ID：11699128
> 
> 赞同：-1
> 
> 时间：2012-07-28T07:20:08.400
> 
> 标签：c++, libcurl

全部，我试图在这里搜索建议的线程，但没有可用的。

我需要使用 libCURL POST 请求将文件发送到 Web 服务器。我正在创建要发送的文件，所以我知道它存在。我还在这里安装了一个 WireShark，所以我知道发送了什么。

在调试会话期间，我可以看到文件已被读取，并且读取到的缓冲区正在发送出去。但是，在 WireShark 中，它都显示为 FF FF FF FF 序列。

最后操作失败，“写入正文时出错”错误消息返回到 CURL。

知道可能是什么问题吗？

这是我到目前为止所尝试的：

1.

```
result = curl_formadd( &first, &last, CURLFORM_COPYNAME, "MyFile", 
                       CURLFORM_FILE, (const char *) fileName.c_str(), 
                       CURLFORM_FILENAME, (const char *) fileName.c_str(), 
                       CURLFORM_CONTENTSLENGTH, (long) file.Length(), 
                       CURLFORM_CONTENTTYPE, "image/bitmap", CURLFORM_END ); 
```

2.

```
result = curl_formadd( &first, &last, CURLFORM_COPYNAME, "MyFile", 
                       CURLFORM_FILENAME, (const char *) fileName.c_str(), 
                       CURLFORM_STREAM, &file, CURLFORM_CONTENTSLENGTH,
                       (long) file.Length(), CURLFORM_CONTENTTYPE, 
                       "image/bitmap", CURLFORM_END ); 
```

然后在这两种情况下：

```
curl_easy_setopt( handle, CURLOPT_HTTPPOST, first );
curl_easy_setopt( handle, CURLOPT_POSTFIELDSIZE, file.Length() ); 
```

两种情况下的标头都正确形成，但数据本身并未发送。

有人有想法吗？我觉得我错过了一些非常简单的东西......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T02:20:21.937

ALL，原来我尝试连接的服务已关闭。

谢谢你的聆听。

# mysql - 在内部选择查询中使用 order by 和 union

> ID：11699129
> 
> 赞同：0
> 
> 时间：2012-07-28T07:20:43.997
> 
> 标签：mysql, sql

我想在带有联合运算符的内部选择查询中使用 order by 子句，即

```
select colname from table where <cond1> order by colname 
union
select colname from table where <cond2> order by colname 
```

我可以将 order by 与完整结果一起使用，但我希望将第一个查询的结果排序，然后将第二个查询的结果排序。

请给我一些建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T07:28:08.643

`Order by`in `unioned`table的正确用法是

```
select colname from table where <cond1> 
union
select colname from table where <cond2> order by colname 
```

上面代码的解释是，在两个查询合并后，*它会根据列名进行**排序***。在服务器将它与第一个查询联合之前，它**不会**先对较低的查询进行排序。但是有一种替代方法，您需要将其包装在子查询中。

```
SELECT newTable.colname
FROM
(
    select colname, 1 as OrderThis from table where <cond1> 
    union
    select colname, 2 as OrderThis from table where <cond2> 
) newTable
Order by newTable.OrderThis, newTable.colname 
```

如果我的想法正确，您希望`union`在两个查询正确并保持其正确位置之前先对列进行排序（*第一个查询结果保持在顶部，而第二个查询结果保持在第一个查询下方*）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T07:25:37.033

以下应该做......我猜

```
select colname,1 as OrderCol from table where <cond1> 
union select colname,2 as OrderCol  from table 
where <cond2>  
order by OrderCol 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T07:27:47.600

这可能会奏效

```
SELECT * FROM ( SELECT colname  FROM table1 where <cond1> order by colname ) DUMMY_ALIAS1

UNION ALL

SELECT * FROM ( SELECT colname  FROM table2 where <cond2> order by colname ) DUMMY_ALIAS2 
```

# php - 字符串中只允许小数点后一个字符？

> ID：11699135
> 
> 赞同：1
> 
> 时间：2012-07-28T07:21:41.957
> 
> 标签：php

我得到了一个**数字字符串值**，比如**2345.567**，我只想保留小数点后的一个字符。我不想使用任何数字功能，我只想在句点（点）之后删除任意数量的字符？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T07:40:10.147

如果您担心输入不是数字，您应该先验证它：

```
function round_number($number, $precision = 1) {
    if(!is_numeric($number)) {
        throw new InvalidArgumentException("round_number() expects a numeric type, instead received '".gettype($number)."'");
    }

    return round($number, $precision);
} 
```

参考：

*   [`round($number, $precision)`](http://php.net/round)
*   [`is_numeric($var)`](http://php.net/is_numeric)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-28T07:25:50.877

```
$number =  2345.567; 

$new_numb = number_format($number,1); 
```

$new_numb 将被视为字符串

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-28T07:34:31.653

```
<?php
$str =  "2345.567";
$ip = explode('.',$str);
echo $ip[0].".".substr($ip[1],0,1)
?> 
```

编辑后：

```
<?php
// case:  if there is no decimal place
echo $ip[0]."".($ip[1]?".".substr($ip[1],0,1):'');
?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-28T07:27:16.860

格式化字符串输出可以使用[number_format](http://php.net/manual/en/function.number-format.php)或[printf](http://php.net/manual/en/function.printf.php)系列函数来完成。

```
print number_format((float)$string, 1);
printf("%.1f", $string); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-28T07:29:34.543

假设输入保证格式正确......

`substr($numberString, 0, strpos(".", $numberString) + 2);`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-28T07:45:18.787

你可以这样做

```
$string = "234567.2345";
if(!is_numeric($string)) {
   $output = $string;
}
else{
   $output = round($string,1);
} 
```

输出将是

```
234567.2 
```

如果字符串为 234

```
output will be 234.o 
```

如果给出的字符串不是数字“asdf”

```
output will be asdf 
```

# windows - 你可以在库中有窗口创建代码吗？

> ID：11699137
> 
> 赞同：0
> 
> 时间：2012-07-28T07:21:59.407
> 
> 标签：windows

我正在制作一个用作图形辅助的库，我想添加的一件事是它自己的窗口创建。

我已经看到人们如何在 Windows 应用程序中使用默认的 Windows 代码，但这仅适用于该项目而不是库。

是否可以将窗口创建代码添加到库中并使其行为方式如下：

```
windowClass instance = libraryCreateWindow(blah,blah);
instance.showWindow(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T07:32:54.230

是的，这是可能的。从库创建窗口与从主可执行文件创建窗口实际上没有区别。

窗口属于一个进程并与一个线程相关联，在代码中的哪个位置或在哪个模块中创建窗口都没有关系。我不确定您是基于什么声明“仅适用于该项目而不适用于图书馆”。

您没有具体说明您是在谈论动态库还是静态库、C++ 类库，甚至是 C#/.NET 库，实现细节显然因语言和框架而异，但答案应该仍然是肯定的以上任何一项。

# python - 如何在没有所有依赖项的情况下通过 yum 安装 python 包

> ID：11699143
> 
> 赞同：1
> 
> 时间：2012-07-28T07:23:11.657
> 
> 标签：python, couchdb, yum

我已经编译了 couchdb 1.2 并且正在使用它。我现在需要使用 couchdb python，我正在尝试 yum install python-couchdb，但 yum 想要安装 couchdb 1.1.1，因为它可能找不到我的编译版本。我如何告诉 yum 只安装没有 deps 的 python-couchdb 包？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T18:44:43.053

Python 使用 easy_install 进行安装，用于获取 python-couchdb 之类的 Python 鸡蛋。然而，我和许多人更喜欢一种叫做 PIP 的包装器，它可以更好地管理鸡蛋。

[在linux上，您可以像这样安装它。](http://www.saltycrane.com/blog/2010/02/how-install-pip-ubuntu/)

[或者，如果您更喜欢窗户。](https://stackoverflow.com/questions/4750806/how-to-install-pip-on-windows)

一旦你有了 pip，你可以通过调用来安装 python-couchdb：

```
sudo pip install couchdb 
```

那不应该破坏你的沙发安装。

# wpf - 适用于 WPF 的 Microsoft 功能区：功能区：RibbonApplicationMenu 问题

> ID：11699144
> 
> 赞同：1
> 
> 时间：2012-07-28T07:23:13.343
> 
> 标签：wpf, c#-4.0, ribboncontrolslibrary

使用优秀的[Microsoft Ribbon for WPF for WPF](http://10rem.net/blog/2010/08/02/announcing-microsoft-ribbon-for-wpf-rtw) for .NET 4（不是 .NET 4.5 内置类）我正在尝试实现类似 Office 2010 的功能区：

![Office 2010 功能区](../Images/7063ae664031b743878c717ef9ae8243.png)

但是，我无法在*功能区：RibbonApplicationMenu上显示***文件**文本。

 *如果我更改项目向导生成的代码

```
<ribbon:RibbonApplicationMenu SmallImageSource="Resources\SmallIcon.png"> 
```

至

```
<ribbon:RibbonApplicationMenu KeyTipService.KeyTip="F" Label="File"> 
```

我明白了：

![我的丝带](../Images/903e414589ae98b288d62094a1a0784a.png)

请注意，文本**文件**未显示。我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T16:25:02.180

看起来您将不得不使用 GlyphRun 在 RibbonApplicationMenu 的头部显示自定义文本。请参阅线程[How to set text at the head of a RibbonApplicationMenu上接受的答案](https://stackoverflow.com/questions/6698191/how-to-set-text-at-the-head-of-a-ribbonapplicationmenu)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T21:09:32.067

微软需要解决这个问题。它应该只需按照您的描述设置“标签”即可。

编辑：

我刚刚意识到微软甚至没有使用 RibbonApplicationMenu ......

再看看下面的图片：

![Office 2010 功能区](../Images/7063ae664031b743878c717ef9ae8243.png)

![我的丝带](../Images/903e414589ae98b288d62094a1a0784a.png)

Microsoft Word 只使用了一个选项卡，并将其变为蓝色！（我还没有弄清楚该怎么做）他们真的应该解决这个问题！

另外，我注意到微软关于这个主题的博客只使用了图标：http: [//blogs.msdn.com/b/wpf/archive/2010/08/03/introducing-microsoft-ribbon-for-wpf.aspx](http://blogs.msdn.com/b/wpf/archive/2010/08/03/introducing-microsoft-ribbon-for-wpf.aspx)*

# symfony - 在 symfony2 中将数据从一个模板发送到另一个模板

> ID：11699145
> 
> 赞同：0
> 
> 时间：2012-07-28T07:23:31.717
> 
> 标签：symfony, twig

我有一个树枝文件，命名`index.html.twig`如下：

```
<div class="tab-pane" id="2">

                    <div class="control-group component" rel="popover" title="Search Input" trigger="manual"
                      data-content="
                      <form class='form'>
                        <div class='controls'>
                          <label class='control-label'>Label Text</label> <input class='input-large' type='text' name='label' id='label'>
                          <label class='control-label'>Options: </label>
                          <textarea style='min-height: 200px' id='option'> </textarea>
                          <hr/>
                          <button class='btn btn-info'>Save</button><button class='btn btn-danger'>Cancel</button>
                        </div>
                      </form>"
                      >

                      <!-- Select Basic -->
                      <label class="control-label valtype" data-valtype="label">Select - Basic</label>
                      <div class="controls">
                        <select class="input-xlarge valtype" data-valtype="option">
                          <option>Enter</option>
                          <option>Your</option>
                          <option>Options</option>
                          <option>Here!</option>
                        </select>
                      </div>

                    </div>

                    <div class="control-group component" rel="popover" title="Search Input" trigger="manual"
                      data-content="
                      <form class='form'>
                        <div class='controls'>
                          <label class='control-label'>Label Text</label> <input class='input-large' type='text' name='label' id='label'>
                          <label class='control-label'>Options: </label>
                          <textarea style='min-height: 200px' id='option'></textarea>
                          <hr/>
                          <button class='btn btn-info'>Save</button><button class='btn btn-danger'>Cancel</button>
                        </div>
                      </form>"
                      >

                      <!-- Select Multiple -->
                      <label class="control-label valtype" data-valtype="label">Select - Multiple</label>
                      <div class="controls">
                        <select class="input-xlarge valtype" multiple="multiple" data-valtype="option">
                          <option>Enter</option>
                          <option>Your</option>
                          <option>Options</option>
                          <option>Here!</option>
                        </select>
                      </div>
                    </div>

                  </div>

                  <div class="tab-pane" id="3">

                    <div class="control-group component" rel="popover" title="Multiple Checkboxes" trigger="manual"
                      data-content="
                      <form class='form'>
                        <div class='controls'>
                          <label class='control-label'>Label Text</label> <input class='input-large' type='text' name='label' id='label'>
                          <label class='control-label'>Options: </label>
                          <textarea style='min-height: 200px' id='checkboxes'> </textarea>
                          <hr/>
                          <button class='btn btn-info'>Save</button><button class='btn btn-danger'>Cancel</button>
                        </div>
                      </form>"
                      >
                      <label class="control-label valtype" data-valtype="label">Checkboxes</label>
                      <div class="controls valtype" data-valtype="checkboxes">

                        <!-- Multiple Checkboxes -->
                        <label class="checkbox">
                          <input type="checkbox" value="Option one">
                          Option one
                        </label>
                        <label class="checkbox">
                          <input type="checkbox" value="Option two">
                          Option two
                        </label>
                      </div>

                    </div>

                    <div class="control-group component" rel="popover" title="Multiple Radios" trigger="manual"
                      data-content="
                      <form class='form'>
                        <div class='controls'>
                          <label class='control-label'>Label Text</label> <input class='input-large' type='text' name='label' id='label'>
                          <label class='control-label'>Group Name Attribute</label> <input class='input-large' type='text' name='name' id='name'>
                          <label class='control-label'>Options: </label>
                          <textarea style='min-height: 200px' id='radios'></textarea>
                          <hr/>
                          <button class='btn btn-info'>Save</button><button class='btn btn-danger'>Cancel</button>
                        </div>
                      </form>"
                      >
                      <label class="control-label valtype" data-valtype="label">Radio buttons</label>
                      <div class="controls valtype" data-valtype="radios">

                        <!-- Multiple Radios -->
                        <label class="radio">
                          <input type="radio" value="Option one" name="group" checked="checked">
                          Option one
                        </label>
                        <label class="radio">
                          <input type="radio" value="Option two" name="group">
                          Option two
                        </label>
                      </div>

                    </div>

                    <div class="control-group component" rel="popover" title="Inline Checkboxes" trigger="manual"
                      data-content="
                      <form class='form'>
                        <div class='controls'>
                          <label class='control-label'>Label Text</label> <input class='input-large' type='text' name='label' id='label'>
                          <textarea style='min-height: 200px' id='inline-checkboxes'></textarea>
                          <hr/>
                          <button class='btn btn-info'>Save</button><button class='btn btn-danger'>Cancel</button>
                        </div>
                      </form>"
                      >
                      <label class="control-label valtype" data-valtype="label">Inline Checkboxes</label>

                      <!-- Multiple Checkboxes -->
                      <div class="controls valtype" data-valtype="inline-checkboxes">
                        <label class="checkbox inline">
                          <input type="checkbox" value="1"> 1
                        </label>
                        <label class="checkbox inline">
                          <input type="checkbox" value="2"> 2
                        </label>
                        <label class="checkbox inline">
                          <input type="checkbox" value="3"> 3
                        </label>
                      </div>

                    </div>

                    <div class="control-group component" rel="popover" title="Inline radioes" trigger="manual"
                      data-content="
                      <form class='form'>
                        <div class='controls'>
                          <label class='control-label'>Label Text</label> <input class='input-large' type='text' name='label' id='label'>
                          <label class='control-label'>Group Name Attribute</label> <input class='input-large' type='text' name='name' id='name'>
                          <textarea style='min-height: 200px' id='inline-radios'></textarea>
                          <hr/>
                          <button class='btn btn-info'>Save</button><button class='btn btn-danger'>Cancel</button>
                        </div>
                      </form>"
                      >
                      <label class="control-label valtype" data-valtype="label">Inline radios</label>
                      <div class="controls valtype" data-valtype="inline-radios">

                        <!-- Inline Radios -->
                        <label class="radio inline">
                          <input type="radio" value="1" checked="checked" name="group">
                          1
                        </label>
                        <label class="radio inline">
                          <input type="radio" value="2" name="group">
                          2
                        </label>
                        <label class="radio inline">
                          <input type="radio" value="3">
                          3
                        </label>
                      </div>
                    </div>

                  </div>

                  <div class="tab-pane" id="4">
                    <div class="control-group component" rel="popover" title="File Upload" trigger="manual"
                      data-content="
                      <form class='form'>
                        <div class='controls'>
                          <label class='control-label'>Label Text</label> <input class='input-large' type='text' name='label' id='label'>
                          <hr/>
                          <button class='btn btn-info'>Save</button><button class='btn btn-danger'>Cancel</button>
                        </div>
                      </form>"
                      >
                      <label class="control-label valtype" data-valtype="label">File Button</label>

                      <!-- File Upload -->
                      <div class="controls">
                        <input class="input-file" id="fileInput" type="file">
                      </div>
                    </div>

                    <div class="control-group component" rel="popover" title="Search Input" trigger="manual"
                      data-content="
                      <form class='form'>
                        <div class='controls'>
                          <label class='control-label'>Label Text</label> <input class='input-large' type='text' name='label' id='label'>
                          <label class='control-label'>Button Text</label> <input class='input-large' type='text' name='label' id='button'>
                          <label class='control-label' id=''>Type: </label>
                          <select class='input' id='color'>
                            <option id='btn-default'>Default</option>
                            <option id='btn-primary'>Primary</option>
                            <option id='btn-info'>Info</option>
                            <option id='btn-success'>Success</option>
                            <option id='btn-warning'>Warning</option>
                            <option id='btn-danger'>Danger</option>
                            <option id='btn-inverse'>Inverse</option>
                          </select>
                          <hr/>
                          <button class='btn btn-info'>Save</button><button class='btn btn-danger'>Cancel</button>
                        </div>
                      </form>"
                      >
                      <label class="control-label valtype" data-valtype="label">Button</label>

                      <!-- Button -->
                      <div class="controls valtype"  data-valtype="button">
                        <button class='btn btn-success'>Button</button>
                      </div>
                    </div>
                  </div>

                  <div class="tab-pane" id="5" name="textsource">
                    <textarea id="source" class="span6"></textarea>
                  </div> 
```

在这个 div`id="5"`中，它正在获取动态数据。现在我想将这个 textarea 转移`id="5"`到另一个名为`sub.html.twig`. 我应该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-06-23T15:15:04.207

在 Symfony 2.3 之后

```
{{ render(controller( 'BloggerBlogBundle:Comment:new', { 'blog_id': blog.id } )) }} 
```

在 Synfony 2.3 之前

```
{% render 'BloggerBlogBundle:Comment:new' with { 'blog_id': blog.id } %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T10:12:35.117

您必须使用导入或嵌入标签：

[在模板中导入](http://twig.sensiolabs.org/doc/tags/import.html)包含内容，无需任何操作（不再执行任何操作，只需“绘制”）

```
{% include 'Bundle:Folder:template.html.twig' with {} %} 
```

[在模板中嵌入](http://twig.sensiolabs.org/doc/tags/embed.html)加载内容并执行加载路由的控制器（性能更昂贵，小心）

```
{% embed 'Bundle:Controller:template.html.twig' with {} %} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T07:28:09.643

如果您要从 Controller 渲染数据，例如

```
 <div class="tab-pane" id="5" name="textsource">
                <textarea id="source" class="span6">{{ yourtext }}</textarea>
              </div> 
```

然后你可以包含子模板并使用传递这个变量`with`

```
{% include 'YourBundle:YourFolder:sub.html.twig' with {'yourTextTwigVariable': yourtext} %} 
```

# ios - 如何在 iOS 上快速从 RGB24 转换为 BGRA？

> ID：11699151
> 
> 赞同：-3
> 
> 时间：2012-07-28T07:24:25.897
> 
> 标签：ios, time, transform, rgb, rgba

我使用的是`vImageConvert_RGB888toARGB8888`and `vImagePermuteChannels_ARGB8888`。先从RGB24改成ARGB，因为OPENGL ES不支持ARGB，所以需要把ARGB改成BGRA用`vImagePermuteChannels_ARGB8888`. 但是当需要更改的数据很大时，时间成本很高，那么有人有更好的方法吗？谢谢！我的代码是这样的：

```
- (void)transformRGBToBGRA:(const UInt8 *)pict{
rgb.data = (void *)pict;

vImage_Error error = vImageConvert_RGB888toARGB8888(&rgb,NULL,0,&argb,NO,kvImageNoFlags);
if (error != kvImageNoError) {
    NSLog(@"vImageConvert_RGB888toARGB8888 error");
}

const uint8_t permuteMap[4] = {3,2,1,0};

error = vImagePermuteChannels_ARGB8888(&argb,&bgra,permuteMap,kvImageNoFlags);
if (error != kvImageNoError) {
    NSLog(@"vImagePermuteChannels_ARGB8888 error");
}

free((void *)pict);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T10:16:40.073

现在我发现最快的解决方案是组装。像这样：

```
__asm__ volatile(
                 "0:                \n"
                 "# load 3 64-bit regs with interleave: \n"
                 "vld3.8      {d0,d1,d2}, [%0]!   \n"
                 "# swap d0 and d2 - R and B\n"
                 "vswp d0, d2   \n"
                 "# store 4 64-bit regs: \n"
                 "vst4.8      {d0,d1,d2,d3}, [%2]!      \n"
                 "subs        %1, %1, #1       \n"
                 "bne         0b            \n"
                 :
                 : "r"(img), "r"(numPixels24), "+r"(bgraData)
                 : "r6", "r7","r8"
                 ); 
```

# jquery - 当我在选择框中选择时，我可以这样做，使用 jQuery 更新标题吗？

> ID：11699159
> 
> 赞同：1
> 
> 时间：2012-07-28T07:25:00.140
> 
> 标签：jquery

我有：

```
<select name="TopicID" id="TopicID">
  <option value="00">XX</option>
  <option value="02">YY</option>
</select> 
```

我怎样才能使当用户选择一个新值（例如“YY”）时，选择的标题会像这样更新：

```
<select title="YY" name="TopicID" id="TopicID">
  <option value="00">XX</option>
  <option value="02">YY</option>
</select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T07:30:47.257

```
$("#TopicID").on("change", function() {
    var select = $(this);
    select.attr("title", select.find(":selected").text());
}); 
```

[例子](http://jsfiddle.net/TVT4C/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T07:31:22.500

您可以绑定到[更改](http://api.jquery.com/change/)事件并更新`title`属性：

```
$("select").change(function() {
    $(this).attr("title", $("option:selected", this).text());
}); 
```

请注意，上面的代码使用[attr()](http://api.jquery.com/attr/)而不是[prop()](http://api.jquery.com/prop/)来强调我们正在创建或更新 HTML 属性而不是 DOM 属性。这只是一个偏好问题，使用`prop()`会导致相同的行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T07:33:20.433

尝试这个：

```
$('#TopicID').change(function () {
    $(this).attr('title', $('#TopicID option[value="' + this.value + '"]').text());
}); 
```

现场查看[http://jsfiddle.net/MAhmadZ/PpjwT/](http://jsfiddle.net/MAhmadZ/PpjwT/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T07:39:50.857

`var newtitle=$('#TopicID').val();
$('#TopicID').attr('title',newtitle);`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-28T07:29:34.007

也许是这样的：

```
$('#TopicID').change(function() {
    var selectedItem = $(this).val();
    $(this).attr('title', selectedItem);
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-28T07:32:34.843

它不是 jquery，但应该这样做。将以下代码的第一行添加到您的控件中，然后在脚本中添加后面的函数

```
onchange="SetTitle(this,this.value);"
function SetTitle(cntrl,val)
{
cntrl.setAttribut("title",val);
} 
```

# version-control - 两人团队的简单版本控制

> ID：11699160
> 
> 赞同：0
> 
> 时间：2012-07-28T07:25:29.270
> 
> 标签：version-control

什么免费的、网络托管的、非公开的版本控制系统最适合小型的两人项目（1 名程序员、1 名艺术家）？

它应该尽可能简单，加上理想情况下应该有一个适用于 Windows 的 GUI。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T10:40:40.733

使用[比特桶](https://bitbucket.org/)。

BitBucket 为 Git 和 Mercurial（最多 5 个用户）提供免费和私有的存储库设施。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T16:16:11.080

我现在正在[Assembla.com上试用免费的](http://www.assembla.com "assembla.com")*subversion*存储库。

与[Tortoise SVN](http://tortoisesvn.net "乌龟SVN")一起使用，这似乎非常简单。Tortoise 无缝集成到 Windows 资源管理器中。

# javascript - 在 PhoneGap 中打开新窗口/文档

> ID：11699163
> 
> 赞同：1
> 
> 时间：2012-07-28T07:25:41.560
> 
> 标签：javascript, html, cordova

使用以下代码，我可以在桌面浏览器上打开一个新窗口：

```
 var thisWin = window;
            var oauthWin = thisWin.open(data, 'twitter-oauth-window', 'location=0,status=0,width=800,height=400');
            var lastUrl = oauthWin.location.href;
            var meh = true;
            var oauthInt = thisWin.setInterval(
              function()
              {
                if (meh)
                {
                  alert(
                    '\noauthWin.closed: ' + oauthWin.closed +
                    '\noauthWin.location: ' + oauthWin.location +
                    '\nthisWin.closed: ' + thisWin.closed +
                    '\nthisWin.location: ' + thisWin.location +
                    '\noauthWin===thisWin: ' + (oauthWin === thisWin));
                  meh = false;
                }
                // do more stuff here
              }
            ); 
```

在警报内的调试输出中：

```
 oauthWin===thisWin: false 
```

这应该是什么。但是，当在 PhoneGap 中运行相同的代码时，我得到以下信息：

```
 oauthWin===thisWin: true 
```

这表明PhoneGap 已经在同一个窗口中打开了新的URL，替换了当前的HTML 文档。

我希望单独打开新的 URL，并且能够在满足特定条件时将其关闭，并恢复到旧 URL。

这可以在PhoneGap中实现吗？如何实现？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T06:26:37.163

现在使用 PhoneGap 2.3+，我无法以任何方式在 Mobile Safari 中打开 URL。使用 _blank 不起作用，我尝试了 window.open(url, '_blank')，但这现在使用 InAppBrowser 插件打开了 URL（这非常糟糕）。我觉得那个使用插件很有趣，所以我决定编写一个插件来使用在 iOS 应用程序中打开 URL 的标准方法来打开 URL。您可以在此处查看/获取有关[此要点的代码：https://gist.github.com/typeoneerror/5097118](https://gist.github.com/typeoneerror/5097118)。

这很简单。在我的示例中，我使用 jQuery 连接了具有名为“_blank”的类的链接，并使用插件调用打开了这些 URL：

```
// execute the plugin called OpenUrl, signature:
// exec(successCallback, errorCallback, pluginName, pluginMethod, params)
cordova.exec(success, error, "OpenUrl", "openUrl", [url]); 
```

我相信你可以为你需要的每个平台轻松地重写插件。这是 iOS 特定的。

# android - 在phonegap数据库表中插入数据？

> ID：11699165
> 
> 赞同：0
> 
> 时间：2012-07-28T07:25:53.553
> 
> 标签：android, cordova, sencha-touch, sencha-touch-2

在我的应用程序中，我想在表中插入值。我在**index.html**文件的**onDeviceReady()**方法中创建了数据库。

 **```
 <!DOCTYPE html>
<!-- Auto Generated with Sencha Architect -->
<!-- Modifications to this file will be overwritten. -->
<html>
<head>
<meta name="generator" content="HTML Tidy, see www.w3.org">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Teritree</title>
<script type="text/javascript" id="phonegap" src=
"cordova-2.0.0.js">
</script>

<script type="text/javascript" src="barcodescanner.js">
</script>

<script src="sencha-touch-all.js" type="text/javascript">
</script>

<link rel="stylesheet" type="text/css" href="app.css">
<script type="text/javascript" src="app/Ext.ux.touch.Rating.js">
</script>

<script type="text/javascript" src="app/app.js">
</script>

<script type="text/javascript">
        Ext.Loader.setConfig({ disableCaching: false });
        Ext.Ajax.setDisableCaching(false);    

</script>

<script type="text/javascript" charset="utf-8">

    var pictureSource;   // picture source
    var destinationType; // sets the format of returned value 
    var mydb;

    // Wait for PhoneGap to connect with the device
    function onLoad() {
        document.addEventListener("deviceready",onDeviceReady,false);
    }

    // PhoneGap is ready to be used!

    function onDeviceReady() {
        console.log("it is in ondevice ready method..");
        mydb = window.openDatabase("teritreeDb", "1.0", "TestDB", 10000);
        console.log("it is in ondevice ready method..1");
        mydb.transaction(populateDB, errorCB, successCB);
        console.log("it is in ondevice ready method..2");
   }

   function populateDB(tx) {
   console.log("it is in populateDB----------1");
     tx.executeSql('DROP TABLE IF EXISTS DEMO', function () {
         tx.executeSql('CREATE TABLE IF NOT EXISTS DEMO (id unique, data)', function () {
             console.log("Table created");
         });
     });

      // Transaction error callback
    //
    function errorCB(tx, err) {
        alert("Error processing SQL: "+err);
    }

    // Transaction success callback
    //
    function successCB() {
        alert("success!");
    }
}

</script>

<script type="text/javascript">
        if (!Ext.browser.is.WebKit) {
            alert("The current browser is unsupported.\n\nSupported browsers:\n" +
                "Google Chrome\n" +
                "Apple Safari\n" +
                "Mobile Safari (iOS)\n" +
                "Android Browser\n" +
                "BlackBerry Browser"
            );
        }

</script>
</head>
<body>
</body>
</html> 
```

现在我有一个注册屏幕，在注册屏幕上我有提交按钮。所以如果我点击提交按钮，所有的细节都应该存储在数据库中，意味着在 DEMO 表中。所以在控制器中，我正在编写按钮事件，

```
 onSubmitButtonTap : function(button, e, options) {

        mydb = window.openDatabase("appDb", "1.0", "Test DB", 1000000);
        mydb.transaction(storeCustomerDetails, error, success);

    function storeCustomerDetails(tx)
    {
        tx.executeSql('insert into DEMO (id,data) values("1","Hello")');
        tx.executeSql('insert into DEMO (id,data) values("2","Hello World")');
    }

    function error(){
        alert("data is not inserted");
    }
    function success(){
        alert("data is succesfully inserted");
    }
}, 
```

但它给了我警报，没有插入数据。我点击了链接：[Phonegap DB Link](http://docs.phonegap.com/en/1.0.0/phonegap_storage_storage.md.html#openDatabase)

请帮忙..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T05:29:30.880

使用 Cordova 2.0.0，您的问题将得到解决。您将能够在文件资源管理器中看到您创建的数据库。如果它对你有帮助，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T14:15:39.433

Arindam，不要忘记默认情况下 sql 的执行是异步的。因此，没有人保证您的 sql 将按照您在函数 populateDB(tx) 中定义的顺序执行。例如。它可以先执行创建而不是删除...

为了确保您必须在回调函数中定义后续调用的顺序

```
function populateDB(tx) {
     tx.executeSql('DROP TABLE IF EXISTS DEMO', function () {
         tx.executeSql('CREATE TABLE IF NOT EXISTS DEMO (id unique, data)', function () {
             console.log("Table created");
         });
     });
} 
```

干杯，奥列格**

# iphone - 中止，导航后监控下载，线程问题？

> ID：11699169
> 
> 赞同：0
> 
> 时间：2012-07-28T07:26:58.590
> 
> 标签：iphone, xcode, multithreading, progress-bar, nsurlconnection

我正在尝试解决我的应用程序中的最后一个问题，这对我来说是最大的。

![在此处输入图像描述](../Images/97c5f746fa73aa1768024fce6b8879b8.png)

我在屏幕截图中显示了这个 downloadView，我通过 NSURLConnection 从 Web 服务器异步下载文件/文档。

所有视图组件都可以完美运行（下载按钮、progressBarView、abortButton）等等。

当下载开始时，进度条会增加，我可以通过将连接设置为 nil 并将数据长度设置为零来完美地中止下载。

**:: 我的挑战性问题是 ::**

当在后台处理下载时，我单击“返回”按钮并导航回 firstView，然后导航回此 downloadView，我失去了对下载的访问权限。我不能再中止它或监视它。进度条重置为零。但是，我仍然可以看到下载正在通过 NSLog for progressBar.progress 运行。

我认为这个问题与保留视图和访问线程以及在按下“返回”按钮时保持 downladView 活动有关。

很抱歉写得太多，但我正在努力澄清这个问题。

这是显示我如何下载文件的基本代码。

```
-(IBAction)downloadButton:(id)sender{
urlLink= @"http://www.example.com/text.pdf";

NSURLRequest *request= [NSURLRequest requestWithURL:[NSURL URLWithString:urlLink] cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:10.0];

connectionbook = [[NSURLConnection alloc] initWithRequest:request delegate:self];
}
// using the regular delegate connectino methods
-(void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response{}

-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data{}

-(void)connectionDidFinishLoading:(NSURLConnection *)connection{} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T14:32:23.340

核心问题是，当您点击后退按钮时，视图控制器对象会被释放（或者应该），当您重新访问该视图时，您会从头开始创建另一个视图。

所以你有几个选择。让您返回的视图保持强大的参考，因此您在此处显示的视图永远不会真正解除分配。因此，您总是推动同一个对象。您需要保持一些状态来处理 viewWillAppear 等一直被调用的问题。

另一种解决方案是让其他一些持久对象保持连接，并为您的视图控制器提供一些方法来显示访问信息的进度。

另外两条评论。你说“我可以通过将连接设置为零并将数据长度设置为零来完美中止下载”，这不是正确的方法。当你想停止一个连接时，你发送它[conn cancel]，然后conn.delegate - nil，然后你就可以释放它了。

# iphone - 是否可以以编程方式关闭 iPhone 的静音模式？

> ID：11699176
> 
> 赞同：-2
> 
> 时间：2012-07-28T07:29:27.070
> 
> 标签：iphone, ios

> **可能重复：**
> [以编程方式使 iOS 设备静音/静音？](https://stackoverflow.com/questions/10371312/mute-silence-an-ios-device-programmatically)

是否可以以编程方式关闭 iPhone 的静音模式？我需要在不使用硬件的情况下打开和**关闭静音模式的选项。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T07:40:43.233

来自 developer.apple

> 全局系统卷，包括您的应用程序的卷，由 iPhone OS 处理，应用程序无法访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T08:14:40.073

如果可能的话，设备将处于不一致的状态：硬件静音模式按钮打开，但在软件静音模式下关闭。简而言之，用户体验地狱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T07:35:53.077

不，在 iPhone 上它只在硬件按钮上。

# facebook - 为什么我的 Facebook 应用请求没有出现在任何地方？

> ID：11699182
> 
> 赞同：1
> 
> 时间：2012-07-28T07:30:24.587
> 
> 标签：facebook, facebook-graph-api, koala

我正在尝试使应用程序请求正常工作并且惨遭失败。我同时使用 Koala graph.put_object（用于应用程序到用户）和 Facebook 的 JavaScript 对话框示例（用于用户到用户）。两者都在我得到请求 ID 的意义上起作用，但我从来没有看到请求出现在任何地方。我已经尝试开/关沙盒模式，将收件人用户添加为 App Tester，没有任何效果。

# input - 使用 SDL 从键盘读取输入的最佳方法是什么？

> ID：11699183
> 
> 赞同：10
> 
> 时间：2012-07-28T07:30:24.363
> 
> 标签：input, keyboard, sdl

我`update()`每秒运行 n 次方法来“更新”用户的键盘输入，以便稍后在程序的逻辑部分中读取它。所以我在 SDL Docs 中找到了两种实现方法，但我不确定应该使用哪一种。

1个；循环使用 SDL_PollEvent 搜索按键按下/向上事件并将按键状态保存在地图中的所有事件，以便我可以检查程序逻辑中的每个按键状态。

注意：或者，我也可以使用 SDL_PeepEvents 而不是 SDL_PollEvent 来仅获取重要的事件类型；因此，它不会“丢弃”队列中的事件。

```
std::map<int, bool> keyboard; // Saves the state(true=pressed; false=released) of each SDL_Key.

void update()
{
    SDL_Event event;
    while( SDL_PollEvent(&event))
    {
        switch(event.type)
        {
        case SDL_KEYDOWN:
            keyboard[event.key.keysym.sym] = false;
            break;
        case SDL_KEYUP:
            keyboard[event.key.keysym.sym] = true;
            break;
        }
    }
} 
```

2；每帧从键盘上拍一张快照，以便我可以轻松阅读。

```
Uint8* keyboard;

void update()
{
    SDL_PumpEvents();
    keyboard = SDL_GetKeyState(NULL);
} 
```

使用上述任何实现，我都可以`keyboard`这样阅读：

```
if (key_map[SDLK_Return]) printf("Return has been pressed."); 
```

另外，还有其他方法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-28T19:39:09.780

我更喜欢做 1 的变体，我填充三个数组，不仅指示当前状态，还指示哪些键刚刚下降，哪些键刚刚上升。这使我可以轻松地检查代码中的这些事件（无需与之前的快照进行比较），但最重要的是，它不会错过持续时间少于一帧的事件。例如，如果您的游戏由于机器速度慢而以 10 fps 运行，则用户可能会在两次调用更新例程之间按下并释放一个重要键，然后您的系统将永远不会注册它。这非常令人沮丧。

SDL 还会在按键被按下时发送按键事件，这样您就可以为每个按键设置多个按键事件。我发现这在通过项目列表实现键盘滚动时特别有用，例如键盘控制的菜单。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-28T08:24:04.587

您应该使用解决方案 2。

为什么？正如[`SDL_GetKeyState()`](http://sdl.beuc.net/sdl.wiki/SDL_GetKeyState)文档指出的那样，在使用它之前，您应该调用[`SDL_PumpEvents()`](http://sdl.beuc.net/sdl.wiki/SDL_PumpEvents)以更新状态数组。

当您调用[`SDL_PollEvent()`](http://sdl.beuc.net/sdl.wiki/SDL_PollEvent)时，它会隐式调用`SDL_PumpEvents()`. 因此，`SDL_GetKeyState()`无论如何它基本上都会更新数组。通过手动解析这些事件，您只需创建第二个数组（实际上是一个*慢得多的*地图），其中包含 SDL 已经为您收集的相同信息。

所以，我敢说第一个解决方案意味着两次做同样的事情。而且，如果您决定支持诸如重复击键 ( [SDL_EnableKeyRepeat()](http://sdl.beuc.net/sdl.wiki/SDL_EnableKeyRepeat) ) 之类的功能，那么您将重新实现 SDL 的更大部分。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-02-27T01:48:50.467

我意识到这个问题已经很老了，但我的回答可能会让某人受益。就个人而言，我使用两个数组`SDL_GetKeyState`。我存储一个数组保存当前帧的键盘状态，一个数组保存最后一帧的键盘状态。（使用一些`memcpy`命令，更新它们真的很容易。）除了这两个数组，我还有一个映射，可以将“A”之类的字符串转换为 SDL 扫描码值，但这是可选的。

然后，当您需要检查是否有东西被释放或按下时，您可以将两个数组结合起来进行检查。（我把它变成了一个函数。）例如，如果您知道该键在这一帧被按下，但在上一帧没有被按下，那么显然只是在这一帧被按下。`if (currentFrame["A"] == true && lastFrame["A"] == false) {/*just pressed*/}`

然后你会为释放做相反的事情。我发现该方法非常易于实施和使用。

# c# - MaxReceivedMessageSize 属性的最大值

> ID：11699184
> 
> 赞同：0
> 
> 时间：2012-07-28T07:30:26.003
> 
> 标签：c#, .net, wcf

我使用 WCF 服务连接并从服务器检索数据，但在增加`MaxReceivedMessageSize`属性后`app.conf`，我得到了这个异常：

> 该工厂缓冲消息，因此消息大小必须在整数值范围内。参数名称：value.MaxReceivedMessageSize

财产有没有限制`MaxReceivedMessageSize`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T07:36:27.777

MaxReceivedMessageSize 的限制是 Int64.MaxValue

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T07:32:58.647

您没有阅读错误吗？

`message sizes must be in the range of an integer value.`

# eclipse - Eclipse + Git - 如何获取工具栏？

> ID：11699186
> 
> 赞同：16
> 
> 时间：2012-07-28T07:30:37.263
> 
> 标签：eclipse, git, eclipse-plugin, egit

我已经安装了 Eclipse 3.7.2 并且工作正常。我安装了 git 插件（见下文）。

![我安装的软件](../Images/67357271446b2d8cda49fd6967bb96ee.png)

右键单击我的活动项目并单击“团队”为我提供了拉/推/提交等选项。

我已将我的 git 可执行文件设置为 msysgit (C git)。

文档告诉我，要将 git 添加到我应该查看的工具栏`Window->Customize Perspective...`，但我无法在其中找到与 git 相关的任何内容，甚至在“命令组可用性”部分下也不行。

**如何向我的 Eclipse 工具栏添加推送、拉取和提交按钮？**

![那里没有Git](../Images/07edd81fe17e470aeff1ee78f23de3bc.png)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-02-21T22:06:52.010

偶然发现了这个答案，但发现这有效：

安装 Egit 插件，在 Customize Perspective|Command Groups Availability 中添加 Git 命令组，而不是（几乎没用的）“Team”，然后[在 Customize Perspective|Tool Bar Visibility 中选中“Git”](http://www.vogella.com/tutorials/EclipseGit/article.html#egitconfiguration_toolbar)

[![http://www.vogella.com/tutorials/EclipseGit/images/xgit_toolbar10.png.pagespeed.ic.7xMapnhWrH.png](../Images/61b1c4d1f9de2f049c95822f9c07151d.png)](https://i.stack.imgur.com/V2LGQ.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T18:17:15.590

[首先从http://download.eclipse.org/egit/updates](http://download.eclipse.org/egit/updates)安装 EGit 。然后你应该找到 Git 命令组并能够激活它。msysgit 没有与 Eclipse 集成。

请参阅“[激活 Git 工具栏](http://www.vogella.com/tutorials/EclipseGit/article.html#egitconfiguration_toolbar)”

[![http://www.vogella.com/tutorials/EclipseGit/images/xgit_toolbar10.png.pagespeed.ic.7xMapnhWrH.png](../Images/1d03c17c3a46880a32faaf7ffaf40719.png)](https://i.stack.imgur.com/k2aHZ.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T13:28:53.870

没有任何效果，我开始在启动时遇到一个不相关的错误，需要重新安装故障排除步骤。

这次我下载[了 Eclipse for Mobile Developers](http://www.eclipse.org/downloads/packages/eclipse-mobile-developers/junor)，从那以后我添加了我的其他包并且一切正常，但是单击提交内容并单击箭头以合并我的更改（带注释）没有任何结果。

它没有提交，也没有给出错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-27T13:38:32.777

1.  使用新的工作场所安装新的 eclipse 副本
2.  安装 egit
3.  在工具栏中显示 egit（从自定义角度等....）
4.  `\.metadata\.plugins\org.eclipse.e4.workbench\workbench.xmi`从新安装的工作场所复制到您当前的工作场所

您将丢失布局的一些位置设置，但大多数设置将被保留，最重要的是，您将在当前工作场所的工具栏中拥有 egit。

如果你愿意，你可以分析/比较文件`workbench.xmi`，看看你必须设置什么来获取工具栏；对我来说已经足够了（很可能工作场所来自以前版本的 eclipse，并且 egit/eclipse 不会更新这个 xml 文件）

# android - 在 android 应用程序中实现类似 Google Play 的导航

> ID：11699189
> 
> 赞同：4
> 
> 时间：2012-07-28T07:31:23.933
> 
> 标签：android, android-layout

我目前正在重新设计我的 android 应用程序的 UI。只是为了让用户易于使用，我想实现类似于 google play 的顶部导航。此外，我将 android SDk v2.2 定位为我的应用程序使用的最少 sdk 版本。

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T04:46:30.270

您应该查看[此博客](http://www.pushing-pixels.org/2011/08/11/android-tips-and-tricks-swipey-tabs.html)（来自一位在 Google Play 上工作的 Google 工程师），还有一些关于 Google Play 应用程序设计的其他帖子。

要处理返回 Froyo 的 android SDK，您需要使用[支持库](http://developer.android.com/tools/extras/support-library.html)、 [ActionBarSherlock](http://actionbarsherlock.com/)和[ViewPagerIndicator](http://viewpagerindicator.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T08:58:47.660

我相信这就是您正在寻找的[Sherlock ActionBar](http://actionbarsherlock.com/ "夏洛克操作栏")。这是 Google Play 中的示例演示，您可以尝试一下[Sherlock ActionBar 示例演示](https://play.google.com/store/apps/details?id=com.actionbarsherlock.sample.demos&hl=en "示例演示")

这个库从 Android 1.6 开始工作。

# java - 如何检查数据库中是否存在表或列？

> ID：11699205
> 
> 赞同：15
> 
> 时间：2012-07-28T07:35:17.133
> 
> 标签：java, mysql, database

我正在尝试制作简单的 java 代码来检查 MySQL DB 中是否存在表和/或列。我应该使用 Java 代码进行检查还是创建一个 SQL 查询字符串并执行它来进行检查？

编辑-

@aleroot-

我尝试使用您的代码，如下所示。当我运行下面的代码时，我没有看到任何表格或列。我只看到这个-

```
Driver Loaded.
Got Connection. 
```

我的数据库有很多数据库、表和列。我不知道为什么这个程序可以正常工作。

```
import java.sql.Connection;
import java.sql.DatabaseMetaData;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.Statement;

    public class Tester {
  static Connection conn;
  static Statement st;
  public static void main(String[] args) throws Exception {
    try {
  // Step 1: Load the JDBC driver.
  System.out.println("Driver Loaded.");
  // Step 2: Establish the connection to the database.
  String url = "jdbc:mysql://localhost:3306/";

  conn = DriverManager.getConnection(url, "cowboy", "123456");
  System.out.println("Got Connection.");

  st = conn.createStatement();
} catch (Exception e) {
  System.err.println("Got an exception! ");
  e.printStackTrace();
  System.exit(0);
}

DatabaseMetaData md2 = conn.getMetaData();
ResultSet rsTables = md2.getColumns(null, null, "customers", "name");
 if (rsTables.next()) {
      System.out.println("Exists !");
    }
  }

} 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-07-28T08:23:39.487

要检查表是否存在，您可以通过以下方式使用[DatabaseMetaData](http://docs.oracle.com/javase/6/docs/api/java/sql/DatabaseMetaData.html)：

```
DatabaseMetaData md = connection.getMetaData();
ResultSet rs = md.getTables(null, null, "table_name", null);
if (rs.next()) {
  //Table Exist
} 
```

要检查列是否存在，您可以以类似的方式使用它：

```
DatabaseMetaData md = connection.getMetaData();
ResultSet rs = md.getColumns(null, null, "table_name", "column_name");
 if (rs.next()) {
      //Column in table exist
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T07:48:02.790

```
SELECT * FROM INFORMATION_SCHEMA.COLUMNS 
WHERE TABLE_SCHEMA='table_schema'
  AND TABLE_NAME='table_name' 
  AND COLUMN_NAME='column_name' 
```

如果此 sql 不返回任何内容 - 列不存在。您可以在 java 端执行此查询，但这取决于您使用什么（JPA、JDBC、JDBCTemplate）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T07:45:12.030

知道您实际上可以使用以下 SQL 语句（在 MySQL 中）从表中选择一列：

```
show columns from TABLE_NAME where field = 'FIELD_NAME'; 
```

您可以执行以下操作：

```
...
PreparedStatement preparedStatement =
  connection.prepareStatement(
    "show columns from [TABLE_NAME] where field = ?");
preparedStatement.setString(1, columName);

ResultSet resultSet = preparedStatement.executeQuery();

if (resultSet.next()) {
    System.out.println("column exists!");
} else {
    System.out.println("column doesn't exists!");
}
... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-21T22:15:45.460

在 Apache 德比 (SQL) 中

例如检查列是否存在：

```
SELECT ss.SCHEMANAME, st.TABLENAME, sc.COLUMNNAME FROM SYS.SYSSCHEMAS ss
INNER JOIN SYS.SYSTABLES st ON st.SCHEMAID = ss.SCHEMAID AND st.TABLENAME = <YOUR TABLE NAME>
INNER JOIN SYS.SYSCOLUMNS sc ON sc.REFERENCEID = st.TABLEID AND sc.COLUMNNAME = <YOUR COLUMN NAME>
WHERE ss.SCHEMANAME = <YOUR SCHEMA> 
```

# android - 无法让操作栏中的搜索视图工作

> ID：11699206
> 
> 赞同：67
> 
> 时间：2012-07-28T07:35:23.173
> 
> 标签：android, android-actionbar, searchview

我对 java 和 android 开发很陌生；我一直在开发一个应用程序，我想要一个带有`SearchView`. 我看过谷歌的例子，但我无法让它工作。我一定是做错了什么，我即将放弃应用程序开发：DI 已经搜索过，但我没有发现任何有用的东西。也许你们可以帮助我:)

**问题**：我让搜索视图按原样打开，但在那之后什么都没有发生，我注意到我的*searchManager.getSearchableInfo(getComponentName())*返回 null。此外，我给出的提示也没有显示在我的搜索框中，这让我相信应用程序可能找不到我的 searchable.xml？说得够多了：）

**MainActivity.java**

```
public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);

        // Get the SearchView and set the searchable configuration
        SearchManager searchManager =
            (SearchManager) getSystemService(Context.SEARCH_SERVICE);
        SearchView searchView =
            (SearchView) menu.findItem(R.id.menu_search).getActionView();
        searchView.setSearchableInfo(
            searchManager.getSearchableInfo(getComponentName()));

        return true;
    }
} 
```

**可搜索的.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<searchable xmlns:android="http://schemas.android.com/apk/res/android"
    android:hint="@string/search_hint"
    android:label="@string/app_label">
</searchable> 
```

**安卓清单**

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.searchapp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="14"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >

        <activity android:name=".SearchableActivity" >
            <intent-filter>
                <action android:name="android.intent.action.SEARCH" />
            </intent-filter>
        </activity>

        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>           
        </activity>

        <meta-data android:name="android.app.searchable"
                   android:resource="@xml/searchable"/>          

    </application>

</manifest> 
```

**SearchableActivity.java**

```
package com.example.searchapp;

import android.app.ListActivity;
import android.app.SearchManager;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;

public class SearchableActivity extends ListActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.search);

        // Get the intent, verify the action and get the query
        Intent intent = getIntent();
        if (Intent.ACTION_SEARCH.equals(intent.getAction())) {
          String query = intent.getStringExtra(SearchManager.QUERY);
          doMySearch(query);
        }
    }

    private void doMySearch(String query) {
        Log.d("Event",query);
    }
} 
```

这是一个指向所推荐项目的链接，如果有人能帮助我，我将永远感激不尽！

[源代码](https://www.dropbox.com/sh/z0amwhu16y1essw/Tjko051u9x/SearchApp.rar)

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2012-07-28T21:07:09.560

您的问题出在您的 AndroidManifest 中。我几乎和你一样拥有它，因为这是我在文档之后得到的。但它不清楚或错误。

在查看 API Demos 源代码时，我发现“android.app.searchable”元数据必须进入您的“结果”活动，并且在主活动（或放置 SearchView 的活动）中，您使用“指向另一个活动” android.app.default_searchable”。

您可以在以下文件中看到它，这是我的测试项目中的清单：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.test"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>

        <meta-data
            android:name="android.app.default_searchable"
            android:value=".SearchActivity" />
    </activity>
    <activity
        android:name=".SearchActivity"
        android:label="@string/app_name" >

        <!-- This intent-filter identifies this activity as "searchable" -->

        <intent-filter>
            <action android:name="android.intent.action.SEARCH" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>

        <!-- This metadata entry provides further configuration details for searches -->
        <!-- that are handled by this activity. -->

        <meta-data
            android:name="android.app.searchable"
            android:resource="@xml/searchable" />
    </activity>
</application> 
```

searchable.xml 中的提示和标签是引用，而不是硬编码字符串，这一点也很重要。

我希望它能解决你的问题。我花了一整天的时间才弄清楚:(

* * *

## 回答 #2

> 赞同：83
> 
> 时间：2014-08-26T06:51:02.783

Android 指南明确表示：

```
// Assumes current activity is the searchable activity
searchView.setSearchableInfo(searchManager.getSearchableInfo(getComponentName())); 
```

在你的情况下这是不正确的。因为您不想在 MainActivity 中搜索，而是在 SearchableActivity 中搜索。这意味着您应该使用此 ComponentName 而不是 getComponentName() 方法：

```
ComponentName cn = new ComponentName(this, SearchableActivity.class);
searchView.setSearchableInfo(searchManager.getSearchableInfo(cn)); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-03-31T23:45:08.587

此外，似乎 android:hint 和 android:label 属性都**必须**是对 strings.xml 中字符串的引用。懒惰和硬编码字符串值似乎根本不起作用:)

即不要这样做：

```
<?xml version="1.0" encoding="utf-8"?>
<searchable xmlns:android="http://schemas.android.com/apk/res/android"
    android:hint="Search for something..."
    android:label="My App">
</searchable> 
```

但肯定会这样做（正如 OP 正确所做的那样）：

```
<?xml version="1.0" encoding="utf-8"?>
<searchable xmlns:android="http://schemas.android.com/apk/res/android"
    android:hint="@string/search_hint"
    android:label="@string/app_label">
</searchable> 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-05-02T14:35:53.093

如果您使用的是 Android Studio，

```
<meta-data
            android:name="android.app.default_searchable"
            android:value=".SearchActivity" /> 
```

部分可能不起作用。

写完整的包名，比如

```
<meta-data
                android:name="android.app.default_searchable"
                android:value="com.example.test.SearchActivity" /> 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-07-08T07:46:01.840

小心“xml/searchable.xml”。如果您使用 和 进行了硬编码`android:hint`，`android:label`它将无法正常工作。哈哈 应该是：

```
<searchable xmlns:android="http://schemas.android.com/apk/res/android"
android:hint="@string/app_name"
android:label="@string/search_lb"
android:voiceSearchMode="showVoiceSearchButton|launchRecognizer"/> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-09-30T14:50:03.707

确保您的`searchables.xml`文件位于正确的位置（即在您的`res/xml/`文件夹中）并且同一文件不包含任何错误 - 否则您会发现它`(SearchManager)getSystemService(Context.SEARCH_SERVICE).getSearchableInfo(componentName)`会返回 null，从而破坏您的搜索功能。

（另外，请确保您`componentName`以适当的方式进行设置，因为 Android 指南中显示的示例仅适用于您在同一 Activity 中进行搜索和显示搜索的情况。）

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-12-12T10:26:30.713

实际上不需要使用上面答案中描述的“缺失部分”。这种方法（使用 a `SearchView`）与官方文档所说的完全一样，直到[Using the Search widget](http://developer.android.com/guide/topics/search/search-dialog.html#UsingSearchWidget)。这里需要稍作修改如下：

a 中的属性`SearchableInfo`用于显示标签、提示、建议、创建用于启动搜索结果屏幕的意图以及控制其他功能，例如语音按钮 ( [docs](http://developer.android.com/reference/android/widget/SearchView.html#setSearchableInfo%28android.app.SearchableInfo%29) )。

因此，`SearchableInfo`我们传递给的对象`SearchView.setSearchableInfo(SearchableInfo s)`必须包含对应该显示的目标活动的正确引用以显示搜索结果。这是通过手动传递`ComponentName`我们的目标活动来完成的。一个用于创建 a 的构造函数`ComponentName`是

```
public ComponentName (String pkg, String cls) 
```

`pkg`和`cls`是要启动以显示搜索结果的目标活动的包名和类名。注意：

`pkg`必须指向项目的根包名，并且，

`cls`必须是类的完全限定名（即整个事物）

例如：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    // Get the SearchView and set the searchable configuration
String pkg = "com.example.musicapp"
String cls = "com.example.musicapp.search.SearchActivity"
ComponentName mycomponent = new ComponentName(pkg,cls);       
SearchManager searchManager =(SearchManager)getSystemService(Context.SEARCH_SERVICE);
SearchView searchView = (SearchView) menu.findItem(R.id.menu_search).getActionView();
searchView.setSearchableInfo(searchManager.getSearchableInfo(mycomponent));
searchView.setIconifiedByDefault(false);   //if using on actionbar
return true;
} 
```

根据您的要求，看看其他`ComponentName`构造函数。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-11-03T03:14:33.737

我在将这样的搜索意图过滤器添加到可搜索活动时遇到了同样的问题：

```
 <activity
        android:launchMode="singleTop"
        android:name=".ui.activities.MainActivity"
        android:label="@string/app_name"
        android:theme="@style/AppTheme.NoActionBar">

        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>

        <intent-filter>
            <action android:name="android.intent.action.SEARCH" />
        </intent-filter>

        <meta-data
            android:name="android.app.searchable"
            android:resource="@xml/searchable" />
    </activity> 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2014-12-11T02:47:20.597

仔细检查相应的条目（即 search_hint 和 app_label）是否存在于 values/strings.xml

例如

```
 <string name="app_label">FunApp</string>
      <string name="search_hint">Caps Off</string> 
```

# node.js - 如何在 Windows 上升级 node.js？

> ID：11699215
> 
> 赞同：68
> 
> 时间：2012-07-28T07:36:34.327
> 
> 标签：node.js

我已经在 Windows 上运行了 Node.js v0.8.0。我可以运行最新的安装程序将其升级到 v0.8.4 吗？恐怕它会破坏我机器上现有的第三方模块。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-07-28T10:25:21.913

是的，您只需安装最新版本。一般来说，如果您已经在使用相同的主要版本（例如版本 0.8.x），您应该不会有任何兼容性问题。如果您担心更改，您可以随时查看每个版本的更改日志（更改日志的链接位于 nodejs.org 的 node.js 下载页面上）。这应该告诉您任何重大变化（即 API 更改等）。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2013-07-24T10:26:10.563

作为记录，我刚刚经历了这个过程，即使你升级到另一个主要版本也没有痛苦。

我已经使用 .msi 包从 0.8 迁移到 0.10，覆盖了安装在我系统上的那个。包问题都用`npm update -g`. 像魅力一样工作。

*如果它不能像魅力一样工作：*

`npm cache clean`通常可以解决问题。一旦缓存为空，只需`npm update -g`再次运行。

*万一你真的遇到麻烦：*

删除您已全局安装的模块，然后重新安装它们。就是这样：

*   盘点你所拥有的： `npm list -g --depth=0`列出所有顶级包，以及版本号。 `npm list -g --parseable --depth=0 > npm-global-modules.txt`将它们写入 cwd 中的文件。

    您自己没有安装的任何奇怪的东西可能已经被另一个模块安装（很少见，但我已经看到它发生过）。从列表中删除这些模块。同时删除模块“npm”。

*   `\n?[^\n]+[\\/]`在编辑器中，通过将(regex) 替换为单个空格来格式化命令行的输出。

    （我没有[`findstr`](http://technet.microsoft.com/en-us/library/bb490907.aspx)在管道中使用它，因此往返于编辑器。当然，您也可以手动完成；）

*   删除所有模块。在 Windows 上，删除（或重命名）`%appdata%\npm`目录。对于其他操作系统，请参阅[命令以全局删除所有 npm 模块？](https://stackoverflow.com/q/9283472/508355)

*   使用 重新安装模块`npm install -g [your module list here]`。`npm cache clean`在你做之前不要忘记。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-28T10:30:36.637

我没有在 Windows 上使用节点的经验，但我刚刚在我的 Mac 上升级了节点和模块，所以这只是一个一般性的答案：

如果您安装 v0.8，您可能会破坏现有的节点模块，如果它们使用不推荐使用的功能等。问题是 npm 仅在安装模块时检查您的节点版本，而不是在运行时检查。

为了安全起见，您需要在您的机器上找到全局 node_modules 文件夹，将其备份到某个位置，然后删除并重新安装模块。您需要对正在使用的应用程序中的 node_modules 文件夹执行相同的操作。（假设您有 package.json 文件，重新安装这些文件应该很容易。）

在实践中，我不认为我使用的任何模块实际上是不兼容的。祝你好运。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-05-27T06:23:36.090

是的。[您可以通过在https://nodejs.org/en/](https://nodejs.org/en/)运行最新 node.js 版本的安装程序将 node.js 版本升级到最新版本。我运行安装程序将我的从 4.4.4 升级到 8.11.2。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-29T10:28:29.167

除非您使用的模块依赖于 0.8.0 中存在并由 0.8.4 修复的实际错误，否则您没问题。这两个版本之间没有 API 更改（节点团队太聪明了，无法在次要版本中引入此类更改）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-07-01T02:07:31.683

目前升级到 4.4.*。我刚习惯从 nodejs.org 网站安装，升级后一切正常。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-09-21T13:26:31.903

只需转到[nodejs 站点](https://nodejs.org/)并下载它。您可以毫不犹豫地直接安装它。如果您对早期版本有任何依赖关系，请检查更改日志。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-10-05T23:15:31.087

在 Windows 上安装节点的最佳方法是使用[nvm-windows](https://github.com/coreybutler/nvm-windows)，因此您可以根据需要在版本之间快速切换。这类似于在 linux 和 max 上安装节点的最佳方式，即使用[nvm](https://github.com/creationix/nvm)。

但是 Benjen 是对的（他怎么可能没有他所有的侦察经验），您可以安装不同版本的节点，并且您的版本会更新。您的 npm 依赖项可能必须重新安装，并且任何不受 npm 管理的扩展都可能需要重新编译，但无论您如何更改节点版本，这都是正确的。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-11-04T18:28:25.970

只是去

[nodejs.org](https://nodejs.org/en/)

安装最新的稳定版本（推荐给大多数用户）

然后运行

```
npm install node 
```

现在，你可以走了

您甚至可以使用命令检查 NodeJS 的版本

```
node --version 
```

# c# - 将图像保存为位图而不损失质量

> ID：11699219
> 
> 赞同：3
> 
> 时间：2012-07-28T07:37:37.260
> 
> 标签：c#, bitmap, graphic

我遇到了打印质量问题，我在此链接中进行了描述： [在此处输入链接描述](https://stackoverflow.com/questions/11644115/how-to-improve-printed-text-quality-after-using-graphics-drawstring)

我尝试了许多不同的解决方案来帮助其他有类似问题的人，但它们对我不起作用，因为我有一个将图像保存为位图的新问题（质量低）

最后我决定问我当前的问题，因为正如你在上面的链接中看到的，我的问题是在将图像保存到系统（96dpi）并恢复它之后开始的。但我没有办法，所以我正在寻找一种方法，可以在不损失质量的情况下保存图像（具有从图形中绘制的像素）。

提前谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-28T08:50:23.613

虽然 96 dpi 适合屏幕显示，但不适用于打印。对于打印，您至少需要 300 dpi 才能使其看起来清晰。

出于好奇，我创建了一个在 600 dpi 位图上打印文本的 C# 控制台应用程序。我想出了这个：

```
class Program
{
    public static void Main(string[] args)
    {
        const int dotsPerInch = 600;    // define the quality in DPI
        const double widthInInch = 6;   // width of the bitmap in INCH
        const double heightInInch = 1;  // height of the bitmap in INCH

        using (Bitmap bitmap = new Bitmap((int)(widthInInch * dotsPerInch), (int)(heightInInch * dotsPerInch)))
        {
            bitmap.SetResolution(dotsPerInch, dotsPerInch);

            using (Font font = new Font(FontFamily.GenericSansSerif, 0.8f, FontStyle.Bold, GraphicsUnit.Inch))
            using (Brush brush = Brushes.Black)
            using (Graphics graphics = Graphics.FromImage(bitmap))
            {
                graphics.Clear(Color.White);
                graphics.DrawString("Wow, I can C#", font, brush, 2, 2);
            }
            // Save the bitmap
            bitmap.Save("n:\\test.bmp");
            // Print the bitmap
            using (PrintDocument printDocument = new PrintDocument())
            {
                printDocument.PrintPage += (object sender, PrintPageEventArgs e) =>
                {
                    e.Graphics.DrawImage(bitmap, 0, 0);
                };
                printDocument.Print();
            }
        }
    }
} 
```

**这是打印的结果**

![这是打印结果：](../Images/dd05642760f378d2dedb35c3ec9335e4.png)

# c - main 和 main() 的区别

> ID：11699221
> 
> 赞同：0
> 
> 时间：2012-07-28T07:37:45.577
> 
> 标签：c, segmentation-fault

以下代码1很好

```
#include <stdio.h>    // code 1
main()
{
    printf("%u",main);
} 
```

但是这段代码 2 给出了分段错误。

```
#include <stdio.h>  // code 2
main()
{
    printf("%u",main());
} 
```

我不明白 main 和 main() 之间有什么区别？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T07:44:27.767

您是否使用编译器启用的所有警告进行编译？这`gcc`意味着将`-Wall`参数提供给`gcc`（并且`-g`对于调试信息很有用）。

首先，你`printf("%u", main)`应该是`printf("%p\n", main)`. 打印一个指针（从`%p`技术上讲，函数指针不是 所需的数据指针`%p`，实际上它们通常具有相同的大小和相似的表示形式），并且您应该以换行符结束格式字符串`\n`。这将获取函数的地址*并将*`main`该地址传递给`printf`.

然后，您的第二个`printf("%u", main())`是使用通过对函数的[递归调用](http://en.wikipedia.org/wiki/Recursion_%28computer_science%29)`printf`获得的参数进行调用。这种递归永远不会结束，而且你会炸毁你的调用堆栈（即堆栈溢出），所以在 Unix 上获得一个。`main``SIGSEGV`

迂腐地，`main`是*C*标准的一个非常特殊的名称，您可能不应该调用它（它是由 中的启动代码自动调用的`crt0.o`）。递归`main`是非常糟糕的，可能是非法的。

另请参阅我的其他[答案](https://stackoverflow.com/a/11698515/841108)。

# java - 以编程方式在 Linux ec2 实例和 Windows ec2 实例之间传输文件

> ID：11699222
> 
> 赞同：1
> 
> 时间：2012-07-28T07:37:51.720
> 
> 标签：java, windows, linux, amazon-ec2, file-transfer

我想将文件从 linux 实例发送到 windows 实例。然后在 Windows 实例中处理该文件后，我必须将文件发送回 linux 实例。我在两端都使用java。实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T07:46:58.347

最简单且最具成本效益的方法是创建一个[Amazon Elastic Block Store](http://aws.amazon.com/ebs/)，将其附加到两个实例，然后通过持久化磁盘执行所有文件 I/O 操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T06:07:53.690

您可以在 linux 操作系统上使用 samba。

1.  在 Windows 操作系统上共享目录
2.  允许 linux IP 对此进行访问（读写）
3.  用 samba 在 linux 上挂载这个目录

然后您现在可以在 Windows 操作系统上读取和写入文件。

# sql-server-2005 - 如何在 SQL Server 2005 中导入带双引号的数据

> ID：11699223
> 
> 赞同：0
> 
> 时间：2012-07-28T07:38:50.737
> 
> 标签：sql-server-2005, bulk-import

我必须导入包含双引号的数据的文本文件。实际上我已经创建了一个包含 aix 命令及其解释的文本文件。

现在命令包含双引号。因此，使用将批量数据导入 SQL Server 2005 的常规方法出现错误。

我的文本文件是这样的：

```
1,acledit "file",for changing the ACL(access control list) of a file
2,anacheck -ap,error analysing for Escala E + T
3,bsh,starts a born shell
4,cancel "print job number",for killing a print job
5,chgrp "group" "file",changes the group of a file
6,chitab "inittab statement",for disabling a statement of the /etc/inittab
7,chmod 0777 "file",gives everybody the right to read, write and execute the specified file
8,chown "user" "file",changes the owner of a file
9,compress -v "file",compresses a file
10,cplv,copies a logical volume (no mirroring) 
```

有人可以指导我如何在 SQL Server 2005 中导入这些数据吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T08:35:00.133

您可以使用如下所示的函数标量值函数将其编码为其他字符并存储它并在检索时对其进行解码。

```
 CREATE FUNCTION EncodeString 
     (@data as varchar(max))
      RETURNS varchar(max)AS 
     BEGIN
        DECLARE @result as varchar (max)
        SELECT @result = REPLACE(@data , '"','_')
        RETURN @result
      END 
```

上述函数返回`1,acledit _file_,for changing the ACL(access control list) of a file`您输入的数字 1。您可以使用任何其他 ASCII/unicode 代替`_`，另外您需要编写解码函数以用于检索和搜索功能。希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T08:59:01.800

`BULK INSERT`与`FIELDTERMINATOR`选项一起使用

```
bulk insert [yourtablename] from 'yourfilepath' with (fieldterminator = ',') 
```

# wpf - 使用绑定的 XML 文件从 ListView 中获取选定的值

> ID：11699226
> 
> 赞同：1
> 
> 时间：2012-07-28T07:39:41.627
> 
> 标签：wpf, xml, listview

我有一个`ListView`显示来自 XML 文件的数据的控件。但是`ListView`有`GridView`两个列的子项 - 图标和标题。这个想法是当我单击元素以仅从标题列中获取值时。相反，我得到了整个 XML 节点。

这是一个理论上的问题，但是如果您需要代码，我会提供它:)

谢谢你

更新：

XML 文件：

```
<list>
<item>
<title>demo</title>
<icon>icon.png</icon>
</item>
<item>
<title>demo2</title>
<icon>icon2.png</icon>
</item>
</list> 
```

XAML：

```
<Page.Resources>
        <XmlDataProvider x:Key="feed"
                         Source="http://feedurl/sites.xml"
                         XPath="list/item" />

        <DataTemplate x:Key="itemIcons">
            <Grid x:Name="ImageGrid">
                <Image Source="{Binding XPath=icon}" Width="40" Height="40"></Image>
            </Grid>
        </DataTemplate>
</Page.Resources> 
```

更多 XAML：

```
<ListView Name="myList" ItemContainerStyle="{StaticResource MyContainer}" 
                  SelectionChanged="clicked" FontSize="16" HorizontalAlignment="Left" 
                  Height="auto" ScrollViewer.VerticalScrollBarVisibility="auto" VerticalAlignment="Stretch" Width="240" 
                  BorderBrush="Transparent" BorderThickness="0" 
                  ItemsSource="{Binding Source={StaticResource feed}}" 
                  SelectionMode="Single" Margin="1,36,1,1">
            <ListView.View>
                <GridView>
                    <GridView.ColumnHeaderContainerStyle>
                        <Style>
                            <Setter Property="FrameworkElement.Visibility" Value="Collapsed"/>
                        </Style>
                    </GridView.ColumnHeaderContainerStyle>
                    <GridView.Columns>
                        <GridViewColumn x:Name="showIcon" CellTemplate="{StaticResource itemIcons}"/>
                        <GridViewColumn x:Name="showSites" DisplayMemberBinding="{Binding XPath=title}" Header="some header"/>
                    </GridView.Columns>
                </GridView>
            </ListView.View>
        </ListView> 
```

C＃：

```
private void clicked(object sender, SelectionChangedEventArgs e)
        {
            var title= this.myList.SelectedValue.ToString();
            //MessageBox.Show(title);
        } 
```

当我点击我的`ListView`项目时，我得到了标题和连接的图标节点，例如“demoicon.png”，我只想要“标题”值:)

提前致谢 ;）

# vb6 - 将框架及其元素设置为默认 vb6

> ID：11699230
> 
> 赞同：0
> 
> 时间：2012-07-28T07:40:37.783
> 
> 标签：vb6, frame, default

我必须在框架上做很多工作，我想知道是否可以快速设置一个框架，它的文本框、标签、进度条等......回到它们在 VB6 中的默认值。因为我现在唯一能做的就是在我将框架的可见设置为 false 时自己设置它们，所以我可以做任何事情。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T05:01:17.537

```
Option Explicit

'~~~ When a button is clicked..
Private Sub Command1_Click()
    Dim cntl As Control

    For Each cntl In Me.Controls '~~~ Loop through all the controls in the form

        If TypeOf cntl Is TextBox Then  '~~~ if the control is a TextBox..
            cntl.Text = ""              '~~~ ..set the Text as empty
        ElseIf TypeOf cntl Is ComboBox Or TypeOf cntl Is ListBox Then   '~~~ if the control is ComboBox/ListBox..
            cntl.Clear                  '~~~ ..clear the items
        ElseIf TypeOf cntl Is CheckBox Then '~~~ if the control is a CheckBox..
            cntl.Value = vbUnchecked        '~~~ ..uncheck it
        ElseIf TypeOf cntl Is OptionButton Then '~~~ if the control is an OptionButton(radio buttons)..
            cntl.Value = False                  '~~~ ..set it's value to False
        End If

    Next
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T07:58:38.290

尝试一个 for 循环并遍历表单上的每个控件以将其设置为默认值。像这样的东西。

将 Ctl 作为控件进行调暗

对于 me.controls 中的每个 Ctl ctl.value = ctl.defaultvalue next

干杯!

# tcp - 如何通过 vidalia tor 重定向 Windows 中的所有流量？

> ID：11699235
> 
> 赞同：7
> 
> 时间：2012-07-28T07:41:48.220
> 
> 标签：tcp, udp, traffic, tor

如何通过vidalia tor重定向Windows中的所有流量？我尝试使用 Proxifier，但它似乎只重定向选定的应用程序？但我需要重定向所有传出流量示例：

```
redirect all traffic from cmd.exe ping www.host.com; 
redirect all traffic from cmd.exe d:\python\python.exe inet.py -url "www.host.com" 
```

并通过 TOR 进行数据包。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-08T20:32:10.223

我认为您的建议称为透明的 tor 代理。我不建议在 Windows 上运行透明的 Tor 代理（因为 DNS 泄漏和其他安全问题）。

[一种解决方案，我认为最简单的解决方案是在运行OpenWRT](https://trac.torproject.org/projects/tor/wiki/doc/Torouter/OpenWRT_setup_notes)的路由器/交换机上设置一个透明的 tor 代理。如果您在第二个路由器上执行此操作（这是可选的），那么您可以在需要时使用第二个路由器。

另一种解决方案是使用运行 Linux 的虚拟机。我会推荐使用virtualbox。然后你可以在 virtualbox 上创建一个 linux 机器。虚拟机启动后，您可以将其设置为[透明的 tor 代理](https://trac.torproject.org/projects/tor/wiki/doc/TransparentProxy)。

如果您对 Linux 不满意，可以在虚拟机中使用[Tails 。](https://tails.boum.org/)Tails 是一个 Linux live DVD 或 live USB，它通过 tor 完成所有操作，并且可以在虚拟机上运行。

最后，如果您想发挥创造力，您可以设置一个虚拟机或第二台服务器，运行 Linux 和一个设置为透明 Tor 代理的 VPN 服务器。这可能需要两个虚拟网卡（而不是默认情况下的 1 个）。然后你需要做的就是从 Windows 机器 VPN 进入 Linux 机器，你的所有流量都将通过 Tor（：

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T06:42:01.533

您只能重定向 TCP 流量。TOR 不支持 UDP 流量（某些文件共享和游戏）和 ICMP 流量 (PING)。对于 TCP 流量，Cantormath 给出了正确答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-09T13:20:53.607

Tallow 似乎是一个很好的 Windows 解决方案：[https ://reqrypt.org/tallow.html](https://reqrypt.org/tallow.html)

# javascript - Google Chrome 扩展程序是否可以在使用 Javascript 打开的弹出窗口中工作？

> ID：11699237
> 
> 赞同：0
> 
> 时间：2012-07-28T07:42:03.417
> 
> 标签：javascript, google-chrome, google-chrome-extension

所以我正在努力创建一个扩展，该扩展需要在我的网站触发的弹出窗口中工作......标准Javascript......

```
function openwin(){
    window.open('http://stackoverflow.com','myname','height=100,width=100');
} 
```

现在我需要在该窗口中加载我的扩展程序。假设扩展程序的目的只是提醒一条消息，当我加载该窗口时 background.js 应该触发并执行此操作，对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T08:21:47.327

`chrome.windows.create(object createData, function callback)`

创建（打开）具有任何可选大小、位置或默认 URL 的新浏览器。

来自：[http ://code.google.com/chrome/extensions/windows.html#method-create](http://code.google.com/chrome/extensions/windows.html#method-create)

试试这个例子：

```
var props = {
    url: "http://www.stackoverflow.com",
    height: "100",
    width: "100",
    type: "popup"
}

chrome.windows.create(props, function(windowObj){
    console.log("Here's the window object.");
    console.dir(windowObj);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T09:16:05.710

这是我查看 API 后的答案。正如我所说，它检查正在创建的每个新窗口并检查该窗口的参数。这是代码，可以添加到您的扩展程序的 background.js 文件中：

```
chrome.windows.onCreated.addListener(function(win){
    chrome.windows.get(win.id,{populate:true},function(tabwin){
        setTimeout(function(){
            chrome.tabs.executeScript(tabwin.tabs[0].id,{code:"alert(JSON.stringify(window));",runAt:'document_idle'});
        },500);
    });
}); 
```

# android - chart 引擎上 x 轴上的自定义名称

> ID：11699245
> 
> 赞同：0
> 
> 时间：2012-07-28T07:44:24.947
> 
> 标签：android, achartengine

我是 android 应用程序开发的新手。我正在使用图表引擎动态生成图表，我的问题是我们可以在 x 轴上放置自定义名称，即我们可以放置国家名称而不是值，例如 10、20、30 等

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T17:08:10.190

当然可以，您必须设置自定义 x 轴标签：

```
renderer.addXTextLabel(x, text); 
```

删除默认值调用

```
renderer.setXLabels(0);
renderer.setYLabels(0); 
```

确保您使用的是 ACE 1.0.0。

# c# - 实体框架在大型数据集上的高效使用

> ID：11699250
> 
> 赞同：1
> 
> 时间：2012-07-28T07:45:01.000
> 
> 标签：c#, sql, performance, entity-framework-4

我的实体框架上下文中有一个大型数据集 -`table1`以及一个大型`List<T>`我需要在上面的 table1/list1 中计算相同的值。

我可以通过两种不同的方式做到这一点：

1.  `jointCollection=table1.union(list1)`- 并检查：值`list1.count+table1.count-jointCollection.count...`
2.  做依靠`select table1 with multi condition(list1.count)`

我的问题是哪种方法更有效？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T07:59:21.183

最好的解决方案是在运行每个分析器时运行 SQL 分析器并找出答案！

但是，如果效率是最重要的，我建议使用作为函数导入 EF 的存储过程，因为 Linq to Entities 会增加额外的开销。

# c - 为什么 main() 的缓冲区是本地的，然后无法显式关闭流是一个错误？

> ID：11699251
> 
> 赞同：2
> 
> 时间：2012-07-28T07:45:09.363
> 
> 标签：c, linux, buffer, systems-programming

我正在学习 linux 系统编程，O'reilly。它说“一个常见的错误是将缓冲区声明为在流关闭之前结束的范围内的自动变量。特别注意不要为 main() 提供本地缓冲区，然后无法显式关闭流。 "

然后它显示了一个错误的代码示例：

```
#include <stdio.h>
int main()
{
    char buf[BUFSIZ];

    /*set stdin to block-buffered with a BUFSIZ buffer*/
    setvbuf(stdout,buf,_IOFBF,BUFSIZ);
    printf("Arr!\n");
    return 0;

} 
```

我编译并执行代码..并不太明白这种代码会导致什么......请帮助我理解这个概念，谢谢大家。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T07:56:24.210

在该示例中，`stdout`将在`main`返回后刷新。

发生这种情况时，`buf`超出范围，您将无法再合法使用它。所以程序将表现出未定义的行为。

`buf`只要`stdout`是开放的就需要住，并且`stdout`经常保持开放直到`main`回来之后。因此，您应该使用全局、静态或堆分配的缓冲区。

# android - 折叠以前的活动并重新启动应用程序

> ID：11699255
> 
> 赞同：0
> 
> 时间：2012-07-28T07:45:23.433
> 
> 标签：android, android-activity, back, restart

我有一个 Android 应用程序，其中 activity A 调用 activity`B`调用 activity `C`。在活动中`C`中有重新启动整个事情的按钮，但如果他按下后退按钮，用户应该能够在活动之间导航。

我已经尝试`startActivityForResult(intent,int)`并一直发送关闭，但在这种情况下，如果用户单击后退按钮，它会折叠所有以前的活动，而不管是否按下活动上的重新启动按钮`C`。

任何人都知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T10:52:10.437

您可以使用[`setResult()`](http://developer.android.com/reference/android/app/Activity.html#setResult%28int%29). 例如，当用户在活动 C 中点击“重新启动”按钮时，您将结果代码设置为您的自定义代码（`10`例如）。在 A、B 中，您获取代码 (in [`onActivityResult()`](http://developer.android.com/reference/android/app/Activity.html#onActivityResult%28int,%20int,%20android.content.Intent%29)) 并处理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T08:11:29.913

我没有完全明白你的意思，

据我了解，您应该在每个活动的意图声明之前使用完成（）

# java - java中返回值的含义？

> ID：11699256
> 
> 赞同：1
> 
> 时间：2012-07-28T07:45:29.000
> 
> 标签：java, return, return-value

我是初学者，我在youtube上看一个教程，导师谈到了各种方法。他谈到了在 java 中返回值，但我对此一无所知。我将首先分享脚本，然后分享我的想法和疑问。

这是 class1 脚本：

```
import java.util.Scanner;
class class1{
public static void main(String args[]){
    System.out.println("This is class1.");
    Scanner x = new Scanner(System.in);
    System.out.print("Please enter the name of your first gf here:");
    String name = x.nextLine();

    class2 class2obj = new class2();
    class2obj.setname(name);
    class2obj.tellname();
}
} 
```

如您所见，它具有 main 方法，它的作用是：它首先询问您的第一个女朋友的姓名，然后将其存储在变量中`name`。然后它链接我将在此之后共享的 class2 脚本并在 class2 中执行 setname 方法。

`class2`脚本是：

```
class class2{
    private String girlname;
    public void setname(String name){
    girlname = name;
}
public String returnname(){
    return girlname;
}
public void tellname(){
    System.out.printf("your first girlfriend was %s",returnname());
}
} 
```

在`class2`中，我可以看到该`setname`方法将 的值设置`name`为私有变量`girlname`，但我的问题是它返回的是什么？为什么我们需要这种`returnname`方法？对于方法间变量是否绝对必要？另外，为什么不能`girlname`在`setname`方法中返回？

我对退货一无所知，所以视频或文章会有很大帮助。另外，如果你觉得我上面说的很奇怪，这就是原因。

另外，请告诉我`returnname`方法和`tellname`方法在做什么。

另外，在`class1`我们执行`class2obj.tellname`了为什么我们不执行`class2obj.returnname`？

我现在真的很困惑，所以请不要介意我表现得很傻。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-28T07:55:42.130

首先，如果你给出的代码真的是教程中使用的代码，那就选择另一个教程。它甚至不尊重标准的 Java 命名约定。

然后，回答你的问题。对象是状态（字段）和行为（方法）的混合体。一些方法修改对象的状态。一些方法允许您访问对象的状态。有些方法允许两者都做。一些方法使用对象和其他对象的状态来做一些有用的事情。

该方法`void setName(String name)`不返回任何内容。如果它有一个 javadoc 注释，并且如果明智地选择了类和方法名称，则该注释会说：

```
/**
 * Sets the name of this GirlFriend object. Replaces the previous name of
 * the girl friend with the new name given as argument
 */
public void setName(String newName) {
    this.name = newName;
} 
```

这个方法修改了对象的状态，不需要返回任何东西。它的职责是更改名称，仅此而已。返回新名称没有任何用途，因为调用者已经知道它：它将它作为参数传递。

稍后，您可能有兴趣知道女朋友的名字：

```
/**
 * Returns the name of this GirlFriend object
 */
public String getName() {
    return this.name;
} 
```

此方法不需要任何参数：它允许向女朋友询问她的姓名，并且该方法返回姓名作为答案。

我会选择一本好书，或者[阅读官方 Java 教程](http://docs.oracle.com/javase/tutorial/java/index.html)来了解更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T07:56:56.113

`setname`有返回类型`void`，这意味着它根本不返回任何东西。此函数的行为是存储名称以供以后检索。

`returnname`有返回类型`String`，当你想检索之前存储的内容时会调用它。

此处使用的模式（示例很差）是 getter/setter。它们具有互补但非常不同（相反）的行为。

你*可以*用你的设置器返回一个值`setname`——但这（无论如何对于初学者来说）是一个不必要的复杂性——我们还是不要去那里，好吗？让你的方法保持单一目的和重点。

`tellname`是一个辅助函数，用于将与名称相关的输出打印到控制台。

关于：

> 另外，在 class1 我们执行了 class2obj.tellname 为什么我们不执行 class2obj.returnname ？

你可以..就像`tellname()`所谓的那样`returnname()`。您在 class1 中的代码可能会替换

> class2obj.tellname();

和

> System.out.printf("你的第一个女朋友是%s", `class2obj.returnname()`);

最后，像其他人建议的那样重新迭代/强调 - 去寻找一个新的教程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T08:05:33.897

1.  setName 什么也不返回。老实说，它不是什么都不是，它是一种特殊类型的**void**，没有任何意义。
2.  可以从 java 语法点返回 girlname，但在大多数情况下它没有意义，因为我们需要单独的 getter。阅读有关[java beans](http://en.wikipedia.org/wiki/JavaBeans)和[getter/setter](https://stackoverflow.com/questions/1568091/why-use-getters-and-setters)的更多信息。此外，此方法将有两个不好的职责（更改值，返回结果）。
3.  正如您已经了解`returnname`的是 getter 方法，用于获取私有变量的值。阅读有关[java 访问修饰符](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)的更多信息。`tellname`只是打印机方法并显示到标准输出女朋友的名字。
4.  因为`returnname`返回字符串对象，所以该变量保存在内存中，您可以使用 using 将其打印出来`System.out.println(class2Obj.returnname())`。但是您有打印它的方法，为什么需要这样做？只是打电话`class2Obj.tellname()`（虽然这是不好的方法）

PS。不要调用java代码脚本的一部分:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T07:54:04.067

首先阅读 OOP 概念和 Java 基础知识以了解这一点。我将在这里简短地解释一下。

`girlname`被声明为私有变量，这意味着它不能直接从外部访问`class2`。因此，设置和返回`girlname`变量的 2 种方法是从类外部访问变量的值。

您也可以使用`classobj2.returnname`，它将返回`girlname`类 2 中变量的值并显示它。`classobj2.tellname`这里用来简单的直接打印变量的值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-28T07:55:05.013

`returnname()`并且`setname()`是 getter 和 setter 方法的示例（分别）。这些也称为[mutator 方法](http://en.wikipedia.org/wiki/Mutator_method)。

这些类型的方法存在的主要原因是为了尊重封装。本教程显然是一个非常简单的示例，但没有必要这样做，但假设您正在构建一个系统，您希望在该系统中让用户在数据库中查找信息。如果您不使用 setter 方法，而是让用户直接访问一个变量，该变量成为数据库运行的查询的一部分，那么他们可以插入各种讨厌的代码并破解您的数据库（这称为[SQL 注入攻击](http://en.wikipedia.org/wiki/SQL_injection)）。您可以通过向用户隐藏变量来防止这种情况发生（在您的示例中，变量是`private`) 并通过 setter 方法设置值。此方法可能比您的示例更复杂，并查看输入以删除任何不需要的输入。当然，既然变量是隐藏的，我们需要一种方法让其他对象访问该值，因此需要 getter 方法。

总而言之，它带来了一个更安全的系统，并让开发人员控制如何访问变量以防止误用。尽管您正在处理一个非常简单的示例，但学习它是一个很好的实践，因为它对于以后构建安全系统很重要。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-28T07:57:02.400

Java 函数是您为执行某些操作而编写的代码的一部分。有时在这个动作结束时你想要一个答案，有时你只需要完成一些事情。当您想要一个答案时，您编写一个返回某个对象的函数，否则您将该函数设置为 void。而且你什么也不退。

当您调用 setName 时，您的操作是设置对象名称，因此您不需要任何返回。当您调用 returnName 时，您确实想要一个答案 - 对象名称是什么，因此您使用 return 语句。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-28T08:00:07.697

因为`girlname`is `private`，它不能被任何其他对象访问，所以除非你提供某种读取值的方法，否则你将永远无法取回该值

是必不可少的吗？不，但这是一种很好的做法。这可以防止其他对象在`girlname`您不知情的情况下发生更改。这实际上是 OOP 中一个非常重要的概念。

`girlname`从方法返回是非常可行的`setname`，但重点是什么。您已经传递了值，这表明您已经可以访问该变量？

`tellName`无非就是显示一些文字，其实就是用的`returnname`方法。

没有理由不能调用`returnname`，但除非将其分配给变量，否则没有多大意义

你可能读过[Learnng the Java Language](http://docs.oracle.com/javase/tutorial/java/index.html)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-28T08:01:54.153

首先，这些脚本是实际的课程来源，但这是可以理解的——初学者确实会经常弄错术语，不管是什么语言 :)

这些来源显示的约定非常糟糕，很可能会导致您的困惑，但底线是所有变量都有一个范围。简而言之，范围意味着可以在哪里使用变量，并且范围被视为在良好代码中需要注意的最重要的事情之一，以避免奇怪的副作用和难以修复或根本无法修复的错误。

在`class2`上面，您实际上是正确的，`returnname()`实际上不需要方法调用`tellname()`，因为该`private String girlname` *字段*在*类私有*范围内；也就是说，类中的所有方法都可以直接看到该特定字段。

你也问

```
why isn't it posible to return the girlname in the setname method? 
```

这实际上是可能的，但正如我已经提到的，这里的代码与普通 Java 非常不同，这肯定会引起一些混乱；getX/setX 方法命名约定就是所谓的*属性模式*，它是一种约定，其中具有类型*私有字段*的类`Foo`公开两个公共范围方法以允许该类的用户修改该字段。这个约定是 JavaBeans 的一部分，这是一个相当大的话题，现在需要旁观，所以您可能想自己阅读。显示此内容的简单类如下所示：

```
public class FooFieldBean {
    private Foo field;

    public Foo getFoo() {
        return field;
    }

    public void setFoo() {
        this.field = field;
    }
} 
```

作为一个小奖励，这里清理了两个类源以匹配常见的 Java 约定。注意大小写、空格的使用和缩进。

```
import java.util.Scanner;
public class Class1 {
    public static void main(String[] args) {
        System.out.println("This is Class1.");
        Scanner x = new Scanner(System.in);
        System.out.print("Please enter the name of your first gf here:");
        String name = x.nextLine();

        Class2 class2obj = new Class2();
        class2obj.setName(name);
        class2obj.tellName();
    }
}

public class Class2 {
    private String girlName;

    public void setName(String name) {
        girlName = name;
    }

    public String getName() {  
        return girlName;
    }

    public void tellName() {
        System.out.printf("your first girlfriend was %s",getName());
    }
} 
```

# java - 如何从拦截器更改 JAAS 上下文？

> ID：11699258
> 
> 赞同：0
> 
> 时间：2012-07-28T07:46:04.553
> 
> 标签：java, security, jakarta-ee, jaas, role

我想问是否可以从 EJB 拦截器更改 Java EE JAAS 上下文（分配的用户角色）？

我有一些 EJB 会话 bean，它们使用方法“isUserInRole()”来测试授权。另一方面，我的应用程序正在管理具有一些特殊信息的用户配置文件，这些信息无法映射到通过应用程序 Java EE 领域管理的 JAAS 角色/组，因为它们是在运行时创建的。

我的想法是实现类似 EJB 拦截器的东西，检查存储在我的应用程序的用户配置文件中的信息，并向用户凭据/主题添加一些新的自定义角色。

所以结果将是一个新的动态角色定义分配给我的会话 bean 可以询问的凭据。但这些角色不会在 ejb (@RolesAllowd) 或 ejb-jar.xml 或 sun-ejb-jar.xml 描述符中硬编码。

感谢您对这个问题的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T17:31:00.993

更改已建立的安全上下文很困难，但如果最初设置安全上下文也适用于您的情况，则必须查看自定义登录模块。

在 Java EE 中，这可以通过`JASPI`基于 JAAS 的 API 来完成。

几乎每个应用程序服务器也都有一个专有的 API 来执行此操作，其中大多数也是基于 JAAS 构建的。

# java - 在 vaadin 应用程序中查看客户端的 jasper 报告

> ID：11699259
> 
> 赞同：0
> 
> 时间：2012-07-28T07:46:27.300
> 
> 标签：java, applet, jasper-reports, vaadin

我正在开发一个必须使用 JasperReports 的 vaadin 应用程序。现在我想要的是每当生成报告时，都应该在 JasperViewer 中查看它。但问题是 JasperViewer 只在服务器端运行，而不在客户端运行，我想要一些可以用来在客户端查看报告的东西。有没有办法解决这个问题。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T10:15:38.533

我不确定 JasperViewer 是否可以在客户端运行...

但是，另一种方法是存储文件名，当用户选择查看报告选项时，您可以从本地系统读取此文件并显示它。它相当于在浏览器上显示 .pdf 文件...

您还可以以 Jasper 提供的不同格式存储文件...

# ruby - Ruby比较数组的元素是否是这些字符之一

> ID：11699261
> 
> 赞同：0
> 
> 时间：2012-07-28T07:46:29.717
> 
> 标签：ruby, object, compare

```
g = [["xx", "A"],­ ["xx", "B"]]­
g.any?{­|x,y| y.eq­l? ("A"|­|"B"||"C"­)} 
```

我想评估子数组中的第二个元素是否是“A”或“B”或“C”之一。在上述情况下，它应该返回`true`. 并返回`false`，例如，`if g=[["xx","K"]["xx","B"]`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T08:01:13.683

怎么样：

```
g.all? { |x,y| y =~ /^(A|B|C)$/ } 
```

**编辑**：@PriteshJ 观察后

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T08:01:23.450

我想总是`("A" || "B" || "C")`给你`"A"`。

```
 g.each{|x, y| puts "ABC".include? y} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T12:57:57.423

看起来好的旧哈希比正则表达式更快：

```
require 'benchmark'

many = 500000

g = [["x", "A"], ["xx", "B"]]
h = {"A" => true, "B" => true, "C" => true}
Benchmark.bm do |b|
  b.report("regexp") { many.times { g.all? { |x,y| y =~ /^(A|B|C)$/ } } }
  b.report("hash") { many.times { g.all? { |x,y| h.has_key?(y) } } }
end

# regexp  1.690000   0.000000   1.690000 (  1.694377)
# hash  1.040000   0.000000   1.040000 (  1.040016) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T09:00:46.767

我想出了以上两个答案的组合

```
1.9.3p194 :177 > g =[["xx", "A"],["xx", "B"]]
 => [["xx", "A"], ["xx", "B"]] 
1.9.3p194 :178 > g.all?  {|i,v| "ABC".include?v}
 => true  #correctly return true
1.9.3p194 :179 > g =[["xx", "A"],["xx", "Ba"]]
 => [["xx", "A"], ["xx", "Ba"]] 
1.9.3p194 :180 > g.all?  {|i,v| "ABC".include?v}
 => false #correctly return false 
```

编辑基准测试后受@victor 的回答启发

```
array= ['A','B','C']
g.all? { |x,y| arr.include?y 
```

和

```
h = {"A" => true, "B" => true, "C" => true}
g.all? { |x,y| h.has_key?(y) 
```

是赢家。

Benchmark 的灵感来自@victor 答案

```
require 'benchmark'

many = 500000

g = [["x", "A"], ["xx", "B"]]
h = {"A" => true, "B" => true, "C" => true}
arr = ['A','B','C']

Benchmark.bm do |b|
  b.report("regexp1\t") {many.times { g.all? { |x,y| y =~ /^(A|B|C)$/} } }
  b.report("regexp2\t") { many.times { g.all? { |x,y| y =~ /^[ABC]$/ } } }
  b.report("hash\t") { many.times { g.all? { |x,y| h.has_key?(y) } } }
  b.report("str include\t") { many.times { g.all? { |x,y| "ABC".include?y } } }
  b.report("array include\t") { many.times { g.all? { |x,y| arr.include?y } } }
end

#Output 
       user     system      total        real
regexp1           0.640000   0.000000   0.640000 (  0.635750)
regexp2           0.580000   0.000000   0.580000 (  0.586788)
hash              0.370000   0.000000   0.370000 (  0.364140)
str include       0.430000   0.010000   0.440000 (  0.439753)
array include     0.380000   0.010000   0.390000 (  0.381149) 
```

干杯。

# java - 在休眠注释中映射超过2个表

> ID：11699274
> 
> 赞同：1
> 
> 时间：2012-07-28T07:49:43.527
> 
> 标签：java, hibernate, jakarta-ee, orm, hibernate-mapping

我有三个表，我想在休眠 4 中映射它们。我正在使用多对一注释。我不知道如何映射超过 2 个表。

```
1\. Stuff
CREATE  TABLE TBLSTUFF (
  STUFF_ID                         NUMBER NOT NULL,
  STUFF_DESCRIPTION                VARCHAR2(10),
  MUNIT                            VARCHAR2(10),
  ORDERPOINT                       NUMBER,
  STOCK                            NUMBER,
  CONSTRAINT PK_TBLSTUFF
    PRIMARY KEY ( STUFF_ID ) 
);
2\. STUFFRECEPTION
CREATE  TABLE TBLSTUFFRECEPTION (
  STUFF_ID                         NUMBER,
  PROVIDER_ID                      NUMBER,
  RECEPTIONDATE                    DATE,
  QUANTITY                         NUMBER,
  RECEPTION_ID                     NUMBER NOT NULL,
  CONSTRAINT PK_TBLSTUFFRECEPTION
    PRIMARY KEY ( RECEPTION_ID ) 
);

ALTER TABLE TBLSTUFFRECEPTION ADD CONSTRAINT FK_STUFF
  FOREIGN KEY (STUFF_ID)
    REFERENCES TBLSTUFF (STUFF_ID);

ALTER TABLE TBLSTUFFRECEPTION ADD CONSTRAINT FK_PROVIDER
  FOREIGN KEY (PROVIDER_ID)
    REFERENCES TBLPROVIDER (PROVIDER_ID);

3.provider
CREATE  TABLE TBLPROVIDER (
  PROVIDER_ID                      NUMBER NOT NULL,
  PROVIDER_NAME                    VARCHAR2(10),
  PROVIDER_ADDRESS                 VARCHAR2(10),
  PROVIDER_TELL                    VARCHAR2(11),
  CONSTRAINT PK_TBLPROVIDER
    PRIMARY KEY ( PROVIDER_ID ) 
); 
```

在 Stuffreception.java 中，多对一注解应该怎么写？这是真的？

```
@Entity
@Table(name="TBLSTUFFRECEPTION")
public class Stuffreception {
@Id
@Column(name="RECEPTION_ID")
private int recep_id;
@Column(name="QUANTITY")
private int quantity;
@Column(name="RECEPTIONDATE")
private Date recep_date;
@ManyToOne
@JoinColumn(name="PROVIDER_ID")
private Provider provider;
@ManyToOne
@JoinColumn(name="STUFF_ID")
private Stuff stuff;

public Stuffreception(int recep_id, int quantity, Date recep_date) {
    super();
    this.recep_id = recep_id;
    this.quantity = quantity;
    this.recep_date = recep_date;
}
//getter and setter method 
```

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T08:08:46.450

好吧，这就是我在我的应用程序中所做的。所以这是要走的路。

# layout - Extjs 4 - 结合 2 个布局

> ID：11699276
> 
> 赞同：0
> 
> 时间：2012-07-28T07:49:53.550
> 
> 标签：layout, extjs4, extjs

我正在使用 Extjs 4，我需要在一个面板上结合卡片和边框布局。卡片创建向导，边框创建子面板。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T13:19:39.500

你不需要`combine`布局 - 你`nest`他们。基本上你会创建这样的东西：

```
{
  xtype: 'panel',
  layout: 'card',
  items: [{  
    xtype: 'panel',
    layout: 'border'
  }, {
    xtype: 'panel',
    layout: whatever... 
  }]
} 
```

# delphi - Delphi 表单切换使用定时器

> ID：11699277
> 
> 赞同：1
> 
> 时间：2012-07-28T07:50:01.727
> 
> 标签：delphi, delphi-xe2

我是德尔福学习者。A 有一个具有 2 个表单（“Form001”和“Form002”）的项目。“Form001”上有一个按钮（“BitBtn001”）。“Form001”和“Form002”都由“FadeInTimer”创建，并由“FadeOutTimer”使用“FormCloseQuery”关闭。两个表单都由“FormMinimizeTimer”最小化并由“FormRetoreTimer”恢复。如果我单击“BitBtn001”，则会显示“Form002”。

[这是我的项目的下载链接：](http://netload.in/datei2VGWFZBDA8/KoushikHalder%27sTimerEffect.7z.htm)

**以下是实现逻辑：**

**表格 001：**

```
unit KoushikHalder001;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.StdCtrls, Vcl.Buttons, Vcl.ExtCtrls,
  Vcl.Imaging.pngimage;

type
  TForm001 = class(TForm)
    Edit001: TEdit;
    Background: TImage;
    BitBtn001: TBitBtn;
    BitBtn002: TBitBtn;
    FadeInTimer: TTimer;
    FadeOutTimer: TTimer;
    FormMinimizeTimer: TTimer;
    FormRestoreTimer: TTimer;
    procedure FormClose(Sender: TObject; var Action: TCloseAction);
    procedure FormCloseQuery(Sender: TObject; var CanClose: Boolean);
    procedure FormCreate(Sender: TObject);
    procedure FormHide(Sender: TObject);
    procedure FormShow(Sender: TObject);
    procedure BitBtn001Click(Sender: TObject);
    procedure BitBtn002Click(Sender: TObject);
    procedure FadeInTimerTimer(Sender: TObject);
    procedure FadeOutTimerTimer(Sender: TObject);
    procedure FormClosingTimerTimer(Sender: TObject);
    procedure FormMinimizeTimerTimer(Sender: TObject);
    procedure FormRestoreTimerTimer(Sender: TObject);
  private
    { Private declarations }
    CrossButtonClick: Boolean;
    procedure WMNCHitTest(var Msg: TWMNCHitTest) ; message WM_NCHitTest;
    procedure WMSysCommand(var Msg: TWMSysCommand) ; message WM_SysCommand;
  public
    { Public declarations }
  end;

var
  Form001: TForm001;

implementation

{$R *.dfm}

uses KoushikHalder002;

procedure TForm001.WMNCHitTest(var Msg: TWMNCHitTest);
begin
  inherited;
  if ControlAtPos(ScreenToClient(Msg.Pos), True, True, True)= nil
    then
      begin
        if Msg.Result=htClient then Msg.Result := htCaption;
      end;
end;

procedure TForm001.WMSysCommand(var Msg: TWMSysCommand);
begin
  case Msg.CmdType of
    SC_MINIMIZE:
      begin
        if Form001.AlphaBlendValue > 0 then
          begin
            FormMinimizeTimer.Enabled := true;
            Exit;
          end;
      end;
    SC_RESTORE:
      begin
        if Form001.AlphaBlendValue < 220 then
          begin
            FormRestoreTimer.Enabled := True;
          end;
      end;
  end;
  inherited;
end;

procedure TForm001.BitBtn001Click(Sender: TObject);
begin
  if Form002.WindowState = wsMinimized then
    begin
      Form002.FormRestoreTimer.Enabled := true;
    end
    else
    Form002.show;
end;

procedure TForm001.BitBtn002Click(Sender: TObject);
begin
  FadeOutTimer.Enabled := true;
end;

procedure TForm001.FormClose(Sender: TObject; var Action: TCloseAction);
begin
  FadeOutTimer.Enabled := true;
end;

procedure TForm001.FormCloseQuery(Sender: TObject; var CanClose: Boolean);
begin
  if CrossButtonClick = true
    then
      begin
        CanClose := true;
        Exit;
      end;
  CanClose := false;
  FadeOutTimer.Enabled := true;
end;

procedure TForm001.FormCreate(Sender: TObject);
begin
  FadeInTimer.Enabled := true;
end;

procedure TForm001.FormHide(Sender: TObject);
begin
  FadeOutTimer.Enabled := true;
end;

procedure TForm001.FormShow(Sender: TObject);
begin
  FadeInTimer.Enabled := true;
end;

procedure TForm001.FadeInTimerTimer(Sender: TObject);
begin
  if Form001.AlphaBlendValue >= 220
    then
      begin
        FadeInTimer.Enabled := false;
      end
    else
      begin
        Form001.AlphaBlendValue := Form001.AlphaBlendValue + 10;
        CrossButtonClick := false;
      end;
end;

procedure TForm001.FadeOutTimerTimer(Sender: TObject);
begin
  if Form001.AlphaBlendValue <= 0
    then
      begin
        FadeOutTimer.Enabled := false;
        CrossButtonClick := true;
        Self.Close;
      end
    else
      begin
        Form001.AlphaBlendValue := Form001.AlphaBlendValue - 10;
        CrossButtonClick := true;
      end;
end;

procedure TForm001.FormClosingTimerTimer(Sender: TObject);
begin
  DoubleBuffered := true;
end;

procedure TForm001.FormMinimizeTimerTimer(Sender: TObject);
begin
  if Form001.AlphaBlendValue > 0 then
    begin
      Form001.AlphaBlendValue := Form001.AlphaBlendValue - 10;
    end
  else
    begin
      FormMinimizeTimer.Enabled := false;
      Perform(WM_SYSCOMMAND, SC_MINIMIZE, 0);
    end;
end;

procedure TForm001.FormRestoreTimerTimer(Sender: TObject);
begin
  if Form001.AlphaBlendValue < 220 then
    begin
      Form001.AlphaBlendValue := Form001.AlphaBlendValue + 10;
    end
  else
    begin
      FormRestoreTimer.Enabled := false;
    end;
end;

end. 
```

**表格 002：**

```
unit KoushikHalder002;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.StdCtrls, Vcl.Buttons, Vcl.ExtCtrls,
  Vcl.Imaging.pngimage;

type
  TForm002 = class(TForm)
    Edit001: TEdit;
    Background: TImage;
    BitBtn001: TBitBtn;
    BitBtn002: TBitBtn;
    FadeInTimer: TTimer;
    FadeOutTimer: TTimer;
    FormClosingTimer: TTimer;
    FormMinimizeTimer: TTimer;
    FormRestoreTimer: TTimer;
    procedure FormCloseQuery(Sender: TObject; var CanClose: Boolean);
    procedure FormHide(Sender: TObject);
    procedure BitBtn001Click(Sender: TObject);
    procedure BitBtn002Click(Sender: TObject);
    procedure FormShow(Sender: TObject);
    procedure FadeInTimerTimer(Sender: TObject);
    procedure FadeOutTimerTimer(Sender: TObject);
    procedure FormClosingTimerTimer(Sender: TObject);
    procedure FormMinimizeTimerTimer(Sender: TObject);
    procedure FormRestoreTimerTimer(Sender: TObject);
  private
    { Private declarations }
    CrossButtonClick: Boolean;
    procedure WMNCHitTest(var Msg: TWMNCHitTest) ; message WM_NCHitTest;
    procedure WMSysCommand(var Msg: TWMSysCommand) ; message WM_SysCommand;
  public
    { Public declarations }
  end;

var
  Form002: TForm002;

implementation

{$R *.dfm}

uses KoushikHalder001;

procedure TForm002.WMNCHitTest(var Msg: TWMNCHitTest);
begin
  inherited;
  if ControlAtPos(ScreenToClient(Msg.Pos), True, True, True)= nil
    then
      begin
        if Msg.Result=htClient then Msg.Result := htCaption;
      end;
end;

procedure TForm002.WMSysCommand(var Msg: TWMSysCommand);
begin
  case Msg.CmdType of
    SC_MINIMIZE:
      begin
        if Form002.AlphaBlendValue > 0 then
          begin
            FormMinimizeTimer.Enabled := true;
            Exit;
          end;
      end;
    SC_RESTORE:
      begin
        if Form002.AlphaBlendValue < 220 then
          begin
            FormRestoreTimer.Enabled := True;
          end;
      end;
  end;
  inherited;
end;

procedure TForm002.BitBtn001Click(Sender: TObject);
begin
  FadeOutTimer.Enabled := true;
end;

procedure TForm002.BitBtn002Click(Sender: TObject);
begin
  FormClosingTimer.Enabled := true;
end;

procedure TForm002.FormCloseQuery(Sender: TObject; var CanClose: Boolean);
begin
  if CrossButtonClick = true
    then
      begin
        CanClose := true;
        Exit;
      end;
  CanClose := false;
  FadeOutTimer.Enabled := true;
end;

procedure TForm002.FormHide(Sender: TObject);
begin
  FadeOutTimer.Enabled := true;
end;

procedure TForm002.FormShow(Sender: TObject);
begin
  FadeInTimer.Enabled := true;
end;

procedure TForm002.FadeInTimerTimer(Sender: TObject);
begin
  if Form002.AlphaBlendValue >= 220
    then
      begin
        FadeInTimer.Enabled := false;
      end
  else
    begin
      Form002.AlphaBlendValue := Form002.AlphaBlendValue + 10;
      CrossButtonClick := false;
    end;
end;

procedure TForm002.FadeOutTimerTimer(Sender: TObject);
begin
  if Form002.AlphaBlendValue <= 0
    then
      begin
       FadeOutTimer.Enabled := false;
       CrossButtonClick := true;
       Self.Close;
      end
    else
      begin
        Form002.AlphaBlendValue := Form002.AlphaBlendValue - 10;
        CrossButtonClick := false;
      end;
end;

procedure TForm002.FormClosingTimerTimer(Sender: TObject);
begin
  if Form002.AlphaBlendValue <= 0
    then
      begin
        FadeOutTimer.Enabled := false;
        CrossButtonClick := false;
        Form001.Close;
      end
    else
      begin
        Form002.AlphaBlendValue := Form002.AlphaBlendValue - 10;
        CrossButtonClick := false;
      end;
end;

procedure TForm002.FormMinimizeTimerTimer(Sender: TObject);
begin
  if Form002.AlphaBlendValue > 0 then
    begin
      Form002.AlphaBlendValue := Form002.AlphaBlendValue - 10;
    end
  else
    begin
      FormMinimizeTimer.Enabled := false;
      Perform(WM_SYSCOMMAND, SC_MINIMIZE, 0);
    end;
end;

procedure TForm002.FormRestoreTimerTimer(Sender: TObject);
begin
  if Form002.AlphaBlendValue < 220 then
    begin
      Form002.AlphaBlendValue := Form002.AlphaBlendValue + 10;
    end
  else
    begin
      FormRestoreTimer.Enabled := false;
    end;
end;

end. 
```

这里“CrossButtonClick”是“FormClosingQuery”中使用的全局布尔变量。

除了两个问题外，一切都很好。

**问题 01：** 如果我使用标题栏上的“X”按钮关闭“Form002”并再次单击“BitBtn001”（如“Image001”所示）![图片001](../Images/c404730c044c7e5ae26b12ee6f926ff7.png) ，则“Form002”再次显示。但问题是，如果“Form002”正在最小化并由“BitBtn001”显示，然后通过单击“X”按钮将其关闭（如“Image002”所示）![图片002](../Images/46b22b5b7ef0c01ba59f09ff8ac21369.png) 并再次按下“BitBtn001”以显示“Form002”但不幸的是“Form002”不再显示。

**问题 02：** 如果我使用标题中的“RestoreUp”按钮恢复“Form002”（如“Image003”所示）“FormRestoreTimer”没有任何作用。![图片003](../Images/8a7f696285ec25dc439eaba53c1fc572.png)它只是正常恢复。请帮我。请告诉我我的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T01:03:26.650

错误是：

```
procedure TForm001.BitBtn001Click(Sender: TObject);
begin
  if Form002.WindowState = wsMinimized then
    begin
      Form002.Perform(WM_SYSCOMMAND, SC_RESTORE, 0);  // ! - missed in your code
//      Form002.FormRestoreTimer.Enabled := true;   - not needed anymore
    end
    else
    Form002.show;
end; 
```

恢复 Form002 时可能看不到褪色效果，因为褪色太快。

# javascript - 需要创建多个页面才能使用 HTML5 的历史 API？

> ID：11699278
> 
> 赞同：1
> 
> 时间：2012-07-28T07:50:25.863
> 
> 标签：javascript, ajax, html, html5-history

我想创建类似于： http: [//www.atlassian.com/software/jira/overview](http://www.atlassian.com/software/jira/overview)

（请参阅功能导览部分中单击选项卡时更改的 URL）

我知道这可以通过 HTML5 的历史 API 来实现，我的问题是：我是否需要创建同一页面的多个副本，以便直接在地址栏中输入 URL 时可以正常工作，或者是否有任何其他可能的方式，如 URL重写或实现这一目标的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T07:59:09.520

HTML5 History API 用于在必要但我们不执行通常的 http 请求时在浏览器历史记录中添加项目。在示例中，通常有 http 请求（不是 ajax），当浏览器发出此类请求时，它会在浏览器历史记录中添加项目。

1.  你可以为每个标签做单独的页面
2.  您可能只有一个页面并使用 HTML5 History API（pushState、popState 等），但如果您希望“直接在地址栏中输入 URL 时效果很好”，那么无论如何您都应该添加该页面。

# asp.net-mvc-3 - 提交时将空值传递给控制器 ？

> ID：11699286
> 
> 赞同：1
> 
> 时间：2012-07-28T07:51:53.737
> 
> 标签：asp.net-mvc-3

运行后，当我在用户名文本框中输入值并单击提交按钮时。在控制器中，我检查对象显示的空值......如果我删除 forloop 并列出它的工作......给我一个解决方案

控制器 ：

```
 [HttpGet]
        public ActionResult Index()
        {
            return View();
        }

        [HttpPost]
        public ActionResult Index(LogonViewModel lvm)
        {
            LogonViewModel lv = new LogonViewModel();

            return View();
        } 
```

模型：

```
 public class LogonViewModel
    {
        [Required(ErrorMessage = "User Name is Required")]
        public string UserName { get; set; }
    } 
```

看法

```
@model IList<clientval.Models.LogonViewModel>

@{
    ViewBag.Title = "Index";
}

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>   
<script src="../../assets/js/val.js" type="text/javascript"></script>

@using (Html.BeginForm())
{
    for (int i = 0; i < 1; i++)
    {  
    @Html.LabelFor(m => m[i].UserName)
    @Html.TextBoxFor(m => m[i].UserName)
     @Html.ValidationMessageFor(per => per[i].UserName)

    <input type="submit" value="submit" />
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T07:58:03.273

您的 POST 控制器操作必须进行集合，因为这就是您在视图中所拥有的：

```
[HttpPost]
public ActionResult Index(IList<LogonViewModel> lvm)
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T07:57:43.327

您在您的视图中生成 - 并提交到服务器 -*多个*名称。当你使用`TextBoxFor(m => m[5].UserName)`MVC 时会生成`<input type=text name="[5].UserName>`. 因此，您也必须在控制器中*接受**多个*名称。

将您的操作签名更改为：

```
[HttpPost]
public ActionResult Index(LogonViewModel[] lvms) 
```

（并将您`submit`移出您的`for`，无论如何它都会提交整个表单）

# msbuild - 使用 Teamcity 将 MsBuild 和 MsDeploy 部署到多个服务器

> ID：11699290
> 
> 赞同：2
> 
> 时间：2012-07-28T07:53:06.053
> 
> 标签：msbuild, teamcity, msdeploy

目前，我正在使用 MsBuild 和 MsDeploy 使用以下命令更新 1 台服务器。

```
/p:Configuration=Release /P:DeployOnBuild=True /P:DeployTarget=MSDeployPublish   
/P:MsDeployServiceUrl=https://%system.server%:8172/MsDeploy.axd     
/P:AllowUntrustedCertificate=True /P:MSDeployPublishMethod=WMSvc  
/P:CreatePackageOnPublish=True /P:UserName=%system.user% /P:Password=%system.pass%   
/P:DeployIisAppPath="PATH TO SERVER" 
```

无论如何我可以使用相同的编译可执行文件更新另外 2 台服务器，而无需再次运行 msbuild？我还使用 Teamcity 将其作为构建步骤运行。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T11:14:31.557

在不多次调用 msbuild 的情况下，我无法找到一种部署到多个服务器的方法。

我们的流程已经从具有多个硬编码目标的构建文件演变为可以读取所有参数的配置文件的 powershell 脚本。我们只是从 Teamcity 调用 powershell 脚本。

# vb.net - 使用对话框复制文件并覆盖文件

> ID：11699291
> 
> 赞同：1
> 
> 时间：2012-07-28T07:53:53.850
> 
> 标签：vb.net, visual-studio-2010

下面是两行代码：

```
 My.Computer.FileSystem.CopyFile(sourceItemPath, destinationItemPath, FileIO.UIOption.AllDialogs, FileIO.UICancelOption.DoNothing)
    My.Computer.FileSystem.CopyFile(sourceItemPath, destinationItemPath, True) 
```

我想用第一行完成的 Windows 对话框复制一个文件。但是，如果该文件存在，我希望该文件被覆盖。

如果文件存在，第二行将覆盖该文件，但不显示对话框。

如何使用对话框复制文件并覆盖文件（如果存在）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T02:35:57.303

如果文件存在，您可以简单地擦除文件，然后在`CopyFile`没有标志的情况下调用 ，因为不需要覆盖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T01:22:55.933

据我所知，这不适用于内置的 Windows 复制对话框，因为它旨在让用户决定在发生冲突时该怎么做。

这就是为什么可以调用 CopyFile() 方法来显示对话框或使用覆盖标志静默调用的原因。

我想你必须自己实现一个自定义对话框才能实现你想要的。

# php - 令人困惑的 foreach 循环 - 访问然后将值重新存储到数组中的变量中

> ID：11699296
> 
> 赞同：0
> 
> 时间：2012-07-28T07:55:03.910
> 
> 标签：php, arrays, multidimensional-array, foreach

我有以下多维数组：

```
 Array
(
    [0] => Array
        (
            [0] => Array
                (
                    [name] => team0
                    [games] => Array
                        (
                            [0] => 3
                        )

                )

            [1] => Array
                (
                    [name] => team1
                    [games] => Array
                        (
                            [0] => 2
                        )

                )

            [2] => Array
                (
                    [name] => team2
                    [games] => Array
                        (
                            [0] => 1
                        )

                )

            [3] => Array
                (
                    [name] => team3
                    [games] => Array
                        (
                            [0] => 0
                        )

                )

        ) 
```

我正在尝试遍历数组并将数组中的信息存储在各个变量中，以使用这些变量作为参数对数据库执行查询。我发现使用这个多维数组非常令人困惑，我正在努力理解如何正确迭代数组。事实上，这是我的代码......在这个阶段，我更多地只是在干预 foreach 循环，试图更好地理解我如何能够实现我需要做的事情。这段代码有一个问题，在每个团队名称“Array”也被回显之后。

```
foreach ($arrTeam as $array) 
            foreach ($array as $groupid => $group){
                $in_groupID = $groupid+1;
                foreach ($group as $name) {
                    if (isset($name)) echo $name.'<br>'; 
                }                   
            } 
```

基本上我想要做的是从数组中获取一个 groupid 和 teamname ，将它们存储在`$in_groupID`and`$in_teamName`中，然后更深入地遍历数组并一次抓取该特定团队的每个游戏 - 对每个游戏执行数据库上的查询我抢的游戏。查询本身不是问题，它以我想要的方式迭代这个令人困惑的循环并将值存储为执行参数。

任何帮助将不胜感激。正如我所说，我不关心执行数据库查询之类的，我可以轻松地修复它并稍后添加它，我只需要考虑存储循环中的参数以执行。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T08:06:40.273

当您遍历您的团队数组时，您将能够访问`name`和`games`数组。您不需要遍历每个团队，因为您知道每个团队的密钥。您需要迭代的是每个团队的所有游戏：

```
foreach($teams as $teamId => $team) {
    // team id is in $teamId
    $teamName = $team['name'];

    // Iterate through the games
    foreach($team['games'] as $number) {
        // The game number (or id, or whatever you call it) is in $number
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T08:12:18.243

斯蒂芬，接下来呢？

```
 foreach ($someInitArr as $rootIndex => $arrTeam)
      foreach ($arrTeam as $teamid => $team) {

        $teamName = $team['name'];
        $teamID = $teamid + 1;

            foreach($team['games'] as $gameNumber => $gameValue)
              // here yo can grab each game separately within the database already having $teamName and $teamID

        } 
```

# python - OpenCV 2.4 VideoCapture 在 Windows 上不起作用

> ID：11699298
> 
> 赞同：51
> 
> 时间：2012-07-28T07:55:28.963
> 
> 标签：python, windows, opencv

我正在使用 Python 绑定到按照以下[说明](http://opencvpython.blogspot.com/2012/05/install-opencv-in-windows-for-python.html)安装的 OpenCV 2.4 。

我的问题与[此](https://stackoverflow.com/questions/11444926/videocapture-is-not-working-in-opencv-2-4-2)类似，但我需要 Windows 机器解决方案。

问题：当我尝试使用

```
cap = cv2.VideoCapture(0)
print cap.grab() 
```

它工作正常，但以下代码

```
cap = cv2.VideoCapture(filename)
print cap.grab() 
```

总是返回 False。

文件路径正确、绝对且没有空格。

我在两台装有 Windows XP 和 Windows 7 的机器上进行了尝试，结果相似。在 Linux（Ubuntu）上它对我来说很好。

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-07-28T19:28:35.310

添加`C:\OpenCV\3rdparty\ffmpeg\`到 Windows PATH 环境变量或`opencv_ffmpeg.dll`从该目录复制到或复制`C:\Python27\`到 PATH 中的目录。[或者，使用来自http://www.lfd.uci.edu/~gohlke/pythonlibs/#opencv](http://www.lfd.uci.edu/~gohlke/pythonlibs/#opencv)的 OpenCV 二进制文件。

重命名`opencv_ffmpeg.dll`文件也可能是必要的。

对于 OpenCV 版本 XYZ
`opencv_ffmpeg.dll`==>`opencv_ffmpegXYZ.dll`

对于 64 位 OpenCV 版本 XYZ
`opencv_ffmpeg.dll`==>`opencv_ffmpegXYZ_64.dll`

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-07-16T09:25:51.860

复制**opencv_ffmpeg.dll**对我来说还不够——当我将 OpenCV 2.4.6 与 Python 2.7.5 一起使用时，我不得不将其重命名为**opencv_ffmpeg246.dll**

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-03-21T13:02:20.383

我首先尝试复制，然后更改 Windows 的 Path 环境。直到我将我的 openCV 版本 2.4.5 和 python 2.7 的名称更改为 opencv_ffmpeg245.dll，它才起作用。（注意 **245.dll 来自 opencv 版本 2.4.5）

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-06-13T18:44:55.357

对于 64 位版本，将 opencv_ffmpeg_64.dll 重命名为 opencv_ffmpeg249_64.dll 将 249 更改为您的 opencv 版本。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-10-05T21:34:21.637

对于 64 位环境上的 OpenCV 3.0.0，复制 opencv_ffmpeg_64.dll 并将其重命名为 opencv_ffmpeg300_64.dll。

还要将此路径添加到您的 PATH 环境变量中，以使其在 Java 下与 OpenCV 一起使用。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2014-06-09T12:42:43.113

更新：对于 OpenCV 2.4.9 仍然如此，复制所有文件，并将 dll 重命名为 opencv_ffmpeg249.dll

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-03-03T04:22:39.837

我对 python 2.7 和 opencv 2.4.10 有同样的问题。我将 opencv_ffmpeg2410_64.dll 文件从 C:\Applications\opencv\build\x64\vc10\bin 复制到 python 路径中（我的路径是 C:\Users\mohammad\Anaconda），它就解决了！

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-11-23T10:11:41.960

起初我使用 windows8.1 32bit 和 opencv 2.4.10。
我在使用`test1.wmv`Logicool C270 制作的文件时遇到了同样的问题。
我尝试使用`test2.mov`由数码相机（佳能 SX160）制作的其他文件。所以我可以玩`test2.mov`附加路径`C:\opencv\build\x86\vc12\bin`。
但我无法播放`test1.wmv.`
所以我尝试使用 VLC (to `Video for youtube HD`) 将格式 test1.wmv 更改为 test1a.mp4。
然后我可以玩`test1a.mp4.`
我在 Ubuntu 14.04 LTS 上试过`test1.wmv`的，然后我就可以轻松玩了。
windows8.1 和 Ubuntu 14.04 LTS 之间的默认 ffmpeg 二进制文件可能会出现一些差异。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-07-08T11:30:21.780

对于 anaconda 环境，从 C:\Python27\ 中复制**opencv_ffmpeg249_64.dll**根据您的 opencv 正确版本重命名其版本并将其传递到 **C:\Users\KHALID\Anaconda2\Library\bin**

# node.js - 猫鼬查询返回'未定义'`

> ID：11699302
> 
> 赞同：1
> 
> 时间：2012-07-28T07:55:57.243
> 
> 标签：node.js, mongodb, express, mongoose

我正在使用以下 mongoose 语法进行 mongo 查询....

```
 // Log the search
                console.log("Searching for: " + lName);

                query.where('lname', lName)
                query.exec(function(err,results){
                        //Check for an err
                        if(err){
                                // Send the err
                                res.send(err);

                                // Log the err
                                console.log(err);
                        } else { 
                                // Send the query results
                                res.send(results);

                                // Log the results
                                console.log(results);
                        }
                }); 
```

查询返回这个....

```
URL: /api/search/customers/?lname=Last+Name // My variable
Query contents = Last Name // My variable
ReferenceError: lname is not defined
    at /home/collin/Documents/code/webdev/loyalty-app/api.js:311:12
    at callbacks (/home/collin/node_modules/express/lib/router/index.js:272:11)
    at param (/home/collin/node_modules/express/lib/router/index.js:246:11)
    at pass (/home/collin/node_modules/express/lib/router/index.js:253:5)
    at Router._dispatch (/home/collin/node_modules/express/lib/router/index.js:280:4)
    at Object.handle (/home/collin/node_modules/express/lib/router/index.js:45:10)
    at next (/home/collin/node_modules/express/node_modules/connect/lib/http.js:204:15)
    at Object.methodOverride [as handle] (/home/collin/node_modules/express/node_modules/connect/lib/middleware/methodOverride.js:35:5)
    at next (/home/collin/node_modules/express/node_modules/connect/lib/http.js:204:15)
    at Object.bodyParser [as handle] (/home/collin/node_modules/express/node_modules/connect/lib/middleware/bodyParser.js:88:61) 
```

我从 If、else if、else 语句中运行这个查询，当我像这样运行它时，查询工作得很好，而且只有名字......

```
 // Log the search       
                console.log("Searching for: " + fName + "," + lName);

                query.where('fname', fName)
                query.where('lname', lName)
                query.exec(function(err, results){
                        // Check for an error   
                        if(err){
                                //Send the err
                                res.send(err);

                                // Log the error
                                console.log(err);
                        } else{
                                // Send the results of the query
                                res.send(results);

                                // Log the results
                                console.log(results);
                        }
                }) 
```

这是数据库文档的示例...

```
 { fname: 'First Name',
   lname: 'Last Name'} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T18:11:01.823

您必须先定义**架构**。

查看[文档](http://mongoosejs.com/docs/schematypes.html)

然后**设置**

```
var mongoose = require('mongoose')
, query = mongoose.model('ex', exSchema); 
```

你也必须做**链式调用**

**尝试**

```
query
.where('fname', fName)
.where('lname', lName)
.exec(function(err, results) {
    // do some with results
}); 
```

# java - 如何在 BoxLayout 中粘在容器顶部

> ID：11699311
> 
> 赞同：2
> 
> 时间：2012-07-28T07:58:11.963
> 
> 标签：java, swing, layout, boxlayout

我有一个带有 Y_AXIS 布局的父 JPanel。这个容器的子容器也是 JPanel。组件堆叠良好，并且全部对齐，但我希望它们粘在父 JPanel 的顶部，因此所有多余的空间都在底部，并且组件之间没有额外的空间。我试过用胶水，但我可能做错了什么。我还将所有孩子的 AllignmentX 和 AllignmentY 分别设置为 left 和 top。

所以，我想要的是父面板中的一堆孩子，它们的高度没有被拉伸，并且粘在父容器的顶部（如果可能的话，左侧），所有多余的空间都放在底部，因此：

编辑：

```
protected void initContent(JPanel panel) {
    id = new JTextField();
    typename = new JTextField();
    currentstep = new JComboBox();
    currentowner = new JComboBox();
    organization = new JTextField();
    area = new JTextField();
    active = new JLabel();
    finished = new JLabel();
    fields = new JList();
    linkedassignments = new JList();
    jobs = new JList();
    JPanel infopanel = new JPanel();
    JPanel listpanel = new JPanel();
    infopanel.setLayout(new BoxLayout(infopanel, BoxLayout.Y_AXIS));
    infopanel.add(Box.createVerticalGlue());
    infopanel.add(makeInfoContainer("Id", id, 50, 100));
    infopanel.add(makeInfoContainer("Type", typename, 50, 100));
    infopanel.add(makeInfoContainer("Organization", organization, 50, 100));
    infopanel.add(makeInfoContainer("Area", area, 50, 100));
    infopanel.add(makeInfoContainer("Active", active, 50, 100));
    infopanel.add(makeInfoContainer("Finished", finished, 50, 100));
    infopanel.add(makeInfoContainer("Step", currentstep, 50, 100));
    infopanel.add(makeInfoContainer("Owner", currentowner, 50, 100));
    listpanel.setLayout(new GridLayout(0,1,5,5));
    listpanel.add(makeJListContainer("Fields", fields, 200, 200));
    listpanel.add(makeJListContainer("Assignments", linkedassignments, 200, 200));
    listpanel.add(makeJListContainer("Jobs", jobs, 200, 200));
    panel.add(infopanel);
    panel.add(listpanel);
}

private Container makeInfoContainer(String name, Component comp, int labelwidth, int compwidth){
    JPanel cont = new JPanel();
    cont.setAlignmentY(Container.TOP_ALIGNMENT);
    cont.setLayout(new FlowLayout(FlowLayout.LEFT, 5, 0));
    JLabel lbl = new JLabel(name);
    lbl.setPreferredSize(new Dimension(labelwidth, 25));
    cont.add(lbl);
    comp.setPreferredSize(new Dimension(compwidth, 25));
    cont.add(comp);
    return cont;
}

private Container makeJListContainer(String name, JList list, int areawidth, int areaheight){
    Box cont = new Box(BoxLayout.Y_AXIS);
    cont.setPreferredSize(new Dimension(areawidth, areaheight));
    JLabel label = new JLabel(name);
    cont.add(Box.createHorizontalGlue());
    cont.add(label);
    JScrollPane pane = new JScrollPane();
    pane.setAlignmentY(Component.TOP_ALIGNMENT);
    pane.setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);
    pane.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS);
    pane.add(jobs);
    cont.add(pane);
    return cont;
} 
```

![代码产生的窗口](../Images/c9fe8b9ae52d809c676756d732e9ee39.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T10:36:49.157

假设包含面板的layoutManager（也就是传入initContent的那个）有一个horizo​​ntalBoxLayout

*   去除所有胶水
*   将两个 info/listPanel 的*alignmentY*设置为顶部
*   实现 infoPanel 的 getMaximum 以返回其首选项

类似的东西（边框只是为了可视化哪个容器在哪里，通常很难用这么多的嵌套来决定:)

```
JComponent panel = new JPanel();
panel.setLayout(new BoxLayout(panel, BoxLayout.LINE_AXIS));
panel.setBorder(BorderFactory.createLineBorder(Color.GREEN));
initContent(panel);

// in initContent
JPanel infopanel = new JPanel() {

    @Override
    public Dimension getMaximumSize() {
        return getPreferredSize();
    }

};
infopanel.setBorder(BorderFactory.createLineBorder(Color.RED));
infopanel.setAlignmentY(0f);
infopanel.setLayout(new BoxLayout(infopanel, BoxLayout.Y_AXIS));
JPanel listpanel = new JPanel();
listpanel.setBorder(BorderFactory.createLineBorder(Color.BLUE));
listpanel.setAlignmentY(0f);
listpanel.setLayout(new GridLayout(0,1,5,5)); 
```

当您这样做时：删除*所有*setXXSize - 硬编码大小是错误的，[有一些原因](https://stackoverflow.com/questions/7229226/should-i-avoid-the-use-of-setpreferredmaximumminimumsize-methods-in-java-swi/7229519#7229519)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T10:14:46.817

尝试去除容器顶部的胶水并将其添加到底部。

更改代码：

```
protected void initContent(JPanel panel) { *[...]* infopanel.add(Box.createVerticalGlue()); *[...]* infopanel.add(Box.createVerticalGlue()); *[...]* JPanel infopanel = new JPanel();
       JPanel listpanel = new JPanel();
       infopanel.setLayout(new BoxLayout(infopanel, BoxLayout.Y_AXIS)); `infopanel.add(makeInfoContainer("Id", id, 50, 100));` *`infopanel.add(makeInfoContainer("Owner", currentowner, 50, 100));` **`listpanel.setLayout(new GridLayout(0,1,5,5));` *`}`**** 
```

# mysql - 是否可以使用在 ORDER BY 之后更新自身的变量计数器

> ID：11699321
> 
> 赞同：1
> 
> 时间：2012-07-28T07:59:34.927
> 
> 标签：mysql, sql

我有以下查询，如果我不使用 ORDER BY 子句，变量 a 效果很好：

设置@a:=0;

```
SELECT doc, @a as before, movement as mov, (@a:=@a+movement) as after, date 
FROM movements m
LEFT JOIN (
SELECT doc, 1 as tdoc, date
FROM invoices
UNION ALL
SELECT doc, 2 as tdoc, date
FROM nulled
) sub
ON m.doc=sub.doc and m.doc_type = sub.tdoc
WHERE m.product_id="XXXX" 
```

所以我得到类似的东西：

```
DOC BEFORE MOVEMENT AFTER DATE
006 0      10       10    2012-07-01
008 10     -3       7     2012-07-03
015 7      5        12    2012-06-20 
```

但是我希望按日期对运动进行排序，因此我在查询末尾包含了 ORDER BY 日期，我得到：

```
DOC BEFORE MOVEMENT AFTER DATE
015 7      5        12    2012-06-20
006 0      10       10    2012-07-01
008 10     -3       7     2012-07-03 
```

而不是我想要的：

```
DOC BEFORE MOVEMENT AFTER   DATE
015 0       5        5      2012-06-20
006 5       10       15     2012-07-01
008 15      -3       12     2012-07-03 
```

有没有办法得到这个？正在计算变量，然后对结果进行排序。有没有办法强制先排序结果然后计算变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T08:06:15.673

您是否尝试过在子查询上移动排序？

例如

```
set @a:=0;

SELECT doc, @a as before, mov, (@a:=@a+mov) as after, date  
FROM
(
    SELECT doc,  movement as mov, date 
    FROM movements m
    LEFT JOIN (
    SELECT doc, 1 as tdoc, date
    FROM invoices
    UNION ALL
    SELECT doc, 2 as tdoc, date
    FROM nulled
    ) sub
    ON m.doc=sub.doc and m.doc_type = sub.tdoc
    WHERE m.product_id="XXXX"
    order by date
) as x 
```

# c - 找到给定整数的所有精确除数的算法

> ID：11699324
> 
> 赞同：24
> 
> 时间：2012-07-28T08:00:04.287
> 
> 标签：c, algorithm, numbers, performance, factors

我想找到一个数字的所有确切除数。目前我有这个：

```
{
   int n;
   int i=2;
   scanf("%d",&n);
   while(i<=n/2)
    {
        if(n%i==0)
                  printf("%d,",i);
        i++;
     }
   getch();
} 
```

有什么办法可以改善吗？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-07-28T08:03:13.053

首先，您的代码应该具有 的条件`i <= n/2`，否则它可能会错过其中一个因素，例如如果 n=12，则不会打印 6。

将循环运行到数字的平方根（即`i <= sqrt(n)`）并打印两者`i`和`n/i`（两者都将是 n 的倍数）。

```
{
   int n;
   int i=2;
   scanf("%d",&n);
   while(i <= sqrt(n))
    {
        if(n%i==0) {
            printf("%d,",i);
            if (i != (n / i)) {
                printf("%d,",n/i);
            }
        } 

        i++;
    }
   getch();
} 
```

笔记 ：

*   对于一个完美的正方形，因此平方根不会被打印两次，额外的检查是在循环结束时完成的，`i*i == n`正如@chepner 所建议的那样。
*   如果您希望所有因子按升序将值存储在数组中，则在循环结束时对所有数字进行排序并显示。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-15T20:57:54.263

通过使用 C 中的“查找所有素数”（更快）和最多 18 位来查找所有除数。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <math.h>

unsigned int FindDivisors(unsigned long long divisors[], unsigned long long N) {
    unsigned int lastdiv = 0;
    divisors[lastdiv++] = 1;
    unsigned long long powerfactor = 1;
    unsigned long long number = N;
    while ((number & 1) == 0) {
        powerfactor <<= 1;
        divisors[lastdiv++] = powerfactor;
        number >>= 1;
    }

    unsigned long long factor = 3; unsigned long long upto = lastdiv;
    powerfactor = 1;
    while (factor * factor <= number) {
        if (number % factor == 0) {
            powerfactor *= factor;
            for (unsigned int i = 0; i < upto; i++)
                divisors[lastdiv++] = divisors[i] * powerfactor;
            number /= factor;
        }
        else {
            factor += 2; upto = lastdiv;
            powerfactor = 1;
        }
    }

    if (number > 1) {
        if (number != factor) {
            upto = lastdiv;
            powerfactor = 1;
        }
        powerfactor *= number;
        for (unsigned int i = 0; i < upto; i++)
            divisors[lastdiv++] = divisors[i] * powerfactor;
    }
    return lastdiv;
}

int cmp(const void *a, const void *b) {
    if( *(long long*)a-*(long long*)b < 0 ) return -1;
    if( *(long long*)a-*(long long*)b > 0 ) return 1;
    return 0;
}

int main(int argc, char *argv[]) {
    unsigned long long N = 2;
    unsigned int Ndigit = 1;
    if (argc > 1) {
        N = strtoull(argv[1], NULL, 10);
        Ndigit = strlen(argv[1]);
    }
    unsigned int maxdiv[] = {1, 4, 12, 32, 64, 128, 240, 448, 768, 1344,
                             2304, 4032, 6720, 10752, 17280, 26880, 41472, 64512, 103680};

    unsigned long long divisors[maxdiv[Ndigit]];
    unsigned int size = FindDivisors(divisors, N);
    printf("Number of divisors = %u\n", size);

    qsort(divisors, size, sizeof(unsigned long long), cmp);
    for (unsigned int i = 0; i < size; i++)
        printf("%llu ", divisors[i]);
    printf("\n");

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-28T08:28:31.693

可以通过首先丢弃所有 2 的因子来改进简单的线性搜索。这可以通过简单的位移来完成，或者用一个很好的内在函数计算训练零。这在任何一种情况下都非常快。然后运行 ​​shg 建议的算法（由于不存在 2 的幂，它将运行得更快），并将结果与​​所有可能的 2 的幂结合起来（不要忘记这一步）。它对于具有大量训练零的输入有很大帮助，但如果它们没有，它甚至会有所帮助 - 您不必再测试任何偶数除数，因此循环长度减半。

剔除一些恒定的低因子（但大于 2）也有帮助。带有常量的模几乎肯定会被编译器优化（或者如果没有，你可以自己做），但更重要的是，这意味着要测试的除数更少。不要忘记将该因素与您找到的除数结合起来。

您还可以完全分解数字（使用您最喜欢的算法 - 可能 Pollard 的 Rho 会是最好的），然后打印因子的所有产品（除了空产品和完整产品）。对于更大的输入，这很有可能最终更快 - 与简单的线性搜索相比，Pollard 的 Rho 算法可以非常快速地找到因子，因子通常比适当的除数少，最后一步（枚举产品）只涉及快速数学（没有划分）。这主要有助于具有非常小的因子的数字，Rho 发现最快。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-22T10:44:03.997

这是我的新 C# 版本。感谢 Rndm，它比我第一次尝试快了近 50 倍。

```
public static long GetDivisors(long number)
    {
        long divisors = 0;

        long boundary = (long)Math.Sqrt(number);

        for (int i = 1; i <= boundary; i++)
        {
            if (number % i == 0)
            {
                divisors++;
                if(i != (number / i))
                {
                    if (i * i != number)
                    {
                        divisors++;
                    }
                }
            }
        }

        return divisors;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-11T09:21:38.177

其中一个答案中提供的代码有一个乍一看很难发现的错误。如果*sqrt(n)*是一个有效的除数；但*n*不是完全平方数，则省略两个结果。

例如尝试`n = 15`，看看会发生什么；`sqrt(15) = 3`，所以 while 循环的最后一个值为 2。执行的下一条语句`if (i * i == n)`将作为 执行`if(3 * 3 == 15)`。所以 3 没有被列为除数，5 也被遗漏了。

以下将正确处理正整数的一般情况。

```
 {
   int n;
   int i=2;
   scanf("%d",&n);
   while(i <= sqrt(n))
    {
        if(n%i==0) {
            printf("%d,",i);
            if (i != (n / i)) {
                printf("%d,",n/i);
            }
        } 

        i++;
    }
   getch();
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-04T10:52:42.317

```
 int count = 2;
     //long childsum = 0;
           long _originalvalue = sum;
     dividend = "1";
     for (int i = 2; i < sum; i++)
     {
         if (_originalvalue % i == 0)
         {
             sum = _originalvalue / i;
             //sum = childsum;
             dividend = dividend + "," + i+","+sum;
             if (sum == i)
             {
                 count++;
             }
             else
             {
                 count = count + 2;
             }
         }
     }
     return count; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-02-19T09:13:08.837

当给定的数字是奇数时，我们甚至可以跳过偶数。在接受的代码中稍作即兴:)

这里是用于查找给定数字的因子的 Java 代码。

```
import java.util.Scanner;
public class Factors {

    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);
        int t=scanner.nextInt();
        while(t-- > 0) {
            int n = scanner.nextInt();
            if(n % 2 == 0) {
                for(int i = 1; i <= Math.sqrt(n); i++) {
                    if(n % i == 0) {
                        System.out.println(i + ", ");
                        if(i != n/i) {
                            System.out.println(n/i + ", ");
                        }
                    }
                }
            }
            else {
                for(int i = 1; i <= Math.sqrt(n); i=i+2) {
                    if(n % i == 0) {
                        System.out.println(i + ", ");
                        if(i != n/i) {
                            System.out.println(n/i + ", ");
                        }
                    }
                }
            }
        }
    }
} 
```

# python - 在虚拟模式下从 wxPython ListCtrl/UltimateListCtrl 获取列号

> ID：11699327
> 
> 赞同：0
> 
> 时间：2012-07-28T08:00:21.113
> 
> 标签：python, wxpython

我是 wxPython 的新手，所以请温柔一点。

我正在尝试制作当用户按下鼠标右键时通过上下文菜单弹出来控制的虚拟列表控件。

根据我的一点点经验，虚拟列表控件似乎喜欢使用“项目”（阅读：“行”）和“列”数字进行操作。很公平。

当我收到一个右键单击事件时，我可以通过调用 event.GetIndex() 轻松获取行（项目）编号。但是如何获取被点击对象的列号呢？

```
import wx
import wx.lib.agw.ultimatelistctrl as ULC

class MyFrame(wx.Frame):
    def __init__(self):
        wx.Frame.__init__(self, None, wx.ID_ANY, "Right-click example")
        self.list = MyListCtrl(parent=self)
        sizer = wx.BoxSizer(wx.VERTICAL)
        sizer.Add(self.list, 1, wx.EXPAND)
        self.SetSizer(sizer)

class MyListCtrl(ULC.UltimateListCtrl):
     def __init__(self, parent, *args, **kwargs):
         ULC.UltimateListCtrl.__init__(self, parent, 1, agwStyle=wx.LC_REPORT|wx.LC_VIRTUAL|wx.LC_HRULES|wx.LC_VRULES)

        self.InsertColumn(0, "Column0")
        self.InsertColumn(1, "Column1")
        self.SetItemCount(5)
        # Bindings
        self.Bind(ULC.EVT_LIST_ITEM_RIGHT_CLICK, self.OnRightClick)

    def OnGetItemText(self, item, column):
        return "%d, %d" % (item, column)

    def OnGetItemToolTip(self, item, column):
        pass

    def OnGetItemTextColour(self, item, column):
        pass

    def OnRightClick(self, event):
        # Get the index (i.e. which row was clicked)
        print("OnColRightClick: GetIndex = %r\n" %(event.GetIndex()))
        # How can I get which column was clicked?

if __name__ == "__main__":
    # Start the GUI
    app = wx.App()
    frame = MyFrame()
    app.SetTopWindow(frame)
    frame.Show()
    app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T23:40:05.673

“如果一开始你没有成功，那就再试一次。然后退出；在这件事上做一个该死的傻瓜是没有用的。” ——马克吐温

我很尴尬地承认我在这件事上浪费了一个星期。为了避免其他人落入同样的陷阱，让我简化一下：

如果您有一个事物列表，其中每个事物都有您想要一起显示但乐于作为一个组进行操作的子元素，那么 ListCtrl 可能适合您。

如果您有一个事物列表，其中每个事物都有子元素，但您有兴趣独立操作这些子元素，那么 ListCtrl 似乎*不是*您想要的。

我已经开始使用 Grid 小部件，到目前为止，它似乎可以满足我的目的。这可能会在以后回来咬我，但现在它似乎有效。这是来自 Wx Huge Grid 演示的一些稍微修改的代码，以说明单击网格小部件*将*如何返回行和列“地址”。

如果有人对如何从 ListCtrl 获取列号有任何建议，我当然会全神贯注。

```
import  wx
import  wx.grid as  gridlib

#---------------------------------------------------------------------------
class HugeTable(gridlib.PyGridTableBase):
    def __init__(self, log):
        gridlib.PyGridTableBase.__init__(self)
        self.log = log

        self.odd=gridlib.GridCellAttr()
        self.odd.SetBackgroundColour("sky blue")
        self.even=gridlib.GridCellAttr()
        self.even.SetBackgroundColour("sea green")

    def GetAttr(self, row, col, kind):
        attr = [self.even, self.odd][row % 2]
        attr.IncRef()
        return attr

    # This is all it takes to make a custom data table to plug into a
    # wxGrid.  There are many more methods that can be overridden, but
    # the ones shown below are the required ones.  This table simply
    # provides strings containing the row and column values.

    def GetNumberRows(self):
        return 10000

    def GetNumberCols(self):
        return 10000

    def IsEmptyCell(self, row, col):
        return False

    def GetValue(self, row, col):
        return str( (row, col) )

    def SetValue(self, row, col, value):
        self.log.write('SetValue(%d, %d, "%s") ignored.\n' % (row, col, value))

#---------------------------------------------------------------------------
 class HugeTableGrid(gridlib.Grid):
    def __init__(self, parent, log):
        gridlib.Grid.__init__(self, parent, -1)

        table = HugeTable(log)

        # The second parameter means that the grid is to take ownership of the
        # table and will destroy it when done.  Otherwise you would need to keep
        # a reference to it and call it's Destroy method later.
        self.SetTable(table, True)

        self.Bind(gridlib.EVT_GRID_CELL_RIGHT_CLICK, self.OnCellRightClick)

    def OnCellRightClick(self, event):
        print "OnCellRightClick: (%d,%d)\n" % (event.GetRow(), event.GetCol())

#---------------------------------------------------------------------------
 class TestFrame(wx.Frame):
    def __init__(self, parent, log):
        wx.Frame.__init__(self, parent, -1, "Huge (virtual) Table Demo", size=(640,480))
        grid = HugeTableGrid(self, log)

        grid.SetReadOnly(5,5, True)

#---------------------------------------------------------------------------
if __name__ == '__main__':
    import sys
    app = wx.App()
    frame = TestFrame(None, sys.stdout)
    frame.Show(True)
    app.MainLoop() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T14:31:10.347

遗憾的是，没有获取列信息的好方法。我确实找到了关于此事的讨论：[http ://wxpython-users.1045709.n5.nabble.com/Getting-row-col-of-selected-cell-in-ListCtrl-td2360831.html](http://wxpython-users.1045709.n5.nabble.com/Getting-row-col-of-selected-cell-in-ListCtrl-td2360831.html)

听起来你必须自己计算。根据 Robin 的说法，wx.lib.mixins.listctrl.TextEditMixin 中有一些代码可能会有所帮助。我还找到了 ObjectListView（ListCtrl 的包装器）的配方，它也可能有所帮助：[http ://code.activestate.com/recipes/577543-objectlistview-getcolumnclickedevent-handler/](http://code.activestate.com/recipes/577543-objectlistview-getcolumnclickedevent-handler/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T22:32:25.767

我不知道单击一行时是否可以在 listctrl 中获取列号（因为它选择整行，而不是单个单元格）...但是，如果您在单击列时想要列号（就像我做的那样，经过大量搜索后，这里结束了）您可以将事件（wx.EVT_LIST_COL_CLICK/wx.EVT_LIST_COL_RIGHT_CLICK）绑定到您的 listctrl 并在事件方法中使用 event.m_col ...它将列号存储在那里

```
 self.Bind(wx.EVT_LIST_COL_CLICK, self.onColumnClick, self.myListCtrl)
...
def onColumnClick(self, evt):
    column_clicked = evt.m_col 
```

从这里得到我的灵感：[http](http://wxpython.org/Phoenix/docs/html/ListCtrl.html) ://wxpython.org/Phoenix/docs/html/ListCtrl.html ，在“这个类发出的事件”部分

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-02-13T10:31:19.260

这在 listctrl 中对我有用。它并不完美，但它有效。唯一的限制是我们要选择的左侧的所有列都必须可见。

```
self.Bind(wx.EVT_LEFT_DCLICK, self.OnDoubleClick)
self.col=-1
....

def OnDoubleClick(self, event):
    posx=event.GetX()
    self.col=-1
    while posx>0:
        self.col+=1
        posx=posx-self.GetColumnWidth(self.col)        
    event.Skip() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-20T20:19:53.230

这适用于网格，可能很容易适应 ListCtrl：

```
def onclick(self,event):
    rows = cumsum(self.GetRowSize(i) for i in range(self.GetNumberRows()))
    cols = cumsum(self.GetColSize(i) for i in range(self.GetNumberCols()))
    irow = self.GetNumberRows() - sum(event.m_y < y for y in rows)
    icol = self.GetNumberCols() - sum(event.m_x < x for x in cols)
    print irow,icol 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-01-11T19:23:23.043

您可以使用 EVT_LIST_COL_CLICK 或 EVT_LIST_COL_RIGHT_CLICK 事件处理程序中的 event.GetColumn()。这将返回 m_col 值。

# java - 对话框全部被黑色覆盖

> ID：11699335
> 
> 赞同：0
> 
> 时间：2012-07-28T08:01:55.937
> 
> 标签：java, dialog

我正在运行一个程序（我们班的一个 Java 练习）和另一个用于我的 iphone 的 tinyumbrella。当我尝试运行这些程序时，它们的对话框被纯黑色覆盖，我无法真正阅读它们。我问过我的教授，但他说这是他第一次遇到它。按钮是唯一可以看到的。

这是它的外观。[http://thericofranco.wordpress.com/](http://thericofranco.wordpress.com/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T08:06:25.240

没有任何代码很难说，但对我来说看起来像

*   你要么真的把它涂成黑色

*   有东西阻碍了油漆过程

扔掉重现问题不需要的所有代码并发布剩下的代码。当然，您很可能会在此过程中自己发现问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T08:10:34.363

正在使用 ATI radeon 视频卡吗？

查看[java绘画问题-黑色组件](https://stackoverflow.com/questions/5743635/java-paint-problem-black-components)

这是催化剂驱动程序的已知问题

# c# - 在表格中插入修改日期

> ID：11699336
> 
> 赞同：-1
> 
> 时间：2012-07-28T08:02:23.490
> 
> 标签：c#, asp.net, sql-server-2008

我有一个表格`Contacts`，我正在为带有列的客户存储：

*   地址第一行
*   地址线2
*   城市编号
*   EmpID (FK)
*   修改日期（计算，日期时间）

我使用 ASP.NET 4.0，并以 3 个步骤使用 ASP.NET 向导的形式。我的问题很少。

1.  如何插入FK所在`EmpID`的表中。`dbo.Contacts``EmpID`
2.  如何储存`ModifiedDate`？添加时间值的sql参数是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T08:10:07.713

您基本上有两种选择来保持`ModifiedDate`最新状态：

1.  在该列上定义一个`DEFAULT`约束以获取新插入行时的当前日期/时间，并创建一个`AFTER UPDATE`触发器以更新该`ModifiedDate`行的每次更新操作后

2.  `ModifiedDate`在每次对数据库进行保存操作之前在客户端应用程序中设置

**更新：**如果要创建`AFTER UPDATE`触发器，请使用如下代码：

```
CREATE TRIGGER trg_UpdateModifiedDate
ON dbo.YourTableHere
AFTER UPDATE
AS
     UPDATE dbo.YourTableHere
     SET ModifiedDate = GETDATE()
     WHERE AddressID IN (SELECT AddressID FROM Inserted) 
```

在这里，我假设您的表`YourTableHere`具有某种主键 - 一个类似的列`ID`，可以唯一且清楚地标识每一行。根据该行，您可以更新`ModifiedDate`已由给定 SQL 语句更新的所有行。`Inserted`是在触发器代码主体中可用的伪表，其中包含已被导致此触发器触发的操作修改的所有行（受您的`UPDATE`语句影响的所有行 on `YourTableHere`）

在此处阅读有关触发器的更多信息：

*   [触发器简介](http://www.sqlteam.com/article/an-introduction-to-triggers-part-i)
*   [有关 CREATE TRIGGER 的 MSDN 文档](http://msdn.microsoft.com/en-us/library/aa258254%28v=sql.80%29.aspx)
*   [SQL Server 2008 中的 SQL 触发器示例](http://www.kodyaz.com/articles/sql-trigger-example-in-sql-server-2008.aspx)

**更新 #2：**如果您的`ModifiedDate`列实际上是在SQL Server 表级别**计算的，****则不能**直接更新它。您需要找出它的计算依据，然后您需要修改该列（如果可以的话）。

要找出它的计算依据，请在您的 SQL Server 数据库上运行此查询：

```
SELECT 
    c.name, c.is_computed, c.definition
FROM 
    sys.computed_columns c
WHERE 
    object_id = OBJECT_ID('dbo.Contacts')
    AND c.Name = 'ModifiedDate' 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-28T08:13:12.627

您可以在修改日期时使用简单的 UPDATE 语句，例如..

```
 update tabelname set modifieddate='@Prameterdate' where empid='01' 
```

# c++ - 用 operator= （赋值）定义部分副本是个好主意吗？

> ID：11699341
> 
> 赞同：0
> 
> 时间：2012-07-28T08:05:11.693
> 
> 标签：c++, operator-overloading

请考虑以下代码段：

```
class Pin
{
public:
    Pin()
    {
    }
};

class Connection
{
    Pin& _from;
    Pin& _to;

public:
    Connection(Pin& from, Pin& to)
        : _from(from), _to(to)
    {
    }
};

class Device
{
    Pin _a, _b;
    Connection _int_conn;

public:
    Device()
        : _int_conn(_a, _b)
    {
    }
}; 
```

现在我想定义`operator=`这样`Device`可以相互复制：

```
int main()
{
    Device a, b;

    a = b;
} 
```

当然，默认值`operator=`是不够的，因为`Connection`该类包含两个引用。然而，对于这个特定的操作，希望`Device`复制所有其他属性并保持引用完好无损（因为它们应该始终指向“父”引脚）。

另一方面，`Connection`该类也可以被用户使用，那么这两个引脚可以属于任何其他类。在这种情况下，虽然复制其他属性可能是有益的，但使用它似乎有点不正确`operator=`。换句话说：

```
int main()
{
    Pin a, b, c, d;
    Connection y(a, b), z(c, d);

    y = z;
} 
```

复制非参考成员对我来说似乎是错误的。

此外，如果我决定更改对指针的引用，我可能也想`operator=`复制它们。

我在这里吗？最好的行动方案是什么？我考虑定义一个额外的方法，比如：

```
void Connection::copy_properties(Connection& rhs) 
```

或者只是将它们复制到`Device::operator=`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T08:15:22.887

> [引用] 应始终指向“父”引脚。

这是`Connection`或的不变量`Device`吗？如果是后者，请考虑以下版本`Connection`：

```
class Connection
{
    Pin* _from;
    Pin* _to;

public:
    Connection(Pin& from, Pin& to)
        : _from(&from), _to(&to)
    {}
}; 
```

也就是说，这个版本的复制语义有些明显。然后`Device::operator=`现在必须确保不破坏`Device`不变量（例如，在保持不变的情况下分配任何需要分配的内容`_int_conn`）。事实上，让`_int_conn`一个`const`成员可以强制执行；但这仅`const`与`Connection`.

# prolog - 为什么我得到 Arguments 没有为参数 A 充分实例化？

> ID：11699351
> 
> 赞同：1
> 
> 时间：2012-07-28T08:07:01.913
> 
> 标签：prolog

这是我的代码：

```
getMin([Y|List1],X):-
    getMin(List, Y, X).

getMin([A|List],B,X):-
        A=<B,
        getMin(List,A,X);
        B=<A,
        getMin(List,B,X).
getMin([],X,X). 
```

据我所知，当输入 getMin/3 A 时，A 应该是 1，但在 A=< BI 时会出现“参数没有充分实例化”错误。为什么以及如何解决它？

我也发现[了这一点](https://stackoverflow.com/questions/9780067/simple-prolog-program-getting-error-2-arguments-are-not-sufficiently-instan)，但由于我对 Prolog 很陌生，我不知道他们到底在哪里得到了错误，以及为什么没有在那里实例化参数。（还有很多其他类似的帖子，但很难在其他有点不同的程序和你的程序之间建立联系。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T08:29:05.293

第一个规则头中有一个错字：List1 而不是 List。如果您使用 SWI-Prolog，它的语法高亮功能将帮助您发现此类问题。

**在这里编辑**你可以明白我的意思 ![突出显示 List1 和 List 的图像](../Images/6227ec345c5d84fb97f482ed009918d9.png)

测试，修正后：

```
?- getMin([4,2,6,1,3],X).
X = 1 ;
false. 
```

# ruby-on-rails - HABTM 连接表验证

> ID：11699353
> 
> 赞同：0
> 
> 时间：2012-07-28T08:07:46.813
> 
> 标签：ruby-on-rails, validation, activerecord

如何在 HABTM 关联上验证唯一性？

一个用户可以在多个团队中，并且多个团队可以有一个用户。但是你如何阻止一个用户两次添加到同一个团队中呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T08:11:05.970

在数据库中，您可以通过在连接表中的 {user, team} 元组上设置唯一约束来做到这一点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T08:19:43.807

您可以通过此验证来做到这一点

```
validates_uniqueness_of :user_id, :scope => :team_id 
```

# java - 带有详细文档的开源 Spring 和 Hibernate 应用程序

> ID：11699354
> 
> 赞同：1
> 
> 时间：2012-07-28T08:08:30.523
> 
> 标签：java, spring, hibernate

虽然我在 Sourceforge.net 和 code.google.com 上找到了许多 spring 和 hibernate 应用程序开源，但没有一个真正完整的文档。任何人都可以提供一个指向和开源项目的详细文档。

# jquery - 从键盘上按向上箭头时如何在上一行控件中设置焦点

> ID：11699355
> 
> 赞同：0
> 
> 时间：2012-07-28T08:08:35.333
> 
> 标签：jquery, asp.net-ajax, telerik, rad-controls

我正在使用 Telerik RadGrid，我有 3 个带有编辑模式的列，所以我想通过按键盘上的导航键来移动光标，所以我需要如何在从键盘按下导航键时在上一行或下一行控件中设置焦点，对于left and right 用于左右移动。

提前致谢。

# python - 两个解决方案之间的巨大运行时差异：Project Euler #14

> ID：11699358
> 
> 赞同：2
> 
> 时间：2012-07-28T08:09:03.520
> 
> 标签：python, performance

我使用以下代码解决了[Project Euler #14 ：](http://projecteuler.net/problem=14)

```
import time
start_time = time.time()
def collatz_problem(n):
    count = 0
    while n!=1:
        if n%2==0:
            n = n/2
            count = count+1
        elif n%2!=0:
            n = 3*n+1
            count = count +1
    return count+1

def longest_chain():
    max_len,num = 1,1
    for i in xrange(13,1000000):
        chain_length = collatz_problem(i)
        if chain_length > max_len:
            max_len = chain_length
            num = i

    return num

print longest_chain()
print time.time() - start_time, "seconds" 
```

上述解决方案需要`~35 seconds`运行。[现在，我从这里](http://www.s-anand.net/euler.html)尝试了另一种解决方案。

解决方案：

```
import time
start_time = time.time()
cache = { 1: 1 }
def chain(cache, n):
     if not cache.get(n,0):
         if n % 2: cache[n] = 1 + chain(cache, 3*n + 1)
         else: cache[n] = 1 + chain(cache, n/2)
     return cache[n]
m,n = 0,0
for i in xrange(1, 1000000):
    c = chain(cache, i)
    if c > m: m,n = c,i

print n
print time.time() - start_time, "seconds" 
```

现在，这个解决方案只需要`~3.5 seconds`.

**第一个问题：**

现在，由于我是 python 初学者，我不明白为什么这两种方法有这么大的区别，以及如何修改我的代码以使其更有效。

**第二个问题：**

在解决项目欧拉问题时，是否应该牢记任何时间限制，并且我的代码真的那么低效。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-28T08:15:22.933

在第一个版本中，您可能会多次计算某些链的长度，因为它们是其他链中的子链。

在第二个解决方案中，由于缓存，您只计算每个链的长度一次。这种优化技术称为[记忆](http://en.wikipedia.org/wiki/Memoization)化。

* * *

记忆化的一个更引人注目的例子是[斐波那契数](http://en.wikipedia.org/wiki/Fibonacci_number)列的计算。这是简单的递归解决方案：

```
def fib(n):
    if n < 2:
        return n
    else:
        return fib(n-1) + fib(n-2) 
```

它需要指数级的时间，因为`fib(n)`评估`fib(n-1)`和`fib(n-2)`，但`fib(n-1)`也评估`fib(n-2)`，所以你最终会再次进行完全相同的计算。尝试`fib(35)`使用此算法计算或更高。

通过缓存`fib(x)`for each的结果，`x`您可以避免重新计算相同的结果，从而将性能提高到线性时间。

```
def fib2(n):
    if n < 2:
        return n
    elif n in cache:
        return cache[n]
    else:
        result = fib2(n-1) + fib2(n-2)
        cache[n] = result
        return result 
```

**有关的**

*   [什么是 memoization 以及如何在 Python 中使用它？](https://stackoverflow.com/questions/1988804/what-is-memoization-and-how-can-i-use-it-in-python)

# java - Android 应用程序的 SQLite 数据库

> ID：11699362
> 
> 赞同：-1
> 
> 时间：2012-07-28T08:09:54.593
> 
> 标签：java, android, database, sqlite, import

我对 Android 中的数据库有疑问。我想在我的应用程序中使用数据库，但我不想在那里创建它。我现在的问题是，有没有办法在 PC 上使用特定程序创建 SQLite 数据库，或者甚至可以将 Access 数据库转换为 SQLite 数据库，然后将其导入我的应用程序？它将是一个“静态”数据库，应用程序只需读取它。谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T08:40:41.427

您可以使用 SQlite3 数据库作为 android 中的内部存储。为此，您可以使用 SQLite3 Manager。您可以在此处获取它[http://sqlitemanager.en.softonic.com/](http://sqlitemanager.en.softonic.com/)。您必须扩展 SQLiteOpenHelper 类才能使用它。有关在 android 中使用数据库的更多详细信息，请参阅此链接[http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T08:38:40.967

首先创建您的数据库（使用 SQLite 的任何工具），将其放在您的`assets`目录中，并在第一次使用时复制到`/data/data/YOUR_PACKAGE/databases/`目录。然后使用此路径连接您的数据库。看到[`android.database.sqlite.SQLiteDatabase.openDatabase()`](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html)这将访问给定文件路径的数据库。

```
SQLiteDatabase db = SQLiteDatabase.openDatabase(yourDbPath, null, 0); 
```

请参阅[在 Android 应用程序中使用您自己的 SQLite 数据库](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)。

# android - 按钮保持按下状态

> ID：11699364
> 
> 赞同：-1
> 
> 时间：2012-07-28T08:10:08.623
> 
> 标签：android, button

在我的 xml 文件中，我有这个按钮：

```
<Button
android:id="@+id/button_8"
android:layout_width="0dp"
android:layout_height="wrap_content"
android:text="@string/Bf"
android:background="@drawable/button_purple" 
android:layout_weight="1"
android:textColor="#ffffff"
android:onClick="action"            
/> 
```

在我的活动中，我有这个按钮方法：

```
public void action (View v)
{
    s = "m";
    changeCouleur("blue");
    v.setPressed(true);
} 
```

当我按下按钮时，它正在工作，但按钮没有保持按下状态。

我不使用图像，这是我用于颜色的图像：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true" >
        <shape>
            <solid
                android:color="#449def" />
            <stroke
                android:width="1dp"
                android:color="#2f6699" />
            <corners
                android:radius="3dp" />
            <padding
                android:left="10dp"
                android:top="10dp"
                android:right="10dp"
                android:bottom="10dp" />
        </shape>
    </item>
    <item android:state_focused="true" >
        <shape>
            <solid
                android:color="#449def" />
            <stroke
                android:width="1dp"
                android:color="#2f6699" />
            <corners
                android:radius="3dp" />
            <padding
                android:left="10dp"
                android:top="10dp"
                android:right="10dp"
                android:bottom="10dp" />
        </shape>
    </item>
    <item>
        <shape>
            <gradient
                android:startColor="#449def"
                android:endColor="#2f6699"
                android:angle="270" />
            <stroke
                android:width="1dp"
                android:color="#2f6699" />
            <corners
                android:radius="4dp" />
            <padding
                android:left="10dp"
                android:top="10dp"
                android:right="10dp"
                android:bottom="10dp" />
        </shape>
    </item>
</selector> 
```

我尝试了切换按钮，但这不符合我想要做的事情。如果您发现有问题，请提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T09:50:31.350

也许您可以将按钮更改为图像，然后您可以在按下按钮时创建动画

这是一个例子

```
Bitmap source0 = BitmapFactory.decodeResource(getResources(), R.drawable.top);
Bitmap source1 = BitmapFactory.decodeResource(getResources(), R.drawable.top_a);
Bitmap source2 = BitmapFactory.decodeResource(getResources(), R.drawable.top_b);
Bitmap source3 = BitmapFactory.decodeResource(getResources(), R.drawable.top_c);
v.startAnimation(AnimationUtils.loadAnimation(mainContext, R.anim.image_click));
toptop.setImageBitmap(source0);
top_a.setImageBitmap(processingBitmap_Brightness(source1));
top_b.setImageBitmap(source2);
top_c.setImageBitmap(source3); 
```

将此代码放在 ontouch 事件上，然后 v.startanimation 用于触摸图像时的动画然后我们将选定的图像视图设置为突出显示，并将亮度设置为比其他图像更亮

这是 anim.image_click 代码

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android">

<alpha
android:fromAlpha = "1.0"
android:toAlpha = "0.5"
android:duration = "300">
</alpha>
<scale
android:fromXScale = "1"
android:toXScale = "0.9" 
android:fromYScale = "1"
android:toYScale = "0.9" 
android:pivotX="50%"
android:pivotY="50%" 
android:duration = "50">
</scale>
</set> 
```

这是 procssingBitmap_Brightness （用于处理图像亮度）

```
private Bitmap processingBitmap_Brightness(Bitmap src){
            Bitmap dest = Bitmap.createBitmap(
              src.getWidth(), src.getHeight(), src.getConfig());

            for(int x = 0; x < src.getWidth(); x++){
             for(int y = 0; y < src.getHeight(); y++){
              int pixelColor = src.getPixel(x, y);
              int pixelAlpha = Color.alpha(pixelColor);

              int pixelRed = Color.red(pixelColor) + brightnessValue;
              int pixelGreen = Color.green(pixelColor) + brightnessValue;
              int pixelBlue = Color.blue(pixelColor) + brightnessValue;

              if(pixelRed > 255){
               pixelRed = 255;
              }else if(pixelRed < 0){
               pixelRed = 0;
              }

              if(pixelGreen > 255){
               pixelGreen = 255;
              }else if(pixelGreen < 0){
               pixelGreen = 0;
              }

              if(pixelBlue > 255){
               pixelBlue = 255;
              }else if(pixelBlue < 0){
               pixelBlue = 0;
              }

              int newPixel = Color.argb(
                pixelAlpha, pixelRed, pixelGreen, pixelBlue);

              dest.setPixel(x, y, newPixel);

             }
            }
            return dest;
           } 
```

# php - 在 PHP 中使用正则表达式解析不同类型的格式

> ID：11699369
> 
> 赞同：0
> 
> 时间：2012-07-28T08:11:18.057
> 
> 标签：php, regex, parsing

我需要根据某些特定要求解析（拆分）我的数据库中的一些句子。这些句子可以有不同类型的格式，我 80% 的句子有以下格式之一：

1.  COMPANY_NAME，CITY_NAME_1（STREET_ADDRESS，ZIP_CODE CITY_NAME_2）。ANY_STRING
2.  COMPANY_NAME、CITY_NAME_1、STREET_ADDRESS、ZIP_CODE CITY_NAME_2。ANY_STRING
3.  COMPANY_NAME，CITY_NAME_1，STREET_ADDRESS，ZIP_CODE CITY_NAME_2，（ANY_STRING：ANY_STRING。）。ANY_STRING
4.  COMPANY_NAME (ANY_STRING)、CITY_NAME_1、STREET_ADDRESS、ZIP_CODE CITY_NAME_2。ANY_STRING

在这里，我已经指定了规则：

*   COMPANY_NAME 可以包含空格、连字符 (-)、点。
*   COMPANY_NAME 不能有逗号、分号
*   CITY_NAME_1 和 CITY_NAME_2 可以有空格、斜线、断线
*   CITY_NAME_1 和 CITY_NAME_2 不能有逗号
*   CITY_NAME_1 和 CITY_NAME_2 在 95% 的情况下相同，但在 5% 的情况下不同
*   STREET_ADDRESS 可以包含任何内容（逗号、分号、任何特殊字符等）
*   我已经知道 ZIP_CODE（4 位或 5 位或 6 位数字字符串）。

我已经有了每个句子的邮政编码。我想创建将句子和邮政编码作为输入并返回街道名称作为输出的正则表达式或函数。

当然，我可以为上述每种方法创建不同的函数。但是，我怎么知道给定的句子适合哪种格式？是否可以通过正则表达式知道这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T08:31:08.663

首先，您需要定义它是什么类型的字符串（如何分隔）。通过`preg_match()`. 首先，对于这种情况，这`regexp`似乎有点复杂。我们没有数据。

[http://myregexp.com/](http://myregexp.com/) - 将帮助您撰写`regexp`s。

# javascript - 如何定义同名的函数和对象？

> ID：11699372
> 
> 赞同：0
> 
> 时间：2012-07-28T08:11:47.067
> 
> 标签：javascript, function, object, member

所以根据[这个](https://stackoverflow.com/questions/3663775/object-name-same-a-function-name)，这是不可能的。但我称之为废话，因为`jQuery`例如，对象可以被称为具有成员函数的对象（`jQuery.cookie()`），但也可以作为函数本身（`jQuery('my_selector')`）被调用。

如何使用我的对象实现相同的效果？假设我想要一个在命名空间中命名的*对象* ，它有一个*成员 function*，而且还有一个在与*object*相同的命名空间中命名的*函数*。在声明了这样一个对象-函数混合体之后，我将能够进行以下调用：`foo``window` *`bar` *`foo``window``foo`**

 ***`window.foo(arg);`

`window.foo.bar(arg);`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T08:15:00.120

函数也是对象：

```
function foo() { /* blah */ }
foo.bar = function () { /* blah */ } 
```***

# css - CSS 菜单在 IE8 上看起来不太好

> ID：11699375
> 
> 赞同：4
> 
> 时间：2012-07-28T08:12:26.323
> 
> 标签：css, menu

出于某种原因，我的水平菜单在 IE8 上看起来非常糟糕（可能还有以前的版本）（见第一张图片）。最新版本的 safari、firefox 和 chrome 没有问题（见第二张图片）。知道为什么以及如何解决这个问题吗？网站链接[http://goo.gl/nEx5e](http://goo.gl/nEx5e) 谢谢

![IE8 的问题](../Images/9c85404c0412065ca5383eeb3dfde8e8.png)

![菜单应有的样子](../Images/3b10b56ce486e5426288c8ecb2090f7a.png)

**CSS 代码：**

```
#nav
{
    right:2%;
    list-style:none;
    position:fixed;
    /* float:right; */
    top:30px;
    z-index:1000;
    /* width:520px; */
}

#nav > li {
    display: inline-block;
    /* dirty hack for IE7 */
    *display: inline;
    *zoom: 1;
}

#nav a
{
    float:left;
    top:30px;
    display:inline-block;
    font-size:11px;
    margin-left:5px;
    margin-right:5px;
    padding-left:10px;
    padding-right:10px;
    text-decoration:none;
    height:24px;
    color:#666;
    line-height:24px;
    text-align:center;
    box-shadow:1px 1px 2px rgba(0,0,0,0.2);
    background:rgba(255,255,255,0.9);
    text-transform:uppercase;
}

#nav a:hover
{
    background:#dedede;
}

#nav .current a
{
    background:#666;
    color:#ededed; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T08:21:02.327

在阅读我的答案之前，您应该考虑到如果您不**接受**您发布的问题的答案，人们将不太可能回答您的问题。这通常被认为是粗鲁的。

现在...问题是您在白色按钮背景上使用具有透明度的 RGBA。

IE8 及以下无法处理这样的透明色。您需要使用`opacity: 0.x`和手动设置透明度`filter: Alpha(opacity='xx')`。

注意`opacity: 0.8`等于`filter: Alpha(opacity=80)`。

```
#nav a
{
    float:left;
    top:30px;
    display:inline-block;
    font-size:11px;
    margin-left:5px;
    margin-right:5px;
    padding-left:10px;
    padding-right:10px;
    text-decoration:none;
    height:24px;
    color:#666;
    line-height:24px;
    text-align:center;
    box-shadow:1px 1px 2px rgba(0,0,0,0.2);
    background: white;           // <------ !
    opacity: 0.8;                // <------ !
    filter: Alpha(opacity='80'); // <------ !
    text-transform:uppercase;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T08:48:12.553

**IE8**及以下版本无法呈现**alpha-transparency**。所以你可以这样使用：

```
div {
  background-color: #xxxxxx;
  background-color: rgba(x,x,x,x);
} 
```

这可能会帮助你[http://css-tricks.com/ie-background-rgb-bug/](http://css-tricks.com/ie-background-rgb-bug/)

浏览器支持：[点击这里](http://caniuse.com/#feat=css3-colors)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T08:27:49.793

Internet Explorer 8 及更早版本[无法呈现](http://caniuse.com/#feat=css3-colors)Alpha 透明度。你需要为他们使用后备（简单`#fff`的 imo 会很好）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T09:07:33.520

### 您可以在 Internet Explorer 6 - 8 中使用 CSS3 PIE ！！！

**PIE**使 Internet Explorer 6-9 能够呈现几个最有用的 CSS3 装饰功能。

从网站：

> *CSS Level 3 带来了一些非常强大的样式功能。圆角、柔和的阴影、渐变填充等等。这些是我们的设计师朋友喜欢使用的元素类型，因为它们使网站具有吸引力，但实施起来困难且耗时，涉及复杂的精灵图像、额外的非语义标记、大型 JavaScript 库和其他可爱的 hack。*

### 在此处查看有关为 IE 8 实现它的更多信息：http: [//css3pie.com/](http://css3pie.com/)

对于不透明度，正如[Anders Holmström](https://stackoverflow.com/users/557127/anders-holmstrom)所说，您可以`filter`在样式中使用带有白色背景的子导航元素：

```
filter: Alpha(opacity='80');
background: #fff; 
```

希望这可以帮助！:)

# asp.net-mvc-3 - 需要使用asp.net mvc3

> ID：11699376
> 
> 赞同：1
> 
> 时间：2012-07-28T08:12:28.480
> 
> 标签：asp.net-mvc-3, visual-studio-2010

我想使用 ASP.net mvc3。我安装了 VS 2010，我的操作系统是 Windows XP SP3。有人请告诉我我需要安装的所有东西。所以要在 VS 2010 上运行我的应用程序，我需要安装 Visual web developer 2010 express。它是否比 VS 2010 更有用。请澄清。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T08:14:09.573

如果您已经安装了 VS2010，则不需要 VS2010 Express。Express 版本是 Visual Studio 的免费轻量级版本。因此，在您的情况下，您需要做的就是安装[ASP.NET MVC 3 Tools Update](http://www.microsoft.com/en-us/download/details.aspx?id=1491) ( `AspNetMVC3ToolsUpdateSetup.exe`)。

# java - XML 解析为某些标签返回 null

> ID：11699382
> 
> 赞同：0
> 
> 时间：2012-07-28T08:13:27.487
> 
> 标签：java, xml, parsing

我试图解析一些由 3ds max 和 maya 生成的 xml 文件。一切正常，但有些值返回 null。例如下面的 concider（带有 .dae 扩展名的 collada）由 max 或 maya 生成的 xml，

```
 <triangles>
   <p>  234 32 4 23 544 35 43 5 435</p>
  </triangles>
  <triangles>
   <p> 43543 45 34 5 12 34 4 36457 6</p>
  </triangles>
  <triangles>
   <p>2345  325 34 543 5 34 534 5 435</p>
  </triangles> 
```

现在，当我使用 java 代码解析时（如果需要，我会提供），

输出是：

```
p has 234 32 4 23 544 35 43 5 435
p has 
p has 2345  325 34 543 5 34 534 5 435 
```

即使有值，输出的第二行也不显示任何内容。现在，如果我自己编辑该行，则输出与预期的一样，即输出如下所示。这里我在 xml 文件中给出了我自己的值。

编辑的xml是

```
 <triangles>
   <p>  234 32 4 23 544 35 43 5 435</p>
  </triangles>
  <triangles>
   <p> 28 234  34 32 4 23 4 23 423  43</p>
  </triangles>
  <triangles>
   <p>2345  325 34 543 5 34 534 5 435</p>
  </triangles> 
```

输出是：

```
p has 234 32 4 23 544 35 43 5 435
p has 28 234  34 32 4 23 4 23 423  43
p has 2345  325 34 543 5 34 534 5 435 
```

上面我已经解释了我面临的问题。[在这里](http://purple-works.com/yardstick/tablemaya.dae)您可以找到由 Maya 生成的文件。我使用的java代码如下。

```
import java.io.File;
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;

public class Main {

    public static void main(String args[]) {        

        try {

            DocumentBuilderFactory docBuilderFactory = DocumentBuilderFactory.newInstance();
            DocumentBuilder docBuilder = docBuilderFactory.newDocumentBuilder();
            Document doc = docBuilder.parse (new File("d://tablemaya.dae"));

            // normalize text representation
            doc.getDocumentElement ().normalize ();
            System.out.println ("Root element of the doc is " + 
                 doc.getDocumentElement().getNodeName());

            NodeList listOfPersons = doc.getElementsByTagName("library_geometries");
            int totalPersons = listOfPersons.getLength();
            System.out.println("Total no of people : " + totalPersons);
            Node firstPersonNode = listOfPersons.item(0);
            if(firstPersonNode.getNodeType() == Node.ELEMENT_NODE){

                Element firstPersonElement = (Element)firstPersonNode;

                //-------
                NodeList geometrylist = firstPersonElement.getElementsByTagName("geometry");
                System.out.println(geometrylist.getLength() + " Geometry size");
                for(int k=0;k<geometrylist.getLength();k++) {
                    Element geometryItr = (Element)geometrylist.item(k);

                    NodeList meshlist = geometryItr.getElementsByTagName("mesh");

                    System.out.println("Mesh length is " + meshlist.getLength());

                    for(int k1=0;k1<meshlist.getLength();k1++) {
                        Element geometryItr1 = (Element)meshlist.item(k1);

                        NodeList meshlist1 = geometryItr1.getElementsByTagName("source");

                        System.out.println("Source length is " + meshlist1.getLength());                        
                    }
                    for(int k2=0;k2<meshlist.getLength();k2++) {
                        Element geometryItr1 = (Element)meshlist.item(k2);

                        NodeList trianglelist = geometryItr1.getElementsByTagName("triangles");

                        //System.out.println("Triangles length is " + trianglelist.getLength());     

                            for(int o=0;o<trianglelist.getLength();o++) {

                                Element trichildnodes = (Element) trianglelist.item(o);
                                NodeList inputs = trichildnodes.getElementsByTagName("input");
                            NodeList p = trichildnodes.getElementsByTagName("p");
                            //System.out.println("Fucking Problem " + p.item(0).getFirstChild().getNodeValue());
                            Element ppp = (Element) p.item(0);
                            //System.out.println("Node Value " + ppp.getNodeValue());
                            System.out.println(inputs.getLength() + "Input length");

                            for(int in=0;in<inputs.getLength();in++) {

                                Element inn = (Element) inputs.item(in);
                                System.out.println(inn.getAttribute("semantic") + " " + inn.getAttribute("source") + " Attributes");

                            }

                            for(int i=0; i<p.getLength(); i++) {
                                Element e = (Element)p.item(i);  
                                String ss = e.getFirstChild().getTextContent();
                                System.out.println("Noide is " + ss);
                            }
                            //System.out.println(p.getLength() +  " P's length" );
                            //System.out.println("P's content " + ppp.getFirstChild().getNodeValue());

                        }

                    }
                    for(int k1=0;k1<meshlist.getLength();k1++) {
                        Element geometryItr1 = (Element)meshlist.item(k1);

                        NodeList meshlist1 = geometryItr1.getElementsByTagName("vertices");

                        System.out.println("Vertices length is " + meshlist1.getLength());                      
                    }

                }

            }

        }catch (Exception err) {
            err.printStackTrace();
        }

    }

} 
```

我无法获取`<p>`. 我的代码或xml可能有什么问题？请有人在这方面帮助我。感谢您阅读我的问题。

维奈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T08:28:45.330

您的问题是您正在打印第一个节点。

```
ppp.getFirstChild().getNodeValue() 
```

你可以这样尝试：

```
ppp.getElementsByTagName("p").getFirstChild().getNodeValue() 
```

这应该可以解决问题。将`getFirstChild`采用内部的第一个节点`ppp`，这可能是一个文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T10:58:15.623

它可能是一个 Eclipse 错误。您的代码似乎正确，我编写[了自己的 XPath](http://pastebin.com/8GqmAebC)演示来测试输入文件。该程序在 Eclipse 中运行良好，但是当我尝试通过 输出`<p>`内容时`System.out.println()`，第二个`<p>`没有打印到 Eclipse 控制台，因为该行的字符太多（超过 30K）。在 Eclipse bugzilla 上查看[此评论：](https://bugs.eclipse.org/bugs/show_bug.cgi?id=87299#c5)

> 在打印长行时，我在 Mac 上的控制台上发生了奇怪的事情，例如：
> 
> ```
> public static void main(String[] args)
> {
>     System.out.print("Counting");
>     StringBuffer buffer = new StringBuffer();
>     for (int i=0; i<28504; i++)
>     {
>         buffer.append("*");
>     }
>     System.out.print(" some more");
>     System.out.println(buffer);
>     System.out.println("Complete");
> } 
> ```
> 
> 我从中得到的输出如下：
> 
> ```
> Counting some
> Complete 
> ```
> 
> 即不显示长字符串'*'并覆盖前面输出的一部分
> 
> 史蒂夫

所以文件被成功读取和处理，目标信息被完全收集，只有输出部分失败，但这不取决于你——它不会影响程序，因为我不认为你想要的只是打印一个用户眼中的巨大文本行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T08:25:30.763

我没有完全深入研究您的代码，但这似乎是一个比您试图保存它的数据类型更大的价值问题。

因为 43543 是最大的值并且被错过了。

# iphone - 如何计算在 iphone 的 UIWebView 中加载 url 所需的时间？

> ID：11699386
> 
> 赞同：0
> 
> 时间：2012-07-28T08:14:42.967
> 
> 标签：iphone, uiwebview, timeout, nsurlconnection

他们有什么方法可以找到加载任何**网址**所花费的时间`UIWebView`吗？

实际上我的问题是，如果我的 url 需要超过**10 分钟才能加载**，则显示超时错误。

实际上我使用了一些代码来加载我的第一个 url，但是我的第一个加载 url 重定向到另一个 url，这需要太多时间来加载。

这是我用来加载我的第一个网址的代码。，

```
 NSURL *url = [NSURL URLWithString:urlAddress];
  NSURLRequest *requestObj=[NSURLRequest requestWithURL:url cachePolicy:NSURLCacheStorageNotAllowed timeoutInterval:10];
  [webView loadRequest:requestObj]; 
```

如何找到加载我的重定向网址所花费的时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T08:19:30.520

试试这个：

```
 @interface Foo: NSObject <UIWebViewDelegate> {
        NSDate *startDate;
    }

    // etc. In the implementation:
    NSURL *url = [NSURL URLWithString:urlAddress];
    NSURLRequest *requestObj = [NSURLRequest requestWithURL:url cachePolicy:NSURLCacheStorageNotAllowed timeoutInterval:10];
    webView.delegate = self;
    [webView loadRequest:requestObj];
    startDate = [[NSDate date] retain];

    - (void)webViewDidFinishLoading:(UIWebView *)webView
    {
        NSTimeInterval loadTimeInSeconds = [[NSDate date] timeIntervalSinceDate:startDate];
        // do what you want to it
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T08:21:50.407

您可以在调用`[webView loadRequest:requestObj];`.. 时立即启动一个计时器，并在 - 的委托方法实现中停止该计时器，`webViewDidFinishLoad:` 并且超时间隔以秒为单位而不是以分钟为单位......

但是我认为您不应该这样做，因为所花费的时间并不总是恒定的，因为这取决于服务器响应的速度，这取决于特定时间实例的流量...

所以它可能会在 3 秒内完成加载，甚至可能需要 3 分钟.. 所以我的建议是给出大量的超时间隔，但也要显示一个网络连接指示器....希望这会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T08:23:54.260

你可以这样做

```
 double timeOutTime = 60*10; //10 mins
  NSURL *url = [NSURL URLWithString:urlAddress];
  NSURLRequest *requestObj=[NSURLRequest requestWithURL:url cachePolicy:NSURLCacheStorageNotAllowed timeoutInterval:10];
  [self performSelector:@selector(timeOutMethod) withObject:nil afterDelay:timeOutTime];
  [webView loadRequest:requestObj];

- (void)timeOutMethod {
    ///do what ever you want to do
   } 
```

这种方法可以取消上面的请求

```
- (void)webViewDidFinishLoading:(UIWebView *)webView {
        // This will cancel the previous request.
        [NSObject cancelPreviousPerformRequestsWithTarget:self selector:@selector(timeOutMethod) object:nil];
  } 
```

# javascript - Python CGI 脚本，我无法将“+”加号运算符作为参数传递

> ID：11699393
> 
> 赞同：1
> 
> 时间：2012-07-28T08:16:15.700
> 
> 标签：javascript, python, cgi, url-parameters

我正在尝试将参数传递给 python cgi 脚本，该参数包含加号运算符。

```
 /cgi-bin/test.py?input=print%20"%20"%20"%20%20-+-\" 
```

python cgi 脚本很简单：

```
#!/usr/bin/python -w
import cgi
fs = cgi.FieldStorage()

print "Content-type: text/plain\n"
strE=fs.getvalue("input")
print strE 
```

我的输出是：

```
 print " " "  - -\" 
```

我不明白为什么“+”加号运算符被空格代替，我该如何传递“+”加号运算符？

**编辑**

@Tom Anderson，回答了我的问题，我想进一步扩展我的问题。

我有一个调用获取带有参数的 url 的 java-script 函数：

```
 <script type="text/javascript">

            function PostContentEditable(editableId,targetOutput)
            {
                        var texthtml = document.getElementById(editableId).innerHTML
                        var tmp = document.createElement("DIV");
                        tmp.innerHTML = texthtml ;
                        var str= tmp.textContent||tmp.innerText;

                        var xmlhttp;
                        if (str.length == 0){
                            document.getElementById(targetOutput).innerHTML = "";
                            return;
                        }
                        if(window.XMLHttpRequest){
                            xmlhttp=new XMLHttpRequest();
                        }
                        else{
                            xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
                        }
                        xmlhttp.onreadystatechange=function(){
                            if (xmlhttp.readyState==4 && xmlhttp.status==200){
                                 document.getElementById(targetOutput).innerHTML=xmlhttp.responseText;
                            }
                        }

                        xmlhttp.open("GET","../cgi-bin/exercise.py?input="+str,true);
                        xmlhttp.send();
            }
            </script> 
```

是否有一个自动内置功能可以将所有特殊字符替换为我需要的？

```
 str = escapeStringToNativeUrl(str) ? 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T08:20:08.333

在 URL 的查询部分，`+`是一个特殊的代码，表示一个空格。

这是因为 HTML 规范中有关表单的部分指定[表单数据被编码为`application/x-www-form-urlencoded`查询字符串](http://www.w3.org/TR/REC-html40/interact/forms.html#h-17.13.3)。在该编码中，[空格字符被替换为 `+'](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.1)。

因此，Python 正确解码了您的输入。

如果要传递实际的加号，则需要将其[百分比编码](https://www.rfc-editor.org/rfc/rfc3986#section-2.1)为`%2B`.

在 JavaScript 中，我相信[构建查询字符串的正确方法是使用`encodeURIComponent`](https://stackoverflow.com/questions/75980/best-practice-escape-or-encodeuri-encodeuricomponent).

# jquery - 如何选择单击的 div 及其子锚元素

> ID：11699395
> 
> 赞同：1
> 
> 时间：2012-07-28T08:16:24.563
> 
> 标签：jquery

所以我有这种情况

```
<div class='linkDiv'>
<a href='#' class='link'>
Click here
</a>
</div> 
```

当您单击 linkDiv 时，我想将相同的类添加到 .linkDiv 和 .link 但只有单击的类

```
$('.linkDiv').click(function(){
//some other code that works fine
//atm i have this
$(this).addClass('active');
$('.link', this).addClass('active');
}); 
```

我如何同时选择单击的 div 和该 div 的子锚点？

我试过这个：

```
$('.linkDiv, .link', this) 
```

但它只选择了 .link

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T08:19:15.117

您可以将[find()](http://api.jquery.com/find/)与[andSelf()](http://api.jquery.com/andSelf/)一起使用：

```
$(".linkDiv").click(function() {
    $(this).find(".link").andSelf().addClass("active");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T08:28:25.267

```
$(".linkDiv").click(function() {
 $(this).addClass("active");
 $(this).children().addClass("active");
}); 
```

# mvvm - 如何使用敲除映射？

> ID：11699398
> 
> 赞同：0
> 
> 时间：2012-07-28T08:16:52.653
> 
> 标签：mvvm, mapping, knockout.js

我已将绑定应用到以下视图模型

```
var groupDeleteViewModel = {
        group: { Id: ko.observable(), Name: ko.observable(), Members: ko.observableArray() },
        load: function (item) {
            debugger

        },
        remove: function (item) {
            groupDeleteViewModel.group.Id(item.Id());
            groupDeleteViewModel.group.Name(item.Name());
            groupDeleteViewModel.group.Members(item.Members());
            $("#groupDelete").show();
        },
        cancel: function () {
            $("#groupDelete").hide();
        }
    } 
```

remove 函数加载视图，其中包含已在*item*中传递给 remove 函数的数据。

```
<div id="groupDelete" class="pop-window filter-view">
    <h2>
        Delete Group
    </h2>
    <table>
        <tr>
            <th>
                Name
            </th>
            <td>
                <span data-bind="text:group.Name" />
            </td>
        </tr>
        <!--ko foreach: group.Members-->
        <tr>
            <th>
            </th>
            <td>
                <div data-bind="text:Name" class="grey-border">
                </div>
            </td>
            <td>
            </td>
        </tr>
        <!--/ko-->
    </table>
    <span class="centeralign">
        <input type="button" value="Delete" data-bind="click: remove" class="delete" />
        <input type="button" value="Cancel" data-bind="click: cancel" />
    </span>
</div> 
```

我不想继续将*item*的每个元素映射到*groupDeleteViewmodel.group*的每个元素。我已经在代码中的许多其他地方完成了它，这使代码变得非常混乱。我想使用 ko.mapping 插件来做同样的事情。

到目前为止，我尝试过的是-

```
remove:function (item){
            var data = ko.mapping.toJS(item);
            ko.mapping.fromJS(data, groupDeleteViewModel.group);
            $("#groupDelete").show();
} 
```

但这只是行不通。我真的不知道为什么。它应该工作得很好。有人能说出在这种情况下使用 ko.mapping 的正确方法是什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T12:49:07.443

映射插件正在查找 中已经存在的映射数据`groupDeleteViewModel.group`，但没有找到，因为您没有`groupDeleteViewModel.group`使用映射插件进行初始化。因此，不要像您那样初始化组：

```
group: { Id: ko.observable(), Name: ko.observable(), Members: ko.observableArray() } 
```

使用映射插件对其进行初始化：

```
group: ko.mapping.fromJS({ Id: undefined, Name: undefined, Members: [] }) 
```

这是我摆弄你的代码：[小提琴](http://jsfiddle.net/KXhem/13/)

# jquery - JQuery中如何分配和访问表的td的id

> ID：11699399
> 
> 赞同：0
> 
> 时间：2012-07-28T08:16:55.043
> 
> 标签：jquery, jquery-selectors

我正在动态插入行。如何将 id 分配给每个 td，以便我可以访问它并在一段时间后更新它。我坚持

```
 $(document).ready(function(){
            var rowNumber = 0;
            var myData=new Array(6);
            myData[0]="txt1";
            myData[1]="txt2";
            myData[2]="txt3";
            myData[3]="txt4";
            myData[4]="txt5";
            myData[5]="txt6";
            $('#display').click(function(){
                //Get the user input
                for(i=0; i<6; i++)
                {
                if(document.getElementById(myData[i]).value !=0)
                {
                var nameInput = document.getElementById(myData[i]).name;

                var Quan = document.getElementById(myData[i]).value;
                //Create a new row with an ID
                var newRow = $('<tr />').attr('id', 'row' + rowNumber);
                //Add some HTML to the row

                newRow.html('<td>' + nameInput + '</td><td>' + Quan + '</td>');

                //Append the new row to the body of the #myTable table
                $('#myTable tbody').append(newRow);

                //Iterate row number
                rowNumber++;

                }
                }
            });
        }); 
```

我正在动态插入行。如何将 id 分配给每个 td，以便我可以访问它并在一段时间后更新它。我坚持下去。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T08:23:41.323

***你不需要它***

```
var td = $('#myTable tr:eq(2) td:eq(1)'); // 3 row 2 col 
```

*看[演示](http://jsfiddle.net/vrvMQ/)*

***但如果你想***

写一些类似的东西：

```
for(i = 0; i < 6; i++) {
  ...
  newRow.append('<td id="' + ('td_' + rowNumber + '_1') + '">' + nameInput + '</td>');
  newRow.append('<td id="' + ('td_' + rowNumber + '_2') + '">' + nameInput + '</td>');
  ...
} 
```

然后访问：

```
$('#2_1').css('background', '#ccc'); // make grey background in 2 row 1 col 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T08:29:23.877

你真的不需要。您可以使用 jQuery 的`nth()`选择器。

例如：

```
$('td:nth(2)').html() 
```

在这里演示：http: [//jsfiddle.net/Uz4Ze/](http://jsfiddle.net/Uz4Ze/)

或者，我建议为每个人分配`<td>`一个类，而不是一个`id`. 这将为您带来额外的好处，即能够以不同的方式设置每列的样式。

# jquery - 从 jquery mobile 中的缓存/Dom 中清除所有内容

> ID：11699400
> 
> 赞同：0
> 
> 时间：2012-07-28T08:16:55.673
> 
> 标签：jquery, jquery-ui, jquery-mobile, cordova

您好我正在使用 jquery mobile 开发应用程序。我的应用程序中有多个 html 页面，假设我从第 1 页导航到第 2 页到第 3 页.....在每次转换中，我都收到了来自服务器的响应。如果来自服务器的响应以 0 开头（例如 0$name^lastname^city$），那么我导航到下一页。但是假设响应从 -1 开始，那么我必须向用户显示登录页面。我可以检查响应，如果它以 -1 开头，那么我会打电话`$.mobile.changePage('UI/demo/login.html')` ，但现在我想删除 dom 中存在的所有页面，因为如果我不删除它们，那么在后按时它们会再次显示。如何清除dom。

任何建议将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-02T18:39:40.393

如果您仍然需要从 DOM 中删除页面，您可以执行以下操作：

```
$('div[data-role=page]:hidden').remove(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-15T15:54:21.747

由于您似乎要删除页面以注销/登录新用户，因此我会确定，而是进行[整页刷新](http://demos.jquerymobile.com/1.0a4.1/docs/pages/link-formats.html)

```
$.mobile.changePage('UI/demo/login.html', {reloadPage : true}); 
```

或者如果是链接，请将其添加到链接中

```
data_ajax="false" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T12:45:32.060

[从那个问题](https://stackoverflow.com/questions/5737730/jqm-jquerymobile-push-last-page-out-of-dom-on-changepage)试试这个

```
$($.mobile.pageContainer).live('pageshow',function(event, ui){
    $(ui.prevPage).remove();
});
$.mobile.changePage('UI/demo/login.html') 
```

# windows-phone-7 - 如何在 windows phone 7 中使用 sqlite db 打开表？

> ID：11699402
> 
> 赞同：0
> 
> 时间：2012-07-28T08:17:29.893
> 
> 标签：windows-phone-7

我正在为 Windows Phone 7 (http://sqlitewindowsphone.codeplex.com/) 使用 SQLite，并且我已经完成了本教程中的每个步骤 (http://dotnetslackers.com/articles/silverlight/Windows-Phone-7-Native- Database-Programming-via-Sqlite-Client-for-Windows-Phone.aspx）。

然后我尝试创建一个简单的应用程序来选择 .sqlite 数据库中的整个表，并通过按下按钮将其显示到 windows phone 文本块中。

我做到了，点击按钮时，它显示“表不存在”。我想知道在我们的程序中在哪里添加我们已经创建的 .sqlite 数据库？以及如何打开数据库并在 Windows Phone 中显示表格。请帮助我...谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T05:30:59.517

在Mango Update About Windows phone 之后一直支持SQLCE。所以在我的建议中，您可以尝试按 msdn [http://msdn.microsoft.com/en-us/library/hh202860(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/hh202860(v=vs.92).aspx)

出色地 。如果你想使用 SQlite。可能会有一些问题。在 isoloate Stroage 中，您无法获取数据库文件。

在 codeplex 有开源项目：[http ://sqlitewindowsphone.codeplex.com/](http://sqlitewindowsphone.codeplex.com/)

# scala - 推理标记 LDA/pLDA [主题建模工具箱]

> ID：11699404
> 
> 赞同：3
> 
> 时间：2012-07-28T08:17:56.960
> 
> 标签：scala, nlp, stanford-nlp, lda, topic-modeling

我一直在尝试使用 TMT 工具箱（stanford nlp 组）从经过训练的标记 LDA 模型和 pLDA 推断代码。我浏览了以下链接中提供的示例：http: [//nlp.stanford.edu/software/tmt/tmt-0.3/](http://nlp.stanford.edu/software/tmt/tmt-0.3/) [http://nlp.stanford.edu/software/tmt/tmt-0.4/](http://nlp.stanford.edu/software/tmt/tmt-0.4/)

这是我正在尝试标记 LDA 推理的代码

```
val modelPath = file("llda-cvb0-59ea15c7-31-61406081-75faccf7");

val model = LoadCVB0LabeledLDA(modelPath);`

val source = CSVFile("pubmed-oa-subset.csv") ~> IDColumn(1);

val text = {
  source ~>                              // read from the source file
  Column(4) ~>                           // select column containing text
  TokenizeWith(model.tokenizer.get)      //tokenize with model's tokenizer
 }

 val labels = {
  source ~>                              // read from the source file
  Column(2) ~>                           // take column two, the year
  TokenizeWith(WhitespaceTokenizer())     
 }

 val outputPath = file(modelPath, source.meta[java.io.File].getName.replaceAll(".csv",""));

 val dataset = LabeledLDADataset(text,labels,model.termIndex,model.topicIndex);

 val perDocTopicDistributions =  InferCVB0LabeledLDADocumentTopicDistributions(model, dataset);

 val perDocTermTopicDistributions =EstimateLabeledLDAPerWordTopicDistributions(model, dataset, perDocTopicDistributions);

 TSVFile(outputPath+"-word-topic-distributions.tsv").write({
  for ((terms,(dId,dists)) <- text.iterator zip perDocTermTopicDistributions.iterator) yield {
    require(terms.id == dId);
    (terms.id,
     for ((term,dist) <- (terms.value zip dists)) yield {
       term + " " + dist.activeIterator.map({
         case (topic,prob) => model.topicIndex.get.get(topic) + ":" + prob
       }).mkString(" ");
     });
  }
}); 
```

错误

`found : scalanlp.collection.LazyIterable[(String, Array[Double])]` `required: Iterable[(String, scalala.collection.sparse.SparseArray[Double])]` `EstimateLabeledLDAPerWordTopicDistributions(model, dataset, perDocTopicDistributions);`

我知道这是类型不匹配错误。但我不知道如何为scala解决这个问题。基本上我不明白我应该如何在推断命令的输出之后提取 1\. 每个文档主题分布 2\. 每个文档标签分布。

请帮忙。在 pLDA 的情况下也是如此。我到达推理命令，然后不知如何处理它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T09:57:20.083

Scala 类型系统比 Java 类型系统复杂得多，理解它会让你成为更好的程序员。问题出在这里：

```
val perDocTermTopicDistributions =EstimateLabeledLDAPerWordTopicDistributions(model, dataset, perDocTopicDistributions); 
```

因为模型、数据集或 perDocTopicDistributions 属于以下类型：

```
scalanlp.collection.LazyIterable[(String, Array[Double])] 
```

而 EstimateLabeledLDAPerWordTopicDistributions.apply 期望一个

```
Iterable[(String, scalala.collection.sparse.SparseArray[Double])] 
```

调查这种类型错误的最佳方法是查看 ScalaDoc（例如 tmt 的那个：[http](http://nlp.stanford.edu/software/tmt/tmt-0.4/api/#package) ://nlp.stanford.edu/software/tmt/tmt-0.4/api/#package ），如果你无法轻松找出问题所在，您应该在代码中明确变量的类型，如下所示：

```
 val perDocTopicDistributions:LazyIterable[(String, Array[Double])] =  InferCVB0LabeledLDADocumentTopicDistributions(model, dataset) 
```

如果我们一起看 edu.stanford.nlp.tmt.stage 的 javadoc：

```
def
EstimateLabeledLDAPerWordTopicDistributions (model: edu.stanford.nlp.tmt.model.llda.LabeledLDA[_, _, _], dataset: Iterable[LabeledLDADocumentParams], perDocTopicDistributions: Iterable[(String, SparseArray[Double])]): LazyIterable[(String, Array[SparseArray[Double]])]

def
InferCVB0LabeledLDADocumentTopicDistributions (model: CVB0LabeledLDA, dataset: Iterable[LabeledLDADocumentParams]): LazyIterable[(String, Array[Double])] 
```

现在您应该清楚 InferCVB0LabeledLDADocumentTopicDistributions 的返回不能直接用于提供 EstimateLabeledLDAPerWordTopicDistributions。

我从未使用过 stanford nlp，但这是设计使 api 的工作方式，因此您只需在调用函数之前将您的`scalanlp.collection.LazyIterable[(String, Array[Double])]`转换为。`Iterable[(String, scalala.collection.sparse.SparseArray[Double])]`

如果您查看有关如何进行此转换的 scaladoc，那将非常简单。在 package 阶段，在 package.scala 我可以阅读 `import scalanlp.collection.LazyIterable;`

所以我知道去哪里看，实际上在[http://www.scalanlp.org/docs/core/data/#scalanlp.collection.LazyIterable](http://www.scalanlp.org/docs/core/data/#scalanlp.collection.LazyIterable)你有一个 toIterable 方法，它把一个 LazyIterable 变成一个 Iterable，你仍然必须将您的内部数组转换为 SparseArray

再次，我查看了 tmt 中 stage 包的 package.scala ，我看到了：`import scalala.collection.sparse.SparseArray;`我在寻找 scalala 文档：

[http://www.scalanlp.org/docs/scalala/0.4.1-SNAPSHOT/#scalala.collection.sparse.SparseArray](http://www.scalanlp.org/docs/scalala/0.4.1-SNAPSHOT/#scalala.collection.sparse.SparseArray)

事实证明，构造函数对我来说似乎很复杂，所以听起来很像我必须查看工厂方法的伴随对象。事实证明，我正在寻找的方法就在那里，它在 Scala 中像往常一样被称为 apply 。

```
def
apply [T] (values: T*)(implicit arg0: ClassManifest[T], arg1: DefaultArrayValue[T]): SparseArray[T] 
```

通过使用它，您可以编写具有以下签名的函数：

```
def f: Array[Double] => SparseArray[Double] 
```

完成此操作后，您可以使用一行代码将 InferCVB0LabeledLDADocumentTopicDistributions 的结果转换为稀疏数组的非延迟迭代：

```
result.toIterable.map { case (name, values => (name, f(values)) } 
```

# asp.net-mvc-3 - 得到“找不到资源”。使用 Ninject 时出错

> ID：11699405
> 
> 赞同：0
> 
> 时间：2012-07-28T08:18:20.390
> 
> 标签：asp.net-mvc-3, ninject, ninject.web.mvc, ninject-3

我正在开发一个 ASP.NET MVC 3.0 应用程序，使用 Ninject 作为我的依赖注入框架。

所以我从 NinjectHttpApplication 继承了我的控制器，如下所示：

```
public class MvcApplication : NinjectHttpApplication
{
    protected override void OnApplicationStarted()
    {
        base.OnApplicationStarted();
    }

    protected void Application_Start()
    {
        RegisterGlobalFilters(GlobalFilters.Filters);
        RegisterRoutes(RouteTable.Routes);
        AreaRegistration.RegisterAllAreas();
        DependencyResolver.SetResolver(new NinjectDependencyResolver(Kernel));
    }

    protected override Ninject.IKernel CreateKernel()
    {
        return new StandardKernel(new QueriesModule());
    }

    public static void RegisterGlobalFilters(GlobalFilterCollection filters)
    {
        filters.Add(new HandleErrorAttribute());
    }

    public static void RegisterRoutes(RouteCollection routes)
    {
        routes.MapRoute(
            "Default",
            "{controller}/{action}",
            new { controller = "Home", action = "Index" },
            new string[] { typeof(HomeController).Namespace }
        );
    }
} 
```

但是每当我运行应用程序并尝试浏览到我的任何控制器时，我都会收到错误消息：

> 无法找到该资源。
> 
> 说明：HTTP 404。您要查找的资源（或其依赖项之一）可能已被删除、名称已更改或暂时不可用。请查看以下 URL 并确保其拼写正确。
> 
> 请求的 URL：/Home/Index

这是什么原因造成的，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T08:20:57.287

事实证明这是因为`NinjectHttpApplication`我继承的类`OnApplicationStarted()`在启动时调用了该方法。所以解决方案是删除该`Application_Start()`方法并将所有代码移动到`OnApplicationStarted()`.

# python - 如何将 dict 转换为 unicode JSON 字符串？

> ID：11699407
> 
> 赞同：8
> 
> 时间：2012-07-28T08:18:42.350
> 
> 标签：python, json

这对我来说似乎不可能使用标准库`json`模块。使用`json.dumps`时它会自动转义所有非 ASCII 字符，然后将字符串编码为 ASCII。我可以指定它不转义非 ASCII 字符，但是当它尝试将输出转换为 ASCII 时它会崩溃。

问题是 -**我不想要 ASCII！**我只想将我的 JSON 字符串作为*unicode*（或*UTF-8*）字符串返回。有没有方便的方法来做到这一点？

这是一个演示我**想要**的示例：

```
d = {'navn': 'Åge', 'stilling': 'Lærling'}
json.dumps(d, output_encoding='utf8')
# => '{"stilling": "Lærling", "navn": "Åge"}' 
```

但是当然，没有像*output_encoding*这样的选项，所以这是实际的输出：

```
d = {'navn': 'Åge', 'stilling': 'Lærling'}
json.dumps(d)
# => '{"stilling": "L\\u00e6rling", "navn": "\\u00c5ge"}' 
```

总而言之 - 我想将 Python dict 转换为***UTF-8 JSON 字符串***而没有任何转义。我怎样才能做到这一点？

* * *

我会接受以下解决方案：

*   Hacks（预处理和后处理输入以`dumps`达到预期效果）
*   子类化[JSONEncoder](http://docs.python.org/library/json.html#json.JSONEncoder)（我不知道它是如何工作的，文档也不是很有帮助）
*   PyPi 上可用的第三方库

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-28T08:48:19.340

# 要求

*   确保您的 python 文件以 UTF-8 编码。否则你的非 ASCII 字符会变成问号，`?`. Notepad++ 为此提供了出色的编码选项。

*   确保包含适当的字体。如果要显示日文字符，则需要安装日文字体。

*   确保您的 IDE 支持显示 Unicode 字符。否则你可能会`UnicodeEncodeError`抛出一个错误。

例子：

```
UnicodeEncodeError: 'charmap' codec can't encode characters in position 22-23: character maps to <undefined> 
```

PyScripter 为我工作。它包含在[http://portablepython.com/wiki/PortablePython3.2.1.1的“便携式 Python”中](http://portablepython.com/wiki/PortablePython3.2.1.1)

*   确保你使用的是 Python 3+，因为这个版本提供了更好的 unicode 支持。

# 问题

json.dumps() 转义 unicode 字符。

# 解决方案

阅读底部的更新。或者...

用解析的 unicode 字符替换每个转义字符。

我创建了一个简单的 lambda 函数`getStringWithDecodedUnicode`，它就是这样做的。

```
import re   
getStringWithDecodedUnicode = lambda str : re.sub( '\\\\u([\da-f]{4})', (lambda x : chr( int( x.group(1), 16 ) )), str ) 
```

这`getStringWithDecodedUnicode`是一个常规功能。

```
def getStringWithDecodedUnicode( value ):
    findUnicodeRE = re.compile( '\\\\u([\da-f]{4})' )
    def getParsedUnicode(x):
        return chr( int( x.group(1), 16 ) )

    return  findUnicodeRE.sub(getParsedUnicode, str( value ) ) 
```

# 例子

## testJSONWithUnicode.py（使用 PyScripter 作为 IDE）

```
import re
import json
getStringWithDecodedUnicode = lambda str : re.sub( '\\\\u([\da-f]{4})', (lambda x : chr( int( x.group(1), 16 ) )), str )

data = {"Japan":"日本"}
jsonString = json.dumps( data )
print( "json.dumps({0}) = {1}".format( data, jsonString ) )
jsonString = getStringWithDecodedUnicode( jsonString )
print( "Decoded Unicode: %s" % jsonString ) 
```

## 输出

```
json.dumps({'Japan': '日本'}) = {"Japan": "\u65e5\u672c"}
Decoded Unicode: {"Japan": "日本"} 
```

# 更新

或者...只是`ensure_ascii=False`作为 json.dumps 的选项传递。

注意：您需要满足我在开头概述的要求，否则这将不起作用。

```
import json
data = {'navn': 'Åge', 'stilling': 'Lærling'}
result = json.dumps(d, ensure_ascii=False)
print( result ) # prints '{"stilling": "Lærling", "navn": "Åge"}' 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-03-07T10:13:06.610

`encode_ascii=False`恕我直言，这是最好的解决方案。

如果您使用的是 Python2.7，这里是示例 python 文件：

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-
# example.py
from __future__ import unicode_literals
from json import dumps as json_dumps
d = {'navn': 'Åge', 'stilling': 'Lærling'}
print json_dumps(d, ensure_ascii=False).encode('utf-8') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-03T16:05:05.873

如果在 Python3.7 上，这对我有用

```
from __future__ import unicode_literals
print json.dumps(m,ensure_ascii=False) 
```

确保`from __future__ import unicode_literals`是要导入的第一行。

# java - Java 网络游戏（可能使用 NIO）

> ID：11699413
> 
> 赞同：0
> 
> 时间：2012-07-28T08:19:57.287
> 
> 标签：java, concurrency, network-programming, nio

作为学习实验的一部分，我想做一个网络应用程序。我仍在学习多线程，并且我制作了一个简单的多线程“游戏”，其中涉及在屏幕上绘制精灵，玩家可以在其中移动它们。

对于这个新项目，我想做一些简单的事情，只是为了体验和学习。我想创建一个服务器，多个客户端可以连接到它。服务器将包含“游戏对象”，它只是一个包含 x 和 y 位置、字符串名称、标识它的 ID 和速度（dx 和 dy）的对象。

“服务器”应用程序将具有诸如更新对象位置（使用它们的速度）的工作线程之类的功能，它还将向客户端发送所有游戏对象的“状态”，以便客户端可以将它们绘制给玩家看。

每当玩家按下键盘上的按钮并生成 KeyEvent 时，客户端也会发送服务器数据。服务器将读取这些数据并通过更新玩家的游戏对象来处理它。例如，如果玩家按下左箭头键，客户端将向服务器发送指示左键被按下的数据，服务器将找到与客户端关联的游戏对象（也许我会将对象存储在 Map 中，例如？ )

问题是如何做到这一点。我以前从未做过任何这种规模的网络。到目前为止，我所做的最多的是一个有缺陷的 2 人井字游戏。由于这是基于回合制的，因此我现在尝试制作的应用程序非常不同。作为研究，我阅读了关于 Oracle 的整个并发课程。我还阅读了关于 NIO 的本教程。我以前从未使用过 NIO，但我被很多人推荐使用它。通过阅读代码并弄清楚它是如何工作的，我学到了很多关于多线程和并发的知识。

由于 SocketChannels 使用 ByteBuffers 进行通信，我想到的一种策略是获取 GameObjects 列表并将其序列化为字节数组。然后使用 ByteArray 创建一个 ByteBuffer 并将其发送给客户端。然后，客户端将获取加载到服务器中的所有游戏对象，并能够根据它们的类型和状态绘制所有这些对象。这样做的一个问题是字节数​​组可能会变得非常大。我用 256 个游戏对象对其进行了测试，得到了一个高达 9KB 的字节数组。如果我压缩字节数组，大小将约为 96 个字节。不过，我不知道这是否太大而无法每秒发送给客户端 15 次。

我知道的另一个选择是逐字节发送信息。例如，发送的第一个字节可以识别我正在发送的游戏对象的类型（例如：猫、汽车、人），接下来的两个字节可以识别 X 位置，接下来的两个字节可以识别 Y 位置，然后是使用的最后一个字节来识别对象的状态。使用这些数据，客户端可以在接收到的位置上绘制一个精灵。

我所说的所有内容的一个大问题是客户端将无法与任何对象进行交互。客户端将能够向服务器发送简单的命令，并在其位置“查看”游戏对象的精灵。如果服务器想要告诉游戏对象执行特定操作，则很难绘制它，因为我只是将静态精灵绘制到屏幕上，而不是与精灵交互。

我也不确定 NIO 是否是最好的主意。我交谈过的大多数人都推荐它，但我不太了解实现非阻塞 NIO 服务器和多线程常规 java.net.* 服务器之间的实际区别。我的猜测是，非阻塞服务器比多线程服务器具有更好的性能，而且我遇到的问题要少得多，只有 1 个线程而不是每个连接多个线程。

最后，对于是否使用 TCP 或 UDP，我得到了不同的建议。我以前也从未使用过UDP。一些强烈建议使用 TCP，而另一些强烈建议使用 UDP。

正如你所看到的，我很杂乱无章，不知道该怎么做。我觉得我已经阅读了很多关于网络和并发的知识，并且我已经对 Swing 有足够的了解来制作图形游戏。我只是不知道如何把它们放在一起。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T23:42:44.240

也许考虑使用[Netty](https://netty.io/)。我发现它对于快速应用程序开发非常有用，并且对于大多数服务器和客户端应用程序来说足够快。使用 Java NIO 实现反应器设计模式的原始实现可以更快，但这需要更多的工作和难以调试的代码。

# objective-c - scheduleInRunLoop - 线程化网络连接

> ID：11699425
> 
> 赞同：9
> 
> 时间：2012-07-28T08:22:42.147
> 
> 标签：objective-c, multithreading, cocoa, nsrunloop, nsstream

我还没有找到任何体面的文档来解释 NSStream 的线程处理过程。具体来说，让我们使用 NSInputStream。Objective-C 中的线程对我来说目前是一个谜，因为它看起来很简单。

我的问题主要是指这一行：

```
[inputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode]; 
```

您可以指定输入流将在其中运行的运行循环，我认为这很酷。问题是，如果我希望输入和输出流在它们自己的线程中运行，并且两者都在一个类中实例化，比如 Connection，那么你如何让它们在它们自己的线程中运行？

我问的原因是因为代表。以前我们会这样做`[inputStream setDelegate:self]`，这意味着我们必须声明`stream:handleEvent`处理传入/传出数据。

所以最终我的问题是，如果你有一个设置输入和输出流的类，你如何将每个流线程化并将处理流事件的责任委托给当前类？

这里有一些代码可供选择：

```
[inputStream setDelegate:self];
[outputStream setDelegate:self];
[inputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
[outputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
[inputStream open];
[outputStream open]; 
```

我在想以下几点：

*   您不能将责任委派给当前类中的两个线程，您必须委派给单独的对象。
*   一个线程可以同时处理两个流？（我个人不这么认为，因为输入/输出会同时运行）
*   我想错了，您可以创建一个单独的运行循环并针对某个单独的线程调用 scheduleRunLoop 吗？

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-07-08T01:44:31.100

**注意heap**和**stack**之间的区别。

> 每个线程都有自己的堆栈，但所有线程都访问同一个堆。

输入流需要自己的线程，因为在读取流而没有到达任何 EOF 时，如果没有新字符出现，线程会阻塞并因此等待。所以为了防止你的应用程序阻塞输入流需要一个单独的线程。

继续，因为**委托不能是静态方法**，您必须复制或至少同步使用缓冲区来返回结果。请记住，每个线程都有自己的堆栈，但都访问同一个堆。

这`NSStreamDelegate`是一个界面，允许您指定谁将管理来自流的事件。因此，允许您拆分编程以处理流和处理它们的事件。正如您可以将委托视为指向函数的指针，您必须确保它们在运行时存在，这就是为什么它们通常与协议一起使用和定义的原因。但是调用委托的方法并不意味着调用另一个线程的函数。您仅将参数/对象应用于将/必须在运行时存在的另一个对象/类的方法。

Apple`NSThread`的 class 和`NSRunloop`class 使它变得容易但令人困惑，因为 runloop 与线程不同。每个线程都可以有一个 runloop，它至少循环一次，并在无事可做时立即返回。当`[NSRunLoop currentRunLoop]`您要求您所在线程的运行循环时，您并没有创建另一个线程。因此，从同一个线程调用相同的 runloop 两次会导致在同一个线程中工作。这意味着如果一个部分正在阻塞，则您正在阻塞线程，因此同一线程中的其他部分也会等待。（在最后一句中，您可以将单词*thread*与*runloop*交换，它仍然是一样的，它正在阻塞线程）

作为同时性问题，当输入和输出流应该在“同时”工作时，通常会涉及多个套接字端口。`NSInputStream`是只读的 &`NSOutputStream`是只写的。明智的做法是*为输入流提供自己的线程*，因为远程发送者的性质给定的数据和时间可能会导致意外结果，而这是您无法控制的。您有责任定义运行循环（相应的线程）在调用一次后是否应该保持活动状态。

这样做你的输出流然后在一个/另一个线程中，你要求它的*当前*运行循环。您不能创建或管理运行循环，您只需要求它，因为每个线程都有一个，如果没有 - 为您创建一个。

在 iOS 上，您有许多解决方案可用于实现您的个人设计模式，用于同时输入和输出流。您也可以`NSThread`使用`-performSelectorInBackground:SEL withObject:(nullable Id)`which 实际上是`NSObject`defined in的扩展`NSThread.h`。但是最后一个不允许您定义特殊的运行模式。

如果您不想根据需要创建服装 NSThread 子类，这里提到的一个简单解决方案也可能对您有用。 [iOS 我如何执行多个 NSInputStream](https://stackoverflow.com/questions/33587831/ios-how-can-i-perform-multiple-nsinputstream) 这`[NSRunLoop currentRunloop]`是分离的线程的运行循环。也可以使用块分离新线程

```
id<NSStreamDelegate> streamDelegate = //object that conforms to the protocol
[NSThread detachNewThreadWithBlock:^(void){
    NSInputStream *inputStream;
    [inputStream setDelegate:streamDelegate];
    // define your stream here
    [inputStream scheduleInRunLoop:[NSRunLoop currentRunLoop]
                   forMode:NSRunLoopCommonModes];
    [inputStream open];
}];` 
```

PS：来自@Ping 的示例是一个开关，用于对两个流的事件进行交互，它不会同时进行流输入和输出。好吧，但是您可以在流及其事件上使用该示例，无论它们是否同时发生，典型的`NSStreamDelegate`东西。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2014-02-11T15:35:54.853

```
- (void)stream:(NSStream *)aStream handleEvent:(NSStreamEvent)eventCode
{
    switch (eventCode) {
        case NSStreamEventNone:
            break;
        case NSStreamEventOpenCompleted:
            break;
        case NSStreamEventHasBytesAvailable:
            [self _readData];
            break;
        case NSStreamEventHasSpaceAvailable:
            [self _writeData];
            break;
        case NSStreamEventErrorOccurred:
            break;
        case NSStreamEventEndEncountered:
            break;
        default:
            break;
    }
} 
```

# linux - 如何在 C 代码中检查目录是否在 NFS 文件系统上？

> ID：11699426
> 
> 赞同：5
> 
> 时间：2012-07-28T08:22:47.610
> 
> 标签：linux, nfs, stat

在我的 C/C++ 程序中，我想检查用户指定的数据目录是否驻留在 NFS 文件系统上。需要进行检查，因为远程 NFS 目录的数据处理延迟/带宽更差。如果数据目录是 NFS，我想向用户发出警告。

我怎样才能做到这一点？我认为有 stat() 调用应该能够帮助我，但细节尚不清楚。

我在 Linux 上。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-28T08:35:58.677

您应该使用`statfs(2)`并检查`f_type`.

```
#include <sys/statfs.h>

struct statfs foo;
if (statfs ("/foo/bar", &foo)) {
    /* error handling */
}

if (foo.f_type == NFS_SUPER_MAGIC) {
    /* nfs warning */
} 
```

我同意 Basile 关于这样做的有用性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-28T08:34:02.833

您可以使用[statfs](http://www.kernel.org/doc/man-pages/online/pages/man2/statfs.2.html)系统调用来获取有关给定路径的文件系统的信息（该文件系统内的某些文件）。

我不确定警告用户是否有用。内核正在做一些文件缓存，并且一些远程文件系统可能比一些本地文件系统更快（例如在慢速 USB 记忆棒上或在 CDROM 上）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-28T08:33:23.410

您要查找的系统调用是[`statfs`](http://linux.die.net/man/2/statfs). 给定任何路径，它将为您提供有关该路径所在文件系统的信息，包括它正在使用的文件系统。

# c++ - 单个结构数据成员的奇怪指针地址

> ID：11699430
> 
> 赞同：1
> 
> 时间：2012-07-28T08:23:37.630
> 
> 标签：c++, pointers, struct, pointer-address

我今天观察到一些奇怪的行为，代码如下：

### ****编码 ：****

```
`#include <iostream>

struct text
{
    char c;
};

int main(void)
{
    text experim = {'b'};
    char * Cptr = &(experim.c);

    std::cout << "The Value \t: " << *Cptr << std::endl ;
    std::cout << "The Address \t: " << Cptr << std::endl  ; //Print weird stuff

    std::cout << "\n\n";

    *Cptr = 'z';   //Attempt to change the value

    std::cout << "The New Value \t: " << *Cptr <<std::endl ;
    std::cout << "The Address \t: " << Cptr << std::endl ; //Weird address again

    return 0;
}` 
```

 **### ****问题：****

**1.）我唯一的问题是为什么`cout theAddress`上面的代码会出现一些奇怪的值？

2.)为什么我仍然可以`c`通过取消引用具有奇怪地址的指针来更改成员的值？

*谢谢你。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T08:26:07.793

我认为出现“奇怪”的东西是因为`cout`认为它是一个 cstring，即一个以 0 结尾的字符数组，因此它不会按您的预期打印地址。而且由于您的“字符串”不是以 0 结尾的，因此它所能做的就是遍历内存，直到遇到`0`. 总而言之，**您实际上并没有打印 address**。

> 为什么我仍然可以通过取消引用具有奇怪地址的指针来更改成员 c 的值

如上所述，地址并不奇怪。在你的代码`Cptr`中指向一个有效的内存位置，你可以用它做几乎任何你想做的事情。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-28T08:26:15.410

考虑像这样修复代码：

```
std::cout << "The Address \t: " << (void *)Cptr << std::endl ; 
```

有一个`std::ostream& operator<< (std::ostream& out, const char* s );`需要 a`char*`所以你必须转换`void*`为打印一个地址，而不是它“指向”的**字符串******

# zend-framework - Symfony Zend Lucene 搜索多个表

> ID：11699436
> 
> 赞同：2
> 
> 时间：2012-07-28T08:24:20.943
> 
> 标签：zend-framework, search, symfony1, lucene, symfony-1.4

我有一个 Symfony 项目，我使用 Zend Lucene 搜索框架在网站上集成搜索。它工作得很好，但仅限于搜索 1 个表。

我需要我的用户能够搜索整个站点（8 个选择表）并一起返回结果。每个表都有相同的索引字段。这是指定表并调用查询的代码。

有没有办法让它查看所有 8 个表格的结果？

```
public function getForLuceneQuery($query)
{
  $hits = self::getLuceneIndex()->find($query);

  $pks = array();
  foreach ($hits as $hit)
  {
    $pks[] = $hit->pk;
  }

  if (empty($pks))
  {
    return array();
  }
  $alltables = Doctrine_Core::getTable('Car');
  $q = $alltables->createQuery('j')
     ->whereIn('j.token', $pks)
     ->orderBy('j.endtime ASC')
     ->andwhere('j.endtime > ?', date('Y-m-d H:i:s', time()))
     ->andWhere('j.activated = ?', '1')
     ->limit(21);

  return $q->execute();
} 
```

提供 8 表的背景知识，它们基本相似。它们都有标题、品牌、型号等，所以我需要对它们都运行一个查询并按升序返回所有结果（不管它在哪个表中）。Doctrine_core::getTable 命令似乎不喜欢多个表甚至数组（除非我做得不对）。谢谢！

更新（工作）：

这是更新的代码。这是我在`SearchTable.class.php`文件中的内容：

```
public function getForLuceneQuery($query)
{
  // sort search result by end time
  $hits = self::getLuceneIndex()->find(
    $query, 'endtime', SORT_NUMERIC, SORT_ASC
  );

  $result = array(
    'index' => $hits,
    'database' => array(),
  );

  // group search result by class
  foreach ($hits as $hit)
  {
    if (!isset($result['database'][$hit->class]))
    {
      $result['database'][$hit->class] = array();
    }

    $result['database'][$hit->class][] = $hit->pk;
  }

  // replace primary keys with real results
  foreach ($result['database'] as $class => $pks)
  {
    $result['database'][$class] = Doctrine_Query::create()
      // important to INDEXBY the same field as $hit->pk
      ->from($class . ' j INDEXBY j.token')
      ->whereIn('j.token', $pks)
      ->orderBy('j.endtime ASC')
      ->andwhere('j.endtime > ?', date('Y-m-d H:i:s', time()))
      ->andWhere('j.activated = ?', '1')
      ->limit(21)
      ->execute();

  }

  return $result;
} 
```

这是我在`actions.class.php`搜索模块文件中的内容：

```
public function executeIndex(sfWebRequest $request)
  {
    $this->forwardUnless($query = $request->getParameter('query'), 'home', 'index');

    $this->results = Doctrine_Core::getTable('Search') 
      ->getForLuceneQuery($query);

  } 
```

最后这是我的模板文件`indexSuccess.php` ，我对其进行了简化，因此更容易理解。我`indexSuccess.php`的更复杂，但现在我可以调用这些值，我可以进一步自定义它。

```
 <div class="product_list"
  <ul>
    <?php foreach ($results['index'] as $hit): ?>
      <li class="item">
      <?php if (isset($results['database'][$hit->class][$hit->pk])) ?>
        <span class="title">
            <?php echo $results['database'][$hit->class][$hit->pk]->getTitle() ?>
        </span>
      </li>
    <?php endforeach ?>
  </ul>
  </div> 
```

这很好用。我可以通过调用搜索结果中的每个字段来自定义它，并且效果很好。我在每个表中添加了一个具有相同标题的项目，搜索结果将它们全部提取出来。非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T21:41:33.907

好的。我会尝试用代码给你一些提示:)

首先，您应该将这些字段添加到索引中：

```
$doc->addField(Zend_Search_Lucene_Field::Keyword('class', get_class($record)));
$doc->addField(Zend_Search_Lucene_Field::UnIndexed('endtime', strtotime($record->get('endtime')))); 
```

比你应该使用这些新字段：

```
public function getForLuceneQuery($query)
{
  // sort search result by end time
  $hits = self::getLuceneIndex()->find(
    $query, 'endtime', SORT_NUMERIC, SORT_ASC
  );

  $result = array(
    'index' => $hits,
    'database' => array(),
  );

  // group search result by class
  foreach ($hits as $hit)
  {
    if (!isset($result['database'][$hit->class]))
    {
      $result['database'][$hit->class] = array();
    }

    $result['database'][$hit->class][] = $hit->pk;
  }

  // replace primary keys with real results
  foreach ($result['database'] as $class => $pks)
  {
    $result['database'][$class] = Doctrine_Query::create()
      // important to INDEXBY the same field as $hit->pk
      ->from($class . ' j INDEXBY j.token')
      ->whereIn('j.token', $pks)
      ->orderBy('j.endtime ASC')
      ->andwhere('j.endtime > ?', date('Y-m-d H:i:s', time()))
      ->andWhere('j.activated = ?', '1')
      ->limit(21)
      ->execute();

    // if you want different query per table
    // you should call a function which executes the query
    //
    // if (!method_exists($table = Doctrine_Core::getTable($class), 'getLuceneSearchResult'))
    // {
    //   throw new RuntimeException(sprintf('"%s::%s" have to be exists to get the search results.', get_class($table), 'getLuceneSearchResult'));
    // }
    //
    // $results[$class] = call_user_func(array($table, 'getLuceneSearchResult'), $pks);
  }

  return $result;
} 
```

之后在模板中你应该迭代`$result['index']`并显示结果`$result['database']`

```
foreach ($result['index'] as $hit)
{
  if (isset($result['database'][$hit->class][$hit->pk]))
  {
    echo $result['database'][$hit->class][$hit->pk];
  }
} 
```

* * *

我能想到的还有相同的替代（也许更好）解决方案：

替代解决方案＃1：

您可以将数据存储在索引中，并且可以在搜索结果中访问这些数据。如果您在显示结果时不需要太多数据并且可以经常更新索引，我认为这是一个不错的选择。这样您就可以使用分页，并且根本不需要 SQL 查询。

```
$doc->addField(Zend_Search_Lucene_Field::Text('title', $content->get('title')));
...
$hit->title; 
```

替代解决方案＃2：

正如您所写，您的表非常相似，因此您也许可以使用[列聚合继承](http://docs.doctrine-project.org/projects/doctrine1/en/latest/en/manual/inheritance.html#column-aggregation)。通过这种方式，所有数据都存储在一个表中，因此您可以一起查询它们，并可以根据需要进行排序和分页。

# java - Tomcat 实例之间的通信

> ID：11699439
> 
> 赞同：0
> 
> 时间：2012-07-28T08:24:46.910
> 
> 标签：java, tomcat, chat

我正在尝试使用 tomcat 7 开发一个简单的聊天应用程序。每个客户端都将被放入用户地图中，并且在从客户端获取新消息时，所有用户都将调用该地图。

这在 ONE Server 上运行良好。但是如何在 2 个或更多实例上使用此方案？Tomcat 7 中有没有办法通知所有实例？

感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T08:36:01.003

我认为在这里使用[JMS](http://java.sun.com/developer/technicalArticles/Ecommerce/jms/)非常合适。

还有其他许多其他方法可以做得更好，但通常更复杂，此解决方案简单且干净，可满足您的需求。

# c# - 如何比较检查日期和当前日期？

> ID：11699442
> 
> 赞同：-2
> 
> 时间：2012-07-28T08:25:36.297
> 
> 标签：c#

现在我遇到了一个问题。

我有一个选中的列表框有工作日周日，周一等。

这是我从数据库中填充检查项目的代码。

```
string[] setday = dr.GetValue(2).ToString().Split(',');
for (int i = 0; i < setday.Length - 1; i++)
{
  days.SetItemChecked(Convert.ToInt32(setday[i]), true);
} 
```

当我单击保存按钮时，我有一个保存按钮，我将检查天数的索引插入到我的数据库表中。然后我有一个比较按钮来比较，当我点击这个我想知道今天是否被选中。

我怎样才能做到这一点 ？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T08:53:39.690

你的问题没有提供太多信息，但我仍然猜这是你想要的

我假设你会像这样从数据库中获取一串天

```
"sun,mon,tue,thu,fri,sat" 
```

并且在前端想要根据该字符串检查天数。如果是这种情况，请尝试一下

**前端**

```
<asp:CheckBoxList runat="server" ID="chks">
  <asp:ListItem>sun</asp:ListItem>
  <asp:ListItem>mon</asp:ListItem>
  <asp:ListItem>tue</asp:ListItem>
  <asp:ListItem>thu</asp:ListItem>
  <asp:ListItem>fri</asp:ListItem>
  <asp:ListItem>sat</asp:ListItem>
</asp:CheckBoxList> 
```

**后端**

```
string[] days = "sun,mon,tue,thu,fri,sat".Split(',');
ListItem[] chkdays = new ListItem[chks.Items.Count];
chks.Items.CopyTo(chkdays, 0);
chkdays.ToList().ForEach(delegate(ListItem item)
       {
           item.Selected = days.Contains(item.Text);
       }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T08:54:08.153

我相信您想要的是检查当前日期的星期几并将其与选中的列表框值进行比较。有关如何获取 DayOfWeek 日期的信息，请参阅此[MSDN 链接。](http://msdn.microsoft.com/en-us/library/bb762911.aspx)

# javascript - 奇怪的结构，是什么意思？

> ID：11699445
> 
> 赞同：1
> 
> 时间：2012-07-28T08:25:55.997
> 
> 标签：javascript

我是 JavaScript 的新手，只是学习一些基本的东西（函数、变量等），我对 JavaScript 中的复杂结构知之甚少。

当我阅读其中一个 Web 应用程序的源代码时，有一个很重要的地方我无法理解。这是代码：

```
Helper.using('py.Figures' , function (ns) {
    ns.Point = function (params) {
        ns.Figure.call(this, params);
        this.setType('Point');

        this.visual(new Kinetic.Circle({
            radius:5, strokeWidth:2,
            fill:'red', stroke:'black',
            draggable:false
        }));

        this.getX = function () {
        };
        this.getY = function () {
        };
        this.getPosition = function () {
            return {
                x:this.getX(), y:this.getY()
            }
        }

        ns.Point.distance = function (p1, p2) { // some code }

        ns.MidPoint = function (params)  { // some code }       
}; 
```

1）我在上面的代码中不知道的第一点是第一行声明：

```
Helper.using('py.Figures' , function (ns) {... } ); 
```

本文档中的许多文件都使用这种结构。在这个文档中，有一个文件名`Helper`，但是当我在这个文档中搜索时，我没有看到类似的东西`py.Figures`（通过使用 Control + F）。那么，它真正指向什么？

上面的行看起来像一个函数，所以这`function(ns)`意味着什么，它看起来像参数，但我不这么认为。

2）我不知道的第二点是：

`ns.Point`, `ns.Point.distance`,`ns.MidPoint`看起来像方法。所以，`function(ns)`是一堂课，对吧？如果`ns.Point`是一个方法，为什么在这个方法中，还有其他方法，比如`getX`and `getY`，这让我觉得那些看起来也像一个类。

抱歉，如果我的问题很愚蠢，但是这段代码对我来说看起来很奇怪，而且我没有看到任何熟悉我学过的语言（Java、C#）或其他脚本语言（Python）的东西

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T08:50:40.447

1）这`function (ns) {... }`确实是一个论点。解析函数，并将指向函数的指针传递给函数`Helper.using`。你不会在 Java 中看到这些东西，但我认为这是 Javascript 的一大优点。

这是定义回调的常用方法，并且该参数函数看起来确实像回调。

2）不，`ns`是一个类对象，或者更好的是，通常是一个`Object`. 它不需要是类的实例。然后回调函数定义`Point`对象上的方法`ns`。在方法的主体中，它定义（或可能重新定义）方法`getX`，`getY`并且`getPosition`，因为`this`指的是对象`ns`。

再看一遍，`ns.Point`确实是一个函数，但它可能用作类定义，因此在代码的其他部分中，您可能会注意到类似`new ns.Point(...)`. 这就是“类”在 Javascript 中的工作方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T09:32:15.683

如果您是新手并且不了解复杂的结构和模式。你必须先了解这个概念，然后再进一步，这样你就不会在遇到奇怪的表达时感到困惑或困惑。这是一个非常好的和准确的教程：[http ://www.youtube.com/watch?v=gLVmkhLnxwM](http://www.youtube.com/watch?v=gLVmkhLnxwM)

我可能没有向您解释您的代码，但我相信我发送的视频真的会有所帮助。

# java - 如何在struts2 textfield标签中将日历对象转换为日期

> ID：11699451
> 
> 赞同：1
> 
> 时间：2012-07-28T08:27:26.650
> 
> 标签：java, jakarta-ee, struts2

我正在编辑用户个人资料，我需要一种方法来编辑用户的出生日期。在我的动作类中，dateOfBirth 是一个 Calendar 对象。现在如何在出生日期文本字段中填充日期。

```
<s:textfield id="txtDob" name="dateOfBirth" />

public class Person {

    private Calendar dateOfBirth;
    public Calendar getDateOfBirth() {    
        return dateOfBirth;
    }
    public void setDateOfBirth(Calendar dateOfBirth) {    
        this.dateOfBirth = dateOfBirth;
    }
} 
```

当我运行 jsp 时，这就是我在文本字段中得到的

```
java.util.GregorianCalendar[time=366229800000,areFieldsSet=true,areAllFieldsSet=true,lenient=true,zone=sun.util.calendar.ZoneInfo[id="Asia/Calcutta",offset=19800000,dstSavings=0,useDaylight=false,transitions=6,lastRule=null],firstDayOfWeek=1,minimalDaysInFirstWeek=1,ERA=1,YEAR=1981,MONTH=7,WEEK_OF_YEAR=33,WEEK_OF_MONTH=3,DAY_OF_MONTH=10,DAY_OF_YEAR=222,DAY_OF_WEEK=2,DAY_OF_WEEK_IN_MONTH=2,AM_PM=0,HOUR=0,HOUR_OF_DAY=0,MINUTE=0,SECOND=0,MILLISECOND=0,ZONE_OFFSET=19800000,DST_OFFSET=0] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T13:33:59.470

而不是使用 s:textfield 标记尝试使用 dojo ajax sx:datetimepicker 标记。在使用 dojo 标签之前添加相应的 jars。

```
<%@ page contentType="text/html; charset=UTF-8"%>
<%@ taglib prefix="s" uri="/struts-tags"%>
<%@ taglib prefix="sx" uri="/struts-dojo-tags"%>
<html>
<head>
<title>Example/title>
<s:head />
<sx:head />
</head>
<body>
<sx:datetimepicker name="dateOfBirth" label="Date Of Birth"
     displayFormat="MM/dd/yyyy" />
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T10:46:05.820

这是因为 struts2 有一组开箱即用的类型转换器，并且 struts2 仅支持日期转换，并且它使用与当前请求关联的 Locale 的 SHORT 格式。

您可以创建自定义类型转换器，并告诉 struts2 将该类型转换器用于 Calendar 对象。创建自定义类型转换器非常简单直接。`StrutsTypeConverter`为此目的使用 S2 提供的类

```
 public class MyConverter extends StrutsTypeConverter {
    public Object convertFromString(Map context, String[] values, Class toClass) {
       .....
    }

    public String convertToString(Map context, Object o) {
       .....
    }
 } 
```

*   [TypeConversion-CreatingaTypeConverter](http://struts.apache.org/2.3.1/docs/type-conversion.html#TypeConversion-CreatingaTypeConverter)

# java - BugSense 正在崩溃

> ID：11699462
> 
> 赞同：0
> 
> 时间：2012-07-28T08:28:42.307
> 
> 标签：java, android, exception, filenotfoundexception, bugsense

我正在使用 BugSense，它几乎可以正常工作，包括报告错误。问题是每次应用程序启动时，它都会引发一些异常（看起来应用程序将崩溃（黑屏）但它没有......）

这是堆栈跟踪：

```
07-28 11:21:48.373: I/BugSense(16173): java.io.FileNotFoundException: /mnt/sdcard/.bugsense: open failed: ENOENT (No such file or directory)
07-28 11:21:48.373: I/BugSense(16173):  at libcore.io.IoBridge.open(IoBridge.java:406)
07-28 11:21:48.373: I/BugSense(16173):  at java.io.FileInputStream.<init>(FileInputStream.java:78)
07-28 11:21:48.373: I/BugSense(16173):  at java.io.FileInputStream.<init>(FileInputStream.java:105)
07-28 11:21:48.373: I/BugSense(16173):  at java.io.FileReader.<init>(FileReader.java:66)
07-28 11:21:48.373: I/BugSense(16173):  at com.bugsense.trace.UidUtils.getCurrentUid(Unknown Source)
07-28 11:21:48.373: I/BugSense(16173):  at com.bugsense.trace.UidUtils.getUid(Unknown Source)
07-28 11:21:48.373: I/BugSense(16173):  at com.bugsense.trace.BugSense.sendTick(Unknown Source)
07-28 11:21:48.373: I/BugSense(16173):  at com.bugsense.trace.BugSense.access$100(Unknown Source)
07-28 11:21:48.373: I/BugSense(16173):  at com.bugsense.trace.BugSense$4.doInBackground(Unknown Source)
07-28 11:21:48.373: I/BugSense(16173):  at android.os.AsyncTask$2.call(AsyncTask.java:264)
07-28 11:21:48.373: I/BugSense(16173):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
07-28 11:21:48.373: I/BugSense(16173):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
07-28 11:21:48.373: I/BugSense(16173):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
07-28 11:21:48.373: I/BugSense(16173):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
07-28 11:21:48.373: I/BugSense(16173):  at java.lang.Thread.run(Thread.java:856)
07-28 11:21:48.373: I/BugSense(16173): Caused by: libcore.io.ErrnoException: open failed: ENOENT (No such file or directory)
07-28 11:21:48.373: I/BugSense(16173):  at libcore.io.Posix.open(Native Method)
07-28 11:21:48.373: I/BugSense(16173):  at libcore.io.BlockGuardOs.open(BlockGuardOs.java:110)
07-28 11:21:48.373: I/BugSense(16173):  at libcore.io.IoBridge.open(IoBridge.java:390)
07-28 11:21:48.373: I/BugSense(16173):  ... 14 more
07-28 11:21:49.718: I/BugSense(16173): Cannot write file
07-28 11:21:49.718: I/BugSense(16173): java.io.FileNotFoundException: /mnt/sdcard/.bugsense: open failed: EACCES (Permission denied)
07-28 11:21:49.718: I/BugSense(16173):  at libcore.io.IoBridge.open(IoBridge.java:406)
07-28 11:21:49.718: I/BugSense(16173):  at java.io.FileOutputStream.<init>(FileOutputStream.java:88)
07-28 11:21:49.718: I/BugSense(16173):  at java.io.FileOutputStream.<init>(FileOutputStream.java:128)
07-28 11:21:49.718: I/BugSense(16173):  at java.io.FileOutputStream.<init>(FileOutputStream.java:117)
07-28 11:21:49.718: I/BugSense(16173):  at java.io.PrintWriter.<init>(PrintWriter.java:168)
07-28 11:21:49.718: I/BugSense(16173):  at com.bugsense.trace.UidUtils.saveUid(Unknown Source)
07-28 11:21:49.718: I/BugSense(16173):  at com.bugsense.trace.UidUtils.getUid(Unknown Source)
07-28 11:21:49.718: I/BugSense(16173):  at com.bugsense.trace.BugSense.sendTick(Unknown Source)
07-28 11:21:49.718: I/BugSense(16173):  at com.bugsense.trace.BugSense.access$100(Unknown Source)
07-28 11:21:49.718: I/BugSense(16173):  at com.bugsense.trace.BugSense$4.doInBackground(Unknown Source)
07-28 11:21:49.718: I/BugSense(16173):  at android.os.AsyncTask$2.call(AsyncTask.java:264)
07-28 11:21:49.718: I/BugSense(16173):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
07-28 11:21:49.718: I/BugSense(16173):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
07-28 11:21:49.718: I/BugSense(16173):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
07-28 11:21:49.718: I/BugSense(16173):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
07-28 11:21:49.718: I/BugSense(16173):  at java.lang.Thread.run(Thread.java:856)
07-28 11:21:49.718: I/BugSense(16173): Caused by: libcore.io.ErrnoException: open failed: EACCES (Permission denied)
07-28 11:21:49.718: I/BugSense(16173):  at libcore.io.Posix.open(Native Method)
07-28 11:21:49.718: I/BugSense(16173):  at libcore.io.BlockGuardOs.open(BlockGuardOs.java:110)
07-28 11:21:49.718: I/BugSense(16173):  at libcore.io.IoBridge.open(IoBridge.java:390)
07-28 11:21:49.718: I/BugSense(16173):  ... 15 more
07-28 11:21:49.773: D/BugSenseHandler(16173): Ready to send tick
07-28 11:21:50.078: D/BugSenseHandler(16173): Looking for exceptions in: /data/data/com.ronEven.blich/files
07-28 11:21:50.078: D/BugSenseHandler(16173): Found 0 stacktrace(s)
07-28 11:21:50.148: D/dalvikvm(16173): GC_FOR_ALLOC freed 187K, 4% free 8849K/9159K, paused 40ms
07-28 11:21:50.148: I/dalvikvm-heap(16173): Grow heap (frag case) to 10.113MB for 1463056-byte allocation
07-28 11:21:50.178: D/dalvikvm(16173): GC_FOR_ALLOC freed 0K, 4% free 10278K/10631K, paused 11ms
07-28 11:21:50.218: D/dalvikvm(16173): GC_CONCURRENT freed 1K, 4% free 10277K/10631K, paused 1ms+2ms
07-28 11:21:50.343: D/CLIPBOARD(16173): Hide Clipboard dialog at Starting input: finished by someone else... !
07-28 11:21:51.308: E/BugSenseHandler(16173): Transmitting analytics tick
07-28 11:21:51.308: E/BugSenseHandler(16173): javax.net.ssl.SSLPeerUnverifiedException: No peer certificate
07-28 11:21:51.308: E/BugSenseHandler(16173):   at org.apache.harmony.xnet.provider.jsse.SSLSessionImpl.getPeerCertificates(SSLSessionImpl.java:137)
07-28 11:21:51.308: E/BugSenseHandler(16173):   at org.apache.http.conn.ssl.AbstractVerifier.verify(AbstractVerifier.java:93)
07-28 11:21:51.308: E/BugSenseHandler(16173):   at org.apache.http.conn.ssl.SSLSocketFactory.createSocket(SSLSocketFactory.java:381)
07-28 11:21:51.308: E/BugSenseHandler(16173):   at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:165)
07-28 11:21:51.308: E/BugSenseHandler(16173):   at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
07-28 11:21:51.308: E/BugSenseHandler(16173):   at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
07-28 11:21:51.308: E/BugSenseHandler(16173):   at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
07-28 11:21:51.308: E/BugSenseHandler(16173):   at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
07-28 11:21:51.308: E/BugSenseHandler(16173):   at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
07-28 11:21:51.308: E/BugSenseHandler(16173):   at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
07-28 11:21:51.308: E/BugSenseHandler(16173):   at com.bugsense.trace.BugSense.sendTick(Unknown Source)
07-28 11:21:51.308: E/BugSenseHandler(16173):   at com.bugsense.trace.BugSense.access$100(Unknown Source)
07-28 11:21:51.308: E/BugSenseHandler(16173):   at com.bugsense.trace.BugSense$4.doInBackground(Unknown Source)
07-28 11:21:51.308: E/BugSenseHandler(16173):   at android.os.AsyncTask$2.call(AsyncTask.java:264)
07-28 11:21:51.308: E/BugSenseHandler(16173):   at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
07-28 11:21:51.308: E/BugSenseHandler(16173):   at java.util.concurrent.FutureTask.run(FutureTask.java:137)
07-28 11:21:51.308: E/BugSenseHandler(16173):   at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
07-28 11:21:51.308: E/BugSenseHandler(16173):   at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
07-28 11:21:51.308: E/BugSenseHandler(16173):   at java.lang.Thread.run(Thread.java:856) 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:57:32.657

重新下载并添加 jar 就可以了。也许有时最基本和最愚蠢的解决方案效果最好......

# c# - 在 C# 中以数学方式导航大型 2D 数值网格

> ID：11699464
> 
> 赞同：2
> 
> 时间：2012-07-28T08:28:52.600
> 
> 标签：c#, .net, math, matrix, factoring

我试图在一个非常大的虚拟网格中找到某些感兴趣的坐标。这个网格实际上并不存在于内存中，因为尺寸很大。为了这个问题，让我们假设这些维度是`(Width x Height) = (Int32.MaxValue x Int32.MaxValue)`。

```
 1   2   3   4   5   6   7   8   9  10
  2   4   6   8  10  12  14  16  18  20
  3   6   9  12  15  18  21  24  27  30
  4   8  12  16  20  24  28  32  36  40
  5  10  15  20  25  30  35  40  45  50
  6  12  18  24  30  36  42  48  54  60
  7  14  21  28  35  42  49  56  63  70
  8  16  24  32  40  48  56  64  72  80
  9  18  27  36  45  54  63  72  81  90
 10  20  30  40  50  60  70  80  90 100 
```

关于网格的已知数据：

*   网格尺寸 = `(Int32.MaxValue x Int32.MaxValue)`.
*   任何给定`(x, y)`坐标处的值 = X 和 Y 的乘积 = `(x * y)`。

鉴于上述大量有限数，我需要计算一组坐标，其值为`(x * y)`的幂`e`。假设`e`在这种情况下是 2。

由于循环遍历网格不是一种选择，我考虑过循环遍历：

```
int n = 0;
long r = 0;
List<long> powers = new List<long>();
while (r < (Int32.MaxValue * Int32.MaxValue))
{
    r = Math.Pow(e, n++);
    powers.Add(r);
} 
```

这给了我们一套独特的权力。我现在需要找出每种力量存在的坐标。让我们来吧`2^3=8`。如上图所示，8 存在于 4 个坐标中：`(8,1), (4,2), (2,4) & (1, 8)`.

显然，这里的问题是找到数字 8 的多个因数，但这对于更大的数字将变得不切实际。有没有另一种方法来实现这一点，我错过了什么？

*   使用集合是行不通的，因为这些因素不存在于内存中。
*   是否有一种创造性的方法来考虑所讨论的数字将始终是 的幂`e`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T13:24:18.623

最好的方法是将 e 分解为素数。假设它们如下：{a^m, b^p, c^q}。然后为 e 的每个幂建立集合，例如如果 m=2, p=1, q=3,

e^1 = {a, a, b, c, c, c}

e^2 = (a, a, a, a, b, b, c, c, c, c, c, c}

等直到 e^K > Int32.MaxValue * Int32.MaxValue

然后对于每个集合，您需要遍历这些集合的每个唯一子集以形成一个坐标。另一个坐标是剩下的。对于 e 中的每个唯一素数，您将需要一个嵌套循环。例如：

让我们说 e^2

```
 M=m*m;
  P=p*p;
  Q=q*q;

  c1 = 1 ;
  for (i=0 ; i<=M ; i++)
  {
    t1 = c1 ;
    for (j=0 ; j<=P ; j++)
    {
      t2 = c1 ;
      for (k=0 ; k<=Q ; k++)
      {
        // c1 holds first coordinate
        c2 = e*e/c1 ;
        // store c1, c2

        c1 *= c ;
      }
      c1 = t2*b ;
    }
    c1 = t1*a ;
  } 
```

应该有 (M+1)(P+1)(Q+1) 个唯一坐标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T14:52:27.807

另一种解决方案，不像 Commodore63 的想法那么复杂，但因此可能更简单一些（不需要进行素数分解和计算所有适当的子集）：

```
const int MaxX = 50;
const int MaxY = 50;
const int b = 6;

var maxExponent = (int)Math.Log((long)MaxX * MaxY, b);

var result = new List<Tuple<int, int>>[maxExponent + 1];
for (var i = 0; i < result.Length; ++i)
  result[i] = new List<Tuple<int, int>>();

// Add the trivial case
result[0].Add(Tuple.Create(1, 1));

// Add all (x,y) with x*y = b
for (var factor = 1; factor <= (int)Math.Sqrt(b); ++factor)
  if (b % factor == 0)
    result[1].Add(Tuple.Create(factor, b / factor));

// Now handle the rest, meaning x > b, y <= x, x != 1, y != 1
for (var x = b; x <= MaxX; ++x) {
  if (x % b != 0)
    continue;

  // Get the max exponent for b in x and the remaining factor
  int exp = 1;
  int lastFactor = x / b;
  while (lastFactor >= b && lastFactor % b == 0) {
    ++exp;
    lastFactor = lastFactor / b;
  }

  if (lastFactor > 1) {
    // Find 1 < y < b with x*y yielding a power of b
    for (var y = 2; y < b; ++y)
      if (lastFactor * y == b)
        result[exp + 1].Add(Tuple.Create(x, y));
  } else {
    // lastFactor == 1 meaning that x is a power of b
    // that means that y has to be a power of b (with y <= x)
    for (var k = 1; k <= exp; ++k)
      result[exp + k].Add(Tuple.Create(x, (int)Math.Pow(b, k)));
  }
}

// Output the result
for (var i = 0; i < result.Length; ++i) {
  Console.WriteLine("Exponent {0} - Power {1}:", i, Math.Pow(b, i));
  foreach (var pair in result[i]) {
    Console.WriteLine("  {0}", pair);
    //if (pair.Item1 != pair.Item2)
    //  Console.WriteLine("  ({0}, {1})", pair.Item2, pair.Item1);
  }
} 
```

# jquery - 无法访问 jQuery 中的变量值

> ID：11699465
> 
> 赞同：1
> 
> 时间：2012-07-28T08:28:57.097
> 
> 标签：jquery

我遇到的问题是我无法访问函数外部变量的值。我刚刚开始学习 jQuery，我真的很喜欢它，但这已经让我坚持了很长一段时间。

我已经阅读了与此相关的其他线程，但这些方法仍然不起作用！

```
 $.get("/new/verify.php", { username: username, email: email },
        function(data){
            var stop_loading = '0';
            if(data == 'username')
            {
                alert('username taken');
                $('#username_taken_error').show();
                $('#username').focus();
                stop_loading = '1';
            }else if(data == 'email') {
                alert('email taken');
                $('#email_taken_error').show();
                $('#email').focus();
                stop_loading = '1';
            }else if(data == 'username|email') {
                alert('username/email taken');
                $('#username_taken_error').show();
                $('#email_taken_error').show();
                $('#username').focus();
                stop_loading = '1';     
            }
    });

    alert(stop_loading);

    if(stop_loading == '1') {
        alert('Stop loading');
        return false;   
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T09:54:31.327

由于`$.get()`执行异步 AJAX 请求，因此在您的`$.get()`成功函数中调用另一个函数，`stop_loading`如下所示：

```
 $.get("/new/verify.php", { username: username, email: email },
        function(data){
            var stop_loading = '0';
            if(data == 'username')
            {
                alert('username taken');
                $('#username_taken_error').show();
                $('#username').focus();
                stop_loading = '1';
            }else if(data == 'email') {
                alert('email taken');
                $('#email_taken_error').show();
                $('#email').focus();
                stop_loading = '1';
            }else if(data == 'username|email') {
                alert('username/email taken');
                $('#username_taken_error').show();
                $('#email_taken_error').show();
                $('#username').focus();
                stop_loading = '1';     
            }
            // call function with stop_loading
            callAFunction(stop_loading);
    });

    // this function will be called
    // with stop_loading arugment

    function callAFunction(stop_loading){
      if(stop_loading == '1') {
        alert('Stop loading');
        return false;   
      }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T08:30:13.827

在父范围内声明你的变量： var stop_loading = '0';

```
$.get("/new/verify.php", { username: username, email: email },
    function(data){

        if(data == 'username')
        {
            alert('username taken');
            $('#username_taken_error').show();
            $('#username').focus();
            stop_loading = '1';
        }else if(data == 'email') {
            alert('email taken');
            $('#email_taken_error').show();
            $('#email').focus();
            stop_loading = '1';
        }else if(data == 'username|email') {
            alert('username/email taken');
            $('#username_taken_error').show();
            $('#email_taken_error').show();
            $('#username').focus();
            stop_loading = '1';     
        }
});

alert(stop_loading);

if(stop_loading == '1') {
    alert('Stop loading');
    return false;   
} 
```

# java - Spring注入的bean线程安全

> ID：11699467
> 
> 赞同：3
> 
> 时间：2012-07-28T08:29:11.303
> 
> 标签：java, multithreading, spring, dependency-injection, thread-safety

我有一种包含弹簧注入 bean 的“任务”类。（将通过 setter 方法设置）

这个 Task 类将作为一个新对象启动，并将传递给`theradpool`.

所以每个任务类都有注入的bean。

当我在该 bean 类中使用方法时，它是线程安全的吗？（因为 bean 是 a `singleton`）

另请注意，该 bean 类中没有定义类级别变量。

感谢你的帮助..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T08:57:52.140

无状态对象总是本质上是线程安全的。因为它只使用局部变量，所以一个线程无法破坏另一个并发线程使用的状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T10:09:33.293

您的解决方案是否真的是线程安全的取决于您没有提供的许多细节，但是从您的问题陈述中显而易见的一项是注入 bean 的线程安全问题。单例本身可能不是线程安全的。

# python - SocketServer 的 ThreadingMixIn 和 ForkingMixIn 是否有任何池？

> ID：11699471
> 
> 赞同：7
> 
> 时间：2012-07-28T08:30:11.400
> 
> 标签：python, concurrency, asyncsocket, python-multithreading, socketserver

我试图使用基于 SocketServer 的 BaseHttpServer 制作一个 http 代理，它有 2 个异步 Mixins（ThreadingMixIn 和 ForkingMixIn）

他们在每个请求上工作的那两个问题（为每个请求分配一个新线程或派生一个新子进程）

是否有一个 Mixin 使用一个池，比如说 4 个子进程和 40 个线程，所以请求由那些已经创建的线程处理？

因为这将是一个很大的性能提升，我想它会节省一些资源。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-02T17:56:49.367

您可以使用来自[`concurrent.futures`](http://docs.python.org/dev/library/concurrent.futures.html)（自 Python 3.2 起在 stdlib 中）的池：

```
from BaseHTTPServer   import HTTPServer, test
from SimpleHTTPServer import SimpleHTTPRequestHandler
from SocketServer     import ThreadingMixIn

from concurrent.futures import ThreadPoolExecutor # pip install futures

class PoolMixIn(ThreadingMixIn):
    def process_request(self, request, client_address):
        self.pool.submit(self.process_request_thread, request, client_address)

def main():
    class PoolHTTPServer(PoolMixIn, HTTPServer):
        pool = ThreadPoolExecutor(max_workers=40)

    test(HandlerClass=SimpleHTTPRequestHandler, ServerClass=PoolHTTPServer)

if __name__=="__main__":
    main() 
```

如您所见，线程案例的实现相当简单。

如果将其保存到，`server.py`则可以将其运行为：

```
$ python -mserver 
```

此命令最多使用 40 个线程来处理`http://your_host:8000/`.

的主要用例`HTTPServer`是用于测试目的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T16:25:15.050

我已经开始了一个解决这个问题的项目

[https://github.com/muayyad-alsadi/python-PooledProcessMixIn](https://github.com/muayyad-alsadi/python-PooledProcessMixIn)

也许你想和我一起完成 TODO（在 CTRL+C 后清理）

# mysql - 读取不断增长的mysql表

> ID：11699473
> 
> 赞同：0
> 
> 时间：2012-07-28T08:30:23.350
> 
> 标签：mysql, sharding, database-partitioning, master-slave

我有一个 mysql 表，它已经有 100 万条记录，并且会不断增长。
但是这个表读取量大，性能慢。
我想加快速度。
我知道 mysql 分片、分区和主/从解决方案。
但它无法满足我的要求。

附言。我已经调整了mysql配置，表结构不能改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T08:37:54.810

你为什么不考虑你的`LIMIT`条款。一次读取数百万条记录肯定会出问题。不要进行单个查询并等待太长时间，而是使用多个查询并在每个查询工作时显示数据或组合然后显示。

```
SELECT * FROM `whatever` LIMIT 0, 10000; 
```

然后

```
SELECT * FROM `whatever` LIMIT 10001, 10000; 
```

当然，这可以是一个循环。

# c++ - 第三方C++库，安装在哪里？

> ID：11699474
> 
> 赞同：3
> 
> 时间：2012-07-28T08:30:25.247
> 
> 标签：c++, windows, cross-platform

我即将开始一个应该是跨平台的项目。该代码已经在 Mac OS X 上运行，我已经承担了为 Windows 和 Linux 编写新 GUI 的任务。

我正在考虑从 Windows 开始，但后来我遇到了一些问题。我需要一些第三方 C++ 库，但我不确定应该如何设置 VC++ 解决方案。

更具体地说，我可以在哪里假设安装了第三方库？Windows 上是否有可以安装库的标准文件夹？

或者最好包含一个自定义构建脚本，该脚本从 Web 获取所需的库，并提取到我选择的文件夹中，例如：

```
[git repository]
    [vc++ solution files]
        [ externallibs]
            bin/
                *.dll
            include/
                *.h
            lib/
                *.lib
    [non-windows stuff] 
```

并在解决方案中引用这些文件夹？

在我的工作场所，我们使用 .NET 程序集（当然只有 DLL）做类似的事情。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T08:44:05.127

Windows 中没有库的“标准位置”。但是，您*可以*做一些事情来自动化您的构建。

看起来你正在使用`git`，我想你在存储库中有你的 3-rd 方库。那么你所做的就是正确的 - 你可以有一个脚本将文件放在适当的位置。

-或者-您“假设”这些库位于本地 repo 快照中，并在您的 MSVC++ 解决方案中使用**相对**路径（请记住 - 您可以将它们定义为项目“属性”的一部分，因此您可以在一个地方指定相对位置构建所需的文件）。

在我的项目中，我只是在解决方案中设置“属性”并将它们“链接”到我的项目。这些“属性”指定了我正在使用的第 3 方库的*相对路径，所有这些库都在同一个源代码控制系统中，因此无论单个开发人员的设置如何，都可以访问。*

这是第 3 方库之一的示例，取自`global.props`我用于项目的文件（因此您有一个示例）：

```
 <PropertyGroup Label="UserMacros">
    <CxImage>..\cximage702_full\CxImage</CxImage>
  </PropertyGroup>
  <PropertyGroup>
    <IncludePath>$(CxImage);$(IncludePath)</IncludePath>
    <LibraryPath>$(CxImage);$(LibraryPath)</LibraryPath>
  </PropertyGroup> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T20:34:11.063

我建议使用旧模式：

`c:/Programs Files/Company Name/Product Name/`

库不是产品，但是，这是安装在计算机上的东西。

# c# - 如何将命令从 c# 应用程序发送到其托管的 adobe flash 应用程序？

> ID：11699476
> 
> 赞同：1
> 
> 时间：2012-07-28T08:30:41.283
> 
> 标签：c#, flash

我有一个托管（使用 AxInterop.ShockwaveFlashObjects.dll 中的 Shockwave Flash 对象）一个 Flash 应用程序的 c# 应用程序。
我可以使用 flash 的“fscommand”将命令从 flash 应用程序发送到我的 c# 应用程序。
现在我需要从 c# 应用程序向 Flash 应用程序发送命令（比如设置 Flash 文本），我可以这样做吗？如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T12:47:12.017

有几种方法可以实现：

1.  正如 George Profenza 所指出的，使用[ExternalInterface](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html)是一种实现双向通信的简单实现。它可以来回处理一些原始数据，非常适合在每次调用中涉及少量数据的托管 Flash 通信。但是，对于可以发送和接收多少数据存在[大小限制。](https://stackoverflow.com/questions/1862185/does-the-externalinterface-in-flex-3-have-a-data-size-limitation)

2.  如果大小确实很重要，[那么 XmlSocket](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/XMLSocket.html)将是另一个允许有状态双向通信的选项。在 C# 端，您可以使用[这样的代码片段](http://www.koders.com/csharp/fid38B6B346DEFB346620FE375C9F610A9C5D020DA6.aspx?s=file#L109)来创建 XmlSocket 服务器，并让主机应用程序也托管服务器，然后让 Flash 在启动时连接到服务器。没有大小限制，但是您必须将每个调用编码为 XML，因此在两端序列化和反序列化数据会产生一些开销。多年来，我已经在一些独立的 .NET 基础 Winform 应用程序中成功使用了这项技术。

3.  第三种选择是使用 FlashRemoting。它类似于上述选项中使用的策略，但“服务器”将是一个 Flash Remoting 服务器，它能够使用 AMF 与 Flash 进行通信。这种方法的主要优点是您不必编写任何序列化/反序列化器，因为服务器和 Flash 会为您处理这些，并且也没有大小限制，它非常适合您有多种情况的场景具有复杂数据结构的调用。但是，集成服务器需要预付费用。有[开源解决方案](http://www.fluorinefx.com/)和[闭源解决方案](http://www.themidnightcoders.com/products/weborb-for-net/overview.html)。

第 3 个选项可能不会被探索，因为大多数人会将它用于 Web 应用程序。我个人喜欢第三种选择，尽管我没有将它集成为 Windows 窗体应用程序的第一手经验。我喜欢它，因为它具有将应用程序轻松转换为基于 Web 的应用程序的潜力，并且它还支持复杂的数据结构，而无需花费数据序列化。

# c - 'char' 指针的奇怪行为

> ID：11699479
> 
> 赞同：0
> 
> 时间：2012-07-28T08:31:20.353
> 
> 标签：c

当我声明并运行以下命令时，它给了我一个[分段错误](http://en.wikipedia.org/wiki/Segmentation_fault)。

```
main()
{
    char *p = "boa";
    *(p+1) = 'y';
    printf("%s",p);
} 
```

我怀疑`char *p`是一个常数，等等。

但以下工作正常。

```
main()
{
    int i = 300;
    char *p = (char*)&i;
    *(p+1) = 'y';
    printf("%s",p);
} 
```

这背后的原因是什么？上述规则是否也适用于此？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T08:34:48.570

这取决于您对“工作正常”的定义。但是赋值没有分段错误的原因是因为`p`指向`i`变量的地址，这显然不是一个常量。`i`被分配了一个常数值，但`i`它本身不是一个常数。

对于`i = 300`（假设 little endian [x86](http://en.wikipedia.org/wiki/X86)）：

```
 +--+--+--+--+
i:|2c|01|00|00|
  +--+--+--+--+
  .
 /|\
  |

p:&i 
```

后`*(p+1) = 'y'`

```
 +--+--+--+--+
i:|2c|79|00|00|
  +--+--+--+--+
  .
 /|\
  |

p:&i 
```

因此，打印语句恰好`,y`为您打印，但这只是因为您依赖于平台的字节顺序（这`2c`是一个可打印的[ASCII](http://en.wikipedia.org/wiki/ASCII)字符）。在大端机器上，和/或如果它是非 ASCII 的，情况可能会有所不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T08:41:31.613

区别在于：

```
char *p="boa"; 
```

`p`是一个*指针*。您正在指出无法修改`p`的字符串文字，并且当您尝试修改它时会发生段错误。`"boa"`

```
int i=300;
char *p=(char*)&i; 
```

`i`是类型的变量`int`，您只使用常量`300`来初始化`i`并将 的值按位复制`300`到 的位置`i`，但您*永远不会*指向常量本身，只是将其用作初始化程序。这就是区别，`p`在您的第一个示例中，它指向一个常量字符串文字，而在您的第二个示例中，它指向一个 type 的变量`int`。因此，`i`稍后使用指针修改位置就可以了，`p`因为您正在修改非常量对象`i`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T08:36:37.153

好家伙...

由于字符串存在`const`（你说得对），第一个 seg-faults 。然而，第二个是对指针语义的迷人滥用！;-)

这是您在第二个示例中所做的事情：

*   有一个`int`带有值的随机数（在你的情况下 - `300`）
*   获取它的地址`int`- 基本上是一个地址到一个包含`int`300 （32位？）的位置并将其转换为 a `char*`，其中每个元素都指向一个 8 位值
*   获取“第一个”8 位值的地址，递增 1（递增 8 位（！））并将这 8 位的值更改为数字 ASCII 代码“y”
*   打印“结果字符串”

# winapi - 在结束时暂停控制台应用程序

> ID：11699481
> 
> 赞同：0
> 
> 时间：2012-07-28T08:31:37.140
> 
> 标签：winapi, assembly, x86

我想知道如何在最后暂停控制台应用程序并按回车键，它以汇编结束。这是一段在屏幕上显示“hello world”的代码，但它会立即关闭。那么如何在最后暂停程序呢？

```
.386
.model flat,stdcall
option casemap:none

include windows.inc
include kernel32.inc

.data
sConsoleTitle  db "Console Application",0
sWriteText  db "Hello World",0
.code

Main PROC
    LOCAL hStdout :DWORD
    invoke SetConsoleTitleA, offset sConsoleTitle

    invoke GetStdHandle, STD_OUTPUT_HANDLE
    mov hStdout,EAX

    invoke WriteConsoleA, hStdout, offset sWriteText, 16d, 0, 0
    invoke ExitProcess, 0

Main ENDP
end Main 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T12:53:51.590

由于您已经在使用控制台（我看到`stdout`和`WriteConsole`），我建议您使用适当的控制台：

*   `cmd.exe`. 可以简单地从 Start -> Run 运行，并且包含在每个现代 Windows 中。可以修改为使用不同的字体、调整大小等。
*   [Windows PowerShell](http://www.microsoft.com/powershell/)。大多数人都喜欢它。我不。
*   像[Console](http://sourceforge.net/projects/console/)这样的终端程序。选项卡、半透明和类似 Linux 的鼠标行为非常棒。

单击 .exe 运行它很棒，但是如果您想为其提供输入会发生什么？命令行参数？如果你想重定向标准输入/标准输出怎么办？如果您想通过管道将文件传送给它，或者将它传送给另一个程序，比如 grep，该怎么办？如果您想以非交互方式（例如从脚本）运行程序怎么办？

无法轻松使用控制台程序是*Windows 的*缺点之一。请不要在您的代码中对此进行补偿，并让所有找到方法的人感到不安。

另一种选择是创建一个批处理文件来调用您的可执行文件，然后执行`pause`.

# mysql - Vb.NET 客户端服务器推送通知

> ID：11699482
> 
> 赞同：-2
> 
> 时间：2012-07-28T08:32:08.977
> 
> 标签：mysql, vb.net, push-notification, vb.net-2010

我是 Vb.NET 编程的业余爱好者，或者在这种情况下是任何需要推送服务器通知的编程语言。

我目前正在制作一个应用程序，如果客户端 A 正在执行分配给客户端 B 的任务，则需要服务器发送通知。

我只能想象在服务器上创建另一个应用程序，它一直在监听数据库上发生的任何变化，然后如果有任何变化，就会向分配的用户发送通知。

有没有更好的方法？

有人可以指点我一个好的资源吗？

任何帮助将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T16:36:41.070

这已经在这里 [ [asp.net http server push to client](https://stackoverflow.com/questions/471780/asp-net-http-server-push-to-client) ] 中介绍过，它应该为您提供一些有关向项目添加推送服务的好信息。

在一个相关的问题上，John Saunders 说：

> “不幸的是，这不是网络的设计方式。相反，它的设置是为了让用户请求特定的资源，如果可以的话，网络服务器会提供它。一个请求总是只返回一个响应。
> 
> 这意味着您需要通过在呈现的浏览器页面和您的服务器之间创建心跳来模拟推送服务。该网页将包含 javascript，它告诉浏览器定期询问服务器，“你有什么要更改的吗？” 您可以使用计时器控件在 ASP.Net AJAX 中实现它，但要正确处理它可能会很棘手。你需要注意很多小问题。”

其他一些相关网站和问题：

*   [http://www.strathweb.com/2012/05/native-html5-push-notifications-with-asp-net-web-api-and-knockout-js/](http://www.strathweb.com/2012/05/native-html5-push-notifications-with-asp-net-web-api-and-knockout-js/)
*   [Facebook 等即时通知](https://stackoverflow.com/questions/11409563/instant-notifications-like-facebook?lq=1)
*   [服务器推送技术（又名“COMET”、“http 服务器推送”、“websockets”）](https://stackoverflow.com/questions/5874484/server-push-technology-aka-comet-http-server-push-websockets?rq=1)
*   [AJAX 服务器推送](https://stackoverflow.com/questions/8527703/ajax-server-push?rq=1)

关于推送服务，我知道的一件事是它使用大量资源。另请查看反向 AJAX。

# android - 打开/关闭 gprs 代码

> ID：11699484
> 
> 赞同：2
> 
> 时间：2012-07-28T08:32:47.710
> 
> 标签：android

嗨，我正在开发一个需要通过代码打开/关闭 gprs 的应用程序。我正在使用这种方法来检查连接是否打开/关闭。但是我不知道如果gprs关闭了如何打开它

代码

```
NetworkInfo i = conMgr.getActiveNetworkInfo();
  if (i == null)
    return false;
  if (!i.isConnected())
    return false;
  if (!i.isAvailable())
    return false;
  return true; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T08:53:07.857

使用此代码获取`Broadcast` Wifi 或 GPRS 可用性

```
BroadcastReceiver br;
br = new BroadcastReceiver() {

 @Override
public void onReceive(Context arg0, Intent intent) {
    // TODO Auto-generated method stub  
        String action = intent.getAction();
        if (!action.equals(ConnectivityManager.CONNECTIVITY_ACTION))
           {
              return;
           }
  boolean noConnectivity = intent.getBooleanExtra(ConnectivityManager.EXTRA_NO_CONNECTIVITY, false); 
  NetworkInfo aNetworkInfo = (NetworkInfo) intent.getParcelableExtra(ConnectivityManager.EXTRA_NETWORK_INFO);                            

      if (!noConnectivity)
         {
          if (aNetworkInfo.getType() == ConnectivityManager.TYPE_MOBILE) 
               {
                    Toast.makeText(getApplicationContext(), "Mobile Connected", Toast.LENGTH_LONG).show();
                      //Handle connected case
               }
         if (aNetworkInfo.getType() == ConnectivityManager.TYPE_WIFI)
               {
                    Toast.makeText(getApplicationContext(), "WIFI Connected", Toast.LENGTH_LONG).show();
               }    
          }

       else
         {
              if ((aNetworkInfo.getType() == ConnectivityManager.TYPE_MOBILE) ||
                            (aNetworkInfo.getType() == ConnectivityManager.TYPE_WIFI))
                    {
                        Toast.makeText(getApplicationContext(), "Not Connected", Toast.LENGTH_LONG).show();
                    }
         }              
     }
}; 
```

**在 androidmanifest.xml 中提供以下权限**

```
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

并且不要忘记**`register`**和。**`unregister`** `BroadcastReceiver`

# c++ - 未定义对“WinMain@16”的引用？

> ID：11699486
> 
> 赞同：1
> 
> 时间：2012-07-28T08:33:13.797
> 
> 标签：c++, main

我查看了其他解决方案，但我不知道为什么会这样说，因为我有一个主要的。我尝试将其构建为控制台应用程序和 GUI 应用程序。它应该是一个 GUI 应用程序（SDL）。头文件中的任何地方都必须有一个 main 吗？由于什么原因你会有一个 main 和 main 没有找到。

35 小时后，我终于认为这是最后一个错误。

我的 IDE 是 Code Blocks，我的编译器是 MinGW32。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T11:18:00.937

在链接时使用`-lSDLmain`和。`-mwindows`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T15:44:00.413

我将 mingw32 放在链接器的顶部，然后我可以使用常规的 main。在包含 windows.h 并获得所有额外的参数后，我让 winmain 工作。但我为了更简单的原因删除了它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-28T09:46:02.173

WinMain 是程序的可能入口点之一。

我不熟悉 Windows 上的 GCC 或“CodeBlocks”。Microsoft 链接器的 /ENTRYPOINT 链接器选项描述了可能的入口点：http: [//msdn.microsoft.com/en-us/library/f9t8842e%28v=vs.110%29](http://msdn.microsoft.com/en-us/library/f9t8842e%28v=vs.110%29)

如您所见，“main”用于非 unicode 控制台应用程序，而 WinMain 用于非 unicode GUI 应用程序。

在 Microsoft 链接器上，/SUBSYSTEM 选项用于确定您正在构建的应用程序类型。

机会是

*   您必须为您的编译器执行 /SUBSYSTEM 之类的操作，或者
*   您必须链接一些特定于编译器的库

鉴于上述提示，也许您可​​以弄清楚该怎么做:-)

# android - 空指针异常不知道为什么？安卓

> ID：11699488
> 
> 赞同：-3
> 
> 时间：2012-07-28T08:33:33.750
> 
> 标签：android

> **可能重复：**
> [android 应用程序中的空指针异常](https://stackoverflow.com/questions/11699056/null-pointer-exception-in-android-app)

我不知道为什么，但是我在下面的这段代码中得到了空指针异常，这只是基本代码，但是一旦我单击其中一个图像，就会导致空指针异常

```
public class MainActivity extends Activity implements OnClickListener{

    ImageView img1,img2,img3,img4,img5,img6,img7,img8,img9;
    int i = 0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

    ImageView img1 = (ImageView) findViewById(R.id.ImageView01);
    ImageView img2 = (ImageView) findViewById(R.id.ImageView02);
    ImageView img3 = (ImageView) findViewById(R.id.ImageView03);
    ImageView img4 = (ImageView) findViewById(R.id.ImageView04);
    ImageView img5 = (ImageView) findViewById(R.id.ImageView05);
    ImageView img6 = (ImageView) findViewById(R.id.ImageView06);
    ImageView img7 = (ImageView) findViewById(R.id.ImageView07);
    ImageView img8 = (ImageView) findViewById(R.id.ImageView08);
    ImageView img9 = (ImageView) findViewById(R.id.ImageView09);     
    img1.setOnClickListener(this);       
        img2.setOnClickListener(this);     
        img3.setOnClickListener(this); 
        img4.setOnClickListener(this);
        img5.setOnClickListener(this); 
        img6.setOnClickListener(this);
        img7.setOnClickListener(this);
        img8.setOnClickListener(this);
        img9.setOnClickListener(this);

        if(i == 8){
            //show dialog
            Toast.makeText(getApplicationContext(), "You clicked all 9", Toast.LENGTH_LONG).show();
        }
    }

    @Override
    public void onClick(View v) {
        switch (v.getId()) {
        case R.id.ImageView01:
            // do something
            img1.setVisibility(View.GONE);
            i = i + 1;
            break;
        case R.id.ImageView02:
            // do something
            img2.setVisibility(View.GONE);
            i = i + 1;
            break;
        case R.id.ImageView03:
            // do something     
            img3.setVisibility(View.GONE);
            i = i + 1;
            break;
        case R.id.ImageView04:
            // do something
            img4.setVisibility(View.GONE);
            i = i + 1;
            break;
        case R.id.ImageView05:
            // do something
            img5.setVisibility(View.GONE);
            i = i + 1;
            break;
        case R.id.ImageView06:
            // do something
            img6.setVisibility(View.GONE);
            i = i + 1;
            break;
        case R.id.ImageView07:
            // do something
            img7.setVisibility(View.GONE);
            i = i + 1;
            break;
        case R.id.ImageView08:
            // do something
            img8.setVisibility(View.GONE);
            i = i + 1;
            break;
        case R.id.ImageView09:
            // do something
            img9.setVisibility(View.GONE);
            i = i + 1;
            break;
        }
    } 
```

日志猫：

```
E/AndroidRuntime( 1399): FATAL EXCEPTION: main
E/AndroidRuntime( 1399): java.lang.NullPointerException
E/AndroidRuntime( 1399): at com.aliancegaming.duckduckgone.MainActivity.onClick(MainActivity.java:49)
E/AndroidRuntime( 1399): at android.view.View.performClick(View.java:4084)
E/AndroidRuntime( 1399): at android.view.View$PerformClick.run(View.java:16966)
E/AndroidRuntime( 1399): at android.os.Handler.handleCallback(Handler.java:615)
E/AndroidRuntime( 1399): at android.os.Handler.dispatchMessage(Handler.java:92)
E/AndroidRuntime( 1399): at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime( 1399): at android.app.ActivityThread.main(ActivityThread.java:4745)
E/AndroidRuntime( 1399): at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime( 1399): at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime( 1399): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
E/AndroidRuntime( 1399): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
E/AndroidRuntime( 1399): at dalvik.system.NativeStart.main(Native Method) 
```

# php - 这个for循环有什么问题？

> ID：11699489
> 
> 赞同：0
> 
> 时间：2012-07-28T08:33:54.463
> 
> 标签：php

有人可以帮我修复这段代码吗？我收到一些奇怪的错误：这个 for 循环不能正常工作

```
<?php 
$languages=array('te','hi');
for($langIndex=0;$langIndex<count($languages);$langIndex++)
{
echo $languages;} 
?> 
```

预期结果：

```
te,hi 
```

实际结果：

```
Array Array 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T08:37:00.800

您必须首先获取迭代的数组条目（`$languages[$langIndex]`）：

```
for($langIndex=0;$langIndex<count($languages);$langIndex++) {
  $language = $languages[$langIndex];
  echo $language;
} 
```

另一种可能性是使用[foreach](http://de2.php.net/manual/en/control-structures.foreach.php) -循环：

```
foreach($languages as $langIndex => $language) {
  echo $language;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T08:38:51.000

你不小心使用了`echo array`. 尝试这个：

```
<?php 
$languages=array('te','hi');
for($langIndex=0;$langIndex<count($languages);$langIndex++)
{
    echo $languages[$langIndex];
} 
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T08:39:11.663

你每次都在你的循环中调用你的数组（$languages）......

尝试：

```
for($langIndex=0;$langIndex<count($languages);$langIndex++)
    echo languages[$langIndex];
} 
```

或者

```
foreach($languages as $langue){
    echo $langue;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T08:41:40.583

如果您只想`te,hi`从该数组中获得所需的结果，请使用

```
echo  implode(',', $languages); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-28T08:53:54.373

并且出于性能原因！

```
<?php 
$languages=array('te','hi');
for($langIndex = 0, $count = count($languages) ;$langIndex < $count; $langIndex++)
{
    echo $languages[$langIndex];
} 
?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-28T08:37:01.413

`$languages`您每次都尝试在循环周围打印出整个数组 - 循环内没有任何内容实际上查看值的含义`$langIndex`。您可以打印出当前正在查看的索引处的字符串：

```
echo $languages[$langIndex]; 
```

或者您可以为自己省点麻烦并改用`foreach`循环：

```
foreach ($languages as $lang) {
    echo $lang;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-28T08:38:26.213

寻址数组元素时应使用数组索引

```
<?php 
$languages=array('te','hi');
for($langIndex=0;$langIndex<count($languages);$langIndex++)
{ 
    echo $languages[$langIndex];
} 
?> 
```

# objective-c - 代理不工作

> ID：11699493
> 
> 赞同：1
> 
> 时间：2012-07-28T08:34:34.533
> 
> 标签：objective-c, xcode, delegates

我有一个简单的委托测试，但由于某种原因它没有被调用。

我想通过**delegate****`-(void)test`**从`AppDelegate`课堂上打电话。

 **/// AppDelegate.h

```
#import <Cocoa/Cocoa.h>
@protocol AppDelegateDelegate
@required
-(void)test;
@end
@interface AppDelegate : NSObject <NSApplicationDelegate> {
    id<AppDelegateDelegate> _delegate;
}
@property(nonatomic, retain) id<AppDelegateDelegate> delegate;
@end 
```

/// AppDelegate.m

```
#import "AppDelegate.h"
@implementation AppDelegate
@synthesize delegate = _delegate;
-(void)awakeFromNib {
    [_delegate test];
}
@end 
```

/// 测试.h

```
#import <Foundation/Foundation.h>
#import "AppDelegate.h"
@interface test : NSObject <AppDelegateDelegate>
-(void)test;
@end 
```

/// 测试.m

```
#import "test.h"
@implementation test
-(void)test {
    //this should be called from AppDelegate
    NSLog(@"delegate test");
}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T08:45:43.920

`test`一旦`AppDelegate`加载类并且没有其他类有机会将自己设置为委托，您就会调用委托方法。在另一个类有机会将自己设置为委托**后**，您需要调用委托方法。

您的委托属性也应定义为：

```
@property (assign) IBOutlet id <AppDelegateDelegate> delegate; 
```**

# c++ - 复制链表的反面

> ID：11699494
> 
> 赞同：2
> 
> 时间：2012-07-28T08:34:37.630
> 
> 标签：c++, linked-list

### 复制版本

```
void copyRev(node *head1, node *&head2)
{

    stack<int> dat;
    node* curr = head1;
    while(curr!=NULL){
        dat.push(curr->data);
        curr = curr->next;
    }
    while(!dat.empty()){
        append(head2,dat.top());
        dat.pop();
    }

} 
```

### 附加

```
void append(node* &head, int data){

    if(head==NULL){
        head= new node;
        head->data = data;
        head->next = NULL;
    }
    else{

        node *curr = head;
        while((curr)->next!=NULL){
            (curr) = (curr)->next;
        }
        (curr)->next = new node;
        (curr) = (curr)->next;
        (curr)->data = data;
        (curr)->next = NULL;
    }
} 
```

好吧，我正在尝试克隆链表的反向。我知道如何将列表反转到位。但是这段代码给了我一个`Bus error(code dumped)`.

这就是我调用函数的方式`main()`

```
node *head;

    for(int i = 0;i<9;i++){
        append(head,i*i);
    }
    node *revHead;
    printList(head);

    copyRev(head,revHead);
    printList(revHead); 
```

在`append()`函数中，我检查`NULL`head 并在它为 NULL 时创建一个新节点。此外， append 函数正确地将元素添加到列表中。仅在我调用该`copyRev`程序后才出现问题。

我已经尝试过就地倒车并且它有效。我需要克隆链表的反向。欢迎使用迭代和递归解决方案。另外请指出上述代码中的错误。

这是我自己的练习题，但不是作业题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T08:46:42.320

您没有初始化指针：

```
node *head;
node *revHead; 
```

结果，它们具有不确定的值（即它们是随机的）。

以任何方式使用这些指针中的值都是未定义的行为。这可能是你的错误。

只需初始化它们：

```
node*  head     = NULL;
node*  revHead  = NULL; 
```

### 就地链表的递归反向：

```
void reverse(node*& head)
{
     head = reverse(head, NULL);
}
node* reverse(node* item, node* next)
{
     if (item == NULL)
     {    return next;
     }
     node*  iter = item->next;
     item->next  = next;
     return reverse(iter, item);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T08:43:33.337

乍一看你忘了初始化列表头：

```
node *head = 0; 
```

**编辑**感谢 Alan: 和 revHead

# android - 使用 MultipleChoice 在 Listview 中获取未选中的项目

> ID：11699497
> 
> 赞同：2
> 
> 时间：2012-07-28T08:35:56.297
> 
> 标签：android, listview, unchecked, multiple-choice

对不起这个愚蠢的问题。我知道如何使用 SparseBooleanArray 从 ListView (MultipleChoice) 中获取选中的项目。但是如何获得未选中的项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T08:51:51.150

一旦你得到它，处理 SparseBooleanArray 就非常简单。如果您知道哪些项目被选中，那么您应该能够通过假设所有不在选中位置的项目都未选中来知道哪些项目没有被选中。

```
 SparseBooleanArray checkedPositions = list.getCheckedItemPositions();
    for(int i=0; i<myList.size(); i++) {
      if(checkedPositions.get(i)) {
        // CHECKED
      } else {
        // NOT CHECKED
      }
    } 
```

# ruby-on-rails - 更新操作的多个选项

> ID：11699500
> 
> 赞同：0
> 
> 时间：2012-07-28T08:36:16.740
> 
> 标签：ruby-on-rails, controller, crud, params

如何将不同的选项传递和收集到控制器操作中。

例如，您有一个团队模型，并且您想在团队中添加或删除用户？

我假设这将在团队控制器的更新操作中进行，但更新操作还需要能够更新团队详细信息，如姓名、地址等。

我尝试了以下代码，但是这对我的 css 产生了一些奇怪的结果并产生了错误。

```
link_to team_path(user), params[:add] ,:class => 'btn btn-mini pull-right', :method => :put 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T09:35:13.637

奇怪的结果可能是由混合括号引起的

```
params[:add} 
```

*   你的模型是什么样的？（团队-团队成员关系？）

但总的来说： - 您应该将操作添加到适当的控制器（prob.team_controller）以添加和删除成员：

```
def add_member
end
def remove_member
end 
```

并在 config/routes.rb 中定义路由以便能够使用此操作（在生成的评论中有很多示例如何实现），然后您可以将生成的路径帮助器用于您的 link_to 标记 - 查看可用的路线和路径助手

```
rake routes 
```

# ruby-on-rails - 在 EC2 上部署 Ruby on Rails 项目

> ID：11699508
> 
> 赞同：0
> 
> 时间：2012-07-28T08:37:39.783
> 
> 标签：ruby-on-rails, git, deployment, amazon-ec2

我已经设置了所有内容，并且可以通过免费层上的 ssh 连接到服务器

现在我的项目是如何上传服务器文件和数据库？

我看到rails中有一些宝石，例如将文件部署到服务器的**rubber**，但是我怎样才能集成git以便我也可以提交更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T10:43:24.880

## 代码

要上传文件，请查看[capistrano](https://github.com/capistrano/capistrano/wiki/)。另一个流行的工具是[Vlad the deployer](https://github.com/seattlerb/vlad)。

这是一个简单`deploy.rb`的 rails3 应用程序（假设乘客），现在只需要一个服务器（用实际值替换所有）：

```
require 'bundler/capistrano'
require 'capistrano_colors'

set :application, "<APP_NAME>"
set :repository,  "git@github.com:<USER>/<PROJECT>.git"
set :branch, "master"
set :deploy_to, "/home/<DEPLOY_USER>/<APP_NAME>"
set :keep_releases, 3

set :scm, :git
set :user, "<DEPLOY_USER>"
set :use_sudo, false
set :deploy_via, :remote_cache

default_run_options[:pty] = true
default_run_options[:shell] = '/bin/bash -l'

ssh_options[:forward_agent] = true

role :web, "<IP_OR_PUBLIC_DNS>"
role :app, "<IP_OR_PUBLIC_DNS>"

namespace :deploy do
  task :start do ; end
  task :stop do ; end
  task :restart, :roles => :app, :except => { :no_release => true } do
    run "#{try_sudo} touch #{File.join(current_path,'tmp','restart.txt')}"
  end
end

after "deploy", "deploy:cleanup" 
```

**注意：**在运行之前，您应该 ssh 添加部署用户的私钥以及用于 github 的密钥`cap deploy`。（例如`ssh-add ~/.ssh/id_dsa`）

## 数据库

就数据库而言，您可以在部署过程中运行迁移，也可以`cap deploy:migrations`通过`cap deploy:migrate`. 请务必列出具有角色的服务器`:db`

```
role :db, "<IP_OR_PUBLIC_DNS>", :primary => true 
```

（*注意：*这是将用于运行迁移的服务器，而不是实际的数据库。应在您的 db 中指定该数据库`database.yml`）。

设置数据库本身超出了这个答案的范围，但是您可以直接在实例上运行数据库，或者查看 Amazon 的 RDS，它设置起来非常简单，并且比在单个数据库上运行的数据库更稳定实例。

# java - java中不存在捕获表

> ID：11699510
> 
> 赞同：1
> 
> 时间：2012-07-28T08:38:00.117
> 
> 标签：java, database, try-catch, derby

我需要在表格中插入一些数据。当程序执行插入时，可能会出现错误，因为我还没有创建表。我想在 catch 块中创建该表并返回到 try 块。因此，每当表被删除或碰巧删除时，try catch 都会构建表。

我已经为它编写了一些代码，但它失败了。

```
import java.sql.*;

/**
 *
 * @author JOJO
 */
public class ConnectDB {
  static Connection conn;
   static String driver = "org.apache.derby.jdbc.ClientDriver";
   static String connectionURL = "jdbc:derby://localhost:1527/Libraryprj;user=scott;password=tiger";

  public void AddBookDB(String bookName) throws SQLException {

    String createString = "CREATE TABLE BOOKLEDGER (BOOKNAME VARCHAR(50) NOT NULL)";
    try {
      Class.forName(driver);
    } catch (java.lang.ClassNotFoundException e) {
      e.printStackTrace();
    }
    try
        {
            conn = DriverManager.getConnection(connectionURL);
            Statement stmt = conn.createStatement();
            boolean execute = stmt.execute("insert into BOOKLEDGER values ('" + bookName + "')");
            stmt.close();
        }
        catch (SQLException sqlExcept)
        {
            Statement stmt = (Statement) conn.createStatement();
            stmt.executeUpdate(createString);

            sqlExcept.printStackTrace();
        }
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T08:43:37.143

从我的角度来看，最好以另一种方式进行（使用控制结构而不是 try-catch），因此您可以先测试表是否以这种方式存在：

```
DatabaseMetaData md = conn.getMetaData();
ResultSet rs = md.getTables(null, null, "table_name", null);
if (!rs.next()) {
  //Table not Exist, let's create it 
}
//Insert data into the table ... 
```

在类似的情况下使用 try-catch 是一种不好的做法，try-catch 构造应该只用于捕获异常情况，而不是代替控制结构......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T08:57:55.467

这是一个额外的查询，但我总是使用这个解决方案：

```
Connection connection = DriverManager.getConnection(...) // create the connection
Statement statement = connection.createStatement(...) 
```

并使用此查询，以确保该表存在。它只会失败，如果有人在您的以下 java 代码运行时删除了您的表...

```
statement.execute("CREATE TABLE IF NOT EXISTS yourtable(...Your schema...)"); 
```

在这一点之后，您可以假设该表存在并使用它，而不会出现任何严重问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T09:21:38.960

您的方法的主要问题是您正在捕获 generic `SQLException`，这可能是由于各种各样的原因而发生的，您假设的原因只是其中之一。这就是为什么在尝试创建表之前明确测试表不存在的条件更为合适的原因。

# android - DialogInterface.OnShowListener() 无法解析为类型

> ID：11699511
> 
> 赞同：1
> 
> 时间：2012-07-28T08:38:07.863
> 
> 标签：android

我正在与一个朋友在一个 Android 项目上进行远程协作，当我将他的更改拉到我的本地存储库时，我收到以下错误消息，用于调用 AlertDialog 对象：

```
DialogInterface.OnShowListener() cannot be resolved to a type 
```

这是完整的代码：

```
import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.graphics.Typeface;
import android.os.Bundle;
import android.text.InputType;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.CheckBox;
import android.widget.CompoundButton;
import android.widget.CompoundButton.OnCheckedChangeListener;
import android.widget.EditText;
import android.widget.TextView;
...
...
protected AlertDialog mDialogForgotPassword;
...
...
mDialogForgotPassword = new AlertDialog.Builder(LogInActivity.this)
.setTitle(getString(R.string.forgot_password))
.setView(input)
.setCancelable(false)
.setPositiveButton("Submit", new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int whichButton) {
        // NOTE: LEAVE THIS AS EMPTY
        // WE OVERRIDEN THIS METHOD USING THE setOnShowListener
    }

})
.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int whichButton) {
        dialog.cancel();
    }
})
.create(); // created AlertDialog

// ERROR APPEARS NEXT, red line under "new DialogInterface.OnShowListener()"
mDialogForgotPassword.setOnShowListener(new DialogInterface.OnShowListener() {
    @Override
    public void onShow(DialogInterface dialog) {
        final Button positiveButton = mDialogForgotPassword.getButton(AlertDialog.BUTTON_POSITIVE);
        positiveButton.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                final String EMAIL = input.getText().toString();
                if( ValidationHelper.isEmail(EMAIL) ){
                    resetUserPassword(EMAIL);
                }
            }
        });
    }
}); // end setOnShowListener
mDialogForgotPassword.show(); 
```

这位朋友说，当他在 Eclipse 中键入后按`Ctrl`+时，该方法会显示为建议。然而，对我来说，它没有，但导入语句似乎是完整的。帮助？`Space``mDialogForgotPassword``setOnShowListener()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T08:50:17.480

如果您使用的是 Eclipse，请尝试按

```
CTRL + SHIFT + O 
```

（它不是“零”，它的字母“O”）在导致问题的文件中。这应该可以解决所有导入问题。

如果这没有帮助，那么您应该确保您和您的朋友已将项目配置为使用相同的 API LEVEL。`DialogInterface.OnShowListener()`自 API LEVEL 8 起可用，因此请确保您的项目配置为至少使用该 API 级别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T05:03:31.483

我为消除错误所做的工作：

1.  确保我在 Eclipse 中的 Java 编译器设置为 1.6。右键单击项目 --> Java 编译器 --> 选中“启用项目特定设置” --> 将“编译器合规性级别”设置为 1.6 --> 选中“使用默认编译器合规性设置”。

2.  右键单击项目 --> Android --> 选中项目构建目标的“Android 4.1”。在撰写本文时，Jelly Bean 是最新版本。

3.  在我的 Android 清单中，我将最小 SDK 提高到 8（Froyo，2.2）并将 targetSdk 设置为 16，Jelly Bean。无论如何，API 级别 4 太低了，而且根据[Android 分发数据](http://developer.android.com/about/dashboards/index.html)，它的市场份额非常小而且正在缩小。

# java - 静态导入日历对象数组（无法初始化）

> ID：11699513
> 
> 赞同：0
> 
> 时间：2012-07-28T08:38:38.777
> 
> 标签：java, arrays, import, calendar, static-import

我需要在我的程序中维护一些日期，并且我以 Calendar 对象数组的形式进行。

为了从其他几个类访问它，我计划在一个单独的类中声明它并将数组作为静态导入导入。

现在如何为每个对象设置值？我可以像这样初始化它们并从其他类访问它们：

```
public static Calendar[] cal = new Calendar[]{
                                    Calendar.getInstance(),
                                    Calendar.getInstance()}; 
```

现在如何为它们设置值？

我试过`Calendar.getInstance().set(2012, 11, 10, 16, 30)` 了，但我得到一个没有建议的错误。

所以，

1.  静态导入是正确（或最佳）的方法吗？
2.  如何为其设置值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T08:44:00.743

静态导入部分是无关紧要的，尽管坦率地说，拥有可变对象（日历）的可变数组的可公开访问的可写字段并不是非常好。更好的方法是公开`ImmutableList<DateTime>`使用 Guava for`ImmutableList`和[Joda Time](http://joda-time.sf.net) for `DateTime`. （或者可能`LocalDateTime`）无论如何...

您可以使用静态初始化程序块，但我可能只是编写一个方法：

```
public static Calendar[] cal = createCalendars();

private static Calendar[] createCalendars() {
    Calendar[] ret = new Calendar[2];
    ret[0] = Calendar.getInstance();
    ret[0].set(2012, 11, 10, 16, 30);
    ret[1] = Calendar.getInstance();
    ret[1].set(...);
    return ret;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T09:42:36.370

这可能不适合您的口味，但它无疑是一种非常简洁的方法：

```
public static final Calendar[] cal = createCal(
    2012, 11, 10, 16, 30,
    2012, 11, 11, 16, 30,
    2012, 11, 12, 16, 30
);
static Calendar[] createCal(int... fields) {
  final List<Calendar> cl = new ArrayList<Calendar>();
  for (int i = 0; i < fields.length;) {
    final Calendar c = Calendar.getInstance();
    c.set(fields[i++], fields[i++], fields[i++], fields[i++], fields[i++]);
    cl.add(c);
  }
  return cl.toArray(new Calendar[cl.size()]);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T09:47:24.357

仅供参考，价值：

> Calendar.getInstance().set(2012, 11, 10, 16, 30)

是返回的值`set`: `void`。所以不能初始化

> 日历 cal = Calendar.getInstance().set(2012, 11, 10, 16, 30)

请参阅 Jon & Marko 的更完整答案。

# regex - 为什么 grep 匹配模式“\'”的所有行

> ID：11699517
> 
> 赞同：8
> 
> 时间：2012-07-28T08:39:00.390
> 
> 标签：regex, grep

在[这个 SO question](https://stackoverflow.com/q/11699078/390913)中有一些我无法解释的东西：

```
grep "\'" input_file 
```

匹配给定文件中的所有行。`\'`grep 有什么特殊含义吗 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-28T09:21:37.773

[grep regex GNU extension](http://www.gnu.org/software/findutils/manual/html_node/find_html/grep-regular-expression-syntax.html) : '\'' 匹配整个输入的结尾

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-28T09:02:09.793

这是一个非常奇怪的行为`grep`，我不知道如何解释它，但我必须注意它`\'`与任何字符都不匹配。它看起来与以下含义相同`$`：

```
$ echo x | grep "x\'"
x
$ echo xy | grep "x\'"
$ echo x | grep "\'x" 
```

**更新 1**

正如[http://www.gnu.org/software/findutils/manual/html_node/find_html/grep-regular-expression-syntax.html](http://www.gnu.org/software/findutils/manual/html_node/find_html/grep-regular-expression-syntax.html)中所述（感谢 Richard Sitze 提供的链接），它的含义与`$`. 但与此同时，我注意到`\'`和之间的区别`$`：

```
$ echo x | grep 'x$'
x
$ echo x | grep 'x$$'
$ echo x | grep "x\'"
x
$ echo x | grep "x\'\'"
x
$ echo x | grep "x\'\'\'"
x 
```

您可以根据需要指定任意`\'`多次，但对于`$`. 必须只有一个`$`。

另一个重要的评论。手册说：

```
 ‘\'’ matches the end of the whole input 
```

但严格来说这不是事实，因为`\'`不仅匹配整个输入的结尾，还匹配每一行的结尾：

```
$ (echo x; echo y) | grep "\'"
x
y 
```

具体怎么`$`做。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-28T09:23:37.230

我不知道正则表达式的这个特性。但它在 regular-expressions.info 中列为[**字符串**](http://www.regular-expressions.info/anchors.html#az)锚点的结尾。

它仅存在于 GNU 基本和扩展正则表达式中的所有正则表达式实现中，有关更多信息，请参阅此[兼容性图表](http://www.regular-expressions.info/refflavors.html)。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-28T08:45:58.700

\ 是一个转义字符。这意味着 ' 应该被视为要搜索的文本，而不是控制字符。

# jquery - 使用“-webkit-overflow-scrolling: touch”的实时滚动事件

> ID：11699518
> 
> 赞同：10
> 
> 时间：2012-07-28T08:39:07.113
> 
> 标签：jquery, css, mobile, parallax, momentum

在使用 CSS“-webkit-overflow-scrolling: touch”时，我无法在 iOS 上获得实时的 scrollLeft 位置。

这是一个要演示的小提琴：http: [//jsfiddle.net/WaMUq/](http://jsfiddle.net/WaMUq/)

在桌面上滚动时，我会在滚动时获取实时 scrollLeft 数据，而在 iOS 上，我需要等到动量滚动停止后再向我发送 scrollLeft 数据。

我怎样才能解决这个问题？我正在尝试实时获取这些数据，以创建微妙的视差效果。我已经尝试过[Stellar.js](http://markdalgleish.com/projects/stellar.js/)和[Scrollability.js](http://scrollability.com/)，并且都遇到了等待滚动停止的相同问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T10:13:03.527

它适用于鼠标：http: [//jsfiddle.net/Kirrr/WaMUq/3/](http://jsfiddle.net/Kirrr/WaMUq/3/)

对于触摸：

在 JS 中：

```
$('div.wrap').scroll(function(e){
    $('h4').html( $(this).scrollLeft() );
});

var start_x, wrap_x;
$('div.wrap').bind("touchstart", function(e) {
    e.preventDefault(); // optional. May be it works fine without this
    start_x = e.originalEvent.changedTouches[0].pageX;
    wrap_x = $(this).scrollLeft();
})
$('div.wrap').bind("touchmove", function(e) {
   e.preventDefault(); // optional. May be it works fine without this
   var x = e.originalEvent.changedTouches[0].pageX;
   var result = wrap_x + start_x - x;
   $(this).scrollLeft(result);
}) 
```

对于触摸可能要去掉“-webkit-overflow-scrolling:touch;”

# php - PHP5 OOP 类结构

> ID：11699522
> 
> 赞同：2
> 
> 时间：2012-07-28T08:39:24.907
> 
> 标签：php, oop, class, pdo

我知道这方面有很多问题，我已经做了很多阅读。我想在我的项目背景下问这个问题，看看您可能有什么建议。

我有一个相当大的 Web 应用程序，其中包含许多类，例如*用户*和*文章*（我认为它们是主要类）和较小的类，例如*图像*和*评论*。现在在一个页面上，比如说*一篇文章*，它可能包含许多*图像*和*评论*的实例。有道理吗？现在说一个*文章页面，我调用一个返回**文章*对象数组的静态方法。

这就是背景，所以这里有问题。

由于构建了大量的应用程序，我开始意识到拥有一个包含设置和共享功能的核心系统类将非常有用。在那里，我用一个新的核心课程扩展了我的所有课程。似乎相对简单且快速实施。我知道 CodeIgniter 做了类似的事情。我现在感觉虽然我的应用程序变得有点混乱。

**问题**这是个好主意吗？创建核心实例正是我在调用文章实例时想要的，但是当我使用静态方法创建多个实例时，或者在页面上调用多个图像或评论时呢？我不必要地调用核心课程对吗？实际上它只需要每页调用一次（例如，构造函数从数据库中定义各种设置，我不想每次都这样做，显然每页只调用一次），但是所有类的所有实例都应该可以访问它核心班。听起来就像我想要单例方法一样，但我知道这在 PHP 中是浪费时间。

这是我的代码此时的样子**。**我尽量保持简单。

```
class core {

    public function __construct(){
        ...define some settings which are retrieve from the database
    }

    public function usefulFunction(){
    }
}

class user extends core {

    public function __construct(){
        parent::__construct();
    }

    public function getUser($user_id){
        $db = new database();
        $user = /* Get user in assoc array from db */

        $this->__setAll($user);
    }

    public static function getUsers(){
        $db = new database();
        $users = /* Get users from database in assoc array from db */

        foreach($users as $user) {
             $arrUsers[] = new self();
             $arrUsers[]->__setAll($user);
        }

        return $arrUsers;
    }

    private function __setAll($attributes) {
        foreach($attributes as $key => $value)
        {
            $this->__set($key, $value);
        }   
    }

    public function __set($key, $value) {
         $this->$key = $value;
    }

} 
```

我遇到的另一个问题是有效地使用/共享数据库连接。目前，需要数据库连接的类中的每个方法都会创建一个新的数据库实例，因此在一个页面上我可能会这样做 5 或 10 次。像依赖注入原理这样的东西听起来要好得多。

**问题**现在，如果我将数据库的实例传递给新的用户类，我知道我需要这样的东西......

```
class user{
    protected $db;

    public function __construct($db){
        $this->db = $db;
    }

    ... etc
}

$db = new database();
$user = new user($db); 
```

...但是当我想运行静态函数 users::getUsers() 时，访问数据库实例的最佳方法是什么？我需要在每个静态方法中将它作为变量传递吗？（许多类中有许多静态方法）。这似乎不是最好的方法，但也许没有其他方法。

**问题**如果按照第 1 部分中的建议将我的所有类从核心类中扩展出来，我可以在那里创建一个数据库实例并以某种方式访问​​它吗？

**问题**我还有各种包含函数（不是 oop）的文件，它们就像帮助文件。这些访问数据库的最佳方式是什么？我再次在每个函数中创建了一个新实例。我真的不想将数据库作为参数传递给每个人。我应该使用全局变量，将这些帮助文件转换为类并使用依赖注入或其他不同的东西吗？

我知道那里有很多建议，但是大多数关于 PHP 的信息和教程都已经过时了，而且似乎从来没有涵盖过这么复杂的东西……如果你可以称之为复杂的话？

关于如何最好地布局我的班级结构的任何建议。我知道这看起来很多，但肯定这是大多数开发人员每天都面临的问题。如果您需要更多信息，请告诉我并感谢您的阅读！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T19:33:03.323

您可以从处理所有数据库查询的抽象类开始，然后将它们构造成对象。通过这种方式设置参数化查询将很容易，并且它将标准化您与数据库的交互方式。它还将使添加新对象模型变得轻而易举。

[http://php.net/manual/en/language.oop5.abstract.php](http://php.net/manual/en/language.oop5.abstract.php)

```
abstract class DB
{
  abstract protected function table();
  abstract protected function fields();
  abstract protected function keys();

  public function find()
  {
    //maybe write yourself a parameterized method that all objects will use...
    global $db; //this would be the database connection that you set up elsewhere.
    //query, and then pack up as an object
  }

  public function save()
  {
  }

  public function destroy()
  {
  }
}

class User extends DB
{
  protected function table()
  {
    //table name
  }  

  protected function fields()
  {
    //table fields here
  }

  protected function keys()
  {
    //table key(s) here
  }

  //reusable pattern for parameterized queries
  public static function get_user( $id )
  {
    $factory = new User;
    $params = array( '=' => array( 'id' => $id ) );
    $query = $factory->find( $params );
    //return the object
  }
} 
```

您将希望从一个通用配置文件进行数据库连接，并将其作为此模式的全局变量。

显然这只是表面上的，但希望它能给你一些想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T11:46:34.510

你在评论中问我应该详细说明为什么这是一个坏主意。我想强调以下内容来回答这个问题：

> 问问自己是否真的需要它。

根据需要做出设计决策，而不仅仅是因为你*能*做到。在您的情况下，问问自己是否需要核心课程。正如你已经在评论中被问到你写的你实际上并不需要它，所以答案很清楚：这样做是不好的，因为它不是必需的，并且不需要它会引入很多副作用。

由于这些副作用，您不想这样做。那么从零到英雄，我们来做如下进化：

您有两部分代码/功能。一部分确实发生了变化，另一部分是一些基本功能（框架、库）不会改变。您现在需要将它们放在一起。让我们将其简化并将框架简化为单个函数：

```
function usefulFunction($with, $four, $useful, $parameters)
{
    ...
} 
```

让我们将应用程序的第二部分——改变的部分——简化为单个`User`类：

```
class User extends DatabaseObject
{
    ...
} 
```

我已经在这里介绍了一个小而重要的更改：`User`该类不再扩展自，`Core`而是从自扩展，`DatabaseObject`因为如果我正确阅读了您的代码，它的功能是表示数据库表中的一行，可能即用户表。

我已经做出了这个改变，因为有一个非常重要的规则。每当您在代码中命名某些东西时，例如一个类，请使用一个会说话的好名字。名字就是给某物命名。这个名字`Core`绝对没有说明你认为它是重要的、一般的、基本的或内心深处的，或者它是铁水。没有线索。因此，即使您为设计命名，也要选择一个好名称。我想，`DatabaseObject`这只是一个非常快速的决定，甚至不知道你的代码，所以我很确定你知道那个类的真实名称，而且你也有责任给它真实的名字。它值得一个，是慷慨的。

但是让我们把这个细节放在一边，因为它只是一个细节，与你想要解决的一般问题没有太大关系。假设坏名声是一种症状，而不是原因。我们现在玩 Dr. House 并对症状进行分类，但只是为了找出原因。

目前发现的症状：

*   多余的代码（即使不需要也写一个类）
*   不好的命名

我们可以诊断：迷失方向？:)

因此，要摆脱这种情况，请始终做需要做的事情并选择简单的工具来编写代码。例如，提供常用功能（您的框架）的最简单方法就是使用以下`include`命令：

```
 include 'my-framework.php';    
 usefuleFunction('this', 'time', 'really', 'useful'); 
```

这个非常简单的拖线脚本演示了：应用程序中的一部分负责提供所需的功能（也称为加载），而另一部分正在使用这些功能（这只是我们从一开始就知道的程序代码，对？）。

这个映射/缩放到用户对象可能扩展的更多面向对象的示例如何？完全相同的：

```
include 'my-framework.php';
$user = $services->store->findUserByID($_GET['id']); 
```

这里的区别只是里面`my-framework.php`多了个加载，让常用变化的部分可以利用不变化的东西。例如，可以提供一个表示*服务定位器*的全局变量（此处`$services`）或提供自动加载。

你越简单地保持这一点，你就会进步得越好，最后你将面临真正的决定。通过这些决定，您将更直接地看到有什么不同。

如果您想对“数据库类”进行更多讨论/指导，请考虑阅读《*企业应用程序架构模式*》一书中关于如何处理这些问题的不同方法的非常好的一章，这本书的标题有点长，但它有一章很好地讨论了该主题，并允许您选择一个合适的模式来轻松访问您的数据库。如果你从一开始就让事情变得简单，那么你不仅进步得更快，而且以后更容易改变它们。

但是，如果您从一些从基类扩展的复杂系统开始（甚至可能一次做多项事情），事情从一开始就不会那么容易改变，这将使您坚持这样的决定更长时间。到那时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T12:12:13.303

总结所有答案：

1.  不要使用单一的“上帝”类作为核心。
2.  最好使用能够完成工作的类列表。根据需要创建尽可能多的课程。每个班级应负责一项工作。
3.  不要使用单例，这是旧技术，不灵活，请改用[依赖注入容器（DIC）](http://symfony.com/doc/current/components/dependency_injection/introduction.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T13:49:48.477

首先，最好的办法是使用单例模式来获取数据库实例。

```
class Db{
protected $_db;

private function __construct() {
       $this->_db = new Database();
}

public static function getInstance() {
if (!isset(self::$_db)) {
    self::$_db = new self();
}
return self::$_db;
}
} 
```

现在您可以像`db::getInstance();`在任何地方一样使用它。

其次，您正在尝试在功能上发明称为 Active Record 模式的自行车`__setAll($attributes).`

第三，你为什么在扩展Core的类里写这个东西？

```
public function __construct(){
    parent::__construct();
} 
```

最后，类名应该大写。

# sql - 如何在 SQL JOIN 查询中选择 DISTINCT 结果

> ID：11699523
> 
> 赞同：1
> 
> 时间：2012-07-28T08:39:47.887
> 
> 标签：sql, join, distinct

这是我的查询，所以请检查并告诉我。在此查询中成功执行但 distinct 不起作用：

```
SELECT
  DISTINCT(ticket_message.ticket_id),
  support_ticket.user_id,
  support_ticket.priority,
  support_ticket.subject,
  support_ticket.status,
  ticket_message.message
FROM
  support_ticket
  LEFT OUTER JOIN ticket_message ON support_ticket.ticket_id = ticket_message.ticket_id
  LEFT OUTER JOIN assign_ticket ON ticket_message.ticket_id = assign_ticket.ticket_id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-01-04T10:59:15.130

word`distinct`是关键字的*修饰符*`SELECT`。所以你需要把它想象成`SELECT DISTINCT`它总是在整个行中运行。它只是忽略了下面的括号：

```
select distinct(ticket_message.ticket_id) 
```

因为 distinct 不是函数。

所以。我们似乎拥有的是带有相关消息的支持票。每个支持票通常有多条消息，所以我怀疑你想要的更复杂。例如，您可能只需要每个支持票证的**最新**消息。

要获得**最新**信息，我们需要一个时间戳（或“日期时间”）列，并且我们还需要知道您的数据库是否支持“窗口函数”。假设您有一个时间戳列`message_at`，并且您的数据库确实支持窗口函数，那么这将减少行数：

```
SELECT 
    support_ticket.ticket_id
  , support_ticket.user_id
  , support_ticket.support_section
  , support_ticket.priority
  , support_ticket.subject
  , support_ticket.status
  , tm.file
  , tm.message
  , assign_ticket.section_id
  , assign_ticket.section_admin_id
FROM support_ticket
LEFT OUTER JOIN (
        SELECT
            ticket_id
          , file
          , message
          , ROW_NUMBER() OVER (PARTITION BY ticket_id ORDER BY message_at DESC) AS row_num
        FROM ticket_message
    ) tm ON support_ticket.ticket_id = tm.ticket_id
        AND tm.row_num = 1
LEFT OUTER JOIN assign_ticket ON tm.ticket_id = assign_ticket.ticket_id 
```

`ROW_NUMBER() OVER (PARTITION BY ticket_id ORDER BY message_at DESC)`将数字 1 分配给**最近**的消息，然后我们忽略所有大于 1 的行，从而消除结果中不需要的重复。

所以。

我们确实需要更多地了解您的实际数据、您正在使用的数据库（和版本）以及您的实际需求。**几乎可以肯定 select distinct 不是您想要实现的正确技术。**

我建议您阅读以下内容：[提供`Minimal Complete Verifiable Example`(MCVE)](https://stackoverflow.com/help/mcve) 和[我为什么要提供 MCVE](https://meta.stackoverflow.com/questions/333952/why-should-i-provide-an-mcve-for-what-seems-to-me-to-be-a-very-simple-sql-query)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T08:55:29.480

使用此语句：

```
SELECT DISTINCT
    ticket_message.ticket_id
FROM 
    support_ticket
LEFT OUTER JOIN ticket_message ON 
    support_ticket.ticket_id = ticket_message.ticket_id
LEFT OUTER JOIN assign_ticket ON 
    ticket_message.ticket_id = assign_ticket.ticket_id 
```

一旦您向查询中添加更多列，DISTINCT 也会将它们考虑在内。

# c# - 如何显示用户未参与的测验列表？

> ID：11699524
> 
> 赞同：0
> 
> 时间：2012-07-28T08:39:48.057
> 
> 标签：c#, asp.net, sql-server

我正在开发一个基于网络的培训管理系统，为员工提供每周一次的小测验。在网站的个人资料部分，员工应该能够看到他没有参与的测验列表。我可以让系统显示它们，但在改进系统后不能显示它们。

首先，我有以下数据库设计：

```
Quiz Table: QuizID, Title, Description, IsSent
UserQuiz Table: ID, QuizID, Score, DateTimeComplete, Username 
```

***IsSent 是一个标志，指的是已发送或未发送的测验***

我将 IsSent 放在测验表中，因为我希望管理员能够在一天内插入大约 50 个测验。然后，系统将处理每周发送它们。现在，当用户想要查看他的个人资料并查看他没有参与的测验时，他应该看到已发送且他没有参与的测验列表。

我现在面临的问题是系统将尚未发送的测验显示为员工未参与的测验列表，这是错误的。**那么我该如何解决这个问题呢？**

我的查询：

```
SELECT     Title, Description
FROM         dbo.Quiz
WHERE     (NOT EXISTS
                          (SELECT     QuizID
                            FROM          dbo.UserQuiz
                            WHERE      (dbo.Quiz.QuizID = QuizID) AND (Username = @Username))) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T09:19:09.520

如果我理解正确，那么您正在寻找此查询

```
select QuizID, Title, Description, from quiz 
INNER JOIN userquiz ON quiz.QuizID= userquiz.QuizID
where quiz.issent = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T08:45:24.467

在查询末尾添加以下行

```
AND IsSent = 1 
```

PS 我假设你`isSent`的列是 tinyint 并且 1 = true

# php - 前序遍历节点未在 codeigniter 中删除

> ID：11699526
> 
> 赞同：0
> 
> 时间：2012-07-28T08:40:04.500
> 
> 标签：php, mysql, codeigniter

我已经按照 sql 查询来删除节点。

```
$sql="LOCK TABLE xp_subunit WRITE; ";
            $sql .= "SELECT @myLeft := ".$_GET['lft'].", @myRight :=  ".$_GET['rgt'].", @myWidth :=  ".$_GET['lft']." - lft + 1
            FROM xp_subunit
            WHERE id =".$_GET['id']."; ";

            $sql .= "DELETE FROM xp_subunit WHERE lft BETWEEN @myLeft AND @myRight; ";

            $sql .= "UPDATE xp_subunit SET rgt = rgt - @myWidth WHERE rgt > @myRight; ";
            $sql .= "UPDATE xp_subunit SET lft = lft - @myWidth WHERE lft > @myRight; ";
            $sql.="UNLOCK TABLES;";

            //echo $sql;
            echo $query = $this->db->query($sql); 
```

我在 phpmyadmin 中尝试了这个查询，它成功执行并根据需要删除了节点。但是当我将它转换为 codeigniter 代码时，它会给出 mysql 语法错误，例如：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'DELETE FROM xp_subunit WHERE lft BETWEEN @myLeft AND @myRight;UPDATE xp_subunit ' at line 3

SELECT @myLeft := 1, @myRight := 29, @myWidth := 1 - lft + 1 FROM xp_subunit WHERE id =1; DELETE FROM xp_subunit WHERE lft BETWEEN @myLeft AND @myRight;UPDATE xp_subunit SET rgt = rgt - @myWidth WHERE rgt > @myRight;UPDATE xp_subunit SET lft = lft - @myWidth WHERE lft > @myRight; 
```

我做错了什么吗...谢谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T08:42:58.530

`$this->db->query($sql)`旨在运行单个查询。

不支持单个调用中的多个查询。

# asp.net-mvc - MVC 脚手架很棒，直到我需要扩展我的数据库模式

> ID：11699528
> 
> 赞同：0
> 
> 时间：2012-07-28T08:40:19.580
> 
> 标签：asp.net-mvc, ef-code-first, scaffolding

我正在对一个简单的 Web 应用程序使用代码优先方法：目前只有一个书评表。

我修改了模型以包含一个额外的列（“Rating”），并且我还有一个初始化程序，每次更改架构时都会正确重建数据库。

问题是没有更新 CRUD 视图以反映新的“评级”列。我必须手动修改每个视图，还是有更简单的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T13:18:49.967

是的，您必须手动添加它们。脚手架仅用于简单设置视图/控制器。

# mysql - 如何在 mySQL 中“使用 CTE”？

> ID：11699532
> 
> 赞同：1
> 
> 时间：2012-07-28T08:41:11.433
> 
> 标签：mysql, hierarchical-data, common-table-expression

我在 MYSQL 中有一个用于某些 QA 论坛（例如 stackoverflow）的表“帖子”，其中包含以下示例数据。

```
 INSERT INTO POSTS (postID, type, parentID, QuesTitle) VALUES(1,'Q',NULL,'sometext');
    INSERT INTO POSTS (postID, type, parentID, QuesTitle) VALUES(2,'Q',NULL,'randomtext');
    INSERT INTO POSTS (postID, type, parentID, QuesTitle) VALUES(3,'A',1,NULL);
    INSERT INTO POSTS (postID, type, parentID, QuesTitle) VALUES(4,'A',1,NULL);
    INSERT INTO POSTS (postID, type, parentID, QuesTitle) VALUES(5,'Q',NULL,'titletext');
    INSERT INTO POSTS (postID, type, parentID, QuesTitle) VALUES(6,'A',1,NULL);
    INSERT INTO POSTS (postID, type, parentID, QuesTitle) VALUES(7,'A',2,NULL);
    INSERT INTO POSTS (postID, type, parentID, QuesTitle) VALUES(8,'A',2,NULL); 
```

postID 是主键，parentID 是指 postID。一个“Q”（问题）类型的帖子可以有多个“A”（答案）帖子（由它们的 parentID 显示）。只有“Q”帖子有标题，而“A”帖子没有标题（NULL）

我想**选择**“A”类型的帖子以及他们的帖子 ID、他们的父 ID 和它引用的 Questitle。例如-所需的结果是-

```
 postID    parentID    QuesTitle
    3         1           sometext
    4         1           sometext
    6         1           sometext
    7         2           randomtext
    8         2           randomtext 
```

使用'with'子句 CTE 会更容易，但 MYSQL 不支持它。有人可以帮助我在 MYSQL 中实现它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T19:34:40.387

在他们的示例中，可能不清楚他们为什么要使用 CTE，但我同意如果 MySQL 能够添加这个非常缺乏的功能会非常好（提示 MariaDB 基金会）

CTE 对于任意深度的分层数据非常有用。

这是一个 postgres 示例：

```
CREATE TABLE posts (
    postid integer,
    type character varying(100),
    parentid integer,
    questitle character varying(100)
);
INSERT INTO posts VALUES (1, 'Q', NULL, 'sometext');
INSERT INTO posts VALUES (2, 'Q', NULL, 'randomtext');
INSERT INTO posts VALUES (3, 'A', 1, NULL);
INSERT INTO posts VALUES (4, 'A', 1, NULL);
INSERT INTO posts VALUES (5, 'Q', NULL, 'titletext');
INSERT INTO posts VALUES (6, 'A', 1, NULL);
INSERT INTO posts VALUES (7, 'A', 2, NULL);
INSERT INTO posts VALUES (8, 'A', 2, NULL);
INSERT INTO posts VALUES (9, 'A', 8, NULL);
INSERT INTO posts VALUES (10, 'A', 4, NULL);
INSERT INTO posts VALUES (11, 'A', 10, NULL);
INSERT INTO posts VALUES (12, 'A', 11, NULL); 
```

使用以下查询：

```
with recursive posts_cte (postid, type, parentid, questitle,level,id_lineage)  as
(
    -- base case
    select 
        postid, type, parentid, questitle, 0 as level, ''||postid as id_lineage
    from 
        POSTS
    where 
        parentid is null

    UNION ALL

    -- recursion case
    select 
        c.postid, c.type, c.parentid, c.questitle, p.level+1 as level, p.id_lineage||','||c.postid as id_lineage
    from
        posts c
        inner join posts_cte p on
            c.parentid = p.postid
)
select
    postid, type, parentid, questitle,level,id_lineage
from
    posts_cte
order by
    id_lineage; 
```

产生结果集：

```
 postid | type | parentid | questitle  | level |  id_lineage
--------+------+----------+------------+-------+--------------
      1 | Q    |          | sometext   |     0 | 1
      3 | A    |        1 |            |     1 | 1,3
      4 | A    |        1 |            |     1 | 1,4
     10 | A    |        4 |            |     2 | 1,4,10
     11 | A    |       10 |            |     3 | 1,4,10,11
     12 | A    |       11 |            |     4 | 1,4,10,11,12
      6 | A    |        1 |            |     1 | 1,6
      2 | Q    |          | randomtext |     0 | 2
      7 | A    |        2 |            |     1 | 2,7
      8 | A    |        2 |            |     1 | 2,8
      9 | A    |        8 |            |     2 | 2,8,9
      5 | Q    |          | titletext  |     0 | 5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T08:59:21.473

为什么需要 CTE？

您可以简单地进行自加入来获取`parentID`的信息：

```
SELECT a.postID, a.parentID, b.QuesTitle
FROM   posts a
JOIN   posts b ON a.parentID = b.postID
WHERE  a.type = 'A' 
```

# java - 在 Java 中对变量和否定变量进行排序

> ID：11699538
> 
> 赞同：0
> 
> 时间：2012-07-28T08:41:47.700
> 
> 标签：java

如何对在Java中保存为字符串的变量X和否定变量X'字母进行排序？

```
Example: String string = "B*A'*D*H'"; result must
         String sortedString="A'*B*D*H'"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T08:49:30.243

变量是否总是用 分隔`*`？在那种情况下，它会很简单：

```
 String in = "B*A'*D*H'";
    String[] vars = in.split("\\*");

    Arrays.sort(vars);

    // Java is missing a simple php-like join function ;-(
    StringBuilder sorted = new StringBuilder();
    for(String s: vars){
        sorted.append(s);
        sorted.append("*");
    }
    sorted.deleteCharAt(sorted.length()-1); 
```

你完成了;-)

# javascript - Shell 风格的函数调用？

> ID：11699544
> 
> 赞同：1
> 
> 时间：2012-07-28T08:43:12.940
> 
> 标签：javascript, function, operators

我遇到了一个`typeof x`，我想知道这个语法来自哪里。我已经尝试过，显然不仅仅是任何函数都可以在没有括号的情况下调用，比如`funcname param`;

那么给了什么？有什么`typeof()`不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T08:44:41.990

[`typeof`](https://developer.mozilla.org/en/JavaScript/Reference/Operators/typeof)是javascript 中的一个[运算符，它接受一个操作数。](https://developer.mozilla.org/en/JavaScript/Reference/Operators/)同样`+`，`-`, `<`, `>`... 是运算符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T08:49:40.630

它不是函数，它是 php 中的 echo 之类的运算符。而且 JavaScript 中没有很多“类型”（“undefined”、“object”、“boolean”、“number”、“string”、“function”），所以我认为在没有真正打字的语言中不好用这样的工具。

# c - 如何在 C 语言中获得多个输入？

> ID：11699547
> 
> 赞同：0
> 
> 时间：2012-07-28T08:43:31.663
> 
> 标签：c, data-structures

我是 C 的新手，很想得到一些关于多输入的帮助，例如我有这个结构：

```
typedef struct person{
    char * name;
    int age;
  } 
```

我想写一个函数来获取：姓名年龄姓名年龄姓名年龄...有没有办法可以做到这一点？我以后如何获得这些值？

我的意思是：

```
void my_func(char* name, int age , char* name1,int age1.....) 
```

就像在 JAVA 中一样，我可以使用“...”我想做这样的事情：

```
void my_func(char* name, int age , char* name1,int age1.....){ 
  int num_of_ppl = length of the input/2
  person p1 ;
  p1.name = first input name
  p1.age = first input age 
```

ETC..

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T08:59:52.073

您可以在以下位置使用可变参数功能`stdarg.h`：

```
//
// First argument specifies the number of name/age pairs supplied
//
void my_func(int persons, char *name1, int age1, ...) {
  int age, i;
  char *name;
  va_list vl;
  va_start(vl, age1);

  for (i = 1; i < persons; i++) {
    name = va_arg(vl, char*);
    age = va_arg(vl, int);
    // Do something with the values
  }

  va_end(vl);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T08:54:05.857

*C*语言是一种非常低级的语言，因此您需要决定如何处理每个字段。

在您的情况下，您需要确定什么是`name`，谁拥有指向的数据，并适当地编码，可能类似于：

```
typedef struct person_st {
    char* name; // malloc-ed string
    int age; 
} Person;

// allocate a Person of given name and age
Person* make_person(const char* n, int a) {
   if (!n || a<0) return NULL;
   Person* p = malloc(sizeof(Person));
   if (!p) 
     perror("malloc Person"), exit(1);
   p->name = strdup(n);
   if (!p->name) 
     perror("strdup Person"), exit(1);
   p->age = a;
   return p;
} 

// destroy a Person and the data inside
void destroy_person(Person*p) {
   if (!p) return;
   free (p->name);
   free (p);
}

// read and allocate a Person
Person* input_person(FILE*f) {
   if (!f) return NULL;
   char name[104];
   int age;
   memset (name, 0, sizeof(name));
   age = 0;
   if (fscanf(f, " %100[A-Za-z] %d", &name, &age)<2) 
     return NULL;
   return make_person(name, age);
} 
```

具有调用者`input_person`应`destroy_person`适当调用的约定。

我可能误解了你的问题。您想简单地编写一个[可变参数函数](http://en.wikipedia.org/wiki/Variadic_function)（与输入或输出无关）吗？然后小心使用[`<stdarg.h>`header](http://en.wikipedia.org/wiki/Stdarg.h)。请注意，可变参数函数在 C 中的类型很差。使用 GCC，您可以提供[标记函数属性](http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html)，您甚至可以自定义 GCC，例如使用[MELT](http://gcc-melt.org)来添加一些类型检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T09:03:46.987

如果你想要一个带有可变参数列表的函数，你可以使用**va_list**

```
#include <cstdarg>
using namespace std;
void myFunction(int num, ...)
{
    va_list arguments;                           // A place to store the list of arguments
    va_start ( arguments, num );                 // Initializing arguments to store all values after num
    for ( int x = 0; x < num; x++ )              // Loop until all numbers are added
        func(va_arg ( arguments, person ));      // get next value of argument and call a function
    va_end ( arguments );                        // Cleans up the list

} 
```

# javascript - 单击删除时从表中删除与选定复选框相对应的行

> ID：11699554
> 
> 赞同：-1
> 
> 时间：2012-07-28T08:44:13.457
> 
> 标签：javascript, codeigniter, checkbox

我正在为我的网站使用 codeigniter 框架。在视图中，我有一个显示如下表格的 php 文件：

```
 #        Name

checkbox    1   Aanchal 

checkbox    2   Abhijeet 
```

现在我想获取所有选定复选框的 id（也可以是多个），这样当用户单击导航栏中的删除按钮时，选定的条目就会被删除。

这是我在视图中使用的代码：

```
<header class="jumbotron subhead" id="overview">
    <div class="subnav">
    <ul class="nav nav-pills">
        <li><a href="controller 1">Home</a></li>
        <li><a href="controller 2">Add</a></li>
        <li><a href="controller 3">Edit</a></li>
        <li><a href="controller 4">Delete</a></li>
    </ul>
    </div>
</header>

<div id="content" style="height: 500px; width: 800px">
    <table class="table table-striped">
        <thead>
        <tr>
        <th></th>
        <th>#</th>
        <th>Name</th>
        </tr>
        </thead>
        <tbody>
            <?php
        for($i=0;$i<sizeof($json_string);$i++)
        {       
            $sno = $i + 1;
        ?>
        <tr>
        <td><input type="checkbox" id=<?php $sno?> value=<?php $sno?> /><br />
        </td>
        <td><?php print_r($sno)?></td>
        <td><?php print_r($json_string[$i]->fName);
        if(isset($json_string[$i]->lName))
        {
            print_r($json_string[$i]->lName);
        }
        else
            print_r("");
        ?>
        </td>
    </tbody>
        </table> 
```

控制器 4 将具有从字符串中删除所选条目的代码，所以我应该如何获取并将所选复选框的 ID 传递给控制器​​ 4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T08:54:11.070

设置复选框属性“名称”，例如看起来像

```
<input type="checkbox" name="itemIds[]" id=<?php $sno?> value=<?php $sno?> /> 
```

还要添加表格并将表格放入此表格中。然后在删除按钮上单击提交表单，因此在发布数据中您将获得选中的项目值

# java - 如何检查网页是通过手机浏览器还是PC浏览器访问？

> ID：11699555
> 
> 赞同：2
> 
> 时间：2012-07-28T08:44:35.627
> 
> 标签：java, jakarta-ee, mobile, web

如何检查网页是否已被移动浏览器或计算机浏览器打开。我试过这个：

```
name = request.getHeader("User-Agent"); 
```

但它给出了这些类型的结果：

*   对于 Fedora Firefox 浏览器：*Mozilla/5.0 (X11; Linux i686; rv:13.0) Gecko/20100101 Firefox/13.0*
*   安卓手机浏览器：*Mozilla/5.0 (Linux;U;Android 2.3.6;en-in;Micromax A50 Build/GRK395) AppleWebKit/533.1(KHTML,like Gecko) 版本/4.0 Mobile Safari/533.1*

我无法从以上两个结果中区分网页是手机访问还是电脑访问。我怎么做 ？

如果我能在*Java*中做到这一点，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T09:01:21.677

就像 Mikko 写的那样，没有简单的方法来检测移动设备。

但您可以尝试： [http ://code.google.com/p/php-mobile-detect/](http://code.google.com/p/php-mobile-detect/)

和以前的答案类似： http: [//detectmobilebrowsers.com/](http://detectmobilebrowsers.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T08:53:01.483

没有任何简单的“mobile=true”标志。你只需要自己检查。从[这里](http://www.javaneverdie.com/gwt/want-to-show-mobile-or-phone-site-version-check-user-agent/)您可以找到要搜索的值的子集（列表相当旧，因此应该添加较新的移动浏览器）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-31T03:32:40.413

这是我刚刚找到的一个很好的链接：

[http://www.abeautifulsite.net/blog/2011/11/detecting-mobile-devices-with-javascript/](http://www.abeautifulsite.net/blog/2011/11/detecting-mobile-devices-with-javascript/)

```
var isMobile = {
    Android: function() {
        return navigator.userAgent.match(/Android/i);
    },
    BlackBerry: function() {
       return navigator.userAgent.match(/BlackBerry/i);
    },
    iOS: function() {
        return navigator.userAgent.match(/iPhone|iPad|iPod/i);
    },
    Opera: function() {
        return navigator.userAgent.match(/Opera Mini/i);
    },
    Windows: function() {
        return navigator.userAgent.match(/IEMobile/i);
    },
    any: function() {
        return (isMobile.Android() || isMobile.BlackBerry() || isMobile.iOS() ||      isMobile.Opera() || isMobile.Windows());
    }
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-21T05:44:27.230

您还可以查看屏幕的尺寸（较小的尺寸可能意味着移动设备），这应该可以通过 javascript 访问。

# forms - 将日期选择器添加到谷歌电子表格表单

> ID：11699556
> 
> 赞同：2
> 
> 时间：2012-07-28T08:44:39.600
> 
> 标签：forms, google-apps-script

我有一个谷歌电子表格和一个表格，还有一些代码可以将日期选择器添加到电子表格表格中。我有什么办法可以修改电子表格的现有表格，以便可以添加日期选择器，因为谷歌不支持该功能。

这是日期选择器代码的链接。

[https://developers.google.com/apps-script/class_datepicker](https://developers.google.com/apps-script/class_datepicker)

请帮忙.....

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-08-27T21:32:31.540

FYI 日期已于 2013 年 5 月添加到 Google 电子表格中。请参阅[https://plus.google.com/+GoogleDrive/posts/dfpVxqn1ouW](https://plus.google.com/+GoogleDrive/posts/dfpVxqn1ouW)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-10T03:16:44.757

使用 Google Apps 脚本编写您自己的表单，包括表单的所有问题并添加您的日期选择器。

```
function doGet() {
var app = UiApp.createApplication().setTitle("Add animal");

  var verPanel = app.createVerticalPanel();
  var nameLabel = app.createLabel("Name:").setId('namelabel');
  var nameTextBox = app.createTextBox().setName('nametextbox').setId('nametextbox');
  var bdLabel = app.createLabel("Date:").setId('bdlabel');
  var bdDateBox = app.createDateBox().setId('bddatebox');

  var addButton = app.createButton('Add' ).setId('addbutton');

  var clickHandlerAdd = app.createServerClickHandler("respondToAdd");
  addButton.addClickHandler(clickHandlerAdd);
  clickHandlerAdd.addCallbackElement(verPanel);  

  verPanel.add(nameLabel);
  verPanel.add(nameTextBox);
  verPanel.add(bdLabel);
  verPanel.add(bdDateBox);
  verPanel.add(addButton);

  app.add(verPanel);
return app.close();
}

function respondToAdd(e){
  var app = UiApp.getActiveApplication();  
  var name = e.parameter.nametextbox;
  var bd  = e.parameter.bddatebox;

  var File = DocsList.find("YOURSPREADSHEET");    
  var Id =  aFile[0].getId();
  var Ss = SpreadsheetApp.openById(aId);
  var Sheet = aSs.getSheetByName("THESHEET");
  var NumRows = Sheet.getLastRow();
  var newRow = NumRows + 1;

  aSheet.getRange([newRow],[1]).setValue(name);
  aSheet.getRange([newRow],[2]).setValue(bd); 

  return app;
} 
```

# jquery - 将 Froogaloop 事件附加到 Flexslider 当前幻灯片

> ID：11699560
> 
> 赞同：4
> 
> 时间：2012-07-28T08:45:11.260
> 
> 标签：jquery, api, vimeo, flexslider, froogaloop

我正在使用 Woo Theme 的 Flexslider 构建一个包含多个 Vimeo 视频的滑块。我可以让 Flexslider 根据 vimeo 事件播放和暂停，使用他们的 Froogaloop ($f) 库，但是我无法在 Flexslider 中获取下一个/上一个事件来暂停视频。

如果每个 vimeo 播放器都被硬编码为变量，它就可以工作，但是我需要滑块能够支持任意数量的视频。在此处查看示例：http: [//demo.astronautweb.co/slider/flex/vimeo-multi.html](http://demo.astronautweb.co/slider/flex/vimeo-multi.html)

[Flexslider 页面](http://flexslider.woothemes.com/video.html)上的示例与作为对象的滑块事件挂钩`$f(player)`（我认为）。当我在我的代码中使用它时，这只针对**最后一张幻灯片。**W

当我尝试使用 Flexslider 自己的**slide.currentSlide**时，我只能定位一个元素，而不是一个对象。这是我达到我的javascript知识上限的地方。

这是代码：

```
$(window).load(function(){  

var vimeoPlayers = document.querySelectorAll('iframe'),
    player;

for (var i = 0, length = vimeoPlayers.length; i < length; i++) {
    player = vimeoPlayers[i];
    $f(player).addEvent('ready', ready);
}

function addEvent(element, eventName, callback) {
    (element.addEventListener) ? element.addEventListener(eventName, callback, false) : element.attachEvent(eventName, callback, false);
}

function ready(player_id) {
    var froogaloop = $f(player_id);

    froogaloop.addEvent('play', function(data) {
        $('.flexslider').flexslider("pause");
    });

    froogaloop.addEvent('pause', function(data) {
        $('.flexslider').flexslider("play");
    });
}

var slider = $(".flexslider");

slider.flexslider({
    animation: "slide",
    animationLoop: true,
    slideshowSpeed: 5000,
    video: true, 
    start: function(slider){
        $('body').removeClass('loading');
    },
    before: function(slider){ 

        // this only pauses the last slide
        $f(player).api('pause');

        // this is the Flexslider API for targeting the current slide
        var currentSlide = slider.slides.eq(slider.currentSlide + 1),
            currentFrame = currentSlide.find('iframe');

        console.log(currentFrame);  
    }
}); 
```

});

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T03:40:12.307

从您在 astronautweb.co 上的示例看来，您使用的是旧版本的 Froogaloop API。获取最新的应该会让这更容易[https://github.com/vimeo/player-api/tree/master/javascript](https://github.com/vimeo/player-api/tree/master/javascript)

```
// Enable the API on each Vimeo video
    $('iframe.vimeo-player').each(function(){
  $f(this).addEvent('ready');
});

// Call fitVid before FlexSlider initializes, so the proper initial height can be retrieved.
$(".flexslider")
    .fitVids()
  .flexslider({
    animation: "slide",
    slideshow: false,
    animationLoop: false,
    smoothHeight: true,
    start: function(slider) {
      $('body').removeClass('loading');
    },
    before: function(slider) {

      currentSlide = slider.currentSlide;
      player_id = currentSlide + 1
      currentVideo = 'player_' + player_id;

      $f(currentVideo).api('pause');

    }
}); 
```

这是另一个[Froogaloop API 2.0 的例子](http://labs.funkhausdesign.com/examples/vimeo/froogaloop2-api-basics.html)

# ruby-on-rails - 测试“复杂”操作：类似风险的棋盘游戏部署

> ID：11699561
> 
> 赞同：1
> 
> 时间：2012-07-28T08:45:14.403
> 
> 标签：ruby-on-rails, unit-testing, tdd

我使用 Ruby on Rails 开发了一个类似风险的游戏，我必须开发一个程序来在角色之间（随机）分配领土并将角色的单位（随机）分配到他们的领土。

游戏有 5 个角色的 42 个地区。3 个角色获得 8 个领土，2 个角色获得 9 个领土。每个角色都有 25 个单位（有 9 个领土的单位为 27 个）在分配的领土之间派遣。每个领土必须以至少 1 个单位结束。

我的模型如下。如果需要，我可以更改它。

*   用户；
*   游戏 ;
*   区域 ;
*   角色，将用户绑定到游戏，持有剩余单位进行部署；
*   领土，将一个角色链接到一个区域，保存该区域的单位数量。

现在这是我的想法。

*   我应该将这两个操作（领土调度和单位调度）分开，即使它的性能较差；
*   为了更容易测试，输出状态应该与相同的输入相同：随机部分应该来自外部。

对于这种情况，你会写什么断言？我使用默认的 Rails 3 测试堆栈：Test::Unit 和固定装置。

[该代码可在 GiitHub 上找到](https://github.com/Sephi-Chan/conquest-on-rails-reboot)。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T21:54:54.347

您需要的断言看起来很简单：

*   游戏有42个地区

*   5个字符。

*   3 个角色获得 8 个领土，2 个角色获得 9 个领土。

*   每个角色都有一个 25 个单位的池

等等……

> 我的模型如下。如果需要，我可以更改它。
> 
> *   用户；
> *   游戏 ;
> *   区域 ;
> *   角色，将用户绑定到游戏，持有剩余单位进行部署；
> *   领土，将一个角色链接到一个区域，保存该区域的单位数量。
> 
> 现在这是我的想法。
> 
> *   我应该将这两个操作（领土调度和单位调度）分开，即使它的性能较差；
> *   为了更容易测试，输出状态应该与相同的输入相同：随机部分应该来自外部。

附带说明一下，我认为您在这里的前期设计已经做得足够多了。TDD 应该使您的代码设计出现和发展，因此虽然您可以一开始坚持这些预先制定的规则，但您不应该害怕在编写测试时对它们进行更改甚至完全清除它们.

测试驱动实施的最佳方法是进行第一次测试，然后进行另一次测试……并逐步发现最佳设计似乎是什么，而不是从一开始就尝试构建完美的模型。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-05-14T11:24:06.627

某种 PlayerSelector 不是有用的吗？

也许是一个方法 Player selectPlayer() 或 Player ID。然后，您可以使用某种 CyclicSelector 存根进行选择确定性...您选择的第一个国家/地区进入玩家 1，其次是玩家 2、3、1、2、3 等。

# ruby-on-rails - 许多索引 Postgresql

> ID：11699565
> 
> 赞同：1
> 
> 时间：2012-07-28T08:45:42.290
> 
> 标签：ruby-on-rails, postgresql, indexing

我有一个搜索表单，其中包含很多搜索选项。我将如何索引所有这些列？可以创建包含多列的索引吗？

导轨示例：

```
add_index :cars, [:brand, :fuel, :year_from, :year_to, :price_from, :price_to] and so on... 
```

在单个索引中包含大量列是否“可以”？

PS 我正在使用最新的 Postgresql DS

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T08:53:30.350

这取决于您计划如何查询数据库表。您是否计划运行将包含子句中所有字段的查询？

如果查询将包含子句中的所有字段，则创建多列索引是正确的方法，但如果您将在 where 子句中过滤的字段可能只是其中的一部分（例如，有时只有品牌和燃料，其他时候只有 year_from 和 year_to），并且在不同的组合中，**您最好为每个字段创建一个索引**...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T11:38:01.020

多列索引将非常大，可能太大而无法使用。PostgreSQL 有一个很好的规划器，它可能会使用索引的前几列，然后扫描行而不是扫描索引的剩余部分。这是假设索引的前几列作为搜索条件给出的。

请注意，[文档](http://www.postgresql.org/docs/9.1/static/indexes-multicolumn.html)中有关于多列索引的说明，

> 应谨慎使用多列索引。在大多数情况下，单个列上的索引就足够了，并且可以节省空间和时间。具有超过三列的索引不太可能有帮助，除非表的使用非常程式化。

并使用单列索引。

当您对最有可能搜索的条件有一个很好的了解时，您可能希望在将来尝试添加一个或两个 2 列索引。

# c# - Ado.Net 错误过程或函数“usp_ProjectsCreateNew”需要参数“@ProjectId”，但未提供

> ID：11699566
> 
> 赞同：1
> 
> 时间：2012-07-28T08:45:42.190
> 
> 标签：c#, asp.net, stored-procedures, ado.net

我有这样的参数；

```
 comm.CommandText = "usp_ProjectsCreateNew";

    SqlParameter param = comm.CreateParameter();
    param.ParameterName = "@ProjectId";
    param.Direction = ParameterDirection.Output;
    param.DbType = DbType.Int32;
    comm.Parameters.Add(param);

    param = comm.CreateParameter();
    param.ParameterName = "@ProjectHeading";
    param.Value = heading;
    comm.Parameters.Add(param);

    param = comm.CreateParameter();
    param.ParameterName = "@ProjectLongDescription";
    param.Value = longSummary;
    comm.Parameters.Add(param);

    param = comm.CreateParameter();
    param.ParameterName = "@ProjectUrl";
    param.Value = url;
    comm.Parameters.Add(param);

    param = comm.CreateParameter();
    param.ParameterName = "@PromoFront";
    param.Value = promoFront;
    comm.Parameters.Add(param);

    param = comm.CreateParameter();
    param.ParameterName = "@ProjectThumbnail";
    param.Value = thumbnailFileName;
    comm.Parameters.Add(param);

    param = comm.CreateParameter();
    param.ParameterName = "@ProjectImage2";
    param.Value = imageFileName1;
    comm.Parameters.Add(param);

    param = comm.CreateParameter();
    param.ParameterName = "@ProjectImage3";
    param.Value = imageFileName2;
    comm.Parameters.Add(param);

    param = comm.CreateParameter();
    param.ParameterName = "@ProjectImage4";
    param.Value = imageFileName3;
    comm.Parameters.Add(param);

    param = comm.CreateParameter();
    param.ParameterName = "@ProjectImage5";
    param.Value = imageFileName4;
    comm.Parameters.Add(param);

    comm.Transaction = tran;
    int result = comm.ExecuteNonQuery(); 
```

我的存储过程代码是这样的；

```
CREATE PROC [dbo].[usp_ProjectsCreateNew]
(
    @ProjectId INT output,
    @ProjectHeading varchar(100),
    @ProjectLongDescription varchar(max),
    @ProjectUrl varchar(100),
    @PromoFront bit,
    @ProjectThumbnail varchar(50),
    @ProjectImage2 varchar(50),
    @ProjectImage3 varchar(50),
    @ProjectImage4 varchar(50),
    @ProjectImage5 varchar(50)
)
AS
BEGIN TRY
    BEGIN TRAN
        INSERT INTO [Projects]([ProjectHeading], [ProjectLongSummary], [ProjectUrl],
            [PromoFront], [ProjectThumbnail], [ProjectImage2], [ProjectImage3], [ProjectImage4], [ProjectImage5])
        VALUES(@ProjectHeading, @ProjectLongDescription, @ProjectUrl, 
            @PromoFront, @ProjectThumbnail, @ProjectImage2, @ProjectImage3, @ProjectImage4, @ProjectImage5);

        SELECT @ProjectId = @@IDENTITY;
    COMMIT TRAN
END Try
BEGIN CATCH
    PRINT Error_Message();
    ROLLBACK TRAN
END CATCH 
```

但是我收到了这个错误；

> 消息：过程或函数“usp_ProjectsCreateNew”需要参数“@ProjectId”，但未提供该参数。
> 
> 来源：.Net SqlClient 数据提供者
> 
> 方法：Void OnError(System.Data.SqlClient.SqlException, Boolean, System.Action`1[System.Action])

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T10:33:44.357

首先，你没有告诉`SqlCommand`它它是一个存储过程！

添加这一行：

```
comm.CommandType = CommandType.StoredProcedure; 
```

在设置`comm`'`.CommandText`属性之后。

然后：你的一些参数不清楚 - 我建议你使用这样的东西来创建和添加你的参数到`SqlCommand`对象：

```
cmd.Parameters.Add("@PromoFront", SqlDbType.Bit).Value = 1; 
```

我总是会`SqlDbType`为每个参数明确定义一个，以使其绝对清楚它是什么。不这样做可能会导致不需要的结果。

# tooltip - 使 jfreechart 数据点中的工具提示显示得更快

> ID：11699568
> 
> 赞同：2
> 
> 时间：2012-07-28T08:45:53.047
> 
> 标签：tooltip, jfreechart

有没有办法让 jfreechart 数据点中的工具提示显示得更快？这是我自定义工具提示的方式：

```
    renderer.setBaseToolTipGenerator(new StandardXYToolTipGenerator(){
        public String generateToolTip(XYDataset dataset, int series, int item) {
           双 y =dataset.getYValue(series, item);
           双 x = dataset.getXValue(series, item);
           返回 x+" m, "+y+" %";
        }
    });

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T22:13:38.810

ChartPanel.setInitialDelay(x) 是上面评论的解决方案

# blackberry - 屏幕底部的 TabField 在黑莓中的第一个选项卡以外的所有选项卡上都没有产生点击事件？

> ID：11699571
> 
> 赞同：2
> 
> 时间：2012-07-28T08:46:34.127
> 
> 标签：blackberry, tabbar

我正在一个 BlackBerry 应用程序中工作，我需要在其中使用底部的选项卡。

早些时候，我已经使用了选项卡，但位于屏幕顶部。要将选项卡放在屏幕底部，我使用了该`sublayout()`方法。但是这样做的副作用是我现在不能使用该`display(index)`方法。每次当我单击任何选项卡时，只会选择第一个选项卡。当我隐藏`sublayout()`方法时，一切正常。

这是我正在使用的代码：

**TabControl.java**

```
public class TabControl extends MainScreen{
    public static int tabHeight = 0;
    public static TabField mTabField = null;
    public static Bitmap BACKGROUND_IMAGE = Bitmap
    .getBitmapResource("Background_Superhero.png");
    private UiApplication uiApp = UiApplication.getUiApplication();
    private UiEngine ui = Ui.getUiEngine();
    private int displayHieght;
    public TabControl(BuddyListField buddyList) {
        super(MainScreen.NO_VERTICAL_SCROLL);
    }
    public void addFields() {
        try {
            mTabField = new TabField(this);
            add(mTabField);
            HomeTab home = new HomeTab();
            mTabField.addTab(Bitmap.getBitmapResource("home_tab.png"), home,
                    Field.FOCUSABLE);
            SettingTab setting = new SettingTab();
            mTabField.addTab(Bitmap.getBitmapResource("Setting_tab.png"), setting,
                    Field.FOCUSABLE);
            AboutTab about = new AboutTab();
            mTabField.addTab(Bitmap.getBitmapResource("abouttab.png"), about,
                    Field.FOCUSABLE);

            mTabField.setDefault(Constant.SETTING_TAB_INDEX);
        } catch (Exception e) {
            System.out.println(e+"=-====>>TabControl");
            e.printStackTrace();
        }
    }
    protected boolean keyDown(int keycode, int time) {
        if (keycode == 1769472) {
            // escape pressed
            return true;
        }
        return super.keyDown(keycode, time);
    }
} 
```

**TabField.java**

```
public class TabField extends VerticalFieldManager {

    private static Bitmap tabBackGroundImage = Bitmap
    .getBitmapResource("tab_bar.png");
    private Background CONTROL_NORMAL_BG = BackgroundFactory
    .createBitmapBackground(tabBackGroundImage);
    private Background CONTROL_ACTIVE_BG = BackgroundFactory
    .createSolidBackground(Color.SILVER);

    public static int indexValue = 0;
    private static int mCurrentIndex = 0;
    private int mDefault = 0;

    private Field mCurrentField = null;
    private Vector mTabFields = new Vector();
    private MainScreen _mainscreen = null;
    private HorizontalFieldManager mTabController = new HorizontalFieldManager();

    private UiApplication uiApp = UiApplication.getUiApplication();
    private UiEngine ui = Ui.getUiEngine();
    private int tabHieght;
    private int displayHieght;

    public TabField(MainScreen mainscreen) {
        super(MainScreen.USE_ALL_HEIGHT);
        _mainscreen = mainscreen;
        displayHieght = Display.getHeight();

        add(mTabController);
        SeparatorField separatorField = new SeparatorField();
        separatorField.setBackground(CONTROL_ACTIVE_BG);
        add(separatorField);

    }

    public void setDefault(int index) {
        mDefault = index;
        if (mDefault <= mTabFields.size() - 1) {
            display(mDefault);
        }
    }

    public void display(int index) {
        VirtualKeyboard virtKbd = _mainscreen.getVirtualKeyboard();
        if(virtKbd != null)
            virtKbd.setVisibility(VirtualKeyboard.RESTORE);

        try {
            if (mCurrentField != null) {
                if (mCurrentField instanceof TabFieldItem) {
                    ((TabFieldItem) mCurrentField).onUnSelected();
                }
                delete(mCurrentField);
            }
            mCurrentField = (Field) mTabFields.elementAt(index);
            add(mCurrentField);
            mCurrentField.setFocus();

            if (mCurrentField instanceof TabFieldItem) {
                ((TabFieldItem) mCurrentField).onSelected();
            }

            setDirty(false);
            BitmapField mCurrentBG = (BitmapField) mTabController
            .getField(mCurrentIndex);

            mCurrentBG.setBackground(CONTROL_NORMAL_BG);
            mCurrentBG.setBitmap(getOnUnFocusImg(mCurrentIndex));
            BitmapField mBG = (BitmapField) mTabController.getField(index);
            mBG.setBackground(CONTROL_ACTIVE_BG);
            mBG.setBitmap(getOnFocusImg(index));
            mCurrentIndex = index;
            if(virtKbd != null)
                virtKbd.setVisibility(VirtualKeyboard.HIDE);
            if (indexValue == 3) {

            }
        } catch (Exception e) {
            System.out.println("Exception: In TabField--->display() "
                    + e.toString());
        }
    }

    public void addTab(Bitmap aBitmap, final Field aTabField, long style) {
        BitmapField lButton = null;
        if (style == Field.FOCUSABLE) {
            final BitmapField focusbleButton = new BitmapField(aBitmap,
                    Field.FOCUSABLE) {
                protected boolean navigationClick(int status, int time) {
                    if (aTabField == null) {
                        return false; 
                    }
                    indexValue = getIndex();
                    display(indexValue);
                    return true;
                }

                protected void paint(Graphics graphics) {
                    if (indexValue == getIndex()) {
                        graphics.setBackgroundColor(Color.SILVER);
                        graphics.clear();
                    }
                    super.paint(graphics);
                }

                public void setSpace(int hSpace, int vSpace) {

                    super.setSpace(hSpace, vSpace);
                }
            };
            focusbleButton.setBackground(CONTROL_NORMAL_BG);
            setlButtonSpace(focusbleButton);
            lButton = focusbleButton;
        } else {
            lButton = new BitmapField(aBitmap);
        }
        /*if (WallpaperMainScreen.tabHeight == 0)
            WallpaperMainScreen.tabHeight = lButton.getBitmapHeight();*/
        mTabController.add(lButton);
        mTabFields.addElement(aTabField);

        if (mDefault == mTabFields.size() - 1 && aTabField != null) {
            display(mDefault);
        }
    }

    //SUBLAYOUT METHOD USED TO BRING THE TABBAR AT THE BOTTOM OF THE SCREEN---------------
    protected void sublayout(int maxWidth, int maxHeight) {
        super.sublayout(maxWidth, maxHeight);
        tabHieght = mTabController.getHeight();
        int y = displayHieght - tabHieght;
        setPositionChild(mTabController, 0, y);
    }

    private void setlButtonSpace(BitmapField lButton) {
        int tabWidth = Display.getWidth() / 3;
        int imagewidth = lButton.getBitmapWidth();
        int imageheight = lButton.getBitmapHeight();
        int hPaddingValue = (tabWidth - imagewidth) / 2;
        int vPaddingValue = (tabWidth - imageheight) / 7;
        lButton.setSpace(hPaddingValue + 1, vPaddingValue);
    }

    private Bitmap getOnFocusImg(int index) {
        Bitmap image = null;
        switch (index) {
        case 0:
            image = Bitmap.getBitmapResource("home_tab.png");
            break;
        case 1:
            image = Bitmap.getBitmapResource("Setting_tab.png");
            break;
        case 2:
            image = Bitmap.getBitmapResource("about_tab.png");
            break;
        /*case 3:
            image = Bitmap.getBitmapResource("exit_tab.png");
            break;
*/
        }
        return image;
    }

    private Bitmap getOnUnFocusImg(int currentIndex) {
        Bitmap image = null;
        switch (currentIndex) {
        case 0:
            image = Bitmap.getBitmapResource("home_tab.png");
            break;
        case 1:
            image = Bitmap.getBitmapResource("Setting_tab.png");
            break;
        case 2:
            image = Bitmap.getBitmapResource("about_tab.png");
            break;
        /*case 3:
            image = Bitmap.getBitmapResource("exit_tab.png");
            break;*/
        }
        return image;

    }

    protected boolean keyChar(char ch, int status, int time) {
        if (mCurrentField != null && mCurrentField instanceof TabFieldItem) {
            return ((TabFieldItem) mCurrentField).keyChar(ch, status, time);
        } else {
            return super.keyChar(ch, status, time);
        }
    }
} 
```

**TabFieldItem.java**

```
package com.np.custom;

public interface TabFieldItem {
    /**
     * Method invoked when the tabField is about to be displayed
     */
    public void onSelected();

    /**
     * Method invoked when the tabField is about to be removed from the display
     */
    public void onUnSelected();

    public boolean keyChar(char ch, int status, int time);

} 
```

我在 TabField.java 类中使用了 sublyout 方法。结果如图所示。

![在此处输入图像描述](../Images/bb3391d715e72e8c6f6535497af9af1a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T08:29:32.023

在“add(mTabController)”上方添加一个管理器，并将该管理器的固定高度覆盖子布局并在子布局内设置 setextent，高度必须为 displayheight-mtabcontroller 高度。并删除 tabfield 类中覆盖的子布局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T09:43:49.573

我有一些建议。

首先，在构建这样的东西时，尤其是对于 BlackBerry，很难获得所有的点击处理，或者正确的焦点处理。从 RIM 的一个例子开始通常是个好主意，你知道它是有效的。在这种情况下，您可以[在此处查看他们的 Tab Bar 示例](http://www.blackberry.com/knowledgecenterpublic/livelink.exe/fetch/2000/348583/800332/800505/800508/How_To_-_Create_tabbed_view_screens.html?nodeid=1357482&vernum=0)。

如果您想坚持使用您的代码，我发现有几件事可能存在问题：

```
//SUBLAYOUT METHOD USED TO BRING THE TABBAR AT THE BOTTOM OF THE SCREEN---------------
protected void sublayout(int maxWidth, int maxHeight) {
    super.sublayout(maxWidth, maxHeight);
    tabHieght = mTabController.getHeight();
    int y = displayHieght - tabHieght;
    setPositionChild(mTabController, 0, y);
} 
```

1.  当您实施 时`sublayout()`，您通常应该为您拥有的每个子字段调用`setPositionChild()`和。你只是在打电话。通常，打电话也是合适的。`layoutChild()``Manager``setPositionChild()``setExtent()`

2.  我最近看到了一堆问题，人们覆盖`VerticalFieldManager`（或`HorizontalFieldManager`）然后仍然覆盖`sublayout()`以提供自定义布局管理。这违背了`VerticalFieldManager`首先使用的目的，因为它为您执行垂直布局，按照您的顺序排列子字段`add()`。如果您想要任何自定义，我建议您扩展`Manager`，而不是`VerticalFieldManager`. 如果默认`VerticalFieldManager`布局不是您想要的，那么只需提供所需的完整实现即可`Manager`。这不是很困难。只需执行`sublayout()`,`getPreferredWidth()`和`getPreferredHeight()`.

当然，您仍然需要`sublayout()`正确实施（参见上面的**1.**）。

无论如何，发布类似问题的其他人也看到了奇怪的行为，直到他们将他们的班级（`TabField`为你）改为`extends Manager`。这就是我首先要尝试解决的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T02:30:50.917

尝试使用[setStatus(mTabField)](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/ui/container/MainScreen.html#setStatus%28net.rim.device.api.ui.Field%29)而不是覆盖子布局。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T12:46:08.437

对于选项卡栏示例，在 Blackberry JDE（4.5 及更高版本）中创建新项目

只需复制下面的代码并执行它。

**MyTabAppDemo.java**

```
package com.app;

import net.rim.device.api.ui.UiApplication;

public class MyTabAppDemo extends UiApplication
{   public static void main(String[] args)
    {   MyApp theApp = new MyApp();       
        theApp.enterEventDispatcher();
    }
    public MyApp()
    {             
        pushScreen(new TabScreenExample());
    }    
} 
```

**TabScreenExample.java**

```
package com.app;

import net.rim.device.api.system.Application;
import net.rim.device.api.system.Display;
import net.rim.device.api.ui.UiApplication;
import net.rim.device.api.ui.container.MainScreen;
import net.rim.device.api.ui.container.VerticalFieldManager;

public class TabScreenExample extends MainScreen {
    private VerticalFieldManager mainManager;
    private NavigationMenuBar tabBar;

    public TabScreenExample() {
        tabBar = new NavigationMenuBar() {

            public void onNavigationClick(int selection) {
                if (NavigationMenuBar.TAB1 == selection) {
                    // Push Screen Which is releted to first tab
                    synchronized (Application.getEventLock()) {
                        UiApplication.getUiApplication().pushScreen(new Screan1());
                    }
                } else if (NavigationMenuBar.TAB2 == selection) {
                    // Push Screen Which is releted to second tab
                    synchronized (Application.getEventLock()) {
                        UiApplication.getUiApplication().pushScreen(new Screan2());
                    }
                }
            }
        };
        mainManager = new VerticalFieldManager() {
            protected void sublayout(int maxWidth, int maxHeight) {
                super.sublayout(maxWidth, maxHeight);
                setExtent(getPreferredWidth(), getPreferredHeight());
            }

            public int getPreferredWidth() {
                return Display.getWidth();
            }

            public int getPreferredHeight() {
                return Display.getHeight() - tabBar.getPreferredHeight();
            }
        };

        add(mainManager);
        add(tabBar);
    }
} 
```

// 这里是自定义标签栏.. 在这个标签栏中你可以添加很多标签。

**导航菜单栏.java**

```
package com.app;

import net.rim.device.api.system.Application;
import net.rim.device.api.system.Bitmap;
import net.rim.device.api.system.Display;
import net.rim.device.api.ui.Field;
import net.rim.device.api.ui.Graphics;
import net.rim.device.api.ui.KeypadUtil;
import net.rim.device.api.ui.container.HorizontalFieldManager;

public abstract class NavigationMenuBar extends HorizontalFieldManager {

    public static final int TAB1 = 0;
    public static final int TAB2 = 1;

    // Create object of tabs
    private TopBarComponenet tab1;
    private TopBarComponenet tab2;

    // Selected Tab;
    private int currentState;

    // tab Normal Image
    private Bitmap imgTab1Normal, imgTab2Normal;

    // tab Focus Image
    private Bitmap imgTab1Focus, imgTab2Focus;

    public NavigationMenuBar() {

        // Normal Images
        imgTab1Normal = Bitmap.getBitmapResource("tab1Normal.png");
        imgTab2Normal = Bitmap.getBitmapResource("tab2Normal.png");

        // Focus Images
        imgTab1Focus = Bitmap.getBitmapResource("tab1Focus.png");
        imgTab2Focus = Bitmap.getBitmapResource("tab2Focus.png");

        // create first tab
        tab1 = new TopBarComponenet(imgTab1Normal) {

            protected void onClick() {
                currentState = TAB1;
                selectTab(currentState);
            }
        };
        // create Second tab
        tab2 = new TopBarComponenet(imgTab2Normal) {

            protected void onClick() {
                currentState = TAB2;
                selectTab(currentState);
            }
        };

        // add tab button in horizontal manager.
        add(tab1);
        add(tab2);
    }

    public int getPreferredHeight() {
        return imgTab1Normal.getHeight();
    }

    public void selectTab(int tab) {
        synchronized (Application.getEventLock()) {
            // Set Tab visible GUI
            if (tab == TAB1) {
                tab1.setFocus();
                tab1.setBgImage(imgTab1Focus);
                tab2.setBgImage(imgTab2Normal);
                tab1.selected = true;
                tab2.selected = false;
            } else if (tab == TAB2) {
                tab2.setFocus();
                tab1.setBgImage(imgTab1Normal);
                tab2.setBgImage(imgTab2Focus);
                tab1.selected = false;
                tab2.selected = true;
            }
        }
        currentState = tab;
        onNavigationClick(currentState);
    }

    public void deselectAllTab() {
        tab1.setBgImage(imgTab1Normal);
        tab2.setBgImage(imgTab2Normal);
        tab1.selected = false;
        tab2.selected = false;
    }

    public abstract void onNavigationClick(int selection);

    protected void sublayout(int maxWidth, int maxHeight) {
        super.sublayout(maxWidth, maxHeight);
        setExtent(Display.getWidth(), getPreferredHeight());
    }

    protected void paintBackground(Graphics gr) {
        // TODO Auto-generated method stub
        super.paintBackground(gr);
        gr.setColor(0x000000);
        gr.fillRect(0, 0, Display.getWidth(), getPreferredHeight());
    }

    private abstract class TopBarComponenet extends Field {

        private Bitmap bgImage;
        private String text;
        public boolean selected;
        private int width;
        private int height;

        public TopBarComponenet(final Bitmap bgImage) {
            super(FOCUSABLE);
            this.bgImage = bgImage;
            // this width depends on how many tab added.
            // for example if we want to add 5 tab then
            // width = Display.getWidth() / 5;
            width = Display.getWidth() / 2;
            height = bgImage.getHeight();
        }

        public void setBgImage(Bitmap image) {
            this.bgImage = image;
        }

        protected void drawFocus(Graphics graphics, boolean on) {
        }

        protected void layout(int width, int height) {
            setExtent(getPreferredWidth(), getPreferredHeight());
        }

        public int getPreferredHeight() {
            return height;
        }

        public int getPreferredWidth() {
            return width;
        }

        protected void paint(Graphics graphics) {
            graphics.drawBitmap((width - bgImage.getWidth()) / 2, 0,
                    bgImage.getWidth(), bgImage.getHeight(), bgImage, 0, 0);
            if (isFocus()) {
                graphics.setColor(0xffffff); // white
                graphics.setGlobalAlpha(50);
                graphics.fillRoundRect(0, 2, width, height - 4, 10, 10);
                graphics.setGlobalAlpha(255);
            }
        }

        protected void onFocus(int direction) {
            super.onFocus(direction);
            invalidate();
        }

        protected void onUnfocus() {
            super.onUnfocus();
            invalidate();
        }

        protected boolean keyDown(int keycode, int time) {
            char c = KeypadUtil.getKeyChar(keycode,
                    KeypadUtil.MODE_UI_CURRENT_LOCALE);
            if (c == '\n') {
                onClick();
            } else if (keycode == 13) {
                onClick();
            }
            return super.keyDown(keycode, time);
        }

        protected boolean navigationClick(int status, int time) {
            onClick();
            return true;
        }

        protected abstract void onClick();
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T08:43:44.163

Screen1.java

```
 package com.app;

        import net.rim.device.api.system.Application;
        import net.rim.device.api.system.Display;
        import net.rim.device.api.ui.UiApplication;
        import net.rim.device.api.ui.component.ButtonField;
        import net.rim.device.api.ui.container.MainScreen;
        import net.rim.device.api.ui.container.VerticalFieldManager;

        public class Screen1 extends MainScreen {
            private VerticalFieldManager mainManager;
            private NavigationMenuBar tabBar;
        private static Screen1 ref= null;

    public static Screen1 getInstance(){
        if(ref==null){
            ref = new Screen1();
        }
        return ref;
    }
            public Screen1() {
                tabBar = new NavigationMenuBar() {

                    public void onNavigationClick(int selection) {
                        if (NavigationMenuBar.TAB1 == selection) {

                        } else if (NavigationMenuBar.TAB2 == selection) {
                            // Push Screen Which is releted to second tab
                            synchronized (Application.getEventLock()) {
                                Screen2.getInstance().setSelectedTab(NavigationMenuBar.TAB2);
                        UiApplication.getUiApplication().pushScreen(
                                Screen2.getInstance());
                            }
                        }
                    }
                };
                tabBar.selectTab(NavigationMenuBar.TAB1);
                mainManager = new VerticalFieldManager() {
                    protected void sublayout(int maxWidth, int maxHeight) {
                        super.sublayout(maxWidth, maxHeight);
                        setExtent(getPreferredWidth(), getPreferredHeight());
                    }

                    public int getPreferredWidth() {
                        return Display.getWidth();
                    }

                    public int getPreferredHeight() {
                        return Display.getHeight() - tabBar.getPreferredHeight();
                    }
                };
        //      setTitle("Screen one");
                mainManager.add(new ButtonField("Screen1"));

                add(mainManager);
                add(tabBar);
            }
public void setSelectedTab(int tabNumber) {
    tabBar.selectTab(tabNumber);
}
        } 
```

屏幕2.java

```
 package com.app;

    import net.rim.device.api.system.Application;
    import net.rim.device.api.system.Display;
    import net.rim.device.api.ui.UiApplication;
    import net.rim.device.api.ui.component.ButtonField;
    import net.rim.device.api.ui.container.MainScreen;
    import net.rim.device.api.ui.container.VerticalFieldManager;

    public class Screen2 extends MainScreen {
        private VerticalFieldManager mainManager;
        private NavigationMenuBar tabBar;
    private static Screen2 ref= null;

    public static Screen2 getInstance(){
        if(ref==null){
            ref = new Screen2();
        }
        return ref;
    }
        public Screen2() {
            tabBar = new NavigationMenuBar() {

                public void onNavigationClick(int selection) {
                    if (NavigationMenuBar.TAB1 == selection) {
                        // Push Screen Which is releted to first tab
                        synchronized (Application.getEventLock()) {
                            Screen1.getInstance().setSelectedTab(NavigationMenuBar.TAB1);
                        UiApplication.getUiApplication().pushScreen(
                                Screen1.getInstance());
                        }
                    } else if (NavigationMenuBar.TAB2 == selection) {

                    }
                }
            };
            tabBar.selectTab(NavigationMenuBar.TAB2);
            mainManager = new VerticalFieldManager() {
                protected void sublayout(int maxWidth, int maxHeight) {
                    super.sublayout(maxWidth, maxHeight);
                    setExtent(getPreferredWidth(), getPreferredHeight());
                }

                public int getPreferredWidth() {
                    return Display.getWidth();
                }

                public int getPreferredHeight() {
                    return Display.getHeight() - tabBar.getPreferredHeight();
                }
            };
    //      setTitle("Screen two");
            mainManager.add(new ButtonField("Screen2"));
            add(mainManager);
            add(tabBar);
        }
public void setSelectedTab(int tabNumber) {
    tabBar.selectTab(tabNumber);
}
    } 
```

请在 NAvigationMenuScreen 中评论这两行

tab1.setFocus();

tab2.setFocus();

# android - 如何使用 utf - 8 从 Visual Studio 中的 rest webservice 发送 Xml 到 android？

> ID：11699573
> 
> 赞同：0
> 
> 时间：2012-07-28T08:46:57.200
> 
> 标签：android, asp.net, asp.net-mvc, rest

我有休息网络服务，它是在 Visual Studio Asp.net 项目中编程的。我想将包含希伯来语的字符串数组发送到 Android 项目

在视觉工作室我只写`return array;`

在Android中我写：

```
HttpClient client = new DefaultHttpClient();
HttpGet request = new HttpGet();
request.setURI(new URI(url));
HttpResponse response = client.execute(request);
HttpEntity responseEntity = response.getEntity();
xml = EntityUtils.toString(responseEntity7, HTTP.UTF_8);  
return xml; 
```

但问题是在Android项目中我得到“??????” 而不是希伯来语单词，我猜问题出在编码上。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T10:20:08.740

您要以 UTF_8 格式对实体进行字符串化，这一切都很好，但是您需要设置 HTTP 响应的编码。您可以直接在代码中执行此操作：

```
HttpResponse.ContentEncoding = System.Text.UTF8Encoding; 
```

或者您可以在全球范围内执行此操作：

```
<configuration>
  <system.web>
    <globalization
      fileEncoding="utf-8"
      requestEncoding="utf-8"
      responseEncoding="utf-8"
    />
  </system.web>
</configuration> 
```

# python - Mysql：当且仅当其他属性被更改时更新属性

> ID：11699574
> 
> 赞同：1
> 
> 时间：2012-07-28T08:47:01.880
> 
> 标签：python, mysql

在 UPDATE 查询中，如果 url 属性已更改，我想更改 need_pa​​rse 属性。need_pa​​rse 取决于 url 值。

如何在 MySQL 和 Python 上实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T09:13:46.137

也许您需要类似的东西：

```
UPDATE tbl
SET need_parse = CASE WHEN url = <input url> THEN need_parse ELSE <value to change to> END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T15:07:24.993

您可以使用以下触发器来检查更新。它会做你需要的

```
DELIMITER $$

CREATE
    TRIGGER `test`.`update_check` BEFORE UPDATE
    ON `db_name`.`table_name`
    FOR EACH ROW BEGIN
    IF (new.`url` = old.`url`)
    THEN SET new.`need_parse` = old.`need_parse`;
    END IF;
    END$$
DELIMITER ; 
```

希望能帮助到你...

# security - 检查机器数量

> ID：11699576
> 
> 赞同：2
> 
> 时间：2012-07-28T08:47:50.663
> 
> 标签：security, cryptography, license-key, product-key

我想就以下问题寻求建议：

如果希望使用否，则在创建产品密钥时。密钥是为机器制造的，就像在微软批量许可的情况下一样，如何做到这一点，以便在 dll 中轻松验证，该 dll 用于验证在安装程序中输入的密钥并说明密钥是否用于说100 台机器如何离线验证产品密钥在第 101 台计算机上不起作用。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T13:30:32.587

它被称为“浮动许可证”。您可以拥有一个为特定局域网保留 N 个席位的“许可证服务器”。当启动应用程序实例时，它会连接到“许可证服务器”并查询运行权限。如果已经有 N 个连接，则拒绝 N+1 个实例启动。

检查[http://activation-cloud.com](http://activation-cloud.com)它可能对您有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T15:45:05.327

一种方法是中央服务器和浮动许可证（如 ActivationCloud 所说）。另一种方法是拥有物理设备的序列号。例如，一些公司销售的软件只能在 pendrive 上运行，您必须在下载程序之前提供序列号。号码会自动插入到程序中，并由客户端下载这个准备好的程序。此特定程序不会在任何其他设备上运行（无需破解）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T09:07:42.357

如果没有中央服务器来验证安装和（更重要的是）激活和使用，这是不可能的。

# java - Java eclipse 不能禁用新的菜单选项

> ID：11699577
> 
> 赞同：0
> 
> 时间：2012-07-28T08:47:53.553
> 
> 标签：java

我使用eclipse，我有一个问题，当我点击文件->新菜单时，所有选项都是灰色的。我正在点击我当前的项目。但我猜这个问题是在从文件系统而不是从 Eclipse 中删除项目之后发生的（可能不确定）。我该如何解决这个问题？

**编辑：**我收到的信息：

> 无适用项目

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:57:16.317

您可以更改工作区：

左键单击项目，导出，文件系统 --> 选择另一个文件夹，然后选择 Eclipse 菜单文件，切换工作区 --> 选择之前选择的文件夹

如果这不起作用，您可以随时保存您的项目并删除 Eclipse，下载并解压缩它，会正常工作

始终将 Eclipse 的 bopy 保存在本地文件夹中，这样您就可以在继续做乱七八糟的事情时替换它；）不要从文件系统中删除文件夹，只需从 eclipse 中删除它们，如果您删除了一个完整的项目，请选中“从文件系统中删除文件”

但是有了今天的高清，你真的需要删除任何东西吗？

# android - 将库添加到 Eclipse

> ID：11699578
> 
> 赞同：2
> 
> 时间：2012-07-28T08:48:06.463
> 
> 标签：android, eclipse, pdf, jar, pdfbox

我想添加一个库（PDFBox：[http://pdfbox.apache.org/download.html](http://pdfbox.apache.org/download.html)）。但我认为我做错了什么。我做了：项目>属性>java构建路径>添加外部JAR> pdfbox-1.7.0.jar。但是每当我在模拟器中启动我的项目时，我都会收到这个错误（logcat）

```
07-28 08:08:51.793: D/ddm-heap(222): Got feature list request
07-28 08:08:57.413: I/dalvikvm(222): Could not find method org.apache.pdfbox.pdmodel.PDDocument.load, referenced from method me.moop.mytwitter.MainActivity$CheckScheduleChangeTask.doInBackground
07-28 08:08:57.413: W/dalvikvm(222): VFY: unable to resolve static method 3152: Lorg/apache/pdfbox/pdmodel/PDDocument;.load (Ljava/lang/String;)Lorg/apache/pdfbox/pdmodel/PDDocument;
07-28 08:08:57.413: D/dalvikvm(222): VFY: replacing opcode 0x71 at 0x0003
07-28 08:08:57.413: D/dalvikvm(222): Making a copy of Lme/moop/mytwitter/MainActivity$CheckScheduleChangeTask;.doInBackground code (169 bytes)
07-28 08:08:57.423: E/dalvikvm(222): Could not find class 'org.apache.pdfbox.util.PDFTextStripper', referenced from method me.moop.mytwitter.MainActivity$CheckScheduleChangeTask.doInBackground
07-28 08:08:57.423: W/dalvikvm(222): VFY: unable to resolve new-instance 507 (Lorg/apache/pdfbox/util/PDFTextStripper;) in Lme/moop/mytwitter/MainActivity$CheckScheduleChangeTask;
07-28 08:08:57.423: D/dalvikvm(222): VFY: replacing opcode 0x22 at 0x0008
07-28 08:08:57.423: I/dalvikvm(222): Could not find method org.apache.pdfbox.util.PDFTextStripper.getText, referenced from method me.moop.mytwitter.MainActivity$CheckScheduleChangeTask.doInBackground
07-28 08:08:57.423: W/dalvikvm(222): VFY: unable to resolve virtual method 3154: Lorg/apache/pdfbox/util/PDFTextStripper;.getText (Lorg/apache/pdfbox/pdmodel/PDDocument;)Ljava/lang/String;
07-28 08:08:57.423: D/dalvikvm(222): VFY: replacing opcode 0x6e at 0x000e
07-28 08:08:57.433: I/dalvikvm(222): Could not find method org.apache.pdfbox.pdmodel.PDDocument.close, referenced from method me.moop.mytwitter.MainActivity$CheckScheduleChangeTask.doInBackground
07-28 08:08:57.433: W/dalvikvm(222): VFY: unable to resolve virtual method 3151: Lorg/apache/pdfbox/pdmodel/PDDocument;.close ()V
07-28 08:08:57.433: D/dalvikvm(222): VFY: replacing opcode 0x6e at 0x001b
07-28 08:08:57.473: W/dalvikvm(222): threadid=15: thread exiting with uncaught exception (group=0x4001b188)
07-28 08:08:57.473: E/AndroidRuntime(222): Uncaught handler: thread AsyncTask #1 exiting due to uncaught exception
07-28 08:08:57.483: E/AndroidRuntime(222): java.lang.RuntimeException: An error occured while executing doInBackground()
07-28 08:08:57.483: E/AndroidRuntime(222):  at android.os.AsyncTask$3.done(AsyncTask.java:200)
07-28 08:08:57.483: E/AndroidRuntime(222):  at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
07-28 08:08:57.483: E/AndroidRuntime(222):  at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
07-28 08:08:57.483: E/AndroidRuntime(222):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
07-28 08:08:57.483: E/AndroidRuntime(222):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
07-28 08:08:57.483: E/AndroidRuntime(222):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
07-28 08:08:57.483: E/AndroidRuntime(222):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
07-28 08:08:57.483: E/AndroidRuntime(222):  at java.lang.Thread.run(Thread.java:1096)
07-28 08:08:57.483: E/AndroidRuntime(222): Caused by: java.lang.NoClassDefFoundError: org.apache.pdfbox.pdmodel.PDDocument
07-28 08:08:57.483: E/AndroidRuntime(222):  at me.moop.mytwitter.MainActivity$CheckScheduleChangeTask.doInBackground(MainActivity.java:66)
07-28 08:08:57.483: E/AndroidRuntime(222):  at me.moop.mytwitter.MainActivity$CheckScheduleChangeTask.doInBackground(MainActivity.java:1)
07-28 08:08:57.483: E/AndroidRuntime(222):  at android.os.AsyncTask$2.call(AsyncTask.java:185)
07-28 08:08:57.483: E/AndroidRuntime(222):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
07-28 08:08:57.483: E/AndroidRuntime(222):  ... 4 more
07-28 08:08:57.903: I/dalvikvm(222): threadid=7: reacting to signal 3
07-28 08:08:58.195: I/dalvikvm(222): Wrote stack trace to '/data/anr/traces.txt'
07-28 08:09:01.793: I/Process(222): Sending signal. PID: 222 SIG: 9
07-28 08:20:54.283: I/dalvikvm(249): Could not find method org.apache.pdfbox.pdmodel.PDDocument.load, referenced from method me.moop.mytwitter.MainActivity$CheckScheduleChangeTask.doInBackground
07-28 08:20:54.293: W/dalvikvm(249): VFY: unable to resolve static method 3152: Lorg/apache/pdfbox/pdmodel/PDDocument;.load (Ljava/lang/String;)Lorg/apache/pdfbox/pdmodel/PDDocument;
07-28 08:20:54.293: D/dalvikvm(249): VFY: replacing opcode 0x71 at 0x0003
07-28 08:20:54.293: D/dalvikvm(249): Making a copy of Lme/moop/mytwitter/MainActivity$CheckScheduleChangeTask;.doInBackground code (169 bytes)
07-28 08:20:54.293: E/dalvikvm(249): Could not find class 'org.apache.pdfbox.util.PDFTextStripper', referenced from method me.moop.mytwitter.MainActivity$CheckScheduleChangeTask.doInBackground
07-28 08:20:54.293: W/dalvikvm(249): VFY: unable to resolve new-instance 507 (Lorg/apache/pdfbox/util/PDFTextStripper;) in Lme/moop/mytwitter/MainActivity$CheckScheduleChangeTask;
07-28 08:20:54.293: D/dalvikvm(249): VFY: replacing opcode 0x22 at 0x0008
07-28 08:20:54.293: I/dalvikvm(249): Could not find method org.apache.pdfbox.util.PDFTextStripper.getText, referenced from method me.moop.mytwitter.MainActivity$CheckScheduleChangeTask.doInBackground
07-28 08:20:54.293: W/dalvikvm(249): VFY: unable to resolve virtual method 3154: Lorg/apache/pdfbox/util/PDFTextStripper;.getText (Lorg/apache/pdfbox/pdmodel/PDDocument;)Ljava/lang/String;
07-28 08:20:54.303: D/dalvikvm(249): VFY: replacing opcode 0x6e at 0x000e
07-28 08:20:54.303: I/dalvikvm(249): Could not find method org.apache.pdfbox.pdmodel.PDDocument.close, referenced from method me.moop.mytwitter.MainActivity$CheckScheduleChangeTask.doInBackground
07-28 08:20:54.303: W/dalvikvm(249): VFY: unable to resolve virtual method 3151: Lorg/apache/pdfbox/pdmodel/PDDocument;.close ()V
07-28 08:20:54.303: D/dalvikvm(249): VFY: replacing opcode 0x6e at 0x001b
07-28 08:20:54.343: W/dalvikvm(249): threadid=15: thread exiting with uncaught exception (group=0x4001b188)
07-28 08:20:54.343: E/AndroidRuntime(249): Uncaught handler: thread AsyncTask #1 exiting due to uncaught exception
07-28 08:20:54.383: E/AndroidRuntime(249): java.lang.RuntimeException: An error occured while executing doInBackground()
07-28 08:20:54.383: E/AndroidRuntime(249):  at android.os.AsyncTask$3.done(AsyncTask.java:200)
07-28 08:20:54.383: E/AndroidRuntime(249):  at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
07-28 08:20:54.383: E/AndroidRuntime(249):  at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
07-28 08:20:54.383: E/AndroidRuntime(249):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
07-28 08:20:54.383: E/AndroidRuntime(249):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
07-28 08:20:54.383: E/AndroidRuntime(249):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
07-28 08:20:54.383: E/AndroidRuntime(249):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
07-28 08:20:54.383: E/AndroidRuntime(249):  at java.lang.Thread.run(Thread.java:1096)
07-28 08:20:54.383: E/AndroidRuntime(249): Caused by: java.lang.NoClassDefFoundError: org.apache.pdfbox.pdmodel.PDDocument
07-28 08:20:54.383: E/AndroidRuntime(249):  at me.moop.mytwitter.MainActivity$CheckScheduleChangeTask.doInBackground(MainActivity.java:66)
07-28 08:20:54.383: E/AndroidRuntime(249):  at me.moop.mytwitter.MainActivity$CheckScheduleChangeTask.doInBackground(MainActivity.java:1)
07-28 08:20:54.383: E/AndroidRuntime(249):  at android.os.AsyncTask$2.call(AsyncTask.java:185)
07-28 08:20:54.383: E/AndroidRuntime(249):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
07-28 08:20:54.383: E/AndroidRuntime(249):  ... 4 more
07-28 08:20:54.593: I/dalvikvm(249): threadid=7: reacting to signal 3
07-28 08:20:54.933: I/dalvikvm(249): Wrote stack trace to '/data/anr/traces.txt'
07-28 08:22:02.364: I/dalvikvm(273): Could not find method org.apache.pdfbox.pdmodel.PDDocument.load, referenced from method me.moop.mytwitter.MainActivity$CheckScheduleChangeTask.doInBackground
07-28 08:22:02.374: W/dalvikvm(273): VFY: unable to resolve static method 3152: Lorg/apache/pdfbox/pdmodel/PDDocument;.load (Ljava/lang/String;)Lorg/apache/pdfbox/pdmodel/PDDocument;
07-28 08:22:02.374: D/dalvikvm(273): VFY: replacing opcode 0x71 at 0x0003
07-28 08:22:02.374: D/dalvikvm(273): Making a copy of Lme/moop/mytwitter/MainActivity$CheckScheduleChangeTask;.doInBackground code (169 bytes)
07-28 08:22:02.374: E/dalvikvm(273): Could not find class 'org.apache.pdfbox.util.PDFTextStripper', referenced from method me.moop.mytwitter.MainActivity$CheckScheduleChangeTask.doInBackground
07-28 08:22:02.374: W/dalvikvm(273): VFY: unable to resolve new-instance 507 (Lorg/apache/pdfbox/util/PDFTextStripper;) in Lme/moop/mytwitter/MainActivity$CheckScheduleChangeTask;
07-28 08:22:02.374: D/dalvikvm(273): VFY: replacing opcode 0x22 at 0x0008
07-28 08:22:02.374: I/dalvikvm(273): Could not find method org.apache.pdfbox.util.PDFTextStripper.getText, referenced from method me.moop.mytwitter.MainActivity$CheckScheduleChangeTask.doInBackground
07-28 08:22:02.374: W/dalvikvm(273): VFY: unable to resolve virtual method 3154: Lorg/apache/pdfbox/util/PDFTextStripper;.getText (Lorg/apache/pdfbox/pdmodel/PDDocument;)Ljava/lang/String;
07-28 08:22:02.384: D/dalvikvm(273): VFY: replacing opcode 0x6e at 0x000e
07-28 08:22:02.384: I/dalvikvm(273): Could not find method org.apache.pdfbox.pdmodel.PDDocument.close, referenced from method me.moop.mytwitter.MainActivity$CheckScheduleChangeTask.doInBackground
07-28 08:22:02.384: W/dalvikvm(273): VFY: unable to resolve virtual method 3151: Lorg/apache/pdfbox/pdmodel/PDDocument;.close ()V
07-28 08:22:02.384: D/dalvikvm(273): VFY: replacing opcode 0x6e at 0x001b
07-28 08:22:02.424: W/dalvikvm(273): threadid=15: thread exiting with uncaught exception (group=0x4001b188)
07-28 08:22:02.424: E/AndroidRuntime(273): Uncaught handler: thread AsyncTask #1 exiting due to uncaught exception
07-28 08:22:02.554: E/AndroidRuntime(273): java.lang.RuntimeException: An error occured while executing doInBackground()
07-28 08:22:02.554: E/AndroidRuntime(273):  at android.os.AsyncTask$3.done(AsyncTask.java:200)
07-28 08:22:02.554: E/AndroidRuntime(273):  at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
07-28 08:22:02.554: E/AndroidRuntime(273):  at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
07-28 08:22:02.554: E/AndroidRuntime(273):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
07-28 08:22:02.554: E/AndroidRuntime(273):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
07-28 08:22:02.554: E/AndroidRuntime(273):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
07-28 08:22:02.554: E/AndroidRuntime(273):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
07-28 08:22:02.554: E/AndroidRuntime(273):  at java.lang.Thread.run(Thread.java:1096)
07-28 08:22:02.554: E/AndroidRuntime(273): Caused by: java.lang.NoClassDefFoundError: org.apache.pdfbox.pdmodel.PDDocument
07-28 08:22:02.554: E/AndroidRuntime(273):  at me.moop.mytwitter.MainActivity$CheckScheduleChangeTask.doInBackground(MainActivity.java:66)
07-28 08:22:02.554: E/AndroidRuntime(273):  at me.moop.mytwitter.MainActivity$CheckScheduleChangeTask.doInBackground(MainActivity.java:1)
07-28 08:22:02.554: E/AndroidRuntime(273):  at android.os.AsyncTask$2.call(AsyncTask.java:185)
07-28 08:22:02.554: E/AndroidRuntime(273):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
07-28 08:22:02.554: E/AndroidRuntime(273):  ... 4 more
07-28 08:22:02.664: I/dalvikvm(273): threadid=7: reacting to signal 3
07-28 08:22:02.924: I/dalvikvm(273): Wrote stack trace to '/data/anr/traces.txt'
07-28 08:22:05.184: I/Process(273): Sending signal. PID: 273 SIG: 9
07-28 08:33:06.073: I/dalvikvm(300): Could not find method org.apache.pdfbox.pdmodel.PDDocument.load, referenced from method me.moop.mytwitter.MainActivity$CheckScheduleChangeTask.doInBackground
07-28 08:33:06.073: W/dalvikvm(300): VFY: unable to resolve static method 3152: Lorg/apache/pdfbox/pdmodel/PDDocument;.load (Ljava/lang/String;)Lorg/apache/pdfbox/pdmodel/PDDocument;
07-28 08:33:06.073: D/dalvikvm(300): VFY: replacing opcode 0x71 at 0x0003
07-28 08:33:06.073: D/dalvikvm(300): Making a copy of Lme/moop/mytwitter/MainActivity$CheckScheduleChangeTask;.doInBackground code (169 bytes)
07-28 08:33:06.073: E/dalvikvm(300): Could not find class 'org.apache.pdfbox.util.PDFTextStripper', referenced from method me.moop.mytwitter.MainActivity$CheckScheduleChangeTask.doInBackground
07-28 08:33:06.073: W/dalvikvm(300): VFY: unable to resolve new-instance 507 (Lorg/apache/pdfbox/util/PDFTextStripper;) in Lme/moop/mytwitter/MainActivity$CheckScheduleChangeTask;
07-28 08:33:06.073: D/dalvikvm(300): VFY: replacing opcode 0x22 at 0x0008
07-28 08:33:06.083: I/dalvikvm(300): Could not find method org.apache.pdfbox.util.PDFTextStripper.getText, referenced from method me.moop.mytwitter.MainActivity$CheckScheduleChangeTask.doInBackground
07-28 08:33:06.083: W/dalvikvm(300): VFY: unable to resolve virtual method 3154: Lorg/apache/pdfbox/util/PDFTextStripper;.getText (Lorg/apache/pdfbox/pdmodel/PDDocument;)Ljava/lang/String;
07-28 08:33:06.083: D/dalvikvm(300): VFY: replacing opcode 0x6e at 0x000e
07-28 08:33:06.083: I/dalvikvm(300): Could not find method org.apache.pdfbox.pdmodel.PDDocument.close, referenced from method me.moop.mytwitter.MainActivity$CheckScheduleChangeTask.doInBackground
07-28 08:33:06.083: W/dalvikvm(300): VFY: unable to resolve virtual method 3151: Lorg/apache/pdfbox/pdmodel/PDDocument;.close ()V
07-28 08:33:06.083: D/dalvikvm(300): VFY: replacing opcode 0x6e at 0x001b
07-28 08:33:06.123: W/dalvikvm(300): threadid=15: thread exiting with uncaught exception (group=0x4001b188)
07-28 08:33:06.123: E/AndroidRuntime(300): Uncaught handler: thread AsyncTask #1 exiting due to uncaught exception
07-28 08:33:06.135: E/AndroidRuntime(300): java.lang.RuntimeException: An error occured while executing doInBackground()
07-28 08:33:06.135: E/AndroidRuntime(300):  at android.os.AsyncTask$3.done(AsyncTask.java:200)
07-28 08:33:06.135: E/AndroidRuntime(300):  at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
07-28 08:33:06.135: E/AndroidRuntime(300):  at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
07-28 08:33:06.135: E/AndroidRuntime(300):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
07-28 08:33:06.135: E/AndroidRuntime(300):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
07-28 08:33:06.135: E/AndroidRuntime(300):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
07-28 08:33:06.135: E/AndroidRuntime(300):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
07-28 08:33:06.135: E/AndroidRuntime(300):  at java.lang.Thread.run(Thread.java:1096)
07-28 08:33:06.135: E/AndroidRuntime(300): Caused by: java.lang.NoClassDefFoundError: org.apache.pdfbox.pdmodel.PDDocument
07-28 08:33:06.135: E/AndroidRuntime(300):  at me.moop.mytwitter.MainActivity$CheckScheduleChangeTask.doInBackground(MainActivity.java:66)
07-28 08:33:06.135: E/AndroidRuntime(300):  at me.moop.mytwitter.MainActivity$CheckScheduleChangeTask.doInBackground(MainActivity.java:1)
07-28 08:33:06.135: E/AndroidRuntime(300):  at android.os.AsyncTask$2.call(AsyncTask.java:185)
07-28 08:33:06.135: E/AndroidRuntime(300):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
07-28 08:33:06.135: E/AndroidRuntime(300):  ... 4 more
07-28 08:33:06.453: I/dalvikvm(300): threadid=7: reacting to signal 3
07-28 08:33:06.623: I/dalvikvm(300): Wrote stack trace to '/data/anr/traces.txt'
07-28 08:33:08.723: I/Process(300): Sending signal. PID: 300 SIG: 9 
```

所以它找不到我从附加库中导入的类。当我在 java 构建路径屏幕中打开 .jar 时，它会显示：

来源附件：（无）

Javadoc 位置：（无）

本机库位置：（无）

访问规则：（无限制）

这正常吗？

谁能准确地告诉我我需要从该网站（http://pdfbox.apache.org/download.html）下载哪些文件以及我必须在哪个屏幕中添加哪些文件以及如何添加。

谢谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T08:56:34.793

从 ADT r17 开始，您不应再像这样将库文件添加到您的项目中。这现在由 ADT 自动处理。

为了向您的项目添加外部库，您必须在项目`libs`的根文件夹（文件夹所在的`src`文件夹）中创建一个名为的文件夹。下一步是将所有库（jar）复制到该文件夹​​。其余的会自动为您完成。无需编辑构建路径等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T08:55:52.660

小伙伴试试这个方法

```
Right click on Yout project  -> Click on New -> goto Folder -> Give Folder name 
```

在**libs 文件夹**中添加**.jars**

 **```
Right click on res folder -> Goto Build path -> click on Add External jar 
```

**或者**

```
Right click on res folder -> Goto Build path -> Configure build path -> From Left side menu Select "Java Build path" ->There will be 4 tabs Click on Libraries -> Click on Add Externals JARs.. 
```**

# jquery - jQuery mobile：使用 $.ajax() 的 JSONP 请求，$.getJSON 不触发回调函数

> ID：11699579
> 
> 赞同：2
> 
> 时间：2012-07-28T08:48:09.450
> 
> 标签：jquery, ajax, mobile

我尝试从我的 Web 服务器获取 JSON 数据，但它不起作用。

```
$.mobile.showPageLoadingMsg();
//$.getJSON('http://localhost:8000/'+site+'/?format=json&callback=?', {}, function(){alert();});

$.ajax({
    url : 'http://localhost:8000/'+site +'/?format=json&callback=?',
    type : 'GET',
    dataType : 'jsonp',
    jsonp : 'callback',
    success : function(){alert('success');},
    error : function(){alert('fail')}
}); 
```

`$.getJSON`，`$.ajax`两个方法的回调函数根本没有触发。有什么问题？

我的网络服务器的代码：

```
response_data.append({
            'user_nickname' : post.user_nickname,
            'title' : post.title,
            'recommend' : post.recommend,
            'oppose' : post.oppose,
            'date' : str(post.date),
            'hit' : post.hit,
            'commentcount' : post.commentcount
            })
    return HttpResponse(simplejson.dumps(response_data), mimetype='application/json') 
```

在检查器中，它返回`get`，200，ok，所以`HttpResponse`没有问题。

这是回应：

> [{“命中”：5，“标题”：“ \uc624\ud1a0\uc774\uc2a4\ucf00\uc774\ud551 \ub418\ub294\uac00”，“评论数”：0，“反对”：0，“推荐” : 0, "日期": "2012-07-24 07:01:22.453000+00:00", "用户昵称": "\ud55c\uae00\ub85c\uc5​​bc\ub9c8\ub098\uae38\uac8c\uae4c\uc9c0\ uac00\ub2a5\ud558\ub7ef\uc778\u3131\u3147\u3139\u3147\ub05d"}, {"hit": 4, "title": "\uc5ec\uae30 \uae00\uc4f0\uba74?", "commentcount" ：1，“反对”：0，“推荐”：0，“日期”：“2012-07-24 06:52:05.125000+00:00”，“用户昵称”：“\ud55c\uae00\ub85c\uc5​​bc\ ub9c8\ub098\uae38\uac8c\uae4c\uc9c0\uac00\ub2a5\ud558\ub7ef\uc778\u3131\u3147\u3139\u3147\ub05d"}]

`$.ajax()`从不触发成功回调函数。它只是调用错误`alert('fail');`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T09:32:32.687

您的响应不是 JSONP：它只是一个 JSON 数组。

如果您将呼叫中的 更改`datatype`为`ajax`，`'json'`那么您的回调应该会触发。

但是如果你真的需要使用 JSONP——如果你试图进行跨站点通信——那么你需要返回有效的 JSONP 作为你的服务器响应。您的服务器需要使用 javascript 函数调用形式的字符串进行响应，使用`jsonp`参数的值作为函数名称，并将 JSON 响应作为函数参数。

# php - 数组修改相同的值

> ID：11699581
> 
> 赞同：0
> 
> 时间：2012-07-28T08:48:16.353
> 
> 标签：php, arrays, multidimensional-array, cakephp-2.1

我有以下二维数组，如下所示..

```
array(
0 => array(
    0 => 'India',
    1 => '91'
),
1 => array(
    0 => 'Australia',
    1 => '1'
),
2 => array(
    0 => 'India',
    1 => '20'
),
3 => array(
    0 => 'Iraq',
    1 => '10'
),
4 => array(
    0 => 'Australia',
    1 => '3'
),
    5 => array(
    0 => 'Kuweit',
    1 => '14'
)
) 
```

如果存在任何内部数组值，我想采用相同的内部数组值并合并，以便添加。所以我想将该数组放入以下数组。

```
 array(
 0 => array(
   0 => 'India',
   1 => 111
 ),
 1 => array(
   0 => 'Australia',
   1 => 4
 ),
 2 => array(
   0 => 'Iraq',
   1 => 10
 ),
 3 => array(
   0 => 'Kuweit',
   1 => 14
 )
) 
```

如何获得这个数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T09:53:34.473

I would iterate over the array and put everything into a new (temporary) associative array. In that temporary array I would use the (identifying) name as the key and additional information as the value. That way you have no duplicates at all.

During your iteration you can call array_key_exists to determine wether or not the name is already known in your temporary array, and if so you can store the sum of both the numbers in your temporary array.

**Example** *(not validated; given that your first array is stored in $inputArray)*

```
<?php

$mergedArray = array();

foreach($inputArray as $child) {

    list($key, $value) = $child;

    if(array_key_exists($key, $mergedArray) {
        $mergedArray[$key] += $child;
    } else {
        $mergedArray[$key] = $child;
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T10:07:41.420

遍历数组，将其转换为关联数组（使用国家名称作为键），然后将其转换回您的数字索引数组。

这可以用 eg[`array_reduce`](http://php.net/array_reduce)和很好地完成[`foreach`](http://php.net/foreach)：

```
$array = array(...);
$array = array_reduce($array, function(&$result, $item) {
    @$result[$item[0]] += $item[1]; // $result[$item[0]] might not exist, suppress error and auto-init to zero.
    // cleaner (less hackish) code: if(!isset($result[$item[0]])) $result[$item[0]] = 0;
  }, array());
// and transform back:
$newarray = array();
foreach($array as $k => $v) {
  $newarray[] = array($k, $v);
} 
```

运行时复杂度应该是 O(n) （你只迭代两次）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T10:43:52.667

knittl 的回答更简洁，但你可以像这样遵循同样的策略：

```
// $in = source array in your question ... 

/* collect the totals */
$collect = array();
foreach ($in as $item)
{
    if (array_key_exists($item[0], $collect))
    {
        $collect[$item[0]] += $item[1];
    }
    else
    {
        $collect[$item[0]] = (int) $item[1];
    }
}

/* repackage the result */
$out = array();
foreach ($collect as $key => $value)
{
    $out[] = array($key, $value);
} 
```

# java - Java 拖放和克隆

> ID：11699583
> 
> 赞同：1
> 
> 时间：2012-07-28T08:48:20.430
> 
> 标签：java, swing, drag-and-drop, jlabel, cloneable

我有这个问题要解决你有一个`JPanel`并且`JLabel`你必须`JLabel`通过拖放克隆并在放置的位置创建一个`JLabel`克隆。我想问的第一件事是是否可以在匿名类中实现接口，比如监听器，所以我不必编写自己的扩展和实现的类。我知道如何通过传输“文本”属性来拖放到，但我不知道如何将一个克隆到.`JPanel``JLabel``Cloneable``JLabel``JLabel``Cloneable``JLabel``JTextField``JLabel``JPanel`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T01:56:58.583

在这种情况下，实现`Cloneable`接口不太可能实现任何有益效果。在[*Effective Java, Second Edition*](http://java.sun.com/docs/books/effective/)*中，作者在第 11 条：明智地覆盖克隆*中概述了克隆对象的变幻莫测。

[*拖放*](http://docs.oracle.com/javase/tutorial/uiswing/dnd/index.html)传输数据，而不是容器。因为`String`是不可变的，所以根本没有理由克隆 a`String`。对于可变数据，复制构造函数或工厂方法更有意义。

因为`JLabel`不是用户可编辑的，它可能是 DnD 的意外目标，尽管它是[可能的](https://stackoverflow.com/a/9498321/230513)。或者，您可以在运行时使用容器的方法添加[合适的组件](http://docs.oracle.com/javase/tutorial/uiswing/dnd/defaultsupport.html)，然后使用and 。`add()``validate()``repaint()`

# asp.net - 将数据库表和存储过程从 sql 转移到 access

> ID：11699584
> 
> 赞同：0
> 
> 时间：2012-07-28T08:48:45.790
> 
> 标签：asp.net, sql, winforms, ms-access

我的朋友对他的客户有一定的桌面应用需求。他想要 sql 作为后端。但现在他不想在 sql 中使用它。因为他的客户端没有 SQL 服务器

我已经开发了应用程序。那么是否可以转移所有表访问数据库？

还是可以有其他解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T13:34:22.853

传输表的最简单方法是右键单击 Access 2007/10 中的链接 SQL Server 表（我不确定早期版本），然后选择转换为本地表。这将保留您的索引。如果这不可用，您可以对链接表运行生成表查询。

您可能会遇到一些查询（视图）问题，但切换到 Ansi-92 模式可能更适合。但是，这必须小心完成：http: [//office.microsoft.com/en-us/access-help/about-avoiding-the-mixing-of-queries-created-under-different-ansi-sql-query -modes-mdb-HP003070559.aspx](http://office.microsoft.com/en-us/access-help/about-avoiding-the-mixing-of-queries-created-under-different-ansi-sql-query-modes-mdb-HP003070559.aspx)

在 Access 2010 中，您拥有可以在一定程度上代替过程的数据宏，并且可以在 MS Access 之外工作，您还拥有 VBA，尽管不在 MS Access 之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T09:01:35.607

您不能将存储过程传输到 Access。建议他使用 SQL Server 的免费版本之一。（快递等）

[http://www.microsoft.com/sqlserver/en/us/editions/2012-editions/express.aspx](http://www.microsoft.com/sqlserver/en/us/editions/2012-editions/express.aspx)

# c - 如何设置errno值？

> ID：11699596
> 
> 赞同：45
> 
> 时间：2012-07-28T08:50:54.653
> 
> 标签：c, linux, error-handling, errno

我对两种不同的方法有两次调用：

```
void func1() 
{
  // do something 
  if (fail) 
  {
    // then set errno to EEXIST

  }

} 
```

第二种方法：

```
void func2() 
{
  // do something 
  if (fail) 
  {
    // then set errno to ENOENT

  }

} 
```

1.  当我将 设置`errno`为某个值时，它会做什么？只是错误检查？

2.  如何`errno`在上述方法中设置`func1`和`func2``EEXIST``ENOENT`

谢谢

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-07-28T08:55:18.300

出于所有实际目的，您可以将其视为`errno`全局变量（尽管通常不是）。所以包括`errno.h`并使用它：

```
errno = ENOENT; 
```

* * *

您应该问自己是否`errno`是最适合您的错误报告机制。这些函数可以设计为自己返回错误代码吗？

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-20T03:57:05.853

IMO，`errno`为系统级设计的标准。我的经验是不要污染它们。如果你想模拟 C 标准`errno`机制，你可以做一些定义，比如：

```
/* your_errno.c */
__thread int g_your_error_code;

/* your_errno.h */
extern __thread int g_your_error_code
#define set_your_errno(err) (g_your_error_code = (err))
#define your_errno (g_your_error_code) 
```

而且您仍然可以实施`your_perror(err_code)`. 更多信息，请参考*glibc*的实现。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-28T08:55:51.303

```
#include <errno.h>
void func1() 
{
  // do something 
  if (fail) 
  {
    errno = ENOENT;
  }
} 
```

# mysql - 填补月份空白

> ID：11699600
> 
> 赞同：0
> 
> 时间：2012-07-28T08:51:48.200
> 
> 标签：mysql, database, date

如果一个月内没有订单，我需要用 0 填补空白。

表格示例：

```
date         product
2010-02-01   20 
2010-03-01   10
2010-03-01   30
2010-06-01   15 
```

我的基本查询是：

```
SELECT date,SUM(orders.product) AS product
FROM orders 
GROUP BY month(date),YEAR(date) 
```

那将返回：

```
date         product
2010-02-01   20 
2010-03-01   40
2010-06-01   15 
```

但是我需要：

```
date         product
2010-02-01   20 
2010-03-01   40
2010-04-01   0
2010-05-01   0
2010-06-01   15 
```

我制作了一张包含所有可能日期的表格：

```
datefield
2010-01-01  
2010-02-01  
2010-03-01 
2010-04-01  
2010-05-01  
2010-06-01  
2010-07-01  
etc... 
```

但是，当我尝试加入两者时，它不起作用。（编辑：仅适用于第一个缺失的月份。）

```
SELECT calendar.datefield AS DATE,
IFNULL(SUM(orders.product),0) AS product
FROM orders RIGHT JOIN calendar ON (MONTH(orders.date) = MONTH(calendar.datefield)) AND (YEAR(orders.date) = YEAR(calendar.datefield)) 
WHERE (calendar.datefield BETWEEN (SELECT MIN(DATE(date)) FROM orders) AND (SELECT MAX(DATE(date)) FROM orders))
GROUP BY DATE 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T08:57:12.047

```
ON (DATE(orders.date) = calendar.datefield) 
```

您正在从日期字段中提取年/月/日，`orders.date`但不是从日期字段中提取。可能就是这样。

我会尝试

```
ON (DATE(orders.date) = DATE(calendar.datefield)) 
```

另外，如果你想要几个月，我只会按月检查

```
ON (MONTH(orders.date) = MONTH(calendar.datefield)) AND (YEAR(orders.date) = YEAR(calendar.datefield)) 
```

现在你只需要一个月的一行，而不是每天一行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T10:05:08.087

您需要联合您的日历表。

```
SELECT date,SUM(orders.product) AS product
FROM orders 
GROUP BY month(date),YEAR(date)
union
select datefield AS date, '0' AS product
from calendar 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T11:10:34.327

这解决了我的问题：

```
SELECT date, product FROM (
SELECT date,SUM(orders.product) AS product
FROM orders 
GROUP BY MONTH(date),YEAR(date)
UNION 
select datefield AS date, '0' AS product
from calendar
WHERE (calendar.datefield BETWEEN (SELECT MIN(DATE(date)) FROM orders) AND (SELECT MAX(DATE(date)) FROM orders))
GROUP BY MONTH(date),YEAR(date)
) AS a
GROUP BY MONTH(date),YEAR(date)
ORDER BY date 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T12:04:35.080

在我的日历表中，日期保存在“cal_date”列中。语法适用于 PostgreSQL；它应该很容易适应 MySQL。

```
select to_char(cal_date, 'YYYY-MM') as period, sum(coalesce(product, 0))
from orders 
right join calendar c on c.cal_date = orders.date
where (
  cal_date >= (select min(date) from orders) and
  cal_date <= (select max(date) from orders)
)
group by period
order by period 
```

`to_char(cal_date, 'YYYY-MM') as period`返回一个名为“period”的列，其中包含“2010-02”之类的值。当我按月汇总时，我不喜欢返回日期。它往往使人们感到困惑。

正确的连接应该基于日期值，而不仅仅是月份和年份。（想一想。）

如果您感兴趣的范围内的第一个月或最后一个月没有订单，则 WHERE 子句将出现异常。基于传递的参数而不是实际订单的范围可能是一个更好的主意。

# javascript - Jquery Checkbox 更改事件未触发

> ID：11699602
> 
> 赞同：2
> 
> 时间：2012-07-28T08:52:01.563
> 
> 标签：javascript, jquery, html, checkbox

我试图从过去一个小时解决这个小问题：

```
<script type="text/javascript">
$(document).ready(function(){        
    $("input[name='isClubMember']:checkbox").mousedown(function() {
         if (!$(this).is(':checked')) {
            this.checked = confirm("Are you sure?");
            $(this).trigger("change");
         }
    });
 });
</script> 
```

有趣的是，这适用于 JSFiddle ..但不适用于我的 jsp 页面。 [样本](http://jsfiddle.net/JXbYt/)

上面的代码`null`在这一行给了我错误（在调试控制台中）

```
 $("input[name='isClubMember']:checkbox").mousedown(function() { 
```

JQ -Ver : 1.7.2 浏览器 : IE8

**更新**： IE 控制台中的错误：

```
 'null' is null or not an object 
```

在上述行

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-28T09:03:18.173

*看起来*您的 JSP 页面包含 jQuery 之后的[原型](http://prototypejs.org/)库。

Prototype 的[$()](http://api.prototypejs.org/dom/dollar/)函数采用 id 并`null`在找不到元素时返回，这与您观察到的行为一致。

尝试在代码中使用`jQuery`而不是`$`到处使用：

```
jQuery("input[name='isClubMember']:checkbox").mousedown(function() {
    // ...
}); 
```

或者将您的代码放在一个闭包中，该闭包在参数中传递`jQuery`对象`$`：

```
(function($) {
    // The rest of your code...
})(jQuery); 
```

或者利用`ready`处理程序传递相同`$`参数的事实：

```
jQuery(document).ready(function($) {
    // The code in your 'ready' handler...
}); 
```

您可能还希望在[noConflict](http://api.jquery.com/jQuery.noConflict/)模式下运行 jQuery，以避免`$()`在包含顺序发生变化时覆盖 Prototype 的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T08:56:59.223

我建议，您可以在复选框中添加一个类名，然后通过类名找到复选框！在这种情况下，这似乎是 ie8 的问题！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T09:02:33.973

*我认为在您的页面中 jQuery 没有连接。查看。*

我认为是因为 $ - 函数并返回对象，但如果没有 jQuery，则 $(str) 返回 null。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T09:05:24.343

我猜选择器在 IE8 中以某种方式损坏，尝试 [type='checkbox']，无论如何应该更快

```
 $("input[name='isClubMember'][type='checkbox']").mousedown(function() { 
```

# java - 是否可以在android中以编程方式关闭静音模式？

> ID：11699603
> 
> 赞同：28
> 
> 时间：2012-07-28T08:52:12.897
> 
> 标签：java, android

是否可以在 Android 中以编程方式关闭静音模式？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-07-28T08:55:53.353

为您解决。

```
AudioManager am;
am= (AudioManager) getBaseContext().getSystemService(Context.AUDIO_SERVICE);

//For Normal mode
am.setRingerMode(AudioManager.RINGER_MODE_NORMAL);

//For Silent mode
am.setRingerMode(AudioManager.RINGER_MODE_SILENT);

//For Vibrate mode
am.setRingerMode(AudioManager.RINGER_MODE_VIBRATE); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-21T07:03:49.893

```
//SilentToNomal and NormalToSilent device Programatically
 final AudioManager mode = (AudioManager) this.getSystemService(Context.AUDIO_SERVICE);
//Silent Mode Programatically
mode.setRingerMode(AudioManager.RINGER_MODE_SILENT);

//Normal Mode Programatically
  mode.setRingerMode(AudioManager.RINGER_MODE_NORMAL); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-28T08:56:03.687

解决方案：

```
AudioManager audio_mngr = (AudioManager) getBaseContext().getSystemService(Context.AUDIO_SERVICE);
audio_mngr .setRingerMode(AudioManager.RINGER_MODE_SILENT); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-26T07:58:03.493

是的，这可以通过以下方式以编程方式关闭和开启静音模式：

```
AudioManager audioManager = (AudioManager) getSystemService(AUDIO_SERVICE); 
```

用于设置静音模式：

```
audioManager.setRingerMode(AudioManager.RINGER_MODE_SILENT); 
```

对于正常模式：

```
audioManager.setRingerMode(AudioManager.RINGER_MODE_NORMAL); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-03T19:50:43.557

```
int normal = 2;
int vibrate = 1;
int silent = 0;
int RingerMode;
public static AudioManager AUDIOMANAGER;

@Override
public void onCreate() {
    super.onCreate();

    AUDIOMANAGER= (AudioManager) getBaseContext().getSystemService(Context.AUDIO_SERVICE);
    if (AUDIOMANAGER.getRingerMode() == normal) {
                    AUDIOMANAGER.setRingerMode(AudioManager.RINGER_MODE_SILENT);
                    RingerMode = normal;
    } else if (AUDIOMANAGER.getRingerMode() == vibrate) {
                    AUDIOMANAGER.setRingerMode(AudioManager.RINGER_MODE_SILENT);
                    RingerMode = vibrate;
                }
    //And after do all your jobs..... you can return to previous mode:
                    AUDIOMANAGER.setRingerMode(RingerMode);

} 
```

# android - 在Android中具有大尺寸的内存缓存

> ID：11699604
> 
> 赞同：0
> 
> 时间：2012-07-28T08:52:18.370
> 
> 标签：android, android-ndk

嗨，Android 开发者，

我正在尝试找出一种实现内存缓存的方法；但与 dvm 堆大小相比，它的大小会比较大。我曾计划使用 nio 和/或 Parcel 类来序列化我的对象，然后将它们存储在本机内存中；但是，我确实无法预测从它们的字节重建这些对象的性能。此外，我找不到任何有用的东西来教如何使用 Parcel 和 Parcelable 进行一些自定义序列化。我知道它适用于 android 中的 IPC；而且我没有发现检查 Parcel.cpp 以了解 Binder 协议的内部结构如此迷人和可行。另一方面，由于 dvm 堆大小限制，我也无法使用 LRUCache 类，这意味着我将无法将我的 java 对象原样存储在 dvm 堆上。

我现在试图避免 NDK 实现缓存，因为我最终必须将我的 c/c++ 实例传递给 java 端。

长话短说，有没有开发人员介意告诉我实现内存缓存的最佳方法，它可以突破 dvm 堆大小限制并快速运行？或者至少，如果你能给我一些链接、pdf、电子书、文档等，让我检查一下；那真的很棒！

谢谢， Ilker GURCAN

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T09:05:22.427

使用 ActivityManager 的 MemoryClass 信息：

> 返回当前设备的每个应用程序的近似内存类。这让您了解应该对应用程序施加多大的内存限制才能让整个系统发挥最佳作用。返回值以兆字节为单位；基准 Android 内存类是 16（恰好是这些设备的 Java 堆限制）；某些具有更多内存的设备可能会返回 24 甚至更高的数字。

因此，例如，您可以将可用内存除以 8 来构建内存缓存：

```
ActivityManager activityManager = (ActivityManager)context.getSystemService(Activity.ACTIVITY_SERVICE);
int memoryClass = activityManager.getMemoryClass();
int memCacheSize = memoryClass / 8 * 1024 * 1024; // bytes 
```

# android - android 示例源代码中的 repo 同步

> ID：11699605
> 
> 赞同：1
> 
> 时间：2012-07-28T08:52:23.050
> 
> 标签：android, repository, ubuntu-12.04

当我在 Ubuntu 的终端中进行 Repo 同步时，它会给出错误

```
xml.parsers.expat.ExpatError: syntax error: line 1, column 0. 
```

终端输出为：

```
aashutosh@toslap01:/media/development/platform/Android/source_code$
repo --trace sync -l : unpickle
/media/development/platform/Android/source_code/.repo/manifests.git/config
: git config --file /home/aashutosh/.gitconfig --null --list 1>| 2>|

Traceback (most recent call last):   File
"/media/development/platform/Android/source_code/.repo/repo/main.py",
line 385, in 

<module>
_Main(sys.argv[1:])    File "/media/development/platform/Android/source_code/.repo/repo/main.py",
line 365, in _Main

result = repo._Run(argv) or 0   File "/media/development/platform/Android/source_code/.repo/repo/main.py",
line 121, in _Run

copts, cargs = cmd.OptionParser.parse_args(argv)   File "/media/development/platform/Android/source_code/.repo/repo/command.p
line 45, in OptionParser

self._Options(self._optparse)   File "/media/development/platform/Android/source_code/.repo/repo/subcmds/sync.py",
line 126, in _Options

self.jobs = self.manifest.default.sync_j   File "/media/development/platform/Android/source_code/.repo/repo/manifest_xml.py",
line 245, in default
self._Load()   File "/media/development/platform/Android/source_code/.repo/repo/manifest_xml.py",
line 287, in _Load

self.manifestProject.worktree))   File "/media/development/platform/Android/source_code/.repo/repo/manifest_xml.py",
line 302, in _ParseManifestXml

root = xml.dom.minidom.parse(path)   File "/usr/lib/python2.7/xml/dom/minidom.py", line 1920, in parse
return expatbuilder.parse(file)

File "/usr/lib/python2.7/xml/dom/expatbuilder.py", line 924, in
parse
result = builder.parseFile(fp)

  File "/usr/lib/python2.7/xml/dom/expatbuilder.py", line 207, in
parseFile
 parser.Parse(buffer, 0)

xml.parsers.expat.ExpatError: syntax error: line 1, column 0 
```

# qt - 从路径中提取点

> ID：11699606
> 
> 赞同：2
> 
> 时间：2012-07-28T08:52:44.807
> 
> 标签：qt

使用 QPainterPath，我已经构建了一个图形（路径）并绘制了它，但是现在我需要在某个 x 点处查询图形（路径）以获得相应的 y 点。

我想不出办法。

编码智慧有人吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-08T09:26:33.737

另一种解决方案是`QPainterPath`通过将其转换为一个/多个来获得所有点，`QPolygonF`这可以像这样轻松完成：

```
QPainterPath path(QPointF(0,0));
path.lineTo(QPointF(100,0));
path.lineTo(QPointF(100,100));
path.lineTo(QPointF(0,100));
path.lineTo(QPointF(0,0)); 
//change this to toSubpathPolygons to get multiple polygons.
QPolygonF polygon = path.toFillPolygon();
QList<QLineF> edgeList;
for(int i=0;i < polygon.count(); i++) {
     QLineF edge;
     if(i != (polygon.count() - 1)) {
         edge.setPoints(polygon.at(i),polygon.at(i+1));
     } else {
         edge.setPoints(polygon.at(i),polygon.at(0));
     }
         edgeList<<edge;
 } 
```

然后您可以使用扫描线检查与这些边缘的交点。使用 intersect 函数 from`QLineF`和另一个`foreach`循环。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-02-06T12:55:58.790

```
QPainterPath p = item->path();
for(int i = 0; i < p.elementCount(); i++)
{
    QPointF pt = p.elementAt(i); //get the value of the point at index i
    p.setElementPositionAt(i, new_x, new_y); //change the value of the point at index i
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T02:31:15.523

QPainterPath 没有任何数学函数来计算/求解它作为一个方程，因为它不是一个方程。路径的绘制实际上是特定于绘制引擎的。简而言之，QPainterPath 是一个绘图对象，甚至不是绘图对象。

到达你想去的地方的正确方法是用你自己的数学自己画曲线。

但是，如果您可以以有限的精度生活，并且如果您的路径保证对任何可能的 X 具有一个 Y 值，那么您可以通过将 QPainterPath 渲染到黑白 QImage（作为 QPainter）上并扫描每一行来近似它图像以查找标记了像素 X 的行。精度将取决于图像的大小。不完美，但它应该让你到附近。:)

# java - 录制视频时面临截屏问题

> ID：11699611
> 
> 赞同：3
> 
> 时间：2012-07-28T08:53:09.307
> 
> 标签：java, android

我正在尝试在录制视频时截屏。我可以截屏并将其保存到我的 SD 卡中。但它在 SD 卡上显示空白图像。有人可以帮我摆脱这个吗？

我正在使用下面的代码来捕获屏幕截图：

```
 View v1 = cameraView; // CameraView is object of SurfaceView

        v1.setDrawingCacheEnabled(true);
        Bitmap bm = Bitmap.createBitmap(v1.getDrawingCache());
        OutputStream outStream = null;
        File file = new File(Environment.getExternalStorageDirectory(),        "test12345658.jpeg");
        try {
         outStream = new FileOutputStream(file);
         bm.compress(Bitmap.CompressFormat.JPEG, 100, outStream);
         outStream.flush();
         outStream.close();

         Log.i("Hub", "OK, Image Saved to SD");
         Log.i("Hub", "height = "+ bm.getHeight() + ", width = " + bm.getWidth());

        } catch (FileNotFoundException e) {

         e.printStackTrace();
         Log.i("Hub", "FileNotFoundException: "+ e.toString());

        } catch (IOException e) {

         e.printStackTrace();
         Log.i("Hub", "IOException: "+ e.toString());
        } 
```

# c# - 使用 GDI 和 .NET 应用转换和组合位图

> ID：11699615
> 
> 赞同：0
> 
> 时间：2012-07-28T08:54:04.440
> 
> 标签：c#

我正在创建一个加载 2 个图像的方法，对它们应用一些转换（缩放/旋转），然后使用 .NET Graphics 类在另一个图像上的某个点绘制它们。

我目前正在尝试的过程如下：

```
Load bmp1
Load bmp2
Create graphics object from bmp1
Apply tranformations
Save
Repeat process for bmp2
Instantiate new merged bmp obj
Create graphics object from merged bmp
Draw bmp1 & bmp2 on merged bmp
Save 
```

我正在尝试使用以下代码执行此操作：

```
// load existing bmps
var bmp1 = new Bitmap(Path.Combine(_staticIconsPath, staticIcon.Filename));
var bmp2 = new Bitmap(Path.Combine(_movableIconsPath, movableIcon.Filename));

// apply transforms to bmp1
var canvas1 = Graphics.FromImage(bmp1);
canvas1.ScaleTransform(0.5f, 0.5f);
canvas1.RotateTransform(45.0f);
canvas1.Save();

// apply transforms to bmp2
var canvas2 = Graphics.FromImage(bmp2);
canvas2.ScaleTransform(0.5f, 0.5f);
canvas2.RotateTransform(45.0f);
canvas2.Save();

// create final merged bmp
var mergedBmp = new Bitmap(590, 590);
mergedBmp.SetResolution(bmp1.HorizontalResolution, bmp1.VerticalResolution);

// draw transformed images on to final bmp
var mergedCanvas = Graphics.FromImage(mergedBmp);
mergedCanvas.DrawImage(bmp1, 0, 0);
mergedCanvas.DrawImage(bmp2, 0, 0);

mergedCanvas.Save(); 
```

然而，最终结果只是加载了两个原始位图，它们都按预期绘制在彼此之上，但没有应用任何变换。

我以前从未使用过 GDI 或做过任何图像处理，所以我认为我误解了必须遵循的过程的基本内容。任何人都可以帮助我并指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T10:55:03.150

您必须将名为 canevas 的转换保存在每个转换的 bmp 文件中。在你可以使用那些bmp来绘制你的合并文件之后。但是不要在drawingImage时设置相同的位置，因为同一位置的两个图像你只会看到一个，最后一个。

```
 // load existing bmps 
        var bmp1 = new Bitmap("test2.bmp");
        var bmp2 = new Bitmap("test2.bmp");

        // apply transforms to bmp1 
        var canvas1 = Graphics.FromImage(bmp1);
        canvas1.ScaleTransform(0.5f, 0.5f);
        canvas1.RotateTransform(45.0f);
        canvas1.Save();
        canvas1.DrawImage(bmp1,100, 0);
        bmp1.Save("test1res.bmp");
        var bmpres1 = new Bitmap("test1res.bmp");

        // apply transforms to bmp2
        var resbmp2 = new Bitmap(1000, 1000);
        var canvas2 = Graphics.FromImage(bmp2);
        canvas2.ScaleTransform(0.5f, 0.5f);
        canvas2.RotateTransform(45.0f);
        canvas2.Save();
        canvas2.DrawImage(bmp2, 100, 0);
        bmp2.Save("test2res.bmp");
        var bmpres2 = new Bitmap("test2res.bmp");

        // create final merged bmp 
        var mergedBmp = new Bitmap(1000, 1000);
        mergedBmp.SetResolution(bmp1.HorizontalResolution, bmp1.VerticalResolution);

        // draw transformed images on to final bmp 
        var mergedCanvas = Graphics.FromImage(mergedBmp);
        mergedCanvas.DrawImage(bmpres1, 0, 0);
        mergedCanvas.DrawImage(bmpres2, 500, 0);

        mergedCanvas.Save();
        Graphics graph = mergedCanvas;
       // Bitmap bmpPicture = new Bitmap("test2.bmp");
        graph.DrawImage(mergedBmp, 0, 0);

        mergedBmp.Save("res.bmp"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T12:16:37.647

是的，你做错了。除非您实际使用它进行绘图，否则 Graphics 对象的修改不会产生任何影响。你不这样做，你只用 mergeCanvas 绘制。所以重新排序你的代码，类似于这样：

```
var mergedBmp = new Bitmap(590, 590);
using (var bmp1 = new Bitmap(Path.Combine(_staticIconsPath, staticIcon.Filename)))
using (var bmp2 = new Bitmap(Path.Combine(_movableIconsPath, movableIcon.Filename)))
using (var mergedCanvas = Graphics.FromImage(mergedBmp)) {
    mergedCanvas.Save();
    mergedCanvas.ScaleTransform(0.5f, 0.5f);
    mergedCanvas.DrawImage(bmp1, 0, 0);
    mergedCanvas.Restore();
    mergedCanvas.ScaleTransform(-0.5f, -0.5f);
    mergedCanvas.DrawImage(bmp2, 0, 0);
} 
```

顺便说一句，不要跳过那些*using*语句，这在位图上非常重要。

# android - android默认模拟器的替代品

> ID：11699619
> 
> 赞同：80
> 
> 时间：2012-07-28T08:54:17.907
> 
> 标签：android, android-emulator

> **可能重复：**
> [慢速安卓模拟器](https://stackoverflow.com/questions/1554099/slow-android-emulator)

有没有更快更高效的安卓模拟器可用？我厌倦了android默认模拟器。谢谢

**更新 2：** [Genymotion](http://www.genymotion.com/)也很棒，因为 BlueStack App Player 现在强制您安装一些应用程序以继续使用免费版本。我尝试了 Genymotion，对应用程序开发的速度非常满意，还没有尝试过游戏。快乐编码:)

**更新：** [BlueStack App Player](http://bluestacks.com/)是最好的，你的世界会更轻松。我建议每个人现在下载并测试它。稍后你会感谢我的:)。要在 Eclipse 中使用它，只需在命令提示符下使用此命令。

```
adb connect 127.0.0.1 
```

之后，您可以直接从 Eclipse 中在更快、更棒的模拟器上启动 apk。适用于**Windows 和 MAC**。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-28T08:58:44.147

**更新：**
[Genymotion](http://www.genymotion.com/)很棒，因为 BlueStack App Player 现在强制您安装一些应用程序以继续使用免费版本。我尝试了 Genymotion，对应用程序开发的速度非常满意，还没有尝试过游戏。快乐编码:)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-28T08:59:44.490

您可以使用[硬件加速功能加速](http://developer.android.com/tools/devices/emulator.html#acceleration)模拟器。

> 为了使 Android 模拟器运行得更快、响应更快，您可以将其配置为利用硬件加速，结合使用配置选项、特定的 Android 系统映像和硬件驱动程序。

要使用您需要的虚拟机加速，

*   x86 AVD
*   支持虚拟化扩展的处理器
*   Android SDK 工具，修订版 17 或更高版本

并配置图形加速，你需要

*   图形处理单元 (GPU)
*   Android SDK 工具，修订版 17 或更高版本
*   Android SDK 平台 API 15，修订版 3 或更高版本

有关如何配置系统的说明，请参阅 android 文档 -[使用硬件加速。](http://developer.android.com/tools/devices/emulator.html#acceleration)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-07-28T09:02:04.660

您可以使用选项[Emulator snapshots](http://tools.android.com/recent/emulatorsnapshots)快速启动模拟器 您还可以使用比 android 快得多的[Genymotion 模拟器](https://www.infinum.co/the-capsized-eight/articles/is-your-android-emulator-just-too-slow)

# ios - 在 UISCROLLVIEW 中滚动内容时，背景图像也会滚动

> ID：11699621
> 
> 赞同：1
> 
> 时间：2012-07-28T08:54:34.680
> 
> 标签：ios, xcode, macos

如何在滚动内容时将背景图像设置在同一位置。现在我滚动内容意味着我的背景图像也保持移动背景图像也在 UISCROLLVIEW 中滚动内容时滚动。我的示例代码发布在下面。

```
My Code here

    - (void)viewDidLoad
{
    NSLog(@"Welcome to Home Page");
    [super viewDidLoad];

   // self.view.backgroundColor=[[UIColor alloc]initWithPatternImage:[UIImage imageNamed:@"bg-image.png"]];

    UIImage * img = [UIImage imageNamed:@"bg-image.png"];
    [scrollView setBackgroundColor:[UIColor colorWithPatternImage:img]];
// Do any additional setup after loading the view, typically from a nib.
}

- (void)loadView {

    CGRect fullScreenRect=[[UIScreen mainScreen] applicationFrame];
    scrollView=[[UIScrollView alloc] initWithFrame:fullScreenRect];
    scrollView.contentSize=CGSizeMake(1400, 100);

    UIImageView *tempImageView2 = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"sti01.png"]];
    tempImageView2.frame=CGRectMake(10, 60, 200, 200);
    [scrollView addSubview:tempImageView2];

    UIImageView *tempImageView3 = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"sti02.png"]];
    tempImageView3.frame=CGRectMake(240, 60, 200, 200);
    [scrollView addSubview:tempImageView3];

    UIImageView *tempImageView4 = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"sti03.png"]];
    tempImageView4.frame=CGRectMake(470, 60, 200, 200);
    [scrollView addSubview:tempImageView4];

    UIImageView *tempImageView5 = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"sti04.png"]];
    tempImageView5.frame=CGRectMake(700, 60, 200, 200);
    [scrollView addSubview:tempImageView5];

    UIImageView *tempImageView6 = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"sti05.png"]];
    tempImageView6.frame=CGRectMake(930, 60, 200, 200);
    [scrollView addSubview:tempImageView6];

    UIImageView *tempImageView7 = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"sti06.png"]];
    tempImageView7.frame=CGRectMake(1160, 60, 200, 200);
    [scrollView addSubview:tempImageView7];

    self.view=scrollView;
    [scrollView addSubview:tempImageView2];
    [scrollView addSubview:tempImageView3];
    [scrollView addSubview:tempImageView4];
    [scrollView addSubview:tempImageView5];
    [scrollView addSubview:tempImageView6];
    [scrollView addSubview:tempImageView7];

    scrollView.userInteractionEnabled = YES;
    btn = [UIButton buttonWithType:UIButtonTypeCustom];
    btn.frame = CGRectMake(22, 100, 1800, 500);
   // [btn setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
    [btn addTarget:self action:@selector(buttonTest:) forControlEvents:UIControlEventTouchUpInside];    
    [scrollView addSubview:btn];

}

- (IBAction)buttonTest:(id)sender {
    MSDescriptionpage *aSecondPageController = [[MSDescriptionpage  alloc] initWithNibName:@"MSDescriptionpage" bundle:nil];        
    [self.navigationController pushViewController:aSecondPageController animated:YES];        
    [aSecondPageController release];

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T09:05:55.640

它正在滚动，因为它是滚动视图的背景。所以当滚动移动时，背景会移动。您可以使滚动视图的背景透明（可能通过将背景颜色设置为`[UIColor clearColor]`并设置`opaque`为`NO`），然后在具有相同框架的滚动视图后面放置一个视图。这不会随着滚动视图移动。请记住，滚动视图会移动它们的内容，而不是它们本身。背景是该内容的一部分。

**编辑：**

改变这个：

```
- (void)viewDidLoad
{
    NSLog(@"Welcome to Home Page");
    [super viewDidLoad];

    self.view.backgroundColor=[[UIColor alloc]initWithPatternImage:[UIImage imageNamed:@"bg-image.png"]];

    UIImage * img = [UIImage imageNamed:@"bg-image.png"];
    [scrollView setBackgroundColor:[UIColor colorWithPatternImage:img]];
 // Do any additional setup after loading the view, typically from a nib.
} 
```

对此：

```
- (void)viewDidLoad
{
    NSLog(@"Welcome to Home Page");
    [super viewDidLoad];

    self.view.backgroundColor=[[UIColor alloc]initWithPatternImage:[UIImage imageNamed:@"bg-image.png"]];

    UIImage * img = [UIImage imageNamed:@"bg-image.png"];
    [scrollView setBackgroundColor:[UIColor clearColor]];
// Do any additional setup after loading the view, typically from a nib.
} 
```

然后是这样的：

```
UIView *customScrollBackground = [[UIView alloc] initWithFrame:scrollView.frame];
customScrollBackground.backgroundColor = [[UIColor alloc] initWithPatternImage:[UIImage imageNamed:@"bg-image.png"]];
[customScrollBackground addSubview:scrollView]; 
```

# asp.net - 流式视频在 IE 中不起作用

> ID：11699633
> 
> 赞同：0
> 
> 时间：2012-07-28T08:56:31.357
> 
> 标签：asp.net, streaming, video.js

这是我的想法： 1\. 将视频从免费托管到我的服务器（OK）示例：http://yanoshop.com/dms/xem/dms.aspx?url=http: [//up.4share.vn/f/3103020403020003 /3830e2bfe4bdc4091f28a94d1fb9bf3d.webm.file](http://yanoshop.com/dms/xem/dms.aspx?url=http://up.4share.vn/f/3103020403020003/3830e2bfe4bdc4091f28a94d1fb9bf3d.webm.file) 2\. 然后将文件从服务器流式传输到客户端（在 FireFox 和 Chrome 上正常，但在 IE 上） 示例：[http ://www.yanoshop.com/dms/xem/webm.aspx?u=http:// yanoshop.com/dms/xem/dms.aspx?url=http://up.4share.vn/f/3103020403020003/3830e2bfe4bdc4091f28a94d1fb9bf3d.webm.file](http://www.yanoshop.com/dms/xem/webm.aspx?u=http://yanoshop.com/dms/xem/dms.aspx?url=http://up.4share.vn/f/3103020403020003/3830e2bfe4bdc4091f28a94d1fb9bf3d.webm.file)

注意：我正在使用 HTML5 在移动设备上运行它（我正在使用 VideoJS 插件）

这是我使用的代码：

```
//Create a stream for the file

        Stream stream = null;

        //This controls how many bytes to read at a time and send to the client
        int bytesToRead = 50000;

        // Buffer to read bytes in chunk size specified above
        byte[] buffer = new Byte[bytesToRead];

        // The number of bytes read
        try
        {
            //Create a WebRequest to get the file
            HttpWebRequest fileReq = (HttpWebRequest)HttpWebRequest.Create(downloadLink);
            fileReq.Timeout = 99999;
            //Create a response for this request
            HttpWebResponse fileResp = (HttpWebResponse)fileReq.GetResponse();

            if (fileReq.ContentLength > 0)
                fileResp.ContentLength = fileReq.ContentLength;

            //Get the Stream returned from the response
            stream = fileResp.GetResponseStream();

            // prepare the response to the client. resp is the client Response
            Response.Clear();
            Response.AddHeader("Pragma", "public");
            Response.Expires = 0;
            Response.AddHeader("Cache-Control", "no-cache, must-revalidate");
            Response.AddHeader("Cache-Control", "public");
            Response.AddHeader("Content-Description", "File Transfer");

            Response.Cache.SetCacheability(HttpCacheability.Public);
            Response.Cache.SetLastModified(DateTime.Now);

            //Indicate the type of data being sent
            Response.ContentType = ExtentionToContentType(filename);
            Response.AddHeader("Accept-Ranges", "bytes");

            //Name the file 
            Response.AppendHeader("Content-Disposition", "filename=" + filename);
            Response.AddHeader("Content-Length", fileResp.ContentLength.ToString());
            //Response.AddHeader("Content-Encoding", "gzip");

            //Response.AddHeader("Accept-Header", stream.Length.ToString());
            int length;
            int count = 0;
            if (count == 0)
            {

            }
            do
            {
                // Verify that the client is connected.
                if (Response.IsClientConnected)
                {
                    // Read data into the buffer.
                    length = stream.Read(buffer, 0, bytesToRead);

                    // and write it out to the response's output stream
                    Response.OutputStream.Write(buffer, 0, length);

                    // Flush the data
                    Response.Flush();

                    //Clear the buffer
                    buffer = new Byte[bytesToRead];
                }
                else
                {
                    // cancel the download if client has disconnected
                    length = -1;
                }
            } while (length > 0); //Repeat until no data is read
        }
        finally
        {
            if (stream != null)
            {
                //Close the input stream
                stream.Close();
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T02:59:08.103

看起来您正在使用 WebM 文件，Chrome 和 Firefox 支持但 IE9 不支持。

# angularjs - 在 AngularJS 中处理 DOM 操作

> ID：11699635
> 
> 赞同：36
> 
> 时间：2012-07-28T08:56:46.717
> 
> 标签：angularjs

当我使用 jQuery 执行 DOM 操作（添加新 HTML）时，AngularJS 不会自动检测新 HTML 中的变量并用它们的值替换它们。例如：

```
$scope.showSummary = function($event){

    $($event.currentTarget).html("<div>{{row}}</div>");

}; 
```

这是一个简单的示例，但是在更改元素中的 HTML 之后（此函数由 调用`ng-click`），输出仍然是它`{{row}}`而不是上下文/范围中应该表示的*行。*

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-07-28T11:51:20.093

您必须注入`$compile`（[http://docs.angularjs.org/api/ng.$compile](http://docs.angularjs.org/api/ng.$compile)）并使用它，以便 Angular 知道新的 html。

`$compile('<div>{{row}}</div')($scope).appendTo($event.currentTarget);`

然而，在控制器中进行 DOM 操作在角度上是不受欢迎的。您希望您的控制器处理业务，而您的视图处理视图。

尝试一个指令来做你想做的事。[http://docs.angularjs.org/guide/directive](http://docs.angularjs.org/guide/directive)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-18T17:22:11.300

如果您对新元素使用片段（例如 $("<" + "div>").appendTo("body")），则对 JQuery prepend/append 方法使用如下包装器可以避免更改元素- 添加代码：

```
// run angular-compile command on new content
// (also works for prependTo/appendTo, since they use these methods internally)
var oldPrepend = $.fn.prepend;
$.fn.prepend = function()
{
    var isFragment = arguments[0][0] && arguments[0][0].parentNode && arguments[0][0].parentNode.nodeName == "#document-fragment";
    var result = oldPrepend.apply(this, arguments);
    if (isFragment)
        AngularCompile(arguments[0]);
    return result;
};
var oldAppend = $.fn.append;
$.fn.append = function()
{
    var isFragment = arguments[0][0] && arguments[0][0].parentNode && arguments[0][0].parentNode.nodeName == "#document-fragment";
    var result = oldAppend.apply(this, arguments);
    if (isFragment)
        AngularCompile(arguments[0]);
    return result;
};

function AngularCompile(root)
{
    var injector = angular.element($('[ng-app]')[0]).injector();
    var $compile = injector.get('$compile');
    var $rootScope = injector.get('$rootScope');
    var result = $compile(root)($rootScope);
    $rootScope.$digest();
    return result;
} 
```

# c - 不显式计算平方根的整数的最小除数

> ID：11699636
> 
> 赞同：3
> 
> 时间：2012-07-28T08:56:49.267
> 
> 标签：c, algorithm, performance

此代码给出整数的最小除数。但问题是我必须计算平方根。有没有办法让我不必明确计算平方根？

```
int d,r,n;
scanf("%d",&n);
if(n%2==0)
{
    printf("2 is ans"); 
}
else
{
    r=sqrt(n);
    d=3;
    while((n%d!=0)&&d<r)
    {
        d=d+2; 
    }
    if(n%d==0)
        printf("ans is %d",d);
    else
        printf("ans is 1");
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-28T09:12:12.327

由于`code-efficiency`是标签之一，因此请稍微调整一下提供的答案：

```
while ((n%d) && (d<n/d)) d+=2; 
```

编译器更有可能以这种方式重用除法运算符的结果。

查看`gcc -O3`我建议的循环版本的编译器输出，每次迭代只有一个除法运算，结果用于两个比较：

```
L18:
        cmpl    %esi, %ecx
        jle     L13
        movl    %ebx, %eax
        addl    $2, %esi
        cltd
        idivl   %esi
        testl   %edx, %edx
        movl    %eax, %ecx
        jne     L18
        .p2align 4,,15
L13: 
```

同时，该`while ((n%d) && d*d < n) d+=2;`版本提供：

```
L8:
        movl    %ecx, %eax
        imull   %ecx, %eax
        cmpl    %ebx, %eax
        jge     L3
        movl    %ebx, %eax
        addl    $2, %ecx
        cltd
        idivl   %ecx
        testl   %edx, %edx
        jne     L8
        .p2align 4,,15
L3: 
```

很明显，每次迭代都在进行乘法和除法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-28T08:59:57.333

当然。而不是这个：

```
while((n%d!=0)&&d<r) 
```

你可以写

```
while((n%d!=0) && d*d < n) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-28T09:00:16.753

`d < sqrt(n)`您可以检查是否是这样，而不是检查if `d*d < n`：

```
while((n%d!=0)&&d<r) 
```

应该

```
while((n%d!=0) && d*d < n) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-28T09:01:45.643

该算法使用平方根来减少循环中的迭代次数。大大减少。[我不知道平方根有什么问题，但是您可以使用这些算法](http://en.wikipedia.org/wiki/Methods_of_computing_square_roots)近似计算平方根，或者在这一行中更改为`d`,`d * d`或更改为（但性能下降）`r``n``while((n%d!=0)&&d<r)``r``n`

# google-maps-api-3 - 谷歌地图坐标圈

> ID：11699647
> 
> 赞同：3
> 
> 时间：2012-07-28T08:59:16.917
> 
> 标签：google-maps-api-3

在 Googlemaps 中绘制 Circle 叠加层后是否可以获得全部坐标？基本上我想做的类似于热图，但我画了一个以中心为标记的圆圈，然后我希望找到落在该圆圈中的所有坐标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T14:56:10.670

您可能不需要找到圆上的点来确定一个点是否在圆内。

例如，如果我正确理解您的目的，您就会有一堆点，例如 [(lat,lon),...]。然后你可以试试这个

```
Loop points[]
  if distance between (lat,lon) and the marker (center of the markder) < r of the circle
     the poinst is within the circle 
```

# google-chrome-extension - 如何通过网站页面检查是否安装并启用了某些 Chrome 扩展程序？

> ID：11699651
> 
> 赞同：0
> 
> 时间：2012-07-28T08:59:37.547
> 
> 标签：google-chrome-extension

应该检查 INSTALLED 和 ENABLED。

我想让我的网站页面检查访问者是否安装并启用了我的 chrome 扩展。

怎么做 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T10:58:01.700

一个简单的技巧是让您的 Chrome 扩展程序在您的网页中注入[内容脚本。](http://code.google.com/chrome/extensions/content_scripts.html)

虽然，此内容脚本在[隔离范围内](https://stackoverflow.com/questions/3955803/page-variables-in-content-script)运行，但它可以访问 DOM，并且可以设置特定元素的“data-”属性，这可以在您页面上的 JS 函数中进行检查，您可以发现您的扩展程序是否已安装并且启用。

# linux - 这些Linux路径有什么区别

> ID：11699656
> 
> 赞同：1
> 
> 时间：2012-07-28T09:00:07.807
> 
> 标签：linux, path

Linux路径有什么不同

```
 /etc/passwd
 ../etc/passwd
/../etc/passwd 
```

这些路径相同吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T09:06:07.370

第一个是绝对路径。任何以 / 开头的路径都是绝对路径，它包含访问文件所需的所有目录。

第二个是相对路径。'..' 是一个特殊目录，表示当前目录的父目录。例如，如果您当前位于 /etc/X11 文件夹中，../etc/passwd 将意味着向上一个文件夹（到 /etc），并且文件 passwd 将在那里。

最后一个很奇怪。根目录 '/' 没有父目录，但里面仍然有 '..' 文件夹。如果您在 '/' 内对 .. 进行 'cd'，则不会发生任何事情，所以这与第一个选项 (/etc/passwd) 的工作方式几乎相同，但看起来相当混乱。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T09:03:44.590

首先是绝对路径。将其视为真实的确切位置。

其次是相对的，取决于你在哪里。如果您的当前目录是

```
/home/user/ 
```

然后`../etc/passwd`将位于： `/home/etc/passwd`

至于最后一个，它没有意义，因为 / 是每个文件夹的根目录。基本上是一样的`/home/etc/passwd`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-28T09:09:17.820

`/etc/passwd`与`/../etc/passwd`最近的 Linux 内核相同。

[LVS](http://tldp.org/LDP/khg/HyperNews/get/fs/vfstour.html)自动为目录添加和条目，对于`"."`，它们都指向's inode。`".."``"/"``"/"`

`../etc/passwd`它是一个相对路径，所以它取决于进程当前的工作目录。如果 cwd 是`"/"`or `"/etc"`，那么它们都指向同一个文件。

另请参阅：[规范化](https://en.wikipedia.org/wiki/Canonicalization)

# c# - 在单个 ado.net 事务中执行多个语句/sqlcomands

> ID：11699661
> 
> 赞同：0
> 
> 时间：2012-07-28T09:00:44.757
> 
> 标签：c#, winforms, ado.net, transactions, sqlcommand

我在这里不包含任何代码，因为在过去的几天里我已经重写了很多次它真的不值得再打扰了，所以我将用通用术语解释我的问题。

我有一个用 C# 编写并连接到 sql server 数据库的 winforms 应用程序。在我的应用程序的某些部分，我可以在数据库中的许多表上运行多达 10 个 SQL 命令，并且我需要将它们包含在单个事务中，因为这是一个“全有或全无”的情况。如果 10 个命令中的任何一个失败，我不希望提交任何命令。

复杂的因素包括：

1.  10条sql命令中的每一条都有多个参数
2.  一些 sqlcommands 使用 INSERT，我需要在后续的一些 sqlcommands 中使用服务器生成的身份。
3.  一些命令对相同的数据进行操作，即早期的命令可能会在数据库中插入一个新项目，而后面的 sql 命令之一将尝试更新该相同的条目。

任何帮助都将不胜感激，因为我已经在这个问题上花费了一周的大部分时间，并且感觉进展相对较小。

编辑：

sqlcommands 最初是在不同的类等中，但是我认为这可能是问题，所以我做了一个很大的重写，现在所有的 sqlcommands 都在同一个方法中，尽管一些 sqlcommands 写在别处并传递回主要方法。

目前的问题是，第一个命令 (INSERT) 已执行，但事务在第二个命令处失败，因为该命令试图引用在第一个命令中创建的数据库条目。

此外，我不能使用 TransactionScope，因为网络上的 MSDTC 会导致其他问题，因此我需要使用我的应用程序和 ADO.NET 来处理这个问题。

编辑（一些代码）

这里只是事务中的前两个 sql 命令：

```
string connectionString = aSystem.ConnectionString;

    using (SqlConnection linkToDB = new SqlConnection(connectionString))
    {
        linkToDB.Open();
        using (SqlTransaction transaction = linkToDB.BeginTransaction())
        {
            try
            {                            
                //...Case...//

                cCase c = new cCase();
                c.CaseType = cboCaseType.Text;
                c.Occupation = txtOccupation.Text;
                c.DateInstructed = txtDateInst.Text;
                c.Status = "Live";
                SqlCommand sqlSaveCase = c.SaveSqlCom();                               
                sqlSaveCase.Connection = linkToDB;
                sqlSaveCase.Transaction = transaction;
                c.SetCaseNo = sqlSaveCase.ExecuteNonQuery().ToString();

                //...IP Link...//

                string strIPID = cboIPAddress.SelectedValue.ToString();
                SqlCommand sqlNewIPLink = cIPID.NewIPLinkSqlCom(strIPID,c.CaseNo,txtIPRef.Text);
                sqlNewIPLink.Connection = linkToDB;
                sqlNewIPLink.Transaction = transaction;
                sqlNewIPLink.ExecuteNonQuery();                //...fails here...//

                //...an additional 8 sql commands follow...// 
```

问题

sqlSaveCase 命令在 tblCases 上插入一个新案例，但是当第二个命令 sqlNewIPLink 尝试使用第一个命令创建的标识时，它会生成一个外键错误，就好像它没有从第一个命令中看到新创建的案例一样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T10:29:18.073

错误是这一行

```
c.SetCaseNo = sqlSaveCase.ExecuteNonQuery().ToString(); 
```

应该使用 ExecutreScalar() 从 INSERT 命令中检索 ID。当我最终意识到它总是返回 1 时，线索出现了，我认为这可能只是一个布尔值“真”，表示命令已执行。一旦我在命令上使用了 ExecuteScalar，它就开始返回更有意义的 ID，随后的 SqlCommands 确实识别了这些 ID，因此没有外键问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T10:28:33.120

不确定这是否是问题所在，但我看不出你在哪里使用第二个 SqlCommand 上的 c.SetCaseNo。

```
 //
  // here you are setting c.SetCaseNo
  //
  c.SetCaseNo = sqlSaveCase.ExecuteNonQuery().ToString();

  string strIPID = cboIPAddress.SelectedValue.ToString();

  //
  // but here you're using c.CaseNo
  //
  SqlCommand sqlNewIPLink = cIPID.NewIPLinkSqlCom(strIPID,c.CaseNo,txtIPRef.Text);

  sqlNewIPLink.Connection = linkToDB;
  sqlNewIPLink.Transaction = transaction;
  sqlNewIPLink.ExecuteNonQuery(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T09:47:50.150

在您的情况下，使用命令模式是一个好习惯。事实上，它允许您撤消您的操作。Transaction 对少数操作有好处。但是对于 10 个操作，最好循环执行每个命令，如果一个命令失败，则撤消命令。这意味着您实现了回滚操作（此处为 10）。这里是模式示例的链接：http://www.dofactory.com/Patterns/PatternCommand.aspx

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T09:10:05.590

您可以为此使用 TransactionScope 类。

[这](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx)是对它的很好的解释。

希望这可以帮助。

# jar - 无法在 kubuntu inux 上运行 pycharm 2.5.1

> ID：11699665
> 
> 赞同：0
> 
> 时间：2012-07-28T09:01:17.423
> 
> 标签：jar, sh, pycharm, kubuntu

我想在 kubuntu 上运行 pycharm 2.5.1 但我收到了这个错误

```
mohammad@mohammad-Inspiron-1564:/media/storage/Linux/pycharm-2.5.1/bin$ sh pycharm.sh 
OpenJDK Runtime Environment (IcedTea7 2.1.1pre) (7~u3-2.1.1~pre1-1ubuntu3)
OpenJDK 64-Bit Server VM (build 22.0-b10, mixed mode)
OpenJDK 64-Bit Server VM (build 22.0-b10, mixed mode)
WARNING: You are launching the IDE using OpenJDK Java runtime.

         ITS KNOWN TO HAVE PERFORMANCE AND GRAPHICS ISSUES!
         SWITCH TO THE ORACLE(SUN) JDK BEFORE REPORTING PROBLEMS!

NOTE:    If you have both Oracle (Sun) JDK and OpenJDK installed
         please validate either PYCHARM_JDK, JDK_HOME, or JAVA_HOME environment variable points to valid Oracle (Sun) JDK installation.
         See http://ow.ly/6TuKQ for more info on switching default JDK.

Press Enter to continue.

Error occurred during initialization of VM
java/lang/ClassNotFoundException: error in opening JAR file ../lib/boot.jar 
```

在 Kubuntu 之前，我有 opensuse 和 ubuntu，运行 pycharm 没有问题，但我不知道为什么会发生

* * *

问候穆罕默德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T09:37:49.027

问题出在我安装的 java 和其他一些包我卸载了所有 java 包及其库并再次安装然后它工作正常

# java - “iterator.next()%2”有什么问题？

> ID：11699669
> 
> 赞同：2
> 
> 时间：2012-07-28T09:01:42.617
> 
> 标签：java, iterator, set

我的代码有什么问题？我正在尝试查找该集合是否包含任何奇数

```
public static boolean hasOdd (Set<Integer> set) {
    Iterator iterator;
    iterator = set.iterator();

    while (iterator.hasNext()) {
        if(iterator.next()%2 != 0) {
            return true;
        } else {
            return false;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-28T09:05:14.177

问题是它只检查迭代器的第一个元素。如果当前元素是偶数，它不应该返回，而是转到下一个元素。另一个问题是，如果您希望自动拆箱起作用，您应该使用`Iterator<Integer>`，而不仅仅是 raw 。`Iterator`

通过使用 foreach 循环，它也会更加简洁和易读：

```
for (Integer i : set) {
    ...
} 
```

这看起来像是家庭作业，或者至少是您可以自己弄清楚的东西，所以我不会给您解决方案，而只是上面的提示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T09:11:13.207

您的方法只是检查集合的第一个元素并判断它是否为奇数。但是，您应该确保仅在找到第一个奇数时才退出循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T09:27:00.503

或者你可以这样尝试

```
Iterator<Integer> iterator = set.iterator(); 
```

并且不要在循环中使用else，并且false语句应该是方法的最后一个语句

# c# - 如何更改 RSACryptoServiceProvider 的 CSP 参数

> ID：11699671
> 
> 赞同：4
> 
> 时间：2012-07-28T09:01:55.440
> 
> 标签：c#, .net, cryptography, digital-signature, signedxml

我正在使用 SignedXML 类进行 rsa-sha256 xml 签名。但问题是我需要更改 CSP 以支持 sha256。

这就是我选择证书的方式，

```
public X509Certificate2 GetCertificateFromStore()
        {
            X509Store st = new X509Store(StoreName.My, StoreLocation.CurrentUser);
            st.Open(OpenFlags.ReadOnly);
            X509Certificate2Collection col = st.Certificates.Find(X509FindType.FindByTimeValid, (object)DateTime.Now, false);

            X509Certificate2 x509Certificate =null;
            X509Certificate2Collection sel = X509Certificate2UI.SelectFromCollection(col, "Certificate", "Select single certificate to sign", X509SelectionFlag.SingleSelection);
            if (sel.Count > 0)
            {
                X509Certificate2Enumerator en = sel.GetEnumerator();
                en.MoveNext();
                x509Certificate = en.Current;
            }
            st.Close();
            //x509Certificate.s
            return x509Certificate;
        } 
```

这就是我尝试更改 CSP 参数的方式。

```
byte[] privateKeyBlob;
            RSACryptoServiceProvider rsa = new RSACryptoServiceProvider();
            rsa = cert.PrivateKey as RSACryptoServiceProvider;
            try
            {
                privateKeyBlob = rsa.ExportCspBlob(true);
            }
            catch
            {
                throw new ApplicationException("Private key fails to export");
            }
            // To use the RSA-SHA256 the CryptoAPI needs to select a special CSP: Microsoft Enhanced RSA and AES Cryptographic Provider
            // By reinstantiating a CSP of type 24 we ensure that we get the right CSP.
            CspParameters cp = new CspParameters(24);
            rsa = new RSACryptoServiceProvider(cp);
            rsa.ImportCspBlob(privateKeyBlob);

            signer.SigningKey = rsa;
            signer.KeyInfo = getKeyInfo(signer, cert); 
```

问题是我正在使用 USB 设备令牌，我怀疑私钥不可导出。在导出它时抛出一个错误'**密钥在指定状态下无效。**'。

任何人都可以帮助如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:29:40.340

如果有人对这里感兴趣是我的解决方案，我最终使用了我的 3rd 方 CSP 的另一个新版本。我使用的 CSP 版本是旧版本，我切换到新版本。现在签名正在工作。谢谢你的帮助。

# python - python2.7如何安装gtk？

> ID：11699675
> 
> 赞同：8
> 
> 时间：2012-07-28T09:02:35.350
> 
> 标签：python, gtk

我正在使用 Debian 6.04 和 Python 2.7我 在控制台中
编译了 Python 2.7 ,(./configure,make,make install) ：

```
>python2.7  
Python 2.7.3 (default, Jul 28 2012, 16:54:06) 
[GCC 4.4.5] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import gtk
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
ImportError: No module named gtk 
```

如何在 Python 2.7 中安装 gtk？

在 Python 2.6 中：

```
tiger@debian:~$ python
Python 2.6.6 (r266:84292, Dec 27 2010, 00:02:40) 
[GCC 4.4.5] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import gtk
>>> import pygtk
>>> import gobject 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T09:32:27.677

尝试使用 pip/python-pip/easy_install 安装它。在 Fedora 上，我是这样安装的：

```
sudo pip install PyGTK 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-28T10:47:49.483

我通常会使用基于 python 2.7 创建一个 virtualenv

```
$ virtualenv -p /usr/bin/python2.7 . 
```

然后在 virtualenv 中安装你的包。

然而，`pygtk`这是一个尴尬的例外：它只能通过 PyPI 在 Windows 平台上安装，因为它的一些依赖项（对于 Posix 版本）在 PyPI 中不可用。

在 Debian 上，在系统范围内安装 PyGTK 包

```
$ sudo pip install PyGTK 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-05-27T11:48:08.870

对于 Windows：

```
pip install PyGTK 
```

对于 MacOS：

```
brew install pygtk 
```

*   请注意，这适用于 brew 安装的 python2 开箱即用（对我来说，在 中`/usr/local/Cellar/python\@2/2.7.15/bin/python2.7`）。为了将它与通过其他方式安装的 python 一起使用，请确保附加 PYTHONPATH。

对于 Ubuntu：（使用系统安装的 python2）

```
sudo apt-get install python-gtk2-dev 
```

康达：

```
conda install -c ostrokach gtk 
```

*   如果您在 conda 环境中运行 python2。

# mysql - Mysql从表中选择最接近的匹配

> ID：11699684
> 
> 赞同：1
> 
> 时间：2012-07-28T09:04:12.663
> 
> 标签：mysql, select, match, closest

我有一个看起来像这样的表：

```
ID|DATA
1 | ok
4 | ok2
5 | kk
6 | same ok
7 | k
9 | yeah 
```

我想找到与我的 id 最接近的匹配项（向下取整）。当我经过

> 编号 = 8

我想选择原始的`7 | K`

我如何在 mySql 中做到这一点

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T09:06:18.867

您可以使用此解决方案：

```
SELECT   id, data
FROM     tbl
WHERE    id <= 8
ORDER BY id DESC
LIMIT 1 
```

* * *

或者，这是另一种无需使用`ORDER BY`/即可完成的方法`LIMIT`：

```
SELECT b.id, b.data
FROM   (SELECT MAX(id) AS id FROM tbl WHERE id <= 8) a
JOIN   tbl b ON a.id = b.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T09:06:37.340

```
SELECT * 
 FROM table
 WHERE ID <= 8
 ORDER BY ID DESC
 LIMIT 1 
```

# asp.net-mvc-3 - asp .net中博客的自定义urlheader

> ID：11699685
> 
> 赞同：0
> 
> 时间：2012-07-28T09:04:25.123
> 
> 标签：asp.net-mvc-3, routes

net mvc 3 并尝试创建博客应用程序。我想要一个包含 urlheader 的 url，例如：

博客/详情/第三篇文章

但是，我得到一个网址，它是这样的：

```
Blog/Details/3?urlHeader=Third-post 
```

我究竟做错了什么？

我的博客控制器如下：

```
public ViewResult Details(int id, string urlHeader)
{
    var blogs = blogrepository.GetBlog(id);
    var recentblogs = blogrepository.FindRecentBlogs(5);
    var archivelist = blogrepository.ArchiveList();
    BlogDetailsViewModels viewModel = new BlogDetailsViewModels { Blog = blogs, RecentBlogs = recentblogs, ArchiveList = archivelist };
    return View(viewModel);
} 
```

路由方法如下：

```
 routes.MapRoute(
        "BlogDetail", // Route name
        "Blog/Details/{urlHeader}", // URL with parameters
        new { controller = "Blog", action = "Details" }, // Parameter defaults
        new { urlHeader = "" } // Parameter constraints
    ); 
```

链接如下：

```
@Html.ActionLink(Model.Title , "Details", "Blog", new { id = Model.BlogID, urlHeader = Model.UrlHeader }, null) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T09:37:32.157

您可能有以下路线：

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapRoute(
        "Blog",
        "Blog/Details/{id}/{urlHeader}",
        new { controller = "Blog", action = "Details", urlHeader = UrlParameter.Optional },
        new { id = @"\d+" }
    );

    routes.MapRoute(
        "Default",
        "{controller}/{action}/{id}",
        new { controller = "Home", action = "Index", id = UrlParameter.Optional }
    );
} 
```

# c++ - 进程似乎陷入僵局

> ID：11699697
> 
> 赞同：0
> 
> 时间：2012-07-28T09:05:35.927
> 
> 标签：c++, deadlock

```
void Simulator::writeData()
{ 
  resultFile_<<"#"<<*gTime_<<"\n"; 
  Wire* wire=wires_->next;
  char* c=0;
  while(wire!=0)
  {
      if(wire->getType() ==TYPE_OUT)
      {
          c=wire->getValue();
              resultFile_<<"b"<<c<<" "<<wire->getName()<<"\n";  //output result

          //// for vector of results://///
          Tlogic tempEntery(wire->getSize());
          tempEntery.setTime(*gTime_);
          tempEntery.setLogic(c);
          goldenResult_.push_back(tempEntery);
          ////////////////////////////////

      }
   wire=wire->next; 
  } 
} //end of function writeData 
```

在这段代码中，我需要一个临时 chat* 变量，我将它命名为 c，我为其分配了一个内存然后删除，问题：我的程序正确调用了这个函数并且它可以工作，但是我第十次调用它，程序中断当我暂停它时，会出现此错误：进程似乎已陷入僵局。

这是错误：进程似乎已死锁（或未运行任何用户模式代码）。所有线程都已停止。+ 一个确定按钮！

.....................我认为这是因为我的向量（goldenResult_）！因为当我评论该行时没有死锁我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T12:51:52.160

我的猜测是：

```
 tempEntery.setTime(*gTime_); <--- (hm... gTime ... race somewhere ?? )
   tempEntery.setLogic(c);
   goldenResult_.push_back(tempEntery); 
```

你能展示处理你的向量的部分吗？

对不起，不在评论中，没有足够的积分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T09:21:47.877

您正在根据无法从显示的代码确定的外部条件分配/释放内存。我的建议是纠正分配习语：将指针初始化为0，删除后设置为0：

```
 char* c = 0; // be sure you don't free if not allocated
  while(wire!=0)
  {
      if(wire->getType() ==TYPE_OUT)
      {
          c=new char[wire->getSize()+1] ;
          wire->getValue(c);
              resultFile_<<"b"<<c<<" "<<wire->getName()<<"\n";  //output result

          //// for vector of results://///
          Tlogic tempEntery(wire->getSize());
          tempEntery.setTime(*gTime_);
          tempEntery.setLogic(c);
          goldenResult_.push_back(tempEntery);
          ////////////////////////////////
         // delete c;
      }
      delete c ; // this can remain unchanged: delete of NULL is harmless
      c = 0;  // this way you avoid to delete more times than allocated
      wire=wire->next; 
  } 
```

另一种方法是使用智能指针，为您跟踪分配。

# android - Android 坐标系：在较小的屏幕设备上绘图超出屏幕

> ID：11699698
> 
> 赞同：0
> 
> 时间：2012-07-28T09:05:49.570
> 
> 标签：android, view, drawing, android-canvas, coordinate-systems

我正在创建一个 android 应用程序，用户可以在其中在我的自定义视图上绘制一些东西。我正在从运动事件中保存点并尝试在另一个 android 设备上重绘路径。它工作正常。

但是，如果第二个设备的屏幕尺寸小于第一个设备的屏幕尺寸，则绘图的某些部分会从屏幕上消失。

有没有什么办法解决这一问题？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T09:09:25.423

您可以获得第一个设备的窗口分辨率并与第二个设备进行比较。随着屏幕宽度和高度的变化，你改变你的绘图大小

# c - C、无法通过解引用检索变量值，未知分段错误

> ID：11699700
> 
> 赞同：0
> 
> 时间：2012-07-28T09:06:00.243
> 
> 标签：c, pointers, methods, dereference

如果我对方法内的指针进行操作，它就可以工作。但是当在另一种方法中用作参数时，相同的操作会失败。显然我缺少一些东西。我的猜测是由于某种原因 foobar 无法“看到” *ptr 指向的变量。

```
int main(int argc, char *argv[]){
    unsigned short b =15;
    unsigned short *ptr = &b;

    //If I do it in main it works
    unsigned short c = 10 & (*ptr);

    //If I send it to foobar, it segfaults
    foobar(*ptr);
}

void foobar(unsigned short *ptr){
    unsigned short c = 10 & (*ptr);
} 
```

如果我 foobar(unsigned short b) 无法编译，我如何将我的变量传递给 foobar（通过反复试验，我发现您只能使用基本类型作为参数）。

如果有人能“指出”我的解释，我将不胜感激。我已经阅读了几个 C 教程，但我找不到发生这种情况的具体原因，或者如何解决它。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T09:09:23.987

这里

```
 foobar(*ptr); 
```

您正在将取消引用的**指针**发送到该函数。因此，您传递的是一个无符号短参数，而不是**指向**无符号短的指针。该函数需要一个指针，因此您应该传递一个指针。你需要的是

```
 foobar(ptr); 
```

你的代码将编译

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T09:08:07.090

你应该传递`ptr`给`foobar`，而不是`*ptr`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T09:10:43.950

发生这种情况是因为您传递的不是存储在 ptr 中的 b 的地址，而是 b 的值。换句话说，foobar 的 ptr = 10，这不是一个有效的地址。当您在 ( `unsigned short c = 10 & (*ptr);`) 内取消引用它时，您会遇到段错误。

看起来您只需将指针传递给 foobar 函数，这可以通过以下方式实现`foobar(ptr);`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T09:10:52.903

`foobar`需要一个*指向*`unsigned short`. 但是，当您在参数列表中`unsigned short`取消引用时，您传递了一个： ，因此作为地址获取。用作地址 - 它在作为主体的单行中被取消引用- 导致段错误。`ptr``foobar(*ptr);``foobar``10``10``foobar`

调用函数，传递你的指针，像这样：`foobar(ptr);`，你可以使用你在语句中所做的值`main`。

# objective-c - iOS 和 Objective-C：每季度重复一个事件

> ID：11699706
> 
> 赞同：4
> 
> 时间：2012-07-28T09:06:40.353
> 
> 标签：objective-c, nsdate, foundation

我需要每“季度”重复一次事件（我认为这意味着大约提前 3 个月）。所以我可以期望这会移动日期（但它不会）：

```
 NSDateComponents *component = [[NSDateComponents alloc] init]; // quarter
    component.quarter = 1;

    self.todoStartDate = [[NSCalendar currentCalendar] dateByAddingComponents: component toDate:self.todoStartDate options: 0]; 
```

在日期中添加“季度”有什么问题吗？添加一天或一周时效果很好，但不适用于“季度”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T09:38:23.153

我遇到了同样的问题，不知道为什么这个季度不起作用，所以通过逐月替换 * 3 来解决。下面演示了如何让四分之三倒退：

```
 NSDateComponents *dayComponent = [[NSDateComponents alloc] init];
        NSCalendar *theCalendar = [NSCalendar currentCalendar];

        NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
        dateFormatter.dateFormat = @"QQQ yyyy";
        NSDate *currentDate = [NSDate date];

        for (int i = -2; i <= 0; i++) {
            //dayComponent.quarter = i;
            dayComponent.month = i*3;

            NSDate *date = [theCalendar dateByAddingComponents:dayComponent toDate:currentDate options:0];

            NSString *dateString = [dateFormatter stringFromDate:date];

            NSLog(@"date = %@", dateString);
        } 
```

我希望这一切都会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T22:54:35.283

（我希望我可以将其添加为对 applefreak 答案的格式化评论，这是一个非常好的评论。但 SO 不允许在评论中添加标记。）

[Apple 的 NSCalendar 文档](http://developer.apple.com/library/IOs/#documentation/Cocoa/Reference/Foundation/Classes/NSCalendar_Class/Reference/NSCalendar.html)说：

> 此 API 表示的某些日历可能必须将其基本单位概念映射到年/月/周/日/……命名法。例如，由一年中的 4 个季度而不是 12 个月组成的日历使用月份单位来表示季度。

现在，这可能更清楚了，但我*认为*Apple 的意思是普通日历根本没有“季度”。它们只有年、月（其中 12 个）和日。但是您可以子类`NSCalendar`化（或创建一个新的实例`NSCalendar`？），这样一年只有 4 个月，然后将这些月称为“季度”，并且为了这些子类的利益，Apple 已经预定义了该`quarter`属性。这非常令人困惑；我敢打赌，Apple 的 WTFery 背后有一个好故事。

无论如何，我同意 applefreak 的观点，即无论如何你都应该处理年/月/日的日期，而不是与神话中的“季度”混为一谈。毕竟，考虑到第三季度比第一季度短，“添加”（比方说）到 3 月 31 日的两个季度*意味着什么？*（答案是否取决于这是否是闰年？）

如果你真正想要的是“每年 1 月 1 日、4 月 1 日、7 月 1 日和 10 月 1 日重复发生的事件”，那么你应该写成*.* 更别提“加三个月”了，这和“加四分之一”有同样的问题。

顺便说一句，这里的其他人也注意到了`quarter`WTF。例如：[我想在 NSDateComponents 类中获得四分之一的值](https://stackoverflow.com/questions/11618784/i-want-to-get-a-quarter-value-in-nsdatecomponents-class)

# java - 在java中计算图（网络）中的节点数

> ID：11699709
> 
> 赞同：1
> 
> 时间：2012-07-28T09:07:20.197
> 
> 标签：java

我正在用java编写一个程序来安排项目的活动，同时考虑到资源限制（类似于MS项目，但更基本）。当可用资源太少时，我使用优先级规则将活动按一定顺序排列（这样最重要的活动可以首先安排）。

我正在安排的优先级规则之一是“**最多后继者**”，它为具有最多“未安排”追随者的活动提供优先级。我附上了一张图片，让您了解我在说什么（这不是我正在使用的项目的图片，因为它太大了）。对于活动 A，后继者总数为 3（B、E、C）。

我有关于活动总数和所有活动的直接后继者的信息（以二进制形式，例如，如果 follower[2][1]==1，这意味着活动 2 是活动 1 的直接追随者），但我的主要问题是我不知道如何从追随者的追随者和追随者的追随者那里获取信息，而且......因为我不知道我的图表有多“深”。我已经在互联网上搜索了解决方案，但其中大多数似乎都适用于二叉树（如二叉搜索），而我的网络并非如此（有些活动有 3 个或更多关注者，有些活动是共享的，... ）。

有人可能有一个想法（或提示）我如何处理这个问题？提前非常感谢！（对不起，很长的帖子）

[网络示例](http://i.stack.imgur.com/vknQv.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T09:36:51.123

使用一组已计数的节点，最初为空。从根节点开始。对于当前节点的每个子节点，如果它不在集合中，则将其添加到集合中，递增计数器，然后应用相同的算法，使用相同的集合，并将子节点作为起始节点。

# ios - ios - 在运行时或通过测试用例完成的静态数据验证

> ID：11699716
> 
> 赞同：1
> 
> 时间：2012-07-28T09:08:28.667
> 
> 标签：ios, unit-testing, validation, testing

我有一个包含静态数据的 iOS 项目（大约 500 个条目）

此静态数据是在开发时添加的，并且此静态数据在运行时不会更改。有时我倾向于添加更多静态数据（硬编码）

我想执行一些验证（例如检查重复条目和其他健全性检查）。

我应该在程序执行期间进行此验证检查，还是应该将这些检查作为测试用例的一部分进行。

注意 - 我正在使用 XCode。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T09:46:04.677

假设部署后数据没有改变，并且您在发布应用程序之前运行单元测试（毕竟，如果您在发布应用程序之前没有运行单元测试，为什么还需要单元测试，对吧？）没有理由在已安装的应用程序中重复测试您的静态数据。检查单元测试中的数据就足够了：安装后数据会发生变化的唯一原因是如果您的应用程序被篡改，而 iOS 已经阻止了这种情况。

# twitter - twitter搜索地理编码api返回错误的结果

> ID：11699717
> 
> 赞同：0
> 
> 时间：2012-07-28T09:08:34.503
> 
> 标签：twitter, location, geocode

我正在使用地理编码搜索 api，但它返回的推文实际上并不是来自我所在的位置。API：[http](http://search.twitter.com/search.json?q=) ://search.twitter.com/search.json?q= *-filter:replies&geocode=12.9866089,77.5414802,5km&lang=en&exclude_replies=true&rpp=20&result_type=recent

我在印度尝试这个，但是它从印度尼西亚返回了一些结果。很多人已经讨论过这个错误的结果问题，但是在 REST API 的上下文中没有提出合适的解决方案。然而，我可以观察到错误结果的一件常见事情是“geo”标签为空。然而，它正确填充了正确的结果。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T18:34:24.397

这似乎是一个长期存在的问题，请参见此处：

[https://dev.twitter.com/discussions/2147](https://dev.twitter.com/discussions/2147)

您可以尝试在此处发布（或至少阅读该主题）以获取更多信息。

干杯

# javascript - 固定标题元素在窗口上移动减少

> ID：11699718
> 
> 赞同：2
> 
> 时间：2012-07-28T09:09:01.647
> 
> 标签：javascript, html, css

我的屏幕顶部有一个固定菜单，效果很好，但是当我让浏览器窗口变小时，而不是菜单中的所有元素都保持在原来的位置，它们都在菜单下方的下拉菜单中保持在打开窗户。我的想法是，当窗口变小时，我希望位置不会变得固定，因此它们保持在原位并可以滚动以查看其余内容。这可能吗？

这是菜单标题的html代码：

```
<div id="head_wrapper">
        <div id="head_company"></div><!---end head_company--->
        <div id="head_name"></div><!---end head_name---->

        <div id="head_search"></div><!---end head_search--->
        <div id="head_home" onclick="location.href='overview.php';"></div><!---end head_home--->
        <div id="head_settings" onclick="location.href='settings.php';"></div><!---end head_settings--->
        <div id="head_more"></div><!---end head_more--->

    </div><!---end head_wrapper---> 
```

这是它的CSS：

```
#wrapper #head_wrapper {
    background-image: url(../images/general/head_bar.png);
    background-repeat: repeat-x;
    float: left;
    height: 44px;
    min-width: 100%;
    width: auto !important;
    width: 100%;
    position: fixed;
    z-index: 10;
    margin-left: 208px;
}
#wrapper #head_wrapper #head_company {
    background-image: url(../images/general/navs/arion_co_button.png);
    background-repeat: no-repeat;
    float: left;
    height: 40px;
    width: 84px;
    cursor: pointer;
}
#wrapper #head_wrapper #head_company:hover {
    background-image: url(../images/general/hover/company_hover.png);
    background-repeat: no-repeat;
    float: left;
    height: 40px;
    width: 84px;
    cursor: pointer;
}
#wrapper #head_wrapper #head_name {
    background-image: url(../images/general/navs/arion_logo.png);
    background-repeat: no-repeat;
    float: left;
    height: 40px;
    width: 144px;
}
#wrapper #head_wrapper #head_more {
    background-image: url(../images/general/navs/head_more.png);
    background-repeat: no-repeat;
    float: left;
    height: 40px;
    width: 40px;
    cursor: pointer;

}
#wrapper #head_wrapper #head_more:hover {
    background-image: url(../images/general/hover/head_more_hover.png);
    background-repeat: no-repeat;
    float: left;
    height: 40px;
    width: 40px;
    cursor: pointer;
}
#wrapper #head_wrapper #head_settings {
    background-image: url(../images/general/navs/head_settings.png);
    background-repeat: no-repeat;
    float: left;
    height: 40px;
    width: 73px;
    cursor: pointer;
}
#wrapper #head_wrapper #head_settings:hover {
    background-image: url(../images/general/hover/head_settings_hover.png);
    background-repeat: no-repeat;
    float: left;
    height: 40px;
    width: 73px;
    cursor: pointer;
}
#wrapper #head_wrapper #head_home {
    background-image: url(../images/general/navs/head_home.png);
    background-repeat: no-repeat;
    float: left;
    height: 40px;
    width: 72px;
    cursor: pointer;
}
#wrapper #head_wrapper #head_home:hover {
    background-image: url(../images/general/hover/head_home_hover.png);
    background-repeat: no-repeat;
    float: left;
    height: 40px;
    width: 72px;
    cursor: pointer;
}
#wrapper #head_wrapper #head_search {
    background-image: url(../images/general/navs/search_bar.png);
    background-repeat: no-repeat;
    float: left;
    height: 40px;
    width: 327px;
    margin-right:15px;
    background-position-y: 5px;
    margin-left:31%;
} 
```

感谢您的任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T11:38:09.087

`#wrapper`将和`#head_wrapper`样式更改为：

```
width: 100%
min-width: 960px; /* set here a fixed value >= menu width */ 
```

演示： http: [//jsfiddle.net/uPe2L/9/](http://jsfiddle.net/uPe2L/9/)（为了清晰起见，我删除了边距和背景并添加了边框）

顺便说一句，您的代码错误且混乱。你应该使用一个`ul` `li`结构。

# javascript - asp经典脚本块中使用的Javascript变量

> ID：11699719
> 
> 赞同：0
> 
> 时间：2012-07-28T09:09:01.683
> 
> 标签：javascript, asp-classic

有人请帮忙。我想在我的脚本块上使用“requestID”javascript 变量并将其用于我的 sql 查询。但是当我这样做时，它不起作用。

```
requestID= aReqId[iSelReq];
<%
    Dim sqlQuery 
    Dim sqlQuery2
    Dim sRecords
    Dim sRecords2
    Dim iVersion1   
    Dim iFieldSeqId2
    Dim vValue
    Dim iNumofReqTypes
    Dim iLoop

    for iLoop=0 to iNumofReqTypes

        sqlQuery = "SELECT iVersion, iFieldSeqId FROM tblUsrAcntFieldsDtlMst, tblReqTypeMst WHERE tblReqTypeMst.ireqTypeID = tblUsrAcntFieldsDtlMst.iSysid and iSysID = '509' and iversion = (select max(iVersion) from tblUsrAcntFieldsDtlMst where iSysID = '509')  and cReqDisable = 'N' order by iFieldSeqId,ixCoordinate, iYCoordinate"

        sRecords = getRecords(sqlQuery,bResult)
        if bResult then
            iVersion1 = sRecords(0,iLoop)
            iFieldSeqId2 = sRecords(1,iLoop)
        end if 
        sqlQuery2 = "select vValues from tblNewUsrAcntReqDtlTxn where iReqID = " & requestID &"   and iSysID = " & SysID &" and iVersion = " & iVersion & " and iFieldSeqID = " & iFieldSeqId & ""
        bResult = false
        sRecords2 = getRecords(sqlQuery2,bResult)
        if bResult then
            vValue = sRecords2(0,0)
        end if 
    next                        

%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T00:17:30.810

您不能在服务器端代码中使用客户端变量。但是，您可以在客户端代码中使用服务器端变量，因为服务器端代码首先执行。

您可以在此处使用 Javascript 的 AJAX 调用您的 Classic ASP 页面，使用可变数据，获取数据库结果，然后将结果发布回页面。

**小费**

在您的示例中，您可以取消 sqlQuery 和 sqlQuery2 并只使用一个。sRecords 和 sRecords2 也一样，只有一个。无需为每个任务填写两个变量。在这样的小循环中不会有太大的不同，但是节省代码和资源是一种很好的做法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T09:23:37.260

我认为你在这里遗漏了一些基本的东西。我猜这是 .asp 页面的一部分。

Javascript 是*客户端*语言，这意味着 Javascript 代码在加载页面的*浏览器中解析和执行。*VB部分是*服务端*语言，所以是服务端执行的。客户端和服务器是两个不同的世界。您不能直接`requestID`在服务器端代码中使用该变量，因为它仅在客户端部分已知。

所以，如果你想知道那个变量的值，你必须先把它的值发送给服务器。有几种方法可以做到这一点...通过 AJAX 发布表单...然后服务器端必须有一个侦听器来接收该值并将其存储在当前会话中。然后你可以在你的 VB 代码中使用它。

# java - 标准的 Java 命名约定？

> ID：11699727
> 
> 赞同：-2
> 
> 时间：2012-07-28T09:10:09.050
> 
> 标签：java

我之前问过一个完全不同的主题的问题，然后才知道我不是在编写尊重 java 标准命名约定的代码。首先，我认为我命名变量或方法或类并不重要，但在阅读了一些评论后，我知道它确实如此。

那么，你们能告诉我标准的java命名约定是什么吗？我可能也需要一篇很好的文章或教程。

另外，您过去是否有过因为不使用标准 java 命名约定而面临问题的经历？

还有，我需要多长时间才能记住这些？

你如何判断某人是否遵守标准的 java 命名约定？

维护代码有多重要？

还有很多其他问题，但我会留到以后。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T09:22:29.960

一个非常简短的解释：

*   类名：（`MyClass`每个新词都以大写字母开头）
*   函数名：（`void myFunction()`以一个小的开头，每个新词都大写）
*   数据成员：（`int myVariable`同函数）
*   静态/最终成员：（`static final int MY_STATIC_STUFF`所有字符都是大写）

大括号有一个很大的问题。有人喜欢这样使用它：

```
if() {
..
} 
```

有人喜欢这样使用它：

```
if()
{
..
} 
```

我认为遵循一些约定非常重要，因为如果你不这样做，长代码很快就会变得不可读。值得庆幸的是，IDE 喜欢`NetBeans`并`Eclipse`帮助开发人员使其更容易。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-28T09:13:31.877

Java 命名约定的最终来源应该是[Java 语言规范，第 6 章，第 1 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html#jls-6.1)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-28T09:12:12.097

参见例如[http://www.oracle.com/technetwork/java/javase/documentation/codeconvtoc-136057.html](http://www.oracle.com/technetwork/java/javase/documentation/codeconvtoc-136057.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T09:18:02.017

只有在共享代码、与他人开发时才应考虑标准命名约定……只要您觉得它是有条理的，就不必牢记它。如果您想向某人展示您的代码，这里有一个关于如何正确操作的链接：http: [//java.about.com/od/javasyntax/a/nameconventions.htm](http://java.about.com/od/javasyntax/a/nameconventions.htm)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-28T10:37:28.363

这些是java中常见的命名约定

包名：mypackage 类名：NewClass 接口名：NewInterface 函数名：void myFunction() 实例成员：int myVariable 静态/最终成员：static final int MAX_HEIGHT

# apache - 为什么 .htaccess 行为异常？传递脚本名称本身而不是给定的 GET 变量

> ID：11699734
> 
> 赞同：1
> 
> 时间：2012-07-28T09:11:43.263
> 
> 标签：apache, .htaccess

我的 htdocs 中有这个设置：

```
htdocs
htdocs/somedir
htdocs/somedir/process.php
htdocs/somedir/.htaccess 
```

这是 .htaccess 代码：

```
RewriteEngine on
RewriteRule ^([^/]*)$ process.php?var=$1 [L] 
```

我相信这条规则告诉 apache 从最右边的字母开始并继续存储它，除非它遇到一个`/`So, in URL `http://127.0.0.1/somedir/foo`, `$1`should be `foo`。对？

但是当我去这个 URL:`http://127.0.0.1/somedir/foo`时，一个 print_r($_GET) in`process.php`输出这个：

```
Array
(
    [var] => process.php
) 
```

而我希望它应该这样说：

```
Array
(
    [var] => foo
) 
```

那么为什么是`var`的价值是`process.php`而不是`foo`呢？如何编写此重写规则以`var`获取值`foo`？

**旁注：**无论我是否将此`process.php`&移动`.htaccess`到根目录或任何第二/第三/第四级，所有适当的 URL 都会产生相同的结果：

像：

```
http://127.0.0.1/foo             //process.php & .htaccess in root
http://127.0.0.1/somedir/foo     //process.php & .htaccess in htdocs/somedir
http://127.0.0.1/somedir/2nd/foo //process.php & .htaccess in htdocs/somedir/2nd 
```

**更新01：**

我注意到`$_SERVER["REDIRECT_QUERY_STRING"]`等于`var=foo`，而`$_SERVER["QUERY_STRING"]`是`var=process.php`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T09:16:52.907

乍一看，我会说您在重写规则中的正则表达式有问题。尝试从

```
RewriteEngine on
RewriteRule ^([^/]*)$ process.php?var=$1 [L] 
```

到

```
RewriteEngine on
RewriteRule ([^/]+)$ process.php?var=$1 [L] 
```

如果您将它锚定在字符串的开头（“^”），则它无法匹配，因为字符串中有一个“/”。

* * *

在每个目录级别上使用 RewriteRules 稍微复杂一些。REQUEST_URI 可能不是您所期望的，因此某些规则会产生意想不到的结果。但是，在 RewriteConditions 中引用匹配项时，您通常可以解决问题。在这种情况下：

```
RewriteEngine on
RewriteCond %{THE_REQUEST} "([^/]+) HTTP"   
RewriteRule ^ process.php?var=%1 [L] 
```

（注意规则中的 '%' 而不是 '$'）

# c++ - 有没有办法使用基于模板类型的值初始化变量

> ID：11699735
> 
> 赞同：0
> 
> 时间：2012-07-28T09:11:49.273
> 
> 标签：c++, template-specialization

我有一个模板类。该类有一个私有成员变量，我喜欢将其预设为某个值，该值因每种模板类型而异。

我在考虑不同类型的不同构造函数，但由于构造函数没有参数，我不知道该怎么做。

有可能吗？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T09:19:47.773

使用[特征](http://en.wikipedia.org/wiki/Traits_class)模板并使用该值对其进行专门化。就像是：

```
template <typename T, typename Traits = MyTraits<T> >
class MyClass {
public:
  int Foo ()
  {
   return Traits::Value;
  }
};

template <>
class MyTraits<SomeClass>
{
public:
   static int Value = 1;
};

template <>
class MyTraits<AnotherClass>
{
public:
   static int Value = 2;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T09:16:27.497

您可以通过对类型的专门化来做到这一点，最简单的形式是：

```
#include <iostream>

template <typename T>
struct make {
  static int value() {
    return -1; // default
  }
};

template <>
struct make<int> {
  static int value() {
    return 1; 
  }
};

template <>
struct make<double> {
  static int value() {
    return 2; 
  }
};

template <typename T>
struct foo {
  const int val;
  foo() : val(make<T>::value()) {}
};

int main() {
  std::cout << foo<int>().val << ", " << foo<double>().val << "\n";
} 
```

但您也可以将其安排为重载：

```
#include <iostream>

int value(void *) {
  return -1; // default
}

int value(double *) {
  return 2;
}

int value (int *) {
  return 1;
}

template <typename T>
struct foo {
  const int val;
  foo() : val(value(static_cast<T*>(nullptr))) {}
};

int main() {
  std::cout << foo<int>().val << ", " << foo<double>().val << "\n";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T09:18:03.870

你可以把从模板参数到值的映射放到一个辅助类中，给你这样的东西：

```
template<typename T> struct foo_helper;
template<> struct foo_helper<int>   { static int getValue() {return 1; } };
template<> struct foo_helper<float> { static int getValue() {return 2; } };
....

template<typename T> class foo 
{
   int m;
   foo():m(foo_helper<T>::getValue()){}

}; 
```

# c# - 是真的吗 - 垃圾收集器不会收集结构类型的对象

> ID：11699740
> 
> 赞同：1
> 
> 时间：2012-07-28T09:12:17.713
> 
> 标签：c#, asp.net, .net, oop, garbage-collection

昨天，我们讨论了垃圾收集。

讨论过使用Classes创建的对象被Garbage collector回收，但是使用struct创建的对象不能被GC回收

我知道结构使用堆栈，类使用堆。

但是，我猜 GC 永远不会只收集非托管代码。这是否意味着结构类型是非托管代码。（我不这么认为）。

还是 GC 只处理堆而不处理堆栈？

如果是，那么 int 数据类型呢？int 是结构而不是类。那么如果我们定义了int类型的对象，是不是被GC管理了呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-28T09:16:25.170

如果无法从 GC 根访问它们，GC 将收集任何托管对象（并且结构*是托管对象）。*

> 但如果它是使用 struct 创建的，它不能被 GC 收集。

你被告知的内容是不正确的。托管对象的创建方式无关紧要 - 如果不再引用它，它将最终被收集。

> 或者这是否意味着 GC 只处理堆而不处理堆栈？

GC 负责对象图 - 如果任何 GC 根都可以访问对象，则不会收集它们，如果不是，则最终会收集它们。堆栈和堆不相关。

> 那么如果我们定义了int类型的对象，是不是被GC管理了呢？

`int`(AKA `System.Int32`) 是一个托管对象 - 一个结构。例如，如果您`int`在类中声明一个字段并且该类超出范围，`int`则最终将被 GC 收集。

* * *

正如[@leppie](https://stackoverflow.com/users/15541/leppie) [评论](https://stackoverflow.com/users/15541/leppie)的那样，在许多情况下，结构将被放置在堆栈上，当堆栈被弹出时，它们将不再存在——在这种情况下，不涉及 GC（也不需要）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T09:23:34.657

> 如果它是使用结构创建的，它不能被 GC 收集。

不对。如果它没有被引用，它将最终被收集。

> 我知道结构使用堆栈，类使用堆。

这是一个普遍的误解。有关详细信息，请参阅[此 Lippert 的文章](http://blogs.msdn.com/b/ericlippert/archive/2010/09/30/the-truth-about-value-types.aspx)。

我认为您所引用的想法是， GC*通常*不会收集位于堆栈上的任何数据，因为一旦程序执行离开其范围，堆栈就会被销毁。所以这意味着任何直接放入堆栈的数据（这*可能*意味着值类型并且*应该*意味着对所有其他数据的引用）将被自动清除，无需使用 GC。GC 的工作是独立于其（数据）类型清除*堆数据。*如果它没有被引用 - 它被收集。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T09:53:57.543

> But, I guess GC never collects unmanaged codes only. So is that means the Structure types are unmanaged code. (I don't think so).

I don't understand what you are asking here.

> OR is that means the GC take care of Heap only not Stack?

Yes and No. GC takes care of memory required for instances of reference types (always created on the managed heap). You can view the "stack" as a piece of memory associated with current thread of execution. The stack can contain handles to reference types allocated on the managed heap. In this case the GC "cares": it will not collect the memory from the managed heap for these instances until these references on the stack exist. The stack can also contain instances (not references to!) of value types, in which case the GC does not care...

> If yes, then what about int data type. int is struct not class. So if we defined the object of type int, isn't it managed by GC?

This question is a bit misleading. Let's say you "allocate" an instance of an `int` on the stack:

```
void Foo()
{
    // ...
    int tTmp;
    //...
} 
```

In this case the GC does not care about `tTmp`. It is placed on the current thread's stack and removed, if it gets out of scope. But if you do this:

```
void Foo()
{
    //...
    var tTmp = new int [] {
        1, 2, 3, 4
    };
    //...
} 
```

then the array of 4 integers is created on the managed heap and GC takes care of `tTmp`. It also "indirectly" takes care of the memory required for the contents of the array, which happen to be the space required for the four integers...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T09:56:27.413

Let's see what the **.NET standard** (ECMA-334) **says**

> Value types differ from reference types in that variables of the value types directly contain their data, whereas variables of the reference types store references to their data, the latter being known as objects. With reference types, it is possible for two variables to reference the same object, and thus possible for operations on one variable to affect the object referenced by the other variable. With value types, the variables each have their own copy of the data, and it is not possible for operations on one to affect the other.

In other words, there is no reason for garbage collector to care about value types, because they clean-up after themselves (when they go out of scope), they contain their own data. GC is for clean-up of shared (references) data.

Note that not only structures are value types:

> A value type is either a struct type or an enumeration type. C# provides a set of predefined struct types called the simple types. The simple types are identified through reserved words.

So e.g. "int" type is so called "simple type", value type. It is bit different from other structures, because operations like +-*/ could end up being compiled into primitive operations, not function calls.

# android - Android 版 PhoneGap 截图插件

> ID：11699741
> 
> 赞同：2
> 
> 时间：2012-07-28T09:12:32.940
> 
> 标签：android, cordova, screenshot

我已按照以下链接的步骤使用 phonegap 和 android 捕获屏幕截图，但我现在不清楚应该调用哪个函数。

[https://github.com/phonegap/phonegap-plugins/blob/master/Android/Screenshot/README.md](https://github.com/phonegap/phonegap-plugins/blob/master/Android/Screenshot/README.md)

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T20:22:04.597

像这样试试

**Javascript**

```
$('#save').click(function(){
window.plugins.screenshot.saveScreenshot();
}); 
```

* * *

**html**

```
 <button id="Save">Save</button> 
```

# sql - SQL Server 2008 - 计算平均值。定时

> ID：11699743
> 
> 赞同：3
> 
> 时间：2012-07-28T09:13:10.320
> 
> 标签：sql, sql-server-2008

我有一个查询

```
select
  *,
  right(
    convert(varchar, cast(JOB_DONE_time-JOB_send_time as datetime), 121),
    12
  ) [TimeTaken]
from dbo.insert_data
order by job_id desc 
```

这个查询的结果就像

```
JOB_ID     JOB_DONE_TIME            JOB_SEND_TIME            TimeTaken
---------  -----------------------  -----------------------  ------------
001-99900  2011-12-28 13:36:57.860  2011-12-28 13:36:57.593  00:00:00.267
001-99800  2011-12-28 13:36:57.843  2011-12-28 13:36:57.593  00:00:00.250
001-99700  2011-12-28 13:36:57.687  2011-12-28 13:36:57.547  00:00:00.140
001-99600  2011-12-28 13:36:57.593  2011-12-28 13:36:57.547  00:00:00.047
001-99500  2011-12-28 13:36:57.563  2011-12-28 13:36:57.437  00:00:00.127
001-99400  2011-12-28 13:36:57.547  2011-12-28 13:36:57.437  00:00:00.110
001-99300  2011-12-28 13:36:57.483  2011-12-28 13:36:57.377  00:00:00.107
001-99200  2011-12-28 13:36:57.437  2011-12-28 13:36:57.377  00:00:00.060
001-99100  2011-12-28 13:36:57.407  2011-12-28 13:36:57.187  00:00:00.220
001-99000  2011-12-28 13:36:57.360  2011-12-28 13:36:57.187  00:00:00.173
001-9900   2011-12-28 13:32:22.657  2011-12-28 13:32:22.500  00:00:00.127 
```

通过这个查询，我得到了`TimeTaken`专栏。现在我想计算加法和平均值。的列`timetaken`。我尝试过使用`SUM()`功能，但它给了我错误：

> 消息 8117，级别 16，状态 1，行 1 操作数数据类型 varchar 对于求和运算符无效。

怎么计算？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T14:39:36.720

正如您已经被告知的那样，问题与您尝试应用`AVG()`或`SUM()`应用于字符串列的事实有关，而实际上您只能在数字列上使用这些函数。

作为一个非常特定于 SQL Server 的解决方案，您可以暂时将结果转换`JOB_DONE_time - JOB_send_time`为`float`、计算`AVG()`和/或`SUM()`然后将结果转换回`datetime`，然后转换为`varchar`，然后提取最后 12 个字符，就像您现在对非聚合结果所做的那样的减法。

这是我的意思的一个例子：

```
SELECT
  JOB_ID,
  JOB_DONE_TIME,
  JOB_SEND_TIME,
  TimeTaken      = RIGHT(CONVERT(varchar(30), CAST(    TimeTakenFP          AS datetime), 121), 12),
  AvgTimeTaken   = RIGHT(CONVERT(varchar(30), CAST(AVG(TimeTakenFP) OVER () AS datetime), 121), 12),
  TotalTimeTaken = RIGHT(CONVERT(varchar(30), CAST(SUM(TimeTakenFP) OVER () AS datetime), 121), 12)
FROM (
  SELECT
    *,
    TimeTakenFP = CAST(JOB_DONE_TIME - JOB_SEND_TIME AS float)
  FROM insert_data
) s
; 
```

对于您的示例数据，上述查询返回以下结果集：

```
JOB_ID JOB_DONE_TIME JOB_SEND_TIME TimeTaken AvgTimeTaken TotalTimeTaken
--------- ------------------------ ------------------ ----- ------------ ------------ --------------
001-99900 2011-12-28 13:36:57.860 2011-12-28 13:36:57.593 00:00:00.267 00:00:00.150 00:00:01.657
001-99800 2011-12-28 13:36:57.843 2011-12-28 13:36:57.593 00:00:00.250 00:00:00.150 00:00:01.657
001-99700 2011-12-28 13:36:57.687 2011-12-28 13:36:57.547 00:00:00.140 00:00:00.150 00:00:01.657
001-99600 2011-12-28 13:36:57.593 2011-12-28 13:36:57.547 00:00:00.047 00:00:00.150 00:00:01.657
001-99500 2011-12-28 13:36:57.563 2011-12-28 13:36:57.437 00:00:00.127 00:00:00.150 00:00:01.657
001-99400 2011-12-28 13:36:57.547 2011-12-28 13:36:57.437 00:00:00.110 00:00:00.150 00:00:01.657
001-99300 2011-12-28 13:36:57.483 2011-12-28 13:36:57.377 00:00:00.107 00:00:00.150 00:00:01.657
001-99200 2011-12-28 13:36:57.437 2011-12-28 13:36:57.377 00:00:00.060 00:00:00.150 00:00:01.657
001-99100 2011-12-28 13:36:57.407 2011-12-28 13:36:57.187 00:00:00.220 00:00:00.150 00:00:01.657
001-99000 2011-12-28 13:36:57.360 2011-12-28 13:36:57.187 00:00:00.170 00:00:00.150 00:00:01.657
001-9900 2011-12-28 13:32:22.657 2011-12-28 13:32:22.500 00:00:00.157 00:00:00.150 00:00:01.657

```

此查询使用[*窗口*](http://msdn.microsoft.com/en-us/library/ms189461%28v=sql.100%29.aspx "OVER 子句 (Transact-SQL)")聚合函数计算聚合结果，以便您可以看到聚合和非聚合结果。我只使用了窗口函数，因为我想向您展示如何将显示时间的方法应用于非聚合结果和聚合结果，以便您可以看到表达式的哪一部分根据您需要的结果类型发生变化转换为时间表示。实际上，如果这是您的要求，您可以使用“正常”汇总结果（如有必要，还可以进行分组）。

您可以[在 SQL Fiddle](http://sqlfiddle.com/#!3/bcacc/8)上进行查询的“实时”演示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T09:22:12.967

在 sql 中使用 avg 函数，这将为您提供列的 avg

```
SELECT AVG(column name) FROM tabelname; 
```

和这样的总和使用

```
 SELECT sum(column name)  FROM tabelname; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T09:36:57.817

您可以确定完成和发送时间列的日期差异（以毫秒为单位），然后对这些结果进行平均或求和

```
select sum(datediff(ms, JOB_send_time, JOB_DONE_time)) as SUM_Timing
,      avg(datediff(ms, JOB_send_time, JOB_DONE_time)) as AVG_Timing
from   dbo.insert_data 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T09:37:44.540

我认为（抱歉，现在无法试用）您需要 DATEDIFF。

在你的情况下：

```
select avg(DATEDIFF(Millisecond, JOB_DONE_time, JOB_send_time)) from dbo.insert_data 
```

# android - Android上的人脸识别

> ID：11699744
> 
> 赞同：15
> 
> 时间：2012-07-28T09:13:11.537
> 
> 标签：android, opencv, javacv, face-recognition

我正在尝试在 Android 上开发人脸识别应用程序，并且由于我不想在项目中使用 NDK（只是没有时间切换），因此我坚持使用 Java 开发整个应用程序我遇到了一些问题：

1.  似乎 Contrib 模块不包含在 OpenCV 2.4.2 中。无论如何在项目中使用它？

2.  我尝试使用 JavaCV 来使用 Contrib 模块的“FaceRecognizer”类。有两个类可用，称为“FaceRecognizer”和“FaceRecognizerPtr”。有人知道这两者有什么区别吗？

3.  上面提到的类有一个名为“Train”的方法，它（在 C++ 中）接收两个类型为“Mat & Integer”（`model->train(images,labels) & train(Vector<mat> theImages, Vector<int> theLabels`）的向量。我尝试`ArrayList<mat> & ArrayList<integer>`在 Java 中传递它们和向量，但似乎该方法明确接受了我不确定如何获取的“CvArr”数据类型......这是错误：

> opencv_contrib.FaceRecognizer 类型中的方法 train(opencv_core.CvArr, opencv_core.CvArr) 不适用于参数 (ArrayList, ArrayList)

有谁知道如何将我的 ArrayList 更改为 CvArr ？！

这是我的第一篇文章，我不确定是在一篇文章中提出所有三个问题还是在三个文章中提出所有三个问题，因此对给您带来的不便深表歉意……如果您需要有关该项目的任何其他信息，请随时提出。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-28T11:35:56.593

## 更新

以下文章由[Petter Christian Bjelland](http://pcbje.com/)撰写，因此所有功劳归他所有。我把它贴在这里，因为他的博客目前似乎处于维护模式，但我认为值得分享。

### 使用 JavaCV 进行人脸识别（来自[http://pcbje.com](http://pcbje.com)）

我找不到任何关于如何使用 OpenCV 和 Java 进行人脸识别的教程，所以我决定在这里分享一个可行的解决方案。该解决方案在当前形式下效率非常低，因为每次运行都会构建训练模型，但它显示了使其工作所需的内容。

下面的类有两个参数：包含训练人脸的目录的路径和要分类的图像的路径。并非所有图像都必须具有相同的大小，并且必须从原始图像中裁剪出人脸（如果您还没有进行人脸检测，请看这里）。

为简单起见，该课程还要求训练图像具有文件名格式：`<label>-rest_of_filename.png`. 例如：

```
1-jon_doe_1.png
1-jon_doe_2.png
2-jane_doe_1.png
2-jane_doe_2.png

```

... 等等。

编码：

```
import com.googlecode.javacv.cpp.opencv_core;
import static com.googlecode.javacv.cpp.opencv_highgui.*;
import static com.googlecode.javacv.cpp.opencv_core.*;
import static com.googlecode.javacv.cpp.opencv_imgproc.*;
import static com.googlecode.javacv.cpp.opencv_contrib.*;
import java.io.File;
import java.io.FilenameFilter;

public class OpenCVFaceRecognizer {
  public static void main(String[] args) {
    String trainingDir = args[0];
    IplImage testImage = cvLoadImage(args[1]);

    File root = new File(trainingDir);

    FilenameFilter pngFilter = new FilenameFilter() {
      public boolean accept(File dir, String name) {
        return name.toLowerCase().endsWith(".png");
      }
    };

    File[] imageFiles = root.listFiles(pngFilter);

    MatVector images = new MatVector(imageFiles.length);

    int[] labels = new int[imageFiles.length];

    int counter = 0;
    int label;

    IplImage img;
    IplImage grayImg;

    for (File image : imageFiles) {
      // Get image and label:
      img = cvLoadImage(image.getAbsolutePath());
      label = Integer.parseInt(image.getName().split("\\-")[0]);
      // Convert image to grayscale:
      grayImg = IplImage.create(img.width(), img.height(), IPL_DEPTH_8U, 1);
      cvCvtColor(img, grayImg, CV_BGR2GRAY);
      // Append it in the image list:
      images.put(counter, grayImg);
      // And in the labels list:
      labels[counter] = label;
      // Increase counter for next image:
      counter++;
    }

    FaceRecognizer faceRecognizer = createFisherFaceRecognizer();
    // FaceRecognizer faceRecognizer = createEigenFaceRecognizer();
    // FaceRecognizer faceRecognizer = createLBPHFaceRecognizer()

    faceRecognizer.train(images, labels);

    // Load the test image:
    IplImage greyTestImage = IplImage.create(testImage.width(), testImage.height(), IPL_DEPTH_8U, 1);
    cvCvtColor(testImage, greyTestImage, CV_BGR2GRAY);

    // And get a prediction:
    int predictedLabel = faceRecognizer.predict(greyTestImage);
    System.out.println("Predicted label: " + predictedLabel);
  }
} 
```

该类需要 OpenCV Java 接口。如果您使用的是 Maven，则可以使用以下 pom.xml 检索所需的库：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>com.pcbje</groupId>
  <artifactId>opencvfacerecognizer</artifactId>
  <version>0.1-SNAPSHOT</version>
  <packaging>jar</packaging>

  <name>opencvfacerecognizer</name>
  <url>http://pcbje.com</url>

  <dependencies>
    <dependency>
      <groupId>com.googlecode.javacv</groupId>
      <artifactId>javacv</artifactId>
      <version>0.3</version>
    </dependency>

    <!-- For Linux x64 environments -->
    <dependency>
      <groupId>com.googlecode.javacv</groupId>
      <artifactId>javacv</artifactId>
      <classifier>linux-x86_64</classifier>
      <version>0.3</version>
    </dependency>    

    <!-- For OSX environments -->
    <dependency>
      <groupId>com.googlecode.javacv</groupId>
      <artifactId>javacv</artifactId>
      <classifier>macosx-x86_64</classifier>
      <version>0.3</version>
    </dependency>
  </dependencies>

  <repositories>
    <repository>
      <id>javacv</id>
      <name>JavaCV</name>
      <url>http://maven2.javacv.googlecode.com/git/</url>
    </repository>
  </repositories>
</project> 
```

## 原帖

引用我对[http://answers.opencv.org/question/865/the-contrib-module-problem](http://answers.opencv.org/question/865/the-contrib-module-problem)的回复。

在没有使用过 javacv 的情况下，让我们看看只看接口可以走多远！该项目位于 googlecode 上，可以轻松浏览代码：[http](http://code.google.com/p/javacv) ://code.google.com/p/javacv 。

首先看看是如何`cv::FaceRecognizer`被包装的（[opencv_contrib.java，写这篇文章时的第 845 行](http://code.google.com/p/javacv/source/browse/src/main/java/com/googlecode/javacv/cpp/opencv_contrib.java#845)）：

```
@Namespace("cv") public static class FaceRecognizer extends Algorithm {
    static { Loader.load(); }
    public FaceRecognizer() { }
    public FaceRecognizer(Pointer p) { super(p); }

    public /*abstract*/ native void train(@ByRef MatVector src, @Adapter("ArrayAdapter") CvArr labels);
    public /*abstract*/ native int predict(@Adapter("ArrayAdapter") CvArr src);
    public /*abstract*/ native void predict(@Adapter("ArrayAdapter") CvArr src, @ByRef int[] label, @ByRef double[] dist);
    public native void save(String filename);
    public native void load(String filename);
    public native void save(@Adapter("FileStorageAdapter") CvFileStorage fs);
    public native void load(@Adapter("FileStorageAdapter") CvFileStorage fs);
} 
```

啊哈，所以你需要`MatVector`为图像传递一个！`CvArr`您可以在（一行或一列）中传递标签。`MatVector`定义在opencv_core第[4629 行（在撰写本文时）](http://code.google.com/p/javacv/source/browse/src/main/java/com/googlecode/javacv/cpp/opencv_core.java#4629)，它看起来像这样：

```
public static class MatVector extends Pointer {
    static { load(); }
    public MatVector()       { allocate();  }
    public MatVector(long n) { allocate(n); }
    public MatVector(Pointer p) { super(p); }
    private native void allocate();
    private native void allocate(@Cast("size_t") long n);

    public native long size();
    public native void resize(@Cast("size_t") long n);

    @Index @ValueGetter public native @Adapter("MatAdapter") CvMat getCvMat(@Cast("size_t") long i);
    @Index @ValueGetter public native @Adapter("MatAdapter") CvMatND getCvMatND(@Cast("size_t") long i);
    @Index @ValueGetter public native @Adapter("MatAdapter") IplImage getIplImage(@Cast("size_t") long i);
    @Index @ValueSetter public native MatVector put(@Cast("size_t") long i, @Adapter("MatAdapter") CvArr value);
} 
```

再次仅通过查看代码，我想它可以像这样使用：

```
int numberOfImages = 10;
// Allocate some memory:
MatVector images = new MatVector(numberOfImages);
// Then fill the MatVector, you probably want to do something useful instead:
for(int idx = 0; idx < numberOfImages; idx++){
   // Load an image:
   CvArr image = cvLoadImage("/path/to/your/image");
   // And put it into the MatVector:
   images.put(idx, image);
} 
```

您可能想为自己编写一个从 Java 转换为 a 的方法`ArrayList`（`MatVector`如果 javacv 中尚不存在这样的函数）。

现在回答你的第二个问题。`FaceRecognizer`相当于`cv::FaceRecognizer`。本机 OpenCV C++ 类返回 a `cv::Ptr<cv::FaceRecognizer>`，它是指向 a 的（智能）指针`cv::FaceRecognizer`。这也必须包装。在这里看到一个模式？

现在的界面是`FaceRecognizerPtr`这样的：

```
@Name("cv::Ptr<cv::FaceRecognizer>")
public static class FaceRecognizerPtr extends Pointer {
    static { load(); }
    public FaceRecognizerPtr()       { allocate();  }
    public FaceRecognizerPtr(Pointer p) { super(p); }
    private native void allocate();

    public native FaceRecognizer get();
    public native FaceRecognizerPtr put(FaceRecognizer value);
} 
```

所以你可以`FaceRecognizer`从这门课中得到一个或投入`FaceRecognizer`。您应该只关心, 因为指针由创建具体算法`get()`的方法填充：`FaceRecognizer`

```
@Namespace("cv") public static native @ByVal FaceRecognizerPtr createEigenFaceRecognizer(int num_components/*=0*/, double threshold/*=DBL_MAX*/);
@Namespace("cv") public static native @ByVal FaceRecognizerPtr createFisherFaceRecognizer(int num_components/*=0*/, double threshold/*=DBL_MAX*/);
@Namespace("cv") public static native @ByVal FaceRecognizerPtr createLBPHFaceRecognizer(int radius/*=1*/,
        int neighbors/*=8*/, int grid_x/*=8*/, int grid_y/*=8*/, double threshold/*=DBL_MAX*/); 
```

因此，一旦您拥有 FaceRecognizerPtr，您就可以执行以下操作：

```
// Holds your training data and labels:
MatVector images;
CvArr labels;
// Do something with the images and labels... Probably fill them?
// ...
// Then get a Pointer to a FaceRecognizer (FaceRecognizerPtr).
// Java doesn't have default parameters, so you have to add some yourself,
// if you pass 0 as num_components to the EigenFaceRecognizer, the number of
// components is determined by the data, for the threshold use the maximum possible
// value if you don't want one. I don't know the constant in Java:
FaceRecognizerPtr model = createEigenFaceRecognizer(0, 10000);
// Then train it. See how I call get(), to get the FaceRecognizer inside the FaceRecognizerPtr:
model.get().train(images, labels); 
```

这会学习一个特征脸模型。就是这样！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-17T21:13:48.860

我使用opencv制作了一个用于人脸识别的android应用程序。为了获得良好的识别，您需要更好的检测，您可以从以下网址查看：[https](https://github.com/yaylas/AndroidFaceRecognizer) ://github.com/yaylas/AndroidFaceRecognizer 我希望它有所帮助。

# php - 查询大型mysql数据库

> ID：11699755
> 
> 赞同：0
> 
> 时间：2012-07-28T09:15:27.353
> 
> 标签：php, mysql, database

我有一个脚本，它应该通过 mysql 数据库运行并在案例上执行某个“测试”。简化后的数据库包含代表人们旅行的记录。每条记录都是一次旅行。但我只想使用往返旅行。所以我需要搜索数据库并将两次旅行相互匹配；到某个地点的旅行和从某个地点出发的旅行。

该脚本工作正常。问题是数据库包含超过 600.000 个案例。我知道如果可能的话应该避免这种情况。但是为了这个脚本的目的和以后使用数据库记录，一切都必须结合在一起。

在我的 iMac 上使用 MAMP 执行脚本时，现在执行该脚本需要几个小时。当然，我确保它可以使用大量内存等。

我的问题是如何加快速度，最好的方法是什么？

这是我现在拥有的脚本：

```
$table          = $_GET['table'];                  
$output = '';                  
//Select all cases that has not been marked as invalid in previous test         
$query = "SELECT persid, ritid, vertpc, aankpc, jaar, maand, dag FROM MON.$table WHERE reasonInvalid != '1' OR reasonInvalid IS NULL";         
$result = mysql_query($query)or die($output .= mysql_error());                    
$totalCountValid = '';         
$totalCountInvalid = '';         
$totalCount = '';                  
//For each record:         
while($row = mysql_fetch_array($result)){                 
    $totalCount += 1;                 
    //Do another query, get all the rows for this persons ID and that share postal codes. Postal codes revert between the two trips                 
   $persid                 = $row['persid'];                 
   $ritid                  = $row['ritid'];                 
   $pcD                    = $row['vertpc'];                 
   $pcA                    = $row['aankpc'];                 
   $jaar                   = $row['jaar'];                 
   $maand                  = $row['maand'];                 
   $dag                    = $row['dag'];         
   $thecountquery  = "SELECT * FROM MON.$table WHERE persid=$persid AND vertpc=$pcA AND aankpc=$pcD AND jaar = $jaar AND maand = $maand AND dag = $dag";                  
   $thecount               = mysql_num_rows(mysql_query($thecountquery));                 
   if($thecount >= 1){                         
      //No worries, this person ID has multiple trips attached                            
      $totalCountValid += 1;                 
   }else{                         
      //Ow my, the case is invalid!                         
     $totalCountInvalid += 1;                         
     //Call the markInvalid from functions.php                          
     $totalCountValid += 1;                          
     markInvalid($table, '2', 'ritid', $ritid);                 
   }         
}                  
//Echo the result         
$output .= 'Total cases: '.$totalCount.'<br>Valid: '.$totalCountValid.'<br>Invalid: '.$totalCountInvalid;                  echo $output; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T09:46:51.380

您的基本问题是您正在执行以下操作。

1）获取所有未标记为无效的案例。
2）循环遍历步骤1）中获得的案例。

您可以轻松地将针对 1) 和 2) 编写的查询组合在一个查询中并循环遍历数据。这会加快一些事情。

还要记住以下提示。

1）选择所有列根本不是一件好事。数据通过网络遍历需要大量时间。我建议用您真正需要的所有列替换通配符。

`SELECT * <ALL_COlumns>`

2) 使用索引——谨慎、有效和适当。了解何时使用它们以及何时不使用它们。

3）如果可以的话，使用视图。
4) 使 MySQL`slow query log`能够了解您需要处理和优化哪些查询。

```
log_slow_queries  = /var/log/mysql/mysql-slow.log
long_query_time  = 1
log-queries-not-using-indexes 
```

5）使用正确的 MySQL 字段类型和存储引擎（非常非常重要）
6）使用 EXPLAIN 分析您的查询 - EXPLAIN 在 MySQL 中是一个有用的命令，它可以为您提供一些关于如何运行查询的详细信息，使用什么索引，它需要检查多少行以及是否需要进行文件排序、临时表和其他你想要避免的讨厌的事情。

祝你好运。

# javascript - 引导轮播转换错误 - 未显示错误

> ID：11699756
> 
> 赞同：2
> 
> 时间：2012-07-28T09:15:28.080
> 
> 标签：javascript, joomla, twitter-bootstrap, carousel

我在这里有一个轮播：http: [//www.joostrap.com/extensions/bootstrap-carousel-module](http://www.joostrap.com/extensions/bootstrap-carousel-module)

它不是向左滑动，而是向上滑动、消失，然后再次向下滑动（镀铬）。

有任何想法吗？（我不是真正的 JavaScript 人）

# playframework - EBean 没有进行更新！它正在尝试插入并失败

> ID：11699757
> 
> 赞同：4
> 
> 时间：2012-07-28T09:15:33.137
> 
> 标签：playframework, playframework-2.0, ebean

我有一个像这样的简单用户模型：

```
package models;

import java.util.*;
import javax.persistence.*;
import play.db.ebean.*;

@Entity
public class User extends Model {

        @Id
    public Long id;
    public String userName;
    public String email;
    public String workPlace;
    public Date birthDate;
    @Version
    public Long version;

    public static Finder<Long,User> find = new Finder<Long,User>(
        Long.class, User.class
    );

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public String getUserName() {
        return userName;
    }

    public void setUserName(String userName) {
        this.userName = userName;
    }

    public String getEmail() {
        return email;
    }

    public void setEmail(String email) {
        this.email = email;
    }

    public String getWorkPlace() {
        return workPlace;
    }

    public void setWorkPlace(String workPlace) {
        this.workPlace = workPlace;
    }

    public Date getBirthDate() {
        return birthDate;
    }

    public void setBirthDate(Date birthDate) {
        this.birthDate = birthDate;
    }

    public Long getVersion() {
        return version;
    }

    public void setVersion(Long version) {
        this.version = version;
    }
} 
```

在 MySql 中已经有一条 id=1, version=1 的记录

我创建一个具有相同 id+version 的新模型，更改用户名

然后我尝试 save() 方法

它失败了：

```
javax.persistence.PersistenceException: ERROR executing DML bindLog[] error[Duplicate entry '1' for key 'PRIMARY']
        at com.avaje.ebeaninternal.server.persist.dml.DmlBeanPersister.execute(DmlBeanPersister.java:116) ~[ebean.jar:na]
        at com.avaje.ebeaninternal.server.persist.dml.DmlBeanPersister.insert(DmlBeanPersister.java:76) ~[ebean.jar:na]
        at com.avaje.ebeaninternal.server.persist.DefaultPersistExecute.executeInsertBean(DefaultPersistExecute.java:91) ~[ebean.jar:na]
        at com.avaje.ebeaninternal.server.core.PersistRequestBean.executeNow(PersistRequestBean.java:527) ~[ebean.jar:na]
        at com.avaje.ebeaninternal.server.core.PersistRequestBean.executeOrQueue(PersistRequestBean.java:557) ~[ebean.jar:na]
        at com.avaje.ebeaninternal.server.persist.DefaultPersister.insert(DefaultPersister.java:404) ~[ebean.jar:na]
Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Duplicate entry '1' for key 'PRIMARY'
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) [na:1.7.0_05]
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source) [na:1.7.0_05]
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source) [na:1.7.0_05]
        at java.lang.reflect.Constructor.newInstance(Unknown Source) [na:1.7.0_05]
        at com.mysql.jdbc.Util.handleNewInstance(Util.java:411) ~[mysql-connector-java-5.1.18.jar:na]
        at com.mysql.jdbc.Util.getInstance(Util.java:386) ~[mysql-connector-java-5.1.18.jar:na] 
```

我究竟做错了什么？插入新记录有效。所以它在我看来就像一些 ebean 错误，它没有认识到它应该进行更新。还是我在某处忘记了一些配置？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-03T12:21:47.547

我认为这与 play 和 ebean 执行的字节码增强有关。

当我将公共字段与 getter 和 setter 混合时，我遇到了与您类似的奇怪问题。有时直接使用该字段时未设置值：

```
user.id = 1L;   // didn't work
user.setId(1L); // ok 
```

这感觉像是一个潜在的死亡陷阱，所以我决定保持一致，只使用公共领域。缺点是 ebeans autofetch 停止工作，但另一方面迫使我使用 ebean fetches 调整我的查询。

[Timo的这篇出色的文章](https://groups.google.com/forum/#!msg/play-framework/XaGlipnEgBc/wPdpB6Hm_4QJ)阐明了 ebean 和 play 如何发挥它们的字节码魔法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-28T01:29:18.530

如果您有一个自创建的对象并调用*save()*，那么 Ebean 会以 SQL 形式创建一个插入语句。如果您调用*update()*，它将生成一条更新语句作为 SQL。

Ebean 本身没有逻辑可以对 DB 进行额外的查询，只是为了检查，如果在 DB 中碰巧有一行具有相似的主键，如果是这样，则使用更新语句，否则使用插入语句。就其本身而言，这只是一种低效的行为，因为通常您会知道要创建哪一个，因此不想执行两条 SQL 语句，只执行一条。在这种情况下，您实际上必须告诉它使用更新，而不是尝试再次插入行。

```
// Create user.
User user1 = new User();
user1.setId(1L);
user1.setVersion(1L);
user1.setUserName("foo");
user1.setWorkPlace("bar");
user1.setEmail("foo@bar.com");
user1.save();

// Change details later and update DB.
User user2 = new User();
user2.setId(1L);
user2.setVersion(1L);
user2.setUserName("scooby_doo");
user2.save(); // This will crash.
user2.update(); // This will work. 
```

但是，如果您从 DB 中获取对象，则对其调用*save()*将使用 SQL 中的更新语句，因为 Ebean 知道它的状态不是新的而不是现有的。

```
// Find user (and let Ebean know its state as an existing row).
User user3 = User.find.byId(1L);

// Now you can change details and save without issues.
user3.setEmail("foo@gmail.com");
user3.setVersion(2L);
user3.save(); // This will work. 
```

请参阅[Ebean 文档](http://www.avaje.org/ebean/introsavedelete.html)。

# python - 为什么这个递归停止

> ID：11699758
> 
> 赞同：0
> 
> 时间：2012-07-28T09:15:40.053
> 
> 标签：python

我是 python 新手，在下面的代码中：我有一个在新发现的链接上递归的爬虫。在根链接上递归之后，似乎程序在打印了几个链接后就停止了，这应该会持续一段时间，但事实并非如此。我正在捕获并打印异常，但程序成功终止，所以我不确定它为什么停止。

```
from urllib import urlopen
from bs4 import BeautifulSoup

def crawl(url, seen):
    try:
    if any(url in s for s in seen):
       return 0
    html = urlopen(url).read()

    soup = BeautifulSoup(html)
    for tag in soup.findAll('a', href=True):
        str = tag['href']
        if 'http' in str:
        print tag['href']
        seen.append(str)
        print "--------------"
        crawl(str, seen)
    except Exception, e:
      print e
      return 0

def main ():
    print "$ = " , crawl("http://news.google.ca", [])

if __name__ == "__main__":
    main() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T09:31:44.307

```
 for tag in soup.findAll('a', href=True):
        str = tag['href']
        if 'http' in str:
            print tag['href']
            seen.append(str)        # you put the newly founded url to *seen*
            print "--------------"
            crawl(str, seen)        # then you try to crawl it 
```

但是，在一开始`crawl`

```
if any(url in s for s in seen): # you don't crawl url in *seen*
   return 0 
```

您应该`url`在真正抓取它时添加，而不是在找到它时添加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T09:30:32.137

```
try:
    if any(url in s for s in seen):
       return 0 
```

进而

```
seen.append(str)
print "--------------"
crawl(str, seen) 
```

您追加`str`到`seen`, 然后`crawl`使用`str`和`seen`作为参数调用。显然你的代码退出了。你是这样设计的。

更好的方法是爬取一个页面，将找到的所有链接添加到要爬取的列表中，然后继续爬取该列表中的所有链接。

简单来说，你应该做广度优先爬行，而不是深度优先爬行。

像这样的东西应该工作。

```
from urllib import urlopen
from bs4 import BeautifulSoup

def crawl(url, seen, to_crawl):
    html = urlopen(url).read()
    soup = BeautifulSoup(html)
    seen.append(url)
    for tag in soup.findAll('a', href=True):
        str = tag['href']
        if 'http' in str:
            if url not in seen and url not in to_crawl:
                to_crawl.append(str)
                print tag['href']
                print "--------------"
    crawl(to_crawl.pop(), seen, to_crawl)

def main ():
    print "$ = " , crawl("http://news.google.ca", [], [])

if __name__ == "__main__":
    main() 
```

尽管您可能想限制它会抓取的最大深度或最大 URL 数。

# android - Android S3 布局与 Galaxy Nexus 布局

> ID：11699761
> 
> 赞同：6
> 
> 时间：2012-07-28T09:16:18.483
> 
> 标签：android, layout, screen-resolution, galaxy, galaxy-nexus

我开发了一个应该同时针对 Galaxy Nexus 和 Galaxy S3 的应用程序。两者都有 720 x 1280 的屏幕分辨率，我只在我的应用程序中使用了“dp”值。资源存在于“layout-xhdpi”和“drawable-xhdpi”文件夹中。Nexus 上的布局看起来非常好，但 S3 上的填充值（以 dp 为单位）略有偏差。我认为这是因为 S3 的屏幕尺寸更大且密度不同。

如何为 Nexus 和 S3 创建单独的文件夹，以便考虑不同的屏幕尺寸？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-23T23:02:12.073

使用这个方案：

对于相同的布局横向和纵向**布局-sw360dp**

仅适用于横向**布局-sw360dp-land**

仅适用于纵向**布局-sw360dp-port**

我想说您可以使用之前的分类创建具有这些名称的文件夹。位于其中的布局加载到 Galaxy S3 - WXGA720。这是一种区分此类设备布局的方法。它必要的Android 4.0+。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-20T07:16:35.720

我使用`sw360dp-long`系统将用于 GS3 并`sw360dp`用于 Galaxy Nexus。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-30T19:44:42.687

Nexus 4：使用 sw384dp (768x1280)

三星 S3：使用 sw360dp (720x1280)

应该注意的是，两者都属于 sw360dp 存储桶，但某些开发人员可能需要使像素完美，因此可能需要 384 文件夹，但如果您可以使用 LinearLayout 和“weight”设计更灵活的布局，则应避免使用。硬编码 dp 单位。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T09:58:08.863

You can get the device model and can set layout.

As following you can get model

```
String phoneModel = android.os.Build.MODEL;
if(phoneModel.equals("ABC")) {
    // SET Ralated Layout
} else if(phoneModel.equals("XYZ")) {
    // SET Ralated Layout
} 
```

# java - 哪个是优化方式？

> ID：11699764
> 
> 赞同：6
> 
> 时间：2012-07-28T09:16:31.147
> 
> 标签：java, android

可能是简单的问题，但我很困惑

优化了哪些代码？我应该使用吗？

内部流程有什么区别？

```
String str = editText.getText().toString();     
str =str.trim().toLowerCase();
textView.setText(str); 
```

* * *

```
textView.setText(editText.getText().toString().trim().toLowerCase()); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T09:32:23.190

不要以为把所有的东西都放在一行，就比把语句分成多行好。通常，Java 编译器足够聪明，可以在两种情况下生成完全相同的字节码。现代编译器做了很多微优化。

您可以通过编译它们来检查是否存在差异，然后使用 command 反编译字节码`javap -c`。

### 编辑 ：

我刚刚测试过，结果如下：

```
String str = editText.getText().toString();     
str = str.trim().toLowerCase();
textView.setText(str); 
```

编译为：

```
 0: aload_0       
       1: getfield      #7                  // Field textView:Landroid/widget/TextView;
       4: aload_0       
       5: getfield      #4                  // Field editText:Landroid/widget/EditText;
       8: invokevirtual #8                  // Method android/widget/EditText.getText:()Landroid/text/Editable;
      11: invokevirtual #9                  // Method java/lang/Object.toString:()Ljava/lang/String;
      14: invokevirtual #10                 // Method java/lang/String.trim:()Ljava/lang/String;
      17: invokevirtual #11                 // Method java/lang/String.toLowerCase:()Ljava/lang/String;
      20: invokevirtual #12                 // Method android/widget/TextView.setText:(Ljava/lang/CharSequence;)V
      23: return 
```

第二个：

```
textView.setText(editText.getText().toString().trim().toLowerCase()); 
```

给出以下结果：

```
 0: aload_0       
       1: getfield      #7                  // Field textView:Landroid/widget/TextView;
       4: aload_0       
       5: getfield      #4                  // Field editText:Landroid/widget/EditText;
       8: invokevirtual #8                  // Method android/widget/EditText.getText:()Landroid/text/Editable;
      11: invokevirtual #9                  // Method java/lang/Object.toString:()Ljava/lang/String;
      14: invokevirtual #10                 // Method java/lang/String.trim:()Ljava/lang/String;
      17: invokevirtual #11                 // Method java/lang/String.toLowerCase:()Ljava/lang/String;
      20: invokevirtual #12                 // Method android/widget/TextView.setText:(Ljava/lang/CharSequence;)V
      23: return 
```

如您所见，我猜对了，它们是相同的。Java 编译器优化了第一个示例并完全删除了该变量，因为它无用。

所以结论是你应该使用你觉得更易读的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T09:23:17.320

**[1]**创建**String str**占用设备内存，**但以后**也可以使用；因此，如果您稍后需要它，那么它会被优化。

**[2]**不使用内存，**所以简单优化**，但是你稍后需要这个字符串，然后**你必须一直获取它，**所以**完成这个过程需要更多的机器周期**，在这种情况下，第二个优化程度较低.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T09:19:12.113

> 首先，您将输出存储在 String 变量中，以便它占用空间，然后将其转换为小写并设置为 textview。
> 
> 在第二个选项中，您设置为 textview 而不将其存储到任何变量中。
> 
> 因此，如果您不想在进一步编码中使用第二个选项，则更可取。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-28T09:47:05.393

在第一个中，您使用额外的变量，它比第二个使用更多的内存。至于第二个有内存效率的优势

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-28T09:26:03.810

好吧，第二个虽然具有更高的内存效率优势，但可读性较差。不为对象分配引用变量会使它们更适合垃圾收集。

**但是不用说，您应该更喜欢可读性而不是这样的小优化。**

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-07-28T09:20:05.443

在第一个中，您使用了一个额外的变量，它比第二个需要更多的内存。

# c++ - boost::asio 将套接字转换为安全

> ID：11699766
> 
> 赞同：3
> 
> 时间：2012-07-28T09:16:58.663
> 
> 标签：c++, boost, ssl, boost-asio

我正在用 C++ 为 Minecraft 游戏编写服务器。

客户端通过普通套接字向服务器发送初始握手包。然后服务器将 RSA 密钥发送回游戏，从那时起所有套接字通信都使用发送给客户端的 RSA 密钥进行 AES 加密。

我有一个想法，我可以通过在服务器将 RSA 密钥发送到客户端后直接将我的常规 boost::asio 套接字转换为 boost::asio ssl 套接字来避免实现 AES/RSA 并链接到服务器中的其他库。

如果已经创建了套接字，我该如何转换它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T09:29:42.763

`ssl::stream`是在 a 之上实现的`tcp::socket`，可以通过`next_layer`or`lowest_layer`成员函数直接访问套接字。实际上，要使用`ssl::stream`，您首先连接下划线套接字，然后调用`ssl::stream::handshake`。`tcp::socket`请注意，您可以在这两个步骤之间做任何您想做的事情，例如直接从中读取和写入。有关详细信息，请参阅[此示例](http://www.boost.org/doc/libs/release/doc/html/boost_asio/example/ssl/client.cpp)。

# c - 指针和指针所指向的

> ID：11699768
> 
> 赞同：1
> 
> 时间：2012-07-28T09:17:11.450
> 
> 标签：c, winapi, function, memory, pointers

更新：对不起，只是一个大错误。写是没有意义的，`int *a = 3;`但是请想想这个案例的类比`TCHAR *a = TEXT("text")`；（我编辑了我的问题，所以有些答案和评论很奇怪，因为它们是针对我不适合的原始问题的）

在 main 函数中，假设我有一个指针`TCHAR *a = TEXT("text");`然后它执行以下代码：

```
int i;
for (i = 0; i < 1000; i++) {
        a = test(i);
} 
```

函数`TCHAR* test(int par)`定义为：

```
TCHAR* test(int par)
{
    TCHAR *b = TEXT("aaa");
    return b;
} 
```

我的问题是，在执行上述代码之后，但在程序结束之前，在内存中：

```
 1\. the pointer `a` remains?
    2\. The 1000 pointers `b` are deleted each time the function test(...) exits ?
    3\. But there are still 1000 memory blocks there? 
```

* * *

事实上，我的问题来自以下代码，当鼠标悬停在选项卡控件中的选项卡项目上时，它会显示一个工具提示，样式为 TCS_TOOLTIPS：

```
case WM_NOTIFY
    if (lpnmhdr->code == TTN_GETDISPINFO) {
    LPNMTTDISPINFO lpnmtdi;
    lpnmtdi = (LPNMTTDISPINFO)lParam;

    int tabIndex = (int) wParam; // wParam is the index of the tab item.

            lpnmtdi->lpszText = SetTabToolTipText(panel->gWin.At(tabIndex));
            break;
    } 
```

我在想每次调用时内存使用量是否会增加

`SetTabToolTipText(panel->gWin.At(tabIndex))`，它使用 and 操作`TCHAR`并`TCHAR*`返回一个类型的值`LPTSTR`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T09:27:47.827

您不分配任何内存，因此您不必担心内存被释放。当您的变量超出范围时，它们将被自动释放。在这个函数中

```
 int test(int par)
 {
    int *b = par;
 } 
```

即使函数说它会返回一个，你也没有返回值`int`，所以你应该像这一行那样做

```
for (i = 0; i < 1000; i++) {
    a = test(i);
} 
```

您分配给`a`由返回的值`test()`。还

```
int* a = 3;
int* b = par; 
```

在自找麻烦。您正在将整数值分配给指针变量。您可能应该重新考虑上面的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T09:31:10.707

1.  是的，指针 a 一直保留到我们从主函数返回
2.  变量 b（一个 4 字节指针）是自动的。每次我们调用测试函数时都会创建它。一旦我们从它返回，变量就会消失（指针）。请注意，b 点的值不受影响。
3.  不，在大多数情况下，我认为在编译期间只会分配一个块（很可能在只读内存中），并且函数将在每次调用时返回相同的指针。

如果`SetTabToolTipText`使用一些内存管理工具 new/malloc 或一些特定于操作系统的内部分配一个字符串，则应该进行额外的清理。否则会出现内存泄漏。

如果内部没有发生这样的事情（文档或评论等中没有提到），它很可能会将指针返回到您通常用作只读的某个内部缓冲区。在这种情况下，不必担心内存消耗增加。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T09:20:47.003

指针应该包含地址......所以`int* a = 3`一些没有意义的东西......并且在函数中你不为 int 分配内存（仅用于 par 变量，然后在函数结束时销毁），你分配内存来存储地址`int* b`，这个内存功能结束时也免费。

# delphi - Delphi (Indy) 特定的锁定

> ID：11699781
> 
> 赞同：0
> 
> 时间：2012-07-28T09:19:25.153
> 
> 标签：delphi, indy

假设我有一些系统可以协调许多文件的传输；也就是说，我有一个 Indy TCP 服务器来控制大型分布式系统上的文件同步。

目前，为了向特定客户端发送文件，需要锁定服务器上的 Contexts 列表。

如果我有 500 个客户端全部连接并进行同步，我怀疑这种锁定在性能上会非常昂贵，因为它会停止所有客户端连接线程。

有没有办法加快速度，或者这不是一个真正的问题？值得在多台服务器上分发客户端吗？有什么诀窍？

干杯，阿德里安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T18:42:59.210

没有必要仅仅为了发送文件而锁定上下文列表。让操作系统为您处理任何文件锁定。向客户端发送文件时，让客户端以只读模式打开文件。这允许多个客户端同时读取同一个文件。如果客户端正在上传文件，请以独占模式打开文件，以便其他客户端在上传完成之前无法访问该文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T10:27:50.040

如果客户端始终处于连接状态，则 OnExecute 方法（循环运行直到连接终止）可用于在数据可用时向客户端发送数据。但是，这要求协议在您的控制之下。

可以在这里找到一个相关的问题和一个[详细的答案](https://stackoverflow.com/a/9336991/80901)，它显示了如何避免锁定列表：

[没有 OnExecute 事件的 TCPserver](https://stackoverflow.com/questions/9324723/tcpserver-without-onexecute-event)

# php - mysqli_multi_query 不返回任何值

> ID：11699785
> 
> 赞同：2
> 
> 时间：2012-07-28T09:20:45.557
> 
> 标签：php, mysql, codeigniter, mysqli

我在`mysqli_multi_query`. 哪个执行正确但没有返回任何值。它返回空白。有什么问题`mysqli_multi_query`或者有什么替代方法可以在codeigniter中触发多个查询。

```
 $sql="LOCK TABLE xp_subunit WRITE; ";
    $sql .= "SELECT @myLeft := ".$_GET['lft'].", @myRight :=  ".$_GET['rgt'].", @myWidth :=  ".$_GET['lft']." - lft + 1
    FROM xp_subunit
    WHERE id =".$_GET['id']."; ";

    $sql .= "DELETE FROM xp_subunit WHERE lft BETWEEN @myLeft AND @myRight; ";

    $sql .= "UPDATE xp_subunit SET rgt = rgt - @myWidth WHERE rgt > @myRight; ";
    $sql .= "UPDATE xp_subunit SET lft = lft - @myWidth WHERE lft > @myRight; ";
    $sql.="UNLOCK TABLES;";

    //echo $sql;
    $query = $this->db->mysqli_multi_query($sql); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T08:25:20.737

只需尝试以下示例。，

```
<?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query  = "SELECT CURRENT_USER();";
$query .= "SELECT Name FROM City ORDER BY ID LIMIT 20, 5";

/* execute multi query */
$mysqli->multi_query($query);
?> 
```

我认为这可能会帮助您获得解决方案。

# magento - 启用类别平面数据后的 Magento 错误

> ID：11699790
> 
> 赞同：1
> 
> 时间：2012-07-28T09:21:14.567
> 
> 标签：magento

我已经在管理面板系统-> 索引管理中启用了**类别平面数据。**启用**Category Flat Data**后， 产品位置在前端不起作用。此外，我的产品上一个和下一个按钮在产品详细信息页面中出现错误。

```
Fatal error: Call to undefined method Mage_Catalog_Model_Resource_Eav_Mysql4_Category_Flat::getProductsPosition() in /var/domain/app/code/core/Mage/Catalog/Model/Category.php on line 308 
```

现在我正在使用magento ver。1.5.1.0。

我也试过[这个方法](http://www.magentocommerce.com/boards/26245/viewthread/240820/#t364335)

那么任何人都可以帮助我吗？如何解决这个问题？有人可以建议我解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-06T02:54:11.310

我认为平面数据收集需要重新索引

请尝试索引管理

# asp.net - ASP.net WebPermission 错误

> ID：11699791
> 
> 赞同：0
> 
> 时间：2012-07-28T09:21:19.207
> 
> 标签：asp.net, vb.net, system.web

我有一个使用 System.Net.HttpWebRequest 的页面。该页面给了我错误，如下所示

[ASP.NET WebPermission 安全异常](https://stackoverflow.com/questions/245834/asp-net-webpermission-security-exception)

我尝试了页面上的解决方案，说添加**信任级别=完整”**，当我这样做时，我的 web.config 是

```
<?xml version="1.0"?>
<configuration>

<configSections>
  <sectionGroup name="system.web.extensions" type="System.Web.Configuration.SystemWebExtensionsSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
    <sectionGroup name="scripting" type="System.Web.Configuration.ScriptingSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
      <section name="scriptResourceHandler" type="System.Web.Configuration.ScriptingScriptResourceHandlerSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
      <sectionGroup name="webServices" type="System.Web.Configuration.ScriptingWebServicesSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
        <section name="jsonSerialization" type="System.Web.Configuration.ScriptingJsonSerializationSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="Everywhere" />
        <section name="profileService" type="System.Web.Configuration.ScriptingProfileServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication" />
        <section name="authenticationService" type="System.Web.Configuration.ScriptingAuthenticationServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication" />
        <section name="roleService" type="System.Web.Configuration.ScriptingRoleServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication" />
      </sectionGroup>
    </sectionGroup>
  </sectionGroup>
</configSections>  
<appSettings/>
<connectionStrings/>

<system.web>
    <compilation debug="true" strict="false" explicit="true">
      <assemblies>
        <add assembly="System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
        <add assembly="System.Data.DataSetExtensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
        <add assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        <add assembly="System.Xml.Linq, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
      </assemblies>
    </compilation>

  <customErrors mode="Off" />

  <trust level="Full" />

    <pages>
      <namespaces>
        <clear />
        <add namespace="System" />
        <add namespace="System.Collections" />
        <add namespace="System.Collections.Generic" />
        <add namespace="System.Collections.Specialized" />
        <add namespace="System.Configuration" />
        <add namespace="System.Text" />
        <add namespace="System.Text.RegularExpressions" />
        <add namespace="System.Linq" />
        <add namespace="System.Xml.Linq" />
        <add namespace="System.Web" />
        <add namespace="System.Web.Caching" />
        <add namespace="System.Web.SessionState" />
        <add namespace="System.Web.Security" />
        <add namespace="System.Web.Profile" />
        <add namespace="System.Web.UI" />
        <add namespace="System.Web.UI.WebControls" />
        <add namespace="System.Web.UI.WebControls.WebParts" />
        <add namespace="System.Web.UI.HtmlControls" />
      </namespaces>
      <controls>
        <add tagPrefix="asp" namespace="System.Web.UI" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        <add tagPrefix="asp" namespace="System.Web.UI.WebControls" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      </controls>
    </pages>

  <httpHandlers>
    <remove verb="*" path="*.asmx"/>
    <add verb="*" path="*.asmx" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    <add verb="*" path="*_AppService.axd" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    <add verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" validate="false"/>
  </httpHandlers>

  <httpModules>
    <add name="ScriptModule" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
  </httpModules>
</system.web>
<system.codedom>
  <compilers>
    <compiler language="vb;vbs;visualbasic;vbscript" extension=".vb" warningLevel="4"
              type="Microsoft.VisualBasic.VBCodeProvider, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <providerOption name="CompilerVersion" value="v3.5"/>
      <providerOption name="OptionInfer" value="true"/>
      <providerOption name="WarnAsError" value="false"/>
    </compiler>
  </compilers>
</system.codedom>

<system.webServer>
  <validation validateIntegratedModeConfiguration="false"/>
  <modules>
    <remove name="ScriptModule" />
    <add name="ScriptModule" preCondition="managedHandler" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
  </modules>
  <handlers>
    <remove name="WebServiceHandlerFactory-Integrated"/>
    <remove name="ScriptHandlerFactory" />
    <remove name="ScriptHandlerFactoryAppServices" />
    <remove name="ScriptResource" />
    <add name="ScriptHandlerFactory" verb="*" path="*.asmx" preCondition="integratedMode"
         type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    <add name="ScriptHandlerFactoryAppServices" verb="*" path="*_AppService.axd" preCondition="integratedMode"
         type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    <add name="ScriptResource" preCondition="integratedMode" verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
  </handlers>
</system.webServer>
<runtime>
  <assemblyBinding appliesTo="v2.0.50727" xmlns="urn:schemas-microsoft-com:asm.v1">
    <dependentAssembly>
      <assemblyIdentity name="System.Web.Extensions" publicKeyToken="31bf3856ad364e35"/>
      <bindingRedirect oldVersion="1.0.0.0-1.1.0.0" newVersion="3.5.0.0"/>
    </dependentAssembly>
    <dependentAssembly>
      <assemblyIdentity name="System.Web.Extensions.Design" publicKeyToken="31bf3856ad364e35"/>
      <bindingRedirect oldVersion="1.0.0.0-1.1.0.0" newVersion="3.5.0.0"/>
    </dependentAssembly>
  </assemblyBinding>
</runtime>
</configuration> 
```

现在出现的错误显示在[http://gauravbansal7.7hostfree.com/htmlparser/](http://gauravbansal7.7hostfree.com/htmlparser/)

“/”中的服务器错误。

配置错误。

说明：处理服务此请求所需的配置文件时出错。检查下面的特定错误详细信息并适当地修改您的配置文件。解析器错误消息：您不能在应用层下方使用注册为 allowDefinition = 'MachineToApplication' 的部分。该错误可能是由于存在未在 IIS 中配置为应用程序的虚拟目录。源错误：

第 30 行： 第 31 行： 第 32 行： 第 33 行：
第 34 行：

源文件：gauravbansal7\HTMLParser\web.config 行：32

显示其他配置错误：版本信息：Microsoft 版本。NET 框架：2.0.50727.4211；ASP.NET 版本：2.0.50727.4209

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T11:01:50.533

尝试：

```
 Go to IIS > your website >> .Net Trust Levels >> Select Trust Level as Full(internal) 
```

重新启动 IIS 并再次检查。

# linux - 如何检测盖蒂重生？

> ID：11699792
> 
> 赞同：1
> 
> 时间：2012-07-28T09:21:19.443
> 
> 标签：linux, init, busybox

我正在使用 BusyBox，但是我认为我的问题很笼统。这是我的 inittab 文件中的 tty 行之一的示例。

```
tty1::respawn:/sbin/getty -n -l /usr/bin/loginwrapper 38400 tty1 
```

我想知道是否有办法检测到 getty 进程已经重生。

因此，例如在我的配置文件脚本中，我希望能够仅在 getty 第一次生成时运行命令。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T09:32:18.537

我会创建一个包装脚本，您可以将其放入您的 inittab 中，替换实际的`getty`命令。

在该脚本中，您可以完成您的工作，最后您可以启动`getty`.

因此，您将得到如下内容，而不是原来的 inittab 行：

```
tty1::respawn:/usr/local/sbin/myscript 38400 tty1 
```

在那个脚本中：

```
#!bin/sh

LAST_BOOT=`who -b`
LAST_BOOT_FILE="/tmp/place/to/put/your/flags/$2"
if grep -q "$LAST_BOOT" $LAST_BOOT_FILE 2> /dev/null; then
    echo "Respawn"
else
    echo "$LAST_BOOT" > $LAST_BOOT_FILE
    echo "First start"
fi

exec /sbin/getty -n -l /usr/bin/loginwrapper $* 
```

### 更新

如果你有 ramdisk，你可以在上面创建一个文件并检查它作为标志的存在。

# wordpress - WordPress - 将投资组合帖子设置为登录页面

> ID：11699794
> 
> 赞同：0
> 
> 时间：2012-07-28T09:21:32.070
> 
> 标签：wordpress

我一直用这个把头发扯下来。与我一起工作的人想要一个特定的作品集作为他的登录页面，但是当我访问`Settings->Reading`它时，我只允许我从实际页面而不是作品集设置主页。这听起来有点奇怪，但公平地说，这将与他的特定主题一起工作。

他正在运行 3.4.1，我确信有一些创造性的解决方案让我无法理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T09:30:28.180

我会通过创建一个名为 front-page.php 的自定义模板来处理这个问题，然后使用其中的 WP_Query 设置一个自定义循环，以便在任何地方拉入这个 Portfolio peice（即，如果它是自定义帖子类型，则在投资组合类别等）。

默认情况下，Wordpress 将加载一个名为 front-page.php 的模板作为默认主页，而无需您在任何地方明确地将其设置为后端。

# wordpress - 致命错误：在非对象上调用成员函数 add_cap()

> ID：11699795
> 
> 赞同：1
> 
> 时间：2012-07-28T09:21:31.870
> 
> 标签：wordpress, capability

我正在开发 WordPress 主题，但我不明白为什么在不为用户使用任何插件的情况下无法为现有自定义角色添加新的自定义功能

```
//Function for creating new custom capability

function map_custom_cap($roles = array()){

    foreach ( $roles as $role => $cap ) {

        $role->add_cap($cap);

    }
}

//This capabilities are not yet existing

        $reviewer_cap = array( 'read', 'edit_posts', 'delete_posts');

        $movie_author_cap = array( 'read_movie', 'edit_movies', 'delete_movies');

        $roles = array(
            'reviewer' => $reviewer_cap,
            'movie_author' => $movie_author_cap
        );

map_custom_cap($roles); 
```

# mysql - MySQL距离和最小值与分组依据

> ID：11699800
> 
> 赞同：0
> 
> 时间：2012-07-28T09:21:58.243
> 
> 标签：mysql, sql, group-by, spatial

我有以下查询：

```
SELECT TeacherLocation.user_id, TeacherLocation.city, TeacherLocation.state_id, 
TeacherLocation.latitude, TeacherLocation.longitude,    

3959 * acos( cos( radians(40.76332092) ) * cos( radians( TeacherLocation.latitude ) )* 
cos( radians(   TeacherLocation.longitude ) - radians(-73.98623657) ) + sin(       
radians(40.76332092) ) * 
sin( radians( TeacherLocation.latitude ) )  ) AS distance 

FROM teacher_locations AS TeacherLocation

GROUP BY TeacherLocation.user_id
HAVING distance > 0
ORDER BY distance ASC LIMIT 0, 100 
```

这似乎工作正常，但我遇到的问题是，由于我按 user_id 分组，并且 user_id 在表中不是唯一的，我可能并且确实获得了最近的距离，但并不总是城市和那个距离的 state_id（因为有多个）。结果：

```
user_id     city            stateId Lat             Long            Distance
83224   NEW YORK    33  40.751091   -73.99469757    0.954064642293979
87336   NEW YORK    33  40.751091   -73.99469757    0.954064642293979
87850   NEW YORK    33  40.751091   -73.99469757    0.954064642293979
86822   NEW YORK    33  40.751091   -73.99469757    0.954064642293979 
```

如果我添加 min（距离），我会得到奇怪的结果。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T09:33:05.807

您可以使用过滤连接，例如：

```
select  *
from    teacher_locations tl
join    (
        select  user_id
        ,       min(... distance formula here...) as MinDistance
        from    teacher_location
        group by
                user_id
        ) filter
on      filter.user_id = tl.user_id
        and filter.MinDisance = tl.(... distance formula here...) 
```

如果速度是一个问题，您可以使用 MySQL 变量技巧。这更快但不可移植（甚至可能不适用于未来的 MySQL 版本。）

```
select  *
from    (
        select  @rn := if(user_id = @lastuserid, 1, @rn+1) as rn
        ,       @lastuserid := user_id
        ,       tl.*
        from    TeacherLocation tl
        cross join
               (select @rn := 0, @lastuserid := -1) as init
        order by
                tl.user_id
        ,       tl.distance desc
        ) as SubQueryAlias
where   rn = 1 
```

[SQL Fiddle 的示例，您必须自己扩展距离计算。](http://sqlfiddle.com/#!2/584da/2/0)

# iphone - OSX Mountain Lion 和 Xcode 4.4 中的网络链接调节器 Prefpane 在哪里

> ID：11699805
> 
> 赞同：29
> 
> 时间：2012-07-28T09:22:50.953
> 
> 标签：iphone, ios, xcode, networking, osx-mountain-lion

我最近更新到 OSX Mountain Lion Xcode 4.4。现在我再也找不到捆绑的网络链接调节器了，它自动安装在 OSX Lion 和相应的 Xcode 版本上。

有任何想法吗

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-07-28T09:22:50.953

我想到了。看起来 Network Link Conditioner 现在是 Mountain Lion 和 Xcode 4.4 中的一个可选包，可以像这样安装：

1.  打开 Xcode
2.  导航`Xcode > Open Developer Tool > More Developer Tools`
3.  下载**适用于 Xcode 的硬件 IO 工具**，然后双击该文件`Network Link Conditioner.prefpane`，这将再次安装 Preference 窗格：

[http://i.minus.com/jYNbvGpJabFmf.jpg](http://i.minus.com/jYNbvGpJabFmf.jpg)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-02T17:02:23.263

对于在 Mountain Lion 中工作的网络链接调节器，您需要从“Xcode 硬件 IO 工具 - 2012 年 7 月下旬”.dmg 安装它

# php - 使用直接 URI 从 Facebook 应用程序发送好友请求

> ID：11699807
> 
> 赞同：0
> 
> 时间：2012-07-28T09:22:57.020
> 
> 标签：php, facebook, uri, facebook-php-sdk

我正在尝试使用以下代码邀请我的 facebook 朋友使用我的应用程序：

```
 <?php $this->config->load('facebook'); 

 $sendFriendRequest = array(

'description' => 'join market place',
'redirect_uri' => urlencode('http://apps.facebook.com/morganmarket')
 );

?>

<a href="https://www.facebook.com/dialog/apprequests?
app_id=<?php echo $this->config->item('appId');?>&
message=<?php echo $sendFriendRequest['description'];?>&
redirect_uri=<?php echo $sendFriendRequest['redirect_uri'];?>"/>
<img src=<?php echo base_url().'public/images/web/facebook/friendrequests.png';?> />
</a> 
```

问题是，不是直接针对向朋友对话发送请求，而是直接针对具有以下链接的页面（转到 facebook.com），如何在不直接重定向到对话的情况下先重定向到对话?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T11:21:08.437

尝试使用以下直接网址：

[https://www.facebook.com/dialog/apprequests?app_id=APP_ID&](https://www.facebook.com/dialog/apprequests?app_id=APP_ID&) message=Facebook%20Dialogs%20are%20so%20easy!& redirect_uri=http://apps.facebook.com/morganmarket

用户遵循流程并发送请求后，浏览器将重定向到

[http://apps.facebook.com/morganmarket?request=REQUEST_ID&to=ARRAY_OF_USER_IDS](http://apps.facebook.com/morganmarket?request=REQUEST_ID&to=ARRAY_OF_USER_IDS)

如果有错误，浏览器会重定向到

[http://apps.facebook.com/morganmarket?error_code=ERROR_CODE&error_msg=ERROR_MSG](http://apps.facebook.com/morganmarket?error_code=ERROR_CODE&error_msg=ERROR_MSG)

# batch-file - 从例程覆盖变量

> ID：11699813
> 
> 赞同：0
> 
> 时间：2012-07-28T09:24:13.363
> 
> 标签：batch-file, cmd

我有这个批次，我试图让父目录保持不变。

```
@echo off

SET CWD=

:process
if [%1] == [] goto end
SET MASTER_DIR="%~f1"

rem Change to say, E:\DVD_LIBRARY\Rips
cd /d %MASTER_DIR%
for /R %%D IN (\) DO (

    rem Temporarily change to the subdir, such as E:\DVD_LIBRARY\Rips\SIN_CITY\
    pushd %%D
    for /F "usebackq" %%Z in (`dir /b *.vob 2^>NUL`) DO (
        if exist %%~fZ (

            rem Get this parent directory to store the log file in (eventually)
            CALL :resolve "%%D\.." CWD

            rem Nada.
            echo: %CWD%
        )
    )
    popd
)
shift
goto process

:resolve
SET %2=%~f1
goto :EOF 
```

在`:resolve`例行程序中，我得到了我想要的价值。回到这个块：

```
if exist %%~fZ (
    CALL :resolve "%%D\.." CWD
    echo: %CWD%
) 
```

我什么也得不到。

任何想法为什么这不坚持，或者更好的方法？我已经搜索了谷歌并在这里找到了这种技术和其他一些喜欢它的技术，但我不知道为什么在`CALL`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T12:53:05.637

问题不在于`cwd`未设置变量，而是您无法按照尝试的方式回显它。那是因为在解析 IF 块时它被扩展了。

但是您需要在 CALL 之后进行扩展。您可以通过延迟扩展或 CALL-Expansion 来解决它

```
if exist %%~fZ (
    CALL :resolve "%%D\.." CWD
    call echo: %%CWD%%
) 
```

或者

```
setlocal EnableDelayedExpansion
if exist %%~fZ (
    CALL :resolve "%%D\.." CWD
    echo: !CWD!
) 
```

# mysql - utf8 mysql 字符串音译

> ID：11699816
> 
> 赞同：5
> 
> 时间：2012-07-28T09:25:29.597
> 
> 标签：mysql, utf-8

mysql 中是否有类似于 php 的 iconv 的函数将重音 utf8 字符转换为 ascii 字符串？

我想要如下所示的 SQL 查询：

```
SELECT some_func("LĄBĄS VĄKĄRŪŠ") 
```

并返回`labas vakarus`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T10:07:09.863

我找到[了这个 MySQL 音译](https://github.com/igstan/sql-utils/blob/master/transliterate.sql)函数，这可能就是你要找的。

您可以在作者[的相关博客文章](http://igstan.ro/posts/2009-02-13-mysql-transliteration-function.html)中阅读更多相关信息。

### 建议：

我的建议是不要相信 MySQL 和 PHP`iconv()`音译会产生相同的结果，因为它们都是猜测。最好只坚持一个，无论是 MySQL 还是 PHP。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-24T19:49:58.673

在 MySQL 中创建搜索引擎友好 URL 地址的功能。

```
DELIMITER ;;

CREATE FUNCTION `cool_url` (`original` varchar(512) CHARSET utf8mb4 COLLATE utf8mb4_bin) RETURNS varchar(512) CHARSET utf8mb4
BEGIN

    DECLARE translit VARCHAR(512) DEFAULT '';
    DECLARE len INT(3) DEFAULT 0;
    DECLARE pos INT(3) DEFAULT 1;
    DECLARE letter VARCHAR(2);

    SET original = TRIM(LOWER(original));
    SET len = CHAR_LENGTH(original);

    WHILE (pos <= len) DO

        # get one letter from original
        SET letter = SUBSTRING(original, pos, 1) COLLATE utf8mb4_bin;

        CASE TRUE
          # basic chars
          WHEN letter IN ('a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z','0','1','2','3','4','5','6','7','8','9' COLLATE utf8mb4_bin) THEN SET letter = letter; 
          # chars with diacritics and azbuka
          WHEN letter IN('á','à','â','ä','å','ā','ą','ă' COLLATE utf8mb4_bin) THEN SET letter = 'a';
          WHEN letter IN('б' COLLATE utf8mb4_bin) THEN SET letter = 'b';
          WHEN letter IN('č','ć','ç','ć' COLLATE utf8mb4_bin) THEN SET letter = 'c';
          WHEN letter IN('ď','đ','д' COLLATE utf8mb4_bin) THEN SET letter = 'd';
          WHEN letter IN('é','ě','ë','ё','è','ê','ē','ę','ь','э','œ' COLLATE utf8mb4_bin) THEN SET letter = 'e';
          WHEN letter IN('ф','ѳ' COLLATE utf8mb4_bin) THEN SET letter = 'f';
          WHEN letter IN('ģ','ğ','г' COLLATE utf8mb4_bin) THEN SET letter = 'g';
          WHEN letter IN('í','î','ï','ī','î','і','и','й' COLLATE utf8mb4_bin) THEN SET letter = 'i';
          WHEN letter IN('ķ','к' COLLATE utf8mb4_bin) THEN SET letter = 'k';
          WHEN letter IN('ľ','ĺ','ļ','ł','л' COLLATE utf8mb4_bin) THEN SET letter = 'l';
          WHEN letter IN('м' COLLATE utf8mb4_bin) THEN SET letter = 'm';
          WHEN letter IN('ň','ņ','ń','ñ','н' COLLATE utf8mb4_bin) THEN SET letter = 'n';
          WHEN letter IN('ó','ö','ø','õ','ô','ő','ơ','о' COLLATE utf8mb4_bin) THEN SET letter = 'o';
          WHEN letter IN('п' COLLATE utf8mb4_bin) THEN SET letter = 'p';
          WHEN letter IN('ŕ','ř','р' COLLATE utf8mb4_bin) THEN SET letter = 'r';
          WHEN letter IN('š','ś','ș','ş','с','ß' COLLATE utf8mb4_bin) THEN SET letter = 's';
          WHEN letter IN('ť','ț','т' COLLATE utf8mb4_bin) THEN SET letter = 't';
          WHEN letter IN('ú','ů','ü','ù','û','ū','ű','ư','у' COLLATE utf8mb4_bin) THEN SET letter = 'u';
          WHEN letter IN('в' COLLATE utf8mb4_bin) THEN SET letter = 'v';
          WHEN letter IN('ý','ы','ѵ' COLLATE utf8mb4_bin) THEN SET letter = 'y';
          WHEN letter IN('ž','ź','ż','з' COLLATE utf8mb4_bin) THEN SET letter = 'z';
          WHEN letter = 'х' COLLATE utf8mb4_bin THEN SET letter = 'kh'; -- is not X
          WHEN letter = 'ю' COLLATE utf8mb4_bin THEN SET letter = 'ju';
          WHEN letter = 'я' COLLATE utf8mb4_bin THEN SET letter = 'ja';
          WHEN letter = 'ж' COLLATE utf8mb4_bin THEN SET letter = 'zh';
          WHEN letter = 'ч' COLLATE utf8mb4_bin THEN SET letter = 'ch';
          WHEN letter = 'ш' COLLATE utf8mb4_bin THEN SET letter = 'sh';
          WHEN letter = 'щ' COLLATE utf8mb4_bin THEN SET letter = 'shch';
          WHEN letter = 'ѣ' COLLATE utf8mb4_bin THEN SET letter = 'ie';
          WHEN letter = 'ц' COLLATE utf8mb4_bin THEN SET letter = 'ts';
          WHEN letter = 'ъ' COLLATE utf8mb4_bin THEN SET letter = ''; -- hard sign
          WHEN letter = 'ь' COLLATE utf8mb4_bin THEN SET letter = ''; -- soft sign

          ELSE SET letter = '-';
        END CASE;

        # joining new string
        SET translit = CONCAT(translit, letter);

        SET pos = pos + 1;
    END WHILE;

    # replacing more dashes by one
    WHILE (translit REGEXP '\-{2,}') DO
        SET translit = REPLACE(translit, '--', '-');
    END WHILE;

    RETURN TRIM(BOTH '-' FROM translit);

END;;
DELIMITER ; 
```

示例（测试）：

```
mysql> SELECT cool_url('BŒautiful day áàâäåāąă б čćçć ďđд éěëёèêēęьэœ фѳ ģğг íîïīîіий ķк ľĺļłл м ňņńñн óöøõôőơо п ŕřр šśșşсß ťțт úůüùûūűưу в ýыѵ žźżз х ю я ж ч ш щ ѣ ц ъ ь');
+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| beautiful-day-aaaaaaaa-b-cccc-ddd-eeeeeeeeeee-ff-ggg-iiiiiiii-kk-lllll-m-nnnnn-oooooooo-p-rrr-ssssss-ttt-uuuuuuuuu-v-yyy-zzzz-kh-ju-ja-zh-ch-sh-sh-ie-ts-e                  |
+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.01 sec) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-13T13:49:06.720

我需要一个肮脏但快速的解决方案来为 wp 中的帖子标签创建数千个 slug。所以这是我为元音和数字修改的上面答案中的代码。希望有一天它会对某人有所帮助，因为它今天对我有所帮助。:)

```
DELIMITER $$

DROP FUNCTION IF EXISTS `transliterate` $$
CREATE FUNCTION `transliterate` (original VARCHAR(512)) RETURNS VARCHAR(512)
BEGIN

  DECLARE translit VARCHAR(512) DEFAULT '';
  DECLARE len INT(3) DEFAULT 0;
  DECLARE pos INT(3) DEFAULT 1;
  DECLARE letter CHAR(2);

  SET original = TRIM(LOWER(original));
  SET len = CHAR_LENGTH(original);

  WHILE (pos <= len) DO
    SET letter = SUBSTRING(original, pos, 1);

    CASE TRUE

      WHEN letter IN('á','à','â','ä','å','ā','ą','ă') THEN SET letter = 'a';
      WHEN letter IN('č','ć','ç','ć') THEN SET letter = 'c';
      WHEN letter IN('ď','đ') THEN SET letter = 'd';
      WHEN letter IN('é','ě','ë','è','ê','ē','ę') THEN SET letter = 'e';
      WHEN letter IN('ģ','ğ') THEN SET letter = 'g';
      WHEN letter IN('í','î','ï','ī','î') THEN SET letter = 'i';
      WHEN letter IN('ķ') THEN SET letter = 'k';
      WHEN letter IN('ľ','ĺ','ļ','ł') THEN SET letter = 'l';
      WHEN letter IN('ň','ņ','ń','ñ') THEN SET letter = 'n';
      WHEN letter IN('ó','ö','ø','õ','ô','ő','ơ') THEN SET letter = 'o';
      WHEN letter IN('ŕ','ř') THEN SET letter = 'r';
      WHEN letter IN('š','ś','ș','ş') THEN SET letter = 's';
      WHEN letter IN('ť','ț') THEN SET letter = 't';
      WHEN letter IN('ú','ů','ü','ù','û','ū','ű','ư') THEN SET letter = 'u';
      WHEN letter IN('ý') THEN SET letter = 'y';
      WHEN letter IN('ž','ź','ż') THEN SET letter = 'z';

    WHEN letter = 'а' THEN SET letter = 'a';
      WHEN letter = 'б' THEN SET letter = 'b';
      WHEN letter = 'в' THEN SET letter = 'v';
      WHEN letter = 'г' THEN SET letter = 'g';
      WHEN letter = 'д' THEN SET letter = 'd';
    WHEN letter = 'е' THEN SET letter = 'e';
    WHEN letter = 'ё' THEN SET letter = 'e';      
      WHEN letter = 'ж' THEN SET letter = 'z';
      WHEN letter = 'з' THEN SET letter = 'z';
      WHEN letter = 'и' THEN SET letter = 'i';
      WHEN letter = 'й' THEN SET letter = 'i';
      WHEN letter = 'к' THEN SET letter = 'k';
      WHEN letter = 'л' THEN SET letter = 'l';
      WHEN letter = 'м' THEN SET letter = 'm';
      WHEN letter = 'н' THEN SET letter = 'n';
    WHEN letter = 'о' THEN SET letter = 'o';
      WHEN letter = 'п' THEN SET letter = 'p';
    WHEN letter = 'р' THEN SET letter = 'r';
    WHEN letter = 'с' THEN SET letter = 's';
      WHEN letter = 'т' THEN SET letter = 't';
    WHEN letter = 'у' THEN SET letter = 'u';
      WHEN letter = 'ф' THEN SET letter = 'f';
      WHEN letter = 'х' THEN SET letter = 'ch';
      WHEN letter = 'ц' THEN SET letter = 'c';
      WHEN letter = 'ч' THEN SET letter = 'c';
      WHEN letter = 'ш' THEN SET letter = 's';
      WHEN letter = 'щ' THEN SET letter = 's';
      WHEN letter = 'ъ' THEN SET letter = '';
      WHEN letter = 'ы' THEN SET letter = 'y';
      WHEN letter = 'ь' THEN SET letter = 'e';
      WHEN letter = 'э' THEN SET letter = 'e';
      WHEN letter = 'ю' THEN SET letter = 'ju';
      WHEN letter = 'я' THEN SET letter = 'ja';

    WHEN letter = '0' THEN SET letter = '0';
    WHEN letter = '1' THEN SET letter = '1';
    WHEN letter = '2' THEN SET letter = '2';
    WHEN letter = '3' THEN SET letter = '3';
    WHEN letter = '4' THEN SET letter = '4';
    WHEN letter = '5' THEN SET letter = '5';
    WHEN letter = '6' THEN SET letter = '6';      
    WHEN letter = '7' THEN SET letter = '7';
    WHEN letter = '8' THEN SET letter = '8';
    WHEN letter = '9' THEN SET letter = '9';

      WHEN letter IN ('a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','x','y','z')
        THEN SET letter = letter;

      ELSE
    SET letter = '-';

    END CASE;

    SET translit = CONCAT(translit, letter);
    SET pos = pos + 1;
  END WHILE;

  WHILE (translit REGEXP '\-{2,}') DO
        SET translit = REPLACE(translit, '--', '-');
  END WHILE;

  RETURN TRIM(BOTH '-' FROM translit);

END $$

DELIMITER ; 
```

# url - Unicode 字符是否存在已知的 URI 方案或 URN 命名空间？

> ID：11699817
> 
> 赞同：5
> 
> 时间：2012-07-28T09:25:46.867
> 
> 标签：url, unicode, uri, semantic-web, urn

我需要使用 URI 引用 Unicode 字符。以下 IANA 参考列出了多个方案和命名空间，但未提及任何有关 Unicode 字符标识符的内容。有谁知道这样的东西是否已经存在？

*   [http://www.iana.org/assignments/uri-schemes.html](http://www.iana.org/assignments/uri-schemes.html)
*   [http://www.iana.org/assignments/urn-namespaces/urn-namespaces.xml](http://www.iana.org/assignments/urn-namespaces/urn-namespaces.xml)

我希望能找到类似的东西

*   `unicode://U+0394`
*   `urn:unicode://0394`
*   `http://unicode.org/unicode/0394`

为希腊大写字母 delta Δ。

如果有人想知道，这是一个语义网之类的应用程序，它使用 URI 作为概念的标识符，包括 Unicode 字符的概念。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T10:49:56.057

恐怕一般来说，没有 URL 或 URN 来引用有关 Unicode 字符的权威信息。在 Unicode 标准中，有关单个字符的信息部分位于所谓的字符数据库（主要是特定格式的纯文本文件）中，部分位于代码图表（PDF 文件）中。它们都没有提供指向单个角色的方法。此外，那里的信息并不详尽：有关于散落在标准周围的个别字符信息的重要注释。

Decodeunicode站点具有[可](http://www.decodeunicode.org/)单独寻址的项目，例如

[http://www.decodeunicode.org/en/u+0394](http://www.decodeunicode.org/en/u+0394)

但其信息内容差异很大，通常非常有限。它不是官方的，目前仅包含 Unicode 5.0。

Fileformat.info[网站](http://www.fileformat.info/)更加系统化，但它也是非官方的。它基本上仅限于形​​式属性和可从它们派生的数据，以及从代码图表中提取的注释，以及在 Windows 中键入字符的说明，以及有关字体支持的信息——但数量很多！例子：

[http://www.fileformat.info/info/unicode/char/0394/](http://www.fileformat.info/info/unicode/char/0394/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-09T07:41:15.917

[编辑]：发现此 URL 符合您的需求：[http ://unicode.org/cldr/utility/character.jsp?a=1F40F](http://unicode.org/cldr/utility/character.jsp?a=1F40F)

.

好吧，有一个 URL 引用了 Unicode 数据库上的权威信息，即使它没有描述（如另一个答案中所说）一个特定字符的所有信息。

您有以下 URL，指向最新的 Unicode 数据库。这是现有有效 Unicode 字符的简单列表。缺少一些即将出现的字符 (㋿)，您应该期望它是可变的。

*   [https://www.unicode.org/Public/UCD/latest/ucd/UnicodeData.txt](https://www.unicode.org/Public/UCD/latest/ucd/UnicodeData.txt)

内容如下所示，按原样使用不太实用。

```
$ grep -ai kangaroo UnicodeData.txt -C 7
1F991;SQUID;So;0;ON;;;;;N;;;;;
1F992;GIRAFFE FACE;So;0;ON;;;;;N;;;;;
1F993;ZEBRA FACE;So;0;ON;;;;;N;;;;;
1F994;HEDGEHOG;So;0;ON;;;;;N;;;;;
1F995;SAUROPOD;So;0;ON;;;;;N;;;;;
1F996;T-REX;So;0;ON;;;;;N;;;;;
1F997;CRICKET;So;0;ON;;;;;N;;;;;
1F998;KANGAROO;So;0;ON;;;;;N;;;;;
1F999;LLAMA;So;0;ON;;;;;N;;;;;
1F99A;PEACOCK;So;0;ON;;;;;N;;;;;
1F99B;HIPPOPOTAMUS;So;0;ON;;;;;N;;;;;
1F99C;PARROT;So;0;ON;;;;;N;;;;;
1F99D;RACCOON;So;0;ON;;;;;N;;;;;
1F99E;LOBSTER;So;0;ON;;;;;N;;;;;
1F99F;MOSQUITO;So;0;ON;;;;;N;;;;; 
```

您可以使用这样的后缀构建一个 hacky “基于哈希”的命名空间，但这绝对是非标准的。

*   [https://www.unicode.org/Public/UCD/latest/ucd/UnicodeData.txt#1F998](https://www.unicode.org/Public/UCD/latest/ucd/UnicodeData.txt#1F998)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-01-26T15:52:28.953

由于这也被标记为[semantic-web](/questions/tagged/semantic-web "显示标记为“语义网”的问题")，因此我将尝试选择易于（且永久）取消引用并且不会被误认为描述该字符的文档的 URI：`data:`方案。这不仅可以指代 Unicode 中的字符，还可以指代任何编码及其任何字符串。

`data:;charset=utf-8,%CE%94`

尝试打开此 URI 应该会生成一个`text/plain`包含单个字符作为其内容的文件。

如果系统接受 IRI（就像许多语义 Web 应用程序一样），则可以直接包含字符：

`data:;charset=utf-8,Δ`

这映射到与上图相同的 URI，您的浏览器可能会直接对其进行转换。在这种情况下，必须指定 UTF-8，因为没有为其他编码定义映射。

# android - 如何让拨号器打开并显示电话号码？

> ID：11699819
> 
> 赞同：219
> 
> 时间：2012-07-28T09:26:10.500
> 
> 标签：android, android-intent, phone-number

我不需要拨打电话号码，我只需要打开拨号器并显示已显示的电话号码。我`Intent`应该用什么来实现这一点？

* * *

## 回答 #1

> 赞同：583
> 
> 时间：2012-07-28T09:27:49.727

有两种方法来实现它。

**1) 需要通过代码启动拨号器，无需用户交互。**

你需要`Action_Dial`，

使用下面的代码它将打开指定号码的拨号器

```
Intent intent = new Intent(Intent.ACTION_DIAL);
intent.setData(Uri.parse("tel:0123456789"));
startActivity(intent); 
```

**'tel:' 前缀是必需**的，否则将抛出以下异常： *java.lang.IllegalStateException: 无法执行活动的方法。*

**Action_Dial 不需要任何权限。**

**如果您想直接发起呼叫而不需要用户交互**，您可以使用 action `Intent.ACTION_CALL`。在这种情况下，您必须在 AndroidManifest.xml 中添加以下权限：

```
<uses-permission android:name="android.permission.CALL_PHONE" /> 
```

**2) 需要用户点击Phone_Number 字符串并开始通话。**

```
android:autoLink="phone" 
```

您需要使用具有以下属性的 TextView。

[android:autoLink="phone" android:linksClickable="true" 一个 textView 属性](http://developer.android.com/reference/android/widget/TextView.html#attr_android:autoLink)

您不需要使用意图或通过这种方式获得许可。

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2014-11-06T15:45:31.630

答案很晚，但是如果您有一个`TextView`要显示电话号码的信息，那么您根本不需要处理意图，您只需使用 XML 属性`android:autoLink="phone"`，操作系统就会自动启动一个`ACTION_DIAL`Intent。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2019-08-25T16:47:08.090

好的，这个问题的答案将是非常晚的。但是，如果您想在**Kotlin**中进行，这里只是一个示例。

```
val intent = Intent(Intent.ACTION_DIAL)
intent.data = Uri.parse("tel:<number>")
startActivity(intent) 
```

认为它可能会帮助某人。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-06-04T07:58:54.350

正如上面提到的@ashishduh，使用`android:autoLink="phone`也是一个很好的解决方案。但是这个选项有一个缺点，它不适用于所有电话号码长度。例如，11 个号码的电话号码不适用于此选项。解决方案是在您的电话号码前加上国家代码。

例子：

`08034448845`行不通

但`+2348034448845`会

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-11-07T07:41:09.503

```
<TextView
 android:id="@+id/phoneNumber"
 android:autoLink="phone"
 android:linksClickable="true"
 android:text="+91 22 2222 2222"
 /> 
```

这就是您可以直接在拨号器上打开 EditText 标签分配号码的方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-13T08:32:05.800

您可以按照以下方式调用 Intent：

```
String number = "0123456789";
        Intent intent = new Intent(Intent.ACTION_DIAL);
        intent.setData(Uri.parse("tel:" + number));
        startActivity(intent); 
```

# cocoa - Core Data 跨存储获取属性

> ID：11699822
> 
> 赞同：0
> 
> 时间：2012-07-28T09:26:20.523
> 
> 标签：cocoa, core-data, fetched-property

我目前正在考虑 Core Data 的一些问题。我在自己的商店中有一个*用户*模型，我无法控制它，因为它是随框架一起提供的。该模型的持久存储协调器、托管对象模型和上下文是自动创建的，并且无法触及。在其中，这个模型有一个单一的*用户*实体

另一方面，我有一个*属性*模型，其中包含我可以完全控制的*属性实体。*在那里，我将某些*用户*实体的属性存储在其他商店中。user 和 property 实体都有一个类似于外键的*id属性。*这个模型有它自己的 Persistent Store Cordinator、Managed Object Model 和 Context。

我现在想要的是将关联的*用户*实体作为属性实体的属性，*这样*我就可以绑定到类似的键路径`myproperty.user.someValueOfTheUserEntity`（我知道使用获取的属性时 myproperty 可能是一个数组）。

但是，由于不支持跨商店关系，我想通过*Fetched Properties*使用弱关系。那只需要匹配两个相应的*id*属性。我在 Xcode 中为*用户*创建了一个 Fetched 属性，并在我的*属性*实体的类文件中创建了所需的访问器（正如其他问题中所建议的，我将 Fetched 属性返回的值视为一个数组）。

但是，我无法在 Xcode 中为 Fetched 属性设置目标实体，因为目标实体位于完全不同的商店中。*我是否还必须在属性*存储中定义我的*用户*实体？如果是这样，Core Data 怎么知道该实体不是从我的属性存储中获取，而是从用户存储中获取？

 *一些线程提到为此使用配置，但我找不到比提及“为此使用配置”更进一步的任何文档。

有人可以告诉我如何设置跨存​​储获取的属性吗？#

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T07:32:48.727

您可以使用多个共享相同数据模型的持久性存储：

*   使用单一数据模型 (xcdatamodeld) 并添加所有实体
*   为应该存储在单独存储文件中的每个“逻辑集”实体创建配置（编辑器/添加配置）
*   将实体分配（拖动）到适当的配置
*   将配置的持久存储添加到您的上下文中（见下文）
*   配置获取的属性

> ```
> // 1\. Add "static", read-only store
> [coordinator addPersistentStoreWithType:NSSQLiteStoreType
>              configuration:@"your static configuration name goes here..."
>              URL:storeUrl
>              options:@{
>                  NSReadOnlyPersistentStoreOption: @(YES),
>                  NSInferMappingModelAutomaticallyOption : @(YES)
>              }
>              error:&error];
> // 2\. Add "dynamic", writable content
> [coordinator addPersistentStoreWithType:NSSQLiteStoreType
>              configuration:@"your dynamic configuration name goes here..."
>              URL:storeUrl
>              options:@{
>                 NSMigratePersistentStoresAutomaticallyOption: @(YES),
>                 NSInferMappingModelAutomaticallyOption : @(YES)
>              }
>              error:&error]; 
> ```*

# uml - 以下代码的 UML 序列图会是什么样子？

> ID：11699826
> 
> 赞同：1
> 
> 时间：2012-07-28T09:27:29.570
> 
> 标签：uml, sequence-diagram

以下代码的 UML 序列图是什么，其中包含一个具有两个内部类的类，每个内部类都被实例化一次，如在主函数中所见？

```
class A{

 class B{
  C f(){}
 }
 class C{}

 static void main(){
  A a = new A()
  B b = new B();
  C c = new C();
  c = b.f();
 }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T23:38:05.237

您可以在 Eclipse 中使用自动序列图生成器，例如[Diver: Dynamic Interactive Dynamic Interactive Views For Reverse Engineering。](http://eclipsediver.wordpress.com)它生成静态和动态序列图，并希望回答您的问题。

我稍微调整了您的代码以使其编译并使用 Diver 生成序列图：

![ABC序列图](../Images/a25e0cb20a116d3a9573b17f7214ba6a.png)

这是此代码的序列图：

```
package org.testing;

public class A {

    static class B 
{
    C f() {
    return new C();
    }
}

static class C {
}

    public static void main(String args[]) {          
        A a = new A();
        B b = new B(); 
        C c = new C();
        c = b.f();
    }
} 
```

# c - 将初始值设置为 c 中结构的字段？

> ID：11699827
> 
> 赞同：0
> 
> 时间：2012-07-28T09:27:39.407
> 
> 标签：c, linux, struct, global-variables

> **可能重复：**
> [如何在 ANSI C 中初始化结构](https://stackoverflow.com/questions/330793/how-to-initialize-a-struct-in-ansi-c)

我的代码中有一个**带有初始值**的全局变量，它们是：

```
int init = 0;
int flag = FALSE;
sem_t *mutex;
char * ptr1 = NULL;
char * ptr2 = NULL;
int status1 = -10;
int status2 = -10;
int semaphoreFlag = FALSE; 
```

相反，我决定添加一个结构：

```
struct PipeShm
{
    int init;
    int flag;
    sem_t *mutex;
    char * ptr1;
    char * ptr2;
    int status1;
    int status2;
    int semaphoreFlag;
}; 
```

但是，我无法为结构的字段设置初始值，就像我在变量是全局变量时所做的那样。

我想通常的方法是有一个`void init()`方法将结构的值设置为请求的值......但我正在寻找其他东西......有什么办法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T09:38:31.737

除了@DCoder 建议的解决方案之外，您还可以使用该结构实例化和初始化变量，如下所示：

```
struct PipeShm
{
    int init;
    int flag;
    sem_t *mutex;
    char * ptr1;
    char * ptr2;
    int status1;
    int status2;
    int semaphoreFlag;
} defaults = {
    .init = 0,
    .flag = 0,
    .mutex = NULL,
    .ptr1 = NULL,
    .ptr2 = NULL,
    .status1 = 0,
    .status2 = 0,
    .semaphoreFlag = 0
}; 
```

# asp.net-mvc-3 - 我如何在控制器中通过 Linq 查询找到 Id

> ID：11699831
> 
> 赞同：0
> 
> 时间：2012-07-28T09:28:05.717
> 
> 标签：asp.net-mvc-3, linq, razor

我有一个名为 Product 的表，它与 ProductCategory 有映射关系。我想在产品控制器中找到一个 ProductCategoryId。我怎样才能做到这一点。我在这里应用了 linq 查询，但我如何使用它来查找 productCategoryId。

```
var productCategoryId = (from ProductCategory in context.ProductCategories
                                             where (ProductCategory.ProductId==id)
                                           select ProductCategory); 
```

现在我正在尝试从可能包含在 productCategoryId 中的数据库中找出一个 ID，但在这里无法访问它，例如，

```
var proCategoryId = _categoryService.GetProductCategoryById(productCategoryId); 
```

我怎样才能找到实现这一目标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T10:17:24.790

```
var productCategoryId = (from ProductCategory in context.ProductCategories
                         where ProductCategory.ProductId==id
                         select ProductCategory.ProductCategoryId).SingleOrDefault(); 
```

# c# - 使用 HTML 敏捷包删除表列

> ID：11699832
> 
> 赞同：1
> 
> 时间：2012-07-28T09:28:13.703
> 
> 标签：c#, asp.net, html-table, html-agility-pack

我已经为我自己的网站使用 C# 从网站上抓取了一个表格并将其加载到一个字符串中。列太多了，所以我想知道是否有一种简单的方法可以删除一些，可能使用 HTML Agility Pack，但如果需要，可以使用 C#。

字符串中的表如下所示：

```
 <table>
        <tr>
            <th scope="col">&nbsp; </th>
            <th scope="col">&nbsp; </th>
            <th scope="col">P </th>
            <th scope="col">W </th>
            <th scope="col">L </th>
            <th scope="col">T </th>
            <th scope="col">NR </th>
            <th scope="col">Bat </th>
            <th scope="col">Bowl </th>
            <th scope="col">Pen </th>
            <th scope="col">Pts </th>
        </tr>
        <tr>
            <td>1 </td>
            <td><a href="fixbyteam.aspx?clubid=44576&teamid=58170&divid=32181">Rayleigh 2nd</a> </td>
            <td>12 </td>
            <td>8 </td>
            <td>1 </td>
            <td>0 </td>
            <td>3 </td>
            <td>14 </td>
            <td>52 </td>
            <td>0 </td>
            <td>209 </td>
        </tr>
        <tr>
            <td>2 </td>
            <td><a href="fixbyteam.aspx?clubid=44612&teamid=58169&divid=32181">Rainham 1st</a> </td>
            <td>12 </td>
            <td>8 </td>
            <td>1 </td>
            <td>1 </td>
            <td>2 </td>
            <td>12 </td>
            <td>56 </td>
            <td>-15 </td>
            <td>199 </td>
        </tr>
        <tr class="lineAbove">
            <td>3 </td>
            <td><a href="fixbyteam.aspx?clubid=44571&teamid=58162&divid=32181">Old Chelmsfordians 2nd</a> </td>
            <td>12 </td>
            <td>5 </td>
            <td>5 </td>
            <td>0 </td>
            <td>2 </td>
            <td>10 </td>
            <td>48 </td>
            <td>0 </td>
            <td>148 </td>
        </tr>
        <tr>
            <td>4 </td>
            <td><a href="fixbyteam.aspx?clubid=44570&teamid=58161&divid=32181">Little Baddow 2nd</a> </td>
            <td>12 </td>
            <td>5 </td>
            <td>4 </td>
            <td>0 </td>
            <td>3 </td>
            <td>21 </td>
            <td>43 </td>
            <td>-15 </td>
            <td>144 </td>
        </tr>
        <tr>
            <td>5 </td>
            <td><a href="fixbyteam.aspx?clubid=44606&teamid=58159&divid=32181">Rayne 1st</a> </td>
            <td>12 </td>
            <td>5 </td>
            <td>4 </td>
            <td>0 </td>
            <td>3 </td>
            <td>6 </td>
            <td>39 </td>
            <td>0 </td>
            <td>140 </td>
        </tr>
        <tr>
            <td>6 </td>
            <td><a href="fixbyteam.aspx?clubid=44605&teamid=58158&divid=32181">Terling 1st</a> </td>
            <td>12 </td>
            <td>4 </td>
            <td>5 </td>
            <td>1 </td>
            <td>2 </td>
            <td>12 </td>
            <td>35 </td>
            <td>0 </td>
            <td>129 </td>
        </tr>
        <tr>
            <td>7 </td>
            <td><a href="fixbyteam.aspx?clubid=44602&teamid=58154&divid=32181">Willow Herbs 1st</a> </td>
            <td>12 </td>
            <td>4 </td>
            <td>6 </td>
            <td>0 </td>
            <td>2 </td>
            <td>9 </td>
            <td>34 </td>
            <td>0 </td>
            <td>117 </td>
        </tr>
        <tr>
            <td>8 </td>
            <td><a href="fixbyteam.aspx?clubid=50925&teamid=68864&divid=32181">Ongar 1st</a> </td>
            <td>12 </td>
            <td>3 </td>
            <td>5 </td>
            <td>0 </td>
            <td>4 </td>
            <td>3 </td>
            <td>42 </td>
            <td>-5 </td>
            <td>108 </td>
        </tr>
        <tr class="lineAbove">
            <td>9 </td>
            <td><a href="fixbyteam.aspx?clubid=44607&teamid=58163&divid=32181">Sandon Sports 1st</a> </td>
            <td>12 </td>
            <td>3 </td>
            <td>6 </td>
            <td>0 </td>
            <td>3 </td>
            <td>8 </td>
            <td>27 </td>
            <td>0 </td>
            <td>98 </td>
        </tr>
        <tr>
            <td>10 </td>
            <td><a href="fixbyteam.aspx?clubid=44582&teamid=58156&divid=32181">Little Waltham 2nd</a> </td>
            <td>12 </td>
            <td>1 </td>
            <td>9 </td>
            <td>0 </td>
            <td>2 </td>
            <td>14 </td>
            <td>25 </td>
            <td>0 </td>
            <td>65 </td>
        </tr>
    </table> 
```

我想删除第 8-10 列（蝙蝠、碗和钢笔）。我不确定从哪里开始，所以任何指针都会有所帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T09:46:47.347

您需要遍历每个节点并从每个节点`tr`中删除第 8、第 9 和第 10`td`个节点。

```
bool first = true;
foreach (HtmlNode row in doc.DocumentNode.SelectNodes("//tr"))
{
    if (first)
    {
        row.RemoveChild(row.SelectSingleNode("th[10]"));
        row.RemoveChild(row.SelectSingleNode("th[9]"));
        row.RemoveChild(row.SelectSingleNode("th[8]"));
        first = false;
    }
    else
    {
        row.RemoveChild(row.SelectSingleNode("td[10]"));
        row.RemoveChild(row.SelectSingleNode("td[9]"));
        row.RemoveChild(row.SelectSingleNode("td[8]"));
    }
} 
```

# ajax - Wicket：未调用 Ajax 回调 onTimer() 方法

> ID：11699833
> 
> 赞同：0
> 
> 时间：2012-07-28T09:28:16.153
> 
> 标签：ajax, wicket

我使用 wicket 1.5 开发 web 应用程序。我有三个网页，主页、ParentWebpage 和一个面板。当我在 ParentWebpage 中设置 AbstractAjaxTimerBehavior 并在面板中调用回调函数 onTimer() 时，一切都很好。但是面板中也是 AbstractAjaxTimerBehavior 并且从不调用回调函数 onTimer，但是为什么？

这是我的例子：

主页.java

```
BookmarkablePageLink bookmarkablePageLink = new BookmarkablePageLink("linkToCurrentDiagnosePage", TestParent.class);
bookmarkablePageLink.add("label");
item.add(bookmarkablePageLink); 
```

--> 现在我可以导航到 TestParent 类

TestParent.java

```
public class TestParent extends WebPage {
    /** The Constant logger. */
    private static final Logger LOGGER = Logger.getLogger(TestParent.class);
    boolean isSet = false;
    public TestParent() {
        LOGGER.error("Parent -> Cstr");
        Fragment fragment = new Fragment("fragments", "fragment1", TestParent.this);
        fragment.setOutputMarkupId(true);
        add(fragment);

        add(new AbstractAjaxTimerBehavior(Duration.seconds(1)) {

            @Override
            protected void onTimer(AjaxRequestTarget target) {
                LOGGER.error("Parent -> I'am here");
                if(isSet == false){
                    LOGGER.error("Parent -> I set the panel");
                    isSet = true;
                    Fragment fragment = new Fragment("fragments", "fragment2", TestParent.this);
                    fragment.setOutputMarkupId(true);
                    fragment.add(new TestChild("panel"));
                    TestParent.this.replace(fragment);
                    target.add(fragment);
                }
            }
        });
    }
} 
```

TestParent.html

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
    <span wicket:id="fragments"></span>

    <wicket:fragment wicket:id="fragment1">
        FILL TEXT
    </wicket:fragment>

    <wicket:fragment wicket:id="fragment2">
        <span wicket:id="panel">[message]</span>
    </wicket:fragment>
</body>
</html> 
```

TestChild.java

```
public class TestChild extends Panel {
    private static final Logger LOGGER = Logger.getLogger(TestChild.class);

    public TestChild(String id) {
        super(id);
        LOGGER.error("Child -> Cstr");

        add(new AbstractAjaxTimerBehavior(Duration.seconds(1)) {

            @Override
            protected void onTimer(AjaxRequestTarget target) {
                LOGGER.error("CHILD --> I'am here");
            }
        });               
    }
} 
```

TestChild.html

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
    <wicket:panel>

    </wicket:panel>
</body> 
```

输出：

```
ERROR - TestParent                 - Parent -> Cstr

ERROR - TestParent                 - Parent -> I'am here

ERROR - TestParent                 - Parent -> I set the panel

ERROR - TestChild                  - Child -> Cstr

ERROR - TestParent                 - Parent -> I'am here

ERROR - TestParent                 - Parent -> I'am here

ERROR - TestParent                 - Parent -> I'am here

ERROR - TestParent                 - Parent -> I'am here 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T15:06:17.070

假设您使用的是真实代码，这是因为您使用 1 秒计时器来创建它们。然后在您的计时器代码中，您正在重新创建子面板（以及因此孩子的计时器行为）。子面板永远没有机会开火！

# iphone - 存储交易收据的哪一部分以检查到期

> ID：11699835
> 
> 赞同：0
> 
> 时间：2012-07-28T09:28:52.690
> 
> 标签：iphone, ios, ios4, in-app-purchase

我正在尝试将交易收据存储到数据库中，请说明将哪部分数据存储在苹果服务器返回的数据库中。

请告诉我，谢谢

> “收据”：{“ ointer_purchase_date_pst”：“ 2012-07-24 05:41:19 America/los_angeles”，“ simelo_endentifier”：“ 46F070C011E011E0117BC168AEE9D39D39D3901DCF961DCF961F88C08C08C08C09333333333333333333333YDARSACTION？ transaction_id":"1000000053343936", "quantity":"1", "product_id":"com.XX.XXX", "original_purchase_date_ms":"1343133679239", "bid":"com.XX.XXX", "web_order_line_item_id" :"1000000026126403", "bvrs":"1.0", "expires_date_formatted":"2012-07-24 13:11:18 Etc/GMT", "purchase_date":"2012-07-24 12:41:18 Etc/ GMT", "purchase_date_ms":"1343133678998", "expires_date_formatted_pst":"2012-07-24 06:11:18 America/Los_Angeles", "purchase_date_pst":"2012-07-24 05:41:18 America/Los_Angeles", "original_purchase_date":"2012- 07-24 12:41:19 Etc/GMT", "item_id":"547592716"}, "latest_receipt_info":{"original_purchase_date_pst":"2012-07-24 05:41:19 America/Los_Angeles", "unique_identifier" ：“46f070c011e0da17bc168ae9d3901dcf961f8c09”，“original_transaction_id”：“1000000053343936”，“expires_date”：“1343135478000”，“transaction_id”：“1000000053343936”，“产品编号：”XX.1 original_purchase_date_ms":"1343133679000", "bid":"com.XX.XXX", "web_order_line_item_id":"1000000026126403", "bvrs":"1.0", "expires_date_formatted":"2012-07-24 13:11:18 Etc/GMT" , "purchase_date":"2012-07-24 12:41:18 Etc/GMT", "purchase_date_ms":"1343133678000", "expires_date_formatted_pst":"2012-07-24 06:11:18 America/Los_Angeles", " purchase_date_pst":"2012-07-24 05:41:18 America/Los_Angeles", "original_purchase_date":"2012-07-24 12:41:19 Etc/GMT", "item_id":"547592716"}, "状态":0, "latest_receipt":"ewoJInNpZ25hdHVyZSIgPSAiQWgvbnBVK2liUWpHR3VHWFBrNlZ0OUUzbEwwWjFPeUgyeHYxM0RKbXYxK1RuRHBZa1JCcThYbXlxd1BaUDRvNDcvY3A1RWNCMUFmYi9SbnYzQldoZWNVQ1ZsVk85b0hmTDljUVloY01TTHdyNURFcVdFTTZqbXRpRjNxN3VldmlCcE5qb2l3b3pjWmIyaXlzYTE3emVoaVplTlNRVlByYXhUSmppNFFoTjdDWkFBQURWekNDQTFNd2dnSTdvQU1DQVFJQ0NHVVVrVTNaV0FTMU1BMEdDU3FHU0liM0RRRUJCUVVBTUg4eEN6QUpCZ05WQkFZVEFsVlRNUk13RVFZRFZRUUtEQXBCY0hCc1pTQkpibU11TVNZd0pBWURWUVFMREIxQmNIQnNaU0JEWlhKMGFXWnBZMkYwYVc5dUlFRjFkR2h2Y21sMGVURXpNREVHQTFVRUF3d3FRWEJ3YkdVZ2FWUjFibVZ6SUZOMGIzSmxJRU5sY25ScFptbGpZWFJwYjI0Z1FYVjBhRzl5YVhSNU1CNFhEVEE1TURZeE5USXlNRFUxTmxvWERURTBNRFl4TkRJeU1EVTFObG93WkRFak1DRUdBMVVFQXd3YVVIVnlZMmhoYzJWU1pXTmxhWEIwUTJWeWRHbG1hV05oZEdVeEd6QVpCZ05WQkFzTUVrRndjR3hsSUdsVWRXNWxjeUJUZEc5eVpURVRNQkVHQTFVRUNnd0tRWEJ3YkdVZ1NXNWpMakVMTUFrR0ExVUVCaE1DVlZNd2daOHdEUVlKS29aSWh2Y05BUUVCQlFBRGdZMEFNSUdKQW9HQkFNclJqRjJjdDRJclNkaVRDaGFJMGc4cHd2L2NtSHM4cC9Sd1YvcnQvOTFYS1ZoTmw0WElCaW1LalFRTmZnSHNEczZ5anUrK0RyS0pFN3VLc3BoTWRkS1lmRkU1ckdYc0FkQkVqQndSSXhleFRldngzSExFRkdBdDFtb0t4NTA5ZGh4dGlJZERnSnYyWWFWczQ5QjB1SnZOZHk2U01xTk5MSHNETHpEUzlvWkhBZ01CQUFHamNqQndNQXdHQTFVZEV3RUIvd1FDTUFBd0h3WURWUjBqQkJnd0ZvQVVOaDNvNHAyQzBnRVl0VEpyRHRkREM1RllRem93RGdZRFZSMFBBUUgvQkFRREFnZUFNQjBHQTFVZERnUVdCQlNwZzRQeUdVakZQaEpYQ0JUTXphTittVjhrOVRBUUJnb3Foa2lHOTJOa0JnVUJCQUlGQURBTkJna3Foa2lHOXcwQkFRVUZBQU9DQVFFQUVhU2JQanRtTjRDL0lCM1FFcEszMlJ4YWNDRFhkVlhBZVZSZVM1RmFaeGMrdDg4cFFQOTNCaUF4dmRXLzNlVFNNR1k1RmJlQVlMM2V0cVA1Z204d3JGb2pYMGlreVZSU3RRKy9BUTBLRWp0cUIwN2tMczlRVWU4Y3pSOFVHZmRNMUV1bVYvVWd2RGQ0TndOWXhMUU1nNFdUUWZna1FRVnk4R1had1ZIZ2JFL1VDNlk3MDUzcEdYQms1MU5QTTN3b3hoZDNnU1JMdlhqK2xvSHNTdGNURXFlOXBCRHBtRzUrc2s0dHcrR0szR01lRU41LytlMVFUOW5wL0tsMW5qK2FCdzdDMHhzeTBiRm5hQWQxY1NTNnhkb3J5L0NVdk02Z3RLc21uT09kcVRlc2JwMGJzOHNuNldxczBDOWRnY3hSSHVPTVoydG04bnBMVW03YXJnT1N6UT09IjsKCSJwdXJjaGFzZS1pbmZvIiA9ICJld29KSW05eWFXZHBibUZzTFhCMWNtTm9ZWE5sTFdSaGRHVXRjSE4wSWlBOUlDSXlNREV5TFRBM0xUSTBJREExT2pReE9qRTVJRUZ0WlhKcFkyRXZURzl6WDBGdVoyVnNaWE1pT3dvSkluQjFjbU5vWVhObExXUmhkR1V0YlhNaUlEMGdJakV6TkRNeE16TTJOemd3TURBaU93b0pJblZ1YVhGMVpTMXBaR1Z1ZEdsbWFXVnlJaUE5SUNJME5tWXdOekJqTURFeFpUQmtZVEUzWW1NeE5qaGhaVGxrTXprd01XUmpaamsyTVdZNFl6QTVJanNLQ1NKdmNtbG5hVzVoYkMxMGNtRnVjMkZqZEdsdmJpMXBaQ0lnUFNBaU1UQXdNREF3TURBMU16TTBNemt6TmlJN0Nna2laWGh3YVhKbGN5MWtZWFJsSWlBOUlDSXhNelF6TVRNMU5EYzRNREF3SWpzS0NTSjBjbUZ1YzJGamRHbHZiaTFwWkNJZ1BTQWlNVEF3TURBd01EQTFNek0wTXprek5pSTdDZ2tpYjNKcFoybHVZV3d0Y0hWeVkyaGhjMlV0WkdGMFpTMXRjeUlnUFNBaU1UTTBNekV6TXpZM09UQXdNQ0k3Q2draWQyVmlMVzl5WkdWeUxXeHBibVV0YVhSbGJTMXBaQ0lnUFNBaU1UQXdNREF3TURBeU5qRXlOalF3TXlJN0Nna2lZblp5Y3lJZ1BTQWlNUzR3SWpzS0NTSmxlSEJwY21WekxXUmhkR1V0Wm05eWJXRjBkR1ZrTFhCemRDSWdQU0FpTWpBeE1pMHdOeTB5TkNBd05qb3hNVG94T0NCQmJXVnlhV05oTDB4dmMxOUJibWRsYkdWeklqc0tDU0pwZEdWdExXbGtJaUE5SUNJMU5EYzFPVEkzTVRZaU93b0pJbVY0Y0dseVpYTXRaR0YwWlMxbWIzSnRZWFIwWldRaUlEMGdJakl3TVRJdE1EY3RNalFnTVRNNk1URTZNVGdnUlhSakwwZE5WQ0k3Q2draWNISnZaSFZqZEMxcFpDSWdQU0FpWTI5dExtaHZhUzUwWlhOMExuTmhiWEJzWlhCdlpXMTBlWEJsTG5OcGVHMXZiblJvY3lJN0Nna2ljSFZ5WTJoaGMyVXRaR0YwWlNJZ1BTQWlNakF4TWkwd055MHlOQ0F4TWpvME1Ub3hPQ0JGZEdNdlIwMVVJanNLQ1NKdmNtbG5hVzVoYkMxd2RYSmphR0Z6WlMxa1lYUmxJaUE5SUNJeU1ERXlMVEEzTFRJMElERXlPalF4T2pFNUlFVjBZeTlIVFZRaU93b0pJbUpwWkNJZ1BTQWlZMjl0TG1GdVoyeGxjaTVvYjJscGJtRndjSEIxY21Ob1lYTmxkR1Z6ZEdsdVp5STdDZ2tpY0hWeVkyaGhjMlV0WkdGMFpTMXdjM1FpSUQwZ0lqSXdNVEl0TURjdE1qUWdNRFU2TkRFNk1UZ2dRVzFsY21sallTOU1iM05mUVc1blpXeGxjeUk3Q2draWNYVmhiblJwZEhraUlEMGdJakVpT3dwOSI7CgkiZW52aXJvbm1lbnQiID0gIlNhbmRib3giOwoJInBvZCIgPSAiMTAwIjsKCSJzaWduaW5nLXN0YXR1cyIgPSAiMCI7Cn0"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T05:15:57.947

这很容易猜，这`"expires_date"`就是你需要的东西。但是，如果您想重新验证，如果用户稍后继续订阅，您应该调用 Apple 服务器——在此之前无法知道，真的。

# javascript - 使用 jquery 从一个下拉列表中选择选项后启用另一个下拉选项

> ID：11699837
> 
> 赞同：0
> 
> 时间：2012-07-28T09:29:33.383
> 
> 标签：javascript, jquery

我正在使用这 4 个下拉菜单。当页面加载时，只有“大小”下拉菜单应该启用，其余的不应该启用。当我从大小下拉菜单中选择任何一个选项时，下一个样式下拉菜单应该启用，这对于所有下拉菜单都是相同的。意味着下一个下拉菜单是depanded on previous.当我从最后一个下拉列表中选择选项时，搜索按钮应该显示，当页面加载时我隐藏它。我已经将图像作为搜索按钮。我需要简单的 jquery 代码。请帮帮我。请看下面的代码：

```
 <div class="combotitle">Size</div>
        <form>
        <select id="Size" name="Size" class="select" 
        style="width:206px; border:#de73ff solid 1px; color:#444444;">
        <option selected="selected">Size</option>
        <option>Size</option>
        <option>Size</option>
        <option>Size</option>
        </select>
        </form>

        <div class="combotitle">Style</div>
        <form>
        <select id="Style" name="Style" class="select" 
        style="width:206px; border:#de73ff solid 1px; color:#444444;">
        <option selected="selected">Style</option>
        <option>Style</option>
        <option>Style</option>
        <option>Style</option>
        </select>
        </form>

        <div class="combotitle">Color</div>
        <form>
        <select id="Color" name="Color" class="select" 
        style="width:206px; border:#de73ff solid 1px; color:#444444;">
        <option selected="selected">Color</option>
        <option>Color</option>
        <option>Color</option>
        <option>Color</option>
        </select>
        </form>

        <div class="combotitle">Brand</div>
        <form>
        <select id="Brand" name="Brand" class="select" 
        style="width:206px; border:#de73ff solid 1px; color:#444444;">
        <option selected="selected">Brand</option>
        <option>Brand</option>
        <option>Brand</option>
        <option>Brand</option>
        </select>
        </form>

    <div class="CatsearchButton">
      <a href="#"><img src="/searchprd.png" alt="Search" title="Search" /></a>
    </div>
    </div>

<!--------------------------------------------------------------->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Product_Page</title>
<link href="css/product_page.css" rel="stylesheet" type="text/css" />
</head>

<body>

<div class="Prdhead">

<!--wrapper start-->
<div id="Prdheawrap">

<div class="Prdheader">
<div class="PrdheadeLeft">
<div class="shopbyprd"><img src="/v/vspfiles/assets/images/shopbycategory_prdct.png" alt="" /></div>
<div class="catMenu">
<ul>
<li><a href="#">Bra Category Option-1</a></li>
<li><a href="#">Bra Category Option-2</a></li>
<li><a href="#">Bra Category Option-3</a></li>
<li><a href="#">Bra Category Option-4</a></li>
<li><a href="#">Bra Category Option-5</a></li>
<li><a href="#">Bra Category Option-6</a></li>
</ul>
</div>
</div>
<div class="PrdheadRight">
<div class="PrdformBox">
<div class="CatTitle"><img src="/v/vspfiles/assets/images/perfetcbra.png" alt="" /></div>

<div class="formContainer">
<div class="combotitle">Size</div>
<form>
<select id="Make" name="Make" class="select" onchange="test1(this.value)"
    style="width:206px; border:#de73ff solid 1px; color:#444444;">
<option selected="selected">Size</option>
<option>Size</option>
<option>Size</option>
<option>Size</option>
</select>
</form>

<div class="combotitle">Style</div>
<form>
<select class="select" id="year" name="year" onchange="test2(this.value)" 
    style="width:206px; border:#de73ff solid 1px; color:#444444;">
<option selected="selected">Style</option>
<option>Style</option>
<option>Style</option>
<option>Style</option>
</select>
</form>

<div class="combotitle">Color</div>
<form>
<select class="select" id="model" name="model" onchange="test3(this.value)" 
     style="width:206px; border:#de73ff solid 1px; color:#444444;">
<option selected="selected">Color</option>
<option>Color</option>
<option>Color</option>
<option>Color</option>
</select>
</form>

<div class="combotitle">Brand</div>
<form>
<select class="select" id="model2" name="model2" onchange="test4(this.value)"  
     style="width:206px; border:#de73ff solid 1px; color:#444444;">
<option selected="selected">Brand</option>
<option>Brand</option>
<option>Brand</option>
<option>Brand</option>
</select>
</form>

<div class="catBotBox">
<div class="checkbox">
<input type="checkbox" />
</div>
<div class="checktxt">
Sale Items<br  /> Only</div>
<div class="CatsearchButton">
    <a href="#">
        <img src="/v/vspfiles/assets/images/searchprd.png" 
        alt="Search" title="Search" onclick="callRedir(model.value)" 
        style="display:none" />
    </a>
</div>
</div>
</div>

<div id="data" style="display:none"></div>  

</div>
</div>

</div>
<!--wrapper end-->
</div>
</div>
<script type="text/javascript">
            var jSelect1=$("select[name='Make']");
              jSelect1.attr('disabled', 'disabled');

            var jSelect2=$("select[name='year']");
              jSelect2.attr('disabled', 'disabled');

            var jSelect3=$("select[name='model']");
              jSelect3.attr('disabled', 'disabled');

              var jSelect4=$("select[name='model2']");
              jSelect4.attr('disabled', 'disabled');

            </script>

            <script type="text/javascript">

            function test1(val) 
            {

            var jSelect2=$("select[name='year']");
              jSelect2.attr('disabled', 'disabled');

            var jSelect3=$("select[name='model']");
              jSelect3.attr('disabled', 'disabled');

              dataRead(val);

            }

        function dataRead(valData)
        {

          // $("#list1").append('<img class="select" align="middle" id="img1"
              // width=22px height=23px src="/v/vspfiles/assets/images/loading_circle-
              //sm.gif">');
           var html="";
            $.ajax({
             type: "GET",
             url: valData,
             dataType: "html",
             async:false,
             cache: true,
             success: function(data){

                 if(data)
                 {
                  html=data;

                 }
             }

          });             

           var options1='<option value="">[ Select Your Series ]</option>';
          cn=$(html).find('div').each(function(){

          if($(this).attr('class')=='right')
          {
              var cnt=$(this).find('a').each(function(){

                if($(this).attr('class')=='subcategory_link')
                {

                options1=options1+'<option 
                            value='+$(this).attr('href')+'>'+$(this).text()+'</option>'
                }

              }).length;

              //alert(cnt);

          }
          }).length;
            $('#year').html("");
            var jSelect=$("select[name='year']");
                    jSelect.removeAttr('disabled');
           $('#year').append(options1); 

          // $("#img1").attr('src',"");

            //$("#text1").html('');         

        }
            function test2(val) 
            {

              var jSelect3=$("select[name='model']");
              jSelect3.attr('disabled', 'disabled');

              var jSelect4=$("select[name='model2']");
              jSelect4.attr('disabled', 'disabled');

              dataRead2(val);

            }

            function dataRead2(valData)
        {

         //$("#new1").append('<img class="select" align="middle" id="img2" 
             //width=22px height=23px 
             //src="/v/vspfiles/assets/images/loading_circle-sm.gif">');
           var html="";
            $.ajax({
             type: "GET",
             url: valData,
             dataType: "html",
             async:false,
             cache: true,
             success: function(data){

                 if(data)
                 {
                  html=data;

                 }
             }

          });

           var options1='<option value="">[ Select Your Cartridge# ]</option>';
          cn=$(html).find('div').each(function(){

          if($(this).attr('class')=='right')
          {
              var cnt=$(this).find('a').each(function(){

                if($(this).attr('class')=='subcategory_link')
                {

                options1=options1+'<option value='+$(this).attr('href')+'>'+$(this).text()+'</option>'
                }

              }).length;

              //alert(cnt);

          }
          }).length;
            $('#model').html("");

            var jSelect=$("select[name='model']");
                    jSelect.removeAttr('disabled');
           $('#model').append(options1); 

          // $("#img2").attr('src',"");

        }

<!--    #########   --> 
    function test3(val) 
            {

              var jSelect4=$("select[name='model2']");
              jSelect4.attr('disabled', 'disabled');

              dataRead3(val);

            }

            function dataRead3(valData)
        {

         //$("#new1").append('<img class="select" align="middle" id="img2"
             // width=22px height=23px src="/v/vspfiles/assets/images/loading_circle-
             //sm.gif">');
           var html="";
            $.ajax({
             type: "GET",
             url: valData,
             dataType: "html",
             async:false,
             cache: true,
             success: function(data){

                 if(data)
                 {
                  html=data;

                 }
             }

          });             

           var options1='<option value="">[ Select Your Cartridge# ]</option>';
          cn=$(html).find('div').each(function(){

          if($(this).attr('class')=='right')
          {
              var cnt=$(this).find('a').each(function(){

                if($(this).attr('class')=='subcategory_link')
                {

                options1=options1+'<option value='+$(this).attr('href')+'>'+$(this).text()+'</option>'
                }

              }).length;

              //alert(cnt);

          }
          }).length;
            $('#model2').html("");

            var jSelect=$("select[name='model']");
                    jSelect.removeAttr('disabled');
           $('#model2').append(options1); 

          // $("#img2").attr('src',"");
          }     

<!--###########-->

        function test4(val)
            {
               document.getElementById("CatsearchButton").style.display="block";

            }

            function getCookie(c_name)
             {

              var i,x,y,ARRcookies=document.cookie.split(";");

                for (i=0;i<ARRcookies.length;i++)
                {
                  x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));
                  y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);
                  x=x.replace(/^\s+|\s+$/g,"");

                  if (x==c_name)
                    {
                    return unescape(y);
                    }

                  }

            }

            function callRedir(valRed)
            {
             window.location.href=valRed;

            }

        function setCookie(c_name,value,exdays)
        {
        var exdate=new Date();
        exdate.setDate(exdate.getDate() + exdays);
        var c_value=escape(value) + ((exdays==null) ? "" : "; expires="+exdate.toUTCString());
        document.cookie=c_name + "=" + c_value;
        }

        function setHref()
            {

            appendStr=getCookie("append_string");

            if(appendStr==null)
            {
            appendStr=1;
            }

            $("ul li.nav a").each(function(index){
            var st=$(this).attr("href");
            if(st.substring(0,18)=="/SearchResults.asp")
            {
              strHref= $(this).attr("href");
              strhref=strHref.split("&");
              if(appendStr==1)
              {
              strHref=strhref[0];
              }
              else
              {
              strHref=strhref[0]+appendStr;
              }
              $(this).attr("href",strHref);
            }
            });

            }
        setHref();  

    </script>     

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T09:38:52.433

尝试以下操作：

```
$('select:not("#Size")').find('option').prop('disabled', true);
$('.CatsearchButton').hide();

$('select').change(function(){      
    $(this).closest('form').next().next().find('option').prop('disabled', false)
})

$('#Brand').change(function(){
    $('.CatsearchButton').show();
}) 
```

[演示](http://jsfiddle.net/68phX/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T14:00:30.433

禁用选项不是跨浏览器的解决方案。它在 Opera 中肯定行不通。您必须禁用整个菜单（或删除/重新插入选项）。

此外，如果（如 javascript 中所示）您想要选择带有空“选择选项”选项的菜单，那么您应该：

*   选择有效选项后，启用下一个菜单
*   在重新选择 null 选项时，禁用所有以下菜单。

这可以通过以下方式实现：

```
$('.CatsearchButton').hide();

var $selects = $('select.criterion');
$selects.not("#Brand").on('change', function() {
    $selects.each(function() {
        var $this = $(this);
        var disable = $this.val() == '';
        $this.closest('form').nextAll().find('select').prop('disabled', disable);
        if (disable) return false;
    })
}).eq(0).trigger('change');
$selects.filter('#Brand').change(function() {
    $('.CatsearchButton').show();
}); 
```

**[演示](http://jsfiddle.net/wQTfN/1/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T10:40:46.523

您可以使用该`disabled`属性。

```
<form id="size_form">
    <label>Size</label>
    <select id="size_select" name="Size" class="select" style="width:206px; border:#de73ff solid 1px; color:#444444;">
        <option selected="selected">Size</option>
        <option>Size</option>
        <option>Size</option>
        <option>Size</option>
    </select>
    <input type="submit" value="Submit" />
</form>

<form id="style_form">
    <label>Style</label>
    <select id="style_select" disabled="disabled" name="Style" class="select" style="width:206px; border:#de73ff solid 1px; color:#444444;">
        <option selected="selected">Style</option>
        <option>Style</option>
        <option>Style</option>
        <option>Style</option>
    </select>    
</form> 
```

进而：

```
​$('#size_form').submit(function () {
    $('#style').removeAttr('disabled');
});​​​​​​​​ 
```

ETC... ：）

# android - Android - 将字符串转换为长值

> ID：11699840
> 
> 赞同：-1
> 
> 时间：2012-07-28T09:29:43.767
> 
> 标签：android, android-preferences, string-conversion

我正在创建一个相当简单的android应用程序，它基本上是一个计时器，我正在尝试制作它，以便您可以在设置中设置计时器长度，然后使用首选项检索该值并将其设置为计时器长度。我可以从首选项中检索值并简单地显示它。

但是当我尝试使用 Long.parseLong(string) 或 Long.valueOf(String) 和 Long.valueOf(Int) 将字符串值（即 1）转换为 long 值时，我在代码中没有收到任何错误但是当我尝试启动应用程序时，它会强制关闭并且错误日志说它是由 NumberFormatException 引起的，这是我正在使用的代码部分，如果我删除了 Long.ParseLong... 其他所有内容工作正常。

```
 private long interval =    1000 ;
        private long startTime = 30000;

        /** Called when the activity is first created. */
        public void onCreate(Bundle savedInstanceState)
            {
                super.onCreate(savedInstanceState);
                setContentView(R.layout.activity_countdown_timer);

                 SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);

                 StringBuilder builder = new StringBuilder();
                 builder.append("\n"+ prefs.getString("timerLength","NULL"));
                 startTime = Long.parseLong(builder.toString());

                 TextView view = (TextView)findViewById(R.id.showTimer);
                 view.setText(builder.toString()); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T09:48:41.917

请删除“\n”

```
StringBuilder builder = new StringBuilder();
builder.append(prefs.getString("timerLength","NULL"));
startTime = Long.parseLong(builder.toString()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-28T09:39:50.513

问题是`'\n'`性格。字符串应该只包含 a`long`作为 String 才能成功解析。

# drawing - 使用 SetPixel 在显示器上绘图时如何避免像素冲突？

> ID：11699842
> 
> 赞同：0
> 
> 时间：2012-07-28T09:29:47.570
> 
> 标签：drawing, screen

我`SetPixel(GetDC(0),x,y,color)`以前在屏幕上写字，但是当我这样做时，其他一些程序会更新它的屏幕并覆盖我绘制的像素，因此在屏幕上绘制的图像看起来会闪闪发光。

我怎样才能避免这种情况并在屏幕上绘制一些东西而不用担心它会被覆盖？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-15T14:46:41.810

屏幕是共享资源。如果您想要专属于您的东西，请创建一个窗口并在其中绘制。

# css - 图像的CSS居中不起作用

> ID：11699847
> 
> 赞同：3
> 
> 时间：2012-07-28T09:30:54.263
> 
> 标签：css, alignment, centering

我正在尝试使用 margin-left 和 margin-right auto 水平居中图像（forces.png），但图像保持左对齐。我的网站是[http://goo.gl/cHO1u](http://goo.gl/cHO1u) 我使用的代码有什么问题？谢谢

HTML：

```
<div class="section" id="presentation">
<div id="presentation-highlevel">
<p>NOTRE ENTREPRISE</p>
<p>ddfdsfdsfdsfdsjfl dfljdsfdsfjdsjfdlksj dfljdslfjldsjflkdsjflsjfdls ldf,dlsmjfdsjfsdmfjdmsjfms dfmdsfjmdsjfmdsjfmdsjfdlms mkdfmksdmfkdmsfkdsfdsmfkmldskf dfmdmkfmdkfmdlskf dfkdmfkdmkfmdskf dfmkdsmfkdsmkfmdskfdms dskfdsmkfdsmkfmdsfkd </p>
</div>
<div id="presentation-highlights"><img src="images/forces.png" alt="Picture" /></div>
</div><!--END page1--> 
```

CSS：

```
#presentation
{
    height:1300px;
    background:#afc9ff; 
  background: url(../images/norway-landscape60.jpg) no-repeat center fixed; 
  -webkit-background-size: cover; /* pour Chrome et Safari */
  -moz-background-size: cover; /* pour Firefox */
  -o-background-size: cover; /* pour Opera */
  background-size: cover; /* version standardisée */
}

#presentation-highlights

{
width: 100%;
display: block;
margin-left:auto;
margin-right:auto;
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-28T09:33:48.833

```
#presentation-highlights {
text-align:center;
width:100%;
display:block;
margin:auto;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T09:41:59.173

```
#presentation {
    height:100%;
    background:#afc9ff; 
    background: url(../images/norway-landscape60.jpg) no-repeat center fixed; 
    text-align: center;
}
body {
    text-align: center;
} 
```

# iphone - 在 iphone webView 中打开 .docx 的代码

> ID：11699850
> 
> 赞同：1
> 
> 时间：2012-07-28T09:31:43.280
> 
> 标签：iphone, ios, ipad, uiwebview

我是 iPhone 的新手，我正在尝试在 UIwebView 中打开 .docx 文件，我编写了以下代码

```
NSString *urlAddress = [[NSBundle mainBundle] pathForResource:@"Arabic literature" 
                                                              ofType:@"docx"]; 
NSURL *url  = [NSURL fileURLWithPath:urlAddress];
NSURLRequest *requestObj  = [NSURLRequest requestWithURL:url];

NSData *data = [NSData dataWithContentsOfFile:urlAddress];

//[_webView loadRequest:requestObj];
[_webView loadData:data MIMEType:@"application/vnd.ms-word" textEncodingName:@"UTF-8" baseURL:nil]; 
```

但它给了我以下例外：

```
DiskImageCache: Could not resolve the absolute path of the old directory.
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[NSURL initFileURLWithPath:]: nil string parameter' 
```

考虑到我在支持文件中复制了文件“Arabicliterature.docx”。我该如何解决这个异常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T10:41:36.750

好的，你为什么不使用这样的东西：

```
 NSURLRequest *request = [NSURLRequest requestWithURL:url];
[_webView loadRequest:request]; 
```

抱歉的评论不起作用，所以不得不给出答案。

# javascript - javascript scrollTop 函数

> ID：11699852
> 
> 赞同：0
> 
> 时间：2012-07-28T09:32:00.727
> 
> 标签：javascript, html, javascript-events

嗨，我一直在使用 javascript scrollTop 函数将 div 滚动到顶部 5 px。但它不工作。我在用

```
scdiv.scrollTop = "5px"; 
```

问题是它将 div 滚动到顶部而不是移动到 5 px。有什么建议么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T10:30:13.277

scrollTop 是一个属性，它的值是一个 int。

```
div.scrollTop += 5; 
```

[https://developer.mozilla.org/en/DOM/element.scrollTop](https://developer.mozilla.org/en/DOM/element.scrollTop)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T09:51:19.430

```
$("#yourButtonId").on('click',function(){

var scDiv = $("#scdiv");

var top = scDiv.css('top');

top = parseInt(top);

scDiv.css('top',(top-5)+"px");

//To make it visually scrollable

  scDiv.animate({
    top: top
  },500);

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T23:20:44.133

`scrollTop`接受整数，它不理解 CSS 值`px`，所以你会使用这样的东西：`element.scrollTop += 5;`

在此处查看示例：http: [//jsfiddle.net/pMafC/](http://jsfiddle.net/pMafC/)。

您可以单击按钮进行`div`滚动。

请参阅[scrollTop-MDN](https://developer.mozilla.org/en/DOM/element.scrollTop)。

# c++ - 如何并行优化大数据操作

> ID：11699853
> 
> 赞同：3
> 
> 时间：2012-07-28T09:32:09.723
> 
> 标签：c++, c, multithreading

我正在开发一个 C/C++ 应用程序以通用方式（聚合/选择/转换）操作大量数据。我使用的是 AMD Phenom II X4 965 Black Edition，因此具有相当数量的不同缓存。

我开发了 ST 和 MT 版本的函数来执行所有单个操作，毫不奇怪，在最好的情况下，即使使用*4*核，MT 版本也比 ST 快 2 倍。

鉴于我喜欢使用 100% 的可用资源，我很生气只有 2 倍，我想要 4 倍。出于这个原因，我已经使用缓存模拟器和调用图在*-pg*和*valgrind*
上花费了相当多的时间。程序按预期工作，核心共享输入过程数据（即应用于数据的操作），当不同线程加载要处理的数据（数百万个实体或*行*）时报告缓存未命中（如预期的那样）如果现在您知道我要做什么:-)）。最终，我使用了不同的编译器，g++ 和 clang++，两者都带有*-O3*，并且性能是相同的。

 ***我的结论是，由于要处理大量数据（GB 数据），鉴于数据最终必须加载到 CPU 中，这是*真正的*等待时间。我可以进一步改进我的软件吗？我达到极限了吗？

我在 Linux x86-64、Ubuntu 11.10 上使用 C/C++。我全是耳朵！:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T09:41:36.790

它是一个什么样的应用程序？你能给我们看一些代码吗？

正如我评论的那样，您可能已经达到了一些硬件限制，例如 RAM 带宽。如果你这样做了，没有任何软件技巧可以改进它。

您可能会使用 MPI、OpenMP 或 OpenCL（在 GPU 上）进行调查，但如果不了解您的应用程序，我们将无能为力。

如果使用 GCC 编译并且您想帮助处理器缓存预取，请考虑谨慎使用[__builtin_prefetch](http://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html)（但使用过多或使用不当会降低性能）。***

# c - 多边形不会出现在屏幕上

> ID：11699859
> 
> 赞同：1
> 
> 时间：2012-07-28T09:32:25.240
> 
> 标签：c, opengl, graphics, drawing

我正在尝试使用 opengl绘制一个 6 面的[方尖碑。](http://en.wikipedia.org/wiki/Obelisk)

下面是我用来模拟方尖碑底面的代码：

```
void drawObelisk() {
    glColor3f(1.0,1.0,0.0);

    glBegin(GL_POLYGON);
    for ( x=0.0; x<2.0*pi/3; x=x+inc )
    {   
        glVertex3f(0.3*cos(x),0.3*sin(x),0.0);
    }
    glEnd();
} 
```

此代码用于渲染模型：

```
void myDisplay(void)
{
    glEnable(GL_CULL_FACE);
    glEnable(GL_DEPTH_TEST);

    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glPushMatrix();
    drawObelisk();
    glPopMatrix();
    glFlush();
}

void SetupRC(void)
{
    glClearColor(0.0, 0.0, 1.0, 1.0);
    glOrtho(-6.0,6.0,-6.0,6.0,-6.0,6.0);
}

void main(void)
{
    glutInitDisplayMode(GLUT_SINGLE | GLUT_RGB);
    glutInitWindowSize(640,480);
    glutInitWindowPosition(10,15);
    glutCreateWindow("Test");
    glutDisplayFunc(myDisplay);
    SetupRC();
    glutIdleFunc(idle);
    glutMainLoop();
} 
```

由于某些原因，我绘制的多边形表面在模型渲染后并没有显示在屏幕上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T04:23:56.607

试一试：

```
#include <GL/glut.h>
#include <math.h>

void drawObelisk() 
{
    double pi = 3.14159;
    double inc = (2*pi) / 6;

    glColor3f(1.0,1.0,0.0);

    glBegin(GL_POLYGON);
    for( double theta = 0.0; theta < 2*pi; theta += inc )
    {   
        double scale = 2.0;
        double x = scale * cos( theta );
        double y = scale * sin( theta );
        glVertex3d(x,y,0.0);
    }
    glEnd();
}

void myDisplay(void)
{
    glEnable(GL_CULL_FACE);
    glEnable(GL_DEPTH_TEST);

    glClearColor(0.0, 0.0, 1.0, 1.0);
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glOrtho(-6.0,6.0,-6.0,6.0,-6.0,6.0);
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();

    glPushMatrix();
    drawObelisk();
    glPopMatrix();

    glFlush();
}

void main( int argc, char** argv )
{
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_SINGLE | GLUT_RGB | GLUT_DEPTH);
    glutInitWindowSize(640,480);
    glutInitWindowPosition(10,15);
    glutCreateWindow("Test");
    glutDisplayFunc(myDisplay);
    glutMainLoop();
} 
```

[![输出](../Images/298fb2599e2396294bbee46f18cf72c7.png)](https://i.stack.imgur.com/Dd2ix.png)

不靠谱的事情：

*   未接[`glutInit()`](http://www.opengl.org/resources/libraries/glut/spec3/node10.html)电话。

*   `glClear()`ing 深度缓冲区而不请求一个 via `GLUT_DEPTH`。

*   [`GL_MODELVIEW`设置投影矩阵后不切换到。](http://sjbaker.org/steve/omniv/projection_abuse.html)

*   原始`drawObelisk()` `for`循环仅生成两个顶点。 `GL_POLYGON`至少需要三个。

# javascript - 浏览器窗口大小发生变化时的扩展通知

> ID：11699862
> 
> 赞同：0
> 
> 时间：2012-07-28T09:32:35.337
> 
> 标签：javascript, firefox, firefox-addon, dom-events

我开发了一个 Firefox 扩展，当浏览器窗口大小发生变化时需要通知它。

我`gBrowser.addeventListener("resize",my_funcion,false);` 在我的 .js 文件中使用了扩展名。但是当您通过拖动更改浏览器窗口大小时，会非常频繁地通知这一点。在调整大小完成*后*，我需要窗口参数的最终值，*而不是在*调整大小期间。

我应该注册哪个活动来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T17:11:30.003

是否`gBrowser.addeventListener("resize",`将调整大小侦听器附加到窗口或标签浏览器？我一直认为`gBrowser`是 tabbrowser 元素的快捷方式。

当我不得不收听窗口调整大小事件时，队列系统似乎是最好的选择，例如

```
var queue=0;
var chromeWinOuterHeight;
var timer = Components.classes["@mozilla.org/timer;1"].createInstance(Components.interfaces.nsITimer);

function chromeWinResize(e){
    queue++;
    timer.initWithCallback(function(){
        if(queue>1){
            queue--;
        }
        else if(chromeWinOuterHeight !== e.target.outerHeight){
            //do stuff
        }
        chromeWinOuterHeight = e.target.outerHeight;
    }, 500, Components.interfaces.nsITimer.TYPE_ONE_SHOT);
};
chromeWindow.addEventListener('resize',chromeWinResize,false); 
```

# php - 如何在 GNU GPL 下发布 php 网站，但保留 MySQL 密码？

> ID：11699866
> 
> 赞同：0
> 
> 时间：2012-07-28T09:32:57.013
> 
> 标签：php, mysql

  我有一些网站，我计划使用 MySQL 进行注册/登录。我的网站在 GNU GPLv3 下获得许可。

  有什么方法可以让用户看到源代码，但仍然保证数据库安全（例如保持未发布 MySQL 密码的 php 文件）？我真的很想分享我的代码，但我不想有人从我的数据库中窃取数据。

  我的网站不是电子银行什么的，但它仍然可以包含敏感数据。

  对于许可证问题，我很抱歉，但我搜索了 stackexchange 一个小时，找不到更好的地方问

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T09:42:07.163

如果是*您的*原始代码，您可以自由选择在 GPL 下分发的部分。此外，如果您在网络服务器上配置和设置代码，则不会按照 GPL 的条款分发修改后的版本。

实际的解决方案非常简单：不要在分布式代码中包含凭据。

看看[Wordpress 是如何做到](https://codex.wordpress.org/Editing_wp-config.php)的：它们包含一个`wp-config-sample.php`文件，其中包含大多数具有合理默认值的设置。但是数据库连接是空的。用户只需将此示例复制到`wp-config.php`数据库连接并添加他们需要的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T09:35:27.627

这就是为什么大多数开源网站使用配置文件或单独的 PHP 来设置密码的原因。

# javascript - 是否可以使用 File JavaScript api 加载服务器端文件？

> ID：11699868
> 
> 赞同：0
> 
> 时间：2012-07-28T09:33:31.990
> 
> 标签：javascript, html, file, io

一个简单的问题，我最近检查了新的 html5 File api for javascript。[在这里](https://developer.mozilla.org/en/using_files_from_web_applications)看到它。是否可以使用它来拉入没有 ajax 的服务器端文件？我知道 JavaScript 中有一个 File 对象，我可以做一个“new File("serverSideStuff.xml");”吗？接着就，随即？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T09:39:31.603

从[API 描述](https://developer.mozilla.org/en/using_files_from_web_applications) -

> 使用 HTML5 中添加到 DOM 的 File API，现在 Web 内容可以要求用户**选择本地文件**，然后读取这些文件的内容。

所以不，你不能选择服务器端文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T09:50:30.410

这是不可能的，因为用户必须知道您正在加载什么，并且用户可以告诉您可以加载或不加载什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T09:40:03.417

*不，据我所知，它仅适用于本地文件。*

# asp.net - 如何删除日期列在 Rdlc 报告中给出错误？并想在报告中显示 mysql 日期

> ID：11699869
> 
> 赞同：0
> 
> 时间：2012-07-28T09:33:42.770
> 
> 标签：asp.net, rdlc

我正在使用 asp.net 和 mysql。在 Rdlc 报告中，我无法显示日期。

首先，它给出了一个错误，比如无法将 mysql 日期转换为 system.date。所以我添加了 Allow Zero Datetime=true; 在连接字符串中。现在报告显示...

但它在报告列中显示#Error。

数据集名称是 - mcubicDataSet.xsd DataDable 名称是 - fo_reserv

在 VS2010 中预览数据：-

![在此处输入图像描述](../Images/53f35daf911571d3aa8036f6577bd3de.png)

Rdlc 报告：-

![在此处输入图像描述](../Images/b4dfbc7fff31c2608ea1a2bc17fe31e5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-18T08:51:07.217

有两种情况发生在我身上，以及 3 种解决方案

1.  rdlc 报告绑定到 Visual Studio 通过 MySql 连接器生成的数据集。有时，创建的数据集包含带有**MySqlDateTime**而不是默认**System.DateTime**的日期列。要查看此内容，请打开您的 Report.rdlc，然后查看报表数据*(Ctrl+Alt+D)*以查看数据集，右键单击属性，然后检查列中的数据类型。[![在此处输入图像描述](../Images/47f3b2de422bce1bfbe09283821353ac.png)](https://i.stack.imgur.com/D1tg5.png) 转到表示数据集来自的数据源的文件，然后在编码窗口中打开设计器文件。在我的情况下，我的名为 pos_dbDataSet.xsd，带有一个名为 pos_dbDataSet.Designer.cs 的设计器文件打开它后，您可以对日期 dataTypes进行字符串替换*（Ctrl + H）查找：***MySql.Data.Types.MySqlDateTime**与：**System.DateTime**相对。请注意仅替换当前文档中的所有内容。尽管此更改可能不会反映在您的报表数据集上，但报表应该会运行。

[![在此处输入图像描述](../Images/ea6490806a53d73ddfcb03eb03b2fb39.png)](https://i.stack.imgur.com/i1V6j.png) 2\. 使用数据源配置向导重建数据源/数据集。

3.  （不太可能）rdlc 报告使用您操作系统的日期格式，因此 MySql 格式和 OS 格式之间可能存在冲突。为我解决这个问题的是在我的计算机的日历或区域设置上更改我的日期时间格式，以更好地匹配数据库格式。我使用的是英国格式并更改为美国格式。

[日历/格式设置](https://i.stack.imgur.com/G8KGb.jpg)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-16T14:13:31.353

将数据库中的字段类型从 datetime 更改为 text 。由于 fieldtype mismatch 发生此错误。

# django - django 多对多关系未保存

> ID：11699874
> 
> 赞同：0
> 
> 时间：2012-07-28T09:35:12.560
> 
> 标签：django, model

这是我的模型：

```
class MediumCategory(models.Model):
    name = models.CharField(max_length=100, verbose_name=u"Nazwa")
    slug = models.SlugField(blank=True)
    parent = models.ForeignKey('self', blank=True, null=True, verbose_name=u"Rodzic")
    parameters = models.ManyToManyField(AdvertisementDescriptonParameter, blank=True)
    count_mediums = models.PositiveIntegerField(default=0)
    count_ads = models.PositiveIntegerField(default=0)

    descendants = models.ManyToManyField('self', blank=True, null=True)

    def save(self, *args, **kwargs):
        self.slug = slugify("%s_%s" % (self.id, self.name))
        super(MediumCategory, self).save(*args, **kwargs)

    def __unicode__(self):
        return unicode(self.name) 
```

这是我的管理员：

```
class MediumCategoryAdmin(admin.ModelAdmin):
    list_display = ['name', 'parent', 'count_mediums', 'count_ads']

    def save_model(self, request, obj, form, change):
        admin.ModelAdmin.save_model(self, request, obj, form, change)
        update_category_descendants() 
```

这是功能：

```
def update_category_descendants(sender=None, **kwargs):
    data = dict()
    def children_for(category):
        return MediumCategory.objects.filter(parent=category)

    def do_update_descendants(category):
        children = children_for(category)
        descendants = list() + list(children)
        l = list([do_update_descendants(child) for child in children])
        for descendants_part in l:
            descendants += descendants_part

        if category:
            data[category] = []
            for descendant in descendants:
                data[category].append(descendant)    
        return list(descendants)

    # call it for update
    do_update_descendants(None)

    for k, v in data.iteritems():
        k.descendants = v

        print k, k.descendants.all() 
```

做什么`update_category_descendants`，正在获取树中节点的所有后代并将其保存到`descendants`该节点的列表中。用于浏览商店中的分类产品。

虽然`print k, k.descendants.all()`按预期工作，但实际上数据并未保存在 db 中。

当我做：

```
def category(request, category_slug, page=None):
    cats = MediumCategory.objects.all()

    category = MediumCategory.objects.get(slug=category_slug)
    descendants = category.descendants.all()
    print "category, descendants", category, descendants 
```

`descendants`变量总是`[]`。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T15:09:22.717

在`update_category_descendants`函数的最后一个循环中，我相信你需要做到：

```
for k, v in data.iteritems():
    k.descendants.add(*v) 
```

另请参阅[Django 的相关对象参考](https://docs.djangoproject.com/en/1.4/ref/models/relations/)。

# javascript - Chrome 对 Javascript 没有反应

> ID：11699876
> 
> 赞同：0
> 
> 时间：2012-07-28T09:35:13.273
> 
> 标签：javascript, google-chrome

我正在制作一个 Javascript 程序，该程序应该在单击一个元素时使其不可见并使另一个元素可见。它在 IE 中完美运行（关于我真正想知道的，因为 Javascript 很少在那里正常工作），但在 Chrome 中它根本没有反应。即使我只是试图发出普通警报，当我将它放在代码中的 hideDisplay() 函数下方时，它也不会显示。

这是代码：

单击图像将使其不可见并改为显示 div background2。在 IE 中它可以工作，在 Chrome 中它只是“选择”图像 - 使其带有蓝色叠加层。

```
<img src="screenxp.jpg" id="background1" onclick="hideDisplay(); window.setTimeout(failedto,1500);"> 
```

```
 // Getting the elements
var background1 = document.getElementById('background1');
var background2 = document.getElementById('background2');
var win = document.getElementById('win');

  // This is the function triggered when background1 ( image ) is clicked
function hideDisplay() {

    background1.style.display = 'none';
    background2.style.display = 'block';
    window.setTimeout(dispwin,2000);
} 
```

注意： background1 图像是 100% 的宽度和高度以及绝对位置，我不知道，在 JS 代码中可能无关紧要，但只是注意它是否可能是问题的原因。

提前致谢。

# wpf - 如何在扩展选择模式下选择当前 DataGrid 行？

> ID：11699878
> 
> 赞同：0
> 
> 时间：2012-07-28T09:35:29.467
> 
> 标签：wpf, datagrid

我有一个`dataGrid`扩展的选择模式，所以我可以选择很多行。

我有一个带有多值转换器的样式触发器，可以根据某些条件设置行的背景颜色。

好吧，在我的探测中，我传递了三个参数`ItemsSource`：`SelectedItems`和`selectedItem`。我注意到以下行为：

当我选择第一行时，`ItemsSource`有`dataGrid`. 这是对的。`SelectedItems`有 0 个项目并且`selectedItem`为空。但是，如果什么都不做，代码在转换器中第二次输入，在这种情况下`SelectedItem`是在 中选择的项目`dataGrid`，但`SelectedItems`没有项目。

当我选择第二行时，`SelectedItems`有一个项目，第一个选定的行`dataGrid`，并且`selectedItem`也有第一行。在这种情况下，代码不会第二次进入转换器。

当我选择第三行时，`SelectedItems`有两个项目，第一行和第二行被选中，但第三行没有。`SelectedItem`选择了第一行。

所以我看到`SelectedItem`总是选择第一行并且选择`SelectedItems`了 n-1 行。

但是我怎么知道当前选择的行是什么？新行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T13:36:59.407

```
<DataGrid SelectionMode="Extended" SelectionUnit="FullRow"></DataGrid> 
```

您的 selectionUnit 必须是 FullRow 。我希望这会有所帮助。

# javascript - 如何在我的网页中禁用萤火虫？

> ID：11699882
> 
> 赞同：0
> 
> 时间：2012-07-28T09:36:37.240
> 
> 标签：javascript

如何使用 Javascript 禁用萤火虫？我想这样做是为了向访问者隐藏我的网页的运作。有什么选择吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-28T09:38:56.720

你不能。您能做的最好的事情就是混淆您的 JavaScript。

实际上刮擦。您能做的最好的事情就是将所有安全关键代码移至服务器。无论如何，你应该这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T09:50:38.823

正如 Amadan 所说，您不能禁用特定的源查看器。

但是你可以使用黑客。它仅适用于查看器，将它们自身添加到 DOM。您只需要删除指定的节点。使用 Firebug Lite for Chrome 进行了查看。不要使用这种方法，只是为了好玩:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T09:42:01.430

你不能这样做。检查this [stackoverflow question](https://stackoverflow.com/questions/194397/how-can-i-obfuscate-javascript)关于其他人采用的不同方法作为各种解决方法

# java - 如何创建javafx应用程序的exe文件

> ID：11699883
> 
> 赞同：4
> 
> 时间：2012-07-28T09:36:48.247
> 
> 标签：java, deployment, installation, javafx, javafx-2

我使用 javafx 创建了一个桌面应用程序。它使用mysql的数据库。通过使用 Netbeans，我将应用程序打包到运行的 jar 中。

现在我想将应用程序作为 exe 文件分发给 windows 用户。现在我的问题是如何从 jar 中创建 exe 文件以及该 exe 将如何与数据库连接。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-06-12T20:45:30.247

有一个官方的[Java Packager Tool](https://docs.oracle.com/javase/8/docs/technotes/guides/deploy/packager.html)，它是 JavaFX 套件的一部分。它可以创建[独立的应用程序](https://docs.oracle.com/javase/8/docs/technotes/guides/deploy/self-contained-packaging.html)，包括本机启动器：`.exe`在 Windows 上，`.app`在 OS X 上捆绑等。默认情况下，它将 JRE 捆绑为应用程序的一部分，但如果需要[，可以更改此行为以使用系统 JRE](https://blogs.oracle.com/talkingjavadeployment/entry/packaging_improvements_in_jdk_7#2)。

您可以通过 Ant 任务、`javapackager`命令行工具或使用 NetBeans IDE 调用 Java 打包程序。有关详细信息，请参阅[Java 部署指南](https://docs.oracle.com/javase/8/docs/technotes/guides/deploy/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T16:37:44.423

exe4j 或 install4j 可能是一个不错的选择

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T06:00:52.440

**免责声明：**我为 Excelsior 工作。

我们刚刚发现[Excelsior JET 似乎已经支持 JavaFX 2](http://www.excelsior-usa.com/blog/excelsior-jet/javafx-2-already-supported/)。您可以使用它将 JavaFX 应用程序编译为本机代码，而不是`(launch|exe|install)4j`只能创建 EXE 启动器和包装器。

也就是说，启动器/包装器生成器可能更适合您的需求和预算。

# php - 如何使用 Xapian 创建搜索引擎

> ID：11699886
> 
> 赞同：0
> 
> 时间：2012-07-28T09:37:12.233
> 
> 标签：php, mysql, database, search-engine, xapian

我正在尝试在共享主机上使用 Xapian 创建一个搜索引擎，但我不知道从哪里开始，我已经下载了源文件。

Xapian-core-1.2.12、Xapian-bindings-1.2.12 和 Xapian-omega-1.2.12。

现在如何处理这些源文件，放在哪里以及如何安装它，我无法从[这个](http://xapian.org/docs/install.html)安装教程中理解。

我被困在安装的初始步骤中。我想用 PHP 构建它，因为我不知道 Python。

我看了很多，也在这里搜索过，但没有找到任何关于如何从头开始使用 Xapian 构建搜索的明确解释。

安装 Xapian 后，我将能够遵循[本教程。](http://www.contentwithstyle.co.uk/content/searching-with-xapian-and-php/index.html)

请提出在共享服务器上安装 Xapian 的任何好的教程或方法。

# ruby-on-rails - 如何在不同的上下文中使用一个部分

> ID：11699891
> 
> 赞同：0
> 
> 时间：2012-07-28T09:37:50.900
> 
> 标签：ruby-on-rails, ruby, view, partial, yield

我是 Rails 新手，并尝试执行以下操作：

我想，因为我使用 Bootstrap，有一个输入字段的部分，在这种情况下，它的标签和一个我称为符号的小图标。

这是我的看法：

```
<%= form_for(@user, :class => "form-horizontal" ) do |f| %>
 <fieldset>
  <%= render 'shared/text_field', function: f, tag: :name, symbol: '<i class="icon-user"></i>' %> 

  <%= render 'shared/text_field', function: f, tag: :email, symbol: "@" %> 

  <%= render 'shared/password_field', function: f, tag: :password, symbol: '<i class="icon-log"></i>' %> 

  <%= render 'shared/password_field', function: f, tag: :password_confirmation, alt: "Passwort wiederholen", symbol: '<i class="icon-log"></i>' %>
  <!-- SUBMIT -->
  <%= f.submit "Anmeldung", :class => "btn btn-primary" %>
 </fieldset>
<% end %> 
```

这里是普通输入字段的子部分：

```
<%= render 'shared/bootstrap/input_field' %>
<% content_for :label do %>
   <%= function.label tag, :class => "control-label", :for => "prependedInput" %>
<% end %>
<%content_for :symbol do %>
   <%= raw(symbol) %>
<% end %>
<% content_for :field do %>
   <%= function.text_field tag, :class => "input-xlarge", :id => "prependedInput", :size => "6" %>
<% end %> 
```

（还有一个密码字段的子部分，基本上将 function.text_field 与 function.input_field 交换）
这里是呈现的 input_field：

```
<div class="control-group">
  <%= yield :label %>
  <div class="controls">
    <div class="input-prepend">
      <span class="add-on"><%= yield :symbol %> </span>
  <%= yield :field %>
    </div>
  </div>
</div> 
```

所以我的问题是：我怎样才能以一种简单的方式解决这个问题（这件事在重构时发生了，而且变得更糟然后更好）以及我怎样才能让它工作，因为现在发生了这样的事情：[http：/ /pastebin.com/bNsgT9AR](http://pastebin.com/bNsgT9AR)所以 yield 将每个 content_for 内容和之前的内容放入该位置（最后一个除外）

很高兴听到你的好解决方案，必须有一个更好的方法，就像在 Rails 中几乎总是一样。

来自德国的问候；）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T00:05:09.487

作为[The Rails View](http://pragprog.com/book/warv/the-rails-view)的作者，我同意 Ben Taitelbaum 在这方面的帖子，并说 Formtastic 完全是这种复杂性的绝佳选择。

关于您发布的代码，作为开发人员，我们希望避免这种全盘编写的视图，因为它最终会导致无法管理的混乱。编辑表单涉及的文件太多，在某些时候，其他一些开发人员会进来并覆盖我们共享的部分，不知道它在哪里使用，以改变不同表单的行为方式。我们可以从这种抽象中获得的代码重用的任何好处都完全被它在多个开发人员中很快变质的可能性所抵消。

虽然 Formtastic 很棒，但我在最近的应用程序中也经常使用[SimpleForm](https://github.com/plataformatec/simple_form/)，尤其是当我不需要 Formtastic 的全部功能时。

SimpleForm 将处理您的标签，它也支持 i18n。有了这个，它将是：

```
<%= simple_form_for @user do |f| %>
  <%= f.input :name, :input_html => { :class => 'user-icon' } %>
  <%= f.input :email %>
  <%= f.input :password, :as => :password, :input_html => { :class => 'log-icon' } %>
  <%= f.input :password_confirmation, :as => :password, :input_html => { :class => 'log-icon' } %>
  <%= f.button :submit %>
<% end %> 
```

然后在您的 I18n 文件中，您可以拥有：

```
en:
  simple_form:
    labels:
      user:
        username: 'User name'
        password: 'Password'
        password_confirmation: 'Password confirmation'
de:
  simple_form:
    labels:
      user:
        username: 'Benutzername'
        password: 'Passwort'
        password_confirmation: 'Passwort wiederholen' 
```

以及更多您需要的内容。您也可以在 i18n 文件中定义提示和占位符。

另外，考虑将图标添加为 CSS 伪类 :after，并为您需要在代码中添加的每个类执行此操作）

```
input.user-icon:after {
  // image as background, positioned properly, etc etc
}

input.log-icon:after {
  // image as background, positioned properly, etc etc
} 
```

这样，您可以从 ERB/H​​TML 中删除此类内容并将其放在它所属的位置：在 CSS（表示层）中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T09:58:52.253

I feel that's a bit too much generalization overhead for a simple input field. Have you considered simply creating one shared input field partial and just passing in the field name (you named it tag) and the type of field (text_field or password_field) as parameters? I can see that your approach might be more general, but if you just need those two options for now, keep it as simple as possible.

Addition in reply to comment:

You can simply pass parameters to your partial like so:

```
<%= render 'shared/error_messages', object: f.object %> 
```

And then use the the variables in your partial. in your case you could

```
<%= render 'shared/bootstrap/input_field',  function: f, tag: :name, input_field_type: :text_field %> 
```

and then in _input_field.html.erb

```
<div class="control-group">
  <%= function.label tag, :class => "control-label", :for => "prependedInput" %>
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T11:48:11.233

[The Rails View](http://pragprog.com/book/warv/the-rails-view)中有一个很棒的关于表单的部分，他们建议使用 FormBuilders 来处理这种类型的事情（他们还讨论了[formtastic](https://github.com/justinfrench/formtastic)，值得一试）。

我从这本书中得到的最大教训（我不能推荐它！）是保持视图尽可能简单很重要，因为它们往往是 Rails 应用程序中最不有趣的部分，尤其是当应用程序变大。因此，从这个角度来看，我希望视图既美观又简单，例如：

```
<%= semantic_form_for(@user) do |f| %>
 <%= f.inputs do %>
   <%= f.input :name, class: 'icon-user' %>
   <%= f.input :email %>
   <%= f.input :password %>
   <%= f.input :password_confirmation %>
 <% end %>

 <%= f.buttons %>
<% end %> 
```

从一个可读性好的视图作为目标开始，并根据需要为自定义字段类型添加必要的帮助程序和表单构建器。

我建议使用 I18n 将提交按钮文本设置为“Anmeldung”，而不是硬编码。

我没有使用它，但你可能想查看[formtastic-bootstrap](https://github.com/mjbellantoni/formtastic-bootstrap/)以获得你想要的集成..

# android - 在控制台上添加 EditText 时出现 Android XML 错误

> ID：11699897
> 
> 赞同：0
> 
> 时间：2012-07-28T09:39:26.163
> 
> 标签：android, xml, android-layout, layout

我正在尝试制作一个xml，其中有一些按钮以及一些带有textviews的edittext。但是当我尝试添加多行的编辑文本时，它会保存它开始显示错误，例如“java.util.LinkedHashMap.eldest()Ljava/util/Map$Entry;” 我的 XML 代码是：

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/to"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="24dp"
        android:layout_marginTop="15dp"
        android:text="@string/to"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <EditText
        android:id="@+id/toname"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/to"
        android:layout_below="@+id/to"
        android:layout_marginLeft="28dp"
        android:layout_marginTop="18dp"
        android:ems="10"
        android:hint="@string/toname"
        android:inputType="textPersonName" >

        <requestFocus />
    </EditText>

    <EditText
        android:id="@+id/tophone"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/toname"
        android:layout_below="@+id/toname"
        android:layout_marginTop="16dp"
        android:hint="@string/tophone"
        android:ems="10"
        android:inputType="phone" />

    <Button
        android:id="@+id/importbutton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignRight="@+id/tophone"
        android:layout_below="@+id/tophone"
        android:text="@string/importbutton" />

    <EditText
        android:id="@+id/text"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/to"
        android:layout_alignRight="@+id/importbutton"
        android:layout_below="@+id/importbutton"
        android:layout_marginTop="38dp"
        android:ems="10"
        android:hint="@string/text"
        android:inputType="textMultiLine"
        android:lines="7"/>

    <Button
        android:id="@+id/sendbutton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignRight="@+id/text"
        android:text="@string/sendbutton" />

</RelativeLayout> 
```

请帮助如何使这个...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T09:43:59.447

你应该检查[这个](https://stackoverflow.com/questions/11275754/exception-in-loading-layout-java-util-linkedhashmap-eldestljava-util-mapentr) 也尝试做

```
android:inputType="textNoSuggestions" 
```

# c++ - C++ 关于 .h 和 .cpp - 的多重定义

> ID：11699899
> 
> 赞同：-3
> 
> 时间：2012-07-28T09:39:33.290
> 
> 标签：c++

我面临“多重定义”的错误我有3个文件，即currency.h、currency.cpp、main.cpp

在currencyConverter 类下的currencyConverter.h 我做了

```
using namespace std;

class currencyConverter
{

string result;
stringstream ss;
size_t found,found2;

public:
   void getInbetween(string,string);

};

#endif  /* CURRENCYCONVERTER_H */ 
```

然后在 currencyConverter.cpp 我做了

```
#include "currencyConverter.h"
void currencyConverter::getInbetween(string selection,string str2,string str3,string sdata)
{

buffer[result.length()] = '\0';     //insert '\0'

char * pch;
 pch = strtok (buffer," ");

}

void currencyConverter::webparser(const string siteurl,const string filename)
{
    ss << "lynx -dump '" << siteurl << "' > " << filename;
}

string currencyConverter::userOption()
{
    //some code    
    return selection;
} 
```

在 main2.cpp

```
#include<iostream>

#include"currencyConverter.cpp"

using namespace std;

int main() {

    currencyConverter c;
    string exitstr;

    if(selection!="6")
    {

    c.webparser(parsePage,"file.txt");    
    //now perform searchstring
    c.searchString(selection,"file.txt");
    }

    }while (1);

return 0;
} 
```

这是我的制作文件

```
# ExampleTests Project

SRCS = main2.cpp

HDRS = 

PROJ = main

CC = g++

OBJS = $(SRCS:.cpp=.o)

APP = $(PROJ).exe

CFLAGS = -c -g -Wall -I/opt/local/include

ifeq (,$(findstring CYGWIN,$(shell uname)))

LIBS = -lcppunit -ldl

all: $(APP)

$(APP): $(OBJS)

    $(CC) $(LDFLAGS) $(OBJS) -o $(APP) $(LIBS)

clean:

    rm -f *.o $(APP) 
```

但是我在编译器上收到此错误

如何获得此修复.. 我没有使用它两次。我用函数 webparser 粘贴了我的 currencyConverter.cpp 的一部分，我在 main2.cpp 调用函数的方式是否有错误？

```
rm -f *.o main.exe

CLEAN SUCCESSFUL (total time: 86ms)
g++    -c -o main2.o main2.cpp 
```

td::char_traits, std::allocator >)': currencyConverter.cpp:(.text+0xcec): `currencyConverter::webparser(std::basic_string, std::allocator >, std::basic_string, std ::allocator >)' main2.o:main2.cpp:(.text+0xcec): 首先在这里定义 collect2: ld 返回 1 退出状态 make: *** [main.exe] 错误 1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T10:02:03.387

Include a header file, not a `cpp`:

```
#include"currencyConverter.cpp" 
```

should be

```
#include"currencyConverter.h" 
```

in your `main2.cpp`

# android - 使用 Dropbox API 覆盖文件

> ID：11699900
> 
> 赞同：2
> 
> 时间：2012-07-28T09:39:37.430
> 
> 标签：android, dropbox

我在为我的应用程序实施 Dropbox 备份时遇到问题。我不希望每个下一个备份都覆盖前一个。

我首先尝试了这个：

```
newEntry = mDBApi.putFile("/file.bak", inputStream, file.length(), null, null); 
```

它正在创建 test.bak 然后 test.bak(1) test.bak(2) 等等......

然后我尝试保存第一个文件的修订 ID，然后将其传递给每次上传。

```
newEntry = mDBApi.putFile("/file.bak", inputStream, file.length(), revision, null); 
```

我得到 file.bak 然后是 file.bak (conflicted copy....) 等等

我究竟做错了什么？Dropbox 文档说，当 2 个用户尝试同时上传同一个文件时，会出现冲突副本，但这里没有发生

编辑：我可以通过删除第一个文件来解决它，但这听起来不太专业

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T17:21:57.563

看看[Dropbox API](https://www.dropbox.com/static/developers/dropbox-android-sdk-1.5.1-docs/)。

它提供了一种覆盖现有文件（具有相同文件名）的方法：[putFileOverwrite](https://www.dropbox.com/static/developers/dropbox-android-sdk-1.5.1-docs/com/dropbox/client2/DropboxAPI.html#putFileOverwrite%28java.lang.String,%20java.io.InputStream,%20long,%20com.dropbox.client2.ProgressListener%29)

或者，如果您希望能够取消上传，请创建一个[putFileOverwriteRequest](https://www.dropbox.com/static/developers/dropbox-android-sdk-1.5.1-docs/com/dropbox/client2/DropboxAPI.html#putFileOverwriteRequest%28java.lang.String,%20java.io.InputStream,%20long,%20com.dropbox.client2.ProgressListener%29)并通过调用`upload()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T13:56:43.717

尝试这个：

```
 try {
            DropboxAPI.Entry newEntry = mDBApi.putFileOverwrite("/file.bak", inputStream, file.length(), null);
        } catch (DropboxUnlinkedException e) {
            Log.e("DbExampleLog", "User has unlinked.");
        } catch (DropboxException e) {
            Log.e("DbExampleLog", "Something went wrong while uploading.");
        } 
```

# assembly - 如何编写一个简单的汇编程序

> ID：11699901
> 
> 赞同：-4
> 
> 时间：2012-07-28T09:39:42.563
> 
> 标签：assembly

我太业余了。我想在汇编 IDE 中编译下面的程序，我的意思是我想编写一个简单的控制台应用程序：

```
X DB 18
MOV AL,-18
ADD AL,X 
```

我想在控制台屏幕上看到 AL 的值作为输出，我该如何运行这个简单的代码？我应该添加哪些代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T22:17:49.567

正如电影中所说的“你好，陌生人”……

如您所见，您需要更多代码。首先要学习的是干净地退出——CPU 不知道你什么时候完成。取决于什么操作系统。“ExitProcess”，可能 - 当他们不说时，通常是 Windoze。:)

“如何显示数字？” 可能是有史以来最常见的初学者问题。您可以“只调用 printf”，或者（更好？）将数字转换为文本（与哪个操作系统无关）并打印它（取决于操作系统）。你有书吗？它说什么？（我将支持 DCoder 对 Carter 博士的推荐！）

您心目中的 IDE 是否有友好手册？阅读。（一个 IDE 不值得安装，恕我直言，但有些人喜欢他们）

您显示的代码有问题。CPU 将尝试执行数字 18，就好像它是一条指令一样。您想将“代码”与“数据”分开。确切的语法取决于您使用的汇编程序。

如果您提供“哪个架构”（看起来像 x86）、“哪个操作系统”和“哪个汇编程序”，您可能会得到更好的帮助。

最好的，弗兰克

# ruby-on-rails-3.2 - 用户双击按钮多次时的胖手指控制

> ID：11699904
> 
> 赞同：0
> 
> 时间：2012-07-28T09:40:09.120
> 
> 标签：ruby-on-rails-3.2

我已经通过 JavaScript Embedded Ruby 实现了一种用户跟踪机制，该机制在不离开页面的情况下将请求异步发送到服务器：

```
$("#follow_form").html("<%= escape_javascript(render('users/unfollow')) %>")
$("#followers").html('<%= @user.followers.count %>') 
```

如果用户双击关注按钮（结合较低的服务器响应时间），系统会向服务器发送多个请求。结果，当前用户关注了另一个用户两次，@user.followers.count 增加了 +2。

换句话说，我怎样才能实现一个“胖手指”控件，以便我的应用程序只发送一个请求，以防用户双击跟随按钮多次？

如何以这种方式设置我的应用程序，以便对于我的应用程序中的任何按钮，一旦单击它并根据 AJAX 的结果回调重新启用它就会被禁用？

展望未来，巴特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T09:45:25.520

您可以在单击按钮后立即禁用它，然后从 AJAX 的结果回调中重新启用它。

# java - 在Java中的点后限制字符

> ID：11699906
> 
> 赞同：0
> 
> 时间：2012-07-28T09:40:43.493
> 
> 标签：java, android, character, point

如何限制点之后的字符数（显示在我的 TextView 中） 看到 2 种方式会很棒：在 java 中，实际上在 TextView XML 中（如果可能的话）谢谢！

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    inivVars();     
}
private void inivVars(){...}

public void onClick(View v) {
    // TODO Auto-generated method stub
    switch(v.getId()){
    case R.id.bCount:

        try{
        checkT1 = et1.getText().toString();
        checkT2 = et2.getText().toString();
        checkK1 = ek1.getText().toString();

        det1 = Float.parseFloat(checkT1);
        det2 = Float.parseFloat(checkT2);
        dek1 = Float.parseFloat(checkK1);
        float x = det2/(det1/100)/100*dek1;
        String sx = String.valueOf(x);
        text.setText(sx);
        text.setTextColor(Color.BLUE);

        }catch(Exception e){
            Toast t = Toast.makeText(CivilProtectActivity.this, "enter all values or use suitable '.'", Toast.LENGTH_LONG);
            t.show();

        }

        break;
    case R.id.bHide:
        InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
        imm.hideSoftInputFromWindow(et1.getWindowToken(), 0);
        et1.setText("");
        et2.setText("");
        ek1.setText("");
        text.setText("");

        break;
    }}} 
```

和显示数据的 TextView XML

```
 <TextView
    android:id="@+id/tvShowA"
    android:layout_width="95dp"
    android:layout_height="95dp"
    android:textSize="22dp"
    android:hint="X"
    android:background="@drawable/sun"
    android:gravity="center"
    /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T09:44:31.213

使用 android:minLength="30" 将最大字符长度设置为 30 **（输入要设置的数字）**

例子

```
<TextView
    android:id="@+id/tvShowA"
    android:minLength="30"    //    See this
    android:layout_width="95dp"
    android:layout_height="95dp"
    android:textSize="22dp"
    android:hint="X"
    android:background="@drawable/sun"
    android:gravity="center"
    /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T09:49:12.100

为了控制精度，我建议使用 BigDecimal。

这是在 Java 应用程序中限制字符数的示例： [https ://github.com/plokhotnyuk/calculator/blob/fee1b741aa74d659b8e30ad66d26d9ca6a2f6bc5/src/main/java/com/github/plokhotnyuk/calculator/CalculatorModel.java](https://github.com/plokhotnyuk/calculator/blob/fee1b741aa74d659b8e30ad66d26d9ca6a2f6bc5/src/main/java/com/github/plokhotnyuk/calculator/CalculatorModel.java)

# ruby - 将 AppleScript 翻译成 rb-appscript

> ID：11699908
> 
> 赞同：0
> 
> 时间：2012-07-28T09:41:04.387
> 
> 标签：ruby, applescript, rb-appscript, sourceforge-appscript

我正在尝试使用`rb-appscript`gem 将以下代码转换为 Ruby：

```
tell application "System Events" to tell process "Dock"
    set dock_dimensions to size in list 1
    set dock_height to item 2 of dock_dimensions
end tell 
```

我有点卡住了。我不知道如何处理列表部分。这是我到目前为止所拥有的：

```
puts Appscript.app.by_name("System Events").processes["Dock"] 
```

我会很感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T13:55:01.427

像这样 ：

```
puts Appscript.app.by_name("System Events").processes["Dock"].lists[0].size.get[1] 
```

列表和大小是**数组**。

# php - php中的静态变量和全局变量有什么区别？

> ID：11699909
> 
> 赞同：4
> 
> 时间：2012-07-28T09:41:26.027
> 
> 标签：php, variables, static, global

> **可能重复：**
> [php中的“GLOBAL”和“STATIC”变量有什么区别](https://stackoverflow.com/questions/10266038/what-is-the-difference-between-global-and-static-variable-in-php)

如果我们在函数内部创建一个静态变量，则该变量在进一步使用该函数时存在……据我所知，全局变量也是如此。现在使用静态变量有什么好处？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-28T09:51:06.227

静态变量的词法范围`static`仅限于函数体——您不能在函数外部访问该变量。但是，它的值将在同一函数的多次调用中被记住。

全局变量存在于全局范围内，可以从代码中的任何位置访问（尽管您必须在函数内部使用`global`关键字或`$GLOBALS`数组）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-28T10:05:40.097

静态变量只是意味着 var 属于一个类，但可以引用而不必实例化所述类。全局变量存在于全局命名空间中，并且可以被任何类中的任何函数引用。全局变量总是不受欢迎，因为它们很容易被滥用、覆盖、意外引用等。至少对于静态变量，您需要通过 Class::var; 引用。

# php - sql查询连接三个表

> ID：11699911
> 
> 赞同：0
> 
> 时间：2012-07-28T09:41:26.760
> 
> 标签：php, mysql, codeigniter, join

我必须`category name,description,id`从`tbl_ticket_categories`所选中选择`id`我必须`user_id`从中找到`tbl_ticket_repliers`并且我必须从`user_id`中找到。`username``tbl_users`

最后选择的属性应该是`category_name, description and username`. 我在做什么我的观点是：-

```
 function editCategory($site_referers_id) {
        $this->db->select('tbl_ticket_categories.category_name,tbl_ticket_categories.description,tbl_users.username,tbl_ticket_repliers.user_id');
        $this->db->where('site_referers_id',$site_referers_id);
        $this->db->join('tbl_ticket_repliers','tbl_ticket_repliers.category_id = tbl_ticket_categories.id');
        $this->db->join('tbl_users','tbl_users.id = tbl_ticket_repliers.user_id');
        return $this->db->get('tbl_ticket_categories');
    } 
```

在我看来，当我这样做`<?php var_dump($categories); ?>` 时显示：-

```
object(CI_DB_mysql_result)[32]
  public 'conn_id' => resource(43, mysql link persistent)
  public 'result_id' => resource(81, mysql result)
  public 'result_array' => 
    array
      empty
  public 'result_object' => 
    array
      empty
  public 'custom_result_object' => 
    array
      empty
  public 'current_row' => int 0
  public 'num_rows' => int 1
  public 'row_data' => null 
```

如何进行此查询:(

我的桌子是：-

`tbl_ticket_categories(id , category_name , description , site_referers_id)`

`tbl_ticket_repliers(id , user_id , category_id , site_referer_id)`

`tbl_users(id , role_id , username , password )`

**解决了**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T09:54:46.903

```
function editCategory($site_referers_id) {
        $this->db->select('tbl_ticket_categories.category_name,tbl_ticket_categories.description,tbl_users.username,tbl_ticket_repliers.user_id');
        $this->db->where('site_referers_id',$site_referers_id);
        $this->db->join('tbl_ticket_repliers','tbl_ticket_repliers.category_id = tbl_ticket_categories.id');
        $this->db->join('tbl_users','tbl_users.id = tbl_ticket_repliers.user_id');
        return $this->db->get('tbl_ticket_categories')->result_array();
    } 
```

添加`result_array()`上面的查询，`print_r() instead of var_dump`你会看到结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T09:58:46.507

这是正确的查询，问题是我写了 result_array 而不是 result_array()，下次我删除了整个句子并使用了 var_dump()。

对不起

# sql-server - 连接 XML 而不将类型转换为字符串

> ID：11699914
> 
> 赞同：17
> 
> 时间：2012-07-28T09:41:53.173
> 
> 标签：sql-server, xml, sql-server-2008, concatenation

我从我的 SQL SERVER 数据库中的各种表中生成了以下 XML

```
<XMLData>
...
<Type>1</Type>
...
</XMLData> 
```

和

```
<XMLData>
...
<Type>2</Type>
...
</XMLData> 
```

和

```
<XMLData>
...
<Type>3</Type>
...
</XMLData> 
```

我需要的最终输出是单一组合如下：

```
<AllMyData>
    <XMLData>
        ...
        <Type>1</Type>
        ...
    </XMLData>
    <XMLData>
        ...
        <Type>2</Type>
        ...
    </XMLData>
    <XMLData>
        ...
        <Type>3</Type>
        ...
    </XMLData>
<AllMyData> 
```

**注意 - 我组合的所有独立元素都具有相同的标签名称。**

提前感谢您查找此内容。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-28T09:58:33.143

> 我从我的 SQL SERVER 数据库中的各种表中生成了以下 XML

取决于你如何拥有它，但如果它在 XML 变量中，你可以这样做。

```
declare @XML1 xml
declare @XML2 xml
declare @XML3 xml

set @XML1 = '<XMLData><Type>1</Type></XMLData>'
set @XML2 = '<XMLData><Type>2</Type></XMLData>'
set @XML3 = '<XMLData><Type>3</Type></XMLData>'

select @XML1, @XML2, @XML3 
for xml path('AllMyData') 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-10-01T00:47:03.380

我不能发表评论，但可以回答，所以即使我认为评论更合适，我将扩展上面的 Rainabba 回答以增加更多控制。我的 .Net 代码需要知道返回的列名，所以我不能依赖自动生成的名称，但需要上面提供的非常提示 Rainabba。

这样，xml 可以有效地连接成单行并命名结果列。您可以使用同样的方法将结果分配给 XML 变量，并从 PROC 中返回。

```
SELECT (
 SELECT XmlData as [*]
 FROM
     (
     SELECT
         xmlResult AS [*]
     FROM
         @XmlRes
     WHERE
         xmlResult IS NOT NULL
     FOR XML PATH(''), TYPE
     ) as DATA(XmlData)
 FOR XML PATH('')
) as [someColumnName] 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-28T09:49:34.013

如果使用`for xml type`，则可以组合 XML 列而不强制转换它们。例如：

```
select  *
from    (
        select  (
                select  1 as Type
                for xml path(''), type
                )
        union all
        select  (
                select  2 as Type
                for xml path(''), type
                )
        union all
        select  (
                select  3 as Type
                for xml path(''), type
                )
        ) as Data(XmlData)
for xml path(''), root('AllMyData'), type 
```

这打印：

```
<AllMyData>
    <XmlData>
        <Type>1</Type>
    </XmlData>
    <XmlData>
        <Type>2</Type>
    </XmlData>
    <XmlData>
        <Type>3</Type>
    </XmlData>
</AllMyData> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-26T16:03:54.443

作为 Mikael Eriksson 答案的附录 - 如果您有一个需要不断添加节点然后想要将其分组到单个节点下的过程，这是一种方法：

```
declare @XML1 XML
declare @XML2 XML
declare @XML3 XML
declare @XMLSummary XML

set @XML1 = '<XMLData><Type>1</Type></XMLData>'
set @XMLSummary = (SELECT @XMLSummary, @XML1 FOR XML PATH(''))

set @XML2 = '<XMLData><Type>2</Type></XMLData>'
set @XMLSummary = (SELECT @XMLSummary, @XML2 FOR XML PATH(''))

set @XML3 = '<XMLData><Type>3</Type></XMLData>'
set @XMLSummary = (SELECT @XMLSummary, @XML3 FOR XML PATH(''))

SELECT @XMLSummary FOR XML PATH('AllMyData') 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-10-01T00:17:44.843

我需要做同样的事情，但不知道有多少行/变量涉及并且没有添加额外的模式，所以这是我的解决方案。按照这种模式，我可以根据需要生成任意数量的片段，将它们组合起来，在 PROCS 之间传递它们，甚至从 procs 中返回它们，并且在任何时候，将它们包装在容器中，而无需修改数据或被迫将 XML 结构添加到我的数据。我将这种方法与 HTTP 端点一起使用以提供 XML Web 服务，并使用另一种将 XML 转换为 JSON 的技巧来提供 JSON WebServices。

```
 -- SETUP A type (or use this design for a Table Variable) to temporarily store snippets into. The pattern can be repeated to pass/store snippets to build
    -- larger elements and those can be further combined following the pattern.
    CREATE TYPE [dbo].[XMLRes] AS TABLE(
        [xmlResult] [xml] NULL
    )
    GO

    -- Call the following as much as you like to build up all the elements you want included in the larger element
    INSERT INTO @XMLRes ( xmlResult )
        SELECT
            (    
                SELECT
                    'foo' '@bar'
                FOR XML
                    PATH('SomeTopLevelElement')
            )

    -- This is the key to "concatenating" many snippets into a larger element. At the end of this, add " ,ROOT('DocumentRoot') " to wrapp them up in another element even
    -- The outer select is a time from user2503764 that controls the output column name

   SELECT (
    SELECT XmlData as [*]
    FROM
        (
        SELECT
            xmlResult AS [*]
        FROM
            @XmlRes
        WHERE
            xmlResult IS NOT NULL
        FOR XML PATH(''), TYPE
        ) as DATA(XmlData)
    FOR XML PATH('')
   ) as [someColumnName] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-23T21:04:50.943

```
ALTER PROCEDURE usp_fillHDDT @Code  int

AS
BEGIN

 DECLARE @HD XML,@DT XML;  

    SET NOCOUNT ON;
    select invhdcode, invInvoiceNO,invDate,invCusCode,InvAmount into #HD
    from dbo.trnInvoiceHD where invhdcode=@Code

    select invdtSlNo No,invdtitemcode ItemCode,invdtitemcode ItemName,
    invDtRate Rate,invDtQty Qty,invDtAmount Amount ,'Kg' Unit into #DT from
     dbo.trnInvoiceDt  where invDtTrncode=@Code 

    set @HD = (select * from #HD HD  FOR XML AUTO,ELEMENTS XSINIL);
    set @DT = (select* from #DT DT FOR XML AUTO,ELEMENTS XSINIL);

    SELECT CAST ('<OUTPUT>'+ CAST (ISNULL(@HD,'') AS VARCHAR(MAX))+ CAST ( ISNULL(@DT,'') AS VARCHAR(MAX))+ '</OUTPUT>'   AS XML)

END 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-03-25T04:04:50.177

```
public String ReplaceSpecialChar(String inStr)
{
    inStr = inStr.Replace("&", "&amp;");
    inStr = inStr.Replace("<", "&lt;");
    inStr = inStr.Replace(">", "&gt;");
    inStr = inStr.Replace("'", "&#39;");
    inStr = inStr.Replace("\"", "&quot;");
    return inStr;
} 
```

# emacs - emacs 更智能的编译

> ID：11699915
> 
> 赞同：0
> 
> 时间：2012-07-28T09:41:56.090
> 
> 标签：emacs, compiler-construction

我从 marmalade-repo 安装了更智能的编译包，我只是绑定了密钥

```
(global-set-key (kbd "C-c C-c") 'smarter-compile) 
```

但是，当我使用它时，它第一次会编译文件，但显示：

```
smart-compile-expand-compile-command: Wrong type argument: stringp, t 
```

我第二次使用 Cc Cc 编译相同的缓冲区时，smarter-compile 不起作用（它没有显示正确的编译命令，总是显示 make -k）。

任何人都知道这个问题

# php - How do I get the name of the constant?

> ID：11699921
> 
> 赞同：1
> 
> 时间：2012-07-28T09:42:52.027
> 
> 标签：php, constants

```
const

  STUFF      = 1,
  MORE_STUFF = 3,
  ...
  LAST_STUFF = 45;  

function($id = self::STUFF){
  if(defined('self::'.$id)){
    // here how do I get the name of the constant?
    // eg "STUFF"
  }
} 
```

Can I get it without a huge case statement?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T09:50:43.190

Have a look at [ReflectionClass::getConstants](http://www.php.net/manual/en/reflectionclass.getconstants.php).

Something like (it's pretty ugly and inefficient, btw):

```
class Foo {
    const

      STUFF      = 1,
      MORE_STUFF = 3,
      ...
      LAST_STUFF = 45;     

    function get_name($id = self::STUFF)
    {
         $rc = new ReflectionClass ('Foo');
         $consts = $oClass->getConstants ();

         foreach ($consts as $name => $value) {
             if ($value === $id) {
                 return $name;
             }
         }
         return NULL;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T09:50:57.210

You can use the `[Reflection][1]` for this.

Assuming you have the below class.

```
class Profile {
    const LABEL_FIRST_NAME = "First Name";
    const LABEL_LAST_NAME = "Last Name";
    const LABEL_COMPANY_NAME = "Company";
}

$refl = new ReflectionClass('Profile');
print_r($refl->getConstants()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T09:59:46.243

PHP:

1.  Use ReflectionClass from your class name
2.  Use getConstants() method
3.  now you can scaning getConstants() results and verify result values for getting the target name

========================================

C#

Your answer is here by *Jon Skeet*

[Determine the name of a constant based on the value](https://stackoverflow.com/questions/1064213/determine-the-name-of-a-constant-based-on-the-value)

Or use enume (converting enume name to string is easy:)

```
public enum Ram{a,b,c}
Ram MyEnume = Ram.a;
MyEnume.ToString() 
```

# android - 应用程序配置 Facebook Android 不允许给定 URL

> ID：11699922
> 
> 赞同：1
> 
> 时间：2012-07-28T09:43:10.410
> 
> 标签：android, facebook, single-sign-on

我正在开发一个 Facebook 集成的 Android 应用程序。我按照本[教程](http://developers.facebook.com/docs/mobile/android/build/#sso)进行操作。问题是如果登录时设备上未安装 Facebook 应用程序，我会收到以下错误：

应用程序配置不允许给定 URL

我按照教程中的说明实现了单点登录。如果我在已安装 Facebook 应用程序的设备上运行我的应用程序，我的应用程序会重定向到 Facebook 应用程序以登录。这很好。但是，如果未安装 Facebook 应用程序，我会收到错误消息。这是一个快照：

![在此处输入图像描述](../Images/d8ab1e61cc21db481c079bd795ff4fae.png)

重定向到登录时不可用的网页：

![在此处输入图像描述](../Images/99409646b08efadfe261012552254e8d.png)

编辑：我仔细检查了教程，看到了关于填写我没有遵循的移动 Web URL 的内容。我不太确定在这里输入什么。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T15:33:52.430

修复。似乎是Facebook方面的一个错误。使用来自 github 的更新的 repo 解决了这个问题。

# delphi - 尝试在注册表中保存值时出错

> ID：11699924
> 
> 赞同：4
> 
> 时间：2012-07-28T09:43:17.170
> 
> 标签：delphi, registry, 32bit-64bit

使用下面的代码，我尝试在注册表的 HKEY_LOCAL_MACHINE 部分设置一个值，但我收到错误“无法为.....设置数据”如果我使用 HKEY_CURRENT_USER 没有问题。

我可能在这里缺少什么。

（代码不完整，但我认为是它的重要部分）

```
type
  TTypWinBits = (Bit32, Bit64);

function WinBits: TTypWinBits;
type
  TIsWow64Process = function(Handle:THandle; var IsWow64 : BOOL) : BOOL; stdcall;
var
  hKernel32 : Integer;
  IsWow64Process : TIsWow64Process;
  IsWow64 : BOOL;
begin
  Result := Bit32;
  hKernel32 := LoadLibrary('kernel32.dll');
  if (hKernel32 = 0) then RaiseLastOSError;
  @IsWow64Process := GetProcAddress(hkernel32, 'IsWow64Process');
  if Assigned(IsWow64Process) then
    begin
      IsWow64 := False;
      if (IsWow64Process(GetCurrentProcess, IsWow64)) then
        Result := Bit64
      else
        RaiseLastOSError;
    end;
  FreeLibrary(hKernel32);
end;

function TFastRegistry.CreateConnection: TRegistry;
begin
  Result := TRegistry.Create;
  try
    case WinBits of
      Bit32: Result := TRegistry.Create;
      Bit64: Result := TRegistry.Create(KEY_WRITE OR KEY_WOW64_64KEY);
    end;
  except
    on E: exception do
      Result := nil;
  end;
end;

procedure TFastRegistry.RunAdd(aDesc, aName: string);
var
  Reg: TRegistry;
  sRegKey: String;
begin
  sRegKey := 'Software\Microsoft\Windows\CurrentVersion\Run';
  Reg := CreateConnection;
  with Reg do
    begin
      try
        RootKey := HKEY_LOCAL_MACHINE;
        if not KeyExists(sRegKey) then
          OpenKey(sRegKey, True)
        else
          OpenKey(sRegKey, False);
        WriteString(aDesc, aName);
      finally
        CloseKey;
        Free;
      end;
    end;
end; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-28T13:58:53.607

程序需要提升权限才能写入本地计算机密钥。如您所见，没有它，功能将失败。如果您的程序应该是一个管理工具，那么请使用清单文件，以便操作系统会提示您获得许可。如果您不需要，请改为写入当前用户密钥，这样它就不会影响系统上的*所有*帐户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-20T17:22:07.387

您只需要通过“免费”释放句柄，然后在寄存器中的下一个条目重新创建它，而不是永久设置并通过 OpenKey 和 CloseKey 打开和关闭它们！它看起来像一个错误:-)

# iphone - 使用 json 解析的 iPhone 应用程序

> ID：11699925
> 
> 赞同：-1
> 
> 时间：2012-07-28T09:43:25.833
> 
> 标签：iphone, ios4, uiview, uitableview, json

我有个问题请教！

我一直在阅读有关如何创建 iPhone 应用程序的信息，我需要做的是解析一些 json 结构。

我有一些产品的名称，它们将显示在列表中，当您单击每个产品时，您将被重定向到该产品的画廊。所有这些都将有一个在线数据库！

现在，我一直在尝试通过使用一些示例代码来做到这一点，但是我遇到了一个被卡住的地方。

如果可能的话，我的问题是问**你，我该如何开始？**我的意思是，**我应该从使用基于视图的应用程序、选项卡式应用程序开始吗？空申请？**

**我如何在 google 中搜索**关于解析 json 结构以使其充当菜单的关键字，我的意思是，一旦您单击产品，画廊就会出现？

**我需要的只是一些关键字**......不是任何解决方案或其他任何东西！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T09:52:11.573

您可以从使用基于视图的应用程序开始。在这种类型的应用程序中，您的根视图已经添加到您的窗口中。您可以稍后添加导航控制器...如果您需要任何进一步的帮助..随时询问！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T09:54:38.713

JSON的关键字：

1.  解析 json iphone
2.  iphone的json解析器
3.  json skd iphone

JSON[教程](http://mobileorchard.com/tutorial-json-over-http-on-the-iphone/)、[skd](https://github.com/johnezang/JSONKit/zipball/master)和示例[项目](https://github.com/dcgrigsby/luckynumbers/zipball/master)的链接。

链接到 Web 应用程序[教程](http://gigaom.com/apple/how-to-create-an-iphone-web-app/)。

使用 HTML5[教程](http://sixrevisions.com/web-development/html5-iphone-app/)链接到 Web 应用程序。

# php - 无法显示从 XML 获取的特殊字符

> ID：11699927
> 
> 赞同：0
> 
> 时间：2012-07-28T09:44:18.737
> 
> 标签：php, android, xml

我有一个 API 来获取位置。

使用网络浏览器，它显示：

```
<placeID>5</placeID>
<placeName>!@#$%&*?/_"'()-+;</placeName>
<rating>0</rating>
<categoryID>2</categoryID>
</place> 
```

使用 HttpGet 并输出到控制台，它显示：

```
<place>
<placeID>5</placeID>
<placeName>!@#$%&amp;*?/_&quot;'()-+;</placeName>
<rating>0</rating>
<categoryID>2</categoryID>
</place> 
```

在Android上显示placeName，它显示`!@#$%`

我将原始字符串存储在数据库中，并在 API 中使用 htmlspecialchars($placeName)。

问题与 相同`?~=\^[]{}&lt;&gt;:);):(:'(:o:P:$:S`，它出现`?~=\^[]{}&lt;&gt;:);):(:'(:o:P:$:S`在控制台和`?~=\^[]{}`Android 上。

**我想在 Android 上显示所有特殊字符，就像它存储在数据库中一样。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T10:32:31.957

网络浏览器向您显示第一个结果（未转义），因为它正在转换 & 到 & 用于显示。如果您在浏览器中执行“查看源代码”，您会看到它实际上是 & 就像使用 HttpGet 一样。这正是您想要发生的事情；您在控制台中看到的内容是正确的。

也就是说，在 Android 中输出该字符串应该不会有任何问题，因为它显然已正确转义。因此，问题很可能出在您的解析器中，就像在这个线程中一样： [Android SAX parser not getting full text from between tags](https://stackoverflow.com/questions/2838099/android-sax-parser-not-getting-full-text-from-between-tags)

即使您没有使用 SAXParser，您的解析代码也是此时您应该寻找问题的地方，而不是输入的数据。

为了安全起见，请尝试在您的 API 中使用带有 htmlspecialchars 的 ENT_QUOTES 标志，尽管在这种特定情况下这似乎不是问题。

我还应该提到，一旦你解决了这个问题，这取决于你在 Android 上显示文本的方式，它可能会像在控制台中一样出现转义，你会看到像 & 这样的东西。代替 ＆。如果是这种情况，您将需要像在此线程中那样从 XML 中解码字符串：[Java：如何在 Java 中取消转义 HTML 字符实体？](https://stackoverflow.com/questions/994331/java-how-to-decode-html-character-entities-in-java-like-httputility-htmldecode)

# java - 如何将内置 PLAF 与自定义组件一起使用？

> ID：11699931
> 
> 赞同：2
> 
> 时间：2012-07-28T09:45:06.483
> 
> 标签：java, swing, look-and-feel

我正在创建一个自定义按钮，但我无法让它在大多数内置 PLAF 上看起来正确。

这是我的代码

```
public MyButton(String text, Icon icon) {
    if (icon == null) icon = createDefaultIcon();

    mainButton = new JButton(text);
    popupButton = new JButton(icon);

    removeBorder(mainButton);
    removeBorder(popupButton);

    setModel(new DefaultButtonModel());
    setBorder(UIManager.getBorder("Button.border"));

    int popupButtonWidth = popupButton.getPreferredSize().width;
    int popupButtonHeight = mainButton.getPreferredSize().height;
    Dimension popupButtonSize = new Dimension(popupButtonWidth, popupButtonHeight);

    popupButton.setMinimumSize(popupButtonSize);
    popupButton.setPreferredSize(popupButtonSize);
    popupButton.setMaximumSize(popupButtonSize);

    setLayout(new BoxLayout(this, BoxLayout.LINE_AXIS));
    add(mainButton);
    add(new JSeparator(VERTICAL));
    add(popupButton);
}

private void removeBorder(JButton button) {
    Border border = button.getBorder();

    if (border instanceof CompoundBorder) {
         button.setBorder(((CompoundBorder) border).getInsideBorder());
    } else {
        button.setBorder(BorderFactory.createEmptyBorder());
    }
} 
```

这是按钮在我计算机上安装的 PLAF 中的外观

**金属**

![我的自定义按钮金属 PLAF 示例](../Images/8c297c9bc9e6f612b234fcda86b9b62f.png)

**雨云**

![我的自定义按钮 Nimbus PLAF 示例](../Images/152d96349c9b7277ea4d3bddec0193b7.png)

**CDE/主题**

![我的自定义按钮 CDE/Motif PLAF 示例](../Images/5dec147b9b1b912cf3749463dd34fb0c.png)

**Mac OS X**

![我的自定义按钮 Mac OS PLAF 示例](../Images/adbbbfba22fc7bc9ec78ba6593e72564.png)

CDE/Motif 是唯一可以正常工作的。我查看了一些 ButtonUI 的源代码，似乎它们可以忽略背景颜色和边框。不幸的是，背景颜色和边框是我需要设置的。如何让我的自定义按钮正确支持内置 PLAF？

**编辑：** 根据要求，这是我用来生成图像的代码

```
public class MyButtonDemo implements Runnable {

    public void run() {
        // Change the array index to get a different PLAF
        try {
            UIManager.setLookAndFeel(UIManager.getInstalledLookAndFeels()[0].getClassName());
        } catch (Exception ignored) { }

        JFrame frame = new JFrame();
        frame.getContentPane().setLayout(new FlowLayout());
        frame.getContentPane().add(new MyButton("My Button", null);
        frame.getContentPane().add(new JButton("Normal Button"));
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new MyButtonDemo());
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T10:09:50.610

欢迎来到可插拔外观的美妙世界。我能想到的唯一真正的选择是提供。每个平台的 UI 委托或查看[Synthetic UI](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/synth.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T00:46:16.193

不知道我做了什么，但它现在对除了 Nimbus 之外的所有人都有效。这是代码

```
public MyButton(String text, Icon icon) {
    arrowIcon = createDefaultArrowIcon();
    mainButton = new JButton(text, icon);
    popupButton = new JButton(arrowIcon);

    mainButton.setBorder(BorderFactory.createEmptyBorder());
    popupButton.setBorder(BorderFactory.createEmptyBorder());

    setLayout(new BoxLayout(this, BoxLayout.LINE_AXIS));
    add(mainButton);
    add(new JSeparator(VERTICAL));
    add(popupButton);

    setModel(new DefaultButtonModel());
    init(null, null);
}

@Override
public void updateUI() {
    setUI((ButtonUI)UIManager.getUI(this));
}

@Override
public String getUIClassID() {
    return "ButtonUI";
} 
```

# objective-c - 应用程序：didFinishLaunchingWithOptions：未执行（可能是山狮问题？）

> ID：11699932
> 
> 赞同：1
> 
> 时间：2012-07-28T09:45:23.847
> 
> 标签：objective-c, ios, macos, osx-mountain-lion

我有一个 iPhone 应用程序在 appstore 中存在了一个月（从 2011 年 11 月到现在）。7 月 17 日，我通过了 iTunes 的更新，今天他们拒绝了。他们说它在 iPad 上运行时只显示黑屏。我对其进行了测试，确实，闪屏图片出现了，几秒钟后它不是被应用程序的第一个屏幕取代，而是被黑屏取代。（iPad 模拟器以及物理 iPad）。但是 Xcodes 控制台中没有消息。

所以，我在我的 iPhone 上启动了这个应用程序，我在 7 月 17 日之前加载了它，并在发布之前测试了这个应用程序：它运行得很好。

然后我确实从 iPhone-Simulator 上的 Xcode 启动它：Splash-Picture，然后是黑屏，但控制台中没有消息。

所以我连接了我的 iPhone 并将新编译的版本加载到我的 iPhone：黑屏！！！

为了了解更多信息，我在 main.m 和 appDelegate.m 的几个位置将这一行插入到我的代码中：

```
NSLog(@"%s Line %d",__PRETTY_FUNCTION__,__LINE__); 
```

* * *

main.m 的内容：

```
//(some comment-lines)
#import <UIKit/UIKit.h>

int main(int argc, char *argv[])
{
    NSLog(@"%s Line %d",__PRETTY_FUNCTION__,__LINE__); //this is line 13
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
    NSLog(@"%s Line %d",__PRETTY_FUNCTION__,__LINE__); //this is line 15
    int retVal = UIApplicationMain(argc, argv, nil, nil);
    NSLog(@"%s Line %d",__PRETTY_FUNCTION__,__LINE__); //this is line 17
    [pool release];
    NSLog(@"%s Line %d",__PRETTY_FUNCTION__,__LINE__); //this is line 19
    return retVal;
} 
```

* * *

我还在 appDelegate.m 中输入了这一行：

```
- (BOOL) application:(UIApplication*)application didFinishLaunchingWithOptions:(NSDictionary*)launchOptions {
    NSLog(@"%s Line %d",__PRETTY_FUNCTION__,__LINE__);
    // some more code
} 
```

* * *

当我运行应用程序时，Xcodes 控制台中只显示这两行：

```
2012-07-28 11:03:29.548 nulowi[4072:c07] int main(int, char **) Line 13
2012-07-28 11:03:29.553 nulowi[4072:c07] int main(int, char **) Line 15 
```

所以看起来好像 main.m 中的 main 被执行并且 Autoreleasepool 被创建了。但是，在 main.m 中调用 UIApplicationMain 之后，在应用程序委托中调用 application:didFinishLaunchingWithOptions: 之前，一定发生了一些事情，我不知道这可能是什么。

也许这与我的 MacBook Pro 上从 Mac OS X 10.7 (Lion) 升级到 OS X 10.8 (Mountain Lion) 有关？当我在 7 月 17 日从 10.7 版的 MacBook 上发布经过测试的应用程序时，一切都很好。昨天我安装了从 10.7 到 10.8 的更新。

现在，当尝试从 10.8 版运行时，将不会调用 application:didFinishLaunchingWithOptions:。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T10:33:28.320

您是否会尝试彻底清理您的项目，直至删除构建文件夹的内容？然后重建，看看会发生什么......

您提到的内容可能存在一些问题，但只是在 OS/Xcode 版本之间“混淆”的意义上......

您可以在 Xcode 首选项中找到构建文件的位置（见图）。

![在此处输入图像描述](../Images/fe4a8e8e154977a6f6d8ee51e4af2aec.png)

如果这不起作用，请尝试将调用 UIApplicationMain 的方式更改为：

```
 int retVal = UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class])); 
```

指定您的应用程序委托的真实姓名。

# php - Zend 插件在视图中而不是在布局中

> ID：11699938
> 
> 赞同：0
> 
> 时间：2012-07-28T09:46:43.210
> 
> 标签：php, zend-framework, layout, plugins, view-helpers

我有一个检索按钮列表的插件。当我从视图（echo $this->GetAdminButtons()）调用这个插件时，它工作正常。但是我需要从 layout.phtml 调用这个插件，当我这样做时，应用程序就会停止（白屏，无输出）

当我尝试获取异常消息时，我收到此错误：

```
Plugin by name 'GetAdminButtons' was not found in the registry;
used paths: 
    Zend_View_Helper_Navigation_: Zend/View/Helper/Navigation/ 
    Zend_View_Helper_:            Zend/View/Helper/:./views/helpers/ 
```

在应用程序.ini

```
resources.view.helperPath.Admin_View_Helper = "Admin/View/Helper" 
```

这让我感到困惑，因为它在视图 .phtml 文件中工作正常

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T08:55:54.803

继续从评论中讨论。尝试移动`resources.layout`配置中的行，以便它们在`resources.view`那些之后（我在评论中的建议有错误的方式）。

我认为您的问题是布局在视图之前被初始化，这就是布局中不存在视图路径的原因。

# unity3d - 使用搅拌机进行流体模拟并导出到统一

> ID：11699942
> 
> 赞同：1
> 
> 时间：2012-07-28T09:47:04.597
> 
> 标签：unity3d, blender

我用搅拌机模拟倒水，我想把它用作统一的动画。我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T07:41:13.833

这是不可能的，至少不是你的想法，渲染使用的流体模拟不能只是导出并在游戏引擎中工作，统一不会支持这样的事情，什么都不支持，这也不是真的在这里

# java - Java - 如何使用 XML Pull Parser 轻松解析 XML？

> ID：11699947
> 
> 赞同：1
> 
> 时间：2012-07-28T09:48:11.257
> 
> 标签：java, android

我搜索了很多关于 XML Parsers 的内容，发现 Pull Parser 最适合 Android 应用程序。因此，我搜索了一些易于理解的示例，但没有找到。有人可以帮我说说如何使用 Pull Parser 轻松解析 XML（来自 URL 而不是资产）吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T09:59:25.837

从下面的链接下载示例演示项目，它将解析 stackoverflow RSS 提要

[http://developer.android.com/training/basics/network-ops/index.html](http://developer.android.com/training/basics/network-ops/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T09:51:36.093

你可以在这里找到所有关于**XML 拉解析的信息**

[http://www.cafeconleche.org/slides/sd2002east/xmlpull/XML_Pull_Parsing.html](http://www.cafeconleche.org/slides/sd2002east/xmlpull/XML_Pull_Parsing.html)

# asp.net-mvc-3 - 如何在 MVC3 中将 PartialViewResult 转换为 MvcHtmlString？

> ID：11699951
> 
> 赞同：1
> 
> 时间：2012-07-28T09:49:02.093
> 
> 标签：asp.net-mvc-3, razor

如何在 MVC3 中将 PartialViewResult 转换为 MvcHtmlString？

我想更改 HTML 字符串并从某些 Partial 视图中替换导致 PartialViewResult 中的某些 ID 索引。

```
 e.g.
 <input type="hidden" value="1" name="[0].lstMatches[4].match_rule_id"> 
 to
 <input type="hidden" value="1" name="[0].lstMatches[6].match_rule_id"> 
```

模型喜欢

> 返回 PartialView("_MatchPartial", objRETURN)。**TOMvcHTMLSTRING()** ;

寻找这种 TOMvcHTMLSTRING() 类型的函数。

有人可以帮我吗？

提前致谢， 阿米特 Prajapati

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-30T03:37:05.760

```
protected string RenderView(PartialViewResult result)
{
  using (var sw = new StringWriter())
  {
    result.View = ViewEngines.Engines.FindPartialView(ControllerContext, result.ViewName).View;
    ViewContext vc = new ViewContext(ControllerContext, result.View, result.ViewData, result.TempData, sw);
    result.View.Render(vc, sw);
    return sw.GetStringBuilder().ToString();
  }
} 
```

# excel - 将第 1 行数据附加到第 2 行

> ID：11699953
> 
> 赞同：0
> 
> 时间：2012-07-28T09:49:10.650
> 
> 标签：excel, append, excel-formula

我需要将备用行的数据（如 D1+D2）附加到 Excel 中。

请告诉我我该怎么做？

我有例如：

```
D1 = medical
D2 = Equipment 
```

我需要：

```
D1 = medical Equipment 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T12:46:55.340

您不能在输入公式的`D1`同时保留`D1`该公式的文本源。你提到了备用行，所以大概你想要`D3`等`D4`。因此我建议：

`=D1&" "&D2`在其他一些未使用的列的第 1 行中，

然后根据需要将其复制下来，

复制该其他列并将特殊/值粘贴到 ColumnD 的顶部，

通过删除“备用”列进行整理，

并删除偶数行号ColumnD中的单元格内容。

`&`将文本串在一起（连接），但要插入空格，您必须在每一端用双引号将其分隔。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-28T12:47:35.400

插入新列 D。（将旧列向右移动）在 D1 中输入此公式：

```
 =E1 & " " & F1 
```

如果您尝试合并来自两列的数据，& 符号将允许您这样做。但是，公式不能在您尝试组合的两列中的任何一列中，这就是我建议插入一列的原因。

如果您由于某种原因无法将此公式插入一列并且只能在原始两列内工作，请告诉我们，我们可以发布可以提供帮助的 VBA 代码。但是，听起来公式方法将是最简单的解决方案。

# java - java中对象的交换

> ID：11699955
> 
> 赞同：10
> 
> 时间：2012-07-28T09:49:14.917
> 
> 标签：java, pass-by-reference

我研究过 java 是通过引用传递的，但是当我执行以下代码时，字符串没有在 main 方法中交换，为什么？

```
static void swap(String s1, String s2){
    String temp = s1;
    s1=s2;
    s2=temp;
}

public static void main(String[] args) {
    String s1 = "Hello", s2 = "world";
    swap(s1, s2);
    System.out.println(s1 + s2);
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-28T09:51:12.643

你研究了错误的来源。Java 是按值传递的。[这](http://javadude.com/articles/passbyvalue.htm)是您可以研究的更多来源。从[这里](http://www.javaworld.com/javaqa/2000-05/03-qa-0526-pass.html)您可以找到与您的示例类似的讨论。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-28T11:08:20.520

**1.**首先也是最重要的，`Java`是`pass by Value`.（即**Pass by Copy**）。

**2.**您**将** `reference` **Not** the **Object**传递给方法。

**例如：**

```
public class Test{

        private String x;

            public void go(String s){

                this.x = s;

           }

         public static void main(String[] args){

                  Test t = new Test();

                  String a = new String("Bye");

                  t.go(a);

             }
      } 
```

上面的**代码不是为了展示交换是如何完成的，而是为了让一个重要的点可见。**

*   当**通过将一个参数“a”（它是一个**字符串类型）**传递给参数“s”（它也是一个**`go(String s)`字符串类型）来调用方法时，**它只是由值/副本传递的引用。** **`Object reference variable` **`Object reference variable`****

*******   对 进行的任何**更改** `reference` **都会影响堆上的 String 对象，而不是** `the reference`。****** 

 ***** * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-28T09:51:08.293

传递给方法的是对象引用的*副本*。因此，无论您重新分配引用多少次，原始引用都不会受到影响。

试试这个：

```
static void reverse(StringBuilder builder) {
    builder.reverse();
}

public static void main(String[] args) {
    StringBuilder builder = new StringBuilder("hello");
    System.out.println(builder);
    reverse(builder);
    System.out.println(builder);
} 
```

但是，下面的方法不会对传入的原始对象产生任何影响。

```
static void swap(StringBuilder builder) {
    builder = null;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-28T09:51:31.943

Java 按值传递引用；在被调用的方法中交换引用对调用者没有影响。您的字符串是不可变的，因此您无法`swap`在调用者可见的方法中对它们执行任何操作。

但是，如果您传递可变对象，您将看到对它们所做的更改`swap`将反映在原始对象中：

```
public static void main(String[] args) {
    String a[] = {"hello", "world"};
    swap(a);
    System.out.println(a[0] + " " + a[1]);
}
static void swap(String[] a) {
    String t = a[0];
    a[0] = a[1];
    a[1] = t;
} 
```

这是可行的，因为数组是*可变*的（即可以对其状态进行更改），并且因为对原始对象的引用被传递给被调用的函数（按值）。当`swap`修改其内容`a`时，调用者中的内容`a`也会被修改，因为它是同一个对象。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-28T09:55:20.763

Java 总是按值传递引用。阅读[此答案](https://stackoverflow.com/a/9404727/597657)以获取更多详细信息。但是，您可以通过数组或包装类交换两个字符串。

* * *

**编辑：**

@dasblinkenlight 展示了如何使用数组来交换两个字符串，这里是一个使用包装类的例子：

```
public class WrapperString
{
    public String text;

    public WrapperString(String text){this.text = text}

    @Override
    public String toString(){return text;}
} 
```

```
public static void swap(WrapperString a, WrapperString b)
{
    String temp = a.text;
    a.text = b.text;
    b.text = temp;
}

public static void main(String[] args)
{
    WrapperString s1 = new WrapperString("Hello");
    WrapperString s2 = new WrapperString("World");

    swap(s1, s2);
    System.out.println(s1.text + s2.text);
    // or System.out.println(s1 + s2); since we've already overridden toString()
} 
```

**输出：**

```
WorldHello 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-03T11:16:17.710

```
public static void swap(SwapDate[] t)
    {
     SwapDate temp;;
      temp=t[0];
       t[0]=t[1];
       t[1]=temp;
    }

       public static void main(String args[])throws Exception{

          SwapDate t[]=new SwapDate[5];
           t[0]=new SwapDate(20,8,2015);
           t[1]=new SwapDate(8,8,2015);

           System.out.println("(First object)Account Opnening date :"+" "+t[0].date);
           System.out.println("(second object)Account Opnening date :"+" "+t[1].date);

           swap(t);
           System.out.println("After Swap");

           System.out.println("(First object)Account Opnening date :"+" "+t[0].date);
           System.out.println("(second object)Account Opnening date :"+" "+t[1].date);

           } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-06-01T06:49:49.903

Java 是严格按值传递的。

让我们从解释的角度修改您的代码如下

```
static void swap(String str1, String str2){
String temp = str1;
str1=str2;
str2=temp;
}

public static void main(String[] args) {
String s1 = "Hello", s2 = "world";
swap(s1, s2);
System.out.println(s1 + s2); 
```

}

S1 和 S2 是保存字符串对象地址的引用。例如： S1=123 , S2= 234

当我们调用 swap 方法时，会创建 S1 和 S2 的副本并将其分配给 str1 和 str2。

这将是 str1=123 和 str2=234。

Swap 方法只会交换 str1 和 str2 中存在的值。(str1=234 str2=123) 而 S1 和 S2 仍然指向相同的内存位置。

这就是为什么交换没有反映在 main 方法中的原因。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2014-04-13T19:39:33.253

我们可以交换对象。很简单。只需使用一个虚拟对象来交换两个对象。

示例如下：

```
 Employee e1=new Employee();
    Employee e2=new Employee();
    e1.setName("e1");
    e2.setName("e2");   
    System.out.println(e1);
    System.out.println(e2);
    Employee temp= new Employee();
    temp=e1;
    e1=e2;
    e2=temp; 
```****

# c++ - C++ STL 内存管理：堆栈还是堆？

> ID：11699956
> 
> 赞同：2
> 
> 时间：2012-07-28T09:49:25.987
> 
> 标签：c++, memory-management, stl

通常，当我使用非本地范围内的 STL 对象时，我会存储指向要存储的数据的指针。例如

```
std::vector<MyStruct*> 
```

当需要清理向量时，我会检查并删除所有内容。我最近注意到这并不像我想象的那样是必要的。无论出于何种原因，我一直认为 STL 类将数据存储在堆栈上，而我现在认为它是在堆上分配数据的。它是否正确？将对象存储为指针以减少复制时间的唯一真正好处是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-28T09:56:55.660

标准容器通过分配器对象分配内存，其类型作为模板参数传递。如果你没有传递任何其他东西，那就是`std::allocator<T>`，它将用于`new`分配内存。

底线：您可以强制他们以几乎任何您想要的方式分配内存，但默认情况下它将来自免费存储。

如果你真的想要一个指针容器，容器将拥有指针对象（例如，当对象被销毁时会自动删除它们），你可能想看看 Boost [Pointer Containers](http://www.boost.org/doc/libs/1_50_0/libs/ptr_container/doc/ptr_container.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-28T09:54:40.890

使用指针来减少复制时间**是**一个真正的好处。想想所有可以通过它改进的向量操作——例如排序。

另一个真正的好处（如上面的评论中所述）是这允许您使用多态性并将*相关*对象存储在同一个向量中。你不能用标量对象（非指针）做的事情。

无论您将数据存储在堆栈还是堆上，都不会影响移动该对象的成本（嗯......确实如此，但通常可以忽略不计，并且与本讨论无关）。

当您将指向对象的指针存储在 STL 向量中时，该向量**不会**获得您的对象的所有权。您仍然需要进行尽职调查并在不再需要它们时进行清理。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-28T09:56:13.690

> [...] 而我现在认为它将它分配在堆上。它是否正确？

是的。如果将向量声明为：

```
std::vector<MyStruct*> v; 
```

那么您基本上将指针存储在向量中，因此向量将分配内存来存储*指针*，而不是指针指向的对象。所以当析构函数运行时，向量将释放它已经分配的内存，它不会释放指针本身的内存，即它不会释放存储在向量中的指针指向的内存。

但是，如果您声明：

```
std::vector<MyStruct> v; 
```

然后您自己存储对象，因此向量将分配内存来存储对象，并在析构函数运行时释放它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-28T09:52:27.137

> 当需要清理向量时，我会检查并删除所有内容。我最近注意到这并不像我想象的那样是必要的。

不要假设。如果向量中的指针指向动态分配的内存，那么您**将**需要删除该内存，因为向量不会为您执行此操作。

例如，如果您的代码属于

```
 MyStruct* pNewStruct = new MyStruct;
 myVector.push_back(pNewStruct);

 ...
 ...

 myVector.clear(); 
```

您有内存泄漏，因为您没有专门删除分配给添加到向量中的每个元素的内存。作为动态数组的一部分，向量释放了它在自身内部分配的内存，但这只是释放了指针数组，而不是它们指向的内存

# c# - C# Ftp 下载文件进度

> ID：11699958
> 
> 赞同：0
> 
> 时间：2012-07-28T09:50:00.497
> 
> 标签：c#, progress

我下载了 ftp.dll 并且正在使用它。我使用了该代码：

```
ftp.DownloadFiles(Properties.Settings.Default.update_ver,
Application.StartupPath,
new RemoteSearchOptions("*.*", true)); 
```

但我想使用显示下载进度的进度条。

有下载链接：[http ://www.limlabs.com/ftp](http://www.limilabs.com/ftp)

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T15:20:54.273

我相信我已经解决了你的问题。以下是修复它的几个步骤：

**第 1 步：** 添加后台工作人员。

**第 2 步：** 在属性中将 WorkerReportsProgress 设置为 True。

**第 3 步：** 添加`backgroundWorker1.RunWorkerAsync();`到表单负载。

**第 4 步：** 双击后台工作人员

**第 5 步：** 在此处添加您的代码...将此代码添加到您的代码末尾：

```
for (int i = 0; i <= 100; i++)
{
     backgroundWorker1.ReportProgress(i);
     // You can remove Sleeep. I added because my download is realy fast.
     System.Threading.Thread.Sleep(20);
} 
```

**第 6 步：** 单击属性中的事件。

**第 7 步：** 双击进度更改

**第 8 步：** 添加`Statusbar1.Value = e.ProgressPercentage;`

**第 9 步：** 双击 RunWorkerCompleted

**第10 步：** 添加您的代码以完成下载。

我希望这对每个人都有帮助。

# magento - 在magento中通过cron导入产品时出错

> ID：11699960
> 
> 赞同：2
> 
> 时间：2012-07-28T09:50:20.323
> 
> 标签：magento, import, cron

我正在使用此脚本通过 magento 中的 cron 导入产品，一切正常，但它没有导入产品数量（数量）以及产品 is_in_stock 状态，尽管所有这些都在 CSV 文件中。请帮助我如何我能成功导入所有产品信息吗？导入代码如下：

```
<?php
 require_once 'app/Mage.php';
umask(0);
 ini_set("memory_limit","1024M");
//$_SERVER['SERVER_PORT']='443';
Mage::app();
$profileId = 7; //put your profile id here

$logFileName= "import.log";
$recordCount = 0;
// This won't work if Logging settings is disabled
// To activate it go to System->Configuration->Developer
Mage::log("Import Started",null,$logFileName);
$profile = Mage::getModel('dataflow/profile');

$userModel = Mage::getModel('admin/user');
$userModel->setUserId(0);
Mage::getSingleton('admin/session')->setUser($userModel);

if ($profileId) {
    $profile->load($profileId);
    if (!$profile->getId()) {
        Mage::getSingleton('adminhtml/session')->addError('The profile you are trying to save no longer exists');
    }
}

Mage::register('current_convert_profile', $profile);

$profile->run();

$batchModel = Mage::getSingleton('dataflow/batch');
if ($batchModel->getId()) {
    if ($batchModel->getAdapter()) {
        $batchId = $batchModel->getId();
        $batchImportModel = $batchModel->getBatchImportModel();
        $importIds = $batchImportModel->getIdCollection();
        $batchModel = Mage::getModel('dataflow/batch')->load($batchId);
        $adapter = Mage::getModel($batchModel->getAdapter());
        foreach ($importIds as $importId) {
            $recordCount++;
            try{
                $batchImportModel->load($importId);
                if (!$batchImportModel->getId()) {
                    $errors[] = Mage::helper('dataflow')->__('Skip undefined row');
                    continue;
                }

                $importData = $batchImportModel->getBatchData();
                try {
                    $adapter->saveRow($importData);
                } catch (Exception $e) {
                    Mage::log($e->getMessage(),null,$logFileName);
                    continue;
                }

                if ($recordCount%20 == 0) {
                    Mage::log($recordCount . ' - Completed!!',null,$logFileName);
                }
            } catch(Exception $ex) {
                Mage::log('Record# ' . $recordCount . ' - SKU = ' . $importData['sku']. ' - Error - ' . $ex->getMessage(),null,$logFileName);
            }
        }
        foreach ($profile->getExceptions() as $e) {
            Mage::log($e->getMessage(),null,$logFileName);
        }

    }
}

Mage::log("Import Completed",null,$logFileName);

// Catalog Rewrites
try {
    Mage :: getSingleton( 'catalog/url' ) -> refreshRewrites();
}
catch ( Exception $e ) {
    Mage::log($e -> getMessage(),null,$logFileName);
}
// LAYERED NAV
    try {
        $flag = Mage::getModel('catalogindex/catalog_index_flag')->loadSelf();
        if ($flag->getState() == Mage_CatalogIndex_Model_Catalog_Index_Flag::STATE_RUNNING) {
            $kill = Mage::getModel('catalogindex/catalog_index_kill_flag')->loadSelf();
            $kill->setFlagData($flag->getFlagData())->save();
        }

        $flag->setState(Mage_CatalogIndex_Model_Catalog_Index_Flag::STATE_QUEUED)->save();
        Mage::getSingleton('catalogindex/indexer')->plainReindex();
        Mage::log('Layered Navigation Indices were refreshed successfully', null, $logFileName);
    }
    catch (Mage_Core_Exception $e) {
        Mage::log($e -> getMessage(). "\n",null,$logFileName);
    }
    catch (Exception $e) {
        Mage::log('Error while refreshed Layered Navigation Indices. Please try again later', null,$logFileName);
    }
 ?> 
```

谢谢帕万

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T06:34:49.620

把这个放在你的`$product->save()`电话之前。

```
Mage::app()->setCurrentStore(Mage::getModel('core/store')->load(Mage_Core_Model_App::ADMIN_STORE_ID)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T14:37:58.327

为什么不直接使用产品模型进行导入？

# heroku - 无法使用 cmd.exe 登录 heroku

> ID：11699965
> 
> 赞同：0
> 
> 时间：2012-07-28T09:50:48.973
> 
> 标签：heroku

我正在遵循各种论坛的建议，但到目前为止还没有运气。

我打开 cmd.exe

我去 Programme\Heroku\App （我设置的文件夹）

我输入heroku登录

我收到错误“没有这样的文件或目录”

?

请帮忙。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T02:19:30.953

`heroku`您需要将 Heroku 文件夹添加到您的 $PATH - 当您进入您的应用程序时，cmd.exe在 App/ 文件夹中找不到任何调用的内容。

你是如何安装 Heroku 的？也许尝试 Toolbelt 方法，它应该为您处理它？[https://toolbelt.heroku.com/](https://toolbelt.heroku.com/)

# php - PHP电子邮件脚本中的参数

> ID：11699980
> 
> 赞同：0
> 
> 时间：2012-07-28T09:52:19.167
> 
> 标签：php, email

我写了一个 php 电子邮件脚本，假设来自我们网站的消息`My~PHP~Script.com`发送给用户，例如：`abc@yahoo~mail.com`来自例如：`def@yahoo~mail.com`以特定格式：

* * *

`Subject: def@yahoo~mail.com sent you a message Via My~PHP~Script~`

`From: noreply@My~PHP~Script.com`

`Message: Here is the message....`

* * *

现在我希望在雅虎邮箱（或任何其他邮件）中，如果该人（`abc@yahoo~mail.com`）点击，`Reply to mail`那么雅虎或（其他邮件站点）应该从主题（即）中提取电子邮件`def@yahoo~mail.com`进行回复。

我是否需要发送任何特定参数来通知邮件站点用户可以在哪个地址回复....如何达到预期的结果...？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T09:55:40.923

有一个`Reply-To`可用的标题。只需将其设置为您的电子邮件，它将在用户点击时使用`Reply`

```
$recipient = '...';
$subject   = '...';
$message   = '...';

$headers   = "Reply-To: YOUR EMAIL HERE";

mail($recipient, $subject, $message, $headers); 
```

# permissions - Joomla 2.5 set default ACL permission values

> ID：11699983
> 
> 赞同：3
> 
> 时间：2012-07-28T09:52:37.443
> 
> 标签：permissions, acl, joomla2.5

I have developed a component and added ACL for viewing permissions in it and everything works great, the only issue is that when I install the component by default it uses 'inherited' permissions for view which somehow comes as denied and everytime I install the component I have to first change the permission to 'Allowed' so I wanted to ask if there is way to set default values for permissions like there is for everything else? If there is then what exactly is the syntax? Thanks

PS: Please don't provide me with [this link](http://docs.joomla.org/Developing_a_Model-View-Controller_(MVC)_Component_for_Joomla!2.5_-_Part_14#admin.2Faccess.xml) as I have read it and it doesn't solve my problem.

Following is my config.xml permissions code

```
<fieldset name="permissions" label="JCONFIG_PERMISSIONS_LABEL" description="JCONFIG_PERMISSIONS_DESC">
        <field name="rules" type="rules" label="JCONFIG_PERMISSIONS_LABEL" filter="rules" component="com_name" section="component">
            <action name="core.view" title="View" description="View" />
        </field>
    </fieldset> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T07:22:57.230

安装组件时，您必须更新`#__assets`表中的权限规则。

如果我们需要默认授予对特定组（如 Manager 或 Author）的完全访问权限，

在中，我们必须像这张表`install.yourcomponent.php`一样编写自己的查询。`update #__assets`

在`#__assets`表中有一个`rules`字段将存储所有权限值，所以这里我们需要使用我们的值更新表。

**例如：**

`update #__assets set`规则`='{"core.manage":{"6":1},"core.configuration":{"6":1,"7":1,"8":1},"core.admin":[],"core.create":[],"core.delete":[],"core.edit":{"8":1},"core.edit.state":{"8":1}}' where name ='com_yourcomponent' and title='yourcomponent title'`

# c# - Select control element in Visual Studio in ASP.NET

> ID：11699990
> 
> 赞同：0
> 
> 时间：2012-07-28T09:53:34.467
> 
> 标签：c#, asp.net, visual-studio-2010

I am new in ASP.NET, and I have a website which I opened it by MS Visual 2010\. The problem is when I try to select a control element I can not because it seems behind `ContentPlaceHolder`. See the image below, what can I do!

![enter image description here](../Images/4bc1eeb6da035ff46e56073192a63f5a.png)

Here is the code of the page:

```
<%@ Page Title="" Language="C#" MasterPageFile="~/MasterPage.master" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="_Default" %>

<asp:Content ID="Content1" ContentPlaceHolderID="head" Runat="Server">
<title>Job Seekers : Search Job in Oman</title>
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" Runat="Server">

    <asp:Label ID="Label1" runat="server" Text="Label"></asp:Label>

    <asp:Table runat="server" Width="800" style="direction: ltr" Visible="False">
    <asp:TableRow VerticalAlign="Top">

        <asp:TableCell ID="cell_register" runat="server"></asp:TableCell>
        <asp:TableCell RowSpan="2" VerticalAlign="Top" ColumnSpan="2" CssClass="tdcloud2">            
        <h2>Last News</h2>
        <div id="news" runat="server"></div>
 </asp:TableCell>
         <asp:TableCell RowSpan="2" VerticalAlign="Top" Width="200" CssClass="tdcloud">
            <h2>Site Services</h2>

            <hr /><br />
            <img src="Images/bullet.png" />  <a href="AvailableJobs.aspx">Available Jobs</a><br />
            <img src="Images/bullet.png" />  <a href="CompaniesProfiles.aspx">Compnaies Profiles</a><br />
            <img src="Images/bullet.png" />  <a href="AddCompany.aspx">Register Company</a>
         </asp:TableCell>

    </asp:TableRow>

    <asp:TableRow VerticalAlign="Top">
            <asp:TableCell ID="cell_login" runat="server" Width="200" CssClass="tdcloud">
            <h2>Login</h2>
            <hr />
            <asp:Label ID="lbl_error" runat="server" Text="" CssClass="error"></asp:Label>
            <br />
            <asp:Label ID="lbl_email" runat="server" Text="Email:" CssClass="label"></asp:Label>
            <asp:TextBox ID="txt_email" runat="server" CssClass="input"></asp:TextBox>
            <br />
            <asp:Label ID="lbl_password" runat="server" Text="Password:" CssClass="label" ></asp:Label>
            <asp:TextBox ID="txt_password" runat="server" TextMode="Password" CssClass="input"></asp:TextBox>
            <br />
            <asp:CheckBox ID="chk_company" runat="server" /><asp:Label ID="lbl_company" runat="server" Text="Company" CssClass="" ></asp:Label>
            <br /><asp:Button ID="btn_login" runat="server" Text="Login" 
        onclick="btn_login_Click" />
        <br /><br />
            <a href="Forget.aspx">Forget Password ?</a>
            <br />
            <a href="Register.aspx">Regsiter</a>
            <hr />
        </asp:TableCell>

        <asp:TableCell ID="cell_logged" runat="server" Visible="false" CssClass="tdcloud">
            <h2>Account</h2>
            <hr />
            <img src="Images/users.png" />
            <div><span class="bold"><%=Session["email"] %><%=Session["company"] %></span> </div>
            <br />
            <%
                if (Session["company"] != null)
                {
                    %>
                    <div><a href="CompInfo.aspx">Company Information</a></div>
                    <div><a href="SeekersApplications.aspx">Seekers Applications</a></div>
                    <div><a href="ChangePasswordCompany.aspx">Change Password</a></div>
                    <div><a href="AddJob.aspx">Add Job</a></div>

                        <%
                }
                else
                {
                    %>
                                <div><a href="PersInfo.aspx">Personal Information</a></div>
                    <div><a href="JobApplications.aspx">Job Applications</a></div>
                    <div><a href="ChangePasswordSeeker.aspx">Change Password</a></div>
                        <div><a href="UploadCv.aspx">Upload CV</a></div>
                    <%
                }
            %>

            <br />
            <asp:Button ID="btn_SinOut" runat="server" Text="Sign Out" 
        onclick="btn_SinOut_Click" />
        <asp:Label runat="server" Text="Are you sure you want to sign out?" id="lbl_note" Visible="false"></asp:Label>
        <asp:Button ID="btn_yes" runat="server" Text="yes" 
        onclick="yes" Visible="false" />
        <asp:Button ID="btn_no" runat="server" Text="no" 
        onclick="no" Visible="false" />
        <hr />
        </asp:TableCell>    </asp:TableRow>
    <asp:TableRow VerticalAlign="Top">

        <asp:TableCell><h2>Advertisements</h2><a href="http://nawras.om"><img src="Images/nawras.jpg" width="80" height="80" /></a>  <a href="http://www.oxy.com"><img src="Images/oxy.jpg" width="80" height="80" /></a>  <a href="http://www.pdo.co.om/"><img src="Images/pdo.gif" width="80" height="80" /></a></asp:TableCell>
        <asp:TableCell><center><h2>New Jobs</h2></center>
        <div id="jobs" runat="server"></div>
        </asp:TableCell>
        <asp:TableCell><center><h2>Jobs ends soon</h2></center><div id="jobsends" runat="server"></div></asp:TableCell>
        <asp:TableCell><center><h2>Contact</h2></center><center><a href="Contact.aspx"><img title="Contact Me" width="150" src="Images/contact.jpg" /></a></center></asp:TableCell>

    </asp:TableRow>

    </asp:Table>
    </asp:Content> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T16:50:24.660

如果您想选择一个控件并且无法从您的设计器控件持有者中选择该控件，在设计模式下，单击 F4 并在属性框的顶部，您可以在表单/页面中找到所有控件的列表，如下所列一个列表框。但是如果你想选择控件的一部分，例如：登录控件的登录按钮，将鼠标悬停在控件上，然后单击控件任务（一点**>**符号）并单击**转换为模板**，此操作会爆炸控件并且您可以根据需要选择它的每个部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T10:28:58.447

我认为您正在`master page`尝试从内容页面访问母版页的控件。如果是这种情况，请转到母版页并访问那里的控件。否则在源视图而不是设计视图中查找控件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T17:13:36.117

希望有所帮助： [无法选择表格单元格内的项目](http://connect.microsoft.com/VisualStudio/feedback/details/367141/cannot-select-items-inside-table-cells)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-12T01:44:37.377

只是简单的解决方案 - >从表格单元格中剪切控制并粘贴到表格外。-> 执行你想要的操作 -> 然后再次剪切控件并再次粘贴到上一个单元格中。

它会起作用的。

# objective-c - SMJobSubmit() 可以用来执行由 SMJobBless 安装的特权助手吗？

> ID：11699992
> 
> 赞同：7
> 
> 时间：2012-07-28T09:54:06.980
> 
> 标签：objective-c, xcode, macos, cocoa, launchd

我一直在阅读文档和 SMJobBless 示例以及 Internet 上的各种讨论。我的应用程序现在使用 安装特权助手`SMJobBless()`，但助手根本不运行。

帮助程序的全部目的是在应用程序启动时加载一个 kext，这是我的应用程序的一个重要组件。我已经看到示例显示尝试通过 XPC 连接到帮助程序将启动帮助程序，但我想让我的帮助程序保持简单和愚蠢。

API 文档显示有一个`SMJobSubmit()`函数。它究竟是做什么的？我可以用它来启动以前安装的特权助手`SMJobBless()`吗？

我对周围的所有术语感到困惑，`launchd`例如`Service Management Framework`，“RunAtLoad”plist 选项控制“您的作业是否在加载作业时启动一次”。“加载”和“启动”到底是什么，它们与“祝福/安装”和“提交”有什么关系？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-06T03:57:03.443

SMJobBless 会将您的工作添加到 launchd 的系统中。请参阅 SMJobBless 示例代码以执行此操作。

[http://developer.apple.com/library/mac/#samplecode/SMJobBless/Introduction/Intro.html](http://developer.apple.com/library/mac/#samplecode/SMJobBless/Introduction/Intro.html)

但是，launchd 的全部目的是控制作业的启动方式和时间，并且默认情况下（在示例代码中），实际上没有指定作业应该何时启动，因此该作业实际上永远不会启动.

Nathan de Vries 写了一篇非常好的文章和示例代码，用于使用 SBJobBless 和使用 XPC 与特权作业进行通信。当然，一个重要的副作用是，尝试与 launchd 服务通信的行为将导致 launchd 实际启动您的服务，因此这将解决您的问题。

[http://atnan.com/blog/2012/02/29/modern-privileged-helper-tools-using-smjobbless-plus-xpc/](http://atnan.com/blog/2012/02/29/modern-privileged-helper-tools-using-smjobbless-plus-xpc/)

为了具体回答您的问题，SMJobSubmit 可以执行特权助手。我花了很长时间才弄清楚，但两者之间的区别在于 SMJobSubmit 将允许您使用 launchd 运行具有权限的可执行文件，而 SMJobBless 将永久添加一个 LaunchDaemon。SMJobBless 已安装的可执行文件将保持有效，而 SMJobSubmit 将要求您每次都重新进行身份验证。

请注意，在这两种情况下，您都必须 SMJobRemove 前一个以确保使用新版本。

所以，我认为你需要：

*   SMJobRemove, SMJobSubmit 每次启动应用程序时，每次都提示用户进行身份验证。使用您构建的字典中的 RunAtLoad 属性让帮助程序立即执行。

或者

*   使用Nathan的代码，XPC连接，询问它的版本号，如果它没有更新，让它退出，然后SMJobRemove，SMJobBless一个新版本，然后XPC连接并要求它安装你的kext。这样，用户只需对任何新版本进行身份验证。

# java - 如何在 Centos 中创建 Java 守护进程

> ID：11699999
> 
> 赞同：2
> 
> 时间：2012-07-28T09:55:15.433
> 
> 标签：java, daemon

我研究了如何创建可以在 Centos 上运行的 Java 守护程序。我发现有两种方法：

1.  使用 C 代码启动守护程序[示例](http://commons.apache.org/daemon/) [示例](https://stackoverflow.com/questions/1311268/tool-for-creating-a-java-daemon-service-on-linux)。
2.  带有初始化脚本[示例](http://barelyenough.org/blog/2005/03/java-daemon/)的纯 java 守护进程。

选择哪一个。我更喜欢纯 Java 解决方案。你能分享一些经验吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T10:04:21.673

我会让事情尽可能简单。我会使用纯 java 从 shell 脚本开始的方法。或者，如果您想以用户身份运行该进程，您可以使用 cron 启动该进程。