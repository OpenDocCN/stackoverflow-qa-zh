# StackOverflow 问答 11869000-11869999

# java - JScorllPane 文本从窗口飞出

> ID：11869000
> 
> 赞同：1
> 
> 时间：2012-08-08T16:29:59.437
> 
> 标签：java, loops, stream, scroll, frame

我正在尝试将`JFrame`文本文件中的每一行读入 a`JLabel`并将其`JLabel`放入 a`JScrollPane`中，`JScrollPane`然后将其添加到我的窗口的容器中。内容和标签已加载，但有一个问题，一旦窗口加载我的`JScrollPane`拉链并离开，`Container`留下一个空白窗口。有什么帮助吗？这是代码：

```
import java.awt.Container;
import java.util.Scanner;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JScrollPane;

public class Helper extends JFrame{

String  filepath = "assets/help.txt";
Scanner reader;
Container contentpane;
JScrollPane scrp =  new JScrollPane(null);
JLabel line = new JLabel();
int align_x, align_y;
int window_width  = 700;
int window_height = 700;

public Helper(){ 
    setSize(window_height,window_width);
    setVisible(true);
    setTitle("Electric Force Calculator Helper");
    scrp.setSize(window_height,window_width);
    scrp.setVisible(true);

    contentpane = getContentPane();
    reader = new Scanner(getClass().getResourceAsStream(filepath));

    align_x = 10;
    align_y = 10;

    while(reader.hasNextLine()){
        line = new JLabel(reader.nextLine());
        line.setBounds(align_x,align_y,window_width,20);
        scrp.add(line);
        align_y+=20;
    }
    contentpane.add(scrp);

}

public static void showHelpFrame(){
    Helper newHelper = new Helper();
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T16:34:23.447

`line = new JLabel(reader.nextLine());`您每次都在这里创建一个新标签，然后将该标签添加到 with 中的另一个标签`JScrollPane`上`scrp.add(line);`

更好的方法是使用 a `JList`，将 a 包裹起来`JList`，`JScrollPane`然后用您的文本行填充列表的数据模型。

```
DefaultListModel<String> lines = new DefaultListModel<String>();
JList l = new JList(lines);
JScrollPane scrp =  new JScrollPane(l);

while(reader.hasNextLine()) {
    lines.addElement(reader.nextLine());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T16:51:29.933

是的，不要使用 JLabel。使用 JList。或者，首先将所有 JLabel 添加到单独的 JPanel，然后将其添加到 JSCrollPane。

我有一些建议要给你。

1.  为变量使用更多用户友好的名称（这些名称很小。你真的需要使用下划线，而不是使用驼峰式大小写吗？这取决于你）

2.  即使在使用最简单的 GUI 之前，也不要将所有内容设置为可见。尽可能在构造函数的末尾做可见的东西

3.  您正在扩展 JFrame。所以，让它可见。在这里，您也调用了 JScrollPane 的 setVisible(true)，这不是必需的。

4.  调用 getContentPane 的最简单方法是 getContentPane().add(stuff)。无需为此创建单独的变量。

5.  在构造函数中初始化变量。不是在那之前，把它排除在一切之外。这是可能的，但这并不意味着它没问题。

# sql - 将 NULL 值设置为初始化值的 SQL 语句

> ID：11869005
> 
> 赞同：0
> 
> 时间：2012-08-08T16:30:18.403
> 
> 标签：sql, tsql, null, initialization

在 SQL 或 T-SQL 中，如果类型是文本，我如何遍历表并将 NULL 字段设置为空字符串，如果字段是整数类型，则设置为 0。

感谢您的帮助，我什至不知道从哪里开始。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T16:33:48.827

好吧，如果它只是一个表，请使用基本更新查询：

```
UPDATE MyTable
SET NumericColumn = ISNULL(NumericColumn,0), 
StringColumn= ISNULL(StringColumn,'') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T16:35:50.463

您的建议只能作为“一次性”使用。

如果您总是希望将来填充这些字段，您可以在表格上设置默认值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T16:33:09.030

您可以在 T-SQL 中使用 IsNull 函数，

句法 ：

```
ISNULL ( check_expression , replacement_value ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T18:48:13.750

该功能`coalesce( expression_1 , expression_2 , ... )`在这种情况下也很有用。

它从左到右计算指定的表达式，并返回第一个计算结果为 以外的值的表达式的值`null`，或者`null`如果所有指定的表达式计算结果为`null`。

这可能很有用，尤其是与左连接和表旋转结合使用时。

# jquery - jquery prepend uncaught typeerror object has no method prepend

> ID：11869009
> 
> 赞同：0
> 
> 时间：2012-08-08T16:30:24.603
> 
> 标签：jquery, methods, append, prepend

我们正在一个网站上工作： [www.granthammond.com](http://granthammond.com) ，它具有一个 IDX 插件，它在搜索结果页面上输出大量或动态风格， http: [//granthammond.com/idx/mls-1385061-8788_highway_70_nashville_tn_37221](http://granthammond.com/idx/mls-1385061-8788_highway_70_nashville_tn_37221)

我正在使用一些 jQuery 来移动一些 DOM，特别是`#source-ordered-content`and `#dsidx-disclaimer`，我正在使用`.remove`and `.prepend`，我得到了错误： `uncaught typeerror, object has no method .prepend` 奇怪。我很确定我以前做过这种事情，但是这次我做的不对，很明显，我的 jQuery 技能显然已经到了午餐时间。

这是恐怖，呃，代码：

```
jQuery(document).ready(function($) {

// do_stuff
var socHeight;
var socDiv;
var socContent;
var dsidxDisclaimer;

// get height of source ordered content
socHeight = $("#source-ordered-content").height();
wrapHeight = $("#wrap").height();

//console.log( 'socHeight: ' + socHeight );
//console.log( 'wrapHeight: ' + socHeight );

$("#content").css({
     'height': socHeight
});

// or, for IDX data pages, 

socContent = $(".page-dsidxpress-data #source-ordered-content").remove();
$("#content").prepend(socContent);

//move the disclaimer down into the footer.
dsidxDisclaimer = $(".page-dsidxpress-data #dsidx-disclaimer").remove();
$("#footer").append(dsidxDisclaimer);

}); // end (document).ready() 
```

再次感谢堆栈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T16:36:43.527

你用错了。

您在当前代码中添加和添加的不是元素，而是元素的删除，这是行不通的。我不是说这是有效的代码（因为你没有提供 jsfiddle），但它应该是这样的：

```
socContent = $(".page-dsidxpress-data #source-ordered-content")
socContent.remove();
$("#content").prepend(socContent);

//move the disclaimer down into the footer.
dsidxDisclaimer = $(".page-dsidxpress-data #dsidx-disclaimer");
dsidxDisclaimer.remove();
$("#footer").append(dsidxDisclaimer); 
```

# python - appengine 和 html5 音频

> ID：11869010
> 
> 赞同：0
> 
> 时间：2012-08-08T16:30:30.407
> 
> 标签：python, html, google-app-engine, blobstore

我只是想弄清楚如何使用`blobstore`和`HTML5`音频。

我的代码只是对工作代码进行了轻微修改，因此不需要进行重大更改。

```
class data(webapp2.RequestHandler): 
def get(self):
    a = db.GqlQuery("SELECT * FROM UserPhoto")
    blob = a[1].blob_key

    self.redirect('/Serve/%s' % blob.key())

class ServeHandler(Handler, blobstore_handlers.BlobstoreDownloadHandler):
def get(self, audio_key):
    if not blobstore.get(audio_key):
        self.error(404)
    else:
        self.send_blob(audio_key)
        self.redirect('/music')

class music(Handler):
def get(self):
    self.render("music.html") 
```

这是播放音频的 HTML：

```
<audio controls="controls">
<source src="/Serve/%s"/>
Your browser does not support the audio element. 
```

错误是

```
"GET /Serve/%s HTTP/1.1" 404 - 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T16:54:40.557

您似乎没有将实际的关键变量放在 HTML 中。你只是有`/serve/%s`这显然是错误的——Django 模板甚至不使用 Python 字符串替换，更不用说你没有给它任何替换的事实。

您需要将 blob 键从`get`处理程序传递给模板，然后使用`<source src="/Serve/{{ blob_key }}"/>`.

# php - spl_autoload 可以放在另一个文件中吗？

> ID：11869015
> 
> 赞同：1
> 
> 时间：2012-08-08T16:30:46.083
> 
> 标签：php

我目前正在使用 PHP 制作我的第一个网站。我希望创建一个具有一般自动加载能力的文件，而不是为每个单独的页面编写自动加载。

这是我的`autoloadControl.php`：

```
// nullify any existing autoloads
spl_autoload_register(null,false);

//specify extensions that may be loaded
spl_autoload_extensions('.php. .class.php');

function regularLoader($className){
    $file = $className.'.php';
    include $file;
}

//register the loader function
spl_autoload_register('regularLoader'); 
```

这是我的`index.php`文件：

```
require("header.php");
require("autoloadControl.php");

$dbConnection = new dbControl();
$row=$dbConnection->getLatestEntry(); 
```

目前，这`$dbConnection = new dbControl()`给了我以下错误：

> 致命错误：类 'dbControl'

所以我的问题是，有没有办法以这种方式使用自动加载，或者我必须将它放在我编写的每个使用另一个文件的 PHP 文件的顶部？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T17:05:09.677

您的问题与您在哪里定义回调无关，而是与如何定义回调有关。

Using`spl_autoload_extensions('.php')`将实现与您的自定义回调相同的功能；如果您的回调如此简单，则不需要两者。您的评论也是错误的 -`spl_autoload_register`不带参数调用不会清除当前回调，但它会注册默认回调。

但是，在您的代码中，您`spl_autoload_extensions`错误地指定了参数 - 它应该是一个逗号分隔的扩展列表。所以我认为你想要的是这样的：

```
// Tell default autoloader to look for class_name.php and class_name.class.php
spl_autoload_extensions('.php,.class.php')
// Register default autoloader
spl_autoload_register();
// READY! 
```

这与您的代码的主要区别是默认自动加载器将查找“dbcontrol.php”（全部小写），而您的将查找“dbControl.php”（如 PHP 代码中所述）。无论哪种方式，你当然不需要两者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T16:37:58.150

放置`spl_autoload`在外部文件中既有效又是一种使代码更易于维护的良好做法——在一个地方更改可能是 10、20 或更多。

`dbControl`您提供的代码中似乎没有提供您的课程。假设您在引用它之前包含了该类，并且该类正常工作，那么您完成此任务应该没有问题。

```
require("header.php"); 
require("autoloadControl.php");  
$dbConnection = new dbControl(); // Where is this class located? 
```

这是您的`autoloadControl.php`文件的 OOP 方法：

```
<?php

class Loader
{    
    public static function registerAutoload()
    {
        return spl_autoload_register(array(__CLASS__, 'includeClass'));
    }

    public static function unregisterAutoload()
    {
        return spl_autoload_unregister(array(__CLASS__, 'includeClass'));
    }

    public static function registerExtensions()
    {
        return spl_autoload_extensions('.php. .class.php'); 
    }

    public static function includeClass($class)
    {
        require(PATH . '/' . strtr($class, '_\\', '//') . '.php');
    }
}

?> 
```

# facebook - Facebook.getAuthResponse() 似乎坏了

> ID：11869019
> 
> 赞同：2
> 
> 时间：2012-08-08T16:31:07.613
> 
> 标签：facebook, actionscript-3, facebook-javascript-sdk, facebook-actionscript-api

从清晨（gmt+1）开始，facebook-actionscript-sdk 的 Facebook.getAuthResponse() 命令似乎被破坏了。它既不返回 access_token 也不返回 uid，而是返回“null”。

这对于我们的 facebook 应用程序来说非常重要，因为我们一直非常普遍地使用此功能。

一个问题是我们的应用程序的 init() 函数，但这当然只是使用该命令的一个地方：

```
function handleInit(success:Object, fail:Object):void
{
    if (success && success != null)
    {

        if (Facebook.getAuthResponse().accessToken)
        {

            //
        }
        else
        {
            ExternalInterface.call("redirect", appID,"publish_actions","...");
        }
    }
    else
    {
        ExternalInterface.call("redirect", appID,"publish_actions","...");
    }
} 
```

有没有其他人遇到过同样的问题或知道解决方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T17:06:06.917

这可能是由这个 FB 平台错误报告引起的： [https ://developers.facebook.com/bugs/405378606190941](https://developers.facebook.com/bugs/405378606190941)

修复将在今天晚些时候推送。在那之前，该错误报告中有一个解决方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T16:59:37.090

是的，这真的是不能接受的。来自 as3 sdk 的完全相同的问题完全破坏了我们的应用程序。您可以从登录回调中获取 uid，由于某种原因，它仍然提供有效的身份验证响应

# javascript - 可在网络浏览器和智能手机上运行的网站的 MP3 播放器

> ID：11869021
> 
> 赞同：4
> 
> 时间：2012-08-08T16:31:09.013
> 
> 标签：javascript, jquery, html, mp3

我有一个用于网站的 Flash MP3 播放器，该播放器可以在 Web 浏览器和 Android 上运行，但不能在 iPhone 或 Windows Phone 上运行。我知道这是因为 iPhone 不支持 Flash，我想这也是它在 Windows Phone 上不起作用的原因。

我不能只是一个 HTML 5 MP3 播放器，因为它不能在旧版浏览器上运行（并且可能在 Android 上也不能运行？）。那么我是否需要使用两个单独的播放器并根据用户的浏览器决定使用哪个播放器，或者是否有更好的解决方案，例如为我处理所有这些的插件？

基本上，是否有任何 MP3 播放器解决方案可以同时处理网络浏览器（IE 版本 7+）和智能手机？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T16:33:28.700

[http://mediaelementjs.com/](http://mediaelementjs.com/)怎么样

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T16:39:39.077

如果您尝试播放单个文件，您还可以放入将使用本机播放器的 iphone 链接（在您的 mp3 播放器下方类似于“iphone 用户单击此处”的内容）。它又快又脏，但它可以完成工作。这里有更多信息：http: [//www.booutell.com/newfaq/creating/iphoneaudio.html](http://www.boutell.com/newfaq/creating/iphoneaudio.html)

话虽如此，如果您可以实现它，我确实非常喜欢 user1285360 的答案。

# delphi - TWebBrowser - 尝试修复“无效的浮点运算”错误

> ID：11869023
> 
> 赞同：1
> 
> 时间：2012-08-08T16:31:16.193
> 
> 标签：delphi, ole, messages, twebbrowser

该`TWebBrowser`组件有一个错误，如此处所述[[IE9] 'Floating point 除以零' 发生在 WebBrowser](http://qc.embarcadero.com/wc/qcmain.aspx?d=102469)中。解决方案是调用一个过程，该过程将禁用所有除零异常。我正在尝试解决此问题，而无需调用此过程。

到目前为止，我最好的想法是禁用`TWebBrowser`滚动条并尝试使用`TScrollBar`. 到目前为止，它正在工作，但这就是问题所在：

如何同步`TWebBrowser`with中的导航`TScrollBar`？我需要拦截滚动消息`TWebBrowser`并将它们发送到`TScrollBar`，以使栏与正在显示的文档保持同步。有谁知道该怎么做？

更清楚地说：我需要一种方法来告诉`TScrollBar`它相对于光标在`TWebBrowser`.

我正在使用德尔福 2010。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T17:21:54.363

我认为不值得尝试。IE 中的滚动将在其滚动条可见或不可见的情况下发生......使用您的 TScrollbar 显然会滚动浏览器，这反过来又会产生相同的确切错误。我不知道 IE 的内部结构，不知道这个浮点错误究竟出现在哪里......

你到底是滚动条，还是只是外面的滚动条？滚动的内部内容（例如嵌入式框架）呢？文档上的其他内部滚动条是否会产生相同的错误？如果他们这样做了，那么你将在相当长的一段时间内追逐你的尾巴，试图在它的所有可滚动内容上超越 IE。

该修复程序已提供并经过测试。抱歉，但我会使用建议的修复程序。

# php - 长轮询期间对服务器的查询

> ID：11869025
> 
> 赞同：0
> 
> 时间：2012-08-08T16:31:21.677
> 
> 标签：php, nginx, apache2

我进行长轮询查询，比如说，`http://polling.site.com/polling`。同时我需要对服务器进行其他几个查询，比如`http://site.com/polling/?d=cr`. 但是它们是排队的，并且只有在长轮询连接完成时才会被细化。图片相关 ![在此处输入图像描述](../Images/4057de549ebf0a11116a26908b1bf707.png)

我使用 nginx/apache2、php5。

如何在长轮询期间进行多个查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T16:44:20.063

原因是无法在两个连接中使用 php session。所以我`session_write_close`在长轮询循环中使用，此时第二个查询完成。

# javascript - 问题加载 JS 函数 onload

> ID：11869027
> 
> 赞同：1
> 
> 时间：2012-08-08T16:31:33.427
> 
> 标签：javascript, function, onload

我正在尝试设置它，以便边框根据用户当前所在的页面更改我网站上不同元素的颜色。我正在使用PHP来确定页面，然后`$color`根据PHP确定设置变量（在JS函数内）

由于某种原因，这根本行不通。我什至尝试将该功能放在 onmouseover 中以查看它是否可以工作，但它不会。

我在这个 JS 函数中的某个地方一定有错误。我还有其他的，我已经放在一起了，它们工作得很好。我对 JS 很陌生，所以我可能还没有发现明显的错误。

这是我要加载的 JS 函数。

```
function colorchange($color) {
    var $header = document.getElementsByClassName('header');
    $header.style.borderColor = $color;

    var $contentblock = document.getElementsByClassName('contentblock');
    $contentblock.style.borderColor = $color;

    var $rightfloat = document.getElementsByClassName('rightfloat');
    $rightfloat.style.borderColor = $color;

    var $footer = document.getElementsByClassName('footer');
    $footer.style.borderColor = $color;

    var $mainimg = document.getElementsByClassName('mainimg');
    $mainimg.style.borderColor = $color;

    var $menucontainer = document.getElementsByClassName('menucontainer');
    $menucontainer.style.borderColor = $color;
} 
```

我在这里称呼它：

```
<body onload="<?php echo $changecolor; ?>"> 
```

这是确定颜色的 PHP 片段。

```
if (isset($pageid)) {
    if ($pageid == "ministries") {
        $changecolor = "colorchange('#a52926');";
    }
    if ($pageid == "events") {
        $changecolor = "colorchange('#a54a4c');";
    }
    if ($pageid == "prayer") {
        $changecolor = "colorchange('#459979');";
    }
    if ($pageid == "about") {
        $changecolor = "colorchange('#a55029');";
    }
    if ($pageid == "contact") {
        $changecolor = "colorchange('#469e47');";
    }
} else {
    $changecolor = "colorchange('#26996d');";
} 
```

感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T16:37:40.477

`document.getElementsByClassName`返回多个元素，而不仅仅是一个。因此，您无法`.style`对其进行操作。您需要遍历返回的元素并设置`.style`每个元素。

```
var $header = document.getElementsByClassName('header');
for(var i = 0, len = $header.length; i < len; i++){
    $header[i].style.borderColor = $color;
} 
```

**编辑：**我建议给你想要改变同一类颜色的所有元素（例如：）`changeColor`。这样你就不需要所有这些不同的`getElementsByClassName`陈述。

```
function colorchange(color) {
    var colorChange = document.getElementsByClassName('colorChange');
        for(var i = 0, len = colorChange.length; i < len; i++){
            colorChange[i].style.borderColor = color;
        }
} 
```

# java - 关于双重检查单例

> ID：11869028
> 
> 赞同：2
> 
> 时间：2012-08-08T16:31:34.647
> 
> 标签：java, design-patterns

请详细解释一下双重检查单例..！它有什么优点和缺点..!! 我在下面有这个..我怎么能把它作为一个双重检查单例..

```
 private DataBaseDAO() { }
        public static synchronized DataBaseDAO getInstance() {
            if (dao == null) {
                dao = new DataBaseDAO();
                }
            return dao;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T16:37:15.157

考虑下面的代码

```
public static Singleton getInstance()
{
  if (instance == null)
  {
    synchronized(Singleton.class) {  //1
      if (instance == null)          //2
        instance = new Singleton();  //3
    }
  }
  return instance;
} 
```

双重检查锁定背后的理论是 //2 处的第二次检查使得不可能像清单中那样创建两个不同的 Singleton 对象

考虑以下事件序列：

线程 1 进入 getInstance() 方法。

线程 1 在 //1 处进入同步块，因为实例为空。

线程 1 被线程 2 抢占。

线程 2 进入 getInstance() 方法。

线程 2 尝试在 //1 处获取锁，因为实例仍然为空。但是，因为线程 1 持有锁，所以线程 2 在 //1 处阻塞。

线程 2 被线程 1 抢占。

线程 1 执行并且因为实例在 //2 处仍然为空，所以创建了一个单例对象并将其引用分配给实例。

线程 1 退出同步块并从 getInstance() 方法返回实例。

线程 1 被线程 2 抢占。

线程 2 在 //1 处获取锁并检查实例是否为空。

因为 instance 不为空，所以不会创建第二个 Singleton 对象，而是返回由线程 1 创建的对象。

双重检查锁定背后的理论是完美的。不幸的是，现实完全不同。双重检查锁定的问题在于不能保证它可以在单处理器或多处理器机器上工作。双重检查锁定失败的问题不是由于 JVM 中的实现错误，而是由于当前的 Java 平台内存模型。内存模型允许所谓的“乱序写入”，这也是这个习惯用法失败的主要原因。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T16:42:10.017

如["Effective Java Second Edition"](https://rads.stackoverflow.com/amzn/click/com/0321356683)中所述，一个好的解决方案是使用 "Singleton-as-enum" 模式：

```
public enum DataBaseDAO() {
    INSTANCE;
} 
```

并通过`DataBaseDAO.INSTANCE`. 这保证在所有情况下，都会有一个且只有一个`DataBaseDAO`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T16:39:45.710

在您的代码实现中，您正在执行静态方法级同步。如果 DatabaseDAO 类中还有其他静态方法，那么即使这些方法可以使用这些方法独立工作，它们也不能。您可以通过执行块级同步来避免这种情况。在多线程应用程序中，这是实现单例对象的最安全方法之一 -

```
private DataBaseDAO {
    private static final Object lock = new Object();
    private static DataBaseDAO dao = null;
    private DataBaseDAO() { }
    public static DataBaseDAO getInstance() {
        if (dao == null) {
            synchronize(lock) {
               if (dao == null) {
                   dao = new DataBaseDAO();
                }
            }
        }
        return dao;

    }
} 
```

作为对象锁，您也可以使用`DataBaseDAO.class`.

**解释：**多个线程同时访问该`getInstance()`方法。在交错场景中，2 个或更多线程可以通过第一次`if`检查，但只有一个线程会获取`lock`对象上的锁。获得锁的线程将能够创建实例。如果第一个线程已经获得锁（并且第一个线程尚未释放它） ，其他线程即使通过了第一次`if`检查也将无法获得锁。

现在，假设第一个线程释放了锁，这意味着它也实例化了 dao 对象。当其他线程被调度时，每个线程都会获取锁，但是第二次`if`检查失败，会立即释放锁，获取已经实例化的dao对象。

一旦创建了对象，之后所有尝试访问该`getInstance()`方法的线程都不会进行任何同步，因为第一个线程`if`本身将失败。

# java - SOAP - 返回多个参数？

> ID：11869030
> 
> 赞同：0
> 
> 时间：2012-08-08T16:31:40.410
> 
> 标签：java, web-services, jakarta-ee, soap

使用soap wsdl，是否可以返回多个参数？还是我总是必须只返回一个参数，例如字符串、整数、布尔值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T16:37:15.407

我假设你正在编写一个 jax-rpc 风格的 web 服务。您始终可以向客户端发送一个对象，该对象对您需要的所有数据进行分组。

这是可能对您有所帮助的[示例。](http://java.sun.com/developer/technicalArticles/WebServices/getstartjaxrpc/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T16:39:59.263

Soap 是在客户端和服务器之间以 xml 格式交换数据的协议。在 xml 中，您可以发送任意数量的参数。如果您想查找示例肥皂 wsdls，请访问 www.xmethods.net。杰夫莫汉

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T16:50:28.797

可以返回 Objects 。不必总是返回原始类型，例如 String、int、boolean。你总是可以返回一个自定义类 XYZ ， List

# iphone - 无法在 didFinishLaunchingWithOptions 中制作动画

> ID：11869032
> 
> 赞同：0
> 
> 时间：2012-08-08T16:31:52.187
> 
> 标签：iphone, objective-c, ios, xcode, uiimageview

我有这个代码`didFinishLaunchingWithOptions`：

```
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

UIViewController *myViewController = [[UINavigationController alloc] initWithRootViewController:[[ViewController alloc] init]];

self.window.rootViewController = myViewController;

[self.window makeKeyAndVisible]; 
```

我想让 UIImageView 出现、播放动画并在那之后消失。我将此代码添加到我现有的代码中，但没有发生任何事情：

```
UIImageView *imgView = [[UIImageView alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    NSArray *animationFrames = [[NSArray alloc]initWithObjects:blablahblah, nil];

    imgView.animationImages = animationFrames;
    imgView.animationDuration = 1.5;
    imgView.animationRepeatCount = 1; 
```

我在这里做错了什么？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T17:43:33.163

将您的代码放入您的 ViewDidLoad。

.m

animation.animationImages = [NSArray arrayWithObjects:

[UIImageimageNamed:@"chicken1.tiff"],

[UIImageimageNamed:@"chicken2.tiff"],

[UIImageimageNamed:@"chicken3.tiff"],nil];

[动画集动画重复计数：0]；

动画.animationDuration = 1;

[动画开始动画];

。H

IBOutlet UIImageView *动画；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T16:36:59.360

在视图控制器中：

```
//use the view controller's frame
UIImageView *imgView = [[UIImageView alloc] initWithFrame:self.view.frame]];

NSArray *animationFrames = [[NSArray alloc]initWithObjects:blablahblah, nil];

imgView.animationImages = animationFrames;
imgView.animationDuration = 1.5;
imgView.animationRepeatCount = 1;

[self.view addSubview:imgView]; //Add the image view to the current view 
```

去除：

```
[imgView removeFromSuperview]; //call when animation is done 
```

# security - 如何通过 HTTPS 保护数据免受 MITM 攻击？

> ID：11869036
> 
> 赞同：6
> 
> 时间：2012-08-08T16:32:01.950
> 
> 标签：security, api, ssl, https

我正在研究企业 API，它可用于企业服务，MITM 可能会产生可怕的后果。

我们决定使用 HTTPs 而不是 HTTP，但在谷歌搜索之后，我了解到仅 SSL 是不够的。

据我了解，使用 SSL 时有两个主要漏洞：1）现在有很多 CA 提供商公司，所以没有人受到 MITM 攻击的保护，破解者使用普通证书（我找到了一些文章，据说 VeriSign有秘密部门，为 MITM 提供秘密服务，当时 VeriSign 是全球唯一的 CA）2）大多数 MITM 攻击在使用 ARP 缓存中毒时是可能的

所以，我暂时只能看到一个解决方案，但不确定这是否是最佳实践：由于 API 是内部的，我可以使用以下内容：1）使用对称加密算法加密数据 2）限制 ips，即能够使用API（如在应用程序中，如在服务器防火墙中）

这够了吗？也许还有其他最佳实践来建立真正安全的连接，这将使 MITM 成为不可能？

如果此解决方案（SSL + 对称加密算法）可以，您能否为此类问题建议最合适的加密算法？

在此先感谢，将很高兴获得任何帮助/建议。

UPD：VPN（由 frenchie 建议）不适合这种情况

UPD2：公钥-私钥（类似 RSA）是可能的（谢谢 2 Craigy），但在服务器端非常昂贵。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T19:41:37.133

> 我们决定使用 HTTPs 而不是 HTTP，但在谷歌搜索之后，我了解到仅 SSL 是不够的。

我不确定你用谷歌搜索了什么，但如果使用正确，SSL/TLS 可以保护你免受 MITM 攻击。

> 如果此解决方案（SSL + 对称加密算法）可以，您能否为此类问题建议最合适的加密算法？

SSL/TLS 中的加密已经使用对称加密技术完成。只有身份验证是通过非对称加密完成的。

> 据我了解，使用 SSL 时有两个主要漏洞：
> 
> 1.  现在有很多 CA 提供商公司，所以没有人受到 MITM 攻击的保护，普通证书被黑客使用（我发现了一些文章，据说 VeriSign 有秘密部门，它为 MITM 提供秘密服务，而 VeriSign 是全球唯一的 CA）2）大多数 MITM 攻击在使用 ARP 缓存中毒时都是可能的

防止 MITM 攻击正是证书的目的。客户端 (a) 检查是否在预期时使用了 HTTPS，以及 (b) 检查服务器证书的有效性，这完全是客户端的责任。

第一点可能很明显，但这是像*sslstrip*这样的工具所做的那种攻击：它们是 MITM 降级攻击，完全阻止用户访问 HTTPS 页面。作为用户，请确保您在应该是 HTTPS 的 HTTPS 页面上。在企业环境中，告诉您的用户他们必须检查他们是否通过 HTTPS 访问您的服务器：只有他们可以知道（除非您也想使用客户端证书身份验证）。

第二点（证书验证）也取决于客户端，尽管其中大部分是在浏览器中自动完成的。用户有责任不忽略浏览器警告。证书验证的其余部分往往通过预先安装的 CA 证书（例如 Verisign 的）来完成。

如果发生 MITM 攻击（可能是通过 ARP 中毒），用户应该得到一个不正确的证书并且不应该继续。正确的 HTTPS 验证应该允许您拥有安全连接或根本没有连接。

您提到的漏洞与证书验证（PKI 模型）有关。实际上，验证服务器证书是否正确取决于您的浏览器信任的 CA 证书。在那里，任何受信任的 CA 原则上都可以为任何服务器颁发证书，因此该模型是列表中最弱的 CA。如果一个受信任的 CA 为一个站点颁发一个假证书并将其提供给另一方，这就像让一个护照办公室颁发一个真正的“假”护照一样好。反击非常棘手，但有一些方法可以解决它。

*   您可以依赖诸如[*Perspective Projects*](http://perspectives-project.org/)之类的扩展，它们监视证书更改，即使两者都是受信任的。此类警告应提示用户调查证书更改是否合法（由您的公司完成）。

*   更根本的是，您可以部署自己的 CA，从用户浏览器中删除所有受信任的 CA 证书并仅安装您自己的 CA 证书。在这种情况下，用户将只能安全地连接到具有您的 CA 颁发的证书的计算机。这可能是一个问题（如果您的浏览器使用操作系统证书存储库，则包括软件更新）。

*   原则上，您可以完全避免使用证书并使用[预共享密钥](https://www.rfc-editor.org/rfc/rfc4279)密码套件。但是，并非所有 SSL/TLS 堆栈都支持这一点，并且不一定适用于基于 TLS 的 HTTP（据我所知，缺少有关主机名验证的规范）。

您可能还对 Security.SE 上的这些问题感兴趣：

*   [*如何推出我自己的安全机制 - 避免 SSL*](https://security.stackexchange.com/q/9500/2435)
*   [*SSL 证书旨在证明什么，它是如何做到的？*](https://security.stackexchange.com/a/16106/2435)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-08T17:08:02.560

如果您想防御[中间人攻击](http://en.wikipedia.org/wiki/Man-in-the-middle_attack)，那么使用对称密钥加密可以防止数据被第三方泄露是正确的。但是，您将面临分配密钥的问题，这也是非对称密钥密码学吸引人的原因之一。

要在网络上使用非对称密钥加密时防御 MITM 攻击，您可以设置自己[的公钥基础设施](http://en.wikipedia.org/wiki/Public_key_infrastructure)。您将设置和管理[证书颁发机构](http://en.wikipedia.org/wiki/Certificate_authority)并**禁用所有其他**证书颁发机构，这样没有人可以伪装成其他人，从而防止 MITM 攻击。如果 CA 被破坏，那么 MITM 攻击将再次成为可能。

只是为了确保我们在同一页面上，这些建议是独立于实现的。您可以将任何[对称密钥算法](http://en.wikipedia.org/wiki/Symmetric-key_algorithm)用于第一个建议。

对于第二个建议，您需要一个更复杂的系统，称为非对称或[公钥密码学](http://en.wikipedia.org/wiki/Public-key_cryptography)。这些是建立在像[RSA](http://en.wikipedia.org/wiki/RSA_%28algorithm%29)这样的算法之上的。

[SSL](http://en.wikipedia.org/wiki/Transport_Layer_Security)是一种使用公钥密码术进行密钥交换和使用对称密码术发送消息的协议。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-30T23:44:46.480

正确防御中间攻击的人需要两件事：

*   永远不要通过 HTTP 为您的网站提供服务；只监听 HTTPS 流量
*   在存活时间较长的响应中使用 Strict-Transport-Security 标头

带有 SSLStrip 攻击的 ARP 中毒依赖于浏览器启动与服务器的 HTTP 连接并稍后转换为 HTTPS。正是在这个过渡点，攻击才生效。

但是，如果浏览器将请求作为 HTTPS 请求发起，则握手会在其他任何事情发生之前向浏览器验证服务器。基本上，如果发生中间人攻击，用户将被通知 SSL 连接无法建立，或者服务器不是正确的服务器。

永远不要通过 HTTP 为您的网站提供服务，这会迫使任何链接到它的人在链接中使用 HTTPS。Strict-Transport-Security 标头指示兼容的浏览器将任何通过 HTTP 与您的服务器通信的尝试转换为 HTTPS。

对于您的用例，似乎除了上述两个建议之外的任何其他解决方案都将是矫枉过正。要阅读有关 Strict-Transport-Security 的更多信息，请参阅有关 Strict-Transport-Security[的 Wikipedia 文章](https://en.wikipedia.org/wiki/HTTP_Strict_Transport_Security)。

# ruby - 如何使用 Ruby 的 sqlite3 gem 将 CSV 文件导入 SQLite 数据库

> ID：11869039
> 
> 赞同：4
> 
> 时间：2012-08-08T16:32:15.970
> 
> 标签：ruby, sqlite, csv, sqlite3-ruby

这是我的 .CSV 文件的示例：

```
column1,column2
data,moreData
foo,bar
cats,dogs 
```

使用 Ruby 和 sqlite3 gem，有没有办法制作一个 SQLite 数据库并将 .CSV 数据导入其中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T18:01:19.413

用 csv 库解析 CSV，然后像往常一样插入它。

```
require "sqlite3"
require 'csv'

db = SQLite3::Database.new ":memory:"

# Create a database
rows = db.execute <<-SQL
  create table users (
    name varchar(30),
    age int
  );
SQL

csv = <<CSV
name,age
ben,12
sally,39
CSV

CSV.parse(csv, headers: true) do |row|
  db.execute "insert into users values ( ?, ? )", row.fields # equivalent to: [row['name'], row['age']]
end

db.execute( "select * from users" ) # => [["ben", 12], ["sally", 39]] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-08T16:43:36.283

我不相信通过 CSV 导入/导出数据是通过`sqlite3`gem 本身完成的。您可以通过 CSV 库将数据输入/输出 Ruby 对象，然后只需通过`ActiveRecord`或您正在使用的任何 ORM 将数据读取/写入数据库即可。

[FasterCSV](http://fastercsv.rubyforge.org/)应该在 Ruby 中为您完成。如果你碰巧也在使用 Rails 3.2，我相信 FasterCSV 是 Rails`CSV`库的默认实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-03T14:02:00.893

您可以从 ruby​​ 调用 sqlite3 二进制文件：

```
%x(
sqlite3 "#{pathToDatabase}" << EOF
.mode csv
.separator ',' "\\\\n"
.import "#{pathToCsvFile}" "#{csvTableName}"
EOF
) 
```

# windows-7 - Httpwebrequest 不包含 Windows 手机应用程序上的 PreAuthenticate 和媒体类型

> ID：11869042
> 
> 赞同：0
> 
> 时间：2012-08-08T16:32:37.253
> 
> 标签：windows-7

我正在创建一个 winodws 手机，并从我的 web 应用程序中复制了一些代码，但是 HttpWebRequest 类在 web 和 windows phone 上是不同的。windows phone 的 VS2010 express 上的 HttpWebRequest 上没有 Preauthenticate 和 Media Type。我想我可以将 Mediatype 更改为 contentType。这样对吗。如何更改 PreAuthenticate？提前致谢。

有我的代码：

```
 HttpWebRequest request = (HttpWebRequest)WebRequest.Create(serviceUri);
 //request.MediaType = "application/xml";
 request.ContentType = "application/xml";
 request.PreAuthenticate = true; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T15:58:00.360

我可以忽略 request.PreAuthenticate 并保留 request.ContentType = "application/xml" 然后它可以工作

# jquery - 使用 IE8 的列标题上的 JQuery 淡入淡出问题

> ID：11869043
> 
> 赞同：1
> 
> 时间：2012-08-08T16:32:39.123
> 
> 标签：jquery, internet-explorer-8

在 IE8 中，当我 .fadeIn() 列（在 .hide() 或 .fadeOut() 之后）时，列标题会失去其边框。看起来好像标题单元格的背景颜色位于边框的顶部。

演示：http: [//jsfiddle.net/CM9hD/4/](http://jsfiddle.net/CM9hD/4/)

在 IE8 中...单击“淡出”。第 3 列将淡出。单击“淡入”。第 3 列将淡入，但缺少标题边框。

Chrome 和 Firefox 没有这个问题。

# sql-server - 通过 unixODBC 和 FreeTDS 从 MSSQL 返回西里尔符号的问题

> ID：11869044
> 
> 赞同：4
> 
> 时间：2012-08-08T16:32:41.827
> 
> 标签：sql-server, django, odbc, pyodbc, freetds

我在远程主机上的 Ubuntu 12.04 LTS 和 MSSQL 2008 上使用 django-pyodbc 作为数据库后端。除了返回西里尔符号外，它工作得很好。而不是他们，我看到问号 - '？'。我已经开始调查可能导致此问题的原因。

据我了解，MSSQL-django 链看起来是这样的：

> MSSQL <-> FreeTDS <-> unixODBC <-> pyodbc <-> django-pyodbc

所以我从 FreeTDS 开始。当我在 tsql 中运行查询时——效果很好，我可以看到包括西里尔文在内的所有符号。

下一个是 isql - 据我了解，我可以测试 FreeTDS <-> unixODBC 对。在那里我没有得到正确的数据。事实上，当我在包含西里尔符号的 isql 列中运行查询时，它们是空的或包含不可见的符号。我猜是 FreeTDS <-> unixODBC 之间的通信问题。什么可能导致这个问题？顺便说一句，我也尝试过 iusql - 没有任何改变。

MSSQL 排序规则是 Cyrillic_General_CI_AS。

**freetds.conf 的内容：**

```
[global]
tds version = 4.2
dump file = /tmp/freetds.log
debug flags = 0xffff
timeout = 10
connect timeout = 10
client charset = UTF-8
text size = 64512

[egServer50]
host = symachine.domain.com
port = 5000
tds version = 5.0

[egServer70]
host = ntmachine.domain.com
port = 1433
tds version = 7.0

[rfxdigest]
host = mssql-iis-1
port = 1433
tds version = 8.0
client charset = UTF-8 
```

**odbc.ini 的内容：**

```
[RFX]
Description = Rfx digest server
Driver = FreeTDS
Database = RFXDB
Servername = rfxdigest
TDS_Version = 8.0 
```

**编辑1 15.08.12**

在 python 中使用 pyodbc 我得到'？而不是西里尔符号 - 我尝试了两个 python 版本：UCS2 和 UCS4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T08:12:14.847

你得到一个？为不可打印的字符返回

运行以下命令以查看您的 Python 设置支持哪些 unicode：-

```
python -c "import sys;print(sys.maxunicode<66000)and'UCS2'or'UCS4'" 
```

接下来需要将 FreeTDS 设置为使用与 Python 相同的字符集。如果 FreeTDS 不支持您在 Python 中使用的 unicode 格式，您将需要同时更改 Python 和 FreeTDS。

要在启用 UCS2 的情况下从源代码重建 Python，您需要执行以下操作：-

```
$ ./configure --enable-unicode=ucs2
$ make
$ sudo make install 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-22T10:58:29.717

一周以来，我一直在与西里尔字母的问题作斗争。我找到了不同的解决方案，我只使用适用于 Linux 的微软 mssql 驱动程序，这里是如何在受支持的发行版（Suse、redhat）以外的其他发行版上安装它的好方法：[https ://groups.google.com/forum/#!topic/shiny-讨论/AyFthz3UGwg](https://groups.google.com/forum/#!topic/shiny-discuss/AyFthz3UGwg)

该驱动程序返回正常的 utf-8，并且一切正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T10:01:52.147

好的，我已经使所有这些模块链工作：

```
MSSQL <-> FreeTDS <-> unixODBC <-> pyodbc <-> django-pyodbc 
```

我刚刚在 django 设置的 DATABASES 选项中添加了 'unicode_results':True ：

```
DATABASES = {
'default': {
    'ENGINE': 'sql_server.pyodbc', # Add 'postgresql_psycopg2', 'postgresql', 'mysql', 'sqlite3' or 'oracle'.
    'NAME': 'name',                      # Or path to database file if using sqlite3.
    'USER': 'user',                      # Not used with sqlite3.
    'PASSWORD': 'pwd',                  # Not used with sqlite3.
    'HOST': 'server-name',                      # Set to empty string for localhost. Not used with sqlite3.
    'PORT': 'port',                      # Set to empty string for default. Not used with sqlite3.
    'OPTIONS': {
            'unicode_results':True,
            'driver': 'FreeTDS',
            'host_is_server': True,
            'extra_params': 'TDS_VERSION=8.0'
    } 
```

但是 pyodbc 和 isql 仍然无法正常工作 - 也许我错过了其他特定于 unicode 的参数。稍后将检查 odbc 和 pyodbc 如何使用此 unicode_results 参数。无论如何，网站现在可以显示西里尔符号。

# c++ - 如何将简单指针转换为固定大小的多维数组？

> ID：11869056
> 
> 赞同：29
> 
> 时间：2012-08-08T16:33:31.820
> 
> 标签：c++, c, casting, multidimensional-array, matrix

我有一个函数，它需要一个指向浮点数组的指针。基于其他条件，我知道指针实际上指向一个 2x2 OR 3x3 矩阵。（实际上内存最初是这样分配的，例如 float M[2][2] ）重要的是我想在函数体中做出这个决定，而不是作为函数参数。

```
void calcMatrix( int face, float * matrixReturnAsArray )
{
    // Here, I would much rather work in natural matrix notation
    if( is2x2 )
    {
        // ### cast matrixReturnAsArray to somethingAsMatrix[2][2]
        somethingAsMatrix[0][1] = 2.002;
        // etc..
    }
    else if(is3x3)
    { //etc...
    }

} 
```

我知道我可以使用模板和其他技术来更好地解决这个问题。我的问题实际上是关于如何在### 评论中制作这样的演员表。使用 C++ 工作。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-08-08T16:41:19.453

```
float (*somethingAsMatrix)[2] = (float (*)[2]) matrixReturnAsArray; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-08T17:04:12.587

`float *`可以指向浮点数组的第一个元素，并且应该 reinterpret_castable 到该数组类型。并且该转换的结果可能指向 a 的第一个元素，`float [][]`因此应该 reinterpret_castable 到该类型，依此类推。你应该能够组成这样的演员表，然后直接做

```
float (&arr)[2][2] = *reinterpret_cast<float (*)[2][2]>(matrixReturnAsArray); 
```

类型的参数`float **`不相同，不应以这种方式使用。

为避免未定义的行为，指针必须源自实际的多维数组，如果`float*`直接使用，则不能访问多维矩阵的第一行。

```
void foo(float *f) {
    f[3] = 10.;

    float (&arr)[2][2] = *reinterpret_cast<float (*)[2][2]>(f);
    arr[1][1] = 10.;
}

void main() {
    float a[2][2];
    foo(&a[0][0]); // f[3] = 10.; is undefined behavior, arr[1][1] = 10\. is well defined

    float b[4];
    foo(&b[0]); // f[3] = 10.; is well-defined behavior, arr[1][1] = 10\. is undefined
} 
```

据我所知，没有`float arr[2][2];`任何保证`&arr[0][1] + 1`与 相同。`&arr[1][0]`因此，尽管您可以将一维数组用作多维数组，但您不能将多维数组视为一`f[i*width + j]`维数组。

最好使用 C++ 的编译时类型安全，而不是仅仅依靠不意外地传递错误的东西或执行错误的 reinterpret_cast。要使用原始数组获得类型安全，您应该使用对所需原始数组类型的引用：

```
void foo(float (&f)[2][2]) {}
void foo(float (&f)[3][3]) {} 
```

如果要按值传递数组，则不能使用原始数组，而应使用 std::array 之类的东西：

```
void foo(std::array<std::array<float,2>,2> f) {}
void foo(std::array<std::array<float,3>,3> f) {} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T16:50:12.213

这种类型的转换总是更干净，更容易处理，明智地使用 typedef：

```
typedef float Matrix_t[2][2];

Matrix_t* someThingAsMatrix = (Matrix_t*) matrixReturnAsArray; 
```

但是，如果这是 C++ 而不是 C，则应该创建一个矩阵类。（或者更好的是，寻找一个开源的。）

# java - 当组件被限定为会话时，无法将 Spring 控制器限定为请求

> ID：11869057
> 
> 赞同：1
> 
> 时间：2012-08-08T16:33:33.460
> 
> 标签：java, spring, jsp, spring-mvc

我正在尝试按照此网站上的指南正确地为 Spring Web 应用程序确定我的 bean 范围：

[http://richardchesterwood.blogspot.com/2011/03/using-sessions-in-spring-mvc-include.html](http://richardchesterwood.blogspot.com/2011/03/using-sessions-in-spring-mvc-including.html)

我正在尝试遵循方法 3，这基本上意味着我想将我的组件类限定为会话，因此我必须根据请求限定我的控制器类。我将控制器放入我的 JSP 页面，以便可以使用它。

但是，当我尝试这样做时，我的 web 应用程序出现了构建问题，当我尝试访问网页时，它给了我一个 503 service_unavailable 错误。

构建错误是：

> 严重：上下文初始化失败 org.springframework.beans.factory.BeanCreationException：创建名为 'org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping#0' 的 bean 时出错：bean 初始化失败；嵌套异常是 java.lang.IllegalStateException：无法将处理程序“currentWeekController”映射到 URL 路径 [/TimeTracking]：已经映射了处理程序“scopedTarget.currentWeekController”。

这是相关的类和jsp页面。如果您还需要什么，请尽管问！

CurrentWeekController 控制器类：

```
package controllers;

import javax.servlet.http.HttpServletRequest;

import models.CurrentWeek;
import models.ModelMap;
import models.User;

import org.joda.time.MutableDateTime;
import org.joda.time.format.DateTimeFormat;
import org.joda.time.format.DateTimeFormatter;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.annotation.Scope;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.servlet.ModelAndView;

/**
 * this is the controller for current week, it lets you change the current week
 * and get values from the current week
 * 
 * @author CorayThan
 * 
 */
@Controller
@Scope("Request")
public class CurrentWeekController {

    private static final int MONDAY = 1;
    private static final int TUESDAY = 2;
    private static final int WEDNESDAY = 3;
    private static final int THURSDAY = 4;
    private static final int FRIDAY = 5;
    private static final int SATURDAY = 6;
    private static final int SUNDAY = 7;

    @Autowired
    private User user;

    @Autowired
    private CurrentWeek currentWeek;

    @Autowired
    private ModelMap hashmap;

    /**
     * @return the user
     */
    public User getUser() {
        return user;
    }

    /**
     * @param user
     *            the user to set
     */
    public void setUser(User user) {
        this.user = user;
    }

    /**
     * @return the currentWeek checks to make sure the week isn't null and its
     *         monday isn't null and fixes them if they are
     */
    public CurrentWeek getCurrentWeek() {
        if (currentWeek == null) {
            this.createNewCurrentWeek();
        }
        if (currentWeek.getMonday() == null) {
            this.createCurrentWeek(MutableDateTime.now());
        }
        return currentWeek;
    }

    /**
     * @param currentWeek
     *            the currentWeek to set
     */
    public void setCurrentWeek(CurrentWeek currentWeek) {
        this.currentWeek = currentWeek;
    }

    /**
     * @return the hashmap
     */
    public ModelMap getHashmap() {
        return hashmap;
    }

    /**
     * @param hashmap
     *            the hashmap to set
     */
    public void setHashmap(ModelMap hashmap) {
        this.hashmap = hashmap;
    }

    /**
     * no arg constructor
     */
    public CurrentWeekController() {

    }

    /**
     * this is a post method called when a button is clicked on the time
     * tracking jsp page. It reloads the page with a different week
     * 
     * @param pageWeek
     * @param request
     * @return
     */

    @RequestMapping(value = "TimeTracking")
    public ModelAndView changeTheWeek(HttpServletRequest request) {
        String whichWayWeek = request.getParameter("changeWeek");

        if ("Previous Week".equals(whichWayWeek)) {
            this.subtractOneWeek();
        }
        if ("Next Week".equals(whichWayWeek)) {
            this.addOneWeek();
        }

        return new ModelAndView("redirect:/jsp-pages/TimeTracking.jsp",
                hashmap.makeHashMap());
    }

    /**
     * This creates a current week object by setting that week's monday to the
     * proper monday for that week using whatever date you give it
     * 
     * 
     * @param calendar
     * @return
     */
    public CurrentWeek createCurrentWeek(MutableDateTime theCurrentDate) {

        int day = checkForNull(theCurrentDate);

        switch (day) {

        case SUNDAY:
            theCurrentDate.addDays(-6);
            currentWeek.setMonday(theCurrentDate);
            break;
        case SATURDAY:
            theCurrentDate.addDays(-5);
            currentWeek.setMonday(theCurrentDate);
            break;
        case FRIDAY:
            theCurrentDate.addDays(-4);
            currentWeek.setMonday(theCurrentDate);
            break;
        case THURSDAY:
            theCurrentDate.addDays(-3);
            currentWeek.setMonday(theCurrentDate);
            break;
        case WEDNESDAY:
            theCurrentDate.addDays(-2);
            currentWeek.setMonday(theCurrentDate);
            break;
        case TUESDAY:
            theCurrentDate.addDays(-1);
            currentWeek.setMonday(theCurrentDate);
            break;
        case MONDAY:

            currentWeek.setMonday(theCurrentDate);
            break;
        default:
            this.setCurrentWeek(null);
            break;

        }
        return this.getCurrentWeek();

    }

    /**
     * @param theCurrentDate
     * @return
     * makes sure the current date isn't null, and returns an int equal to 
     * the day of the week it is in joda time
     */
    private int checkForNull(MutableDateTime theCurrentDate) {
        int day = 0;
        if (theCurrentDate != null) {
            day = theCurrentDate.getDayOfWeek();
        }
        return day;
    }

    /**
     * makes a new current week set to the real current week
     * 
     * @return
     */

    public CurrentWeek createNewCurrentWeek() {
        MutableDateTime dateTime = MutableDateTime.now();
        CurrentWeek currentWeek = new CurrentWeek();
        this.setCurrentWeek(currentWeek);

        return createCurrentWeek(dateTime);
    }

    /**
     * subtracts one week from a currentweek
     * 
     * 
     * @return
     */
    public void subtractOneWeek() {

        MutableDateTime newMonday = (MutableDateTime) this.getCurrentWeek()
                .getMonday().clone();
        newMonday.addDays(-7);

        this.setCurrentWeek(createCurrentWeek(newMonday));

    }

    /**
     * adds one week to a currentweek
     * 
     * @param currentWeek
     * @return
     */
    public void addOneWeek() {

        MutableDateTime newMonday = (MutableDateTime) this.getCurrentWeek()
                .getMonday().clone();
        newMonday.addDays(7);

        this.setCurrentWeek(createCurrentWeek(newMonday));
    }

    /**
     * TODO: make this method into a method that accepts a current week and
     * checks if you can add a week to it without going entirely into the future
     * 
     * @param currentWeek
     * @return
     */
    public CurrentWeek checkIfCurrentWeekIsEntirelyInFuture() {
        return this.getCurrentWeek();

    }

    /**
     * returns the first day of the week as a formatted date time
     * 
     * @return
     */

    public String firstDayOfThisWeek() {

        MutableDateTime firstDay = this.getCurrentWeek().getSunday();

        DateTimeFormatter dateFormatter = DateTimeFormat
                .forPattern("MM/dd/yyyy");

        return dateFormatter.print(firstDay);
    }

    /**
     * returns the last day of this week as a formatted date time
     * 
     * @return
     */

    public String lastDayOfThisWeek() {

        MutableDateTime lastDay = this.getCurrentWeek().getSaturday();

        DateTimeFormatter dateFormatter = DateTimeFormat
                .forPattern("MM/dd/yyyy");

        return dateFormatter.print(lastDay);
    }

} 
```

这是 CurrentWeek 组件类。

```
package models;

import org.joda.time.MutableDateTime;
import org.springframework.stereotype.Component;

/**
 * this is a class that holds the current week for views
 * 
 * @author CorayThan
 * 
 */
@Component
// @Scope ("Session")
public class CurrentWeek {

    private MutableDateTime monday;

    /**
     * default constructor
     */
    public CurrentWeek() {

    }

    /**
     * @return a MutableDateTime which is of the correct date for this specific
     *         day
     */
    public MutableDateTime getSunday() {
        MutableDateTime sunday = (MutableDateTime) monday.clone();
        sunday.addDays(-1);
        return sunday;
    }

    /**
     * @return a MutableDateTime which is of the correct date for this specific
     *         day
     */
    public MutableDateTime getMonday() {
        return monday;
    }

    /**
     * @param saturdayTime
     *            pass a MutableDateTime to set this date of the CurrentWeek
     *            object to the correct date for that week
     */
    public void setMonday(MutableDateTime saturdayTime) {
        this.monday = saturdayTime;
    }

    /**
     * @return a MutableDateTime which is of the correct date for this specific
     *         day
     */
    public MutableDateTime getTuesday() {
        MutableDateTime tuesday = (MutableDateTime) monday.clone();
        tuesday.addDays(1);
        return tuesday;
    }

    /**
     * @return a MutableDateTime which is of the correct date for this specific
     *         day
     */
    public MutableDateTime getWednesday() {
        MutableDateTime wednesday = (MutableDateTime) monday.clone();
        wednesday.addDays(2);
        return wednesday;
    }

    /**
     * @return a MutableDateTime which is of the correct date for this specific
     *         day
     */
    public MutableDateTime getThursday() {
        MutableDateTime thursday = (MutableDateTime) monday.clone();
        thursday.addDays(3);
        return thursday;
    }

    /**
     * @return a MutableDateTime which is of the correct date for this specific
     *         day
     */
    public MutableDateTime getFriday() {
        MutableDateTime friday = (MutableDateTime) monday.clone();
        friday.addDays(4);
        return friday;
    }

    /**
     * @return a MutableDateTime which is of the correct date for this specific
     *         day
     */
    public MutableDateTime getSaturday() {
        MutableDateTime saturday = (MutableDateTime) monday.clone();
        saturday.addDays(5);
        return saturday;
    }

} 
```

最后是引用 CurrentWeekController 的 jsp 文件：

```
<%@page contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<%@page import="daos.*"%>
<%@page import="controllers.*"%>
<%@page import="models.*"%>

<jsp:useBean id="userDao" class="daos.UserDao" scope="request" />

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<jsp:useBean id="timeTrackingControl"
    class="controllers.TimeTrackingController" scope="request" />
<jsp:useBean id="currentWeek" class="controllers.CurrentWeekController"
    scope="request" />
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Time Tracking Page</title>
<script type="text/javascript" src= "../javascriptpages/timeTracking.js"></script>
<link rel="stylesheet" type="text/css" href="csspages/global.css" />

<style type="text/css"></style>
</head>

<body>

    <div>
        <h1>User Time Tracking Page</h1>

    </div>
    <div id="content">

    <form method="POST" action="../TimeTracking.html">
            <span> <input name="changeWeek" type="submit" value="Previous Week"/> Hours for the week of
                <%=currentWeek.firstDayOfThisWeek()%> until <%=currentWeek.lastDayOfThisWeek()%>
                <input name="changeWeek" type="submit" value="Next Week"/>
            </span>
    </form>

            <table border="1">
                <tr>
                    <th>Sunday</th>
                    <th>Monday</th>
                    <th>Tuesday</th>
                    <th>Wednesday</th>
                    <th>Thursday</th>
                    <th>Friday</th>
                    <th>Saturday</th>
                </tr>
                <tr>
                    <td><%=timeTrackingControl.totalWorkTimeForOneDate(currentWeek.getCurrentWeek().getSunday())%></td>
                    <td><%=timeTrackingControl.totalWorkTimeForOneDate(currentWeek.getCurrentWeek().getMonday())%></td>
                    <td><%=timeTrackingControl.totalWorkTimeForOneDate(currentWeek.getCurrentWeek().getTuesday())%></td>
                    <td><%=timeTrackingControl.totalWorkTimeForOneDate(currentWeek.getCurrentWeek().getWednesday())%></td>
                    <td><%=timeTrackingControl.totalWorkTimeForOneDate(currentWeek.getCurrentWeek().getThursday())%></td>
                    <td><%=timeTrackingControl.totalWorkTimeForOneDate(currentWeek.getCurrentWeek().getFriday())%></td>
                    <td><%=timeTrackingControl.totalWorkTimeForOneDate(currentWeek.getCurrentWeek().getSaturday())%></td>
                </tr>
            </table>

            <input type="button" value="<%=timeTrackingControl.displayClockButton()%>"
                onClick="clockInOrOutReloadPage()">

    </div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T17:00:02.313

控制器应该是 Spring MVC 中的应用程序范围（您不需要显式地确定它们的范围，因为这是默认设置）。

任何请求级别的数据都应该使用模型属性来完成：

```
@ModelAttribute("foo")
public Foo createFoo(@RequestParam("bar") int bar) {
   return new Foo(bar);
}

@RequestMapping(...)
public ModelAndView baz(HttpServletRequest req, HttpServletResponse response,
    @ModelAttribute("foo") Foo foo) {
   ...
} 
```

Spring 将自动创建“Foo”实例（通过您的“createFoo”）方法并将其放入请求范围内。然后，通过在映射方法中注释方法参数，它会自动从请求范围中提取该参数并将其传递给您的方法。

如果您希望将模型属性存储在会话范围内，请将此注释添加到控制器类：

```
@SessionAttributes({"foo"}) 
```

这意味着您的控制器本身不应该有任何状态，只能在模型属性中（无论是在请求范围内还是在会话范围内），并且应该将该状态注入您的映射方法调用中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T04:09:06.207

检查此链接 [https://jira.springsource.org/browse/SPR-5697](https://jira.springsource.org/browse/SPR-5697) 如果在中使用相同的 requestmapping 的属性值，则始终建议在控制器级别添加 requestmapping 属性和在方法级别添加 requestmapping 属性另一个控制器可能会显示此错误。为了避免在控制器级别添加 requestmapping 属性。

```
@Controller
@SessionAttributes("command"(
@RequestMapping(value="CurrentWeek")

@RequestMapping(value="TimeTracking.html" method="RequesstMethod.POST)
public ModelAndView processForm(....){
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-26T23:16:19.677

Controller 的默认范围是 Singleton。除非你有充分的理由改变它，否则不要这样做。单例与组件范围的会话工作正常

# google-maps - 多个地理编码器请求谷歌地图 api v3

> ID：11869059
> 
> 赞同：0
> 
> 时间：2012-08-08T16:33:40.000
> 
> 标签：google-maps, google-maps-api-3

嗨，我一直在使用 Google Maps API v3 和地理编码器来显示地图，到目前为止它运行良好。当我尝试在同一页面上显示另一张地图时，仅加载第一张地图。第二张地图只是显示了一个灰色区域。没有加载地图。我必须做多个地理编码器请求，但我该怎么做。到目前为止，这是我的代码：

```
 var geocoder;
var map;
var map2;
var marker;
var infobox;

function initialize() {
            //Geocoder
        geocoder = new google.maps.Geocoder();
        var address = 'Times Square, New York'; 
        geocoder.geocode( { 'address': address }, function(results, status) {
            if (status == google.maps.GeocoderStatus.OK) {
                map.setCenter(results[0].geometry.location);
            //Marker
            var companyLogo = new google.maps.MarkerImage('images/pin.png',
                new google.maps.Size(20,20),
                new google.maps.Point(0,0),
                new google.maps.Point(10,10)
                );
            //Marker shadow 
            var companyShadow = new google.maps.MarkerImage('images/pin_shadow.png',
                new google.maps.Size(25,33),
                new google.maps.Point(0,0),
                new google.maps.Point(0, 25)
                );
            //Display the marker
            var marker = new google.maps.Marker({
                map: map,
                icon: companyLogo,
                shadow: companyShadow,
                position: results[0].geometry.location,
                title:"Some title"
            });
            //Infobox
            infobox = new InfoBox({
                content: document.getElementById("infobox"),
                disableAutoPan: false,
                maxWidth: 320,
                pixelOffset: new google.maps.Size(-142, -150),
                zIndex: null,
                boxStyle: {
                    opacity: 1,
                    width: "300px"
                    },
                closeBoxMargin: "0px",
                closeBoxURL: "images/close_tooltip.png",
                infoBoxClearance: new google.maps.Size(1, 1)
                });
                        //Open infobox
            google.maps.event.addListener(marker, 'mouseover', function() {
                infobox.open(map, this);
                map.panTo(geocoder);
                });

            } else {
                alert("Geocode was not successful for the following reason: " + status);
                }
            });

                    //Map options
        var myOptions = {
            zoom: 15,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            disableDefaultUI: true,
            scrollwheel: false
        }
    //Call Maps 
    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
    map2 = new google.maps.Map(document.getElementById("map_canvas2"), myOptions);
}

google.maps.event.addDomListener(window, 'load', initialize); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T16:46:35.397

您用于设置第二张地图的`myOptions`对象不包含`center`属性，因此第二张地图无法居中。

调用地理编码器时，您设置第一张地图的中心：

```
map.setCenter(results[0].geometry.location); 
```

但你没有设置第二张地图。

如果不设置地图的中心，它将保持灰色和空白。

# mysql - 有没有办法同时从同一个表中更新和选择（返回多行）？

> ID：11869061
> 
> 赞同：0
> 
> 时间：2012-08-08T16:33:41.840
> 
> 标签：mysql, sql

我想做的是查询数据库并让它返回订单。这个整数被错误地插入为负数。所以我想取它的 abs() 并将其重新插入为正数。我不认为 MySQL 可以做到这一点，但这就是我编写查询的方式。我正在寻找替代方法。（如果这不可能，我将简单地使用 PHP）。谢谢你。

编辑：这应该更新不止一行。

```
UPDATE `users` SET `orders` = (SELECT abs(orders)
FROM `users` WHERE count1 = 5) WHERE count1 = 5; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T16:39:43.960

不幸的是，MySQL 有一个愚蠢的限制，即被更新的表可能不会出现在同一语句的子选择中。

但我不明白你为什么需要子选择：

```
UPDATE users 
    SET orders = abs(orders)
WHERE count1 = 5; 
```

应该做你想做的。

或者，如果您想将所有负值转换为正值：

```
UPDATE users 
    SET orders = abs(orders)
WHERE orders < 0; 
```

# asp.net - linq to 继承 list(Of T) 的实体框架自定义集合类

> ID：11869062
> 
> 赞同：1
> 
> 时间：2012-08-08T16:33:44.273
> 
> 标签：asp.net, vb.net, entity-framework

好的，我不太确定如何问这个问题，但基本上我想创建一个自定义集合类，它允许我在通用列表（Of T）上拥有属性，例如：

```
Public ReadOnly Property TotalCalories() As Decimal
        Get
            Dim decTotal As Decimal = 0D
            For Each thisFoodDiaryItem As FoodDiaryItem In Me
                Dim thisNutValue As NutritionalData = (From nd In thisFoodDiaryItem.Food.NutritionalDatas Where nd.NutritionalDefinitionID = 208).FirstOrDefault
                If thisFoodDiaryItem.Food.FoodWeights.Count > 0 Then
                    Dim decWeight As Decimal = thisFoodDiaryItem.Food.FoodWeights(0).WeightInGrams
                    If Not thisNutValue Is Nothing Then
                        Dim decCalories As Decimal = Math.Round((thisNutValue.Value * (decWeight / 100)) * thisFoodDiaryItem.Amount)
                        decTotal += decCalories
                    End If
                End If
            Next
            Return decTotal
        End Get
    End Property

    Public ReadOnly Property TotalSugars() As Decimal
        Get
            Dim decTotal As Decimal = 0D
            For Each thisFoodDiaryItem As FoodDiaryItem In Me

                Dim thisNutValue As NutritionalData = (From nd In thisFoodDiaryItem.Food.NutritionalDatas Where nd.NutritionalDefinitionID = 269).FirstOrDefault
                If thisFoodDiaryItem.Food.FoodWeights.Count > 0 Then
                    Dim decWeight As Decimal = thisFoodDiaryItem.Food.FoodWeights(0).WeightInGrams
                    If Not thisNutValue Is Nothing Then
                        Dim decCalories As Decimal = Math.Round((thisNutValue.Value * (decWeight / 100)) * thisFoodDiaryItem.Amount)
                        decTotal += decCalories
                    End If
                End If

            Next
            Return decTotal
        End Get
    End Property 
```

我希望在调用实体框架查询时使用这个类：

```
 Protected Sub BindFoodDiaryItems()
    CurrentFoodDiaryItems = New FoodDiaryItemCollection
    CurrentFoodDiaryItems = (From fdi In db.FoodDiaryItems Where fdi.PersonID = CurrentSiteUser.PersonID And fdi.EntryDate = CurrentDiaryDate).ToList

    If AllMeals Is Nothing Then
        AllMeals = (From m In db.Meals).ToList
    End If

    lvMealsA.DataSource = AllMeals
    lvMealsA.DataBind()

    lblTotalCalories.Text = CurrentFoodDiaryItems.TotalCalories.ToString
    lblTotalSugars.Text = CurrentFoodDiaryItems.TotalSugars.ToString
    lblTotalFats.Text = CurrentFoodDiaryItems.TotalFat.ToString
    lblTotalProtein.Text = CurrentFoodDiaryItems.TotalProtein.ToString
    lblTotalCarbs.Text = CurrentFoodDiaryItems.TotalCarbs.ToString

End Sub 
```

我假设它会是这样的：

```
 Partial Public Class FoodDiaryItemCollection
    Inherits List(Of FoodDiaryItem)

    Sub New()
    End Sub

    End Class 
```

我得到的错误：

**无法将“System.Collections.Generic.List`1[NutritionBridgeModel.FoodDiaryItem]”类型的对象转换为“NutritionBridgeModel.FoodDiaryItemCollection”类型。**

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T16:41:15.927

.Net 框架公开了许多很棒的扩展方法，例如 Sum、Average 等...

[http://msdn.microsoft.com/en-us/library/bb341635](http://msdn.microsoft.com/en-us/library/bb341635)

例子：

```
class Program
{
    static void Main(string[] args)
    {
        var sweetList = new List<int> { 4, 123, 5, 23, 42 };
        Console.WriteLine("Average: {0}", sweetList.Average());
        Console.WriteLine("Sum: {0}", sweetList.Sum());

        var listOfCoolObjects = new List<CoolObject>();
        listOfCoolObjects.Add(new CoolObject { Name = "1434", NeatValue = 42 });
        listOfCoolObjects.Add(new CoolObject { Name = "asdf", NeatValue = 5 });
        listOfCoolObjects.Add(new CoolObject { Name = "fgsdfg", NeatValue = 99 });
        listOfCoolObjects.Add(new CoolObject { Name = "qwerty", NeatValue = 1345 });
        listOfCoolObjects.Add(new CoolObject { Name = "casc", NeatValue = 111 });

        Console.WriteLine("Average: {0}", listOfCoolObjects.Average(x => x.NeatValue));
        Console.WriteLine("Sum: {0}", listOfCoolObjects.Sum(x => x.NeatValue));
    }
}

class CoolObject
{
    public string Name { get; set; }
    public int NeatValue { get; set; }
} 
```

在您的代码中，您可以执行以下操作：

```
var sum = (From fdi In db.FoodDiaryItems Where fdi.PersonID = CurrentSiteUser.PersonID And fdi.EntryDate = CurrentDiaryDate).Sum(fdi => fdi.SomeValueYouWantToSum) 
```

我知道你在用 VB 编码，但我根本不懂 VB，所以请原谅最后一个代码块中的任何语法错误。

# java - maven型材还是弹簧型材？

> ID：11869064
> 
> 赞同：36
> 
> 时间：2012-08-08T16:33:52.017
> 
> 标签：java, spring, maven, deployment

很多java应用程序都是用maven构建的。maven 有 Profiles 的概念，为不同的环境构建发布包真的很方便。例如`dev/test/prod`使用不同的`path / jndiname / security rule / properties files`......我想我不必在这里列出代码来解释它。

Spring 是一个非常好的和流行的 java 开发框架，从 spring3 开始它也支持配置文件概念。

现在问题来了，对于发布到不同的 ENV 目的，哪个更好？现在我更喜欢 Maven 配置文件。因为 spring 必须复制每个配置文件中的每个 bean 定义。它需要一个初始化程序/属性来让 spring 知道应该激活哪个配置文件。

但我觉得spring profile比maven profile更灵活。

你怎么看？请给一些建议。谢谢你。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-08-08T16:51:47.543

Maven 配置文件将提供构建时解决方案，而 SpringFramework 配置文件将提供运行时替代方案。我想这是大家可能会问自己的第一个问题：他是想拥有一个可以部署在不同环境中的单个包，还是希望构建工具根据目标环境提供不同的包。

要记住的一件事是，如果您将不同的软件包部署到不同的服务器中，可能会出现许多问题。例如，在我的工作场所，如果我正在部署一个包来纠正以前在生产环境中发生的错误，公司政策会规定唯一可接受的情况是我在 QA 和生产服务器中拥有相同的解决方案包。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-08T16:47:06.710

如果您需要不同的工件，请使用 Maven。如果它只是一个可以在构建工件之后配置的真实配置，那么用户 Spring 配置文件。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-08T17:07:44.323

正如其他回复中提到的：这完全取决于你的工作方式:)

我们在过去几年使用 maven 和现在的 spring 3.1 配置文件想出的是这样的：

*   我们使用 maven-release-plugin 来削减版本。如果我们使用 Maven 配置文件，这会导致环境问题，因为我们需要重建版本或至少每个 Maven 配置文件的标签
*   因此我们为所有环境创建 .war 文件并使用 spring`PropertyPlaceholderConfigurer`来设置应用程序（或某些 JNDI 资源，具体取决于客户）。这允许只运行一个 Maven 版本。
*   当环境不同时，弹簧型材也会出现。例如，并非在所有环境中都可用的身份验证服务。在这里，我们存根该服务并将其放入弹簧配置文件中。我们在我们使用的属性中激活了弹簧轮廓`PropertyPlaceholderConfigurer`。

有一些关于如何做到这一点的不错的教程：

*   [http://pio-tech.blogspot.ch/2012/01/using-spring-31-bean-definition.html](http://pio-tech.blogspot.ch/2012/01/using-spring-31-bean-definition.html)
*   [http://steveschols.wordpress.com/2012/06/01/spring-3-1-unified-property-management-before-and-after/](http://steveschols.wordpress.com/2012/06/01/spring-3-1-unified-property-management-before-and-after/)

我们通常只使用 maven 配置文件将构建分成不同的部分，供开发人员和持续集成构建使用。对于 .war 文件，我们实际上不再将它们用于目标环境。我们仍然使用 maven 配置文件进行自动化数据库部署，与 Web 应用程序（数据量、测试数据等）相比，这些配置文件的差异更大，但这些配置文件不是以 zip 格式交付的。

肯定还有其他的路要走。我不认为这是故事的结局:)

但这可能会有所帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-11-26T02:19:15.297

我碰巧使用 properties-maven-plugin 来设置系统属性，具体取决于激活的 maven 配置文件。然后在 Spring 中，我以编程方式激活了我想要的配置文件，具体取决于该系统属性：

字符串 activeProfile = System.getProperty("myapp.profile");

appContext.getEnvironment().setActiveProfiles(....)

此外，当我想直接链接两种配置文件（maven/spring）时，我是通过 maven 插件设置 spring.profiles.active 属性。

这些做法在设计中可能是错误的，但它们解决了我的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T16:48:07.217

我认为这取决于您的要求。如果您有基于环境的不同依赖项（即 jdbc 驱动程序等），您将需要使用 maven 来解决这个问题。

如果只是配置部署的问题，那么使用 spring 可能会更好。

# php - 匹配单词的正则表达式

> ID：11869076
> 
> 赞同：0
> 
> 时间：2012-08-08T16:34:23.523
> 
> 标签：php, regex

给定字符串以开头，我需要能够匹配字符串中的价格值`Shipping (UK):</span>`

**细绳**

```
Shipping (UK):</span>&#163;2.95 
```

**到目前为止的正则表达式**

```
(?<=\):<\/span>).* 
```

我试图做这样的事情......

```
(?<=\Shipping (UK):<\/span>).* 
```

但这不起作用，构造这个正则表达式的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T16:36:27.153

您需要转义当前正则表达式中的括号[以使其匹配：](http://regexr.com?31pbe)

```
(?<=Shipping \(UK\):<\/span>).* 
```

另外，Charmander 是正确的，你不想要简写`\S`，你只想要`S`.

# javascript - 用于在页面其他位置提交表单的 HTML 按钮

> ID：11869079
> 
> 赞同：3
> 
> 时间：2012-08-08T16:34:32.633
> 
> 标签：javascript, html, forms, button

我想在我的网页的主要部分有一个表单，在这个部分的底部有一个按钮来提交它。

我还希望有一个带有指向其他页面的链接的侧栏，但要做到这一点，以便每当单击链接时，它也可以作为提交表单的按钮。（即在 HTML 中，这些链接的代码将在表单标签之外，但我希望它们仍然充当表单的按钮）

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T16:37:46.113

`onclick`在您的链接中使用以下处理程序，替换`formId`为您要提交的表单的 ID...

```
onclick="document.getElementById('formId').submit();return false;" 
```

**更新**

正如@Juan（和其他人，尤其是@JoeTaylor）所提到的，上述内容不会触发与表单关联的任何客户端验证代码。我知道的最简单的方法是触发`click`表单中提交按钮的事件。例如，这可以用于您的链接...

```
onclick="document.getElementById('formSubmitButton').click();return false;" 
```

尽管您没有提到与服务器端处理有关的任何事情，但我会假设您的表单的重点。在这背后我要说的另一件事是，您应该**始终**将验证复制回服务器上。JavaScript 很容易被绕过，所以你应该确保到达你的服务器的值是正确的，**永远不要**假设 JavaScript 已经完成了它的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T17:25:38.767

您可以在 HTML5 中不使用 JavaScript 轻松解决此问题：

```
<input type="submit" form="id_of_the_form" value="Submit">

<form id="id_of_the_form" action method></form> 
```

您可以随意设置这些按钮的样式。如示例中所示，按钮可以放置在 dom 中的任何位置 - 无需将其放入表单中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T16:37:18.573

通过在表单中​​添加 onclick javascript 函数。

```
document.forms["myform"].submit(); 
```

其中“myform”是表单的 ID。这是一个很好的演练：[http ://www.javascript-coder.com/javascript-form/javascript-form-submit.phtml](http://www.javascript-coder.com/javascript-form/javascript-form-submit.phtml)

例如，按钮可能是：

```
<button onclick="document.forms['myform'].submit();">Hi</button> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T16:37:36.427

是按钮的点击事件添加`document.getElementById('formId').submit();`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T16:38:23.010

```
<form name="myform" action="action.php">

    // Your form

</form>

<a href="javascript: document.myform.submit();">Submit form</a> 
```

或者你可以使用 jQuery：

```
<form name="myform" action="action.php">

    // Your form

</form>

<a href="#" onclick="$("#myform").submit();">Your text</a> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-08T17:02:42.407

确保您的表单被您附加的任何函数提交*和*`submit()`验证的最简单方法不是调用表单的方法，而是调用其提交按钮的`click()`方法。

考虑以下形式：

```
<form id="bar" method="post" action="/echo/html/">
    <input type="text" id="foo" name="foo">
    <input type="submit" value="Submit">
</form> 
```

现在，点击提交并没有什么特别的。但是，如果您想在将任何内容发送到服务器之前确保文本输入具有值怎么办？您可以按如下方式完成：

```
function validateBarForm() {
    var txt = this.querySelector("input[type=text]");
    if (txt.value == "") {
        txt.style.outline = "solid red 2px";
        return false;
    }
}

document.getElementById("bar").onsubmit = validateBarForm; 
```

现在，如果您单击提交，则不会使用空白文本输入提交表单。但是，如果您以编程方式提交表单怎么办？让我们先添加一个链接...

```
<a href="#" id="submit-bar">submit form</a> 
```

请注意，此链接位于表单标记*之外*。我们可以简单地附加一个提交函数：

```
function submitBarForm() {
    document.getElementById("bar").submit();
}

document.getElementById("submit-bar").onclick = submitBarForm; 
```

点击"提交表格"... 哎呀！不执行验证功能！有几种方法可以绕过这个问题，但我最喜欢的是让 JavaScript 模拟对提交按钮的点击。我发现这比硬编码对验证函数的调用更能适应变化。

```
function submitBarForm() {
    document.querySelector("#bar input[type=submit]").click();
} 
```

现在，当您单击该链接时，表单将被验证，并且如果所有内容都已检查，则它也已提交。但不要相信我的话——前往 jsfiddle.net 并亲自看看。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-07-23T20:40:50.847

我自己在实际表单中使用隐藏的提交按钮，在表单之外 - 页面上的任何其他位置 - 引用提交按钮并触发它的标签。

在表格中：

```
<input type='submit' id='hiddenSubmit'> 
```

以及其他任何地方：

```
<label for='hiddenSubmit'>click me!</label> 
```

似乎完成了这项工作。

# php - 尽管有 utf-8 标头和接受字符集，但 HTML 中的字符集来自 (at-sign)

> ID：11869084
> 
> 赞同：1
> 
> 时间：2012-08-08T16:34:58.690
> 
> 标签：php, html, character-encoding

使用电子邮件登录，我发现 HTML 表单的字符集（可能）存在问题......

在文档的最顶部，我使用 php 来执行以下操作：

`header('Content-type: text/html; charset=utf-8');`

在头部我也有：

`<meta charset="UTF-8">`

甚至在形式本身：

`<form accept-charset="utf-8" ...>`

但是，在序列化表单时，将返回电子邮件地址，如下所示：

`email=my%40email.com`

有人知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T16:41:59.693

我认为问题出在过滤表单数据的 PHP 脚本中的某些代码上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T16:45:12.850

是的，CoursesWeb 是正确的。使用`urldecode($_POST['email']);`它，它会自动解码包含所有`%##`内容的字符串。

来自 php.net：

> string urldecode ( string $str ) 解码给定字符串中的任何 %## 编码。加号 ('+') 被解码为空格字符。

(php.net/manual/en/function.urldecode.php)

# android - Android：更改操作栏中下拉导航的背景颜色

> ID：11869086
> 
> 赞同：5
> 
> 时间：2012-08-08T16:35:07.080
> 
> 标签：android, android-actionbar

我在操作栏中使用下拉导航列表。我想更改下拉导航列表中所选项目的背景颜色。我们如何通过java代码来改变它？

# winforms - Winforms 数据绑定

> ID：11869091
> 
> 赞同：1
> 
> 时间：2012-08-08T16:35:21.103
> 
> 标签：winforms, data-binding

我熟悉 WPF 技术，特别是 MVVM 方法。最近我开始在 Winforms 中编程，我想知道 - 在 winforms 中使用数据绑定（与 INotiify 结合...）是否被认为是最佳实践，还是过度杀伤？

有人说数据绑定在winforms中真的很麻烦，对吗？

并且明确一点：我不是在谈论 winforms 中的完整 MVVM 实现——只是将数据绑定到控件（文本框等，而不是按钮）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T16:37:30.903

Windows 窗体中的数据绑定的工作方式与 WPF 非常不同 - 并且（IMO）有点痛苦。主要问题是对绑定源有更多[限制](http://msdn.microsoft.com/en-us/library/f3y6cb0c.aspx)，并且没有一种干净的方式来处理诸如 之类的事情`IValueConverter`，因此通常需要做很多额外的工作来获得任何东西，但非常简单地绑定才能干净地工作。

有关如何在 Windows 窗体中使用数据绑定的详细信息，请[参阅 MSDN 中的 Windows 窗体数据绑定](http://msdn.microsoft.com/en-us/library/ef2xyb33.aspx)。

# jquery - jquery IE8 $(document).ready "object expected" 错误

> ID：11869093
> 
> 赞同：5
> 
> 时间：2012-08-08T16:35:33.303
> 
> 标签：jquery, object, internet-explorer-8, object-expected

我在使用 jquery 命令加载页面时遇到 IE8 引发“预期对象”错误的问题`$(document).ready()`。我已经浏览了我可以在 SO 上找到的所有其他帖子，但似乎没有一个解决方案有效。

为了排除故障，我创建了以下 html，它在 Firefox 和 Chrome 中运行良好，但在该行产生“预期对象”错误`$(document).ready`。至今：

1.  我已经确认它正在到达 google jquery 文件 - 并尝试引用本地 jquery.js 文件 - 结果相同。
2.  尝试将脚本放入`<head>`（我已将其包含在正文中以在我正在开发的站点上重新创建情况）
3.  我也试过这个`jQuery(document)`而不是`$`- 同样的结果
4.  尝试包括：`var $j=jQuery.noConflict();`和包括`$j(document)`，在声明中出现“jQuery is undefined”错误`$j`。

我错过了什么？任何帮助表示赞赏！谢谢！

```
<html>
<head>
    <script type="application/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js"></script>
</head>
<body>
    <script type="text/javascript">
        $(document).ready(function(){
    alert("WORKING!");
    });

</script>

<div id="test">
</div>
</body></html> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-08T16:45:05.927

伙计，检查你的两个脚本标签。一个说`type="application/javascript"`，另一个说`type="text/javascript"`。

将第一个更改为`type="text/javascript"`，它将正常工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-04T23:09:00.403

有同样的问题。我通过努力奋斗了一段时间来解决这个问题，并尝试了一堆不起作用的想法。但这项工作:)

检查你的 jquery 脚本标签。如果它包含这样的 type="text/javascript"

```
<script  type="text/javascript" src="~/scripts/jquery-1.9.0.js"></script> 
```

然后只用“javascript”替换“text/javascript”

```
<script type="javascript" src="~/scripts/jquery-1.9.0.js"></script> 
```

真的很奇怪的行为，但它的工作原理。如果有人对此有很好的解释，请发布答案。

注意！这仅适用于 IE8，不适用于 Chrome 或 Firefox！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-11T11:24:50.960

刚刚也遇到了这个错误。

我的问题非常愚蠢：我在虚拟机中运行 Internet Explorer。这台机器无法访问互联网，只能访问我运行网络服务器的主机系统。因此，当然无法解析外部脚本引用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-04T08:02:27.997

这东西帮我换了

```
type="text/javascript" 
```

进入

```
language="javascript" 
```

# c# - Visual C# - 获取访问器方法返回 0 作为值

> ID：11869094
> 
> 赞同：0
> 
> 时间：2012-08-08T16:35:36.070
> 
> 标签：c#, get, set, static-methods

我正在尝试在表单之间传递方法值。结果，我将要传递其数据的方法设为静态。由于我使用非静态文本框来收集用户输入，因此我还创建了公共属性方法来解析来自用户的输入，将其值存储在公共类级静态变量中，并将值返回给静态调用变量的方法。

```
public static int laborHours;

public int lHoursB
{
  get
  {
    return laborHours;
  }
  set
  {
    laborHours = int.Parse(lHours.Text);
  }
}

private static decimal laborMethod(decimal laborTotal)
{
  const decimal laborCharge = 50M;
  decimal labor = 0;

  labor = laborCharge * laborHours;
  return labor;
}

public static decimal amountCharged;

public decimal amount
{
  get
  {
    return amountCharged;
  }
  set
  {
    amountCharged = int.Parse(amtBox.Text);
  }
} 

public static int numberOfParts;

public int partsNumber
{
  get
  {
    return numberOfParts;
  }
  set
  {
    numberOfParts = int.Parse(partsBox.Text);
  }
}

private static decimal subtotalMethod(decimal subTotal)
{
  decimal subtotal = 0;

  subtotal = amountCharged * numberOfParts;

  return subtotal;
}

private static decimal subtotal2Method(decimal subtotalTwo)
{
  decimal labor = 0;
  decimal subtotal = 0;

  labor = laborMethod(labor);
  subtotal = subtotalMethod(subtotal);
  subtotalTwo = subtotal + labor;

  return subtotalTwo;
}

private static decimal taxMethod(decimal salesTax)
{
  const decimal tax = .08M;
  decimal sTax = 0;
  decimal sub = 0;
  sub = subtotalMethod(sub);

  sTax = sub * tax;

  return sTax;
} 
```

编译器将所有内容都检查为干净的编译，但这里有一个我似乎找不到的逻辑错误。当我用程序运行一个简单的测试时，每个文本框都返回一个“0”。

请帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T17:27:53.127

与它们的正常编写方式相比，您的属性是从前到后的。我建议你这样写：

```
public int lHoursB
{   
  get
  {
    int result = 0;
    int.TryParse(lHours.Text, out result);
    return result;
  }
  set
  {
    lHours.Text = value.ToString();
  }
} 
```

然后你可以这样做：

```
lHoursB = 10; 
```

这会将 lHours 文本框设置为“10”。我使用的是 TryParse 而不是 Parse，因为后者如果无法解析字符串会抛出 FormatException；您可能更喜欢有一个例外，在这种情况下使用 Parse。此外，您应该使用 Decimal.Parse/TryParse 而不是 Int32.Parse 作为数量，它是小数而不是 int。最后，您可以在 int.ToString 调用中指定一种文化，如果您想为特定文化格式化 int（请参阅[Int32.ToString()](http://msdn.microsoft.com/en-us/library/cht2hdff)）。

# java - 哈德逊插件警告

> ID：11869097
> 
> 赞同：0
> 
> 时间：2012-08-08T16:35:45.773
> 
> 标签：java, continuous-integration, hudson, jenkins

我在 hudson 控制台中看到了消息

```
WARNING: Faild to load hudson.plugins.groovy.GroovyTokenMacro
java.lang.HoClassDefFoundError:    org/jenkinsci/plugin/tokenmacro/DataBoundTokenMacro ..... 
```

我已重新下载 .hdi 文件并收到相同的警告。我不确定那是以前。

我该如何解决？我的哈德森处于不安全模式。

谢谢！

# .net - 使用 codedom 控制临时文件的使用

> ID：11869108
> 
> 赞同：0
> 
> 时间：2012-08-08T16:36:17.063
> 
> 标签：.net, vb.net, memory, codedom

我正在使用 .net 和 codedom 在我想避免（或最好消除）文件系统访问的环境中。

我当前的代码：

```
Private Sub ProcessCommand(ByVal command As String)
    Dim MyProvider As New VBCodeProvider 
    Dim cp As New CompilerParameters     
    cp.GenerateExecutable = True        
    cp.GenerateInMemory = True           
    Dim TempModuleSource As String = command

    cp.ReferencedAssemblies.Add("System.dll") 
    cp.ReferencedAssemblies.Add("System.Windows.Forms.dll") 
    cp.IncludeDebugInformation = False

    Dim cr As CompilerResults = MyProvider.CompileAssemblyFromSource(cp, TempModuleSource)
    If cr.Errors.Count > 0 Then

        Throw New ArgumentOutOfRangeException("Invalid Expression - please use something VB could evaluate")
    Else

        cr.CompiledAssembly.EntryPoint.Invoke(Nothing, Nothing)
    End If
End Sub 
```

我很惊讶地看到 GenerateInMemory = True 并没有真正让它在内存中生成。相反，二进制文件被编译并存储在一个临时文件中。有没有办法强制codedom将输出存储在内存中？也许通过强制二进制文件不使用临时文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T17:14:40.600

这不是一个选项，当前的 VB.NET 和 C# 编译器（vbc.exe 和 csc.exe）只能将程序集生成到磁盘。当 Roslyn 项目发布时，这可能会改变，但那是未来的音乐。

这根本不会影响编译或程序集加载的效率，您的程序*将从*内存中加载程序集。文件系统缓存负责这一点。

# php - 查找数组是否至少包含 1 个值

> ID：11869111
> 
> 赞同：7
> 
> 时间：2012-08-08T16:36:22.127
> 
> 标签：php, arrays

我需要在 PHP 中找出一个数组是否具有另一个数组的任何值。

例如 ：

```
$search_values = array('cat', 'horse', 'dog');
$results = array('cat', 'horse');
if (in_array($search_values, $results))
    echo 'A value was found'; 
```

当然，上面的并没有真正起作用（in_array）。

基本上，基于上面的例子，我想检查**$results**数组中是否有**cat**、**hourse**或**dog**。

我是否需要在第一个数组中执行“foreach”，然后在第二个数组中执行“in_array”，然后返回 true；如果找到了？或者，还有更好的方法？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-08T16:39:20.380

您可能想使用[array_intersect()](http://php.net/manual/en/function.array-intersect.php)

```
$search_values = array('cat', 'horse', 'dog');
$results = array('cat', 'horse');

if ( count ( array_intersect($search_values, $results) ) > 0 ) {
    echo 'BINGO';
} else {
    echo 'NO MATCHES';
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T08:57:38.870

在某些大型数组的情况下，array_intersect() 会更慢，因为它返回整个交集，这是不必要的。复杂度为 O(n)。

只找到一个匹配项的代码：

```
 $arr1 = array('cat', 'dog');
        $arr2 = array('cow', 'horse', 'cat');

        // build hash map for one of arrays, O(n) time
        foreach ($arr2 as $v) {
            $arr2t[$v] = $v;
        }
        $arr2 = $arr2t;

        // search for at least one map, worst case O(n) time
        $found = false;
        foreach ($arr1 as $v) {
            if (isset($arr2[$v])) {
                $found = true;
                break;
            }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T16:40:46.583

使用 in_array 时，您需要将 NEEDLE 指定为第一个值，它是一个字符串。第二个值是您要检查的数组。

如果要比较两个数组，则需要使用 array_intersect。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T16:42:38.100

像这样的东西：

```
return !empty(array_intersect($search_values, $result)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T16:42:39.847

使用`array_intersect`PHP 函数：

```
<?php

$search_values = array('cat', 'horse', 'dog');
$results = array('cat', 'horse');

$present = array_intersect( $search_values, $results );

if( count( $present ) )
{
    // your code
    echo 'A value was found';
    print_r( $present );
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-08T16:46:12.217

我认为这会奏效。我的 MAMP 设置不在这台 Mac 上，所以无法测试。

```
$search_values = array('cat', 'horse', 'dog');
$results = array('cat', 'horse');
foreach($results as $k => $v){
 if(in_array($v, $search_values){
    $found = $found && true;
  }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-08T16:46:17.170

您可以使用以下代码：

```
$search_values = array('cat', 'horse', 'dog');
$results = array('cat', 'horse');
if (count(array_intersect($search_values, $results)) > 0 )
    echo 'A value was found'; 
```

使用[array_intersect](http://www.php.net/manual/en/function.array-intersect.php)函数。

这是[工作演示](http://codepad.viper-7.com/goFirK)：

# php - 此 RegEx 仅适用于 8 位电话号码，如何使其适用于 15 位？

> ID：11869114
> 
> 赞同：0
> 
> 时间：2012-08-08T16:36:26.413
> 
> 标签：php, regex

Stack Overflow 中的某个人给了我这段代码：

```
$output = preg_replace( '/(\+?\d{2}|0)(\d{7,8})/', '0$2', $test); 
```

它改变了用户输入：

> +622112345 转 02112345
> 
> 622112345转02112345
> 
> 02112345 变成 02112345

不幸的是，它只适用于 7-8 位数字。我决定将代码更改为：

```
$output = preg_replace( '/(\+?\d{2}|0)(\d{15})/', '0$2', $test); 
```

通过更改`(\d{7,8})`为`(\d{15})`，我希望我可以让这个 RegEx 验证最多 15 位数字。但是，这就是我所拥有的：

```
input : 083812345678910 >> output : 083812345678910 [correct]

input : 6283812345678910 >> output : 6283812345678910 [false, should be : 083812345678910]

input : +6283812345678910 >> output : 6283812345678910 [false, should be : 083812345678910] 
```

我怎样才能使它适用于 15 位数字？谢谢。

更新：用户输入可以是 10、11、12 甚至 13 位数字。但不超过 15 位。所以我需要这个代码来更改前缀：+62、62 或 0 INTO 0xxxx。不管他们有多少位数，最多 15 位。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T16:43:58.600

正确的正则表达式是：

```
$output = preg_replace( '/(0|\+?\d{2})(\d{7,14})/', '0$2', $test); 
```

即使您有 16 位数字，在分机号之后最多只能有 14 位数字，以说明 2 位分机号。请注意，这将适用于除 之外的更多扩展`62`，如果不需要，请替换`\d{2}`为`62`.

[演示](http://viper-7.com/GFI3D9)

# crystal-reports - Crystal Report选项未出现在VS2010中

> ID：11869118
> 
> 赞同：0
> 
> 时间：2012-08-08T16:36:50.123
> 
> 标签：crystal-reports

我需要开发一个将使用来自 ac# 应用程序的水晶报表的 Windows 窗体。我下载了水晶报告 .exe 文件并将其安装在我的开发人员机器上。但是，当我想将它（水晶报告）添加到我的项目时，我看到添加的所有选项都是：

```
 Reports Application
    Crystal Reports WPF Application
    Crystal Reports Application 
```

根据我对谷歌的研究......我原以为选择只是：

```
 Crystal Reports 
```

我做错了什么？..谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T16:50:33.760

我发现我做错了什么......而不是选择“添加新项目”选项......我选择了“添加新项目选项”

# ios - ios - 如何使 segue 仅在某些代码执行后才起作用？

> ID：11869129
> 
> 赞同：2
> 
> 时间：2012-08-08T16:37:20.273
> 
> 标签：ios, ios5, segue

我有一个从一个屏幕映射到下一个屏幕的 segue。第一个屏幕总是转到第二页。但是我想确保如果执行了某些代码（例如验证检查正常），segue 只会进入第二页。这样可以设置吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T15:40:34.420

```
-(IBAction)add:(id)sender {
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

    dispatch_sync(dispatch_get_main_queue(), ^{ 
        [[CMPopupManager sharedObject] showWaitingPopup];    
    });

    sleep(3);

    dispatch_sync(dispatch_get_main_queue(), ^{ 
        [[CMPopupManager sharedObject] closeWaitingPopup];
        [self performSegueWithIdentifier:@"addCarSegue" sender:self];       
    }); 
});
} 
```

（并且使用 Storyboard 不是从您的按钮而是从视图控制器拖动一个 segue 动作）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T16:43:02.760

只有在某个 BOOL 为 YES 的情况下，你才能让你继续进行转换。有一个全局变量（根据您的需要，可能是全局的，可能只是在那个范围内。取决于您的来源）BOOL 变量，初始化为 NO。一旦验证OK，将其更改为YES。

将调用下一个视图控制器的函数使用（不记得确切的格式）嵌套在一个`if(verificationOK) { }`

这样，即使到达该代码，它也不会进入 if 语句，除非 verifyOK 变量已更改为 YES。

**编辑** 阅读您的评论后，您可以简单地以编程方式触发 segue。将您的 IBAction 连接到一个函数，比方说`changeView`

```
-(IBAction) changeView:(id) sender {
    if(verificationOk) {
        [self performSegueWithIdentifier:@"SeguesIdentifier" sender:nil];
    }
 } 
```

[您可以在此处](http://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/UsingViewControllersinYourApplication/UsingViewControllersinYourApplication.html#//apple_ref/doc/uid/TP40007457-CH6-SW6)阅读有关 segue的更多信息

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T16:49:21.407

就个人而言，我建议确保禁用该按钮，直到字段以通过验证规则的方式进行更改。因此，随着这些字段的变化，执行验证，一旦满足验证规则就启用 segue 按钮。

如果您的验证很复杂（例如，需要一些服务器往返），则从按钮中删除 segue，将您的按钮连接到`IBOutlet`验证的地方，并在成功后转换/切换到下一个场景。

# asp.net - 访问 FormView 的控件，获取 Null 引用

> ID：11869130
> 
> 赞同：0
> 
> 时间：2012-08-08T16:37:22.793
> 
> 标签：asp.net, webforms

我有一个 FormView，我需要访问其中的一些 Div 和其他控件。我的 apsx 代码与此类似：

```
 <asp:FormView ID="Edit_FV" runat="server" DataKeyNames="IDproceso" DefaultMode="Edit" DataSourceID="SqlDS_Procesos">
            <EditItemTemplate>
                <div id="second_info" runat="server">
                    <div id="second_info_left" runat="server">
                        <div id="alcance" class="report_field" runat="server">
                            <p class="container-title">
                                Alcance:</p>
                            <asp:TextBox ID="TextBox14" runat="server" TextMode="multiline" Width="400px" Height="120px" Text='<%# Bind("alcance") %>' />
                        </div> 
                    </div>
                    <div id="second_info_right" runat="server">
                    <div class="valores-container" id="tipo_ahorro" runat="server">
                        <asp:CheckBox ID="ahorro_state" runat="server" Checked='<%# Bind("tipo_ahorro") %>'  />
                    </div>
                </div>
            </EditItemTemplate>
        </asp:FormView> 
```

现在，假设我想访问`CheckBox`with `id = ahorro_state`，我尝试了 with`Edit_FV.FindControl("ahorro_state")`并获得了 Null 引用。我也尝试过，`Edit_FV.FindControl("MainContent_Edit_FV_ahorro_state")`因为这是在最终 HTML 文档中实际命名 ID 的方式，但我也得到了 Null 引用。当我尝试访问任何 div（使用 ID 、 等）时，也会发生同样的`second_info`情况`tipo_ahorro`。我觉得我犯了一个愚蠢的错误，但我环顾四周并没有找到答案。

任何想法如何解决这个问题？

编辑：在我调用 FindControl 的地方添加了代码。

我尝试从 Page_Load() 调用 DataBind()：

```
protected void Page_Load(object sender, EventArgs e)
        {

            DataBind();
            if (Edit_FV.CurrentMode == FormViewMode.Edit)
            {
                Control c = Edit_FV.FindControl("ahorro_state");//c is null here.
            }
        } 
```

并且还尝试设置 Edit_FV 的 OnDataBound 属性：`OnDataBound="onBound"`

```
 protected void onBound(object sender, EventArgs e)
            {
                if (Edit_FV.CurrentMode == FormViewMode.Edit)
                {
                    ControlCollection a = Edit_FV.Controls;
                    Control c = Edit_FV.FindControl("ahorro_state");//c is null here
                }

            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T16:53:29.877

尽管默认模式设置为“编辑”，但表单视图在控件为 DataBound 之前不会切换到该模式。尝试`DataBind()`先调用，然后使用元素的 ID（不是 ClientID，如您在第二个示例中尝试的那样）使用 FindControl。

有关将 FindControl 逻辑放置在何处的示例，请参阅[FormView.FindControl(): object reference error](https://stackoverflow.com/questions/1485545/formview-findcontrol-object-reference-error)。

**编辑：**

您的数据源也有可能没有返回任何数据。这将导致 EditItemTemplate 为空，这可能会解释您的空引用错误。`Edit_FV.DataItemCount > 0`在切换到编辑模式之前尝试检查 a 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-08T17:53:49.423

I have had similar problems with 'FindControl'. I found a piece of code that has helped me
a) Find controls recursively, and
b) the debug statement has been very help to see why I am not finding the control in question.
To help me find the controls I have to give them ID values when I am looking for them if they don't have one by default:

```
 public static class General_ControlExtensions
{
    //From: http://www.devtoolshed.com/content/find-control-templatefield-programmatically
    /// <summary>
    /// recursively finds a child control of the specified parent.
    /// USAGE: 
    /// Control controlToFind = DetailsView1.fn_ReturnControl_givenControlID("txtName");
    /// </summary>
    /// <param name="rootControl"></param>
    /// <param name="ID"></param>
    /// <returns></returns>
    public static Control fn_ReturnControl_givenControlID(this Control rootControl, string ID)
    {
        if (rootControl.ID == ID)
        {
            return rootControl;
        }
        foreach (Control control in rootControl.Controls)
        {

            Debug.WriteLine("FindByID - child.id: " + control.ID);
            Control foundControl = fn_ReturnControl_givenControlID(control, ID);
            if (foundControl != null)
            {
                return foundControl;
            }
        }
        return null;
    } 
```

Here is an example of its usage:

```
using System.Diagnostics;   // for debug 

TextBox txt_LastName = (TextBox)fv_NewHire_DetailsForm.fn_ReturnControl_givenControlID("INSERT_txt_LastName"); 
```

In addition, I have found it helpful for this type of problem to preface the controls in the 'insertitemtemplate' with 'INSERT_", and controls in the 'edititemtemplate' with 'EDIT_" to quickly tell them apart in the debug output.

# android - 为什么在可运行的 post() 中查看宽度和高度 0？

> ID：11869135
> 
> 赞同：4
> 
> 时间：2012-08-08T16:37:41.190
> 
> 标签：android, view

我正在获取视图的高度和宽度，在 getView() 方法中膨胀。这是一个网格项目。

通常我在视图上使用 post() 来获取大小，在它附加到布局之后。但它返回 0。

```
final View convertViewFinal = convertView;
convertView.post(new Runnable() {
    @Override
    public void run() {
        doSomethingWithConvertView(convertViewFinal);
    }
}); 
```

...

```
doSomethingWithConvertView(View v) {v.getWidth(); /*returns 0*/}; 
```

我如何获得尺寸？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-27T15:31:00.493

虽然使用 viewTreeObserver 绝对有效，但我发现可以使用活动视图中的可运行对象可靠地完成对膨胀视图的测量要求。IE

```
someActivityInstance.getWindow().getDecorView().post(new Runnable() {
    @override
    public void run() {
        // someMeasurements
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T16:52:07.957

问题是convertview很可能还没有在手机屏幕上绘制，所以你必须等到它准备好。

您需要使用 ViewTreeObserver 来准确知道何时绘制视图。

查看此答案以获取更多信息： [我何时可以首先测量视图？](https://stackoverflow.com/questions/4393612/when-can-i-first-measure-a-view)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T16:53:31.523

您可能在 onCreate 或 onStart 或 onResume 调用此方法，这些方法在布局测量之前运行。但是有很多变通方法，这是一个不错的选择：

```
ViewTreeObserver vto = rootView.getViewTreeObserver();
        vto.addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
            public void onGlobalLayout() {
                v.getWidth();//already measured...
            }
        }); 
```

其中 rootView 可能是比您想要的宽度更高级别的任何 viewGroup。但请注意，此侦听器可能会运行不止一次。

# javascript - 滑块分页图标效果

> ID：11869136
> 
> 赞同：1
> 
> 时间：2012-08-08T16:37:45.630
> 
> 标签：javascript, jquery

我想获得[此站点](https://store.sap.com/sap/cpa/repository/store/M/index.html#WELCOME?sap-language=EN&pcntry=US&ptype=2&app.inport=Dept&param.type=2&param.country=US)顶部 jQuery 滑块上的效果。您可以看到列表中指示当前幻灯片位置的黄色小正方形逐渐变小，向上缩小直到它们消失并且滑块改变图像。

这是[迄今为止我尝试过的链接](http://codebins.com/bin/4ldqp9c/33)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T17:32:35.653

这是一个整洁的效果:)

您需要将您现在拥有的内容与 LI 父元素中的子元素结合起来。当 Slider 触发时，您将此元素的高度从 0 设置为 100 超过 4000 MS，然后有一个回调将高度返回为 0。

前任：

```
$('.slider').animate({height: '100%'}, 4000, function() {
  $('.slider').css('height','0');
}); 
```

在这里工作：http: [//codebins.com/bin/4ldqp9c/39](http://codebins.com/bin/4ldqp9c/39)

# php - 如何制作 PHP 计数器？

> ID：11869142
> 
> 赞同：6
> 
> 时间：2012-08-08T16:38:09.073
> 
> 标签：php, count, counter

我知道我用 Javascript 做过一次，但是我怎样才能用 PHP 做呢？基本上我想这样做：

```
if (empty($counter)){
   $counter = 1;
}else{
   "plus one to $counter" ($counter++?)
} 
```

但是当我尝试时它没有用。我该怎么做呢？

谢谢 ：）

编辑：这是我可以做的：

```
if ($counter == 10){
   echo("Counter is 10!");
} 
```

编辑：

这一切都在“while()”中，这样​​我就可以计算它进行了多少次，因为 LIMIT 不适用于我当前正在执行的查询。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-08T16:53:47.593

为什么额外的if into the while？我会这样做：

```
$counter = 0;
while(...)
{
    (...)
    $counter++;
}

echo $counter; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-08T16:55:10.693

要递增给定值，请将递增运算符附加`++`到整数变量并将其直接放在 while 循环中，而不使用条件表达式来检查变量是否已设置。

```
$counter = 1;

while(...){
    echo "plus one to $counter";
    $counter++;
} 
```

如果您的计数器用于确定您的代码要执行多少次，那么您可以将条件放在`while()`表达式中：

```
while($counter < 10){
    echo "plus one to $counter";
    $counter++;
}

echo("Counter is $counter!");  // Outputs: Counter is 10! 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T16:40:49.287

您将不得不学习 PHP 如何输出到屏幕和其他控件的基础知识。

```
if (empty($counter)){
   $counter = 1;
}else{
   echo 'plus one to $counter';
   $counter++;
} 
```

这些方面的东西对你有用。

PHP 非常灵活，可以随心所欲地处理它。请记住，语句末尾需要一个分号，如果您想输出到屏幕，（一开始）您将依赖`echo`语句。

此外，在处理`echo`语句时，请注意单引号和双引号之间的区别。双引号将处理任何包含的变量：

```
$counter = 3;
echo "plus one to $counter"; // output: plus one to 3
echo 'plus one to $counter'; // output: plus one to $counter 
```

# c# - 将 html 布局添加到空白 aspx 页面

> ID：11869145
> 
> 赞同：0
> 
> 时间：2012-08-08T16:38:15.163
> 
> 标签：c#, asp.net

想要创建没有任何 asp 控件的动态 html 布局。实际上我只想在 aspx 页面上留下第一行

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="Kletka._Default" %> 
```

以及在代码隐藏上生成完整的 html 布局。请建议如何实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T16:42:08.460

一种方法是：

```
protected void Page_Load(object sender, EventArgs e)
{ 
     string coolHTML = @"<div class=""someclass"">... and other cool content</div>";
     Response.Write(coolHTML);
} 
```

照这样说。这是一个可怕的想法。在后面的代码上动态构建 HTML 是维护的一场噩梦，它的性能并没有达到最佳效果，而且您​​失去了 asp.net 提供的许多其他功能，而这正是首先使用 ASP.NET 的主要原因。

您可以做的是为特定事物（页脚、页眉、左面板等）创建用户控件，并在标记中为它们定义布局；然后在后面的代码上，您可以根据某些业务条件将它们添加到页面中的特定占位符中。

假设您有一个母版页（或页面中至少有一些内容占位符），如下所示：

```
<asp:ContentPlaceHolder id="footer" runat="Server" /> 
```

在你可以做的代码后面：

```
footer.Controls.Add(new FooterControl()); 
```

**更新**OP刚刚在评论中提到他不喜欢asp.net控件...

您不必**使用**`runat="server"`ASP.NET 控件，如果您需要能够在服务器端操作它们的属性，则可以使用常规 HTML 控件并设置它们的属性。例如：

```
<div id="mydiv" runat="server" > some content </div> 
```

关于背后的代码：

```
myDiv.Attributes.Add("class","css_class");
myDiv.Attributes.Add("onclick","callJavascriptFunction();");
// and so on. 
```

*在非常特定的情况下偶尔*做这种事情是可以的，但我会避免这种代码，因为它很难维护。例如，假设您需要向`myDiv`元素添加另一个类。现在，你必须改变你的代码，而不是仅仅改变你的标记......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T16:41:47.847

您需要在 Page_Init 事件中动态添加控件。所以你需要一个容器来保存你的 HTML，所以你应该首先向页面添加一个面板，然后页面的控件将被添加到面板中。

```
Panel pnl = new Panel();
Page.Controls.Add(pnl);

TextBox txt = new TextBox();
pnl.Controls.Add(txt); 
```

ETC....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T16:47:12.260

所以...您想使用 ASP.NET Web 表单而不使用 GridView 等内置控件吗？

您可以编写 html 并使用受保护的属性吗？<%= SomeWhereText %?

或者在后面的代码中使用完整的 html 布局来创建一个属性

```
protected string MyEntirePage {get;set;} 
```

并在后面的代码中构建字符串

```
MyEntirePage="<h1>Hello</h1><p>body here</p><p>the end</p>"; 
```

并通过将其写在 aspx 页面中

```
<%=MyEntirePage%> 
```

回复：“我明白你的意思，但我真的不喜欢 asp.net 控件。我更喜欢使用 html 控件并使用 js 自定义它们”

安装 NancyFx 或旧的（但仍然很棒）WCF Web Api 并使用类似 KnockoutJs、jQuery 或 Backbone 的东西来执行动态内容的 ajax 调用 = 根本不需要 asp.net Web 表单。耶。

# c# - 如何从 Web xml 文档中读取特定的标记值

> ID：11869153
> 
> 赞同：0
> 
> 时间：2012-08-08T16:38:36.587
> 
> 标签：c#, xml, web

我正在使用 C#。我有一个 XML 格式的网页（尽管您在实际 URL 中看不到该格式）。

例子：

..../api/rest/v1/items/ZPA

页面的一部分（我关心的部分看起来像这样）：

```
<Identifiers>
<Identifier name="v" value="zzzz"/>
<Identifier name="id" value="29382bb53cc73af32153276fe0a6cd6c"/>
<Identifier name="qn" value="wyz-zz1"/>
<Identifier name="index" value="1111"/>
<Identifier name="item" value="ZPA"/>
</Identifiers> 
```

我需要从网上阅读这个，并获取“id”值。我该怎么做呢？在这种情况下，id 值将是“zzzz”。我需要抓住它并将其存储在一个变量中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T16:55:55.540

```
XElement rootElement = XElement.Load(<url here>);
string targetValue =
  (string)rootElement.Elements("Identifier")
  .Single(e => (string)e.Attribute("name") == "v")
  .Attribute("value"); 
```

这假设您希望能够按名称定位标识符节点之一，并且您确定会有一个具有该名称的元素。如果不是这样，则 .Single 调用将在未找到该节点时抛出异常。

如果您需要使用凭据并想要使用 WebClient，那么您可以使用以下内容：（注意，我没有进行异常处理、检查流可用性或以其他方式处置/关闭流，只是如何获取的示例它“工作”）

```
string uri = "> url here! <";
System.Net.WebClient wc = new System.Net.WebClient();
StreamReader sr = new StreamReader(wc.OpenRead(uri));
string xml = sr.ReadToEnd();
XElement rootElement = XElement.Parse(xml);
string targetValue =
  (string)rootElement.Elements("Identifier")
  .Single(e => (string)e.Attribute("name") == "v")
  .Attribute("value"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T16:45:21.513

顺便说一句，我不知道你如何获取 xml 本身的确切情况，但是一旦你有了它，你可以执行以下操作来解析它。

```
 XmlDocument xDoc = new XmlDocument();
        string xmlstring = "<get the xml string somehow>";
        xDoc.LoadXml(xmlstring);
        //or
        xDoc.Load("filepath");
        XmlNode xnode = xDoc.SelectSingleNode("//Identifier[@name='v']");
        string value = xnode.Attributes["value"].Value; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T17:03:33.163

```
 XDocument document = XDocument.Load("http://Myserver.tld/api/rest/v1/items/ZPA");

            var idElement = document.Descendants("Identifiers").Elements("Identifier").Where(element => element.Attribute("name").Value == "id").FirstOrDefault();
            string idValue = idElement != null ? idElement.Attribute("value").Value : null; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T17:32:14.720

正如您所说，您需要使用 WebClient 作为凭据（根据您的其他回复）：

```
using (WebClient client = new WebClient())
{
    // Set credentials...   
    XmlDocument doc = new XmlDocument();
    doc.LoadXml(client.DownloadString("<YOUR_URL>"));
    // Select the Identifier node with a 'name' attribute having an 'id' value
    var node = doc.DocumentElement.SelectSingleNode("//Identifier[@name='id']");
    if (node != null && node.Attributes["value"] != null)
    {
        // Pick out the 'value' attribute's value
        var val = node.Attributes["value"].Value;
        // ...
    }
} 
```

我发现“传统的”.NET XML 比 LINQ to XML 更容易理解，但是 YMMV。

# azure - Azure ACS 会话生命周期

> ID：11869154
> 
> 赞同：1
> 
> 时间：2012-08-08T16:38:42.363
> 
> 标签：azure, wif, acs

假设我使用 ACS 登录我的网站。然后关闭浏览器，然后重新打开站点...它要求我再次登录。我想要它，这样在我第一次向 ACS 进行身份验证后，它不会要求我在一周左右的时间内登录。如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T19:03:27.857

您不对 ACS 进行身份验证。ACS 是您的应用程序和身份提供者（例如 LiveID、Google、Facebook 等）之间的中介。

如果您对这些网站中的任何一个设置“记住我”（并且如果他们支持它），那么您将不会被要求第二次输入用户名/密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T13:55:07.250

添加以下属性，这将使 cookie 具有更长的生命周期。

```
<wsFederation ... persistentCookiesOnPassiveRedirects="true">
    <CookieHandler ... persistentSessionLifetime="60"/>
    ...
</> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-24T15:23:46.447

请注意，[MSDN](http://msdn.microsoft.com/en-us/library/hh568663.aspx)中关于persistentSessionLifetime 的描述是不正确的。例如，如果您将其设置为 1.6:13:45.0，则 cookie 将在 30 小时（1 天 + 6 小时）13 分 45 秒 +/- <identityConfiguration> 的最大时钟偏移后过期。所以来自 MSDN 的描述应该像来自 TimeSpan 的描述：[-]d.hh:mm:ss.ff。我希望微软更改错误的描述。

# jquery - Jquery选中的选择器

> ID：11869157
> 
> 赞同：0
> 
> 时间：2012-08-08T16:38:51.230
> 
> 标签：jquery, selector, checked

如屏幕截图所示，我正在使用此 jquery 代码删除表行。

```
$(":checked").each(function() {
    $(this).parent().parent().remove()
}); 
```

![在此处输入图像描述](../Images/53483963fe36d1c19ae80febf76f2ecd.png)

当我选中标签中的复选框并单击删除时，这第一行也被删除。我使用此代码选择所有复选框 $(":checked") 在第一个复选框之后如何选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T16:40:26.487

像这样的东西应该工作：

[jsFiddle 示例](http://jsfiddle.net/6njSr/)

```
$(":checked").not(':eq(0)').each(function() {
    $(this).parent().parent().remove()
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T16:42:59.610

试试这个：

```
$(":checked").filter(":not(:eq(0))").each(function() {
    $(this).parent().parent().remove()
}); 
```

或者，如果您的表头在`thead`标签内，而您的正文在`tbody`标签内，您可以使用如下内容：

```
$("tbody tr :checked").each(function() {
    $(this).parent().parent().remove()
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T16:58:49.397

在第一个复选框上添加一个类，通过该类在单击事件上选中/取消选中所有复选框。

这样，所有其他复选框都将与第一个复选框区分开来。

并使用以下脚本。

```
$(function() {
    $('#test').click(function() {
        $(":checked").not('.maincheckbox').each(function() {
           $(this).parent().parent().remove()
        });
    });
}); 
```

这是演示：[jsfiddle](http://jsfiddle.net/JeEcC/%E2%80%8B)

# mysql - 联合表说明

> ID：11869163
> 
> 赞同：1
> 
> 时间：2012-08-08T16:39:33.663
> 
> 标签：mysql

在我之前的工作中，我能够使用以下语句轻松地从生产环境中复制数据：

从表名@UNIXPROD2 INSERT INTO 表名@UNIXTEST2

我目前工作的数据库不是以这种方式设置的。

所以，我对 MySQL 5.0+ 做了一些研究，因为这是我们为我们的一位客户使用的。我遇到了 FEDERATED 表，所以当我阅读时，我发现了这个（[在这里](http://dev.mysql.com/doc/refman/5.0/en/federated-limitations.html)）：

> 从 MySQL 5.0.46 开始，FEDERATED 执行批量插入处理，以便将多行批量发送到远程表。这提供了性能改进。此外，如果远程表是事务性的，它使远程存储引擎能够在发生错误时正确执行语句回滚。此功能具有以下限制：

对我来说，这表明 (A) 我**可以**将数据从我们的 prod 数据库复制到我们的 test 数据库；(B) 在联合表上执行的任何操作也会**在源表上处理**，这**不是**我想要做的。我有一些需要运行的脚本，我想针对实际的产品数据运行它，以确保在我在产品环境中使用它之前它可以正常工作。

我的问题：我的解释正确吗？

假设是，我试过：

*   select * from database.tablename@ipaddress，但收到一条错误消息，告诉我检查我正在运行的版本的 MySQL 手册，这就是我在点击“发布您的问题”后要做的事情。

我将不胜感激在这件事上的任何帮助。

**编辑：**经过进一步研究，我认为可能能够使用 OUTFILE 和 INFILE 来做我需要的事情，我将在 prod 表上使用 OUTFILE，然后在测试表上使用 INFILE 这些行。想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:59:59.817

**我的答案：**

**A** - 正确

**B** - 正确。

您可以将用户权限设置为只读，但在您的情况下，我不会使用联合表，而是将整个数据库转储到文件中，然后在另一台服务器上恢复它。最简单的方法 - 使用 MySql Workbench。

以及有关联合表的一些信息：

*   您需要仅在服务器 B 上启用联合
*   您可以通过在 B 上创建联合表来访问 A 上的视图
*   您可以在联合表上执行 INSERT UPDATE DELETE
*   如果您需要只读访问权限，您可以限制用户权限

**但！**你不能做任何聚合函数。在将被联合的视图上（例如 COUNT()、MAX()、UNION...）（您可以，但它会滞后）

*   请记住在您正在创建的联合表上设置 KEY。（否则它会滞后可怕。）
*   记得在视图上使用 ALGORITHM=MERGE
*   请记住授予对服务器 A 上 USERNAME（来自连接字符串）的访问权限

服务器 B 上的联合表示例：

```
delimiter $$
CREATE TABLE `schemaName`.`tableName`(
    `keyName` VARCHAR(10) NOT NULL,
    `key2Name` DATE DEFAULT '2012-01-01',
    KEY `keyName` (`keyName`) 
)
ENGINE=FEDERATED
DEFAULT CHARSET=utf8
CONNECTION='mysql://USERNAME:PASSWORD@IPADDRESS:PORTNUMBER/baseSchema/baseTable'
$$ 
```

服务器 A 上的视图：

```
CREATE
    ALGORITHM = MERGE
    DEFINER = `ANOTHERUSERNAME`@`%`
    SQL SECURITY DEFINER
VIEW `baseSchema`.`baseTable` AS
    SELECT
        ... AS `keyName`,
        ... AS `key2Name`
    FROM
        ... 
```

# git - 如何摆脱 git 存储库中的“合并分支...”自动消息

> ID：11869164
> 
> 赞同：4
> 
> 时间：2012-08-08T16:39:35.397
> 
> 标签：git, version-control, dvcs

我们的团队最近开始使用 Git。

我们正在做的主要工作流程很简单，（因为我们还没有接受过更复杂的命令和工作流程的忍者训练）：

1.  开发人员 A 提交新代码（很少提交）。
2.  开发人员 A 将更改推送到主存储库。
3.  开发人员 B 提交，尝试推送（收到一条消息说他必须拉）。
4.  开发人员 B 拉，然后推。

一段时间后，存储库日志如下所示：

![在此处输入图像描述](../Images/e726708b632ac332096a8f7867c1e5b4.png)

我想避免这种情况，因为它使日志几乎不可读，更不用说在某些情况下正在进行的“合并”不会更改任何文件（我看不到它所做的任何更改）。

我们在使用 Git 的方式上是否做错了什么？我们应该采取不同的做法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T16:44:08.470

您没有做错任何事情，这只是 Git 记录通过合并两组更改对存储库进行的更改。

如果您`git rebase`在推送之前或`git pull --rebase`拉取时使用，则合并提交将不会保留在历史记录中。有关更多信息，请参阅[http://arjanvandergaag.nl/blog/clarify-git-history-with-merge-commits.html](http://arjanvandergaag.nl/blog/clarify-git-history-with-merge-commits.html)。

# javascript - Javascript 数组随机丢失一个元素

> ID：11869167
> 
> 赞同：0
> 
> 时间：2012-08-08T16:39:43.413
> 
> 标签：javascript, jquery-ui, jstree

我遇到了一个非常奇怪的问题。我在我的一个站点上使用来自 JQueryUI 的 jsTree，并且我在不同的 .js 文件中使用了不同的实现。其中一个似乎工作，这非常令人困惑，因为它使用几乎相同的代码（只有变量名不同）到被破坏的实现。问题来自上下文菜单功能。我正在使用的代码如下：

```
$(document).ready(function () {
    if(typeof dryerList == 'undefined' || dryerList.length == 0) {
        var dryerList = [];
        $.ajax({
            url:'../TrackingApp/getGrainBins.php?t=234.23423452353',
            async: false,
            success: function(text) {
                try {
                    dryerList = $.parseJSON(text);
                } catch (e) {
                    alert('ERROR: ' + e);
                }

                if(dryerList.length == 0) {
                    alert('ERROR: No fleet data received.')
                }
            }
        });
    }

    $("#dryerListTree").jstree({
        plugins : ['json_data', 'ui', 'themes', 'contextmenu'],
        contextmenu: {items: customBinMenu},
        json_data : { data: binNodes }
    });

    $('#dryerListTree').bind("dblclick.jstree", function (event) {
        var node = $(event.target).closest("li");
        var id = node[0].id;

        for(i=0; i < dryerList.length; i++) {
            if(id == dryerList[i].id) {
                centerMap(dryerList[i].y, dryerList[i].x);
                break;
            }
        }
    });
});

function customBinMenu(node) {
    if ($(node).hasClass("folder")) {
        return;
    }

    var items = {
        centerItem: {
            label: "Locate",
            action: function () {
                // Centers map on selected bin
                var id = node[0].id;

                for(i=0; i < dryerList.length; i++) {
                    if(id == dryerList[i].id) {
                        centerMap(dryerList[i].y, dryerList[i].x);
                        break;
                    }
                }
            }
        },
        dashboardItem: {
            label: "Dashboard",
            action: function () {
                // Opens dryer info window over map
                var id = node[0].id;
                var dryerIndex = -1;

                for(i=0; i < dryerList.length; i++) {
                    if(id == dryerList[i].id) {
                        dryerIndex = i;
                        break;
                    }
                }
            }
        }
    };

return items;
} 
```

奇怪的是，双击处理程序工作得很好。当我到达 customBinMenu() 函数时，dryerList 数组就在那里，并且dryerList[0] 包含它应该包含的 5 个值中的 4 个 - 但不知何故，“id”元素已从该对象中删除。我已经研究了很长时间，但我无法弄清楚它如何在不丢失任何其他数据的情况下从对象中删除单个元素，尤其是当相同的代码适用于类似列表时。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T17:21:33.790

好的，我在你的问题中读到：*'并且dryerList [0]包含它应该的5个值中的4个-但不知何故'id'元素已从该对象中删除'*
所以*'元素'*和*'值'*我假设你意思是“属性”：准确地说是节点的“id”属性？？

我在你的代码中看到：`var id = node[0].id;`

那应该是：`var id = node[0].getAttribute("id");`

祝你好运！

**更新 1：**
好的，如果（根据您的评论）`var id = node[0].id;`（从节点 [0] 获取 id）没问题，那么`if(id == dryerList[i].id)`看起来是错误的，因为您只是（重新）将 id 定义为节点 [0] 的 id 的值。
实际上，我不会使用 'id' 作为 var-name（在这种情况下）。

那么，如果你这样做了：`var idc = node[0].getAttribute("id");`
然后：`if(idc === dryerList[i].getAttribute("id"))`

**更新5：**顺便说一句，您仍然有一些错误：

*   您忘记了一个分号来关闭警报：
    `if(dryerList.length == 0) { alert('ERROR: No fleet data received.') }`
*   您应该使用 '===' 与第 2 行和第 14 行的 '0' 进行比较
*   自然地，在现实生活中，您会在将函数 customBinMenu(node) 用于您的 document.ready 函数之前定义它。
    通过交换代码顺序修复。
*   对于这个 document.ready 函数也是如此，您在定义之前使用了 var dryList。
    修复者：`var dryerList = dryerList || []; if(dryerList.length === 0){//ajax & json code}`

您能否**确认**一下这个*现在是有效的 javascript的*[小提琴](http://jsfiddle.net/Rhvbs/3/)是否代表您预期*的基线代码*，这仍然会导致您在dryerList 的节点集合中“id”属性为“未定义”的问题（因为您发布的代码包含一些此 jsfiddle 中修复的简单错误，*不包括*更新 1 中提到的内容，因为您评论说这不是问题）？

 ***请问（既然你从 document.ready 开始），你为什么（仍然）检查dryerList 是否已经存在？
请问您是否可以用一些演示数据更新更正的小提琴供我们玩弄？***

# php - 向应用程序发送错误消息

> ID：11869170
> 
> 赞同：1
> 
> 时间：2012-08-08T16:40:03.203
> 
> 标签：php, objective-c, pdo

我正在处理我的第一个`.php`应用程序！我所做的只是将一些数据发布到数据库中：简单的东西。

现在，一切正常，我可以毫无问题地将数据发送到数据库。但是，我想向我的 Objective-c 应用程序返回一条错误消息。我有`try`and`catch`语句来确保我连接到数据库，如果出现错误，我想将它传达回我的应用程序。

以下是我到目前为止的一些内容：

```
 $dsn='mysql:dbname=******;host=******;';
        $user='******';
        $pass='******';

        try {

        /* obtain a database connection handle */
        $pdo = new PDO($dsn, $user, $pass);

        } 
        catch (PDOException $exception) {
            echo("Failed to connect to the  database. Error: " . $exception->getMessage());
        } 
```

另外，是否可以设置 PDO 尝试连接数据库的时间限制？

现在，当我故意放入无效的东西时，它会尝试连接很长时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T16:50:39.727

如果你试图做我认为的那样，那是行不通的。

如果要将错误消息传递给 Objective-C 应用程序，则需要通过管道将内容写入文件，或者将错误写入`STDERR`并从 Objective-C 应用程序中捕获。

你到底想完成什么？从 Objective-C 脚本调用 PHP 脚本？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T17:00:41.173

根据 PDO 文档，您可以将一系列驱动程序选项传递给它：

```
PDO::__construct() ( string $dsn [, string $username [, string $password [, array $driver_options ]]] ) 
```

在同一页面中，有一些驱动程序特定选项的示例，我相信您也可以使用 PDO::ATTR_TIMEOUT 和/或其中之一：

[http://www.php.net/manual/es/pdo.constants.php](http://www.php.net/manual/es/pdo.constants.php)

# javascript - 如何防止 C# webbrowser 中的脚本错误？

> ID：11869171
> 
> 赞同：0
> 
> 时间：2012-08-08T16:40:07.300
> 
> 标签：javascript

我在加载某些网站时遇到脚本错误。

请帮助我如何防止 C# WebBrowser 中的脚本错误。

这是我的代码：

```
try
{
    webBrowser1.Navigate(textBox1.Text);
    while (webBrowser1.ReadyState != WebBrowserReadyState.Complete)
    {
        Application.DoEvents();
    }

    MessageBox.Show("Loaded");
}
catch(Exception)
{
    MessageBox.Show("failed");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T16:47:42.350

把它写在你的代码中

```
 webBrowser1.ScriptErrorsSuppressed = true; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T16:52:32.933

要禁用脚本错误弹出，您需要转到（在 Internet Explorer 中）工具->Internet 选项，转到高级选项卡，然后在浏览中选择禁用脚本调试（其他），但是，问题可能与事实上，在 WebBrowser 控件中加载的每个站点都以 IE7 兼容模式呈现，要解决这个问题，您唯一能做的就是像这样的注册表黑客：[WebBrowser control to use IE9](https://stackoverflow.com/questions/5531452/webbrowser-control-to-use-ie9)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-22T20:59:10.423

将您的注册表更改为 2af8，即 devenv.exe 软件/Microsoft/internet explorer/main/featurecontrol/feature_Browser_emulation 的 IE 11

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-28T14:54:16.250

很容易看出这个错误是如何消除的。但是 Visual Studio 使用 Internet Explorer 和另一个 Web 浏览器编码是困难的。如果您查看版本，最后一个 Visual Studio 使用 IE 11 for WebBrowser 工具。

建议将 C++ GUI 用于每种编码之一： [https ://msdn.microsoft.com/en-us/library/60k1461a.aspx](https://msdn.microsoft.com/en-us/library/60k1461a.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-20T12:34:44.583

如果您使用 GUI（如在 Visual Studio 中）只需转到 Webbrowser 属性并设置“ScriptErrorsSuppressed”= true

# java - MongoDb + Java：没有 $db 与 DbRef 一起存储？

> ID：11869176
> 
> 赞同：1
> 
> 时间：2012-08-08T16:40:36.213
> 
> 标签：java, mongodb, mongo-java

使用 mongo-2.8.0.jar，我想获取另一个数据库的 db-reference。但是代码（Groovy）

```
def ref = new DBRef(db,"mails",id)
println ref 
```

打印类似：

```
{ "$ref" : "mails", "$id" : "50211d8e44ae1f34b4f4b3bd" } 
```

并且没有 $db 存储在数据库中！

如何强制 Java Mongo 驱动程序保存 $db ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T23:12:29.407

Java 驱动程序不支持可选的 $db 字段，如 MongoDB[文档](http://docs.mongodb.org/manual/applications/database-references/#dbref)中所述。并非所有驱动程序都支持 $db 字段。Java 驱动程序假定集合与存储引用的文档位于同一数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T17:50:44.583

DBRef 的 DB 对象存储为 DBRef 的父类 DBRefBase 的私有成员，并且可以通过 getDB() 访问。你只需要调用 ref.getDB()

# serialization - 使用网站的 OWL API 序列化 Ontology Reasoner 结果

> ID：11869181
> 
> 赞同：1
> 
> 时间：2012-08-08T16:41:00.813
> 
> 标签：serialization, ontology, owl

我想使用 OWL API 或直接使用 Hermit 推理器之类的东西对本体进行推理。这很容易（代码如下所示）。但是，我想缓存/存储/保存这些结果，这样我就不必每次都重新运行推理器。这就是在 VM 中发生的情况。我第一次这样称呼：

```
Set<OWLClass> classes = reasoner.getSubClasses(parent, false).getFlattened(); 
```

大约需要 20 秒（在本例中）。第二次不需要时间就可以生成相同的结果，因为它们已被缓存。这太棒了。但是，如果我退回我的虚拟机，我必须重新运行推理器（我有一些相当长的查询）或将输出保存到数据库以立即显示它们。

Reasoner 不可序列化（来自 Hermit 或通过 OWL API），我似乎没有明显的方法来重新创建 Reasoner 并将任何以前的结果加载到其中。每次都必须重新计算。

序列化本体很简单，但我看不到任何将结果重新加载到推理器中的方法，以使您不必再次进行相同的调用。

有什么我想念的吗？耶拿会是更好的选择吗？

```
OWLOntologyManager owlOntologyManager = OWLManager.createOWLOntologyManager(); 
File file = new File("resource/RDFData/release", "NEMOv2.85_GAFLP1_diffwave_data.rdf"); 
IRI iri = IRI.create(file); 
OWLDataFactory factory = owlOntologyManager.getOWLDataFactory(); 
OWLOntology owlOntology = owlOntologyManager.loadOntologyFromOntologyDocument(iri); 
Reasoner reasoner = new Reasoner(owlOntology); 
OWLClass parent = factory.getOWLClass(IRI.create(DataSet.NS + "#NEMO_0877000")); 
Set<OWLClass> classes = reasoner.getSubClasses(parent, false).getFlattened(); 

FileOutputStream fos = null; 
ObjectOutputStream out = null; 
try { 
    fos = new FileOutputStream("reasoner.ser"); 
    out = new ObjectOutputStream(fos); 
    out.writeObject(reasoner); 
    out.close(); 
} catch (IOException ex) { 
    ex.printStackTrace(); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T10:21:11.157

保存推断的本体（您从 InferredOntologyGenerator 获得）似乎是最好的方法。

据我了解，当您创建新的推理器时，推理器仍会检查一致性并对本体进行分类，但它更快，因为您已经明确了所有推理。

# php - PDO/PHP：获取数组和准备好的语句

> ID：11869192
> 
> 赞同：1
> 
> 时间：2012-08-08T16:41:31.393
> 
> 标签：php, arrays, pdo, prepared-statement, fetch

如您所见，我正在尝试在使用准备好的语句时从表中获取行。

```
$stmt = $conn->prepare("SELECT * FROM table ORDER BY date DESC LIMIT ?, 10");
$stmt->bindParam(1, $row_start, PDO::PARAM_INT);
$stmt->execute();

while($row = $stmt->fetch()) {
echo $row['title'];
echo $row['name'];
} 
```

它不回声任何东西。

编辑： var_dump 显示此日志：

> “您的 SQL 语法有错误；请查看与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 ''0', 10' 附近使用正确的语法”}

**编辑2**：这是我声明我的方式`$row_start`

```
$row_start = "0";
if (isset($_GET['page']) && is_numeric($_GET['page']) && $_GET['page'] != "0" )
{
$row_start = $_GET['page'];
if ($row_start == "1") {
$row_start = "0";
}else{
$row_start = ($row_start-1) * 10;
}                       
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T16:47:46.093

默认情况下，值类型将为字符串。

您可以将其设置为整数，如下所示：

```
$stmt->bindParam(1, $row_start, PDO::PARAM_INT); 
```

**更新：**

即使您将其强制为 INT，它仍将其作为字符串传递。

看看你的错误信息：

```
near ''0', 10' at line 1" } 
```

特别是0之后的结尾`'`，表示它是一个字符串。

```
0' 
```

**更新**

即使您传递了预期的 PDO 类型，也需要手动对变量进行类型转换：

```
$limit = (int) 1;
$limit2 = (int) 1;

$stmt = $pdo->prepare("SELECT * FROM Table LIMIT :limit, :offset");
$stmt->bindParam(":limit", $limit, PDO::PARAM_INT);
$stmt->bindParam(":offset", $limit2, PDO::PARAM_INT);
$stmt->execute(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T16:45:41.843

```
$conn->prepare("SELECT * FROM table ORDER BY date DESC LIMIT ?");
$stmt->execute(array(10)); 
```

# objective-c - 分配还是复制？

> ID：11869194
> 
> 赞同：2
> 
> 时间：2012-08-08T16:41:43.417
> 
> 标签：objective-c, reference, assign

`Rectangle`这是我课堂上的一种方法。一个`Rectangle`对象有一个来自类的`ivar`调用。一个对象有一个of和。这种方法可以设置还是引用内存中的同一点？`origin``XYPoint``XYPoint``ivar``float x``float y``origin``pointy`

```
-(void) setOrigin:(XYPoint *) pointy {
    origin.x = pointy.x;
    origin.y = pointy.y;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T16:45:20.030

你应该没问题，因为你传递的是浮点数，而不是对象。默认情况下，传递一个浮点数会传递值——而不是内存位置——除非你`&`在它前面放一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T17:34:03.470

是的，这完全没问题，因为您分配的是值而不是指针。:)

# session - 飞镖中有类似会话的东西吗？

> ID：11869198
> 
> 赞同：3
> 
> 时间：2012-08-08T16:42:05.903
> 
> 标签：session, authentication, dart

这似乎是一个愚蠢的问题，但我刚刚开始使用 dart，需要验证用户会话，类似于使用 $_SESSION 数组对 PHP 执行的操作......

所以我正在编写一个基本的服务器后端和一个前端，并且需要对通过 XMLHttpRequest 进来的一些请求进行身份验证。后端根据给定的前端是否经过身份验证发回 JSON。在某些情况下，前端可以更新 DOM，但*仅限*于经过身份验证的用户。

不知道我是否解释得很好......

任何意见，将不胜感激！！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T17:09:43.973

会话是不应该成为任何语言的一部分的高级功能。您可以通过实施类似的东西自己包含会话功能。

```
 Map<String, int> sessions = {'abcdef12345' : 42}; // exists in e.g. datastore and is managed by an authentication routine 

  String authenticationToken = 'abcdef12345'; // comes from the request
  if(sessions.containsKey(authenticationToken)) {
    print('User ${sessions[authenticationToken]} is at least authenticated but might not have the appropriate rights to perform this operation.');
  } else {
    print('Not authenticated.');
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T17:10:07.297

没有内置会话，但您可以查看最近的 Google API 库，以便 Dart 使用 oAuth：

[谷歌 API Dart 客户端](http://code.google.com/p/google-api-dart-client/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-06T14:36:24.190

包[shelf_auth为](https://pub.dartlang.org/packages/shelf_auth)[会话](https://pub.dartlang.org/packages/shelf)处理提供了一个很好的全自动解决方案，它的`JwtSessionHandler`实现

```
var authMiddleware = authenticate([new RandomAuthenticator()],
      new JwtSessionHandler('super app', 'shhh secret', testLookup)); 
```

# haskell - 在haskell中解析Karva符号

> ID：11869206
> 
> 赞同：3
> 
> 时间：2012-08-08T16:42:33.183
> 
> 标签：haskell, parsec, attoparsec

Karva 符号在基因表达编程中用于表示数学表达式。

见这里[http://www.gene-expression-programming.com/Tutorial002.asp](http://www.gene-expression-programming.com/Tutorial002.asp)

您可以通过读取基因并从左到右、从上到下填充节点来创建表达树。

因此，例如在 "+*+1+2*3456" 中使用运算符 (+, *) 和终端 (1,2,3,4,5,6) 将计算为 39。

我将如何使用 attoparsec（或 parsec）在 haskell 中执行此操作？

```
karvaParser :: Parser Int
karvaParser = ????????????

Prelude> parse karvaParser "+*+1+2*3456"
Done 39 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-02-22T22:47:59.000

（在评论中提到的问题的答案中，我已经证明这是一个线性时间算法。在[这个答案的](https://stackoverflow.com/a/21963347/1598537)[先前版本](https://stackoverflow.com/revisions/21961682/2)中有一个更长的更手动的解决方案。）

# 基因表达编程：Karva 表示法。

使用延续传递 monad, 可能有一个巧妙的解决方案`Cont`，但我没有想到它。这是该问题的一个相当干净的纯功能解决方案。我将借此机会命名一些好的通用递归方案。

## 计划：

1.  使用前一行的总数量将输入分成列表，每层一个。这是一个变形，即从种子 ( `[]`) 中生成一个列表，并且可以使用`unfoldr :: (b -> Maybe (a, b)) -> b -> [a]`或等效地编写，`unfoldr' :: (b -> (a, b)) -> (b -> Bool)-> b -> [a]`

    ```
    input:   "Q/a*+b-cbabaccbac"
    arities:  12022020000000000
    output:  ["Q","/","a*","+b","-c","ba"] 
    ```

2.  递归地用于`splitAt`将子级粘合在父级之下。这是一种变态，即将列表折叠为单个（树）值，可以使用`foldr :: (a -> b -> b) -> b -> [a] -> b`

3.  将变形和变形合二为一。这就是所谓的hylomorphism。[这些术语在开创性论文Functional Programming with Bananas, Lenses and Barbed wire](http://eprints.eemcs.utwente.nl/7281/01/db-utwente-40501F46.pdf)中介绍给 FP 社区。

## 代码

如果您不熟悉它，请`Data.Tree`提供.`data Tree a = Node {rootLabel :: a, subForest :: Forest a}``type Forest a = [Tree a]`

```
import Data.Tree
import Data.Tree.Pretty -- from the pretty-tree package

arity :: Char -> Int
arity c 
  | c `elem` "+*-/" = 2
  | c `elem` "Q" = 1
  | otherwise = 0

hylomorphism :: b -> (a -> b -> b) -> (c -> (a, c)) -> (c -> Bool) -> c -> b
hylomorphism base combine pullout stop seed = hylo seed where
 hylo s | stop s = base
        | otherwise = combine new (hylo s') 
          where (new,s') = pullout s 
```

为了抽出一个关卡，我们使用上一个关卡的总arity 来找到在哪里拆分这个新关卡，然后传递这个关卡的总arity 以备下次使用：

```
pullLevel :: (Int,String) -> (String,(Int,String))
pullLevel (n,cs) = (level,(total, cs')) where
                   (level,        cs') = splitAt n cs
                   total = sum $ map arity level 
```

要将关卡（作为字符串）与下面的关卡（已经是森林）结合起来，我们只需提取每个角色需要的树的数量。

```
combineLevel :: String -> Forest Char -> Forest Char
combineLevel "" [] = []
combineLevel (c:cs) levelBelow = Node c subforest : combineLevel cs theRest 
      where (subforest,theRest) = splitAt (arity c) levelBelow 
```

现在我们可以使用hylomorphism 解析Karva。请注意，我们使用来自 的字符串之外的全部数量来播种它`1`，因为在根级别只有一个节点。我使用了这个`head`函数，因为它`1`导致顶层是一个包含一棵树的列表。

```
karvaToTree :: String -> Tree Char
karvaToTree cs = let
  zero (n,_) = n == 0          
    in head $ hylomorphism [] combineLevel pullLevel zero (1,cs) 
```

## 演示

让我们画出结果（因为 Tree 的语法如此之多，以至于很难阅读输出！）。你必须`cabal install pretty-tree`得到`Data.Tree.Pretty`。

```
see :: Tree Char -> IO ()
see = putStrLn.drawVerticalTree.fmap (:"") 
```

```
ghci> arity '+'
2

ghci> pullLevel (3,"+a*bc/acb")
("+a*",(4,"bc/acb"))

ghci> combineLevel "a*" [Node 'b' [],Node 'c' []]
[Node {rootLabel = 'a', subForest = []},Node {rootLabel = '*', subForest = [Node {rootLabel = 'b', subForest = []},Node {rootLabel = 'c', subForest = []}]}]

ghci> see . Node '.' $ combineLevel "a*" [Node 'b' [],Node 'c' []]
   .   
   |   
 ---   
/   \  
a   *  
    |  
    -- 
   /  \
   b  c

ghci> karvaToTree "Q/a*+b-cbabaccbac"
Node {rootLabel = 'Q', subForest = [Node {rootLabel = '/', subForest = [Node {rootLabel = 'a', subForest = []},Node {rootLabel = '*', subForest = [Node {rootLabel = '+', subForest = [Node {rootLabel = '-', subForest = [Node {rootLabel = 'b', subForest = []},Node {rootLabel = 'a', subForest = []}]},Node {rootLabel = 'c', subForest = []}]},Node {rootLabel = 'b', subForest = []}]}]}]} 
```

![http://www.gepsoft.com/gxpt4kb/Chapter06/section3/pt02.gif](../Images/65975eaedb9b0bd91c64f93e29f3e98a.png) 当我们看到它时，它匹配`see`：

```
ghci> see $ karvaToTree "Q/a*+b-cbabaccbac"
      Q      
      |      
      /      
      |      
 ------      
/      \     
a      *     
       |     
       ----- 
      /     \
      +     b
      |      
     ----    
    /    \   
    -    c   
    |        
    --       
   /  \      
   b  a 
```

## 评估

一旦有了树，就很容易将其转换为其他东西。让我们用 Karva 表示法计算一个表达式：

```
action :: (Read num,Floating num) => Char -> [num] -> num
action c = case c of
   'Q' -> sqrt.head
   '+' -> sum
   '*' -> product
   '-' -> \[a,b] -> a - b
   '/' -> \[a,b] -> a / b
   v -> const (read (v:""))

eval :: (Read num,Floating num)  => Tree Char -> num
eval (Node c subforest) = action c (map eval subforest) 
```

```
ghci> see $ karvaToTree "Q+-*826/12"
      Q      
      |      
      +      
      |      
  -------    
 /       \   
 -       *   
 |       |   
 --    ---   
/  \  /   \  
8  2  6   /  
          |  
          -- 
         /  \
         1  2

ghci> eval $ karvaToTree "Q+-*826/12"
3.0 
```

# svn - AspDotNetStorefront 源的 SVN 分支/合并过程

> ID：11869211
> 
> 赞同：0
> 
> 时间：2012-08-08T16:42:49.500
> 
> 标签：svn, merge, branch, customization, aspdotnetstorefront

想知道人们是否有关于如何管理分支和合并的建议，以了解我们“想要”如何处理对 AspDotNetStorefront 使用的自定义。基本上，我们偶尔会获得 AspDotNetStorefront 的更新，并且需要在两个级别应用自定义：全局自定义和客户端自定义。假设我们有以下作为一个简单的例子：

*   AspDotNetStorefront 在 SVN 中设置
*   AspDotNetStorefront 分支到 AspDotNetStorefront_v1.0
*   AspDotNetStorefront_v1.0 分支到 AspDotNetStorefront_v1.0_Cust
*   AspDotNetStorefront_v1.0_Cust 被修改并提交
*   AspDotNetStorefront_v1.0_Cust 分支到 ClientA_v1.0，在此进行其他更改
*   AspDotNetStorefront_v1.0_Cust 分支到 ClientB_v1.0，在此处进行了其他更改

这基本上就是我们今天所处的位置。现在，如果 AspDotNetStorefront 2.0 版问世，我们不知道该怎么办。我想做以下事情，但我不确定：

*   将 AspDotNetStorefront 分支到 AspDotNetStorefront_v2.0，覆盖新的源代码，提交
*   将 AspDotNetStorefront_v2.0 分支到 AspDotNetStorefront_v2.0_Cust
*   将 AspDotNetStorefront_v1.0_Cust 合并到 AspDotNetStorefront_v2.0_Cust、测试、调整、提交
*   将 AspDotNetStorefront_v2.0_Cust 分支到 ClientA_v2.0
*   将 ClientA_v1.0 合并到 ClientA_v2.0，测试调整，提交
*   对 ClientB 重复最后两个步骤

我在这里完全脱离基地吗？我们第一次尝试将制造商代码集成到实际修改制造商代码的 SVN 结构中（而不是仅仅用螺栓固定或插入）。对文档的任何引用都会有所帮助。另外，我可能只是不知道这种类型的模型的术语来搜索它，所以如果有这种类型的活动的术语也会有帮助。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T17:57:47.570

你今天的样子……

```
AspDotNetStorefront 
        --->  AspDotNetStorefront_v1.0
                     --->  AspDotNetStorefront_v1.0_Cust  [*]
                                        ---> ClientA_v1.0 [*]
                                        ---> ClientB_v1.0 [*] 
```

我假设您想保留`AspDotNetStorefront_v2.0`,`Cust`和`Client*`分支；这似乎是一个非常难以管理的情况......答案取决于事实

`AspDotNetStorefront_v1.0`从to的变化幅度是更多还是和分支`AspDotNetStorefront_v2.0`之间的增量？`Cust``Client*`

**您应该选择修补最少的工作，因为这样合并会更容易，并且可以避免回归问题。**

```
AspDotNetStorefront 
        --->  AspDotNetStorefront_v1.0 + (Upgrade Code to v2.0)
                     --->  AspDotNetStorefront_v1.0_Cust + Upgrade Code to v2.0
                                        ---> ClientA_v1.0 + Upgrade Code to v2.0
                                        ---> ClientB_v1.0 + Upgrade Code to v2.0 
```

由于您似乎需要保持所有这些分支完好无损，所以这就是您最终会得到的结构。

# java - 为什么我的按钮没有移动到另一个屏幕？

> ID：11869212
> 
> 赞同：0
> 
> 时间：2012-08-08T16:42:49.530
> 
> 标签：java, android, tabs, screen

我是这里的新手，刚刚在我的 android 应用程序上创建了多个选项卡屏幕，但是当我尝试在多个选项卡屏幕之一上创建一个按钮时，按下按钮时没有移动到我创建的另一个屏幕。我想知道是否需要在我的多标签屏幕中添加任何代码以使按钮起作用。这是我的多个选项卡的 java 代码：

```
 public class Investment extends TabActivity {
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_investment);

    TabHost tabHost = getTabHost();

    // Tab for Homepage
    TabSpec photospec = tabHost.newTabSpec("Home");
    // setting Title and Icon for the Tab
    photospec.setIndicator("Home", getResources().getDrawable(R.drawable.homeicon));
    Intent photosIntent = new Intent(this, Home.class);
    photospec.setContent(photosIntent);

    // Tab for Riskassessment
    TabSpec songspec = tabHost.newTabSpec("Risk");
    songspec.setIndicator("Risk", getResources().getDrawable(R.drawable.riskicon));
    Intent songsIntent = new Intent(this, RiskAssessment.class);
    songspec.setContent(songsIntent);

    // Tab for News
    TabSpec videospec = tabHost.newTabSpec("News");
    videospec.setIndicator("News", getResources().getDrawable(R.drawable.newsicon));
    Intent videosIntent = new Intent(this, News.class);
    videospec.setContent(videosIntent);

 // Tab for Tips
    TabSpec tipsspec = tabHost.newTabSpec("Tips");
    tipsspec.setIndicator("Tips", getResources().getDrawable(R.drawable.investmenttipsicon));
    Intent tipsIntent = new Intent(this, InvestmentTips.class);
    tipsspec.setContent(tipsIntent);

 // Tab for about us
    TabSpec aboutusspec = tabHost.newTabSpec("About Us");
    aboutusspec.setIndicator("About Us", getResources().getDrawable(R.drawable.aboutusicon));
    Intent aboutusIntent = new Intent(this, AboutUs.class);
    aboutusspec.setContent(aboutusIntent);

    // Adding all TabSpec to TabHost
    tabHost.addTab(photospec); // Adding  tab
    tabHost.addTab(songspec); 
    tabHost.addTab(videospec); 
    tabHost.addTab(tipsspec); 
    tabHost.addTab(aboutusspec); 

} 
```

我的按钮代码

```
 public class ButtonSelection extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.home);

    Button b = (Button) findViewById(R.id.buttonequity);
    b.setOnClickListener(new View.OnClickListener() {
       public void onClick(View arg0) {
       Intent i = new Intent(ButtonSelection.this, EquitySelection.class);
       startActivity(i);
       }
    });
    }
    } 
```

当我按下按钮时屏幕的代码

```
 public class EquitySelection extends Activity {

 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.equitydescription);
     }
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T16:54:00.450

经过长时间与这个问题的斗争，我已经能够找到在使用基于活动的选项卡时切换选项卡的解决方案。

在创建 tabhost 的父活动类中，我实现了如下方法：

```
public void switchTab(int tab){
        tabHost.setCurrentTab(tab); 
```

}

在我希望能够在内部切换到另一个选项卡的选项卡内部，我创建了以下方法：

```
public void switchTabInActivity(int indexTabToSwitchTo){
        MintTrack ParentActivity;
        ParentActivity = (MintTrack) this.getParent();
        ParentActivity.switchTab(indexTabToSwitchTo); 
```

}

另请参阅此[示例](http://code.google.com/p/minttrack/source/browse/branches/MintTrackV2/MintTrack/src/com/ponyinc/minttrack/tabs/AuditActivity.java)

# .htaccess - htaccess 重写服务器错误

> ID：11869222
> 
> 赞同：0
> 
> 时间：2012-08-08T16:43:19.280
> 
> 标签：.htaccess, xampp

大家好，在我的本地主机上尝试使用 XAMPP 的 .htaccess，我已经检查了 phpinfo() 是否加载了 mod_rewrite 并且它是，所以这不应该是问题..

这是我的 .htaccess

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-l

RewriteRule ^(.+)$ index.php?url=$1 [QSA, L] 
```

这是它在每一页上给出的错误

```
SERVER ERROR

The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there was an error in a CGI script. 
```

我的 htaccess 或 XAMPP 有什么问题？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T21:09:45.853

$url 为空，请确保您回显！

# python - 为什么 PDBParser 无法读取所有 fpocket 输出文件？

> ID：11869226
> 
> 赞同：0
> 
> 时间：2012-08-08T16:43:43.653
> 
> 标签：python, biopython

我正在使用 fpocket 在我的 PDB 蛋白质结构中找到口袋。输出是一个有序的 pockets 列表`pocket0_atm.pdb`，`pocket1_atm.pdb`等等。一些文件被顺利读入`Bio.PDB.PDBParser`。其他人因“AssertionError”而失败。

尝试将有效的 .pdb 文件与失败的文件进行比较并没有显示出一致的差异。有任何想法吗？

这是给我带来麻烦的相关代码部分：

```
def get_pdb_limits(pdb_file):
    ''' Return the X,Y,Z size limits of a PDB file. '''
    p = PDB.PDBParser()
    structure = p.get_structure('test', pdb_file) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-17T11:34:07.443

根据[fpocket 文档](http://fpocket.sourceforge.net/manual_fpocket2.pdf)，pocketx_atm.pdb 文件仅包含与用于提取口袋的球体接触的原子。换句话说，口袋文件不包含完整的残留物，这可能是解析问题的根源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T12:51:45.067

如果没有堆栈跟踪，就不可能真正知道您的问题是什么。但是，`PDB.PDBParser`它是为了容忍和补偿 PDB 文件中的一些错误而构建的。尝试设置`PERMISSIVE`为 True，如下所示，看看是否仍然出现错误。

```
p = PDB.PDBParser(PERMISSIVE=1)
p.get_structure("pdb_id", pdb_file) 
```

# macos - 将 svn 工作副本更改为另一个目录

> ID：11869228
> 
> 赞同：0
> 
> 时间：2012-08-08T16:43:56.040
> 
> 标签：macos, svn

问：所以我的 Mac 上有本地 svn 设置。我想在没有'svn checkout'的情况下将存储库的工作副本更改为另一个文件夹，以便我可以提交一些当前不在工作副本中的代码。

'svn checkout' 的问题 我不想使用 'svn checkout' 的原因是 b/c 我不想将代码覆盖到指定用于工作副本的新文件夹中，因为当我将新代码移动到新的指定文件夹并执行 svn 提交，我收到一个错误，基于 svn 附加到您提交的代码的 .svn 隐藏文件夹。

我想要完成什么？我让自己陷入了这个混乱，b / c我试图将我的代码的多个版本添加到不同的文件夹中，以便我可以将它们相互比较。

谢谢，乔恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T17:10:58.980

您可以使用“svn copy”将一个或多个文件复制到工作副本或存储库中。更多细节： http: [//www.visualsvn.com/support/svnbook/ref/svn/c/copy/](http://www.visualsvn.com/support/svnbook/ref/svn/c/copy/)

我希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T17:18:16.277

当您执行 svn checkout 时，它不会删除和覆盖现有文件 - 它会合并它们（尝试一下 - 制作目标目录的备份副本，然后将 svn checkout 放入其中）。

但是，最简单的方法是将 svn checkout 放入一个干净的目录，然后将文件复制到 checkout 的顶部。如果您需要为结帐保留目录名称，请将当前目录重命名为其他目录。

# bash - 如何设置 $？在 PS1 调用的函数中？

> ID：11869229
> 
> 赞同：6
> 
> 时间：2012-08-08T16:43:56.807
> 
> 标签：bash, command-prompt, .bash-profile, ps1

我目前在 bash 中有一个提示，它调用一个函数来输出最后一个命令运行的返回码（如果非零）：

```
exit_code_prompt()
{
    local exit_code=$?
    if [ $exit_code -ne 0 ]
    then
        tput setaf 1
        printf "%s" $exit_code
        tput sgr0
    fi
}

PS1='$(exit_code_prompt)\$ ' 
```

这工作得很好，除了`$?`除非运行另一个命令否则不会重置：

```
$ echo "works"
works
$ command_not_found
bash: command_not_found: command not found
127$ 
127$ 
127$ 
127$ echo "works"
works
$ 
```

`$?`是否可以在第一次运行时重置/取消设置父 shell 的值，以便`exit_code_prompt()`它不会继续重复提示中的值？

非常感谢，史蒂夫。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T17:02:10.033

问题是，如果您不发出另一个命令，`$?`则不会改变。因此，当您的提示被重新评估时，它会正确发出`127`. 除了在提示符下手动键入另一个命令外，没有真正的解决方法。

编辑：其实我撒谎了，总有办法存储状态，所以你可以存储的值`$?`并检查它是否*改变了*，如果有则清除提示。但是由于您在子外壳中，因此您的选择非常有限：您必须使用文件或同样脏的东西来存储值。

# sql - 仅针对具有来自第三个表的 var 值的记录连接两个表的有效方法

> ID：11869231
> 
> 赞同：0
> 
> 时间：2012-08-08T16:43:59.097
> 
> 标签：sql, sql-server, sql-server-2008, plsql

我有两张大桌子：

```
A: (ID1,VAR1);
B: (ID1,ID2,VAR2) 
```

第三张表：

```
C: (ID2...) 
```

我只想为具有 C 值的记录合并 A 和 B。

以下是我使用“IN”的想法。有没有更有效的方法来做到这一点？有时我发现“IN”不太好用。

非常感谢！

```
select  A.VAR1,B.VAR2
from A 
INNER JOIN 
(
  select ID1,VAR2
  from B
  where ID2 in
                (select distinct ID2
                 from C
                )
) D
on A.ID1=D.ID1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T16:46:44.627

```
select A.VAR1, B.VAR2 
from A 
INNER JOIN B on A.ID1 = B.ID1 
INNER JOIN C on B.ID2 = C.ID2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T16:48:51.700

无需使用子查询，您只需`JOIN`对所有表执行 a ：

```
SELECT A.VAR1, B.VAR2
FROM A 
INNER JOIN B
    ON A.id1 = b.id1
INNER join
(
    SELECT DISTINCT id2
    FROM c
) c1
    ON b.id2 = c1.id2 
```

# php - 无法在实时服务器中发布富文本编辑器内容？

> ID：11869233
> 
> 赞同：2
> 
> 时间：2012-08-08T16:44:03.583
> 
> 标签：php, javascript, ajax, ckeditor

我正在使用 ck editor ，我可以成功地将 ckeditor 内容发布到我的本地服务器中。但是我的实时服务器被拒绝发布富文本 [html] 内容？请告诉我问题？php.ini 中是否有任何设置？实际上我的服务器是共享托管服务器，安全模式为 ON，当前设置文件不可用，只有在编辑器内没有 html 标签时，我才能发布内容。示例：我可以发布内容“我爱你”，但我不能发布内容

```
'<p><b>I LOVE YOU</b></p>. 
```

请告诉我是什么问题？我也尝试使用 ajax ，但别无选择，请参阅下面的我的 ajax 代码，

```
function fajax(base){

    var ed = editor.getData();
    var url = "certificate/save_text"
    $.ajax({
            type: "POST",
            data: "data="+ed,
            url : url,
            success: function(msg){
                alert(msg);
            }
    });
} 
```

如果 'ed' 的值是普通文本，那么我的代码是成功的，但如果值是任何 html ，那么它不返回任何内容而不显示任何错误，请告诉我确切的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T18:40:46.487

我们最近在 tinyMCE 编辑器上遇到了类似的问题。使用 ajax 发送数据时，尽量不要自己将 POST-data 组装成字符串。让 jquery 来代替它：

```
var ed = editor.getData();
var postData = {"data" : ed};
$.ajax({
            type: "POST",
            data: postData,
            url : url,
            success: function(msg){
                alert(msg);
            }
    }); 
```

这为我们解决了问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T10:48:36.950

这是我的最终代码，

请参阅下面的代码，-

```
function fajax(status,base){
            var ed = editor.getData();
            cId = $("#eventD").val();
            var edd = encodeURI(ed); 
            var postData = {"data" : edd};
      var url = base+"certificate/save_text/"+cId+"/"+status; 
            $.ajax({
                type: "POST",
                data: postData,//"data="+ed,
                url : url,
                success: function(msg){
                                alert(msg); }); } 
```

# ios6 - 将现有应用升级到 iOS 6

> ID：11869240
> 
> 赞同：0
> 
> 时间：2012-08-08T16:44:20.390
> 
> 标签：ios6

在将我现有的一个应用程序编译/升级到 iOS 6 beta 4 时，它在设备上崩溃，但是使用模拟器它工作正常。如果有人以前尝试过，那将非常有帮助。

这是崩溃日志：

```
Incident Identifier: CC4112AC-DB73-489B-A64D-C946B6B25422
CrashReporter Key:   ea874c1da9152b46ac359400c82fdc7f548b1778
Hardware Model:      iPhone4,1
Process:         AppCatalogue [2248]
Path:            /var/mobile/Applications/9E3C6AAF-7341-42AF-B1DE-875F3B7A5555/AppCatalogue.app/AppCatalogue
Identifier:      AppCatalogue
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2012-08-08 11:03:46.526 -0500
OS Version:      iOS 6.0 (10A5376e)
Report Version:  104

Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x0000000000000000, 0x0000000000000000
Crashed Thread:  0

Last Exception Backtrace:
0   CoreFoundation                  0x3674d6be 0x3668b000 + 796350
1   libobjc.A.dylib                 0x389c697a 0x389be000 + 35194
2   CoreFoundation                  0x36751222 0x3668b000 + 811554
3   CoreFoundation                  0x3674f94c 0x3668b000 + 805196
4   CoreFoundation                  0x366a7464 0x3668b000 + 115812
5   AppCatalogue                    0x0000a2aa 0x1000 + 37546
6   AppCatalogue                    0x0000aa12 0x1000 + 39442
7   UIKit                           0x38167b7c 0x38119000 + 322428
8   UIKit                           0x3814c936 0x38119000 + 211254
9   UIKit                           0x38163e12 0x38119000 + 306706
10  UIKit                           0x3811ff26 0x38119000 + 28454
11  QuartzCore                      0x3546de96 0x3546a000 + 16022
12  QuartzCore                      0x3546da34 0x3546a000 + 14900
13  QuartzCore                      0x3546e970 0x3546a000 + 18800
14  QuartzCore                      0x3546e34e 0x3546a000 + 17230
15  QuartzCore                      0x3546e15c 0x3546a000 + 16732
16  QuartzCore                      0x3546dfbc 0x3546a000 + 16316
17  CoreFoundation                  0x36722ae8 0x3668b000 + 621288
18  CoreFoundation                  0x36720ddc 0x3668b000 + 613852
19  CoreFoundation                  0x36721132 0x3668b000 + 614706
20  CoreFoundation                  0x36694398 0x3668b000 + 37784
21  CoreFoundation                  0x36694224 0x3668b000 + 37412
22  GraphicsServices                0x35049316 0x35044000 + 21270
23  UIKit                           0x381708f4 0x38119000 + 358644
24  AppCatalogue                    0x0003052a 0x1000 + 193834
25  AppCatalogue                    0x00002e54 0x1000 + 7764 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T05:36:29.997

尝试使用 xCode 4.5 GM 构建/运行。在我的情况下解决了一些问题。

# performance - Windows AZURE I/O 测试临时驱动器 D：与附加驱动器

> ID：11869243
> 
> 赞同：3
> 
> 时间：2012-08-08T16:44:27.800
> 
> 标签：performance, azure, io, virtual-machine

我正在测试 Windows Azure VM 驱动器上的驱动器速度。在我看来，临时驱动器 d 和附加驱动器之间的速度差异很大！

我的测试正在运行 iometer 程序

最大磁盘大小 20 Gigs 16 未完成 I/O 的 4k100% 读取，0% 随机

60秒运行时间

结果： 临时驱动器 D：每秒总 I/O 60978.94 驱动器 E（1 个 30 gig 驱动器）：910.51 驱动器 F（4 个 30 gig 驱动器条带在一起）：899.6

这是正常的吗？

我真正注意到差异的原因在于 SQL。我基本上尝试使用 sql2000 2 gigs ram 和 scsi 驱动器从我的旧物理服务器迁移，这比 windows azure large image 更快。更快，因为我可以以大约两倍的速度运行查询。

我在 os 中关闭了 os 驱动器上的磁盘缓存。

有人可以向我解释发生了什么吗？我是在比较苹果和橙子吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T18:15:05.533

是的，这很正常。临时磁盘是节点上的物理磁盘（这里只有磁盘 I/O），而 E/F/... 磁盘是持久磁盘。这意味着它们实际上是 blob 存储中的页 blob，您还需要考虑网络 I/O。

为了提高 I/O 和吞吐量，您可能会考虑禁用这些磁盘的缓存（这会产生更多的事务成本）。在 Windows Azure 存储博客上阅读有关此内容的更多信息：[探索 Windows Azure 驱动器、磁盘和映像](http://blogs.msdn.com/b/windowsazurestorage/archive/2012/06/28/exploring-windows-azure-drives-disks-and-images.aspx)

# c - 预处理器包括，何时使用 <> 或 ""

> ID：11869248
> 
> 赞同：2
> 
> 时间：2012-08-08T16:45:01.920
> 
> 标签：c, c-preprocessor

> **可能重复：**
> [#include <文件名> 和#include “文件名”有什么区别？](https://stackoverflow.com/questions/21593/what-is-the-difference-between-include-filename-and-include-filename)

我在 C 学习中遇到了一些问题，我快速搜索了这个网站上的问题，但找不到这个问题的答案。这可能有点愚蠢，但就是这样。

我一直在关注一些 c 教程，整本书的所有内容都是这样完成的：

```
#include <stdio.h>
#include <string.h> etc. etc. 
```

然而，突然之间，他们丢下了这个炸弹：

```
#include <stdio.h>
#include "structSize.h" 
```

完全没有解释为什么`"..."`要使用，我完全傻眼了。任何人都可以解释一下它们之间的区别`<...>`以及`"..."`何时使用它们。

谢谢您的帮助。
问候，
迈克

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T16:46:58.530

通常，您使用`#include "..."`项目中的文件和`#include <...>`“系统”包含文件。

区别在于预处理器根据要包含的名称搜索文件的方式和位置。 `""`语法通常会首先搜索当前文件的目录。但是，实际的搜索机制是特定于编译器的，因此您需要查看 C 编译器的文档以获取有关每个选项使用的实际路径的详细信息。

有关详细信息，请参阅[包含来自 GCC 的语法](http://gcc.gnu.org/onlinedocs/cpp/Include-Syntax.html)以获取一种实现的示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T16:50:54.380

随着`""`文件将在包含某些内容的文件所在的目录中搜索，如果找不到包含，编译器将在标准包含目录中查找（它取决于编译器在哪个文件夹中）。

使用`<>`编译器将直接查看包含目录，而不查看任何其他目录。

# kernel - 在内核空间中使用 msgctl() 函数

> ID：11869250
> 
> 赞同：1
> 
> 时间：2012-08-08T16:45:10.783
> 
> 标签：kernel

为了从 SysV 队列的 ID 中获取消息的数量，我在用户空间中使用了函数 msgctl() 没有任何问题（如下所示）：

```
 main(int argc, char *argv[])
    {
      int qid;
      struct msqid_ds qstatus;

      qid=(int)atoi(argv[1]);

      if(msgctl(qid,IPC_STAT,&qstatus)<0){
    perror("msgctl failed");
    exit(1);
      }

      printf("There are %d messages for queue with ID %d\n",qstatus.msg_qnum,qid);
    } 
```

现在，我需要在内核空间中做同样的事情，但是下面的代码不起作用（函数返回 -1）：

```
 int get_num_from_id(int qid)
    {
    struct msqid_ds qstatus;

    sys_msgctl(qid,IPC_STAT,&qstatus);

    return qstatus.msg_qnum;
    } 
```

有人可以帮助我理解我做错了什么......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T18:46:48.557

我已经解决了问题，是“msg.c”的“sys_msgctl()”函数中的“copy_to_user()”指令：显然不能在内核空间正常工作，因为用户空间寻址不同；我通过创建另一个基于“sys_msgctl()”的函数绕过了这个问题，该函数在输入中只接受“msqid”并返回元素的数量......正是我所需要的！

同样感谢大家

# php - jqplot不评估字符串

> ID：11869251
> 
> 赞同：0
> 
> 时间：2012-08-08T16:45:11.407
> 
> 标签：php, jquery, jqplot

我正在使用 jqplot 并使用以下 PHP 代码构造了一个数组

```
if($fiveRes){
    $lastNum = mysql_num_rows($fiveRes);

    $testarray = array();

    while($row = mysql_fetch_array($fiveRes, MYSQL_ASSOC)) {
        $testarray[] = array($row['GameDate'],  floatval($row['WKP']));
    }

    echo json_encode($testarray);

} 
```

此代码输出我需要插入到 jqplot 函数中的正确代码。这是上面代码生成的数组：

```
[["2011-12-24",0],["2011-12-19",14],["2011-12-08",22],["2011-12-04",14],["2011-11-27",12]] 
```

所以目前我正在将此数组打印到屏幕上，然后使用 jQuery .text() 来捕获字符串并将其放入变量中。我可以回显分配给数组字符串的 var 并且它可以正常工作，但是当我将它传递给 jqplot 函数时它什么也不做。

```
var p1array = $('.col.first .parray').text();

alert(p1array); //Alerts the correct array formatted like above.

    var plot1 = $.jqplot('jqplot0', [p1array], {
          title:'Last 5 Fantasy Points',
          axes:{
            xaxis:{
              renderer:$.jqplot.DateAxisRenderer,
              tickOptions:{
                formatString:'%b&nbsp;%#d'
              } 
            },
            yaxis:{
              tickOptions:{
                formatString:''
                }
            }
          },
          highlighter: {
            show: true,
            sizeAdjust: 7.5
          },
          cursor: {
            show: false
          }
      }); 
```

更复杂的是，如果我复制 PHP 生成的字符串并将其硬编码到 JS 中的变量中，它就可以工作。为什么 jqplot 插件不会评估我使用`$(this).text();`.

这是我正在建模的 jQplot 示例：[http ://www.jqplot.com/tests/cursor-highlighter.php](http://www.jqplot.com/tests/cursor-highlighter.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T16:18:45.410

使用这种方法帮助我解决了这个问题。我没有使用 jQuery 访问打印的变量，而是在我的 PHP 页面底部插入了一点 javascript 来捕获 PHP 中的局部变量，然后使用它传递给 jQplot 函数。

[将 PHP 字符串传递给 JavaScript 变量（并转义换行符）](https://stackoverflow.com/questions/168214/pass-a-php-string-to-a-javascript-variable-including-escaping-newlines)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T16:43:08.227

直接使用 [p1array] 不带大括号并尝试...它应该像 p1array 一样工作

# java - 收到不完整的 UDP 数据包

> ID：11869261
> 
> 赞同：1
> 
> 时间：2012-08-08T16:45:37.750
> 
> 标签：java, android, sockets, udp, datagram

我在 Android 中使用 UDP 接收数据时遇到了一个非常奇怪的问题。我正在编写一个应用程序来控制来自 android 设备的 wifi 模块。我能够成功地将数据发送到这个远程 wifi 设备。但我无法从这个 wifi 设备接收“完整”数据包。

我在android中的代码是：

```
public static void receivePacket(int receiverPort, Context context) {
    DatagramSocket socket = null;
    String text = "";
    try {           
        byte[] message = new byte[1500];
        DatagramPacket packet = new DatagramPacket(message, message.length);
        socket = new DatagramSocket(receiverPort);          
        //socket.setSoTimeout(5000);
        for (int i = 0; i < 12; i++) {
            socket.receive(packet);
            text += new String(message, 0, packet.getLength()) + "\n";
        }
        socket.close();
        Log.d("Received Message", text);
    } catch (Exception e) {
        Log.e("UDP", "S: Error", e);
    } finally {
        if(null != socket){
            socket.close();
        }
    }
} 
```

因此，如果我期待数据“$BEG1;$PID2;$PIP192.168.15.245;$PPN80;$DAT987654321;$END1;” 我只得到“$BEG1;$PID2;$PIP192.168.15.245;$PPN80;$DAT98”

我尝试使用 UDP WinChat 应用程序来查看它是否能够从 wifi 模块获取消息，并且我能够获取整个数据。

此外，如果我尝试使用 UDP Win Chat 应用程序向 android 设备发送一条非常长的消息，我就能获取全部数据！

我完全糊涂了！请帮忙。

* * *

我能够隔离问题。（但仍然没有找到解决方法:(...)

从上面的代码中，我在每次迭代中使用相同的 packet.getLength() ，假设它每次都会根据它收到的数据而改变。但遗憾的是，这不是预期的行为。getLength() 使用先前的值并截断新到达的消息。[请注意：这是一种随机行为，不会一直发生]

现在的问题是，每次在循环中收到新消息时，如何更改或刷新此属性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T23:49:54.837

您需要在每次接收之前重置 DatagramPacket 长度。否则，它会一直缩小到迄今为止收到的最小数据包。

# ssrs-2008 - SSRS 中的日期转换

> ID：11869262
> 
> 赞同：0
> 
> 时间：2012-08-08T16:45:39.390
> 
> 标签：ssrs-2008, reporting-services

我的报告中有 startdate 和 enddate 作为参数。

在查询中我正在检查条件

```
where (date BETWEEN (@BeginDate) AND (@EndDate)) 
```

数据库中的日期字段是`'2012-06-18 00:00:00.000'`格式。

所以我需要在查询中进行任何转换..

我在报告中没有得到任何结果..

我也尝试了`(CONVERT(varchar, date , 101) BETWEEN (@BeginDate) AND (@EndDate))` 仍然没有结果的地方。

请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T05:08:14.710

如果日期字段仅包含日期部分（时间部分始终设置为零），则在结束日期添加 1 天将返回“2012-06-18”的所有内容。

# delphi - Delphi 表单从任务栏和 Alt+Tab 中隐藏

> ID：11869264
> 
> 赞同：0
> 
> 时间：2012-08-08T16:45:43.743
> 
> 标签：delphi, delphi-xe2

我是德尔福学习者。我希望从任务栏和 Alt+Tab 中隐藏我的 Delphi 应用程序。所以我定义了以下代码：

```
unit KoushikHalder01;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs;

type
  TMainForm = class(TForm)
    procedure FormCreate(Sender: TObject);
    procedure FormShow(Sender: TObject);
    procedure FormActivate(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  MainForm: TMainForm;

implementation

{$R *.dfm}

procedure TMainForm.FormActivate(Sender: TObject);
begin
  ShowWindow(Application.Handle, SW_HIDE);
end;

procedure TMainForm.FormCreate(Sender: TObject);
begin
  ShowWindow(Application.Handle, SW_HIDE);
  SetWindowLong(Application.Handle, GWL_EXSTYLE,
  GetWindowLong(Application.Handle, GWL_EXSTYLE) or WS_EX_TOOLWINDOW);
  ShowWindow(Application.Handle, SW_SHOW);
end;

procedure TMainForm.FormShow(Sender: TObject);
begin
  ShowWindow(Application.Handle, SW_HIDE);
end;

end. 
```

和

```
program KoushikHalder;

uses
  Vcl.Forms,
  KoushikHalder01 in 'KoushikHalder01.pas' {MainForm};

{$R *.res}

begin
  Application.Initialize;
  Application.MainFormOnTaskbar := false;
  Application.CreateForm(TMainForm, MainForm);
  Application.Run;
end. 
```

它仅适用于第一次。但是有一些问题如下：

1.  应用程序在 Alt+Tab 中可见。
2.  如果我最小化应用程序并再次恢复它，应用程序仍在任务栏上。
3.  当应用程序在任务栏上可见时，它显示已编译的 exe 文件名，但不显示 MaimForm 的标题。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-16T19:16:53.787

这将从任务栏中隐藏：

```
procedure TForm1.FormActivate(Sender: TObject);
begin
  SetWindowLong(Handle, GWL_EXSTYLE, 
                GetWindowLong(Handle, GWL_EXSTYLE) or 
                WS_EX_TOOLWINDOW and not WS_EX_APPWINDOW); 
  ShowWindow(Application.Handle, SW_HIDE);
end; 
```

在 FormActivate 事件中使用该代码...

# c++ - “无效使用非静态成员函数”这是什么？

> ID：11869266
> 
> 赞同：4
> 
> 时间：2012-08-08T16:45:47.800
> 
> 标签：c++, class, function, syntax

编辑：感谢所有快速响应，我现在对这个概念有了更好的理解。另外，下次我会尽量让我的错误信息更清楚。编辑：用我最新的代码更新。错误发生在第 18 行。另外，我开始怀疑我的最新问题是否与原始课程本身有关？

我正在尝试用 C++ 自学类和对象。我做了一次，只声明一个`void`函数，在屏幕上输出一些东西，在 main 中调用对象，一切正常。

现在，我想对此进行扩展并做一个简单的加法。但是，我在代码块上遇到了几个错误：

```
error: invalid use of non-static member function 'int Addition::add(int, int)'
error: no matching function for call to 'Addition::add()' 
```

这是我的代码：

```
#include <iostream>

using namespace std;

class Addition {
public:
int add (int x, int y) {
int sum;
sum=x+y;
return sum;
}
};

int main()
{
int num1;
int num2;
int ans=addobj.add(num1,num2);
Addition addobj;
addobj.add(num1,num2);
cout<<"Enter the first number you want to add"<<endl;
cin>>num1;
cout<<"Enter the second number you want to add"<<endl;
cin>>num2;
cout<<"The sum is "<<ans<<endl;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-08T16:47:54.790

开发人员应该学会做的最重要的事情之一就是阅读编译器的消息。很清楚：

```
error: no matching function for call to 'Addition::add()' 
```

你在课堂上的职能是

```
int add (int x, int y) 
```

它需要 2 个参数，但您不传递任何参数：

```
addobj.add(); 
```

* * *

您有 2 个选项：

*   在您的内部创建和初始化`x`并将它们作为参数传递`y``main`
*   make`add`不带参数， create`x`和`y`inside`add`的主体，因为它们的值取自用户输入。

在这种情况下，由于函数的名称是`add`，我选择了第一个选项：

*   `int x, y;`在你的内部声明`main`
*   读取`main`（您使用`cin`和的部分`cout`）内的用户输入
*   将`x`and`y`作为参数传递给`add`这样的：`addobj.add( x, y );`
*   存储结果（如果需要），如下所示：`int result = addobj.add( x, y );`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-08T16:48:03.790

您声明了一个`add(int, int)`将两个整数作为参数的方法；当你调用它时，你必须提供这些参数。打印返回值也很好：

```
Addition addobj;
std::cout << addobj.add(1, 2) << std::endl; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T16:48:03.933

你的`add`函数有两个参数，但你没有调用它，所以找不到匹配的函数。您必须按照声明的方式调用该函数，即

```
addobj.add(1, 2); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T16:48:11.493

您的函数有两个参数，但您在没有提供它们的情况下调用它。您需要提供函数所需的两个整数参数。为了有用，您也应该存储结果。像这样的东西

```
 int a = 1;
 int b = 2;
 int result = addjobs.add(a,b); 
```

# c++ - 使用 libpq / libpqxx 进行输入清理

> ID：11869267
> 
> 赞同：2
> 
> 时间：2012-08-08T16:45:47.910
> 
> 标签：c++, libpq, libpqxx

我刚刚开始为 PostgreSQL 数据库实现一些客户端软件。

查询将允许来自不受信任来源的输入参数。因此，我需要在实际提交之前对我的交易进行清理。

至于 libpq 我找到[了 PQescapeStringConn](http://www.postgresql.org/docs/9.1/static/libpq-exec.html)，这可能确实需要我需要。但是，由于我的代码将用 C++ 编写，因此我更喜欢使用 libpqxx 等价物。我找不到任何相关的东西。（可能除了[Escaper](http://pqxx.org/devprojects/libpqxx/doc/2.6.2/html/Reference/classpqxx_1_1internal_1_1Escaper.html)，它位于内部命名空间中......）

对于最佳实践、阅读、文档链接等方面的*任何*建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T08:15:53.143

使用[pqxx::transaction_base::quote](http://pqxx.org/devprojects/libpqxx/doc/development/Reference/a00196.html#ga263a180c5d0decf645aca3fc1ed4d6ff)是要走的路。

这是一个简单的例子：

```
// connection to the database
std::string login_str = "TODO: add credentials";
pqxx::connection conn(login_str);
pqxx::work txn(conn);

// a potentially dangerous input string
std::string input = "blah'; drop table persons; --";

// no proper escaping is used
std::string sql_1 = "select * from persons where lastname = '%s'";
std::cout << boost::format(sql_1) % input << std::endl;

// this is how it's done
std::string sql_2 = "select * from persons where lastname = %s";
std::cout << boost::format(sql_2) % txn.quote(input) << std::endl; 
```

输出是：

```
select * from persons where lastname = 'blah'; drop table persons; --'
select * from persons where lastname = 'blah''; drop table persons; --' 
```

以供参考：

*   [http://pqxx.org/devprojects/libpqxx/doc/development/Reference/a00196.html#details](http://pqxx.org/devprojects/libpqxx/doc/development/Reference/a00196.html#details)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-26T11:13:34.327

实际上，为了提供更好的视角，本周我遇到了此类问题，我们开始使用**std::string pqxx::transaction_base::esc**

您只需将它添加到要插入或更新的参数中，它就可以完成这项工作。上面提到的引用函数，它将引用添加到参数中，但它不能解决问题。

例如; 如果您执行 UPDATE person set name = w.quote(name) where id = 1; 在那里，您正确地使用了引号，以便将参数放在引号之间。因此，为了插入单引号或避免 SQL 注入，您必须执行以下操作：UPDATE person set name = + "'" + w.esc(name) + "'" where id = 1 OR UPDATE person set name = w。报价（w.esc（名称）），其中 id = 1；作为 W，pqxx::work 变量已经通过与数据库的连接进行了初始化。

# javascript - CoffeeScript 做，传递参数

> ID：11869270
> 
> 赞同：13
> 
> 时间：2012-08-08T16:46:00.857
> 
> 标签：javascript, coffeescript

以下 CoffeeScript 代码：

```
do (a) ->
    console.log a 
```

生成这个：

```
(function(a) {
  return console.log(a);
})(a); 
```

如何将值传递给这样的？

```
(function(a) {
  return console.log(a);
})("hello"); 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-08T17:09:48.097

```
do (a = 'hello') ->
  console.log a 
```

将[产生](http://coffeescript.org/#try%3ado%20%28a%3D%27hello%27%29%20-%3E%0A%20%20console.log%20a)你想要的。

不过，我不得不承认我看不出这样做的意义。如果您真的想在该范围内`a`获取文字值`'hello'`，那么为什么要创建另一个范围？作为`a`一个声明为的普通变量`a = 'hello'`就足够了。现在，如果你想`a`用另一个变量的值替换（可能在循环或其他东西中改变）`do (a = b) ->`然后我认为它更有意义，但你可以简单地做`do (a) ->`，只是使用`a`而不是`b`在`do`范围内。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-24T23:42:41.187

如果您使用的是[Module Pattern](http://www.adequatelygood.com/JavaScript-Module-Pattern-In-Depth.html)，则在使用可能相互冲突的多个 Javascript 库时使用 $ global 很有用：

```
mySingleton = do ($ = jQuery) -> 
   colorIt -> $('.colorme').css('backgroundColor', 'red')

mySingleton.colorIt() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T16:57:49.667

`do`是 CoffeeScript 中的一个特殊关键字。它创建了一个闭包。我想你想要这样的东西：

```
log = (msg) ->
  console.log msg 
```

编译为：

```
var log;

log = function(msg) {
  return console.log(msg);
}; 
```

像任何其他功能一样使用它：`log("hello")`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-08T17:11:01.353

你可以这样做

```
do (a = "foo")->
    console.log a 
```

但你真的为什么要这样做？您尝试实现的更完整的用例是什么

# c++ - 用于命令行的 Qt Creator 标准输入，可部署到远程 Linux 主机

> ID：11869281
> 
> 赞同：4
> 
> 时间：2012-08-08T16:46:38.877
> 
> 标签：c++, qt, qt-creator, cross-compiling, remote-debugging

我正在使用 Qt Creator 的远程部署功能在嵌入式 Linux 目标板上启动我的简单命令行应用程序。我的测试应用程序非常简单，并要求用户打印他/她的名字。它交叉编译、传输到开发板并启动，Qt Creator 底部附近的“应用程序输出”窗口显示“输入您的姓名：”提示，但我无法在任何地方输入并为通过 Qt Creator 远程运行的应用程序提供标准输入。

我怎样才能在 Qt Creator 中做到这一点？我可以以某种方式操纵部署“参数”来连接设备以向我的命令行应用程序提供标准输入吗？我也无法通过选中“项目”>“运行配置”下的“在终端中运行”复选框来远程启动应用程序，因为它不适用于远程部署。

代码：

```
#include <iostream>

using namespace std;

int main() {
    cout << "Enter a number: ";
    int nb;
    cin>>nb;
    cout << "Here is your number:" << nb << endl;
    return 0;
} 
```

Qt Creator 中的应用程序输出：

```
Killing remote process(es)...
Starting remote process ...
Remote process started.
Enter a number: d 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T15:50:18.867

我发现没有办法为 qt creator 从 IDE 中启动的应用程序提供标准输入。

我确实尝试了一些东西，看起来命名管道工作得很好。幸运的是，它包含在 Busybox 中，所以它在我的板上。

要使用它，您可以使用“运行设置”下的“设备上的备用可执行文件”选项从 Qt Creator 远程启动应用程序，并将命名管道的最后一行通过管道传输到需要标准输入的 c++ 程序。因此，您在设备上的“备用可执行文件”如下所示：

```
cd /home/test; tail -f mypipe | ./test3 –qws 
```

'test3' 是我的程序，/home/test 是可执行文件的位置。

然后打开 1 个额外的 ubuntu 终端并通过 SSH 连接到开发板。现在创建一个名为“mypipe”的命名管道：

```
mkfifo mypipe 
```

当您的程序期望 stdin 启动并等待输入时，您可以将来自该其他终端的输入回显到命名管道中，您的程序会将其作为 stdin：

```
echo ‘2’ > mypipe 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-14T17:21:36.313

**Debug** > **Start Debug**子菜单中有更多选项。您需要一个：**Attach to Running Debug Server**。它确实打开了这个整洁的小窗口：

[![附加到正在运行的服务器对话框](../Images/e1042d9f56ffcc3c5f657a2f99c3c13a.png)](https://i.stack.imgur.com/IYh5L.png)

如您所见，有很多参数，甚至是“在终端中运行”选项，但由于某种原因它在我的机器上不起作用。不要忘记正确设置可执行二进制文件和套件设备设置的本地路径。我还建议您在**环境**>**键盘**设置中为`AttachToRemoteServer`命令绑定热键。

 ****之后，您唯一需要做的就是`gdbserver`在远程设备上运行：

```
gdbserver :<port> <executable> 
```

运行过程确实有一个适当的`stdin`和`stdout`流，您可以通过 SSH 会话与终端中的应用程序进行交互。****

# .net - 自定义 ActiveX .NET 控件无法在 WinForms/WPF 项目中识别

> ID：11869286
> 
> 赞同：0
> 
> 时间：2012-08-08T16:46:44.790
> 
> 标签：.net, com, activex

我在 .NET 中创建一个 ActiveX 控件库 (.dll) 以在 Internet Explorer 中使用。它实现`IObjectSafety`并且看起来类似于：

```
namespace ActiveXControl
{
    [ComVisible(true)]
    [InterfaceType(ComInterfaceType.InterfaceIsDual)]
    [Guid("ABA9D4C3-8166-440C-90C8-2FA6CD4C3C77")]
    interface ITestControl
    {
        string GetText();
    }

    [ComVisible(true)]
    [ClassInterface(ClassInterfaceType.None)]
    [Guid("0B3C1BB4-ED2C-4336-9E4C-72A908E74F51")]
    [ProgId("ActiveXControl.TestControl")]
    [ComDefaultInterface(typeof(ITestControl))]
    public class TestControl : UserControl, ITestControl, IObjectSafety
    {
        #region ITestControl

        public string GetText()
        {
            return "Foo";
        }

        #endregion

        #region IObjectSafety

        public enum ObjectSafetyOptions
        {
            INTERFACESAFE_FOR_UNTRUSTED_CALLER = 0x00000001,
            INTERFACESAFE_FOR_UNTRUSTED_DATA = 0x00000002,
            INTERFACE_USES_DISPEX = 0x00000004,
            INTERFACE_USES_SECURITY_MANAGER = 0x00000008
        };

        public int GetInterfaceSafetyOptions(ref Guid riid, out int pdwSupportedOptions, out int pdwEnabledOptions)
        {
            ObjectSafetyOptions m_options = ObjectSafetyOptions.INTERFACESAFE_FOR_UNTRUSTED_CALLER | ObjectSafetyOptions.INTERFACESAFE_FOR_UNTRUSTED_DATA;
            pdwSupportedOptions = (int)m_options;
            pdwEnabledOptions = (int)m_options;
            return 0;
        }

        public int SetInterfaceSafetyOptions(ref Guid riid, int dwOptionSetMask, int dwEnabledOptions)
        {
            return 0;
        }

        #endregion
    }
} 
```

当我从中创建一个 .cab 并在 IE 中运行它时，它可以工作。但是当我创建一个常规的 WPF 桌面应用程序并引用程序集时，我遇到了一个不寻常的情况：当我第一次添加引用（或进行清理）时，`ActiveXControl`命名空间和控件出现在 Visual Studio 中。一旦我构建，我就会收到消息：

> 找不到名称空间名称“ActiveXControl”的类型（您是否缺少 using 指令或程序集引用？）

我尝试重建控件和几个变体，包括 WinForms 项目。有人可以解释为什么会发生这种情况以及我能做些什么来解决它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T17:54:38.833

解决方案是进入项目属性并将目标框架从“.NET Framework 4 Client Profile”更改为“.NET Framework 4”。之后，它构建/运行良好。

# coffeescript - 咖啡脚本翻译

> ID：11869288
> 
> 赞同：1
> 
> 时间：2012-08-08T16:46:56.177
> 
> 标签：coffeescript

如果我有这个 javascript：

```
function I_did_something(){
  this.test.assertExists('#selector', 'exists');
}

casper.then(I_did_something); 
```

问题是 casper 正在使用`call`调用该`then`方法，这意味着我不能做这样的事情：

```
@I_did_something = ->
  @assertExists('#selector', 'exists')

casper.then @I_did_something 
```

因为`this`不引用全局对象。

谁能建议我如何在不使用 window 对象的情况下将其翻译成咖啡脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T17:43:24.850

您可以使用[粗箭头 ( `=>`)](http://coffeescript.org/#fat_arrow)将函数绑定到当前`this`：

```
@I_did_something = =>
  @assertExists('#selector', 'exists') 
```

这与以下效果类似：

```
that = @
@I_did_something = ->
  that.assertExists('#selector', 'exists') 
```

我认为这就是你所追求的。

# php - 新 Zend 添加的控制器停止工作，显示新控制器的错误 500，以前的控制器工作正常

> ID：11869295
> 
> 赞同：2
> 
> 时间：2012-08-08T16:47:14.397
> 
> 标签：php, zend-framework

我的 Zend 应用程序运行良好，直到今天，当我改变了一些东西（我的意思是什么都没有）导致新的控制器停止工作。我已经调试了代码的每一部分，但我找不到任何关于为什么会发生的痕迹！

**我以前添加的控件正在运行**，并且还添加了新操作，但新添加的控件不起作用。

错误是这样的：HTTP 错误 500（内部服务器错误）：服务器尝试完成请求时遇到了意外情况。

像这个问题一样的情况：

[Zend 错误控制器停止工作 500](https://stackoverflow.com/questions/11208783/zend-error-controller-stopped-working-for-500)

任何有解决方案的机构！请回复，我用新的替换了 apache、zend、php 库源的每一点，但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:51:52.067

我认为您没有足够的日志记录来解决此问题。你有一个致命的错误处理程序吗？这应该可以帮助您了解发生了什么（添加到 Boostrap 类）。基本上，它将致命错误记录到日志文件并向用户显示静态 html 页面。

```
/**
 * Fatal Error Catcher which runs as a registered shutdown function
 */
public static function fatalErrorCatcher() {
    $error = error_get_last();
    if ($error && (
            $error['type'] === E_ERROR ||
            $error['type'] === E_COMPILE_ERROR ||
            $error['type'] === E_CORE_ERROR ||
            $error['type'] === E_PARSE
    )) {
        // kill the buffer content, it's broken anyway
        while (ob_get_level()) {
            ob_end_clean();
        }
        // make a summary of the error
        $errorSummary = date('m/d/Y G:i:s') . ' '
            . $error['message'] . ' on file ' . $error['file'] . ':' . $error['line'] . ' URL:'
            . $_SERVER["SERVER_NAME"]
            . ($_SERVER["SERVER_PORT"] != "80" ? ":" . $_SERVER["SERVER_PORT"] : "")
            . $_SERVER["REQUEST_URI"] . "\n";
        // log the error to file
        file_put_contents('/var/log/fata-errors.log', $errorSummary, FILE_APPEND | LOCK_EX);
        // tell the user we're sorry
        header('HTTP/1.1 500 Internal Server Error');
        echo file_get_contents('/var/www/html/fail-whale.html');
    }
} 
```

并且您在初始化时尽可能早地在引导程序中注册它：

```
register_shutdown_function(array('Bootstrap', 'fatalErrorCatcher')); 
```

# php - curl登录，两次传递的会话cookie

> ID：11869305
> 
> 赞同：1
> 
> 时间：2012-08-08T16:47:48.910
> 
> 标签：php, curl

我尝试使用 curl 登录 SSL 安全网站，但不知何故我做错了。

第一个 curl 连接检索登录表单。最初的 SSL 问题现在已解决。用于身份验证的字段和所有隐藏字段都被识别并用于以下 POST。cookie 文件和要读取的 jar 文件都已定义。cookie 文件是可访问的，并随着每次登录尝试而更新。curl 成功设置了会话 cookie。移除 HTTPHEADER 以阻止请求到达 100 Continue 墙。Curl 被配置为跟进并发送推荐人。但是，我仍然找不到脚本卡住的地方。Curl 和 PHP 都不会发出任何错误消息或警告。

这是缩短的脚本：

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_VERBOSE,       1);
curl_setopt($ch, CURLOPT_HEADER,        1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION,1);
curl_setopt($ch, CURLOPT_AUTOREFERER,   1);
curl_setopt($ch, CURLOPT_HTTPHEADER,    array('Expect:')); // remove Expect header to avoid 100 Continue situations
curl_setopt($ch, CURLOPT_USERAGENT,     'Mozilla [abbreviated]');
curl_setopt($ch, CURLOPT_CAINFO,        dirname(__FILE__).'/cacert.pem');
curl_setopt($ch, CURLOPT_COOKIEFILE,    dirname(__FILE__).'/cookie.hq.txt'); // write cookies
curl_setopt($ch, CURLOPT_COOKIEJAR,     dirname(__FILE__).'/cookie.hq.txt'); // read cookies
curl_setopt($ch, CURLOPT_COOKIESESSION, 1);
curl_setopt($ch, CURLOPT_URL,           'https://the_url.jsp');

$data = curl_exec($ch);
$error= curl_error($ch);
if(!empty($error))
    echo '<p>'.$error.'</p>';
else
    echo '<p>ok</p>'; 
```

现在脚本读取表单，填写凭据并使用相同的 curl_init 句柄将其返回：

```
curl_setopt($ch, CURLOPT_POST,       1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $options);
$data = curl_exec($ch);
$error=curl_error($ch); 
```

但我得到的只是再次使用相同的表单和相同的会话 cookie 或新的会话 cookie，具体取决于 CURLOPT_COOKIESESSION 设置。

当我手动登录时，我注意到还有两个 cookie 集：LtpaToken 和 LtpaToken2，但我从未看到它们出现在脚本打印的请求标头中。即使没有激活 Javascript，也可以手动提交表单。因此，在提交表单数据之前，不可能有一些 JS 魔术在后台修改表单数据。显然我在这里遗漏了一些东西。有什么想法可以让我进一步了解吗？

已解决：最后，问题是由于 POST 中的编码问题。最初，POST 数据是使用 http_build_query() 从数组创建的。现在 POST 数据被简单地连接起来，键和值都分别进行了 urlencoded：

```
 $options.=urlencode($fieldName).'='.urlencode($element->getAttribute('value')); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T09:07:32.173

已解决：最后，问题是由于 POST 中的编码问题。最初，POST 数据是使用 http_build_query() 从数组创建的。现在 POST 数据被简单地连接起来，键和值都分别进行了 urlencoded：

```
$options.=urlencode($fieldName).'='.urlencode($element->getAttribute('value')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T17:10:18.083

见以下网址：--

[cURL 登录会话](https://stackoverflow.com/questions/11515145/curl-login-session)

试试这个：-

[http://php.net/manual/en/function.curl-setopt.php](http://php.net/manual/en/function.curl-setopt.php)

```
<?php

 echo curl_grab_page("https://www.example.net/login.php", "https://www.example.net/", "username=foo&password=bar", "true",  "null", "false");

// $url = page to POST data
// $ref_url = tell the server which page you came from (spoofing)
// $login = true will make a clean cookie-file.
// $proxy = proxy data
// $proxystatus = do you use a proxy ? true/false

function
curl_grab_page($url,$ref_url,$data,$login,$proxy,$proxystatus){
    if($login == 'true') {
        $fp = fopen("cookie.txt", "w");
        fclose($fp);
    }
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_COOKIEJAR, "cookie.txt");
    curl_setopt($ch, CURLOPT_COOKIEFILE, "cookie.txt");
    curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/4.0 (compatible; MSIE 5.01; Windows NT 5.0)");
    curl_setopt($ch, CURLOPT_TIMEOUT, 40);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
    if ($proxystatus == 'true') {
        curl_setopt($ch, CURLOPT_HTTPPROXYTUNNEL, TRUE);
        curl_setopt($ch, CURLOPT_PROXY, $proxy);
    }
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);

    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_REFERER, $ref_url);

    curl_setopt($ch, CURLOPT_HEADER, TRUE);
    curl_setopt($ch, CURLOPT_USERAGENT, $_SERVER['HTTP_USER_AGENT']);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, TRUE);
    curl_setopt($ch, CURLOPT_POST, TRUE);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
    ob_start();
    return curl_exec ($ch); // execute the curl command
    ob_end_clean();
    curl_close ($ch);
    unset($ch);
} 
```

# java - Java，将文件流转换为随机访问文件

> ID：11869306
> 
> 赞同：1
> 
> 时间：2012-08-08T16:47:48.563
> 
> 标签：java, file, stream, java-io

我需要在我无法做任何更改的 2 个接口之间实现一个包装器。基本上，包装器需要将 java 风格的流文件访问转换为标准 C 风格的 fopen/fread/fwrite/ 文件访问（在 java 中实现）。

包装器必须实现调用者所需的随机文件访问方法，即open/read/write/close/seek/flush/size/truncate；包装器必须调用一组标准的 java 文件流方法来提供调用者，被调用者为我提供输入流和输出流。

我看到了 java.io.RandomAccessFile，它将 C 风格转换为 java 流风格，我需要一些相反的东西。最困难的部分是 seek()。有什么好的（有效的）方法可以做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T17:09:52.883

随机访问流的唯一方法是将其缓冲在内存中（或作为磁盘上的副本）

我建议要么

*   将其读入 ByteArrayOutputStream 并将其转换为`byte[]`
*   将流复制到临时文件（最好是 tmpfs 或 ram 驱动器），然后在其上使用 RandomAccessFile。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-01-29T19:13:12.047

使用 Channels 实用程序类很容易实现这一点......

```
// STEP 1:  Create random access file read-only
RandomAccessFile raf = new RandomAccessFile("/text.txt", "r");

// STEP 2:  Use Channels to convert to InputStream
InputStream is = Channels.newInputStream(raf.getChannel()); 
```

# android - R.java 文件未生成

> ID：11869307
> 
> 赞同：6
> 
> 时间：2012-08-08T16:47:50.827
> 
> 标签：android, facebook, eclipse, r.java-file

我无法在我构建的一半 Facebook 应用程序中解决 R.java 问题。我选择了“自动构建”选项，我清理了我的项目。我做了所有推荐的解决方案来生成我的 R.java 文件。但仍然没有成功。我的“gen”文件夹中有 2 个 R.java。我放了一个截图以便更好地理解。

![在此处输入图像描述](../Images/d124e2b2d1f819348df6fc0a8c1bb718.png)

所有的按钮、textview 和 imageviews 都没有被识别。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-20T09:45:42.267

我也有类似的问题...

我从谷歌浏览了很多链接，但没有用。最后我打开 Android SDK Manager 看看安装的包中是否缺少任何东西，发现“Android SDK Built-tools”没有安装。

我安装并按照以下步骤操作：
1\. 重新打开 Eclipse。
2\. 注释错误行
3\. 全部构建
4\. 取消注释错误行以查看错误是否消失。

希望这会帮助某人...

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-08T16:59:04.440

试试这个：

1.  删除对类的任何导入`R.java`（如@zapl 指出的）。
2.  将光标移动到对任何按钮/布局/字符串/whatever-coming-from-R 的引用，删除最后一个字符，然后点击`ctrl+space`. Eclipse 将尝试对您进行代码提示，自动导入正确的`R.java`.
3.  只是为了保持凉爽，清洁和重建。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-17T07:33:44.453

试试这个：我有类似的问题 R.java not found 错误它实际上没有生成

我几乎做了论坛不同链接中所说的所有事情

我做了什么

1.我从工作区中删除项目并重新导入它，在项目启动后它开始给我 SDK not found 错误，即使我得到了正确的 Android SDK 路径。我正在使用 eclispe ADT，你可以从中找到安卓网站本身。

2.我不知道为什么 ADT 插件显示它需要更新，即使安装了最新的 ADT 21.1。我试图更新，然后我不知道我的 SDK 中的工具文件夹是如何被删除的。它开始大喊大叫在 SDK 文件夹中找不到 tools 文件夹。所以我需要再次下载 SDK 并将 ADT 插件更新到 21.1。

3 所以我认为 ADT 插件有时会出现问题，因此请保持正确更新或重新安装它会起作用，如果没有其他效果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-18T15:25:38.097

当我找到一个名称中带有大写字母的 png 文件时，它发生在我身上。整个名称只能包含非大写字母！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-07-22T20:07:42.680

我也有这个问题。我的解决方案是：安装缺少的 lib32z1 和 lib32stdcc++6

sudo apt-get install lib32z1

sudo apt-get install lib32stdcc++6

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-13T16:43:38.147

我必须更新到最新的 Android Studio 版本（目前为 3.3.2）

# mysql - 如何使用 2 个不同的 ORDER BY 语句形成 MySQL 查询

> ID：11869309
> 
> 赞同：1
> 
> 时间：2012-08-08T16:47:50.890
> 
> 标签：mysql, sql-order-by

我的网站上有一种 Facebook 式的喜欢/不喜欢系统，并且正在使用以下查询来获取特定帖子的喜欢和不喜欢：

```
SELECT DISTINCT * FROM posts WHERE cid='$cid' AND pid=".implode(" OR pid=",$pids)." ORDER BY time DESC 
```

`$pid`是要搜索的帖子 ID 数组。

`zbid`是当前正在访问该页面的用户的 id。现在，如果该用户对帖子进行了评分（喜欢/不喜欢），则应首先返回他的结果，然后按 . 对结果进行排序`time DESC`。

我将如何修改查询来做到这一点？

如果`posts`表有以下数据：

```
+----+-----+------+-----+--------+------+
| 编号 | 西德 | 出价 | 进程号 | 评级 | 时间 |
+----+-----+------+-----+--------+------+
| 1 | 1 | 1 | 1 | 1 | 1 |
+----+-----+------+-----+--------+------+
| 2 | 1 | 2 | 1 | -1 | 4 |
+----+-----+------+-----+--------+------+
| 3 | 1 | 3 | 2 | 1 | 2 |
+----+-----+------+-----+--------+------+
| 4 | 2 | 4 | 1 | -1 | 3 |
+----+-----+------+-----+--------+------+
| 5 | 1 | 5 | 1 | 1 | 8 |
+----+-----+------+-----+--------+------+
| 6 | 1 | 6 | 1 | -1 | 7 |
+----+-----+------+-----+--------+------+

```

当前的 select 语句（上）将返回以下信息（带`$pid = array(1);`）：

```
+----+-----+------+-----+--------+------+
| 编号 | 西德 | 出价 | 进程号 | 评级 | 时间 |
+----+-----+------+-----+--------+------+
| 5 | 1 | 5 | 1 | 1 | 8 |
+----+-----+------+-----+--------+------+
| 6 | 1 | 6 | 1 | -1 | 7 |
+----+-----+------+-----+--------+------+
| 2 | 1 | 2 | 1 | -1 | 4 |
+----+-----+------+-----+--------+------+
| 4 | 2 | 4 | 1 | -1 | 3 |
+----+-----+------+-----+--------+------+
| 1 | 1 | 1 | 1 | 1 | 1 |
+----+-----+------+-----+--------+------+

```

但是，如果该人`zbid=4`正在访问该页面，它应该将该结果（如果存在）提升到顶部，如下所示：

```
+----+-----+------+-----+--------+------+
| 编号 | 西德 | 出价 | 进程号 | 评级 | 时间 |
+----+-----+------+-----+--------+------+
| 4 | 2 | 4 | 1 | -1 | 3 |
+----+-----+------+-----+--------+------+
| 5 | 1 | 5 | 1 | 1 | 8 |
+----+-----+------+-----+--------+------+
| 6 | 1 | 6 | 1 | -1 | 7 |
+----+-----+------+-----+--------+------+
| 2 | 1 | 2 | 1 | -1 | 4 |
+----+-----+------+-----+--------+------+
| 1 | 1 | 1 | 1 | 1 | 1 |
+----+-----+------+-----+--------+------+

```

该变量`$zbid`设置为`zbid`正在访问页面的用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T18:14:58.663

使用您提供的信息，这是我可以提出的一个相当粗略的解决方案：

**解决方案 1 - 便携方式**

```
-- This query will return User's posts and give it a higher priority in ordering, via post_order field
SELECT 
  posts.*
  ,0 as post_order
FROM posts
WHERE
  (cid='$cid' AND pid=".implode(" OR pid=",$pids).") AND
  (zbid = $user_zbid)

UNION ALL

-- This query will return everything BUT User's posts and give it a lower priority in ordering
SELECT 
  posts.*
  ,1 as post_order
FROM posts
WHERE
  (cid='$cid' AND pid=".implode(" OR pid=",$pids).") AND
  (zbid <> $user_zbid)
ORDER BY
  post_order -- This clause will put User's posts before the others
  ,time DESC 
```

**解决方案 2 - 更高效的方式（[感谢 cbranch](https://stackoverflow.com/users/333127/cbranch)的建议）**

```
SELECT 
  posts.*
  ,IF(zbid = $user_zbid, 0, 1) as post_order
FROM posts
WHERE
  (cid='$cid' AND pid=".implode(" OR pid=",$pids).")
ORDER BY
  post_order -- This clause will put User's posts before the others
  ,time DESC 
```

**注意**
- 您可能已经注意到，我从 SELECT 中删除了 DISTINCT，因为我看不到它们的原因。由于您只是从单个表中提取数据，因此不应有重复项。显然，您仍然可以将它们添加回来，但请记住，除非确实需要，否则不要使用此类子句。
- 第二个查询运行起来会非常昂贵，因为它使用“不等于”子句。这意味着它不会使用索引，也不适合处理大量数据。如果您必须处理一张大桌子，则必须审查此解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T23:55:31.370

在查看 Diego 的建议后，我想出了以下有效的答案：

```
SELECT zbid,pid,rating,0 as post_order,time
    FROM posts
    WHERE cid='$cid'
        AND (pid=".implode(" OR pid=",$pids).")
        AND zbid!='$zbid'
UNION
SELECT zbid,pid,rating,1 as post_order,time
    FROM posts
    WHERE cid='$cid'
        AND (pid=".implode(" OR pid=",$pids).")
        AND zbid='$zbid'
ORDER BY
    post_order DESC,
    time DESC 
```

# mysql - MySQL 优化：左连接

> ID：11869310
> 
> 赞同：0
> 
> 时间：2012-08-08T16:47:53.980
> 
> 标签：mysql, sql, optimization, left-join, inner-join

我有以下 3 个表：

**出版物**（主键 =*文章*）

```
article | title | pubType 
```

**作者**（主键 = *author_name*）

```
author_name | author_somethingelse 
```

**pub_author_map**

```
article | author_name 
```

给定 的值`pubType`，我需要选择有关文章的信息，包括作者。为此，我有

```
SELECT p.article, p.title, p.dateTime, pam.author_name FROM publications p 
LEFT JOIN pub_author_map pam ON pam.article = p.article
LEFT JOIN authors a ON a.author_name = pam.author_name
WHERE p.pubType = '$pubType' ORDER BY p.article LIMIT 10 
```

即使使用`LIMIT 10`，此查询也大约在 29 秒内完成。中有 1500 行`publications`和 3000 行`pub_author_map`。

**如何优化上述查询？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T16:51:14.753

您可以使用索引来优化表。例如，在检索数据时用作外键的索引列：这是一个很好的索引教程，`http://www.tizag.com/mysqlTutorial/mysql-index.php`索引会占用更多的磁盘空间，但是当您对数据库进行相对较多的查询时，它们可以节省数小时里面的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T16:52:11.947

添加索引

*   专栏文章上的 pub_author_map

*   pubType 列上的出版物

例如像这样。

```
CREATE INDEX pub_author_idx_1 
    ON pub_author_map (article);

CREATE INDEX publications_idx_1
    ON publications (pubType); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T16:53:13.813

如果 INNER JOIN 给出正确的结果，请使用它。仅当您需要它提供的结果时才使用 LEFT JOIN。

你想看没有作者的文章吗？

# javascript - “类”属性的值隐含地扩展某些标记元素

> ID：11869313
> 
> 赞同：0
> 
> 时间：2012-08-08T16:47:57.437
> 
> 标签：javascript, jquery, css, dom

我正在尝试在 jQuery 之上编写的第三方库。

我注意到，对于他们的一些小部件，例如，当您的消息来源说，

```
<div id="myWidgetInst" class="their-widget-class-0" ... </div> 
```

Firebug 显示生成的 DOM 元素显示为：

```
 <div id="myWidgetInst" class="their-widget-class-0 their-widget-class-1 ..." ... </div> 
```

他们是怎么做到的呢？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T16:50:30.637

它可能是 jquery ！

可能有一个函数正在运行向元素添加类

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T16:53:43.653

不确定我是否完全理解您的问题，但是在查看网站的“常规”来源时，该来源没有显示由于 javascript 修改而对 DOM 进行的任何修改。Firebug 确实显示了这些更新。

使用 jQuery，您可以简单地通过在要修改的元素上使用`.addClass("className")`或函数来添加/删除类`.removeClass("className")`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T16:51:52.413

他们会使用 jQuery 向元素添加类。例如，如果插件的目的是隐藏页面上的所有元素（我知道创新且非常实用），他们可以使用以下内容：

```
$(document).ready(function() {
    $("*").addClass("my-widget-made-your-element-invisible");
}); 
```

使用 CSS：

```
.my-widget-made-your-element-invisible { display: none; } 
```

* * *

可以在 jQuery 中操作`class`属性的方法包括：

```
$("#elem").addClass("a");       // adds the class "a" to elem
$("#elem").removeClass("a");    // removes the class "a" from elem
$("#elem").attr("class", "a");  // gives elem a complete class of "a"
$("#elem").attr("class", "");   // removes all classes from attribute 
```

# c++ - 没有对具有 const 参数的模板化函数的匹配函数调用

> ID：11869315
> 
> 赞同：4
> 
> 时间：2012-08-08T16:48:00.907
> 
> 标签：c++, gcc

我有一个定义如下的函数：

```
template < class T> T doSomething(const T value, const T value2, const T value3)
{
   T temp = value;
       //Do stuff
   return temp ;
} 
```

在我的主要，我去称呼它如下：

```
doSomething(12.0, 23.0f, 2.0f); 
```

我收到一条错误消息，提示 call 没有匹配的函数`doSomething(double, float, float)`。

我尝试使用 const_cast 但它似乎没有解决问题。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T16:50:29.110

这不是关于`const`，而是关于那个`T`不能同时是`double`两者`float`。

如果您有非模板函数，则可以将一个或多个参数提升（或转换）为参数类型。使用模板函数，编译器必须首先确定模板类型应该是什么。在这里它无法决定。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-08T17:01:50.643

您的函数定义对三个参数中的每一个都使用相同的类型“T”。在这种情况下，C++ 无法扣除类型。

请选择修复方式：

*   每个参数的不同类型

```
    模板<类型名 A，类型名 B，类型名 C>
    A doSomething(const A& value, const B& value2, const C& value3)
    {
        温度=值；
        //做东西
        返回温度；
    }
```

*   调用时显式模板参数：

```
    doSomething<int>(12.0, 23.0f, 2.0f);
```

*   调用参数的显式类型转换：

```
    doSomething(12.0, static_cast<double>(23.0f), static_cast<double>(2.0f));
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T16:50:39.003

使用模板化函数时，您需要在尖括号内提供模板参数。

即你需要使用`doSomething<float>(12.0, 23.0f, 2.0f);`

或者，至少，如果你不这样做，编译器必须猜测是什么`T`，这意味着当它看到`double`第一个参数的 a 时，它假设你的意思是`doSomething<double>()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T17:00:15.730

当你这样打电话时：

```
doSomething(12.0, 23.0f, 2.0f); 
```

然后你基本上让编译器`T`从函数参数中推断出模板参数。但是在上面的调用中，所有参数的类型都不相同：第一个参数`12.0`是`double`，而其余两个参数是`float`（**注意`f`in`2.0f` 使它成为 a `float`，while`2.0`是 a `double`.**）。因此出现了问题，因为编译器试图找到一个接受`double, float, float`作为参数的函数。但是没有这样的功能。并且函数模板不能从参数中推导出来，因为所有参数`T`都必须**相同**。

所以解决方案是，让我们`T`推断为`double`or `float`：

```
doSomething(12.0f, 23.0f, 2.0f);  //all are float now 
```

或这个：

```
doSomething(12.0, 23.0, 2.0);    //all are double now 
```

在第一种情况下，`T`推断为`float`，在第二种情况下，`T`推断为`double`。

或者，您可以选择**不**依赖模板参数推导，方法是将模板参数提供为：

```
doSomething<float>(12.0, 23.0f, 2.0f); 
```

或这个：

```
doSomething<double>(12.0, 23.0f, 2.0f); 
```

这里，在第一种情况下，第一个参数转换为`float`，在第二种情况下，第二个和第三个参数转换为`double`。

# android - 如何在 Android 应用程序中使用 Google Places API-事件

> ID：11869324
> 
> 赞同：0
> 
> 时间：2012-08-08T16:48:15.850
> 
> 标签：android, google-places-api

对于我的第二年项目，我希望创建一个 GPS 应用程序，它可以使用 Google Places API 中的事件添加和删除事件，但我不知道如何开始使用 API 并继续。请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T16:50:43.247

我建议从这里开始[https://developers.google.com/places/documentation/](https://developers.google.com/places/documentation/)

# flurry - 架构 armv7 的 Flurry 广告库未定义符号：

> ID：11869327
> 
> 赞同：4
> 
> 时间：2012-08-08T16:48:25.240
> 
> 标签：flurry, armv7

我想在我即将推出的应用程序中使用 Flurry 广告。我已经安装了分析包，并且喜欢跟踪用户和事件是多么容易。

但是，我在使用新的 4.0.1 SDK 实现广告时遇到错误，我没有找到答案。每次我尝试构建我的 Xcode 4.2 项目时，我都会收到以下错误消息：

```
Undefined symbols for architecture armv7:
  "_MPMoviePlayerLoadStateDidChangeNotification", referenced from:
  -[FlurryVideoPlayer playVideo:view:ad:] in libFlurryAds.a(FlurryVideoPlayer.o)
  -[FlurryVideoPlayer moviePlayerLoadStateChanged:] in libFlurryAds.a(FlurryVideoPlayer.o)
  "_MPMoviePlayerPlaybackStateDidChangeNotification", referenced from:
  -[FlurryVideoPlayer playVideo:view:ad:] in libFlurryAds.a(FlurryVideoPlayer.o)
  "_MPMoviePlayerDidEnterFullscreenNotification", referenced from:
  -[FlurryVideoPlayer init] in libFlurryAds.a(FlurryVideoPlayer.o)
  "_MPMoviePlayerPlaybackDidFinishNotification", referenced from:
  -[FlurryVideoPlayer playVideo:view:ad:] in libFlurryAds.a(FlurryVideoPlayer.o)
  -[FlurryVideoPlayer moviePreloadDidFinish:] in libFlurryAds.a(FlurryVideoPlayer.o)
  -[FlurryVideoPlayer stopMovie] in libFlurryAds.a(FlurryVideoPlayer.o)
  "_OBJC_CLASS_$_MPMoviePlayerController", referenced from:
  objc-class-ref in libFlurryAds.a(FlurryVideoPlayer.o)
  "_MPMoviePlayerWillEnterFullscreenNotification", referenced from:
  -[FlurryVideoPlayer init] in libFlurryAds.a(FlurryVideoPlayer.o)
  "_MPMoviePlayerContentPreloadDidFinishNotification", referenced from:
  -[FlurryVideoPlayer playVideo:view:ad:] in libFlurryAds.a(FlurryVideoPlayer.o)
  -[FlurryVideoPlayer moviePreloadDidFinish:] in libFlurryAds.a(FlurryVideoPlayer.o)
ld: symbol(s) not found for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

很明显，我的 FlurryAds.a 库出了点问题。我曾多次尝试按照 Flurry 的广告说明进行操作，但尽管我尽了最大努力，但我仍然遇到此错误。我的库在构建阶段中正确链接，我已尽力实施此处描述的修复[Undefined symbols for architecture armv7](https://stackoverflow.com/questions/6429494/undefined-symbols-for-architecture-armv7)但无济于事。

有任何想法吗？非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-13T21:01:35.823

我对 XCode 5.1 有同样的错误

我已经解决了这个链接`MediaPlayer.framework`和`AdSupport.framework`项目。

# ruby-on-rails - 如何“轻松”/“有效地”检查“整数”是否大于另一个“整数”？

> ID：11869332
> 
> 赞同：2
> 
> 时间：2012-08-08T16:48:49.077
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, comparison, integer

我正在使用 Ruby on Rails 3.2.2，我想检查 a`Integer`是否大于`0`，更一般地说，如果 a`Integer`大于 another `Integer`。

有一些 Ruby 或 Ruby on Rails*方法*可以“轻松”/“有效地”实现这一点？

* * *

*注意*：我想在我的视图文件中使用/声明该*方法*，我认为，如果该方法不“存在”，最好在我的模型或控制器文件中声明一个“专用”方法并使用该方法我的看法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T16:55:12.687

每当我开始比较两个以上的整数时，我通常会恢复为 array#max。

```
a = 1
b = 2
[0, a, b].max == a # false

a = 3
[0, a, b].max == a # true 
```

这样做的主要弱点是如果 a == b，因此需要对这种情况进行特殊检查。或者你可以这样做：

```
[0, a, b + 1].max == a 
```

或者

```
[0, a, b].max == a && a != b 
```

编辑：这种方法可能最适合您的助手。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-08T16:55:19.093

[如图](http://rosettacode.org/wiki/Integer_comparison#Ruby)所示：

```
a = (print "enter a value for a: "; gets).to_i
b = (print "enter a value for b: "; gets).to_i

puts "#{a} is less than #{b}" if a < b
puts "#{a} is greater than #{b}" if a > b
puts "#{a} is equal to #{b}" if a == b 
```

您可以在`<%`和之间的视图中使用标准 Ruby `%>`。是的，您可以实现一个辅助方法来检查并在您的视图中使用该辅助方法。

# iphone - UIWebView 内的滑动手势识别

> ID：11869334
> 
> 赞同：6
> 
> 时间：2012-08-08T16:48:54.350
> 
> 标签：iphone, uiwebview, uiswipegesturerecognizer

我已经阅读了很多关于此的问题，但似乎没有一个能够实现我正在寻找的东西......所以可以说我`UIWebView`在`UIViewController`. 有`UIViewController`一个`SwipeGestureRecognizer`工作正常。`UIWebView`只要没有滚动条，它甚至可以在-- 中工作。（在我加载页面之前，或者即使我加载的页面可以适当地适合我的`UIWebView`. 但是，如果我加载需要向左或向右水平滚动的网页，那么在`UIWebView`我的视图部分内，我无法识别任何滑动手势。每次单击/拖动/滑动都会触发滚动动作。有没有办法区分“滑动”和仅用手指滚动（不是抬起它，而是拖动滚动）。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-09-16T17:58:12.843

是的，你可以告诉 UIWebView 的 UIScrollView 它的 UIPanGestureRecognizer 应该只在你自己的 UISwipeGestureRecognizer 失败时触发。

这就是你的做法：

```
UISwipeGestureRecognizer *rightSwipeGesture = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(handleSwipeGesture:)];
UISwipeGestureRecognizer *leftSwipeGesture = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(handleSwipeGesture:)];
rightSwipeGesture.direction = UISwipeGestureRecognizerDirectionRight;
leftSwipeGesture.direction = UISwipeGestureRecognizerDirectionLeft;
[self.view addGestureRecognizer:rightSwipeGesture];
[self.view addGestureRecognizer:leftSwipeGesture];

[_webView.scrollView.panGestureRecognizer requireGestureRecognizerToFail:rightSwipeGesture];
[_webView.scrollView.panGestureRecognizer requireGestureRecognizerToFail:leftSwipeGesture]; 
```

那应该对你有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T16:50:22.443

您必须继承 UIWebView 并覆盖手势识别器调用。

编辑 - 看看这篇文章[处理 UIWebview 内部](https://stackoverflow.com/questions/990870/handling-touches-inside-uiwebview)的触摸和这个链接[http://mithin.in/2009/08/26/detecting-taps-and-events-on-uiwebview-the-right-way/](http://mithin.in/2009/08/26/detecting-taps-and-events-on-uiwebview-the-right-way/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-20T19:57:46.780

[Johannes Fahrenkrug 的回答](https://stackoverflow.com/a/18834365/462162)成功地有条件地阻止了 webView 的内置平移手势。但是，我发现这仅在 webView 的平移手势非常慢时才有效……如果我以任何合理的速度平移 webView，就会触发滑动手势。我只想要快速滑动来触发滑动手势，而中等或慢速平移来使用默认的 webView 滚动功能。

UISwipeGestureRecognizer 没有用于自定义滑动速度的属性，而 UIPanGestureRecognizer 具有速度属性但无法设置所需的速度，因此我根据[本教程](http://blog.federicomestrone.com/2012/01/31/creating-custom-gesture-recognisers-for-ios/)设置了自定义手势识别器：

**FastSwipeGestureRecognizer.h**

```
#import <UIKit/UIKit.h>
#import <UIKit/UIGestureRecognizerSubclass.h>

#define REQUIRED_TOUCHES 5
#define REQUIRED_STRAIGHTNESS 3
#define REQUIRED_TIME .1

typedef enum {
    DirectionUp = 0,
    DirectionRight,
    DirectionDown,
    DirectionLeft
} Direction;

@interface FastSwipeGestureRecognizer : UIGestureRecognizer {
    CGPoint firstTouchLocation;
    NSTimeInterval firstTouchTime;
    int touchesCount;

    Direction direction;
}

@property (nonatomic) CGPoint firstTouchLocation;
@property (nonatomic) NSTimeInterval firstTouchTime;
@property (nonatomic) int touchesCount;

@property (nonatomic) Direction direction;

@end 
```

**FastSwipeGestureRecognizer.m**

```
#import "FastSwipeGestureRecognizer.h"

@implementation FastSwipeGestureRecognizer

@synthesize firstTouchLocation;
@synthesize firstTouchTime;
@synthesize touchesCount;

-(void)reset {
    [super reset];
}

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    [super touchesBegan:touches withEvent:event];
    self.firstTouchLocation = [[touches anyObject] locationInView:self.view];
    self.firstTouchTime = [NSDate timeIntervalSinceReferenceDate];
    self.touchesCount = 1;
    self.state = UIGestureRecognizerStatePossible;
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    [super touchesMoved:touches withEvent:event];
    self.touchesCount++;
    if (self.touchesCount > REQUIRED_TOUCHES) { // wait until we have a few touches before we evaluate the gesture
        CGPoint thisTouchLocation = [[touches anyObject] locationInView:self.view];
        float horizontalRatio = (ABS(thisTouchLocation.x - self.firstTouchLocation.x) / ABS(thisTouchLocation.y - self.firstTouchLocation.y));
        float verticalRatio = 1 / horizontalRatio;
        NSTimeInterval elapsedTime = [NSDate timeIntervalSinceReferenceDate] - self.firstTouchTime;
        NSLog(@"swipe? %f, %f, %f", verticalRatio, horizontalRatio, elapsedTime);

        // if we're moving straight enough and fast enough, complete the gesture
        if (((horizontalRatio > REQUIRED_STRAIGHTNESS)||(verticalRatio > REQUIRED_STRAIGHTNESS))&&(elapsedTime < REQUIRED_TIME)) {
            if (horizontalRatio > REQUIRED_STRAIGHTNESS) {
                self.direction = (thisTouchLocation.x > self.firstTouchLocation.x) ? DirectionRight : DirectionLeft ;
            } else if (verticalRatio > REQUIRED_STRAIGHTNESS) {
                self.direction = (thisTouchLocation.y > self.firstTouchLocation.y) ? DirectionDown : DirectionUp ;
            }
            self.state = UIGestureRecognizerStateRecognized;
        } else {
            self.state = UIGestureRecognizerStateFailed;
        }
    }
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
    [super touchesEnded:touches withEvent:event];
    if (self.touchesCount < REQUIRED_TOUCHES) {
        self.state = UIGestureRecognizerStateFailed;
    }
}

- (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event {
    [super touchesCancelled:touches withEvent:event];
    self.state = UIGestureRecognizerStateFailed;
}

@end 
```

**设置你的手势**

```
FastSwipeGestureRecognizer *swipeGesture = [[FastSwipeGestureRecognizer alloc] initWithTarget:self action:@selector(handleSwipeGesture:)];
[self.view addGestureRecognizer:swipeGesture];
[self.webView.scrollView.panGestureRecognizer requireGestureRecognizerToFail:swipeGesture]; 
```

**然后检测接收到的手势的方向**

```
- (void)handleSwipeGesture:(FastSwipeGestureRecognizer *)gesture {
    if (gesture.state == UIGestureRecognizerStateEnded) {
        if (gesture.direction == DirectionRight) {
            // do something
        } else if (gesture.direction == DirectionLeft) {
            // do something
        } else if (gesture.direction == DirectionUp) {
            // do something
        } else if (gesture.direction == DirectionDown) {
            // do something
        }
    }
} 
```

请注意，这只需要一个手势来处理所有四个滑动方向，而不是每个方向一个 UISwipeGestureRecognizer。

# jquery - CakePHP 2.1 在激活安全组件的情况下进行 jquery ajax 调用

> ID：11869336
> 
> 赞同：10
> 
> 时间：2012-08-08T16:49:07.720
> 
> 标签：jquery, ajax, cakephp-2.1

**终于**找到了解决方案：

如果有人有这个问题，把它放在你的 beforefilter 中。

```
$this->Security->unlockedActions = array('givestar'); 
```

并将库更新到 Cake 2.3

**问题：**

我正在努力解决 SECURITY 组件在我的 ajax 调用中对我的影响。

变量 ID = 1；

```
$.ajax({
    type: "post",
    url: "/messages/givestar/",
    data: {"id" : id},
    dataType: "json"
 }); 
```

我只是想发送控制器的 ID 以更新 id=id 的消息

但是安全组件在我所有的 ajax 调用中都对我造成了黑洞。

任何人都知道我如何使它与激活的安全组件一起工作？

谢谢！

你太棒了！

-汤姆

建议？？？

**UPDATE2** 经过一些测试后，我从黑洞中收到了一个 AUTH 错误。

```
From Book: 
‘auth’ Indicates a form validation error, or a controller/action mismatch error. 
```

我已经仔细检查了所有 ACO 节点，它们都很好。我在我的 ajax 调用中反对来自安全组件的 FORM VALIDATION ERROR。

**更新：**

应用控制器.php

```
public $components = array(
        'Acl',
        'Auth',
        'Session',
    'Security',
    'Cookie'
    );
public function beforeFilter() {
    $this->Security->blackHoleCallback = 'blackhole';
}
public function blackhole($type) {
     $this->Session->setFlash(__('ERROR: %s',$type), 'flash/error');
} 
```

消息控制器.php

```
 public $components = array('RequestHandler');

        public function beforeFilter() {
            parent::beforeFilter();
        }

public function givestar() {
        $this->autoRender = false;
            if ($this->request->is('ajax')) {

                echo 'Working';
            }
        return;
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T20:58:30.990

在前置过滤器中：

```
$this->Security->unlockedActions = array('givestar'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T07:14:41.280

安全组件第 396 行：

```
if (!isset($controller->request->data['_Token'])) {
    if (!$this->blackHole($controller, 'auth')) {
        return null;
    }
} 
```

所以我想如果您想保护此操作，您必须使用额外生成的“_Token”密钥发送数据。此密钥是使用 Form->secure($fields) 方法生成的（实际方法生成具有适当值的隐藏输入）。

# perl - Perl 文件扩展名

> ID：11869337
> 
> 赞同：1
> 
> 时间：2012-08-08T16:49:08.343
> 
> 标签：perl

我们很少有文件没有标准的 perl 扩展名，如 cgi 等。其中有几个以***.cfm 结尾**，并在其中包含 perl 代码。

现在我不确定为什么开发人员决定使用冷融合扩展并决定在其中使用 perl，但我们现在无法更改文件名，我们需要进行一些配置更改，以便 perl 能够呈现*.cfm 文件。

有没有办法我们可以修改 perl 配置以接受 *.cfm 文件并将它们呈现为 perl 脚本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T17:41:45.683

我会冒昧地猜测您实际上是在询问通过 Apache 将“.cfm”文件作为 CGI 脚本运行。在这种情况下，您将使用“处理程序”告诉 Apache 将*所有**.cfm 文件视为 Perl 脚本。如果我猜到了发生了什么，请将其添加到您的 Apache 2.2 配置中：

```
AddHandler cgi-script .cfm 
```

另外，确保 Perl 脚本在第一行有正确的“shebang”行，通常是：

```
#!/usr/bin/perl 
```

如果您希望某些 *.cfm 文件仍被视为 Cold Fusion，那么您将需要不同的解决方案。

# objective-c - GKAchievementDescription 和解锁列表

> ID：11869346
> 
> 赞同：0
> 
> 时间：2012-08-08T16:49:30.937
> 
> 标签：objective-c, ios, gamekit

有没有办法获得所有具有成就状态（锁定、解锁或百分比）的 GKAchievementDescription 列表？

我刚刚记录了

```
[GKAchievementDescription loadAchievementDescriptionsWithCompletionHandler:^(NSArray *descriptions, NSError *error) 
 {
     NSLog(@"description %@",descriptions);
 }]; 
```

但我不知道如何知道每个成就的每个状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T17:15:08.400

这是一个想法：

做这个：

```
[GKAchievement loadAchievementsWithCompletionHandler:^(NSArray *achievements, NSError *error) { 

    [GKAchievementDescription loadAchievementDescriptionsWithCompletionHandler:^(NSArray *descriptions, NSError *error) 
     {
       for(GKAchievementDescription *myDescription in descriptions) {

for(GKAchievement *myAch in achievements) {

if ([myDescription.identifier isEqualToString:[myAch.identifier])
// the achievement is earned earned add it to array - do things - break;
  }
}

}]; }]; 
```

这个想法是当你用`loadAchievementsWithCompletionHandler`方法获得成就时，它只返回提交的成就。从那里您可以过滤所需的描述。

# javascript - Jon Raasch jQuery 幻灯片脚本无法在 Chrome 中为我工作？

> ID：11869350
> 
> 赞同：0
> 
> 时间：2012-08-08T16:49:44.133
> 
> 标签：javascript, html, css

```
/*** 
    Simple jQuery Slideshow Script
    Released by Jon Raasch (jonraasch.com) under FreeBSD license: free to use or modify, not responsible for anything, etc.  Please link out to me if you like it :)
***/

function slideSwitch() {
    var $active = $('#slideshow IMG.active');

    if ( $active.length == 0 ) $active = $('#slideshow IMG:last');

    // use this to pull the images in the order they appear in the markup
    var $next =  $active.next().length ? $active.next()
        : $('#slideshow IMG:first');

    // uncomment the 3 lines below to pull the images in random order

    // var $sibs  = $active.siblings();
    // var rndNum = Math.floor(Math.random() * $sibs.length );
    // var $next  = $( $sibs[ rndNum ] );

    $active.addClass('last-active');

    $next.css({opacity: 0.0})
        .addClass('active')
        .animate({opacity: 1.0}, 500, function() {
            $active.removeClass('active last-active');
        });
}

$(function() {
    setInterval( "slideSwitch()", 2500 );
}); 
```

我需要滑动所有 5 张图片。问题是在第二张图像上停止并在刷新后继续正常工作。如果您粘贴网址（或通过在浏览器中按下），则只会显示 2 张图片。

如果我将 animate 和 setinterval 都更改为 1000，则动画效果不佳。

有人可以帮助我如何完成这项工作。

* * *

它看起来像一个错误，因为如果我刷新页面，它就可以工作，但当我打开页面时就不行。这是错误的详细信息[https://stackoverflow.com/questions/11872278/is-this-a-bug-in-google-chrome-slider-not-worked](https://stackoverflow.com/questions/11872278/is-this-a-bug-in-google-chrome-slider-not-worked)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T17:42:10.337

不确定是你想要的但改变了这个：

```
$(function() {
    setInterval( "slideSwitch()", 2500 );
});​ 
```

到

```
setInterval(slideSwitch, 2500); 
```

[例子](http://jsfiddle.net/w9tnq/12/)

**PS**
适用于 Chrome v。`21.0.1180.60 m`

# android - 库中的android自定义标题栏

> ID：11869362
> 
> 赞同：0
> 
> 时间：2012-08-08T16:50:22.247
> 
> 标签：android, title

我用一个活动创建了自己的库，并在另一个项目中使用它。但是，当我为我的项目中的活动创建带有自定义标题栏的自己的应用程序主题时，我遇到了问题。我的图书馆中的活动（当然）有默认标题栏。任何想法如何用最简单的方法解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T16:55:24.037

您可能可以扩展该库的 Activity，然后手动设置它。[检查有人在这里](https://stackoverflow.com/questions/2416844/how-to-set-custom-title-bar-textview-value-dynamically-in-android)问过的类似情况

# mysql - MySQL表被标记为崩溃

> ID：11869377
> 
> 赞同：6
> 
> 时间：2012-08-08T16:51:01.230
> 
> 标签：mysql, myisam

我对 MySQL 数据库相当陌生。我反复看到来自 MySQL 的错误，说该表被标记为崩溃并且应该修复。但是，我可以使用命令 myisamchk 来修复崩溃的表。顺便说一句，我在 MySQL 中使用了 MISAM 数据库引擎。

我只是想知道在什么情况下数据库表会崩溃以及如何防止它再次发生？

我正在使用 mysqltcl 库（3.0）从 Tcl（8.5）脚本连接到 MySQL（5.0）数据库。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-08T17:08:02.077

MyISAM 表很容易崩溃。每个表中都有标头信息，用于跟踪 MyISAM 表有多少打开的文件句柄。

如果 mysqld 崩溃，任何打开文件句柄的 MyISAM 表都没有机会在每个文件句柄关闭时减少文件句柄计数。因此，如果一个新的文件句柄打开一个 MyISAM 表（.MYD 文件）并且 mysqld 发现 MyISAM 表认为打开的文件句柄数与 MyISAM 表实际打开的文件句柄数之间不匹配，则该表是宣布坠毁。

有四 (4) 种方法可以处理此问题：

## 方法 #1：设置自动 MyISAM 修复

请参阅我的帖子[https://dba.stackexchange.com/a/15079/877](https://dba.stackexchange.com/a/15079/877)，了解如何在 MySQL 重新启动时进行设置（2012 年 3 月 15 日）

## 方法 #2：使用 InnoDB 而不是 MyISAM

InnoDB 在存储引擎的初始化中内置了崩溃恢复。MyISAM 没有

## 方法 #3：使用 Aria 代替 MyISAM

Aria 是 MariaDB 的 MyISAM 替代品。它具有针对单个表的崩溃恢复机制。

## 方法 #4：不要在 mysqld 上杀死 -9

如果 mysqld 有意或无意地崩溃，所有打开的 MyISAM 表的标头信息将使它们进入崩溃状态。避免不得不手动杀死 mysqld。

# java - 在swing gui中获取空白窗口

> ID：11869378
> 
> 赞同：2
> 
> 时间：2012-08-08T16:51:01.547
> 
> 标签：java, swing

> **可能重复：**
> [paintComponent () 永远不会在 JFrame 上执行](https://stackoverflow.com/questions/8077156/paintcomponent-never-executes-on-a-jframe)

我正在使用以下代码来显示两个字符串，我直接在 jfame 上绘制它们，而不是将它们作为组件添加或添加到 jpanel。但是为什么我得到一个空白窗口而不是得到字符串。我错在哪里？

```
import java.awt.Color;
import java.awt.Container;
import java.awt.Graphics;
import java.awt.Graphics2D;

import javax.swing.JFrame;
import javax.swing.SwingUtilities;

public class SimpleAttributes extends JFrame{

SimpleAttributes()
{

    super("Simple Attributes");
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setSize(300, 200);
    //setUndecorated(true);
    Container cp=this.getContentPane();
    cp.setBackground(new Color(0,200,0,0));

    setVisible(true);
}

public void paintComponent(Graphics g)
{
    Graphics2D g2=(Graphics2D)g.create();
    g2.setColor(Color.RED);
    g2.drawString("One", 10, 10);

    g.drawString("Two", 10,40);

}
public static void main(String[] args) {
    // TODO Auto-generated method stub
SwingUtilities.invokeLater(new Runnable(){public void run(){new SimpleAttributes();}});
}

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T16:56:51.053

JFrame is not a component, therefor there's no `paintComponent()` function for it. [See the API documentation](http://docs.oracle.com/javase/7/docs/api/javax/swing/JFrame.html).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T16:53:36.610

如上所述是不正确的，没有这样的方法，（我打字速度很快）并考虑了JPanels。

您可以做的是创建自己的方法`Container`并覆盖该`paint()`方法，然后将其用作您`ContentPane`的方法`frame.setContentPane(Container con)`：

```
import java.awt.Color;
import java.awt.Container;
import java.awt.Graphics;
import java.awt.Graphics2D;

import javax.swing.JFrame;
import javax.swing.SwingUtilities;

public class SimpleAttributes extends JFrame {

    SimpleAttributes() {

        super("Simple Attributes");
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setSize(300, 200);
        //setUndecorated(true);
        setContentPane(new MyContainer());
        getContentPane().setBackground(new Color(0, 200, 0, 0));

        setVisible(true);
    }

    public static void main(String[] args) {
        // TODO Auto-generated method stub
        SwingUtilities.invokeLater(new Runnable() {

            public void run() {
                new SimpleAttributes();
            }
        });
    }
}

class MyContainer extends Container {

    @Override
    public void paint(Graphics g) {
        super.paint(g);
        Graphics2D g2 = (Graphics2D) g.create();
        g2.setColor(Color.RED);
        g2.drawString("One", 10, 10);
        g.drawString("Two", 10, 40);
    }
} 
```

如对一个答案的评论中所述，您可以使用 的`paint()`来`JFrame`补偿对话框标题的偏移量：

```
import java.awt.Color;
import java.awt.Container;
import java.awt.Graphics;
import java.awt.Graphics2D;

import javax.swing.JFrame;
import javax.swing.SwingUtilities;

public class SimpleAttributes extends JFrame {

    SimpleAttributes() {

        super("Simple Attributes");
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setSize(300, 200);
        //setUndecorated(true);
        getContentPane().setBackground(new Color(0, 200, 0, 0));

        setVisible(true);
    }

    @Override
    public void paint(Graphics g) {
        super.paint(g);
        Graphics2D g2 = (Graphics2D) g.create();
        g2.setColor(Color.RED);
    g2.drawString("One", 10, 10);//wont show
        g2.drawString("One", 50, 50);//will show
        g.drawString("Two", 40, 40);//will show
    }

    public static void main(String[] args) {
        // TODO Auto-generated method stub
        SwingUtilities.invokeLater(new Runnable() {

            public void run() {
                new SimpleAttributes();
            }
        });
    }
} 
```

but all of thats just going to give you more headaches why not just do it the preferred way? A `JPanel` and override `paintComponent(Graphics g);`

# python - 在 Django 中，request.META[] 是为请求添加特定信息的正确位置吗？

> ID：11869383
> 
> 赞同：3
> 
> 时间：2012-08-08T16:51:18.063
> 
> 标签：python, django, request, tastypie

我正在使用 Django，并且想要存储仅在请求期间相关的数据，而不是在会话中。

向 request.META 添加一些内容是否正确，例如：

```
request.META['acl'] = acl 
```

在我的情况下，我正在使用带有自定义授权类的 Tastypie，并且需要一种在函数之间传递数据的方法......似乎在请求中存储一些东西是正确的做法......我只是不知道在哪里存储这些信息。我的课看起来像：

```
class MyAuthorization(Authorization):
    def is_authorized(self, request, object=None):
        acl = getMyAccessControlList(request.method,request.session['username'])
        for permission in acl:
            if permission in self.permissions[request.method]:
                request.META['acl'] = acl
                return True
        return False

    def apply_limits(self, request, object_class, rs):
        if 'HAS_ALL_ACCESS' in request.META['acl']:
                return rs
        else if 'HAS_USER_ACCESS' in request.META['acl']:
                rs = rs.filter(object_class.user==request.session['username'])
                return rs 
```

此外，Tastypie 创建了一个 REST 资源对象，所有线程都使用一个授权类，因此将其放在授权类上不是线程安全的。

**更新**

根据 Chris Pratt 的反馈，**不**，修改请求没有意义。进一步探索，最初通过自定义中间件修改请求似乎是合适的，然后在请求的其余部分保持不变： [https ://docs.djangoproject.com/en/1.4/topics/http/middleware](https://docs.djangoproject.com/en/1.4/topics/http/middleware)

在这种情况下，中间件将类似于：

```
class AccessControlListMiddleware(object):
    def process_view(self,request,view_func,view_args,view_kwargs):
        permissions = set()
        for role in request.session['permissions']:
            for permission in PERMISSION_LIST[request.method][role]:
                permissions.add(permission)
        request.acl = list(permissions) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T17:23:11.840

不，不要弄乱`request`对象。特别是因为这些是同一类上的方法，您应该简单地将数据分配给`self`：

```
self.acl = getMyAccessControlList(request.method,request.session['username'])

...

if 'HAS_ALL_ACCESS' in self.acl: 
```

# javascript - 在 Node.js 中处理 .js 和 .css

> ID：11869386
> 
> 赞同：0
> 
> 时间：2012-08-08T16:51:30.093
> 
> 标签：javascript, jquery, css, node.js, socket.io

我正在尝试使用 node.js 和 jQuery 创建一个简单的聊天应用程序，但我在控制台中收到错误消息，提示“$ 未定义”。我正在关注一个教程，其中 authr 使用 jquery 没有问题。

我的chat.js（服务器）：

```
var http = require('http'),
sys = require('sys'),
fs = require('fs'),
ws = require('./ws.js');

var clients = [];
http.createServer(function(req,res){
    res.writeHead(200,{
        'Content-Type': 'text/html'
    });
    var rs = fs.createReadStream(__dirname + '/test.html');
    sys.pump(rs, res);
}).listen(4000);

    ws.createServer(function(websocket){

    websocket.on('connect', function(resource){
        clients.push(websockets);
        websocket.write('Welcome');
    });

    websocket.on('data', function(data){
        clients.forEach(function(client){
            client.write(data);
        });
    });

    websocket.on('close',function(){
        var pos = clients.indexOf(websocket);
        if(pos >= 0){
            clients.splice(pos, 1);
        }
    });
}).listen(8081); 
```

test.html（客户端）：

```
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Untitled Document</title>
<script type="text/javascript" src="jquery-1.7.2.min.js"></script>
<script type="text/javascript">
    $(document).ready(function(e) {
        ws = new WebSocket("ws://localhost:8080");
        ws.onmessage = function(event){
            var data = data.replace(/&/g, "&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");

            $('#log ul').append('<li>' + data + '</li>');
            }
    });
</script>
</head>

<body>
<div id="log"><ul></ul></div>
  <div id="console">
  <input type="text" id="entry"/>
  </div>
  </div>

</body>
</html> 
```

在删除所有 .css 和其他 .js src 之前，我遇到了错误，所以我很确定问题出在服务器中的“Content-Type”代码上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T16:56:49.057

在服务器端，您使用的代码非常旧。`sys.pump`已被弃用至少一年多。

我建议您阅读[socket.io](http://socket.io/)中的示例。示例中也恰好有一个[聊天服务器。](https://github.com/LearnBoost/socket.io/tree/master/examples/chat)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T16:58:43.967

谁在为您的静态文件提供服务？从您拥有的代码来看，您提供的唯一静态文件似乎是 HTML 页面。

您需要添加一些代码来处理特定位置的所有静态文件。基本上，您需要处理您的所有静态文件

```
http.createServer(function() {...}) 
```

请参阅：[http ://www.sitepoint.com/serving-static-files-with-node-js/](http://www.sitepoint.com/serving-static-files-with-node-js/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T17:01:24.500

我怀疑问题是您没有从服务器提供 jquery-1.7.2.min.js，因此网页没有加载 jquery，因此没有 $。首先，尝试引用托管的 jquery 并查看是否可以解决您的问题。

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script> 
```

虽然与您的问题不完全相关，但如果您正在构建一个公共网站，那么引用托管 jquery（和其他库）通常是一个好主意，因为您的用户可能已经有一个本地缓存的副本（感谢其他站点）一样的东西）。请参阅[http://encosia.com/3-reasons-why-you-should-let-google-host-jquery-for-you/](http://encosia.com/3-reasons-why-you-should-let-google-host-jquery-for-you/)以获得对此的合理解释。

不过，一般来说，您会想要提供一些静态文件：您自己的 css 和 js、图像等。有 -[很多](http://www.sitepoint.com/serving-static-files-with-node-js/)-[帖子](http://fromanegg.com/post/18352790356/how-to-make-a-node-js-static-file-server-part-1)-描述[了](http://www.thecodinghumanist.com/blog/archives/2011/5/6/serving-static-files-from-node-js)如何使用节点进行此操作，但您可能希望查看这样的专用模块：[https ://github.com/cloudhead/node-static](https://github.com/cloudhead/node-static)

# iis - SSL = 无法为 IIS 创建证书（无法从 KEY+Certificate+RootCa 创建 PFX 文件）

> ID：11869389
> 
> 赞同：1
> 
> 时间：2012-08-08T16:51:39.917
> 
> 标签：iis, ssl, openssl, crt, cer

我刚刚从 RapidSSL 获得了 4 个文件，我想将它们用于 IIS Express。为此，我需要创建一个 PFX 文件。

我有 CSR、KEY、证书、ROOT/CA。这里有：

CSR => 我将其保存为 CSR.csr

```
-----BEGIN CERTIFICATE REQUEST-----
... hidden :)
-----END CERTIFICATE REQUEST----- 
```

KEY -> 我保存为 key.pem

```
-----BEGIN RSA PRIVATE KEY-----
... hidden :)
-----END RSA PRIVATE KEY----- 
```

证书 -> 我保存为 cert.cer

```
-----BEGIN CERTIFICATE-----
... hidden :)
-----END CERTIFICATE----- 
```

Root/CA -> 我保存为 CA.cer

```
-----BEGIN CERTIFICATE-----
... hidden :)
-----END CERTIFICATE----- 
```

我试过这个命令：

```
openssl pkcs12 -inkey key.pem -in cert.crt -export -out cert_pfx.pfx 
```

将“屏幕”加载到随机状态 - 完成 没有证书与私钥匹配

我也试过这个命令：

```
openssl pkcs12 -export -out cert_pfx.pfx -inkey key.pem -in cert.crt -certfile CA.crt 
```

这里同样的错误。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T11:44:25.707

看看这里：http: [//support.servertastic.com/convert-pem-to-pfx/](http://support.servertastic.com/convert-pem-to-pfx/)

确保私钥确实签署了实际证书。如果它是 RapidSSL，则可能值得再次重新颁发证书以确保证书正确。您可以在此处免费执行此操作：[https ://products.geotrust.com/orders/orderinformation/authentication.do](https://products.geotrust.com/orders/orderinformation/authentication.do)

# ios - iOS SDWebImage 淡入新图像

> ID：11869390
> 
> 赞同：13
> 
> 时间：2012-08-08T16:51:41.120
> 
> 标签：ios, image, asynchronous, fade, sdwebimage

我一直在我的 iPhone 应用程序上使用 SDWebImage 来处理所有图像加载。我正在使用占位符图像，并且我想在新图像加载后交叉淡入淡出或淡入淡出。我正在使用成功块来设置图像，并且效果很好。无论我尝试什么，图像都不会淡入。我尝试将动画代码发送回主线程，但这也无济于事。它只是立即加载......没有动画。

这是我的代码。有什么想法吗？

```
// load placeholder image
NSURL *url = ...
_imageView = [[UIImageView alloc] init];
[_imageView setImage:[UIImage imageNamed:@"loading.jpg"]];

// request image
SDWebImageManager *manager = [SDWebImageManager sharedManager];
[manager downloadWithURL:url
                delegate:self
                 options:0
                 success:^(UIImage *image) {

                     [UIView transitionWithView:_imageView
                                       duration:3.0
                                        options:UIViewAnimationOptionTransitionCrossDissolve
                                     animations:^{
                                         [_imageView setImage:image];
                                     } completion:NULL];

}
failure:nil]; 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-08T17:22:31.663

您可以在动画块之前将 imageView.alpha 设置为 0，然后在动画块中让它动画回 imageView.alpha = 1.0;

```
// load placeholder image
NSURL *url = ...
_imageView = [[UIImageView alloc] init];
[_imageView setImage:[UIImage imageNamed:@"loading.jpg"]];

// request image
SDWebImageManager *manager = [SDWebImageManager sharedManager];
[manager downloadWithURL:url
            delegate:self
             options:0
             success:^(UIImage *image, BOOL cached) {

                  imageView.alpha = 0.0;
                 [UIView transitionWithView:_imageView
                                   duration:3.0
                                    options:UIViewAnimationOptionTransitionCrossDissolve
                                 animations:^{
                                     [_imageView setImage:image];
                                      imageView.alpha = 1.0;
                                 } completion:NULL];

}
failure:nil]; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-04-01T21:28:28.887

对于 SWIFT，我创建了这个扩展。只有当图像实际上必须从网络下载时，它才会淡入。如果它是从缓存中提供的，那么它不会褪色。

```
import UIKit
import SDWebImage

extension UIImageView {

    public func sd_setImageWithURLWithFade(url: NSURL!, placeholderImage placeholder: UIImage!)
    {        self.sd_setImageWithURL(url, placeholderImage: placeholder) { (image, error, cacheType, url) -> Void in

        if let downLoadedImage = image
        {
            if cacheType == .None
            {
                self.alpha = 0
                UIView.transitionWithView(self, duration: 0.2, options: UIViewAnimationOptions.TransitionCrossDissolve, animations: { () -> Void in
                    self.image = downLoadedImage
                    self.alpha = 1
                    }, completion: nil)

            }
        }
        else
        {
            self.image = placeholder
        }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2018-07-31T17:11:38.453

`SDWebImage`现在从 4.3.0 开始提供内置的淡入淡出过渡。

```
imageView.sd_imageTransition = SDWebImageTransition.fadeTransition;
imageView.sd_setImage(with: ...) 
```

请参阅此处的文档，您可以使用他们的 API 执行更复杂的转换。

[https://github.com/rs/SDWebImage/wiki/Advanced-Usage#image-transition-430](https://github.com/rs/SDWebImage/wiki/Advanced-Usage#image-transition-430)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2018-09-12T15:51:49.313

这是可以帮助我并工作得很好的代码。

```
photoImageView.sd_imageTransition = .fade
photoImageView.sd_setImage(with: URL(string: imageUrl), completed: nil) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-05-16T11:13:15.193

这是@Zoltan Varadi的**Swift 4版本的答案：**

```
extension UIImageView {
    public func sd_setImageWithURLWithFade(url: URL!, placeholderImage placeholder: UIImage!) {
        self.sd_setImage(with: url, placeholderImage: placeholder) { (image, error, cacheType, url) -> Void in
            if let downLoadedImage = image {
                if cacheType == .none {
                    self.alpha = 0
                    UIView.transition(with: self, duration: 0.3, options: UIViewAnimationOptions.transitionCrossDissolve, animations: { () -> Void in
                        self.image = downLoadedImage
                        self.alpha = 1
                    }, completion: nil)   
                }
            } else {
                self.image = placeholder
            }
        }
    }
} 
```

我将持续时间更改为 0.3

您可以将此函数添加到扩展中，以便需要 completionHandler 块：

```
public func sd_setImageWithURLWithFade(url: URL!, placeholderImage placeholder: UIImage!, comple: @escaping (Bool)->()) {
    self.sd_setImage(with: url, placeholderImage: placeholder, options: .allowInvalidSSLCertificates) { (image, error, cacheType, url) in
        if let downLoadedImage = image {
            if cacheType == .none {
                self.alpha = 0
                UIView.transition(with: self, duration: 0.3, options: UIViewAnimationOptions.transitionCrossDissolve, animations: { () -> Void in
                    self.image = downLoadedImage
                    self.alpha = 1
                }, completion: { _ in
                    comple(true)
                })
            }
        } else {
            self.image = placeholder
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-02-19T08:11:00.317

**迅速：**

```
func setSDWebImageWithAnimation(imageViewToSet mImageView:UIImageView, URLToSet imageURL:NSURL!)
    {
        mImageView.image = UIImage(named: "favouritePlaceholder")
        SDWebImageManager.sharedManager().downloadImageWithURL(imageURL, options: nil, progress: nil) { (downloadedImage:UIImage!, error:NSError!, cacheType:SDImageCacheType, isDownloaded:Bool, withURL:NSURL!) -> Void in
            mImageView.alpha = 0
            UIView.transitionWithView(mImageView, duration: 1.0, options: UIViewAnimationOptions.TransitionCrossDissolve, animations: { () -> Void in
                mImageView.image = downloadedImage
                mImageView.alpha = 1
                }, completion: nil)

        }
    } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-02-17T09:56:49.327

试试这个：

```
[self.myImage sd_setImageWithURL:storyThumbnailURL placeholderImage:[UIImage imageNamed:@"xyz"] completed:^(UIImage *image, NSError *error, SDImageCacheType cacheType, NSURL *imageURL) {
    if (cacheType == SDImageCacheTypeNone) {
        self.myImage.alpha = 0;
        [UIView animateWithDuration:0.3 animations:^{
            self.myImage.alpha = 1;
        }];
    } else {
        self.myImage.alpha = 1;
    }
}]; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-09-29T06:13:31.037

这个扩展代码对我来说效果更好。

```
extension UIImageView {
  public func setImageWithFadeFromURL(url: NSURL, placeholderImage placeholder: UIImage? = nil, animationDuration: Double = 0.3) {
     self.sd_setImageWithURL(url, placeholderImage: placeholder) { (fetchedImage, error, cacheType, url) in
        if error != nil {
            print("Error loading Image from URL: \(url)\n(error?.localizedDescription)")
        }

        self.alpha = 0
        self.image = fetchedImage
        UIView.transitionWithView(self, duration: (cacheType == .None ? animationDuration : 0), options: .TransitionCrossDissolve, animations: { () -> Void in
            self.alpha = 1
        }, completion: nil)
    }
  }

  public func cancelImageLoad() {
    self.sd_cancelCurrentImageLoad()
  }
} 
```

# mysql - 如何加入/子查询第二个表

> ID：11869393
> 
> 赞同：0
> 
> 时间：2012-08-08T16:51:59.590
> 
> 标签：mysql, sql, join, subquery

我有两个表，一个表在每一行中都有一些信息以及另一个表包含的逗号分隔的 id 列表。现在我正在从表 A 中获取数据（使用逗号分隔的 id），并且我还想从表 B（包含附加信息的表）中获取所有数据。我想用最有效的 SQL 方法来做到这一点。

我正在考虑根据字段中的 id 将表 B 加入表 A，但我不确定这是否可能。同样重要的是要注意，我是根据另一个 IN 语句从表 A 中获取数据，所以我的最终目标是将表 B 中的所有行附加到表 A 的行，具体取决于表 A 行中的字段中的哪些 id （逐行计算）

如果有人可以遵循所有这些并知道我要做什么，我将不胜感激示例查询：D

如果您需要任何进一步的说明，我很乐意为您提供。

谢谢

现在设置表 A 的方式：

```
`table_a_id` VARCHAR ( 6 ) NOT NULL,
`table_b_ids` TEXT NOT NULL, -- This is a comma seperated list at the moment
-- More data here that is irrelevant to this question but i am grabbing 
```

表 B 设置如下：

```
`table_b_id` VARCHAR ( 6 ) NOT NULL,
`name` VARCHAR ( 128 ) NOT NULL,
-- More data that is not relevant to the question 
```

另外，我想最终切换到像 Cassandra 这样的 NOSQL 系统，从我简要阅读的内容来看，我知道 NOSQL 中没有连接之类的东西？额外的帮助是帮助我设置这些表格，这样我就可以以更少的转换和难度进行转换。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T16:57:46.730

您需要添加另一个表。

```
Person -- your Table A
------
PersonID 

Thing -- your Table B
------
ThingID
ThingName

PersonThing -- new intersection table
-------
PersonID
ThingID 
```

然后你的查询变成

```
SELECT * from Person
INNER JOIN PersonThing ON Person.PersonID = PersonThing.PersonID
INNER JOIN Thing ON PersonThing.ThingID = Thing.ThingID 
```

所以你现在在哪里

```
001 | Sam Spade | 12,23,14 
```

你将会拥有

```
Person
001 | Sam Spade

Thing
12 | box
23 | chair
14 | wheel

PersonThing
001 | 12
001 | 23
001 | 14 
```

这就是“标准化”其他答案的含义。

**编辑添加**

根据我对 NoSQL 的了解，您可以像这样绕过连接：

```
Person -- your Table A
------
PersonID
OtherPersonStuff

Thing -- your Table B
------
ThingID
ThingName
OtherThingStuff

PersonThing -- denormalized table, one record for each Thing held by each Person
-------
PersonID
ThingID
ThingName
OtherThingStuff 
```

为了换取占用额外空间（通过多次复制事物信息）和潜在的数据管理难题（保持副本同步），您可以获得更简单、更快的查询。

所以你的最后一张桌子看起来像这样：

```
PersonThing
001 | 12 | box   | $2.00
001 | 23 | chair | $3.00
001 | 14 | wheel | $1.00
002 | 12 | box   | $2.00
003 | 14 | wheel | $1.00 
```

在这种情况下，OtherThingStuff 是事物的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T16:56:12.053

您应该考虑规范化您的数据库模式以使用连接。使用逗号分隔的列表将不允许您使用任何 SQL IN 命令。

最好的方法是为每个唯一 ID 存储一行，然后你可以加入`TableA.id = TableB.id`

# python - 如何在 matplotlib 中以交互方式在绘图之间切换，或有选择地隐藏和显示绘图上的数据？

> ID：11869397
> 
> 赞同：5
> 
> 时间：2012-08-08T16:52:11.397
> 
> 标签：python, button, plot, matplotlib, png

我想要一个按钮，可以将正在显示的图从一组子图切换到另一组子图，因此有人可以轻松地在它们之间切换以直观地比较差异。如果我创建了几个数字，有没有办法显示一个按钮来选择正在显示的数字？或者有没有一种方法可以交互地选择性地显示和隐藏绘图上的数据向量子集？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T17:05:48.630

事实上，这可以通过 matplotlib[事件处理](http://matplotlib.sourceforge.net/users/event_handling.html)和[动画](http://matplotlib.sourceforge.net/api/animation_api.html)中的一个小技巧（调用`set_ydata`来改变情节）来完成。

例如，当您单击鼠标时，这会在两个绘图之间切换：

```
import matplotlib.pyplot as plt
import numpy as np
import itertools

fig = plt.figure()
ax = fig.add_subplot(111)
y1 = np.random.rand(10)
y2 = np.random.rand(10)
ys = itertools.cycle((y1,y2))
line, = ax.plot(next(ys))

def onclick(event):
    line.set_ydata(next(ys))
    fig.canvas.draw()

cid = fig.canvas.mpl_connect('button_press_event', onclick)
plt.show() 
```

* * *

你可以更喜欢这个`onclick`功能。例如，您可以使用它来显示所有绘图的缩略图，然后在下一次单击时，使用鼠标的位置来确定选择了哪个绘图。然后显示该图。

# javascript - Javascript FSM 的可能性/想法

> ID：11869400
> 
> 赞同：2
> 
> 时间：2012-08-08T16:52:20.590
> 
> 标签：javascript, fsm

所以我一直在 Unity3D 中制作东西，并决定尝试一个名为 Playmaker 的扩展。基本上是使用 FSM（有限状态机）来设计状态和事件流。您可以将事件拖到不同的状态以触发事件的另一种状态等。（参考：[http](http://www.hutonggames.com/features.html) ://www.hutonggames.com/features.html ）注意：我链接的实际产品与我的想法无关想尝试并建立。只是一个参考。

好吧，我希望能够在 Javascript 中做一些类似的事情。我想我有一些逻辑，但我更多地考虑用户体验。我希望用户能够使用 Javascript 在浏览器中使用我的逻辑创建 FSM。

我不要求任何人为我或任何东西编写代码，因为我在 javascript 方面有足够的经验来完成大部分工作。我更多地考虑将一个事件拖到另一个事件的方式，它会创建一个可视箭头，向用户显示连接了哪些事件。如果您查看我提供的参考链接上的第一个教程，您就会明白我的意思。箭头长度和曲线将是动态的。可能能够拖动状态以重新组织状态的布局。这显然也会改变箭头指向的方式。

我希望这一切都说得通。

想法？指针？也许有人已经做过这样的事情了？我确实找到了一个 Javascript 状态机，但它只生成一次，不允许用户移动任何东西，拖动到另一个状态的事件非常重要。

# java - Red5 部署应用程序

> ID：11869405
> 
> 赞同：-1
> 
> 时间：2012-08-08T16:52:47.520
> 
> 标签：java, deployment, red5

我在将应用程序部署到远程服务器时遇到问题。

我在本地有 red5 服务器，并在这里构建了一个应用程序。但我想将它部署到另一个远程服务器。我使用的是带有red5插件的Eclipse，所以本地部署没有问题。

如何将我的应用程序部署到另一台服务器？

我试图从 webapps 复制应用程序文件夹，但出现连接错误

```
NetConnection.Connect.Rejected: No scope 'myApp2' on this server.
NetConnection.Connect.Closed 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T18:57:23.667

如果其他服务器的java版本不同，则需要重新编译您的应用程序。确保您的开发服务器和远程服务器使用相同的 red5 版本和相同的 java 版本。

查看您的 red5.log 文件以确保应用程序正常启动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T07:08:25.757

在将 red5 应用程序部署到远程服务器之前，您应该[安装 red5 服务器](http://red5wiki.com/wiki/Installing_and_running_Red5)。之后，您可以编写使用 scp 和 sshexec ant 任务的 ant 脚本

# java - jGit 使用 RevWalk 获取 RevCommit 不返回任何内容

> ID：11869412
> 
> 赞同：6
> 
> 时间：2012-08-08T16:53:20.370
> 
> 标签：java, git, jgit

我是 jGit 和 Git 的新手。我正在尝试查询 git 存储库的提交历史，但我只想获取特定用户的提交。阅读文档我看到 RevWalk 将允许我添加 RevFilters 以限制搜索。

首先，我使用 Git 对象及其 log 方法来列出提交，并且效果很好。但是使用 RevWalk，什么也没有发生。

```
public static void main(String[] args) throws IOException, GitAPIException {
    FileRepositoryBuilder builder = new FileRepositoryBuilder();
    Repository repository = builder.setGitDir(new File("/home/joan/testGit/testMockito/.git"))
    .readEnvironment().findGitDir().build();

    //This works but I get all the commits
    Git git = new Git(repository);
    Iterable<RevCommit> log = git.log().call();
    for (Iterator<RevCommit> iterator = log.iterator(); iterator.hasNext();) {
        RevCommit rev = iterator.next();
        System.out.println(rev.getAuthorIdent().getName());
        System.out.println(rev.getFullMessage());
    }

    RevWalk walk = new RevWalk(repository);
    for (Iterator<RevCommit> iterator = walk.iterator(); iterator.hasNext();) {
        //It never cames in this block

        RevCommit rev = iterator.next();
        System.out.println(rev.getAuthorIdent().getName());
        System.out.println(rev.getFullMessage());
    }

} 
```

有什么建议吗？难道我做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-08T20:35:03.623

You need to add commits to the `RevWalk` by calling`markStart` before iterating over it.

For example to start the `RevWalk` with the current repository's `HEAD` commit:

`walk.markStart(walk.parseCommit(repository.resolve("HEAD")));`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T19:58:32.093

为什么不直接使用`LogCommand`from `org.eclipse.jgit.api`？

`Git git = new Git(db);`

`Iterable<RevCommit> log = git.log().call();`

然后，您可以根据返回的提交过滤作者。我还建议查看 Gittive，它是 JGit 之上的一层。你可以学习如何用它来实现 JGit 相关的东西：[https ://github.com/kevinsawicki/gitective/](https://github.com/kevinsawicki/gitective/)

You could do something like this:

`PersonIdent person = new PersonIdent("Chris", "chris@chris.com");`

`filters.add(new AuthorFilter(person));`

And then you can call `CommitFinder`... with the desired filters...

# php - PHP随着记录数的增加动态增加#行

> ID：11869417
> 
> 赞同：0
> 
> 时间：2012-08-08T16:53:38.463
> 
> 标签：php, html-table, row

我正在尝试从 MySQL 数据库中获取数据。我想随着数据库中数据的增加而增加行数，但标题行应该只有一个。像典型的表，但这里只需要动态增加#row。

```
 <?php 
    mysql_connect ("localhost","root","root123"); 
    mysql_select_db ("iterrordb"); 

    $sql = "select * from record"; 
       $result = mysql_query ($sql); 
        $num=mysql_numrows($result);
        while ($row = mysql_fetch_array($result)) 
              { 
              $RecID= $row["RecordID"]; 
              $DispName= $row["Name"]; 
              $date= $row["date"]; 
              $fleet= $row["phone"]; 
              $issue= $row["issue"]; 
              $issueRelatedTo= $row["issuRelatedTo"]; 
              } 
        //HTML CODE is start from here

        echo "<table border=\"1\" bordercolor=\"#0066FF\" style=\"background-color:#CCFFFF\" width=\"50%\" cellpadding=\"1\" cellspacing=\"0\">";
        echo"<tr>";
        echo"<td>Record ID</td>";
        echo"<td>Name</td>";
        echo"<td>Date</td>";
        echo"<td>Phone</td>";
        echo"<td>Issue</td>";
        echo"<td>Issue Related To</td>";
        echo"</tr>";
        echo"<tr>";     
        for ($i=0; $i<6; $i++)  
            {
                echo"<td> $row[$i]</td>";
            }
        echo"</tr>";

        echo"</table>";

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T17:01:55.167

将您的代码重写为

```
<?php 
mysql_connect ("localhost","root","root123"); 
mysql_select_db ("iterrordb"); 

$sql = "select * from record"; 
   $result = mysql_query ($sql); 
    $num=mysql_numrows($result);
    //HTML CODE is start from here

    echo "<table border=\"1\" bordercolor=\"#0066FF\" style=\"background-color:#CCFFFF\" width=\"50%\" cellpadding=\"1\" cellspacing=\"0\">";
    echo"<tr>";
    echo"<td>Record ID</td>";
    echo"<td>Name</td>";
    echo"<td>Date</td>";
    echo"<td>Phone</td>";
    echo"<td>Issue</td>";
    echo"<td>Issue Related To</td>";
    echo"</tr>";

        while ($row = mysql_fetch_array($result)) 
          { 
          $RecID= $row["RecordID"]; 
          $DispName= $row["Name"]; 
          $date= $row["date"]; 
          $fleet= $row["phone"]; 
          $issue= $row["issue"]; 
          $issueRelatedTo= $row["issuRelatedTo"]; 
          echo"<tr>"; 
         for ($i=0; $i<6; $i++)  
        {
            echo"<td> $row[$i]</td>";
        }
        echo"</tr>";
       }
    echo"</table>";

 ?> 
```

在当前上下文中，以下代码似乎不相关，但无论如何我没有删除它

```
 $RecID= $row["RecordID"]; 
      $DispName= $row["Name"]; 
      $date= $row["date"]; 
      $fleet= $row["phone"]; 
      $issue= $row["issue"]; 
      $issueRelatedTo= $row["issuRelatedTo"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T17:05:47.557

我不确定你的意思。但是，如果您想在查询结果中获得行数，这将达到目的：

```
$num_rows = mysql_num_rows($result); 
```

如果您想知道“while”循环中的当前行号是多少，只需添加一个迭代器。

如果你想动态更新你的 html 表。使用 jQuery：

```
$('#my_table').empty().load("/examples/getTableRows.php"); 
```

您可以每隔 5 秒调用一次此函数来更新表格。

# firefox-addon-sdk - Firefox Add-on SDK 中是否有 Chrome 的“setBadgeText”等效项？

> ID：11869419
> 
> 赞同：8
> 
> 时间：2012-08-08T16:53:45.877
> 
> 标签：firefox-addon-sdk

Chrome 的方法`chrome.browserAction.setBadgeText`将文本覆盖在扩展图标的顶部。例如，如果您想显示未读邮件总数，这很方便。

[开发Firefox Addon SDK](https://addons.mozilla.org/en-US/developers/docs/sdk/1.11/)扩展时是否有等效的方法，或者在运行时更改图标的最佳方法是什么？

从 SDK 1.11 版开始，我在 Firefox Add-on SDK API 中找不到类似的方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-28T08:50:51.337

**注意**：由于删除了小部件模块，此答案在 Firefox 38+ 中不再有效。请改用[ui 模块中的按钮之一](https://developer.mozilla.org/en-US/Add-ons/SDK/High-Level_APIs/ui)。

* * *

我已将`chrome.browserAction`API 移植到 Firefox，并将其作为 Jetpack 模块发布，请参阅**[https://github.com/Rob--W/browser-action-jplib](https://github.com/Rob--W/browser-action-jplib)**

如果您熟悉`chrome.browserAction`API，使用此模块再简单不过了。即使您以前从未创建过 Firefox 插件，也可以在几分钟内开始：

1.  安装附加 SDK（[来自 Mozilla 的说明](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/dev-guide/tutorials/installation.html)）。
2.  激活 SDK（通过运行`addon-sdk`）并创建样板文件（`cfx init`）。
3.  下载我的浏览器操作 Jetpack 库（[说明](https://github.com/Rob--W/browser-action-jplib#installation)）。
4.  编辑您的附加组件`package.json`，并添加`"browser-action"`为依赖项。

至此，您已经设置了所有先决条件。剩下的就是创建浏览器操作。

## 例子

这个插件在地址栏附近添加了一个浏览器操作，点击时会显示一个弹出窗口。当您在此弹出窗口的输入字段中键入内容时，选项卡的标题将更改为字段的值。

### `lib/main.js`

```
// lib/main.js
var badge = require('browserAction').BrowserAction({
    default_icon: 'images/icon19.png', // optional
    default_title: 'Badge title',      // optional; shown in tooltip
    default_popup: 'popup.html'        // optional
});

badge.onMessage.addListener(function(message, sender, sendResponse) {
    require('sdk/tabs').activeTab.title = message;
}); 
```

### `data/popup.html`

```
<!-- (Example) Please avoid inline JavaScript/CSS in your production code -->
<body style="width:200px;">
  Demo: This is a popup page.<br>
  Uses <code>extension.sendMessage</code> to notify the background page,
  which in turn changes the current tab's title to below value <br>
  <input onkeyup="extension.sendMessage(this.value);" style="display:block;">
</body> 
```

这是结果的简短截屏视频（注意：工具提示颜色略有偏差；[使用 byzanz 记录](https://askubuntu.com/a/201018/45058)）：

![截屏](../Images/38f98136dc7803ee7181c1952f6fa987.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-02-13T12:17:25.647

`firefox 36`您可以在插件的按钮中添加徽章（文本）..

```
var { ToggleButton } = require("sdk/ui/button/toggle");

var button = ToggleButton({
    id: "my-button1",
    label: "my button1",
    icon: "./icon-16.png",
    onChange: changed,
    badge: 0,
    badgeColor: "#00AAAA"
  });

function changed(state) {
  button.badge = state.badge + 1;
  if (state.checked) {
    button.badgeColor = "#AA00AA";
  }
  else {
    button.badgeColor = "#00AAAA";
  }
} 
```

[https://developer.mozilla.org/en-US/Add-ons/SDK/Low-Level_APIs/ui_button_action#Badged_buttons](https://developer.mozilla.org/en-US/Add-ons/SDK/Low-Level_APIs/ui_button_action#Badged_buttons)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-07T13:06:01.883

不，附加 SDK 中没有直接等效项。但是，您可能正在使用的[`widget`模块](https://addons.mozilla.org/en-US/developers/docs/sdk/1.11/packages/addon-kit/widget.html)可以显示任何 HTML 内容，而不仅仅是一个图标。您可以编写该 HTML 内容的脚本，例如在必要时显示一些文本。我尝试了以下方法`lib/main.js`：

```
var {data} = require("self");

var icon = require("widget").Widget({
  id: "my-widget",
  label: "My Widget",
  contentURL: data.url("icon.html"),
  contentScriptFile: data.url("icon.js"),
  onClick: function()
  {
    icon.port.emit("setBadgeText", "123");
  }
}); 
```

它使用`icon.html`文件来显示图标，并在`setBadgeText`图标顶部的文本需要更改时向附加的内容脚本发送消息。这是`data/icon.html`我测试的文件：

```
<html>
  <head>
    <meta charset="utf-8">
    <style type="text/css">
      #badgeText
      {
        position: absolute;
        bottom: 0px;
        right: 0px;
        font: 8px Sans-Serif;
        color: #FFFFFF;
        background-color: #C00000;
        border: 1px solid #800000;
      }
    </style>
  </head>
  <body>
    <img src="http://www.mozilla.org/favicon.ico">
    <div id="badgeText" hidden="true"></div>
  </body>
</html> 
```

我没有花太多精力使文本看起来像 Chrome 的徽章文本，您可能可以改进样式。默认情况下，文本是隐藏的（为简单起见，我使用了[HTML5`hidden`属性](https://developer.mozilla.org/en/docs/HTML/Global_attributes#attr-hidden)）。内容脚本也`data/icon.js`不太复杂：

```
self.port.on("setBadgeText", function(text)
{
  var element = document.getElementById("badgeText");
  element.textContent = text;
  element.hidden = (text == null);
}); 
```

它接收`setBadgeText`消息并相应地设置 HTML 文档中的文本。如果它作为徽章文本接收，它也会隐藏`badgeText`元素。`null`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-15T01:49:49.807

它没有在 MDN 中记录，但操作和切换按钮也接受[icon 属性](https://developer.mozilla.org/en-US/Add-ons/SDK/Low-Level_APIs/ui_button_action#ActionButton%28options%29)作为 base64 编码图像。通过了解这一事实，很容易创建例如 page-worker，并使用 html canvas 元素在图像图标上绘制工具提示，并使用`canvas.toDataURL()`方法返回它。

# c# - 如何将此 T-SQL 语句转换为可用于 MVC3 的代码

> ID：11869421
> 
> 赞同：1
> 
> 时间：2012-08-08T16:53:46.607
> 
> 标签：c#, sql-server, asp.net-mvc-3, controller

我正在编写一个 Web 应用程序，它将显示一个快速的帐户视图供经理使用，我正在使用 MVC 3。我编写了一些 jQuery，它允许用户使用下面的代码向下钻取类似于树视图。

**jQuery 花费函数**

```
//Spend Category function for monthly
        pa_click = function (pa_label) {
            PA_ID = pa_label.getAttribute('pa_id');

            var pa_details = document.getElementById('pa-details-' + PA_ID);

            jQuery.getJSON('@Url.Action("getAjaxSCs")', { PA: pa_label.title }, function (SCS) {
                pa_details.innerHTML = "";
                jQuery.each(SCS, function (index, SC) {
                    months_html = '';
                    for (var i = 0; i < 12; i++) {
                        months_html +=
                                            '<div id="SC-' + SC.SPEND_CATEGORY + '-' + months[i] + '" class="month-wrapper tree border-white">' +
                                            months[i] +
                                            '</div>';
                    }

                    pa_details.innerHTML +=

                            '<div id ="Spend-Category-' + SC.SPEND_CATEGORY + '" class="sc-wrapper tree border">' +
                                '<div id ="sc-title-' + SC.SPEND_CATEGORY + '" class="sc-title">' +
                                    '<div class = "sc-label" title = "' + SC.SPEND_CATEGORY + '" SC_id="' + SC.SPEND_CATEGORY + '" onclick = "sc_click(this)">' + SC.SPEND_CATEGORY + '</div>' +
                                    months_html +
                                '</div>' +
                                '<div id="sc-details-' + SC.SPEND_CATEGORY + '" class = "pa-details" style = "display:none">' + SC.SPEND_CATEGORY + '</div>' +
                            '</div>';
                })
            });
            jQuery('#pa-details-' + PA_ID).show('slide', { direction: 'up' }, 'fast');

        }; 
```

jQuery 在我的控制器中使用 JSON 返回从表中获取数据。控制器代码发布在下面。

**控制器代码**

```
[Authorize]
public ActionResult getAjaxSCs(string PA = null, float AmountList = 0)
{
            if (PA != null)
            {
                var SCList = from x in db.NDE_Actuals_Web select x;

                SCList = SCList.Where(x => x.PA == PA);

                return Json(SCList.Select(x => new { x.SPEND_CATEGORY}).Distinct().ToArray(), JsonRequestBehavior.AllowGet);

            }
            return View();
} 
```

我已经编写了一个 SQL 语句，它将返回我需要的数据，但我不知道如何将 SQL 语句转换为 C# 可以理解的东西，因为我必须使用 sum 函数。将返回我需要的数据的 SQL 语句如下。

**SQL查询**

```
select 
    pa, SUM(amount) 
from nde_actuals_web 
where pa = 'A0161000' and SPEND_CATEGORY = 'Capital' and ACCOUNTING_PERIOD = 1 
group by pa 
```

我需要帮助的两个部分是 jQuery 和控制器。对于 jQuery，我需要帮助了解如何在行输出中放置正确的字段。现在输出下面的这一行`Jan Feb Mar Apr May Jun July Aug Sep Oct Nov Dec`。

```
months_html = '';
                    for (var i = 0; i < 12; i++) {
                        months_html +=
                                            '<div id="SC-' + SC.SPEND_CATEGORY + '-' + months[i] + '" class="month-wrapper tree border-white">' +
                                            months[i] +
                                            '</div>';
                    } 
```

我需要将每个月的 3 个字母名称的输出更改为正确会计期间的总金额。因此，上面的 SQL 查询将返回一月的总金额，因为它来自会计期间 1。

在控制器中，我需要帮助将 T-SQL 查询转换为 C# 控制器 linq 查询。我希望这一切都是有道理的，如果不是，我会经常回来查看，随时提出任何可能有帮助的问题。谢谢你的帮助！

**更新：1**

我试过亚瑟在下面写的

`SCList = SCList.Where(x => x.PA == PA && x.SPEND_CATEGORY = "Capital" && x.ACCOUNTING_PERIOD = 1).OrderBy(x => x.PA);`

但我遇到了一个错误`'&&'`

`x.PA == PA && x.SPEND_CATEGORY`它在本节下方用红色下划线表示

“（运算符'&&'不能应用于布尔和字符串类型的操作数）”

`"Capital" && x.ACCOUNTING_PERIOD`它在本节下方用红色下划线表示

“（运算符'&&'不能应用于字符串和字符串类型的操作数）”

**更新：2**

好消息大家，代码不再给我红色波浪线，但它似乎确实导致网站崩溃。这是 Charlino 和 Yasser 在下面帮助我编写的新代码。

```
SCList = SCList.Where(x => x.PA == PA && x.SPEND_CATEGORY == "Capital" && x.ACCOUNTING_PERIOD == "1").OrderBy(x => x.PA); 
```

我尝试单步执行代码，`(function evaluation timed out)`当我尝试查看`SCList`此表中有超过 400,000 行时，我得到了一个结果，所以我并不感到惊讶，这以前发生过。我在 linq 查询中使用 distinct 解决了它，但我不知道我是否可以用这种查询做类似的事情。有什么建议么

此外，当我盯着代码时，我注意到了一些东西，它看起来不像我之前编写的 SQL 中的任何地方都对 Amount 求和，这是代码中必须具备的，否则它将列出每一行而不是总和我需要的金额。感谢大家的帮助！

# java - Java：SimpleDataFormat 解析时抛出异常

> ID：11869422
> 
> 赞同：3
> 
> 时间：2012-08-08T16:53:53.813
> 
> 标签：java, simpledateformat

我用`SimpleDataFormat`了很多年。我从来没有得到这个`Exception`

程序如下，我从网上得到了这个例子的代码：

```
 public static void main(String[] args) {
    // Make a new Date object. It will be initialized to the
    // current time.
    Date now = new Date();

    // Print the result of toString()
    String dateString = now.toString();
    System.out.println(" 1\. " + dateString);

    // Make a SimpleDateFormat for toString()'s output. This
    // has short (text) date, a space, short (text) month, a space,
    // 2-digit date, a space, hour (0-23), minute, second, a space,
    // short timezone, a final space, and a long year.
    SimpleDateFormat format = new SimpleDateFormat("EEE MMM dd HH:mm:ss zzz yyyy");

    // See if we can parse the output of Date.toString()
    try {
        Date parsed = format.parse(dateString);
        System.out.println(" 2\. " + parsed.toString());
    }
    catch(ParseException pe) {
        System.out.println("ERROR: Cannot parse \"" + dateString + "\"");
    }

    // Print the result of formatting the now Date to see if the result
    // is the same as the output of toString()
    System.out.println(" 3\. " + format.format(now));
} 
```

好的很简单。

结果：

```
 1\. Wed Aug 08 13:49:05 BRT 2012
    ERROR: Cannot parse "Wed Aug 08 13:49:05 BRT 2012"
 3\. Qua Ago 08 13:49:05 BRT 2012 
```

你看到 2\. 抛出错误了吗？对我来说，一切都是正确的。

我应该设置任何语言环境吗？

我的操作系统：Windows 7 Proffesional，Service Pack 1 JDK：jdk1.6.0_25

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-08T16:59:26.580

看起来这是一个语言环境问题，是的。如果您查看输出，它没有使用英文月份和日期名称 - 所以它也无法解析它们。创建时尝试指定英语`SimpleDateFormat`：

```
SimpleDateFormat format = new SimpleDateFormat("EEE MMM dd HH:mm:ss zzz yyyy",
                                               Locale.US); 
```

# css - 应用于 tr 的背景颜色不覆盖 td 不足的整行

> ID：11869423
> 
> 赞同：3
> 
> 时间：2012-08-08T16:53:56.580
> 
> 标签：css

当行中少一个 td 时，我应用于 tr 的背景颜色不会扩展表格的整个宽度。我用谷歌搜索了这个，我认为边界崩溃：崩溃；应该解决这个问题，但它对我不起作用。谢谢

```
 <table>
    <tr class="tr1">
      <td>1</td>
      <td>2</td>
    </tr>
    <tr class="tr2">
      <td>3</td>
    </tr>    
    </table>​

    .tr1 {
        background-color: gold;
    }
    .tr2 {
        background-color: blue;
    }
    td {
        border: none;
        width: 50px;
    }
    table { 
        border-collapse: collapse; 
    }​ 
```

[http://jsfiddle.net/V3xm8/5/](http://jsfiddle.net/V3xm8/5/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T16:58:00.053

您可以添加`colspan`一个`<td>`

```
<td colspan="2"> 
```

[**演示**](http://jsfiddle.net/demchak_alex/V3xm8/6/)

或添加空白`<td>`

```
<td>3</td><td></td> 
```

我更喜欢使用第一种方法，但一些“表格生成器”使用后者。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-08T17:00:58.633

您可以将 colspan=2 添加到 td 以将该 td 扩展到 2 列。

# php - Symfony 表单 - 部分对象更新

> ID：11869426
> 
> 赞同：1
> 
> 时间：2012-08-08T16:54:00.960
> 
> 标签：php, symfony1, doctrine

给定一个用于管理用户帐户的典型 Doctrine 实体，假设我想为注册用户提供一个表单，该表单仅包含用于修改其专业简历的字段。这意味着*只有*描述会被传递回`update`操作：

```
public function updateAction(Project $project, Request $request)
{
  $user = SOME_RETRIEVED_USER_OBJECT;
  $form = $this->createForm(new UserForm(), $user);
  $form->bindRequest($request);
  ...
} 
```

但是，在执行之后，*除了*`bindRequest`bio 之外的所有`$user`属性值都是空的。肯定有一些方法可以在 Symfony 中执行部分对象更新吗？

 ** * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T17:16:50.230

表单中的字段定义将更新的实体属性。最简单的方法是创建一个单独的表单类型，其中包含一个需要更新和使用的字段

```
$form = $this->createForm(new UserFormOneField(), $user); 
```

此外，您需要确保为这种情况选择正确的验证组。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-29T06:18:32.830

您可以将表单与收到的 POSTed 值进行比较，并删除不存在的值。您可以将此功能添加到您的控制器：

```
private function updateFormAccordingToRequest($form){
  $form_fields = array();
  foreach($form->getChildren() as $c) $form_fields[] = $c->getName();
  $post_fields = array_keys($this->getRequest()->request->get($form->getName()));
  $fields_to_remove = array_diff($form_fields, $post_fields);
  foreach($fields_to_remove as $f) $form->remove($f);
  return $form;
} 
```

..然后在您想要进行部分更新时更新您的表单：

```
$form = $this->createForm(new UserForm(), $user);
$form = $this->updateFormAccordingToRequest($form);
$form->bindRequest($request); 
```*

# php - MySQLi 查询在某些多个查询上失败

> ID：11869427
> 
> 赞同：0
> 
> 时间：2012-08-08T16:54:13.847
> 
> 标签：php, sql

**编辑：我只是通过将 INSERTS 合并到一个查询中来解决它，但我仍然想知道为什么这首先会失败，以防我以后再次遇到它。**

我目前正在使用 mysqli 的查询命令来提交多个查询，因为我不需要像 multi_query 允许的那样循环查询结果。我没有使用多查询的主要原因是我在多次使用它而不关闭并重新打开数据库时遇到了问题。因此，如果您有解决该问题的方法，也许它会解决这个问题。

由于我对 multi_query 的困难，我最终只使用了 query 并将多个查询放入其中，如下所示：

```
$sql = "INSERT INTO customers_attributes (ForeignCustomer, Type, Content, Date)
            VALUES ($customerID, 'PhoneNumber', '$phoneNumber', NOW());
            INSERT INTO customers_attributes (ForeignCustomer, Type, Content, Date)
            VALUES ($customerID, 'Email', '$email', NOW());
            INSERT INTO customers_attributes (ForeignCustomer, Type, Content, Date)
            VALUES ($customerID, 'CanEmail', '$emailMe', NOW());
            INSERT INTO customers_attributes (ForeignCustomer, Type, Content, Date)
            VALUES ($customerID, 'CanText', '$textMe', NOW());
        ";
    $mysqli->query($sql); 
```

现在，上面的代码可以工作，但是，当我尝试使用此代码执行完全相同的概念时：

```
$sql = "INSERT INTO jobs_notes (ForeignJob, ForeignUser, Type, Time, Content)
        VALUES ($jobID, 0, 'IssueDescription', NOW(), '$issueDescription');
        INSERT INTO jobs_notes (ForeignJob, ForeignUser, Type, Time, Content)
        VALUES ($jobID, 0, 'UserPassword', NOW(), '$userPassword');
        ";
if($mysqli->query($sql) === TRUE)
    echo "Good";
else
    echo $mysqli->error; 
```

它会引发关于 SQL 的第三行语法的一般错误。我已经用变量打印了查询，并直接在 phpMyAdmin 中运行，它运行良好，所以查询很好，问题似乎在于将两个查询放在一起，即使它第一次工作。为了测试这一点，我尝试了下面的代码，它有效：

```
$sql = "INSERT INTO jobs_notes (ForeignJob, ForeignUser, Type, Time, Content)
        VALUES ($jobID, 0, 'IssueDescription', NOW(), '$issueDescription');
        ";
echo "
$sql
";
if($mysqli->query($sql) === TRUE)
    echo "Good";
else
    echo $mysqli->error;
$sql = "INSERT INTO jobs_notes (ForeignJob, ForeignUser, Type, Time, Content)
        VALUES ($jobID, 0, 'UserPassword', NOW(), '$userPassword');";

if($mysqli->query($sql) === TRUE)
    echo "Good";
else
    echo $mysqli->error; 
```

如果您可以解释如何为我的目的正确使用多个多查询，或者告诉我为什么一个有效而另一个无效，那么这两个都是完全可以接受的答案。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-08T17:17:42.197

尝试**[mysqli_multi_query](http://php.net/manual/en/mysqli.multi-query.php)**而不是**mysqli_query**函数。
它执行一个或多个由分号连接的查询。

# php - 如何在sql中生成随机字符串来加盐密码？

> ID：11869428
> 
> 赞同：5
> 
> 时间：2012-08-08T16:54:16.313
> 
> 标签：php, mysql, sql, database, salt

有一个在 sql 中加盐密码的问题：

下面的代码通过随机生成一个 10 个字符的字符串来对特定密码进行加盐：

```
Update Teacher 
SET    TeacherSalt = SUBSTRING(MD5(RAND()), -10), 
       TeacherPassword = SHA1(CONCAT('009b9b624aaecc4b3217dcd4bfee15ab704745d7',SUBSTRING(MD5(RAND()), -10)))
WHERE TeacherPassword = '009b9b624aaecc4b3217dcd4bfee15ab704745d7' 
```

但我的问题是我想更改盐，以便它生成的字符串来自所有这些字符：

./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789

共有 63 个字符。执行此操作的 php 方法如下：

```
$salt = ""; 
for ($i = 0; $i < 40; $i++) { 
   $salt .= substr(
     "./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789", 
     mt_rand(0, 63), 
     1); 
} 
```

但是我怎样才能用上面的sql方式写这个呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T01:06:20.727

它可以在 MySQL 中完成。随机词生成并不那么漂亮。关于生成和应用盐，那部分并不难。

使用 2 个语句首先为每个人生成盐，然后应用它们。（注意：如果你真的只想将它应用到一个帐户，那么添加一个 WHERE 子句。）

```
mysql> select * from salty;
+------+------+------+
| id   | pw   | salt |
+------+------+------+
|    1 | fish | NULL |
|    2 | bird | NULL |
|    3 | fish | NULL |
+------+------+------+ 
```

（请注意，用户 1 和 3 恰好具有相同的密码。但您不希望它们在加盐和散列后相同。）

```
mysql> update salty set salt=SUBSTRING(MD5(RAND()), -10);

mysql> select * from salty;
+------+------+------------+
| id   | pw   | salt       |
+------+------+------------+
|    1 | fish | 00fe747c35 |
|    2 | bird | ee4a049076 |
|    3 | fish | 6a8285f03c |
+------+------+------------+ 
```

（注意：我稍后会显示特定字母版本）

```
mysql> update salty set pw=sha1(concat(pw,salt));

mysql> select * from salty;
+------+------------------------------------------+------------+
| id   | pw                                       | salt       |
+------+------------------------------------------+------------+
|    1 | ac1b74c36b4d2426460562e8710bd467bd034fc8 | 00fe747c35 |
|    2 | d63d035f9cac1ac7c237774613b8b702d8c227df | ee4a049076 |
|    3 | 6a0b1e36f489ef959badf91b3daca87d207fb5de | 6a8285f03c |
+------+------------------------------------------+------------+ 
```

你有两个语句，每一行都唯一地加盐和散列。

现在，对于随机生成指定字母的单词，ELT() 有一个丑陋的技巧。对于 64 个字符的字母表中的 10 个字母的单词：

```
UPDATE salty SET salt=CONCAT(
  ELT(1+FLOOR(RAND()*64), 
  '.','/',
  'A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z',
  'a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z',
  '0','1','2','3','4','5','6','7','8','9'),
  ELT(1+FLOOR(RAND()*64), 
  '.','/',
  'A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z',
  'a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z',
  '0','1','2','3','4','5','6','7','8','9'),
  ELT(1+FLOOR(RAND()*64), 
  '.','/',
  'A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z',
  'a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z',
  '0','1','2','3','4','5','6','7','8','9'),
  ELT(1+FLOOR(RAND()*64),  
  '.','/',
  'A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z',
  'a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z',
  '0','1','2','3','4','5','6','7','8','9'),
  ELT(1+FLOOR(RAND()*64), 
  '.','/',
  'A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z',
  'a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z',
  '0','1','2','3','4','5','6','7','8','9'),
  ELT(1+FLOOR(RAND()*64), 
  '.','/',
  'A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z',
  'a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z',
  '0','1','2','3','4','5','6','7','8','9'),
  ELT(1+FLOOR(RAND()*64), 
  '.','/',
  'A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z',
  'a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z',
  '0','1','2','3','4','5','6','7','8','9'),
  ELT(1+FLOOR(RAND()*64), 
  '.','/',
  'A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z',
  'a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z',
  '0','1','2','3','4','5','6','7','8','9'),
  ELT(1+FLOOR(RAND()*64), 
  '.','/',
  'A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z',
  'a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z',
  '0','1','2','3','4','5','6','7','8','9'),
  ELT(1+FLOOR(RAND()*64), 
  '.','/',
  'A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z',
  'a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z',
  '0','1','2','3','4','5','6','7','8','9')
)

mysql> select * from salty;
+------+------+------------+
| id   | pw   | salt       |
+------+------+------------+
|    1 | fish | TzHO0e5I/k |
|    2 | bird | 65xLptoDZ3 |
|    3 | fish | JNok/SfmkG |
+------+------+------------+ 
```

丑陋，不是吗？但是在单个 MySQL 语句中执行此操作可能比在 PHP 中循环并在每行执行一个（或两个）查询要快得多，尤其是当您必须将其应用于具有数百万条记录的表时；一个丑陋的查询与一次进行数百万个查询。

但正如其他人所说，SHA1 真的不再是一个足够好的哈希了。

如果您确实有很多记录，那么使用几个类似的 MySQL 查询来更新所有记录以使用 SHA2 作为临时解决方案可能是有意义的，然后随着时间的推移使用 PHP 将它们单独更新为更强的哈希值。当然，您需要一些方法来知道给定记录使用了哪个散列。

附带说明一下，如果您只更新一行（如您的示例中所示），那么您也许可以使用 MySQL 变量临时保存随机生成的字符串足够长的时间以更新该行的两列：

```
mysql> SET @salt=SUBSTRING(MD5(RAND()), -10); UPDATE salty SET salt=@salt,pw=SHA1(CONCAT(pw,@salt)) WHERE id=2; SET @salt=NULL; 
```

这样@salt 中的相同值用于设置盐和 pw 计算。但是，它不适用于更新多行（它们最终都会得到相同的盐）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T03:09:23.127

如果您真的想随机加盐，那么只能通过使用 php 生成随机盐并用该盐加密密码并将盐密钥和密码存储在表的两个字段中来完成。表必须有盐字段和密码字段。但是，如果您只想使用 mysql 进行加密，请查看这里[http://dev.mysql.com/doc/refman/5.5/en//encryption-functions.html](http://dev.mysql.com/doc/refman/5.5/en//encryption-functions.html)

当我们验证用户的登录凭据时，我们遵循相同的过程，只是这次我们使用数据库中的盐而不是生成新的随机盐。我们将用户提供的密码添加到其中，运行我们的哈希算法，然后将结果与存储在该用户配置文件中的哈希值进行比较。

# 下面的链接可能会给你更多的想法。

[您如何在 MySQL 中安全地存储用户的密码和盐？](https://stackoverflow.com/questions/7270526/how-do-you-securely-store-a-users-password-and-salt-in-mysql)

[你在哪里存放你的盐串？](https://stackoverflow.com/questions/1219899/where-do-you-store-your-salt-strings)

[与盐渍 SHA512 相比，盐渍 SHA1 有多不安全](https://stackoverflow.com/questions/3740443/how-insecure-is-a-salted-sha1-compared-to-a-salted-sha512)

[Salt Generation 和开源软件](https://stackoverflow.com/questions/1645161/salt-generation-and-open-source-software/1645190#1645190)

我希望你现在明白了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T12:25:27.593

简单来说，就是用 php.ini 搞定。首先从您的表格中获取信息（注意，使用自动递增的 ID 而不是密码 - 这可能不是唯一的 - 来选择您的行）

```
 function makeMeASalt($max=40){
         $i = 0;
         $salt = "";
         $characterList = "./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"
         while ($i < $max) {
            $salt .= $characterList{mt_rand(0, (strlen($characterList) - 1))};
            $i++;
         }
         return $salt;
     }

     $hash=crypt($password.makeMeASalt(40))

     $query="Update Teacher 
         SET TeacherSalt = '".$salt."', TeacherPassword = ".$hash."
         WHERE TeacherID = '".$teacherid."'";
     mysql_query($query) or die(mysql_error()) 
```

这也消除了已经提到的盐在字段之间不一样的问题！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-20T19:35:39.757

我想在应得的地方给予赞扬：雷的上述回答为我的回答提供了所有见解。在查看他的答案时，我实现了它，但是我通过使用函数和调用其他函数的函数清理了它的完成方式。这是雷的答案的清理版本。（感谢 Ray 的出色回应！）这也比让 php 生成它要快得多。

我创建了两个函数。第一个返回一个随机选择的字符。第二个递归调用第一个来构建任意长度的随机生成的字符串（例如在椒盐场景中使用等）。第二个限制为 255 的字符串长度，但是您可以轻松地对其进行修改。您可以将返回的字符更改为您想要的任何有效字符，只需记住计算数组中有多少个，从而将 64 更改为您输入的数量。我故意重新排列了 Ray 所拥有的数组中所有字符的顺序，只是为了完全随机化输出。

默认情况下会阻止函数生成，并且必须通过脚本（我使用 Dbeaver）在命令行副输入，以便根管理员（在数据库上）可以是唯一进入它的人。我选择了这条更安全的路线，而不是像某些人推荐的那样更改我的日志记录，或者尝试在脚本开头定义函数的生成者。

因为函数定义需要 ; 包含在其中，必须首先将命令行分隔符更改为 $$，然后一旦完成输入的功能，将其更改回; 这只是因为我是通过控制台而不是从我的首选工具（Dbeaver）输入的。

该函数不能使用 DECLARE，必须改为使用 SET。SET 变量名前面的 @ 是必需的，因为它表示我们正在设置用户定义的变量。

现在对于功能：

```
/* Testing Purposes:
    SELECT f_generateRandomLetter64();
*/

DROP FUNCTION IF EXISTS f_generateRandomLetter64;

DELIMITER $$

CREATE FUNCTION f_generateRandomLetter64()
RETURNS varchar(1)
CONTAINS SQL
READS SQL DATA
NOT DETERMINISTIC

BEGIN
    SET @thisResult = '';

    SET @thisResult = ELT(1+FLOOR(RAND()*64), 
      '/','a','b','c','d','e','f','g','h','i','j','k','P','Q','R','S','T','U','V','W','X','Y','Z',
      '.','A','B','C','D','E','F','G','4','8','9','5','6','z','1','2','3','7','l','m','n','o','p',
      'q','r','s','H','I','J','K','L','M','N','O','t','u','v','w','x','y','0'
      );

    RETURN @thisResult;
END $$

DELIMITER ; 
```

下一个功能：

```
/* Testing Purposes:
        SELECT f_generateRandomString(128);
        SELECT LENGTH(f_generateRandomString(10));
*/

DROP FUNCTION IF EXISTS f_generateRandomString;

DELIMITER $$

CREATE FUNCTION f_generateRandomString(var_strLength int)
RETURNS varchar(255)
CONTAINS SQL
READS SQL DATA
NOT DETERMINISTIC

BEGIN
    SET @thisResult = '';

  WHILE var_strLength > 0 DO
    SET @thisResult = CONCAT( @thisResult,f_generateRandomLetter64() );
    SET var_strLength = var_strLength -1;
  END WHILE;

    RETURN @thisResult;
END $$

DELIMITER ; 
```

# ruby - 仅支持大于 8 (Mac OS X 10.5+) 的 Darwin 系统

> ID：11869430
> 
> 赞同：1
> 
> 时间：2012-08-08T16:54:21.257
> 
> 标签：ruby, macos

尝试`gem install rb-fsevent -v '0.4.3.1'`并得到上述错误。我是山狮（10.8），所以我不完全确定抱怨是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T13:21:41.250

我通过将 '0.4.3.1' 交换为 '>= 0.4.3.1' 来解决这个错误，我认为问题是这个版本不是最新的，它不支持我当前的 Mac OS 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T17:42:15.097

这似乎与对警卫的依赖有关......据我所知，这只是旧开发分支中的一个问题：

[https://github.com/guard/guard/pull/184](https://github.com/guard/guard/pull/184)

我会说要么尝试编辑`$RVM_PATH/gems/ruby-x.x.x/guard-1.0.0/lib/vendor/darwin/ext/extconf.rb`，如果存在的话，按照以下方式：

```
sdk_version    = { 9 => '10.5', 10 => '10.6', 11 => '10.7', 12 => '10.8' }[darwin_version]
raise "Only Darwin systems greater than 8 (Mac OS X 10.5+) are supported" unless sdk_version 
```

或尝试安装较新版本的guard/guard-rspec。

# selenium - 在 python 中进行 Selenium 并行浏览器测试

> ID：11869431
> 
> 赞同：4
> 
> 时间：2012-08-08T16:54:34.933
> 
> 标签：selenium, grid, parallel-testing

我与 Selenium 合作了一段时间并进行了一些测试，这很棒。现在我创建了一个测试用例，我想同时在 IE、Firefox 和 Google Chrome 上运行它。我已经单独运行它并且它们运行得很好，但我想知道是否有办法更改我的脚本并将它们一起运行。

我已经使用集线器和三个遥控器（Firefox 端口=5556、IE 端口=5557 和 Chrome 端口=5558）设置了网格。现在，当涉及到脚本时，我设置了三个潜水员：

```
def setUp(self):
    # Setting up the driver for Firefox
    self.driverFF = webdriver.Firefox()
    ...

    # Setting up the driver for IE
    self.driverIE = webdriver.Ie()
    ...

    # Setting up the driver for IE
    self.driverCh = webdriver.Chrome()
    ... 
```

然后我创建了三种不同的方法并使用每个驱动程序运行它们。我还没有测试它，但我想知道：有没有一种有效的方法来做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-15T23:18:27.480

查看 Selenium Grid 2 文档，它应该对您有所帮助。我正在寻找运行并行测试并遇到这些指南。

[https://code.google.com/p/selenium/wiki/Grid2](https://code.google.com/p/selenium/wiki/Grid2)

在这里： [http ://www.guru99.com/introduction-to-selenium-grid.html](http://www.guru99.com/introduction-to-selenium-grid.html)

在这里： [https ://www.packtpub.com/sites/default/files/downloads/Distributed_Testing_with_Selenium_Grid.pdf](https://www.packtpub.com/sites/default/files/downloads/Distributed_Testing_with_Selenium_Grid.pdf)

里亚兹

# php - 下拉菜单默认为先前的设置值？

> ID：11869432
> 
> 赞同：0
> 
> 时间：2012-08-08T16:54:36.810
> 
> 标签：php, html, query-string

我有一个带有表单的页面，该表单只是一个下拉菜单，用于显示每页 X 项。它默认为 5。

```
<form class="rppForm" style="width:110px;" name="reviewsPerPage" method="POST" action="/rpp.php" return false;">
  <select name="reviewsPerPage" style="padding-right: 25px; float: left;">
    <option value="5">5</option>
    <option value="10">10</option>
    <option value="15">15</option>
    <option value="25">25</option>
  </select>
  <input type="submit" value="Okay" name="submit" id="rPP">
</form> 
```

这工作正常。它将信息发送到“rpp.php”并设置一些其他变量，然后返回到带有查询字符串中的一些变量的原始页面，例如**www.page.com/?dropdown=15&foo=bar**

每次我动态调整页面上的内容时，**?dropdown=15&foo=bar**都会保留在查询字符串中，但下拉菜单显示“5”。

默认情况下，是否可以让下拉菜单始终显示查询字符串中的值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T16:59:14.093

像这样的东西应该工作：

```
<option value="5" <?php if ($_REQUEST["dropdown"] == 5) { echo "selected"; } ?>>5</option>
<option value="10" <?php if ($_REQUEST["dropdown"] == 10) { echo "selected"; } ?>>10</option>
<option value="15" <?php if ($_REQUEST["dropdown"] == 15) { echo "selected"; } ?>>15</option>
<option value="25" <?php if ($_REQUEST["dropdown"] == 25) { echo "selected"; } ?>>25</option> 
```

# objective-c - Core-Plot：使用自动缩放时保持 x 轴与其轴标签之间的偏移量不变（plotSpace:scaleToFitPlots）

> ID：11869435
> 
> 赞同：0
> 
> 时间：2012-08-08T16:54:43.020
> 
> 标签：objective-c, ios, ios5, core-plot

在我的散点图中，根据我的测试图（见下文），我使用了 Core-Plot 的自动缩放功能，该功能似乎工作正常：

```
CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *)graph.defaultPlotSpace;
[plotSpace scaleToFitPlots:[NSArray arrayWithObject:sharePricePlot]];
[valuationPlotSpace scaleToFitPlots:[NSArray arrayWithObject:valuationPlot]];

CPTMutablePlotRange *xRange = [plotSpace.xRange mutableCopy];
CPTMutablePlotRange *yRange = [plotSpace.yRange mutableCopy];

[xRange expandRangeByFactor:CPTDecimalFromDouble(1.0)];
[yRange expandRangeByFactor:CPTDecimalFromDouble(1.0)];
plotSpace.xRange = xRange;
plotSpace.yRange = yRange; 
```

我为我在标准枚举中设置的 x 轴使用自定义标签。在这个枚举中，我根据演示应用设置了每个轴标签，如下所示：

```
CPTAxisLabel *newLabel = [[CPTAxisLabel alloc] initWithText:[NSString stringWithFormat:@"%u", year]
textStyle:xAxis.labelTextStyle];
newLabel.tickLocation = CPTDecimalFromUnsignedInteger(idx);
newLabel.offset = 0;
[xAxisLabels addObject:newLabel]; 
```

但是，即使我将偏移量设置为 0，这应该使标签非常靠近 x 轴（在我看来），轴和标签之间的偏移量根据 y 值的范围而有所不同（请参阅到下面的亚马逊和 Priceline 图表）。

如何设置**独立于（自动缩放）y 值的 x 轴和标签之间的距离？**

图一：亚马逊 ![亚马逊](../Images/1b6924790d8c14a8dc542f6c1c7be895.png)

图 2：价格线 ![价格线](../Images/5f34c978681505f73104df9f00b961e9.png)

谢谢你！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T23:31:00.870

看起来整个 x 轴都在移动。您可以使用约束将其修复到位。

```
x.axisConstraints = [CPTConstraints constraintWithLowerOffset:0.0]; 
```

# actionmailer - Redmine 插件中的 ActionMailer 错误

> ID：11869436
> 
> 赞同：3
> 
> 时间：2012-08-08T16:54:51.913
> 
> 标签：actionmailer, redmine, redmine-plugins

我在 app/models 中有以下邮件代码。

```
class Mailman < ActionMailer::Base

  default :from => "xyz"
  # Sends an Email reminder to all the users who missed a pickup date
  def check_out_reminder(reservation)
    recipient = reservation.user.mail
    subject   = "Checkout Reminder for '#{reservation.bookable.name}'."
    mail(:to => recipient, :subject => subject)
  end

  def check_in_reminder(reservation)
    recipient = reservation.user.mail
    subject   = "Checkin Reminder for '#{reservation.bookable.name}'."
    mail(:to => recipient, :subject => subject)
  end

end 
```

我在测试/单元中有测试代码，如下所示：

```
require File.expand_path('../../test_helper', __FILE__)

class MailmanTest < ActionMailer::TestCase
  fixtures :reservations

  def test_check_out_reminder
    reservation = Reservation.first 
    # Send the email, then test that it got queued
    Mailman.check_out_reminder(reservation).deliver
    assert !ActionMailer::Base.deliveries.empty?
  end

end 
```

然而，执行测试给出了一个错误：

```
test_check_out_reminder(MailmanTest):
NoMethodError: undefined method `mail' for nil:NilClass
    /Users/myth/Learn/Code/redmine/plugins/redmine_asset_tracker/app/models/mailman.rb:9:in `check_out_reminder'
    /Users/myth/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.3/lib/abstract_controller/base.rb:167:in `process_action'
    /Users/myth/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.3/lib/abstract_controller/base.rb:121:in `process'
    /Users/myth/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.3/lib/abstract_controller/rendering.rb:45:in `process'
    /Users/myth/.rvm/gems/ruby-1.9.3-p0/gems/actionmailer-3.2.3/lib/action_mailer/base.rb:456:in `process'
    /Users/myth/.rvm/gems/ruby-1.9.3-p0/gems/actionmailer-3.2.3/lib/action_mailer/base.rb:451:in `initialize'
    /Users/myth/.rvm/gems/ruby-1.9.3-p0/gems/actionmailer-3.2.3/lib/action_mailer/base.rb:438:in `new'
    /Users/myth/.rvm/gems/ruby-1.9.3-p0/gems/actionmailer-3.2.3/lib/action_mailer/base.rb:438:in `method_missing'
    /Users/myth/Learn/Code/redmine/plugins/redmine_asset_tracker/test/unit/mailer_test.rb:9:in `test_check_out_reminder'
    /Users/myth/.rvm/gems/ruby-1.9.3-p0/gems/mocha-0.11.4/lib/mocha/integration/mini_test/version_230_to_262.rb:28:in `run' 
```

为什么即使我继承了正确的类也无法识别邮件方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T11:53:37.473

问题是缺少固定装置。该行`recipient = reservation.user.mail`导致错误，而不是 Action Mailer 的`mail(:to => recipient, :subject => subject)`

# xslt - XSLT 基于逗号分隔的字符串创建多个元素块

> ID：11869441
> 
> 赞同：2
> 
> 时间：2012-08-08T16:55:13.520
> 
> 标签：xslt, xslt-1.0

**编辑：**我有一个解决方案，但我确信有更好的方法。请看下文。

**源 XML：**

```
<?xml version="1.0"?>
<reservations>
  <reservation>
    <id>1</id>
    <guestId>1111</guestId>
    <!-- other fields -->
  </reservation>
  <reservation>
    <id>2</id>
    <guestId>2222,3333,4444</guestId>
    <!-- other fields -->
  </reservation>
</reservations> 
```

**预期输出：**

```
<?xml version="1.0" encoding="UTF-8"?>
<reservations>
  <reservation>
    <id>1</id>
    <csvGuestString>1111</csvGuestString>
    <guestId>1111</guestId>
    <!-- other fields -->
  </reservation>
  <reservation>
    <id>2</id>
    <csvGuestString>2222,3333,4444</csvGuestString>
    <guestId>2222</guestId>
    <!-- other fields -->
  </reservation>
  <reservation>
    <id>2</id>
    <csvGuestString>2222,3333,4444</csvGuestString>
    <guestId>3333</guestId>
    <!-- other fields -->
  </reservation>
  <reservation>
    <id>2</id>
    <csvGuestString>2222,3333,4444</csvGuestString>
    <guestId>4444</guestId>
    <!-- other fields -->
  </reservation>
</reservations> 
```

**规则：**

1.  对于`<reservation>`有`n`来宾的元素（由 中的逗号分隔值定义`<guestId>`），复制该`<reservation>`元素 - 连同其后代 -`n`次，每次使用下一个 guestId 值。
2.  `<guestId>`必须保留原始元素的值，并且必须将其放置在新`<csvGuestString>`元素中。
3.  必须在 XSLT 1.0 中完成。
4.  使用 EXSLT 进行标记化是完全合理的。

**到目前为止我有什么（它有效，但不知道它是否是最有效的解决方案）：**

```
<?xml version="1.0"?>
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:exsl="http://exslt.org/common" 
  exclude-result-prefixes="exsl"
  version="1.0">

  <xsl:output method="xml" omit-xml-declaration="no" indent="yes"/>
  <xsl:strip-space elements="*"/>

  <xsl:variable name="vTokenName" select="'token'"/>
  <xsl:variable name="vDoc" select="/"/>

  <xsl:template match="node()|@*">
    <xsl:copy>
      <xsl:apply-templates select="node()|@*"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="guestId">
    <csvGuestString>
      <xsl:apply-templates />
    </csvGuestString>   
  </xsl:template>

  <xsl:template match="reservation">
    <xsl:variable name="vGuestRtfPass1">
      <xsl:call-template name="tokenize">
        <xsl:with-param name="text" select="guestId"/>
        <xsl:with-param name="delimiter" select="','"/>
      </xsl:call-template>
    </xsl:variable>

    <xsl:apply-templates select="exsl:node-set($vGuestRtfPass1)/*" mode="pass2">
      <xsl:with-param name="pPosition" select="position()"/>
    </xsl:apply-templates>
  </xsl:template>

  <xsl:template match="token" mode="pass2">
    <xsl:param name="pPosition" />

    <reservation>
      <xsl:apply-templates select="$vDoc/*/reservation[$pPosition]/*" />
        <guestId>
          <xsl:apply-templates />   
        </guestId>
    </reservation>
  </xsl:template>

  <xsl:template name="tokenize">
    <xsl:param name="text"/>
    <xsl:param name="delimiter" select="' '"/>
    <xsl:choose>
      <xsl:when test="contains($text,$delimiter)">
        <xsl:element name="{$vTokenName}">
          <xsl:value-of select="substring-before($text,$delimiter)"/>
        </xsl:element>
        <xsl:call-template name="tokenize">
          <xsl:with-param name="text" select="substring-after($text,$delimiter)"/>
          <xsl:with-param name="delimiter" select="$delimiter"/>
        </xsl:call-template>
      </xsl:when>
      <xsl:when test="$text">
        <xsl:element name="{$vTokenName}">
          <xsl:value-of select="$text"/>
        </xsl:element>
      </xsl:when>
    </xsl:choose>
  </xsl:template>

</xsl:stylesheet> 
```

一如既往，感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T19:36:55.667

**不需要使用任何`tokenize()`扩展函数**，这种转换可以在只有`xxx:node-set()`扩展函数的 XSLT 处理器上运行：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:ext="http://exslt.org/common" exclude-result-prefixes="ext">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="@*|node()" name="identity">
  <xsl:copy>
    <xsl:apply-templates select="@*|node()"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="reservation/guestId">
   <xsl:call-template name="identity"/>
  <csvGuestString><xsl:value-of select="."/></csvGuestString>
 </xsl:template>

 <xsl:template match="reservation[contains(guestId, ',')]" name="explode">
   <xsl:param name="pCurrent" select="."/>
   <xsl:param name="pLastId" select="substring-before($pCurrent/guestId, ',')"/>

   <xsl:variable name="vrtfResult">
     <xsl:apply-templates select="$pCurrent" mode="explode"/>
   </xsl:variable>
   <xsl:copy-of select="$vrtfResult"/>

   <xsl:variable name="vResult" select="ext:node-set($vrtfResult)/*"/>

   <xsl:if test="contains(substring-after($vResult/csvGuestString, $vResult/guestId), ',')">
     <xsl:call-template name="explode">
       <xsl:with-param name="pCurrent" select="$vResult"/>
       <xsl:with-param name="pLastId" select="$vResult/guestId"/>
     </xsl:call-template>
   </xsl:if>
 </xsl:template>

 <xsl:template match="node()" mode="explode">
  <xsl:call-template name="identity"/>
 </xsl:template>

 <xsl:template match="reservation" mode="explode">
  <xsl:copy>
   <xsl:apply-templates select="node()" mode="explode"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="guestId[contains(.,',')]" mode="explode">
  <csvGuestString><xsl:value-of select="."/></csvGuestString>
  <guestId><xsl:value-of select="substring-before(., ',')"/></guestId>
 </xsl:template>

 <xsl:template match="guestId" mode="explode">
  <guestId>
    <xsl:value-of select="substring-before(substring-after(concat(../csvGuestString, ','), concat(current(),',')), ',')"/>
  </guestId>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时**：

```
<reservations>
  <reservation>
    <id>1</id>
    <guestId>1111</guestId>
    <!-- other fields -->
  </reservation>
  <reservation>
    <id>2</id>
    <guestId>2222,3333,4444</guestId>
    <!-- other fields -->
  </reservation>
</reservations> 
```

**产生了想要的正确结果：**

```
<reservations>
  <reservation>
    <id>1</id>
    <guestId>1111</guestId>
    <csvGuestString>1111</csvGuestString>
    <!-- other fields -->
  </reservation>
  <reservation>
    <id>2</id>
    <csvGuestString>2222,3333,4444</csvGuestString>
    <guestId>2222</guestId>
    <!-- other fields -->
  </reservation>
  <reservation>
    <id>2</id>
    <csvGuestString>2222,3333,4444</csvGuestString>
    <guestId>3333</guestId>
    <!-- other fields -->
  </reservation>
  <reservation>
    <id>2</id>
    <csvGuestString>2222,3333,4444</csvGuestString>
    <guestId>4444</guestId>
    <!-- other fields -->
  </reservation>
</reservations> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T18:25:51.707

使用`tokenize`EXSLT 字符串函数的方法：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:str="http://exslt.org/strings"
  exclude-result-prefixes="str">

<xsl:strip-space elements="*"/>
<xsl:output indent="yes"/>

<xsl:template match="@* | node()">
  <xsl:copy>
    <xsl:apply-templates select="@* | node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="reservation">
  <xsl:variable name="this" select="."/>
  <xsl:for-each select="str:tokenize(guestId, ',')" >
    <xsl:apply-templates select="$this" mode="copy">
      <xsl:with-param name="id" select="."/>
    </xsl:apply-templates>
  </xsl:for-each>
</xsl:template>

<xsl:template match="reservation" mode="copy">
  <xsl:param name="id"/>
  <xsl:copy>
    <xsl:apply-templates select="@*"/>
    <xsl:apply-templates select="node()">
      <xsl:with-param name="id" select="$id"/>
    </xsl:apply-templates>
  </xsl:copy>
</xsl:template>

<xsl:template match="reservation/guestId">
  <xsl:param name="id"/>
  <csvGuestString>
    <xsl:value-of select="."/>
  </csvGuestString>
  <guestId>
    <xsl:value-of select="$id"/>
  </guestId>
</xsl:template>

</xsl:stylesheet> 
```

这样 xsltproc 将您的输入样本转换为

```
<reservations>
  <reservation>
    <id>1</id>
    <csvGuestString>1111</csvGuestString>
    <guestId>1111</guestId>
    <!-- other fields -->
  </reservation>
  <reservation>
    <id>2</id>
    <csvGuestString>2222,3333,4444</csvGuestString>
    <guestId>2222</guestId>
    <!-- other fields -->
  </reservation>
  <reservation>
    <id>2</id>
    <csvGuestString>2222,3333,4444</csvGuestString>
    <guestId>3333</guestId>
    <!-- other fields -->
  </reservation>
  <reservation>
    <id>2</id>
    <csvGuestString>2222,3333,4444</csvGuestString>
    <guestId>4444</guestId>
    <!-- other fields -->
  </reservation>
</reservations> 
```

# asp.net - 从 ASP 页面获取 URL 变量

> ID：11869448
> 
> 赞同：0
> 
> 时间：2012-08-08T16:55:32.273
> 
> 标签：asp.net, asp-classic

我的页面上有一个 iframe，只有当我页面的 url 中存在变量时，我才想向 iframe 源添加一个变量。例如，如果有人访问 index.asp，我只希望 iframe 源是，`src="iframe.php`但如果有人访问 index.asp?id=123，那么我希望 iframe 源是`iframe.php?id=123`.

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T17:00:44.233

```
<%

Dim iFrameSrc

Dim id
id = Request.QueryString("Id")
If( Len( id ) > 0 ) Then

    iFrameSrc = "iframe.php?id=" & id

Else
    iFrameSrc = "iframe.php"
End If

%>

<iframe src="<%= iFrameSrc %>" /> 
```

请注意**，此代码是不安全的，并且容易受到跨站点脚本的攻击。您需要在渲染之前确保`id`变量是安全**的。

# sql - Teradata Multiload 脚本卡在 LOGON

> ID：11869449
> 
> 赞同：0
> 
> 时间：2012-08-08T16:55:40.450
> 
> 标签：sql, date, teradata

我制作了这个 mload 脚本，但它卡在了 LOGON 上。我可以访问数据库，并且类似的登录在快速加载脚本中工作正常。

这是脚本：

```
.LOGTABLE UD821.FRC_RPT_PERD_Log;
.LOGON oneview/uid,pw;

.BEGIN IMPORT MLOAD TABLES UD821.FRC_RPT_PERD SESSIONS 5;

.LAYOUT InputFile_layout;

       .field PERD_END_RPT_DT   (VARCHAR(20));
       .field RPT_PERD_TYPE_CD  (VARCHAR(20));
       .field PERD_NM        (VARCHAR(30));
       .field QTR_NUM           (VARCHAR(2));
       .field YEAR_NUM          (VARCHAR(4));
       .field RPT_PERD_TYPE_NM  (VARCHAR(10));
       .field DATA_VLDTN_IND    (VARCHAR(1));
       .fieldEDW_PUBLN_ID      (VARCHAR(18));

.DML LABEL FRC_RPT_PERD_INSERT;

.INSERT INTO UD821.FRC_RPT_PERD ( PERD_END_RPT_DT, RPT_PERD_TYPE_CD, PERD_NM, QTR_NUM, YEAR_NUM, RPT_PERD_TYPE_NM,
                          DATA_VLDTN_IND, EDW_PUBLN_ID )
    VALUES ( 

CASE WHEN Substr(PERD_END_RPT_DT,3,1) = '/'
AND Substr(PERD_END_RPT_DT,6,1) = '/'
THEN Substr(PERD_END_RPT_DT,7,4)||'-'||Substr(PERD_END_RPT_DT,1,2)||'-' ||Substr(PERD_END_RPT_DT,4,2)

WHEN Substr(PERD_END_RPT_DT,2,1) = '/'
AND Substr(PERD_END_RPT_DT,5,1) = '/'
THEN Substr(PERD_END_RPT_DT,6,4)||'-0'||Substr(PERD_END_RPT_DT,1,1)||'-' ||Substr(PERD_END_RPT_DT,3,2)

WHEN Substr(PERD_END_RPT_DT,2,1) = '/'
AND Substr(PERD_END_RPT_DT,4,1) = '/'
THEN Substr(PERD_END_RPT_DT,5,4)||'-0'||Substr(PERD_END_RPT_DT,1,1)||'-0' ||Substr(PERD_END_RPT_DT,3,1)

WHEN Substr(PERD_END_RPT_DT,3,1) = '/'
AND Substr(PERD_END_RPT_DT,5,1) = '/'

THEN Substr(PERD_END_RPT_DT,6,4)||'-'||Substr(PERD_END_RPT_DT,1,2)||'-0' ||Substr(PERD_END_RPT_DT,4,1)
ELSE PERD_END_RPT_DT
END (Date,Format 'yyyy-mm-dd'),, :RPT_PERD_TYPE_CD, :PERD_NM, :QTR_NUM, :YEAR_NUM, :RPT_PERD_TYPE_NM,
                          :DATA_VLDTN_IND, :EDW_PUBLN_ID ) ;

.import infile C:\Documents and Settings\bkp343\Desktop\FRC_RPT_PERD.csv
 format vartext  ','
 display errors
 nostop
 layout InputFile_Layout
 apply FRC_RPT_PERD_INSERT;

.end mload;
 .logoff; 
```

这里有什么明显的错误吗？它只是挂在 0002 登录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-29T15:24:22.860

我有类似的问题，所以我降落在这里。在我的情况下，解决方案是微不足道的：而不是运行我的 mload 脚本：' **mload -b < script.mload** '（正确）我尝试了'mload -b script.mload'（不正确）。第一个是正确的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-06T15:53:51.043

我们刚刚在尝试通过 DSL 线路远程运行脚本时遇到了这个确切的问题。解决方法是使用 IP 地址而不是别名。显然，在较慢的 DSL 速度下，LDAP 身份验证中存在一些问题。相同的脚本适用于更快的远程连接。

# html - div内的文本不会换行

> ID：11869451
> 
> 赞同：5
> 
> 时间：2012-08-08T16:55:56.700
> 
> 标签：html, css

如此处所示：http: [//jsfiddle.net/EhnuZ/](http://jsfiddle.net/EhnuZ/)顶部组的文本量很少，文本在图像的右侧。底部组是相同的，只是它里面有更多的文本。但是，这会导致文本移动到图像下方，而不是像我想要的那样换行。如何解决？我努力了：

```
white-space:normal;
word-wrap: break-word;
width:50%;
max-width:50%; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T17:02:00.910

您需要`width`为文本容器指定 a，否则它会自动尝试为 100% 的宽度。

```
.text{
         vertical-align:top;
         display:inline-block;
         width: 30%;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T17:02:47.973

`<p>`如果该元素或其包含元素之一没有宽度，则浏览器的渲染引擎没有理由阻止元素扩展以填充其容器。

您想要做的是通过在其上设置 a `width`or 来限制其父段落的宽度`max-width`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T16:58:37.407

您是否尝试过在图像上使用 float:left ？

# asp.net-mvc-3 - 存储一个 OBject 值并在 MVC3 应用程序中更改时更新该值

> ID：11869452
> 
> 赞同：2
> 
> 时间：2012-08-08T16:56:05.883
> 
> 标签：asp.net-mvc-3, design-patterns, entity-framework-4, session-state

我需要实现任何人登录时存储用户对象（包含其他一些导航属性）的功能

我想在获取与用户相关的信息时访问此信息，这样我就不需要点击数据库

用户有公告，所以如果我必须查询，我想要这样

```
 Announcements announcements = Storage.User.Announcements;
    var result = from m in announcements 
                 where m.DueDate== 'someting' 
```

我有很多与用户相关的功能，并希望在不从数据库获取的情况下保留和查询记录

当用户从存储中注销值时。用户应该清理

我已经实现了单例模式，但它不起作用

PL 建议任何模式或实践

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T17:10:02.277

Singletone 在这里不起作用，因为每当发出新请求时，您的控制器（以及控制器生成的对象）都会重新生成。HTTP 不保持状态，记住。

要持久化，您可以将对象存储在会话中。

登录时，请执行以下操作：

```
HttpContext.Current.Session["the-session-key"] = YourObject 
```

当您需要访问对象时，请执行以下操作：

```
YourObjectType yourObject = (YourObjectType)HttpContext.Current.Session["the-session-key"] 
```

要清除会话，请执行以下操作：

```
HttpContext.Current.Session.Clear(); 
```

如果您在控制器内部执行此操作，则可以直接访问控制器中的`Session`with`Session`属性。

例如，在 Controller 中，您可以执行以下操作：

```
Session.Clear() 
```

# iphone - 合作/构建大型 Phonegap 项目

> ID：11869453
> 
> 赞同：5
> 
> 时间：2012-08-08T16:56:08.460
> 
> 标签：iphone, git, cordova, architecture, project

我和我的朋友计划开始一个手机Phonegap 项目，它将涵盖iOS、Android 和Window Phone。它将需要访问一些本机功能，例如照相手机。它还必须进行一些 XHR 服务器调用，这是在 CakePHP 中完成的。

现在我想知道这样一个项目通常是如何在 Phonegap/ 中构建的，以及 Git 提交的内容。

这是我正在考虑的事情：

1) 我们将需要一个用于服务器端内容的 repo，因为这是相对通用的。

2) 我们是否应该将所有移动应用程序保存在其单独的 Git 存储库中？（所以 iOS 1 个，Android 1 个，Window Phone 1 个）。这种方法必须维护 3 个单独的 www 文件夹，每个文件夹将包含许多 html 文件。

3) 将所有内容压缩到一个巨大的 Git 存储库中，仅包含一页 HTML 文档 index.html。其他一切都将由 javascript 和与设备相关的函数处理。（虽然我还不知道如何处理这种方法的页面转换、导航、后退按钮——仍在学习中）

我真的很佩服在 Phonegap 中完成的这个 Wikimedia 项目：[https](https://github.com/wikimedia/WikipediaMobile) ://github.com/wikimedia/WikipediaMobile 。他们将所有内容保存在一个巨大的 repo 和一个通用 www 文件夹中，其中包含与设备相关的 js 文件（如我的方法 3）。虽然追踪他们是如何完成的对我来说有点复杂。如果您碰巧知道有关 WikipediaMobile 的案例研究，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T16:36:00.237

我推荐的方法是将所有内容都放在一个存储库中，但将其分解为一个文件夹结构，例如：

```
- android
    [eclipse_project]

- ios
    [xcode_project]

- windows
    [vs_project]

- www 
```

每个平台特定文件夹包含每个平台的本地项目（即您的 Xcode 项目位于**iOS**文件夹中，您的 Eclipse 项目位于**Android**文件夹中）但实际的 HTML/JS 应用程序存储在**www**文件夹中。

在我看来，您在 PhoneGap 项目中构建的 Web 应用程序应该完全独立于平台，因此应该只有一个版本。鉴于 Android/iOS/Windows 上的浏览​​器已经非常标准化，这应该不是什么大问题，所以我不明白为什么需要单独的 JS 文件。无论如何，如果您需要每个设备的不同行为，您可以识别设备然后在 JavaScript 代码/CSS 级别处理它。

正如@F481 所暗示的，无论您是否使用[PhoneGap Build](https://build.phonegap.com/)都会产生很大的不同。如果您使用 PhoneGap 构建，则不需要本地项目（如果您不熟悉本地 IDE，这很好），因此您只需要一个用于 Web 应用程序的文件夹。我建议你看看！

我希望这能回答你的问题！

# javascript - 如何使用 JQuery 测试 Javascript Engine 速度（优化功能）

> ID：11869455
> 
> 赞同：1
> 
> 时间：2012-08-08T16:56:08.963
> 
> 标签：javascript, jquery, performance, usability

与响应式设计一样，我希望用户根据浏览器中 JavaScript 引擎的速度体验不同级别的动画（或根本没有）。如何使用 JQuery 检测或预测客户端的处理速度？

# ant - sshexec 蚂蚁任务。如何不显示输出

> ID：11869459
> 
> 赞同：2
> 
> 时间：2012-08-08T16:56:24.643
> 
> 标签：ant, ssh, task

我在 ant 构建文件中有一个任务 sshexec。此任务显示我希望执行的命令的输出。我的问题是：如何不显示输出？

这是我的任务：

```
<sshexec verbose="false" failonerror="true"
  trust="yes" host="${app.deploy.server}"
  username="${deploy.user}"
  command="find /home/software/public_html/${app.name} -name *.jar* -exec md5sum {} +"
  password="${deploy.password}"
  output="jarsAtServer.txt" outputproperty="trash" /> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T14:01:34.603

您可以使用自定义记录器使 sshexec 任务（或任何其他任务）的输出静音：

```
import org.apache.tools.ant.*;
public class MuteTaskLogger extends DefaultLogger
{
    public void messageLogged(BuildEvent event)
    {
        Task task = event.getTask();
        if (task != null &&
            task.getTaskName().equals(event.getProject().getProperty("mute.task")))
        {
            return;
        }
        super.messageLogged(event);
    }
} 
```

编译：

```
javac -cp ant.jar MuteTaskLogger.java 
```

使用属性“mute.task”指定要静音的任务：

```
ant -logger MuteTaskLogger -Dmute.task=sshexec -lib <folder-of-MuteTaskLogger-class> 
```

[您可以通过将 MuteTaskLogger 放入Ant 库目录](http://ant.apache.org/manual/running.html#libs)之一来整理它。logger 和 mute.task 属性可以添加到[ANT_ARGS 环境变量](http://ant.apache.org/manual/running.html#envvars)中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-10T10:46:51.027

ant sshexec 输出它将执行的命令以及命令的输出。抑制系统输出（从 ant 1.9.0 开始）标志可用于抑制命令的输出，但仍会显示命令本身。如果您需要将密码传递给命令，这可能是个问题。

在这种情况下，您可以使用 input 属性将数据直接传递到远程命令的输入，而不会在屏幕（或进程列表）上显示。

有关如何执行此操作的示例，请参阅[此](https://stackoverflow.com/questions/9069582/ant-input-password-for-sshexec)问题的答案。

# eclipse - 奇怪的 Eclipse Juno 插件交互

> ID：11869461
> 
> 赞同：1
> 
> 时间：2012-08-08T16:56:34.617
> 
> 标签：eclipse, plugins, ubuntu

我最近升级到 eclipse Juno（在 ubuntu 12.04 上），我安装的第一件事是 Android SDK 和 ADT。这让我可以访问向导来创建 android 项目、类等。非常标准的东西..

当我尝试安装其他 plugins.eg.repast symphony 时，问题就开始了。aptana，来自 eclipse 的代码推荐器和 Google 的 window builder pro。具体来说，**如果不自动卸载另一个，就无法安装任何一个。**他们每个人都有自己的安装特点，我接受。但关键是一次似乎只有一个“想要”安装。

不过，我找到了解决方法。这涉及卸载所有插件，然后以 root 身份重新安装每个插件。这工作得很好。但这也意味着我每次都必须以 root 身份运行 eclipse。作为 linux 文件系统的专家，我认为继续下去是非常不明智的，因为我已经搞砸了 eclipse 相关文件系统的权限。

可能有人遇到过这个问题，或者任何人都可以提供一些解决方案吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-02T22:53:51.213

尝试 sudo nautilus 将插件复制到 dropins 文件夹并使用文件属性将组设置为 users 并启用读取权限。

那么，您就不需要以 root 身份运行 eclipse。

# java - 如何使用外部 jar 执行 java 程序

> ID：11869462
> 
> 赞同：3
> 
> 时间：2012-08-08T16:56:47.160
> 
> 标签：java, jar, external

我想用番石榴运行我的程序。如果我编译我的程序

编辑： java -> javac 用于编译调用

```
javac -cp myPackages/guava-13.0.jar MyScanner.java 
```

没有问题。

如果我尝试跑步

```
java MyScanner -cp myPackages/guava-13.0.jar 
```

我在控制台上得到这个输出：

```
Exception in thread "main" java.lang.NoClassDefFoundError: com/google/common/base/Optional
at MyScanner.main(MyScanner.java:37)
Caused by: java.lang.ClassNotFoundException: com.google.common.base.Optional
at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
... 1 more 
```

你能告诉我如何使用外部 jar 执行程序吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T17:05:31.750

我想你想要的是：

```
java -cp myPackages/guava-13.0.jar:. MyScanner 
```

请注意，我在类路径中设置了两个值“。” （当前目录）和番石榴的路径。您的问题是您在指定 main class**之后**`MyScanner`指定了 classpath 选项。在主类之后指定的选项是程序的参数，而不是 java 本身的参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T16:59:22.970

你应该试试下面的东西

```
java -classpath myJar.jar my.package.Program 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T17:05:33.547

因为你的类名后面的任何东西

```
java MyScanner -whatever is --after
               ^         ^  ^ 
```

将是您类中主要方法的参数以及您的类名之前的所有内容

```
java --what -is -before MyScanner
     ^      ^   ^ 
```

将是 jvm 的参数。-cp 或 -classpath 必须是 jvm 参数，而不是程序的参数。

它必须阅读

```
java -cp myPackages/guava-13.0.jar MyScanner 
```

# url - 使用域 URL 时，Facebook 喜欢按钮不显示

> ID：11869466
> 
> 赞同：1
> 
> 时间：2012-08-08T16:57:05.980
> 
> 标签：url, facebook-like, blocked

在我的一个客户网站上，当按钮 URL 参数包含域名时，Facebook like 按钮不会显示。

[这里](http://theresesquared.com/5-ways-to-stand-out-from-the-crowd/)的例子。有问题的按钮位于帖子左侧的浮动共享栏中，就在推文计数器上方。

按钮的代码是：

```
<iframe src="http://www.facebook.com/plugins/like.php?href=[url]&layout=box_count&show_faces=false&width=60&action=like&colorscheme=light&height=45" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:45px; height:60px;" allowTransparency="true"></iframe> 
```

[url] 被当前页面 URL 替换。我测试了 [url] 短代码，它工作正常。

我尝试用帖子的特定 URL 替换 [url]，但它仍然没有显示。

如果我在不包含域名 (theresesquared.com) 的按钮代码中输入任何其他 URL，则按钮会显示并正常工作。

我不太确定为什么会这样。Facebook 会阻止域名theresesquared.com 吗？那可能吗？还是有另一种解释为什么按钮似乎不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T17:43:43.773

我也在客户的域中看到了这个问题。它发生在此处的按钮创建时：

[https://developers.facebook.com/docs/reference/plugins/like/](https://developers.facebook.com/docs/reference/plugins/like/)

如果您将上面提供的 url Andrew 放入 URL 字段 (http://www.theresesquared.com) 并在该字段上单击/单击，按钮预览就会消失。当您添加不同的域（例如 http://www.google.com）时，预览会重新出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-18T09:24:59.430

对不起，我原来的答案是错误的。这很令人困惑，因为它变成了“赞”按钮，并且该页面只有在我登录 Facebook 时才会显示。那是因为我将页面设置为仅对新西兰访问者可见。

您需要取消国家/地区限制，以便在用户未登录 Facebook 时显示“赞”按钮。

# c# - Protobuf.net：如何在没有 [ProtoInclude] 的情况下处理继承

> ID：11869467
> 
> 赞同：6
> 
> 时间：2012-08-08T16:57:14.827
> 
> 标签：c#, serialization, protocol-buffers, protobuf-net

我正在使用 Protobuf.net 序列化一些类。我希望能够序列化 SuperHero 类（如下），而不必在基类上指定 [ProtoInclude]。这是因为派生类是自动生成的，而基类不是，所以基类并不直接知道它的派生类。

```
 [ProtoContract]
    class Person
    {
        [ProtoMember(1)]
        public int Id { get; set; }
        [ProtoMember(2)]
        public string Name { get; set; }
    }

    [ProtoContract]
    class SuperHero : Person
    {
        [ProtoMember(3)]
        public string Powers { get; set; }
    } 
```

我正在使用最新版本的 protobuf.net。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T17:04:35.337

首先要注意：在某些时候，您的代码必须知道子类——也许是通过配置。重要的是，您能够以*某种方式*可靠地再现每个子类型的数字。如果您将数据存储到磁盘等，则在运行时找到类型时增加计数器是不够的，因为下次运行时您可能无法以相同的顺序找到类型。所以; 让我们假设*通过某种机制*，您有一个唯一的正整数，它将 SuperHero 表示为 Person 的子类：

```
int tag = 7; // why not
Type subType = typeof(SuperHero); 
```

然后，告诉 protobuf-net 这个子类型：

```
RuntimeTypeModel.Default.Add(typeof(Person), true).AddSubType(tag, subType); 
```

这相当于属性处理代码在看到时所做的`[ProtoInclude(...)]`

# python - 使用 arcpy 在列表中加载要素类：SearchCursor 的奇怪行为

> ID：11869473
> 
> 赞同：4
> 
> 时间：2012-08-08T16:57:42.720
> 
> 标签：python, geometry, arcpy

使用`arcpy`，我的目的是在列表中存储一个要素类以供进一步处理。每行将是 dict `{'field name': value}`，包括几何。

完成此任务的最 Pythonic 方式应该是使用列表推导：

```
fc = '/path/to/fc'
fields = [f.name for f in arcpy.ListFields(fc)]   # get field list
features = [[row.getValue(f) for f in fields] for row in arcpy.SearchCursor(fc)] 
```

此方法适用于数据，但列表中的几何图形都是相同的（在 fc 中检索到的最后一个几何图形）。[SearchCursor 的这种行为已经在 StackOverflow 上进行了评论](https://stackoverflow.com/questions/10815149/appending-to-a-tuple-overwriting-previous-values)。

我尝试了另一种方法：

```
fc = '/path/to/fc'
shape_field = arcpy.Describe(fc).shapeFieldName

# load geometry in a list
geom = arcpy.Geometry()
feat = [{shape_field: f} for f in arcpy.CopyFeatures_management(fc, geom)] # slow

# load data in a list
fields = [f.name for f in arcpy.ListFields(fc)]
data = [dict([(f, row.getValue(f)) for f in fields if f != shape_field]) for row in arcpy.SearchCursor(fc)] # slow

# merge
merge = zip(feat, data)
merge = [dict([(k, v) for adict in line for (k, v) in adict.items()]) for line in merge] # sorry for that... 
```

它适用于我的数据集，但是：

*   它很慢。
*   我不确定断言数据和壮举的顺序相同是否安全。

对此有何看法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T22:26:22.423

如果可能的话，迁移到使用 10.1 的地方`arcpy.da`，这是一个性能显着提高的游标 API。[我已经写了一篇关于取回字典这个主题的日志帖子](http://arcpy.wordpress.com/2012/07/12/getting-arcpy-da-rows-back-as-dictionaries/)。几何图形都是一样的，因为它在内部使用了一个回收游标，所以在 10.0 中，您需要抓取`shape.__geo_interface__`并使用`AsShape`它来将其恢复为几何对象。

*取回行的顺序是相当随意的：您可以期望它在没有*where 子句的 shapefile 中每次都相同，仅此而已，因此您的两遍方法实际上并不可靠。

考虑到所有这些，您可以执行以下操作：

```
def cursor_to_dicts(cursor, field_names):
    for row in cursor:
        row_dict = {}
        for field in field_names:
            val = row.getValue(field)
            row_dict[field] = getattr(val, '__geo_interface__', val)
        yield row_dict

fc = '/path/to/fc'
fields = [f.name for f in arcpy.ListFields(fc)]   # get field list
features = list(cursor_to_dicts(arcpy.SearchCursor(fc), fields)) 
```

神奇的是调用——如果存在就`getattr()`尝试抓取，否则默认为.`value.__geo_interface__``value`

由于这个问题实际上并不是关于 Python 语言，而是一个`arcpy`特定于 GIS 的 API ( )，因此您将来最好在 gis.stackexchange 上问这样的问题。

# eclipse - 无法将字符串从“UTF-8”转换为本机编码

> ID：11869475
> 
> 赞同：11
> 
> 时间：2012-08-08T16:57:48.260
> 
> 标签：eclipse, svn, diff, javahl

当我尝试在 Eclipse 中比较我的项目（团队->比较）时，我收到以下错误消息：

（无法将字符串从 'UTF-8' 转换为本机编码）

```
***
diff --old /Users/admin/Documents/workspace_branch_2.8/Test --new https://192.168.1.202/svn/main_repository/tenios/Voxtelo/bundle/trunk/Server/Test
    Invalid argument
svn: Kann Zeichenkette nicht von »UTF-8« in die eigene Codierung konvertieren:
svn: 
Eigenschafts?\195?\164nderungen: /Users/admin/Documents/workspace_branch_2.8/Test/src/main/java/org/test/test/internal/commands/Command.java

ZM-Schicht Anforderung gescheitert
svn: Fehler beim Lesen der Antwort auf die REPORT Anfrage von Festplatte
*** 
```

但是，如果我运行命令：

```
svn diff --old /Users/admin/Documents/workspace_branch_2.8/Test --new https://192.168.1.202/svn/main_repository/tenios/Voxtelo/bundle/trunk/Server/Test 
```

在 mac os 上使用命令行，差异工作没有问题。根据我的阅读，当客户端从存储库收到 UTF-8 字符串时，通常会发生此类错误，但并非该字符串的所有字符都可以显示在当前语言环境的编码中。“语言环境”的输出是：

```
LANG="de_DE.UTF-8"
LC_COLLATE="de_DE.UTF-8"
LC_CTYPE="de_DE.UTF-8"
LC_MESSAGES="de_DE.UTF-8"
LC_MONETARY="de_DE.UTF-8"
LC_NUMERIC="de_DE.UTF-8"
LC_TIME="de_DE.UTF-8"
LC_ALL= 
```

eclipse好像没有使用这些设置，有没有其他方法可以在eclipse中配置locale设置？我不确定，但问题可能与 javaHL 有关，某处是否有跟踪文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T00:47:42.697

JavaHL 只是 SVN 的包装器。如我所见，JavaHL 调用 svn 命令（svn diff ...）并解析返回的消息。您尝试执行的命令返回在此差异中某些属性已更改的信息（在德语 Eigenschaftsänderung 中）。不幸的是，处理呼叫的终端弄乱了编码。结果是“RA 层请求失败”(ZM-Schicht Anforderung gescheitert)，这仅仅意味着 JavaHL 无法解析返回的消息。

你可以尝试的事情：

1.  用 Eclipse 启动`LC_MESSAGES="en_US.UTF-8" /path/to/eclipse/eclipse`，也许 JavaHL 会调用带有英文消息的 svn 可执行文件

2.  检查启动 Eclipse 的终端。它支持unicode吗？（rxvt 没有，而 urxvt 有）

    输入`ä`您的终端并检查输出。您应该看到`ä`as readable 字符。正如您从我的输出中看到的，字符应编码为 \303\244 而不是 \195\164 （303 是十进制 195 的八进制表示，并且 244(oct) == 164(dec)）

    ```
    $ ä
    bash: $'\303\244': command not found 
    ```

希望这可以帮助。

# php - 从 MySQL 数据库中获取内容到 html 页面

> ID：11869477
> 
> 赞同：-1
> 
> 时间：2012-08-08T16:57:48.463
> 
> 标签：php, mysql, html

我有一个 HTML 页面，我想显示来自`MySQL`数据库的一些信息。我尝试放入`<iframe src="xxx.php"></iframe>`HTML 源代码。当我在 Firefox 和 Chrome 中打开 HTML 时，信息显示正确（该`xxx.php`文件包含一个简单的 mysql 查询），但它不适用于 IE。经过一番搜索，我发现这是 IE 安全问题的结果。

所以，我的问题是：是否有另一种方法可以将 MySQL 数据库中的内容显示为完全静态的 HTML 文件？我对 Javascript、Ajax 和 jQuery 几乎一无所知，所以如果必须使用它们，请尽可能详细地指导我，以便我能够遵循它。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T17:06:55.363

如果您别无选择，只能提供静态 html，请尝试考虑通过 JavaScript 使用 AJAX 调用。

例如，在 jQuery 中，您可以执行以下操作：

```
<html>
.
.
.
<body>
    <!-- every other piece of html -->
    <div id="your_php_results"></div>
    <script type="text/javascript">
         $(function() {
             $.get('xxx.php', function(data) {
                 $('#your_php_results').html(data);
             });
         });
    </script>
</body>
</html> 
```

`xxx.php`是 的相对路径**或**绝对 URL `xxx.php`。

在此实现中，`xxx.php`必须生成 HTML，然后将其放置在`div`. jQuery `$.get`-call 的作用是请求您在第一个参数中指定的位置，并获取资源生成的所有输出。例如，如果这是您的 php 文件：

```
<?php
    //xxx.php
    $data = array('Apfel', 'Birne', 'Banane'); //this is just example data
?>
<ul>
<?php foreach($data as $fruit) : ?>
    <li><?php echo $fruit ?></li>
<?php endforeach; ?>
</ul> 
```

那么生成的输出将是：

```
<ul>
   <li>Apfel</li>
   <li>Birne</li>
   <li>Banane</li>
</ul> 
```

这将被获取，`$.get`执行后生成的 HTML 文件将是：

```
<html>
.
.
.
<body>
    <!-- every other piece of html -->
    <div id="your_php_results">
    <ul>
        <li>Apfel</li>
        <li>Birne</li>
        <li>Banane</li>
    </ul>
    </div>
    <script type="text/javascript">
         // ...
    </script>
</body>
</html> 
```

如果 JS 不是一个选项，则剩下 iFrame 变体，它也应该适用于所有浏览器，包括 IE。

编辑：更好的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T17:05:43.060

您可以改用 ajax 调用，并将您从 mysql 收到的信息附加到某个页面元素（例如 id 为“results”的 div）：

```
$(document).ready(function(){
    $.ajax({
      url: "script.php",
      dataType: "html"
    }).done(function( html ) {
      $("#results").append(html);
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T17:37:29.517

我认为，您的问题与 Internet Explorer 的 iframe 上的同源策略有关，此线程可能会对您有所帮助：[Blank iFrame in IE](https://stackoverflow.com/questions/4444014/blank-iframe-in-ie)

# ios - 如何解决代码签名错误：身份 ipad 与您的钥匙串中的任何有效、未过期的证书/私钥对不匹配？

> ID：11869486
> 
> 赞同：7
> 
> 时间：2012-08-08T16:58:33.890
> 
> 标签：ios, xcode, ipad, titanium

我是 iOS 开发新手（因此是 MacOSx 的新手）并使用 Titanium，我使用的版本是 2.1。我试图在 iPad 上部署我的应用程序，但出现以下错误：

```
[ERROR] Code Sign error: The identity 'iPhone Developer' doesn't match any valid, non-expired certificate/private key pair in your keychains 
```

当我检查 Xcode 配置文件有状态`Valid signing identity not found`时，我的 Xcode 版本是 4.4。我已经进入我的团队开发者门户，应用程序和 iPad 在那里注册并下载了证书和配置文件，我似乎无法弄清楚这有什么问题。我已经尝试过[这篇](https://stackoverflow.com/questions/6769345/xcode-4-valid-signing-identity-not-found-error-on-provisioning-profiles-on-a)文章，但我无法解决我的问题。

我真的迷路了，我希望有人能指导我找到这个问题的答案。到目前为止，我所阅读的内容还没有给我一个解决方案。希望任何人都可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T00:34:34.887

每次我遇到这个问题时（当我使用新机器或新设备时），我总是参考这篇文章：

[iPhone 应用签名：在您的钥匙串中找不到与此配置文件匹配的有效签名身份](https://stackoverflow.com/questions/999313/iphone-app-signing-a-valid-signing-identity-matching-this-profile-could-not-be)

路易的回答总是对我有用。祝你好运

# apache - Apache重写规则不适用于变量？想要为某个路径禁用 HTTPS

> ID：11869491
> 
> 赞同：2
> 
> 时间：2012-08-08T16:58:47.087
> 
> 标签：apache, mod-rewrite

我们为数十个网站提供服务，并且不想执行特定于 vhost 的重写规则。基本上，我需要永远不要通过 HTTPS 提供所有 /info/ 页面。

目前我们有这个：

```
RewriteRule ^/info/([A-Za-z_.0-9-]*) /info.jsp?LinkName=$1 [PT,QSA,L] 
```

我想我可以将重写规则更改为：

```
RewriteRule ^/info/([A-Za-z_.0-9-]*) http://%{SERVER_NAME}/info.jsp?LinkName=$1 [PT,QSA,L] 
```

或者

```
RewriteRule ^/info/([A-Za-z_.0-9-]*) http://%{HTTP_HOST}/info.jsp?LinkName=$1 [PT,QSA,L] 
```

或者

```
RewriteRule ^/info/([A-Za-z_.0-9-]*) http://%{HTTP_HOST}/info.jsp?LinkName=$1 [PT,QSA,L,R=301] 
```

ETC...

但无论我做什么，在进行涉及变量的任何重写规则更改时，我在点击这些信息页面时都会出现 404：

> “错误请求您的浏览器发送了此服务器无法理解的请求。”

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T17:38:22.257

如果您要重写为完全限定的 URL，我认为您不能使用`passthrough`( ) 标志。`PT`这必须作为客户端重定向处理。如果您替换`PT`为`R`（或仅删除`PT`已有标志的`R`标志），它应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T20:11:19.480

您已经拥有的用于重写 info.jsp 的规则很好。但是你需要在它**之前**添加一些规则。

```
RewriteCond %{HTTPS} on
RewriteRule ^/?info/ http://%{HTTP_HOST}%{REQUEST_URI} [L,R=301] 
```

# c# - 使用 C# 将 FoxPro 表导入 SQL - 一张表有效，一张无效

> ID：11869495
> 
> 赞同：4
> 
> 时间：2012-08-08T16:59:00.987
> 
> 标签：c#, sql, foxpro

我正在研究一些从 FoxPro 表中导入数据并将其写入 SQL 表的方法。这只是企业级应用程序的一小部分，坦率地说，其中大部分都超出了我的想象。我遇到问题的方法获取两个 FoxPro 表并将它们放入数据集中。第一张桌子过来没问题，但第二张桌子一直空着。这是我的代码（代码后有更多详细信息）：

```
public DataSet GetFoxProDelinquencyData()
    {
        DataSet bothDlqTables = new DataSet();
        DataSet DlqData;
        string selectQuery = "SELECT * FROM MasterDlqTable";

        try
        {
            DlqData = _foxProServiceAccess.ExecuteFoxProDataSet(selectQuery, 1);
        }
        catch (Exception exceptionToHandle)
        {
            throw ExceptionHelper.HandleFoxProException(exceptionToHandle,
                            "Failed to get data from FoxPro");
        }

        DlqData.Tables[0].TableName = "Master";
        bothDlqTables.Tables.Add(DlqData.Tables[0].Copy());
        string delqnum = Convert.ToString(bothDlqTables.Tables[0].Rows[0]["delqnum"]);
        selectQuery = String.Format("SELECT * FROM rvdlqhst_txps WHERE delqnum = '{0}'", delqnum);

        try
        {
            DlqData = _foxProServiceAccess.ExecuteFoxProDataSet(selectQuery, 1);
        }
        catch (Exception exceptionToHandle)
        {
            throw ExceptionHelper.HandleFoxProException(exceptionToHandle,
                            "Failed to get data from FoxPro");
        }

        DlqData.Tables[0].TableName = "History";
        bothDlqTables.Tables.Add(DlqData.Tables[0].Copy());
        return bothDlqTables;
    } 
```

因此，当我在调试时，我在最后返回之前查看了两个 DlqTables 的内容，主表是完美的，历史表具有来自 FoxPro 等效项的正确列，但它没有数据。与 DlqData 数据集相同。delqnum 字符串包含 000210，我们的 dB 人员确认 FoxPro 表肯定包含具有该拖欠编号的记录。当他跑

```
SELECT * FROM rvdlqhst_txps WHERE delqnum = '000210' 
```

从数据库查看器中，他得到了结果。我尝试将该 SELECT 语句硬编码为字符串而不是 string.format 命令，但我仍然得到相同的空表。有什么建议么？

更新：我在第一次查询时也遇到间歇性错误：

无法连接到 net.tcp://rdsfoxproqa.alatax.com/FoxProService_Dist。连接尝试持续了 00:00:01.0625340 的时间跨度。TCP 错误代码 10061：无法建立连接，因为目标机器主动拒绝了它 172.19.0.105:808。

它不时发生，通常我可以等待 30 分钟左右，然后再试一次，查询就会起作用。我不认为这是相关的，但我也不知道是什么原因造成的并且很想这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T08:30:13.997

如果 DaveB 的回答没有帮助：如果你完全删除 WHERE 子句，你会得到一些数据吗？这可能有助于找到问题的原因。

# javascript - jQuery 显示/隐藏切换在 Internet Explorer 中损坏

> ID：11869500
> 
> 赞同：2
> 
> 时间：2012-08-08T16:59:12.977
> 
> 标签：javascript, jquery, internet-explorer

我创建了一个包含多个 div 的页面，我想切换到同一个地方。这在 chrome 和 firefox 中运行良好，但在 Internet Explorer 中却没有。我在一个页面上使用了相同的方法，它工作正常，但是当我在另一个页面上复制它以使用多个 div 时它会中断。

jQuery是：

```
<script type="text/javascript">
$(document).ready(function(){ 

//Hide the box       
  $("#sub1").hide();

//Sets up the click function and speed  
  $("#btn-slide").click(function(){
  $("#sub1").slideToggle("slow",function(){

//Toggles link text between open and close  
//=="Open" or as changed here to "VIEW DR. MARTENS HISTORY" is vital in order to close the box
($("#btn-slide").html()=="| THE PUNK SCENE |")?$("#btn-slide").html("Close"):$("#btn-slide").html("| THE PUNK SCENE |");

  });
  return false; 
}); 
</script> 
```

这是在我的头标签中，我已经复制了 3 次，所以它总共在 4 个 div 上工作。我已将 #btn-slide 更改为 #btn-slide1 等。

html是：

```
<div id="move"><a  href="#" title="| THE PUNK SCENE |" id="btn-slide"  >| THE PUNK SCENE |</a></div> 
```

这是单击以打开隐藏 div 的链接。同样，我有更多具有不同 div id 的这些 div 调用不同的#btn-slide。

这是正在打开的 div 的 html：

```
 <div id="sub1"><strong>The Punk scene</strong> -and 2nd Generation Skins<br />
    <br />
    Following the Skins the Punk scene was a well  known youth subculture to wear Dr. Martens. When Punk became known in the late  70's a second generation of Skins derived from the Punk scene. The media have  often portrayed the 2nd gen Skin over the years, with the popular opinion of  Skinhead culture being a 14 hole Dr. Marten (and white laces wearing)  aggressive young white male. Fascist parties sourced new recruits from football  games and amongst a violent throng of spectators some new recruits were Skins.  <br />
       </div> 
```

我希望这是有道理的，任何人都对如何使其与 IE 兼容有任何想法。我在 IE 上使用了 f12 工具，但没有错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T17:13:00.450

您缺少一些右括号。

这是小提琴：http: [//jsfiddle.net/esRFt/7/](http://jsfiddle.net/esRFt/7/)

它似乎在 IE8 上运行良好。哪个版本有问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T17:05:28.250

jQuery 的`html()`函数只是在内部调用`.innerHTML`，这在 IE 中是有缺陷的。您应该在三元条件下使用不同的测试（例如`hasClass()`）。

# python - South 不认识我的模型

> ID：11869504
> 
> 赞同：1
> 
> 时间：2012-08-08T16:59:26.090
> 
> 标签：python, django, django-south

我有以下名为 UnixTimestampField 的类：

```
from django.db import models
from datetime import datetime
from time import strftime

class UnixTimestampField(models.DateTimeField):
    op_params=''
    def __init__(self, null=False, blank=False, op_params='', **kwargs):
        super(UnixTimestampField, self).__init__(**kwargs)
        self.blank, self.isnull = blank, null
        self.null = True

    def db_type(self, connection):
        typ=['TIMESTAMP']
        # See above!
        if self.isnull:
            typ += ['NULL']
        if self.op_params != '':
            typ += [self.op_params]
        return ' '.join(typ)

    def to_python(self, value):
        return datetime.from_timestamp(value)

    def get_db_prep_value(self, value, connection, prepared=False):
        if value==None:
            return None
        return strftime('%Y%m%d%H%M%S',value.timetuple())

    def to_python(self, value):
        return value

from south.modelsinspector import add_introspection_rules
add_introspection_rules([], ["^web\customfields\.unixtimestampfield\.UnixTimestampField"]) 
```

每次我运行以下命令时：`python manage.py schemamigration web --initial`，我不断得到：

`! (this field has class web.customfields.unixtimestampfield.UnixTimestampField)`

有什么我想念的吗？它似乎甚至不承认该领域的存在？我正在阅读以下文档：

[http://south.readthedocs.org/en/latest/customfields.html#extending-introspection](http://south.readthedocs.org/en/latest/customfields.html#extending-introspection)

[http://south.readthedocs.org/en/latest/tutorial/part4.html#keyword-arguments](http://south.readthedocs.org/en/latest/tutorial/part4.html#keyword-arguments)

**[解决方案]**

这个错误很简单。

以下行： `^web\customfields\.unixtimestampfield\.UnixTimestampField`不正确。

改为： `^web\.customfields\.unixtimestampfield\.UnixTimestampField`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T17:34:24.760

这是简陋的。但是您可以将模型中的 UnixTimestampField 更改为 DateTimeField。执行这个：

```
python manage.py schemamigration web --initial 
```

在您将 DateTimeField 更改为 UnixTimestampField 之后

这必须有效....但这是肮脏的解决方案

尽管您的代码可能有错误，但请更改以下内容：

```
add_introspection_rules([], ["^web\customfields\.unixtimestampfield\.UnixTimestampField"]) 
```

为了这：

```
add_introspection_rules([], ["^web\.customfields\.unixtimestampfield\.UnixTimestampField"]) 
```

# python - pyxmpp - 如何发送原始 XML

> ID：11869506
> 
> 赞同：2
> 
> 时间：2012-08-08T16:59:31.993
> 
> 标签：python, xml, xmpp

如何使用 pyxmpp 发送原始 XML 代码？

就像是：

```
 c.send("<presence to='jid@domain.com/resource'/>") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T18:40:13.053

如果我没记错的话（你现在找不到 API 引用），那就是

```
c.stream.write_raw("<presence to='jid@domain.com/resource/'>") 
```

# zend-framework - Zend Autoloader 播种错误

> ID：11869509
> 
> 赞同：1
> 
> 时间：2012-08-08T16:59:42.843
> 
> 标签：zend-framework

我的目录结构如下：

```
 Application
   Config
   Control
   Form
   Layout
   Models
     |
     ----Db
         |
          ---Db_Db.php
   Views
   Bootstrap 
```

我在我的引导文件中添加了这段代码：

```
protected function _initAutoload()
{   
 $resourceLoader = new Zend_Loader_Autoloader_Resource(array(
'basePath'  => '/../models/',
'namespace' => 'Db',
));
$resourceLoader->addResourceType('Db', 'Db/', 'Db'); 
} 
```

在我的一个控制器中，我正在使用：

```
 require_once "Db_Db.php"; 
```

但它给了我一个错误：

> 警告：require_once(Db_Db.php)：无法打开流：C:\wamp\bin\apache\apache2.2.22\htdocs\helloworld\application\controllers\AccountController.php 中没有这样的文件或目录，第 41 行调用堆栈

你能告诉我可能出了什么问题吗？

另外我的`Bootstrap`文件只包含上面的代码，其余的我所有的东西，比如应用程序环境，都在`index.php`公共文件夹下，会有什么不同吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T15:10:40.523

在这种情况下，您假设您有 Db_Db 命名空间并且类名应该是 Db_Db_Db。第二件事，使用 APPLICATION_PATH 常量使路径正确。只需执行以下操作：

```
$resourceLoader = new Zend_Loader_Autoloader_Resource(array(
    'basePath'  => APPLICATION_PATH . '/../models/',
    'namespace' => ''
)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T15:33:59.633

对于加载文件，您应该使用 Zend_Autoloader 而不是 require_once ，它将遵循来自 zend 框架的所有自动加载配置。

参考这个[http://framework.zend.com/manual/en/zend.loader.load.html](http://framework.zend.com/manual/en/zend.loader.load.html)

您在文件 Db_Db.php 中给出的类名是什么？

# c# - C# - 如何使用索引将字符串的一部分输出到控制台

> ID：11869510
> 
> 赞同：1
> 
> 时间：2012-08-08T16:59:45.590
> 
> 标签：c#, string

我正在编写一个简单的算法，每次满足特定条件时都应该在控制台中写入。这是我的代码：

```
public static void StringTest()
{
    string stringToUse = "Ala BalaB JiBBerish Ala Jibberish Ala BalaB";

    int strLength = stringToUse.Length;
    int i = 0;
    while(i < strLength-4)
    {
        if (stringToUse[i] == stringToUse[(i + 4)] && stringToUse[(i + 1)] == stringToUse[(i + 3)])
            System.Console.WriteLine(stringToUse[i] + stringToUse[(i + 1)] + stringToUse[(i + 2)] + stringToUse[(i + 3)] + stringToUse[(i + 4)]);

        i++;
    }
} 
```

但输出是数字字符串而不是文字字符串`434`。如果有人可以解释我为什么我没有收到错误和那些数字，我应该如何格式化输出以获得实际的字母？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T17:01:27.563

您将字符加在一起 ​​- 这将为您提供一个整数值。看起来您可能应该只使用 Substring：

```
Console.WriteLine(stringToUse.Substring(i, 5)); 
```

或者，您*可以*格式化字符：

```
Console.WriteLine("{0}{1}{2}{3}{4}",
                  stringToUse[i],
                  stringToUse[i + 1],
                  stringToUse[i + 2],
                  stringToUse[i + 3],
                  stringToUse[i + 4]); 
```

（顺便说一句，请注意删除多余的括号。*有时*额外的括号很有用 - 在这里它们只是分散注意力。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T17:02:33.543

```
Console.WriteLine(stringToUse.substring(i, 5)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T17:03:04.293

您可以使用`string`ctor，因为`[]`您获得的是 a`char`而*不是*a `string`，

```
if (stringToUse[i] == stringToUse[(i + 4)] && stringToUse[(i + 1)] == stringToUse[(i + 3)])
{
     //Construct string from the sequence of chars you want...
     string result = new string(new char[]{stringToUse[i],
                                     stringToUse[(i + 1)], 
                                         stringToUse[(i + 2)],
                                            stringToUse[(i + 3)], 
                                               stringToUse[(i + 4)]});
     System.Console.WriteLine(result);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T17:08:19.583

更改您的代码以匹配此：

```
public static void StringTest()
{
    string stringToUse = "Ala BalaB JiBBerish Ala Jibberish Ala BalaB";

    for (int i = 0; i < stringToUse.Length - 4; ++i)
    {
        if (stringToUse[i] == stringToUse[(i + 4)] &&
            stringToUse[(i + 1)] == stringToUse[(i + 3)])
        {
            Console.WriteLine(string.Join(string.Empty,
                stringToUse[i],
                stringToUse[i + 1],
                stringToUse[i + 2],
                stringToUse[i + 3],
                stringToUse[i + 4]));
        }
    }
} 
```

您应该使用`for`循环而不是`while`带有递增变量的循环。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T17:02:33.517

`stringToUse[i]`是类型`char`。您正在添加`char`值，因此是数字。你想`stringToUse.Substring(i, 5)`改用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-08T17:03:46.867

```
System.Console.WriteLine(new[] {stringToUse[i], stringToUse[(i + 1)],stringToUse[(i + 2)],stringToUse[(i + 3)],stringToUse[(i + 4)]}); 
```

# ios - 如何知道 NSFetchedResultsChangeUpdate 更改了哪个属性？

> ID：11869520
> 
> 赞同：2
> 
> 时间：2012-08-08T17:00:28.090
> 
> 标签：ios, uitableview, core-data, nsfetchedresultscontroller

我认为有一个问题`controller:didChangeObject:atIndexPath:forChangeType:newIndexPath:`，具体为`NSFetchedResultsChangeUpdate`：它没有告诉你是什么变化导致了这个`NSFetchedResultsChangeUpdate`。

我有一个非常复杂的实体。只有一部分数据用于填充我的表格视图单元格。我不想为任何不相关的属性更改更新我的单元格——这是对资源的浪费。那么我如何知道是哪个属性更改导致了这种`NSFetchedResultsChangeUpdate`情况，以便在不相关的情况下避免更新我的表格视图单元格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T21:26:25.237

您可以将分配给单元格的值与更改的 NSManagedObject 中的属性值进行比较。假设您在自定义单元格上使用 3 个标签，并且您的对象有更新，您可以向单元格子类添加一个方法并传递 NSManagedObject 询问单元格是否需要更新。该单元格将验证 NSManagedObject 的值并将它们与标签的值进行比较。如果它们不相等，则需要更新。您可以从您在问题上发布的委托方法的索引路径访问单元格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-16T10:45:55.370

*NSManagedObject*有两种方法。首先返回一个字典，其中包含自上次获取或保存对象以来已更改的键和（新）值（这在没有触发关系错误的情况下有效地实现）

```
- (NSDictionary *)changedValues; 
```

第二：

```
- (NSDictionary *)changedValuesForCurrentEvent NS_AVAILABLE(10_7, 5_0); 
```

*您通过NSFetchedResultsController*调用他们的*NSFetchedResultsChangeUpdate*通知

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-17T10:36:20.313

Apple 通过创建一个保留托管对象的 UITableViewCell 子类（良好的 KVO 实践）来实现此优化（在 MobileNotes 中），并在自定义设置器中为感兴趣的属性添加 KVO，但如果前一个对象存在，则首先删除前一个对象的 KVO。在 prepareForReuse 中，它将对象设置为 nil。在 dealloc 中，如果 _object 不为零，它会删除 KVO。

这是我的通用演示类，但是最好将代码复制到您的类中，而不是子类化；重命名对象属性：

**MCDManagedObjectTableViewCell.h**

```
#import <CoreData/CoreData.h>
#import <UIKit/UIKit.h>
#import <MCoreData/MCDDefines.h>

NS_ASSUME_NONNULL_BEGIN

MCDATA_EXTERN void * const MCDManagedObjectTableViewCellKVOContext;

@interface MCDManagedObjectTableViewCell<__covariant ManagedObjectType : __kindof NSManagedObject *> : UITableViewCell

// needs to be retained to prevent being turned into a fault
@property (nullable, strong, nonatomic) ManagedObjectType object;

// overrides

// update views from the object's properties
- (void)updateViewsFromCurrentObject NS_REQUIRES_SUPER;
// calls update if on screen otherwise sets a flag and then updates when comes on screen.
- (void)updateViewsFromCurrentObjectIfNecessary NS_REQUIRES_SUPER;

// use addObserver and the MCDManagedObjectTableViewCellKVOContext
- (void)addKVOObserversForObject:(ManagedObjectType)object;
- (void)removeKVOObserversForObject:(ManagedObjectType)object;

@end

NS_ASSUME_NONNULL_END 
```

**MCDManagedObjectTableViewCell.m**

```
#import "MCDManagedObjectTableViewCell.h"

void * const MCDManagedObjectTableViewCellKVOContext = (void *)&MCDManagedObjectTableViewCellKVOContext;

@interface MCDManagedObjectTableViewCell ()
@property (nonatomic) BOOL needsToUpdateViews;
@end

@implementation MCDManagedObjectTableViewCell

- (void)setObject:(__kindof NSManagedObject *)object{
    if(_object == object){
        return;
    }
    else if(_object){
        [self removeKVOObserversForObject:_object];
    }
    _object = object;
    if(object){
        [self addKVOObserversForObject:object];
    }
    [self updateViewsFromCurrentObjectIfNecessary];
}

- (void)addKVOObserversForObject:(__kindof NSManagedObject *)object{
}

- (void)removeKVOObserversForObject:(__kindof NSManagedObject *)object{
}

- (void)observeValueForKeyPath:(nullable NSString *)keyPath ofObject:(nullable id)object change:(nullable NSDictionary<NSKeyValueChangeKey, id> *)change context:(nullable void *)context{
    if(context != MCDManagedObjectTableViewCellKVOContext){
        [super observeValueForKeyPath:keyPath ofObject:object change:change context:context];
        return;
    }
    [self updateViewsFromCurrentObjectIfNecessary];
}

- (void)updateViewsFromCurrentObject{
    self.needsToUpdateViews = NO;
}

- (void)updateViewsFromCurrentObjectIfNecessary{
    if(self.window){
        [self updateViewsFromCurrentObject];
    }else{
        self.needsToUpdateViews = YES;
    }
}

- (void)willMoveToWindow:(UIWindow *)window{
    if(window && self.needsToUpdateViews){
        [self updateViewsFromCurrentObject];
    }
}

- (void)prepareForReuse{
    [super prepareForReuse];
    self.object = nil;
}

- (void)dealloc{
    if(_object){
        [self removeKVOObserversForObject:_object];
    }
}

@end 
```

此外，如果单元格需要显示依赖于多个属性的字符串，则可以将自定义属性（例如 titleForTableViewCell）添加到模型子类中，并且可以使用“受其影响的键”机制并在该单个属性上使用 KVO。*

# c# - 无法在 XNA 中绘制超过正方形的图像

> ID：11869524
> 
> 赞同：8
> 
> 时间：2012-08-08T17:00:47.210
> 
> 标签：c#, xna

我正在做一个乒乓球游戏。在调试时，我一直在使用一个简单的 44 x 44 .png 红色正方形作为我的球。游戏在这个方块上运行良好。

当我尝试用正方形以外的任何东西替换纹理时，我看不到屏幕上绘制的球，我不知道为什么。我在 Photoshop 中使我的图像大小完全相同，并使用 .PNG 或 .JPG 并获得相同的结果，但我一生都无法弄清楚。你认为什么可能导致这个问题？

我在下面的文字中留下了我的球的代码。GameplayScreen 正在调用我的球的更新和绘制方法（使用 MS 的 GSM 示例）。

```
 public class Ball : IGameEntity
{
    #region Fields

    private Random rand;                // Random var
    private Texture2D texture;          // Texture for the ball
    private double direction;           // Directon the ball is traveling in                
    private bool isVisible;
    private bool hasHitLeftBat;         // Checked to see if the ball and bat have just collided
    private bool hasHitRightBat;        // Checked to see if the ball and bat have just collided
    private Vector2 ballPosition, resetBallPos, oldBallPos;
    private Rectangle ballRect;
    public float Speed;
    private SpriteBatch spriteBatch;    // Spritebatch
    private bool isBallStopped;
    private Vector2 origin;             // Locate the mid-point of the ball
    public float RotationAngle;
    private AIBat rightBat;             // Player's Bad
    private Bat leftBat;                // AI Bat
    private float ballRelativePos;
    private Rectangle rectangle3;       // Used to draw the collison rectangle
    private Texture2D blank;            // Texture to be drawn on the collision rectangle

    GameplayScreen gameplayScreen;      // Creates an instance of the GameplayScreen
    Game1 gameInstance;                 // Creates an instance of the Game1 class
    int selectedStage;                  // Pass this into GameplayScreen for selecting easy, medium, or hard

    #endregion

    #region Constructors and Destructors

    /// <summary>
    /// Constructor for the ball
    /// </summary>
    public Ball(ContentManager contentManager, Vector2 ScreenSize, Bat bat, AIBat aiBat)
    {
        Speed = 15f;
        texture = contentManager.Load<Texture2D>(@"gfx/balls/redBall");
        direction = 0;
        ballRect = new Rectangle(0, 0, texture.Width /2, texture.Height /2);
        resetBallPos = new Vector2(ScreenSize.X / 2 + origin.X, ScreenSize.Y / 2 + origin.Y);
        ballPosition = resetBallPos;
        rand = new Random();
        isVisible = true;
        origin = new Vector2(texture.Width / 2, texture.Height / 2);
        leftBat = bat; // Creates a new instance of leftBat so that I can access Position.X/Y for LeftBatPatcicles()
        rightBat = aiBat;// Creates a new instance of leftBat so that  can access Position.X/Y for RightBatPatcicles()
        gameplayScreen = new GameplayScreen(null, selectedStage);
        gameInstance = new Game1();
        Rectangle rectangle3 = new Rectangle();
        blank = contentManager.Load<Texture2D>(@"gfx/blank");               

        //   pes = new ParticleEmitterService(game);
    }

    public Ball(Bat myBat)
    {
        leftBat = myBat;          // this assigns and instantiates the member bat
                                  // with myBat which was passed from the constructor
    }

    #endregion

    #region Methods

    /// <summary>
    /// Draws the ball on the screen
    /// </summary>
    public void Draw(SpriteBatch spriteBatch)
    {
        if (isVisible)
        {
            // Draws the rotaing ball
            spriteBatch.Draw(texture, ballPosition, ballRect, Color.White,
                              RotationAngle, origin, .0f, SpriteEffects.None, 0);

            spriteBatch.Draw(blank, rectangle3, Color.LightCoral);
        }
    }

    /// <summary>
    /// Updates position of the ball. Used in Update() for GameplayScreen.
    /// </summary>
    public void UpdatePosition(GameTime gameTime)
    {
        ballRect.X = (int)ballPosition.X;
        ballRect.Y = (int)ballPosition.Y;
        oldBallPos.X = ballPosition.X;
        oldBallPos.Y = ballPosition.Y;

        ballPosition.X += Speed * ((float)Math.Cos(direction));

        ballPosition.Y += Speed * ((float)Math.Sin(direction));
        bool collided = CheckWallHit();

        // Stops the issue where ball was oscillating on the ceiling or floor
        if (collided)
        {
            ballPosition.X = oldBallPos.X + Speed * (float)1.5 * (float)Math.Cos(direction);
            ballPosition.Y = oldBallPos.Y + Speed * (float)Math.Sin(direction);
        }

        // As long as the ball is to the right of the back, check for an update
        if (ballPosition.X > leftBat.BatPosition.X)
        {
            // When the ball and bat collide, draw the rectangle where they intersect
            BatCollisionRectLeft();
        }

        // As longas the ball is to the left of the back, check for an update
        if (ballPosition.X < rightBat.BatPosition.X)
        {   // When the ball and bat collide, draw the rectangle where they intersec
            BatCollisionRectRight();
        }

        // The time since Update was called last.
        float elapsed = (float)gameTime.ElapsedGameTime.TotalSeconds;

        // Rotation for the ball
        RotationAngle += elapsed;
        float circle = MathHelper.Pi * 2;
        RotationAngle = RotationAngle % circle;

        //      base.Update(gameTime);
        gameInstance.update();

    }

    /// <summary>
    /// Checks for the current direction of the ball
    /// </summary>
    public double GetDirection()
    {
        return direction;
    }

    /// <summary>
    /// Checks for the current position of the ball
    /// </summary>
    public Vector2 GetPosition()
    {
        return ballPosition;
    }

    /// <summary>
    /// Checks for the current size of the ball (for the powerups)
    /// </summary>
    public Rectangle GetSize()
    {
        return ballRect;
    }

    /// <summary>
    /// Checks to see if ball went out of bounds, and triggers warp sfx. Used in GameplayScreen.
    /// </summary>
    public void OutOfBounds()
    {
        AudioManager.Instance.PlaySoundEffect("Muzzle_shot");
    }

    /// <summary>
    /// Speed for the ball when Speedball powerup is activated
    /// </summary>
    public void PowerupSpeed()
    {
        Speed += 20.0f;
    }

    /// <summary>
    /// Check for where to reset the ball after each point is scored
    /// </summary>
    public void Reset(bool left)
    {
        if (left)
        {
            direction = 0;
        }
        else
        {
            direction = Math.PI;
        }

        ballPosition = resetBallPos; // Resets the ball to the center of the screen
        isVisible = true;
        Speed = 15f; // Returns the ball back to the default speed, in case the speedBall was active
        if (rand.Next(2) == 0)
        {
            direction += MathHelper.ToRadians(rand.Next(30));
        }
        else
        {
            direction -= MathHelper.ToRadians(rand.Next(30));
        }
    }

    /// <summary>
    /// Shrinks the ball when the ShrinkBall powerup is activated
    /// </summary>
    public void ShrinkBall()
    {
        ballRect = new Rectangle(0, 0, texture.Width / 2, texture.Height / 2);
    }

    /// <summary>
    /// Stops the ball each time it is reset. Ex: Between points / rounds
    /// </summary>
    public void Stop()
    {
        isVisible = true;
        Speed = 0;
        isBallStopped = true;
    }

    /// <summary>
    /// Checks for collision with the ceiling or floor. 2*Math.pi = 360 degrees
    /// </summary>
    private bool CheckWallHit()
    {
        while (direction > 2 * Math.PI)
        {
            direction -= 2 * Math.PI;
            return true;
        }

        while (direction < 0)
        {
            direction += 2 * Math.PI;
            return true;
        }

        if (ballPosition.Y <= 0 || (ballPosition.Y > resetBallPos.Y * 2 - ballRect.Height))
        {
            direction = 2 * Math.PI - direction;
            return true;
        }
        return true;
    }

    /// <summary>
    /// Used to determine the location where the particles will initialize when the ball and bat collide
    /// </summary>
    private void BatCollisionRectLeft()
    {
        // For the left bat
        if (ballRect.Intersects(leftBat.batRect))
        {
            rectangle3 = Rectangle.Intersect(ballRect, leftBat.batRect);
        }
    }

    /// <summary>
    ///Checks for collision of Right Bat
    /// </summary>
    private void BatCollisionRectRight()
    {
        // for the right bat
        if (ballRect.Intersects(rightBat.batRect))
        {
            rectangle3 = Rectangle.Intersect(ballRect, rightBat.batRect); ;
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T17:08:38.360

2 things that i'm noticing, I don't think you want to halve your rectangle dimentions when you call

```
ballRect = new Rectangle(0, 0, texture.Width /2, texture.Height /2); 
```

also, you're drawing this `blank` sprite on top of your ball, so that if they overlap, you won't see the ball, but if that's the case I don't know why it worked with the square.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T20:36:46.650

You're passing `ballRect` into `Draw()` as the *source rectangle*, which specifies where the sprite exists *on the texture*. If you want to use the entire texture, specify `null` instead. Otherwise, make sure that the value of `ballRect` always falls within the texture.

You seem to be using it to keep track of the sprite's position *on the screen*. From your `UpdatePosition` function:

```
ballRect.X = (int)ballPosition.X;
ballRect.Y = (int)ballPosition.Y; 
```

This is producing texture coordinates outside of the bounds of the texture, which are being clamped by the sampler. With a texture that consists entirely of red pixels, this appears to work, because the pixels around the edge of the texture are all red. In a texture with a transparent border, the sprite is going to be clamped to that transparent color instead.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T22:20:31.167

You shouldn't be passing anything as your SourceRect parameter in your draw call unless you don't wan't to draw the entire image.

The way you have it set up now is you're passing 'ballRect' as your SourceRect when trying to draw your ball, and that ballRect parameter is being updated according to the ball's position so you're trying to draw a portion of your image that is way outside of the size of the texture.

If you want to draw the entire ball, just use:

```
spriteBatch.Draw(texture, ballPosition, null, Color.White,
                          RotationAngle, origin, .0f, SpriteEffects.None, 0); 
```

If you only wanted to draw the top-left quadrant of the ball, you could pass in the following rectangle as your SourceRect:

```
Rectangle sourceRect = new Rectangle(0, 0, texture.Width / 2, texture.Height / 2); 
```

Then you could use that in your Draw call:

```
spriteBatch.Draw(texture, ballPosition, sourceRect, Color.White,
                          RotationAngle, origin, .0f, SpriteEffects.None, 0); 
```

EDIT: You're also passing .0f as your "scale" parameter so when it does draw your ball it will be 0 pixels in size, which I'm guessing isn't the intended behavior. Using 1f for your scale will draw it at it's default size.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T18:05:44.767

Something I noticed is that in the line

```
resetBallPos = new Vector2(ScreenSize.X / 2 + origin.X, ScreenSize.Y / 2 + origin.Y); 
```

inside your constructor is accessing the properties of the variable 'origin' before you actually assign any value to it; however, you do assign a value to it, just a few lines below this value. I'd move this line:

```
origin = new Vector2(texture.Width / 2, texture.Height / 2); 
```

to be above it. I would think that should fix your issue; in the transition from red block to proper image, you may have changed more then you thought.

Also, as a side note, when you're working with XNA, try to use mainly PNG images. They're small and load very quickly; additionally, they support transparent background images.

# ruby-on-rails - Ruby on Rails - 在表单构建器上保存数据

> ID：11869528
> 
> 赞同：1
> 
> 时间：2012-08-08T17:01:02.873
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在使用表单生成器，但我需要模型中未包含的额外字段。所以我使用 text_field_tag 添加它，但是当我验证表单并且它存在错误时，表单会用错误消息刷新，并且这些 text_field_tag 的值是松散的。执行此操作和保存数据的正确方法是什么？

我的表单生成器：

```
<%= form_for @brand do |f| %>
  <%= f.text_field :name %>
  <%= text_field_tag :description %>
  <%= f.submit 'Save' %>
<% end %> 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T17:31:31.227

在控制器中：

```
params[:description] ||= "" 
```

在您的表格中：

```
<%= text_field_tag :description, params[:description] %> 
```

# php - php.ini 中设置的默认欧洲时区，但 date_default_timezone_get() 返回 'UTC'

> ID：11869532
> 
> 赞同：10
> 
> 时间：2012-08-08T17:01:26.010
> 
> 标签：php, date, timezone

我在*php.ini*文件中设置了默认时区：

```
date.timezone = Europe/Rome 
```

编辑后我还重新启动`httpd`了服务（服务 httpd 重新启动），但是当我调用时`date_default_timezone_get()`，它返回 'UTC' 值。

为什么会发生这种情况？

还调用`php_info()`显示设置的时区`php.ini`

PS。对不起我的英语不好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T22:57:30.820

如果您的代码（包括任何框架）确实根本*没有*更改时区，并且您在从 5.1.x 到 5.3.x 的 PHP 版本下运行，则可能是`TZ`环境变量设置在系统中的某个位置。那么您的`date.timezone`设置将被*忽略*。

[`date.timezone`](http://php.net/manual/en/datetime.configuration.php#ini.date.timezone)请参阅（强调我的）的 PHP 手册页：

> 所有日期/时间函数使用的默认时区。**在 PHP 5.4.0 之前，这仅在未设置 TZ 环境变量时才有效**。[…]

要检查系统中是否`TZ`设置了环境变量，您可以使用

```
if (isset($_ENV['TZ'])) {
    echo 'TZ=' . $_ENV['TZ'];
}
else {
    echo 'TZ not set';
} 
```

或放

```
phpinfo(); 
```

在您的代码中的某处并检查其输出最底部的“PHP 变量”部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-11T13:46:03.720

我只是有同样的问题。

在我`php.ini`的 中，**时区消息**灵通：
`date.timezone = Europe/Paris`

我检查了 php 命令`--ri date`
并且**时区**处理`php.ini`得很好，所以错误不是来自 ini 文件。

错误来自`httpd.conf`声明变量**PHPIniDir**的 apache 文件。

我放了`PHPIniDir "C:\PHP\"`

**您必须删除最后一个反斜杠，它给出：**
`PHPIniDir "C:\PHP"`

我希望这个反馈会有所帮助。

（只是一个精度，我的环境是：Windows 7，php 5.4.32 和 apache 2.2.25）

# sql - 使用 MAX() 时避免子选择

> ID：11869533
> 
> 赞同：2
> 
> 时间：2012-08-08T17:01:26.473
> 
> 标签：sql, db2

有没有办法避免这个子选择？我试图使这个查询尽可能高效，并在这样做时试图避免子选择。

我正在按 ID_NUM 查找表上最近替换的行。

子选择已到位，因此我只带回最近替换的行。这是最好的方法吗？

该查询以我想要的方式完美运行，因此请随意忽略最后一个小子选择。

```
SELECT   
  A.ID_NUM,
  A.DOB,
  A.NAME,
  A.REPLACED_TMESTMP  
FROM MYTABLE A, MYTABLE B  
WHERE   
  A.ID_NUM = B.ID_NUM
  AND A.REPLACED_TMESTMP IS NOT NULL
  AND B.REPLACED_TMESTMP IS NULL
  AND A.DOB <> B.DOB
  several other conditions...

  AND A.REPLACED_TMESTMP  
    = (SELECT MAX(C.REPLACED_TMESTMP)  
      FROM MYTABLE C  
      WHERE C.ID_NUM = A.ID_NUM  
      AND A.REPLACED_TMESTMP IS NOT NULL  
      )
; 
```

这是一些伪代码，可帮助您了解我需要做什么

```
Select all from table
where a duplicate ID number exists
    that has an active row (no replaced time stamp)
    and has an inactive row(s)
    only bring back the most current replaced row for each ID num. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T21:10:05.070

您可以将子选择重写为`JOIN`. 我们在工作中的一张表上有一个类似的设置（每个“事物”有多个“行”，但你只处理“最新”的一个），我运行了一个子选择类型查询和一个`JOIN`通过 Visual Explain 的类型，根据估计，`JOIN`处理 CPU 秒数会少很多（当然，这只是一个估计值，你的表可能与我的表有很大不同，所以请稍微考虑一下盐）。

我稍微更改了查询，我认为这应该包含您要查找的所有信息。

```
SELECT INACTIVE.ID_NUM
      ,INACTIVE.DOB
      ,INACTIVE.NAME,
      ,INACTIVE.REPLACED_TMESTMP  
FROM (
    SELECT *
    FROM MYTABLE
    WHERE REPLACED_TMESTMP IS NULL
) AS ACTIVE
JOIN (
    SELECT *
    FROM MYTABLE
    WHERE REPLACED_TMESTMP IS NOT NULL
) AS INACTIVE
  ON ACTIVE.ID_NUM = INACTIVE.ID_NUM
 AND ACTIVE.DOB   <> INACTIVE.DOB
  -- several other conditions...

JOIN (
    SELECT ID_NUM,
           MAX(REPLACED_TMESTMP) AS TIMESTAMP
    FROM MYTABLE
    GROUP BY ID_NUM
) MAX_REPLACE
  ON INACTIVE.ID_NUM           = MAX_REPLACE.ID_NUM
 AND INACTIVE.REPLACED_TMESTMP = MAX_REPLACE.TIMESTAMP 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T17:06:22.993

```
SELECT   
  A.ID_NUM,  
  MAX(A.REPLACED_TMESTMP) AS MOST_RECENT_REPLACED_ROW
FROM MYTABLE A,
     MYTABLE B
WHERE   
    A.ID_NUM = B.ID_NUM
    AND A.REPLACED_TMESTMP IS NOT NULL
    AND B.REPLACED_TMESTMP IS NULL
GROUP BY A.ID_NUM
; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T17:47:48.673

如果您的 DB2 版本支持该`ROW_NUMBER()`功能，您可以执行以下操作：

```
WITH ranked AS (
  SELECT
    ROW_NUMBER() OVER (
      PARTITION BY replaced.ID_NUM
      ORDER BY replaced.REPLACED_TMESTMP DESC
    ) AS rnk.
    replaced.ID_NUM,
    replaced.REPLACED_TMESTMP,
    replaced.... /* other columns as necessary */
  FROM MYTABLE replaced
    INNER JOIN MYTABLE active ON replaced.ID_NUM = active.ID_NUM
  WHERE replaced.REPLACED_TMESTMP IS NOT NULL
    AND active.REPLACED_TMESTMP IS NULL
    AND ... /* your other conditions */
)
SELECT
  ID_NUM,
  REPLACED_TMESTMP,
  ...
FROM ranked
WHERE rnk = 1
; 
```

该`ROW_NUMBER()`函数将数字分配给`REPLACED_TMESTMP`按该列的降序排列不为空的行，按 分区`ID_NUM`。主 SELECT 然后简单地检索排名为 的行`1`。

# apache2 - Ubuntu XAMPP error_log 文件清理

> ID：11869536
> 
> 赞同：1
> 
> 时间：2012-08-08T17:01:35.370
> 
> 标签：apache2, installation, xampp, ubuntu-12.04, error-log

我目前使用的是 Ubuntu 12.04 LTS。我在上面安装了 XAMPP。几天后，Ubuntu 发送错误，例如磁盘上剩余 XX MB。当我检查时，我发现 XAMPP 安装中的 error_log 文件包含 1 GB 的磁盘。所以，我想问一下删除该文件中的日志是否安全，否则会损害我的 XAMPP 安装。如果它会损害安装，我应该如何以安全的方式删除这些日志？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T21:16:05.377

顾名思义，error_log 文件记录 apache 错误，因此如果您处于生产环境中，您可能需要在删除日志之前备份此文件。

备份完成后，只需清空文件：

```
cat /dev/null > /path/to/your/xampp/apache/error_log 
```

1GB 的日志非常大，您可以更改 apache 配置文件中的 LogLevel 值。

问候

咪咪

# mysql - 左连接到最近的记录

> ID：11869539
> 
> 赞同：2
> 
> 时间：2012-08-08T17:01:48.443
> 
> 标签：mysql, sql

我有两张桌子

游戏和分数：

游戏有一个主键 ID

Scores 具有引用 games.id 并在其他字段中创建的 game_id。

我正在尝试调整这个[问题](https://stackoverflow.com/questions/3869426/mysql-join-most-recent-matching-record-from-one-table-to-another)的已接受答案中的第二个示例以满足我的需要。

```
 SELECT g.*,
       s.*
  FROM GAMES g
  LEFT JOIN SCORES s ON s.game_id = g.id
  JOIN (SELECT n.game_id,
               MAX(n.created_on) AS max_score_date
          FROM SCORES n
      GROUP BY n.game_id) y ON y.game_id = s.game_id
                           AND y.max_score_date = s.created_on 
```

它几乎可以工作，它会在每场比赛的得分表中获取最新条目。但是它只返回在得分表中有相应条目的游戏。我需要它来返回表中的所有游戏，无论它们是否在得分表中有条目。从阅读之前引用的问题中，我假设左连接会完成。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T17:18:32.590

```
SELECT
  g.*, s.*
FROM
  GAMES g
LEFT JOIN
(
    SCORES s
  INNER JOIN
  (
    SELECT
      n.game_id,  MAX(n.created_on) AS max_score_date
    FROM
      SCORES n
    GROUP BY
      n.game_id
  )
    y
      ON  y.game_id        = s.game_id
      AND y.max_score_date = s.created_on
)
    ON s.game_id = g.id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T17:07:12.217

您需要一个额外的左外连接：

```
SELECT g.*, s.*
FROM GAMES g LEFT JOIN
     SCORES s
     ON s.game_id = g.id LEFT OUTER JOIN
     (SELECT n.game_id,  MAX(n.created_on) AS max_score_date
      FROM SCORES n
      GROUP BY n.game_id
     ) y
     ON y.game_id = s.game_id AND y.max_score_date = s.created_on 
```

这个版本应该做你想做的事：

```
select g.*, s.*
from (select g.*,
             (select max(created_on) as maxcreatedon
              from scores s
              where s.game_id = g.game_id
             ) as maxcreatedon
      from games g
     ) g left outer join
     scores s
     on s.game_id = g.game_id and
        s.created_on = g.maxcreatedon 
```

# android - Android ViewPager 作为图库

> ID：11869545
> 
> 赞同：2
> 
> 时间：2012-08-08T17:02:05.640
> 
> 标签：android, android-viewpager, android-gallery

我读过 Gallery 组件已被弃用，因此我使用 ViewPager 来获取大型数据集的相当复杂视图的水平滚动列表。这工作正常，但我真的希望能够看到部分下一个和以前的视图，就像我对画廊所做的那样。如果我设置了负页边距，这会正确显示下一个视图的一部分（在右侧），而不是前一个视图。我尝试了对宽度和 layout_margin 的各种调整，但没有成功。

我还有其他选择吗？ViewPager 真的一次只用于单个页面吗？我应该求助于画廊组件吗？这似乎是一个相当简单的要求。

# sql - 删除 SQL Server 中除顶部记录之外的所有记录

> ID：11869550
> 
> 赞同：2
> 
> 时间：2012-08-08T17:02:16.323
> 
> 标签：sql, sql-server, sql-server-2005

我正在尝试编写一个脚本来删除除最上面的记录之外的所有记录（如果它只是任何一个也可以，那么只剩下一条记录）。这是我现在的格式：

```
DELETE FROM table
WHERE id NOT IN (
  SELECT id
  FROM (
    SELECT id
    FROM table
    ORDER BY id DESC
    LIMIT 1 )) 
```

但我意识到 LIMIT 在 SQL Server 2005 中不是一个公认的功能，所以我有点不知道该怎么做。有人对这个主题有任何专业知识吗？而且这些记录没有重复，我只想取出除一条记录之外的所有记录。

更新：

我意识到我在这里想要完成的事情并不完全清楚。我需要做的是删除该表中除顶部记录之外的所有记录，因为它在另一列中具有相同的值（我们称其为“anotherid”）。

所以就像这样：

```
id        value       anotherid       
1          3           1
2          4           1
3          5           2
4          6           2
5          7           2 
```

对此：

```
id        value       anotherid       
1          3           1
3          5           2 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T17:03:39.160

```
delete from table where id <> (select top 1 id from table order by id desc) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T17:07:23.843

鉴于更新，据我了解：

```
DECLARE @x TABLE(id INT, value INT, anotherid INT);

INSERT @x SELECT 1, 3, 1
UNION ALL SELECT 2, 4, 1
UNION ALL SELECT 3, 5, 2
UNION ALL SELECT 4, 6, 2
UNION ALL SELECT 5, 7, 2;

;WITH y AS 
(
  SELECT id, rn = ROW_NUMBER() OVER 
   (PARTITION BY anotherid ORDER BY id) -- or order by value?
   FROM @x -- replace with your dbo.tablename
)
DELETE y WHERE rn > 1;

SELECT id, value, anotherid FROM @x; 
```

结果：

```
id  value  anotherid
--- ------ ---------
1   3      1
3   5      2 
```

* * *

**回答原始问题**

其他几个选项：

```
-- use a CTE to identify the highest id,
-- then delete all rows except that one
;WITH x AS 
(
  SELECT id, rn = ROW_NUMBER() OVER (ORDER BY id DESC) 
  FROM dbo.table
)
DELETE x WHERE rn > 1;

-- use a subquery to get the max, and delete
-- all id values lower than that result
DELETE dbo.table WHERE id < (SELECT MAX(id) FROM dbo.table); 
```

请注意，如果`id`不是唯一的，它们的行为会有所不同。假设最高`id`的是`10`，并且有 3 行`id = 10`。最佳答案将在表格中留下一行；底部的答案（和阿德里安的答案）将留下三行。如果这是您的方案，并且您的意图是即使在出现平局的情况下也只在表中保留一行，您可以`ORDER BY`在顶部查询中添加额外的平局打破条件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T17:06:51.057

我假设您的桌子上有某种唯一标识符？

为此做这样的事情

```
delete from [table] 
where [uniqueColumn] <> 'value'; 
```

如果您没有唯一的列。
手动进入表格，
将行上的值更改为独特的值，例如“OMGWTFBBQSauce”。
然后做

```
delete from [table] 
where [column] <> 'OMGWTFBBQSauce'; 
```

# javascript - 已使用 id 时如何存储 div 的标识？

> ID：11869552
> 
> 赞同：3
> 
> 时间：2012-08-08T17:02:29.547
> 
> 标签：javascript, jquery, html, keyboard-shortcuts

所以我正在开发一个键盘前后脚本，就像他们在 Tumblr 和 9GAG 上一样（你可以使用 J 和 K 键浏览帖子）。

我的做法：

> 用户按下 J（下一个）键
> 
> Javascript 使用 JQuery Viewport 找出当前在哪个“Jump”-ID：viewport
> 
> Javascript 将 +1 添加到“Jump”-ID
> 
> Javascript 获取增加的“Jump”-ID 的位置，滚动到那里

现在问题如下：

```
<div class="content jump" id="<?php echo $id; ?>"> 
```

我已经定义了 div 的 id。所以它看起来像这样：

```
<div class="content jump" id="1225">
<div class="content jump" id="1299">
<div class="content jump" id="1206">
<div class="content jump" id="1345"> 
```

然而，为了能够以正确的顺序跳转，我不知何故需要存储一个额外的标识，也许像这样......

```
<div class="content jump" id="1225" jump="1">
<div class="content jump" id="1299" jump="2">
<div class="content jump" id="1206" jump="3">
<div class="content jump" id="1345" jump="4"> 
```

那只是我的想象。应该有办法解决这个问题。如果您对 J/K 问题有更好的解决方案，也可以随意告诉我（也许 Tumblr 或 9GAG 有更好的解决方案？）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T17:04:12.813

您可以使用`data-`属性。例如：

```
<div class="content jump" id="1225" data-jump="1"> 
```

然后，您可以使用

```
$('#1225').data('jump'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T17:05:30.097

您可以将任意数量的类应用于给定对象。因此，只需将第一个标签更改为：

```
<div class="content jump jump-1" id="1225"> 
```

应该给你你需要的钩子。它实际上验证了。:)

# sql - 如何在 SQLPlus 或 PL/SQL 中制作菜单？

> ID：11869559
> 
> 赞同：2
> 
> 时间：2012-08-08T17:02:57.430
> 
> 标签：sql, plsql, sqlplus

我正在制作这个程序，它有一个菜单，可以获取用户的输入并根据他/她的选择执行某个脚本。类似于以下内容：

```
请做出选择：
1：做脚本
2：做脚本b
3：做脚本c

```

我查看了这个链接：[How to make SQLPlus or PL/SQL Menu](https://stackoverflow.com/questions/1850105/how-to-create-a-menu-in-sqlplus-or-pl-sql)

我能够从中得到一些东西，但它并没有完全发挥作用。因为有些台词我听不懂。见下文。

```
提示 1：制作销售发票
提示 2：查询销售发票

接受选择 PROMPT "输入选项 1-2:"

```

```
set term off
column script new_value v_script  -- What's column script?
select case '&selection.'
       when '1' then '@test.sql'
       when '2' then '@test.sql'
       else '@FinalAssignment.sql'
       end as script  -- What script is this referring to? 
from dual; -- Don't know this

set term on

@&v_script. -- What script is being ran here? 
```

我可以让程序运行脚本，但是 else 并没有真正起作用。如果我选择该范围之外的数字，脚本将关闭，而不是重新加载。此外，当脚本运行时，它会自行关闭，而不是返回主菜单。我知道我必须运行一个循环来解决这个问题，但我不知道如何用这种语言实现它。

任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T05:53:05.080

**Ans 1.** Column`script`是`select`查询中定义的列`as script`，即`script`是列别名。

**Ans 2.** `as script`指的是`select`stmt 的列别名。`select`此语句中只有一列。例子`SELECT column AS col1 FROM table;`。该列[`NEW_VALUE`](http://www.adp-gmbh.ch/ora/sqlplus/new_value.html)获取选定的值（由`case`stmt 驱动，在本例中为脚本名称`test1.sql`、`test2.sql`或`FinalAssignment.sql`）并将其存储到`v_script`.

**Ans 3.** `dual` table 是一个特殊的单行表，默认情况下出现在所有 Oracle 数据库安装中。更多关于`dual` [这里](http://en.wikipedia.org/wiki/DUAL_table)。你可以`select`从任何东西`dual`，喜欢`select sysdate from dual;`或`select 'ABCDEF' AS col1 from dual;`。

**Ans 4.**该`v_script`列将包含根据您从查询`case`语句中选择的脚本名称`select`，即来自菜单选择（如 Ans 2 中所述）。选择后，您可能想要运行该选定的脚本（不是吗？）。就是`@&v_script`这样。您在 SQLPlus 中使用`@script_name`

```
PROMPT  1: Make a sales invoice 
PROMPT  2: Inquire a sales invoice    
accept selection PROMPT "Enter option 1-2: "

set term off
column script new_value v_script  --Q1\. What's column script?
select case '&selection.'          --from accept above
       when '1' then '@test1.sql'  --script to run when chosen option 1.
       when '2' then '@test2.sql'  --script to run when chosen option 2.
       else '@FinalAssignment.sql' --this script
       end as script  --Q2\. What script is this referring to? 
from dual; --Q3\. Don't know this

set term on

@&v_script. --Q4\. What script is being ran here? 
```

**注意事项**-

1.  `FinalAssignment.sql`应该是脚本本身的名称，即上面代码所在的脚本。

2.  第 1,2 和 3 行是脚本的一部分。[`PROMPT`](http://docs.oracle.com/cd/B19306_01/server.102/b14357/ch12032.htm)是有效的 SQL*Plus 命令，[`ACCEPT`](http://docs.oracle.com/cd/B19306_01/server.102/b14357/ch12005.htm).

# arrays - 从两个数组matlab中删除零条目

> ID：11869561
> 
> 赞同：1
> 
> 时间：2012-08-08T17:03:13.077
> 
> 标签：arrays, matlab

我们如何在matlab中删除所有具有2个数组的零对？

```
x = [0 0 0 1 1 0 5 0 7 0]
y = [0 2 0 1 1 2 5 2 7 0] 
```

这样我们得到

```
x2 = [0 1 1 0 5 0 7]
y2 = [2 1 1 2 5 2 7] 
```

?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T17:13:59.530

使用逻辑索引可以很容易地解决这个问题：

```
x = [0 0 0 1 1 0 5 0 7 0]
y = [0 2 0 1 1 2 5 2 7 0]

idx = ~(x==0 & y==0);

x2 = x(idx)
y2 = y(idx) 
```

该数组`idx`将有一个`0`where`x`并且`y`都为零，`1`否则。当您使用这样的数组进行索引时，它只会返回索引为 true ( `1`) 的值。

**编辑：**如果你想迭代它，只需`for`在它周围放一个循环。这并不难，但是用模糊的描述我只能给出模糊的代码（或者非常复杂的带有单元格数组的代码，这对于你实际需要的东西来说太复杂了）。

```
for i = ...
   x = % dependent on i
   y = % dependent on i

   idx = ~(x==0 & y==0);

   x2 = x(idx)
   y2 = y(idx)
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T17:47:36.670

你可以写：

```
idx = any([x;y]); 
```

甚至更好

```
idx = x|y; 
```

然后应用逻辑索引来选择元素：

```
x2 = x(idx)
y2 = y(idx) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T19:06:27.950

使用逻辑索引、仅添加和就地修改的正数的紧凑替代方案：

```
idx = ~(x+y);
x(idx)=[];
y(idx)=[]; 
```

编辑：对于有符号整数，两个数组中的相应元素可能加起来为零，您可以避免`==`or`~=`比较

```
idx = ~(abs(x)+abs(y)) 
```

# android - 如何设置布局BEHIND AndEngine场景？

> ID：11869565
> 
> 赞同：2
> 
> 时间：2012-08-08T17:03:30.397
> 
> 标签：android, android-layout, android-webview, andengine, surfaceview

有谁知道如何定位您的主要布局，使其位于 Andengine 场景的后面？

我想要做的是在填充整个屏幕的视频流顶部覆盖一些 AndEngine 控件。我的视频流来自一个网站，所以我使用的是 WebView。

我想将背景设置为透明，以便可以在下面显示布局，但我不知道如何以这种方式定位布局。基本上，我欢迎任何可以将我的 webview 显示为我的应用程序的“背景”的方式，同时仍然让控件（类似于[AnalogOnScreenControls](http://code.google.com/p/andengineexamples/source/browse/src/org/anddev/andengine/examples/AnalogOnScreenControlsExample.java)）在顶部（左下角和右上角）可见。

如果不可能，我会满足于在我的 andengine 代码中实现一个 webview，我已经对其进行了一些研究，但从未真正成功地完成过。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T00:17:13.410

查看 andengine 示例中的 AugmentedRealityExample。它的特点是通过实时摄像机源绘制的 Sprites。

[http://code.google.com/p/andengineexamples/source/browse/src/org/anddev/andengine/examples/AugmentedRealityExample.java?spec=svndc80a85976df8d8f49268a4c0b64c3ac6be5c328&r=07a5aabdd0ce738a624863ca8d18895350a23356](http://code.google.com/p/andengineexamples/source/browse/src/org/anddev/andengine/examples/AugmentedRealityExample.java?spec=svndc80a85976df8d8f49268a4c0b64c3ac6be5c328&r=07a5aabdd0ce738a624863ca8d18895350a23356)

看来诀窍是只创建一个具有透明背景的场景：scene.setBackground(new ColorBackground(0.0f, 0.0f, 0.0f, 0.0f));

请务必检查超类“BaseAugmentedRealityGameActivity”，以查看他使用“CameraPreviewSurfaceView”将相机馈送附加到何处。cameraPreviewSurfaceView 扩展了普通的旧 Vanilla Android.SurfaceView - 所以从这个起点你应该能够完成你所需要的。

# webgl - 将 TrackBallControls 平移从 XY 更改为 XZ

> ID：11869567
> 
> 赞同：2
> 
> 时间：2012-08-08T17:03:32.363
> 
> 标签：webgl, three.js

如何将 TrackBallControls 更改为在 X 和 Z 平面而不是 X 和 Y 平面上平移？

我看到现在它使用了相机的向上向量和 mouseChange 向量的交叉...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T21:54:14.537

只是为了结束这个问题：

改变：

```
pan.addSelf( _this.object.up.clone().setLength( mouseChange.y ) ); 
```

至：

```
pan.addSelf( _eye.clone().setY(0).setLength( -mouseChange.y ) ); 
```

# c# - CEPStream 延迟和事件结束

> ID：11869571
> 
> 赞同：1
> 
> 时间：2012-08-08T17:03:48.353
> 
> 标签：c#, streaminsight

假设我有一个已知结束时间的间隔事件，有没有办法在所述间隔事件到期之前触发另一个事件。这样做的目的是在那一点上我需要做一个聚合。

或者有没有办法进行查询（这不是所希望的，但我可能不得不求助于它）

```
(from input in inputStream
select input).AddDelay(input.EndTime - DateTime.UtcNow) 
```

如果我的理解完全不正确，请提出更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T19:46:24.467

首先，我们需要过滤您的源流以获取 x1 事件流。

```
var x1Stream = from e in sourceStream
            where e.ItemId == "X1"
            select new {e.ItemId, e.Timestamp} 
```

接下来，我们需要过滤您的源流以获取非 x1 事件流。

```
var nonX1Stream = from e in sourceStream
            where e.ItemId != "X1"
            select e; 
```

现在我们将 x1 事件流与非 x1 事件流连接起来，以获取在 x1 事件期间发生的所有非 x1 事件的列表。

```
var x = from l in x1Stream
    from r in nonX1Stream
    select new {l.ItemId, l.Timestamp, r}; 
```

获取在 x1 事件期间发生的非 x1 事件的计数需要某种 HoppingWindow 才能在固定时间段内实际计算流中的事件。您还可以调用 ToEnumerable() 以在没有窗口的情况下进行分组。

```
var y = from e in x.ToEnumerable()
    group e by new {e.ItemId, e.Timestamp}
    into g
    select new {g.Key.ItemId, g.Key.Timestamp, Count = g.Count()}; 
```

# c# - 光点效果 2D

> ID：11869579
> 
> 赞同：0
> 
> 时间：2012-08-08T17:04:18.307
> 
> 标签：c#, windows-phone-7

我是 WP7 的新开发人员，所以我的知识很基础。我会开发一个应用程序，其中有一个 2D 地图（只是一个图像），其中随机光点出现在这个“背景”中的几个背景点中。

您能解释一下如何生成这些点和代码示例（C#）吗？

# javascript - 在 Javascript 中围绕 Function() 制作沙箱

> ID：11869582
> 
> 赞同：11
> 
> 时间：2012-08-08T17:04:32.400
> 
> 标签：javascript, scope, sandbox

我可以将字符串生成的函数（使用 Function 构造函数）的访问限制为父/全局范围吗？

例如：以下代码原样打印*false*，因为该函数正在窗口中存储/修改变量 a 。

```
window.a = 4;
Function("a=3;")()
console.log(a === 4); 
```

我可以限制对窗口/父范围的访问并使其打印出*“true”*吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-08T17:40:21.107

这是一个额外的想法，与 Esailija 的提议一起可能非常强大（请参阅关于他的回答的评论以供讨论）。

您可以创建虚拟 iframe 并使用其`Function`功能。默认情况下，使用它创建的函数只能访问 iframe 的范围，尽管它仍然可以突破它。幸运的是，按照 Esailija 的建议，很容易防止这种情况发生。

我可以想象这个功能是这样的：

```
function sandboxed(code) {
    var frame = document.createElement('iframe');
    document.body.appendChild(frame);

    var F = frame.contentWindow.Function,
        args = Object.keys(frame.contentWindow).join();

    document.body.removeChild(frame);

    return F(args, code)();
} 
```

[**演示**](http://jsfiddle.net/x62Zc/)

或者，您可能希望`'use strict';`在代码前添加。

* * *

这至少在 Chrome 中有效。以这种方式创建的函数是否可以访问 iframe 的全局范围或页面的全局范围，可以通过以下方式轻松测试：

```
(function() {
    var frame = document.createElement('iframe');
    document.body.appendChild(frame);
    var same = window === frame.contentWindow.Function('return window;')();
    alert(same ? ':(' : ':)');
    document.body.removeChild(frame);
}()); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-08T17:11:14.387

我不这么认为。您可以在参数中命名要保护的全局变量，以便它们隐藏它们：

```
window.a = 4;
Function("a", "a=3;")()
console.log(a === 4); 
```

但是无论您尝试什么，该函数都可以访问全局……这就是为什么它被称为全局。

根据您要执行的操作，还有其他解决方法，例如网络工作者……以及一如既往的[隐藏 iframe hacks](https://stackoverflow.com/a/11870104/995876)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T17:19:22.917

@Esailija 的回答是正确的。此外，我建议首先限制您必须保护的全局变量的数量。将通常放在全局命名空间中的任何内容放在`APP`您控制的范围内：

```
var APP = (function() {
    return {
        a: 4
    };
}()); 
```

没有办法完全限制对全局范围的访问，但至少这样你只需要保护一个对象：`APP`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-02-21T10:05:18.640

这是我改编的`sandboxed`功能。它接受代码和带有函数参数的可选字典。

```
function sandboxed(code, args = {}) {
    var frame = document.createElement('iframe');
    document.body.appendChild(frame);
    var F = frame.contentWindow.Function;
    document.body.removeChild(frame);
    return F(...Object.keys(args), "'use strict';" + code)(...Object.values(args));
}

console.log(sandboxed('return a - 10;', {'a': 34}));

// 24 
```

# matlab - 通过 Sublime Text 2 为 MATLAB 创建自定义构建系统

> ID：11869586
> 
> 赞同：17
> 
> 时间：2012-08-08T17:04:39.347
> 
> 标签：matlab, sublimetext2

我一直在 Sublime Text 2 中编辑我的 .m 文件（在我的问题的其余部分以下称为 Sublime），并且最近已经习惯使用 Sublime 中的构建函数来运行 Python 代码，我是试图为 MATLAB 文件设置类似的东西。我正在尝试这样做，因为我厌倦了在单独的窗口中运行我的代码和编辑我的代码。

按照文档，我尝试使用下面这个看起来非常合理的代码，其中“-r”标志启动 MATLAB 来运行我的文件，“-nodesktop”标志启动 MATLAB 而没有庞大的 Java GUI，以及“-nosplash”标志启动 MATLAB 而没有不必要的启动屏幕。选择器允许 Sublime 自动在 m 个文件上使用此构建系统，并且 path 变量将路径设置为将启动 MATLAB 的目录（通过运行“which matlab”找到的目录）。

我知道我可以在 MATLAB GUI 中设置首选文本编辑器，但我对此不感兴趣。除了文本编辑器之外，我还对使用 Sublime 作为构建系统感兴趣。

```
{
    "cmd": ["matlab", "-r", "-nodesktop", "-nosplash", "$file_name"],
    "selector": "source.m",
    "path": "/usr/local/MATLAB/R2012a/bin"    
} 
```

在我没有错误的 .m 文件上运行构建后，我在下面发现了这个错误，这没有意义。我认为这没有意义，因为已经使用标准命令行选项启动了 MATLAB，并且也收到了 MATLAB 内部错误。

```
/usr/local/MATLAB/R2012a/bin/matlab: 1: /usr/local/MATLAB/R2012a/bin/matlab: awk: not found
/usr/local/MATLAB/R2012a/bin/matlab: 1: /usr/local/MATLAB/R2012a/bin/matlab: expr: not found

Internal error 2: Could not determine the path of the
              MATLAB root directory.

                  original command path = /usr/local/MATLAB/R2012a/bin/matlab
                  current  command path = /usr/local/MATLAB/R2012a/bin/matlab

                  Please contact:

                      MathWorks Technical Support

                  for further assistance.

[Finished in 0.1s with exit code 1] 
```

有没有其他人遇到过这样的问题，通过备用构建系统调用 MATLAB 脚本？如果该信息有用，我还没有尝试在除 Ubuntu 12.04 之外的任何其他操作系统上为 Sublime 中的 MATLAB 设置构建系统。

**现在可以了！** 这是我的`Matlab.sublime-build`：

```
{
    "cmd": ["/usr/local/MATLAB/R2012a/bin/matlab", "-nosplash", "<$file_name"],
    "selector": "source.m"
} 
```

**更新：我现在在我的 Github 页面上为 Linux 和 Mac 托管 Sublime Text 2 R2012a 构建文件作为示例：** [https ://github.com/jessebikman/Sublime-Text-2-build-Matlab-code](https://github.com/jessebikman/Sublime-Text-2-build-Matlab-code)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T13:09:34.330

我是一个崇高的新手，但这对我有用。我相信你有两个问题：

1.  弄清楚如何将 PATH 环境（Sublime 看到的）设置为 unix 命令提示符的环境。在 Mac 上，我必须设置一个名为 environment.plist 的文件并在那里添加路径。这应该可以消除您的 awk 和 expr 错误。

2.  这是我的 matlab.sublime-build：

    `{ "cmd": ["/Applications/MATLAB_R2011b.app/bin/matlab","<$file_name"] }`

注意 $file_name 之前的 <。

这并不完美：添加 nodesktop 和 nosplash 选项会导致错误。正如构建脚本现在所显示的那样，程序在终端中运行良好，但我仍然得到了启动。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T14:33:55.753

只是试图通过 Sublime 编译我的 Matlab 代码。插入您的 sublime-build 片段，它可以工作，谢谢！但是，我通常会编写与计算机视觉相关的代码，而你会经常这样做：

```
 img = doImageConversion();
    imshow(img);
    pause;

    img = doAnotherImageConversion();
    imshow(img);
    pause; 
```

这里的问题是 sublime 不会因`pause`指令而停止。您可以通过用 替换暂停来克服这个问题`pause(3)`。虽然不是很满意！为了让构建真正停止，我发现这些**Matlab.sublime-build**设置非常方便：

```
{
    "cmd": ["xterm", "-e", "matlab", "-nosplash", "-nodesktop", "-r", "run $file_name; quit;"],
    "selector": "source.m"
} 
```

这需要在您的 linux 发行版上安装**xterm 。**现在 Sublime 将启动 xterminal 那里运行 Matlab 文件，实际上停止暂停指令并最终退出。**我没有在较旧的 Matlab 版本上测试这个片段。**

干杯鲁斯蒂兹

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T09:59:43.927

只是一个猜测——我没有在 SublimeText 中使用过构建系统——但你可能需要将`-r`选项放在文件名之前。如果你运行`matlab -r -nodesktop "mycommand"`，它会正常启动，尝试执行一个文件`nodesktop`，然后失败。

MATLAB 安装路径（通常，除非您以不同方式安装它）`r`在`r2012a`. 也许这是个问题。

我建议的最后一件事是也使用`-sd`指定 MATLAB 启动目录的选项。

希望这些想法有所帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-08T11:39:39.460

我的解决方案很大程度上基于您的解决方案，但我添加了 try catch 语句以避免多次打开 matlab 而不在出现错误后关闭它，我将命令创建为：

```
{
"cmd": ["/Applications/MATLAB_R2014b.app/bin/matlab","-nosplash", "-nojvm", "-r", "cd $file_dir; try run $file_name; catch varException; display(varException); end; quit;"], "selector": "source.m"
} 
```

如果您渴望了解错误，请使用仅包含最新堆栈打印错误的另一个：

```
{
"cmd": ["/Applications/MATLAB_R2014b.app/bin/matlab","-nosplash", "-nojvm", "-r", "cd $file_dir; try run $file_name; catch varException; display(varException.message);display(varException.cause);display(varException.stack(1)); end; quit;"], "selector": "source.m"
} 
```

最后，如果您真的想了解所有错误，请使用带有完整堆栈打印错误的最终版本：

```
{
    "cmd": ["/Applications/MATLAB_R2014b.app/bin/matlab","-nosplash", "-nojvm", "-r", "cd $file_dir; try run $file_name; catch varException; display(varException.message); display(varException.cause);for i = length(varException.stack):-1:1; display(varException.stack(i)); end; end; quit;"], "selector": "source.m"
} 
```

# jquery - iOS地址栏固定在视口错误的顶部

> ID：11869588
> 
> 赞同：0
> 
> 时间：2012-08-08T17:04:48.553
> 
> 标签：jquery, html, css, ios

在尝试用谷歌搜索这件事之后，第一次在这里发帖。仅在 iPhone 上查看时会出现此问题。

预期行为：如果您在 iPhone 上访问[http://bbc.co.uk](http://bbc.co.uk)（或几乎任何网站）并向下滚动页面，地址栏将逐渐隐藏，直到不可见。

我得到了什么：地址栏是页面顶部的一个固定元素，类似于普通的桌面网络浏览器。

这是我所拥有的（只是一个测试页）

[http://americansuccessnetwork.com/DEV/StackOverflow](http://americansuccessnetwork.com/DEV/StackOverflow)

我不认为它在 jQuery 中是什么，因为当我删除所有 javascript 时它仍然会发生。

# 编辑已解决

我最终通过删除一些 CSS 行来修复它

```
html,body {    
 overflow:auto;
}
#explainer {
 overflow:hidden;
} 
```

显然 iOS Safari 讨厌溢出。

这就是为什么我从不将东西发布到stackoverflow...（它总是最终变得超级简单）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T17:43:01.327

你只需要调用 window.scrollTo(0, 0); 一旦页面完成加载。当页面滚动到底部时，BBC 的网站正在调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T17:10:50.463

这是您有问题的行：

```
<meta name="viewport" content="height=device-height,width=device-width,initial-scale=1.0,maximum-scale=1.0" > 
```

您需要删除`height`声明。

# c# - C# - Windows 窗体中的 KeyDown 事件问题

> ID：11869590
> 
> 赞同：0
> 
> 时间：2012-08-08T17:05:02.143
> 
> 标签：c#, winforms, event-handling, keydown

当主窗体加载时，我试图设置一个关键事件处理程序，如下所示：

```
private void FormMain_Load(object sender, EventArgs e)
{
    KeyDown += FormMain_KeyDown;
} 
```

以及被调用的函数：

```
private void FormMain_KeyDown(object sender, KeyEventArgs e)
{
    if (e.KeyCode == Keys.Escape)
    {
        // Do something.
    }
} 
```

**问题是表单对 Escape （或我尝试过的任何其他键）没有反应。有趣的是，来自同一个项目的不同表单使用相似的代码没有任何问题。谁能告诉我我做错了什么？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T17:11:54.877

表单上有一个名为 KeyPreview 的属性，您需要将其设置为 true。然后在按键时，您的处理程序将触发，然后控件上具有焦点的任何处理程序都会触发。

# java - J2ME 波兰语应用程序图标默认

> ID：11869591
> 
> 赞同：21
> 
> 时间：2012-08-08T17:05:08.720
> 
> 标签：java, mobile, java-me, nokia, j2mepolish

我在 J2ME Polish 应用程序中遇到问题，基本上我们有 2 个图标显示在应用程序中（菜单图标和显示在顶部的应用程序内图标）。

如果我使用单个图标进行编译并将其设置在 build.xml 文件中，它会将其加载到两侧，尽管由于菜单图标需要大于应用内图标，因此最后一个看起来非常放大。

当我按照文档中的说明进行操作并在带有子目录的 build.xml 中设置资源路径时，如果我只设置 24x24 图标，则应用内图标会获取新图像，但菜单图标不会。如果我随后设置一个图标和一个 24x24 图标，它将使用另一个作为两个区域的默认值。

有谁知道我该如何处理？

PS：这个版本的测试台是诺基亚 N70，所以如果有人知道菜单图标的尺寸，我真的很感激这个提示。

在诺基亚 wiki 中，它声明 24x24，但这仅适用于应用内图标，而不是菜单之一。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-04T20:22:24.780

N70的屏幕尺寸为176x208。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-17T06:00:02.373

Goncalo，您可以访问以下站点。它可能会帮助你。

[关联](http://www.developer.nokia.com/Community/Discussion/showthread.php/73508-J2ME-MIDlet-Icon)

# c++ - C99 printf 格式化程序与 C++11 用户定义文字

> ID：11869593
> 
> 赞同：23
> 
> 时间：2012-08-08T17:05:13.307
> 
> 标签：c++, c++11, printf, c99, code-translation

这段代码：

```
#define __STDC_FORMAT_MACROS
#include <inttypes.h>
#include <stdio.h>
#include <stdlib.h>
#include <stdint.h>
int main(int argc,char **argv)
{
   uint64_t val=1234567890;
   printf("%"PRId64"\n",val);
   exit(0);
} 
```

[根据 GCC 4.5](http://ideone.com/DO8Zq)适用于[C99](http://ideone.com/Lo5Jw)、[C++03](http://ideone.com/qf0QW)、 C++11 ，但[根据 GCC 4.7.1](http://liveworkspace.org/code/53b31b6e9b51bdc0101cacb07719977b)在 C++11 上失败。在 GCC 4.7.1之前添加一个空格可以编译它。`PRId64`

哪一个是正确的？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-08T17:09:58.000

gcc 4.7.1 是正确的。根据标准，

> [c++11](/questions/tagged/c%2b%2b11 "显示标记为“c++11”的问题")
> 
> ### 2.2 翻译阶段 [lex.phases]
> 
> 1 - 翻译语法规则的优先级由以下阶段指定。[...]
> 3\. 源文件被分解为预处理标记（2.5）和空白字符序列（包括注释）。[...]
> 4\. 执行预处理指令，扩展宏调用，[...]

根据**2.5 预处理令牌 [lex.pptoken]**，*用户定义的字符串文字*是一个预处理令牌生产：

> ### 2.14.8 用户定义的文字 [lex.ext]
> 
> *用户定义字符串文字*：
>     *字符串文字 ud-suffix*
> *ud-suffix*：
>     *标识符*

所以第 4 阶段的宏扩展`PRId64`是无关紧要的，因为`"%"PRId64`已经被解析为由*string-literal*和*ud-suffix组成的单个**user-defined-string-literal*预处理标记。 *`"%"` *`PRId64`**

 **哦，这将是*真棒*; 每个人都必须改变

```
printf("%"PRId64"\n", val); 
```

到

```
printf("%" PRId64"\n", val);     // note extra space 
```

* * *

然而！gcc 和 clang 已同意将后缀上没有前导下划线的用户定义字符串文字视为两个单独的标记（根据非良好格式标准），请参阅[http://gcc.gnu.org/bugzilla/show_bug.cgi?id =52538](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=52538)所以对于未来版本的 gcc（我认为是 4.8 分支）现有代码将再次工作。**

# linux - Cron 两次启动相同的进程

> ID：11869594
> 
> 赞同：2
> 
> 时间：2012-08-08T17:05:14.820
> 
> 标签：linux, cron, crontab

我的 crontab 配置如下：

```
*/2 * * * * php /home/ec2-user/myapp/myscript.php >> /home/ec2-user/myapp/log/myapp.log 2>&1 
```

当我执行 ps aux 时，我看到以下输出：

```
ec2-user  1296  0.0  0.0   2984   992 ?        Ss   15:36   0:00 /bin/sh -c /home/ec2-user/myapp/myscript.php >> /home/ec2-user/myapp/log/myapp.log 2>&1 SHELL=/bin/sh HOME=/home/ec2-user PATH=/usr/bin:/bin LOGNAME=ec2-user USER=ec2-user
ec2-user  1299  0.3  3.7  91528 63612 ?        S    15:36   0:16 /home/ec2-user/myapp/myscript.php SHELL=/bin/sh USER=ec2-user PATH=/usr/bin:/bin PWD=/home/ec2-user SHLVL=1 HOME=/home/ec2-user LOGNAME=ec2-user _=/usr/bin/php 
```

对我来说，看起来同一个进程同时启动了两次，进程 1 的 PID 为 1296，进程 2 的 PID 为 1299。

这正常吗？为什么 ps 输出中有两个进程而不是一个？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T18:13:39.413

It looks like `/bin/sh` is used to invoke your cron tabs, so that they run in their own environment, that's the first process. Then `/bin/sh` invokes php to run your actual script, and php is your second process. There's nothing wrong with this.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-25T10:31:36.273

尝试在php之前添加exec

```
*/2 * * * * exec /usr/bin/php /home/ec2-user/myapp/myscript.php >> /home/ec2-user/myapp/log/myapp.log 2>&1 
```

shell 进程 /bin/sh 将被 exec 替换

# javascript - 许多js函数，执行任何js函数时显示一个元素，但执行特定函数时隐藏它

> ID：11869596
> 
> 赞同：0
> 
> 时间：2012-08-08T17:05:25.077
> 
> 标签：javascript, jquery

我的页面显示标题，当单击任何标题时，标题将从该元素中删除，并且将在那里生成内容。我的页面中有一些元素（带有一些 id）。当显示内容时它们应该被隐藏，而在所有其他时间不应该被隐藏。我的页面使用函数 title(), content() 在标题、内容之间切换。我不想写这样的代码：

```
function title(){
    if(presentfunctionname != "content"){
         then display that element
     }else{
         hide it.
     }
 } 
```

我不想编写像上面这样的代码，因为它需要在除 content 之外的每个函数中编写。那么，是否有任何事件侦听器在调用任何 js 函数时进行侦听，以便我可以检查目标函数是否需要 one 。或任何其他解决方案？

# java - 使用 Java 反射，你能检测出一个方法是否是 Native 的吗？

> ID：11869598
> 
> 赞同：4
> 
> 时间：2012-08-08T17:05:27.470
> 
> 标签：java, reflection, native

使用 Java 反射，您可以检测所有方法及其返回类型。但是有没有办法检测一个方法是否被声明为`native`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-08T17:10:58.363

是的，您可以。该方法`getModifiers()`返回一个应用了正确掩码的 int 可以告诉您该方法是否是本机的

为了方便起见，我建议这样做：

```
 int modifiers = myMethod.getModifiers(); 
   boolean isNative = Modifier.isNative(modifiers); 
```

Modifier 类是一个实用程序专用类，旨在应用适当的掩码以发现方法的修饰符。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-08T17:09:57.063

您可以检查与该方法关联的修饰符。下面的示例打印了 Object 的所有本机方法：

```
for (Method m : methods) {
    int mod = m.getModifiers();
    if ((mod & Modifier.NATIVE) != 0) {
        System.out.println(m.getName());
    }
} 
```

编辑

[这个其他答案](https://stackoverflow.com/a/11869682/829571)提供了一种更好的方法，可以避免按位匹配部分。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-08T17:11:43.977

Method 有一个`getModifiers()`将修饰符返回为 int 的方法，其中一个修饰符是`Modifier.NATIVE`，这是您要查找的。`Modifier.isNative()`可用于从 解码参数`getModifiers()`。

（基本上，如果您将方法作为 Method 对象命名`m`，那么`Modifier.isNative(m.getModifiers())`应该这样做。）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-08T17:13:46.970

使用[`getModifiers()`](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Method.html#getModifiers%28%29)，您可以使用以下实用程序函数读取标志[`Modifier`](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Modifier.html)：

```
Methods meth = Object.class.getDeclaredMethods()[0];
int mod = meth.getModifiers();
boolean native = Modifier.isNative(mod); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-08T17:13:10.413

是的，您可以，只需检查方法的修饰符：

```
public class NativeMethodModifierTest
{
    public class NativeMethodTest
    {
        public native void method();
    }

    @Test
    public void testNativeMember()
    {
        Method m = NativeMethodTest.class.getMethods()[0];
        Assert.assertEquals(Modifier.NATIVE, (m.getModifiers() & Modifier.NATIVE));
    }
} 
```

# database - 恢复 Apache derby 内存数据库

> ID：11869599
> 
> 赞同：4
> 
> 时间：2012-08-08T17:05:29.047
> 
> 标签：database, derby, database-backups, database-restore, in-memory-database

我使用以下代码创建了内存数据库的备份：

```
public static void backUpDatabase(Connection conn)throws SQLException
{
String backupdirectory ="c:/mybackups/"+JCalendar.getToday();
CallableStatement cs = conn.prepareCall("CALL SYSCS_UTIL.SYSCS_BACKUP_DATABASE(?)"); 
cs.setString(1, backupdirectory);
cs.execute(); 
cs.close();
System.out.println("backed up database to "+backupdirectory);
} 
```

现在我想通过从以前的备份创建一个内存数据库来恢复数据库。我该怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-05-18T16:54:15.470

我知道的最快方法：

首先，使用`shutdown=true`：

```
boolean gotSQLExc = false;
    try {
        DriverManager.getConnection("jdbc:derby:memory:testdb;shutdown=true");
    } catch (SQLException se) {
        if ( se.getSQLState().equals("08006") )
            System.out.println("Database shut down normally");
        else
            System.out.println("Database did not shut down normally")
    } 
```

然后`restoreFrom=`

```
 Connection connection = DriverManager.getConnection("jdbc:derby:memory:testdb;restoreFrom=path/to/backup/file");
    connection.close(); 
```

一个包含约 300 个表的数据库，以这种方式在我的开发机器上以约 150 毫秒的时间恢复了一些示例数据。

这对于需要快速快速数据库恢复的 junit 集成测试非常有用。根据您的设置，您可能需要在测试之间执行一些额外的工作，例如，如果使用 c3p0 连接池，您需要从 C3P0Registry 获取所有连接并在此恢复后调用 hardReset()。另一方面，不需要对其他一些池进行任何操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T21:38:51.817

据我所知，正常的从备份恢复机制可以很好地恢复内存数据库。因此，请在您的连接 URL 上使用 restoreFrom 子句，如下所述：http: [//db.apache.org/derby/docs/10.9/adminguide/tadminhubbkup44.html](http://db.apache.org/derby/docs/10.9/adminguide/tadminhubbkup44.html)

# xml - XML 站点地图：空格或 %20 in ?

> ID：11869612
> 
> 赞同：5
> 
> 时间：2012-08-08T17:06:10.407
> 
> 标签：xml, sitemap

我正在构建站点地图，我应该使用 %20 还是“”在

```
 <loc>
  </loc> 
```

标签？

例子：

```
<loc>http://www.example.com/i love spaces.html</loc> 
```

或者

```
<loc>http://www.example.com/i%20love%20spaces.html</loc> 
```

两个都有效？？？

# global-variables - javascript在函数外使用var关键字

> ID：11869618
> 
> 赞同：3
> 
> 时间：2012-08-08T17:06:58.863
> 
> 标签：global-variables, local-variables, javascript

我了解 var 关键字在函数内部的含义，但现在我试图了解 var 关键字在函数外部的目的是什么。我做了一些测试（见下文），没有任何区别。那么，如果将 var 关键字放在函数之外，什么时候会有什么不同呢？

1.

```
example = 1;
function test(){  
  var example = 2;
}
test();
alert(example); //alert 1 no matter if example=1 or var example=1 before function 
```

2.

```
example = 1;
function test(){  
  example = 2;
}
test();
alert(example); //alert 2  no matter if example=1 or var example=1 before function 
```

3.

```
var example = 1;
function test(){   
  alert(example);   
}
test(); //always alert 1, no matter if var example=1 or example=1 before function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T17:10:08.593

关键字`var`在当前范围内声明一个变量（好吧，技术上在同一个闭包中，但现在让它保持简单）

由于您的函数（测试）和变量（示例）都在“全局”范围内声明，因此它们都可以相互访问，这意味着函数`test`可以访问变量`example`

在您的第一个示例中，您声明了一个名为 example 的新 var，这意味着现在当您调用 var 示例（在方法内部）时，它将改为引用此变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T17:12:54.463

它们是有区别的！

请参阅此答案[https://stackoverflow.com/a/1471738/211070](https://stackoverflow.com/a/1471738/211070)，但基本上：

> 由于变量声明创建带有 DontDelete 标志的属性，因此 var x = 1 和 x = 1 （在全局范围内执行时）之间的区别在于前者 - 变量声明 - 创建了 DontDelete'able 属性，而后者没有。因此，通过这种隐式赋值创建的属性可以从全局对象中删除，而前一个 - 通过变量声明创建的属性 - 不能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T17:18:08.683

**1）**此警报的原因`1`是因为即使您`test()`事先调用了该函数，它本身也在调用并创建自己的闭包并在其中声明一个单独`var example = 2;`的内部。（所以你的警报看不到它，它只看到1）。现在，如果您这样做了：`return example = 2;`您会注意到 alert(example) === 2。这是因为您将示例从闭包中取出，并且它影响了前面的示例变量。

```
example = 1;
function test(){  
    var example = 2;
}
test();
alert(example); 
```

**2）**在这里，您没有在函数内部创建新变量，因此它能够（通过闭包）访问它外部的变量示例，并将其更改为 2。

```
example = 1;
function test(){  
  example = 2;
}
test();
alert(example); //alert 2  no matter if example=1 or var example=1 before function 
```

**3）**最后一个是“关闭”如何在这里工作的一个很好的例子。变量，不像我们说`function ()`必须在试图访问它们的东西**之上声明。**另一方面，函数没有。所以虽然`var example = 1`可能低于`function test() { }`自身，*但没关系*。重要的是它在**CALL** to之前声明`test()`。这是创建闭包的时候，它将自己包裹在它可以看到/访问的任何变量等周围。

```
// so this ...
var example = 1;
function test(){   
    alert(example);   
}

// and this work ...
function test(){   
    alert(example);   
}
var example = 1; // <-- notice it's still above the test() func call, it can still see example
test(); //always alert 1, no matter if var example=1 or example=1 before function
// if var example = 1; was down here below it, it would alert "undefined", this is because
// the variable was not available within the scope when test() was called. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T17:10:53.383

只要您不在严格模式下，全局空间就没有真正的区别。

也就是说，您仍然应该使用`var`良好的编程习惯。自动定义的变量是邪恶的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T17:11:13.587

我相信如果你将一个 var 放在一个函数中，它只能像 PHP IF 语句一样单独在该函数中使用，如果你把一个 var 放在函数之外，那么它可以在多个函数中使用 - 就像其中的一个变量页面范围。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-08T17:12:05.910

-Keyword`var`在函数内使用时与在函数外使用时完全相同：它将一个新变量绑定到当前范围。在函数的情况下，范围就是函数。在函数之外使用全局范围。在浏览器中，该全局范围通常是`window`-Object。

lg,

弗洛

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-08T17:13:03.303

`var`关键字在**当前范围内**声明一个变量。如果没有它，您将自动在`window`对象上声明一个新属性，或者在更高范围内访问和修改同名变量（如果存在）。在您的示例中，只有全局范围和内部函数范围，因此`var example = 1`在全局范围内，出于您的目的，在技术上与 just 相同`example = 1`。但是，如果您上面的所有代码都在其他函数范围内执行，则前两个示例将声明一个全局`example`属性，而第三个示例将声明一个该范围的本地变量。

# https - JBoss 6 找不到已安装的证书

> ID：11869621
> 
> 赞同：0
> 
> 时间：2012-08-08T17:07:07.587
> 
> 标签：https, jboss6.x, truststore

我创建了一个带有自签名证书的密钥库，导出了证书，然后使用 IP 地址的别名重新导入了证书。

我想从这个服务器内部调用这个服务器上的另一个服务，地址]/.....

我无法让调用的客户端信任自己。如何指定信任库？

这是 server.xml 的关键部分：

```
 <Connector protocol="HTTP/1.1" SSLEnabled="true" 
       port="8443" address="${jboss.bind.address}"
       scheme="https" secure="true" clientAuth="false" 
       keystoreFile="${jboss.server.home.dir}/conf/mykey"
       keystorePass="changeit" 
       truststoreFile="${jboss.server.home.dir}/conf/mykey"
       truststorePass="changeit" 
       sslProtocol = "TLS" /> 
```

我在尝试使用 https 从该服务器向其自身调用服务时收到此错误。

PKIX 路径构建失败：sun.security.provider.certpath.SunCertPathBuilderException：无法找到请求目标的有效证书路径

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T18:44:46.187

答：jBoss 6 使用 Java 运行时作为客户端信任库，而不是它自己的文件。将证书放入 Java 环境中是有效的。

我想知道我是否像上面那样在 jBoss 的连接器配置中设置了信任库...

# jquery - 删除 jQuery UI 手风琴

> ID：11869622
> 
> 赞同：0
> 
> 时间：2012-08-08T17:07:09.233
> 
> 标签：jquery, html

我正在使用 jQuery UI，特别是手风琴。我想为每个可以隐藏它的手风琴添加一个“删除”按钮。

我当前的代码只是将可见性设置为隐藏在 div 上。但是，我需要完全移除手风琴。

这是我的html布局方式。

```
<div class="my-accordion">
    <h3>Accordion 1</h3>
    <div>
        <p>derp</p>
        <div class="remove">REMOVE</div>  
    </div>
    <h3>Accordion 2</h3>
    <div>
        <p>derp</p>
        <div class="remove">REMOVE</div>  
    </div>
    <h3>Accordion 3</h3>
    <div>
        <p>derp</p>
        <div class="remove">REMOVE</div>  
    </div>
</div> 
```

而且，这是我的 jQuery。

```
$(function() {
    $( ".my-accordion" ).accordion();
});

// This is a giant failure.
$('.remove').click(function(e) {
        $(this).parent().hide();
        e.preventDefault();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T17:09:09.920

```
$('.remove').click(function(e) {
    var parent = $(this).parent('div');
    parent   // parent div of REMOVE
      .prev('h3') // catch previous h3
      .andSelf()  // parent div
      .remove();  // remove both parent div and h3
}); 
```

**[演示](http://jsfiddle.net/BfKUg/2/)**

要删除父级，请`div`使用**[`.remove()`](http://api.jquery.com/remove)**.

**或连续**

```
$('.remove').click(function(e) {
    $(this).parent('div').prev('h3').andSelf().remove();
}); 
```

**[演示](http://jsfiddle.net/BfKUg/3/)**

### 笔记

如果您可以将每个手风琴`div`包装在如下包装器中会更好：

***HTML***

```
<div class="my-accordion">
    <div class="accordion-wrapper">
       <h3>Accordion 1</h3>
       <div>
        <p>derp</p>
        <div class="remove">REMOVE</div>  
       </div>
     </div>
    .....
</div> 
```

并更改 jQuery 代码，如：

```
$('.remove').click(function(e) {
    $(this).parents('div.accordion-wrapper').remove();
}); 
```

# php - 文档注释中的 html 代码

> ID：11869623
> 
> 赞同：-2
> 
> 时间：2012-08-08T17:07:09.670
> 
> 标签：php, html, xml, documentation

```
/**
 * tag generation
 * @param string $val value
 * @return string Returns in mode <code><tag>$val</tag></code>
 */
function tag($value) {
...
} 
```

问题是如何在..在IDE（例如eclipse）中正确显示的文档注释中正确编写'$val'（必须代替'<'和'>'）。

我在图像中显示了这样的问题。如何编写，在 IDE 的泡沫中有效？ ![在此处输入图像描述](../Images/67dd72909a512f2fc7898238926d9200.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T17:13:52.520

我相信你正在寻找回应 $val。

您的功能应如下所示：

```
echo "<code><tag>".$val."</tag></code>"; 
```

请参阅[http://www.w3schools.com/php/func_string_echo.asp](http://www.w3schools.com/php/func_string_echo.asp)，以便您可以将变量写入您的网页。

# java - 使用“in”在 Play Framework 1.x / JPA 中构建查询的更简单方法？

> ID：11869628
> 
> 赞同：1
> 
> 时间：2012-08-08T17:07:28.720
> 
> 标签：java, jpa, playframework, playframework-1.x

Play Framework / JPA 中是否有一个快捷方式来保存手动构建此查询？

```
public List<User> getAllExceptThese(Collection<String> emails) {
    checkArgument(!emails.isEmpty());

    StringBuilder query = new StringBuilder("email not in (");
    boolean first = true;
    for (String email : emails) {
        if (!first) {
            query.append(", ");
        }
        first = false;
        query.append("?");
    }
    query.append(")");

    return findAll(query.toString(), emails.toArray());
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T17:23:22.433

我不知道播放框架，但如果可以创建 JPQL 查询，那么构建一个[Query](http://docs.oracle.com/javaee/5/api/javax/persistence/Query.html)对象并使用它来插入集合怎么样......

```
 public List<User> getAllExceptThese(Collection<String> emails) {
            checkArgument(!emails.isEmpty());

            String queryStr = "FROM User u WHERE u.email NOT IN (:excludedEmails)";

            Query query = entityManager.createQuery(queryStr);
            query.setParameter("excludedEmails", emails);
            return (List<User>)query.getResultList();
  } 
```

# php - php mysql 显示从结果集中选择的记录

> ID：11869636
> 
> 赞同：0
> 
> 时间：2012-08-08T17:08:09.110
> 
> 标签：php, mysql

我有一个查询可以获取对评论的回复。所以我的第一个查询有他们的评论，例如

```
comment 1 <BR>
  &nbsp; reply 1<BR>
comment 2<BR>
comment 3<BR>
   &nbsp; reply 1<BR>
   &nbsp; reply 2<BR>
   &nbsp; reply 2<BR> 
```

评论 3 有 3 条回复。我进行一个查询以从我的数据库中获取所有回复，其中`commentID` in (1,2,3) 。这将为我带来所有有效的答复。

现在的问题是当我想显示结果时，我开始一个`while`循环并浏览所有评论。

如何在`while`循环中仅针对该特定评论获得选定的回复？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T17:10:30.253

假设您将答复存储在一个多维数组中，可以说`$array_replies`，您就是这样做的

```
for ($i=0; $i<count($array_replies[$commentID]); $i++) {
   echo $array_replies[$commentID][$i];
} 
```

# asp.net - 添加分隔线

> ID：11869638
> 
> 赞同：0
> 
> 时间：2012-08-08T17:08:13.880
> 
> 标签：asp.net, sql-server-2005, stored-procedures

我目前有一个 Storedproc，它正在返回值让我与 asp.net 中的 gridview 绑定。我想做的一件事是将两个字段组合成一个由 / 分隔的字段，但我似乎无法使其正常工作。

这是我的存储过程

```
DECLARE @SQL VARCHAR(MAX);

BEGIN
SET @SQL = N'SELECT SYSTEM AS ''System''
            , ENTN AS ''Entity''
            , MED_CTR AS ''Medical Center''
            , MED_CTR_LEVEL AS ''Medical Center Level''
            , DEPT_ID AS ''Department ID''
    FROM V_ROLLUP_SYSTEM_DESC_REV1
    WHERE (DEPT_ID = '+CONVERT(VARCHAR,@DEPTCODE)+')
        AND SYSTEM IN ('+@SYS+')'
PRINT(@SQL)
EXEC(@SQL) 
```

所以我想将 MED_CTR 与 MED_CTR_LEVEL 结合起来，用“/”分隔并标记为医疗中心/级别。到目前为止，我似乎无法将它结合起来，因为我尝试在其中添加“/”的每种方法都没有返回任何结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T17:16:57.073

这应该有效：

```
SET @SQL = N'SELECT SYSTEM AS [System]
            , ENTN AS [Entity]
            , (MED_CTR +''/''+ MED_CTR_LEVEL) as [Medical Center/ Level]
            , DEPT_ID AS [Department ID]
    FROM V_ROLLUP_SYSTEM_DESC_REV1
    WHERE (DEPT_ID = '+CONVERT(VARCHAR,@DEPTCODE)+')
        AND SYSTEM IN ('+@SYS+')' 
```

如果你想确保 2 列的 concat 总是成功，你可以这样做：

```
SET @SQL = N'SELECT SYSTEM AS [System]
            , ENTN AS [Entity]
            , ISNULL(MED_CTR,''N/A'') +''/''+ ISNULL(MED_CTR_LEVEL,''N/A'') ) as [Medical Center/ Level]
            , DEPT_ID AS [Department ID]
    FROM V_ROLLUP_SYSTEM_DESC_REV1
    WHERE (DEPT_ID = '+CONVERT(VARCHAR,@DEPTCODE)+')
        AND SYSTEM IN ('+@SYS+')' 
```

# c# - 如何处理 WCF 上的故障状态？（托管在 Windows 服务中）

> ID：11869641
> 
> 赞同：4
> 
> 时间：2012-08-08T17:08:30.793
> 
> 标签：c#, .net, wcf, event-handling

我将 WCF 作为 Widnows 服务托管，但在处理 WCF 通道的故障状态时遇到问题。ServiceHost 上的故障事件永远不会出现。

托管应用程序：

```
protected override void OnStart(string[] args)
    {
        _serviceHost = new ServiceHost(typeof(WCF_FaultTest.Service1));
        _serviceHost.Faulted += _serviceHost_Faulted;
        _serviceHost.Open();
    }

    void _serviceHost_Faulted(object sender, EventArgs e)
    {
        // never raise up..
    } 
```

故障状态我尝试像这样模拟：

```
 [ServiceBehavior(InstanceContextMode = InstanceContextMode.Single, ConcurrencyMode = ConcurrencyMode.Single)]
public class Service1 : IService1
{
    public string GetFault()
    {
        throw new Exception("Should went to fault..");
    } 
```

我正确使用它吗？谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T19:30:40.317

您正在使用多个 CommunicationObject。当您在服务实现中抛出异常时，通道出现故障，但主机没有。**ServiceHost.Faulted 事件不适用于这种情况。**

要记住的一件事是，一旦 CommunicationObject 进入故障状态，就不能再使用它。对有故障的 CommunicationObject 唯一要做的就是关闭/中止。在您的服务抛出异常后，如果您创建一个新通道，您仍然可以调用该服务。因此服务没有故障。

从架构的角度来看，服务宿主事件并不是实现错误处理的“正确”位置。通常，您希望错误处理成为服务配置的一部分。例如，ServiceHost 事件中的错误处理不容易转移到 IIS 托管。您的评论听起来像是 IErrorHandler 不符合您的要求。您要实现什么要求？

# python - 在python中实现有向图

> ID：11869644
> 
> 赞同：10
> 
> 时间：2012-08-08T17:08:41.977
> 
> 标签：python

我阅读了[Python Patterns - Implementing Graphs](http://www.python.org/doc/essays/graphs/)。然而，这种实现对于获取指向节点的边来说效率很低。

在其他语言中，一个常见的解决方案是使用二维数组，但在 Python 中这样做需要一个列表列表。这似乎不是pythonic。

什么是 python 中的有向图的实现，其中找到所有带有边的节点（作为两个单独的列表）的节点（作为两个单独的列表）很快？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T18:31:23.977

您可以使用的另一个库是[NetworkX](http://networkx.org/)。它提供了有[向图](https://networkx.org/documentation/stable/reference/classes/digraph.html)的实现，该实现提供了获取任意节点集的传入边`DiGraph.in_edges()`和传出边的函数。`DiGraph.out_edges()`链接文档中提供了使用示例，但不幸的是，我没有看到有关效率或运行时间的任何详细信息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-08T17:10:41.517

如果您关心计算效率或科学计算，Scipy 会提供高效的 Graph 例程：

[http://docs.scipy.org/doc/scipy/reference/sparse.csgraph.html](http://docs.scipy.org/doc/scipy/reference/sparse.csgraph.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-08T18:07:51.380

这不能回答您的图形问题，但您当然可以在 Python 中实现 2D 列表，而无需通过至少两种方式求助于列表：

您可以简单地使用字典：

```
import collections
t = collections.defaultdict(int)

t[0, 5] = 9
print t[0, 5] 
```

这还具有稀疏的优点。

对于一种更高级但需要更多工作的方法，您可以使用 1d 列表并使用 2D 坐标以及表格的高度和宽度来计算索引。

```
class Table(object):
    def __init__(self, width, height):
        self._table = [None,] * (width * height)
        self._width = width

    def __getitem__(self, coordinate):
        if coordinate[0] >= width or coordinate[1] >= height:
            raise IndexError('Index exceeded table dimensions')
        if coordinate[0] < 0 or coordinate[1] < 0:
            raise IndexError('Index must be non-negative')
        return self._table[coordinate[1] * width + coordinate[0]]

    def __setitem__(self, coordinate, value):
        if coordinate[0] >= width or coordinate[1] >= height:
            raise IndexError('Index exceeded table dimensions')
        if coordinate[0] < 0 or coordinate[1] < 0:
            raise IndexError('Index must be non-negative')
        self._table[coordinate[1] * width + coordinate[0]] = value

t = Table(10,10)
t[0, 5] = 9
print t[0, 5] 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-07-25T17:42:17.923

[networkx](https://github.com/networkx/networkx)绝对是最流行的 Python 图形库。它有据可查，具有出色的 API，并且性能卓越。假设您有以下图表：

[![在此处输入图像描述](../Images/9a6f87473ccf28fe4cae354fddfc9298.png)](https://i.stack.imgur.com/gDIof.png)

以下是如何创建此图并计算所有指向节点 e 的边：

```
import networkx as nx

graph = nx.DiGraph()
graph.add_edges_from([("root", "a"), ("a", "b"), ("a", "e"), ("b", "c"), ("b", "d"), ("d", "e")])
print(graph.in_edges("e")) # => [('a', 'e'), ('d', 'e')] 
```

以下是计算节点 b 指向的所有边的方法：

```
print(graph.out_edges("b")) # => [('b', 'c'), ('b', 'd')] 
```

networkx 是一个很棒的库。有关更多详细信息，请参见[此处](https://mungingdata.com/python/dag-directed-acyclic-graph-networkx/)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-08T17:32:42.210

看看[Pygraph](http://code.google.com/p/python-graph/)。我已经将它用于没有内存或运行时问题的大型有向（和无向）图，尽管它都是在 Python 中实现的，因此 C++ 包装的实现可能会快得多。

# java - 如何从 Arduino 接收数据？

> ID：11869646
> 
> 赞同：2
> 
> 时间：2012-08-08T17:08:47.527
> 
> 标签：java, android, serial-port, arduino

我想通过串口从 Arduino 接收数字引脚值 1（高）或 0（低）。

我无法使用以下代码读取任何数据：

```
byte[] bbuffer = new byte[1];

try {
    mInputStream.read(bbuffer);
} 
catch (IOException e) {
    new Exception("Arduino-Board antwortet nicht! Timeout!!");
}

if (bbuffer[0] == (byte)1){
    PinValue.setText("HIGH");
}
else if (bbuffer[0] == (byte)0){
    PinValue.setText("LOW");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T08:26:52.770

您没有在问题中提供相关信息：您如何设置`InputStream`？

但是您的代码仍然显示出一些缺陷：

> mInputStream.read(bbuffer);

的一般合同`InputStream.read`是，您*还*必须检查 的返回值`read`。如果`read`返回零或负数，则内容`bbuffer`不变。

> 新异常（“Arduino-Board antwortet nicht！超时！！”）；

您只会*创建*一个新异常，但不会抛出它。您必须添加`throw`到该行。

# java - Eclipse 中的 Ant 脚本使用了不正确的 Java 版本

> ID：11869648
> 
> 赞同：0
> 
> 时间：2012-08-08T17:08:54.530
> 
> 标签：java, eclipse, ant, version

我正在开发一个需要使用 Java 1.5 的旧项目，但是当我运行构建脚本时，出现错误：

```
java.lang.UnsupportedClassVersionError: Bad version number in .class file 
```

我相信这个错误是指正在使用的较新版本的 Java，即使我只想使用 Java 1.5。我已经更改了下`Windows->Preferences->Java->Installed JREs`和下的设置`Run As->External Tool Configuration->JRE`，使两者都指向`Java 1.5`. 在 下`Run As->External Tool Configuration->Environment`，我添加了变量`JAVA_HOME`并`JRE_HOME`指向旧版本的 Java。将此行添加到构建脚本时：

```
<echo message="ant.java.version: ${ant.java.version}"/> 
```

Eclipse 返回此值：

```
[echo] ant.java.version: 1.5 
```

但上述错误仍然存​​在。我能够构建项目的唯一方法是更改​​我的环境变量`JAVA_HOME`和`JRE_HOME`环境变量以指向旧版本的 Java。Eclipse 中是否有任何其他设置可以在不更改系统环境变量的情况下更改以构建项目？（即 Ant 使用 Java 1.5 构建项目，但系统变量仍指向 Java 1.7）。

代码`build.xml`：

```
<project name="osd-bits" basedir="." default="deploy">

<!-- Project settings -->

<!-- TODO -->
<!-- This needs to be set individually by each developer to the correct Tomcat path -->
<property name="tomcat.path" value="C:\Tomcat 6\apache-tomcat-6.0.35" />

<property name="project.title" value="OSD BITS"/>
<property name="project.name" value="osd-bits"/>
<property name="project.version" value="2.0"/>
<property name="project.deploypath" value="${tomcat.path}\\webapps"/>
<property name="project.workdir" value="${tomcat.path}\\work\Catalina\localhost"/>

<!-- Test Server Settings -->   
<property name="project.deploypathtest" value="T:\Program Files\jakarta-tomcat-5.0.28\webapps"/>    
<property name="project.workdirtest" value="T:\Program Files\jakarta-tomcat-5.0.28\work\Catalina\localhost"/>

<!-- Staging Server Settings -->    
<property name="project.deploypathstage" value="S:\Program Files\jakarta-tomcat-5.0.28\webapps"/>   
<property name="project.workdirstage" value="S:\Program Files\jakarta-tomcat-5.0.28\work\Catalina\localhost"/>

<!-- Production Server Settings -->
<property name="project.deploypathprod" value="P:\Program Files\jakarta-tomcat-5.0.28\webapps"/>    
<property name="project.workdirprod" value="P:\Program Files\jakarta-tomcat-5.0.28\work\Catalina\localhost"/>   

<!-- Path settings -->  
<property name="path.binary" value="${basedir}/../../baja2/bin"/>        
<property name="path.webroot" value="${basedir}/webroot"/>   
<property name="path.conf" value="${basedir}/conf"/>
<property name="path.src" value="${basedir}/src"/>
<property name="path.build" value="${basedir}/bin"/>
<property name="path.cmdlib" value="${basedir}/cmd/lib"/>    
<property name="path.buildlib" value="${tomcat.path}\\lib"/>
<property name="path.webinf" value="${path.webroot}/WEB-INF"/>
<property name="path.lib" value="${path.webinf}/lib"/>
<property name="path.classes" value="${path.webinf}/classes"/>
<property name="path.classpath" value="${path.lib}/baja.jar;
                                       ${path.lib}/struts.jar;
                                       ${path.buildlib}/fop.jar;
                                       ${basedir}/lib/servlet.jar;
                                       ${path.buildlib}/velocity-dep-1.4.jar;
                                       ${basedir}/lib/jxl.jar;
                                       ${path.lib}/display.jar;
                                       ${path.buildlib}/commons-validator.jar;
                                       ${path.buildlib}/commons-beanutils.jar;
                                       ${path.lib}/quartz-1.6.3.jar"/>

<!-- Check timestamp on files -->
<target name="timecheck">
    <tstamp/>
</target>

<!-- Remove classes for clean build -->
<target name="clean" description="Prepare for clean build">
  <delete dir="${path.build}/com"/>
  <delete file="${path.lib}/${project.name}.jar"/>
  <delete file="${path.lib}/${project.name}-config.jar"/>
</target>

<!-- jar up config files -->
<target name="config">
    <jar jarfile="${path.lib}/${project.name}-config.jar" basedir="${path.conf}"/>
</target>

<!-- Full build of java and config files-->
<target name="build" depends="timecheck,clean,config">
    <echo message="ant.java.version: ${ant.java.version}" />
    <javac srcdir="${path.src}" destdir="${path.build}" classpath="${path.classpath}" debug="true" target="1.5" includeantruntime="false"/>
    <jar jarfile="${path.lib}/${project.name}.jar" basedir="${path.build}"/>
</target>

<!-- Builds everything in src directory and deploys .war to deployment directory -->       
<target name="deploy" depends="build" description="Deploys project to deployment directory">
    <delete file="${project.deploypath}\${project.name}.war"/>
    <delete dir="${project.deploypath}\${project.name}"/>
    <delete dir="${project.workdir}\${project.name}"/>
    <copy todir="${project.deploypath}\${project.name}">
        <fileset dir="${path.webroot}"/>
    </copy>
</target>

<!-- Builds everything in src directory and deploys to test server deployment directory -->       
<target name="deploytotest" depends="build" description="Deploys project to test deployment directory">
    <delete file="${project.deploypathtest}\${project.name}.war"/>
    <delete dir="${project.deploypathtest}\${project.name}"/>
    <delete dir="${project.workdirtest}\${project.name}"/>
    <copy todir="${project.deploypathtest}\${project.name}">
        <fileset dir="${path.webroot}"/>
    </copy>
</target>

<!-- Builds everything in src directory and deploys to staging server deployment directory -->       
<target name="deploytostage" depends="build" description="Deploys project to stage deployment directory">
    <delete file="${project.deploypathstage}\${project.name}.war"/>
    <delete dir="${project.deploypathstage}\${project.name}"/>
    <delete dir="${project.workdirstage}\${project.name}"/>
    <copy todir="${project.deploypathstage}\${project.name}">
        <fileset dir="${path.webroot}"/>
    </copy>
</target>

<!-- Builds everything in src directory and deploys to production server deployment directory -->       
<target name="deploytoprod" depends="build" description="Deploys project to production deployment directory">
    <delete file="${project.deploypathprod}\${project.name}.war"/>
    <delete dir="${project.deploypathprod}\${project.name}"/>
    <delete dir="${project.workdirprod}\${project.name}"/>
    <copy todir="${project.deploypathprod}\${project.name}">
        <fileset dir="${path.webroot}"/>
    </copy>
</target>

<target name="movejsps" description="Moves all JSP files without doing a complete rebuild">
    <copy todir="${project.deploypath}\${project.name}\jsp" preservelastmodified="false" >
        <fileset dir="${path.webroot}/jsp" />
    </copy> 
</target>

<target name="movejs" description="Moves all JS files without doing a complete rebuild">
    <copy todir="${project.deploypath}\${project.name}\js" preservelastmodified="false" >
        <fileset dir="${path.webroot}/js" />
    </copy> 
</target>

<target name="movecss" description="Moves all CSS files without doing a complete rebuild">
    <copy todir="${project.deploypath}\${project.name}\css" preservelastmodified="false" >
        <fileset dir="${path.webroot}/css" />
    </copy> 
</target>

<target name="movetemplates" description="Moves all Report Template files without doing a complete rebuild">
    <copy todir="${project.deploypath}\${project.name}\templates" preservelastmodified="false" >
        <fileset dir="${path.webroot}/templates" />
    </copy> 
</target>

<target name="copyjar" description="Moves latests baja.jar into demos webinf lib">
    <copy file="${path.binary}/baja.jar" todir="${path.lib}" preservelastmodified="true" />     
</target>

<!-- Builds the command line distribution -->       
<target name="deploycmd" depends="build" description="Deploys project to test deployment directory">
    <delete file="${path.cmdlib}\${project.name}.jar"/>
    <delete file="${path.cmdlib}\${project.name}-config.jar"/>
    <copy file="${path.lib}/${project.name}.jar" todir="${path.cmdlib}" preservelastmodified="true" />  
    <copy file="${path.lib}/${project.name}-config.jar" todir="${path.cmdlib}" preservelastmodified="true" />   
</target> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T17:25:08.687

可能有多种原因：

*   您使用为 java 1.6 编译的库
*   在 ant 脚本中，您可以指定要编译到的 java 版本。它可能是与 ant 本身运行的版本不同的版本。
*   在eclipse设置里面，可以选择一个ant安装。ant 安装可能是为 java 1.6 编译的（不太可能）。您可以添加（？）/选择另一个 ant 安装
*   如果 ant 不编译您的源代码但使用类文件，则 eclipse 自动编译已经生成，您需要更改项目的 java 编译器版本和项目设置中的项目 JRE（显然有 ;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-13T06:11:27.393

如果你不使用eclipse。然后，您可以直接在文件上更改 ant java 属性，如此处所述。为我工作。

[http://pissedoff-techie.blogspot.in/2014/09/ant-picks-up-incorrect-java-version.html](http://pissedoff-techie.blogspot.in/2014/09/ant-picks-up-incorrect-java-version.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T14:53:13.597

带着所有的罐子去图书馆。如果您可以运行 bash 脚本，请执行以下操作：

```
#!/bin/bash
for jarfile in `ls *.jar`
do
    directory=${jarfile%.jar}
    if [ -d $directory ]
    then
        rm -r $directory
    fi  

    mkdir $directory
    cd $directory
    jar xf ../$jarfile
    cd ..
    for classfile in `find ./ -name *.class`
    do
        file $classfile | grep -v "version 46" | grep -v "version 47" | grep -v "version 48" | grep -v "version 49"
    done
done 
```

这应该吐出任何不是版本 46 (Java 1.2)、版本 47 (Java 1.3)、48 (Java 1.4) 或 49 (Java 1.5) 的类。石英罐有一个 45.3 的类，即 Java 1.1。也许这是个问题？如果不是（谷歌搜索建议 JVM 1.5 可以运行 1.1 类），那么也排除“45.3”：

```
file $classfile | grep -v "version 45.3" | grep -v "version 46" | grep -v "version 47" | grep -v "version 48" | grep -v "version 49" 
```

# javascript - 拉斐尔矩形边框

> ID：11869649
> 
> 赞同：4
> 
> 时间：2012-08-08T17:08:57.063
> 
> 标签：javascript, raphael

当我使用以下代码绘制一个简单的矩形时，底部和右侧边框比顶部和左侧边框更厚。为什么会这样，我可以阻止它吗？

```
var paper = Raphael(10, 50, 500, 500);
var rect = paper.rect(100, 100, 100, 100); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T20:13:33.213

矩形的顶部和左侧边框使用默认的 1 像素笔画宽度，正好落在 SVG 元素的顶部和左侧边框（由 Raphael`paper`对象表示。与基于像素的绘图解决方案相反，这意味着line 本质上是跨越元素的边框，导致边框笔划的 0.5 像素被剪裁。

要解决此问题，您只需将绘图移到或移动 SVG 元素坐标的起始偏移量。

这是一个显示[一种解决方案](http://jsfiddle.net/kevindivdbyzero/a2nsa/)的小提琴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T17:22:39.400

广场对我来说很好：http: [//jsfiddle.net/cMXBC/2/](http://jsfiddle.net/cMXBC/2/)

你能在某个地方有一些流氓 css 来修改矩形的笔划吗？尝试右键单击正方形并在 Firebug 中检查矩形或使用 Chrome 检查器查看是否添加了任何样式。

# c# - 在文本框中输入字符时显示 div 标签内容？

> ID：11869650
> 
> 赞同：0
> 
> 时间：2012-08-08T17:09:01.170
> 
> 标签：c#, javascript, jquery, asp.net, .net

当用户在文本框（绿色矩形）中输入至少一个字符时，我试图在 div 标签（红色矩形）中向下滑动内容。

如果未输入任何字符，则不会显示 div 内容。

这是aspx（设计）的图片：

![在此处输入图像描述](../Images/f8d6c3af642ded28bd40f2e05aa49941.png)

这是我用来尝试实现这一目标的 JavaScript：

```
function() {
    $("#SubmitSection").hide();
    inputOne = document.getElementById("<%= TextBox1.ClientID %>");
    if (inputOne.value != "") {
        $("#SubmitSection").slideDown('slow');
    }
    else {
        $("#SubmitSection").slideUp('slow');
    }
}​ 
```

所有后端代码都可以正常工作，但部署时会显示文本框和 div 部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T17:22:20.890

如果我说对了：

```
$("<%= TextBox1.ClientID %>").change(function(){YoursSlidingFunctionhere();}) 
```

[。改变（）](http://api.jquery.com/change/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T17:24:31.200

您必须连接到文本框上的事件。该 `onchange`事件仅在文本框失去焦点后触发，因此我建议该`onkeyup`事件。

```
<asp:TextBox ID="TextBox1" runat="server" [...] onkeyup="updateSubmitSection()" /> 
```

您必须命名您的函数，以便您可以调用它：

```
updateSubmitSection = function() {
   $("#SubmitSection").hide();
  inputOne = document.getElementById("<%= TextBox1.ClientID %>");
  // ...
} 
```

除此之外，您还需要在`onload`页面事件期间调用该函数：

```
<body onload='updateSubmitSection()'> 
```

使用 jQuery 的相同解决方案：

```
$(document).ready(function() {
    updateSubmitSection();
    $('#<%= TextBox1.ClientID %>').change(updateSubmitQuery);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T17:24:57.177

您需要将此添加到在初始化时执行的 javascript 部分：

```
`$("#SubmitSection").hide();` 
```

您可以使用 body onload 属性：

```
`<body onload="init()">
<script>
function init()
{
$("#SubmitSection").hide();
}
</script> ` 
```

# wcf - WCF 中的多个 MSMQ 通信

> ID：11869655
> 
> 赞同：-1
> 
> 时间：2012-08-08T17:09:22.197
> 
> 标签：wcf, msmq

我正在使用客户端服务器应用程序，其中客户端向请求队列中的服务器发送请求，服务器从队列处理它接收此请求对象，并在客户端应用程序接收的响应队列中发送响应。我希望 wcf 服务和客户端具有相同的功能，因此我是否需要为 msmq 创建两个不同的端点，如果是，则比同一个客户端如何与两个端点一起工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T18:27:27.183

您不应该将其视为严格的客户端服务器应用程序。您确实有一个称为客户端的请求发起者和一个称为服务器的请求处理器，但是当认为 WCF 客户端是发送消息的那个时，服务器是接收消息的那个。这意味着在 WCf 术语中，首先您的客户端实际上是一个经典的“客户端”，而服务器实际上是一个经典的“服务器”。但是，当您在处理原始请求并需要将其发回之后达到目的时 - 角色颠倒了！服务器成为 WCf 客户端，客户端成为 WCf 服务器。

这意味着您的进程需要为彼此公开一个单独的端点。服务器在某个 EP 上侦听传入消息（请求），客户端在某个 EP 上侦听传入消息（响应）。

希望这能澄清一些事情。

# javascript - 请求 WCF 服务的 dojo Web 应用程序

> ID：11869657
> 
> 赞同：0
> 
> 时间：2012-08-08T17:09:44.163
> 
> 标签：javascript, json, dojo, jsonp

我已经设置了一个 WCF 服务，它使用我的配置文件设置返回 json 格式数据，如下所示：

```
<system.web>
<compilation debug="true" strict="false" explicit="true" targetFramework="4.0" />
</system.web>
<system.serviceModel>
<bindings>
  <webHttpBinding>
    <binding name="webHttpBindingJsonP" crossDomainScriptAccessEnabled="true" />
  </webHttpBinding>
</bindings>
<behaviors>
  <serviceBehaviors>
    <behavior name="webHttpBehavior">
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="true" />
    </behavior>
  </serviceBehaviors>
  <endpointBehaviors>
    <behavior name="webHttpBehavior">
      <webHttp/>
    </behavior>
  </endpointBehaviors>
</behaviors>
<services>
  <service behaviorConfiguration="webHttpBehavior" name="Services.Service1">
    <endpoint address="mex" 
      binding="webHttpBinding"  bindingConfiguration="webHttpBindingJsonP" 
      contract="Services.IService1" behaviorConfiguration="webHttpBehavior"/>
  </service>
</services>
</system.serviceModel>
 <system.webServer>
 <modules runAllManagedModulesForAllRequests="true"/>
</system.webServer> 
```

我的服务 WebInvoke 功能：

```
 <OperationContract()>
 <WebInvoke(Method:="GET", BodyStyle:=WebMessageBodyStyle.WrappedRequest,       Responseformat:=WebMessageFormat.Json)>
Function RetrieveData(ByVal screenName As String) As Stream 
```

最后，我基于 dojo 的网站调用 web 服务的功能：

```
 <script type="text/javascript">

      dojo.ready(function () {
        dojo.io.script.get({                  url: 
          "http://xxx.xxx.x.xxx/Services/Service/Service1.svc/GetData?item=Tweet",
            callbackParamName: "callback",
            content: { username: "me", password: "you" }
             }).then(function (data){
                   return data.results;
               })
    });

 </script> 
```

问题是我无法让数据流向 dojo 应用程序。首先，我得到未定义的错误回调。现在我不确定我是否清楚这个回调的事情：它是我上面提到的 dojo 应用程序中的函数的名称，但该函数没有命名，还是返回 json 响应的函数的名称顺便说一下，Web 服务安装在不同的域上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T20:34:28.627

这就是我对 .NET 所做的：

我的服务：

```
 [OperationContract]
        [WebGet(UriTemplate = "/GetMyStuff", ResponseFormat = WebMessageFormat.Json)]
        public String GetMyStuff()
        {
            var myStuff = getFromService("foo");

            return new { label = "name", identifier = "Id", items = myStuff.Select(w => new { Id = w.Id, name = w.Description }) }.ToJSON();
        } 
```

我使用这个`ToJSON()`声明如下的辅助函数：

```
public static class LinqUtils
{
        public static string ToJSON(this object obj)
        {
            JavaScriptSerializer serializer = new JavaScriptSerializer();

            return serializer.Serialize(obj);
        }
} 
```

在 web.config 中：

```
<system.serviceModel>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" aspNetCompatibilityEnabled="false">
      <serviceActivations>
        <add relativeAddress="Services/StuffServiceJson.svc" service="MyStuff.MyStuffService" />  <!-- This is an actual URL mapping to your service endpoint -->
      </serviceActivations>
    </serviceHostingEnvironment>

<!-- other stuff -->

    <services>
        <service name="MyStuff.MyStuffService">
           <endpoint binding="webHttpBinding" contract="MyStuff.MyStuffService" address="" behaviorConfiguration="webHttp"/> <!-- This is a service endpoint to your implementation class mapping -->
        </service>
    </services>
</system.serviceModel> 
```

在道场：

```
require(["dojo/_base/xhr"], function(xhr) {

xhr.get({
                                url: "/Services/StuffServiceJson.svc/GetMyStuff",
                                handleAs: "json",
                                preventCache: true
    }).then(function (data) {
            //Do something with DATA
    }, function (error) {
                //Do something with error OMG
    });

}); 
```

如果您在将数据作为字符串返回时遇到问题（有时发生在 .NET 中），那么您将不得不获取您的数据并执行

```
require(["dojo/json"], function(json){
    json.parse(data)
}); 
```

运气，

# c# - Linq-To-SQL 多次访问数据库

> ID：11869659
> 
> 赞同：2
> 
> 时间：2012-08-08T17:09:49.663
> 
> 标签：c#, sql-server, linq-to-sql, sql-server-profiler

我试图通过在一次访问数据库中包含子属性来提高我的 Linq-to-SQL 查询的效率。我首先尝试了各种 linq 查询来实现这一点。查询变得越来越复杂，所以我尝试了 LoadWith() 选项：

我的 DAL 类的构造函数设置了 LoadWith() 设置：

```
public TrackerJobData()
{
    dataLoadOptions = new DataLoadOptions();

    dataLoadOptions.LoadWith<TrackerJobRecord>(x => x.SpecBarcodeRecords);
    dataLoadOptions.LoadWith<TrackerJobRecord>(x => x.TrackerJobEquipmentTriggerRecords);
    dataLoadOptions.LoadWith<TrackerJobRecord>(x => x.EtaRecord);

    this.Database.LoadOptions = dataLoadOptions;
} 
```

这是我正在使用的查询：

```
public TrackerJob GetItem(int trackerJobId)
{
    TrackerJobRecord record =
        (from trackerJob in this.Database.TrackerJobRecords
         where trackerJob.TrackerJobId == trackerJobId
         select trackerJob).FirstOrDefault();

    return record.Map();
} 
```

**当我仅在 linq 查询（而不是返回）上**调试和 F10时，我在 SQL Profiler 中得到以下输出：

![在此处输入图像描述](../Images/f3821cae606588675ed29b2349fa072a.png)

请原谅我对 SQL Profiler 的无知，但突出显示的三行是否意味着从客户端（我的代码）到服务器的三个往返行程？如果是这样，为什么？*SQL Server 会一次*执行多个 sp_executesql 调用吗？

而且由于我认为 LoadWith() 会消除多次调用，所以我做错了什么？

**编辑**

以下是 SQL Profiler 中的三个语句：

```
exec sp_executesql N'SELECT TOP (1) [t0].[TrackerJobId], [t0].[Name], [t0].[EtaId], [t0].[SamplingProcessorTypeId], [t0].[Description], [t0].[LastModifiedUser], [t0].[LastModifiedTime], [t0].[VersionNumber], [t0].[Active], [t0].[Archived], [t1].[EtaId] AS [EtaId2], [t1].[EtaNumber], [t1].[Title], [t1].[State], [t1].[DateInitialized], [t1].[EtaOriginatorId], [t1].[Quantity], [t1].[Ehs], [t1].[Ship], [t1].[InternalUse], [t1].[DateClosed], [t1].[ExperimentId], [t1].[Disposition], [t1].[TestType], [t1].[LastModifiedUser] AS [LastModifiedUser2], [t1].[LastModifiedTime] AS [LastModifiedTime2], [t1].[VersionNumber] AS [VersionNumber2]
FROM [AutoTracker].[TrackerJob] AS [t0]
INNER JOIN [Global].[Eta] AS [t1] ON [t1].[EtaId] = [t0].[EtaId]
WHERE [t0].[TrackerJobId] = @p0',N'@p0 int',@p0=17

exec sp_executesql N'SELECT [t0].[SpecBarcodeId], [t0].[TrackerJobId], [t0].[EquipmentId], [t0].[StartTime], [t0].[EndTime], [t0].[LastModifiedUser], [t0].[LastModifiedTime], [t0].[VersionNumber]
FROM [AutoTracker].[SpecBarcode] AS [t0]
WHERE [t0].[TrackerJobId] = @x1',N'@x1 int',@x1=17

exec sp_executesql N'SELECT [t0].[TrackerJobId], [t0].[EquipmentId], [t0].[LastModifiedUser], [t0].[LastModifiedTime], [t0].[VersionNumber]
FROM [AutoTracker].[TrackerJobEquipmentTrigger] AS [t0]
WHERE [t0].[TrackerJobId] = @x1',N'@x1 int',@x1=17 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T18:16:05.033

Linq-2-sql`LoadWith`不支持多个 1:N 关系。

[http://weblogs.asp.net/zeeshanhirani/archive/2008/08/11/constraints-with-loadwith-when-loading-multiple-1-n-relationships.aspx](http://weblogs.asp.net/zeeshanhirani/archive/2008/08/11/constraints-with-loadwith-when-loading-multiple-1-n-relationships.aspx)

[带有多个 DataLoadOptions 的 Linq2SQl 急切加载](https://stackoverflow.com/questions/644576/linq2sql-eager-load-with-multiple-dataloadoptions)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T18:12:51.940

Each of those SQL Profiler calls represents a single roundtrip from client to DB server instance. SQL Server does support returning data sets in a single roundtrip, but I'm not sure how you would do that with LINQ to SQL.

# php - 单击接受后显示警报消息并重定向

> ID：11869662
> 
> 赞同：16
> 
> 时间：2012-08-08T17:09:54.147
> 
> 标签：php, codeigniter

好吧，我有一个带有报告链接的页面。每当有人点击一份报告时，他们都可以下载 Excel 文件。但是，有时没有字段可以进行报告；在这种情况下，我想显示一条警报消息，在他们点击“接受”后，他们会被重定向到主面板。当他们单击报告时，他们会转到使用 a`switch`获取数据的控制器。如果没有数据，模型返回`FALSE`；所以在控制器结束时，我检查：

```
if ($result_array != FALSE)
    to_excel($result_array->result_array(), $xls,$campos);
else {
    echo "<script>alert('There are no fields to generate a report');</script>";
    redirect('admin/ahm/panel');
} 
```

如果我摆脱`redirect('admin/ahm/panel');`了警报，那么警报会起作用，但它将用户移动到应该生成 excel 文件的页面。但是如果我使用重定向，控制器会将用户移动到主面板而不显示警报。

任何帮助表示赞赏。

提前致谢。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-08-08T17:17:30.783

```
echo "<script>
alert('There are no fields to generate a report');
window.location.href='admin/ahm/panel';
</script>"; 
```

并摆脱`redirect`下面的行。

你把两个不同的世界混在一起了。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-05-21T04:20:47.930

**使用此代码重定向页面**

```
echo "<script>alert('There are no fields to generate a report');document.location='admin/ahm/panel'</script>"; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-08T17:57:54.970

结合 CodeIgniter 和 JavaScript：

```
//for using the base_url() function
$this->load->helper('url');

echo "<script type='javascript/text'>";
echo "alert('There are no fields to generate a report');"
echo "window.location.href = '" . base_url() . "admin/ahm/panel';"
echo "</script>"; 
```

**注意：**该`redirect()`函数会自动包含`base_url`路径，这就是那里不需要它的原因。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-21T09:06:09.980

```
echo "<script>
window.location.href='admin/ahm/panel';
alert('There are no fields to generate a report');
</script>"; 
```

试试这个方法吧...

首先为必须显示警告框的新页面分配窗口，然后显示警告框。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-08T17:14:37.313

该`redirect`函数清理输出缓冲区并进行`header('Location:...');`重定向并退出脚本执行。您尝试回显的部分将永远不会被输出。

您应该在下载页面上通知或在您重定向到的页面上通知丢失的数据。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-19T14:47:45.663

这行得通，但试试这种方式。

```
echo "<script>
alert('There are no fields to generate a report');
window.location.href='admin/ahm/panel';  
</script>"; 
```

警报在顶部，然后位置在下一个

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-02-24T11:38:38.560

这样就可以了`

```
 if ($result_array)
    to_excel($result_array->result_array(), $xls,$campos);
else {
    echo "<script>alert('There are no fields to generate a report');</script>";
    echo "<script>redirect('admin/ahm/panel'); </script>";
}` 
```

# c++ - 在什么时候将内存分配给 c++ 中的常量变量？

> ID：11869676
> 
> 赞同：3
> 
> 时间：2012-08-08T17:10:30.273
> 
> 标签：c++

据我所知，常量类成员必须在构造函数运行之前初始化，但由于它们不能在类主体中初始化（因为它只是一个原型），因此我们需要在初始化列表中对其进行初始化。我的问题是内存何时分配给常量变量，执行顺序是什么？

```
class constant
{
    const int a;
    public:
    constant(int k):a(k)
    {   
        cout<<"a is "<<a<<endl;
    }   
};

int main()
{
    constant cl(5);
    return 0;
} 
```

编辑：常量变量是否需要在分配内存的时候进行初始化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T17:13:55.503

我认为您对`const`. 较少将其视为与实现细节（如内存）或运行时相关，而更多地认为它是帮助程序员和编译器的一种手段。

何时分配内存并不重要（尽管它是在您构造对象之前，在进入初始化列表之前 - 标准未指定），重要的是您只能初始化初始化列表中的变量（前 C++ 11) 甚至是`const`整型的类定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T17:15:13.527

> 什么时候将内存分配给常量变量

这里，`a`是 的一个数据成员`class constant`，所以它是*作为 的一部分分配的* `constant`。每当您创建 的实例时`constant`，都会`a`包含一个。

请注意，`static`成员是不同的，但仅仅因为`a`在初始化后不允许更改，并不会使其*存储*与任何其他常规数据成员不同。

> ...是否有必要在分配内存的时候初始化常量变量

严格来说，在调用构造函数之前，您必须拥有可用的内存，因此*where*的短语有点问题（具体参见 André Caron 关于放置 new 的评论）。

但是，在大多数正常使用中，分配和构造是联系在一起的，并且*必须*在构造对象时进行 const 成员的初始化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T17:38:49.143

如果变量是`const`，编译器会强制您在初始化后不要更改该值。也就是说，您必须初始化它（*必须*在[RFC2119](http://www.ietf.org/rfc/rfc2119.txt)的意义上）。

您必须直接初始化它：

```
struct constant {
  const int a;
  constant(int k) : a(k) {
    /* everything is fine here */
  }   
}; 
```

你不能让它未初始化：

```
struct constant {
  const int a;
  constant(int k) { 
    /* error: uninitialized member ‘constant::a’ with ‘const’ type ‘const int’ */
  }   
}; 
```

并且您不能在构建后更改它的值：

```
struct constant {
  const int a;
  constant(int k) { 
    a = k; 
    /* error: uninitialized member ‘constant::a’ with ‘const’ type ‘const int’ */
    /* error: assignment of read-only data-member ‘constant::a’ */ 
  }
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T17:16:15.940

对象成员的确切内存位置取决于对象创建。如果您通过“新”创建对象，它将是一个堆。如果您创建堆栈对象（如您的示例），它将是一个堆栈内存。“常量”内存——它是“常量”的内存，而不是“常量变量”的内存。

换句话说，用于文字字符串、文字数字（“text”，5）的 const 内存，而 const 修饰符限制了内存更新。

# java - openGL 纹理在模拟器上运行，但不在真实设备上

> ID：11869687
> 
> 赞同：0
> 
> 时间：2012-08-08T17:11:13.647
> 
> 标签：java, android, opengl-es

我正在尝试通过openGL显示纹理。在下面的代码中，我想用纹理绘制简单的正方形。当我在 android 模拟器上运行它时，一切正常，但是当我在真实设备上运行它时，我只能看到没有任何纹理的白色方块。

[有类似的问题](https://stackoverflow.com/questions/8587661/cant-map-textures-with-opengl-es-on-real-devices)，但我不使用NDK。我只使用Java。

```
public class MainActivity extends Activity
{
    public static TextView t;
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        LinearLayout l = new LinearLayout(this);
        t = new TextView(this);
        l.addView(t);
        l.setOrientation(1);
        l.addView(new ImageView(this));
        setContentView(l);

    }
    long last = System.currentTimeMillis();
    int FPS = 0;
    //Show FPS(+ some extraData)
    public void FPS(final String extraData)
    {
        if(System.currentTimeMillis()<last+1000)
        {
            FPS++;
        }
        else
        {
            runOnUiThread(new Runnable(){@Override public void run(){
                t.setText((double)FPS/(((double)System.currentTimeMillis()-last)/1000)+";"+extraData);
            }});
            FPS = 0;
            last = System.currentTimeMillis();
        }
    }

public class ImageView extends GLSurfaceView implements GLSurfaceView.Renderer
{
    MainActivity thiz;
    public ImageView(MainActivity thiz)
    {
        super(thiz);
        this.thiz = thiz;
        setRenderer(this);
    }

    FloatBuffer vertex;
    ShortBuffer texture;
    int[] textureID = new int[1];
    public void onDrawFrame(GL10 gl)
    {
        gl.glClear(GL10.GL_COLOR_BUFFER_BIT);
        gl.glVertexPointer(2, GL10.GL_FLOAT, 0, vertex);
        gl.glTexCoordPointer(2, GL10.GL_SHORT, 0, texture);
        gl.glDrawArrays(GL10.GL_TRIANGLE_STRIP, 0, 4);

        thiz.FPS("");
    }

    public void onSurfaceCreated(GL10 gl, EGLConfig arg1)
    {
        vertex = FloatBuffer.wrap(new float[]{-0.5f, -0.5f,
                                               0.5f, -0.5f,
                                                -0.5f, 0.5f,
                                                  0.5f, 0.5f});

        texture = ShortBuffer.wrap(new short[]{0, 1, 
                                                1, 1,
                                                0, 0,
                                                 1, 0});

        Bitmap b = BitmapFactory.decodeResource(thiz.getResources(), R.drawable.nex2);
        gl.glGenTextures(1, textureID, 0);
        gl.glBindTexture(GL10.GL_TEXTURE_2D, textureID[0]);
        GLUtils.texImage2D(GL10.GL_TEXTURE_2D, 0, b, 0);

        b.recycle();

        gl.glClearColor(0.1f, 0.5f, 1f, 1f);
        gl.glEnable(GL10.GL_TEXTURE_2D);
        gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
        gl.glEnableClientState(GL10.GL_TEXTURE_COORD_ARRAY);
    }

    public void onSurfaceChanged(GL10 gl, int w, int h)
    {
        gl.glViewport(0, 0, w, h);
    } 
```

有人可以看看我的代码并告诉我问题出在哪里吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T20:31:32.913

你还记得将缩小过滤器设置为不使用 mipmap 吗？如果你不这样做，我有点惊讶这会在模拟器上工作，但也许它出于某种原因允许它。

例如

```
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR); 
```

[http://www.opengl.org/wiki/Common_Mistakes#Creating_a_Texture](http://www.opengl.org/wiki/Common_Mistakes#Creating_a_Texture)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T20:20:46.783

模拟器不运行 OpenGL ES afaik，它运行桌面驱动程序。这意味着它可以支持的纹理不是 2^n，而您的手机仅支持 2^n（又名正方形）的纹理。

我会检查一下，如果您没有收到错误，这很可能是您的问题。拿一张 2^n 的图片，看看它是否适合你。

# emacs - 正则表达式的扩展命令？

> ID：11869690
> 
> 赞同：2
> 
> 时间：2012-08-08T17:11:17.850
> 
> 标签：emacs, icicles

在 Emacs 中 - 有没有办法可以在 minibuffer 中通过正则表达式搜索扩展命令？那就是 - 我想通过正则表达式过滤命令，然后使用 IDO 或 Icicles 选择我需要的命令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T17:40:28.100

使用 ido 时，您可以按 开启正则表达式匹配`C-t`。我一起使用`smex`和`ido`，效果很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T16:34:31.017

虽然它们不是正则表达式，但默认完成机制接受 * 代表“任何东西”，因此您可以这样做`M-x foo*bar ?`，它会列出名称看起来像“...foo...bar...”的所有命令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T11:53:21.113

我一直怀疑这`Icicles`证明了这一点。

```
M-x <command-regexp> [PageUp/PageDown] 
```

浏览命令数学正则表达式，和

```
M-x <command-regexp> [Shift-Tab] 
```

查看与正则表达式匹配的命令列表。更多[在这里](http://www.emacswiki.org/emacs/Icicles_-_Apropos_Completions)。

# ruby-on-rails-3 - validates_associated 没有在我期望的时候被触发

> ID：11869692
> 
> 赞同：0
> 
> 时间：2012-08-08T17:11:21.430
> 
> 标签：ruby-on-rails-3

我有两个表`user`和`skill`，它们由一个名为 的连接表连接`user_skill`。每个`UserSkill`都有一个`current_proficiency_level`和一个`interest_level`。

一切都很好，直到我`validates_numericality_of :current_proficiency_level`戴上`UserSkill`. 现在，当我尝试保存`User`编辑表单时出现以下错误。当我至少有一个 non-numeric 时，我只会收到错误消息`current_proficiency_level`。当一切都有效时，它保存得很好。

> 替换 user_skills 失败，因为无法保存一条或多条新记录。

这告诉我，`UserSkill`当我尝试保存我的`User`. 这是我的`User`课程（为清楚起见，省略了一些不相关的代码）：

```
class User < ActiveRecord::Base
  has_many :posts
  has_many :user_skills
  has_many :skills, :through => :user_skills
  validates_associated :user_skills

  def attach_skills(current_proficiency_levels, interest_levels)
    self.user_skills.destroy_all
    self.user_skills = Skill.all.map { |skill|
      user_skill = UserSkill.find_or_create_by_user_id_and_skill_id(self.id, skill.id)
      user_skill.assign_attributes(
        :current_proficiency_level => current_proficiency_levels[skill.id.to_s].negative_if_blank,
        :interest_level => interest_levels[skill.id.to_s].negative_if_blank
      )
      user_skill
    }
  end
end 
```

这是我的`UserSkill`课。我在这里没有遗漏任何东西；就是这么短。

```
class UserSkill < ActiveRecord::Base
  belongs_to :user
  belongs_to :skill
  validates_numericality_of :current_proficiency_level
  validates_numericality_of :interest_level
end 
```

为什么`validates_numericality_of`我保存时没有运行`User`？

# java - java.sql.SQLException：在 Eclipse 中尝试连接数据库时，用户“root”@“localhost”的访问被拒绝（使用密码：YES）

> ID：11869697
> 
> 赞同：2
> 
> 时间：2012-08-08T17:11:56.353
> 
> 标签：java, mysql

我已经在我的电脑上安装了 wamp 服务器。我可以访问 phpmyadmin 没有任何错误。

但是当我尝试在eclipse中连接到数据库时，对于应用程序，出现了错误：

> java.sql.SQLException: com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1074) 上 com.mysql.jdbc.MysqlIO.checkErrorPacket 的用户 'root'@'localhost' 访问被拒绝（使用密码：YES） (MysqlIO.java:4074) 在 com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4006) 在 com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:919) 在 com.mysql.jdbc.MysqlIO。在 com.mysql.jdbc.ConnectionImpl.coreConnect(ConnectionImpl.java:2397) 在 com.mysql.jdbc.MysqlIO.doHandshake(MysqlIO.java:1244) 在 com.mysql.jdbc.ConnectionImpl 继续HandshakeWithPluggableAuthentication(MysqlIO.java:1694) .connectOneTryOnly(ConnectionImpl.java:2430) 在 com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2215) 在 com.mysql.jdbc.ConnectionImpl.(ConnectionImpl.java:813) 在 com.mysql。jdbc.JDBC4Connection.(JDBC4Connection.java:47) 在 sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) 在 sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source) 在 sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source) 在 java。 lang.reflect.Constructor.newInstance(Unknown Source) at com.mysql.jdbc.Util.handleNewInstance(Util.java:411) at com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:399) at com.mysql。 jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:334) at java.sql.DriverManager.getConnection(Unknown Source) at java.sql.DriverManager.getConnection(Unknown Source) at org.apache.jsp.data_jsp._jspService(data_jsp.java :74) 在 javax 的 org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)。servlet.http.HttpServlet.service(HttpServlet.java:722) 在 org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432) 在 org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java: 390) 在 org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter (ApplicationFilterChain.java:305) 在 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) 在 org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225) 在 org.apache。 catalina.core.StandardContextValve.invoke(StandardContextValve.java:123) 在 org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472) 在 org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98) 在 org.apache.catalina.valves.AccessLogValve 的 org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168) .invoke(AccessLogValve.java:927) 在 org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118) 在 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407) 在 org. org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585) 在 org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor 的 apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)。在 java.util.concurrent 的 java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) 处运行 (JIoEndpoint.java:310)。ThreadPoolExecutor$Worker.run(Unknown Source) at java.lang.Thread.run(Unknown Source)

这是 data.jsp 文件：

```
 <%@ page import="java.sql.*" %>
    <%@ page import="java.io.*" %>
    <%@ page import="com.mysql.*" %>
<?xml version="1.0"?>
<train>
<%
    Connection connection = null;
    Statement statement = null;
    ResultSet result = null;

    try {
        Class.forName("com.mysql.jdbc.Driver").newInstance();
        connection = DriverManager.getConnection("jdbc:mysql://localhost:3306/train", "root", "*****");
        out.println("connected to database");
    } catch(Exception e) {
        e.printStackTrace();
        out.println("error!!!!");
    }
%>
</train> 
```

所有密码都是正确的，但我在网上找不到任何可以帮助我解决这个问题的信息。

谁能帮我？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T17:20:14.617

尝试运行此命令，看看它是否有帮助。在火车上授予所有特权。* 到 root@localhost 由“nezinasi”标识；

# java - JFreeChart：动态更改系列列表

> ID：11869704
> 
> 赞同：0
> 
> 时间：2012-08-08T17:12:33.660
> 
> 标签：java, jfreechart

请问，我怎样才能更新 JfreeChart 的系列。
我的 Jfreechart 是这样工作的，
我有一组 CheckBox，当我选择要从中检索信息的复选框时，我想在图表的系列区域中看到它们。
系列列表正在更改，但没有显示。如何在代码中做到这一点？
谢谢

编辑
这就是我的代码的编写方式

```
 public DrawChart(JPanel panel){
    this.refresh = new RefreshGraph();
    this.displayChart (panel);
}

private void displayChart(JPanel jpanel){
    final DefaultCategoryDataset dataset = new DefaultCategoryDataset();

    Timer timer = new Timer(1000, new ActionListener(){
        @Override
        public void actionPerformed(ActionEvent e){
            refresh.getRefresh (dataset);
        }
    });
    timer.start ();

    JFreeChart chart = createChart(dataset);

    ChartPanel panel=new ChartPanel(chart);
    panel.setPreferredSize (new Dimension(700,300));
    jpanel.setLayout(new java.awt.BorderLayout());
    jpanel.add (panel, BorderLayout.CENTER);
    jpanel.repaint ();
    jpanel.setVisible(true);
}

private JFreeChart createChart(final CategoryDataset dataset){
    final JFreeChart result = ChartFactory.createLineChart ("", null, null, dataset, PlotOrientation.VERTICAL, true, true, false);
    return result;
} 
```

这就是我填充数据集的方式

```
dataset.addValue (Double.parseDouble (separateValues[0]), _listSeries.get (0), aLine);
dataset.addValue (Double.parseDouble (separateValues[1]), _listSeries.get (1), aLine); 
```

我需要的是，当 Timer 每 1 秒运行一次时，_listSeries（代表要显示的所有系列的列表）也会发生变化。只有图中的值不会改变系列区域。
我该怎么做？
我想通过调用 repaint() 来刷新面板，但没办法。这没用。
谢谢

# c - GdkPixbuf-CRITICAL **：gdk_pixbuf_get_width：断言“GDK_IS_PIXBUF（pixbuf）”失败

> ID：11869705
> 
> 赞同：2
> 
> 时间：2012-08-08T17:12:44.537
> 
> 标签：c, opencv, gtk, iup

我正在尝试使用[Iup](http://www.tecgraf.puc-rio.br/iup/)和[OpenCV](http://opencv.willowgarage.com/wiki/)运行基本应用程序。该应用程序的主要目标是显示图像并允许用户以各种有趣的方式进行分析，但现在这无关紧要。我需要知道的是以下错误消息的含义以及如何修复它们。我的应用程序仍然能够正常运行，并显示图像以供分析，但每次我重新绘制窗口时，这些错误似乎都会重新打印：

```
(frame:1840): GdkPixbuf-WARNING **: Bug! gdk-pixbuf loader 'png' didn't set an error on failure.

** (frame:1840): WARNING **: Pixbuf theme: Cannot load pixmap file /usr/share/themes/Mint-X/gtk-2.0/Scrollbars/scrollbar-v-trough.png: Failed to load image '/usr/share/themes/Mint-X/gtk-2.0/Scrollbars/scrollbar-v-trough.png': reason not known, probably a corrupt image file

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_width: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_height: assertion `GDK_IS_PIXBUF (pixbuf)' failed

** (frame:1840): WARNING **: Invalid borders specified for theme pixmap:
        /usr/share/themes/Mint-X/gtk-2.0/Scrollbars/scrollbar-v-trough.png,
borders don't fit within the image

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_n_channels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_pixels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_rowstride: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_n_channels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_pixels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_rowstride: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_n_channels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_pixels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_rowstride: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_n_channels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_pixels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_rowstride: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_n_channels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_pixels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_rowstride: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_n_channels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_pixels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_rowstride: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_n_channels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_pixels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_rowstride: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_n_channels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_pixels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_rowstride: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_n_channels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_pixels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_rowstride: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_width: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_height: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-WARNING **: Bug! gdk-pixbuf loader 'png' didn't set an error on failure.

** (frame:1840): WARNING **: Pixbuf theme: Cannot load pixmap file /usr/share/themes/Mint-X/gtk-2.0/Scrollbars/slider-v-normal.png: Failed to load image '/usr/share/themes/Mint-X/gtk-2.0/Scrollbars/slider-v-normal.png': reason not known, probably a corrupt image file

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_width: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_height: assertion `GDK_IS_PIXBUF (pixbuf)' failed

** (frame:1840): WARNING **: Invalid borders specified for theme pixmap:
        /usr/share/themes/Mint-X/gtk-2.0/Scrollbars/slider-v-normal.png,
borders don't fit within the image

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_n_channels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_pixels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_rowstride: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_n_channels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_pixels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_rowstride: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_n_channels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_pixels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_rowstride: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_n_channels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_pixels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_rowstride: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_n_channels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_pixels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_rowstride: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_n_channels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_pixels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_rowstride: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_n_channels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_pixels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_rowstride: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_n_channels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_pixels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_rowstride: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_n_channels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_pixels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_rowstride: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_width: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_height: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-WARNING **: Bug! gdk-pixbuf loader 'png' didn't set an error on failure.

** (frame:1840): WARNING **: Pixbuf theme: Cannot load pixmap file /usr/share/themes/Mint-X/gtk-2.0/Scrollbars/stepper-up-insensitive.png: Failed to load image '/usr/share/themes/Mint-X/gtk-2.0/Scrollbars/stepper-up-insensitive.png': reason not known, probably a corrupt image file

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_width: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_height: assertion `GDK_IS_PIXBUF (pixbuf)' failed

** (frame:1840): WARNING **: Invalid borders specified for theme pixmap:
        /usr/share/themes/Mint-X/gtk-2.0/Scrollbars/stepper-up-insensitive.png,
borders don't fit within the image

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_n_channels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_pixels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_rowstride: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_n_channels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_pixels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_rowstride: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_n_channels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_pixels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_rowstride: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_n_channels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_pixels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_rowstride: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_n_channels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_pixels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_rowstride: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_n_channels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_pixels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_rowstride: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_n_channels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_pixels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_rowstride: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_n_channels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_pixels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_rowstride: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_n_channels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_pixels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_rowstride: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_width: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_height: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-WARNING **: Bug! gdk-pixbuf loader 'png' didn't set an error on failure.

** (frame:1840): WARNING **: Pixbuf theme: Cannot load pixmap file /usr/share/themes/Mint-X/gtk-2.0/Scrollbars/stepper-down-insensitive.png: Failed to load image '/usr/share/themes/Mint-X/gtk-2.0/Scrollbars/stepper-down-insensitive.png': reason not known, probably a corrupt image file

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_width: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_height: assertion `GDK_IS_PIXBUF (pixbuf)' failed

** (frame:1840): WARNING **: Invalid borders specified for theme pixmap:
        /usr/share/themes/Mint-X/gtk-2.0/Scrollbars/stepper-down-insensitive.png,
borders don't fit within the image

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_n_channels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_pixels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_rowstride: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_n_channels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_pixels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_rowstride: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_n_channels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_pixels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_rowstride: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_n_channels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_pixels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_rowstride: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_n_channels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_pixels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_rowstride: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_n_channels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_pixels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_rowstride: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_n_channels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_pixels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_rowstride: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_n_channels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_pixels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_rowstride: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_n_channels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_pixels: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_rowstride: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_width: assertion `GDK_IS_PIXBUF (pixbuf)' failed

(frame:1840): GdkPixbuf-CRITICAL **: gdk_pixbuf_get_height: assertion `GDK_IS_PIXBUF (pixbuf)' failed 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T18:35:15.727

它看起来像是您正在使用的 GTK+ 主题 (Mint-X) 中的一个错误。图像损坏或不符合滚动条的预期。与您的代码无关。

如果您尝试不同的主题（假设新主题没有损坏），您应该不会看到该错误。此外，您应该向 Linux Mint 报告该错误。您还可以检查是否有可用的最新版本（请参阅[http://packages.linuxmint.com/pool/main/m/mint-x-theme/](http://packages.linuxmint.com/pool/main/m/mint-x-theme/)）。

另外，如果你足够勇敢，你可以尝试使用 git 存储库自行修复它：[https ://github.com/linuxmint/mint-x-theme](https://github.com/linuxmint/mint-x-theme)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-28T12:13:05.900

如果您`gdk-pixbuf`在运行时使用动态模块进行编译，则会出现此错误，但它无法在预期的位置找到所需的加载程序。如果您将 gdk-pixbuf 静态链接到您的应用程序但未发送加载程序文件，则可能会发生这种情况。

最好的解决方案是重新编译 gdk-pixbuf，并将所有加载器嵌入到库中：

```
./configure --disable-modules --with-included-loaders=yes 
```

# javascript - jQuery绑定长度变化

> ID：11869706
> 
> 赞同：2
> 
> 时间：2012-08-08T17:12:48.800
> 
> 标签：javascript, jquery, jquery-events

我有一张由 Ajax 更新的表。我想在向其中添加新数据时做一些事情，但是由于更改是在外观上，因此应该由预加载的 JS 而不是 Ajax 返回的 JS 来完成。

我正在寻找类似的东西`$('table tr').length.change( ... )`，所以我可以做这样的事情

```
$('table tr').length.change( function() {
  if ($('table tr').length>1) $('table').show() else $('table').hide()
} 
```

Ajax 返回的 JS 会做这样的事情（比如在 Rails 中）

```
$('table').append('<tr> <td><%= @person.name %></td> <td><%= @person.age %></td> </tr>') 
```

（在 Rails 中，这将在 some 中`/app/views/container_name/method_name.js.erb`）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T18:22:29.780

您可以使用[pub-sub](http://en.wikipedia.org/wiki/Publish%E2%80%93subscribe_pattern)方法。

```
$('table')
   .append('<tr> <td><%= @person.name %></td> <td><%= @person.age %></td> </tr>')
   .trigger('tableModified'); 
```

然后在您的布局/设计中，

```
$('table').on('tableModified',function(){
    if ($('tr', this).length>1) $(this).show() else $(this).hide()
}); 
```

这样，您的表格代码就不必知道您的布局/设计或其他任何可能需要知道表格何时被修改的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T17:21:09.277

`watch`在类似的情况下，我使用了一个以项目方式调用的 jQuery 插件。我必须跟踪更多属性，但它对我来说效果很好：

[http://darcyclarke.me/dev/watch/](http://darcyclarke.me/dev/watch/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T17:22:46.540

在 append 语句之后尝试 show-hide 语句。

```
$('table')
   .append('<tr> <td><%= @person.name %></td> <td><%= @person.age %></td> </tr>');

if( $('table tbody tr').length > 1 ) {
   $('table').show();
} else {
   $('table').hide()
} 
```

**注意**：

`$('table tr').length.change(..)`不是有效的方法。因为，`.change()`在一个事件处理程序中，它适用于`input, select`那些包装在`$()`IE 中的元素，即 jQuery 对象。

例如：

```
$('select').change()`, `$('input').change() 
```

而且，`.length`不返回 jQuery 对象。所以你不能使用`.change()`with`.length`并且它根本不需要。

# html - 在同一行显示 2 个标签和输入

> ID：11869710
> 
> 赞同：4
> 
> 时间：2012-08-08T17:12:57.823
> 
> 标签：html

这是一些示例代码

```
<label for="input1">input1</label>
<input id="input1" name="input1" type="text" required>
<label for="input2">input2</label>
<input id="input2" name="input2" type="date"> 
```

目前，它显示如下：

`Label` `Label` `Input` `Input`

我希望它这样做：

`Label` `Input` `Label` `Input`

有任何想法吗？我需要提供更多代码吗？

CSS

```
label { cursor: pointer; width: 250px; display: block; float: left; }
button, input, select, textarea { font-size: 100%; margin: 0; vertical-align: baseline; *vertical-align: middle; } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T15:36:33.690

因此，通过您更新的问题，解决起来非常简单。当您`float`在元素上使用时，它会脱离内联元素的正常定位。这意味着，标签在左侧具有更高的优先级。这就是你得到这个输出的原因：标签、标签、输入、输入。当您还添加`float`到输入字段时，将恢复原始顺序。或者，当只使用`inline`- 或 -`inline-block`元素时，您可以构建很多而不需要浮动元素。所以在你的情况下，你也可以简单地改变这个：

```
label {
    […]
    display: block;
    float:   left;
} 
```

对此：

```
label {
    […]
    display: inline-block;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T15:16:54.237

好吧，当我添加 css 时，我决定尝试一下。

```
input[type="text"], input[type="date"]{ float: left; } 
```

似乎解决了这个问题，但我不知道为什么。如果有人能解释一下，那就太好了。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-08T17:56:01.897

```
<table>
<tr>
<td><label for="input1">input1</label></td>
<td><input id="input1" name="input1" type="text" required></td>
<td><label for="input2">input2</label></td>
<td><input id="input2" name="input2" type="date"></td>
</tr>
</table> 
```

# c# - 跟踪一对一连接用户的好方法

> ID：11869718
> 
> 赞同：0
> 
> 时间：2012-08-08T17:13:21.973
> 
> 标签：c#, asp.net-mvc, signalr

我目前正在使用 signalR 集线器类通过聊天将人们联系起来。我想知道如果我将用户按 1 对 1 匹配，那么跟踪用户相互连接的好方法是什么。所以每次用户连接到集线器类时，他或她都会随机匹配并连接到用户，所以我必须将他们的连接ID相互关联。一旦切换用户，它们也需要不断更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T17:19:21.143

SignalR 有一个称为组的概念，它允许您仅使用简单的编程模型将消息分发给某些人。您必须将用户添加到大小为 2 的组中。看看官方文档中的“管理组”部分：

[http://www.asp.net/signalr/overview/signalr-20/hubs-api/hubs-api-guide-server](http://www.asp.net/signalr/overview/signalr-20/hubs-api/hubs-api-guide-server)

重要的部分是这个——这意味着你必须做（或者可以做——不管你怎么看）你自己的家务：

> 组不会持久保存在服务器上，因此应用程序负责跟踪哪些组中的连接。

# php - php使用javascript确认功能回显超链接

> ID：11869720
> 
> 赞同：-3
> 
> 时间：2012-08-08T17:13:30.263
> 
> 标签：php, javascript, html

我一直在使用此代码从数据库中删除数据。我想要的是，每当用户单击图像链接以从确认功能提示中删除数据并要求采取措施时，我在此代码中遇到错误。

```
$delurl = "delete_dish.php?dish_id=".$row['id'];
$img = "<img src = 'images/delete.png'>";
echo "<a href=".$delurl.";
echo "onclick='return confirm('Are you sure you want to delete.')'>".$img."</a>"; 
```

也许错误是在双引号或单引号中，任何帮助

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T17:37:06.303

```
$delurl = "delete_dish.php?dish_id=".$row['id'];
$img = "<img src = 'images/delete.png'>";

$confirm_box <<<CONFIRM
<a href="$delurl" 
onclick="return confirm('Are you sure you want to delete?')">$img</a> 
CONFIRM;

// then elsewhere ...
echo $confirm_box 
```

总是倾向于使用[HEREDOC 语法](http://php.net/manual/en/language.types.string.php)来构造 HTML/JS 输出，它会为你省去很多心痛。请注意主要问题，不要缩进heredoc 声明的第一行/最后一行。

**编辑**的好处是您可以随意混合单引号和双引号，您只需要担心 JS 引用 - PHP 变量在没有引号的情况下被插值。您可以进一步将花括号括在您的 PHP 变量（如 {$this} ）周围，以使其更易于阅读，但也可以描述 $this 和 {$this}tle。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T17:18:45.283

改变

```
echo "<a href=".$delurl."; 
```

至

```
echo "<a href=\"".$delurl."\" "; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T17:21:49.657

我将使用以下内容而不是转义，这对我来说更具可读性：

```
 $delurl = "delete_dish.php?dish_id=".$row['id'];
 $img = "<img src = 'images/delete.png'>";
?>
<a href="<?=$delurl?>" onclick="return confirm('Are you sure you want to delete?')"><?=$img?></a> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-08T17:18:07.437

在处理这样的事情时，你可以、可能而且应该逃避：

```
echo "<a href=\".$delurl.\"";
echo " onclick=\"return confirm('Are you sure you want to delete.')\">".$img."</a>"; 
```

lg,

弗洛

# jquery - 图像在我的 div 上显示的比实际图像大小大很多

> ID：11869721
> 
> 赞同：0
> 
> 时间：2012-08-08T17:13:43.583
> 
> 标签：jquery

我在 div 上显示图像。我的实际图像尺寸是宽度：300 和高度：300。打开实际图像时，它很小。但是当我将图像放在 div 中时，在浏览器上，图像是如此之大。我无法弄清楚要查看什么设置。我检查并确认我没有更改图像大小。我应该检查的任何想法。是否可以将图像大小强制为 jquery 中的某些像素？

这是我在 div 上显示图像的代码：

```
$(function () { 
 $('#div1').html("").css({"border": "", "margin": "0"});
    var myImage6 = new Image(); 
    $(myImage6).load(function () 
    $("#div1").html(myImage6).css({"border": "2px solid #E0E0E0", "margin": "20px 20px 20px 0", "float": "top", "font-size": "12px"});

    }).attr('src', flowers_image).error(function(){
          $('#div1').html("").css({"border": "", "margin": "0"});
    })

    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T17:23:38.980

您可能需要为图像指定高度和宽度。

```
$("#div1").html(myImage6).css({ "width": "300px", "height" : "300px", "border": "2px solid #E0E0E0", "margin": "20px 20px 20px 0", "float": "top", "font-size": "12px"}); 
```

在您的 .load 方法之后（或在回调中），添加以下行：

```
$( '#div1 img' ).css({ "width": "300px", "height" : "300px" }); 
```

# sql - SQL Server 2008 中的内部联接删除？

> ID：11869727
> 
> 赞同：6
> 
> 时间：2012-08-08T17:13:55.707
> 
> 标签：sql, sql-server, sql-server-2008

我正在尝试将 2 个表连接在一起并对其进行删除。

```
DELETE TableA 
FROM TableA a
INNER JOIN
TableB b on b.Id = a.Id
where title like 'test' 
```

以上是我想出的，但是我不断得到

> *DELETE 语句与 REFERENCE 约束冲突*

我想如果我将 2 个表合并在一起，那么我将同时删除这两个表，并且不会有任何约束冲突。

我在查询中遗漏了什么吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-25T06:56:42.103

尝试这个：

```
DELETE TableA 
FROM TableA 
INNER JOIN
TableB b on b.Id = TableA.Id
where TableA.title like 'test' 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-08T17:18:13.600

首先尝试`TableB`使用该标题条件删除然后删除那些记录`TableA`

```
DELETE FROM TableB
WHERE Id IN 
( SELECT Id FROM TableA WHERE title = 'test')

DELETE FROM TableA
WHERE title = 'test' 
```

`TableA`当您仍然有引用时，引用约束阻止您删除行`TableB`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T17:18:31.073

我会用级联约束一个接一个地删除。

# javascript - 在 JS 中正确使用长度

> ID：11869731
> 
> 赞同：1
> 
> 时间：2012-08-08T17:14:03.580
> 
> 标签：javascript, barcode, tablesorter, barcode-printing, jquery-barcode

我正在尝试使用 JS（该表使用 JQ Tablesorter）和条形码 jquery 从表中打印出标签（条形码）。我的问题是我需要遍历所有 isbn 并且每行显示一个数字。这是我的代码：

```
 $("#barcode").live('click', function(){
var title="";
var isbn="";
var first = "";
var second = "";
var indexGlobal = 0;

$('#acctRecords tbody tr').each(function()
{
    isbn += $(this).find('#tableISBN').html();
    title += $(this).find('#tableTitle').html();

    });  //end of acctRecords tbody function

//Print the bar codes

    var x=0;
    for (x=0;x<isbn.length;x++)
        {

        first += '$("#'+indexGlobal+'").barcode("'+isbn[x]+'", "codabar",{barHeight:40, fontSize:30, output:"bmp"});';
        second += '<div class="wrapper"><div id="'+indexGlobal+'"></div><div class="fullSKU">&nbsp &nbsp &nbsp '+isbn[x]+
        '</div><br/><div class="title">'+title[x]+'</div></div><br/><br/>';
        indexGlobal++;

        }
var barcode =  window.open('','BarcodeWindow','width=400');
        var html = '<html><head><title>Barcode</title><style type="text/css">'+
        '.page-break{display:block; page-break-before:always; }'+
        'body{width: 8.25in;-moz-column-count:2; -webkit-column-count:2;column-count:2;}'+
        '.wrapper{height: 2.5in;margin-left:10px;margin-top:5px;margin-right:5px;}'+
        '.fullSKU{float: left;}'+
        '.shortSKU{float: right;font-size:25px;font-weight:bold;}'+
        '.title{float: left;}'+
        '</style><script type="text/javascript"src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.js"></script><script type="text/javascript" src="../barcode/jquery-barcode.js"></script><script>$(document).ready(function() {'+first+'window.print();window.close();});</script></head><body>'+second+'</body></html>';
        barcode.document.open();
        barcode.document.write(html);
        barcode.document.close();

}); // end of click function 
```

我很确定问题出在以下几行：

```
var x=0;
for (x=0;x<isbn.length;x++) 
```

例如，如果 isbn 是 9780596515898，我在第一行得到 9，在第二行得到 7，在第三行得到 8，等等。我如何让它在一行上打印出整个 isbn？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T17:17:47.220

不，那两条线很好。但另一方面，这两个...

```
var isbn="";
...
isbn += $(this).find('#tableISBN').html(); 
```

这构成`isbn`了一个字符串。每次向其中添加 isbn 时，您只是使字符串变长。 `"string".length`将告诉您该字符串中的字符数，这就是每次迭代获得一个字符的原因。

You want an array instead, which you append items to with the `[].push()` method. `[].length` will tell you the number of items in that array.

```
var isbn = [];
...
isbn.push($(this).find('#tableISBN').html());
for (var x=0; x<isbn.length; x++) {
  isbn[x]; // one isbn
} 
```

# git - 使 .gitignore 忽略 tmp 目录中的嵌套文件夹

> ID：11869732
> 
> 赞同：1
> 
> 时间：2012-08-08T17:14:05.950
> 
> 标签：git

这是我的 .gitignore 文件

```
.bundle
db/*.sqlite3*
log/*.log
*.log
tmp/*
doc/
*.swp
*~
.project
.DS_Store
log/*
Gemfile.lock 
```

那么为什么它一直在说这样的话：

```
# Changes not staged for commit:
#   modified:   tmp/cache/assets/E04/890/sprockets%2F2f5173deea6c795b8fdde723bb4b63af 
```

ie 为什么不忽略我的 tmp 目录？由于文件和目录名称似乎是随机的，我不认为我可以明确添加它们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T17:15:10.353

自己放`tmp/`一条线就行了，不是`tmp/*`。

# msmq - 设计大容量 MSMQ

> ID：11869734
> 
> 赞同：1
> 
> 时间：2012-08-08T17:14:13.723
> 
> 标签：msmq, netmsmqbinding, msmq-wcf

我们有许多发送数据包的通信服务器。我们希望将来自这些服务器程序的这些数据包存储在 MSMQ 中，直到更新程序处理它们。数据丢失一直是一个问题，我们希望不丢失来自这些服务器程序的任何数据包，并希望有一个高效和高性能的解决方案。

最好的设计方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T17:28:33.117

好吧，您需要做两件基本的事情才能开始。首先，您需要修改默认安装以将存储位置移动到镜像驱动器和/或与该服务器上操作系统引导的驱动器不同的驱动器。此外，您还需要确保有足够的空间来保存排队的消息，具体取决于您正在考虑的数量。[本文](http://blogs.msdn.com/b/johnbreakwell/archive/2009/02/09/changing-the-msmq-storage-location.aspx)涵盖了这一点。

其次，您需要使用事务和日志来确保可靠性。这既是编程问题又是基础架构问题，因此您可以从查看[本文](http://msdn.microsoft.com/en-us/library/ms978430.aspx)开始，然后了解如何正确针对 MSMQ 进行编程的一般指南。[例如，如果您从未使用过 MSMQ，这](http://www.c-sharpcorner.com/UploadFile/klaus_salchner/MSMQ11292005035019AM/MSMQ.aspx)是一个很好的起点，尽管它相当基础。如果您打算使用 MSMQ 作为 WCF 的绑定/传输，那么您几乎已经涵盖了管道部分；这只是配置您的服务以处理您认为您将看到的数量和流量的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T10:53:07.747

> 我们有许多发送数据包的通信服务器。

存储“数据包”时，我建议将`[Serializable]`.NET 对象写入 WCF，主要是因为 WCF 可以将它们透明地读/写到 MSMQ。这将更容易使用，但如果您的数据包是 TCP/IP 或二进制数据包，您将需要打开“排序”，以确保它们按照放置的确切顺序进入队列。

MSMQ 也有会话，因此如果您想将项目组合在一起，这是可能的。WCF 不做此保证。您需要为此编写自定义代码，但这只是为特定会话中的每条消息分配唯一 ID 的情况。

> 数据丢失一直是一个问题，我们不希望丢失来自这些服务器程序的任何数据包

MSMQ 可以将数据持久保存到磁盘，因此如果服务器出现故障，它的队列会被保留。MSMQ 可以将队列保存在内存中，这样效率更高，但崩溃/重启不会保留队列信息。

> 并想要一个高效（良好的性能）

MSMQ 的性能相当好。持久化到磁盘的开销很小，但这只是由于磁盘写入。如果性能包括多线程，则 MSMQ 不提供此功能，因为队列是顺序的，因此必须按顺序处理。但这是典型的队列技术。

MSMQ 也有 4MB 的最大消息大小，因此请记住要通过网络发送的内容。

唯一的另一件事是 MSMQ 不是大规模可扩展的。其主要目标是保证交付。如果您发布*数百万*个数据包，它们将到达目的地，但 MSMQ 确实具有将消息推送到其他机器的有限能力。它运行一个类似 ThreadPool 的系统，因此如果这也是一个要求，它将无法扩展。

我还在#msmq-wcf wiki 中添加了信息，其中包含写入数据的基本示例。

# php - 每次我想在 PHP 中运行查询时都应该初始化 MySQL 吗？

> ID：11869736
> 
> 赞同：3
> 
> 时间：2012-08-08T17:14:16.607
> 
> 标签：php, mysql, mysqli

我有一个小（而且很愚蠢）的问题：我正在使用 mysqli 和 MySQL 服务器构建一个 PHP 应用程序。当应用程序被加载时，一个名为 $database 的变量被初始化使用

```
$database = new mysqli($dbHost, $dbUser, $dbPassword, $dbName); 
```

当然，这非常有效。如果我创建一个语句来进行查询：

```
$stmt = $database->prepare('SELECT a, b, c FROM table WHERE a = ?'); 
```

这仍然有效。但是，如果我尝试在不关闭前一个语句的情况下创建另一个语句，则有时可行，有时现在可行。创建语句失败时我得到的错误是：

```
Fatal error: Call to a member function bind_param() on a non-object 
```

我的问题是：为什么？我应该怎么做，每次我想创建一个新语句（并且我有另一个打开）时打开一个连接（新的mysql（...））？

**例子**

```
$stmt = $database->prepare('SELECT a, b, c FROM table WHERE a = ?');
$stmt->bind_param('i', $aValue);
$stmt->execute();
/* do some other operations, without closing $stmt */
$stmt2 = $database->prepare('INSERT INTO table2 (e, f) VALUES (? ,?)');
// Now, $stmt2 isn't initialized, so when the next line is run, the app fails
$stmt2->bind_param('ss', $someValue, $anotherValue); 
```

如果，之前

```
$stmt2 = $database->prepare('INSERT INTO table2 (e, f) VALUES (? ,?)'); 
```

我添加一个简单的

```
$stmt->close(); 
```

所有作品都没有任何问题。那么，问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T18:40:19.430

在从前一个获取所有结果之前，您不能运行另一个查询。否则，您将不得不进行单独的连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T17:22:49.903

你还记得 bind_param & execute 吗？：

```
$stmt->bind_param("s", $string);
$stmt->execute();
//etc.. 
```

或者

```
$stmt->bind_param("i", $int);
$stmt->execute();
//etc.. 
```

如果您想要多个查询：查看`multi_query`

# r - 在 R 中比较时，相等的数字显示为 false

> ID：11869742
> 
> 赞同：-1
> 
> 时间：2012-08-08T17:14:46.047
> 
> 标签：r, rounding

> **可能重复：**
> [在 R 中，这两者有什么区别？](https://stackoverflow.com/questions/2227734/in-r-what-is-the-difference-between-these-two)
> [R中的浮点问题？](https://stackoverflow.com/questions/6874867/floating-point-issue-in-r)

这是我创建的代码的一部分。当我终于意识到应该为 TRUE 的比较被 R 计算为 FALSE 时，我花了几天时间寻找问题。我在 Windows 上使用 R 2.14.2 64 位。这是重现问题的代码。

```
concList= c(1.15, 1.15, 1.15 ,1.15 ,1.15 ,1.15 )
concList=concList-0.4
a=sum(concList)
b=length(concList)*0.75
str(a)
str(b)
print(a==b) 
```

即使它们显示为完全相同的数字，最后一次打印也会导致 FALSE。我认为这可能是 R 的浮点数值表示上的一些问题，所以我添加了下面的代码来解决这个问题。

```
a=round(a,1)
b=round(b,1)
print(a==b) 
```

我的问题是，有没有更优雅的解决方案？这是一个应该报告的错误吗？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T17:16:50.290

因为它们不是完全相同的数字。由于计算机对数字的表示，它们的差异很小，也称为[浮点错误](http://floating-point-gui.de/basic/)：

```
> a - b
[1] -8.881784e-16 
```

Jon Skeet 有[一篇关于这个问题的优秀博客文章，它](https://msmvps.com/blogs/jon_skeet/archive/2009/11/02/omg-ponies-aka-humanity-epic-fail.aspx)[会](https://stackoverflow.com/questions/7011184/floating-point-comparison) [定期](https://stackoverflow.com/questions/7834028/i-read-it-on-jon-skeet-blog-and-now-i-want-to-know-the-answer)出现在 Stack Overflow 上。

正如@mrdwab 在评论中建议的那样，您应该使用它`all.equal(a, b)`来测试*近似*相等。

# twitter-bootstrap - 将标题锁定到页面顶部 Twitter 引导程序

> ID：11869743
> 
> 赞同：4
> 
> 时间：2012-08-08T17:14:48.983
> 
> 标签：twitter-bootstrap

我注意到，当您使用 twitter bootstrap 滚动页面时，它会将导航栏锁定在屏幕顶部。`<thead>`我想知道当它滚动到它时是否可以将它锁定在那里。不确定这是否相关，但是当我打印时，它会将导航栏放在每一页的顶部，我希望再次这样做`<thead>`。

我不知道从哪里开始，如果有任何建议或正确方向的意见，我将不胜感激。

# ruby-on-rails - 简单 ActiveRecord.find 的 Ruby 错误

> ID：11869744
> 
> 赞同：0
> 
> 时间：2012-08-08T17:14:50.087
> 
> 标签：ruby-on-rails

我正在编写一些 rake taks 来使用简单的 find 方法查找对象，如下所示：

```
skill = Mastery.find(:first, :conditions =>  [ "tree = ? AND tier = ? AND column = ?",
              i.to_s,
              row_index.to_s,
              col_index.to_s
            ]) 
```

这在本地运行良好。但是，当我部署到生产环境时，服务器出现故障并响应以下错误：

```
Mysql2::Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'column = '1') LIMIT 1' at line 1: SELECT  `masteries`.* FROM `masteries`  WHERE (tree = '1' AND tier = '1' AND column = '1') LIMIT 1 
```

我`mysql2`在我的 Rails 应用程序中使用 gem。知道我能做些什么来解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T17:23:40.137

“列”是否可能是该特定版本的 MySQL 的保留字？ [http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

MySQL 可能会给出错误，因为您使用保留字作为列名。

# c++ - 如何将 MVS C++ 代码转换为可执行应用程序？

> ID：11869755
> 
> 赞同：3
> 
> 时间：2012-08-08T17:15:14.093
> 
> 标签：c++

所以我用Microsoft Visual Studio C++（2008版）做了一个小程序，我想把它转换成.exe格式。

我知道我可以在我的项目目录中找到 .exe，但是它只能在我自己的 PC 上运行良好。当我将它发送给其他人（没有安装 Visual Studio 或任何东西）时，它不会运行。

我已经阅读了一些关于此的内容，它似乎是关于“链接”的。现在我对链接一无所知，我现在也不急于深入了解它......

我只想让我非常简单的程序（编辑和创建文本文件）在任何计算机上的 .exe 程序中运行。这是可能的，如果是这样 - 怎么做？

你能指导我完成这些步骤吗？我对编程很陌生，所以我真的需要这方面的帮助。

先感谢您...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T17:19:31.940

您发送的文件已经是一个 exe 文件，但它很可能是该程序的调试版本。此外，您需要查看是否链接到其他 DLL，如果是，您也应该将它们与程序一起分发。

由于您有一个简单的程序，很可能您没有其他 DLL 依赖项，因此第一步尝试在发布模式下编译。VS 顶部会出现一个下拉菜单，其中`Debug`和`Release`,`Debug`当前处于选中状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T17:22:45.643

您已经拥有通过链接从您创建的 .cpp 文件编译的所有 .obj 文件创建的 .exe 文件。再说一遍，链接已经在幕后发生了。但是，还有另外两个问题。首先，您可能已经在调试模式下编译了它。为了在另一台 Windows 机器上运行您的程序，最好在发布模式下编译它。此外，如果您的程序使用 DLL，例如用于 MFC 类，那么您还需要将这些 DLL 复制到另一台计算机。为了正确执行此操作，您应该查看创建一个`setup.exe`文件，该文件将正确安装您的程序和所有必需的 DLL。有一些工具可以帮助您执行此操作，例如 InstallShield。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T17:23:14.710

我认为您应该安装 Visual C++ 库的运行时组件：在未安装 Visual C++ 2008 的计算机上运行使用 Visual C++ 开发的应用程序所需的“Microsoft Visual C++ 2008 Redistributable Package (x86)”。 [http://www.microsoft.com/en-us/download/details.aspx?id=29](http://www.microsoft.com/en-us/download/details.aspx?id=29)

# sql - 从过程返回数据集时，有没有办法更改列的类型？

> ID：11869761
> 
> 赞同：0
> 
> 时间：2012-08-08T17:15:51.230
> 
> 标签：sql, sql-server-2005

我基本上想做这样的事情：

```
SELECT MYCOLUMN AS 'MYALIAS' VARCHAR(500) 
FROM MYTABLE 
```

我正在做的是这样的：

```
SELECT COLUMN1 AS 'TEXT',
COLUMN 2 AS 'VALUE'
FROM MYTABLE 
```

`COLUMN2`是一`INT`列，但是我需要使用 UNION 附加一个字符串值作为“其他”选择。有没有办法返回该列`VARCHAR`而不是事先实际构建表并使用`INSERT INTO`a `CONVERT()`？如果没有，没什么大不了的，我只是想看看是否有一种巧妙的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T17:20:14.417

您始终可以将列转换为另一种类型：

```
SELECT 
    COLUMN1,
    CAST(COLUMN2 AS VARCHAR(500))
FROM MYTABLE 
```

您拥有的方法 ( *`AS 'TEXT'`*) 只为列定义了一个别名 - 一个不同的名称 - 它不会**以**任何方式影响数据类型。

# unit-testing - maven :: 在多模块项目中仅运行单个测试

> ID：11869762
> 
> 赞同：87
> 
> 时间：2012-08-08T17:15:53.923
> 
> 标签：unit-testing, maven, continuous-integration

有没有办法提供一些命令行参数以跳过所有测试，但在某个模块上跳过一个？所以每次我需要运行另一个测试时我都不需要更改 pom.xml 吗？

例如，我想在 TeamCity 上创建构建配置，并提供命令行参数以在某个模块中仅运行单个测试。下次我需要更改它并运行另一个测试，依此类推。

也许这不是 CI 的用途，但仍然如此。

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2013-05-03T01:38:09.127

我假设您已经阅读了有关[在 surefire 下运行单个测试](http://maven.apache.org/surefire/maven-surefire-plugin/examples/single-test.html)的文档？他们没有告诉你的是如何在子模块中做到这一点：

```
mvn test -Dtest=testname -pl subproject 
```

`subproject`包含该测试的项目在哪里。从 mvn 手册页：

> -pl,--projects arg 要构建的指定反应器项目的逗号分隔列表，而不是所有项目。可以通过 [groupId]:artifactId 或其相对路径指定项目。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2017-11-26T06:03:45.130

对于依赖于要构建的其他子模块的项目，我看到的其他答案并不完整。一种选择是运行`mvn install`以将所需的 jar 安装到`~/.m2/...`中，但该选项不是很“干净”。

以下命令将构建子模块，并仅运行指定的测试类。这将在父模块级别运行。此外，无需指定子模块名称。

```
mvn test -DfailIfNoTests=false -Dtest={test_class_name} -am 
```

*顺便说一句，这也可以`mvn clean test -Dfa.....`。我有一个`clean`在运行测试时总是运行的习惯。*

References..
`-am`将使所有其他子模块。
`-DfailIfNoTests=false`不会使整个过程失败，因为我们不打算在其他模块中运行测试。
`-pl`不需要选项，因为`-am`已经在构建所有内容

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2015-12-12T13:47:48.050

如果要测试的模块依赖于其他项目，解决方案通过将命令更改为：

```
mvn test -DfailIfNoTests=false -Dtest=testname -pl subproject 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-19T22:16:41.413

FWIW，如果您有一个多模块项目，您可以使用此命令在父目录中运行所有测试。

```
mvn test -pl subproject 
```

`subproject`可以通过运行以下命令找到 的名称，通常为`group-id:artifact-id`.

```
mvn help:active-profiles 
```

# facebook - Facebook response.post_id 组成

> ID：11869763
> 
> 赞同：0
> 
> 时间：2012-08-08T17:15:57.043
> 
> 标签：facebook, response, share, userid

我想确定第一部分是否

```
response.post_id 
```

Facebook 在分享操作后发回前：500716428_211026529025294 始终是 Facebook 用户 ID（500716428）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T21:47:42.063

我很确定，因为永久链接看起来像

```
https://www.facebook.com/permalink.php?story_fbid=211026529025294&id=500716428 
```

# mysql - 三重连接查询显示重复的行

> ID：11869767
> 
> 赞同：0
> 
> 时间：2012-08-08T17:16:20.717
> 
> 标签：mysql

是什么导致联接表的查询显示重复数据。我已经尝试过 group by ，它只对一列进行分组，并为其他列显示相同的数据，使其无用且与众不同。这是我正在运行的查询。我已经提取了运行此查询的 3 个表，它位于此处：[http](http://pastie.org/4413153) ://pastie.org/4413153 这是查询：

```
select
pov.products_options_values_id,
pov.products_options_values_name,
pov.color_code,
inv.model,
inv.quantity,
img.id
from products_options_values as pov

left join tbl_inventory as inv
on pov.products_options_values_id = inv.color_id

inner join products_images img
on img.products_id = inv.products_id
where img.products_id = '301' 
```

这是输出的屏幕截图。（注意 3 条记录每条打印 3 次。） ![在此处输入图像描述](../Images/1b2d2b74f8fd900e7e0e8924dfbe8f66.png)

我期望从这个查询中得到的结果是：（截图） ![在此处输入图像描述](../Images/f3b84af047101639f4eee3d90b4e02e4.png)

这是将添加此查询的页面的屏幕截图。

> 抱歉，屏幕截图与我想要做的不匹配，但你会得到图片。

![在此处输入图像描述](../Images/47dc3f29f15b1aad81f987f789531ded.png)

颜色名称将在选择下拉列表中使用，相关的颜色十六进制值将在彩色框中使用。这些框的用途是当您将鼠标悬停在左侧图像上时，左侧的图像将更改为我提到的需要在查询中的图像 ID 值。有一个 ajax 调用可以获取该图像 id 值并在左侧显示其关联的图像。

tbl_inventory 及其数量计数的目的是，如果特定颜色的数量为 0，则该颜色及其关联的十六进制将不会在下拉列表或框上可见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T18:47:28.560

实际上，没有重复。3 个“重复”记录每个都有不同的`id`值。(65,66,67) 这使得每一个都是独一无二的。如果`img.id`从 SELECT 子句中删除并添加 DISTINCT，它将删除“重复”记录。

```
select distinct
pov.products_options_values_id,
pov.products_options_values_name,
pov.color_code,
inv.model,
inv.quantity
from products_options_values as pov
   . . .
where img.products_id = '301' 
```

# .htaccess - 如何禁用图像编码为“data:image/png;base64 ....”？

> ID：11869769
> 
> 赞同：0
> 
> 时间：2012-08-08T17:16:40.760
> 
> 标签：.htaccess, base64, mod-pagespeed

我在我的 .htaccess 文件中启用了此功能，以加快图像加载过程，但无法弄清楚如何禁用它。

我的 .htaccess 文件是。

```
<IfModule pagespeed_module>
   ModPagespeed on
ModPagespeedEnableFilters combine_css
ModPagespeedEnableFilters inline_css
ModPagespeedEnableFilters inline_javascript
ModPagespeedEnableFilters collapse_whitespace
ModPagespeedEnableFilters elide_attributes
ModPagespeedEnableFilters rewrite_javascript
ModPagespeedEnableFilters recompress_images
ModPagespeedEnableFilters inline_images
ModPagespeedEnableFilters remove_comments
ModPagespeedEnableFilters remove_quotes
ModPagespeedEnableFilters rewrite_css
ModPagespeedEnableFilters trim_urls
ModPagespeedEnableFilters move_css_to_head
<FilesMatch "\.(jpg|jpeg|gif|png|js|css)$">
        Header unset Etag
        Header set Cache-control "public, max-age=1814400"
</FilesMatch> 
```

我还有一个问题：我的页面包含 150 张 3-8 kb 的小图片，包括重复图片，所有图片都在我的托管目录中。

当我用谷歌获取我的页面时，它显示“data:image/png;base64....”，并且编码文本占用了近 2600 个字符空间，这导致获取部分内容。

我想知道这是正常的还是我应该禁用这个图像编码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T18:12:14.763

Based on your .htaccess config, you have `inline_images` enabled, which is why you're seeing the data URI's in your document. Two solutions:

1.  disabled image inlining
2.  lower the inlining KB threshold

The reason for inlining small images is that for small requests the HTTP and TCP overhead can be very high.

# python - Numpy：在给定开始和持续时间列表的情况下，查找时间 t 的活动票数

> ID：11869772
> 
> 赞同：1
> 
> 时间：2012-08-08T17:16:51.007
> 
> 标签：python, numpy

我有一个表示票的开始时间及其持续时间的元组列表

```
tickets = [(start1, duration1), (start2, duration2),...] 
```

我想知道在给定时间 t 有多少票处于活动状态。

虚拟函数：

```
def activity(t, tickets):
    tickets.sort()
    gamma = 0
    for point, duration in tickets:
    if point < t and t < point + duration:
        gamma += 1
    return gamma 
```

如果要计算时间增加的向量的活动，会花费太多时间并且很愚蠢。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T17:26:41.990

**使用内置函数**

```
def activity(t):
       return  len(filter(lambda x:x[0]<t<x[0]+x[1],tickets)) 
```

过滤器在较低级别完成，并且比 for 循环更优化，因此它应该更快......它不依赖排序，它只返回剩余内容的计数

**使用 numpy**

```
import numpy as np
tickets = np.array([(start1, duration1), (start2, duration2),...])

def activity(t,tickets):
    t1 = tickets[tickets[:,0]<t] #start times before t
    return t2[t2[:,0]+t2[:,1]>t]   #start+duration after t 
```

**使用您的代码**，因为它已排序，一旦开始大于 t，您总是可以退出循环，因此您不会评估所有项目

```
def activity(t, tickets):
    tickets.sort(key=lambda x:x[0]) #sort by start time
    gamma = 0
    for point, duration in tickets:
        if point < t and t < point + duration:
              gamma += 1
        elif point > t:
              break ; #we can quit looking
    return gamma 
```

您还可以对列表进行预排序并确保在排序位置插入项目（保持列表排序，这样您就不必每次都对其进行排序）

[编辑] 更新以更正 numpy 函数

```
>>> x=np.array([(1,2),(2,2),(1,4),(1,1),(3,2)])
>>> x
array([[1, 2],
       [2, 2],
       [1, 4],
       [1, 1],
       [3, 2]])
>>> def activity(t,tickets):
...     tmp = tickets[tickets[:,0] < t]
...     return tmp[tmp[:,0]+tmp[:,1] > t]
...
>>> activity(2,x)
array([[1, 2],
       [1, 4]])
>>> activity(3,x)
array([[2, 2],
       [1, 4]]) 
```

# java - 创建文件失败

> ID：11869776
> 
> 赞同：-2
> 
> 时间：2012-08-08T17:17:17.830
> 
> 标签：java, file-io

我有一个在 tomcat 上运行的 web 服务，并且想要执行一些 fileIO。

```
File f = new File(test.txt);
new BufferedReader(new FileReader(test.txt)); 
```

结果：

```
java.io.FileNotFoundException: test.txt
    at java.io.FileInputStream.open(Native Method)
    at java.io.FileInputStream.<init>(FileInputStream.java:138)
    at java.io.FileInputStream.<init>(FileInputStream.java:97)
    at java.io.FileReader.<init>(FileReader.java:58) 
```

我错过了什么吗？将我的代码作为本地独立应用程序运行可以按预期工作。但是在tomcat上会导致异常。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T17:20:58.327

您需要先创建文件。File 对象实际上只是文件路径的表示，而不是文件本身。

```
f.createNewFile() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T17:24:06.483

```
if (!f.exists())  
{  
   f.createNewFile();   
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T18:13:22.640

> Running my code as a local standalone app works as expected. But on tomcat results in exception.

You are using a path relative to the working directory. When you run it as a stand alone app, I assume you have the file in the directory you run the app from. The working directory for a web server is often the `bin` of the server so you are saying you expect the file to be there.

Using a full path, or using a resource of your application with getResourceAsInputStream() is a better idea.

# c# - 使用 Linq 将日志解析为文本

> ID：11869778
> 
> 赞同：0
> 
> 时间：2012-08-08T17:17:25.733
> 
> 标签：c#, .net, linq, parsing, logging

我有一个示例日志，我正在尝试找到获取信息的最佳解决方案：主要`time stamp`是一个特定的字符串。

示例日志输出：每个都在 1 行

```
####<Jun 22, 2012 12:54:18 PM CDT> <Notice> <WebLogicServer> <lname> <dname> <main>
<<WLS Kernel>> <> <BEA-000360> <Application started in RUNNING mode> 
```

每个日志行都有 4 个开始`#`标记，后跟`<Timestamp>`与我的场景相关的所有片段都有`<>`括起来的括号，我想要一个信息数组，其中索引基于从左到右的读取。

对于每个`<>`括号，我想将其信息存储在 lineArray 中。

```
using (var reader = new StreamReader(@"C:\Projects\test.txt"))
{
    foreach(var line in ReadLines(reader)) 
    {
          //add logic to parse and read info into brackets
        String sLine = (String)line;
        String splitD = sLine.Split("<>")[0];
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T17:27:46.690

好吧，我不是正则表达式专家，但这应该可行：

```
string test = "####<Jun 22, 2012 12:54:18 PM CDT> <Notice> <WebLogicServer> <lname> <dname> <main>"
    + "<<WLS Kernel>> <> <BEA-000360> <Application started in RUNNING mode>";
var pattern = @"\<+(.*?)\>+";
var matches = Regex.Matches(test, pattern);
foreach (Match m in matches)
{
    Console.WriteLine(string.Format("-{0}-", m.Groups[1]));
}

Console.ReadKey(); 
```

`-`输出（字符之间的实际匹配）：

```
-Jun 22, 2012 12:54:18 PM CDT-
-Notice-
-WebLogicServer-
-lname-
-dname-
-main-
-WLS Kernel-
--
-BEA-000360-
-Application started in RUNNING mode- 
```

* * *

```
string test = "####<Jun 22, 2012 12:54:18 PM CDT> <Notice> <WebLogicServer> <lname> <dname> <main> <<WLS Kernel>> <> <BEA-000360> <Application started in RUNNING mode>"
    + Environment.NewLine + "####<Jun 23, 2012 12:54:18 PM CDT> <Notice> <WebLogicServer> <lname> <dname> <main> <<WLS Kernel>> <> <BEA-000360> <Application started in RUNNING mode>"
    + Environment.NewLine + "####<Jun 24, 2012 12:54:18 PM CDT> <Notice> <WebLogicServer> <lname> <dname> <main> <<WLS Kernel>> <> <BEA-000360> <Application started in RUNNING mode>";

List<Foo> foo = new List<Foo>();
using (StringReader reader = new StringReader(test))
{
    string line;
    while ((line = reader.ReadLine()) != null)
    {
        string pattern = @"\<+(.*?)\>+";
        var matches = Regex.Matches(line, pattern);

        foo.Add(new Foo
            {
                Timestamp = matches[0].Groups[1].ToString(),
                Field2 = matches[1].Groups[1].ToString()
            });
    }
} 
```

输出：

> 3 个 Foo 对象的列表，每个对象都有不同的时间戳（6 月 22 日、6 月 23 日、6 月 24 日）

# c# - JIRA Rest API 使用 C# 登录

> ID：11869780
> 
> 赞同：15
> 
> 时间：2012-08-08T17:17:36.077
> 
> 标签：c#, rest, jira

我在下面编写了 C# 代码来登录 JIRA Rest API：

```
var url = new Uri("http://localhost:8090/rest/auth/latest/session?os_username=tempusername&os_password=temppwd");
var request = WebRequest.Create(url) as HttpWebRequest;
if (null == request)
{
 return "";
}
request.Method = "POST";
request.ContentType = "application/json";
request.ContentLength = 200;
request.KeepAlive = false;
using (var response = request.GetResponse() as HttpWebResponse)
{
} 
```

当我执行此操作时，应用程序继续运行而不返回任何响应。请建议这是否是使用 REST API 调用 JIRA 登录的正确方法

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-25T11:26:37.553

对于基本身份验证，您需要以 base64 编码发送用户名和密码。指南可以在 atlassians 开发者页面上的 API 示例中找到： [https](https://developer.atlassian.com/display/JIRADEV/JIRA+REST+API+Example+-+Basic+Authentication) ://developer.atlassian.com/display/JIRADEV/JIRA+REST+API+Example+-+Basic+Authentication ，如果您在 C# 中执行此操作，则需要以以下格式发送标头中的编码数据：

**“授权：基本 [编码凭证]”**

这是一个简单的例子：

```
public enum JiraResource
{
    project
}

protected string RunQuery(
    JiraResource resource, 
    string argument = null, 
    string data = null,
    string method = "GET")
{
    string url = string.Format("{0}{1}/", m_BaseUrl, resource.ToString());

    if (argument != null)
    {
        url = string.Format("{0}{1}/", url, argument);
    }

    HttpWebRequest request = WebRequest.Create(url) as HttpWebRequest;
    request.ContentType = "application/json";
    request.Method = method;

    if (data != null)
    {
        using (StreamWriter writer = new StreamWriter(request.GetRequestStream()))
        {
            writer.Write(data);
        }
    }

    string base64Credentials = GetEncodedCredentials();
    request.Headers.Add("Authorization", "Basic " + base64Credentials);

    HttpWebResponse response = request.GetResponse() as HttpWebResponse;

    string result = string.Empty;
    using (StreamReader reader = new StreamReader(response.GetResponseStream()))
    {
        result = reader.ReadToEnd();
    }

    return result;
}

private string GetEncodedCredentials()
{
    string mergedCredentials = string.Format("{0}:{1}", m_Username, m_Password);
    byte[] byteCredentials = UTF8Encoding.UTF8.GetBytes(mergedCredentials);
    return Convert.ToBase64String(byteCredentials);
} 
```

（JiraResource 只是我用来决定使用 API 的哪一部分的枚举）

我希望这个能帮上忙！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-10-22T06:20:01.620

这是一个更简单的解决方案，可以根据需要工作：

```
var mergedCredentials = string.Format("{0}:{1}", username, password);
var byteCredentials = Encoding.UTF8.GetBytes(mergedCredentials);
var encodedCredentials = Convert.ToBase64String(byteCredentials);

using (WebClient webClient = new WebClient())
{
    webClient.Headers.Set("Authorization", "Basic " + encodedCredentials);

    return webClient.DownloadString(url);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-03-05T11:13:38.480

如果您不想在每个请求中对您的凭据进行编码，这里是如何使用 cookie 进行的。

请求 cookie 时，您不需要在标头上添加任何授权。此方法将接受带有用户名和密码以及 URL 的 JSON 字符串。它将返回 cookie 值。

```
public async Task<JiraCookie> GetCookieAsync(string myJsonUserNamePassword, string JiraCookieEndpointUrl)
{
    using (var client = new HttpClient())
        {
            var response = await client.PostAsync(
                JiraCookieEndpointUrl,
                new StringContent(myJsonUserNamePassword, Encoding.UTF8, "application/json"));
            var json = response.Content.ReadAsStringAsync().Result;
                var jiraCookie= JsonConvert.DeserializeObject<JiraCookie>(json);
                return jArr;
         }
}

public class JiraCookie
{
    public Session session { get; set; }
}

public class Session
{
    public string name { get; set; }
    public string value { get; set; }
} 
```

当我使用 url: [http://[baseJiraUrl]/rest/auth/1/session](http://[baseJiraUrl]/rest/auth/1/session)调用它时，它返回以下 JSON 响应：

```
{
"session" : -{
"name" : JSESSIONID,
"value" : cookieValue
} 
```

请记住，上面的 URL 在我使用的 JIRA 版本中有效，并且可能会因您使用的版本而异。阅读 JIRA API 文档以获取您正在使用的版本的正确 URL。我正在使用以下内容： [https ://docs.atlassian.com/software/jira/docs/api/REST/7.6.1/#auth/1/session](https://docs.atlassian.com/software/jira/docs/api/REST/7.6.1/#auth/1/session)

请记住，您必须存储 cookie 并在每个后续请求中使用它。查看有关如何将 cookie 添加到 HttpClient 请求的答案：[如何在 HttpClient 的 HttpRequestMessage 上设置 cookie](https://stackoverflow.com/questions/12373738/how-do-i-set-a-cookie-on-httpclients-httprequestmessage)。

完成 cookie（注销）后，只需发送与帖子相同 URL 的删除 http 请求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-02T13:19:44.487

为了在 Rest 中发布多部分内容，我使用[Tiny.RestClient](https://github.com/jgiacomini/Tiny.RestClient)。

```
var client = new TinyRestClient(new HttpClient(), "http://localhost:8090");

var strResult = await client.PostRequest("rest/auth/latest/session).
WithBasicAuthentication("username", "password")
ExecuteAsStringAsync(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-17T19:49:44.333

我调整了 RunQuery 代码，使其可以在今天（2018 年 4 月）运行。下面引用的加密/解密来自以下链接（我将其转换为扩展方法并将值放入环境中）。

[https://stackoverflow.com/questions/10168240/encrypting-decrypting-a-string-in-c-sharp](https://stackoverflow.com/questions/10168240/encrypting-decrypting-a-string-in-c-sharp)

[我从LinqPad](http://www.linqpad.net)成功执行了代码- 因此 RunQuery 之后的 Dump() 命令

```
private string _baseUrl = "https://xxxxxx.atlassian.net";
private string _username = "YourLogin";

void Main()
{
    RunQuery(JiraResource.project).JsonToXml().Dump();
}

public enum JiraResource { project }

private const string restApiVersion = "/rest/api/2/";

protected string RunQuery(  JiraResource resource,  string argument = null, string data = null, string method = "GET")
{
    string url = $"{_baseUrl}{restApiVersion}{resource}";

    if (argument != null) url = $"{url}{argument}/";

    var request = WebRequest.Create(url) as HttpWebRequest;
    request.ContentType = "application/json";
    request.Method = method;

    if (data != null)
    {
        using (StreamWriter writer = new StreamWriter(request.GetRequestStream()))
        {
            writer.Write(data);
        }
    }
    string base64Credentials = GetEncodedCredentials();
    request.Headers.Add("Authorization", "Basic " + base64Credentials);

    var response = request.GetResponse() as HttpWebResponse;
    string result = string.Empty;
    using (StreamReader reader = new StreamReader(response.GetResponseStream()))
    {
        result = reader.ReadToEnd();
    }
    return result;
}

private string GetEncodedCredentials()
{
    var encryptedPassword = Environment.GetEnvironmentVariable("PassEncrypted");
    var encryptionSalt = Environment.GetEnvironmentVariable("PassSalt");
    var password = encryptedPassword.Decrypt(encryptionSalt);

    var mergedCredentials = $"{_username}:{password}";
    var byteCredentials = UTF8Encoding.UTF8.GetBytes(mergedCredentials);
    return Convert.ToBase64String(byteCredentials);
}

public static class MyExtensions
{
    public static XElement JsonToXml(this string jsonData, bool isAddingHeader = true)
    {
        var data = isAddingHeader
            ? "{\"record\":" + jsonData + "}"
            : jsonData;

        data = data // Complains if xml element name starts numeric
            .Replace("16x16", "n16x16")
            .Replace("24x24", "n24x24")
            .Replace("32x32", "n32x32")
            .Replace("48x48", "n48x48");

        var result = JsonConvert.DeserializeXmlNode(data, "data");
        var xmlResult = XElement.Parse(result.OuterXml);
        return xmlResult;
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-08-02T10:06:03.137

```
static void Main(string[] args)
{
    using (WebClient wc = new WebClient())
    {
        wc.Headers.Add("Authorization", "Basic " + GetEncodedCredentials());

        string tasks = wc.DownloadString("yourjiraurl/search?jql=task=bug");
        var taskdetails = JsonConvert.DeserializeObject<TaskDetails>(tasks);
    }
}

static string GetEncodedCredentials()
{
    string mergedCredentials = string.Format("{0}:{1}", "UserName", "Password");
    byte[] byteCredentials = UTF8Encoding.UTF8.GetBytes(mergedCredentials);
    return Convert.ToBase64String(byteCredentials);
} 
```

# php - 使用 while 以正确的顺序在表中打印 sql 计数结果

> ID：11869781
> 
> 赞同：0
> 
> 时间：2012-08-08T17:17:39.217
> 
> 标签：php, arrays, count

我有 2 个`while`循环，一个在另一个循环中。

所以

```
while ($info5 = mysql_fetch_array($result5))
{

 print "</td>"; 
```

然后我有这个 sql 查询

```
 include('database.inc');

$sql6 = "SELECT count(checkins.placeID) as methoda FROM checkins, places, activities WHERE activities.actID=places.placeActivity AND checkins.placeID = places.placeID and checkins.cityID = ".$city." group by checkins.placeID order by checkins.placeID, activityName";

$result6=mysql_query($sql6);
$count=mysql_num_rows($result6);

while($row = mysql_fetch_array($result6))
    {
     echo $row["methoda"];
 }
      print "</td></tr></table>" ;

        }?> 
```

问题是我收到 1 个表，例如：

`Place1 -> 321`

`Place2 -> 321`

`Place3 -> 321`

顺序是正确的，但我将它作为数组接收！正确的应该是

`Place1 -> 3`

`Place2 -> 2`

`Place3 -> 1`

我不知道如何拆分数组`$row`，或者是转置问题，还是count命令已经堆叠等等。我真的不知道！请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T17:43:06.810

代码应该是这样的：

```
include('database.inc');

echo "<table>";

//first query....

while ($info5 = mysql_fetch_array($result5))
{

    $sql6 = "SELECT count(checkins.placeID) as methoda FROM checkins, places, activities WHERE activities.actID=places.placeActivity AND checkins.placeID = places.placeID and checkins.cityID = ".$city." group by checkins.placeID order by checkins.placeID, activityName";

    $result6=mysql_query($sql6);
    $count=mysql_num_rows($result6);

    echo "<tr>";
    while($row = mysql_fetch_array($result6))
    {
       echo "<td>".$row["methoda"]."</td>";
    }
    print "</tr>" ;

}?></table> 
```

根据您的要求对其进行编辑。注意`td`,`tr`和`table`标签的位置

# ajax - 跨域 XML 文件上的 $.ajax JSONP

> ID：11869784
> 
> 赞同：1
> 
> 时间：2012-08-08T17:17:46.387
> 
> 标签：ajax, jquery

我正在尝试从跨域源读取 XML，并且无法将回调响应转换为字符串。如果我在 chrome 中查看控制台，我会得到“资源解释为脚本，但使用 MIME 类型文本/xml 传输： http://mysite.com:2000/g7?callback=jQuery17209426668137311935_1344441190139&_= [1344441194148](http://mysite.com:2000/g7?callback=jQuery17209426668137311935_1344441190139&_=1344441194148) ”

然后是“未捕获的语法错误：意外的令牌 <”

我在这里想念什么？

$.ajax({ type: 'GET', url: 'http://mysite.com:2000/g7', dataType: 'jsonp', mimeType: 'text/xml' });

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T17:20:13.130

> 我在这里想念什么？

JSONP 推断包含在回调中的 JSON 响应的事实。这不适用于 XML。因此，您必须修改远程服务器端脚本，使其返回 JSONP，而不是 XML。例如，响应可能如下所示：

```
callback({ xml: '<node>foo bar</node>' }); 
```

但是如果远程服务器直接发送 XML，由于同源策略限制，您不能使用 AJAX 调用它。

# c# - 如何在 Server Control / C# 中获取 ID？

> ID：11869786
> 
> 赞同：1
> 
> 时间：2012-08-08T17:17:47.963
> 
> 标签：c#, user-controls

我尝试编写一个简单的服务器控件来控制我网站中的横幅。

它应该是这样的：

```
<Banners:mng_bnr ID="Upper_bnr / aside_bnr / bottom_bnr / etc" runat="server" /> 
```

然后控件将类似于：

```
 <%@ Control Language="C#" %>

<script runat="server">

 protected void Page_Load(object sender, EventArgs e)
 {

 switch(which_banner)
 {
 case which_banner.upper_banner_wide: 
<!-- Ad code -->
 <script type="text/javascript"><!--
JS code
 </script>
 <script type="text/javascript"

 </script>
 <!-- *** Ad Code *** --> 
break;

case which_banner.upper_banner_small:
 <!-- Ad code -->
 <script type="text/javascript"><!--
JS code
 </script>
 <script type="text/javascript"

 </script>
 <!-- *** Ad Code *** --> 
break;

case which_banner.aside_336_280_top:

 <!-- Ad code -->
 <script type="text/javascript"><!--
JS code
 </script>
 <script type="text/javascript"

 </script>
 <!-- *** Ad Code *** --> 
```

但是，我不知道如何获取和处理每个控件的 ID（每个页面上应该有大约 5-6 个控件，每个控件都有自己的 ID - 这意味着不同的横幅）

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T18:02:13.470

这个帖子太模糊了。我*认为*您要问的是如何将横幅控件的 ID 从父页面传递到此控件。在这种情况下，你会做这样的事情：

```
 private string _bannerId = string.Empty;
 public string BannerId
 {
      get { return _bannerId; }
      set { _bannerId = value; }
 } 
```

然后你的开关看起来像这样：

```
 switch(_bannerId)
 {
     case "banner1":
     break;

     case "banner2":
     break; 
 } 
```

然后在您的父页面上，您将执行以下操作：

```
 <Banners:mng_bnr BannerId="Upper_bnr" runat="server" /> 
```

如果您想传递多个横幅 ID，我建议您使用集合或为每个横幅提供一个属性，但这实际上取决于您要实现的目标。

希望这可以帮助。

- 编辑 -

在编写必要的代码方面，有很多方法可以做到这一点。例如，您可以执行以下操作：

```
switch(_bannerId)
{
 case "banner1":
     scriptLiteral.Text = "<script>...</script>";
 break;

 case "banner2":
     scriptLiteral.Text = "<script>...</script>";
 break; 
} 
```

然后在您的控制下，您将拥有

```
<asp:Literal id="scriptLiteral" runat="server" /> 
```

不过，我可能会使用[RegisterClientScriptBlock](http://msdn.microsoft.com/en-us/library/system.web.ui.clientscriptmanager.registerclientscriptblock.aspx)。

# regex - 正则表达式：查找没有子字符串的字符串

> ID：11869793
> 
> 赞同：27
> 
> 时间：2012-08-08T17:18:16.453
> 
> 标签：regex

我有一个大文本：

```
"Big piece of text. This sentence includes 'regexp' word. And this
sentence doesn't include that word" 
```

我需要找到以' **this** '开头并以' **word** '结尾但**不**包含单词' **regexp** '的子字符串。

在这种情况下，字符串：“ `this sentence doesn't include that word`”正是我想要接收的。

如何通过正则表达式做到这一点？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-08-08T17:25:39.510

使用忽略大小写选项，以下应该有效：

```
\bthis\b(?:(?!\bregexp\b).)*?\bword\b 
```

示例：[http ://www.rubular.com/r/g6tYcOy8IT](http://www.rubular.com/r/g6tYcOy8IT)

解释：

```
\bthis\b           # match the word 'this', \b is for word boundaries
(?:                # start group, repeated zero or more times, as few as possible
   (?!\bregexp\b)    # fail if 'regexp' can be matched (negative lookahead)
   .                 # match any single character
)*?                # end group
\bword\b           # match 'word' 
```

每个单词的`\b`周围确保您不匹配子字符串，例如匹配 'thistle' 中的 'this' 或 'wordy' 中的 'word'。

这通过检查起始词和结束词之间的每个字符来确保排除的词不会出现。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-08T17:21:52.170

使用前瞻资产。

当你想检查一个字符串是否不包含另一个子字符串时，你可以这样写：

```
/^(?!.*substring)/ 
```

您还必须检查 and 的行首`this`和行尾`word`：

```
/^this(?!.*substring).*word$/ 
```

这里的另一个问题是你不想找到字符串，你想找到句子（如果我理解你的任务的话）。

所以解决方案如下所示：

```
perl -e '
  local $/;
  $_=<>;
  while($_ =~ /(.*?[.])/g) { 
    $s=$1;
    print $s if $s =~ /^this(?!.*substring).*word[.]$/
  };' 
```

使用示例：

```
$ cat 1.pl
local $/;
$_=<>;
while($_ =~ /(.*?[.])/g) {
    $s=$1;
    print $s if $s =~ /^\s*this(?!.*regexp).*word[.]/i;
};

$ cat 1.txt
This sentence has the "regexp" word. This sentence doesn't have the word. This sentence does have the "regexp" word again.

$ cat 1.txt | perl 1.pl 
 This sentence doesn't have the word. 
```

# ant - 在 Artifactory 中创建本地存储库

> ID：11869795
> 
> 赞同：0
> 
> 时间：2012-08-08T17:18:19.370
> 
> 标签：ant, jenkins, artifactory

我刚刚开始在我们公司安装 Jenkins 以及 Artifactory 和 Ivy。

Jenkins 将调用我们的 ant 构建脚本，然后这些脚本将转向 Ivy 从本地 repo 中检索 jars（仅）。

我们希望有 2 个本地存储库：1 个用于我们的本地工件，1 个用于 3rd 方 jars。

我们的目的是确保开发人员仅检索已在 Artifactory 中由管理员“批准”的第 3 方 jar。

然后构建脚本将从本地存储库中获取。

所以我的问题是：我们如何设置本地存储库以包含构建的工件？如果 Artifactory 无法访问互联网，它如何检索第 3 方罐子？

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T18:23:52.617

我不确定我是否遗漏了一些东西，但是为您的构建工件设置本地存储库应该很简单，只需按照[Artifactory 文档中的说明进行操作](http://wiki.jfrog.org/confluence/display/RTF/Configuring+Repositories)即可。

您需要配置构建系统以将新工件发布到 Artifactory。如果您使用像 Maven 或 Ivy 这样的标准依赖管理工具，这也很简单，并且在 Artifactory 文档中进行了介绍。

为 3rd 方 JAR 保存一个单独的 repo 也不是太难；在我的公司，我们通过将 JAR 提交到源代码控制来做到这一点，这会触发我们的 CI 系统中的构建，将 JAR 发布到 Artifactory。

如果您想提供有关构建和 CI 设置的更多详细信息，我可以添加其他指南。

# dictionary - 为什么地图键不检索在地图中可以清楚地看到的值？

> ID：11869797
> 
> 赞同：0
> 
> 时间：2012-08-08T17:18:29.153
> 
> 标签：dictionary, clojure

以下键`:GIC-ID`不会返回其值`"999-99-9999"`。我试图找出原因。

以下是键 - 第一行包含 .csv 报告的列名。输出被格式化以防止滚动：

```
["AGY/DIV " "STS" "GIC-ID     " "LAST-NAME      " "FIRST-NAME     " 
"COVERAGE DESCRIPTION                                   " 
"PREMIUM  " "RUN-DATE" "BIL MO "] 
```

这是为隐私而修改的数据（输出格式以防止滚动）：

```
["666/0010" "ACT" "999-99-9999" "MARGE       " "SIMPSON          " 
"YE OLD PILGRIM FAMILY - INSURED                       " 
"0000.00" "123456789" "99999enter code here"] 
```

我得到包含键/列标题的第一列和使用以下内容创建的数据，包括将列名与每行数据压缩在一起。

```
(def gic-csv-inp (fetch-csv-data "billing_roster.csv"))
(def gic-csv-cols  (first gic-csv-inp))
(def gic-csv-data (rest gic-csv-inp))
(def zm2 (zipmap (map #(keyword %1) gic-csv-cols) (first gic-csv-data))) 
```

现在，从类似但不同的报告中提取的以下键和数据可以正常工作：

`:Employee_SSN "999-99-9999"`

那就是我可以提取键的值。

键肯定有问题，我当然可以纠正这些，比如删除空格等，但我不确定是什么问题。

谢谢。

## 编辑：

我的问题的答案是像这样修剪空格：

```
(:require [clojure.string :as cstr])
.
.
.
(def zm2 (zipmap (map #(keyword (cstr/trim %1)) gic-csv-cols) 
(first gic-csv-data))) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T17:38:38.163

修剪空间确实有效

```
(def zm2 (zipmap (map #(keyword (re-find #"[^\s]*" %1)) gic-csv-cols) (first gic-csv-data)))

=> (zm2 :GIC-ID)
"999-99-9999" 
```

[^\s]* 是匹配所有非空白字符的正则表达式

# ruby - ruby 中的方法是否类似于子程序？

> ID：11869802
> 
> 赞同：1
> 
> 时间：2012-08-08T17:18:44.550
> 
> 标签：ruby

我之前用 Basic 和 Pascal 编写了下面的程序，现在我将它移植到 Ruby。第 20..26 行中的 puts 代表在基本和帕斯卡中对子例程 (gosub..return) 的调用。我在 Ruby 中找不到子例程。我会为每一个创建一个方法吗？子程序是图形显示、大脑矩阵的操作等。重要的是，当它们完成时，我会回到同一个地方。

（如果有用：外部事件，例如按键，将值放入刺激矩阵中，当乘以大脑矩阵时，生成行为矩阵中的值。）执行第 20..26 行的更优雅的方法是也欢迎。

谢谢。

```
require 'matrix'
class Matrix
  def []=(i, j, x)
    @rows[i][j] = x
  end
end #code to allow putting individual elements in matrix at i,j

brain=  Matrix[ [0,0,0,0,99,0,0,0,0,1,0],
            [0,0,0,0,0,99,0,0,0,1,0],
            [0,0,0,0,0,0,99,0,0,1,0],
            [25,0,0,0,0,0,0,1,-1,1,-99],
            [0,23,0,0,0,0,0,1,-1,1,1],
            [0,0,24,0,0,0,0,1,-1,1,1],
            [0,0,0,22,0,0,0,1,-1,1,1] ]
stimulus=Matrix.column_vector([0,0,0,0,0,0,0,0,0,0,0])
behavior=Matrix.column_vector([0,0,0,0,0,0,0])

t=500 # t=threshold
behavior=brain*stimulus
if behavior[0,0] > t then puts "do poistive fixer" end
if behavior[1,0] > t then puts "do negative fixer" end
if behavior[2,0] > t then puts "show UCR" end
if behavior [3,0] > t then puts "show operant 1" end
if behavior[4,0] > t then puts "show operant 2" end
if behavior[5,0] > t then puts "show operant 3" end
if behavior[6,0] > t then puts "show operant 4" end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T17:29:00.997

是的，方法是可重用的代码块，就像子例程一样。

20-26 的最快重构如下所示：

```
puts "do positive fixer" if behavior[0,0] > t
puts "do negative fixed" if behavior[1,0] > t 
```

您是否更喜欢最低限度的节省是一个见仁见智的问题。

下一级重构可能就像将字符串放入数组一样简单（未经测试但很接近）：

```
do_this = [ "do positive fixer", "do negative fixer", ... ]
(0..6).each { |n| puts do_this[n] if behavior[n, 0] > t } 
```

正如 Tin Man 所说，您可以直接使用数组：

```
do_this.each_with_index { |s, n| puts s if behavior[n, 0] } 
```

等等。

# css - 如何使不可见的文本输入框在悬停时可见？

> ID：11869805
> 
> 赞同：1
> 
> 时间：2012-08-08T17:18:52.727
> 
> 标签：css, html, input, hover, invisible

它似乎对我不起作用！

**HTML**

```
 <div id="box1">
     <form action="">
         <input type="string" name="htmlcode" />
     </form>
 </div> 
```

**CSS**

```
#box1 {
    width:100px;
    height:100px;
    border-color:black 4px
}
input {
    display:none;
}
a:hover input{
    display:block;
} 
```

文本输入要么不可见，要么可见但不响应悬停

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T17:21:41.960

您没有`a`可以悬停以显示输入的标签...

将其更改为，`#box1:hover input{display:block;}`以便在您将鼠标移入框中时显示。

`border-color:black 4px`也是无效的。如果要设置边框颜色，只能给它一个颜色，不能给它颜色和大小。

这是一个[**演示**](http://jsbin.com/evujay/1/)，显示了已修复的这两个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T17:21:58.577

你没有`<a>`在`html`。尝试：`div:hover input{display:block;}`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T17:23:24.843

在你的CSS中你需要添加这个

```
#box1:hover input{display:block;} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T17:24:06.217

```
 #box1 { 
    width:100px;
    height:100px;
    border:4px solid black;
}
 input {display:none;}
 #box1:hover input{display:block;}​ 
```

正如其他人所提到的，您没有`a`标签，因此也要更改目标`:hover`。

还修复了边界声明。

[http://jsfiddle.net/XZvHh/](http://jsfiddle.net/XZvHh/)

# html-sanitizing - 谷歌卡哈没有建立

> ID：11869807
> 
> 赞同：0
> 
> 时间：2012-08-08T17:19:05.097
> 
> 标签：html-sanitizing, google-caja

我在哪里可以下载文件 html-css-sanitizer-minified.js？我宁愿下载文件也不愿自己构建 caja。原因：我尝试构建 caja 并得到以下错误。任何线索？

```
Version.set:
     [exec] Execute failed: java.io.IOException: Cannot run program "tools\svnve
rsion-nocolon": CreateProcess error=2, The system cannot find the file specified

Version.update:

build.info:

HtmlParser:
    [javac] Compiling 55 source files to c:\google-caja\third_party\java\htmlpar
ser\lib
    [javac] error: error reading c:\google-caja\third_party\java\jetty\lib\jetty
-util.jar; error in opening zip file
    [javac] error: error reading c:\google-caja\third_party\java\jetty\lib\jetty
.jar; error in opening zip file
    [javac] 2 errors

BUILD FAILED 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T23:44:35.700

Caja 不在 Windows 上构建。您可以在此处获取最新版本的消毒剂： [http ://www.gstatic.com/caja/5030/html-sanitizer-minified.js](http://www.gstatic.com/caja/5030/html-sanitizer-minified.js)

# android - 如何在android中使用整个屏幕作为按钮？

> ID：11869812
> 
> 赞同：-1
> 
> 时间：2012-08-08T17:19:48.193
> 
> 标签：android, screen

`onClick`当用户触摸屏幕的任何部分时，我怎样才能得到响应？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T01:56:50.240

在布局管理器中放置一个按钮。

并指定

```
fill_parent 
```

宽度和高度。

并删除按钮的边框。

这会奏效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T17:23:23.667

例如你有啊的`RelativeLayout` 意思，

```
RelativeLayout mLyout=(RelativeLayout)findViewById(R.id.layout01);
         relativeclic1.setOnClickListener(new View.OnClickListener(){
             @Override
             public void onClick(View v){
                 // Here do your Task
             }
         }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T17:26:56.077

您可以通过重写 dispatchTouchEvent 在发送触摸事件之前切断它们：

[https://developer.android.com/reference/android/app/Activity.html#dispatchTouchEvent(android.view.MotionEvent](https://developer.android.com/reference/android/app/Activity.html#dispatchTouchEvent(android.view.MotionEvent) )

您可以从传递的 MotionEvent 中获取触摸的统计信息——第一次、重复等。

# sql - SQL：解析具有三个分隔符的关联输入字符串

> ID：11869818
> 
> 赞同：0
> 
> 时间：2012-08-08T17:20:06.803
> 
> 标签：sql, sql-server-2008

我可以使用游标来做到这一点，但如果可能的话，我会尽量避免它。这是我要进行的一些示例代码：

```
declare @string varchar(max) = 'person1:item1~item2~item3~etc^person2:item1~item2~item3~etc'

declare @table1 table (id int, value varchar(500))
declare @table2 table (id varchar(50), value varchar(500))
declare @table3 table (id varchar(50), value varchar(50))

insert @table1 (id, value) select * from fn_ParseDelimitedStrings(@string, '^')

insert @table2 (id, value) 
    select 
        id = (select f.value from fn_ParseDelimitedStrings(t.value, ':') f where f.RowId=1),
        value = (select f.value from fn_ParseDelimitedStrings(t.value, ':') f where f.RowId=2)
    from @table1 t

select * from @table2 
```

上面的代码以以下形式为我提供了数据：

```
id        value
-------------------------------
person1   item1~item2~item3~etc
person2   item1~item2~item3~etc 
```

但我需要这种形式的数据：

```
id        value
-------------------------------
person1   item1
person1   item2
person1   item3
person1   etc
person2   item1
person2   item2
person2   item3
person3   etc 
```

输入字符串可以有任意数量的“persons”，每个人可以有任意数量的“items”。

**fn_ParseDelimitedStrings**是我们拥有的一个自定义函数，它为每个分隔项返回一个索引值对表。IE：

```
RowID   Value
-------------
1       item1
2       item2
3       item3
4       etc 
```

我无法将最终拆分中的每个“项目”与它们应该关联的“人”关联起来。

有什么可以做的还是我必须使用光标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T17:33:09.870

[外部应用](http://msdn.microsoft.com/en-us/library/ms175156%28v=sql.105%29.aspx)将当前行与外部应用内部派生表中找到的所有行连接起来：

```
insert @table2 (id, value) 
select 
    id = (select f.value from fn_ParseDelimitedStrings(t.value, ':') f where f.RowId=1),
    value = v1.value
from @table1 t
outer apply
(
  select v.value
    from fn_ParseDelimitedStrings(
         (select f.value 
            from fn_ParseDelimitedStrings(t.value, ':') f 
           where f.RowId=2)
         , '~') v 
) v1 
```

*将 value1 编辑为 v1 以匹配最外层的选择

# sql-server - TSQL将列名的varchar变量传递给SUM函数

> ID：11869820
> 
> 赞同：1
> 
> 时间：2012-08-08T17:20:13.083
> 
> 标签：sql-server, tsql

我需要编写一个程序，我必须对未知的列名求和。

我可以访问的唯一信息是列位置。

我可以使用以下方法获取列名：

```
 SELECT @colName = (SELECT column_name FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME='TABLENAME' AND ORDINAL_POSITION=@colNum) 
```

然后我有以下内容：

```
 SELECT @sum = (SELECT SUM(@colName) FROM TABLENAME) 
```

然后我收到以下错误：

> *操作数数据类型 varchar 对 sum 运算符无效*

我对如何使这项工作感到困惑。我看过很多关于转换和转换的帖子，但我不能转换为浮点数、数字等，因为这是一个名称。

我将不胜感激任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T17:24:37.573

这是不可能的。您必须组装 SQL 查询，然后执行它。像这样的东西：

```
SET @sqlquery = 'SELECT SUM(' + @colName + ') FROM TABLENAME'
EXECUTE ( @sqlquery ) 
```

相应调整。

# html - 如何在 CSS 中定位和样式化块引用

> ID：11869823
> 
> 赞同：0
> 
> 时间：2012-08-08T17:20:27.533
> 
> 标签：html, css

嗨，大家好！我需要一些 CSS 帮助来设置我的块引用规则的样式。我想要的结果是在引用的文本上方有开始引号，在引用的文本下方有结束引号。

这张图片正是我所需要的——[网站设计](http://www.garyrevell.co.uk/mrtest/student-i-info-v1.jpg)

这是我当前的实时 WIP 链接 -[实时链接](http://www.garyrevell.co.uk/mrtest/page-standard.html)

**我的 CSS：**

```
blockquote {
color: #e33e00;
font-style: italic;
font-family: GeoSlb712XBdBT;
padding:20px;
padding-left: 15px;
border-left: 3px solid #F63;

}

blockquote p:before {
content: '"';
font-size: 30px;
top:20px;
position:absolute;

}

blockquote p:after {
content: '"';
font-size: 30px;
} 
```

如果有人可以提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T17:29:34.330

[**演示**](http://jsfiddle.net/demchak_alex/mzQEP/1/)

查看我添加的代码（缩进 4 个空格）

您需要添加`position: relative;`到`blockquote p`，然后它是一些绝对定位，`:before`向上`:after`移动`:before`15px 和`:after`向下移动 30px。

调整右侧的大小以使报价扩大和缩小，并看到报价始终保持在顶部和底部

当然，您可以使用 20px 和 35px（或更多）来在引号和`<p>`被引用之间添加更多空间。

**编辑：**添加了下面的代码，解决问题的附加代码缩进了 8 个空格

```
blockquote {
    color: #e33e00;
    font-style: italic;
    font-family: GeoSlb712XBdBT;
    padding:20px;
    padding-left: 15px;
    border-left: 3px solid #F63;
}

        blockquote p { position: relative; }

blockquote p:before {
content: '"';
font-size: 30px;
position:absolute;
        top:-15px;
        left:0px;
}

blockquote p:after {
content: '"';
font-size: 30px;
        position:absolute;
        bottom:-30px;
        left:0px;
} 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T20:07:48.883

像这样[http://www.visibilityinherit.com/code/css-blockquotes-how-to.php](http://www.visibilityinherit.com/code/css-blockquotes-how-to.php)。或者将显示内联块与另一个一起使用。我试图发布代码，但显然无法正确缩进。

# c# - 为什么要绑定列表 RemoveItem 方法受保护

> ID：11869824
> 
> 赞同：3
> 
> 时间：2012-08-08T17:20:31.543
> 
> 标签：c#, winforms, bindinglist

请告诉我，为什么 BindingList RemoveItem 方法受到保护？它的目的是什么？我知道我可以继承它，但问题是为什么要保护它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T17:25:19.057

这是受保护的，因为`BindingList<T>`它基于[`Collection<T>`](http://msdn.microsoft.com/en-us/library/ms132397)并且`RemoveItem`旨在用于实现`Collection<T>`以提供适当的、特定于集合的实现。

要直接使用它，您可以使用公共的[RemoveAt](http://msdn.microsoft.com/en-us/library/ms132414.aspx)方法。这在内部调用`RemoveItem`，但是是面向公众的 API，用于按索引删除项目。

# facebook - 两个 Facebook api 异步调用

> ID：11869825
> 
> 赞同：0
> 
> 时间：2012-08-08T17:20:36.587
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

我有一个应用程序，我必须

FB.api(/me) FB.api(/me/friends)。

我希望一旦用户通过身份验证登录到一个新页面，我将拥有 window.location.href.(xx)。

所以我的 pesduocode 是：

```
checkuserdetails()
{
FB.api(/me)
FB.api(/me/friends).
window.location.href.(xx).

} 
```

我在回调函数中有警报，它们永远不会被执行并且页面被重定向。正如 CBroe 所建议的，我保留了 window.location.href。在卡尔回来。但这也有问题。

就像这样：

```
pseduo code:
    checkuserdetails()
    {
    FB.api(/me)
    FB.api(/me/friends){    window.location.href.(xx).}.    
    } 
```

朋友中的警报永远不会被执行。

伪代码：checkuserdetails() { FB.api(/me) { window.location.href.(xx).}。FB.api(/我/朋友)

```
} 
```

两个警报都被执行。

我的问题： 1) 有时我看到来自/me/friends 的警报首先被执行，有时在/me 中。我知道 FB 是异步的，如何使 ut 连续...如果我有很多 FB.api 调用（超过 2 个），如何将 windows.location 保存在哪里？如何控制异步功能

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T19:55:00.960

所有 API 调用都是异步的，因此如果您需要在所有这些都完成后执行某些操作，那么您需要让它们串行执行（不建议 perf），或者与同步并行执行。

为此，您可以使用诸如 Promises 或 Futures 之类的模式，或者像这样简单的东西

```
var results = [], done = 0;
function allDone(d1, d2) {
  // do something with d1 and d2
}

FB.api('/...', {..}, function(data) {
  results[0] = data;
  if (done === 2) {
    allDone.apply(null, results);
  }
});

FB.api('/...', {..}, function(data) {
  results[1] = data;
  if (done === 2) {
    allDone.apply(null, results);
  }
}); 
```

这当然可以抽象为一些辅助函数..

# php - ajax持续更新php导致服务器阻止我的ip

> ID：11869827
> 
> 赞同：0
> 
> 时间：2012-08-08T17:20:41.673
> 
> 标签：php, ajax

我使用 Ajax 函数调用自身来不断更新信息。但是我让脚本运行了一段时间，然后服务器阻止了我的 IP，因为它认为我正在淹没它或类似的东西，我不知道。无论如何，我想知道是否有另一种方法可以更正确地做到这一点。这是我的代码：

**阿贾克斯功能：**

```
function update_cart()
{
if (window.XMLHttpRequest)
    var http = new XMLHttpRequest();
else
    var http = new ActiveXObject('Microsoft.XMLHTTP');

http.onreadystatechange=function()
                       {
                           if ((http.readyState == 4) && (http.status == 200))
                           {                                   
                                id('cart_quantity').innerHTML = parseInt(http.responseText);
                                setTimeout('update_cart()', 1000);
                           }
                       }

http.open('GET', actual_path+'fetch_cart_quantity.php', true);  
http.setRequestHeader("X-Requested-With", "XMLHttpRequest");
http.send();        
} 
```

**PHP 脚本：**

```
<?php
if($_SERVER['HTTP_X_REQUESTED_WITH'] != 'XMLHttpRequest')
{
    header('Location: ./');
    exit();
}

session_start();

include '../include/config.php';
include '../include/db_handler.php';
include '../include/cart_handler.php';      

$cart = get_cart_quantity($_SESSION['cart_id']);
if ($cart == NULL) $cart = 0;

echo $cart;
?> 
```

在此先感谢您的帮助。对不起，我的英语不是很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T17:49:34.200

为什么不在用户执行操作时更新购物车。

例如“将商品添加到购物车”？

这样，您只会在实际需要时调用服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T17:47:29.190

可能，但我认真地认为每秒查询您的服务器是完全没有必要的，也是一种资源浪费（除非您有非常强迫的客户），让您的脚本每分钟左右查询您的服务器会更好，并且可能在如果您有多个客户在同一台​​服务器上使用此应用程序，则可以长期使用。

如果你真的认为有必要拥有这个功能，一个好的方法是使用推送通知，更多信息可以在这里找到：[PHP - 推送通知](https://stackoverflow.com/questions/5452779/php-push-notifications)，这里：[推送通知到客户端浏览器](https://stackoverflow.com/questions/4899523/push-notification-to-the-client-browser)和这里：[从服务器推送通知到用户PHP/JavaScript](https://stackoverflow.com/questions/9106516/push-notifications-from-server-to-user-with-php-javascript)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T17:52:07.700

正如我在评论中所说，您在这里有几个选择。

基本上第一个是通过查询来放松。你不需要长时间轮询这样的事情。将查询调低为每 5 分钟一次或仅在有操作时进行。

您还可以构建一个简单的彗星服务器，以便在从服务器“推送”更新时执行推拉类型的操作。有一个预建的称为 APE： http: [//www.ape-project.org/](http://www.ape-project.org/)

node.js 也可以为您处理这类事情。

此外，您可能应该查看您的服务器设置，听起来有点奇怪，您的服务器正在阻止它自己的 IP 地址/域...

# android - Android将相机图像存储在数据库中并在视图中恢复它们

> ID：11869828
> 
> 赞同：0
> 
> 时间：2012-08-08T17:20:42.280
> 
> 标签：android, database, sqlite

我有这个代码

```
public class MainActivity extends Activity {
    private static final int CAMERA_REQUEST = 1888;
    public ImageView imageView;
    Imagehelper help = new Imagehelper(this);

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        this.imageView = (ImageView) this.findViewById(R.id.imageView1);
        ListView lv = (ListView) findViewById(R.id.fotos);

        Cursor valores = help.getAll();
        startManagingCursor(valores);
        ItemAdapter itemAdapter = new ItemAdapter(this, valores);
        lv.setAdapter(itemAdapter);

        Button B = (Button) this.findViewById(R.id.camera);
        B.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                Intent cameraIntent = new Intent(
                        android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
                startActivityForResult(cameraIntent, CAMERA_REQUEST);
            }
        });
    }

    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (requestCode == CAMERA_REQUEST) {
            Bitmap photo = (Bitmap) data.getExtras().get("data");
            imageView.setImageBitmap(photo);
            ByteArrayOutputStream stream = new ByteArrayOutputStream();
            photo.compress(Bitmap.CompressFormat.PNG, 100, stream);
            byte[] byteArray = stream.toByteArray();
            help.insert(byteArray);
        }
    }
} 
```

适配器类

```
public class ItemAdapter extends CursorAdapter {

    private LayoutInflater mLayoutInflater;
    private Context mContext;

    public ItemAdapter(Context context, Cursor c) {
        super(context, c);
        mContext = context;
        mLayoutInflater = LayoutInflater.from(context);
    }

    @Override
    public void bindView(View v, Context context, Cursor c) {
        Bitmap BM;
        c.moveToFirst();
        byte[] bytes = c.getBlob(c.getColumnIndex("imageblob"));
        BM = BitmapFactory.decodeByteArray(bytes, 0, 0);

        ImageView img = (ImageView) v.findViewById(R.id.imagenes);
        img.setImageBitmap(BM);

    }

    @Override
    public View newView(Context arg0, Cursor arg1, ViewGroup parent) {

        View v = mLayoutInflater.inflate(R.layout.imagen_row, parent, false);
        return v;
    }

} 
```

和数据库

```
public class Imagehelper extends SQLiteOpenHelper {
    private static final String DATABASE_NAME = "abhi.db";
    private static final int SCHEMA_VERSION = 3;

    public Imagehelper(Context context) {
        super(context, DATABASE_NAME, null, SCHEMA_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub
        db.execSQL("CREATE TABLE Image(_id INTEGER PRIMARY KEY AUTOINCREMENT,imageblob BLOB);");
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    }

    public Cursor getAll() {
        return (getReadableDatabase().rawQuery("SELECT imageblob FROM Image",
                null));
    }

    public void insert(byte[] bytes) {
        ContentValues cv = new ContentValues();

        cv.put("imageblob", bytes);
        Log.e("inserted", "inserted");
        getWritableDatabase().insert("Image", "imageblob", cv);

    }

    public byte[] getImage(Cursor c) {
        return (c.getBlob(1));
    }
} 
```

但是当我运行这段代码时，应用程序崩溃了。我在做什么坏事？？？

日志猫跟踪的部分是，

```
08-08 17:32:55.779: E/AndroidRuntime(746): FATAL EXCEPTION: main
08-08 17:32:55.779: E/AndroidRuntime(746): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.pruebascamarasqlite/com.example.pruebascamarasqlite.MainActivity}: java.lang.IllegalArgumentException: column '_id' does not exist
08-08 17:32:55.779: E/AndroidRuntime(746):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
08-08 17:32:55.779: E/AndroidRuntime(746):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T18:25:49.137

您正在使用 CursorAdapter。从文档中：

> 游标必须包含名为“_id”的列，否则此类将不起作用。

您可以更改架构以在数据库中包含“_id”，也可以在查询中将 SQL 的内置 rowid 别名为 _id：

```
return (getReadableDatabase().rawQuery("SELECT rowid _id, imageblob FROM Image",
                null)); 
```

# javascript - 将属性附加到定义中的函数

> ID：11869829
> 
> 赞同：0
> 
> 时间：2012-08-08T17:20:46.827
> 
> 标签：javascript

我想实现与此相同的...

```
var x = function(){ return "abc"}
x.y = 123

x() // "abc"
x.y // 123 
```

但是要像这样定义函数定义中的属性...

```
var x = function(){
    // declare `this.y` here somehow...
    // this.y = 123
    return "abc"
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T17:25:17.060

即使将函数实例化为表达式的一部分，您也可以为函数命名：

```
var x = function x() {
  x.y = 123;
  return "abc";
} 
```

不幸的是，[一些浏览器在实现这个非常有用的功能时有奇怪的怪癖](http://kangax.github.com/nfe/)，所以使用它并不是完全安全的。

请注意，在上面，有两个单独的“x”符号。函数名“x”绑定在函数内部，它在外部作用域中隐藏了变量“x”。

# eclipse - Eclipse 浏览器的行为与独立版本不同

> ID：11869833
> 
> 赞同：2
> 
> 时间：2012-08-08T17:21:01.790
> 
> 标签：eclipse, internet-explorer, browser, font-face

我正在使用`org.eclipse.swt.browser.Browser`插件，并希望`@font-face`通过使用 javascript 将 css 添加到 head 来动态包含字体。

我在 Windows 上工作，所以 eclipse 将使用 IE 引擎来呈现 html。但是：我的解决方案在独立浏览器（也在 chrome、opera、safari）中运行时在 IE9 上运行良好，但在 eclipse 中运行时却不行。

javascript 已成功执行，但似乎未加载字体。`Browser`我应该在对象上更改一些安全设置吗？没见过这样的方法...

顺便说一句，字体网址指向本地字体文件。并且`@font-face`在最初定义它而不是用 JS 动态加载它时工作。

# javascript - 在 Codeigniter 应用程序中使用 Jquery 每 10 秒更新一次 div

> ID：11869834
> 
> 赞同：0
> 
> 时间：2012-08-08T17:21:06.727
> 
> 标签：javascript, jquery, codeigniter

我在玩一个codeigniter 2.X 应用程序，我正在尝试使用以下Jquery 代码在我看来每10 秒更新一个数字。

```
<script type="text/javascript">
var auto_refresh = setInterval(
function ()
{
$('#load_score').load('<?php echo $FighterOneScore; ?>').fadeIn("slow");
}, 10000); // refresh every 10000 milliseconds

</script> 
```

在我看来，这是我的 div 标签

```
<div id="load_score"> </div> 
```

更新

这是我的控制器代码

```
public function left()
{
    $this->load->model('points');
        $data['ScoreOne'] = $this->points->get_ScoreOne();
        echo $data['ScoreOne'];
}

    public function right()
{
    $this->load->model('points');
        $data['ScoreTwo'] = $this->points->get_ScoreTwo();
        echo $data['ScoreTwo'];
}
}
?> 
```

这是我在我的视图中的 Javascript：

```
<script type="text/javascript">
var auto_refresh = setInterval(
function ()
{
$.get("<?php echo base_url(); ?>response/left",
function(data){ $("#load_score").html($data); } // not sure about fadeIn here!
);
}, 10000); // refresh every 10000 milliseconds

</script> 
```

当我在浏览器中加载视图时 - 页面什么也不显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T17:29:36.983

你怎么能做到这一点，

```
<script type="text/javascript">
var auto_refresh = setInterval(
function ()
{
$.get("<?php echo base_url(); ?>sampleController/sampleData",
function(data){ $("#load_score").html($data); } // not sure about fadeIn here!
);
}, 10000); // refresh every 10000 milliseconds

</script> 
```

并且，在 php 中，`sampleController`使用方法创建一个控制器`sampleData`

那会做：

```
echo $FighterOneScore; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T17:27:20.193

在您的加载调用中，您实际上并没有调用页面。你从 php.ini 中回显了一些价值。

您需要将参数加载为回显分数的控制器的 URL。

# flash - 在没有 IDE 的情况下验证 Adob e Flash .FLA 文件版本的方法

> ID：11869844
> 
> 赞同：0
> 
> 时间：2012-08-08T17:21:50.017
> 
> 标签：flash, flash-cs5, fla

我正在寻找一种轻松解析 FLA 的方法，以便我们可以验证用户是否将文件保存为特定的 FLA 格式。IE、Flash 5.0。我们希望将其集成到我们的 Jenkins 系统中，这样如果用户签入文件的更高版本，例如 Flash 5.5 或 Flash 6.0，它将提醒违规的团队成员将文件重新保存为正确的版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T17:45:08.983

经过更多研究后，我意识到只要您使用 Flash 5 或更高版本，就很容易获得所需的信息。您只需解压缩 fla，然后找到包含所需信息的 XML 文件。我只需要写一个简单的解压缩和xml解析工具。

# sql - SQL LEFT JOIN 在 MS Access 中不起作用

> ID：11869845
> 
> 赞同：0
> 
> 时间：2012-08-08T17:21:50.993
> 
> 标签：sql, ms-access, left-join

以下**SQL 查询**不返回**MS Access 中的 LEFT JOIN 的**数据。

```
SELECT * FROM 
 (
 SELECT Operation_Part.PPC,
        Operation_Part.TargetOperationsPerHour as JPH,
        Operation_Part.Misc1 as [JPh Alt 1],
        STR(Operation_Part.SeqNr) as Sequence,
        Operation_Part.idPart,
        Operation_Part.idOperationPart, 
        Operation.OperationType as Operation,
        tblOperationType.OperationType as [Operation Type] 
 FROM tblOperationType 
   RIGHT JOIN (Operation INNER JOIN Operation_Part ON Operation.idOperation = Operation_Part.idOperation)
    ON tblOperationType.idOpType = Operation.OperationTID  
 WHERE Operation_Part.VsbLDq = 0
   AND Operation_Part.idPart <> 0  AND Operation_Part.idPart = 1271) 
 AS [AA]

 LEFT JOIN (SELECT Sum([Cptotal]) AS DownTime, 
            TransactionDetail.idPart, 
            STR(TransactionDetail.seq_number) as Sequence  
            FROM ([Transaction] INNER JOIN TransactionDetail ON [Transaction].idTransaction = TransactionDetail.idTransaction)  
           WHERE [Transaction].idTransactionType=29 
             AND TransactionDetail.WorkOrderNumber = 'PR23144'  
           GROUP BY TransactionDetail.idPart, STR(TransactionDetail.seq_number)) 
 AS [EE] 
 ON AA.idPart = EE.idPart AND EE.Sequence=AA.Sequence 
```

在 SQL Server 中，查询确实根据需要返回 1.08 的停机时间值（见下图）。

首先选择返回：

![在此处输入图像描述](../Images/06810108b1db8a803c7d2562fcf718b2.png)

第二次选择返回：

![在此处输入图像描述](../Images/574a6e9b08a820876cf9041119951230.png)

MS 访问结果：

![在此处输入图像描述](../Images/ac6f4513cb8d549822607583d34096e8.png)

SQL 服务器结果：

![在此处输入图像描述](../Images/f46b9beb89933cf116e7db51f3fd734d.png)

如何使它在 MS Access 中工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T05:13:15.360

这只是一个猜测，但它很可能与您并不真正想要的行的适用列中的空值有关。

建议你改

```
 SELECT Sum([Cptotal]) AS DownTime, 
```

到

```
 SELECT Sum(IIf(IsNull([CpTotal]), 0, [CpTotal])) AS DownTime 
```

在 Access 中，我总是使用 CStr(...) 而不是 Str(...)

除此之外，尽管可能很痛苦，但我建议将左连接组件转换为单独的查询，或者如果您不使用查询，则使用此数据构建一个临时表，然后将其左连接到原始查询中。

# ajax - 通过伪 Ajax 调用选择性地发送文件

> ID：11869849
> 
> 赞同：0
> 
> 时间：2012-08-08T17:21:55.480
> 
> 标签：ajax, jquery, jquery-plugins, file-upload

我已经为我的表单设置了 HTML 和 CSS，并且我有我的 Ajax 调用来提交它，但我不知道如何发送图像。这是我的 Ajax 调用：

```
$.ajax
    ({
      type: "POST",
      url: "/manage/processadditem",
      data: $("#add_form").serialize(),
      dataType: "html",
      success: function( response, textStatus, XHR )
      {
        //Process return data

      },
      error: function(jqXHR, textStatus, errorThrown){
        alert('An error occurred, please try again later.');
      }
    }); 
```

我的问题是表单上有 3 个图像输入，但在任何给定时间我最多只能使用其中两个，并且表单中的一个变量告诉我正在使用哪些变量（性别 = 男性/女性/中性）。

在成功回调中，我想检查该变量并根据它决定要发送哪些图片，或者将变量与要在后端处理的图像一起发送，但是通过类似问题的链接查看我没有能够找到任何有选择地发送文件或与它们一起发送附加信息的示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T09:54:41.357

据我所知，您不能使用 AJAX Post 请求发送文件。

我自己试过了。

这是因为文件数据不在发送到 URL 目标的 POST 标头中。

# c# - 如何到达边界内的对象

> ID：11869852
> 
> 赞同：2
> 
> 时间：2012-08-08T17:22:06.050
> 
> 标签：c#, wpf

我有 grid1 包含一组边框，每个边框都包含一个标签。

XAML 示例

```
<grid1>
  <border>
    <label />
  </border>
  <border>
    <label />
  </border>
</grid1> 
```

我试图循环使用标签，但我无法访问它们。

```
foreach(var item in grid1.Children)
{

} 
```

这个循环只返回一个孩子的边界，但我必须更深入，不知道如何。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T17:28:25.950

你必须得到边界的[Child](http://msdn.microsoft.com/en-us/library/system.windows.controls.decorator.child.aspx)：

```
foreach(var item in grid1.Children)
{
     Label label = null;
     var border = item as Decorator;
     if (border != null)
          label = border.Child as Label;

     if (label != null)
     {
         // The label will be here...
     }
} 
```

请注意，如果您为标签提供名称，则只需调用[FrameworkElement.FindName](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.findname.aspx)即可直接查找每个标签。

# android - 非常简单的 Android 用户登录/配置文件系统

> ID：11869853
> 
> 赞同：0
> 
> 时间：2012-08-08T17:22:15.127
> 
> 标签：android, login, user-profile

我想在应用程序中有一个用户配置文件系统；这个应用程序绝对没有敏感数据。我知道如何在保护用户密码/用户名等方面进行安全登录。但这是我的问题......一旦登录确认用户名/密码组合正确，**我可以这样做：**

*使用 Sharedpreferences 设置一个从 0 到 1 的登录变量。当用户退出时，它会回到 0。所以应用程序中任何时候需要检查用户是否登录的功能时，它只检查用户的状态这个偏好变量。*

**这是一种安全的方式吗？或者，还有更好的方法？**

（通常在 PHP 中我使用会话变量，不确定 Android 等效项是什么。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T17:32:34.410

不要使用共享偏好，有太多可能出错的事情，例如您的应用程序 FC 或被 Android 杀死并且没有机会更新它们。

您可以覆盖 Application 类并使用静态值（可能是布尔值）来指示用户已登录。

这是一些伪代码，展示了如何覆盖应用程序。它类似于全局变量，但不要过度，将所有数据放在这里；）

```
public class MyApp extends Application{

    public static boolean isUserLoggedIn = false;
    ...

public void userLogin(){

   MyApp.isUserLoggedIn = true;
   ...

public void userLogout(){

   MyApp.isUserLoggedIn = false;
   ...

} 
```

因为该字段是静态的并且初始化为 false，所以每次您的应用启动时，您都可以保证它是 false。唯一可行的方法是在您的应用程序中以代码设置。

您还需要将扩展​​类添加到清单中：

```
<application android:name=".MyApp" 
  ... 
```

# sql-server - JBOSS Tools for Indigo 无法连接到 SQLServer 2008 数据库

> ID：11869859
> 
> 赞同：0
> 
> 时间：2012-08-08T17:22:35.523
> 
> 标签：sql-server, eclipse, database-connection, jboss7.x, jboss-tools

我正在尝试连接到 Eclipse 中的 SQL Server 2008 数据库。

我已经用 Eclipse Juno 进行了尝试，只是使用了数据源浏览器，添加了一个新的连接，选择了驱动程序（从微软的网站下载），一切都很顺利。

当我想使用 JBoss 工具（仅适用于 Eclipse Indigo）时，问题就来了。我做同样的事情，我得到了这个：

```
com.microsoft.sqlserver.jdbc.SQLServerException: The TCP/IP connection to the host xxx.xxx.xxx.xxx, port 1433 has failed. Error: "Connect timed out. Verify the connection properties. Make sure that an instance of SQL Server is running on the host and accepting TCP/IP connections at the port. Make sure that TCP connections to the port are not blocked by a firewall.".
at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDriverError(SQLServerException.java:190)

at com.microsoft.sqlserver.jdbc.SQLServerException.ConvertConnectExceptionToSQLServerException(SQLServerException.java:241)
at com.microsoft.sqlserver.jdbc.SocketFinder.findSocket(IOBuffer.java:2243)
at com.microsoft.sqlserver.jdbc.TDSChannel.open(IOBuffer.java:491)
at com.microsoft.sqlserver.jdbc.SQLServerConnection.connectHelper(SQLServerConnection.java:1309)
at com.microsoft.sqlserver.jdbc.SQLServerConnection.login(SQLServerConnection.java:991)
at com.microsoft.sqlserver.jdbc.SQLServerConnection.connect(SQLServerConnection.java:827)
at com.microsoft.sqlserver.jdbc.SQLServerDriver.connect(SQLServerDriver.java:1012)
at org.eclipse.datatools.connectivity.drivers.jdbc.JDBCConnection.createConnection(JDBCConnection.java:214)
at org.eclipse.datatools.connectivity.DriverConnectionBase.internalCreateConnection(DriverConnectionBase.java:105)
at org.eclipse.datatools.connectivity.DriverConnectionBase.open(DriverConnectionBase.java:54)
at org.eclipse.datatools.connectivity.drivers.jdbc.JDBCConnection.open(JDBCConnection.java:73)
at org.eclipse.datatools.enablement.msft.internal.sqlserver.connection.JDBCSQLServerConnectionFactory.createConnection(JDBCSQLServerConnectionFactory.java:27)
at org.eclipse.datatools.connectivity.internal.ConnectionFactoryProvider.createConnection(ConnectionFactoryProvider.java:83)
at org.eclipse.datatools.connectivity.internal.ConnectionProfile.createConnection(ConnectionProfile.java:359)
at org.eclipse.datatools.connectivity.ui.PingJob.createTestConnection(PingJob.java:76)
at org.eclipse.datatools.connectivity.ui.PingJob.run(PingJob.java:59)
at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54) 
```

关于这可能是什么的任何想法？JBoss Tools 有什么 Juno 的 WTP 没有（因此我正在考虑不使用 Eclipse Tools，我正在为 JBOSS 7.0 和 7.1 开发）。

编辑：我试过没有 JBOSS 工具的 Eclipse Indigo，它运行良好。所以问题应该出在 JBoss 工具上。有没有其他方法可以做到这一点？我只想使用 Hivernate 将数据库反向工程为实体。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T19:24:30.090

好的，我想通了，我仍然会使用 JBoss Tools。问题出在 Eclipse 中的代理定义中，现在已经解决了:)

# java - 将结构列表复制到Java中的浮点数组

> ID：11869865
> 
> 赞同：1
> 
> 时间：2012-08-08T17:22:56.773
> 
> 标签：java, memory-management, struct, memcpy

在 C++ 中，如果我有一个带有 3 个浮点数的结构：

```
 struct Vertex  
  {  
    float x;  
    float y;  
    float z;  
  } 
```

如果我有这些 ( `std::vector<Vertex>`) 的列表，我可以使用 memcpy 将它们复制到 float[] 中，如下所示：

```
float [] vertexBuffer = new float[m_vertices.size() * 3];  
memcpy(m_vertexBuffer, m_vertices.data(), m_vertices.size() * sizeof(Vertex)); 
```

有什么等价的方法可以让我在 Java 中做同样的事情吗？如果我有一个带有 x、y、z 浮点数的 Java 类 VertexJava，并且这些都存储在一个 ArrayList 中，那么我有什么方法可以将它们的所有值复制到一个 float[] 中而无需遍历列表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T17:26:11.790

我认为 java 方法是在 Vertex 类中定义一个方法，该方法将返回一个浮点数组。有什么不能满足你的需要吗？

```
public float[] toFloatArray() {
    float[] ret = {this.x, this.y, this.z};
    return ret;
} 
```

编辑：这为一个对象完成。如果你想操作很多，也许你也有这样的静态方法：

```
public static float[] manyToOneArray(List<Vector> theList) {
    float[] ret = new float[theList.size() * 3];
    int i = 0;
    for (Vector v : theList) {
        ret[i++] = v.x;
        ret[i++] = v.y;
        ret[i++] = v.z;  
    } 
    return ret;
} 
```

`ArrayUtils.addAll()`我对此进行了一些更改，因为我对使用这么多次不太满意。我认为它可能会带来非常低效的性能。所以，你的问题的答案是你不能以同样的方式操纵记忆，不。您可以完成大致相同的事情，但不能达到相同的控制水平。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T17:25:46.520

例如，您的收藏`List<Float>`没有`float`原语，它有`Float`对象，所以您不能。

也许您可以从一开始就使用 a`TFloatArrayList`或 a`float[]`来避免首先创建 Float 对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T17:25:10.560

是的。使用列表的 .toArray 方法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T17:26:48.947

不。

Collections 有一个 toArray() 方法，但它会返回一个`VertexJava`.

Java 中没有直接的内存操作；它是 Java 的 Good Things(TM) 之一。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T17:28:32.393

最简洁的答案是不。将所有浮点数（或更确切地说是所有对象）存储在 List 中以提取到数组中的最简单方法是使用 List.toArray() 方法。

请参考[List接口JavaDoc](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)

# asp.net-mvc-3 - 如何使用 Fluent NHibernate 在 MVC3 中实现基于角色的授权？

> ID：11869876
> 
> 赞同：0
> 
> 时间：2012-08-08T17:23:43.957
> 
> 标签：asp.net-mvc-3, fluent-nhibernate

我们的 MVC3 应用程序使用 Fluent NHibernate，需要实现用户登录、身份验证和授权。

我看过使用`[Authorize]`控制器类中的方法的文章。但是，鉴于 Fluent NHibernate 正在使用中，我不确定这一切在我们的情况下是如何工作的。

任何人都可以分享一些关于如何完成这项工作的建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T17:59:03.737

您可以[编写一个自定义角色提供程序](http://msdn.microsoft.com/en-us/library/8fw7xh74.aspx)来实现[RoleProvider](http://msdn.microsoft.com/en-us/library/system.web.security.roleprovider.aspx)类。在您的 RoleProvider 类的自定义实现中，您可以使用您想要的任何数据库访问技术 - FluentNhibernate 或其他任何东西。基本上，您对实现[IsUserInRole](http://msdn.microsoft.com/en-us/library/system.web.security.roleprovider.isuserinrole.aspx)方法感兴趣。

然后用 Authorize 属性装饰你的控制器/动作：

```
[Authorize(Roles = "Admin")]
public ActionResult Foo()
{
    return Content("Only administrators can see this message");
} 
```

这是另一个[`blog post`](http://kitsula.com/Article/Custom-Role-Provider-for-MVC)更详细地涵盖编写自定义角色提供程序的内容。

# java - 关于散列、键和值迭代器

> ID：11869879
> 
> 赞同：-2
> 
> 时间：2012-08-08T17:23:59.657
> 
> 标签：java, hashmap

什么是 hashMap 中的哈希迭代器、键迭代器和值迭代器，除了普通迭代器之外它们的功能是什么，假设我有一个哈希映射..

```
Map map=new HashMap();//HashMap key random order.
      //   System.out.println("Amit".hashCode());
         map.put("Amit","Java");
         map.put("Amit","Javas");
        // map.put("mAit","J2EE"); 
```

这些新的迭代器为我提供了什么功能..！

![请看](../Images/eab894341d2ae74cf7eddfeca97f9869.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T17:28:53.617

keySet().iterator() 遍历键，values().iterator() 遍历值，entrySet().iterator() 遍历键/值条目。

地图没有任何其他迭代器。

> 这些新的迭代器为我提供了什么功能

它们是在 Java 1.2 (1998) 中添加的，所以它们并不是那么新。;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T17:45:32.337

Map.keySet() 和 Map.values() 的结果就是所谓的**集合视图**（例如，如果您有一个包含两列的 SQL 表并为每列创建一个单独的视图）。使用 .keySet() 您可以获得 Map 中所有键的可迭代 Collection 视图。而 .values() 使您能够迭代它们的相应值。

当您与 Array 或 ArrayList 或类似集合一起操作 HashMap 时，它们非常方便。这里我列出了一个简单的 Java EE 示例，它从请求中检索 Cookie[] 数组，然后将 cookie 映射到 HashMap ：

```
Cookie[] cookies = request.getCookies();
HashMap<String,String> map = new HashMap<String,String>();

for(Cookie cookie : cookies)  
{
  map.put(cookie.getKey(), cookie.getValue());
}

//Later if you just wanna check the keys of cookies that are available
Set<String> keys = map.keySet();
Iterator<String> it = keys.iterator();

while(it.hasNext())
{
 String currentElement = it.next();
 System.out.println("key = " + currentElement);

} 
```

无论如何，这只是 HashMap 和迭代的一个小例子，重要的是调整映射的可能性，并使其可以像其他集合一样循环遍历它们，这意味着将它们带到程序员使用的更常见和更易于操作的状态。

# android - 行标签，ViewHolder 模式

> ID：11869883
> 
> 赞同：0
> 
> 时间：2012-08-08T17:24:12.163
> 
> 标签：android, row, adapter

这是 ViewHolder 模式的简单实现。我有一个包含文章的游标，我想将标题保留在行标签中。在这个阶段，我（尝试）将实际字符串和相应的 textview 保留在 row 标记中，再加上 textview 的标记中的实际字符串。

```
class ArticleListCursorAdapter extends SimpleCursorAdapter {
    class ViewHolder {
        String strTitle = null;
        View viewTitle = null;

        ViewHolder(View base, String strTitle) {
            this.viewTitle = base.findViewById(R.id.textTitle);
            this.strTitle = strTitle;
        }

        @Override
        public String toString() {
            return new StringBuffer()
                .append("strTtitle [").append(strTitle).append("] ")
                .append("viewTitle [").append(((TextView)viewTitle).getText()).append("] ")
                .append("viewTitle title (tag) [").append(viewTitle.getTag()).append("] ")
                .toString();
        }
    }

    public ArticleListCursorAdapter(Context context, int layout, Cursor c, String[] from,
            int[] to, int flags) {
        super(context, layout, c, from, to, flags);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View row = super.getView(position, convertView, parent);
        ViewHolder holder = null;
        // if (convertView != null)
        holder = (ViewHolder)row.getTag();

        Log.v(TAG, "getView for [" + position + "]. holder ["
                    + (holder == null ? "null holder" : holder.toString()) + "]");
        Log.v(TAG, "getView other info: rendering view title ["
                            + ((TextView)row.findViewById(R.id.textTitle)).getText()
                                    .toString() + "]");

        if (holder == null) {
            Cursor cursor = (Cursor)ArticleListCursorAdapter.this.getItem(position);
            final String strTitle = cursor.getString(cursor.getColumnIndex(ArticleData.C_TITLE));
            holder = new ViewHolder(row, strTitle);
            Log.v(TAG, "getView setup onclick for pos [" + position + "] and title ["+ strTitle + "]");
            holder.viewTitle.setTag(strTitle);
            row.setTag(holder);
        }

        return row;
    }
} 
```

当我运行它时，我希望收到一堆：

```
getView for [x]. holder [strTitle [7777777] viewTitle [7777777] viewTitle title (tag)  [7777777] ]
getView other info: rendering view title [7777777] 
```

如果文章标题是 7777777。我实际上收到的是一种奇怪的混合值

```
(4 items visible at a time, first page)
getView for [0]. holder [null holder]
getView other info: rendering view title [1111111]
getView setup onclick for pos [0] and title [1111111]
getView for [1]. holder [null holder]
getView other info: rendering view title [2222222]
getView setup onclick for pos [1] and title [2222222]
getView for [2]. holder [null holder]
getView other info: rendering view title [3333333]
getView setup onclick for pos [2] and title [3333333]
getView for [3]. holder [null holder]
getView other info: rendering view title [4444444]
getView setup onclick for pos [3] and title [4444444]

(page down)

getView for [4]. holder [strTitle [1111111] viewTitle [5555555] viewTitle title (tag)  [1111111] ]
getView other info: rendering view title [5555555]
getView for [5]. holder [null holder]
getView other info: rendering view title [6666666]
getView setup onclick for pos [5] and title [6666666]

one more down

getView for [6]. holder [strTitle [2222222] viewTitle [7777777] viewTitle title (tag)  [2222222] ]
getView other info: rendering view title [7777777]
getView for [7]. holder [strTitle [3333333] viewTitle [8888888] viewTitle title (tag)  [3333333] ]
getView other info: rendering view title [8888888]
getView for [8]. holder [strTitle [4444444] viewTitle [9999999] viewTitle title (tag)  [4444444] ]
getView other info: rendering view title [9999999]

(scroll up)

getView for [4]. holder [strTitle [4444444] viewTitle [5555555] viewTitle title (tag)  [4444444] ]
getView other info: rendering view title [5555555]
getView for [3]. holder [strTitle [3333333] viewTitle [4444444] viewTitle title (tag)  [3333333] ]
getView other info: rendering view title [4444444]

(scroll up again)

getView for [2]. holder [strTitle [1111111] viewTitle [3333333] viewTitle title (tag)  [1111111] ]
getView other info: rendering view title [3333333]
getView for [1]. holder [strTitle [2222222] viewTitle [2222222] viewTitle title (tag)  [2222222] ]
getView other info: rendering view title [2222222]
getView for [0]. holder [strTitle [6666666] viewTitle [1111111] viewTitle title (tag)  [6666666] ]
getView other info: rendering view title [1111111] 
```

1/ 为什么 ViewHolder 的字符串部分不断变化？2 / viewTitle TextView 如何更改其标签内容（上面的 5555555 viewTitle 的标签中一次有 1111111，另一个是 444444）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T19:56:32.667

适配器回收视图以节省资源。想象一个有 1000 行的 ListView：为每一行创建一个唯一的 View 会很慢而且没有必要。所以适配器只创建了足够多的可见视图，再加上几个用于滚动；并且只是一遍又一遍地重复使用这些可回收​​的行。

您所看到的是您为每个可回收行 (0-3) 设置了一个 ViewHolder，但是当您滚动 TextViews 以反映列表数据时。这就是为什么*可回收*行#0 具有行#0 的`strTitle`值，但*实际*行#4 的TextView。

**从评论中添加**

> 理论上我可以为我的 1,000 行制作 1,000 个 [ViewHolders]

是的，你可以，但就像拥有 1000 个唯一行一样，这太过分了。我想提出一种更有效的方法来做你想做的事：

```
class ArticleListCursorAdapter extends SimpleCursorAdapter {
    private int cTitleIndex;

    public ArticleListCursorAdapter(Context context, int layout, Cursor cursor, String[] from, int[] to) {
        super(context, layout, cursor, from, to, 0);

        // Rather than check for the column index of C_TITLE every time 
        //   you use getView(), we check it only once. 
        cTitleIndex = cursor.getColumnIndex(ArticleData.C_TITLE);
    }

    // This method binds the Cursor data to your row
    @Override
    public void bindView(View view, Context context, Cursor cursor) {
        super.bindView(view, context, cursor);

        ViewHolder holder = (ViewHolder) view.getTag();
        // Create a new ViewHolder for each recyclable row
        if(holder == null) {
            holder = new ViewHolder();
            holder.viewTitle = (TextView) view.findViewById(R.id.textTitle);
            view.setTag(holder);
        }

        // Update this value each time the row is recycled, we do this in 
        //   bindView() because we already have access to the Cursor
        holder.strTitle = cursor.getString(cTitleIndex);

        // I'm not sure what this does but I kept it
        holder.viewTitle.setTag(holder.strTitle);
    }

    public class ViewHolder {
        String strTitle;
        // Changed viewTitle to a TextView to unnecessary conversions in this example
        TextView viewTitle; 
    }
} 
```

我将所有内容从 getView() 移至 bindView()。在 CursorAdapter 中，getView() 方法调用 bindView()，这是与 Cursor 相关的所有数据发生的地方。由于您的大部分代码都与游标相关，因此将代码移到此处可以节省在 getView() 中查找游标的额外工作。您仍然可以覆盖 getView() 并调用 ViewHolder，但在这种情况下不再需要。

我还取消了对列索引的搜索，以停止那里的额外工作。（了解这并不完美，调用诸如 adapter.changeCursor() 之类的方法可能会重新排列列索引，因此您需要重新检查索引。但这是一个基本示例，我不想过度思考。 )

现在，如果您重新添加 LogCat 语句，您会注意到当您向上和向下滚动时，该行将保留匹配的 111111 和 111111 以及 444444 和 444444 对。希望能解决一些问题！

# google-maps - 添加到自定义 Google 地图的访客

> ID：11869885
> 
> 赞同：0
> 
> 时间：2012-08-08T17:24:21.277
> 
> 标签：google-maps, mashup

我和我的朋友有一个项目，我们正在尝试使用 Google 地图来完成。我们希望能够让人们访问我们的网站并将标记添加/拖动到自定义谷歌地图上的任何地方。我环顾四周寻找可以模仿的东西，但无济于事。

如果有人可以请帮助我们。我们也不是要找人来给我们答案，而是要引导我们朝着正确的方向前进。我们宁愿学习如何做到这一点，也不愿把它交给我们。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T18:22:51.823

非常简单，您可以在地图上设置一个点击事件，为您提供点击的纬度和经度，并使用它来创建标记。当你这样做时，将`draggable`属性设置为 true。这允许用户拖动它，当它着陆时会触发另一个事件。

一些可能有用的信息： [https](https://developers.google.com/maps/documentation/javascript/events) ://developers.google.com/maps/documentation/javascript/events https://developers.google.com/maps/documentation/javascript/overlays#Markers [https://developers.google .com/maps/documentation/javascript/reference#Marker](https://developers.google.com/maps/documentation/javascript/reference#Marker)（查看事件部分）

# powershell - 为什么我在 Windows 7 上的 Powershell 3.0 中看不到工作流模块？

> ID：11869887
> 
> 赞同：1
> 
> 时间：2012-08-08T17:24:25.143
> 
> 标签：powershell, windows-7, workflow

我最近在我的 Windows 7 机器上安装了 Windows6.1-KB2506143-x64，以便我可以使用 Powershell 3.0。在我运行更新并启动 Powershell 窗口后，它肯定是第 3 版。但是，似乎没有安装 Workflow 的东西。运行 Get-Module -ListAvailable 没有显示工作流内容：

```
ModuleType Name                                ExportedCommands
---------- ----                                ----------------
Manifest   BitsTransfer                        {Add-BitsFile, Remove-BitsTransfer, Complete-BitsTransfer, Get-BitsTr...
Manifest   CimCmdlets                          {Get-CimAssociatedInstance, Get-CimClass, Get-CimInstance, Get-CimSes...
Script     ISE                                 {New-IseSnippet, Import-IseSnippet, Get-IseSnippet}
Manifest   Microsoft.PowerShell.Diagnostics    {Get-WinEvent, Get-Counter, Import-Counter, Export-Counter...}
Manifest   Microsoft.PowerShell.Host           {Start-Transcript, Stop-Transcript}
Manifest   Microsoft.PowerShell.Management     {Add-Content, Clear-Content, Clear-ItemProperty, Join-Path...}
Manifest   Microsoft.PowerShell.Security       {Get-Acl, Set-Acl, Get-PfxCertificate, Get-Credential...}
Manifest   Microsoft.PowerShell.Utility        {Format-List, Format-Custom, Format-Table, Format-Wide...}
Manifest   Microsoft.WSMan.Management          {Disable-WSManCredSSP, Enable-WSManCredSSP, Get-WSManCredSSP, Set-WSM...
Script     PSDiagnostics                       {Disable-PSTrace, Disable-PSWSManCombinedTrace, Disable-WSManTrace, E...
Binary     PSScheduledJob                      {New-JobTrigger, Add-JobTrigger, Remove-JobTrigger, Get-JobTrigger...}
Manifest   TroubleshootingPack                 {Get-TroubleshootingPack, Invoke-TroubleshootingPack} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T02:11:17.890

如果您在 64 位 Windows 7 上运行，请确保您正在运行 64 位 PowerShell 控制台。PSWorkflow 模块在 x86 PowerShell 控制台中不可用。

# mysql - 从 MySQL 切换到 Cassandra (NoSQL) 的未来潜力

> ID：11869888
> 
> 赞同：0
> 
> 时间：2012-08-08T17:24:27.177
> 
> 标签：mysql, sql, database-design, nosql, cassandra

我计划最终将我网站的数据库系统从 MySQL 切换到 NoSQL（在本例中为 Cassandra）。

根据我目前对 Cassandra 的了解，没有联接之类的东西，而只是更有效地工作的更大记录。我不是 NoSQL atm 方面的专家，实际上我对它的了解非常少，并且对它的很多工作原理感到非常困惑......

我的 Web 项目的目标之一是切换到 Python 和 Cassandra，以获得更高级和更快的解决方案，因为我的网站开始增长，并且我希望能够通过额外的服务器轻松扩展它。

现在，我正在为我的网站设计一项新功能，即获取文件并从中创建文件夹的能力。到目前为止，这是我最初使用的：[如何加入/子查询第二个表](https://stackoverflow.com/questions/11869393/how-to-join-subquery-a-second-table/11869474)（我刚刚问的一个问题）

然后人们建议对数据进行规范化并使其成为一个 3 表系统，其中一个用于文件夹，一个用于文件夹/文件，一个用于文件。@egrunin 回答了我的问题，甚至给了我 NoSQL 的信息，但我真的很想用第二个来源检查它，以确保这是正确的方法。

还有 SQL 到 NoSQL 的转换工具吗？

所以我的最终目标是在数据库中设计这个文件夹/文件系统（以及我正在添加的其他功能），以便当我从 SQL 切换到 NoSQL 时，我将准备好并且我的所有数据的转换将会很多更轻松。

非常感谢任何关于将 SQL 转换为 NoSQL、Cassandra 或 NoSQL 工作原理的教程、指南和信息，到目前为止，Cassandra 文档让我非常困惑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T17:39:31.483

在 Couchbase，我们最近举办了一个关于从 RDBMS 过渡到 NoSQL 的网络研讨会系列。这显然是从 JSON 文档的角度来看的，但是很多课程都适用于任何分布式数据库。

[http://www.couchbase.com/webinars](http://www.couchbase.com/webinars)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T17:37:25.637

MasterGberry：

> 我的 Web 项目的目标之一是切换到 Python 和 Cassandra，以获得更高级和更快的解决方案，因为我的网站开始增长，并且我希望能够通过额外的服务器轻松扩展它。

在切换到 Cassandra 之前，您需要清楚地量化这一点。

MySQL 可以做[令人惊奇的事情](http://shop.oreilly.com/product/9780596101718.do)，Cassandra 也可以，但是切换到 Cassandra 通常不能仅仅因为想要更快地完成事情而被驱动，因为它们可能不会更快 - 至少在你习惯使用 MySQL 做得很好的领域（列明确定义的表格数据的水平数值聚合）。

我绝不会阻止过渡，但我对期望提出警告。

这可能是一个很好的阅读：http: [//itsecrets.wordpress.com/2012/01/12/jumping-from-mysql-to-cassandra-a-success-story/](http://itsecrets.wordpress.com/2012/01/12/jumping-from-mysql-to-cassandra-a-success-story/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T10:19:22.907

Cassandra 并不是真的要成为应用程序的主要存储。它的主要目的之一是存储顺序数据并通过键查找将所有数据拉回。一个例子是日志记录。有趣的是，行键没有排序，但列名是排序的。因此，日志记录每分钟都有一个键，然后为每个日志条目创建一个新列，并以顺序时间戳作为列名。当然，这只是一个例子，聊天记录是另一个例子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T14:40:58.533

实际上，您可以使用 playOrm 之类的工具来支持连接，但仅限于分区而不是整个表。因此，如果您按月或按帐户进行分区，您可以获取帐户 4536 分区并查询将其与其他内容（另一个较小的表或另一个表的另一个分区）连接的​​分区。

如果您有一个具有大量客户端的系统并且每个客户端都真正独立于另一个客户端，这将非常有用，因为您可以将所有客户端信息自行包含到该客户端的所有表的分区中。

后来，迪恩

# mysql - 从 csv 到 mysql 的日期转换

> ID：11869894
> 
> 赞同：0
> 
> 时间：2012-08-08T17:24:41.513
> 
> 标签：mysql, csv

我正在尝试（通过 phpMyadmin 导入选项）将 csv 文件导入 mysql 表。CSV 文件有一个格式为`mm/dd/yyyy`(10/21/2009) 的日期列，mysql 表中的列具有日期格式`yyyy-mm-dd`。我尝试更改 csv 中的格式，但在导入 mysql 后，日期列显示`0000-00-00`或其他一些错误日期。哪个是存储在 csv 文件中的正确日期格式，以便在导入后显示正确的日期？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T17:26:52.507

*   为导入的数据使用日期列（即`varchar`）
*   *为新*的日期列添加一列（即`Date`）
*   用于[`STR_TO_DATE()`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)转换。
*   删除*旧*日期列（可选）

在你的情况下：

```
UPDATE your_table SET new_date_col = STR_TO_DATE(old_date_col, '%m/%d/%Y') 
```

根据您的需要调整原始格式。

# c# - 在 C# 中找不到 WMI 碎片整理方法

> ID：11869896
> 
> 赞同：1
> 
> 时间：2012-08-08T17:24:55.483
> 
> 标签：c#, wmi

我正在尝试使用 WMI 对我的 C: Drive 进行碎片整理。

我正在运行 Windows 7 Pro x64。

```
Console.WriteLine(SMARTManager.Instance.SMARTHDD.Defrag("C:", ref ERR)); 
```

**功能：**

```
public string Defrag(string a_DriveName, ref string ERR)
{
    try
    {
        ManagementObject classInstance = 
            new ManagementObject("root\\CIMV2", 
            String.Format("Win32_Volume.DeviceID='{0}'", a_DriveName),
            null);

        // Obtain in-parameters for the method
        ManagementBaseObject inParams = 
            classInstance.GetMethodParameters("Defrag");

        // Add the input parameters.
        inParams["Force"] =  true;

        // Execute the method and obtain the return values.
        ManagementBaseObject outParams = 
            classInstance.InvokeMethod("Defrag", inParams, null);

        // List outParams
        string callback = "Out parameters:\n" + "ReturnValue: " + outParams["ReturnValue"];
        return callback;
    }
    catch (ManagementException err)
    {
        ERR = "An error occurred while trying to execute the WMI method: " + err.Message;
    }

    return null;
} 
```

我从 WMI Code Creator 获得了这段代码，但是当我运行它时，它返回一个异常，说“未找到”。

有没有其他人试过这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T21:59:00.650

此错误是因为您将错误的对象路径传递给[`ManagementObject`](http://msdn.microsoft.com/en-us/library/system.management.managementobject.aspx)构造函数，DeviceID 看起来像`\\?\Volume{3a7a882b-8713-11e0-bfc8-806e6f6e6963}\`，因此要解决您的问题，您必须传递有效的 DeviceID 或修改代码以使用类的`Name`属性[`Win32_Volume`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394515%28v=vs.85%29.aspx)。

检查使用该`Name`属性的示例代码

```
using System;
using System.Collections.Generic;
using System.Management;
using System.Text;

namespace GetWMI_Info
{
    class Program
    {

        public static void  Defrag(string a_DriveName)
        { 

            try
            {

                string ComputerName = "localhost";
                ManagementScope Scope;                

                if (!ComputerName.Equals("localhost", StringComparison.OrdinalIgnoreCase)) 
                {
                    ConnectionOptions Conn = new ConnectionOptions();
                    Conn.Username  = "";
                    Conn.Password  = "";
                    Conn.Authority = "ntlmdomain:DOMAIN";
                    Scope = new ManagementScope(String.Format("\\\\{0}\\root\\CIMV2", ComputerName), Conn);
                }
                else
                    Scope = new ManagementScope(String.Format("\\\\{0}\\root\\CIMV2", ComputerName), null);

                Scope.Connect();
                string WQL = String.Format("SELECT * FROM Win32_Volume Where Name='{0}'", a_DriveName);
                ObjectQuery Query = new ObjectQuery(WQL);
                ManagementObjectSearcher Searcher = new ManagementObjectSearcher(Scope, Query);

                foreach (ManagementObject ClassInstance in Searcher.Get())
                {
                ManagementBaseObject inParams = ClassInstance.GetMethodParameters("Defrag");
                ManagementBaseObject outParams= ClassInstance.InvokeMethod("Defrag", inParams ,null);
                Console.WriteLine("{0,-35} {1,-40}","DefragAnalysis",outParams["DefragAnalysis"]);
                Console.WriteLine("{0,-35} {1,-40}","ReturnValue",outParams["ReturnValue"]);                
                }

            }
            catch (Exception e)
            {
                Console.WriteLine(String.Format("Exception {0} Trace {1}",e.Message,e.StackTrace));
            }

        }

        static void Main(string[] args)
        {
            //the drive name  must be escaped 
            Defrag("F:\\\\");
            Console.WriteLine("Press Enter to exit");
            Console.Read();
        }

} 
```

# javascript - 在 Node.js 中导出文件的整个范围

> ID：11869897
> 
> 赞同：1
> 
> 时间：2012-08-08T17:24:56.507
> 
> 标签：javascript, node.js

我制作了一个也可以在服务器端使用的游戏引擎，并计划用 Node.js 运行它。

引擎完全打包到一个文件中，最后，我像这样导出它：

```
module.exports = Irenic; //Irenic is just the name of the engine. This is actually an object housing most of the classes and functions. 
```

但是，如果我在`Irenic`对象之外创建了一些函数呢？例如，我重新定义`setInterval`了`setTimeout`函数来跟踪有多少超时/间隔处于活动状态，现在我意识到我无法在引擎所在的文件之外使用它们。

如何导出文件中的所有内容？（我已经试过了`module.exports = this;`，但没用。导出了一个空对象。）

**编辑 1**：我希望能够简单地`call()`包含我包含引擎的文件中的函数，而不是执行类似`exportedObj.call()`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T17:29:51.300

您可以将引擎 + 函数包装到您导出的对象中。

```
module.exports = {engine: Irenic, fun: function(){...} ... } 
```

# java - Spring NamedParameterJdbcTemplate Query 的性能很慢

> ID：11869899
> 
> 赞同：4
> 
> 时间：2012-08-08T17:25:01.400
> 
> 标签：java, oracle, spring, jdbc, spring-jdbc

我正在开发一个需要对 Oracle 数据库进行 JDBC 调用的项目。我已经设置了 UCP 池以使用 SpringJDBC。我有一个相当简单的查询，我正在执行如下...

`SELECT * FROM TABLE WHERE ID IN (:ids)`

我设置此查询的 java 代码如下所示...

```
NamedParameterJdbcTemplate template = new NamedParameterJdbcTemplate(datasource);
Map<String,Object> paramMap = new HashMap<String,Object>();
paramMap.put("ids", Arrays.asList(idArray));

List<Result> results = template.query("SELECT * FROM TABLE WHERE ID IN (:ids)",
    paramMap, new ResultRowMapper()); 
```

只要数组中只有 1 个 id，这一切都可以正常运行。当我添加第二个 ID 时，查询需要将近 5 分钟才能运行。如果我采用确切的查询并在 SQLDeveloper 中执行它，则需要 0.093 秒。

我的代码或配置一定出了问题……有人有什么想法吗？

编辑：

我去掉了 Spring NamedParameterJdbcTemplate 的使用，只使用了直接的 Jdbc，一切似乎都表现得很好。NamedParameterJdbcTemplate 有什么不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T21:06:47.907

好吧，在这种情况下，我发现了我的直接 jdbc 解决方案和我的 spring-jdbc 解决方案之间的区别......看起来就像下面的@Annjawn 解释的那样，这是一个绑定变量问题，而不是一个 spring-jdbc 问题。我的 spring-jdbc 问题试图将变量绑定到索引（不存在），从而进行表扫描......

我的直接 JDBC 解决方案最终只是进行字符串替换并执行，因此没有表扫描......

下面的链接解释了差异。

[http://bytes.com/topic/oracle/answers/65559-jdbc-oracle-beware-bind-variables](http://bytes.com/topic/oracle/answers/65559-jdbc-oracle-beware-bind-variables)

# php - Cookie 未在 Opera 中正确来回发送

> ID：11869902
> 
> 赞同：19
> 
> 时间：2012-08-08T17:25:14.143
> 
> 标签：php, cookies, opera, trigger.io

首先，我不确定这是否是 Opera 12.01 中的问题，但问题仅出现在 Opera 中。我已经在 Android 和 iPhone 上的 FF14、Chrome 21、Safari 5 (Windows) 和 Safari Mac 和 Webkit 浏览器中进行了测试。

我的应用程序在 trigger.io forge 平台上运行，[并](https://i.stack.imgur.com/VCHoa.png)使用代理将请求从 Web 应用程序路由到服务。代理只是简单地转发请求和 cookie，这在大多数浏览器中都按预期工作。

在蜻蜓检查请求后，我注意到服务器在响应中发送了正确的标头，但 Opera 似乎忽略了设置值。我想知道这是否是由于 cookie 的路径值配置错误造成的。我附上了 Firefox 和 Opera 中 2 个请求的屏幕截图。

正如您在屏幕中看到的那样，FF 看到 cookie 标题并适当地设置它们，但 Opera 没有。

[火狐请求](https://i.stack.imgur.com/VCHoa.png)

![火狐请求](../Images/2b94f483f8d70c5367d15a83ee74a04f.png)

[Opera 请求 1 屏幕](https://i.stack.imgur.com/KdXEM.png)

![歌剧请求 1](../Images/77e980be1b856b753474129a523a66a5.png)

[Opera 请求 2 屏幕](https://i.stack.imgur.com/HLlkn.png)

![歌剧请求 2](../Images/d285e2f906e997b3126a743db6cef855.png)

我没有包含来自代理的代码来进行请求转发，所以如果你需要它来获得一些见解，请告诉我。在服务端，我正在运行 PHP 和 Codeigniter。如果我需要在我的环境中添加更多信息，请告诉我，谢谢。

更新：即使在我不使用自定义 TLD 的生产环境中也会出现此问题。其他使用 cookie 的网站运行良好，并且启用了 cookie。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T14:36:26.217

cookie 值中的双引号在形式上是非法的。如果您将它们转义为**%22**它将起作用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-15T17:59:29.793

您是否检查过这是否是 cookie 域的问题？我假设您正在使用 Javascript 来设置/读取 cookie？无论如何，您可能需要检查 4 个 cookie 域问题（我知道旧 FF 版本存在这些问题）：

1 - 检查非法 cookie 字符：[允许的 cookie 字符](https://stackoverflow.com/questions/1969232/allowed-characters-in-cookies)可能不允许您在 cookie 名称中使用 '-' 或 '='，并且您根本不应该在 cookie 中使用非 ASCII 字符。base64 编码可能会处理这个问题。

2 - 检查您设置 cookie 的域（通过 javascript 代码或任何其他方式）与执行代码的域相同。

3 - 检查 cookie 域是否不是 localhost；看看您是否可以测试从远程域设置 cookie

4 - 如果您使用 JS 设置 cookie，请尝试测试是否可以在浏览器中使用 CGI 设置 cookie，以确保这不是浏览器问题。如果它应该有效，请查看您是否可以使用 JS 读取 cookie（而不是设置它）。

请在评论中告诉我这是怎么回事，我已经多次处理过类似的问题，并且根据您从这些检查中得到的结果，我很确定我可以帮助您解决问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-12T16:34:12.600

查看那些 Opera 屏幕截图，它们似乎是在同一秒内处理的 AJAX / XHR 请求。Javascript是否有可能“同时”触发这两个请求，因此“第一个”的响应在构建“第二个”的请求之前没有到达 - 因此尚未设置cookie？

我不熟悉您使用的技术/工具包，所以不知道这些是库存代码还是您的自定义应用程序的一部分。

# sql-server - 无法从 SQL Server 2008 连接到 MS Access 文件

> ID：11869908
> 
> 赞同：0
> 
> 时间：2012-08-08T17:25:24.597
> 
> 标签：sql-server, ms-access

过去一周左右，我一直在尝试以编程方式将数据从 Microsoft Access .mdb 文件导入 SQL Server 2008 表。除了错误，我什么也没得到，解决一个问题只会揭示另一个问题。我将文件放入链接服务器，现在当我尝试使用以下命令查询它时：

```
Select * from OPENQUERY(Importdata, 'Select * from [IMBPieceBC]') 
```

我得到错误：

```
OLE DB provider "Microsoft.Jet.OLEDB.4.0" for linked server "Importdata" returned message "Cannot open database ''.  It may not be a database that your application recognizes, or the file may be corrupt.".
Msg 7303, Level 16, State 1, Line 1
Cannot initialize the data source object of OLE DB provider "Microsoft.Jet.OLEDB.4.0" for linked server "Importdata". 
```

我已经阅读了一些在注册表中重新链接 dll 的建议，但我已经这样做了，但我仍然收到错误消息。我还能做些什么来修复它，或者至少找出问题所在？

将数据迁移到 SQL Server 实例不是一种选择。mdb 文件是由第三方程序生成的，因此我们无能为力。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T18:44:47.437

我的工作场所也有类似的情况——第三方应用程序在 MDB 中维护数据，但其他应用程序需要访问它。我是如何做到的，这个“中间”应用程序具有指向 SQL Server 表和 MDB 表的链接。您可以使用查询或 VBA 编写的表单事件，使用 INSERT INTO 查询将涉及的 MDB 表中的信息传输到相应的 SQL Server 表中，并配备 SELECT FROM 子查询来提供插入的值。

# ruby-on-rails - Rails 2.3.11 Oauth2 SSL 窗口

> ID：11869909
> 
> 赞同：0
> 
> 时间：2012-08-08T17:25:32.273
> 
> 标签：ruby-on-rails, ssl, oauth-2.0

我见过与此类似的问题，但建议的解决方案似乎不起作用。

我正在尝试使用[oauth2](https://github.com/intridea/oauth2/)执行 oauth，当我尝试获取 access_token 时，出现以下错误：

```
SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed 
```

我在用着：

```
rails 2.3.11
faraday 0.8.1
oauth2 0.8.0 
```

我在 Windows 7 上运行。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T17:36:40.780

把它放在 development.rb

```
require 'openssl'
OpenSSL::SSL::VERIFY_PEER = OpenSSL::SSL::VERIFY_NONE 
```

这将解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T20:20:37.280

*正确的*解决方案是使用适当的证书包初始化 OAuth::Client （例如，它可以从 curl 分发中获取）。

```
client = OAuth2::Client.new(client_id, client_secret, ssl: {ca_file: "/path/to/ca-bundle.crt"}) 
```

# python - pandas：使用运算符链接过滤 DataFrame 的行

> ID：11869910
> 
> 赞同：399
> 
> 时间：2012-08-08T17:25:37.780
> 
> 标签：python, pandas, dataframe

中的大多数操作`pandas`都可以通过运算符链接（`groupby`, `aggregate`,`apply`等）来完成，但我发现过滤行的唯一方法是通过普通括号索引

```
df_filtered = df[df['column'] == value] 
```

这是不吸引人的，因为它需要我分配`df`给一个变量，然后才能过滤它的值。是否有类似以下的内容？

```
df_filtered = df.mask(lambda x: x['column'] == value) 
```

* * *

## 回答 #1

> 赞同：454
> 
> 时间：2012-08-08T20:10:43.290

我不完全确定你想要什么，你的最后一行代码也无济于事，但无论如何：

“链接”过滤是通过“链接”布尔索引中的条件来完成的。

```
In [96]: df
Out[96]:
   A  B  C  D
a  1  4  9  1
b  4  5  0  2
c  5  5  1  0
d  1  3  9  6

In [99]: df[(df.A == 1) & (df.D == 6)]
Out[99]:
   A  B  C  D
d  1  3  9  6 
```

如果要链接方法，可以添加自己的掩码方法并使用该方法。

```
In [90]: def mask(df, key, value):
   ....:     return df[df[key] == value]
   ....:

In [92]: pandas.DataFrame.mask = mask

In [93]: df = pandas.DataFrame(np.random.randint(0, 10, (4,4)), index=list('abcd'), columns=list('ABCD'))

In [95]: df.ix['d','A'] = df.ix['a', 'A']

In [96]: df
Out[96]:
   A  B  C  D
a  1  4  9  1
b  4  5  0  2
c  5  5  1  0
d  1  3  9  6

In [97]: df.mask('A', 1)
Out[97]:
   A  B  C  D
a  1  4  9  1
d  1  3  9  6

In [98]: df.mask('A', 1).mask('D', 6)
Out[98]:
   A  B  C  D
d  1  3  9  6 
```

* * *

## 回答 #2

> 赞同：138
> 
> 时间：2015-01-26T21:44:19.280

过滤器可以使用 Pandas[查询](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.query.html)链接：

```
df = pd.DataFrame(np.random.randn(30, 3), columns=['a','b','c'])
df_filtered = df.query('a > 0').query('0 < b < 2') 
```

过滤器也可以组合在一个查询中：

```
df_filtered = df.query('a > 0 and 0 < b < 2') 
```

* * *

## 回答 #3

> 赞同：76
> 
> 时间：2012-08-09T23:20:59.093

@lodagro 的答案很棒。我将通过将掩码函数概括为：

```
def mask(df, f):
  return df[f(df)] 
```

然后你可以做类似的事情：

```
df.mask(lambda x: x[0] < 0).mask(lambda x: x[1] > 0) 
```

* * *

## 回答 #4

> 赞同：34
> 
> 时间：2017-09-05T10:14:25.817

从[0.18.1 版本开始](https://pandas.pydata.org/pandas-docs/stable/indexing.html#selection-by-callable)，该`.loc`方法接受一个可调用的选择。与 lambda 函数一起，您可以创建非常灵活的可链接过滤器：

```
import numpy as np
import pandas as pd

df = pd.DataFrame(np.random.randint(0,100,size=(100, 4)), columns=list('ABCD'))
df.loc[lambda df: df.A == 80]  # equivalent to df[df.A == 80] but chainable

df.sort_values('A').loc[lambda df: df.A > 80].loc[lambda df: df.B > df.A] 
```

如果您所做的只是过滤，您也可以省略`.loc`.

* * *

## 回答 #5

> 赞同：21
> 
> 时间：2018-03-22T14:44:14.537

pandas 为 Wouter Overmeire 的答案提供了两种替代方案，不需要任何覆盖。一个是`.loc[.]`可调用的，如

```
df_filtered = df.loc[lambda x: x['column'] == value] 
```

另一个是`.pipe()`，如

```
df_filtered = df.pipe(lambda x: x.loc[x['column'] == value]) 
```

* * *

## 回答 #6

> 赞同：19
> 
> 时间：2017-06-04T04:40:30.143

我提供了这个作为额外的例子。[这与https://stackoverflow.com/a/28159296/](https://stackoverflow.com/a/28159296/)的答案相同

我将添加其他编辑以使这篇文章更有用。

[**`pandas.DataFrame.query`**](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.query.html)
`query`正是为此目的而制作的。考虑数据框`df`

```
import pandas as pd
import numpy as np

np.random.seed([3,1415])
df = pd.DataFrame(
    np.random.randint(10, size=(10, 5)),
    columns=list('ABCDE')
)

df

   A  B  C  D  E
0  0  2  7  3  8
1  7  0  6  8  6
2  0  2  0  4  9
3  7  3  2  4  3
4  3  6  7  7  4
5  5  3  7  5  9
6  8  7  6  4  7
7  6  2  6  6  5
8  2  8  7  5  8
9  4  7  6  1  5 
```

让我们`query`用来过滤所有行`D > B`

```
df.query('D > B')

   A  B  C  D  E
0  0  2  7  3  8
1  7  0  6  8  6
2  0  2  0  4  9
3  7  3  2  4  3
4  3  6  7  7  4
5  5  3  7  5  9
7  6  2  6  6  5 
```

我们连锁

```
df.query('D > B').query('C > B')
# equivalent to
# df.query('D > B and C > B')
# but defeats the purpose of demonstrating chaining

   A  B  C  D  E
0  0  2  7  3  8
1  7  0  6  8  6
4  3  6  7  7  4
5  5  3  7  5  9
7  6  2  6  6  5 
```

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2015-03-25T04:00:24.160

我有同样的问题，只是我想将标准组合成 OR 条件。Wouter Overmeire 给出的格式将标准组合成一个 AND 条件，使得两者都必须满足：

```
In [96]: df
Out[96]:
   A  B  C  D
a  1  4  9  1
b  4  5  0  2
c  5  5  1  0
d  1  3  9  6

In [99]: df[(df.A == 1) & (df.D == 6)]
Out[99]:
   A  B  C  D
d  1  3  9  6 
```

但是我发现，如果您将每个条件包装起来`(... == True)`并用管道连接条件，则条件将组合在 OR 条件中，只要其中任何一个为真，就满足：

```
df[((df.A==1) == True) | ((df.D==6) == True)] 
```

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2016-05-27T19:00:59.680

我的回答和其他人一样。如果您不想创建新功能，可以使用 pandas 已经为您定义的功能。使用管道方法。

```
df.pipe(lambda d: d[d['column'] == value]) 
```

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2018-01-29T06:18:36.400

只想添加一个演示`loc`，不仅可以按行过滤，还可以按列过滤，以及链式操作的一些优点。

下面的代码可以按值过滤行。

```
df_filtered = df.loc[df['column'] == value] 
```

通过稍微修改它，您也可以过滤列。

```
df_filtered = df.loc[df['column'] == value, ['year', 'column']] 
```

那么为什么我们需要一个链式方法呢？答案是，如果你有很多操作，它很容易阅读。例如，

```
res =  df\
    .loc[df['station']=='USA', ['TEMP', 'RF']]\
    .groupby('year')\
    .agg(np.nanmean) 
```

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2013-04-18T04:44:28.577

如果您想应用所有常见的布尔掩码以及通用掩码，您可以将以下内容放入文件中，然后简单地将它们全部分配如下：

```
pd.DataFrame = apply_masks() 
```

用法：

```
A = pd.DataFrame(np.random.randn(4, 4), columns=["A", "B", "C", "D"])
A.le_mask("A", 0.7).ge_mask("B", 0.2)... (May be repeated as necessary 
```

这有点 hacky，但如果您根据过滤器不断地切割和更改数据集，它可以让事情变得更干净一些。在 gen_mask 函数中还有一个改编自 Daniel Velkov 的通用过滤器，您可以将其与 lambda 函数一起使用，或者如果需要的话。

要保存的文件（我使用masks.py）：

```
import pandas as pd

def eq_mask(df, key, value):
    return df[df[key] == value]

def ge_mask(df, key, value):
    return df[df[key] >= value]

def gt_mask(df, key, value):
    return df[df[key] > value]

def le_mask(df, key, value):
    return df[df[key] <= value]

def lt_mask(df, key, value):
    return df[df[key] < value]

def ne_mask(df, key, value):
    return df[df[key] != value]

def gen_mask(df, f):
    return df[f(df)]

def apply_masks():

    pd.DataFrame.eq_mask = eq_mask
    pd.DataFrame.ge_mask = ge_mask
    pd.DataFrame.gt_mask = gt_mask
    pd.DataFrame.le_mask = le_mask
    pd.DataFrame.lt_mask = lt_mask
    pd.DataFrame.ne_mask = ne_mask
    pd.DataFrame.gen_mask = gen_mask

    return pd.DataFrame

if __name__ == '__main__':
    pass 
```

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2018-04-19T08:17:01.467

> 这是不吸引人的，因为它需要我分配`df`给一个变量，然后才能过滤它的值。

```
df[df["column_name"] != 5].groupby("other_column_name") 
```

似乎有效：您也可以嵌套`[]`运算符。也许他们在您提出问题后添加了它。

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2017-11-27T18:12:09.100

这个解决方案在实现方面更加骇人听闻，但我发现它在使用方面更干净，而且它肯定比其他提议的更通用。

[https://github.com/toobaz/generic_utils/blob/master/generic_utils/pandas/where.py](https://github.com/toobaz/generic_utils/blob/master/generic_utils/pandas/where.py)

您不需要下载整个 repo：保存文件并执行

```
from where import where as W 
```

应该足够了。然后你像这样使用它：

```
df = pd.DataFrame([[1, 2, True],
                   [3, 4, False], 
                   [5, 7, True]],
                  index=range(3), columns=['a', 'b', 'c'])
# On specific column:
print(df.loc[W['a'] > 2])
print(df.loc[-W['a'] == W['b']])
print(df.loc[~W['c']])
# On entire - or subset of a - DataFrame:
print(df.loc[W.sum(axis=1) > 3])
print(df.loc[W[['a', 'b']].diff(axis=1)['b'] > 1]) 
```

一个稍微不那么愚蠢的用法示例：

```
data = pd.read_csv('ugly_db.csv').loc[~(W == '$null$').any(axis=1)] 
```

顺便说一句：即使在您只使用布尔值的情况下，

```
df.loc[W['cond1']].loc[W['cond2']] 
```

可以比

```
df.loc[W['cond1'] & W['cond2']] 
```

因为它只评估`cond2`where `cond1`is `True`。

[免责声明：我首先在其他地方](https://stackoverflow.com/a/47516891/2858145)给出了这个答案，因为我没有看到这个。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2018-01-25T07:22:23.910

您还可以利用*numpy*库进行逻辑操作。它相当快。

```
df[np.logical_and(df['A'] == 1 ,df['B'] == 6)] 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2017-07-26T03:35:33.333

如果您将列设置为作为索引进行搜索，那么您可以使用`DataFrame.xs()`横截面。这不像`query`答案那样通用，但在某些情况下可能很有用。

```
import pandas as pd
import numpy as np

np.random.seed([3,1415])
df = pd.DataFrame(
    np.random.randint(3, size=(10, 5)),
    columns=list('ABCDE')
)

df
# Out[55]: 
#    A  B  C  D  E
# 0  0  2  2  2  2
# 1  1  1  2  0  2
# 2  0  2  0  0  2
# 3  0  2  2  0  1
# 4  0  1  1  2  0
# 5  0  0  0  1  2
# 6  1  0  1  1  1
# 7  0  0  2  0  2
# 8  2  2  2  2  2
# 9  1  2  0  2  1

df.set_index(['A', 'D']).xs([0, 2]).reset_index()
# Out[57]: 
#    A  D  B  C  E
# 0  0  2  2  2  2
# 1  0  2  1  1  0 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2022-01-26T22:27:00.627

因此，我的看法是，在对数据进行子设置以进行分析时，您会做两件事。

*   获取行
*   获取列

Pandas 有多种方法来完成这些操作，以及一些有助于获取行**和**列的技术。对于 Pandas 的新用户来说，这可能会让人感到困惑，因为选择太多了。

您是否使用 iloc、loc、方括号、查询、isin、np.where、掩码等...

**方法链**

现在，方法链是数据处理时的一种很好的工作方式。在 R 中，他们有一个简单的方法，你是`select()`列，你是`filter()`行。

因此，如果我们想在 Pandas 中保持简单，为什么不使用`filter()`for 列和`query()`for 行。这两个都返回数据帧，因此不需要弄乱布尔索引，也不需要添加`df[ ]`返回值。

那看起来像什么：-

```
df.filter(['col1', 'col2', 'col3']).query("col1 == 'sometext'") 
```

然后，您可以链接任何其他方法，例如, `groupby`,`dropna()`等。`sort_values()``reset_index()`

通过保持一致并使用`filter()`来获取列和`query()`行，一段时间后返回代码时会更容易阅读代码。

**但是过滤器可以选择行吗？**

是的，这是真的，但默认情况下`query()`获取行并`filter()`获取列。因此，如果您坚持使用默认值，则无需使用该`axis=`参数。

**询问（）**

query() 可以同时使用//`and`你也可以使用比较运算符。你也可以在里面使用 Python，而不是在里面。`or` `&``|``> , < , >= , <=, ==, !=`

您可以使用@my_list 将列表传递给查询

使用查询获取行的一些示例

```
df.query('A > B')

df.query('a not in b')

df.query("series == '2206'")

df.query("col1 == @mylist")

df.query('Salary_in_1000 >= 100 & Age < 60 & FT_Team.str.startswith("S").values') 
```

**筛选（）**

所以过滤器基本上就像使用括号一样，`df[]`或者`df[[]]`它使用标签来选择列。但它不仅仅是括号符号。

filter 具有`like=`参数，以帮助选择具有部分名称的列。

```
df.filter(like='partial_name',) 
```

过滤器也有正则表达式来帮助选择

```
df.filter(regex='reg_string') 
```

所以总结一下这种工作方式可能不适用于任何情况，例如，如果你想使用索引/切片，那么 iloc 是要走的路。但这似乎是一种可靠的工作方式，可以简化您的工作流程和代码。

# ios - 无法在 xCode 4.4 的新项目上的 UIWebView 上显示键盘

> ID：11869918
> 
> 赞同：0
> 
> 时间：2012-08-08T17:26:09.560
> 
> 标签：ios, xcode, xcode4, uiwebview, keyboard

我刚刚在 xCode 4.4 上创建了一个新的单视图应用程序。它是用 .storyboards 文件（而不是 xib）创建的。然后我添加了一个 UIWebView。现在我无法通过代码行显示键盘：

```
[self.window MakeKeyAndVisible]; 
```

`window`因为ViewController.m 上没有任何内容。如何在这个新的 xCode 项目模板上强制在 UIWebView 上显示键盘？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T21:12:53.093

您始终可以从 UIApplicationDelegate 对象获取 window 属性。由于这是一个单例对象，您可以使用：

```
[[UIApplication sharedApplication] delegate]; 
```

在那里您可以到达 window 属性。

# twig - Symfony2 is_granted('IS_AUTHENTICATED_FULLY') 在显示 404 错误页面时，导致 ResourceNotFoundException

> ID：11869921
> 
> 赞同：20
> 
> 时间：2012-08-08T17:26:32.783
> 
> 标签：twig, symfony-2.1

我已设置自定义错误页面以显示文件夹中的某些 HTTP 错误：

```
app/Resources/TwigBundle/views/Exception/ 
```

403 页面 ( `error403.html.twig`) 按预期工作和显示。

500 页 ( `error500.html.twig`) 按预期工作和显示。

404 页面 ( `error404.html.twig`) 引发 500 服务器错误：

> PHP 致命错误：未捕获的异常“Symfony\Component\Routing\Exception\ResourceNotFoundException”

通过进行身份验证检查以显示已通过或未通过身份验证的用户的某些菜单项，会引发错误：

```
{% if is_granted('IS_AUTHENTICATED_FULLY') %} 
```

如果我删除该检查并只允许显示所有菜单项，则页面会按预期加载错误页面。同样，403 页面按原样显示，并且毫无问题地使用了身份验证检查。

我坚持这个。除了文件名之外，页面完全相同。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-04T15:25:01.013

如果 symfony < 2.8 ：

```
{% if app.user is not null and is_granted('ROLE_ADMIN') %} 
```

请参阅：[https ://github.com/symfony/symfony-docs/issues/2078](https://github.com/symfony/symfony-docs/issues/2078)

从 15 年 12 月 17 日开始编辑：

从 2.8 开始不再需要这个，

```
{% if is_granted('ROLE_ADMIN') %} 
```

现在工作正常。

来源：[http ://symfony.com/blog/new-in-symfony-2-8-dx-improvements#allow-to-check-for-security-even-in-pages-not-covered-by-firewalls](http://symfony.com/blog/new-in-symfony-2-8-dx-improvements#allow-to-check-for-security-even-in-pages-not-covered-by-firewalls)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-28T16:44:58.447

自 2.1 起，您不能`is_granted`在 404 页面中使用：

升级文件中提到了

> 防火墙侦听器现在在路由器侦听器之后注册。这意味着特定的防火墙 URL（如 /login_check 和 /logout）现在必须在您的路由配置中定义正确的路由。此外，如果您有自定义的 404 错误页面，请确保您没有使用任何与安全相关的功能，例如`is_granted`上面的。

请参阅： [https ://github.com/symfony/symfony/blob/master/UPGRADE-2.1.md#security](https://github.com/symfony/symfony/blob/master/UPGRADE-2.1.md#security)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-30T08:44:48.263

我建议检查`app.security.token`更严格，`true`即使用户是匿名的也可以进行评估。

如果您检查`app.user`它，它将`false`在异常模板中进行评估，但即使存在防火墙**（** = 常规模板）但用户未登录。这将阻止 - 例如 - 显示登录按钮。

见：[https ://github.com/symfony/symfony-docs/pull/2359](https://github.com/symfony/symfony-docs/pull/2359)

# c++ - 这个函数指针怎么能不指向一个函数呢？

> ID：11869923
> 
> 赞同：3
> 
> 时间：2012-08-08T17:26:40.120
> 
> 标签：c++

为什么指针函数`*pFcn`不指向地址？它指向`Add`，而不是`&Add`。它也不返回地址。这是为什么？

```
int Add(int nX, int nY)
{
    return nX + nY;
}

int main()
{
    // Create a function pointer and make it point to the Add function
    int (*pFcn)(int, int) = Add;
    cout << pFcn(5, 3) << endl; // add 5 + 3

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T17:28:37.250

如果`foo`是一个函数，那么（除了在某些特定情况下*）两者`foo`和都`&foo`表示一个指向函数的指针：函数立即衰减为指向自身的指针，所以`foo(x)`和`(*foo)(x)`都是`(**foo)(x)`一样的。

* * *

当有选择时，更喜欢通过引用而不是通过值传递函数，但是：

```
template <typename R, typename ...Args> R invoke(R (*f)(Args...), Args... args)
{
    return f(args...);

    // bad: "&f" is not useful
}
invoke_p(add, 1, 2); 
```

```
template <typename R, typename ...Args> R invoke_r(R (&f)(Args...), Args... args)
{
    return f(args...);

    // good: "&f" is the expected function pointer
}
invoke_r(add, 1, 2); 
```

* * *

[*) 例如，`sizeof(foo)`和`sizeof(&foo)`不一样；前者是不合法的。]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T17:38:45.680

`printf("%p\t%p",pFcn,Add)`

pFcn 给出它所指向的函数的地址，在这种情况下是函数 Add 的地址。pFcn(1,2) 调用该函数。

# database - Cassandra 中的过滤列

> ID：11869929
> 
> 赞同：1
> 
> 时间：2012-08-08T17:26:54.160
> 
> 标签：database, database-design, nosql, cassandra, pycassa

我是卡桑德拉的新手。

假设我有 1,000,000 列。我只想返回列名中包含字符串“test”的列。

Cassandra/Pycassa有可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T17:29:57.237

您只能过滤名称以“test”开头的列。否则，您必须在自己的代码中进行过滤。

# database - sybase 中日期时间列的纳秒精度

> ID：11869930
> 
> 赞同：0
> 
> 时间：2012-08-08T17:26:54.817
> 
> 标签：database, orm, sybase

我们有一个审计表，它通过插入/更新触发器跟踪主表中的更改。触发器会将主表中的所有新字段值复制到审计表。我们在审计表中有一个列，它跟踪主表 ( )`datetime`上发生插入/更新的时间。 我们在主键和时间列上有唯一索引。问题是，如果在主表上几乎同时发生多个更新，那么它就会以违反唯一键而告终。是否有任何可以捕获纳秒级精度的日期时间类型？ `getdate()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T06:05:15.283

数据库应该固有地通过 ACID 处理同一记录的更新。使用联合 master_table_id / updatetime 主键“检查”审计表以防止在短时间内“更新太多”可能不是正确的方法......尤其是当性能通过新硬件提高时......你可以拥有更多您的 pk 正在阻止的“合法”更新。

我不想问，但是您正在执行什么类型的操作，以亚毫秒级别多次更新同一行？您是否通过一些 JDBC 或 ADO 连接更新 col2，然后 col3，然后 col4 全部用于相同的 PK？

您可以通过对存储过程的输入将这些“许多”更新批处理到 1 个存储过程调用中，从而限制您的写操作吗？这会更快，并且在审计跟踪上提供更少的流失。

# sql-server - SQL Server 2008 安装错误消息：无法打开 Windows 安装程序文件

> ID：11869934
> 
> 赞同：5
> 
> 时间：2012-08-08T17:27:05.700
> 
> 标签：sql-server, sql-server-2008, installation, windows-installer

运行 SQL Server 2008 安装程序时，我收到以下错误消息：

**标题：Microsoft SQL Server 2008 安装程序**

* * *

**发生以下错误：**

**无法打开 Windows 安装程序文件“G:\x64\setup\sql_engine_core_inst_msi\sql_engine_core_inst.msi”。**

Windows Installer 错误消息：系统无法打开指定的设备或文件。.

单击“重试”以重试失败的操作，或单击“取消”以取消此操作并继续设置。

...

**请让我知道我该如何解决这个问题，因为我无法继续安装过程......请帮助！**

问候

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T17:13:50.620

这发生在我身上。安装程序实际上似乎在 2 个多小时内没有出现任何错误，但我知道这肯定有问题。我重新启动它过夜，然后进来查看您帖子中提到的错误。

将文件从 CD 复制到硬盘驱动器，然后从那里运行 setup.exe 帮助我解决了这个问题。我看到在所选答案下方的评论中提到了这一点，但评论以希望它能解决问题而结束，对我来说确实如此。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-08T18:44:56.400

尝试将 .msi 复制到驱动器 C:\ 并从那里执行它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-02T19:47:04.320

此答案与安装 2008 R2 服务包有关，而不是从头开始安装 2008，但此问题是搜索错误消息时的第一个结果。可能会帮助某人...

我得到了相同的“系统无法打开指定的设备或文件”。信息。

我在这里查看了安装日志：C:\Program Files\Microsoft SQL Server\100\Setup Bootstrap\Log

在 Windows\Installer 目录中找到了错误以及它正在寻找的文件。

进入Installer目录，找到文件，备份，删除。

再次运行设置，得到一个更有意义的错误，解释丢失的文件，以及初始安装中的相应文件，在我的例子中是 2008 R2 SP1。

在我的 PC 上下载 SP1，解压缩它，挖出文件，在我的例子中是 sql_common_core.msp。

只需将该文件复制到服务器，运行它，它就可以快速修复/安装/做了一些事情。

再次运行设置，一切顺利。

有关修复这些类型的设置错误的大量详细信息在这里：http: [//support.microsoft.com/kb/969052/en-us](http://support.microsoft.com/kb/969052/en-us)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T17:31:44.363

不幸的是，这是非常开放的。我假设 G:\ 是可移动媒体驱动器？你能在资源管理器中看到文件路径吗？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-11-08T15:26:58.640

我也遇到了同样的问题。我关闭了我的 Windows 防火墙并重新尝试，它对我有用。您可以在安装 SQL Server 时关闭防火墙。

# javascript - OpenLayers：被破坏的特征在放大或缩小后重新出现

> ID：11869938
> 
> 赞同：2
> 
> 时间：2012-08-08T17:27:22.010
> 
> 标签：javascript, openlayers

我有一个显示危险废物地点的 OpenLayers + Bing 地图应用程序。用户可以单击链接以在地图上切换站点的子站点。

当我通过在图层上调用 destroyFeatures() 来关闭子站点（它们是矢量图层上的点）时，它们会按预期消失。但是，如果我放大或缩小地图，某些子站点会重新出现。移动地图时不会发生这种情况，只是缩放。

神秘再现的是重合地点，即坐标完全相同的两个地点。两者都被摧毁，并且都重新出现。

为什么这些会从图层中被破坏，然后在缩放时重新出现？

（OpenLayers 版本是 2.11）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-23T10:19:16.503

试试这个，它对我有用

```
layer.removeAllFeatures();
layer.destroyFeatures();//optional
layer.addFeatures([]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T15:19:16.330

您确定将所有功能作为参数发送给`destroyFeatures()`方法吗？删除所有内容的更简单方法是调用`removeAllFeatures()`方法。如果您想在用户切换子站点时隐藏和显示功能，那么在矢量图层上使用`show()`和方法会更好。`hide()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T07:29:34.317

请记住，destroyFeatures() 会更改向量中对象的索引。如果您在代码中使用索引，这可能会导致问题。

# c# - 使用 UserId 作为连接 ID 并将其存储为 cookie 是否安全/可以

> ID：11869941
> 
> 赞同：3
> 
> 时间：2012-08-08T17:27:33.680
> 
> 标签：c#, asp.net, signalr

我已经看到了许多扩展`CreateConnectionId`signalR 集线器类的示例，例如：

[http://www.kevgriffin.com/maintaining-signalr-connectionids-across-page-instances/](http://www.kevgriffin.com/maintaining-signalr-connectionids-across-page-instances/)

[在登录时存储用户，然后按需推送数据](https://stackoverflow.com/questions/8130132/storing-user-on-login-then-pushing-data-on-demand)

但是将每个用户的 connection_id 更改为他的 UserId（请记住，我使用的是开箱即​​用的标准 asp 会员提供程序）是否会构成安全威胁？我可以看到这样做有多好，因此我不必保留从用户到 connection_id 的内部映射，但我还认为如果我将其存储在用户浏览器上的 cookie 中，它可能会带来安全威胁。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T18:50:59.630

不，它**不安全**，最终会破坏 SignalR。

原因是如果您使用用户的数据库 ID 并将其存储在 cookie 中，当您在浏览器中打开第二个选项卡时将生成相同的连接 ID（因为相同的 cookie 将被发送到服务器）。

这显然很糟糕，一旦您打开两个选项卡或浏览器窗口，就会破坏 SignalR，这在您引用的文章中没有提到。此外，正如 Icarus 所描述的，人们可以更改 cookie 并接收其他用户的消息。

更好的方法是：保留默认的 GUID 连接 ID 生成器，而是在启动连接后将连接添加到由您自己的 ID（例如数据库 ID 或电子邮件地址）标识的组。这样您就可以调用`Clients[emailAddress].doSomething()`并将其广播到该用户的所有打开的选项卡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T17:31:42.537

我会冒险回答并说是的，这看起来是个坏主意，因为 cookie 很容易被操纵，并且用户可能会将其更改为其他一些随机 id 并开始接收不适合他的消息/数据。

# c# - Azure 队列读/写限制

> ID：11869942
> 
> 赞同：1
> 
> 时间：2012-08-08T17:27:36.700
> 
> 标签：c#, java, asp.net, azure, cloud

有没有办法让一侧只写入队列而另一侧从队列中读取 azure？（有点像私人公钥的想法......）

有没有办法通过队列服务总线来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T17:47:43.303

是的，您可以同时使用这两种方法；但是，服务总线队列使 ACS 变得更容易。

对于存储队列，您需要创建一个共享访问签名来执行此操作。[您可以从此页面](http://msdn.microsoft.com/en-us/library/windowsazure/ee395415.aspx)了解更多相关信息。

请注意，对于使用 SAS 的存储队列方法，您需要一个服务或手动过程来创建和提供 SAS url，然后再进入队列或 SAS 过期。SAS 可以持续一段时间（就像 ACS 的令牌一样）；但是，使用 ACS 方法，您不需要自己的服务为客户端创建 SAS url。

# iframe - SoundCloud iframe 集保持 200 像素

> ID：11869943
> 
> 赞同：0
> 
> 时间：2012-08-08T17:27:38.483
> 
> 标签：iframe, wordpress, height, soundcloud

出于某种原因，从这周开始，我所有的 SoundCloud 集都只有 200px 高，从而裁剪了播放器。我正在使用官方的 WordPress 插件。

我已禁用所有插件，清空并禁用 Cloudeflare，并尝试暂时停用所有自定义代码。我还在插件的设置菜单中尝试了多个变量，并尝试使用更改高度`iframe[Attributes Style] {height: 600px !important;}`

示例： http: [//fastforwardandrewind.com/10840/dream-this-isnt-house-ep/](http://fastforwardandrewind.com/10840/dream-this-isnt-house-ep/) 它应该如下所示：[http ://soundcloud.com/owslaofficial/sets/dream-this-isnt-house-ep/](http://soundcloud.com/owslaofficial/sets/dream-this-isnt-house-ep/)

有谁知道这可能是什么原因以及我该如何解决？

谢谢，里卡多

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T09:00:22.810

Do you have any specific height set in your plugin settings? Also, can you give an example of a shortcode you are using?

As a stopgap solution, you can revert to an older [SoundCloud plugin version (2.0)](http://downloads.wordpress.org/plugin/soundcloud-shortcode.2.0.zip).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T19:09:34.987

**更新：**旧版本的插件为我解决了这个问题，所以这个问题肯定出在插件的最新更新中。感谢您让我的网站重回正轨！

# sql-server - 多对多关系的全文搜索

> ID：11869946
> 
> 赞同：0
> 
> 时间：2012-08-08T17:27:46.033
> 
> 标签：sql-server, full-text-search, many-to-many

我实现了一个多对多标签系统，现在我想执行全文搜索。问题是 AND 不起作用。如果我使用 search terms 搜索项目，`tag1 AND tag2 AND tag3`即使我的记录被所有三个标签标记，我也不会得到任何行。

为了解决这个问题，我尝试了一个标量函数来连接我的标签并将其包装在一个视图中。但是，这失败并出现以下错误：

> 无法在视图“视图”上创建索引，因为视图引用的函数“dbo.GetTags”执行用户或系统数据访问。

我已将搜索限制为仅 OR，但我现在有另一个多对多关系，该关系在`join`表中包含我也想搜索的附加信息，并且需要 AND。

我能想到的唯一选择是`unioning`一堆`inner joins`或使用触发器。

有没有人有解决这个问题的经验或建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T18:09:27.507

如果您正在查找标签，您可以使用 like 运算符进行搜索吗？或者有什么理由需要全文搜索？

否则，要在 AND 时尚搜索标签中使用全文搜索，假设您在标签数据模型中每行存储一个标签，有两个想法：

1.  将您的全文搜索分解为每个全文搜索 1 个查询。因此，如果有 3 个 and 条件，则为每个 AND 条件创建 3 个单独的全文搜索查询

2.  弄清楚如何将所有标签连接到逗号分隔的列表中。将逗号分隔的列表存储在数据模型中，可能存储在包含实际数据的表中，而不是标签中。正如您所想，您可以使用触发器来存储值。然后针对该一列而不是您的标记模型运行您的全文搜索操作。此选项是由于视图中的函数调用而无法创建索引视图的解决方法

选项 2 可能比选项 1 执行得更好，但需要更多存储空间。

# javascript - Javascript选择的索引onchange根本不起作用

> ID：11869953
> 
> 赞同：1
> 
> 时间：2012-08-08T17:28:04.083
> 
> 标签：javascript, events, select, onchange

我正在尝试创建一个包含值的选择标签，如果选择了五个值中的两个，则屏幕上将显示另一个选择框。我试过搜索这个，发现人们在哪里使用 javascript 并使用 onchange 事件，但由于某种原因我无法让它工作。切换 id 是我想要显示的，如果选择了个人或短期，如果我不想隐藏它。代码如下，提前感谢您的帮助。我没有包含 javascript，因为我将其全部删除，但我尝试了几种不同的方法，但没有运气。我认为这是我布置表格的方式。

HTML

```
<tr>                        
   <td class='txt'><span>&#42;</span>Coverage Needed?</td>  
<td>
   <select name="ins_type" id='ins_options' onChange="toggle();">
     <option>Select...</option>                             
     <option value="Group">Group Insurance</option>
     <option value="Individual">Individual Insurance</option>
     <option value="Short Term">Short Term Insurance</option>                                   
     <option value="Medicare">Medicare</option>
     <option value="Life">Life Insurance</option>   
   </select>                
</td>                                   
<td ><div id='toggle'><span>&#42;</span>How Many?
   <select name='applicants' id='applicants' >                                      
      <option>Select...</option>
      <option value='1'>1</option>
      <option value='2'>2</option>
      <option value='3'>3</option>
      <option value='4'>4</option>
      <option value='5'>5</option>
      <option value='6'>6</option>
      <option value='7'>7</option>
      <option value='1'>8</option>
      <option value='9'>9</option>
      <option value='10'>10</option>    
   </select>
  </div>
  </td>             
</tr> 
```

Javascript（我在想这样的东西应该可以）

```
<script type="text/javascript">
  function toggle() {
    if (document.getElementById("ins_options").options
    [getElementById("ins_options").selectedIndex].value == "Individual") {
       document.getElementById("toggle").style.display = "none";
    } else {
       document.getElementById("toggle").style.display = "block";
    }
  }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T17:59:26.427

您`document`在选择的索引查找中丢失了 - [http://jsfiddle.net/VfEyW/](http://jsfiddle.net/VfEyW/)

所以而不是

```
[getElementById("ins_options").selectedIndex] 
```

尝试

```
[document.getElementById("ins_options").selectedIndex] 
```

...

**更新**

要检查 2 个值，您可以执行此操作

```
 function toggle() {
    var val = document.getElementById("ins_options").options[document.getElementById("ins_options").selectedIndex].value;

    if ( val == "Individual" || val == "Short Term" ) {
       document.getElementById("toggle").style.display = "none";
    } else {
       document.getElementById("toggle").style.display = "block";
    }
  } 
```

# javascript - 带有 setTimeout 的 jQuery 承诺

> ID：11869954
> 
> 赞同：0
> 
> 时间：2012-08-08T17:28:06.847
> 
> 标签：javascript, jquery, promise

我需要一个`setInterval`又一个`setInterval`结束的开始。有没有办法通过承诺来做到这一点？

理想情况下，我希望代码看起来像这样：

```
for (i=0; i<5; i++){
  setInterval(fun_1, 1000)
  //wait until this is done
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T17:35:26.917

在给定的`setInterval`时间间隔后调用提供的函数，直到您`clear`成为它的对象。`So you do not need a loop for this`. 您可以`use a counter`在计数器达到所需值后终止它。

**[现场演示](http://jsfiddle.net/rajaadil/6Td4J/)**。

```
var myInter;
i = 1;
function fun_1()
{
   // some code
   if(i++==5)
      clearInterval(myInter);
}    

myInter = setInterval(fun_1, 1000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T17:33:39.307

你的意思是你希望第二个间隔在前一个间隔完成后开始倒计时吗？在这种情况下，你会说

```
window.setTimeout(fun_1, 1000);

function fun_1
{
    window.setTimeout(fun_2, 1000);
} 
```

这将在第一次超时完成后开始第二次超时的倒计时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T17:33:56.133

您应该在第一个间隔完成后调用下一个间隔

```
var cnt = 0;
function executeNextStep(){
    fun_1();
    if (cnt<5) {
        window.setTimeout(executeNextStep,1000);
    }
    cnt++;
}
executeNextStep();  //execute this right away
//window.setTimeout(executeNextStep,1000); use this if you want it to be delayed 
```

如果您需要执行不同的功能：

```
function fun_1() {
    console.log(1);
}
function fun_2() {
    console.log(2);
}
function fun_3() {
    console.log(3);
}

var fnc_stack = [fun_1, fun_2, fun_3];
var cnt = 0;
function executeNextStep(){
    fnc_stack[cnt]();
    cnt++;
    if (cnt<fnc_stack.length) {        
        window.setTimeout(executeNextStep,1000);
    }
}
executeNextStep(); 
```

# c# - 向用户添加角色（Windows 身份验证）

> ID：11869962
> 
> 赞同：2
> 
> 时间：2012-08-08T17:28:34.300
> 
> 标签：c#, asp.net, iis, iis-7

我的 Web 应用程序中有两个文件夹，第一个用于 normal_user，第二个用于管理员，为了保护它们，我在 asp.net 配置中创建了两个角色，一切正常，但问题是我想验证我的用户使用 Windows 身份验证而不是表单身份验证，我应该做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T18:04:19.120

清单 1：通过 web.config 文件拒绝所有用户。向 windows 声明您的模式：

```
<system.web>
   <authentication mode="Windows" />
   <authorization>
      <deny users="*" />
   </authorization>
</system.web> 
```

在下面的链接中也向下滚动：“验证和授权组：

根据我的书，解释了所有 4 种：

[http://www.wrox.com/WileyCDA/Section/ASP-NET-3-5-Windows-Based-Authentication.id-310905.html](http://www.wrox.com/WileyCDA/Section/ASP-NET-3-5-Windows-Based-Authentication.id-310905.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T17:44:58.390

您可以通过[Windows 身份验证提供程序](http://msdn.microsoft.com/en-us/library/907hb5w9.aspx)或[Windows 身份验证](http://www.codeproject.com/Articles/94612/Windows-Authentication)

你应该改变你的`authentication`部分

```
<system.web>
 <authentication mode="Windows"/>
</system.web> 
```

> 要为您的 Web 应用程序启用模拟，请在应用程序的 Web.config 文件中将标识元素的模拟属性设置为 true，如以下代码示例所示。

```
<system.web>
  <authentication mode="Windows"/>
  <identity impersonate="true"/>
</system.web> 
```

> 使用 Windows 身份验证时，用户名采用 domainName\userName 形式。>Windows 组用作角色，它们采用 domainName\windowsGroupName 的形式。通过使用“BUILTIN”前缀来引用众所周知的本地组，例如管理员和用户，如此处所示。

```
 <authorization>   
    <allow users="DomainName\Bob, DomainName\Mary" />  
    <allow roles="BUILTIN\Administrators, DomainName\Manager" />   
    <deny  users="*" /> 
 </authorization> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T18:04:26.857

如果您想使用自己的 RoleProvider，则需要使用 Forms Authentication。但是，您可以使用内置的[ActiveDirectoryMembershipProvider 类](http://msdn.microsoft.com/en-us/library/system.web.security.activedirectorymembershipprovider.aspx)来针对 Active Directory 对用户进行身份验证。

# .net - 如何编写接受多个输入的VB线程锁定代码？

> ID：11869965
> 
> 赞同：1
> 
> 时间：2012-08-08T17:28:46.063
> 
> 标签：.net, vb.net, thread-synchronization

我阅读了很多关于锁定机制的材料，但我仍然没有答案如何编写一个：

*   接受比退出更多的进入
*   第二个线程将等待最多 5 秒，然后它将进入临界区

以下作品。它处理多次调用**ThreadA_Method1**然后它（有时）后面跟着**ThreadA_Method2**的情况。但是有没有更好的解决方案？

```
Private _lock as Boolean

Private Sub ThreadA_Method1 Handles _otherDll.BeforeAction
  _lock = True
  ' A - Critical section code 1
  ' ...
End Sub

Private Sub ThreadA_Method2  Handles _otherDll.AfterAction
  Try
    ' A - Critical section code 2 
    ' ...
  Finally
    _lock = False
  End Try
End Sub

Private Sub ThreadB_Method
  Dim stopWatch As Stopwatch = New Stopwatch()
  stopWatch.Start()
  While _lock AndAlso stopWatch.ElapsedMilliseconds < 5000
    Thread.Sleep(100)
  End While
  stopWatch.Stop()

  ' B - Critical section code
  ' ...
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T21:03:19.383

我建议使用`System.Threading.ManualResetEvent`代替`Boolean`for `_lock`（请参阅[http://msdn.microsoft.com/en-us/library/system.threading.manualresetevent(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/system.threading.manualresetevent(v=vs.80).aspx)）。然后您可以使用该`WaitOne`方法更有效地暂停。

```
Private _lock As New ManualResetEvent(False)

Private Sub ThreadA_Method1() Handles _otherDll.BeforeAction

  _lock.Reset()
  ' A - Critical section code 1 
  ' ... 
End Sub

Private Sub ThreadA_Method2() Handles _otherDll.AfterAction
  Try
    ' A - Critical section code 2  
    ' ... 
  Finally
    _lock.Set()
  End Try
End Sub

Private Sub ThreadB_Method()

  _lock.WaitOne(5000)

  ' B - Critical section code 
  ' ... 
End Sub 
```

# twitter - Twitter：在推文中的 URL 的查询字符串中包含推文 ID

> ID：11869967
> 
> 赞同：0
> 
> 时间：2012-08-08T17:28:55.800
> 
> 标签：twitter

我正在尝试创建一个 URL，该 URL 将在引用它所包含的推文的​​推文中共享，以便 URL 引用的页面可以引用回原始推文。

我知道这是一个先有鸡还是先有蛋的问题，因为在创建推文之前，推文 ID 不存在，但我希望推特有某种“推文 ID 令牌”，我可以将其包含在推文中创建推文后，将被 Twitter 替换。我已经尽我所能地浏览了 API，但没有找到任何这样的功能。

我错过了什么，还是有人找到了另一种方法来完成这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T19:50:17.730

statuses/update 端点确实返回了新的推文，并且新的推文确实有新的 id。如果您等待调用返回，您可以获取 id 然后构建 URL。

# java - java中的非静态块有什么用？

> ID：11869972
> 
> 赞同：7
> 
> 时间：2012-08-08T17:29:22.900
> 
> 标签：java

> **可能重复：**
> [实例初始化器与构造器有何不同？](https://stackoverflow.com/questions/1355810/how-is-an-instance-initializer-different-from-a-constructor)

当所有需要的工作都可以在构造函数中完成时，为什么我们还需要 Java 中的非静态块呢？

编辑：非静态块每次在构造函数之前运行的普通类怎么样？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-08T17:36:32.003

除了@Bohemian 的回答。

如果您有多个构造函数，则初始化程序块避免重复。

```
public class A {
     final Map<String, String> map = new HashMap<String, String>(); {
        // put things in map.
     }
     final int number; {
        int number;
        try {
            number = throwsAnException();
        } catch (Exception e) {
            number = 5;
        }
        this.number = number;
     }

     public A() { /* constructor 1 */ }
     public A(int i) { /* constructor 2 */ }
} 
```

> 每次在构造函数之前运行非静态块的普通类怎么样？

从技术上讲，顺序是

*   超级构造函数总是首先被调用
*   所有初始化程序块按出现顺序。
*   构造函数代码

实际上，所有这些代码都在每个构造函数的字节码中，因此在运行时构造函数之前或之后没有任何内容。

* * *

在对初始化顺序有任何混淆之前

```
public class Main extends SuperClass {
    {
        System.out.println("Initialiser block before constructor");
    }

    Main() {
        System.out.println("Main constructor");
    }

    {
        System.out.println("Initialiser block after constructor");

    }

    public static void main(String... args) {
        new Main() {{
            System.out.println("Anonymous initalizer block");
        }};
    }
}

class SuperClass {
    SuperClass() {
        System.out.println("SuperClass constructor");
    }
} 
```

印刷

```
SuperClass constructor
Initialiser block before constructor
Initialiser block after constructor
Main constructor
Anonymous initalizer block 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-08T17:30:45.860

您可以将它与匿名类一起使用：

```
new MyClass() {
    {
         // do something extra on construction (after the constructor executes)
    }
} 
```

我发现这对于初始化“查找”地图（即固定内容）特别有用：

```
Map<String, String> map = new HashMap<String, String>() {
    {
        put("foo", "bar");
        put("one", "two");
        // etc
    }
}; 
```

仅供参考，这有时（不好）称为“双括号初始化”，而实际上它只是使用[*初始化块*](http://docs.oracle.com/javase/tutorial/java/javaOO/initial.html)。

尽管这样一个匿名类在技术上是一个*子类*，但在将使用这种技术与更传统的技术来创建不可[修改](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#unmodifiableMap%28java.util.Map%29)的地图进行比较时，它的美妙之处就显现出来了：

比较这个简单的单行，它将数据和分配放在一起：

```
private static final Map<String, String> map = Collections.unmodifiableMap(
    new HashMap<String, String>() {{
        put("foo", "bar");
        put("one", "two");
        // etc
    }}); 
```

由于`final`只允许一个分配，因此必须创建一个单独的对象：

```
private static final Map<String, String> map;

static {
    Map<String, String> tempMap = new HashMap<String, String>();
    tempMap.put("foo", "bar");
    tempMap.put("one", "two");
    // etc
    map = Collections.unmodifiableMap(tempMap);
} 
```

另请注意，在混乱版本中，两个语句不必相邻，因此不可修改映射的内容可能变得不那么明显。

# primefaces - 在ajax请求期间禁用整个屏幕

> ID：11869973
> 
> 赞同：3
> 
> 时间：2012-08-08T17:29:24.800
> 
> 标签：primefaces

因此，当您使用 primefaces 创建一个对话框时，它会禁用背景中的所有页面。有没有没有对话框的好方法？

基本上我想在特定的 ajax 请求期间禁用整个页面。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T18:13:53.740

Yup its called BlockUI ,

[BlockUI](http://www.primefaces.org/showcase/ui/misc/blockUI.xhtml)

```
<p:panel id="pnl" header="My Panel">
    //content
    <p:commandButton id="saveBtn" value="Save" />
</p:panel>
<p:blockUI block="pnl" trigger="saveBtn" /> 
```

also , take a look at the user guide at the BlockUI section...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T17:45:29.827

您可以创建一个 HTML 大小的 div，给它一个非常高的 z-index，然后当您想要阻止或显示页面时隐藏或显示此 div。

像这样

```
<html>
<div class="blocker"></div>
<div class="page">
    Your content here
    <button id="btn">teste</button>
</div>
<html> 
```

> ```
> .page{z-index: 900}
> .blocker{z-index:1000;height:100%;width:100%;background: gray; opacity:0.7; position: absolute;} 
> ```

​在这里查看：http: [//jsfiddle.net/6nDtu/31/](http://jsfiddle.net/6nDtu/31/)

# c# - Windows 应用程序的身份验证机制

> ID：11869974
> 
> 赞同：2
> 
> 时间：2012-08-08T17:29:33.193
> 
> 标签：c#, .net, winforms, authentication, windows-authentication

我想知道我们可以在 Windows 应用程序中使用身份验证机制的所有可能方式是什么？这是多服务器场景（我的意思是多层）中最好和优化的方式。

另外请给我如何使用 LDAP 进行身份验证的链接（如果我没记错的话）。

我正在寻找像 Windows/Forms/Passport 这样的 ASP.NET 存在的东西

提前致谢。如果您也可以通过一个小的可能代码示例让我理解，那就太好了......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T18:10:16.310

Divine 这里是一个很棒的示例和代码，您可以下载如何创建/测试基本 LDAP 用户、密码和域 下载代码进行更改以适应您的环境并通过调试器逐步执行代码并了解每个部分在做什么. 你应该能够很快掌握这个窍门。

[通过 LDAP 针对 Active Directory 和 Edirectory 进行身份验证](http://www.codeproject.com/Articles/5969/Authentication-against-Active-Directory-and-Edirec)

# javascript - 使用 Prototype.js 框架实现 OOP“接口”

> ID：11869987
> 
> 赞同：1
> 
> 时间：2012-08-08T17:30:54.217
> 
> 标签：javascript, oop, interface, prototypejs

我们正在为 OOP 使用 Prototype.js 框架。我知道您可以轻松地进行类继承。您可以轻松地进行回调。那么，有没有办法实现一个面向对象的“接口”？或者，我们必须保留类继承吗？

# android - PreferenceActivity 中的自定义标题栏（摘要）

> ID：11869988
> 
> 赞同：1
> 
> 时间：2012-08-08T17:31:00.837
> 
> 标签：android, layout, preferenceactivity

正如标题所示，我想为`PreferenceAcitvity`. 我需要在标题下方添加一个摘要。目前它只会显示一个标题，但我需要一个子标题，就像任何`Preference`可以有一个摘要一样。

我在这里阅读了很多问题，例如[this](https://stackoverflow.com/questions/3157522/android-custom-title-bar)和[this](https://stackoverflow.com/questions/4921825/set-custom-title-bar-in-preferenceacivity)，但这些都做了不同的事情；第一种方法不可能包含标题的摘要。为每个创建自定义布局`Preference`似乎也不是最明智的选择，而且是大量无意义的工作（我有很多`PreferenceActivity`'s。我正在考虑扩展一些东西。

另外，我想尽可能地保持默认行为，所以我正在寻找将 a 添加`TextView`到位于 android-sdk-windows\platforms\android-16\data\res\layout\screen_title.xml 中的默认布局的方法

所以我想我会将此布局应用于第二个 Q 中的方法，但现在我遇到了 screen_title.xml 文件中使用的资源 id 不公开的问题。

我的想法快用完了……有人有新的想法吗？

**编辑**：

由于下面接受的答案，我找到了解决方案。进一步澄清一下：`getSupportActionBar()`答案中的方法不在 SDK 中，而是来自[`ActionBarSherlock`](http://actionbarsherlock.com/). 这是一个兼容性库，用于在 API 11 之前的应用程序/设备上启用`ActionBar`和`FragmentActivity`（除其他外）。这是一个相当重的库，大约 11mb，所以你必须考虑是否值得在你的应用程序中添加 11mb，只是为了在你的偏好屏幕中有一个摘要/副标题。另一方面，这当然还允许您实现库的其他功能，例如实际创建操作栏（和或菜单）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T18:09:07.543

如果您在谈论 Actionbar，那么您可以这样做：

```
ActionBar actionBar = getSupportActionBar();
actionBar.setDisplayShowTitleEnabled(true);
actionBar.setSubtitle("Test Subtitle"); 
```

# php - 如何以类似“测验”的形式实现类似时钟的功能

> ID：11869989
> 
> 赞同：-1
> 
> 时间：2012-08-08T17:31:01.150
> 
> 标签：php, forms, clock

嗨，我是一个 PHP 菜鸟，我一直在为我的大学项目开发​​这个 PHP 测验应用程序。

我有一个问题数据库和一个 PHP 视图页面，当用户单击提交按钮时，它将从数据库中加载一个问题。

然后它将提交表格；在服务器端，它首先将这个问题的 id 存储在会话中，因此不会出现重复问题，检查问题的答案，并根据响应是否正确，将适当的消息传输给客户端旁边还有当前分数和其他详细信息。

**我现在想要的是一个类似时钟的功能，如果用户没有时间，它会自动做一些事情。**

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T17:36:01.990

您可能需要在客户端查找使用`setTimeout`哪个`javascript`运行时钟。您还需要注意在 PHP 中跟踪测试的开始时间`$_SESSION`并在服务器端验证提交。

# forms - Play 映射错误！框架形式

> ID：11869990
> 
> 赞同：0
> 
> 时间：2012-08-08T17:31:07.747
> 
> 标签：forms, scala, playframework, mapping, playframework-2.0

我在播放时遇到问题！框架的映射功能。我怀疑它可能无法支持我传入的参数数量，因为它在我仅限于一个映射时起作用，但在文档中没有找到太多：[http ://www.playframework.org/documentation /api/2.0.2/scala/index.html#play.api.data.Form](http://www.playframework.org/documentation/api/2.0.2/scala/index.html#play.api.data.Form)

这是表格：

```
val paymentForm: Form[PaymentValues] = Form(
// Define a mapping that will handle User values
mapping(
  "message" -> text, 
  "x_card_num" -> text,
  "x_exp_date" -> text,
  "exp_year" -> text,
  "exp_month" -> text,
  "x_card_code" -> text,
  "x_first_name" -> text,
  "x_last_name" -> text,
  "x_address" -> text,
  "x_city" -> text,
  "x_state" -> text,
  "x_zip" -> text,
  "save_account" -> text,
  "product_array" -> text,
  "x_amount" -> text,
  "products_json" -> text,
  "auth_net_customer_profile_id" -> text,
  "auth_net_payment_profile_id" -> text,
  "customer_id" -> text,
  "saved_payments_object" -> text )(PaymentValues.apply)(PaymentValues.unapply)) 
```

关于以某种方式分解映射的任何建议？提前致谢。

这是错误：

```
! Internal server error, for request [GET /] ->

sbt.PlayExceptions$CompilationException: Compilation error [Overloaded method value [mapping] cannot be applied to  ((java.lang.String, play.api.data.Mapping[String]), (java.lang.String, play.api.data.Mapping[String]), (java.lang.String, play.api.data.Mapping[String]), (java.lang.String, play.api.data.Mapping[String]), (java.lang.String, play.api.data.Mapping[String]), (java.lang.String, play.api.data.Mapping[String]), (java.lang.String, play.api.data.Mapping[String]), (java.lang.String, play.api.data.Mapping[String]), (java.lang.String, play.api.data.Mapping[String]), (java.lang.String, play.api.data.Mapping[String]), (java.lang.String, play.api.data.Mapping[String]), (java.lang.String, play.api.data.Mapping[String]), (java.lang.String, play.api.data.Mapping[String]), (java.lang.String, play.api.data.Mapping[String]), (java.lang.String, play.api.data.Mapping[String]), (java.lang.String, play.api.data.Mapping[String]), (java.lang.String, play.api.data.Mapping[String]), (java.lang.String, play.api.data.Mapping[String]), (java.lang.String, play.api.data.Mapping[String]), (java.lang.String, play.api.data.Mapping[String]))]
at sbt.PlayReloader$$anon$2$$anonfun$reload$3$$anonfun$2$$anonfun$apply$11$$anonfun$apply$12.apply(PlayReloader.scala:224) ~[na:na]
at sbt.PlayReloader$$anon$2$$anonfun$reload$3$$anonfun$2$$anonfun$apply$11$$anonfun$apply$12.apply(PlayReloader.scala:224) ~[na:na]
at scala.Option.map(Option.scala:133) ~[scala-library.jar:0.11.2]
at sbt.PlayReloader$$anon$2$$anonfun$reload$3$$anonfun$2$$anonfun$apply$11.apply(PlayReloader.scala:224) ~[na:na]
at sbt.PlayReloader$$anon$2$$anonfun$reload$3$$anonfun$2$$anonfun$apply$11.apply(PlayReloader.scala:221) ~[na:na]
at scala.Option.map(Option.scala:133) ~[scala-library.jar:0.11.2] 
```

这是付款值：

```
package models
// definition of PaymentValues
case class PaymentValues(
    message: String,
    x_card_num: String,
    x_exp_date: String,
    exp_year: String,
    exp_month: String,
    x_card_code: String,
    x_first_name: String,
    x_last_name: String,
    x_address: String,
    x_city: String,
    x_state: String,
    x_zip: String,
    save_account: String,
    product_array: String,
    x_amount: String,
    products_json: String,
    auth_net_customer_profile_id: String,
    auth_net_payment_profile_id: String,
    customer_id: String,
    saved_payments_object: String) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T20:07:56.833

在数据 API 中越看越深，限制来自 Scala 和 Play。

实际上，在内部，Play 将使用案例类`ObjectMapping`来表示映射并定义数据绑定。这个`ObjectMapping`案例类将采用目标的 apply 和 unapply 方法、域对象（用于 unapply）和所有 20 个参数作为构造函数参数。计数：23 个参数。

Scala 对此类产品抽象类型（元组、函数、案例类...）的限制为 22（[请参见此处](https://stackoverflow.com/questions/4152223/why-are-scala-functions-limited-to-22-parameters)）。

这就是为什么 Play 没有提供 20 个参数的映射的原因......（实际上它停在 18 处，正如这篇文章的精彩评论中所说）

**编辑**

如果你不相信我...试试这个^^

```
import play.api.data._ 
import validation._
import format._

def mapping[R, A1, A2, A3, A4, A5, A6, A7, A8, A9, A10, A11, A12, A13, A14, A15, A16, A17, A18, A19, A20](a1: (String, Mapping[A1]), a2: (String, Mapping[A2]), a3: (String, Mapping[A3]), a4: (String, Mapping[A4]), a5: (String, Mapping[A5]), a6: (String, Mapping[A6]), a7: (String, Mapping[A7]), a8: (String, Mapping[A8]), a9: (String, Mapping[A9]), a10: (String, Mapping[A10]), a11: (String, Mapping[A11]), a12: (String, Mapping[A12]), a13: (String, Mapping[A13]), a14: (String, Mapping[A14]), a15: (String, Mapping[A15]), a16: (String, Mapping[A16]), a17: (String, Mapping[A17]), a18: (String, Mapping[A18]), a19: (String, Mapping[A19]), a20: (String, Mapping[A20]))(apply: Function18[A1, A2, A3, A4, A5, A6, A7, A8, A9, A10, A11, A12, A13, A14, A15, A16, A17, A18, A19, A20, R])(unapply: Function1[R, Option[(A1, A2, A3, A4, A5, A6, A7, A8, A9, A10, A11, A12, A13, A14, A15, A16, A17, A18, A19, A20)]]): Mapping[R] = {
  ObjectMapping20(apply, unapply, a1, a2, a3, a4, a5, a6, a7, a8, a9, a10, a11, a12, a13, a14, a15, a16, a17, a18, a19, a20)
}

case class ObjectMapping20[R, A1, A2, A3, A4, A5, A6, A7, A8, A9, A10, A11, A12, A13, A14, A15, A16, A17, A18, A19, A20](apply: Function20[A1, A2, A3, A4, A5, A6, A7, A8, A9, A10, A11, A12, A13, A14, A15, A16, A17, A18, A19, A20, R], unapply: Function1[R, Option[(A1, A2, A3, A4, A5, A6, A7, A8, A9, A10, A11, A12, A13, A14, A15, A16, A17, A18, A19, A20)]], f1: (String, Mapping[A1]), f2: (String, Mapping[A2]), f3: (String, Mapping[A3]), f4: (String, Mapping[A4]), f5: (String, Mapping[A5]), f6: (String, Mapping[A6]), f7: (String, Mapping[A7]), f8: (String, Mapping[A8]), f9: (String, Mapping[A9]), f10: (String, Mapping[A10]), f11: (String, Mapping[A11]), f12: (String, Mapping[A12]), f13: (String, Mapping[A13]), f14: (String, Mapping[A14]), f15: (String, Mapping[A15]), f16: (String, Mapping[A16]), f17: (String, Mapping[A17]), f18: (String, Mapping[A18]), f19: (String, Mapping[A19]), f20: (String, Mapping[A20]), val key: String = "", val constraints: Seq[Constraint[R]] = Nil) extends Mapping[R] with ObjectMapping {

  val field1 = f1._2.withPrefix(f1._1).withPrefix(key)

  val field2 = f2._2.withPrefix(f2._1).withPrefix(key)

  val field3 = f3._2.withPrefix(f3._1).withPrefix(key)

  val field4 = f4._2.withPrefix(f4._1).withPrefix(key)

  val field5 = f5._2.withPrefix(f5._1).withPrefix(key)

  val field6 = f6._2.withPrefix(f6._1).withPrefix(key)

  val field7 = f7._2.withPrefix(f7._1).withPrefix(key)

  val field8 = f8._2.withPrefix(f8._1).withPrefix(key)

  val field9 = f9._2.withPrefix(f9._1).withPrefix(key)

  val field10 = f10._2.withPrefix(f10._1).withPrefix(key)

  val field11 = f11._2.withPrefix(f11._1).withPrefix(key)

  val field12 = f12._2.withPrefix(f12._1).withPrefix(key)

  val field13 = f13._2.withPrefix(f13._1).withPrefix(key)

  val field14 = f14._2.withPrefix(f14._1).withPrefix(key)

  val field15 = f15._2.withPrefix(f15._1).withPrefix(key)

  val field16 = f16._2.withPrefix(f16._1).withPrefix(key)

  val field17 = f17._2.withPrefix(f17._1).withPrefix(key)

  val field18 = f18._2.withPrefix(f18._1).withPrefix(key)

  val field19 = f19._2.withPrefix(f19._1).withPrefix(key)

  val field20 = f20._2.withPrefix(f20._1).withPrefix(key)

  def bind(data: Map[String, String]): Either[Seq[FormError], R] = {
    merge(field1.bind(data), field2.bind(data), field3.bind(data), field4.bind(data), field5.bind(data), field6.bind(data), field7.bind(data), field8.bind(data), field9.bind(data), field10.bind(data), field11.bind(data), field12.bind(data), field13.bind(data), field14.bind(data), field15.bind(data), field16.bind(data), field17.bind(data), field18.bind(data), field19.bind(data), field20.bind(data)) match {
      case Left(errors) => Left(errors)
      case Right(values) => {
        applyConstraints(apply(

          values(0).asInstanceOf[A1],
          values(1).asInstanceOf[A2],
          values(2).asInstanceOf[A3],
          values(3).asInstanceOf[A4],
          values(4).asInstanceOf[A5],
          values(5).asInstanceOf[A6],
          values(6).asInstanceOf[A7],
          values(7).asInstanceOf[A8],
          values(8).asInstanceOf[A9],
          values(9).asInstanceOf[A10],
          values(10).asInstanceOf[A11],
          values(11).asInstanceOf[A12],
          values(12).asInstanceOf[A13],
          values(13).asInstanceOf[A14],
          values(14).asInstanceOf[A15],
          values(15).asInstanceOf[A16],
          values(16).asInstanceOf[A17],
          values(17).asInstanceOf[A18],
          values(18).asInstanceOf[A19],
          values(19).asInstanceOf[A20]))
      }
    }
  }

  def unbind(value: R): (Map[String, String], Seq[FormError]) = {
    unapply(value).map { fields =>
      val (v1, v2, v3, v4, v5, v6, v7, v8, v9, v10, v11, v12, v13, v14, v15, v16, v17, v18, v19, v20) = fields
      val a1 = field1.unbind(v1)
      val a2 = field2.unbind(v2)
      val a3 = field3.unbind(v3)
      val a4 = field4.unbind(v4)
      val a5 = field5.unbind(v5)
      val a6 = field6.unbind(v6)
      val a7 = field7.unbind(v7)
      val a8 = field8.unbind(v8)
      val a9 = field9.unbind(v9)
      val a10 = field10.unbind(v10)
      val a11 = field11.unbind(v11)
      val a12 = field12.unbind(v12)
      val a13 = field13.unbind(v13)
      val a14 = field14.unbind(v14)
      val a15 = field15.unbind(v15)
      val a16 = field16.unbind(v16)
      val a17 = field17.unbind(v17)
      val a18 = field18.unbind(v18)
      val a19 = field19.unbind(v19)
      val a20 = field20.unbind(v20)

      (a1._1 ++ a2._1 ++ a3._1 ++ a4._1 ++ a5._1 ++ a6._1 ++ a7._1 ++ a8._1 ++ a9._1 ++ a10._1 ++ a11._1 ++ a12._1 ++ a13._1 ++ a14._1 ++ a15._1 ++ a16._1 ++ a17._1 ++ a18._1 ++ a19._1 ++ a20._1) ->
        (a1._2 ++ a2._2 ++ a3._2 ++ a4._2 ++ a5._2 ++ a6._2 ++ a7._2 ++ a8._2 ++ a9._2 ++ a10._2 ++ a11._2 ++ a12._2 ++ a13._2 ++ a14._2 ++ a15._2 ++ a16._2 ++ a17._2 ++ a18._2 ++ a19._2 ++ a20._2)
    }.getOrElse(Map.empty -> Seq(FormError(key, "unbind.failed")))
  }

  def withPrefix(prefix: String): ObjectMapping20[R, A1, A2, A3, A4, A5, A6, A7, A8, A9, A10, A11, A12, A13, A14, A15, A16, A17, A18, A19, A20] = addPrefix(prefix).map(newKey => this.copy(key = newKey)).getOrElse(this)

  def verifying(addConstraints: Constraint[R]*): ObjectMapping20[R, A1, A2, A3, A4, A5, A6, A7, A8, A9, A10, A11, A12, A13, A14, A15, A16, A17, A18, A19, A20] = {
    this.copy(constraints = constraints ++ addConstraints.toSeq)
  }

  val mappings = Seq(this) ++ field1.mappings ++ field2.mappings ++ field3.mappings ++ field4.mappings ++ field5.mappings ++ field6.mappings ++ field7.mappings ++ field8.mappings ++ field9.mappings ++ field10.mappings ++ field11.mappings ++ field12.mappings ++ field13.mappings ++ field14.mappings ++ field15.mappings ++ field16.mappings ++ field17.mappings ++ field18.mappings ++ field19.mappings ++ field20.mappings

} 
```

# sql - 部署错误，“数据库中已经有一个名为 'PK_***' 的对象。无法创建约束。”

> ID：11869992
> 
> 赞同：1
> 
> 时间：2012-08-08T17:31:12.893
> 
> 标签：sql, deployment, visual-studio-2012

当我**尝试**运行我的应用程序时，我收到以下错误：

```
There is already an object named 'PK_***' in the database. Could not create constraint." 
```

为简洁起见，这实际上是两个错误的组合。**注意：** *星号是我自己的；这不是密钥的实际名称。*

我已经搜索了这里的每个帖子，但我似乎无法进一步找到解决方案。最糟糕的部分？团队中没有其他人在运行时遇到这些错误，他们也无法确定我为什么会这样。我们都使用相同的环境，VS 2012 Premium RC。我当然有来自 TFS 的最新消息。

我想知道是否有其他人遇到过与此类似的问题，即问题/错误仅发生在一个人的环境中？我可以**继续**并运行该应用程序。它似乎按预期运行，但我是唯一遇到这些错误的人。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T18:40:08.833

在 SQL Server 中，诸如主键或外键之类的约束本身就是对象，即使它们依赖于“包含”表。

这意味着它们的名称在所属模式中必须是唯一的。因此，就像按照以下方式执行 DDL

```
create table some_schema.foo
(
  id int not null
)
go

create table some_schema.foo
(
  id int not null
)
go 
```

当第二个`create table`被[试图]执行时会引发错误，像这样执行 ddl 同样会引发错误：

```
create table some_schema.foo
(
  id          int          not null ,
  description varchar(200) not null ,

  constraint PK   primary key clustered ( id          ) ,
  constraint AK01 unique nonclustered   ( description ) ,

)
go

create table some_schema.bar
(
  id          int          not null ,
  description varchar(200) not null , 

  constraint PK   primary key clustered ( id          ) ,
  constraint AK01 unique nonclustered   ( description ) ,

)
go 
```

同样会引发错误，因为您尝试创建的约束具有重复的名称。您需要使用表名来限定它们，因此：

```
create table some_schema.foo
(
  id          int          not null ,
  description varchar(200) not null ,

  constraint foo_PK   primary key clustered ( id          ) ,
  constraint foo_AK01 unique nonclustered   ( description ) ,

)
go

create table some_schema.bar
(
  id          int          not null ,
  description varchar(200) not null , 

  constraint bar_PK   primary key clustered ( id          ) ,
  constraint bar_AK01 unique nonclustered   ( description ) ,

)
go 
```

你的问题就会消失。

在我看来，在欠对象的上下文之外不存在的依赖对象应该在拥有对象的范围内命名空间，但这不是 SQL 标准的工作方式。

祝你好运！

# php - 需要获取单击到模态的链接名称，以便我可以在模态中运行 PHP/SQL 查询

> ID：11869995
> 
> 赞同：0
> 
> 时间：2012-08-08T17:31:38.850
> 
> 标签：php, javascript, html, post, modal-dialog

我正在使用 twitter bootstrap 的模态。

我有一个将 mac 地址映射到供应商名称的表。代码看起来像这样

```
 <tbody>
              <?php foreach ($rowarr as $k => $v) { ?>
                <tr>
                  <td><?php echo $k ?></td>
                  <td>
                    <div class="divBox">
                      <a data-toggle="modal" href="#myModal"><?php echo $v; ?></a>
                    </div>
                  </td>
                </tr>
              <?php } ?>
            </tbody> 
```

我想单击供应商名称（如 Cisco、HP）并启动一个模式对话框，其中包含有关供应商的更多详细信息。此模式框中的详细信息将来自数据库。我想使用 PHP 来查询数据库，但是为了查询，我需要知道被点击的链接/供应商的名称。我该怎么做？

我用于启动模式的 JS 看起来像这个 atm

```
<script type="text/javascript">
  $('#myModal').modal('hide');
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T17:42:59.393

您可以做的第一件事是通过执行以下操作在链接中设置数据供应商：

```
<a data-toggle="modal" data-vendor="<?= $v ?>" href="#myModal"><?php echo $v; ?></a> 
```

或者您可以通过以下方式获取供应商：

> 供应商 = $("#myModal").html();

然后通过执行以下操作为链接连接点击事件：

```
<script type="text/javascript">
    $('#myModal').click(function(){
        $(this).modal('hide');
        var vendor = $(this).data('vendor');

        //DO SOME AJAX CALL OR REFRESH THE PAGE USING "vendor" 
     });
</script> 
```

我还注意到您试图通过 id $('#myModal') 选择使用，但没有“id”属性。您可能希望在“a”标签上创建一个名为“myModal”的类，然后使用以下命令进行选择：

```
$('.myModal').click(function(){ ... }); 
```

# objective-c - 《Objective-c 编程》第三期 Kochan 练习 4.2

> ID：11869998
> 
> 赞同：0
> 
> 时间：2012-08-08T17:31:42.443
> 
> 标签：objective-c

**练习：** 编写一个程序，使用以下公式将 27° 从华氏度 (F) 转换为摄氏度 (C)：

> C = (F - 32) / 1.8

请注意，您不需要定义类来执行此计算。简单地评估表达式就足够了。

**这是我的代码：**

```
#import <Foundation/Foundation.h>
int main (int argc, const char *argv[])
{
    NSAutoreleasePool *pool=[[NSAutoreleasePool alloc] init];

        float C;
        float F;
    F = 27;
    C=(F-32)/1.8;
    NSLog (@"27 degrees Fahrenheit is %f degrees Celsius." , C);
    [drain pool];
        return 0;
} 
```

“构建失败”

在官方论坛上有一个建议这样写：

```
#import <Foundation/Foundation.h>

int main (int argc, const char * argv[]) {
    NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];

   double C, F;
   F=27;
   C=(F-32)/1.8;
   int c=C;

    NSLog(@"%g degrees Fahrenheit equals %i centigrades!", F, c);

[pool drain];
    return 0;
} 
```

但它也给了我“失败”的信息。什么不正确？

**更新**

问题已解决。

我没有正确设置项目的初始设置。我在其他“C”编程语言项目中工作。我只需要创建新项目-> OS X -> 命令行工具（类型：基础）取消标记“使用自动引用计数”

但最好的部分——我得到了成功编译的程序的奖励：

```
2012-08-09 00:20:29.214 4.2[19452:403] 27 degrees Fahrenheit is -2.777778 degrees Celsius. 
```

谢谢@trojanfoe，@john.k.doe，@drewk，@hol

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T17:46:10.803

这有效：

```
#import <Foundation/Foundation.h>

int main(int argc, const char * argv[])
{

    @autoreleasepool {            
        float C;
        float F;
        F = 27.0;
        C=(F-32.0)/1.8;
        NSLog (@"27 degrees Fahrenheit is %f degrees Celsius." , C);
    }
    return 0;
} 
```

这样做也是如此：

```
#import <Foundation/Foundation.h>

int main (int argc, const char * argv[]) {
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

    double F=27.2;
    double C=(F-32.0)/1.8;

    NSLog(@"%g degrees Fahrenheit equals %g centigrade!", F, C);

    [pool drain];
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T18:07:17.030

由于您不使用对象，因此即使这样做也可以。平原 C.

```
int main(int argc, const char * argv[])
{

    double C, F;
    F=27;
    C=(F-32)/1.8;
    int c=C;

    printf("%g degrees Fahrenheit equals %i centigrades!", F, c);

    return 0;
} 
```

您是否需要解析参数并根据这些参数进行计算？