# StackOverflow 问答 11555000-11555999

# java - 无法在 Struts2 操作中获取从 Jquery 帖子提交的值

> ID：11555018
> 
> 赞同：0
> 
> 时间：2012-07-19T06:22:16.340
> 
> 标签：java, jquery, jakarta-ee, struts2

我是新的支柱，我不确定我在这里缺少什么。当我提交此表单时，struts 操作类中的所有字段都为空。我添加了一个拦截器“adminHomeInterceptor”来检查用户是否是管理员，当我删除该拦截器引用时这工作正常。但是我必须检查所有请求用户是否是管理员，所以不能删除那个拦截器。任何帮助将不胜感激。

这是我的jsp。

```
 <s:form id="vendorRegister" action="addvendor" method="post" theme="simple">
        <label for="username" class="formLabel">Username/Email</label>
        <s:textfield name="userName" id="txtUname" cssClass="small ui-widget-content ui-corner-all" /><br />
        <label for="phone" class="formLabel">Phone</label>
        <s:textfield name="phone" id="txtPhone" cssClass="small ui-widget-content ui-corner-all" /><br />
        <label for="mobile" class="formLabel">Mobile</label>
        <s:textfield name="mobile" id="txtMobile" cssClass="small ui-widget-content ui-corner-all" /><br />
    <s:submit id="btnRegister" cssClass="button ui-state-default ui-corner-all" value="Add Vendor" />
</s:form> 
```

这是一个动态加载的表单。

```
$("#btnRegister").live("click",(function(event){
    event.preventDefault();
    var uname = $( "#txtUname" ),
    phone =  $("#txtPhone"),
    mobile = $("#txtMobile"),   
    if ( // Validation Codes ) {
        $("#btnRegister").attr("disabled", true);
        var url = "../addvendor";
        $.post( url , $("#vendorRegister").serialize(), function(data){
            alert("inside");
        });
    }
})); 
```

我的 Strust2 行动课

```
public class VendorAction extends ActionSupport{

    private int phone;
    private long mobile;
    private String userName;

    public int getPhone() {
         return phone;
    }
    public void setPhone(int phone) {
        this.phone = phone;
    }
    public long getMobile() {
        return mobile;
    }
    public void setMobile(long mobile) {
        this.mobile = mobile;
    }
    public String getUserName() {
        return userName;
    }
    public void setUserName(String userName) {
        this.userName = userName;
    }
    public String recordVendor(){
        System.out.println(userName);
        System.out.println(mobile);
        return "success";
    }
} 
```

这是我的 struts.xml 文件

```
 <package name="admin" namespace="/admin" extends="json-default">
    <interceptors>
        <interceptor name="adminHomeInterceptor" class="org.admin.interceptors.AdminHomeInterceptor" />
    </interceptors>
    <action name="addvendor" class="org.vendor.action.VendorAction" method="recordVendor">
        <interceptor-ref name="adminHomeInterceptor" />
        <result type="json" /> 
    </action>
</package> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T07:41:56.920

你在用`struts2-json`插件吗？如果你正在使用它。你必须包括

```
<interceptor name="json" class="org.apache.struts2.json.JSONInterceptor" />  in struts.xml 
```

并在包级别定义这样的结果类型 json

```
<result-type name="json" class="org.apache.struts2.json.JSONResult" default="false" /> 
```

否则，getter/setter 将无法与您通过 json 发送的 JSOn 一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T14:05:46.657

您只为您的操作配置*了一个拦截器*，因此没有其他拦截器应用于请求。

```
<action name="addvendor" class="org.vendor.action.VendorAction" method="recordVendor">
  <interceptor-ref name="adminHomeInterceptor" />
  <result type="json" /> 
</action> 
```

相反，您必须创建一个拦截器堆栈，然后为您的操作（或所有操作）引用它。

## 例子

```
<interceptors>
  <interceptor name="adminHomeInterceptor" class="org.admin.interceptors.AdminHomeInterceptor" />
  <interceptor-stack name="exampleDefaultStack">
    <interceptor-ref name="exception"/>
    <interceptor-ref name="adminHomeInterceptor"/>
    <interceptor-ref name="alias"/>
    <interceptor-ref name="servletConfig"/>
    <interceptor-ref name="i18n"/>
    <interceptor-ref name="prepare"/>
    <interceptor-ref name="chain"/>
    <interceptor-ref name="scopedModelDriven"/>
    <interceptor-ref name="modelDriven"/>
    <interceptor-ref name="fileUpload"/>
    <interceptor-ref name="checkbox"/>
    <interceptor-ref name="multiselect"/>
    <interceptor-ref name="staticParams"/>
    <interceptor-ref name="actionMappingParams"/>
    <interceptor-ref name="params">
      <param name="excludeParams">dojo\..*,^struts\..*,^session\..*,^request\..*,^application\..*,^servlet(Request|Response)\..*,parameters\...*</param>
    </interceptor-ref>
    <interceptor-ref name="conversionError"/>
    <interceptor-ref name="validation">
      <param name="excludeMethods">input,back,cancel,browse</param>
    </interceptor-ref>
    <interceptor-ref name="workflow">
      <param name="excludeMethods">input,back,cancel,browse</param>
    </interceptor-ref>
    <interceptor-ref name="debugging"/>
  </interceptor-stack>
</interceptors> 
```

然后将`interceptor-ref`for 您的操作更改为：

```
<interceptor-ref name="exampleDefaultStack"/> 
```

或者，您可以默认将此堆栈应用于所有操作，方法是在包部分中包含以下内容：

```
<default-interceptor-ref name="exampleDefaultStack"/> 
```

# php - 博客网站推特问题

> ID：11555020
> 
> 赞同：0
> 
> 时间：2012-07-19T06:22:23.760
> 
> 标签：php, html, twitter

我正在创建的网站上有一个博客页面（php/mysql）。我按创建日期生成博客文章，最近的在前。当您单击帖子的标题时，您将链接到该帖子的唯一页面。

问题示例：

我单击 mysite.com/blog 页面上“节日快乐”帖子上的推文按钮。它发布的 url 自然是 mysite.com/blog。我想让它发推特 mysite.com/blog/Happy Holidays。

如何强制自定义网址发推文？我必须插手JS吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T06:27:45.560

只需通过以下方式提供链接。

[http://twitter.com/share?url=http://mysite.com/blog/link](http://twitter.com/share?url=http://mysite.com/blog/link)

# javascript - Asp.Net MVC 3：使用 Javascript 的客户端 IP 地址

> ID：11555023
> 
> 赞同：0
> 
> 时间：2012-07-19T06:22:47.040
> 
> 标签：javascript, jquery, asp.net-mvc-3

> **可能重复：**
> [仅使用 Javascript 获取客户端 IP？](https://stackoverflow.com/questions/391979/get-client-ip-using-just-javascript)

我正在开发 .net **mvc 3**应用程序。我只想**获取客户端的 IP 地址**。如何使用**JavaScript**获取客户端 IP 。如果有人知道请分享。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T06:25:55.450

你不能用javascript做到这一点。您可以使用 javascript 将 AJAX 请求发送到控制器操作，该操作将返回读取它的客户端的 IP [`Request.UserHostAddress`](http://msdn.microsoft.com/en-us/library/system.web.httprequestbase.userhostaddress.aspx)：

```
public ActionResult GetIP()
{
    return Json(new { ip = Request.UserHostAddress }, JsonRequestBehavior.AllowGet);
} 
```

接着：

```
var url = '@Url.Action("GetIP", "SomeController")';
$.getJSON(url, function(result) {
    alert(result.ip);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T06:26:56.477

```
<html xmlns="http://www.w3.org/1999/xhtml">
              <head>
              <title></title>
              <script type="text/javascript">
                  window.onload = function () {
                      var script = document.createElement("script");
                      script.type = "text/javascript";
                      script.src = "http://jsonip.appspot.com/?callback=DisplayIP";
                      document.getElementsByTagName("head")[0].appendChild(script);
                  };
                  function DisplayIP(response) {
                      document.getElementById("ipaddress").innerHTML = "Your IP Address is " + response.ip;
                  }
              </script>
              </head>
              <body>
                  <form>
                      <span id = "ipaddress"></span>
                  </form>
              </body>
              </html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T06:32:37.807

```
<!-- Require jQuery / Anyversion --><script type="text/javascript"  language="Javascript"    src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<!-- Require EasyJQuery After JQuery --><script type="text/javascript"     language="Javascript" src="http://api.easyjquery.com/easyjquery.js"></script>
<script type="text/javascript" language="Javascript">
// 1\. Your Data Here
function my_callback(json) {
    alert("IP :" + json.IP + " nCOUNTRY: " + json.COUNTRY);
}

function my_callback2(json) {
    // more information at http://api.easyjquery.com/test/demo-ip.php
    alert("IP :" + json.IP + " nCOUNTRY: " + json.COUNTRY + " City: " + json.cityName + " regionName: " + json.regionName);
}

  // 2\. Setup Callback Function
  // EasyjQuery_Get_IP("my_callback"); // fastest version
 EasyjQuery_Get_IP("my_callback2","full"); // full version
</script>​ 
```

[一个工作示例](http://jsfiddle.net/hqmXu/)

# tomcat - Broken pipe错误后Tomcat servlet映射错误

> ID：11555029
> 
> 赞同：8
> 
> 时间：2012-07-19T06:23:13.417
> 
> 标签：tomcat, servlets

我们在 Tomcat 版本：7.0.23 中实现了 Servlet 3.0 AsyncContext。

它正在`RHEL 6.1 using OpenJDK version 1.6.0_24,64-bit`服务器中运行

该应用程序大部分工作正常。当网络出现一些干扰时，来自服务器的更新无法到达客户端，因为存在“ `ClientAbortException: java.net.SocketException: Broken pipe`”异常。被捕获并忽略。

这发生在行中，

```
asyncContext.getResponse().getWriter().println(updateStr); 
```

在这个 Tomcat 发疯并且将 URL 路由到意外的 servlet 之后。例如，使用 /query 映射到名为 SessionManager 的 servlet，URL`mysite.com/index.html`被路由到 SessionManager servlet。只有重启tomcat才能解决问题。

关于为什么会发生这种情况以及如何解决这个问题的任何指示？

只是为了添加更多数据，以下是异常的堆栈跟踪。

```
ClientAbortException:  java.net.SocketException: Broken pipe
    at org.apache.catalina.connector.OutputBuffer.doFlush(OutputBuffer.java:346)
    at org.apache.catalina.connector.OutputBuffer.flush(OutputBuffer.java:306)
    at org.apache.catalina.connector.Response.flushBuffer(Response.java:568)
    at org.apache.catalina.connector.ResponseFacade.flushBuffer(ResponseFacade.java:307)
    at com.management.TestHandler$TestInfo.statusUpdate(TestHandler.java:638)
    at com.chakra.ipbtt.TestObject.publish(TestObject.java:1626)
    at com.chakra.ipbtt.TestObject.handlePublish(TestObject.java:1421)
    at com.chakra.ipbtt.TestObject.executeCommand(TestObject.java:1371)
    at com.chakra.ipbtt.TestObject.executeCommand(TestObject.java:1388)
    at com.chakra.ipbtt.TestObject.executeCommand(TestObject.java:1388)
    at com.chakra.ipbtt.TestObject.executeCommand(TestObject.java:1388)
    at com.chakra.ipbtt.TestObject.executeCommand(TestObject.java:1388)
    at com.chakra.ipbtt.TestObject.executeCommand(TestObject.java:1388)
    at com.chakra.ipbtt.TestObject.executeTest(TestObject.java:1791)
    at com.management.TestHandler.executeTest(TestHandler.java:420)
    at com.management.TestHandler.handleNewTest(TestHandler.java:222)
    at com.management.TestMgr.processRequest(TestMgr.java:71)
    at com.management.TestMgr.doPost(TestMgr.java:105)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:690)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:477)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:402)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329)
    at com.management.SessionMgr.processRequest(SessionMgr.java:131)
    at com.management.SessionMgr.doPost(SessionMgr.java:164)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at com.management.SessionsFilter.doFilter(SessionsFilter.java:127)

    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:636)

Caused by: java.net.SocketException: Broken pipe
    at java.net.SocketOutputStream.socketWrite0(Native Method)
    at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:109)
    at java.net.SocketOutputStream.write(SocketOutputStream.java:153)
    at org.apache.coyote.http11.InternalOutputBuffer.realWriteBytes(InternalOutputBuffer.java:215)
    at org.apache.tomcat.util.buf.ByteChunk.flushBuffer(ByteChunk.java:462)
    at org.apache.coyote.http11.InternalOutputBuffer.flush(InternalOutputBuffer.java:119)
    at org.apache.coyote.http11.AbstractHttp11Processor.action(AbstractHttp11Processor.java:789)
    at org.apache.coyote.Response.action(Response.java:174)
    at org.apache.catalina.connector.OutputBuffer.doFlush(OutputBuffer.java:341)
    ... 48 more` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-07-08T09:26:00.120

我们在服务器端遇到了类似的问题。事实证明，我们作为响应发送的数据集在过滤器级别被阻止，因为数据非常庞大，并且在这个级别爆炸了。

```
@Component
public class TrackingFilter implements TraceRepository, Filter {
/**
* Few other business relarted code
*
byte[] bytes = pw.toByteArray();
response.getOutputStream().write(bytes);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-16T23:17:10.647

这听起来像是Tomcat方面的一个错误。

首先，我会尝试更新到 Apache Tomcat 7.0。**64** .

其次，我会尝试更新到 Java 6u **45**。

# android - 这是真的吗？基于 Adob e AIR 的 Android 开发没有未来

> ID：11555034
> 
> 赞同：6
> 
> 时间：2012-07-19T06:23:49.333
> 
> 标签：android, flash, html, air, adobe

这是真的吗？基于 Adob​​e AIR 的 Android 开发没有未来。而且我听说，Android 不再支持 ADOBE AIR/FLASH 系统。是真的吗？我听说 HTML5 是最好的替代品。这些观点是真的吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-19T06:48:03.887

1.  不仅仅是“Android 不再支持 Adob​​e Flash 浏览器插件”。Adobe 停止为移动浏览器开发 Flash 插件。这里的重点是现代 Web 体验应该优先考虑移动设备，因此我个人建议尽可能限制 Web 应用程序中 Flash 内容的使用。
2.  Adobe AIR 应用程序编译为适用于 Android 和 iOS 的本机应用程序。所以只要 Adob​​e 支持，你就可以用它来开发移动原生应用。如果您的应用程序是资源密集型或需要访问特定的原生 API，则可能存在某些限制，因此 Java 和 Objective C 可能是首选选项，具体取决于平台。
3.  HTML5 是完全不同的故事。您不能像这样在 HTML5 中构建原生移动应用程序。您可以使用它构建 Web 应用程序。不过，可以使用 PhoneGap 等一些工具将其打包为原生应用程序。但也有与 Adob​​e AIR 一样的某些限制。

PS 不幸的是，所有这些都存在很多误解和无知，并且有很多人对技术方面一无所知，但做出明确的陈述。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T10:56:59.350

Abode AIR 是否有未来当然很难说（与 Flash Player 相比，它还处于早期阶段），但让我们在这里明确一点：

Adobe 已“仅”停止开发用于移动设备的 Flash Player。所以基本上，**移动浏览器中没有 Flash**。

据我了解，Adobe 这样做是为了让他们可以**专注于桌面版 Flash Player**并**专注于 Adob​​e AIR**。老实说，iOS 永远不会支持 Flash 播放器，而在 Android 上它非常糟糕。所以我想在这一点上放弃移动插件并不是一个非常艰难的决定。

我相信 AIR 是 Adob​​e 非常关注的东西，根据他们的[路线图](http://wwwimages.adobe.com/www.adobe.com/content/dam/Adobe/en/devnet/flashplatform/whitepapers/flash-runtimes-roadmap.pdf)，他们将尝试在未来同时更新 Flash Player 和 AIR 运行时，并将 Flash Player 的重点转移到游戏和优质视频上。

如前所述，AIR 可用于创建适用于 iOS 和 Android 的原生应用程序，开发一次应用程序然后能够针对这两个平台以及桌面非常方便。然而，我第一次尝试为 iOS 和 Android 编译时，性能非常糟糕（几乎无法用于游戏）。从那以后它变得更好了，但与使用 Objective-C 原生开发的应用程序相比，它仍然很慢。Adobe 将专注于游戏这一事实有望在未来显着提高移动设备的性能。

# tridion - 在 SDL Tridion 2011 SP1 的 Dreamweaver 模板中添加参数

> ID：11555037
> 
> 赞同：6
> 
> 时间：2012-07-19T06:23:59.737
> 
> 标签：tridion, tridion-2011

我了解[了 Dreamweaver MX 模板中的自定义参数和表达式。](http://helpx.adobe.com/dreamweaver/kb/custom-parameters-expressions-dreamweaver-mx.html)

所以我尝试将它们添加到我的 DWT TBB 中，就像这样。

```
<!-- TemplateParam name="border" type="number" value="1" -->
@@border@@
<table>
  <tr>
    <td>@@(border)@@</td>
    <td><!-- #TemplateExpr expr="border" --></td>
  </tr>
</table> 
```

但我得到一个没有任何错误的空白输出。

我想将变量添加到我的 Dreamweaver TBB 并获取它们的值。谁能建议是否有其他方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T06:56:55.493

不幸的是，Tridion DWT 仅与完整的 Dreamweaver 模板共享一些语法，因此上述语法将不起作用。

然而，有一种设置变量的方法，这里有很好的记录：

[http://www.tridiondeveloper.com/get-and-set-variables-in-dwts](http://www.tridiondeveloper.com/get-and-set-variables-in-dwts)

# java - 如果系统在 android 中崩溃，文件变为零字节

> ID：11555040
> 
> 赞同：1
> 
> 时间：2012-07-19T06:24:21.890
> 
> 标签：java, android

我正在将一个对象写入一个单独的线程中的文件，并且该线程每隔一分钟执行一次。一切正常，但如果系统崩溃（移除电源），则文件（我正在写入对象的文件）大小在下次重新启动时变为零字节。

**我的代码是：**

```
FileOutputStream fileOut = new FileOutputStream("/sdcard/vis.ser");
ObjectOutputStream out = new ObjectOutputStream(fileOut);
out.writeObject(/*An object*/);    
out.close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T06:31:13.753

所以你担心以前的数据被破坏并且新的数据还没有保存？您尝试在 tmp 文件中写入外壳，如果您设法关闭它，只需重命名？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T06:57:06.413

这个想法是使用校验和来确保文件已正确写入，并按照 Whity 的建议使用重命名。

但是，如果您要保存原始类型，则可以使用[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)，这将避免您的“0 字节”问题。

[这个问题](https://stackoverflow.com/questions/4116620/how-to-be-sure-a-file-has-been-successfully-written)会给你一个关于如何预防它的更广泛的想法。

# android-wifi - 从笔记本电脑到设备的 wifi 视频流

> ID：11555041
> 
> 赞同：0
> 
> 时间：2012-07-19T06:24:24.530
> 
> 标签：android-wifi

尝试创建一个如下工作的程序。视频由笔记本电脑的网络摄像头捕获，并使用 wifi 流式传输到 android 手机。根据显示的视频，用户键入一些消息并同时发送回笔记本电脑。

*   谷歌搜索，发现建立一个 ad-hoc 无线网络可以工作，但论坛讨论说它不受 android 支持。希望我的应用程序从 2.2 开始工作

*   应该使用哪种 Socket 通信协议（UDP 或 TCP）协议来传输视频？

*   既然要实现两种方式的通信，那一种必须是服务器（笔记本电脑或移动设备）

请指导我如何实施

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T17:26:27.420

1.  使用 connectify 或任何虚拟路由器连接到您的 android phone.so 应用程序可以连接到您的笔记本电脑或台式机。
2.  即使数据丢失，也可以使用 UDP 快速恢复数据，并使用适当的数据流策略或协议。
3.  根据您的应用程序设计，我建议您将笔记本电脑用作服务器。此外，如果您选择在两个应用程序中使用线程并推荐您的应用程序充当服务器或客户端，那将是最好的，因为它需要显示更多的健壮性..！

# c++ - 具有标准容器和常量引用的 c++ 代码显示出意外的内存

> ID：11555042
> 
> 赞同：0
> 
> 时间：2012-07-19T06:24:28.177
> 
> 标签：c++, stl, containers

我们在生产中拥有以下代码（大致相同），并且看到了一些奇怪的行为。标记为“此处”的部分始终输出最后插入 accrualRows 字典的内容。如果我们更改 hash_map 以存储指向“行”的指针，那么一切正常。我对在 std 容器中使用 const & 有点怀疑。你不能在标准容器中使用引用，但这些是常量引用，我知道在某些地方会被不同地对待（例如：你可以分配临时变量和常量引用的文字）

```
#define hash_map std::tr1::unordered_map
//build up a hash map between deal index and the row for ones we care about

    typedef hash_map<int, const Row &> RowMap;
    RowMap accrualRows;    
    for( int i = 0; i < listItems.numResults(); ++i )
    {
        const Row & accrual = listItems.getResult(i);
        if( accrual.someVar )
        {
            accrualRows.insert( std::make_pair( accrual.index, accrual ) );
         }
    }

    //go through every row and if deal index is in our accrualRows, then
    //modify 

    for( int i = 0; i < numResults(); ++i )
    {
        ExposureRow & exposure = getResult(i);
        RowMap::const_iterator it = accrualRows.find( exposure.index );

        if( it != accrualRows.end() )
        {
            // HERE
            cout << it->second.someVar << endl;
        }
    }
} 
```

任何人都可以看到问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T07:01:25.260

您不能将引用存储在容器中。一个容器只能存储*对象*。如果您需要存储“引用”，您可以使用`std::reference_wrapper`或使用指针。

# c# - 使用 C# 中的编组从 C 获取字符串数组

> ID：11555043
> 
> 赞同：2
> 
> 时间：2012-07-19T06:24:28.800
> 
> 标签：c#, .net, c, marshalling

我的c代码就像

```
void GetCharArray(char* arrayNew[5])
{
    arrayNew[0] = "Test";
    arrayNew[1] = "Test2";
    arrayNew[2] = "Test4";
    arrayNew[3] = "Test5";
    arrayNew[4] = "Test6";
}

extern "C" __declspec(dllexport) void GetCharArray(char* arrayNew[5]); 
```

我想在我的 C# 代码中用字符串填充数组

```
[DllImport(@"C:/Test.dll", CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Ansi)]
public static extern void GetCharArray([MarshalAs(UnmanagedType.LPArray, SizeConst=5)] string[] sbOut);

List<string> testStr = new List<string>();
GetCharArray(test.ToArray()); 
```

我希望我`testStr`用 C 代码中的字符串填充。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T06:54:29.777

找到了解决办法

```
public static extern void GetCharArray(IntPtr[] results);

IntPtr[] pointers = new IntPtr[1000];
GetCharArray(pointers);
string[] results = new string[1000];
for (int i = 0; i < 1000; i++)
{
    results[i] = Marshal.PtrToStringAnsi(pointers[i]);
} 
```

我希望它可以帮助别人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-02T10:54:36.593

作为您自己的答案的补充（对不起，还不能发表评论）。

如果你有一个可变长度的数组，你可以简单地创建 2 个函数。

第一个只返回所需数组的长度，第二个传递一个具有第一个函数给定长度的预定义数组，就像您使用 1000 一样。

至少我可以这样解决问题。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-07-19T06:45:52.693

在不讨论您的语法的正确性的情况下，我认为以下链接将进一步帮助您。

[http://www.dotnetperls.com/convert-char-array-string](http://www.dotnetperls.com/convert-char-array-string)

# c++ - 如何在不考虑会话的情况下获取显示设备信息？

> ID：11555045
> 
> 赞同：2
> 
> 时间：2012-07-19T06:24:44.500
> 
> 标签：c++, winapi

我使用[EnumDisplayDevices](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162609%28v=vs.85%29.aspx)来获取有关当前会话中显示设备的信息。

但无论会话如何，我都需要有关显示设备的信息。因为我创建了一些 Windows 服务应用程序（系统进程）。

有谁知道此代码的替代方法：

```
vncDesktop::GetNrMonitors()
{
    if(OSversion()==3 || OSversion()==5) return 1;
    int i;
    int j=0;

    helper::DynamicFn<pEnumDisplayDevices> pd("USER32","EnumDisplayDevicesA"); // it's EnumDisplayDevices function

    if (pd.isValid())
    {
        DISPLAY_DEVICE dd;
        ZeroMemory(&dd, sizeof(dd));
        dd.cb = sizeof(dd);
        for (i=0; (*pd)(NULL, i, &dd, 0); i++)
            {
                if (dd.StateFlags & DISPLAY_DEVICE_ATTACHED_TO_DESKTOP)
                    if (!(dd.StateFlags & DISPLAY_DEVICE_MIRRORING_DRIVER))j++;
            }
    }
    return j;
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T11:11:21.180

^(以下来源)

好吧，这不起作用的原因是会话 0 没有连接到控制台。更重要的是，因为在 Windows 7 上每个用户都有更多的视频设置，所以假设您从一个用户那里获得的任何东西甚至适用于另一个用户是很糟糕的。

*   您也可以尝试在注册表中查找显示监视器。

    显示监视器应存放在这里：

    HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Enum\DISPLAY

    显示监视器的类 GUID 是`{4D36E96E-E325-11CE-BFC1-08002BE10318}`. 您可以尝试使用 Setup API ( `SetupDiGetClassDevs`, ...)在系统中查找监视器

*   如果您是专门为 Win7 及更高版本编写代码，您可能需要查看 QueryDisplayConfig 和相关函数。

* * *

来源

*   [EnumDisplayDevices 功能对我不起作用](https://stackoverflow.com/questions/9524309/enumdisplaydevices-function-not-working-for-me/9526805#9526805)
*   [http://social.msdn.microsoft.com/Forums/en/vcgeneral/thread/4384f8d2-c429-410b-87e4-1e031ddc8167](http://social.msdn.microsoft.com/Forums/en/vcgeneral/thread/4384f8d2-c429-410b-87e4-1e031ddc8167)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T09:05:03.883

我找到了这个问题的解决方案。只需要创建进程用户 - System 和 SessionID - 一些用户。然后一切正常。

# jquery - 我想通过 php 发送的值进行操作。但是 ajax 无法正常工作

> ID：11555047
> 
> 赞同：1
> 
> 时间：2012-07-19T06:25:02.967
> 
> 标签：jquery

通过onclick从javascript代码调用一个函数并通过ajax将值发送到另一个php页面..只需将其设置为“s”。如果发送值为“s”，则它希望显示为“成功”，否则显示为“失败”，但对于所有正确和不正确的输入，我都会得到“失败”。

Javascript代码：

```
function asd()
  {
     var uname=document.getElementById("uname").value;
     var pass=document.getElementById("password").value;
     $.post("vi.php",{uname:uname,pass:pass,rand:Math.random() },
         function(data)
             {  
            /*type:"POST",
            url:"vi.php?uname="+uname+"&pass="+pass,

            success:function(data)
                {
              if(data=='s')
                 {
                 alert("sccess");
                 }
             else
                 {
                 alert("faile");
                 }
                }
     */
       alert(data);
       if(data=="s")
      {
             alert("hello");
      }
      else
      {
              alert("fail");
      }

   });
    } 
```

PHP代码：

```
 <?php

      $a=$_POST['uname'];
      echo $a;

   ?> 
```

输出是：

所有输入的消息框“失败”...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T06:58:19.300

也许您的 PHP 文件中有额外的空格，如果 PHP 代码按原样键入，那么输出将在它返回的字符串之前有空格

# google-chrome - Chrome 扩展更新通知

> ID：11555051
> 
> 赞同：5
> 
> 时间：2012-07-19T06:25:41.953
> 
> 标签：google-chrome

chrome扩展自动更新时如何显示通知？我的要求是在自动更新 chrome 扩展后显示一个弹出窗口。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T19:09:45.433

安装或更新扩展程序时，您可以收听一个[`chrome.runtime.onInstalled`事件（](https://code.google.com/chrome/extensions/dev/runtime.html#event-onInstalled)[新打包的应用程序文档如此说](https://code.google.com/chrome/extensions/trunk/apps/app_lifecycle.html#H3-6)），~~但它现在仅在开发通道中可用。~~

**2019 年更新：**自 2012 年提供此答案以来，此事件已从 dev 移至 stable 频道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-09T16:20:57.320

这是完整的答案，它对我有用。

```
//=============== background.js =================
chrome.runtime.onInstalled.addListener(function (details) {
  try {
    var thisVersion = chrome.runtime.getManifest().version;
    if (details.reason == "install") {
      console.info("First version installed");
      //Send message to popup.html and notify/alert user("Welcome")
    } else if (details.reason == "update") {
      console.info("Updated version: " + thisVersion);
      //Send message to popup.html and notify/alert user

      chrome.tabs.query({currentWindow: true, active: true}, function (tabs) {
        for( var i = 0; i < tabs.length; i++ ) {
            chrome.tabs.sendMessage(tabs[i].id, {name: "showPopupOnUpdated", version: thisVersion});
        }
        });
    }
  } catch(e) {
    console.info("OnInstall Error - " + e);
  }
});

//=============== popup.js =================
//Note: this has to be injected as content script from manifest.json
chrome.runtime.onMessage.addListener(function (request, sender, sendResponse) {
    switch (request.name) {
        case "showPopupOnUpdated":
            alert("Extension got updated to latest version: " + request.version);
            break;
    }
});

//=============== manifest.js =================
//Note: background.html needs to import background.js
{
  "background": {
    "page": "background.html"
  },
  "content_scripts": [
    {
      "js": [
        "js/popup.js"
      ]
    }
  ]
} 
```

希望能帮助到你。

# javascript - 没有弹出窗口的 F acebook 登录

> ID：11555060
> 
> 赞同：0
> 
> 时间：2012-07-19T06:26:16.010
> 
> 标签：javascript, facebook, login, popup

我正在使用以下代码进行 Facebook 登录。

```
 function login(){
             FB.login(function(response) {
                   if (response.authResponse) {
                       FB.api('/me', function(response) {
                          alert(JSON.stringify(response))

                           });
                   } else {
                       console.log('User did not authorize.');
                   }
               });
       } 
```

我在单击按钮时调用登录方法。FB.login() 调用给出了一个弹出窗口，用户应该在其中输入用户名和密码。

我的要求是进行静默登录，即在没有弹出窗口的情况下登录。我的用户名和 pswd 暂时是硬编码的。如何在没有用户干预的情况下将凭据传递给登录 API。我知道硬编码不是好的做法，但稍后我会获得来自用户控件的凭据。

我如何实现这一点。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T07:21:44.120

你不能。承载登录的框架是一个 iFrame，显示 Facebook 上承载的表单页面。Facebook 不希望计算机出于各种反垃圾邮件和安全原因将人们登录到他们的网站。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T03:33:36.370

这是不可能的，有几个原因

1.  向第三方提供凭据违反 Facebook 的政策
2.  用户应该始终能够验证他们提供凭据的页面的身份。

我确定您不想要求您的用户违反政策，对吗？

# jquery - Ajax Jquery 问题：选择框在选择时没有响应

> ID：11555061
> 
> 赞同：-2
> 
> 时间：2012-07-19T06:26:17.257
> 
> 标签：jquery, ajax

我对 Jquery 比较陌生，我正在尝试运行一些我遇到问题的 Jquery 代码......

代码确实显示了地区和城市选择框，但是当我选择一个地区时没有任何反应（它应该显示所选地区的城市）......

这就是标签的...

```
 <script type="text/javascript">
var searchQry = '<?php echo fun_displaysc_js( $searchQry ); ?>' ;

$(document).ready(function(){
    if($('input[name=searchPattern]').val() == searchQry) {
        $('input[name=searchPattern]').css('color', 'gray');
    }
    $('input[name=searchPattern]').click(function(){
        if($('input[name=searchPattern]').val() == searchQry) {
            $('input[name=searchPattern]').val('');
            $('input[name=searchPattern]').css('color', '');
        }
    });
    $('input[name=searchPattern]').blur(function(){
        if($('input[name=searchPattern]').val() == '') {
            $('input[name=searchPattern]').val(searchQry);
            $('input[name=searchPattern]').css('color', 'gray');
        }
    });
    $('input[name=searchPattern]').keypress(function(){
        $('input[name=searchPattern]').css('background','');
    })

    $("#regionId").live("change",function(){
        var reg_code = $(this).val();
        <?php if($path=="admin") { ?>
            var url = '<?php echo func_admin_base_url(true)."?page=ajax&action=cities&regionId="; ?>' + reg_code;
        <?php } else { ?>
            var url = '<?php echo func_base_url(true)."?page=ajax&action=cities&regionId="; ?>' + reg_code;
        <?php }; ?>

        var result = '';

        if(reg_code != '') {

            $("#cityId").attr('disabled',false);
            $.ajax({
                type: "POST",
                url: url,
                dataType: 'json',
                success: function(data){
                    var length = data.length;
                    if(length > 0) {
                        result += '<option selected value=""><?php _display("Select a city..."); ?></option>';
                        for(key in data) {
                            result += '<option value="' + data[key].city_id + '">' + data[key].s_name + '</option>';
                        }

                        $("#city").before('<select name="cityId" id="cityId" ></select>');
                        $("#city").remove();
                    } else {
                        result += '<option value=""><?php _display('No results') ?></option>';
                        $("#cityId").before('<input type="text" name="city" id="city" />');
                        $("#cityId").remove();
                    }
                    $("#cityId").html(result);
                }
             });
         } else {
            $("#cityId").attr('disabled',true);
         }
    });

    if( $("#regionId").attr('value') == "")  {
        $("#cityId").attr('disabled',true);
    }
  });

 </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T06:37:06.957

您的 ajax 方法是`POST`，但是您将所有数据放在 url 查询字符串中，使用`GET`或将`data`属性添加到您的 ajax 调用中，并将您在查询字符串时使用的参数传递给它。

```
var url = '<?php echo func_admin_base_url(true); ?>';
...
$.ajax({
    data: "page=ajax&action=cities&regionId=" + reg_code;//or data: {page:"ajax",action:"cities",regionId:reg_code} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-19T06:59:57.917

替换 `$("#cityId").remove();`为`$("#cityId").empty();`

试试看。

# bash - bash子字符串怪异

> ID：11555062
> 
> 赞同：3
> 
> 时间：2012-07-19T06:26:26.317
> 
> 标签：bash, substring

这是密码生成器的片段：

```
# ...
ascstring='0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHILKLMNOPQRSTUVWXYZ!#$%&()*+-;   <=>?@^_`{|}~'
asclen=${#ascstring} # modulo ascstring
#...
r=$(openssl rand 100000 | sha1sum) # generates 40 hex sequence
#...
for i in {0..38..2}
do
    v=${r:i:2} ; echo -n ${ascstring:$[ 0x$v % $asclen]:1}
done
echo
# ... 
```

它使用各种定义，`ascstring`但显示的定义偶尔会导致问题。大多数情况下没关系：

```
$ ./password-gen.sh 
`?OCw&a|746|SRm8b&c=

$ ./password-gen.sh 
eE?R%3NdUjSpd<)wPuBV

$ ./password-gen.sh 
0X8)p8hPobt$x@iGy?!I

$ ./password-gen.sh 
P7LD;p<^lX1d87;{V4S$ 
```

但偶尔：

```
$ ./password-gen.sh 
5w@$ypassword-gen.sh@)A|l`06B(50f7 
```

`*`如果我从中删除`ascstring`似乎永远不会发生。我想知道发生了什么以及如何解决这个问题（不减少熵）？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T06:41:02.627

您应该引用要回显的字符串：

```
...
echo -n "${ascstring:$[ 0x$v % $asclen]:1}" 
```

# excel - VSTO Excel 加载项和 SpreadsheetGear

> ID：11555065
> 
> 赞同：0
> 
> 时间：2012-07-19T06:26:36.617
> 
> 标签：excel, vsto, add-in, spreadsheetgear

我们正在开发 C# .Net 4 中的 Excel 加载项。其中一项要求是使用某些处理的结果更新工作表。问题是，我们需要在 Excel 文件打开时（使用加载项）和批处理（文件关闭时）执行此操作。

我们已经有一个 SpreadsheetGear 许可证来生成 Excel 文件。是否可以使用 SpreadsheetGear 在 Excel 中打开 XLS 文件时对其进行修改？或者我们必须有两组代码来生成相同的信息？一种对打开的文件使用 Excel 互操作，另一种对关闭的文件使用 SpreadsheetGear？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T23:05:53.897

得到了 SpreadsheetGear 的直接回应。

> SpreadsheetGear 在与 Excel 完全不同的进程上运行，无法访问其运行时和/或当前打开的工作簿——我们的产品是使用 .NET Framework 库从头开始构建的，并且绝对不依赖于 Excel。访问所需文件的唯一方法是首先将它们从 Excel 保存到磁盘，然后使用 SpreadsheetGear 打开它们。

所以看起来我们必须实现两组代码来做同样的事情。

# iphone - 如何以编程方式更改 UIImage 的色调？

> ID：11555071
> 
> 赞同：15
> 
> 时间：2012-07-19T06:26:58.523
> 
> 标签：iphone, objective-c, image-processing, hue

我对图像处理非常陌生。我必须在我的 iPhone 应用程序项目中实现色调效果。因此，我需要改变`UIImage`. 请为此提供任何示例代码或教程链接。

提前致谢

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-07-19T09:13:16.693

首先，您需要决定是使图像成为*固定的色调*，还是*旋转现有的色调*。两者的示例如下所示。

![色调变化](../Images/15a79993523f84157ab310d8918d0b16.png)

## 固定色调

可以使用标准绘图工具修复色调 - 只需确保将混合模式设置为`kCGBlendModeHue`，并使用适当的色调进行绘制。这源自 Nitish 的解决方案，尽管我发现制作`saturation`小于的`1.0`结果不一致。这种方法确实允许改变 alpha，但对于 100% 以外的真实饱和度，您可能需要进行第二轮绘图。

```
- (UIImage*) imageWithImage:(UIImage*) source fixedHue:(CGFloat) hue alpha:(CGFloat) alpha;
// Note: the hue input ranges from 0.0 to 1.0, both red.  Values outside this range will be clamped to 0.0 or 1.0.
{
    // Find the image dimensions.
    CGSize imageSize = [source size];
    CGRect imageExtent = CGRectMake(0,0,imageSize.width,imageSize.height);

    // Create a context containing the image.
    UIGraphicsBeginImageContext(imageSize);
    CGContextRef context = UIGraphicsGetCurrentContext();    
    [source drawAtPoint:CGPointMake(0,0)];

    // Draw the hue on top of the image.
    CGContextSetBlendMode(context, kCGBlendModeHue);
    [[UIColor colorWithHue:hue saturation:1.0 brightness:1 alpha:alpha] set];
    UIBezierPath *imagePath = [UIBezierPath bezierPathWithRect:imageExtent];
    [imagePath fill];

    // Retrieve the new image.
    UIImage *result = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();    

    return result;
} 
```

## 旋转色调

要旋转色调，您需要 Core Image 滤镜。下面的代码将 UIImage 转换为 CIImage，然后将结果转换回 UIImage 进行显示。根据您的图像的来源，您可以避免这些步骤中的一个或两个。

方便的是，[Core Image Programming Guide: Using Core Image Filters](https://developer.apple.com/library/mac/#documentation/graphicsimaging/conceptual/CoreImaging/ci_tasks/ci_tasks.html)中的第一个示例使用了 CIHueAdjust 过滤器。

```
// #import <CoreImage/CoreImage.h>
// Partially from https://developer.apple.com/library/mac/#documentation/graphicsimaging/conceptual/CoreImaging/ci_tasks/ci_tasks.html
- (UIImage*) imageWithImage:(UIImage*) source rotatedByHue:(CGFloat) deltaHueRadians;
{
    // Create a Core Image version of the image.
    CIImage *sourceCore = [CIImage imageWithCGImage:[source CGImage]];

    // Apply a CIHueAdjust filter
    CIFilter *hueAdjust = [CIFilter filterWithName:@"CIHueAdjust"];
    [hueAdjust setDefaults];
    [hueAdjust setValue: sourceCore forKey: @"inputImage"];
    [hueAdjust setValue: [NSNumber numberWithFloat: deltaHueRadians] forKey: @"inputAngle"];
    CIImage *resultCore = [hueAdjust valueForKey: @"outputImage"];

    // Convert the filter output back into a UIImage.
    // This section from http://stackoverflow.com/a/7797578/1318452
    CIContext *context = [CIContext contextWithOptions:nil];
    CGImageRef resultRef = [context createCGImage:resultCore fromRect:[resultCore extent]];
    UIImage *result = [UIImage imageWithCGImage:resultRef];
    CGImageRelease(resultRef);

    return result;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T06:39:04.983

```
- (void) changeToHue:(float)hue saturation:(float)saturation {
    UIGraphicsBeginImageContext(self.bounds.size);
    CGContextRef context = UIGraphicsGetCurrentContext();    
    UIView *hueBlend = [[UIView alloc] initWithFrame:self.bounds];
    hueBlend.backgroundColor = [UIColor colorWithHue:hue saturation:saturation brightness:1 alpha:1];
    CGContextDrawImage(context, self.bounds, self.image.CGImage);
    CGContextSetBlendMode(context, kCGBlendModeHue);
    [hueBlend.layer renderInContext:context];
    self.image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();    
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-05-18T06:31:36.903

在 Apple 的 Swift 博客中，我遇到了这个照片过滤应用教程：[https ://developer.apple.com/swift/blog/?id=16](https://developer.apple.com/swift/blog/?id=16)

以下是编辑的示例代码，用于创建一个包含的方法，该方法返回一个应用了随机色调的 UIImage。

```
func applyHue(source: UIImage) -> UIImage {
    // Create a place to render the filtered image
    let context = CIContext(options: nil)

    // Create an image to filter
    let inputImage = CIImage(image: source)

    // Create a random color to pass to a filter
    let randomColor = [kCIInputAngleKey: (Double(arc4random_uniform(314)) / 100)]

    // Apply a filter to the image
    let filteredImage = inputImage!.imageByApplyingFilter("CIHueAdjust", withInputParameters: randomColor)

    // Render the filtered image
    let renderedImage = context.createCGImage(filteredImage, fromRect: filteredImage.extent)

    // Return a UIImage
    return UIImage(CGImage: renderedImage)
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-02-17T05:03:24.787

上面 Dondragmer 的旋转代码的 Swift 版本

```
// Convert the filter output back into a UIImage.
// This section from http://stackoverflow.com/a/7797578/1318452
func imageWithImage(source: UIImage, rotatedByHue: CGFloat) -> UIImage {
    // Create a Core Image version of the image.
    let sourceCore = CIImage(CGImage: source.CGImage)
    // Apply a CIHueAdjust filter
    let hueAdjust = CIFilter(name: "CIHueAdjust")
    hueAdjust.setDefaults()
    hueAdjust.setValue(sourceCore, forKey: "inputImage")
    hueAdjust.setValue(CGFloat(rotatedByHue), forKey: "inputAngle")
    let resultCore  = hueAdjust.valueForKey("outputImage") as CIImage!
    let context = CIContext(options: nil)
    let resultRef = context.createCGImage(resultCore, fromRect: resultCore!.extent())
    let result = UIImage(CGImage: resultRef)
    return result!
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-03-15T12:36:37.063

以 Dondragmer 的出色固定色调示例为起点。这是我的修改，以解决透明区域设置为相同色调的问题。

```
- (UIImage*) imageWithImage:(NSString *)name fixedHue:(CGFloat) hue alpha:(CGFloat) alpha;
// Note: the hue input ranges from 0.0 to 1.0, both red.  Values outside this range will be clamped to 0.0 or 1.0.
{
    UIImage *source = [UIImage imageNamed:name];

    // Find the image dimensions.
    CGSize imageSize = [source size];
    CGRect imageExtent = CGRectMake(0,0,imageSize.width,imageSize.height);

    // Create a context containing the image.
    UIGraphicsBeginImageContext(imageSize);
    CGContextRef context = UIGraphicsGetCurrentContext();

    [source drawAtPoint:CGPointMake(0,0)];

    // Setup a clip region using the image
    CGContextSaveGState(context);
    CGContextTranslateCTM(context, 0, source.size.height);
    CGContextScaleCTM(context, 1.0, -1.0);
    CGContextClipToMask(context, imageExtent, source.CGImage);

    //[[UIColor colorWithHue:hue saturation:1.0 brightness:1 alpha:alpha] set];
    CGContextFillRect(context, imageExtent);

    // Draw the hue on top of the image.
    CGContextDrawImage(context, imageExtent, source.CGImage);
    CGContextSetBlendMode(context, kCGBlendModeHue);
    [[UIColor colorWithHue:hue saturation:1.0 brightness:1 alpha:alpha] set];
    UIBezierPath *imagePath = [UIBezierPath bezierPathWithRect:imageExtent];
    [imagePath fill];

    CGContextRestoreGState(context); // remove clip region

    // Retrieve the new image.
    UIImage *result = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return result;
} 
```

谢谢：

[如何改变具有透明区域的 UIIMAGE 的色调？](https://stackoverflow.com/questions/24962645/how-to-change-hue-of-uiimage-having-transparent-area)

[CGContextClipToMask UIImage 蒙版上下反转](https://stackoverflow.com/questions/8141366/cgcontextcliptomask-uiimage-mask-invert-up-and-down)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-19T17:53:57.897

对于从@JonLoard 更新的 Swift 5.0

```
 func changeHue(_ image: UIImage, hueValue:CGFloat)->UIImage?{
    if let sourceCGImage = image.cgImage{
        let sourceCore = CIImage(cgImage: sourceCGImage)
        // Apply a CIHueAdjust filter
        let hueAdjust = CIFilter(name: "CIHueAdjust")
        hueAdjust?.setDefaults()
        hueAdjust?.setValue(sourceCore, forKey: "inputImage")
        hueAdjust?.setValue(CGFloat(hueValue), forKey: "inputAngle")
        if let resultCore  = hueAdjust?.value(forKey: "outputImage") as? CIImage{
            let context = CIContext(options: nil)
            if let resultRef = context.createCGImage(resultCore, from: resultCore.extent){
                let result = UIImage(cgImage: resultRef,scale: 1,orientation: image.imageOrientation)
                return result
            }
        }

    }
    return image
} 
```

# ios - iOS：如何在人脸识别中找到人脸的度数？

> ID：11555072
> 
> 赞同：1
> 
> 时间：2012-07-19T06:26:59.503
> 
> 标签：ios, image-manipulation, face-recognition

我可以使用苹果的应用程序[squareCam 进行人脸识别](https://developer.apple.com/library/ios/#samplecode/SquareCam/Introduction/Intro.html#//apple_ref/doc/uid/DTS40011190)。一切正常，但现在我想识别倾斜位置的人脸，这意味着当人脸倾斜 30 到 35 度时，我想识别它们，并根据想要倾斜我的叠加图像的程度来设置正确的脸。

请帮助我，任何建议或想法都被接受或邀请。

提前致谢

快乐编码:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T15:44:05.187

我不确定这是您要找的东西，但是您可以使用眼睛的位置来确定倾斜角度，如下所示：（*如果您使用的是 iOS 面部识别服务）*

```
CIFaceFeature *_selectedFace = // the face feature
float _rotationAngle = 0.f;
if (_selectedFace.leftEyePosition.x != _selectedFace.rightEyePosition.x) {
        _rotationAngle = atan((_selectedFace.leftEyePosition.y - _selectedFace.rightEyePosition.y) / (_selectedFace.leftEyePosition.x - _selectedFace.rightEyePosition.x));
} 
```

## 更新

从 iOS7.0 开始，`CIFaceFeature`有一个只读属性，叫做`faceAngle`，它也可以帮助定义面部角度。

```
CIFaceFeature *_selectedFace = // the face feature
float _rotationAngle = _selectedFace.faceAngle; 
```

[`CIFaceFeature`您可以在官方类参考](https://developer.apple.com/library/prerelease/ios/documentation/CoreImage/Reference/CIFaceFeature/index.html#//apple_ref/occ/instp/CIFaceFeature/faceAngle)文档中阅读有关该属性的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-02T14:42:38.313

`CIFaceFeature`现在`faceAngle`有财产

[https://developer.apple.com/library/prerelease/ios/documentation/CoreImage/Reference/CIFaceFeature/index.html#//apple_ref/occ/instp/CIFaceFeature/faceAngle](https://developer.apple.com/library/prerelease/ios/documentation/CoreImage/Reference/CIFaceFeature/index.html#//apple_ref/occ/instp/CIFaceFeature/faceAngle)

# mysql - MySQL 存储过程中的 EXECUTE 给出语法错误

> ID：11555074
> 
> 赞同：1
> 
> 时间：2012-07-19T06:27:35.177
> 
> 标签：mysql, stored-procedures, prepared-statement

一般来说，我是 MySQL 和数据库的新手。我正在尝试创建一个 MySQL 存储过程，但不断收到一个模糊的语法错误：“您的 SQL 语法有错误；请查看与您的 MySQL 服务器版本相对应的手册，以获取在 'sps 附近使用的正确语法；EXECUTE stmt在第 11 行使用 nn、ee、ll、cc、uu；COMMIT END'"

如果我删除“PREPARE stmt ...”行，则创建存储过程。当我放回线路时，我再次收到错误。

我做错了什么？

```
DELIMITER //
CREATE PROCEDURE `account_create` (nn VARCHAR(25),
                                   ee BIGINT, 
                                   ll BIGINT, 
                                   cc VARCHAR(100),
                                   uu VARCHAR(25))
   BEGIN
      DECLARE newId BIGINT;
      DECLARE sps VARCHAR(50);
      START TRANSACTION;
      set sps = 'INSERT INTO account SET name=?, entity=?, ledger=?, tblname=tmpXXX,  creation_date=CURDATE(), comment=?, uname=?';
      PREPARE stmt FROM sps;

      COMMIT;
   END// 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T06:34:32.863

您必须使用[用户定义的变量](http://dev.mysql.com/doc/refman/5.1/en/user-variables.html)来执行准备好的语句。改写为：

```
...
BEGIN
  DECLARE newId BIGINT;

  START TRANSACTION;
  set @sps = 'INSERT INTO account SET name=?, entity=?, ledger=?, tblname=tmpXXX,  creation_date=CURDATE(), comment=?, uname=?';
  PREPARE stmt FROM @sps;

  COMMIT;
END// 
```

# javascript - 如何使用 JQuery 禁用 pdf 文件下载选项？

> ID：11555076
> 
> 赞同：0
> 
> 时间：2012-07-19T06:27:41.930
> 
> 标签：javascript, jquery, html, pdf

如何使用 jquery 或 javascript 禁用 pdf 下载。

在我的网站中，我正在 iframe 中加载一些 pdf 文件。我需要保护我的文件。那么如何禁用 pdf 文件下载，打印这些选项。请帮我。

我的网站是使用 html 创建的。jQuery、mysql 和 php

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T06:53:44.333

既然您将pdf文件直接传递到浏览器中，使用Adobe Reader ActiveX显示，那么如何防止文件下载，因为文件是在下载到您的临时目录后显示的？

所以不可能使用任何 JavaScript 库。

保护您的主 PDF 文件的唯一方法是为每个页面创建图像，并通过您自己的界面（html、flash 等）在网络上将这些图像呈现给用户。

为此，您可以使用**[ImageMagick](http://www.imagemagick.org/)**和**[GhostScript](http://sourceforge.net/projects/ghostscript/)**。

您可以浏览[www.veryinteractivepeople.com/?p=521](http://www.veryinteractivepeople.com/?p=521)

希望这可以帮助...`:)`

# asp.net-mvc-3 - 如何在 MVC3 的控制器中获取 DropDown 选定值？

> ID：11555080
> 
> 赞同：0
> 
> 时间：2012-07-19T06:28:12.360
> 
> 标签：asp.net-mvc-3, html-select

大家好，我必须从下拉列表中获取所选值到控制器中的 post 方法中。我该怎么做

这是我的控制器

```
 [AcceptVerbs(HttpVerbs.Get)]
    public ActionResult AddNew()
    {          
        ViewBag.Roles = new SelectList(List(), "RoleID", "RoleName");           
        return View();
    }
    //
    //Geting All Roles In a GetRoles()/
    //
    public List<ResourceModel> List()
      {
          var roles = new List<ResourceModel>();
        SqlConnection conn = new SqlConnection("Data Source=LMIT-0039;Initial Catalog=BugTracker;Integrated Security=True");
        SqlCommand Cmd = new SqlCommand("Select GroupId,EmplopyeeRole from  EmployeeGroup", conn);
        conn.Open();
        SqlDataAdapter da = new SqlDataAdapter(Cmd);
        DataSet ds = new DataSet();
        da.Fill(ds);
        for (int i = 0; i <= ds.Tables[0].Rows.Count - 1; i++)
        {                                
            var model = new ResourceModel();
            model.RoleId = Convert.ToInt16(ds.Tables[0].Rows[i]["GroupId"]);
            model.RoleName = ds.Tables[0].Rows[i]["EmplopyeeRole"].ToString();               
            roles.Add(model);
        }
          conn.Close();
          return roles ;
      }

    //
    //To perform the AddNew Logic..i.e it adds a new employee to DB/
    //
    [AcceptVerbs(HttpVerbs.Post)]
    public ActionResult AddNew(ResourceModel model)
    {
        // var modelList = new List<ProjectModel>();
        using (SqlConnection conn = new SqlConnection("Data Source=LMIT-0039;Initial Catalog=BugTracker;Integrated Security=True"))
        {
            conn.Open();
            SqlCommand insertcommande = new SqlCommand("InsertEmplyoee", conn);
            insertcommande.CommandType = CommandType.StoredProcedure;
            insertcommande.Parameters.Add("@EmployeeName", SqlDbType.VarChar).Value = model.EmployeeName;
            insertcommande.Parameters.Add("@EmployeeEmailId", SqlDbType.VarChar).Value = model.EmployeeEmailId;
            insertcommande.Parameters.Add("@EmployeePassword", SqlDbType.VarChar).Value = model.EmployeePassword;
            insertcommande.Parameters.Add("@GroupName", SqlDbType.VarChar).Value = model.RoleName;
            insertcommande.ExecuteNonQuery();
        }
        return View();
    } 
```

现在我想在我的 postmethod 中获取选定的值@GroupName 参数...任何人都可以帮助如何做到这一点

这是我的html

```
 <%:Html.DropDownList("Roles")%> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T06:31:39.410

您可以让您的 POST 操作采用视图模型，或者向其中添加另一个参数来保存所选值：

```
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult AddNew(ResourceModel model, string roles) 
```

如果您打算重新显示相同的视图，请不要忘记以`ViewBag.Roles`与您在 GET 操作中相同的方式在您的 POST 操作中重新填充。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T06:34:15.063

您可以`Request.Form["Roles"]`在控制器操作中使用.. 但也许更好的解决方案是为页面创建一个新的视图模型，您可以使用`Html.DropDownListFor(m => m.RoleID, rolesSelectList)`或其他任何东西.. 并且该值将在 udpate 方法中自动绑定到您的模型：

```
[AcceptVerbs(HttpVerbs.Post)] 
    public ActionResult AddNew(ResourceModel model) 
```

# php - 使用php在数据库中检索和插入图像

> ID：11555084
> 
> 赞同：-5
> 
> 时间：2012-07-19T06:28:43.297
> 
> 标签：php, mysql, image, insert

我正在使用图像插入和显示各种数据。我正在一个restyrant网站上工作，我在其中存储和显示项目及其图像。我创建了两个名为 food(id[PK],name,price,image,cat_id 的表[FK]) category(cat_id[PK],cat_name) 1-我的任务是在导航栏中显示所有类别。2-当我单击类别时，它应该显示属于类别 3-插入并更新信息的食物

1-我的第一个任务是在单击类别时显示食品。这是代码，它运行良好

```
<?php  

$category=mysql_query("Select * from category",$connection);

while($category_name=mysql_fetch_array($category)) {

      $category_name['cat_name'];

      echo  "<li><br><a href=\"show.php?category=". urlencode($category_name["cat_id"]) . "\">{$category_name["cat_name"]}</a></li>" . "<br />";   

}

      if(isset($_GET['category']))

{

           $query="Select * from food where cat_id={$_GET['category']} ";

           $result=mysql_query($query,$connection);

     while($food_name=mysql_fetch_array($result))

             {

     echo $food_name["food_name"]. " Price is " . $food_name["food_price"]; 
```

它正在显示食物表中的数据，这是我必须编写代码才能显示图像的地方。

```
 }

 } 
```

将图像存储在数据库中的任务运行良好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T06:40:09.847

在数据库中存储和检索图像确实很慢而且很困难。您可以给图像一个唯一的 ID（如时间戳）并将它们保存到您的`images`文件夹中，或者您可以为此创建一个特殊的文件夹。然后，在表中创建一个额外的列并将 id 保存在相应的行中。您可以使用以下示例检索图像；

```
echo '<img src="images/'.$imageid.'.jpg">'; 
```

希望这可以帮助...`:)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T06:32:22.553

在数据库中存储图像不是一个好习惯。在这种情况下，您必须使用`<img>`标签来检索这些图像

# c# - 性能：从 Sql Server 返回多个表。C# .Net

> ID：11555085
> 
> 赞同：2
> 
> 时间：2012-07-19T06:28:47.477
> 
> 标签：c#, .net, wpf, winforms, sql-server-2008

我有一个包含 10 个下拉列表的表单。我们通过在表单加载时对数据库进行 10 次调用来获取这些列表。

我想知道以下 2 种情况下应用程序和 Sql Server 的性能。另请建议最佳方法。

1.  为每个执行 10 个请求的下拉列表获取数据
2.  创建存储过程，它将获取 10 个表并在数据读取器的 UI 上返回这 10 个表以创建实体（单次命中）

请提出你的看法...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T06:31:41.293

如果您一次性获取数据，即通过调用 proceudre onece 并获取所有十个下拉数据，这很好。但它还取决于您拥有的记录数量和处理您将与每个下拉框绑定的每条记录的时间

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T06:45:06.520

选项 1\. 易于维护。

1.10 请求不会花费太多 2.假设有一天您只想查询其中的五个，您可以轻松地组合数据部分。如果你把它们放在一个商店过程中，当业务逻辑发生变化时，事情就会变得很困难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T06:32:40.993

您可以从 sql server 存储过程返回多个表。创建具有多个选择查询的存储过程。例如，如果您的 sp 有 10 个选择查询，它将返回 10 个结果集或表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T07:17:31.937

几个月前我们遇到了同样的情况，我们选择了选项 2，我们有 5 个数据表从不同的 SP 返回，所以我们制作了一个 SP，有 5 个输出参数。

在这些参数中，我们作为 Input 发送是否需要特定数据表，然后 SP 返回返回特定数据表的索引。

```
CREATE procedure [dbo].[MySP]
@pTable1 smallint OUTPUT
@pTable2 smallint OUTPUT
AS
DECLARE iLocation smallint = 0;
BEGIN
IF @pTable1 = 1
     BEGIN
          SELECT * FROM TABLE1;
          SET @pTable1 = iLocation;
          iLocation = iLocation + 1;
     END
END
.....
AND SO ON 
```

我希望它会给你一个更好的主意。

# android - 带有 PhoneGap 和 Sencha touch 的相机

> ID：11555086
> 
> 赞同：0
> 
> 时间：2012-07-19T06:29:00.523
> 
> 标签：android, cordova, sencha-touch-2

我正在尝试使用 Sencha touch 访问相机，使用 Phonegap 移植到 Android。正如 Sencha touch [guide to using native APIs](http://docs.sencha.com/touch/2-0/#!/guide/native_apis)所建议的那样，我将相机声明为必需： `Ext.require('Ext.device.Camera');`
但不幸的是，我收到了这个错误：

```
07-19 11:51:42.159: E/Web Console(8668): Uncaught Error: [Ext.Loader]
Failed loading './device/Camera.js', please verify that the file exists at 
file:///android_asset/www/lib/touch/sencha-touch-all-debug.js:8000 
```

sencha 库在设备下确实有 Camera.js。我不确定为什么会出现此错误。

**编辑1：**仍然无法找到答案。非常感谢任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-30T10:58:01.463

如果您使用 phonegap 进行部署，请使用**Phonegap 相机功能**。我在我的应用程序中以下列方式使用它：

1.  添加`<script type="text/javascript" src="cordova-x.x.x.js"></script>`你的 index.html 文件。

2.  使用以下代码打开相机：

    ```
    navigator.camera.getPicture( cameraSuccess, cameraError, [ cameraOptions ] ); 
    ```

有关此 api 的更多信息，请使用以下链接： [http ://docs.phonegap.com/en/edge/cordova_camera_camera.md.html#Camera](http://docs.phonegap.com/en/edge/cordova_camera_camera.md.html#Camera)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T18:56:24.800

如果下载sencha touch的源码，在“src”目录下（解压后）会有一个名为“device”的目录。Camera.js 位于该目录中。似乎 sencha-touch-all-debug.js 或 sencha-touch-all.js 不包含“设备”目录中所有 .js 文件的源代码。您必须手动将该目录复制到您的 android 资产目录（例如文件：///android_asset/www/lib/touch/device）。

或者

您可以将目录设备复制到您的 android 资产上的任何位置（例如 file:///android_asset/www/device）。然后在使用 sencha touch 之前的第一个 javascript 声明中，您必须输入以下代码：

```
Ext.Loader.setConfig ({
     paths: {
         'Ext.device': 'device'
     }
}); 
```

该代码告诉“Ext.device”是对目录“device”的引用。确保“设备”目录与调用 javascript 的 html 文件相关（例如 index.html）。从上面的代码来看，“设备”目录与 html 文件的位置相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T06:59:12.113

在 sencha 论坛上有一个关于它的[线程。](http://www.sencha.com/forum/showthread.php?192354-Ext.device-problem)

问题似乎是 Phongap - Cordova 的命名。在 Sencha Touch 加载之前执行这个应该可以解决这个问题。

```
if(typeof window.Cordova != 'undefined') {
    window.PhoneGap = window.Cordova;
} 
```

# java - 使用 Java 泛型确保类型安全

> ID：11555087
> 
> 赞同：3
> 
> 时间：2012-07-19T06:29:03.987
> 
> 标签：java, generics, type-safety

我正在尝试提高以下方法的类型安全性：

```
A<String> method(B<String> arg); 
```

如何确保不使用原始类型调用此方法`B`并且编译器始终检查指定的字符串类型？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T06:31:17.193

您不能阻止某人使用原始类型调用方法。

原因是为了向后兼容 Java 的前通用版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T06:32:04.770

如果打开编译器警告 ( `-Xlint:unchecked`)，如果使用原始类型调用该方法，您将收到警告：

> 警告：[unchecked] 未经检查的转换 A a = method(new B());

# git - 如何从 git 存储库中完全删除/销毁提交？

> ID：11555088
> 
> 赞同：14
> 
> 时间：2012-07-19T06:29:10.140
> 
> 标签：git, dvcs

从表面上看，这似乎与关于在 git repos 中更改历史的一百万个类似问题相同，但我相信我的情况有点不同，我还没有找到适合我的解决方案。

我有一个 git 存储库，有一次，其中一位程序员不小心以某种方式从不同的存储库中引入了代码，而那个（以前不相关的）存储库的整个历史现在是我的存储库提交日志的一部分。

查看提交，很明显从以前不相关的仓库中“引入”了这段历史的确切提交。

在上述提交之后，我们没有触及任何这些文件。

我想从我的存储库中彻底销毁所有这些不相关的提交。我不介意我是否必须逐个提交，但我希望我的回购真正反映我们自己的代码。

如果有帮助，结构是这样的：

*   **在 1234**（更新）之后提交，不要触碰 1234 中引入的任何错误文件

*   **提交 1234** - 有几个与我们的代码库相关的文件，并且还合并到不相关 repo 的整个历史记录中

*   **1234 之前的提交**（更早）*现在*是我们自己的提交和不相关 repo 的提交的混合。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T07:52:57.597

您需要进行交互式变基：

```
git rebase -i <hash-of-the-commit-1034>~ 
```

从列表中删除提交 1034。运行 git 垃圾收集器：

```
git gc 
```

推入上游：

```
git push -f 
```

这将从您的存储库中清除提交 1034。

# performance - 提高 Quartz2D 绘图性能

> ID：11555092
> 
> 赞同：3
> 
> 时间：2012-07-19T06:29:35.277
> 
> 标签：performance, optimization, core-graphics, core-plot

我正在使用 Core-Plot 来执行一些图表。但是，在添加 2 个托管视图并尝试将 3 个图表一起滚动后，图表的性能开始变慢。

使用时间分析器，我发现大部分时间都花在了两个函数上，CGSFillDRAM8by1 和 CGSColorMaskCopyARGB8888。

![问题领域](../Images/2b34ce5ea0ef523f8bba9b9f6fc3067e.png)

我可以做些什么来提高这两个功能的性能？看来这两个功能是我绘图性能的瓶颈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T02:10:41.867

确保将混合模式设置为复制而不是正常，这应该会有所帮助。您还可以更改路径的属性，例如斜接限制。

如果您不需要保存图表并且它只是为了查看，我会使用 CAShapeLayer 并附加一个路径来代表您的图表。这将比quartz2d 渲染得快得多。

# android - 倒计时不显示

> ID：11555093
> 
> 赞同：0
> 
> 时间：2012-07-19T06:29:41.173
> 
> 标签：android, android-layout, countdowntimer

```
package com.android.tapme;

import android.os.Bundle;
import android.app.Activity;
import android.widget.*;
import android.view.*;
import android.os.CountDownTimer;

public class TapMe extends Activity {

private int countValue=0;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_tap_me);
    checkTapValue();
}
private void checkTapValue()
{
    Button tapButton=(Button)findViewById(R.id.tapButton);
    tapButton.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            countValue++;
            TextView textView;
            textView = (TextView) findViewById(R.id.textView1);
            textView.setTextSize(40);
            textView.setText(Integer.toString(countValue)); 
        }
    });     

}
@Override
protected void onResume()
{
    super.onResume();
    checkTapValue();
}
}
     class MyCount extends CountDownTimer{
TextView tv;
   public MyCount(long millisInFuture, long countDownInterval) {
        super(60000, 1000);
        }
        @Override
        public void onFinish(){}
        @Override
        public void onTick(long millisUntilFinished) {
        tv.setText((int) (millisUntilFinished/1000));
        }   
 } 
```

这是我的 .java 文件。倒计时计时器应显示 60 秒并每秒倒计时。事情是一切正常，但倒数计时器。它不显示。谁能指出我做错了什么，好吗？

另外，这是布局文件。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="#FFFFFF" >

<Button
    android:id="@+id/tapButton"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:layout_marginTop="186dp"
    android:padding="15dp"
    android:text="@string/tap_me"
    android:textSize="32dp" />

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/textView3"
    android:layout_alignParentTop="true"
    android:layout_marginTop="85dp"
    android:padding="@dimen/padding_medium"
    android:textColor="#000000"
    tools:context=".TapMe" />

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/textView2"
    android:layout_centerHorizontal="true"
    android:padding="@dimen/padding_medium"
    android:textColor="#000000"
    tools:context=".TapMe" />

 </RelativeLayout> 
```

编辑@imran 我已经做到了。没有不同。

```
class MyCount extends CountDownTimer{
    TextView tv = (TextView) findViewById(R.id.textView2);
       public MyCount(long millisInFuture, long countDownInterval) {
            super(60000, 1000);
            }
            private TextView findViewById(int textview2) {
        // TODO Auto-generated method stub
        return null;
    }
            @Override
            public void onFinish(){}
            @Override
            public void onTick(long millisUntilFinished) {
            tv.setText("" +(int) (millisUntilFinished/1000));
            }   
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T07:23:26.197

试试这个更新的代码。工作得很好。您根本没有启动倒数计时器，也从未在计时器中初始化文本视图。我在下面的代码中更改了这些错误

```
import android.app.Activity;
import android.os.Bundle;
import android.os.CountDownTimer;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class TapMe extends Activity {

    private int countValue = 0;
    private TextView textView;
    private TextView textView2;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_tap_me);

        textView = (TextView) findViewById(R.id.textView1);
        textView.setTextSize(40);
        textView2 = (TextView) findViewById(R.id.textView2);
        textView2.setTextSize(40);

        checkTapValue();

        MyCount myCount = new MyCount(60000, 1000);
        myCount.start();

    }

    private void checkTapValue() {
        Button tapButton = (Button) findViewById(R.id.tapButton);
        tapButton.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {

                countValue++;
                textView.setText(Integer.toString(countValue));

            }
        });

    }

    @Override
    protected void onResume() {
        super.onResume();
        checkTapValue();
    }

    class MyCount extends CountDownTimer {

        public MyCount(long millisInFuture, long countDownInterval) {
            super(millisInFuture, countDownInterval);
        }

        @Override
        public void onFinish() {
        }

        @Override
        public void onTick(long millisUntilFinished) {
            System.out.println(millisUntilFinished);
            textView2.setText("" + (int) (millisUntilFinished / 1000));
        }
    }
} 
```

# wpf - 如何绑定到 WPF ProgressBar 的 Visibility 元素？

> ID：11555095
> 
> 赞同：0
> 
> 时间：2012-07-19T06:30:00.370
> 
> 标签：wpf

如何绑定到 WPF 的 ProgressBar Visibility 元素？我无法将它绑定到字符串属性，因为它需要一个具有三个选项的枚举：折叠、可见和隐藏。请为 ProgressBar 的绑定可见性显示可理解的代码。提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T07:17:54.183

```
<Grid Width="150" Margin="30,0" Visibility="{Binding ProgressBarVisibility}">
    <ProgressBar Width="150" Height="Auto" HorizontalAlignment="Stretch" Foreground="#FF01D328"
                 Minimum="-3" Maximum="100" Value="{Binding DownloadPercentage, Mode=OneWay}" />
    <TextBlock Text="Downloading" HorizontalAlignment="Center" />
</Grid> 
```

在视图模型中：

```
public Visibility ProgressBarVisibility
{
    get
    {
        return (DownloadingPdf && DownloadPercentage < 100) ? Visibility.Visible : Visibility.Collapsed;
    }
}

private int mDownloadPercentage;
public int DownloadPercentage
{
    get { return mDownloadPercentage; }
    set
    {
        if (mDownloadPercentage==value)
        {
            return;
        }
        else
        {
            mDownloadPercentage = Math.Min(Math.Abs(value), 100);
            OnPropertyChanged("DownloadPercentage");
            OnPropertyChanged("DownloadProgressBarVisibility");
        }
    }
} 
```

# c# - 在 DAL 中创建返回多个输出的方法

> ID：11555096
> 
> 赞同：0
> 
> 时间：2012-07-19T06:30:02.983
> 
> 标签：c#, asp.net

我在 DAL 中创建了一个返回 DataSet 的方法，但现在我想要方法的多个输出，因为我的存储过程具有输出参数。

请提出一种从方法返回数据集和输出参数值的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T06:34:58.780

为什么不只返回一个包含您的值/对象的类

```
MyResult result = new MyResult();
result.DataSet = myDataset;
result.OtherValue = someOtherValue;

return result; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T06:33:24.237

最好的实用建议是使用`out`参数。

例如：

```
public DataSet GetEmployees(string lastName, out int status)
{
    DataSet ds = ...;
    status = ...;

    return ds;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T06:36:04.953

要么使用参数作为输出，要么通过 ref 传递变量并为其赋值

```
public String YourMethod(Int64 input, ref string output1, ref string output2) 
```

# javascript - modalbox在403页面打开

> ID：11555097
> 
> 赞同：0
> 
> 时间：2012-07-19T06:30:04.333
> 
> 标签：javascript, jquery, firefox

我正在使用自定义模态框，生成它的代码如下：

```
 function openConfig1(html,hidden,type)
    {
        html = html.substring(0, html.length-7)+hidden+'</form>';
        if(type=='prod' && document.getElementById('popup-title'))
            document.getElementById('popup-title').textContent = 'Upgrade / Downgrade Product ';
        else if(type=='conf' && document.getElementById('popup-title'))
            document.getElementById('popup-title').textContent = 'Upgrade / Downgrade Configurable Option';

        document.getElementById('popup-content').innerHTML =html;
        document.getElementById('popup-submit').style.display='none';
        document.getElementById('popup_submit_btn').setAttribute('class','btn10 pop_submit');
        document.forms.popup_form.style.display='none';
        initCustomForms();
        $.abc = $('#lightbox').simplebox();
        $.abc.init($('#lightbox'),{});
        $.abc.toPrepare('#lightbox');
    } 
```

我的问题是当“html”包含大量内容时，如果我在鼠标上单击鼠标中键，它会显示一个 403，其中包含所有 html。我正在附上一张截图以供验证。此问题仅存在于 Linux 中的 Firefox 中。它运行良好，并在所有其他浏览器和平台中打开模态框。

![在此处输入图像描述](../Images/b345c433b8a2457823abd8ef3d9a3e0e.png)

# android - 锁定屏幕方向

> ID：11555101
> 
> 赞同：5
> 
> 时间：2012-07-19T06:30:49.310
> 
> 标签：android, android-orientation

我正在制作一个允许您阅读维基百科页面的应用程序。

每次手机从纵向旋转到横向时，我都想显示一个图标，反之亦然。如果他愿意，它将让用户锁定屏幕方向，否则屏幕将根据传感器数据进行定向。这个功能是由google play中的一些App实现的，例如——Pocket

要做到这一点，我已经覆盖了

```
public void onConfigurationChanged(Configuration newConfig) 
```

现在，如果我通过使用设置锁定配置（orientation_dir 是存储在共享首选项中的方向值，并且它是正确的，因为我已经通过代码进行了调试。）

```
if(orientation_dir == Configuration.ORIENTATION_LANDSCAPE)
        {
            setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
            setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR_LANDSCAPE);
        }
        else if(orientation_dir == Configuration.ORIENTATION_PORTRAIT)
        {
            setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
            setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR_PORTRAIT);
        } 
```

然后方向设置正确，但是当手机旋转时不会调用 onConfigurationChanged() 方法。

如果我这样设置方向

```
if(orientation_dir == Configuration.ORIENTATION_LANDSCAPE)
        {
            setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
        }
        else if(orientation_dir == Configuration.ORIENTATION_PORTRAIT)
        {
            setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
        }
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR);
} 
```

然后未设置所需的方向。手机根据传感器数据重置方向。

我什至没有在方法中调用超级，因为我认为它可能设置错误，但它给了我异常“超级未调用”。

我正在尝试过去 2 天，但没有找到任何解决此问题的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T07:37:24.983

通常`onConfigurationChanged()`，事件仅在发生配置更改时触发。在您的应用程序中，方向更改事件仅在屏幕可以自由旋转时发生。如果您已锁定屏幕方向，则不会触发屏幕方向事件。`onConfigurationChanged()`不监听负责旋转设备的传感器，但仅在发生适当事件时触发。

因此，您真正想要的是访问 a`SensorManager`并附加 a `SensorListener`。这是您聆听设备实际方向的方式。

这是一个非常好的演示，它演示`SensorManager`了手机方向的功能：

[http://www.workingfromhere.com/blog/2009/03/30/orientation-sensor-tips-in-android/](http://www.workingfromhere.com/blog/2009/03/30/orientation-sensor-tips-in-android/)

更新：方向传感器是一种复合传感器，可让开发人员更轻松。它实际上并不存在于手机中。是一款结合了加速度传感器和磁场传感器的非常简洁的传感器。[根据文档（ http://developer.android.com/guide/topics/sensors/sensors_position.html](http://developer.android.com/guide/topics/sensors/sensors_position.html)），OrientationSensor 目前已被弃用。

请参阅[android 方向传感器的替代方案是什么？](https://stackoverflow.com/questions/10291322/what-is-the-alternative-to-android-orientation-sensor)供样品使用。

它可能需要一些修复我没有测试太多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T06:52:53.870

`onConfigurationChanged`- 是让您的活动知道方向变化的通知。

您不应尝试在该方法中更改或修复方向。如果您将方向设置为横向或纵向，那么您将不会收到新的方向更改通知，因为活动的方向不会改变。可能您应该在您计划在方向发生变化时显示的小部件的事件处理程序中设置方向设置。

# ruby-on-rails - 如何使用哈希键制作路由的正常方式

> ID：11555102
> 
> 赞同：0
> 
> 时间：2012-07-19T06:30:50.467
> 
> 标签：ruby-on-rails, ruby-on-rails-3, hash, routes

现在我可以通过访问来查看我收到的消息`example.com/messages/46747`

我的路线是这样设置的

```
'messages/:id' => 'messages#show', :as => 'show_messages' 
```

访问该页面的链接标签设置为

```
<%= link_to 'show message', show_messages_path %> 
```

在这种情况下，消息的 ID 显示在 URL 中。
我猜在大多数情况下，ID 应该由散列键代替。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T06:56:53.933

使用 ActiveRecord::Base to_param 来更改路径生成的 url：

```
class User < ActiveRecord::Base
  def to_param  # overridden
    name
  end
end

user = User.find_by_name('Phusion')
user_path(user)  # => "/users/Phusion" 
```

只需通过您希望在 url 中看到的文本覆盖 Message 类中的 to_param 方法。

# django - 如何在 django 管理站点中实现像用户模型这样的普通模型管理员

> ID：11555105
> 
> 赞同：0
> 
> 时间：2012-07-19T06:30:58.657
> 
> 标签：django, admin

众所周知，在 django 管理站点中添加新用户后，页面被重定向到编辑配置文件，而不是像其他模型那样的用户列表页面。如何在普通模型中实现这一点？例如，我定义了一个名为 Image 的模型，并想在图像上传后编辑图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T07:51:59.217

将以下函数放入您的管理类。

django/contrib/auth/admin.py:L139

```
def response_add(self, request, obj, post_url_continue='../%s/'):
    """
    Determines the HttpResponse for the add_view stage. It mostly defers to
    its superclass implementation but is customized because the User model
    has a slightly different workflow.
    """
    # We should allow further modification of the user just added i.e. the
    # 'Save' button should behave like the 'Save and continue editing'
    # button except in two scenarios:
    # * The user has pressed the 'Save and add another' button
    # * We are adding a user in a popup
    if '_addanother' not in request.POST and '_popup' not in request.POST:
        request.POST['_continue'] = 1
    return super(UserAdmin, self).response_add(request, obj, post_url_continue) 
```

# jquery - 使用 jquery 设置标签属性

> ID：11555112
> 
> 赞同：2
> 
> 时间：2012-07-19T06:31:37.023
> 
> 标签：jquery

我有 4 个标签，如下所示：

```
<label id = "t1">Tag 1 </label>
<label id = "t2">Tag 2 </label>
<label id = "t3">Tag 3 </label>
<label id = "t4">Tag 4 </label> 
```

我想一次将一个标签设置为粗体。假设我想将“标签 1”设置为粗体，那么剩余的应该是普通字体，如果我将“标签 2”设置为粗体，那么剩余的应该设置为普通字体。

jquery 的代码应该是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T06:33:57.200

您可以创建一个类：

> W3C：HTML 与 CSS 的分离使得维护站点、跨页面共享样式表以及针对不同环境定制页面变得更加容易。这被称为结构（或：内容）与表示的分离。

```
.bold {
   font-weight: bold;
} 
```

```
$('label').click(function() {
   $('label').removeClass('bold')
   $(this).addClass('bold')
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T06:37:34.140

@Raminson 的变体

你可以使用一个类：

```
.bold {
   font-weight: bold;
}

$('label').click(function() {
   $(this).addClass('bold').siblings('label').removeClass('bold');
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T06:33:46.237

就这样做

粗体

```
$('#t1').css({ 'font-weight': 'bold' }); 
```

删除粗体

```
$('#t1').css({ 'font-weight': ''}); 
```

对于每个你需要这样做

```
function applyboldtolable(id)
{
$('label').each(function()
{
  $(this).css({ 'font-weight': ''});
});
   $('#'+id).css({ 'font-weight': 'bold' });

} 
```

请注意，您可以将 .each 替换为

```
$('label').css({ 'font-weight': ''}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T06:36:32.690

```
function setBoldLabel(labelID){
    $('label').each( function () {
                 if($(this).id()==labelID)
                 $(this).css({ 'font-weight': 'bold' });
                 else
                 $(this).css({ 'font-weight': 'normal' }); 
    } );
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T06:40:03.473

如果要更改标签上的字体粗细，请单击以下代码

```
<label class="tlabel" id = "t1">Tag 1 </label>
<label class="tlabel" id = "t2">Tag 2 </label>
<label class="tlabel" id = "t3">Tag 3 </label>
<label class="tlabel" id = "t4">Tag 4 </label>

.bold {
   font-weight: bold;
}

$('.tlabel').click(function() {
   $('.tlabel').removeClass('bold')
   $(this).addClass('bold')
}); 
```

# iphone - 编辑时需要在 UITextField 中隐藏文本并应显示另一个文本

> ID：11555121
> 
> 赞同：0
> 
> 时间：2012-07-19T06:32:19.757
> 
> 标签：iphone

iOS 开发新手。需要有关`UITextField` 委托方法的帮助。我的问题是我有`UITextField`

如果我在文本字段中输入一些“XYZ”文本，它应该在我编辑时显示一些我想要的其他文本，只有它应该完成。

```
- (void)textFieldDidBeginEditing:(UITextField *)textField
{    
    [self.requestTextFiled setReturnKeyType:UIReturnKeyDone];

    [NSTimer scheduledTimerWithTimeInterval:.1 target:nil selector:@selector(checkingTheQuestion) userInfo:nil repeats:YES];   
}

-(void)checkingTheQuestion
{    

} 
```

我试过打电话检查问题，但我做不到。请帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T06:44:58.167

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string 
```

是适合你的方法。您可以将其用作：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    //Your code

    if([textField.text isEqualToString:@"xyz"])
    {
        textField.text = @"Text you want to set";
    }
} 
```

当您在键盘上键入任何字符时调用此方法。

# javascript - Javascript：如何在回调中设置父对象变量

> ID：11555125
> 
> 赞同：3
> 
> 时间：2012-07-19T06:32:30.620
> 
> 标签：javascript, node.js, asynchronous, callback, mongoose

我在我的 mongoosejs ODM 模式中定义了一个自定义方法，它允许我生成盐并对给定的密码进行编码。

因为 node.js 加密模块是异步的，所以我必须将密码编码放入 salt 回调中（否则根本没有 salt，因为生成需要时间）。但这不是主要问题。主要问题是我需要设置 mongoosejs 对象的 salt 和 password 属性。通常你用“this”来做这个，但“this”在回调中不起作用（它指的是回调而不是父对象）。

**那么，我怎样才能从异步调用中取回我的编码密码和盐呢？**

```
methods: {
    setPassword: function(password) {
        crypto.randomBytes(32, function(err, buf) {
            var salt = buf.toString('hex');
            this.salt = salt;
            crypto.pbkdf2(password, salt, 25000, 512, function(err, encodedPassword) {
                if (err) throw err;
                this.password = encodedPassword;
            });
        });
    }
} 
```

*我也尝试使用 return 语句，但它们不返回任何东西......*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T06:34:35.773

您可以将变量设置为`this`回调外部并在内部使用它：

```
methods: {
    setPassword: function(password) {
        crypto.randomBytes(32, function(err, buf) {
            var self = this;
            var salt = buf.toString('hex');
            this.salt = salt;
            crypto.pbkdf2(password, salt, 25000, 512, function(err, encodedPassword) {
                if (err) throw err;
                self.password = encodedPassword;
            });
        });
    }
} 
```

或者您可以绑定回调函数，以便`this`保留 的值：

```
methods: {
    setPassword: function(password) {
        crypto.randomBytes(32, function(err, buf) {
            var salt = buf.toString('hex');
            this.salt = salt;
            crypto.pbkdf2(password, salt, 25000, 512, function(err, encodedPassword) {
                if (err) throw err;
                this.password = encodedPassword;
            }.bind(this));
        });
    }
} 
```

# python - ImportError：没有名为 test.meetinghandler 的模块

> ID：11555128
> 
> 赞同：2
> 
> 时间：2012-07-19T06:32:43.443
> 
> 标签：python, django, django-models

嘿朋友我将我的 python 路径设置为

```
/home/rohit/test 
```

这是我的测试文件夹的结构

```
test/
    __init__.py
    meetinghandler/
        __init__.py
        meetinghandler.py
    db/
        __init__.py
        models.py
        setting.py
        manage.py 
```

我的问题是当我尝试导入时

```
from test.meetinghandler import meetinghandler 
```

从models.py我收到错误，即；

> ImportError：没有名为 test.meetinghandler 的模块

请帮我解决我做错了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T08:10:24.153

`from test import meetinghandler`寻找一个`test`模块，它不会在你的 python 路径中找到。

原因？您添加`/home/rohit/test/`到您的 python 路径，但该目录本身不包含`test`目录 :-) Python 在路径中查找模块，这就是原因。

在您的情况下，您必须将您的主目录添加到您的 python 路径才能找到它。（或者更好的是，google for virtualenv 等等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T06:40:17.430

尝试从控制台调试。

*   看看是否可以`import test`正常工作。如果是这样，您的 meetinghandler.py 中可能有一些错误语句未加载该文件。

*   如果`import test`控制台本身失败，请查看测试是否在 python 路径中（即，作为 settings.INSTALLED_APPS 中存在的文件夹的一部分）

# ruby-on-rails - 推送到heroku时出错；heroku 正在尝试安装与 sqlite3 相关的东西

> ID：11555131
> 
> 赞同：2
> 
> 时间：2012-07-19T06:32:51.593
> 
> 标签：ruby-on-rails, ruby, heroku

我正在尝试将应用程序推送到 heroku 并收到以下错误消息。我已经看过有关此主题的其他一些帖子，但我不打算修复它。我没有在应用程序的任何地方引用 sqlite3，也没有在我自己的系统中将它作为 gem。想法？

```
Installing dependencies using Bundler version 1.2.0.pre
   Running: bundle install --without development:test --path vendor/bundle --binstubs bin/ --deployment
   Fetching gem metadata from https://rubygems.org/.......
   Installing rake (0.9.2.2)
   Installing i18n (0.6.0)
   Installing multi_json (1.3.6)
   Installing activesupport (3.2.3)
   Installing builder (3.0.0)
   Installing activemodel (3.2.3)
   Installing erubis (2.7.0)
   Installing journey (1.0.4)
   Installing rack (1.4.1)
   Installing rack-cache (1.2)
   Installing rack-test (0.6.1)
   Installing hike (1.2.1)
   Installing tilt (1.3.3)
   Installing sprockets (2.1.3)
   Installing actionpack (3.2.3)
   Installing mime-types (1.19)
   Installing polyglot (0.3.3)
   Installing treetop (1.4.10)
   Installing mail (2.4.4)
   Installing actionmailer (3.2.3)
   Installing arel (3.0.2)
   Installing tzinfo (0.3.33)
   Installing activerecord (3.2.3)
   Installing activeresource (3.2.3)
   Installing coffee-script-source (1.3.3)
   Installing execjs (1.4.0)
   Installing coffee-script (2.2.0)
   Installing rack-ssl (1.3.2)
   Installing json (1.7.3) with native extensions
   Installing rdoc (3.12)
   Installing thor (0.14.6)
   Installing railties (3.2.3)
   Installing coffee-rails (3.2.2)
   Installing jquery-rails (2.0.2)
   Using bundler (1.2.0.pre)
   Installing rails (3.2.3)
   Installing sass (3.1.20)
   Installing sass-rails (3.2.5)
   Installing sqlite3 (1.3.6) with native extensions
   Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.
   /usr/local/bin/ruby extconf.rb
   checking for sqlite3.h... no
   sqlite3.h is missing. Try 'port install sqlite3 +universal'
   or 'yum install sqlite-devel' and check your shared library search path (the
   location where your sqlite3 shared library is located).
   *** extconf.rb failed ***
   Could not create Makefile due to some reason, probably lack of
   necessary libraries and/or headers.  Check the mkmf.log file for more
   details.  You may need configuration options.
   Provided configuration options:
   --with-opt-dir
   --without-opt-dir
   --with-opt-include
   --without-opt-include=${opt-dir}/include
   --with-opt-lib
   --without-opt-lib=${opt-dir}/lib
   --with-make-prog
   --without-make-prog
   --srcdir=.
   --curdir
   --ruby=/usr/local/bin/ruby
   --with-sqlite3-dir
   --without-sqlite3-dir
   --with-sqlite3-include
   --without-sqlite3-include=${sqlite3-dir}/include
   --with-sqlite3-lib
   --without-sqlite3-lib=${sqlite3-dir}/lib
   --enable-local
   --disable-local
   Gem files will remain installed in /tmp/build_epqv5l1a15kp/vendor/bundle/ruby/1.9.1/gems/sqlite3-1.3.6 for inspection.
   Results logged to /tmp/build_epqv5l1a15kp/vendor/bundle/ruby/1.9.1/gems/sqlite3-1.3.6/ext/sqlite3/gem_make.out
   An error occurred while installing sqlite3 (1.3.6), and Bundler cannot continue.
   Make sure that `gem install sqlite3 -v '1.3.6'` succeeds before bundling.
   Failed to install gems via Bundler.
   Detected sqlite3 gem which is not supported on Heroku.
   http://devcenter.heroku.com/articles/how-do-i-use-sqlite3-for-development 
   Heroku push rejected, failed to compile Ruby/rails app 
```

我的 gem 文件看起来像；

```
source 'https://rubygems.org'
gem 'rails', '3.2.3'
gem 'jquery-rails'
group :development, :test do
gem "pg", "~> 0.14.0"  
gem "rspec", "~> 2.11.0"
end
group :assets do
gem 'sass-rails',   '~> 3.2.3'
gem 'coffee-rails', '~> 3.2.1'
gem 'uglifier', '>= 1.0.3'
end
group :production do
gem "pg", "~> 0.14.0"
end 
```

我的 gemfile.lock 看起来像；

```
 GEM  remote: https://rubygems.org/
  specs:
    actionmailer (3.2.3)
      actionpack (= 3.2.3)
      mail (~> 2.4.4)
    actionpack (3.2.3)
      activemodel (= 3.2.3)
      activesupport (= 3.2.3)
      builder (~> 3.0.0)
      erubis (~> 2.7.0)
      journey (~> 1.0.1)
      rack (~> 1.4.0)
      rack-cache (~> 1.2)
      rack-test (~> 0.6.1)
      sprockets (~> 2.1.2)
    activemodel (3.2.3)
      activesupport (= 3.2.3)
      builder (~> 3.0.0)
    activerecord (3.2.3)
      activemodel (= 3.2.3)
      activesupport (= 3.2.3)
      arel (~> 3.0.2)
      tzinfo (~> 0.3.29)
    activeresource (3.2.3)
      activemodel (= 3.2.3)
      activesupport (= 3.2.3)
    activesupport (3.2.3)
      i18n (~> 0.6)
      multi_json (~> 1.0)
    arel (3.0.2)
    builder (3.0.0)
    coffee-rails (3.2.2)
      coffee-script (>= 2.2.0)
      railties (~> 3.2.0)
    coffee-script (2.2.0)
      coffee-script-source
      execjs
    coffee-script-source (1.3.3)
    diff-lcs (1.1.3)
    erubis (2.7.0)
    execjs (1.4.0)
      multi_json (~> 1.0)
    hike (1.2.1)
    i18n (0.6.0)
    journey (1.0.4)
    jquery-rails (2.0.2)
      railties (>= 3.2.0, < 5.0)
      thor (~> 0.14)
    json (1.7.3)
    mail (2.4.4)
      i18n (>= 0.4.0)
      mime-types (~> 1.16)
      treetop (~> 1.4.8)
    mime-types (1.19)
    multi_json (1.3.6)
    pg (0.14.0)
    polyglot (0.3.3)
    rack (1.4.1)
    rack-cache (1.2)
      rack (>= 0.4)
    rack-ssl (1.3.2)
      rack
    rack-test (0.6.1)
      rack (>= 1.0)
    rails (3.2.3)
      actionmailer (= 3.2.3)
      actionpack (= 3.2.3)
      activerecord (= 3.2.3)
      activeresource (= 3.2.3)
      activesupport (= 3.2.3)
      bundler (~> 1.0)
      railties (= 3.2.3)
    railties (3.2.3)
      actionpack (= 3.2.3)
      activesupport (= 3.2.3)
      rack-ssl (~> 1.3.2)
      rake (>= 0.8.7)
      rdoc (~> 3.4)
      thor (~> 0.14.6)
    rake (0.9.2.2)
    rdoc (3.12)
      json (~> 1.4)
    rspec (2.11.0)
      rspec-core (~> 2.11.0)
      rspec-expectations (~> 2.11.0)
      rspec-mocks (~> 2.11.0)
    rspec-core (2.11.1)
    rspec-expectations (2.11.1)
      diff-lcs (~> 1.1.3)
    rspec-mocks (2.11.1)
    sass (3.1.20)
    sass-rails (3.2.5)
      railties (~> 3.2.0)
      sass (>= 3.1.10)
      tilt (~> 1.3)
    sprockets (2.1.3)
      hike (~> 1.2)
      rack (~> 1.0)
      tilt (~> 1.1, != 1.3.0)
    thor (0.14.6)
    tilt (1.3.3)
    treetop (1.4.10)
      polyglot
      polyglot (>= 0.3.1)
    tzinfo (0.3.33)
    uglifier (1.2.6)
      execjs (>= 0.3.0)
      multi_json (~> 1.3)

PLATFORMS
  ruby

DEPENDENCIES
  coffee-rails (~> 3.2.1)
  jquery-rails
  pg (~> 0.14.0)
  rails (= 3.2.3)
  rspec (~> 2.11.0)
  sass-rails (~> 3.2.3)
  uglifier (>= 1.0.3)` 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T06:39:50.273

我怀疑你没有提交你的 Gemfile.lock。`git status`告诉你什么？或者，尝试`git add .`然后再试`git status`一次。

# c++ - QWidget 和 QMessageBox 的显示

> ID：11555133
> 
> 赞同：0
> 
> 时间：2012-07-19T06:32:59.223
> 
> 标签：c++, qt, qmessagebox

我有一个 QWidget，它在 show 事件上显示一个 QMessageBox。我已经覆盖了 QWidget 的 showEvent 函数。问题是，消息框首先显示，小部件的其余部分稍后显示。我该如何解决这个问题？

```
void InstallScreen::showEvent( QShowEvent *s )
{ 
   QMessageBox::about( m_main, "One Click Installer", 
          QString( "The following repositories will be added \n %1" ).arg( repoList ) ); 
   QMessageBox::about( m_main, "One Click Installer", 
          QString( "The following packages will be installed \n %1" ).arg( packList ) ); 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T06:36:57.700

使用延迟调用来显示小部件，例如通过将小部件显示代码放入槽中并使用 QTimer::singleShot 以 0 秒的延迟调用它。

这将允许 showEvent**在**显示小部件之前充分处理并安排主循环上的任何重绘事件。这将使小部件和消息框彼此独立地显示/绘制/重绘。

```
protected:
void MyWidget::showEvent(...) {
     ...
     QTimer::singleShot(0, this, SLOT(showMessageBox());
}

private slots:
void MyWidget::showMessageBox() {
     QMessageBox::information(...); // or whatever
} 
```

如果您需要一些额外的余量（无论出于何种原因），请将计时器延迟设置为 50 或 100 毫秒。

# php - Oauth API 客户端出现错误

> ID：11555138
> 
> 赞同：5
> 
> 时间：2012-07-19T06:33:31.940
> 
> 标签：php, oauth

谁能告诉我如何为我的网站实现 Oauth api。我已经从`http://code.google.com/p/oauth-php/downloads/list(oauth-php-175.tar.gz)`

我已经创建了数据库并在其中运行了 register.php 文件`example/server`，我得到了一个使用者密钥和密钥。我已经用这个替换了 api 密钥和密钥`client/twolegged.php`。提到它们的 url 被替换为`server/www/hello.php`

但是当我运行文件`client/twolegged.php`时出现错误

```
ExceptionRequest failed with code 401: Can't verify request, missing oauth_consumer_key or oauth_token-OAuth Verification Failed: 
```

这是正确的方法吗？请帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T10:08:29.507

采用

```
$server->verifyIfSigned(false) 
```

代替

```
$server->verifyIfSigned() 
```

在你好.php

# c - VC：如何将大的 .lib 拆分成小的 .lib 文件

> ID：11555145
> 
> 赞同：0
> 
> 时间：2012-07-19T06:33:56.983
> 
> 标签：c, windows, static-libraries, visual-c++

环境：VC，Windows。
我有一个由第三方创建的大 .lib 文件 aaa.lib。我没有源代码。我需要自己构建静态库 bbb.lib，它使用 aaa.lib 中的几个函数。由于一些业务问题，我不得不向我的客户隐藏 aaa.lib。所以我使用这个命令将 aaa.lib 合并到 bbb.lib 中。

```
LIB /OUT:bbb.lib mycode.lib aaa.lib 
```

它可以工作，除了 bbb.lib 太大。当我进行“合并”时，如何指定 aaa.lib 的一部分？谢谢。我知道还有一篇关于 .lib 拆分的帖子，但它不适用于 Windows。

我尝试了这些命令来提取函数，但不起作用。以ws2_32.lib中的WSAStartup()为例：

```
LIB ws2_32.lib /extract:__imp__WSAStartup@8 
```

链接：警告 LNK4014：找不到成员对象_imp *_WSAStartup* @8

```
LIB ws2_32.lib /extract:WSAStartup 
```

链接：警告 LNK4014：找不到成员对象 WSAStartup

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T06:47:08.610

如果您从特定对象中使用非常少的函数，则可以使用以下命令提取对象文件

```
LIB library /EXTRACT:member /OUT:objectfile 
```

[在这里](http://msdn.microsoft.com/en-us/library/889z8z58%28v=vs.71%29.aspx)查看详细信息。

对于库中所有对象的列表，您可以使用：

```
LIB library /LIST 
```

# java - JSON 解析器为字段名返回 null

> ID：11555149
> 
> 赞同：2
> 
> 时间：2012-07-19T06:34:09.523
> 
> 标签：java, json, parsing, jackson

我有以下代码，当我使用有效的 JSON 运行它时，它为字段名返回 null。几个小时以来，我一直在为此挠头。

```
 JsonFactory jFactory=new JsonFactory();
    JsonParser parser=jFactory.createJsonParser(bytes);

    while (parser.nextToken() != JsonToken.END_OBJECT) {
        String field_name=parser.getCurrentName();
        System.out.println("fieldName: "+field_name);
        parser.nextToken();
        if(field_name.equals("value")){
            System.out.println("value found");
            data=parser.getBinaryValue();
            out.write(new String(data));
        }//if
    }//while
    parser.close(); 
```

JSON 示例：

```
 {
     "mimetype" : "text/plain",
     "value" : "c2FzCg=="
      } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T06:56:44.420

你快到了。你只需要`nextToken`在 while 结构之前，就可以跳过`JsonToken.START_OBJECT`.

像这样：

```
parser.nextToken();
while (parser.nextToken() != JsonToken.END_OBJECT) { 
```

# browser - 为什么phonegap不嵌入它自己的webview？

> ID：11555153
> 
> 赞同：0
> 
> 时间：2012-07-19T06:34:20.970
> 
> 标签：browser, cordova, webkit, v8

为什么 phonegap 不将 webkit 和 V8 捆绑到构建中，而不是依赖操作系统提供的 webviews？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T09:54:45.867

iOS 不允许您部署外部解释器/编译器。因此，您仅限于操作系统的内置 WebView。

# php - 使用 IN 的 PHP MySQL 准备查询

> ID：11555154
> 
> 赞同：0
> 
> 时间：2012-07-19T06:34:23.217
> 
> 标签：php, mysql, sql, mysqli, prepared-statement

我有几种输入数组的情况，例如：

```
$myArray = array( "apple", "banana", "orange", "pear" ); 
```

数组中可以有任意数量的水果。我想在 PHP 中使用 MySQL 准备好的语句来创建类似于以下内容的查询：

```
SELECT * FROM fruitcart WHERE fruitname IN ('apple','banana','orange','pear'); 
```

以前，我通过执行以下操作来完成此操作：

```
$query = "SELECT * FROM fruitcart WHERE fruitname IN ('" . implode( "','", $myArray ) . "')"; 
```

但我想知道是否有办法用准备好的语句做类似的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T06:50:12.550

没有办法使用准备好的语句来做到这一点。唯一的可能性是做这样的事情：

```
$query = "SELECT * FROM fruitcart WHERE fruitname = ? OR fruitname = ? OR fruitname = ? ... 
```

您可以使用 foreach 循环轻松构建这样的语句。

但请注意，由于您的数组可能有不同数量的值，这可能会导致数据库优化器算法出现一些混乱。为了获得最佳性能，您可能需要准备具有例如 128、64、32、16、8、4、2、1 个插槽的语句，然后使用您可以填充的最大一个，直到您从数据库中获取所有值。这样，优化器就能够处理数量有限的语句框架。

您也可以为此使用临时表。例如，为您的值集创建一个仅包含值（apple、banana、...）和 id 的表。

然后，您可以使用唯一的 set-id 将值数组插入数据库（例如，php 提供了一个 guid 函数），然后在子查询中选择它们：

```
$query = "SELECT * FROM fruitcart WHERE fruitname IN (SELECT fruitname FROM temptable WHERE setid = ?)" 
```

这很容易准备，并且会表现得很好。您可以为 temptable 使用内存中的表，这样它会非常快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T06:53:31.883

```
$placeholders = rtrim(str_repeat('?, ', count($myArray)), ', ') ;
$query = "SELECT * FROM fruitcart WHERE fruitname IN ($placeholders)";

$stm = $db->prepare($query) ;
$stm->execute($myArray) ; 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-19T06:38:42.207

您正在使用正确的方法来做到这一点，您可以编辑

```
$list = implode( ',', $myArray );
$query = "SELECT * FROM fruitcart WHERE fruitname IN ('" . $list . "')"; 
```

就是这样 ：）

# java - 单击jsp页面上的链接打开文件

> ID：11555155
> 
> 赞同：1
> 
> 时间：2012-07-19T06:34:28.020
> 
> 标签：java, javascript, jsp, database-connection

我在 JSP 页面上有一个链接（比如**打开文件）。**单击该链接时，我需要打开一个文件。该文件的位置存在于数据库的表中。由于“onclick”事件是一个Javascript事件，我对如何获取文件位置一无所知。请帮忙。我对这些东西比较陌生。请给出一个实现这一点的想法。我可以根据这个想法继续

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T06:38:45.053

单击时调用从 DB 读取文件位置并将用户重定向到该文件位置的 servlet

或读取文件并将其写出以响应并设置标题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T06:43:43.373

这是一个简单的问题。

基本上，您必须有一个发布到 jsp 页面或 servlet 的表单。

在那里，您应该读取一个指向该文件的隐藏元素。

在那里，您应该将文件写入响应并将其发送回用户。

请参阅我的帖子 [如何在 Java 中提供本地 PDF 文件的下载？](https://stackoverflow.com/questions/11428750/how-to-offer-download-of-local-pdf-file-in-java/11429350#11429350) 了解更多信息

# android - 我从来没有在 android 模拟器中看到 logcat 输出？

> ID：11555156
> 
> 赞同：0
> 
> 时间：2012-07-19T06:34:28.980
> 
> 标签：android, emulation, ddms

我想查看控制台输出，所以我使用 Logcat，但 logcat 不显示任何输出消息。我还重新启动了 eclipse。也单击设备登录 android DDMS。我也做了 DDMS 的全部重置透视图。但我不能成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T06:40:40.067

在线模式下选择 DDMS 中的设备/模拟器。LogCat`'+'`下方左侧面板中有标志（绿色）。单击它并`"Saved Filters"`添加您的整体`package name`并尝试此操作。`"Filter Name"``"by Application Name"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T07:24:09.037

确保在您的 Logcat 中未选择右上角的按钮。其中之一阻止 Logcat 显示新日志。希望有帮助。

# c++ - C++ - 关于动态数组的范围

> ID：11555159
> 
> 赞同：1
> 
> 时间：2012-07-19T06:34:43.060
> 
> 标签：c++, pointers, scope

我有一个关于动态数组范围的快速问题，我认为这会导致我正在编写的程序中出现错误。此代码段检查函数参数并根据用户传递的内容分支到第一个或第二个。

但是，当我运行该程序时，我得到一个与范围相关的错误：

```
错误：未在此范围内声明“数组”
```

除非我对 C++ 的了解让我失望，否则我知道在分支完成时在条件内创建的变量会超出范围。但是，我动态分配了这些数组，所以我不明白为什么我不能在程序的后面操作这些数组，因为指针应该保留。

```
 //Prepare to store integers
        if (flag == 1) {
                int *Array;
                Array = new int[input.length()]; 
            } 
        //Prepare to store chars
        else if (flag == 2) {
                char *Array;
                Array = new char[input.length()];
            } 
```

任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T06:35:31.960

`Array`前声明`if`。而且你不能将不同类型的数组声明为一个变量，所以我认为你应该使用指针。

```
int *char_array = nullptr;
int *int_array  = nullptr;

//Prepare to store integers
if (flag == 1) {
    int_array = new int[input.length()]; 
} 
//Prepare to store chars
else if (flag == 2) {
    char_array = new char[input.length()];
}

if (char_array)
{
    //do something with char_array
}
else if (int_array)
{
    //do something with int_array
} 
```

同样作为 j_random_hacker 点，您可能希望更改程序设计以避免很多`if`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T06:39:44.953

虽然您是对的，因为您在堆上动态分配它们，所以在您明确删除它（或程序结束）之前，内存不会释放给系统，指向内存的*指针*在块时超出范围在 exits 中声明。因此，如果要在块之后使用您的指针，则它们需要存在于更广泛的范围内。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-19T06:48:09.720

内存保持*分配*状态（即占用宝贵的空间），在关闭后无法访问它`}`，因为此时程序失去了解决它的能力。为避免这种情况，您需要将返回的指针分配给`new[]`在外部作用域中声明的指针变量。

作为一个单独的问题，您似乎正在尝试分配两种不同类型之一的内存。如果您想以可移植的方式执行此操作，则必须使用 a`void *`来保存指针，或者（不太常见）`union`包含每种类型的指针的类型。无论哪种方式，您都需要维护状态信息，让程序知道已经进行了哪种分配。 **通常，想要这样做表明设计不佳**，因为每次访问都需要打开此状态信息。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-19T06:58:11.033

如果我正确理解您的意图，您正在尝试做的是：根据某些逻辑分配内存来存储*n 个*元素，`int`然后`char`在您的函数中**访问**该数组，无论`int`是否`char`需要单个`if`语句。

如果上面的理解是正确的，那么简单的答案就是：“C++ 是一种强类型语言，你想要的东西是不可能的”。

但是... C++ 也是一种极其强大和灵活的语言，所以可以这样做：

**铸造**。类似于以下内容：

```
void * Array;
if(flag1) Array = new int[len]
else Array = new char[len];
// ... later in the function
if(flag) // access as int array
  int i = ((int*)Array)[0]; 
```

是的，这很丑陋，你必须`if`在函数周围撒上那些 s。所以这里有一个替代方案：**模板**

```
template<class T> T foo(size_t _len)
{
  T* Array = new T[_len];
  T element = Array[0];
  return element;
} 
```

另一种更晦涩的做事方式可能是使用`union`s：

```
union int_or_char {int i; char c;};
int_or_char *Array = new int_or_char[len];
if(flag) // access as int
  int element = Array[0].i; 
```

但是一种或另一种方式（或第三种方式）无法绕过**编译器**必须知道如何处理您尝试使用的数据的事实。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-19T06:49:08.000

Turix 的回答是正确的。您需要记住，这里分配了两件事，数组的内存和存储数组位置时的内存。

因此，即使数组中的内存是从堆中分配的，并且可以在任何需要的地方用于代码，但存储数组位置的内存（数组变量）在堆栈中分配，并且会尽快丢失因为它超出了范围。在这种情况下，当 if 块结束时。你甚至不能在同一个 if 的 else 部分使用它。

我会给出的另一个来自 Andrew 的不同代码建议是：

```
void *Array = nullptr;

if (flag == 1) {
    Array = new int[input.length()];
} else if (flag == 2) {
    Array = new char[input.length()];
} 
```

然后你可以按照你的意图直接使用 if 。

~~这部分我不确定：如果您想知道它是 int 还是 char，您可以使用[**typeid**](http://en.wikipedia.org/wiki/Typeid)文字。~~不工作，至少我不能让它工作。

或者，您可以使用标志变量来猜测它是什么类型。

# blackberry - 黑莓备用入口点 - 从后台应用程序启动应用程序（点击推送消息）

> ID：11555165
> 
> 赞同：2
> 
> 时间：2012-07-19T06:35:00.630
> 
> 标签：blackberry, push-notification

我想从后台应用程序打开我的 UI 应用程序。它是如何完成的？

```
public static void main(String[] args) {
   if (args.length > 0 && args[0].equals("MYAPP") ){
      theApp = new App();
      theApp.enterEventDispatcher();  ///this  is my ui class
   }
   else {
      BackgroundApplication app = new BackgroundApplication();
      app.setupBackgroundApplication();
      app.enterEventDispatcher();  ///this is a background application listen for push notifications
   }
} 
```

当我收到推送通知时，`BackgroundApplication`应该会弹出一个警报。当我单击弹出窗口时，我希望它打开 UI 屏幕。这是怎么做到的？我试过这个：

```
int modHandle = CodeModuleManager.getModuleHandle("MYAPP");
     ApplicationDescriptor[] apDes = CodeModuleManager.getApplicationDescriptors(modHandle);
     try {
        ApplicationManager.getApplicationManager().runApplication(apDes[0]);
     } catch (ApplicationManagerException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
     } 
```

但它没有打开用户界面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T08:36:12.960

您应该将参数“MYAPP”传递给正在运行应用程序的代码：

```
ApplicationDescriptor[] appDescriptors =
CodeModuleManager.getApplicationDescriptors(
        CodeModuleManager.getModuleHandle("MYAPP"));//.Cod file name
ApplicationDescriptor appDescriptor = new ApplicationDescriptor(
appDescriptors[0], new String[] {"MYAPP"});
ApplicationManager.getApplicationManager().runApplication(appDescriptor); 
```

[在这里](http://www.blackberry.com/knowledgecenterpublic/livelink.exe/fetch/2000/348583/800332/800620/How_To_-_Launch_a_third-party_application_from_another_third-party_application.html?nodeid=1094023&vernum=0)阅读更多

# javascript - 如何在java脚本中实现hash map？

> ID：11555167
> 
> 赞同：0
> 
> 时间：2012-07-19T06:35:07.883
> 
> 标签：javascript, data-structures

我正在尝试使用类似于 javascript 中的 java 的键值对来实现简单的哈希映射。我想映射索引和相应的页码，索引作为键，页码作为值。

例如 --> index - 1 , pagenumber-10

如何在java脚本中实现这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T06:38:04.430

您可以使用 javascript 对象，您可以在其中拥有键值参数，例如：x = { index : 1, pagenumber : 10 }

您可以在对象内部包含对象，例如：

```
x = { a : { index : 1, pagenumber : 10}, b : { chapter : 1, pagenumber : 20 } } 
```

你可以像下面这样访问它：

```
 x.a.index which gives you 1
   x.a.pagenumber which gives you 10 
```

# ruby-on-rails - Rails：routes.rb 中的“匹配”功能转义 url 中的斜杠

> ID：11555168
> 
> 赞同：0
> 
> 时间：2012-07-19T06:35:15.407
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2, rails-routing

我是 ruby​​ 和 rails 的新手。在 routes.rb 中，我添加了以下行：

```
match 'check/' => "home#index" 
```

当我使用在端口 3000 上运行的服务器点击 url 时：

```
localhost:3000/check/ 
```

它工作正常，但如果我给 url

```
localhost:3000/////////////////check//////////////////// 
```

它也可以正常工作，但情况并非如此。带网址

```
localhost:3000/////////////check////d////// 
```

它说

> 没有路线匹配 [GET] "/check/d"

这意味着它正在转义斜线，为什么会发生这种情况以及如何解决它。还可以帮助我了解我们是否可以在 Rails 上使用常规表达式制作 url。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T06:49:48.007

关于路由中的正则表达式：

```
match '/:id' => 'posts#show', :constraints => {:id => /^\d/} 
```

将对 id 施加限制，使其只能是数字。

# android - 在 android videoview 上播放 RTMP 视频流

> ID：11555172
> 
> 赞同：0
> 
> 时间：2012-07-19T06:35:39.927
> 
> 标签：android

我只想在android videoview或android default player.ex中播放rtmp视频流“rtmp://cp67126.edgefcs.net/ondemand/mediapm/osmf/content/test/akamai_10_year_f8_512K”。我该怎么做？例子很多更好的..

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T06:47:22.947

请看看这个人做的Mplayer

[https://github.com/ajeet17181/mplayer-android](https://github.com/ajeet17181/mplayer-android)

他也支持RTMP

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T06:59:47.307

jwplayer 支持 rtmp。访问

[http://www.longtailvideo.com/blog/24717/jw-player-59-html5-now-default-on-android](http://www.longtailvideo.com/blog/24717/jw-player-59-html5-now-default-on-android)

它现在默认为 android。

# android - 如何在android项目中更改SDK版本

> ID：11555175
> 
> 赞同：1
> 
> 时间：2012-07-19T06:35:54.653
> 
> 标签：android

我已经开发了一个具有 Android 版本 4.0.4 和 API 级别 15 的 android 应用程序。但我无法在任何 android 手机中测试该应用程序。所以我想缩小SDK版本。我应该怎么做？请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T06:42:08.103

检查下面的图片它可能会帮助你。

![在此处输入图像描述](../Images/d784f8d6b0abb43c33b1a2ebf4fed807.png)

![在此处输入图像描述](../Images/88cd6ce76b914bbbf0f133be32303403.png)

选择 SDK 版本 按 OK。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T06:37:24.137

如果您查看 AndroidManifest.xml 文件的源代码，那么您应该会看到可以更改的最小 SDK 值。

例如：

```
 <uses-sdk
        android:maxSdkVersion="16"
        android:minSdkVersion="7" /> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-19T06:40:36.497

在清单文件中只写

```
<uses-sdk android:minSdkVersion="4" /> 
```

或者

右键单击您的项目并转到属性

点击安卓标签

![在此处输入图像描述](../Images/29285a3ca4056a32e492460a1450a94c.png)

从这里您可以更改 SDK 版本

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T06:40:48.103

添加

```
<uses-sdk android:minSdkVersion="4" /> 
```

到您的清单，因此您可以在 Android 手机 1.6 及更高版本中运行。请注意，如果您使用一些需要 api > 您的手机 api 级别的代码，您将强制关闭。

# javascript - 将数组中的每个值附加到它的等效 html-node

> ID：11555176
> 
> 赞同：0
> 
> 时间：2012-07-19T06:35:56.637
> 
> 标签：javascript, jquery, mustache

我有一个对象数组：

```
comment: "https://www.facebook.com/groups/2388163605/permalink/10151045693478606/"
comments: Array[1]
created: "48 minuter sen"
img: "http://graph.facebook.com/589136752/picture"
link: "http://www.facebook.com/589136752"
message: "gbg - sthlm 31/7\. finnes: 3 platser. 0703 05 45 65"
name: "Jack Johansson"
sortvar: 1342676288 
```

使用这个数组和胡子。我生成了一个 html 列表元素列表。但是我不使用“名称”变量。它在那里用于调试功能。运行调试时，我想将名称变量添加/附加到其等效列表节点的开头。这样做的好方法是什么？我宁愿不在 mustache 中创建新模板。

我相信解决方案类似于：

```
foreach(item in array){
  $(li).append('<p>'+item.name+'</p>');
} 
```

但这将添加 item.name 所有列表项。我想将第一个 item.name 添加到第一个列表项，将第二个 item.name 添加到第二个等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T06:56:40.270

小胡子看不懂

如果您只想在调试某些逻辑时将 Name 属性添加到 Js 对象，

```
var x={
comment: "https://www.facebook.com/groups/2388163605/permalink/10151045693478606/",
comments: Array[1],
created: "48 minuter sen",
img: "http://graph.facebook.com/589136752/picture",
link: "http://www.facebook.com/589136752",
message: "gbg - sthlm 31/7\. finnes: 3 platser. 0703 05 45 65",
sortvar: 1342676288
};

if(debug)x.name="Jack Johansson"; 
```

可以使用，我完全不知道小胡子。

你想要类似的东西：

```
var index = 0;
foreach(item in array){
  $("#mainslector li").eq(index++).append('<p>'+item.name+'</p>');
} 
```

刚刚看到你的更新，仍然不确定你想要什么，这只是演示为第 n 个元素选择 nth li。

# android - Android GCM：更多应用程序的相同发件人ID

> ID：11555180
> 
> 赞同：43
> 
> 时间：2012-07-19T06:36:05.483
> 
> 标签：android, google-cloud-messaging

是否可以将相同的发件人 ID 用于更多应用程序？现在我有 18 个使用相同后端的应用程序（不同的语言和一些功能）。现在我正在使用 GCM 实现推送通知。但是后端团队更喜欢只有一个谷歌项目——所有应用程序的 SENDER ID。有人试过吗？这种情况可能吗？有什么缺点？

谢谢

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2012-07-20T21:30:05.580

非常欢迎（并鼓励）开发人员为他们的所有应用程序使用相同的发件人 ID/API 密钥。

当您发送消息时，您指定一个注册 ID，该 ID 隐式链接到生成它的应用程序和设备的包名称。只有请求注册 ID 的应用才会收到您的消息。

*资料来源：我是谷歌 Android 团队的成员。*

# javascript - AngularJS - 基于 URL 更新模型

> ID：11555181
> 
> 赞同：11
> 
> 时间：2012-07-19T06:36:11.957
> 
> 标签：javascript, angularjs

这基本上是这个问题的后续问题：[AngularJS - How to use $routeParams in generate the templateUrl?](https://stackoverflow.com/questions/11534710/angularjs-how-to-use-routeparams-in-generating-the-templateurl) . 有关此问题的正确上下文，请参见我的代码。

所有导航部分都运行良好，但是现在当我导航时，我想`$scope`根据`primaryNav`and更新我的一些属性`secondaryNav`。我以为我可以做点什么，`$watch`但我似乎什么也做不了。以下是我尝试过的几件事：

```
$scope.$watch($location.path(), function() {...}); //result in js error
$scope.$watch($location, function() {...}); //function runs once on page load, but not after that
$scope.$watch($window.location, function() {...}); //function runs once on page load, but not after that
$scope.$watch(window.location, function() {...}); //function runs once on page load, but not after that
$scope.$watch(window.location.href, function() {...}); //results in js error 
```

我可能会在我的控制器中创建一些方法来获取这些导航并更新所有内容并导航，然后将 a 添加`ng-click`到所有锚标记中。然而，我真正喜欢 AngularJS 的一件事是为 href 使用真正的 URL 外观值（例如`<a href="#/priNav/secNav">Foo</a>`）。当我在不通过控制器上的某些方法的情况下进行路由时，是否无法根据不断变化的 URL 更新我的模型？我希望我的要求是有道理的。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-07-19T15:54:21.627

```
 $scope.$watch(function() {
    return $location.path();
 }, function(){
    ...
 }); 
```

您应该传递一个可以在范围内评估的函数或字符串

# php - 在客户端/浏览器端存储照片（不是照片的链接）

> ID：11555182
> 
> 赞同：0
> 
> 时间：2012-07-19T06:36:15.343
> 
> 标签：php, javascript, browser, client-side

任何人都知道在客户端/浏览器端存储由 php 检索到的照片（不是照片的链接）以进行进一步照片编辑的任何方法或教程？谢谢。

编辑：实际上，我正在尝试创建进行照片编辑的 Facebook 应用程序。我已经检索了 facebook 照片，我想让用户在他们决定保存并将编辑后的照片上传回 facebook 之前多次编辑照片。在用户编辑时，我需要一种方法在用户决定保存之前将原始照片和编辑后的照片存储在某个地方。我不想在每次用户更改某些内容时将编辑后的照片保存在服务器存储中，因为这对服务器来说可能很重。因此，我希望将原始照片和编辑后的照片存储在服务器存储之外的某个地方。可能吗？我正在使用 php gd 并且对网络编程很陌生。

请帮忙。多谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T06:43:58.590

您可能正在寻找一种强制下载文件而不是显示文件的方法。

在发送照片二进制文件之前尝试使用它：

```
$datei = 'filename.jpg';

header("Expires: 0"); 
header("Cache-Control: must-revalidate, post-check=0, pre-check=0"); 
header("Content-Type: application/force-download"); 
header("Content-Description: File Transfer"); 
header("Content-Disposition: attachment; filename=$datei"); 
header("Content-Transfer-Encoding: binary"); 

//Output image here (for example by using imagepng() when using gd) 
```

编辑：您不能将图像保存到用户的浏览器，然后使用您的服务器应用程序轻松检索它。您需要将其存储在服务器上。如果您的服务器空间有限，您可能需要研究像 Amazon S3 这样的云托管服务，您可以在其中以少量成本放置几乎无限的图像，前提是您事后删除它们并破坏空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T07:21:40.080

检查此链接[http://developer.yahoo.com/performance/rules.html#expires](http://developer.yahoo.com/performance/rules.html#expires)

您可以使用 .htaccess 文件执行此操作。代码应该是这样的，

```
<filesMatch "\.(ico|pdf|flv|jpg|jpeg|png|gif|js|css|swf)$">
    ExpiresActive On
    ExpiresDefault A259200000
    Header set Expires "Thu, 15 Apr 2013 20:00:00 GMT"
</filesMatch> 
```

欲了解更多信息[http://www.askapache.com/htaccess/using-http-headers-with-htaccess.html](http://www.askapache.com/htaccess/using-http-headers-with-htaccess.html)

# jquery - 简化动态 jquery 选择器

> ID：11555184
> 
> 赞同：1
> 
> 时间：2012-07-19T06:36:19.147
> 
> 标签：jquery

给定下表

```
<table id="t1" border="1">
  <thead><tr><th>A</th><th>B</th><th>C</th></tr></thead>
  <tfoot><tr><td>0</td><td>1</td><td>2</td></tr></tfoot>
<tbody>
  <tr><td>3</td><td>4</td><td>5</td></tr>
  <tr><td>6</td><td>7</td><td>8</td></tr>
  <tr><td>9</td><td>10</td><td>11</td></tr>
  <tr><td>12</td><td>13</td><td>14</td></tr>
  <tr><td>15</td><td>16</td><td>17</td></tr>
</tbody>
</table> 
```

我只想选择第一列和第三列`<tbody>`。请注意，对于一个巨大的表，多列的选择可能会有所不同。以下表达式在此示例中返回正确的选择。

```
var a = $('#t1 tbody tr td:nth-child(1), #t1 tbody tr td:nth-child(3)') 
```

但

```
var b = $('#t1 tbody tr td:nth-child(1), td:nth-child(3)') 
```

`b`将返回选择包括`<tfoot>`。更重要的`b`是，缺少第一个元素？！

`var a`对于 X 列的选择，最简单的方法是什么。例如：

```
Select columns [1,4,5,6,7,8,9] 
```

[http://jsfiddle.net/kkgian/4kdNt/2/](http://jsfiddle.net/kkgian/4kdNt/2/)

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T06:44:43.403

对于在同一行中选择多列：

```
$('#t1 tbody tr').find("td:nth-child(1), td:nth-child(3)"); 
```

对于以规则间隔选择列：

```
$('#t1 tbody tr td:nth-child(3n)'); //should get column 3, 6, 9, ... 
```

作为推论，要让所有其他元素从 1 开始（在您的情况下为 1 和 3）：

```
$('#t1 tbody tr td:nth-child(2n+1)'); //should get column 1, 3, 5, ... 
```

用于选择列 [1,4,5,6,7,8,9]：

```
var cols = [1,4,5,6,7,8,9];
$('#t1 tbody tr td').filter(function(idx) {
    return $.inArray(idx+1, cols)!=-1;
}); 
```

[`.filter()`](http://api.jquery.com/filter/)是一种将匹配元素集减少为您想要使用的元素的方法——在本例中为数组中指定的列索引。包含表达式返回的任何值`true`。**注意：**在`.filter()`idx 内是从 0 开始的，所以如果您的数组中的值是从 1 开始的，则添加 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T07:16:09.523

```
var arr = [1, 4, 5, 6, 7, 8, 9],
    rows = $('#t1 tbody tr'),
    tds = $('td', rows).map(function() {
        if ( $.inArray($(this).index(), arr) >= 0)
            return this;
    }); 
```

**[演示](http://jsfiddle.net/4kdNt/7/)**

# excel - 将 0 附加到 Excel 工作表中的单元格编号

> ID：11555198
> 
> 赞同：0
> 
> 时间：2012-07-19T06:37:41.427
> 
> 标签：excel, excel

> **可能重复：**
> [Excel 在公式栏中显示前导零](https://stackoverflow.com/questions/9644789/excel-show-leading-zero-in-formula-bar)

我正在使用[excel](/questions/tagged/excel "显示标记为“excel”的问题")表进行自动化。每当我在 Excel 工作表的单元格中写入数字`0428537`时，它都会变为`428537`.

在不截断前导零的情况下如何避免？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T06:40:28.833

如果是出于演示目的，您可以将该单元格的格式更改为自定义格式`0000000`。

如果您希望单元格的实际内容为 0428537，那么它不能是数字，您需要将单元格的格式更改为文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T06:40:33.687

您可以输入一个带有 0 的数字，例如

```
'0123 
```

以单引号 (') 开头的数字，但现在它将视为文本而不是数字

# php - 添加 GIT 时所有文件上出现 500 内部服务器错误 < 当我尝试执行一些 GIT 命令时（我仍然是 GIT 的新手），我注意到我所有的文件都< <head----在其中。现在，我做了什么来删除它们，我手动转到所有文件以删除它们<<head 0="" 1="" 2="" 4="" 7="" 8="" 64="" 500="" 1090="" ----="" 现在发生的情况是，即使我删除了这些<<head="" ---，我现在也收到="" 内部服务="" 问问题="" 2012-07-19t06:37:50.850="" 次="" this="" question="" shows="" research="" effort;="" it="" is="" useful="" and="" clear="" does="" not="" show="" any="" unclear="" or="" bookmark="" question.="" activity="" on="" post.="" 当我尝试执行一些="" git="" 命令时（我仍然是="" 的新手），我注意到我所有的文件都<<head----在其中。现在，我做了什么来删除它们，我手动转到所有文件以删除它们<<head="" 内部服务器错误。当我检查我的="" apache="" 错误日志时，它表明我有这种错误：premature="" end="" of="" script="" headers:="" 我也在检查我的="" .htaccess="" 文件，但里面似乎没有问题，因为我已经删除了<<head---由="" 生成的文件="" 我有一种感觉，也许="" 也将一些附加<<head---到非常重要的文件中，例如="" cgi="" 和其他文件。不过这只是一种感觉。="" 我真的不知道那是什么。="" 请指导我这个。您的帮助将不胜感激和奖励！="" 谢谢！="" 在="" module.xcconfig="" 中，尝试将="" other_ldflags="$(inherited)" -framework="" eventkit="" 因为当你运行应用程序时，模块正在使用的框架应该放在这个文件中other_ldflags="" phpgitapache="" 回答="" answer="" 我通过将所有文件夹的权限更改为="" 解决了这个问题755，我还意识到在制作="" index.php="" 时777，它会使您的网站出现内部服务器错误。="" 天哪！文件夹权限！="" 于="" 2012-07-19t07:52:27.220="" related="" triggers="" -="" 火鸟，锁内触发器="" delphi="" 使用="" 嵌入式="" chromium="" (cef1)="" 读取="" cookie="" 的访问冲突="" android="" 将2张不同大小的位图叠加成屏幕大小的一张="" php="" windows="" professional="" 位上的="" 的="" imagemagick？="" python="" 技能点菜单不起作用="" windows-8="" 从="" 应用商店应用程序="" (winrt)="" 访问智能卡="" javascript="" usb="" 运行="" webapps="" 大方形="" wordpress="" 帖子缩略图="" 防止网站上的错误消息="" 如何获取函数的名称和="" 或给定指针的描述="" reference="" php × 1429865="" c="" c++ × 756500="" nginx × 49975="" mongodb × 159057="" mybatis × 3233="" anaconda × 13410="" pycharm × 14671="" python × 1902243="" vscode × 56040="" docker × 110988="" github × 49000="" flask × 49129="" ffmpeg × 24037="" jmeter × 16910="" matplotlib × 63493="" bootstrap × 54641<="" h1="">> ID：11555200
> 
> 赞同：1
> 
> 时间：
> 
> 标签：php, git, apache

当我尝试执行一些 GIT 命令时（我仍然是 GIT 的新手），我注意到我所有的文件都`<<HEAD----`在其中。现在，我做了什么来删除它们，我手动转到所有文件以删除它们`<<HEAD ----`

现在发生的情况是，即使我删除了这些`<<HEAD ---`，我现在也收到 500 内部服务器错误。当我检查我的 apache 错误日志时，它表明我有这种错误：`premature end of script headers:`

我也在检查我的 .htaccess 文件，但里面似乎没有问题，因为我已经删除了`<<HEAD---`由 GIT 生成的文件

我有一种感觉，也许 GIT 也将一些附加`<<HEAD---`到非常重要的文件中，例如 CGI 和其他文件。不过这只是一种感觉。

我真的不知道那是什么。

请指导我这个。您的帮助将不胜感激和奖励！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T07:52:27.220

我通过将所有文件夹的权限更改为 解决了这个问题`755`，我还意识到在制作 index.php 时`777`，它会使您的网站出现内部服务器错误。

天哪！文件夹权限！</head----在其中。现在，我做了什么来删除它们，我手动转到所有文件以删除它们<<head>

# iphone - 找出 iOS 中特定文件的数据保护等级

> ID：11555202
> 
> 赞同：2
> 
> 时间：2012-07-19T06:38:03.110
> 
> 标签：iphone, class, backup, extract, data-protection

我目前正在尝试找出特定应用程序使用了哪个数据保护类别。

我的第一种方法是使用未加密的 iTunes 备份来确定使用的保护等级。我用[它](http://code.google.com/p/iphone-dataprotection/)来提取备份。但现在我要卡住了。

此外，我不太确定 iTunes 备份文件中是否提供保护等级信息。考虑到 Apple 可以从此备份恢复 iPhone/iPad，我认为这些信息必须可用。否则操作系统在恢复后将不知道如何保护特定文件。

那么有人对此有想法或暗示吗？有什么经验吗？我更喜欢使用备份文件而不是解析设备文件系统的解决方案。此外，在不越狱设备的情况下实现这一点会很棒。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T07:49:38.167

[在这个](https://stackoverflow.com/questions/15245001/how-does-ios-data-protection-work/15545252)问题中提到了[https://github.com/ciso/ios-dataprotection 。](https://github.com/ciso/ios-dataprotection)好像会很合适

# http - HTTP 到 HTTPS 自签名证书

> ID：11555204
> 
> 赞同：1
> 
> 时间：2012-07-19T06:38:04.907
> 
> 标签：http, redirect, ssl, iis-7, https

我想为自己建立一个小型网站，主要为我的手机公开近乎只读的内容。

首先，我使用来自 no-ip 的动态 DNS 服务，生成一个映射到我的 ip 的简单主机（即 http simplesite.serverhttp.com）。

我想问我是否可以使用自签名证书在 IIS7 中设置一个 HTTPS 站点，当我转到我的普通 http 站点时，只需重定向到 HTTPS 站点。HTTPS 站点将使用 ASP.Net 会员系统。

流程大致如下： http simplesite.servehttp.com 重定向到通过自签名证书绑定的 https securesite.com。

这可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T19:49:30.857

这是可以做到的，是的。在 IIS 中，您可以使用 URL 重写功能将人们重定向到 HTTPS。您可能想要的一些模式...

使用：正则表达式

图案： （。*）

条件：添加

-- 输入：{HTTP_PROTOCOL}

-- 检查输入字符串：不匹配

-- 模式：HTTPS

重定向网址 = {R:0}

这并不完整，但它应该给你一个运行的开始。

# php - Doctrine Query Builder 使用数组

> ID：11555207
> 
> 赞同：5
> 
> 时间：2012-07-19T06:38:34.100
> 
> 标签：php, orm, doctrine, doctrine-orm

我有一个 id 数组：

```
Id_array; //array(2) { [0]=> int(9) [1]=> int(10) } 
```

我只是想使用 Id_array 选择用户；当我没有数组而只有一个整数时，我设法做到了这一点：

```
$query = $em->createQuery('SELECT u FROM Users u WHERE u.id = ?1');
$query->setParameter(1, 9); // I tested the value 9 here
$users = $query->getResult(); 
```

如何获取与 Id_array 对应的所有用户？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-19T16:47:58.770

或者没有查询生成器：

```
$query = $em->createQuery('SELECT u FROM Users u WHERE u.id IN (:id)');
$query->setParameter('id', array(1, 9));
$users = $query->getResult(); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-19T07:14:22.247

如果有人遇到类似的情况，我使用了查询生成器，关键是使用 IN 语句。

```
//...
$qb = $this->createQueryBuilder('u');
$qb->add('where', $qb->expr()->in('u.id', ':my_array'))
->setParameter('my_array', $Id_array); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-10-24T22:05:39.410

从 2.1 或 2.2 开始，存储库现在实施了关于学说 2

```
findBy(array('id' => array(1, 2, 3, 4, 5)); 
```

# php - Ajax 多次发送数据

> ID：11555215
> 
> 赞同：1
> 
> 时间：2012-07-19T06:39:02.837
> 
> 标签：php, jquery, ajax, voting

我为用户的帖子制作了一个简单的 Ajax 投票脚本：+ 1 和 -1。一切正常，但有时由于某种原因一键发送数据 +3、+6、-2 等。我制作了 Chrome 开发人员工具的屏幕截图。可见，一键多次调用PHP脚本。dot.gif - 发送数据时的热闹动画。![在此处输入图像描述](../Images/e3f914cbcf27d76ebe0a3e09b3a60fd2.png)

```
<script type="text/javascript" src="raitings/jquery.js"></script>
<script type="text/javascript">$(function() {$(".vote").click(function() {

var id = $(this).attr("id");
var name = $(this).attr("name");
var dataString = 'id='+ id ;
var parent = $(this);

if(name=='down')
{
$(this).fadeIn(200).html('<img src="raitings/dot.gif" align="absmiddle">');
$.ajax({type: "POST", url: "raitings/down_vote.php", data: dataString, dataType : "html", cache: false, success: function(html)
   { parent.html(html);}
 });
}
else
{
$(this).fadeIn(200).html('<img src="raitings/dot.gif" align="absmiddle">');
$.ajax({type: "POST", url: "raitings/up_vote.php", data: dataString, dataType : "html", cache: false, success: function(html)
   { parent.html(html);
  }  });
}
return false;
    });
});
</script>

<?php
echo "<div class=\"box1\"><div class=\"up\"><a href=\"#\" class=\"vote\" title=\"+ 1\" alt=\"+ 1\" id=".$row["id"]." name=\"up\">".$up."</a></div>"
."<div class=\"down\"><a href=\"#\" class=\"vote\" title=\"- 1\" alt=\"- 1\"  id=".$row["id"]." name=\"down\">".$down."</a></div></div>\n"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:34:29.213

当用户投票后，您应该禁用您的控件。所以只需添加一些阻塞标志（变量、cookie 等）：

```
$(function() {
var isUserVoted = false;
$(".vote").click(function() {
   if (isUserVoted) {
       return false;
   }

   isUserVoted = true;
   var id = $(this).attr("id");
   var name = $(this).attr("name");
   var dataString = 'id='+ id ;
   var parent = $(this);

   if(name=='down') {
      $(this).fadeIn(200).html('<img src="raitings/dot.gif" align="absmiddle">');
      $.ajax({type: "POST", url: "raitings/down_vote.php", data: dataString, dataType : "html", cache: false, success: function(html)
   { parent.html(html);}
      });
   } else {
      $(this).fadeIn(200).html('<img src="raitings/dot.gif" align="absmiddle">');
      $.ajax({type: "POST", url: "raitings/up_vote.php", data: dataString, dataType : "html", cache: false, success: function(html) { parent.html(html);
  }  });
   }
   return false;
});
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-19T08:42:47.013

而是在 jquery 点击事件上尝试写 onclick="function_name();" 对于一个href..

例如...

# jdbc - 数据库支持乐观并发

> ID：11555217
> 
> 赞同：2
> 
> 时间：2012-07-19T06:39:05.723
> 
> 标签：jdbc, optimistic-concurrency

我有一个经典场景：基于该记录中先前准备好的值对同一记录进行两次更新。我在乐观并发的假设下工作。我自己实现条件更新并不难——问题是我是否可以依赖驱动程序或数据库中的某个 API 来为我处理它？

自然地，我用谷歌搜索了它，但我似乎想出的只是对什么是乐观并发的解释，而没有提及代码示例......

我正在使用 JDBC 数据直接驱动程序。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T08:40:39.857

不，JDBC 不支持乐观并发。乐观并发由 JPA 处理，方法是使用表的专用`version`列，并在每次进行更新时递增版本值。更新查询如下所示：

```
update foo set ..., version = version + 1 
where id = :theId and version = :theVersionLoadedInMemory 
```

如果`executeUpdate()`返回 0 而不是 1，则表示其他人删除了记录，或更新了记录，从而增加了版本。

# javascript - 当我们使用 Jquery/Javascript 单击下一个和上一个按钮时动态添加图像

> ID：11555221
> 
> 赞同：2
> 
> 时间：2012-07-19T06:39:29.817
> 
> 标签：javascript, jquery, html

最初显示 4 个缩略图，

我想将下一个和上一个按钮添加到缩略图容器，即 div 拇指。我想为它编写功能。

谁能帮帮我。

**HTML**

```
<div id="gallery">
    <div id="overlay"></div>
    <div class="slidePanel">
        <div id="panel">
            <img id="largeImage" src="" />
        </div>
        <div class="slideBtn">
            <a href="#" id="next">

    <img src="images/left_arrow.png" /></a>
            <a href="#" id="prev"><img src="images/right_arrow.png" /></a>
        </div>
        <div id="close">
            <a href="#">Close</a>
        </div>
    </div>
    <div id="thumbs" align="center">
        <img src="images/image_01_thumb.jpg" alt="1st image description" />
        <img src="images/image_02_thumb.jpg" alt="2nd image description" />
        <img src="images/image_03_thumb.jpg" alt="3rd image description" />
        <img src="images/image_04_thumb.jpg" alt="4th image description" />
    </div>

</div> 
```

**JS**

```
$(document).ready(function () {
    function loadSlide(nSlide) {
        $('#thumbs img.current').removeClass('current');
        $(nSlide).addClass('current');
        var src = $(nSlide).attr('src').replace('thumb', 'large');
        $("#largeImage").fadeOut(function () {
            this.src = src;
            $(this).fadeIn();
        }).center();
        $("#overlay").css({
            "opacity": "0.7"
        }).fadeIn("slow");
        $('#close a, #close').fadeIn();
        $('#prev, #next').css('display', 'block');
    }
    $('#next').click(function () {
        var cSlide = $('#thumbs img.current');
        if ($(cSlide).next('img').length > 0) var nSlide = $(cSlide).next('img');
        else var nSlide = $('#thumbs img:first');
        loadSlide(nSlide);
    });
    $('#prev').click(function () {
        var cSlide = $('#thumbs img.current');
        if ($(cSlide).prev('img').length > 0) var nSlide = $(cSlide).prev('img');
        else var nSlide = $('#thumbs img:last');
        loadSlide(nSlide);
    });
    $('#thumbs img').click(function () {
        loadSlide(this);
    });
    $("#panel").click(function () {
        $(this).fadeOut("slow");
        $("#overlay").fadeOut("slow");
    });
    $('#close a').click(function () {
        $(this).fadeOut('slow');
        $('#overlay, #panel, #prev, #next, #largeImage').fadeOut('slow');
        $("#thumbs").css('display', 'block');
    });
    $('#thumbs img').click(function () {
        $("#thumbs").css('display', 'none');
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T11:25:29.507

这是我曾经用来实现自己的图库的一些*相关代码*

```
function setImage(index){
   var thumbRight = $('.thumb'+(index+1));
   var thumbLeft = $('.thumb'+(index-1));

   var img = $('.img' + index);
   //set images and thumbs accordingly
}

$('.container').on('click', '.thumbTrigger', function(){
   var direction = $(this).is('.thumbRight') ? 1 : -1;
   var currIndex = //get index of current image in the list of images
   setImage(currIndex + direction);
}); 
```

# java - EJB 远程方法中的序列化 UID 不匹配 - java.util.date & DBTimestamp

> ID：11555224
> 
> 赞同：5
> 
> 时间：2012-07-19T06:39:39.833
> 
> 标签：java, serialization, db2, websphere, ejb-3.0

我有一个部署在两个 EAR 中的 java Web 应用程序——一个用于 UI 层（包含一个 WAR 模块），一个用于业务层（包含一个 EJB 模块）。两个层都部署到 WebSphere Application Server 7。这些层通过 EJB 3.0 无状态会话 bean 连接。通过 JNDI 查找 bean。

我们使用 Hibernate 来实现持久性，并使用 DB2 数据库。

返回远程 EJB 调用时，客户端出现以下错误：

```
java.rmi.MarshalException: CORBA MARSHAL 0x4942f896 No; nested exception is: 
    org.omg.CORBA.MARSHAL: Unable to read value from underlying bridge : Mismatched serialization UIDs : Source (RepId RMI:java.util.Date:AC117E28FE36587A:686A81014B597419) = 686A81014B597419 whereas Target (RepId RMI:com.ibm.db2.jcc.DBTimestamp:AA774DBE96ECCE99:7AFCE1FB570D419C) = 7AFCE1FB570D419C  vmcid: IBM  minor code: 896  completed: No 
```

对象上的字段`java.util.Date`作为`com.ibm.db2.jcc.DBTimestamp`字段从 Hibernate 返回，它 extends `java.sql.Timestamp`which extends `java.util.Date`。因为它是一个子类`java.util.Date`并且是可序列化的，所以不应该处理吗？

我与一位更有经验的人交谈过，他说可能的原因是`DBTimestamp`Web 和业务层 WAS 服务器之间的 JVM 版本或类版本不同。两台服务器都具有相同的 JVM、WAS 和 JAR 版本。

我还有一个本地 WAS 7 服务器，其中两个层都部署到同一台服务器上。EJB 仍然通过对 localhost 的 JNDI 调用远程解析。该应用程序在我的本地服务器上运行良好。我知道的唯一区别是不同的微版本 WAS，以及将两个层部署到同一台服务器。

问题的原因是什么？是`DBTimestamp`在网络层找不到该类，还是该类的版本不同？或者它是多态性的问题，还是完全其他的问题？

除了答案之外，我也很感激有关尝试什么调试的任何建议-我没有想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T22:50:08.243

通过将相关的 DB2 驱动程序 JAR 打包到 Web 层 EAR 中，我设法“解决”了这个问题。

因此，问题的原因是该类在 Web 层的类路径上不可用。我需要调查环境的设置以找出它不可用的原因，但至少现在问题很清楚了。

# javascript - 检查选择值之间的值没有给出正确的结果

> ID：11555225
> 
> 赞同：0
> 
> 时间：2012-07-19T06:39:40.850
> 
> 标签：javascript, if-statement

我正在尝试比较许多选择值的值，并在它们与我在代码中尝试的相同时交换它们，

```
function OnChangeSelection(selection,selectid)
{
    var count=1;
    for(var j=5;j<=14;j++)
    {
        var c_id= "Numbering"+count;
        if (document.getElementById(selectid).value == document.getElementById(c_id).value) 
        {
            alert(c_id);
        }
        count++
    }
} 
```

在这段代码中，我得到 perametera “选择是在选择时更改的值”，“selectid”是选择标签的 id”，所以我想在循环中比较它，因为我有 10 个选择并通过它的 id 匹配它，我会生成通过 conacating Numbering+count 并且当它与另一个选择值匹配时，它会打印该选择 id，但问题是它正在打印另一个选择的 id 以及我正在比较它的选择的 id。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T07:12:19.853

我认为您在某个时候将您的元素与自身进行比较。设置一些条件来跳过自我比较：

```
function OnChangeSelection(selection,selectid)
{
    var count=1;
    for(var j=5;j<=14;j++)
    {
        var c_id= "Numbering"+count;
        if (c_id == selectid) {count++;continue;}
        if (document.getElementById(selectid).value == document.getElementById(c_id).value) 
        {
            alert(c_id);
        }
        count++
    }
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-19T07:03:16.400

您将获得元素 selectid 的 ID，因为在您对所有选择的迭代中，您将其与自身进行比较。错误打印的另一个选择的值是多少？尝试将 == 更改为 === 从而避免隐式转换。

# regex - Sed：如何将反向引用转换为变量名？

> ID：11555237
> 
> 赞同：2
> 
> 时间：2012-07-19T06:40:29.173
> 
> 标签：regex, sed

你知道我如何在 sed 中使用反向引用作为变量名吗？

我尝试了什么：

```
#!/bin/bash
var_one=x
var_two=y
var_three=z
echo "var_one + var_two = var_three" | sed -e "s/\(var_[^\ ]*\)/$\1/g" 
```

我得到了什么：

```
$var_one + $var_two = $var_three 
```

我想得到什么：

```
x + y = z 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T06:50:28.187

### 用 Eval 展开变量

目前尚不清楚您真正想要做什么，但如果您只想在字符串中*创建*一些变量，然后评估字符串以扩展变量，那么您想使用*eval*。例如：

```
#!/bin/bash
var_one=x
var_two=y
var_three=z
result=$(
    echo "var_one + var_two = var_three" |
    sed -e "s/\(var_[^\ ]*\)/$\1/g"
)
eval "echo $result" 
```

*使用eval*有很多陷阱。但是，此代码肯定可以解决您所描述的问题。

# iphone - 在后台加载大量数据

> ID：11555238
> 
> 赞同：0
> 
> 时间：2012-07-19T06:40:30.507
> 
> 标签：iphone, objective-c, ios, core-data

我有一个下载 XML 对象并将其保存在`CoreData`模型中的应用程序。根视图在表格中显示此信息。

我想知道，执行此任务的最佳位置在哪里（根视图的？`AppDelegate`）`viewDidLoad`

对于少量数据来说，答案似乎很容易，但是在谈论大文件时应该放在哪里呢？推荐的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T06:45:03.733

我建议你在后台加载这些数据`AppDelegate`，在后台显示`UIActivityIndicator`和加载数据，然后在完成后更新你的 RootView。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T10:35:24.043

我建议您在 Root 视图的 viewDidLoad 中加载这些数据。如前所述，数据不大，因此无需显示 UIActivityIndi​​cator。

# shell - Unix find 命令的默认顺序是什么？

> ID：11555243
> 
> 赞同：2
> 
> 时间：2012-07-19T06:40:42.190
> 
> 标签：shell, unix

我在手册页中搜索 find 以获取 UNIX find 命令默认顺序的线索。

感谢是否有人知道这一点。

[http://unixhelp.ed.ac.uk/CGI/man-cgi?find](http://unixhelp.ed.ac.uk/CGI/man-cgi?find)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T07:47:15.867

`find`只是查看出现在目录中的文件和子目录，就像`ls -U`此选项可用时一样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T07:47:56.707

find 命令使用该[`opendir()`函数](http://linux.die.net/man/3/opendir)获取目录中的列表，该函数返回目录流，并遍历该流并评估每个条目。符合条件的将按照它们的评估顺序返回。因此，您从`find`命令中获得的顺序是底层文件系统如何呈现它们。

# php - 如何配置 .htaccess 以支持 MVC？

> ID：11555244
> 
> 赞同：1
> 
> 时间：2012-07-19T06:40:43.883
> 
> 标签：php, .htaccess, easyphp

我想编写 PHP MVC Web 应用程序。

现在我正在尝试将任何输入的 URL 路由到 index.php 所以我创建了一个 .htaccess 文件，如下所示

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f

RewriteRule ^(.*)$ index.php [R,L,NS] 
```

但是当我尝试输入任何 URL 时，它会将我路由到输入完整路径的 URL ->`127.0.0.1/mvc/xxx/` 路由到 ->`http://127.0.0.1/C:/Program%20Files/EasyPHP-12.0/apache/htdocs/mvc/index.php`

如果没有完整路径 (C:/Program%20Files/EasyPHP-12.0/apache/htdocs) 我想，我会得到我想要的。

请帮助如何解决这个问题。

谢谢大家。孔塔。

我在 Windows XP 上使用 EasyPHP。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T07:04:09.830

要扩展 Jalpesh Patel 的答案：

您的 .htaccess 会将 url 路径传递给路由器或对示例 URL 进行排序：

`http://example.com/mvc/controller/action/action2`：

```
RewriteEngine on
RewriteBase /mvc
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^(.*)$ index.php?request=$1 [L,QSA] 
```

将发送到`index.php?request=controller/action/action2`

然后在 index 中，希望将此请求路由到脚本的一部分，该部分执行以下操作：

```
/*Split the parts of the request by / */
$request = (isset($_GET['request']) ? explode('/', $_GET['request']) : null);
//but most likely $request will be passed to your url layer
$request[0] = 'controller';
$request[1] = 'action';
$request[2] = 'action2'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-27T20:03:57.240

示例 URL： [http ://example.com/controller/action1/action2/action3](http://example.com/controller/action1/action2/action3)

在您的 .htaccess 中使用此规则：

```
<IfModule mod_rewrite.c>    
RewriteEngine On
RewriteCond %{REQUEST_URI} !-f
RewriteCond %{REQUEST_URI} !-d
RewriteCond %{REQUEST_URI} !-l
RewriteRule ^([a-zA-Z_-]*)/?([a-zA-Z_-]*)?/?([a-zA-Z0-9_-]*)?/?([a-zA-Z0-9_-]*)$ index.php?controller=$1&action1=$2&action2=$3&action3=$4 [NC,L] 
```

考虑在中间的单词下划线，如您所见，如何添加 the_word 规则_-

来检索这些值，所以得到恢复：

```
$controller = (isset($_GET['controller']) ? $_GET['controller'] : "IndexController";
$action1= (isset($_GET['action1']) ? $_GET['action1'] : "IndexAction";
$action2= (isset($_GET['action2']) ? $_GET['action2'] : "";
$action3= (isset($_GET['action3']) ? $_GET['action3'] : ""; 
```

在验证控制器类是否存在以及是否有带有 class_exists() 的方法后，method_exists()。

```
if( class_exists( $controller."Controller", false )) {
        $controller = $controller."Controller";
        $cont = new $controller(); 
        } 
        else {
        throw new Exception( "Class Controller ".$controller." not found in: "__LINE__ );           
        } 
```

为您的行动：$action1

```
if( method_exists( $cont, $action1 )  ) {                   
$cont->$action1();
   } 
else {
 $cont->indexAction();                   
//throw new Exception( "Not found Action: <b>$action</b> in the controller: <b>$controller</b>" );           
            } 
```

# magento - 如何在 Magento 中移动页脚的位置

> ID：11555248
> 
> 赞同：0
> 
> 时间：2012-07-19T06:41:08.957
> 
> 标签：magento, footer

如何更改magento中页脚部分的位置？

我想把页脚放在页面的主 div 中。

我怎么能在magento中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T07:32:06.257

我不确定您为什么要这样做，也许重新组织您的页面结构会是一个更好的选择 - 页脚是页脚，而不是主要内容的一部分。

尽管如此，这可以使用布局 xml 轻松实现。

**编辑**

您可以采用两种方法：

**1\. 为您的基本布局覆盖使用本地 xml 文件。**-`app/design/frontend/your_package/your_theme/layout/local.xml`

这确实应该是您的首选方法，除非您的特定用例有很好的反对理由。

```
<?xml version="1.0"?>
<layout>
    <default>
        <reference name="root">
            <action method="unsetChild">
                <alias>footer</alias>
            </action>
        </reference>
        <reference name="content">
            <action method="insert">
                <alias>footer</alias>
            </action>
        </reference>
    </default>
</layout> 
```

或者...

**2.复制基础布局文件**

复制`app/design/frontend/base/default/layout/page.xml`到`app/design/frontend/your_package/yout_theme/layout/page.xml`

找到声明如下的页脚节点（在未触及的 page.xml *CE 1.7*中）：

```
<block type="page/html_footer" name="footer" as="footer" template="page/html/footer.phtml">
    <block type="page/html_wrapper" name="bottom.container" as="bottomContainer" translate="label">
        <label>Page Footer</label>
        <action method="setElementClass"><value>bottom-container</value></action>
    </block>
    <block type="page/switch" name="store_switcher" as="store_switcher" template="page/switch/stores.phtml"/>
    <block type="page/template_links" name="footer_links" as="footer_links" template="page/template/links.phtml"/>
</block> 
```

它将是根节点的直接后代。移动整个节点，使其成为主内容节点的子节点：

```
<block type="core/text_list" name="content" as="content" translate="label">
    <label>Main Content Area</label>

    <block type="page/html_footer" name="footer" as="footer" template="page/html/footer.phtml" after=">
        <block type="page/html_wrapper" name="bottom.container" as="bottomContainer" translate="label">
            <label>Page Footer</label>
            <action method="setElementClass"><value>bottom-container</value></action>
        </block>
        <block type="page/switch" name="store_switcher" as="store_switcher" template="page/switch/stores.phtml"/>
        <block type="page/template_links" name="footer_links" as="footer_links" template="page/template/links.phtml"/>
    </block>
</block> 
```

如果启用，请记住刷新缓存:)

**编辑**

使用第二种方法回答有关块定位的评论中的问题。您可以使用 before 和 after 属性。

IE

```
<block type="page/html_footer" name="footer" as="footer" template="page/html/footer.phtml" after="your_sibling_block_name"> 
```

此外，根据其他布局 xml，您可能还必须编辑兄弟块并向其添加 before 属性，即`before="footer"`

# iphone - 是否可以在没有 iTunes 的情况下部署 Iphone 企业应用程序？

> ID：11555254
> 
> 赞同：0
> 
> 时间：2012-07-19T06:42:02.123
> 
> 标签：iphone

1.  我想在企业级开发一个应用程序，我希望它在没有 iTunes 的情况下部署，这可能吗？

2.  如果是，请清楚说明需要做什么以及如何在苹果注册整个过程。

3.  任何文件、文章和链接请提出答案。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T09:15:03.600

1.  拥有 Apple Enterprise Program 许可证（299 美元）后，企业部署非常容易。使用许可证和 xCode，您可以生成 IPA+Plist 文件以供企业部署。

2.  在简单的 FTP 或 HTTP 服务器上部署放置 IPA+Plist 文件并向用户发送链接（通过电子邮件或在任何门户（如 sharepoint）上）。当用户点击链接时，iPhone 或 iPad 开始下载，下载方式与您使用 App Store 时相同！请注意，IPA 包包括应用程序 + 您通过许可证获得的企业配置文件证书，并且只需一步安装，就像使用 App Store 时一样。您还可以将相同的 IPA 与任何 MDM 解决方案一起使用，以实现全自动部署，无需用户操作。

3.  一些链接：

此处提供企业计划：请参阅上面的评论...

在 xCode 中构建和归档您的应用程序：使用与 AdHoc 构建相同的步骤：[https ://developer.apple.com/legacy/library/technotes/tn2250/_index.html#//apple_ref/doc/uid/DTS40009933-CH1 -TNTAG36](https://developer.apple.com/legacy/library/technotes/tn2250/_index.html#//apple_ref/doc/uid/DTS40009933-CH1-TNTAG36)

使用 xCode Organizer 通过此对话框保存 IPA 包导出：[https ://developer.apple.com/library/ios/#recipes/xcode_help-archives_organizer/articles/distributing_ios_apps.html](https://developer.apple.com/library/ios/#recipes/xcode_help-archives_organizer/articles/distributing_ios_apps.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T07:28:23.343

是的，这是可能的，您可以为此使用例如[testflightapp](http://testflightapp.com/)。它的工作原理和使用方法可以在[这里](http://help.testflightapp.com/)找到。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T07:57:02.750

1.  是的，您可以使用众多[移动设备管理 (MDM)](http://www.enterpriseios.com/wiki/Comparison_MDM_Providers)服务之一、[Apple Configurator 工具](http://itunes.apple.com/us/app/apple-configurator/id434433123?mt=12)（仅限 Mac）或[Testflight等服务](http://testflightapp.com/)
2.  您需要以每年 299 美元的价格从 Apple 获得企业许可证（您的公司必须有[DUNS](http://fedgov.dnb.com/webform/)编号）。开发过程与单个开发人员证书相同。您可以在您公司拥有的任何设备上部署您的应用程序 [https://developer.apple.com/programs/ios/enterprise/](https://developer.apple.com/programs/ios/enterprise/)
3.  [enterpriseios.com](http://www.enterpriseios.com/)有很多关于企业 iOS 开发的文章、评论等。当然，Apple 也有大量信息（参见上面的链接）

# javascript - 来自 img 标签的 Fancybox 标题不是 href

> ID：11555259
> 
> 赞同：0
> 
> 时间：2012-07-19T06:42:13.483
> 
> 标签：javascript, jquery, fancybox

有没有办法从`<img>`标签而不是`<a>`标签中提取标题？

例如 HTML：

```
<a rel="fancybox" href="#">
<img src="ball.jpg" title="this is the caption i want to show in fancybox" alt="alt text here" />
</a>

<a rel="fancybox" href="#">
<img src="ball2.jpg" title="this is the caption2" alt="alt text here" />
</a>

<a rel="fancybox" href="#">
<img src="ball3.jpg" title="this is the caption 3" alt="alt text here" />
</a> 
```

我已经尝试过了，但它不起作用：JQuery：

```
 $("a[rel=fancybox]").fancybox({
                'transitionIn': 'elastic',
                'transitionOut': 'elastic',
                'titlePosition': 'inside',
                'titleFormat': function (title, currentArray, currentIndex, currentOpts) {
                    title = $(this).find("img").attr("title");
                    return '<span>' + title + '</span>';
                }
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T07:07:42.603

对于fancybox v1.3.4 只需使用API​​ 选项，基本上你在标签的属性（不是属性）`titleFromAlt`上设置fancybox 标题，比如`alt``img``title`

```
<a rel="fancybox" href="#">
 <img src="ball.jpg"  alt="this is the caption i want to show in fancybox" />
</a> 
```

然后你的脚本：

```
 $("a[rel=fancybox]").fancybox({
                'transitionIn' : 'elastic',
                'transitionOut': 'elastic',
                'titlePosition': 'inside',
                'titleFromAlt' :  true 
            }); 
```

您可以在此处了解有关[此选项的更多信息以及 title 在 fancybox v1.3.2+ 中的工作方式](https://groups.google.com/group/fancybox/browse_thread/thread/3da14d88af2393cc/)

**#EDIT**：强制`title`从标签中读取属性，`img`使用 API 选项`onStart`，如

```
 $("a[rel=fancybox]").fancybox({
            'transitionIn' : 'elastic',
            'transitionOut': 'elastic',
            'titlePosition': 'inside',
            'onStart' : function(currentArray,currentIndex){
               var obj = currentArray[ currentIndex ];
               this.title = $(obj).find('img').attr("title");
            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T06:46:49.037

试试这个：

```
$("img[title=fancybox]").fancybox({
            'transitionIn': 'elastic',
            'transitionOut': 'elastic',
            'titlePosition': 'inside',
            'titleFormat': function (title, currentArray, currentIndex, currentOpts) {
                title = $(this).find("img").attr("title");
                return '<span>' + title + '</span>';
            }
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T07:03:39.277

试试这个 -

```
 $("a[rel=fancybox]").fancybox({
            'transitionIn': 'elastic',
            'transitionOut': 'elastic',
            'titlePosition': 'inside',
            'titleFormat': function (title, currentArray, currentIndex, currentOpts) {
                title = $(currentArray[currentIndex]).find('img').attr('title');
                return '<span>' + title + '</span>';
            }
        }); 
```

或者你可以只传递参数`'titleFromAlt' : true`

# google-cloud-messaging - Android GCM 切换到另一个网络

> ID：11555261
> 
> 赞同：0
> 
> 时间：2012-07-19T06:42:31.410
> 
> 标签：google-cloud-messaging

我已经成功地让 android gcm 在我的本地网络上工作。但是我观察到我的服务器 url 是 192.168 范围内的 IP 地址。当我在同一网络上注册此设备时，它会成功注册，我可以向它发送消息。但是在注册后，如果我将设备切换到另一个网络并尝试发送 gcm 消息，我发现它不起作用。我不明白为什么会这样。根据架构，应用程序仅与应用程序服务器联系一次。之后，所有消息都通过 Google 服务器中继。因此，即使 IP 地址是本地地址，一旦我的设备注册，我应该能够切换到不同的网络

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T13:15:44.690

请尝试以下操作： 1\. 转到 [https://code.google.com/apis/console/](https://code.google.com/apis/console/)

1.  点击 API 访问

2.  它将向您显示与您的帐户相关的所有密钥。

3.  转到您在 APP 中用于 GCM 的密钥并检查参考：

它应该是

```
Referers: Any referer allowed 
```

希望这有帮助。

# java - 如何读取二进制文件中的整数和日期

> ID：11555262
> 
> 赞同：0
> 
> 时间：2012-07-19T06:42:34.633
> 
> 标签：java, binary

我有一个二进制记录文件。每条记录的格式如下： 每条记录由两个整数组成，车辆数量和参与人数；浮点数，严重性代码；和一个包含事故日期的字符串。该日期采用以下形式：三个字母的月份缩写，后跟一个空格，然后是月份中的一天，后跟逗号，最后是可以用两位数或四位数字表示的年份。

以下是代码。但我没有得到正确的答案..

我的代码：

```
import java.io.*;

public class BoydBAssignment5_Ver1 {

    public static void main(String s[]) {
        DataInputStream input1;                     //you need these two variable for a file
        File            infile1;
        input1 = null;

        BoydBAssignment5_Ver1 tfr;                  //this is your program object
        tfr = new BoydBAssignment5_Ver1();
        try{    //try for open
            infile1 = new File("assign5.data");
            input1 = new DataInputStream(new FileInputStream(infile1));
        } catch (IOException i){
            i.printStackTrace();}

        tfr.read_records(input1);
        try {   //try for close
            input1.close();
        } catch (IOException i) {
            System.out.println("error in close");
        }
    }

    private void read_records(DataInputStream is2) {
        int totalVehicles=0,totalPersons=0;
        int numVehicles;
        int numPeople;
        char ch;

        try {   //try for read
            while(true) {
                numVehicles=is2.readInt();
                if(numVehicles==0)
                break;

                totalVehicles+=numVehicles;
                System.out.print("\n"+numVehicles+"\t");
                numPeople=is2.readInt();
                if(numPeople==0)
                break;

                totalPersons+=numPeople;
                System.out.print(numPeople+"\t");
                System.out.print(is2.readDouble()+"\t");
                /*System.out.print(is2.readLine()+"\n");
                    for(int k=0;k<4;k++)
                    {
                        is2.readByte();
                    }*/
                while((ch=(char)is2.readByte()) != 0x00) {
                    System.out.print(ch+"");
                }
            }

            System.out.println("\nTotal no of vehicles:"+totalVehicles);
            System.out.println("Total no of Persons:"+totalPersons);
            write_in_file(totalVehicles,totalPersons);
        } catch (IOException i) {
            System.out.println("error in write");
        }

    }

    private void write_in_file(int totalVehicles, int totalPersons) {
        try {
            FileWriter fstream = new FileWriter("finalOutput.data");
            BufferedWriter out = new BufferedWriter(fstream);
            out.write("Number of vehicles involved"+"\t"+totalVehicles);
            out.write("\nNumber of persons involved"+"\t"+totalPersons);
            out.close();
        } catch(Exception e) {
            e.printStackTrace();
        }
    }

} 
```

输出 ：：

> 148308 1 4.774904982E-314
> 189429102 540161068 1.4275957977117199E-71
> 512 576 6.903600071305329E-93 8,98 37966848 512 1.7668797952966E-311
> Mar 4,2006 37966848 256 2.8513257442947E-311
> Apr 8,2011 38683904 512 2.3101107177838E-311 Jun 14, 06 38683904 256 6.792508527386E-312 Apr 22,2005 38683904 256 1.2216329768334E-311 Oct 1,04 38683904 768 2.3099515681247E-311 Jul 9,83 38813952 256 6.802588006634E-312 Aug 4\. 1998 38813952 512 6.802588006634E-312 Jun 14, 2011 38813952 512 1.7667206456376E-311 99 年 9 月 8 日 39344128
> 车辆总数：576033218 人总数：540165485

请帮助我..提前谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T06:47:23.497

猜测是您的数据存储为小端。`DataInputStream`是大端的。（如果您不确定什么是字节序，请参阅[http://en.wikipedia.org/wiki/Endianness](http://en.wikipedia.org/wiki/Endianness)）

最简单的做法是将文件读入一个`ByteBuffer`允许您设置字节顺序的直接文件。

# c# - 在C#中将多个文本框文本组合成一个字符串

> ID：11555265
> 
> 赞同：1
> 
> 时间：2012-07-19T06:43:04.080
> 
> 标签：c#

我正在尝试为用户编写一个程序来键入 IP 地址。我创建了 4 个文本框，用户将在每个文本框中键入 3 个数字。最后我需要将这 4 个文本框组合起来，使其成为有效的 IP 地址。这个 IP 地址将被放入一个字符串中，以便我可以通过串口发送它。我们该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T07:07:56.767

```
String.Join(".",tb1.Text, tb2.Text, tb3.Text, tb4.Text) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T06:47:09.853

```
IPAddress ipaddress = IPAddress.Parse(tb1.Text + "." + tb3.Text + "." +tb3.Text + "." + tb4.Text); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T06:45:41.577

```
var ipArray = new [] {tb1.Text, tb2.Text, tb3.Text, tb4.Text} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-19T07:09:03.280

你只需要连接字符串......

```
var strIP = tb1.Text + '.' + tb2.Text + '.' + tb3.Text + '.' + tb4.Text;
//This is to see it
MessageBox.Show(strIP); 
```

或者您可以使用 StringBuilder....

```
var strIP = new StringBuilder();
strIP.Append(tb1.Text);
strIP.Append('.');
strIP.Append(tb2.Text);
strIP.Append('.');
strIP.Append(tb3.Text);
strIP.Append('.');
strIP.Append(tb4.Text);

//This is to see it
MessageBox.Show(strIP.ToString()); 
```

# ruby - 使 ruby gem 响应终端命令

> ID：11555268
> 
> 赞同：5
> 
> 时间：2012-07-19T06:43:22.207
> 
> 标签：ruby, rubygems, terminal, gem, rvm

我对红宝石和宝石制作非常陌生。我制作了一个简单的 gem，它根据输入来抓取一些信息。但是，要使用我的 gem，我需要进入解释器 (irb) 并要求我的 gem，然后使用一些参数调用该方法。

假设 gem 被调用`foo`。假设该方法被调用`print_website(x) # where x is a string`。

我希望能够做类似的事情：

```
$ foo test.com 
```

它应该自动调用该方法并执行它。

提前致谢！如果我不清楚，请向我澄清！:D

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T07:04:10.517

试试看

```
$ mkdir bin
$ touch bin/foo
$ chmod a+x bin/foo 
```

编辑**bin/foo**

```
#!/usr/bin/env ruby

require 'foo'
#Anything you want....... 
```

将以下内容添加到 Gemfile

```
 s.executables << 'foo' 
```

推宝石。现在您发布了命令行实用程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T07:21:40.673

很简单，只需`bundle gem mygem -b`在创建 gem 时运行。

# objective-c - ipad 旋转时更改相机方向

> ID：11555272
> 
> 赞同：0
> 
> 时间：2012-07-19T06:43:36.337
> 
> 标签：objective-c, ipad, camera

我正在使用以下代码从 Ipad 捕获图像：

```
if ( [UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera] ) {
    UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
    imagePicker.delegate = imagePickerDelegate;

    imagePicker.sourceType = UIImagePickerControllerSourceTypeCamera | UIImagePickerControllerSourceTypePhotoLibrary;

    UIPopoverController                  *popover;
    [popover setPopoverContentSize:CGSizeMake(320, 480)];
    [popover setContentViewController:imagePicker animated:YES];
} 
```

我的问题是，当我将 ipad 从纵向旋转到横向时，相机仍然向我显示纵向图像。但是当我对图像选择器使用全屏时，它工作正常。一个想法我可以如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T07:01:05.963

根据[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html)，`UIImagePickerController`不支持水平模式。

> **重要**UIImagePickerController 类仅支持纵向模式。此类旨在按原样使用，不支持子类化。此类的视图层次结构是私有的，不得修改，但有一个例外。在 iOS 3.1 及更高版本中，您可以将自定义视图分配给`[cameraOverlayView](http://developer.apple.com/library/ios/documentation/uikit/reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html#//apple_ref/occ/instp/UIImagePickerController/cameraOverlayView)`属性，并使用该视图来呈现附加信息或管理相机界面和代码之间的交互。

# asp.net - 使用 MultiView 注册不起作用

> ID：11555273
> 
> 赞同：1
> 
> 时间：2012-07-19T06:43:39.393
> 
> 标签：asp.net, sql-server-2008, multiview

我有一个 MultiView 来添加具有 3 个视图的员工。请让我知道正确的方法。这是我制作的无效代码。每次我修改某些东西时，它都会给出新的错误。

抱歉，我无法在此处发布代码。这是 ASP.NET 论坛上的帖子

[http://forums.asp.net/t/1825476.aspx/1?Registration+using+MultiView+not+working+](http://forums.asp.net/t/1825476.aspx/1?Registration+using+MultiView+not+working+)

```
namespace EmployeeMultiView.AdminPages
{
    public partial class _Default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            if (!Page.IsPostBack)
                MultiView1.ActiveViewIndex = 0;
        }

        private void InsertInfo()
        {
            String KKSTechConnectionString = @"Data Source=USER-PC\SQLEXPRESS;Initial Catalog=KKSTech;Integrated Security=True";
            SqlConnection conn = new SqlConnection(KKSTechConnectionString);
            //Session["sessFirstName"] = Request["textbox1"];

               try
                {
                conn.Open();
                String insertstring = @"Insert INTO Emp
                (EmpID,FirstName,LastName,MiddleName,Mob1,Mob2,Phone,Email1,Email2,EmpDesc,Accno,IFSCCode,Branch,ApproxUnitPrice)
                values (@EmpID,@FirstName,@LastName,@MiddleName,@Mob1,@Mob2,@Phone,@Email1,@Email2,@EmpDesc,@Accno,@IFSCCode,@Branch,@ApproxUnitPrice)";

                if (MultiView1.ActiveViewIndex == 0)
                {
                    SqlCommand cmd = new SqlCommand("insertstring", conn);
                    cmd.CommandText = insertstring;
                    cmd.CommandType = CommandType.Text;

                    cmd.Parameters.AddWithValue("@EmpID", TextBox1.Text);
                    cmd.Parameters.AddWithValue("@FirstName", TextBox2.Text);
                    cmd.Parameters.AddWithValue("@LastName", TextBox3.Text);
                    cmd.Parameters.AddWithValue("@MiddleName", TextBox4.Text);
                    cmd.Parameters.AddWithValue("@Mob1", TextBox5.Text);
                    cmd.Parameters.AddWithValue("@Mob2", TextBox6.Text);
                    cmd.Parameters.AddWithValue("@Phone", TextBox7.Text);
                    cmd.Parameters.AddWithValue("@Email1", TextBox8.Text);
                    cmd.Parameters.AddWithValue("@Email2", TextBox9.Text);
                    cmd.Parameters.AddWithValue("@EmpDesc", TextBox10.Text);
                  }

                else if (MultiView1.ActiveViewIndex == 1)
                {
                    SqlCommand cmd2 = new SqlCommand("insertstring", conn);
                    cmd2.CommandText = insertstring;
                    cmd2.CommandType = CommandType.Text;

                    cmd2.Parameters.AddWithValue("@Accno", TextBox11.Text);
                    cmd2.Parameters.AddWithValue("@IFSCCode", TextBox12.Text);
                    cmd2.Parameters.AddWithValue("@Branch", TextBox13.Text);
                    cmd2.Parameters.AddWithValue("@ApproxUnitPrice", TextBox16.Text);
                    cmd2.ExecuteNonQuery();
                }
                else if (MultiView1.ActiveViewIndex == 2)
                {
                    if (FileUpload1.HasFile)
                    {
                        byte[] productImage = FileUpload1.FileBytes;

                        String insertstring2 = @"Insert INTO Cert (CertName, CertLogo)
                                                         values(@CertName, @CertLogo)";

                        SqlCommand cmd3 = new SqlCommand("insertstring2", conn);
                        cmd3.CommandText = insertstring2;
                        cmd3.CommandType = CommandType.Text;

                        cmd3.Parameters.AddWithValue("@CertName", TextBox18.Text);
                        cmd3.Parameters.Add("@CertLogo", SqlDbType.VarBinary).Value = productImage;

                        cmd3.ExecuteNonQuery();
                    }
                }
           }

            catch (System.Data.SqlClient.SqlException ex)
            {

                string msg = "Insert Error:";
                msg += ex.Message;
                throw new Exception(msg);
            }

            finally
            {
                Session.Abandon();
                conn.Close();
            }

        }
        protected void Button1_Click(object sender, EventArgs e)
        {

            InsertInfo();
            MultiView1.ActiveViewIndex += 1;

        }
protected void Button2_Click(object sender, EventArgs e)
        {
            MultiView1.ActiveViewIndex -= 1;
        }

        protected void Button5_Click(object sender, EventArgs e)
        {
            Response.Write("Successful");
        }

     }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T15:38:05.917

您将在此处遇到的主要问题是，正如所写，您没有为第一个或第二个视图的插入查询提供正确数量的参数。

一些可能对您有所帮助的一般指示 -

*   如果您总是比较相同的值，请使用 switch/case 而不是 if/else if/else if 模式，请参阅[http://msdn.microsoft.com/en-us/library/vstudio/06tc147t.aspx](http://msdn.microsoft.com/en-us/library/vstudio/06tc147t.aspx)
*   始终为 if 语句使用花括号，即使它是单行，它也可以帮助您直观地扫描代码并理解结构。
*   cmd.CommandType = CommandType.Text 不需要，因为这是默认值，但如果您觉得它提高了可读性，您可以包含它
*   不要在 SqlCommand cmd = new SqlCommand("insertstring", conn) 中的 insertstring 周围加上引号 - 而不是您已经创建的字符串变量 insertstring，使用引号会使您的 SQL 命令保持字面意思为“insertstring”。
*   如果您提供了 SQL 命令作为参数（即上面的插入字符串），则无需添加 cmd.CommandText = insertstring;
*   在您的代码中使用有意义的 ID，例如 TextBox9 包含什么？Button2的作用是什么？必须去查找会使代码难以维护和更新。
*   确保使用 asp:Label 控件在前端标记文本框，并将 AssociatedControlID 设置为 TextBox ID。
*   确保您正在**验证**是否提供了所需的用户输入（使用必需的字段验证器）以及所需的类型和长度（在 TextBox 控件上设置 MaxLength 以匹配数据库中的字段长度）

我假设您的前端代码*类似于*-

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="EmployeeMultiView.AdminPages._Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:MultiView ID="MultiView1" runat="server">
            <asp:View runat="server">
                <asp:Label AssociatedControlID="TextBox1" runat="server" Text="Label Text for TextBox1"></asp:Label>
                <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
                <asp:Label AssociatedControlID="TextBox2" runat="server" Text="Label Text for TextBox2"></asp:Label>
                <asp:TextBox ID="TextBox2" runat="server"></asp:TextBox>
                <asp:Label AssociatedControlID="TextBox3" runat="server" Text="Label Text for TextBox3"></asp:Label>
                <asp:TextBox ID="TextBox3" runat="server"></asp:TextBox>
                <asp:Label AssociatedControlID="TextBox4" runat="server" Text="Label Text for TextBox4"></asp:Label>
                <asp:TextBox ID="TextBox4" runat="server"></asp:TextBox>
                <asp:Label AssociatedControlID="TextBox5" runat="server" Text="Label Text for TextBox5"></asp:Label>
                <asp:TextBox ID="TextBox5" runat="server"></asp:TextBox>
                <asp:Label AssociatedControlID="TextBox6" runat="server" Text="Label Text for TextBox6"></asp:Label>
                <asp:TextBox ID="TextBox6" runat="server"></asp:TextBox>
                <asp:Label AssociatedControlID="TextBox7" runat="server" Text="Label Text for TextBox7"></asp:Label>
                <asp:TextBox ID="TextBox7" runat="server"></asp:TextBox>
                <asp:Label AssociatedControlID="TextBox8" runat="server" Text="Label Text for TextBox8"></asp:Label>
                <asp:TextBox ID="TextBox8" runat="server"></asp:TextBox>
                <asp:Label AssociatedControlID="TextBox9" runat="server" Text="Label Text for TextBox9"></asp:Label>
                <asp:TextBox ID="TextBox9" runat="server"></asp:TextBox>
                <asp:Label AssociatedControlID="TextBox10" runat="server" Text="Label Text for TextBox10"></asp:Label>
                <asp:TextBox ID="TextBox10" runat="server"></asp:TextBox>
            </asp:View>
            <asp:View runat="server">
                <asp:Label AssociatedControlID="TextBox11" runat="server" Text="Label Text for TextBox11"></asp:Label>
                <asp:TextBox ID="TextBox11" runat="server"></asp:TextBox>
                <asp:Label AssociatedControlID="TextBox12" runat="server" Text="Label Text for TextBox12"></asp:Label>
                <asp:TextBox ID="TextBox12" runat="server"></asp:TextBox>
                <asp:Label AssociatedControlID="TextBox13" runat="server" Text="Label Text for TextBox13"></asp:Label>
                <asp:TextBox ID="TextBox13" runat="server"></asp:TextBox>
                <asp:Label AssociatedControlID="TextBox16" runat="server" Text="Label Text for TextBox16"></asp:Label>
                <asp:TextBox ID="TextBox16" runat="server"></asp:TextBox>
            </asp:View>
            <asp:View runat="server">
                <asp:Label AssociatedControlID="FileUpload1" runat="server" Text="Label Text for FileUpload1"></asp:Label>
                <asp:FileUpload ID="FileUpload1" runat="server" />
                <asp:Label AssociatedControlID="TextBox18" runat="server" Text="Label Text for TextBox18"></asp:Label>
                <asp:TextBox ID="TextBox18" runat="server"></asp:TextBox>
            </asp:View>
        </asp:MultiView>

        <asp:Button ID="Button1" OnClick="Button1_Click" runat="server" Text="Next" />
        <asp:Button ID="Button2" OnClick="Button2_Click" runat="server" Text="Previous" />
    </div>
    </form>
</body>
</html> 
```

在这种情况下，我会像这样写你的代码 -

```
using System;
using System.Data.SqlClient;
using System.Data;

namespace EmployeeMultiView.AdminPages
{
    public partial class _Default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            if (!Page.IsPostBack)
            {
                MultiView1.ActiveViewIndex = 0; //Even though you don't need braces here it helps readability
            }
        }

        private void InsertInfo()
        {
            String KKSTechConnectionString = @"Data Source=USER-PC\SQLEXPRESS;Initial Catalog=KKSTech;Integrated Security=True";
            //Store connection strings in your web.config file wherever possible

            //Session["sessFirstName"] = Request["textbox1"];

            try
            {
                //Move connection so we don't open it unless we have to
                string insertstring = @"Insert INTO Emp (EmpID,FirstName,LastName,MiddleName,Mob1,Mob2,Phone,Email1,Email2,EmpDesc,Accno,IFSCCode,Branch,ApproxUnitPrice)
                values (@EmpID,@FirstName,@LastName,@MiddleName,@Mob1,@Mob2,@Phone,@Email1,@Email2,@EmpDesc,@Accno,@IFSCCode,@Branch,@ApproxUnitPrice)";

                //Use switch/case to compare multiple values (see http://msdn.microsoft.com/en-us/library/vstudio/06tc147t.aspx)
                switch (MultiView1.ActiveViewIndex)
                {
                    case 0:
                        //Need all the SQL parameters so we don't try to insert to the database here
                        break;
                    case 1:
                        using (SqlConnection conn = new SqlConnection(KKSTechConnectionString))
                        {
                            SqlCommand cmd = new SqlCommand(insertstring, conn);
                            //cmd2.CommandText = insertstring; - also redundent
                            //cmd2.CommandType = CommandType.Text; - this is the default value so not needed

                            //Add the parameters from the first view here, these will rely on ViewState which must be enabled
                            cmd.Parameters.AddWithValue("@EmpID", TextBox1.Text);
                            cmd.Parameters.AddWithValue("@FirstName", TextBox2.Text);
                            cmd.Parameters.AddWithValue("@LastName", TextBox3.Text);
                            cmd.Parameters.AddWithValue("@MiddleName", TextBox4.Text);
                            cmd.Parameters.AddWithValue("@Mob1", TextBox5.Text);
                            cmd.Parameters.AddWithValue("@Mob2", TextBox6.Text);
                            cmd.Parameters.AddWithValue("@Phone", TextBox7.Text);
                            cmd.Parameters.AddWithValue("@Email1", TextBox8.Text);
                            cmd.Parameters.AddWithValue("@Email2", TextBox9.Text);
                            cmd.Parameters.AddWithValue("@EmpDesc", TextBox10.Text);

                            cmd.Parameters.AddWithValue("@Accno", TextBox11.Text);
                            cmd.Parameters.AddWithValue("@IFSCCode", TextBox12.Text);
                            cmd.Parameters.AddWithValue("@Branch", TextBox13.Text);
                            cmd.Parameters.AddWithValue("@ApproxUnitPrice", TextBox16.Text);

                            conn.Open();
                            cmd.ExecuteNonQuery();
                        }
                        break;
                    case 2:

                        if (FileUpload1.HasFile)
                        {
                            byte[] productImage = FileUpload1.FileBytes;

                            String insertstring2 = @"Insert INTO Cert (CertName, CertLogo)
                                                     values(@CertName, @CertLogo)";

                            using (SqlConnection conn = new SqlConnection(KKSTechConnectionString))
                            {
                                SqlCommand cmd3 = new SqlCommand(insertstring2, conn); //No quotes
                                //cmd3.CommandText = insertstring2; - Redundant
                                //cmd3.CommandType = CommandType.Text; - this is the default value so not needed

                                cmd3.Parameters.AddWithValue("@CertName", TextBox18.Text);
                                cmd3.Parameters.Add("@CertLogo", SqlDbType.VarBinary).Value = productImage;

                                conn.Open();
                                cmd3.ExecuteNonQuery();
                            }
                        }
                        break;
                }
            }
            catch (SqlException ex)
            {
                string msg = "Insert Error:";
                msg += ex.Message;
                throw new Exception(msg);
            }
            finally
            {
                //Session.Abandon(); - this would run multiple times during the process
            }
        }

        protected void Button1_Click(object sender, EventArgs e)
        {
            InsertInfo();
            //Don't try to set active view index to non-existant view
            if (MultiView1.ActiveViewIndex < MultiView1.Views.Count)
            {
                MultiView1.ActiveViewIndex += 1;
            }
        }

        protected void Button2_Click(object sender, EventArgs e)
        {
            //Assuming this is a "previous button" - may not need conditional if this is in the second view
            if (MultiView1.ActiveViewIndex > 0)
            {
                MultiView1.ActiveViewIndex -= 1;
            }
        }

        protected void Button5_Click(object sender, EventArgs e)
        {
            Response.Write("Successful");
            Session.Abandon(); //Move to end of operation
        }
    }
} 
```

# python - 在拆分具有不可打印字符的固定宽度字符串时需要帮助

> ID：11555275
> 
> 赞同：0
> 
> 时间：2012-07-19T06:43:46.713
> 
> 标签：python, unicode, csv, split, fixed-width

我有一个特别讨厌的固定宽度文件可以使用。它没有以我认为的格式编码。简而言之，我正在尝试做各种各样的事情：

1.  跳过 RPLY01 之前的所有空格。
2.  删除那些古怪的 \x00* 字符。我已经考虑删除它们，但无论我尝试了什么，星号 (*) 中包含的字符都无法删除。
3.  在 FDXSPD01/ 处拆分
4.  在 CHKP01 拆分。
5.  最终，将每个 CSV 拆分为一个不错的列表，并将所有其他垃圾（RPLY 和 CHKP）捕获为可解析的友好格式。

这是原始输出：

```
�cRPLY01  IREQ    0000011                                                                         
N00    �9FDXSPD01"CASH","","",10219575.34,0.00,0,"000000000000773"
�EFDXSPD01"CAD","CANADA DOLLAR","CU",-14564.52,0.00,0,"000000000000773"    
�PFDXSPD01"CCTUSD","CURRENCY CONTRACT - USD","CC",3644.00,0.00,0,"000000000000773"
�QFDXSPD01"CCTUSD","CURRENCY CONTRACT - USD","CC",-3641.07,0.00,0,"000000000000773"
�PFDXSPD01"CCTUSD","CURRENCY CONTRACT - USD","CC",1457.00,0.00,0,"000000000000773"
�QFDXSPD01"CCTUSD","CURRENCY CONTRACT - USD","CC",-1456.43,0.00,0,"000000000000773"
�DFDXSPD01"CD5427","JOHN CD","CD",100000.00,197.95,0,"000000000000773"
�LFDXSPD01"CP5427","COMMERCIAL PAPER","CP",9925000.00,0.00,0,"000000000000773"
�JFDXSPD01"FS5427","JOHNFORSTOCK","FS",81000.00,10000.00,0,"000000000000773"
�FFDXSPD01"FUT5427","JOHNFUTURE","FT",264000.00,0.00,0,"000000000000773"
�BFDXSPD01"JKSTOCK","JK STOCK","S",31500.00,0.00,0,"000000000000773"
�LFDXSPD01"MB5427","JOHN MUNI BOND","M",255000.00,15611.92,0,"000000000000773"
�QFDXSPD01"MBS5427","JOHNMORTGAGEBACKED","G1",996500.00,2916.67,0,"000000000000773"
�EFDXSPD01"OPT5427","JOHNOPTION","O",464000.00,0.00,0,"000000000000773"
�CFDXSPD01"TB5427","TREASURY BILL","TI",0.00,0.00,0,"000000000000773"
�HFDXSPD01"UB5427","JOHN BOND","G",2994000.00,13281.26,0,"000000000000773"
�9FDXSPD01"UNITS","UNITS","S",0.00,0.00,0,"000000000000773"
�CHKP01  N0000000170 
```

这是相同的输出，但通过`repr`：

```
\x00cRPLY01  IREQ    0000011
N00    \x009FDXSPD01"CASH","","",10219575.34,0.00,0,"000000000000773"
\x00EFDXSPD01"CAD","CANADA DOLLAR","CU",-14564.52,0.00,0,"000000000000773"
\x00PFDXSPD01"CCTUSD","CURRENCY CONTRACT - USD","CC",3644.00,0.00,0,"000000000000773"
\x00QFDXSPD01"CCTUSD","CURRENCY CONTRACT - USD","CC",-3641.07,0.00,0,"000000000000773"
\x00PFDXSPD01"CCTUSD","CURRENCY CONTRACT - USD","CC",1457.00,0.00,0,"000000000000773"
\x00QFDXSPD01"CCTUSD","CURRENCY CONTRACT - USD","CC",-1456.43,0.00,0,"000000000000773"
\x00DFDXSPD01"CD5427","JOHN CD","CD",100000.00,197.95,0,"000000000000773"
\x00LFDXSPD01"CP5427","COMMERCIAL PAPER","CP",9925000.00,0.00,0,"000000000000773"
\x00JFDXSPD01"FS5427","JOHNFORSTOCK","FS",81000.00,10000.00,0,"000000000000773"
\x00FFDXSPD01"FUT5427","JOHNFUTURE","FT",264000.00,0.00,0,"000000000000773"
\x00BFDXSPD01"JKSTOCK","JK STOCK","S",31500.00,0.00,0,"000000000000773"
\x00LFDXSPD01"MB5427","JOHN MUNI BOND","M",255000.00,15611.92,0,"000000000000773"
\x00QFDXSPD01"MBS5427","JOHNMORTGAGEBACKED","G1",996500.00,2916.67,0,"000000000000773"
\x00EFDXSPD01"OPT5427","JOHNOPTION","O",464000.00,0.00,0,"000000000000773"
\x00CFDXSPD01"TB5427","TREASURY BILL","TI",0.00,0.00,0,"000000000000773"
\x00HFDXSPD01"UB5427","JOHN BOND","G",2994000.00,13281.26,0,"000000000000773"
\x009FDXSPD01"UNITS","UNITS","S",0.00,0.00,0,"000000000000773"
\x00\x13CHKP01  N0000000170' 
```

到目前为止，这是我的思路：

```
#!/usr/local/bin/python
import string
import struct
import re
import array

cols = []
splitcols = []

def removeNonAscii(s): return "".join(i for i in s if ord(i) < 128)
rgx = r'[\x00-\x20\x22\x2F\x3A\x3C\x3E\x5C]'

fname2 = open('/Users/abcd/Documents/SVN/scripts/Python/project/I1DL/output.txt', 'r')
fname = open('/Users/abcd/Documents/SVN/scripts/Python/project/I1DL/output.txt', 'r')
ename2 = open('/Users/abcd/Documents/SVN/scripts/Python/project/I1DL/error_output.txt', 'r')
ename = open('/Users/abcd/Documents/SVN/scripts/Python/project/I1DL/error_output.txt', 'r')
losfile = open('/Users/abcd/Documents/SVN/scripts/Python/project/I1DL/error_output.txt', 'r')
losfile2 = open('/Users/abcd/Documents/SVN/scripts/Python/project/I1DL/error_output.txt', 'r')

filename = '/Users/abcd/Documents/SVN/scripts/Python/project/I1DL/output.txt'
filename2 = '/Users/abcd/Documents/SVN/scripts/Python/project/I1DL/error_output.txt'

almost = open('/Users/abcd/Documents/SVN/scripts/Python/project/I1DL/output.txt', 'r')
almost2 = open('/Users/abcd/Documents/SVN/scripts/Python/project/I1DL/output.txt', 'r')

for line in fname.read().split('\t'):
    print repr(line)
    filtered_string = filter(lambda x: x in string.printable, line)
    print "unfilter line: " + line
    print "filtered line: " + filtered_string
    removeNonAscii(line)

print "======================================================================================"

for line in ename.read().split('\t'):
    filtered_string = filter(lambda x: x in string.printable, line)
    print "error unfilter line: " + line
    print "error filtered line: " + filtered_string

print "======================================================================================"

for line in ename2.read().split('\t'):
    for chars in line:
        if chars in string.printable:
            print chars
        else:
            print "!!!!!!!!!!!!!!!"

print "======================================================================================"

#for line in fname2.read().split('\t'):
    #for chars in line:
        #if chars in string.printable:
            #print chars
        #else:
            #print "@@@@@@@@@@@@@@@"

print "======================================================================================"
print "======================================================================================"

testlist = []
testlist2 = []

with open(filename) as f:
    readarray = f.readline()
    for eachitem in readarray[6:]:
        if(all(ord(c) < 127 and c in string.printable for c in eachitem)):
            testlist.append(eachitem)
print repr(''.join(testlist))

with open(filename2) as f:
    readarray2 = f.readline()
    for eachitem in readarray2[6:]:
        testlist2.append(removeNonAscii(eachitem))
print repr(''.join(testlist2))

with open(filename) as f:
    readarray = f.readline()
    print repr(readarray[6:].split(' FDXSPD01'))
    for eachitem in readarray[6:]:
        if(all(ord(c) < 127 and c in string.printable for c in eachitem)):
            testlist.append(eachitem)
print repr(''.join(testlist))
#for eachitem in almost.read():
    #if(all(ord(c) < 127 and c in string.printable for c in eachitem)):
        #testlist.append(eachitem)
#print ''.join(testlist)

#for eachitem in losfile2.read():
    #testlist2.append(removeNonAscii(eachitem))
#print ''.join(testlist2) 
```

也许是睡眠不足，但我似乎找不到正确的答案。也许精通 Python 的人可以告诉我方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T07:38:07.397

好吧，我也有点睡着了，但我想咖啡开始起作用了。

我`repr()`认为这正是您想要的，尽管不一定有效或稳健。

```
import csv, re

data="""
\x00cRPLY01  IREQ    0000011
N00    \x009FDXSPD01"CASH","","",10219575.34,0.00,0,"000000000000773"
\x00EFDXSPD01"CAD","CANADA DOLLAR","CU",-14564.52,0.00,0,"000000000000773"
\x00PFDXSPD01"CCTUSD","CURRENCY CONTRACT - USD","CC",3644.00,0.00,0,"000000000000773"
\x00QFDXSPD01"CCTUSD","CURRENCY CONTRACT - USD","CC",-3641.07,0.00,0,"000000000000773"
\x00PFDXSPD01"CCTUSD","CURRENCY CONTRACT - USD","CC",1457.00,0.00,0,"000000000000773"
\x00QFDXSPD01"CCTUSD","CURRENCY CONTRACT - USD","CC",-1456.43,0.00,0,"000000000000773"
\x00DFDXSPD01"CD5427","JOHN CD","CD",100000.00,197.95,0,"000000000000773"
\x00LFDXSPD01"CP5427","COMMERCIAL PAPER","CP",9925000.00,0.00,0,"000000000000773"
\x00JFDXSPD01"FS5427","JOHNFORSTOCK","FS",81000.00,10000.00,0,"000000000000773"
\x00FFDXSPD01"FUT5427","JOHNFUTURE","FT",264000.00,0.00,0,"000000000000773"
\x00BFDXSPD01"JKSTOCK","JK STOCK","S",31500.00,0.00,0,"000000000000773"
\x00LFDXSPD01"MB5427","JOHN MUNI BOND","M",255000.00,15611.92,0,"000000000000773"
\x00QFDXSPD01"MBS5427","JOHNMORTGAGEBACKED","G1",996500.00,2916.67,0,"000000000000773"
\x00EFDXSPD01"OPT5427","JOHNOPTION","O",464000.00,0.00,0,"000000000000773"
\x00CFDXSPD01"TB5427","TREASURY BILL","TI",0.00,0.00,0,"000000000000773"
\x00HFDXSPD01"UB5427","JOHN BOND","G",2994000.00,13281.26,0,"000000000000773"
\x009FDXSPD01"UNITS","UNITS","S",0.00,0.00,0,"000000000000773"
\x00\x13CHKP01  N0000000170'"""

lines = data.split('\x00')
for line in lines:
    try:
        pos = line.index('"')
        print 'ROW:', next(csv.reader([line[pos:]]))
    except ValueError as e:
        try:
            print 'OTH:', line[next(re.finditer('RPLY|CHKP', line)).start():].split()
        except StopIteration as e:
            print 'XXX:', line 
```

**印刷**

```
OTH: XXX: 

OTH: ['RPLY01', 'IREQ', '0000011', 'N00']
ROW: ['CASH', '', '', '10219575.34', '0.00', '0', '000000000000773']
ROW: ['CAD', 'CANADA DOLLAR', 'CU', '-14564.52', '0.00', '0', '000000000000773']
ROW: ['CCTUSD', 'CURRENCY CONTRACT - USD', 'CC', '3644.00', '0.00', '0', '000000000000773']
...
ROW: ['TB5427', 'TREASURY BILL', 'TI', '0.00', '0.00', '0', '000000000000773']
ROW: ['UB5427', 'JOHN BOND', 'G', '2994000.00', '13281.26', '0', '000000000000773']
ROW: ['UNITS', 'UNITS', 'S', '0.00', '0.00', '0', '000000000000773']
OTH: ['CHKP01', "N0000000170'"] 
```

# jquery - jquery：水平导航栏菜单上的向下滑动和向上滑动

> ID：11555277
> 
> 赞同：0
> 
> 时间：2012-07-19T06:43:59.817
> 
> 标签：jquery, menu, slidedown, slideup, navigationbar

我正在尝试使用 jquery 创建一个简单的显示子菜单，其中包含简单的上滑或下滑动画悬停。

当我有#menu1 和#menu2 时它工作正常。但是代码中有重复。

如何让 sub1 和 sub2 上下滑动而不重复代码？

我还想以橙色显示 sub1 和 sub2，以蓝色显示下拉列表。但是，现在所有内容都显示为蓝色。

谢谢你。

我的代码：

```
<style type="text/css">
ul{
list-style-type:none;
margin:0;
padding:0;
background-color:#FF9900;
}
li {float:left;
display:block;
width:120px;
text-align:center;
padding:4px;
color:#FFFFFF;
background-color:#33CCFF;}
</style>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
$(document).ready(function(){
    $("#menu1").hover(
        function(){//onmouseover
            $("#menu1 ul").slideDown();
        },
        function(){//onmouseout
            $("#menu1 ul").slideUp();
        });
     $("#menu2").hover(
        function(){//onmouseover
            $("#menu2 ul").slideDown();
        },
        function(){//onmouseout
            $("#menu2 ul").slideUp();
        });
});
</script>
</head>

<body>
<ul id="menu">
    <li id="menu1">Sub 1
        <ul>
            <li>test 1</li>
            <li>test 2</li>
            <li>test 3</li>
            <li>test 4</li>
        </ul>
    </li>
    <li id="menu2">Sub 2
        <ul>
            <li>test 1</li>
            <li>test 2</li>
            <li>test 3</li>
            <li>test 4</li>
        </ul>
    </li>
</ul>       
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T06:47:03.060

```
$("#menu1,#menu2").hover(
        function(){//onmouseover
            $(this).children("ul").slideDown();
        },
        function(){//onmouseout
            $(this).children("ul").slideUp();
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T05:11:36.313

我在 Ankit 的帮助和[css:background-color for main menu sub1 and sub2 not](https://stackoverflow.com/questions/11556081/cssbackground-color-for-main-menu-sub1-and-sub2-not-displaying) displayed 的指导下的最终解决方案。谢谢你们！

```
<style type="text/css">
* {color:#ffffff;}
ul{
list-style-type:none;
margin:0;
padding:0;
}
li{float:left;
display:block;
width:120px;
text-align:center;
}

ul > li{background-color:#0000ff;}

ul > li > ul > li{background-color:#ff7700;}

</style>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
$(document).ready(function(){

    $("#menu1,#menu2").children("ul").hide(); //hides the lists when documents loads

    $("#menu1,#menu2").hover( 
        function(){//onmouseover 
            $(this).children("ul").slideDown(); 
        }, 
        function(){//onmouseout 
            $(this).children("ul").slideUp(); 
    }); 
});
</script>
</head>

<body>
<ul id="menu">
    <li id="menu1">Sub 1
        <ul>
            <li>test 1</li>
            <li>test 2</li>
            <li>test 3</li>
            <li>test 4</li>
        </ul>
    </li>
    <li id="menu2">Sub 2
        <ul>
            <li>test 1</li>
            <li>test 2</li>
            <li>test 3</li>
            <li>test 4</li>
        </ul>
    </li>
</ul>       
</body> 
```

# cakephp - 更改 HtmlHelper 标签配置

> ID：11555284
> 
> 赞同：0
> 
> 时间：2012-07-19T06:44:24.057
> 
> 标签：cakephp, html-helper

我已在[此页面上](http://book.cakephp.org/2.0/en/core-libraries/helpers/html.html#HtmlHelper%3a%3aloadConfig)通过文件夹`tags.php`中的（或任何其他文件名）阅读`Config`，并调用`$this->Html->loadConfig('tags')`，我可以更改帮助打印的标签。

它工作完美，但在每一个上`view`，我都应该调用`loadConfig`. （我把它放在我的布局文件中，但它只改变了那个文件，其他视图没有改变）

有没有办法在全球范围内改变它？（以蛋糕方式，无需编辑基本代码）

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T06:56:04.090

尝试

```
// AppController
public $helpers = array(
    'Html' => array(
        'configFile' => 'tags',
    ),
); 
```

# iphone - 将 UIButton 设置为选中状态

> ID：11555287
> 
> 赞同：1
> 
> 时间：2012-07-19T06:44:34.610
> 
> 标签：iphone, ios, xcode

在我的应用程序中，当按下按钮 n 自定义`imagePicker`出现时，它包含我的图像`NSDocumentDirectory`，我想要的是当我选择一个图像时，它会：隐藏、删除、设置为选择，或者任何认为它被选中的东西。

我尝试过为它分配一个整数，所以下次我展示它时，`imagePicker`它会执行上述任一操作，但仍然没有运气。

您能否建议我如何解决我的问题或任何建议。谢谢你。

这是我的代码：

```
- (void)viewDidLoad {

    // Create view
    UIScrollView *view = [[UIScrollView alloc] initWithFrame:CGRectMake(0.0f,0.0f,1024.0f,768.0f)];

    int row = 0;
    int column = 0;
    for(int i = 0; i < _thumbs.count; ++i) {

        UIImage *thumb = [_thumbs objectAtIndex:i];
        UIButton * button = [UIButton buttonWithType:UIButtonTypeCustom];
        button.frame = CGRectMake(column*140+24, row*150+10, 100, 100);
        [button setImage:thumb forState:UIControlStateNormal];
        [button addTarget:self 
                   action:@selector(buttonClicked:) 
         forControlEvents:UIControlEventTouchUpInside];
        button.tag = i; 

        [view addSubview:button];

        if (column == 6) {
            column = 0;
            row++;
        } else {
            column++;
        }

    }

    [view setContentSize:CGSizeMake(1024, (row+1) * 150 + 10)];
    self.view = view;

    [super viewDidLoad];
} 
```

这是我尝试设置它的地方：

```
- (void) viewDidAppear:(BOOL)animated{
    NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
    NSInteger selectedImage = [prefs integerForKey:@"selected"];
    if ( selectedImage ){
        [myButton removeFromSuperview];
        [myButton setBackgroundImage:[UIImage imageNamed:@"Checkmark.png"] forState:UIControlStateSelected];
        [myButton setSelected:YES];
        [myButton setHidden:YES];
        [myButton setHighlighted:YES];
        myButton.selected = YES;
    }      
} 
```

点击时：

```
- (IBAction)buttonClicked:(id)sender {
    self.myButton = (UIButton *)sender;
    self.selectedImage = [_images objectAtIndex:myButton.tag];

    [[NSUserDefaults standardUserDefaults] setInteger:myButton.tag forKey:@"selected"];

    [[NSUserDefaults standardUserDefaults] synchronize];

    [self dismissModalViewControllerAnimated:NO];
} 
```

调用`imagePicker`：

```
- (IBAction)chooseCustomImageTapped:(id)sender {
    _imagePicker1 = [[CustomImagePicker alloc] init];
    _imagePicker1.title = @"Choose Custom Image";
   for(int i = 0; i <= 30; i++) 
    { 
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *documentsDir = [paths objectAtIndex:0];

        NSString *savedImagePath = [documentsDir stringByAppendingPathComponent:[NSString stringWithFormat:@"Images%d.png", i]]; 
        if([[NSFileManager defaultManager] fileExistsAtPath:savedImagePath]){ 
            [_imagePicker1 addImage:[UIImage imageWithContentsOfFile:savedImagePath]]; 

        } 
    } 

     [self presentModalViewController:_imagePicker1 animated:NO];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T09:13:23.157

尝试这样做以更改按钮以使其看起来被选中：

```
- (void)turnButtonToSelected
{
    UIImage *bgImage = [UIImage imageNamed:@"Checkmark.png"];
    [self.button setBackgroundImage:bgImage forState:UIControlStateNormal];
    [self.button setBackgroundImage:bgImage forState:UIControlStateHighlighted];
    [self.button setBackgroundImage:bgImage forState:UIControlStateDisabled];
} 
```

但我必须说我不明白这个按钮是什么，你把它放在哪里？
这是网格上的按钮之一吗？

把它放在 viewDidAppear 而不是你的代码中

```
- (void) viewDidAppear:(BOOL)animated{
    NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
    NSInteger selectedImage = [prefs integerForKey:@"selected"];
    if ( selectedImage ){
        for (UIView *subview in self.view.subviews) {
            if ([subview isKindOfClass:[UIButton class]] && subview.tag == selectedImage) {
                [self turnButtonToSelected];
            }
        }
    }      
} 
```

# python - 诱变剂 mpeg 元数据

> ID：11555288
> 
> 赞同：0
> 
> 时间：2012-07-19T06:44:38.010
> 
> 标签：python, video, mp3, mpeg

我目前正在从事一个需要我处理 mpeg-2 文件的学校项目。目前，我正在使用诱变剂为我的 mpeg 文件提取元数据。但是，当我尝试获取标题、艺术家、专辑等的元数据时，它会显示以下错误。[Python代码欣赏]

### 如果我的输出如下：

mutagen.id3.ID3NoHeaderError: 'media/test.mpeg' 不以 ID3 标签开头

它表明没有所谓的容器来保存 ID3 标签，有人愿意解释一下为什么会这样吗？

当我使用 mp3 文件而不是 mpeg 时，它完美地工作。

### 以下是我的部分代码（硬代码）：

```
from mutagen.id3 import ID3

file = "media/test.mpeg"
audio = ID3(file)

print "Artist: %s" % audio['TPE1'].text[0]
print "Track: %s" % audio["TIT2"].text[0]
print "Release Year: %s" % audio["TDRC"].text[0] 
```

* * *

第二个问题是，当我尝试获取 mpeg 文件的持续时间时，它会返回错误的持续时间。

文件持续时间 = 21 秒

当我运行我的代码时，它显示持续时间：1124.5705721 秒

### 以下是我的部分代码（硬代码）：

```
import mutagen

from mutagen.mp3 import MP3
from mutagen.mp3 import MPEGInfo

file = "media/test.mpeg"
audio = MP3(file)

print audio.info.length 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-20T12:20:32.170

Mutagen 使用 .mpeg 后缀作为识别输入文件是 MP3 音频的一种方式。[请参阅http://code.google.com/p/mutagen/source/browse/mutagen/mp3.py](http://code.google.com/p/mutagen/source/browse/mutagen/mp3.py)末尾附近的 MP3(ID3FileType) 类

Mutagen 可以扩展以检测视频文件类型并从中读取元数据（参见例如[http://code.google.com/p/mutagen/issues/attachmentText?id=90&aid=900002000&name=itunes-video.patch](http://code.google.com/p/mutagen/issues/attachmentText?id=90&aid=900002000&name=itunes-video.patch)）但它不是为此目的而明确设计的。

# asp.net-mvc - 如何为 mvc 解耦应用程序的结构映射指定正确的配置

> ID：11555289
> 
> 赞同：0
> 
> 时间：2012-07-19T06:44:41.553
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework, structuremap

我正在尝试将我的第一个 mvc 应用程序转换为解耦框架。

我有以下层 MVC Web 层、控制器层、域层、服务层、数据层和共享项目

我的测试工作正常，使用结构图和注入依赖项。我的主要障碍是这个。

我正在处理一个 oracle 数据库，并且需要在运行时重新映射实体框架中包含的模式。我通过使用 BrandonHayes 适配器来解决这个问题（我稍微修改了它）。

对于我的服务层测试，我模拟了对象上下文，因此它不会针对真实数据库运行。

```
 private Mock<ICLObjectContext> _clmock = new Mock<ICLObjectContext>(); 
```

对于我的数据单元测试，我做了这样的事情，这样我就可以对我的测试数据库进行测试，并使用事务，我可以在测试后回滚。

```
 //This allows us to remap the schema
        Dictionary<string,string> mappingschemas = new Dictionary<string,string>();
        mappingschemas.Add("CLAPORTAL","CLAPORTALTEST");
        mappingschemas.Add("QCTL","QTEST");
         _context = new CLObjectContext(ec, mappingschemas);
         ObjectFactory.Inject(typeof(ICLObjectContext), _context); 
```

这很好用。问题是当我尝试真正运行该应用程序时。

我不得不删除这个构造函数，只留下一个简单的 0 参数构造函数，以便 Structuremap 可以在运行时创建对象上下文，因此不能进行任何模式映射。

因为 Web 项目没有引用数据层，因此对 ICLObjectContext 一无所知，我如何告诉结构映射，通过一些配置，我想创建一个新字典，将模式 x 映射到模式 y，

服务层有对数据层的引用，所以我猜我需要在那里做，因为 web 项目可以引用服务层。

这会是对的吗？嗯，我刚刚让自己陷入困境，看不到出路。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T08:30:03.173

好吧，再一次，在写出问题之后，它帮助我想出了一个解决方案。

我只是创建了一个名为 ISchemaResolver 的接口，并将其作为共享项目的一部分。

然后我将它放在我的 entityadapter 类的构造函数中。

在 web 项目中，我刚刚创建了一个名为 AppSettingsSchemaResolver 的类，它使用应用程序设置来设置字典，然后通过 global.asax 传递它，当我连接我的依赖项时，即

```
 //Now also set up our schema mapping stuff.
  ObjectFactory.Configure(x => x.For<ISchemaResolver>().Add<AppSettingsSchemaResolver>()); 
```

# java - 当路径和文件名都包含通配符时，列出与正则表达式匹配的文件路径

> ID：11555291
> 
> 赞同：4
> 
> 时间：2012-07-19T06:44:46.210
> 
> 标签：java, regex, file

我们的系统允许文件夹和文件都可以是正则表达式格式。例如

```
/dir1*/abcd/efg.? is legal. 

/dir* could match /dira and also /dirb/cde 
```

我想找到与此模式匹配的所有文件。为了消除不必要的操作，我想获取根目录来启动文件列表和过滤。

是否有任何有效的方法来获取正则表达式路径模式的根目录？

几个测试用例：

```
/abc/def*/bc return /abc
/abc/def*    return /abc
/ab.c/def*   return /
/ab\.c/def*  return /ab.c 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T06:50:29.540

**编辑：**添加了相对路径的处理

```
String path;
String root = path.replaceAll( "((?<=/)|((?<=^)(?=\\w)))(?!(\\w|\\\\\\.)+/.*).*", "" ) ); 
```

这是一个测试：

```
public static void main( String[] args ) throws IOException {
    String[] paths = {"/abc/def*/bc", "/abc/def*", "/ab.c/def*", "/ab\\.c/def*", "abc*", "abc/bc"};
    for ( String path : paths ) {
        System.out.println( path + " --> " + path.replaceAll( "((?<=/)|((?<=^)(?=\\w)))(?!(\\w|\\\\\\.)+/.*).*", "" ) );
    }
} 
```

输出：

```
/abc/def*/bc --> /abc/
/abc/def* --> /abc/
/ab.c/def* --> /
/ab\.c/def* --> /ab\.c/
abc* --> 
abc/bc --> abc/ 
```

你可以从那里微调它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T06:58:08.280

使用这个正则表达式模式

```
^/([a-zA-Z]+[a-bA-Z0-9]+)/?.$ 
```

这将为您提供带有第一个字母应该是字母的额外条件的根路径

如果它也可以是一个数字，你可以简单地使用 -

```
^/([a-bA-Z0-9]+)/?.$ 
```

# wcf - 更新 Windows 服务中托管的 WCF 的 OperationContracts

> ID：11555300
> 
> 赞同：0
> 
> 时间：2012-07-19T06:45:32.880
> 
> 标签：wcf, windows-services, wcf-hosting

我在 Windows 服务中托管了一个 WCF。它工作得很好。但我最近向 WCF 添加了一个新的 Web 方法。但是当我将 wcf 托管在同一个 windows 服务中时，我无法访问新添加的 web 方法，wsdl 不显示新添加的方法。任何想法如何解决这个问题？

# .net - 如何保持 .NET 程序逻辑（合理地）保密？

> ID：11555308
> 
> 赞同：5
> 
> 时间：2012-07-19T06:46:21.407
> 
> 标签：.net, security, obfuscation

对，我说的是桌面应用程序中的许可证验证代码，例如方法`bool ValidateLicense(string licenseCode)`。当然，任何保护方案都可以由熟练且坚定的破解者进行逆向工程。但是，我想防止任何具有一些基本编程知识的人都可以在几分钟内使用 Reflector 构建一个注册机。

可能的方法

1.  *混淆*。我的理解是混淆会导致性能开销，并可能阻碍（合法的）调试。那么是否有工具允许仅对选定的方法进行混淆？

2.  *将方法移动到生成的程序集或非托管 DLL*。但这不是简单地替换 DLL 的邀请吗？任何想法如何防止这种情况（阅读：让攻击者更难）？

3.  *其他*？

PS：问题显然与[保护 .NET 代码免受逆向工程有关？](https://stackoverflow.com/questions/506282/protect-net-code-from-reverse-engineering)试图把那里的想法付诸实践

**更新**

1\. 第一个混淆步骤肯定是重命名验证方法。（谢谢，乔纳森）

2\. 假设应用程序使用 Win32 API 方法，可以通过非托管 DLL 重新路由调用，从而使其成为应用程序的一个组成部分。摆弄方法签名（例如更改名称、交换参数）会使这一点变得不那么明显。你认为先天的缺点是合理的吗？

到 3.*不分发验证方法*属于这里。将其保存在您的服务器上并远程调用，即使用在线验证（谢谢，David Hedlund）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T06:53:38.817

[Eazfuscator](http://www.gapotchenko.com/eazfuscator.net)让您仅在 Release 中混淆您的代码，我们使用它不会感到任何性能问题。它也可以让您混淆选定的方法。请注意，公共方法不能被混淆。

像您的 ValidateLicense 这样的任何功能都可以通过一个良好的反射器轻松修改，在第一行插入一个 return true :( 我向您推荐这篇关于程序集中代码注入的文章：http: [//www.codeproject.com/Articles/20565/Assembly-操作和 C-VB-NET-代码注入](http://www.codeproject.com/Articles/20565/Assembly-Manipulation-and-C-VB-NET-Code-Injection)

您应该签署您的程序集以避免修改，但是......也可以使用适当的工具删除签名：http: [//www.nirsoft.net/dot_net_tools/strong_name_remove.html](http://www.nirsoft.net/dot_net_tools/strong_name_remove.html)

抱歉，在 .Net 中没有任何技巧可以避免逆向工程，你只能让事情变得更难。（例如，不要命名你的函数 ValidateLicense 并使你的验证逻辑有点神秘）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T06:55:59.680

许多软件供应商采用的一种方法是要求在线激活。这样，密钥验证代码只能在您的服务器上执行，这将使潜在的黑客更难以访问。

当然，如果黑客知道或可以提取有关此类响应的预期外观的信息，那么您将引入新的漏洞，即只需将验证调用重新路由到发送成功响应的自定义服务器即可。但是，正如您所指出的，总会有人能够破解您的产品，所以我仍然会说这是一个可行的选择。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-19T06:58:38.530

对验证的三种可能攻击是

1.  通过删除对它的调用来绕过验证
2.  逆向工程验证逻辑以揭示合法代码
3.  逆向工程验证逻辑以允许通过修改环境来满足验证条件

一种方法是在应用程序中的多个点验证许可证——这有助于缓解 1。代码混淆有助于缓解 2 和 3——但最终这是一个棘手的问题。

我的观点是这些方法的组合可以防止基本的程序员窃取你的程序，但话又说回来，如果有什么值得的——那么有人会这样做。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-19T07:14:39.837

我知道这不是答案，但我建议使用 .NET Reactor [http://www.eziriz.com/](http://www.eziriz.com/)，因为它已经具有许可机制（具有各种许可方案）和强大的代码保护机制。

# vb.net - vb.net 自定义数据表类

> ID：11555310
> 
> 赞同：1
> 
> 时间：2012-07-19T06:46:30.847
> 
> 标签：vb.net, class, datatable

我想创建一个自定义数据*表*类，其中*数据行*类属性**“Item”**被重载，以便它返回一个修剪后的值。

我该如何开始？也许是一个例子？

```
Class MyDatatable
Inherits DataTable

Public Overloads Property Item(ByVal columnIndex As Integer) As Object
Get

End Get
Set(value As Object)

End Set
End Property

End Class 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:39:35.387

因为 DataTable 没有`Item`属性，所以没有太多的重载。您真正想做的是从 DataRow 继承，但这不起作用，因为它有一个`DataRowBuilder`不可访问的必需初始化程序 ( )。

也许是这样的：

```
Public Class MyDataTable
  Inherits DataTable

  Public Function Item(ByVal rowIndex As Integer, _
                       ByVal columnIndex As Integer) As Object
    Return MyBase.Rows(rowIndex)(columnIndex).ToString().Trim
  End Function

End Class 
```

它缺少一些明显的错误检查。也不是很实用，因为一个单元格可以容纳更多的类型而不仅仅是字符串。

# iphone - NSoperation如何使用它来等待事件？

> ID：11555317
> 
> 赞同：1
> 
> 时间：2012-07-19T06:46:53.933
> 
> 标签：iphone, ios, nsurlconnection, nsoperation

我有通过 连接到服务器（发送发布请求）的应用程序`NSURLConnection`，并从服务器接收一些数据。我希望这发生在单独线程的后台。我已经看到`NSOperation`用于此目的 - 如本教程所示 -

[并发操作揭秘](http://www.dribin.org/dave/blog/archives/2009/05/05/concurrent_operations/)

但这是一个有点旧的教程（从 2009 年开始），也许找到了一些新的方法来做到这一点。基本上我想要做的是 - 开始`NSOperation`，等待它接收数据（因为如果我不线程将结束，数据将丢失）然后发出数据准备好的信号（也许通过`NSNotificationCentre`）

我发出的请求是异步的，所以我可以使用进度条来等待数据。有什么我可以在 NSOperation 块中调用的东西导致线程休眠直到接收到数据？就像一些等待满足特定条件的循环？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T06:57:31.643

该教程已过时，今天您可以更轻松地编写相同的代码。`NSOperationQueue`为您的请求创建一个，并`NSOperationBlock`结合使用一个同步`NSURLConnection`来下载数据：

```
[queue addOperationWithBlock:^{
    NSError *error = nil;
    NSHTTPURLResponse *response = nil;
    NSMutableURLRequest *request = /* build request */;
    NSData *data = [NSURLConnection
        sendSynchronousRequest:request
        returningResponse:&response
        error:&error];
    /* handle errors and callbacks */
}]; 
```

队列允许您设置并发请求数量的限制，并且还支持免费取消（但不在请求内，当然）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T06:54:26.203

如果您从 Web 获取数据，您可能需要使用[Asihttprequest](http://allseeing-i.com/ASIHTTPRequest/)，它支持队列和同步/异步数据加载。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-19T07:14:08.040

```
NSInvocationOperation *operation = [[NSInvocationOperation alloc]
     initWithTarget:self
     selector:@selector(Method)
     object:nil];
[self.Queue addOperation:operation]; 
```

# php - 通过相同的键将多维数组转换为一维数组

> ID：11555327
> 
> 赞同：0
> 
> 时间：2012-07-19T06:47:25.367
> 
> 标签：php, arrays, multidimensional-array

> **可能重复：**
> [多维数组上的 PHP Array_Sum](https://stackoverflow.com/questions/1404422/php-array-sum-on-multi-dimensional-array)

我有一个二维数组，如下所示。

```
array(
    (int) 0 => array(
        'Chrome' => '10',
        'Firefox' => '3',
        'Internet Explorer' => '1',
        'Safari' => '1',
        'Mobile' => (int) 0,
        'Others' => (int) 0
    ),
    (int) 1 => array(
        'Chrome' => '5',
        'Firefox' => '2',
        'Safari' => '2',
        'Internet Explorer' => '1',
        'Opera' => '1',
        'Mobile' => (int) 0,
        'Others' => (int) 0
    )
) 
```

我想为相同的键添加值并将其放入单个数组中，如下所示。

```
array(
    'Chrome' => '15',
    'Firefox' => '5',
    'Internet Explorer' => '2',
    'Safari' => '3',
    'Opera' => '1',
    'Mobile' => '0'
    'Others' => '0'
) 
```

请给我解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T06:50:13.350

遍历子数组并接管键值对。如果它们存在，请将值（整数算术和运算）添加到现有值。

当您完成迭代子数组时，结果就准备好了。

```
$array = array();
foreach ($subArrays as $subArray)
{
    foreach ($subArray as $key => $value)
    {
        isset($array[$key]) || $array[$key] = 0;
        $array[$key] += (int) $value;
    }
}

// ready, but make all strings:
$array = array_map('strval', $array); 
```

# java - Spring Form taglib 的选项组功能

> ID：11555328
> 
> 赞同：4
> 
> 时间：2012-07-19T06:47:26.657
> 
> 标签：java, spring, select, spring-mvc, taglib

在 HTML 中我们可以写

```
<select name="..." value"...">
 <optgroup label="Category 1">
  <option ... />
  <option ... />
 </optgroup>
 <optgroup label="Category 2">
  <option ... />
  <option ... />
 </optgroup>
</select> 
```

在 Spring`<form>`标签中，我们如何编写诸如分组项目之类的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T10:12:19.157

不幸的是，目前 spring mvc 没有通过它的标签提供这样的功能。这可以通过[这里](http://www.imrantariq.com/blog/option-group-capability-for-spring-mvc-form-taglib/)给出的一个很好的逻辑来实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T08:18:44.857

[https://jira.springsource.org/browse/SPR-3742](https://jira.springsource.org/browse/SPR-3742)仍有待解决。建议而不是使用 form:options 使用 jstl 和 el 来构建列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-11T17:31:03.053

**控制器**

注意集合是`Map<String, List<KeyValueBean>>`.

它存储例如`Group 1 -> { ("Option 1.1 Label","OPTION_1_1_VAL"), ("Option 1.2 Label","OPTION_1_2_VAL"), ..}`

```
@ModelAttribute("careerOptions")
Map<String, List<KeyValueBean>> getCareerOptions() {        
    HashMap<String, List<KeyValueBean>> result = new HashMap<String, List<KeyValueBean>>();
    result.put("Grp1", new ArrayList<KeyValueBean>());
    result.get("Grp1").add(new KeyValueBean("Option 1.1", "OPT_1_1"));
    result.get("Grp1").add(new KeyValueBean("Option 1.2", "OPT_1_2"));
    result.put("Grp2", new ArrayList<KeyValueBean>());
    result.get("Grp2").add(new KeyValueBean("Option 2.1", "OPT_2_1"));

    return result;
} 
```

**JSP**

```
<form:select path="careerSelected" id="careerElement">
    <form:option label="" value="" />
    <c:forEach var="optionGroup" items="${careerOptions}">
       <optgroup label="${optionGroup.key}">
       <c:forEach var="option" items="${optionGroup.value}">
          <form:option label="${option.key}" value="${option.value}" />                             
       </c:forEach>                                                          
       </optgroup>
    </c:forEach>
</form:select> 
```

**KeyValueBean**（我自己创建的，但是 Java 的内置的是[`AbstractMap.SimpleEntry<K,V>`](http://%20%20Controller%20(or%20any%20Base%20Controller))- 你可以使用那个，只是代码有点丑）

```
public class KeyValueBean implements Serializable {

    private static final long serialVersionUID = 1L;

    private String key;
    private String value;

    public KeyValueBean(String key, String value) {
        this.key = key;
        this.value = value;
    }

    public String getKey() {
        return key;
    }
    public void setKey(String key) {
        this.key = key;
    }
    public String getValue() {
        return value;
    }
    public void setValue(String value) {
        this.value = value;
    }

} 
```

**另一种情况：有时 Select 项目是*MIXED*（Flat 与 OptGroup 混合）**

```
A
B
C (subgroup)
  - C.1
  - C.2 
```

在这种情况下，Collection 可以是`Map<String,Object>`每个条目都将被键入到**Object**的地方： （1）String**或**（2）HashMap，我们将从 JSP 中发现。

**混合数据结构的控制器**

```
@ModelAttribute("careerOptionsMixed")
Map<String, Object> getCareerOptionsMixed() {

    LinkedHashMap<String, Object> result = new LinkedHashMap<String, Object>();

    result.put("Flat Option 1", "OPT_1_FLAT");
    result.put("Group Option 2", myHashMap); // Fill out your HashMap for Group (Key->Value) and add it here
    result.put("Flat Option 3", "OPT_3_FLAT");

    return result;
} 
```

**用于 MIXED 数据结构的 JSP（确定 Collection 与否所需的技巧，通过迭代和设置 var 完成）** 在 JSP 中，我们需要确定我们得到的是 Collection 还是 String。唯一的方法是通过迭代和设置一个变量。

```
<form:select path="career" id="careerField">
   <form:option label="" value="" />
   <c:forEach var="optionOrOptionGroup" items="${careerOptionsMixed}">
      <%--  Must use iteration to find out if this is a Collection or not: https://stackoverflow.com/a/1490171/1005607 --%>
      <c:set var="collection" value="false" />
      <c:forEach var="potentialOptionGroup" items="${optionOrOptionGroup.value}" varStatus="potentialOptionGroupStatus">
         <c:if test="${potentialOptionGroupStatus.index > 0}">
            <c:set var="collection" value="true" />
         </c:if>
      </c:forEach>
      <c:choose>
         <c:when test="${collection eq true}">
            <%--  Now we know this is a LinkedHashMap --%>
            <optgroup label="${optionOrOptionGroup.key}">
               <c:forEach var="optionGroup" items="${optionOrOptionGroup.value}">
                  <form:option label="${optionGroup.key}" value="${optionGroup.value}" />
               </c:forEach>
            </optgroup>
         </c:when>
         <c:otherwise>
            <%--  Now we know this is a flat String --%>
            <form:option label="${optionOrOptionGroup.key}" value="${optionOrOptionGroup.value}" />
         </c:otherwise>
      </c:choose>
   </c:forEach>
</form:select> 
```

# android - android sms sendtextmessage 抛出 readexception

> ID：11555329
> 
> 赞同：0
> 
> 时间：2012-07-19T06:47:31.357
> 
> 标签：android, exception, sms, parcel

我正在使用以下代码从我的应用程序发送短信。它在我的 Galaxy pop 设备上运行良好。但是在 Premium Galaxy 设备中获得 Readexception。请让我知道可能是什么问题。

```
SmsManager smgr = SmsManager.getDefault();

        String msisdn = "8277335968"; //test
         Intent intent = new Intent("SMS_SENT");
         PendingIntent sentIntent = PendingIntent.getBroadcast(this, 0,
              intent, PendingIntent.FLAG_ONE_SHOT);

    PendingIntent deliveryIntent = null;
    String scAddress = null;
    String message = "12345678+23823#21328&121";

    smgr.sendTextMessage(msisdn, scAddress, message, sentIntent, deliveryIntent); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T06:59:43.250

`android.telephony.gsm.SmsManager`现在已弃用。

确保您正在使用`android.telephony.SmsManager`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-24T17:09:03.110

请在应用程序标记之前包括以下清单文件的权限

```
<uses-permission android:name="android.permission.RECEIVE_SMS" />
<uses-permission android:name="android.permission.SEND_SMS" />
<uses-permission android:name="android.permission.READ_SMS" /> 
```

# vim - Vim 跳转到下一个匹配项而不影响搜索模式

> ID：11555330
> 
> 赞同：4
> 
> 时间：2012-07-19T06:47:53.917
> 
> 标签：vim

有没有办法在不影响搜索历史的情况下跳转到 VIM 中的固定字符串？

说我想用键`;f`跳到下一个`function`，然后`;s`到下一个`section`。

我可以做这个：

```
nmap ;f /function<CR>
nmap ;s /section<CR> 
```

这些工作正常，但它们会覆盖最后的搜索模式。我想跳坚果保留旧的搜索字符串。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T07:22:47.523

你可以调用vim函数`search()`

```
nmap ;f :call search('function')<CR>
nmap ;s :call search('section')<CR> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T07:49:14.550

kev 的回答很简单，很好；对于更高级的方法，您可以使用我的[CountJump 插件](http://www.vim.org/scripts/script.php?script_id=3130)。有了它，您可以定义向后/向前跳转到第 [count] 次出现的映射，`function`在没有匹配项时发出哔声等。

# android - android中的多种布局

> ID：11555331
> 
> 赞同：0
> 
> 时间：2012-07-19T06:47:55.027
> 
> 标签：android, android-lazyadapter

我有一个查询。

我为多个设备做了不同的布局。

例如。

layout-sw720dp // 10寸平板 layout-sw600dp // 7寸平板

如果设备是 620dp，那么 android 会选择哪个布局。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T06:52:34.287

对于以编程方式检查设备将在运行时拾取的布局的通用方法，您可以使用[上一个 SO question](https://stackoverflow.com/a/11442320/1482726)中的解决方法。

# java - yield 在这里如何工作？

> ID：11555334
> 
> 赞同：1
> 
> 时间：2012-07-19T06:48:15.553
> 
> 标签：java, multithreading, concurrency

方法`Thread.yield`：

> 使当前正在执行的线程对象暂时暂停并允许其他线程执行。

所以在下面的代码中：

```
public class Test implements Runnable {  

    private int stopValue;  

    public Fib(int stopValue){  
        this.stopValue = stopValue;  
    }  

    @Override  
    public void run() {  

        System.out.println("In test thread");  
        for(int i = 0; i < stopValue; i++){  
            c = i + 1;  
        }  

        System.out.println("Result = "+c);        
    }  

    public static void main(String[] args){  
        int defaultStop = 1024;  
        if(args.length > 0){   
            defaultStop = Integer.parseInt(args[0]);  
        }  
        Thread a = new Thread(new Fib(defaultStop));  
        System.out.println("In main");  
        a.setDaemon(true);  
        a.start();  
        Thread.yield();       
        System.out.println("Back in main");  
    }  

} 
```

我希望我应该看到：

1.  `In main` 然后
2.  `In test thread`

其余的将是未定义的。但我不明白为什么有时我只看到： `In main`而`Back in main`不是`Test`线程中的任何打印语句？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T06:52:12.243

yield() 是对已调度操作系统的提示，但在调度方面不提供任何保证。它并不总是停顿很长时间。如果你重复调用它可能只需要几微秒。

启动线程需要时间，即使主线程短暂暂停，它也可能在后台线程启动之前完成。

* * *

如您所见，yield() 暂停非常短暂。

```
long start = System.nanoTime();
long runs = 20000000;
for (int i = 0; i < runs; i++)
    Thread.yield();
long time = System.nanoTime() - start;
System.out.printf("Thread.yield() took an average of %,d ns.%n", time / runs); 
```

印刷

```
Thread.yield() took an average of 148 ns. 
```

相比之下，System.nanoTime 在我的机器上花费的时间更长。

```
long start = System.nanoTime();
long runs = 20000000;
for (int i = 0; i < runs; i++)
    System.nanoTime();
long time = System.nanoTime() - start;
System.out.printf("System.nanoTime() took an average of %,d ns.%n", time / runs); 
```

印刷

```
System.nanoTime() took an average of 656 ns. 
```

这两个时间都会因操作系统和机器而异。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T07:28:22.243

好吧，yield() 可能什么都不做，因为准备好的线程集少于内核数，在这种情况下，两个线程都可以运行，而 main() 将继续运行到它正在运行的内核上操作系统问题，（很可能是队列），调用其内核间驱动程序以在另一个 CPU 内核上运行新线程。然后是与“System.out.println”的交互——一个可能受互斥体保护的输出流调用。

对于 yield() 在不同环境/CPU/OS 中的实际作用，我无法快速找到任何可以理解的解释——这是我从未使用过它的原因之一。另一个是无论它如何工作，我都想不出它有什么用处。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T06:52:28.190

在线程有机会启动之前，主进程可能已经退出。不能保证`Thread.yield()`会强制线程在任何特定时间运行。如果线程没有启动，那么`setDaemon()`就没有效果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T14:20:19.097

@Peter 的回答很好，但我想添加一些额外的信息作为答案。

首先，正如其他地方所提到的，`a.setDaemon(true)`导致 JVM在退出之前*没有*等待`Thread a`完成。如果您真正的问题是如何确保在 JVM 关闭*之前*`Thread a`它是否正常工作，那么删除它可能是解决方案。当 JVM 退出时，守护线程可以被杀死。将等待非守护线程。因此该方法可能会返回并且主线程可能会退出，但您仍会运行到完成。*`setDaemon(true)``main()``Thread a`*

 *`Thread.yield()`正如您所提到的，就 javadocs而言：

> 使当前正在执行的线程对象暂时暂停并允许其他线程执行。

然而，这有点误导。例如，如果您的架构上有 2 个线程在运行，并且有 2 个或更多处理器，那么`yield()`实际上将是无操作的。运行队列中没有其他线程正在等待处理器资源，因此主线程将被快速重新调度并以最小的暂停继续运行。

即使您在单个 CPU 系统上运行并且`Main`确实如此`yield()`，您也会`Thread a`去做一个`System.out`IO。IO 可能会阻塞导致线程执行立即切换回`Main`。

归根结底，只有在非常独特的情况下才`yield()`需要使用。我做过*很多*多线程编程，但我从未使用过它。除非您有分析器输出或相反的专家建议，否则始终建议您相信 JVM 线程调度将在时间切片方面“做正确的事情”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T07:29:00.113

尝试将 Thread.yield() 替换为：

```
try {
        Thread.sleep(500);
    } catch (InterruptedException ex) {
        System.out.println(ex);
    } 
```*

# windows-phone-7 - 获取寡妇电话列表框的第一个和最后一个可见元素

> ID：11555336
> 
> 赞同：1
> 
> 时间：2012-07-19T06:48:20.853
> 
> 标签：windows-phone-7, silverlight-4.0, windows-phone-7.1

我如何获得 Windows Phone 列表框的第一个和最后一个可见元素。我的要求是基于滚动加载列表项。更多详细信息：我正在使用长列表选择器来显示项目。它包含两个列表层次结构。一个列表用于显示标题项目，另一个用于显示分组项目。在初始加载时，我将获得用于获取列表子项的标题和 url。所以在这里我需要基于滚动加载这个列表项（子项）。我的清单包含大量项目，因此我采用了这种方法。请任何人分享一些想法以在我的应用程序中实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T07:30:03.690

查看[Colin 的解决方案](http://www.scottlogic.co.uk/blog/colin/2011/03/metro-in-motion-part-2-peel-animations/)。

这是相关的片段：

```
VirtualizingStackPanel vsp = itemsControl.Descendants<VirtualizingStackPanel>()
                                         .First() as VirtualizingStackPanel;

// iterate over each of the items in view
int firstVisibleItem = (int)vsp.VerticalOffset;
int visibleItemCount = (int)vsp.ViewportHeight; 
```

我以前用过它，它可以工作。请注意，这两个属性都是常规属性，而不是依赖属性。如果您想绑定到它们。

# oracle - 在一列中合并两列

> ID：11555337
> 
> 赞同：0
> 
> 时间：2012-07-19T06:48:22.007
> 
> 标签：oracle, plsql, oracle11g, plsqldeveloper

我有一个非常不寻常的任务，我越想我就越容易去邮局。

数据如下所示：

```
-----------------------------------------------------------------------------------------
| user_id | prof_org_id | prof_org_fi | prof_org_pos_fi | prof_org_en | prof_org_pos_en |
 ----------------------------------------------------------------------------------------
| 3600520 |   70000     |1100         |  as             |  1600       |   ad            |
|  1020   |   80000     |  0          |                 |     0       |                 |  
| 3600520 |   90000     | 2500        | bs              |  1700       |   bd            |
| 3600624 |   100000    |100          |   d             |  1002       |    c            |
----------------------------------------------------------------------------------------- 
```

现在我想要的是：

```
------------------------------------------------
| user_id | prof_org_fi     | prof_org_en      |
 -----------------------------------------------
| 3600520 | 1100,as;2500,bs | 1600,ad;1700,bd | 
|  1020   |    0,           |   0,             |  
| 3600624 |  100,d          |  1002,c          |
------------------------------------------------ 
```

我认为它需要一些功能，不是吗？提前致谢

```
create table USER_MULTI_PROF_ORGS
(
  USER_ID              INTEGER not null,
  PROF_ORG_ID          INTEGER not null,
  PROF_ORG_FI          VARCHAR2(128),
  PROF_ORG_POS_FI      VARCHAR2(4000),
  PROF_ORG_EN          VARCHAR2(128),
  PROF_ORG_POS_EN      VARCHAR2(4000),
);

insert into USER_MULTI_PROF_ORGS (USER_ID, PROF_ORG_ID, PROF_ORG_FI, PROF_ORG_POS_FI, PROF_ORG_EN, PROF_ORG_POS_EN)
values (3600520, 70000, '1100', 'ad', '1600', 'ad');
insert into USER_MULTI_PROF_ORGS (USER_ID, PROF_ORG_ID, PROF_ORG_FI, PROF_ORG_POS_FI, PROF_ORG_EN, PROF_ORG_POS_EN)
values (1020, 80000, '0', null, '0', null);
insert into USER_MULTI_PROF_ORGS (USER_ID, PROF_ORG_ID, PROF_ORG_FI, PROF_ORG_POS_FI, PROF_ORG_EN, PROF_ORG_POS_EN)
values (3600520, 90000, '2500', 'bs', '1700', 'bd');
insert into USER_MULTI_PROF_ORGS (USER_ID, PROF_ORG_ID, PROF_ORG_FI, PROF_ORG_POS_FI, PROF_ORG_EN, PROF_ORG_POS_EN)
values (3600624, 100000, '100', 'd', '1002', 'c'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T08:16:03.320

如果您使用的是 Oracle 11g R2，请查看 LISTAGG 函数。

# java - 如何在java中从父类对象加载子对象

> ID：11555338
> 
> 赞同：1
> 
> 时间：2012-07-19T06:48:22.807
> 
> 标签：java, hibernate, class, jakarta-ee, inheritance

我有这门课

`interface UserInterface`

然后

`abstract class user implements UserInterface`

然后我有两个孩子班

`Class Teacher extends User`

`Class Parent extends User`

现在在数据库中我有三个表

1.  `user table with id,password`
2.  `teacher with FK and other stuff`
3.  `parent with FK and other stuff`

现在我正在使用 User 类检查登录。

我的问题是，如果员工登录，那么内存中的对象将是用户类型。那么我怎样才能得到 Employee 对象

我的模型错了吗，我需要采取不同的方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T07:10:43.917

假设 Employee 是 User 的第三个子类，那么如果一个用户登录，并且你使用 Hibernate 从数据库中获取了这个用户，而这个用户实际上是一个员工，那么 Hibernate 将返回一个 Employee 实例。它可以按您的预期工作。

如果没有，那么你做错了什么，但如果不看代码就无法判断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T07:22:04.567

如果你向 hibernate 询问 type 的 Object `User`，你总是会得到 a `UserEnhancedByCGLib`（或类似的东西）。您不能（原则上）将其转换为 a`Teacher`或 a `Parent`。

你有两个选择来解决这个问题。

1）您在登录时知道用户实际上是教师/家长，而不是您最初向休眠询问教师/家长对象而不是用户对象。

2）您在登录时不知道，一旦您真正需要教师/家长的专业化，您就必须使用 User 对象并对数据库进行第二次查询。

第 2 项的一种方法是：

```
public Object refresh(Object object) {
    if (object != null) {
        if (object instanceof HibernateProxy) {
            return ((HibernateProxy) object).getHibernateLazyInitializer().getImplementation();
        }
    }
    return object;
} 
```

哪个（如果有记忆的话）会给你一个具体的类，但一个分离的对象。

# ios - iOS推送/弹出视图控制器内存仍在增加

> ID：11555339
> 
> 赞同：2
> 
> 时间：2012-07-19T06:48:25.830
> 
> 标签：ios, xcode, memory

我正在测试我的 iPhone 应用程序的内存。xcode 4.2.1，ios 5.0+，使用 ARC

我有两个视图控制器。第一个有一个 UIButton 网格，第二个视图控制器有关于用户触摸的按钮的详细信息。我正在使用推送segue。

我正在使用标记堆工具来测量堆增长。我触摸一个按钮，然后单击返回，然后单击“标记堆”，我这样做了几次。我的每个堆的标记堆增长在 1-2 mb 之间。

我预计堆增长为零。在更详细的描述中，我看到堆增长是由于非对象。我使用了泄漏工具，它没有显示任何泄漏的内存。

**堆增长的原因可能是什么？我如何解决它？**

**弹出一个 UIViewController 是什么意思？当我单击导航栏中的后退按钮时，它是否会完全删除 UIViewController 并从内存中释放 UIViewController 和子视图？还是我需要手动做一些事情？**

谢谢！我很困惑...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T08:54:42.793

确保每次单击按钮时都没有创建下一页类的对象。使用 if(!objVC) 之类的检查然后做一些事情..

这将使您的类只分配一次，并且您必须在 viewDIdUnload 的 viewWillDisappear 的下一页上管理对象的数据。

# java - 无法在下面的代码中计算运行时错误

> ID：11555342
> 
> 赞同：2
> 
> 时间：2012-07-19T06:48:38.263
> 
> 标签：java

嗨，我无法在以下问题中计算运行时错误，请任何人解决

```
import java.util.Scanner;

class Solution6 {
    public static void main(String[] args)
    {
        boolean condition = false;
        do
        {
            Scanner scanner = new Scanner(System.in);
            String value = scanner.nextLine();
            condition = value.equalsIgnoreCase("exit");
            if(!condition && value.contains(","))
            {
                calculate(value);
            }
        } while (!condition);
    }

    private static void calculate(String value)
    {
        final String[] event1 = value.split(",");
        int ss = 0;
        for ( int i = 0; i < event1[0].length(); ++i )
        {
            char c = event1[0].charAt( i );
            ss += (int) c;
        }
        int sd = 0;
        for ( int i = 0; i < event1[1].length(); ++i )
        {
            char c = event1[1].charAt( i );
            sd += (int) c;
        }

        System.out.println(ss-sd);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T07:05:51.113

问题是，如果用户提供带有逗号 ( `,`) 的输入并且逗号是最后一个字符（或唯一字符），那么`event1`最多将有 1 个元素：`event1[0]`。该元素`event1[1]`将不存在，因此您会得到一个`ArrayIndexOutOfBoundsException`.

仅当输入如下时才会发生这种情况：`bgh,`，`afsfgf,`甚至`,`。

您可以通过检查数组`event1`包含的元素数量来解决此问题。

# eclipse - Eclipse Juno 的 GUI 构建器

> ID：11555343
> 
> 赞同：8
> 
> 时间：2012-07-19T06:48:40.610
> 
> 标签：eclipse, swt, eclipse-juno, gui-builder

您知道任何与 Eclipse Juno (4.2) 兼容的 SWT GUI 构建器吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-19T07:11:37.473

窗口构建器的正确入口站点是[http://www.eclipse.org/windowbuilder/](http://www.eclipse.org/windowbuilder/)。Google 更新站点仍然有效，但 Window Builder 现在是一个 Eclipse 项目，主要更新站点托管在 Eclipse 上。在那里，您还可以找到 Juno 官方更新站点的链接 ( [http://download.eclipse.org/windowbuilder/WB/release/R201206261200/4.2/](http://download.eclipse.org/windowbuilder/WB/release/R201206261200/4.2/) ) 以及更新站点的 ZIP 下载链接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T07:01:44.130

呃……这个很快。尽管如此，我还是把这个问题留给遇到同样问题的每个人，因为到目前为止，Juno 的官方 GUI 构建器很少或没有。

我被 Window Builder 下载站点 (https://developers.google.com/java-dev-tools/download-wbpro) 误导了，该站点不包含 Juno 的链接。尝试在 Juno 中安装 3.7 版本将失败。

但是，Juno 的存储库似乎确实存在。诀窍是修改存储库 URL：

名称：Window Builder 插件 URL：http: [//dl.google.com/eclipse/inst/d2wbpro/latest/4.2](http://dl.google.com/eclipse/inst/d2wbpro/latest/4.2)

Window Builder 然后正确安装。

# hadoop - sqoop 导出通过 oozie 失败

> ID：11555344
> 
> 赞同：2
> 
> 时间：2012-07-19T06:48:43.673
> 
> 标签：hadoop, sqoop, oozie

我正在尝试将数据从通过导出到`mysq`l 。我能够通过 shell 运行 sqoop 并且工作正常。但是当我通过. 它出现以下错误并失败。我还包括罐子。没有详细的日志`hdfs``sqoop``oozie`

sqoop 脚本：

```
export  --connect jdbc:mysql://localhost/bigdata --username root --password cloudera --verbose --table AGGREGATED_METRICS --input-fields-terminated-by '\0001' --export-dir /bigdata/aggregated_metrics 
```

错误：

```
Launcher ERROR, reason: Main class [org.apache.oozie.action.hadoop.SqoopMain], exit code [1] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T08:07:00.233

您在 Oozie 中看到的错误通常不会提供太多细节。要获取有关问题所在的更多信息，您可以从 Oozie 操作中获取 job_id 并在 JobTracker 日志中搜索它。在那里你会找到更详细的描述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T23:15:29.330

我相信您需要将具有所有依赖项的 Sqoop jar 安装到 Oozie（共享目录或您的特定工作流程）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-19T10:50:43.630

是的，将 mysql-connector-java-*.jar 添加到工作流 lib 目录可以解决问题。但是很难为每个 sqoop 作业复制 jar。

将 mysql-connector-java-*.jar 一次添加到 HDFS 中的 share/lib/sqoop 目录会更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-30T12:51:18.540

我有同样的问题。当我将 mysql-connector-java.jar 库添加到位于 job.properties 和 workflow.xml 文件所在的 oozie 项目根目录内的 lib 目录中时，这个问题就消失了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-30T03:14:03.867

此处的错误消息不够详细。另一件事是，在工作流 sqoop 操作中，可以尝试使用

```
\0001 
```

代替

```
'\0001' 
```

# java - 更新小部件和活动的数据

> ID：11555345
> 
> 赞同：1
> 
> 时间：2012-07-19T06:48:51.700
> 
> 标签：java, android, web-services, rest

所以我有一个提供一些数据的 Web 应用程序...假设我查询[http://www.myserver.com/?id=Apples](http://www.myserver.com/?id=Apples)应用程序返回苹果的当前价格（应用程序知道许多其他水果）。我将水果的名称和价格保留在我的数据库中的表格中。我要做的是在我的主要活动中显示所有水果和当前价格的列表（当开始时从数据库中读取它们），但也让用户能够在屏幕上放置显示 1 个水果价格的小部件（假设一个小 1x1 小部件）。

故事就是这样……我想做的就是在我的数据库中不断更新水果价格（假设每 30 分钟一次）。我还希望我的小部件知道数据库何时更新以显示新价格）。

实现这一点的最佳模式是什么（这可能很常见）...AsyncTask、Service、Service + ALarm 等所有其他组合？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T07:09:04.107

你是对的，这个问题确实经常出现。完成这项工作的最快方法是使用一个`IntentService`（它会自动排队并在单独的线程上运行您的任务）和一个警报来触发它。

更完整的解决方案是使用`AccountManager`//组合`SyncAdapter`。`ContentProvider`SDK 版本中包含的 API 示例包含一个示例；此外，[这篇博文](http://ericmiles.wordpress.com/2010/09/22/connecting-the-dots-with-android-syncadapter/ "使用 Android SyncAdapter 连接点")似乎很有用。

我想补充一点，因为这属于 RESTful Web 服务的类别，您可能会发现[有关开发 RESTful 应用程序的 Google I/O 视频](http://www.youtube.com/watch?v=xHXn3Kg2IQE)非常有用。

# python - Django urlconf 问题（知道必须有一个简单的答案）

> ID：11555352
> 
> 赞同：1
> 
> 时间：2012-07-19T06:49:29.497
> 
> 标签：python, django, web, urlconf

嗨，我是 django 的初学者，部署站点所剩下的只是一个愚蠢的 url conf 问题。我有一个简单的网站，有 5 个页面`home,contact,about,reasons, and benefits`。很简单，url conf 将是`(r'^home/$',index)`，其余页面如下所示。这是我去主页时的问题`/home/`。现在转到导航上的任何其他页面，例如`/reasons/`or `/about/`，它们不会像那样被调用，而是被调用`/home/reasons/`or `/home/about/`。更是如此，如果从`/home/about/`我点击返回主页呼叫是`/home/about/home`. 如您所见，这将永远持续下去。怎么可能对页面的每个请求都是简单的`/about/`或者`/contact/`不是`/home/contact or /home/about`.

我已经定义了一个，`/home/contact/home/home/about/reasons/home`我不可能把所有这些都放在 urlconf 中

注意：这一切都在 django 开发服务器上运行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T07:41:33.857

确保在您的模板中使用的是绝对 URL，所以不要

```
<a href="contacts">Contacts</a> 
```

它应该是

```
<a href="/contacts/">Contacts</a> 
```

并且您的模板中**没有** [基本标记](http://www.w3schools.com/tags/tag_base.asp)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T07:53:15.093

如果您的网址如下所示：

```
(r'^home/$', myapp.views.index) 
```

然后在模板中使用它：

```
<a href="{% url myapp.views.index %}>some text</a> 
```

以避免错误的解释。Django 将完成其余的工作。

对于 Django 1.5 使用

```
<a href="{% url 'myapp.views.index' %}>some text</a> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T07:45:03.607

确保页面上的链接看起来像

```
<a href="/home/">...</a> <-- this will take you to home page 
```

并不是

```
<a href="home/">...</a> <-- this will take you to {current_url}/home/ 
```

# c# - 计算两点之间的距离

> ID：11555355
> 
> 赞同：17
> 
> 时间：2012-07-19T06:49:54.687
> 
> 标签：c#

我有两个点 (x1,y1) 和 (x2,y2)。我想知道这些点是否在 5 米范围内。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2016-06-28T21:22:29.610

如果您使用[`System.Windows.Point`](https://msdn.microsoft.com/en-us/library/system.windows.point(v=vs.110).aspx)数据类型来表示一个点，您可以使用

```
// assuming p1 and p2 data types
Point p1, p2;
// distanc can be calculated as follows
double distance = Point.Subtract(p2, p1).Length; 
```

* * *

2017-01-08 更新：

*   添加对 Microsoft 文档的引用
*   结果`Point.Subtract`是[System.Windows.Vector](https://msdn.microsoft.com/en-us/library/system.windows.vector(v=vs.110).aspx) ，如果您只需要比较距离，它还具有`LengthSquared`保存一次计算的属性。`sqrt`
*   `WindowsBase`在您的项目中可能需要添加对程序集的引用
*   您还可以使用运算符

`LengthSquared`与运算符的示例

```
// assuming p1 and p2 data types
Point p1, p2;
// distanc can be calculated as follows
double distanceSquared = (p2 - p1).LengthSquared; 
```

* * *

2021 年 11 月 15 日更新：

不幸的是，`System.Windows.Point`并且`WindowsBase`仅在`.Net Framework`. 它不是`.NET`, `.NET standard`,的一部分`.NET core`。

`System.Drawing.Point`并且`System.Drawing.PointF`没有任何可用的方法和运算符，它们只是容器。

有趣的是`System.Numerics.Vector2`，这可能是`System.Windows.Point`. 它具有类似的 API，并且适用于所有`.NET`缺陷。但是，语义很奇怪——使用向量表示点。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-07-19T06:57:03.180

测量一点到另一点的平方距离：

```
((x1-x2)*(x1-x2)+(y1-y2)*(y1-y2)) < d*d 
```

其中 d 是距离，(x1,y1) 是“基点”的坐标，(x2,y2) 是要检查的点的坐标。

或者，如果您愿意：

```
(Math.Pow(x1-x2,2)+Math.Pow(y1-y2,2)) < (d*d); 
```

注意到首选的是出于速度原因根本不调用 Pow ，而第二个可能更慢，也不会调用`Math.Sqrt`，总是出于性能原因。在您的情况下，这种优化可能为时过早，但如果必须多次执行该代码，它们会很有用。

当然你说的是米，我想点坐标也用米表示。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2016-10-03T20:46:43.580

c# 中这样的东西可能会完成这项工作。只需确保您传递的单位一致（如果一个点以米为单位，请确保第二个也是以米为单位）

```
private static double GetDistance(double x1, double y1, double x2, double y2)
{
   return Math.Sqrt(Math.Pow((x2 - x1), 2) + Math.Pow((y2 - y1), 2));
} 
```

像这样调用：

```
double distance = GetDistance(x1, y1, x2, y2)
if(distance <= 5)
{
   //Do stuff
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-19T06:51:52.407

给定点 (X1,Y1) 和 (X2,Y2) 然后：

```
dX = X1 - X2;
dY = Y1 - Y2;

if (dX*dX + dY*dY > (5*5))
{
    //your code
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-11-10T03:52:19.823

这是我的 2 美分：

```
double dX = x1 - x2;
double dY = y1 - y2;
double multi = dX * dX + dY * dY;
double rad = Math.Round(Math.Sqrt(multi), 3, MidpointRounding.AwayFromZero); 
```

x1, y1 是第一个坐标，x2, y2 是第二个坐标。最后一行是平方根，四舍五入到小数点后 3 位。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-03-05T13:19:30.590

如果你使用 System.Drawing.Point ；

```
Point p1 = new Point();
Point p2 = new Point(); 
```

`Math.Pow(Math.Pow(p1.X - p2.X, 2) + Math.Pow(p1.Y - p2.Y, 2), 1 / 2);`

如果你像 wpf 一样使用 System.Windows.Point；

`Point.Subtract(_p1, _p2).Length;`

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2019-12-12T06:37:58.687

您可以使用以下公式来查找 2 点之间的距离：

```
distance*distance = ((x2 − x1)*(x2 - x1)) + ((y2 − y1)*(y2 - y1)) 
```

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2012-07-19T07:00:35.037

算法： ((x1 - x2) ^ 2 + (y1 - y2) ^ 2) < 25

# php - 对我要在购物车上做什么感到困惑

> ID：11555356
> 
> 赞同：2
> 
> 时间：2012-07-19T06:49:55.057
> 
> 标签：php, zen-cart

购物车上的更新功能有参考吗？例如可以更改产品数量等的功能。谢谢提前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T17:53:57.237

没有功能可以做到这一点。整个购物车页面是一个表单，您基本上只需在更新购物车时提交表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-18T07:46:07.280

The cart is stored in $_SESSION['cart'], which is a shoppingCart object.

You can find the code at includes/classes/shopping_cart.php.

Functions include:

```
reset($reset_database=false) // empty cart
add_cart($products_id, $qty = '1', $attributes = '', $notify = true) // add an item to the cart
update_quantity($products_id, $quantity = '', $attributes = '') // update quantity of a product
remove($products_id) // remove an item from cart 
```

There are well documented in the comments. See the class definition for more functions.

Example on how to use:

```
$_SESSION['cart']->add_cart($products_is, $quantity); 
```

There is folder /includes/extra_cart_actions, where you can place your own php files, which are executed during cart actions (add, remove, update).

# java - 如何在Java中将csv字节字符串转换为字节数组？

> ID：11555357
> 
> 赞同：1
> 
> 时间：2012-07-19T06:49:55.097
> 
> 标签：java, arrays, string, bytearray, type-conversion

我有一个 csv 字符串到字节，我想将它转换为 java 字节数组。谁能帮我。

csv 字符串

```
167, 27, 32, 195 
```

字节数组应该是这样的

```
byte[0] should give me 167
byte[1] should give me 27
byte[2] should give me 32
byte[3] should give me 195 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T07:09:54.947

您可以使用字符数组。该`char`类型旨在表示 Java 中的字符。

```
String csv = "167, 27, 32, 195";
String[] numbers = csv.split(", ");
char[] chars = new char[numbers.length];
for (int i = 0; i < numbers.length; i++)
    chars[i] = (char)Integer.parseInt(numbers[i]); 
```

此方法假定 CSV 文件中的数字是字符的 Unicode 代码点。

# javascript - 谷歌地图没有居中地图？

> ID：11555358
> 
> 赞同：0
> 
> 时间：2012-07-19T06:50:05.887
> 
> 标签：javascript, google-maps

所以我在同一个网页上有两张谷歌地图。该页面由许多 div 组成，这些 div 使用 jQuery 隐藏和显示，如下所示：

```
$('a#FibreTrigger').click(function () {
    clearTabs();

    $('#FibreTab').show();
    $('a#FibreTrigger').addClass('active');
    google.maps.event.trigger(fibreMap, 'resize');
    return false;
});

//hide all of the tabs
function clearTabs() {
    $('#OptusTab').hide();
    etc.

    $('a#OptusTrigger').removeClass('active');
    etc.
} 
```

（调整大小触发器用于地图在某些情况下无法正确显示）如果我将两个地图都设置为可见然后加载地图，那么一切都很好，地图完全按预期工作。

但是，如果其中一张地图在加载时被隐藏，我会遇到一个奇怪的问题。地图显示，图层、标记等都在地图上，但地图的中心应该在左上角。

这不是一个大问题，但我想知道我是否做错了什么，或者这是否是我正在做的事情的一个不可避免的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T06:56:19.193

几天前我遇到了同样的问题，这是因为您在加载地图之前加载图层和标记，首先加载地图，然后创建标记和图层。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T06:58:10.227

在你的“body”标签上，我猜你有某种 initialize() 或 load() 函数？您是否尝试过，而不是在页面加载时调用此函数，而是在显示带有地图的 div 时调用它？

# java - 如何在一个属性不同的两个数组列表中找到共同的员工？

> ID：11555362
> 
> 赞同：2
> 
> 时间：2012-07-19T06:50:17.917
> 
> 标签：java, arraylist

我有两个数组列表。每个都有 Employee 类型的对象列表。

Employee 类如下所示

```
 public class Employee {

    private int id; // this is the primary key from employee table

    private String firstname;

    private String lastname;

    private String employeeId; // manually assigned unique id to each employee

    private float fte;

    Employee(String firstname, String lastname, String employeeId, float fte) {
        this.firstname = firstname;
        this.lastname = lastname;
        this.employeeId = employeeId;
        this.fte = fte;
    }

    // getters and setters
} 
```

员工 ID 是手动生成的给每个员工的唯一 ID。

我需要根据具有不同 fte 的员工 id 找到两个列表之间的共同员工。

```
 import java.util.ArrayList;
import java.util.List;

public class FindFTEDifferencesBetweenMatchingEmployeeIds {

    public static void main(String args[]) {
        List<Employee> list1 = new ArrayList<Employee>();
        List<Employee> list2 = new ArrayList<Employee>();

        list1.add(new Employee("F1", "L1", "EMP01", 1));
        list1.add(new Employee("F2", "L2", "EMP02", 1));
        list1.add(new Employee("F3", "L3", "EMP03", 1));
        list1.add(new Employee("F4", "L4", "EMP04", 1));
        list1.add(new Employee("F5", "L5", "EMP05", 1));
        list1.add(new Employee("F9", "L9", "EMP09", 0.7F));

        list2.add(new Employee("F1", "L1", "EMP01", 0.8F));
        list2.add(new Employee("F2", "L2", "EMP02", 1));
        list2.add(new Employee("F6", "L6", "EMP06", 1));
        list2.add(new Employee("F7", "L7", "EMP07", 1));
        list2.add(new Employee("F8", "L8", "EMP08", 1));
        list2.add(new Employee("F9", "L9", "EMP09", 1));

        List<FTEDifferences> commonInBothListWithDifferentFTE = new ArrayList<FTEDifferences>();
        // this should contain EMP01 and EMP09
        // since EMP02 has same FTE in both lists, it is ignored. 

    }
} 
```

员工 ID 为 EMP01 和 EMP09 的员工在这两个列表中都很常见，而且他们在每个列表中也有不同的 ftes。

所以，我想要另一个包含这两名员工的列表。

```
 public class FTEDifferences {

    private Employee fromList1;

    private Employee fromList2;

    public Employee getFromList1() {
        return fromList1;
    }

    public void setFromList1(Employee fromList1) {
        this.fromList1 = fromList1;
    }

    public Employee getFromList2() {
        return fromList2;
    }

    public void setFromList2(Employee fromList2) {
        this.fromList2 = fromList2;
    }
} 
```

请帮忙。

PS。即使在 SQL 中执行此操作很容易，但我无法在 SQL 查询中执行此操作，因为我无法修改查询。我只需要处理两个给定的列表。:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T06:54:50.593

将`equals()`,`hashcode()`和`compareTo()`方法添加到您的`Employee`类中。然后你可以尝试和设置操作，比如`retainAll()`或`removeAll()`从`Collections`静态类。

如果要在任何时候以任何方式比较它们，最好将这些方法添加到类中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T06:55:28.967

覆盖 hashcode 和 equals() 方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T07:21:22.717

覆盖`equals` 方法如下。

```
@Override
public boolean equals(Object obj) {
    if (this == obj)
        return true;
    if (obj == null)
        return false;
    if (getClass() != obj.getClass())
        return false;
    Employee other = (Employee) obj;
    if (employeeId == null) {
        if (other.employeeId != null)
            return false;
    } else if (!employeeId.equals(other.employeeId))
        return false;
    if (firstname == null) {
        if (other.firstname != null)
            return false;
    } else if (!firstname.equals(other.firstname))
        return false;
    if (Float.floatToIntBits(fte) == Float.floatToIntBits(other.fte))
        return false;
    if (lastname == null) {
        if (other.lastname != null)
            return false;
    } else if (!lastname.equals(other.lastname))
        return false;
    return true;
} 
```

然后创建一个`finalList`列表并添加`list1`到它。然后在列表上调用**retainAll** ，这将为您提供基于`finalList``list2``Employees``employeeId`

```
 List<Employee> finalList=new ArrayList<Employee>();
    finalList.addAll(list1);
    finalList.retainAll(list2);
    List<Employee> commonInBothListWithDifferentFTE=finalList;
    System.out.println(commonInBothListWithDifferentFTE); 
```

**输出：**

```
[Employee [firstname=F1, lastname=L1, employeeId=EMP01, fte=1.0], Employee [firstname=F9, lastname=L9, employeeId=EMP09, fte=0.7]] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T08:21:31.473

如果 Employee 的最大数量在 500 甚至 1000 左右，只需使用双重嵌套循环即可。它应该足够快。此方法的时间复杂度为 O(mn)，其中 m 和 n 是 2 个列表的大小。

如果您期望 Employee 的最大数量为 3000 甚至更多，您可以考虑以下 2 种方法：

另一种方法是根据员工编号的字典顺序对两个列表进行排序（实现 a `Comparator`），并使用单个循环同时遍历两个列表。复杂度为 O(mlog m + nlog n)。

如果你想更优化，你可以使用 HashSet（覆盖`equals`和`hashCode`）并将一个列表的所有元素放在 HashSet 中。您现在可以遍历另一个列表并从第一个列表中挑选出相同的员工并进行比较。摊销复杂度为 O(m + n)。

# wpf - 'System.Windows.Controls.Button' 的初始化引发了异常。- WPF

> ID：11555363
> 
> 赞同：0
> 
> 时间：2012-07-19T06:50:26.250
> 
> 标签：wpf, xaml, controltemplate

我得到了上述异常。我尝试调试，但找不到合适的解决方案。我在下面发布了我的 XAML 代码。如何修复此异常？我正在尝试学习控制模板，并且正在尝试书中的示例。但是，一旦我运行我的代码，就会弹出这个异常。

```
<Window x:Class="ControlTemplateMCTS.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Control Template MCTS Example" Height="350" Width="525">

   <Window.Resources>

      <ControlTemplate x:Key="ButtonTemplate" TargetType="Button">

         <Grid>

            <Ellipse Name="controlTemplateEllipse" Stroke="{TemplateBinding BorderBrush}" StrokeThickness="{TemplateBinding BorderThickness}">
               <Ellipse.Fill>
                  <RadialGradientBrush GradientOrigin="0.5,0.5">
                     <GradientStop Color="Red" Offset="0"/>
                     <GradientStop Color="Orange" Offset="0.25"/>
                     <GradientStop Color="Blue" Offset="0.5"/>
                     <GradientStop Color="Green" Offset="0.75"/>
                     <GradientStop Color="Yellow" Offset="1"/>
                  </RadialGradientBrush>
               </Ellipse.Fill>
            </Ellipse>

            <!--   <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>-->

         </Grid>

         <ControlTemplate.Triggers>

            <Trigger Property="IsMouseOver" Value="True">
               <Setter TargetName="controlTemplateEllipse" Property="Fill">
                  <Setter.Value>
                     <RadialGradientBrush GradientOrigin="0.5,0.5">
                        <GradientStop Color="LightCoral" Offset="0"/>
                        <GradientStop Color="LightCyan" Offset="0.25"/>
                        <GradientStop Color="LightGray" Offset="0.5"/>
                        <GradientStop Color="LightGoldenrodYellow" Offset="0.75"/>
                        <GradientStop Color="LightPink" Offset="1"/>
                     </RadialGradientBrush>
                  </Setter.Value>
               </Setter>
            </Trigger>

            <Trigger>
               <Setter TargetName="controlTemplateEllipse" Property="Fill">
                  <Setter.Value>
                     <RadialGradientBrush GradientOrigin="0.5,0.5">
                        <GradientStop Color="Gray" Offset="0"/>
                        <GradientStop Color="Silver" Offset="0.25"/>
                        <GradientStop Color="White" Offset="0.5"/>
                        <GradientStop Color="WhiteSmoke" Offset="0.75"/>
                        <GradientStop Color="DarkGray" Offset="1"/>
                     </RadialGradientBrush>
                  </Setter.Value>
               </Setter>
            </Trigger>

            <EventTrigger RoutedEvent="Button.Click">
               <BeginStoryboard>
                  <Storyboard AutoReverse="True">
                     <DoubleAnimation To="0" Duration="0:0:5" Storyboard.TargetProperty="Width"/>
                     <DoubleAnimation To="0" Duration="0:0:5" Storyboard.TargetProperty="Height"/>
                  </Storyboard>
               </BeginStoryboard>
            </EventTrigger>

         </ControlTemplate.Triggers>

      </ControlTemplate>   

      <Style TargetType="{x:Type Button}">
         <Setter Property="Template" Value="{StaticResource ButtonTemplate}"/>
      </Style>

   </Window.Resources>

   <Grid>
      <!--<Button  Name="TestButton" Width="120" Height="28">Button One</Button>-->
      <Button  Name="DemoButton" Height="50" IsEnabled="False"  Width="120">Button Two</Button>
   </Grid>

</Window> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T07:00:36.503

这里的问题：

```
 <Trigger>
                <Setter TargetName="controlTemplateEllipse" Property="Fill">
                    <Setter.Value>
                        <RadialGradientBrush GradientOrigin="0.5,0.5">
                            <GradientStop Color="Gray" Offset="0"/>
                            <GradientStop Color="Silver" Offset="0.25"/>
                            <GradientStop Color="White" Offset="0.5"/>
                            <GradientStop Color="WhiteSmoke" Offset="0.75"/>
                            <GradientStop Color="DarkGray" Offset="1"/>
                        </RadialGradientBrush>
                    </Setter.Value>
                </Setter>
            </Trigger> 
```

您必须初始化触发器。例如：

```
<Trigger Property="IsEnabled" Value="True"> 
```

这有助于 WPF 知道何时应该使用触发器。

# android - 以编程方式启用/禁用android中的数据连接

> ID：11555366
> 
> 赞同：48
> 
> 时间：2012-07-19T06:50:30.380
> 
> 标签：android, gprs, invocationtargetexception

我想以编程方式启用/禁用数据连接。我使用了以下代码：

```
void enableInternet(boolean yes)
{
    ConnectivityManager iMgr = (ConnectivityManager)getSystemService(Context.CONNECTIVITY_SERVICE);
    Method iMthd = null;
    try {
        iMthd = ConnectivityManager.class.getDeclaredMethod("setMobileDataEnabled", boolean.class);
        } catch (Exception e) {
               } 
    iMthd.setAccessible(false);

    if(yes)
     {

                try {
                    iMthd.invoke(iMgr, true);
                    Toast.makeText(getApplicationContext(), "Data connection Enabled", Toast.LENGTH_SHORT).show();
                } catch (IllegalArgumentException e) {
                    // TODO Auto-generated catch block
                     dataButton.setChecked(false);
                     Toast.makeText(getApplicationContext(), "IllegalArgumentException", Toast.LENGTH_SHORT).show();

                } catch (IllegalAccessException e) {
                    // TODO Auto-generated catch block
                    Toast.makeText(getApplicationContext(), "IllegalAccessException", Toast.LENGTH_SHORT).show();

                    e.printStackTrace();
                } catch (InvocationTargetException e) {
                    // TODO Auto-generated catch block
                     dataButton.setChecked(false);
                     Toast.makeText(getApplicationContext(), "InvocationTargetException", Toast.LENGTH_SHORT).show();

                }

     }
    else
     {
        try {
            iMthd.invoke(iMgr, true);
            Toast.makeText(getApplicationContext(), "Data connection Disabled", Toast.LENGTH_SHORT).show();
            } catch (Exception e) {
                   dataButton.setChecked(true);
                Toast.makeText(getApplicationContext(), "Error Disabling Data connection", Toast.LENGTH_SHORT).show();
                                    }
     }
} 
```

它在模拟器中没有任何错误，但是当我尝试在真实设备上运行它时，我得到了“InvocationTargetException”。我正在使用 API 级别 8 来构建应用程序。

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-07-19T06:57:53.833

此代码示例应该适用于运行姜饼及更高版本的 android 手机：

```
private void setMobileDataEnabled(Context context, boolean enabled) throws ClassNotFoundException, NoSuchFieldException, IllegalAccessException, NoSuchMethodException, InvocationTargetException {
    final ConnectivityManager conman = (ConnectivityManager)  context.getSystemService(Context.CONNECTIVITY_SERVICE);
    final Class conmanClass = Class.forName(conman.getClass().getName());
    final Field connectivityManagerField = conmanClass.getDeclaredField("mService");
    connectivityManagerField.setAccessible(true);
    final Object connectivityManager = connectivityManagerField.get(conman);
    final Class connectivityManagerClass =  Class.forName(connectivityManager.getClass().getName());
    final Method setMobileDataEnabledMethod = connectivityManagerClass.getDeclaredMethod("setMobileDataEnabled", Boolean.TYPE);
    setMobileDataEnabledMethod.setAccessible(true);

    setMobileDataEnabledMethod.invoke(connectivityManager, enabled);
} 
```

不要忘记将此行添加到您的清单文件中

```
<uses-permission android:name="android.permission.CHANGE_NETWORK_STATE"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-20T11:19:45.147

@riHaN JiTHiN 您的程序适用于 2.3 及更高版本，但它需要在“else”语句中稍作改动：

```
else
     {
        try {
            iMthd.invoke(iMgr, true); 
```

“真”应改为“假”

```
iMthd.invoke(iMgr, false); 
```

# windows-phone-7 - 如何在两个图钉之间应用时间？

> ID：11555369
> 
> 赞同：1
> 
> 时间：2012-07-19T06:50:31.587
> 
> 标签：windows-phone-7

我对 wp7 很陌生。

**要求：**当日期值更改时，在 bing 地图上显示数据，当数据显示在 bing 地图上时，然后在特定位置创建一个新的图钉按钮。单击该按钮时，它应在消息框中显示位置、纬度和经度。

但这项工作已经完成。现在我有一个播放按钮；当按下播放按钮时，数据会自动出现在必应地图上，但需要一些时间差。那么我如何给两个图钉之间的时间呢？

我的 C# 代码是：

```
 for (int i = 0; i <= ClsGetDeviceMap.lstLongLatitude.Count-1; i++)
 {
     string lat, lon;
     lat = ClsGetDeviceMap.lstLatitude.ElementAt<string>(i).Trim();
     lon = ClsGetDeviceMap.lstLongLatitude.ElementAt<string>(i).Trim();
     Latitude = Convert.ToDouble(lat);
     LongLatitude = Convert.ToDouble(lon);
     GpsSpeed = 44.21811;

     map1.Center = new GeoCoordinate(Latitude, LongLatitude, GpsSpeed);
     map1.ZoomLevel = 17;
     map1.ZoomBarVisibility = Visibility.Visible;

     pin[i] = new Pushpin();
     pin[i].Location = new GeoCoordinate(Latitude, LongLatitude);

     map1.Children.Add(pin[i]);
     myCoorditeWatcher = new GeoCoordinateWatcher(GeoPositionAccuracy.High);
     myCoorditeWatcher.MovementThreshold = 20;

     var gl = GestureService.GetGestureListener(pin[i]);
     gl.Hold += new EventHandler<GestureEventArgs>(GestureListener_Hold);
     gl.Tap += new EventHandler<GestureEventArgs>(GestureListener_Stack_Tap); 
```

# c# - inetsvr 的 appcmd 发出后发出错误

> ID：11555372
> 
> 赞同：2
> 
> 时间：2012-07-19T06:51:25.523
> 
> 标签：c#, asp.net-mvc, windows, wcf, command-line

> 错误（消息：新绑定对象缺少必需的属性。无法添加类型为“绑定”的重复集合条目，组合键属性“协议，绑定信息”分别设置为“net.tcp，808：*”

这是我在尝试运行时遇到的错误

```
C:\Windows\System32\inetsrv>appcmd.exe set site "Default Web Site" -+bindings.[p
rotocol='net.tcp',bindingInformation='808:*'] 
```

我不知道为什么，很想听听您的想法并遵循您的指导，

非常感谢您的关心。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:49:44.663

试试这个命令 `appcmd.exe set site "Default Web Site" -+bindings.[protocol='net.tcp',bindingInformation='808:*']`

那就是尝试在单行中键入命令。

猜猜您可能已经安装了该命令。您使用默认网站绑定进行验证，它应该已经添加。

谢谢

迪帕克

# mysql - mysql 按行分组

> ID：11555379
> 
> 赞同：0
> 
> 时间：2012-07-19T06:51:54.770
> 
> 标签：mysql, join, group-by, where

数据：

```
"姓名","艺术","unterkunft_id","optionen_id"
"FeWo üöä","Ferienwohnung","5","2"
"FeWo üöä","Ferienwohnung","5","4"
"酒店","酒店","3","3"
"酒店","酒店","3","4"

```

返回此的查询：

```
SELECT  `booking_unterkuenfte`.Name,  `booking_unterkunftart`.Art, booking_unterkuenfte_optionen . * 
  FROM booking_unterkuenfte, booking_unterkunftart, booking_unterkuenfte_optionen
  WHERE  `booking_unterkuenfte`.unterkunftsart_id = booking_unterkunftart.id
  AND booking_unterkuenfte_optionen.unterkunft_id = booking_unterkuenfte.id
  GROUP BY booking_unterkuenfte.id
  ORDER BY pos DESC , Name ASC 
  LIMIT 0 , 30 
```

如果我选择多个选项，我会得到空结果。我知道为什么但不知道如何解决:(

```
 SELECT  `booking_unterkuenfte`.Name,  `booking_unterkunftart`.Art, booking_unterkuenfte_optionen . * 
  FROM booking_unterkuenfte, booking_unterkunftart, booking_unterkuenfte_optionen
  WHERE  `booking_unterkuenfte`.unterkunftsart_id = booking_unterkunftart.id
  AND booking_unterkuenfte_optionen.unterkunft_id = booking_unterkuenfte.id
  AND booking_unterkuenfte_optionen.optionen_id =4
  AND booking_unterkuenfte_optionen.optionen_id =3
  GROUP BY booking_unterkuenfte.id
  ORDER BY pos DESC , Name ASC 
  LIMIT 0 , 30 
```

应该返回酒店，因为它有两种选择。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T07:03:42.837

当然，您的选项是 3 或 4，而不是**两者**，因此这两个 AND 评估为空查询。如果您知道要测试多少个选项，则需要对 booking_unterkuenfte_optionen 执行多个 JOIN。

```
SELECT  `booking_unterkuenfte`.Name,  `booking_unterkunftart`.Art,
   booking_unterkuenfte_optionen.* 
FROM booking_unterkuenfte, booking_unterkunftart,
     booking_unterkuenfte_optionen AS op1,
     booking_unterkuenfte_optionen AS op2
WHERE  `booking_unterkuenfte`.unterkunftsart_id = booking_unterkunftart.id

AND op1.unterkunft_id = booking_unterkuenfte.id
AND op1.optionen_id =4

AND op2.unterkunft_id = booking_unterkuenfte.id
AND op2.optionen_id =3

GROUP BY booking_unterkuenfte.id
ORDER BY pos DESC , Name ASC 
LIMIT 0 , 30 
```

另一种方法是，如果您确定没有为相同的 unterkunft_id 报告两次选项，则可以计算它们。您要求 optionen 在 (3, 4) 中，并且 optionen 的数量为 2；如果 (3,3) 不存在，这意味着您找到了一个包含 3 和 4 的条目。

```
SELECT  `booking_unterkuenfte`.Name,  `booking_unterkunftart`.Art,
   COUNT(booking_unterkuenfte_optionen.unterkunft_id) AS matches
FROM booking_unterkuenfte
JOIN booking_unterkunftart ON (booking_unterkuenfte.unterkunftsart_id = booking_unterkunftart.id)
JOIN booking_unterkuenfte_optionen ON (booking_unterkuenfte_optionen.unterkunft_id = booking_unterkuenfte.id)
WHERE
    booking_unterkuenfte_optionen.optionen_id IN (3,4)
GROUP BY booking_unterkuenfte.id
HAVING matches = 2
ORDER BY pos DESC , Name ASC 
LIMIT 0 , 30 
```

我建议采用较短的名称和别名，例如

```
...booking_unterkunfte AS bu
JOIN booking_unterkunftart AS bua ON (...)
JOIN booking_unterkuenfte_optionen AS buo ON (buo.u_id = bu.id)
... 
```

# eclipse - 尝试为小型 XText 项目生成语言基础结构时出现 OutOfMemoryError

> ID：11555380
> 
> 赞同：0
> 
> 时间：2012-07-19T06:51:58.247
> 
> 标签：eclipse, xtext

我创建了一个新的 XText 项目，其中包含一个定义语法的 xtext 文件，并且没有更改项目中的任何其他文件。我定义的语法大约有 150 行，当尝试“生成语言基础设施”时，一切都很顺利，但后来我对其进行了扩展，现在基础设施生成失败了：

```
460476 [main] ERROR mf.mwe2.launch.runtime.Mwe2Launcher  - Java heap space
java.lang.OutOfMemoryError: Java heap space
    at java.util.ArrayList.iterator(Unknown Source)
    at org.eclipse.xtext.util.formallang.PdaUtil$TraversalItem.<init>(PdaUtil.java:247)
    at org.eclipse.xtext.util.formallang.PdaUtil.newItem(PdaUtil.java:531)
    at org.eclipse.xtext.util.formallang.PdaUtil.filterEdges(PdaUtil.java:451)
    at org.eclipse.xtext.serializer.analysis.ContextTypePDAProvider.createPDA(ContextTypePDAProvider.java:178)
    at org.eclipse.xtext.serializer.analysis.ContextTypePDAProvider.getContextTypePDA(ContextTypePDAProvider.java:188)
    at org.eclipse.xtext.serializer.analysis.SyntacticSequencerPDAProvider.getPDA(SyntacticSequencerPDAProvider.java:604)
    at org.eclipse.xtext.generator.serializer.SyntacticSequencerUtil.getAllPDAs(SyntacticSequencerUtil.java:59)
    at org.eclipse.xtext.generator.serializer.SyntacticSequencerUtil.getAllAmbiguousTransitions(SyntacticSequencerUtil.java:79)
    at org.eclipse.xtext.generator.serializer.SyntacticSequencerUtil.getAllAmbiguousTransitionsBySyntax(SyntacticSequencerUtil.java:90)
    at org.eclipse.xtext.generator.serializer.AbstractSyntacticSequencer.getFileContents(AbstractSyntacticSequencer.java:95)
    at org.eclipse.xtext.generator.serializer.SerializerFragment.generate(SerializerFragment.java:97)
    at org.eclipse.xtext.generator.Xtend2GeneratorFragment.generate(Xtend2GeneratorFragment.java:66)
    at org.eclipse.xtext.generator.Xtend2GeneratorFragment.generate(Xtend2GeneratorFragment.java:59)
    at org.eclipse.xtext.generator.CompositeGeneratorFragment.generate(CompositeGeneratorFragment.java:92)
    at org.eclipse.xtext.generator.LanguageConfig.generate(LanguageConfig.java:113)
    at org.eclipse.xtext.generator.Generator.generate(Generator.java:361)
    at org.eclipse.xtext.generator.Generator.invokeInternal(Generator.java:128)
    at org.eclipse.emf.mwe.core.lib.AbstractWorkflowComponent.invoke(AbstractWorkflowComponent.java:126)
    at org.eclipse.emf.mwe.core.lib.Mwe2Bridge.invoke(Mwe2Bridge.java:34)
    at org.eclipse.emf.mwe.core.lib.AbstractWorkflowComponent.invoke(AbstractWorkflowComponent.java:201)
    at org.eclipse.emf.mwe2.runtime.workflow.AbstractCompositeWorkflowComponent.invoke(AbstractCompositeWorkflowComponent.java:35)
    at org.eclipse.emf.mwe2.runtime.workflow.Workflow.run(Workflow.java:19)
    at org.eclipse.emf.mwe2.launch.runtime.Mwe2Runner.run(Mwe2Runner.java:102)
    at org.eclipse.emf.mwe2.launch.runtime.Mwe2Runner.run(Mwe2Runner.java:62)
    at org.eclipse.emf.mwe2.launch.runtime.Mwe2Runner.run(Mwe2Runner.java:52)
    at org.eclipse.emf.mwe2.launch.runtime.Mwe2Launcher.run(Mwe2Launcher.java:74)
    at org.eclipse.emf.mwe2.launch.runtime.Mwe2Launcher.main(Mwe2Launcher.java:35) 
```

我在 Eclipse 配置中检查了该操作的启动设置，并看到直到那时它是`-Xmx512m`. 我试图增加这个数字，但它所做的只是现在该操作需要更多时间才能因相同的错误而崩溃。我一直到`-Xmx3000m`- 不想在我的 4Gb 机器上尝试更多。

我想强调一下，我所做的只是创建一个新的 XText 项目并修改默认的“Hello X！”。语法由我自己的 200 行语法定义。我的语法编译得很好，没有警告或错误。**是什么导致了这个内存错误，我该如何解决？**

我找到[了这篇相关的博客文章](http://zarnekow.blogspot.co.il/2010/08/how-to-reduce-memory-consumption-of.html)，但我承认建议的修复超出了我的水平，我不确定我需要做什么以及它是否能解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T10:23:13.437

我终于能够缩小问题的范围：

```
Datatype:
  Rule1 '=' Rule2 Rule3 INT Rule4 etc etc... 
```

内存不足失败；尽管

```
Datatype:
  name=Rule1 '=' Rule2 Rule3 INT Rule4 etc etc... 
```

工作正常，即使使用原始`-Xmx512m`. 唯一的区别是将 a 分配**`name`**给其中一个规则。我没有意识到命名规则是如此重要，我认为如果我只关心语法正确的 DSL 文件并且不打算进一步处理它们，我可以在很大程度上跳过它，但我想我错了......

# java - 从客户那里收集数据的最简单/推荐的方式

> ID：11555388
> 
> 赞同：1
> 
> 时间：2012-07-19T06:52:52.873
> 
> 标签：java, architecture, client-server

我喜欢编写一个 Java 应用程序，我将把它交给我的朋友来收集一些数据。数据将由我收集，我将做一些无聊的统计。我的朋友到处都是，唯一的链接是互联网。

现在的问题是：**我如何收集数据？**

我能想到的最简单的方法是生成一个输出文件，然后让我的朋友通过电子邮件将其发回给我。但从技术意义上讲，它并不好和复杂。

我还考虑过只通过原始套接字发送一些序列化数据，但这需要具有适当接收应用程序的服务器。而写这样一个暴露在互联网上的东西并不好玩。

因此，对于答案，请考虑整个架构、客户端以及服务器端。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T07:30:27.533

如果您有 Google 帐户，我将提供以下两个建议：

您可以查看[Google App Engine](https://developers.google.com/appengine/ "Google App Engine 的着陆页")。它提供了一个很好的应用程序环境，免费合理使用。您甚至可以通过使用谷歌帐户进行身份验证并过滤您的朋友来限制对应用程序的访问。

另一种选择是[通过 Google 文档创建问卷](http://www.amisampath.com/2009/11/how-to-create-online.html)。它将您朋友的答案累积到一个电子表格中，该电子表格可以通过 java 离线导出和处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T07:57:56.363

我必须同意 dvberkel 的问卷调查。不要试图让它变得比它应该的更复杂。只需通过 Google Docs 收集数据，然后将其导入 Java 并创建您的统计数据。

# android - 从服务器恢复到模拟器？

> ID：11555390
> 
> 赞同：0
> 
> 时间：2012-07-19T06:52:57.593
> 
> 标签：android

我正在使用 2.1 平台.......我能够从模拟器中检索所有**联系人和 SMS**，并将其复制到文本文件中并将其存储在具有特定用户帐户的服务器中。我还必须恢复这些联系人和短信返回到模拟器。我不知道该怎么做。现在我正在使用 AVD 和 Eclipse 运行 Android 项目。我打算购买新的安卓手机并将这些联系人和短信恢复到那个状态mobile.I 使用**CURSOR 和 CONTENT_URI检索联系人，使用****CURSOR**检索 SMS 。

如何从服务器中的文本文件**恢复**到模拟器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T07:38:54.257

您可以读取文本文件并将数据保存在光标对象中吗？如果是，请点击[此](http://wubbahed.com/2007/12/21/android-development-contacts/)链接。您将需要使用一些循环来添加每个联系人。

要从光标中获取值，您可以使用[此](http://androiddevblog.blogspot.in/2010/02/query-contacts-data.html)链接作为参考。

编辑：这里是第二个链接的代码

```
ContentValues values = new ContentValues();
values.put(Contacts.People.NAME, "Test Name");
// add it to the database
ContentURI newPerson = getContentResolver().insert(Contacts.People.CONTENT_URI, values);

// assign the new phone number to the person
values.clear();
values.put(Contacts.Phones.PERSON_ID, newPerson.getPathLeaf());
values.put(Contacts.Phones.NUMBER, "(800) 466-4411");
// insert the new phone number in the database
getContentResolver().insert(Contacts.Phones.CONTENT_URI, values); 
```

我将无法解释这一点，因此请尝试访问第一个链接。

# javascript - 如何在html5中根据时间在画布中绘制条形图

> ID：11555394
> 
> 赞同：0
> 
> 时间：2012-07-19T06:53:08.283
> 
> 标签：javascript, html, css

让我解释清楚。我必须使用 html5 绘制条形图，我做到了。问题是柱的大小必须根据给定的时间增加。即，如果我给 30 作为价值和时间为 3。它增加为 10,20 并且必须在第 3 秒达到 30。我在这里包含了条形图代码。

```
<!doctype html>
<html>
    <head>
        <script type="text/javascript">
            window.onload=function(){
                var canvas=document.getElementById('mycanvas');
                var ctx=canvas.getContext('2d');
                var value=[10,20,30,40,50,90];
                var width=50;
                var currx=30;
                ctx.fillStyle="red";
                for(i = 0; i < value.length; i++)
                {
                    var h=value[i];
                    ctx.fillRect(currx,canvas.height-h,width,h);
                    currx+=width+10;
                }
            };
        </script>
    </head>
    <body>
        <canvas id="mycanvas" height="400" width="400" style="border:1px solid #c3c3c3;">
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T09:34:28.890

```
<!doctype html>
<html>
    <head>
        <script type="text/javascript">
            window.onload=function(){
                var canvas=document.getElementById('mycanvas');
                var ctx=canvas.getContext('2d');
                var value=[180,140,30,340,50,90];
                var width=50;
                var currx=30;
                ctx.fillStyle="red";
                var i = 0;
                var interval = setInterval(function(){
                    if (i == value.length){
                        clearInterval(interval);
                        return;
                    }
                    var h=value[i];
                    ctx.fillRect(currx,canvas.height-h,width,h);
                    currx+=width+10;
                    i++;
                }, 2000);console.log(interval);
            };
        </script>
    </head>
    <body>
        <canvas id="mycanvas" height="400" width="400" style="border:1px solid #c3c3c3;">
    </body>
</html> 
```

# image - 图像编辑：这是一种什么样的转变？

> ID：11555406
> 
> 赞同：0
> 
> 时间：2012-07-19T06:54:15.603
> 
> 标签：image, image-processing, imagemagick

我有 3 张图像，在这个例子中它们的像素用一个字母表示。

```
A B   A B   K H 
C D   E F   J I 
```

我想将第一张图像的左列映射到其余图像。

```
A B   A B   A H  
C D   C F   C I 
```

这叫什么样的转变？

imagemagick 中的命令是什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T08:59:53.403

您可以使用定义了 alpha 通道的合成 (http://www.imagemagick.org/Usage/compose/#over) 以仅保留第一张图像的第一列。

# xmlhttprequest - 如何在一个地方处理 XMLHttpRequest 错误

> ID：11555413
> 
> 赞同：0
> 
> 时间：2012-07-19T06:54:33.620
> 
> 标签：xmlhttprequest

我想在一个地方处理所有错误。
是否可以在一个处理所有请求的地方将错误处理程序附加到 XMLHttpRequest 对象（或类似的东西）？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T21:43:50.587

如果您有单个 XMLHttpRequest 对象，您将侦听`readystatechange`事件以检测操作完成时，然后读取`status`属性以检测错误。

现在，如果您想对所有对象执行此操作，则需要监听所有发生的`readystatechange`事件，即，如果创建或初始化了 XMLHttpRequest，则注册到相应的事件。这可以通过覆盖 XMLHttpRequest 原型的 open-method 来完成，以便它注册您的事件侦听器，然后调用旧的 open。

我为此使用了以下代码（在 Firefox 中）：

```
 (function(open) {
   XMLHttpRequest.prototype.open = function(method, url, async, user, pass) {
     this.addEventListener("readystatechange", function() {
       if (this.readyState==4 && (this.status != 200 && this.status != 301 && this.status != 302))  {
         alert("Error: "+this.statusText)
       }
     }, false);
     open.call(this, method, url, async, user, pass);
   };
 })(XMLHttpRequest.prototype.open); 
```

（这假设`open`每个 XMLHttpRequest 对象只调用一次，或者您的事件被多次注册，如果您想安全起见，您可以通过添加来重置开放函数`this.open = open;`）

# ios - 使用 xcode 中的按钮操作更新 tableview 文本标签

> ID：11555415
> 
> 赞同：0
> 
> 时间：2012-07-19T06:54:48.810
> 
> 标签：ios, xcode, uitableview

我有一个**按钮**、一个**文本字段**和一个**表格视图**。我想要的是当我在文本字段中输入一些文本并单击按钮（名为更新）时，它应该更新 tableviewcell 的 detailtextlabel。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T06:59:15.267

试试这个，点击按钮后添加 [yourtableview reloadData]

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{  

static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell;

cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];    

if(cell==nil)
{
    cell = [[[UITableViewCell alloc] initWithFrame:CGRectZero reuseIdentifier:CellIdentifier] autorelease];

}
else
{
    for(UIView *v in cell.contentView.subviews)
    {
        [v removeFromSuperview];
    }
}

cell.selectionStyle = UITableViewCellSelectionStyleNone;;

cell.accessoryType = UITableViewCellAccessoryNone;

[[cell textLabel] setFont:[UIFont fontWithName:@"Verdana" size:10]]; 

cell.textColor = [UIColor whiteColor];

cell.text = textfield.text; //Yourtextfield text

return cell; 
```

}

# java - 为什么增强的for循环比普通的for循环更有效

> ID：11555418
> 
> 赞同：31
> 
> 时间：2012-07-19T06:54:51.793
> 
> 标签：java, for-loop, foreach

我读到*增强的 for 循环*比这里的普通*for 循环*更有效：

[http://developer.android.com/guide/practices/performance.html#foreach](http://developer.android.com/guide/practices/performance.html#foreach)

当我搜索它们的效率差异时，我发现的只是：在正常的for循环的情况下，我们需要一个额外的步骤来找出数组的长度或大小等，

```
for(Integer i : list){
   ....
}

int n = list.size();
for(int i=0; i < n; ++i){
  ....
} 
```

但这是唯一的原因，增强的 for 循环比普通的 for 循环更好吗？在这种情况下，最好使用普通*的 for 循环*，因为理解增强*的 for 循环*有点复杂。

检查这个有趣的问题： http: [//www.coderanch.com/t/258147/java-programmer-SCJP/certification/Enhanced-Loop-Vs-Loop](http://www.coderanch.com/t/258147/java-programmer-SCJP/certification/Enhanced-Loop-Vs-Loop)

谁能解释这两种for循环的内部实现，或者解释使用增强*for循环*的其他原因？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-07-19T07:00:01.963

说增强的 for 循环更有效有点过于简单化了。可以，但在许多情况下，它*几乎*与老式循环完全相同。

首先要注意的是，对于集合，增强的 for 循环使用 an `Iterator`，因此如果您使用 an 手动迭代集合，`Iterator`那么您应该具有与增强的 for 循环几乎相同的性能。

增强的 for 循环比*简单实现*的传统循环更快的一个地方是这样的：

```
LinkedList<Object> list = ...;

// Loop 1:
int size = list.size();
for (int i = 0; i<size; i++) {
   Object o = list.get(i);
   /// do stuff
}

// Loop 2:
for (Object o : list) {
  // do stuff
}

// Loop 3:
Iterator<Object> it = list.iterator();
while (it.hasNext()) {
  Object o = it.next();
  // do stuff
} 
```

在这种情况下，Loop 1 将比 Loop 2 和 Loop 3 慢，因为它必须（部分）在每次迭代中遍历列表才能找到 position 处的元素`i`。然而，循环 2 和 3 由于使用了`Iterator`. 循环 2 和 3 也将具有几乎相同的性能，因为循环 3 几乎正是您在循环 2 中编写代码时编译器将产生的结果。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-05-28T09:55:05.853

我自己对我今天用上述几点做的一个小实验感到惊讶。所以我所做的是我将一定数量的元素插入到链表中，并使用上述三种方法对其进行迭代 1）使用高级 for 循环 2）使用迭代器 3）使用简单循环和 get()
我猜程序员是这样的因为你们可以通过查看代码更好地理解我做了什么。

```
long advanced_timeElapsed,iterating_timeElapsed,simple_timeElapsed;
    long first=System.nanoTime();
    for(Integer i: myList){
        Integer b=i;
    }
    long end= System.nanoTime();
    advanced_timeElapsed=end-first;
    System.out.println("Time for Advanced for loop:"+advanced_timeElapsed);
    first=System.nanoTime();
    Iterator<Integer> it = myList.iterator();
    while(it.hasNext())
    {
        Integer b=it.next();
    }
    end= System.nanoTime();
    iterating_timeElapsed=end-first;
    System.out.println("Time for Iterating Loop:"+iterating_timeElapsed);
    first=System.nanoTime();
    int counter=0;
    int size= myList.size();
    while(counter<size)
    {
        Integer b=myList.get(counter);
        counter++;  
    }
    end= System.nanoTime();
    simple_timeElapsed=end-first;
    System.out.println("Time for Simple Loop:"+simple_timeElapsed); 
```

结果出乎我的意料。以下是 3 种情况下经过的时间图。 ![经过时间的图表](../Images/fa6613523e33c44d774bbdcd9b4630d8.png)

Y 轴经过时间 X 轴测试用例test case1
:10 输入
test case2:30 输入
test case3:50 输入
test case4:100 输入
test case5:150 输入
test case6:300 输入
test case7:500 输入
test case8:1000 输入
测试用例9:2000 输入
测试用例10:5000 输入
测试用例11:10000 输入
测试用例12:100000 输入

在这里您可以看到简单的循环比其他循环执行得更好。如果您在上面的代码中发现任何错误，请回复，我会再次检查。在我挖掘字节码并查看引擎盖下发生的事情后，将进一步更新。对于这么长的回复，我深表歉意，但我喜欢描述性的。菲利普

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-19T06:58:04.623

> 我读到增强的 for 循环比普通的 for 循环更有效。

实际上有时它对程序的效率较低，但大多数时候它完全一样。

它对开发人员来说更高效，这通常更重要

在迭代集合时，for-each 循环特别有用。

```
List<String> list = 
for(Iterator<String> iter = list.iterator(); list.hasNext(); ) {
    String s = list.next(); 
```

更容易写成（但做同样的事情，所以它对程序没有效率）

```
List<String> list = 
for(String s: list) { 
```

* * *

当通过索引访问随机访问的集合时，使用“旧”循环稍微更有效。

```
List<String> list = new ArrayList<String>(); // implements RandomAccess
for(int i=0, len = list.size(); i < len; i++) // doesn't use an Iterator! 
```

在集合上使用 for-each 循环始终使用迭代器，这对于随机访问列表的效率略低。

AFAIK，使用 for-each 循环对程序来说永远不会更有效，但就像我说的那样，开发人员的效率往往*更重要*。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-19T06:59:42.297

for-each 使用 Iterator 接口。我怀疑它是否比“旧”样式更有效。迭代器还需要检查列表的大小。

它主要是为了可读性。

对于像 LinkedList 这样的非随机访问集合，它应该更快，但是这样比较是不公平的。无论如何，您不会习惯于第二次实现（索引访问速度较慢）。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-19T07:02:36.677

foreach 循环与这种循环一样有效：

```
for (Iterator<Foo> it = list.iterator(); it.hasNext(); ) {
     Foo foo = it.next();
     ...
} 
```

因为它是严格等价的。

如果您使用

```
int size = list.size();
for (int i = 0; i < size; i++) {
    Foo foo = list.get(i);
    ...
} 
```

然后 foreach 循环将具有与您的循环等效的性能，**但仅适用于 ArrayList**。在 LinkedList 的情况下，您的循环将具有糟糕的性能，因为在每次迭代时，它都必须遍历列表的所有节点，直到它到达`i`第 th 元素。

foreach 循环（或基于迭代器的循环，相同）没有这个问题，因为迭代器保持对当前节点的引用，并在每次迭代时简单地转到下一个节点。这是最糟糕的选择，因为它适用于所有类型的列表。它还更清楚地表达了意图，并且更安全，因为您不会冒险增加循环内的索引，或者在嵌套循环的情况下使用错误的索引。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-03-30T08:32:38.577

所有答案都很好，我认为不需要更多答案，但我只想指出：

增强的 for 语句**只能**用于`obtain array elements`

它**不能****习惯**`modify elements`。_ _

如果您的程序需要修改元素，请使用传统的[计数器控制](https://www.google.jo/search?q=counter-controlled&oq=counter-controlled&aqs=chrome..69i57j0l5.606j0j1&sourceid=chrome&ie=UTF-8) `for`语句。

看一看

```
int[] array = { 1, 2, 3, 4, 5 };
for (int counter = 0; counter < array.length; counter++)
    array[counter] *= 2; 
```

我们无法使用该`enhanced for`语句，因为我们是`modifying the array’s elements`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-19T09:50:01.217

从有效的Java：

> 循环遍历数组的标准习语不一定会导致冗余检查。现代 JVM 实现对它们进行了优化。

但是 Josh Bloch 没有描述 JVM 如何优化它们。

# gwt - 使用 GWT 的 Spring Web Flow

> ID：11555420
> 
> 赞同：0
> 
> 时间：2012-07-19T06:55:01.483
> 
> 标签：gwt, spring-webflow

实际上我正在使用 Spring 和 GWT 来构建我的 webapp。我有很多表格，所以我想找到我很好的方式来处理它。Spring Webflow 是一个框架，它将通过创建大量表单来支持您，但它与 GWT 兼容吗？我可以将 Spring Webflow 与 GWT 结合起来吗？

也许还有其他更好/更好的解决方案，但我找不到有关 Webfow 和 GWT 的任何信息。GWT 中处理多站点表单的最佳实践是什么？

最好的问候，鲍勃

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T14:21:00.843

Spring Web Flow 本质上是一个服务器端控制器。它非常适合基于 MVC 模式和服务器上的控制器的框架。例如，Spring MVC、JSF、Struts 等。

GWT 将您的所有代码编译为 JavaScript。它本质上在您的浏览器中运行，并与服务器进行基于 AJAX 的交互。所以，Spring Web Flow 根本不适合这个框架。如果有人可以设计一个以 GWT 方式编译的 Spring Web Flow 客户端版本，那么我们可能会拥有一个与 GWT 兼容的 SWF。

# android - 如果手机中没有 SDCard，我应该在我的应用程序的主目录中放置什么？

> ID：11555425
> 
> 赞同：0
> 
> 时间：2012-07-19T06:55:25.397
> 
> 标签：android

我知道 stackoverflow 不是研究网站，但我的问题仅与应用程序开发有关。

我正在构建一个图片库应用程序。我给用户一个选项来扫描图像的目录。

但默认情况下，我需要设置路径。通常，我只关注我的手机来构建具有 SDCard 的手机。所以我在使用`/mnt/sdcard`. 但是我应该为没有 SDCard 的手机使用什么。我不想放`root(/)`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T07:03:00.563

为什么不检查 sd 卡是否存在，如果存在，则将路径设置为*mnt/sdcard*

或将路径设置为 null 并向用户显示 SD 卡不存在的弹出消息并关闭您的应用程序..

您可以使用以下方法来了解 sdcard 是否存在

```
public static boolean isSdPresent() {

return android.os.Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T07:25:36.080

此外，在认为，`/`不会在没有植根的手机上工作

# heroku - 我在哪里获得 Heroku 上的试用 SSL 证书（用于测试）？

> ID：11555427
> 
> 赞同：0
> 
> 时间：2012-07-19T06:55:30.877
> 
> 标签：heroku, ssl-certificate, production

我需要在生产环境中测试 PayPal 功能，所以我需要 SSL 证书。

我找到了提供 SSL 证书的网站，但是当我选择 Web 平台时 - 没有云平台。

谁能告诉网站哪个可以帮助我？

请分享经验：包含 SSL 证书可能会出现什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T07:30:25.160

如今，所有 Heroku (cedar) 应用程序都默认在 SSL 上运行，所以如果你有，`http://myapp.herokuapp.com`那么它也可以运行，`https://myapp.herokuapp.com`所以如果你对使用 herokuapp.com 感到满意，那么你不需要购买一个来进行测试。

# android - 在创建为 SingleChoiceItem 列表的 AlertBuilder 中显示多个选择

> ID：11555428
> 
> 赞同：0
> 
> 时间：2012-07-19T06:55:35.260
> 
> 标签：android, listview, android-alertdialog

我正在使用使用 alertBuilder 和 setSingleChoiceItems 创建的警报对话框将单个选择值分配给数据条目列表中的选定条目。这适用于单个选择，其中旧值用于在创建对话框时设置选择，并在用户单击时拾取新值，即：

```
builder.setSingleChoiceItems(items, currentLevel, new DialogInterface.OnClickListener() {
     public void onClick(DialogInterface dialog, int newLevel) {
            if (newLevel == currentLevel) {
                // no change
            } else {
                updateLevel(alertId,newLevel);
            }
            dialog.cancel();
        }
}); 
```

现在我想将其扩展到数据元素的多个选择，这意味着可能有几个不同的当前级别，所以在构建对话框时我应该能够选择多个条目，但点击时只能选择一个（这将取代所有最初的多项选择）。我仍然想要单选按钮（与使用 setMultipleChoiceItems 获得的复选框不同）。

任何提示如何实现这一点？我需要创建我的自定义视图还是有办法设置 AlertBuilder 来支持这个？

# javascript - 使用 Greasemonkey 提交表单

> ID：11555442
> 
> 赞同：3
> 
> 时间：2012-07-19T06:56:51.463
> 
> 标签：javascript, forms, submit, greasemonkey

每天第一次，我尝试在工作中访问一个网页，我被重定向到一个内部托管的网页，其中包含 IT 指南和一个带有“同意”和“不同意”两个按钮的表单。单击“同意”然后允许当天的外部 Internet 访问并将您发送到您最初寻找的站点。

我想制作一个自动提交表单的 Greasemonkey 脚本，因为我已经有一个批处理文件在启动时启动我所有的正常应用程序，这将允许我在它每天 20 分钟启动时离开 PC； )

该页面只有一种形式：

```
<form method="post">
<input type="submit" value="I Agree" class="agree" onsubmit="submitonce(this)" /> 
<input type="button" onclick="javascript:window.close();" value="I Disagree"
  class="disagree"/>
</form> 
```

并且不确定它是否重要，因为我只需要点击，但功能`submitonce`是：

```
function submitonce(theform) {
  //if IE 4+ or NS 6+
  console.log("Submitting");
  if (document.all || document.getElementById) {
    //screen thru every element in the form, and hunt down "submit" and "reset"
    for (i = 0; i < theform.length; i++) {
      var tempobj = theform.elements[i];
      if (tempobj.type.toLowerCase() == "submit" ||
        tempobj.type.toLowerCase() == "reset")
        //disable em
        tempobj.disabled = true;
    }
  }
} 
```

我有其余的来源，但看起来没有其他相关内容。我以前没有在 Greasemonkey/JS 中真正编码过，所以任何帮助都将不胜感激。我正在使用用于单击按钮[的现有用户脚本。](http://userscripts.org/scripts/review/86606)`Ctrl``Enter`

显然我不在乎它是虚拟的“点击”还是只是提交功能的触发器，因为我会说它们是一样的，不是吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T07:12:41.710

这应该是一个简单的工作：

```
// ==UserScript==
// @name           myscript
// @namespace      whatever
// @include        http://path to the internal page
// ==/UserScript==

document.forms[0].submit(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T07:42:46.860

从一位朋友那里得到了一些帮助，他说这应该可行，尽管它不像 dda 的答案那么简单。显然这在 Chrome 中有效：

```
function ClicktheButton(obj) {
  var evt = document.createEvent("MouseEvents");
  evt.initMouseEvent("click", true, true, window,
    0, 0, 0, 0, 0, false, false, false, false, 0, null);
  var cancelled = !obj.dispatchEvent(evt);      
/*

  if(cancelled) {
    // A handler called preventDefault
    alert("cancelled");
  } else {
    // None of the handlers called preventDefault
    alert("not cancelled");
  }
  */
}

var StupidButton = document.querySelector('input[type="submit"][value="I Agree!"]');
ClicktheButton(StupidButton); 
```

它还需要 GreaseMonkey 脚本始终具有的包含等。

# php - 将 index.php 设置为 ruby 中的新主页

> ID：11555449
> 
> 赞同：0
> 
> 时间：2012-07-19T06:57:25.513
> 
> 标签：php, ruby-on-rails, redirect, nginx, routes

我已经有 ruby​​ 运行站点（www.example.com）。现在我想将当前主页更改为新的 index.php（简单的 php 页面而不是 ruby​​ 页面）。我已将我的新 index.php 页面上传到路径中：

```
/var/www/example/current/public/ 
```

现在我可以从此 URL 查看我的新页面`www.example.com/index.php`

但我想从这个 URL 查看我的页面`www.example.com`（这将只显示旧主页）

我在 routes.rb 文件中试过这个

```
root :to => "public/index.php" 
```

但到目前为止还没有运气。我很困惑。

# web-services - 为什么 LinkedIn API 上的某些个人资料名称中有数字？

> ID：11555454
> 
> 赞同：0
> 
> 时间：2012-07-19T06:57:43.553
> 
> 标签：web-services, api, linkedin

当我从 LinkedIn API 检索用户时，他们中的一小部分人的名字中有一些（我猜是连接数）？例如：

```
 http://www.linkedin.com/pub/riccardo-bertaggia-1000/2/195/441 
```

是：

```
 Riccardo Bertaggia 1000+ 
```

与 API 和网页中的一致。这是人们添加的东西还是由LinkedIn内部生成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T02:47:17.043

在您提供的示例中，他们已手动将 1000+ 添加到其名称中。要检索实际连接数，您需要从[Profile API](https://developer.linkedin.com/documents/profile-api)`num-connections`中提取和`num-connections-capped` [字段](https://developer.linkedin.com/documents/profile-fields)。

# java - spring 基于注解的配置——内存消耗太高？

> ID：11555461
> 
> 赞同：13
> 
> 时间：2012-07-19T06:58:08.743
> 
> 标签：java, spring, jvm, spring-annotations

当我注意到我的客户端应用程序（基于 Swing）上疯狂的高 RAM 使用率时，我开始研究它，这似乎与 Spring 中基于 Annotation 的配置有关。正如您将在下面的编辑中看到的那样，我意识到这只发生在 64 位 JVM 上。

请参阅以下测试代码：

**基于xml的配置**

```
<beans ....>
     <bean id="xmlConfigTest" class="at.test.XmlConfigTest" />
</beans>

public class XmlConfigTest extends JFrame {
    public static void main(String[] args) {
        ApplicationContext ctx = new ClassPathXmlApplicationContext("config/applicationContext.xml");
        XmlConfigTest frame = (XmlConfigTest) ctx.getBean("xmlConfigTest");
        frame.setDefaultCloseOperation(EXIT_ON_CLOSE);
        frame.setVisible(true);
    }
} 
```

使用大约 32MB 内存，这对我来说似乎没问题。

现在与**基于注释的配置**相同：

```
@Service
public class AnnotationConfigTestFrame extends JFrame {
    public static void main(String[] args) throws InterruptedException {
        ApplicationContext ctx = new AnnotationConfigApplicationContext("at.test");

        AnnotationConfigTestFrame frame = (AnnotationConfigTestFrame) ctx
            .getBean("annotationConfigTestFrame");
       frame.setDefaultCloseOperation(EXIT_ON_CLOSE);
       frame.setVisible(true);
    }
} 
```

不仅打开框架需要更长的时间，而且内存消耗在启动时飙升至 160MB 内存，然后稳定在 152MB 左右，这对我来说似乎真的很高。请记住，这只是最基本的情况，我开发的 atm 客户端应用程序已经占用了超过 400MB，这对于旧机器来说太多了。

有人对这种行为有解释吗？我不明白..

（顺便说一句，在这里使用 3.1.1.RELEASE。）

**编辑*** 正如 axtavt 所建议的，我还尝试直接使用 Test-Class 作为参数构造 AnnotationConfigApplicationContext，因此不需要进行类路径扫描。不幸的是，没有改变任何关于内存消耗的事情。

**编辑 2**已删除，请参阅编辑 3

**编辑 3** 我现在在同一台机器（Windows 7 64 位）上测试了 32 位和 64 位 JVM 以及上面的测试程序。这是结果：

基于xml的配置：

```
32-Bit JVM: 16MB
64-Bit JVM: 31MB 
```

基于注释的配置：

```
32-Bit JVM: 17MB
64-Bit JVM: 160MB 
```

所以在 32 位 JVM 上，两个程序都很接近，这几乎是我所期望的。但在 64 位上，这是不同的。即使是第一个程序在 64 位上使用两倍的内存，这似乎已经太多了。仍然没有反对第二个程序，它在 64 位上使用了近 10 倍的内存。

**编辑 4** 现在也在 ubuntu 下测试 -> 效果相同。仍然不知道为什么会这样。这对我来说真的是一个交易破坏者

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T21:40:23.800

启动时会创建大量`java.lang.reflect.Method`对象。

![堆转储](../Images/8f3ce1f195ffc1b57b96c79dcd9fb7a8.png)

这些对象有资格进行垃圾收集，但在您的应用程序中，它可能会导致过多的伊甸园收集，从而导致启动时间过长。

这些`java.lang.reflect.Method`对象中的大多数都分配在以下站点：

![java.lang.reflect.Method 对象的分配站点](../Images/2218fc7908fffd6f7f92ec5e627bb0a8.png)

这些似乎是在 Spring 尝试查找从父类和超类`AnnotationConfigTestFrame`继承大量方法的setter 时创建的。我没有仔细阅读相关代码，但作为验证这个假设的快速测试，我做了以下事情：`java.awt``javax.swing`

```
@Service
public class AnnotationConfigTestFrame /* extends JFrame */
{
    public static void main(String[] args) throws InterruptedException
    {
        ApplicationContext ctx = new AnnotationConfigApplicationContext(AnnotationConfigTestFrame.class);

        AnnotationConfigTestFrame frame = (AnnotationConfigTestFrame) ctx
                .getBean("annotationConfigTestFrame");
//        frame.setDefaultCloseOperation(EXIT_ON_CLOSE);
//        frame.setVisible(true);

        waitABit();
        printRuntimeStats();
        System.exit(0);
    }
} 
```

即`AnnotationConfigTestFrame`不继承自`javax.swing.JFrame`. 现在查找 bean 的内存使用量相当低！

这可能会为您提供进一步调试的提示。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-19T07:23:21.747

您构建`AnnotationConfigApplicationContext`（提供带注释的类的基本包）的方式需要类路径扫描，因此它需要时间和内存也就不足为奇了。

如果您想避免类路径扫描，您可以`@Component`尝试`@Configuration`使用`AnnotationConfigApplicationContext`.

# javascript - Mongoose ODM：由于异步，无法保存编码密码

> ID：11555464
> 
> 赞同：1
> 
> 时间：2012-07-19T06:58:14.047
> 
> 标签：javascript, node.js, asynchronous, mongoose

我的问题是当文档已经持久化时，盐生成和密码编码已经准备好。=> mongoosejs 不会等到散列完成，所以我们在数据库中没有密码和盐（但我可以 console.log 它们:)。

有什么可以避免这种行为吗？

1.  服务员功能？
2.  或者我应该将编码部分移动到一些预先保存的中间件中？

**编码方式**

```
UserSchema.methods.encodePassword = function(password) {
    crypto.randomBytes(32, function(err, buf) {
        this.salt = buf.toString('hex');
        console.log(this.salt);
        crypto.pbkdf2(password, this.salt, 25000, 512, function(err, encodedPassword) {
            if (err) throw err;
            this.password = encodedPassword;
            console.log(this.password);
        }.bind(this));
    });
}; 
```

**路线行动**

```
// creates a new user
app.post('/users', function(req, res) {
    // create new user
    var user = new User();
    // assign post
    user.username = req.body.username;
    user.email = req.body.email;
    user.encodePassword(req.body.password);
    user.save(function(err, user) {
        console.log(user);
        if (!err) return res.send(err, 500);
        return res.json(user);
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T07:10:33.123

您需要`encodePassword`进行回调，以便在完成后调用它。

```
UserSchema.methods.encodePassword = function(password, callback) {
    crypto.randomBytes(32, function(err, buf) {
        this.salt = buf.toString('hex');
        console.log(this.salt);
        crypto.pbkdf2(password, this.salt, 25000, 512, function(err, encodedPassword) {
            if (err) return callback(err);
            this.password = encodedPassword;
            console.log(this.password);
            callback();
        }.bind(this));
    });
}; 
```

现在您可以等待它在您的路线中完成。

```
app.post('/users', function(req, res) {
    // create new user
    var user = new User();
    // assign post
    user.username = req.body.username;
    user.email = req.body.email;
    user.encodePassword(req.body.password, function(err) {
        if(err) { /* handle error */ }
        user.save(function(err, user) {
            console.log(user);
            if (!err) return res.send(err, 500);
            return res.json(user);
        });
    });
}); 
```

# python - 我应该如何在 Python 中逐行读取文件？

> ID：11555468
> 
> 赞同：142
> 
> 时间：2012-07-19T06:58:25.200
> 
> 标签：python, python-3.x, python-2.7

在史前时代（Python 1.4），我们做了：

```
fp = open('filename.txt')
while 1:
    line = fp.readline()
    if not line:
        break
    print line 
```

在 Python 2.1 之后，我们做了：

```
for line in open('filename.txt').xreadlines():
    print line 
```

在我们在 Python 2.3 中获得方便的迭代器协议之前，我们可以这样做：

```
for line in open('filename.txt'):
    print line 
```

我见过一些使用更详细的例子：

```
with open('filename.txt') as fp:
    for line in fp:
        print line 
```

这是前进的首选方法吗？

[编辑] 我知道 with 语句确保关闭文件......但为什么不包含在文件对象的迭代器协议中？

* * *

## 回答 #1

> 赞同：238
> 
> 时间：2012-07-19T07:01:48.563

以下是首选的原因之一：

```
with open('filename.txt') as fp:
    for line in fp:
        print line 
```

我们都被 CPython 用于垃圾收集的相对确定性的引用计数方案宠坏了。`with`其他假设的 Python 实现如果使用其他方案来回收内存，则不一定会在没有块的情况下“足够快地”关闭文件。

在这样的实现中，如果您的代码打开文件的速度快于垃圾收集器在孤立文件句柄上调用终结器的速度，您可能会从操作系统收到“打开的文件过多”错误。通常的解决方法是立即触发 GC，但这是一个讨厌的 hack，必须由**每个**可能遇到错误的函数来完成，包括库中的函数。什么样的恶梦。

或者你可以只使用`with`块。

## 奖金问题

（如果只对问题的客观方面感兴趣，请立即停止阅读。）

> 为什么不包含在文件对象的迭代器协议中？

这是一个关于 API 设计的主观问题，所以我有两个部分的主观答案。

在直觉层面上，这感觉是错误的，因为它让迭代器协议做两件不同的事情——遍历行*并*关闭文件句柄——而且让一个看起来很简单的函数做两个动作通常是个坏主意。在这种情况下，感觉特别糟糕，因为迭代器以准功能、基于值的方式与文件内容相关，但管理文件句柄是一项完全独立的任务。将两者无形地压缩到一个动作中，对于阅读代码的人来说是令人惊讶的，并且使推理程序行为变得更加困难。

其他语言基本上也得出了相同的结论。Haskell 曾短暂使用过所谓的“惰性 IO”，它允许您遍历文件并在到达流的末尾时自动关闭它，但现在几乎普遍不鼓励在 Haskell 和 Haskell 中使用惰性 IO用户大多转向更明确的资源管理，如 Conduit，其行为更像`with`Python 中的块。

在技​​术层面上，您可能希望在 Python 中使用文件句柄做一些事情，如果迭代关闭文件句柄，这些事情将无法正常工作。例如，假设我需要对文件进行两次迭代：

```
with open('filename.txt') as fp:
    for line in fp:
        ...
    fp.seek(0)
    for line in fp:
        ... 
```

虽然这是一个不太常见的用例，但请考虑这样一个事实，即我可能刚刚将底部的三行代码添加到最初具有前三行的现有代码库中。如果迭代关闭了文件，我将无法做到这一点。因此，将迭代和资源管理分开可以更容易地将代码块组合成一个更大的、可工作的 Python 程序。

可组合性是语言或 API 最重要的可用性特性之一。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-07-19T07:01:35.600

是的，

```
with open('filename.txt') as fp:
    for line in fp:
        print line 
```

是要走的路。

它不是更冗长。它更安全。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-19T07:45:08.967

如果你被额外的行关闭了，你可以使用这样的包装函数：

```
def with_iter(iterable):
    with iterable as iter:
        for item in iter:
            yield item

for line in with_iter(open('...')):
    ... 
```

在 Python 3.3 中，该`yield from`语句将使它更短：

```
def with_iter(iterable):
    with iterable as iter:
        yield from iter 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-02-03T02:57:38.913

```
f = open('test.txt','r')
for line in f.xreadlines():
    print line
f.close() 
```

# mysql - 在 MySQL 中每行使用 SUM()

> ID：11555471
> 
> 赞同：3
> 
> 时间：2012-07-19T06:58:41.870
> 
> 标签：mysql, sql, database

我正在构建一个非常简单的应用程序，我可以在其中“打卡”各种任务，为此我在 MySQL 中有一个如下所示的数据库表：

```
|ID|user_id |task_id|checkin_time       |checkout_time
------------------------------------------------------------
|31|2       |289    |2012-07-12 09:50:03|2012-07-12 09:51:27
|32|2       |289    |2012-07-12 10:00:05|2012-07-12 13:00:05 
```

我想通过 SQL 查询从中得到的是上周用户每天签入的总时间。我试过这个查询：

```
SELECT COUNT( id ) AS time_id, SUM( checkout_time - checkin_time ) AS total_time, DATE( checkout_time ) AS checkout_day
FROM time_table
WHERE user_id =  '2'
AND checkout_time >= ( DATE_SUB( CURDATE( ) , INTERVAL 1 WEEK ) ) 
GROUP BY checkout_day
ORDER BY checkout_day ASC 
```

这给出了一个非常好的结果，但是如果一天有多个“签入”会出现一些严重的并发症——比如`SUM( checkout_time - checkin_time )`第一个 checkin_time 和最后一个 checkout_time——这并不一定代表用户签入的时间（除非他 100% 的时间都被检查过）。

我想要的是让 SUM() 获取每个总和，然后将它们每天加起来。

关于我如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T07:04:01.997

使用子查询获取时间差，然后求和：

```
SELECT 
  COUNT( id ) AS time_id, 
  SUM( time_diff ) AS total_time, 
  DATE( checkout_time ) AS checkout_day
FROM (
  select 
    id, 
    checkout_time - checkin_time as time_diff, 
    checkout_time
  from time_table)
WHERE user_id =  '2'
AND checkout_time >= ( DATE_SUB( CURDATE( ) , INTERVAL 1 WEEK ) ) 
GROUP BY checkout_day
ORDER BY checkout_day ASC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T07:14:16.407

试试这个：

“天”的区别：

```
SELECT COUNT( id ) AS time_id, SUM( TO_DAYS(checkout_time) - TO_DAYS(checkin_time) ) AS total_time, DATE( checkout_time ) AS checkout_day
FROM time_table
WHERE user_id =  '2'
AND checkout_time >= ( DATE_SUB( CURDATE( ) , INTERVAL 1 WEEK ) ) 
GROUP BY checkout_day
ORDER BY checkout_day ASC 
```

“秒”的区别：

```
SELECT COUNT( id ) AS time_id, SUM( UNIX_TIMESTAMP(checkout_time) - UNIX_TIMESTAMP(checkin_time) ) AS total_time, DATE( checkout_time ) AS checkout_day
    FROM time_table
    WHERE user_id =  '2'
    AND checkout_time >= ( DATE_SUB( CURDATE( ) , INTERVAL 1 WEEK ) ) 
    GROUP BY checkout_day
    ORDER BY checkout_day ASC 
```

# javascript - Javascript：防止浏览器在调用服务器时冻结

> ID：11555472
> 
> 赞同：0
> 
> 时间：2012-07-19T06:58:47.993
> 
> 标签：javascript, progress-indicator

我使用 jquery 在调用服务器之前显示进度指示器。通话返回后，我隐藏了进度指示器。我注意到的问题是进度指示器永远不会显示并且浏览器窗口会冻结，直到对客户端的调用返回。我该如何防止这种情况。我希望进度指示器在通话进行时进行动画处理。

我正在使用 $.ajax 方法来调用服务器。这是代码。请注意，我没有显示对 $.ajax 的调用，因为它隐藏在调用调用中，但请确保它被调用。

```
// Show progess indicator while waiting.
var imgAjaxSaving = $("#imgAjaxSaving");
imgAjaxSaving.show();

// Call server
developerServiceProxy.invoke
("SaveAppSpec",
    { "appSpec": appSpec },
    function (result)
    {
      // Hide the progress indicator.
      imgAjaxSaving.hide();
    },
    AjaxError, false, false
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T06:59:58.953

您可以使用异步调用并使用回调函数来隐藏进度条。

看着：

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

此外，确保选项中的 async 等于 true（这是默认设置）。

# iphone - 显示特定按钮时如何播放音乐？

> ID：11555474
> 
> 赞同：0
> 
> 时间：2012-07-19T06:59:05.667
> 
> 标签：iphone, xcode, audio

我有这个正在查看的代码确实加载了：

```
NSURL *url = [NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/CPOP MUSIC.mp3",[[NSBundle mainBundle] resourcePath]]];
NSError *error;
audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:&error];
audioPlayer.numberOfLoops = -1;

if (audioPlayer == nil)
    NSLog([error description]);             
else 
    [audioPlayer play]; 
```

当用户按下一个名为“播放”的按钮时，他们会播放动画和[audioplayer stop]；使用，动画后出现两个按钮，回放和菜单。我将如何在代码中声明“当按钮“重播”和“菜单”显示 [audioplayer play];?? 谢谢，我是初学者，所以请放轻松，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T07:04:56.690

是的，要从 audioPlayer 重播，您需要调用

```
[audioplayer play] 
```

您可以通过[AVAudioPlayer 文档](http://developer.apple.com/library/ios/#DOCUMENTATION/AVFoundation/Reference/AVAudioPlayerClassReference/Reference/Reference.html)深入了解 AVAudioPlayer。

希望这可以帮助。

# android - 按钮 onClick 事件在 Android 中不会触发

> ID：11555477
> 
> 赞同：1
> 
> 时间：2012-07-19T06:59:16.150
> 
> 标签：android, textview, onclicklistener, settext

我为android中的一个活动编写了以下代码：

```
import java.util.Date;
import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.DatePicker;
import android.widget.EditText;
import android.widget.TextView;
import android.support.v4.app.NavUtils;

public class Step1Activity extends Activity {

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_step1);
    Button calculateButton = (Button) findViewById(R.id.buttonCalculate);
    calculateButton.setOnClickListener(new OnClickListener() {

      public void onClick(View v) {

        EditText fullname= (EditText)findViewById(R.id.editText1); // !!Breakpoint!!
        DatePicker birthdate= (DatePicker)findViewById(R.id.datePickerDateofBirth);
        int test=birthdate.getYear();
        TextView result=(TextView)findViewById(R.id.textView2);

        result.setText(new Integer( lifepath).toString()+" "+new Integer(test).toString());

      }
    });
  }

  @Override
  public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_step1, menu);
    return true;
  }

} 
```

但是，当我单击 calculateButton（具有 onclick 事件）时，它什么也不做。我拥有的文本视图根本没有更新。

我什至在 onClick 的第一行（在 Eclipse 中）放了一个断点，它永远不会停在那里。

这是 activity1 的布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:text="Your full name:"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <EditText
        android:id="@+id/editText1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="14dp"
        android:ems="10"
        android:inputType="textPersonName" />

    <TextView
        android:id="@+id/TextView01"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_margin="5dip"
        android:layout_below="@+id/editText1"
        android:text="Your date of birth:"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <DatePicker
        android:id="@+id/datePickerDateofBirth"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <Button
        android:id="@+id/buttonCalculate"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:text="Calculate Now" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Large Text"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    </LinearLayout>
</RelativeLayout> 
```

有什么问题？我能做些什么来确保我做的一切都是正确的？

ps 我不知道这是否重要，但我已经通过 MainActivity 上的按钮单击事件以这种方式打开了此活动 1：

```
setContentView(R.layout.activity_step1); 
```

显然，该按钮的事件工作得很好。

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T07:02:25.250

你有没有导入这个

```
import android.view.View.OnClickListener; 
```

试试这个

将这 4 行放在 setOnClickListener 之外

```
EditText fullname= (EditText)findViewById(R.id.editText1); // !!Breakpoint!!
DatePicker birthdate= (DatePicker)findViewById(R.id.datePickerDateofBirth);
int test=birthdate.getYear();
final TextView result=(TextView)findViewById(R.id.textView2);

Button calculateButton = (Button) findViewById(R.id.buttonCalculate);
calculateButton.setOnClickListener(new OnClickListener() {

 public void onClick(View v) {

    result.setText(new Integer( lifepath).toString()+" "+new Integer(test).toString());

  }
} 
```

看到这在我的代码中有效

```
 btnSignUp = (Button) findViewById(R.id.btnSignUp);

    btnSignIn.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent i = new Intent(WepwareActivity.this, SignInActivity.class);
            startActivity(i);
        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T07:08:52.090

你可以试试这个方法——

1) View.OnClickListener

```
Button calculateButton = (Button) findViewById(R.id.buttonCalculate);
calculateButton.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {

    EditText fullname= (EditText)findViewById(R.id.editText1); // !!Breakpoint!!
    DatePicker birthdate= (DatePicker)findViewById(R.id.datePickerDateofBirth);
    int test=birthdate.getYear();
    TextView result=(TextView)findViewById(R.id.textView2);

    result.setText(new Integer( lifepath).toString()+" "+new Integer(test).toString());

  }
}); 
```

2) OnClickListener

```
Button calculateButton = (Button) findViewById(R.id.buttonCalculate);
calculateButton.setOnClickListener(this);

// outside of oncreate. This will automatically created when you're let implement the onclick listener to your activity
@Override
public void onClick(View v) 
{
    switch(v.getId())
    {

    case R.id.buttonCalculate:

        EditText fullname= (EditText)findViewById(R.id.editText1); // !!Breakpoint!!
        DatePicker birthdate= (DatePicker)findViewById(R.id.datePickerDateofBirth);
        int test=birthdate.getYear();
        TextView result=(TextView)findViewById(R.id.textView2);

        result.setText(new Integer( lifepath).toString()+" "+new Integer(test).toString());

    break;
    }
} 
```

**更新**

```
package dummy.usage;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.DatePicker;
import android.widget.EditText;
import android.widget.TextView;

public class DummyUsageActivity extends Activity 
{
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.third);

        Button calculateButton = (Button) findViewById(R.id.buttonCalculate);
        calculateButton.setOnClickListener(new View.OnClickListener() {

          public void onClick(View v) {

            EditText fullname= (EditText)findViewById(R.id.editText1); // !!Breakpoint!!
            DatePicker birthdate= (DatePicker)findViewById(R.id.datePickerDateofBirth);
            int test=birthdate.getYear();
            TextView result=(TextView)findViewById(R.id.textView2);

            String lifepath = fullname.getText().toString();
            result.setText(lifepath+" "+new Integer(test).toString());
          }
        });
    }
} 
```

从你的代码。首先我得到了一个`NumberFormatException`我刚刚删除了`new Integer()`你`lifepath`的`TextView`并且，它似乎工作正常。见下面的屏幕 -

![截屏](../Images/70edb34bc7afbbbc2598d9b102431070.png)

# windows-ce - IOCTL_HAL_GET_HWENTROPY 的目的是什么

> ID：11555480
> 
> 赞同：2
> 
> 时间：2012-07-19T06:59:36.573
> 
> 标签：windows-ce

Windows CE 5.0 OAL 可以实现这些 KernelIoControl 代码

*   [IOCTL_HAL_GET_HWENTROPY](http://msdn.microsoft.com/en-us/library/aa447248.aspx)
*   [IOCTL_HAL_GET_RANDOM_SEED](http://msdn.microsoft.com/en-us/library/ms904454.aspx)

OAL 生成的这些值是做什么用的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T22:40:10.503

它们被用作加密随机数生成器实现的一部分，`CryptGenRandom`. 这个想法是，该设备可以提供一些真正随机性的来源作为该过程的输入。否则，生成器可能有些可预测。（虽然没有那么糟糕`rand()`。）

如果您在设备上使用任何形式的加密（例如 SSL），您应该使用良好的数据源来实现这些 IOCTL。

资料来源：[什么种子 CeGenRandom？](http://www.tech-archive.net/Archive/WindowsCE/microsoft.public.windowsce.platbuilder/2004-08/1170.html)

# lotus-notes - 如何在重复控制中获取最后一个文档的句柄

> ID：11555486
> 
> 赞同：0
> 
> 时间：2012-07-19T06:59:55.833
> 
> 标签：lotus-notes, xpages, lotus-domino

我有一个重复控件，可以循环浏览视图中的文档，并在计算字段中返回如下内容：

```
<li>Link here</li> 
```

我需要一种方法或方法来获取最后一个索引，当达到它时，计算字段应该返回：

```
<li class="last">Last link here</li> 
```

就像是：

```
if(index.lastDoc()){
    return "<li class="last"></li>
    } else {
    return "<li></li>
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:28:24.583

好的，我明白了，我一直在这样做，但我不知道索引是从 0 开始的。我所要做的就是加一个。

```
var docs = servicesData.getAllEntries().getCount();

if (repeatCount + 1 == docs) 
```

# c# - 如何使用 MsBuild 编译 windows Phone 的代码。

> ID：11555493
> 
> 赞同：0
> 
> 时间：2012-07-19T07:00:10.160
> 
> 标签：c#, visual-studio, windows-phone

如何使用 MsBuild 编译 Windows phone 7 的代码？MsBild 窗口突然出现又消失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T07:05:52.247

当然这是可能的，但这会花费很多不必要的时间，而且对于不知道自己在做什么的人来说是相当困难的（没有冒犯）。

但是你为什么不使用IDE呢？您只需下载 Visual Studio 2010（以及更高版本的 2012）Express 并开始为 Windows Phone 开发！只需查看[http://create.msdn.com/](http://create.msdn.com/)

但请记住，如果您想将您的应用程序投放市场，每年将花费您 100 美元。

# netty - netty 中的全局原子图

> ID：11555495
> 
> 赞同：2
> 
> 时间：2012-07-19T07:00:17.400
> 
> 标签：netty

我需要全局保留一个 Map（可以处理 put、remove 和 replace 方法的原子），像这样使用 ChannelLocal 是个好主意：

```
public final static ChannelLocal<Map<String, Integer>> globalMap = new ChannelLocal<Map<String, Integer>>(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T07:04:14.463

是的，这正是 ChannelLocal 的用例。

# android - Android Listview 过滤与重新填充

> ID：11555500
> 
> 赞同：2
> 
> 时间：2012-07-19T07:01:05.137
> 
> 标签：android, listview, filter, android-listview

经过一些建议真的。我的应用程序使用媒体存储光标在加载时填充列表视图。这是提取链接到用户定义文件夹的音乐，在大多数情况下，这将是他们存储的所有音乐。我有一个 beta 测试仪，它使用的是爱可视平板电脑，上面有大约 10000 首歌曲，运行 android 2.2。虽然大多数用户的性能都相当出色，但我想改善这样的用户的体验。

目前的流程：

用户加载应用程序。应用程序找到默认文件夹 应用程序使用该文件夹内和该文件夹下的音乐填充列表视图 用户移动到树更下方的文件夹，列表视图根据所选文件夹重新填充用户再次移动....列表根据所选文件夹重新填充。 ..

所以我想知道的是 - 使用以下过程是否更快/更有效：用户加载应用程序应用程序找到默认文件夹应用程序使用该文件夹内和该文件夹下的音乐填充列表视图用户移动到树中的一个文件夹，列表被过滤到那个文件夹如果用户移动到比默认数据更高的树（即潜在的新文件），列表视图被重新填充，但仅在这种情况下。

所以基本上，我的问题是“过滤与重新填充相比如何？”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T08:18:03.793

一个非常好的问题。让我试着回答这个问题。

过滤实际上是重新填充`ListView`，而您创建/获取一个新集合并`Adapter`通过调用`notifyDataSetChanged`.

listView 的“繁重”工作是`getView`调用它的适配器。我自己对此进行了测试，如果每次调用 getView 时都膨胀一个新视图，性能就会下降。天上。

构建 ListView 的适配器以便可以重新使用已经膨胀的视图，从而解决上述问题。此外，仅加载可见视图，因此`Adapter`如果您告诉它的集合是 10000 个项目，它不会创建 10000 个视图。

`notifyDataSetChanged`将告诉适配器重建 listviews 内容，但它仍然包含以前膨胀的视图。所以这是一个巨大的性能胜利。

所以我对你的建议是，当你使用相同的“行布局”来重新填充`ListView`using时`notifyDataSetChanged`。我自己多次实现了这一点，没有注意到任何 UI 性能问题。只需确保在后台线程中过滤您的收藏。（`AsyncTask`在这里派上用场）。

最后一个提示：你有没有很旧的手机？或者你认识的人会这样做？找到你能找到的最慢的手机，并在上面测试你的应用程序的性能。我自己有一个 HTC Legend，它已经过时而且速度很慢，但非常适合性能测试。如果它在我的（旧）手机上运行，​​它可以在任何手机上运行。

如果您的应用程序流动，则为伪代码示例：

```
public class FolderListActivity extends Activity implements OnItemSelected {

    // NOTE: THIS IS PSEUDO CODE

    private ListView listView
    private Adapter adapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstaceState);

        // setContentView here 
        listView = (ListView)findViewById(R.id.your_listview_here);
        listView.setOnItemSelectedListener(this);
    }

    public class AsyncLoadMusicLocationTask extends AsyncTask<Void, Void, List<String>> {

        public List<String> doInBackground(Void... params) {
            // Load the information here, this happens in the background
            // using that cursor, i'm not sure what kind of things you are using
            // So I assumed a List of Strings
        }

        @Override
        public void onPostExecute(List<String> result) {
            // Here we have our collection that was retrieved in a background thread
            // This is on the UI thread

            // Create the listviews adapter here
            adapter = new Adapter(result, and other parameters);
            listView.setAdapter(adapter);
        }
    }

    @Override
    public void onItemSelect(Some params, not sure which) {

        // THIS SHOULD BE DONE ON THE BACKGROUND THE PREVENT UI PERFORMANCE ISSUES

        List<String> collection = adapter.getObjects();
        for (int i = 0; i < collection.size(); i++) {
            // Filter here
        }

// this method will most probably not exist, so you will need to implement your own Adapter class
        adapter.setObjects(collections);
        adapter.notifyDataSetChanged();
    }
} 
```

# objective-c - 进入全屏时，嵌入在 UIWebView 中的 Youtube 在 iPad 上导致崩溃

> ID：11555502
> 
> 赞同：5
> 
> 时间：2012-07-19T07:01:12.967
> 
> 标签：objective-c, ios, ipad, youtube, freeze

我正在尝试使用[这种技术](http://mobiledevelopertips.com/video/display-youtube-videos-without-exiting-your-application.html)的混合嵌入一个 Youtube 视频，以及[这个 Youtube SDK 博客文章](http://apiblog.youtube.com/2009/02/youtube-apis-iphone-cool-mobile-apps.html)在一个通用应用程序中。iPhone 版本，使用相同的代码，工作正常。在 iPad 上，视频确实嵌入了，并且它以嵌入的形式播放良好，但是一旦您点击全屏按钮，应用程序就会崩溃（按钮没有响应，设备没有旋转）。Youtube 视频中的音乐一直在播放。

没有记录错误消息，但应用程序确实注册为“暂停”或在 xCode 中挂起。com.apple.libdispatch-manager 每次崩溃时都在线程 2 上。问我问题，我会给你有关错误的更多信息，但我不知道从哪里开始。

我试过了：

*   改变 UIWebView 框架的大小
*   UIWebView 在 UIScrollView 中，但是如果我将它从滚动视图中取出并将其添加到视图中，问题是相同的。
*   改变视频
*   将我在 UIWebView 中使用的 html 从[this](http://mobiledevelopertips.com/video/display-youtube-videos-without-exiting-your-application.html)更改为[this](http://apiblog.youtube.com/2009/02/youtube-apis-iphone-cool-mobile-apps.html)，但没有结果
*   将 youtube 链接的格式从 ?v=uniqueID 更改为 /v/uniqueID
*   检查呈现视图是 rootviewcontroller（它是，但视频嵌入在模态中，这不是 rootviewcontroller）。

我正在为 iOS 5.1 构建，**如果在 iOS6 上运行，则不会发生这种情况**。

嵌入视频的视图在手机和 iPad 上都是模态的。应用程序中没有发生黑客或不寻常的事情。

似乎有人在谈论 Evernote 的应用程序有[类似的问题](http://discussion.evernote.com/topic/25878-bug-crashing-on-youtube-full-screen/)，但我不知道它是否相关。

供您参考，这里是 YouTubeView 子类（UIWebView 的子类）：

```
- (YouTubeView *)initWithStringAsURL:(NSString *)urlString frame:(CGRect)frame;
{
    if (self = [super init]) 
    {
        // Create webview with requested frame size
        self = [[YouTubeView alloc] initWithFrame:frame];

// HTML to embed YouTube video
//      NSString *youTubeVideoHTML = @"<html><head>
//                                       <body style=\"margin:0\">
//                                         <embed id=\"yt\" src=\"%@\"
//                                                type=\"application/x-shockwave-flash\"
//                                                width=\"%0.0f\" height=\"%0.0f\">
//                                         </embed>
//                                       </body>
//                                     </html>";

        NSString *youTubeVideoHTML = @"<html><head><meta name = \"viewport\" content = \"initial-scale = 1.0, user-scalable = no, width = %0.0f\"/></head><body style=\"background:#FFF;margin-top:0px;margin-left:0px\"><div><object width=\"%0.0f\" height=\"%0.0f\"><param name=\"movie\" value=\"%@\"></param><param name=\"wmode\" value=\"transparent\"></param><embed src=\"%@\"type=\"application/x-shockwave-flash\" wmode=\"transparent\" width=\"%0.0f\" height=\"%0.0f\"></embed></object></div></body></html>";

        // Populate HTML with the URL and requested frame size
//      NSString *html = [NSString stringWithFormat:youTubeVideoHTML, urlString, frame.size.width, frame.size.height];

        NSLog(@"html:\n %@", youTubeVideoHTML);

        NSString *html = [NSString stringWithFormat:youTubeVideoHTML, frame.size.width, frame.size.width, frame.size.height, urlString, urlString, frame.size.width, frame.size.height];

        NSLog(@"html:\n %@", html);

        // Load the html into the webview
        [self loadHTMLString:html baseURL:nil];
    }

    return self;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T20:11:30.233

iOS 5.0 和 iOS 5.1 上的模态视图是导致全屏视频崩溃的问题，AFAIK。他们只是改变了那个版本的 iOS (`parentViewController`和`presentingViewController`) 中的视图层次结构，这就是后果。我很久以前在这里问过这个问题，[这里](https://stackoverflow.com/questions/8472959/uiviewcontrollerhierarchyinconsistency-and-qiucktimeplugin)还有一个相同的问题[，](https://stackoverflow.com/questions/7905258/ios5-exception-on-uiwebview-in-modal-uiviewcontroller-playing-youtube-video)但仍然没有人知道该怎么做。

首先，他们在 6.0 中修复了它，我想，这很好。

对于 5.1，我们稍微改变了设计并避免了模态视图。这样做，如果在你的情况下是可能的。

# c++ - Boost::Spirit 的phrase_parse 结果

> ID：11555518
> 
> 赞同：5
> 
> 时间：2012-07-19T07:02:31.620
> 
> 标签：c++, parsing, boost-spirit

大家好，我是 boost 和 boost::spirit 的新手，所以对于菜鸟问题​​我很抱歉。

当我使用`qi::phrase_parse`函数时，该函数仅返回指示解析是否成功的 bool 变量，但我不知道在哪里可以找到解析结果...某种语法树等。

如果我使用树的宏`#define BOOST_SPIRIT_DEBUG`XML 表示将打印在标准输出上，但这些节点必须存储在某处。你能帮我吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-19T11:44:18.257

您可以“绑定”属性引用。`qi::parse`, `qi::phrase_parse`（和相关的）接受将用于接收公开属性的可变参数。

一个简单的例子是：（**编辑**也包括一个`utree`例子）

```
#include <boost/fusion/adapted.hpp>
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/support_utree.hpp>

namespace qi = boost::spirit::qi;

int main()
{
    using namespace qi;

    std::string input("1 2 3 4 5");
    std::string::const_iterator F(input.begin()), f(F), l(input.end());

    std::vector<int> ints;
    if (qi::phrase_parse(f = F, l, *qi::int_, qi::space, ints))
        std::cout << ints.size() << " ints parsed\n";

    int i;
    std::string s;
    // it is variadic:
    if (qi::parse(f = F, l, "1 2 " >> qi::int_ >> +qi::char_, i, s))
        std::cout << "i: " << i << ", s: " << s << '\n';

    std::pair<int, std::string> data;
    // any compatible sequence can be used:
    if (qi::parse(f = F, l, "1 2 " >> qi::int_ >> +qi::char_, data))
        std::cout << "first: " << data.first << ", second: " << data.second << '\n';

    // using utree:
    boost::spirit::utree tree;
    if (qi::parse(f = F, l, "1 2 " >> qi::int_ >> qi::as_string [ +qi::char_ ], tree))
        std::cout << "tree: " << tree << '\n';

} 
```

输出：

```
5 ints parsed
i: 3, s:  4 5
first: 3, second:  4 5
tree: ( 3 " 4 5" ) 
```

一些具有类似“AST”的数据结构的解析器示例：

*   [C ++中的布尔表达式（语法）解析器](https://stackoverflow.com/questions/8706356/boolean-expression-grammar-parser-in-c/8707598#8707598)
*   [Boost::Spirit 表达式解析器](https://stackoverflow.com/questions/8464969/boostspirit-expression-parser/8468822#8468822)

如果您想要一个非常通用的 AST 结构，请查看`utree`： http: [//www.boost.org/doc/libs/1_50_0/libs/spirit/doc/html/spirit/support/utree.html](http://www.boost.org/doc/libs/1_50_0/libs/spirit/doc/html/spirit/support/utree.html)

# javascript - 如何在 Jquery mobile 中处理动态选择菜单的事件？

> ID：11555524
> 
> 赞同：0
> 
> 时间：2012-07-19T07:03:08.813
> 
> 标签：javascript, jquery-mobile, jquery

我正在使用 Jquery mobile 制作动态选择菜单。我面临的第一个问题是占位符没有出现在我在html文件中静态创建的选项“--select day--”和“--select time--”中。它只是加载动态创建的值。第二个问题和重要的一个问题是，如果用户选择“Today-Drop”，我想加载“PMtime”，如果用户选择“Tomorrow-Pick up”选项，我想加载“AMtime”。我为它创建了一个事件处理程序，但它似乎不起作用。请帮助.... HTML代码：

```
<body onload="init();">
<form method="get" name="datarange">
<div data-role="fieldcontain">

    <select id="select-choice-1" name="select-choice-1"  class="target" >
        <option data-placeholder="true">--Select Day--</option>

  </select>
    </div>
<div data-role="fieldcontain">
<select id="select-choice-2" name="select-choice-2" >
    <option data-placeholder="true">--Select Time--</option>

</select>
    <script>
        $('.target').change(function(){
                            var str="";
                            $("select option:selected".each(function(){
                                                            str+=$(this).text() + "";
                                                            });
                              if(str.text=="Today-Drop")
                              {
                              check=0;
                              }
                              else
                              {
                              check=1;
                              }
                            Load_selected_time(check);

                            })
                            .trigger('change');

   </script>
    </div> 
```

在我的 JS 文件中

```
var check=0;
var day=[
     {name : "Today-Drop",id: "drop"},
     {name : "Tomorrow-Pick up",id: "pickup"}];
var PMtime=[
        {name : "3:00 PM", id: "3"},
        {name : "4:00 PM", id: "4"},
        {name : "7:30 PM", id: "730"},
        {name : "9:00 PM", id: "9"},
        {name : "10:15 PM",id: "1015"},
        {name : "11:00 PM",id: "11"}];
var AMtime=[
        {name : "12:00 AM", id: "12"},
        {name : "1:00 AM" ,id: "1"},
        {name : "2:00 AM" ,id: "2"},
        {name : "3:00 AM" ,id: "3am"},
        {name : "4:00 AM" ,id: "4"},
        {name : "5:00 AM" ,id: "5"},
        {name : "6:00 AM" ,id: "6"},
        {name : "7:00 AM" ,id: "7"},
        {name : "8:00 AM" ,id: "4"},
        {name : "9:00 AM" ,id: "5"}];

function init(){
                 Load_selected();}
function Load_selected() {

var arraytoload = day;
var  optionlist = '';
var i = 0;

$.each(arraytoload, function (index,item) {
       if (i == 0) {
       optionlist += '<option selected="' + item.id + '">' + item.name + '</option>';
       }
       else {
       optionlist += '<option value="' + item.id + '">' + item.name + '</option>';
       }
       i++;
       })
optionlist += '';
$("#select-choice-1").html(optionlist).selectmenu('refresh', true);
}

function Load_selected_time(check){
if(check==0){
    var arraytoload = PMtime;}
else{
    var arraytoload = AMtime;
}
var  optionlist = '';
var i = 0;

$.each(arraytoload, function (index,item) {
       if (i == 0) {
       optionlist += '<option selected="' + item.id + '">' + item.name + '</option>';
       }
       else {
       optionlist += '<option value="' + item.id + '">' + item.name + '</option>';
       }
       i++;
       })
optionlist += '';
$("#select-choice-2").html(optionlist).selectmenu('refresh', true);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T07:41:36.773

采用`.on()`

```
 $('.target').on('change',function(){  

  // your code here.

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T07:45:30.917

出现第一个问题（未显示占位符），因为您要覆盖两者的内容。

尝试在两个函数中初始化你的'optionslist'字符串

```
var optionslist = $('yourselect').html(); 
```

在将项目添加到“每个”循环中的该字符串之前。

# matlab - 计算单元格数组matlab中的单词

> ID：11555527
> 
> 赞同：4
> 
> 时间：2012-07-19T07:03:13.657
> 
> 标签：matlab

我有一个 500x1 的单元格数组，每一行都有一个特定的单词。我如何计算单词的出现次数并显示它并显示每个出现的百分比。

例如

这些词的出现是：

```
Ans =

     200 Green
     200 Red
     100 Blue 
```

这些词的百分比：

```
Ans = 

     40% Green
     40% Red
     20% Blue 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T07:25:08.643

这个想法是 strcmpi 按元素比较单元矩阵。这可用于将输入名称与输入中的唯一名称进行比较。试试下面的代码。

```
% generate some input
input={'green','red','green','red','blue'}';

% find the unique elements in the input
uniqueNames=unique(input)';

% use string comparison ignoring the case
occurrences=strcmpi(input(:,ones(1,length(uniqueNames))),uniqueNames(ones(length(input),1),:));

% count the occurences
counts=sum(occurrences,1);

%pretty printing
for i=1:length(counts)
    disp([uniqueNames{i} ': ' num2str(counts(i))])
end 
```

我把百分比计算留给你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T07:30:16.903

首先找到数据中的唯一词：

```
% set up sample data:
data = [{'red'}; {'green'}; {'blue'}; {'blue'}; {'blue'}; {'red'}; {'red'}; {'green'}; {'red'}; {'blue'}; {'red'}; {'green'}; {'green'}; ]
uniqwords = unique(data); 
```

然后在数据中找到这个唯一词的出现：

```
[~,uniq_id]=ismember(data,uniqwords); 
```

然后简单地计算找到每个唯一单词的次数：

```
uniq_word_num = arrayfun(@(x) sum(uniq_id==x),1:numel(uniqwords)); 
```

要获得百分比，请除以数据样本总数的总和：

```
uniq_word_perc = uniq_word_num/numel(data) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T20:52:26.047

这是我的解决方案，应该很快。

```
% example input
example = 'This is an example corpus. Is is a verb?';
words = regexp(example, ' ', 'split');

%your program, result in vocabulary and counts. (input is a cell array called words)
vocabulary = unique(words);
n = length(vocabulary);
counts = zeros(n, 1);
for i=1:n
    counts(i) = sum(strcmpi(words, vocabulary{i}));
end

%process results
[val, idx]=max(counts);
most_frequent_word = vocabulary{idx};

%percentages:
percentages=counts/sum(counts); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-03T09:08:11.947

不使用显式 fors 的棘手方法..

```
clc
close all
clear all

Paragraph=lower(fileread('Temp1.txt'));

AlphabetFlag=Paragraph>=97 & Paragraph<=122;  % finding alphabets

DelimFlag=find(AlphabetFlag==0); % considering non-alphabets delimiters
WordLength=[DelimFlag(1), diff(DelimFlag)];
Paragraph(DelimFlag)=[]; % setting delimiters to white space
Words=mat2cell(Paragraph, 1, WordLength-1); % cut the paragraph into words

[SortWords, Ia, Ic]=unique(Words);  %finding unique words and their subscript

Bincounts = histc(Ic,1:size(Ia, 1));%finding their occurence
[SortBincounts, IndBincounts]=sort(Bincounts, 'descend');% finding their frequency

FreqWords=SortWords(IndBincounts); % sorting words according to their frequency
FreqWords(1)=[];SortBincounts(1)=[]; % dealing with remaining white space

Freq=SortBincounts/sum(SortBincounts)*100; % frequency percentage

%% plot
NMostCommon=20;
disp(Freq(1:NMostCommon))
pie([Freq(1:NMostCommon); 100-sum(Freq(1:NMostCommon))], [FreqWords(1:NMostCommon), {'other words'}]); 
```

# c# - 遍历 Datagrid 的 ItemSource 的列

> ID：11555529
> 
> 赞同：1
> 
> 时间：2012-07-19T07:03:15.753
> 
> 标签：c#, wpf

我有一个网格需要在数据绑定后立即隐藏某些列。到目前为止，这是我的代码：

```
private IEnumerable<DataGridColumn> GetDataGridColumns(DataGrid grid)
{
    var itemsSource = grid.ItemsSource as IEnumerable;

    if (null == itemsSource) yield return null;

    foreach (var item in itemsSource)
    {
        var column = grid.ItemContainerGenerator.ContainerFromItem(item) as DataGridColumn;
        if (null != column) yield return column;
    }
}

private void LoadData()
{
    GridMain.ItemsSource = (new VTAEEntities()).OrganizationInterfaces.ToList();

    foreach (DataGridColumn Column in GetDataGridColumns(GridMain))
    {
        // Hiding columns
        if (Column.Header as String != null) {
            String tempHeader = Column.Header as String;

            String[] unrequiredColumns = new String[] { 
                "Instances",
                "Interfaces",
                "Organizations",
                "RegisteredCallerOnly"
            };

            if (unrequiredColumns.Contains(tempHeader)) {
                Column.Visibility = System.Windows.Visibility.Hidden;
            }
        }

        // Read-only columns
        if (Column.Header as String != null)
        {
            String tempHeader = Column.Header as String;

            String[] unrequiredColumns = new String[] { 
                "InstanceId",
                "InterfaceId",
                "OrganizationId"
            };

            if (unrequiredColumns.Contains(tempHeader))
            {
                Column.IsReadOnly = true;
            }
        }
    }
} 
```

所有不需要的列+我想只读的列都在那里。调试后，我意识到 GridMain.Columns 始终为 0 计数。如何遍历 ItemSource 中的列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T07:14:42.660

哇，我想你在这里偏离了道路。

Itemcontainer 实际上是 WPF DG 中的行，而不是列。

但你可以更轻松地实现你想要的：

```
foreach (var Column in GridMain.Columns)
{
    // ...
} 
```

另外，我建议您在您的情况下使用 Visibility.Collapsed 而不是 Visibility.Hidden （否则仍将保留空间）

至于为什么你的 Columns.Count = 0，我猜是因为当你实际运行这段代码时，你的 DG 还没有被 WPF 渲染。所以我会在遍历 Datagrid 的列之前抛出一个 GridMain.UpdateLayout() 。

不过可能还不够。在这种情况下，您必须使用以下代码：

```
UpdateLayout();
Action emptyDelegate = delegate() { };
Dispatcher.Invoke(System.Windows.Threading.DispatcherPriority.Render, emptyDelegate); 
```

（强制更新）

否则，我建议您使用 DG 中的事件处理程序即时隐藏列`AutoGeneratingColumn`，或者在使用 DG 的`Loaded`事件渲染 DG 之后进行隐藏

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T07:10:21.013

如果你想隐藏列而不是你可以使用

```
AutoGeneratingColumn 
```

wpf 网格事件可能对您隐藏列有用。

```
private void DataGrid_AutoGeneratingColumn(object sender, DataGridAutoGeneratingColumnEventArgs e)
{
      DataGridBoundColumn col = e.Column as DataGridBoundColumn;
     //set visiblity by doing the code you wnat ..i.logic to hide column
      if (col.Header.ToString().ToLower() == "id") 
        { 
            col.Visibility = System.Windows.Visibility.Hidden;
        }
} 
```

# java - java图像颜色公式

> ID：11555533
> 
> 赞同：1
> 
> 时间：2012-07-19T07:03:26.037
> 
> 标签：java, colors

我知道灰度的java代码是这样的（0.2126 * red + 0.7152 * green + 0.0722 * blue（我想知道是否有人知道我怎样才能找到更多种类的着色公式，比如如果我想以旧时尚的方式制作图片，更橙色，使其更亮或更暗......更清晰等等

```
 int pixel = image.getRGB(j, i);
 int red = (pixel) & 0xff;
 int green = (pixel >> 8) & 0xff;
 int blue = (pixel >> 16) & 0xff;
 int newPixel = (int) (0.2126 * red  + 0.7152 * green + 0.0722 * blue);
                    image1.setRGB(j, i, newPixel); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T07:08:30.807

您提到的旧时尚方式称为“棕褐色”效果。看一下[这个问题](https://stackoverflow.com/q/5132015/328725)，尤其是[这个答案](https://stackoverflow.com/a/5132043/328725)，它指出了以下代码片段（请注意，我没有编写此代码，只是帮助您找到问题的答案）

```
/**
*
* @param img Image to modify
* @param sepiaIntensity From 0-255, 30 produces nice results
* @throws Exception
*/
public static void applySepiaFilter(BufferedImage img, int
sepiaIntensity) throws Exception
{
// Play around with this. 20 works well and was recommended
// by another developer. 0 produces a grey image
int sepiaDepth = 20;

int w = img.getWidth();
int h = img.getHeight();

WritableRaster raster = img.getRaster();

// We need 3 integers (for R,G,B color values) per pixel.
int[] pixels = new int[w*h*3];
raster.getPixels(0, 0, w, h, pixels);

// Process 3 ints at a time for each pixel. Each pixel has 3 RGB
colors in array
for (int i=0;i<pixels.length; i+=3)
{
int r = pixels[i];
int g = pixels[i+1];
int b = pixels[i+2];

int gry = (r + g + b) / 3;
r = g = b = gry;
r = r + (sepiaDepth * 2);
g = g + sepiaDepth;

if (r>255) r=255;
if (g>255) g=255;
if (b>255) b=255;

// Darken blue color to increase sepia effect
b-= sepiaIntensity;

// normalize if out of bounds
if (b<0) b=0;
if (b>255) b=255;

pixels[i] = r;
pixels[i+1]= g;
pixels[i+2] = b;
}
raster.setPixels(0, 0, w, h, pixels);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T07:07:11.003

我只会玩数字。

> 更多的橙色，

更多的红色和更多的绿色（红色+绿色=黄色）

> 更亮

增加所有因素

> 较暗

减少所有因素

> 更锐利

这是比较周围像素以查找边缘的特定过滤器。这不仅仅是玩弄颜色的问题。

顺便说一句：您应该添加值的上限。即 Math.min(255, Math.max(0, value))

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-05T18:57:15.413

您可以操纵颜色通道之间的比例以改变场景“气氛”。下面的图像是使用[ColorChannel](http://marvinproject.sourceforge.net/en/plugins/colorChannel.html)插件创建的。

![在此处输入图像描述](../Images/119b7f4f08fc9486be4e150b650b889d.png)

算法源代码如下。*getAttribute()*方法获取用户传递的参数（红色、绿色、蓝色）。方法*getIntComponent0*、*getIntComponent1*和*getIntComponent2*获取每个颜色通道（红色、绿色和蓝色）。方法*setIntColor*设置每个通道的值。

```
@Override
public void process
(
    MarvinImage imageIn,
    MarvinImage imageOut,
    MarvinAttributes attrOut,
    MarvinImageMask mask,
    boolean preview
) {

    int vr = (Integer)getAttribute("red");
    int vg = (Integer)getAttribute("green");
    int vb = (Integer)getAttribute("blue");

    double mr = 1+Math.abs((vr/100.0)*2.5);
    double mg = 1+Math.abs((vg/100.0)*2.5);
    double mb = 1+Math.abs((vb/100.0)*2.5);

    mr = (vr > 0? mr : 1.0/mr);
    mg = (vg > 0? mg : 1.0/mg);
    mb = (vb > 0? mb : 1.0/mb);

    int red,green,blue;
    for(int y=0; y<imageIn.getHeight(); y++){
        for(int x=0; x<imageIn.getWidth(); x++){
            red = imageIn.getIntComponent0(x, y);
            green = imageIn.getIntComponent1(x, y);
            blue = imageIn.getIntComponent2(x, y);

            red     = (int)Math.min(red * mr, 255);
            green   = (int)Math.min(green * mg, 255);
            blue    = (int)Math.min(blue * mb, 255);

            imageOut.setIntColor(x, y, 255, red, green, blue);
        }
    }
} 
```

# c# - 从混合了 XML 和纯文本的流中读取

> ID：11555534
> 
> 赞同：2
> 
> 时间：2012-07-19T07:03:31.803
> 
> 标签：c#, .net, xml, stream

我有一个文本流，其中包含任意纯文本和格式良好的 xml 元素的片段。如何阅读它并仅提取 xml 元素？ConformanceLevel 设置为 Fragment 的 XmlReader 在遇到纯文本时仍会引发异常，这对它来说是格式错误的 xml。

有任何想法吗？谢谢

到目前为止，这是我的代码：

```
XmlReaderSettings settings = new XmlReaderSettings();
settings.ConformanceLevel = ConformanceLevel.Fragment;

using (XmlReader reader = XmlReader.Create(stream, settings))
    while (!reader.EOF)
    {
        reader.MoveToContent();
        XmlDocument doc = new XmlDocument();
        doc.Load(reader.ReadSubtree());
        reader.ReadEndElement();
    } 
```

这是一个示例流内容，顺便说一下，我无法控制它：

```
Found two objects:
Object a
<object>
    <name>a</name>
    <description></description>
</object>
Object b
<object>
    <name>b</name>
    <description></description>
</object> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:23:52.800

假设这是一个 hack，如果你用“假”xml 根节点包装你的混合文档，你应该能够做你需要的事情，只在子节点中获取元素类型的节点（即跳过文本节点）根元素：

```
using System;
using System.Linq;
using System.Xml;

static class Program {

    static void Main(string[] args) {

        string mixed = @"
Found two objects:
Object a
<object>
    <name>a</name>
    <description></description>
</object>
Object b
<object>
    <name>b</name>
    <description></description>
</object>
";
        string xml = "<FOO>" + mixed + "</FOO>";
        XmlDocument doc = new XmlDocument();
        doc.LoadXml(xml);
        var xmlFragments = from XmlNode node in doc.FirstChild.ChildNodes 
                           where node.NodeType == XmlNodeType.Element 
                           select node;
        foreach (var fragment in xmlFragments) {
            Console.WriteLine(fragment.OuterXml);
        }

    }

} 
```

# android - 从 NDK 打开 SD 卡 BMP 文件

> ID：11555536
> 
> 赞同：2
> 
> 时间：2012-07-19T07:03:35.060
> 
> 标签：android, android-ndk

任何人都可以帮助我使用代码片段从 SD 卡打开图像文件并将其分配给 NDK 中的变量吗？提前谢谢你..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T07:43:39.140

SD 卡通常位于`/mnt/sdcard/external_sd`Use Android call`Environment.getExternalStorageDirectory().getPath()`以找出实际路径并通过 JNI 将其传递给您的 C 代码。

在 C 代码中获得路径后，只需像普通 C 或 C++ 一样打开文件：

```
FILE* File = fopen( FileName , "rb" );
fclose( File ); 
```

# android - Android 视频在多次播放后停止播放错误 1、2147483648

> ID：11555537
> 
> 赞同：7
> 
> 时间：2012-07-19T07:03:35.223
> 
> 标签：android, android-videoview, android-mediaplayer

好的，这有点令人沮丧，我搜索了 Stack 但似乎没有一个答案有帮助。

我有一个 Android 应用程序，它在屏幕上循环显示不同的内容。有一次它会播放一个视频，同一个视频，从同一个地方加载。

在随机播放数次后，它决定停止播放视频文件并在上面抛出错误（-2147483648），这是一个通用文件未找到/格式不正确的错误。

问题是在出现此错误之前，视频多次正确播放。我尝试了多种解决方法：

*   播放文件的 VideoView（开始）
*   从文件读取的 MediaPlayer + SurfaceView 组合
*   MediaPlayer + SurfaceView 从文件描述符中读取
*   强制权限为世界可读
*   将文件复制到临时文件并播放
*   为 VideoView 和 MediaPlayer 选项手动释放媒体播放器
*   每次播放后运行手动垃圾收集

然而，经过多次播放后，它最终还是会拒绝播放视频。

一个可能相关或不相关的更改是，当从文件描述符播放时，它会引发媒体播放器准备 Java I/O 异常，我认为这可能与文件上发生某种锁定有关。

解决此问题的唯一方法是重新启动设备。重新启动应用程序并不能修复它，它会立即拒绝播放文件。

下面是 VideoView 播放代码：

```
// from main activity
File afile = new File(btvapp.fileroot,btvapp.getDailyVideo().get("FILENAME"));        
afile.setReadable(true, false);
theVideo = (VideoView) findViewById(R.id.videoViewer);
theVideo.requestFocus();
theVideo.setVideoPath(afile.getPath());
theVideo.setOnPreparedListener(this);
theVideo.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {
    @Override
    public void onCompletion(MediaPlayer mp) {
        // TODO Auto-generated method stub
        //mp.release();
        theVideo.stopPlayback();
        mp.release();
            finish();

    }
} );
theVideo.setOnErrorListener(new MediaPlayer.OnErrorListener() {
    @Override
    public boolean onError(MediaPlayer mp, int what, int extra) {
            finish();
            return false;
        }
    });

// play on prepared function
@Override
  public void onPrepared(MediaPlayer mp) {
  // TODO Auto-generated method stub
  mp.start();
} 
```

表面视图几乎完全使用 Android SDK 媒体播放示例，但我认为不值得粘贴代码，因为无论您使用 mediaplayer + surfaceview 方法还是 VideoView 播放方法都会发生错误。

想法？快把我逼疯了。

**更新**：这是完整的日志，包括主应用程序和生成的视频活动

```
07-19 18:47:02.844: V/videpath(7232): /mnt/sdcard/Android/data/au.com.nian.bullertv/files/tmpbtag.mp4
07-19 18:47:03.014: I/dalvikvm(7232): threadid=1: recursive native library load attempt (/system/lib/libmedia_jni.so)
07-19 18:47:03.014: D/MtpDeviceJNI(7232): register_android_mtp_MtpDevice
07-19 18:47:03.014: I/dalvikvm(7232): threadid=1: recursive native library load attempt (/system/lib/libmedia_jni.so)
07-19 18:47:03.014: I/dalvikvm(7232): threadid=1: recursive native library load attempt (/system/lib/libmedia_jni.so)
07-19 18:47:03.024: V/MediaPlayerService(87): Client(56) constructor
07-19 18:47:03.024: V/MediaPlayerService(87): Create new client(56) from pid 7232, uid 10043, 
07-19 18:47:03.034: V/MediaPlayerService(87): setDataSource(/mnt/sdcard/Android/data/au.com.nian.bullertv/files/tmpbtag.mp4)
07-19 18:47:03.034: V/MediaPlayerService(87): media.amsuperplayer.enable is enabled
07-19 18:47:03.034: V/MediaPlayerService(87): media.amsuperplayer.enable is enabled
07-19 18:47:03.034: V/MediaPlayerService(87): player type = 6
07-19 18:47:03.034: V/MediaPlayerService(87): Create AmSuperPlayer
07-19 18:47:03.034: V/AmSuperPlayer(87): [AmSuperPlayer::74]
07-19 18:47:03.034: V/AmSuperPlayer(87): [AmSuperPlayer::76]
07-19 18:47:03.034: V/AmSuperPlayer(87): AmSuperPlayer init now
07-19 18:47:03.034: V/AmSuperPlayer(87): [onFirstRef::103]
07-19 18:47:03.034: V/AmSuperPlayer(87): [initCheck::110]
07-19 18:47:03.034: V/AmSuperPlayer(87): [initCheck::112]
07-19 18:47:03.034: V/AmSuperPlayer(87): [setNotifyCallback::455]
07-19 18:47:03.034: V/AmSuperPlayer(87): [hardwareOutput::330]
07-19 18:47:03.034: V/AmSuperPlayer(87): [hardwareOutput::332]
07-19 18:47:03.034: V/AudioSink(87): AudioOutput(112)
07-19 18:47:03.034: V/MediaPlayerService(87):  setDataSource
07-19 18:47:03.034: V/AmSuperPlayer(87): [setDataSource::118]
07-19 18:47:03.034: V/AmSuperPlayer(87): [setDataSource::120]
07-19 18:47:03.034: V/MediaPlayerService(87): [56] setVideoSurfaceTexture(0x28290)
07-19 18:47:03.034: V/AmSuperPlayer(87): [setVideoSurfaceTexture::168]
07-19 18:47:03.034: V/AmSuperPlayer(87): [setVideoSurfaceTexture::170]
07-19 18:47:03.034: V/MediaPlayerService(87): [56] setVideoSurfaceTexture(0x29660)
07-19 18:47:03.034: V/MediaPlayerService(87): [56] setAudioStreamType(3)
07-19 18:47:03.034: V/MediaPlayerService(87): [56] prepareAsync
07-19 18:47:03.034: V/AmSuperPlayer(87): [prepareAsync::199]
07-19 18:47:03.034: V/AmSuperPlayer(87): [prepareAsync::202]
07-19 18:47:03.034: V/AmSuperPlayer(87): initThread(7388) started
07-19 18:47:03.034: V/AmSuperPlayer(87): createPlayer
07-19 18:47:03.034: V/AmSuperPlayer(87): Create Amlogic Player
07-19 18:47:03.034: V/AmlogicPlayer(87): AmlogicPlayer constructor
07-19 18:47:03.034: I/AmlogicPlayer(87): media.amplayer.stopbuflevel is not set
07-19 18:47:03.034: V/AmlogicPlayer(87): onFirstRef
07-19 18:47:03.034: I/AmlogicPlayer(87): found 0 not exit player threads,try exit it now
07-19 18:47:03.034: V/AmlogicPlayer(87): initCheck
07-19 18:47:03.034: V/AmSuperPlayer(87): [CreatePlayer::678]
07-19 18:47:03.034: V/AmlogicPlayer(87): setDataSource
07-19 18:47:03.034: V/AmlogicPlayer(87): History mgt old[,0,-1]
07-19 18:47:03.034: V/AmlogicPlayer(87): History mgt    [/mnt/sdcard/Android/data/au.com.nian.bullertv/files/tmpbtag.mp4,0,0]
07-19 18:47:03.034: V/AmlogicPlayer(87): setDataSource url=/mnt/sdcard/Android/data/au.com.nian.bullertv/files/tmpbtag.mp4, len=63
07-19 18:47:03.034: V/AmlogicPlayer(87): Set setVideoSurfaceTexture
07-19 18:47:03.034: I/AmlogicPlayer(87): media.amplayer.lpbufferlevel is not set
07-19 18:47:03.034: I/AmlogicPlayer(87): media.amplayer.buffertime is not set
07-19 18:47:03.034: V/AmlogicPlayer(87): prepareAsync
07-19 18:47:03.034: I/AmlogicPlayer(87): media.amplayer.noaudio is disabled
07-19 18:47:03.034: I/AmlogicPlayer(87): media.amplayer.novideo is disabled
07-19 18:47:03.034: V/AmlogicPlayer(87): buffer level setting is:0.001000-0.020000-0.800000
07-19 18:47:03.034: V/AmlogicPlayer(87): prepareAsync,file_name=/mnt/sdcard/Android/data/au.com.nian.bullertv/files/tmpbtag.mp4
07-19 18:47:03.034: I/amplayer(87): LibPlayer version:Version:2.1.0.
07-19 18:47:03.034: I/amplayer(87): LibPlayer git version:
07-19 18:47:03.034: I/amplayer(87): LibPlayer version serial:201000000000000
07-19 18:47:03.034: I/amplayer(87): LibPlayer Last Changed:
07-19 18:47:03.034: I/amplayer(87): LibPlayer Last Build: Tue May 22 17:40:26 HKT 2012
07-19 18:47:03.034: I/amplayer(87): LibPlayer Builer Name: clei
07-19 18:47:03.034: I/amplayer(87): [player_start:enter]p=0x2a98dc black=0
07-19 18:47:03.034: I/amplayer(87): ***player_para=0x112d28,start_param=0x2a98dc
07-19 18:47:03.034: I/amplayer(87): [player_thread_create:70]creat thread success,tid=149280
07-19 18:47:03.034: I/amplayer(87): [player_start:exit]pid = 23 
07-19 18:47:03.034: V/AmlogicPlayer(87): Start player,pid=23
07-19 18:47:03.034: I/amplayer(87): pid[23]::enter into player_thread
07-19 18:47:03.034: I/amplayer(87): pid[23]::Init State: mute_on=0 black=0 t_pos:1074106323s read_max_cnt=0
07-19 18:47:03.034: I/amplayer(87): file::::[/mnt/sdcard/Android/data/au.com.nian.bullertv/files/tmpbtag.mp4],len=63
07-19 18:47:03.154: I/amplayer(87): **[update_state]pid:23 status=BEGIN_INIT(last:UNKNOW_STATE) err=0x0 curtime=0 (ms:0) fulltime=0 lsttime=0
07-19 18:47:03.154: I/amplayer(87): **[update_state]abuflevel=0.000 vbublevel=0.000 abufrp=0 vbufrp=0 read_end=0
07-19 18:47:03.154: V/AmlogicPlayer(87): update_process pid=23, current=0,status=[BEGIN_INIT]
07-19 18:47:03.154: V/AmlogicPlayer(87): Playing percent =0,mPlayTime:0,mStreamTime:0
07-19 18:47:03.154: V/AmSuperPlayer(87): [notify::404]
07-19 18:47:03.154: V/AmSuperPlayer(87): [Notify::411]
07-19 18:47:03.154: V/AmSuperPlayer(87): cookie=0x475e0,msg=3,ext1=0,ext2=0
07-19 18:47:03.154: I/amplayer(87): [ffmpeg_open_file] file=/mnt/sdcard/Android/data/au.com.nian.bullertv/files/tmpbtag.mp4,header=
07-19 18:47:03.154: I/amplayer(87): ffmpeg error: Couldn't open input file! ret==ffffffe8
07-19 18:47:03.154: I/amplayer(87): [player_dec_init]ffmpeg_open_file failed(/mnt/sdcard/Android/data/au.com.nian.bullertv/files/tmpbtag.mp4)*****ret=fcffffff!
07-19 18:47:03.154: I/amplayer(87): pid[23]player_thread release0 begin...(sta:0x30001)
07-19 18:47:03.154: I/amplayer(87): [get_pts_video]No codec handler
07-19 18:47:03.154: I/amplayer(87): **[update_state]pid:23 status=ERROR(last:BEGIN_INIT) err=0x3000001 curtime=0 (ms:0) fulltime=0 lsttime=0
07-19 18:47:03.154: I/amplayer(87): **[update_state]abuflevel=0.000 vbublevel=0.000 abufrp=0 vbufrp=0 read_end=0
07-19 18:47:03.154: V/AmlogicPlayer(87): update_process pid=23, current=0,status=[ERROR]
07-19 18:47:03.154: V/AmSuperPlayer(87): [notify::404]
07-19 18:47:03.154: V/AmSuperPlayer(87): [Notify::411]
07-19 18:47:03.154: V/AmSuperPlayer(87): cookie=0x475e0,msg=64,ext1=1,ext2=fcffffff
07-19 18:47:03.154: V/AmSuperPlayer(87): [CreatePlayer::702]
07-19 18:47:03.154: I/AmSuperPlayer(87): media.amplayer.enable is enabled
07-19 18:47:03.154: I/AmSuperPlayer(87): media.stagefright.enable-player is disabled
07-19 18:47:03.154: V/AmSuperPlayer(87): [CreatePlayer::713]
07-19 18:47:03.154: V/AmSuperPlayer(87): Need to creat new player=3
07-19 18:47:03.154: V/AmlogicPlayer(87): stop
07-19 18:47:03.154: I/amplayer(87): [player_stop:enter]pid=23
07-19 18:47:03.154: I/amplayer(87): [player_stop]player_status=30001
07-19 18:47:03.154: I/amplayer(87): [player_stop]pid=23 thread is already stopped
07-19 18:47:03.154: V/AmlogicPlayer(87): AmlogicPlayer destructor
07-19 18:47:03.154: V/AmlogicPlayer(87): release
07-19 18:47:03.154: V/AmlogicPlayer(87): [release::1461]
07-19 18:47:03.154: I/amplayer(87): [player_stop:enter]pid=23
07-19 18:47:03.154: I/amplayer(87): [player_stop]player_status=30001
07-19 18:47:03.154: I/amplayer(87): [player_stop]pid=23 thread is already stopped
07-19 18:47:03.154: I/amplayer(87): [player_exit:enter]pid=23
07-19 18:47:03.154: I/amplayer(87): [player_exit]player_state=0x30001
07-19 18:47:03.154: I/amplayer(87): [player_stop:enter]pid=23
07-19 18:47:03.154: I/amplayer(87): [player_stop]player_status=30001
07-19 18:47:03.154: I/amplayer(87): [player_stop]pid=23 thread is already stopped
07-19 18:47:03.154: I/amplayer(87): [player_thread_wait_exit:80]pid=[23] thead_id=149280
07-19 18:47:03.154: V/AmlogicPlayer(87): Player status:ERROR, error occur
07-19 18:47:03.154: V/AmSuperPlayer(87): [notify::404]
07-19 18:47:03.154: V/AmSuperPlayer(87): [Notify::411]
07-19 18:47:03.154: V/AmSuperPlayer(87): cookie=0x475e0,msg=64,ext1=1,ext2=ffffffff
07-19 18:47:03.154: I/amplayer(87): **[update_state]pid:23 status=EXIT(last:ERROR) err=0x0 curtime=0 (ms:0) fulltime=0 lsttime=0
07-19 18:47:03.154: I/amplayer(87): **[update_state]abuflevel=0.000 vbublevel=0.000 abufrp=0 vbufrp=0 read_end=0
07-19 18:47:03.154: V/AmlogicPlayer(87): update_process pid=23, current=0,status=[EXIT]
07-19 18:47:03.154: V/AmlogicPlayer(87): Player status:EXIT, playback exit
07-19 18:47:03.154: I/amplayer(87): pid[23]::stop play, exit player thead!(sta:0x30004)
07-19 18:47:03.154: I/amplayer(87): [player_thread_wait_exit:86]thead_id=149280 returning
07-19 18:47:03.154: I/amplayer(87): [player_exit]player thread already exit: 0
07-19 18:47:03.154: I/amplayer(87): [player_release_pid:72]release pid=23
07-19 18:47:03.154: I/amplayer(87): [player_exit:exit]pid=23
07-19 18:47:03.154: V/AmlogicPlayer(87): set fs/sys/class/video/disable_video=2 failed
07-19 18:47:03.154: I/amplayer(87): ENABLE_FREE_SCALE not define!
07-19 18:47:03.154: I/amplayer(87): [get_display_mode]display_mode=fail
07-19 18:47:03.154: I/amplayer(87): open /sys/class/graphics/fb0/scale fail.
07-19 18:47:03.154: I/amplayer(87): open /sys/class/graphics/fb1/scale fail.
07-19 18:47:03.154: I/amplayer(87): open /sys/class/graphics/fb1/scale_axis fail.
07-19 18:47:03.154: I/amplayer(87): open /sys/class/graphics/fb0/blank fail.
07-19 18:47:03.154: I/amplayer(87): open /sys/class/graphics/fb1/blank fail.
07-19 18:47:03.154: I/amplayer(87): [get_display_mode]display_mode=fail
07-19 18:47:03.154: I/amplayer(87): open /sys/class/graphics/fb0/free_scale fail.
07-19 18:47:03.154: I/amplayer(87): open /sys/class/graphics/fb1/free_scale fail.
07-19 18:47:03.154: I/amplayer(87): open /sys/class/video/axis fail.
07-19 18:47:03.154: I/amplayer(87): open /sys/class/ppmgr/ppscaler fail.
07-19 18:47:03.154: I/amplayer(87): open /sys/class/ppmgr/ppscaler_rect fail.
07-19 18:47:03.154: I/amplayer(87): display mode: 292344
07-19 18:47:03.154: I/amplayer(87): [enable_freescale_MBX]set video axis: 0 0 0 0 
07-19 18:47:03.154: V/AmlogicPlayer(87): VideoViewClose=-33554433
07-19 18:47:03.154: V/AmlogicPlayer(87): [release::1471]
07-19 18:47:03.154: V/AmlogicPlayer(87): History mgt old[,0,-1]
07-19 18:47:03.154: V/AmlogicPlayer(87): History mgt    [/mnt/sdcard/Android/data/au.com.nian.bullertv/files/tmpbtag.mp4,1,0]
07-19 18:47:03.154: V/AmSuperPlayer(87): createPlayer
07-19 18:47:03.154: V/AmSuperPlayer(87):  create StagefrightPlayer
07-19 18:47:03.154: V/AmSuperPlayer(87): [CreatePlayer::678]
07-19 18:47:03.154: I/AwesomePlayer(87): setDataSource_l('/mnt/sdcard/Android/data/au.com.nian.bullertv/files/tmpbtag.mp4')
07-19 18:47:03.154: V/AmSuperPlayer(87): [CreatePlayer::713]
07-19 18:47:03.154: V/AmSuperPlayer(87): [CreatePlayer::729]
07-19 18:47:03.154: V/AmSuperPlayer(87): Start new player now=3
07-19 18:47:03.154: V/AmSuperPlayer(87): [initThread::762]
07-19 18:47:03.154: V/AmSuperPlayer(87): [notify::404]
07-19 18:47:03.154: V/AmSuperPlayer(87): [Notify::411]
07-19 18:47:03.154: V/AmSuperPlayer(87): cookie=0x475e0,msg=64,ext1=1,ext2=80000000
07-19 18:47:03.154: V/MediaPlayerService(87): [56] notify (0x23d50, 100, 1, -2147483648)
07-19 18:47:03.154: **E/MediaPlayer(7232): error (1, -2147483648)**
07-19 18:47:03.154: V/videoerr(7232): java.io.IOException: Prepare failed.: status=0x1 
```

**更新 2：** 我已经在其他 2 台 Android 设备（一台 ICS，一台 Gingerbread）上测试了代码，令人讨厌的是，它在它们上运行良好，并且运行了 12 多个小时而没有发生任何事故。所以，它看起来是一个平台错误，但仍然需要解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T21:14:15.747

我几乎肯定这是您正在使用的基于 Amlogic 的设备的问题（由于 logcat 中的“amplayer”和“AmlogicPlayer”很明显）。我们正在测试的基于 Amlogic AML8726 的设备存在大量问题。如果可能，请尝试升级固件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T09:16:29.600

我不确定但我认为这是由于一些缓存问题，因为它播放了 x 次然后停止播放。文件无法访问，可能有多种原因：权限、文件损坏、文件错误，但您的情况似乎不同。

你能用[reset](http://developer.android.com/reference/android/media/MediaPlayer.html#reset%28%29)再试一次吗

> public void reset () 自：API Level 1
> 
> 将 MediaPlayer 重置为未初始化状态。调用此方法后，您将不得不通过设置数据源并调用 prepare() 再次对其进行初始化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T15:18:36.723

好吧，我从来没有解决这个问题让我非常满意，特别是因为它是特定于设备的。最后，我只是添加了异常处理，因此在播放视频失败时它不会崩溃，只需跳过它，下次再试一次。

下次视频确实会循环播放，所以我猜它是特定于设备的。

# java - Mockito 错误：org.mockito.exceptions.misusing.InvalidUseOfMatchersException

> ID：11555539
> 
> 赞同：5
> 
> 时间：2012-07-19T07:03:39.513
> 
> 标签：java, unit-testing, junit, mockito

我有以下代码

```
public void testInitializeButtons() {
        model.initializeButtons();
        verify(controller, times(1)).sendMessage(
                eq(new Message(eq(Model.OutgoingMessageTypes.BUTTON_STATUSES_CHANGED),
                        eq(new ButtonStatus(anyBoolean(), eq(false), eq(false), eq(false), eq(false))),
                        anyObject())));
    } 
```

引发以下异常

```
org.mockito.exceptions.misusing.InvalidUseOfMatchersException: 
Invalid use of argument matchers!
1 matchers expected, 9 recorded.
This exception may occur if matchers are combined with raw values:
    //incorrect:
    someMethod(anyObject(), "raw String");
When using matchers, all arguments have to be provided by matchers.
For example:
    //correct:
    someMethod(anyObject(), eq("String by matcher"));

For more info see javadoc for Matchers class.
    at se.cambiosys.client.medicalrecords.model.MedicalRecordPanelModelTest.testInitializeButtons(MedicalRecordPanelModelTest.java:88) 
```

有人可以指出我如何正确编写测试吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T07:10:29.910

你不能这样做： eq() 只能用于模拟的方法参数，不能用于其他对象（就像你在 的构造函数中所做的那样`Message`）。我看到三个选项：

*   编写自定义匹配器
*   使用`ArgumentCaptor`, 并使用 asserts() 测试消息的属性
*   根据您实际要验证的字段，在 Message 类中实现`equals()`以测试与另一个 Message 的相等性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T07:10:12.203

你不能像这样嵌套匹配器（虽然它会很棒）：

```
eq(new Message(eq(Model.OutgoingMessageTypes.BUTTON_STATUSES_CHANGED) 
```

当您使用`eq`时，匹配器只是`equals()`用来比较传递给模拟的内容和您提供的内容`verify()`。话虽如此，您应该实现您的`equals()`方法以仅比较相关字段或使用自定义匹配器。

根据经验：您应该拥有与参数数量相同的匹配器数量 - 或 0。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-19T07:11:03.020

sendMessage 中的值应该只是一个常规 Message 实例，您不需要使用 'eq' 调用，类似地在 ButtonStatus 构造函数中，只需使用常规对象 - 你可能想要这样的东西：

```
verify(controller, times(1)).sendMessage(
            new Message(Model.OutgoingMessageTypes.BUTTON_STATUSES_CHANGED,
                    new ButtonStatus(false, false, false, false, false),
                    <something else here>); 
```

# html - Rails 3.2 错误显示视图中的审核更改

> ID：11555543
> 
> 赞同：0
> 
> 时间：2012-07-19T07:03:52.700
> 
> 标签：html, ruby-on-rails, controller, ruby-on-rails-3.2, acts-as-audited

我有一个奇怪的问题。当我在合同视图中有此代码时，我的审核 gem 在我的视图中不起作用：

```
<p><%= @contracten.respond_to?(:audits) %></p>
<br />
<%= @contracten.audits.each do |audit| %>
  <%= audit.version %>
  <br />
<% end %> 
```

它给出了以下错误：`undefined method`nil:NilClass`的审计

当我的视图中只有这一行时： `<p><%= @contracten.respond_to?(:audits) %></p>` 它显示的是假而不是真，所以我认为我的控制器工作不正常。

我的控制器显示：

```
 def show
    add_breadcrumb 'Contract Bekijken', :contracten_path

    @contracten = Contracten.find(params[:id])
  end 
```

我的模型：

```
class Contracten < ActiveRecord::Base

  audited

  has_attached_file :pdf

  attr_accessible :betalingsperiodeeenheidid, :betalingstermijn, :contractduur, :contractid, :contractsoortid, :datumeinde, :datumingang, :naam, :omschrijving, :opzegtermijn, :organisatieid, :persoonid, :vestigingid, :pdf

end 
```

* * *

我在这里发布了一个类似的问题：[Show Last modified tables/records Rails 3.2](https://stackoverflow.com/questions/11289990/show-last-modified-tables-records-rails-3-2)但这并不是关于审计的具体问题。我没有找到更简单的宝石，所以这可能有效。但我仍在为观点而苦苦挣扎

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T09:27:19.390

`false`是正确的回应`nil.respond_to?(:audits)`

你`@contracten`的设置不正确，它是零。你可能需要：

```
<% if @contracten.present? %>
  <p><%= @contracten.respond_to?(:audits) %></p>  
  <%= @contracten.audits.each do |audit| %>
    <br /><%= audit.version %>
  <% end %>
<% end %> 
```

# java - @根据条件生成注解

> ID：11555544
> 
> 赞同：0
> 
> 时间：2012-07-19T07:03:53.370
> 
> 标签：java, internet-explorer, conditional, jax-rs, blueimp

对于一个新项目，我们在客户端使用 jQuery 组件，其中之一是 blueImp 文件上传器。我们正在愉快地编写代码，并且在 Chrome 和 Firefox 中一切正常……直到有人试图在 Internet Explorer 中打开该站点。显然，在使用这个上传组件时，IE 无法处理从服务器返回的 application/json - 而且，它只是将其作为文件流式传输给用户。无论如何，很多用户确实有这个问题（在他们的网站上提到：[https](https://github.com/blueimp/jQuery-File-Upload/wiki/Frequently-Asked-Questions) ://github.com/blueimp/jQuery-File-Upload/wiki/Frequently-Asked-Questions和他们的错误报告的其他地方）

但是，其中提到的大多数解决方法都是基于 PHP。我们在服务器端使用 Java，更具体地说：JAX-RS。现在，JAX-RS 有了这个可爱的 @Produces 注释，它是……嗯，非常静态。我一直在挖掘文档，但没有发现更明智的。有什么方法可以向这个 @Produces 注释添加条件吗？说清楚：当用户使用 IE 时，我想返回 text/plain（或类似的东西），当用户使用浏览器时，我想返回 application/json ...eeeerrrm，我的意思是，一些其他浏览器 :-)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T10:30:54.700

我最终通过编写自己的 Provider 解决了这个问题（这实际上是我在这里提出问题之前开始做的事情）。对于那些感兴趣（但还不知道）的人：编写自己的提供程序涉及 2 个步骤：

*   将 @Provider 添加到您的课程中，然后添加 @Produces()
*   实现 MessageBodyWriter 接口，覆盖必要的方法

我的代码最终是：

```
package com.mypackage;    

import com.google.common.collect.Lists;
import com.google.gson.Gson;
import com.mypackage.UploadResponse;

import javax.ws.rs.Produces;
import javax.ws.rs.WebApplicationException;
import javax.ws.rs.core.MediaType;
import javax.ws.rs.core.MultivaluedMap;
import javax.ws.rs.ext.MessageBodyWriter;
import javax.ws.rs.ext.Provider;
import java.io.IOException;
import java.io.OutputStream;
import java.io.OutputStreamWriter;
import java.lang.annotation.Annotation;
import java.lang.reflect.Type;

@Produces("text/plain")
@Provider
public class UploadResponseProvider implements MessageBodyWriter<UploadResponse> {
    @Override
    public boolean isWriteable(Class<?> type, Type genericType, Annotation[] annotations, MediaType mediaType) {
         /* You could check the type here, or do some additional checks, but I can just return true, because if it is an UploadResponse (which is inferred via the generic), it's all ok */ 
        return true;
    }

    @Override
    public long getSize(UploadResponse uploadResponse, Class<?> type, Type genericType, Annotation[] annotations, MediaType mediaType) {
        return -1;
    }

    @Override
    public void writeTo(UploadResponse uploadResponse, Class<?> type, Type genericType, Annotation[] annotations, MediaType mediaType, MultivaluedMap<String, Object> httpHeaders, OutputStream entityStream) throws IOException, WebApplicationException {
        OutputStreamWriter writer = new OutputStreamWriter(entityStream);
        writer.write(new Gson().toJson(Lists.newArrayList(uploadResponse)));
        writer.flush();
    }

} 
```

只是稍微解释一下这段代码： UploadResponse 是我要返回的对象。这是一个简单的 POJO，包含字段 url、大小和名称，以及 getter 和 setter。

我读到返回 text/plain 使 blueImp jQuery Fileupload 起作用，所以这是 UploadResponse 的 text/plain 输出的提供程序。

我在这里所做的是创建一个 JSON 对象，将其放入一个列表中，然后将该列表写入响应。我正在创建一个 UploadResponses 列表，因为我的 UI 期望这样做。blueImp File Upload 期望默认情况下，顺便说一句。我们在 JAX-RS 上进行自动上传，并且硬限制为 1 个文件，因此我不必处理超过 1 个项目。请注意，在重用此代码时，可能需要进行一些调整。

如您所见，这就是我正在做的所有事情，仅此而已。其余的只是默认实现，因为就我而言，我不关心任何一个。

一个小提示：不要关闭作者。冲一下就好了。关闭它将在写入响应之前关闭它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T07:31:24.503

使用 Servlet 过滤器应该可以工作。这是一个（未经测试的）：

```
package blah;
import javax.servlet.Filter;
import javax.servlet.FilterChain;
import javax.servlet.FilterConfig;
import javax.servlet.ServletException;
import javax.servlet.ServletRequest;
import javax.servlet.ServletResponse;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class IEFixFilter implements Filter {

    @Override
    public void doFilter(ServletRequest req, 
                         ServletResponse resp, 
                         FilterChain chain) throws IOException, ServletException
    {
        chain.doFilter(req, resp);

        String userAgent = ((HttpServletRequest) req).getHeader("User-Agent");
        if(userAgent.contains("MSIE")) {
            response.setContentType("text/plain");
        }
    }

    @Override
    public void init(FilterConfig cfg) throws ServletException {}

    @Override
    public void destroy() {}
} 
```

以及您添加到 web.xml 中的配置。您需要将 blah 更改为放置上述类的包，并且 url-pattern 应该与您用于文件上传的 url 匹配。

```
 <filter>
    <filter-name>ieFixFilter</filter-name>
    <filter-class>blah.IEFixFilter</filter-class>
  </filter>

  <filter-mapping>
    <filter-name>ieFixFilter</filter-name>
    <url-pattern>/upload/url/*</url-pattern>
  </filter-mapping> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-10T13:43:41.050

在这个后期阶段这可能没有用，但我最近有这个确切的要求，这是一个很容易解决的问题。假设您正在返回一个八位字节流，但如果出现问题，您只想返回纯 JSON。

1.  不要在你的 restful 方法的声明中指定 @Produces。
2.  根据您的方法中发生的情况，您将要做这种事情

    ```
    return Response.status(200).entity(file).type(MediaType.APPLICATION_OCTET_STREAM).build(); 
    ```

因此，例如，如果您需要使用 JSON 对象而不是八位字节流提前返回，那么只需执行

```
 return Response.status(500).entity(errorObject).type(MediaType.APPLICATION_JSON).build(); 
```

重要的是在构建响应时指明 MediaType。

希望这可以帮助某人。

# vim - Vim 自动关闭插件和不同的键盘布局

> ID：11555546
> 
> 赞同：1
> 
> 时间：2012-07-19T07:03:55.777
> 
> 标签：vim, auto-close

我发现 autoclose.vim 非常实用，可以关闭所有括号但遇到下一个问题。问题是我需要在我的工作中使用第二个键盘映射，如下所示：

```
set keymap=russian-jcukenwin 
```

这个键映射与所有其他键重新映射这些键：“[”->“х”、“]”->“ъ”、“'”->“э”、“`”->“ё”。但是当我在我的插件中插入 autoclose.vim 时，我最终会遇到这样的情况：在 russian-jcukenwin 键盘映射中我没有 "х","ъ","э","ё" 但 "[","]","' ","`" 代替。我只是从 vim 开始我的乐趣并且不知道它的脚本语言尚未自己在 autoclose.vim 中找到解决方案，但发现这个问题非常烦人。

所以也许有人知道一个快速的技巧来避免在 autoclose.vim 中重新映射？或者也许有一种方法可以在不同的键盘布局中自动关闭 autoclose.vim？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T07:14:46.140

您可以运行`:AutoCloseToggle`以禁用/启用`autoclose.vim`插件。

您可以键入`Ctrl-^`（插入模式）以禁用/启用`keymap`选项

# visual-studio-2010 - 使用 Visual Studio 2010 和 tfs 进行更改日志和版本控制

> ID：11555552
> 
> 赞同：0
> 
> 时间：2012-07-19T07:04:29.140
> 
> 标签：visual-studio-2010, version-control, build-process

什么是对我的产品进行版本控制的正确方法？我正在使用 TFS 和 Visual Studio 2010。目前我正在独自处理我的项目，因此它不是团队管理工作流程。由于上述原因，我认为我不应该使用敏捷工作流程。

但我确实想处理构建并知道每个构建之间发生了什么变化。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T07:38:57.130

我不认为单人项目是不采用敏捷方式的理由，但这取决于您和您的决定。（我使用 Scrum 模板定义了我正在单独开发的所有项目。）

如果您想知道每个构建之间发生了什么变化，您需要检查您的工作项。

因此，选择一个适合您的项目模板，在工作项中定义您的工作（任务、待办事项或用户故事，措辞取决于项目模板）。

要在未分配工作项的情况下不签入，您可以激活签入策略，因此 TFS 将抛出一个对话框作为提醒。

# ruby-on-rails - 我修改了/config/environments/development.rb，需要重启Apache吗？

> ID：11555553
> 
> 赞同：0
> 
> 时间：2012-07-19T07:04:37.913
> 
> 标签：ruby-on-rails, configuration

在 Ruby on Rails 中，我需要更改`/config/environments/development.rb`. 进行更改后是否需要重新启动 apache 或任何其他服务？实际上邮件并没有得到静止。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T07:14:18.973

如果你使用乘客，你应该只是

```
touch tmp/restart.txt 
```

在您的应用程序根目录上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T07:08:41.313

您应该重新部署您的应用程序。

# c++ - QScrollArea 调整 QWidget 的大小

> ID：11555557
> 
> 赞同：2
> 
> 时间：2012-07-19T07:05:28.133
> 
> 标签：c++, qt

我有一个 QScrollArea，它显示一个自定义 QWidget。每当显示滚动条时，它都会导致整个小部件调整大小。我希望为滚动条留出一些空间，以便不调整整个小部件的大小。如何才能做到这一点？

# c - 试图打印表单数组或数组地址...没有得到它？

> ID：11555565
> 
> 赞同：1
> 
> 时间：2012-07-19T07:05:56.260
> 
> 标签：c, arrays

新来的，在你们的大力帮助下尝试学习一段C语言，这可能是这里的一个基本问题....对不起，你是从基础开始的。

```
void main()
{

char* arr[3] = {"baba","tata","kaka"};

char* arr1[3] = {"baba1","tata1","kaka1"};

char* arr2[3] = {"baba2","tata2","kaka2"};

char** array_all[] = {arr,arr1,arr2};

printf("%s\n",*array_all[0]);

//please guide me how to access individual entity(as arr[1], arr1[2],arr3[1])      //from each array using array_all

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T07:39:23.900

我不确定这是否正是您要寻找的……但这是我目前所了解的。

您想要访问 array_all 的各个元素（元素 arr、arr1 和 arr2）？如果是这样，那么您要做的就是...

```
array_all[0][i]; 
```

其中 i 是您要访问的元素。

这样做的原因是因为索引运算符（[ 和 ]）实际上取消引用了一个指针并偏移了您指定的指针（如将它添加某个整数，即您在内存中向下移动）。如果您不知道如果将指针添加某个整数会发生什么，我建议您阅读指针算术。

例如：

```
int x[] = { 1, 2, 3 };
// writing x[i] is the same as *(x + i)
int i = 2; // the element you wish to access
*(x + i) = 4;  // set the ith (3rd) element to 4
*(x + 1) = 43; // set the 2nd element to 43

// Therefore...
// x now stores these elements:
// 1, 43, 4

// proof: print out all the elements in the array
for(int i = 0; i < 3; ++i)
{
   printf("x[%i]=%i\n", i, x[i]);
} 
```

此外，写入 x[0] 与写入 *x 相同，因为数组名实际上指向数组的第一个元素。

哦还有一件事， main 实际上应该返回一个整数结果。这主要用于程序中的错误检查，0 通常表示没有发生错误，其他错误代码（0 以外的数字）是与您的程序相关的一些特定错误，您可以选择。IE

```
int main()
{
   // e.g. for an error code
   /*
   if(someErrorOccured)
   {
      return SOME_ERROR_OCCURED_RETURN_VALUE;
   }
   */
   return 0; // this is at the end of the function, 0 means no error occured
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T07:52:04.053

用这个改变你的 printf 语句行。

```
printf("%s\n",array_all[i][j]); 
```

代替 i 保留您的数组编号，代替 k 提供您所需的元素编号。有用。

# javascript - CoffeeScript - 这个奇怪的“返回”事件是什么意思？

> ID：11555566
> 
> 赞同：1
> 
> 时间：2012-07-19T07:05:57.360
> 
> 标签：javascript, coffeescript

考虑以下 CoffeeScript：

```
$ ->
  if localStorage["Flag1"] isnt "Done"
    localStorage["Flag1"] = "Done" # Flagged on first page loading
  $(".start").click ->
    if localStorage["Flag2"] isnt "Done"
      localStorage["Flag2"] = "Done" # Flagged on first click interaction 
```

编译成：

```
$(function() {
  if (localStorage["Flag1"] !== "Done") {
    localStorage["Flag1"] = "Done";
  }
  return $(".start").click(function() {
    if (localStorage["Flag2"] !== "Done") {
      return localStorage["Flag2"] = "Done";
    }
  });
}); 
```

有两个奇怪的“返回”被植入到渲染的 JavaScript 中。它们做了什么，它们将如何影响脚本的运行？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T07:13:44.533

它们不会影响脚本的运行。第一个`return`将从 DOM 就绪事件处理程序返回`$(".start")`（因为 jQuery`click`方法返回一个 jQuery 实例）。由于它是一个在某个时间点运行的回调，因此您实际上无法对该返回值做任何事情。

第二个`return`将`"Done"`在设置`localStorage`属性后返回，但同样，由于它是从回调（这次是单击事件处理程序）返回，您将无法对返回的值执行任何操作。

我相信 CoffeeScript 会`return`计算每个函数中最后一个表达式的值，这就是为什么你会`return`在输出中看到这些语句的原因。从文档：

> 尽管函数总是会返回它们的最终值，`return value`但当你知道你已经完成时，从写出显式返回 ( ) 的函数体中提早返回是可能的，也是鼓励的。

# android - android中活动的单个实例

> ID：11555567
> 
> 赞同：7
> 
> 时间：2012-07-19T07:05:58.237
> 
> 标签：android, android-intent

我知道可以通过`android:launchMode="singleInstance"` 在清单文件中设置来实现单个实例。但我想在运行时这样做。我认为可以通过设置**FLAG**来实现，但不确定女巫之一..请帮助我..提前谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-19T07:16:14.250

通常，您可以使用 、 和 的组合`Intent.FLAG_ACTIVITY_SINGLE_TOP`来`Intent.FLAG_ACTIVITY_CLEAR_TOP`完成`Intent.FLAG_ACTIVITY_REORDER_TO_FRONT`您`Intent.FLAG_ACTIVITY_NEW_TASK`想要的。但是，使用哪一个（或多个）取决于您的情况。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-19T07:12:06.960

这就是你要找的

```
Intent intent= new Intent(context, YourActivity.class);
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_SINGLE_TOP); 
```

更新：`android:launchMode="singleInstance"`清单中可能也需要

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-21T18:04:32.173

*singleInstance*指定启动或回收的活动将在新的或现有的任务上创建，并且**不能在其上堆叠其他活动**。系统将确保从它开始的任何活动都放在其他任务上。

1 项任务和 1 项活动。

据我所知，没有意图标志会阻止您的活动启动的进一步活动，而无需在所有新活动创建的意图中指定标志。

所以答案是**这是不可能的**。

以前发布的答案模仿了它的外观，但行为违反了规范。

# ms-access - 更改列数据类型和格式

> ID：11555569
> 
> 赞同：1
> 
> 时间：2012-07-19T07:06:06.033
> 
> 标签：ms-access, ms-access-2007

导入excel访问2007时，有些日期字段变成了文本字段。所以我想在访问中运行查询以将这些列的数据类型更改为日期时间。如何在 sql 中传递日期格式（“dd-mmm-yyyy”）？

```
ALTER TABLE Tbl1 
ALTER COLUMN [ABC] datetime 
```

谢谢

乔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:55:47.723

如果您从 Excel 中导入了一个列（字段）并且它以文本格式结束，那么您应该非常小心不要简单地切换到日期时间格式。如果 Access 没有将其视为混合数据类型，则 Access 应该已经将该字段解释为 DateTime。您应该创建一个新的 DateTime 列，并以明确的格式将其更新为年月日。

假设您的列是 mm/dd/yyyy，一种选择是：

```
UPDATE Table SET NewDateTime = Right(DT,4) & "/" & Left(DT,2) & "/" & Mid(DT,4,2)
WHERE DT Like "##/##/####" 
```

您不能使用 DDL 设置 Format 属性，并且它与 MS Access 之外的无关。一般来说，我建议你不要在表格中使用 Format 属性，最好在表格和报表中控制。当查询无法按预期方式工作时，设置格式将不可避免地使某些人感到困惑。

如果真的必须设置格式，则必须使用 VBA、DAO 和 TableDef。

```
Dim db As Database
Dim tdf As TableDef
Dim fld As DAO.Field
Dim prp As Property
Dim prpName As String
Dim prpValue As String
Dim prpType As Long

    Set db = CurrentDb
    Set tdf = db.TableDefs("Table1")
    Set fld = tdf.Fields("ADate")

    prpName = "Format"
    prpValue = "yyyy/mm/dd"
    prpType = dbText

    On Error Resume Next
    fld.Properties(prpName) = prpValue

    If Err.Number = 3270 Then
        Set prp = fld.CreateProperty(prpName, prpType, prpValue)
        Err.Clear
        fld.Properties.Append prp
    End If

    Debug.Print fld.Properties("Format") 
```

# magento - Magento 中计费和运输的国家数量不同

> ID：11555570
> 
> 赞同：0
> 
> 时间：2012-07-19T07:06:34.367
> 
> 标签：magento

我想在送货地址中显示一些国家，在帐单地址中显示其他一些国家。我已按照[此处](http://www.magentocommerce.com/boards/viewthread/59566/#t186374)提供的建议进行操作。但是在这样做之后，我的州/省输入框没有出现。像这样->

![在此处输入图像描述](../Images/cce959962ab43039c471cf607ced248f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T14:01:34.413

查看 (path_to_magento)\app\design\frontend\default(my_skin_name)\template\checkout\onepage\shipping.phtml 中的第 78 行

它应该是这样的。也许你删除了一些东西 -

```
 <div class="field">
                        <label for="shipping:region" class="required"><em>*</em><?php echo $this->__('State/Province') ?></label>
                        <div class="input-box">
                            <select id="shipping:region_id" name="shipping[region_id]" title="<?php echo $this->__('State/Province') ?>" class="validate-select" style="display:none;">
                                <option value=""><?php echo $this->__('Please select region, state or province') ?></option>
                            </select>
                            <script type="text/javascript">
                            //<![CDATA[
                                $('shipping:region_id').setAttribute('defaultValue',  "<?php echo $this->getAddress()->getRegionId() ?>");
                            //]]>
                            </script>
                            <input type="text" id="shipping:region" name="shipping[region]" value="<?php echo $this->htmlEscape($this->getAddress()->getRegion()) ?>" title="<?php echo $this->__('State/Province') ?>" class="input-text" style="display:none;" />
                        </div>
                    </div> 
```

# php - 如何停止 PHP 将离开行/字段添加到 mysql？

> ID：11555572
> 
> 赞同：-2
> 
> 时间：2012-07-19T07:06:35.590
> 
> 标签：php, mysql

我这里有 8 列.. 场景是.. 如果用户只有一个以前的工作记录怎么办？提交时如何忽略其他留空的字段？

**就业记录**

```
 <table class="main" width="73%" border="0" align="center" cellpadding="0" cellspacing="2">
        <form action='scripts/forms_script3.php' name='forml' method='post'>
            <tr>
                <th>
                    Position Held
                </th>
                <th>
                    Company/Tel. No.
                </th>
                <th>
                    Immediate Head
                </th>
                    <th colspan="2">Inclusive Years<br/>&nbsp;&nbsp;From&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;To&nbsp;&nbsp;&nbsp;&nbsp;</th>
                <th>
                    Hiring Salary
                </th>
                <th>
                    Last Salary
                </th>
                <th>
                    Reason/s for Leaving
                </th>
            </tr>
            <tr>
                <td>
                    <input type='text' name='aposheld' size='20' maxlength='75'/>
                </td>
                <td>
                    <input type='text' name='acomtel' size='40' maxlength='75'/>
                </td>
                <td>
                    <input type='text' name='aimmhead' size='20' maxlength='75'/>
                </td>
                <td>
                    <input type='text' name='afrom' size='5' maxlength='75'/>
                </td>
                <td>
                    <input type='text' name='ato' size='5' maxlength='75'/>
                </td>
                <td>
                    <input type='text' name='ahsal' size='8' maxlength='75'/>
                </td>
                <td>
                    <input type='text' name='alsal' size='8' maxlength='75'/>
                </td>
                <td>
                    <input type='text' name='areason' size='45' maxlength='75'/>
                </td>
            </tr>
            <tr>
                <td>
                    <input type='text' name='bposheld' size='20' maxlength='75'/>
                </td>
                <td>
                    <input type='text' name='bcomtel' size='40' maxlength='75'/>
                </td>
                <td>
                    <input type='text' name='bimmhead' size='20' maxlength='75'/>
                </td>
                <td>
                    <input type='text' name='bfrom' size='5' maxlength='75'/>
                </td>
                <td>
                    <input type='text' name='bto' size='5' maxlength='75'/>
                </td>
                <td>
                    <input type='text' name='bhsal' size='8' maxlength='75'/>
                </td>
                <td>
                    <input type='text' name='blsal' size='8' maxlength='75'/>
                </td>
                <td>
                    <input type='text' name='breason' size='45' maxlength='75'/>
                </td>
            </tr>
            <tr>
                <td>
                    <input type='text' name='cposheld' size='20' maxlength='75'/>
                </td>
                <td>
                    <input type='text' name='ccomtel' size='40' maxlength='75'/>
                </td>
                <td>
                    <input type='text' name='cimmhead' size='20' maxlength='75'/>
                </td>
                <td>
                    <input type='text' name='cfrom' size='5' maxlength='75'/>
                </td>
                <td>
                    <input type='text' name='cto' size='5' maxlength='75'/>
                </td>
                <td>
                    <input type='text' name='chsal' size='8' maxlength='75'/>
                </td>
                <td>
                    <input type='text' name='clsal' size='8' maxlength='75'/>
                </td>
                <td>
                    <input type='text' name='creason' size='45' maxlength='75'/>
                </td>
            </tr>
            <tr>
                <td>
                    <input type='text' name='dposheld' size='20' maxlength='75'/>
                </td>
                <td>
                    <input type='text' name='dcomtel' size='40' maxlength='75'/>
                </td>
                <td>
                    <input type='text' name='dimmhead' size='20' maxlength='75'/>
                </td>
                <td>
                    <input type='text' name='dfrom' size='5' maxlength='75'/>
                </td>
                <td>
                    <input type='text' name='dto' size='5' maxlength='75'/>
                </td>
                <td>
                    <input type='text' name='dhsal' size='8' maxlength='75'/>
                </td>
                <td>
                    <input type='text' name='dlsal' size='8' maxlength='75'/>
                </td>
                <td>
                    <input type='text' name='dreason' size='45' maxlength='75'/>
                </td>
            </tr>
            <tr>
                <td>
                    <input type='text' name='eposheld' size='20' maxlength='75'/>
                </td>
                <td>
                    <input type='text' name='ecomtel' size='40' maxlength='75'/>
                </td>
                <td>
                    <input type='text' name='eimmhead' size='20' maxlength='75'/>
                </td>
                <td>
                    <input type='text' name='efrom' size='5' maxlength='75'/>
                </td>
                <td>
                    <input type='text' name='eto' size='5' maxlength='75'/>
                </td>
                <td>
                    <input type='text' name='ehsal' size='8' maxlength='75'/>
                </td>
                <td>
                    <input type='text' name='elsal' size='8' maxlength='75'/>
                </td>
                <td>
                    <input type='text' name='ereason' size='45' maxlength='75'/>
                </td>
            </tr>
            <tr>
                <td colspan="8">
                    <div align="center">
                        <input type='submit' name='Submit' id='Submit' value='Save' />
                    </div>
                </td>
            </tr>

        </form>

    </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T07:14:51.103

使用 PHP 循环？一个非常简单的例子是：

```
$letters = array("a", "b", "c", "d", "e", "f", "g", "h");

foreach ($letters as $letter)
{
   // does one of the fields contain input
   if ($_POST[$letter.'posheld']!="" || $_POST[$letter.'comtel']!="" || $_POST[$letter.'immhead']!="" || $_POST[$letter.'from']!="" || $_POST[$letter.'to']!="") 
   {
      // process record
   }
} 
```

# android - twitter4j 是否为传入的直接消息提供事件侦听器？

> ID：11555573
> 
> 赞同：1
> 
> 时间：2012-07-19T07:06:41.357
> 
> 标签：android, twitter, twitter4j

我正在开发一个使用 twitter4j API 与 Twitter 交互的应用程序。此 API 是否为传入的直接消息提供事件侦听器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T19:19:03.170

**请在以下代码中找到实现。
请将 twitter4j-core-2.2.6.jar 和 twitter4j-stream-2.2.6.jar 添加到您的构建路径中。**

```
package com.apt.java.test.twitterdemo;

import java.util.List;

import twitter4j.DirectMessage;
import twitter4j.Status;
import twitter4j.StatusDeletionNotice;
import twitter4j.StatusListener;
import twitter4j.Twitter;
import twitter4j.TwitterException;
import twitter4j.TwitterFactory;
import twitter4j.TwitterStream;
import twitter4j.TwitterStreamFactory;
import twitter4j.User;
import twitter4j.UserList;
import twitter4j.UserStreamListener;
import twitter4j.auth.AccessToken;
import twitter4j.conf.ConfigurationBuilder;

public class TwitterDemo {
    private TwitterStream twitterStream;
    private void initConfiguration(){
        ConfigurationBuilder cb = new ConfigurationBuilder();
        cb.setDebugEnabled(true)
          .setOAuthConsumerKey("YOUR CONSUMER KEY")
          .setOAuthConsumerSecret("YOUR CONSUMER SECRET");

        TwitterStreamFactory twitterStreamFactory = new TwitterStreamFactory(cb.build());
        twitterStream = twitterStreamFactory.getInstance(new AccessToken("YOUR ACCESS TOKEN", "YOUR ACCESS TOKEN SECRET"));
        twitterStream.addListener(userStreamListener);
        twitterStream.user();

    }

    UserStreamListener userStreamListener = new UserStreamListener() {

        @Override
        public void onException(Exception arg0) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onTrackLimitationNotice(int arg0) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onStatus(Status status) {
            // TODO Auto-generated method stub
            System.out.println(status.getText());
        }

        @Override
        public void onScrubGeo(long arg0, long arg1) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onDeletionNotice(StatusDeletionNotice arg0) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onUserProfileUpdate(User arg0) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onUserListUpdate(User arg0, UserList arg1) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onUserListUnsubscription(User arg0, User arg1, UserList arg2) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onUserListSubscription(User arg0, User arg1, UserList arg2) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onUserListMemberDeletion(User arg0, User arg1, UserList arg2) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onUserListMemberAddition(User arg0, User arg1, UserList arg2) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onUserListDeletion(User arg0, UserList arg1) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onUserListCreation(User arg0, UserList arg1) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onUnfavorite(User arg0, User arg1, Status arg2) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onUnblock(User arg0, User arg1) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onRetweet(User arg0, User arg1, Status arg2) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onFriendList(long[] arg0) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onFollow(User arg0, User arg1) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onFavorite(User arg0, User arg1, Status arg2) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onDirectMessage(DirectMessage message) {
            // TODO Auto-generated method stub
            System.out.println(message.getText());
        }

        @Override
        public void onDeletionNotice(long arg0, long arg1) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onBlock(User arg0, User arg1) {
            // TODO Auto-generated method stub

        }
    };

    public static void main(String[] args){
        TwitterDemo demo = new TwitterDemo();
        demo.initConfiguration();

    }
} 
```

# android - 卸载的附件未标记为 android 中的下载错误

> ID：11555575
> 
> 赞同：0
> 
> 时间：2012-07-19T07:06:50.180
> 
> 标签：android, android-intent

我正在将电话联系人写入文件并通过电子邮件意图操作将其导出。当我将文件写入 SD 卡时，导出工作正常。但是当我将文件写入模拟器的手机内存时，我收到的邮件没有附件。我的日志显示“未加载的附件未标记为下载”。

下面是我的代码

```
 file = new File(ctx.getFilesDir().getAbsolutePath(),"file.txt");

        if (file.exists()) {
            file.delete();

        }
        writer = new BufferedWriter(new FileWriter(file));
        for (int i = 0; i < names.size(); i++) {
            writer.write(names.get(i) + "," + phnno.get(i) + "\r\n");
        }

        writer.flush();
        writer.close(); 
```

这是我的电子邮件意图

```
 Uri u1 = null;
                                u1 = Uri.fromFile(file);
                                System.out.println("u1 of URI"+u1); //u1 in logcat is "file:///data/data/com.android.contactxport/files/file.txt"

                                Intent sendIntent = new Intent(
                                        Intent.ACTION_SEND);
                                sendIntent.putExtra(Intent.EXTRA_SUBJECT,
                                        "Mail from ContactXPort App");
                                sendIntent
                                        .putExtra(Intent.EXTRA_STREAM, u1);
                                sendIntent.setType("text/html");
                                startActivity(sendIntent); 
```

**编辑：关于卸载附件的文档说**

```
/**
 * Check whether the message with a given id has unloaded attachments.  If the message is
 * a forwarded message, we look instead at the messages's source for the attachments.  If the
 * message or forward source can't be found, we return false
 * @param context the caller's context
 * @param messageId the id of the message
 * @return whether or not the message has unloaded attachments
 */
public static boolean hasUnloadedAttachments(Context context, long messageId) {
    Message msg = Message.restoreMessageWithId(context, messageId);
    if (msg == null) return false;
    Attachment[] atts = Attachment.restoreAttachmentsWithMessageId(context, messageId);
    for (Attachment att: atts) {
        if (!attachmentExists(context, att)) {
            // If the attachment doesn't exist and isn't marked for download, we're in trouble
            // since the outbound message will be stuck indefinitely in the Outbox.  Instead,
            // we'll just delete the attachment and continue; this is far better than the
            // alternative.  In theory, this situation shouldn't be possible.
            if ((att.mFlags & (Attachment.FLAG_DOWNLOAD_FORWARD |
                    Attachment.FLAG_DOWNLOAD_USER_REQUEST)) == 0) {
                Log.d(Logging.LOG_TAG, "Unloaded attachment isn't marked for download: " +
                        att.mFileName + ", #" + att.mId);
                Attachment.delete(context, Attachment.CONTENT_URI, att.mId);
            } else if (att.mContentUri != null) {
                // In this case, the attachment file is gone from the cache; let's clear the
                // contentUri; this should be a very unusual case
                ContentValues cv = new ContentValues();
                cv.putNull(AttachmentColumns.CONTENT_URI);
                Attachment.update(context, Attachment.CONTENT_URI, att.mId, cv);
            }
            return true;
        }
    }
    return false;
} 
```

我的理解是路径是这里的问题。但是当我在日志中打印它时，路径是 fyn 的。

任何帮助深表感谢。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-11T23:59:05.683

我发现本机电子邮件应用程序接受您需要调用的附件`Intent.setType`以及使用而`ACTION_SEND`不是`ACTION_SENDTO`.

以下是我最终构建让电子邮件附件在 gmail 和本机应用程序中工作的意图的方式：

```
Intent intent  = new Intent(Intent.ACTION_SEND); // SENDTO does not work for native email app
        intent.setData(Uri.fromParts("mailto",to, null));
        intent.putExtra(Intent.EXTRA_EMAIL, new String[] { to });
        intent.putExtra(Intent.EXTRA_SUBJECT, subject);
        intent.putExtra(Intent.EXTRA_TEXT, body);
        intent.setType("message/email");
        if (attachmentInCacheDir != null) {
            intent.putExtra(Intent.EXTRA_STREAM, Uri.parse("content://" + getAuthority(context) + "/" + attachmentInCacheDir.getName()));
        }
        context.startActivityForResult(Intent.createChooser(intent, "Send Email"), 1000); 
```

如您所见，我还使用内容提供程序进行文件访问，以避免将文件复制到外部存储。这是一个全新的蠕虫罐，因为本机应用程序在您的提供程序上调用“查询”以询问文件大小。如果大小为零，则不会附加。Gmail 要宽松得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T15:27:15.677

根据我最近的经验，将 Intent.EXTRA_STREAM 与外部文件 Uri 一起使用——无论它位于 getExternalCacheDir ()、getExternalFilesDir () 还是 Environment.getExternalStorageDirectory ()——将有效地与许多电子邮件客户端应用程序一起使用（可能：我只测试了 GMail、Evernote 和本机电子邮件客户端）...但值得注意的是：通过本机电子邮件应用程序除外...

我昨天所做的测试涉及针对 MS Exchange 公司电子邮件帐户的本机电子邮件应用程序，并且我收到了“未加载的附件未标记为下载：”调试消息。电子邮件最初看起来制作正确，带有附件（即使显示了附件文件大小！），但发送的电子邮件没有附件。

使用 GMail 客户端没有这样的行为：一切都很好。我想在发送之前在 GMail 中查看附件文件的大小，但文件是与电子邮件一起发送的。在它的一边，Evernote 创建一个带有附件文件的可编辑笔记作为嵌入对象。

当我查看您发布的参考源代码时，我认为 Android 原生电子邮件应用程序开发人员对附件文件做出了一些不正确的假设。他们根本没有提供来自 Intent.EXTRA_STREAM 的附件...这很奇怪，因为附件在发送前与消息一起显示，因此它可能根本不会在本机电子邮件应用程序数据库中创建电子邮件时保存，或者附件在过程中被错误地标记/取消标记。

我知道这本身并不能回答问题，但至于通过本机电子邮件应用程序发送附件（我可以在 Android ICS 中说这么多），我想我们被卡住了！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T06:28:08.343

这是文档中有关内部存储的内容：

**默认情况下，保存到内部存储的文件对您的应用程序是私有的，其他应用程序无法访问它们（用户也不能）。**

所以我现在正在尝试在我的应用程序中使用本机 android 电子邮件应用程序附加文件的功能。

或者我可以使用其他后端开发技术来附加包含我要导出的内容的文件。

# django - 在 Django 中，我希望能够在其管理表单中使用对象的外键批量创建项目。我该怎么做呢？

> ID：11555577
> 
> 赞同：1
> 
> 时间：2012-07-19T07:06:53.430
> 
> 标签：django, templates, admin

所以我正在开发一个课程大纲应用程序。每个教学大纲都有一个或多个班级会议时间、开始日期、结束日期。我希望能够根据管理表单中的这些信息为每个教学大纲自动生成一组课堂会议。这个想法很简单，用户应该能够输入会议时间、开始日期和结束日期，点击一个按钮，然后让 django 创建用户可以编辑的内联类会话对象。因此，例如，如果我有一个班级在 5 月 1 日至 9 月 1 日之间的每周二开会，我应该能够点击一个按钮，并获得班级会议——或者至少是班级会议表格，没有理由将它们保存在数据库中，直到它们被填写——在这些日期之间的每个星期二。

相关型号代码如下：

```
class Syllabus (models.Model):
    name = models.CharField(max_length=120)
    number = models.CharField(max_length=32, blank = True)  
    start_date = models.DateField()
    end_date = models.DateField()

class DaysTime(models.Model):
    days = MultiSelectField(max_length=15, choices=WEEKDAYS)
    startTime = models.TimeField()
    endTime = models.TimeField()

    class Meta:
        abstract = True

class ClassTime(DaysTime):
    key = models.ForeignKey('Syllabus')

class EventAbstract (models.Model):
    name = models.CharField(max_length=120)
    description = models.TextField(blank = True)
    startDateTime = models.DateTimeField()
    endDateTime = models.DateTimeField(blank = True)

    class Meta:
        abstract=True

class ClassSession(EventAbstract):
    cancelled = models.BooleanField(default = False)
    syllabus = models.ForeignKey('Syllabus')
    date = models.DateField() 
```

生成日期和日期的 ClassSessions 不是问题。在自定义管理模板上添加一个按钮来扩展 change_form 也不是问题。因为 change_form 是高度通用的，并且对它所呈现的模型一无所知，所以我看不到让按钮与函数对话。

所以在我看来，问题是三个方面：

1.  如何向生成新 ClassSessionInlines 的函数提供重复上课时间？
2.  如何在管理页面上创建它们？
3.  我如何填充他们的字段？

# android - 如何通过调用soap webservices使用mysql获取用户的详细信息？

> ID：11555578
> 
> 赞同：0
> 
> 时间：2012-07-19T07:06:54.730
> 
> 标签：android, mysql, ksoap2

我正在使用 SOAP WebServices 为 MySQL 数据库连接开发一个 Android 项目。

在我的数据库中，我有 3 个字段（用户名、密码、电子邮件）。

在这里，我插入 3 个用户的值。我为登录表单创建了一个网络服务代码。

登录表单代码为：

```
package com.userlogin.ws;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;

public class Login {
    public String authentication(String userName, String password) {

        String retrievedUserName = "";
        String retrievedPassword = "";
        String status = "";
        try {

            Class.forName("com.mysql.jdbc.Driver");
            Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/androidlogin", "root", "");
            PreparedStatement statement = con.prepareStatement("SELECT * FROM user WHERE username = '" + userName + "'");
            ResultSet result = statement.executeQuery();

            while (result.next()) {
                retrievedUserName = result.getString("username");
                retrievedPassword = result.getString("password");
            }

            if (retrievedUserName.equals(userName) && retrievedPassword.equals(password)) {
                status = "Success!";

            } else {
                status = "Login fail!!!";
            }

        } catch (Exception e) {
            e.printStackTrace();
        }
        return status;

    }

} 
```

忘记密码。网络服务代码是：

```
package com.userlogin.ws;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.PreparedStatement;

public class ForgetPassword {
    public String customerData(){
        String customerInfo = "";
        try{
            Class.forName("com.mysql.jdbc.Driver");
            Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/androidlogin","root","");
            //Find customer information where the customer ID is maximum
            PreparedStatement statement =  con.prepareStatement("SELECT * FROM user WHERE username = (SELECT username FROM user)");
            ResultSet result = statement.executeQuery();

            while(result.next()){
                customerInfo = customerInfo + result.getString("username") + "&" + result.getString("password") + "&"+result.getString("email");
                //Here "&"s are added to the return string. This is help to split the string in Android application
            }
        }

        catch(Exception exc){
            System.out.println(exc.getMessage());
        }

        return customerInfo;
    }

} 
```

如果我点击了*忘记密码*，应用程序应该启动下一个`Activity`.

下一个`Activity`应该要求电子邮件，id..

输入邮件 ID 后，它应该继续处理另一个`Activity`并仅显示该特定人员的密码。

我应该使用哪个查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T07:23:05.167

根据问题，无法完全说出您的确切含义，但根据您在代码中的评论说明

> # 在客户 ID 最大的地方查找客户信息

然后您正在寻找最新用户的用户信息（假设您有一个自动递增的用户 ID，并且可以使用如下内容：

```
SELECT * FROM user AS u1, (SELECT MAX(id) AS maxid FROM user) AS m1 WHERE u1.id=m1.maxid; 
```

或者你可以在没有子选择的情况下做到这一点

```
SELECT * FROM user ORDER BY id DESC LIMIT 1; 
```

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T07:13:36.013

要获取特定的用户详细信息，

```
SELECT * FROM user WHERE username = 'XXX(Enter the name of the user)' 
```

获取任一用户详细信息

```
SELECT * FROM user limit 1 
```

使用电子邮件获取特定用户的密码

```
SELECT password FROM user where email = "XXX(Enter the email of the user)" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T07:20:04.650

如果要获取具有最大 id 的用户：

```
SELECT max(id) as Max, id FROM user having id = Max 
```

或者：

```
SELECT * FROM user ORDER BY id DESC LIMIT 1; 
```

**编辑：**

如果我理解编辑后的问题*我不确定我是什么），那么您的问题就在这里：

```
"SELECT * FROM user WHERE username = (SELECT username FROM user)" 
```

此代码选择数据库中的所有用户，这就是该代码仅适用于一个用户的原因。

在您的忘记密码中，您想使用给定的电子邮件更改用户的密码，所以它假设是这样的：

```
"SELECT * FROM user WHERE email=" + usersemail 
```

# asp.net - 如何为不同的手机（BB、Iphone、Nexus...）指定不同的 Css

> ID：11555585
> 
> 赞同：1
> 
> 时间：2012-07-19T07:07:40.030
> 
> 标签：asp.net, html, mobile, css, jquery-mobile

我目前正在`ASP.net`和`jQuery`+`jQm` 中开发一个将在手持设备上使用的移动 Web 应用程序。我希望能够为`Blackberry`、一个`Google Nexus`和一个指定一个主题`IPhone`，而不仅仅是这个。

有什么办法可以在 CSS3 中为每个主题指定一个主题吗？您能否指出在这种情况下该怎么做。我也希望当我旋转屏幕以保持上述所有设备的设计到位时。

我目前正在试验这个：

```
@media screen and (orientation:landscape) and (max-width: 819px) 
```

但我也对其他方法持开放态度。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T09:46:38.673

不是在 CSS 中，而是使用 JS，您可以利用该`navigator.useragent`属性并为每个平台动态加载相应的样式表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T09:56:54.857

您可以使用 javascript 或通过服务器端代码检查浏览器用户代理。

[我推荐这款手机探测器](http://detectmobilebrowsers.com/)

# opengl - 当事件发生时，我应该如何在循环中使用 glutPostRedisplay 多次调用 display ？

> ID：11555588
> 
> 赞同：1
> 
> 时间：2012-07-19T07:07:43.220
> 
> 标签：opengl, glut

我是opengl的新手。我想在用户按下某个键时画几次场景，当按下该键时，我在 for 循环中调用了 glutPostRedisplay，但它只是重画了我的场景一次。我应该如何处理这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T09:24:10.237

首先，*glutPostRedisplay*是一个属于 GLUT 的函数，它不是 OpenGL 的一部分，而是一个第三方库/框架。还有其他框架，或者您可以从头开始做所有事情（哎呀，我才记得，当我大约 14 年前开始学习 OpenGL 时，GLUT 无法正常工作，所以我当时确实从头开始编写我的框架）。

> 当用户按下某个键时，我想画几次我的场景

**切勿**将绘图和动画逻辑与事件处理混合。如果用户按下触发某些动画的键，请设置一个标志（=某个变量），该动画应该被播放，然后在您的渲染/动画循环中迭代动画。

> 按下键时，我在 for 循环中调用了 glutPostRedisplay，但它只是重绘了我的场景一次

glutPostRedisplay 不会立即触发重绘。它设置了一个标志，即 GLUT 消息循环应该在所有消息处理之后发出重绘而不是空闲。当然，这个标志不会累积。

所以这是一个使用 GLUT 的布局。不幸的是，GLUT 对于这类事情并不理想，因为它不能让您控制事件循环，这使得精确的时序难以实现。

```
time_t rendertimer;
void stopwatch(time_t); // some external helper function that reports time between calls

typedef enum {stop, play} animstate;

struct animation {
    float time;
    float duration;
    animstate state;
};

animation animations[...];

void keyboard(key, x, y)
{
    if(key == ...) {
        animations[0].time = 0;
        animations[0].state = play;
    }

    glutPostRedisplay();
}

void idle()
{
    float deltaT = stopwatch(rendertimer);

    if( animation[...].state == play ) {
        animation[...].time += deltaT;
        if( animation[...].duration <= animation[...].time ) {
             animation[...].state = stop;
        }
    }

    glutPostRedisplay();
}

void display()
{
    draw_objects_according_to_animation();
} 
```

# iphone - 我应该在 +initialize 中调用 super 吗？

> ID：11555589
> 
> 赞同：8
> 
> 时间：2012-07-19T07:07:53.310
> 
> 标签：iphone, objective-c, ipad

我需要这样做吗：

```
+(void)initialize{
     ...my stuff...
  [super initialize];
 } 
```

也就是说，如果我在我的 App Delegate 中`initialize`从父类 ( `NSObject`) 覆盖，我需要确保超级实现也被调用？或者这不适用，因为这不是实例方法？

这种方法有多“安全”？我正在实现 iNotify 库，文档建议将设置添加到此方法，但我以前没有将它用于应用程序中的任何内容，并且还想知道它是否可能与其他意外冲突？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T07:27:41.390

如果您有此类的子类，则最好使用 dispatch_once 语句调用您的代码，因为每个子类将再次调用此方法

```
+(void)initialize
{
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^
    {
        //Your Code
    });
} 
```

有关详细信息，请参阅[Mike Ash](http://www.mikeash.com/pyblog/friday-qa-2009-05-22-objective-c-class-loading-and-initialization.html)的这篇博文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-26T14:05:28.667

> 运行时向程序中的每个类发送初始化，就在类或从它继承的任何类从程序内发送其第一条消息之前。运行时以线程安全的方式将初始化消息发送到类。超类在其子类之前收到此消息。如果子类没有实现 initialize（运行时将调用继承的实现）或子类显式调用 [super initialize]，则超类实现可能会被多次调用。如果您想保护自己免于被多次运行，您可以按照以下方式构建您的实现：

[https://developer.apple.com/library/mac/documentation/cocoa/reference/foundation/classes/nsobject_class/reference/reference.html#//apple_ref/occ/clm/NSObject/initialize](https://developer.apple.com/library/mac/documentation/cocoa/reference/foundation/classes/nsobject_class/reference/reference.html#//apple_ref/occ/clm/NSObject/initialize)

从而使两者

```
+ (void)initialize
{
    ...
} 
```

和

```
+ (void)initialize
{
    [super initialize];

    ...
} 
```

有效的。

# mysql - MySQL：如何将子项的 SUM() 值更新为同一表中的父行？

> ID：11555592
> 
> 赞同：3
> 
> 时间：2012-07-19T07:08:03.297
> 
> 标签：mysql, sum, sql-update, temp-tables, mysql-error-1111

我需要获取子行的总和值并更新父行上的数据。我得到了这个，如下所示，但遇到了错误#1111（组函数的无效使用）。

```
CREATE TEMPORARY TABLE cms_ladu_temp LIKE cms_ladu;

INSERT INTO cms_ladu_temp SELECT * FROM cms_ladu WHERE parent_id IN (326,500);

UPDATE 
    cms_ladu 
INNER JOIN
    cms_ladu_temp
ON
    cms_ladu_temp.parent_id=cms_ladu.id 
SET  
    cms_ladu.child_packaging_units_in=SUM(cms_ladu_temp.packaging_units_in), 
    cms_ladu.child_net_weight_in=SUM(cms_ladu_temp.net_weight_in) 
WHERE 
    cms_ladu.id IN (326,500); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T07:15:54.260

您需要做的是按 id 分组以分隔每个父 id 的子总和。您将需要使用子选择来完成此操作。

此外，您不需要创建临时表。只需将聚合包装在子选择中（按 分组`parent_id`），然后将子选择加入主表：

```
UPDATE 
    cms_ladu a
INNER JOIN
(
    SELECT   parent_id, 
             SUM(packaging_units_in) AS pui,
             SUM(net_weight_in) AS nwi
    FROM     cms_ladu
    WHERE    parent_id IN (326,500)
    GROUP BY parent_id
) b ON a.id = b.parent_id
SET 
    a.child_packaging_units_in = b.pui,
    a.child_net_weight_in = b.nwi 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T07:16:27.487

尝试

```
UPDATE  cms_ladu a
    INNER JOIN (SELECT parent_id, SUM(packaging_units_in) AS packaging_units_in, SUM(net_weight_in) AS net_weight_in FROM cms_ladu_temp WHERE id IN (326,500) GROUP BY parent_id) b
        ON b.parent_id=a.id
SET     a.child_packaging_units_in = b.packaging_units_in
    ,a.child_net_weight_in = b.net_weight_in 
```

# c# - 如何显示图片裁剪区域

> ID：11555593
> 
> 赞同：4
> 
> 时间：2012-07-19T07:08:06.420
> 
> 标签：c#, javascript, jquery, asp.net, jcrop

[在这篇文章Upload-and-Crop-Images-with-jQuery-JCrop-and-ASP.NET](http://www.mikesdotnetting.com/Article/95/Upload-and-Crop-Images-with-jQuery-JCrop-and-ASP.NET)的帮助下，我已经成功实现了图像裁剪解决方案。它工作正常，但在页面加载时，我想显示默认裁剪区域。就像下图一样。我的意思是当打开包含裁剪图片的页面时，它会显示默认坐标，但是，用户可以编辑这些坐标。

我想突出显示 100x100 坐标。

这是一个封闭的解决方案[http://jsfiddle.net/kLbVM/3/](http://jsfiddle.net/kLbVM/3/)在这个例子中，当我们点击按钮时，它会突出显示坐标，但是当页面加载时我需要同样的东西。

我正在寻找同样的东西，就像在**linkedin.com**

![在此处输入图像描述](../Images/213e30a7c9112e9476714cf64a6dc908.png)

**编辑：**这是我的页面源...

```
<head runat="server">
    <style>
        #imgProfileImage
        {
            width: auto;
            height: auto;
        }
        .jcrop-handle
        {
            background-color: #333;
            border: 1px #eee solid;
            font-size: 1px;
            width: 7px;
            height: 7px;
        }
    </style>

    <link href="css/jquery.Jcrop.min.css" rel="stylesheet" type="text/css" />
    <script src="Scripts/jquery.min.js" type="text/javascript"></script>
    <script src="Scripts/jquery.Jcrop.pack.js" type="text/javascript"></script>
    <title></title>
</head>

<body>
<form id="form1" runat="server">
<div>
    <asp:Image ID="imgProfileImage" runat="server" width="400px" height="400px" />
    <asp:HiddenField ID="X" runat="server" />
    <asp:HiddenField ID="Y" runat="server" />
    <asp:HiddenField ID="W" runat="server" />
    <asp:HiddenField ID="H" runat="server" />
    <br />
    <asp:Button ID="btnCrop" runat="server" Text="Crop Picture" CssClass="accentheader"
        OnClick="btnCrop_Click" />
</div>
</form> 
```

```
<script type="text/javascript">
jQuery(document).ready(function () {
    var jcrop_api;
    jcrop_api = $.Jcrop('#imgProfileImage');
    jcrop_api.setSelect([0, 0, 100, 100]);
    jcrop_api.enable();

    jQuery('#imgProfileImage').Jcrop({
        onSelect: storeCoords
    });
});

function storeCoords(c) {
    jQuery('#X').val(c.x);
    jQuery('#Y').val(c.y);
    jQuery('#W').val(c.w);
    jQuery('#H').val(c.h);
}; 
```

现在它.... ![在此处输入图像描述](../Images/c538eae1f67c119271511349ea9c6327.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-21T08:33:48.037

尝试以下步骤：

1.  当你做' `Jcrop(element)`'时，`element`应该是一个`img`，而不是一个`div`或任何其他标签，所以将你的`id="cropbox"`属性从移动`div`到`img`：

    ```
    <div    >
    <!--  |________    -->
    <!--           |    -->
        <img id="cropbox" src="..." />
    </div> 
    ```

2.  指定`width`和类`height`：`.jcrop-handle`

    ```
    .jcrop-handle{
          background-color:#333;
          border:1px #eee solid;
          font-size:1px; 
          width:7px;    //explicit width
          height:7px;   //explicit height
     } 
    ```

3.  `setSelect`在离子之后启用调整“交互”处理程序的大小：

    ```
     jcrop_api.setSelect([0,0,100,100]);  //default selection on page load
     jcrop_api.enable();    //enable resize interactivity 
    ```

[**现场演示**](http://jsfiddle.net/kLbVM/5/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T07:33:29.873

[http://jsfiddle.net/kLbVM/4/](http://jsfiddle.net/kLbVM/4/)

因此，您希望它在页面加载时设置默认尺寸。

```
$(function(){
   jcrop_api.setSelect(getDimensions());
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T10:31:47.757

将代码放在表单的“显示”事件上，它会做你需要的。假设您正在使用 .Net 表单来显示页面，也就是说。我认为在文档加载完成后会调用一个事件，如果您需要先从 Internet 加载页面，可以使用该事件将代码放入其中。

在任何情况下，无论实际平台如何，由于代码在事件（按钮单击）中工作，因此在加载**后和显示之前，它将在相应的 Form/Document 事件中工作。**它在“加载”事件中不起作用。

# oracle - 返回 Oracle 数据库中的月份和年份

> ID：11555595
> 
> 赞同：0
> 
> 时间：2012-07-19T07:08:07.880
> 
> 标签：oracle

好的，这可能是一个简单的问题，但我不知道执行此操作的命令。

我想根据给定的月份和年份检索特定数据。假设用户想要查看 2011 年 6 月聘用的所有员工。我该如何编写命令？

```
 SELECT  hire_date, to_char(hire_date, 'month') 
    FROM    employees 
    WHERE   to_char(hire_date,'MM') = '06'; 
```

这将返回 6 月份雇用的所有员工。但我只想要 2011 年录用的人。我怎样才能将年份放入指挥部？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T07:09:39.090

```
where to_char(hire_date, 'YYYYMM') = '201106'; 
```

或（对索引更友好）

```
where hire_date between 
   to_date('20110601', 'YYYYMMDD') and to_date('20110701', 'YYYYMMDD')
                                               -- or maybe '20110630' 
```

# xmpp - 谁能告诉我为什么 Smack 的 Presence.getMode() 在可用（在线）联系的情况下给出 null ？

> ID：11555596
> 
> 赞同：4
> 
> 时间：2012-07-19T07:08:15.320
> 
> 标签：xmpp, smack

我正在使用 XMPP 在 Android 上开发一个聊天应用程序。当 Presence 对象包含：可用（在线）时，我检索 RosterEntery 的存在。我调用 `presence.getMode()` which 返回**null**。

谁能告诉我为什么`presence.getMode()`在在线联系的情况下返回null？当 Presence 对象包含 : available (away) 或 (dnd) 时， Presence.getMode() 工作正常。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-03T14:50:49.657

Smack 库文档状态 - “返回存在更新的模式，如果未设置模式，则返回 null。null 存在模式值被解释为与 Presence.Mode.available 相同的东西。”

[https://www.igniterealtime.org/builds/smack/docs/latest/javadoc/org/jivesoftware/smack/packet/Presence.html#getMode%28%29](https://www.igniterealtime.org/builds/smack/docs/latest/javadoc/org/jivesoftware/smack/packet/Presence.html#getMode%28%29)

# java - 无法在 Jar 之外找到资源

> ID：11555601
> 
> 赞同：1
> 
> 时间：2012-07-19T07:08:41.930
> 
> 标签：java, resourcebundle

我有一个java程序，如下所示：

```
package com.abc.myproject;

import java.util.*;

class test {
    public static void main(String[] args) 
    {
        ResourceBundle rb = ResourceBundle.getBundle("mybundle");
        String propertyValue = rb.getString("name");
        System.out.println("propertyValue="+propertyValue);
    }
} 
```

我有这个程序位于 C:\testing\code\src\com\abc\myproject\test.java 下，并且我将 mybundle.properties 保存在 C:\testing\code 文件夹下。

mybundle.properties 包含一行：

```
name=Mike 
```

当我从命令提示符运行程序时，如下所示，它运行得非常好：

```
C:\testing\code\src>java -cp .;c:\testing\code com.abc.myproject.test
propertyValue=Mike 
```

现在，我创建了仅包含 test.class 的 Jar 文件 xyz.jar 并将此 Jar 保存在 C:\testing 目录中，并且 jar 的清单包含以下内容：

```
Manifest-Version: 1.0
Created-By: 1.7.0_05 (Oracle Corporation)
Main-Class: com.abc.myproject.test 
```

在同一目录 C:\testing 中，我保留了 mybundle.properties，然后尝试使用以下命令运行 jar：

```
java -cp .;c:\testing -jar xyz.jar 
```

但它无法加载 mybundle 资源并抛出错误：

```
Exception in thread "main" java.util.MissingResourceException: Can't find bundle
 for base name scheduler, locale en_US
        at java.util.ResourceBundle.throwMissingResourceException(Unknown Source)
        at java.util.ResourceBundle.getBundleImpl(Unknown Source)
        at java.util.ResourceBundle.getBundle(Unknown Source)
        at com.abc.myproject.test.main(test.java:8) 
```

我必须将 mybundle.properties 保留在 Jar 之外，因为我们应该能够在此文件中进行更改而无需重新部署 Jar。

有人可以帮我解决这个问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T07:15:18.273

> java -cp .;c:\testing -jar xyz.jar

使用时不能添加到类路径中`-jar`。$CLASSPATH 和`-cp`被忽略，它只会使用 jar 清单中的类路径。

你可以做的是像这样运行你的课程：

> java -cp .;c:\testing;xyz.jar com.abc.myproject.test

# c# - 带有 XDocument 命名空间问题的 Linq-to-XML

> ID：11555609
> 
> 赞同：2
> 
> 时间：2012-07-19T07:09:03.477
> 
> 标签：c#, xml-namespaces, linq-to-xml

我有这个 XML 文档：

```
<?xml version="1.0" encoding="utf-8"?>
<directoryresponse xmlns="https://www.sisow.nl/Sisow/REST" version="1.0.0">
  <directory>
    <issuer>
      <issuerid>01</issuerid>
      <issuername>ABN Amro Bank</issuername>
    </issuer>
    <issuer>
      <issuerid>02</issuerid>
      <issuername>ASN Bank</issuername>
    </issuer>
  </directory>
</directoryresponse> 
```

这不起作用：

```
var banks = doc.Descendants("issuer").Select(x => 
    new Bank(Convert.ToInt32(x.Element("issuerid").Value), x.Element("issuername").Value)).ToList(); 
```

但是当我手动删除 directoryresponse xml 命名空间 `xmlns="https://www.sisow.nl/Sisow/REST"`时，它可以工作！命名空间 url 是**404**。那么，如果它是 404，为什么不`xdoc`忽略名称空间呢？

这也不起作用：`var banks = doc.Elements().Where(e => e.Name.LocalName == "issuer" ).Select(...`

主要问题是：如何修改我的代码以使其忽略 404 命名空间？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T07:13:07.687

URL 本身在这里是无关紧要的——它只是命名空间的一个标记，真的。我不相信 LINQ to XML 会尝试获取它。

但是，您需要使用它来构造`XName`要搜索的内容：

```
XNamespace ns = "https://www.sisow.nl/Sisow/REST";
var banks = doc.Descendants(ns + "issuer")
               .Select(x => new Bank((int) x.Element(ns + "issuerid"),
                                     (string) x.Element(ns + "issuername"))
               .ToList(); 
```

# finite-automata - DFA 和 NFA 等效语言

> ID：11555610
> 
> 赞同：0
> 
> 时间：2012-07-19T07:09:08.363
> 
> 标签：finite-automata, dfa, nfa

我被要求构建一个 DFA A 和 NFA B，使得 L(D) = L(N) 具有某些特定条件。我不是在寻求解决方案或答案；我只是想确保我有正确的方法来解决这个问题。

首先，我对“构建”这个词有点困惑。他们只是想画一个自动机吗？那会被认为是“建成”吗？

我正在考虑绘制适合该条件的 NFA B。然后使用绘图，我将构造一个等价的 DFA A。在某处有一个定理说等价的自动机具有相同的语言。所以我不需要做任何进一步的事情来显示 L(A) = L(B) 对吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T05:38:18.387

这听起来很对。只需构造任何接受语言 L(A) 的 NFA A。然后确定 NFA 产生 DFA B。然后 DFA B 也应该接受 L(A)。DFA 和 NFA 在他们接受的语言中是等效的。

# javascript - JQuery setTimeOut while 循环

> ID：11555611
> 
> 赞同：0
> 
> 时间：2012-07-19T07:09:08.147
> 
> 标签：javascript, jquery, while-loop, settimeout, infinite-loop

我的大脑要爆炸了..为什么这不起作用？我试图用时间间隔为一些 div 设置动画并尝试编写更少的代码，但这不起作用

```
 var cargaCont = function(){
        o = 1;
        var animacion = function(i){
            $('#page2txt'+i).animate({
                height:'20'
            },200,function(){
                $('#page2img'+i).animate({
                    left:'0',
                    right:'0'
                },200,function(){
                    i++;
                    return i;
                });
            });
        }
        while(o < 3){
            setTimeout(function(){o = animacion(o);},200);
        }   
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T07:31:58.123

这段代码的问题：

```
while(o < 3){
    setTimeout(function(){o = animacion(o);},200);
} 
```

`setTimeout`在执行延迟的函数时，`o`已经是 3，因此所有调用都`animacion`传递 3 而不是 1 和 2。

`o`为了规避这个问题，您应该使用立即函数“本地化” 的值。

```
while(o < 3){
    //o out here is from cargaCont
    (function(o){
        //override o by naming the passed variable o
        setTimeout(function(){
            o = animacion(o); //now o refers to the local o
        },200);
    }(o)); //execute inner function, passing in o
} 
```

这使得`o`函数使用的 in`setTimeout`绑定到`o`本地函数的 而不是函数`o`的`cargaCont`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T08:20:06.247

我不是 100% 确定你到底要做什么，但我猜你基本上想循环播放一些动画，可能是这样的：

```
var cargaCont = function(){
    var i = 1,
        animacion = function(i){
            $('#page2txt'+i).animate({
               height:'20'
           },200,function(){
               $('#page2img'+i).animate({
                   left:'0',
                   right:'0'
               },200,function(){
                   if(i < 3){
                      animacion(++i);
                   }
               });
           });
       };
    animacion(i);
}; 
```

根据您的感觉进行编辑或发布一些标记以进一步解释。

干杯。

# c# - 验证错误后无法识别新输入值

> ID：11555612
> 
> 赞同：1
> 
> 时间：2012-07-19T07:09:11.033
> 
> 标签：c#, entity-framework, code-first

我有一个用户控件，其中包含一些字段，例如名为 textBoxNombre 的文本框

我有一些验证注释，例如：

```
 [Required(ErrorMessage="Debe escribir el Nombre")]
    public String Nombre { get; set; } 
```

这是用于添加新客户（客户）的按钮（称为 buttonAgregar）的简化代码：

```
 private void buttonAgregar_Click(object sender, RoutedEventArgs e)
    {
        var cliente = new Cliente
        {
            Nombre = textBoxNombre.Text,
            Apellido1 = textBoxPrimerApellido.Text,
            Apellido2 = textBoxSegundoApellido.Text,
        };

        db.Clientes.Add(cliente);

        try
        {
            db.SaveChanges();
        }
        catch (System.Data.Entity.Validation.DbEntityValidationException exc)
        {
            String mensaje = "";

            foreach (var validationErrors in exc.EntityValidationErrors)
                foreach (var validationError in validationErrors.ValidationErrors)
                    mensaje += validationError.ErrorMessage + "\n";

            MessageBox.Show(mensaje, "Se han encontrado errores", MessageBoxButton.OK, MessageBoxImage.Error);
        }
    } 
```

如果我将 textBoxNombre 留空，则会触发异常并显示消息框。然后我在 textBoxNombre 中键入一些文本，但是当我再次单击 buttonAgregar 时，异常被触发，消息框再次显示相同的错误消息。buttonAgregar_Click() 方法没有在 textBoxNombre 中获取新值。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T07:58:51.230

这是因为先前创建的`Cliente`实例仍由上下文跟踪，并且当您调用`SaveChanges`该实体时也会得到验证。因此，您会得到验证异常。

如果您遇到任何验证错误，请分离实体。每次单击按钮时，您也可以使用上下文的新实例。

```
private void buttonAgregar_Click(object sender, RoutedEventArgs e)
{
    var cliente = new Cliente
    {
        Nombre = textBoxNombre.Text,
        Apellido1 = textBoxPrimerApellido.Text,
        Apellido2 = textBoxSegundoApellido.Text,
    };

    db.Clientes.Add(cliente);

    try
    {
        db.SaveChanges();
    }
    catch (System.Data.Entity.Validation.DbEntityValidationException exc)
    {
        String mensaje = "";

        foreach (var validationErrors in exc.EntityValidationErrors)
            foreach (var validationError in validationErrors.ValidationErrors)
                mensaje += validationError.ErrorMessage + "\n";

        db.Entry(cliente).State = EntityState.Detached;

        MessageBox.Show(mensaje, "Se han encontrado errores", MessageBoxButton.OK, MessageBoxImage.Error);
    }
} 
```

# c - C 中使用 POST 请求的 HTTP 测试代码返回 405 状态代码

> ID：11555613
> 
> 赞同：0
> 
> 时间：2012-07-19T07:09:15.620
> 
> 标签：c, http, post, client, recv

我编写了一个首先连接到 Web 服务器的测试代码。然后，它使用 GET 请求具有登录表单的页面。GET 有效，并且从 Web 服务器返回 200 状态代码。检索页面后，我尝试发送 POST 请求以发送一些登录信息，但收到 405 METHOD_NOT_ALLOWED 状态码作为回报。

以下是发送 GET 的代码：

```
char data[273] = "GET /login HTTP/1.1\r\nHost: www.minecraft.net\r\nUser-Agent: Web-sniffer/1.0.37 (+http://web-sniffer.net/)\r\nAccept-Charset: ISO-8859-1,UTF-8;q=0.7,*;q=0.7\r\nCache-Control: no-cache\r\nAccept-Language: de,en;q=0.7,en-us;q=0.3\r\nReferer: http://web-sniffer.net/\r\n\r\n";
if ((val = send(sockfd, &data,272,0)) == -1){
    perror("send");
} 
```

这是包含 POST 命令的代码，用户名和密码已更改，因此不会提供任何个人信息：

```
char data2[405] = "POST /login HTTP/1.1\r\nHost: www.minecraft.net\r\nConnection: close\r\nUser-Agent: Web-sniffer/1.0.37 (+http://web-sniffer.net/)\r\nAccept-Charset: ISO-8859-1,UTF-8;q=0.7,*;q=0.7\r\nCache-Control: no-cache\r\nAccept-Language: de,en;q=0.7,en-us;q=0.3\r\nReferer: http://web-sniffer.net/\r\nContent-type: application/x-www-form-urlencoded\r\nContent-length: 38\r\n\r\nusername=ausername&password=apassword";
if ((val = send(sockfd, &data2,404,0)) == -1){
    perror("send");
} 
```

使数据包可读：

```
GET /login HTTP/1.1[CRLF]
Host: www.minecraft.net[CRLF]
User-Agent: Web-sniffer/1.0.37 (+http://web-sniffer.net/)[CRLF]
Accept-Charset: ISO-8859-1,UTF-8;q=0.7,*;q=0.7[CRLF]
Cache-Control: no-cache[CRLF]
Accept-Language: de,en;q=0.7,en-us;q=0.3[CRLF]
Referer: http://web-sniffer.net/[CRLF]
[CRLF] 
```

和 POST 数据包：

```
POST /login HTTP/1.1[CRLF]
Host: www.minecraft.net[CRLF]
Connection: close[CRLF]
User-Agent: Web-sniffer/1.0.37 (+http://web-sniffer.net/)[CRLF]
Accept-Charset: ISO-8859-1,UTF-8;q=0.7,*;q=0.7[CRLF]
Cache-Control: no-cache[CRLF]
Accept-Language: de,en;q=0.7,en-us;q=0.3[CRLF]
Referer: http://web-sniffer.net/[CRLF]
Content-type: application/x-www-form-urlencoded[CRLF]
Content-length: 38[CRLF]
[CRLF]
username=ausername&password=apassword 
```

您可能会注意到，用户代理是 Web-sniffer，因为我使用 web-sniffer.net 来制作这些数据包，这些数据包在他们的网站上运行，因为那里的 POST 命令返回了 302 FOUND 状态代码。

我想知道为什么当完全相同的数据包在 web-sniffer.net 上工作时会在这里观察到这种行为，但在这里却不起作用。

# python - Python：使用 odeint 实现阈值模型

> ID：11555615
> 
> 赞同：2
> 
> 时间：2012-07-19T07:09:18.547
> 
> 标签：python, differential-equations, threshold, numerical-integration

我正在处理的问题（所示示例高度简化）似乎是一个常见问题，但我还没有找到解决方案。我有三种不同的反应，v1、v2 和 v3，定义如下：

v1：R <-> A + C；v1 = k1*(R - A*C/5000.)

v2：R <-> B + C；v2 = k2*(R - B*C/5000.)

v3：A + B -> P；v3 = k3*A*B

使用资源 R，前两个反应分别产生 A 和 C 以及 B 和 C，而第三个反应将 A 和 B 转换为产物 P（k1、k2、k3 是常数，这里它们设置为 1）。

只有当 C 超过称为 Cthr（此处：Cthr = 25）的某个阈值时才会发生第三个反应，否则 v3 为 0。因此想法是 C 积累，然后一旦达到一定浓度，就会产生产品 P。

我实现如下：

```
def thresholdmodel (yn,tvec,allpara,R):

    (A, B, C, P) = yn

    k1, k2, k3 = allpara['kv']    

    Cthr = allpara['Cthresh']

    if C <= Cthr:
        v3 = 0
    else:      
        v3 = k3*A*B
        C = 0 #does not(!) affect the ouput, why?

    v1 = k1*(R - A*C/5000.)
    v2 = k2*(R - B*C/5000.)

    dA = v1 - v3
    dB = v2 - v3
    dC = v1 + v2
    dP = v3

    return (dA, dB, dC, dP) 
```

模拟的输出如下所示：http: [//i50.tinypic.com/apdvkj.png](http://i50.tinypic.com/apdvkj.png)

所以显然它在第一次达到阈值之前一直有效（v3 为 0，不产生 P）但之后 C 未设置为 0，我不知道为什么。
我想得到的是：C一直产生到阈值，下降到0，再次产生，下降到0等等，看起来像一个锯齿波。
P 的时间过程应该看起来像楼梯（仅在超过 Cthr 时产生）。

有谁知道我必须做什么才能将 C 设置回 0 并接收预期的输出？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T07:56:44.677

我不明白你的方程式，但我可以告诉你为什么`C`不下降到 0。

因为`C`是局部变量`thresholdmodel()`，所以`C`对任何值的更改都不会改变 中的状态`odeint`。`odeint`将始终集成`dC`返回的`thresholdmodel()`. 所以`C`会不断增加。

编辑：

C 会不断增加，所以每次 C > threshold 都需要改变阈值，如：

```
lastC = 0

def thresholdmodel (yn,tvec,allpara,R):
    global lastC
    (A, B, C, P) = yn

    k1, k2, k3 = allpara['kv']    

    Cthr = allpara['Cthresh']

    if C <= lastC + Cthr:
        v3 = 0
    else:      
        v3 = k3*A*B
        lastC = C

    v1 = k1*(R - A*C/5000.)
    v2 = k2*(R - B*C/5000.)

    dA = v1 - v3
    dB = v2 - v3
    dC = v1 + v2
    dP = v3

    return (dA, dB, dC, dP) 
```

# mysql - 为什么这个 IF 语句不编译

> ID：11555625
> 
> 赞同：0
> 
> 时间：2012-07-19T07:10:02.467
> 
> 标签：mysql

代码如下。

```
SELECT MAX(days) INTO @_days FROM my_table; -- compiles ok

-- problems start here

IF DAYOFWEEK(@_days) = 6 THEN                           
    INSERT INTO my_table(days) VALUES(DATE_ADD(@_days,INTERVAL 2 DAY));
ELSE
    INSERT INTO my_table(days) VALUES(DATE_ADD(@_days,INTERVAL 1 DAY));
END IF; 
```

我得到的错误是#1064。我的mysql版本是5.5.25

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T07:23:08.003

它应该可以工作，因为我看不到任何语法错误。检查编辑器中的任何特殊字符。

你也可以试试：

```
INSERT INTO my_table(days) VALUES(DATE_ADD(@_days,INTERVAL IF(DAYOFWEEK(@_days) = 6, 2, 1) DAY)); 
```

# javascript - 阻止在 Firefox 中缓存本地 HTML 页面

> ID：11555627
> 
> 赞同：2
> 
> 时间：2012-07-19T07:10:13.170
> 
> 标签：javascript, html

我知道这个问题之前已经被问过多次，但没有一个发布的解决方案对我不起作用。

问题场景是：**我正在使用一组具有 DOM 和内容处理功能的本地 HTML 页面（这些不仅仅是静态页面）。现在单击“后退”按钮浏览器会显示不可取的缓存页面，我需要重新加载 html 页面。**

我在标签中添加了以下内容，以防止 HTML 页面缓存，但它仍然缓存 HTML 页面并显示缓存的内容：

```
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="-1"> 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T07:41:47.283

我认为您正在看到 bfcache 的运行情况。[https://stackoverflow.com/a/3695577/873567](https://stackoverflow.com/a/3695577/873567)有一个技巧可以防止它启动。

# sql - 将批量插入收缩到基于循环的

> ID：11555629
> 
> 赞同：0
> 
> 时间：2012-07-19T07:10:21.563
> 
> 标签：sql, sql-server

想要将这段 SQL 查询更改为循环版本，每次迭代可以`Select-Insert`记录**1000 个项目。**

在每次迭代中都希望打印以查看最后插入的项目是什么。

**编码 ：**

```
INSERT INTO [tData2]
(
    [Key], 
    Info1,
    Info2
)
SELECT 
    [Key], --the Id
    Info1,
    Info2
FROM
    [tData] 
```

**编辑 ：**

（还有其他限制插入的条件，与问题无关）

Bulk-Insertion 逻辑不会改变，只是我们收缩要插入的数据库片段。我们每次迭代批量插入 10000 个项目，而不是插入整个表，并且还可以获得关于它的简单报告。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T07:53:50.030

这是我快速整理的一些示例代码供您试验。这不使用游标（使用 while 代替），但您也可以这样构建它。您可以进行一些性能优化，但只有您可以判断。YMMV

```
 set nocount on

/* mock up source/dest tables */
declare @src table (id int, value varchar(max));
declare @dest table (id int, value varchar(max));

/* fill source with some data */
declare @rownum int;
set @rownum=0;
while (@rownum<5000) begin
    insert into @src select @rownum,'test value ' + CONVERT(varchar(25),@rownum);
    select @rownum=@rownum+1;
end

/* laod batched data */
declare @pagesize int;set @pagesize=1000;
declare @rowlow int;set @rowlow=0;
declare @rowmax int;set @rowmax=@pagesize;

declare @ct int;select @ct = COUNT(*) from @src;
declare @id int;
declare @value varchar(max);

while (@rowmax<=@ct) begin

    WITH result_set AS (
      SELECT ROW_NUMBER() OVER (ORDER BY id) AS [row_number], id,value
      FROM @src  
    ) insert into @dest 
        SELECT id,value FROM result_set
        WHERE [row_number] BETWEEN @rowlow AND @rowmax

    -- Output
    print 'Copied rows ' + convert(varchar(25),@rowlow) + ' to ' + convert(varchar(25),@rowmax)     

    -- Increment batch counters
    select @rowlow=@rowmax+1,@rowmax+=@pagesize;
end

select * from @dest 
```

# qt - QList 和删除

> ID：11555630
> 
> 赞同：12
> 
> 时间：2012-07-19T07:10:26.103
> 
> 标签：qt, memory-management, qlist

我有一个`QList`指向具有类类型的对象的指针`Model`。我想`QList`在它被使用后适当地删除它。我知道 Qt 的哲学是避免 C 风格的内存管理。`delete`我该怎么做`QList`？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-19T07:14:08.607

您可以使用[qDeleteAll](http://qt-project.org/doc/qt-4.8/qtalgorithms.html#qDeleteAll-2)：

```
qDeleteAll(lstMdls);

lstMdls.clear(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-11T15:40:20.697

从[较早的修订版](https://stackoverflow.com/posts/11555630/revisions)中可以看出，这是 OP 的方法：

```
QList<Model*>lstMdls;

get Data(lstMdls);
 /*
  * Do other things
  */
for(int i=0;i<lstMlds.size();i++)
{
    delete lstMdls.first();
} 
```

# java - 虚拟 SDCard 出现问题

> ID：11555633
> 
> 赞同：2
> 
> 时间：2012-07-19T07:10:33.863
> 
> 标签：java, android

我正在尝试从链接下载数据库，但是当我创建一个`FileOutputstream`对象时，它会提示一个`FileNotFoundException`，告诉我访问被拒绝。我调查了一下，发现它可能是 sdcard，当我过去 `Environment.getExternalStorageState()` 查看发生了什么时，它告诉我 sd 卡已被移除。我检查并看到 sd 已正确插入虚拟设备，那么我该如何解决这个问题？

提前致谢！

**编辑：** 我已经有权在清单上写在外部设备上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T07:19:24.933

你有

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

在你的清单中？

# php - 搜索查询返回一个空的结果集

> ID：11555636
> 
> 赞同：0
> 
> 时间：2012-07-19T07:10:52.840
> 
> 标签：php, html, mysql

我有这个代码：

PHP：

```
[CONNECT TO DATABASE OR DIE ( THIS WORKS )]   
if(isset($_GET['search'])) // If it's submitted 
    { 
    $inp = Clean($_GET['inpname']); // Clean my input 
    $sQuery="SELECT name FROM user WHERE (id LIKE '%$inp%')"; // mySql query 
    $r = mysql_query($sQuery) or die(mysql_error()); 
    if(mysql_affected_rows()===0) // If no match found 
        echo "{$inp} is not in our database."; 
    else 
        { 
        echo "<p>{$inp} was successfully searched.</p>"; // Yes, the query worked 
        while($row=mysql_fetch_array($r)) // Loop through the query results 
            echo "{$row[0]}<br>"; // Show the results 
        } // End of the else statement 
    } // End of the if statement 

function Clean($str) // Clean my input 
{ 
    return mysql_real_escape_string(strip_tags(trim($sStr))); // Remove traces of injection 
} 
```

HTML：

```
<form name="form" action="<?php echo $_SERVER['PHP_SELF']; ?>" method="get"> 
<input name="inpname" type="text"> 
<input type="submit" name="search" value="Search"> 
</form> 
```

我想按 ID 在我的数据库中搜索成员，但是当我搜索示例 1 时，我没有结果：不在我们的数据库中。(/index.php?inpname=1&search=搜索)

如果我使用 '%".$inp."%' 而不是 '%$inp%' 它可以工作，但它会显示我数据库中的所有用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T07:23:44.373

如果你检查 php 手册说：

> ```
> int mysql_affected_rows ([ resource $link_identifier = NULL ] ) 
> ```
> 
> 通过与 link_identifier 关联的最后一个 INSERT、UPDATE、REPLACE 或 DELETE 查询获取受影响的行数。

[http://php.net/manual/en/function.mysql-affected-rows.php](http://php.net/manual/en/function.mysql-affected-rows.php)

因此，如果您使用 SELECT 进行查询，则没有返回值。

将您的代码更改为这样的内容

```
if(isset($_GET['search'])) // If it's submitted 
{ 
    $inp = Clean($_GET['inpname']); // Clean my input 
    $sQuery="SELECT name FROM user WHERE id LIKE '%$inp%'"; // mySql query 
    $r = mysql_query($sQuery) or die(mysql_error());

    if (mysql_num_rows($r))
    {
       while ($row=mysql_fetch_array($r))
       {
           echo $row['name']."<br>"; // Show the results 
       }

    }
    else
    {
       echo "{$inp} is not in our database.";  
    }   

} // End of the if statement 
```

如果你只想要一排

```
if(isset($_GET['search'])) // If it's submitted 
{ 
    $inp = Clean($_GET['inpname']); // Clean my input 
    $sQuery="SELECT name FROM user WHERE id LIKE '%$inp%' LIMIT 1"; // mySql query 
    $r = mysql_query($sQuery) or die(mysql_error());

    if (mysql_num_rows($r))
    {
       $row=mysql_fetch_array($r)
       echo $row['name']."<br>"; // Show the results 
    }
    else
    {
       echo "{$inp} is not in our database.";  
    }   

} // End of the if statement 
```

如果你想通过确切的 id 搜索

```
if(isset($_GET['search'])) // If it's submitted 
{ 
    $inp = Clean($_GET['inpname']); // Clean my input 
    $sQuery="SELECT name FROM user WHERE id = $inp LIMIT 1"; // mySql query 
    $r = mysql_query($sQuery) or die(mysql_error());

    if (mysql_num_rows($r))
    {
       $row=mysql_fetch_array($r)
       echo $row['name']."<br>"; // Show the results 
    }
    else
    {
       echo "{$inp} is not in our database.";  
    }   

} // End of the if statement 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T07:16:44.417

我发现如果您这样做，使用 LIKE 搜索效果最好：

```
id LIKE '%$inp%' OR id LIKE '%$inp' OR id LIKE '$inp%' OR id = '$inp' 
```

因为 % 意味着必须至少有一个符号。因此 %1% 不会找到`1`，但会找到`417`。至少这对我有用:)

# performance - 多次迭代后，VBA 代码的执行速度变慢

> ID：11555643
> 
> 赞同：0
> 
> 时间：2012-07-19T07:11:40.657
> 
> 标签：performance, excel, vba, iteration

我写了一个小子来过滤大约。Excel 列表中有 56.000 个项目。

它按预期工作，但是在 30.000 次迭代之后它变得越来越慢。在 100.000 次迭代之后，它真的很慢......

Sub 检查每一行，如果它包含任何定义的单词（KeyWords 数组）。如果为真，它会检查它是否是误报，然后将其删除。

我在这里想念什么？为什么它变得这么慢？

谢谢...

```
Private Sub removeAllOthers()
'
' removes all Rows where Name does not contain
' LTG, Leitung...
'

Application.ScreenUpdating = False    
Dim TotalRows As Long
TotalRows = Cells(rows.Count, 4).End(xlUp).row

' Define all words with meaning "Leitung"
KeyWords = Array("LTG", "LEITUNG", "LETG", "LEITG", "MASSE")

' Define all words which are false positives"
BadWords = Array("DUMMY", "BEF", "HALTER", "VORSCHALTGERAET", _
                 "VORLAUFLEITUNG", "ANLEITUNG", "ABSCHIRMUNG", _
                 "AUSGLEICHSLEITUNG", "ABDECKUNG", "KAELTEMITTELLEITUNG", _
                 "LOESCHMITTELLEITUNG", "ROHRLEITUNG", "VERKLEIDUNG", _
                 "UNTERDRUCK", "ENTLUEFTUNGSLEITUNG", "KRAFTSTOFFLEITUNG", _
                 "KST", "AUSPUFF", "BREMSLEITUNG", "HYDRAULIKLEITUNG", _
                 "KUEHLLEITUNG", "LUFTLEITUNG", "DRUCKLEITUNG", "HEIZUNGSLEITUNG", _
                 "OELLEITUNG", "RUECKLAUFLEITUNG", "HALTESCHIENE", _
                 "SCHLAUCHLEITUNG", "LUFTMASSE", "KLEBEMASSE", "DICHTUNGSMASSE")

For i = TotalRows To MIN_ROW Step -1

    Dim nmbr As Long
    nmbr = TotalRows - i

    If nmbr Mod 20 = 0 Then
        Application.StatusBar = "Progress: " & nmbr & " of " & TotalRows - MIN_ROW & ": " & Format(nmbr / (TotalRows - MIN_ROW), "Percent")
    End If

    Set C = Range(NAME_COLUMN & i)

    Dim Val As Variant
    Val = C.Value

    Dim found As Boolean

    For Each keyw In KeyWords
        found = InStr(1, Val, keyw) <> 0
        If (found) Then
            Exit For
        End If
    Next

    ' Check if LTG contains Bad Word
    Dim badWord As Boolean

    If found Then

        'Necessary because SCHALTER contains HALTER
        If InStr(1, Val, "SCHALTER") = 0 Then
            'Bad Word filter
            For Each badw In BadWords
                badWord = InStr(1, Val, badw) <> 0
                If badWord Then
                    Exit For
                End If
            Next

        End If
    End If

    If found = False Or badWord = True Then
        C.EntireRow.Delete
    End If

Next i

Application.StatusBar = False

Application.ScreenUpdating = True

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T09:22:33.760

通常，与在内存中执行的循环相比，在长循环中对范围执行读取/写入操作很慢。
一种更高效的方法是将范围加载到内存中，在内存中执行操作（在数组级别），清除整个范围的内容并立即在工作表中显示新结果（在对数组进行操作之后）（否常量读/写，但只读和写一次）。

下面是一个包含 200 000 行的测试，它说明了我的目标，我建议你检查一下。如果它不是你想要的百分之一百，你可以按照你想要的任何方式对其进行微调。
我注意到屏幕在某个时候变成了空白；不要做任何事情，代码仍在运行，但您可能会暂时无法访问 Excel 应用程序。
但是，您会注意到它更快。

```
Sub Test()

Dim BadWords            As Variant
Dim Keywords            As Variant

Dim oRange              As Range
Dim iRange_Col          As Integer
Dim lRange_Row          As Long
Dim vArray              As Variant
Dim lCnt                As Long
Dim lCnt_Final          As Long
Dim keyw                As Variant
Dim badw                As Variant
Dim val                 As String
Dim found               As Boolean
Dim badWord             As Boolean
Dim vArray_Final()      As Variant

Keywords = Array("LTG", "LEITUNG", "LETG", "LEITG", "MASSE")

BadWords = Array("DUMMY", "BEF", "HALTER", "VORSCHALTGERAET", _
             "VORLAUFLEITUNG", "ANLEITUNG", "ABSCHIRMUNG", _
             "AUSGLEICHSLEITUNG", "ABDECKUNG", "KAELTEMITTELLEITUNG", _
             "LOESCHMITTELLEITUNG", "ROHRLEITUNG", "VERKLEIDUNG", _
             "UNTERDRUCK", "ENTLUEFTUNGSLEITUNG", "KRAFTSTOFFLEITUNG", _
             "KST", "AUSPUFF", "BREMSLEITUNG", "HYDRAULIKLEITUNG", _
             "KUEHLLEITUNG", "LUFTLEITUNG", "DRUCKLEITUNG", "HEIZUNGSLEITUNG", _
             "OELLEITUNG", "RUECKLAUFLEITUNG", "HALTESCHIENE", _
             "SCHLAUCHLEITUNG", "LUFTMASSE", "KLEBEMASSE", "DICHTUNGSMASSE")

Set oRange = ThisWorkbook.Sheets(1).Range("A1:A200000")
iRange_Col = oRange.Columns.Count
lRange_Row = oRange.Rows.Count
ReDim vArray(1 To lRange_Row, 1 To iRange_Col)
vArray = oRange

For lCnt = 1 To lRange_Row
    Application.StatusBar = lCnt

   val = vArray(lCnt, 1)

   For Each keyw In Keywords
       found = InStr(1, val, keyw) <> 0
       If (found) Then
           Exit For
       End If
   Next

    If found Then
       'Necessary because SCHALTER contains HALTER
       If InStr(1, val, "SCHALTER") = 0 Then
           'Bad Word filter
           For Each badw In BadWords
               badWord = InStr(1, val, badw) <> 0
               If badWord Then
                   Exit For
               End If
           Next
       End If
   End If

    If found = False Or badWord = True Then
    Else
        'Load values into a new array
        lCnt_Final = lCnt_Final + 1
        ReDim Preserve vArray_Final(1 To lCnt_Final)
        vArray_Final(lCnt_Final) = vArray(lCnt, 1)
    End If

Next lCnt

oRange.ClearContents
set oRange = nothing

If lCnt_Final <> 0 Then
    Set oRange = ThisWorkbook.Sheets(1).Range(Cells(1, 1), Cells(lCnt_Final, 1))
    oRange = vArray_Final
End If

End Sub 
```

# header - 服务器上的 JAX-WS ws-security UsernameToken 授权

> ID：11555645
> 
> 赞同：1
> 
> 时间：2012-07-19T07:11:59.970
> 
> 标签：header, jax-ws, microsoft-metro, ws-security, authorize

我用 METRO 在 netbeans 中创建了一个 Web 服务。我修改了我的 Web 服务 wsit 配置以使用 Usernametoken 身份验证（不加密）。

```
<?xml version="1.0" encoding="UTF-8"?> 
 <definitions 
 xmlns="http://schemas.xmlsoap.org/wsdl/" 
 xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" 
 xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
 xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" name="NewWebService" targetNamespace="http://test.org/" xmlns:tns="http://test.org/" xmlns:wsp="http://www.w3.org/ns/ws-policy" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:fi="http://java.sun.com/xml/ns/wsit/2006/09/policy/fastinfoset/service" xmlns:tcp="http://java.sun.com/xml/ns/wsit/2006/09/policy/soaptcp/service" xmlns:wsam="http://www.w3.org/2007/05/addressing/metadata" xmlns:sp="http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702" xmlns:sc="http://schemas.sun.com/2006/03/wss/server" xmlns:wspp="http://java.sun.com/xml/ns/wsit/policy" 
 >
    <message name="hello"/>
    <message name="helloResponse"/>
    <portType name="NewWebService">
        <operation name="hello">
            <input message="tns:hello"/>
            <output message="tns:helloResponse"/>
        </operation>
    </portType>
    <binding name="NewWebServicePortBinding" type="tns:NewWebService">
        <wsp:PolicyReference xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy" URI="#UsernameToken"/>
        <operation name="hello">
            <input></input>
            <output></output>
        </operation>
    </binding>
    <service name="NewWebService">
        <port name="NewWebServicePort" binding="tns:NewWebServicePortBinding"/>
    </service>
    <!-- Policy for Username Token with plaintext password, sent from client to server only -->
    <wsp:Policy wsu:Id="UsernameToken" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
        <wsp:ExactlyOne>
            <wsp:All>
                <sp:SupportingTokens xmlns:sp="http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702">
                    <wsp:Policy>
                        <sp:UsernameToken sp:IncludeToken=".../IncludeToken/AlwaysToRecipient"/>
                    </wsp:Policy>
                </sp:SupportingTokens>
                <wsss:ValidatorConfiguration wspp:visibility="private" xmlns:wsss="http://schemas.sun.com/2006/03/wss/server" xmlns:wspp="http://java.sun.com/xml/ns/wsit/policy">
                    <wsss:Validator name="usernameValidator" classname="org.test.MyAuth"/>
                </wsss:ValidatorConfiguration>
            </wsp:All>
        </wsp:ExactlyOne>
    </wsp:Policy>
</definitions> 
```

我的密码验证器

```
package org.test;
import com.sun.xml.wss.impl.callback.PasswordValidationCallback;
import com.sun.xml.wss.impl.callback.PasswordValidationCallback.PasswordValidationException;
import com.sun.xml.wss.impl.callback.PasswordValidationCallback.Request;
public class MyAuth implements PasswordValidationCallback.PasswordValidator
{
    @Override
    public boolean validate(Request request) throws PasswordValidationException {
        PasswordValidationCallback.PlainTextPasswordRequest ptreq 
            = (PasswordValidationCallback.PlainTextPasswordRequest)request;
        //Database query
        return CheckUserInDateBase(ptreq.getPassword(), ptreq.getUsername());
    }
} 
```

现在我需要用他的用户名和密码授权用户并检查他的角色（网络服务的每个方法都有注释 RolesAllowed）。我已经为我的 Web 服务创建了 SOAP 处理程序，我试图从肥皂标题中获取用户名和密码，但标题不包含此信息（当我在处理程序中获取此标题时）。实际上 SOAP 消息看起来像

```
<?xml version='1.0' encoding='UTF-8'?>
<S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <S:Header>
        <macAddress xmlns="http://ws.mkyong.com/" xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" SOAP-ENV:actor="http://schemas.xmlsoap.org/soap/actor/next">F8-D1-11-01-36-20</macAddress>
        <wsse:Security S:mustUnderstand="1">
            <wsse:UsernameToken xmlns:ns15="http://schemas.xmlsoap.org/ws/2006/02/addressingidentity" xmlns:ns14="http://docs.oasis-open.org/ws-sx/ws-secureconversation/200512" xmlns:ns13="http://www.w3.org/2003/05/soap-envelope" wsu:Id="uuid_48e60f1c-aea9-4bcc-897f-ef661fe2895b">
                <wsse:Username>myusername</wsse:Username>
                <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">mypass</wsse:Password>
            </wsse:UsernameToken>
        </wsse:Security>
    </S:Header>
    <S:Body>
        <ns2:hello xmlns:ns2="http://test.org/">
            <name>aaaa</name>
        </ns2:hello>
    </S:Body>
</S:Envelope> 
```

当我尝试提取标头的子元素时，我只得到 macAddress 标头（我的自定义标头）

```
@Override  
public boolean handleMessage(SOAPMessageContext context) {  
    Iterator i = context.getMessage().getSOAPPart().getEnvelope().getHeader().getChildElements();
    return true;
} 
```

所以。如何访问 wssecurity 标头？或者在执行 Web 服务方法之前可能有另一种方法来检查用户角色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T11:47:01.220

无需检查您的验证器，而是使用 ThreadLocal 存储用户名和密码，然后在服务实现中应用您的身份验证角色，如下所示。就我而言，我使用这种方法来引发自定义异常。

我的验证器：

```
/**
* @author SaudAlajmi
*
*/
public class PasswordValidator implements PasswordValidationCallback.PasswordValidator {
/* I used this approach because they need to throw a custom exception in case of authentication failure, as far as I know there is no such way
 * to do it especially since the validator does not have access to the WebServiceContext, but this way and it is safe because every thread has
 * it is own copy and that's why I used ThreadLocal;
 */
private static final ThreadLocal<String> username = new ThreadLocal<String>();
private static final ThreadLocal<String> password = new ThreadLocal<String>();

public boolean validate(Request request) throws PasswordValidationException {
    PasswordValidationCallback.PlainTextPasswordRequest ptreq = (PasswordValidationCallback.PlainTextPasswordRequest) request;
    password.set(ptreq.getPassword());
    username.set(ptreq.getUsername());
    return true;
}
public static String getUsername() {
    String user = username.get();
    username.remove();
    return user;
}
public static String getPassword() {
    String pwd= password.get();
    password.remove();
    return pwd;
} 
```

}

我的服务实现：

```
String username = PasswordValidator.getUsername();
String password = PasswordValidator.getPassword();
if(username == null || !"test".equals(username) || password == null ||!"test".equals(password)){
faultInfo = new CommonErrorStructure();
faultInfo.setCode("KFSH000401");
faultInfo.setErrorText("Username/Password is incorrect");
faultInfo.setRaisedBy("PatientRecordService");
throw new GetPatientRecordError("Authentication Failure", faultInfo);
} 
```

参考： [使用 Metro + WSIT 在服务端点检索明文 WS-Security 密码？](https://stackoverflow.com/questions/13297345/retrieve-plaintext-ws-security-password-at-service-endpoint-with-metro-wsit)

# css - HTML/CSS - div 上的样式未注册

> ID：11555648
> 
> 赞同：0
> 
> 时间：2012-07-19T07:12:09.020
> 
> 标签：css, html

所以，这很烦人。一直试图让它工作太久了，我只是看不出它为什么不能工作的任何原因。

我正在尝试使用我的 *.css 定位一个 div，但它似乎没有使用它。不过，它将它用于我的其他 div。

这里有一些代码给大家看：

```
<div id="projRight">
    <!-- Project header -->

    <?php
    echo '<div id="projHeader">'.$showproject.'</div>';

    if($proj["description"]) echo '<br /><div id="projDesc">'.$proj["description"].'</div>';

    ?>

    <div id="projRightMid">
        <a href="javascript:animatedcollapse.toggle('projTeam')"><h3>Project Team</h3></a>
        <div id="projTeam">
            3D Artist: Stian Berg Larsen
        </div>
    </div>

    <div id="projRightBottom">
    Test div...
    </div>
</div> 
```

```
#projRight{
position:absolute;
right:10px;
top:10px;
width:353px;
height:388px;
}

#projRightMid{

}

#projRightBottom{
position:absolute;
bottom:10px;
right:10px;
height:90px;
width:300px;
background-color:#00FF00;
    font-family:Verdana, Geneva, sans-serif;
font-size:12px;
color:#666;
}

#projTeam{
font-family:Verdana, Geneva, sans-serif;
font-size:12px;
color:#666;
} 
```

编辑：我遇到问题的 div 是#projRightBottom、#projTeam。

这是我想要的截屏视频： http: [//screencast.com/t/g0QDkJVtKt](http://screencast.com/t/g0QDkJVtKt) 这是单击项目时加载的 iframe。

```
-Left side contains main video/image.
-Right side contains:
   -Project title (top)
   -Description (top, below header)
   -Similar buttons (bottom, above Project team) {opens a new page}
   -Project Team (bottom, above the devider and other images)(clicking this opens the div, revealing the team. (how do I make it slide up, and not down? Using this: http://www.dynamicdrive.com/dynamicindex17/animatedcollapse.htm
   -Divider (dividing top content from the 3 other images at the bottom)
   -3 images (at the bottom. 3 more images from the project). 
```

现在，我只是想把它全部设置好，以便它在正确的地方。然后在我进行时填写内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T09:44:30.347

好的，斯蒂安，这就是我要开始的。

我使用边框来帮助您了解什么是什么。

[http://jsfiddle.net/KGupZ/1/](http://jsfiddle.net/KGupZ/1/)

希望对你有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T07:19:54.870

我不确定您指的是哪个 div。

为了使用`position: absolute`你必须有一个 div(holder) 和`position: relative;`. [z-index](https://stackoverflow.com/questions/2305669/all-about-z-index)也可以很好地解决您的问题。

# opencart - 在许多产品中打开购物车相同的产品价格？

> ID：11555655
> 
> 赞同：0
> 
> 时间：2012-07-19T07:12:38.357
> 
> 标签：opencart, product

嗨，我刚刚安装了 Opencart 来测试它。但是我在其中看到了一件非常令人恼火的事情，即许多产品显示的价格相同，即使它们在管理面板中设置了不同的价格。我还清除了 mozilla 和 chrome 浏览器的缓存，以及 opencart 的缓存。没有任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T09:50:00.730

如果您使用的是演示数据，以及哪些产品受到影响，最好知道您使用的是哪个版本。

一件事可能是产品在管理员下的产品屏幕上的“选项”、“折扣”或“特殊”选项卡下设置了另一个价格。这些都可以覆盖“数据”选项卡下的价格。

# plsql - 有没有办法对具有“分组依据”子句的查询进行分区？

> ID：11555657
> 
> 赞同：1
> 
> 时间：2012-07-19T07:12:43.277
> 
> 标签：plsql, oracle10g, analytic-functions

假设我们有一个查询，按国家/地区显示人口组，将国家作为第一列，该国家的总人口作为第二列。

为此，我有以下查询：

```
select 
  i.country,
  count(1) population
from
  individual i
group by
  i.country 
```

现在我想在该查询中再添加两列来显示每个国家/地区的男性和女性人口。

我想要实现的可能看起来类似于：

```
select 
  i.country,
  count(1) population total_population,
  count(1) over (partition by 1 where i.gender='male') male_population,
  count(1) over (partition by 1 where i.gender='female') female_population,
from
  individual i
group by
  i.country 
```

问题在于

1.  “分组依据”查询中不允许“分区依据子句”
2.  “partition by”子句中不允许使用“where 子句”

我希望你明白这一点。请原谅我的语法和我给它命名的方式（无法知道更好的描述）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T08:31:35.240

您在这里不需要分析函数：

```
select 
  i.country
 ,count(1) population
 ,count(case when gender = 'male' then 1 end) male
 ,count(case when gender = 'female' then 1 end) female
from
  individual i
group by
  i.country
; 
```

见[http://www.sqlfiddle.com/#!4/7dfa5/4](http://www.sqlfiddle.com/#!4/7dfa5/4)

# jquery - persudo 的 jQuery 短代码

> ID：11555658
> 
> 赞同：0
> 
> 时间：2012-07-19T07:12:48.607
> 
> 标签：jquery

我正在寻找一种方法来说我的 div child li:nth-child(1) - li:nth-child(5) 先隐藏，然后当用户单击某个按钮时，显示 child(6) - 10。下面是更长的代码版本：

```
$('.history_presss ul li').hide();
$('.history_presss ul li:nth-child(1)').show();
$('.history_presss ul li:nth-child(2)').show();
$('.history_presss ul li:nth-child(3)').show();
$('.history_presss ul li:nth-child(4)').show();
$('.history_presss ul li:nth-child(5)').show();
$('ul.jPag-pages li:nth-child(1)').click(function(){
  $('.history_presss ul li').hide();
  $('.history_presss ul li:nth-child(1)').show();
  $('.history_presss ul li:nth-child(2)').show();
  $('.history_presss ul li:nth-child(3)').show();
  $('.history_presss ul li:nth-child(4)').show();
  $('.history_presss ul li:nth-child(5)').show();
});
$('ul.jPag-pages li:nth-child(2)').click(function(){
  $('.history_presss ul li').hide();
  $('.history_presss ul li:nth-child(6)').show();
  $('.history_presss ul li:nth-child(7)').show();
  $('.history_presss ul li:nth-child(8)').show();
  $('.history_presss ul li:nth-child(9)').show();
  $('.history_presss ul li:nth-child(10)').show();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T07:26:00.207

利用

`:lt(), :gt()`代替`nth-child()`

例如

```
$('.history_presss ul li:lt(5)').show();
$('.history_presss ul li:gt(4)').hide(); 
```

不要忘记`:lt()`并`:gt()`采取索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T07:30:27.453

使用 :lt() 和 :gt() 选择器怎么样？

*   [http://api.jquery.com/lt-selector/](http://api.jquery.com/lt-selector/)
*   [http://api.jquery.com/gt-selector/](http://api.jquery.com/gt-selector/)

代码可能如下所示：

```
$('.history_presss ul li').hide();
$('.history_presss ul li:lt(4)').show();
$('ul.jPag-pages li:nth-child(1)').on('click', function(){
    $('.history_presss ul li').hide();
    $('.history_presss ul li:lt(4)').show();
})
$('ul.jPag-pages li:nth-child(2)').on('click', function(){
    $('.history_presss ul li').hide();
    $('.history_presss ul li:gt(4)').show();
}) 
```

但请注意，计数以 '0' 开头，并且 lt 是“小于”（不小于或等于）。

附带说明：如果您使用的是当前的 jQuery，您应该切换到“on()”来进行绑定操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T07:17:24.730

你为什么不直接用 for 循环遍历它们呢？

创建一个索引变量并将其添加到您的代码中。

伪代码：

```
$('.history_presss ul li').hide();
   for (int i = 1; i < 6; i++)
        $('.history_presss ul li:nth-child(' + i + ')').show();

        $('ul.jPag-pages li:nth-child(1)').click(function(){
            $('.history_presss ul li').hide();
            for (int i = 1; i < 6; i++)
               $('.history_presss ul li:nth-child(' + i + ')').show();
        })
        $('ul.jPag-pages li:nth-child(2)').click(function(){
            $('.history_presss ul li').hide();
            for (int i = 6; i < 11; i++)
               $('.history_presss ul li:nth-child(' + i + ')').show();

        }) 
```

# tcp - TCP - 拥塞窗口和接收窗口之间的区别

> ID：11555662
> 
> 赞同：32
> 
> 时间：2012-07-19T07:13:12.523
> 
> 标签：tcp, ip

我试图了解拥塞窗口和接收窗口之间的区别。

据我了解，接收器窗口是接收器可以获取数据包的缓冲区。Congestion 窗口也是如此，它告诉我们 Receiver 的能力范围，并根据丢失的数据包等进行更改。

那么它们之间有什么区别呢？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-12-01T22:50:32.977

简而言之：接收窗口由接收者管理，接收者将窗口大小发送给发送者。窗口大小宣布接收缓冲区中仍然空闲的字节数，即发送者仍然可以发送而不需要接收者确认的字节数。

拥塞窗口是发送方强加的窗口，用于避免超出网络路径中间的某些路由器。发送方，每发送一个段，都会稍微增加拥塞窗口，即发送方将允许自己有更多未完成的发送数据。但是如果发送方检测到丢包，它会将窗口减半。这背后的基本原理是，发送者假设数据包丢失是由于某处的缓冲区溢出而发生的（这几乎总是正确的），因此发送者希望保留更少的数据“在飞行中”以避免将来进一步的数据包丢失。

更多信息，请从这里开始：[http ://en.wikipedia.org/wiki/Slow-start](http://en.wikipedia.org/wiki/Slow-start)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-06-01T02:36:19.063

最初，将 CongWindow 设置为等于一个数据包。然后它将第一个数据包发送到网络并等待确认。如果这个数据包的确认在定时器用完之前到达，发送方将 CongWindow 增加一个数据包并发出两个数据包。一旦所有这些数据包在超时前得到确认，CongWindow 就会增加 2 — 每个已确认的段一个。现在 CongWindow 的大小是 4 个数据包，因此发送方发送了 4 个数据包。只要 CongWindow 的大小低于阈值并且在相应的超时到期之前收到确认，这种指数增长就会继续。一个重要的区别是 CongWindow 的大小会发生变化，但接收窗口的大小始终是恒定的。

# c# - asp.net adding row to a table in update panel

> ID：11555667
> 
> 赞同：0
> 
> 时间：2012-07-19T07:13:28.363
> 
> 标签：c#, asp.net, updatepanel

I'm trying to add some rows to a table control in my updatepanel. I have a button in update panel and when the button is clicked, partial postback happens, in button_click handler I add 1 row to the table. I can trigger the postback event and I am able to add 1 row each time, but the problem is that every time the page is postedback I got the initial table, meaning all the rows I've added in previous postbacks are gone, how can I solve this? Any ideas are welcome?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T07:20:53.357

When you add rows in the table, you also need to save the struck of the table and somewhere else, for example on the view state, or on a database, or somewhere, and then recreate it because the code behind and the page it self did not have "a memory for what you do" on a table, did not know what you do on the DOM in general.

You may see the table on the page, but when you make a post back, the code behind did not get the post back of the struck of the table, only the posted data from input controls, so did not know by default what you have done on the table, and renders it from the beginning.

So, if you won to add rows in a table, and you won to remembers them on the next post back, save your struct also somewhere else, and when I say your struct, I do not mean all the table, you can simple save a number, eg how many rows you have add, or a number and an id, how many rows and what is on every row, and then before you add new rows, and on every post back, you recreate the table.

# iphone - 从登录切换到基于选项卡的视图，而不在应用程序启动时堆叠两个视图

> ID：11555672
> 
> 赞同：0
> 
> 时间：2012-07-19T07:13:46.833
> 
> 标签：iphone, iphone-developer-program

我目前已经在`applicationDidFinishLaunchingWithOptions`方法上堆叠了登录和基于选项卡的视图。当我在这两个类中使用这个 iphone 运行`viewDidLoad`方法时如何。请帮助我一次添加一个视图的方法。首先登录成功后登录切换到基于选项卡的视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T07:24:02.727

让基于选项卡的视图成为您的 rootViewController，但前提是您需要登录（以防您保存登录），将登录视图呈现为模态视图控制器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T09:34:37.140

您可以做的是显示您`loginViewController`的`applicationDidFinishLaunchingWithOptions`，然后当用户登录时，您可以使用下面的代码将您`tabViewController`的设置为`rootViewController`窗口。这将删除 并将其`loginViewController`替换为您的`tabViewController`.

```
AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
appDelegate.window.rootViewController = tabViewController 
```

# menu - 如何在 cocos2d 中使用 2 步按钮方法更改场景？

> ID：11555673
> 
> 赞同：0
> 
> 时间：2012-07-19T07:13:52.530
> 
> 标签：menu, cocos2d-iphone

主菜单中有两个按钮。

第一个按钮用于选择游戏，

第二个按钮是玩那个游戏。

触摸+播放很简单。但我不知道如何分开这些步骤。

如何存储此参数（所选游戏）并将其发送到方法（replaceScene）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T09:46:12.093

了解如何使用单例处理全局数据！解决了。

鲍勃的精彩教程！ [http://bobueland.com/cocos2d/2011/how-to-make-scenes/](http://bobueland.com/cocos2d/2011/how-to-make-scenes/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T08:04:53.443

使用 CCMenu 创建两个按钮。按这两个按钮显示不同的场景。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-10T23:57:33.477

您可能不需要这个，但对于所有其他有同样问题的人，请使用 CCMenu。这是 CCMenu 类文档的链接。

[http://www.cocos2d-iphone.org/api-ref/0.99.3/interface_c_c_menu.html](http://www.cocos2d-iphone.org/api-ref/0.99.3/interface_c_c_menu.html)

他们的文档非常有用。花一些时间阅读并通读他们网站上的文档和其他有用的说明。

# jquery - 仅在单击时隐藏 div

> ID：11555679
> 
> 赞同：1
> 
> 时间：2012-07-19T07:14:19.423
> 
> 标签：jquery, html, hide, show

我有这个代码：

```
<input id="i" type="text" value="value" />
<div id="u" style="border:solid 1px;width:140px;height:100px"></div>
<p>thanks</p> 
```

我想让#u 隐藏，并在我单击#i 时显示。然后当我单击#u 时，它将被隐藏。但是如果我点击#u 什么都没有发生。请你帮助我好吗。多谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T07:16:21.390

```
$("#i").focus(function() {
    //When the user clicks on #i then #u is shown
    $("#u").show();
}):

$("#u").blur(function() {
    //When the user clicks out of #u then #u is hidden
    $("#u").hide();
}): 
```

# c# - 将 JSON 对象解析为多个字典

> ID：11555681
> 
> 赞同：0
> 
> 时间：2012-07-19T07:14:23.397
> 
> 标签：c#, json

我正在写一段应该将 JSON 对象解析为多个字典的内容。我很熟悉将 JSON 解析为带有 JSON 帮助器的简单模型对象。

```
public static class JsonHelper
{
    public static string ToJson<T>(T instance)
    {
        var serializer = new DataContractJsonSerializer(typeof(T));
        using (var tempStream = new MemoryStream())
        {
            serializer.WriteObject(tempStream, instance);
            return Encoding.UTF8.GetString(tempStream.ToArray(), 0, Convert.ToInt32(tempStream.Length));
        }
    }

    public static T FromJson<T>(string json)
    {
        var serializer = new DataContractJsonSerializer(typeof(T));

        using (var tempStream = new MemoryStream(Encoding.Unicode.GetBytes(json)))
        {
            return (T)serializer.ReadObject(tempStream);
        }

    }
} 
```

但我需要将它解析为多个字典而不是模型对象（这将在最后，但目前我只需要字典）。

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T07:54:00.980

您可以使用`JavaScriptSerializer`类（程序集：System.Web.Extensions）。

它会自动将 JSon 字符串反序列化为`object[]`（在未命名数组的情况下）或`Dictionary<string,object>`（在命名数组的情况下）。

例如

1)

```
// txt = [ {A: "foo", B: "bar", C: "foobar"}, {X: "foo", Y: "bar", Z: "foobar"} ]
JavaScriptSerializer ser = new JavaScriptSerializer();
var data = ser.Deserialize<object>(txt); 
```

`data`将是一个`object[2]`，其中每个子对象都是一个`Dictionary<string,object>`

2)

```
// txt = {A: "foo", B: ["bar", 3.4], C: [1, 2, 3]}
JavaScriptSerializer ser = new JavaScriptSerializer();
var data = ser.Deserialize<object>(txt); 
```

`data`将是 a `Dictionary<string,object>`，其中键“B”和“C”处的元素将是对象数组 ( `object[]`)

# javascript - 标记拖动在使用 java 脚本的谷歌地图 v3 上不起作用。怎么做？

> ID：11555692
> 
> 赞同：0
> 
> 时间：2012-07-19T07:14:53.843
> 
> 标签：javascript, google-maps-api-3

这是我在搜索地址然后拖动它后用来放置标记的代码。

```
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>Google AJAX Local Search API + Maps API v3 demo</title>
    <link href="http://www.google.com/uds/css/gsearch.css" rel="stylesheet" type="text/css"/>
    <link href="./places.css" rel="stylesheet" type="text/css"/>

    <script src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <script src="http://www.google.com/uds/api?file=uds.js&amp;v=1.0&amp;key=ABQIAAAAjU0EJWnWPMv7oQ-jjS7dYxQ82LsCgTSsdpNEnBsExtoeJv4cdBSUkiLH6ntmAr_5O4EfjDwOa0oZBQ" type="text/javascript"></script>
    <script type="text/javascript">
    //<![CDATA[

    // Our global state
    var gLocalSearch;
    var gMap;
    var gInfoWindow;
    var gSelectedResults = [];
    var gCurrentResults = [];
    var gSearchForm;

    // Create our "tiny" marker icon
    var gYellowIcon = new google.maps.MarkerImage(
      "http://labs.google.com/ridefinder/images/mm_20_yellow.png",
      new google.maps.Size(12, 20),
      new google.maps.Point(0, 0),
      new google.maps.Point(6, 20));
    var gRedIcon = new google.maps.MarkerImage(
      "http://labs.google.com/ridefinder/images/mm_20_red.png",
      new google.maps.Size(12, 20),
      new google.maps.Point(0, 0),
      new google.maps.Point(6, 20));
    var gSmallShadow = new google.maps.MarkerImage(
      "http://labs.google.com/ridefinder/images/mm_20_shadow.png",
      new google.maps.Size(22, 20),
      new google.maps.Point(0, 0),
      new google.maps.Point(6, 20));

     // Set up the map and the local searcher.
    function OnLoad() {

      // Initialize the map with default UI.
      gMap = new google.maps.Map(document.getElementById("map"), {
        center: new google.maps.LatLng(37.4419, -122.1419),
        zoom: 13,
        mapTypeId: 'roadmap'
      });
      // Create one InfoWindow to open when a marker is clicked.
      gInfoWindow = new google.maps.InfoWindow;
      google.maps.event.addListener(gInfoWindow, 'closeclick', function() {
        unselectMarkers();
      });

      // Initialize the local searcher
      gLocalSearch = new GlocalSearch();
      gLocalSearch.setSearchCompleteCallback(null, OnLocalSearch);
    }

    function unselectMarkers() {
      for (var i = 0; i < gCurrentResults.length; i++) {
        gCurrentResults[i].unselect();
      }
    }

    function doSearch() {
      var query = document.getElementById("queryInput").value;
      gLocalSearch.setCenterPoint(gMap.getCenter());
      gLocalSearch.execute(query);
    }

    // Called when Local Search results are returned, we clear the old
    // results and load the new ones.
    function OnLocalSearch() {
      if (!gLocalSearch.results) return;
      var searchWell = document.getElementById("searchwell");

      // Clear the map and the old search well
      searchWell.innerHTML = "";
      for (var i = 0; i < gCurrentResults.length; i++) {
        gCurrentResults[i].marker().setMap(null);
      }
      // Close the infowindow
      gInfoWindow.close();

      gCurrentResults = [];
      for (var i = 0; i < gLocalSearch.results.length; i++) {
        gCurrentResults.push(new LocalResult(gLocalSearch.results[i]));
      }

      var attribution = gLocalSearch.getAttribution();
      if (attribution) {
        document.getElementById("searchwell").appendChild(attribution);
      }

      // Move the map to the first result
      var first = gLocalSearch.results[0];
      gMap.setCenter(new google.maps.LatLng(parseFloat(first.lat),
                                            parseFloat(first.lng)));

    }

    // Cancel the form submission, executing an AJAX Search API search.
    function CaptureForm(searchForm) {
      gLocalSearch.execute(searchForm.input.value);
      return false;
    }

    // A class representing a single Local Search result returned by the
    // Google AJAX Search API.
    function LocalResult(result) {
      var me = this;
      me.result_ = result;
      me.resultNode_ = me.node();
      me.marker_ = me.marker();
      google.maps.event.addDomListener(me.resultNode_, 'mouseover', function() {
        // Highlight the marker and result icon when the result is
        // mouseovered.  Do not remove any other highlighting at this time.
        me.highlight(true);
      });
      google.maps.event.addDomListener(me.resultNode_, 'mouseout', function() {
        // Remove highlighting unless this marker is selected (the info
        // window is open).
        if (!me.selected_) me.highlight(false);
      });
      google.maps.event.addDomListener(me.resultNode_, 'click', function() {
        me.select();
      });
      document.getElementById("searchwell").appendChild(me.resultNode_);
    }

    LocalResult.prototype.node = function() {
      if (this.resultNode_) return this.resultNode_;
      return this.html();
    };

function geocodePosition(pos) {
  geocoder.geocode({
    latLng: pos
  }, function(responses) {
    if (responses && responses.length > 0) {
      updateMarkerAddress(responses[0].formatted_address);
    } else {
      updateMarkerAddress('Cannot determine address at this location.');
    }
  });
}

    // Returns the GMap marker for this result, creating it with the given
    // icon if it has not already been created.
    LocalResult.prototype.marker = function() {
      var me = this;
      if (me.marker_) return me.marker_;
      var marker = me.marker_ = new google.maps.Marker({
        position: new google.maps.LatLng(parseFloat(me.result_.lat),
                                         parseFloat(me.result_.lng)),
        icon: gYellowIcon, shadow: gSmallShadow, map: gMap});
      google.maps.event.addListener(marker, "click", function() {
        me.select();
      });

  // Add dragging event listeners.
  google.maps.event.addListener(marker, 'dragstart', function() {

  });

  google.maps.event.addListener(marker, 'drag', function() {

    updateMarkerPosition(marker.getPosition());
  });

  google.maps.event.addListener(marker, 'dragend', function() {

    geocodePosition(marker.getPosition());
  });

      return marker;
    };

    // Unselect any selected markers and then highlight this result and
    // display the info window on it.
    LocalResult.prototype.select = function() {
      unselectMarkers();
      this.selected_ = true;
      this.highlight(true);
      gInfoWindow.setContent(this.html(true));
      gInfoWindow.open(gMap, this.marker());
    };

    LocalResult.prototype.isSelected = function() {
      return this.selected_;
    };

    // Remove any highlighting on this result.
    LocalResult.prototype.unselect = function() {
      this.selected_ = false;
      this.highlight(false);
    };

    // Returns the HTML we display for a result before it has been "saved"
    LocalResult.prototype.html = function() {
      var me = this;
      var container = document.createElement("div");
      container.className = "unselected";
      container.appendChild(me.result_.html.cloneNode(true));
      return container;
    }

    LocalResult.prototype.highlight = function(highlight) {
      this.marker().setOptions({icon: highlight ? gRedIcon : gYellowIcon});
      this.node().className = "unselected" + (highlight ? " red" : "");
    }

    GSearch.setOnLoadCallback(OnLoad);
    //]]>
    </script>
  </head>
  <body style="font-family: Arial, sans-serif; font-size: small;">
    <p>Perform a local search on the map below:</p>
    <div style="width: 500px;">
      <div style="margin-bottom: 5px;">
        <div>
          <input type="text" id="queryInput" value="pizza" style="width: 250px;"/>
          <input type="button" value="Find" onclick="doSearch()"/>
        </div>
      </div>
      <div style="position: absolute; left: 540px;">
        <div id="searchwell"></div>
      </div>
      <div id="map" style="height: 350px; border: 1px solid #979797;"></div>
    </div>

  </body>
</html> 
```

但是标记的拖动不起作用。如何让它发挥作用？这段代码显然取自谷歌样本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:56:58.707

默认情况下，标记不可拖动。您必须将**`draggable`**标记的 -option 设置为 true。

# android - 我正在运行的哪个 android 应用程序被强制关闭错误请帮助我我的代码是

> ID：11555695
> 
> 赞同：0
> 
> 时间：2012-07-19T07:15:18.457
> 
> 标签：android

每当我尝试运行任何 Android 应用程序时都会遇到问题。我已经下载了 Eclipse indigo 及其 ADT 插件，它也是版本：20.0.0.v201206242043-391819。

`MainActivity.java`：

```
package com.example.onlineres;

import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.ListActivity;
import android.net.ParseException;
import android.os.Bundle;
import android.util.Log;
import android.widget.Toast;

public class  MainActivity extends ListActivity {

JSONArray jArray;
String result = null;
InputStream is = null;
StringBuilder sb=null;

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);

 ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
//http post
 try{
 HttpClient httpclient = new DefaultHttpClient();
 HttpPost httppost = new HttpPost("http://10.0.2.2/city.php");
 httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
 HttpResponse response = httpclient.execute(httppost);
 HttpEntity entity = response.getEntity();
 is = entity.getContent();
 }catch(Exception e){
     Log.e("log_tag", "Error in http connection"+e.toString());
}
 //convert response to string
  try{
     BufferedReader reader = new BufferedReader(new InputStreamReader                             
 (is,"iso-8859-1"),8);
   sb = new StringBuilder();
   sb.append(reader.readLine() + "\n");

   String line="0";
   while ((line = reader.readLine()) != null) {
                  sb.append(line + "\n");
    }
    is.close();
    result=sb.toString();
    }catch(Exception e){
          Log.e("log_tag", "Error converting result "+e.toString());
    }
 //paring data
 int ct_id;
String ct_name;
 try{
  jArray = new JSONArray(result);
  JSONObject json_data=null;
  for(int i=0;i<jArray.length();i++){
         json_data = jArray.getJSONObject(i);
         ct_id=json_data.getInt("CITY_ID");
         ct_name=json_data.getString("CITY_NAME");
     }
  }
  catch(JSONException e1){
      Toast.makeText(getBaseContext(), "No City Found" ,Toast.LENGTH_LONG).show();
  } catch (ParseException e1) {
            e1.printStackTrace();
    }
}
} 
```

`manifest.xml`：（我已经添加了访问互联网的使用权限）

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.onlineres"
android:versionCode="1"
android:versionName="1.0" >
<uses-permission android:name="android.permission.INTERNET"></uses-permission>
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>
</manifest> 
```

日志猫是

```
07-19 14:08:04.933: W/ActivityThread(271): Application com.example.onlineres is             waiting     for the debugger on port 8100...
07-19 14:08:04.963: I/System.out(271): Sending WAIT chunk
07-19 14:08:05.023: I/dalvikvm(271): Debugger is active
07-19 14:08:05.173: I/System.out(271): Debugger has connected
07-19 14:08:05.173: I/System.out(271): waiting for debugger to settle...
07-19 14:08:05.373: I/System.out(271): waiting for debugger to settle...
07-19 14:08:05.573: I/System.out(271): waiting for debugger to settle...
07-19 14:08:05.776: I/System.out(271): waiting for debugger to settle...
07-19 14:08:05.981: I/System.out(271): waiting for debugger to settle...
07-19 14:08:06.183: I/System.out(271): waiting for debugger to settle...
07-19 14:08:06.383: I/System.out(271): waiting for debugger to settle...
07-19 14:08:06.586: I/System.out(271): waiting for debugger to settle...
07-19 14:08:06.793: I/System.out(271): debugger has settled (1348)
07-19 14:08:45.853: D/AndroidRuntime(271): Shutting down VM
07-19 14:08:45.853: W/dalvikvm(271): threadid=1: thread exiting with uncaught exception     (group=0x4001d800)
07-19 14:08:45.943: E/AndroidRuntime(271): FATAL EXCEPTION: main
07-19 14:08:45.943: E/AndroidRuntime(271): java.lang.RuntimeException: Unable to start     activity     ComponentInfo{com.example.onlineres/com.example.onlineres.MainActivity}:     java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list'
07-19 14:08:45.943: E/AndroidRuntime(271):  at     android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
07-19 14:08:45.943: E/AndroidRuntime(271):  at     android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
07-19 14:08:45.943: E/AndroidRuntime(271):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
07-19 14:08:45.943: E/AndroidRuntime(271):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
07-19 14:08:45.943: E/AndroidRuntime(271):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-19 14:08:45.943: E/AndroidRuntime(271):  at android.os.Looper.loop(Looper.java:123)
07-19 14:08:45.943: E/AndroidRuntime(271):  at android.app.ActivityThread.main(ActivityThread.java:4627)
07-19 14:08:45.943: E/AndroidRuntime(271):  at java.lang.reflect.Method.invokeNative(Native Method)
07-19 14:08:45.943: E/AndroidRuntime(271):  at java.lang.reflect.Method.invoke(Method.java:521)
07-19 14:08:45.943: E/AndroidRuntime(271):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
07-19 14:08:45.943: E/AndroidRuntime(271):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
07-19 14:08:45.943: E/AndroidRuntime(271):  at dalvik.system.NativeStart.main(Native Method)
07-19 14:08:45.943: E/AndroidRuntime(271): Caused by: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list'
07-19 14:08:45.943: E/AndroidRuntime(271):  at android.app.ListActivity.onContentChanged(ListActivity.java:245)
07-19 14:08:45.943: E/AndroidRuntime(271):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:201)
07-19 14:08:45.943: E/AndroidRuntime(271):  at android.app.Activity.setContentView(Activity.java:1647)
07-19 14:08:45.943: E/AndroidRuntime(271):  at com.example.onlineres.MainActivity.onCreate(MainActivity.java:38)
07-19 14:08:45.943: E/AndroidRuntime(271):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
07-19 14:08:45.943: E/AndroidRuntime(271):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
07-19 14:08:45.943: E/AndroidRuntime(271):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:25:48.477

**> 您的内容必须有一个 ID 属性为“android.R.id.list”的 ListView** - 这是您的 logcat 中的错误之一。

改变listView的id取 `android:id="@android:id/list"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T07:36:45.843

如果您的错误是调试器：尝试在 Manifest.xml 中添加此属性：

```
android:debuggable="true" 
```

否则，尝试以正常模式启动您的应用程序并发布您的错误堆栈跟踪

# search - 有没有办法在不重新启动 Solr 服务器的情况下动态更新同义词文件？

> ID：11555696
> 
> 赞同：8
> 
> 时间：2012-07-19T07:15:19.653
> 
> 标签：search, solr, solrj, synonym

我们知道 conf 目录中有一个**synonym.txt**文件，每当我发现一些新的同义​​词时，我都想更新它......

那么有什么方法可以在不重新启动**Solr 服务器**的情况下动态更新该文件，并且我的搜索结果会考虑新的同义词吗？

如果有人有任何想法，请帮助我..提前谢谢...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-19T07:35:33.920

我认为您可以构建自己的[SynonymFilterFactory](http://lucene.apache.org/solr/api-4_0_0-ALPHA/org/apache/solr/analysis/SynonymFilterFactory.html)来扩展原始内容并使用您的自定义[FSTSynonymFilterFactory](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.solr/solr-core/3.4.0/org/apache/solr/analysis/FSTSynonymFilterFactory.java)作为委托人。您的 SynonymFilterFactory 应该扩展原始的 SlowSynonymFilterFactory 并调用：

```
map = loadSolrSynonyms(loader, true, analyzer); 
```

每当您想重新加载同义词文件时。

为了在文件更改时重新加载文件，您可以使用每 X 次唤醒的看门狗线程并检查 sysnonim 文件是否已更改，或者您可以使用某些[文件监视](http://docs.oracle.com/javase/tutorial/essential/io/notification.html)程序在文件更改时获取通知。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-11-21T16:38:01.867

Solr 提供[Managed Synonym Graph Filter](https://lucene.apache.org/solr/guide/7_1/filter-descriptions.html#managed-synonym-graph-filter)以使用 REST API 管理同义词（在此示例中通过`/solr/collection_name/schema/analysis/synonyms/english`端点）：

```
<analyzer type="index">
    <tokenizer class="solr.StandardTokenizerFactory"/>
    <filter class="solr.ManagedSynonymGraphFilterFactory" managed="english"/>
    <filter class="solr.FlattenGraphFilterFactory"/> <!-- required on index analyzers after graph filters -->
</analyzer>
<analyzer type="query">
    <tokenizer class="solr.StandardTokenizerFactory"/>
    <filter class="solr.ManagedSynonymGraphFilterFactory" managed="english"/>
</analyzer> 
```

需要重新加载核心以应用同义词更改。Solr 也为此提供了一个 REST API [CoreAdmin API Reload](https://lucene.apache.org/solr/guide/7_1/coreadmin-api.html#coreadmin-reload) `admin/cores?action=RELOAD&core=core-name`

> RELOAD 操作从现有的已注册 Solr 核心的配置中加载新核心。在新核心初始化时，现有核心将继续处理请求。当新的 Solr 核心准备就绪时，它会接管并卸载旧的核心。

# java - 如何通知我的应用程序从 SDCard (Android) 中删除了一个文件？

> ID：11555697
> 
> 赞同：3
> 
> 时间：2012-07-19T07:15:28.583
> 
> 标签：java, android

我将几首歌曲保存在播放列表中（在我的应用程序数据库中）。当从播放列表中已存在的 SDCard 中删除特定歌曲时，如何在我的数据库中反映更改？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T07:19:12.857

研究使用[FileObserver](http://developer.android.com/reference/android/os/FileObserver.html)

您可以监视单个文件或目录。因此，您需要做的是确定哪些目录中有歌曲并监控每个目录。否则，您可以监视您的外部存储目录，然后每次发生任何更改时，检查它是否是您的数据库中的文件之一。

它的工作原理非常简单，这样的事情应该可以工作：

```
import android.os.FileObserver;
public class SongDeletedFileObserver extends FileObserver {
    public String absolutePath;
    public MyFileObserver(String path) {
        //not sure if you need ALL_EVENTS but it was the only one in the doc listed as a MASK
        super(path, FileObserver.ALL_EVENTS);
        absolutePath = path;
    }
    @Override
    public void onEvent(int event, String path) {
        if (path == null) {
            return;
        }
        //a new file or subdirectory was created under the monitored directory
        if ((FileObserver.DELETE & event)!=0) {
            //handle deleted file
        }

        //data was written to a file
        if ((FileObserver.MODIFY & event)!=0) {
            //handle modified file (maybe id3 info changed?)
        }

        //the monitored file or directory was deleted, monitoring effectively stops
        if ((FileObserver.DELETE_SELF & event)!=0) {
           //handle when the whole directory being monitored is deleted
        }

        //a file or directory was opened
        if ((FileObserver.MOVED_TO & event)!=0) {
           //handle moved file
        }

        //a file or subdirectory was moved from the monitored directory
        if ((FileObserver.MOVED_FROM & event)!=0) {
            //?
        }

        //the monitored file or directory was moved; monitoring continues
        if ((FileObserver.MOVE_SELF & event)!=0) {
            //?
        }

    }
} 
```

然后当然你需要让这个 FileObserver 一直运行它才能有效，所以你需要把它放在一个服务中。从你会做的服务

```
SongDeletedFileObserver fileOb = new SongDeletedFileObserver(Environment.getExternalStorageDirectory()); 
```

您必须记住一些棘手的事情：

1.  如果您一直运行它，这会更糟地消耗电池..
2.  您必须在安装 sdcard 时进行同步（并在重新启动时）。这可能很慢

# c++ - C++ 和 C 中的联合初始化

> ID：11555702
> 
> 赞同：34
> 
> 时间：2012-07-19T07:16:09.893
> 
> 标签：c++, c, initialization, unions, c++03

我在定义为的头文件中构建了一个使用常量的工作 C 库

```
typedef struct Y {
  union {
    struct bit_field bits;
    uint8_t raw[4];
  } X;
} CardInfo;

static const CardInfo Y_CONSTANT = { .raw = {0, 0, 0, 0 } }; 
```

我知道`.raw`初始化程序是仅限 C 的语法。

如何在其中定义带有联合的常量，以便我可以在 C 和 C++ 中使用它们。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-11-22T10:11:51.210

我有同样的问题。对于 C89，以下情况属实：

> 使用 C89 风格的初始化器，必须按照声明的顺序初始化结构成员，并且只能初始化联合的第一个成员

我在以下位置找到了这个解释： [结构和联合的初始化](https://www-01.ibm.com/support/knowledgecenter/SSLTBW_2.1.0/com.ibm.zos.v2r1.cbclx01/strin.htm)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-19T07:31:17.640

我相信 C++11 允许您像这样编写自己的构造函数：

```
union Foo
{
    X x;
    uint8_t raw[sizeof(X)];

    Foo() : raw{} { }
}; 
```

这默认初始化类型`Foo`为活动成员的联合`raw`，其中所有元素均为零初始化。（在 C++11 之前，无法初始化不是完整对象的数组。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T01:48:17.147

我决定选择以下路径。

*   不要使用`.member`初始化。
*   不要使用`static const struct Foobar`成员的初始化

而是声明全局变量：

```
extern "C" {
  extern const struct Foobar foobar;
} 
```

并在全局部分中对其进行初始化：

```
struct Foobar foobar = { 0, 0, 0, 0 }; 
```

而不是使用现代 ANSI C99 语法来干扰 C++ 编译器，我让链接器完成对 C 符号进行解构的工作。

# c# - 使用 PetaPoco 检索数据集

> ID：11555703
> 
> 赞同：1
> 
> 时间：2012-07-19T07:16:13.667
> 
> 标签：c#, petapoco

我的公司现在已经开始使用 PetaPoco 作为 ORM 工具来映射到数据库。我有一个存储过程，它返回一个带有表的数据集。使用文本模板，我为我的存储过程创建了一个 Poco。现在，当我取回数据时，我想根据每行中的值执行一些操作。如何

```
Database dbs = MainDatabase.Instance;         
            var summary = dbs.Fetch<ClassParticipantSummary>(Sql.Builder.Append(";EXEC enrol.ClassParticipantSummaryGet @SiteId = @0 , @ClassId = @1" ,SiteId ,ClassId));

       summary.Find(predicate<ClassParticipantSummary> (("WHERE name= @name", new { name = "petapoco" })); 
```

我明白我的上述陈述可能是绝对错误的。我只是想让它工作。

有人可以告诉我如何在 petapoco 对象中进行搜索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T15:39:04.163

您不能像`Where`在 SQL 中那样将 a 添加到 SP exec 中。PetaPoco 只执行 SQL 并映射结果。

如果要在 SP 结果中搜索，可以使用 plain `Linq`，因为 PetaPoco 返回一个`List`.

```
var FilteredList = (from rec in summary 
                    where rec.name == "petapoco" select rec).ToList(); 
```

# macos - WM_MOVE 的等价物

> ID：11555708
> 
> 赞同：1
> 
> 时间：2012-07-19T07:16:23.103
> 
> 标签：macos, winapi

Mac OS 中窗口的 WM_MOVE 等价物是什么？当使用左键单击移动窗口时，我必须捕获鼠标事件。在 Windows 中，我们可以使用 WM_MOVE 捕获此事件，但我在 Mac OS 中找不到类似的事件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:05:29.140

在 Cocoa 中，查看`NSWindow`和`NSNotificationCenter`类（或者将委托实例分配给`NSWindow`，它仅通过实现适当的方法来隐式接收通知）。

例如，您可以使用`windowWillMove:`或`windowDidMove:`通知来通知用户何时移动了*窗口*。这不是连续发送的；它在用户开始移动窗口时发送，或者在移动窗口时暂停。如果您需要对鼠标事件进行细粒度控制，您可以子类化窗口并实现其超类中的方法`NSResponder`。

# r - 在函数内使用 if else 时出错

> ID：11555709
> 
> 赞同：0
> 
> 时间：2012-07-19T07:16:26.417
> 
> 标签：r

我在函数内部使用 if else 时遇到问题，我的代码是这样的：

```
ConvertWgtZooLS <- function(WgtZoo, LSWay, Pos){
    If(LSWay == 0){
      NewWgtZoo <- WgtZoo
    }else{
      BackPos <- BackMatrix(Pos,1)
      NewWgtZoo<- Ifelse((Sign(WgtZoo) * Sign(BackPos) * LSWay)>=0, WgtZoo, 0)
    }
    return(NewWgtZoo)
} 
```

但是，当我在 R 中运行它时，错误消息显示为：

```
"Error: unexpected '{' in:
"ConvertWgtZooLS <- function(WgtZoo, LSWay, Pos){
    If(LSWay == 0){" 
```

我该如何解决这个问题？那里的语法问题是什么？我检查了许多网站，如果其他语法正确，则似乎如上。

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T07:38:52.620

您的代码中的错误是您使用`If`了而不是`if`，并且 R 区分大小写。因此，可能有另一个名为`If`的函数与 做不同的事情`if`，并且正如@danielkullmann 指出的那样，该函数正是 R 正在寻找的。

R 生成的错误消息并不总是最有帮助的，但在这种情况下，它*确实*指出您非常接近问题区域。它向您展示了它在哪里“混淆”，但您需要自己找出原因！

在你解决了第一个问题之后，你会在第 6 行找到另一个问题（出于相同的原因），在那里你写`Ifelse`的是`ifelse`.

最后一点：R 对空格非常友好，因此最好在代码中留出一些空间以帮助提高易读性，尤其是使用`if`and`else`语句。原因如下：

1.  我发现`if (LSWay == 0) {`比阅读更容易`if(LSWay == 0){`
2.  使用实际函数时，例如`sum(x)`，您通常*不会*添加空格，从而更容易在大代码块中发现这些条件语句。

在这方面，[Google R Style Guide](http://google-styleguide.googlecode.com/svn/trunk/google-r-style.html)是一本有趣的读物。

# javascript - Yii - 将 onclick 事件与 CLinkPager 与每个寻呼机链接绑定

> ID：11555711
> 
> 赞同：0
> 
> 时间：2012-07-19T07:16:30.077
> 
> 标签：javascript, jquery, yii

我想用 Yii CLinkPager 中的每个寻呼机链接调用一个函数，我使用下面的代码没有任何运气。

```
'pagerCssClass' => 'pagination',     
'afterAjaxUpdate'=>"FB.Canvas.scrollTo(0,0)",
'beforeAjaxUpdate'=>"FB.Canvas.scrollTo(0,0)", 
```

我也用过js方法

```
$(document).ready(function(){
    $('#ajaxListView a').each(function(){
            $(this).click(function(ev){

                FB.Canvas.scrollTo(0,0);

                });
        });
}); 
```

但上面的代码只工作一次，当我点击下一页或后页号码时不起作用。我使用 alert("") 而不是 FB.Canvas.scrollTo(0,0); 并得到同样的错误。

请帮助我了解如何在每次单击分页链接时绑定 js 函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T07:20:52.283

试试`on`。

```
$(document).on('click','.yiiPager a', function(){
    console.log('clicking');
    FB.Canvas.scrollTo(0,0);        
}); 
```

`yiiPager`成为寻呼机的列表的 css 类在哪里。另请注意，它`CLinkPager`没有`pagerCssClass`属性。

# android - 没有opencv的Android中的人脸识别

> ID：11555712
> 
> 赞同：1
> 
> 时间：2012-07-19T07:16:32.633
> 
> 标签：android, face-recognition

我想在android中开发一个人脸识别应用程序。在搜索时，我想出的只是 Opencv 方法，我认为它使用的是 C 或 C++。有人可以发布android的代码或方法吗？我是新手，所以尝试新的东西。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T07:29:26.357

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T16:25:09.963

如果您有更新的手机/平板电脑，您可以使用 Android 14+ 中的人脸识别 API。查看[Camera.Face](http://developer.android.com/reference/android/hardware/Camera.Face.html)和[Camera.FaceDetectionListener](http://developer.android.com/reference/android/hardware/Camera.FaceDetectionListener.html)

还要确保您调用：[getMaxNumDetectedFaces](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#getMaxNumDetectedFaces%28%29)以确保您的设备支持 API。

# jquery - ajax响应后查找html代码

> ID：11555713
> 
> 赞同：0
> 
> 时间：2012-07-19T07:16:36.480
> 
> 标签：jquery, html, ajax

**Java 脚本代码**

```
$("#category select").change(function(){
    var category = $('select option:selected').html();

    $.ajax({
        type:"Post",
        url:"collectiepost.php",
        data:"category="+category,
        cache:"false",
        success:function(html){

    $("select").html(html).find("option .category");

        }

        });
    });
}); 
```

**该页面上的 html 输出 collectiepost.php**

```
<select id="ontwerper">
  <option class="desinger">vikas</option>
</select>
<select id="category">
 <option class="category">cloth1</option>
 <option class="category">cloth2</option>
</select> 
```

我只想提取 html 的那部分

**需要输出**

```
 <select>
  <option class="category">cloth1</option>
  <option class="category">cloth2</option>
  </select> 
```

**问题**

但是我的代码显示了所有这样的选项标签

```
 <select>
  <option class="desinger">vikas</option>
  <option class="category">cloth1</option>
  <option class="category">cloth2</option>
  </select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T07:23:17.850

这一行：

```
$("select").html(html).find("option .category"); 
```

将`select`元素的内容设置为`html`，然后调用`find`但对结果不执行任何操作。在将 AJAX 调用返回的 HTML 片段添加到 DOM 之前，您需要减少它：

```
$("select").html($(html).find("option.category")); 
```

这是一个[工作示例](http://jsfiddle.net/3gmHb/)。注意和之间*没有空格*。您当前的选择器将匹配作为元素*后代*的元素。`option``.category``.category`*`option`*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T07:22:58.533

```
$("select").html(html).find("option:not(.category)").remove(); 
```

代替

```
$("select").html(html).find("option .category"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T07:23:40.827

您可以查询数据，所以只需

```
$("select").html($("option.category", html)); 
```

找到选择框，从 ajax html 中插入“option.category”的匹配项。*

# javascript - 如何使用 Jquery“ON”预处理 HTML 内容？

> ID：11555715
> 
> 赞同：0
> 
> 时间：2012-07-19T07:16:38.237
> 
> 标签：javascript, jquery, html

我有非常简单的 jQuery Accordion，它工作正常，现在的问题是，如果我从 DB 或从 JSON 动态加载手风琴内容到页面，它不起作用，因为没有信息可以让 DOM 了解类或 ID新注入的。所以我试图使用 Jquery ON 代替 live 或委托来捕获注入的元素。我的示例代码是..

```
jQuery("#header").on("click", function () {
 .... my accordion code here
}); 
```

但是jquery“on”会在任何事件上触发，比如点击什么的，所以如何处理手风琴html内容以保持在初始级别打开并进一步点击。

这怎么可能？我无法解决任何问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T07:33:32.133

检查这个：http: [//jsfiddle.net/RMBpt/](http://jsfiddle.net/RMBpt/)

我添加了什么：

```
var isActive = $(this).is('.on');
if(!isActive) { .. if active, it shouldn't collapse? }

//First element should be active, needs to be after the hide()
$('.accordionButton:first').addClass('on').next().slideDown('normal'); 
```

* * *

尝试像这样使用它：

```
$("#wrapper").on("click", ".accordionButton", function(event){
    //Your accordian code here
}); 
```

# c# - AutoMapper Map 如果不为空，否则自定义转换

> ID：11555721
> 
> 赞同：32
> 
> 时间：2012-07-19T07:17:12.387
> 
> 标签：c#, automapper

这是我的代码：

```
Mapper.CreateMap<Foo, Foo2>()
   .ForMember(dest => dest.Bar, opt => opt.MapFrom(src => src.Bar == null ? new BarViewModel() : src.Bar)) 
```

基本上，“BarViewModel”有一个无参数的 ctor，它在类中设置属性。

所以我想对 AutoMapper 说：

> 如果值为 null，则使用该类的 ctor。否则使用您现有的映射

以上是给我一个 C# 编译器错误。而且我猜演员也行不通。

那么有没有一个 AutoMapper 技巧来做到这一点？

最坏的情况是我可以删除该属性的映射，然后执行以下操作：

```
var mapped = Mapper.Map<Foo,Foo2>(src);
if (mapped.Bar == null) mapped.Bar = new BarViewModel(); 
```

但这有点难看。

想法？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-07-19T07:31:14.500

您可以使用[自定义值解析器](https://github.com/AutoMapper/AutoMapper/wiki/Custom-value-resolvers)。以下应该有效：

```
Mapper.CreateMap<Foo, Foo2>()
   .ForMember(dest => dest.Bar, opt => opt.ResolveUsing(src => src.Bar == null ? new Bar() : Mapper.Map<Bar,Bar2>(src.Bar))) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-09-20T19:42:06.097

现在您可以使用`.NullSubstitute()`在 Automapper 中将 NULL 值替换为一些自定义值，例如：

```
CreateMap<SMModel, VM_SMModel>()
                    .ForMember(d => d.myDate, o => o.NullSubstitute(new DateTime(2017,12,12))); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-12-13T19:06:12.523

从 Automapper 8 开始，`ResolveUsing` [不再是一个选项](http://docs.automapper.org/en/latest/8.0-Upgrade-Guide.html#resolveusing)，而是 inline`Func`的，`IValueResolver`并且`IMemberValueResolver`是 .

**内联函数示例**

```
Mapper.Initialize(cfg =>
{
  cfg.CreateMap<Foo, FooViewModel>()
     .ForMember(dest => dest.BarViewModel,
       opt  => opt.MapFrom((src, dest) =>
       {
         if (src.Bar == null)
           return new BarViewModel ();

           return Mapper.Map<Bar, BarViewModel>(src.Bar);
        }));

  cfg.CreateMap<Bar, BarViewModel>();
}); 
```

**IMemberValueResolver 示例**

```
Mapper.Initialize(cfg =>
{
    cfg.CreateMap<Foo, FooViewModel>()
       .ForMember(dest => dest.BarViewModel,
                  opt  => opt.MapFrom<NullBarResolver, Bar>(src => src.Bar));

    cfg.CreateMap<Bar, BarViewModel>();
});

public class NullBarResolver : IMemberValueResolver<object, object, Bar, BarViewModel>
{
    public BarViewModel Resolve(object source, object destination, Bar sourceMember,
                                BarViewModel destMember, ResolutionContext context)
    {
        if (sourceMember == null)
            return new BarViewModel();

        return Mapper.Map(sourceMember, destMember);
    }
} 
```

* * *

[这里有一些关于自定义值解析器](http://docs.automapper.org/en/stable/Custom-value-resolvers.html)的好文档。

[工作演示](https://github.com/spottedmahn/Experiments/tree/master/Automapper%20Expirements/Customer%20Value%20Resolvers%20Attempt%202)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-19T08:31:29.637

我没有收到以下编译器错误：

```
public class Foo
{
    public Bar Bar { get; set; }
}

public class Foo2
{
    public Bar Bar { get; set; }
}

public class Bar
{
    public int Id { get; set; }

    public Bar()
    {
        Id = 3;
    }
}

CreateMap<Foo, Foo2>()
    .ForMember(
        dest => dest.Bar,
        opt => opt.MapFrom(src => src.Bar == null ? new Bar() : src.Bar)); 
```

...所以我想知道问题是否实际上与您的映射无关？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-24T14:24:53.107

这可以通过`PreCondition()`方法来完成。这是我编写的一个扩展方法，可以更轻松地做到这一点：

```
 public static IMappingExpression<TSource, TDestination> MapIf<TSource, TDestination>(
        this IMappingExpression<TSource, TDestination> map, Expression<Func<TDestination, object>> selector,
        Func<TSource, bool> mapIfCondition, Expression<Func<TSource, object>> mapping)
    {
        map.ForMember(selector, c =>
        {
            c.MapFrom(mapping);
            c.PreCondition(mapIfCondition);
        });
        return map;
    } 
```

使用示例：

```
//if settings are null coming from the sender, then ignore them and keep the current settings
CreateMap<PresentationView, Presentation>()
   .MapIf(x => x.Settings, x => x.Settings is not null, v => v.Settings!) 
```

# excel - 如何 VLOOKUP 在 VBA 中获取 #N/A 值？

> ID：11555728
> 
> 赞同：2
> 
> 时间：2012-07-19T07:17:58.137
> 
> 标签：excel, error-handling, vlookup, vba

我在 Excel 中有一个数据表，与以下内容相同：

```
 A       B
-------------
1\. aaa     11
2\. bbb     22
3\. ccc     #N/A
4\. ddd     44 
```

我编写了一个 VBA 函数来通过键（在 col A 中）获取值（col B） 例如：`=getValue(A1)`

在这个例子中，如果我输入`=getValue(A3)`，函数是 throw #VALUE! 错误。我正在调试并在 VLOOKUP 函数中看到错误。这是我的代码：

```
Public Function getValue(ByVal key As Variant)

    'get value of the cell at column B which has value 'key' at column A on same row
    column2GetValue = 2
    useClosestMatch = False

    'error here if colum2GetValue contain #N/A
    found = Application.WorksheetFunction.VLookup( _
        key, _
        Worksheets(SHEET_CACHE_NAME).Range("A:B"), _
        column2GetValue, _
        useClosestMatch _
    )

    getValue = found
End Function 
```

**如何 VLOOKUP 在 VBA 中获取 #N/A 值？** 感谢您的帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-19T08:09:55.453

您可以按如下方式处理错误。

虽然我建议你考虑使用更通用`Find`的代替`Application.VLOOKUP`

```
Sub TestMe()
Dim vTest As Variant
vTest = Application.VLookup("TesT", Range("A1:B10"), 2, False)
If IsError(vTest) Then
MsgBox "Not found", vbCritical
Else
MsgBox "value is " & vTest
End If
End Sub 
```

# c# - 将返回值转换为泛型类型

> ID：11555729
> 
> 赞同：12
> 
> 时间：2012-07-19T07:18:08.167
> 
> 标签：c#, generics

假设我们有一个带有单个泛型方法的接口：

```
public interface IExtender
{
    T GetValue<T>(string tag);
} 
```

以及它的一个简单实现 A，它根据“tag”参数返回两种不同类型（B 和 C）的实例：

```
public class A : IExtender
{
    public T GetValue<T>(string tag)
    {
        if (typeof(T) == typeof(B) && tag == null)
            return (T)(object) new B();
        if (typeof(T) == typeof(C) && tag == "foo")
            return (T)(object) new C();
        return default(T);
    }
} 
```

是否有可能避免双重演员`(T)(object)`？或者，有没有办法告诉编译器“嘿，我确信这个转换在运行时不会失败，让我在不先转换为对象的情况下完成它！”

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-19T07:21:50.770

> 或者，有没有办法告诉编译器“嘿，我确信这个转换在运行时不会失败，让我在不先转换为对象的情况下完成它！”

不，该语言是故意设计来防止这种情况的。Eric Lippert[最近在博客中谈到了这一点](https://ericlippert.com/2012/07/10/696/)。我同意这很烦人，但它确实有某种意义。

老实说，像这样的“通用”方法*通常*有点设计味道。如果一个方法必须有各种不同类型的特殊情况，您至少应该考虑使用单独的方法。( `GetB`, `GetC`)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-19T07:28:29.650

```
public T MyMethod<T>(string tag) where T : class
    {
        return new A() as T;
    } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-19T07:26:47.483

检查这个样本：

```
 public T GetValue<T>(string tag) where T : class, new()
    {
        if (typeof(T) == typeof(B) && tag == null)
            return new T();
        if (typeof(T) == typeof(C) && tag == "foo")
            return new T();
        return default(T);
    } 
```

不需要强制转换，您可以创建“T”的实例，只需添加说 T 是一个类并且它具有无参数构造函数的通用约束，因此您不需要创建另一个基类型，并且您可以确保只有合适的类型将通过这个通用方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-10-17T20:51:47.443

您可以使用动态来存储您的真实结果，但您必须确保泛型参数类型是您返回的正确类型。

```
TResult GetResult<TResult>() 
{
    dynamic r = 10;
    return r;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T07:22:49.733

不，那是不可能的。这样做的唯一方法是让编译器知道关于`T`. 正如[泛型参数约束列表](http://msdn.microsoft.com/en-us/library/d5x73970.aspx)所证明的那样，在 C# 中没有定义任何约束来要求特定转换的可用性。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-19T07:24:15.273

[如果你让 B 和 C 实现相同的接口](http://msdn.microsoft.com/en-us/library/d5x73970%28v=vs.80%29.aspx)，你可以在你的`T`. 可能不完全是您想要的，但正如其他人所建议的那样，您想要的实际上是不可能的。

```
public interface IclassBndC {}

public class B : IclassBandC {}

public class C : IclassBandC {}

public class A : IExtender
{
    public T GetValue<T>(string tag) where T : IclassBandC 
    {
        if (tag == null)
            return new B();
        if (tag == "foo")
            return new C();
        return default(T);
    }
} 
```

# linux - 如何防止linux杀死我的进程并生成核心文件

> ID：11555730
> 
> 赞同：1
> 
> 时间：2012-07-19T07:18:10.577
> 
> 标签：linux, core-file

我正在测试一个应用程序，当应用程序消耗大部分可用内存时，内核会杀死我的进程。但我希望进程死掉并生成核心文件，供调查建议。我正在使用红帽 5.4

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T07:32:19.107

根据您的“大部分可用内存”描述，我假设您的系统内存不足并且内核内存不足处理程序会杀死您的进程。它被 SIGTERM 杀死，所以在正常情况下你不会得到核心转储。

您可以通过在程序中处理 SIGTERM 并在信号处理程序中向进程发送 SIGSEGV 来获得核心转储，从而触发核心转储。OTOH，在内存不足的情况下，这可能会导致许多其他进程也被 OOM 处理程序杀死。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T07:42:42.903

许多信号的默认操作是核心转储。如果程序没有覆盖 Linux 默认信号处理程序，如果`ulimit`设置了正确的，您可以使用 SIGQUIT 导致核心转储。

可以使用 SIGQUIT 发送，`kill -SIGQUIT (process_id)`或者，如果程序与键盘相关联，则可以通过键入 Ctrl-\

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T07:55:02.230

你应该找到当 OOM 发生时你的程序会收到哪个信号。然后使用信号函数设置处理程序

# batch-file - 用于在 windows xp 或 windows 7 中重命名用户帐户的批处理脚本

> ID：11555731
> 
> 赞同：1
> 
> 时间：2012-07-19T07:18:12.167
> 
> 标签：batch-file, rename

有没有办法使用批处理脚本更改用户名/帐户名？比如把用户名“testing”改成“TESTING123”、“Testing”还是“testing123”？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T10:27:33.680

有一种方法可以通过 wmic 做到这一点：

```
wmic useraccount where name="old_name" call rename "new_name" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T08:11:24.423

据我所知，您不能批量执行此操作。您可以创建新帐户并删除旧帐户，但不能重命名它们:)

对于在 cmd 提示符下批量输入的所有用户帐户内容`net user /?`，甚至只是`net /?`.

希望这可以帮助。

# jakarta-ee - struts taglib 中的异常

> ID：11555733
> 
> 赞同：1
> 
> 时间：2012-07-19T07:18:25.303
> 
> 标签：jakarta-ee, struts

我正在尝试运行登录页面但得到`org.apache.jasper.JasperException: Failed to load or instantiate TagExtraInfo class: org.apache.struts.taglib.logic.IterateTei`

登录.jsp

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<%@ taglib uri="/WEB-INF/struts-logic.tld" prefix="logic" %>
<%@ taglib uri="/WEB-INF/struts-html.tld" prefix="html" %>
<%@ taglib uri="/WEB-INF/struts-bean.tld" prefix="bean" %>

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Fetch CAMS Data and Upload it to CM</title>
</head>
<body>
<html:form action="/Login_Act">
<html:errors/>
<table width="500" align="center">
<caption>Login<br/><br/><br/><br/><br/><br/></caption>
<tr>
<td>
User Name :
</td>

<td>
<html:text property="userName" value=""/>
</td>

</tr>
<tr>
<td>
Password :
</td>

<td>
<html:password property="pwd" value=""/>
</td>

</tr>

<tr>
<td colspan="2" align="center">
<html:submit value="Login"/>

</td>

</tr>
</table>
</html:form>
</body>
</html> 
```

我已经添加`struts.jar`并`struts1.4.8.jar`在构建路径中，仍然出现错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T12:31:30.393

*   确保 struts.jar 在您的 webapp 的类路径中（如果它还没有，请将其添加到 WEB-INF/lib）
*   确保 jsp-api.2.0.jar 不在 WEB-INF/lib 中

# salesforce - 将 PingFederate 与 Salesforce 集成

> ID：11555735
> 
> 赞同：2
> 
> 时间：2012-07-19T07:18:37.020
> 
> 标签：salesforce, single-sign-on, saml-2.0, pingfederate

我需要使用 SP 发起的 SSO 将 PingFederate 与 Salesforce 集成。

我的目标是让 Active Directory 中的用户在访问 Salesforce 应用程序 URL 时自动登录。我已经在 PingFederate 中创建了与 Salesforce 的 SP 连接，并在 Salesforce 中上传了 PingFederate 证书。在 Salesforce 中，我已将 IdP 颁发者实体 ID 设置为与 PingFederate 中的匹配。

对于 SP 发起的 SSO，我需要为浏览器提供哪个 URL 以测试此设置是否正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T23:06:05.240

我相信 SFDC 要求您在尝试访问受 SFDC 保护的页面时自动触发 SP-Init 之前，通过未经请求的 SSO (IDP-Init) 确定您的 IDP 是谁。IDP-Init SSO 成功完成后，SFDC 会将您最后一个已知的 IDP 设置为浏览器中的持久性 cookie。

IDP-Init 在 PF 中非常简单。只需确保在您的 SP 连接中启用了 IDP-Init 和 SP-Init SSO。之后，当您查看 SP 连接摘要页面时，您应该会看到一个类似于“https://pingfederateserver.com/idp/startSSO.ping?PartnerSpId=”的“连接 URL”

试一试 - 如果它不起作用，Ping 支持团队可以快速提供帮助。

HTH-伊恩

# c++ - 如何检测 DLL 未被任何应用程序使用

> ID：11555737
> 
> 赞同：1
> 
> 时间：2012-07-19T07:18:42.933
> 
> 标签：c++, dll

我有一个 DLL，它调用在下面运行的应用程序。此 DLL 由几个其他应用程序/进程同时加载。所以，基本上架构是：

![在此处输入图像描述](../Images/75c12a13d537be43e9df563536408563.png)

我的问题是如果使用 DLL 的应用程序崩溃，我想在我的基本应用程序中执行退出序列并退出它。如何检测到此 DLL 不再被任何应用程序使用？有没有我可以跟踪的 DLL 的加载计数之类的东西？另一个小故障是我可能必须通过 C# 应用程序来监控它，但这是另一回事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T07:23:32.470

如果您可以外壳外部程序进行检查，您可以使用这个： [http ://technet.microsoft.com/en-us/sysinternals/bb896656](http://technet.microsoft.com/en-us/sysinternals/bb896656)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T09:26:56.120

对于 Windows 中实际发生的情况，您的图像不是一个很好的模型。每个进程都有自己的 DLL 副本。DLL 中的代码在 RAM 中共享，但在其数据中不共享。也有共享数据的方法，但这并不常见，内存映射文件是更典型的方法。

Windows 没有提供廉价的方法来确定是否将 DLL 加载到进程中。也没有通知机制。无论您做什么，都必须首先从流程开始。这也适用于 C#，您可以使用[Process.Modules 属性](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.modules.aspx)。

只需跟踪您知道加载 DLL 的进程就足够了，当进程不再运行时，您可以放心地假设它也不再加载 DLL。使用 Process.Exited 事件或使用 WMI，如[本答案](https://stackoverflow.com/a/1986856/17034)所示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T05:57:40.417

您可以将 DLL 托管在基本应用程序中，并使用共享部分实现您自己的引用计数，这很容易且经常使用。如前所述，一种可能性是在[DLL 入口点](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682583%28v=vs.85%29.aspx)内实现引用计数，并根据您的规范检测 DLL_PROCESS_DETACH、DLL_THREAD_DETACH、DLL_PROCESS_DETACH 等。

# jquery - 使用 Ajax 加载图像在 MVC 3 中渲染部分视图

> ID：11555738
> 
> 赞同：7
> 
> 时间：2012-07-19T07:18:48.037
> 
> 标签：jquery, asp.net-mvc-3

我刚刚开始使用 Html.RenderPartial(usercontrol, model) 来呈现我的用户控件。是否可以更改此功能以在部分视图加载时显示 Ajax 加载图像？

编辑：对此进行了尝试，但无法使其正常工作。我有这样的部分视图（_FixtureList.cshmtl）：

```
@model List<Areas.Gameplan.Models.Fixture>

@foreach (var item in this.Model)
{ 

<tr> 
    <td class="teamgrid">@Html.Encode(item.Week)</td>
    <td><img src='@Html.Encode(item.Logo)' alt="Logo" /></td>
    <td class="teamgrid">@Html.Encode(item.Opponent)</td>
    <td class="teamgrid">@Html.Encode(item.Result)</td>
</tr> 
```

这就是我目前呈现页面的方式：

```
public ActionResult Cincinnati()
    {
        //renderpartial
        List<Fixture> lstFixtures = _Base.DataRepository.GetFixtureList("2017", "Cincinnati");

        return View(lstFixtures);
    } 
```

}

这是我观点的相关部分（Cincinnati.cshtml）：

```
@model List<Areas.Gameplan.Models.Fixture>

@{
    ViewBag.Title = "Cincinnati Bengals";
    Layout = "~/Areas/Gameplan/Views/Shared/_Layout.cshtml";
}

<div id="bigborder">

    <p>
        <br />

    <div class="sidebarleftteam">

        <div id="divFixtures">

           <table id='tblFixtures' align='center'><tr><th><img src='../../../../Content/Images/Gameplan/fixtureweek.jpg' /></th><th><img src='../../../../Content/Images/Gameplan/fixtureopponent.jpg' /></th><th/><th><img src='../../../../Content/Images/Gameplan/fixturescore.jpg' /></th></tr> 

                @{ Html.RenderPartial("_FixtureList", this.Model); }

           </table> 
```

我将如何将您的示例应用于此代码？

编辑 ：

想通了，这就是我的做法：

```
public ActionResult MyPartial()
    {
        List<Fixture> lstFixtures = _Base.DataRepository.GetFixtureList("2016", "Cincinnati");
        return PartialView("_FixtureList", lstFixtures);
    } 
```

在视图中：

```
 $.ajax(
 {
     type: 'POST',
     async: true,
     contentType: 'application/json; charset=utf-8',
     dataType: 'html',
     url: 'MyPartial',
     beforeSend: function (xhr) {
         $('#mydiv').addClass('ajaxRefreshing');
         xhr.setRequestHeader('X-Client', 'jQuery');
     },
     success: function (result) {
         $('#mydiv').html("<table id='tblFixtures' align='center'><tr><th><img src='../../../../Content/Images/Gameplan/fixtureweek.jpg' /></th><th><img src='../../../../Content/Images/Gameplan/fixtureopponent.jpg' /></th><th/><th><img src='../../../../Content/Images/Gameplan/fixturescore.jpg' /></th></tr>" + result + "</table>");
     },

     error: function (error) {
         alert(error);
     },
     complete: function () {
         $('#mydiv').removeClass('ajaxRefreshing');
     }
 }); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-19T07:20:41.683

> 是否可以更改此功能以在部分视图加载时显示 Ajax 加载图像？

不，`Html.RenderPartial`不使用任何 AJAX，内容直接包含在服务器上。

如果您想使用 AJAX 而不是`Html.RenderPartial`在视图中放置 div：

```
<div id="mydiv" data-url="@Url.Action("MyPartial", "Home")"></div> 
```

然后编写一个控制器操作，它将返回您的部分：

```
public class HomeController: Controller
{
    // that's the action that serves the main view
    public ActionResult Index()
    {
        return View();
    }

    // that's the action that will be invoked using AJAX and which 
    // will return the partial view
    public ActionResult MyPartial()
    {
        var model = ...
        return PartialView(model);
    }
} 
```

那么你将有相应的部分（`~/Views/Home/Myartial.cshtml`）：

```
@model MyViewModel
... 
```

最后一步是编写将触发 AJAX 调用的 javascript：

```
$(function() {
    var myDiv = $('#mydiv');
    $.ajax({
       url: myDiv.data('url'),    
       type: 'GET',
       cache: false, 
       context: myDiv,
       success: function(result) {
           this.html(result);
       }
    });
}); 
```

最后一块是显示加载动画。这可以通过多种方式完成。一种方法是使用[全局 ajax 事件处理程序](http://api.jquery.com/category/ajax/global-ajax-event-handlers/)：

```
$(document).ajaxSend(function() {
    // TODO: show your animation
}).ajaxComplete(function() {
    // TODO: hide your animation
}); 
```

另一种可能性是最初在您的 div 中简单地放置一些文本或图像：

```
<div id="mydiv" data-url="@Url.Action("MyPartial", "Home")">
    Loading ...
</div> 
```

并且由于此 div 的内容将在 ajax 调用的成功回调中替换为部分的内容，因此加载文本将消失。请注意这一点，因为如果出现错误，成功回调将不会触发，并且 div 将保留其初始文本。因此，在这种情况下，最好使用完整的处理程序来隐藏动画。

# ios4 - 如何在 Objective-C (iOS) 中在运行时动态创建数组？

> ID：11555739
> 
> 赞同：0
> 
> 时间：2012-07-19T07:18:55.960
> 
> 标签：ios4, opengl-es-2.0

我最近开始使用 OpenGL 在我的 iOS 应用程序中做一些事情。

我发现这个教程很有帮助：

**[www.raywenderlich.com/3664/opengl-es-2-0-for-iphone-tutorial](http://www.raywenderlich.com/3664/opengl-es-2-0-for-iphone-tutorial)**。

```
typedef struct
{
    float Position[3];
    float Color[4];
} Vertex;

const Vertex Vertices[] = { ... };
const GLubyte Indices[] = { ... };

glBufferData(GL_ARRAY_BUFFER, sizeof(Vertices), Vertices, GL_STATIC_DRAW);
glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(Indices), Indices, GL_STATIC_DRAW); 
```

我需要一组变量/结构，因为内容取决于运行时发生的事情，而不是静态的。

如果直到运行时才知道数组中元素的数量，如何定义和创建动态数组？

我需要使用 malloc 或类似的东西吗？我之前没有遇到任何为 iPhone 应用程序分配内存的例子，所以我有点警惕。任何建议或方向将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T18:40:28.020

使用 malloc：

```
 Vertex* verts;
    void Load()
    {
        int SIZE=200;
        verts=(Vertex*)malloc(sizeof(Vertex)*SIZE);//in c you dont need (Vertex*)
    } 
```

# git - 覆盖 'git pull' 以使用 echo 语句退出

> ID：11555740
> 
> 赞同：1
> 
> 时间：2012-07-19T07:18:58.713
> 
> 标签：git, git-config

我想在我的 .gitconfig 文件中进行更改，这样当我运行“git pull”时，它会以 echo 语句“请使用 git xpull 而不是 git pull”退出，这里 xpull 是我的别名？

或者是否可以在我的本地机器中的任何地方（而不是 .gitconfig 文件）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T07:43:49.470

### Git-Alias 不可能

不幸的是，我不相信 git 本身可以做你想做的事。git-config(1) 手册页说：

> 为了避免脚本使用的混乱和麻烦，隐藏现有 git 命令的别名将被忽略。

换句话说，您可以自由地为*xpull*创建一个 git 别名，但您实际上不能覆盖或包装*pull*本身。但是，您可以创建一个 shell 函数来包装对 git 的调用。

### 用 Shell 函数包装 Git

您可以将 git 包装在一个 shell 函数中，该函数将拦截对 git 的所有调用，检查关键字“pull”是否存在，并改写命令行以使用“xpull”。这个包装函数不是特别健壮，但它在临时测试中确实对我有用。

```
git () {
    if [[ "$*" =~ $(echo '\bpull\b') ]]; then
        git xpull
    else
        command git xpull "${@/pull/}"
    fi
 } 
```

如果您愿意，可以用回显和非零返回状态替换对*xpull的调用，但透明地包装行为似乎更明智。*你的旅费可能会改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T07:30:09.783

将脚本放在 中`$SOMEDIR/git-pull`，`$SOMEDIR`在你的 中`$PATH`，然后：

```
chmod -x /usr/lib/git-core/git-pull 
```

或`git-pull`可执行文件位于系统上的任何位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-30T21:44:16.920

使用短别名怎么样？它也会为您节省其他命令的时间

```
[alias]
    st = status
    pl = pull --no-edit 
```

# iphone - 检查数组中的重复条目 - Xcode/Objective C

> ID：11555744
> 
> 赞同：0
> 
> 时间：2012-07-19T07:19:16.913
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我有以下数组数组::

```
<array>
    <dict>
        <key>aa</key>
        <string>2012-07-19 11:16:00</string>
    </dict>
    <dict>
        <key>bb</key>
        <string>2012-07-19 11:16:02</string>
    </dict>
    <dict>
        <key>cc</key>
        <string>2012-07-19 11:16:05</string>
    </dict>
</array> 
```

这个数组的名字是`abcd`，它是`NSMutable`。

我想在`dict`这个数组中添加一个新元素，比如`key`value of`aa`和其他一些`string`值。我想检查这个新`key`值是否已经作为`key`某个`dict`元素存在。我怎样才能做到这一点 ？？有人可以帮我吗 ？？谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T07:27:25.267

说**arr**是您的`NSMutableArray`，而**dictToBeAdded**是您要添加的字典。让**strKey**成为这个字典的键：

```
for(int i=0;i<[arr count];i++)
{
    NSMutableDictionary *dict = [arr objectAtIndex:i];
    for(NSString *str in [dict allKeys])
    {
         if(![str isEqualToString:strKey])
             [arr addObject:dict];
    }
} 
```

# java - ExtJs Combobox displayField 编码

> ID：11555745
> 
> 赞同：3
> 
> 时间：2012-07-19T07:19:19.863
> 
> 标签：java, javascript, html, extjs, encoding

我有一个 Java Web 应用程序。我有一个实体类（当然是在转换之后）我想在 ExtJs 的组合框中使用它。我的问题如下：

在 displayField 中可以有包含 html 代码的条目。因此，在使用 flexjson.JSONSerializer 进行序列化期间，我使用 flexjson.HTMLEncoder 使条目在下拉列表中可见（在它使屏幕因未终止的字符串文字而死亡之前）。到目前为止，一切都很好。

```
editor.myCombo = new Ext.form.ComboBox({
    mode: 'local',
    editable: false,
    forceSelection: true,           
    triggerAction: 'all',
    store: new Ext.data.JsonStore({
        fields: ['myId', 'myName'],
        emptyItem: {'myName' : '...'},
        data: <c:out value="${form.json['myList']}" escapeXml="false"/>         
    }),
    disabled: isEditorDisabled,
    width: 75,
    listWidth: 160,
    displayField: 'myName',
    valueField: 'myId'
}); 
```

但是当我从下拉列表中选择一个项目（所有显示正确`Alfred </script>`）时，显示字段将显示为：`Alfred &lt;/script&gt;`。

我如何使这项工作？为什么它显示编码版本（在 json 请求中检索）而不是 HTML？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T05:30:03.043

`getDisplayValue`尝试在您的配置中包含一个覆盖的方法。只需将其设置为返回解码值，如下所示：

```
editor.myCombo = new Ext.form.ComboBox({
    mode: 'local',
    editable: false,
    forceSelection: true,           
    triggerAction: 'all',
    store: new Ext.data.JsonStore({
        fields: ['myId', 'myName'],
        emptyItem: {'myName' : '...'},
        data: <c:out value="${form.json['myList']}" escapeXml="false"/>         
    }),
    disabled: isEditorDisabled,
    width: 75,
    listWidth: 160,
    displayField: 'myName',
    valueField: 'myId',

    // this should return the decoded string instead
    getDisplayValue: function() {
        return Ext.String.htmlDecode(this.value);
    }
}); 
```

之所以必须这样做，是因为它的实际字段部分 `Ext.form.field.Combo`真的是一个 HTML 输入元素，它只会显示纯文本，不会从中生成 HTML。

# javascript - 从 LWIP 服务器响应中检索 16 位整数

> ID：11555746
> 
> 赞同：0
> 
> 时间：2012-07-19T07:19:19.930
> 
> 标签：javascript, c, integer, yui, ascii

在服务器端，我有以下循环，它需要一个 16 位整数（从 0 到 639）并将其分成两个 8 位字符来提供缓冲区（1280 字节）。然后通过 TCP-IP 将其发送到客户端。

```
.c

unsigned int data2[1000]; 
char *p;
len = generate_http_header(buf, "js", 1280);
p = buf + len;
for (j=0; j<640; j++)
{
    char_out[1]=(unsigned char)(data2[j]&0x00FF);
    char_out[0]=(unsigned char)((data2[j]>>8)&(0x00FF));
    *p=char_out[0];
    p=p+1;
    *p=char_out[1];
    p=p+1;
}
....
tcp_write(pcb, buf, len, 1);
tcp_output(pcb); 
```

在客户端，我想从 JSON 对象中检索 16 位整数。我想出了这个解决方案，但是发生了一些事情，我无法获得所有整数值（0 到 639）。

```
.js
var bin=o.responseText;
for(i=0;i<1000;i=i+2)
{
    a=bin[i].charCodeAt();
    b=bin[i+1].charCodeAt();

    // Get binary representation.
    a=parseInt(a).toString(2);
    a=parseInt(a);
    //alert('a(bin) before:'+a);

    b=parseInt(b).toString(2);
    b=parseInt(b);

    //padding zeros left.
    a=pad(a,8);
    b=pad(b,8)

    //Concatenate and convert to string.
    a=a.toString();
    b=b.toString();
    c=a+b;

    //Convert to decimal
    c=parseInt(c,2);
    //alert('DECIMAL FINAL NUMBER:'+c)
    fin=fin+c.toString();
}

alert('FINAL NUMBER'+fin); 
```

我使用 Fire BUG 来查看来自服务器的 HTTP 响应：

```
 �����������   �
 ���
  ������������������� �!�"�#�$�%�&amp;�'�(�)�*�+�,�-�.�/        �  0�1�2�3�4�5�6�7�8�9�:�;�&lt;�=�&gt;�?�@�A�B�C�D�E�F�G�H�I�J�K�L�M�N�O�P�Q�R�S�T�U�V�W�X�Y�Z�[�\  �]�    ^�_�`�a�b�c�d�e�f�g�h�i�j�k�l�m�n�o�p�q�r�s�t�u�v�w�x�y�z�{�|�}�~������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������ 
```

!"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_`abcdefghijklmnopqrstuvwxyz{|}~���������������� ������������������������������������������������������ ������������������������������������������������������ ������������

!"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUV�����������QR���� ��Ps�������� �����$����������������P�������������</p>

运行 .js 代码后，我得到了正确的数字，从 0 到 127（0,1,2,...127），但是从 128 到 256，我得到的所有数字都等于 255 而不是（128,129,130​​... 256）。在 256 之后，每个数字都可以并按顺序排列（257，....639）。我认为问题与返回字符 Unicode 的函数 charCodeAt() 有关。由于某种原因，考虑到我有相同的字符，它总是返回 255，但这是不可能的，因为服务器正在发送“129,130​​,131...255”知道会发生什么吗？在使用实际解决方案之前，我尝试直接从 JSON 对象中检索 16 位整数，但无法使用 LUT 删除依赖关系。如何在 o.responseText="abcdefgh..." 中拥有每个字符的 8 位 不使用 LUT 来查找等效的 ASCII 码，然后是二进制表示？我认为可以使用按位运算符 & 但在这种情况下仍然需要先转换为二进制等效然后再转换为整数。如何直接对 java 脚本中的字符串执行按位运算？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T07:33:52.033

# linear-programming - ampl/cplex 的线性函数形式 (a/b)

> ID：11555750
> 
> 赞同：2
> 
> 时间：2012-07-19T07:19:40.987
> 
> 标签：linear-programming, cplex, ampl

我正在尝试解决一个最小化问题，我想最小化一个表达式

```
a/b 
```

其中 a 和 b 都是变量。因此，这不是一个线性问题......我怎样才能将这个函数转换为另一个函数（作为一个线性函数）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T15:42:44.303

有几种方法可以做到这一点，但最简单的解释需要您求解一系列线性程序。首先，移除目标并添加约束

```
a <= c * b 
```

其中 c 是解的已知上限。然后在 c 上进行二进制搜索，您可以在 c_l、c_u 的范围内解决问题

```
a <= c_l * b 
```

但对于

```
a <= c_u * b 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T20:29:24.647

[在lpsolve](http://lpsolve.sourceforge.net/5.5/ratio.htm)网站上有一个关于如何在线性规划中处理比率的详细部分。它应该足够通用以适用于 AMPL 和 CPLEX。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T04:33:36.917

obj 的一般形式应该是一个线性分数函数，类似于 f_{0}(x)=(c^Tx+d)/(e^Tx+f)。对于您的情况，X=(a,b),c=(1,0),(e=0,1),d=f=0。为了解决这种选择，可以使用称为线性分数规划的东西。这就像线性分数函数的线性约束版本，并且应用 Charnes-Cooper 变换来转换为 LP。您可以从 wiki 找到主要思想。许多 OR 书籍对此进行了更多讨论，例如 Boyd 的“凸优化”（免费下载）中的 pp53、pp165。

# c# - C# 延迟初始化 && 竞速初始化？

> ID：11555755
> 
> 赞同：4
> 
> 时间：2012-07-19T07:20:17.647
> 
> 标签：c#, .net, multithreading, .net-4.0

[阅读](http://books.google.co.il/books?id=t1de8nSVYnkC&pg=PA906&lpg=PA906&dq=%22LazyInitializer.EnsureInitialized%20%28ref%20_expensive,%22&source=bl&ots=24qfWwIk7y&sig=9ygi5-TUZEWf1LD0-KKPUbVVrQo&hl=en&sa=X&ei=XLUHUMDuCeLP0QXRppHvBA&redir_esc=y#v=onepage&q=%22LazyInitializer.EnsureInitialized%20%28ref%20_expensive,%22&f=false)后，`LazyInitializer` 它是：

> 它提供了另一种初始化模式，有多个线程竞相初始化。

这是一个示例：

```
Expensive _expensive;
public Expensive Expensive
     {
       get // Implement double-checked locking
         {
           LazyInitializer.EnsureInitialized (ref _expensive,() => new Expensive());
           return _expensive;
         }
     } 
```

**问题 #1**

看着 ： ![在此处输入图像描述](../Images/8309a1b9ba44412d0955faeaaab9cd58.png)

为什么#A 说它实现了双重检查锁定？它只是一个获得财产？

**问题2**

#B（lambda 表达式）是线程安全的吗？

**问题 #3**

所以我通过查看样本搜索了这个*“种族初始化”的事情：*

```
volatile Expensive _expensive;
public Expensive Expensive
{
  get
  {
    if (_expensive == null)
    {
      var instance = new Expensive();
      Interlocked.CompareExchange (ref _expensive, instance, null);
    }
    return _expensive;
  }
} 
```

然后我想：初始化不是种族是线程安全的吗？

e/g/ 如果有 2 个线程进入：

![在此处输入图像描述](../Images/b50fbddf12a4db16676aaf02b7640e51.png)

昂贵的对象将被创建两次！

再说一次，3个问题

1）为什么#A说它实现了双重检查锁定？它只是一个获得财产？

2）#B（l​​ambda 表达式）是线程安全的吗？

3）初始化不是线程安全的

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T07:59:26.457

有各种重载`EnsureInitialized`。有些接受一个`synclock`对象（可以`null`并且将由该`EnsureInitialized`方法创建）。其他人没有 a`synclock`作为参数。所有`EnsureInitialized`保证如果在对象未初始化时由两个（或更多）不同的线程同时调用，这两个线程将收到对同一对象的引用。所以：

```
Expensive _expensive;

// On thread 1
LazyInitializer.EnsureInitialized (ref _expensive,() => new Expensive());

// On thread 2
LazyInitializer.EnsureInitialized (ref _expensive,() => new Expensive()); 
```

`_expensive`两个线程将看到的对象将是相同的。

唯一的问题是它`new Expensive()`可以被调用两次（每个线程一次，所以在多线程竞争中它可以被调用更多次。）

如果您不想要它，请使用`synclock`重载：

```
Expensive _expensive;
object _sync = null;
bool _useless;

// On thread 1
LazyInitializer.EnsureInitialized (ref _expensive, ref useless, ref _sync, () => new Expensive());

// On thread 2
LazyInitializer.EnsureInitialized (ref _expensive, ref useless, ref _sync, () => new Expensive()); 
```

现在`new Expensive()`，对于运行的两个（或更多）线程的每种可能组合，将只调用一次。

# mysql - mysql - 我不能将外键指向日期时间字段类型

> ID：11555756
> 
> 赞同：1
> 
> 时间：2012-07-19T07:20:22.743
> 
> 标签：mysql, foreign-keys, primary-key, foreign-key-relationship, mysql-error-1005

我有 2 个名为 mEmpl 和 mOrder 的表。

mEmpl 有 9 个字段：

> IDEmployee (int), ShortName (varchar), Name (varchar), DBegin (datetime 主键), DEnd (datetime 主键), Directory (varchar), Mode (varchar 主键), PartTime (varchar), IDJob (int)

mOrder 有 11 个字段：

> IDOrder (int), NrOrder (int), OrderDesc (varchar), IDOwner (int), Budget (float), DBegin (datetime), DEnd (datetime), Mode (varchar), ArtCost (int), BaseRate (int),基本项目（整数）

当我尝试添加`mOrder(DBegin, DEnd, and Mode)`引用 mEmpl 的外键时，它总是会引发错误消息：

```
ERROR 1005 (HY000): Can't create table 'spezet.#sql-4d4_1' (errno: 150) 
```

但是，如果我只是像这样向 DBegin 添加一个外键：

```
ALTER TABLE mOrder ADD FOREIGN KEY (DBegin) REFERENCES mEmpl(DBegin); 
```

它没有引发任何错误！DBegin 成功地指向 mEmpl.DBegin 主键。

谁能向我描述这里出了什么问题，或者 MySQL 是否确实不能同时指向 2 个日期时间字段？提前感谢您的回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T11:34:28.190

您可以通过以 root 身份登录 MySQL 并输入以下内容来查找问题原因的更多详细信息：-

```
SHOW ENGINE INNODB STATUS; 
```

这可能会有所帮助。我怀疑问题的原因是在创建外键时，您需要在被引用的表上创建一个索引，其中包含被引用的列作为索引的第一列，按照外键约束中指定的顺序。

请参阅[此处](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)了解更多信息。

# asp.net - CollapsiblePanelExtender 不展开

> ID：11555763
> 
> 赞同：0
> 
> 时间：2012-07-19T07:20:52.980
> 
> 标签：asp.net, ajax, ajaxcontroltoolkit

我目前正在开发一个使用 AjaxControlToolkit 的项目。面板折叠得很好，但之后不会展开，或者如果默认折叠，最初不会展开。

我在标记中找不到错误。请帮忙

```
<cc2:CollapsiblePanelExtender ID="CollapsiblePanelExtender1" runat="server" CollapseControlID="oben_ausbildung"
                ExpandControlID="oben_ausbildung" TargetControlID="unten_ausbildung" Collapsed="True" ImageControlID="i_einaufklapp" 
                ExpandedImage="~/gesichert/images/panel_einklappen.jpg" CollapsedImage="~/gesichert/images/panel_erweitern.jpg">
            </cc2:CollapsiblePanelExtender> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T10:03:04.927

答案有点晚了，但从来没有：问题与 Scriptmanager 有关。此外，该应用程序的旧 live 版本存在相同问题大约 1 年，没有人注意到它。事实证明，从 切换到 对我们来说是一种解决方法。

问候。

# linux - Beaglebone inittab 问题

> ID：11555765
> 
> 赞同：2
> 
> 时间：2012-07-19T07:21:10.487
> 
> 标签：linux, bash, init, beagleboard, angstrom-linux

我正在 beaglebone 中开发一个应用程序。我想将启动脚本添加到我的 Beaglebone，但我找不到 /etc/inittab。我正在使用图像：Angstrom-Cloud9-IDE-GNOME-eglibc-ipk-v2012.05-beaglebone-2012.06.18.img.xz

我认为在以前版本的图像中有 /etc/initab 但对于新发行版我找不到 inittab ：/

我想应用这个：[在 Angstrom Linux 上自动登录，](https://stackoverflow.com/questions/10282981/automatic-login-on-angstrom-linux) 但我不能，因为没有 /etc/inittab。

新发行版中的 inittab 在哪里。

当我写 uname -r 它给出： 3.2.23

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T19:30:24.660

inittab 已被 systemd 取代

这就是我为串行控制台所做的。您可以通过将“serial-getty@...”替换为“getty@...”来轻松适应 tty1，但我尚未对其进行测试。

```
cp /lib/systemd/system/serial-getty@.service /etc/systemd/system/autologin@.service
rm /etc/systemd/system/getty.target.wants/serial-getty@ttyO0.service
ln -s /etc/systemd/system/autologin@.service /etc/systemd/system/getty.target.wants/serial-getty@ttyO0.service 
```

在任何位置创建以下脚本文件（在我的例子中是 /home/root/autologin.sh）

```
#!/bin/sh
exec /bin/login -f root 
```

使其可执行

```
chmod a+x autologin.sh 
```

编辑 /etc/systemd/system/autologin@.service 并通过添加 -n（不提示用户输入登录名）和 -l（调用指定的 login_program 而不是 /bin/login）选项来更新 ExecStart 命令。

```
ExecStart=-/sbin/agetty -n -l /home/root/autologin.sh -s %I 115200 
```

# android - Android jni“没有制定目标问题的规则”

> ID：11555771
> 
> 赞同：0
> 
> 时间：2012-07-19T07:21:49.737
> 
> 标签：android, ffmpeg, java-native-interface

我正在尝试编译从下面的链接获得的项目。 [Github 项目 fmpeg。](https://github.com/jhotovy/android-ffmpeg)但是在编译它以使用 andriod ndk 版本 5 创建 .so 文件时，我遇到了以下问题。请建议我解决它。

```
make: *** No rule to make target `/cygdrive/D/Shakthi/jhotovy/jhotovy-android-ffmpeg-fab1412/Project/jni/ffmpeg/ffmpeg.c', needed by `/cygdrive/D/Shakthi/jhotovy/jhotovy-android-ffmpeg-fab1412/Project/obj/local/armeabi/objs/ffmpeg/ffmpeg/ffmpeg.o'.  Stop. 
```

我的 Android.mk 文件代码。

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE  := ffmpeg

FFMPEG_LIBS := $(addprefix ffmpeg/, \
 libavdevice/libavdevice.a \
 libavformat/libavformat.a \
 libavcodec/libavcodec.a \
 libavfilter/libavfilter.a \
 libswscale/libswscale.a \
 libavutil/libavutil.a \
 libpostproc/libpostproc.a )

OGG_LIBS := $(addprefix libogg/output/lib/, \
 libogg.a )

VORBIS_LIBS := $(addprefix libvorbis/output/lib/, \
 libvorbis.a \
 libvorbisenc.a \
 libvorbisfile.a )

THEORA_LIBS := $(addprefix libtheora/output/lib/, \
 libtheora.a \
 libtheoraenc.a \
 libtheoradec.a )

LOCAL_CFLAGS += -g -Iffmpeg -Ivideokit -Wno-deprecated-declarations 
LOCAL_LDLIBS += -llog -lz $(FFMPEG_LIBS) $(THEORA_LIBS) $(OGG_LIBS) x264/libx264.a
LOCAL_SRC_FILES := ffmpeg_android/ffmpeg_android.c ffmpeg/ffmpeg.c ffmpeg/cmdutils.c

include $(BUILD_SHARED_LIBRARY)

# Use to safely invoke ffmpeg multiple times from the same Activity
include $(CLEAR_VARS)

LOCAL_MODULE := ffmpeginvoke

LOCAL_SRC_FILES := ffmpeg_invoke/ffmpeg_invoke.c
LOCAL_LDLIBS    := -ldl

include $(BUILD_SHARED_LIBRARY) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T07:31:29.490

您是否按照[“如何构建它”](https://github.com/jhotovy/android-ffmpeg/blob/master/README.textile)中的说明进行操作？

# c - 探索有障碍的网格

> ID：11555774
> 
> 赞同：0
> 
> 时间：2012-07-19T07:21:54.333
> 
> 标签：c, algorithm

我需要一个机器人算法来探索一个有障碍物的 n*n 网格（如果你愿意的话，一个迷宫）。目标是探索所有没有障碍的广场，并避开有障碍的广场。诀窍是障碍物迫使机器人改变其路径，导致它错过障碍物后面可能的自由方块。我可以懒惰地增加/减少机器人的 x/y 坐标，让机器人在四个方向中的任何一个方向移动，以防没有障碍物并且机器人可以穿过预先看到的路径（如果需要）以到达其他自由方格. 当所有空闲方块至少遇到一次时，算法应该终止。

任何简单的懒惰/有效的方法来做到这一点？一个伪代码将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T07:29:39.047

只需保留未探索邻居的列表即可。如有必要，可以使用一个聪明的启发式方法来确定接下来要访问列表中的哪个字段，以提高效率。

伪代码（使用堆栈来跟踪导致 DFS 的未探索邻居）：

```
// init
Cell first_cell;
CellStack stack;
stack.push(first_cell);

while(!stack.isEmpty()) {
    Cell currentCell = stack.pop();
    currentCell.markVisisted();
    for(neighbor in currentCell.getNeighbors()) {
        stack.push(neighbor);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T07:53:40.703

我相信这个问题可以从[Traveling Salesman Problem](http://en.wikipedia.org/wiki/Travelling_salesman_problem)减少，因此是[NP-Hard](http://en.wikipedia.org/wiki/NP-hard)，所以你不太可能找到一个多项式解决方案来优化和有效地解决问题。

但是，您可能希望对 TSP 采用一些[启发式方法和近似值](http://en.wikipedia.org/wiki/Travelling_salesman_problem#Heuristic_and_approximation_algorithms) ，我相信它们也可以针对此问题进行调整，因为该问题首先似乎与 TSP 非常接近

**编辑：**

如果不需要找到*最短路径*，并且您想要任何路径，则可以使用维护访问集的简单[DFS来完成。](http://en.wikipedia.org/wiki/Depth-first_search)在 DFS 的步骤中，您从递归中返回 - 您移动到先前的方格，这样可以确保机器人探索所有方格，如果有通向所有方格的路径。

DFS 的伪代码：

```
search(path,visited,current):
   visited.add(current) 
   for each square s adjacent to current:
      if (s is an obstacle): //cannot go to a square which is an obstacle
         continue
      if (s is not in visited): //no point to go to a node that was already visited
         path.add(s) //go to s
         search(path,visited,current) //recursively visit all squares accesable form s
         //step back from s to current, so you can visit the next neighbor of current.
         path.add(current) 
```

调用`search([source],{},source)`

请注意，可以在该`for each`步骤之前使用优化启发式 - 启发式只是重新排序节点的迭代顺序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T08:19:34.417

我认为解决问题的最佳方法是递归（转到最近的空闲单元）。使用以下附加启发式方法：转到最近的空闲单元格最少的空闲邻居（首选存根）。

伪代码：

```
// init:
for (cell in all_cells) {
    cell.weight = calc_neighbors_number(cell);
}

path = [];

void calc_path(cell)
{
    cell.visited = true;
    path.push_back(cell);
    preferred_cell = null;
    for (cell in cell.neighbors)
        if (cell.visited) {
            continue;
        }
        if (preferred_cell == null || preferred_cell.weight > cell.weight)
           preferred_cell = cell;
    }
    if (preferred_cell != null) {
        calc_path(preferred_cell);
    }
}

// Start algotithm:
calc_path(start); 
```

# asp.net-mvc - 检查 Viewbag 属性是否为空，并在视图中使用默认值

> ID：11555777
> 
> 赞同：7
> 
> 时间：2012-07-19T07:21:59.333
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我在一个有效的 MVC 视图中有这段代码，但它看起来像很多代码来实现这个简单的事情。有什么办法让它更有效率吗？

```
@if (string.IsNullOrEmpty(ViewBag.Name))
{
 @:&nbsp;    
}
else
{
 @:ViewBag.Name
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-19T09:41:08.700

```
@(ViewBag.Name ?? Html.Raw("&nbsp;")) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-19T07:43:54.353

> 有什么办法让它更有效率吗？

是的，当然，使用视图模型并摆脱`ViewBag`：

```
public string FormattedName
{
    get { return string.IsNullOrEmpty(this.Name) ? " " : this.Name; }
} 
```

然后在您的强类型视图中：

```
@Html.DisplayFor(x => x.FormattedName) 
```

或者，如果您愿意：

```
@Model.FormattedName 
```

另一种可能性是编写自定义助手：

```
public static class HtmlExtensions
{
    public static IHtmlString Format(this HtmlHelper html, string data)
    {
        if (string.IsNullOrEmpty(data))
        {
            return new HtmlString("&nbsp;");
        }

        return html.Encode(name);
    }
} 
```

然后在你看来：

```
@Html.Format(Model.Name) 
```

或者，如果您需要保留 ViewCrap，您将不得不接受强制转换（抱歉，.NET 不支持动态参数的扩展方法分派）：

```
@Html.Format((string)ViewBag.Name) 
```

# ajax - Ajax 适用于 1 个参数。如何通过两个或多个？

> ID：11555779
> 
> 赞同：0
> 
> 时间：2012-07-19T07:22:03.840
> 
> 标签：ajax, json, parameters

这是我下面的代码，但只传递了第一个参数。但我需要两个。我认为 JSON 应该用于此目的。我试过了，但仍然没有运气。这是我发送的工作代码`name`。这个函数没有通过`password`

```
var name     = $('#name').attr('value');//the value from input type name
var password     = $('#password').attr('value');//the value from input type password
$.ajax({
 type: "POST",
 url: "index/success",
 data: "name="+ name +"&amp;password="+ password,
 success: function(){
   $('form#submit').hide(function(){$('div.success').fadeIn();});
 }
}); 
```

另一方面，我使用方法 `$model->values ( $_POST );` ，以便 `$model->name`定义并且是我实际发送的。但是， `$model->password`是空的。

PS 密码应该加密，我知道。这是一个简单的例子，只是为了询问使用 JSON。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T07:24:51.713

尝试

```
data: { name: name, password : password} , 
```

让 jQuery 为请求编码。

# macos - Mail.app 插件和 Mac App Store

> ID：11555781
> 
> 赞同：0
> 
> 时间：2012-07-19T07:22:08.130
> 
> 标签：macos, email, plugins, app-store

有谁知道 Mac App Store 是否允许 Mail.app 的第三方插件？随着 Mountain Lion 的新版本，安全架构将对每个签名的应用程序（以及 Mail）进行沙箱化处理，因此安装插件的过程非常有限。

问题是：由于插件必须使用私有 API（Mail.app 不公开 API）并从另一个应用程序访问私有数据，这如何在 Mac App Store 规则中完成？有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T19:05:42.737

您的应用程序需要在没有插件的情况下可用。 [MsgFiler](http://msgfiler.com/)提供了一个很好的例子：它本身可以运行，尽管速度很慢，并提供了一个可从 App Store 单独下载的插件，从而加快了运行速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T19:08:52.743

您永远无法通过 Mac App Store 发布插件。这些规则只允许独立的应用程序。您也不能出售仅安装插件的应用程序 - 规则禁止应用程序在共享位置安装任何代码。使用沙盒也是不可能的。

# .net - 比较两个 SQL 脚本并获取 alter script

> ID：11555782
> 
> 赞同：2
> 
> 时间：2012-07-19T07:22:21.253
> 
> 标签：.net, sql, windows, visual-studio, smo

我有两个不同的数据库（比如源和目标），两者都包含 1 个表（客户、列 - ID/名称）。假设我修改源表中的表并获取更新的脚本并与目标表进行比较，我怎样才能只使用**SMO object**从它们中获取更改脚本。

有什么方法可以比较两个脚本并获取更改脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T07:31:48.650

如果您有 Visual Studio 2010 Ultimate，则有一个数据菜单，您可以在其中执行定义的两个数据源的架构比较。生成的脚本可以导出和使用——

我不确定此功能是否存在于功能较弱的 Visual Studio 版本中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T07:24:10.547

不确定脚本比较。

但是，如果您的目标是比较两个现有表（例如生产与开发 SQL），您应该查看 Redgate 的 SQLCompare。它可以生成更改脚本，甚至更好的是直接应用更改。很甜的产品IMO

[http://www.red-gate.com/products/sql-development/sql-compare](http://www.red-gate.com/products/sql-development/sql-compare)

# user-interface - 使用 dat.GUI.js API 的互斥复选框

> ID：11555783
> 
> 赞同：1
> 
> 时间：2012-07-19T07:22:26.323
> 
> 标签：user-interface

我想知道如何使用 dat.GUI.js 创建互斥复选框。API 链接：[http](http://workshop.chromeexperiments.com/examples/gui/#1--Basic-Usage) ://workshop.chromeexperiments.com/examples/gui/#1--Basic-Usage 。

我创建了一个 jsfiddle [ [http://jsfiddle.net/georgeneil/dEbRg/](http://jsfiddle.net/georgeneil/dEbRg/) ] 来实现互斥复选框。但它有一些问题。

第 1 步：当我单击 CheckBox2 时，它按预期工作。

第 2 步：当我单击 CheckBox1 时，它没有被选中。

有人可以指导我如何修复它或提供一个链接，我可以在其中获得有关 dat.GUI.js 问题的答案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T19:03:18.353

尝试更改 jsFiddle 中的代码，如下所示：

```
// dat.gui controls
var view = this;
view.CheckBox1 = true;
view.CheckBox2 = false;

var gui = new dat.GUI();
var CB1Controller = gui.add(view, 'CheckBox1').listen();
CB1Controller.onChange(function(value){
        view.CheckBox1 = true;
        view.CheckBox2 = false;
});

var CB2Controller = gui.add(view, 'CheckBox2').listen();
CB2Controller.onChange(function(value){
        view.CheckBox1 = false;
        view.CheckBox2 = true;
}); 
```

您之前使用的布尔切换代码不能很好地推广到两个以上的选择。此外，此版本的代码将始终强制选择一个复选框——零选择是不可能的。

# html - 如何在 twitter bootstrap 中使网格跨越整个 html 页面

> ID：11555784
> 
> 赞同：6
> 
> 时间：2012-07-19T07:22:27.100
> 
> 标签：html, css, twitter, twitter-bootstrap

建立一个主页，我希望网格延伸到整个页面。我尝试将容器宽度设置为 100%，但似乎不起作用。我正在使用默认的网格系统。我正在寻找的一个例子是 www.rdio.com。

```
<div class="container">

   <div id="myCarousel" class="carousel slide">

     <div class="carousel-inner">
        <div class="active item"><img src="/site_media/static/img/" /></div>
        <div class="item"><img src="/site_media/static/img/ /> </div>
        <div class="item"><img src="/site_media/static/img/ /> </div>
     </div> 
```

‹ ›

```
 </div>

  <div class="row" id= "middleRow">

     <div class="span4" id="explanation"> </div>

     <div class="span4" id="explanation"> </div>

     <div class="span4" id="explanation"> </div>

  </div> 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-19T18:14:33.927

如果您查看 bootstraps 网站上的脚手架，您会看到

```
<div class="container-fluid"> 
```

是用于使其跨越整个网站的容器。

你也可以用像这样的行来做到这一点

```
<div class="row-fluid"> 
```

希望有帮助

这是链接 [http://twitter.github.com/bootstrap/scaffolding.html](http://twitter.github.com/bootstrap/scaffolding.html)

# project-management - 项目管理/跟踪软件 - 取代 Redmine

> ID：11555787
> 
> 赞同：2
> 
> 时间：2012-07-19T07:22:39.550
> 
> 标签：project-management, redmine

我正在使用 Redmine，作为一个免费软件，它非常好。但我现在面临一些问题，我正在寻找一些系统来取代 Redmine。从我的角度来看，主要缺点是：

*   硬安装——我的版本是1.3.1（安装过程很痛苦@$$），现在想升级到2的时候*。。*我可以在网站上看到这也会很痛苦

*   不太稳定 - （使用独立的 nginx 服务器）存在一些问题，例如有时无法上传文件，直到重新启动乘客，停止工作两次（由于某种原因缺少乘客进程）等

*   我最后一次设置插件的尝试没有成功

*   我不是 Ruby 开发人员，很难维护 Redmine - 我很不确定安全问题是什么，如何在其中一个域（端口 80）上使用已安装 SSL 的 Redmine 等

因此，我正在寻找具有以下功能的新系统（首选/但不是强制/选项不是 SaaS）：

必需的：

*   项目管理

*   错误跟踪

*   生成发票的可能性（作为一个插件也很酷）

*   用户友好的界面

很高兴拥有：

*   打开ID登录

*   不一定免费（但价格合理）

*   如果它不是 SaaS - 基于 PHP，而不是 Ruby、Python、Java 等

我对 Assembla、Pivo​​tal、Yodiz 和 Mantis 有一些经验。

Yodiz 界面太复杂，对我来说不干净。

螳螂就像来自过去（看起来像有史以来第一个追踪器）

Pivotal 还不错，但我认为最适合仅跟踪问题（不是项目管理、发票等）

Assembla.. 经验很少，只针对SVN

我知道有很多讨论，问题是很多人喜欢 Redmine 的原因与我的看法完全相反。我在过去 2 天里花了一些时间来审查最流行的追踪器，但到目前为止还没有成功。

我现在会尝试“Trac”，但如果有人分享这个流行的 Trac 问题的经验 - 多个项目，我会很高兴。:)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T23:26:12.240

我建议看一下汇编。它不仅适用于 SVN - 您可以使用 git / svn / mercurial 工具，甚至添加外部 github 工具。

assembla 的项目管理最近变得更好（实施了 Planner 和 Cardwall），并且计划进行新的改进。

如果您在提交消息或 Web 界面中跟踪您的工作时间，则很容易导出工作时间（以生成发票）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T12:04:14.913

经过一番研究，我找到了需要的软件。

[FengOffice](http://www.fengoffice.com/web/)似乎非常符合我的要求。

*   [社区版](http://www.fengoffice.com/web/community/downloads.php)（免费）

*   自托管（2 分钟安装）

*   写在 PHP 上

*   非常好的 UI - 我喜欢它的组织方式，AJAX UI 在这种情况下实现得非常好

*   很酷的功能

.. ETC

我没有更详细的印象，但它看起来很有希望。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-23T13:44:50.753

当前的 Trac 版本 (1.0) 本身并不提供多项目支持，尽管在 Trac wiki 中有一些关于该主题的讨论。但是从 Trac 0.12 开始，有一个插件[SimpleMultiProjectPlugin](http://trac-hacks.org/wiki/SimpleMultiProjectPlugin)扩展了 Trac，具有“一个已安装的 Trac 实例中的多个项目”的功能。

[可以在此处](https://groups.google.com/forum/?hl=en&fromgroups#!searchin/trac-users/SimpleMultiProject%2420x%2420Milestone%2420-%2420How%2420to%2420Use/trac-users/cJkSp-SG1gc/Al8zpHwTN0EJ)或在插件 wiki 页面上阅读有关 Trac 插件 SimpleMultiProjectPlugin 确切提供的内容的良好描述（请参阅上面的链接）。

# javascript - 在不知道名称的情况下检索 json 元素

> ID：11555794
> 
> 赞同：1
> 
> 时间：2012-07-19T07:22:52.310
> 
> 标签：javascript, json

我有一个这样的 JSON 对象：

```
var saveChamp = {
      "champ1": {"type": "radio", "size": 4, "null": null},
      "champ2": {"type": 3, "size": 4, "null": null}
    };

alert(saveChamp.champ1.type); 
```

在这个例子中，alert 显示“radio”，这是正常的。

如果我不知道 champ1 或 champ2 来检索“type”或“size”怎么办？我动态创建我的 json，所以我不知道我的对象的所有名称。

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T07:24:46.877

您可以使用`for ... in`语法来检索之前不知道其名称的对象的所有元素（[请参阅 MDN](https://developer.mozilla.org/en/JavaScript/Reference/Statements/for...in)）。

请注意`hasOwnProperty()`子句 ( [MDN](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/HasOwnProperty) )。这可以防止 JavaScript 在原型链中上升，并且只对对象本身的属性起作用。所以你不会得到`Object`例如的默认方法。

```
var saveChamp = {
      "champ1": {"type": "radio", "size": 4, "null": null},
      "champ2": {"type": 3, "size": 4, "null": null}
    };

var el;
for( el in saveChamp ) {
  if( saveChamp.hasOwnProperty( el ) ) {
    alert( saveChamp[el].type );
  }
} 
```

# jasperserver - 在 jasperserver 4.5 中为单个报表设置导出到 Excel

> ID：11555796
> 
> 赞同：0
> 
> 时间：2012-07-19T07:23:01.550
> 
> 标签：jasperserver

我正在使用 Jasper 服务器 4.5 版本。我需要知道是否可以将导出为 Excel 设置为报告的详细信息。更详细地说，我只需要为该报告提供一个导出选项。但同时对此报告所做的更改不应影响其他报告的导出选项。

提前致谢。

问候，

萨拉卡蒂克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T12:29:22.253

是的，您可以将报告导出为 .xls 或 .xlsx 文件。如果您使用的是 4.5 专业版，请查看文档中的 JasperReports Server 用户指南。有一个关于导航和导出报告的部分。JasperReports Server 允许您以多种格式导出报告。

至于特定于报表的导出选项：由于导出按钮位于应用程序级别，并且不是每个报表唯一的，我认为可能很难只为一个报表启用 Excel 导出，并且没有极端情况下不会将其流入您的其他报表定制。但也许其他人可以提供建议。

# jquery - 我需要使用 Jquery .each 函数获取密码字段的值吗？

> ID：11555797
> 
> 赞同：0
> 
> 时间：2012-07-19T07:23:03.367
> 
> 标签：jquery

我使用了下面的代码 jQuery("#change").submit(function() {

```
 jQuery.each(jQuery('input[type=password]'),function(index,value){ 
```

//我需要获取密码输入字段值的值以进行验证

```
});
return false; 
```

});

我还在表单中使用了三个密码输入字段

请任何人帮助我如何在jquery每个函数中获取值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T07:25:27.913

```
$('input[type=password]').each(function(){
    alert($(this).val());
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T07:26:46.667

```
$('input[type=password]').each(function(i,item){ alert( $(item).val() ) }) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T07:31:18.027

只需修改您的代码，如下所示

```
 $('input[type=password]').each(function(index,value)
            {
                // Here value(parameter) is an object
                alert(value.value);
            }); 
```

# xml - 我需要有关 XSL 路径目录的帮助

> ID：11555801
> 
> 赞同：-1
> 
> 时间：2012-07-19T07:23:11.013
> 
> 标签：xml, xslt

C: drive 是我当前的 xsl 路径

当我使用此 XSL 代码获取我的 XML 文件时，它工作正常

```
<xsl:variable name="Path">
<xsl:value-of select="'file:///C:'"/>
</xsl:variable> 
```

但是当我使用这个 XSL 代码来获取我的其他 XML 文件时它不起作用

```
<xsl:variable name="Path1">
<xsl:value-of select="'file:///E:'"/>
</xsl:variable> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T07:55:55.537

您向我们展示的代码没有任何问题。问题在别处。

顺便说一句，这是非常低效的：

```
<xsl:variable name="Path">
<xsl:value-of select="'file:///C:'"/>
</xsl:variable> 
```

你应该使用

```
<xsl:variable name="Path" select="'file:///C:'"/> 
```

因为当您只需要一个简单的字符串时，无需创建新的 XML 文档。

# javascript - 在 Google Maps API V3 中只显示一个 InfoBubble

> ID：11555802
> 
> 赞同：0
> 
> 时间：2012-07-19T07:23:12.137
> 
> 标签：javascript, google-maps-api-3, infobubble

我以前使用的是 InfoWindow。它正在工作，并且仅限于显示一个信息窗口，即使我单击了许多标记。

但是当我更改它并用 InfoBubble 替换它时，它会显示多个气泡。它不会自动关闭先前打开的气泡，而是保持打开状态，它们似乎把我的地图弄乱了。

我不知道该怎么处理这个问题。这是我的代码。

```
 downloadUrl("outputXML.php", function(data)
        {
            var xml = data.responseXML;
            var markers = xml.documentElement.getElementsByTagName("marker");
            for (var i = 0; i < markers.length; i++)
            {
                var name = markers[i].getAttribute("name");
                var address = markers[i].getAttribute("address");
                var type = markers[i].getAttribute("type");
                var point = new google.maps.LatLng(
                        parseFloat(markers[i].getAttribute("lat")),
                        parseFloat(markers[i].getAttribute("lng")));
                var html = "<div class='phoneytext'> <b>" + name + "</b> <br/>" + address + "</div>";
                var icon = customIcons[type] || {};
                var marker = new google.maps.Marker
                ({
                    map: map,
                    position: point,
                    icon: icon.icon,
                    title:name
                });

                //Initiate an infoBubble - shows when a marker is tapped/clicked
                infoBubble = new InfoBubble
                ({
                  map: map,
                  shadowStyle: 1,
                  padding: 0,
                  backgroundColor: 'rgb(57,57,57)',
                  borderRadius: 4,
                  arrowSize: 10,
                  borderWidth: 1,
                  borderColor: '#2c2c2c',
                  disableAutoPan: true,
                  arrowPosition: 30,
                  backgroundClassName: 'phoney',
                  arrowStyle: 2
                });                 
                bindInfoBubble(marker, map, infoBubble, html);

            }
       });               

        function bindInfoBubble(marker, map, infoBubble, html)
        {
            google.maps.event.addListener(marker, 'click', function()
            {
                infoBubble.setContent(html);
                infoBubble.open(map, marker);
            });
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T07:30:56.377

你可以实现`Singleton`概念：

```
 downloadUrl("outputXML.php", function(data)
    {
        var xml = data.responseXML;
        var markers = xml.documentElement.getElementsByTagName("marker");
        for (var i = 0; i < markers.length; i++)
        {
            var name = markers[i].getAttribute("name");
            var address = markers[i].getAttribute("address");
            var type = markers[i].getAttribute("type");
            var point = new google.maps.LatLng(
                    parseFloat(markers[i].getAttribute("lat")),
                    parseFloat(markers[i].getAttribute("lng")));
            var html = "<div class='phoneytext'> <b>" + name + "</b> <br/>" + address + "</div>";
            var icon = customIcons[type] || {};
            var marker = new google.maps.Marker
            ({
                map: map,
                position: point,
                icon: icon.icon,
                title:name
            });

            bindInfoBubble(marker, map, html);

        }
    });  

    var InfoBubbleClass = (function(){
        var instance = null;
        return {
           getInstance:function(){
               if(instance===null){
                   instance = new InfoBubble
                    ({
                       map: map,
                       shadowStyle: 1,
                       padding: 0,
                       backgroundColor: 'rgb(57,57,57)',
                       borderRadius: 4,
                       arrowSize: 10,
                       borderWidth: 1,
                       borderColor: '#2c2c2c',
                       disableAutoPan: true,
                       arrowPosition: 30,
                       backgroundClassName: 'phoney',
                       arrowStyle: 2
                    });                 
               }
               return instance;
           }
        };
    })();             

    function bindInfoBubble(marker, map, html)
    {
        google.maps.event.addListener(marker, 'click', function()
        {
            InfoBubbleClass.getInstance().setContent(html);
            InfoBubbleClass.getInstance().open(map, marker);
        });
    } 
```

# html - 图像开销 iframe

> ID：11555809
> 
> 赞同：2
> 
> 时间：2012-07-19T07:23:36.570
> 
> 标签：html, image, iframe

我想在`iframe`. 为了更好地理解，我附上了下面的图片。

我怎样才能做到这一点？ ![在此处输入图像描述](../Images/841284f48857ae174c2fe544b261859b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T07:38:48.570

`position: absolute;`你可以这样做`z-index`

[http://jsfiddle.net/t35vL/](http://jsfiddle.net/t35vL/)

HTML：

```
<iframe src="http://jsfiddle.net/"></iframe>
<img src="http://flickholdr.com/600/400/dogs">​ 
```

CSS：

```
iframe{
  width: 600px;
  height: 400px;
  border : 2px solid  black;
  z-index: 2;
}

img{
  position: absolute;
  left: 0;
  top: 0;
  z-index: 3;
  opacity: 0.3;
} 
```

...这样图像就在 iframe 上分层**，**并防止在其中单击。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T07:33:00.790

你可以尝试这样的事情：

```
 <iframe name="inlineframe" src="sample.html" frameborder="1" scrolling="auto" width="500" height="180" marginwidth="5" marginheight="5" ></iframe>
    <div style="position:absolute;
    left:0px; //edit as per iframe placement
    top:0px; //edit as per iframe placement
    z-index:-1;
    padding:5px;"> 
    <img src="rac_ftp.PNG" width="500" height="180" />
    </div> 
```

# c# - 在 asp.net 上使用 axapta businessconnectornet 导致 Visual Studio / IIS 崩溃

> ID：11555810
> 
> 赞同：0
> 
> 时间：2012-07-19T07:23:37.380
> 
> 标签：c#, asp.net, visual-studio-2010, iis, axapta

我正在尝试用更可靠的东西替换旧的 Axapta ComConnector（始终使用 Asp.Net/C#）。

现在我正在尝试[遵循本教程](http://msdn.microsoft.com/en-us/library/bb931177%28v=ax.10%29.aspx)，该教程教如何使用*"Microsoft.Dynamics.BusinessConnectorNet.dll"*。

在使用建议代码的控制台应用程序上，我可以调用“登录”（到多台服务器）而不会遇到任何问题。

我将相同的代码和库复制到 asp.net 网站（进行必要的编辑），当我尝试调用“登录”时，WebServer**崩溃**（在*IIS 6*或*Visual Studio 2010/2005 上*）。

有人遇到过同样的问题吗？你有没有设法解决它？

提前致谢。

**更新：** 系统事件日志记录：

> .NET 运行时版本 2.0.50727.5456 - 致命的执行引擎错误 (79C9EABE) (80131506)

和

> 错误名称：WebDev.WebServer20.exe，版本：10.0.40219.1，时间戳：0x4d5f3456
> 错误名称：mscorwks.dll，版本：2.0.50727.5456，时间戳：0x4ef6c72d
> Codice eccezione: 0xc0000005
> 偏移错误 0x0000ee3b

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-15T08:47:12.193

我设法解决了用 Windows 服务替换 Web 应用程序的问题，因为在 ASP.Net 环境中似乎不允许使用 BusinessConnectorNet。

# c++ - 在文本框中显示值 - 错误

> ID：11555811
> 
> 赞同：0
> 
> 时间：2012-07-19T07:23:39.110
> 
> 标签：c++, wxwidgets

我有 size_t sums[4] = {0, 0, 0, 0};

和一个文本框，我试图在其中显示我对其进行一些操作后得到的值。该值在 sums[i] 中，但是现在我想在文本框中显示该值，我正在这样做：

```
 *TextBox4 << "hello" << size_t sums;

frame->Connect(TEXT_BOX4, wxEVT_COMMAND_BUTTON_CLICKED | wxEVT_COMMAND_ENTER, (wxObjectEventFunction) & MyFrame::OnGenerateKey);

TextBox4 = new wxTextCtrl(this, TEXT_BOX4, wxT(""), wxPoint(200, 200), wxSize(200, 20), wxTE_PROCESS_ENTER | wxTE_READONLY | wxTE_LEFT, wxDefaultValidator, wxT("WxTextBox4")); 
```

但是它会产生以下错误

```
 base.cpp:212:22: error: ambiguous overload for 'operator<<' in '*((MyFrame*)this)->MyFrame::TextBox4 << sum'
base.cpp:212:22: note: candidates are:
C:\wxWidgets-2.8.12\include/wx/textctrl.h:419:17: note: wxTextCtrl& wxTextCtrlBase::operator<<(const wxString&)
C:\wxWidgets-2.8.12\include/wx/textctrl.h:420:17: note: wxTextCtrl& wxTextCtrlBase::operator<<(int)
C:\wxWidgets-2.8.12\include/wx/textctrl.h:421:17: note: wxTextCtrl& wxTextCtrlBase::operator<<(long int)
C:\wxWidgets-2.8.12\include/wx/textctrl.h:422:17: note: wxTextCtrl& wxTextCtrlBase::operator<<(float)
C:\wxWidgets-2.8.12\include/wx/textctrl.h:423:17: note: wxTextCtrl& wxTextCtrlBase::operator<<(double)
C:\wxWidgets-2.8.12\include/wx/textctrl.h:424:17: note: wxTextCtrl& wxTextCtrlBase::operator<<(wxChar) 
```

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T07:26:19.797

首先，您不能打印这样的静态数组，您需要对其进行迭代。其次 - 你应该只打印没有类型的总和：

> *TextBox4 << "你好" << sum;

但这可能还不足以帮助您 - 我需要更多背景信息。

# php - 如何在PHP中将单个数组与多维的一部分进行比较

> ID：11555812
> 
> 赞同：-3
> 
> 时间：2012-07-19T07:23:38.710
> 
> 标签：php

我想从数据库中获取一列，我想与单个数组进行比较。如果任何值等于不打印，否则打印单个数组的所有值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T07:47:00.013

试试这个

```
$array = array(); // Your array
$result = mysql_query("SELECT name FROM mytable");
$response = false;
while ($row = mysql_fetch_array($result, MYSQL_ASSOC)) {
  if (in_array($row['name'], $array)) {
    $response = true;
  }
}
if ($response === false) {
    print_r($array);
} 
```

# iphone - 找不到 nib (xib) 文件

> ID：11555814
> 
> 赞同：1
> 
> 时间：2012-07-19T07:23:43.170
> 
> 标签：iphone, xcode

在我的项目中有一个名为 view controller.xib 的文件。我从中删除了一个按钮，然后出现一个窗口，我选择移动到垃圾箱。删除该控件后，我找不到我的 xib 文件。但是我的项目正在成功构建并在该视图下正常运行。但我在项目和项目目录中都找不到该文件。我怎样才能恢复那个xib文件。需要帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T07:44:36.730

实际上，当您按下删除按钮时，您`file.xib`是从项目中选择的，而不是删除该控制按钮，而是通过单击此对话框按钮删除了您的 Xib 文件。

![删除确认对话框](../Images/18a40d050e7c806654cc8da2785404d2.png)

现在您的文件已从您的项目中删除。仔细查看正在使用的文件，而不是那个 file.xib。可能还有另一个同名文件，或者您正在使用另一个文件而不是这个文件。

关于文件的恢复，您可以查看以下帖子：

[从 Xcode 恢复已删除的文件](https://stackoverflow.com/q/8874174/593709)

[从 XCode 3.2.5 中意外删除类](https://stackoverflow.com/q/10891635/593709)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T07:45:11.683

检查聚光灯。键入带有扩展名的 xib 文件的全名。如果您没有永久删除它并且仅单击“删除参考”，那么您有可能会找到它。否则它消失了，对不起。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T08:44:44.980

请检查您的项目文件夹。您可能只删除了它的引用，搜索文件名并将其添加到您的项目中。

# r - Rcpp 条件中的 NA 值

> ID：11555818
> 
> 赞同：9
> 
> 时间：2012-07-19T07:24:05.117
> 
> 标签：r, rcpp

我在 Rcpp 中遇到了条件问题。解释我的问题的最好方法是通过一个例子。

```
z <- seq(from=1,to=10,by=0.1)
z[c(5,10,15,20,40,50,80)] <- NA
src <- '
 Rcpp::NumericVector vecz(z);
 for (int i=0;i<vecz.size();i++) {
   if (vecz[i] == NA_REAL) {
     std::cout << "Here is  a missing value" << std::endl;
   }
  }
'
func <- cxxfunction(signature(z="numeric"),src,plugin="Rcpp")
func(z)
# NULL 
```

据我了解，`NA_REAL`表示 Rcpp 中实数的 NA 值并`NA_Integer`表示整数的 NA 值。我不确定为什么上述条件永远不会返回 true given `z`。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-19T09:52:33.027

您可能想要使用 RC 级别函数**R_IsNA**。

```
require(Rcpp)
require(inline)
z <- seq(from=1, to=10, by=0.1)
z[c(5, 10, 15, 20, 40, 50, 80)] <- NA

src <- '
 Rcpp::NumericVector vecz(z);
 for (int i=0; i< vecz.size(); i++) {
   if (R_IsNA(vecz[i])) {
     Rcpp::Rcout << "missing value at position " << i + 1  << std::endl;
   }
  }
'

func <- cxxfunction(signature(z="numeric"), src, plugin="Rcpp")

## results
func(z)

missing value at position 5
missing value at position 10
missing value at position 15
missing value at position 20
missing value at position 40
missing value at position 50
missing value at position 80
NULL 
```

# jquery - 从 div 检索 jQuery 数据

> ID：11555821
> 
> 赞同：1
> 
> 时间：2012-07-19T07:24:12.570
> 
> 标签：jquery

```
<div align="left" style="margin-bottom:3px;"> 
    <b>ID:</b>
    37749
    <b>Active on:</b>
    03/28/2012
</div> 
```

这是我的内容，如何检索数字。使用jQuery

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T07:35:17.650

您*应该*添加一些额外的 HTML。

```
<div align="left" style="margin-bottom:3px;"> 
    <b>ID:</b>
    <span id="id">37749</span>
    <b>Active on:</b>
    <span id="active-on">03/28/2012</span>
</div> 
```

jQuery：

```
$(function () {
var theID = $('#id').text(),
    activeOn = $('#active-on').text();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T07:47:15.970

```
$('div').contents().map(function() {
    if (this.nodeType == 3 && this.nodeValue.replace(/\s/g, '').length !== 0) {
        return this.nodeValue.replace(/\s/g, '');
    }
}).toArray(); 
```

**[演示](http://jsfiddle.net/FFaxE/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T07:34:42.597

```
var content=$('div').innerHTML();
var arr=content.split("</b>");
var ID=arr[1].split("<b>")[0];
var date=arr[3]; 
```

# c# - 在 C# 中捕获损坏的数据库约束 - 最佳实践

> ID：11555824
> 
> 赞同：2
> 
> 时间：2012-07-19T07:24:40.690
> 
> 标签：c#, sql, asp.net-mvc

假设我有一个 SQL 表，其中一列具有唯一键（或其他）约束。

然后，我有一个允许用户编辑此列的应用程序（让我们去 ASP.NET MVC）。

当用户尝试保存并且约束被/将被打破时，我需要向用户显示用户友好的错误消息。因此，以下哪项是更好的做法？

1.  让应用程序查询数据库以确保约束没有被破坏，然后插入/更新行（导致对数据库的两次查询）

    *或者*

2.  立即尝试执行插入/更新，并在约束被破坏时捕获 SqlException。我喜欢这个，因为只有一次访问数据库，但是你应该如何提取哪个索引/约束被破坏并附加适当的消息？（除了检查 Exception.Message？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T07:49:21.817

1是更好的全方位解决方案。数据库调用不是唯一昂贵的操作，异常也很昂贵。您真的应该只让您的数据库在由于您的代码而不是用户操作而出现问题时抛出异常。

例如，您稍后可能想要安装 Elmah 并记录和/或邮寄给您的异常。Elmah 会记录/发送这样的异常，除非你明确告诉它不要这样做。

另外，就像您说的那样，异常并不总是具有与用户交流的最商业信息（尤其是 SQL 异常，它是特定于 SQL 的）。你有这些独特的和其他的限制是有原因的。由于这些原因，请在尝试存储信息之前验证信息。

拿 twitter、gmail 等。当你去获取用户名时，应用程序首先检查它是否被占用。这些是应用程序级别的唯一性约束，最终可能会或可能不会被实现为 SQL 约束。由于面向用户的是您的应用程序，因此您不应尝试通过将 SQL 翻译成英语来与他们交流。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T12:46:28.723

选项 1 的问题在于，它要求应用程序对约束是什么有单独的不同了解，这与 DRY 原则相冲突，并且可能在以后更改数据库约束并且应用程序未更新时导致问题 - a数据逻辑和应用程序之间的紧密耦合。此外，当您尝试更新时，不能保证执行的约束检查在随后的 pont 中仍然有效。

这并不排除在尝试提交之前使用一些 UI 层验证来增强您的应用程序以帮助用户。

因此，如果放弃它，我们就剩下选项 2，并且在应用程序的某个地方需要进行一些翻译。你把翻译和逻辑放在哪里，无论是在存储过程还是业务逻辑层，都取决于你。

# java - 如何从 dao 函数返回整数？

> ID：11555827
> 
> 赞同：1
> 
> 时间：2012-07-19T07:24:51.913
> 
> 标签：java, jakarta-ee, oracle10g, dao

在一个 servlet 程序中，我创建了一个包含函数的 DAO 类，我希望返回一个通过执行 Oracle 查询生成的特定值。我尝试了类似的方法：

```
public int timeofdayafternoonthsmon(Getset g) throws ClassNotFoundException, SQLException {
    // TODO Auto-generated method stub
    Connection con=Dbconnection.getConnection();
    String userid=g.getuserid();
    PreparedStatement pstmt=con.prepareStatement("select count(timeofday) from mealdb where timeofday=? and userid=?");
    pstmt.setString(1,"Afternoon");
    pstmt.setString(2,userid);
    int no=pstmt.executeUpdate();
    System.out.println(""+no);
    return no;
} 
```

但问题是它返回 1 作为（我猜）成功。但我希望它返回执行此查询的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T07:27:18.123

```
public int timeofdayafternoonthsmon(Getset g) throws ClassNotFoundException, SQLException {
    // TODO Auto-generated method stub
    Connection con=Dbconnection.getConnection();
    String userid=g.getuserid();
    PreparedStatement pstmt=con.prepareStatement("select count(timeofday) from mealdb where timeofday=? and userid=?");
    pstmt.setString(1,"Afternoon");
    pstmt.setString(2,userid);

    // execute a query, not an update statement and fetch the result set
    ResultSet rs = stmt.executeQuery();
    // position to the first result, there must be one since count(timeofday) returns at least 0
    rs.next();

    System.out.println(""+rs.getInt(1));
    return rs.getInt(1);
} 
```

# wordpress - 带有特色图片和描述的 Wordpress 菜单

> ID：11555828
> 
> 赞同：1
> 
> 时间：2012-07-19T07:24:56.863
> 
> 标签：wordpress

我已经按照[本教程](http://wpsmith.net/2011/tutorials/how-to-add-menu-descriptions-featured-images-to-wordpress-menu-items/)创建了带有描述和特色图像的 Wordpress 菜单项。您可以在屏幕右侧[看到结果。](http://sitoprova12345.altervista.org/)

现在有一个问题：有没有办法让图片可以点击？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-25T12:35:34.780

这是一篇旧帖子，但由于没有发布解决方案，如果您遇到同样的问题，这就是您要做的。

按照上面提到的教程，你会在functions.php的某个地方有这行代码：

```
 $args['thumbnail_link'] = false; 
```

只需更改为：

```
 $args['thumbnail_link'] = true; 
```

你完成了。您的缩略图现在将链接到各自的页面。如果您想对图像的 URL 进行更多控制，那就有点复杂了，因此您需要搜索其他解决方案。

# api - Foursquare 删除请求

> ID：11555830
> 
> 赞同：0
> 
> 时间：2012-07-19T07:25:05.550
> 
> 标签：api, foursquare

我是foursquare的SU2。我试图弄清楚如何删除正在进行的请求。有时我提出删除请求，而我社区中的其他 SU 看不到。但有时他们会看到不是由任何 SU 提出的删除请求。

有没有人对进展有任何想法。我们的社区认为（我不知道他们在哪里知道）删除请求需要 4 分。并按你的 SU 水平点 bacis (SU2=2,SU3=3)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T19:59:22.770

我们构建了一个智能系统，当 SU 审查和解决标记的场地或标记的编辑时，该系统会考虑各种因素。确切的参数总是被调整，所以它们可以而且会随着时间的推移而改变。

# string - 从文件名和make目录读取的批处理文件

> ID：11555837
> 
> 赞同：3
> 
> 时间：2012-07-19T07:25:34.010
> 
> 标签：string, batch-file, dos, filenames, mkdir

我在一个目录中有 .txt 文件（1 个或多个），我希望我的批处理文件读取它们的文件名，从第 4 个字符开始获取 20 个字符并在文件夹中创建一个新目录。这是我的代码：

```
for /f %%i in ('dir /b *.TXT') do (
    set filename1=%%i
    set folder1=%filename1:~4,20%
    mkdir %folder1%
) 
```

当我第一次运行这个程序时，我得到第 3 行的语法不正确错误（set folder1=....）并且没有创建文件夹。我尝试第二次运行它并创建了 2 个文件夹（一个名为“~4”，一个名为“20”）。在第 3 次运行时，该文件夹已正确创建！如果我关闭命令提示符并再次打开它，它还需要运行 3 次才能创建文件夹。

我也尝试过使用“for /r . $$i in (*.TXT) 没有运气。据我了解，问题是带有“set folder1=...”的行没有得到正确的文件名。我也尝试过使用 %%~i 或 %%~ni，我尝试将文件名（似乎总是得到正确的字符串）输出到文本文件，然后再次从该文件中读取，但没有成功。我不知道还能尝试什么。是因为 %%i 存储文件本身而不是带有文件名的字符串吗？

示例文件名为“REG_18004247K_20120208_A.TXT”，我希望创建一个名为“18004247K_20120208_A”的文件夹。

我完全不熟悉批处理编程（我只使用批处理文件大约 2 周），我猜这个问题可能非常简单。任何帮助，将不胜感激。

基里亚科斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T08:02:13.040

`%%i`确实存储了一个带有文件名的字符串。它实际上是这里唯一可以按预期工作的“变量”。

关键问题是您在循环中使用环境变量替换（of`filename1`和 of `folder1`），希望它在循环的每次迭代中都会被扩展。

但是，环境变量会在整个循环开始执行之前进行扩展。

1.  因此，在第一批执行时，`filename1`未定义，您会收到错误，`folder1 is not set`并且您可能还会看到一个名为`%folder1%`created 的文件夹。
2.  但是，此时脚本已定义`filename1`，并且第二次执行进一步`folder1`正确定义（尽管第 4 行已经使用不正确的值进行了扩展并且发生了乐趣）。
3.  第三次执行终于看到了正确的值`folder1`; 但这显然不适用于一个以上的文件，因为循环逻辑功能失调。

[这个较旧的答案](https://stackoverflow.com/q/2190295/1235565)用其他很好的例子和特殊情况解释了这个问题。

您的批处理可以通过`setlocal enabledelayedexpansion`在脚本的开头进行修复，在循环之前将变量初始化为空字符串，并`!...!`在扩展它们时切换到语法：`!filename1:~4,20!`和`!folder1!`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T11:06:56.313

```
setlocal enabledelayedexpansion
for /r %%i in (*) do (
    set filename1=%%i
    set folder1=!filename1:~4,20!
    mkdir !folder1!
) 
```

因为`...`延迟扩展需要一些时间来存储实际变量。
`!...!`而不是`%...%`向 DOS 回显快速分配变量。

# jquery - 检查 jquery 是否已经定义

> ID：11555839
> 
> 赞同：3
> 
> 时间：2012-07-19T07:25:35.773
> 
> 标签：jquery

您好我正在尝试为我的客户创建一个插件，我将在他们的 html 中添加以下代码。

```
<html>
<head>
</head>

<body>
    <script type="text/javascript">
    var clientID = "123";

    (function() {
        var test = document.createElement('script'); test.type = 'text/javascript'; test.async = true;
        test.src = 'myjavascript.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(test, s);
    })();
    </script>

    <div id="addimage"></div>
</body>
</html> 
```

在 myjavascript.js 文件中，我将调用 jquery 库。

```
if (typeof jQuery === "undefined") {
    var script = document.createElement('script');
    script.src = 'http://mysite.com/js/jquery-1.7.1.min.js';
    script.type = 'text/javascript';
    document.getElementsByTagName('head')[0].appendChild(script);
}

if (typeof jQuery === "undefined") {
    var script = document.createElement('script');
    script.src = 'http://mysite.com/js/fancybox.js';
    script.type = 'text/javascript';
    document.getElementsByTagName('head')[0].appendChild(script);
}

// my rest code goes here 
```

所以我想检查客户端html是否已经需要调用jquery-1.7.1.min.js，如果没有，那么只在myquery.js中包含1.7.1.min.js文件

如何检查它是否已经包含在内。请帮忙！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-19T07:27:54.147

通常你`!!variable`用来查看是否设置了变量。这种方式在很多很多著名的框架中都有使用，所以我也倾向于使用它。

```
if(!!window.jQuery) {
    // jQuery is loaded
} else {
    // load jQuery first
} 
```

不过，看看您的问题，您的方法也应该有效！使用`typeof variable === 'undefined'`也是一种非常有效的方法。

* * *

编辑：显然这不是足够的信息，所以我将重写您的代码

```
if(!window.jQuery) {
    var script = document.createElement('script');
    script.src = 'http://mysite.com/js/jquery-1.7.1.min.js';
    script.type = 'text/javascript';
    document.getElementsByTagName('body')[0].appendChild(script);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T07:39:46.140

除了`Tim S.`回答你可以使用 $.jquery 来获取版本

```
var head = document.getElementsByTagName('head')[0];
if(!! jQuery && jQuery('body').jquery == '1.7.1'){

    // jquery 1.7.1 included so only put your script
    var script = document.createElement('script');
    script.src = 'http://mysite.com/js/myotherscripts';
    script.type = 'text/javascript';
    head.appendChild(script);

} else {

    // Include jquery first 
    var script = document.createElement('script');
    script.src = 'http://mysite.com/js/jquery-1.7.1.min.js';
    script.type = 'text/javascript';
    head.appendChild(script);

    // Then include your scripts
    var script = document.createElement('script');
    script.src = 'http://mysite.com/js/myotherscripts';
    script.type = 'text/javascript';
    head.appendChild(script);

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-05T23:53:56.923

```
if(typeof jQuery != "undefined") {
   $('.input-number').inputmask('+7 (999) 999-9999');
} 
```

# c++ - 为什么 BitBlt 会挂起？

> ID：11555840
> 
> 赞同：0
> 
> 时间：2012-07-19T07:25:38.567
> 
> 标签：c++, winapi, bitblt

我正在编写 C++ 代码来自动截取我最喜欢的游戏的屏幕截图。我的部分代码如下所示：

```
SelectObject(hCDC, shot);
BitBlt(hCDC, 0, 0, WIDTH, HEIGHT, hDDC, 0, 0, SRCCOPY);
SelectObject(hCDC, oldBitmap);
Bitmap shotBitmap(shot, NULL); 
```

我之前已经初始化了相关变量，如下所示：

```
HDC hDDC = GetDC(handle);
HDC hCDC = CreateCompatibleDC(hDDC);
HBITMAP shot = CreateCompatibleBitmap(hDDC, WIDTH, HEIGHT);
HBITMAP oldBitmap = (HBITMAP) SelectObject(hCDC, shot); 
```

没有明显的原因，代码在 BitBlt 函数处挂起，直到某些（但我不知道是什么）更新。我在游戏中单击一个按钮或单击游戏外的一个窗口的毫秒数，BitBlt 完成，其余代码完美执行。神秘的是，我最近才遇到这个问题；它以前从未发生过。更神秘的是，它只发生在我的笔记本电脑上，而不是我朋友的笔记本电脑上。会发生什么？

# gwt - 将点击监听器添加到 gwt 的 Grid 行

> ID：11555841
> 
> 赞同：2
> 
> 时间：2012-07-19T07:25:41.033
> 
> 标签：gwt, grid, onclicklistener

是否可以将 ClickHandler 添加到 gwt 的 Grid 对象的整行？可以将 ClickHandler 添加到整个网格，但是如何确定单击了哪一行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T07:33:47.713

根据 GWT 版本，您可能可以使用：

```
public HTMLTable.Cell getCellForEvent(ClickEvent event) 
```

Cell 有一个`getRowIndex()`方法。

# oracle - 如何使用 Oracle 数据泵将数据泵入 txt 文件？

> ID：11555847
> 
> 赞同：1
> 
> 时间：2012-07-19T07:25:59.097
> 
> 标签：oracle, character-encoding, export, datapump

对你充满希望。

我需要将一个巨大的表（900 个字段，1 000 000 个字符串）导出到 txt ansi 文件中。UTL_FILE 需要很多时间。它不适合这个任务。我正在尝试使用 Oracle Datapump，但我无法接收带有 ansi 符号的 txt 文件（只有 2TTЁ©QRўҐEJЉ•）。任何人都可以给我任何建议。先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T07:37:42.697

Oracle Data Pump 只能以其专有的二进制格式导出。

如果要将数据导出为文本，则只有几个选项：

1.  PL/SQL 或 Java（存储）过程，它使用 UTL_FILE 或 Java 等效 api 写入文件。
2.  在数据库之外运行的程​​序写入文件。使用您喜欢的任何语言。Pro*C 可能是一个不错的选择，因为它显然比 UTL_FILE 方法快得多，请参阅[http://asktom.oracle.com/pls/apex/f?p=100:11:0::::P11_QUESTION_ID:459020243348](http://asktom.oracle.com/pls/apex/f?p=100:11:0::::P11_QUESTION_ID:459020243348)
3.  使用特殊的 SQL 脚本并使用假脱机在 SQL*Plus 中运行它。这是“SQL 卸载程序”方法，请参阅[http://www.orafaq.com/wiki/SQL](http://www.orafaq.com/wiki/SQL) *Loader_FAQ#Is_there_a_SQL.2AUnloader_to_download_data_to_a_flat_file.3F

谷歌搜索“SQL Unloader”提供了一些现成的解决方案，您可以直接使用或根据需要进行修改。

# java - 没有 Runnable 方法和 Test 类应该只有一个公共零参数构造函数

> ID：11555854
> 
> 赞同：2
> 
> 时间：2012-07-19T07:26:30.713
> 
> 标签：java, ant, selenium, junit

每当我在 Ant 中运行我的代码时，我都会遇到一个错误，但是在 Eclipse 上使用（Run > JunitTest）它运行良好，没有错误。

**以下是我生成报告时收到的错误消息：**

> **“测试类应该只有一个公共零参数构造函数”**
> 
> java.lang.Exception：测试类在 java.lang.reflect.Constructor.newInstance(Unknown Source) 处应该只有一个公共零参数构造函数
> 
> **“没有可运行的方法”** -java.lang.Exception：java.lang.reflect.Constructor.newInstance 没有可运行的方法（未知来源）

请看我的代码：

**此代码有注释 (@)**

```
import com.thoughtworks.selenium.*;
import org.junit.After;
import org.junit.AfterClass;
import org.junit.Before;
import org.junit.Test;

public class ABMTLinks extends SeleneseTestCase {

    /*
     * Variables for PieChart
     */
    public static int
        iPass,
        iFail,
        iError,
        iLeft=800,
        iRight=600; 
    public static String
        sPieChartTitle = "Pie Chart",
        sPieChartName = "Pie Chart",    
        sPath = "c:\\temp\\pieChart.jpg";

    public static int iTotalTestCaseCtr, iSum;
    public static String
         HMT = "http://dev.abmt.igloo.com.au/GetInvolved/Hostamorningtea/tabid/165/Default.aspx";

    @Before
    public void setUp() throws Exception {
        selenium = new DefaultSelenium("localhost", 1111, "*googlechrome", "http://www.google.com.ph/");
        selenium.start();
    }
    @Test
    public void testUntitled() throws Exception {
        selenium.open("/#hl=fil&output=search&sclient=psy-ab&q=harold&oq=harold&gs_l=hp.3..0l4.12830.13374.0.14277.6.6.0.0.0.2.745.2228.2-4j0j1j0j1.6.0...0.0...1c.ef1dV3OAuZg&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.,cf.osb&fp=55dc10243cd7c593&biw=1366&bih=624");

        String URL = HMT;
        if (URL.equals(HMT)
            ){
            iPass++;
            System.out.println("All pages redirects to each URL with no errors");           
        }
        else {
            iFail++;
            assertTrue("Test Case is Failed!", false);
            System.out.print("Failed");
        }
        iTotalTestCaseCtr++;
    }

    @After
    public void tearDown() throws Exception {
        selenium.stop();
        iSum = iFail + iPass;
        if (iTotalTestCaseCtr == iSum) {
            PieChart chartABMT = new PieChart(iPass, iFail, iError, sPieChartName, sPieChartTitle,  iLeft, iRight, sPath) ;
            chartABMT.pack();
            chartABMT.setVisible(true);
        }   
    }   
} 
```

**此代码继承于上述代码以生成饼图并将其保存在文件夹中**

```
import java.awt.Color;
import java.awt.Font;
import java.io.File;
import java.io.IOException;    
import javax.swing.JFrame;
import org.jfree.chart.ChartFactory;
import org.jfree.chart.ChartPanel;
import org.jfree.chart.ChartUtilities;
import org.jfree.chart.JFreeChart;
import org.jfree.chart.labels.StandardPieSectionLabelGenerator;
import org.jfree.chart.plot.PiePlot;
import org.jfree.data.general.DefaultPieDataset;
import org.jfree.data.general.PieDataset;

public class PieChart extends JFrame {

    public static final long serialVersionUID = 1L;

    public PieChart(int iPass, int iFail, int iError, String applicationTitle, String chartTitle, int iLeft, int iRight, String sPath) {
        super(applicationTitle);
        PieDataset dataset = createDataset(iFail, iError, iPass);
        JFreeChart chart = createChart(dataset, chartTitle);
        ChartPanel chartPanel = new ChartPanel(chart);
        chartPanel.setPreferredSize(new java.awt.Dimension(iLeft, iRight));
        setContentPane(chartPanel);
        String fileLocation =  sPath ;
        saveChart(chart, fileLocation);   

    }

    /**
     * Creates a sample dataset 
     */
    public  PieDataset createDataset(int iFail, int iError, int iPass) {
        DefaultPieDataset result = new DefaultPieDataset();
        result.setValue("Failed:", iFail);
        result.setValue("Error:", iError);
        result.setValue("Passed:", iPass);
        return result;    
    }

    /**
     * Creates a chart
     */
    public JFreeChart createChart(PieDataset dataset, String title) {

        JFreeChart chart = ChartFactory.createPieChart(title,               // chart title
            dataset,                // data
            true,                   // include legend
            true,
            false);

        PiePlot plot = (PiePlot) chart.getPlot();
        plot.setLabelFont(new Font("SansSerif", Font.PLAIN, 12));
        plot.setCircular(false);
        plot.setLabelGap(0.02);
        plot.setLabelGenerator(new StandardPieSectionLabelGenerator("{0} {1} ({2})")); //Shows the total count and percentage for Failed/Passed/Error
        return chart;

    }
    public void saveChart(JFreeChart chart, String fileLocation) {
        String fileName = fileLocation;
        try {
            /**
             * This utility saves the JFreeChart as a JPEG First Parameter:
             * FileName Second Parameter: Chart To Save Third Parameter: Height
             * Of Picture Fourth Parameter: Width Of Picture
             */
            ChartUtilities.saveChartAsJPEG(new File(fileName), chart, 800, 600);
        } catch (IOException e) {
            e.printStackTrace();
            System.err.println("Problem occurred creating chart.");
        }
    }

} 
```

下面是我的 XML 代码：

```
<?xml version="1.0" encoding="iso-8859-1"?>

<project name="JUnitTest1" default="usage" basedir=".">
    <!-- Create a folder with date and time -->
    <tstamp prefix="start">
        <format property="dateTime" pattern="MM-dd-YYYY HH-MM-ss" />
    </tstamp>

    <property environment = "env"/>
    <property name="ws.home" value="${basedir}"/>
    <property name="ws.jars" value="C:/Selenium/selenium-2.24.1"/>
    <property name="Igloo.dest" value="${ws.home}/build"/>
    <property name="Igloo.src" value="${ws.home}/src"/>
    <property name="Igloo.reportsDir" value="C:/reports/report ${start.dateTime}"/>
    <propert name="junit.style.dir" value = "C:/xsl/junit-frames.xsl" />

    <path id="Igloo.path">
        <pathelement location="${Igloo.dest}" />
        <fileset dir = "${ws.jars}" >
            <include name = "*.jar" />
        </fileset>
    </path>

    <target name="setClassPath" unless="Igloo.classpath">
        <path id="classpath_jars">
            <fileset dir="${ws.jars}" includes="*.jar" />
        </path>

        <pathconvert pathsep=": "
            property = "Igloo.classpath"
            refid = "classpath_jars"/>
    </target>

    <target name="init" depends="setClassPath">
        <tstamp>
            <format property="start.time" pattern="MM/dd/yyyy hh:mm ss" />
        </tstamp>

        <condition property="ANT"
            value = "${env.ANT_HOME}/bin/ant.bat"
            else = "${env.ANT_HOME}/bin/ant">
                <os family="windows" />
        </condition>
    </target>

    <!-- Clean -->
    <target name="clean">
        <delete dir="${Igloo.dest}"/>
    </target>

    <!-- Compile -->
    <target name="compile" depends="init, clean">
        <delete includeemptydirs="true" quiet="true">
            <fileset dir="${Igloo.dest}" includes="**/*"/>
        </delete>

        <echo message="making directory..."/>
        <mkdir dir="${Igloo.dest}" />
        <echo message="classpath ...: ${Igloo.classpath}"/>
        <echo message="compiling..."/>

        <javac
            debug="true"
            destdir="${Igloo.dest}"
            srcdir="${Igloo.src}"
            target="1.7"
            classpath="${Igloo.classpath}"
        >
        </javac>

    </target>

    <!-- build -->
    <target name="build" depends="init">
    </target>

    <target name="usage">
        <echo>
            ant run will execute the test
        </echo>
    </target>

    <!-- Run -->
    <target name="run">
        <mkdir dir="${Igloo.reportsDir}" />
        <delete includeemptydirs="true" quiet="true">
            <fileset dir="${Igloo.reportsDir}" includes="**/*" />       
        </delete>
        <java jar="${ws.jars}" fork="true" spawn="true" />
        <junit fork="yes" haltonfailure="no" printsummary="yes">

            <classpath refid="Igloo.path" />
            <batchtest todir="${Igloo.reportsDir}" fork="true">
                <fileset dir="${Igloo.dest}">
                    <include name="ABMTLinks.class" /> 
                </fileset>
            </batchtest>
        <formatter type="xml" />
        <classpath refid="Igloo.path" />
        </junit>

            <junitreport todir="${Igloo.reportsDir}">
                <fileset dir="${Igloo.reportsDir}">
                    <include name="TEST-*.xml" />
                </fileset>
                <report todir="${Igloo.reportsDir}"/>       
            </junitreport>
    </target>
</project> 
```

请帮忙。 ![错误信息](../Images/937d58d5ae432bb34388a087a8cd9ae9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T02:09:47.450

我已经解决了我的问题，谢谢你的帮助..我只是排除了 PieChart.class，因为每当我运行 junit 时，因为 PieChart.class 是一个实用程序类，所以它不能在 ant.. 在 xml 上运行我只是排除了这个类，`<exclude name = "PieChart.class" />`只是为了确保我刚刚添加了`<exclude name="PieChart.java" />`

```
 <classpath refid="Igloo.path" />
                <batchtest todir="${Igloo.reportsDir}" fork="true">
                    <fileset dir="${Igloo.dest}">
                        <include name="ABMTLinks.class" />
                        <exclude name = "PieChart.class" />
                        <exclude name = "PieChart.java" />
                    </fileset>
                </batchtest>
            <formatter type="xml" />
            <classpath refid="Igloo.path" />
            </junit>

                <junitreport todir="${Igloo.reportsDir}">
                    <fileset dir="${Igloo.reportsDir}">
                        <include name="TEST-*.xml" />
                    </fileset>
                    <report todir="${Igloo.reportsDir}"/>       
                </junitreport>
        </target> 
```

# css - 根据内容增加背景图片大小

> ID：11555855
> 
> 赞同：0
> 
> 时间：2012-07-19T07:26:33.387
> 
> 标签：css

看下面的图片

![分页](../Images/48c8653c4ff373141c36fcbc82ab58fb.png)

我正在开发分页。根据分页内容上面的图片，页码应该被花哨的边框包围，这样的边框是不可能通过 css`border`属性实现的。我必须为此使用图像，但问题是如果我使用固定大小的背景图像，那么当页面数量增加时，它们将显示在该背景图像之外。

我该怎么做才能使背景图像也随着页数的增加而增加。

我希望这是有道理的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:26:19.677

您有 2 个选项 - 使用`border-radius`或使用`background-image`.

如果您要使用border-radius（请注意，IE8 和更早版本不支持它）：

.pager-container {border-radius:5px 0 5px 0;border:1px solid #ccc;}

如果您使用`background-image`，您首先需要为您的背景创建一个精灵（下面的精灵将扩展到 800 像素）。

![背景图像精灵](../Images/b284be39ab3738b1f88b921ae0db212b.png)

现在你有了你的精灵，你需要将你的分页包装在 2 个包装器中，并将精灵图像应用于两者，然后移动它`background-position`以将其放置到位：

```
<div class="pager-container">
<div class="pager-container-inner">
   <a>1></a>
</div>
</div>

.pager-container, .pager-container-inner {height:25px;background-image:url(sprite.gif);background-repeat:no-repeat;}
.pager-container {background-position:0 0}
.pager-container-inner {background-position:100% -25px;} 
```

# mysql - 查询表时存储引擎出现Mysql错误1

> ID：11555857
> 
> 赞同：0
> 
> 时间：2012-07-19T07:26:35.293
> 
> 标签：mysql

我试图像在 MS SQL 服务器中那样复制数据库。所以我用谷歌搜索它并以这个[链接](http://www.mkyong.com/mysql/where-does-mysql-stored-the-data-in-my-harddisk/comment-page-1/#comment-84282)结束。

所以我将数据文件夹的文件夹复制并粘贴到另一台计算机的数据文件夹中。

当我打开查询浏览器时，我能够看到数据库和表，但是当我查询表时，它显示以下错误。

**从存储引擎收到错误 1**

# asp-classic - Asp ČŠŽ 到 CSZ 不工作

> ID：11555858
> 
> 赞同：0
> 
> 时间：2012-07-19T07:26:39.823
> 
> 标签：asp-classic, special-characters

我通过 post 选项从输入中获取字符串

```
Replace(string, "Č", "C") 
```

不起作用，因为函数无法从变量（Request.Form（“文件夹”））中识别“Č”字符。

我使用 for 循环和这个函数从字符串中获取字符

```
strChar = mid(someString,i,1) 
```

我可以使用

```
If Asc(strChar) = -15220  Then  'Č
   string = string + "C" 
```

但并不总是有效。我认为因为 'Č' 某种方式，如果使用 mid() 函数，则使用多个字符。

还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T07:52:43.133

试试这个：把这个放在你的 ASP 代码上：

```
Response.ContentType = "text/html"
Response.AddHeader "Content-Type", "text/html;charset=UTF-8"
Response.CodePage = 65001
Response.CharSet = "UTF-8" 
```

在您的 HTML 代码中：

```
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8" /> 
```

# mysql - 在 mysql 中检查电子邮件域不起作用

> ID：11555859
> 
> 赞同：0
> 
> 时间：2012-07-19T07:26:42.243
> 
> 标签：mysql

我尝试在插入新值时检查电子邮件的语法，但这似乎不起作用：

```
create table foo (
    email varchar(100) not null,
    constraint foo_check1 check (email like '%@%.%')
);

insert into foo values ('bar'); /* OK ...why ? */ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T07:34:01.287

这是 MySQL 的一个已知限制 - 不支持检查约束`CREATE TABLE`。请参阅：“ [CHECK 子句已解析但被所有存储引擎忽略](http://dev.mysql.com/doc/refman/5.5/en/create-table.html)”

您应该先创建表，然后对其进行更改以添加检查约束。

# asp.net-mvc - Asp.net MVC模型属性元数据指定TextBox id

> ID：11555862
> 
> 赞同：0
> 
> 时间：2012-07-19T07:26:47.253
> 
> 标签：asp.net-mvc

使用 MVC，当您使用 @Html.TextBoxFor(...) 之类的东西时，控件会使用模型中的属性属性进行渲染，以进行验证等操作。

它还使用类的属性名称作为呈现的 HTML 控件的名称。这与我们的命名约定有点冲突，所以我希望能够更多地控制 ID。

我已将“htmlAttributes:”添加到助手中，它可以满足我的要求，但我想知道：

1.  这对 MVC 在发布信息时再次实例化模型的能力有何影响？
2.  有没有办法使用模型类中的属性来指定控件 ID？

谢谢， 雅克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T07:31:59.803

> 这对 MVC 在发布信息时再次实例化模型的能力有何影响？

ID 属性对发布的任何内容绝对没有影响。提交表单时从不使用 ID 属性。唯一的要求是该属性在整个 DOM 中是唯一的。它是**`name`**模型绑定器使用的属性。无论如何，您都不能使用 htmlAttributes 更改此属性，因为此属性是从用作第一个参数的 lambda 表达式中推断出来的，并且您无论如何都不需要更改它，否则您可能会破坏默认模型绑定器重新水化视图模型的方式。

> 有没有办法使用模型类中的属性来指定控件 ID？

是的，但它可能需要更多的工作。您可以将自定义编辑器模板用于标准类型和自定义元数据感知属性，该属性将将此附加元数据信息传递给自定义编辑器模板。如果您对实现细节感兴趣，我可以提供一个示例，但首先我必须了解您为什么需要它。

# objective-c - 故事板中的组静态tableView没有出现

> ID：11555863
> 
> 赞同：1
> 
> 时间：2012-07-19T07:26:49.720
> 
> 标签：objective-c, ios, xcode, uitableview, storyboard

在情节提要中，当我将 tableView 类添加到情节提要时，我创建了包含 4 行的静态组表视图，它不显示我的组单元格

你能帮帮我吗（我是iOS新手，请给我看代码）

提前致谢！

这是 tableView 类的代码

```
#import "CheckedInOut.h"

@interface CheckedInOut ()

@end

@implementation CheckedInOut

 - (void)viewDidLoad
 {
 [super viewDidLoad];

  UIBarButtonItem *menuButton= [[UIBarButtonItem alloc] initWithTitle:@"Menu" style:UIBarButtonItemStyleDone  
 target:self action:@selector(menu:)];

UIBarButtonItem *yearButton= [[UIBarButtonItem alloc] initWithTitle:@"Year" style:UIBarButtonItemStyleDone 
 target:self action:@selector(year:)];

UIBarButtonItem *weekButton= [[UIBarButtonItem alloc] initWithTitle:@"Week" style:UIBarButtonItemStyleDone 
target:self action:@selector(week:)];

UIBarButtonItem *reportButton= [[UIBarButtonItem alloc] initWithTitle:@"Report" style:UIBarButtonItemStyleDone
target:self action:@selector(report:)];

NSArray *buttons = [NSArray arrayWithObjects:menuButton,yearButton,weekButton,reportButton,nil];
self.navigationItem.rightBarButtonItems = buttons;

}

- (void)viewDidUnload
{

  }

 - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
return 4;
} 
```

**我不知道我应该在这里写什么来回报**

```
 - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
return [myArray count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

return cell;
}

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
// Navigation logic may go here. Create and push another view controller.
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T09:45:38.880

如果您在情节提要中使用静态表，则应删除所有这 3 个

```
 - (NSInteger)tableView:
 - (UITableViewCell *)tableView:
 - (void)tableView:(UITableView *) 
```

# windows - Wow64DisableWow64Fs重定向文件退出

> ID：11555864
> 
> 赞同：3
> 
> 时间：2012-07-19T07:26:51.030
> 
> 标签：windows, delphi, delphi-7, delphi-2010

一个文件位于 C:\program files (x86)\my app\myexe.exe

1.  FileExists('C:\program files (x86)\my app\myexe.exe') 返回**true**；

2.  FileExists('C:\program files\my app\myexe.exe') 返回**false**； **在这两种情况下**，如果我使用 Wow64DisableWow64FsRedirection 与否。

为什么 ？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-19T07:36:55.620

文件系统重定向仅适用于`%windir%\system32`目录。[文件系统重定向器](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384187%28v=vs.85%29.aspx)的描述似乎使这一点显而易见。

注意页面中的评论

> 应用程序应使用该`SHGetSpecialFolderPath`函数来确定 %ProgramFiles% 目录名称。

**编辑**原来 FOLDERID_ProgramFilesx64 不适用于在 64 位窗口上运行的 32 位应用程序。在这种情况下，您可以改用环境变量`%ProgramW6432%`。请注意，此变量**仅**适用于 Windows 7 及更高版本的 32 位应用程序。

下面的 delphi 片段允许访问变量：

```
function GetEnvironmentString(aString : string) : string;
var
  dest : string;
  retSize : integer;
begin
  SetLength(dest, MAX_PATH);
  retSize := ExpandEnvironmentStrings(pchar(aString), pchar(dest), MAX_PATH);
  if retSize > 0 then
      SetLength(dest, retSize - 1);
  result := dest;
end; 
```

称为：

```
GetEnvironmentString('%ProgramW6432%'); 
```

如果您使用的是 64 位版本的 windows，则 32 位应用程序不能使用`FOLDERID_ProgramFilesX64`显式获取 64 位位置`Program Files`，但可以使用环境变量扩展代替。在 32 位版本的 Windows 上，此位置无效，不会为您提供值。在尝试访问此变量之前，您需要检查系统的位数。

您可以使用函数[IsWow64Process](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684139%28v=vs.85%29.aspx)来确定这一点。以下[代码段](http://www.delphidabbler.com/codesnip?action=named&routines=IsWow64&showsrc=1)应允许您检查：

```
function IsWow64: Boolean;
type
  TIsWow64Process = function(Handle: Windows.THandle; var Res: Windows.BOOL): Windows.BOOL; stdcall;
var
  IsWow64Result: Windows.BOOL;
  IsWow64Process: TIsWow64Process;
begin
  // Try to load required function from kernel32
  IsWow64Process := Windows.GetProcAddress(Windows.GetModuleHandle('kernel32.dll'), 'IsWow64Process');
  if Assigned(IsWow64Process) then
  begin
    // Function is implemented: call it
    if not IsWow64Process(Windows.GetCurrentProcess, IsWow64Result) then
      raise SysUtils.Exception.Create('IsWow64: bad process handle');
    // Return result of function
    Result := IsWow64Result;
  end
  else
    // Function not implemented: can't be running on Wow64
    Result := False;
end; 
```

**总之**：`FOLDERID_ProgramFiles`从 32/64 位程序访问时为您提供 32/64 位变体，`FOLDERID_ProgramFilesX64`在 64 位应用程序上显式为您提供 64 位版本，并`FOLDERID_ProgramFilesX86`显式为您提供 32 位变体。您可以使用环境变量扩展来获取 32 位应用程序上的 64 位值

# oracle - 如何优化 SQL Developer 中的数据获取？

> ID：11555870
> 
> 赞同：0
> 
> 时间：2012-07-19T07:27:44.257
> 
> 标签：oracle, oracle10g, oracle-sqldeveloper

我正在使用 Oracle SQL Developer 并使用 Wikipedia 数据创建了表，因此数据量非常大并且有 7 个表。我创建了一个使用 JSP 获取和显示数据的搜索引擎，但问题是对于每个查询，应用程序必须访问 4 个表，这使得我的应用程序非常耗时。

我已经为所有表添加了索引，但仍然需要更多时间，所以关于如何优化我的应用程序并减少显示结果所需时间的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:10:19.480

您可以采用多种方法来调整您的应用程序。它可以是在数据库端、前端进行调整，也可以是两者的组合。在数据库端，您可以查看一个物化视图来总结更常搜索的数据。这可以仅用于您的搜索目的，也可以减少结果集的大小和复杂性。您可能还会考虑调整查询本身 - 可能在搜索的相关 WHERE 子句上放置索引或查看非规范化表。在应用程序端 - 大量记录集的检索 - 总是会导致单个记录很大（多列）并且结果集中的数量或记录很多的问题。您可能正在寻找的是应用程序的快速响应时间，因此您的用户不会觉得他们在等待...... 和等待。我见过并使用的一种技术是将结果集检索为 1) ROWID 的记录集并在显示器上对这些 ROWID 进行分页 2) 模拟的“分页”记录集。以块的形式检索记录集。

# excel - Microsoft Excel 将函数放入 IF 函数中

> ID：11555872
> 
> 赞同：2
> 
> 时间：2012-07-19T07:27:50.820
> 
> 标签：excel, function, excel-formula

我正在编写一个`IF`函数，其中一个 [If_value_False] 插槽需要是一个随机函数。

它工作正常，但是一旦发布了随机公式，单元格就不会随机化，IF 函数的行为就好像值 true 中的任何内容都必须是文本，而不是论坛。

这是我拥有的功能：

`=IF(ISBLANK(A2),"","=rand()")`

如果 A2 为空白，则此函数在放置时也应将所有内容留空 如果 A2 不是空白，则应添加一个随机函数。这工作到那里。该单元格不遵循该`=RAND()`功能。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T08:01:51.123

`RAND()`删除函数周围的引号

`=IF(ISBLANK(A2),"",RAND())`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-19T07:56:48.830

我认为您的公式按预期工作-它将单元格的显示内容设置为文本“=rand()”。如果您想将其设置为实际功能，我相信您必须使用 VBA 使用符号

```
ActiveCell.Formula = "=rand()". 
```

# android - setCurrentTab 不工作

> ID：11555873
> 
> 赞同：3
> 
> 时间：2012-07-19T07:27:53.400
> 
> 标签：android, android-tabhost

由于某种原因 setCurrentTab 在第一次之后没有切换标签。这是我使用的代码。

```
private OnClickListener buttonListener = new OnClickListener(){

    @Override
    public void onClick(View v) {
        tabHost.setCurrentTab(Integer.parseInt((String) v.getTag()));

    }
}; 
```

它连接到按钮，每个按钮都有一个标签，该标签等于要显示的选项卡的数量。当第一次单击按钮并调用此方法时，将显示选项卡。我还可以看到它执行了创建选项卡内容的代码。

但是，一旦一个选项卡显示过一次并且我已经移动到另一个选项卡，单击返回它就不起作用了。该方法肯定被调用，并且标签也是正确的。我输入了打印到日志的命令以确认这一点。此外，它第一次工作，所以一定没问题。

任何想法？

完整代码：

```
public class TestTabs extends TabbedScreen implements TabHost.TabContentFactory{

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        initTabs();
    }

    @Override
    protected void initTabs() {

        addTab("0",this);
        addTab("1",this);
        addTab("2",this);
        addTab("3",this);

    }

    /*
     * 
     * @param extras The Bundle received in onCreate when this class is first created, and which contains the initial set of objects to be displayed.
     * @return An array containing all of the objects in the list.
     */
    protected Serializable[] getDataArray(Bundle extras) {
        int size = extras.size();
        Serializable[] data = new Serializable[size];
        for (int i = 0; i < size; i++) {
            data[i] = extras.getSerializable(Integer.toString(i));
        }

        return data;
    }

    @Override
    public View createTabContent(String tag) {

        // Get the data returned from the servelet and display it in the ListView
        Log.d("TestTabs","createTabContent");
         ListView lv = (ListView) findViewById(R.id.list_view);
         List<String> list1Strings = new ArrayList<String>();
         switch (Integer.parseInt(tag)){
            case 0:
                Log.d("TestTabs","Case 0");
                lv.setAdapter(new MyAdapter(this,lv,null));
                break;

            case 1:

                Log.d("TestTabs","Case 1");
                list1Strings.add("Item 21");
                list1Strings.add("Item 22");
                list1Strings.add("Item 23");
                list1Strings.add("Item 24");
                lv.setAdapter(new ArrayAdapter(this, android.R.layout.simple_list_item_1, list1Strings));
                break;

            case 2:

                Log.d("TestTabs","Case 2");
                list1Strings.add("Item 31");
                list1Strings.add("Item 32");
                list1Strings.add("Item 33");
                list1Strings.add("Item 34");
                lv.setAdapter(new ArrayAdapter(this, android.R.layout.simple_list_item_1, list1Strings));
                break;      

            case 3:

                Log.d("TestTabs","Case 3");
                list1Strings.add("Item 41");
                list1Strings.add("Item 42");
                list1Strings.add("Item 43");
                list1Strings.add("Item 44");
                lv.setAdapter(new ArrayAdapter(this, android.R.layout.simple_list_item_1, list1Strings));
                break;      
        }

        return lv;
    }

    protected void addTab(String tabName, TabHost.TabContentFactory tabFactory){
        TabSpec tabSpec = tabHost.newTabSpec(tabName);
        tabSpec.setIndicator(tabName);                // Don't set tab layout since we are going to make it invisible
        tabSpec.setContent(tabFactory);
        tabHost.addTab(tabSpec);

        addButton(tabName);

    }

    protected void addButton(String tabName){
        Button button = (Button) buttonHolder.getChildAt(nextChild);
        button.setText(tabName);
        button.setVisibility(View.VISIBLE);
        button.setOnClickListener(buttonListener);
        nextChild--;
    }

    private OnClickListener buttonListener = new OnClickListener(){

        @Override
        public void onClick(View v) {
            v.setBackgroundResource(R.drawable.tab_selected);
            tabHost.setCurrentTab(Integer.parseInt((String) v.getTag()));
            Log.d("TabbedScreen","Set tab to " + v.getTag());
            View view;
            for (int i=0; i< childCount; i++)
                if ((view = buttonHolder.getChildAt(i)) != v){
                    view.setBackgroundResource(R.drawable.button_tab);
                    view.invalidate();
                }

        }
    };
} 
```

XML:

```
 <?xml version="1.0" encoding="utf-8"?>

  <TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:roundedListView="http://schemas.android.com/apk/res/com.applicat.meuchedet"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
       android:layout_below="@id/content_screen_user_details">
    <LinearLayout
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
        <FrameLayout android:layout_width="fill_parent" android:layout_height="wrap_content">
            <TabWidget android:id="@android:id/tabs" android:layout_width="fill_parent" 
                android:layout_height="wrap_content" android:visibility="gone"/>            
            <LinearLayout android:id="@+id/tabButtons" android:layout_width="wrap_content" android:layout_height="20dip">
                <Button android:layout_height="wrap_content" android:layout_width="0dip" 
                    android:layout_weight="1.0" android:id="@+id/button3" 
                    android:background="@drawable/button_tab" android:visibility="invisible"
                    android:tag="3"/>
                <Button android:layout_height="wrap_content" android:layout_width="0dip" 
                    android:layout_weight="1.0" android:id="@+id/button2" 
                    android:background="@drawable/button_tab" android:visibility="invisible"
                     android:tag="2"/>
                <Button android:layout_height="wrap_content" android:layout_width="0dip" 
                    android:layout_weight="1.0" android:id="@+id/button1" 
                    android:background="@drawable/button_tab" android:visibility="invisible"
                    android:tag="1"/>
                <Button android:layout_height="wrap_content" android:layout_width="0dip" 
                    android:layout_weight="1.0" android:id="@+id/button0" 
                    android:background="@drawable/tab_selected" android:visibility="invisible"
                    android:tag="0"/>
            </LinearLayout> 
        </FrameLayout>

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent">
        <com.applicat.meuchedet.views.RoundedListView
        android:id="@+id/list_view"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:paddingLeft="2dip" 
        android:paddingRight="2dip" 
        android:dividerHeight="1dip"
        android:footerDividersEnabled="true"
        android:listSelector="@drawable/listview_selected_item_background"
        android:fadingEdge="none"
        android:cacheColorHint = "#00000000"
        roundedListView:radius="20"
        roundedListView:border="2"
        />
        </FrameLayout>
    </LinearLayout>
</TabHost> 
```

编辑：

我想知道问题是否在行中：

```
ListView lv = (ListView) findViewById(R.id.list_view); 
```

我每次都取回同一个对象吗？如果是这样，我如何根据FrameLayout中定义的每次获得一个新的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T21:42:20.250

您如何确定分配给 xml 中按钮的值与仅使用 nextChild-- 获得的值相同。

**不是很好的解决方案，你可以测试它。**

```
void addButton(String tabName){ 
Button button = (Button) buttonHolder.getChildAt(nextChild);
button.getTag() !=  String.valueOf(nextChild); ERROR; 
```

**但最好将其设置为与 buttonHolder.getChildAt() 一样**

```
 Button button = (Button) buttonHolder.getChildAt(nextChild);
    button.setTag(String.valueOf(nextChild)); 
```

**修改的：**

```
protected void addButton(String tabName){
    Button button = (Button) buttonHolder.getChildAt(nextChild);
    // ----------- modified -----------
    button.setTag(String.valueOf(nextChild));
    button.setText(tabName);
    button.setVisibility(View.VISIBLE);
    button.setOnClickListener(buttonListener);
    nextChild--;
}

private OnClickListener buttonListener = new OnClickListener(){

    @Override
    public void onClick(View v) {
        v.setBackgroundResource(R.drawable.tab_selected);
        // ----------- modified -----------
        Button btc = (Button)v;
        int idx;
        try {
          idx = Integer.parseInt((String) btc.getTag());
            } catch(NumberFormatException exx) {
            System.out.println("Could not parse " + exx);
            } 
        if ( idx < childCount) {
           Log.d("TabbedScreen","Set tab to " + String.valueOf(idx);
           Button butv;
           for (int i=0; i< childCount; i++) 
            if ( i != idx){
            butv = (Button)  buttonHolder.getChildAt(i);    
            butv.setBackgroundResource(R.drawable.button_tab);
            butv.invalidate();
            }
           tabHost.setCurrentTab(idx);
           tabHost.focusCurrentTab(idx);
        }
        // ----------- modified ----------- 

    }
}; 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T14:20:15.400

为了使用`getTag`，您必须先设置它。所以我相信你忘记在你的方法中**添加**以下行`addButton`：

```
button.setTag(tabName); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T13:04:46.917

可能是 getTag() 创建问题只是将其返回值存储在变量中检查值是否正确（您实际想要的整数否）？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T05:04:43.573

用这个

```
 ListView lv = getListView(); 
```

代替

```
ListView lv = (ListView) findViewById(R.id.list_view); 
```

该`getListView()`方法返回与“当前”布局关联的列表视图。

此外，要使其正常工作，您必须将 xml 中的列表视图 ID 更改为

```
<ListView
          android:id="@+android:id/list" 
```

# c# - 如何正确地从博客文章中提取内容？

> ID：11555875
> 
> 赞同：0
> 
> 时间：2012-07-19T07:27:54.033
> 
> 标签：c#

我正在尝试从这样的博客文章中提取内容：

```
static void GetBlogData (string blogPostUrl)
{
    string blogPostContent = null;

    WebClient client = new WebClient ();
    //client.Headers.Add (HttpRequestHeader.Referer, "http://www.stackoverflow.com");

    TextWriter writer = new StreamWriter ("/home/nanda/projects/mono/common/article");

    try
    {
        blogPostContent = client.DownloadString (blogPostUrl);
    }

    catch (Exception ex)
    {
        Term.PrintLn ("Unable to download\n{0}", ex.Message);
    }

    if (blogPostContent != null) 
    {
        writer.WriteLine (blogPostContent);
    } 

    else
    {
        Term.PrintLn ("No content found");
    }
} 
```

我知道这是一种过于简单的方法，但我想知道为什么我无法从某些 URL 中提取内容，比如它们有块或其他东西。如何检测网站/博客是否阻止我下载其内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T07:35:53.780

A website cannot block you from downloading its content without blocking the site's consultation from a browser.

If your download fails, it means either:

a) your url is wrong

b) the website needs some form of identification and your request lacks something (probably a cookie)

# html - 图片不会在 IE8 中显示，仅在 Chrome 或 Firefox 或 IE9 中显示

> ID：11555877
> 
> 赞同：2
> 
> 时间：2012-07-19T07:28:19.717
> 
> 标签：html, css, image, internet-explorer, internet-explorer-8

我已经坚持了很长时间。

此页面在文本内容的左侧有几个图像图标。这些图像在 Chrome、Firefox 和 IE9 中加载得非常好，但在 IE8 中，它们不会被加载。IE8 完全可以直接加载实际的图片链接，所以我知道这不是图片本身的问题。

事实上，这只发生在那一页上。其他页面能够很好地加载图像。

谁能解释这个巨大的谜团？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T07:36:10.503

问题似乎是css规则

```
.entry-content IMG
{
    max-width:97.5%
} 
```

当我删除它时，图像会显示...不知道为什么会发生这种情况=/

**编辑**

IE8 似乎在设置宽度属性和 css“最大宽度”属性的 img 标签上存在问题......也许只是删除它们。

# mysql - 为 web 应用程序构建推荐引擎（Rails + MySQL + ？）——从哪里开始

> ID：11555883
> 
> 赞同：0
> 
> 时间：2012-07-19T07:28:59.437
> 
> 标签：mysql, ruby-on-rails, algorithm, r, recommendation-engine

我想构建一个推荐引擎来支持一个在 Rails 上运行并将其数据存储在 MySQL 中的网络应用程序......类似于用户点击事物并且他们的反馈更新数据库，然后在某种实时风格的时尚。数量级我认为所有用户每秒可能进行 10 次交互；每天 100 万个数据点。

我的问题是如何构建和处理分析，以便可以快速处理事情。利用我已经知道的，我可以使用一些 Ruby 和 R（RServe，RSRuby）在现有数据集上运行 SVD/clustering/ensemble/whatevermodels，并通过不时采样更新模型/公式，但这看起来像一种非常笨拙的做事方式。有什么更好的方法来做到这一点？直接在 MySQL 中运行数学？使用一些具有出色数学功能的酷 Ruby 库？使用现成的推荐引擎包？

（尽管查看了建议的所有“类似问题”链接，但我对那里的内容明显缺乏认识。讽刺的是。:()

PS：我的背景：有几年 R 的数字人，但完全用于静态/离线数据。Python、Rails 等的新手程序员，但我可以在这方面工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T09:44:34.687

你真的需要实时吗？

我发现大多数这些“实时”案例通常并不真正需要真正的实时，但可以在后台完成。假设您想在网上商店向您的客户提供关于他过去销售的建议，可能是在当前选定的商品（其他人用此商品购买的相关商品）上，您可以简单地以设定的时间间隔预先计算该数据。

对于上述情况，我建议您使用 Rake 任务来完成繁重的工作（过去销售的建议在会话期间不会真正改变 - 相关项目的建议也是相当静态的）。

因此，我会在 Cron 作业或其他与您的 Web 应用程序异步的重复性任务期间计算这些，同时您将生成的（预先计算的）数据提供给活动用户。这样，您还可以在计算的复杂性上获得更多的灵活性，因为您可以运行比 Web 请求最多应该花费的时间更长的时间。

一个示例 rake 任务如下所示：

```
task :calculate_recommendations => :environment do
  // do your calculation
  // you have full access to ActiveRecord here
end 
```

（确保包括，`:environment`否则 Rake 不会为您加载数据库连接。

那么如何进行计算取决于您，但我建议您查看 Gems（如[Recommendify](https://www.ruby-toolbox.com/projects/recommendify)），了解他们使用哪些库来计算建议。也许这对你有帮助。

Also in the [RubyToolbox](https://www.ruby-toolbox.com/) there is a [Recommender-Engine category](https://www.ruby-toolbox.com/categories/Recommendation_Engines) that lists a few gems that are similar and may give you pointers on the right direction.

# sql - 在 UPDATE 中使用 CASE 合并（TSQL）

> ID：11555885
> 
> 赞同：0
> 
> 时间：2012-07-19T07:28:59.510
> 
> 标签：sql, tsql, stored-procedures, sql-server-2008-r2, sql-update

我正在使用 SQL Server 2008 R2，并且我有一个包含两个表的数据库。

**T1**包含原始数据，但只有列**Cost**、**Date**和**AccId**对我来说很有趣。

**T2**包含一些列，例如**Jan**、**Feb**、**Mar**、**Apr**，...和一列**AccId**

我现在需要一个存储过程，每当我更新**T1时，它都会在****T2**的相应列中设置值。它应该总结给定月份中每个**AccId的****成本。****如果我设置 @year = 2012 和 @month = 3，那么它应该使用T2**中每个**AccId的****Cost**总和更新列**Mar**，它位于**T1***和***T2**中。

 *******我现在有一个可用于一个常量列的存储过程。我现在想要`CASE`根据给定的月份选择列。这是我认为应该如何工作的存储过程，但它不起作用：

```
CREATE PROCEDURE [dbo].[SP_Calc]
    @year int,
    @month int
AS

    MERGE INTO T2
    USING (
            SELECT AccId, SUM(Cost) AS CostSum
            FROM T1
            WHERE YEAR(Date) = @year
            AND MONTH(Date) = @month
            GROUP BY AccId
         ) AS source
      ON T2.AccID = source.AccId
    WHEN MATCHED THEN
    UPDATE SET 
     SELECT 
       CASE @month 
        WHEN 1 THEN Jan = source.Cost
        WHEN 2 THEN Feb = source.Cost
        WHEN 3 THEN Mar = source.Cost
        WHEN 4 THEN Apr = source.Cost
        WHEN 5 THEN Mai = source.Cost
        WHEN 6 THEN Jun = source.Cost
        WHEN 7 THEN Jul = source.Cost
        WHEN 8 THEN Aug = source.Cost
        WHEN 9 THEN Sep = source.Cost
        WHEN 10 THEN Oct = source.Cost
        WHEN 11 THEN Nov = source.Cost
        WHEN 12 THEN Dez = source.Cost
        ELSE RAISERROR ('Month is out of range', 18, 1); 
    END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T07:51:27.413

您的来源中没有成本，只有 CostSum

您还需要将设置更改为

```
SET
   Jan = CASE @month  WHEN 1 THEN source.CostSum else T2.Jan end,
   Feb = CASE @month  WHEN 2 THEN source.CostSum else T2.Feb end,
... 
```*******

# android - android - 将图像存储在内部存储器中

> ID：11555886
> 
> 赞同：4
> 
> 时间：2012-07-19T07:29:06.803
> 
> 标签：android, file-io, storage, internal

我试图将从网络下载的图像存储到内部存储。我指的是以下解决方案[android - 将图像缓存存储在内部存储器中并重用它](https://stackoverflow.com/questions/11204087/android-storing-image-cache-in-internal-memory-and-reusing-it?rq=1)

但我仍然遇到异常：

```
07-19 12:05:47.729: E/AndroidRuntime(341): java.lang.IllegalArgumentException: File /data/data/com.yellow.activity/files/-1717792749 contains a path separator 
```

如何从文件路径加载图像：这是我的代码。**image**是 URL 的数组列表。

```
File fileWithinMyDir = getApplicationContext().getFilesDir();
for(int i=0; i<image.size();i++){
                String filename = String.valueOf(image.get(i).hashCode());
                String urlString = image.get(i);
                String PATH = fileWithinMyDir.getAbsolutePath() + "/" +filename;
                infoLog(PATH);
                DownloadFromUrl(PATH, urlString);
                img_path.add(PATH);
        }

 private void DownloadFromUrl(String fileName, String urlStr) 
       {
          try 
          {
           URL url = new URL(urlStr);
           File file = new File(fileName);
           URLConnection ucon = url.openConnection();
           InputStream is = ucon.getInputStream();
           BufferedInputStream bis = new BufferedInputStream(is);
           ByteArrayBuffer baf = new ByteArrayBuffer(50);
           int current = 0;
           while ((current = bis.read()) != -1) 
           {
            baf.append((byte) current);
           }

           FileOutputStream fos = new FileOutputStream(file,true);
           fos.write(baf.toByteArray());
           fos.close();
           infoLog("going  ryt....");
        } 
        catch (IOException e) 
        {
            infoLog("download  "+ e.getMessage());
        }
      } 
```

如何将图像加载到 imageView？我试过了。

```
 File filePath = getFileStreamPath(img_path.get(i));
        imageView.setImageDrawable(Drawable.createFromPath(filePath.toString())); 
```

但它没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-13T05:52:19.827

要保存到内部存储器...

```
 File fileWithinMyDir = getApplicationContext().getFilesDir();  
    try 
          {
              StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder()
              .permitAll().build();
          StrictMode.setThreadPolicy(policy); 
           URL url = new URL("http://t2.gstatic.com  /images?q=tbn:ANd9GcQjZgUffqqe2mKKb5VOrDNd-ZxD7sJOU7WAHlFAy6PLbtXpyQZYdw");
           File file = new File( fileWithinMyDir.getAbsolutePath()  + "/" +"sun.jpg");
           URLConnection ucon = url.openConnection();
           InputStream is = ucon.getInputStream();
           BufferedInputStream bis = new BufferedInputStream(is);
           ByteArrayBuffer baf = new ByteArrayBuffer(50);
           int current = 0;
           while ((current = bis.read()) != -1) 
           {
            baf.append((byte) current);
           }

           FileOutputStream fos = new FileOutputStream(file);
           fos.write(baf.toByteArray());
           fos.close();
        } 
        catch (IOException e) 
        {
            Log.e("download", e.getMessage());
        } 
```

从内部存储器加载图像..

```
 StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder()
          .permitAll().build();
           StrictMode.setThreadPolicy(policy); 
          mImgView1 = (ImageView) findViewById(R.id.mImgView1); 

          Bitmap bitmap = BitmapFactory.decodeFile(fileWithinMyDir.getAbsolutePath()  + "/" +"sunn"+".file extension");
          mImgView1.setImageBitmap(bitmap); 
```

这适用于由于“android.os.networkonmainthreadexception”而显示错误的较新的android

如果你想解决问题，你也可以使用 AsyncTask ......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T07:39:18.090

试试这个方法

```
String PATH = fileWithinMyDir.getAbsolutePath() + filename; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T04:47:36.170

我解决了。替换以下代码

```
File filePath = getFileStreamPath(img_path.get(i)); 
imageView.setImageDrawable(Drawable.createFromPath(filePath.toString())); 
```

和

```
imageView.setImageDrawable(Drawable.createFromPath(img_path.get(i))); 
```

# javascript - 如何解析带有特殊字符的xml？专门用于 & 号

> ID：11555890
> 
> 赞同：3
> 
> 时间：2012-07-19T07:29:11.620
> 
> 标签：javascript, xml, special-characters

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T07:44:13.213

*从替换`&`字符*开始，**然后*替换其他字符。否则，您将从`&`以前的实体（`&lt;`等）替换为`&amp;`*

 *```
string.replace(/&/g, '&amp;amp;') //<= start with
      .replace(/</g, '&lt;')
      .replace(/>/g, '&gt;')
      .replace(/"/g, '&quot;')
      .replace(/'/g, '&apos');
// &apos; may be "\\'",  depends on how te OP wants to use it 
```

[根据评论**编辑**`&amp;amp;`] 用于替换 & 字符*

# c# - 基于矢量的生成器是创建条形码的最佳方式吗？

> ID：11555892
> 
> 赞同：2
> 
> 时间：2012-07-19T07:29:16.580
> 
> 标签：c#, .net, c#-4.0

基于矢量的生成器是生成条形码的最佳方式吗？如果是，它将使用哪些命名空间？它是如何使用的？任何人都可以分享一些这方面的知识吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T07:34:55.590

Assuming that we are talking about [UPC](http://en.wikipedia.org/wiki/Universal_Product_Code) like barcodes, vector based generation is not a must. It's the matter of representing some bits as vertical lines. So, you can easily do this using any graphic library or even using direct access to video buffer. You can represent a single bit with multiple pixels if you need a larger barcode. You don't need to use any interpolation I guess. But if you need a certain size (in pixels/centimeters etc.), vector based solution might be handful but still not a must.

C# source code example for generating scalable barcode graphics.

Steps:

1) Open a new C# Windows Forms sample project named `BarCode`.

2) Add a `PictureBox` and change `BackColor` to `White` and `Dock` to `Fill`.

3) Add `Load` and `Resize` events to `Form1`.

4) Copy & Paste the source code below over `Form1.cs` file.

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace BarCode
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        public bool[] barCodeBits;

        private void Form1_Load(object sender, EventArgs e)
        {
            Random r = new Random();
            int numberOfBits = 100;
            barCodeBits = new bool[numberOfBits];
            for(int i = 0; i < numberOfBits; i++) {
                barCodeBits[i] = (r.Next(0, 2) == 1) ? true : false;
            }

            Form1_Resize(null, null);
        }

        private void Form1_Resize(object sender, EventArgs e)
        {
            int w = pictureBox1.Width;
            int h = pictureBox1.Height;

            pictureBox1.Image = new Bitmap(pictureBox1.Width, pictureBox1.Height);
            Graphics g = Graphics.FromImage(pictureBox1.Image);
            Brush b = new SolidBrush(Color.Black);

            for(int pos = 0; pos < barCodeBits.Length; pos++) {
                if(barCodeBits[pos]) {
                    g.FillRectangle(b, ((float)pos / (float)barCodeBits.Length) * w, 0, (1.0f / (float)barCodeBits.Length) * w, h);
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T13:48:34.180

您不必使用基于矢量的图形来开发条形码。事实上，我已经[在 codeproject 上查看了这个链接，](http://www.codeproject.com/KB/graphics/BarcodeLibrary.aspx?fid=470627&fr=26#xx0xx)因为大部分工作已经为你完成了。这会生成所需条形码的位图。

# java - 解析 JSON 数组

> ID：11555894
> 
> 赞同：0
> 
> 时间：2012-07-19T07:29:35.587
> 
> 标签：java, json, arrays

我正在处理 json 解析，但遇到了问题。这是我的 JSON：

```
"cards":[
{
"id":"bgyr6gh5yr6154",
"checkItemStates":[
],
"closed":false,
"desc":"",
"due":"2012-06-13T10:00:00.000Z",
"idBoard":"4v454g5r1515",
"idChecklists":[
],
"idList":"16562562526",
"idMembers":[
"2848f4g85t15"
],
"idShort":15,
"labels":[
], 
```

我可以获取 JSON 数组卡片中的所有信息（例如“已关闭”、“到期”、...）

例如，我正在做

```
JSONArray msg2 = (JSONArray) all.get("cards"); 
```

然后

```
String boardId = (String) monobjet.get("closed"); 
```

它工作正常！

但

我不知道如何获得“idMembers”！任何想法，因为它是数组中的数组？

```
JSONArray msg2 = (JSONArray) all.get("cards"); 
```

然后

```
for (int i2 = 0; i2 < size2; i2++) {
                  myobject =  (JSONObject) msg2.get(i2);

                  listTemp2.add(jsonObecjtToMyData(myobject));
              }

String boardName = (String) monobjet.get("name"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T08:27:37.027

对于复杂的 json 对象，例如给定的对象，我强烈推荐[gson](http://code.google.com/p/google-gson/downloads/list)它将为您完成所有任务。例如：

```
Gson gson = new GsonBuilder().setPrettyPrinting().create();
Map map = gson.fromJson(inputField.getText(),Map.class); 
```

现在，地图包含您需要的所有东西，因此遍历地图获取 idMembers 将其放入列表中，并在将其类型转换为字符串或任何合适的数据类型时。

您可以单独进行类型转换，但不能对数组进行类型转换。所以这将编译并运行：

```
public class MainApp {
    public Object obj[]={"foo","loo"};
    public Object obj2 = "soo";
    public static void main(String[] args) {
        MainApp mainApp = new MainApp();
        String name = (String) mainApp.obj2;
        System.out.println(name);
    }
} 
```

一些值得思考的食物：

1.  JSONArray 是一个对象。您正在使用的 json 处理程序如何知道它是 JSONArray 或列表？
2.  我们可以做这样的事情吗？：

    ```
    public class MainApp {
        public Object obj[]={"foo","loo"};
        public static void main(String[] args) {
            MainApp mainApp = new MainApp();
            String name[] = (String[])mainApp.obj;
            for(String str : name){
                System.out.println(str);
            }
        }} 
    ```

请使用 gson 并为自己节省很多痛苦。对于复杂的 pojo，您可以使用[ObjectMapper](http://jackson.codehaus.org/1.0.1/javadoc/org/codehaus/jackson/map/ObjectMapper.html)。

# java - 为什么我不能只声明所有方法都是静态的？

> ID：11555897
> 
> 赞同：4
> 
> 时间：2012-07-19T07:29:40.773
> 
> 标签：java

我被问到这个问题，为什么我不能将所有方法声明为静态？你能在这里给我一个解释吗？谢谢。

我相信当您将方法设为静态时，它不能访问非静态成员？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T07:31:52.020

你可以。没有理由从这样的类中实例化对象。任何状态在 JVM 中都是全局的。

您的提问者可能将“不能”与“不应该”混淆了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-19T07:31:42.883

静态方法不能访问实例变量。:)

```
public class MyStaticExample{
  private String instanceVariable = "Hello";
  private static String STATIC_VARIABLE = "Hello too";

  public static void staticMethod(){
    System.out.println(this.instanceVariable); // this will result in a compilation error.
    System.out.println(STATIC_VARIABLE); // this is ok
  }

  public void instanceMethod(){
    System.out.println(this.instanceVariable); // this is ok
    System.out.println(STATIC_VARIABLE); // this is ok
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-19T07:34:53.993

您**可以将**所有方法声明为，`static`但随后您的方法将变为类级别。假设您创建了 10 个具有不同状态的对象，其中状态由`properties`. 那么在这种情况下，您***将无法***`state`使用`static`方法获取对象。

```
Object obj;
public static Object getState(){

    return obj; // compile time error Cannot make a static reference to the non-static field 
} 
```

将所有方法设为静态是**实用程序类**中的好习惯。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-19T07:35:39.727

你可以。但结果将是一个使用现有类的结构化程序（想想 C、Pascal），而不是真正的 OOP。面向对象是 Java 编程的惯用方法，因此请尽量减少代码中的静态关键字数量。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-19T07:42:55.773

我将从课程：[面向对象编程概念](http://docs.oracle.com/javase/tutorial/java/concepts/)开始，然后从 JDK 中选择几乎所有类。一个简单的开始是[Boolean](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/Boolean.java?av=f)，它需要两个实例，一个用于 TRUE，一个用于 FALSE，无法使用静态方法实现。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-19T07:36:25.163

没有这样的克制。您可以将类中的所有方法设为静态。在 C# 中，您甚至可以将类本身定义为静态（要求其中的所有方法都是静态的）。

这更多的是您想通过该课程实现什么的问题。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-19T07:41:00.900

您可以将所有方法定义为静态的。这取决于你是否应该或不应该的上下文。最好的选择是制作静态库方法。例如，下面是我创建的 TestHelper 实用程序类 -

```
public class TestHelper {
    /**
     * Method echo.
     * 
     * @param heading
     *            String
     */
    public static void echo(String heading) {
        System.out.println("+++++++++++++++++++++++++");
        System.out.println("++++++ " + heading + " ++++++");
    }

    public static void end() {
        System.out.println("=========================");
    }

    public static void mark() {
        System.out.println("@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@");
    }

    /**
     * Method spot.
     * 
     * @param string
     *            String
     */
    public static void spot(Object string) {
        System.out.println("*****_______" + string + "_______******");
    }

    /**
     * This is a stub method
     */
    public static void stub() {

    }

    public static void error(String string) {
        System.out.println("^^^^^^^^^^^Error Begining^^^^^^^^^^^^^^");
        System.out.println(string);
        System.out.println("^^^^^^^^^^^Error End^^^^^^^");
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-19T07:34:59.770

您可以将所有内容声明为静态。但是什么样的正常比例对象模型需要所有方法都是静态的，这是一个大问题

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-07-19T07:38:09.463

是的，你可以取决于你的需要。但是请记住“this”关键字在这种情况下将不起作用，您无法访问公共成员！

# iphone - 无法正确处理会话

> ID：11555900
> 
> 赞同：0
> 
> 时间：2012-07-19T07:29:58.417
> 
> 标签：iphone, facebook, access-token

我正在使用 Xcode 4.3.1

我使用下面的代码来获取 Facebook 访问令牌。

在 Appdelegate 中：

```
facebook=[[Facebook alloc]initWithAppId:appid andDelegate:first];
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
if ([defaults objectForKey:@"FBAccessTokenKey"] 
    && [defaults objectForKey:@"FBExpirationDateKey"]) 
{
   facebook.accessToken = [defaults objectForKey:@"FBAccessTokenKey"];
   facebook.expirationDate = [defaults objectForKey:@"FBExpirationDateKey"];
   accessToken=facebook.accessToken;
   date=facebook.expirationDate;
}
 - (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation {
    return [ self.facebook handleOpenURL:url];
} 
```

Facebook SSO（登录）在 viewController 中：

-(IBAction)LoginClick:(id)sender {

```
 accesstoken=xapp.accessToken;
    date=xapp.date;
    [self fbDidExtendToken:xapp.accessToken expiresAt:xapp.date];  //For extending tokens
    NSLog(@"accesstoken:%@",accesstoken);
    if (![xapp.facebook isSessionValid]) 
    {
        [xapp.facebook authorize:permissions];
    }
    else 
    { 
        [xapp.facebook authorize: nil];

    }
} 
```

在这里我无法正确处理会话。我的要求是第一次用户必须登录并且他应该授权应用程序。一旦他完成了应用程序不应该要求授权。现在它每次都要求授权我正在运行应用程序。我该如何解决这个问题.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T08:15:01.510

登录后是否将令牌保存到用户默认值？

```
 // this is a delegate method of FBSessionDelegate, called after user successfully login
- (void)fbDidLogin 
{
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [defaults setObject:[xapp.facebook accessToken] forKey:@"FBAccessTokenKey"];
    [defaults setObject:[xapp.facebook expirationDate] forKey:@"FBExpirationDateKey"];
    [defaults synchronize];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T07:41:31.747

使用最新的 FBGraph API.... 检查此链接[如何从当前应用程序通过邮件、twitter 和 facebook 共享或发布？](https://stackoverflow.com/questions/10860652/how-to-share-or-post-by-mail-from-current-app/10862865#10862865)进一步查询。这篇文章包括 FB、Twitter 和电子邮件的所有最新技术。

# php - 每日同步演示站点数据库到实时站点数据库

> ID：11555902
> 
> 赞同：0
> 
> 时间：2012-07-19T07:30:00.537
> 
> 标签：php, mysql, phpmyadmin

我想每天将 PHP MYSQL 演示站点数据库同步到实时站点数据库。有任何PHPcode吗？

同样在实时站点中，创建了一个每日更新`xmlhandler.php`文件。但是在运行时显示错误。

> 致命错误：在第 32 行的 /home/www2maint/www/news/XMLHandler.php 中调用未定义函数 curl_init()

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T07:45:01.280

您可能希望为此使用`mysqldump`并`mysqlrestore`与 cronjob 结合使用。PHP 不是解决此问题的正确工具。

# ruby - 无法加载此类文件 - 所有 gemfile

> ID：11555905
> 
> 赞同：0
> 
> 时间：2012-07-19T07:30:18.663
> 
> 标签：ruby, windows, gem, gemfile

我正在运行 Windows 7 64 位，并已通过位于 ruby​​installer.org 的 ruby​​installer 安装了 ruby​​，我正在尝试

```
require 'anygemfile' 
```

我越来越

```
/dir/dir/file:#::in `require': cannot load such file -- anygemfiles (LoadError). 
```

我可以加载交互式 ruby​​ 并要求 'redis' => true。然而 require 'redis' 返回上述错误（s/anygemfiles/redis）。链轮也一样，撬。任何 gem 文件。

```
ruby -v               => 1.9.3
gem -v                => 1.8.16
which redis           => C:\correct\directory
gem install anygem    => installs gem 
```

我正在运行的确切代码在 linux 以及其他 Windows 机器上开箱即用。

通过 ruby​​installer 重新安装 ruby​​ 后，我现在得到：

```
C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:247:in `to_specs': Could not find redis (>= 0) amongst [bigdecimal-1.1.0, io-console-0.3, json-1.5.4, minitest-2.5.1, rake-0.9.2.2, rdoc-3.9.4] (Gem::LoadError)
from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:256:in `to_spec'
from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems.rb:1231:in `gem'
from C:/Users/Tom/workspace/ricrb/asdf.rb:1:in `<main>' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T13:05:33.833

我也解决了我的问题。

最初我安装了ruby1.9.3。之后我安装了 rails3 软件：这就是问题所在

bin 文件发生冲突。

我通过卸载ruby1.9.3的初始安装解决了它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T08:36:12.287

再次重新安装以确保我没有遗漏任何内容后，可以选择将 ruby​​ 可执行文件添加到路径中。我在安装过程中错过了这一点。

# ios - 在后台收集加速度计数据

> ID：11555906
> 
> 赞同：6
> 
> 时间：2012-07-19T07:30:18.780
> 
> 标签：ios, background, accelerometer

我正在开发一个 iOS 4 + 应用程序，它可以将 iPhone 上收集的加速度计数据传输到服务器。即使应用程序进入后台，应用程序也应该收集数据（我想知道这个人的动作）。

在网上做了一些研究，得知该应用程序在关闭后10分钟就被杀死，并且无法像在Android上那样实现（使用服务）。

只有一些任务可以在后台运行，如音频播放器、VOIP 或地理定位。我在 Internet 上的某个地方读到，我们可以使用变通方法让应用程序在后台运行。它使用音频播放器，播放静音。但是，Apple 似乎不接受这种解决方法。

你看到我的问题有什么解决办法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-25T05:24:25.827

如果你注册你的应用来监听位置，并使用 CoreMotion，你可以在后台获取加速度计数据。

这与以下内容重复：[iPhone 上的 Nike+ GPS 如何在后台接收加速度计更新？](https://stackoverflow.com/questions/8716466/how-nike-gps-on-iphone-receives-accelerometer-updates-in-the-background)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-19T13:19:40.997

从 iOS 9.0 开始，我们得到了 CMSensorRecorder，即使应用程序被杀死，它也可以以 50Hz 记录加速度计数据。Apple 文档中的更多信息。

[CMSensor 文档](https://developer.apple.com/documentation/coremotion/cmsensorrecorder)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-19T07:39:58.020

加速计不适用于后台线程。阅读这篇[MacWorld](http://www.macworld.com/article/1164616/how_ios_multitasking_really_works.html)文章，了解什么是可能的，什么不是。

# ruby-on-rails - 验证部分的总和等于父/子记录的总和

> ID：11555910
> 
> 赞同：2
> 
> 时间：2012-07-19T07:30:30.497
> 
> 标签：ruby-on-rails, ruby-on-rails-3, validation, associations

我有 2 个模型：

```
Invoice has_many :lines

Line belongs_to :invoice 
```

我想确保`Line`给定`Invoice`的总和与相关的总和匹配`Invoice`。

我试过这个：

```
validate :total_amount
def total_amount
    inv_id = self.invoice_id
    target_amount = Invoice.find(inv_id).total
    total_lines = Line.where(invoice_id: inv_id).sum(:line_value)

    errors.add(:total, " should be lower or equal to the total amount of the invoice") if total_lines > target_amount
end 
```

但

1.  它不适用于新对象（只是更新）
2.  即使对于更新，它也会系统地引发错误

我还看到一个关于 AssociatedValidator 的问题，但我无法掌握如何使用它:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T07:49:43.443

目前尚不清楚您究竟想要验证什么，因为您的示例与您之前描述的不同。

我认为这样的事情应该工作，使用[before_add 回调](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#label-Association+callbacks)：

```
class Invoice < AR::Base
  has_many :lines, :before_add => :validate_total

  def validate_total(invoice, line)
    totals = invoice.lines.sum(:line_value)

    if totals + line.line_value > invoice.total
      invoice.errors.add(:total, " should be lower or equal to the total amount of the invoice")
      return false # I think you can alternatively raise an exception here
  end
  ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T09:29:55.240

我可能解释错了，但如果`total`是表中的一列`invoices`，我建议将其删除。`Line`相反，将其作为一种方法，并让该方法将价格加上任何调整加起来。否则，您在数据库中有重复。这样你就不需要验证任何东西了:)

更一般地说，在相关模型上添加验证`ActiveRecord`效果不是很好。在某些情况下，这几乎是不可能的，而在其他情况下——很难做到正确。我想你已经看到它很容易出错。我建议避免它并尝试设计您的数据库，以便您不需要（`Invoice#total`在这种情况下作为一种方法）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-30T18:48:55.233

使用`accepts_nested_attributes_for`. 但答案只是说*这很难，如果不是不可能的话！*. `accepts_nested_attributes_for`是一种有点复杂的方法，但它有效 - 除非您尝试基于子模型的计算来验证模型。我可能已经找到了解决计算问题的方法。

我正在开发一个基于网络的复式记账应用程序，它*具有*以下基本模型；

```
class Account < ApplicationRecord
  has_many :splits
  has_many :entries, through: :splits
end

class Entry < ApplicationRecord
  has_many :splits, -> {order(:account_id)}, dependent: :destroy, inverse_of: :entry

  validate  :balanced?
end

class Split < ApplicationRecord
  belongs_to :entry, inverse_of: :splits
  belongs_to :account

  validates_associated :account
  validates_associated :entry
end 
```

条目（交易）必须至少有两个拆分，拆分中的金额属性（或借方/贷方）之和必须等于 0。我虽然`validate :balanced?`会处理它，但明显的 Javascript 错误允许输入不平衡。我还没有找到错误，但由于条目不平衡，我无法更新它，因为`valid?`在我尝试添加的新拆分上不起作用（返回 false）。

分类帐`accepts_nested_attributes_for`表单已经退出了一些不应允许提交不平衡交易的 Javascript。均衡？创建时未设置错误，但更新时出现错误。我修复它的方法不是使用不起作用的验证，而是依赖与以下方法一起调用的方法`@entry.update(entry_params)`：

```
class Entry < ApplicationRecord
  has_many :splits, -> {order(:account_id)}, dependent: :destroy, inverse_of: :entry

  # validate  :balanced? # took this out since its after the fact, balanced? method can still be called

  accepts_nested_attributes_for :splits, 
    :reject_if =>  proc { |att| att[:amount].to_i.zero? && att['account_id'].to_i.zero?},
    allow_destroy: true

    def valid_params?(params)
      split_sum = 0
      params_hash = params.to_h
      params_hash[:splits_attributes].each{|k,s| split_sum += s[:amount].to_i if s[:_destroy].to_i.zero?}
      unless split_sum.zero?
        errors.add(:amount, "Unbalanced: debits, credits must balance")
        return false
      else
        return true
      end
    end
  end
end

# update action from Entry Controller

def update
  respond_to do |format|
    if @entry.valid_params?(entry_params) && @entry.update(entry_params)
      format.html { redirect_to account_path(session[:current_acct]), notice: 'Entry was successfully updated.' }
      format.json { render :show, status: :ok, location: @entry }
    else
      # ... errr
    end
  end
end 
```

同样，这只不过是验证参数与不适用于这种情况的模型验证。

这可能与答案 2 大致相同，但不使用回调，只是调用控制器

# javascript - 使用fancybox时如何从这个span元素创建一个javascript变量？

> ID：11555911
> 
> 赞同：1
> 
> 时间：2012-07-19T07:30:30.353
> 
> 标签：javascript, jquery, fancybox, fancybox-2

我可以使用一些帮助来隔离一个或两个元素并将它们放入 javascript 变量中。我仍在学习如何正确识别 DOM 中的事物，我必须想象我正在尝试做的事情是可能的。

考虑以下：

```
$('.fancybox').fancybox({
    'autoScale': false,
    'type': 'iframe',
    'padding': 0,
    'closeClick': false,
    helpers: {
        overlay: {
            closeClick: false
        }
    },
    afterShow: function () {
        $("#overlay_content_top").show();
        $("#overlay_content_bottom").show();
    },
    afterClose: function () {
        $("#overlay_content_top").hide();
        $("#overlay_content_bottom").hide();
    }
});

<div class ="example">
<a class="fancybox" href="http://my-iframe.example"><img src="myimage.jpg" width="x" height="y" /></a>
**<span>Important Information I need</span>**
</div> 
```

我需要将*.example 跨度*中的 html放入一个变量中，然后将其应用于在幻想框中显示的内容。

所以在疯狂的伪代码中是这样的：

```
var getname = $(this).html('.example span');

$('.inherit_span').html(getname); 
```

我在页面上有二十个不同的项目可以点击，我不想为每个项目生成单独的 id 或名称，我宁愿在调用 fancybox 函数时从 span 中获取 html，然后将该名称应用于灯箱显示中的另一个元素。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T07:34:56.123

Just change:

```
var getname = $(this).html('.example span'); 
```

to:

```
var getname = $('.example span').html(); 
```

or:

```
$('.inherit_span').html($('.example span').html()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T07:36:12.437

其实你很亲近！首先，您必须选择获取您的`span`. 您可以通过使用`text()`方法或`html()`方法来获取它的文本或HTML！

```
var html = $('div.example > span').html() 
```

然后你必须得到你想要放置文本的元素，并使用`html()`括号内的值/变量的方法来设置它。

```
$('.inherit_span').html(html); 
```

使用`html()` *不*带值**获取**值，使用`html()` *带*值**设置**值！

该`text()`方法的工作原理几乎相同，但会过滤掉任何 HTML 格式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T07:56:33.870

您可能会遇到`<a>`多个`<span>`标签后面有多个标签的情况，在这种情况下，请使用回调中的`.next()`方法，例如`beforeShow`

```
beforeShow: function(){
 var getname = $(this.element).next('span').html();
 $('.inherit_span').html(getname);
} 
```

**注意**：为了使变量`getname`在回调之外可用，请在脚本开头声明它，例如

```
<script>
var getname;
.
. 
```

# ios - 如何按日期降序对 NSDate 进行排序，但在该日期内时间升序？

> ID：11555912
> 
> 赞同：2
> 
> 时间：2012-07-19T07:30:33.227
> 
> 标签：ios, nsdate

我成功地使用 NSFetchedResultsController 和 NSSortDescriptor 排序到一个表中，每个日期都有一个部分，以便今天的日期首先出现（降序日期顺序）。

但是，在该部分中，我希望按升序对时间进行排序。

这是我当前的代码，没有按时间排序：

```
//Set up the fetched results controller.
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName:kEntityHistory inManagedObjectContext:global.managedObjectContext];
fetchRequest.entity = entity;

// Sort using the timeStamp property..
NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"date" ascending:NO];
NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortDescriptor, nil];

fetchRequest.sortDescriptors = sortDescriptors;

//The following is from:
//http://stackoverflow.com/questions/7047943/efficient-way-to-update-table-section-headers-using-core-data-entities

NSString *sortPath = @"date.dayDate";

self.fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:global.managedObjectContext sectionNameKeyPath:sortPath cacheName:nil];

fetchedResultsController.delegate = self; 
```

请问如何更改代码以在此日期部分中按时间升序添加排序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T12:20:25.530

我认为你需要一个特殊的比较器。使用[initWithKey:ascending:comparator:](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSSortDescriptor_Class/Reference/Reference.html#//apple_ref/occ/instm/NSSortDescriptor/initWithKey%3aascending%3acomparator%3a)初始化您的排序描述符并作为比较器传递：

```
^(id obj1, id obj2) {
    NSDateComponents *components1 = [[NSCalendar currentCalendar] components:NSHourCalendarUnit|NSDayCalendarUnit fromDate:obj1];
    NSInteger day1 = [components1 day];
    NSInteger hour1 = [components1 hour];

    NSDateComponents *components2 = [[NSCalendar currentCalendar] components:NSHourCalendarUnit|NSDayCalendarUnit fromDate:obj2];
    NSInteger day2 = [components2 day];
    NSInteger hour2 = [components2 hour];

    NSComparisonResult res;
    if (day1>day2) {
        res = NSOrderedAscending;
    } else if (day1<day2) {
        res = NSOrderedDescending;
    } else {
        if (hour1>hour2) {
            res = NSOrderedDescending;
        } else {
            res = NSOrderedAscending;
        }
    }
    return res;
} 
```

这应该让您了解如何实现这一点，您将需要添加分钟和秒组件，并处理小时、分钟和秒相等的情况。

# java - android游戏开发中使用的东西

> ID：11555913
> 
> 赞同：2
> 
> 时间：2012-07-19T07:30:44.170
> 
> 标签：java, android

我已经为 android 编程至少一个月了，并且已经创建了一个应用程序但尚未发布。我的问题是与 eclipse 或一些 3rd 方软件一起创建安卓游戏的最佳工具是什么？不，我不想要 3d 游戏。我更喜欢故事基础游戏。我想创建一个简单的 RPG 游戏，如最终幻想（*每个游戏迷都知道这一点*），它简单而不混乱。关于使用什么的任何建议？或如何开始？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T07:32:32.673

查找AndEngine

[http://www.andengine.org/](http://www.andengine.org/)

*   一些帮助您入门的[教程](http://andengine.wikidot.com/getting-started-with-andengine)

*   AndEngine的 [源代码](https://github.com/nicolasgramlich/AndEngine)

# android - 使用安卓手机作为“3G转wifi”转发设备，可行吗？请指点

> ID：11555914
> 
> 赞同：2
> 
> 时间：2012-07-19T07:30:50.150
> 
> 标签：android, networking, tcp, wifi, 3g

我想让我的“计算机 A”（互联网）通过 3G 网络（TCP、互联网）连接到安卓手机，

而安卓手机连接到本地wifi（没有互联网）。我有“另一台计算机 B”也连接到本地 wifi（没有互联网）。

如何使计算机A和计算机B能够直接相互通信？

给我一些提示..谢谢！

更新信息1：计算机B必须连接到本地wifi网络

更新信息 2：我想到的一个解决方案是开发一个小型实用程序应用程序，只需将所有传入数据包（来自 3G）转发到本地 wifi 中的专用 ip。可行的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T07:53:06.567

我的猜测是安装其中一个网络共享应用程序，它将您的安卓设备变成计算机 B 可以连接的热点（如果我正确理解了这个问题）。

# c# - 模拟使用 out 参数的函数

> ID：11555915
> 
> 赞同：17
> 
> 时间：2012-07-19T07:30:52.787
> 
> 标签：c#, unit-testing, moq

我有一个使用 out 参数的函数。我怎样才能模拟这个功能？

我的功能是：

```
GetProperties(out string name, out string path, out string extension); 
```

在我的原始代码中，我这样做：

```
string Name;
string Path;
string Extension;
MyObject.GetProperties(out Name, out Path, out Extension); 
```

现在，我怎么能嘲笑这个？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-19T07:38:39.650

您应该在调用这样的方法之前分配变量的值：

```
string Name = "name";
string Path = "path";
string Extension = "extension";
mock.Setup(item => item.GetProperties(out Name, out Path, out Extension))
    .Returns(someReturnValue); 
```

尽管我更喜欢在您的返回类型中返回这些值，而不是使用这么多的输出参数。

# php - 如何使用 PHP 重定向并取消设置任何现有的获取参数

> ID：11555924
> 
> 赞同：0
> 
> 时间：2012-07-19T07:31:18.823
> 
> 标签：php, html, redirect, get

*如何使用 PHP 重定向回我的起始页面以清除我的 GET 参数？*我制作了一个表格，填写后将发送到一个 .php 文件，该文件处理 GET 数据并将其保存到数据库中。之后，我使用 header("Location: redirect.php")，然后再次重定向到 ("Location: main.php")。在这些都被执行之后，我被发送回一个看起来像主页的东西，但是当我回来时我得到了 url formSaver.php?alot=ofparamters。如果我单击某些东西，我将进入 main.php 部分并且它可以工作。但是，如果有人在点击任何内容之前按 F5，我将获得双重输入。有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T07:33:08.650

```
header( "Location: http://www.your-site.com/" );
die; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T07:37:29.337

`header( "Location: your-previous-page" );`

在您的 Previus 页面中：

```
<?php if(isset($_GET)) {unset($_GET);} ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-23T17:05:58.660

如果您不想对当前主机或路径进行硬编码：

```
$uriParts = explode('?', $_SERVER['REQUEST_URI'], 2);
header("Location:" . $uriParts[0]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-05T16:53:53.777

我认为 $_GET 方法一直可用。你可以通过清除这些参数

```
unset($_GET); 
```

是否应该通过 isset 操作进行检查。像;

```
if(isset($_REQUEST['logout'])){ 
      session_destroy();
      header("Location: Your page ");
   } 
```

# spring - primefaces“selectOnemenu”组件通过ajax请求从数据库加载数据

> ID：11555927
> 
> 赞同：0
> 
> 时间：2012-07-19T07:31:25.873
> 
> 标签：spring, hibernate, jsf-2, primefaces

我使用 spring3 和 hibernate3 和 jsf2 和 primefaces ..

当我尝试从数据库加载数据时遇到问题，我得到空指针异常，因为会话工厂为空！

我认为问题来自：

当我在 viewscoped 中创建 managedBean 时，它给了我“不可序列化异常”，所以我让所有类成员都实现可序列化，但它也给了我不可序列化的异常，但对于此类“org.springframework.orm.hibernate3.LocalSessionFactoryBean”，所以我使会话工厂瞬态。

在我使会话工厂瞬态后，应用程序工作正常，但如果我发出 ajax 请求，会话工厂为空，所以我有空指针异常！！！

任何帮助将不胜感激..

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T17:31:37.760

没有真正创建一个新的会话工厂

您正在使用弹簧，所以参考树必须是什么

ManagedBean -> Spring Service -> Spring Repository

您的托管 bean 应该引用服务层（单例）。您应该将此引用标记为瞬态并从方法挂钩中的应用程序上下文中获取。

服务 bean 将始终从上下文中可用，您不必重新创建任何实例，只需从上下文中取回它。

至于休眠，它应该在存储库层中，并且由于您已保护服务层免受序列化存储库将不会被序列化，因此不会出现上述问题。

```
@ViewScoped
public class ManagedBean implements Serializable {

  @Autowired private transient Service service;

}

@Service
public class ServiceImpl implements Service{

 @Autowired private Repository repository;

}

@Repository
public class RepositoryImpl extends HibernateDaoSupport implements Repository {

  //here you can have hibernate session factory injected for dao support
} 
```

希望这可以帮助 ！！！！！

# ruby-on-rails - 渲染：多态嵌套资源的动作

> ID：11555930
> 
> 赞同：1
> 
> 时间：2012-07-19T07:31:35.937
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个用户的多态嵌套资源

```
companies/:id/users/new
departments/:id/users/new 
```

现在，如果创建操作成功，我可以重定向到正确的路径（我重定向回新路径），但如果失败，我如何再次呈现同一页面，因为我需要显示错误并让填充的值保持原样。'render action: new' 默认为 Companies/:id/users/new

```
if @user.save
   redirect_to send("new_#{@parent.class.to_s.underscore}_user_path", @parent
else
   render action: new 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T08:01:01.603

您可以尝试通过值制作路线

`redirect_to [:new, @parent, :user]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T16:56:14.680

没关系，如果它对某人有帮助，那么在我的嵌套表单中，我使用了@company、@user 而不是@parent、@user。应该是

```
form_for [@parent, @user] do |f| 
```

现在它工作正常。感谢所有的答案。

# css - 使用 Twitter Bootstrap 使页脚粘在页面底部

> ID：11555931
> 
> 赞同：79
> 
> 时间：2012-07-19T07:31:35.927
> 
> 标签：css, twitter-bootstrap

我有一些网页内容不多，页脚位于页面中间，但我希望它位于底部。

我已将所有页面放在“持有人”中

```
#holder {
  min-height: 100%;
  position:relative;
} 
```

然后为我的页脚使用以下 CSS

```
ul.footer {
  margin-top: 10px;
  text-align: center;
}

ul.footer li {
  color: #333;
  display: inline-block;
}

#footer {
  bottom: -50px;
  height: 50px;
  left: 0;
  position: absolute;
  right: 0;
} 
```

我的页脚的 html

```
<div class="container">
  <div class="row">
    <div class="span12">
      <div id="footer">
        <ul class="footer">
          <li>Website built by <a href="#">Fishplate</a></li>&nbsp;&nbsp;
          <li>Email:exampleemail@gmail.com</li>
        </ul>
      </div>
    </div>
  </div>
</div> 
```

我想保持页脚流畅。

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2014-02-06T13:22:15.500

只需将类 navbar-fixed-bottom 添加到您的页脚。

```
<div class="footer navbar-fixed-bottom"> 
```

Bootstrap 4 的更新 -

正如 Sara Tibbetts 所提到的 - 课程是固定底部的

```
<div class="footer fixed-bottom"> 
```

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2012-07-19T09:43:22.027

正如评论中所讨论的，您的代码基于此解决方案：[https ://stackoverflow.com/a/8825714/681807](https://stackoverflow.com/a/8825714/681807)

该解决方案的关键部分之一是添加`height: 100%`到，`html, body`因此`#footer`元素具有可以使用的基本高度 - 您的代码中缺少这一点：

```
html,body{
    height: 100%
} 
```

您还会发现使用时会遇到问题，`bottom: -50px`因为当内容不多时，这会将您的内容推到首屏。您必须添加`margin-bottom: 50px`到`#footer`.

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2017-10-17T07:31:28.440

上面提到的大多数解决方案都对我不起作用。但是，下面给出的解决方案工作得很好：

```
<div class="fixed-bottom">...</div> 
```

[资源](https://getbootstrap.com/docs/4.0/utilities/position/#fixed-bottom)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-07-19T09:07:29.530

[http://bootstrapfooter.codeplex.com/](http://bootstrapfooter.codeplex.com/)

这应该可以解决您的问题。

```
<div id="wrap">
<div id="main" class="container clear-top">
<div class="row">
<div class="span12">
Your content here.
</div>
</div>
</div>
</div>
<footer class="footer" style="background-color:#c2c2c2">
</footer> 
```

CSS：

```
html,body
{
height:100%;
}

#wrap
{
min-height: 100%;
}

#main
{
overflow:auto;
padding-bottom:150px; /* this needs to be bigger than footer height*/
}

.footer
{
position: relative;
margin-top: -150px; /* negative value of footer height */
height: 150px;
clear:both;
padding-top:20px;
color:#fff;
} 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-10-10T17:39:33.433

这是一个使用 css3 的示例：

**CSS：**

```
html, body {
    height: 100%;
    margin: 0;
}
#wrap {
    padding: 10px;
    min-height: -webkit-calc(100% - 100px);     /* Chrome */
    min-height: -moz-calc(100% - 100px);     /* Firefox */
    min-height: calc(100% - 100px);     /* native */
}
.footer {
    position: relative;
    clear:both;
} 
```

**HTML：**

```
<div id="wrap">
    <div class="container clear-top">
       body content....
    </div>
</div>
<footer class="footer">
    footer content....
</footer> 
```

[小提琴](http://jsfiddle.net/vcarvalho/637j2cfw/2/)

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2015-07-01T12:58:45.083

使用引导类对您有利。`navbar-static-bottom`把它留在底部。

```
<div class="navbar-static-bottom" id="footer"></div> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-01-08T21:54:17.410

它可以通过 CSS flex 轻松实现。具有如下 HTML 标记：

```
<html>
    <body>
        <div class="container"></div>
        <div class="footer"></div>
    </body>
</html> 
```

应使用以下 CSS：

```
html {
    height: 100%;
}
body {
    min-height: 100%;
   display: flex;
   flex-direction: column;
}
body > .container {
    flex-grow: 1;
} 
```

这是可以使用的 CodePen：[https ://codepen.io/webdevchars/pen/GPBqWZ](https://codepen.io/webdevchars/pen/GPBqWZ)

# c++ - 不同类型的函数作为 C++ 中的参数

> ID：11555934
> 
> 赞同：1
> 
> 时间：2012-07-19T07:31:45.500
> 
> 标签：c++, c, function, arguments

我正在编写一个程序，我需要针对不同的情况使用不同的功能，并且我需要广泛使用这些功能。所以，我认为最好的方法是将函数作为参数传递。两者都是**双重**功能。但是，每个函数所需的参数数量是不同的。我该怎么做？我在下面给出程序的基本场景。

```
if (A > B){
func(double x, double y, double func_A(double a1, double a2));
}else{
func(double x, double y, double func_B(double b1, double b2, double b3));
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T07:35:22.403

You can overload the function `func` to take different callbacks as parameters:

```
double func_A(double a1, double a2)
{
    return 0;
}
double func_B(double a1, double a2, double a3)
{
    return 0;
}

typedef double (*FUNCA)(double,double);
typedef double (*FUNCB)(double,double,double);

void func(double x, double y, FUNCA)
{
}
void func(double x, double y, FUNCB)
{
}

int main()
{
    func(0,0,func_A); //calls first overload
    func(0,0,func_B); //calls second overload
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T09:35:32.757

一种简单的方法是让 func 的重载调用一个简单的实现函数，该函数接受指向`double(double, double)`and`double(double, double, double)`的单独指针，不适用的将是 NULL ...

```
void func_impl(double x, double y, double (*f)(double, double), double (*g)(double, double, double))
{
    ...
    if (...)
         f(a, b);
    else
         g(a, b, c);
    ...
}

void func(double x, double y, double (*f)(double, double))
{
    func_impl(x, y, f, NULL);
}

void func(double x, double y, double (*g)(double, double, double))
{
    func_impl(x, y, NULL, g);
}

void caller(...)
{
    ...
    if (A > B)
        func(x, y, func_A);
    else
        func(x, y, func_B);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T08:38:14.083

C++ 中允许函数重载，所以只需使用它。Luchian Grigore 给你举了一个例子

# windows - 使用 Eclipse 从 git 存储库下载源代码？

> ID：11555936
> 
> 赞同：2
> 
> 时间：2012-07-19T07:31:48.513
> 
> 标签：windows, eclipse, git

> **可能重复：**
> [Eclipse 的 Git 插件](https://stackoverflow.com/questions/302089/git-plugin-for-eclipse)

我有一个关于谷歌代码的项目要下载。有没有办法`git clone project_url`在eclipse中使用并下载源代码？

有没有插件可以做到这一点？我正在使用 Eclipse 3.4.2。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T07:37:24.840

您可以使用[Egit 插件](http://www.eclipse.org/egit/)

您可以从 Eclipse Marketplace（Help-> Eclipse Market Place）将其添加到 Eclipse，然后使用（File->Import->Git->Projects From Git）菜单选项导入 Git 项目

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T08:59:07.827

尝试在这里找到它：http: [//www.eclipse.org/egit/](http://www.eclipse.org/egit/)

兄弟，蒂姆

# shell - 运行 CakePHP Shell 脚本

> ID：11555942
> 
> 赞同：5
> 
> 时间：2012-07-19T07:32:02.487
> 
> 标签：shell, cakephp, cakephp-2.1

我创建了一个shell脚本如下

```
<?php

class EmailShell extends AppShell
{
    public function main()
    {
        $this->out('Hello world.');
    }
} 
```

当我在命令行中导航到*控制台文件夹*并键入**cake email**时，我收到以下错误。

```
Error: Shell class EmailShell could not be found.
#0 C:\wamp\www\gitgrow\lib\Cake\Console\ShellDispatcher.php(167): ShellDispatche
r->_getShell('email')
#1 C:\wamp\www\gitgrow\lib\Cake\Console\ShellDispatcher.php(69): ShellDispatcher
->dispatch()
#2 C:\wamp\www\gitgrow\app\Console\cake.php(33): ShellDispatcher::run(Array)
#3 {main} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T08:24:02.803

创建一个在控制台中使用的外壳。对于这个例子，我们将创建一个简单的 Hello world shell。在您的应用程序控制台/命令目录中创建 EmailShell.php。将以下代码放入其中：

```
class EmailShell extends AppShell {
    public function main() {
        $this->out('Hello world.');
    }
} 
```

然后运行这个命令：

```
Console/cake email 
```

或者

```
cake email 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T08:27:02.283

运行它`C:\wamp\www\gitgrow\app\`。它应该工作。

```
cd C:\wamp\www\gitgrow\app
Console\cake email 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T07:41:36.987

如果您的 shell 类位于正确的位置，那么 cake 不知道您的应用根目录在哪里可能是个问题。您可以使用 -app 参数指定它。

```
cake -app ../app email 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-17T19:35:58.970

有关如何在 cron 中运行 Cake shell 的信息，请参阅以下链接：

[http://book.cakephp.org/2.0/en/console-and-shells/cron-jobs.html](http://book.cakephp.org/2.0/en/console-and-shells/cron-jobs.html)

您的 cron 命令基本上将 cd 调用到 app 目录和 cake 命令一起运行 shell。

# coldfusion - cfscript 相当于什么 ?

> ID：11555945
> 
> 赞同：4
> 
> 时间：2012-07-19T07:32:09.040
> 
> 标签：coldfusion

我很确定coldfusion没有cfscript替代`<cfobjectcache>`标签，但我想知道我是否可以像`<cfobjectcache action="clear">`cfscript中那样做。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T08:00:31.570

ObjectCacheTag 对`action="clear"`DataSourceService 调用 purgeQueryCache()，从 ServiceFactory 公开。

```
<cfscript>
createObject('java','coldfusion.server.ServiceFactory').getDataSourceService().purgeQueryCache();
</cfscript> 
```

这就是它在 CF8、CF9 和 CF10 中的工作方式

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T07:36:09.413

no such thing, just call an UDF that's written in CFML that calls `<cfobjectcache action="clear">`

update: `CacheRemoveAll()` in CF10 might do what you need. [http://help.adobe.com/en_US/ColdFusion/10.0/CFMLRef/WSaff1f2a7b564e360784fa97f13510d891d7-8000.html](http://help.adobe.com/en_US/ColdFusion/10.0/CFMLRef/WSaff1f2a7b564e360784fa97f13510d891d7-8000.html)

# c++ - 通过初始标准转换序列区分用户定义的转换序列

> ID：11555950
> 
> 赞同：3
> 
> 时间：2012-07-19T07:32:45.943
> 
> 标签：c++11, c++, constructor, implicit-conversion, language-lawyer, conversion-operator

该标准似乎提供了两条规则来区分涉及用户定义的转换运算符的隐式转换序列：

> [c++11](/questions/tagged/c%2b%2b11 "显示标记为“c++11”的问题")
> 
> ### 13.3.3 最佳可行函数[over.match.best]
> 
> [...] 一个可行函数 F1 被定义为比另一个可行函数 F2 更好的函数，如果 [...]
> 
> *   上下文是通过用户定义的转换（参见 8.5、13.3.1.5 和 13.3.1.6）进行的初始化，从 F1 的返回类型到目标类型（即，正在初始化的实体的类型）的标准转换序列是比从 F2 的返回类型到目标类型的标准转换序列更好的转换序列。
> 
> ### 13.3.3.2 对隐式转换序列进行排名[over.ics.rank]
> 
> 3 - 两个相同形式的隐式转换序列是不可区分的转换序列，除非以下规则之一适用：[...]
> 
> *   如果用户定义的转换序列 U1 包含相同的用户定义的转换函数或构造函数或聚合初始化，并且 U1 的第二个标准转换序列优于第二个标准转换序列，则用户定义的转换序列 U1 是比另一个用户定义的转换序列 U2 更好的转换序列U2 的。

据我了解，13.3.3 允许编译器区分*不同的用户定义的转换运算符*，而 13.3.3.2 允许编译器区分*不同的函数*（某些函数的重载`f`），每个函数都需要在其参数中进行用户定义的转换（请参阅我的侧边栏给[定以下代码（在 GCC 4.3 中），为什么要调用两次引用转换？](https://stackoverflow.com/questions/11545316/given-the-following-code-in-gcc-4-3-why-is-the-conversion-to-reference-calle/11545508#11545508)）。

是否有其他规则可以区分用户定义的转换序列？[https://stackoverflow.com/a/1384044/567292](https://stackoverflow.com/a/1384044/567292)的答案表明 13.3.3.2:3 可以根据隐式对象参数（到转换运算符）的 cv 限定或构造函数或聚合初始化的单个非默认参数，但我看不出这有什么关系，因为这需要在相应用户定义的转换序列的第一个标准转换序列之间进行比较，而标准没有t 似乎没有提及。

假设 S1 优于 S2，其中 S1 是 U1 的第一个标准转换序列，S2 是 U2 的第一个标准转换序列，是否可以得出 U1 优于 U2？换句话说，这段代码格式正确吗？

```
struct A {
    operator int();
    operator char() const;
} a;
void foo(double);
int main() {
    foo(a);
} 
```

[g++](http://ideone.com/YUXog) (4.5.1)、[Clang](http://llvm.org/demo/index.cgi) (3.0) 和[Comeau](http://www.comeaucomputing.com/tryitout/) (4.3.10.1) 接受它，更喜欢 non-const-qualified `A::operator int()`，但我希望它会因为模棱两可而被拒绝，因此格式不正确。这是标准的缺陷还是我对它的理解？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T02:21:46.077

这里的技巧是，从类类型转换为非类类型实际上并没有将任何用户定义的转换列为隐式转换序列。

```
struct A {
    operator int();
    operator char() const;
} a;
void foo(double);
int main() {
    foo(a);
} 
```

在表达式`foo(a)`中，`foo`显然命名了一个非重载的非成员函数。`double`该调用需要使用单个表达式复制初始化 (8.5p14) 类型的函数参数，该表达式`a`是类类型的左值`A`。

由于目标类型`double`不是 cv 限定的类类型，但源类型`A` 是，候选函数由第 13.3.1.5 节定义，其中`S=A`和`T=double`。`A`只考虑类和任何基类中的转换函数`A`。如果满足以下条件，则转换函数位于候选集中：

*   它没有隐藏在类`A`中，并且
*   它不是`explicit`（因为上下文是复制初始化），并且
*   标准转换序列可以将函数的返回类型（不包括任何引用限定符）转换为目标类型`double`。

好的，两个转换函数都符合条件，所以候选函数是

```
A::operator int();        // F1
A::operator char() const; // F2 
```

使用 13.3.1p4 中的规则，每个函数都将隐式对象参数作为其参数列表中的唯一内容。 `F1`的参数列表是“（对 的左值引用`A`）”，而`F2`的参数列表是“（对 的左值引用`const A`）”。

接下来我们检查这些功能是否可行（13.3.2）。每个函数的参数列表中都有一种类型，并且只有一个参数。每个参数/参数对是否有隐式转换序列？当然：

*   `ICS1(F1)`：将隐式对象参数（类型的左值引用`A`）绑定到表达式`a`（类型的左值`A`）。
*   `ICS1(F2)`：将隐式对象参数（类型的左值引用`const A`）绑定到表达式`a`（类型的左值`A`）。

由于没有进行派生到基础的转换，因此这些引用绑定被视为身份转换 (13.3.3.1.4p1) 的特殊情况。是的，这两个功能都是可行的。

现在我们必须确定一个隐式转换序列是否比另一个更好。这属于 13.3.3.2p3 中大列表中的第五个子项：除了顶级 cv-qualifiers 之外，两者都是对同一类型的引用绑定。由于 的引用类型`ICS1(F2)`比 的引用类型更具有 cv 限定`ICS1(F1)`，`ICS1(F1)`因此优于`ICS1(F2)`.

因此`F1`, 或`A::operator int()`, 是最可行的函数。甚至没有用户定义的转换（严格定义由SCS +（转换构造函数或转换函数）+ SCS组成的ICS类型）进行比较。

现在，如果`foo`重载，则`a`需要比较参数上的用户定义转换。因此，用户定义的转换（identity ++ `A::operator int()`to `int`）`double`将与其他隐式转换序列进行比较。

# javascript - 有没有办法在没有 jQuery 的情况下在 JavaScript 中获取当前添加的事件列表？

> ID：11555970
> 
> 赞同：0
> 
> 时间：2012-07-19T07:34:10.100
> 
> 标签：javascript, html, javascript-events

我想知道是否有一种方法可以在没有 jQuery 的情况下获取 JavaScript 中当前添加的事件列表？

我想知道这一点，因为我想稍后删除这些事件。

我在 stackoverflow 上环顾四周，但如果没有 jQuery，我找不到答案。

我试过：

```
Event.observers.each(function(item) {
   if(item[0] == element) {
      console.log(item[2])
   }
}); 
```

我还查看[了使用 jquery 在页面上连接的所有 javascript 事件](https://stackoverflow.com/questions/743876/list-all-javascript-events-wired-up-on-a-page-using-jquery)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T07:43:25.197

据我所知，由于 eventListenerList 尚未包含在 DOM 3 中，因此仍然无法在 js 中实际执行它。

如果只是为了调试，您可以使用诸如视觉事件（http://www.sprymedia.co.uk/article/Visual+Event）之类的工具，它知道专业库如何订阅事件以及如何阅读它。

# java - why urlconnection did not read full response

> ID：11555972
> 
> 赞同：1
> 
> 时间：2012-07-19T07:34:17.050
> 
> 标签：java, http, urlconnection

i use URLConnection to read a weburl, however sometimes it can not read full response (and sometimes it worked fine for the same url),

one url is:http://messages.yahoo.com/yahoo/Business_%26_Finance/Investments/Stocks_%28A_to_Z%29/Stocks_Y/index.html

below is one sample cut-off response

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
    <head>
        <title>Yahoo! Message Boards - Stocks Y</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

    <link rel="stylesheet" type="text/css" href="http://l.yimg.com/d/lib/mb/default_yui_ycs_20080219.css"/>

    <!--CSS source files for the Calendar Control -->
<style>
#cal1 { width: 100%;}
#cal2 { width: 100%;}
</style>

    </head>
    <body>
    <center>
        <div id="doc-layout">
        <link type="text/css" rel="stylesheet" href="http://l.yimg.com/a/lib/uh/15/css/uh_rsa-1.0.5.css" /><style type="text/css">#ygma div{clear:none;}#ygma #yahoo{padding-top:0;*padding-top:5px;}</style><script type="text/javascript">(function(){var h={};var setUp=function(){h = YAHOO.one.uh.hotlistInfo = {rd:"http://global.ard.yahoo.com",space:"/SIG=15of4v3ir/M=650008.13179474.13810954.12691855/D=ymb/S=389132707:HEAD/Y=YAHOO/EXP=1342689950/L=4y0l.WKJLGGXYaKI6g9zWQ5hwPoxAVAHtn4ABtXc/B=NlPLD0oGYzg-/J=1342682750498023/K=DHARfvXptNXfBjvsJrQw.g/A=5857129/R=0",adid:"5857129",prop:"ymb",protocol:"http",host:"messages.yahoo.com",url:"http%3a%2f%2fmessages.yahoo.com%2fyahoo%2fBusiness_%2526_Finance%2fInvestments%2fStocks_%2528A_to_Z%2529%2fStocks_Y%2findex.html",spaceid:"389132707"};YAHOO.one.uh.translate=function(str){var set={yahoo_homepage:"http://www.yahoo.com/", hp_detect_script:"http://www.yahoo.com/includes/hdhpdetect.php", set_hp_script:"http://global.ard.yahoo.com/SIG=15of4v3ir/M=650008.13179474.13810954.12691855/D=ymb/S=389132707:HEAD/Y=YAHOO/EXP=1342689950/L=4y0l.WKJLGGXYaKI6g9zWQ5hwPoxAVAHtn4ABtXc/B=NlPLD0oGYzg-/J=1342682750498023/K=DHARfvXptNXfBjvsJrQw.g/A=5857129/R=1/SIG=10uacnjgh/*http://www.yahoo.com/bin/set", set_hp_firefox_instructions:["Drag the \"Y!\" and drop it onto the \"Home\" icon.", "Select \"Yes\" from the pop up window.", "Nothing, you're done."], close_this_window:"Close this window", set_hp_alternative_instructions1:"If this didn't work for you see ", detailed_set_hp_instructions:"detailed instructions", set_hp_alternative_instructions2:""};return set[str];};YAHOO.one.uh.Search=['ygmasearchInput', 'sat'];};if("undefined" !==typeof YAHOO && "undefined" !==typeof YAHOO.one && "undefined" !==typeof YAHOO.one.uh){setUp();}else{setTimeout(arguments.callee, 500);}})();</script><div id="ygma"><div id="ygmaheader"><div class="bd sp"><div id="ymenu" class="ygmaclr"><div id="mepanel"><ul id="mepanel-nav"><li class="me1"><em>New User? <a class="ygmasignup" href="http://global.ard.yahoo.com/SIG=15of4v3ir/M=650008.13179474.13810954.12691855/D=ymb/S=389132707:HEAD/Y=YAHOO/EXP=1342689950/L=4y0l.WKJLGGXYaKI6g9zWQ5hwPoxAVAHtn4ABtXc/B=NlPLD0oGYzg-/J=1342682750498023/K=DHARfvXptNXfBjvsJrQw.g/A=5857129/R=2/SIG=1395kefdv/*https://edit.yahoo.com/config/eval_register?.done=http://messages.finance.yahoo.com&.src=quote&.intl=us">Register</a></em></li><li class="me2"><a href="http://global.ard.yahoo.com/SIG=15of4v3ir/M=650008.13179474.13810954.12691855/D=ymb/S=389132707:HEAD/Y=YAHOO/EXP=1342689950/L=4y0l.WKJLGGXYaKI6g9zWQ5hwPoxAVAHtn4ABtXc/B=NlPLD0oGYzg-/J=1342682750498023/K=DHARfvXptNXfBjvsJrQw.g/A=5857129/R=3/SIG=132l1q4g4/*https://login.yahoo.com/config/login?.done=http://messages.finance.yahoo.com&.src=quote&.intl=us"><em>Sign In</em></a></li><li class="me3"><a href="http://global.ard.yahoo.com/SIG=15of4v3ir/M=650008.13179474.13810954.12691855/D=ymb/S=389132707:HEAD/Y=YAHOO/EXP=1342689950/L=4y0l.WKJLGGXYaKI6g9zWQ5hwPoxAVAHtn4ABtXc/B=NlPLD0oGYzg-/J=1342682750498023/K=DHARfvXptNXfBjvsJrQw.g/A=5857129/R=4/SIG=11bv9h578/*http://help.yahoo.com/l/us/yahoo/finance/" target="_top">Help</a></li></ul></div><div id="ygmapromo"><div id="ygmapromo-i"></div>
<style> 
#ygma-s{display:none;}
#ygma #ygmapromo-i, #ygmabt #ygmapromo-i {display:inline;}
</style> 
<script> 
(function(){
window.YAHOO = window.YAHOO || {};
YAHOO.one = window.YAHOO.one || {};
YAHOO.one.uh = window.YAHOO.one.uh || {};
YAHOO.one.uh.popularSearches = function(data) {
    var chop = function(s, n) {
        if (s.length > n) {
        return s.substring(0,n)+"...";
        }
        else return s;
    }
    var e = document.getElementById("ygmapromo") || document.getElementById("ygmabtpromo");
    var e2 = document.getElementById("ygmapromo-i");
if (!data.query.results || data.query.results == "0" || !data.query.results.links) {
        return;
    }
    var i = data.query.results.links; 
    var hd = i.text;
    var fr = "&fr=ush-tts&fr2=ps";
    e2.innerHTML = '<a href="http://global.ard.yahoo.com/SIG=15p310019/M=650008.13959238.14033549.12832737/D=ymb/S=389132707:HPRM2/Y=YAHOO/EXP=1342689950/L=4y0l.WKJLGGXYaKI6g9zWQ5hwPoxAVAHtn4ABtXc/B=OFPLD0oGYzg-/J=1342682750498023/K=DHARfvXptNXfBjvsJrQw.g/A=6076890/R=0/*'+i.href+fr+'" id="ygma-s-h">Trending: '+chop(hd, 20)+'</a>';
};
var ie;
if (navigator.userAgent.match(/MSIE\s6/)) {
    var D = new Date();
    var yr = D.getFullYear();
    var mt = D.getMonth()+1;
    var dy = D.getDate();
    var hr = D.getHours();
    ie = '&cache=' + yr + mt + dy + hr;
}
else {
    ie = "";
}
var y = document.getElementById("ygma") || document.getElementById("ygmabt");
var feed;
if (y.offsetWidth < 850){
    feed = "http://query.yahooapis.com/v1/public/yql/uhTrending/cokeTrending3?format=json&callback=YAHOO.one.uh.popularSearches&_maxage=1800&diagnostics=false&limit=1";
}
else {
    feed = "http://query.yahooapis.com/v1/public/yql/uhTrending/cokeTrending2?format=json&callback=YAHOO.one.uh.popularSearches&_maxage=1800&diagnostics=false&limit=1";
}
var h = document.getElementsByTagName("head").item(0);
var s = document.createElement("script");
s.setAttribute("type", "text/javascript");
s.setAttribute("charset", "utf-8");
s.setAttribute("src", feed + ie);
h.appendChild(s);
})();
</script>     
<style> 
#ygma ol.searches h4, #ygmabt ol.searches h4 {
    font-size:100%;
    font-weight:bold;
    color:#333333;
    text-align:left;
    padding-bottom:3px;
    margin:0;
}
#ygma ol.searches, #ygmabt ol.searches {
    position:absolute;
    z-index:10002;
    width:155px;
    _width:165px;
    padding:7px 7px 3px 7px;
    background-color:#ffffff;
    border:1px solid #cacaca;
    margin:0;
}
#ygma ol.searches li, #ygmabt ol.searches li {
    text-align:left;
    list-style-type:none;
    color:#163780;
    margin:0;
    padding: 0 0 2px 0;
}
#ygma #ygmapromo ol.searches a, #ygmabt #ygmabtpromo ol.searches a {
    font-weight:normal;
    color:#163780;
}
#ygma #ygmapromo ol.searches a:hover, #ygmabt #ygmabtpromo ol.searches a:hover {
    width:100%;
}
#ygma #ygmapromo-i, #ygmabt #ygmapromo-i {
    position:relative;
    z-index:10002;
    zoom:1;
}
</style><script language=javascript>
if(window.yzq_d==null)window.yzq_d=new Object();
window.yzq_d['OFPLD0oGYzg-']='&U=13h2rtkt7%2fN%3dOFPLD0oGYzg-%2fC%3d650008.13959238.14033549.12832737%2fD%3dHPRM2%2fB%3d6076890%2fV%3d1';
</script><noscript><img width=1 height=1 alt="" src="http://us.bc.yahoo.com/b?P=4y0l.WKJLGGXYaKI6g9zWQ5hwPoxAVAHtn4ABtXc&T=17t8jqecg%2fX%3d1342682750%2fE%3d389132707%2fR%3dymb%2fK%3d5%2fV%3d2.1%2fW%3dH%2fY%3dYAHOO%2fF%3d2676527448%2fH%3dc2VydmVJZD0iNHkwbC5XS0pMR0dYWWFLSTZnOXpXUTVod1BveEFWQUh0bjRBQnRYYyIgc2l0ZUlkPSI0NDY1NTUxIiB0U3RtcD0iMTM0MjY4Mjc1MDQ2NTkyNSIg%2fQ%3d-1%2fS%3d1%2fJ%3dFA208962&U=13h2rtkt7%2fN%3dOFPLD0oGYzg-%2fC%3d650008.13959238.14033549.12832737%2fD%3dHPRM2%2fB%3d6076890%2fV%3d1"></noscript></div><div id="pa"><div id="pa-wrapper"><ul id="pa2-nav" class="sp"><li class="pa1 sp"><a class="sp" href="http://global.ard.yahoo.com/SIG=15of4v3ir/M=650008.13179474.13810954.12691855/D=ymb/S=389132707:HEAD/Y=YAHOO/EXP=1342689950/L=4y0l.WKJLGGXYaKI6g9zWQ5hwPoxAVAHtn4ABtXc/B=NlPLD0oGYzg-/J=1342682750498023/K=DHARfvXptNXfBjvsJrQw.g/A=5857129/R=5/SIG=10np9vmbm/*http://www.yahoo.com/" target="_top">Yahoo!</a></li><li class="pa2 sp"><a class="sp" href="http://global.ard.yahoo.com/SIG=15of4v3ir/M=650008.13179474.13810954.12691855/D=ymb/S=389132707:HEAD/Y=YAHOO/EXP=1342689950/L=4y0l.WKJLGGXYaKI6g9zWQ5hwPoxAVAHtn4ABtXc/B=NlPLD0oGYzg-/J=1342682750498023/K=DHARfvXptNXfBjvsJrQw.g/A=5857129/R=6/SIG=1107gluf6/*http://mail.yahoo.com?.intl=us" target="_top">Mail</a></li></ul><div id="pa-left" class="sp"></div><ul id="pa-nav" class="sp"><li class="pa3 sp"><a class="sp" href="http://global.ard.yahoo.com/SIG=15of4v3ir/M=650008.13179474.13810954.12691855/D=ymb/S=389132707:HEAD/Y=YAHOO/EXP=1342689950/L=4y0l.WKJLGGXYaKI6g9zWQ5hwPoxAVAHtn4ABtXc/B=NlPLD0oGYzg-/J=1342682750498023/K=DHARfvXptNXfBjvsJrQw.g/A=5857129/R=7/SIG=10l2nj3k8/*http://my.yahoo.com" title="My Yahoo!" target="_top">My Yahoo!</a></li><li class="pa4 sp"><a class="sp" href="http://global.ard.yahoo.com/SIG=15of4v3ir/M=650008.13179474.13810954.12691855/D=ymb/S=389132707:HEAD/Y=YAHOO/EXP=1342689950/L=4y0l.WKJLGGXYaKI6g9zWQ5hwPoxAVAHtn4ABtXc/B=NlPLD0oGYzg-/J=1342682750498023/K=DHARfvXptNXfBjvsJrQw.g/A=5857129/R=8/SIG=10niob72s/*http://news.yahoo.com" title="Yahoo! News" target="_top">News</a></li><li class="pa5 sp"><a class="sp" href="http://global.ard.yahoo.com/SIG=15of4v3ir/M=650008.13179474.13810954.12691855/D=ymb/S=389132707:HEAD/Y=YAHOO/EXP=1342689950/L=4y0l.WKJLGGXYaKI6g9zWQ5hwPoxAVAHtn4ABtXc/B=NlPLD0oGYzg-/J=1342682750498023/K=DHARfvXptNXfBjvsJrQw.g/A=5857129/R=9/SIG=10q40gpus/*http://finance.yahoo.com" title="Yahoo! Finance" target="_top">Finance</a></li><li class="pa6 sp"><a class="sp" href="http://global.ard.yahoo.com/SIG=15of4v3ir/M=650008.13179474.13810954.12691855/D=ymb/S=389132707:HEAD/Y=YAHOO/EXP=1342689950/L=4y0l.WKJLGGXYaKI6g9zWQ5hwPoxAVAHtn4ABtXc/B=NlPLD0oGYzg-/J=1342682750498023/K=DHARfvXptNXfBjvsJrQw.g/A=5857129/R=10/SIG=10pcalhda/*http://sports.yahoo.com" title="Yahoo! Sports" target="_top">Sports</a></li></ul><div id="pa-right" class="sp"></div></div></div></div><div id="yahoo" class="ygmaclr"><div id="ygmabot"> <a id="ygmalogo" href="http://global.ard.yahoo.com/SIG=15of4v3ir/M=650008.13179474.13810954.12691855/D=ymb/S=389132707:HEAD/Y=YAHOO/EXP=1342689950/L=4y0l.WKJLGGXYaKI6g9zWQ5hwPoxAVAHtn4ABtXc/B=NlPLD0oGYzg-/J=1342682750498023/K=DHARfvXptNXfBjvsJrQw.g/A=5857129/R=11/SIG=10q40gpus/*http://finance.yahoo.com" target="_top"><img id="ygmalogoimg" width="246" h... 
```

below is my code to read a web url,

```
public String getHtml(String urlstr)
{
    try {
        URL url = new URL(urlstr);
        URLConnection conn = url.openConnection();

        conn.addRequestProperty("User-Agent", "Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Trident/5.0)");

        System.out.println("now to set cookie: " + cookie);

        conn.addRequestProperty("Cookie", cookie);

        BufferedReader in = new BufferedReader(new InputStreamReader(
                                    conn.getInputStream()));
        String inputLine;

        extractCookie(conn);

        //PrintWriter file = new PrintWriter(new BufferedWriter(new FileWriter("out.txt")));

        StringBuilder sb = new StringBuilder();

        while ((inputLine = in.readLine()) != null)
        {
            //file.println(inputLine);
            sb.append(inputLine).append("\n");
        }

        in.close();

        //file.close();

        return sb.toString();

    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    return "";
}

private void extractCookie(URLConnection conn) {
    System.out.println("now try to get cookie:");
    Map<String, List<String>> fields = conn.getHeaderFields();
    for(String key: fields.keySet())
    {
        List<String> values = fields.get(key);

        if("Set-Cookie".equalsIgnoreCase(key))
        {
            System.out.println(values.size());

            for(String v: values)
            {
                String c = Util.getCookie(v);

                this.cookieSet.add(c);  

                System.out.println(c);
            }

            //this.cookieMap.p

            //cookieSet.add(values);
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:37:22.490

好吧，我认为这段代码工作正常，在调试模式下，eclipse 变量没有显示长字符串的完整值，这让我感到困惑......

（我从调试模式的变量值复制了输出......）

后来我打印到控制台/文件，这对于我迄今为止测试过的案例来说似乎很好......

# c++ - SQLite 删除数据库错误

> ID：11555973
> 
> 赞同：1
> 
> 时间：2012-07-19T07:34:23.113
> 
> 标签：c++, sqlite, qt, qtsql

我有连接到数据库的小部件：

```
Widget::Widget(QWidget *parent)
{
    QString databaseName = "name";
    QSqlDatabase db = QSqlDatabase::addDatabase("QSQLITE");
    db.setDatabaseName(databaseName);
    db.setHostName("localhost");
    if(!db.open())
        qDebug()<<"ret error";
} 
```

现在我想在小部件关闭后删除数据库连接（目前我收到如下警告：） `QSqlDatabasePrivate::removeDatabase: connection 'qt_sql_default_connection is still in use...`。我已经阅读了一些主题并尝试从它们中评估一些解决方案，但没有一个对我有用。我的代码：

```
void Widget::closeEvent(QCloseEvent *e)
{
    QSqlDatabase db = QSqlDatabase::database();
    QString connection = db.connectionName();
    db.close();
    QSqlDatabase::removeDatabase(connection);
    qDebug()<<"error: "<<db.lastError().text();
} 
```

我得到的错误是：`Driver not loaded Driver not loaded`

这样做的正确方法是什么？

编辑：

另一种方法：

```
void Widget::someMethod()
{
    QSqlDatabase db = QSqlDatabase::database();
    QSqlQuery query(db);
    query.exec("some query");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T05:54:53.377

尝试在 addDatabase() 中提供连接名称参数（第二个参数），这应该可以解决您的问题。

这是您可以尝试的修改后的代码：

```
Widget::Widget(QWidget *parent)
{
    QString databaseName = "name";
    QSqlDatabase db = QSqlDatabase::addDatabase("QSQLITE", "test_db_connection" );
    db.setDatabaseName(databaseName);
    db.setHostName("localhost");
    if(!db.open())
        qDebug()<<"ret error";
} 
```

这是我机器上用于 sqlite 数据库的完整工作代码，您可以将其用作参考：

```
local_db = QSqlDatabase::addDatabase("QSQLITE","localdb");
local_db.setDatabaseName("localdb.sqlite");
local_db_query = QSqlQuery(local_db);
local_db_query.prepare( "SELECT * FROM sample_table" );
local_db_query.exec(); 
```

# bdd - Behavior driven development and SpecFlow

> ID：11555974
> 
> 赞同：2
> 
> 时间：2012-07-19T07:34:23.597
> 
> 标签：bdd, specflow

I haven't any real experience in BDD and I've recently discovered [SpecFlow](http://www.specflow.org/home.aspx). I've read a bit about it (and [Gherkin](https://github.com/cucumber/gherkin/wiki)), I went through some [screen casts](http://www.specflow.org/getdoc/7a17d618-cb24-40e4-904b-b335c34c98d8/screencast.aspx), and I must say that I'm moderatly convinced. Of course, by nature, the examples provided as an introduction are relatively simple. Is anybody using SpecFlow on real (read "complex") projects and finding that tool helpful?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T08:38:53.017

Gojko Adzic 写了一整本书 (www.specificationbyexample.com)，他在其中采访了全球各地根据这些概念工作了几年的各个团队。这本书不仅描述了那里的经验，还很好地总结了团队报告的常见挑战和收益。我认为这本书可以帮助说服管理层，并在开始时提供一些指导。但是，这不是一本循序渐进的烹饪书，也没有详细讨论特定工具（恕我直言，这不是必需的）。

谈到第一手经验，我们（TechTalk）多年来一直在不同规模、领域和架构的项目中使用 SpecFlow。我们主要在各个领域（金融部门、政府、GIS）进行定制开发，我们的项目通常持续 2-9 个月，规模为 150-500 PD。我们使用 SpecFlow 进行的最大项目是 1800+ PD - 这些是多年运行的长期程序，并且不断频繁地发布。

我们还在产品开发中使用 SpecFlow，例如在 SpecLog (www.speclog.net) 中。

我们还在各个行业（汽车、金融服务等）中指导 ATDD 和示例规范的大型项目，这些项目非常成功地应用了这些概念。这些项目也部分地在其他平台上，例如在 Java 上，到目前为止我们使用的是 JBehave，尽管如果我现在开始一个项目，我会强烈考虑 Cucumber-JVM。

我还建议查看 Skillmatter.com 上的（免费）屏幕投射，他们几年来一直在举办相关会议（BDDX、CukeUp）。这些总是有来自各个领域和行业的一些经验报告。

# spring-mvc - Integeration of Spring MVC and Drools?

> ID：11555988
> 
> 赞同：0
> 
> 时间：2012-07-19T07:35:23.767
> 
> 标签：spring-mvc, jboss, drools, spring-integration

I am new to Drools and due to some specific generalization requirement, I have to implement JBoss Drools with Spring MVC project.I am totally unaware of how to get ahead with it. I would appreciate any tutorials as well as documentation to know about the integration and getting started process. Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T11:28:03.937

从我自己的经验来看，drools-spring 库并没有提供太多的好处，并且存在诸如依赖特定版本的 Spring 等问题。

事实上，在 Spring 应用程序中启动和运行 Drools 涉及的集成很少。我的方法是创建一个 Spring bean 来包装 Drools 知识库。

```
@Component(value="knowledgeService")
public class MyKnowledgeService {
    private KnowledgeBase knowledgeBase;
    private StatefulKnowledgeSession knowledgeSession;
    ... 
```

构造函数可以初始化知识库和会话（如果您使用的是有状态会话）。这样，您就拥有了一个由 Spring 管理的知识库实例。除此之外，您只需在服务上添加一些方法即可启用交互。这些可能只是委托给 Drools 操作。即插入（对象）和fireAllRules（）。

# c# - Get Oracle oradata folder from c# code?

> ID：11555989
> 
> 赞同：0
> 
> 时间：2012-07-19T07:35:23.550
> 
> 标签：c#, .net, oracle, oracle10g, oracleclient

Is it possible to get or guess oracle's oradata folder from a C# code?

e.g. D:\oracle\product\10.2.0\oradata

My purpose is to create an installer that automatically create tablespace, but we need to ask the user where the tablespace location will be. But it would be nice if the text field can be prepopulated with the "guessed" value so that the user won't need to do anything if the guess is correct.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T07:43:10.060

环境变量 ORA_HOME 不可靠（无论如何只在服务器上有效）。

获得确定值的唯一方法是通过 V$PARAMETER 视图：

```
select value
from v$parameter
where name = 'db_create_file_dest'; 
```

*虽然如果必须*设置，我不是 100% 。

V$PARAMETER 通常对普通用户不可读。但是当您要创建一个表空间时，我想授予用户该权限不是问题。

但是您可以在不指定数据文件目录的情况下创建表空间。在这种情况下，表空间将在 db_create_file_dest 指定的位置创建。

从[手册](http://docs.oracle.com/cd/E11882_01/server.112/e26088/clauses004.htm#i1030551)：

> *文件名**可以**包含路径前缀。如果您不指定这样的路径前缀，那么数据库会为默认存储位置添加路径前缀，这取决于平台。*

（强调我的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T07:43:26.660

您可以通过在 Oracle 数据字典中查询数据文件的位置来做到这一点——但不同的表空间可能存储在不同的位置。

还：

不要忘记数据库可能被配置为使用 ASM 或 Oracle Managed Files（我个人最喜欢的），在这种情况下，告诉 Oracle 在哪里创建数据文件变得更加困难或不必要。

我强烈建议在安装程序之外创建表空间，因为表空间的使用通常受 DBA 策略的约束。

# github - Migrate Confluence to Github wiki (Gollum)

> ID：11555990
> 
> 赞同：12
> 
> 时间：2012-07-19T07:35:27.357
> 
> 标签：github, migration, wiki, confluence, gollum-wiki

Does somebody know a nice way to migrate a **Confluence** wiki to the **Github** wiki (aka Gollum) ?

By *nice way* I mean quick and effective.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-09T19:28:23.977

You can export whole spaces to html format, and than use [pandoc](https://github.com/jgm/pandoc) to rewrite pages to ReST|Markdown

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-06T11:03:55.930

我有一个类似的问题，所以我拼凑了一些 Python 代码来做到这一点：

[https://github.com/gergelykalman/confluence-markdown-exporter](https://github.com/gergelykalman/confluence-markdown-exporter)

这是非常基本的，但对我来说效果很好。

# c# - Using a Radial basis function with back propagation in c# using Encog library

> ID：11555995
> 
> 赞同：0
> 
> 时间：2012-07-19T07:35:46.353
> 
> 标签：c#, neural-network, encog

I have created a simple RBF network with a gaussian function by using,

```
RBFNetwork newNetwork = new RBFNetwork(28,14,1,RBFEnum.Gaussian); 
```

I need to create a RBF Network with back propagation having 28 inputs and only one output giving 0 or 1 as a result. I could not proceed further in training it with data sets. Help needed.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T19:57:06.537

如果您不想制定自己的停止策略，我认为您应该使用`EncogUtility.TrainConsole()`,`EncogUtility.TrainToError()`或方法。`EncogUtility.TrainDialog()`

请参阅Javadocs 的[EncogUtility](http://www.heatonresearch.com/javadoc/encog-2.3/org/encog/util/simple/EncogUtility.html)，C# 接近。唯一的问题是它内部不使用 SCG，而是使用`ResilientPropagation`.

要构建数据集，您必须具有相同大小和相同顺序的`double[][]`输入和`double[][]`所需输出。然后代码看起来像这样：

```
var trainingSet = new BasicMLDataSet(inputs, outputs);
EncogUtility.TrainConsole(network, trainingSet, 10 /*minutes training*/); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T06:06:39.360

我认为你的答案在这里.. [http://massapi.com/class/org/encog/neural/rbf/RBFNetwork.java.html](http://massapi.com/class/org/encog/neural/rbf/RBFNetwork.java.html) 希望这对你有帮助..虽然它是在java中你可以理解它背后的逻辑

# c++ - C/C++ int[] vs int*（指针 vs. 数组表示法）。有什么不同？

> ID：11555997
> 
> 赞同：54
> 
> 时间：2012-07-19T07:35:58.253
> 
> 标签：c++, c, arrays, pointers, standards

我知道 C 中的数组只是指向顺序存储数据的指针。但是什么不同意味着符号[]和*的不同。我的意思是在所有可能的使用环境中。例如：

```
char c[] = "test"; 
```

如果您在函数体中提供此指令，它将在堆栈上分配字符串，而

```
char* c = "test"; 
```

将指向一个数据（只读）段。

您能否在所有使用上下文中列出这两种符号之间的所有差异，以形成清晰的总体视图。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-07-19T08:19:41.120

根据C99标准：

> 数组类型描述了一组连续分配的具有特定成员对象类型（称为元素类型）的非空对象。

> 36.  数组类型的特征在于它们的元素类型和数组中元素的数量。数组类型被称为从其元素类型派生，如果其元素类型是`T`，则该数组类型有时称为*数组`T`*。从元素类型构造数组类型称为*数组类型派生*。

> 指针类型可以派生自函数类型、对象类型或不完整类型，称为引用类型。指针类型描述了一个对象，其值提供对被引用类型实体的引用。从引用类型派生的指针类型`T` 有时称为指向 的*指针`T`*。从引用类型构造指针类型称为*指针类型派生*。

根据标准声明……</p>

```
char s[] = "abc", t[3] = "abc";
char s[] = { 'a', 'b', 'c', '\0' }, t[] = { 'a', 'b', 'c' }; 
```

……是相同的。数组的内容是可修改的。另一方面，声明……</p>

```
const char *p = "abc"; 
```

...将 p 的类型定义为*指向常量`char`*的指针，并将其初始化为指向类型为*常量数组`char`*（**在 C++ 中**）的对象，其长度为 4，其元素使用字符串字面量进行初始化。如果尝试使用`p`来修改数组的内容，则行为未定义。

根据*6.3.2.1**数组下标***取消引用和数组下标是相同的：

> 下标运算符的定义`[]`与`E1[E2]`相同`(*((E1)+(E2)))`。

数组与指针的区别在于：

*   指针后面没有内存大小的信息（没有可移植的方法来获取它）
*   无法构造不完整类型的数组
*   指针类型可以派生自不完整的类型
*   一个指针可以定义一个递归结构（这个是前两个的结果）

有关该主题的更多有用信息，[请访问 http://www.cplusplus.com/forum/articles/9/](http://www.cplusplus.com/forum/articles/9/)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-19T08:33:54.490

```
char c[] = "test"; 
```

这将创建一个包含字符串 test 的数组，以便您可以修改/更改任何字符，例如

```
c[2] = 'p'; 
```

但，

```
char * c = "test" 
```

它是一个字符串文字——它是一个 const char。
因此，对这个字符串文字进行任何修改都会给我们带来段错误。所以

```
c[2] = 'p'; 
```

现在是非法的并给我们段错误。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-19T08:20:28.200

`char []`表示类型“char 的未知边界数组”，而`char *`表示类型“指向 char 的指针”。正如您所观察到的，当使用字符串文字初始化“char 的未知边界数组”类型的变量的定义时，该类型将转换为“char 的数组 [N]”，其中 N 是适当的大小。这同样适用于从数组聚合初始化：

```
int arr[] = { 0, 1, 2 }; 
```

arr 被转换为“array[3] of int”类型。

在用户定义的类型定义 ( `struct`,`class`或`union`) 中，C++ 中禁止未知绑定数组类型，尽管在某些 C 版本中它们被允许作为结构的*最后一个*成员，在那里它们可用于访问已分配的结构结束后的内存；这种用法称为“灵活数组”。

递归类型构造是另一个区别。可以构造指向`char *`（例如`char **`，`char (*)[10]`）的指针和数组，但这对于未知边界的数组是非法的；一个人不能写或`char []*`（`char [][10]`虽然很好）。`char (*)[]``char [10][]`

最后，cv-qualification 的操作方式不同；给定`typedef char *ptr_to_char`和`typedef char array_of_unknown_bound_of_char[]`，指针版本的 cv 限定将按预期运行，而数组版本的 cv 限定会将 cv 限定迁移到元素类型：也就是说，`const array_of_unknown_bound_of_char`等效于`const char []`而不是虚构的`char (const) []`. 这意味着在函数定义中，数组到指针的衰减在构造原型之前对参数进行操作，

```
void foo (int const a[]) {
    a = 0;
} 
```

是合法的；无法使未知绑定数组参数不可修改。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-19T08:21:02.640

如果您知道**声明指针变量不会创建变量的类型，那么整个事情就会变得清晰，它指向。它创建一个指针变量。**

因此，在实践中，如果您需要一个字符串，那么您需要指定一个字符数组，并且稍后可以使用一个指针。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T08:11:47.197

实际上数组等价于*常量指针*。

此外， char c[] 为数组分配内存，其基址是 c 本身。没有分配单独的内存来存储该地址。

写入 char *c 会为其基地址存储在 c 中的字符串分配内存。此外，一个单独的内存位置用于存储 c。

# linux - Ensuring all Linux system threads run on core 0

> ID：11555998
> 
> 赞同：1
> 
> 时间：2012-07-19T07:36:06.637
> 
> 标签：linux, cpu, scheduling, multicore

I want to ensure that all system threads in Linux run on core 0, leaving all the other cores to my application. I am using RHEL 6 and I have added the following lines at the top of /etc/rc.d/rc.sysinit:

```
taskset -p 0x01 1
taskset -p 0x01 2
taskset -p 0x01 $$ 
```

I still see a lot of threads/processes with PPID 2 running on cores other than 0\. This indicates that `kthreadd` (the process with PID 2) spawns others before the above statements are executed. How can I ensure that all children of process 2 also run of core 0?

Edit: Here are, for example, the threads on core 4\. Can any of these be moved away from core 4?

```
~> ps -L -eo pid,ppid,tid,nlwp,tty,comm,psr | grep 4$
  PID  PPID   TID NLWP TT       COMMAND         PSR  <-line added
   15     2    15    1 ?        migration/4       4
   16     2    16    1 ?        ksoftirqd/4       4
   17     2    17    1 ?        watchdog/4        4
   31     2    31    1 ?        events/4          4
   46     2    46    1 ?        kintegrityd/4     4
   54     2    54    1 ?        kblockd/4         4
   65     2    65    1 ?        ata/4             4
   88     2    88    1 ?        aio/4             4
   96     2    96    1 ?        crypto/4          4
  420     2   420    1 ?        ext4-dio-unwrit   4
  879     2   879    1 ?        kdmflush          4
  926     2   926    1 ?        ext4-dio-unwrit   4
  935     2   935    1 ?        ext4-dio-unwrit   4
 1632     2  1632    1 ?        rpciod/4          4 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T07:46:47.457

一些内核线程绑定到它们的特殊（逻辑）CPU 以执行与该 CPU 相关的一些工作，您无法从它们的 CPU 迁移这些内核线程。您可以做的是迁移和固定所有其他任务。

我猜这个奇怪的要求不是你的最终目的，而且这个（标题）不是达到你目的的正确方法。如果您提供最终目的，SO 中的人员可以帮助您。