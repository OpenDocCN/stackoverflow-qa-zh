# StackOverflow 问答 11916000-11916999

# php - 为什么我尝试替换字符串中的字符失败？

> ID：11916003
> 
> 赞同：2
> 
> 时间：2012-08-11T15:41:23.733
> 
> 标签：php, regex, character-encoding

我有一个看起来很正常的字符串（如果有任何区别，则取自 MySQL 数据库）：

```
Manufacture: <a href="http://www.x.com/">Blah</a> 
```

问题是标签之间的空间`Manufacture:`有`<a>`一个 194 的字符码，而不是我期望的 32。

这导致`preg_match`具有以下模式的 a 失败（请忽略使用正则表达式解析 HTML 的尝试，我知道这不是一个好主意，但这个特定的数据集是可以预测的，足以摆脱它）：

```
/Manufacture: *(<a[^>]*>([A-Za-z- 0-9]+)<\/a>)/i 
```

如果我在文本编辑器中用普通空格字符替换流氓空格并重试，表达式会按预期匹配，但我需要以编程方式对其进行更改。

我试过`str_replace`：

```
$text = str_replace(chr(194), ' ', $text); 
```

但`preg_match`仍然失败。然后我尝试了`preg_replace`：

```
$text = preg_replace('/[\xC2]/', ' ', $text); 
```

但这也不起作用，即使运行相同的模式`preg_match` *确实*包含预期的匹配。

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T18:35:17.683

您能否检查一下您从中获取 $text 内容的 MySQL 表的结构？如果排序规则是`utf8_general_ci`或类似的，那么您的字符串很可能包含双字节 UNICODE 字符。

![在此处输入图像描述](../Images/2d2f6789d258d81ff86aed87c7adf419.png)

如果是这种情况，那么 PHP 函数[iconv](http://php.net/manual/en/function.iconv.php)应该可以解决问题。这是 PHP 手册中的示例。该`IGNORE`选项应从字符串中删除 UNICODE 字符。

```
<?php
$text = "This is the Euro symbol '€'.";

echo 'Original : ', $text, PHP_EOL;
echo 'TRANSLIT : ', iconv("UTF-8", "ISO-8859-1//TRANSLIT", $text), PHP_EOL;
echo 'IGNORE   : ', iconv("UTF-8", "ISO-8859-1//IGNORE", $text), PHP_EOL;
echo 'Plain    : ', iconv("UTF-8", "ISO-8859-1", $text), PHP_EOL;

?> 
```

**上面的示例将输出类似于：**

```
Original : This is the Euro symbol '€'.
TRANSLIT : This is the Euro symbol 'EUR'.
IGNORE   : This is the Euro symbol ''.
Plain    :
Notice: iconv(): Detected an illegal character in input string in .\iconv-example.php on line 7
This is the Euro symbol ' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T15:53:18.300

如果您尝试匹配*任何*空白字符怎么办？
像这样：

```
/Manufacture:\s*(<a[^>]*>([A-Za-z- 0-9]+)<\/a>)/i 
```

# jquery - 使用 ajax 和 rails 提交一个简单的表单

> ID：11916004
> 
> 赞同：0
> 
> 时间：2012-08-11T15:41:24.733
> 
> 标签：jquery, ruby-on-rails, ajax, model-view-controller, controller

我正在尝试使用 ajax 构建表单。

我阅读[了本](http://guides.rubyonrails.org/ajax_on_rails.html)教程，但我不清楚。

我想提交一个简单的表单并在同一页面中显示结果而不刷新页面。我的应用程序中没有模型。我只想提交一个表单，向 api 发出请求并将结果显示回页面。

例如，如果我使用它：

```
<form method="post" action="/my_controller/my_action" class="button_to" data-remote="true" data-type="json">
  <input type="text" ..>
  <input type="text" ..>
  <div><input value="Show" type="submit" /></div>
</form> 
```

如何在 my_controller 中获取这些值以及如何显示回视图？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T19:12:18.080

你的表格

```
<form method="post" action="/my_controller/my_action" class="button_to" data-remote="true"       data-type="script">
  <input type="text" name="value1">
  <input type="text" name="value1">
  <div><input value="Show" type="submit" /></div>
</form> 
```

您的显示 div 标签

```
<div id="feeds"></div> 
```

你的行动

```
def my_action
   @value1 = params[:value1]
   @value1 = params[:value2]
   respond_to do |format|
      format.js
   end       
end 
```

你的看法 my/my_action.js.erb

```
$('#feeds').prepend("<%= j ("<p>#{@value1}-#{@value2}</p>") %>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T15:51:11.207

使用jquery的ajax方法

```
$.ajax({
 url:'/path/to/controller',     
 type:'GET',
 data:{formData:$('form').serialize()},
 success:function(data){
 //do what ever with the response
 }

}); 
```

此外，您可以附加错误事件处理程序

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-14T18:02:07.303

我试图编辑@MuhammetDILEK 的答案，这几乎对我有用。但是，我需要使用`data-type="script"`而不是`data-type="json"`表单，如下所述： [https ://stackoverflow.com/a/15115551/3472491](https://stackoverflow.com/a/15115551/3472491)

# objective-c - 如何找到 NSArray 中大于某个值的元素？

> ID：11916006
> 
> 赞同：-6
> 
> 时间：2012-08-11T15:41:48.493
> 
> 标签：objective-c, ios, date, time

我是iOS开发的开始。我有一个如下数组：

```
NSMutableArray *array = [[NSMutableArray alloc] init]; 

[array addObject:[NSNumber numberWithInt:15:00]];
[array addObject:[NSNumber numberWithInt:20:05]];
[array addObject:[NSNumber numberWithInt:1:20]];
[array addObject:[NSNumber numberWithInt:3:40]]; 
```

我需要一个标签来显示哪个数组对象是下一个大于我当前时间的对象。例如，如果我现在的时间是：2:00，我的标签应该只显示下一个更大的数字，3:40。没有比这更大的数字。

我如何识别这一更大的元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T15:47:37.563

首先，您必须了解 15:00 不是 int。

使用`NSDate`，而不是`NSNumber`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T15:45:01.357

首先，你为什么要添加`NSNumbers`到你的`NSArray`？这些应该是`NSDate`对象。

如果你这样做，你可以像这样使用 NSDate 的比较方法：

```
[date1 compare: date2]; 
```

在您的情况下，如果您想在当前时间之后立即显示时间，我会这样做：

```
NSDate *currentTime = [NSDate dateWithTimeIntervalSinceNow:0];
NSUInteger smallestInterval = -1;
NSInteger smallestDateIndex = -1;

for(int i = 0; i < array.count; i++){
    if([currentTime timeIntervalSinceDate:[array objectAtIndex:i]] <= 0){
    continue;
    }

    if(smallestDateIndex == -1){
        smallestDateIndex = i;
        smallestInterval = [currentTime timeIntervalSinceDate:[array objectAtIndex:i]];
    } else if([currentTime timeIntervalSinceDate:[array objectAtIndex:i]] < smallestInterval){
    smallestInterval = [currentTime timeIntervalSinceDate:[array objectAtIndex:i]];
    smallestDateIndex = i;
    }
}

if(smallestDateIndex > -1){
    NSDateFormatter *formatter = [[NSDateFormatter alloc] initWithDateFormat:@"HH:mm"];
    myLabel.text = [formatter stringFromDate:[array objectAtIndex:smallestDateIndex]];
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-11T16:15:03.667

您可以在表格中显示四次。

![ss](../Images/3685545bf9bbeec40d7f13770ed40a43.png)

代码如下：

```
array = [NSMutableArray array];
NSDate *date;
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
NSString *s = @"HH:mm";
dateFormatter.dateFormat = s;

date = [dateFormatter dateFromString:@"15:00"];
[array addObject:date];

date = [dateFormatter dateFromString:@"20:05"];
[array addObject:date];

date = [dateFormatter dateFromString:@"1:20"];
[array addObject:date];

date = [dateFormatter dateFromString:@"3:40"];
[array addObject:date]; 
```

要比较日期，可以使用 NSDate 类的 campare 方法。

```
NSComparisonResult result = [dt1 compare:dt];
switch(result)
{
case NSOrderedAscending:
    // dt is bigger than dt1
    break;
case NSOrderedDescending:
    // dt is smaller than dt1
    break;
case NSOrderedSame:
    // dt is same with dt1
    break;
} 
```

您可以从 GitHub 下载项目并运行它。

[https://github.com/weed/p120812_NSDateSumple](https://github.com/weed/p120812_NSDateSumple)

# php - 用于检测变体的 PHP PregEX

> ID：11916009
> 
> 赞同：1
> 
> 时间：2012-08-11T15:41:55.593
> 
> 标签：php, string

我正在尝试创建一个注册表表达式，它将检测字符串中的以下语法：

```
OPEN-BRACKET > ANYTHING > PLUS-OR-MINUS > CLOSE-BRACKET 
```

*   示例字符串：NB###-#####-#####-### **[#+]**

请注意，表达式可以在字符串中的任何位置并且出现多次。

我已经尝试过`[(.+)(\+|-)]`，这似乎不像我想象的那样在 php 中起作用，但在[rubular.com中确实有效](http://rubular.com)

返回**字符串****和** 的表达式是什么，无论它是**加号**还是**减号**？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T15:50:55.087

也许`.+`由于默认的[贪婪](http://php.net/manual/en/reference.pcre.pattern.modifiers.php)而消耗了所有东西？如果使用 . 锚定字符串会发生什么`^\[(.+)(\+|-)\]$`。

如果由于多次出现而无法锚定字符串，请尝试使用[前瞻功能](http://www.regular-expressions.info/lookaround.html)。如果“任何东西”真的可以是任何东西，你如何区分任何东西和加`+]` 号或减号>右括号？

如果任何东西都不允许加号或减号，请选择`\[([^+-]+)(\+|-)\]`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T15:51:26.117

我建议这种模式：

```
"(\[(.+)(\+|-)\])" 
```

括号捕获整个组，`\`转义`[`和`]`字符，以及`+`字符，否则（当未转义时）在正则表达式中具有特殊含义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T00:22:30.640

谢谢您的帮助。`/\[([\$|a-zA-Z]+)(\+|-)\]/`我设法按照我的意图找出作品。

# c++ - 琐碎的 C++ 程序不写入文件

> ID：11916015
> 
> 赞同：4
> 
> 时间：2012-08-11T15:43:17.707
> 
> 标签：c++

这些行是 main() 的唯一内容：

```
fstream file = fstream("test.txt", ios_base::in | ios_base::out);
string word;
while (file >> word) { cout << word + " "; }
file.seekp(ios::beg);
file << "testing";
file.close(); 
```

该程序正确输出了文件的内容（即“愤怒的狗”），但是当我之后打开文件时，它仍然只是说“愤怒的狗”，而不是像我期望的那样“测试狗”。

完整程序：

```
#include <iostream>
#include <fstream>
#include <string>
using namespace std;

int main()
{
    fstream file = fstream("test.txt", ios_base::in | ios_base::out);
    string word;
    while (file >> word) { cout << word + " "; }
    file.seekp(ios::beg);
    file << "testing";
    file.close();
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-11T15:52:36.217

您的代码中有两个错误。

首先，`iostream`没有复制构造函数，所以（严格来说）你不能初始化`file`你做的方式。

其次，一旦你跑完文件的末尾，`eofbit`就设置了，你需要清除该标志，然后才能再次使用流。

```
fstream file("test.txt", ios_base::in | ios_base::out);
string word;
while (file >> word) { cout << word + " "; }
file.clear();
file.seekp(ios::beg);
file << "testing";
file.close(); 
```

# objective-c - Objective-C 运行时如何检索类和方法的列表？

> ID：11916016
> 
> 赞同：11
> 
> 时间：2012-08-11T15:43:22.860
> 
> 标签：objective-c, assembly, objective-c-runtime

如果我得到以下 Objective-C 源文件：

```
// test.m
#import <objc/Object.h>

@interface MySuperClass: Object {

}
-(void) myMessage1;
@end

@implementation MySuperClass
-(void) myMessage1 {

}
@end

@interface MyClass: MySuperClass {

}
-(void) myMessage2;
@end

@implementation MyClass
-(void) myMessage2 {

}
@end

int main() {

    return 0;
} 
```

并尝试从中生成一个汇编文件`clang -fobjc-nonfragile-abi -fnext-runtime -S test.m`，我得到以下汇编代码：

```
 .file   "test.m"
    .text
    .align  16, 0x90
    .type   _2D__5B_MySuperClass_20_myMessage1_5D_,@function
_2D__5B_MySuperClass_20_myMessage1_5D_: # @"\01-[MySuperClass myMessage1]"
.Ltmp0:
    .cfi_startproc
# BB#0:
    movq    %rdi, -8(%rsp)
    movq    %rsi, -16(%rsp)
    ret
.Ltmp1:
    .size   _2D__5B_MySuperClass_20_myMessage1_5D_, .Ltmp1-_2D__5B_MySuperClass_20_myMessage1_5D_
.Ltmp2:
    .cfi_endproc
.Leh_func_end0:

    .align  16, 0x90
    .type   _2D__5B_MyClass_20_myMessage2_5D_,@function
_2D__5B_MyClass_20_myMessage2_5D_:      # @"\01-[MyClass myMessage2]"
.Ltmp3:
    .cfi_startproc
# BB#0:
    movq    %rdi, -8(%rsp)
    movq    %rsi, -16(%rsp)
    ret
.Ltmp4:
    .size   _2D__5B_MyClass_20_myMessage2_5D_, .Ltmp4-_2D__5B_MyClass_20_myMessage2_5D_
.Ltmp5:
    .cfi_endproc
.Leh_func_end1:

    .globl  main
    .align  16, 0x90
    .type   main,@function
main:                                   # @main
.Ltmp6:
    .cfi_startproc
# BB#0:
    movl    $0, %eax
    movl    $0, -4(%rsp)
    ret
.Ltmp7:
    .size   main, .Ltmp7-main
.Ltmp8:
    .cfi_endproc
.Leh_func_end2:

    .type   L_OBJC_CLASS_NAME_,@object # @"\01L_OBJC_CLASS_NAME_"
    .section    "__TEXT,__objc_classname,cstring_literals","aw",@progbits
L_OBJC_CLASS_NAME_:
    .asciz   "MySuperClass"
    .size   L_OBJC_CLASS_NAME_, 13

    .type   l_OBJC_METACLASS_RO_$_MySuperClass,@object # @"\01l_OBJC_METACLASS_RO_$_MySuperClass"
    .section    "__DATA, __objc_const","aw",@progbits
    .align  8
l_OBJC_METACLASS_RO_$_MySuperClass:
    .long   1                       # 0x1
    .long   40                      # 0x28
    .long   40                      # 0x28
    .zero   4
    .quad   0
    .quad   L_OBJC_CLASS_NAME_
    .quad   0
    .quad   0
    .quad   0
    .quad   0
    .quad   0
    .size   l_OBJC_METACLASS_RO_$_MySuperClass, 72

    .type   OBJC_METACLASS_$_MySuperClass,@object # @"OBJC_METACLASS_$_MySuperClass"
    .section    "__DATA, __objc_data","aw",@progbits
    .globl  OBJC_METACLASS_$_MySuperClass
    .align  8
OBJC_METACLASS_$_MySuperClass:
    .quad   OBJC_METACLASS_$_Object
    .quad   OBJC_METACLASS_$_Object
    .quad   _objc_empty_cache
    .quad   _objc_empty_vtable
    .quad   l_OBJC_METACLASS_RO_$_MySuperClass
    .size   OBJC_METACLASS_$_MySuperClass, 40

    .type   L_OBJC_METH_VAR_NAME_,@object # @"\01L_OBJC_METH_VAR_NAME_"
    .section    "__TEXT,__objc_methname,cstring_literals","aw",@progbits
L_OBJC_METH_VAR_NAME_:
    .asciz   "myMessage1"
    .size   L_OBJC_METH_VAR_NAME_, 11

    .type   L_OBJC_METH_VAR_TYPE_,@object # @"\01L_OBJC_METH_VAR_TYPE_"
    .section    "__TEXT,__objc_methtype,cstring_literals","aw",@progbits
L_OBJC_METH_VAR_TYPE_:
    .asciz   "v16@0:8"
    .size   L_OBJC_METH_VAR_TYPE_, 8

    .type   l_OBJC_$_INSTANCE_METHODS_MySuperClass,@object # @"\01l_OBJC_$_INSTANCE_METHODS_MySuperClass"
    .section    "__DATA, __objc_const","aw",@progbits
    .align  8
l_OBJC_$_INSTANCE_METHODS_MySuperClass:
    .long   24                      # 0x18
    .long   1                       # 0x1
    .quad   L_OBJC_METH_VAR_NAME_
    .quad   L_OBJC_METH_VAR_TYPE_
    .quad   _2D__5B_MySuperClass_20_myMessage1_5D_
    .size   l_OBJC_$_INSTANCE_METHODS_MySuperClass, 32

    .type   l_OBJC_CLASS_RO_$_MySuperClass,@object # @"\01l_OBJC_CLASS_RO_$_MySuperClass"
    .align  8
l_OBJC_CLASS_RO_$_MySuperClass:
    .long   0                       # 0x0
    .long   8                       # 0x8
    .long   8                       # 0x8
    .zero   4
    .quad   0
    .quad   L_OBJC_CLASS_NAME_
    .quad   l_OBJC_$_INSTANCE_METHODS_MySuperClass
    .quad   0
    .quad   0
    .quad   0
    .quad   0
    .size   l_OBJC_CLASS_RO_$_MySuperClass, 72

    .type   OBJC_CLASS_$_MySuperClass,@object # @"OBJC_CLASS_$_MySuperClass"
    .section    "__DATA, __objc_data","aw",@progbits
    .globl  OBJC_CLASS_$_MySuperClass
    .align  8
OBJC_CLASS_$_MySuperClass:
    .quad   OBJC_METACLASS_$_MySuperClass
    .quad   OBJC_CLASS_$_Object
    .quad   _objc_empty_cache
    .quad   _objc_empty_vtable
    .quad   l_OBJC_CLASS_RO_$_MySuperClass
    .size   OBJC_CLASS_$_MySuperClass, 40

    .type   L_OBJC_CLASS_NAME_1,@object # @"\01L_OBJC_CLASS_NAME_1"
    .section    "__TEXT,__objc_classname,cstring_literals","aw",@progbits
L_OBJC_CLASS_NAME_1:
    .asciz   "MyClass"
    .size   L_OBJC_CLASS_NAME_1, 8

    .type   l_OBJC_METACLASS_RO_$_MyClass,@object # @"\01l_OBJC_METACLASS_RO_$_MyClass"
    .section    "__DATA, __objc_const","aw",@progbits
    .align  8
l_OBJC_METACLASS_RO_$_MyClass:
    .long   1                       # 0x1
    .long   40                      # 0x28
    .long   40                      # 0x28
    .zero   4
    .quad   0
    .quad   L_OBJC_CLASS_NAME_1
    .quad   0
    .quad   0
    .quad   0
    .quad   0
    .quad   0
    .size   l_OBJC_METACLASS_RO_$_MyClass, 72

    .type   OBJC_METACLASS_$_MyClass,@object # @"OBJC_METACLASS_$_MyClass"
    .section    "__DATA, __objc_data","aw",@progbits
    .globl  OBJC_METACLASS_$_MyClass
    .align  8
OBJC_METACLASS_$_MyClass:
    .quad   OBJC_METACLASS_$_Object
    .quad   OBJC_METACLASS_$_MySuperClass
    .quad   _objc_empty_cache
    .quad   _objc_empty_vtable
    .quad   l_OBJC_METACLASS_RO_$_MyClass
    .size   OBJC_METACLASS_$_MyClass, 40

    .type   L_OBJC_METH_VAR_NAME_2,@object # @"\01L_OBJC_METH_VAR_NAME_2"
    .section    "__TEXT,__objc_methname,cstring_literals","aw",@progbits
L_OBJC_METH_VAR_NAME_2:
    .asciz   "myMessage2"
    .size   L_OBJC_METH_VAR_NAME_2, 11

    .type   l_OBJC_$_INSTANCE_METHODS_MyClass,@object # @"\01l_OBJC_$_INSTANCE_METHODS_MyClass"
    .section    "__DATA, __objc_const","aw",@progbits
    .align  8
l_OBJC_$_INSTANCE_METHODS_MyClass:
    .long   24                      # 0x18
    .long   1                       # 0x1
    .quad   L_OBJC_METH_VAR_NAME_2
    .quad   L_OBJC_METH_VAR_TYPE_
    .quad   _2D__5B_MyClass_20_myMessage2_5D_
    .size   l_OBJC_$_INSTANCE_METHODS_MyClass, 32

    .type   l_OBJC_CLASS_RO_$_MyClass,@object # @"\01l_OBJC_CLASS_RO_$_MyClass"
    .align  8
l_OBJC_CLASS_RO_$_MyClass:
    .long   0                       # 0x0
    .long   8                       # 0x8
    .long   8                       # 0x8
    .zero   4
    .quad   0
    .quad   L_OBJC_CLASS_NAME_1
    .quad   l_OBJC_$_INSTANCE_METHODS_MyClass
    .quad   0
    .quad   0
    .quad   0
    .quad   0
    .size   l_OBJC_CLASS_RO_$_MyClass, 72

    .type   OBJC_CLASS_$_MyClass,@object # @"OBJC_CLASS_$_MyClass"
    .section    "__DATA, __objc_data","aw",@progbits
    .globl  OBJC_CLASS_$_MyClass
    .align  8
OBJC_CLASS_$_MyClass:
    .quad   OBJC_METACLASS_$_MyClass
    .quad   OBJC_CLASS_$_MySuperClass
    .quad   _objc_empty_cache
    .quad   _objc_empty_vtable
    .quad   l_OBJC_CLASS_RO_$_MyClass
    .size   OBJC_CLASS_$_MyClass, 40

    .type   L_OBJC_LABEL_CLASS_$,@object # @"\01L_OBJC_LABEL_CLASS_$"
    .section    "__DATA, __objc_classlist, regular, no_dead_strip","aw",@progbits
    .align  8
L_OBJC_LABEL_CLASS_$:
    .quad   OBJC_CLASS_$_MySuperClass
    .quad   OBJC_CLASS_$_MyClass
    .size   L_OBJC_LABEL_CLASS_$, 16

    .type   L_OBJC_IMAGE_INFO,@object # @"\01L_OBJC_IMAGE_INFO"
    .section    "__DATA, __objc_imageinfo, regular, no_dead_strip","a",@progbits
    .align  4
L_OBJC_IMAGE_INFO:
    .long   0                       # 0x0
    .long   16                      # 0x10
    .size   L_OBJC_IMAGE_INFO, 8

    .section    ".note.GNU-stack","",@progbits 
```

我的问题是：必须链接`test.o`才能成功创建可执行文件的 Objective-C 运行时库如何检索方法列表以创建例如 vtable？是否可以使用`.section ..., @function`,`.section ..., @object`或`.section ..., @progbits`汇编指令来获取此信息，至少在链接时？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-11T19:39:36.190

编译器、链接器和运行时协同工作。

首先，编译器解析每个类的源代码并发出指令，如`.long`、`.zero`和`.quad`描述类的实例变量、属性、选择器和方法。汇编器将这些指令转换为原始数据。

数据采用运行时可以理解的格式。例如，从 symbol 开始的数据`OBJC_CLASS_$_MyClass`与运行时的布局相匹配`struct class_t`（在 中定义[`objc-runtime-new.h`](http://opensource.apple.com/source/objc4/objc4-532/runtime/objc-runtime-new.h)）。symbol 处的数据`l_OBJC_CLASS_RO_$_MyClass`与运行时的布局相匹配`struct class_ro_t`（尽管大多数字段为 0，因为运行时在加载类时会更新它们）。`struct class_ro_t`有一个类型为的`baseMethods`字段`method_list_t *`，在这种情况下`l_OBJC_CLASS_RO_$_MyClass`被初始化为`l_OBJC_$_INSTANCE_METHODS_MyClass`。在`l_OBJC_$_INSTANCE_METHODS_MyClass`您会发现数据的布局类似于 a `struct method_list_t`，它以 - 数组结尾，`struct method_t`用于类中的每个方法。在您的示例中，这不是很有趣，因为您的每个类只有一个方法。

编译器使用`.section`指令告诉链接器如何将数据块组合在一起。例如，所有的`struct class_t`块将被放在一个名为`__objc_classlist`. 这样，运行时只需查找名为 的部分`__objc_classlist`，然后将整个部分作为`struct class_t`. 看看里面的`GETSECT`宏[`objc-file.mm`](http://opensource.apple.com/source/objc4/objc4-532/runtime/objc-file.mm)。

链接器安排函数`_objc_init`(in [`objc-os.mm`](http://opensource.apple.com/source/objc4/objc4-532/runtime/objc-os.mm)) 在进程生命周期的早期运行*，*即 before `main`。该`_objc_init`函数向动态加载程序注册一些回调。特别是，它告诉加载程序调用`map_images`（in [`objc-runtime-new.mm`](http://opensource.apple.com/source/objc4/objc4-532/runtime/objc-runtime-new.mm)），它调用`map_images_nolock`，最终调用`_read_images`。该`_read_images`函数实际上解析编译器发出的那些数据块，并将它们转换为`objc_msgSend`用于实际向对象发送消息的数据结构。

[您可以下载 Mac OS X 10.8 Objective-C 运行时源代码的存档](http://opensource.apple.com/tarballs/objc4/objc4-532.tar.gz)以了解更多信息。此存档还包含 iOS/ARM（甚至 Windows！）的源文件，尽管它可能与任何版本的 iOS不*完全对应。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T18:11:05.640

并不是运行时知道如何读取您的程序，而是 objc 前端将代码库转换为使用运行时。

# matrix - 如何对带参数的 6x6 矩阵进行符号 LU 分解？

> ID：11916020
> 
> 赞同：1
> 
> 时间：2012-08-11T15:44:46.167
> 
> 标签：matrix, wolframalpha

你好我需要找到这个矩阵的分解

[矩阵](http://www.wolframalpha.com/input/?i=LU+decomposition+of+%7B%7B2x%2C-x%2C0%2C0%2C0%2C1%2Fl%7D%2C%7B-x%2C2x%2C-2x%2C0%2C0%2C1%2Fl%7D%2C%7B-x%2Cx%2C0%2C-2x%2Cx%2C1%2Fl%7D%2C%7B0%2C0%2C0%2C-x%2C4x%2C0%7D%2C%7B0%2C1%2C1%2C1%2C0%2C0%7D%2C%7B1%2C1%2C0%2C0%2C0%2C0%7D%7D)

但正如你所见，wolfram 并不能解决它。这很奇怪，因为例如它可以解决这个问题：

[矩阵可解](http://www.wolframalpha.com/input/?i=LU+decomposition+of+%7B%7B-4%2C-1%2C0%2C-1%2Fx%7D%2C%7B-1%2C-2%2C%2B2%2C0%7D%2C%7B0%2C1%2C1%2C0%7D%2C%7B1%2C0%2C0%2C0%7D%7D)

其中包含与上述相同的参数。

如何使用任何类型的软件分解该矩阵？

我可以使用 Scilab 编程语言解决这个问题吗？（这是开源的）或 R 或​​ Octave 或等效的东西......

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T23:45:54.777

好吧，它可以用 MuPad 完成，但它不是免费的。

![平板电脑](../Images/650325a1d1894bbef4cbdb4ef8ae7ce2.png)

我的猜测是这个矩阵对于 W/Alpha 的免费版本来说太大了。

它也可以用[wxMaxima](http://andrejv.github.com/wxmaxima/)完成，而且是免费的。

![wx千里马](../Images/53bd442b9c1d6aeb76c2aac35138cd8d.png)

# java - 字幕复合

> ID：11916026
> 
> 赞同：0
> 
> 时间：2012-08-11T15:45:41.033
> 
> 标签：java, eclipse-plugin, swt, eclipse-rcp, jface

swt中是否有任何标题组合可用？我的要求是我应该在 SWT 中有一个可用的用户登录表单。该表单应该能够显示在视图内。该表格也应该有一个标题。首先，我想使用某种对话框。但我不想使用任何对话框。有什么方法可以实现相同的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T15:48:38.803

有一个叫做[Eclipse Forms](http://www.eclipse.org/articles/article.php?file=Article-Forms33/index.html)的 API ，它只在 Eclipse 3.3 中引入，所以很多书都没有提到它。它可以让您以一种有点类似于网络的方式组织表单，包括标题和部分以及盒装组等。我认为这可能会满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T13:42:43.253

尝试`LoginDialog`在[Opal SWT Widget Library](http://code.google.com/a/eclipselabs.org/p/opal/wiki/LoginDialog)中查看。它提供了一个即用型和可配置的登录对话框。也许它会适合你。

# merge - 例如，如果我有很多文件，如何在 Linux 中加入两个文件

> ID：11916029
> 
> 赞同：3
> 
> 时间：2012-08-11T15:46:31.303
> 
> 标签：merge, text-files

我有 133 个文件，名为 Trace1.log Trace2.log 等等，所以我怎样才能将所有这些文件合并在一起并将其保存在一个文件中

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-11T16:04:36.360

要按字母顺序简单地连接文件，

```
cat Trace*.log >combined 
```

注意命名目标文件，使其与通配符不匹配，否则您会得到奇怪的结果。

按字母顺序表示 Trace10.log 在 Trace2.log 之前排序。如果需要按数字顺序排列，请使用更合适的命名约定（例如将 Trace1.log 重命名为 Trace001.log 等）或使用多个通配符；

```
cat Trace?.log Trace??.log Trace???.log >combined 
```

语言环境将影响“字母顺序”的确切含义；这些指南至少适用于传统的 C 语言环境和英语语言环境（以及大多数其他西方语言）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-11T15:49:59.113

您可以尝试使用 cat 命令。

```
$ cat Trace* > TraceFull.log 
```

看看这个网站 将[文件连接在一起](http://osr507doc.sco.com/en/OSTut/Joining_files_together.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T15:49:43.840

如果您使用的是基于 unix 的系统，请使用以下命令：

```
cat Trace*.log > TraceMerged.log 
```

（在保存日志的目录中）

# ruby-on-rails - 在不使用 rails 迁移的情况下更新数据库模式

> ID：11916036
> 
> 赞同：1
> 
> 时间：2012-08-11T15:47:11.690
> 
> 标签：ruby-on-rails, ruby, database, schema, rake

我正在寻找一个自动更新架构的命令，而无需编写迁移文件。

例如，当我通过一些配置启动 Java Hibernate 应用程序时，数据库模式会自动构建和更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T16:04:19.620

据我所知，这对于 ActiveRecord 是不可能的，但如果您不介意更改 ORM，您可以查看[DataMapper](http://datamapper.org)。

使用 DM，您可以在模型代码本身中定义模型的“属性”（属性），然后您可以简单地运行 rake db:automigrate 来更新数据库的模式，例如

```
class Blog
  property :title,    String
  property :body,     Text
  property :user_id,  Integer, :required => true
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T18:41:51.220

使用[续集](http://sequel.rubyforge.org/)，您可以

一个示例（使用 sqlite，但与其他适配器相同）

首先正常启动：

```
require "sequel"
DB = Sequel.sqlite(DB_NAME)

# create an items table
DB.create_table :items do
  primary_key :id
  String :name
  Float :price
end

# [....]

require "sequel"
DB = Sequel.sqlite('test.db')

# create an items table
DB.create_table :items do
  primary_key :id
  String :name
  Float :price
end 
```

稍后您可以修改表：

```
DB.add_column :items, :valid_from, Date 
```

可以进行以下修改（也许还有更多）：

*   添加列
*   添加索引
*   创建视图
*   drop_column
*   drop_index
*   drop_table
*   drop_view
*   重命名表
*   重命名列
*   set_column_default
*   设置列类型

* * *

结合`rake`您可以执行以下操作：

```
require "rake"
require "sequel"

task :connect do
  DB = Sequel.sqlite('test.db')
end

desc 'create an items table'
task :create_items => :connect do
  DB.create_table :items do
    primary_key :id
    String :name
    Float :price
  end
end

task :add_dates_to_items => :connect do
  #check if items exist is missing
  DB.add_column :items, :valid_from, Date
end 
```

备注：迁移有助于避免模式修改的错误顺序。使用迁移，您可以定义正确的顺序。实际状态被存储，您可以降级。

# php - Pubnub 多用户聊天

> ID：11916037
> 
> 赞同：0
> 
> 时间：2012-08-11T15:47:13.880
> 
> 标签：php, push-notification, chat, real-time, pubnub

我正在用 php 开发一个多用户聊天系统。我知道推拉、反向 ajax、彗星等，但大多数情况下我们必须在我们的服务器上进行配置。

但是，我无法访问我的服务器来安装这些脚本，因为我有共享托管服务提供商。

所以经过一些研究我才知道**pusher**，**pubnub**提供了 api 来在浏览器上推送数据。

问题是关于**pubnub**，他们正在提供向客户端发送数据的渠道，但问题是我想开发多用户聊天，其中数据将仅发送给一个用户，而不是多播聊天。

我认为一种解决方案是为每个用户创建一个唯一的频道，以便数据只会发送给该用户，但这似乎效率不高。**那么用pubnub**实现多用户聊天系统的任何其他方式？

或任何其他更好的建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T21:50:21.523

# 带有 PubNub 的多用户聊天系统

开始使用 - [PubNub 最佳实践：如何管理私人房间？](https://stackoverflow.com/questions/10459123/pubnub-best-practice-how-to-manage-private-rooms?answertab=active#tab-top)

您正在询问具有 PubNub 的多用户聊天系统，其中通信方式是两个用户之间的一对一并行对话。好消息！PubNub 有一项名为**PubNub PULSE**的服务- 为您的多用户聊天提供理想的一对一交流方式 - [http://www.pubnub.com/price](http://www.pubnub.com/price)（请参阅**PULSE**部分）。

## PubNub 最佳实践 - 如何管理私人房间

还有一个从这里开始的对话，Mikita 提到了如何创建多房间聊天服务，可能类似于 Facebook 聊天，您可以在其中加入并坐在多个聊天室 - [PubNub 最佳实践：如何管理私人房间？](https://stackoverflow.com/questions/10459123/pubnub-best-practice-how-to-manage-private-rooms?answertab=active#tab-top)

> 编辑 - 更新信息 - 2018 年 3 月

每个用户使用一个频道并不是低效的。使用尽可能多的频道。就您使用的频道数量而言，它们不会花费您更多（或更少）。

上述定价计划已过时。请查看[PubNub 定价和远离设备计数。](https://www.pubnub.com/blog/pubnub-pricing-and-the-move-away-from-device-counting/)

# c# - 用于不同序列的 Rx 运算符

> ID：11916038
> 
> 赞同：10
> 
> 时间：2012-08-11T15:47:18.603
> 
> 标签：c#, system.reactive

**重要提示**：有关结果的描述和更多详细信息，请查看我的回答

我需要对通常被复制的一系列对象/事件进行分组和过滤，并用 TimeSpan 间隔对其进行缓冲。我尝试用一​​些大理石图更好地解释它：

```
X-X-X-X-X-Y-Y-Y-Z-Z-Z-Z-X-X-Y-Z-Z 
```

会产生

```
X---Y---Z---X---Y---Z 
```

其中 X、Y 和 Z 是不同的事件类型，“---”表示间隔。此外，我还想通过一个关键属性来区分它在所有类型上都可用，因为它们有一个共同的基类：

```
X, Y, Z : A 
```

A 包含一个属性 Key。使用符号 Xa 表示 X.Key = a，最终样本将是：

```
X.a-X.b-X.a-Y.b-Y.c-Z.a-Z.a-Z.c-Z.b-Z.c 
```

会产生

```
X.a-X.b---Y.b-Y.c-Z.a-Z.c-Z.b 
```

任何人都可以帮助我将所需的 Linq 运算符（可能是 DistinctUntilChanged 和 Buffer）放在一起来实现这种行为吗？谢谢

**更新 18.08.12**：

根据要求，我尝试给出更好的解释。我们有设备收集事件并将其发送到 Web 服务。这些设备具有旧逻辑（由于向后兼容性，我们无法更改它）并且它们不断发送事件直到收到确认；确认后，他们发送队列中的下一个事件，依此类推。事件包含单元的网络地址和一些其他属性，用于区分每个设备的队列中的事件。一个事件如下所示：

```
class Event
{
    public string NetworkAddress { get; }

    public string EventCode { get; }

    public string AdditionalAttribute { get; }
} 
```

目标是每 5 秒处理一次从所有设备接收到的可区分事件，将信息存储在数据库中（这就是我们不想分批执行此操作的原因）并将 ack 发送到设备。让我们举一个只有两个设备和一些事件的例子：

```
Device 'a':
Event 1 (a1): NetworkAddress = '1', EventCode = A, AdditionalAttribute = 'x'
Event 2 (a2): NetworkAddress = '1', EventCode = A, AdditionalAttribute = 'y'
Event 3 (a3): NetworkAddress = '1', EventCode = B, AdditionalAttribute = 'x'

Device 'b':
Event 1 (b1): NetworkAddress = '2', EventCode = A, AdditionalAttribute = 'y'
Event 2 (b2): NetworkAddress = '2', EventCode = B, AdditionalAttribute = 'x'
Event 3 (b3): NetworkAddress = '2', EventCode = B, AdditionalAttribute = 'y'
Event 4 (b4): NetworkAddress = '2', EventCode = C, AdditionalAttribute = 'x'

Pn are the operations done by our server, explained later 
```

可能的弹珠图（输入流+输出流）：

```
Device 'a'          : -[a1]-[a1]-[a1]----------------[a2]-[a2]-[a2]-[a3]-[a3]-[a3]-...
Device 'b'          : ------[b1]-[b1]-[b2]-[b2]-[b2]------[b3]-[b3]-[b4]-[b4]-[b4]-...

Time                : ------------[1s]-----------[2s]------------[3s]------------[4s]-
DB/acks (rx output) : ------------[P1]-----------[P2]------------[P3]------------[P4]-

P1: Server stores and acknowledges [a1] and [b1]
P2: "      "      "   "            [b2]
P3: "      "      "   "            [a2] and [b3]
P4: "      "      "   "            [a3] and [b4] 
```

最后我认为这可能是基本运算符的简单组合，但我是 Rx 新手，我有点困惑，因为似乎有很多运算符（或运算符组合）来获得相同的输出流.

**更新 19.08.12**：

请记住，此代码在服务器上运行，它应该运行数天而不会发生内存泄漏......我不确定受试者的行为。目前，对于每个事件，我都会在服务上调用推送操作，该服务调用主题的 OnNext，我应该在其上构建查询（如果我对主题的使用没有错的话）。

**20.08.12 更新**：

当前实施，包括验证测试；这是我尝试过的，@yamen 的建议似乎相同

```
public interface IEventService
{
    // Persists the events
    void Add(IEnumerable<Event> events);
}

public class Event
{
    public string Description { get; set; }
}

/// <summary>
/// Implements the logic to handle events.
/// </summary>
public class EventManager : IDisposable
{
    private static readonly TimeSpan EventHandlingPeriod = TimeSpan.FromSeconds(5);

    private readonly Subject<EventMessage> subject = new Subject<EventMessage>();

    private readonly IDisposable subscription;

    private readonly object locker = new object();

    private readonly IEventService eventService;

    /// <summary>
    /// Initializes a new instance of the <see cref="EventManager"/> class.
    /// </summary>
    /// <param name="scheduler">The scheduler.</param>
    public EventManager(IEventService eventService, IScheduler scheduler)
    {
        this.eventService = eventService;
        this.subscription = this.CreateQuery(scheduler);
    }

    /// <summary>
    /// Pushes the event.
    /// </summary>
    /// <param name="eventMessage">The event message.</param>
    public void PushEvent(EventMessage eventMessage)
    {
        Contract.Requires(eventMessage != null);
        this.subject.OnNext(eventMessage);
    }

    /// <summary>
    /// Performs application-defined tasks associated with freeing, releasing, or resetting unmanaged resources.
    /// </summary>
    /// <filterpriority>2</filterpriority>
    public void Dispose()
    {
        this.Dispose(true);
    }

    private void Dispose(bool disposing)
    {
        if (disposing)
        {
            // Dispose unmanaged resources
        }

        this.subject.Dispose();
        this.subscription.Dispose();
    }

    private IDisposable CreateQuery(IScheduler scheduler)
    {
        var buffered = this.subject
            .DistinctUntilChanged(new EventComparer())
            .Buffer(EventHandlingPeriod, scheduler);

        var query = buffered
            .Subscribe(this.HandleEvents);
        return query;
    }

    private void HandleEvents(IList<EventMessage> eventMessages)
    {
        Contract.Requires(eventMessages != null);
        var events = eventMessages.Select(this.SelectEvent);
        this.eventService.Add(events);
    }

    private Event SelectEvent(EventMessage message)
    {
        return new Event { Description = "evaluated description" };
    }

    private class EventComparer : IEqualityComparer<EventMessage>
    {
        public bool Equals(EventMessage x, EventMessage y)
        {
            return x.NetworkAddress == y.NetworkAddress && x.EventCode == y.EventCode && x.Attribute == y.Attribute;
        }

        public int GetHashCode(EventMessage obj)
        {
            var s = string.Concat(obj.NetworkAddress + "_" + obj.EventCode + "_" + obj.Attribute);
            return s.GetHashCode();
        }
    }
}

public class EventMessage
{
    public string NetworkAddress { get; set; }

    public byte EventCode { get; set; }

    public byte Attribute { get; set; }

    // Other properties
} 
```

和测试：

```
public void PushEventTest()
    {
        const string Address1 = "A:2.1.1";
        const string Address2 = "A:2.1.2";

        var eventServiceMock = new Mock<IEventService>();

        var scheduler = new TestScheduler();
        var target = new EventManager(eventServiceMock.Object, scheduler);
        var eventMessageA1 = new EventMessage { NetworkAddress = Address1, EventCode = 1, Attribute = 4 };
        var eventMessageB1 = new EventMessage { NetworkAddress = Address2, EventCode = 1, Attribute = 5 };
        var eventMessageA2 = new EventMessage { NetworkAddress = Address1, EventCode = 1, Attribute = 4 };
        scheduler.Schedule(() => target.PushEvent(eventMessageA1));
        scheduler.Schedule(TimeSpan.FromSeconds(1), () => target.PushEvent(eventMessageB1));
        scheduler.Schedule(TimeSpan.FromSeconds(2), () => target.PushEvent(eventMessageA1));

        scheduler.AdvanceTo(TimeSpan.FromSeconds(6).Ticks);

        eventServiceMock.Verify(s => s.Add(It.Is<List<Event>>(list => list.Count == 2)), Times.Once());

        scheduler.Schedule(TimeSpan.FromSeconds(3), () => target.PushEvent(eventMessageB1));

        scheduler.AdvanceTo(TimeSpan.FromSeconds(11).Ticks);

        eventServiceMock.Verify(s => s.Add(It.Is<List<Event>>(list => list.Count == 1)), Times.Once());
    } 
```

此外，我再次指出，该软件可以无问题地运行数天，处理数千条消息，这一点非常重要。说清楚：测试没有通过当前的实现。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T21:25:31.520

我不确定这是否完全符合您的要求，但您可能会使用`group`关键字显式地对元素进行分组，然后`IObservable`在重新组合之前分别操作各个 s。

例如，如果我们有类定义，例如

```
class A
{
    public char Key { get; set; }
}

class X : A { }
... 
```

和一个`Subject<A>`

```
Subject<A> subject = new Subject<A>(); 
```

然后我们可以写

```
var buffered =
    from a in subject
    group a by new { Type = a.GetType(), Key = a.Key } into g
    from buffer in g.Buffer(TimeSpan.FromMilliseconds(300))
    where buffer.Any()
    select new
    {
        Count = buffer.Count,
        Type = buffer.First().GetType().Name,
        Key = buffer.First().Key
    };

buffered.Do(Console.WriteLine).Subscribe(); 
```

我们可以使用您提供的数据对此进行测试：

```
subject.OnNext(new X { Key = 'a' }); 
Thread.Sleep(100);
subject.OnNext(new X { Key = 'b' }); 
Thread.Sleep(100);
subject.OnNext(new X { Key = 'a' }); 
Thread.Sleep(100);
...
subject.OnCompleted(); 
```

要获得您提供的输出：

```
{ Count = 2, Type = X, Key = a }
{ Count = 1, Type = X, Key = b }
{ Count = 1, Type = Y, Key = b }
{ Count = 1, Type = Y, Key = c }
{ Count = 2, Type = Z, Key = a }
{ Count = 2, Type = Z, Key = c }
{ Count = 1, Type = Z, Key = b } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T07:36:17.447

不确定这是否正是您想要的，但它似乎支持您的用例。

首先，让我们定义要使用的基类（您可以轻松修改它以满足您的需要）：

```
public class MyEvent
{
    public string NetworkAddress { set; get; }
    public string EventCode { set; get; }
} 
```

让我们将您的设备设置为一个数组`IObservable<MyEvent>`- 您可能以不同的方式提供这些设备，当然需要更改以下内容以适应它。这些设备都会产生一个随机延迟在 0.5 到 1.5 秒之间的值。

```
var deviceA = new MyEvent[] { new MyEvent() {NetworkAddress = "A", EventCode = "1"},
                              new MyEvent() {NetworkAddress = "A", EventCode = "1"},
                              new MyEvent() {NetworkAddress = "A", EventCode = "2"} };

var deviceB = new MyEvent[] { new MyEvent() {NetworkAddress = "B", EventCode = "1"},
                              new MyEvent() {NetworkAddress = "B", EventCode = "2"},
                              new MyEvent() {NetworkAddress = "B", EventCode = "2"},
                              new MyEvent() {NetworkAddress = "B", EventCode = "3"} };   

var random = new Random();                                 

var deviceARand = deviceA.ToObservable().Select(a => Observable.Return(a).Delay(TimeSpan.FromMilliseconds(random.Next(500,1500)))).Concat();
var deviceBRand = deviceB.ToObservable().Select(b => Observable.Return(b).Delay(TimeSpan.FromMilliseconds(random.Next(500,1500)))).Concat();

var devices = new IObservable<MyEvent>[] { deviceARand, deviceBRand }; 
```

现在让我们获取所有这些单独的设备流，使它们“不同”，并将它们合并为一个主流：

```
var stream = devices.Aggregate(Observable.Empty<MyEvent>(), (acc, device) => acc.DistinctUntilChanged(a => a.EventCode).Merge(device)); 
```

一旦你有了它，让这个流定期被消耗只是一个缓冲它的问题`Buffer`：

```
stream.Buffer(TimeSpan.FromSeconds(1)).Subscribe(x => { /* code here works on a list of the filtered events per second */ }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T10:06:26.603

在搜索和实验之后，我整理了一些产生我期望的输出的代码：

```
static void Main(string[] args)
    {
        const string Address1 = "A:2.1.1";
        const string Address2 = "A:2.1.2";
        var comparer = new EventComparer();
        var eventMessageA1 = new EventMessage { NetworkAddress = Address1, EventCode = 1, Attribute = 4 };
        var eventMessageB1 = new EventMessage { NetworkAddress = Address2, EventCode = 1, Attribute = 5 };
        var eventMessageA2 = new EventMessage { NetworkAddress = Address1, EventCode = 1, Attribute = 5 };
        var list = new[] { eventMessageA1, eventMessageA1, eventMessageB1, eventMessageA2, eventMessageA1, eventMessageA1 };

        var queue = new BlockingCollection<EventMessage>();
        Observable.Interval(TimeSpan.FromSeconds(2)).Subscribe
            (
                l => list.ToList().ForEach(m =>
                {
                    Console.WriteLine("Producing {0} on thread {1}", m, Thread.CurrentThread.ManagedThreadId);
                    queue.Add(m);
                })
            );

        // subscribing
        queue.GetConsumingEnumerable()
            .ToObservable()
             .Buffer(TimeSpan.FromSeconds(5))
             .Subscribe(e =>
                 {
                     Console.WriteLine("Queue contains {0} items", queue.Count);
                     e.Distinct(comparer).ToList().ForEach(m =>
                  Console.WriteLine("{0} - Consuming: {1} (queue contains {2} items)", DateTime.UtcNow, m, queue.Count));
                 }
             );

        Console.WriteLine("Type enter to exit");
        Console.ReadLine();
    }

    public class EventComparer : IEqualityComparer<EventMessage>
    {
        public bool Equals(EventMessage x, EventMessage y)
        {
            var result = x.NetworkAddress == y.NetworkAddress && x.EventCode == y.EventCode && x.Attribute == y.Attribute;
            return result;
        }

        public int GetHashCode(EventMessage obj)
        {
            var s = string.Concat(obj.NetworkAddress + "_" + obj.EventCode + "_" + obj.Attribute);
            return s.GetHashCode();
        }
    }

    public class EventMessage
    {
        public string NetworkAddress { get; set; }

        public byte EventCode { get; set; }

        public byte Attribute { get; set; }

        public override string ToString()
        {
            const string Format = "{0} ({1}, {2})";
            var s = string.Format(Format, this.NetworkAddress, this.EventCode, this.Attribute);
            return s;
        }
    } 
```

无论如何，监控应用程序，似乎这会导致内存泄漏。我现在的问题是：

*   是什么导致内存泄漏？[请看下面的更新]
*   这是最好的方法吗（如果我将 distinct 放在第一个 observable 上，我不会在下一个缓冲区上获得其他事件，但每个缓冲区中的项目应该与其他项目隔离）？
*   如何使用测试调度程序编写测试？

**更新**：

似乎内存增量只持续了几分钟，然后值是稳定的。我将进行长时间的测试。当然，这将是一个绝对可以接受的行为。

**更新 26.08.12**：

*   正如我在之前的更新中已经提到的那样，内存使用量只会在启动后的几分钟内（并且缓慢地）增加。8小时后内存消耗稳定，正常波动在几KB范围内）
*   这个[问题](https://stackoverflow.com/questions/4505529/rx-iobservable-buffering-to-smooth-out-bursts-of-events "缓冲以消除突发事件")与我的非常相似，建议的 Drain 扩展可以很好地适用于我的问题（仍有待验证）

无论如何，我认为我的问题仍然可以**使用 test scheduler 进行单元测试**。

感谢弗朗切斯科

# c# - 为什么我在 Visual C# 项目中使用 Measurement Studio .NET 控件时在运行时收到未经许可的程序集错误消息

> ID：11916044
> 
> 赞同：0
> 
> 时间：2012-08-11T15:47:56.373
> 
> 标签：c#, visual-studio-2008, runtime, measurement

我在 Visual Studio 2008 express 和 Windows XP 下使用 NI Measurement Studio 2012 免费评估。

我的问题如下：

我可以毫无问题地编译我的 C# 解决方案，但在运行时，我在尝试实例化时收到与 PropertyEditor 相关的未经许可的程序集错误消息：

新的属性编辑器（）；

谁能帮我解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T16:13:19.367

听起来 .lic 文件丢失了。也许这可能会有所帮助：http: [//joule.ni.com/nidu/cds/view/p/id/3064/lang/en](http://joule.ni.com/nidu/cds/view/p/id/3064/lang/en)

# java - 如何从同一 GlassFish Server 上的另一个应用程序注入 EJB？

> ID：11916045
> 
> 赞同：4
> 
> 时间：2012-08-11T15:48:19.643
> 
> 标签：java, jakarta-ee, glassfish, ejb

我在本地 glassfish 服务器上运行了两个应用程序。一辆租自行车，一辆买火车票。我现在想从火车应用程序中调用远程 ejb，以允许在所选时间租用自行车，但我不确定该怎么做。我已经尝试了几种不同的方法。两个应用程序都在不同的包中，火车应用程序必须知道自行车远程接口，但我不知道如何实现。

远程界面（自行车应用）：

```
@Remote
public interface FahrradRemote {
    public List<Fahrrad> findAvaible(Date start, Date end);
    public void addAuftrag(Fahrrad fahrrad, Date startDate, Date endDate);
    public boolean login(String name, String passwort);
} 
```

我想调用的自行车 EJB：

```
@Stateless(name="FahrradService",mappedName="FahrradService")
public class FahrradService implements javax.ejb.SessionBean, FahrradRemote, Serializable {

    @PersistenceContext
    private EntityManager em;
    Kunde customer;
...
} 
```

火车应用程序的开始：

```
@Named
@SessionScoped
public class BahnPM implements Serializable {

    private String startStation;
    private String zielStation;
    private String loginName;
    private String loginPasswort;
    private String customerName;
    private String startDateString;
    private Date startDate;
    private List<Fahrt> available;
    private List stations;

    @EJB
    private BahnService service;

    @EJB(mappedName="FahrradService")
    private static FahrradRemote fahrradService;

    public BahnPM() {
    }

    ...
} 
```

我得到的错误是找不到类的异常，我可以理解，因为它是一个不同的应用程序，我的火车应用程序不知道“FahrradRemote”，但我怎样才能注入那个 EJB？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T22:18:30.560

在您的自行车应用程序中，您必须：

*   从`@Remote`您的`interface FahrradRemote`
*   将`@Remote`注释添加到您的`FahrradService` `EJB`

你可以按照这个片段：

```
@Remote(FahrradRemote.class)
@Stateless
public class FahrradService implements FahrradRemote, Serializable {
    .... // your code 
} 
```

（如果您使用的是 EJB 3.X，则无需 EJB 显式实现 SessionBean 接口）

在您的火车应用程序中：

```
@EJB(name="FahrradService") 
private FahrradRemote fahrradService; 
```

（使用`name`属性而不是`mappedName`; 并且您不能在无状态 EJB 中拥有静态属性）

最后，您必须告诉容器在哪里查找 EJB 实现：创建描述符`glassfish-ejb-jar.xml`，并在`glassfish-ejb-jar`标签内放入：

```
<enterprise-beans>
  <ejb>
    <ejb-name>BahnPM</ejb-name>
    <ejb-ref>
      <ejb-ref-name>FahrradService</ejb-ref-name>
      <jndi-name>java:global/MyRemoteBeanModule/MyRemoteBean</jndi-name>
    </ejb-ref>
  </ejb>
</enterprise-beans> 
```

`java:global/MyRemoteBeanModule/MyRemoteBean`部署自行车应用程序时，GlassFish 日志中提供了远程 EJB 的可移植 JNDI 名称（我称之为）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-06T10:32:54.810

我们在两台服务器上制作了相同的示例：Glassfish 4.1.1 和 Websphere Traditional 8.5.5.5

在这两种情况下，我们都部署了两个独立的包：

*   与 servlet 的战争，
*   还有一个带有 EJB 的 jar。

servlet 通过带有@EJB 的远程接口注入EJB，而注入点没有任何参数。这在 Glassfish 中有效。**但是**，为了使其在 Websphere 中工作，我们必须在注入点*@EJB(lookup="java:global/ejbBasico/NewSessionBean")中包含以下显式查找*

**Glassfish Servlet 片段**：

```
/*imports omitted */
@WebServlet(name = "MiServlet", urlPatterns = {"/MiServlet"})
public class Servlet extends HttpServlet {

   @EJB
   private Interfaz miEjb;
   protected void processRequest(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
       response.setContentType("text/html;charset=UTF-8");
       PrintWriter out = response.getWriter();
       try {
           out.println("Result: " + miEjb.businessMethod());
       } 
       finally {            
        out.close();
    }
 /*Additional servlet code not included*/
} 
```

**Glassfish EJB 片段**：

```
/*imports omitted */
@Stateless
public class NewSessionBean implements Interfaz {
    @Override
    public String businessMethod() {
        return("You've called the EJB");
    }
} 
```

**接口**：

```
/*imports omitted */
@Remote
public interface Interfaz {
    String businessMethod();     
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T21:24:44.647

你应该有一个`FahrradService-EJB`罐子和一个`FahrradService-client`罐子（名字是例子，只有两个罐子）。如果您使用 Jave EE 插件/工具创建了 EJB，那么您的 IDE 会为您生成两者。

您的 EBJ jar 和客户端 jar 都将与其中一个应用程序一起打包。应用程序的部署将建立 EJB，因此它可以被引用、查找、注入等。

您的客户端 jar 将被打包在任何其他想要通过 @EJB 或查找使用 EJB 的应用程序中。

假设两个应用程序都部署到同一个应用服务器实例，它应该就是这么简单。

# compilation - FreeBSD 自定义配置参数

> ID：11916049
> 
> 赞同：0
> 
> 时间：2012-08-11T15:49:05.373
> 
> 标签：compilation, makefile, freebsd, configure

如果我需要一些默认`make config`窗口中不存在的自定义配置参数，那么在 FreeBSD 中从端口编译程序的最佳方法是什么？例如，我想用 --enable-intl 标志编译 php

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T09:34:03.250

你可以试试

```
make configure CONFIGURE_ARGS=--enable-intl 
```

但我不确定它是否会起作用。如果没有，请编辑`/usr/ports/lang/php5/Makefile`文件并添加`--enable-intl`到`CONFIGURE_ARGS`那里。之后不要忘记`make clean`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T11:06:40.157

**在这种情况下**，正确的方法是安装扩展：`/usr/ports/devel/pecl-intl`.

通常，如果您想要一个不在端口中的配置选项，最好的方法是为端口 Makefile 提交一个补丁，其中包含它作为选项。这样您就不必担心在每次端口树更新后重新应用补丁，其他人也可以从中受益。

# java - 处理包含撇号 SQL 的大字符串

> ID：11916053
> 
> 赞同：0
> 
> 时间：2012-08-11T15:49:24.280
> 
> 标签：java, sql

现在我遇到了一个问题，尝试将一些信息插入数据库给我一个 SQLException：一般错误。我已经确定问题是我的字符串中有撇号。这是我的更新声明：

```
AniDB.updateTbl("UPDATE SeriesTbl SET SeriesSynopsis = '" + synop + "' WHERE  SeriesID = " + sID); 
```

SeriesSynopsis 包含许多记录，所有记录都具有不同的字符串。假设为了争论，一个记录是“汤姆不喜欢猫”，另一个记录是“蒂莫西不能不在乎猫”。撇号在不同的位置，干扰了我的 SQL 语句。有想法该怎么解决这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T15:50:33.203

尝试

```
AniDB.updateTbl("UPDATE SeriesTbl SET SeriesSynopsis = '" + synop.replace("'", "''") + "' WHERE  SeriesID = " + sID); 
```

您可以使用 2 个引号来转义一个引号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T16:00:25.370

请阅读此页面：[https ://www.owasp.org/index.php/Preventing_SQL_Injection_in_Java](https://www.owasp.org/index.php/Preventing_SQL_Injection_in_Java)

除了解决您眼前的问题之外，学习使用准备好的语句将使您的代码更不容易受到攻击，可以简化您的代码并使其更具可移植性，并且可以提高数据库的效率。我认为 SQL 注入问题很紧迫……非常值得花时间。

# c# - sql插入不起作用c#querybuilder

> ID：11916060
> 
> 赞同：0
> 
> 时间：2012-08-11T15:50:33.793
> 
> 标签：c#, sql-server

我在从 C# 连接到 SQL Server 2008 R2 时遇到了一个严重问题，因为我更改了一些 SQL Server 设置。现在我无法通过以下代码连接到 SQL Server：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data.SqlClient;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        kamiDataSetTableAdapters.kami2TableAdapter kap = new     WindowsFormsApplication1.kamiDataSetTableAdapters.kami2TableAdapter();

        decimal a = Convert.ToDecimal( "11.2");
        int b = 11;

        kap.Insert(Convert.ToDecimal("11.2"), b, Convert.ToDecimal("11.2"),  Convert.ToDecimal("11.2"));
    }
} 
```

}

（该表有四个十进制和一个整数列）

但是，我可以通过 querybuilder gui 连接和插入或选择字段。不幸的是，由于声誉低，我无法上传图片。

错误是

> *建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：TCP 提供者，错误：0 - 由于目标机器主动拒绝，无法建立连接。）*

请您指导我，我的老板很生气！

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T18:21:20.710

两种可能

1/如果您使用 sql 身份验证：创建一个 sqlconnection 并尝试使用您的用户和密码打开一个连接，如果它有效，请更改您的连接字符串上的用户密码

如果您使用 Windows 身份验证：您使用 Trusted_Connection 设置连接字符串并检查它是否有效

2/确保指定好的sql server instance (servername\serverinstance)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T15:59:26.477

在不知道您更改了哪些设置的情况下，除了连接问题之外，很难准确判断。您需要从应用程序的连接字符串开始；听起来您可能正在使用不同的连接。

我假设远程连接可能不是它；因为你可以连接。

如果您更改了身份验证设置或数据库权限，则需要确保您的应用程序连接的任何帐户都具有适当的权限。

# algorithm - 在列表中找到 k 个不重复的元素，额外的空间“很少”

> ID：11916062
> 
> 赞同：26
> 
> 时间：2012-08-11T15:50:38.930
> 
> 标签：algorithm, time-complexity, xor, space-complexity

最初的问题陈述是这样的：

> 给定一个 32 位无符号整数数组，其中每个数字都恰好出现两次，除了其中三个（恰好出现一次），使用 O(1) 额外空间在 O(n) 时间内找到这三个数字。输入数组是只读的。如果有 k 个异常而不是 3 个呢？

如果由于输入限制而接受一个非常高的常数因子，则很容易在`Ο(1)`时间和空间上解决这个问题（数组最多可以有 2 ^(33)个条目）：`Ο(1)`

```
for i in lst:
    if sum(1 for j in lst if i == j) == 1:
        print i 
```

所以，为了这个问题，**让我们放弃对位长度的限制，专注于数字最多可以有`m`位的更普遍的问题。**

[概括 k = 2 的算法](http://www.geeksforgeeks.org/archives/2457)，我想到的是以下内容：

1.  XOR 那些具有最低有效位的数字`1`和那些分别具有的数字`0`。如果对于两个分区，结果值都不为零，我们知道我们已经将不重复的数字分成了两组，每组至少有一个成员
2.  对于这些组中的每一个，尝试通过检查第二低有效位来进一步划分它，依此类推

不过，有一个特殊情况需要考虑。如果在划分一个组之后，其中一个组的 XOR 值都为零，我们不知道得到的子组之一是否为空。在这种情况下，我的算法只是忽略了这一位并继续下一个，这是不正确的，例如它对 input 失败`[0,1,2,3,4,5,6]`。

现在我的想法是不仅要计算元素的 XOR，还要计算应用某个函数后的值的 XOR（我在`f(x) = 3x + 1`这里选择了）。有关此附加检查的反例，请参见下面 Evgeny 的回答。

现在虽然**下面的算法对于 k >= 7 是不正确的**，我仍然在这里包含实现给你一个想法：

```
def xor(seq):
  return reduce(lambda x, y: x ^ y, seq, 0)

def compute_xors(ary, mask, bits):
  a = xor(i for i in ary if i & mask == bits)
  b = xor(i * 3 + 1 for i in ary if i & mask == bits)
  return a if max(a, b) > 0 else None

def solve(ary, high = 0, mask = 0, bits = 0, old_xor = 0):
  for h in xrange(high, 32):
    hibit = 1 << h
    m = mask | hibit
    # partition the array into two groups
    x = compute_xors(ary, m, bits | hibit)
    y = compute_xors(ary, m, bits)
    if x is None or y is None:
      # at this point, we can't be sure if both groups are non-empty,
      # so we check the next bit
      continue
    mask |= hibit
    # we recurse if we are absolutely sure that we can find at least one
    # new value in both branches. This means that the number of recursions
    # is linear in k, rather then exponential.
    solve(ary, h + 1, mask, bits | hibit, x)
    solve(ary, h + 1, mask, bits, y)
    break
  else:
    # we couldn't find a partitioning bit, so we output (but 
    # this might be incorrect, see above!)
    print old_xor

# expects input of the form "10 1 1 2 3 4 2 5 6 7 10"
ary = map(int, raw_input().split())
solve(ary, old_xor=xor(ary)) 
```

根据我的分析，这段代码的最坏情况时间复杂度`O(k * m² * n)`是`n`输入元素的数量（异或是`O(m)`，最多`k`分区操作可以成功）和空间复杂度`O(m²)`（因为`m`最大递归深度和临时数字可以是长度`m`）。

问题当然是是否存在具有良好渐近运行时的*正确*`k << n`、有效的方法（为了完整起见，我们假设`m << n`这里），它也需要很少的额外空间（例如，对输入进行排序的方法将不被接受，因为我们至少需要`O(n)`额外的空间，因为我们不能修改输入！）。

**编辑：**既然上面的算法被证明是不正确的，当然很高兴看到它是如何正确的，可能会降低它的效率。空间复杂度应该是 in `o(n*m)`（即，在输入比特的总数中是次线性的）。如果这样可以使任务更容易，则可以将其`k`作为附加输入。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-13T23:59:21.023

我离线并根据 XOR 技巧有效的猜想证明了原始算法。碰巧，XOR 技巧不起作用，但下面的论点可能仍然有些人感兴趣。（我在 Haskell 中重新做了，因为当我使用递归函数而不是循环并且我可以使用数据结构时，我发现证明更容易。但是对于观众中的 Pythonista，我尝试尽可能使用列表推导。）

[http://pastebin.com/BHCKGVaV](http://pastebin.com/BHCKGVaV)上的可编译代码。

# 美丽的理论被丑陋的事实扼杀

问题：给定一个由*n 个*非零 32 位字组成的序列，其中每个元素要么是*单例*，要么是双*例*：

*   如果一个词只出现一次，那就是*单例*。

*   如果一个词恰好出现两次，则为*doubleton*。

*   没有单词出现三次或更多次。

问题是找到单身人士。如果有三个单例，我们应该使用线性时间和常数空间。更一般地，如果有*k*个单例，我们应该使用*O(k*n)*时间和*O(k)*空间。该算法基于一个未经证实的关于异或的猜想。

我们从这些基础开始：

```
module Singleton where
import Data.Bits
import Data.List
import Data.Word
import Test.QuickCheck hiding ((.&.)) 
```

## 关键抽象：词的部分说明

为了解决这个问题，我将引入一个抽象：为了描述一个 32 位字的最低有效 $w$ 位，我引入一个`Spec`：

```
data Spec = Spec { w :: Int, bits :: Word32 }
   deriving Show
width = w -- width of a Spec 
```

`Spec`如果最低有效`w`位等于 ，则A匹配一个单词`bits`。如果`w`为零，则根据定义，所有单词都匹配：

```
matches :: Spec -> Word32 -> Bool
matches spec word = width spec == 0 ||
                    ((word `shiftL` n) `shiftR` n) == bits spec
  where n = 32 - width spec

universalSpec = Spec { w = 0, bits = 0 } 
```

`Spec`以下是关于s的一些声明：

*   所有单词都与`universalSpec`宽度为 0的 匹配

*   如果`matches spec word`和`width spec == 32`，那么 `word == bits spec`

## 关键思想：“扩展”部分规范

这是算法的关键思想：我们可以通过在规范中添加另一个位来*扩展*a `Spec`。扩展 a`Spec` 会产生一个包含两个`Spec`s的列表

```
extend :: Spec -> [Spec]
extend spec = [ Spec { w = w', bits = bits spec .|. (bit `shiftL` width spec) }
              | bit <- [0, 1] ]
  where w' = width spec + 1 
```

这是关键的声明：如果`spec`匹配`word`且如果 `width spec`小于 32，则恰好是`extend spec`match的两个规范之一`word`。证明是对相关位的案例分析`word`。这个声明非常重要，我将称之为引理一，这是一个测试：

```
lemmaOne :: Spec -> Word32 -> Property
lemmaOne spec word =
  width spec < 32 && (spec `matches` word) ==> 
      isSingletonList [s | s <- extend spec, s `matches` word]

isSingletonList :: [a] -> Bool
isSingletonList [a] = True
isSingletonList _   = False 
```

我们将定义一个函数，它给定一个`Spec`和一个 32 位单词序列，返回与规范匹配的单例单词列表。该函数所花费的时间与输入的长度乘以答案的大小乘以 32 成正比，而额外的空间与答案的大小乘以 32 成正比。在处理主要功能之前，我们定义了一些常数空间 XOR 函数。

## XOR 被破坏的想法

函数`xorWith f ws`将函数应用于其中`f`的每个单词`ws` 并返回结果的异或。

```
xorWith :: (Word32 -> Word32) -> [Word32] -> Word32
xorWith f ws = reduce xor 0 [f w | w <- ws]
  where reduce = foldl' 
```

由于*流融合*（参见 ICFP 2007），函数`xorWith`占用了恒定空间。

当且仅当异或非零或异或非零时，非零单词列表才有单例`3 * w + 1`。（“如果”方向是微不足道的。“仅当”方向是 Evgeny Kluev 已反驳的猜想；反例请参见`testb`下面的数组。我可以通过添加第三个函数使 Evgeny 的示例工作`g`，但显然这种情况需要证明，我没有。）

```
hasSingleton :: [Word32] -> Bool
hasSingleton ws = xorWith id ws /= 0 || xorWith f ws /= 0 || xorWith g ws /= 0
  where f w = 3 * w + 1
        g w = 31 * w + 17 
```

## 高效搜索单身人士

我们的 main 函数返回一个包含所有匹配规范的单例的列表。

```
singletonsMatching :: Spec -> [Word32] -> [Word32]
singletonsMatching spec words =
 if hasSingleton [w | w <- words, spec `matches` w] then
   if width spec == 32 then
     [bits spec]       
   else
     concat [singletonsMatching spec' words | spec' <- extend spec]
 else
   [] 
```

我们将通过对 的宽度进行归纳来证明其正确性 `spec`。

*   基本情况是`spec`宽度为 32。在这种情况下，列表推导式将给出完全等于 的单词列表`bits spec`。当且仅当此列表只有一个元素时，函数`hasSingleton`才会返回，这将在中为单例时为真。`True``bits spec``words`

*   现在让我们证明如果`singletonsMatching`对于*m+1是正确的，那么对于宽度**m*也是正确的，其中 *m < 32$。（这与感应的方向相反，但没关系。）

    **这是被破坏的部分**：对于更窄的宽度，即使给定一个单例数组`hasSingleton`也可能返回。`False`这是悲剧。

    调用宽度为*m*`extend spec`的 a返回两个宽度为 $m+1$ 的规范。根据假设，在这些规格上是正确的。证明：结果完全包含匹配的那些单例。根据引理一，任何匹配的单词都与扩展规范之一完全匹配。根据假设，递归调用完全返回匹配扩展规范的单例。当我们将这些调用的结果与 结合起来时，我们会得到完全匹配的单例，没有重复也没有遗漏。`spec`*`singletonsMatching``spec``spec``concat`*

 *实际上解决问题是虎头蛇尾的：单例是与空规范匹配的所有单例：

```
singletons :: [Word32] -> [Word32]
singletons words = singletonsMatching universalSpec words 
```

## 测试代码

```
testa, testb :: [Word32]
testa = [10, 1, 1, 2, 3, 4, 2, 5, 6, 7, 10]
testb = [ 0x0000
        , 0x0010
        , 0x0100
        , 0x0110
        , 0x1000
        , 0x1010
        , 0x1100
        , 0x1110
        ] 
```

除此之外，如果您想了解正在发生的事情，您需要了解[QuickCheck](http://en.wikipedia.org/wiki/QuickCheck)。

这是规格的随机生成器：

```
instance Arbitrary Spec where
  arbitrary = do width <- choose (0, 32)
                 b <- arbitrary
                 return (randomSpec width b)
  shrink spec = [randomSpec w' (bits spec) | w' <- shrink (width spec)] ++
                [randomSpec (width spec) b | b  <- shrink (bits spec)]
randomSpec width bits = Spec { w = width, bits = mask bits }     
  where mask b = if width == 32 then b
                 else (b `shiftL` n) `shiftR` n
        n = 32 - width 
```

使用这个生成器，我们可以使用 `quickCheck lemmaOne`.

我们可以测试一下，任何声称是单例的词实际上都是单例：

```
singletonsAreSingleton nzwords = 
  not (hasTriple words) ==> all (`isSingleton` words) (singletons words)
  where isSingleton w words = isSingletonList [w' | w' <- words, w' == w]
        words = [w | NonZero w <- nzwords]

hasTriple :: [Word32] -> Bool
hasTriple words = hasTrip (sort words)
hasTrip (w1:w2:w3:ws) = (w1 == w2 && w2 == w3) || hasTrip (w2:w3:ws)
hasTrip _ = False 
```

这是另一个属性，它`singletons`针对使用排序的较慢算法测试快速算法。

```
singletonsOK :: [NonZero Word32] -> Property
singletonsOK nzwords = not (hasTriple words) ==>
  sort (singletons words) == sort (slowSingletons words)
 where words = [w | NonZero w <- nzwords ]
       slowSingletons words = stripDoubletons (sort words)
       stripDoubletons (w1:w2:ws) | w1 == w2 = stripDoubletons ws
                                  | otherwise = w1 : stripDoubletons (w2:ws)
       stripDoubletons as = as 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-13T21:36:00.913

# **k** >= 7的 OP 中算法的反证

当这些组中的至​​少一个被异或到非零值时，该算法使用单个位的值递归地将一组**k**个唯一值分成两组的可能性。例如，以下数字

```
01000
00001
10001 
```

可以分为

```
01000 
```

和

```
00001
10001 
```

使用最低有效位的值。

如果实施得当，这适用于**k** <= 6。但这种方法对于**k** = 8 和**k** = 7 无效。假设**m** = 4 并使用 0 到 14 之间的 8 个偶数：

```
0000
0010
0100
0110
1000
1010
1100
1110 
```

每个位，除了最低有效位，正好有 4 个非零值。如果我们尝试分割这个集合，由于这种对称性，我们总是会得到一个包含 2 个或 4 个或 0 个非零值的子集。这些子集的 XOR 始终为 0。这不允许算法进行任何拆分，因此`else`part 仅打印所有这些唯一值的 XOR（单个零）。

`3x + 1`技巧无济于事：它只会打乱这 8 个值并切换最低有效位。

如果我们从上述子集中删除第一个（全零）值，则完全相同的论点适用于**k = 7。**

由于任何一组唯一值都可能被分成一组 7 或 8 个值和其他一些组，因此该算法在**k** > 8 时也会失败。

* * *

# 概率算法

可以不发明一个全新的算法，而是修改 OP 中的算法，使其适用于任何输入值。

每次算法访问输入数组的一个元素时，它都应该对这个元素应用一些转换函数`y=transform(x)`：这个转换后的值`y`可以完全按照`x`原始算法中使用的方式使用——用于对集合进行分区和对值进行异或。

最初`transform(x)=x`（未修改的原始算法）。如果在这一步之后我们得到的结果少于**k**个（一些结果是几个唯一值 XORed），我们将更`transform`改为一些散列函数并重复计算。这应该重复（每次使用不同的哈希函数），直到我们得到准确的**k**值。

如果这些**k**值是在算法的第一步（没有散列）获得的，这些值就是我们的结果。否则，我们应该再次扫描数组，计算每个值的哈希值并报告那些匹配**k**个哈希值之一的值。

具有不同散列函数的每个后续计算步骤可以在原始**k**值集合上执行，或者（更好）分别在上一步中找到的每个子集上执行。

要为算法的每一步获得不同的哈希函数，可以使用[Universal hashing](http://en.wikipedia.org/wiki/Universal_hashing)。散列函数的一个必要属性是可逆性——原始值应该（理论上）可以从散列值重构。这需要避免将几个“唯一”值散列到相同的散列值。由于使用任何可逆的**m**位散列函数都没有多少机会解决“反例”问题，因此散列值应该比**m**位长。这种散列函数的一个简单示例是原始值和该值的一些单向散列函数的串联。

如果**k**不是很大，我们不太可能得到与该反例相似的一组数据。（我没有证据表明没有其他结构不同的“坏”数据模式，但我们希望它们也不太可能）。在这种情况下，平均时间复杂度不会比 O( **k** * **m** ² * **n** ) 大多少。

* * *

# 原始算法的其他改进

*   在计算所有（尚未分区的）值的 XOR 时，检查数组中唯一的零值是合理的。如果有，只需递减**k**。
*   在每个递归步骤中，我们并不总是知道每个分区的确切大小。但是我们知道它是奇数还是偶数：非零位上的每个拆分都会给出奇数大小的子集，另一个子集的奇偶校验是原始子集的“切换”奇偶校验。
*   在最近的递归步骤中，当唯一的非拆分子集大小为 1 时，我们可以跳过对拆分位的搜索并立即报告结果（这是对非常小的**k**的优化）。
*   如果我们在一些拆分后得到一个奇数大小的子集（如果我们不确定它的大小是 1），扫描数组并尝试找到一个唯一值，等于这个子集的 XOR。
*   无需遍历每一位来拆分偶数大小的集合。只需使用其 XORed 值的任何非零位。对结果子集之一进行异或可能会产生零，但这种拆分仍然有效，因为对于这个拆分位，我们有*奇数*个“1”，但设置的大小*是偶数。*这也意味着，任何在异或时产生非零大小的子集的分割都是有效的分割，即使剩余的子集异或为零也是如此。
*   您不应该在每个递归（如`solve(ary, h + 1...`）上继续拆分位搜索。相反，您应该从头开始重新搜索。可以在位 31 上拆分集合，并且对位 0 上的结果子集之一具有唯一的拆分可能性。
*   您不应该扫描整个阵列两次（因此`y = compute_xors(ary, m, bits)`不需要第二次）。您已经拥有整个集合的 XOR 和拆分位非零的子集的 XOR。这意味着您可以`y`立即计算：`y = x ^ old_xor`.

* * *

# OP 中 k = 3 的算法证明

这不是对 OP 中实际程序的证明，而是对它的想法的证明。当结果子集之一为零时，实际程序当前拒绝任何拆分。当我们可以接受某些此类拆分时，请参阅建议的改进。`if x is None or y is None`因此，只有在更改为考虑子集大小的奇偶性的某些条件或在添加预处理步骤以从数组中排除唯一的零元素之后，才能将以下证明应用于该程序。

我们有 3 个不同的数字。它们至少应在 2 个位位置上不同（如果它们仅在一个位上不同，则第三个数字必须等于其他数字之一）。函数中的循环`solve`找到这些位位置的最左边，并将这 3 个数字分成两个子集（单个数字和 2 个不同数字）。2 数子集在该位位置具有相等的位，但数字仍然应该不同，因此应该还有一个拆分位位置（显然，在第一个位的右侧）。第二个递归步骤很容易将这个 2 数字子集拆分为两个单个数字。Trick with`i * 3 + 1`在这里是多余的：它只会使算法的复杂性加倍。

这是一组 3 个数字中第一次拆分的图示：

```
 2  1
*b**yzvw
*b**xzvw
*a**xzvw 
```

我们有一个循环遍历每个位位置并计算整个字的 XOR，但单独地，一个 XOR 值 (A) 用于给定位置的真位，另一个 XOR 值 (B) 用于假位。如果数字 A 在这个位置有零位，则 A 包含一些偶数大小的值子集的 XOR，如果非零 - 奇数子集。B 也是如此。我们只对偶数大小的子集感兴趣。它可能包含 0 或 2 个值。

虽然位值（位 z、v、w）没有区别，但我们有 A=B=0，这意味着我们不能在这些位上拆分我们的数字。但是我们有 3 个不相等的数字，这意味着在某个位置 (1) 我们应该有不同的位（x 和 y）。其中一个 (x) 可以在我们的两个数字中找到（偶数子集！），另一个 (y) - 在一个数字中。让我们看看这个偶数子集中的值的异或。从 A 和 B 选择值 (C)，在位置 1 处包含位 0。但 C 只是两个不相等值的 XOR。它们在位位置 1 处相等，因此它们必须在至少一个位位置（位置 2，位 a 和 b）上有所不同。所以 C != 0 并且它对应于偶数大小的子集。这种拆分是有效的，因为我们可以通过非常简单的算法或通过该算法的下一次递归进一步拆分这个偶数大小的子集。

如果数组中没有唯一的零元素，则可以简化此证明。我们总是将唯一的数字分成 2 个子集 - 一个具有 2 个元素（并且它不能 XOR 为零，因为元素不同），另一个具有一个元素（根据定义非零）。所以预处理很少的原始程序应该可以正常工作。

复杂度为 O( **m** ² * **n** )。如果你应用我之前建议的改进，这个算法扫描数组的预期次数是**m** / 3 + 2。因为第一个分割位位置预期是**m** / 3，所以需要单次扫描来处理 2-元素子集，每个 1 元素子集不需要任何数组扫描，并且最初需要再扫描一次（`solve`方法之外）。

* * *

# k = 4 .. 6 的 OP 算法证明

在这里，我们假设应用了对原始算法的所有建议改进。

**k=4 和 k=5**：由于至少有一个位置具有不同的位，因此可以将这组数字拆分为其中一个子集的大小为 1 或 2。如果子集的大小为 1，则它是非-zero（我们没有零唯一值）。如果子集的大小为 2，我们有两个不同数字的异或，这是非零的。因此，在这两种情况下，拆分都是有效的。

**k=6**：如果整个集合的异或非零，我们可以通过这个异或具有非零位的任何位置来分割这个集合。否则，我们在每个位置都有偶数个非零位。由于至少有一个位置具有不同的位，因此该位置将集合拆分为大小为 2 和 4 的子集。大小为 2 的子集始终具有非零 XOR，因为它包含 2 个不同的数字。同样，在这两种情况下，我们都有有效的拆分。

* * *

# 确定性算法

**k** >= 7 的反证显示了原始算法不起作用的模式：我们有一个大小大于 2 的子集，并且在每个位位置我们有偶数个非零位。但是我们总能找到一对非零位在单个数字中重叠的位置。换句话说，总是有可能在大小为 3 或 4 的子集中找到一对位置，其中**两个**位置的子集中所有位的非零 XOR。这建议我们使用额外的拆分位置：使用两个单独的指针遍历位位置，将数组中的所有数字分组为两个子集，其中一个子集在这些位置具有非零位，而其他 - 所有剩余的数字。这增加了最坏情况的复杂性 my **m**，但允许更多的值**ķ**。一旦不再可能获得大小小于 5 的子集，则添加第三个“拆分指针”，依此类推。每次**k**翻倍，我们可能需要一个额外的“拆分指针”，这会再次增加最坏情况的复杂度 my **m**。

这可以被认为是以下算法的证明草图：

1.  使用原始（改进的）算法来查找零个或多个唯一值以及零个或多个不可拆分子集。当没有更多不可分割的子集时停止。
2.  对于任何这些不可拆分的子集，尝试拆分它同时增加“拆分指针”的数量。找到拆分后，继续执行步骤 1。

最坏情况复杂度为 O( **k** * **m** ² * **n** * **m** ^(max(0, floor(log(floor( **k** /4))))) )，可以近似为 O( **k** * **n** * **m** ^(log(k)) ) = O( **k** * **n** * **k** ^(log(m)) )。

该算法对于小**k**的预期运行时间比概率算法稍差，但仍不大于 O( **k** * **m** ² * **n** )。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-14T00:19:05.807

一种概率方法是使用[计数过滤器](http://en.wikipedia.org/wiki/Bloom_filter#Counting_filters)。

算法如下：

1.  线性扫描数组并“更新”计数过滤器。
2.  线性扫描数组并创建所有元素的集合，这些元素在过滤器中肯定不是计数为 2，这将是`<= k`真正的解决方案。（在这种情况下，误报是看起来不是的独特元素）。
3.  选择一个新的哈希函数基础并重复，直到我们得到所有`k`解决方案。

这使用`2m`了一些空间（独立于`n`）。时间复杂度更多，但是知道在第 2 步中找不到任何给定唯一元素的概率是近似`(1 - e^(-kn/m))^k`的，我们将很快解决一个解决方案，但不幸的是，我们不是很线性`n`。

我很欣赏这不能满足您的约束，因为它在时间上是超线性的，并且是概率性的，但是鉴于原始条件可能无法满足，这种方法可能值得考虑。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T15:45:57.483

我假设你事先知道 k
我选择 Squeak Smalltalk 作为实现语言。

*   inject:into: 是 reduce，在空间上是 O(1)，在时间上是 O(N)
*   select: 是过滤器，（我们不使用它，因为 O(1) 空间要求）
*   collect: 是地图，（我们不使用它，因为需要 O(1) 空间）
*   do：是forall，在空间上是O(1)，在时间上是O(N)
*   方括号中的块是一个闭包，或者如果它不关闭任何变量并且不使用返回，则为纯 lambda，以冒号为前缀的符号是参数。
*   ^ 表示返回

对于 k=1，通过使用位 xor 减少序列来获得单例

所以我们在类 Collection 中定义了一个方法 xorSum （因此 self 是序列）

```
Collection>>xorSum
    ^self inject: 0 into: [:sum :element | sum bitXor:element] 
```

和第二种方法

```
Collection>>find1Singleton
    ^{self xorSum} 
```

我们用

```
 self assert: {0\. 3\. 5\. 2\. 5\. 4\. 3\. 0\. 2.} find1Singleton = {4} 
```

成本是 O(N)，空间 O(1)

对于 k=2，我们搜索两个单例，(s1,s2)

```
Collection>>find2Singleton
    | sum lowestBit s1 s2 |
    sum := self xorSum. 
```

sum 不为 0，等于 (s1 bitXOr: s2)，两个单例的异或

在总和的最低设置位处拆分，并像您建议的那样对两个序列进行异或，您将得到 2 个单例

```
 lowestBit := sum bitAnd: sum negated.
    s1 := s2 := 0.
    self do: [:element |
        (element bitAnd: lowestBit) = 0
            ifTrue: [s1 := s1 bitXor: element]
            ifFalse: [s2 := s2 bitXor: element]].
    ^{s1\. s2} 
```

和

```
 self assert: {0\. 1\. 1\. 3\. 5\. 6\. 2\. 6\. 4\. 3\. 0\. 2.} find2Singleton sorted = {4\. 5} 
```

成本为 2*O(N)，空间 O(1)

对于 k=3，

我们定义了一个特定的类来实现异或拆分的细微变化，实际上我们使用三元拆分，掩码可以有 value1 或 value2，任何其他值都被忽略。

```
Object
    subclass: #BinarySplit
    instanceVariableNames: 'sum1 sum2 size1 size2'
    classVariableNames: '' poolDictionaries: '' category: 'SO'. 
```

使用这些实例方法：

```
sum1
    ^sum1

sum2
    ^sum2

size1
    ^size1

size2
    ^size2

split: aSequence withMask: aMask value1: value1 value2: value2
    sum1 := sum2 := size1 := size2 := 0.
    aSequence do: [:element |
    (element bitAnd: aMask) = value1
            ifTrue:
                [sum1 := sum1 bitXor: element.
                size1 := size1 + 1].
    (element bitAnd: aMask) = value2
            ifTrue:
                [sum2 := sum2 bitXor: element.
                size2 := size2 + 1]].

doesSplitInto: s1 and: s2
    ^(sum1 = s1 and: [sum2 = s2])
        or: [sum1 = s2 and: [sum2 = s1]] 
```

而这个类端方法，一种创建实例的构造函数

```
split: aSequence withMask: aMask value1: value1 value2: value2
    ^self new split: aSequence withMask: aMask value1: value1 value2: value2 
```

然后我们计算：

```
Collection>>find3SingletonUpToBit: m
    | sum split split2 mask value1 value2 |
    sum := self xorSum. 
```

但这并没有提供关于要拆分的位的任何信息……所以我们尝试每个位 i=0..m-1。

```
 0 to: m-1 do: [:i |
        split := BinarySplit split: self withMask: 1 << i value1: 1<<i value2: 0. 
```

如果你得到 (sum1,sum2) == (0,sum)，那么你很容易在同一个包里得到了 3 个单例......
所以重复直到你得到不同的东西
否则，如果不同，你会得到一个带有 s1 的包（一个奇数大小）和另一个 s2,s3 （偶数大小），所以只需对 k=1 (s1=sum1) 和 k=2 应用算法并修改位模式

```
 (split doesSplitInto: 0 and: sum)
            ifFalse:
                [split size1 odd
                    ifTrue:
                        [mask := (split sum2 bitAnd: split sum2 negated) + (1 << i).
                        value1 := (split sum2 bitAnd: split sum2 negated).
                        value2 := 0.
                        split2 := BinarySplit split: self withMask: mask value1: value1 value2: value2.
                        ^{ split sum1\. split2 sum1\. split2 sum2}]
                    ifFalse:
                        [mask := (split sum1 bitAnd: split sum1 negated) + (1 << i).
                        value1 := (split sum1 bitAnd: split sum1 negated) + (1 << i).
                        value2 := (1 << i).
                        split2 := BinarySplit split: self withMask: mask value1: value1 value2: value2.
                        ^{ split sum2\. split2 sum1\. split2 sum2}]]. 
```

我们用它来测试它

```
self assert: ({0\. 1\. 3\. 5\. 6\. 2\. 6\. 4\. 3\. 0\. 2.} find3SingletonUpToBit: 32) sorted = {1\. 4\. 5} 
```

更糟糕的成本是 (M+1)*O(N)

对于 k=4，

当我们拆分时，我们可以有 (0,4) 或 (1,3) 或 (2,2) 单例。
(2,2) 很容易识别，两个大小都是偶数，并且两个异或和都不为0，案例已解决。
(0,4) 很容易识别，两个大小都是偶数，并且至少有一个和为零，因此在总和 != 0
(1,3) 的包上使用递增的位模式重复搜索更难，因为两个大小是奇数，我们回退到未知数量的单身人士的情况......虽然，我们可以很容易地识别出单身人士，如果袋子的一个元素等于异或和，这对于 3 个不同的数字是不可能的......

我们可以对 k=5 进行泛化...但是上面会很难，因为我们必须为 (4,2) 和 (1,5) 的情况找到一个技巧，记住我们的假设，我们必须提前知道 k...我们必须做假设并在之后验证它们......

如果你有反例，直接提交，我会检查上面的 Smalltalk 实现

**编辑：我在**[http://ss3.gemstone.com/ss/SONiklasBContest.html](http://ss3.gemstone.com/ss/SONiklasBContest.html)提交了代码（许可证 MIT）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-15T09:12:12.797

对于 k = 3 的情况，这是一个仅占用最少空间的适当解决方案，并且空间需求为 O(1)。

让'transform' 是一个函数，它接受一个 m 位无符号整数 x 和一个索引 i 作为参数。i 介于 0 .. m - 1 之间，transform 将整数 x 转换为

*   x 本身，如果 x 的第 i 位未设置
*   到 x ^ (x <<< 1) 其中 <<< 表示桶形移位（旋转）

在下面的 T(x, i) 中使用作为 transform(x, i) 的简写。

我现在声称如果 a、b、c 是三个不同的 m 位无符号整数和 a'、b'、c' 和其他三个不同的 m 位无符号整数，使得 a XOR b XOR c == a' XOR b' XOR c'，但是集合 {a, b, c} 和 {a', b', c'} 是两个不同的集合，那么有一个索引 i 使得 T(a, i) XOR T(b, i ) XOR T(c, i) 不同于 T(a', i) XOR T(b', i) XOR T(c', i)。

要看到这一点，让 a' == a XOR a'', b' == b XOR b'' 和 c' == c XOR c''，即让 a'' 表示 a 和 a' 的 XOR 等。因为 a XOR b XOR c 在每个位上等于 a' XOR b' XOR c'，所以 a'' XOR b'' XOR c'' == 0。这意味着在每个位位置，要么 a'，b ', c' 与 a, b, c 相同，或者恰好其中两个使所选位置的位翻转（0->1 或 1->0）。因为 a'、b'、c' 与 a、b、c 不同，所以设 P 是已经发生两次位翻转的任何位位置。我们继续证明 T(a', P) XOR T(b', P) XOR T(c', P) 不同于 T(a, P) XOR T(b, P) XOR T(c, P) . 不失一般性地假设a'与a相比具有位翻转，b'与b相比具有位翻转，并且c'

除了位位置 P 之外，还必须有另一个位位置 Q，其中 a' 和 b' 不同（否则集合不包含三个不同的整数，或者翻转位置 P 处的位不会创建新的整数集合，不需要考虑的情况）。位位置 Q 的桶旋转版本的 XOR 在位位置 (Q + 1) mod m 处产生奇偶校验错误，这导致声称 T(a', P) XOR T(b', P) XOR T(c', P) 不同于 T(a, P) XOR T(b, P) XOR T(c, P)。显然，c' 的实际值不会影响奇偶校验错误。

因此，该算法是

*   遍历输入数组，并计算 (1) 所有元素的 XOR，以及 (2) T(x, i) 对 0 .. m - 1 之间的所有元素 x 和 i 的 XOR
*   在常量空间中搜索三个 32 位整数 a、b、c，使得 i 的所有有效值的 a XOR b XOR c 和 T(a, i) XOR b(a, i) XOR c(a, i) 匹配那些从数组中计算出来的

这显然是有效的，因为重复元素在 XOR 操作中被取消，而对于其余三个元素，上述推理成立。

我实现了**这个**并且它有效。这是我的测试程序的源代码，它使用 16 位整数来提高速度。

```
#include <iostream>
#include <stdlib.h>
using namespace std;

/* CONSTANTS */
#define BITS  16
#define MASK ((1L<<(BITS)) - 1)
#define N   MASK
#define D   500
#define K      3
#define ARRAY_SIZE (D*2+K)

/* INPUT ARRAY */
unsigned int A[ARRAY_SIZE];

/* 'transform' function */
unsigned int bmap(unsigned int x, int idx) {
    if (idx == 0) return x;
    if ((x & ((1L << (idx - 1)))) != 0)
        x ^= (x << (BITS - 1) | (x >> 1));
    return (x & MASK);
}

/* Number of valid index values to 'transform'. Note that here
   index 0 is used to get plain XOR. */
#define NOPS 17

/* Fill in the array --- for testing. */
void fill() {
    int used[N], i, j;
    unsigned int r;
    for (i = 0; i < N; i++) used[i] = 0;
    for (i = 0; i < D * 2; i += 2)
    {
        do { r = random() & MASK; } while (used[r]);
        A[i] = A[i + 1] = r;
        used[r] = 1;
    }
    for (j = 0; j < K; j++)
    {
        do { r = random() & MASK; } while (used[r]);
        A[i++] = r;
        used[r] = 1;
    }
}

/* ACTUAL PROCEDURE */
void solve() {
    int i, j;
    unsigned int acc[NOPS];
    for (j = 0; j < NOPS; j++) { acc[j] = 0; }
    for (i = 0; i < ARRAY_SIZE; i++)
    {
        for (j = 0; j < NOPS; j++)
            acc[j] ^= bmap(A[i], j);
    }
    /* Search for the three unique integers */
    unsigned int e1, e2, e3;
    for (e1 = 0; e1 < N; e1++)
    {
        for (e2 = e1 + 1; e2 < N; e2++)
        {
            e3 = acc[0] ^ e1 ^ e2; // acc[0] is the xor of the 3 elements
            /* Enforce increasing order for speed */
            if (e3 <= e2 || e3 <= e1) continue;
            for (j = 0; j < NOPS; j++)
            {
                if (acc[j] != (bmap(e1, j) ^ bmap(e2, j) ^ bmap(e3, j)))
                    goto reject;
            }
            cout << "Solved elements: " << e1
                 << ", " << e2 << ", " << e3 << endl;
            exit(0);
          reject:
            continue;
        }
    }
}

int main()
{
    srandom(time(NULL));
    fill();
    solve();
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-17T17:32:58.527

考虑到空间复杂度要求，放宽到 O( **m** * **n** )，这个任务可以在 O( **n** ) 时间内轻松解决。只需使用哈希表计算每个元素的实例数，然后过滤计数器等于 1 的条目。或者使用任何分布式排序算法。

但这是一种概率算法，对空间的要求更轻。

**该算法使用大小为s 的**附加位集。对于输入数组中的每个值，计算一个哈希函数。该散列函数确定位集中的索引。这个想法是扫描输入数组，为每个数组条目切换位集中的相应位。重复的条目将同一位切换两次。由唯一条目（几乎所有条目）切换的位保留在位集中。这实际上与计数 Bloom 过滤器相同，其中每个计数器中唯一使用的位是最低有效位。

再次扫描数组，我们可能会提取唯一值（不包括一些假阴性）以及一些重复值（假阳性）。

位集应该足够稀疏，以尽可能少地给出误报，以减少不需要的重复值的数量，从而降低空间复杂度。位集高度稀疏的另一个好处是减少了假阴性的数量，从而稍微提高了运行时间。

要确定位集的最佳大小，请在位集和包含唯一值和误报的临时数组之间均匀分配可用空间（假设**k** << **n**）：**s** = **n** * **m** * **k** / **s**，这给出**s** = sqrt( **n** ***米*****克**）。并且预期的空间要求是 O(sqrt( **n** * **m** * **k** ))。

1.  扫描输入数组并切换位集中的位。
2.  扫描输入数组并过滤bitset中具有相应非零位的元素，将它们写入临时数组。
3.  使用任何简单的方法（分布排序或散列）从临时数组中排除重复项。
4.  如果临时数组的大小加上目前已知的唯一元素的数量小于**k**，则更改哈希函数，清除对应于已知唯一值的位集和切换位，继续执行步骤 1。

预期的时间复杂度介于 O( **n** * **m** ) 和 O( **n** * **m** * log( **n** * **m** * **k** ) / log( **n** * **m** / **k** )) 之间。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-17T12:54:31.873

这只是一种直觉，但我认为解决方案是增加您评估的分区数量，直到找到一个异或和不为零的分区。

例如，对于 [0,m) 范围内的每两个位 (x,y)，考虑由 的值定义的分区`a & ((1<<x) || (1 << y))`。在 32 位的情况下，这会产生 32*32*4 = 4096 个分区，它允许正确解决`k = 4`.

现在有趣的是找到 k 与解决问题所需的分区数之间的关系，这也将允许我们计算算法的复杂性。另一个悬而未决的问题是是否有更好的分区模式。

一些 Perl 代码来说明这个想法：

```
my $m = 10;
my @a = (0, 2, 4, 6, 8, 10, 12, 14, 15, 15, 7, 7, 5, 5);

my %xor;
my %part;
for my $a (@a) {
    for my $i (0..$m-1) {
        my $shift_i = 1 << $i;
        my $bit_i = ($a & $shift_i ? 1 : 0);
        for my $j (0..$m-1) {
            my $shift_j = 1 << $j;
            my $bit_j = ($a & $shift_j ? 1 : 0);
            my $k = "$i:$bit_i,$j:$bit_j";
            $xor{$k} ^= $a;
            push @{$part{$k} //= []}, $a;
        }
    }
}

print "list: @a\n";
for my $k (sort keys %xor) {
    if ($xor{$k}) {
        print "partition with unique elements $k: @{$part{$k}}\n";
    }
    else {
        # print "partition without unique elements detected $k: @{$part{$k}}\n";
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-11T18:40:52.057

您的算法不是 O(n)，因为不能保证在每一步中将数字分成两个相同大小的组，还因为您的数字大小没有限制（它们与 无关`n`），您的数字没有限制可能的步骤，如果您对输入数字大小没有任何限制（如果它们独立于`n`），那么您的算法运行时间可能是 ω(n)，假设以下大小`m`位数，并且它们的第一位`n`可能不同： （假设`m > 2n`）

```
---- n bits --- ---- m-n bits --
111111....11111 00000....00000
111111....11111 00000....00000
111111....11110 00000....00000
111111....11110 00000....00000
....
100000....00000 00000....00000 
```

您的算法将针对第一位运行`m-n`，并且将`O(n)`在每个步骤中运行，直到现在您到达 O((mn)*n)，它大于 O(n^2)。

[PS：如果你总是有 32 位数字，你的算法是`O(n)`并且不难证明这一点。]

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-08-17T08:55:42.290

前一个问题的解决方案（在 O(N) 中使用 O(1) 内存使用找到唯一的 uint32 数字）非常简单，虽然不是特别快：

```
void unique(int n, uint32 *a) {
  uint32 i = 0;
  do {
    int j, count;
    for (count = j = 0; j < n; j++) {
      if (a[j] == i) count++;
    }
    if (count == 1) printf("%u appears only once\n", (unsigned int)i);
  } while (++i);
} 
```

对于位数 M 不受限制的情况，复杂度变为 O(N*M*2 ^M )，内存使用量仍为 O(1)。

**更新**：使用位图的补充解决方案导致复杂度 O(N*M) 和内存使用量 O(2 ^M )：

```
void unique(int n, uint32 *a) {
  unsigned char seen[1<<(32 - 8)];
  unsigned char dup[1<<(32 - 8)];
  int i;
  memset(seen, sizeof(seen), 0);
  memset(dup,  sizeof(dup),  0);
  for (i = 0; i < n; i++) {
    if (bitmap_get(seen, a[i])) {
      bitmap_set(dup, a[i], 1);
    }
    else {
      bitmap_set(seen, a[i], 1);
    }
  }
  for (i = 0; i < n; i++) {
    if (bitmap_get(seen, a[i]) && !bitmap_get(dup, a[i])) {
      printf("%u appears only once\n", (unsigned int)a[i]);
      bitmap_set(seen, a[i], 0);
    }
  }
} 
```

有趣的是，这两种方法都可以组合起来，将 2 ^M空间划分为频带。然后，您将不得不遍历所有波段，并在每个波段内使用位向量技术找到唯一值。

* * *

## 回答 #10

> 赞同：-4
> 
> 时间：2012-08-11T18:15:19.323

有两种方法可行。

(1) 创建一个临时哈希表，其中键是整数，值是重复次数。当然，这将使用比指定更多的空间。

（2）对数组（或副本）进行排序，然后统计array[n+2]==array[n]的情况。当然，这将使用比指定更多的时间。

看到满足原始约束的解决方案，我会感到非常惊讶。*

# macos - Zsh tab完成复制命令名称

> ID：11916064
> 
> 赞同：27
> 
> 时间：2012-08-11T15:50:48.287
> 
> 标签：macos, zsh, tab-completion, zsh-completion

我在 OS X Mountain Lion 上，运行附带的 ZSH shell (4.3.11)，顶部安装了 Oh-My-ZSH。

当对 homebrew 等命令使用制表符补全时，当 ZSH 列出可用命令时，它也是在复制命令。例如：

```
$ brew {tab} 
```

将导致：

```
$ brew brew 
[list of homebrew commands] 
```

我不确定是什么导致了这个错误，因为当我调整终端窗口的大小时，命令名称的第一个实例消失了。

如果在显示重复项时按退格键，我只能删除该命令的第二个实例，zsh 不会再让我退格。另外，如果我确实使用退格键删除了重复项，zsh 就好像根本没有键入命令一样。

我的 .zshrc 以及所有其他 .configuration 文件可以在[https://github.com/daviesjamie/dotfiles找到](https://github.com/daviesjamie/dotfiles)

**更新：**我发现[这篇文章](https://stackoverflow.com/questions/11146306/)是关于有人在 Ubuntu 上遇到同样问题的。但是，我不理解给定的解决方案，我什至不确定它是否适用于我的设置？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2014-04-01T07:32:15.037

**如果您使用任何花哨的 UTF-8 字符**（如箭头、“git 分支”字符等），也可以重现此效果。

只需从提示中删除此字符，就不会发生重复。

还添加

导出 LC_ALL=en_US.UTF-8
导出 LANG=en_US.UTF-8

到 ~/.profile 可以提供帮助

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-08-11T18:27:24.267

这个问题很可能是由错误的括号引起的，`%{` `%}`这些括号告诉 zsh 里面的文本宽度为零。唯一应该包含在其中的是改变文本颜色或粗体的转义序列。如果您使用的是新的 zsh (>=4.3.{unknown version})，我什至建议使用`%F{color}...%f`, `%K{color}...%k`,`%B...%b`而不是`%{${fg[green]}%}`或您那里拥有的东西。

他们的问题是没有办法用诸如“嘿，我输出了一些文本”之类的问题来查询终端。光标现在在哪里？” zsh 必须自己计算其提示的长度。当您输入一些文本并要求 zsh 完成时，zsh 会说终端将光标移动到特定位置并在那里输入完成的 cmdline。对于错位`%{%}`的括号，这个特定的位置是错误的。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-04-06T13:05:36.080

如果您在 Mac 上使用 iTerm，请务必在您的配置文件首选项中选中“自动设置区域设置变量”。我没有检查 SSH 连接，它导致了同样的错误，我通过保留该选项来修复它。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2014-07-01T11:30:58.280

这是一个旧线程，但我在使用 oh-my-zsh 配置的 zsh 设置中遇到了类似的问题。

设置`export LC_ALL=en_US.UTF-8`解决了这个问题。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2019-10-02T06:52:33.100

很多地方的很多答案都提出了`export LC_ALL=en_US.UTF-8`解决方案。然而，这对我不起作用。我继续在 Arch linux 和 PopOS 上使用 oh-my-zsh 遇到这个问题。

对我有用的唯一解决方案是[romkatv](https://github.com/robbyrussell/oh-my-zsh/issues/7945#issuecomment-508724741)关于 oh-my-zsh github 存储库上的一个问题的建议。

事实证明，至少在我的情况下，自动完成重复问题只会在行的某处存在非 ASCII 字符（如表情符号）时出现。ZSH 会错误地假设这个非 ASCII 字符需要占用 2 个字符空间而不是 1 个。

因此，有效的解决方案是打开`.zsh-theme`您正在使用的任何主题的文件，找到所有非 ASCII 字符并用于`%{%G%}`告诉 ZSH 对该字符仅使用一个字符宽度

例如，默认的 oh-my-zsh 主题`robbyrussel`包含 2 个非 ASCII 字符。提示符中的“➜”字符

```
PROMPT="%(?:%{$fg_bold[green]%}➜ :%{$fg_bold[red]%}➜ )" 
```

以及 git 目录提示中的“✗”字符

```
ZSH_THEME_GIT_PROMPT_DIRTY="%{$fg[blue]%}) %{$fg[yellow]%}✗" 
```

像这样使用`%{%G<character>%}`大约 2 个非 ASCII 字符

```
PROMPT="%(?:%{$fg_bold[green]%}%{%G➜%} :%{$fg_bold[red]%}%{%G➜%} )" 
```

和这个

```
ZSH_THEME_GIT_PROMPT_DIRTY="%{$fg[blue]%}) %{$fg[yellow]%}%{%G✗%}" 
```

最终为我解决了这个问题。

因此，您需要做的就是复制您要使用的主题文件并编辑所有非 ASCII 字符，如上所示，希望您再也不会看到重复问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-20T07:45:53.207

我使本地和 ssh 工作的解决方案类似于@Marc 和@neotohin 答案的组合：

1.  设置`export LANG=en_US.UTF-8`（只需取消注释模板 .zshrc 中的该部分； exporting `LC_ALL`，如@neotohin 的回答，而不是`LANG`也可以工作，我没有尝试）
2.  **在终端配置文件的“高级”部分中**取消选中**`LC_CTYPE=UTF-8`“启动时设置语言环境变量”（原因：该设置设置而不是`en_US.UTF-8`，这会在 ssh 中为我制动语言环境）**

# ruby-on-rails - 为设计页面设置浏览器和页面标题？

> ID：11916072
> 
> 赞同：0
> 
> 时间：2012-08-11T15:51:53.043
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我有为浏览器和页面本身设置标题的方法。在我的设计页面上，我想设置这两种方法，但不知道如何设置。

我的代码：

**助手/application_helper**

```
def title # for entire application
    base_title = "Testing"
  if @title.nil?
    base_title
  else
    "#{base_title} - #{@title}"
  end
end

def page_title # for page header partial
   "#{@page_title}"
end 
```

**视图/布局/应用程序**

```
<!DOCTYPE html>
<html>
   <head>
      <title><%= title %></title>
      <%= csrf_meta_tag %>
      <%= favicon_link_tag %>
      <%= stylesheet_link_tag "application" %>
      <%= javascript_include_tag "application" %>
   </head>
   <body>
      <div id="container">
         <%= render "shared/page_header" %>
         <%= render "shared/flash_message" %>
         <%= yield %>
      </div>
   </body>
</html> 
```

**视图/共享/_page_header**

```
<% unless @page_title.blank? %>
  <div id="page-header">
    <span><%= @page_title %></span>
  </div>
<% end %> 
```

现在我有一个 RegistrationsController 可以在需要时覆盖该功能，但由于它继承到 DeviseController，我认为它不能访问 Application Helper？我还尝试将相同的代码放在注册助手中，但这也不起作用。我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T18:52:51.647

也许你可以使用；

application_helper.rb

```
module ApplicationHelper
  def title(page_title)
    content_for(:title) { page_title }
  end
end 
```

应用程序.html.erb

```
<title><%= yield :title %></title> 
```

看法

```
<%= title "Your page title here" %> 
```

# database - DB2 客户端安装错误

> ID：11916075
> 
> 赞同：0
> 
> 时间：2012-08-11T15:52:17.523
> 
> 标签：database, db2, database-installation

在我的系统中安装**db2**客户端时遇到问题。最初我收到一个错误：`Cannot find XML_0017.cab`.

然后我取消了安装，选择了自定义安装选项并删除了所有与 XML 相关的选项（即 XML Extender 和 XML Extender Samples）并尝试安装。现在我可以看到该`WEBD0000.CAB`文件丢失了。

我无法理解如何继续安装。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T22:31:46.100

Windows 7 根本不支持 DB2 9.1。IBM 于 2012 年 4 月终止了对 DB2 9.1 的支持。

我建议您从[IBM 的网站](http://www-01.ibm.com/support/docview.wss?rs=71&uid=swg27007053)下载更新版本的数据服务器客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T22:34:13.293

CAB 文件，我假设这是一个 Windows 安装。我在 Windows 上的 DB2 有点生锈，但如果这是客户端安装，除非您为 Visual Studio 安装某种插件，否则您不必安装“XML 任何东西”。你下载的是什么文件？可以包含文件名、url 链接等吗？

# sql-server - 两个 SQL Server 数据库之间的数据同步检查

> ID：11916081
> 
> 赞同：0
> 
> 时间：2012-08-11T15:53:11.113
> 
> 标签：sql-server, synchronization

我们有两个 SQL 服务器数据库。源服务器具有从外部系统填充的数据和远程服务器上的目标数据库（由 Web 应用程序使用）。有一个 SSIS 包将列从源表映射到目标（列名不同）并填充数据以保持同步。

现在，为了确保两个数据库同步，我们有一个 SP 显示记录计数，对于某些父子关系，它显示每个父记录的子计数（即 Brandwise 项目计数）。必须有人登录到这两个服务器，执行 SP 并手动获取数据。然后比较结果以确保两个 db 是同步的。

现在，为了自动化这个过程，我们完成了以下工作 -

> 1.  将目标服务器添加为“[链接服务器](http://msdn.microsoft.com/en-us/library/ff772782.aspx)”
> 2.  使用“EXEC msdb.dbo.sp_send_dbmail ”和“@attach_query_result_as_file =1 [”](http://msdn.microsoft.com/en-us/library/ms190307%28SQL.90%29.aspx)
> 3.  创建一个 SSIS 作业，它将为两个服务器执行电子邮件 SP
> 
> 因此，这就是我们如何获得两封附有查询结果的电子邮件。然后比较文本文件完成数据库同步检查。

*我相信这可以做得更好——现在我们能够将目标服务器作为链接服务器进行访问。*这是我的第一次，所以我会请求一些有经验的人分享他们的方法，可能超出了与链接服务器的连接查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T21:36:29.553

由于您可以作为链接服务器访问服务器，因此您可以直接运行查询和比较数据。

请检查[这个](http://weblogs.sqlteam.com/jeffs/archive/2004/11/10/2737.aspx)

您可以根据此查询结果修改 SSIS 作业以发送邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T15:21:51.180

我正在使用以下查询，这是一个简单的版本，并且给了我双方的差异-

```
(Select s.Title, s.Description from ERPMasterBrand as s   EXCEPT
Select d.Title, d.Description from MasterBrand as d)
UNION
(Select s.Title, s.Description from MasterBrand as s      EXCEPT
Select d.Title, d.Description from ERPMasterBrand as d) 
```

有更好的建议吗？我已经测试过了，它给出了想要的结果——希望我没有被我自己的解决方案误导:-)。

# vb.net - vb.net 将数据表加载到 datagridview

> ID：11916091
> 
> 赞同：4
> 
> 时间：2012-08-11T15:54:15.390
> 
> 标签：vb.net, datagridview, datatable

我使用以下代码从 datagridview 生成数据表

```
 Dim t1 As New DataTable
 For Each col As DataGridViewColumn In DataGridView1.Columns
        t1.Columns.Add(col.HeaderText)
    Next

    For Each row As DataGridViewRow In DataGridView1.Rows
        Dim dRow1 As DataRow = t1.NewRow
                  For Each cell As DataGridViewCell In row.Cells
            dRow1(cell.ColumnIndex) = cell.Value
        Next
    Next 
```

现在的问题是如何将此数据表加载到另一个 datagridview ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-11T16:12:11.260

```
Dim table As New DataTable
    ' Create four typed columns in the DataTable.
    table.Columns.Add("Dosage", GetType(Integer))
    table.Columns.Add("Drug", GetType(String))
    table.Columns.Add("Patient", GetType(String))
    table.Columns.Add("Date", GetType(DateTime))
    ' Add five rows with those columns filled in the DataTable.
    table.Rows.Add(25, "Indocin", "David", DateTime.Now)
    table.Rows.Add(50, "Enebrel", "Sam", DateTime.Now)
    table.Rows.Add(10, "Hydralazine", "Christoff", DateTime.Now)
    table.Rows.Add(21, "Combivent", "Janet", DateTime.Now)
    table.Rows.Add(100, "Dilantin", "Melanie", DateTime.Now)

    DataGridView1.DataSource = table

    DataGridView2.DataSource = table 
```

如果您在一个数据网格中更改或添加行，它会在另一个数据网格中更改。或者，如果您更改代码并添加行，您会在数据网格上看到更改。

**更新1：**

如果您想从 datagrid1 获取数据并仅在 datagrid2 中显示该数据，请使用：

```
Dim table1 As New DataTable
table1 = table.Copy()
DataGridView2.DataSource = table1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T16:40:38.733

你还需要

```
GridView1.DataBind() 
```

和

```
GridView2.DataBind() 
```

在末尾

# mysql - 如何更新具有序列化数据的Mysql行？

> ID：11916097
> 
> 赞同：0
> 
> 时间：2012-08-11T15:55:22.050
> 
> 标签：mysql, database

我有 2000 个产品的行使用序列化数据，我需要更新特定字符串

这是行名数据

```
a:35:{s:11:"expire_days";s:3:"30d";s:12:"trial1_price";s:0:"";s:11:"trial1_days";s:0:"";s:12:"is_recurring";s:0:"";s:10:"start_date";s:0:"";s:5:"terms";s:24:"$150 for 1 Per license";s:12:"rebill_times";s:0:"";s:15:"paypal_currency";s:0:"";s:4:"##11";N;s:3:"url";s:0:"";s:8:"add_urls";s:0:"";s:4:"##12";N;s:5:"scope";s:0:"";s:5:"order";s:4:"1010";s:11:"price_group";s:1:"7";s:13:"renewal_group";s:2:"28";s:14:"need_agreement";s:0:"";s:13:"require_other";a:1:{i:0;s:0:"";}s:16:"prevent_if_other";N;s:4:"##13";N;s:19:"autoresponder_renew";s:0:"";s:16:"dont_mail_expire";s:0:"";s:13:"joomla_access";s:2:"36";s:10:"files_path";s:108:"products/Boxes8.zip|Box 8
products/Boxes9.zip|Box 9";s:14:"download_count";s:0:"";s:18:"download_unlimited";} 
```

我唯一需要改变的是
s:24:" **$150 for 1 Per license** ";

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T17:50:42.443

您可能应该`SELECT`对该行进行更改，然后`UPDATE`使用新值。如果您需要做这个数据库方面的工作，这个问题的答案可能会有所帮助。

[如何在 MySQL 中进行正则表达式替换？](https://stackoverflow.com/questions/986826/how-to-do-a-regular-expression-replace-in-mysql)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T18:15:53.343

如果您想用其他内容替换该单个字段的*值*，可以使用以下查询：

```
UPDATE table SET col = CONCAT(
  LEFT(col, LOCATE('s:24:"', col) + 5),                  -- up to and including the opening quote
  'Now for free',                                        -- new replacement text
  SUBSTR(col, LOCATE('"', col, LOCATE('s:24:"', col)+6)) -- closing quote and everything after that
) WHERE col LIKE '%s:24:"$150 for 1 Per license"%' 
```

请注意，可能会出现问题：如果您的某个字段的值应该以 结尾`'s:24:'`，那么加上结束引号的值会被误解为您正在查看的位置。我认为这种风险不太可能，但如果您想安全地进行操作，您可能需要使用可以处理带引号的字符串和转义引号的复杂正则表达式来检查它。

# android - 进度对话框 UI 冻结/缓慢

> ID：11916098
> 
> 赞同：10
> 
> 时间：2012-08-11T15:55:50.147
> 
> 标签：android, progressdialog

我有一个进度对话框，用于我的程序中的一部分，我在后台执行时间密集型操作，但是当显示对话框时，UI 或微调器图标冻结/缓慢/犹豫，使程序看起来好像冻结了。在我`onPostExecute`的我中，`AsyncTask`我关闭了对话框。

为什么会发生这种情况，因为我在后台完成所有工作？

这是我的代码

```
pDialog = ProgressDialog.show(FullGame.this,"Starting New Game","Please Wait...", true);
new StartNewGame().execute(); 

    private class StartNewGame extends AsyncTask<Void,Void,Boolean>{

    @Override
    protected Boolean doInBackground(Void... params) {
        try{
            ContentValues values = new ContentValues();
            Cursor c = getContentResolver().query(Games.PART1_URI,new String[] {Games.PART1_NUM},
                    Games.PART1_GAME_ID+"="+gameID+" AND "+Games.PART1_FRAME_NUM+"="+10,null,null);
            c.moveToFirst();
            String num = c.getString(0);
            int part1 =0;
            if(num.equals("-")){
                part1=0;
            }else{
                part1=Integer.parseInt(num);
            }

            c = getContentResolver().query(Games.PART2_URI,new String[] {Games.PART2_NUM},
                    Games.PART2_GAME_ID+"="+gameID+" AND "+Games.PART2_FRAME_NUM+"="+10,null,null);
            c.moveToFirst();
            int part2 = 0;
            if(num.equals("-")){
                part2=0;
            }else{
                part2=Integer.parseInt(num);
            }

            c = getContentResolver().query(Games.PART3_URI,new String[] {Games.PART3_NUM},
                    Games.PART3_GAME_ID+"="+gameID,null,null);
            c.moveToFirst();
            int part3 = 0;
            if(num.equals("-")){
                part3=0;
            }else{
                part3=Integer.parseInt(num);
            }

            if(part1 == 10){
                values.clear();
                values.put(Games.STRIKES_FRAME_NUM,10);
                values.put(Games.STRIKES_BOWLER_ID,bowlerClickedID);
                values.put(Games.STRIKES_GAME_ID,gameID);
                getContentResolver().insert(Games.STRIKES_URI, values);
            }
            if(part2 == 10){
                values.clear();
                values.put(Games.STRIKES_FRAME_NUM,10);
                values.put(Games.STRIKES_BOWLER_ID,bowlerClickedID);
                values.put(Games.STRIKES_GAME_ID,gameID);
                getContentResolver().insert(Games.STRIKES_URI, values);
            }
            if(((part2+part3) == 10) && !score.checkSpare(10)){
                values.clear();
                values.put(Games.SPARES_BOWLER_ID,bowlerClickedID);
                values.put(Games.SPARES_FRAME_NUM,10);
                values.put(Games.SPARES_GAME_ID,gameID);
                getContentResolver().insert(Games.SPARES_URI, values);
            }
            if(part3 == 10){
                values.clear();
                values.put(Games.STRIKES_FRAME_NUM,10);
                values.put(Games.STRIKES_BOWLER_ID,bowlerClickedID);
                values.put(Games.STRIKES_GAME_ID,gameID);
                getContentResolver().insert(Games.STRIKES_URI, values);
            }
        c.close();
        }catch(Exception e){
            Log.d("FullGame",e.toString());
        }

        Date date = new Date(System.currentTimeMillis());
        DateFormat df = new SimpleDateFormat("MM/dd/yyyy");
        String newDate = df.format(date);

        ContentValues values = new ContentValues();
        values.put(Games.GAMES_BOWLER_ID,bowlerClickedID);
        values.put(Games.GAMES_TEAM_ID,1);
        values.put(Games.GAMES_DATE,newDate);
        values.put(Games.GAME_SEASON, pref.getLong(Preferences.SELECTED_SEASON, 1));
        values.put(Games.GAMES_TOURNAMENT_ID, tournamentID);
        Uri uri = getContentResolver().insert(Games.GAMES_URI, values);
        gameID = ContentUris.parseId(uri);
        int gameid = Integer.valueOf(String.valueOf(gameID));
        values.clear();
        Cursor cName = getContentResolver().query(BowlersDB.CONTENT_URI,new String[] {BowlersDB.FIRST_NAME},BowlersDB.ID+"="+bowlerClickedID,null,null);
        cName.moveToFirst();
        String name = cName.getString(0);
        for(int i = 0;i<10;i++){
            int num = i+1;
            values.put(Games.NAMES_FRAME_NUM,num);
            values.put(Games.NAMES_GAME_ID,gameid);
            values.put(Games.NAMES_NAME,name);
            getContentResolver().insert(Games.NAMES_URI, values);
            names(i,name);
            values.clear();
            values.put(Games.PART1_FRAME_NUM,num);
            values.put(Games.PART1_NUM,"0");
            values.put(Games.PART1_GAME_ID,gameid);
            getContentResolver().insert(Games.PART1_URI, values);
            values.clear();
            values.put(Games.PART2_FRAME_NUM,num);
            values.put(Games.PART2_NUM,"0");
            values.put(Games.PART2_GAME_ID,gameid);
            getContentResolver().insert(Games.PART2_URI, values);
            values.clear();
            values.put(Games.TOTALS_FRAME_NUM,num);
            values.put(Games.TOTALS_FRAME_TOTAL,"0");
            values.put(Games.TOTALS_GAME_ID,gameid);
            getContentResolver().insert(Games.TOTALS_URI, values);
            values.clear();
            values.put(Games.POCKETS_BOWLER_ID,bowlerClickedID);
            values.put(Games.POCKETS_FRAME_NUM,i);
            values.put(Games.POCKETS_GAME_ID,gameID);
            values.put(Games.POCKETS_TEAM_ID, teamSelectedID);
            values.put(Games.POCKETS_TOURNAMENT_ID, tournamentID);
            values.put(Games.POCKETS_NUM, 0);
            values.put(Games.POCKETS_SEASON, pref.getLong(Preferences.SELECTED_SEASON, 1));
            getContentResolver().insert(Games.POCKETS_URI, values);
            values.clear();
        }

        values.put(Games.PART3_GAME_ID,gameid);
        values.put(Games.PART3_NUM,"0");
        getContentResolver().insert(Games.PART3_URI, values);
        cName.close();
        part1Array = new int[10];
        part2Array = new int[10];
        totalsArray = new int[10];
        part3 = 0;
        mPinsUp = new ArrayList<Long>();
        mPinsUp.add((long) 1);
        mPinsUp.add((long) 2);
        mPinsUp.add((long) 3);
        mPinsUp.add((long) 4);
        mPinsUp.add((long) 5);
        mPinsUp.add((long) 6);
        mPinsUp.add((long) 7);
        mPinsUp.add((long) 8);
        mPinsUp.add((long) 9);
        mPinsUp.add((long) 10);
        return true;
    }

    protected void onPostExecute(Boolean result){
            pDialog.dismiss();
    }

} 
```

**更新：** 昨晚在调试模式下运行代码，它似乎开始在 for 循环中执行，但所有这些都是在一个单独的线程中完成的，我只是将值插入到我的数据库中

**更新 2** ，如果我注释掉 for 循环，进度对话框会显示不到一秒钟，所以即使我正在做所有事情，`AsyncTask`插入仍然必须在 UI 线程中运行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T12:12:22.890

这可能是因为您的后台线程消耗了 100% 的设备 CPU。当 CPU 忙于处理一个线程时，UI 线程将不会更新，因此您将其视为已冻结

尝试通过从 doInBackground 中删除部分代码并再次运行应用程序来检测最激进的操作。还可以尝试查看未通过 USB 插入设备时的性能 - 这有时会提供奇怪的结果

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T02:53:38.477

想通了，我在 UI 线程上有一个失控的方法，我没有注意到

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T14:29:02.637

你用`ProgressDialog`错了。

您需要添加一个`onPreExecute`方法，并在那里定义并显示您的`ProgressDialog`. 然后`doInBackground`在另一个线程上执行，并最终在`onPostExecute`您关闭对话框。

这是一个简单的例子：

```
class RefreshChanges extends AsyncTask<String, Void, String> {
        private ProgressDialog mProgressDialog = new ProgressDialog(
                mContext);

        @Override
        protected void onPreExecute() {
            mProgressDialog.setTitle("Whatever title");
            mProgressDialog.setMessage("Whatever message");
            mProgressDialog.show();
        }

        protected String doInBackground(String... strings) {
            // Do whatever processing you want...
            return "";
        }

        protected void onPostExecute(String result) {
            mProgressDialog.dismiss();
            mProgressDialog = null;
        }
    }
    new RefreshChanges().execute(); 
```

顺便说一句，我还建议您不要使用硬编码字符串。相反，您可以转到`strings.xml`下面的文件`res\values\`并定义一个字符串。然后在您的代码中，您可以使用`getString(R.string.yourStringId)`或`R.string.yourStringId`。这取决于方法是否接受 Id（接受 Id 的方法，实际上`getString`使用您发送的 Id 执行）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T02:56:01.403

我已经成功地以这种方式实现了对话框。

```
private ProgressDialog progress;

private class AsynTask extends AsyncTask<Void, Void, Void> {

        @Override
        protected void onPreExecute() {
           progress = ProgressDialog.show(context, "", "Please wait...", true);

       }

        @Override
        protected void onPostExecute(Void params) {
             if (progress.isShowing()) 
                  progress.dismiss();

       }

        @Override
        protected Void doInBackground(Void... arg0) {
             // Do some work
             return null;
       }
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T11:53:55.797

我没有看到您的代码有任何错误，但是您必须了解仅在另一个线程中编写代码并不意味着它将获得另一个处理器。如果您的设备具有单核处理器，它会进行时间切片并以循环方式工作。如果您的设备有多个内核，它将执行实际的多线程。因此，如果您有单核处理器，它会向您显示进度条的一些滞后。

# iphone - 设置对象的 NSMutableArray 以匹配字符串值

> ID：11916101
> 
> 赞同：-1
> 
> 时间：2012-08-11T15:56:10.663
> 
> 标签：iphone, objective-c, ios, xcode

我使用两个滑块的值作为第一个搜索条件。

* * *

现在我想要第二个标准。我有一个

```
NSMutableArray *suitsArray; 
```

最多包含 10 个单词，或者它可能是空的（0 个单词）。数组示例：

```
2012-08-12 03:13:14.825 App[4595:f803] The content of array is(
mushroom,
grill,
pizza
) 
```

* * *

我想要的是这样的：

如果 suitsArray 像上面那样，包含词组**蘑菇**、**烧烤**和**比萨饼**

而字典中的“Suits”值是：“这款酒适合**蘑菇**菜、**烧烤**食品、**比萨饼**和鸡肉。”

该字典被添加到 searchResultsArray 中，与“Suits”值包含单词**蘑菇**、**烧烤**和**披萨**的所有其他字典相同。

但如果 suitsArray 没有对象，请跳过此标准。

但我不确定如何为它编写代码。你能帮我吗？

* * *

```
-(IBAction)searchButtonPressed:(id)sender{  

    resultObjectsArray = [NSMutableArray array];
    for(NSDictionary *object in allObjectsArray)

    {

    NSString *objectPrice = [object objectForKey:@"75 cl price"];

    NSString *suitsString = // the words in suitsArray
    NSString *objectSuits = [object objectForKey:@"Suits"];

    BOOL priceConditionGood = YES;
    if (minPrisSlider.value <= maxPrisSlider.value && (winePrice.floatValue < minPrisSlider.value || winePrice.floatValue > maxPrisSlider.value))
        priceConditionGood = NO;
    if (priceConditionGood)
        [resultObjectsArray addObject:object];
     }

    ResultsTableViewController *nextController = [[self storyboard] instantiateViewControllerWithIdentifier:@"ResultsController"];
    nextController.objectsArray = [[NSMutableArray alloc]initWithArray:resultObjectsArray];
    [self.navigationController pushViewController:nextController animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T19:12:58.733

最好查看 suitsArray 是否包含字符串 objectSuits，而不是使用 rangeOfString。

```
if ([suitsArray containsObject:objectSuits]);
    [resultObjectsArray addObject:object]; 
```

编辑后：我想我现在明白了。此方法查看 suitsArray 中的每个单词，如果在 objectSuits 中找到任何单词，则将 object 添加到 resultObjectArray。

```
 for (NSString *aWord in suitsArray) {
        if ([objectSuits rangeOfString:aWord].length == aWord.length) {
            [resultObjectArray addObject:objectSuits];
            break;
        }
    } 
```

第二次编辑：经过进一步思考，上面的代码在逻辑上存在一个可能重要也可能不重要的缺陷——因为它使用 rangeOfString ，它会在其他单词中找到单词。因此，如果 objectSuits 是“This wine goes well with cheesecake”并且 suitsArray 包含单词 cheese，它会找到匹配项（我无法想象适合搭配奶酪的酒会适合搭配芝士蛋糕）。所以，我认为这是一个更好的解决方案，它将 objectSuit 分解为单个单词并将它们放入一个集合中。suitsArray 也被转换为一个集合，这样我们就可以使用 intersectsSet: 来查找是否有任何常用词。

```
NSCharacterSet *sepSet = [NSCharacterSet characterSetWithCharactersInString:@" ,.;"];
    NSArray *words = [objectSuits componentsSeparatedByCharactersInSet:sepSet];
    NSSet *objectSuitsWords = [NSSet setWithArray:words];
    NSSet *suitsSet = [NSSet setWithArray:suitsArray];
    BOOL ans = [suitsSet intersectsSet:objectSuitsWords]; 
```

因此，如果 ans 为 1，则该对象应添加到结果数组中。请注意，sepSet 以空格开头并包含逗号、句点和分号。您可能还想包含其他内容，但我认为这在大多数情况下应该有效。

# c# - MVC4 的 MVC 脚手架？

> ID：11916102
> 
> 赞同：0
> 
> 时间：2012-08-11T15:56:25.897
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4, asp.net-mvc-scaffolding

过去，我在 MVC 站点的 MVCScaffolding 自定义功能的自动化编码方面取得了一些成功。现在，有了出色的 knockout.js 和其他 js 库，我也想自动化 javascript 编码。MVCScaffolding 还在为 MVC4 工作吗？在进入它之前，我想与有经验的人核实一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T15:58:56.317

我正在使用 MVC 4 RC，脚手架工作得很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T18:24:32.347

它目前在非 Windows 8 机器上运行良好。但是，它不支持 Windows 8 附带的 powershell 版本。希望尽快修复。

[您可以查看 codeplex 上的最新变更集。](http://mvcscaffolding.codeplex.com/SourceControl/list/changesets)

编辑：截至 2012 年 10 月 25 日，它现已修复！

# javascript - 简单的拖放 JS 脚本不起作用？

> ID：11916105
> 
> 赞同：-1
> 
> 时间：2012-08-11T15:56:42.810
> 
> 标签：javascript, html, css

对不起，英语不是最好的！

我尝试使用这个简单的 Javascript 和 HTML，以及 CSS，拖放，并且没有得到更正！

看看网站，一切都很好，但无法正常工作？

[http://bouncygames.org/smell.php](http://bouncygames.org/smell.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T15:59:06.660

你得先安装 jQuery 和 jQuery UI`Uncaught ReferenceError: $ is not defined`

[http://jqueryui.com/download/](http://jqueryui.com/download/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T16:02:27.280

您没有安装 jQuery 和 jQuery UI。

为此，将以下行添加到您的 head 标签中：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/jquery-ui.min.js"></script> 
```

# jquery - jquery'option'附加选择对象的问题

> ID：11916107
> 
> 赞同：0
> 
> 时间：2012-08-11T15:57:11.210
> 
> 标签：jquery

我正在制作一个选择对象以及附加选项，一切顺利。但选项永远不会附加到选择对象..有什么帮助吗？

```
if (el.type === 'select') {
    element = $('<label>' + el.label + '<select></select></label>').attr({
        id: el.id,
        name: el.name
    }) //my select object
    var options = ""
    $.map(el.options, function(option, i) {
        options += '<option' + option.value + '>' + option.text + '</option>';
    })
    $(element).append(options); // never append to select object
    console.log(options); //it prints properly like : <option>Select Country</option><optionin>India</option><optionus>United Stated</option><optionuk>United Kingdom</option><optioncn>Canada</option>
}​ 
```

那会是什么问题呢？哪里不对了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T16:07:34.887

对我来说似乎工作正常，您是否检查了您创建的选择对象并且没有插入到 DOM 中进行更改？

[**小提琴**](http://jsfiddle.net/j7WTS/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T16:12:17.110

谢谢大家，我用这种方式附加，它工作得很好..

```
if(el.type === 'select'){
                        element = $('<label>'+el.label+'<select></select></label>').attr({
                            id : el.id,
                            name:el.name
                        })
                        var options = ""
                        $.map(el.options, function (option,i) {
                            $(element).find('select').append($('<option></option>').attr('value',option.value).text(option.text));
                        })

                    } 
```

# hibernate - 休眠中的多个数据源

> ID：11916109
> 
> 赞同：1
> 
> 时间：2012-08-11T15:57:26.693
> 
> 标签：hibernate, datasource

> **可能重复：**
> [Hibernate + Spring 使用多个数据源？](https://stackoverflow.com/questions/860918/hibernate-spring-using-multiple-datasources)

如何使用spring在hibernate中为同一个项目设置两个数据源。我只想将一个数据源用于h2，另一个用于mysql，是否可以为同一应用程序管理两个数据源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T19:43:19.780

是的，但您需要为每个数据源设置一个 SessionFactory

# php - CodeIgniter：添加到 where 子句

> ID：11916112
> 
> 赞同：0
> 
> 时间：2012-08-11T15:57:38.033
> 
> 标签：php, codeigniter, expressionengine

我在 ExpressionEngine （使用 CodeIgniter 框架）中有以下条件：

```
if ($group_id !== '')
    {
        $this->db->where("members.group_id", $group_id);
    } 
```

我想在 where (and) 中添加一个额外的条件，我该怎么做？我要添加一个新的`$this->db->where('my_field', $my_value)`吗？或者怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T16:02:01.867

你猜到了。

```
if ($group_id !== '')
{
    $this->db->where("members.group_id", $group_id);
    $this->db->where('my_field', $my_value);
} 
```

查看 Codeigniter 文档[http://codeigniter.com/user_guide/database/active_record.html](http://codeigniter.com/user_guide/database/active_record.html) 很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T16:05:50.160

```
// if (is_numeric($group_id) && $group_id > 0)
if ($group_id)
{
    $this->db->where("members.group_id", $group_id);
    $this->db->where('my_field', $my_value);
    // $this->db->where('my_field >=', $my_value);
    // $this->db->where('my_field <', $my_value);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T05:02:50.230

我所做的是写出查询，例如：

```
$data = array('name' => $_POST['name'], 'lname' => $_POST['lname']);
$sql = "select table where name = ? and lname = ?";
$this->db->query($sql, $data); 
```

我喜欢把它写出来的原因是，一旦你最终编写了具有许多表连接的非常复杂的查询，阅读活动记录查询就变得非常困难。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T09:52:56.500

是的......你可以试试这个：

```
if ($group_id !== '')
{
    $this->db->where("members.group_id", $group_id);
    $this->db->where('my_field', $my_value);
} 
```

你也可以使用：

```
$this->db->or_where('my_field',$my_value); 
```

# java - JDK 6 不支持 Statement 和 ResultSet。我可以用什么来代替这些？

> ID：11916115
> 
> 赞同：1
> 
> 时间：2012-08-11T15:57:45.943
> 
> 标签：java, resultset

我想用

```
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;

.
.
.

 try (Statement stmt = connection.createStatement()) {

               try (ResultSet rset = stmt.executeQuery(url)) {
                    while (rset.next()) { 
                    System.out.println (rset.getString(1)); 
                        }
                }
           } 
```

在 jdk 6 中。但它说这不受支持。我能做些什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-11T17:54:09.167

这是 Java SE 7 中的新特性 try-with-resource。在 Java SE 6 中（最近延长到明年，但我不会为它编写新代码）：

```
Statement stmt = connection.createStatement() {
try {
    ResultSet rset = stmt.executeQuery(url)
    try {
        while (rset.next()) { 
            System.out.println (rset.getString(1)); 
        }
    } finally {
        rset.close();
    }
} finally {
    stmt.close();
} 
```

您可以使用[Execute Around 习语](https://stackoverflow.com/questions/341971/what-is-the-execute-around-idiom)来分解重复位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T17:57:58.243

[Try-with-resources](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)是 Java 7 引入的一项功能。您需要手动管理资源。

```
Statement stmt = null;
ResultSet rset = null;
try {
   stmt = connection.createStatement();
   rset =  stmt.executeQuery(url);
   while (rset.next()) { 
      System.out.println(rset.getString(1)); 
   }
} catch (Exception e) {
   // In your real code catch expecific exceptions and do something about it.
} finally {
   if (rset != null) {
       try { 
          rset.close(); 
       } catch (Exception e) {} // Same thing 
   }
   if (stmt != null) {
       try {
          stmt.close();
       } catch (Exception e) {} // Same thing 
   }
} 
```

或者使用[Apache dbutils](http://commons.apache.org/dbutils/)之类的库或更好的[Spring Framework JDBC](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/jdbc.html)来避免样板代码。

# tsql - TSQL设置表变量的列值

> ID：11916117
> 
> 赞同：0
> 
> 时间：2012-08-11T15:58:05.673
> 
> 标签：tsql, field, iteration, table-variable

我正在尝试迭代地设置表变量的各个列，如下所示：

```
declare @reg_data table
(
    I int NOT NULL PRIMARY KEY IDENTITY,
    Y float
)

declare @counter int, @numRows int
SET @counter = 0
SET @numRows = (select MAX(val) + 10 from tableY)

WHILE @counter < numRows
BEGIN
    SET @reg_data.Y = dbo.func1(@counter)       --HOW DO I DO THIS!!!  
    @counter = @counter + 1
END 
```

以上不起作用，因为您无法访问像数组这样的表变量。如何获得以下功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T16:07:43.130

您不能在不存在的记录中设置值，因此您需要一个`insert`：

```
WHILE @counter < numRows
BEGIN
    INSERT INTO @reg_data (Y) values (dbo.func1(@counter))
    @counter = @counter + 1
END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T20:45:04.227

为了完整起见，一个带有 CTE 且没有循环的单语句示例：

```
DECLARE @reg_data TABLE (
    I INT NOT NULL PRIMARY KEY IDENTITY,
    Y FLOAT
);

WITH cteNum AS (
    SELECT MAX(val) + 10 AS val
    FROM @tableY
    HAVING MAX(val) >= 0
    UNION ALL
    SELECT val-1
    FROM cteNum
    WHERE val > 0
)
INSERT @reg_data(Y)
    SELECT dbo.func1(val)
    FROM cteNum
    OPTION (MAXRECURSION 0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T16:02:10.297

为什么要为此使用光标？

你为什么不写一些`UPDATE`语句：

```
WHILE @counter < numRows
BEGIN
    UPDATE @reg_data
    SET Y = dbo.func1(@counter)  
    WHERE I = @counter

    SET @counter = @counter + 1
END 
```

您需要能够以某种方式从table变量中读取*标识*值(`I``UPDATE``I`

# c++ - 选择扩展弹出菜单（子菜单）的元素

> ID：11916124
> 
> 赞同：1
> 
> 时间：2012-08-11T15:58:47.133
> 
> 标签：c++, c, winapi

几周以来，我试图弄清楚如何在弹出菜单上选择（选择）项目，该菜单扩展到另一个弹出子菜单。例如：

```
 HMENU hMenu,hSubMenu;
 hMenu = CreatePopupMenu();
 hSubMenu = CreatePopupMenu();
 AppendMenu(hMenu , MF_POPUP | MF_STRING | MF_ENABLED, (UINT_PTR) hSubMenu, name.c_str()); // this one i want to select and choose on callback
 AppendMenu(hMenu , MF_POPUP | MF_STRING, (UINT_PTR) count, name.c_str()); 
```

比我试图通过以下方式获得回调：`WM_MENUSELECT`捕捉悬停元素的名称。但是当我点击这个 hSubMenu 元素时 - 菜单不想消失，但仍然处于活动状态并扩展子菜单元素。

`WM_INITMENUPOPUP`不会有帮助的。

我只是想在收到消息时关闭此弹出菜单`WM_MENUSELECT`。 `WM_LBUTTONUP`在弹出菜单上不起作用...

你能给我一些建议吗？我正在用纯winapi编码。

# ruby-on-rails - “没有路线匹配” - Ruby/Rails/Cucumber

> ID：11916127
> 
> 赞同：0
> 
> 时间：2012-08-11T15:59:02.227
> 
> 标签：ruby-on-rails, ruby, routes, cucumber

我正在学习伯克利软件即服务课程，但无法确定创建“查找类似电影的 RESTful 路线”所需的内容。

我的电影控制器中有这个：

```
def find_by_same_director
  @movies = Movie.find_by_director params[:id]
end 
```

我在 routes.rb 中尝试尽可能多的变体：

```
match 'movies/find_by_same_director/:id' => 'movies#find_by_same_director' 
```

但是无论我做什么，当我运行我的 Cucumber 时，我都会遇到同样的错误：

```
No route matches
{:action=>"find_by_same_director",:controller=>"movies", :id=>1}
(ActionController::RoutingError) 
```

我是 Rails 的新手，所以我想我只是没能正确理解要将控制器动作识别为路由必须做什么。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T17:28:42.013

你`config/routes.rb`应该有类似或类似的东西：

```
match '/movies/:id/directors' => 'movies#same_directors', :as => 'same_directors' 
```

你`app/controllers/movies_controller.rb`应该有一个同名的动作！

```
def same_directors
end 
```

你应该像这样创建一个视图：

```
`app/views/movies/same_directors.html.haml` 
```

而对于黄瓜，你`features/support/paths.rb`应该有这条​​线或类似的：

```
when /^the Similar Movies page for "(.*)"$/
  same_directors_path(Movie.find_by_title($1)) 
```

这是用于了解确切路线的 rails 应用程序烹饪食谱和黄瓜设置！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T18:10:50.017

```
match 'movies/find_by_same_director/:id' => 'movies#find_by_same_director' 
```

变成：

```
match '/movies/find_by_same_director/:id' => 'movies#find_by_same_director' 
```

# c# - 在动态加载的 DLL 库中返回字符串失败

> ID：11916129
> 
> 赞同：0
> 
> 时间：2012-08-11T15:59:09.747
> 
> 标签：c#, .net, interop, pinvoke

我将完整地向您描述我的问题和过程。我正在为其他人的游戏制作编辑器，并且我有一个用 C 语言编写的包装 DLL，我正在与之通信。

起初我有`DllImport`从 DLL 调用函数的方法列表。第一种方法是`CSharp_new_CEditorInterface`返回一个`IntPtr`. 然后`CSharp_CEditorInterface_CreateApp`哪个toke`ulong`句柄到窗口控制它将在哪里绘制图形。最后我应该调用`CSharp_CEditorInterface_CloseApp`and `CSharp_delete_CEditorInterface`。这些方法采用`HandleRef`从返回的 with 指针`CSharp_new_CEditorInterface`。

但是，我需要多次调用创建和删除方法`CSharp_CEditorInterface_CreateApp`，第二次调用时，它会抛出`System.AccessViolationException`. 所以我决定用 LoadLibrary 和 FreeLibrary 动态加载和卸载 DLL。我编写了一个应用程序，它通过反射浏览所有 p/invoke 方法并生成由委托、只读字段和 GetProcAddress-es 组成的代码。然而，正如我发现的那样，入口点只是部分的。`CSharp_new_CEditorInterface`是`_CSharp_new_CEditorInterface@0`。使用我的 DLL 导出查看器，我保存了所有完整的函数名称，然后在其中进行了搜索。在构造函数中，我调用`LoadLibrary`并加载适当的函数。在`Dispose`，有`FreeLibrary`。

该解决方案运行良好，函数调用正常，直到我发现一些返回字符串的函数正在抛出`AccessViolationException`. 他们在使用`DllImport`方法时工作正常。我还发现，当从静态类调用 ANY 函数，从而加载另一个模块时，调用有问题的函数现在可以并且它们返回适当的值。但是，动态卸载DLL并重新加载后，它再次不起作用并猜测抛出了哪个异常。

现在我调用哪个函数以及按什么顺序：

```
--When initializing--
LoadLibrary(string)  (winapi)
--bunch of GetProcAddress, Marshal.GetDelegateForFunctionPointer--
new_CEditorInterface()  (from DLL)
CreateApp(HandleRef, ulong)  (from DLL)

--When closing in Dispose--
CloseApp(HandleRef)  (from DLL)
delete_CEditorInterface(HandleRef)  (from DLL)
FreeLibrary(IntPtr)  (winapi) 
```

我应该注意，DLL 不是为了一次加载多个而创建的。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T11:04:31.653

试试这个希望对你有帮助

```
[DllImport("kernel32.dll", CharSet = CharSet.Auto, SetLastError = true)]
private static extern IntPtr LoadLibrary(string libname);

[DllImport("kernel32.dll", CharSet = CharSet.Auto)]
private static extern bool FreeLibrary(IntPtr hModule);

//Load
IntPtr Handle = LoadLibrary(fileName);
if (Handle == IntPtr.Zero)
{
     int errorCode = Marshal.GetLastWin32Error();
     throw new Exception(string.Format("Failed to load library (ErrorCode: {0})",errorCode));
}

//Free
if(Handle != IntPtr.Zero)
        FreeLibrary(Handle); 
```

如果要先调用函数，则必须创建与此函数匹配的委托，然后使用 WinApi GetProcAddress

```
[DllImport("kernel32.dll", CharSet = CharSet.Ansi)]
private static extern IntPtr GetProcAddress(IntPtr hModule, string lpProcName); 

IntPtr funcaddr = GetProcAddress(Handle,functionName);
YourFunctionDelegate function = Marshal.GetDelegateForFunctionPointer(funcaddr,typeof(YourFunctionDelegate )) as YourFunctionDelegate ;
function.Invoke(pass here your parameters); 
```

# c++ - 是无序集 > 有效吗？

> ID：11916133
> 
> 赞同：9
> 
> 时间：2012-08-11T15:59:24.067
> 
> 标签：c++, reference, c++11, hashset

这是有效的 C++（考虑到最新标准）吗？我在 Ubuntu 12.04 上使用接近树顶的 clang/libc++ 时遇到编译错误。如果它应该是有效的，我将通过错误消息等邮寄 clang-dev 列表。

```
#include <functional>
#include <unordered_set>

struct X
{
    int i; 
};

void f ()
{
    std::unordered_set<std::reference_wrapper<X>> setOfReferencesToX;

    // Do stuff with setOfReferencesToX
} 
```

** 顺便说一句，我厌倦了限定问题/答案是特定于最新标准的。整个 C++ 社区是否可以开始限定特定于旧标准的东西？较新的标准已经发布了大约一年。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-11T16:02:36.137

问题不是特定于`std::reference_wrapper<T>`，而是类型`X`本身。

问题是[std::unordered_set](http://en.cppreference.com/w/cpp/container/unordered_set)要求您为`std::reference_wrapper<X>`. 您可以将哈希函子作为第二个模板参数传递。

例如，这将起作用：

```
#include <functional> // for std::hash<int>

struct HashX {
  size_t operator()(const X& x) const {
    return std::hash<int>()(x.i);      
  }
}; 
```

进而

```
std::unordered_set<std::reference_wrapper<X>, HashX> setOfReferencesToX; 
```

另一种选择是专门化`std::hash<X>`：

```
namespace std {
template <>
struct hash<X> {
  size_t operator()(const X& x) const {
    return std::hash<int>()(x.i);      
  }
};
} 
```

这允许您避免显式指定第二个模板参数：

```
std::unordered_set<std::reference_wrapper<X>> setOfReferencesToX; 
```

关于相等比较，您可以通过为 class 提供相等运算符来解决此问题`X`：

```
struct X
{
  bool operator==(const X& rhs) const { return i == rhs.i; }
  int i; 
}; 
```

否则，您可以定义自己的仿函数并将其作为第三个模板参数传递。

# ruby-on-rails - 如何过滤或范围内的医生，仅列出属于组织的医生？

> ID：11916137
> 
> 赞同：3
> 
> 时间：2012-08-11T15:59:58.217
> 
> 标签：ruby-on-rails, simple-form

创建约会时，比如说组织“ABC”，我还可以看到属于其他组织的医生。它假设只列出来自“ABC”的医生而不是其他人。我该怎么办。

谢谢你。

我的预约表格：

```
<%= simple_form_for(@appointment, :html => { :class => 'form-horizontal' }) do |f| %>
  <div class="form-inputs">
    <%= f.hidden_field :patient_id %>
    <%= f.association :physician, :label_method => :first_name, :include_blank => false, :as => :radio_buttons, :required => true %>
    <%= f.hidden_field :appointment_date, :value => DateTime.now  %>
    <%= f.hidden_field :organization_id, :value => current_user.organization_id%>
  </div>

  <div class="form-actions">
    <%= f.button :submit, "Create Appointment" %>
  </div>
<% end %> 
```

我的模型：

/app/models/physician.rb

```
class Physician < ActiveRecord::Base
  has_many :appointments
  has_many :patients, :through => :appointments
  belongs_to :organization

  attr_accessible :physician_name, :organization_id
end 
```

/app/models/appointment.rb

```
class Appointment < ActiveRecord::Base
  belongs_to :physician
  belongs_to :patient
  belongs_to :organization

  attr_accessible :physician_id, :patient_id, :appointment_date, :state, :organization_id
end 
```

/app/models/patient.rb

```
class Patient < ActiveRecord::Base
  has_many :appointments
  has_many :physicians, :through => :appointments
  belongs_to :organization

  attr_accessible :patient_name, :organization_id
end 
```

我的控制器：

/app/controllers/appointment_controller.rb

```
class AppointmentsController < ApplicationController
  def new
    @appointment = Appointment.new
    @appointment.patient_id = params[:patient_id]
  end

  def create
    @appointment = Appointment.new(params[:appointment])

    if @appointment.save
      flash[:notice] = "New appointment record created"
      redirect_to dashboards_path
    else
      render 'new'
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-11T16:11:19.240

这是因为 simple_form 不知道您的范围。如果你告诉它：

```
<%= f.association :phyisician %> 
```

它将简单地列出数据库中所有可用的医生。

解决方案是给它你想要展示的医生集合，例如你可以写：

```
<%= f.association :physician,
                  :collection => @appointment.patient.organization.physicians,
                  :label_method => :first_name,
                  :include_blank => false,
                  :as => :radio_buttons,
                  :required => true %> 
```

# javascript - 为什么这个 jQuery 代码检查所有复选框不起作用？

> ID：11916138
> 
> 赞同：0
> 
> 时间：2012-08-11T16:00:04.023
> 
> 标签：javascript, jquery

HTML：

```
<table class="responsive" id="products">
    <a href="#" id="checkAllProducts">Do it</a>
    <input type="checkbox">
    <input type="checkbox">
    <input type="checkbox">
</table> 
```

JS：

```
$(document).ready(function(){
  $('#checkAllProducts').click(function(){
    var checkbox = $('#products input:checkbox');
    checkbox.attr('checked',!checkbox.attr('checked'));
  });
});​ 
```

它可用于调试[here](http://jsfiddle.net/UNqfv/3/)。

如果我这样做，代码就可以工作`var checkbox = $('input:checkbox');`。问题可能出在选择器中

单击链接后，此代码应检查所有复选框。但它不这样做。为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-11T16:05:29.903

您的 HTML 无效。您不能将`input`元素直接放在`table`元素内。当浏览器发现下一个元素不能跟随表格标签时，很可能会自动关闭表格标签 - 因此无法找到复选框作为`#products`选择器的子项。

```
<div class="responsive" id="products"> 
```

成功了。

此外，“checked”是一个属性，所以你应该使用 prop() 来访问它：

```
checkbox.prop('checked', !checkbox.prop('checked')); 
```

[http://jsfiddle.net/UNqfv/6/](http://jsfiddle.net/UNqfv/6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T16:03:49.370

```
var checkbox = $('#products input:checkbox'); 
```

`checkbox`不是单个复选框，您需要调用`.each()`对所有复选框进行操作..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T17:47:04.343

html 表格元素必须包含 tr、td 标签。

```
<table class="responsive" id="products">
    <tr>
        <td><a href="#" id="checkAllProducts">Do it</a></td>
        <td><input type="checkbox"></td>
        <td><input type="checkbox"></td>
        <td><input type="checkbox"></td>
    </tr>
</table> 
```

并且您的选择器代码应该相似

```
var checkbox = $('#products tr td input:checkbox'); 
```

[在这里](http://jsfiddle.net/UNqfv/11/)调试

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-11T19:35:01.747

据我所知，只要表格格式正确，表格可以包含任何块级或内联元素。问题是一个表必须有像和shit这样的东西`td`来`tr`定义它的行和行，如果你尝试：

```
<table class="responsive" id="products">
    <tr>
        <td>
            <a href="#" id="checkAllProducts">Do it</a>
            <input type="checkbox">
            <input type="checkbox">
            <input type="checkbox">
        </td>
    </tr>
</table> 
```

它会工作得很好，然后你可以这样做：

```
$(function(){
  $('#checkAllProducts').on('click', function(e){
      e.preventDefault();
      var checkbox = $('#products input[type="checkbox"]');
      checkbox.prop('checked', !checkbox.prop('checked'));
  });
}); 
```

[**小提琴**](http://jsfiddle.net/UNqfv/13/)​​​​​</p>

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-12T00:07:30.790

使用它，它会工作得很好：

```
$(document).ready(function(){
   $('#checkAllProducts').click(function(){
    var checkbox = $('input:checkbox');
    checkbox.attr('checked',!checkbox.attr('checked'));
});

});​ 
```

原因是您需要指定“所有检查块”。目前使用选择器“$('#products input:checkbox');”，您只选择 id 为“products”的复选框。如果您在每个名为“产品”的复选框上都有一个 id 属性，那么您的原始代码将起作用。相反，我在上面向您展示的选择器将选择任何复选框类型。希望这会有所帮助，并且解释清楚！快乐编码！

# r - 在 R 中绘制轮廓似然曲线

> ID：11916139
> 
> 赞同：6
> 
> 时间：2012-08-11T16:00:19.217
> 
> 标签：r

我试图弄清楚如何在同一图上绘制具有 95% pLCI 的 GLM 参数的轮廓似然曲线。我一直在尝试的例子如下。我得到的图不是我期望的似然曲线。图的 y 轴是 tau，我希望该轴是可能性，以便我有一条在参数估计值处最大的曲线。我不确定在哪里可以找到这些似然值？我可能只是误解了这背后的理论。谢谢你提供的所有帮助。

最大限度

```
clotting <- data.frame(
u = c(5,10,15,20,30,40,60,80,100),
lot1 = c(118,58,42,35,27,25,21,19,18),
lot2 = c(69,35,26,21,18,16,13,12,12))
glm2<-glm(lot2 ~ log(u), data=clotting, family=Gamma)
prof<-profile(glm2)
plot(prof) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-11T18:01:15.950

重新生成您的示例：

```
clotting <- data.frame(
                       u = c(5,10,15,20,30,40,60,80,100),
                       lot1 = c(118,58,42,35,27,25,21,19,18),
                       lot2 = c(69,35,26,21,18,16,13,12,12))
glm2 <- glm(lot2 ~ log(u), data=clotting, family=Gamma) 
```

该`profile.glm`函数实际上存在于`MASS`包中：

```
library(MASS)
prof<-profile(glm2) 
```

为了弄清楚什么`profile.glm`和`plot.profile`正在做什么，请参阅`?profile.glm`和`?plot.profile`。但是，为了深入研究对象，检查和的代码也`profile`可能很有用......基本上，这些告诉你的是返回偏差和最小偏差之间差异的有*符号平方根*，按比例缩放色散参数。这样做的原因是，完美二次轮廓的轮廓将显示为一条直线（与肉眼检测直线的偏差比检测抛物线的偏差要容易得多）。`MASS:::profile.glm``MASS:::plot.profile``profile`

 *可能有用的另一件事是如何存储配置文件。基本上，它是一个数据帧列表（每个参数配置一个），除了单个数据帧有点奇怪（包含一个向量分量和一个矩阵分量）。

```
> str(prof)
List of 2
 $ (Intercept):'data.frame':    12 obs. of  3 variables:
  ..$ tau     : num [1:12] -3.557 -2.836 -2.12 -1.409 -0.702 ...
  ..$ par.vals: num [1:12, 1:2] -0.0286 -0.0276 -0.0267 -0.0258 -0.0248 ...
  .. ..- attr(*, "dimnames")=List of 2
  .. .. ..$ : NULL
  .. .. ..$ : chr [1:2] "(Intercept)" "log(u)"
  ..$ dev     : num [1:12] 0.00622 0.00753 0.00883 0.01012 0.0114 ...
 $ log(u)     :'data.frame':    12 obs. of  2 variables:
  ..$ tau     : num [1:12] -3.516 -2.811 -2.106 -1.403 -0.701 ...
  ..$ par.vals: num [1:12, 1:2] -0.0195 -0.0204 -0.0213 -0.0222 -0.023 ...
  .. ..- attr(*, "dimnames")=List of 2 
```

它还包含属性`summary`，`original.fit`您可以使用这些属性来恢复色散和最小偏差：

```
disp <- attr(prof,"summary")$dispersion
mindev <- attr(prof,"original.fit")$deviance 
```

现在反转参数 1 的转换：

```
dev1 <- prof[[1]]$tau^2
dev2 <- dev1*disp+mindev 
```

阴谋：

```
plot(prof[[1]][,1],dev2,type="b") 
```

（这是偏差图。您可以乘以 0.5 得到负对数似然，或 -0.5 得到对数似然......）

**编辑**：一些更通用的功能将配置文件转换为有用的格式`lattice`/`ggplot`绘图...

```
tmpf <- function(x,n) {
    data.frame(par=n,tau=x$tau,
               deviance=x$tau^2*disp+mindev,
               x$par.vals,check.names=FALSE)
}
pp <- do.call(rbind,mapply(tmpf,prof,names(prof),SIMPLIFY=FALSE))
library(reshape2)
pp2 <- melt(pp,id.var=1:3)
pp3 <- subset(pp2,par==variable,select=-variable) 
```

现在用格子绘制它：

```
library(lattice)
xyplot(deviance~value|par,type="b",data=pp3,
       scales=list(x=list(relation="free"))) 
```

![在此处输入图像描述](../Images/2f0876b90677fc04b5a9e90025e929f9.png)

或者使用ggplot2：

```
library(ggplot2)
ggplot(pp3,aes(value,deviance))+geom_line()+geom_point()+
    facet_wrap(~par,scale="free_x") 
```

![在此处输入图像描述](../Images/a12c8a538c748dd994aa955963937306.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-03T14:26:02.263

仅供参考，为了好玩，我将上面的内容组合成一个函数，`purrr::imap_dfr`因为我找不到实现上述内容的包。

```
get_profile_glm <- function(aglm){
  prof <- MASS:::profile.glm(aglm)
  disp <- attr(prof,"summary")$dispersion

  purrr::imap_dfr(prof, .f = ~data.frame(par = .y,
                                deviance=.x$z^2*disp+aglm$deviance, 
                                values = as.data.frame(.x$par.vals)[[.y]],
                                stringsAsFactors = FALSE))

} 
```

效果很好！

```
counts <- c(18,17,15,20,10,20,25,13,12)
outcome <- gl(3,1,9)
treatment <- gl(3,3)
print(d.AD <- data.frame(treatment, outcome, counts))
glm.D93 <- glm(counts ~ outcome + treatment, family = poisson())

ggplot(get_profile_glm(aglm), aes(x = values, y = deviance)) +
  geom_point() +
  geom_line() +
  facet_wrap(~par, scale = "free_x") 
```

[![在此处输入图像描述](../Images/2438d5854b6da72da24be6748239c7a7.png)](https://i.stack.imgur.com/uPD6M.png)*

# list - 从函数中检索值

> ID：11916142
> 
> 赞同：1
> 
> 时间：2012-08-11T16:00:28.077
> 
> 标签：list

我有一个程序，其中我有两个数组。他们开始是空的，但通过程序他们得到填充。

如果这是我的第一个功能：

```
program():-
  populate_arrays([],[]),
  carry_on(). 
```

为了将填充的数组传递给 carry_on()，我必须在 populate_arrays() 中有四个参数吗？两个在开始时将数组声明为空，另外两个传递给 carry_on()？

就像：

```
program():-
  populate_arrays([],[],A,B),
  carry_on(A,B). 
```

似乎很尴尬，我必须将参数加倍

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T17:53:10.160

是的，这就是你要做的。不，这并不尴尬，因为它们不是重复的：第一对是您的输入参数，第二对是您的输出结果。

这是一种常见的使用模式，对应于***状态转换***：旧*入*新*出*。你的知识状态被这个谓词改变了，`populate_arrays`。这反映在您使用它的方式上。

顺便说一句，如果起始值 always `[]`，您可以为“工作”谓词提供“包装器”：

```
populate_arrays( A, B):-
   populate_arrays([], [], A, B).

populate_arrays( A, B, C, D):-
   % your implementation ... 
```

# objective-c - 从不同的 ViewController 捕获按钮事件

> ID：11916146
> 
> 赞同：0
> 
> 时间：2012-08-11T16:01:37.627
> 
> 标签：objective-c, ios, delegates, core-graphics, protocols

**我的设置**

我有一个`ViewController`，用户在其中键入某种文本。调用它`InputViewController`。

我有一个`UIView`（在一个单独的类中），我在其中绘制了一个具有渐变的导航栏（我`drawRect`为 Core Graphics 覆盖，因此我需要在一个单独的类中），它有一个按钮。该按钮会将您带到`MapViewController`，它允许您将位置标签添加到您的输入中。添加位置标签后，我想更改按钮的图像。

**我的问题**

点击按钮后，我需要将用户的输入发送到`MapViewController`，其中还实现了一个委托并将一些信息传回给`InputViewController`. 这里的问题是按钮位于单独的`UIView`. 一种方法是在`UIView`设置信息后传递信息，然后在`MapViewController`点击按钮后传递信息。这里的问题是委托，因为委托需要返回`InputViewController`而不是 `UIView.

我想知道是否可以将其`UIView`移入`InputViewController`，包括该`drawRect`视图的方法。如果是这样，我该怎么做？如果没有，我可以采取哪些其他方式/建议来进行上述设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T20:47:07.317

我想您需要使用 NSNotifications 向您的班级发送消息。看到[这个](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsnotificationcenter_Class/Reference/Reference.html)。

# javascript - 为什么内联 JS 块不安全？

> ID：11916151
> 
> 赞同：5
> 
> 时间：2012-08-11T16:02:06.427
> 
> 标签：javascript, security, inline-scripting

我正在阅读 Chrome 扩展文档“[内容安全策略 (CSP)](http://developer.chrome.com/extensions/contentSecurityPolicy.html) ”。它说：

> 内联 JavaScript 以及危险的字符串到 JavaScript 方法（如 eval）将不会被执行。此限制禁止内联块和内联事件处理程序（例如`<button onclick="...">`）。
> 
> ...
> 
> 没有机制可以放宽对执行内联 JavaScript 的限制。特别是，设置包含 unsafe-inline 的脚本策略将不起作用。这是故意的。

为什么内联`<script>`块不安全？谁能解释一下？如果能举出例子就更好了。

谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-11T16:04:30.607

正如页面所说：

> 第一个限制消除了一大类跨站点脚本攻击，使您不可能意外执行恶意第三方提供的脚本。

基本上，您加载的任何脚本都需要位于扩展本地可访问的单独文件中。这可以防止您加载被注入您的页面或包含它们的第 3 方脚本，例如：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script> 
```

例如，如果您有一个用户可以填写的表格。用户可以输入带有一些 JS 的脚本标签。假设它就像一个讨论论坛。我进去做了一个话题，但里面有一些隐藏的 JS。我们还假设您在发布之前没有清除它。现在我的帖子有 JS，每次有人查看它时都会执行。这可以防止该脚本被执行。

# java - Google App Engine：CRUDing 实例

> ID：11916157
> 
> 赞同：1
> 
> 时间：2012-08-11T16:02:46.243
> 
> 标签：java, google-app-engine, crud, scaling

我已经阅读了GAE 的[实例概述](https://developers.google.com/appengine/docs/adminconsole/instances)，它提供了非常丰富的信息，但是当涉及到实际的 CRUDing 实例时，我只是没有看到“树林中的森林”。

在某些文献中，GAE 听起来像是“自动缩放”您的应用程序并动态计算您需要的实例数以处理当前服务器负载。然而，上面的文章主要关注通过管理控制台手动创建和管理实例。

这两个概念如何相关/不同？

我之所以这么问，是因为我一遍又一遍地阅读了相同的一致建议：*尝试将您始终运行的实例数量保持在尽可能低的水平（因为更少的实例导致计费更少）。*但我不确定这是否是一项手动“修剪”工作，需要我每 10 分钟登录一次管理控制台以查看是否需要创建新实例或现有实例是否需要销毁/关闭；或者如果这是自动计算的。

如果它是自动计算的，那么通过管理控制台手动 CRUDing 实例有什么意义？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T19:39:56.470

AppEngine 肯定会自动缩放。

但是，它使您能够调整自动缩放机制以提高成本或性能。

一些规则：

1.  每个实例都需要付费（但是您每天可以免费获得 28 个实例小时）。
2.  当实例停止执行请求时，您将在 15 分钟不活动后停止为它收费（尽管它可能会保持空闲并在您的实例列表中可见，如果谷歌没有更好的工作的话）。
3.  每个请求都进入一个 Pending Queue 并在那里等待，直到实例可用以执行它。
4.  如果等待时间过长，将启动一个新实例（= 自动缩放）。在启动新实例之前必须等待多长时间[由待定延迟控制](https://developers.google.com/appengine/docs/adminconsole/performancesettings#scheduler)。
5.  如果您不希望请求等待，您可以通过设置 Idle Instances 来获得“保留”实例。在这种情况下，GAE 将始终尝试提供可用的空闲实例，这意味着如果空闲实例得到工作，GAE 将创建一个新实例。因此，您的实例数 = 工作实例（处理请求）+ 空闲实例数。基本上，Idle Instances 只是一个储备，不做实际工作，除非工作实例无法应对负载，然后 Idle Instance 跳入，成为工作实例，同时新的 Idle Instance 正在启动。注意：空闲实例在管理控制台中标记为“驻留”（为什么 Google 这样做，为什么？）。

顺便说一句，文档在哪里说您可以手动启动实例？

# google-maps - Google Maps API v3 多标记信息窗口

> ID：11916158
> 
> 赞同：4
> 
> 时间：2012-08-11T16:02:52.323
> 
> 标签：google-maps, marker

我使用下面的代码来显示带有多个标记和信息窗口的地图。现在我遇到了一个非常常见的问题，即最后一个信息窗口出现在所有标记上。我尝试了各种解决方案，包括： http: [//you.arenot.me/2010/06/29/google-maps-api-v3-0-multiple-markers-multiple-infowindows/](http://you.arenot.me/2010/06/29/google-maps-api-v3-0-multiple-markers-multiple-infowindows/)和这个[http:/ /www.robertbolton.com/blog/google-maps-v3-multiple-markers-and-infowindows-in-a-loop](http://www.robertbolton.com/blog/google-maps-v3-multiple-markers-and-infowindows-in-a-loop)但没有一个能解决问题。

这是我的代码：

```
var infowindow = null;
var geocoder;
var map; 

$(document).ready(function() {
    initialize();
});

function initialize() {

    var myOptions = {
            zoom: 8, 
            mapTypeId: google.maps.MapTypeId.ROADMAP, 
            disableDefaultUI: true, 
            scrollwheel: false 
    };

    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

    setMarkers(map, people);

    infowindow = new google.maps.InfoWindow({
            content: "loading..."
        });

}

    var people = [
        {"userid":"47","lastname":"lastname1","firstname":"firstname1","address":"Paris, France","phone1":"00000000000","phone2":"","email":"me@me.com"},
        {"userid":"42","lastname":"lastname2","firstname":"firstname2","address":"Versaille, France","phone1":"0","phone2":"0","email":"me@me.com"}
    ];

    function setMarkers(map, people) {

    for (var i = 0; i < people.length; i++) {
         var p = people[i];

        geocoder = new google.maps.Geocoder();

        geocoder.geocode( { 'address': p["address"] }, function(results, status) {

            if (status == google.maps.GeocoderStatus.OK) {
            map.setCenter(results[0].geometry.location);

                var marker = new google.maps.Marker({
                    position: results[0].geometry.location,
                    map: map,
                    html: p["address"]
                });

                var contentString = "Some content";

                google.maps.event.addListener(marker, "click", function () {
                    infowindow.setContent(this.html);
                    infowindow.open(map, this);
                });

            } else {
                alert("Geocode was not successful for the following reason: " + status);
            }

    });

}   

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-11T21:47:39.537

地理编码是一个异步请求。因此，当您在 for 循环中使用地理编码时，当您收到结果时循环已经完成，`i`将始终为 1 并指向最后一项人。

您可以做什么：将标记创建拆分为 2 个函数。1 用于调用创建标记的第二个函数的循环：

删除当前函数`setMarkers`并将以下 2 个函数添加到您的脚本中：

```
function setMarkers(map,people) {
   for (var i = 0; i < people.length; i++) {
      setMarker(map, people[i])
   }
}

function setMarker(map, people) {     
    var p=people;
    geocoder = new google.maps.Geocoder();

    geocoder.geocode( { 'address': p["address"] }, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            map.setCenter(results[0].geometry.location);

            var marker = new google.maps.Marker({
                position: results[0].geometry.location,
                map: map,
                html: p["address"]
            });

            var contentString = "Some content";

            google.maps.event.addListener(marker, "click", function () {
                infowindow.setContent(this.html);
                infowindow.open(map, this);
            });
        } 
        else {
            alert("Geocode was not successful for the following reason: " + status);
        }
    });  
} 
```

您的脚本的其余部分可能会保持原样。

# c# - TextChanged 事件的奇怪错误（WPF 文本框）

> ID：11916166
> 
> 赞同：0
> 
> 时间：2012-08-11T16:04:05.843
> 
> 标签：c#, .net, wpf

我有一个文本框，我试图通过两种方式进行限制：

1 - 我只想允许数值，没有小数

2 - 我只想接受 <= 35 的数字

我有以下事件来处理这个：

```
private void TextBoxWorkflowCountPreviewTextInput(object sender, TextCompositionEventArgs e)
{
    if (!IsNumeric(e.Text, NumberStyles.Integer)) e.Handled = true;
}

public bool IsNumeric(string val, NumberStyles numberStyle)
{
    double result;
    return double.TryParse(val, numberStyle, CultureInfo.CurrentCulture, out result);
}

private void TextBoxWorkflowCountTextChanged(object sender, TextChangedEventArgs e)
{
    if (!string.IsNullOrEmpty(textBoxWorkflowCount.Text) && Convert.ToInt32(textBoxWorkflowCount.Text) <= 35) e.Handled = true;
    else
    {
        MessageBox.Show("Must not be higher then 35");
        textBoxWorkflowCount.Text = "35";
    }
} 
```

这在表面上工作得很好 -*除非*用户将数据粘贴到文本框（似乎不可避免）或更奇怪的是 - 如果用户输入一个数字然后点击退格键（使文本框再次空白）消息框让用户知道它们的值 > 35 出现（即使绝对不是这种情况）。如果必须，我可以忍受的第一个问题 - 但第二个问题是游戏中断，在尝试解决它 30 分钟后，我无处可去。帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T16:15:34.150

您的代码不符合第一个条件，因为

```
string.IsNullOrEmpty(textBoxWorkflowCount.Text) 
```

评估为真，因此它落入“其他”，并显示消息。

```
if (string.IsNullOrEmpty(textBoxWorkflowCount.Text) || Convert.ToInt32(textBoxWorkflowCount.Text) <= 35) e.Handled = true; 
```

应该做的伎俩

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T18:42:31.763

几个月前，我[写了一篇](http://outcoldman.ru/en/blog/show/308)关于 TextBox 行为（Windows Phone 7.5 平台）的博客文章，其中之一是 TextBoxInputRegexFilterBehavior，它允许您过滤输入文本。因此，如果您熟悉 Behaviors 的工作原理，您可以使用此代码

```
using System.Text.RegularExpressions;
using System.Windows.Controls;
using System.Windows.Input;
using System.Windows.Interactivity;

/// <summary>
/// UI behavior for <see cref="TextBox"/> to filter input text with special RegularExpression.
/// </summary>
public class TextBoxInputRegexFilterBehavior : Behavior<TextBox>
{
    private Regex regex;

    private string originalText;
    private int originalSelectionStart;
    private int originalSelectionLength;

    /// <summary>
    /// Gets or sets RegularExpression.
    /// </summary>
    public string RegularExpression 
    {
        get
        {
            return this.regex.ToString();
        } 

        set 
        {
            if (string.IsNullOrEmpty(value))
            {
                this.regex = null;
            }
            else
            {
                this.regex = new Regex(value);
            }
        } 
    }

    /// <inheritdoc/>
    protected override void OnAttached()
    {
        base.OnAttached();

        this.AssociatedObject.TextInputStart += this.AssociatedObjectTextInputStart;
        this.AssociatedObject.TextChanged += this.AssociatedObjectTextChanged;
    }

    /// <inheritdoc/>
    protected override void OnDetaching()
    {
        base.OnDetaching();

        this.AssociatedObject.TextInputStart -= this.AssociatedObjectTextInputStart;
        this.AssociatedObject.TextChanged -= this.AssociatedObjectTextChanged;
    }

    private void AssociatedObjectTextChanged(object sender, TextChangedEventArgs e)
    {
        if (this.originalText != null)
        {
            string text = this.originalText;
            this.originalText = null;
            this.AssociatedObject.Text = text;
            this.AssociatedObject.Select(this.originalSelectionStart, this.originalSelectionLength);
        }
    }

    private void AssociatedObjectTextInputStart(object sender, TextCompositionEventArgs e)
    {
        if (this.regex != null && e.Text != null && !(e.Text.Length == 1 && char.IsControl(e.Text[0])))
        {
            if (!this.regex.IsMatch(e.Text))
            {
                this.originalText = this.AssociatedObject.Text;
                this.originalSelectionStart = this.AssociatedObject.SelectionStart;
                this.originalSelectionLength = this.AssociatedObject.SelectionLength;
            }
        }
    }
} 
```

因此，通过这种行为，您可以编写简单的正则表达式来过滤用户输入，例如 RegularExpression="(3[0-5])|([0-2]?[0-9])"

# ruby-on-rails - activerecord 比较时间

> ID：11916176
> 
> 赞同：2
> 
> 时间：2012-08-11T16:05:04.490
> 
> 标签：ruby-on-rails, activerecord, datetime-comparison

我正在尝试做一个查询，将存储在数据库中的时间与当前时间进行比较，如果它大于今天来显示这些记录。

以下是我当前使用的不显示任何记录的查询

```
@schedules = Schedule.where(:team_id => current_user[:team_id], :event => '1', :time => ">= Time.now.zone") 
```

我如何返回查询时间戳？以便显示这些记录？

还尝试了以下

```
@schedules = Schedule.find_all_by_team_id_and_event_and_time(current_user[:team_id],"1", :time) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T17:49:48.700

```
@schedules = Schedule.where("team_id = ? and event = ? and time >= ?", [current_user[:team_id], "1", Time.zone.now]) 
```

该字符串直接在 SQL 查询中使用，因此您需要确保列名正确且明确*（如果您加入另一个也有列的表，`team_id`则需要这样做`schedules.team_id = ? and ...`）*

# amazon-s3 - S3 - 匿名上传 - 密钥前缀

> ID：11916179
> 
> 赞同：18
> 
> 时间：2012-08-11T16:05:38.513
> 
> 标签：amazon-s3, amazon-web-services, http-post, acl, anonymous

我试图准确了解如何设置一个通常是私有的但允许匿名上传但有限制的存储桶。具体标准是：

*   存储桶主要是私有的，需要我的密钥/秘密来添加/删除/更新/列出文件。
*   有一个名为“incoming”的“目录”（即键前缀），允许匿名用户上传内容到列表，但不能上传。
*   存储桶对所有内容都有一天的有效期。作为奖励，我希望“传入”目录有 30 分钟的到期时间，但如果这不可能，则整个存储桶的到期时间为一天。
*   带有“传入”前缀的文件将在每个对象的大小上受到限制。
*   我可能还想将带有“传入”前缀的对象限制为仅某些内容类型。

我的问题是：

1.  简单地创建两个桶会更好吗？一份用于我的传入文件，一份用于我自己的个人处理和存储？
2.  将文件上传到传入目录的代码是什么样的。理想情况下，我想避免依赖 S3 库而只使用 HTTP 调用。如果您可以在 Ruby 中向我展示正确的方向，则可以加分。:)

过期似乎可以通过 S3 管理控制台设置，但最短的过期时间仅限于 1 天。我可以在该字段中输入小数吗？权限似乎适用于整个存储桶，而不仅仅是前缀。这让我觉得我只需要两个桶。如果我保留一个存储桶，我认为我需要创建一个 IAM 策略并将其应用于存储桶，但这超出了我对 S3 的有限了解，我想确保我不会在允许人们执行的权限中留下漏洞比我想要的更多。

我发现了很多关于通过 HTTP 表单发布匿名上传到 S3 的文档。我可以将其改编成代码，但我想知道，因为我在应用程序代码中（而不是 HTTP 表单帖子），有没有更简单的方法？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-27T20:10:52.420

您所描述的可以在一个桶中实现。[您可以通过存储桶策略、检查示例](http://docs.amazonwebservices.com/AmazonS3/latest/dev/AccessPolicyLanguage_UseCases_s3_a.html)或使用[AWS 策略生成器](http://awspolicygen.s3.amazonaws.com/policygen.html)允许匿名访问特定文件夹。在您的情况下，它可能看起来像这样：

```
{
    "Version": "2008-10-17",
    "Id": "Policy1346097257207",
    "Statement": [
        {
            "Sid": "Allow anonymous upload to /incoming",
            "Effect": "Allow",
            "Principal": {
                "AWS": "*"
            },
            "Action": "s3:PutObject",
            "Resource": "arn:aws:s3:::[your_bucket]/incoming/*"
        }
    ]
} 
```

也可以使用简单的 html 表单匿名将文件上传到您的存储桶：

```
<form action="http://[your_bucket].s3.amazonaws.com/" method="post" enctype="multipart/form-data">
    <input type="hidden" name="acl" value="public-read" />
    Name: <input type="text" name="key" value="incoming/[filename]" /><br/>
    File: <input type="file" name="file" /> <br />
    <input type="submit" name="submit" value="Upload" />
</form>​ 
```

[此处](http://docs.aws.amazon.com/AmazonS3/latest/dev/UsingHTTPPOST.html)详细描述了基于 S3 浏览器的上传。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-28T22:30:09.463

我最近花了一些时间弄清楚匿名上传到 S3 的来龙去脉，也遇到了这个问题。我在以下文章中详细介绍了适用于我的解决方案：

[https://gist.github.com/jareware/d7a817a08e9eae51a7ea](https://gist.github.com/jareware/d7a817a08e9eae51a7ea)

基本上你可以实现你想要的，除了经过身份验证的管理请求不起作用（或者至少我不知道解决方案）。

我知道这是一个较老的问题，但只是在这里记录它以防它帮助其他人。

# arrays - Array.some() 和 Array.every() - 如何搜索元素？

> ID：11916183
> 
> 赞同：0
> 
> 时间：2012-08-11T16:06:00.557
> 
> 标签：arrays, actionscript-3, actionscript

[Adobe Array 文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Array.html)中的示例不是很直观...

如果我有一个具有和`Card`属性的对象，我该如何重写这段代码以寻找具有特定值的可见卡片？`str``visible``str`

```
FOUND:
for each (var str:String in newHand) {
    for each (card in hand) {
        if (card.visible && str == card.str)
            continue FOUND;
    }

    // there is a new card - redraw the whole hand
    redrawHand(owner);
    break;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T19:21:20.250

类的`some()`, `every()`(and `forEach()`) 方法`Array`有两个参数：

*   `callback`在每个项目上执行的函数，它应该根据您的条件返回 true 或 false
*   `thisObject``this`是一个可选对象，您可以提供给回调函数，在函数内部您可以使用关键字引用该对象。如果省略此参数，则可以使用回调函数形成闭包。

回调函数的签名如下：

```
private var callback:Function = function(currentItem:Object, currentIndex:int, theEntireArray:Array):Boolean
{
    // your logic here returns true/false based on your critera
} 
```

对于您的场景，也许您可​​以使用如下`some()`方法：

```
private var comparisonString:String;

private function showTheExampleCode()
{
    for each (var str:String in newHand)
    {
        // comparisonString will be used in the closure
        // maybe you can just use str in the closure instead?
        comparisonString=str;
        if (hand.some(callback))
        {
            // at least one match was found, do something
        }
    } 
}

private var callback:Function(currentItem:Object, currentIndex:int, array:Array):Boolean
{
    // current item is a Card object (you probably do not have to cast it)
    return Card(currentItem).visible && Card(currentItem).str == comparisonString;
} 
```

# css - 使用 css 增加 html 元素的属性值？

> ID：11916184
> 
> 赞同：1
> 
> 时间：2012-08-11T16:06:16.097
> 
> 标签：css

是否可以创建一个 css 类/id，它将一个值（例如，填充）添加到另一个类的相同属性值？

让我试着把它写得更清楚。

```
.someClass{
padding: 20px;
}

.thickenMe{
padding: 5px;
} 
```

当我如下应用这些课程时，

```
<div class='someClass thickenMe'>
<!--planning to beef up this div-->
</div> 
```

这个 div 的净内边距应该变成 25px。

可以只使用css吗？它只是一个想法！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T16:17:45.587

使用纯 CSS 是不可能的。

但是，您可以为每个可以“加厚”的元素编写一个 CSS 子句，如下所示：

```
.someClass{
padding: 20px;
}

.someClass.thickenMe{
padding: 25px;
} 
```

另一种选择是使用边距和填充，如下所示：

```
.someClass{
padding: 20px;
}

.thickenMe{
margin: 5px;
} 
```

不过，这可能是不可能的，这取决于您的其他 CSS。

尽管不是纯 CSS，但最简单的解决方案是使用 JavaScript。这是一个使用 JQuery 的示例：

```
var prevPad = $('.thickenMe').css('padding').replace("px", "");
prevPad =  parseInt(prevPad);
$('.thickenMe').css('padding', prevPad + 5 + "px");​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T16:14:35.590

`JavaScript`不，如果您想动态更改属性，则需要使用客户端脚本（即）。或者，如果您只想通过从一些动态源编译来定义样式，请尝试[LESS](http://lesscss.org/)或[SASS](http://sass-lang.com/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T16:16:05.683

很不幸的是，不行。[您可以通过使用像LESS](http://lesscss.org/)这样的 CSS 处理器来获得这种功能，它为您提供变量，或者您可以通过客户端脚本（使用 jQuery 最简单）来处理它，但原生 CSS 根本无法以这种方式工作。类在指定相同属性时会相互覆盖；它们不相互补充。

# php - 插件中的 Wordpress 常量在包含的文件中不可用

> ID：11916188
> 
> 赞同：0
> 
> 时间：2012-08-11T16:07:10.963
> 
> 标签：php, wordpress, constants

我的问题是我的常量不能全局用于插件中更深的文件。让我解释。

在我的主要 wordpress 插件文件中，在必要的 /* 插件名称：等等等等之后的第一行... */ 我包括我的常量，像这样

```
require_once( plugin_dir_path(__FILE__) . 'constants.php' ); 
```

接下来，在我的 __construct() 函数中，我包含另一个文件，该文件在 wordpress 的管理部分中构建菜单项，如下所示

```
require_once( TRADESHOW_DIR . 'structure/build_menu.php' ); 
```

build_menu.php 文件用作路由器，其中 mor require_once 调用与每个菜单页面和子菜单相对应的页面。这是我不明白的地方。在 build_menu.php 中，我仍然可以访问我的常量，我使用它们来执行 wordpress 数据库查询，但我无法访问紧随其后包含的文件中的常量。这是代码：

```
//// build_menu.php

function tradeshow_all_forms() {// callback from a wordpress add_submenu_page() function
  global $wpdb;

  $TS = new Bio_Tradeshow_Request_Plugin();//  store plugin class in variable

  if( isset( $_GET['form_id'] ) && is_integer( intval( $_GET['form_id'] ) ) ) {
    $form = $wpdb->get_results(
        "
            SELECT *
            FROM " . TRADESHOW_FORMS . "
            WHERE id = '" . $_GET['form_id'] . "'
        "
    );
    $form = $form[0];

    echo TRADESHOW_SUBMITTED . ' build_menu.php<br />';// echo's out the correct value
    require_once( TRADESHOW_DIR . 'structure/fill_form.php' );
  }
} 
```

这是 fill_form.php 文件的顶部

```
$user_id = $TS->user();
$user_id = $user_id['id'];

$form_aswers = $wpdb->get_row(// returns nothing because TRADESHOW_SUBMITTED doesn't work
  "
      SELECT answers
      FROM " . TRADESHOW_SUBMITTED . "
    WHERE user_id = '$user_id' AND form_id = '$form->id'
  ",
  ARRAY_A
);

echo TRADSHOW_SUBMITTED;// echoes out TRADESHOW_SUBMITTED as a string and not a variable 
```

如您所见，它是主插件中的包含中的包含。

另外，如果有人可以向我解释为什么插件的 $this 变量在插件中包含的文件中不可用。我的插件顶部有这个

```
static $_o = null;
static public function init() {
    if (self::$_o === null)
        self::$_o = new self;
    return self::$_o;
} 
```

这样我就可以做 $variable = new plugin_class; 但我想了解当您使用 require 或 require_once 包含文件时是否会丢失某些内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T16:09:53.863

```
FROM " . self::TRADESHOW_SUBMITTED . " 
```

当我编写插件时，它总是 100% 在类内，所以这对我总是有用的。我在 __construct() 中定义常量，并在子类中使用 self..

# iphone - 字符串格式表示法

> ID：11916191
> 
> 赞同：0
> 
> 时间：2012-08-11T16:07:18.900
> 
> 标签：iphone, objective-c, xcode

对于下面的代码：

```
double j1;

j1=7000000    //example
ItemE[5]=[NSString stringWithFormat:@"@1\. total inc = %g", j1]; 
```

ItemE[5] 返回为`"1.total inc = 7e +06"`

我如何防止科学记数法并`"1.total inc = 7000000"`改为使用科学记数法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T16:08:52.673

使用`%f`：

```
ItemE[5]=[NSString stringWithFormat:@"@1\. total inc = %f", j1]; 
```

**编辑：**

如果你不想要小数位，你应该使用：

```
ItemE[5]=[NSString stringWithFormat:@"@1\. total inc = %.f", j1]; 
```

详细说明，您在格式字符串中使用了错误的说明符。`%g`指示以科学计数法创建浮点变量的字符串表示。通常你应该使用`%f`来表示`double`和`float`变量。默认情况下，此说明符将生成带 6 个小数位的数字。为了改变它，您可以修改该说明符，例如：

`%5.3f`表示字符串应该有 3 个小数位并且应该是 5 个字符长。这意味着如果表示将短于 5 个字符，则字符串将在数字前面有额外的空格，总共 5 个字符。请注意，如果您的数字很大，则不会被截断。考虑代码：

```
double pi = 3.14159265358979323846264338327950288;
NSLog(@"%f", pi);
NSLog(@"%.3f", pi);
NSLog(@"%8.3f", pi);
NSLog(@"%8f", pi);
NSLog(@"%.f", pi); 
```

将给出结果：

```
3.141593
3.142
   3.142
3.141593
3 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T19:05:52.967

请尝试使用这个：

```
double j1 = 7000000.f;
NSLog(@"1\. total inc = %.f", j1); 
```

结果将是：

```
1\. total inc = 7000000 
```

我希望它有所帮助。

# c# - C#.net JQuery Uploadify 为每个文件存储表单数据

> ID：11916202
> 
> 赞同：0
> 
> 时间：2012-08-11T16:08:52.150
> 
> 标签：c#, jquery, asp.net, uploadify

目前我有一个uploadify多文件上传供用户上传图片，对于他们选择的每张图片，我希望允许他们输入一些描述，然后我会将描述与图片URL一起存储到我的数据库中，现在我已经生成了文本框对于每个选择上传的图像，但我如何将值传递给我的处理程序以便将其存储在我的数据库中？以下是我的代码

上传 JQuery：

```
$(document).ready(function () {
            $("#<%=FileUpload1.ClientID %>").uploadify({
                'swf': '../../Uploadify/uploadify.swf',
                'uploader': 'Handler.ashx',
                'auto': false,
                'multi': true,
                'buttonText': 'Select Photos',
                'fileDesc': 'Image Files',
                'fileTypeExts': '*.gif; *.jpg; *.png',
                'queueSizeLimit': 12,
                'onQueueComplete': function () {
                    window.location.reload();
                },
                'onSelect': function (file) {
                    $('#textboxtables').append("<tr><td style='height:50px; vertical-align:middle'><input type='text' id='" + file.name + "'/></td></tr>");
                }

            });
        }); 
```

因此，对于我选择的每个文件/图像，我将生成一个带有文件名作为 ID 的 texbox 的表格行，但现在我如何获取文本框的值并将其传递给我的处理程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T16:10:10.050

我有解决方案：

```
$(function() {

  $("#<%=FileUpload1.ClientID %>").uploadify(
    {
     'swf': '../js/uploadify/uploadify.swf',
     'uploader': '../uploader.ashx',
     'auto': false,
     'method': 'post',
     'multi': true,
     'buttonText': 'Select File(s)',
     'folder': '../images',
     'fileDesc': 'Image Files',
     'fileExt': '*.jpg;*.jpeg;*.gif;*.png',

     'onUploadStart': function (event, data) { //this is where you will send the form //data, but remember to get if from post in the .ashx file, by contex.Request["gallaryId"]

         $("#<%=FileUpload1.ClientID %>").uploadify('settings','formData',

         { 'gallaryId': $("#hiddenGallaryId").val() }  //note hiddenGallaryId would //have the gallaryId which im sending through post , make sure it is rendered in your page( //i.e.not concealed by a multiview control e.t.c)
         );
     }          

   });
 }); 
```

HTML：

```
<asp:FileUpload ID="FileUpload1" runat="server" /> 
<input id="hiddenGallaryId" type="text" class="hiddenFields"/>

<a href="javascript: $('#<%=FileUpload1.ClientID %>').uploadify('upload','*')">Click To Upload Files</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T16:15:43.637

您可以通过 Jquery uploadify 的“formData”属性将值传递给处理程序

```
$("#<%=FileUpload1.ClientID %>").uploadify({
    // your existing stuff
    'formData' : { 'query' : $(YourTextBoxId).val() }
}); 
```

现在，这个“查询”变量将在查询字符串参数中传递您的文本框的值，您可以通过**Request["query"]**表达式在处理程序中获取此值。

# wpf - 使用 PIX / Visual Studio 11 调试 WPF 应用程序

> ID：11916208
> 
> 赞同：4
> 
> 时间：2012-08-11T16:09:52.577
> 
> 标签：wpf, directx, visual-studio-2012, directx-11, pix

我正在开发一个使用 DirectX 11 呈现内容的 WPF 应用程序。现在的问题是，我无法调试 DirectX。

如果我使用 PIX，我总是会收到错误：0x00000007b，表明应用程序无法启动（单击“运行实验”后）。

如果我正在使用 Visual Studio 11 并按“捕获帧”，那么它会无限长地运行进度条，在按“停止调试”后它仍然显示进度条，现在显示消息“此应用程序使用不兼容的 DirectX 版本或不支持的功能. 播放可能不完整”。

为什么会这样？为什么我的应用程序不受支持？这是因为WPF吗？

谢谢

# image - 图像像素扫描

> ID：11916215
> 
> 赞同：0
> 
> 时间：2012-08-11T16:11:30.307
> 
> 标签：image, pixel, scanning

我不是逐行扫描像素，而是尝试从原点或图像中的任意点以 10' 的角度扫描像素，然后以 10' 的步长增加角度，直到 360'，我想访问像素在每个角度落在线上并做一些处理..

请帮助我了解如何访问与原点或图像中任何点成特定角度的像素值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T19:37:24.443

你可以做这样的事情（你没有指定语言，这是在java中）：

```
bool[][] processedPixels = new bool[width][height]; // To avoid processing the same pixel twice

for(int deg = 0; deg < 360; deg+=10)
{
    double angle = Math.toRadians(deg);
    for(int r = 0; r < maxRadius; r++)
    {
        int x = originX + (int) Math.round(r * Math.cos(angle));
            int y = originY + (int) Math.round(r * Math.sin(angle));

        if(!processedPixels[x][y])
        {       
            processPixel(x,y);
            processedPixels[x][y] = true;
        }
    }
} 
```

在 C 中，几乎相同，使用 math.h 进行三角函数和舍入：

```
include <math.h>
#define PI 3.14159 // use the accuracy you need
#define DEGREES_TO_RADIANS(angle) ((angle) / 180.0 * PI)

int deg;
double rad;
int processedPixels[width][height] = {0};

for(deg = 0; deg < 360; deg+=10)
{
    int r;
    rad = DEGREES_TO_RADIANS(deg);
    for(r = 0; r < maxRadius; r++)
    {
        int x,y;
        x = originX + (int) round(r * cos(rad));
        y = originY + (int) round(r * sin(rad);

        if(processedPixels[x][y] == 0)
        {       
            processPixel(x,y);
            processedPixels[x][y] = 1;
        }
    }
} 
```

# ios - 如何在不丢失数据的情况下更改 Core Data SQLite 数据库的结构

> ID：11916216
> 
> 赞同：2
> 
> 时间：2012-08-11T16:11:35.890
> 
> 标签：ios, sqlite, core-data

我有一个使用核心数据的应用程序，数据库结构是通过 xCode 设计的。

我正在使用单独的 3rd 方应用程序来填充 .SQLite 文件本身，我想知道是否有办法改变数据库的结构（以及因此管理对象模型）但不会丢失已经存在的数据在 .SQLite 文件中？

我已经没有关于这个的想法，所以任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T17:57:47.687

这是一个半复杂的主题，记录在标题下：核心数据模型版本控制和数据迁移。Apple 的指南位于：http: [//developer.apple.com/library/mac/#documentation/cocoa/conceptual/CoreDataVersioning/Articles/Introduction.html](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/CoreDataVersioning/Articles/Introduction.html)

# php - foreach php逻辑问题

> ID：11916217
> 
> 赞同：1
> 
> 时间：2012-08-11T16:11:45.997
> 
> 标签：php

我在购物车数据库中有 4 条记录。我得到了结果：4444。如何将结果改为 1234？

看法：

```
$i = 0; 
foreach($carts AS $cart) {
    $x = $i+1;
    echo $x;
} 
```

控制器：

```
function confirm() {
    $orders = $this->data;
    $sessionId = $this->passedArgs['ct_session_id'];
    $this->set('data', $sessionId );
    $carts = $this->Cart->find(
        'all', 
        array('conditions' => array('Cart.ct_session_id' => $sessionId), 'recursive' => 1)
    );
    $this->set(compact('carts', 'orders'));         
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T17:57:58.360

```
<?php
$i = 0; 
foreach($carts as $cart) {
    $i++;
    echo $i;
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T16:17:02.423

我认为您每次执行此指令时都想增加 $i ，因此您必须编写： `$x = ++$i;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-01T06:03:03.200

```
<?php
$count = count($carts);
for($i=0; $i<$count; $i++)
{
  echo $i."</br>";
}

?> 
```

# php - PHP/ffmpeg (Windows 7): - 权限被拒绝。什么都试过了，还是不行

> ID：11916221
> 
> 赞同：3
> 
> 时间：2012-08-11T16:12:39.290
> 
> 标签：php, ffmpeg, windows-7-x64, permission-denied

我有一个命令行 PHP 脚本，当在执行脚本时将文件夹名称作为参数给出时，它将找到所述文件夹中的所有图像并使用 FFmpeg 调整它们的大小。问题是，当 FFmpeg 尝试获取文件夹中的文件时，我总是收到 Permission Denied 错误。这是在 Windows 7 上时。

最大的问题是，当我搜索如何修复它时，我已经尝试了所有不断出现在互联网上的解决方案。我已经更改了 Avast! 中的设置，将 attrib 命令（正常和“以管理员身份运行”）取消标记为只读，通过命令行和使用 GUI 获取文件夹的所有权并使用每个人的上下文菜单一直到处乱扔（显然在我努力将所有内容标记为非只读之前），弄乱了权限，*一切*。我一直在寻找解决方案，但所有网站都一遍又一遍地抛出相同的东西——我已经尝试过多次的东西。我已经走到了尽头。我想做的就是快速自动调整图像大小，以便将它们放在我的网站上，

请帮我！:(

**更新（附加点）：**

*   错误是通过 FFmpeg，而不是 PHP。FFmpeg 吐出权限被拒绝错误，脚本只是继续做它通常做的事情（或者，至少，如果不是我的 die 语句在 FFmpeg 失败的情况下启动）。

*   如果 FFmpeg 通过命令行而不是脚本正常运行，它将执行得很好。但是，这无助于我不得不手动调整数百张照片的大小！

*   我只是使用 CLI 引擎在普通终端中运行此脚本。我知道 PHP 的奇怪用途，但因为我已经知道如何在 PHP 中使用 FFmpeg（但在 Linux 中！）所以我想我不妨将代码用作普通的独立程序......

*   无论使用哪个 PHP 函数执行，FFmpeg 都会吐出相同的错误。它发生在 shell_exec、exec、passthru 和 system 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T17:46:24.500

我记得有同样的问题，我建议你从检查 Windows 的 FFMpeg 的其他编译开始。我使用了以下之一，它们工作得很好！请转到[Zeranoe FFmpeg 构建](http://ffmpeg.zeranoe.com/builds/) ，然后让我们知道它是否解决了您的问题。我使用的是 64 位构建（静态）版本！并非所有适用于 Windows 的 FFMpeg 编译都是相同的！如果它仍然无法正常工作，请让我们查看错误日志和您正在使用的命令行！虽然我认为一切都应该没问题！

另一方面，您可以简化一切并尝试使用[Mogrify 实用程序](http://www.imagemagick.org/www/mogrify.html)，它的工作方式非常简单：

```
 mogrify -resize 640×480 *.jpg 
```

我可以确认我也使用了它而不是 FFMpeg。只需安装该工具并更改脚本中的命令行即可！它最有可能比 FFMpeg 使用更少的资源，并为您提供相同的结果！

一切顺利，伊利亚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-27T00:32:42.137

我通过以管理员身份打开命令提示符解决了这个问题。这是通过突出显示命令提示文件名并使用 CTRL+SHIFT+ENTER 打开来实现的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-11T18:12:04.667

请参阅此网址：-

[http://forum.serviio.org/viewtopic.php?f=5&t=960](http://forum.serviio.org/viewtopic.php?f=5&t=960)

**读这个**

假设从 Windows 服务运行的 ffmpeg 需要访问网络服务器上的文件，则需要确保服务用户帐户具有足够的网络权限。

如果两台计算机都在同一个 Windows 域中，那么您可以在域帐户下运行服务并添加从该帐户访问网络共享的权限。

或者，您可以允许所有人访问网络共享并编辑本地安全策略以启用网络访问：让所有人权限适用于匿名用户。

# android - 在应用程序从意图过滤器开始后发送响应

> ID：11916224
> 
> 赞同：1
> 
> 时间：2012-08-11T16:13:09.413
> 
> 标签：android, android-intent

我正在尝试实现 PICK 和 SET_WALLPAPER 意图过滤器，到目前为止，我已经将它们放在上下文菜单中，但是我该如何回复以这种方式启动应用程序的人呢？可以说我有活动：

```
<activity
    android:name="ListActivity"
    android:label="@string/app_name" >
    <intent-filter>
        <action android:name="android.intent.action.SET_WALLPAPER" />

        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</activity> 
```

当这个活动成功运行并且我知道什么图像（我知道它在外部存储上的位置，并且可能有它的位图）时，我如何发回这个响应，以便启动我的应用程序的应用程序可以使用响应？我在想finish()，但是我要添加什么额外的东西？这是否归结为启动我的应用程序的特定应用程序？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T18:10:11.047

您可以[在此处](https://stackoverflow.com/a/10407371/645387)查看从使用 startActivityForResult() 调用的意图返回的示例。我假设这就是从系统中调用它的方式。但是，我不知道您需要响应什么样的结果。

[编辑] 其实我不认为你必须返回任何东西。只需使用 WallpaperManager 或其他设置您的壁纸并完成（）您的活动。

# android - 如何重新加载资源？

> ID：11916225
> 
> 赞同：-1
> 
> 时间：2012-08-11T16:13:12.257
> 
> 标签：android, opengl-es

在我的 2d 游戏中，我有 12 mb 的图形资源。当我的游戏恢复时，我必须重新加载它们。但是我有很多资源，所以重新加载时间非常长（大约 5-6 秒）。此时屏幕变黑并且我敢肯定有些人认为该游戏已损坏。这也是非常糟糕的用户体验。如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T17:57:49.163

很简单，做一个带有进度条的加载屏幕。为了获得良好的参考，您可以在离开游戏并返回后查看我的水在哪里。

# java - 文件上传应如何使用 AES 和 IV？

> ID：11916227
> 
> 赞同：1
> 
> 时间：2012-08-11T16:13:27.767
> 
> 标签：java, android, encryption, cryptography, aes

我正在开发一个应用程序，其中应用程序跟踪用户位置，将它们写入文件并定期将文件发送到服务器（在此示例中每小时）。然后，人们将解密并从服务器读取数据。

我正在使用带有 PBE 的 AES（[这个问题的第一个答案](https://stackoverflow.com/questions/992019/java-256-bit-aes-password-based-encryption)）

但是，由于很多手机都会使用这个，并且将为每个手机和每个文件发送操作生成**新的 IV 。****将每个 IV 发送**到服务器并将它们与服务器中的相应文件相关联对我来说似乎有点过头了。

我可以**在没有 IV**的情况下使用 AES，比如只有密码吗？这是否违反 AES 的逻辑？我在密码学方面没有经验，你能告诉我一种方法来克服这个“*大量文件加密和解密*”的事情吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T18:04:17.427

你需要问自己“我在保护自己免受什么伤害？” 然后围绕它制定安全策略。我认为您在工作中使用了错误的工具，并且不应该使用任何您不了解如何设置的加密，因为您可能会在此过程中造成重大安全漏洞。

以下是我能想到的几种情况，你想保护什么以及如何解决它。

**防止某人在数据传输到您的服务器时捕获数据并获取数据副本：**
如果您只需要保护手机和服务器之间的信息，只需在您和服务器之间使用 SSL 连接。它很容易设置，很难搞砸。

**保护服务器上的个人数据，以便在数据从服务器被盗时无法访问：** .
为此，您需要加密服务器上的数据，因为它是“静止的”。最好的方法是使用对称密钥算法，因此它具有快速加密和解密，该算法的密钥应该通过只有客户端来保护（但如果客户端丢失了他们的密钥客户端，则无法恢复他们的数据，并且只有生成数据的设备才能解密它，因此没有“Web 界面”。或者您必须以一种方式保护密钥，使数据库丢失不会允许攻击者解密数据（如[硬件安全模块](http://en.wikipedia.org/wiki/Hardware_security_module)）

**保护手机上缓存的数据，因此如果有人对手机具有 root 访问权限，他们就无法解密应用程序记录的过去数据：**
为此，您只需使用对称密钥加密数据，然后使用您的公钥加密对称密钥对于应用程序，然后删除应用程序上的对称密钥的副本。使用这种方法，一旦删除了对称密钥，应用程序的用户就无法取回数据，因为唯一可以恢复对称密钥的人是您，您可以使用您的私钥解密数据的对称密钥. 请注意，如果有人在应用程序运行时对其进行监控（无法阻止），这不会保护您，这只会保护在监控开始之前记录的数据。

我希望这可以帮助您，并让您制作更安全的程序。

[免责声明：当我说“无法解密”时，我的意思是如果不对密钥使用暴力攻击并尝试每个密钥，就无法解密。]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-11T17:59:46.883

如果您在[ECB 模式下加密，则](https://en.wikipedia.org/wiki/Block_cipher_modes_of_operation#Electronic_codebook_.28ECB.29)*可以*使用没有 IV 的 AES ，但这不是一个好主意。在 ECB 模式下，相同的明文总是加密成相同的密文，因此明文中的模式可以“显示”为密文中可识别的模式。不鼓励使用 ECB 模式。

为了避免ECB模式的问题，密码可以将明文的每个块与前一个块的加密结果结合起来，称为[CBC模式](https://en.wikipedia.org/wiki/Block_cipher_modes_of_operation#Cipher-block_chaining_.28CBC.29)。这可以防止明文中的模式在密文中被识别，因为相同的明文会根据它在流中的位置产生不同的密文。但是如果你将每个块与它之前的块组合，你将第*一个*块与什么组合？这就是IV的用途。

将 IV 与密文一起发送并不是什么大问题。它很小，对于 AES 来说只有 16 个字节——传输几乎不会“过度杀伤”。将其视为加密文件的一部分。

* * *

不过，您的问题提出了一个与密钥管理相关的问题。AES 是一种[对称密码](https://en.wikipedia.org/wiki/Symmetric-key_algorithm)，这意味着解密数据的人需要拥有与手机用来加密数据相同的密钥。如果您有很多手机都将 AES 加密数据发送到服务器，那么您必须跟踪很多不同的密钥。

（我假设每部手机都使用不同的密钥，否则您就没有安全性。如果所有手机都使用相同的密钥进行加密，那么任何拥有您的应用程序的人都可以提取该密钥并使用它来解密来自其他人手机的数据。 )

如果您使用[TLS](https://en.wikipedia.org/wiki/Transport_Layer_Security)向服务器发送数据，它会负责为每个连接生成一个临时加密密钥，并自动加密手机上的数据并在服务器上解密。您根本不必直接与 AES 打交道。

但由于您“手动”实施加密，您还必须手动实施密钥管理。服务器如何知道手机的密钥？“正确”的答案是使用[Diffie-Hellman key exchange](https://en.wikipedia.org/wiki/Diffie%E2%80%93Hellman_key_exchange)。“错误”的答案是手机生成密钥，然后将其发送到服务器，因为任何可以拦截加密文件的人也可以拦截密钥。

您应该考虑使用[公钥密码术](https://en.wikipedia.org/wiki/Public-key_cryptography)来加密发送到服务器的文件。这样，手机只需要知道服务器的公钥，不需要保密。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T20:29:48.177

否。将随机生成的 IV 与有效负载一起发送。由于可预测的 IV ，在 TLS 中发现了一个[缺陷。](http://rdist.root.org/2008/02/05/tlsssl-predictable-iv-flaw/)不要犯同样的错误。

作为进一步的解释，发送具有相同密钥和相同IV的两条消息违反了[语义安全](https://en.wikipedia.org/wiki/Semantic_security)原则。每条消息都应该有一个唯一的 IV，它永远不会与密钥结合使用。

# c# - 从视图中检索操作方法属性

> ID：11916231
> 
> 赞同：1
> 
> 时间：2012-08-11T16:14:06.400
> 
> 标签：c#, asp.net-mvc-3, razor, attributes

假设我在 MVC3 控制器中有以下三个操作方法：

```
public ActionResult ShowReport()
{
    return View("ShowReport");
}

[PageOptions(OutputFormat = OutputFormat.Web)]
public ActionResult ShowReportForWeb()
{
    return View("ShowReport");
}

[PageOptions(OutputFormat = OutputFormat.Pdf)]
public ActionResult ShowReportForPdf()
{
    return View("ShowReport");
} 
```

在我的 Razor 视图中，我希望能够告诉您：

1.  PageOptions 属性是否附加到调用操作方法。
2.  如果是，它的 OutputFormat 属性的值是多少。

这是一些伪代码，说明了我正在尝试做的事情：

```
@if (pageOptions != null && pageOptions.OutputFormat == OutputFormat.Pdf)
{
@:This info should only appear in a PDF.
} 
```

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T18:06:50.633

LeffeBrune 是正确的，您应该将该值作为 ViewModel 的一部分传递

只需创建一个枚举

```
public enum OutputFormatType {
    Web
    PDF
} 
```

并在您的 ViewModel 中使用它

```
public class MyViewModel {
    ...
    public OutputFormatType OutputFormatter { get; set; }
} 
```

然后在您的控制器操作中分配值

```
public ActionResult ShowReportForWeb()
{
    var model = new MyViewModel { OutputFormatter = OutputFormatType.Web };
    return View("ShowReport", model);
}

public ActionResult ShowReportForPdf()
{
    var model = new MyViewModel { OutputFormatter = OutputFormatType.PDF };
    return View("ShowReport", model);
}

public ActionResult ShowReport(MyViewModel model)
{
    return View(model);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T20:00:51.827

我想在[AlfalfaStrange 的回答](https://stackoverflow.com/a/11916389/1105881)中补充一点，控制器的操作不应该知道附加到它的属性。这意味着这些属性实际上应该是动作过滤器，它们拦截`OnResultExecuting`这些数据并将其注入`ViewData`.

# php - 脚本选择所有输入，而不仅仅是复选框

> ID：11916232
> 
> 赞同：0
> 
> 时间：2012-08-11T16:14:10.397
> 
> 标签：php, javascript, jquery, html

我有这个脚本与我的选项卡一起使用，这样当用户切换选项卡时，如果前一个选项卡上有选中的复选框，它们就会被取消选中（它有助于我的消息传递系统）

但是，如您所见，问题在于该行

```
var w = document.getElementsByTagName('input'); 
```

选择所有输入，它导致我所有的文本框等...当我更改选项卡时变成复选框，无论如何我只能选择复选框而不是输入？

```
var w = document.getElementsByTagName('input'); 
        for(var i = 0; i < w.length; i++){ 
            if(w[i].type='checkbox'){ 
                w[i].checked = false; 

            }; 
        }; 
```

这是更改删除复选框的代码，这是控制整个选项卡过程的完整代码；

```
 $(document).ready(function() {

    //Default Action
    $(".tab_content").hide(); //Hide all content
    $("ul.tabs li").eq(<?php print "$eq_id";?>).addClass("active").show(); //Activate second tab
   $(".tab_content").eq(<?php print "$eq_id";?>).show(); //Show second tab content

    //On Click Event
    $("ul.tabs li").click(function() {

        var w = document.getElementsByTagName('input'); 
            for(var i = 0; i < w.length; i++){ 
                if(w[i].type='checkbox'){ 
                    w[i].checked = false; 

                }; 
            }; 

        $("ul.tabs li").removeClass("active"); //Remove any "active" class
        $(this).addClass("active"); //Add "active" class to selected tab
        $(".tab_content").hide(); //Hide all tab content
        var activeTab = $(this).find("a").attr("href"); //Find the rel attribute value to identify the active tab + content
        $(activeTab).fadeIn(); //Fade in the active content
        return false;
    });

}); 
```

感谢您的任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T16:16:22.673

因为您使用的是 jquery

推荐的方式

```
$('input[type=checkbox]') 
```

或两种不推荐使用的方式

```
$('input:checkbox')
$(':checkbox') 
```

您还将在以下语句中将它们更改为复选框

```
if(w[i].type='checkbox'){ // <-- you want == to compare and = to assign 
```

如果你只使用 jQuery.. 你只需要选择器并且可以一起删除 if 语句

```
$('input[type=checkbox]').prop('checked',false);  // <-- changes all checkboxes to unchecked 
```

[http://jsfiddle.net/wirey00/UFdza/](http://jsfiddle.net/wirey00/UFdza/)

以上应该在 jQuery 1.6+ 中工作，但如果您仍在使用较旧的库，您可以使用以下

```
$('input[type=checkbox]').attr('checked',false); 
```

[http://jsfiddle.net/wirey00/UFdza/1/](http://jsfiddle.net/wirey00/UFdza/1/)

编辑 -

你可以更换

```
$("ul.tabs li").click(function() {

    var w = document.getElementsByTagName('input'); 
        for(var i = 0; i < w.length; i++){ 
            if(w[i].type='checkbox'){ 
                w[i].checked = false; 
            }; 
        }; 

    $("ul.tabs li").removeClass("active"); //Remove any "active" class
    $(this).addClass("active"); //Add "active" class to selected tab
    $(".tab_content").hide(); //Hide all tab content
    var activeTab = $(this).find("a").attr("href"); //Find the rel attribute value to identify the active tab + content
    $(activeTab).fadeIn(); //Fade in the active content
    return false;
}); 
```

和

```
$("ul.tabs li").click(function() {        
    $('input[type=checkbox]').prop('checked',false);  // <-- changes all checkboxes to unchecked
    $("ul.tabs li").removeClass("active"); //Remove any "active" class
    $(this).addClass("active"); //Add "active" class to selected tab
    $(".tab_content").hide(); //Hide all tab content
    var activeTab = $(this).find("a").attr("href"); //Find the rel attribute value to identify the active tab + content
    $(activeTab).fadeIn(); //Fade in the active content
    return false;
}); 
```

是的，正如 Raminson 指出的那样，`:checkbox`选择器已被弃用。不建议使用它们，但它们仍然有效

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T18:09:00.230

你的条件不应该是`if (w[i].type == "checkbox") {`代替`if (w[i].type = "checkbox") {`吗？如果你比较使用`==`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T17:59:35.903

```
$('input[type="checkbox"]').each(function(){
    $(this).removeAttr('checked');
}); 
```

# c++ - 在cygwin错误下提升

> ID：11916236
> 
> 赞同：0
> 
> 时间：2012-08-11T16:14:37.523
> 
> 标签：c++, boost, g++, cygwin

命令行是

```
g++ -c -Wall -I "C:/cygwin/usr/include/" test.cpp 
```

这是错误消息：

```
C:/cygwin/usr/include/stdint.h:62:22: error: conflicting declaration 'typedef unsigned int uintptr_t'
c:/python27/egg-info/mingw/usr/lib/gcc/../../x86_64-w64-mingw32/include/_mingw.h:352:44: error: 'uintptr_t' has a previous declaration as 'typedef long long unsigned int uintptr_t'
In file included from C:/cygwin/usr/include/boost/assert.hpp:81:0,
                 from C:/cygwin/usr/include/boost/system/error_code.hpp:16,
                 from C:/cygwin/usr/include/boost/filesystem/v3/path_traits.hpp:23,
                 from C:/cygwin/usr/include/boost/filesystem/v3/path.hpp:25,
                 from C:/cygwin/usr/include/boost/filesystem.hpp:35,

c:/python27/egg-info/mingw/usr/lib/gcc/../../x86_64-w64-mingw32/include/c++/4.5.2/cstdlib:195:11: error: '::strtold' has
 not been declared
c:/python27/egg-info/mingw/usr/lib/gcc/../../x86_64-w64-mingw32/include/c++/4.5.2/cstdlib:215:22: error: '__gnu_cxx::str
told' has not been declared
In file included from c:/python27/egg-info/mingw/usr/lib/gcc/../../x86_64-w64-mingw32/include/c++/4.5.2/bits/postypes.h:
42:0,
                 from c:/python27/egg-info/mingw/usr/lib/gcc/../../x86_64-w64-mingw32/include/c++/4.5.2/iosfwd:42,
                 from c:/python27/egg-info/mingw/usr/lib/gcc/../../x86_64-w64-mingw32/include/c++/4.5.2/ios:39,
                 from c:/python27/egg-info/mingw/usr/lib/gcc/../../x86_64-w64-mingw32/include/c++/4.5.2/ostream:40,
                 from c:/python27/egg-info/mingw/usr/lib/gcc/../../x86_64-w64-mingw32/include/c++/4.5.2/iostream:40,
                 from C:/cygwin/usr/include/boost/assert.hpp:82,
                 from C:/cygwin/usr/include/boost/system/error_code.hpp:16,
                 from C:/cygwin/usr/include/boost/filesystem/v3/path_traits.hpp:23,
                 from C:/cygwin/usr/include/boost/filesystem/v3/path.hpp:25,
                 from C:/cygwin/usr/include/boost/filesystem.hpp:35, 
```

任何帮助，我不明白为什么要检查 python27 目录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T18:45:35.710

看起来 python27 文件夹包含`mingw`- 这是`cygwin`替代方案。可能默认标头搜索路径设置为`mingw`'s dir (c:/python27/egg-info/mingw/usr/lib/gcc/../../x86_64-w64-mingw32/include/)。

检查以下环境变量集：

```
CPATH
C_INCLUDE_PATH
CPLUS_INCLUDE_PATH
OBJC_INCLUDE_PATH 
```

您也可以尝试编译：1）`-nostdinc`忽略默认包含目录的选项 2）`-v`详细`g++`输出

# java - JSF2 和 PrettyFaces...如何获取原始 URL 或查询字符串？

> ID：11916243
> 
> 赞同：4
> 
> 时间：2012-08-11T16:15:23.140
> 
> 标签：java, jakarta-ee, jsf-2, url-rewriting, prettyfaces

PrettyFaces 是一个非常简单的 URL 重写引擎。各种 SEO 都是可能的，而且*真的很容易*。不过我有一个小问题:(

使用漂亮的面孔，我有这个重写规则：

```
<url-mapping id="blogEntry">
    <pattern value="/blog/#{shortUrl}" />
    <view-id value="/blogEntry.jsf" />
</url-mapping> 
```

所以 URL 栏看起来像：

```
http://host.com/blog/first-post 
```

重写规则在内部将请求映射到：

```
http://host.com/blogEntry?shortUrl=first-post 
```

我正在实现 OpenID，这意味着我需要给 OpenID 提供者一个返回 URL。但是，当我执行以下操作时：

```
originalUrl = Faces.getRequest().getRequestURL().toString() 
```

我得到：

```
http://host.com/blogEntry.jsf 
```

getQueryString() 返回一个空字符串

任何人都知道获取 purty URL:`http://host.com/blog/first-post`或至少查询字符串的方法`shortUrl=first-post`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-12T06:40:19.697

您可以使用：`PrettyContext.getCurrentInstance().getRequestUrl().toURL()`和`PrettyContext.getCurrentInstance().getRequestQueryString().toQueryString()`

类似的论坛帖子： http: [//ocpsoft.org/support/topic/how-get-the-original-request-uri-from-jsf](http://ocpsoft.org/support/topic/how-get-the-original-request-uri-from-jsf)

# java - 放置内部类的位置就在java中

> ID：11916250
> 
> 赞同：0
> 
> 时间：2012-08-11T16:16:03.510
> 
> 标签：java

内部类的放置位置在java中吗？在外部类的开头，或在外部类构造函数声明位置的外部类字段之间，或在结束类的末尾或第一次使用的地方？任何规则或最佳实践？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T18:01:00.613

在 Java 中，内部类通常放在外部类的末尾，在外部类的最后一个右大括号之前。

在我看来，这比出于可读性目的将它们放在开头要好——人们通常希望在查看内部类之前先*确定外部类的上下文。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T17:45:29.703

一旦我阅读[了 GWT 的“编码风格”](https://developers.google.com/web-toolkit/makinggwtbetter#codestyle)，建议将嵌套类型（内部和静态类）放在类声明的顶部，然后放在所有其他元素之前。在此之后，我总是以这种方式执行此操作，因为这会使您的类代码更具可读性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T17:47:00.870

您应该查看[The Java Coding Style Guide](http://developers.sun.com/sunstudio/products/archive/whitepapers/java-style.pdf)。特别是第 6.1 节描述了类的建议布局。

# html - Facebook 发送和喜欢的盒子被剪掉了

> ID：11916253
> 
> 赞同：3
> 
> 时间：2012-08-11T16:16:13.947
> 
> 标签：html, css, facebook

有谁知道是什么导致我的点赞和发送框突然中断？你可以试试[我网站](http://easydiablo3.com/)上的按钮，看看我的意思。

**编辑：**这是它在 IE、Firefox 和 Chrome 中的样子： ![在此处输入图像描述](../Images/43f2ad7e8759e3b3ed7731631e4af203.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T21:06:56.973

在 CSS 文件[http://easydiablo3.com/themes/MyTheme/css.axd?name=style2.5.0.6.css](http://easydiablo3.com/themes/MyTheme/css.axd?name=style2.5.0.6.css)中，您有以下 CSS：

```
.postSocialButtons .fb_ltr {
     width: 126px !important;
} 
```

附加在您的`!important`宽度声明末尾会导致此宽度覆盖所有其他宽度，并给出发送框被切断的外观。

`!important`这是一个完美的例子，说明为什么在使用声明时应该注意。

# java - 网页异步更新的方式有哪些？

> ID：11916255
> 
> 赞同：0
> 
> 时间：2012-08-11T16:16:24.920
> 
> 标签：java, javascript, ajax, servlets, xmlhttprequest

以“gmail.com”为例，其中新邮件显示为以及何时到达用户的收件箱。据我了解，触发器来自更新用户收件箱页面的数据库/网络服务器。

任何人都可以建议更新动态网页的代码是什么[假设 Gmail 帐户页面是由类似 Servlet 的技术生成的] 无需刷新且无需从客户端发出明确请求（请不要考虑 XHR 将请求发送到服务器固定间隔，因为这也将来自客户端）。

它可以通过涉及 XHR 的 AJAX 代码实现吗？如果可以，那么如何实现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T18:27:26.000

我认为目前执行此操作的常用方法是使用“长轮询”，也称为[Comet](https://en.wikipedia.org/wiki/Comet_%28programming%29)。有各种具体的技术，但基本思想是浏览器向服务器发送请求，服务器只是保持连接打开，直到它有东西要发送给浏览器。例如，在 Gmail 上，浏览器应用程序可能会立即请求收件箱中的下一封新邮件，而服务器可能会等待半小时再发送，因为这是新邮件实际*到达*收件箱所需的时间。

从技术上讲，这仍然是客户端驱动的，但客户端的“请求”实际上只是为服务器提供了在其选择的未来时间向客户端发送数据的机会。

当您使用长轮询时，您的服务器将有大量待处理的请求大部分时间处于空闲状态。 [Servlet API 的第 3 版](http://jcp.org/en/jsr/detail?id=315)引入了“[异步支持](http://www.javaworld.com/javaworld/jw-02-2009/jw-02-servlet3.html)”，它允许线程暂停请求并在第一个请求等待时处理其他请求。为较旧的 API 版本编写的 Servlet 无法很好地扩展，因为该`service()`方法在产生响应之前不能返回，因此它必须占用一个线程，等待响应时间。或者，Tomcat 有一个[针对 Comet 的特殊扩展，](https://tomcat.apache.org/tomcat-6.0-doc/aio.html#Comet_support)它允许一个 servlet 使用事件驱动的 I/O 在同一个线程上同时处理多个请求；其他 servlet 容器可能会提供类似的扩展。

有一种称为[WebSockets](https://en.wikipedia.org/wiki/WebSocket)的新协议允许通过持久连接进行双向通信，而无需 HTTP 开销，但它尚未得到广泛支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T18:09:46.897

可以使用 ajax 或 Web 套接字来完成。

使用 Ajax，您可以通过长时间轮询来实现这一点，而这正是现在大多数大人物正在做的事情。Web 套接字是未来，但支持很差。如果你在 node.js 环境中运行，socket.io 非常适合这种东西，但是，也有适用于 ruby​​ 和 php 的选项。

socket.io 之类的工具的美妙之处在于您将能够使用 Web 套接字，它会在不可用的情况下降级为 ajax 长轮询，从而保持您的功能完好无损。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T18:36:26.353

使用 Comet 时，您还可以使用来自 servlet api 3.0 的新[Asynchonous servlet](https://blogs.oracle.com/enterprisetechtips/entry/asynchronous_support_in_servlet_3) - 那时不需要用于 tomcat 的彗星扩展。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T18:45:05.440

我目前认为有 4 种方法可以做到这一点：

*   传统轮询 - 以固定间隔向服务器发送请求并评估响应
*   长轮询 - 以固定的时间间隔向服务器发送请求，服务器仅在有结果时才响应
*   HTTP 流式传输 - 对服务器的请求保持活动状态，并在可用时发送更新
*   Web 套接字 - 一旦通过 HTTP 建立初始连接，数据就会通过 TCP 套接字双向发送

有关更多详细信息，您可以查看此[博客文章](http://blog.springsource.org/2012/05/08/spring-mvc-3-2-preview-techniques-for-real-time-updates/)，该文章还介绍了 Servlet 3.0 和 Spring MVC 3.2 中的异步支持。

# c# - 将 zip 文件上传到数据库

> ID：11916256
> 
> 赞同：1
> 
> 时间：2012-08-11T16:16:35.570
> 
> 标签：c#, database, entity-framework, zip

我正在使用实体框架作为学校/课程项目的一部分，应该允许用户上传文件或目录。如果它是一个目录，则必须对其进行压缩（我掌握了 DotNetZip），但我不确定如何将 zip 文件转换为`byte[]`. 我还应该将 zip 存储在临时目录中并在保存后将其删除吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T17:54:10.050

根据[http://dotnetzip.codeplex.com/wikipage?title=CS-Examples&referringTitle=Examples](http://dotnetzip.codeplex.com/wikipage?title=CS-Examples&referringTitle=Examples)，您可以将 zip 文件保存到内存流中，而无需将其写入任何临时文件：

```
var stream = new System.IO.MemoryStream();

using (ZipFile zip = new ZipFile())
{
    zip.AddFile("ReadMe.txt");
    zip.AddFile("7440-N49th.png");
    zip.AddFile("2008_Annual_Report.pdf");        
    zip.Save(stream);
}

byte[] data = stream.ToArray(); 
```

# javascript - Noty中的Javascript插件给出错误

> ID：11916261
> 
> 赞同：14
> 
> 时间：2012-08-11T16:17:04.677
> 
> 标签：javascript, jquery, modal-dialog, undefined

我有以下 javascript 代码：

```
function delete_draft(id, name) {
    var text = 'Are you sure you want to delete "' + name + '"?';
    alert(id + name)
    var noty = noty({
        text: text,
        buttons: [
        {addClass: 'btn btn-primary', text: 'Yes', onClick: function($noty) {

            // this = button element
            // $noty = $noty element

            $noty.close();
            $.post('/ajax/drafts/delete', {id:id}, function(data) {
                document.location.reload(true);
            });
        }
        },
        {addClass: 'btn btn-danger', text: 'Cancel', onClick: function($noty) {
            $noty.close();
        }
        }
    ]});
} 
```

当我从领事那里逃跑时，`delete_draft(6, "this is it")`我收到了这个错误

```
TypeError: undefined is not a function
arguments: Array[1]
get message: function () { [native code] }
get stack: function () { [native code] }
set message: function () { [native code] }
set stack: function () { [native code] }
type: "called_non_callable"
__proto__: Error 
```

我怎样才能解决这个问题？Noty 的网站是[http://needim.github.com/noty/](http://needim.github.com/noty/) 如果您认为它应该可以工作，请发表评论。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-18T10:53:31.603

我刚刚遇到这个问题。原来是因为变量名`noty`和导出的函数名一样`noty`。

```
var n = noty({text: 'testing 123'}); 
```

只需更改变量名称即可为我修复它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-20T22:27:43.717

除了重命名变量外，请**确保包含布局 js 文件**。默认值为顶部，因此如果未在选项中指定，则需要包含`noty/layouts/top.js`. 如果您指定任何其他布局，则包括适当的布局 js 文件。

# python - 导入错误：尝试导入 Python 模块时 Windows 7 上缺少 DLL

> ID：11916267
> 
> 赞同：4
> 
> 时间：2012-08-11T16:17:40.330
> 
> 标签：python, python-3.x, importerror, scikit-learn

细节：

Python 3.2（32 位安装）Windows 7 64 位

导致错误的代码：

```
from sklearn import svm 
```

错误：

```
Traceback (most recent call last):
  File "C:\Users\chrismv48\workspace\Python Datamining\Biological_Response.py", line 1, in <module>
    from sklearn import svm
  File "C:\Python32\lib\site-packages\sklearn\svm\__init__.py", line 13, in <module>
    from .classes import SVC, NuSVC, SVR, NuSVR, OneClassSVM, LinearSVC
  File "C:\Python32\lib\site-packages\sklearn\svm\classes.py", line 3, in <module>
    from .base import BaseLibLinear, BaseLibSVM
  File "C:\Python32\lib\site-packages\sklearn\svm\base.py", line 5, in <module>
    from . import libsvm, liblinear
ImportError: DLL load failed: The specified module could not be found. 
```

我已经尝试了其他缺少的 DLL 线程中提出的一些解决方案，但没有成功......

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-11T23:44:16.653

如果您使用来自[http://www.lfd.uci.edu/~gohlke/pythonlibs/#scikit-learn](http://www.lfd.uci.edu/~gohlke/pythonlibs/#scikit-learn)的二进制文件。它们需要[numpy-MKL](http://www.lfd.uci.edu/~gohlke/pythonlibs/#numpy)，如下载页面所示。官方的 numpy 二进制文件不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T17:58:15.937

您可以运行[Process Monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)并从您的 python 进程中查找*LoadImage*事件，以查看 LoadImage 失败的原因。

您可能想要使用 procmon gui，但[这里是从命令行使用它的一个很好的参考](http://my.safaribooksonline.com/book/operating-systems-and-server-administration/microsoft-windows/9780735662728/4dot-process-monitor/id3114354)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-11T17:50:07.157

您可以使用[Dependency Walker](http://www.dependencywalker.com/)扫描您的模块以查找依赖项并满足它们。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-10-19T06:10:55.603

做了很多谷歌搜索，询问人们，并为找不到 DLL（来自 sklearn import svm）使用 Windows7 64bit 挣扎了很长时间最后更新 Anaconda 版本后一切正常。

# c - pthreads 没有串行执行

> ID：11916268
> 
> 赞同：1
> 
> 时间：2012-08-11T16:17:44.183
> 
> 标签：c, synchronization, pthreads

我是这些 pthreads 的新手。我编写了一个程序，以便按顺序显示，而不是随机显示数字。我为此使用**了 pthrea_join()**方法。程序如下：

```
int cnt=0,i=1;
pthread_t th[10];
int printmsg()
{
  cnt++;
  printf( "thread no. %d\n",cnt);
}
void tosync()
{
  if(i>0)
  pthread_join(th[i-1],NULL); // <---here i am blocking the previous thread..                         
  printmsg();
}
void main(void)
{
  pthread_create(&th[0], NULL,(void*)&tosync, NULL);
  for( i=1;i<10; i++){
    pthread_create(&th[i],NULL, (void*) &tosync, NULL);
  } 
  int y;
  for(int i=0; i<10; i++)
    pthread_join(th[i],NULL);
  return;
} 
```

我仍然随机获得数字...... plzz。帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T18:28:17.540

您应该将一些内容传递到您的`tosync`例程中，以便每个线程都知道它应该等待哪个线程。此外，第一个线程不应该等待任何人。如果您为线程启动例程使用正确的签名，则可以传入一个参数。

```
void * tosync(void *arg)
{
  pthread_t *me = (pthread_t *)arg;
  if (me > th) pthread_join(me[-1],NULL);
  printmsg();
  return 0;
} 
```

应该`main`返回。`int`它的循环现在被简化了，因为启动例程不再需要强制转换。由于每个线程都已经加入了它的前任线程，因此该`main`线程只需要加入最后一个线程。

```
int main(void)
{
  for( i=0;i<10; i++){
    pthread_create(&th[i],NULL, tosync, &th[i]);
  }
  pthread_join(th[9],NULL);
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T17:59:41.777

pthread_join(th[i-1],NULL) 这一行有一些问题。当你创建一个线程时，你会创建 i 的值。假设创建前三个线程操作系统切换第三线程启动和操作系统切换到它创建其余线程的主线程。创建所有线程后，i 的值为 10/ 现在假设操作系统切换到第三线程，然后他等待 10-1 = 9th 线程完成并类似地继续。所以最终它总是随机打印。你的策略是错误的。

试试这个

```
int cnt=0,i=1;
pthread_t th[10];
int printmsg()
{
cnt++;
printf( thread no. %d\n",cnt);
}
void tosync()
{

printmsg();
}
void main(void)
{
pthread_create(&th[0], NULL,(void*)&tosync, NULL);
for( i=1;i<10; i++){
pthread_create(&th[i],NULL, (void*) &tosync, NULL);
pthread_join(th[i],NULL); // <---here i am blocking the previous thread..   
} 

return;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T18:06:17.647

在`toSync`您使用`i`值的函数中，问题是您不知道`i`toSync 函数运行时有什么值。

在极端情况下，所有线程的值都可能为 10，如果创建线程的循环在任何创建的线程可以运行之前运行，就会发生这种情况。

干净的解决方案是将`i`值作为参数传递给`pthread_create`并让`toSync`使用它而不是 global `i`。例如

```
int *id = (int*)malloc(sizeof(int));
*id = i;
pthread_create(&th[i],NULL, (void*) &tosync, id); 
```

其他需要考虑的事情：

1.  `toSync`需要对 id 为 0 的线程进行特殊处理，因为它没有任何前任等待
2.  最后一个循环`main`不应`pthread_join`在线程 0-8 上调用，因为它们已经加入。`pthread_join`在同一个线程上多次调用的结果是[未定义的](http://www.kernel.org/doc/man-pages/online/pages/man3/pthread_join.3.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-11T18:08:03.107

发生的事情是您的`tosync()`方法使用全局变量`i`而不是知道`i`线程实际启动时间的值。如果您想将`i`（或此处指向前一个 pthread_t 的指针）传递给 tosync，以便它真正记住它应该加入哪个线程，您需要通过 pthread_create 传递它，例如；

```
void* tosync(void* ptr)
{
  pthread_t* threadIndex = (pthread_t*)ptr;
  if(threadIndex != NULL)
      pthread_join(*threadIndex, NULL); // <---here i am blocking the previous thread..                         
  printmsg();
}

...in the loop...

pthread_create(&th[i], NULL, tosync, &th[i-1]); 
```

它是 pthread_create 的最后一个参数，它将在您的方法中作为 threadIndex 传递，如果它包含索引，则每个线程都将知道其单独的索引。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-11T18:17:32.063

另一种方法：

```
#include <stdio.h>
#include <pthread.h>

struct threadData{
    int id;
    pthread_t prev;
};

void tosync(void *data)
{
    struct threadData *td=data;
    if ((*td).prev!=0){
        printf("%i waiting\n",(*td).id);
        fflush(0);
        pthread_join((*td).prev,NULL); // <---here i am blocking the previous thread..                         
    }
    printf("%i runnning\n",(*td).id);
    fflush(0);
    free(td);
}

int main(void)
{
    int i;
    struct threadData *td;
    pthread_t nextThreadID=0;
    for( i=0;i<10; i++){
        td=malloc(sizeof(struct threadData));
        (*td).prev=nextThreadID;
        (*td).id=i;
        pthread_create(&nextThreadID,NULL, (void*) &tosync, (void *)td);
    } 
    pthread_join(nextThreadID,NULL);
    return 0;
} 
```

# c# - 尝试更新 tiff 图像上的标签时出现问题

> ID：11916277
> 
> 赞同：1
> 
> 时间：2012-08-11T17:47:29.437
> 
> 标签：c#, tags, tiff, libtiff.net

注意：当创建一个从未被 LibTiff.Net 库更改过的新 tiff 图像时，我可以使用 LibTiff.Net 库毫无问题地添加/更改标签（第一次）。

无论如何，在我使用 LibTiff.Net 库更改 tiff 标签后，当我再次尝试更改它们时，图像已损坏。标签似乎很好，但图像本身显示为黑色图像（损坏）。

这是目前我在课堂上使用的标签扩展器......

```
private static Tiff.TiffExtendProc m_parentExtender;
private static List<TIFFTAGS_TAG> m_lTagsToWrite;

private static void TagExtender(Tiff tif)
{
    List<TiffFieldInfo> tfInfo = new List<TiffFieldInfo>();
    Int16 readCount = 0;
    Int16 writeCount = 0;
    bool okToChange = false;
    bool passCount = false;

    //Make sure to create a new tiff field info for all the tags to be written
    foreach (TIFFTAGS_TAG ttTag in m_lTagsToWrite)
    {
        switch (ttTag.TagType)
        {
            case TIFFTAGS_TAG_DATATYPE.ASCII:
                readCount = -1;
                writeCount = -1;
                okToChange = true;
                passCount = false;

                break;
            case TIFFTAGS_TAG_DATATYPE.LONG:
            case TIFFTAGS_TAG_DATATYPE.RATIONAL:
            case TIFFTAGS_TAG_DATATYPE.SHORT:
                readCount = 2;
                writeCount = 2;
                okToChange = false;
                passCount = true;

                break;
        }

        if (ttTag.TagType != TIFFTAGS_TAG_DATATYPE.UNKNOWN)
        {
            //Add the new item to the list
            tfInfo.Add(new TiffFieldInfo((TiffTag)ttTag.TagNumber, readCount, writeCount, (TiffType)ttTag.TagType, FieldBit.Custom, okToChange, passCount, ttTag.TagName));
        }
    }

    //Turn the list into an array again
    TiffFieldInfo[] tfInfoArray = tfInfo.ToArray();

    //Add the fields to the main field info area
    tif.MergeFieldInfo(tfInfoArray, tfInfoArray.Length);

    //Propergate the chain if needed
    if (m_parentExtender != null)
        m_parentExtender(tif);
} 
```

这是目前我用来在给定 tiff 上设置 tiff 标签的函数

```
public static bool SetTiffTags(string sFileName, List<TIFFTAGS_TAG> ttTagsInfo)
{
    //Sets all the tiff tags in the image given.
    //Returns true if successful or false if error occured

    //Check if the file exists
    if (!File.Exists(sFileName))
    {
        //File does not exist
        return false;
    }

    try
    {
        //Set the tag info so that it can be carried over to the extender callback
        m_lTagsToWrite = new List<TIFFTAGS_TAG>();
        m_parentExtender = Tiff.SetTagExtender(TagExtender);
        m_lTagsToWrite = ttTagsInfo;

        using (Tiff tImage = Tiff.Open(sFileName, "a"))
        {
            if (tImage != null)
            {
                //Go to the first page
                tImage.SetDirectory(0);

                foreach (TIFFTAGS_TAG ttTag in ttTagsInfo)
                {
                    switch (ttTag.TagType)
                    {
                        case TIFFTAGS_TAG_DATATYPE.ASCII:
                            try
                            {
                                //string
                                string sValue = ttTag.Value.ToString();
                                tImage.SetField((TiffTag)ttTag.TagNumber, sValue);
                            }
                            catch
                            {
                                //Could not convert to a string
                                return false;
                            }
                            break;
                        case TIFFTAGS_TAG_DATATYPE.LONG:
                            try
                            {
                                //long
                                int[] iValues;
                                if (ttTag.Value.GetType().ToString() == "System.Int32")
                                {
                                    iValues = new int[] { (int)ttTag.Value };
                                }
                                else if (ttTag.Value.GetType().ToString() == "System.Int32[]")
                                {
                                    iValues = (int[])ttTag.Value;
                                }
                                else return false;
                                tImage.SetField((TiffTag)ttTag.TagNumber, iValues.Count(), iValues);
                            }
                            catch
                            {
                                //Could not convert to a long
                                return false;
                            }
                            break;
                        case TIFFTAGS_TAG_DATATYPE.SHORT:
                            try
                            {
                                //short
                                Int16[] iValues;
                                if (ttTag.Value.GetType().ToString() == "System.Int16")
                                {
                                    iValues = new Int16[] { (Int16)ttTag.Value };
                                }
                                else if (ttTag.Value.GetType().ToString() == "System.Int16[]")
                                {
                                    iValues = (Int16[])ttTag.Value;
                                }
                                else return false;
                                tImage.SetField((TiffTag)ttTag.TagNumber, iValues.Count(), iValues);
                            }
                            catch
                            {
                                //Could not convert to a short
                                return false;
                            }
                            break;
                        case TIFFTAGS_TAG_DATATYPE.RATIONAL:
                            try
                            {
                                //float
                                Single[] iValues;
                                if (ttTag.Value.GetType().ToString() == "System.Single")
                                {
                                    iValues = new Single[] { (Single)ttTag.Value };
                                }
                                else if (ttTag.Value.GetType().ToString() == "System.Single[]")
                                {
                                    iValues = (Single[])ttTag.Value;
                                }
                                else return false;
                                tImage.SetField((TiffTag)ttTag.TagNumber, iValues.Count(), iValues);
                            }
                            catch
                            {
                                //Could not convert to a single
                                return false;
                            }
                            break;
                        default:
                            //This type of tag is not supported so error out
                            return false;
                    }
                }

                //Write the information to the tiff
                tImage.CheckpointDirectory();
            }
            else
            {
                //Restore previous tag extender
                Tiff.SetTagExtender(m_parentExtender);

                return false;
            }
        }

        //Restore previous tag extender
        Tiff.SetTagExtender(m_parentExtender);
    }
    catch
    {
        //Restore previous tag extender
        Tiff.SetTagExtender(m_parentExtender);

        return false;
    }

    //Return success
    return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:34:11.327

快速查看您的代码让我认为问题的原因是调用`tImage.CheckpointDirectory();`

通过此调用，您可以有效地将目录数据写入文件，而无需考虑可能已经放在那里的内容。

我猜想通过调用写入的目录迟早会`CheckpointDirectory`开始占用比以前为文件中的目录数据分配的空间更多的空间，并且光栅数据的开头会被覆盖。

请尝试改用[RewriteDirectory](https://bitmiracle.github.io/libtiff.net/help/api/BitMiracle.LibTiff.Classic.Tiff.html#BitMiracle_LibTiff_Classic_Tiff_RewriteDirectory)方法。

# c++ - C++ 中的重载 + 和 += 运算符

> ID：11916279
> 
> 赞同：3
> 
> 时间：2012-08-11T17:47:49.280
> 
> 标签：c++, reference, operator-overloading, return-by-reference

我将其作为个人练习，并希望确保我做对并正确理解它。我有一个带有成员行和列的坐标类。我想重载 + 和 += 运算符。这是我的代码：

```
Coordinate& Coordinate :: operator+= (const Coordinate& rhs){
    this->m_Row += rhs.m_Row;
    this->m_Column += rhs.m_Column;

    return *this;
}

Coordinate& operator+ (const Coordinate& lhs, const Coordinate& rhs) {
    return Coordinate(lhs) += rhs;
} 
```

在哪里

```
friend Coordinate& operator + (const Coordinate& lhs, const Coordinate& rhs); 
```

是 Coordinate 类中定义的友元函数。

这段代码有什么陷阱吗？

以下是我对这些工作原理的理解：

```
operator += 
```

将`rhs`m_Row 和 m_Column 添加到`this`成员。返回 a `reference to the object pointed by this pointer`，从而避免由于复制构造函数而创建另一个对象。

```
operator + 
```

使用复制构造函数（让我们调用它）创建一个本地对象`lhs`（因为`lhs`它是一个常量，我们不想修改它的内容`localObj`）。调用执行加法的`+=`成员运算符。`localObj`返回 a`reference to this localObj`以便我们不会由于复制构造函数而创建另一个对象，否则。

现在，最后一个语句与我有关，因为我正在返回对本地对象的引用。一旦函数（运算符+）超出范围，`localObj`将被销毁，**返回的引用将指向已被销毁的对象**。我对此的理解正确吗？

如果是这样，我应该如何解决它？

**编辑：** 在所有答案和我学到的东西之后：这是我的坐标类现在的样子：[http ://rextester.com/MJJI7394](http://rextester.com/MJJI7394)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-11T17:51:14.160

你担心是对的，你在这里返回一个临时的引用：

```
Coordinate& operator+ (const Coordinate& lhs, const Coordinate& rhs) {
    return Coordinate(lhs) += rhs;
} 
```

您需要按值返回 a `Coordinate`，例如：

```
Coordinate operator+ (Coordinate lhs, const Coordinate& rhs) {
    return lhs += rhs;
} 
```

在上面的示例中，我们复制了第一个参数，而不是获取引用然后复制到函数体中。然后我们`+=`按值返回 on 的结果。

使用此设置，无需声明`operator+`为朋友。

有关更多信息，请参阅[此 SO 链接](https://stackoverflow.com/questions/4421706/operator-overloading)，并感谢 @Blastfurnace 指出它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T18:11:56.193

就个人而言，我会`operator+=()`用`operator+()`and来定义`operator=()`：

```
Coordinate operator+(const Coordinate& lhs, const Coordinate& rhs) {
  return Coordinate(lhs.getRow() + rhs.getRow(), lhs.getCol() + rhs.getCol();
}

const Coordinate& operator=(Coordinate& lhs, const Coordinate& rhs) {
  lhs.setRow(rhs.getRow());
  lhs.setCol(rhs.setCol());

  return lhs;
}

const Coordinate& operator+=(Coordinate& lhs, const Coordinate&rhs) {
  return lhs = lhs + rhs;
} 
```

我在这里使用 setter 和 getter。或者，您可以使用朋友和/或成员函数。请注意，所有返回引用的函数都返回传入的参数，因此对本地或临时对象的引用没有问题。

# html - 我的 div 设置为 100%，表格的宽度设置为 1000px，但背景没有覆盖页面

> ID：11916282
> 
> 赞同：1
> 
> 时间：2012-08-11T17:48:44.503
> 
> 标签：html, css, width

我知道这是简单的编码，但我想我想多了。这是我的表格信息：

```
<table width = "1000px" cellspacing = "5"> 
```

在我的所有浏览器中，它的分辨率都是 1366 x 768，但在 1280 x 720 分辨率下，顶部背景图像会被切断。起初我以为是桌子，但我在它周围加了一个边框，它仍然被切断了。这几乎违反常识（换句话说，你不会在更大的分辨率上看到更多的“浅蓝色”颜色背景吗？再一次，我认为我陷入了一种心态，我无法确定为什么在我的宽屏显示器上，它涵盖了屏幕，但不是在较小的显示器上。

```
body {
  background-color: lightblue;
  margin: 0;
}

#top {
  width: 100%;
  height: 200px;
  position: relative;
  background-image: url('lightblue.jpg')
}

#bottom {
  width: 100%;
  height: 50%;
  position: relative;
  z-index: -1;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T19:50:10.390

使用背景图像重复。它可能会起作用。

```
background-repeat:repeat; 
```

# r - rcpp编译错误

> ID：11916290
> 
> 赞同：1
> 
> 时间：2012-08-11T17:51:25.580
> 
> 标签：r, rcpp

我正在尝试运行测试功能，但出现编译错误：

```
library(Rcpp)  
library(inline) 

testfun = cxxfunction(  
signature(x="numeric", i="integer"),  
body = '  
NumericVector xx(x);    
int ii = as<int>(i);  
xx = xx * ii;  
return( xx );  
', plugin="Rcpp")  
testfun(1:5, 3) 
```

compileCode(f, code, language = language, verbose = verbose) 中的错误：编译错误，未创建函数/方法！另外：警告信息：运行命令'C:/PROGRA~1/R/R-215~1.1/bin/x64/R CMD SHLIB filede44a566900.cpp 2> filede44a566900.cpp.err.txt'状态为1

我会很感激你的帮助。我正在使用 Windows 7、R2.15.1、64 位

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T18:13:45.390

尝试添加`verbose=TRUE`，因为您似乎有一个简单的设置问题——也许您的 PATH 不正确。

您的代码是正确的，并且在 Linux 下运行得很好（在 Windows 上不需要额外的体操）。

您从我的 Emacs ESS 缓冲区复制的稍微编辑/缩进的示例：

```
R> library(inline)
R> 
R> testfun <- cxxfunction(signature(x="numeric", i="integer"), body = '
+    NumericVector xx(x);
+    int ii = as<int>(i);
+    xx = xx * ii;
+    return( xx );
+ ', plugin="Rcpp")
R> 
R> testfun(1:5, 3)
[1]  3  6  9 12 15
R> 
```

# php - JQuery getJSON 以另一个顺序工作，为什么？

> ID：11916292
> 
> 赞同：0
> 
> 时间：2012-08-11T17:51:48.980
> 
> 标签：php, jquery, getjson

在这段代码中，我以 1、2、3、4、5 的顺序发送数据......但是当它将此数据添加到数据库时，它就像 1、4、5、3、2 或其他东西一样。

```
 for(var i = 1; i<=childs;i++){
        var u = $('#name'+i).val();
        var inf = $('#info'+i).val();
        var l = $('#location'+i).val();
        var b = $('#birth'+i).val();
        var d = $('#death'+i).val();
        var formData = "mode=add&number="+i+"&to="+t;

        if(u.length > 0){
            formData += "&username="+u;
        }else if(inf.length > 0){
            formData += "&info="+inf;
        }else if(l.length > 0){
            formData += "&location="+l;
        }else if(b.length > 0){
            formData += "&birth"+b;
        }else if(d.length > 0){
            formData += "&death"+d;
        }

        $.getJSON("content/child.php", formData, function(json){
          $.each(json, function(key, value){
          console.log(value); // in div i wrote ar1, ar2, ar3, ar4, ar5... but in database it addess how he wants ar1, ar3, ar4, ar5, ar2 let's say
                  });
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T17:57:35.263

正如您所发现的，JSON 对象是一组无序的键值对。如果您需要保留顺序，请使用键值对数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T18:01:23.853

您的循环似乎`for`比`$.getJSON`函数执行得更快，并且会导致意外结果。

您可以尝试`$.when()`实用功能，尝试以下操作：

> 提供一种基于一个或多个对象（通常是表示异步事件的延迟对象）执行回调函数的方法。

```
var i = 0;
var len = childs;

function register() {
  i++;
  var u = $('#name'+i).val();
  var inf = $('#info'+i).val();
  var l = $('#location'+i).val();
  var b = $('#birth'+i).val();
  var d = $('#death'+i).val();
  var formData = "mode=add&number="+i+"&to="+t;

  if (u.length > 0){
    formData += "&username="+u;
  } else if(inf.length > 0){
    formData += "&info="+inf;
  } else if(l.length > 0){
    formData += "&location="+l;
  } else if(b.length > 0){
    formData += "&birth"+b;
  } else if(d.length > 0){
    formData += "&death"+d;
  }

  $.when($.getJSON("content/child.php", formData)).then(function(){
     if (i < len) {
        register()
     }
  })
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T16:50:28.893

这行得通！;) 谢谢大家！=)

```
 function register(i, len, to) {
      var u = $('#name'+i).val();
      var inf = $('#info'+i).val();
      var l = $('#location'+i).val();
      var b = $('#birth'+i).val();
      var d = $('#death'+i).val();
      var formData = "mode=add&number="+i+"&to="+to;

      if (u.length > 0){
        formData += "&username="+u;
      } else if(inf.length > 0){
        formData += "&info="+inf;
      } else if(l.length > 0){
        formData += "&location="+l;
      } else if(b.length > 0){
        formData += "&birth"+b;
      } else if(d.length > 0){
        formData += "&death"+d;
      }

      $.when($.getJSON("content/child.php", formData)).then(function(json){
         $.each(json, function(key, value){
            if(i == len){
                $('#mask').remove();
            } 
         });
         if (i < len) {
            i += 1;
            register(i, len, to)
         }
      })
    }
    $('.childAdd').live('click', function(){
    var childs = eval($('#childs').attr('count'));
    var to = eval($('#childs').attr('to'));

    var i = 1;
    var len = childs;

    register(i, len, to);
        }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T19:07:13.413

从 jQuery 1.5 开始，延迟对象：

这可能会有所帮助

```
var result = [];
var xhr = [];

for (var i = 1; i <= childs; i++) {
    var u = $('#name' + i).val();
    var inf = $('#info' + i).val();
    var l = $('#location' + i).val();
    var b = $('#birth' + i).val();
    var d = $('#death' + i).val();
    var formData = "mode=add&number=" + i + "&to=" + t;

    if (u.length > 0) {
        formData += "&username=" + u;
    } else if (inf.length > 0) {
        formData += "&info=" + inf;
    } else if (l.length > 0) {
        formData += "&location=" + l;
    } else if (b.length > 0) {
        formData += "&birth" + b;
    } else if (d.length > 0) {
        formData += "&death" + d;
    }

    xhr.push($.getJSON("content/child.php", formData, function(json) {
        result.push(json);
    }));
}

$.when.apply($, xhr).done(function() {
    console.log(result);
}); 
```

# php - 想改写路径

> ID：11916295
> 
> 赞同：-1
> 
> 时间：2012-08-11T17:53:09.777
> 
> 标签：php, apache, .htaccess, mod-rewrite, url-rewriting

我有这样组织的文件 -

*   www.mysite.com/cars/ford/ford.php
*   www.mysite.com/cars/bmw/bmw.php

我希望用户能够访问这些页面而无需在末尾指定 xyz.php 文件。

*   www.mysite.com/cars/ford
*   www.mysite.com/cars/bmw

我将什么用于重写规则以允许用户访问使用该格式的页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T17:56:10.330

**.htaccess**

```
RewriteRule /cars/(.*)$ /cars/$1/$1.php [L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T17:56:26.483

鉴于您更改了`www.mysite.com/cars/ford`表单的所有链接，您需要将其放入文档根目录的 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} !\.php$
RewriteRule ^/?cars/([^/])/?$ /cars/$1/$1.php [L] 
```

# django - Django：在视图或模板中检测管理员登录

> ID：11916297
> 
> 赞同：48
> 
> 时间：2012-08-11T17:53:21.283
> 
> 标签：django, django-admin

如何从视图或模板文件中检测我的管理员用户是否已登录？例如，我的网站的用例：

1.  用户打开`/admin/`，输入正确的凭据
2.  然后用户打开一些页面，例如`/page/`，有“添加”和“删除”按钮
3.  用户打开`/admin/`并单击“注销”
4.  `/page/`-> 没有“添加”和“删除”按钮

Django 1.4 版

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2012-08-11T18:06:54.660

在模板中：

```
{% if user.is_superuser %}
    <p>Hello, admin.</p>
{% else %}
    <p>Hello, ordinary visitor.</p>
{% endif %} 
```

在视图中：

```
if request.user.is_superuser:
    # Hello, admin.
else:
    # Hello, ordinary visitor. 
```

根据您的需要，`is_staff`可能比`is_superuser`. [您可以在此处](https://docs.djangoproject.com/en/1.8/ref/contrib/auth/#django.contrib.auth.models.User.is_staff)了解不同之处。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-08-11T18:43:23.993

Joseph 的回答适合您的简单案例，但实际上既不合适`is_staff`也不`is_superuser`完美。假设您的页面是`/polls/`（一个`Poll`对象列表，在一个名为 的应用程序中`poll`），您应该测试特定`poll.change_poll`和`poll.delete_poll` [权限](https://docs.djangoproject.com/en/stable/topics/auth/#default-permissions)。

在模板中：

```
{% for poll in polls %}
    {% if perms.poll.change_poll %}<a href='/polls/edit/{{ poll.id }}'>Edit</a>{% endif %}
    {% if perms.poll.delete_poll %}<a href='/polls/delete/{{ poll.id }}'>Delete</a>{% endif %}
{% endfor %} 
```

或在视图[中使用`has_perm`](https://docs.djangoproject.com/en/stable/topics/auth/#django.contrib.auth.models.User.has_perm)：

```
if not request.user.has_perm('poll.change_poll'):
    return HttpResponseForbidden('Nope!') 
```

或者在[使用装饰器](https://docs.djangoproject.com/en/stable/topics/auth/#the-permission-required-decorator)的视图中：

```
@permission_required('poll.change_poll')
def edit_poll(request, poll_id):
    # .... 
```

您可以将这些权限直接分配给用户、组（然后将用户放入该组）或通过设置`is_superuser`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-10-31T18:58:11.743

如果您不关心用户拥有的权限并且只想确保他们已登录，则可以使用`user.is_anonymous`，如果用户已注销，则为 true，如果用户已登录，则为 false。

默认情况下，`user.is_staff`用户需要访问 Django Admin。

# collections - 我怎样才能同时享受持久性和在backbone.js 中使用集合？

> ID：11916298
> 
> 赞同：2
> 
> 时间：2012-08-11T17:53:24.207
> 
> 标签：collections, backbone.js, persistence

我正在尝试使用`backbone.js`. 该应用程序旨在允许用户开始回答问题并在任何给定时间继续，因此需要保存进度。我有一个`Question`非常标准的模型：

```
App.Models.Question = Backbone.Model.extend({}); 
```

然后我想要一个能`Survey`记住最后完成的问题的对象。我的第一个倾向是将它写成一个模型，因为需要某种持久性：

```
App.Models.Survey = Backbone.Model.extend({
    defaults: {
        questions: [],
        currentIndex: 0
    },

    currentQuestion: function() { /*...*/ },
    nextQuestion:    function() { /*...*/ },
    prevQuestion:    function() { /*...*/ }
}); 
```

当我采用这种方法时，访问内部元素`survey.get('questions')`并没有给我一个要使用的主干模型，而是一个普通的 javascript 对象——除非我用一组主干模型显式初始化它，这将需要额外的解析并绕过主干处理的方式RESTful JSON。

另一方面，使用集合而不是模型会给我模型实例，但是`currentIndex`为集合保存某种持久性 ( ) 似乎是不正确的，这并不意味着管理数据。所以我很矛盾 - 使用 a`Backbone.Model`可以让我保存用户在调查中的进展情况，而 using`Backbone.Collection`可以让我以一种看起来更正确的方式管理问题，因为调查基本上是问题的集合。在这两个考虑因素之间正确合并的一个好的折衷方案是什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T20:45:51.577

我会保持你的问题模型不变。我还将创建一个与问题相关的答案模型。因此它将具有属性 id、questionID、userID、answerChoice 和时间戳。

当用户进入您的调查时，我会 fetch() 他的答案并将其放入答案集合中。

由于答案是它自己的模型，因此每次他们回答时，您都可以轻松地将其 save() 到您的数据库中。

然后，在您的答案集合中，我将有一个函数通过时间戳或 questionID 检索您想要的最新答案模型。我想这取决于你真正想要什么。

我认为这就是您的描述的意思，但是您怎么看？

# image-processing - 如何在 OpenCV 中扩展和缩小图像的基本类型？

> ID：11916300
> 
> 赞同：1
> 
> 时间：2012-08-11T17:53:36.967
> 
> 标签：image-processing, opencv

如何在 OpenCV中更改**图像的****基本类型**（*不是*通道数） ？例如转换为，反之亦然？**`CV_8UC1``CV_32SC1`**

 **注意：目标是在计算过程中*克服类型溢出*，而不是显示扩展图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T18:19:47.957

您必须为此使用[convertTo](http://opencv.itseez.com/modules/core/doc/basic_structures.html#mat-convertto)方法：

> 将数组转换为另一种具有可选缩放比例的数据类型。**

# c# - 需要正则表达式代码将表达式中的特定变量名替换为某个值

> ID：11916301
> 
> 赞同：2
> 
> 时间：2012-08-11T17:53:41.820
> 
> 标签：c#, regex

变量名可以包含`[a-zA-Z0-9_]` 我想用某个值替换表达式中特定变量名的所有出现的字符。例如，如果表达式是 a+aa-b，我想将变量“a”替换为 1。变量“aa”不应该被替换。正则表达式必须记住不匹配的部分，以便可以在最终表达式中复制它们。我需要将此作为更大项目的一部分完成，并且没有时间深入阅读有关正则表达式的信息。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T17:55:54.803

在变量名周围使用[单词边界：](http://www.regular-expressions.info/wordboundaries.html)

```
Regex regex = new Regex(@"\ba\b");
string result = regex.Replace(input, replacement); 
```

在线查看它：[ideone](http://ideone.com/Uuiw7)

# c# - DataGridTemplateColumn 中的 ComboBox 不显示 SelectedItem

> ID：11916302
> 
> 赞同：2
> 
> 时间：2012-08-11T17:53:50.293
> 
> 标签：c#, wpf

我想制作包含 ComboBox 的自定义 DataGrid 列。组合框的 ItemSource 绑定到枚举，组合框的选定项绑定到集合元素中选择的枚举值。

这是代码

```
<Window x:Class="WpfApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfApp"
        xmlns:System="clr-namespace:System;assembly=mscorlib"
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <local:AnimalObservableCollection x:Key="animals">
            </local:AnimalObservableCollection>
        <ObjectDataProvider x:Key="animalEnum" MethodName="GetValues"
                            ObjectType="{x:Type System:Enum}">
            <ObjectDataProvider.MethodParameters>
                <x:Type TypeName="local:AnimalType"/>
            </ObjectDataProvider.MethodParameters>
        </ObjectDataProvider>
    </Window.Resources>
    <Grid>
        <DataGrid AutoGenerateColumns="False" Margin="12,12,12,101" Name="dgAnimals" CanUserAddRows="True" CanUserDeleteRows="True"  DataContext="{StaticResource animals}" ItemsSource="{Binding}">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Name" Binding="{Binding Path=Name}"></DataGridTextColumn>
                <DataGridTemplateColumn Header="Animal type">
                    <DataGridTemplateColumn.CellEditingTemplate>
                        <DataTemplate>
                            <ComboBox  ItemsSource="{Binding Source={StaticResource animalEnum}}" SelectedItem="{Binding Path=AnimalType}"></ComboBox>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellEditingTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>
    </Grid>
</Window> 
```

代码隐藏

```
public partial class MainWindow : Window
    {
        AnimalObservableCollection animals;
        public MainWindow()
        {
            InitializeComponent();
            animals = (AnimalObservableCollection)this.FindResource("animals");
            animals.Add(new Animal(AnimalType.horse,"Rex"));

        }
    }

    public enum AnimalType { dog, cat, horse };

    class AnimalObservableCollection : ObservableCollection<Animal>
    {
        public AnimalObservableCollection()
            : base()
        {
        }
    }

    class Animal
    {
        private AnimalType animalType;
        private string name;

        public Animal()
        {
        }
        public Animal(AnimalType animalType_, string name_)
        {
            animalType = animalType_;
            name = name_;
        }

        public AnimalType AnimalType
        {
            get
            {
                return animalType;
            }
            set
            {
                animalType = value;
            }

        }
        public string Name
        {
            get
            {
                return name;
            }
            set
            {
                name = value;
            }
        }
    } 
```

问题是，当组合框失去焦点时，选定项不会显示在 DataGrid 的单元格中，并且该单元格保持空白。如何使 AnimalType 列中的单元格显示组合框的选定项？

当我使用 DataGridComboBoxColumn 时它工作得很好，但我想在将来使用 DataGridTemplateColumn 添加更多功能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T18:09:40.483

在您的代码中，我只看到 CellEditingTemplate 这意味着您仅在单元​​格处于编辑模式时才为该单元格定义模板，您还需要定义 CellTemplate 仅在单元格处于“查看”模式时使用。像这样：

```
<DataGridTemplateColumn Header="Animal type">
    <DataGridTemplateColumn.CellEditingTemplate>
        <DataTemplate>
            <ComboBox  ItemsSource="{Binding Source={StaticResource animalEnum}}" 
                       SelectedItem="{Binding Path=AnimalType}"></ComboBox>
        </DataTemplate>
    </DataGridTemplateColumn.CellEditingTemplate>
    <DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <TextBlock  Text="{Binding Path=AnimalType}"></TextBlock>
        </DataTemplate>
    </DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn> 
```

# android - 控制 MediaPlayer 的音频质量

> ID：11916303
> 
> 赞同：1
> 
> 时间：2012-08-11T17:54:03.753
> 
> 标签：android, android-mediaplayer, android-audiomanager

我正在使用 MediaPlayer 从 url 流式传输在线广播。有没有办法以任何方式提高/降低音频质量？客户的想法是为应用程序的付费版本提供更好的质量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T19:25:35.610

Android sdk 中有一个名为 API Demos 的示例。那里有一个很棒的图形均衡器。我还没有实现它，但我计划很快在我的应用程序中进行测试。

# delphi - 以excel格式将多个单元格从网格复制到剪贴板？

> ID：11916306
> 
> 赞同：4
> 
> 时间：2012-08-11T17:54:13.287
> 
> 标签：delphi, excel, delphi-xe2, clipboard, tstringgrid

我正在开发一个连接到 SQL 数据库、取回数据集并在网格中显示该数据的工具。用户必须能够选择一个单元格块（只是矩形）并按`CTRL`+`C`将其复制到剪贴板。

我该怎么做呢：

*   以可以粘贴到 Excel 中的格式？我希望已经为此做好了准备。它不需要 Excel 等所有剪贴板功能，只需突出显示一组矩形单元格并将其复制到剪贴板即可。

*   如果可以在其中完成，`TStringGrid`我希望将我的功能保留在其中，但也可以与支持此功能的组件一起使用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-11T18:00:56.450

您可以尝试将单元格值复制为[`TAB delimited text`](http://office.microsoft.com/en-us/excel-help/file-formats-that-are-supported-in-excel-HP010014103.aspx#BMclipboardformats)，类似于以下代码：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  S: string;
  X, Y: Integer;
begin
  S := '';
  for Y := StringGrid1.Selection.Top to StringGrid1.Selection.Bottom do
  begin
    for X := StringGrid1.Selection.Left to StringGrid1.Selection.Right - 1 do
      S := S + StringGrid1.Cells[X, Y] + #9;
    S := S + StringGrid1.Cells[StringGrid1.Selection.Right, Y] + sLineBreak;
  end;
  Delete(S, Length(S) - Length(sLineBreak) + 1, Length(sLineBreak));
  Clipboard.AsText := S;
end; 
```

# spring - Spring xml 中的 Quartz 或单独的标准 Quartz

> ID：11916307
> 
> 赞同：0
> 
> 时间：2012-08-11T17:54:38.000
> 
> 标签：spring, quartz-scheduler

一直在为石英和弹簧集成而苦苦挣扎，特别是在 webpshere jndi 查找的上下文中，我的最终解决方案是使用弹簧来定义工作，并且仍然需要在quartz.properties 中定义一些属性。

听到一些强烈的意见认为在 spring 中使用石英会在它们之间产生很强的依赖关系，我们是石英的新手。展望未来，想做出决定：在 spring xml 中定义的石英，或简单的石英属性文件。真的很想听听大家的意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T18:24:30.857

我发现同时使用`quartz.properties`Spring 配置并没有错。[就我个人而言，我保留](http://nurkiewicz.blogspot.no/2012/04/configuring-quartz-with-jdbcjobstore-in.html)了在 Spring 配置中不太可能在文件中更改的静态配置和*动态*参数（如线程池大小）。

您可以以任何您想要的方式定义作业 - 使用 Quartz fluent API、使用`Scheduler`API、使用 XML 调度插件（与 Spring 无关）或通过 Spring 配置。由你决定。

> 在 spring 中使用石英会在它们之间产生强烈的依赖关系

不知道这些意见是从哪里来的。基本上 Spring 允许您自动启动/停止调度程序 - 如果没有 Spring，您需要使用一些 servlet 侦听器或其他奇怪的解决方法。使用 Spring 调度程序只是您的 bean 之一。绝对没有依赖。Spring 增加了一些巧妙的支持，比如调度运行任意 bean 的任意方法的能力，但两者之间没有耦合。

如果您的应用程序是基于 Spring 的，请使用 Spring 集成，它工作得很好。

# java - java中具有快速性能的定点算术

> ID：11916308
> 
> 赞同：6
> 
> 时间：2012-08-11T17:54:53.843
> 
> 标签：java, fixed-point

我需要在 Java 中以完美的精度和固定的小数点后数来表示一些数字；在那个小数点之后，我不在乎。（更具体地说 - 金钱和百分比。）

我现在使用 Java 自己的 BigDecimal，但我发现它***真的很***慢并且它开始显示在我的应用程序中。

所以我想用“常规”整数和定点算术来解决它（长整数对于我的目的来说有足够大的精度）。

现在，我认为我不是第一个遇到这种问题的人，并且已经有一个库，已经实现了乘法/除法 - 但似乎不是。

现在，我很可能可以自己写（我可能会），但真的，我真的是第一个需要这个的人吗？不是已经有一些图书馆吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-11-06T22:00:19.750

[decimal4j](http://decimal4j.org)是一个 Java 库，用于基于 long 的快速固定精度算术，最多支持 18 位小数。

*披露：*我参与了 decimal4j 项目。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-11T18:13:09.950

您*完全*确定 BigDecimal 是性能问题吗？您是否使用分析器来找出答案？如果是，有两个可能有帮助的选择是：

1) 使用`long`所有值并将其乘以一个因子（例如，如果您对美分感兴趣，则为 100）。

2) 使用一个专门设计的类，该类实现类似于 的东西`BigDecimal`，但在`long`内部使用。我不知道是否存在一个好的开源库（也许是[Java 数学定点库](http://sourceforge.net/projects/jmfp/)？）。很久以前（我相信是 2001 年）我自己为 J2ME 编写了一个这样的课程。做对有点棘手。请注意，除非需要高精度，否则在内部也`BigDecimal`使用 a ，因此在大多数情况下，此解决方案只会有一点帮助。`long`

由于舍入和精度问题，在许多情况下使用`double`不是一个好的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-14T23:27:32.053

尽管这不是您要问的，但这可以在不离开的情况下加速您的应用程序`BigDecimal`：

从 Java 8 开始，这个问题`BigDecimal`就自行解决了。添加了一个[新类`MathContext`](https://docs.oracle.com/javase/8/docs/api/java/math/MathContext.html)并限制了计算操作的精度。

```
var num = new BigDecimal("1234.56780", new MathContext(10, RoundingMode.DOWN)); 
```

问题是精度`10`不适用于小数点后的数字。它适用于有效位数。对于`1234.50`，需要 6。
对于`1_500_000_000.100`，需要 13 来保持数字不变。
因此，当您的精度为 10 并计算数十亿捷克克朗时，精度可能会受到影响。
尽管如此，例如 1000 的精度比无限精度（我认为这是默认值）要快得多。

这也可以应用于单个操作：

```
BigDecimal n = new BigDecimal("0.12345");
n = n.pow(2, new MathContext(1000, RoundingMode.DOWN));
n = n.pow(2, new MathContext(1000, RoundingMode.DOWN));
n = n.pow(2, new MathContext(1000, RoundingMode.DOWN));
n = n.pow(2, new MathContext(1000, RoundingMode.DOWN)); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-11T19:02:22.547

不知道为什么你需要一个图书馆。

例如，假设您要添加两个具有相同固定精度的 long

```
long c = a + b; 
```

假设你有一个固定的精度数，你想乘以一个整数

```
long c = a * i; 
```

假设您想将一个数字除以整数舍入为零

```
long c = a / i; 
```

假设您要打印一个小数点后 3 位的固定精度数。

```
System.out.println(c / 1e3); 
```

也许您过度思考问题并假设您需要一个库来处理所有问题。

如果您正在使用`long`或者`double`您可能需要少量辅助方法进行舍入，但您不需要这样的库。

# visual-studio - Visual Studio 2012 上 OpenCV 2.4.2 中的 MSER 示例

> ID：11916311
> 
> 赞同：2
> 
> 时间：2012-08-11T17:55:46.707
> 
> 标签：visual-studio, opencv, computer-vision, contour, mser

我在 Visual Studio 2012 上运行 OpenCV 2.4.2。我想使用 MSER 检测图像中的文本。我从 OpenCV 目录中提供的示例 MSER 示例程序开始，

```
#include "opencv2/highgui/highgui.hpp"
#include "opencv2/features2d/features2d.hpp"
#include "opencv2/imgproc/imgproc.hpp"
#include <iostream>
#include <stdio.h>

using namespace cv;
using namespace std;

static const Vec3b bcolors[] =
{
    Vec3b(0,0,255),
    Vec3b(0,128,255),
    Vec3b(0,255,255),
    Vec3b(0,255,0),
    Vec3b(255,128,0),
    Vec3b(255,255,0),
    Vec3b(255,0,0),
    Vec3b(255,0,255),
    Vec3b(255,255,255)
};

int main( int argc, char** argv )
{
    string path;
    Mat img0, img, yuv, gray, ellipses;

    img0 = imread( argc != 2 ? "puzzle.png" : argv[1], 1 );
    if( img0.empty() )
    {
        if( argc != 2 )
            cout << "\nUsage: mser_sample <path_to_image>\n";
        else
            cout << "Unable to load image " << argv[1] << endl;
        return 0;
    }

    cvtColor(img0, yuv, COLOR_BGR2YCrCb);
    cvtColor(img0, gray, COLOR_BGR2GRAY);
    cvtColor(gray, img, COLOR_GRAY2BGR);
    img.copyTo(ellipses);

    vector<vector<Point> > contours;
    double t = (double)getTickCount();
    MSER()(yuv, contours);
    t = (double)getTickCount() - t;
    printf( "MSER extracted %d contours in %g ms.\n", (int)contours.size(),
           t*1000./getTickFrequency() );

    // draw mser's with different colors
    for( int i = (int)contours.size()-1; i >= 0; i-- )
    {
        const vector<Point>& r = contours[i];
        for ( int j = 0; j < (int)r.size(); j++ )
        {
            Point pt = r[j];
            img.at<Vec3b>(pt) = bcolors[i%9];
        }

        // find ellipse (it seems cvfitellipse2 have error or sth?)
        RotatedRect box = fitEllipse( r );

        box.angle=(float)CV_PI/2-box.angle;
        ellipse( ellipses, box, Scalar(196,255,255), 2 );
    }

    imshow( "original", img0 );
    imshow( "response", img );
    imshow( "ellipses", ellipses );

    waitKey(0);
} 
```

当我构建并运行此代码时，我得到以下输出，之后应用程序停止响应：

```
 MSER extracted 1584 contours in 1748.41 ms.
 OpenCV Error: Assertion failed (points.checkVector(2) >= 0 && (points.depth() == 
 CV_32F || points.depth() == CV_32S)) in unknown function, file 
 ..\..\..\src\opencv\modules\imgproc\src\contours.cpp, line 2019 
```

知道问题到底是什么吗？我完全迷路了！

我尝试注释掉外部 for 循环内的所有内容，似乎问题出在 RotatedRect 和 fitEllipse 部分。我不完全确定。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T09:31:06.843

您可以仔细检查变量的数据类型。从错误消息中可以看出，某些函数只能使用或来获取`Mat`变量。`CV_32F``CV_32S`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T19:30:33.497

1.  将您的平台工具集更改为`Visual Studio 2010`. （配置属性 -> 常规 -> 平台工具集）

2.  确保您使用的是二进制文件`opencv\build\x{86|64}\vc10`

中的二进制文件`vc10`是用 VS 2010 构建的，与 VS 2012 不兼容。OpenVC 还没有附带原生的 VS 2012 构建。

# magento - Speedtest 高优先级：启用浏览器缓存

> ID：11916316
> 
> 赞同：1
> 
> 时间：2012-08-11T17:56:31.387
> 
> 标签：magento, caching, e-commerce, browser-cache

我正在使用 Magento 1.7，并且我最近将我的商店切换到了新的云计算主机。为了检查我的商店表现，我运行了几个 pagespeed 测试。每个结果都给了我同样的高优先级：**启用浏览器缓存！**

到目前为止，我已经在 System -> Cache 激活了每一个缓存。所以我不知道为什么我的商店不使用浏览器缓存。

通过切换到新的 Hoster，我删除了存储在`/var`目录中的文件。在将 Magento 商店切换到服务器的简短教程中提到了这一点。

有谁知道如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-11T18:39:41.913

这个建议与 Magento 的缓存无关。

可以发送浏览器缓存指令来告诉客户端浏览器在尝试刷新之前将页面对象（如图像、媒体内容、页面 html、样式表、javascript 等）保留在本地客户端浏览器缓存中多长时间。这些指令通过 DSO 模块（apache web 服务器）、服务器配置和 .htaccess 文件条目启用。

Magento 安装的 .htaccess 文件具有以下部分，仅当您的 Web 服务器正在加载[mod_expires DSO 模块时才会激活该部分](http://httpd.apache.org/docs/current/mod/mod_expires.html)

```
<IfModule mod_expires.c>

############################################
## Add default Expires header
## http://developer.yahoo.com/performance/rules.html#expires

    ExpiresActive On
    ExpiresDefault "access plus 1 year"

</IfModule> 
```

[雅虎关于设置过期指令的更多信息](http://developer.yahoo.com/performance/rules.html#expires)

**添加**

如何判断正在加载哪些模块。这仅适用于通过在 Apache 中加载**mod_php5** DSO 模块来运行 php 解释器。创建`phpinfo()`配置转储页面并查找以下内容：

![在此处输入图像描述](../Images/9ff3652404463bd0ed4a3885bf996aca.png)

一旦 expires 模块工作并注意您的 .htaccess 条目，您可以使用像 Firefox 中的 LiveHttpHeaders 这样的插件来查看 HTTP 服务器请求/响应标头，如下所示：

![在此处输入图像描述](../Images/6cd085fbebb541963d27d2d00a0a91e5.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-12-20T14:12:19.207

**复制并粘贴到 .htaccess 文件的末尾以改善浏览器缓存。**

[![在此处输入图像描述](../Images/e44538a5ad302ef218e8c3119b8a88c0.png)](https://i.stack.imgur.com/Lea8G.png)

```
## EXPIRES CACHING ##
<IfModule mod_expires.c>
ExpiresActive On
ExpiresByType image/jpg "access 1 year"
ExpiresByType image/jpeg "access 1 year"
ExpiresByType image/gif "access 1 year"
ExpiresByType image/png "access 1 year"
ExpiresByType text/css "access 1 month"
ExpiresByType application/pdf "access 1 month"
ExpiresByType application/x-javascript "access 1 month"
ExpiresByType application/x-shockwave-flash "access 1 month"
ExpiresByType image/x-icon "access 1 year"
ExpiresDefault "access 2 days"
</IfModule>
## EXPIRES CACHING ##
```

# android - 在我的 Android 应用程序上集成拼写校正器/检查器

> ID：11916317
> 
> 赞同：0
> 
> 时间：2012-08-11T17:56:36.120
> 
> 标签：android

我是初学者，我正在尝试为我的 android 设备开发一个 APP。

但是我无法完成，因为我不知道如何检查用户在其上介绍的单词（输入）。

我可以使用任何库或其他方式来检查用户介绍的所有单词？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T20:53:32.517

你能澄清一下你的问题吗？当您说用户介绍“单词”时似乎含糊不清——在哪里？专门进入您的应用程序？进入网络浏览器？

不管我认为 UserDictionary 是你正在寻找的：http: [//developer.android.com/reference/android/provider/UserDictionary.html](http://developer.android.com/reference/android/provider/UserDictionary.html)

如果你有兴趣添加或删除这样的词，你可以考虑使用这个： [http ://udm.adrianvintu.com/](http://udm.adrianvintu.com/)

# sql-server - 我可以使用探查器找到错误的 sql 参数值吗？

> ID：11916318
> 
> 赞同：0
> 
> 时间：2012-08-11T17:56:38.430
> 
> 标签：sql-server, sql-server-2008, sql-server-2008-r2

我正在使用 sql server 2008r2 开发人员。我有一个存储过程，它向我从 .NET/C# 代码调用的 db 表中添加一行。它传递了大约 70 个参数（所有字段值）。每天执行大约 5,000 次，持续数月，直到最近才出现问题。该表包含基本股票市场数据，每个代码每天都有自己的行。对于一个特定的股票代码，我收到 sql 错误：

```
Error converting data type numeric to decimal 
```

我只是手动向表中添加了一行，并逐列输入通过存储过程传递的每个参数值，没有错误。我检查并重新检查了存储过程是否正确配对插入语句中的参数/列，也可以。

所以我的问题......有没有办法使用探查器找到特定的错误参数（或其他错误源，如果我吠叫错误的树）？目前我只知道如何在 sp 执行之前查看所有参数值......但我已经可以在 .NET 端执行此操作了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T21:22:54.123

从错误中我们可以理解为数据类型问题。由于字段多，很难找到错误的参数。一旦我遇到类似的问题，我将解释我的方法。这可能会对您有所帮助。

您可以尝试使用参数数组。Insted 传递单独的参数，您可以使用逗号连接所有字段名称和值。例如'field1name:field1value,field2ame:field2value,....' 并在过程中首先用','分割文本。再次用'：'分割值。因此，您将获得字段名称和值。现在在一个循环中，您可以一个一个地更新每个字段。并检查它在哪里抛出错误。

您可以检查此[fnSplit](http://code.logos.com/blog/2008/10/passing_an_array_parameter_to_sql_server_stored_pr.html)函数，并对其进行修改以存储 Field 及其值。然后该函数将返回一个包含所有字段和值的表因此您可以循环使用此表并尝试一一更新。

# android - AnimationDrawable 内存使用情况

> ID：11916319
> 
> 赞同：4
> 
> 时间：2012-08-11T17:56:40.957
> 
> 标签：android, android-animation

我有一个应用程序，其中第一个活动显示加载动画，它似乎显着增加了内存使用量 - 应用程序使用的动画大约 30MB，没有它小于 10MB。

相关代码如下：

```
public void onCreate(Bundle savedInstanceState) 
{
     super.onCreate(savedInstanceState);
     setContentView(R.layout.load_application);
     StartLoadingAnimation();
}

private void StartLoadingAnimation()
{
    frameAnimation = new AnimationDrawable();
    for(int i = 1; i <= 64; i++)
    {
        String index = i < 10 ? "00" + i : "0" + i; 
        int frameIdentifier = getResources().getIdentifier("loading_icon_" + index, "drawable", getPackageName());
        frameAnimation.addFrame(getResources().getDrawable(frameIdentifier), 70);
    }

    ImageView imageCafeLoading = (ImageView) findViewById(R.id.ImageCafeLoading);
    imageCafeLoading.setBackgroundDrawable(frameAnimation);
    imageCafeLoading.post(new LoadingImageStarter());
}

/** Starting the loading image animation */
private class LoadingImageStarter implements Runnable 
{
       public void run() 
       {
            frameAnimation.setOneShot(false);
            frameAnimation.start();
       }
} 
```

导航到下一个时似乎完成活动并不重要，动画的内存使用率仍然高得多。

在离开活动或破坏活动时如何释放此内存？

# jquery - rails中的jqueryui datepicker - 如何链接到现有记录的实际数据库字段值？

> ID：11916322
> 
> 赞同：1
> 
> 时间：2012-08-11T17:57:14.520
> 
> 标签：jquery, ruby-on-rails, ruby, jquery-ui, uidatepicker

我有一个 Rails 应用程序，已将 jquery datepicker 添加到日期字段。它在某些用途上工作正常 - 看起来不错，我可以选择一个日期并将其保存到数据库中。下次我访问该页面时（或者如果我单独检查数据库），该字段已正确更改值。

但是，无法正常工作的一件事是，当我单击现有记录的日期字段时，日历弹出窗口仍然具有今天的日期/月份，而不是实际在数据库字段中的月份，如下所示：
![在此处输入图像描述](../Images/da6b526fa4516700dd246cb6ee20e01f.png)

如何让弹出窗口在数据库中实际存在的月份“出现”？

我的查看代码：

```
= f.text_field :content_date, id: 'datepicker', size:10 
```

我的 js 代码（public/application.js）：

```
//= require jquery
// jQueryUI Date Picker:
$(function (){
        $(".datepick").datepicker({ dateFormat: 'yy-mm-dd'});
}); 
```

我正在运行 rails 3.0.10

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T18:15:43.973

您可以使用 javascript 解析文本输入的值，并使用解析的日期初始化日期选择器。尝试：

```
$(function (){
    var dateInput = $("#datepicker");
    var format = 'yy-mm-dd';
    dateInput.datepicker({dateFormat: format});
    dateInput.datepicker('setDate', $.datepicker.parseDate(format, dateInput.val()));
}); 
```

# r - 连接 R 向量中的 NA 值

> ID：11916324
> 
> 赞同：0
> 
> 时间：2012-08-11T17:57:44.207
> 
> 标签：r, vector, concatenation

考虑以下代码

```
MyClass <- setRefClass("MyClass",

                          fields = list(body = "vector"),

                          methods = list(
                            initialize = function(length){
                              body <<- sample(-100:100, length) / 100
                            }
                          )
)

myFunction <- function(classA, classB){
    cut <- sample(1:length(classA$body), 1)
    new.bodyA <- c(classA$body[1:cut], classB$body[cut+1:length(classB$body)])
    new.bodyB <- c(classB$body[1:cut], classA$body[cut+1:length(classA$body)])
    classA$body <- new.bodyA
    classB$body <- new.bodyB
    return(list(classA, classB))
}

a <- MyClass$new(10)
b <- MyClass$new(10)

myFunction(a, b) 
```

我想要实现的是两个新向量，它们根据随机元素索引组合两个给定向量的元素。

我不确定发生了什么，但是当我运行它时，新向量将包含 NA 值：

```
[[1]]
Reference class object of class "MyClass"
Field "body":
 [1]  0.50 -0.67  0.69 -0.43  0.12 -0.82  0.76  0.72 -0.02 -0.31    NA    NA    NA    NA    NA    NA    NA

[[2]]
Reference class object of class "MyClass"
Field "body":
 [1]  0.18  0.41  0.11  0.14  0.52 -0.67 -0.30 -0.85 -0.45  0.33    NA    NA    NA    NA    NA    NA    NA 
```

我不确定为什么会发生这种情况 - 该功能正常工作，但我不知道如何避免 NA 值。有人可以解释为什么会这样，并提出解决方法吗？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T18:05:09.090

我很确定您的代码中的问题是当您使用

```
cut+1:length(classB$body) 
```

而你应该使用：

```
(cut+1):length(classB$body) 
```

这些不是一回事，因为`:`运算符的优先级高于二进制`+`（有关`?Syntax`运算符优先级的详细信息，请参阅）。你自己看：

```
2+1:6
# [1] 3 4 5 6 7 8
2+(1:6)
# [1] 3 4 5 6 7 8
(2+1):6
# [1] 3 4 5 6 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T18:13:06.377

```
 a = c(1,2,3,4,5)
 b = c(6,7,8,9,10)

 concat_a_wrong = c(a[1:3],b[3+1:length(b)])
 concat_a_correct  = c(a[1:3],b[(3+1):length(b)])

 >>concat_a_wrong 
 1  2  3  9 10 NA NA NA
 >>concat_a_correct  
 1  2  3  9 10 
```

在错误的情况下，您将剪切添加到范围 1:length 中的每个项目，因此实际上您在 b 数组中超出边界（NA）

# php - 加入两个不同的 MySQL 表

> ID：11916332
> 
> 赞同：1
> 
> 时间：2012-08-11T17:58:16.060
> 
> 标签：php, mysql, sql, join

我的数据库中有两个表，我想加入它们。

目的是显示每篇文章的所有评论（朋友和我自己的）。我已经设法选择并显示我朋友的评论，但也没有加入和显示我自己的评论。

表结构

朋友们：

```
id
follower
following 
```

用户

```
id
name
email 
```

到目前为止的朋友查询：

```
SELECT following FROM friends WHERE follower='$follower' 
```

查询用户：

```
SELECT id FROM users WHERE id='$follower' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T19:10:58.367

使用[JOIN](http://www.w3schools.com/sql/sql_join_inner.asp)子句连接两个表：

```
SELECT * FROM friends AS f INNER JOIN users AS u ON f.follower = u.id; 
```

然后，您可以选择满足指定条件的必要行。例如使用[WHERE](http://www.w3schools.com/sql/sql_where.asp)子句：

```
SELECT * FROM friends AS f INNER JOIN users AS u ON f.follower = u.id WHERE following = 1; 
```

# html - 如何在html5中浮动部分标签

> ID：11916334
> 
> 赞同：3
> 
> 时间：2012-08-11T17:59:22.287
> 
> 标签：html, css

这可能是一个简单的问题，那么，如何浮动 - 离开`<section>`标签？我尝试使用`float: left;`但不起作用，或者是否可以将标签与其内容垂直对齐？

这是我的尝试。

html。

```
<div id="divcontent">
    <section>
        <h1>heyo</h1>
        <a href="dropitinmyass.html" ><p>asdasdasdasd</p></a>
    </section>
    <section>
        <h1>heyo</h1>
        <a href="dropitinmyass.html" ><p>asdasdasdasd</p></a>
    </section>
    <section>
        <h1>heyo</h1>
        <a href="dropitinmyass.html" ><p>asdasdasdasd</p></a>
    </section>
</div> 
```

这是CSS。

```
#divcontent {overflow: auto; padding: 15px;}
#divcontent section {float:left; width: 300px;} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T18:02:21.350

默认情况下，所有`HTML5`新元素`inline`。您必须`display:block`为所有这些指定，它们应该显示为`div`s。

```
#divcontent {overflow: auto; padding: 15px;}
#divcontent section {display: block; float: left; width: 300px;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T18:43:00.550

你可以把它`float` `<section>`当作`<div>` 最好的，你也可以给它一个`width`，这样花车就可以工作了。

```
section {
  float: left;
  width: 200px;
  display: block; /* for old browsers */
} 
```

# html - 无法在 th 下同时拥有 th 的边界底部和 td 的边界顶部

> ID：11916336
> 
> 赞同：0
> 
> 时间：2012-08-11T17:59:39.103
> 
> 标签：html, css

这是一些已知问题还是什么。

我的代码是这样的：

```
<table>
   <tr>
       <th>Something</th>
   </tr>
   <tr>
       <td>Something else</td>
   </tr>
</table> 
```

问题是我无法设置

```
tr th { border-bottom: 1px solid red; } 
```

同时

```
tr td { border-top: 1px solid green; } 
```

它不工作。仅显示第 th 条红线。

这是一个错误还是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T18:03:06.973

抱歉..您要做的是将一个边框放在另一个边框上..这就是为什么只显示第一个边框的原因。

# python - 如何使用 Gunicorn 和 Varnish 运行 Flask？

> ID：11916341
> 
> 赞同：3
> 
> 时间：2012-08-11T18:00:19.640
> 
> 标签：python, caching, flask, varnish, gunicorn

我正在用 Flask 编写一个简单的 Web 应用程序，并将使用 Gunicorn 运行它。我想知道如何使用 Varnish 缓存此应用程序返回的页面。

[按照这篇文章](http://ghughes.com/blog/2011/11/11/using-varnish-with-django-for-high-performance-caching/)，我已经能够将 Varnish 与同样在 Gunicorn 上运行的 Django 应用程序一起使用。说明包括使用一个额外的应用程序和一些中间件，但我不确定如何使用 Flask 来完成。

感谢您的建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T01:51:04.960

基本上，您所要做的就是在渲染 Flask 视图时返回适当的缓存标头。

例如，这是一个简单的视图，它呈现一个`robots.txt`文件，并指定它应该被缓存 30 天：

```
from flask import Flask, make_response, render_template
app = Flask(__name__)
@app.route('/robots.txt')
def robots():
    response = make_response(render_template('robots.txt'))
    response.headers['Cache-Control'] = 'max-age=%d' % 60 * 60 * 24 * 30
    return response 
```

# php - 我的图像根本不显示

> ID：11916346
> 
> 赞同：1
> 
> 时间：2012-08-11T18:01:09.813
> 
> 标签：php, jquery

我正在从数据库中提取图像以将其显示在我的页面上，但它不会显示。为了确认图像是从数据库中调用的，我在 title= 上输出图像名称，当您将鼠标放在看不见的图像上时，您可以看到图像名称，但图像本身根本不显示。该网站是这样的： [http ://clicktravelnstay.com/desti_list.php?details=19](http://clicktravelnstay.com/desti_list.php?details=19)

```
 <div id="imgdisplay">
                     <div class="pagecontainer">
                         <div class="galleryCredit">Hotel Photos</div>
                         <div class="galleryType">Preview</div>
                         <div class="clear_both"></div>
                         <div class="galleryContent">
                                 <!--image goes herewidth:650px; height:300px;-->
                                 <!--This is Where the wide image and the caption icon will be placed-->
                                    <div class="galleryThumbnail">
                                    <?php
                                        $query = "SELECT * FROM image WHERE hotel_id = {$hotel['hotel_id']}";
                                                  $image_set =  mysql_query($query,$connection);
                                                  while($image = mysql_fetch_array($image_set)){?>
                                                  <a href=\"img/photos/<?php $image['image_url'];?>" title="<?php echo $image['image_url']?>">
                                                  <img src="img/photos/<?php echo $image['image_url'];?>" width="75" height="75"/></a>           
                                                  <?php } ?> 
                                    <div class="clear_both"></div>
                                    </div>
                                    <div class="galleryPreview">
                                    </div>
                                    <div class="clear_both"></div>
                                    <div class="clear_both"></div>
                                    <div class="gallery_preload_area"></div>
                            </div>

                     <!--image goes herewidth:650px; height:300px;-->

                     </div> 
```

以下代码是图片库的 Jquery 代码。

```
$(document).ready(function(){

$(".galleryThumbnail a").click(function(e){
     e.preventDefault();

     //update thumbnail
     $(".galleryThumbnail a").removeClass("selected");
     $(".galleryThumbnail a").children().css("opacity","1");

     $(this).addClass("selected");
     $(this).children().css("opacity",".4");

     //setup thumbnails
     var photoCaption = $(this).attr('title');
     var photofullsize =$(this).attr('href');

         $(".galleryPreview").fadeOut(500, function(){ 

         $(".gallery_preload_area").html("")  
           // this is what is going to happen after the fadeout
           $(".galleryPreview").html("<a  href='"+ photofullsize +"' style=' background-image:url("+photofullsize+");'></a>");
           $(".galleryCaption").html("<p><a href='"+photofullsize+"' title='Click to view large'>View Large</a></p><p></p>")    
           $(".galleryPreview").fadeIn(500);

          });

});

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T18:07:11.623

路径

[http://clicktravelnstay.com/img/photos/1344707033.png](http://clicktravelnstay.com/img/photos/1344707033.png)

返回 404（未找到）。

您已成功从数据库中提取图像名称，但您的服务器上不存在实际的图像文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T18:08:28.140

您应该查看生成的 HTML：

```
<a href=\"img/photos/" title="1344707033.png">
        ^--- bad escape. 
```

您正在输出无效的 html，加上 href 只是一个路径，而不是指向实际图像。

这意味着：

```
<a href=\"img/photos/<?php $image['image_url'];?>" title="<?php echo $image['image_url']?>">
                          ^---missing 'echo' 
    <img src="img/photos/<?php echo $image['image_url'];?>" width="75" height="75"/></a> 
```

并且`$image['image_url']`不包含任何内容。

# ruby-on-rails - Rails 从模型实例中获取最新的子记录

> ID：11916348
> 
> 赞同：0
> 
> 时间：2012-08-11T18:01:16.443
> 
> 标签：ruby-on-rails, ruby-on-rails-3

合同有_许多发票。创建合同后，模型会根据某些表单参数自动创建发票。

我希望能够从给定合同中选择最近创建的发票。

这就是我想要实现的：

```
contract = Contract.new(params)
contract.save

invoice = contract.invoices.most_recent  # < wanting to get the most recent

#or possible even do this if it's quicker
invoice = contract.most_recent_invoice 
```

哪种方法最熟练，最好的方法是什么？Rails 有内置方法吗？我只想学习和维护最佳实践。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T18:06:04.387

我会在 Invoice 模型中添加一个类方法，按 created_at 对其进行排序并返回第一个：

```
class Invoice < ActiveRecord::Base
  def self.most_recent
    order('created_at DESC').limit(1).first
  end
end

invoice = contract.invoices.most_recent # => Gives the last invoice created for this contract 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T18:08:07.800

你可以试试[最后](http://api.rubyonrails.org/classes/ActiveRecord/FinderMethods.html#method-i-last)一种方法。例子：

```
contract = Contract.new(params)
contract.save

invoice = contract.invoices.last 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T18:06:38.517

`most_recent_invoice`通过 created_at 创建订单范围并创建将`limit`限制记录数量的范围（最佳实践）

# google-maps - 拖动带有自定义叠加层的谷歌地图 3 会导致非常大的滞后

> ID：11916349
> 
> 赞同：2
> 
> 时间：2012-08-11T18:01:18.897
> 
> 标签：google-maps, google-maps-api-3, maps, overlay-view, custom-overlay

我开始使用版本 3，但有一个大问题。

当我在地图上创建超过 20-30 个自定义叠加层并尝试用鼠标拖动地图时，会有非常大的延迟。

当我使用内置控件平移地图时，没有滞后。

知道发生了什么吗？当我使用第 2 版时，添加 200 多个自定义叠加层后会出现滞后。第 3 版开始仅滞后 20-30。

PS 通过自定义叠加，我的意思是继承 OverlayView。

这是主要在使用 firefox 时出现的问题的示例

谷歌地图 v2：46.233.14.168:8080/GoogleMapsTest/testPage2.jsp 谷歌地图 v3：46.233.14.168:8080/GoogleMapsTest/testPage.jsp

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-25T03:49:13.173

我遇到了同样的问题，使用 GM API 3 和最新的 Firefox。旧的 Firefox 11 没有性能问题。

经过一番研究，我发现我的软件中的标记太复杂了——它们由一个自构建的 div 对象和一个图像对象组成。

我用 standard 替换了它们`Google.maps.Marker`，它们不太灵活，但足以满足我的目的。现在地图平移速度非常快 - 在 Firefox 中使用数千个标记，甚至在 Chrome 中使用数万个标记都没有问题！

# android - 从 android 在 facebook 上发布带有文本的图像

> ID：11916352
> 
> 赞同：0
> 
> 时间：2012-08-11T18:01:49.090
> 
> 标签：android, facebook

如何在 Facebook 上发布带有文字的图片？我知道如何发布文本、链接，但我也想发布图片。

这是我尝试过的：

```
 byte[] data = null;
 Bitmap bi = BitmapFactory.decodeFile("R.drawable.plate1");
 ByteArrayOutputStream baos = new ByteArrayOutputStream();
 bi.compress(Bitmap.CompressFormat.JPEG, 100, baos);
 data = baos.toByteArray();
 parameters.putByteArray("picture", data);

 int plate = getResources().getIdentifier("com.b2creativedesigns.eyetest:drawable/plate1", null, null);
 parameters.putString("picture", String.valueOf(plate)); 
```

它们都不起作用。当我尝试发布时，没有任何反应。什么都没有发布。使用下面的代码，它可以工作。

从网站发布图像很容易，但是当网站关闭或链接被修改时，它就不起作用了。

```
 parameters.putString("picture", "https://lh3.ggpht.com/f79UCpnLisZxO2P2C43f55YLvFpNco_cTcC-t9Ck-Qmqe5jwKbfnUvCh5N6-Te-mOw=w124"); 
```

第三个例子：

```
 byte[] data = null;
  Bitmap bi = BitmapFactory.decodeFile("R.drawable.plate1");
  ByteArrayOutputStream baos = new ByteArrayOutputStream();
  bi.compress(Bitmap.CompressFormat.JPEG, 100, baos);
  data = baos.toByteArray();
  parameters.putString("method", "photos.upload");
  parameters.putByteArray("picture", data); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-09-10T08:11:20.053

```
Session.openActiveSession(activity, true,
                            new Session.StatusCallback() {
                                @Override
                                public void call(Session session,
                                        SessionState state,
                                        Exception exception) {
                                    // TODO Auto-generated method stub
                                    if (session.isOpened()) {
                                        fbSession = session;
    Bundle bundle = new Bundle();
    bundle.putString("caption", "Check this out, what do you think?");
    bundle.putString("name", name);
    bundle.putString("description", description);
    bundle.putString("picture", image);
    new WebDialog.FeedDialogBuilder(HomeActivity.this, session, bundle)
            .build().show();
                                    }
                                }

                            });

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    switch (requestCode) {
    default:
        if (Session.getActiveSession() != null)
            Session.getActiveSession().onActivityResult(this, requestCode,
                    resultCode, data);
        break;
    }
} 
```

将此代码添加到您的 Android 清单文件中，将您的 facebook id 放在 FB_AppID 的位置。

```
<activity android:name="com.facebook.LoginActivity" android:theme="@android:style/Theme.Translucent.NoTitleBar"/><meta-data android:name="com.facebook.sdk.ApplicationId" android:value="@string/FB_AppID"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T00:11:37.533

编辑：对不起，我不应该就如何使用 REST API 提供建议，因为它已被弃用。这就是您使用 Graph API 将照片上传到自己的墙上的方式。

```
Bundle params = new Bundle();
params.putByteArray("photo", data);
params.putString("caption", "Test photo upload");
    mAsyncRunner.request("me/photos", params, "POST",
    new PhotoUploadListener(), null); 
```

请试试这个，看看它是否有效。这是直接从我们文档中的 HackBook 示例中提取的。对于图像的压缩，您可以`Utility.scaleImage`在我们的 SDK 中使用我们的方法，该方法将执行所有压缩和缩放以匹配 Facebook 的标准。

==================================================== =================================

原始信息：

`photos.upload`正在使用 REST API 并且已被弃用，因此我建议使用 Graph API 上传照片，但这是使用 REST API 的快速而肮脏的解决方案。

将字节数组放入变量中`data`后，请执行以下操作：

```
Bundle params = new Bundle();
params.putString("method", "photos.upload");
params.putByteArray("picture", data);
mFacebook.request(params); 
```

让我知道这是否有帮助。

# php - 任务队列 - PHP

> ID：11916353
> 
> 赞同：2
> 
> 时间：2012-08-11T18:01:52.247
> 
> 标签：php

如何使用 PHP 制作“任务队列”？我知道如何存储和创建队列。问题在于使其在服务器端执行而不挂起用户会话。我没有使用服务器的权限。我只在上面上传我的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T18:29:25.510

如果您有服务器访问权限，我会建议使用**crontab 。**

我可能会创建另一个脚本，当通过 HTTP 进程调用时，它会包含 10 个项目。然后您自己定期调用此脚本，或者更好的是，从您可以设置 cronjob 的另一台服务器调用此脚本。

但是，如果您要在用户 HTTP 请求之后直接完成这项工作，那么在 PHP 中您可以使用**ignore_user_abort()**。您可以使用**[PHP 手册页上的多个示例](http://php.net/manual/en/function.ignore-user-abort.php)**。

# css - 将块级元素定位在同一行

> ID：11916355
> 
> 赞同：0
> 
> 时间：2012-08-11T18:02:12.090
> 
> 标签：css

嗨，我有一个问题一直困扰着我。我见过许多开发人员，当他们尝试将块级元素放置在同一行时，他们会同时使用这两种元素：

```
float:left
display:inline 
```

我自己只为此使用 display:inline-block 并得到相同的效果。几周前，一位开发人员建议我应该使用上面的代码，但当我问他为什么没有回答时。

如果那个开发人员是对的，那我为什么要使用上面的代码？有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T19:32:27.380

display:inline-block 在 IE7 及更低版本以及其他一些旧浏览器上不受支持。我想如果您支持旧版浏览器，则需要使用其他开发人员在条件样式表中建议的内容。

否则，这只是人们仍在使用的一种技巧，因为这是他们已经知道的，即使 display:inline-block 更好。他没有回答你为什么是因为他没有一个好的答案，他的回答很可能只是“因为我就是这样做的”。

# jquery - 多个切换和展开/折叠图像

> ID：11916357
> 
> 赞同：0
> 
> 时间：2012-08-11T18:02:15.600
> 
> 标签：jquery

我有两个具有相同类名的切换 div。当我单击其中一个时，右侧的加号不会被减号替换，**除非**我同时单击它们。

[http://jsfiddle.net/adige72/rxW3H/](http://jsfiddle.net/adige72/rxW3H/)

html:

```
<div class="collapseTitle">Open 1<div class="symbol">&nbsp</div></div>
<div class="collapseContent">Content 1</div>

<div class="collapseTitle">Open 2<div class="symbol">&nbsp</div></div>
<div class="collapseContent">Content 2</div> 
```

js：

```
var $coll = $('.collapseTitle');

$coll.click(function() {
    $(this).nextUntil('.collapseTitle').toggle('fast', callbackFn);
        function callbackFn(){
            $('.collapseContent').is(":hidden") ? $coll.find('.symbol').css({'background-position': '0 50%'}) : $coll.find('.symbol').css({'background-position': '-36px 50%'});
        }

$(this).toggleClass("expanded collapsed");

});

$coll.addClass('expanded').click(); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T18:56:14.623

试试这个。

```
var $coll = $('.collapseTitle');

$coll.click(function() {
    var $this = $(this);
    $(this).nextUntil('.collapseTitle').toggle('fast', function() {
        $this.next('.collapseContent').is(":hidden") ? $this.find('.symbol').css({
            'background-position': '0 50%'
        }) : $this.find('.symbol').css({
            'background-position': '-36px 50%'
        });
    });
    $this.toggleClass("expanded collapsed");
});

$coll.addClass('expanded').click();​ 
```

[http://jsfiddle.net/wirey00/rxW3H/1/](http://jsfiddle.net/wirey00/rxW3H/1/)

我修复了以下问题

```
$(this).nextUntil('.collapseTitle').toggle('fast', callbackFn);  // <-- just put the callback function here
        function callbackFn(){
          //  this is checking both .collapseContent.. you need to start from the current clicked .collapseTitle
            $('.collapseContent').is(":hidden") ?  $coll.find('.symbol').css({'background-position': '0 50%'}) : $coll.find('.symbol').css({'background-position': '-36px 50%'});
        } 
```

# matlab - 在matlab中调整两个视频

> ID：11916358
> 
> 赞同：0
> 
> 时间：2012-08-11T18:02:19.183
> 
> 标签：matlab, video, image-processing

我用相机捕捉我的电脑屏幕和镜子。现在我想将屏幕调整到镜子，为屏幕中的每个像素调整镜子中的一个像素，我从视频中附加一个帧。

我正在寻找代码或想法。![在此处输入图像描述](../Images/5735167f2e60fd9f6b1aada257aed1b6.png)

我添加了一些图像示例：

![在此处输入图像描述](../Images/7859037398e617fa9f1f04697c5e3d35.png) ![在此处输入图像描述](../Images/c1f140f1138fd805317ba1247343f4bd.png)

![在此处输入图像描述](../Images/2692ecbc18094f2df7976d7a33d8c8d4.png) ![在此处输入图像描述](../Images/f8503d92811bf0eccf1091ed74b98fe2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T21:40:15.947

您正在寻找的算法是关键点检测器和匹配器。有几种算法可以完成这项工作（SURF、SIFT、ORB、FREAK 等），该过程涉及三个步骤。

1.  特征点检测。

2.  为模板图像和目标图像的每个关键点生成描述符。

这两个阶段的算法是 SURF、SIFT、ORB 等，有关详细信息，请参阅 opencv 特征检测部分。

3.  匹配两幅图像中的关键点

这可以通过使用 KNN 匹配、基于 FLANN 的匹配器、BRUTEFORCE 匹配器等来完成。

这是matlab和opencv中的链接。

[MatLab_SURF](http://www.mathworks.com/matlabcentral/fileexchange/28300-opensurf-including-image-warp)

[Opencv_特征检测](http://docs.opencv.org/2.4.2/doc/tutorials/features2d/feature_detection/feature_detection.html)

在您的情况下，SURF 算法失败的原因：

虽然匹配两个图像是两种不同场景中的对象，但我们需要考虑以下条件：

1.  图像之间发生了哪种转换，是仿射还是透视，还是只是平移或旋转等...

    在你的情况下，它看起来像透视变换......

2.  图像是否具有丰富的纹理和质量。在您的情况下，图像纹理丰富但质量差或细节丢失可能是由低分辨率相机拍摄的。

[在这里](https://stackoverflow.com/questions/11920483/object-recognition-performance-not-good/11921395#11921395)查看我对类似问题的回答

我的第一个建议是首先捕获质量更高的数据集。为了使关键点检测算法更容易找到好的关键点，一旦基本算法准备好，然后进行改进以使其适用于分辨率较差的数据集。

# php - PHP 在数字/小数前面插入制表符并整齐地格式化它们

> ID：11916362
> 
> 赞同：0
> 
> 时间：2012-08-11T18:02:37.973
> 
> 标签：php, preg-replace, decimal

我有想要以特定样式格式化的字符串（文本、数字、标点符号等）。

**我有这个：**

```
1\. TOC 1.1 Chapter 1.1 1.2 Chapter 1.2 1.3 Chapter 1.3 2\. Automation 2.1 This is Chapter 2.1 2.2 Chapter 2.2 is it's name 3\. Mechanics 3.1 Chapter 3.2 Some Chapter 3.2a Sub-chapter of 3.2 3.2b Sub-chapter of 3.2 chapter 
```

**需要这个：**

```
 1\. TOC
    1.1 Chapter 1.1
    1.2 Chapter 1.2
    1.3 Chapter 1.3

  2\. Automation
    2.1 This is Chapter 2.1
    2.2 Chapter 2.2 is it's name

  3\. Mechanics
    3.1 Chapter 
    3.2 Some Chapter 
        3.2a Sub-chapter of 3.2
        3.2b Sub-chapter of 3.2 chapter 
```

**试过这个：**

```
$text = preg_replace('/([0-9])/', "\n\t$1", $text); 
```

**得到这个（不正确的输出）：**

```
1\. TOC

1.
1 Chapter 
1.
1

1.
2 Chapter 
1.
2

1.
3 Chapter 
1.
3

2\. Automation

2.
1 This is Chapter 
2.
1

2.
2 Chapter 
2.
2 is it's name

3\. Mechanics

3.
1 Chapter 

3.
2 Some Chapter 

3.
2a Sub-chapter of 
3.
2

3.
2b Sub-chapter of 
3.
2 chapter 
```

如何解决此问题，以便以我需要的格式显示输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T18:05:59.060

您是否在浏览器中显示此内容？标准文本空白字符都被视为空格，重复的空白字符被折叠成一个显示的字符。

同样，您的正则表达式不适用于此。它正在寻找任何**单个**数字并在其前面加上换行符/制表符。你必须寻找整个数字模式，例如。`/(\d\.\d[a-z]?)/`

# c++ - 使用 CodeBlocks 忽略在 C++ 中调用 main 函数

> ID：11916363
> 
> 赞同：3
> 
> 时间：2012-08-11T18:02:46.257
> 
> 标签：c++, compiler-construction, codeblocks, main

> **可能重复：**
> [主函数可以在 C++ 中调用自身吗？](https://stackoverflow.com/questions/2128321/can-main-function-call-itself-in-c)

我决定使用 CodeBlock IDE 做一个小测试，调用 main 函数，这应该是非法行为。

前任：

```
#include <iostream>
using namespace std;

int main()
{
  cout<<"hello"<<endl;
  main();
  return 0;
} 
```

奇怪的是，在代码块中，我能够编译这个烂摊子。有谁知道为什么？

输出：你好

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-11T18:17:16.237

正如您在问题本身中所说`main()`，语言规范禁止从您的代码中显式调用。只有运行时可以调用它。

当您使用 GCC 编译代码（阅读您的评论）时，该`-pedantic`选项将以错误或警告的形式为您提供适当的诊断。所以试试这个：

```
g++ program.cpp -pedantic 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T18:22:18.263

```
cout<<"hello"<<endl;
**main();**
return 0; 
```

第二行 main() 将导致一个无限递归循环，其中 main() 函数一次又一次地调用自身，这反过来又会导致代码返回值中没有路径。

由于并非所有路径都返回值，因此没有 C 编译器会编译它。忘记 C，即使 C# 编译器在发现所有路径都没有返回值时也会停止，尽管代码是清晰的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T18:12:57.007

您可以调用main函数下的任何函数。main也是编译器在运行时触发的函数。是的，这是非法行为，但您可以在 main 下调用 main 函数。在主因隐性下调用 main 函数并无限运行时间。在 VS2008 中，您会收到调用 main 函数的警告，但程序运行没有任何问题。

# ios - 将大图像异步加载到相册中，如视图

> ID：11916364
> 
> 赞同：0
> 
> 时间：2012-08-11T18:02:46.977
> 
> 标签：ios, asynchronous, load, uiimage

我正在尝试制作像相册一样的视图。但图像文件很大（2048x1536，png）。加载几张图像需要相当长的时间。所以制作了加载图像的线程.. 首先..为图像持有者制作 UIButton。

```
UIButton* thumbnail = [[UIButton alloc] initWithFrame:r];
[[self scroll] addSubview:thumbnail];
[thumbnail release]; 
```

并启动图像加载线程

```
[NSThread detachNewThreadSelector:@selector(th_load_filelist) toTarget:self withObject:nil]; 
```

线程在这里

```
-(void) th_load_filelist
{
   NSAutoreleasePool* pool = [[NSAutoreleasePool alloc] init];    
   for (UIButton* bt in [self.scroll subviews])
   {
      UIImage* img = [[UIImage alloc] initWithContentsOfFile:(NSString*)bt.tag];
      [[bt layer] performSelectorOnMainThread:@selector(setContents:) withObject:(id)[img CGImage] waitUntilDone:YES];
      [img release];
   }

   [pool release];
} 
```

它运作良好。在正常情况下。但是如果有很多图像和内存警告发生。应用程序崩溃，没有任何错误消息。你能给我小费来解决它吗？我怀疑有大图像引起的内存问题..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T18:43:27.847

问题不在于加载同步与异步，而是加载到内存中的像素数量。您的应用程序正在被系统杀死，因为它使用了太多内存。

为了解决这个问题，我会让服务器提供一个 1:1 大小的图像（非视网膜 iphone 为 320x480），然后提供一个不会加载到内存中的更大图像。然后，我只会在需要时将较大的图像加载到内存中（例如 UIImage）（放大或显示在更高分辨率的屏幕上）。

# visual-studio-2010 - 在 VS 2010 中使用 JSONcpp

> ID：11916366
> 
> 赞同：2
> 
> 时间：2012-08-11T18:02:52.593
> 
> 标签：visual-studio-2010, jsoncpp

有什么方法可以创建适用于 VS2010 的 .lib？甚至 JSONcpp 的合并版本也不起作用（（它会抛出 LNK2028 和 LNK2019 错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T19:39:15.170

Amalgamation should work on VS2010\. Make sure you add the path to Additional Include Directories.

# css - 页脚 mozzilla html5

> ID：11916367
> 
> 赞同：0
> 
> 时间：2012-08-11T18:02:56.320
> 
> 标签：css, html, firefox, footer

页脚在 Mozzilla Firefox 14.0.1 中看起来更下方，而在 Safari 和 Chrome 中看起来很好。它在所有浏览器中都可以正常工作，但在外观方面有很大不同，比如再往下 20 或 30 像素（在 Firefox 中）。

怎么做才能使它们看起来尽可能相似？

HTML：

```
<footer>
  <a href="mailto:info@site.com ?subject=Hello">Contact us</a>
  <p id="copy">&copy 2012<?php echo date('Y'); ?> someone.</p>
</footer><!-- #footer --> 
```

CSS：

```
footer {
    width: 740px;
    margin: 0 auto;
    height: 23px;
    background: #222222;
    position: relative;
    -moz-border-radius: 10px;
    -webkit-border-radius: 10px;
    border-radius: 10px; 
    -khtml-border-radius: 10px;
    color: #cf2e45;
} 
```

# image - 如何在运行时处理动作脚本中的嵌入图像

> ID：11916368
> 
> 赞同：0
> 
> 时间：2012-08-11T18:02:56.287
> 
> 标签：image, memory, actionscript

我的理解是嵌入式图像被压缩并存储为应用程序二进制文件（SWF 文件）的一部分，并且在实例化具有嵌入式图像属性的类时，所有图像都会立即加载并保留在内存中，因此它们随时可用，不需要异步加载。这当然听起来很直观，但它绝对正确吗？

例如，如果我使用的类定义

```
class BunchOfEmbeddedImages {
[Embed(source="some_image_1.png")]
private var someImage1:Class;
.
.
.
[Embed(source="some_image_100.png")]
private var someImage100:Class;
} 
```

假设每个图像为 100KB，当创建此类的实例时，应用程序现在是否为 10000KB（因为它们已解压缩，所以更多）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T02:35:49.993

我想我不妨回答我自己的问题。虽然我找不到我阅读的原始文档以找到该主题的答案（它是来自 adobe 的性能优化文档），但我确实发现无论如何，由于整个 SWF 被加载到内存中，所有嵌入的资产也正在消耗内存，无论嵌入它们的类是否被实例化。这确实很有意义，因为嵌入的图像都将引用相同的位图数据，但会被不同的 DisplayObject 实例引用。这允许显示列表的不同部分中的 n 个 DisplayObject 显示相同的图像，但不会消耗 n 倍于位图的内存。

# php - 如何从 $(document).ready() 运行 javascript 函数

> ID：11916372
> 
> 赞同：0
> 
> 时间：2012-08-11T18:03:27.253
> 
> 标签：php, javascript, jquery, ajax

我正在使用[jsgantt](http://www.jsgantt.com/)库在我的网页上创建甘特图。问题如下。

**变体 1 不工作**，而**变体 2 工作**。显示“Start”警报，而函数内部不显示“Fin”警报`createChartControl`。所以，我无法弄清楚为什么变体 1 不工作（即空白 DIV 容器）并且 Firebug 不显示任何错误消息。非常感谢任何帮助。

**变体 1：**

```
 <script>
    function createChartControl(htmlDiv)
    {

alert("Start");

          var g = new JSGantt.GanttChart('g',document.getElementById(htmlDiv), 'hour');

          g.setShowRes(1); // Show/Hide Responsible (0/1)
          g.setShowDur(1); // Show/Hide Duration (0/1)
          g.setShowComp(1); // Show/Hide % Complete(0/1)
          g.setCaptionType('Resource');  // Set to Show Caption (None,Caption,Resource,Duration,Complete)
          g.setFormatArr("hours","minutes")

          if( g ) {

            // Parameters             (pID, pName,                  pStart,      pEnd,        pColor,   pLink,          pMile, pRes,  pComp, pGroup, pParent, pOpen)

            // You can also use the XML file parser JSGantt.parseXML('project.xml',g)

            g.AddTaskItem(new JSGantt.TaskItem(1,   'Add minutes/hours',            '',                 '',                 'ff0000', 'http://help.com',        0, 'Ilan',     0, 1, 0, 1));
            g.AddTaskItem(new JSGantt.TaskItem(11,  'Add support for half days',    '5/14/2009 14:00',  '5/14/2009 15:30',  'ff00ff', 'http://www.jsgantt.com', 0, 'Ilan',  100, 0, 1, 1));
            g.AddTaskItem(new JSGantt.TaskItem(12,  'Add minute view',              '5/14/2009 16:00',  '5/14/2009 17:00',  '00ff00', '',                       0, 'Ilan',   40, 0, 1, 1));
            g.AddTaskItem(new JSGantt.TaskItem(13,  'Add hours view',               '5/14/2009 16:00',  '5/14/2009 17:00',  '00ffff', 'http://www.yahoo.com',   0, 'Ilan', 60, 0, 1, 1));
            g.AddTaskItem(new JSGantt.TaskItem(14,  'Add support for format options',               '5/14/2009 18:00',  '5/14/2009 19:00',  '00ffff', 'http://www.yahoo.com',   0, 'Shlomy', 60, 0, 14, 1));

            g.Draw();   
            g.DrawDependencies();

alert("Fin");

          }
          else
          {
            alert("not defined");
          }
    }
    </script>

    <script>
    $(document).ready(function() {
                               createChartControl('schedule');

    });
    </script>

    <div style="position:relative" class="gantt" id="schedule"></div> 
```

**变体 2：**

```
<div style="position:relative" class="gantt" id="schedule"></div>
<script>
      var g = new JSGantt.GanttChart('g',document.getElementById('schedule'), 'hour');

      g.setShowRes(1); // Show/Hide Responsible (0/1)
      g.setShowDur(1); // Show/Hide Duration (0/1)
      g.setShowComp(1); // Show/Hide % Complete(0/1)
      g.setCaptionType('Resource');  // Set to Show Caption (None,Caption,Resource,Duration,Complete)
      g.setFormatArr("hours","minutes")

      if( g ) {

        // Parameters             (pID, pName,                  pStart,      pEnd,        pColor,   pLink,          pMile, pRes,  pComp, pGroup, pParent, pOpen)

        // You can also use the XML file parser JSGantt.parseXML('project.xml',g)

        g.AddTaskItem(new JSGantt.TaskItem(1,   'Add minutes/hours',            '',                 '',                 'ff0000', 'http://help.com',        0, 'Ilan',     0, 1, 0, 1));
        g.AddTaskItem(new JSGantt.TaskItem(11,  'Add support for half days',    '5/14/2009 14:00',  '5/14/2009 15:30',  'ff00ff', 'http://www.jsgantt.com', 0, 'Ilan',  100, 0, 1, 1));
        g.AddTaskItem(new JSGantt.TaskItem(12,  'Add minute view',              '5/14/2009 16:00',  '5/14/2009 17:00',  '00ff00', '',                       0, 'Ilan',   40, 0, 1, 1));
        g.AddTaskItem(new JSGantt.TaskItem(13,  'Add hours view',               '5/14/2009 16:00',  '5/14/2009 17:00',  '00ffff', 'http://www.yahoo.com',   0, 'Ilan', 60, 0, 1, 1));
        g.AddTaskItem(new JSGantt.TaskItem(14,  'Add support for format options',               '5/14/2009 18:00',  '5/14/2009 19:00',  '00ffff', 'http://www.yahoo.com',   0, 'Shlomy', 60, 0, 14, 1));

        g.Draw();   
        g.DrawDependencies();

      }

      else

      {

        alert("not defined");

      }
</script> 
```

**更新 1：当我使用**[dhtmlxGantt](http://dhtmlx.com/docs/products/dhtmlxGantt/index.shtml)库在函数 createChartControl 中创建图表时，我应该说 Variant 1 正在工作。

**更新 2：**我在变体 1 中更新了我的示例代码。它仍然无法正常工作 - 即显示警报“开始”，而警报“鳍”没有显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T18:28:07.590

你确定，你从 updateList 得到的响应是 JSON 对象吗？

```
echo json_encode(array('a'=>'b'));
die(); 
```

如果您不响应 JSON 对象，请使用 $.get() 方法。

PS：请不要使用 'updateList.php?query='+'DROP DATABASE()' 尝试一些 MVC 逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T10:30:57.383

jsgantt 需要全局变量`g`才能工作。变成. `var g`_ 所以它看起来像这样`window.g`

**变体 1：**

```
<script>
    function createChartControl(htmlDiv)
    {
        alert("Start");

        window.g = new JSGantt.GanttChart('g',document.getElementById(htmlDiv), 'hour');

        g.setShowRes(1); // Show/Hide Responsible (0/1)
        g.setShowDur(1); // Show/Hide Duration (0/1)
        g.setShowComp(1); // Show/Hide % Complete(0/1)
        g.setCaptionType('Resource');  // Set to Show Caption (None,Caption,Resource,Duration,Complete)
        g.setFormatArr("hours","minutes")

        if(g) {
            // Parameters (pID, pName, pStart, pEnd, pColor, pLink, pMile, pRes, pComp, pGroup, pParent, pOpen)
            // You can also use the XML file parser JSGantt.parseXML('project.xml',g)

            g.AddTaskItem(new JSGantt.TaskItem(1, 'Add minutes/hours', '', '', 'ff0000', 'http://help.com', 0, 'Ilan', 0, 1, 0, 1));
            g.AddTaskItem(new JSGantt.TaskItem(11, 'Add support for half days', '5/14/2009 14:00', '5/14/2009 15:30', 'ff00ff', 'http://www.jsgantt.com', 0, 'Ilan', 100, 0, 1, 1));
            g.AddTaskItem(new JSGantt.TaskItem(12, 'Add minute view', '5/14/2009 16:00', '5/14/2009 17:00', '00ff00', '', 0, 'Ilan',  40, 0, 1, 1));
            g.AddTaskItem(new JSGantt.TaskItem(13, 'Add hours view', '5/14/2009 16:00', '5/14/2009 17:00', '00ffff', 'http://www.yahoo.com',  0, 'Ilan', 60, 0, 1, 1));
            g.AddTaskItem(new JSGantt.TaskItem(14, 'Add support for format options', '5/14/2009 18:00', '5/14/2009 19:00', '00ffff', 'http://www.yahoo.com',  0, 'Shlomy', 60, 0, 14, 1));

            g.Draw();
            g.DrawDependencies();

            alert("Fin");
        }
        else {
            alert("not defined");
        }
    }
</script>

<script>
    $(document).ready(function() {
        createChartControl('schedule');
    });
</script>
<div style="position:relative" class="gantt" id="schedule"></div> 
```

# android - 从android中的服务启动活动时出错

> ID：11916380
> 
> 赞同：0
> 
> 时间：2012-08-11T18:06:04.680
> 
> 标签：android, android-activity, android-service

我有一个听来电的接收器。从这个接收器我正在启动一项服务，它将发送电子邮件（使用 android Intent）但我得到一个异常（请参考 Log Cat 的日志）。

> java.lang.RuntimeException：无法使用 Intent { cmp=com.pack.android.email.service/com.pack.android.service.EmailService } 启动服务 com.pack.android.service.EmailService@40519818：android.util .AndroidRuntimeException：从 Activity 上下文外部调用 startActivity() 需要 FLAG_ACTIVITY_NEW_TASK 标志。这真的是你想要的吗？

我已经设置了“FLAG_ACTIVITY_NEW_TASK”和“FLAG_FROM_BACKGROUND”。这不是用户活动。我正在尝试使用意图 INTENT.SENDTO/SEND 开始现有活动（发送电子邮件）。

奇怪的是错误： **引起：android.content.ActivityNotFoundException：没有找到处理意图的活动{act = android.intent.action.SENDTO flg = 0x10000004（有额外）}**

我在这里想念什么？

我在使用 Java Mail API 发送电子邮件时遇到的另一个问题是邮件被正确发送，这就是它的样子，但不知何故，邮件似乎从未出现在邮箱中。我指的是以下链接以发送无意图的电子邮件：无意图 [发送电子邮件](https://stackoverflow.com/questions/2020088/sending-email-in-android-using-javamail-api-without-using-the-default-built-in-a)

如果有人可以对此提供一些见解，那将是 gr8。

代码如下：呼叫接收者：-

```
public class CallReceiver extends BroadcastReceiver
{
    private static final String LOG_TAG = "CallReceiver";
    private static final String ACTION = "android.intent.action.PHONE_STATE";

    @Override
    public void onReceive(Context context, Intent intent)
    {
        System.out.println("--------Inside onReceive of CallReceiver--------");
        Log.d(LOG_TAG, "Inside onReceive");

        if(intent.getAction().equals(ACTION)){
            Log.d(LOG_TAG, "-----Criteria matched-----");
            Intent emailIntent = new Intent(context, EmailService.class);
            emailIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            emailIntent.addFlags(Intent.FLAG_FROM_BACKGROUND);
            context.startService(emailIntent);
        }
    }
} 
```

电子邮件服务：-

```
public class EmailService extends Service {

    private static final String LOG_TAG = "EmailService";

    @Override
    public IBinder onBind(Intent arg0)
    {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public void onCreate()
    {
        super.onCreate();
        Log.d(LOG_TAG, "-------On create called-------");
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId)
    {
        Log.d(LOG_TAG, "-----Inside On Start Command-----");
        MailService mailer = new MailService("24adithya@gmail.com","24adithya@gmail.com","Test","Hi This is 5554 from Mail Service", "<b>HtmlBody</b>");
        try {
            boolean success = mailer.sendAuthenticated();
            Log.d(LOG_TAG, String.valueOf(success));
        } catch (Exception e) {
            Log.e(LOG_TAG, "Failed sending email.", e);
        }

        try {   
            GMailSender sender = new GMailSender("%MyUserId%@gmail.com", "%Mypassword%");
            sender.sendMail("Test Subject",   
                    "Hi, This is 5554 from Gmail Sender",   
                    "24adithya@gmail.com",   
                    "24adithya@gmail.com");   
        } catch (Exception e) {   
            Log.e("SendMail", e.getMessage(), e);   
        }

        /*Intent emailIntent = new Intent(Intent.ACTION_SENDTO);
        emailIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        emailIntent.addFlags(Intent.FLAG_FROM_BACKGROUND);
//      emailIntent.setType("plain/text");

        emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL,
                new String[] { "24adithya@gmail.com" });

        emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT,
                "Email from Intent");

        emailIntent.putExtra(android.content.Intent.EXTRA_TEXT,
                "Hi, This is 5554 from intent");

//      getApplicationContext().startActivity(Intent.createChooser(emailIntent, "Send mail..."));
        Log.d(LOG_TAG, "context = " + getApplicationContext());
        startActivity(emailIntent);*/

        return Service.START_STICKY;
    }

    @Override
    public void onDestroy()
    {
        super.onDestroy();
        Log.d(LOG_TAG, "-------On destroy called-------");
    }
} 
```

邮件服务：

```
public class MailService {
    private static final String LOG_TAG = "MailService";
    private String toList;
    private String ccList;
    private String bccList;
    private String subject;
    final private static String SMTP_SERVER = "smtp.gmail.com";
    private String from;
    private String txtBody;
    private String htmlBody;
    private String replyToList;

    private boolean authenticationRequired = false;

    public MailService(String from, String toList, String subject, String txtBody, String htmlBody) {
        this.txtBody = txtBody;
        this.htmlBody = htmlBody;
        this.subject = subject;
        this.from = from;
        this.toList = toList;
        this.ccList = null;
        this.bccList = null;
        this.replyToList = null;
        this.authenticationRequired = true;
    }

    public boolean sendAuthenticated() throws AddressException, MessagingException {
        authenticationRequired = true;
        return send();
    }

    /**
     * Send an e-mail
     * 
     * @throws MessagingException
     * @throws AddressException
     */
    public boolean send() throws AddressException, MessagingException {

        Log.d(LOG_TAG, "Inside Send !");
        Properties props = new Properties();

        // set the host smtp address
        props.setProperty("mail.transport.protocol", "smtp");
        props.setProperty("mail.host", SMTP_SERVER);
        props.put("mail.smtp.auth", "true"); // needed for gmail
        props.put("mail.smtp.port", "465");  // gmail smtp port - 587
//        props.put("mail.user", from);

        props.put("mail.smtp.socketFactory.port", "465");   
        props.put("mail.smtp.socketFactory.class", "javax.net.ssl.SSLSocketFactory");   
        props.put("mail.smtp.socketFactory.fallback", "false");   
        props.setProperty("mail.smtp.quitwait", "false");   

        Session session;

        if (authenticationRequired) {
            Authenticator auth = new SMTPAuthenticator();
            Log.d(LOG_TAG, "auth = "+auth);
            session = Session.getDefaultInstance(props, auth);
        } else {
            session = Session.getDefaultInstance(props, null);          
        }

        // get the default session
        session.setDebug(true);

        // create message
        Message msg = new javax.mail.internet.MimeMessage(session);

        // set from and to address
        try {
            msg.setFrom(new InternetAddress(from, from));
            msg.setReplyTo(new InternetAddress[]{new InternetAddress(from,from)});
        } catch (Exception e) {
            msg.setFrom(new InternetAddress(from));
            msg.setReplyTo(new InternetAddress[]{new InternetAddress(from)});
        }

        // set send date
        msg.setSentDate(Calendar.getInstance().getTime());

        // parse the recipients TO address
        java.util.StringTokenizer st = new java.util.StringTokenizer(toList, ",");
        int numberOfRecipients = st.countTokens();

        javax.mail.internet.InternetAddress[] addressTo = new javax.mail.internet.InternetAddress[numberOfRecipients];

        int i = 0;
        while (st.hasMoreTokens()) {
            addressTo[i++] = new javax.mail.internet.InternetAddress(st
                    .nextToken());
        }
        msg.setRecipients(javax.mail.Message.RecipientType.TO, addressTo);

        // parse the replyTo addresses
        if (replyToList != null && !"".equals(replyToList)) {
            st = new java.util.StringTokenizer(replyToList, ",");
            int numberOfReplyTos = st.countTokens();
            javax.mail.internet.InternetAddress[] addressReplyTo = new javax.mail.internet.InternetAddress[numberOfReplyTos];
            i = 0;
            while (st.hasMoreTokens()) {
                addressReplyTo[i++] = new javax.mail.internet.InternetAddress(
                        st.nextToken());
            }
            msg.setReplyTo(addressReplyTo);
        }

        // parse the recipients CC address
        if (ccList != null && !"".equals(ccList)) {
            st = new java.util.StringTokenizer(ccList, ",");
            int numberOfCCRecipients = st.countTokens();

            javax.mail.internet.InternetAddress[] addressCC = new javax.mail.internet.InternetAddress[numberOfCCRecipients];

            i = 0;
            while (st.hasMoreTokens()) {
                addressCC[i++] = new javax.mail.internet.InternetAddress(st
                        .nextToken());
            }

            msg.setRecipients(javax.mail.Message.RecipientType.CC, addressCC);
        }

        // parse the recipients BCC address
        if (bccList != null && !"".equals(bccList)) {
            st = new java.util.StringTokenizer(bccList, ",");
            int numberOfBCCRecipients = st.countTokens();

            javax.mail.internet.InternetAddress[] addressBCC = new javax.mail.internet.InternetAddress[numberOfBCCRecipients];

            i = 0;
            while (st.hasMoreTokens()) {
                addressBCC[i++] = new javax.mail.internet.InternetAddress(st
                        .nextToken());
            }

            msg.setRecipients(javax.mail.Message.RecipientType.BCC, addressBCC);
        }

        msg.setSubject(subject);
        Multipart mp = new MimeMultipart("related");

        // set body message
        MimeBodyPart bodyMsg = new MimeBodyPart();
        bodyMsg.setText(txtBody);
        mp.addBodyPart(bodyMsg);

        msg.setContent(mp);

        // send it
        try {
            Address[] fromAddressArray = msg.getFrom();
            for(Address address : fromAddressArray)
            {
                Log.d(LOG_TAG,"from = " + address.toString()+", ");
            }

            Address[] recipientAddressArray = msg.getAllRecipients();
            for(Address address : recipientAddressArray)
            {
                Log.d(LOG_TAG,"recipient = " + address.toString()+", ");
            }

            Address[] replyToAddressArray = msg.getReplyTo();
            for(Address address : replyToAddressArray)
            {
                Log.d(LOG_TAG,"replyTo = " + address.toString()+", ");
            }

            javax.mail.Transport.send(msg);
            return true;
        } catch (Exception e) {
            Log.e(LOG_TAG, e.getMessage());
            e.printStackTrace();
        }
        return false;
    }

    /**
     * SimpleAuthenticator is used to do simple authentication when the SMTP
     * server requires it.
     */
    private static class SMTPAuthenticator extends javax.mail.Authenticator {

        @Override
        protected PasswordAuthentication getPasswordAuthentication() {

            String username = "%MyUserId%@gmail.com";
            String password = "%Mypassword%";

            return new PasswordAuthentication(username, password);
        }
    }

    public String getToList() {
        return toList;
    }

    public void setToList(String toList) {
        this.toList = toList;
    }

    public String getCcList() {
        return ccList;
    }

    public void setCcList(String ccList) {
        this.ccList = ccList;
    }

    public String getBccList() {
        return bccList;
    }

    public void setBccList(String bccList) {
        this.bccList = bccList;
    }

    public String getSubject() {
        return subject;
    }

    public void setSubject(String subject) {
        this.subject = subject;
    }

    public void setFrom(String from) {
        this.from = from;
    }

    public void setTxtBody(String body) {
        this.txtBody = body;
    }

    public void setHtmlBody(String body) {
        this.htmlBody = body;
    }

    public String getReplyToList() {
        return replyToList;
    }

    public void setReplyToList(String replyToList) {
        this.replyToList = replyToList;
    }

    public boolean isAuthenticationRequired() {
        return authenticationRequired;
    }

    public void setAuthenticationRequired(boolean authenticationRequired) {
        this.authenticationRequired = authenticationRequired;
    }

} 
```

Gmail 发件人：

```
public class GMailSender extends javax.mail.Authenticator {

    private static final String LOG_TAG = "GmailSenderService";
    private String mailhost = "smtp.gmail.com"; 
    private String popMailHost = "pop.gmail.com";
    private String user;   
    private String password;   
    private Session session;   

    static {   
        Security.addProvider(new JSSEProvider());   
    }  

    public GMailSender(String user, String password) {   
        this.user = user;   
        this.password = password;   

        Properties props = new Properties();   
        props.setProperty("mail.transport.protocol", "smtp");   
        props.setProperty("mail.host", mailhost);   
        props.put("mail.smtp.auth", "true");   
        props.put("mail.smtp.port", "465");   
        props.put("mail.smtp.socketFactory.port", "465");   
        props.put("mail.smtp.socketFactory.class",   
                "javax.net.ssl.SSLSocketFactory");   
        props.put("mail.smtp.socketFactory.fallback", "false");   
        props.setProperty("mail.smtp.quitwait", "false");   

        session = Session.getDefaultInstance(props, this);
        session.setDebug(true);
    }   

    protected PasswordAuthentication getPasswordAuthentication() {   
        return new PasswordAuthentication(user, password);   
    }   

    public synchronized void sendMail(String subject, String body, String sender, String recipients) throws Exception {   
        try{
        MimeMessage message = new MimeMessage(session);   
        DataHandler handler = new DataHandler(new ByteArrayDataSource(body.getBytes(), "text/plain"));   
        message.setSender(new InternetAddress(sender));   
        message.setSubject(subject);   
        message.setDataHandler(handler);   
        if (recipients.indexOf(',') > 0)   
            message.setRecipients(Message.RecipientType.TO, InternetAddress.parse(recipients));   
        else  
            message.setRecipient(Message.RecipientType.TO, new InternetAddress(recipients));

        Address[] fromAddressArray = message.getFrom();
        for(Address address : fromAddressArray)
        {
            Log.d(LOG_TAG,"from = " + address.toString()+", ");
        }

        Address[] recipientAddressArray = message.getAllRecipients();
        for(Address address : recipientAddressArray)
        {
            Log.d(LOG_TAG,"recipient = " + address.toString()+", ");
        }

        Address[] replyToAddressArray = message.getReplyTo();
        for(Address address : replyToAddressArray)
        {
            Log.d(LOG_TAG,"replyTo = " + address.toString()+", ");
        }

        Transport.send(message);   
        }catch(Exception e){

        }
    }   

    public class ByteArrayDataSource implements DataSource {   
        private byte[] data;   
        private String type;   

        public ByteArrayDataSource(byte[] data, String type) {   
            super();   
            this.data = data;   
            this.type = type;   
        }   

        public ByteArrayDataSource(byte[] data) {   
            super();   
            this.data = data;   
        }   

        public void setType(String type) {   
            this.type = type;   
        }   

        public String getContentType() {   
            if (type == null)   
                return "application/octet-stream";   
            else  
                return type;   
        }   

        public InputStream getInputStream() throws IOException {   
            return new ByteArrayInputStream(data);   
        }   

        public String getName() {   
            return "ByteArrayDataSource";   
        }   

        public OutputStream getOutputStream() throws IOException {   
            throw new IOException("Not Supported");   
        }   
    }   
} 
```

原木猫：

```
08-15 00:04:23.676: D/EmailService(522): -------On create called-------
08-15 00:04:23.686: D/EmailService(522): -----Inside On Start Command-----
08-15 00:04:23.686: D/MailService(522): Inside Send !
08-15 00:04:23.706: D/MailService(522): auth = com.pack.android.other.MailService$SMTPAuthenticator@40518f80
08-15 00:04:23.716: I/System.out(522): DEBUG: setDebug: JavaMail version 1.4.1
08-15 00:04:23.776: D/MailService(522): from = "24adithya@gmail.com" <24adithya@gmail.com>, 
08-15 00:04:23.776: D/MailService(522): recipient = 24adithya@gmail.com, 
08-15 00:04:23.776: D/MailService(522): recipient = rnyn@rediffmail.com, 
08-15 00:04:23.776: D/MailService(522): replyTo = "24adithya@gmail.com" <24adithya@gmail.com>, 
08-15 00:04:23.896: I/System.out(522): DEBUG: getProvider() returning javax.mail.Provider[TRANSPORT,smtp,com.sun.mail.smtp.SMTPTransport,Sun Microsystems, Inc.,1.4.1]
08-15 00:04:23.986: I/System.out(522): DEBUG SMTP: useEhlo true, useAuth true
08-15 00:04:24.001: I/System.out(522): DEBUG SMTP: useEhlo true, useAuth true
08-15 00:04:24.006: I/System.out(522): DEBUG SMTP: trying to connect to host "smtp.gmail.com", port 465, isSSL false
08-15 00:04:25.226: I/System.out(522): 220 mx.google.com ESMTP fu4sm8557775igc.4
08-15 00:04:25.226: I/System.out(522): DEBUG SMTP: connected to host "smtp.gmail.com", port: 465
08-15 00:04:25.246: I/System.out(522): EHLO localhost
08-15 00:04:25.566: I/System.out(522): 250-mx.google.com at your service, [117.219.113.96]
08-15 00:04:25.566: I/System.out(522): 250-SIZE 35882577
08-15 00:04:25.566: I/System.out(522): 250-8BITMIME
08-15 00:04:25.566: I/System.out(522): 250-AUTH LOGIN PLAIN XOAUTH
08-15 00:04:25.566: I/System.out(522): 250 ENHANCEDSTATUSCODES
08-15 00:04:25.566: I/System.out(522): DEBUG SMTP: Found extension "SIZE", arg "35882577"
08-15 00:04:25.566: I/System.out(522): DEBUG SMTP: Found extension "8BITMIME", arg ""
08-15 00:04:25.566: I/System.out(522): DEBUG SMTP: Found extension "AUTH", arg "LOGIN PLAIN XOAUTH"
08-15 00:04:25.576: I/System.out(522): DEBUG SMTP: Found extension "ENHANCEDSTATUSCODES", arg ""
08-15 00:04:25.576: I/System.out(522): DEBUG SMTP: Attempt to authenticate
08-15 00:04:25.576: I/System.out(522): AUTH LOGIN
08-15 00:04:26.085: I/System.out(522): 334 VXNlcm5hbWU6
08-15 00:04:26.085: I/System.out(522): MjRhZGl0aHlhQGdtYWlsLmNvbQ==
08-15 00:04:26.408: I/System.out(522): 334 UGFzc3dvcmQ6
08-15 00:04:26.408: I/System.out(522): I2EsZmF3a2VzKzE=
08-15 00:04:27.365: I/System.out(522): 235 2.7.0 Accepted
08-15 00:04:27.386: I/System.out(522): DEBUG SMTP: use8bit false
08-15 00:04:27.488: I/System.out(522): MAIL FROM:<24adithya@gmail.com>
08-15 00:04:27.991: I/System.out(522): 250 2.1.0 OK fu4sm8557775igc.4
08-15 00:04:27.996: I/System.out(522): RCPT TO:<24adithya@gmail.com>
08-15 00:04:28.326: I/System.out(522): 250 2.1.5 OK fu4sm8557775igc.4
08-15 00:04:28.326: I/System.out(522): RCPT TO:<rnyn@rediffmail.com>
08-15 00:04:28.705: I/System.out(522): 250 2.1.5 OK fu4sm8557775igc.4
08-15 00:04:28.705: I/System.out(522): DEBUG SMTP: Verified Addresses
08-15 00:04:28.705: I/System.out(522): DEBUG SMTP:   24adithya@gmail.com
08-15 00:04:28.736: I/System.out(522): DEBUG SMTP:   rnyn@rediffmail.com
08-15 00:04:28.736: I/System.out(522): DATA
08-15 00:04:29.586: I/System.out(522): 354  Go ahead fu4sm8557775igc.4
08-15 00:04:29.656: I/System.out(522): Date: Wed, 15 Aug 2012 00:04:23 +0530 (GMT+05:30)
08-15 00:04:29.656: I/System.out(522): From: "24adithya@gmail.com" <24adithya@gmail.com>
08-15 00:04:29.656: I/System.out(522): Reply-To: "24adithya@gmail.com" <24adithya@gmail.com>
08-15 00:04:29.656: I/System.out(522): To: 24adithya@gmail.com, rnyn@rediffmail.com
08-15 00:04:29.656: I/System.out(522): Message-ID: <1079391960.1.1344969263899.JavaMail.javamailuser@localhost>
08-15 00:04:29.656: I/System.out(522): Subject: Test
08-15 00:04:29.656: I/System.out(522): MIME-Version: 1.0
08-15 00:04:29.656: I/System.out(522): Content-Type: multipart/related; 
08-15 00:04:29.656: I/System.out(522):  boundary="----=_Part_0_1079137608.1344969263768"
08-15 00:04:29.656: I/System.out(522): 
08-15 00:04:29.656: I/System.out(522): ------=_Part_0_1079137608.1344969263768
08-15 00:04:29.656: I/System.out(522): Content-Type: text/plain; charset=us-ascii
08-15 00:04:29.656: I/System.out(522): Content-Transfer-Encoding: 7bit
08-15 00:04:29.656: I/System.out(522): 
08-15 00:04:29.656: I/System.out(522): Hi This is 5554 from Mail Service
08-15 00:04:29.656: I/System.out(522): ------=_Part_0_1079137608.1344969263768--
08-15 00:04:29.666: I/System.out(522): .
08-15 00:04:31.030: I/System.out(522): 250 2.0.0 OK 1344969267 fu4sm8557775igc.4
08-15 00:04:31.035: I/System.out(522): QUIT
08-15 00:04:31.055: D/EmailService(522): true
08-15 00:04:31.075: I/System.out(522): DEBUG: setDebug: JavaMail version 1.4.1
08-15 00:04:31.095: D/GmailSenderService(522): from = 24adithya@gmail.com, 
08-15 00:04:31.105: D/GmailSenderService(522): recipient = 24adithya@gmail.com, 
08-15 00:04:31.115: D/GmailSenderService(522): replyTo = 24adithya@gmail.com, 
08-15 00:04:31.145: I/System.out(522): DEBUG: getProvider() returning javax.mail.Provider[TRANSPORT,smtp,com.sun.mail.smtp.SMTPTransport,Sun Microsystems, Inc.,1.4.1]
08-15 00:04:31.145: I/System.out(522): DEBUG SMTP: useEhlo true, useAuth true
08-15 00:04:31.156: I/System.out(522): DEBUG SMTP: useEhlo true, useAuth true
08-15 00:04:31.156: I/System.out(522): DEBUG SMTP: trying to connect to host "smtp.gmail.com", port 465, isSSL false
08-15 00:04:32.478: I/System.out(522): 220 mx.google.com ESMTP bp8sm22904456igb.12
08-15 00:04:32.498: I/System.out(522): DEBUG SMTP: connected to host "smtp.gmail.com", port: 465
08-15 00:04:32.498: I/System.out(522): EHLO localhost
08-15 00:04:32.905: I/System.out(522): 250-mx.google.com at your service, [117.219.113.96]
08-15 00:04:32.905: I/System.out(522): 250-SIZE 35882577
08-15 00:04:32.905: I/System.out(522): 250-8BITMIME
08-15 00:04:32.925: I/System.out(522): 250-AUTH LOGIN PLAIN XOAUTH
08-15 00:04:32.925: I/System.out(522): 250 ENHANCEDSTATUSCODES
08-15 00:04:32.960: I/System.out(522): DEBUG SMTP: Found extension "SIZE", arg "35882577"
08-15 00:04:32.960: I/System.out(522): DEBUG SMTP: Found extension "8BITMIME", arg ""
08-15 00:04:32.960: I/System.out(522): DEBUG SMTP: Found extension "AUTH", arg "LOGIN PLAIN XOAUTH"
08-15 00:04:32.960: I/System.out(522): DEBUG SMTP: Found extension "ENHANCEDSTATUSCODES", arg ""
08-15 00:04:32.960: I/System.out(522): DEBUG SMTP: Attempt to authenticate
08-15 00:04:32.960: I/System.out(522): AUTH LOGIN
08-15 00:04:33.527: I/System.out(522): 334 VXNlcm5hbWU6
08-15 00:04:33.527: I/System.out(522): MjRhZGl0aHlhQGdtYWlsLmNvbQ==
08-15 00:04:33.915: I/System.out(522): 334 UGFzc3dvcmQ6
08-15 00:04:33.915: I/System.out(522): I2EsZmF3a2VzKzE=
08-15 00:04:34.785: I/System.out(522): 235 2.7.0 Accepted
08-15 00:04:34.807: I/System.out(522): DEBUG SMTP: use8bit false
08-15 00:04:34.815: I/System.out(522): MAIL FROM:<24adithya@gmail.com>
08-15 00:04:35.239: I/System.out(522): 250 2.1.0 OK bp8sm22904456igb.12
08-15 00:04:35.245: I/System.out(522): RCPT TO:<24adithya@gmail.com>
08-15 00:04:35.635: I/System.out(522): 250 2.1.5 OK bp8sm22904456igb.12
08-15 00:04:35.635: I/System.out(522): DEBUG SMTP: Verified Addresses
08-15 00:04:35.646: I/System.out(522): DEBUG SMTP:   24adithya@gmail.com
08-15 00:04:35.666: I/System.out(522): DATA
08-15 00:04:36.539: I/System.out(522): 354  Go ahead bp8sm22904456igb.12
08-15 00:04:36.605: I/System.out(522): Sender: 24adithya@gmail.com
08-15 00:04:36.605: I/System.out(522): To: 24adithya@gmail.com
08-15 00:04:36.605: I/System.out(522): Message-ID: <1079897912.2.1344969271138.JavaMail.javamailuser@localhost>
08-15 00:04:36.605: I/System.out(522): Subject: Test Subject
08-15 00:04:36.605: I/System.out(522): MIME-Version: 1.0
08-15 00:04:36.605: I/System.out(522): Content-Type: text/plain; charset=us-ascii
08-15 00:04:36.605: I/System.out(522): Content-Transfer-Encoding: 7bit
08-15 00:04:36.605: I/System.out(522): 
08-15 00:04:36.605: I/System.out(522): Hi, This is 5554 from Gmail Sender
08-15 00:04:36.605: I/System.out(522): .
08-15 00:04:37.896: I/System.out(522): 250 2.0.0 OK 1344969274 bp8sm22904456igb.12
08-15 00:04:37.896: I/System.out(522): QUIT 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T09:04:32.913

你得到的原因

```
android.content.ActivityNotFoundException: No Activity found to handle Intent { 
    act=android.intent.action.SENDTO flg=0x10000004 (has extras) } 
```

是因为您从未在 Intent 中设置**数据。**Android 会尝试找到可以处理“SENDTO”操作和您提供的数据的活动。但是您没有提供任何数据，因此无法找到合适的活动。你有这个代码：

```
Intent emailIntent = new Intent(Intent.ACTION_SENDTO);
emailIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
emailIntent.addFlags(Intent.FLAG_FROM_BACKGROUND);
//  emailIntent.setType("plain/text");
emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL,
            new String[] { "24adithya@gmail.com" });
emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT,
            "Email from Intent");
emailIntent.putExtra(android.content.Intent.EXTRA_TEXT,
            "Hi, This is 5554 from intent");
//  getApplicationContext().startActivity(Intent.createChooser(emailIntent, "Send mail..."));
Log.d(LOG_TAG, "context = " + getApplicationContext());
startActivity(emailIntent); 
```

但您需要致电`emailIntent.setdataAndType()`或`emailIntent.setData()1 and`发送电子邮件Intent.setType()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T18:22:59.587

查看 Log 中的这一行：

> android.util.AndroidRuntimeException：从 Activity 上下文外部调用 startActivity() 需要 FLAG_ACTIVITY_NEW_TASK 标志。这真的是你想要的吗？

这清楚地表明您需要 FLAG_ACTIVITY_NEW_TASK 才能从服务启动 Activity。所以添加

```
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
intent.addFlags(Intent.FLAG_FROM_BACKGROUND); 
```

从服务开始活动

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T20:07:50.793

采用`FLAG_ACTIVITY_NEW_TASK`

```
Intent myIntent = new Intent(getBaseContext(), myActivity.class);
myIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK|Intent.FLAG_FROM_BACKGROUND);
getApplication().startActivity(myIntent); 
```

# cuda - CUDA Fermi 的架构：内存结构

> ID：11916382
> 
> 赞同：0
> 
> 时间：2012-08-11T18:06:16.443
> 
> 标签：cuda, global, shared, tesla

我有一个关于 CUDA Fermi 架构的问题：我在某处读到 Fermi 架构中全局内存的访问速度就像共享内存一样快，只是因为现在它们使用统一寻址。

因此，我确实可以访问全局内存上的数据而没有（大）延迟（与“pre-Fermi”GPU 不同）？

知道这一点对我来说非常重要，因为我正在为没有它的 Nvidia Tesla GPU 编写代码（它在大学的实验室里，我在夏天无法访问它......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T22:47:42.733

这不是真的。与共享内存访问相比，Fermi 上的全局内存访问相对较长。但是，由于缓存，您可以直接命中缓存以减少延迟。这在不太理想的内存访问模式（例如稍微未对齐的访问）中特别有用。

统一内存寻址是完全不同的东西，与上述无关。如果给定的内存指针指向全局或共享（甚至映射固定主机或其他 GPU）内存，统一内存寻址允许 GPU 在运行时扣除。在 pre-Fermi 卡上，内存类型必须在编译时可推断。

# backbone.js - 使用backbonejs而不改变window.location

> ID：11916385
> 
> 赞同：1
> 
> 时间：2012-08-11T18:06:26.067
> 
> 标签：backbone.js

我正在使用backbonejs 为gmail 编写一个chrome 扩展。此扩展将小部件附加到 gmail.com 上电子邮件中的 div（如 gmail 上下文小工具）。要导航到特定路线，我使用

```
appRouter.navigate('index', {trigger:true, replace: true}); 
```

这实际上改变了浏览器位置，即[https://mail.google.com/mail/](https://mail.google.com/mail/)变为[https://mail.google.com/mail/#index](https://mail.google.com/mail/#index)。有没有办法可以禁用它？因为我的小部件不应该弄乱浏览器位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T18:21:22.730

我刚刚意识到我不应该扩展 Backbone.Router.extend。然后我不会弄乱window.location。

# php - 变量不断返回NULL，php

> ID：11916390
> 
> 赞同：2
> 
> 时间：2012-08-11T18:06:53.230
> 
> 标签：php, zend-framework, sendmail

```
protected $_name = 'usertable';  //table name for database [Impt] Please change accordingly
protected $_temp;       

function resetPass($userid)
{
    $pass = new Application_Model_Register();
    $salt = $pass->generateSalt();
    $temp = $pass->generatePass();
    $this->_temp = (string) $temp;

    $data = array(
            'password' => hash("sha256", ($salt. $temp)),
            'salt' => $salt, //get salt from generateSalt()
    );

    //$auth= Zend_Auth::getInstance(); //declare zend_auth to get instance
    //$user= $auth->getIdentity(); //get identity of user
    //$userid   = $user->userid; //get userid of user

    echo $temp;

    $this->update($data, 'userid = '. (int)($userid));
    return $this;
}

function getTemp()
{
    return parent::$this->_temp;
} 
```

这是我在模型中的代码。我试图返回 $_temp 因此我做了 $this->temp = $temp. 我的问题是它返回NULL。

```
public function sendEmail($email)
{

    $email = $_POST['email'];

    $userid = '30';

    $reset = new Application_Model_DbTable_Register();
    $reset->resetPass($userid);

    $pswd = new Application_Model_DbTable_Register();
    $pswd = $pswd->getTemp();
    var_dump($pswd);

    $mail = new Zend_Mail();

    $mail->setFrom('swap.test@yahoo.com.sg', 'Inexorable Beauty');
    $mail->addTo($email, $email);
    $mail->setSubject('Inexorable Beauty: Password Reset');
    $mail->setBodyText('Dear Customer,

            You have requested to reset your password.
            This is the temporary password: '.$pswd.'

            Please log in immediately and change your password.
            Thank You.

            Yours Sincerely,
            Inexorable Beauty');

    $mail->send();

    if($mail->send())
    {
        echo "Email successfully sent!";
    }
    else
    {
        echo "Email was not sent";
    }

} 
```

这是我的控制器代码。我正在尝试将临时密码发送到客户的电子邮件。我从我的模型中调用 getTemp() 函数来获取 passwd 字符串，但正如你所见，我做了 var_dump($pswd) 并且它一直返回 NULL。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T19:16:27.570

看起来您正在创建两个`DbTable_Register`对象，在第一个对象上调用 reset，而不是第二个对象，然后您试图从第二个对象获取临时密码。第二个不会有 temp 因为你没有调用`resetPass`第二个对象。

尝试改变：

```
$reset = new Application_Model_DbTable_Register();
$reset->resetPass($userid);

$pswd = new Application_Model_DbTable_Register();
$pswd = $pswd->getTemp();
var_dump($pswd); 
```

至：

```
$reset = new Application_Model_DbTable_Register();
$reset->resetPass($userid);
$pswd  = $reset->getTemp();

var_dump($pswd); 
```

看看这是否有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T18:11:48.743

你正在使用

```
 return parent::$this->_temp; 
```

是否`$_temp`存在于父对象中？看起来您是在 THIS 对象中定义它，并且它不存在于您（希望）继承的父对象中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T19:35:10.543

**首先**：检查**Application_Model_Register::generatePass();** 功能

**第二**：在resetPass功能上删除这个：

```
$this->_temp = (string) $temp; 
```

并添加：

```
if (empty($temp)){
    $this->_temp = (string) $temp;
} 
```

它是否返回**某个值？**如果不是，则*generatePass()*函数是**错误**的。

**第三**：在您的控制器上

```
$reset = new Application_Model_DbTable_Register();
$reset->resetPass($userid);
$pswd = new Application_Model_DbTable_Register();
$pswd = $pswd->getTemp();
var_dump($pswd); 
```

不要制作像**$reset**和**$pswd**这样的双重对象。

尝试 ：

```
$reset = new Application_Model_DbTable_Register();
$pswd = $reset->resetPass($userid)->getTemp();
echo "<pre>";
print_r($pswd); 
```

如我错了请纠正我。

# c# - 用于不同大小文本的 cookie 切割器输出的 C# 格式化文本

> ID：11916393
> 
> 赞同：0
> 
> 时间：2012-08-11T18:07:25.067
> 
> 标签：c#, string-formatting, command-prompt

有没有一种格式化文本的方法，我试图让它看起来尽可能像一个工资单，但看到像姓名/地址这样的东西可能因人而异……手动格式化不适合每个人。

我认为在 CLI 使用了 2 年之后，可能会有一个解决方案来解决这个问题。

目前该程序按我的意愿运行。它只是我试图微调的输出。

```
using System;
using System.IO;

namespace Proj10
{
class Program
{
    const int ARRAY_TWO = 2;
    static void Main()
    {
        int count = 0;
        Employee[] emp = new Employee[10];
        //emp[0] = new Employee();
        //emp[0].SetEmpNum(1);

        string environment = System.Environment.GetFolderPath
        (System.Environment.SpecialFolder.Personal) + "\\";

        Console.WriteLine("Enter a file name in My Documents: ");
        string input = Console.ReadLine();

        string path = environment + input;

        StreamReader myFile = new StreamReader(path);

        bool check = true;

        do
        {

            if (myFile.EndOfStream)
            {
                break;
            }
            int num = int.Parse(myFile.ReadLine());
            string name = myFile.ReadLine();
            string address = myFile.ReadLine();
            string hourNworked = myFile.ReadLine();
            double[] values = new double[ARRAY_TWO];
            sort(hourNworked, ref values);

            emp[count] = new Employee();
            emp[count].SetEmpNum(num);
            emp[count].SetEmpName(name);
            emp[count].SetEmpAddress(address);
            emp[count].SetEmpHrlyPay(values[0]);
            emp[count].SetEmpHrsWrked(values[1]);

            //while count < 10 && !myfile.EOF();

            //print loop using count 
            //emp[0].GetEmpNum();
            //emp[0].CalcSalary();

            /*Integer[] number = new Integer[5];
            for (int i = 0; i < 5; i++)
                number[i] = new Integer(i);
            for (int i = 0; i < 5; i++)
                Console.WriteLine(number[i].GetValue());
            */

            count++;

        } while (count < 10);

        Console.WriteLine("\n\nAuthor: Daniel Demers");
        Console.WriteLine("CS 1400 X01\n");

        for (int i = 0; i < 2; i++)
        {

            Console.WriteLine("|-----------------------------------------------------------------------|");
            Console.WriteLine("| Employee Number  {0}                                                    |", emp[i].GetEmpNum());
            Console.WriteLine("|-----------------------------------------------------------------------|");
            Console.WriteLine("| Employee Name:   {0}                                         |", emp[i].GetEmpName());
            Console.WriteLine("| Emplyee Address: {0}                                             |   |", emp[i].GetEmpAddress());
            Console.WriteLine();
            Console.WriteLine();
            Console.WriteLine(emp[i].CalcSalary());
        }

        Console.ReadLine();
    }

    public static void sort(string hourNworked, ref double[] values)
    {
        char[] rules = { ' ' };
        string[] splitArray = hourNworked.Split(rules);
        values[0] = double.Parse(splitArray[0]);
        values[1] = double.Parse(splitArray[1]);
    }

    public class Employee
    {
        private int empNum;
        private string name;
        private string address;
        private double hrlyPay;
        private double hrsWrkd;
        private const double FED_TAX = .20;
        private const double STATE_TAX = .075;
        private double GROSS;
        private double overTime;
        private double overTimePay;
        private double overTimeHours;
        private double NET;
        private double regTime;
        private double fTaxAmount;
        private double sTaxAmount;

        public Employee()
        {
            empNum = 0;
        }

        public void SetEmpNum(int n)
        {
            empNum = n;
        }

        public int GetEmpNum()
        {
            return empNum;
        }
        public void SetEmpName(string n)
        {
            name = n;
        }
        public string GetEmpName()
        {
            return name;
        }
        public void SetEmpAddress(string a)
        {
            address = a;
        }
        public string GetEmpAddress()
        {
            return address;
        }
        public void SetEmpHrlyPay(double h)
        {
            hrlyPay = h;
        }
        public double GetEmpHrlyPay()
        {
            return hrlyPay;
        }
        public void SetEmpHrsWrked(double w)
        {
            hrsWrkd = w;
        }
        public double GetEmpHrsWrkd()
        {
            return hrsWrkd;
        }
        public double CalcSalary()
        {
            if (hrsWrkd > 40)
            {
                overTimeHours = hrsWrkd - 40;
                overTimePay = hrlyPay * 1.5;
                overTime = overTimePay * overTimeHours;
                regTime = (hrsWrkd - overTimeHours) * hrlyPay;
                GROSS = overTime + regTime;

                fTaxAmount = (regTime + overTime) * FED_TAX;
                sTaxAmount = (regTime + overTime) * STATE_TAX;

                NET = GROSS - (fTaxAmount + sTaxAmount);

                return NET;
            }
            else
            {
                regTime = hrlyPay * hrsWrkd;
                fTaxAmount = regTime * FED_TAX;
                sTaxAmount = regTime * STATE_TAX;

                NET = regTime - (fTaxAmount + sTaxAmount);

                return NET;
            }
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T18:12:52.617

它已经存在了很长一段时间，但我认为您正在寻找[`String.PadRight`](http://msdn.microsoft.com/en-us/library/34d75d7s.aspx). 有了它，您可以将所有琴弦填充到固定长度，然后一切都会对齐。

# linker - 由于 PIC，无法从程序集中的 x86-64 对象链接共享库

> ID：11916394
> 
> 赞同：4
> 
> 时间：2012-08-11T18:07:24.243
> 
> 标签：linker, 64-bit, x86-64, nasm, ld

我正在将共享库从 32 位移植到 64 位。它由一些程序集（为 NASM 编写）组成，这些程序集导出了几个过程和一些高级 C 胶水代码。我正在使用 NASM 2.10.01 和 GNU ld 2.22 的 64 位 Debian 机器上构建。

修复了所有的推送/弹出问题（推送寄存器的 32 位部分显然在 64 位模式下不起作用），我已经得到了要组装的对象，但现在我被链接阶段停止了。这是我的命令行 - 程序集：

`nasm -Ox -dPTC_ARCH=X64 -f elf64 particl.asm -o particlasm.o`

链接：

`ld -shared -lc -S -melf_x86_64 particlasm.o ptc_highlevel.o -o libparticlasm.so` （-lc 开关强制将标准 C 库链接到 - 我需要在汇编代码中使用它的一些函数）

但是，链接器失败并显示以下消息：

```
ld: particlasm.o: relocation R_X86_64_32 against `.text' can not be used when making a shared object; recompile with -fPIC
particlasm.o: could not read symbols: Bad value` 
```

我知道为什么 64 位系统需要 PIC；问题是，我确实在使用 PIC，如[NASM 手册](http://www.nasm.us/doc/)第 9.2 节所述。但是，在我看来，NASM 以某种方式没有在 ELF 符号表中将我的代码标记为 PIC，这导致链接器抗议，并且我在手册中找不到任何相关的命令行开关或指令来解决这个问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T19:41:37.933

我已经解决了！在我的情况下，搬迁是由于：

1）`libc`电话，我通过附加电话`wrt ..plt`来解决`libc`，例如`call rand wrt ..plt`，

2）对放置在代码中的常量的引用，这些常量需要从例如更改`push MASK_RGB`为`push ptr [rel MASK_RGB]`（`ptr`我自己的类型是给定平台的本机单词类型的别名）。

# html - div的背景颜色

> ID：11916396
> 
> 赞同：1
> 
> 时间：2012-08-11T18:07:49.307
> 
> 标签：html, css, background, css-float, nested

理想情况下，`<div id="main">`宽度应为 560 像素，高度为 100%，背景颜色为 #333333。然而，事实并非如此。简而言之，就像在刷新页面后一样，我可以看到背景颜色在那里，但是一旦页面完成加载，它就会消失。这让我觉得我的 CSS 中某处存在冲突，我只是不确定在哪里。我如何获得`<div id="main">`背景？这是我正在使用的：

```
HTML
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Parlour</title>
    <link rel="stylesheet" type="text/css" href="style.css" />
</head>

<body>
<div id="container">
    <header>
    <nav>
        <ul>
        <li><a href="#">ABOUT</a></li>
        <li><a href="#">SERVICES</a></li>
        <li><a href="#">GALLERY</a></li>
        <li><a href="#">PRODUCTS</a></li>
        <li><a href="#">GET IN TOUCH</a></li>
        </ul>
    </nav>
    </header>

    <div id="logo">
    <a href="#"><img src="img/parlour_side.png" alt="Parlour Salon logo" /></a>
    </div><!-- end logo -->

    <div id="main">
    <div class="brief">
        <h2><a href="#"><span>ABOUT PARLOUR</span></a></h2>
        <p>Parlour is blah blah blah.</p>    
        </div><!-- end brief -->
    <div class="brief">
        <h2><a href="#"><span>SERVICES</span></a></h2>
        <p>Parlour offers blah blah blah.</p>
    </div><!-- end brief -->
    <div class="brief">
        <h2><a href="#"><span>PRODUCTS</span></a></h2>
        <p>At Parlour, we believe blah blah blah.</p>
    </div><!-- end brief -->
    <div class="brief">
        <h2><a href="#"><span>GET IN TOUCH</span></a></h2>
        <p>1522 U Street NW<br/>Washington DC<br/>202-986-0080</p>
        <div class="social">
            <a href="#"><img src="img/facebook.png" alt="Parlour Facebook" /></a>
            <a href="#"><img src="img/twitter.png" alt="Parlour Twitter" /></a>
            <a href="#"><img src="img/youtube.png" alt="Parlour YouTube" /></a>
            <a href="#"><img src="img/yelp.png" alt="Parlour Yelp" /></a>
        </div><!-- end social -->
    </div><!-- end brief -->

    </div><!-- end main -->
</div><!-- end container -->
</body> 
```

CSS

```
/* Reset */

html, body, div, span, object, h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, address, code, img,
small, strong, dl, dt, dd, ol, ul, li
fieldset, form, label {
    background: url(img/background.jpg) no-repeat center center fixed; 
    background-size: cover;
    border: 0;
    font-size: 100%;
    margin: 0;
    outline: 0;
    padding: 0;
    vertical-align: baseline;
}

body {
    background: url('img/background.jpg');
    font-family: nevis-webfont;
    color: #ffffff;
}

ol, ul {
    list-style-type: none;
}

/* Type */

@font-face {
    font-family: nevis-webfont;
    src: url('type/nevis-webfont.eot');
    src: url('type/nevis-webfont.eot?#iefix') format('embedded-opentype'),
         url('type/nevis-webfont.woff') format('woff'),
         url('type/nevis-webfont.ttf') format('truetype'),
         url('type/nevis-webfont.svg#') format('svg');
    font-weight: normal;
    font-style: normal;
}

h1 {
    font-family: Didot, "Bodoni MT", "Century Schoolbook", "Niagara Solid", Utopia, Georgia, Times, "Times New Roman", serif;
    font-size: 125%;
    font-weight: normal;
    letter-spacing: 1px;
    line-height: 1.5;
    text-transform: uppercase;
}

h2 {
    font-family: Didot, "Bodoni MT", "Century Schoolbook", "Niagara Solid", Utopia, Georgia, Times, "Times New Roman", serif;
    font-size: 125%;
    font-weight: normal;
    line-height: 1.5;
}

h3 {
    font-family: nevis-webfont;
    font-size: 75%;
    font-weight: normal;
    letter-spacing: 1px;
    line-height: 1.5;
    text-transform: uppercase;
}

p {
    font-family: nevis-webfont;
    font-size: 75%;
    line-height: 1.5;
}

a {
    text-decoration: none;
}

a:hover {
    text-decoration: underline;
}

/* Basic */

#container {
    width: 100%;
}

#logo {
    float: left;
    margin-left: 100px;
    margin-top: 200px;
}

/* Header */

nav {
    background: #333333;
    height: 35px;
    width: 100%;
}

nav ul {
    background: #333333;
    margin-left: 220px;
    padding-bottom: 5px;
    padding-top: 5px;
}

nav ul li {
    background: #333333;
    display: inline;
}

nav ul li a {
    background: #333333;
    color: #ffffff;
    font-family: nevis-webfont;
    font-size: 75%;
    letter-spacing: 1px;
    text-decoration: none;
    margin: 0 16px;
}

/* Main */

#main {
    background-color: #333333;
    height: 100%;
    width: 560px;
    margin-left: 230px;
    margin-top: 200px;
    overflow: hidden;
}

#main .brief h2 span {
    color: #ffffff;
    text-decoration: none;
} 
```

[JSFiddle](http://jsfiddle.net/dA2EY/)虽然这不是我所看到的，所以这里是本地站点的屏幕截图.. ![图片](../Images/9f083d4c783827cdf9ebd2391470d45e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T18:34:00.087

您的 CSS 重置不正确。CSS 重置应该只用于删除选定元素的一些默认样式，但您也可以应用您只想添加到 HTML（而不是每个`div`等）的背景图像。只需从 CSS 中删除背景属性并将其移动为仅使用您的 HTML，您就可以开始使用了。

```
html { background: url(img/background.jpg) no-repeat center center fixed; 
        background-size: cover; }

html, body, div, span, object, h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, address, code, img,
small, strong, dl, dt, dd, ol, ul, li
fieldset, form, label {
    /* Other reset properties */
} 
```

[这是小提琴（使用的另一个背景图像）。](http://jsfiddle.net/dA2EY/2/)

# java - Java：如何使用 JButton 打开 JOptionPane

> ID：11916401
> 
> 赞同：1
> 
> 时间：2012-08-11T18:08:21.920
> 
> 标签：java, swing, nullpointerexception, jbutton, joptionpane

我得到了另一个问题，该问题将转到“Java noobs”类别
这次我的问题如下：
我需要人能够单击按钮，它会显示 JOptionPane。但是，一旦我单击按钮，它就会给我例外。

我的按钮：

```
 inputChar = new JButton("Guess Letter");
    add(inputChar);
    this.add(Box.createVerticalStrut(10));
    inputChar.setAlignmentX(Component.CENTER_ALIGNMENT);
    inputChar.addActionListener(this);

public void actionPerformed(ActionEvent e) {

    String action = e.getActionCommand();

    if (action == "Guess Letter"){
        gl.getChar();
    } 
```

现在我的 getChar() 方法在不同的类中，如下所示：

```
public String getChar(){
    inChar = JOptionPane.showInputDialog("Please enter letter (a-z)");
    if (inChar.length() > 1){
        JOptionPane.showMessageDialog(null, "Your Input is incorred, please input char", "Input warning", JOptionPane.WARNING_MESSAGE);
    }
    return inChar;
} 
```

异常触发上线`gl.getChar();`

例外情况如下：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at Interface.ButtonPanel$1.actionPerformed(ButtonPanel.java:34) 
```

任何想法如何解决它？

**编辑注：**

我设法用 Loagans 小费解决了这个问题。基本上在 GuessedLetters 类中，我只设置构造函数 setter/getter，在动作监听器中，我放入设置它们的方法。

使用以下 ActionListener 解决了问题：

```
 if (action == "Guess Letter"){
        inputChar = JOptionPane.showInputDialog("Please enter letter (a-z)");
        if (inputChar.length() > 1){
            JOptionPane.showMessageDialog(null, "Your Input is incorred, please input char", "Input warning", JOptionPane.WARNING_MESSAGE);
        }else{
        GuessedLetters glr = new GuessedLetters(inputChar);
        glr.setInChar(inputChar);
        //For testing purposes
        System.out.println(glr.getInChar());
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T18:51:51.753

看起来您的主类可能正在扩展另一个类，因为您可以调用 this.actionPerfomed。这意味着对主类的任何操作都会触发该方法。相反，您应该做的是将 actionListener 添加到您的特定按钮。

您需要更改操作 == 比较以使用 String .equals 方法，因为您正在比较字符串值。那 == 可能会在启动时触发窗口，因为这两个值都是空的，所以它可能会显示带有空指针异常的窗口？

然后，您将如何将动作侦听器添加到用户按下的特定按钮。

```
 viewInsertFileButton.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(final java.awt.event.ActionEvent evt) {
            displayJOptionPaneHere();
        }
    }); 
```

因此，您只想显示 JOptionPane 并在该特定按钮上执行操作，而不是在主应用程序上执行任何 actionPerformed。

我认为这是导致空指针异常的原因。

```
 if (inChar.length() > 1){ 
```

在调用它之前，请检查 inChar != null 是否。您可以将代码包装在其中，因此它仅在开始时不为 null 时才调用 if (inChar.length() > 1。这是我一直遇到的常见问题，在 null 上调用方法目的。

将其更改为这样，您的异常应该消失。

```
public String getChar(){
    inChar = JOptionPane.showInputDialog("Please enter letter (a-z)");
    if (inChar != null) {
       if (inChar.length() > 1){
           JOptionPane.showMessageDialog(null, "Your Input is incorred, please input char", "Input warning", JOptionPane.WARNING_MESSAGE);
       }
     } else {
          inChar = ""
     }

    return inChar;
} 
```

你也可以在这里保护 gl 不为空。

```
if (gl == null) {
   gl = new gl();
}

    gl.getChar(); 
```

# java - SQLite 数据库浏览器仅显示第一行

> ID：11916403
> 
> 赞同：0
> 
> 时间：2012-08-11T18:08:32.840
> 
> 标签：java, android, sqlite, ddms

我现在正在实现一个 Android 应用程序。我在应用程序中创建了一个数据库，并尝试检查它 DDMS 和 SQLite Database Browser 2.0 b1。

我创建的表有几行（我可以在我的程序中通过 System.out.println 检查），但 SQLite 数据库浏览器中只显示第一行。

DDMS中显示的数据库文件的最新更新时间是正确的。

请让我知道如何解决此问题。

```
public void onCreate(Bundle savedInstanceState) {

        StrictMode.setThreadPolicy(new StrictMode.ThreadPolicy.Builder()
                .permitAll().build());

        super.onCreate(savedInstanceState);
        setContentView(R.layout.twitterdata);

        helper = new CreateTableHelper(TwitterData.this);

        db = helper.getWritableDatabase();

        mSharedPreferences = getSharedPreferences(Const.PREFERENCE_NAME,
                MODE_PRIVATE);
        /**
         * Handle OAuth Callback
         */
        Uri uri = getIntent().getData();
        if (uri != null && uri.toString().startsWith(Const.CALLBACK_URL)) {
            String verifier = uri
                    .getQueryParameter(Const.IEXTRA_OAUTH_VERIFIER);
            try {
                AccessToken accessToken = twitter.getOAuthAccessToken(
                        requestToken, verifier);

                User user = twitter.verifyCredentials();

                List<Status> statuses = twitter.getUserTimeline(user
                        .getScreenName());

                for (Status status : statuses) {
                    String tweet = status.getText();
                    String[] words = tweet.split(" ");

                    for (int i = 0; i < words.length; i++) {
                        if (words[i].length() > 1) {
                            String requestURL = "http://en.wikipedia.org/w/api.php?action=query&prop=categories&format=json&clshow=!hidden&cllimit=10&titles="
                                    + words[i];

                            URL wikiRequest = new URL(requestURL);
                            URLConnection connection = wikiRequest
                                    .openConnection();
                            connection.setDoOutput(true);

                            Scanner scanner = new Scanner(
                                    wikiRequest.openStream());
                            String response = scanner.useDelimiter("\\Z")
                                    .next();
                            JSONObject json = Util.parseJson(response);
                            JSONObject query = json.getJSONObject("query");
                            JSONObject pages_jsn = query.getJSONObject("pages");
                            String pages = query.getString("pages");

                            int dqm_cnt = 0;
                            int dqm_while = 0;
                            String page_id_str = "";
                            Character dq = pages.charAt(0);
                            while (dqm_cnt < 2) {
                                Character tmp = pages.charAt(dqm_while);
                                if (tmp.equals(dq)) {
                                    dqm_cnt++;
                                }
                                try {
                                    Integer.parseInt(tmp.toString());
                                    page_id_str += tmp;
                                } catch (NumberFormatException e) {
                                }
                                dqm_while++;
                            }

                            int page_id = Integer.parseInt(page_id_str);

                            // The article is available.
                            if (page_id != 1) {
                                JSONObject pageidjson = pages_jsn
                                        .getJSONObject(page_id_str);
                                db.beginTransaction();
                                try {
                                    // category is available
                                    String tmp_interest = pageidjson
                                            .getString("title");
                                    JSONArray categories_array = pageidjson
                                            .getJSONArray("categories");

                                    // interests
                                    db = helper.getReadableDatabase();
                                    String[] i_columns = { "id", "name",
                                            "count" };
                                    SQLiteCursor ic = (SQLiteCursor) db.query(
                                            "interests", i_columns, "name = '"
                                                    + tmp_interest + "'", null,
                                            null, null, null);
                                    db.setTransactionSuccessful();
                                    db.endTransaction();

                                    if (ic.getCount() == 0) {
                                        db = helper.getWritableDatabase();
                                        db.beginTransaction();

                                        ContentValues val_interest = new ContentValues();
                                        val_interest.put("name", tmp_interest);
                                        val_interest.put("count", 1);
                                        db.insert("interests", null,
                                                val_interest);
                                        System.out.println("successfully inserted " + tmp_interest);
                                        db.setTransactionSuccessful();
                                        db.endTransaction();
                                    } else {
                                        ic.moveToFirst();
                                        int i_id = ic.getInt(0);
                                        db.beginTransaction();
                                        ContentValues db_i_val = new ContentValues();
                                        db_i_val.put("count", ic.getInt(2) + 1);
                                        db.update("interests", db_i_val, "id = "
                                                + i_id, null);
                                        db.setTransactionSuccessful();
                                        db.endTransaction();

                                    }

                                } catch (Exception e) {
                                    Log.e("ERROR", e.toString());
                                }
                            }

                            scanner.close();

                        }

                    }

                    System.out.println("@" + status.getUser().getScreenName()
                            + " - " + status.getText());
                }
                db = helper.getReadableDatabase();
                String[] i_columns = { "id", "name",
                        "count" };
                SQLiteCursor test = (SQLiteCursor) db.query(
                        "interests", i_columns, null, null,
                        null, null, null);
                System.out.println("Table Interests has " + test.getColumnCount() + "rows");

                db.setTransactionSuccessful();
                db.endTransaction();

                db.close();

                Editor e = mSharedPreferences.edit();
                e.putString(Const.PREF_KEY_TOKEN, accessToken.getToken());
                e.putString(Const.PREF_KEY_SECRET, accessToken.getTokenSecret());
                e.commit();
            } catch (Exception e) {
                Log.e(TAG, e.getMessage());
            }
        }

    } 
```

**解决**

*   使用`System.out.println("Table Interests has " + test.getCount() + "rows");`代替 `System.out.println("Table Interests has " + test.getColumnCount() + "rows");`

然后我可以获得正确的行数。

*   我应该小心的位置`db.beginTransaction()`。我是我的绳子，`try`介于`db.beginTransaction()`和之间`db.endTransaction()`。那没有正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T18:25:52.970

这是不正确的：

```
System.out.println("Table Interests has " + test.getColumnCount() + "rows"); 
```

这将打印列数。

你应该使用：

```
System.out.println("Table Interests has " + test.getCount() + "rows"); 
```

**文档** [http://developer.android.com/reference/android/database/sqlite/SQLiteCursor.html#getCount](http://developer.android.com/reference/android/database/sqlite/SQLiteCursor.html#getCount) ()

# scala - 是否可以使用单个关键字使 scala 对象中的所有值变得惰性

> ID：11916405
> 
> 赞同：5
> 
> 时间：2012-08-11T18:08:45.740
> 
> 标签：scala, lazy-evaluation

还是`val`默认情况下 scala 对象中的 s 是惰性的？

无论如何，如果有必要`val`通过 using 在对象中声明 a `lazy`，是否可以执行类似的操作

```
lazy object SomeObject 
```

或（就像你在 C++ 中所做的那样）

```
object A {
lazy:
    val a
    val b
    ...
} 
```

因为我想偷懒，不必重新标记我所有的`val`s`lazy val`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-11T19:27:18.183

回答您的第一个问题（“ `val`scala 对象中的 s 默认情况下是惰性的吗？”）：不，不完全是，但对象本身*有点*惰性，这可能已经足够惰性了。从[Scala 语言规范](http://www.scala-lang.org/docu/files/ScalaReference.pdf)的 5.4（“对象定义”）开始：

> 请注意，对象定义定义的值是惰性实例化的。构造`new m$cls`函数不是在对象定义时进行评估，而是`m`在程序执行期间第一次取消引用时进行评估（这可能永远不会）。

因此，例如，如果我们有这三个对象：

```
object X {
  val answer = { println("Here's X's answer!"); 42 }
}

object Y {
  lazy val answer = { println("Here's Y's answer!"); 1 }
}

object Z extends App {
  println("Here we go.")
  println(X)
  println(Y)
  println(X.answer)
  println(Y.answer)
} 
```

然后当我们运行时`Z`，我们会看到以下内容：

```
Here we go.
Here's X's answer!
X$@38d24866
Y$@f1aa6ce
42
Here's Y's answer!
1 
```

所以`val`in`X`不是懒惰的，但直到我们第一次使用它才被评估`X`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T23:03:52.057

首先，对象已经被延迟初始化：

```
object Y {
  println("aqui")
  val a = 0
}

Y.a  // runs body of Y 
```

*其次，如果您对多个 s一次*`val`延迟初始化感到满意，您可以使用元组中的模式提取：

 *```
object X {
  val a = 0
  lazy val (b, c) = {
    println("aqui")
    (1, "hallo")
  }
}

X.a  // runs body of X, initialises strict vals
X.b  // initialises both b and c
X.c 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T18:14:53.007

简短的回答是：不，这是**不可能**的（除非你没有用宏做一些疯狂的运算）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T18:22:52.210

说到精神错乱（@om-nom-nom），也许可以调整[Autoproxy 插件](https://github.com/kevinwright/Autoproxy-Lite)，使其创建惰性包装器。那将是……有趣。\

通常，Scala 编译器插件可以让您执行此操作。您可以通过标记特征或注释标记惰性对象，然后让编译器插件进行重写。编写编译器插件并不是最简单的事情，但它仍然很有趣。*

# sql - SQL：使用另一个表中的行替换表中的行

> ID：11916406
> 
> 赞同：0
> 
> 时间：2012-08-11T18:08:53.463
> 
> 标签：sql, postgresql

我有一个 SQL 问题。

我有两个表：tableA 和 tableB。这两个表的结构完全相同（简化版）：

```
rowid : big int
name: character varying
enabled : boolean 
```

两张表：

```
tableA contains all the data and their enabled columns are all true.
tableB contains data in tableA that should be turned off (enabled set to false). 
```

我的问题是如何编写一个 SQL 语句，将 tableA 中的所有行替换为 tableB 中的行（或者类似地，将 tableB 中存在的所有行的启用字段设置为 false）

我使用 PostgreSQL。也欢迎来自其他 SQL 类型的 SQL 语句。

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T18:12:13.573

这会做（但语法与 MSSQL 兼容，谢谢@评论）：

```
update tableA
   set tableA.enabled = false
from tableA
    inner join tableB on tableA.rowid = tableB.rowid 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T23:45:11.313

```
UPDATE tbl_a a
SET    enabled = FALSE
FROM   tbl_b b
WHERE  a.rowid = b.rowid
AND    a.enabled IS NOT FALSE; 
```

如果`enabled`定义`NOT NULL`简化为：

```
AND a.enabled; 
```

*   @kuba 发布了类似的方法，但他的语法在 PostgreSQL 中不起作用。有关详细信息，请参阅[当前的 PostgreSQL 手册`UPDATE`](http://www.postgresql.org/docs/current/interactive/sql-update.html)。我引用：

> 不要在目标列的规范中包含表的名称——例如，`UPDATE tab SET tab.col`= 1 是无效的。

*   在 PostgreSQL 中，使用子句将另一个表连接到`UPDATE`语句**`FROM`**不仅更优雅，而且比使用`IN (subselect)`. 小更新几乎不重要，但大更新可能会变得很重要。用 测试[`EXPLAIN ANALYZE`](http://www.postgresql.org/docs/current/interactive/sql-explain.html)。

*   最后但并非最不重要的一点是，对于任何 RDBMS：**避免空更新**。如果表 A 中的行已关闭，则不要应用更新。它不会更改数据，但仍会创建死排，可能会导致触发器触发并降低性能和磁盘空间。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-11T18:11:41.157

有很多方法可以实现这一目标。尝试：

```
UPDATE TableA
SET Enabled = false
WHERE rowid IN
(SELECT rowid FROM TableB) 
```

# javascript - 函数在Javascript中定义后未定义

> ID：11916409
> 
> 赞同：0
> 
> 时间：2012-08-11T18:09:13.020
> 
> 标签：javascript, undefined

[这个 jsFiddle](http://jsfiddle.net/EPFGa/2/)突出了我的问题。
它模仿了我定义对象并通过 socket.io 发送到页面的一些功能。

我有一个 setInterval 函数检查是否`Pots`是一个函数，当它是我触发一个事件时。在那个事件中，我尝试实例化一个新实例，`Pots`但被告知它是未定义的。

编码：

```
var Pots;

$(document).ready(function(){
    var timerId = 0;
    var otherTimer = 0;

    otherTimer = setInterval(function() { console.log("Creating"); Pots = function() {}; }, 5000);

    timerId = setInterval(function() {
        console.log("Checking");

        if (_.isFunction(Pots)) {
            console.log(Pots);
            clearInterval(timerId);
            clearInterval(otherTimer);

            var evt = document.createEvent('Event');
            evt.initEvent('ObjectsAvailable', true, true);
            document.dispatchEvent(evt);
        }

    }, 1000);

});

document.addEventListener('ObjectsAvailable', function(e) {
    console.log(Pots);
    var Pots = new Pots();
}); 
```

***编辑***
在下面发表了这条评论：
我应该指出，这`Pots`实际上是一个带有此声明的 Backbonejs 集合：`var Pots = Backbone.Collection.extend({model: Pot});`。我做这个事件的原因是因为有一段时间没有设置“Pots”（可能在浏览器加载声明 Pots 的文件之前）。jsFiddle 只是为了模拟时间的存在。在我的实际代码中，“otherTimer”不存在，Pots 最终是一个函数，但是当我在`ObjectsAvailable`活动期间尝试使用它时，它不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T18:11:42.323

您永远不会将全局变量“Pots”设置为任何值，因此它保持未定义。

“ObjectsAvailable”处理程序看起来像是试图设置它，但是

1.  它试图调用“Pots()”来这样做，所以这不起作用，并且
2.  它也声明了一个局部变量“Pots”，这样就隐藏了全局变量。

另一个注意事项：小提琴设置了要在窗口“加载”处理程序中运行的代码，因此“就绪”处理程序是多余的。

# android - 通过 Parcelable 传递对象但获取 NULL 对象

> ID：11916412
> 
> 赞同：0
> 
> 时间：2012-08-11T18:09:39.717
> 
> 标签：android

> 我正在尝试实现 Parcle 数据并通过 Intent 将其发送到其他类，但获取 NULL 对象我是 Android 中的新手

```
 public class ParceableExampleActivity extends Activity implements  View.OnClickListener {

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Button button1 = (Button)findViewById(R.id.button1);
        button1.setOnClickListener(this);

    }
    @Override
    public void onClick(View v) {
        switch(v.getId()){
        case R.id.button1:
             ParcelData p = new ParcelData();
             p.setFirstName("Kumar");
             p.setAddedBy(3);
            Intent n = new Intent(this,ResultActivity.class);
            n.putExtra("data", p);
            startActivity(n);

        }

    }
} 
```

> 实现 pacelclass 的 Parceldata

```
 public class ParcelData implements Parcelable {

    private String firstName ;
    private int addedBy ;
    //private UUID guid ;

    private static final String TAG = "TEST" ;
    public ParcelData() {
        firstName=null ;
        addedBy=0;
    //  guid=null;
    }

    public String getFirstName() {
        return firstName;
    }
    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }
    public int getAddedBy() {
        return addedBy;
    }
    public void setAddedBy(int addedBy) {
        this.addedBy = addedBy;
    }

    public static final Parcelable.Creator CREATOR = new Parcelable.Creator() {
        public Parcelable createFromParcel(Parcel in) {
                       return new ParcelData(); 
        }

        @Override
        public Parcelable[] newArray(int size) {
             return new Parcelable[size];
        }
    } ;

    public void writeToParcel(Parcel dest, int flags) {
        Log.v(TAG, "writeToParcel..."+ flags);

        dest.writeString(firstName);
        dest.writeInt(addedBy);

    }

    public void ParcelData(Parcel in){
        readFromParcel(in);
    }

    @Override
    public int describeContents() {
        // TODO Auto-generated method stub
        return 0;
    }

     private void readFromParcel(Parcel in) {

         firstName= in.readString();
         addedBy= in.readInt();
     }

    } 
```

> 接收对象

```
public class ResultActivity extends Activity implements  View.OnClickListener {

        /** Called when the activity is first created. */
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);
            Button button1 = (Button)findViewById(R.id.button2);
            button1.setOnClickListener(this);
        }
        @Override
        public void onClick(View v) {
            switch(v.getId()){
            case R.id.button2:
                Bundle b = getIntent().getExtras();
                ParcelData result_p=b.getParcelable("data");
                Log.v("RESULT", "result of Parcel..."+ result_p.getFirstName());
                Log.v("RESULT", "result of Parcel..."+ result_p.getAddedBy());

            }

        }
    } 
```

> 但日志的结果是 NULL

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T18:18:50.270

这必须是一个构造函数。您必须删除`void`：

```
public ParcelData(Parcel in){
    readFromParcel(in);
} 
```

否则它将被视为一种方法而不被使用。

创建者必须如下所示：

```
public static final Parcelable.Creator<ParcelData> CREATOR = new Parcelable.Creator<ParcelData>() {
  public ParcelData createFromParcel(Parcel source) {
        return new ParcelData(source);
  }
  public ParcelData[] newArray(int size) {
        return new ParcelData[size];
  }
}

@Override
public ParcelData[] newArray(int size) {
     return new ParcelData[size];
} 
```

您也不需要默认构造函数。无论如何，变量都被初始化为这些值。而且我不知道它是否会导致框架出现问题。

```
//remove
public ParcelData() {
    firstName=null ;
    addedBy=0;
//  guid=null;
} 
```

在 describeContents 中，如果您使用 hashCode 可能会有所帮助：

```
@Override
public int describeContents() {
    return hashCode();
} 
```

# c# - 设置选定索引后，Listpicker 变为空白

> ID：11916415
> 
> 赞同：1
> 
> 时间：2012-08-11T18:09:46.750
> 
> 标签：c#, windows-phone-7, xaml, windows-phone-7.1, silverlight-toolkit

我的 wp7 应用程序中有 listpicker 控件。我想根据我的需要设置选定的索引。假设我的列表选择器中有 100 个项目，如果我将选定的索引设置为 40 以下，则一切顺利。但是当我将 Selected index 设置为 50 以上时，它变为空白并且 UI 未刷新，但在后端它显示正确的项目。

示例项目：http: [//yaariyan.net/Test_Project.rar](http://yaariyan.net/Test_Project.rar)

在这个项目中你可以获得

1.  所有来源

2.  XAP 文件也进行测试

3.  重现步骤

4.  错误快照

只需使用我的最后两个按钮即可轻松重现问题。

我正在使用 windows phone 7.1.1 SDK 和 Silverlight Take Kit 2011 年 11 月版。

DLL 也在我的文件夹中，我在我的项目中指的是

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T18:39:06.510

我遇到过同样的问题。恐怕我还不能提出解决方案，但我已经缩小了问题的范围。我可以验证问题似乎发生在`SelectedIndex`40 到 50 之间（在我的情况下为 48）。

我所做的缩小范围是简单地创建一个新的 WP 解决方案，`ListPicker`向视图添加两个控件`MainPage.xaml`，以及一个按钮。我通过代码将 50 个字符串添加到两个列表中，并在第一个列表上设置`SelectedIndex`为 0，在第二个列表上设置为 50。

该按钮对 SelectedIndex 属性进行了简单的切换，如下所示：

```
 private void button1_Click(object sender, RoutedEventArgs e)
    {
        int tempindex = listPicker1.SelectedIndex;
        listPicker1.SelectedIndex = listPicker2.SelectedIndex;
        listPicker2.SelectedIndex = tempindex;
    } 
```

我运行了这个项目并最终完成了这个（我认为这部电影说明了一切）：

[http://screencast.com/t/T6mZ7FEdUF](http://screencast.com/t/T6mZ7FEdUF)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T02:56:18.103

我解决了你的问题。我所做的是，我将 ListPicker Itemsource 绑定在 .xaml 而不是后面的代码上，它运行良好。

这是在您提供的文件中编辑的 .xaml 代码：

```
 <toolkit:ListPicker ItemsSource="{Binding LstCountry}" SelectedIndex="55" x:Name="listPickerCountrySignup" Height="72" HorizontalAlignment="Left" Margin="14,43,0,0" VerticalAlignment="Top" Width="436" FullModeHeader="Select Country" Background="White" BorderBrush="White" CacheMode="BitmapCache" > 
```

.xaml.cs 代码

public partial class MainPage : PhoneApplicationPage, INotifyPropertyChanged { // 构造函数 public MainPage() { InitializeComponent(); 绑定列表（）；this.DataContext=这个；}

```
 public class country 
    {
        public int CountryID { get; set; }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    void NotifyPropertyChanged(String propertyName)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (null != handler)
        {
            handler(this, new PropertyChangedEventArgs(propertyName));
        }
    }

    List<country> _lstCountry;
    public List<country> LstCountry
    {
        get{return _lstCountry;}
        set{
            if(_lstCountry!=value)
            {
                _lstCountry = value;
                NotifyPropertyChanged("LstCountry");
            }
        }
    }
    void BindList()
    {
        LstCountry = new List<country>();

        for (int i = 0; i <= 100; i++)
        {
            LstCountry.Add(new country { CountryID = i });
        }
    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        listPickerCountrySignup.SelectedIndex = 15;
    }

    private void button2_Click(object sender, RoutedEventArgs e)
    {
        listPickerCountrySignup.SelectedIndex = 25;
    }

    private void button3_Click(object sender, RoutedEventArgs e)
    {
        listPickerCountrySignup.SelectedIndex = 39;
    }

    private void button4_Click(object sender, RoutedEventArgs e)
    {
        listPickerCountrySignup.SelectedIndex = 55;
    }

    private void button5_Click(object sender, RoutedEventArgs e)
    {
        listPickerCountrySignup.SelectedIndex = 75;
    }
} 
```

# java - 在 JTable 中按下向上或向下时调用例程

> ID：11916416
> 
> 赞同：3
> 
> 时间：2012-08-11T18:10:01.770
> 
> 标签：java, swing, jtable, key-bindings, keystrokes

`enter`此代码在按下`JTable`（称为`gametable`）时调用例程。它工作得很好，但我希望在不需要按下的情况下`Action`向上或向下移动时调用它；我无法让它工作。我尝试用 替换，但我无法在桌子上上下移动？`JTable``enter``VK_ENTER``VK_UP`

```
KeyStroke enter = KeyStroke.getKeyStroke(java.awt.event.KeyEvent.VK_ENTER, 0);

gameTable.getJTable().unregisterKeyboardAction(enter);
gameTable.getJTable().registerKeyboardAction(new ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent e) {
            synchronized (this) {
                gotoGame(gameTable.getSelectedIndex());
            }
        }
    }, enter, JComponent.WHEN_FOCUSED); 
```

我想不通。有人能帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T18:37:36.943

您必须将这些步骤分开：

1.  首先将两个`KeyStroke`实例放入其中，`InputMap`以便它们的目标相同`actionMapKey`：

    ```
    KeyStroke enter = KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, 0);
    KeyStroke up = KeyStroke.getKeyStroke(KeyEvent.VK_UP, 0);
    String actionMapKey = "anActionMapKey";
    gameTable.getInputMap().put(enter, actionMapKey);
    gameTable.getInputMap().put(up, actionMapKey); 
    ```

2.  然后将其`actionMapKey`与您的`Action`：

    ```
    gameTable.getActionMap().put(actionMapKey, new AbstractAction(actionMapKey) {
        ...
    }); 
    ```

有关详细信息，请参阅[*如何使用操作*](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)和[*键绑定*](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)。

我对你`synchronized (this)`在这种情况下的使用持谨慎态度；您应该在[事件调度线程](http://download.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)上构建您的 GUI 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T18:36:54.513

您需要在 JTable 中添加一个 keylistener。然后在您的按键监听器中，您可以检查任何按下的按钮，包括 Enter 并采取相同的操作。

我有一个类似代码的程序。在这里，如果箭头键选择不同的单元格，我只是在一个文本区域中显示不同的值，但我认为它可能会让您了解如何设置它。

```
import java.awt.event.KeyEvent;

import javax.swing.JTable;

public class MyClass {
    static JTable table = new JTable();

    public static void main(String[] args) {
        table.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(final java.awt.event.KeyEvent evt) {
                tableKeyReleased(evt);
            }
        });
    }

    private static void tableKeyReleased(final java.awt.event.KeyEvent evt) {
        final int key = evt.getKeyCode();
        if (key == KeyEvent.VK_UP || key == KeyEvent.VK_DOWN
                || key == KeyEvent.VK_LEFT || key == KeyEvent.VK_RIGHT) {
            final int row = table.getSelectedRow();
            final int column = table.getSelectedColumn();

            final Object cellValue = table.getValueAt(row, column);

            if (cellValue == null) {
                return;
            }

        }
    }
} 
```

# windows - MVC 应用程序在与 MS 2008 域控制器通信以获取用户密码时出现异常

> ID：11916418
> 
> 赞同：0
> 
> 时间：2012-08-11T18:10:21.510
> 
> 标签：windows, iis, iis-7.5

我有一个应用程序最近在检索用户密码信息的操作期间`MVC`在我的生产服务器上开始失败。`IIS 7.5`在开发或我的个人计算机上使用 localhost 运行的相同应用程序`IIS Server`能够像往常一样与域控制器通信。我还没有重新启动生产服务器，但是下周末我们将进行服务器维护，然后我将重新启动。我希望在此之前找到原因，以防重启解决问题。我真的不知道从哪里开始进行故障排除。

编辑：2012 年 8 月 13 日问题变得间歇性，我包括代码和异常措辞

这是我用来获取用户密码信息的代码：

```
 public int GetPasswordExpiration(string user)
    {

        PrincipalContext ctx = new PrincipalContext(ContextType.Domain);
        UserPrincipal currLogin = UserPrincipal.FindByIdentity(ctx, user);
        DateTime passwordLastSet = currLogin.LastPasswordSet.Value;
        int doyPasswordSet = passwordLastSet.DayOfYear;
        int doy = DateTime.Today.DayOfYear;
        int daysSinceLastset = (doy - doyPasswordSet);
        int daysTilDue = (120 - daysSinceLastset);
        return (daysTilDue);

    } 
```

这是一个例外：

未知错误 (0x80005000) 描述：在执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.Runtime.InteropServices.COMException：未知错误 (0x80005000)

```
[COMException (0x80005000): Unknown error (0x80005000)]
System.DirectoryServices.DirectoryEntry.Bind(Boolean throwIfFail) +781
System.DirectoryServices.DirectoryEntry.Bind() +44
System.DirectoryServices.DirectoryEntry.get_AdsObject() +42
System.DirectoryServices.PropertyValueCollection.PopulateList() +29
System.DirectoryServices.PropertyValueCollection..ctor(DirectoryEntry entry, String
propertyName) +119
System.DirectoryServices.PropertyCollection.get_Item(String propertyName) +163
System.DirectoryServices.AccountManagement.PrincipalContext.DoLDAPDirectoryInitNoContainer() +436
System.DirectoryServices.AccountManagement.PrincipalContext.DoDomainInit() +51
System.DirectoryServices.AccountManagement.PrincipalContext.Initialize() +141
System.DirectoryServices.AccountManagement.PrincipalContext.get_QueryCtx() +42
System.DirectoryServices.AccountManagement.Principal.FindByIdentityWithTypeHelper
(PrincipalContext context, Type principalType, Nullable`1 identityType, String identityValue,
DateTime refDate) +27
System.DirectoryServices.AccountManagement.UserPrincipal.FindByIdentity(PrincipalContext
context, String identityValue) +95
ArctecLogisticsWebFiles.Utilities.CommonFunctions.GetPasswordExpiration(String user) +212
ArctecLogisticsWebFiles.Controllers.LoginDisplayController._GetFriendlyName() +585
lambda_method(Closure , ControllerBase , Object[] ) +81
System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext 
controllerContext,              IDictionary`2 parameters) +264
System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext
controllerContext,     ActionDescriptor actionDescriptor, IDictionary`2 parameters) +39
System.Web.Mvc.<>c__DisplayClass15.<InvokeActionMethodWithFilters>b__12() +129
System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter,
ActionExecutingContext preContext, Func`1 continuation) +826266
System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext
controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
+314
System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String
actionName) +825488
System.Web.Mvc.Controller.ExecuteCore() +159
System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) +335
System.Web.Mvc.<>c__DisplayClassb.<BeginProcessRequest>b__5() +62
System.Web.Mvc.Async.<>c__DisplayClass1.<MakeVoidDelegate>b__0() +20
System.Web.Mvc.<>c__DisplayClasse.<EndProcessRequest>b__d() +54
System.Web.Mvc.<>c__DisplayClass4.<Wrap>b__3() +15
System.Web.Mvc.ServerExecuteHttpHandlerWrapper.Wrap(Func`1 func) +41
System.Web.HttpServerUtility.ExecuteInternal(IHttpHandler handler, TextWriter writer, 
Boolean      preserveForm, Boolean setPreviousPage, VirtualPath path, VirtualPath filePath,
String physPath,     
Exception error, String queryStringOverride) +1443
[HttpException (0x80004005): Error executing child request for
handler 'System.Web.Mvc.HttpHandlerUtil+ServerExecuteHttpHandlerAsyncWrapper'.]
System.Web.HttpServerUtility.ExecuteInternal(IHttpHandler handler, TextWriter writer,
Boolean     
System.Web.Mvc.Html.ChildActionExtensions.ActionHelper(HtmlHelper htmlHelper, String
actionName, String controllerName, RouteValueDictionary routeValues, TextWriter textWriter) +834
System.Web.Mvc.Html.ChildActionExtensions.RenderAction(HtmlHelper htmlHelper, String
actionName,   String controllerName, RouteValueDictionary routeValues) +56
ASP._Page_Views_Shared__Layout_cshtml.Execute() +1973
System.Web.WebPages.WebPageBase.ExecutePageHierarchy() +280
System.Web.Mvc.WebViewPage.ExecutePageHierarchy() +104
System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter
writer, WebPageRenderingBase startPage) +173
System.Web.WebPages.WebPageBase.Write(HelperResult result) +89
System.Web.WebPages.WebPageBase.RenderSurrounding(String partialViewName, Action`1 body) +234
System.Web.WebPages.WebPageBase.PopContext() +222
System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context) +384
System.Web.Mvc.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19() +33
System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter,  ResultExecutingContext preContext, Func`1 continuation) +825460
System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult) +265
System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +825488
System.Web.Mvc.Controller.ExecuteCore() +159
System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) +335
System.Web.Mvc.<>c__DisplayClassb.<BeginProcessRequest>b__5() +62
System.Web.Mvc.Async.<>c__DisplayClass1.<MakeVoidDelegate>b__0() +20
System.Web.Mvc.<>c__DisplayClasse.<EndProcessRequest>b__d() +54
System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +469
System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +375 
```

# opengl-es - 使用 BlackBerry Native SDK 处理触摸事件

> ID：11916419
> 
> 赞同：2
> 
> 时间：2012-08-11T18:10:30.573
> 
> 标签：opengl-es, opengl-es-2.0, blackberry-10, blackberry-ndk

我正在阅读[OpenGL ES 2.0 Programming Guide](http://opengles-book.com/)并在他们的示例中使用他们创建的名为[esUtil.h 的帮助程序库（它有一个用于 BlackBerry 的版本）](http://code.google.com/p/opengles-book-samples/source/browse/#svn/trunk/BlackBerry/Common/src)，它包含在[书籍示例存储库](http://code.google.com/p/opengles-book-samples/)中，问题是现在我想[处理触摸事件](https://developer.blackberry.com/native/documentation/recipe_touch_1935310_11.html)，但是我不知道如何使我的代码在`bbutil.h`初始化时变得紧凑，这样我就可以利用触摸，同时`esUtil.h`我可以利用像和这样的函数`esRegisterDrawFunc`，我不知道该怎么办。这是我的代码：`esRegisterUpdateFunc``esMainLoop``bbutil`

```
#include <stdlib.h>
#include <stdio.h>
#include "esUtil/esUtil.h"

// BlackBerry stuff.
#include "bbutil.h"
#include <bps/bps.h>
#include <bps/screen.h>

// Helpers.
#include "helpers/global.h"
#include "helpers/shaders.h"

// Scene.
#include "scene/scene.h"

int main(int argc, char *argv[]) {
    ESContext esContext;
    UserData userData;

    esInitContext(&esContext);
    esContext.userData = &userData;

    if (!esCreateWindow(&esContext, TITLE, WINDOW_WIDTH, WINDOW_HEIGHT, ES_WINDOW_RGB))
        return 0;

    if (!init(&esContext))
        return 0;

    esRegisterDrawFunc(&esContext, drawScene);
    esRegisterUpdateFunc(&esContext, update);

    esMainLoop(&esContext);

    return 0;
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T12:47:52.813

我没有任何将 OpenGL 与 BPS 混合的特定经验，但由于没有任何其他响应......

我在 BB10 下混合了 BPS 和 Cascades。我所做的是在单独的线程上运行 BPS 事件获取和响应代码。线程将阻塞，直到 BPS 有事件。这使得主线程可用于 Cascades（在我的情况下）或 esMainLoop（在你的情况下）。

# c++ - 删除特定项目的列表视图中的复选框

> ID：11916422
> 
> 赞同：2
> 
> 时间：2012-08-11T18:11:01.883
> 
> 标签：c++, windows, winapi

我正在使用以下代码删除列表视图中特定项目旁边的复选框：

```
LVITEM lvI;

lvI.iItem = i;
lvI.mask = LVIF_STATE;
lvI.stateMask = LVIS_STATEIMAGEMASK;
lvI.state = 0;

SendMessage(hListOutput, LVM_SETITEM, 0, (LPARAM) &lvI); 
```

它可以工作，但是如果我单击以前的复选框，它会重新出现！

如何删除列表视图中特定项目上的复选框并保持删除状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T18:17:29.077

将复选框的所需状态保存在变量中（默认为空）。在复选框更改事件中，如果该变量不为空，则将状态翻转为保存的值。

# google-apps-script - 谷歌应用脚 本公式

> ID：11916426
> 
> 赞同：0
> 
> 时间：2012-08-11T18:11:10.763
> 
> 标签：google-apps-script

我想以表单的形式打开我在 Google Apps 中创建的一些表格。由于某些原因，表单应该通过打开表格而不单击任何菜单来自行打开。在没有进一步了解脚本语言的情况下，是否有可能为像我这样的人这样做？

霍尔格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T05:27:51.083

对于表格，我假设您有一个包含一个或多个有趣数据**范围的电子表格。**是的，您可以在 google-apps-script 中定义“表单”用户界面，为感兴趣的表格创建网格小部件并将数据从电子表格范围映射到小部件。文档和示例将带您沿着开发路径走一条公平的道路，请参阅[https://developers.google.com/apps-script/class_grid](https://developers.google.com/apps-script/class_grid)。当您有一个 UI 脚本时，您可以将其设置为在使用触发器功能打开电子表格时自动打开。

但是，如果您试图避免浏览电子表格的复杂性（对于您的用户而言）只是为了**查看**有趣的表格数据，您可以考虑创建数据的 html 视图。最简单的方法是使用 Google 协作平台定义页面并使用标准库中的小工具（如“电子表格范围发布器”）使用表格填充页面。这避免了编写任何脚本语言。

# php - 检查url是否存在

> ID：11916429
> 
> 赞同：2
> 
> 时间：2012-08-11T18:11:41.573
> 
> 标签：php

我有访问者提交链接的网站，所以我想发布的网址是否存在，所以我一直在使用以下功能

```
<?PHP
        function url_exist($url){
        $c=curl_init();
        curl_setopt($c,CURLOPT_URL,$url);
        curl_setopt($c,CURLOPT_HEADER,1);
        curl_setopt($c,CURLOPT_NOBODY,1);
        curl_setopt($c,CURLOPT_RETURNTRANSFER,1);
        curl_setopt($c,CURLOPT_FRESH_CONNECT,1);
        if(!curl_exec($c)){
        return false;
        }else{
        return true;
        }}

    $ur = "http://www.google.com"; // example

    if(url_exist($url)){
    echo "yea valid";
    }else{
    echo "not valid";
    }
?> 
```

但是我的网站变得如此缓慢，甚至在检查有效或无效 url 的步骤中都没有加载一些东西，所以我想知道是否有其他想法可以在不加载太多的情况下在我的托管服务器上像上述功能一样做同样的事情！〜任何帮助

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-11T18:35:24.840

使用此代码可能有效

```
$headers = @get_headers($url);
if(strpos($headers[0],'200')===false)return false; 
```

因此，如果 url 返回代码 200 以外的任何内容，您就会知道该 url 是错误的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T18:22:11.380

```
$url = 'http://google.com/';

if( get_headers($url) )
    echo "$url exists"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-19T15:48:11.670

在接受的答案中使用[链接中的示例：](http://www.daniweb.com/web-development/php/threads/83076/if-url-exists)

```
$url = 'http://www.example.com';
$handle = @fopen($url,'r');
if ($handle !== false) {
   echo 'Exists';
} else {
   echo "Doesn't";
} 
```

在这里复制，以防将来外部资源不可用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-02T10:01:02.177

你可以试试下面的代码，希望它会工作。

```
$url = 'http://www.example.com/file.jpg';
$file_header = @get_headers($url);
if($file_header[0] == 'HTTP/1.1 404 Not Found') {
    $is_exists = false;
}
else {
    $is_exists = true;
} 
```

# qt - 为什么 QCA 没有响应我的以下程序

> ID：11916444
> 
> 赞同：1
> 
> 时间：2012-08-11T18:13:25.797
> 
> 标签：qt, encryption, hash

我已经花了大量时间在 Windows 中配置 QCA，但它仍然没有告诉我它正在工作，我也没有找到任何线索来弄清楚这里发生了什么。到目前为止我得到的唯一消息是：无法获得劣质句柄：参数不正确。这意味着什么 ？

请在这方面告诉我..这是我的代码。

轮廓 ：

```
QT       += core
QT       -= gui
TARGET = untitled
CONFIG   += console
CONFIG   -= app_bundle
TEMPLATE = app
SOURCES += main.cpp
INCLUDEPATH += "C:/Qt/hash/qca-2.0.3/include"
LIBS += "C:/Qt/hash/qca-2.0.3/lib/qca2.dll" 
```

源文件：

```
 #include <QtCrypto/QtCrypto>

 #include <QCoreApplication>
 #include <QDebug>
 #include <stdio.h>

 int main(int argc, char **argv)
 {

// the Initializer object sets things up, and
    // also does cleanup when it goes out of scope
    QCA::Initializer init;

    QCoreApplication app(argc, argv);

    // we use the first argument if provided, or
    // use "hello" if no arguments
    QCA::SecureArray arg = (argc >= 2) ? argv[1] : "hello";

    // must always check that an algorithm is supported before using it
    if( !QCA::isSupported("sha1") )
            printf("SHA1 not supported!\n");
    else {
            // this shows the "all in one" approach
            QString result = QCA::Hash("sha1").hashToString(arg);
            printf("sha1(\"%s\") = [%s]\n", arg.data(), result.toAscii().data());
    }

    // must always check that an algorithm is supported before using it
    if( !QCA::isSupported("md5") )
            printf("MD5 not supported!\n");
    else {
            // this shows the incremental approach. Naturally
            // for this simple job, we could use the "all in one"
            // approach - this is an example, after all :-)
            QCA::SecureArray part1(arg.toByteArray().left(3)); // three chars - "hel"
            QCA::SecureArray part2(arg.toByteArray().mid(3)); // the rest - "lo"

            // create the required object.
            QCA::Hash hashObject("md5");
            // we split it into two parts to show incremental update
            hashObject.update(part1);
            hashObject.update(part2);
            // no more updates after calling final.
            QCA::SecureArray resultArray = hashObject.final();
            // convert the result into printable hexadecimal.
            QString result = QCA::arrayToHex(resultArray.toByteArray());
            printf("md5(\"%s\") = [%s]\n", arg.data(), result.toAscii().data());
       }
    qDebug()<<"Qca is working fine";
    return 0;
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T00:45:49.300

在您的 .pro 文件中，`LIBS`变量应该包含编译器参数，而不仅仅是路径。库的编译器参数是`-L<librarypath>`and `-l<libraryname>`，在您的情况下，我猜该行必须是：

```
LIBS += -LC:/Qt/hash/qca-2.0.3/lib -lqca2 
```

# qt - Qt Creator 和 math.h 不起作用

> ID：11916445
> 
> 赞同：1
> 
> 时间：2012-08-11T18:13:31.867
> 
> 标签：qt, math.h

我已经用 Qt Creator 启动了一个 Qt 项目，我想使用一些数学函数。我已经包含了 math.h。但是当我想使用一个函数时，我得到一个错误，该函数没有在这个范围内声明。我也尝试过 mathc，但后来我在 cmath 中遇到了 20 多个错误。我尝试了全新的 Ubuntu 12 安装和 Qt Creator 的最新版本以及 Windows 7。两个系统都产生相同的错误。我做错了什么？

```
#include <QtGui/QApplication>
#include "mainwindow.h"
#include <QDesktopWidget>
#include <QStyle>
#include <math.h>
#include <iostream>

using namespace std;

int main(int argc, char *argv[])
{
   QApplication a(argc, argv);
   MainWindow w;

   w.setGeometry(
    QStyle::alignedRect(
        Qt::LeftToRight,
        Qt::AlignCenter,
        w.size(),
        qApp->desktop()->availableGeometry()
    ));
   w.show();
   int i= pow(2,2);
   return a.exec();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-11-25T10:30:34.420

这个问题可能已经死了，但无论如何：

你可能包括`qmath.h`

```
#include <qmath.h> 
```

并使用这个库的功能

```
qPow(2, 2); //instead of pow(2, 2) 
```

另见[<QtCore/qmath.h> - 数学函数](https://doc.qt.io/archives/qt-4.8/qtcore-qmath-h.html)

# php - 保存后如何将url参数发布到另一个回发文件

> ID：11916450
> 
> 赞同：0
> 
> 时间：2012-08-11T18:13:56.330
> 
> 标签：php, url, parameters, postback

我有一个将传入的 url 参数保存到数据库的回发脚本。

例如[http://myurl.com/postback.php?param1=123¶m2=456](http://myurl.com/postback.php?param1=123&param2=456)

保存参数后如何将这些参数发送到另一个回发网址？例如[http://differenturl.com/postback.php?param1=123¶m2=456](http://differenturl.com/postback.php?param1=123&param2=456)

谢谢

詹姆士

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T18:30:00.653

你在这里基本上有几个选择。使用`$_SERVER['QUERY_STRINGS']`可以获取 URL 中传递的所有变量，然后在重定向`file_get_contents`或`cURL`请求中使用该字符串。使用您提供的 URL 和`QUERY_STRINGS`密钥，您将获得 string `param1=123&param2=456`。然后，您可以连接到您的新 URL 以使用`file_get_contents`函数 ,`curl`或标头重定向（如果这是您想要的）。

```
$reqURL = "http://differenturl.com/postback?".$_SERVER['QUERY_STRING']; 
```

或者，如果你想使用 post，你会`$_SERVER['QUERY_STRINGS']`在`CURLOPT_POSTFIELDS`flag 下通过。

我仍然很困惑你想要做什么，在 URL (GET) 中的查询字符串中发送变量或使用标题 (POST) 发布数据并使其在 URL 中不可见？

# android - Android Chrome 上的音频标签错误（？）

> ID：11916451
> 
> 赞同：2
> 
> 时间：2012-08-11T18:14:02.283
> 
> 标签：android, google-chrome, html5-audio

我正在做一个简单的计数器，最后有声音。它在桌面 Chrome 上完美运行，但在 Android 的 Chrome 上（如果重要的话是 ICS）它有一个奇怪的错误。

这是代码

```
<!DOCTYPE html>
<html lang="hu-HU">
<head>
<meta charset=utf-8>
    <title>-</title>
    <script type="text/javascript" src="jquery.min.js"></script>
    <script type="text/javascript"> 
        var snd;
        var buzzer;
        // refresh the counter, called every sec
        function refresh(time) {
            second = time % 60;
            $('#second').html(second < 10 ? '0' + second : second);
            if(second>55) 
                snd.play();             
        }

        $(function() {          
                snd = new Audio('ding.wav');                                
                var clock = 52;
                refresh(clock);
                window.setInterval(
                    function() {                        
                        clock++;
                        refresh(clock);
                    }, 
                    1000
                );
            }
        );

    </script>

    </style>
</head>
<body>

    <div id="second"></div>

<a href="#" onclick="doit();">Play</a>
<script>
    function doit() {
        snd.play();
    }
</script>
</body>
</html> 
```

在移动 Chrome 中，通常不会播放声音，这应该很奇怪。但是，如果我按下播放链接一次它就像一个魅力。知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T17:05:44.223

移动浏览器会阻止 JavaScript 在没有用户启动事件的情况下播放声音。这与 MobileSafari 的行为相同。

请参阅这些相关的 SO 问题：

*   [使用 HTML5 在 iPad 上自动播放音频文件](https://stackoverflow.com/questions/3009888/autoplay-audio-files-on-an-ipad-with-html5)
*   [在 iOS5 中自动播放 HTML5 音频/视频](https://stackoverflow.com/questions/8044447/autoplay-html5-audio-video-in-ios5)

# c# - C# new 没有引用持有者？

> ID：11916453
> 
> 赞同：1
> 
> 时间：2012-08-11T18:14:35.740
> 
> 标签：c#, reference, stack

写的时候

`Console.Write(new Class().Work)`

“新类”是否仍会生成参考？

堆栈上的值是多少？（地址）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T18:17:23.533

当然它会生成一个引用，`Class`必须存在一个实例才能调用`Work`它。只是没有一个变量来保存它。

不知道你对堆栈的意思。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T18:23:05.640

它将在参考上。您问题中的新课程。该值将是指向类的堆栈地址上的 HEX 值。因此，在 .NET 中，如果您通过引用进行引用，则地址存储在堆栈中，以便当您想要访问它时，编译器会找出哪个 HEX 值，然后从堆。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T18:23:39.810

即：newobj、callvirt、call

是的，创建了一个对象 - 引用在堆栈上，并由 callvirt 消耗（保留调用方法的返回值）

不需要变量，尽管它与一个变量一样合法。

# php - 为什么这个 PHP 错误脚本没有通过电子邮件向我发送致命错误？

> ID：11916464
> 
> 赞同：0
> 
> 时间：2012-08-11T18:16:10.620
> 
> 标签：php

我正在使用 nettuts 的以下脚本：

```
// Our custom error handler  
function error_engine($number, $message, $file, $line, $vars)  

{  
    $email = " 
        <p>An error ($number) occurred on line  
        <strong>$line</strong> and in the <strong>file: $file.</strong>  
        <p> $message </p>";  

    $email .= "<pre>" . print_r($vars, 1) . "</pre>";  

    $headers = 'Content-type: text/html; charset=iso-8859-1' . "\r\n";  

    // Email the error to someone...  
    error_log($email, 1, 'example@example.com', $headers);  

    if ( ($number !== E_NOTICE) && ($number < 2048) ) {  
        die("There was an error. Please try again later.");  
    }  
}  

// We should use our custom function to handle errors.  
set_error_handler('error_engine'); 
```

它适用于通知和警告等，但是当我故意破坏我的脚本时，比如将“mysqli_connect”更改为“mysqy_connct”，我会在屏幕上打印出致命错误并且没有电子邮件！

此类错误是否超出了此类错误记录/报告的范围？

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T18:19:16.097

`set_error_handler/set_exception_handler`不处理所有可能的错误。也就是说，解析错误不会被它捕获。我不能确切地告诉你它不能处理什么。一般规则是，这些处理程序在本应被 a 捕获的内容`try catch`或何时`trigger_error`被调用时被调用

`set_error_handler/set_exception_handler`捕获许多框架未捕获的错误，使用[register_shutdown_function](http://php.net/manual/en/function.register-shutdown-function.php)和[error_get_last的组合](http://php.net/manual/en/function.error-get-last.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-11T18:23:55.077

它在[文档](http://en.php.net/set_error_handler)中列出：

> 用户定义的函数无法处理以下错误类型：E_ERROR、E_PARSE、E_CORE_ERROR、E_CORE_WARNING、E_COMPILE_ERROR、E_COMPILE_WARNING，以及在调用 set_error_handler() 的文件中引发的大部分 E_STRICT。

# virtualbox - 虚拟盒子中的全屏 Arch Linux

> ID：11916468
> 
> 赞同：7
> 
> 时间：2012-08-11T18:16:59.193
> 
> 标签：virtualbox, archlinux

我在虚拟框中遇到了 Arch linux 的问题。我已经在 VB 中安装了 Arch linux，但是当我尝试全屏时它不起作用，（它只显示在中心的一个小方块中）。我尝试根据 wiki 安装来宾添加，但仍然无法正常工作。

谁能帮帮我吗？谢谢你。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-11T18:25:05.290

你应该在 Arch Linux 中增加你的屏幕分辨率。这通常发生在您在虚拟机中运行操作系统时。您在 VB 中运行的操作系统不知道要使用什么分辨率，因此通常将其设置为 640x480 或其他分辨率。所以，在 Arch Linux 中改变你的分辨率……而不是你的主操作系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-24T09:39:21.960

请尝试（**HOST + C**）

默认主机键是**右 Ctrl**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-30T08:37:26.733

尝试安装虚拟盒子添加并进入全屏模式。我想你可能指的是那个。如果它说 rc.d 文件存在问题，请手动创建空文件/目录并继续安装。然后在重新启动时，您将被提示全屏。甚至全屏拉伸也可能有效。但它不会具有您期望的那种灵活性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-12T01:26:40.847

*您可以尝试在Settings -> Display*中更改图形控制器。
此外，在*来宾系统*中，您可以使用：

```
xrandr --output $DISPLAY --mode (desired resolution) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-13T08:04:01.293

我目前遇到了同样的问题，我已经通过执行以下操作解决了它：

安装来宾添加只是半步。接下来您必须执行此步骤：
[https ://wiki.archlinux.org/index.php/VirtualBox/Install_Arch_Linux_as_a_guest#Set_optimal_framebuffer_resolution](https://wiki.archlinux.org/index.php/VirtualBox/Install_Arch_Linux_as_a_guest#Set_optimal_framebuffer_resolution)

脚步：

1.  安装访客实用程序`sudo pacman -S virtualbox-guest-utils`
2.  确保您下载的访客实用程序与虚拟盒版本相同
    `pacman -Qs virtualbox-guest-utils`
3.  在主机操作系统（windows 或安装 VirtualBox 的位置）中，运行此 `VBoxManage setextradata "<NAME_OF_MACHINE>" "CustomVideoMode1" "1360x768x24"`或您需要的任何分辨率（将 VBoxManage 添加到 PATH 或使用完整路径运行命令）打开到`/etc/default/grub`

5.  将`GRUB_GFXMODE`值更改为`GRUB_GFXMODE=1920x1080,auto`您需要的任何分辨率
6.  `GRUB_GFXPAYLOAD_LINUX=keep`如果尚未完成，请取消注释该行
7.  保存文件并关闭它
8.  运行`grub-mkconfig -o /boot/grub/grub.cfg`以更新 grub 配置
9.  重新开始

现在 GRUB 菜单应该设置为适当的分辨率，登录后拱门也是如此。

# joomla - 如何在安装 xml 或 instalation.php 脚本中指定在默认模板中添加文件夹

> ID：11916479
> 
> 赞同：0
> 
> 时间：2012-08-11T18:18:17.560
> 
> 标签：joomla, joomla-extensions, joomla2.5

我需要安装我在 joomla 2.5 版本上创建的组件。安装要求我在默认模板 (templates/templatename/html/com_test/viewname/default.php) 中添加一个 html 文件夹，以便覆盖另一个组件。那么如何在安装 xml 或 instalation.php 脚本中指定在 joomla 安装的默认模板中添加包含一些其他文件夹和文件的文件夹？

我还需要提到这是我的installation.php 文件的代码。这就是我到目前为止所做的，但我仍然无法弄清楚为什么该文件夹没有被复制。我认为源代码错误，因为它位于我要安装的 zip 文件中

```
<?php
defined('_JEXEC') or die('Restricted access');

/**
 * Script file of HelloWorld component
 */
class com_helloWorldInstallerScript
{
    /**
     * method to install the component
     *
     * @return void
     */
    function install($parent) 
    {

        $db = JFactory::getDBO();
        $query = "
                SELECT ".$db->nameQuote('template')."
                FROM ".$db->nameQuote('#__template_styles')."
                WHERE ".$db->nameQuote('client_id')." = 1 and ".$db->nameQuote('home')." = 1;
              ";
        $db->setQuery($query);
        $AdminTemplate = $db->loadResult();

        $query = "
                SELECT ".$db->nameQuote('template')."
                FROM ".$db->nameQuote('#__template_styles')."
                WHERE ".$db->nameQuote('client_id')." = 0 and ".$db->nameQuote('home')." = 1;
              ";
        $db->setQuery($query);
        $SiteTemplate = $db->loadResult();

        $src = "/viewnamenew";
        $destination = JPATH_SITE."/templates/".$SiteTemplate ."/html/com_test/viewname";
        JFolder::copy($src, $destination);
    }

    /**
     * method to uninstall the component
     *
     * @return void
     */
    function uninstall($parent) 
    {
        // $parent is the class calling this method
        echo '<p>' . JText::_('COM_HELLOWORLD_UNINSTALL_TEXT') . '</p>';
    }

    /**
     * method to update the component
     *
     * @return void
     */
    function update($parent) 
    {
        // $parent is the class calling this method
        echo '<p>' . JText::_('COM_HELLOWORLD_UPDATE_TEXT') . '</p>';
    }

    /**
     * method to run before an install/update/uninstall method
     *
     * @return void
     */
    function preflight($type, $parent) 
    {
        // $parent is the class calling this method
        // $type is the type of change (install, update or discover_install)
        echo '<p>' . JText::_('COM_HELLOWORLD_PREFLIGHT_' . $type . '_TEXT') . '</p>';
    }

    /**
     * method to run after an install/update/uninstall method
     *
     * @return void
     */
    function postflight($type, $parent) 
    {
        // $parent is the class calling this method
        // $type is the type of change (install, update or discover_install)
        echo '<p>' . JText::_('COM_HELLOWORLD_POSTFLIGHT_' . $type . '_TEXT') . '</p>';
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T19:25:31.613

您将需要使用一个installation.php 文件。

如果您想创建一个文件夹，然后在其中复制文件，它将按照以下方式进行

```
$destination = JPATH_SITE."/templates/templatename/html/com_test/viewname";
JFolder::create($destination);
JFile::move($src, $dest); 
```

JPATH_SITE 只是 Joomla 默认目录。$src 是您与组件一起安装的文件的目录，$dest 将再次成为 JPATH_SITE."/templates/templatename/html/com_test/viewname"。

或者（可能更好）您可以通过以下方式在installation.php中编写文件：

```
jimport('joomla.filesystem.file');
$file=JPATH_SITE."templates/templatename/html/com_test/viewname/default.php";
$buffer="Text to put into the file"
JFile::write($file, &$buffer) 
```

这将创建必要的文件夹，而根本不必使用 JFolder。

请注意，如果您正在创建一些文件夹，您应该放入一些空白的 index.html 文件 - 尽管您应该能够轻松地从组件中复制其中的一些文件！

希望这可以帮助

# scala - 编译for循环时出现奇怪的错误

> ID：11916483
> 
> 赞同：6
> 
> 时间：2012-08-11T18:18:43.177
> 
> 标签：scala, loops

在编写一些 Scala 代码时，我在尝试编译代码时收到了一条奇怪的错误消息。我将代码分解为更简单的代码（从语义的角度来看这根本没有意义，但仍然显示错误）。

```
scala> :paste
// Entering paste mode (ctrl-D to finish)

import scala.collection.mutable.ListBuffer

val map = scala.collection.mutable.Map[Int, ListBuffer[Int]]()
for (i <- 1 to 2) {
  map.get(0) match {
    case None => map += (1 -> ListBuffer[Int](1))
    case Some(l: ListBuffer[Int]) => l += i
  }
}

// Exiting paste mode, now interpreting.

<console>:12: error: type arguments [Any] do not conform to trait Cloneable's t
pe parameter bounds [+A <: AnyRef]
              for (i <- 1 to 2) {
                          ^ 
```

在 for 循环的末尾添加额外的行时，代码有效：

```
scala> :paste
// Entering paste mode (ctrl-D to finish)

import scala.collection.mutable.ListBuffer

val map = scala.collection.mutable.Map[Int, ListBuffer[Int]]()
for (i <- 1 to 2) {
  map.get(0) match {
    case None => map += (1 -> ListBuffer[Int](1))
    case Some(l: ListBuffer[Int]) => l += i
  }
  1   // <- With this line it works
}

// Exiting paste mode, now interpreting.

warning: there were 1 unchecked warnings; re-run with -unchecked for details
import scala.collection.mutable.ListBuffer
map: scala.collection.mutable.Map[Int,scala.collection.mutable.ListBuffer[Int]]
= Map(1 -> ListBuffer(1)) 
```

我想，这与匹配案例语句的返回值有关。但我不是 Scala 专家，无法弄清楚此错误消息背后的原因以及我做错了什么。我希望，更聪明的人可以在这里提供帮助。

错误消息背后的原因是什么？match-case-statement 有什么问题？

更新：使用 Scala 2.9.2 测试

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-11T18:43:51.820

您正在看到[此错误](https://issues.scala-lang.org/browse/SI-4938)。它已在 2.10 中修复，并且在[这个答案](https://stackoverflow.com/a/7155449/334519)中有一个简单的解决方法 -只需在某处添加类型注释：

```
for (i <- 1 to 2) {
  map.get(0) match {
    case None => map += (1 -> ListBuffer[Int](1))
    case Some(l: ListBuffer[Int]) => (l += i): Unit
  }
} 
```

# php - Facebook SDK 速成课程（登录和发帖）

> ID：11916486
> 
> 赞同：0
> 
> 时间：2012-08-11T18:19:16.217
> 
> 标签：php, facebook, sdk

我应该使用什么来“使用 facebook 登录”？如果他投票，我还想在用户墙上创建帖子并喜欢我网站的子站点。

我现在尝试了大约 10 个小时。仍然不知道如何开始。我只找到具体的答案，但没有关于如何开始的答案。

我做的身份验证喜欢这个[http://developers.facebook.com/docs/authentication/server-side/](http://developers.facebook.com/docs/authentication/server-side/)

但我也可以使用[http://developers.facebook.com/docs/reference/php/](http://developers.facebook.com/docs/reference/php/) PHP SDK 来做到这一点。

我应该使用哪种变体？我怎么能意识到“如果他投票，我也想在用户墙上创建帖子并喜欢我网站的子站点。”

我不是要完整的代码，只是提示如何开始，使用什么。整个 facebook 文档无助于回答这个最重要和最简单的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T18:40:00.253

你能再告诉我们是什么问题吗？你是什​​么意思'我应该用什么来“用facebook登录”'？

对于启动，我建议您先阅读[此链接](http://www.masteringapi.com/category/tutorials/facebook-tutorials/)。这是一个非常好的关于 PHP SDK 和 Javascript 的 Facebook 教程。他们还教您如何发布到用户墙并检查类似状态。

希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T02:13:26.080

您也可以尝试这些教程，涵盖 facebook js/php sdk 集成的基础知识

[http://thinkdiff.net/facebook/graph-api-javascript-base-facebook-connect-tutorial/](http://thinkdiff.net/facebook/graph-api-javascript-base-facebook-connect-tutorial/)

[http://thinkdiff.net/facebook/php-sdk-3-0-graph-api-base-facebook-connect-tutorial/](http://thinkdiff.net/facebook/php-sdk-3-0-graph-api-base-facebook-connect-tutorial/)

# haskell - Emacs : 在 Haskell-mode (haskell-mode-hook) 中重新定义命令

> ID：11916487
> 
> 赞同：8
> 
> 时间：2012-08-11T18:19:21.770
> 
> 标签：haskell, emacs, macros, elisp, haskell-mode

在haskell-mode的emacs中，我想更改命令

*   “Cx Cs”

到

*   “Cx Cs”后跟“Cc Cl”。

从：[Haskell.org：Emacs/Keybindings 和简单用法中](http://www.haskell.org/haskellwiki/Emacs/Keybindings_and_simple_usage)得到提示，我尝试将以下变体插入 .emacs 文件，但它们不起作用。任何关于我如何实现上述功能的建议都将受到欢迎！谢谢。

***变体 1***

```
(defun haskell-hook ()
  (define-key haskell-mode-map (kbd "C-x C-s") (kbd "C-x C-s C-c C-l"))

(add-hook 'haskell-mode-hook 'haskell-hook) 
```

***变体 2***

```
(defun haskell-hook ()
  (define-key haskell-mode-map (kbd "C-x C-s") 'my-haskell-mode-save-buffer)

(defun my-haskell-mode-save-buffer ()
  (interactive)
  (execute-kbd-macro [?\C-s ?\C-x ?\C-c ?\C-l return]))

(add-hook 'haskell-mode-hook 'haskell-hook) 
```

* * *

* * *

***[编辑 1]*** @Tikhon Jelvis：这绝对是一个很好的学习练习！谢谢。使用您帖子中概述的方法，我将您的功能更改为：

```
(defun my-haskell-mode-save-buffer ()
  (interactive)
  (save-buffer)
  (inferior-haskell-load-file)
  (other-window 1)) 
```

最后一行以编程方式将光标切换到交互式窗口。谢谢你。

***[EDIT2]***其他变体包括：

```
(defun my-haskell-mode-save-buffer ()
  (interactive)
  (execute-kbd-macro (read-kbd-macro "C-c C-l"))
  (other-window 1)) 
```

和 ：

```
(defun my-haskell-mode-save-buffer ()
  (interactive)
  (execute-kbd-macro [?\C-c ?\C-l])
  (other-window 1)) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-11T20:38:13.540

您要做的是运行运行的函数，`C-x C-s`然后运行该函数`C-c C-l`。您可以通过`C-h k`. 也就是说，首先键入`C-h k`您感兴趣的键盘命令。

这给了我们`(save-buffer &optional ARGS)`for`C-x C-s`和`(inferior-haskell-load-file &optional RELOAD)`for `C-c C-l`。这`&optional`意味着你认为它的作用——这个参数是可选的，所以我们不关心它。

现在编写同时执行它们的函数：

```
(defun my-haskell-mode-save-buffer ()
  (interactive)
  (save-buffer)
  (inferior-haskell-load-file)) 
```

现在您可以将这个函数绑定到`C-x C-s`haskell 模式，就像您一直在做的那样：

```
(add-hook 'haskell-mode-hook (lambda () 
                                (local-set-key (kbd "C-x C-s") 'my-haskell-mode-save-buffer))) 
```

编辑：它似乎`C-c C-l`在加载之前默认保存您的文件。这意味着你可以写

```
(add-hook 'haskell-mode-hook (lambda ()
                            (local-set-key (kbd "C-x C-s") 'inferior-haskell-load-file))) 
```

并且无需编写自己的函数即可获得完全相同的效果。但是，我认为以我的方式编写它是一个很好的学习练习：P。每当您想将多个不同的键绑定组合成一个时，这种方法就可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-18T11:44:04.810

接受的答案在 2020 年不起作用。要修复它，您必须替换`(inferior-haskell-load-file)`为`(haskell-process-load-file)`.

所以修复后的功能是

```
(defun haskell-mode-save-load-buffer ()
      (interactive)
      (save-buffer)
      (haskell-process-load-file)) 
```

# c++ - 了解 C++ 集

> ID：11916491
> 
> 赞同：-2
> 
> 时间：2012-08-11T18:19:51.440
> 
> 标签：c++

我正在阅读 c++ 参考并发现以下内容：

> 在内部，集合中的元素总是按照容器构造中特定的严格弱排序标准从低到高排序。

“遵循特定的弱排序标准”是什么意思？弱排序是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T18:22:03.457

它本质上意味着满足某些标准的二进制小于比较：

1.  如果 A 小于 B 则 B 不小于 A

2.  如果 A 不小于 B 且 B 不小于 A 则 A 等于 B

3.  如果 A 小于 B 且 B 小于 C，则 A 小于 C

我想应该根据这个排序标准添加 aa 值不能小于它自己。

满足这些基本类型标准的比较示例是`operator<`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-11T18:21:54.157

出色地

在数学，尤其是序论中，严格的弱序是严格偏序的集合 S 上的二元关系 <也没有 b < a" 是传递的。

来自维基！[http://en.wikipedia.org/wiki/Strict_weak_ordering](http://en.wikipedia.org/wiki/Strict_weak_ordering) 下次请先使用google。

# silverlight - Silverlight MVVM 添加/编辑

> ID：11916493
> 
> 赞同：0
> 
> 时间：2012-08-11T18:19:57.507
> 
> 标签：silverlight, mvvm, add, edit

我必须构建一个表单（XAML），该表单将用于在 DB 中创建记录，稍后将通过传递 ID 进行编辑。表单中会有组合框，这些组合框将从 DB 中填充，并且还会有文本框。我不想为 ADD 和 EDIT 复制 XAML 并尝试尽可能多地重用代码。我怎样才能在 MVVM 中实现这一点？我想使用 MVVM 的最佳实践。如果有人可以提供一个统计点，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T22:07:20.323

您可以使用 Silverlight Toolkit 中的 DataForm，它提供了不同的编辑模式 - 例如添加、编辑。

这是该方法的概述。您将需要两个视图模型。一个用于数据，另一个用于表单。

```
// FormViewModel.cs
public class FormViewModel
{
   public Customer DataItem {get; set;}

   // --------- perform action ---------------
   private ICommand _PerformActionCommand = new DelegateCommand(PerformAction);
   public ICommand PerformActionCommand {
      get { return _PerformActionCommand; }
   }

   public void PerformAction()       
   {
      if (Customer.IsNew)
          InsertCustomer(Customer);
      else
          SaveCustomer(Customer);     
   }

   // ------ Button Label --------------
   public string ButtonLabel {
      get {
         return (Customer.IsNew)? "Add": "Update";
      }
   }
} 
```

这是表格：

```
<UserControl.Resources>
    <local:FormViewModel x:Key="formVM" />
</UserControl.Resources>
<Button 
  Content="{Binding Path=ButtonLabel
                    Source={StaticResource formVM}}"
  Command="{Binding Path=PerformActionCommand, 
                    Source={StaticResource formVM}}" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T18:40:38.097

这是一个非常普遍的场景。

您可以创建一个*XAML*控件/页面，该控件/页面采用特定类型的对象/实例并允许编辑该对象的属性。

在*Edit*的情况下，您传入一个从数据库预填充的对象。

在*Create*的情况下，您传入该类型的新实例。

调用者/主机会知道传递给编辑控件的对象类型。

因此，当该对象通过编辑控件返回时，调用者/主机可以处理向数据库添加/更新。

# jquery-mobile - jQuery Mobile 未插入可折叠部分

> ID：11916500
> 
> 赞同：0
> 
> 时间：2012-08-11T18:20:26.803
> 
> 标签：jquery-mobile

使用 jQuery 移动框架工作。 [文档](http://jquerymobile.com/test/docs/content/content-collapsible-set.html)指出，如果您添加`data-inset="false"`到 `data-role="copllapsible"`可折叠元素，则将采用全屏宽度（实际上文档页面上的示例确实如此）。

当我在我的应用程序中尝试它时，它会失败，并且总是呈现为“插入”元素。

### 标记：

```
 <ul data-role="listview" data-inset="false">
    <li>
      <div data-role="collapsible" data-theme="b" data-inset="false">
        <h4>
          Pad Thai
        </h4>
        <ul data-role="listview">
          <li>
            rice
          </li>
          <li>
            peanuts
          </li>
          <li>
            spicey stuff
          </li>
        </ul>
      </div>
    </li>
    <li>
      Pork
    </li>
    <li>
      Beans
    </li>
  </ul> 
```

我该怎么做才能获得预期的非插图渲染？

（我在[这里开始了小提琴](http://jsfiddle.net/soodesune/m8BBd/3/)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T10:45:13.657

我不确定您到底想要什么，但也许可折叠列表可以提供帮助？请参阅[http://jquerymobile.com/test/docs/lists/lists-collapsible.html](http://jquerymobile.com/test/docs/lists/lists-collapsible.html)

# ruby-on-rails - rails dbconsole 将我放入我的“测试”数据库

> ID：11916501
> 
> 赞同：0
> 
> 时间：2012-08-11T18:20:42.803
> 
> 标签：ruby-on-rails, rails-console

出于某种原因，当我运行`rails dbconsole`命令时，它会打开我的测试数据库。我认为我必须有一些文件配置错误。我什至不知道从哪里开始寻找纠正这个问题。它真的很烦人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T18:31:47.993

Config/database.yml 将是第一个查看的地方。确保 dev 和 test 具有不同的数据库名称。

# objective-c - 键值观察中使用的上下文参数是什么

> ID：11916502
> 
> 赞同：27
> 
> 时间：2012-08-11T18:20:43.830
> 
> 标签：objective-c, cocoa, cocoa-touch, key-value-observing

在以下用于注册键值通知的方法中，上下文参数的用途是什么。文档只是将其表示为任意数据集。

```
addObserver:self forKeyPath:@"selectedIndex" options:NSKeyValueObservingOptionNew context:nil 
```

有人可以阐明它背后的目的是什么...

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-08-11T20:36:35.953

我希望这个解释不是太抽象而无法理解。

假设您创建了一个类`MyViewController`，它是 的子类`UIViewController`。你没有源代码`UIViewController`。

现在您决定`MyViewController`使用 KVO 来`center`观察`self.view`. 所以你适当地将自己添加为观察者：

```
- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];
    [self.view addObserver:self forKeyPath:@"center" options:0 context:NULL];
}

- (void)viewDidDisappear:(BOOL)animated {
    [self.view removeObserver:self forKeyPath:@"center"];
    [super viewDidDisappear:animated];
} 
```

这里的问题是您不知道是否`UIViewController`也将自己注册为`self.view`'s的观察者`center`。如果是这样，那么您可能会遇到两个问题：

1.  当视图的中心发生变化时，您可能会被调用两次。
2.  当您将自己作为观察者移除时，您可能还会移除`UIViewController`的 KVO 注册。

您需要一种将自己注册为观察者的方法，该方法与`UIViewController`的 KVO 注册不同。这就是`context`参数的来源。您需要传递一个您绝对`context`确定*不用*作参数的值。当您取消注册时，您会再次使用相同的内容，这样您只会删除您的注册，而不是' 注册。在您的方法中，您需要检查消息是否适合您或您的超类。`UIViewController`*`context``context``UIViewController``observeValueForKeyPath:ofObject:change:context:``context`*

 *确保您使用`context`没有其他用途的一种方法是`static`在`MyViewController.m`. 注册和注销时使用它，如下所示：

```
static int kCenterContext;

- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];
    [self.view addObserver:self forKeyPath:@"center" options:0 context:&kCenterContext];
}

- (void)viewDidDisappear:(BOOL)animated {
    [self.view removeObserver:self forKeyPath:@"center" context:&kCenterContext];
    [super viewDidDisappear:animated];
} 
```

然后在你的`observeValueForKeyPath:...`方法中，像这样检查它：

```
- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object
    change:(NSDictionary *)change context:(void *)context
{
    if (context == &kCenterContext) {
        // This message is for me.  Handle it.
        [self viewCenterDidChange];
        // Do not pass it on to super!
    } else {
        // This message is not for me; pass it on to super.
        [super observeValueForKeyPath:keyPath ofObject:object
            change:change context:context];
    }
} 
```

现在，您可以保证不会干扰超类的 KVO（如果有的话）。如果有人创建了一个`MyViewController`也使用 KVO 的子类，它不会干扰您的 KVO。

还要注意，您可以为观察到的每个关键路径使用不同的上下文。然后，当系统通知您更改时，您可以检查上下文而不是检查密钥路径。测试指针相等性比检查字符串相等性快一点。例子：

```
- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object
    change:(NSDictionary *)change context:(void *)context
{
    if (context == &kCenterContext) {
        [self viewCenterDidChange];
        // Do not pass it on to super!
    } else if (context == &kBackgroundColorContext) {
        [self viewBackgroundDidChange];
        // Do not pass it on to super!
    } else if (context == &kAlphaContext) {
        [self viewAlphaDidChange];
        // Do not pass it on to super!
    } else {
        // This message is not for me; pass it on to super.
        [super observeValueForKeyPath:keyPath ofObject:object
            change:change context:context];
    }
} 
```*

# jquery - 让 div 飞过屏幕

> ID：11916509
> 
> 赞同：0
> 
> 时间：2012-08-11T18:21:25.757
> 
> 标签：jquery, css, jquery-animate, action

我有两个袋子图像，我想同时飞过屏幕。最后，它们将消失，然后重新出现在不同的位置，除非刷新页面，否则它们将一直停留在那里。

```
$('.main_carousel_bag').fadeOut(000).delay(4000).fadeIn(1500);  

$('.left_bag_action')
.animate({ left: '+=960', top:'-=400'}, 500)
.animate({ visibility: 'hidden'}, 0)
.delay(1000)
.animate({ visibility: 'visible'}, 0)
.animate({ left: '-=960'}, 1000)
.animate({ visibility: 'hidden'}, 0)
; 
```

main_carousel_bag 是一个位于正确位置的 div，无论窗口大小如何。它会在 4 秒延迟后淡入。这是完美的工作。

left_bag_action 是一个 div，它从屏幕左侧（绝对定位）开始，然后执行请求的操作。这些动作完美无缺，但是我希望袋子消失，而另一个（right_bag_action）从另一个方向飞过屏幕。任何帮助是极大的赞赏！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T23:51:30.880

您可以使用回调函数，这是动画完成时触发的代码

例如...

```
$('.main_carousel_bag').fadeOut(000).delay(4000).fadeIn(1500);  

$('.left_bag_action')
.animate({ left: '+=960', top:'-=400'}, 500)
.animate({ visibility: 'hidden'}, 0)
.delay(1000)
.animate({ visibility: 'visible'}, 0)
.animate({ left: '-=960'}, 1000)
.animate({ visibility: 'hidden'}, 0, function(){
    //.....Some code here for right_bag_action....//
}) 
```

# windows-7 - Git Push origin Master Hangs - cygwin w/windows 7

> ID：11916513
> 
> 赞同：6
> 
> 时间：2012-08-11T18:22:05.183
> 
> 标签：windows-7, github, cygwin, push

在 Windows 7 机器上使用 cygwin 将我的 first_app 推送到 git hub。使用命令 git push origin master 我没有得到任何回应。似乎它挂起，我必须按 ctrl c。我已经将我的 ssh 密钥添加到 github...谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T17:20:17.600

如评论中所述，使用 msysgit 或 GitHub for Windows（包括 msysgit）是更安全的选择。

它将在 处访问您的密钥，除非您明确定义 HOME ，否则`HOME`默认情况下该密钥位于以下位置：有关更多信息，请参见“ [MSysGit and ssh config.missing](https://stackoverflow.com/questions/10122439/msysgit-and-ssh-config-missing/10122865#10122865) ”。`%HOMEDRIVE%\%HOMEPATH%`

# ios - 在 OpenGL ES 2.0 iOS5 模板中，程序在没有着色器的情况下工作。怎么来的？

> ID：11916516
> 
> 赞同：0
> 
> 时间：2012-08-11T18:22:14.873
> 
> 标签：ios, xcode, opengl-es-2.0, shader

我试图将项目树（Shader.vsh 和 Shader.fsh）中的文件重命名为（Shader2.vsh 和 Shader2.fsh），我希望它不起作用，但它起作用了。

我将 ViewController.m 中的文件名重命名为：

```
vertShaderPathname = [[NSBundle mainBundle] pathForResource:@"Shader" ofType:@"vsh"]; 
```

成为：

```
vertShaderPathname = [[NSBundle mainBundle] pathForResource:@"Shader2" ofType:@"vsh"]; 
```

它不起作用。即使您重命名文件，它也始终使用名称 Shader.vsh。

此外，我试图完全删除该文件，它仍然有效。它显示两个立方体。怎么来的！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T17:51:11.103

这通常是 Xcode 的问题。如果您只是点击运行按钮，您在项目中删除或重命名的文件将不会从构建的应用程序包中删除。这使构建速度更快，但可能会导致像您这样的奇怪问题。

解决方案，或者实际上只是一种解决方法，是在删除或重命名资源后清理您的项目。可能不是每次都需要，但如果您遇到资源问题，总是值得一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T15:53:09.727

可能是它使用创建默认着色器的 GLKit。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T17:32:13.717

因为在使用 shders 和 GLKit 呈现的默认模板中。

您应该删除 GLKit 代码。

例如

```
 - (void)glkView:(GLKView *)view drawInRect:(CGRect)rect
    {
        glClearColor(0.65f, 0.65f, 0.65f, 1.0f);
        glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

        glBindVertexArrayOES(_vertexArray);

        // Render the object with GLKit
        [self.effect prepareToDraw]; // GLKit used default shaders

        glDrawArrays(GL_TRIANGLES, 0, 36); // render with GLKit

        // Render the object again with ES2
        glUseProgram(_program);  // enable shader

// set parametres
        glUniformMatrix4fv(uniforms[UNIFORM_MODELVIEWPROJECTION_MATRIX], 1, 0, _modelViewProjectionMatrix.m);
        glUniformMatrix3fv(uniforms[UNIFORM_NORMAL_MATRIX], 1, 0, _normalMatrix.m);

        glDrawArrays(GL_TRIANGLES, 0, 36); // render with Sahder, because glUseProgram(_program);
    } 
```

在 setupGL 你可以找到 [self loadShaders];

# ruby-on-rails - 新手黄瓜挂机 $?.success? 没有方法错误

> ID：11916518
> 
> 赞同：4
> 
> 时间：2012-08-11T18:22:18.367
> 
> 标签：ruby-on-rails, ruby, cucumber

所以我在“Pragmatic Cucumber”中的第一个项目中，我的步骤定义中出现了一个未定义的方法错误。错误来自 $?.success?。不用说我很困惑。我错过了宝石还是什么？

这是步骤定义

```
Given /^the input "(.*?)"$/ do |input|
  @input = input
end

When /^the calculator is run$/ do
  @output = 'ruby calc.rb #{@input}'
  raise('Command failed!') unless $?.success? #$?.success? is failing. look that up.
end

Then /^the output should be "(.*?)"$/ do |arg1|
  pending # express the regexp above with the code you wish you had
end 
```

这是错误。

```
Feature: Adding

  Scenario: Add two numbers       # features/adding.feature:3
Given the input "2+2"         # features/step_definitions/calculator_steps.rb:1
When the calculator is run    # features/step_definitions/calculator_steps.rb:5
  undefined method `success?' for nil:NilClass (NoMethodError)
  ./features/step_definitions/calculator_steps.rb:7:in `/^the calculator is run$/'
  features/adding.feature:5:in `When the calculator is run'
Then the output should be "4" # features/step_definitions/calculator_steps.rb:10

Failing Scenarios:
cucumber features/adding.feature:3 # Scenario: Add two numbers

1 scenario (1 failed)
3 steps (1 failed, 1 skipped, 1 passed)
0m0.012s 
```

那么，这里有什么问题呢？我知道.success？是正确的，为什么不是$？注册？谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-11T18:36:21.750

您需要使用反引号而不是引号来运行您的命令：

```
@output = 'ruby calc.rb #{@input}' 
```

应该：

```
@output = `ruby calc.rb #{@input}` 
```

编辑：

刚刚对此进行了测试-您要非常小心地使用此构造。`$?`在 Cucumber 场景之间不会清除的值，因此很容易对在前一个场景中运行的命令的结果进行断言。您可能希望研究[Aruba](https://github.com/cucumber/aruba)，它专为需要 Cucumber 执行或针对命令行程序断言的情况而设计。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-21T16:20:45.537

代码`ruby calc.rb #{@input}`是一个 Shell 命令——包括反引号中的命令是告诉 Ruby 你想要执行一个 Shell 命令的方法之一。[此链接](http://tech.natemurray.com/2007/03/ruby-shell-commands.html)将为您提供有关在 Ruby 中运行 Shell 命令的其他方法的一些信息。

[Pragmatic Bookshelf 论坛上的此讨论](https://forums.pragprog.com/forums/166/topics/10311)专门回答了您的问题，并且围绕主题本身进行了一些讨论，如果您想了解更多信息，这总是好的。如果您对 Cucumber 书有特别的疑问，并想从马嘴里得到答案，那么这个论坛可能是您最好的选择。

# android - RESTORE_TRANSACTIONS 在 android 中的应用计费返回请求是什么？

> ID：11916519
> 
> 赞同：1
> 
> 时间：2012-08-11T18:22:21.537
> 
> 标签：android, in-app-billing

嗨，我只想知道应用计费中的 RESTORE_TRANSACTIONS 请求是返回用户购买的所有应用程序的所有购买项目，还是只返回来自该特定应用程序的项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T03:38:16.130

只是该特定应用程序的购买。它会引发 PURCHASE_STATE_CHANGED 事件，就像用户在您的应用中进行了新的应用内购买一样。如果用户在另一个应用中进行购买，您的应用也不会收到通知。同样的逻辑。

# c# - 用于手势识别的 HU 和 Zernike 矩

> ID：11916522
> 
> 赞同：1
> 
> 时间：2012-08-11T18:22:44.343
> 
> 标签：c#, .net, image-processing, computer-vision, gesture-recognition

我正在使用 HU-Moments 和 Zerkine 时刻进行手势识别。我已经计算了 HU-Moments，但我无法得到结果。结果是；

> HU-矩：0, 0.0526892508239683, 0, 0, 0, 0

对于附在此处的图像。我在此处引用过：[Wikipedia Here](http://en.wikipedia.org/wiki/Image_moment)。如果需要代码，我稍后会提供，但我的问题是，我为图像计算的时刻是否正确？我一定会问是否有人共享`Zernike-Moments`. 我的下一步是计算`Zernike-Moments`，但我发现的是[这个](http://homepages.inf.ed.ac.uk/rbf/CVonline/LOCAL_COPIES/SHUTLER3/node11.html)。我可以继续吗？

![手势边缘检测图像](../Images/86c934138a8915b20feddd6a179ce61b.png)

# android - 应用程序在模拟器上运行良好，但在手机上运行时崩溃

> ID：11916530
> 
> 赞同：0
> 
> 时间：2012-08-11T18:23:28.167
> 
> 标签：android, android-emulator, android-asynctask

我正在编写一个应用程序，其中一个功能是从 android 设备更新外部 sql 数据库中的用户配置文件。所以我使用后台异步任务线程向 update.php 文件发送请求。应用程序在模拟器 2.3.3 上运行良好，它成功更新了数据库中的配置文件，但是当我尝试在平板电脑或具有 android 4.0.3 的手机上运行它时，需要很长时间才能在 onPreExecute() 中定义的 ProgressDialog 消失并且它给我一个错误。这是一个堆栈：

```
08-12 08:46:14.303: E/Buffer Error(3167): Error converting result java.io.IOException: Attempted read on closed stream.
08-12 08:46:14.303: D/Update Response(3167): {"student":[{"understandPref":"0","genderPref":"Male","username":"ma","secondLangPref":"none","bilingualismPref":"no","ethnicPref":"American","lichPref":"0","pobPref":"Argentina","password":"fd","speakPref":"0","domLangPref":"US\/English","agePref":"15"}],"success":1}
08-12 08:46:14.303: D/AndroidRuntime(3167): Shutting down VM
08-12 08:46:14.303: W/dalvikvm(3167): threadid=1: thread exiting with uncaught exception (group=0x409e21f8)
08-12 08:46:14.323: E/AndroidRuntime(3167): FATAL EXCEPTION: main
08-12 08:46:14.323: E/AndroidRuntime(3167): java.lang.IllegalArgumentException: View not attached to window manager
08-12 08:46:14.323: E/AndroidRuntime(3167):     at android.view.WindowManagerImpl.findViewLocked(WindowManagerImpl.java:587)
08-12 08:46:14.323: E/AndroidRuntime(3167):     at android.view.WindowManagerImpl.removeView(WindowManagerImpl.java:324)
08-12 08:46:14.323: E/AndroidRuntime(3167):     at android.view.WindowManagerImpl$CompatModeWrapper.removeView(WindowManagerImpl.java:151)
08-12 08:46:14.323: E/AndroidRuntime(3167):     at android.app.Dialog.dismissDialog(Dialog.java:328)
08-12 08:46:14.323: E/AndroidRuntime(3167):     at android.app.Dialog$1.run(Dialog.java:119)
08-12 08:46:14.323: E/AndroidRuntime(3167):     at android.app.Dialog.dismiss(Dialog.java:313)
08-12 08:46:14.323: E/AndroidRuntime(3167):     at edu.neiu.voiceofchicago.activities.SettingsActivity$UpdateAccount.onPostExecute(SettingsActivity.java:519)
08-12 08:46:14.323: E/AndroidRuntime(3167):     at edu.neiu.voiceofchicago.activities.SettingsActivity$UpdateAccount.onPostExecute(SettingsActivity.java:1)
08-12 08:46:14.323: E/AndroidRuntime(3167):     at android.os.AsyncTask.finish(AsyncTask.java:602)
08-12 08:46:14.323: E/AndroidRuntime(3167):     at android.os.AsyncTask.access$600(AsyncTask.java:156)
08-12 08:46:14.323: E/AndroidRuntime(3167):     at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:615)
08-12 08:46:14.323: E/AndroidRuntime(3167):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-12 08:46:14.323: E/AndroidRuntime(3167):     at android.os.Looper.loop(Looper.java:137)
08-12 08:46:14.323: E/AndroidRuntime(3167):     at android.app.ActivityThread.main(ActivityThread.java:4424)
08-12 08:46:14.323: E/AndroidRuntime(3167):     at java.lang.reflect.Method.invokeNative(Native Method)
08-12 08:46:14.323: E/AndroidRuntime(3167):     at java.lang.reflect.Method.invoke(Method.java:511)
08-12 08:46:14.323: E/AndroidRuntime(3167):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
08-12 08:46:14.323: E/AndroidRuntime(3167):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
08-12 08:46:14.323: E/AndroidRuntime(3167):     at dalvik.system.NativeStart.main(Native Method) 
```

为什么它可以在模拟器上运行而不能在手机上运行？请指教。谢谢。

JSONParser.class

```
public class JSONParser {

static InputStream is = null;
static JSONObject jObj = null;
static String json = "";

// constructor
public JSONParser() {

}

// function get json from url
// by making HTTP POST or GET method
public JSONObject makeHttpRequest(String url, String method,
        List<NameValuePair> params) throws IOException {

    // Making HTTP request
    try {

        // check for request method
        if(method == "POST"){
            // request method is POST
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);
            httpPost.setEntity(new UrlEncodedFormEntity(params));

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();

        }else if(method == "GET"){
            // request method is GET
            DefaultHttpClient httpClient = new DefaultHttpClient();
            String paramString = URLEncodedUtils.format(params, "utf-8");
            url += "?" + paramString;
            HttpGet httpGet = new HttpGet(url);

            HttpResponse httpResponse = httpClient.execute(httpGet);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();
        }           

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }catch (Exception ex)
    {
        Log.d("Networking", ex.getLocalizedMessage());
        throw new IOException("Error connecting");
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    // return JSON String
    return jObj;

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T00:04:29.300

你的问题是

> 08-12 08:46:14.303：E/Buffer 错误（3167）：转换结果时出错 java.io.IOException：尝试在关闭的流上读取。

将您从流部分读取的内容放入 try catch 块中。很可能您与 php 文件的连接已关闭。

# css - 强制嵌套 div 的最小高度为 100%？

> ID：11916531
> 
> 赞同：13
> 
> 时间：2012-08-11T18:23:29.660
> 
> 标签：css, layout, position, height

我知道`min-height: 100%`如果父元素有一些高度的数值，那只会占用其父元素高度的至少 100%，但是如果我有一些嵌套的 div 并且我希望它们都有一个最小高度怎么办100%？我试过`min-height:inherit`了，但也没有用？我知道我可以通过简单地检查文档加载时的浏览器高度值然后将其分配给嵌套 div 的 min-height 属性来使用 JavaScript 解决这个问题，但我想知道是否可以解决这个问题只有CSS？

**编辑**：我还应该提到，我需要最外层的 div 和嵌套的 div 都具有 100% 的最小高度，以便它们至少占据浏览器的高度，但如果需要可以扩展。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-11T18:29:01.667

`min-height: inherit;`应该工作：http: [//jsfiddle.net/ugxbs/](http://jsfiddle.net/ugxbs/)

**编辑**

至于百分比值和预期行为，*嵌套*最小高度背后没有逻辑。您应该做的是`height`为所有父母使用该属性，然后将 min-height 添加到 inner most `DIV`。

前：

```
<html>
    <body>
        <div class="outer">
            <div class="inner"></div>
        </div>
    </body>
</html> 
```

CSS：

```
html, body, .outer { height: 100% }
.inner { min-height: 100%; } 
```

[http://jsfiddle.net/4PsdT/](http://jsfiddle.net/4PsdT/)

这样，您就告诉浏览器将所有外部元素从顶部 ( `HTML`) 设置为 100% 的高度。这将使这些元素在浏览器高度上伸展。然后只需将 a 添加`min-height`到包含内容的最里面的元素。

设置 a`height`并不意味着它的儿童内容过多会掉出来，除非你添加`overflow:hidden;`. ​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T07:36:14.583

我可以使它与属性高度一起工作，但不是最小高度。

[http://jsfiddle.net/zDVqm/](http://jsfiddle.net/zDVqm/)

# iphone - 将 plist 复制到文档目录并从中读取

> ID：11916533
> 
> 赞同：1
> 
> 时间：2012-08-11T18:23:31.330
> 
> 标签：iphone, objective-c, ios, xcode

当 AppDelegate 中的 didFinishLaunchingWithOptions 时，我将 plist 复制到文档目录，如下所示：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
[self performSelector:@selector(copyPlist)];
return YES;
}

- (void)copyPlist {
    NSFileManager *fileManger=[NSFileManager defaultManager];
    NSError *error;
    NSArray *pathsArray = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask,YES);

    NSString *doumentDirectoryPath=[pathsArray objectAtIndex:0];

    NSString *destinationPath= [doumentDirectoryPath stringByAppendingPathComponent:@"Obj.plist"];

    if ([fileManger fileExistsAtPath:destinationPath]){
        NSLog(@"database localtion %@",destinationPath);
        return;
    }
    NSString *sourcePath=[[[NSBundle mainBundle] resourcePath]stringByAppendingPathComponent:@"Obj.plist"];

    [fileManger copyItemAtPath:sourcePath toPath:destinationPath error:&error];
} 
```

然后我试图在我的视图中显示 plist 的内容，如下所示：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *path = [documentsDirectory stringByAppendingPathComponent:@"Obj.plist"];
NSLog(@"plist path %@", path);

sortedObj = [[NSMutableArray alloc]initWithContentsOfFile:path];
NSLog(@"objects %@", sortedObj); 
```

* * *

记录结果：

数据库位置：

```
/Users/kdb/Library/Application Support/iPhone Simulator/5.1/Applications/4E165740-01CD-4ED3-8971-FDCCB1751DD1/Documents/Obj.plist 
```

plist路径：

与数据库位置相同

对象：

（空值）

内容为空。如何让它发挥作用？

plist 是一个带有字典的数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T18:40:40.777

您是否尝试过 NSLog 包中资源的路径？它看起来正确吗？除此之外，我认为您应该使用其他方法找到它：

```
- (NSString *)pathForResource:(NSString *)name ofType:(NSString *)extension 
```

因此，您的方法调用将是：

```
NSString *sourcePAth = [[NSBundle mainBundle] pathForResource:@"Obj" ofType:@"plist"]; 
```

那么，我认为你做不到`[[NSMutableArray alloc] initWithContentsOfFile:path];`。相反，尝试使用 NSDictionary：

```
NSDictionary *loadedPlist = [[NSDictionary alloc] initWithContentsOfFile:pathString];
//and then, if you need to edit it:
NSMutableDictionary *workingCopy = [loadedPlist mutableCopy]; 
```

* * *

只需阅读您对问题的编辑。plist 不能被视为数组，它们始终是字典，因此必须使用 NSDictionary 反序列化。

我不知道为什么它只在没有日志的情况下第一次工作。你能把它们贴出来吗？此外，即使它似乎使用 NSMutableArray 工作，如果您坚持反序列化的 NSDisctionary 样式，调试问题会更容易。

# matlab - 多个字段的Matlab箱线图

> ID：11916539
> 
> 赞同：1
> 
> 时间：2012-08-11T18:24:37.323
> 
> 标签：matlab, multiple-databases, boxplot

我有这个 matlab 文件，其中有一个名为“数据”的字段。在“数据”中，我有很多不同债券的字段（x5Q12 ...等）。 ![在此处输入图像描述](../Images/69fddc3593bbae3a3d6f23282157ce5e.png)

我正在尝试生成一个包含每个字段的一列的箱形图（即其中包含 36 个框的箱形图）。我尝试了这段代码（例如，为所有债券中的第 2 列绘制一个框），但它对我不起作用：

```
boxplot(gilts_withoutdates.data.:(:,2));figure(gcf); 
```

我知道我对调用结构中不同级别的理解在这里是一个问题。请问有什么建议吗？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T04:18:41.983

您可以使用[STRUCTFUN](http://www.mathworks.com/help/techdoc/ref/structfun.html)从结构的所有字段的特定列中提取数据。

```
col2plot = 2; %# this is the column you want to plot

%# return, for each field in the structure, the specified
%# column in a cell array
data2plot = structfun(@(x){x(:,col2plot)},gilts_withoutdates.data);

%# convert the cell array into a vector plus group indices
groupIdx = arrayfun(@(x)x*ones(size(data2plot{x})),1:length(data2plot),'uni',0);
groupIdx = cat(1,groupIdx{:});
data2plot = cat(1,data2plot{:});

%# create a compact boxplot
boxplot(data2plot,groupIdx,'plotStyle','compact','labels',labels) 
```

如果您对数据的分布感兴趣，我可以推荐我的函数[distributionPlot](http://www.mathworks.com/matlabcentral/fileexchange/23661-violin-plots-for-plotting-multiple-distributions-distributionplot-m)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T19:08:36.697

```
B=gilts_withoutdates.data;
b=fieldnames(B);
for a=1:numel(b)
  boxplot(B.(b{a})); fig;
end 
```

要为每个字段的 5 列数据中的每一列绘制箱线图，您可以这样做：

```
 pos=1;
   for i = 1:numel(b)
    for ii=1:5
       subplot(numel(b),5,pos);boxplot(B.(b{i})(:,ii));pos=pos+1;
    end
   end 
```

# c# - 在设置中使用自己的枚举

> ID：11916540
> 
> 赞同：8
> 
> 时间：2012-08-11T18:24:45.840
> 
> 标签：c#, visual-studio

我想在项目设置中使用我自己的枚举（来自 Visual Studio、菜单项目、属性、选项卡设置）。

我可以在那里选择很多默认类型，但甚至可以从我的解决方案中的其他项目中选择类型，但不能选择项目本身。

是否可以使用项目本身的枚举类型作为设置类型？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T18:35:57.620

是的，但它需要一些玩弄。有关如何完成它的指示，请参阅[这篇文章。](http://blog.coretech.dk/jgs/add-custom-data-type-structure-to-mysettings-in-vbnet-wpf/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T18:31:02.600

据我所知，不是。

但是您可以执行以下操作：

```
string setting = ConfigurationManager.AppSettings.Get("yourSetting");
YourEnum yourEnumVariable = (YourEnum)Enum.Parse(typeof(YourEnum), setting); 
```

（只是写在这里没有IDE语法检查，请原谅任何语法错误。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-25T12:14:33.210

容易地。

尽管选择列表向您显示了除您自己之外的所有类型的程序集的类型，但如果您`NamespaceQualified.NameOfYourEnum`在底部的文本框中键入确切的内容，它将起作用，并且 GUI 将向您显示枚举值的下拉列表。

在 VS2013 中测试。

如果你犯了错误，它会在构建过程中被捕获，你可以编辑 settings.settings 文件来修复。

# javascript - ipad app 同时显示两个页面

> ID：11916546
> 
> 赞同：0
> 
> 时间：2012-08-11T18:26:05.177
> 
> 标签：javascript, objective-c, ipad, uiwebview

我正在编写一个语言翻译 iPad 应用程序。目的是将屏幕分成两个水平部分。上半部分将显示一篇英文文章，而下半部分将显示翻译后的中文文章。我需要实现以下目标：

1.  单击上框架中的文本后，其在下框架中的翻译应突出显示。

2.  两个部分应该同步滚动

我正在使用带有 UIWebview 的本地 HTML 页面。

Q1。如果我使用一个带有两个框架的 UIWebview，我无法实现单独滚动（即，具有两个框架的整个页面作为一组滚动）。有没有办法实现个人滚动？

Q2。如果我使用两个 UIWebView，如何从一个 UIWebView 捕获 DOM 事件并将其发送到另一个 UIWebView？

Q3。有没有更好的方法来实现同样的目标？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T04:31:54.943

在其中任何一个上使用带有 JavaScript 的两个 UIWebView 都可以。`span/window.location`在源UIWebview中使用JS拦截点击，在目标UIWebView中调用JS`- (BOOL)webView:(UIWebView*)webView shouldStartLoadWithRequest:(NSURLRequest*)request navigationType:(UIWebViewNavigationType)navigationType`通过`[targetWebView stringByEvaluatingJavaScriptFromString:jsCommand];`

# c++ - C ++中的模板，为什么必须使用枚举

> ID：11916547
> 
> 赞同：9
> 
> 时间：2012-08-11T18:26:07.910
> 
> 标签：c++, effective-c++

我对 Scott Meyers 的“Effective C++”中的第 48 项有一个简短的问题。我只是不明白从下面的书中复制的代码，

```
 #include <iostream>
    using namespace std;

    template <unsigned n>
    struct Factorial
    {
       enum { value=n*Factorial<n-1>::value };
    };

    template <>
    struct Factorial<0>
    {
        enum { value=1};
    };

    int main()
    {
        cout<<Factorial<5>::value<<endl;
        cout<<Factorial<10>::value<<endl;
    } 
```

为什么我必须在模板编程中使用枚举？有没有其他方法可以做到这一点？我在这里先向您的帮助表示感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-11T18:28:16.870

你也可以使用`static const int`：

```
template <unsigned n>
struct Factorial
{
   static const int value= n * Factorial<n-1>::value;
};

template <>
struct Factorial<0>
{
   static const int value= 1;
}; 
```

这也应该没问题。两种情况下的结果都是一样的。

或者您可以使用现有的类模板，例如[`std::integral_constant`](http://en.cppreference.com/w/cpp/types/integral_constant)（仅在 C++11 中）：

```
template <unsigned n>
struct Factorial : std::integral_constant<int,n * Factorial<n-1>::value> {};

template <>
struct Factorial<0> : std::integral_constant<int,1> {}; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-11T23:21:00.687

我看到其他答案很好地涵盖了替代方法，但没有人解释为什么需要`enum`(or `static const int`)。

首先，考虑以下非模板等效项：

```
#include <iostream>

int Factorial(int n)
{
    if (n == 0)
        return 1;
    else
        return n * Factorial(n-1);
}

int main()
{
    std::cout << Factorial(5) << std::endl;
    std::cout << Factorial(10) << std::endl;
} 
```

你应该能够很容易地理解它。然而，它的缺点是阶乘的值将在运行时计算，即在运行程序之后，编译器将执行递归函数调用和计算。

模板方法的想法是在编译时执行相同的计算，并将结果放入生成的可执行文件中。换句话说，您提供的示例可以解决类似问题：

```
int main()
{
    std::cout << 120 << std::endl;
    std::cout << 3628800 << std::endl;
} 
```

但为了实现这一点，您必须“欺骗”编译器执行计算。为了做到这一点，您需要让它将结果存储在某个地方。

`enum`正是为了做到这一点。我将尝试通过指出在那里*不起作用*的方法来解释这一点。

如果您尝试使用常规`int`，它将无法正常工作，因为非静态成员 like`int`仅在实例化对象中才有意义。而且你不能像这样给它赋值，而是在构造函数中这样做。平原是`int`行不通的。

您需要一些可以在未实例化的类上访问的东西。你可以试试`static int`，但还是不行。`clang`会给你一个非常简单的问题描述：

```
c.cxx:6:14: error: non-const static data member must be initialized out of line
                static int value=n*Factorial<n-1>::value ;
                           ^     ~~~~~~~~~~~~~~~~~~~~~~~ 
```

如果你真的把这些定义放在外面，代码会编译，但会产生两个`0`s。那是因为这种形式将值的计算延迟到程序的初始化，并且不能保证正确的顺序。很可能`Factorial<n-1>::value`在计算之前获得了 a ，因此`0`被返回。此外，它仍然不是我们真正想要的。

最后，如果你把它放在`static const int`那里，它将按预期工作。那是因为`static const`必须在编译时计算，而这正是我们想要的。让我们再次输入代码：

```
#include <iostream>

template <unsigned n>
struct Factorial
{
    static const int value=n*Factorial<n-1>::value ;
};

template <>
struct Factorial<0>
{
    static const int value=1;
};

int main()
{
    std::cout << Factorial<5>::value << std::endl;
    std::cout << Factorial<10>::value << std::endl;
} 
```

首先你实例化`Factorial<5>`；`static const int`强制编译器必须在编译器时计算它的值。实际上，它`Factorial<4>`在必须计算另一个值时实例化类型。这一直持续到它`Factorial<0>`到达可以在没有进一步实例化的情况下计算值的位置。

所以，这就是替代方式和解释。我希望它至少对理解代码有所帮助。

您可以将这种模板视为我在开头发布的递归函数的替代品。您只需替换：

*   `return x;`与`static const int value = ...`,
*   `f(x-1)`与`t<x-1>::value`,
*   并`if (n == 0)`具有专业化`struct Factorial<0>`。

而对于它`enum`本身，正如已经指出的那样，它在示例中用于强制执行与`static const int`. 就像那样，因为所有`enum`值都需要在编译时知道，所以实际上每个请求的值都必须在编译时计算。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-11T21:53:05.870

更具体地说，“枚举黑客”之所以存在，是因为`static const int`当时许多编译器不支持更正确的做法。它在现代编译器中是多余的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-11T21:44:52.370

你可以`static const int`像纳瓦兹所说的那样使用。我猜 Scott Myers 使用枚举的原因是编译器对静态 const 整数的类内初始化的支持在他写这本书时有点受限。所以枚举是一个更安全的选择。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-17T11:00:13.190

您可以为此使用 int 而不是 static const 它，如下所示：

```
 template<int n>
struct Factorial
{
    int val{ n*Factorial<n - 1>().val };
};

template<>
struct Factorial<0>
{
    int val{1};
};

int main()
{
    cout << "Factorial 5: " << Factorial<5>().val << endl;
} 
```

您还可以使用函数模板而不是结构/类模板：

```
template<int n>
int fact()
{
    return n*fact<n - 1>();
}

template <>
int fact<0>()
{
    return 1;
}

int main()
{
    cout << "Fact 5: " << fact<5>() << endl;
} 
```

# dojo - dijit.form.FilteringSelect onChange 事件未触发

> ID：11916548
> 
> 赞同：1
> 
> 时间：2012-08-11T18:26:49.677
> 
> 标签：dojo

嗨，我正在使用连接来设置 onChange 事件，但它没有触发 - 没有生成错误，我不知道问题出在哪里。

```
 <select name='value(serviceRefId)' dojoType='dijit.form.FilteringSelect' id='serviceRefId'>
 <option value='0'></option>
 <option value='10109'>General Surgery</option>
 <option value='10108'>Internal Medicine</option>
 <option value='10111'>Laboratory</option>
 <option value='10113'>Other</option>
 <option value='10112'>Paediatrics</option>
 <option value='10110'>Radiology</option>
 </select>
 <script type="text/javascript">
      dojo.addOnLoad(function(){
           dojo.connect(dojo.byId("serviceRefId"), 'onChange', function(event){ 
                 alert('ok ' + event);
           });
      });
 </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T19:07:06.407

DOM 元素上没有 onChange，它将触发。相反，有一个具有该名称的 dijit (widget) 形式的事件 - 但您需要使用它`dijit.byId`来获取该组件。

试试这个

```
 <script type="text/javascript">
   dojo.addOnLoad(function(){
       // dojo.byId returns a DOMNode, not a dijit instance, replace dojo with dijit
       dojo.connect(dijit.byId("serviceRefId"), 'onChange', function(event){ 
             alert('ok ' + event);
       });
   });
 </script> 
```

# c++ - 如何在字符串中搜索 C++

> ID：11916550
> 
> 赞同：1
> 
> 时间：2012-08-11T18:26:58.810
> 
> 标签：c++, string

我输入了一个字符串类型的句子。

```
std::string message;
std::getline(std::cin, message); 
```

输入一个句子后，我使用 if 语句将字符串转换为“摩尔斯电码”：

```
int length = message.length();
for(int i = 0; i < length;i++) //to loop in the message 
{
   if(message[i] == 'A')
       cout << "-.";//and the rest for 'b','c','d'....'z'
} 
```

我如何获取输入字符串的摩尔斯电码并对其进行解码。例如：如果在莫尔斯电码中是“.-”，则显示“A”，如果“-...”在消息中显示“B”。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-11T18:36:46.763

以这种方式使用二叉树 - 根为空（NULL）。每个孩子都有一个字符'-''。. 这样，您就可以将孔摩尔斯电码解码到树中。现在而不是 NULL 放在最后，把你应该得到的字符放在最后。树应该是这样的：

```
                                根
                               / \
                              '-' '。
                                \
                                 '。'
                                    \
                                     '一个'

```

等等现在你可以在 O(lg n) 中找到 n = 树大小时的字符。

# c# - string[] 上的扩展方法将所有元素小写？

> ID：11916554
> 
> 赞同：0
> 
> 时间：2012-08-11T18:27:45.827
> 
> 标签：c#, extension-methods, static-methods

考虑以下方法示例：

```
public static string[] ParseOptions()
{
    return Environment.GetCommandLineArgs();
} 
```

**我需要做些什么来创建一个扩展，使 ParseOptions() 以小写形式返回所有命令行参数？**

我希望能够按如下方式使用扩展：

```
var argArray = ParseOptions().MyExtToLower(); 
```

*注意：我问这个是为了更好地理解如何为方法创建扩展。我实际上对以这种方式获取小写命令行参数并不感兴趣。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T18:31:07.827

```
public static string[] MyExtToLower(this string[] source)
{
    for (int i = 0; i < source.Length; i++)
    {
        source[i] = source[i].ToLower();
    }
    return source;    
} 
```

注意`this`参数列表中的关键字。这就是可以像这样调用方法的原因：

```
var argArray = ParseOptions().MyExtToLower(); 
```

需要明确的是，您实际上并没有在此处向方法添加扩展。您正在做的是向方法返回的类型添加扩展。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T18:30:54.610

您似乎在谈论流畅的接口。看看这个例子 - [http://blog.raffaeu.com/archive/2010/06/26/how-to-write-fluent-interface-with-c-and-lambda.aspx](http://blog.raffaeu.com/archive/2010/06/26/how-to-write-fluent-interface-with-c-and-lambda.aspx)

或者，您可以在要返回的类型上创建扩展方法（在您的情况下，`string[]`）以获取方法链接 - [http://msdn.microsoft.com/en-us/library/bb383977.aspx](http://msdn.microsoft.com/en-us/library/bb383977.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T18:35:18.227

对于您描述的语法，您必须通过以下方式扩展 String[] 或可能 IEnumerable<String> ：

```
public static class MyExtensions {

  public static String[] MyExtToLower(this String[] strings) {

    return strings.Select(s => s.toLower()).ToArray();

  }

  public static IEnumerable<String> MyExtToLower(this IEnumerable<String> strings) {

    return strings.Select(s => s.toLower());

  }

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-11T18:41:11.993

您不创建方法的扩展，而是创建扩展对象功能的方法。这些方法必须是静态的并且是静态类的一部分。它们必须有一个用`this`关键字标记的参数来指示要扩展的对象。在您的情况下，您必须编写如下内容：

```
// the class must be static, I usually declare a class reserved for extension method.
// I mark it as partial so that I can put every method in the same file where I use it.
public static partial class Extension {
    // This is the extension method; it must be static. Note the 'this' keyword before
    // the first parameter: it tells the compiler extends the string[] type.
    public static MyExtToLower( this string[ ] args ) {
        // your code
    }
} 
```

请注意，您不能覆盖实例方法。尽管您可以拥有与实例方法具有相同签名的方法，但由于编译器绑定的方式，该方法将永远不会被调用。

# jquery - 嵌套div时突出显示当前页面选项卡

> ID：11916557
> 
> 赞同：0
> 
> 时间：2012-08-11T18:28:15.957
> 
> 标签：jquery

我需要使用 jquery 突出显示当前页面的选项卡。一个简单的任务，通常只需要几行我知道的代码。但是，选项卡不是您常用的东西，因为我有一个工具栏并且使用跨度完成了它。选项卡的跨度位于链接内部，以便可以单击选项卡以及其中的文本。由于我只有两个选项卡是工具栏上的链接，因此我正在考虑在 jquery 中使用 if else 语句来确定用户在哪个页面上，因此要突出显示哪个选项卡，但我不太确定该怎么做。

选项卡的标记是；

```
 <a href="Home">
     <span class="navButton" title="Return Home">
         Home
     </span>
 </a>
 <a href="Discover">
     <span class="navButton" title="Discover The Unsigned">
          Discover
     </span>
 </a> 
```

我目前不起作用的jquery是；

```
 $(function(){
     var path = location.pathname.substring(1);
     if ( path )
     $('#navButton a[href$="' + path + '"]').css ('box-shadow', 'inset 0 0 10px #000000');
 }); 
```

注意：我将添加 css 样式而不是类，因为它会使其他事情变得更简单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T18:44:59.053

你为什么不想改变风格`onClick()`？像那样：

```
$("#navButton a").click(function() {
    $(this).css('box-shadow', 'inset 0 0 10px #000000');
}); 
```

或者更好的是，您可以创建 CSS 类：

```
.activeTab {box-shadow: inset 0 0 10px #000000;} 
```

然后根据当前活动的选项卡添加/删除它：

```
$("#navButton a").click(function() {
    $(".activeTab").removeClass("activeTab");
    $(this).addClass("activeTab");
}); 
```

* * *

基于位置：

```
$(function() {
    var url = window.location.path;
    $('$navButton a[href="' + url + '"]').addClass("activeTab");
}); 
```

然后您的链接应如下所示：

```
<a href="'/someDirectory/one.html'">One</a>
<a href="'/someDirectory/two.html'">Two</a> 
```

# django - 发送电子邮件在heroku上不起作用

> ID：11916562
> 
> 赞同：1
> 
> 时间：2012-08-11T18:28:34.397
> 
> 标签：django, gmail

我在 forms.py 中有这个功能。我的 settings.py 中目前没有电子邮件规范。

```
def send_email(FROM_NAME,FROM,TO,SUB,MSG,EXISTING_EMAIL,EXISTING_PASSWORD):

    FROMADDR = "%s <%s>" % (FROM_NAME, FROM)
    LOGIN    = EXISTING_EMAIL
    PASSWORD = EXISTING_PASSWORD
    TOADDRS  = [TO]
    SUBJECT  = SUB

    msg = ("From: %s\r\nTo: %s\r\nSubject: %s\r\n\r\n"  % (FROMADDR, ", ".join(TOADDRS), SUBJECT) )
    msg +=  MSG+"\r\n"

    server = smtplib.SMTP('smtp.gmail.com', 587)
    server.set_debuglevel(1)
    server.ehlo()
    server.starttls()
    server.login(LOGIN, PASSWORD)
    server.sendmail(FROMADDR, TOADDRS, msg)
    server.quit() 
```

我这样称呼`views.py`它

```
send_email('my_name','from_me@gmail.com','to_som1@gmail.com','my      subject','mymessage','my_existing_email@gmail.com','password_to_existing_email') 
```

这在本地有效。我已经用 yahoomail 和 gmail 对其进行了测试。但是当我上传到 heroku 时，它给出了错误“（535，'5.7.1 请使用您的网络浏览器登录，然后重试。了解更多信息，请访问\n5.7.1 support.google.com/mail/bin/answer.py ?answer=78754 et6sm2577249qab.8')"

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T18:33:53.603

你想用这个：

```
FROMADDR = "%s <%s>" % (your_name, your_email) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T23:12:02.763

您是否阅读了错误消息中链接的页面？

> 如果系统反复提示您输入用户名和密码，或者您收到“凭据无效”或“需要 Web 登录”错误，请确保您的密码正确。请记住，密码区分大小写。
> 
> 如果您确定密码正确，请从网页版 Gmail 登录您的帐户，而不是通过[http://mail.google.com](http://mail.google.com)
> 
> 在大多数情况下，从 Web 登录应该可以解决问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T21:26:39.977

这对我有用。在尝试从我的 Web 应用程序发送电子邮件时收到错误后`Please log in with your web browser and then try again. Learn more etc.`，我从本地计算机通过浏览器登录到电子邮件。

登录后，顶部有一个黄色通知栏，询问我是否要允许外部应用程序访问我的邮件。**我确认了这一点，谷歌要求我在接下来的 10 分钟内**从应用程序登录该帐户。这会将应用程序列入白名单。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T18:35:19.037

您不应该使用字符串插值来构建电子邮件，这是让您的网站习惯于通过标头注入发送垃圾邮件的好方法。有关如何安全地构建电子邮件的详细信息，请参阅[我的答案](https://stackoverflow.com/a/74084/8427)。

一般来说，从地址格式化时，应该使用 format `Display Name <email@example.com>`。有关详细信息，请参阅[RFC 5322](https://www.rfc-editor.org/rfc/rfc5322)。

# xcode - xcode gcc 编译器显示参数列表太长

> ID：11916568
> 
> 赞同：1
> 
> 时间：2012-08-11T18:29:48.447
> 
> 标签：xcode, macos, gcc

我试图在 Snow Leapord 10.6.8 中的 Xcode 3.2.6 中编译一个 .cpp 文件。

我越来越

```
i686-apple-darwin10-gcc-4.2.1: error trying to exec '/Developer/usr/bin/../libexec/gcc/i686-apple-darwin10/4.2.1/cc1plus': execv: Argument list too long
Command /Developer/usr/bin/gcc-4.2 failed with exit code 1 
```

在使用 gcc 4.2 进行编译时，甚至尝试使用 gcc 4.0 进行编译

有人可以提供有关如何解决此问题的任何指示吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:59:33.513

我没有使用 Mac，但在 Ubuntu 上遇到了同样的错误。我向 gcc 输入传递了太多参数。尝试检查您的 gcc 参数。

# git - Netbeans 和 sourceforge git 存储库：为什么我看不到在线更新文件

> ID：11916570
> 
> 赞同：0
> 
> 时间：2012-08-11T18:30:06.213
> 
> 标签：git, netbeans, sourceforge

我在 sourceforge Git 空间上有一个远程存储库。我在本地机器上克隆这个存储库进行一些编辑，然后上传更改。

```
git add C:\...\default.ctp
git commit -m comment C:\...\default.ctp
Commit Log
revision   : 89......08
author     : m**** <user@domain.com>
date       : 11-ago-2012 17.52.21
summary    : comment 
```

这是 netbeans 的响应，所以一切似乎都很好。但是如果在我的 sourceforge 站点的代码树中上线，default.ctp 不会更新，实际上提交号与其他所有文件相同。为什么？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T19:29:13.097

如果您提交，则该提交仅在您的本地存储库中。如果您希望在您的 Soureforge 存储库中提交该提交，则必须推送您的提交。使用命令行，命令是这样的：

```
git push origin branchname 
```

# cocoa - 编译 Applescript 以在 Mountain Lion“身份不明的开发者”上运行

> ID：11916571
> 
> 赞同：2
> 
> 时间：2012-08-11T18:30:10.120
> 
> 标签：cocoa, applescript, osx-mountain-lion

我正在使用 osacompile 将 AppleScript 编译为 Mountain Lion 中的应用程序包，但我无法执行生成的包，因为它抱怨开发人员身份不明，正如我对未签名应用程序包的期望一样。我注意到 Photoshop 和其他应用程序可以创建运行良好的液滴包，并且在检查它们的内容时，它们似乎没有签名。如何编译允许执行的脚本？

更新：这似乎只是从`NSTask`我的应用程序中运行 osacompile 时出现的问题，如果我通过命令行编译相同的脚本，则生成的包运行良好。

更新 2：这似乎与应用于捆绑包的 com.apple.quarantine xattr 有关。如果没有应用隔离属性的结果包，我无法找到编译applescript的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-09T00:19:28.157

[Sign My Scripts](http://www.macosxautomation.com/applescript/apps/readmyscripts.html)是一款免费应用程序，可让您使用 Apple Developer ID 对基于 AppleScript 的应用程序进行代码设计。如果您是开发人员，请使用它来签署您的应用程序包。

# php - 彩票号码分析

> ID：11916572
> 
> 赞同：1
> 
> 时间：2012-08-11T18:30:19.240
> 
> 标签：php, mysql

我正在尝试对乐透结果进行一些基本分析:)

我有一个看起来像这样的数据库：

```
id|no|day|dd|mmm|yyyy|n1|n2|n3|n4|n5|n6|bb|jackpot|wins|machine|set
--------------------------------------------------------------------
1 |22|mon|22|aug|1999|01|05|11|29|38|39|04|2003202| 1  | Topaz | 3
2 |23|tue|24|aug|1999|01|06|16|21|25|39|03|2003202| 2  | Pearl | 1 
```

这只是一个例子。因此，n1 到 n6 是彩票中的标准球，bb 代表奖金球。

我想编写一个 PHP/SQL 代码，它只显示一个尚未出现的随机数字序列。但是，如果出现了数字 01、04、05、11、29、38 和 39，我不希望代码打印出它们的数字，而只是以不同的顺序打印出来，因为理论上它们的数字集已经中奖号码。

我只是无法理解这个逻辑。我会很感激任何帮助。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T18:45:43.990

假设球按升序存储在您的数据库中，就像您给出的示例一样，您可以生成一个由 6 个数字组成的随机序列，对它们进行排序，然后生成 1 个随机奖金数字。完成后，只需对数据库执行一个简单的 SQL 查询并查看它是否返回结果即可：

```
$nums=...//generate your 6 numbers plus bonus number here
sort($nums);

$mysqli=new mysqli('...','...','...','...');
$stmt=$mysqli->prepare("SELECT * FROM table
    WHERE n1=? AND n2=? AND n3=? AND n4=? AND n5=? AND n6=? AND bb=?");
$stmt->bind_param('iiiiiii', $nums[0], $nums[1], $nums[2], $nums[3], $nums[4], $nums[5], $nums[6]);
$stmt->execute();
$stmt->store_result();

if($stmt->num_rows==0)
    //your numbers have not been drawn before - return them
else
    //otherwise loop round and try again 
```

只要对两个数字列表（但不是奖金球）进行排序，您就不会对已绘制的一组数字的不同排序有任何问题。

随着您以前抽签的数据库变得更完整，这将变得不那么有效，但我认为您不必担心几十年。:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T21:02:54.930

以某种顺序对每个已绘制的结果（每一行）进行排序，可能是升序，然后对已绘制的结果集（所有行）进行排序呢？然后，您将有一个易于查找的列表，您可以在其中看到要绘制的内容。

比如说你想要一个从未绘制过的集合？您只需要遍历列表，直到发现一个“洞”，这将是一个前所未有的集合。如果您想进一步优化，您也可以将上次发现“漏洞”的索引存储在哪个索引处。然后，您将永远不需要遍历列表的同一部分两次，您甚至可以放弃列表的“已完成”部分以节省磁盘空间，或者如果您希望您想出的新数字随机缝合，您可以从列表中的随机偏移量开始。

为了有效地做到这一点，您应该制作一个额外的列来存储预排序的集合。例如，如果您有 (5, 3, 6, 4, 1, 2)，则该列可能包含 010203040506。添加足够多的零，以便数字以固定偏移量出现。

# ruby-on-rails - Rails 3：使用 myapp.herokuapp.com 作为 URL 构建基础的 Heroku 应用程序

> ID：11916574
> 
> 赞同：3
> 
> 时间：2012-08-11T18:30:26.573
> 
> 标签：ruby-on-rails, ruby-on-rails-3, url, heroku

我刚刚将我的一个应用程序部署到了heroku。这个应用程序使用：

*   默认的**“myapp.herokuapp.com”**地址，
*   我配置了一个域，以便可以通过**"www.myapp.com" 访问**该应用程序。

今天我注意到以下问题：我的应用程序链接基于 *“http://myapp.herokuapp.com”*域（因此我得到*“http://myapp.herokuapp.com/page”URL*），即使我访问使用我的域名的应用程序（然后我希望获得*“www.myapp.com/page”*网址）。

**我试图编辑我的 production.rb 并设置 default_url_options ：**

```
# Base domain for url generation 
config.action_controller.default_url_options = { :host => "www.myapp.com" } 
```

但这并没有改变任何事情。还尝试在 application.rb 中更改它，以防万一，但也没有任何反应。

有什么线索吗？非常感谢你们的帮助！

*编辑：当我将数据库迁移到新的 Heroku postgres 事物时，这曾经按预期工作。不知道这会不会有什么影响。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T23:45:55.417

如果您对 url 使用 _path 方法，这将生成一个始终基于您访问的 url 的相对路径。如果您使用控制器/片段缓存，您可能应该在视图中使用 _url 代替。如果您的所有页面都有一些控制器逻辑，您可能还需要考虑在您的 production.rb 中将 config.action_controller.perform_caching 设置为 false。

有关缓存如何在 Rails 中工作的更多信息，请参阅[此页面。](http://guides.rubyonrails.org/caching_with_rails.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-04T13:30:44.667

我有一个类似的问题。这是由以下代码行引起的，它指向 heroku.com 并被重定向到 herokuapp.com

```
 config.action_mailer.default_url_options = { :host => 'my-staging-domain.heroku.com' } 
```

我提到它是因为它是**action_mailer** .default_url_options 但如果您没有明确设置 action_controller.default_url_options 显然它会影响邮件范围之外的默认 url 选项

# css - 使用 CSS 选择器应用底部边框来选择单元格

> ID：11916580
> 
> 赞同：1
> 
> 时间：2012-08-11T18:31:10.043
> 
> 标签：css, css-selectors

如何使用伪类选择器（而不是类选择器）将底部边框仅应用于出现文本“meh”的那些单元格？

这是我当前的 SASS/CSS 以及它下面应该如何显示的示例：

[http://jsfiddle.net/keruilin/4THpE/37/](http://jsfiddle.net/keruilin/4THpE/37/)

 `* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T18:33:14.580

您可以使用`:contains()`仅 jQuery 的伪选择器：

```
$('td:contains("meh")').addClass('bordered');​ 
```

**演示：http: [//jsfiddle.net/4THpE/21/](http://jsfiddle.net/4THpE/21/)**

* * *

如果要选择文本*恰好* `meh`为 的单元格，则必须做一些不同的事情：

```
$('td').filter(function() {
  return $.trim($(this).text()) == 'meh';
}).addClass('bordered'); 
```

**演示：http: [//jsfiddle.net/4THpE/23/](http://jsfiddle.net/4THpE/23/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T06:32:30.477

你可以试试这个：

***查询代码***

```
$("td:contains('meh')").addClass("border-style"); 
```

**或者**

```
$(".border-style").css("border-bottom", "1px solid red"); 
````

# c# - 在 Visual C# 中自动登录网站？（没有网络浏览器）

> ID：11916582
> 
> 赞同：0
> 
> 时间：2012-08-11T18:31:28.760
> 
> 标签：c#, download

我正在尝试使用 Visual C# 登录网站，但我不知道从哪里开始。最后，我想从网站上下载一个 PDF 文件，但我必须登录该网站，因为它有密码限制。网址如下：

[https://sso.greatclips.com/authentication/login/login.aspx?ud=1&ApplicationCode=1&ReturnURL=https%3A%2F%2Fwww.salondata.com%2Fv2%2Fwa%2FloginPostBack](https://sso.greatclips.com/authentication/login/login.aspx?ud=1&ApplicationCode=1&ReturnURL=https%3A%2F%2Fwww.salondata.com%2Fv2%2Fwa%2FloginPostBack)

我不确定它是否有效。我有什么选择，代码甚至可以做任何事情吗？

到目前为止，这是我的代码。（注意：我不想在 Visual C# App 中浏览网页，我希望它在后台完成）

```
 public static Setup setup = new Setup();
    private CookieContainer _jar = new CookieContainer();
    public static string password = setup.Password;
    public static string username = setup.UserName;
    private string _url = "https://sso.greatclips.com/authentication/login/login.aspx";
    private string _userAgent;
    public Salons()
    {
        InitializeComponent();
    }
    private void Salons_Load_1(object sender, EventArgs e)
    {
        string responseData;
        HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create(_url);

        webRequest.CookieContainer = _jar;
        webRequest.Method = "POST";
        webRequest.ContentType = "application/x-www-form-urlencoded";
        webRequest.UserAgent = _userAgent;

        string requestBody = String.Format(
            "client_id={0}&password={1}", username, password);

        using (StreamWriter requestWriter = new StreamWriter(webRequest.GetRequestStream()))
        {

            requestWriter.Write(requestBody);
            lblStatus.Text = "Writing request ...";
            requestWriter.Close();

            using (HttpWebResponse res = (HttpWebResponse)webRequest.GetResponse())
            {
                using (StreamReader responseReader = new StreamReader(res.GetResponseStream()))
                {

                    responseData = responseReader.ReadToEnd();
                    responseReader.Close();
                    lblStatus.Text = "Closing request ...";

                    if (res.StatusCode != HttpStatusCode.OK)
                        throw new WebException("Logon failed", null, WebExceptionStatus.Success, res);
                    else
                        lblStatus.Text = "Successfully logged in!";
                }
            }
        }
    } 
```

编辑：

当我点击登录按钮时请求：

POST [http://sso.greatclips.com/authentication/login/login.aspx?ud=1&ApplicationCode=1&ReturnURL=https%3a%2f%2fwww.salondata.com%2fv2%2fwa%2floginPostBack](http://sso.greatclips.com/authentication/login/login.aspx?ud=1&ApplicationCode=1&ReturnURL=https%3a%2f%2fwww.salondata.com%2fv2%2fwa%2floginPostBack) HTTP/1.1 主机：sso.greatclips .com 用户代理：Mozilla/5.0 (Windows NT 6.1; WOW64; rv:14.0) Gecko/20100101 Firefox/14.0.1 接受：text/html,application/xhtml+xml,application/xml;q=0.9, */* ; q=0.8 Accept-Language: en-us,en;q=0.5 Accept-Encoding: gzip, deflate DNT: 1 Connection: keep-alive X-MicrosoftAjax: Delta=true Cache-Control: no-cache, no-cache Content -类型：应用程序/x-www-form-urlencoded；charset=utf-8 引用：[http ://sso.greatclips.com/authentication/login/login.aspx?ud=1&ApplicationCode=1&ReturnURL=https%3A%2F%2Fwww.salondata.com%2Fv2%2Fwa%2FloginPostBack](http://sso.greatclips.com/authentication/login/login.aspx?ud=1&ApplicationCode=1&ReturnURL=https%3A%2F%2Fwww.salondata.com%2Fv2%2Fwa%2FloginPostBack) 内容长度：1331 Cookie：stayloggedin=399238；ASP.NET_SessionId=g3tf01mqzgcdbhyoagfz1s55; .ADAuthCookie=2496474AAA6C67DC05253300439E06151F94E728769EA71FBFDB0CD832E772DBA6F5B5220EF7A5C7E79ED7B445EB7DF6C39B9A1E276277BDD3DC9DF2756294157D57C1B926F919F3A87BDE0CDBA8F43E0C8989357A24372DEA39B973A53F89F0EDEE1E2D3B391A785B1AB19FB704B420BD95A5C3505765D51FA865565686F3CF0F74AFD2C2E76146AB14F46BC2E4B21189B721C32DF3A6466631D0326ABB0D95087FF9E2 Pragma: no-cache

ctl00%24ScriptManager1=ctl00%24UpdatePanel1%7Cctl00%24cphMain%24loginMain%24LoginButton&_ *EVENTTARGET=&* _EVENTARGUMENT=&_*VIEWSTATE=%2FwEPDwUKMjA3MDY5NDk2Ng9kFgJmD2QWBAIBD2QWBGYPZBYCZg9kFgICAQ8WAh4EVGV4dAUQUmVwb3J0aW5nIENlbnRlcmQCAg9kFgICAQ9kFgICAQ8WAh8ABRpzVGl0bGVCYWNrZ3JvdW5kPScjNUU3MUI2J2QCAw9kFgYCAw8PFgYeCEltYWdlVXJsBRppbWFnZXMvc3BlY3RydW1fYmFubmVyLmpwZx4NQWx0ZXJuYXRlVGV4dAUQUmVwb3J0aW5nIENlbnRlch4HVmlzaWJsZWdkZAIFD2QWAmYPZBYCAgEPDxYEHglCYWNrQ29sb3IJ%2FPz8%2Fx4EXyFTQgIIZBYCAgEPZBYCAgMPZBYCAgEPPCsACgEADxYCHghVc2VyTmFtZQUbc3VkZXNoLnNhcHJhQGdyZWF0Y2xpcHMubmV0ZBYCZg9kFgYCAQ8PFgIfAAUQUmVwb3J0aW5nIENlbnRlcmRkAgUPDxYCHwAFG3N1ZGVzaC5zYXByYUBncmVhdGNsaXBzLm5ldGRkAhkPDxYCHwAFGHdlYm1hc3RlckBncmVhdGNsaXBzLmNvbWRkAgkPDxYCHwAFEUNvcHlyaWdodCDCqSAyMDEyZGQYAQUeX19Db250cm9sc1JlcXVpcmVQb3N0QmFja0tleV9fFgEFJ2N0bDAwJGNwaE1haW4kbG9naW5NYWluJGNoa1N0YXlMb2dnZWRJbufuwcvYeS4gDjHhavP572TVdscK&*_EVENTVALIDATION=%2FwEWCQL%2B5bxcAr2ailYCkqyM%2BQ0CtvDI7gECpJCinAICzoverwUCjqr%2B%2FAoCocjV5gcCybrK0QNROj0%2BEho3liuMeskLfe3LtC8Zog%3D%3D&ctl00%24cphMain%24loginMain%24UserName= ***&ctl00%24cphMain%24loginMain%24UserName_TextBoxWatermarkExtender_ClientState=&ctl00%24cphMain%24loginMain%24Password=*** &ctl00%24cphMain%24loginMain%24chkStayLoggedIn =on&__ASYNCPOST=true&ctl00%24cphMain%24loginMain%24LoginButton=Sign%20In

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T18:52:17.890

几件可以帮助你的事情

(a) 这个 url 也可以在没有 SSL 的情况下工作（所以你不会处理检查正确的证书等），现在你可以尝试使用 url [http://sso.greatclips.com/authentication来完成这项工作/login/login.aspx?ud=1&ApplicationCode=1&ReturnURL=https%3A%2F%2Fwww.salondata.com%2Fv2%2Fwa%2FloginPostBack（http](http://sso.greatclips.com/authentication/login/login.aspx?ud=1&ApplicationCode=1&ReturnURL=https%3A%2F%2Fwww.salondata.com%2Fv2%2Fwa%2FloginPostBack) 代替 https）

(b) 使用[fiddler](http://www.fiddler2.com/fiddler2/)工具，它允许您记录浏览器和 Web 服务器之间的流量。只需查看单击登录按钮时浏览器向服务器发送的请求，并尝试在 C# 代码中实现相同的请求。

# javascript - 相对于形状位置的渐变填充，而不是画布位置？

> ID：11916585
> 
> 赞同：5
> 
> 时间：2012-08-11T18:31:37.853
> 
> 标签：javascript, html, canvas, gradient

据我了解，必须相对于画布元素本身（即 0、0）而不是相对于您实际填充的形状来指定渐变填充。

问题：**我在这个断言中是否正确，是否有建议的解决方法？**

例如（[此处为 JSFiddle](http://jsfiddle.net/MYFxf/3/)）：

```
 ctx.beginPath();
    ctx.rect(40, 50, 100, 70);
    var grd = ctx.createLinearGradient(0, 50, 0, 120);
    grd.addColorStop(0, "red");
    grd.addColorStop(1, "blue");
    ctx.fillStyle = grd;
    ctx.fill(); 
```

在那里，我做了一个矩形。我希望，从形状的左上角开始用渐变填充它，我会`0, 0`作为前两个参数传递。看来我必须传递矩形相对于画布的 X/Y 坐标。

如果你有一个用二次曲线构建的弧，这就会成为一个问题，因为如果不是数学天才，你不知道曲线的顶部位置 - 只知道控制点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-11T21:09:24.173

如果您不知道要绘制的形状的边界，那么您将度过一段糟糕的时光。

如果您正在使用渐变，尤其是重复使用渐变，最好始终从原点制作渐变和形状，并将它们转换到它们将要出现的位置。

设置这种系统将使定义渐变或多或少与对象的大小相关，但您仍然必须自己进行边界计算。

这是一个转换渐变和形状以使其与画布“相对”的示例：

[http://jsfiddle.net/simonsarris/RFgcs/](http://jsfiddle.net/simonsarris/RFgcs/)

# stl - 无法访问内存，分段错误

> ID：11916586
> 
> 赞同：0
> 
> 时间：2012-08-11T18:31:38.490
> 
> 标签：stl, stack, segmentation-fault

我正在尝试使用模拟递归版本的迭代算法来实现谢尔宾斯基垫片。

我遇到了分段错误。可能该函数正在尝试取消引用 NULL 指针，但我找不到它。问题应该出在 if 块中，而不是在 else 中。因为如果它跳过 if 块它工作正常。谢谢你的帮助。

```
GLfloat points[18*(3^GENCOUNT)];

std::stack<Pyramid *> Q;

// initial Pyramid
Q.push(new Pyramid(Vec3(0.0f, 0.4f, 0.0f),
                    Vec3(-0.4f, -0.4f, 0.4f),
                    Vec3(0.4f, -0.4f, 0.4f),
                    Vec3(0.4f, -0.4f, -0.4f),
                    Vec3(-0.4f, -0.4f, -0.4f), 0));

int i = 0;
while(!Q.empty())
{
    Pyramid *topPyr = Q.top();
    Q.pop();

    if(topPyr->mGeneration < GENCOUNT)
    {
        Vec3 baseVec3 = (((topPyr->mV2+topPyr->mV3)/2.0f) + ((topPyr->mV4+topPyr->mV5)/2.0f)) / 2.0f;

        Q.push(new Pyramid(topPyr->mV1,
                           (topPyr->mV1+topPyr->mV2)/2.0f,
                           (topPyr->mV1+topPyr->mV3)/2.0f,
                           (topPyr->mV1+topPyr->mV4)/2.0f,
                           (topPyr->mV1+topPyr->mV5)/2.0f, topPyr->mGeneration+1));
        Q.push(new Pyramid((topPyr->mV1+topPyr->mV2)/2.0f,
                           topPyr->mV2,
                           (topPyr->mV2+topPyr->mV3)/2.0f,
                           baseVec3,
                           (topPyr->mV2+topPyr->mV5)/2.0f, topPyr->mGeneration+1));
        Q.push(new Pyramid((topPyr->mV1+topPyr->mV3)/2.0f,
                           (topPyr->mV2+topPyr->mV3)/2.0f,
                           topPyr->mV3,
                           (topPyr->mV3+topPyr->mV4)/2.0f,
                           baseVec3, topPyr->mGeneration+1));
        Q.push(new Pyramid((topPyr->mV1+topPyr->mV4)/2.0f,
                           baseVec3,
                           (topPyr->mV3+topPyr->mV4)/2.0f,
                           topPyr->mV4,
                           (topPyr->mV4+topPyr->mV5)/2.0f, topPyr->mGeneration+1));
        Q.push(new Pyramid((topPyr->mV1+topPyr->mV5)/2.0f,
                           (topPyr->mV2+topPyr->mV5)/2.0f,
                           baseVec3,
                           (topPyr->mV4+topPyr->mV5)/2.0f,
                           topPyr->mV5, topPyr->mGeneration+1));
    }
    else
    {
        memcpy(points+i, topPyr->mV1.mVec3, sizeof(GLfloat)*3);i+=3;
        memcpy(points+i, topPyr->mV2.mVec3, sizeof(GLfloat)*3);i+=3;
        memcpy(points+i, topPyr->mV3.mVec3, sizeof(GLfloat)*3);i+=3;

        memcpy(points+i, topPyr->mV1.mVec3, sizeof(GLfloat)*3);i+=3;
        memcpy(points+i, topPyr->mV3.mVec3, sizeof(GLfloat)*3);i+=3;
        memcpy(points+i, topPyr->mV4.mVec3, sizeof(GLfloat)*3);i+=3;

        memcpy(points+i, topPyr->mV1.mVec3, sizeof(GLfloat)*3);i+=3;
        memcpy(points+i, topPyr->mV4.mVec3, sizeof(GLfloat)*3);i+=3;
        memcpy(points+i, topPyr->mV5.mVec3, sizeof(GLfloat)*3);i+=3;

        memcpy(points+i, topPyr->mV1.mVec3, sizeof(GLfloat)*3);i+=3;
        memcpy(points+i, topPyr->mV5.mVec3, sizeof(GLfloat)*3);i+=3;
        memcpy(points+i, topPyr->mV2.mVec3, sizeof(GLfloat)*3);i+=3;

        memcpy(points+i, topPyr->mV2.mVec3, sizeof(GLfloat)*3);i+=3;
        memcpy(points+i, topPyr->mV3.mVec3, sizeof(GLfloat)*3);i+=3;
        memcpy(points+i, topPyr->mV4.mVec3, sizeof(GLfloat)*3);i+=3;

        memcpy(points+i, topPyr->mV4.mVec3, sizeof(GLfloat)*3);i+=3;
        memcpy(points+i, topPyr->mV5.mVec3, sizeof(GLfloat)*3);i+=3;
        memcpy(points+i, topPyr->mV2.mVec3, sizeof(GLfloat)*3);i+=3;
    }
    delete topPyr;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T18:40:37.380

我的 C++ 非常生锈，但假设没有发生运算符重载，则不会

```
3^GENCOUNT 
```

在您的第一行中的意思是“3 和 GENCOUNT 之间的按位异或”？我很确定您的意思是取幂，即 GENCOUNT 的 3 次方。

# html - 背景定位在右下角

> ID：11916589
> 
> 赞同：0
> 
> 时间：2012-08-11T18:32:27.493
> 
> 标签：html, css, background-image

我有一个 HTML 页面，这个 css：

```
body {
color:#000;
/*BG Image is specified by javascript*/
background-repeat:no-repeat;
background-position:top left;
} 
```

你要知道的是，页面高度不够大，所以如果加载正确，屏幕底部和显示的最后一行文本之间会有一个小间隙。

我想让背景贴在屏幕的右下角，但是当我更改`top left`为时`bottom right`，它似乎只是贴在网页的底部（也就是文本结束的地方），而不是底部的屏幕。我不确定是否有解决方案，但如果有，请告诉我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T18:35:31.880

你需要`background-size: cover`在 body 标签中的一个属性

这将使背景覆盖整个身体元素

尝试这个

```
body {
    background-position: bottom right;
    background-attachment: fixed;
    background-repeat:no-repeat;
    background-size: cover;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T18:36:07.737

尝试`height:100%;`在正文选择器中设置：

```
body {
  color:#000;
  /*BG Image is specified by javascript*/
  background-repeat:no-repeat;
  background-position:top left;
  height:100%;
} 
```

# android - AppWidget 配置活动的导出活动权限

> ID：11916590
> 
> 赞同：2
> 
> 时间：2012-08-11T18:32:34.327
> 
> 标签：android, permissions, manifest, android-appwidget

`android:exported="true"`添加标签后，我在清单文件中收到有关我的 AppWidget 配置活动的警告。这就是它的样子……

```
<activity android:name=".widgets.WidgetConfigurationActivity"
              android:theme="@android:style/Theme.Translucent"
              android:exported="true" >
         <intent-filter>
               <action android:name="android.appwidget.action.APPWIDGET_CONFIGURE" />
         </intent-filter>
</activity> 
```

我收到的警告是“导出的活动不需要许可”。根据我的理解，将`exported`标签设置为 true 意味着与我的应用程序无关的另一个应用程序可以访问它（这是有道理的，因为主屏幕启动器应用程序需要启动我的 AppWidget 的配置活动）。有谁知道我需要在这里添加什么样的权限才能使其不出错？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-11T18:51:09.057

> 据我了解，将导出的标签设置为 true 意味着与我的应用程序无关的另一个应用程序可以访问它

正确的。请注意，这里是多余的：`<intent-filter>`默认情况下会导出活动。

> 有谁知道我需要在这里添加什么样的权限才能使其不出错？

AFAIK，您不能保证主屏幕具有任何特定权限。

恕我直言，这是一个错误的警告，[我为此提出了一个相关问题](http://code.google.com/p/android/issues/detail?id=33976)，应该有一天会修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T12:05:05.577

您可以将属性更改`android:exported="true"`为`android:exported="false"`。

那应该可以为您解决问题。

# java - 使用参数注释更改方法参数的值

> ID：11916592
> 
> 赞同：1
> 
> 时间：2012-08-11T18:32:47.853
> 
> 标签：java, methods, parameters, annotations

也许这是一个非常愚蠢的问题。请理解和原谅。我正在尝试找到一种方法来实现可以更改方法参数的注释。

请看代码：

```
/**
* This method does some scary things in OS file system.
* @param anyFileSystemPath is a file system path :)
*/
public File makeSomeFileSystemStuff(String anyFileSystemPath){
//some code goes here...
} 
```

我想创建一个注释：

```
public File makeSomeFileSystemStuff(@IsValid String anyFileSystemPath){
//some code goes here...
} 
```

@IsValid 注释验证路径的位置（应该至少具有读取访问权限，并且当然应该存在）。另外我想确保每条路径都以“/”结尾。因此，如果行尾不存在“/”，则此注释应将“/”附加到参数值。

我怎样才能做到这一点？

我尝试过像：java注释更改方法参数值，获取方法参数值等但没有找到对我有用的东西:(请建议。

# mysql - 将mysql数据库转移到新服务器

> ID：11916596
> 
> 赞同：0
> 
> 时间：2012-08-11T18:33:02.360
> 
> 标签：mysql, sql

我必须将 mysql 数据从旧服务器传输到新服务器。这些表的尺寸非常大（大约 1.7GB）。因此，将它们转移到新服务器真的很痛苦。将文件导出为 sql 文件不起作用。

有没有其他更好更有效的方法来做同样的事情？

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T18:41:22.900

1）您可以简单地复制表所在的mysql文件夹，通常在以下位置`/var/lib/mysql`

2）您可以将输出通过管道`mysqldump`传输到 gzip 或 bzip 等压缩程序并传输较小的文件（请参阅：[http](http://www.ducea.com/2006/10/28/compressing-mysqldump-output/) ://www.ducea.com/2006/10/28/compressing-mysqldump-output/ ）

```
 mysqldump ...options... | gzip > outputfile.sql.gz 
```

# java - Google App Engine：排队任务与 Cron 作业

> ID：11916599
> 
> 赞同：0
> 
> 时间：2012-08-11T18:33:21.567
> 
> 标签：java, google-app-engine, task-queue

我对 GAE 的任务、任务队列（推送和拉取）、Cron 作业以及这些概念与前端与后端实例之间的关系感到非常困惑。

我正在尝试实现一种情况，即可以立即处理一些 HTTP 请求，而另一些则排队。排队的请求最终可能最终触发我自己的代码执行（一旦它们被消耗），或者它们可能会碰到 GAE 服务 API 之一（`LogQuery`等）。

我似乎无法理解如何设计这两个场景，更不用说编写代码了。更糟糕的是，我读过文献表明，根据代码是在前端还是后端实例上执行，您希望以不同的方式执行某些与任务/队列相关的编码。在此先感谢您的帮助！一些具体例子的加分！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T19:16:27.473

您编写代码，Tasks 和 Cron 执行它。

Task 是一组属性的包装器，主要的是应该执行的 Url。您的代码（处理程序、servlet）应该驻留在该 url 上。任务位于任务队列中，它们具有关于多快、并行数量等的某些默认属性。它们执行任务。所以基本上是一个待办事项列表，它顺序执行任务而不能保证任务何时开始。

Cron 是一种定期调用您提供的 Url 的服务。从某种意义上说，它是一个调度程序。

您的 Url（= 您的处理程序/servlet）可以驻留在前端实例（默认）或后端实例（必须在 Task 或 Cron 设置中设置特殊属性）。主要区别在于前端请求必须在 10 分钟内完成，而后端请求可以无限期地完成。

# android - 在android中创建快速文件搜索功能

> ID：11916600
> 
> 赞同：1
> 
> 时间：2012-08-11T18:33:21.953
> 
> 标签：android, android-asynctask, file-search

我是 android 新手，我正在尝试开发包含搜索功能的文件资源管理器。我正在使用递归搜索功能，该功能在具有一些子文件夹和文件的文件夹中运行良好，但由于某种原因，它非常慢并且可能在具有大量子文件夹和文件的文件夹中“强制关闭”，因为没有足够的内存。我通过创建将放置结果的 ArrayList 进行搜索，然后调用将填充列表的递归函数。“path”参数是搜索开始的文件，“query”是搜索查询。

```
ArrayList<File> result = new ArrayList<File>();
fileSearch(path, query, result); 
```

这是递归函数的样子：

```
private void fileSearch(File dir, String query, ArrayList<File> res) {
    if (dir.getName().toLowerCase().contains(query.toLowerCase()))
        res.add(dir);
    if (dir.isDirectory() && !dir.isHidden()) {
        if (dir.list() != null) {
            for (File item : dir.listFiles()) {
                fileSearch(item, query, res);
            }
        }
    }
} 
```

如果有人能指出一种执行更快和/或更有效的文件搜索的方法，我将不胜感激。

编辑：

这就是我尝试使用 AsyncTask 完成工作的方式：

```
private class Search extends AsyncTask<File, Integer, Void> {

    String query;
    ArrayList<File> result = new ArrayList<File>();

    public Search(String query){
        this.query = query;
        setTitle("Searching");
    }

    @Override
    protected Void doInBackground(File... item) {
        int count = item.length;
        for (int i = 0; i < count; i++) {
            fileSearch(item[i], query, result);
            publishProgress((int) ((i / (float) count) * 100));
            // Escape early if cancel() is called
            if (isCancelled()) break;
        }
        return null;
    }

    protected void onProgressUpdate(Integer... progress) {
        setProgress(progress[0]);
    }

    protected void onPostExecute() {
        searchResults = new ListItemDetails[result.size()];
        for (int i = 0; i < result.size(); i++) {
            File temp = result.get(i);
            if (temp.isDirectory())
                searchResults[i] = new ListItemDetails(temp.getAbsolutePath(),
                        R.drawable.folder, temp.lastModified(), temp.length());
            else {
                String ext;
                if (temp.getName().lastIndexOf('.') == -1)
                    ext = "";
                else
                    ext = temp.getName().substring(
                            temp.getName().lastIndexOf('.'));
                searchResults[i] = new ListItemDetails(temp.getAbsolutePath(),
                        getIcon(ext), temp.lastModified(), temp.length());
            }
        }
        finishSearch();
    }

}

public void finishSearch() {
    Intent intent = new Intent(this, SearchResults.class);
    startActivity(intent);
} 
```

对 finishSearch() 的调用只是为了让我可以创建 Intent 以在其他 Activity 中显示结果。有什么想法、建议、技巧吗？提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-11T11:11:02.453

您可能会点击[符号链接](http://en.wikipedia.org/wiki/Symbolic_link)并使用搜索功能进入不定式循环并耗尽应用程序的可用内存。

我建议您保留一个单独的列表，其中包含您访问过的目录的规范路径（ [File.getCanonicalPath() ），并避免一遍又一遍地访问它们。](http://developer.android.com/reference/java/io/File.html#getCanonicalPath%28%29)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-17T15:32:22.400

为什么不使用[Apache Commons IO](http://commons.apache.org/proper/commons-io/)？它有一些处理搜索的功能。

我还建议使用[FileUtils.listFiles](http://commons.apache.org/proper/commons-io/javadocs/api-release/org/apache/commons/io/FileUtils.html#listFiles%28java.io.File,%20org.apache.commons.io.filefilter.IOFileFilter,%20org.apache.commons.io.filefilter.IOFileFilter%29)方法，该方法将文件夹、搜索查询和目录过滤器作为参数。

以下示例返回根据正则表达式匹配的所有文件路径的列表。尝试将其添加到 AsyncTask 的*doInBackground*中：

```
Collection files = FileUtils.listFiles(new File(yourRootPath), 
                   new RegexFileFilter(searchQuery), 
                   DirectoryFileFilter.DIRECTORY); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-17T17:10:57.993

你看过Lucene吗？

它专为索引和查询大量自由文本文档而设计，因此已经为您解决了许多 I/O 流和索引任务。如果您删除递归并使用 Lucene 索引以纯迭代方式进行文档索引，则可能会缓解内存问题。

看看这个线程：

[Android 中的 Lucene](https://stackoverflow.com/questions/7821103/lucene-in-android)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-08T20:42:54.010

在后台进行，从 Android O (API 26) 开始，您可以使用[**Files.find**](https://developer.android.com/reference/java/nio/file/Files?hl=en#find(java.nio.file.Path,%20int,%20java.util.function.BiPredicate%3Cjava.nio.file.Path,%20java.nio.file.attribute.BasicFileAttributes%3E,%20java.nio.file.FileVisitOption...)) API。示例：

```
Files.find(
    Paths.get(startPath), Integer.MAX_VALUE,
    { path, _ -> path.fileName.toString() == file.name }
).forEach { foundPath ->
   Log.d("AppLog", "found file on:${foundPath.toFile().absolutePath}")
} 
```

# java - 用于解析带有跳过括号内容的句子的正则表达式

> ID：11916601
> 
> 赞同：2
> 
> 时间：2012-08-11T18:33:29.913
> 
> 标签：java, regex, parsing

我需要一个句子解析器。解析器根据白色字符拆分完整的句子。并且它将括号内的完整内容视为一个单词（已解析的单词）。

输入句子：-

> “这是很棒的工作（我真正的工作）。”

所需输出：-

```
This 

is 

the 

work

(my real job)

which 

is 

great. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T19:28:33.637

不确定是否有一种很好的方法可以使用这个正则表达式从这样的句子中解析出单词。无论如何，您可能需要遍历句子。我不认为`String.split()`会为你做这件事。只需编写一个循环来为您执行此操作，然后您就可以处理括号不匹配时的细节。例如，这将假设所有内容都是一个单词，即使句子结束并且没有右括号：

```
 String s = "This is the work (my real job) which is great, and (also some stuff";

     ArrayList<String> words = new ArrayList<String>();
     Scanner sentence = new Scanner(s);
     boolean inParen = false;
     StringBuilder inParenWord = new StringBuilder();
     while(sentence.hasNext()) {
        String word = sentence.next();
        if(inParen) {
           inParenWord.append(" ");
           inParenWord.append(word);

           if(word.endsWith(")")) {
              words.add(inParenWord.toString());
              inParenWord = new StringBuilder();
              inParen = false;
           }
        }
        else {
           if(word.startsWith("(")) {
              inParen = true;
              inParenWord.append(word);
           }
           else {
              words.add(word);
           }
        }
     }

     if(inParenWord.length()>0) {
        words.add(inParenWord.toString());
     }

     for(String word : words) {
        System.out.println(word);
     } 
```

这将输出：

```
This
is
the
work
(my real job)
which
is
great,
and
(also some stuff 
```

或使用模式/匹配器：

```
 String s = "This is the work (my real job) which is great, and (also somet stuff";

     ArrayList<String> words = new ArrayList<String>();

     Pattern p = Pattern.compile(" ?([^(][^ ]+|\\([^\\)]+\\)?)");
     Matcher m = p.matcher(s);

     while(m.find()) {
        words.add(s.substring(m.start(),m.end()).trim());
     }

     for(String word : words) {
        System.out.println(word);
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T19:45:32.377

我相信你需要类似的东西（虽然我不确定这个正则表达式是否能 100% 正常工作）。
简单的说；匹配`(word-with-no-spaces) | (\(words-and-spaces-non-greedy\))`

```
^[[(\w)]*|[(\(.+?)\)]*]*$ 
```

# ruby-on-rails - 何时向 application_controller.rb 添加方法

> ID：11916603
> 
> 赞同：1
> 
> 时间：2012-08-11T18:33:42.770
> 
> 标签：ruby-on-rails, security, controller

我的购物网站有一个在所有页面中通用的标题。我在标题中添加了一个购物车图标，其编号会根据当前购物车中的内容进行更新。

因为这个图标需要 current_cart 的定义，所以我现在需要将它添加到每个控制器操作中。这是不明智/不安全的吗？我是 Rails 新手，不太了解向 applications.rb 添加方法的安全影响

此外，最好的方法是将其添加到 application_controller.rb，还是将其单独添加到每个相关的控制器操作？

提前感谢您的反馈！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T18:47:44.753

考虑到[DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)，最好只添加一次这个方法，在你的控制器继承树中上一层。如果所有控制器都需要该方法，那么 application_controller.rb 是一个好地方。如果只是其中一些，那么您可以考虑创建从 ApplicationController 继承的控制器，将该方法存储在其中，并且所有需要该方法的控制器都应该从它继承。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T18:44:49.870

您的所有控制器都继承自应用程序控制器。这意味着您在应用程序控制器中定义的任何方法都可以在所有其他控制器中使用。

# c++ - 将对象传递给另一个类c ++中的函数

> ID：11916605
> 
> 赞同：1
> 
> 时间：2012-08-11T18:33:57.457
> 
> 标签：c++

我正在学习 c++ 中的类和对象，并尝试了以下代码来测试我是否正确理解它：

```
#include <iostream>

using namespace std;

class class1
{
    public:
        void write(int x)
        {
             dataObject.var = x;
        }
};

class class2
{
    public:
        void read()
        {
            std::cout << dataObject.var;
        }
};

class data
{
    public:
        int var;
        data()
        {
            var = 1;
        }
};

int main()
{
    data dataObject;
    class1 object1;
    class2 object2;

    object2.read(data dataObject);
    object1.write(2);
    object2.read(data dataObject);

    return 0;
} 
```

这是两个对象都用于修改和使用第三个的成员，但我收到以下错误：

```
In member function 'void class1::write(int)':
line 10: error: 'dataObject' was not declared in this scope

In member function 'void class2::read()':
line 14: error: 'dataObject' was not declared in this scope

In function 'int main()':
line 40 + 42: error: expected primary-expression before 'dataObject' 
```

知道我哪里出错了吗？提前致谢。

编辑：感谢所有建议。我现在的代码是：

```
#include <iostream>

using namespace std;

class class1
{
    public:
        void write(data &dataObject, int x)
        {
            dataObject.var = x;
        }

};

class class2
{
    public:
        void read(data dataObject)
        {
            std::cout << dataObject.var << endl;
        }
};

class data
{
    public:
        int var;
        data()
        {
            var = 1;
        }
};

int main()
{
    data dataObject;
    class1 object1;
    class2 object2;

    object2.read(dataObject);
    object1.write(dataObject,2);
    object2.read(dataObject);

    return 0;
} 
```

我现在得到错误：

8 错误：“数据”尚未声明

10 错误：在“dataObject”中请求成员“var”，它是非类类型“int”

18 错误：“数据”尚未声明

20 错误：请求“dataObject”中的成员“var”，它是非类类型“int”

40 错误：“dataObject”未在此范围内声明

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-11T18:36:30.223

在这一点上，您出错的地方是：

```
 void write(int x)
    {
         dataObject.var = x;
    } 
```

没有`dataObject`。你试图让你的类依赖于一些全局对象。首先，你必须决定你是否真的想要这个。如果你这样做了，你需要一种方法来确保这些全局对象在它们被类使用之前被声明和实例化。

有很多方法可以修复错误，但首先您需要清楚您希望这些类做什么以及它们应该如何相互交互。

如何在没有全局对象的情况下解决此问题的一个示例：

```
class class1
{
  public:
    class1(data& dataObj) : dataRef_(dataObj) {}
    void write(int x)
    {
      dataRef_.var = x;
    }
  private:
    data& dataRef_;
}; 
```

然后主要是：

```
int main()
{
  data dataObject;
  class1 object1(dataObject);
  object1.write(2);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-11T18:36:40.227

您的班级不知道该变量`dataObject`。如果您希望它们能够访问类的实例，`data`则需要将它们传递给您的函数。像这样重新定义函数

```
 void read(const data& dataObject)
 {
     std::cout << dataObject.var;
 } 
```

`data`或者如果您希望能够做到这一点，则在您的类中有一个类的成员变量。从设计的角度来看，您的类除了作用于类数据的实例之外不做任何事情。您可以将这两个类组合成一个包含类对象`data`作为成员变量的新类。您可以拥有该新类的多个功能（读/写）来为内部`data`成员进行修改/输出。拥有 2 个单独的类，它们的唯一目的是修改另一个不是成员变量的变量，这真的没有意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T18:42:46.553

您将参数传递给成员函数`read`and `write`，但这些函数未定义为接受参数。

将它们重新定义为：

```
// for class1:
void write(data &dataObject, int x)
{
     dataObject.var = x;
}

// for class2:
void read(data dataObject)
{
    std::cout << dataObject.var << endl;
} 
```

此外，当你*传递*这些对象时，不要在它们前面加上 type `data`：你已经声明了变量，现在你只需要：

```
int main()
{
    data dataObject;
    class1 object1;
    class2 object2;

    object2.read(dataObject);
    object1.write(dataObject, 2);
    object2.read(dataObject);
} 
```

# javascript - DIV 显示/隐藏代码有问题吗？

> ID：11916609
> 
> 赞同：2
> 
> 时间：2012-08-11T18:34:39.977
> 
> 标签：javascript, html, hide, show

下面的代码允许当用户滚动链接时出现一个 div。问题是，当用户退出链接时，div 不会消失。无论如何我们可以做到这一点，以便当用户滚动链接时 div 消失，但用户仍然能够将光标向下移动并与 div 中的项目进行交互.....任何帮助将不胜感激。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Untitled Document</title>
<script type='text/javascript'> 
 /* <![CDATA[ */ 
document.getElementsByClassName = function(){ 
    if(arguments.length == 1) 
    arguments[1]='*'; 
  var retnode = []; 
  var myclass = new RegExp('\\b'+arguments[0]+'\\b'); 
  var elem = this.getElementsByTagName(arguments[1]); 
  for(var i = 0; i < elem.length; i++){ 
    var classes = elem[i].className; 
    if(myclass.test(classes)) 
      retnode.push(elem[i]); 
  }; 
  return retnode; 
}; 
window.onload=function(){ 
  var x = document.getElementsByClassName('HoverMe', 'a'); 
  for(var i = 0; i < x.length; i++){ 
    x[i].onmouseover=function(){ 
      var m = document.getElementsByClassName('HoverMe', 'a'); 
      var n = document.getElementsByClassName('showMe', 'div'); 
      for(var i = 0; i<m.length; i++){ 
        n[i].style.display = (m[i]==this)?'block':'none'; 
      }; 
    }; 
  }; 
  x = document.getElementsByClassName('showMe','div'); 
  for(var i = 0; i < x.length; i++){ 
    x[i].style.display = 'none'; 
  }; 
}; 
/* ]]> */ 
</script> 

</head>

<body>
<a class='HoverMe'>link 1</a><a class='HoverMe'>link 2</a>
<div class='showMe'>stuff 1</div><div class='showMe'>stuff 2</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T18:41:20.700

添加一个`mouseout`功能。`x[i].mouseover`在您的函数调用下添加以下代码：

```
x[i].onmouseout=function(){ 
  var m = document.getElementsByClassName('HoverMe', 'a'); 
  var n = document.getElementsByClassName('showMe', 'div'); 
  for(var i = 0; i<m.length; i++){ 
    n[i].style.display = 'none';
  }; 
}; 
```

在这里查看小提琴：http: [//jsfiddle.net/babcN/](http://jsfiddle.net/babcN/)

# css - Internet Explorer 9 中的 CSS 垂直菜单问题

> ID：11916616
> 
> 赞同：0
> 
> 时间：2012-08-11T18:35:39.860
> 
> 标签：css, menu, internet-explorer-9

我正在尝试使用纯 css 构建一个垂直弹出菜单。像这个：

[http://devinrolsen.com/wp-content/uploads/2009/09/fig4.gif](http://devinrolsen.com/wp-content/uploads/2009/09/fig4.gif)

一切都在 FF、Opera、Chrome 中完美运行，但在 Internet Explorer 9 中却不行，在浏览菜单项时子级别不显示。诀窍在哪里？

这是完整的代码：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>

<style type="text/css">
#navigation{font-size: 20px; width: 150px}
#navigation ul{margin: 0px;padding: 0px;}
#navigation li{list-style: none;}
ul.top-level{background: #686868}
ul.top-level.li{
border-style: solid;
border-width: 2px;}
#navigation a{
color: #ffffff;
display: block;
height: 25px;
line-height: 25px;
text-indent: 10px;
text-decoration: none;
width: 100%
}
#navigation a:hover {text-decoration: underline; background-color: #000000; position: relative;}
#navigation li:hover {position: relative;}

ul.sub-level {display: none}
li:hover .sub-level{
background: #000000;
display: block;
width: 150px;
position: absolute;
left: 75px;
top: 5px;
}

</style>

</head>
<body>

    <div id="navigation">
        <ul class="top-level">
            <li><a href="#">Home</a>
                <ul class="sub-level">
                    <li><a href="#">Sub Menu Item 1</a></li>
                    <li><a href="#">Sub Menu Item 2</a></li>
                    <li><a href="#">Sub Menu Item 3</a></li>
                    <li><a href="#">Sub Menu Item 4</a></li>
                    <li><a href="#">Sub Menu Item 5</a></li>
                </ul>
            </li>
        </ul>       
    </div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T19:19:02.310

我懂了。该问题可以通过指定 IE9 需要的 DocType 来解决。替换以下内容：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"> 
```

和：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 
```

子菜单现在应该“神奇地”出现。

# android - 从不同的 Activity 类中同时使用相同的对象

> ID：11916617
> 
> 赞同：0
> 
> 时间：2012-08-11T18:35:40.443
> 
> 标签：android

我使用 Handler 从队列中发送/接收消息（数据类型整数）。此时我使用从 Activity 类的队列中接收到的数据。但我想在不同的活动类中同时使用这个接收到的数据。如何在 Android 中实现这一点？

# python - Python，如何根据列表重命名多个文件？

> ID：11916625
> 
> 赞同：1
> 
> 时间：2012-08-11T18:36:19.413
> 
> 标签：python, windows, list, rename

在 Windows 中使用 python 我试图一次重命名同一文件夹中的多个文件，但我不能使用列表进行重命名，这就是为什么我在尝试我的代码时收到此错误：

> os.rename(dirlist[1], words[1]) WindowsError: [Error 2] 系统找不到指定的文件

这是示例代码：

```
import os
import sys
words = os.listdir('C:/Users/Any/Desktop/test')
dirlist = os.listdir('C:/Users/Any/Desktop/test')

words = [w.replace('E', 'e') for w in words]
print words 

os.rename(dirlist[1], words[1]) 
```

我想要实现的是让我的 python 脚本在一个选择的文件夹上运行，该脚本将把所有的文件都放在里面并重命名它们。但是当我不能单独列出文件夹名称并将它们重命名时，棘手的部分就出现了，因为它们已附加到列表中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T18:41:19.707

`os.listdir`只是给你返回 basename 结果。不是完整路径。它们不存在于您当前的工作目录中。您需要使用 root 重新加入它们：

```
root = 'C:/Users/Any/Desktop/test'
for item in os.listdir(root):
    fullpath = os.path.join(root, item)
    os.rename(fullpath, fullpath.replace('E', 'e')) 
```

**更新**

为了回应您关于如何执行大量替换的评论，我建议您可以使用`translate`and `maketrans`。

让我们从我们的 dict 和一个源字符串开始：

```
d = {'E': 'e', 'a': 'B', 'v': 'C'}
s = 'aAaAvVvVeEeE' 
```

首先，让我向您展示一个非常原始的入门级方法的示例：

```
for old, new in d.iteritems():
    s = s.replace(old, new)

print s
# BABACVCVeeee 
```

该示例循环遍历您的字典，多次调用替换。它使用简单的语法，并且非常有意义。但是不得不为每个字符串循环遍历字典并多次调用replace，这有点糟糕。

我敢肯定还有很多其他方法可以做到这一点，但另一种方法是创建一次转换表，然后为每个字符串重用它：

```
import string

old, new = zip(*d.items())
print old, new
# ('a', 'E', 'v') ('B', 'e', 'C')

old_str, new_str = ''.join(old), ''.join(new)
print old_str, new_str
# aEv BeC

table = string.maketrans(old_str, new_str)

print s.translate(table)
# BABACVCVeeee 
```

这会将字典拆分为键和值元组。然后我们加入然后介绍字符串并将它们传递给`maketrans`，这将给我们一个表。我们只需要这样做一次。现在我们有一个表格，可以用它来翻译任何字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T18:50:52.080

出现错误是因为您当前的工作目录不指向`'C:/Users/Any/Desktop/test'`，默认情况下它指向`c:\python27`如果您使用的是 python 2.7，您可以通过 来检查您的`os.getcwd()`，因此您应该在应用该重命名之前将当前工作目录更改`'C:/Users/Any/Desktop/test'`为。

用于`os.chdir()`更改当前工作目录。

```
import os
import sys
words = os.listdir('C:/Users/Any/Desktop/test')
dirlist = os.listdir('C:/Users/Any/Desktop/test')

words = [w.replace('E', 'e') for w in words]
print words 

os.chdir('C:/Users/Any/Desktop/test')  #this changes the current working directory
os.rename(dirlist[1], words[1]) 
```

# java - XStream：序列化的 java.sql.Time 的反序列化导致错误

> ID：11916628
> 
> 赞同：0
> 
> 时间：2012-08-11T18:36:23.543
> 
> 标签：java, serialization, xml-serialization, xstream

下面的代码抛出了一个我完全没想到的异常！

```
 long now = System.currentTimeMillis();
        java.sql.Time t1 = new java.sql.Time(now);
        String s1 = new XStream().toXML(t1);
        java.sql.Time t2 = (java.sql.Time) new XStream().fromXML(s1);
        if(!t1.equals(t2)) throw new IllegalArgumentException(); 
```

[见 XStream](http://x-stream.github.io/)

问题是，为什么，它是 XStream 中的一个错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T19:00:42.530

一个快速的谷歌搜索给出 XStream 使用这个类来序列化 java.sql.Time：http: [//x-stream.github.io/javadoc/com/thoughtworks/xstream/converters/extended/SqlTimeConverter.html](http://x-stream.github.io/javadoc/com/thoughtworks/xstream/converters/extended/SqlTimeConverter.html)

注意警告：

> 将 java.sql.Time 转换为文本。警告：任何小于秒的粒度都会丢失。

所以它被截断到偶数秒，因此与原始（毫秒）的比较失败。

# ping - 当我 ping 127.0.0.1 时会发生什么

> ID：11916635
> 
> 赞同：4
> 
> 时间：2012-08-11T18:36:43.590
> 
> 标签：ping, network-protocols

这可能看起来有点愚蠢，但我很想知道当我 ping 环回 IP 地址时到底发生了什么，`ping 127.0.0.1`.

操作系统是否以特殊方式对待它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-11T19:02:27.083

这`127.0.0.0/8`是[IANA](http://en.wikipedia.org/wiki/List_of_assigned_/8_IPv4_address_blocks)保留的[CDIR 网络块](http://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing "CDIR 网络块")，称为 Loopback。此流量由内核路由到一个特殊的网络适配器，称为. 它永远不会像任何本地流量一样到达[OSI 模型第 1 层。](http://en.wikipedia.org/wiki/OSI_model)`loopback adapter`

对于大多数操作系统数据，直到 IP 堆栈都通过网络内核服务传输。此时数据将被发回，而不会影响物理层和真正的 NIC 硬件。

这项工作几乎完全由主机系统的 CPU 完成，与物理网络传输相比，这意味着极大的简化。现代操作系统内核能够检测环回流量并授予速度超过当今最快的物理适配器（> 50GBps）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T18:42:33.367

我认为操作系统对待这个 IP 与其他 IP 没有任何不同，只是它指向本地机器。

[http://www.rolo.org/127-0-0-1.html](http://www.rolo.org/127-0-0-1.html)

# javascript - 如何使用 Addon SDK 跟踪窗口最小化/最大化？

> ID：11916638
> 
> 赞同：0
> 
> 时间：2012-08-11T18:36:57.450
> 
> 标签：javascript, firefox, firefox-addon, firefox-addon-sdk, dom-events

如何确定窗口何时被最小化和撤销（最大化）使用`Addon SDK`？

显然我正在计算用户浏览时间，所以我需要分别启动和停止窗口最大化和最小化的计时器。

我想从插件代码本身来做，而不是在 OnBlur 事件之后通过从内容脚本传递的消息，因为那太不可靠了。

我认为这样的事情是有可能的：[Firefox 扩展：检查窗口是否最小化](https://stackoverflow.com/questions/10767068/firefox-extension-check-if-window-is-minimized)

但我不知道如何使用XPCOM。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T15:47:36.433

您可以使用 api-kit 中的 window-utils 模块访问基本窗口：

[https://addons.mozilla.org/en-US/developers/docs/sdk/latest/packages/api-utils/window-utils.html](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/packages/api-utils/window-utils.html)

特别是，我认为您将使用 WindowTracker 对象。

# ruby-on-rails - 未使用 Rails 和 Koala 接收来自 Facebook 实时 API 订阅的帖子

> ID：11916640
> 
> 赞同：2
> 
> 时间：2012-08-11T18:37:39.103
> 
> 标签：ruby-on-rails, facebook, facebook-opengraph, koala, real-time-updates

希望你能提供帮助，我有点不知所措......我正在开发一个 Rails 应用程序并运行 Koala 以连接 Facebook Graph API。我想维护正在使用我的应用程序的用户朋友的最新列表，因此我一直在尝试实现 Koala gem 的实时更新功能。我的应用程序部署在 Heroku 上，我正在使用 Redis-to-Go 运行 Resque 来管理来自 Facebook 的调用......不幸的是，即使我对 Facebook 服务器的测试 ping 都返回 true，我似乎也没有收到任何消息. 这是我正在使用的代码：

```
Realtime Controller:

 class RealtimeController < ApplicationController
 skip_before_filter :logged_in_check

  layout nil
  VERIFY_TOKEN = "purple-rain"

   def create
    Friendship.real_time_update!(params)
    render :text => 'success'
  end

  def index
    Rails.logger.info("RealTimeController verification")
    render :text=>Koala::Facebook::RealtimeUpdates.meet_challenge(params, VERIFY_TOKEN)
  end

end

Friendship Controller:

class Friendship < ActiveRecord::Base
  attr_accessible :friend_id, :user_id

   belongs_to :users, :foreign_key => "user_id"
   belongs_to :friends_ids, :class_name => "users", :foreign_key => "friend_id"

 def self.get_friends(user)
    @facebook ||= Koala::Facebook::API.new(user.oauth_token)
    @friends =  @facebook.get_connection(user.fbid, "friends")

    @friends.each do |friend|

      if @friend = User.find_by_fbid(friend["id"])

         friendship = Friendship.find_or_create_by_user_id_and_friend_id!(user.id,         
                      @friend.id)

       end
    end
  end

  def self.real_time_update!(payload)
    RealtimeUpdate.new(payload).enqueue_updates!
  end

     class RealtimeUpdate < Struct.new(:payload)

    def enqueue_updates!
      remove_duplicate_ids.each do |entry|
        if (user = User.find_by_uid(entry['uid']).try(:user))
          Resque.enqueue(Resque::Job::UpdateFacebookFriends, user.id, 
                         :since=>entry['time'])
        end
      end
    end

    protected

    def remove_duplicate_ids
      payload['entry'].each_with_object({}) do |entry, hash|
        hash[entry['uid']] ||= [] << entry
      end.values.collect { |update_payloads| update_payloads.min { |entry1, entry2|     
      entry1['time']<=>entry2['time'] } }
    end

  end

end 
```

重新工作

```
 class Resque::Job::UpdateFacebookFriends

  @queue        = "facebook_friends"

   def self.perform(uid, opts={})
    ::Timeout.timeout(1800) do
      Friendship.get_friends!(User.find_by_fbid(uid))
    end
  end

end 
```

很高兴提供我能提供的任何其他信息！！！

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-23T10:39:47.883

确保您`read_friendlists`在 rails 配置中指定了权限：

```
provider :facebook, ENV['FACEBOOK_APP_ID'], ENV['FACEBOOK_APP_SECRET'], :scope => 'read_friendlists, friends_location' 
```

请使用功能`get_connections`：

```
@facebook ||= Koala::Facebook::API.new user.oauth_token
@friends = @facebook.get_connection user.fbid, :friends 
```

# php - 获取用户的最新消息

> ID：11916644
> 
> 赞同：0
> 
> 时间：2012-08-11T18:37:49.273
> 
> 标签：php, sql

如何从向用户发送消息的人那里获取最新消息？

现在它显示...

```
first_name last_name       This is the newest message I sent you   2012-08-11 14:23:38

first_name last_name       test                                    2012-08-11 14:20:35

<?php 
    echo '<div id ="inbox_name">Name</div><div id="inbox_message">Message</div><div id="inbox_time">Time</div><div id="inbox_line"></div>';
    $query = mysql_query("SELECT * FROM `private_messages` WHERE `to_id`=$session_user_id ORDER BY `time_sent` DESC") or die("Error connecting to database. Please try again later.");
     while ($row = mysql_fetch_array($query)) {
        $to_id = $row['to_id'];
        $from_id = $row['from_id'];
        $message = $row['message'];
        $time= $row['time_sent'];

        $message_information = mysql_query("SELECT * FROM `sentrl_users` WHERE `id`=$from_id LIMIT 1");
        while ($row_information = mysql_fetch_array($message_information)) {
            $first_name = $row_information['first_name'];
            $last_name = $row_information['last_name'];
            $username = $row_information['username'];
            echo '<div id="inbox_information"><div id="recieved_name">'. $first_name . ' ' . $last_name .'</div><div id="recieved_message">'. $message .'</div><div id="recieved_time">'. $time .'</div></div>';
        }
    }
    ?> 
```

我尝试使用限制 1，但没有奏效。我试图在不复制`first_name`and的情况下获取最新消息`last_name`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T19:01:43.887

如果你想要的只是一行，而不是

```
while ($row = mysql_fetch_array($query)) {
//EVERYTHING INSIDE THE ORIGINAL WHILE LOOP
} 
```

你应该写

```
while($row=mysql_fetch_array($query)){
$array[$row["from_id"]]=$row;
} 
foreach($array as $row){
//EVERYTHING INSIDE THE ORIGINAL WHILE LOOP
} 
```

# java - Google App Engine：数据转储有多快？

> ID：11916646
> 
> 赞同：0
> 
> 时间：2012-08-11T18:38:36.933
> 
> 标签：java, google-app-engine, benchmarking

我正在阅读[这篇](https://stackoverflow.com/questions/6133918/how-to-download-all-datastore-entities-on-google-app-engine)SO 文章，并惊讶地发现没有人提到使用该`appcfg.py`工具运行数据转储需要多长时间。

现在，显然，这是您拥有多少数据以及您转储到的硬件的函数，但想知道是否有人曾经对此进行过基准测试。如果我有大量数据（例如*50GB*），我可以等待整个数据存储区转储到 YAML 文件多长时间？

分钟？小时？天？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T19:02:40.133

我无法告诉您如何将数据转储/下载到您的计算机，但我使用了 Datastore 备份，它将数据存储数据保存到 Blobstore：我已经看到备份速度在 100-150MBytes / 分钟之间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T23:42:32.723

影响下载数据集时间的因素是

1.  实体数量
2.  实体大小
3.  你的网络速度。
4.  appengine 后端的性能如何 ;-)

我的链接速度较慢（通常只能达到 150kbps（3G 无线），我的 675MB 实体总计 150 万个实体需要大约 2 天时间才能使用 appcfg 下载到本地机器。

所以不幸的是，不会有一个好的硬数字可以依赖——你只需要试一试，看看在你的情况下需要多长时间。

# c++ - 从二进制数据中读取对象

> ID：11916647
> 
> 赞同：0
> 
> 时间：2012-08-11T18:38:42.730
> 
> 标签：c++, binary

我一直在从二进制文件中读取一组 SRD 对象 - 但由于这是我第一次这样做，我修改了一个标头，使其所有成员都公开，因为我不确定会发生什么。我已经完成了我的任务，剩下的就是将这些成员设为私有并编写修改它们的方法。但是，有一个问题。出于调试目的，我只将 1 个成员设为私有，在我为它编写所有方法之前，我将保持这种状态。这个成员只是一个无符号的int C。当写一个返回它的方法时（getC()返回C），它返回的值是0000...3435973836，意思是它没有设置？因此，我根据二进制文件中的对象数量创建了一个指向 SRD 的指针数组。

```
SRD *a;
...
a = new SRD[numOfRecords]; 
```

并且数组是从文件中填充的......

```
for (i=0; i<numOfRecords; i++)
    {
        f.seekg(i * sizeof s);  
        f.read((char *)&a[i], sizeof s);
        cout << a[i].getCC();
    } 
```

现在，`a[i].getCC()`当 C 公开时可以工作，但将其设为私有会使 000..3435... 意味着访问它不是问题，但它没有在前一个 for 循环的 fread 中设置。我想我需要某种类型的赋值运算符来设置这些值，但我不知道......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T19:02:18.423

当您将变量设为私有时，SRD 类不再是[普通旧数据 (POD)](http://en.wikipedia.org/wiki/Plain_old_data_structure)。因此，您无法保证它在内存中的表示，因此您不能再依赖`f.read`这样的工作。

我建议您在您的类中和该方法内添加一个 read-from-stream 方法，`read`直接添加到 unsigned int 成员变量中。然后，在循环中，您只需调用该方法（将流作为引用或指针传递）。

**编辑**，按要求举例：

```
class SRD {
  ...
  public:
    void readFromStream(istream& f) {
      f.read(&CC, sizeof CC);
    }
  private:
    unsigned int CC;
}; 
```

环形：

```
for (i=0; i<numOfRecords; i++)
{
    a[i].readFromStream(f);
    cout << a[i].getCC();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T04:01:47.833

实际上，问题出在其他问题上：标头是按特定顺序定义的，第一个成员是一个数组，而 C 是第二个，在调试时我首先从 C 开始 - 并将其从第二个位置移动到上面public 一，改变了类的结构。

所以，

```
Class P
{
int i;
char c;
} 
```

不同于

```
Class P
{
char c;
int i;
} 
```

因为二进制文件中的数据具有特定的顺序，并且在重新排列类定义的顺序时，成员 (c) 会尝试访问打算用于另一个成员 (i) 的数据

# c++ - C++：使用带有指针字符串的Strcpy

> ID：11916649
> 
> 赞同：0
> 
> 时间：2012-08-11T18:39:19.430
> 
> 标签：c++, arrays, string, pointers, strcpy

> **可能重复：**
> [使用 strcpy 时访问冲突？](https://stackoverflow.com/questions/1274626/access-violation-when-using-strcpy)

我遇到了困扰我的事情

`char* p = "Hello"; strcpy (p,"bye");`

这总是给我一个错误，那么我怎样才能将 strcpy 与指针字符串一起使用。

（请没有人告诉我使用 std::string）

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-11T18:43:13.243

```
char* p = "Hello";   //BAD - OBSOLETE!
strcpy (p,"bye"); 
```

一个好的编译器应该在第一行给出你的警告（或错误），因为它已经过时了，并且语言要求你把它写成：

```
char const * p = "Hello";  //GOOD 
```

一旦你写了这个（无论如何这是写这个的正确方法），那么一切都会变得清晰：`p`指向*const*数据，意味着`p`指向的数据**不能**被*修改*，这反过来意味着，你不能使用`strcpy`（或手动）覆盖它.

如果你想覆盖它，一种声明`p`为数组的方法：

```
char p[] = "Hello";  //OK
strcpy (p,"bye");    //OK - for any string (2nd arg) of length <= 5 
```

在 C++ 中，您应该尽可能地使用`std::string`、避免`char*`和`char[]`。因此，编写代码的 C++ 方法是：

```
#include <string>   //must include this first

std::string p = "Hello";
p = "bye"; //overwrite it. 
```

很简单！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T18:42:56.860

首先，您应该为您的字符串分配内存，如下所示：

```
char *p = new char[BUFFER_LENGTH]; 
```

然后您可以将内容复制到其中：

```
strcpy(p, "bye"); 
```

请参阅[此页面](http://en.cppreference.com/w/cpp/string/byte/strcpy)了解如何使用它。

完成后不要忘记删除内存：

```
delete[] p; 
```

*如果我以错误的方式理解您的问题，您也可以提供更多信息*

# css - ：在溢出为自动时不显示之前

> ID：11916650
> 
> 赞同：2
> 
> 时间：2012-08-11T18:39:20.237
> 
> 标签：css, overflow, tumblr

所以我正在制作这个使用 :before 作为图标的 tumblr 主题，如下所示：

```
 /* Icons */
    ol#posts li:before{
        content:"";
        display:block;
        position:absolute;
        left:-46px;
        width:32px;
        height:24px;
        background-repeat:no-repeat;
        // tried: overflow:visible;
    }
    li.text:before{
        background:url('http://i.imgur.com/z5YtE.png');
    }
    [...] 
```

但是当我将 li.post 的溢出设置为自动时，图标不会显示。

```
 li.post{
        position:relative;
        max-height:400px;
        overflow-x:auto;
    } 
```

是什么原因造成的，我该如何解决？

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T22:56:42.133

你可能会给自己答案，“当我将 li.post 的溢出设置为自动时，图标不会显示。”

删除溢出-x

你正在做的是，如果有更多的内容然后一个未定义的宽度，然后显示一个滚动条。

你还没有设置一个 with，所以滚动条永远不会出现，并且所有不在容器 li.post 普通视图中的图标都是不可见的（*因为绝对定位*）。

# ruby - 将 ZPL 数据字符串发送到 Ruby 中的 IP 地址

> ID：11916651
> 
> 赞同：1
> 
> 时间：2012-08-11T18:39:34.523
> 
> 标签：ruby, string, zebra-printers, zpl

使用 Ruby 将一系列数据字符串发送到使用其 IP 地址的 Zebra 打印机。

这是我开始使用的 Ruby 代码：

```
require 'socket'  
streamSock = TCPSocket.new( "127.0.0.1", 20000 )  
#streamSock.send( "Hello\n" )  
str = streamSock.recv( 100 )  
print str  
streamSock.close 
```

我需要用`"Hello\n"`这一系列字符串的 ZPL（斑马打印语言）代码替换该部分：

```
"^XA" +

"^FO50,50" +

"^A0N50,50" +

"^FDHello, World!^FS" +

"^XZ"; 
```

我已经尝试了几种对每一行使用 #streamSock.send( "xxx" ) 的方法 - 例如：#streamSock.send( "^XA" ) - 然后分别使用所有其他字符串元素。

我尝试了几种将整个 ZPL 代码字符串放入一行的变体，例如

# streamSock.send("^XA^FO50,50^A0N50,50^FDHello, World!^FS^XZ")

Zebra 标签打印机没有响应。如果我使用另一个实用程序将较早的一系列字符串作为文本文件发送到打印机，则打印效果很好。

任何关于 Ruby 代码应该如何工作的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T18:19:09.827

这个对我有用：

```
require 'socket'

streamSock = TCPSocket.new( "192.168.205.214", 6101 )
str = "^XA" + "^FO50,50" + "^A0N50,50" + "^FDHello World^FS" + "^XZ"
streamSock.send( str , 0)

streamSock.close 
```

# c# - 如何保护库用户免受错误初始化？

> ID：11916656
> 
> 赞同：4
> 
> 时间：2012-08-07T12:00:41.650
> 
> 标签：c#, visual-studio-2010

我正在研究一个 dll，它包含一个应该能够表示从 32 到 126 的整数值的类型，称为“PByte”（用于可打印字节）。问题是我想保护用户不使用例如 1000 初始化类型。这不应该引发异常。它应该防止编译，就像 Visiual Studio 尝试用 256 初始化一个字节一样。类型在构造函数中初始化。

```
public PByte(int value)
{
    /* if (value < 32 || value > 126)
        throw new ArgumentException("\"" + value + "\" is an invalid value!"); */
    this._value = value;
} 
```

这个

```
PByte pb = new PByte(2000); 
```

不应该是可编译的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T21:55:32.573

您希望在编译时发生运行时异常吗？这不可能！

应该`PByte pb = new PByte(get399());`编译吗？`get399()`不，但是如果不运行程序，你怎么能知道呢？

但首先你应该使参数成为一个`byte`类型。这将为 0-255 之外的数字产生编译时异常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T00:07:27.060

您唯一的选择是在超出范围时分配一个空字符。像这样的东西。

```
public struct PByte : IEquatable<PByte>
{
    readonly byte _value;
    public PByte(byte value)
    {
        this._value = (byte)( value > 31 && value < 128 ? value : 0);
    }
    public byte Value { get { return this._value; } }
    public char Char { get { return (char)_value; } }
    public bool Equals(PByte other)
    {
        return _value.Equals(other._value);
    }        
}

class Program
{
    static void Main(string[] args)
    {
        var p1 = new PByte(1000); // Won't compile
        var p2 = new PByte(5);      //'\0'
        var p3 = new PByte(65);     //'A'
        var p4 = new PByte(125);    //'}'
        var p5 = new PByte(175);    //'\0'
    }
} 
```

# c# - 重复 C# 行的最佳“宏方式”

> ID：11916659
> 
> 赞同：0
> 
> 时间：2012-08-11T18:40:09.623
> 
> 标签：c#, macros

在 C# 程序中，我进行了多次重复的错误检查：

```
try 
{
  File.Move(searchfolder + question1 +"_"+ filestring +".txt", 
            searchfolder + question1 +".txt");
}
catch (Exception ex) 
{
  File.AppendAllText(adminfolder + question1 +"_l.txt", "!"); 
  side.Value = Convert.ToString(ex) + "[Check-In error at "
                               + Convert.ToString(MYLINE) +"] "+ side.Value;
} 
```

MYLINE 是一个数字，而 MYLINE 是唯一在我的程序中发生变化的东西。

因此，一个普通的 C++ #define 宏会使它更易于使用（我只需在程序顶部编写完整的“#define CHECKIN(MYLINE) ...”）。

专业人士如何在 C# 中处理这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-11T18:42:19.090

> ...而 MYLINE 是我的程序中唯一改变的东西。所以一个普通的 C++ #define 宏会使这更容易使用

好吧，也许吧，但由于 C# 没有宏的概念......只需使用一个方法：

```
static class FileMover
{
    public static void MoveMyFile(string myline)
    {
        // your existing code here
    }
} 
```

附带说明一下，您的代码中存在明显的问题。在您的`catch`块中，您调用`File.AppendAllText()`... 当然，这也可以引发异常。你需要考虑到这一点。

# javascript - ASP.NET Web 服务中的 Excel 导出

> ID：11916660
> 
> 赞同：0
> 
> 时间：2012-08-11T18:40:16.317
> 
> 标签：javascript, jquery, asp.net, web-services

我有这个 ASP.Net Web 应用程序，在我的一个页面中我使用 JQuery JQGrid，我希望能够将 JQGrid 导出到 Excel 表，所以使用 JavaScript 我收集了数组中的值，然后调用了一个 WebService在 DataGrid 中填写值，我成功完成了所有这些，除了在 WebService 中导出没有文件下载出现，这是我的 WebService 代码：

```
[WebMethod]
public void GetData(object[] Values)
{
    DT_ToFill.Columns.Add("CaseID");
    DT_ToFill.Columns.Add("SR");

    foreach (object Value in Values)
    {
        Dictionary<string, object> DictVals = new Dictionary<string, object>();
        DictVals = (Dictionary<string, object>)Value;
        string CaseID = DictVals["CaseID"].ToString();
        string SR = DictVals["SR"].ToString();

        object[] Obj = new object[2] { CaseID, SR };
        DT_ToFill.Rows.Add(Obj);
    }
    ExportToExcel(DT_ToFill, Context.Response);
}

[WebMethod]
public string HelloWorld()
{
    return "Hello World";
}

public void ExportToExcel(DataTable dt, HttpResponse Response)
{
    GridView GridView1 = new GridView();
    GridView1.DataSource = dt;
    Response.Buffer = true;
    Response.AddHeader("Content-Disposition", "inline;filename=Schedule_ExcelSheet.xls");
    Response.Charset = "";
    Response.ContentType = "application/ms-excel";
    Response.Charset = "UTF-8";
    Response.ContentEncoding = Encoding.UTF8;
    StringWriter sw = new StringWriter();
    HtmlTextWriter ht = new HtmlTextWriter(sw);
    GridView1.AllowPaging = false;
    GridView1.DataBind();
    GridView1.RenderControl(ht);
    Response.Output.Write(sw.ToString());
    Response.Flush();
    Response.End();
}

public void VerifyRenderingInServerForm(Control control)
{
} 
```

请帮助...谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T18:57:48.227

听起来您正在将 excel 文件作为对 ajax 请求的响应发送回来？如果是这样，我认为您不能通过 ajax 进行文件下载。

也许像您现在正在做的那样通过 ajax 发送数据，但是然后执行新窗口或 iframe（将其附加到 document.body）并将 src 设置为返回 excel 文件的 url。那应该触发文件下载。这是我通常做的。

# sql - SQL - 从嵌套查询中访问列

> ID：11916661
> 
> 赞同：0
> 
> 时间：2012-08-11T18:40:20.123
> 
> 标签：sql, sqlite

我的桌子是这样的：

```
_id 时间名称 isNotFirstEntry
1 55555 aaa 0
2 66666 1
3 77777 1
4 88888 BB 0
5 99998 4
6 99999 4

```

即对于重复条目，`name`为空并且`_id`原始条目的存储在 isNotFirstEntry 中。

我想检索_id、时间、姓名、不。重复条目为 n where name!=null

我试过这样的事情： `select _id, time, name, (select count(isNotFirstEntry) from mytable where isNotFirstEntry=_id) as n from mytable where name!=null`

但这当然行不通。嵌套查询中的_id与外部查询的_id不一样。我需要从嵌套查询中访问外部部分的 _id。

我使用的是 android sdk，所以我只能使用 sqlite。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T19:18:05.727

你需要加入。您可以将其作为相关子查询来执行：

```
select mt._id, mt.time, mt.name,
       (select count(mt2.isNotFirstEntry)
        from mytable mt2
        where mt2.isNotFirstEntry=mt._id
       ) as n
from mytable mt
where mt.name!=null 
```

或通过以下方式与组显式加入：

```
select mt._id, mt.time, mt.name, count(mt2._id) as n
from mytable mt left outer join
     mytable mt2
     on mt._id = mt2.isNotFirstEntry
where mt.name is not null
group by mt._id, mt.time, mt.name 
```

# php - Yii sql 查询绑定，带参数，不能正常工作

> ID：11916668
> 
> 赞同：1
> 
> 时间：2012-08-11T18:41:05.663
> 
> 标签：php, yii

我是 Yii 的新手，一切似乎都很好，但问题是，当我使用绑定参数时，比如（DAO stile）：

```
$command = $this->conn->createCommand($sql);

$command->bindColumn("title", "test_title");

$result = $command->query(); 
```

或（活动记录）：

```
$row = Movies::model()->find("m_id=:m_id", array(":m_id"=>27));
    or
$row = Movies::model()->findByPk(24); 
```

我已经尝试了一切：1）向mysql config添加了一个配置参数。在 main.php - 'enableParamLogging' => true
2) 将字符串从 ' 更改为 " 3) 添加另一个参数以防 mysql 版本 - 'emulatePrepare'=>true

没有什么对我有用。我认为问题出在参数上，但是 bindColumn 方法没有使用它，所以我的假设是 Yii 的某些模块没有包含在配置文件或类似的东西中。

我的模型看起来像这样（在 /models 目录中创建）：

```
class Movies extends CActiveRecord {

  public static function model($className = __CLASS__) {
    parent::model($className);

  }

} 
```

只是为了让大家避免不必要的问题：在 main.php conf 文件中正确配置了数据库，有一个表**movies**，还有一个 PKs 24 和 27。

除了在 DAO 中使用特殊方法绑定某些参数以及在 AR 中使用 findByPk 或 find 之外，所有本机 SQL 都可以正常工作。我希望这很清楚，伙计们不要用明显的简单技术可能性来打扰我，我可以（正如你所假设的那样）做错了。

PS 另一个有用的信息 - 打电话时

```
$command->bindColumn("title", "test_title"); 
```

FW 抛出异常 - **CDbCommand 及其行为没有名为 "bindColumn" 的方法或闭包**。所以，如上所述，我认为 Yii 没有看到那些特殊的方法，这是肯定的。我该如何修复它？

好的，为什么这段代码也不起作用？没有例外，只是空白页。

```
$sql = "SELECT title, year_made FROM movies WHERE year_made=':ym'";

$command = $this->conn->createCommand($sql);

$command->bindParam(":ym", "2012", PDO::PARAM_STR);

$result = $command->query(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T07:00:37.723

DAO 绑定不起作用，因为没有`bindColumn`. 您只有`bindParam`, 将变量绑定到列，或者`bindValue`, 将值绑定。我不知道 AR 查询有什么问题。

**编辑：**您的 DAO 代码应如下所示：

```
$sql = "SELECT * FROM sometable WHERE title = :title";
$command = $this->conn->createCommand($sql);
$command->bindParam(":title", $tile_var);
$result = $command->query(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T04:27:46.887

您可能有两个不同的问题。至少您的 DAO 代码（如果这是您的代码中实际拥有的）绑定错误。

绑定需要在查询完成之前发生（并且在命令对象上完成），而不是在结果对象上。在此处查看更多信息：[http ://www.yiiframework.com/doc/guide/1.1/en/database.dao#binding-parameters](http://www.yiiframework.com/doc/guide/1.1/en/database.dao#binding-parameters)

就您的 AR 查询而言，这些也可能存在问题。您可以使用`findByAttributes`而不是这条线（虽然你的线应该工作）：

```
$row = Movies::model()->find("m_id=:m_id", array(":m_id"=>27)); 
```

如果您有标准`id`密钥，则以下内容应该可以工作。如果您不这样做（并且正在使用 m_id，您是否设置了模型的`primaryKey()`功能？

```
$row = Movies::model()->findByPk(24); 
```

此外，如果这改变了您处理结果的方式，您将得到一个模型对象，而不是一行......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T19:14:48.403

你是用 Gii 生成器生成电影模型还是你自己写的？

编辑：

据我所知，您必须添加 tableName

```
public function tableName() {
    return 'movies';
} 
```

# windows-phone-7 - Windows Phone - XNA 和 SIlverlight

> ID：11916674
> 
> 赞同：2
> 
> 时间：2012-08-11T18:41:40.450
> 
> 标签：windows-phone-7, xna, windows-8

我想知道微软是否真的停止了 XNA 和 Silverlight。如果是这种情况？为 Windows Phone 制作应用程序我应该学习什么？我应该学习什么来制作简单/简单的基于 2D 的游戏（不是 c++）？

Windows 8 有哪些替代方案？

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T18:47:45.857

对于游戏，最好使用 XNA，因为最终您将开始创建 3d 游戏。Silverlight 更适用于常见应用程序，如记事本、浏览器和其他东西。同样，如果您想创建游戏，请了解更多 Xna。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T18:53:39.270

微软没有正式宣布他们将停止使用 Silverlight/XNA。

当然，我们很多人都有自己的理由相信 Silverlight 正在消亡。我不会对 XNA 说同样的话。至少现在还没有 :-) 别忘了 Xbox。

对于下一个版本的 Windows Phone (8)，应用程序编程模型将基于/相同于 Windows 8 (Win RT)。他们一直在推广 DirectX 作为一种为 Windows 8 (WinRT) 开发游戏的技术。Metro 模式下正式不支持*XNA 。*

要在 DirectX 中编写游戏，C++ 不是唯一的选择。托管 DirectX 可与 C#/VB 一起使用。你可以调查一下。

而且，如果您了解 Silverlight，那么您对 ​​XAML 的理解将对您使用新的 Metro 风格应用程序（电话和 Windows）有很大帮助。所以，你不必担心那部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T18:53:54.030

很难对谣言说些什么，但在这种情况下，您能做的最好的事情就是与 Microsoft 及其论坛或社交网络保持联系。

例如[http://channel9.msdn.com/Forums/Coffeehouse/XNA-in-Windows-8](http://channel9.msdn.com/Forums/Coffeehouse/XNA-in-Windows-8)

Windows Phone 8 肯定会引入对 DirectX 和 C++ 的支持，XNA 或多或少是 DirectX 的一个子集，如果微软将在其手机中引入 DirectX，我认为保留 XNA 毫无意义；Silverlight 是一项在这一点上永远不会成功的技术，即使 Flash 已经死了，你可以想象 Silverlight 的情况如何，它在这个市场上是一个非常非常非常小的玩家，它甚至不便携。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-12T08:24:41.377

由于还没有官方声明，很难说这些平台会发生什么。如果你想创建游戏，你可以考虑使用[MonoGame](http://monogame.codeplex.com/)。

> 什么是MonoGame？
> 
> MonoGame 是 Microsoft XNA 4 框架的开源实现。我们的目标是允许 Xbox 360、Windows 和 Windows Phone 上的 XNA 开发人员将他们的游戏移植到 iOS、Android、Mac OS X、Linux 和 Windows 8 Metro。PlayStation Mobile 的开发目前正在进行中。

上周我在 Windows 8 上演示了一些用 MonoGame 制作的游戏，我不得不说我印象深刻。

# java - 从另一个 JButton 获取 JButton

> ID：11916675
> 
> 赞同：2
> 
> 时间：2012-08-11T18:41:41.803
> 
> 标签：java, swing, jbutton

当我单击另一个 jbutton 时，我想获得一个 jbutton。

[这里是示例代码的链接（以 jbutton 身份登录，asdf 作为密码登录）](http://notepub.com/#note=558654)

```
//File Name= test1.java
import java.awt.*;
import javax.swing.*;
import java.awt.event.*;

public class test1 extends JFrame {
    public static void main(String[] args) {
        new test1();
    }

    public test1() {
        super("Using JButton");
        Container content = getContentPane();
        content.setBackground(Color.white);
        content.setLayout(new FlowLayout());
        JButton button = new JButton("First");
        button.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                System.out.println("You clicked first button");
            }
        });
        content.add(button);
        JButton button2 = new JButton("Second");
        button2.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                System.out.println("You clicked second button");
            }
        });
        content.add(button2);
        pack();
        setVisible(true);
    }
} 
```

如果我单击“第一个”按钮，我想隐藏“第二个”按钮。我的期望就像，”

```
button.setName("something");
button.addActionListener(new ActionListener(){

   public void actionPerformed(ActionEvent e){
      System.out.println("You clicked first button");
      btn2=getButtonByName("something");
      btn2.setVisible(!btn2.isVisible());
   }
});" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-11T19:05:05.883

您可以使用 [setVisible(boolean)](http://docs.oracle.com/javase/6/docs/api/java/awt/Component.html#setVisible%28boolean%29)更改可见性，这是​​基于发布代码的示例：

```
import java.awt.*;
import javax.swing.*;
import java.awt.event.*;

public class test extends JFrame {
    public static void main(String[] args) {
        new test();
    }

    public test() {
        super("Using JButton");
        Container content = getContentPane();
        content.setBackground(Color.white);
        content.setLayout(new FlowLayout());
        final JButton button = new JButton("First");
        final JButton button2 = new JButton("Second");
        button.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent e) {
                System.out.println("You clicked first button");
                button2.setVisible(!button2.isVisible());
            }
        });
        content.add(button);

        button2.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent e) {
                System.out.println("You clicked second button");
                button.setVisible(!button.isVisible());
            }
        });
        content.add(button2);
        pack();
        setVisible(true);
    }
} 
```

# vb.net - vb.net 数据表到使用 Datatable.Select() 的多个数据表

> ID：11916680
> 
> 赞同：1
> 
> 时间：2012-08-11T18:42:13.287
> 
> 标签：vb.net, select, datatable

我有一个数据表，它有一个名为 sID 的列，其值从 1 到 14，所以我想将具有每个 sID 的每一行放在一个新的数据表中。

```
e.g Datatable1 contains all rows with sID=1
    Datatable2 contains all rows with sID=2
    Datatable3 contains all rows with sID=3 
```

现在我不知道如何使用 Datatable.Select() 来填充每个 Datatable 的行。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T00:57:06.213

Datatable.Select() 方法是选择行，以填充您需要填充的每个 Datatable，如下所示：

```
Dim dt as DataTable
dt.Columns.Add("sID")
dt.Columns.Add("Column2")

Dim dr as Datarow
Dim i as integer

for i = 0 to 3
dr = dt.NewRow()
dr(0) = sID
dr(1) = "Column2Value"
dt.Rows.Add(dr)
next i 
```

或者来自这样的数据库：

```
Sub FillData()
    ' 1
    ' Open connection
    Using c As New SqlConnection(Properties.Settings.[Default].DataConnectionString)
        c.Open()
        ' 2
        ' Create new DataAdapter
        Using a As New SqlDataAdapter("SELECT * FROM EmployeeIDs", c)
            ' 3
            ' Use DataAdapter to fill DataTable
            Dim t As New DataTable()

                ' 4
                ' Render data onto the screen
                ' dataGridView1.DataSource = t; // <-- From your designer
            a.Fill(t)
        End Using
    End Using
End Sub 
```

# ios - FacebookSDK 3.0 - Apple Mach-O 链接器错误

> ID：11916682
> 
> 赞同：13
> 
> 时间：2012-08-11T18:42:18.847
> 
> 标签：ios, xcode, facebook, api

我正在尝试在我的一个应用程序中实现 Facebook，因此遵循了 Hackbook 上的官方 Facebook 教程。[https://developers.facebook.com/docs/howtos/login-with-facebook-using-ios-sdk/](https://developers.facebook.com/docs/howtos/login-with-facebook-using-ios-sdk/)

我按照描述实现了所有内容，没有收到任何错误或警告。但是，当我尝试构建应用程序时，我收到 17 个 Mach-O 链接器错误。

```
Undefined symbols for architecture i386:
  "_FBSessionStateChangedNotification", referenced from:
      -[ForeverMainViewController sessionStateChanged:state:error:] in ForeverMainViewController.o
  "_sqlite3_bind_double", referenced from:
      -[FBCacheIndex _updateEntryInDatabaseForKey:entry:] in FacebookSDK(FBCacheIndex.o)
      -[FBCacheIndex _writeEntryInDatabase:] in FacebookSDK(FBCacheIndex.o)
  "_sqlite3_bind_int", referenced from:
      -[FBCacheIndex _updateEntryInDatabaseForKey:entry:] in FacebookSDK(FBCacheIndex.o)
      -[FBCacheIndex _writeEntryInDatabase:] in FacebookSDK(FBCacheIndex.o)
      -[FBCacheIndex _trimDatabase] in FacebookSDK(FBCacheIndex.o)
  "_sqlite3_bind_text", referenced from:
      -[FBCacheIndex _updateEntryInDatabaseForKey:entry:] in FacebookSDK(FBCacheIndex.o)
      -[FBCacheIndex _writeEntryInDatabase:] in FacebookSDK(FBCacheIndex.o)
      -[FBCacheIndex _readEntryFromDatabase:] in FacebookSDK(FBCacheIndex.o)
      -[FBCacheIndex _removeEntryFromDatabaseForKey:] in FacebookSDK(FBCacheIndex.o)
  "_sqlite3_close", referenced from:
      ___23-[FBCacheIndex dealloc]_block_invoke_0 in FacebookSDK(FBCacheIndex.o)
  "_sqlite3_column_double", referenced from:
      -[FBCacheIndex _readEntryFromDatabase:] in FacebookSDK(FBCacheIndex.o)
  "_sqlite3_column_int", referenced from:
      -[FBCacheIndex _readEntryFromDatabase:] in FacebookSDK(FBCacheIndex.o)
      -[FBCacheIndex _fetchCurrentDiskUsage] in FacebookSDK(FBCacheIndex.o)
      -[FBCacheIndex _trimDatabase] in FacebookSDK(FBCacheIndex.o)
  "_sqlite3_column_text", referenced from:
      -[FBCacheIndex _readEntryFromDatabase:] in FacebookSDK(FBCacheIndex.o)
      -[FBCacheIndex _trimDatabase] in FacebookSDK(FBCacheIndex.o)
  "_sqlite3_errmsg", referenced from:
      _releaseStatement in FacebookSDK(FBCacheIndex.o)
      -[FBCacheIndex _updateEntryInDatabaseForKey:entry:] in FacebookSDK(FBCacheIndex.o)
      _initializeStatement in FacebookSDK(FBCacheIndex.o)
      -[FBCacheIndex _writeEntryInDatabase:] in FacebookSDK(FBCacheIndex.o)
      -[FBCacheIndex _readEntryFromDatabase:] in FacebookSDK(FBCacheIndex.o)
      -[FBCacheIndex _fetchCurrentDiskUsage] in FacebookSDK(FBCacheIndex.o)
      -[FBCacheIndex _removeEntryFromDatabaseForKey:] in FacebookSDK(FBCacheIndex.o)
      ...
  "_sqlite3_exec", referenced from:
      ___36-[FBCacheIndex initWithCacheFolder:]_block_invoke_0 in FacebookSDK(FBCacheIndex.o)
  "_sqlite3_finalize", referenced from:
      _releaseStatement in FacebookSDK(FBCacheIndex.o)
  "_sqlite3_open_v2", referenced from:
      ___36-[FBCacheIndex initWithCacheFolder:]_block_invoke_0 in FacebookSDK(FBCacheIndex.o)
  "_sqlite3_prepare_v2", referenced from:
      _initializeStatement in FacebookSDK(FBCacheIndex.o)
  "_sqlite3_reset", referenced from:
      _initializeStatement in FacebookSDK(FBCacheIndex.o)
  "_sqlite3_step", referenced from:
      -[FBCacheIndex _updateEntryInDatabaseForKey:entry:] in FacebookSDK(FBCacheIndex.o)
      -[FBCacheIndex _writeEntryInDatabase:] in FacebookSDK(FBCacheIndex.o)
      -[FBCacheIndex _readEntryFromDatabase:] in FacebookSDK(FBCacheIndex.o)
      -[FBCacheIndex _fetchCurrentDiskUsage] in FacebookSDK(FBCacheIndex.o)
      -[FBCacheIndex _removeEntryFromDatabaseForKey:] in FacebookSDK(FBCacheIndex.o)
      -[FBCacheIndex _dropTrimmingTable] in FacebookSDK(FBCacheIndex.o)
      -[FBCacheIndex _trimDatabase] in FacebookSDK(FBCacheIndex.o)
      ...
ld: symbol(s) not found for architecture i386 
```

在重新实现，清理应用程序，确保一切都在那里之后，我没有想法了。我也在另一个应用程序中实现了它，但又出现了错误。然而，来自 Facebook 的给定样本按预期工作。我在互联网上做了各种提示，但到目前为止都没有奏效。也许这里有人对 API 有所了解，并且对我有一个很好的提示 :)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-12T00:10:28.987

我想你错过了这条线

NSString *const FBSessionStateChangedNotification = @"FBSessionStateChangedNotification";

并添加对 -lsqlite3.0 的引用

请参阅[https://developers.facebook.com/docs/getting-started/getting-started-with-the-ios-sdk/#project](https://developers.facebook.com/docs/getting-started/getting-started-with-the-ios-sdk/#project)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-27T14:48:01.447

我想你错过了这个

转到项目->构建阶段->链接二进制-添加->-lsqlite3.0

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-12T12:12:02.907

是的，我找到了解决方案：`libsqlite3.dylib`我使用的是为 armv6 而不是 7 编译的，所以你下载 Xcode dmg 文件（超过 4.2）并从中提取 lib。

# c++ - 使用字符串和整数对对向量进行排序

> ID：11916691
> 
> 赞同：3
> 
> 时间：2012-08-11T18:43:04.567
> 
> 标签：c++, stl

### CMP

`bool cmp(const pair<string, long> &p1, const pair<string, long> &p2){
if(p1.second!=p2.second)
return p1.second < p2.second;
return strcmp(p1.first.c_str(),p2.first.c_str()); }`

大家好，

我正在尝试`vector`根据`second`. `pair`如果对的元素`second`相等，那么我比较.`first``pair`

我正在使用上面的代码对`vector`包含的`string`and进行排序`int` `pair`。我正在使用`sort_heap(vector.begin(),vector.end(),cmp);`. 但这似乎没有按预期工作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-11T18:46:24.303

只需`operator<`用于字符串：

```
bool cmp(const pair<string, long> &p1, const pair<string, long> &p2)
{
    if(p1.second!=p2.second)
        return p1.second < p2.second;
    return p1.first < p2.first;
} 
```

如果第一个“小于”第二个（这就是您所关心的），strcmp 返回一个负数，如果它们相等，则返回 0，如果第二个小于第一个，则返回一个正数。所以，如果你想使用 strcmp，你可以这样做：

```
return strcmp(p1.first.c_str(), p2.first.c_str()) < 0; 
```

但我不明白你为什么要那样做。

# antlr - ANTLR 字符串被视为标识符

> ID：11916692
> 
> 赞同：1
> 
> 时间：2012-08-11T18:43:11.110
> 
> 标签：antlr, grammar

我正在开发一个 sql 解析器，以允许我们的程序员创建一个类似 mysql 的查询，然后根据您的需要自动转换为 mssql 或 mysql 查询。这允许在 mysql 和 mssql 数据库之间灵活转换。

我目前有我打算创建的东西，只是有一个问题。

如果我运行这样的查询：

```
SELECT * FROM `x`.`y` WHERE `y`.`b` = 'hello' 
```

字符串被视为标识符 llo

这是我的语法

```
grammar Query;

query
    : (select_stmt|update_stmt|delete_stmt|insert_stmt|upsert_stmt) ';'? EOF
    ;

select_stmt
    : select 'FROM' select_table_exp where? groupby? orderby? limit?
    ;

update_stmt
    : 'UPDATE' table_exp set where?
    ;

delete_stmt
    : 'DELETE FROM ' table_exp where    
    ;

insert_stmt
    : 'INSERT INTO' table_exp fields values
    ;

upsert_stmt
    : 'UPSERT' table_exp set ?  
    ;

values
    : 'VALUES (' valuelist ')'
    ;

valuelist
    : value (',' valuelist)?where
    ;

fields
    : '(' groupbylist ')'
    ;

set
    : 'SET' (setlist)
    ;

setlist
    : setters (',' setlist)?
    ;

select
    : 'SELECT' fieldlist
    ;

where
    : 'WHERE' where_stmt 
    ;

limit
    : 'LIMIT' (INT|param) (',' (INT|param))?
    ;

groupby
    : 'GROUP BY' groupbylist    
    ;

orderby
    : 'ORDER BY' orderbylist
    ;

select_table_exp
    : table_exp (join_stmt)?    
    | '(' select_stmt ')' as
    ;

table_exp
    : identifier as?
    ;

fieldlist
    : 
      (
          function as
        | (identifier as?)
        | identifier_prefix? '*' // solve the problem of the `ID`.* problem
        | '(' select_stmt ')' as
      ) (',' fieldlist)?
    ;

function
    : 'COUNT(' (identifier|'*') ')' 
    | 'MAX(' identifier ')'
    | 'MIN(' identifier ')'
    | 'AVERAGE(' identifier ')'
    | 'CONCAT(' groupbylist ')'
    | 'CONCAT_WS(' CHAR ',' groupbylist ')' 
    ;

orderbylist
    : identifier ('ASC'|'DESC')? (',' orderbylist)? 
    ;

groupbylist
    : identifier (',' groupbylist)? 
    ;

as
    : 'AS' (ID | '`' ID '`')    
    ;

join_stmt
    : leftjoin (join_stmt)?
    | rightjoin (join_stmt)?
    | join (join_stmt)?
    ;

leftjoin
    : 'LEFT JOIN' (table_exp|('(' select_stmt ')' as)) on_stmt
    ;

rightjoin
    : 'RIGHT JOIN' (table_exp|('(' select_stmt ')' as)) on_stmt
    ;

join
    : 'JOIN' (table_exp|('(' select_stmt ')' as)) on_stmt
    ;

on_stmt
    : 'ON' where_stmt
    ;

where_stmt
    : where_exp ((BOOLEANAND|BOOLEANOR) where_stmt)?
    ;

where_exp
    : where_exp_identifier
    | value (WHEREOPERATORS|EQUALITYOPERATOR) identifier
    | '(' select_stmt ')' (WHEREOPERATORS|EQUALITYOPERATOR) identifier
    ;

where_exp_identifier
    : identifier (WHEREOPERATORS|EQUALITYOPERATOR) where_exp_identifier_operator_right
    | identifier 'BETWEEN' (numeric_value BOOLEANAND numeric_value)
    | identifier 'LIKE' string_value
    ;

where_exp_identifier_operator_right
    : value
    | identifier
    | '(' select_stmt ')'
    ;

setters
    : identifier EQUALITYOPERATOR value
    | value EQUALITYOPERATOR identifier
    | identifier EQUALITYOPERATOR '(' select_stmt ')'
    | '(' select_stmt ')' EQUALITYOPERATOR identifier
    ;

identifier_value
    : value
    | identifier
    ;

value
    : string_value
    | numeric_value
    | param
    ;

string_value
    : STRING
    | CHAR
    ;

numeric_value
    : INT
    | FLOAT
    ;

identifier_prefix
    : ID '.'
    | '`' ID '`.'   
    ;

identifier
    : identifier_prefix? ID 
    | identifier_prefix? '`' ID '`'
    ;

param
    : '@' ID
    ;

BOOLEANAND
    : 'AND'
    ;

BOOLEANOR
    : 'OR'
    ;

EQUALITYOPERATOR
    : '='
    ;

WHEREOPERATORS
    : ('!='|'<>'|'<'|'>'|'<='|'>=')
    ;

ID  :   ('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'0'..'9'|'_')*
    ;

INT :   '0'..'9'+
    ;

FLOAT
    :   ('0'..'9')+ '.' ('0'..'9')* EXPONENT?
    |   '.' ('0'..'9')+ EXPONENT?
    |   ('0'..'9')+ EXPONENT
    ;

COMMENT
    :   '//' ~('\n'|'\r')* '\r'? '\n' {$channel=HIDDEN;}
    |   '/*' ( options {greedy=false;} : . )* '*/' {$channel=HIDDEN;}
    ;

WS  :   ( ' '
        | '\t'
        | '\r'
        | '\n'
        ) {$channel=HIDDEN;}
    ;

STRING
    :  '"' ( ESC_SEQ | ~('\\'|'"') )* '"'
    ;

CHAR:  '\'' ( ESC_SEQ | ~('\''|'\\') ) '\''
    ;

fragment
EXPONENT : ('e'|'E') ('+'|'-')? ('0'..'9')+ ;

fragment
HEX_DIGIT : ('0'..'9'|'a'..'f'|'A'..'F') ;

fragment
ESC_SEQ
    :   '\\' ('b'|'t'|'n'|'f'|'r'|'\"'|'\''|'\\')
    |   UNICODE_ESC
    |   OCTAL_ESC
    ;

fragment
OCTAL_ESC
    :   '\\' ('0'..'3') ('0'..'7') ('0'..'7')
    |   '\\' ('0'..'7') ('0'..'7')
    |   '\\' ('0'..'7')
    ;

fragment
UNICODE_ESC
    :   '\\' 'u' HEX_DIGIT HEX_DIGIT HEX_DIGIT HEX_DIGIT
    ; 
```

我离 ANTLR 专家还很远，所以在摆弄我的语法 3 小时后，试图让语法在那个位置接受一个正确的字符串，我决定向你们寻求帮助。也许这里的一些antlr大师可以帮助我解决这个问题。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T19:53:25.193

您的输入`'hello'`没有被标记为字符串，因为您定义了一个用双引号括起来的字符串。A`char`在语法中被单引号包围：

```
STRING
    :  '"' ( ESC_SEQ | ~('\\'|'"') )* '"'
    ;

CHAR:  '\'' ( ESC_SEQ | ~('\''|'\\') ) '\''
    ; 
```

这就是错误的原因。

# c - 在 C 中解析标准输入会导致分段错误

> ID：11916695
> 
> 赞同：0
> 
> 时间：2012-08-11T18:43:24.297
> 
> 标签：c, stdin

调用从标准输入读取的任何内容时，我一直遇到分段错误。我不知道为什么。`getchar()`从某个函数中调用或任何其他类似函数会导致我的程序崩溃，但是当我从另一个函数调用它时，它工作正常。这是崩溃的部分：

```
int prompt()
{
  int i;
  int selection = -1;
  while (selection < 0 || selection > 9) {
    printf("Item:\n\n");
    for (i = 0 ; i < 10 ; i++) {
      printf("%d) %s\n", i, getItemName(i));
    }

    for (i = 0 ; i < 11 ; i++) {
      printf("\n");
    }

    printf("Select the number of the corresponding item: ");
    char input = getchar(); <--- dies here!
    if (input != EOF && input != '\n') flush();
    selection = atoi(input); <--- error here!
  } 

  return selection;
}

void flush() {
    char c = getchar();
    while (c != EOF && c != '\n')
        c = getchar();
} 
```

**更新**经过大量的实验，我发现问题出在我标记的代码上。（`atoi()`）。我是通过它一个简单的`char`，而不是一个`char*`。我仍然不明白为什么当我使用一堆时`printfs`，它会死在我指定的行，而不是在调用`atoi()`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T19:31:48.877

If you compile and run it with a debugger, you will find that the problem is actually in your `atoi` call.

```
char input = ...;
...
selection = atoi(input); 
```

`atoi` takes a `char *`, so you are telling it to convert the string at address `0x00000030` (for `'0'`) to a number, and that is an invalid address.

in gdb:

```
Select the number of the corresponding item: 0

Program received signal EXC_BAD_ACCESS, Could not access memory.
Reason: KERN_INVALID_ADDRESS at address: 0x0000000000000030
0x00007fff8ab00c53 in strtol_l ()
(gdb) bt
#0  0x00007fff8ab00c53 in strtol_l ()
#1  0x0000000100000dc5 in prompt () at test.c:45
#2  0x0000000100000cb9 in main () at test.c:21 
```

Compiling with warnings would also have told you this:

```
$ gcc -Wall -std=gnu99 test.c
test.c: In function ‘prompt’:
test.c:48: warning: passing argument 1 of ‘atoi’ makes pointer from integer without a cast 
```

# jquery - 具有相同标题的多个站点/url 集成在单击其他站点时不会重新加载

> ID：11916697
> 
> 赞同：0
> 
> 时间：2012-08-11T18:43:27.237
> 
> 标签：jquery, url, static, header, masking

我似乎无法解决这个问题，如果可以做到，我会非常高兴。我正在为朋友的电影公司建立一个网站，他要求在每个特定电影网站的顶部有一个标题，该标题可以链接到带有电影名称的其他电影网站。每个电影网站上的标题完全相同，位置准确。每个电影网站也驻留在不同的 URL 上，而不是同一 URL 中的子目录。

现在他还要求在单击其他站点时不要刷新标题。我想知道这是否可能，我完全愿意让所有网站都驻留在不同目录中的同一 URL 上。他还希望每个站点的 URL 都是可见的，因此不仅要为同一站点中的每个站点加载内容，而且浏览器中的 URL 也不会发生变化。

公司网址是 www.breakwaterstudios.com

第一部电影的网址是 www.dinnerwithfred.com

第二部电影的网址是 www.inkandpapermovie.com

（我还没有在网站上集成新的标题）。

但是，如果这样做的唯一方法是让 URL 成为

www.breakwaterstudios.com/dinnerwithfred

www.breakwaterstudios.com/inkandpapermovie

然后让各个 URL 重定向到那些很好的子目录。

我能想到在单击每个标题按钮时不重新加载页面的唯一方法是

1) 将所有电影站点的整体编码到每个单独的电影站点中，并让每个单独的电影站点首先加载其各自的站点元素（隐藏其他站点的元素）。然而，这将需要某种 javascript/Ajax URL 更改/重写代码或其他东西来掩盖这样一个事实，即每个电影站点实际上都被编码到同一个站点中，并且它只是使用 jquery .show 和 .hide 命令重新加载。将所有其他网站的内容加载到同一个 index.html 文件中可能需要很长时间。

2) 使用 jquery .load 或 iframes 甚至在单击标题按钮时动态加载标题下方的每个站点。但是，URL 需要像数字 1 一样重写。

3）由于标题 div 将在所有站点上处于相同位置，并且如果使其工作的唯一方法是重新加载到页面，当另一个电影站点在单独或相同的 URL 上加载时，标题不会闪烁. 让标题看起来没有重新加载，而实际上它是在单独的网站上加载的。当点击另一个站点时，标题会消失并重新出现在几分之一秒的时间里。

看起来困难的部分是整个 URL 更改。

我想我得到的是在每个站点上保留标题而不在访问每个站点时重新加载标题的可能性。我看到 Facebook 可以做到这一点，但它都在 facebook.com 的同一个 URL 中。我进行了研究，发现由于潜在的安全风险/屏蔽/欺诈/等，跨多个 URL 可能是不可能的。

jquery .load 函数和 iframe 可以工作，但是 URL 需要更改，如果整个 URL 不能从 Dinnerwithfred.com 更改为 inkandpapermovie.com，那么至少在浏览器窗口中更改子目录.

任何帮助将不胜感激！！！谢谢！！！

*   狄龙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T19:09:54.587

在现代浏览器上，您可以使用 HTML5 历史 API：

*   [http://diveintohtml5.info/history.html](http://diveintohtml5.info/history.html)
*   [HTML5 历史 API](https://stackoverflow.com/questions/5368605/html5-history-api)

我认为旧浏览器也有一些技巧。但正如你所说，我认为它只适用于同一个域。因此，您将在这里遇到子目录 url。至于加载页面本身，我认为 iFrames 确实是您最好的选择。

您也可以使用[http://simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)获取页面，例如，如果您真的想将页面集成到您的页面中。尽管正确提取内容可能并不容易。这也可能存在法律问题（因为您不拥有其他网站，是吗？）

# c++ - 带有前缀填充的 C++ 输出

> ID：11916698
> 
> 赞同：0
> 
> 时间：2012-08-11T18:43:30.450
> 
> 标签：c++, cout

如何在 C++ 中打印带有填充的字符串？具体我想要的是：

```
cout << "something in one line (no prefix padding)"
cout << "something in another line (no prefix padding)"
set_padding(4)
    cout << "something with padding"
    cout << "something with padding"
set_padding(8)
        cout << "something with padding"
        cout << "something with padding" 
```

也就是说，我会多次调用 cout 而我不想一直调用`setw(len) << ""`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T19:14:47.727

我想你可以让预处理器为你输入：

```
#include <iostream>
#define mout std::cout << std::string(width,' ')
#define mndl "\n" << std::string(width,' ')

int width=0;

int main()
{
    mout << "Hello" << std::endl; 

    width = 8;

    mout << "World." << mndl << "Next line--still indented";
    // more indented lines...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-11T19:53:54.203

怎么样：

```
class IndentedOutput
{
public:
    IndentedOutput()
    {
        m_indent = 0;
    }

    void setIndent(unsigned int indent)
    {
        m_indent = indent;
    }

    template <typename T>
    std::ostream& operator<< (const T& val)
    {
        return (std::cout << std::string(m_indent,' ') << val);
    }

private:
    unsigned int m_indent;
}; 
```

你可以像这样使用它：

```
IndentedOutput ind;

int i =0;
ind << "number is " << i++ << '\n';
ind << "number is " << i++ << '\n';
ind.setIndent(4);
ind << "number is " << i++ << '\n';
ind << "number is " << i++ << '\n';
ind.setIndent(6);
ind << "number is " << i++ << '\n';
ind << "number is " << i++ << '\n';
ind.setIndent(0);
ind << "number is " << i++ << '\n'; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-11T18:54:13.843

[http://www.cplusplus.com/reference/iostream/manipulators/](http://www.cplusplus.com/reference/iostream/manipulators/)

编辑：对不起，我有点人手不足。我的意思是研究 iomanip 的工作原理，我知道你知道 sets(n) << ""

使用 iomanip 作为快速而肮脏的实现的基线，这就是我想出的：

```
#include <iostream>
#include <iomanip>
#include <string>

class setpw_ {
  int n_;
  std::string s_;
public:
  explicit setpw_(int n) : n_(n), s_("") {}
  setpw_(int n, const std::string& s) : n_(n), s_(s) {}

  template<typename classT, typename traitsT>
  friend std::basic_ostream<classT, traitsT>&
  operator<<(std::basic_ostream<classT, traitsT>& os_, const setpw_& x) {
    os_.width(x.n_);
    os_ << "";
    if ( x.s_.length()){
      os_ << x.s_;
    }
    return os_;
  }
};

setpw_ setpw(int n) { return setpw_(n); }
setpw_ indent(int n, const std::string& s) { return setpw_(n, s); }

int
main(int argc, char** argv) {
  std::cout << setpw(8) << "Hello, World" << std::endl;
  std::cout << indent(8,   "----^BYE^---") << std::endl;
  return 0;
} 
```

# python - 为客户端打包和分发 python (for windows) 应用程序

> ID：11916700
> 
> 赞同：0
> 
> 时间：2012-08-11T18:43:53.257
> 
> 标签：python

假设我已经为 Windows 用户开发了一个使用 python 的桌面应用程序。我想分发这个应用程序。

那么打包和分发的标准流程是什么？我希望安装其他 .msi 或 .exe 安装程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T18:49:48.920

[PyInstaller](http://www.pyinstaller.org/)

> PyInstaller 是一个在 Windows、Linux、Mac OS X、Solaris 和 AIX 下将 Python 程序转换（打包）为独立可执行文件的程序。与类似工具相比，它的主要优点是 PyInstaller 可以与自 2.3 以来的任何 Python 版本一起使用，由于透明压缩，它可以构建更小的可执行文件，它是完全多平台的，并使用操作系统支持来加载动态库，从而确保完全兼容。

[cx-冻结](http://cx-freeze.sourceforge.net/)

> cx_Freeze 是一组脚本和模块，用于将 Python 脚本冻结为可执行文件，其方式与 py2exe 和 py2app 非常相似。与这两个工具不同，cx_Freeze 是跨平台的，应该可以在 Python 本身可以运行的任何平台上运行。它支持 Python 2.3 或更高版本（包括 Python 3），因为它利用了 2.3 中引入的 zip 导入工具。

一旦将其打包到一个独立的环境中，无论是单个 exe 还是目录结构，如果您需要特殊的安装过程，您可以使用任何标准的 Windows Installer 应用程序。或者您可以简单地将其作为 .exe 分发，准备运行。

# xcode - 由于媒体播放按钮，无法在 Xcode 中正确调试

> ID：11916703
> 
> 赞同：1
> 
> 时间：2012-08-11T18:44:18.907
> 
> 标签：xcode, macos

我已经使用 Xcode 几个月了，但我无法通过快捷方式 (F7 - F12) 调试我的应用程序，因为媒体播放功能（播放、暂停等）覆盖了 Xcode 的用途。例如，如果我正在调试并按下 F8（退出），Spotify 将播放或暂停，而不是 Xcode 退出。如何禁用此功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T14:06:05.930

查看更多文档后，可以通过选中“将所有 F 键用作标准功能键”在键盘部分下的系统偏好设置中禁用它

# javascript - 是否可以使用 Phone SMS API 从 phonegap HTML/Javascript 应用程序发送 SMS？

> ID：11916704
> 
> 赞同：8
> 
> 时间：2012-08-11T18:44:27.947
> 
> 标签：javascript, cordova, phonegap-plugins

我一直在尝试使用 Phonegap 并在 HTML/Javascript 中创建了一个小应用程序来发送短信。我尝试了这段代码`window.location.href = 'sms:XXXXXXXX06?body=Testing'`，它打开了一个屏幕来手动发送我想要自动化的短信。

请注意，我通过将项目源代码上传到[build.phonegap.com](http://build.phonegap.com)创建了一个 android 应用程序，因此我无法修改`.apk`源代码。

是否可以仅在 Javascript 中执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T15:59:45.470

请参阅[Phonegap SMS 插件](https://github.com/phonegap/phonegap-plugins/tree/master/Android/SMSPlugin)以发送 SMS 消息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-08T06:52:13.333

这是[phonegap-sms-plugin](https://github.com/javatechig/phonegap-sms-plugin)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-04T11:23:06.573

尝试做这样的事情：

```
<a href="smsto:000000000"> sms number</a> 
```

它适用于我的 Android 设备。

# eclipse - SLF4J：无法加载类“org.slf4j.impl.StaticLoggerBinder”。错误

> ID：11916706
> 
> 赞同：121
> 
> 时间：2012-08-11T18:44:40.870
> 
> 标签：eclipse, maven, m2eclipse, slf4j, logback

*   关于*Eclipse IDE*（**Indigo**、**Juno**和**Kepler**（32 位和 64 位版本））
*   *平台*：**Windows**、**Ubuntu**、**Mac**
*   ***m2e***版本*：**1.1.0.20120530-0009、1.2.0.20120903-1050、1.3.0.20130129-0926、1.4.0.20130601-0317** _ _ **_** _ **_***

 ******** * *

## **基本信息**

将 m2e 更新到 1.1 版后出现上述错误。***通过删除 m2e 1.1 并回滚到 m2e 1.0 一切正常。***我试图在 Windows 和 Ubuntu 中重复这个问题，它给了我完全相同的错误。对 slf4j-api 和 logback 的许多配置进行了测试，但似乎没有一个有效。

**即使没有声明 slf4j 依赖项**，该错误也会出现在任何 maven 项目中。

*   新建 Maven 项目--> maven-archetype-quickstart

    **和**

*   新建 Maven 项目--> 没有原型选择的简单项目

    结果到

```
SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder". 
```

* * *

## **测试环境和配置**

在 Mac 上使用 Eclipse Indigo 和 Eclipse Juno（32 位和 64 位）进行测试，在 Ubuntu 上使用 32 位，在 Windows 上使用 64 和 32 位进行测试。**测试了Juno Classic**、**Juno Modeling tools**、**Kepler Standard**、**Kepler Modeling Tools**的全新安装并产生了相同的错误。

错误出现在**clean**、**install**、**test**、**deploy**、**generate-sources**、**validate**、**compile**、**package**、**integration-test**、**verify**以及目标 clean 与其余目标的组合中。它也与参数**-e**和**-X**一起出现。曾尝试删除 m2e 存储库并从头开始下载，但再次失败。我应该提到它在 3 台不同的机器和所有上述系统的虚拟机中进行了测试，但它产生了相同的错误。

**尝试了解决slf4j-api**和**logback-core**依赖项的所有不同**logback**配置（从 1.0.4 到 1.0.13），但都产生相同的错误：

 ****```
<dependency>
   <groupId>ch.qos.logback</groupId>
   <artifactId>logback-classic</artifactId>
   <version></version>
</dependency> 
```

尝试了所有不同的（从 1.6.1 到 1.7.5 ）**slf4j-simple**配置。

```
<dependency>
   <groupId>org.slf4j</groupId>
   <artifactId>slf4j-simple</artifactId>
   <version></version>
   <scope>compile</scope>
</dependency> 
```

尝试了所有不同的（从 1.6.1 到 1.7.5 ）**log4j-over-slf4j**配置。

```
<dependency>
   <groupId>org.slf4j</groupId>
   <artifactId>log4j-over-slf4j</artifactId>
   <version></version>
   <scope>compile</scope>
</dependency> 
```

尝试了所有不同的（从 1.6.1 到 1.7.5 ）**slf4j-jdk14**配置。

```
<dependency>
   <groupId>org.slf4j</groupId>
   <artifactId>slf4j-jdk14</artifactId>
   <version></version>
   <scope>compile</scope>
</dependency> 
```

尝试了所有不同的（从 1.6.1 到 1.7.5 ）**slf4j-log4j12**配置。

```
<dependency>
     <groupId>org.slf4j</groupId>
     <artifactId>slf4j-log4j12</artifactId>
     <version></version>
     <scope>compile</scope>
</dependency> 
```

尝试了**slf4j-nop 1.7.5**配置。

```
<dependency>
  <groupId>org.slf4j</groupId>
  <artifactId>slf4j-nop</artifactId>
  <version>1.7.5</version>
  <scope>compile</scope>
</dependency> 
```

***最后但并非最不重要的一点是，尽管出现错误，但仍会保存和打印日志。***

* * *

## **重现错误的方法**

*   下载 Eclipse Juno、Indigo 或 Kepler 32 或 64 位（所有安装都会导致相同的错误）。

    *   安装 m2e - Eclipse 的 Maven 集成

        *   朱诺 - [http://download.eclipse.org/releases/juno](http://download.eclipse.org/releases/juno)
        *   开普勒 - [http://download.eclipse.org/releases/kepler](http://download.eclipse.org/releases/kepler)
        *   Indigo - [http://download.eclipse.org/technology/m2e/releases/](http://download.eclipse.org/technology/m2e/releases/)（***目前不可用***）

        **或者**

    *   将您的 m2e 版本更新为**1.1.0.20120530-0009**或**1.2.0.20120903-1050**或**1.3.0.20130129-0926**或**1.4.0.20130601-0317**）

        * * *

    *   选择File->New->Other->Maven Project->点击Next->
        从目录中选择maven-archetype-quickstart->Finish

        **或者**

    *   选择File->New->Other->Maven Project->点击Next->选择Create a simple project (skip archetype selection)-> Complete Artifact info->Finish

*   右键单击项目->运行方式->全新安装（或上面提到的任何其他目标）

控制台上的第一行将是

```
SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".
SLF4J: Defaulting to no-operation (NOP) logger implementation
SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details. 
```

***PS现有项目将m2e版本更新为1.1.0.20120530-0009、1.2.0.20120903-1050、1.3.0.20130129-0926、1.4.0.20130601-0317*****后**会**产生**同样的**错误**

 ***** * *

## **更新**

**编辑**

**m2e 支持网站：**

*   上述问题作为一个错误发布在 m2e 支持网站上，而 Igor Fedorenko 的回答是

    > 没有立即计划压制此消息。

    查看以上bug请参考[m2e官方支持网站](https://bugs.eclipse.org/bugs/show_bug.cgi?id=387064)

* * *

**编辑 2**

*   **m2e**版本***1.2.0.20120903-1050***也**存在**上述错误指示

 **** * *

**编辑 3**

*   上述错误指示也**存在**于**m2e**版本***1.3.0.20130129-0926***

* * *

**编辑 4**

*   上述错误指示也**存在**于**m2e**版本***1.4.0.20130601-0317***

* * *

**编辑 5**

```
 ***Reported FIXED*** 
```

*   对于**m2e**版本***1.5.0/Luna M3*** ( *Target Milestone* )，上述错误报告为已修复。该版本尚未可供下载。
*   ***Luna M3***定[于 11 月 15 日](http://wiki.eclipse.org/Luna/Simultaneous_Release_Plan#Schedule)。
*   最新的开发版本可[在此处获得](http://nexus.tesla.io:8081/nexus/content/sites/m2e.extras/m2e/1.5.0/N/LATEST/)
*   您可以在[m2e 主存储库](http://git.eclipse.org/c/m2e/m2e-core.git/)中找到有关 m2e 里程碑的更多信息。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-09-11T15:41:02.563

我也可以确认这个错误。

**解决方法：**是在 m2eclipse 中使用**外部 maven**，而不是嵌入式 maven。

这分**三个步骤完成：**

1 **在本地机器上安装 maven**（测试机器是 Ubuntu 10.10）

> mvn --版本
> 
> Apache Maven 2.2.1 (rdebian-4) Java 版本：1.6.0_20 Java 主页：/usr/lib/jvm/java-6-openjdk/jre 默认语言环境：de_DE，平台编码：UTF-8 操作系统名称：“linux”版本：“2.6.35-32-generic”拱：“amd64”家庭：“unix”

2 从外部运行maven [链接如何从控制台运行maven](http://maven.apache.org/guides/getting-started/maven-in-five-minutes.html)

> ```
> > cd path-to-pom.xml
> > mvn test 
> ```

```
 [INFO] Scanning for projects...
    [INFO] ------------------------------------------------------------------------
    [INFO] Building Simple
    [INFO]    task-segment: [test]
    [INFO] ------------------------------------------------------------------------
    [...]
    [INFO] Surefire report directory: [...]/workspace/Simple/target/surefire-reports

    -------------------------------------------------------
     T E S T S
    -------------------------------------------------------
    Running net.tverrbjelke.experiment.MainAppTest
    Hello World
    Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.042 sec

    Results :

    Tests run: 1, Failures: 0, Errors: 0, Skipped: 0

    [INFO] ------------------------------------------------------------------------
    [INFO] BUILD SUCCESSFUL
    [INFO] ------------------------------------------------------------------------
    [...] 
```

3 m2eclipse内部：**从[嵌入式maven](http://wiki.eclipse.org/M2E_FAQ#Why_is_it_working_from_the_command_line_but_not_in_m2eclipse)切换到本地maven**

*   找出本地 maven 家庭安装目录在哪里（`mvn --version`或者你的谷歌`MAVEN_HOME`，对我来说[这对我](http://flurdy.com/docs/intellij/)有帮助`/usr/share/maven2`）
*   在eclipse菜单->窗口->首选项->Maven->安装->输入该字符串。然后你应该切换到你的新外部 Maven。
*   然后运行您的项目，例如“maven 测试”。

错误消息应该消失了。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2014-05-23T10:06:03.557

SLf4J 站点中有一个文档可以解决此问题。我遵循了这一点，并将 slf4j-simple-1.6.1.jar 以及我已经拥有的 slf4j-api-1.6.1.jar 添加到我的应用程序中。这解决了我的问题

[slf4j](http://www.slf4j.org/codes.html#StaticLoggerBinder)

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2016-12-23T04:56:51.480

如果您使用 Gradle，请添加以下内容：

```
dependencies { 
... 
compile "org.slf4j:slf4j-simple:1.7.9" 
... 
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-10-29T15:11:11.297

与 Gradle 有相同结果的类似错误，并且能够通过以下方式解决它：

```
//compile 'org.slf4j:slf4j-api:1.7.1'
compile group: 'org.apache.logging.log4j', name: 'log4j-api', version: '2.1'
compile group: 'org.apache.logging.log4j', name: 'log4j-core', version: '2.1'
compile group: 'org.apache.logging.log4j', name: 'log4j-slf4j-impl', version: '2.1' 
```

注释外的行是导致错误输出的行。我相信您可以将其转移到 Maven。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-09-27T10:00:51.883

将此代码粘贴到您的 pom.xml 文件中。这个对我有用。

```
<dependency>
    <groupId>org.slf4j</groupId>
    <artifactId>slf4j-simple</artifactId>
    <version>1.6.1</version>
    <scope>test</scope>
</dependency> 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-08-14T11:07:09.037

您没有在 maven 依赖文件中指定版本可能就是为什么它没有选择最新的 jar
以及您需要另一个与`slf4j-log4j12`工件 id 的依赖关系。
将此包含在您的 pom 文件中

```
<dependency>
    <groupId>org.slf4j</groupId>
    <artifactId>slf4j-log4j12</artifactId>
    <version>1.5.6</version>
</dependency> 
```

如果错误仍未解决
，请告诉我我也建议您查看[此链接](http://www.slf4j.org/codes.html)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-07-30T05:33:43.080

一直在寻找问题已经浮出水面。相信对于遇到同样问题的其他人来说，这将是一本好书：

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=387064](https://bugs.eclipse.org/bugs/show_bug.cgi?id=387064)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-12-16T05:39:15.380

我在使用 java 编写 Kafka 生产者程序时遇到了同样的问题。此错误是由于错误的 slf4j 库引起的。使用下面的 slf4j-simple maven 依赖项来解决您的问题。

```
<dependency>
    <groupId>org.slf4j</groupId>
    <artifactId>slf4j-simple</artifactId>
    <version>1.6.1</version>
    <scope>test</scope>
</dependency> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-12-03T08:29:00.393

我有同样的问题。我用这种方法解决了。将此依赖项添加到 maven "pom.xml" 并重新加载 maven。而不是尝试运行您的代码。
` org.slf4j slf4j-nop 2.0.0-alpha5 测试

```
 <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
        <version>2.0.0-alpha5</version>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-simple</artifactId>
        <version>2.0.0-alpha5</version>
    </dependency>` 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-08-05T10:44:08.190

我的 Spring Boot - Gradle 应用程序在 Eclipse Luna 上运行时遇到了类似的问题。我可以通过在项目的 .classpath 中手动添加一个条目来解决它

```
<classpathentry sourcepath="C:/Users/<username>/.gradle/caches/modules-2/files-2.1/org.slf4j/slf4j-simple/1.7.7/3150039466ad03e6ef1c7ec1c2cbb0d96710cf64/slf4j-simple-1.7.7-sources.jar" kind="lib" path="C:/Users/<username>/.gradle/caches/modules-2/files-2.1/org.slf4j/slf4j-simple/1.7.7/8095d0b9f7e0a9cd79a663c740e0f8fb31d0e2c8/slf4j-simple-1.7.7.jar"/> 
```

想法是遵循[这个](http://www.slf4j.org/codes.html#StaticLoggerBinder)解决方案。但如何实施取决于具体情况。一种修复方法是我上面使用的方法。

希望这可以帮助。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-12-03T08:32:04.367

```
 <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-nop</artifactId>
        <version>2.0.0-alpha5</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
        <version>2.0.0-alpha5</version>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-simple</artifactId>
        <version>2.0.0-alpha5</version>
    </dependency> 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2018-05-16T19:53:29.847

这不是错误消息，而是警告。在他们的网站上非常清楚地解释为：

当在类路径上找不到 SLF4J 提供程序时，会报告此警告（即不是错误）消息。将 slf4j-nop.jar slf4j-simple.jar、slf4j-log4j12.jar、slf4j-jdk14.jar 或 logback-classic.jar 中的一个（也是唯一一个）放在类路径上应该可以解决问题。请注意，这些提供程序必须针对 slf4j-api 1.8 或更高版本。

在没有提供者的情况下，SLF4J 将默认为无操作 (NOP) 记录器提供者。

[https://www.slf4j.org/codes.html#StaticLoggerBinder](https://www.slf4j.org/codes.html#StaticLoggerBinder)******************

# c++ - 如何使用 epoll_event data.ptr

> ID：11916707
> 
> 赞同：4
> 
> 时间：2012-08-11T18:44:47.327
> 
> 标签：c++, epoll

我越来越难以在 epoll_event 中使用 void *ptr。我可以将其链接到结构吗？例如，我可以做这样的事情吗？因为我正在尝试做这样的事情但它不起作用，所以侦听套接字上的第一个循环很好，但是在另一个事件发生后它崩溃了。有人可以帮助我了解如何使用 data.ptr 吗？

```
struct client { 
int fd; 
int connection_status;
};

struct epoll_event *events = NULL;
struct epoll_event ev;
struct client *c = new client;
struct client *event_c = NULL;

c.fd = (socket);

int efd = epoll_create1(0);
ev.data.fd = c.fd;
ev.events = EPOLLIN;
ev.data.ptr = c;
epoll_ctl ( efd , EPOLL_CTL_ADD , c.fd , &ev );

events = (struct epoll_event*)calloc ( XXX , sizeof event );

while(1) {
    int n = epoll_wait ( efd , events , XXX , -1 ); 
    for ( int i = 0 ; i  < n ; i++ ) {
        event_c = (struct client*) events[i].data.ptr;
        cout << "SOCKET: " << event_c->fd << endl;

        if (c->fd == events[i].data.fd ) {
            struct client *new_c = new client;
            struct epoll_event new_ev;
            struct sockaddr inaddr;
            sockletn_t in_len;
            int nfd = accept ( c->fd , &inaddr , &in_len );
            /* make socket non-blocking ... / error checking */
            new_c->fd = nfd;
            new_c->connection_status = 1;
            new_ev.data.fd = nfd;
            new_ev.events = EPOLLIN;
            new_ev.data.ptr = client;
            int r = epoll_ctl ( efd , EPOLL_CTL_ADD , nfd , &new_ev );
            continue;
         } else {
            ssize_t count;
            char buf[512];
            int count = read ( events[i].data.fd , buf , sizeof buf );
            // ... error checking blah blah blah

            int rc = write ( 1 , buf , count );
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-23T21:01:09.840

`void *ptr`和两者`int fd`都在`struct epoll_event`. 您应该使用它们中的任何一个，而不是同时使用两者。因此，在您的结构中，也添加字段，`fd`并且仅将指针链接`ptr`到`epoll_event`. 这样，当您取回指针时，然后从中获取以`fd`供进一步使用。

# java - JVM 内部分析器？

> ID：11916710
> 
> 赞同：2
> 
> 时间：2012-08-11T18:44:52.050
> 
> 标签：java, open-source, jvm, profiling

我整个早上都在阅读[AppDynamics](http://www.appdynamics.com/) Lite 并且非常喜欢它！能够将 JAR 放入您的 Web 应用程序 (WAR)、部署它并让它自动在您的应用程序上运行性能测试，这真是太好了。

我想知道是否存在类似的完整分析？类似于 VisualVM，但部署为 JAR 并且可以打包在 WAR 中？

在线搜索并没有出现太多，但话说回来，我可能没有在寻找正确的东西。我称其为“JVM 内分析器”，因为它分析了在其内部运行的同一个 Java 进程（如 AppDynamics）。

我喜欢开源，但这不是强制性的要求。提前感谢您的任何指示/建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T20:56:01.993

您可以查看 Spring Insight。

[Spring-insight 来源、设计和替代方案](https://stackoverflow.com/questions/11817807/spring-insight-source-design-and-alternatives)

[http://www.springsource.org/insight](http://www.springsource.org/insight)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T08:08:08.027

[Java Melody](https://code.google.com/p/javamelody/)可能与您相关。

# ruby - 如何使用视图和创建日期以及喜欢计数对对象进行排名？

> ID：11916711
> 
> 赞同：2
> 
> 时间：2012-08-11T18:44:51.993
> 
> 标签：ruby, ruby-on-rails-3, ranking

假设您有一个类型为 Item 的对象，它具有 name、view_count、like_count 和 created_at 时间属性，我想创建这些对象的提要，以便我仍然可以获得最新的对象，但也可以根据视图计数和喜欢计数。

使用按创建时间和排名 = view_count + like_count 排序

```
a.sort_by{|x| [x.rank, -x.created_at]} 
```

将导致按等级排序，然后按 created_at 排序，这将仅用于对象的关系，所以我希望有人能帮助我找出这样做的方法。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T19:19:10.427

首先：如果您有很多对象/记录，您可能希望在数据库中进行排序，以便您可以正确地将它们过滤掉。在大多数情况下，这将有几个优点：

1）您可以限制排序*后*获取的项目数量（这意味着您不必将尽可能多的项目加载到内存中）

2）如果您正确使用索引，它会非常快

按多行排序是直截了当的，并在此问题的答案中进行了解释：[Ruby on Rails：如何使用 ActiveRecord 对两列进行排序？](https://stackoverflow.com/q/3587776/624590)

就实际排序而言，如果您想在内存中对数组进行排序，您提供的代码应该可以工作：

```
a.sort_by{|x| [x.rank, -x.created_at]} 
```

你能解释一下问题是什么吗？这似乎是按排名排序，然后按您指定的时间排序。您希望通过其他方式在哪里排序（例如由排名组成的一些分数以及该项目的新近程度）？

**编辑：**

好的，所以通过您的评论，您希望获得一个将排名与该项目的新近程度相结合的分数。由于几个原因，这将是一个棘手的主题。首先，你如何对结果进行建模/评分将取决于你，并且你必须相应地调整它（所以它可能是`Time.now - item.created_at`乘以排名的一部分，或者其他什么。它基本上是你的东西'将不得不玩）。

再想一想，最好只使用 unix 样式的时间戳，而不是`Time.now - item.created_at`，因为除非有人严重破坏了您的安全性，否则数字越高，它就会越新。（尽管存在时代问题）。另外，这可能会使以后的其他事情变得更容易。

例如，也许它会是这样的：

`rank*(item.created_at - 1300000000)/60000000`，对于当前时间将导致`0.7453 * rank`，并且对于从现在开始的一天制造的项目将导致：（`0.7467 * rank`所以有点高）。也许您的解决方案会更复杂。找出适合您情况的方程式真的取决于您。

另一个问题是它可能会使您的 SQL 查询和索引更加复杂（尽管您可以基于包含数学（即您的评分系统）的多个列来索引表；这是一个示例：[http://use-the-index -luke.com/sql/where-clause/obfuscation/math](http://use-the-index-luke.com/sql/where-clause/obfuscation/math)；这对你来说可能看起来有点棘手，因为它的最新程度会不断变化，所以它可能只是时间戳本身的一个函数（随着时间的推移而增加，因此最近的项目本质上将具有更高的值））。

基本上，您的第一步将是弄清楚哪种数学模型最适合您的需求。实验一下。之后，您只需要在 Rails 中高效地实现一些东西（正确的数据库查询、索引等）

# c++ - 在 C++ 中创建一个对象数组并使用重载 []

> ID：11916717
> 
> 赞同：0
> 
> 时间：2012-08-11T18:45:41.057
> 
> 标签：c++, arrays, object, operator-keyword

我创建了这个类，比如说，`Apple`它有一个重载的`operator []`.
然后在另一堂课上，我做了一串苹果，`Apple stack[10]`。
然后，当我`stack[2]`在表达式中使用而不是`stack[2]`对象时，编译器的行为就像将堆栈视为`stack[0]`，然后将`operator []`其及其参数称为`2`。

你能建议一种我可以打电话`stack[2]`而不是那样的方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T19:36:59.090

您可以使用指针来获取数组元素：

```
*(stack+2)[3]; // lookup element 2 and call its [] operator with 3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T19:48:43.097

根据迄今为止给出的信息，`stack[2]`指的是一个`Apple`对象。您也可以`stack[2][5]`调用类中的重载对象。`operator[]``Apple`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T20:33:53.707

提供代码会很有帮助。

但是，假设您`x`在 Apple 类中有一个变量。您可以使用`(stack+2)->x`. 这将与`stack[2].x`. 如果你想使用你的重载运算符，你可以类似地使用它。这不会混淆编译器。

# c - Berkeley 套接字：connect() 返回 -1 且 errno 设置为 ENOENT

> ID：11916719
> 
> 赞同：0
> 
> 时间：2012-08-11T18:46:04.927
> 
> 标签：c, sockets, berkeley-sockets

我有这个代码：

```
bool CBSocketConnect(uint64_t socketID,uint8_t * IP,bool IPv6,uint16_t port){
    // Create sockaddr_in6 information for a IPv6 address
    int res;
    if (IPv6) {
        struct sockaddr_in6 address;
        memset(&address, 0, sizeof(address)); // Clear structure.
        address.sin6_family = AF_INET6;
        memcpy(&address.sin6_addr, IP, 16); // Move IP address into place.
        address.sin6_port = htons(port); // Port number to network order
        res = connect((evutil_socket_t)socketID, (struct sockaddr *)&address, sizeof(address));
    }else{
        struct sockaddr_in address;
        memset(&address, 0, sizeof(address)); // Clear structure.
        address.sin_family = AF_INET;
        memcpy(&address.sin_addr, IP + 12, 4); // Move IP address into place. Last 4 bytes for IPv4.
        address.sin_port = htons(port); // Port number to network order
        res = connect((evutil_socket_t)socketID, (struct sockaddr *)&address, sizeof(address));
    }
    if (NOT res || errno == EINPROGRESS)
        return true;
    return false;
} 
```

IPv6 设置为 false，IP 设置为 ::ffff:127.0.0.1（IPv4 环回地址），端口号设置为 45562，res 设置为 -1，errno 设置为 ENOENT (2)。为什么会这样？

我所在的平台是 OSX Mountain Lion。我正在使用带有 libevent 版本“2.0.19-stable”的套接字。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T13:32:52.447

我发现了问题：LLDB

LLDB 告诉我 errno 是 ENOENT，但是当我使用 GDB（我显然应该这样做）时，它告诉我 errno 是 EINPROGRESS！一直没问题。这都是调试器的错。

教训：使用 GDB 而永远不要使用 LLDB。

# sql-server - 使用执行包任务时获取连接和奇怪行为

> ID：11916722
> 
> 赞同：9
> 
> 时间：2012-08-11T18:46:56.093
> 
> 标签：sql-server, ado.net, ssis, oledb

我有一个主包，其中我正在使用执行包任务调用几个包。

子包和主包都没有任何配置，并且在连接管理器中使用硬编码的 SQL 身份验证连接来连接 OLEDB (SQL Server)。

包也有加密敏感密码。

看到的奇怪行为：1.子包从 BIDS 运行时成功运行，但从主包运行时失败，获取连接失败

“对连接管理器的 AcquireConnection 方法调用失败，错误代码为 0xC0202009”

有人可以帮助解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T04:30:24.233

似乎您的子包没有从父包中获取连接字符串。您需要将连接字符串从父包传递给子包。

检查这篇[文章](http://technet.microsoft.com/en-us/library/ms345179.aspx)

更新 ：-

当您将[EncryptSensitiveWithPassword](http://msdn.microsoft.com/en-us/library/ms141747.aspx)作为子包和父包的访问控制时，然后在从父包执行子 pkg 时

在执行过程中，系统会提示您输入子包的密码。

可能存在即使在运行时输入密码后子 pkg 执行由于获取连接错误而失败的情况。这可能会发生（我不确定）由于子连接字符串（在执行包任务中）可能仍然指向修改后未重建的旧子包。

我的建议是当您将 a`Execute SQL Task`拖到控制流上时，使用文件 System Location 并指向放置在 bin 文件夹（或您的部署路径）中的更新的子包并在任务中输入子包的密码

![在此处输入图像描述](../Images/7f6296d640e2816b7a2ef8754fcc3dc7.png)

为了从集成服务 (MSDB) 运行父包，您需要了解在运行时执行时如何传递子解密密钥。

编辑： 第 1 步：为父 SSIS 包创建包配置。`Execute Package Task`有一个属性`PackagePassword`。您需要在创建配置文件时选择此属性

```
 Executables->ExecutePackageTask->PackagePassword 
```

![在此处输入图像描述](../Images/646c06766cd9e2311dc6ba7e3517e40b.png)

第 2 步：创建 XML 文件后打开它并搜索 ConfiguredType=property 并在配置的值中输入您的子包的密码

![在此处输入图像描述](../Images/5cf55bd28540681a7f0fab331e702fdd.png)

第三步：在MSDB中导入父包后，在配置选项卡中选择配置文件 ![在此处输入图像描述](../Images/e96eac20ce6c94d03525f67571c18a41.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T13:55:23.887

64/32 位错误？您是否有 excel 连接管理器作为来源？

Dtexec 具有 64 位和 32 位应用程序。我假设当您从 BIDS 运行时，它使用 32 位 dtexec，您如何运行主服务器？如果您双击它，这可能是问题所在，因为 DTExecUI（执行包实用程序）仅可作为 32 位应用程序使用。如果您在 64 位服务器上工作并通过 DTExecUI 运行包，则该包将以 32 位仿真模式运行。此外，如果使用的连接管理器不兼容 32 位，则包可能会失败。

请务必注意，如果您在 32 位环境中开发包并希望在 64 位环境中运行该包，则连接管理器需要兼容 64 位。某些连接管理器（例如 Excel）只能在 32 位环境中工作。

编辑：尝试在这里设置密码： ![在此处输入图像描述](../Images/82a6f01e676228a03a623e860b70d72c.png)

# javascript - 如何在键盘显示时禁用 UIWebView 的自动滚动

> ID：11916724
> 
> 赞同：4
> 
> 时间：2012-08-11T18:47:07.937
> 
> 标签：javascript, ipad, ios5, cordova, keyboard

我有一个使用 PhoneGap（HTML5、JavaScript，不是本机）的应用程序。每当我单击应用程序中的 TextArea 时，就会弹出一个恶性错误，该错误会在屏幕上移动我的一些元素（具体来说，它会破坏位置：固定的东西）。

为了解决这些问题，我希望能够禁用在键盘弹出时滚动 UIWebView 的功能，但我不确定如何执行此操作。

不确定这是否清楚，但是当键盘显示时如何禁用 UIWebView 的滚动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T19:33:48.027

我认为这是 UIWebView 中的一个错误（或者说缺少功能？）。我通过保存`textView.scrollView.contentOffset`on`-keyboardWillShow:`并将其设置`contentOffset`为保存的值来解决它`-keyboardDidHide:`

不好，因为您仍然可以看到它短暂地滚动，但比完全失去焦点更不令人不安。

另一种方法是将带有长文本的部分实现为不会发生这种不良行为的本机 UITextView。

**编辑：** 另一种解决方法是不使用`contenteditable`. 如果您可以设法设计一个通常的文本输入字段，那么滚动将缩放到当前选定的文本字段（这也是为什么 contenteditable 行为如此奇怪，因为它找不到任何可以放大的内容）。此外，`*!§*$`上一个-下一个键盘输入栏再次变得有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-07T22:39:29.387

这对我有用：

```
body {
    position: fixed;
    top:0;
    overflow:hidden;
} 
```

我正在使用 iScroll，我不知道它在原生滚动中的表现如何。

# html - css 轮廓总是在 chrome 的第一行

> ID：11916725
> 
> 赞同：6
> 
> 时间：2012-08-11T18:47:12.447
> 
> 标签：html, css, google-chrome, webkit

在谷歌浏览器上，当你在表格行上有大纲时，你只能在第一行得到它

所以使用这个CSS：

```
tr { 
      outline:1px solid red; 
   } 
```

您只会在第一行获得大纲，如果您在 chrome 中打开此链接，您会看到：

[http://jsbin.com/enupey/27/edit](http://jsbin.com/enupey/27/edit)

有人知道任何解决方法/解决方法吗？

谢谢你

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-11T18:52:22.600

虽然它似乎是一个错误，但有点谷歌搜索，我找到了一个可行的解决方案作为[这个问题的一部分](https://stackoverflow.com/a/1957655/916299)

添加：

```
display: block; 
```

似乎工作：

```
tr
{
  outline:1px solid red;
  display: block;
} 
```

编辑后的结果可以在[这里看到](http://jsbin.com/enupey/3/edit)

* * *

我又摆弄了一点 CSS 并想出了这个：

```
td
{
  border-top:1px solid red;
  border-bottom:1px solid red;
  bottom-padding:-1px;
}

table
{
  border-left:2px solid red;
  border-right:2px solid red;
  border-top:1px solid red;
  border-bottom:1px solid red;
  bottom-padding:-1px;
} 
```

那会合适吗？

警告：我只在 Mac 版 Google Chrome 上进行了测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T07:43:10.153

你`display: block`可以这样做：

HTML：

```
<table>
  <tr>
    <td>ads</td>
    <td>azx</td>
    <td>bbb</td>
  </tr>
  <tr class='sel'>
    <td>ads</td>
    <td>azx</td>
    <td>bbb</td>
  </tr>
  <tr>
    <td>ads</td>
    <td>azx</td>
    <td>bbb</td>
  </tr>
</table> 
```

CSS：

```
tr
{
display: block;
}

tr.sel
{
  outline: 1px solid red;
} 
```

输出是：http: [//jsbin.com/enupey/79/edit](http://jsbin.com/enupey/79/edit)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T22:36:29.003

该[`table`标签有一个`rules`属性](http://www.w3schools.com/tags/att_table_rules.asp)，允许您定义边框在表格中的“规则”位置。但是，请注意：

> 所有主流浏览器都支持规则属性。
> 
> 注意：IE 9 之前的版本不支持 rules 属性。
> 
> 注意：Chrome 和 Safari 不正确地显示此属性：除了内边框外，它们还添加了受影响的外边框。

将其与原始问题中的[frame 属性](http://www.w3schools.com/tags/att_table_frame.asp)和 CSS 相结合，可以在每一行上提供盒装轮廓：

```
<table rules="rows" frame="box"> 
```

![结果](../Images/911104c04c46c6bb96cb401ea43b6b75.png)

[你可以在这里](http://jsbin.com/enupey/13/edit)看到对 JSBin 的修改

（在 Mac Chrome 上测试）

（我已将此作为单独的答案添加，因为我之前的答案集中在 CSS 上，这个解决方案，仅使用 HTML 似乎足以区分答案）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T23:20:33.743

由于某些原因，这不是一个完美的答案，但我将它作为一个选项扔在那里......`border-collapse: collapse;`在元素上设置，并在每一行和元素`TABLE`周围设置样式边框。有关最终输出，请参阅[此 JSBin](http://jsbin.com/enupey/16/edit)。因为它依赖于它，如果没有IE6/7 中的附加 HTML 属性，它将无法工作。如果您要单独勾勒每一行，它也可能不会产生您正在寻找的相同效果。该解决方案还依赖于和伪选择器的使用，而 IE8 不支持. 这可以通过在某些元素上添加“first”和“last”作为类来解决，但这并不理想。`TD``TH``border-collapse``cellspacing``:first-child``:last-child``:last-child`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T14:30:52.853

您可以使用如下代码。

表格的 Html 代码是

```
<table rules='none'>

</table> 
```

并用

```
tr.sel
{
  border:1px solid red;
} 
```

它将在任何浏览器中呈现中间 raw 的边框。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-20T13:30:59.513

解决您的问题：将您的 CSS 更改为。

```
tr
{
  outline:1px solid red;
  display:inherit;
} 
```

或者

```
 tr
   {
     outline:1px solid red;
     display:block;
   } 
```

如果你是，那么你必须通过设置一些负值`concerned with table layout`来对抗空格。`margin`看这里 ：

[http://css-tricks.com/fighting-the-space-between-inline-block-elements/](http://css-tricks.com/fighting-the-space-between-inline-block-elements/)

已经报告了一个错误后续链接：[http ://code.google.com/p/chromium/issues/detail?id=81373&q=outline&colspec=ID%20Pri%20Mstone%20ReleaseBlock%20OS%20Area%20Feature%20Status% 20所有者%20总结](http://code.google.com/p/chromium/issues/detail?id=81373&q=outline&colspec=ID%20Pri%20Mstone%20ReleaseBlock%20OS%20Area%20Feature%20Status%20Owner%20Summary)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-13T23:22:12.307

这正如[**这里**](http://jsbin.com/enupey/17/edit)所展示的那样有效，我相信没有任何主要的副作用：

```
tr
{
  display: table-row-group;
  outline:1px solid red;
} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-08-20T07:51:15.410

是的，它是一个错误

尝试边框而不是轮廓，并给出表格样式`border-collapse:collapse`

html，css现在没有变化

```
tr.sel
{
  border:1px solid red; 

}
table{
  border-collapse:collapse;
} 
```

演示

[小提琴](http://jsfiddle.net/qUVCe/)，[jsbin](http://jsbin.com/enupey/78/edit)

# php - 在php中存储图像文件

> ID：11916730
> 
> 赞同：0
> 
> 时间：2012-08-11T18:47:55.700
> 
> 标签：php, image, file, upload, store

我正在尝试将我的文件保存在根目录中。但我一直低于错误。

**警告：move_uploaded_file(../upload/dddd1.png) [function.move-uploaded-file]：无法打开流：/Applications/MAMP/htdocs/test-website/process/uploadchecker.php 中没有这样的文件或目录在第 48 行**

我想将图像保存到：/Applications/MAMP/htdocs/test-website/uploads

下面是我的php代码。

```
 $allowedExts = array("jpg", "jpeg", "gif", "png");
                $extension = end(explode(".", $_FILES["upload_file"]["name"]));

                if ((($_FILES["upload_file"]["type"] == "image/gif")|| ($_FILES["upload_file"]["type"] == "image/jpg")||($_FILES["upload_file"]["type"] == "image/jpeg")|| ($_FILES["upload_file"]["type"] == "image/png"))&& ($_FILES["upload_file"]["size"] < 200000)&& in_array($extension, $allowedExts)){
                   if ($_FILES["upload_file"]["error"] > 0){
                        echo "Error: " . $_FILES["upload_file"]["error"] . "<br />";
                    }else{
                    echo "Upload: " . $_FILES["upload_file"]["name"] . "<br />";
                    echo "Type: " . $_FILES["upload_file"]["type"] . "<br />";
                    echo "Size: " . ($_FILES["upload_file"]["size"] / 1024) . " Kb<br />";
                    echo "Stored in: " . $_FILES["upload_file"]["tmp_name"];

                        if (file_exists("../uploads/" . $_FILES["upload_file"]["name"]))
                          {
                          echo $_FILES["upload_file"]["name"] . " already exists. ";
                          }
                        else
                          {
                          move_uploaded_file($_FILES["upload_file"]["tmp_name"],"../upload/" . $_FILES["upload_file"]["name"]);
                          echo "Stored in: " . "../uploads/" . $_FILES["upload_file"]["name"];
                          }

                   }
                  }else{
                    echo "Invalid file";
                  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T18:55:16.630

您的文件移动路径正在工作您必须使用上传目录

```
 move_uploaded_file($_FILES["upload_file"]["tmp_name"],"../upload/" . $_FILES["upload_file"]["name"]); 
```

采用

**上传**

插入的

**上传**

**试试这个**

```
move_uploaded_file($_FILES["upload_file"]["tmp_name"],"../uploads/" . $_FILES["upload_file"]["name"]); 
```

# c++ - 对`boost::this_thread::interruption_point()'的未定义引用

> ID：11916733
> 
> 赞同：4
> 
> 时间：2012-08-11T18:48:19.043
> 
> 标签：c++, boost

我正在尝试使用 boost 和 rtmidi 编译一个项目。但是我不断收到以下编译错误。我正在使用 linux、netbeans 7.2、boost 1.50.0 和 rtmidi 2.1.0。

```
g++ -D__LINUX_ALSA__ -lasound -lpthread 
-I/usr/local/boost_1_50_0 
-L/usr/local/boost_1_50_0/lib -L/usr/local/lib -L/usr/lib 
-lboost_system    
-o dist/Debug/GNU-Linux-x86/realtimebeatgenerationthesis build/Debug/GNU-Linux-x86/State.o build/Debug/GNU-Linux-x86/RawNote.o build/Debug/GNU-Linux-x86/MarkovEngineConsumer.o build/Debug/GNU-Linux-x86/Calibrator.o build/Debug/GNU-Linux-x86/main.o build/Debug/GNU-Linux-x86/MidiHandlerProducer.o build/Debug/GNU-Linux-x86/LetterPattern.o build/Debug/GNU-Linux-x86/Letter.o build/Debug/GNU-Linux-x86/Meter.o build/Debug/GNU-Linux-x86/VOMC.o build/Debug/GNU-Linux-x86/Metronome.o 
```

我收到的错误消息的两部分是：

```
undefined reference to `boost::this_thread::interruption_point()' 
```

和

```
undefined reference to `RtMidiOut::RtMidiOut(RtMidi::Api, std::string)'
collect2: error: ld returned 1 exit status
make[2]: *** [dist/Debug/GNU-Linux-x86/realtimebeatgenerationthesis] Error 1
make[2]: Leaving directory `dir/NetBeansProjects/RealTimeBeat'
make[1]: *** [.build-conf] Error 2
make[1]: Leaving directory `dir/NetBeansProjects/RealTimeBeat'
make: *** [.build-impl] Error 2 
```

EDIT-1：嘿@mathematician1975，即使加上我得到的那个：

```
undefined reference to `boost::this_thread::interruption_point()'
build/Debug/GNU-Linux-x86/MarkovEngineConsumer.o: In function     `__static_initialization_and_destruction_0':
/usr/local/boost_1_50_0/boost/system/error_code.hpp:214: undefined reference to `boost::system::generic_category()'
/usr/local/boost_1_50_0/boost/system/error_code.hpp:215: undefined reference to  `boost::system::generic_category()'
/usr/local/boost_1_50_0/boost/system/error_code.hpp:216: undefined reference to `boost::system::system_category()' 
```

最后，我终于通过添加链接器->添加库 boost_thread boost_system 和 rtmidi 使其工作。在命令行中导致类似于以下内容：

```
g++ -Wall -D__LINUX_ALSA__ -I/usr/local -L/usr/local/lib/ -L/alsa/ -lasound -lpthread -o          build/Debug/GNU-Linux-x86/Calibrator.o ..../main.o ...../MidiHandlerProducer.o ...../LetterPattern.o ..../Letter.o ..../Meter.o ..../VOMC.o ..../Metronome.o -L/usr/local/lib -lboost_thread -lboost_system -lrtmidi 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-11T19:01:52.247

您似乎没有链接到 boost 线程库。尝试添加`-lboost_thread`您的构建路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-11T23:53:32.987

我有同样的问题，尽管我确定我正确地链接了一些东西。如果您进一步阅读错误输出，您可能会发现架构不匹配：

```
ld: warning: ignoring file /.../boost/lib/libboost_system.dylib, file was built for x86_64 which is not the architecture being linked (i386)
ld: warning: ignoring file /.../boost/lib/libboost_filesystem.dylib, file was built for x86_64 which is not the architecture being linked (i386):
ld: warning: ignoring file /.../boost/lib/libboost_thread.dylib, file was built for x86_64 which is not the architecture being linked (i386): 
```

# python - 从文件内容检测文件类型，而不是文件名

> ID：11916737
> 
> 赞同：2
> 
> 时间：2012-08-11T18:49:00.557
> 
> 标签：python

> **可能重复：**
> [如何在 python 中查找文件的 mime 类型？](https://stackoverflow.com/questions/43580/how-to-find-the-mime-type-of-a-file-in-python)

我想检测文件的类型，但我不想查看扩展名，因为它可能不正确。该`mimetypes`模块是基于文件名的。

有没有标准的方法来查看文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-11T18:52:48.760

尝试安装[python-magic](http://pypi.python.org/pypi/python-magic/)模块。

```
 >>> mime = magic.Magic(mime=True)
 >>> mime.from_file("testdata/abc.pdf")
'application/pdf' 
```

# variables - 为什么 Powershell Copy-Item -Source -Destination 不能到称为变量的 UNC 路径，见下文

> ID：11916738
> 
> 赞同：2
> 
> 时间：2012-08-11T18:49:11.527
> 
> 标签：variables, copy, powershell-2.0, unc, copy-item

```
#VARIABLES
$Source = Read-host "Please provide DIR location you wish to copy its contents from.   
ie.  (UNC, Absolute paths, etc)"
$Serverlist = Read-Host "Please provide the location of the server list. (UNC, Absolute   
paths, etc)"
$Servers = Get-Content -Path $Serverlist
#$Destination1 = \\$Server\c$\inetpub\wwwroot\'
#$Destination2 = \\$Server\c$\wmpub\wmroot\'
#EXECUTION
$Servers | foreach-object      {                            
    Copy-Item -Path $Source*.wsx -Destination $Server\c$\inetpub\wwwroot\ -  
force
    Copy-Item -Path $Source*.nsc -Destination $Server\c$\wmpub\wmroot\ -force
                           }
#EVENTVWR LOGGING
$EventLog = New-Object System.Diagnostics.EventLog('Application')
$EventLog.MachineName = "."
$EventLog.Source = "Streaming Media Engineering"
$EventLog.WriteEntry('Copy Successful',"Information", 200)
#VIEWING OVERLOADS
($myevent.WriteEntry).OverloadDefinitions
Add-Type -AssemblyName System.Speech
$synthesizer = New-Object -TypeName System.Speech.Synthesis.SpeechSynthesizer
$synthesizer.Speak('Files have been moved over successfully...') 
```

尝试执行 Copy-Item 循环时，我似乎无法让脚本读取 $Destination1 和 $Destination2 路径中的 $Server 变量。请帮助已经花了几天的时间...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-17T11:24:48.287

变量 $Server 未在管道内设置。您必须将其分配给 $Server **s**中的当前管道对象：

```
# For PS2 and above:
$Servers | ForEach-Object {
$Server = $_
...

# If you are sure that you will always use PS3 or above
$Servers | ForEach-Object {
$Server = $PSItem
... 
```

希望这会有所帮助。

PS我注意到这个问题是2年前发布的，我现在是一个掘墓人：P

# cassandra - 并行 get_range() phpcassa

> ID：11916739
> 
> 赞同：2
> 
> 时间：2012-08-11T18:49:20.230
> 
> 标签：cassandra, phpcassa

我正在尝试制作类似于 map reduce 的东西，但没有 hadoop。

我打算使用几个 php 进程，每个进程都执行 $cf->get_range($begin, $end) 并迭代每一行。

但是由于随机分区器，数据没有排序。这意味着我无法真正选择好的 $begin、$end 变量，并且很难并行启动 30-40 个进程。

Cassandra 通过 token 支持 get_range，但在 phpcassa 中没有公开。

我有几种可能性，但不喜欢它们，因为它们看起来并不专业：

1.  将所有键放在单行上，然后使用 CoulumnSlice() + multiget() 。
2.  将所有键放在单行上，但要使用它们的 MD5 值。然后通过 MD5 值获取 key，并做 get_range()
3.  用二级索引做类似的事情
4.  导入 Redis 中的所有密钥。

# php - 动态创建页面上的 Wordpress 评论

> ID：11916741
> 
> 赞同：3
> 
> 时间：2012-08-11T18:49:39.527
> 
> 标签：php, wordpress, comments

我在 Wordpress 中有一个带有自定义模板的自定义页面。除了向用户显示实际页面外，它还通过传入的 URL 变量动态创建页面。

因此，我在 wordpress 中创建了一个名为 News 的页面并将其分配给我的 news.php 模板。用户可以点击 mywebsite.com/news 上的页面

他们还可以转到 mywebsite.com/news/2012/august-8/，页面模板通过这些 url 变量读取日期，并仅显示该页面的新闻。

这就是我想做的。我想向“日期特定页面”添加评论，这些评论不是 wordpress 中的实际页面，而是基于 url 变量动态创建的。

我可以将 comments_template() 添加到页面，但我相信它是基于页面 id 或帖子 id...有没有办法插入自定义 id 或插入 url 来为这些动态页面创建评论？

我不希望 mywebsite.com/news/2012/august-8/ 上的评论出现在 mywebsite.com/news/2012/august-9/ 上——它们是单独的页面

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T20:38:10.870

我理解你，但我认为以这种方式使用 WP 不是一个好主意。您正在搞乱 WP 的主要功能、他们的帖子和评论。我应该为这项工作使用另一个框架。任何一个很好的调查起点都是`wp_commentmeta`table 和他们的朋友：

```
add_comment_meta($comment_id, $meta_key, $meta_value, $unique = false)
get_comment_meta( $comment_id, $meta_key, $single = false ) 
```

确保你能达到你所需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-25T22:31:43.560

我知道这个问题很老，但无论如何我都会发布答案，以防人们仍在寻找。老实说，我认为这个功能应该包含在创建动态用户配置文件类型页面的插件中，我不确定开发人员为什么要添加这个功能。

只要它们是动态页面中唯一的 url 的一部分，此方法就可以工作。就我而言，我使用网址的第二部分。

1.  首先，您想为您的评论添加一个额外的隐藏评论字段，该字段获取部分或全部 url 并将其填充到文本框中。您可以对网站上的所有评论执行此操作，也可以像我一样使用 if 查询，如果您只在一个父页面上需要它。

2.  接下来，您可以确保将此文本框作为额外的评论元数据发布到您的 wp_commentmeta 表中。现在，对于发布到特定 url 的每条评论，您都有一个唯一的 id，您可以查询数据库。

    ```
     //   adds the extra comment field and populates it with the second part 
        //   of the the url for example (mydomain.com/profile/userid -> $lastpart[2] = userid)
        //   also posts data to database. the ability to edit is there in case you want to show the element
        //   this part would go in your functions.php

            function unique_comments_additional_field() {
            global $post_id;
            if(is_page(108)){

                $url = "http://$_SERVER[HTTP_HOST]$_SERVER[REQUEST_URI]";
                $path = parse_url($url, PHP_URL_PATH);
                $lastpart = explode('/', rtrim($path, '/'));

                echo '<p style="display:none;">'.
                '<input id="hiddencoment" name="hiddencoment" placeholder="' . __( 'hiddencoment', 'Extra Field' ) . '"  value="'.$lastpart[2].'" type="text" size="30" /></p>';
        }

            add_action( 'comment_form_logged_in_after', 'unique_comments_additional_field' );
            add_action( 'comment_form_after_fields', 'unique_comments_additional_field' );

            function save_comment_meta_data( $comment_id ) {

                if ( ( isset( $_POST['hiddencomment'] ) ) && ( $_POST['hiddencomment'] != '') ) {
                    $hiddencomment = wp_filter_nohtml_kses($_POST['hiddencomment']);
                    add_comment_meta( $comment_id, 'hiddencomment', $hiddencomment );
                }

            }
            add_action( 'comment_post', 'save_comment_meta_data' );

            function unique_extend_comment_add_meta_box() {
                add_meta_box( 'hiddencomment', __( 'Comment Metadata', 'Extra Field' ), 'unique_extend_comment_meta_box', 'comment', 'normal', 'high' );
            }
            add_action( 'add_meta_boxes_comment', 'unique_extend_comment_add_meta_box' );

            function unique_extend_comment_meta_box( $comment ) {
                $hiddencomment = get_comment_meta( $comment->comment_ID, 'hiddencomment', true );
                wp_nonce_field( 'extend_comment_update', 'extend_comment_update', false );
                ?>
                <p>
                <input type="text" style="display:none;" name="hiddencomment" value="<?php echo esc_attr( $hiddencomment ); ?>" class="widefat" />
                </p>
                <?php
            }

            function unique_extend_comment_edit_metafields( $comment_id ) {
                if( ! isset( $_POST['extend_comment_update'] ) || ! wp_verify_nonce( $_POST['extend_comment_update'], 'extend_comment_update' ) ) return;

                if ( ( isset( $_POST['hiddencomment'] ) ) && ( $_POST['hiddencomment'] != '') ):
                $hiddencomment = wp_filter_nohtml_kses($_POST['hiddencomment']);
                update_comment_meta( $comment_id, 'hiddencomment', $hiddencomment);
                else :
                delete_comment_meta( $comment_id, 'hiddencomment');
                endif;
            }
            add_action( 'edit_comment', 'unique_extend_comment_edit_metafields' ); 
    ```

查询以显示具有与我们刚刚保存到 commentmeta 表的 url 部分匹配的元值的评论。这将进入您的父帖子页面模板，即在此示例页面 108 中

```
<ol class="commentlist" style="list-style: none; background: #eee; padding: 10px;">
            <?php

                $url = "http://$_SERVER[HTTP_HOST]$_SERVER[REQUEST_URI]";
                $path = parse_url($url, PHP_URL_PATH);
                $lastpart = explode('/', rtrim($path, '/'));
                $customer_id = (string)$lastpart[2];

                //Gather comments for a specific page/post 
                $comments = get_comments(array( 'meta_key' => 'title', 'meta_value' => $customer_id ) );

                //Display the list of comments
                wp_list_comments(array(
                    'per_page' => 10, //Allow comment pagination
                    'reverse_top_level' => true //Show the latest comments at the top of the list
                ), $comments);

            ?>
        </ol> 
```

# java - Calendar.before() 和 Calendar.after() 返回不正确的值

> ID：11916743
> 
> 赞同：5
> 
> 时间：2012-08-11T18:49:51.370
> 
> 标签：java, android, calendar

我在 Java/Android 中的日期比较有点卡住了

```
 DateFormat df = new SimpleDateFormat("dd/MM/yy HH:mm");
                Calendar now = Calendar.getInstance();
                Calendar c;

                c = Calendar.getInstance();
                c.set(settings.getInt("year", 0), settings.getInt("month", 0), settings.getInt("day", 0), settings.getInt("hour", 0), settings.getInt("minute", 0));

                views.setTextViewText(R.id.textView4, String.valueOf(c.getTime().before(now.getTime())));
                views.setTextViewText(R.id.textView2, String.format("%s - %s", df.format(c.getTime()), df.format(now.getTime())));

                int timeout = 0;
                while( c.getTime().before(now.getTime()) )
                {
                    c.add(Calendar.SECOND, 30);
                    c.add(Calendar.MINUTE, 12);
                    c.add(Calendar.HOUR_OF_DAY, 6);
                    isHigh = 1 - isHigh;
                    timeout++;
                    if( timeout >= 400 )
                        break;
                }
                views.setTextViewText(R.id.textView5, String.valueOf(c.getTime().before(now.getTime())));
                views.setTextViewText(R.id.textView3, String.format("%s - %s", df.format(c.getTime()), df.format(now.getTime()))); 
```

这样做的想法是从保存的设置中获取开始日期，并将 6:12:30 添加到时钟，直到它超过当前时间。

但是，我的文本框给了我以下信息：

> 错误：09/07/12 04:20 - 11/08/12 00:00
> 
> 错误：09/07/12 04:20 - 11/08/12 00:00

为什么调用“之前（2012 年 8 月 11 日）”时 2012 年 7 月 9 日返回 false？

如果我将“.before”更改为“.after”，我会得到：

> 真实 : 09/07/12 04:20 - 11/08/12 00:00
> 
> 真实 : 20/10/12 15:40 - 11/08/12 00:00

这似乎没有任何意义。

任何想法我做错了什么？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-11T19:20:54.823

我想知道这是否是因为您的“年份”设置是 12 而不是 2012 年。然后您会将 09/07/2012 与 11/08/0012 进行比较 - 但由于您的日期格式，您无法判断。

出于诊断目的，请将格式字符串更改为并重`"dd/MM/yyyy HH:mm"`试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T19:37:33.090

好吧，它在 JDK 12 和 2012 中按预期工作。

```
DateFormat df = new SimpleDateFormat("dd/MM/yy HH:mm");
Calendar now = Calendar.getInstance();
Calendar c;
c = Calendar.getInstance();
c.set(12, 6, 9, 0, 0);
System.out.println(String.valueOf(c.getTime().before(now.getTime()))); 
System.out.println(String.format("%s - %s", df.format(c.getTime()), df.format(now.getTime()))); 
```

输出：- true 09/07/12 00:00 - 11/08/12 13:29

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-12-15T13:25:17.757

我之前遇到过这个问题。但我不需要比较小时、分钟和秒。只有日期。但是@Jon Skeet 的回答对我不起作用。所以我实现了自己的方法来比较两个日期。**丑陋**，但工作正常。

```
private boolean before(Calendar c1, Calendar c2){
        int c1Year = c1.get(Calendar.YEAR);
        int c1Month = c1.get(Calendar.MONTH);
        int c1Day = c1.get(Calendar.DAY_OF_MONTH);

        int c2Year = c2.get(Calendar.YEAR);
        int c2Month = c2.get(Calendar.MONTH);
        int c2Day = c2.get(Calendar.DAY_OF_MONTH);

        if(c1Year<c2Year){
            return true;
        }else if (c1Year>c2Year){
            return false;
        }else{
            if(c1Month>c2Month){
                return false;
            }else if(c1Month<c2Month){
                return true;
            }else{
                if(c1Day<c2Day){
                    return true;
                }else{
                    return false;
                }
            }
        }
    } 
```

# jquery - 如何防止鼠标右键弹出窗口

> ID：11916744
> 
> 赞同：0
> 
> 时间：2012-08-11T18:50:11.167
> 
> 标签：jquery

所以正如标题所说，我该怎么做？

经过一番谷歌搜索后，我得到了这段代码：

```
$('.lines').mousedown(function(event) {
    if(event.which == 1){
        console.log("left");
    }else{
        event.preventDefault();
        console.log("right");
    }
}); 
```

所以首先我需要确定按下了哪个按钮，因为我将使用不同的操作。但是`event.preventDefault`由于某种原因，单击鼠标右键时不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T18:52:16.963

请尝试：

```
$(document).ready(function()
{ 
    $(document).bind("contextmenu",function(e){
        return false;
    }); 
}); 
```

实际上，当您无法在网站上使用鼠标右键时，这很烦人。

* * *

您可以以相同的方式为任何特定块禁用它：

```
$(document).ready(function()
{ 
    $('#test').bind("contextmenu",function(e){
        return false;
    }); 
});​ 
```

示例 HTML：

```
<div id="test"> ​No right clicks allowed here! </div>​ 
```

和示例 CSS：

```
#test { width: 200px; height: 200px; background: red; } 
```

最后，[举个例子](http://jsfiddle.net/x4axm/)

# java - Android - 应用服务器说明

> ID：11916746
> 
> 赞同：0
> 
> 时间：2012-08-11T18:50:24.067
> 
> 标签：java, php, android, webserver

我正在使用 Google Cloud Messaging API 编写一个 Android 应用程序，并且我不断遇到术语“应用程序服务器”。在过去的几天里，我一直在谷歌搜索和搜索关于这个主题的 Stack Overflow，我发现了很多有用的信息。

我对这一切有点陌生，我有一个非常简单的问题，没有文章能回答：当后端代码以 PHP 文件的形式存在于 Web 服务器上时，它是否只是一个应用程序服务器，它与数据库通信然后将查询到的数据发送到普及设备？或者应用服务器是完全不同的架构？

如果是后一个问题：我有我使用 1&1 和我朋友的家庭服务器的网络服务器空间，我可以将其中的一部分用作应用程序服务器吗？任何可以提供的信息将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T18:56:41.427

你的第一个想法是正确的。如果您有一个可以从您的设备联系到的服务器，并且该服务器运行您的 Android 应用程序使用的一些代码，那么它就是一个应用程序服务器。

# azure - 数百个子域动态映射到 Azure

> ID：11916748
> 
> 赞同：0
> 
> 时间：2012-08-11T18:50:47.890
> 
> 标签：azure, mapping, dns, cname

我正在构建 SaaS 解决方案，让我们的客户能够构建在线登录页面。该服务提供了构建和托管登录页面的工具。我们需要让我们的客户选择将他们自己的域名连接到他们构建的页面。假设服务域是用于 Azure 的 www.abc.com。每个客户端都有本地 URL www.abc.com/client。但是，通常客户希望能够使用自己的域，例如 www.client.com，而不是我们的本地 URL。当然，我们可以指示他们添加将 www.client.com 指向我们的 Azure 站点的 CNAME。问题是 Azure 还需要手动添加每个域。

有没有办法以某种方式通过这个阶段？假设我们知道客户域要求他们在其个人资料中提供域。我们如何动态地而不是手动地向 Azure 提供域？这就是问题。拥有至少 100 多个客户使得手动输入成为不可能。我将不胜感激任何建议和解决方案使其发挥作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T06:14:31.897

我假设您在谈论 Windows Azure 网站。目前无法自动化 CNAME 管理，您必须在门户中手动添加它们。目前有[一个有限的 API](https://github.com/WindowsAzure/azure-sdk-for-node/blob/master/lib/cli/commands/site.js)可用于网站，但没有记录。所以也许CNAME管理一旦公开就可以通过这个API实现，但目前无法确定。

另一种解决方案是使用 Web 角色而不是网站。这将允许您的客户将他们想要的任何 CNAME 映射到**yourapplication.cloudapp.net**并且它会简单地工作。然后在您的代码中，您可以使用[域路由](http://blog.maartenballiauw.be/post/2009/05/20/aspnet-mvc-domain-routing.aspx)（假设您使用 ASP.NET MVC）来映射应用程序中的域。

# ruby-on-rails - 将炼油厂 cms 与 Amazon S3 Web 服务连接起来

> ID：11916750
> 
> 赞同：2
> 
> 时间：2012-08-11T18:50:58.990
> 
> 标签：ruby-on-rails, ruby-on-rails-3, amazon-s3, refinerycms

我在将炼油厂 cms 的网站与 amazon s3 服务连接以存储数据时遇到问题。我在refinerycms 官方网站上找到了本教程： [http ://refinerycms.com/guides/amazon-s3-for-uploads](http://refinerycms.com/guides/amazon-s3-for-uploads)

1) 我在密钥方面遇到问题： - S3_KEY - S3_SECRET - S3_BUCKET - S3_REGION 我的问题是 - 我可以任意选择密钥，或者这些密钥可以在亚马逊/炼油厂的某个地方找到吗？如果稍后 - 是的，我在哪里可以找到它们？我应该为 S3_REGION 输入什么（我在奥地利）？

2）插入钥匙后，下一步是什么？我是否需要重新上传我希望我的网站包含的所有亚马逊图片？（最初的问题是 - 站点中的图像可以在本地看到，但不能在 Heroku（我的应用程序当前部署的地方）上看到，因为 Heroku 是只读的）。我缺少一个链接，当我插入这些键时它将如何工作。有人可以澄清一下吗？

感谢：D。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T02:02:43.267

1.  密钥位于 [https://portal.aws.amazon.com/gp/aws/securityCredentials](https://portal.aws.amazon.com/gp/aws/securityCredentials)

2.  Refinery 上的图像、文件和页面类似于 Rails 应用程序中的所有数据：开发应用程序中的内容与生产应用程序中的内容不同。您的本地图像被添加到本地文件夹并在您的数据库中引用，因此即使将它们上传到亚马逊也行不通，您还需要上传您的数据库（heroku db:push）。请记住，CMS 的意义在于您不必推送新代码即可将图像等内容添加到站点。

# objective-c - 我可以让 Clang 为 Objective-C 文字对象使用自定义类吗？

> ID：11916753
> 
> 赞同：4
> 
> 时间：2012-08-11T18:51:10.997
> 
> 标签：objective-c, clang

gcc 文档引用了一个[`-fconstant-string-class`](http://gcc.gnu.org/onlinedocs/gcc/Constant-string-objects.html)参数，该参数允许您更改用于`@"Objective-C string literal"`实例的类。我发现这似乎不适用于clang，使用以下来源：

```
#import <stdio.h>
#import <objc/runtime.h>

@interface ConstantString
{
    Class isa;
    char *c_string;
    unsigned int len;
}
@end
@implementation ConstantString

- (Class)class {return isa;}

@end

int main(int argc, char *argv[])
{
    fprintf(stderr, "%s\n", class_getName([@"foo" class]));
    return 0;
} 
```

用这个编译器这样编译：

> $ 铿锵 -v
> 
> 苹果 clang 版本 4.0 (tags/Apple/clang-421.10.60) (基于 LLVM 3.1svn)
> 
> 目标：x86_64-apple-darwin12.0.0
> 
> 线程模型：posix
> 
> $ clang -fconstant-string-class=ConstantString -lobjc constantstring.m
> 
> 架构 x86_64 的未定义符号：
> 
> “___CFConstantStringClassReference”，引用自：
> 
> ```
>  CFString in constantstring-C7icsk.o ld: symbol(s) not found for architecture x86_64 
> ```
> 
> clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

如果我链接到 Foundation，那么我发现它仍在使用默认的常量字符串类：

> $ clang -fconstant-string-class=ConstantString -lobjc constantstring.m -framework Foundation
> 
> $ ./a.out
> 
> __NSCFConstantString

那么你真的可以使用 clang 为字符串文字定义一个自定义类吗？数组、字典和数字字面量的类可以改变吗？

# python - Django：设置电子邮件

> ID：11916754
> 
> 赞同：3
> 
> 时间：2012-08-11T18:51:19.523
> 
> 标签：python, django, email

我在“settings.py”文件中创建了以下条目

```
# Email setup
EMAIL_USE_TLS = True
EMAIL_HOST = 'smtp.gmail.com'
EMAIL_HOST_USER = 'someone@someorg.com'
EMAIL_HOST_PASSWORD = 'thepassword'
EMAIL_PORT = 587 
```

然后我在终端中发出以下命令：

```
email = EmailMessage('Hello','Have you received this mail?',to=['someone@gmail.com']) 
```

我得到了`1`一个输出。

当我在“someone@gmail.com”查看邮箱时，邮箱中没有邮件。我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T19:36:15.130

您应该`from_email`通过调用设置参数（作为 kwarg 或 3rd arg）`EmailMessage`。或者在 settings.py 中定义：

```
DEFAULT_FROM_EMAIL = 'some.mail@inter.net' 
```

`from_email`如果没有提供给 ，则将其视为默认值`EmailMessage`。

在半相关的注释中，`SERVER_EMAIL`在 settings.py 中定义可能是一个好主意。这个与 Django 一起使用`mail_admins`并由`mail_managers`Django 使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T10:39:20.583

你所有的设置都是正确和完整的，你最后只是漏掉了一件事。您创建了一个邮件对象，现在`email`可以发送电子邮件对象，但您需要使用`email.send()`. 有关更多信息和示例，请查看 Django[文档](https://docs.djangoproject.com/en/dev/topics/email/)。此外，您可以使用`send_mail`which 自动创建电子邮件对象并发送它。

```
from django.core.mail import send_mail

mail_title = 'Hello!'
message = 'Have you received this mail?'
email = 'admin@company.com'
recipients = 'someone@gmail.com'

send_mail(mail_title, message, email, [recipients]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-11T15:10:13.260

根据以下链接[https://docs.djangoproject.com/en/1.3/topics/email/](https://docs.djangoproject.com/en/1.3/topics/email/)，您应该将电子邮件放在括号中。这意味着，它应该如下所示：

```
from django.core.mail.import send_mail

mail_title = 'Hello!'
message = 'Have you received this mail?'
email = admin@company.com
recipients = 'someone@gmail.com'

send_mail(mail_title, message, email, [recipients]) 
```

# cgi - 在 apache 上运行 python cgi 脚本时总是出现超时错误

> ID：11916758
> 
> 赞同：0
> 
> 时间：2012-08-11T18:51:43.970
> 
> 标签：cgi, python-2.7

这是一个爬虫，可以打印给定链接上所有可用的 URL。

```
#!C:/Python27/python.exe -u
import urllib
import cgi,cgitb
cgitb.enable()

print "Content-Type: text/html\n\n"

def get_page(url):
    try:
        return urllib.urlopen(url).read()
except:
    return ""

def get_next_target(page):
    start_link = page.find('<a href=')
    if start_link == -1: 
        return None, 0
    start_quote = page.find('"', start_link)
    end_quote = page.find('"', start_quote + 1)
    url = page[start_quote + 1:end_quote]
    return url, end_quote

def get_all_links(page):
    links = []
    while True:
        url, endpos = get_next_target(page)
        if url:
            links.append(url)
            page = page[endpos:]
        else:
            break
    return links

def union(a, b):
    for e in b:
        if e not in a:
            a.append(e)

def add_page_to_index(index, url, content):
    words = content.split()
    for word in words:
        add_to_index(index, word, url)

def add_to_index(index, keyword, url):
    if keyword in index:
        index[keyword].append(url)
    else:
        index[keyword] = [url]

def lookup(index, keyword):
    if keyword in index:
        return index[keyword]
    else:
        return None

def crawl_web(seed): # returns index, graph of inlinks
    tocrawl = [seed]
    crawled = []
    graph = {}  # <url>, [list of pages it links to]
    index = {} 
    while tocrawl: 
        page = tocrawl.pop()
        if page not in crawled:
            content = get_page(page)
            add_page_to_index(index, page, content)
            outlinks = get_all_links(content)
            graph[page] = outlinks
            union(tocrawl, outlinks)
            crawled.append(page)
    return index, graph

index, graph = crawl_web('http://www.bing.com/results.asp?q=fulcrum')

print graph
print """
<html>
<body>
Animesh Pandey
</body>
</html>
"""
print "<br>"
print graph
print "<br>"
print index
print "<br>"
print tocrawl
print "<br>"
print seed 
```

这个 python 文件在在线解释器上运行良好！至少它给出了一些结果....但是在浏览器上运行时它总是给出超时！我正在使用 Apache 2.2.11 和 Python 2.7.3。

请告诉我我应该怎么做？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T14:39:34.657

这是代码的正确版本。

```
#!C:/Python27/python.exe -u
import urllib
import cgi,cgitb
cgitb.enable()

print "Content-Type: text/html\n\n"

def get_page(url):
    try:
        return urllib.urlopen(url).read()
except:
    return ""

def get_next_target(page):
    start_link = page.find('<a href=')
    if start_link == -1: 
        return None, 0
    start_quote = page.find('"', start_link)
    end_quote = page.find('"', start_quote + 1)
    url = page[start_quote + 1:end_quote]
    return url, end_quote

def get_all_links(page):
    links = []
    while True:
        url, endpos = get_next_target(page)
        if url:
            links.append(url)
            page = page[endpos:]
        else:
            break
    return links

def union(a, b):
    for e in b:
        if e not in a:
            a.append(e)

def add_page_to_index(index, url, content):
    words = content.split()
    for word in words:
        add_to_index(index, word, url)

def add_to_index(index, keyword, url):
    if keyword in index:
        index[keyword].append(url)
    else:
        index[keyword] = [url]

def lookup(index, keyword):
    if keyword in index:
        return index[keyword]
    else:
        return None

def crawl_web(seed): # returns index, graph of inlinks
    tocrawl = [seed]
    crawled = []
    graph = {}  # <url>, [list of pages it links to]
    index = {} 
    while tocrawl: 
        page = tocrawl.pop()
        if page not in crawled:
            content = get_page(page)
            add_page_to_index(index, page, content)
            outlinks = get_all_links(content)
            graph[page] = outlinks
            union(tocrawl, outlinks)
            crawled.append(page)
    return index, graph

theurl = "http://dl.dropbox.com/u/86814352/ani.html"
index, graph = crawl_web(theurl)

print "<br>"
print graph
print "<br>" 
```

这会在该静态网页上打印 url，但此代码不适合有很多链接的网站！

# batch-file - 如何在 Batch RPG 中添加任务

> ID：11916759
> 
> 赞同：0
> 
> 时间：2012-08-11T18:51:46.277
> 
> 标签：batch-file

首先，如果有一个问题问同样的事情，我很抱歉，但我找不到它。

好吧，我目前正处于批量 RPG 的计划阶段。除了故事情节和所有这些，我还在计划功能。我正在考虑的其中之一是任务，但我不知道如何在游戏中放置任务。我先问了雅虎的答案，但有人告诉我我会在这里得到更好的答案，所以如果有人能告诉我怎么做，也许可以打一个简单的例子，那将非常感激。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T20:34:39.207

批量创建任务几乎是不可能的，但对于一个可工作的逐级 RPG，您需要执行以下操作：

```
:level1
set health=100
echo quest-level-1.
pause
goto level2

:level2
set health=80 
echo quest-level-2
if health=80 goto finish

:finish
You have completed the quest!
pause
goto start 
```

这将作为一个很好的逐个任务类型的东西。如果你想让它更逼真，你也可以添加一个能量棒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T00:45:19.500

容易，虽然你可能认为它很难。我将向您展示我的批处理 RPG 代码（如果您使用它，它将无法工作！）

```
:questsC

 cls

if %Q% LEQ 0 goto quests
if %GQ% GEQ 1 goto GQuestC
if %PQ% GEQ 1 goto PQuestC
if %WQ% GEQ 1 goto WQuestC
if %CPQ% GEQ 1 goto CPQuestC

:quests
set GK=0
set PK=0
cls
echo Select a quest
echo.
echo 1) Kill 5 Goblins (+50 Gold!)
echo 2) Kill 5 Evil Pizzas (+75 Gold!)
echo 3) Kill 5 Wolfs (+150 Gold!)
echo 4) Kill 5 Chili Peppers (+200 Gold!)
echo 5) Go back home
set /p quest=
if %quest% == 1 goto QGS
if %quest% == 2 goto QPS
if %quest% == 3 goto QWS
if %quest% == 4 goto CPWS
if %quest% == 5 goto begin

:CPWS
set CPK=0
set CPQ=1
set Q=1
goto begin

:CPQuestC
if %CPK% GEQ 5 goto CPQuest
if %CPK% LSS 5 goto QuestCP

:QuestCP
cls
echo Quest not complete. You only have %CPK% kills.
pause
goto begin

:CPQuest
Start Levelup.mp3
cls
set CPQ=0
set /a Gold=%Gold%+200
set /a EXP=%EXP%+200
cls
echo Quest Complete! You got 200 gold and 200 exp!
pause
goto begin

:QWS
set WK=0
set WQ=1
set Q=1
goto begin

:QGS
set GK=0
set GQ=1
set Q=1
goto begin

:QPS
set PK=0
set PQ=1
set Q=1
goto begin

:GQuestC
if %GK% GEQ 5 goto GQuest
if %GK% LSS 5 goto QuestG

:WQuestC
if %WK% GEQ 5 goto WQuest
if %WK% LSS 5 goto QuestW

:WQuest
Start Levelup.mp3
cls
set WQ=0
set /a Gold=%Gold%+150
set /a EXP=%EXP%+150
cls
echo Quest Complete! You got 150 gold and 150 exp!
pause
goto begin

:QuestW
cls
echo Quest not complete. You only have %WK% kills.
pause
goto begin

:GQuest
Start Levelup.mp3
cls
set GQ=0
set /a Gold=%Gold%+50
set /a EXP=%EXP%+50
cls
echo Quest Complete! You got 50 gold and 50 exp!
pause
goto begin

:QuestG
cls
echo Quest not complete. You only have %GK% kills.
pause
goto begin

:QuestP
cls
echo echo Quest not complete. You only have %PK% kills.
pause
goto begin

:PQuestC
if %PK% GEQ 5 goto PQuest
if %PK% LSS 5 goto QuestP

:PQuest
Start Levelup.mp3
cls
set PQ=0
set /a Gold=%Gold%+75
set /a EXP=%EXP%+100
echo Quest Complete! You got 75 gold and 100 exp!
pause
goto begin 
```

好的！所以首先它看起来是一个 Q，它告诉计算机是否正在进行任务。如果是这样，它会检查你有哪一个。然后它会检查您是否满足要求。然后，完成！！！像馅饼一样容易吧？研究这段代码！如果你有兴趣，这里是我的游戏的链接！我的 youtube 频道 (mineit909) 上也有教程，告诉你如何制作这个游戏。这是游戏链接。[http://www.mediafire.com/?c87yz2hqawx43](http://www.mediafire.com/?c87yz2hqawx43)下载每个文件！！！如果声音文件不起作用，则在代码中取出开始（声音文件名）！将所有内容放在同一个文件夹中！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-28T04:21:51.370

如果 %quest1% greq 1 goto questcomplete 当他们完成上述任务时，请执行以下操作：

设置任务1=1

:questcomplete cls 回声耶！你完成了任务！

# html - Rails 助手或 html 标签？

> ID：11916762
> 
> 赞同：0
> 
> 时间：2012-08-11T18:51:59.637
> 
> 标签：html, ruby-on-rails, tags, html-helper

什么会更优选？什么会更快？

例如，我需要创建一些链接。有什么用？`<a>`还是`link_to`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T20:35:36.730

风格上，你可能更喜欢这个

```
<%= link_to "Users", users_path %> 
```

对此

```
<a href="<%= users_path %>">Users</a> 
```

主要是因为它不会将 HTML 标记与 ERB 混在一起那么糟糕。这一切都留在ERB中。

另一个原因可能不适用于您现在的情况，但将来可能适用。`link_to`您使用的视图助手越多，您的应用程序的全局可配置性就越高。您可能最终希望在未来使用一个全局修改工作方式的插件，但如果您使用直接标签`link_to`，显然它不会适用。`<a>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T18:59:23.417

`link_to`每次，否则你不能利用路线等

# javascript - 油重的 Javascript 正则表达式

> ID：11916764
> 
> 赞同：2
> 
> 时间：2012-08-11T18:52:13.753
> 
> 标签：javascript, regex

我仍在尝试学习如何格式化我自己的表达式......所以我在试图弄清楚这个时遇到了问题。谁能帮我找到这个油重格式的正则表达式：10W-30 或 0W-30。

基本上，第一个数字可以是两位数或一位，后跟字母 W 和一个破折号……最后两个字符必须是两位数。

因此，如果 x 是数字：xW-xx 或 xxW-xx。

我自己还在研究它......但任何人都可以帮助我真的很感激。谢谢。

这是我到目前为止所拥有的：

/^([0-9]){1,2}[W]-{2,2}$/

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T18:56:15.890

`\d`将匹配数字，所以你只想做这样的事情：

`('10W-30').match(/^(\d{1,2})W-(\d{2})$/) // => ["10W-30", "10", "30"]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T19:04:16.773

这是一个非常简单的正则表达式，请查看[W3 文档](http://www.w3schools.com/jsref/jsref_obj_regexp.asp)以了解如何实现它。

```
[0-9]{1,2}W-[0-9][0-9] 
```

快速解释这里发生的事情：

1.  第一个 [0-9] 指定匹配器正在寻找数字 0-9。
2.  花括号指定前一个匹配可以是一个或两个字符长。
3.  现在这`W`不是一个正则表达式字符命令，所以你可以像白天一样把它放在里面。

现在快速回顾一下，正则表达式匹配任何两位数字，后跟一个大写字母`W`

现在正则表达式的其余部分很容易弄清楚，因为连字符又不是特殊字符，而且您已经知道方括号在做什么。

# ruby-on-rails - 设计、Rolify 和 Cancan 到 ActiveAdmin

> ID：11916768
> 
> 赞同：4
> 
> 时间：2012-08-11T18:52:21.820
> 
> 标签：ruby-on-rails, devise, activeadmin, cancan

我正在使用 Devise、Rolify 和 CanCan 开发一个应用程序。我可以将它完全转移到由 ActiveAdmin 管理吗？有任何文件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-18T12:59:29.933

我知道这个问题已经有一段时间了......但是当我在谷歌搜索时发现它时，我想我可以发布一个答案来帮助别人。

所以！有一个文档可以让 ActiveAdmin 将 Cancan 用于其身份验证和授权系统。这是一个[非常简单的如何在 ActiveAdmin 中添加 CancanAdapter](http://www.activeadmin.info/docs/13-authorization-adapter.html#using_the_cancan_adapter)

事实上，他们甚至解释了如何创建自己的授权适配器。

是的，Rolify 确实有[很好的文档说明如何使其与 Devise + Cancan 一起使用](https://github.com/EppO/rolify/wiki/Tutorial)

感谢这两个文档，每个 Rails 开发人员都应该能够将所有部分组合在一起。如果需要，我很乐意通过提供更多信息来帮助任何遇到麻烦的人。

# actionscript-3 - 动作脚本 3.0，未定义的属性……通过静态类型 Class 的引用

> ID：11916772
> 
> 赞同：0
> 
> 时间：2012-08-11T18:52:42.820
> 
> 标签：actionscript-3, flash-cs3

**从“ http://www.lynda.com/ActionScript-3-tutorials/projects-game-development/366-2.html** ”学习动作脚本3.0及其“第1章>赢得比赛”，其中得分和伤害我们已定义，我的电影剪辑出现错误。

使用我必须制作并且没有从他们的文件中下载的三个电影剪辑：一个是“光标”，一个是有编码的“怪物”（看底部），第三个是导致问题的“mcEnergy”（是一个静态类，不应该是什么（对闪存编程来说真的很新）），它有三个帧来显示三个阶段的健康状况。

所以告诉我如何修复这个静态类错误，如果有帮助的话，无论如何都要在下面发布代码和错误。

提前致谢。

这三个错误是

```
 1119: Access of possibly undefined property totalFrames through a reference with static type Class.
Source:    energy = mcEnergy.totalFrames;

1061: Call to a possibly undefined method gotoAndStop through a reference with static type Class.
mcEnergy.gotoAndStop(energy);

1061: Call to a possibly undefined method gotoAndStop through a reference with static type Class.
mcEnergy.gotoAndStop(energy); 
```

这是主要阶段代码

```
var monstersInGame:uint;
var monsterMaker:Timer;
var container_mc:MovieClip;
var cursor:MovieClip;
var score:int;
var energy:int;

function initializeGame():void
{
    monstersInGame = 10;
    monsterMaker = new Timer(1000, monstersInGame);
    container_mc = new MovieClip();
    addChild(container_mc);

    monsterMaker.addEventListener(TimerEvent.TIMER, createMonsters); 
    monsterMaker.start();

    cursor = new Cursor();
    addChild(cursor);
    cursor.enabled = false;
    Mouse.hide();
    stage.addEventListener(MouseEvent.MOUSE_MOVE, dragCursor);

    score = 0;
    energy = mcEnergy.totalFrames;
    mcEnergy.gotoAndStop(energy);
}

function dragCursor(event:MouseEvent):void
{
    cursor.x = this.mouseX;
    cursor.y = this.mouseY;
}

function createMonsters(event:TimerEvent):void
{
    var monster:MovieClip
    monster = new Monster();
    monster.x = Math.random() * stage.stageWidth;
    monster.y = Math.random() * stage.stageHeight;
    container_mc.addChild(monster);
}

function increaseScore():void
{
    score ++;
    if(score >= monstersInGame);
    {
        monsterMaker.stop();
        trace("Winning!!!");
    }

}

function decreaseEnergy():void
{
    energy --;
    if(energy <= 0)
    {
        monsterMaker.stop();
        trace("You lose");
    }
    else
    {
        mcEnergy.gotoAndStop(energy);
    }

}

initializeGame(); 
```

这是给怪物的

```
import fl.motion.Animator;
import fl.motion.MotionEvent;

var this_xml:XML = <Motion duration="30" xmlns="fl.motion.*" xmlns:geom="flash.geom.*" xmlns:filters="flash.filters.*">
    <source>
        <Source frameRate="12" x="227.65" y="291.3" scaleX="1" scaleY="1" rotation="0" elementType="movie clip" symbolName="Monster">
            <dimensions>
                <geom:Rectangle left="-17.85" top="-17.85" width="35.7" height="35.7"/>
            </dimensions>
            <transformationPoint>
                <geom:Point x="0.5" y="0.5"/>
            </transformationPoint>
        </Source>
    </source>

    <Keyframe index="0" tweenSnap="true" tweenSync="true">
        <tweens>
            <SimpleEase ease="0"/>
        </tweens>
    </Keyframe>

    <Keyframe index="29" scaleX="2.357" scaleY="2.357"/>
</Motion>;

var this_animator:Animator = new Animator(this_xml, this);
this_animator.play();

this_animator.addEventListener(MotionEvent.MOTION_END, hurtPlayer);

function hurtPlayer(Event:MotionEvent):void
{
    var main:MovieClip = MovieClip(this.parent.parent);
    main.decreaseEnergy();
    this.parent.removeChild(this);
}

this.addEventListener(MouseEvent.CLICK, killMonster);

function killMonster(event:MouseEvent):void
{
this_xml = <Motion duration="5" xmlns="fl.motion.*" xmlns:geom="flash.geom.*" xmlns:filters="flash.filters.*">
    <source>
        <Source frameRate="12" x="236.95" y="163" scaleX="1" scaleY="1" rotation="0" elementType="movie clip" symbolName="Monster" class="Monster">
            <dimensions>
                <geom:Rectangle left="-17.85" top="-17.85" width="35.7" height="35.7"/>
            </dimensions>
            <transformationPoint>
                <geom:Point x="0.5" y="0.5"/>
            </transformationPoint>
        </Source>
    </source>

    <Keyframe index="0" tweenSnap="true" tweenSync="true">
        <tweens>
            <SimpleEase ease="0"/>
        </tweens>
    </Keyframe>

    <Keyframe index="4" scaleX="0.552" scaleY="0.552">
        <color>
            <Color alphaMultiplier="0"/>
        </color>
    </Keyframe>
</Motion>;

this_animator = new Animator(this_xml, this);
this_animator.play();

this_animator.addEventListener(MotionEvent.MOTION_END, die);

}

function die(event:MotionEvent):void
{
    var main:MovieClip = MovieClip(this.parent.parent);
    main.increaseScore();
    this_animator.removeEventListener(MotionEvent.MOTION_END, hurtPlayer);
    this.parent.removeChild(this);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T02:30:55.557

好的，事情就是这样。你是说`gotoAndStop();`，但你的类中没有 gotoandstop 函数，静态类只能通过函数调用，如果你不希望它是静态的，那么永远不要说`myclass.somefunction();`从类内部调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T23:25:05.507

问题是您有一个名为 mcEnergy 的类。您需要一个实例名称为 mcEnergy 的类的实例。你在舞台上有你的 mcEnergy 类的实例吗？如果是这样，它的实例名称是什么？如果没有，您需要制作一个并将其放在那里；无论您是在构建时执行此操作（将一个从库中拖放到舞台上并将其实例名称设置为 mcEnergy 以外的名称）还是在运行时通过 actionscript 创建它都没有关系，但这就是您的变量需要在那里使用。

但是，请注意，将类名的第一个字母大写被认为是最佳实践。因此，您的库中有一个当前名为 mcEnergy 的影片剪辑，它应该是 McEnergy。然后，您可以使您的实例名称 mcEnergy 和您当前拥有的代码应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T17:46:58.037

正如战术所回答的那样，这似乎`mcEnergy`是库中符号的类名，而不是阶段中实例的名称。您需要创建一个新实例，`mcEnergy`然后将其添加到显示列表中。

```
var energy_mc :MovieClip = new mcEnergy();
stage.addChild( energy_mc ); 
```

之后，替换对`mcEnergy`by的引用`energy_mc`：

```
energy = energy_mc.totalFrames;
energy_mc.gotoAndStop( energy ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-12T10:51:09.483

您的实例可能没有在属性中的舞台上命名，但如果我理解问题，只是为 AS 导出。尝试将舞台上对 mcEnergy 的所有引用替换为：

```
MovieClip(getChildAt(0)); 
```

如果这解决了问题，你应该只在你的主类中将你的实例声明为here-bellow：

```
var mcEnergy:MovieClip = MovieClip(getChildAt(0)); 
```

但是您最好在属性中将实例命名为“mcEnergy”并执行以下操作：

```
var mcEnergy:MovieClip = MovieClip(getChildByName("mcEnergy")); 
```

你有一个 ”;” 在

```
 if(score >= monstersInGame); 
```

您的代码不会执行 {...} 中的语句

# eclipse - 在 Eclipse 中从 SVN 签出 Maven 项目

> ID：11916776
> 
> 赞同：7
> 
> 时间：2012-08-11T18:52:57.417
> 
> 标签：eclipse, maven, svn, subversive, svn-checkout

我刚刚下载并安装了最新的 Eclipse Juno。我还通过 Eclipse Market Place 安装了 Maven 和 SVN。我遇到的问题是，当我从 SVN 存储库中签出项目时，该项目不会作为 Maven 项目签出。

我正在使用 Windows 7 x64 操作系统。任何人都可以对这个问题有所了解吗？难道我做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-12T14:07:57.997

安装 m2e 后，您可以右键单击该项目并：

*   “配置”->“转换为 maven 项目”（它会读取您的 pom.xml）或
*   “Maven”->“禁用 Maven 自然”

我经常使用这两个步骤（以相反的顺序）来“重启”maven 配置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T13:44:11.020

该项目不需要作为 maven 项目签出。您需要做的是，在签出您的项目（使用 SVN 透视图）后，转到 Java 透视图并将**其作为 maven 项目导入。**

如果您的项目有 pom.xml 文件，这将起作用。

![在此处输入图像描述](../Images/6d5fa7c4ab92cbfcd8d647bc1ab67da8.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-22T18:11:02.307

1.  转到 SVN 存储库探索透视图并签出项目。
2.  然后转到Java透视图，右键单击项目并选择Configure->Convert to Maven project

这在 Eclipse Luna 中对我有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T22:50:43.983

您可以安装一个名为 m2e-subclipse 的插件来执行此操作，但目前尚不支持。您可能需要自己构建它。

[链接到 m2eclipse-subclipse](https://github.com/sonatype/m2eclipse-subclipse)。

或者，我更喜欢做的是使用 TortoiseSVN（或类似的 mac/linux 客户端）查看项目。Subclipse 仍然会发现它是一个 SVN 项目，我将使用 m2e 导入该项目（Import existing Maven project）。

# java - 为通用保存方法创建休眠后端

> ID：11916777
> 
> 赞同：0
> 
> 时间：2012-08-11T18:53:02.873
> 
> 标签：java, hibernate, generics

用户只有一种方法可以使用，**他必须能够使用前端的一种方法保存任何类型的集合：**

```
save(Collection<foo> bar) 
```

我正在使用带有注释的最新 Hibernate。

我该如何为此实现后端？基本上我需要它来理解 Collection 里面有什么对象。

问题是，我不想为我的数据库中的每个表创建一个保存方法，想要通用。或者如果这不可能，其他一些想法，使用什么逻辑？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T19:17:51.433

您可以实现以这种方式保存集合的通用方法。

创建抽象的通用 DAO 类：

```
public abstract class AbstractHibernateDAO<T> {

    private final Class<T> clazz;

    @Autowired
    private SessionFactory sessionFactory;

    public AbstractHibernateDAO(Class<T> clazz) {
        this.clazz = clazz;
    }

    public void saveCollection(Collection<T> entities) {
        for (T t: entities) {
            sessionFactory.getCurrentSession().save(t);
        }
    }

    // Other CRUD methods.

} 
```

某些实体的 DAO 的具体实现：

```
@Repository
@Transactional
public class TestEntityHibernateDAO extends AbstractHibernateDAO<TestEntity> {

    public TestEntityHibernateDAO() {
        super(TestEntity.class);
    }

} 
```

*`Class<T> clazz`*是实现查找器所必需的，因此如果您不需要它们，您可以跳过它。在这种情况下，您只能编写一个通用类（不是每个实体的抽象类和子类）。

[这](http://www.baeldung.com/2011/12/08/simplifying-the-data-access-layer-with-spring-and-java-generics/)是关于使用 Hibernate 和 JPA 创建通用 DAO 的非常好的文章。

# javascript - JavaScript - 访问数组

> ID：11916778
> 
> 赞同：0
> 
> 时间：2012-08-11T18:53:03.770
> 
> 标签：javascript, arrays, json, google-maps-api-3

我目前正在遍历从 Google Maps API 返回的航点数组，在以下数组中我希望访问标记为 Xa 和 Ya 的值，目前我正在这样做 -`[i]["location"]["Xa"]`但是 Xa和 Ya 并不总是相同的，有时可能是 aB 和 aC 或 Ya 和 Za 等。有没有通用的方法来访问这些值？

```
[
   {
      "location":{
         "Xa":xx.xxxxxxxxxxxxx,
         "Ya":xx.xxxxxxxxxxxxx
      },
      "stopover":true
   },
   {
      "location":{
         "Xa":xx.xxxxxxxxxxxxx,
         "Ya":xx.xxxxxxxxxxxxx
      },
      "stopover":true
   },
   {
      "location":{
         "Xa":xx.xxxxxxxxxxxxx,
         "Ya":xx.xxxxxxxxxxxxx
      },
      "stopover":true
   },
   {
      "location":{
         "Xa":xx.xxxxxxxxxxxxx,
         "Ya":xx.xxxxxxxxxxxxx
      },
      "stopover":true
   }
] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T19:08:10.817

首先，这是一个 javascript 对象（所有关联数组实际上都是 JavaScript 中的对象）。

如果您确定该`location`对象将仅包含 2 个属性，则可以使用该`for ... in`语句并确保您访问的第一个元素是 X 坐标，第二个是 Y 坐标。

参考：[https ://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for...in](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for...in)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T06:39:06.907

首先，正如 Gautham Badhrinathan 指出的那样，javascript 中没有关联数组。相反，它们是对象。（您的示例代码是 JSON，JSON 代表 JavaScript Object Notation）。

其次，.Xa 和 .Ya 是 .lat() 和 .lng() 方法的缩小名称，因此您不应该使用它们，因为它们会随着下一个版本的发布而改变。

第三， l **​​ocation**已经是一个**google.maps.LatLng()**对象，所以你可以直接使用它，如：

```
for(var i = 0 ; i < yourArray.length ; i++){
    setMarker(yourArray[i].location);

}

function setMarker(latLng){
    var marker = new google.maps.Marker({
        map: map,
        position: latLng
    })
} 
```

最后，如果您确实需要读取各个值，则应使用记录在案的方法，例如：

```
for(var i = 0 ; i < yourArray.length ; i++){
    var lat = yourArray[i].location.lat();
    var lng = yourArray[i].location.lng();

// do something with vars lat and lng
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T19:06:10.857

[在尝试使用hasOwnProperty()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/hasOwnProperty)方法提取对象之前，您可以测试以查看对象中是否存在某些属性

示例：http: [//jsfiddle.net/Fd6Ex/6/](http://jsfiddle.net/Fd6Ex/6/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T19:06:27.990

你可以这样做：

```
for(key in tab[i]["location"]) {
    if(tab[i]["location"].hasOwnProperty(key)) {
        console.log(tab[i]["location"][key]);
    }
} 
```

# javascript - 将 getJSON 更改为 JSONP

> ID：11916780
> 
> 赞同：7
> 
> 时间：2012-08-11T18:53:34.903
> 
> 标签：javascript, jquery, json, jsonp

我有这个代码：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script>
    $(document).ready(function() {
        $.getJSON('http://example.com/api/get_cats', function(fbResults) {
            document.write(fbResults.cats[0].title);
        });
    });
</script> 
```

如何更改此代码：

```
<script>
    $(document).ready(function() {
        $.getJSON('http://example.com/api/get_cats', function(fbResults) {
            document.write(fbResults.cats[0].title);
        });
    });
</script> 
```

让它像 JSONP 一样工作……这完全不同吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-08-11T18:57:08.603

实际上，您只需添加`?callback=?`，其余的由 jQuery 完成。

```
$(document).ready(function() {
    $.getJSON('http://example.com/api/get_cats?callback=?', function(fbResults) {
        document.write(fbResults.cats[0].title);
    });
}); 
```

# python - 如何将图像存储在 mongoDB 中？

> ID：11916783
> 
> 赞同：2
> 
> 时间：2012-08-11T18:53:44.337
> 
> 标签：python, django, mongodb, pymongo

我`pymongo`用来在我的 Django 项目中存储用户评论。我需要将评论图像保存到数据库中，然后将其显示在由 Django 模板生成的页面上，但是当我使用`request.FILES.get (...)`,时`read(...)`，该行不会保存在 Mongo 中，因为它没有在`utf-8`.

如何正确地将图像保存到`mongoDB`HTML 页面中，然后在 HTML 页面上显示？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-11T19:29:52.263

您可以尝试使用此 api 部分：[http ://api.mongodb.org/python/2.2.1/api/bson/binary.html](http://api.mongodb.org/python/2.2.1/api/bson/binary.html)

将它包裹在这个对象内，然后尝试插入/保存它。

**免责声明**：我从未编写过 python，所以我可能在谈论包装部分的胡言乱语，无论哪种方式，该页面都应该告诉你如何去做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T18:57:58.553

你试过[GridFS](http://www.mongodb.org/display/DOCS/GridFS)吗？它是在数据库中存储图像等二进制数据的绝佳工具。

# android - 用较少颜色表示的图像？

> ID：11916791
> 
> 赞同：1
> 
> 时间：2012-08-11T18:54:43.290
> 
> 标签：android, image, graphics, color-depth

我有人为我的 Android 应用程序创建图像 (PNG)，它们在计算机上看起来很棒。一旦我将它们加载到我的设备上，它们似乎正在减少到较低的颜色深度，因为我的渐变最终具有不同的色带。我已将图像放在 drawable-nodpi 中，我也尝试过 raw，但图像质量总是丢失。我还尝试了通过搜索推荐的 Bitmap.Config.ARGB_8888 选项。依然没有。即使我让他保存为 16 位颜色，我也会得到相同的结果。只有在他保存为 8 位之前，它看起来和我的电脑上的完全一样，但是我的图形相当缺乏。我无法想象我被迫使用 8 位图形。如何在我的应用程序中获得最佳图形？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T19:10:43.543

我终于想出了要搜索的魔术词，并在以下位置找到了答案：

[渐变在 SurfaceView 中显示为带状，但在普通 View 中看起来非常平滑](https://stackoverflow.com/questions/7774867/gradient-appears-banded-in-a-surfaceview-but-looks-very-smooth-in-a-normal-view)

我只需要打电话

```
surfaceHolder_.setFormat(PixelFormat.RGBA_8888); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T19:15:24.587

启用[抖动](http://www.curious-creature.org/2010/12/08/bitmap-quality-banding-and-dithering/)。假设您有油漆：

```
paint.setDither(true); 
```

# excel - 使用公式值导入 Excel 文件

> ID：11916794
> 
> 赞同：0
> 
> 时间：2012-08-11T18:54:58.390
> 
> 标签：excel, csv

这可能是一个基本问题，但我无法在足够具体的搜索中找到答案......

我从我们的信用卡处理公司收到一个 CSV 文件，我想在 Excel 中打开它，然后对一些数据应用公式，然后将 Excel 文件及其结果值导入 Quickbooks。可以导入具有公式值的字段吗？（不是真正的 Qucikbook 问题，而是更多关于导入 CSV 文件的一般问题）如果是这样，我怎样才能让接收程序（Qucikbooks）忽略公式？是否像在包含公式的列中不使用列标题一样简单？

提前致谢！

JC

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T16:15:29.823

用 Excel 2010 测试：

如果您确实有 CSV 文件，请添加一些公式字段。当您尝试保存文件时，Excel 会警告您将其保存为 CSV 可能会丢失工作表中的某些功能。无论如何，您都希望将其保存为 CSV。

保存后，公式将被删除，仅保存单元格中的值。

# google-chrome - Chrome：SVG 多边形动画的错误？

> ID：11916796
> 
> 赞同：1
> 
> 时间：2012-08-11T18:55:16.760
> 
> 标签：google-chrome, animation, svg, polygon

我最近创建了一个带有动画的hangman SVG 图形，你可以在这里找到它：

[http://ykg-clan.de/svg/test/hangman_old.svg](http://ykg-clan.de/svg/test/hangman_old.svg)

这在 Firefox 中完美运行 - 但在 Chrome 中，多边形和折线无法正确设置动画。

我已经通过首先将点设置为不可见然后将它们动画到所需位置来做到这一点。由于坐标的顺序，Firefox 似乎认识到我希望`x x,y y,z z`必须成为 to 。`a a,b b,c c`但是，铬没有得到它。

我怎样才能像在这里一样实现动画多边形，但也可以在 chrome 中工作？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:07:04.660

[Erik Dahlström](https://stackoverflow.com/users/109374/erik-dahlstrom)的可接受答案：

[bugs.webkit.org 上的错误报告](http://bugs.webkit.org/show_bug.cgi?id=21371)

实际上是一个错误；）。

# objective-c - 如何创建音频设备驱动程序来捕获 Mac 正在播放的声音？

> ID：11916797
> 
> 赞同：4
> 
> 时间：2012-08-11T18:55:38.843
> 
> 标签：objective-c, macos, cocoa, audiounit, iokit

我已经创建了一些代码来使用 AV Foundation 对 mov 文件进行屏幕捕获，我的下一步是记录 Mac 正在播放的声音，以便以后添加到录制的视频中。我做了一些挖掘，似乎我可能需要实现某种音频驱动程序来捕获音频。关于如何实现这一目标的任何指示？

我认为将以某种方式需要 AudioUnit 和 IOKit...

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-12T19:57:53.587

Ole Henry Halvorsen 和 Douglas Clarke所著的《[OS X 和 iOS 内核编程](http://www.apress.com/9781430235361-4892)》一书有一个例子，几乎可以做到这一点。您可以从本书的网站下载示例，本书本身当然解释了它是如何工作的。

披露：我是这本书的技术审稿人之一。（我没有收到版税等）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-18T22:35:58.893

您还应该查看 Soundflower 的源代码：

[http://code.google.com/p/soundflower/](http://code.google.com/p/soundflower/)

# php - 让我的 IDE 知道类的未声明属性，或稍后声明属性

> ID：11916799
> 
> 赞同：0
> 
> 时间：2012-08-11T18:55:53.013
> 
> 标签：php

这是一个例子：

```
class a {  
    private $arr = NULL;

    public function __construct(array $arr) {
        $this->arr = $arr;
    } 
    public function __get($name) {
        return $arr[$name];
    }
} 
```

这是一个简单的例子。我想这样做
`$class = new a();` `$class->`并按`->`我得到他声明的属性的下拉列表，但我想通过`__get()`魔术方法获得这些。以后有没有机会在代码中声明属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T18:58:50.110

您可以尝试使用文档注释中的注释“添加”它们

```
/**
 * @property int $myProperty
 */
class a {
  // class body here
} 
```

大多数 IDE 都应该理解它（我只知道 PhpStorm 和 Eclipse/PDT）。

# c# - 使用 WinForms GUI 控件的线程安全事件

> ID：11916810
> 
> 赞同：3
> 
> 时间：2012-08-11T18:58:07.913
> 
> 标签：c#, multithreading, events, delegates

我知道 GUI 组件不能从不同的线程中使用。所以你通常会做一个检查`InvokeRequired`，然后调用`Invoke`等的方法。但这是很多代码。有什么办法可以做这样的事情：`MyEvent += myDelegate`这个 myDelegate 将从分配它的线程执行？为什么 Invoke 方法只能从`Control`类中获得？我唯一的想法是制作自己的方法，如 AddDelegate (delegate.. , Control c) 或类似的东西。

知道如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T19:20:19.513

为了避免这样的重复代码，我通常会创建一个类来隔离这个逻辑。当应用程序启动时，我初始化这个类并在整个应用程序中使用它。优点是它可以在控件之外使用。

```
public static class UI
{
    private static Control internalControl;

    public static void Initialize(Control control)
    {
        internalControl = control;
    }

    public static void Invoke(Action action)
    {
        if (internalControl.InvokeRequired)
        {
            internalControl.Invoke(action);
        }
        else
        {
            action();
        }
    }
} 
```

主窗体初始化时初始化：

```
UI.Initialize(this); 
```

用法：

```
UI.Invoke(() => { this.Text = "Test"; }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T19:18:02.040

我使用了一个相当简单的方法：

```
private void execThreadSafeMethod(Control ctrl)
{
     MethodInvoker method = (MethodInvoker) delegate
     {
         //Do something that you always wanted to do :)
     }
     if(ctrl.InvokeRequired == true)
     {
          ctrl.Invoke(method);
     }
     {
          method.Invoke();
     }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T19:40:33.693

您使用的是 .Net 4 吗？如果是这样，您可以使用异步任务。

您将从创建控件的主线程的同步上下文中创建一个 TaskScheduler。

```
var uiTaskScheduler = TaskScheduler.FromCurrentSynchronizationContext(); 
```

然后，您可以在后台线程上运行的任何方法中使用它来更新主线程上的任何控件。

```
Task.Factory.StartNew(
    () => { MessageBox.Show("Message from separate thread.") }, 
    CancellationToken.None, 
    TaskCreationOptions.None, 
    uiTaskScheduler); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-16T20:48:01.430

一直在等待找到我的方法，但我没有看到它（希望我没看错）

这就是我在单独的线程中处理调用的方式：

```
this.Invoke((MethodInvoker)delegate() { /*whatever I need done*/ }); 
```

这很好，因为您可以将代码保留在适用的地方而不是乱跳

```
this.Invoke((MethodInvoker)delegate() {
    //here is some code I need to run on the main thread
    //usually making a label visible or some other bs
    //might want to resize my form or update a list box, who knows
}); 
```

# c# - 如何在下载新内容后每 n 秒比较一个字符串内容？

> ID：11916812
> 
> 赞同：0
> 
> 时间：2012-08-11T18:58:34.553
> 
> 标签：c#

我有这个代码：

```
private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
        {
            BackgroundWorker worker = sender as BackgroundWorker;
            while (true)
            {

                if ((worker.CancellationPending == true))
                {
                    e.Cancel = true;
                    break;
                }
                else
                {

                    string content = downloadContent();
                    if (InvokeRequired)
                    {
                        BeginInvoke(new Action(() => textBox1.Text = content), null);
                    }

                    GetProfileNames(content);
                    GetTextFromProfile(content);

                    reader.Close();
                    response.Close();
                    Thread.Sleep(30000);
                }
            }
        } 
```

和下载内容功能：

```
private string downloadContent()
        {
            WebRequest request = WebRequest.Create(testingUrl);
            request.Method = "GET";
            response = request.GetResponse();
            Stream stream = response.GetResponseStream();
            reader = new StreamReader(stream);
            string content = reader.ReadToEnd();
            return content;
        } 
```

我需要每 30 秒它会像现在一样下载一个新内容，存储之前的旧内容，并将新下载的内容与之前下载的内容进行比较。

如果它们相同，则不要做任何事情，如果它们不相同，请做某事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T19:02:19.143

使用 .NET 中的计时器类之一。

[`System.Timers.Timer`](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)如果您不在 winforms 上，这是一个不错的选择，但您需要了解它将在自己的线程上运行。

```
var timer = new Timer(30000); // Interval of 30 seconds
timer.Elapsed = OnTimedEvent;
timer.Start();

private static void OnTimedEvent(object source, ElapsedEventArgs e)
{
    // Update logic here.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T19:06:24.880

保留一个变量来存储最后的内容。这个变量应该放在 BGWorker DoWork 方法之外。

```
string LastContent = ""; 
```

然后，在这一行下：

```
string content = downloadContent(); 
```

添加这些以查看它们是否相同：

```
if (content == LastContent)
{
   e.Cancel=true;
   LastContent=content;
   break;
}
else
{
   //Do something if they are not equal.
} 
```

# asp.net - 将数据从一页显示到另一页

> ID：11916813
> 
> 赞同：0
> 
> 时间：2012-08-11T18:58:34.993
> 
> 标签：asp.net

我有一个页面（default.aspx），其中有一个中继器从我的数据库中获取数据，这是中继器的布局：

**默认.aspx：**

```
<asp:HyperLink ID="HyperLink1" runat="server" NavigateUrl='<%# Eval("Id","~/fullpost.aspx?Id={0}") %>'><asp:Literal ID="LitTitle" runat="server" Text='<%# Eval("Title") %>'></asp:Literal></asp:HyperLink>
                            <br />
                            <span class="textSum">
                                <asp:Literal ID="LitSummary" runat="server" Text='<%# Eval("Summary") %>'></asp:Literal></span>
                            <span class="dateTime">
                                <asp:Literal ID="Literal1" runat="server" Text='<%# Eval("CreateDateTime") %>'></asp:Literal></span> 
```

现在注意超链接，它指向**fullpost.aspx**，在此页面上，我只想显示我单击的一项（URL 指向正确，它转到**fullpost.aspx?Id= *IdNumber***），所以我尝试了以下：

**fullpost.aspx：**

```
<asp:Literal ID="Literal1" runat="server" Text='<%# Eval("Title") %>'></asp:Literal>
        <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
            ConnectionString="<%$ ConnectionStrings:orangefreshConnectionString1 %>" 
            SelectCommand="SELECT [Id], [Title], [Summary], [Body], [CreateDateTime] FROM [Post] WHERE ([Id] = @Id)">
            <SelectParameters>
                <asp:QueryStringParameter Name="Id" QueryStringField="Id" Type="Int32" />
            </SelectParameters>
        </asp:SqlDataSource> 
```

但是我的文字没有按照我的意愿显示标题，没有任何显示。我在这里到底做错了什么？

* * *

添加数据绑定控件后：

```
 <asp:FormView ID="FormView1" runat="server" DataSourceID="SqlDataSource1">
        <asp:Literal runat="server" Text='<%# Eval("Title") %>'></asp:Literal>
    </asp:FormView> 
```

我现在得到： *解析器错误消息：类型“System.Web.UI.WebControls.FormView”没有名为“Literal”的公共属性。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T19:08:49.423

`Literal1`关于 fullpost.aspx 不在[数据绑定控件](http://msdn.microsoft.com/en-us/library/ms228214.aspx)内以从`SqlDataSource`. 把它放在类似 a 的东西里面`FormView`，它的数据源设置为`SqlDataSource1`.

*编辑*示例 FormView

[FormView](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.formview.aspx)包含一个名为的标签，`<ItemTemplate>`其中包含您要显示的控件。注意：如果您使用像[Visual Web Developer](http://www.microsoft.com/visualstudio/en-us/products/2010-editions/visual-web-developer-express)这样的 IDE ，它会自动为您创建正确的标签结构。

```
<asp:FormView ID="FormView1" runat="server" DataSourceID="SqlDataSource1">
    <ItemTemplate>
        <asp:Literal runat="server" Text='<%# Eval("Title") %>' />
    </ItemTemplate>
</asp:FormView> 
```

# asp.net-mvc - ASP.MVC 应用程序常量，最好/最优雅的方法是什么？

> ID：11916814
> 
> 赞同：4
> 
> 时间：2012-08-11T18:58:40.943
> 
> 标签：asp.net-mvc, asp.net-mvc-3, architecture, constants

真的很简单的问题，

我只是在寻找在架构上最有效的社区支持。

说，以下情况：`TempData["MySetting"]`？我应该在哪里存放`"MySetting"`？应该是

1.  在单独的类中，以便访问`TempData[Config.MySetting];`
2.  在 web.config 中，以便访问`TempData[ConfigurationManager.AppSettings["MySetting"];`
3.  内联，将其保留为字符串`TempData["MySetting"];`？
4.  在数据库中的一些常量表中，这样

    ```
    var mySetting = (string)_db.GetConstant("MySetting");
    TempData[mySetting]; 
    ```

我不会处理选项 4，只是为了图片的完整性而带了它。那么你有什么建议**，为什么**？

**编辑** 问题是关于 asp mvc 中的常量而不是 TempData 案例的一般性问题。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T19:39:27.657

在您的特定情况下，您应该制作一个包装器`TempData`，将您的数据作为属性公开。所有对的访问都`TempData`应该隐藏在该包装器中。在这种情况下，所有的用法`"MySetting"`将被限制为*最多*两个。如果只有一种用法，则无需执行任何操作。如果有两个 - 你定义你`"MySetting"`的`private const`字段。

简而言之：

```
public static class TempDataWrapper
{
    private const string _mySettingName = "MySetting";

    public int MySetting
    {
        get { return (int) TempData[_mySettingName];}
        set { TempData[_mySettingName] = value;}
    }
} 
```

为简洁起见，我们在这里不处理耦合（紧密）和错误处理（没有）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-11T20:03:15.897

我会去：

```
public static class Config
{
    public static readonly string MyValue = "SomeValue";
} 
```

更多关于[Const 与 Readonly](https://stackoverflow.com/questions/755685/c-static-readonly-vs-const)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-11T19:36:00.000

您可以尝试这种方法：

```
public static class Constants
{
       public static class Actions
       {
            public const string Administration = "Administration";
       }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-11T19:25:50.973

你的设置有变化吗？取决于您部署的环境？如果是，那么您肯定希望将它们存储在 Web.config 文件中（如果它不像一对键/值对那么简单，您甚至可以创建一个自定义部分）。

如果它们在您使用的所有环境中都相同（包括您自己的开发箱、服务器和您可能想要部署的任何测试/登台机器），那么我会选择第一个选项：声明一个带有一些常量的类。

至于将它们存储在数据库中，它实际上取决于什么样的设置。如果您希望它们成为您网站的每个用户，那么您最终可能会将它们存储在您的数据库中。或者，如果您希望能够更改它们（在网站运行时编辑 web.config 文件不是最好的主意）。

我会尽量避免保持原样，内联。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-11T20:14:47.267

好吧，假设您的常量*确实是*常量，它们在运行时不会改变。对于这种情况，您可以使用`const`字段修饰符，在某些情况下使用`static readonly`修饰符来设置常量值。

```
public class MyConstants {
    public const string MyConstantNameValue = "Value";
    public const int MyConstantNameValue2 = 123;

    // prevent the class to be instantiated
    protected MyConstants() { }
} 
```

如您所见，您没有将 定义`MyConstants`为静态类，因为如果您需要另一组特定命名空间的常量（加上全局常量），您可以扩展常量。

```
public class MyConstantsPlusSpecificNamespaceConstants : MyConstants {
    public const string MySpecificConstantName = "Value2";
} 
```

# javascript - 带有正则表达式的 Javascript 模板

> ID：11916815
> 
> 赞同：1
> 
> 时间：2012-08-11T18:58:43.443
> 
> 标签：javascript, templates

我正在尝试使用客户端模板并提出以下概念：

```
<table>
    <tr bind-template="colors,<td style='color:@color'>@name</td>"></tr>
</table> 
```

我有一个 javascript 对象，如下所示：

```
var colors = [{name: 'white', color: '#FFFFFF'},{name: 'black', color: '#000000'}]; 
```

所以，从“绑定模板”属性，我可以得到实际的对象“颜色”，然后是模板本身

```
<td style='color:@color'>@name</td> 
```

我不擅长正则表达式，但我想出了以下内容：

```
<td style='color:#FFFFFF'>white</td>
<td style='color:#000000'>black</td 
```

我只是在 Array 上创建了一个原型，如下所示：

```
 Array.prototype.HelperResult = function (template, el) {
        var arr = [];
        var result = null;

        $(this).each(function (index, item) {
            result = template;
            for (var o in item) {
                if (template.indexOf('@' + o) >=0)
                {
                    result = result.replace('@' + o, item[o]);
                }
            }
            arr.push(result);
        });

        $(el).append(arr.join(''));
    }; 
```

对我来说，这似乎有点笨拙，但它有效。这是我如何调用此方法：

```
 var templates = $('[bind-template]');

        $(templates).each(function (index) {
            var attr = $(this).attr('bind-template');

            if (attr) {
                var parts = attr.split(',');
                if (parts.length == 2)
                {
                    self[parts[0]].HelperResult(parts[1], this);
                }
            }
        }); 
```

我要清理它，但我需要帮助的是想出一种更简洁的方法来从迭代中获取 @color 和 @name 的值，我猜这将是我不使用的正则表达式的方式不太清楚。

感谢您的任何想法。再一次，所有这些只是概念证明:-)

谢谢大家，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T21:21:58.040

为什么要使用正则表达式？因为他们很酷？=)

您的代码运行良好，我认为没有理由对其进行太多更改。

我想注意的唯一时刻：

1.  我确实相信在调用 replace() 之前没有理由调用 indexOf() - 最后一个会为搜索文本的出现做同样的工作，所以你做了两次工作。

2.  我想我们应该`@tagname`在模板中找到所有出现的情况，例如

    `<td id="@name">@name</td>`

所以我的重构将是：

```
-           if (template.indexOf('@' + o) >=0)
-           {
-               result = result.replace('@' + o, item[o]);
-           }

+           result = result.replace('@' + o, item[o], 'g'); 
```

PS 但是如果你想做正则表达式，你可以写

```
 result = result.replace(new RegExp('@' + o, 'g'), item[o]); 
```

并使您的代码更酷。;)

# java - 将 char 设置为 EOF

> ID：11916817
> 
> 赞同：0
> 
> 时间：2012-08-11T18:58:59.250
> 
> 标签：java

我有一个 map ( `Map<Character, Integer> map`) 作为参数传递。我想检查 map 的大小是否为 1 并且仅包含字符 EOF。

例如..

```
char c = 'EOF'; 

if(map.containsKey(c)) 
```

不管用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T19:02:51.327

字符串中没有 EOF 字符。您只需遍历字符串中的每个字符：

```
for (int i = 0; i < s.length(); i++){
    char c = s.charAt(i);        
    //Process char
} 
```

# html - 叠加图像而不影响透明

> ID：11916818
> 
> 赞同：0
> 
> 时间：2012-08-11T18:59:21.190
> 
> 标签：html, css

我想使用 css 为图像着色，但不影响其透明部分。

例如：如果我在透明背景的图像中有一个小的棕色正方形，我只想将正方形变成另一种颜色。

我找到了本指南（http://css-tricks.com/forums/discussion/10828/color-overlay-img/p1），但它也会影响透明部分。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T19:06:07.990

您可以做的是`<div>`在您想要着色的尺寸处放置图像下方。这就是我要做的：

```
<div class="image">

    <div class="colour"></div>
    <img src="[..].png" alt="Some image" />

</div> 
```

然后是 CSS：

```
.image{
    width: 100px; /* The image width */
    height: 100px; /* The image height */

    position: relative;
}

.image .colour{
    width: 30px; /* Width of the part you want to colour */
    height: 30px; /* Height of the part you want to colour */

    position: absolute;
    top: 35px; /* Y coordinate */
    left: 35px; /* X coordinate */
}

.image img{
    position: absolute;
    top: 0;
    left: 0;
    z-index: 1; /* Place above the coloured part */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T19:29:15.530

如果区域是矩形

*   在图像顶部用 bg 颜色覆盖另一个元素。

如果区域不是矩形

*   在适当的时候通过 CSS 将图像换成另一张图像。
*   在图像上覆盖另一个图像（在需要时使用透明像素）。
*   在图像顶部覆盖画布或 SVG 图像。
*   为图像使用画布或 SVG，并在需要时编辑图像。

我不相信有一种通用的方法可以单独使用 CSS（不接触 HTML，或使用超过 1 个图像文件，或使用画布或 SVG，或使用 JS 或 jQuery）。如果无法触摸 HTML 源代码，您可以使用 JS 或 jQuery 动态修改 HTML。

# php - 在 SQL 查询中插入很长的字符串 - 错误

> ID：11916820
> 
> 赞同：0
> 
> 时间：2012-08-11T18:59:40.957
> 
> 标签：php, mysql, string, insert, long-integer

问题是，每当我以我的 php 页面的形式输入一个大文本并尝试`INSERT`通过 SQL 查询到数据库中时，它都会给我一个这样的错误：

> “您的 SQL 语法有错误；请查看与您的 MySQL 服务器版本相对应的手册，以了解在“示例标题”附近使用正确的语法，“在雨季的漫长几个月里关在一个小房间里”在第 1 行"

查询是这样的：

```
$sql = "INSERT INTO `d` (`user_id`, `title`, `message`) VALUES ($user_id, '$topic', '$message')"; 
```

有趣的是，当我手动插入值并在 phpmyadmin 中运行查询时，它没有给我任何错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T19:02:49.823

我敢打赌，字符串中有单引号（ ' ）。`$topic`在您的 INSERT 中使用它之前先转义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T19:07:44.130

使用准备好的语句：

```
$db = new PDO(...);
$stmt = $db.prepare("INSERT INTO `d` (`user_id`, `title`, `message`) VALUES ($user_id, :topic, :message)");
// I'm assuming that title is a VARCHAR(50) and message is a VARCHAR(500)
$stmt->bindParam(":topic", $topic, PDO::PARAM_STR, 50);
$stmt->bindParam(":message", $topic, PDO::PARAM_STR, 500);
$stmt->execute(); 
```

这将转义/正确传递数据的工作直接交给了数据库引擎 - 这是它所属的地方。尽可能避免从用户输入构建 SQL 字符串，这样可以避免许多潜在的 SQL 注入攻击。

# django - django 添加基本 url 部分

> ID：11916821
> 
> 赞同：0
> 
> 时间：2012-08-11T19:00:39.863
> 
> 标签：django, django-urls

我正在做一个博客项目。现在当我加载 127.0.0.1 时；我看到我的主页列出了所有创建的帖子。当我单击其中一个帖子时，它正在重定向一个页面。该页面的网址如：127.0.0.1/first-post。

我想做的是，

127.0.0.1/post/first-post

我怎样才能做到这一点？

这是我的 urls.py 文件：

```
from django.conf.urls import patterns, include, url
from userside.models import Post

urlpatterns = patterns('userside.views',
    url(r'^$','index'),
    url(r'^(?P<postslug>[-\w]+)',view ='singlePost', name='view_blog_post'),
) 
```

这是我的models.py：

```
from django.db import models
from django.db.models import permalink
from autoslug import AutoSlugField

class Post(models.Model):
    title = models.CharField(max_length = 100)
    text  = models.TextField()
    slug = AutoSlugField(populate_from='title',unique=True)
    posted = models.DateField(auto_now_add=True)

    def __unicode__(self):
        return self.title

    @permalink
    def get_absolute_url(self):
        return ('view_blog_post',None, {'postslug':self.slug}) 
```

这是我的主要 urls.py：

```
from django.conf.urls import patterns, include, url

urlpatterns = patterns('',
    url(r'^', include('userside.urls')),
) 
```

这是我的views.py：

```
from userside.models import Post
from django.shortcuts import render_to_response,get_object_or_404
from django.template import RequestContext

def index(request):
    post_list = Post.objects.all().order_by("-posted")
    return render_to_response('userside/index.html',
                              {'post_list':post_list},
                              context_instance = RequestContext(request))

def singlePost(request,postslug):
    post = get_object_or_404(Post, slug=postslug)
    context = {'post':post}
    return render_to_response('userside/detail.html',context,context_instance = RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T20:04:14.483

```
url(r'^post/(?P<postslug>[-\w]+)',view ='singlePost', name='view_blog_post'), 
```

# batch-processing - 批处理限制 - 浏览菜单时的最大递归

> ID：11916823
> 
> 赞同：2
> 
> 时间：2012-08-11T19:00:48.400
> 
> 标签：batch-processing, batch-file

我在测试我的代码时遇到了一个大问题。这个问题是令人讨厌的消息...... **“超出最大递归深度”。**看看它是如何工作的：

```
@echo off

REM ---------- MAIN MENU ----------
:Main

echo 1.Supermarket
echo 2.Exit Batch

setlocal
for /f %%A in ('"prompt $H & echo on & for %%B in (1) do rem"') do set "BS=%%A"
set /p Menu=%BS% Type in your option {1,2} followed by ENTER:
if not '%Menu%'=='' set Menu=%Menu:~0,1%
if %Menu% EQU 1 ENDLOCAL & goto Super
if %Menu% EQU 2 goto EOF

REM ---------- SECONDARY MENU ----------
:Super

echo 1.Supermarket
echo   a.Apple
echo   b.Banana

setlocal
for /f %%A in ('"prompt $H & echo on & for %%B in (1) do rem"') do set "BS=%%A"
set /p Menu=%BS% Type in your option {1,a,b} followed by ENTER:
if not '%Menu%'=='' set Menu=%Menu:~0,1%
if %Menu% EQU 1 ENDLOCAL & goto Main
if %Menu% EQU a ENDLOCAL & goto App
if %Menu% EQU b ENDLOCAL & goto Ban

:App

 setlocal enabledelayedexpansion
 set /a cnt=0
 for /f "tokens=* delims= " %%a in (*.apple) do (set /a cnt+=1)
 if %cnt% EQU 0 (
 echo There are %cnt% apples & pause>nul & ENDLOCAL & goto Main
 ) else (
 echo There are %cnt% apples

 [... do many things and after 200 lines]

 echo The total number of apples was %cnt% & pause>nul & ENDLOCAL & goto Main

:Ban
echo This is Banana & pause>nul & goto Main

:EOF 
```

让我们假设用户连续遵循这个序列：

1 --> a (第一次) --> 1 --> a (第二次) --> 1 --> a (第三次) etc etc 1 --> a (第八次) --> 1 - -> a（第九次），此时，您将获得**“超出最大递归深度”。**信息。如果您一直忽略此消息，则代码的内部计算将开始表现出奇怪的行为，甚至“显然”似乎已经产生了良好的结果

事实上，顺序无关紧要。如果您在字母“a”和“b”之间不断变化，或者“a”多于“b”，也会发生同样的事情：

1 --> b (第一次) --> 1 --> a (第二次) --> 1 --> a (第三次) ... 1 --> a (第八次) --> 1 - -> b（第九次）。再次**“超出最大递归深度”。**信息

此外，如果用户不断地输入选项 1（总是只停留在 MAIN MENU），则在第 12 次试用后会弹出错误消息。

如何保持与上面相同的代码结构但避免此错误？我在这里简化，但我说的是一批几百行代码和几个二级、三级、四级等子菜单。

谢谢，
马莱克

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-11T21:26:47.220

我在您发布的代码中看不到任何递归，毫不奇怪，我无法让代码失败。

您必须在没有显示导致问题的代码中进行递归。

我知道批处理文件有两种类型的致命递归错误：

1) SETLOCAL 最多限制为 32 级。尝试在不发出 ENDLOCAL 的情况下第 33 次使用 SETLOCAL 将导致以下致命错误消息：

`Maximum setlocal recursion level reached.`

我怀疑这是您达到的递归限制。

**更新：** ***实际上，每个 CALL 级别的限制是 32 SETLOCAL。有关更多信息，请阅读[http://ss64.org/viewtopic.php?id=1778上的整个线程](http://ss64.org/viewtopic.php?id=1778)***

2) 如果在其中任何一个返回之前发出太多 CALL，CALL 递归可能会失败。每当到达脚本、EXIT /B 或 GOTO :EOF 的末尾时，批处理都会从 CALL 中返回。递归调用的最大数量取决于机器。（可能与代码有关？）错误消息如下所示：

```
******  B A T C H   R E C U R S I O N  exceeds STACK limits ******
Recursion Count=600, Stack Usage=90 percent
******       B A T C H   PROCESSING IS   A B O R T E D      ****** 
```

可能有一些系统配置可以增加您可以进行的递归调用的数量，但总会有一些上限。

* * *

如果您达到递归限制，那么除了重构代码之外，您真的别无选择。但是除非您展示您的递归代码，否则我们很难（就我而言几乎不可能）为您提供解决问题的方法。

* * *

**编辑以响应更新的问题和评论**

这是您需要遵循的一般规则：如果您有一个代码循环，那么每个 SETLOCAL 都必须与一个 ENDLOCAL 配对。循环可以由 GOTO 创建，也可以是 FOR 循环。

您正在大量使用 GOTO 循环。您成功地确定在发出 SETLOCAL 之后，您必须在执行循环返回的 GOTO 之前发出 ENDLOCAL。在我看来，你解决了这个问题。

* * *

**最后一个编辑 - 使用 CALL 简化逻辑**

当您使用 GOTO 循环时，要准确跟踪必须发出 ENDLOCAL 的位置和次数是很痛苦的。如果您使用 CALL 代替，逻辑会简单得多，并且代码也更有条理。

一旦例程结束，在执行 CALL 子例程期间发出的所有 SETLOCAL 语句都会隐式结束。使用 CALL 时无需显式使用 ENDLOCAL。

下面我展示了如何重构您的代码以使用 CALL。研究所有代码——我做了一些我认为简化和/或改进逻辑的其他方面的细微更改。

```
@echo off
setlocal
:: Define the BS variable just once at the beginning
for /f %%A in ('"prompt $H & echo on & for %%B in (1) do rem"') do set "BS=%%A"

:Main  ---------- MAIN MENU ----------
:: ECHO( echoes a blank line
echo(
echo Main Menu
echo   1.Supermarket
echo   2.Exit Batch
:: If user hits ENTER without entering anything then current value remains.
:: So clear the value to make sure we don't accidently take action based
:: on prior value.
set "Menu="
set /p Menu=%BS% Type in your option {1,2} followed by ENTER:
if defined Menu set "Menu=%Menu:~0,1%"
if "%Menu%" EQU "1" call :Super
if "%Menu%" EQU "2" exit /b
goto :Main

:Super ---------- SECONDARY MENU ----------
setlocal
echo(
echo Supermarket
echo   a.Apple
echo   b.Banana
echo   1.Retutn to Main
set "Menu="
set /p Menu=%BS% Type in your option {1,a,b} followed by ENTER:
if defined Menu set "Menu=%Menu:~0,1%"
:: Use IF /I option so case does not matter
if /i "%Menu%" EQU "1" exit /b
:: Note that :App and :Ban are still logially part of this subroutine
:: because I used GOTO instead of CALL. When either :App or :Ban ends, then
:: control will return to the Main menu
if /i "%Menu%" EQU "a" goto :App
if /i "%Menu%" EQU "b" goto :Ban
goto :Super

:App
setlocal enableDelayedExpansion
set /a cnt=0
for /f "tokens=* delims= " %%a in (*.apple) do (set /a cnt+=1)
echo There are %cnt% apples
if %cnt% GTR 0 (
 REM ... do many things and after 200 lines
 echo The total number of apples was %cnt%
)
pause>nul
exit /b
:: The EXIT /B above returns to the Main menu (ends the CALL to :Super)
:: Note that the SETLOCAL at the start of :Super and the one at the
:: start of :App are implicitly ended. No need to explictly issue
:: ENDLOCAL.

:Ban
echo This is Banana
pause>nul
exit /b
:: The EXIT /B above returns to the Main menu (ends the CALL to :Super)
:: Note that the SETLOCAL at the start of :Super is implicitly ended.
:: No need to explictly issue ENDLOCAL. 
```

# algorithm - 准备与大数据相关的设计和架构问题的最佳方法

> ID：11916824
> 
> 赞同：5
> 
> 时间：2012-08-11T19:00:58.427
> 
> 标签：algorithm, data-structures, bigdata

最近，我参加了一家公司的现场面试，并被问到与大数据相关的设计问题，例如：获取在时间 t1 和 t2 之间访问网站（比如谷歌）的用户列表。使用什么数据结构，如何处理并发，陈旧数据，需要多少台服务器来存储数据，以及每台服务器的需求（软件，硬件）等等......

请给我一些书籍/网络参考资料，以增加我在这个新领域的知识。还为我提供有关如何回答此类设计问题的见解

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T01:34:27.783

[这本书（免费下载）](http://i.stanford.edu/~ullman/mmds.html)（亚马逊：[海量数据集的挖掘](https://rads.stackoverflow.com/amzn/click/com/1107015359)）刚刚发布到[HN](http://news.ycombinator.com/item?id=4370666)（该线程也有一些有用的评论）——从第一次浏览开始，它看起来非常好。你可以读一下。

# c# - 如何从 tt 宏引用程序集

> ID：11916825
> 
> 赞同：0
> 
> 时间：2012-08-11T19:01:28.350
> 
> 标签：c#, .net, visual-studio-2010, t4

给定以下 tt 宏：

```
<#@ template debug="false" hostspecific="true" language="C#" #>
<#@ output extension=".xml" #>
<#@ assembly name="$(TargetPath)" #>
<#@ import namespace="System.Reflection" #>
<#
AssemblyInfoHelper assemblyInfo = new AssemblyInfoHelper(Assembly.LoadFrom(@"H:\My Projects\TestApp\bin\Windows Phone\Debug\TestApp.dll"));
#>
<?xml version="1.0" encoding="utf-8"?>
<Deployment xmlns="http://schemas.microsoft.com/windowsphone/2009/deployment" AppPlatformVersion="7.0">
...
</Deployment> 
```

...我想使用 $(TargetPath) 的内容而不是硬编码程序集的完整路径来加载程序集...这可能吗？

非常感谢任何帮助:-)

谢谢j3d

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T18:46:48.470

如果您已经使用 $(TargetPath) 语法使用程序集指令加载程序集，那么您可以从程序集中选择一个类型，执行 typeof(Foo) 并从那里进入反射图，而不是再次引用路径.

# java - 无法在摆动中水平显示 2 个 JTable

> ID：11916830
> 
> 赞同：1
> 
> 时间：2012-08-11T19:02:05.057
> 
> 标签：java, swing, layout, layout-manager

我需要`JTable`沿 x 轴显示 2 。我能够垂直显示它们（Y 轴）。这是我到目前为止所做的：

![显示两个表。](../Images/4daf881f0dcb88fd45cf8dd051e9ef9b.png)

但我想显示如下表格，

![在此处输入图像描述](../Images/6cb62d64e0f49b6b17d4dd1934739bf3.png)

这是我的代码：

```
 tableA = new JTable(data, colNames);
    tableB = new JTable(data, colNames);

    JLabel labelA = new JLabel("Table-A");
    JLabel labelB = new JLabel("Table-B");

    JButton bt_copy = new JButton("Copy");

    Container c = frame.getContentPane();

    c.setLayout(new BoxLayout(c, BoxLayout.Y_AXIS));

    c.add(labelA);
    c.add(tableA.getTableHeader());
    c.add(tableA);

    c.add(labelB);
    c.add(tableB.getTableHeader());
    c.add(tableB);

    c.add(bt_copy); 
```

当我将 Y-axis 更改**`c.setLayout(new BoxLayout(c, BoxLayout.Y_AXIS));`**为**X-axis**时。我真的有一个糟糕的 GUI 视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T19:39:27.330

我建议使用 a`GridBagLayout`而不是`BoxLayout`. 而不是将所有内容添加到 a`JFrame`本身，而是尝试将 a 添加`JPanel`到框架并将您的表格添加到框架中。（*这意味着您将面板的布局设置为`GridBagLayout`*）。

如果您不熟悉布局管理器，请尝试阅读[布局管理器视觉指南](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html#box)。这是非常有用的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T21:18:38.037

像这样的东西？？

![布局](../Images/bd24be5a13887aea2e502f7f08c7ab55.png)

```
JTable leftTable = new JTable();
JTable rightTable = new JTable();

addButton = new JButton("Add >>");
removeButton = new JButton("<< Remove");

setLayout(new GridBagLayout());

// Prepare the buttons panel...
JPanel pnlActions = new JPanel(new GridBagLayout());
pnlActions.setBorder(new LineBorder(Color.RED));
GridBagConstraints gbc = new GridBagConstraints();
gbc.gridx = 0;
gbc.gridy = 1;
gbc.anchor = GridBagConstraints.SOUTH;
gbc.weighty = 1;
gbc.fill = GridBagConstraints.HORIZONTAL;
pnlActions.add(addButton, gbc);
gbc.weighty = 0;
gbc.gridy++;
pnlActions.add(removeButton, gbc);

// Prepare the main layout
gbc = new GridBagConstraints();
gbc.gridx = 0;
gbc.gridy = 0;
gbc.weightx = 0.33;
gbc.fill = GridBagConstraints.BOTH;
gbc.weighty = 1;

add(new JScrollPane(leftTable), gbc);
gbc.gridx = 2;
add(new JScrollPane(rightTable), gbc);

gbc.gridx = 1;
gbc.gridy++;
gbc.fill = GridBagConstraints.HORIZONTAL;
gbc.weighty = 0;
add(pnlActions, gbc); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T20:49:12.933

尝试对 contentPane 使用 Box。您需要使用组合框来获得所需的布局。这是一个应该让你接近的例子：

```
tableA = new JTable(data, colNames);
tableB = new JTable(data, colNames);

JLabel labelA = new JLabel("Table-A");
JLabel labelB = new JLabel("Table-B");

JButton bt_copy = new JButton("Copy");

Box v = Box.createVerticalBox();
frame.setContentPane(v);

Box c = Box.createHorizontalBox();
v.add(c);

JScrollPane jsp = new JScrollPane(tableA);
c.add(jsp);

jsp = new JScrollPane(tableB);
c.add(jsp);

Box c2 = Box.createHorizontalBox();
c2.add(Box.createHorizontalGlue());
c2.add(bt_copy);
c2.createHorizontalGlue();

v.add(c2); 
```

# c++ - QPlainTextEdit 抛出 std::bad_alloc

> ID：11916836
> 
> 赞同：1
> 
> 时间：2012-08-11T19:02:22.870
> 
> 标签：c++, qt, qtextdocument, qplaintextedit

我有一个程序可以运行适合某些数据的最小二乘法。此过程在单独的线程中运行，并通过对话框进行控制。这个对话框有一个 QPlainTextEdit 显示拟合更新和最终报告。

该对话框是在 Qt Designer 中创建的，代码在 QtCreator 中运行，我的 Qt 版本是 4.8.1。

我遇到的问题有点不稳定。当我第一次运行该程序时，一切都很好。然后，如果我再次运行它，有时程序会因消息而崩溃

抛出 'std::bad_alloc' 的实例后调用终止 what(): std::bad_alloc 程序意外完成。

我将问题跟踪到对 QPlainTextEdit 的 clear() 方法的调用。这是一些代码。

```
// Snippets of the class definition
class QLSQDialog : public QDialog, public Ui_QLSQDialog
{
  Q_OBJECT
public:
  QLSQDialog(QWidget *parent = 0);
  (...)
  void UpdateDisplay(const QString &msg, int iter, double norm);  // Update values of chi, etc on displays
signals:
  void Run();           // Signal to run a LSQ procedure
  (...)
private slots:
  void on_btnRun_clicked();
  (...)
private:
  void Enables(bool running);   // Enable and disable features depending on running state of LSQ fit
  (...)
};

// Snippets of the class implementation

QLSQDialog::QLSQDialog(QWidget *parent) : QDialog(parent)
{
  setupUi(this);          // Set up dialog
  (...)
  txtInfo->clear();  // txtInfo is a QPlainTextEdit created in Designer
  (...)
}

void QLSQDialog::UpdateDisplay(const QString &msg, int iter, double norm)
{
  lblChi->setText(QString::number(norm,'f',12));
  if (iter >= 0) lblIt->setText(QString::number(iter));
  txtInfo->appendPlainText(msg);
}

void QLSQDialog::on_btnRun_clicked()
{
  txtInfo->clear();   // Offending line in second run
  Enables(true);
  emit Run();
}

void QLSQDialog::Enables(bool running)
{
  bool Idle = !running;
  bool HasReport = !txtInfo->document()->isEmpty();
  (...)
  btnReport->setEnabled(Idle && HasReport);
} 
```

`txtInfo`是 QPlainTextEdit 对象。我在创建对象时调用 a`txtInfo->clear()`以显示空文本编辑。当我单击“运行”工具按钮时，其默认插槽会发出一个运行信号，该信号将启动新线程。QPlainTextEdit`txtInfo`在这个线程中更新，直到它完成（实际上线程发出一个信号，该信号在主应用程序中被捕获，该主应用程序又调用`UpdateDisplay`）。

如果我再次单击运行按钮，则会出现崩溃和错误。如果我替换`txtInfo->clear()`, `txtInfo->document()->clear()`, by`txtInfo->setPlainText("")`或 by`txtInfo->document()->setPlainText("")`问题是相同的（第二次执行时崩溃）。偶尔但不经常，我可以在崩溃之前运行几次（大约 10 次）。

最后，如果我注释掉该`txtInfo->clear()`行，那么我可以尽可能多地运行该例程（在一次测试中，我在运行它大约 80 次后感到疲倦）。

我唯一的（几乎是随机的）猜测是问题与线程的更新有关（它发出一个被捕获的信号，然后只是调用`UpdateDisplay`函数）。我这么认为的原因是，如果我注释掉信号并创建一个新按钮来调用`UpdateDisplay`一些虚假信息，一切都很好。

违规行之前的A`qApp->processEvents()`无效。

我被困在这里。欢迎任何想法。例如，我可以做任何测试来验证调用该`clear()`方法是否正常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T12:45:32.240

我终于将这个问题归结为我的代码中令人讨厌的内存泄漏。我“修复”了代码，但我仍然对为什么会发生问题感到有些困惑。

基本上，我在某处创建了一个大的`vector<double>`并将其地址传递给一个调用`vector<double> *`变量的函数。问题是在函数完成使用之前原始向量不再存在。经典的愚蠢错误。可能该`QPlainTextEdit`文档在过去的区域中分配空间`vector<double>`：预期的不稳定行为。但我没想到会崩溃。

该向量是“只读的”。使用它的函数只读取值并将计算存储在其他地方。现在让我们假设纯文本在之前由`vector<double>`. 在这种情况下，当我`QPlainTextEdit::clear()`使用纯文本文档时，向量先前指向的值会发生变化，我希望计算是没有意义的。当函数访问现在已故的指向`vector<double>`. 但是我不希望程序在我清除文本时崩溃，毕竟这是一个有效的指针。

无论如何，如果有人有这个想法，我很想知道为什么会发生崩溃。但除此之外，一旦泄漏被修复，问题就消失了。当然，知道原因绝对不是不修复泄漏的借口。

# postgresql - 如何动态执行 PostgreSQL RAISE 命令

> ID：11916838
> 
> 赞同：14
> 
> 时间：2012-08-11T19:02:30.080
> 
> 标签：postgresql, exception-handling, plpgsql

如果满足某些条件，如何从 PostgreSQL SQL 语句中引发错误？
我尝试了下面的代码，但出现错误。

```
CREATE OR REPLACE FUNCTION "exec"(text)
  RETURNS text AS
$BODY$ 
    BEGIN 
      EXECUTE $1; 
      RETURN $1; 
    END; 
$BODY$
  LANGUAGE plpgsql VOLATILE;

-- ERROR:  syntax error at or near "raise"
-- LINE 1: raise 'test' 

SELECT exec('raise ''test'' ') WHERE TRUE 
```

在实际应用`TRUE`中被某些条件所取代。

**更新**

我试图扩展答案以传递异常消息参数。尝试了下面的代码，但出现语法错误。如何传递消息参数？

```
CREATE OR REPLACE FUNCTION exec(text, variadic ) 
  RETURNS void LANGUAGE plpgsql AS 
$BODY$  
BEGIN  
   RAISE EXCEPTION  $1, $2;  
END;  
$BODY$; 

SELECT exec('Exception Param1=% Param2=%', 'param1', 2 ); 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-11T23:16:39.463

您不能在 PL/pgSQL 中`RAISE`动态调用 (with `EXECUTE`) - 这仅适用于 SQL 语句，并且[`RAISE`](https://www.postgresql.org/docs/current/plpgsql-errors-and-messages.html#PLPGSQL-STATEMENTS-RAISE)是 PL/pgSQL 命令。

改用这个简单的函数：

```
CREATE OR REPLACE FUNCTION f_raise(text)
  RETURNS void
  LANGUAGE plpgsql AS
$func$
BEGIN
   RAISE EXCEPTION '%', $1;
END
$func$; 
```

称呼：

```
SELECT f_raise('My message is empty!'); 
```

有关的：

*   [使用上下文生成异常](https://dba.stackexchange.com/a/7598/3684)

### [评论](https://stackoverflow.com/questions/11916838/how-to-execute-postgresql-raise-command-dynamically/11918424#comment15872969_11918424)的附加答案

```
CREATE OR REPLACE FUNCTION f_raise1(VARIADIC text[])
  RETURNS void
  LANGUAGE plpgsql AS
$func$
BEGIN 
   RAISE EXCEPTION 'Reading % % %!', $1[1], $1[2], $1[3];
END
$func$; 
```

称呼：

```
SELECT f_raise1('the','manual','educates'); 
```

*   `VARIADIC`不是数据类型，而是[参数模式](https://www.postgresql.org/docs/current/sql-createfunction.html)。

*   必须像处理任何其他数组元素一样处理元素。

*   `RAISE`要在语句中使用多个变量，请将多个变量`%`放入消息文本中。

如果没有`$3`通过，上面的示例将失败。您必须从可变数量的输入元素中组装一个字符串。例子：

```
CREATE OR REPLACE FUNCTION f_raise2(VARIADIC _arr text[]) 
  RETURNS void
  LANGUAGE plpgsql AS 
$func$  
DECLARE
   _msg text := array_to_string(_arr, ' and ');  -- simple string construction
BEGIN  
   RAISE EXCEPTION 'Reading %!', _msg;
END
$func$; 
```

称呼：

```
SELECT f_raise2('the','manual','educates'); 
```

我怀疑你根本不需要一个`VARIADIC`参数。在这里阅读[手册](https://stackoverflow.com/questions/11916838/how-to-execute-postgresql-raise-command-dynamically/11918424#comment15872969_11918424)。
相反，定义所有参数，也许添加默认值：

```
CREATE OR REPLACE FUNCTION f_raise3(_param1 text = ''
                                  , _param2 text = ''
                                  , _param3 text = 'educates')
  RETURNS void
  LANGUAGE plpgsql AS
$func$
BEGIN
   RAISE EXCEPTION 'Reading % % %!', $1, $2, $3;
END 
$func$; 
```

称呼：

```
SELECT f_raise3('the','manual','educates'); 
```

或者：

```
SELECT f_raise3();  -- defaults kick in 
```

# javascript - Javascript 表单查询

> ID：11916841
> 
> 赞同：-3
> 
> 时间：2012-08-11T19:02:41.850
> 
> 标签：javascript, forms, http, post, request

如何使用 javascript 设置预先存在的表单的属性，然后执行表单以接收响应？

基本上，有一个搜索目录，我想将电子邮件输入并接收该人所在部门的输出。

这是表格。

```
<form name="frm" action="/directory/" method="post" enctype="multipart/form-data">
   <input type="text" size="30" name="search" value="" />
   <button id="submit" type="submit">Search</button>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T19:07:21.670

```
var form = document.getElementById("formID"); // get form
form.setAttribute("action" /* desired attribute */, "url.com"); // set attribute
form.submit(); // submit form 
```

# jquery - JSON函数发送成功后如何执行JQuery函数？

> ID：11916845
> 
> 赞同：0
> 
> 时间：2012-08-11T19:02:55.260
> 
> 标签：jquery, jquery-plugins, struts2

我使用 struts2-jquery-plugin 和 struts2-json-plugin。

我的问题是**jQuery 函数在我的动作类中的动作函数之前执行**。

1) 我的 JSP 页面上定义的 jQuery 函数由**onchange=verifyChosenLanguage(this.value)**调用。

2）在我的动作类 LanguagesForm.java 中定义的动作函数是**loadLanguages**，它由**onChangeTopics="reloadFrameworks"**调用。

3) 在 LanguagesFormAction.java 中，我定义了一个布尔变量 FrameworksExist。因此，如果 DAO 函数告诉我它存在所选语言的框架，我设置**FrameworksExist=true**，否则为 false。因此，在 jQuery 函数中，我测试 FrameworksExist==true 或 FrameworksExist==false。

但不幸的是，我注意到事件**onchange 在 loadLanguages 发送“成功”之前被调用。所以我的函数仍然发现 FrameworksExist==false。**

在选择触发的操作函数的返回字符串（成功）之后，我该怎么做才能执行我的 jQuery 函数？

jQuery函数：

```
function verifyChosenLanguage(value){
  var someText = '<s:property value="FrameworksExist"/>';
  alert(" FrameworksExist = "+someText+"what"); // this gives me always "false"
} 
```

形式的双重选择：

```
<s:url id="remoteurl1" action="loadLanguages"/>
<sj:select 
  onchange="verifyChosenLanguage(this.value)"                   
  href="%{remoteurl1}"                          
  label="Category "                     
  id="IdChosenLanguage"                 
  name="IdChosenLanguage"   
  onChangeTopics="reloadFrameworks"         
  list="languages"                      
  listKey="lang_id"             
  listValue="lang_name"                     
  emptyOption="false"                           
  headerKey="None"                          
  headerValue="Select a language"
/> 

<s:url id="remoteurl2" action="loadLanguages"/> 
<sj:select                                      
  href="%{remoteurl2}"
  label="Framework "                        
  id="IdChosenFramework"
  name="IdChosenFramework"                  
  formIds="formLanguages"           
  reloadTopics="reloadFrameworks"                   
  list="frameworks" 
  listKey="frame_id"                        
  listValue="frame_name"                    
  emptyOption="false"                           
  headerKey="None"                          
  headerValue="Select a Framework"
/> 
```

LanguagesFormAction.java：

```
@Actions( {
  @Action(value = "/loadLanguages", results = {
    @Result(name = "success", type = "json")
  })
})
public String loadLanguages(){

  // instructions
  if ( (languageDAO.countFrameworks(Long.valueOf(IdChosenLanguage)!=0){
    FrameworksExist=true;
  }
  else{
    FrameworksExist=false;
  }
  // instructions
  return "success";
}
public String getJSON()
{
   return loadLanguages();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T19:40:43.240

`FrameworksExist`加载 JSP 时会评估 jQuery 函数中的值。 请记住，您使用了常规的 struts2 属性标记，它不能基于对操作的 ajax 调用神奇地更改或重新加载其值。

```
function verifyChosenLanguage(value){
  var someText = '<s:property value="FrameworksExist"/>'; // <-- Evaluated on first load of your JSP
  alert(" FrameworksExist = "+someText+"what"); // Does not change based on ajax calls      
} 
```

该`loadLanguages`操作仅更改您的`<sj:select>`项目的值，因为这就是它所适用的全部。`loadLanguages`按您的方式调用**不会更新 JSP 页面上的所有值**。

编辑：

如果您想`FrameworkExists`从您的选择输入交互中获取价值，您可以通过执行以下操作订阅适当的主题：

```
$.subscribe('topicName', function(event,data) {
    // Parse for and prcess your FrameworkExists data here as you wish.
}); 
```

您可以在[演示站点上查看](http://struts.jgeppert.com/struts2-jquery-showcase/index.action)*带有 JSON 结果的远程链接*的示例。

# cocoa - NSPopupButton 上的焦点环不会出现在按下选项卡上

> ID：11916847
> 
> 赞同：1
> 
> 时间：2012-08-11T19:02:59.300
> 
> 标签：cocoa, focus, osx-lion, nspopupbutton, tab-ordering

我有几个`NSPopupButtons`观点，它们被定义为一个`newKeyView`文本字段之后。问题是，当他们按下标签按钮时，不知何故他们没有得到对焦环，就像他们被忽略了一样。应该怎么做才能让他们获得对焦环？

谢谢，

纳瓦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T01:22:08.357

OSX 中的默认行为是只有某些控件可以通过 tab 键导航。您可以在系统偏好设置的键盘偏好设置面板中更改此设置。在“键盘快捷键”选项卡中，选择“所有控件”单选按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-25T02:27:51.177

您可以创建 NSPopupButton 的子类并覆盖方法 canBecomeKeyView，返回 YES。我使用python的代码：

```
class ComboBox(AppKit.NSPopUpButton):
    def canBecomeKeyView(self):
        return True 
```

# c++ - 创建一个可以运行的DLL

> ID：11916848
> 
> 赞同：3
> 
> 时间：2012-08-11T19:03:33.460
> 
> 标签：c++, visual-c++

Windows 有一个名为 rundll32.exe 的实用程序，可以将本机动态链接库作为应用程序执行。

假设我有一段代码打印“Hello World！” 到控制台。是否可以用 C++（最好是 Visual C++）编写一个可以使用 rundll32.exe 执行并运行此代码的库？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-11T19:41:48.307

谷歌搜索“rundll32”，第三次点击是文档链接，

[http://support.microsoft.com/kb/164787](http://support.microsoft.com/kb/164787)

根据该文档，`rundll32`调用具有类似签名的用户指定函数`wWinMain`（除了这里的第一个参数是窗口句柄而不是实例句柄），

```
void CALLBACK
EntryPoint(HWND hwnd, HINSTANCE hinst, LPSTR lpszCmdLine, int nCmdShow); 
```

所以，试试这个：

```
// File [foo.def]
EXPORTS
    sayHello 
```

```
// File [foo.cpp]
#include <iostream>

namespace myCode {

    void sayHello()
    {
        using namespace std;
        cout << "Hello, world!" << endl;
    }

}    // namespace myCode

#undef UNICODE
#define UNICODE
#include <windows.h>

extern "C" 
__declspec( dllexport )
void CALLBACK sayHello( HWND, HINSTANCE, wchar_t const*, int )
{
    AllocConsole();
    freopen( "CONIN$", "r", stdin ); 
    freopen( "CONOUT$", "w", stdout ); 
    freopen( "CONOUT$", "w", stderr ); 

    DWORD const infoBoxOptions = MB_ICONINFORMATION | MB_SETFOREGROUND;
    MessageBox( 0, L"Before call...", L"DLL message:", infoBoxOptions );
    myCode::sayHello();
    MessageBox( 0, L"After call...", L"DLL message:", infoBoxOptions );
} 
```

构建和运行：

```
[d:\开发\测试]
> cl foo.cpp foo.def user32.lib /MD /LD /D _CRT_SECURE_NO_WARNINGS
foo.cpp
   创建库 foo.lib 和对象 foo.exp

[d:\开发\测试]
> rundll32 foo.dll,sayHello

[d:\开发\测试]
> _

```

输出显示在其自己的控制台窗口中，通过 创建`AllocConsole`，这通常是必要的，因为 rundll32 是一个 GUI 子系统程序（这也是`freopen`调用的原因）。

要在现有控制台窗口中显示输出，只需省略对`AllocConsole`and的调用`freopen`，并将标准输出重定向`rundll32`到管道。`more`例如，当输出只有几行时，标准输出可以通过 Windows 进行管道传输，或者通过一些 *nix-utility`cat`来传输更多行。但是，在标准命令解释器 [cmd.exe] 中，仅将输出重定向到`con`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-11T19:08:16.553

[http://support.microsoft.com/kb/164787](http://support.microsoft.com/kb/164787)

这篇 MSDN 文章我相信还是准确的；您将入口点定义为

```
 void CALLBACK EntryPoint(HWND hwnd, HINSTANCE hinst, LPSTR lpszCmdLine, int nCmdShow); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-12T00:17:56.927

虽然可以使用 rundll32 在 DLL 中运行设计合理的函数，但不建议这样做。这样做意味着您的 DLL 受 rundll32 的进程设置（大地址感知、终端服务感知、DPI 感知、提升清单等）的支配。更糟糕的是：如果其他一些 rundll32 进程触发了应用程序兼容性行为（例如低碎片heap），那么这将影响包括您的所有 rundll32 进程。

只需编写一个单独的EXE。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T19:45:21.520

就像乔和你自己所说的那样，使用这样的东西：

```
 void CALLBACK func(HWND hwnd, HINSTANCE hinst, LPSTR lpszCmdLine, int nCmdShow) 
 { 
   std::cout << "Hello world!" << std::endl; 
 } 
```

但是，CALLBACK = __stdcall，当您的“func”被导出时，它将更改为 _func@16

您可以更改此名称，[http://support.microsoft.com/kb/140485](http://support.microsoft.com/kb/140485)

所以，你可能想尝试类似的事情：

```
rundll32.exe DLLTest.dll,_func@16 
```

# kendo-ui - 更新超过 40 行时，Kendo 批量编辑网格失败

> ID：11916849
> 
> 赞同：1
> 
> 时间：2012-08-11T19:03:35.993
> 
> 标签：kendo-ui

我有一个`Kendo UI for MVC`批量编辑网格，一旦我更新了大约 40 多行数据，它就不会更新到服务器。我可以单独或一次更新每一行，但是一旦我有超过 40 行，它就会在`jquery.1.7.2.js script`. 我已经验证我使用的数据不是问题。我有一张剑道的票，但他们说没有这样的限制。有 13 列，但我只更新其中的 6 列，我已将大多数字符串列中的数据硬编码为“测试”，以尽量减少数据量。

有没有人拥有批量编辑网格并且可以同时更新超过 50 行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T15:12:45.833

解决。这不是行数，而是密钥对的数量。默认设置为 1000 以阻止拒绝服务攻击。这是 MS 的一篇文章的链接，该文章解释了该问题。[女士文章](http://go.microsoft.com/fwlink/?LinkId=238386)

简而言之，这是网络配置文件中的设置，我将值提高到 10,000 并停止出现错误。

```
<configuration>
<appSettings>
<add key="aspnet:MaxHttpCollectionKeys" value="10000" />
</appSettings>
</configuration> 
```

# kinect - 对 Kinect/NET 一无所知，获取身体位置数据有多难？

> ID：11916850
> 
> 赞同：3
> 
> 时间：2012-08-11T19:03:39.457
> 
> 标签：kinect

朋友们请我帮助他完成一个项目，并试图了解使用 Kinect 平台使用 .NET 平台获取身体位置数据是多么容易。例如，Kinect 是否只提供传感器范围内运动的原始数据流，或者它是否可以选择使用“智能”数据流来识别人、人的元素以及人/元素的位置变化。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-11T20:06:02.213

每个被跟踪的骨架都有自己的唯一 ID。从骨架中，您可以获得跟踪的每个关节的位置（轴 x、y、z）。这不是一个简单的数据流，而是一组复杂的数据

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T17:04:59.507

我知道这已经得到了回答，但我只是想指出，如果您在[Kinect user Detection](https://stackoverflow.com/questions/10577862/kinect-user-detection/10584231#10584231)上看到我的回答，您也可以使用`PlayerIndex`JuergeonD 也在[Kinect SDK player detection](https://stackoverflow.com/questions/10562554/kinect-sdk-player-detection/10562574#10562574)上解释的那个。希望这可以帮助！

# c# - 为什么 ItemCollection.Groups 是对象的集合而不是 CollectionViewGroups？

> ID：11916854
> 
> 赞同：8
> 
> 时间：2012-08-11T19:04:39.043
> 
> 标签：c#, wpf

我的意思是有没有它的项目不是的情况`CollectionViewGroup`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T21:38:55.713

这将限制`ItemCollection.Groups`未来的使用。现在所有元素可能总是存在`CollectionViewGroup`，如果您需要使用接口，您可以将对象转换为`CollectionViewGroup`.

# java - 使用 ArrayList 中的空格打印字符串不正确

> ID：11916856
> 
> 赞同：1
> 
> 时间：2012-08-11T19:04:57.970
> 
> 标签：java, console-application

我玩这个游戏，你可以在其中收集数百个道具，而在不记住它们的情况下知道它们做什么的唯一方法就是查找它们。正因为如此，我试图让自己成为一个“助手”程序，我可以在其中输入电源名称并获得它的效果。

下面是去掉了无用部分的完整代码。输出示例如下。如果您查看输出，问题应该是相当明显的。我可以用什么方法来解决这个问题，或者我做错了什么？

```
import java.util.ArrayList;
import java.util.Scanner;

public class ProgMain {

 // // *** ------------*** and any variations indicate a change of importance or use

  public static ArrayList<String> itemlist; // ArrayList of items to cycle through to see if item exists in database.

  static {
     itemlist = new ArrayList<String>();

        itemlist.add("genericitem"); // testing item
        itemlist.add("exit"); // allows for internal program exit
        itemlist.add("debuglist"); // allows to print every item in "itemlist" for debug

        // ***-------------------------------------------------***

        itemlist.add(0, "thisitem hasaspace");

  }

static Scanner console = new Scanner (System.in);

public static void main(String[] args) {

    String item = " " // variable to store name of item

    System.out.println("Enter an item name to check the database.");
    System.out.println("Enter 'exit' to quit the program.");
    System.out.println();

    while(true) {
        System.out.print("Item Name: ");
        item = console.next().toLowerCase().replaceAll("\\s", " ");

        /**
         * ONLY FINDS FIRST WORD, even after removal of spaces.
         */
            //DEBUG
        System.out.print("\n     DEBUG: " + item + "\n");

        if (itemlist.contains(item)) { // cycle through database

            displayItemProperties(item); // find item and print properties
            System.out.println();

        } else { // declares if the item isn't found in database
            System.out.println("That item does not exist.");
            System.out.println();
        }
    }
}

static void displayItemProperties(String item) {

    /**
     * Item names must be in LOWERCASE and have NO SPACES.
     */

    // GENERIC IF STATEMENT
    // Easy copy/paste to add new items

    /*

    if (item.equals("")) {
        System.out.println("");
    }

    */
    // **----------------------------------**

    if (item.equals("genericitem")) {
        System.out.println("A generic item.");
    }

    if (item.equals("debuglist")) {
        for (int i = 0; i < itemlist.size(); i++) {
            System.out.println(itemlist.get(i));
        }
    }

    if (item.equals("exit")) {
        System.out.println("Application Terminating...");
        System.exit(0);
    }

    // ***------------------------------------------------------***

    if (item.equals("thisitem hasaspace")) {
        System.out.println("If a name has a space, it wont show up correctly...");
    }

    // introduce new item declarations here     
}
} 
```

这是没有空格输入的内容的示例输出：

```
Enter an item name to check the database.
Enter 'exit' to quit the program.

Item Name: genericitem

 DEBUG: genericitem
A generic item.

Item Name: exit

 DEBUG: exit
Application Terminating... 
```

这就是使用带空格的名称时发生的情况：

```
Enter an item name to check the database.
Enter 'exit' to quit the program.

Item Name: thisitem hasaspace

 DEBUG: thisitem
That item does not exist.

Item Name:

 DEBUG: hasaspace
That item does not exist.

Item Name: exit

 DEBUG: exit
Application Terminating... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T19:12:17.180

默认情况下，`Scanner`该类使用任何空格作为分隔符模式。这包括一个常规的`SPACE`. 因此，当您调用 时`Scanner.next()`，它会提取下一个标记，并且**thisite hasaspace**是 2 个单独的标记，因为空格是默认分隔符。

而不是调用`Scanner.next()`，尝试调用`Scanner.nextLine()`：

```
 item = console.nextLine().toLowerCase().replaceAll("\\s", " "); 
```

# javascript - 设置为默认值时如何检索值？

> ID：11916859
> 
> 赞同：1
> 
> 时间：2012-08-11T19:05:53.577
> 
> 标签：javascript, html, dom, logic

好的，所以我知道如何在文本框中设置默认值：

```
<input type='text' size="2" name="QuantityAlbum1" id="QuantityAlbum1" value='1' onblur="chkValue('album1', this.value)"/>
<input type='text' size="2" name="QuantityAlbum2" id="QuantityAlbum2" value="1" onblur="chkValue('album2', this.value)"/> 
```

所以假设我将第一个文本框的值更改为三个，它调用我的方法并给出一个新价格，但是在我的方法中我想检查第二个项目是否有数量，如果它确实将其附加到现有价格，所以这是我的逻辑：

```
function newPriceTotal(chkObject, quantity){
      var newPrice=0;
      var albumQ1 = document.getElementById("QuantityAlbum1").innerHTML;
      var albumQ2 = document.getElementById("QuantityAlbum2").innerHTML;
        switch (chkObject)
        {

             case "album1":
             {
              newPrice =  4.99 * Number(quantity);
              if (albumQ2 != "")
                {
                  newPrice = newPrice + (8.99 * albumQ2)
                } 
                break;
              }     
        }  //end of switch
    return newPrice; 
} 
```

所以我没有问题，直到我得到：

```
if (albumQ2 != "") 
```

当它到达这里时，即使默认值设置为一，它也会返回空字符串，并且在文本框中显示默认值一。

谁能解释为什么会发生这种情况以及我该如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T19:45:14.307

您可以使用*.value*而不是*.innerHTML*。

# android - 更改图标的形状或阴影或完全删除它

> ID：11916862
> 
> 赞同：3
> 
> 时间：2012-08-11T19:06:12.827
> 
> 标签：android, icons, shadow

有谁知道如何摆脱图标阴影？或者至少改变它的形状？我首先认为这是 touchWiz 的东西，但后来我检查了其他图标，它们似乎有不同形状的阴影。

这是澄清我的意思的图像：

![在此处输入图像描述](../Images/ba0cfcb59580f9d604c5f350a60eacd4.png)

这是我正在使用的图标：

![在此处输入图像描述](../Images/5195ea1f9f646a2b21ffc76a345c010c.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-11T19:29:39.597

只需从设备中完全删除应用程序，清理项目并再次运行即可。它与您的可绘制对象无关。我认为这是某种缓存。

# linux - 执行`"${argv[@]}"`后获取执行的命令，引用的参数

> ID：11916868
> 
> 赞同：0
> 
> 时间：2012-08-11T19:06:43.557
> 
> 标签：linux, bash, shell

此功能有效：

```
source foo.bash && foo -n "a b c.txt" 
```

问题是，无论我尝试了什么，我都无法得到最后一行`echo "$CMD"`（或`echo $CMD`）来准确生成此输出：

```
cat -n "a b c.txt" 
```

如何做到这一点？

```
# foo.bash
function foo() {
    local argv=("$@");
    local OUT=`cat "${argv[@]}"`
    local CMD=`echo cat "${argv[@]}"`
    echo "--------------------------"
    echo "$OUT"
    echo "--------------------------"
    echo "$CMD"
} 
```

相反，输出是：

```
cat -n a b c.txt 
```

使用此命令：`foo -n \"a b c.txt\"`它确实适用于命令的显示，但它会通过反引号给出执行错误。

该文件`"a b c.txt"`是一个有效的小型文本文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T19:19:58.090

您需要在作业中转义引号：

```
local CMD="cat \"${argv[@]}\"" 
```

此外，不需要 echo 来连接字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T20:18:07.800

好了，借助[bash 变量中的令牌数量，](https://stackoverflow.com/questions/638802/number-of-tokens-in-bash-variable)我想出了正确的解决方案。

我几乎忘记了**为什么**我们实际上需要引用**一个**论点，因为它有多个词！

```
function foo() {
    local argv=( "$@" );
    local OUT=`cat "${argv[@]}"`
    echo "--------------------------"
    echo "$OUT"
    echo "--------------------------"
    local CMD="cat"
    for word in "${argv[@]}"; do
        words="${word//[^\ ]} "
        if [[ ${#words} > 1 ]]; then
            local CMD="$CMD \"${word}\""
        else
            local CMD="$CMD $word"
        fi
    done
    echo "$CMD"
} 
```

希望它可以帮助某人。

# php - 使用 php 和 JQuery 显示图像

> ID：11916870
> 
> 赞同：2
> 
> 时间：2012-08-11T19:07:00.297
> 
> 标签：php, jquery

我有一个小照片库，它显示来自数据库的图像，但是一旦加载图像，它就会显示在画廊框架的右侧。但在这种情况下，它不显示我正在使用 JQuery 来构建画廊，任何人都可以帮我解决这个问题。

```
$(document).ready(function () {

    $(".galleryThumbnail a").click(function (e) {
        e.preventDefault();

        //update thumbnail
        $(".galleryThumbnail a").removeClass("selected");
        $(".galleryThumbnail a").children().css("opacity", "1");

        $(this).addClass("selected");
        $(this).children().css("opacity", ".4");

        //setup thumbnails
        var photoCaption = $(this).attr('title');
        var photofullsize = $(this).attr('href');

        $(".galleryPreview").fadeOut(500, function () {

            $(".gallery_preload_area").html("")
            // this is what is going to happen after the fadeout
            $(".galleryPreview").html("<a  href='" + photofullsize + "' style=' background-image:url(" + photofullsize + ");'></a>");
            $(".galleryCaption").html("<p><a href='" + photofullsize + "' title='Click to view large'>View Large</a></p><p></p>")
            $(".galleryPreview").fadeIn(500);

        });
    });
}); 
```

它像这样显示在页面上

```
<?php
$query     = "SELECT * FROM image WHERE hotel_id = {$hotel['hotel_id']}";
$image_set = mysql_query($query, $connection);
while ($image = mysql_fetch_array($image_set)) {
?>                                                        
    <a href=\"img/photos/<?php   echo $image['image_url']; ?>" 
    title="<?php   echo $image['image_url'];    ?>">
    <img src="img/photos/<?php  echo $image['image_url'];  ?>" width="75" height="75"/>
    </a>           
<?php
}
?> 
```

要查看实际页面，请访问此站点： [http ://clicktravelnstay.com/desti_list.php?details=19](http://clicktravelnstay.com/desti_list.php?details=19)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T19:18:48.710

试试这个jquery

输出

![在此处输入图像描述](../Images/f40f8563cd0e9cb71e0ef3658a953a20.png)

```
$(document).ready(function(){

$(".galleryThumbnail a").click(function(e){
     e.preventDefault();

     //update thumbnail
     $(".galleryThumbnail a").removeClass("selected");
     $(".galleryThumbnail a").children().css("opacity","1");

     $(this).addClass("selected");
     $(this).children().css("opacity",".4");

     //setup thumbnails
     var photoCaption = $(this).attr('title');
     var photofullsize =$(this).attr('href');

     alert(photofullsize+photoCaption);
     var fullpath = photofullsize+photoCaption;
         $(".galleryPreview").fadeOut(500, function(){ 

         $(".gallery_preload_area").html("")  
           // this is what is going to happen after the fadeout
           $(".galleryPreview").html("<a  href='"+ photofullsize +"' style='background-image:url("+fullpath+");'></a>");
           $(".galleryCaption").html("<p><a href='"+photofullsize+"' title='Click to view large'>View Large</a></p><p></p>")    
           $(".galleryPreview").fadeIn(500);

          });

});

});

$query = "SELECT * FROM image WHERE hotel_id = {$hotel['hotel_id']}";

$image_set =  mysql_query($query,$connection);

while($image = mysql_fetch_array($image_set)){?>

<a href="img/photos/<?php echo $image['image_url'];?>" title="<?php echo $image['image_url']?>">
<img src="img/photos/<?php echo $image['image_url'];?>" width="75" height="75"/></a>    

<?php } ?> 
```

如果不工作请告诉我

# security - windows 集成安全 user.identity.isauthenticated 返回 false

> ID：11916882
> 
> 赞同：0
> 
> 时间：2012-08-11T19:08:15.027
> 
> 标签：security, iis

我将硬盘换成了 ssd，并且在重新创建我的环境时很开心。我正在运行 win7 pro，我的网络应用程序从 user.identity.isauthentication 返回 false（在升级到 ssd 之前工作正常）。我在 windows 组件（我正在运行本地 iis）下添加 windows 集成安全作为安全功能，并为网站启用它。
如果我禁用匿名，user.identity.isauthenticated 使用正确的凭据返回 true - 但总是提示我输入我的凭据。AHAH - 它必须是 ntfs 权限。但是我已经为我能想到的每个帐户添加了它们——网络服务、我自己的帐户、IUSR、身份验证用户以及其他几个已经存在的帐户。没什么区别。也许我正在运行的应用程序池 - 但我尝试过 DefaultAppPool、.NET 4.0 和 .NET 4.0 Classic。再次，没有区别。有人对我可以尝试的其他事情有任何想法吗？我不在域或类似的地方，这完全是本地的。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T16:34:30.347

解决方案是在浏览器中，在本例中是在 ie9 Internet 选项下。在高级选项卡中验证启用 Windows 集成身份验证已选中后，必须转到安全选项卡，在本地 Intranet/站点下，取消选中“自动检测 Intranet 网络”并选中“包括所有本地 Intranet 站点”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T20:16:36.387

您的 web.config 中有什么？

```
<authentication mode="Windows"></authentication> 
```

# jquery - 基于左滚动距离的不透明度

> ID：11916886
> 
> 赞同：0
> 
> 时间：2012-08-11T19:08:54.920
> 
> 标签：jquery, scroll, jquery-animate, opacity

```
$(document).scroll(function() {

    var distanceLeft = $(document).scrollLeft();

    if( distanceLeft > 3800)
    {
        $('#first_circle').animate({
            opacity: 1
        }, 1000);
    }

    if( distanceLeft < 3800)
    {
        $('#first_circle').animate({
            opacity: 0
        }, 1000);
    }
)}; 
```

嗨，我试图纠正这个问题，以便当滚动超过 3800 时，div 淡入，当用户向后滚动时，它淡出？感谢您的任何意见

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T19:38:01.947

只需更改变量并添加一些数学：http: [//jsfiddle.net/z7E9u/155/](http://jsfiddle.net/z7E9u/155/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T12:14:39.687

您当然可以使用[mkey answer](https://stackoverflow.com/a/11917074/1250044)之类的简单方法。但是，如果您需要更复杂的东西来*“动画”*尝试[jQuery Transe](https://github.com/yckart/jquery.transe.js)。对于这个问题，它是一个*彻底*的解决方案。您可以根据当前的滚动偏移量更改几乎任何内容（甚至 CSS3-Transforms 等）。

在你的情况下，尝试这样的事情：

```
$('#fading').transe({
    direction: 'x',
    start: 3575,
    end: 4150,
    css: 'opacity',
    from: 0,
    to: 1
}); 
```

**[演示](http://jsfiddle.net/TvSyU/)**

# php - 使用 PHP for Dummies 将“用户名”从“user_id”添加到 URL

> ID：11916888
> 
> 赞同：2
> 
> 时间：2012-08-11T19:09:36.163
> 
> 标签：php, apache, mod-rewrite

我正在尝试发布一个我知道在 Stack Overflow 周围有很多答案的问题。但是，出于某种原因，我似乎无法获取其中的信息以进行单击。我将在问题末尾发布我的消息来源。

问题是，我如何`user_id`从 URL 中提取一个 & mod_rewrite 它显示用户名。

而不是这个：

`domain/user/index.php?user_id=1`

我明白了：

`domain/username`

我已经根据我的 .htaccess 文件的需求定制了其他 SO 答案：

```
<IfModule mod_rewrite.c>
  Options +FollowSymlinks
  RewriteEngine On
  RewriteOptions MaxRedirects=1
  RewriteCond %{REQUEST_FILENAME} -f [NC,OR] 
  RewriteCond %{REQUEST_FILENAME} -d [NC] 
  RewriteRule .* - [L]
  RewriteRule ^user/([^/]+)$ index.php?user_id=$1
</IfModule> 
```

`if`我的用户页面顶部的语句如下所示：

```
if (isset($_GET['user_id']) || isset($_GET['username']) && queryUserId($user_id)) {
  // Render Page Content
} else {
  header('Location: sign_up.php');
} 
```

我的`queryUsername`功能如下所示：

```
function queryUsername($username) {
    $conn = dbConnect('read');
    $sql = "SELECT * FROM users WHERE user_id = '".$username."'";
    $result = $conn->query($sql) or die(mysqli_error($conn));
    $row = $result->fetch_assoc();
    return $row['username'];
    $username = $row['username'];
} 
```

我已经成功地为用户实现了唯一的 URL，并且在将不同的 user_id 附加到我的 URL 时可以很好地访问帐户配置文件，那么我缺少什么来将用户名写入 URL 而不是变量字符串和文件夹结构？

干杯!

其他问题：

[直接将用户名添加到 URL PHP](https://stackoverflow.com/questions/2819284/directly-adding-username-to-url-php)

[从 PHP 中的 URL 获取用户名](https://stackoverflow.com/questions/2784214/get-username-from-url-in-php)

[使用 mod rewrite 使用用户名变量更改 URL](https://stackoverflow.com/questions/904075/using-mod-rewrite-to-change-url-with-username-variable)

添加字节文章

[初学者的 URL 重写](http://www.addedbytes.com/for-beginners/url-rewriting-for-beginners/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T19:16:15.937

根据您的信息，此行是错误的：

```
RewriteRule ^user/([^/]+)$ index.php?user_id=$1 
```

它至少应该是：

```
RewriteRule ^user/([^/]+)$ /user/index.php?user_id=$1    // for a url like domain/user/username 
```

或使用您的描述：

```
RewriteRule ^([^/]+)$ /user/index.php?user_id=$1    // for a url like domain/username 
```

此外，您没有`username`在显示的代码中设置任何名称为 的变量，因此`$_GET['username']`不需要检查。

您在 php 中的检查应类似于：

```
if ( isset($_GET['user_id']) && queryUserId($_GET['user_id']) ) { 
```

除此之外，您不应该使用已弃用的`mysql_*`函数并使用准备好的语句，因为您现在有 sql 注入问题。

另请注意，`return`在彼此之后使用两个语句仅返回第一个值。

**编辑：**用户 ID 和用户名之间似乎有些混淆。如果 url 中的值是用户名，您最好`username`在 .htaccess 文件和 php 中都调用它以避免与用户 ID 混淆：

```
RewriteRule ^([^/]+)$ /user/index.php?username=$1    // for a url like domain/username} 
```

和

```
if ( isset($_GET['username']) && queryUserName($_GET['username']) ) { 
```

在函数中（**使用不推荐使用的函数只是为了说明**......）：

```
function queryUserName($username) {        
    $conn = dbConnect('read');
    $sql = "SELECT * FROM users WHERE username = '".$username."'";
    ...
} 
```

# html - 造型 扩展至导航背景全高的元素

> ID：11916892
> 
> 赞同：0
> 
> 时间：2012-08-11T19:10:19.323
> 
> 标签：html, css, html-lists, nav

我正在尝试构建一个具有 :hover 效果的导航。当我悬停时，悬停效果不会扩大以填充导航的整个背景。我曾尝试使用边距和填充来操作它，但无济于事。

这是CSS：

```
div#nav {
    background-image: url("images/navback.png");
    background-repeat: no-repeat;
    width: 580px;
    height: 85px;
    margin-left: 100px;
}

ul#navlist {
    padding-top: 10px;
    padding-left: 25px;
    font-size: 15px;
    font-family: 'OpenSansCondensedBold', sans-serif;
    font-weight: bold;
    line-height: 40px;
}

ul#navlist li{
    display: inline;
    list-style-type: none;
    margin: 18px;
    line-height: 40px;
}

ul#navlist li:hover {
    box-shadow:inset 0 0 10px #ffffff;
    cursor: pointer;
}

a:link {
    text-decoration: none;
    color: #717171;
} 
```

我有点难过，任何帮助表示赞赏！

这是标记：

```
<div id="nav">
    <ul id="navlist">
        <li><a href="">Home</a></li>
        <li><a href="">Buy Art</a></li>
        <li><a href="">Make Money</a></li>
        <li><a href="">About Us</a></li>
        <li><a href="">Contact Us</a></li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T19:19:55.427

要将元素样式设置为父元素的完整高度，您只需添加：

```
height: 100%; 
```

我不确定，但可能您还必须添加到该选择器

```
display: inline-block; 
```

# windows - Windows 窗体——按钮的行为？

> ID：11916897
> 
> 赞同：-2
> 
> 时间：2012-08-11T19:11:15.943
> 
> 标签：windows, forms, button

我第一次使用windows窗体，所以我对界面不是很熟悉。但是当我添加按钮时如何设置行为呢？例如，如果我想单击“按钮 1”并让它打开一个新窗口以在不同的字段中输入信息，这是如何完成的？

谢谢你。

编辑：对不起，我忘了包括语言。它在 C# 中，我正在使用 MS Visual Studios。我从来没有真正用 C# 编程过。

刚刚弹出的另一个问题：我可以用其他语言（例如 C++）来执行此 Windows 窗体吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T19:45:19.890

是的，上面的评论很关键，但是，如果您在 Windows 窗体上使用 UI 设计器，那么在视觉工作室一侧的属性选项卡下，您可以查看“事件”。从这里双击您想要的事件，可能是“onclick”。这将创建一个自动设置事件处理程序的方法存根。

看起来像：

```
public void Button1_OnClick(Object sender, EventArgs e){
     // open the other window for input
     Form whateverForm = new Form();
     whateverForm.show();
} 
```

希望这可以帮助。抱歉，我不确定任何 C++

[编辑]教程不是很好，但看看： [http ://www.ehow.com/how_7241167_tutorial-microsoft-visual-studio.html](http://www.ehow.com/how_7241167_tutorial-microsoft-visual-studio.html)

# pdf - VIM：是否可以在拆分窗口中查看 pdf 文件？

> ID：11916898
> 
> 赞同：7
> 
> 时间：2012-08-11T19:11:17.847
> 
> 标签：pdf, vim

我想使用 gVim 在拆分窗口中查看 pdf 文件，有人知道这是否可能吗？如何？

一些细节：我最近才开始使用 vim 并用它做笔记，同时阅读 pdf。我自己写笔记，但我经常从 pdf 中复制文本，所以流畅的复制会很好。目前我需要 alt+tab 来查看 pdf 查看器，转到鼠标或箭头键，选择文本，复制，alt+tab 回到 vim。当然这不是一项艰巨的任务，但使用 vim 我觉得没有鼠标，双手保持在“主行”，并且不需要外部程序 alt+tab 来...

理想情况下，我希望 pdf 按原样显示。如果那不可能，我将尝试使用一些插件将 pdf 显示为文本表示。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-11T19:16:39.580

Vim 是一个文本编辑器，所以它只编辑文本。所以，是的，您可以在二进制级别上编辑 PDF，但不能查看 PDF 的内容，因为它们是要显示的。您可以使用该`xpdf`包先将 PDF 转换为文本，然后再查看，但结果并不完美。但是，当您在 vim 中“打开”非文本文件时，有一些有用的自动命令允许您使用它们的默认程序打开它们。我使用这些：

```
augroup nonvim
   au!
   au BufRead *.png,*.jpg,*.pdf,*.gif,*.xls* sil exe "!open " . shellescape(expand("%:p")) | bd | let &ft=&ft
   au BufRead *.ppt*,*.doc*,*.rtf let g:output_pdf = shellescape(expand("%:r") . ".pdf")
   au BufRead *.ppt*,*.doc*,*.rtf sil exe "!/usr/local/bin/any2pdf " . shellescape(expand("%:p"))
   au BufRead *.ppt*,*.doc*,*.rtf sil exe "!open " . g:output_pdf | bd | let &ft=&ft
augroup end 
```

如果您使用的是 Linux 发行版，则`!open`可以使用。`!xdg-open`我使用的`any2pdf`命令有一个[脚本](http://connermcd.com/blog/2011/12/07/convert-anything-to-pdf-from-the-shell/)，可以在打开这些文件之前将它们转换为 PDF。如果您只想使用默认程序打开所有内容，则可以对其进行编辑。例如，

```
augroup nonvim
   au!
   au BufRead *.png,*.jpg,*.pdf,*.gif,*.xls*,*.ppt*,*.doc*,*.rtf sil exe "!open " . shellescape(expand("%:p")) | bd | let &ft=&ft
augroup end 
```

您可能还想查看[dwm](http://dwm.suckless.org/)或[ratpoison 之](http://ratpoison.nongnu.org/)类的窗口管理器，它们与您的要求非常接近。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T19:13:36.163

您可以安装一个插件，允许您查看 pdf 中的文本，但是我对 gVim 不熟悉，所以我不知道这个[wiki 页面](http://vim.wikia.com/wiki/Open_PDF_files)是否适用于您。

# php - 在显示基于工作日的内容时避免使用 if 语句 (PHP)

> ID：11916901
> 
> 赞同：1
> 
> 时间：2012-08-11T19:11:57.940
> 
> 标签：php, if-statement, dayofweek

在这种情况下，我需要根据一周中的哪一天来显示内容，是否有理由或方法来避免使用 if 语句？

```
$d=date("w");
if ($d=="0") echo "Sunday";
if ($d=="1") echo "Monday";
if ($d=="2") echo "Tueday";
if ($d=="3") echo "Wednesday";
if ($d=="4") echo "Thursday";
if ($d=="5") echo "Friday";
if ($d=="6") echo "Saturday"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T19:14:21.047

有多种方法可以做到这一点：

* * *

1.您可以只使用`l`in [`date`](http://php.net/manual/en/function.date.php)（小写**L**）：

```
echo date('l'); 
```

* * *

2.您可以使用[`array`](http://php.net/manual/en/language.types.array.php)：

```
$days = array(
    "Sunday",
    "Monday",
    "Tuesday",
    "Wednesday",
    "Thursday",
    "Friday",
    "Saturday"); 
```

然后通过以下方式访问它：

```
echo $days[$d]; 
```

* * *

3.您可以使用[`switch`](http://www.php.net/manual/en/control-structures.switch.php)：

```
switch ($d)
{
    case 0:
        echo "Sunday";
    ...
} 
```

但是，我倾向于避免`switch`陈述，因为它们是人类大脑最难理解的。

* * *

一些技巧：

1.  你拼错了星期二
2.  使用`else if`而不是多个`if`s。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T19:15:39.513

```
$dates = array("Sunday",
               "Monday",
               "Tuesday",
               "Wednesday",
               "Thursday",
               "Friday",
               "Saturday"
              );

echo $dates[date("w")]; 
```

那应该说得很好。

编辑：想想看，只是使用`echo date("l")`应该可以很好地满足您的目的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T19:15:50.967

使用数组：

```
$days_of_week = array(
    "Sunday",
    "Monday",
    "Tuesday",
    "Wednesday",
    "Thursday",
    "Friday",
    "Saturday");

echo $days_of_week[$d] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-11T19:16:27.883

```
echo date ('l'); 
```

根据[PHP 手册页](http://php.net/manual/en/function.date.php)

**l**（小写“L”）：星期几的完整文本表示

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-11T19:19:03.417

您可以随时查看[switch 语句](http://php.net/manual/en/control-structures.switch.php)，例如：

```
$d=date('w');
switch($d) {
    case(0):
        $day='Sunday';
        break;
    case(1):
        $day='Monday';
        break;
    case(2):
        $day='Tuesday';
        break;
    case(3):
        $day='Wednesday';
        break;
    case(4):
        $day='Thursday';
        break;
    case(5):
        $day='Friday';
        break;
    case(6):
        $day='Saturday';
        break;
    default:
        $day=null;
}
if($day!==null) {echo($day);} 
```

# asp.net-mvc-3 - Asp.net mvc 3 依赖注入

> ID：11916903
> 
> 赞同：0
> 
> 时间：2012-08-11T19:12:08.750
> 
> 标签：asp.net-mvc-3, c#-4.0, dependency-injection

我对 DI 和 IoC 有点困惑。我已经设置了 MVC，并使用 Ninject 进行属性注入，它运行良好。我的应用程序设置为使用 MvcContrib 的 Portable Areas，每个区域都包含在提供程序、服务、模型和控制器中。

一个区域的提供者可以访问同一或子程序集中的其他提供者。为了解决提供者中的依赖关系，我使用了 DependencyResolver.Cur... ，它也被注册为使用 Ninject。我想知道这是否是一种好方法，因为我不想将所有其他提供程序从控制器传递到最后一层，但我想直接从提供程序访问它们。我应该在像 Core 这样的最低程序集中创建一个内核实例，以便我可以从任何地方直接访问它吗？

提前谢谢

更新：我还想知道是否可以在普通类中使用属​​性注入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T21:41:06.117

*当您围绕构造函数注入模式*设计所有服务（存储库、应用程序服务、控制器等）时，无需从类中调用`DependencyResolver.Current.GetService`，也无需在最低程序集中提供内核实例。

当您的所有服务都使用构造函数注入时，您的容器将能够在请求根类型时构造依赖服务的对象图：在您的情况下是控制器类。当你这样做时，没有代码需要直接访问`DependencyResolver`或`Kernel`，这确保你的代码将更加可测试、灵活和可维护。任何访问`DependencyResolver`静态`Kernel`实例的代码都很难测试，隐藏了它的依赖关系，并且很难以自动化的方式验证容器的配置。

*您可以使用属性注入*来实现相同的效果，而不是使用*构造函数*注入。但是，由于约定是属性用于可选依赖项，因此 Ninject（和任何其他容器）将跳过它无法注入的属性（隐式属性注入），而不是抛出异常，就像缺少构造函数参数依赖项那样. 这再次使得在您的应用程序中查找配置错误变得更加困难。所以，只要有可能，坚持使用构造函数注入。

# delphi - 使用 BHO 操作 URL 栏

> ID：11916910
> 
> 赞同：0
> 
> 时间：2012-08-11T19:13:06.160
> 
> 标签：delphi, bho

我想使用 BHO 阻止一些 URL。为了检查浏览器要访问的 URL，我使用了 BeforeNavigate2 事件。然后，在这个事件中，如果 URL 被禁止，我会为我的 URL 执行 Navigate2 事件。但我想操纵将出现在栏中的 URL。我不想显示 Navigate2 访问的 URL。我怎么能用 BHO 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T20:02:28.483

通过浏览器界面更改地址栏将触发新的导航。您可能必须使用 Win32 API 来定位实际的编辑字段并直接对其进行操作。但是，通过导航到真实的 URL，浏览器很可能在导航过程中覆盖您的自定义文本。

# scala - Play 2.x：使用 Iteratees 进行响应式文件上传

> ID：11916911
> 
> 赞同：28
> 
> 时间：2012-08-11T19:13:14.260
> 
> 标签：scala, file-upload, playframework-2.0, azure-storage, iterate

我将从这个问题开始：*如何使用 Scala API`Iteratee`将文件上传到云存储*（在我的情况下是 Azure Blob 存储，但我认为它现在不是最重要的）

背景：

我需要将输入分成大约 1 MB 的块，以便将大型媒体文件（300 MB+）存储为 Azure 的`BlockBlobs`. 不幸的是，我的 Scala 知识仍然很差（我的项目是基于 Java 的，Scala 的唯一用途是上传控制器）。

我尝试使用此代码：[为什么调用错误或在 BodyParser 的 Iteratee 中完成请求在 Play Framework 2.0 中挂起？](https://stackoverflow.com/questions/11468768)(as a `Input` `Iteratee`) - 它工作得很好，但`Element`我可以使用的每个大小为 8192 字节，因此对于将数百兆字节的文件发送到云来说太小了。

我必须说这对我来说是一种全新的方法，而且很可能我误解了一些东西（不想说我误解了一切；>）

我将不胜感激任何提示或链接，这将有助于我解决该主题。如果有任何类似用法的样本，那将是我了解这个想法的最佳选择。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-08-15T03:12:16.250

基本上，您首先需要的是将输入重新分块为更大的块，1024 * 1024 字节。

首先让我们有一个`Iteratee`将消耗最多 1m 字节的字节（可以让最后一个块更小）

```
val consumeAMB = 
  Traversable.takeUpTo[Array[Byte]](1024*1024) &>> Iteratee.consume() 
```

使用它，我们可以`Enumeratee`使用一个名为 grouped 的 API 构造一个（适配器）来重新组合块：

```
val rechunkAdapter:Enumeratee[Array[Byte],Array[Byte]] =
  Enumeratee.grouped(consumeAMB) 
```

这里 grouped 使用 an`Iteratee`来确定在每个块中放入多少。它为此使用了我们的consumeAMB。这意味着结果是将`Enumeratee`输入重新分块`Array[Byte]`为 1MB。

现在我们需要编写`BodyParser`，它将使用该`Iteratee.foldM`方法发送每个字节块：

```
val writeToStore: Iteratee[Array[Byte],_] =
  Iteratee.foldM[Array[Byte],_](connectionHandle){ (c,bytes) => 
    // write bytes and return next handle, probable in a Future
  } 
```

foldM 传递一个状态，并在其传递的函数中使用它`(S,Input[Array[Byte]]) => Future[S]`来返回一个新的 Future 状态。foldM 将不会再次调用该函数，直到`Future`完成并且有可用的输入块。

并且正文解析器将重新分块输入并将其推送到存储中：

```
BodyParser( rh => (rechunkAdapter &>> writeToStore).map(Right(_))) 
```

返回一个 Right 表示您在正文解析结束时返回一个正文（恰好是这里的处理程序）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-19T07:57:12.700

如果您的目标是流式传输到 S3，这里有一个我已经实现并测试过的助手：

```
def uploadStream(bucket: String, key: String, enum: Enumerator[Array[Byte]])
                (implicit ec: ExecutionContext): Future[CompleteMultipartUploadResult] = {
  import scala.collection.JavaConversions._

  val initRequest = new InitiateMultipartUploadRequest(bucket, key)
  val initResponse = s3.initiateMultipartUpload(initRequest)
  val uploadId = initResponse.getUploadId

  val rechunker: Enumeratee[Array[Byte], Array[Byte]] = Enumeratee.grouped {
    Traversable.takeUpTo[Array[Byte]](5 * 1024 * 1024) &>> Iteratee.consume()
  }

  val uploader = Iteratee.foldM[Array[Byte], Seq[PartETag]](Seq.empty) { case (etags, bytes) =>
    val uploadRequest = new UploadPartRequest()
      .withBucketName(bucket)
      .withKey(key)
      .withPartNumber(etags.length + 1)
      .withUploadId(uploadId)
      .withInputStream(new ByteArrayInputStream(bytes))
      .withPartSize(bytes.length)

    val etag = Future { s3.uploadPart(uploadRequest).getPartETag }
    etag.map(etags :+ _)
  }

  val futETags = enum &> rechunker |>>> uploader

  futETags.map { etags =>
    val compRequest = new CompleteMultipartUploadRequest(bucket, key, uploadId, etags.toBuffer[PartETag])
    s3.completeMultipartUpload(compRequest)
  }.recoverWith { case e: Exception =>
    s3.abortMultipartUpload(new AbortMultipartUploadRequest(bucket, key, uploadId))
    Future.failed(e)
  }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-13T22:10:12.360

对于那些也试图找出这个流问题的解决方案的人，你也可以使用已经在 parse.multipartFormData 中实现的东西，而不是编写一个全新的[BodyParser](https://github.com/playframework/playframework/blob/master/framework/src/play/src/main/scala/play/api/mvc/ContentTypes.scala#L586)。您可以实现类似下面的内容来覆盖默认处理程序**handleFilePartAsTemporaryFile**。

```
def handleFilePartAsS3FileUpload: PartHandler[FilePart[String]] = {
  handleFilePart {
    case FileInfo(partName, filename, contentType) =>

      (rechunkAdapter &>> writeToS3).map {
        _ =>
          val compRequest = new CompleteMultipartUploadRequest(...)
          amazonS3Client.completeMultipartUpload(compRequest)
          ...
      }
  }
}

def multipartFormDataS3: BodyParser[MultipartFormData[String]] = multipartFormData(handleFilePartAsS3FileUpload) 
```

我能够完成这项工作，但我仍然不确定整个上传过程是否是流式传输的。我尝试了一些大文件，似乎 S3 上传仅在从客户端发送整个文件时才开始。

我查看了上面的解析器实现，我认为一切都是使用 Iteratee 连接的，因此文件应该被流式传输。如果有人对此有所了解，那将非常有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-11T23:02:17.070

将以下内容添加到您的配置文件中

play.http.parser.maxMemoryBuffer=256K

# datepicker - jsoup 上的日期选择器

> ID：11916912
> 
> 赞同：0
> 
> 时间：2012-08-11T19:13:20.670
> 
> 标签：datepicker, jsoup

我需要发布日期选择器的日期，但我不知道该怎么做。我只知道使用 jsoup 发布文本框和按钮的值，但是 datepicker 怎么样？它没有像其他人一样的输入名称。你能举例说明如何使用 jsoup 从 datepicker 发布日期吗？非常感谢。

这是发布文本框和按钮值的代码，但我不知道如何发布日期选择器的值。

> 文档 document = Jsoup.connect("http://example.com/somescript").data("text1", "yourText1Value") .data("button1", "Submit") .post();

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T19:26:41.443

Datepicker 字段只是一个简单的输入 type="text" ，如下所示：`<input id="datepicker" class="hasDatepicker" type="text">`

所以这样的事情应该做：

```
Document document = Jsoup.connect("http://example.com/somescript").data("datepicker", "08/14/2012") .data("button1", "Submit") .post(); 
```

# c# - (En|De) 使用 RSA 的静态私钥/公钥加密数据

> ID：11916915
> 
> 赞同：0
> 
> 时间：2012-08-11T19:13:41.673
> 
> 标签：c#, .net, encryption, rsa, private

我已经看到了许多关于如何在 C# 中将 RSA 与随机生成的密钥一起使用的示例，但没有一个与静态密钥一起使用的示例。我需要这是因为我的程序客户端静态存储公钥（n，e），而服务器也静态存储私钥（d，n）和公钥。

如果我创建一个 RSAParameters 并存储`Modulus=n`and`Exponent=e`值和 call `ImportParameters`，我可以成功加密数据，但是如果我创建一个新的 RSAParameters 并存储`Modulus=n`and`D=d`值，当我调用该`ImportParameters`方法时，`System.Security.Cryptography.CryptographicException`会抛出 a 。

有没有办法只用 D 和 N 值来解密数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T14:17:06.860

尝试以 PKCS#1/PKCS#8 格式对值进行编码。这样，您也可以从任何框架中检索密钥。最好的方法是使用[Bouncy Castle](http://www.bouncycastle.org/csharp/)框架。我已经包含了一些关于向/从 C# 应用程序导入/导出密钥的问题的指针。

[如何在#C 中将 pkcs8 密钥文件转换为 DER 格式？](https://stackoverflow.com/questions/4171658/how-to-convert-pkcs8-key-file-to-der-format-in-c)

[在 Net Framework 中创建 PKCS1 公钥](https://stackoverflow.com/questions/4535563/creating-pkcs1-public-key-in-net-framework)

# php - 如何从具有数千个表的 mysql 数据库中选择 4 个随机表？

> ID：11916920
> 
> 赞同：2
> 
> 时间：2012-08-11T19:15:01.033
> 
> 标签：php, mysql

我需要一种快速、有效的方法来随机返回单个 mysql 数据库中 4 个表的名称。这些表没有结构化的命名模式，除了它们都是小写字母和数字。

示例：my_database 包含以下表格：

```
(cat, dog, boat, car, cars, cars35, accorns, accerns, speaker, shell, olympics, politics, fray, ttypo, ... (thousands of tables like this) ... , road) 
```

我需要一种有效的方法来返回一组不重叠的随机表的名称。

例子：

```
function_random_table(4) would return 4 table names stored to the following variables:

$random_1 = cars
$random_2 = cars35
$random_3 = shell
$random_4 = cat 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-11T19:19:56.710

只需使用 INFORMATION_SCHEMA.TABLES：

```
select table_name
from INFORMATION_SCHEMA.TABLES t
where TABLE_SCHEMA = 'YOUR_DB_NAME'
order by rand()
limit 4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T19:20:23.480

您可以将所有表放在一个数组中。然后生成四个随机索引并确保它们都是唯一索引（因此没有重叠）。`$random_n`获取这些索引并使用数组中这些索引处的位置填充您的四个变量。

# coldfusion - 使用 SSO 从 Google Apps 登录到我现有的应用程序

> ID：11916928
> 
> 赞同：7
> 
> 时间：2012-08-11T19:16:02.323
> 
> 标签：coldfusion, openid, single-sign-on, coldfusion-9, google-apps

我的公司将很快切换到 Google Apps，我想提出让我们的站点管理页面通过 OpenID 进行身份验证的想法。因此，任何登录到 Google Apps 的用户都会自动登录到我们的站点管理。目前，我们的站点管理在数据库中有自己的用户和密码列表，但我希望用户列表基于 Google Apps，其唯一标识符保存在我们的数据库中。这样，新员工只需在 Google Apps 中设置即可访问我们的站点管理。

我做了一些研究，遇到了 SSO、OpenID 和 SAML 之类的术语，但我不能完全缩小我应该走的路线。看起来谷歌有很多可供开发的路径，我不确定我应该选择哪一个。

我的问题是：我为上述目的寻求什么样的身份验证，谁能指出我从哪里开始？我的网站是在 ColdFusion 9 中发布的，因此针对该平台的特定答案是一个奖励。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T15:28:13.570

如果您只需要 Web SSO——我相信您会使用您的 GApps 域作为 OpenID 提供者。然后，您的应用程序将充当 RP，并使用您自己的 GApps 域和公司管理建立的身份。GApp 只能充当*SAML*服务提供者——因此在这个用例中使用 SAML 是不现实的。

伊恩

# python - 我可以让 X-server 仅在光标恰好在我需要的位置时通知我吗？

> ID：11916934
> 
> 赞同：0
> 
> 时间：2012-08-11T19:17:06.833
> 
> 标签：python, gtk, pygtk, xserver

是的，我创建了可以点击的窗口（感谢 irc.gnome.org 的#gtk+），现在 - 如何让它听到 -`mouse_over`事件？那么，我们究竟做了什么：

```
def set_mask(win):
    size=win.window.get_size()
    bitmap=gtk.gdk.Pixmap(win.window,size[0],size[1],1)

    cr = bitmap.cairo_create()
    cr.set_operator(cairo.OPERATOR_SOURCE)
    cr.set_source_rgba(0.0,0.0,0.0,0.0)
    cr.rectangle((0,0)+size)
    cr.fill()  

    win.window.input_shape_combine_mask(bitmap,0,0) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T12:31:43.410

我发现自己这是不可能的。`notify-osd`在 ubuntu 中使用 poll 来检查光标在哪里。

# xcode - 如何将登录添加到 IOS MasterDetail Universal Project？

> ID：11916937
> 
> 赞同：3
> 
> 时间：2012-08-11T19:17:34.867
> 
> 标签：xcode, xamarin.ios, uistoryboard, ios-universal-app, xamarin

我是IOS开发的新手。我想向一个新的故事板项目添加一个通用的 masterdetail 一个简单的登录控件，在用户可以继续之前需要它。也就是说，我总是希望他们登录。我正在使用单点触控，但我不认为这个问题是单点触控特定的。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T15:16:11.333

通常对于登录屏幕，我会执行以下操作：

*   在`ViewDidAppear`您的根视图控制器中，检查您的用户是否需要登录
*   用于`PresentModalViewController`以模态方式显示您的登录屏幕

这应该适用于您用作根控制器的任何类型的控制器。

当然还有其他方法，但这种方法一直对我有用。

# python - SQLAlchemy 和线程

> ID：11916939
> 
> 赞同：1
> 
> 时间：2012-08-11T19:17:53.093
> 
> 标签：python, multithreading, sqlalchemy

我正在尝试使用 Python 创建一个小型 IRC 连接，现在我希望它能够连接到多个服务器，所以我创建了一个将连接到服务器的服务器类，我想将服务器保存到数据库中，所以我使用 sqlalchemy 来做到这一点。这是服务器类的**初始化**

```
def __init__(self, server_name, server_address, server_port=6667):
        threading.Thread.__init__(self)
        self.server_name = server_name
        self.server_address = server_address
        self.server_port = server_port 
```

现在奇怪的是，如果我像这样“手动”调用创建一个类，它实际上可以工作

```
bla = IRCLib.connect("local","127.0.0.1") 
```

这样它连接并且根本没有问题，但是当我像这样通过SQLAlchemy加载类时

```
bla = db.BaseService.session.query(IRCLib.server)
res = bla.all()
res[0].connect() 
```

我收到这个错误

```
raise RuntimeError("thread.__init__() not called") 
```

现在类上的连接和运行功能是这样的

```
def connect(self):
        self.irc = socket.socket ( socket.AF_INET, socket.SOCK_STREAM )
        self.irc.connect ( ( self.server_address, self.server_port ) )
        self.irc_file = self.irc.makefile("rb")
        self.start()

    def run(self):
        print "in run"
        self.irc.send ( 'NICK Test\r\n' )
        self.irc.send ( 'USER lsb lsb lsb :lsb\r\n' )
        while True:
            data = self.irc_file.readline()
            print data 
```

我真的不确定我能做些什么来让它与 SQLAlchemy 一起工作，因为就像我说的那样，如果我手动操作它就可以工作。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T20:08:17.033

`__init__()`当 SQLAlchemy 从数据库加载对象时，不会调用该方法（文档： [http](http://docs.sqlalchemy.org/en/rel_0_7/orm/mapper_config.html#constructors-and-object-initialization) ://docs.sqlalchemy.org/en/rel_0_7/orm/mapper_config.html#constructors-and-object-initialization ）。要在每次加载对象时执行任务，请使用该`@orm.reconstructor`部分中描述的钩子：

```
from sqlalchemy import orm

class MyMappedClass(object):
    def __init__(self, data):
        self.data = data
        # we need stuff on all instances, but not in the database.
        self.stuff = []

    @orm.reconstructor
    def init_on_load(self):
        self.stuff = [] 
```

# java - 多类小程序

> ID：11916940
> 
> 赞同：1
> 
> 时间：2012-08-11T19:18:00.343
> 
> 标签：java, applet

嗨，我创建的 java 游戏有以下类：

```
Contents.class
Reader.class
Sokoban.class 
```

Sokoban.class 是我的主要课程。

我正在使用这个小程序代码片段将游戏嵌入我的网站：

```
<applet code="Sokoban.class" width="350" height="350"></applet> 
```

我的类都在同一个目录中，但是当我尝试加载具有小程序代码的 html 文件时出现空白屏幕。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T19:23:50.657

[从您的类中编写 jar 文件](http://docs.oracle.com/javase/tutorial/deployment/jar/build.html)，并在 applet 部分中指定 jar 文件作为`archive`属性。代码属性应该指向主类。

这是小程序的示例，组成如下`SokobanGame.jar`：

```
<applet code="Sokoban" 
        archive="SokobanGame.jar"
        width=350 height=350>
</applet> 
```

# c# - 反射字段访问器，获取属性值

> ID：11916943
> 
> 赞同：1
> 
> 时间：2012-08-11T19:18:10.330
> 
> 标签：c#, windows-phone-7, reflection, properties

我有一个 Human 类，需要获取“IsChecked”值。ItemsSource 可能有不同的类型，但所有类都有 IsChecked 属性。

```
public class Human{
    public bool IsChecked{
      get;
      set;
    }
}

private void CheckBoxLoaded(object sender, RoutedEventArgs e) //sender is CheckBox
    //How set value from IsChecked?
    var prop = t.GetType().GetProperties().Single(n => n.Name == "IsChecked");//I can access it by this method, but can't set value of sender which CheckBox;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T19:23:31.673

我假设由于某种原因你不能重构你的`Human`类来实现一些`ICheckable`接口，包含`IsChecked`，对吧？

如果您使用的是 C# 4.0，另一种方法是使用`dynamic`数据类型，这将允许您设置仅在运行时检查的属性：

```
private void CheckBoxLoaded(object sender, RoutedEventArgs e) {
     dynamic dynamicObject  = (sender as FrameworkElement).Tag;
     bool checkedState = dynamicObject.IsChecked;
} 
```

如果所有其他方法都失败了并且你真的必须使用反射，那么你已经完成了 90% 的工作。您只需要调用`PropertyInfo`对象的`GetValue`方法，为其提供您希望从中检索值的实例：

```
PropertyInfo prop = t.GetType().GetProperty("IsChecked"); // Simpler.
var isChecked = prop.GetValue(t, null);
(sender as CheckBox).IsChecked = isChecked; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T19:26:22.597

我建议重构它以使用基类或至少一个接口。但是，如果这是不可能的，简单地使用*动态*可以做到这一点：

```
dynamic obj = t;
bool value = t.IsChecked; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T20:08:58.380

这将切换状态：

```
private void CheckBoxLoaded(object sender, RoutedEventArgs e)
{
        var prop = e.GetType().GetProperty("IsChecked", 
                   BindingFlags.Instance | BindingFlags.Public);
        // read the current value
        var current = (bool)prop.GetValue(sender, null);
        //and toggle it
        prop.SetValue(sender, !current, null);
} 
```

尽管重构为基础/接口可能会更干净，而且性能肯定更好。如果它总是一个 CheckBox，那么这也是简单的路线：

```
private void CheckBoxLoaded(object sender, RoutedEventArgs e)
{
        var c = sender as CheckBox;
        // read the current value
        var current = c.IsChecked;
        //and toggle it
        c.IsChecked = !current;
} 
```

# javascript - Javascript对象被奇怪地删除了

> ID：11916945
> 
> 赞同：0
> 
> 时间：2012-08-11T19:18:23.447
> 
> 标签：javascript, jquery, ajax, gantt-chart

我使用`$(document).ready()`. 问题是 CATCH 被执行并且`err.message`返回的**g 没有定义**。但`alert(g)`返回**对象 Object**。我不明白为什么对象**g**被如此奇怪地删除了。请帮忙。

[http://jsfiddle.net/Udkkv/4/](http://jsfiddle.net/Udkkv/4/)

```
 <script>
function createChartControl(htmlDiv) {
      var g = new JSGantt.GanttChart('g',document.getElementById(htmlDiv), 'day');

        g.setShowRes(1); // Show/Hide Responsible (0/1)
        g.setShowDur(1); // Show/Hide Duration (0/1)
        g.setShowComp(1); // Show/Hide % Complete(0/1)
       g.setCaptionType('Resource');  // Set to Show Caption (None,Caption,Resource,Duration,Complete)

        // Parameters             (pID, pName,                  pStart,      pEnd,        pColor,   pLink,          pMile, pRes,  pComp, pGroup, pParent, pOpen, pDepend, pCaption)

        g.AddTaskItem(new JSGantt.TaskItem(1,   'Define Chart API',     '',          '',          'ff0000', 'http://help.com', 0, 'Brian',     0, 1, 0, 1));
        g.AddTaskItem(new JSGantt.TaskItem(11,  'Chart Object',         '7/20/2008', '7/20/2008', 'ff00ff', 'http://www.yahoo.com', 1, 'Shlomy',  100, 0, 1, 1));
        g.AddTaskItem(new JSGantt.TaskItem(12,  'Task Objects',         '',          '',          '00ff00', '', 0, 'Shlomy',   40, 1, 1, 1));
        g.AddTaskItem(new JSGantt.TaskItem(121, 'Constructor Proc',     '7/21/2008', '8/9/2008',  '00ffff', 'http://www.yahoo.com', 0, 'Brian T.', 60, 0, 12, 1));
        g.AddTaskItem(new JSGantt.TaskItem(122, 'Task Variables',       '8/6/2008',  '8/11/2008', 'ff0000', 'http://help.com', 0, 'Brian',         60, 0, 12, 1,121));
        g.AddTaskItem(new JSGantt.TaskItem(123, 'Task by Minute/Hour',       '8/6/2008',  '8/11/2008 12:00', 'ffff00', 'http://help.com', 0, 'Ilan',         60, 0, 12, 1,121));
        g.AddTaskItem(new JSGantt.TaskItem(124, 'Task Functions',       '8/9/2008',  '8/29/2008', 'ff0000', 'http://help.com', 0, 'Anyone',   60, 0, 12, 1, 0, 'This is another caption'));
        g.AddTaskItem(new JSGantt.TaskItem(2,   'Create HTML Shell',    '8/24/2008', '8/25/2008', 'ffff00', 'http://help.com', 0, 'Brian',    20, 0, 0, 1,122)); 

        g.Draw();   
        g.DrawDependencies();

      }

}
</script>

<script>
$(document).ready(function() {             
   createChartControl('schedule');
});

<div style="position:relative" class="gantt" id="schedule"></div> 
```

**更新：**我应该说，如果我在没有 $(document).ready() 的情况下运行此代码 - 即在 DIV 标签之后，那么它可以工作。怎么会这样？？？

**更新 2：**这里是复制项目： http: [//jsfiddle.net/Udkkv/4/](http://jsfiddle.net/Udkkv/4/)它不工作，但也许现在它会更容易帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T21:57:26.617

var g 在定义之前使用。问题出在您网站上的 .js 文件中：“http://www.jsgantt.com/jsgantt.js”。

```
if (vGroup != 1)
  {  
     vStart = JSGantt.parseDateStr(pStart,g.getDateInputFormat());
     vEnd   = JSGantt.parseDateStr(pEnd,g.getDateInputFormat());
  } 
```

在上面的代码中，您尝试使用：

```
g.getDateInputFormat() 
```

而 var g 仍未定义。

# iphone - 具有相同字符串值的两个 NSString 对象的内存地址

> ID：11916949
> 
> 赞同：-4
> 
> 时间：2012-08-11T19:18:32.107
> 
> 标签：iphone, objective-c, ios, xcode

> **可能重复：**
> [为什么这两个 NSString 指针相同？](https://stackoverflow.com/questions/11605851/why-are-these-two-nsstring-pointers-the-same)

s1 & s2 的内存地址会一样吗？

如果是，那么为什么？

如果两个字符串都是可变的怎么办？

```
NSString *s1 = @"Hello";

NSString *s2 = [[NSString alloc]initWithString:@"Hello"]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T19:22:34.573

> s1 & s2 的内存地址会一样吗？

也许——实现由基金会定义。

> 如果是，那么为什么？

当不需要复制时，实现可能会返回参数——当输入参数是不可变的时，您请求的对象的行为与输入参数相同`NSString`。当你传递不朽的`NSString`文字时，实现可以很容易地确定参数是不可变的，并选择返回参数（`retained`）。

当然，这是库（基金会）需要识别和支持的优化。

由于实现细节的差异，实现也可能选择*不*返回输入参数。例如，如果字符串是使用外部拥有的字符缓冲区创建的，则实现可能会返回一个新字符串。它也可能承认参数是可变的，那么当然需要返回一个新的不可变对象表示。

> 如果两个字符串都是可变的怎么办？

那么深度复制更有可能——实现由 Foundation 定义。但是，您将拥有唯一的实例（它们的地址将不匹配）。

# jquery - 返回带有 .each 的对象会引发未捕获的引用错误

> ID：11916954
> 
> 赞同：-1
> 
> 时间：2012-08-11T19:19:03.183
> 
> 标签：jquery

我正在将一些可以运行的代码重写为当前无法运行的代码。基本上，我循环遍历 div 以找出哪个是可见的，我想通过将此 div 缓存到 jquery 对象中来继续。

```
 $('#MainDiv .LPanel').each(function () {

        if ($(this).is(':visible') === true) {
            var ThePanel = $(this);
        }
    });

    if (ThePanel.width() < 700) { // bugs here 
```

为什么无法访问 ThePanel？我错过了什么？

感谢您的建议。

PS：有效的代码只是返回`attr('id');`，但我想要整个对象！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T19:22:09.807

您`var`在有限的范围内使用。正确的做法是：

```
var ThePanel;
$('#MainDiv .LPanel').each(function () {

    if ($(this).is(':visible') === true) {
        ThePanel = $(this);
    }
});

if (ThePanel.width() < 700) { // bugs here 
```

你为什么不做

```
var ThePanel = $("#MainDiv .LPanel:visible");
if (ThePanel && ThePanel.width() < 700) ... 
```

？？？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T19:21:04.417

`ThePanel`在循环外声明变量。每次回调完成时它都会超出范围。

# winforms - 列表框中项目的菜单？

> ID：11916956
> 
> 赞同：2
> 
> 时间：2012-08-11T19:19:18.453
> 
> 标签：winforms, user-interface, contextmenu

我不确定它叫什么或我应该查找什么。我正在使用附加的列表框和 ContentMenuStrip`listBox1.ContextMenuStrip = contextMenuStrip1;`

我想在我的列表框中右键单击项目并选择“删除”之类的内容。使用我现在拥有的内容，我可以单击列表框上的任何位置，并将结果应用于当前选定的项目。这令人困惑并且容易出错。

我如何使右键单击实际上映射到我的鼠标悬停的元素，并且当它不在元素上时不显示右键单击菜单（列表框中的空白区域）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T19:33:59.670

简单的解决方案（不完全是你要求的我知道的），只是确保在允许打开菜单之前选择一个项目。

您可以通过注册`ContextMenuStrip.Opening`事件来完成此操作，如果没有选择任何项目，则取消它。

如果我想到更聪明的东西，我会更新:)

[编辑]

好的，酷，有一个`IndexFromPoint`方法`ListBox`。您可以使用它来确定鼠标是否在某个项目上！如果您需要代码示例，请告诉我。

[编辑2]

好吧，好吧，我忍不住了..给你：

```
void ContextMenuStrip_Opening(object sender, System.ComponentModel.CancelEventArgs e)
    {
        if (listBox1.IndexFromPoint(listBox1.PointToClient(Cursor.Position)) == -1)
            e.Cancel = true;
    } 
```

# ruby-on-rails - 如何使用大量“have_link”使 rspec 测试保持干燥

> ID：11916962
> 
> 赞同：5
> 
> 时间：2012-08-11T19:20:00.913
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, tdd, railstutorial.org

我是 Ruby on Rails 的新手，我现在正在做[http://ruby.railstutorial.org](http://ruby.railstutorial.org)。

据我了解，该语言应该严格遵循这个 DRY 标准，但是当涉及到本教程中的测试驱动开发时，它是如此的湿。

例如

```
it { should have_link('Users', href: users_path) }
it { should have_link('Profile', href: user_path(user)) }
it { should have_link('Settings', href: edit_user_path(user)) }
it { should have_link('Sign out', href: signout_path) } 
```

在这里，我们有很多看起来几乎相同的行。

我试过这个

```
it "should have following links from this array" do
    [
        ['Users', href: users_path],
        ['Profile', href: user_path(user)],
        ['Settings', href: edit_user_path(user)],
        ['Sign out', href: signout_path]
    ].each { |a| page.should have_link(a[0], a[1]) }
end 
```

这段代码有效，但看起来很难看，而且行数更多。

所以我想知道将数组添加到 have_link 方法是否是一种更好的方法。

* * *

我现在有一个好主意，但我不知道如何让它发挥作用。

这是我的助手（它看起来不像我创建这个问题时所做的那样。它是在 Michaël Witrant 的回答后编辑的）

```
RSpec::Matchers.define :have_these_links do |*links|
    match do |actual|
        links.each do |link|
            have_link(link.first, link.extract_options!).matches?(actual)
        end
    end
end 
```

现在这应该是我的测试

```
it { should have_these_links(['Users', href: users_path],
                        ['Profile', href: user_path(user)],
                        ['Settings', href: edit_user_path(user)],
                        ['Sign out', href: signout_path]) } 
```

所以这可行，但它不是用户友好的。当我运行测试并且页面上不存在链接时，它告诉我我没有这些链接。但是我可以让助手告诉我我缺少哪个链接。这是我的错误代码

```
 expected #<Capybara::Session> to have these links ["Users", {:href=>"/users"}], ["Test Link", {:href=>"/Does_not_exist"}], and ["Profile", {:href=>"/users/991"}]
 # ./spec/requests/authentication_pages_spec.rb:42:in `block (4 levels) in <top (required)>' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-12T11:41:48.617

您可以编写自定义匹配器，但我认为这不是测试和 DRY 的想法。

在代码中，DRY 的口头禅鼓励将软件的每一条知识都保存在一个独特且明确的位置。这不是规范的目标。规范的目标是以明确且易于阅读的方式证明软件的正确性。

重复

```
it { should have_link('Users', href: users_path) } 
```

如果比声明和 [text, url] 数组并迭代它们更易读和易读，即使在某种自定义匹配器中也是如此。

在测试中，您应该更喜欢可读性而不是简洁性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-11T22:48:49.750

要定义自定义匹配器，您可以阅读[此功能](https://www.relishapp.com/rspec/rspec-expectations/v/2-11/docs/custom-matchers/define-matcher)和一些[灵感](https://github.com/rspec/rspec-expectations/issues/124)。

写这样的东西：

```
RSpec::Matchers.define :have_links do |expected|
  match do |actual|
    expected.all? do |name, options|
      have_link(name, options).matches?(actual)
    end
  end
end 
```

但是 IMO，您的第一次尝试是编写它的最佳方式：干净且易于阅读。

# javascript - Firefox：防止在富文本编辑中粘贴 (X)HTML

> ID：11916968
> 
> 赞同：0
> 
> 时间：2012-08-11T19:20:49.767
> 
> 标签：javascript, firefox, rich-text-editor

在某些时候，Mozilla 悄悄地添加了将 Firefox 中选择的实际 (X)HTML 代码复制到剪贴板的功能，而不仅仅是选择的文本内容。

这个问题可以从以下几个方面来回答：

*   是否有一个糟糕的文档 execCommand 可以防止粘贴文本/纯文本以外的任何内容？

*   有没有办法在粘贴事件期间将 (X)HTML 转换为文本/纯文本？

如果可以找到，我对 Firefox HTML 复制功能最感兴趣。

我宁愿不使用框架。

# algorithm - 对已排序的部分和进行有效迭代

> ID：11916974
> 
> 赞同：3
> 
> 时间：2012-08-11T19:21:35.107
> 
> 标签：algorithm, combinatorics

我有一个按升序排列的 N 个正数列表，从 L[0] 到 L[N-1]。

我想迭代 M 个不同列表元素的子集（没有替换，顺序不重要），1 <= M <= N，根据它们的部分总和排序。M 不是固定的，最终结果应该考虑所有可能的子集。

我只想要有效的 K 个最小子集（理想情况下是 K 中的多项式）。枚举所有 M <= K 的子集的明显算法是 O(K!)。

我可以通过将 K 个迭代器 (1 <= M <= K) 放在一个最小堆中并让主迭代器在堆根上运行，将问题减少到固定大小 M 的子集。

本质上我需要 Python 函数调用：

```
sorted(itertools.combinations(L, M), key=sum)[:K] 
```

...但高效（N ~ 200，K ~ 30），应该在不到 1 秒的时间内运行。

**例子：**

```
L = [1, 2, 5, 10, 11]
K = 8
answer = [(1,), (2,), (1,2), (5,), (1,5), (2,5), (1,2,5), (10,)] 
```

**回答：**

正如大卫的回答所示，重要的技巧是要输出一个子集 S，必须先前输出 S 的所有子集，特别是仅删除了 1 个元素的子集。因此，每次输出一个子集时，您都可以添加该子集的所有 1 元素扩展以供考虑（最多为 K），并且仍然确保下一个输出的子集将在所有考虑的子集的列表中观点。

**完全工作，更高效的 Python 函数：**

```
def sorted_subsets(L, K):
  candidates = [(L[i], (i,)) for i in xrange(min(len(L), K))]

  for j in xrange(K):
    new = candidates.pop(0)
    yield tuple(L[i] for i in new[1])
    new_candidates = [(L[i] + new[0], (i,) + new[1]) for i in xrange(new[1][0])]
    candidates = sorted(candidates + new_candidates)[:K-j-1] 
```

**更新，找到了一个 O(K log K) 算法。**

这类似于上面的技巧，但不是添加所有 1 元素扩展，其中添加的元素大于子集的最大值，您只考虑 2 个扩展：一个添加 max(S)+1，另一个添加将 max(S) 转换为 max(S) + 1 （最终将生成向右的所有 1 元素扩展）。

```
import heapq

def sorted_subsets_faster(L, K):
  candidates = [(L[0], (0,))]

  for j in xrange(K):
    new = heapq.heappop(candidates)
    yield tuple(L[i] for i in new[1])
    i = new[1][-1]
    if i+1 < len(L):
      heapq.heappush(candidates, (new[0] + L[i+1], new[1] + (i+1,)))
      heapq.heappush(candidates, (new[0] - L[i] + L[i+1], new[1][:-1] + (i+1,))) 
```

从我的基准测试来看，所有 K 值都更快。

另外，不需要提前提供 K 的值，我们可以随时迭代和停止，而不改变算法的效率。另请注意，候选者的数量以 K+1 为界。

*通过使用优先级双端队列*（最小-最大堆）而不是优先级队列，可能会进一步改进，但坦率地说，我对这个解决方案很满意。不过，我会对线性算法感兴趣，或者证明这是不可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T20:26:41.430

这是一些粗略的 Python 式伪代码：

```
final = []
L = L[:K]    # Anything after the first K is too big already
sorted_candidates = L[] 
while len( final ) < K:
    final.append( sorted_candidates[0] )  # We keep it sorted so the first option
                                          # is always the smallest sum not
                                          # already included
    # If you just added a subset of size A, make a bunch of subsets of size A+1
    expansion = [sorted_candidates[0].add( x ) 
                   for x in L and x not already included in sorted_candidates[0]]

    # We're done with the first element, so remove it
    sorted_candidates = sorted_candidates[1:]

    # Now go through and build a new set of sorted candidates by getting the
    # smallest possible ones from sorted_candidates and expansion
    new_candidates = []
    for i in range(K - len( final )):
        if sum( expansion[0] ) < sum( sorted_candidates[0] ):
            new_candidates.append( expansion[0] )
            expansion = expansion[1:]
        else:
            new_candidates.append( sorted_candidates[0] )
            sorted_candidates = sorted_candidates[1:]
    sorted_candidates = new_candidates 
```

我们将假设您将以一种有效的方式执行诸如删除数组的第一个元素之类的操作，因此循环中唯一真正的工作是构建扩展和重建 sorted_candidates。这两个步骤都少于 K 步，因此作为上限，您正在查看一个 O(K) 且运行 K 次的循环，因此该算法为 O(K^2)。

# r - 在ggplot2中使用构面时如何为其他几何子集数据子集？

> ID：11916984
> 
> 赞同：1
> 
> 时间：2012-03-16T13:53:43.560
> 
> 标签：r, ggplot2, data-visualization

我希望其他“geoms”仅适用于初始数据的子集。我希望这个子集来自由 facets=~ 创建的每个单元。

我使用数据或绘制变量的转租的试验导致整个数据集的子集化，而不是通过两种不同的方式（显然取决于数据的排序）对“facets=~”创建的单位进行转租）。

使用“facets”时，任何“geom”都会出现此困难

```
library(ggplot2)

test.data<-data.frame(factor=rep(c("small", "big"), each=9),
                              x=c(c(1,2,3,3,3,2,1,1,1), 2*c(1,2,3,3,3,2,1,1,1)),
                              y=c(c(1,1,1,2,3,3,3,2,1), 2*c(1,1,1,2,3,3,3,2,1)))

factor x y
1   small 1 1
2   small 2 1
3   small 3 1
4   small 3 2
5   small 3 3
6   small 2 3
7   small 1 3
8   small 1 2
9   small 1 1
10    big 2 2
11    big 4 2
12    big 6 2
13    big 6 4
14    big 6 6
15    big 4 6
16    big 2 6
17    big 2 4
18    big 2 2

qplot(data=test.data,
      x=x,
      y=y,
      geom="polygon",
      facets=~factor)+
      geom_polygon(data=test.data[c(2,3,4,5,6,2),],
                   aes(x=x,
                       y=y),
                   fill=I("red")) 
```

![在此处输入图像描述](../Images/b7910d98c6d94ec840ac1eacb0be12ac.png)

```
qplot(data=test.data,
      x=x,
      y=y,
      geom="polygon",
      facets=~factor)+
        geom_polygon(aes(x=x[c(2,3,4,5,6,2)],
                         y=y[c(2,3,4,5,6,2)]),
                     fill=I("red")) 
```

![在此处输入图像描述](../Images/aa2c277719a4eb426318fc4c8d11fd32.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-03-17T04:14:54.573

答案是在第一步中对数据进行子集化。

```
library(ggplot2)
library(plyr)

test.data<-data.frame(factor=rep(c("small", "big"), each=9),
                      x=c(c(1,2,3,3,3,2,1,1,1), 2*c(1,2,3,3,3,2,1,1,1)),
                      y=c(c(1,1,1,2,3,3,3,2,1), 2*c(1,1,1,2,3,3,3,2,1)))

subset.test<-ddply(.data=test.data,
                   .variables="factor",
                   function(data){
                     data[c(2,3,4,5,6,2),]})

qplot(data=test.data,
      x=x,
      y=y,
      geom="polygon",
      facets=~factor)+
        geom_polygon(data=subset.test,
                     fill=I("red")) 
```

![在此处输入图像描述](../Images/ef007774ccccaa8368441ec6760330f9.png)

# php - 防止@触发自定义错误处理程序

> ID：11916986
> 
> 赞同：0
> 
> 时间：2012-08-11T19:23:40.083
> 
> 标签：php

似乎 PHP 的错误抑制器`@`仍在触发我的自定义错误处理程序，尽管它没有在屏幕上显示错误。

例子：

`@json_decode(array());`

这不会在屏幕上输出错误消息，但仍会运行我的错误处理程序（例如，记录错误、向我发送电子邮件、终止脚本执行，就好像存在“真实”错误一样）。

有没有办法`@`完全保持沉默？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T21:06:25.213

如果您尝试检测有效的 json，则 atleat 确保您传递给的“参数”`json_decode`是字符串类型。

引用自 php.net：

> 以适当的 PHP 类型返回以 json 编码的值。值 true、false 和 null（不区分大小写）分别返回为 TRUE、FALSE 和 NULL。如果无法解码 json 或编码的数据深度超过递归限制，则返回 NULL。

因此`NULL`，我们正在寻找是否`JSON`无法解码。因此，无效的 JSON。但同样，只要确保传入的是字符串而不是其他类型，比如数组或布尔值或其他类型。因为那永远行不通。

我理解你的问题。@ 符号会抑制错误消息，但不会抑制实际的代码流。出错时仍会退出。但是你真的只需要放开@符号。

所以无论如何，你可能会有某种你调用的函数，它会做一些事情，包括`json_decode`. 这只是一个例子，但它应该让你明白我的意思。

```
<?php

// will fail, because it's not a string
$str1 = array ( "nooblol" ); 

// Will succeed. This is valid json
$str2 = '{"example":"value"}';

// Will fail, is of type string, but still an invalid json format
$str3 = 'invalid json string';

function saveData ( $json )
{
    // Check if the variable that we're about to pass
    // to json_decode() is an actual string. Otherwise we
    // have invalid json data anyway.
    if ( !is_string ( $json ) )
    {
        echo 'Invalid json (or invalid type)';
        return;
    }

    if ( !$obj = json_decode ( $json ) )
    {
        echo 'fail';
        return;
    }

    // Print json object
    print_r($obj);
}

saveData ( $str3 );

?> 
```

现场示例：[http](http://codepad.viper-7.com/KJL8st)`saveData` ://codepad.viper-7.com/KJL8st 将参数 更改为`$str1`或`$str2`以查看不同的结果。

这是检查您是否有有效 json 的方法。不要仅仅依靠`json_decode()`函数来告诉你它是否是有效数据。它是一个函数，它只需要一个字符串。所以确保你传入一个字符串。只有这样它才能告诉你它是否是有效的 json。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T19:27:33.730

我不相信你可以阻止错误处理程序看到被`@`.

但是，您可以隔离这些错误并忽略它们，风险自负。

将以下代码放入您的错误处理程序中：

```
// get the current error reporting level
$level = error_reporting();

// if error was supressed or $errno not set in current error level
if ($level == 0 || ($level & $errno) == 0) {
    return true;
} 
```

请注意，这`$errno`是错误处理程序回调的第一个参数。

# php - Uncaught SyntaxError: Unexpected token ILLEGAL load-scripts.php:1

> ID：11916987
> 
> 赞同：5
> 
> 时间：2012-07-16T17:07:52.843
> 
> 标签：php, scripting, localhost

我正在使用以下方法在本地开发一个 wordpress 插件：

*   MAMP（更新到 PHP 5.4.4）
*   PhpStorm
*   铬合金

我已经关闭了短标签、魔术引号和 zlib 压缩，但偶尔会`load-scripts.php`出现乱码：

![破碎的页面](../Images/2a45b4756f67304528c1038112b8231f.png)

管理区域没有样式，页面上的任何脚本都没有加载或工作。

有时，尽管它们确实可以进行一些硬刷新（ shift + cmd + r ）

我看过一些类似的例子并尝试了他们的修复，但无济于事（因此禁用了短标签、魔术引号和 zlib 压缩）。

我已经在 Firefox 中尝试过，但它坏了……但是当我硬刷新页面几次时，问题就消失了。

我无法在 Safari 中复制该问题。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-09T15:28:15.277

我遇到过同样的问题。从该域中删除我的 cookie 并清除我的缓存修复了它。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-17T17:23:29.300

正如 hakre 所指出的，这个问题几乎可以肯定是 MAMP 中的缓存设置。您需要通过转到 MAMP > 首选项 > PHP 并将缓存设置为“--”来禁用它。重新启动 MAMP，清除浏览缓存和 cookie 并重新加载页面。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T19:25:28.870

请清理您的浏览器缓存并删除所有 cookie。还要禁用本地主机网络服务器安装上的任何缓存。

根据您的描述，我假设这是 apache 网络服务器缓存，它这样做是因为您曾经启用了压缩，PHP 可能在您将其配置为不之前透明地完成了一些事情。

查看您的网络服务器手册并停用任何缓存。任何。这对于调试问题很重要。

还要禁用任何可能设置标头的内容，以告诉浏览器可以在浏览器缓存中缓存某些内容。请参阅您的网络服务器手册并禁用任何此类内容。

如果网络服务器已经缓存了这些响应，您可以重新加载您想要多少，您将始终看到这一点，但如果重复重新加载一个或其他请求的停用缓存，则不会。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-25T19:06:29.863

重新上传整个`wp-includes`目录为我解决了这个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-02T23:20:53.140

**只需重新启动我的 Mamp Web 服务器即可解决问题。**

我还清空了浏览器缓存并删除了 cookie，但这*并没有*帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-06T17:43:50.007

就我而言，当我尝试将[DOMDocument](http://php.net/manual/en/class.domdocument.php)（文件）保存在不存在的文件夹中时，错误出现了。我试图做这样的事情：

`$xml->save("TEMP/test.xml");`

但是该文件夹`TEMP`不存在，因此错误出现了。

将文件保存到**当前目录**（例如`$xml->save("test.xml");`修复了问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-11-10T16:56:24.510

当您打开这些开发工具时，如果您单击并按住刷新按钮，应该会出现一些额外的选项。这里没有其他解决方案对我有用，但该`Empty Cache and Hard Reload`下拉菜单中的选项清除了它。

# php - Apache Module开发：PHP SESSION访问

> ID：11916991
> 
> 赞同：0
> 
> 时间：2012-08-11T19:24:50.843
> 
> 标签：php, apache2, session-variables, session-state, apache-modules

我正在尝试开发一个 Apache 2 模块，除其他功能外，它应该拦截某些 POST 变量，然后在下面建立一个 PHP 会话，设置所有相关的会话变量。

我考虑过的一种选择是使用 cookie 库在请求中设置 PHPSESSID，然后将所有这些值插入到 $_SESSION 关联数组中。

问题是我似乎找不到 PHP 的 API，而且我怀疑这些值实际上位于 Apache 服务器本身的底层，目前是没有根据的。

有谁知道这是否可能？或者即使我忽略了一个可行的简单解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T10:30:00.123

我最终决定编写一个 PHP 扩展，以及我的 Apache 模块上的另一个处理程序，因为我更喜欢在那里解析一些 POST 变量。

该模块将“咀嚼”需要保存到会话中的数据，并将其作为新的 POST 变量传递，在对数据进行密码验证之后。然后 PHP 扩展将启动一个新会话，并将每个项目设置为一个 Session 变量。

这假设我的模块将在 PHP 模块本身之前运行。如果这没有发生，我将不得不处理 PHP 上的验证，或者尝试以某种方式强制处理程序在 PHP 之前运行。

# jquery - CSS3 动画填充模式：转发

> ID：11916996
> 
> 赞同：2
> 
> 时间：2012-08-11T19:26:04.890
> 
> 标签：jquery, animation, css

目前只使用谷歌浏览器。

我认为添加`-webkit-animation-fill-mode: forwards;`将保持动画的最终状态。

请参见[此处的示例](http://jsfiddle.net/BYfDZ/14/)。

为什么图像不能保持在 -180 度？

编辑：我希望动画能够再次运行，就像它们在最后一个动画结束时一样。这是问题的简化版本 - 实际问题旋转 15 度，我希望图像在每次运行时再旋转 15 度。如果我不删除该类，则第二次单击该按钮不会执行任何操作。

CSS：

```
.flip180 {
    -webkit-animation-name: flip180;
    -webkit-animation-duration: 0.5s;
    -webkit-animation-iteration-count: 1;
    -webkit-animation-fill-mode: forwards;
}

@-webkit-keyframes flip180 {
    from { -webkit-transform: rotateX(0); }
    to   { -webkit-transform: rotateX(-180deg); }
} 
```

HTML：

```
<button id="flipButton">Flip</button>

<img id="shape" src="http://media.creativebloq.futurecdn.net/sites/creativebloq.com/files/articles/article/2012/07/darth.jpg">​ 
```

Javascript：

```
$(document).ready(function() {
    $('#flipButton').click(function() {
        $('#shape').addClass('flip180').on('webkitAnimationEnd', function() {
            $('#shape').removeClass('flip180');
        });
    });
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T19:37:02.277

```
Check out mine : http://jsfiddle.net/BYfDZ/16/ 
```

我的建议是在您添加到您的课程后不要删除“flip180”课程

# node.js - Socket.IO 只在本地工作

> ID：11916999
> 
> 赞同：22
> 
> 时间：2012-08-11T19:26:17.240
> 
> 标签：node.js, socket.io

我有这个 Node.JS**服务器**：

```
var app = require('express')();
var server = app.listen(80);
var io = require('socket.io').listen(server);
var posx = 10;
var posy = 10;

app.get('/', function (req, res) {
    res.sendfile( __dirname + '/index.html' );
});

io.sockets.on('connection', function (socket) {
    socket.emit('start', {
        x: posx,
        y: posy
    });

    socket.on('newpos', function (data) {
        posx = data["x"];
        posy = data["y"];
        socket.broadcast.emit('move', { x: posx, y: posy });
    });
}); 
```

**客户端代码：**

```
 var socket = io.connect('http://localhost');

            socket.on('start', function (data) {
                $("#pointer").animate({
                    'top': data["y"],
                    'left': data["x"]
                }, 0);
            });

            socket.on('move', function (data) {
                $("#pointer").animate({
                    'top': data["y"],
                    'left': data["x"]
                }, "slow");
            });

            $("#pointer").draggable({
                stop: function(event, ui) {
                    var pos = $("#pointer").position();

                    socket.emit('newpos', {
                        'x': pos.left,
                        'y': pos.top
                    });
                }
            }); 
```

问题是它似乎只在本地工作。在 ubuntu chrome 上我得到：

```
XMLHttpRequest cannot load http://localhost/socket.io/1/?t=1344711676473\. Origin http://192.168.1.130 is not allowed by Access-Control-Allow-Origin. 
```

在 Mac 上，我对同一个文件有 GET 错误...

知道问题可能是什么吗？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-08-11T22:41:56.903

站点的域与其托管位置无关，它与您用来访问它的 URL 有关。

即使“192.168.1.130”和“localhost”解析到同一个服务器，它们也被认为是不同的域。

结果，因为您有客户端代码：

```
var socket = io.connect('http://localhost'); 
```

您正在连接到*域*localhost。如果客户端代码由 localhost 提供，那你很好，但如果你从另一个域（例如 192.168.1.130）加载客户端，那么你将面临问题。从浏览器和服务器的角度来看，您很容易成为一个尝试访问该服务的陌生人。

要解决此问题，请将客户端套接字创建更改为：

`var socket = io.connect('192.168.1.130');`

你的问题应该已经解决了。

但实际上，您应该完全删除参数并尝试运行：

`var socket = io.connect();`

这样，它将默认为您所基于的任何域，并且它将在 localhost、IP 以及最终您使用的域名上工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T19:51:07.673

将 app.listen(80) 更改为 app.listen(80, '192.168.1.130') 以使用该 IP，这样您来自 socket.io 的 URL 应该是正确的。即使您在本地计算机上尝试，也请务必在浏览器中从 192.168.1.130 访问它。