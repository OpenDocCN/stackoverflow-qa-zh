# StackOverflow 问答 10178000-10178999

# ruby-on-rails - 如何向 Active Admin 仪表板添加过滤器？

> ID：10178000
> 
> 赞同：2
> 
> 时间：2012-04-16T16:28:35.597
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activeadmin

我想在 Active Admin Dashboard 页面上为我的几个模型添加搜索功能。我怎么做？

对于常规模型，我可以使用“过滤器”来做到这一点，但我如何在仪表板视图中做到这一点。section 和 ActiveAdmin::Dashboards.build 中有哪些可用的方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-23T15:37:34.060

添加我是如何做到的（遵循 Sjors 的建议），以便其他人可能会发现它有用：

在dashboards.rb 中：

```
 section "Search User", :priority => 4 do
    div do
      render "search_user"
    end
  end 
```

在views/admin/dashboard/_search_user.html.erb（使用firebug复制的用户过滤器的HTML）：

```
<div class="panel_contents">
  <form method="get" id="q_search" class="filter_form" action="/admin/users" accept-charset="UTF-8">
    <div class="filter_form_field filter_string">
      <label for="q_email" class=" label">Search Email:</label>
      <input type="text" name="q[email_contains]" id="q_email" />
      <input type="submit" value="Go" name="commit" id="q_submit" />
    </div>
  </form>
</div> 
```

# multithreading - Powershell v2.0 使用多线程

> ID：10178003
> 
> 赞同：3
> 
> 时间：2012-04-16T16:28:47.437
> 
> 标签：multithreading, powershell

基本脚本思想：你好。我创建了一个 powershell 脚本，用于检查某些可执行文件的文件大小，然后将它们保存在文本文件中。下次脚本运行时，如果文件大小不同，它将用新文件替换文本文件中的文件大小。

结构：我有一个主脚本和一个包含许多脚本的文件夹，每个脚本用于我要检查文件大小的每个可执行文件。因此文件夹中的脚本将返回一个包含可执行文件链接的字符串，该链接将被提供给主脚本。

编码：

```
$progdir = "C:\script\programms"
$items = Get-ChildItem -filter *.ps1 -Path $progdir
$webclient = New-Object System.Net.WebClient

$filesizes = get-content C:\updatechecker\programms\filesizes
if ($filesizes.length -ne $items.length) { 
    if ($filesizes.length -eq $null) {
        Write-Host ("Building filesize database...") -nonewline
    } 
    else { 
        Write-Host ("Rebuilding filesize database...") -nonewline 
    }
    clear-content  C:\programms\filesizes

    for ($i=0; $i -le $items.length-1; $i++) {
        $command = "c:\programms\" + $items[$i].name
        $link = & $command
        $webclient.OpenRead($link) | Out-Null
        $filesize = $webclient.ResponseHeaders["Content-Length"]
        $filesize >> C:\programms\filesizes
    }
    echo "Done." 
} 
else {
    ... 
```

问题：这个 for 循环是我想要并行运行的循环。由于我是 powershell 新手，因此我需要您对如何执行此操作的建议。我尝试实现我发现的一些东西，但它们无法正常工作（完成时间很长，输出错误，我的文件大小文件中的多个文件大小条目）。我怀疑这是一个同步问题，不知何故我需要锁定关键部分。powershell中没有类似omp parallel for的东西吗？:P

任何帮助，如何实现这一点的建议将不胜感激:)

编辑：

```
Get-Job | Remove-Job -Force
$progdir = "C:\programms"
$items = Get-ChildItem -filter *.ps1 -Path $progdir
$webclient = New-Object System.Net.WebClient
$filesizes = get-content C:\programms\filesizes

$jobWork = {
    param ($MyInput)
    $command = "c:\programms\" + $MyInput
    $link = & $command
    $webclient.OpenRead($link) | Out-Null
    $filesize = $webclient.ResponseHeaders["Content-Length"]
    $filesize >> C:\programms\filesizes

}
foreach ($item in $items) {

    Start-Job -ScriptBlock $jobWork -ArgumentList $item.name | out-null
}

Get-Job | Wait-Job
Get-Job | Receive-Job | Out-GridView | out-null
echo "Done." 
```

编辑 2：我在这里找到的使用代码：[http ://ryan.witschger.net/?p=22](http://ryan.witschger.net/?p=22)

```
$mutex = new-object -TypeName System.Threading.Mutex -ArgumentList $false, “RandomGlobalMutexName”;
$MaxThreads = 4
$SleepTimer = 500

$jobWork = {
    param ($MyInput)
    $webclient = New-Object System.Net.WebClient
    $command = "c:\programms\" + $MyInput
    $link = & $command
    $webclient.OpenRead($link) | Out-Null

    $result = $mutex.WaitOne();

    $file = $webclient.ResponseHeaders["Content-Length"]
    $file >> C:\programms\filesizes

    $mutex.ReleaseMutex();
}

$progdir = "C:\programms"
$items = Get-ChildItem -filter *.ps1 -Path $progdir
$webclient = New-Object System.Net.WebClient
$filesizes = get-content C:\programms\filesizes

Get-Job | Remove-Job -Force

$i = 0

ForEach ($item in $items){
    While ($(Get-Job -state running).count -ge $MaxThreads){

        Start-Sleep -Milliseconds $SleepTimer
    }

    $i++
    Start-Job -ScriptBlock $jobWork -ArgumentList $item.name | Out-Null

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T19:38:17.940

您可以在后台作业中运行循环的每次迭代，这与单独的线程不同，因为它是另一个 PowerShell.exe 进程。数据通过序列化从后台进程传递。

要使用后台作业来处理它，您需要定义一个脚本块来执行实际工作，然后在循环的每次迭代中使用参数调用脚本块。脚本块可以通过`Write-Output`或抛出异常来报告状态。

您可能希望限制正在运行的并发后台作业的数量。以下是如何节流的示例：

```
$jobItems = "a", "b", "c", "d", "e"
$jobMax = 2
$jobs = @()

$jobWork = {
    param ($MyInput)
    if ($MyInput -eq "d") {
        throw "an example of an error"
    } else {
        write-output "Processed $MyInput"
    }
}

foreach ($jobItem in $jobItems) {
    if ($jobs.Count -le $jobMax) {
        $jobs += Start-Job -ScriptBlock $jobWork -ArgumentList $jobItem
    } else {
        $jobs | Wait-Job -Any
    }
}
$jobs | Wait-Job 
```

作为替代方案，您可以尝试事件。查看这个线程，了解如何使用事件实现并发的一些示例。

[PowerShell：DownloadFileAsync 的运行空间问题](https://stackoverflow.com/questions/4926060/powershell-runspace-problem-with-downloadfileasync)

您也许可以将 DownloadFileAsync 替换为[OpenReadAsync](http://msdn.microsoft.com/en-us/library/ms144211.aspx)

# android - 活动和 XML 上的 dpi

> ID：10178004
> 
> 赞同：0
> 
> 时间：2012-04-16T16:28:47.607
> 
> 标签：android, resize, screen, dpi

为什么 XML 文件中使用的 dp 与活动中使用的 dp 不同？当我在宽度为 20dp 的 XML 文件中创建一个 textView 时，它的大小在所有不同类型的屏幕中都是相同的，但是当我使用它时：

```
int sizeInDip = 20;
int width= TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, sizeInDip, getResources().getDisplayMetrics()); 
```

所有类型的屏幕尺寸都不同。

我想知道是否有办法在活动和 XML 文件中使用 dp 获得相同的结果。

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T16:32:04.280

你为什么要那样做？IIRC，有一个 TextView.setSize 方法，您可以以编程方式调用，只需将大小设置为 20dp。此外，您应该使用 sp（可缩放像素）作为文本大小

# iphone - Coredata关系实体创建

> ID：10178005
> 
> 赞同：0
> 
> 时间：2012-04-16T16:28:51.503
> 
> 标签：iphone, ios, core-data

我有一个关于 coredata 关系的问题。

本质上，如果我有 1 个实体称为父实体，而另一个与之有关系的实体是子实体，它是反向的。

如果我创建父实体，它也会创建子实体吗？我已将“parentchildrenrelationship”设置为可选，但看起来每次我创建父实体时，它都会创建子实体。

这是正常的吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T16:42:28.827

Core Data 不应该*自动*创建实体来实现关系，特别是如果关系是可选的。新创建的父实体的值`children`应该是`nil`（对于一对一关系）或空 NSSet 或 NSArray（对于一对多关系，取决于排序）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T16:44:17.633

这是不正常的。你确定你没有创建子实体吗？仅仅因为您创建一个实体并不意味着它会创建它所引用的实体。

# asp.net-mvc-3 - ajax调用后MVC3重定向到动作

> ID：10178007
> 
> 赞同：17
> 
> 时间：2012-04-16T16:28:57.960
> 
> 标签：asp.net-mvc-3, jquery, redirect

在 ASP.NET MVC3 应用程序中，我在视图中有一个按钮。

单击按钮时，将调用一个函数，并调用 jquery ajax 将项目保存到数据库

```
 function SaveMenuItems() {
        var encodeditems = $.toJSON(ids);;
        $.ajax({
            type: 'POST',
            url: '@Url.Action("SaveItems", "Store")',
            data: 'items=' + encodeditems + '&storeKey=@Model.StoreID',
            complete: function () {
                    }
                }
            });
        } 
```

我想要的是在项目保存到数据库后我想重定向到另一个视图。（重定向到行动）

我怎样才能做到这一点？

我尝试`return RedirectToAction("Stores","Store")`在函数结束时在控制器中使用`SaveItems`。但它不工作

我还尝试添加`window.location.replace("/Store/Stores");`ajax 调用的完整功能，但也没有工作

任何帮助是极大的赞赏

非常感谢

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-16T16:34:49.653

您可以使用 javascript 重定向到新页面。`window.location.href`在 ajax 调用的`success`/`complete`事件中将值设置为新的 url。

```
var saveUrl = '@Url.Action("SaveItems","Store")';
var newUrl= '@Url.Action("Stores","Store")';

$.ajax({
    type: 'POST',
    url: saveUrl,
    // Some params omitted 
    success: function(res) {
        window.location.href = newUrl;
    },
    error: function() {
        alert('The worst error happened!');
    }
}); 
```

或者在`done`活动中

```
$.ajax({      
    url: someVariableWhichStoresTheValidUrl
}).done(function (r) {
     window.location.href = '@Url.Action("Stores","Store")';
}); 
```

上面的代码使用`Url.Action`辅助方法来构建正确的相对 url 到 action 方法。如果您的 javascript 代码位于外部 javascript 文件中，您应该将 url 构建到应用程序根目录并将其传递给外部 js 文件中的脚本/代码，并使用它来构建操作方法的 url，如[本文](https://stackoverflow.com/questions/34360537)所述。

**传递参数？**

如果你想将一些查询字符串参数传递给新的 url，你可以使用[这个方法的重载](https://msdn.microsoft.com/en-us/library/system.web.mvc.urlhelper.action(v=vs.118).aspx#M:System.Web.Mvc.UrlHelper.Action%28System.String,System.String,System.Object%29)，`Url.Action`它也接受路由值来构建带有查询字符串的 url。

```
var newUrl = '@Url.Action("Stores","Store", new { productId=2, categoryId=5 })'; 
```

其中 2 和 5 可以替换为其他一些实数值。

由于这是一个 html 辅助方法，它只能在您的 razor 视图中工作，而不是在外部 js 文件中。如果您的代码在外部 js 文件中，则需要手动构建 url 查询字符串参数。

### 在服务器端生成新的 url

使用 mvc 辅助方法为 action 方法生成正确的 url 总是一个好主意。从您的操作方法中，您可以返回一个 json 结构，该结构具有要重定向的新 url 的属性。

您可以使用`UrlHelper`控制器中的类来执行此操作。

```
[HttpPost]
public ActionResult Step8(CreateUser model)
{
  //to do : Save
   var urlBuilder = new UrlHelper(Request.RequestContext);
   var url = urlBuilder.Action("Stores", "Store");
   return Json(new { status = "success", redirectUrl = url });            
} 
```

现在在您的 ajax 调用的`success`/`done`回调中，只需检查返回值并根据需要重定向。

```
.done(function(result){
   if(result.status==="success")
   {
      window.location.href=result.redirectUrl;
   }
   else
   {
      // show the error message to user
   }
}); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-02-02T12:07:59.517

在行动中，你可以这样写：

```
if(Request.IsAjaxRequest()) {
    return JavaScript("document.location.replace('"+Url.Action("Action", new { ... })+"');");  // (url should be encoded...)
} else {
    return RedirectToAction("Action", new { ... });
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-16T16:32:10.430

尝试

```
window.location = "/Store/Stores"; 
```

反而。

# mysql - 优化 MySQL 查询

> ID：10178013
> 
> 赞同：0
> 
> 时间：2012-04-16T16:29:36.963
> 
> 标签：mysql, optimization

我想运行一个为广告系列生成收入报告的查询。有 2 个表成员和付款。

```
members (id, campaign_code)
payments (id, member_id, amount) 
```

我想创建一个按 分组的表格`campaign_code`，即以这种格式

```
campaign_code, member_count, total_revenue 
```

我将所有广告系列放入一个数组并运行它，

```
SELECT sum( amount ) AS amt
FROM (members
INNER JOIN payments 
    ON payments.member_id = members.id
)
WHERE campaign_code = 'XX' 
```

这需要很多时间。无论如何要优化它还是在单个查询中完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T17:32:12.200

正如您所说，您需要对所有广告系列代码进行聚合，试试这个

```
SELECT m.campaign_code , count(p.member_id) AS member_count,
  SUM( amount ) AS total_revenue
FROM members m, payments p
WHERE p.member_id = m.id
GROUP BY campaign_code; 
```

确保按功能阅读 mysql 组

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T16:36:17.840

采用

```
where campaing_code in ('XX','YY','ZZ','AA','BB') 
```

并在 campaing_code 上有一个索引

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T17:05:03.737

付款（id，member_id，amount）我想创建一个按campaign_code分组的表，即这种格式

campaign_code、member_count、total_revenue 我将所有广告系列放入一个数组并运行它，

```
select
      m.Campaign_Code,
      count( distinct p.member_id) as Members,
      count(*) as PaymentEntries,
      sum( p.amount ) as TotalRevenue
   from
      members m
         join Payments p
            on m.id = p.member_id
   where
      m.campaign_code = 'XX' 
```

如果您想要所有广告系列，只需删除 WHERE 子句。您在评论中提到表确实有索引，但我会确保成员表在campaign_code 上有索引，并且支付在member_id 上有索引。

此查询将提供已贡献的不同成员的计数、贡献的总数（如果一个或多个成员多次贡献）以及所有贡献的总数。

# visual-studio-2010 - TeamCity 无法在包含空格的 TFS 项目集合上运行

> ID：10178014
> 
> 赞同：3
> 
> 时间：2012-04-16T16:29:46.113
> 
> 标签：visual-studio-2010, tfs, continuous-integration, teamcity

我设置了 TeamCity 7 来针对多个 .Net/VS2010 项目运行 CI。其中一个项目位于包含空格的项目集合中，当我尝试在该项目上运行构建时，它会将其添加到队列中并说没有代理兼容。当我单击无代理时，它会在兼容代理列表下显示我的所有代理。

我设置的其他项目仅因它们所在的项目集合而有所不同。其他集合下的项目（没有空格），以及另一个针对 Git 的设置，都可以正常工作。不幸的是，由于我无法控制的因素，目前可能无法重命名项目集合。

我已经确保项目集合名称已转义（`My%%20Collection`对于`My Collection`，根据此 JetBrains 工作项：http: [//youtrack.jetbrains.com/issue/TW-18726](http://youtrack.jetbrains.com/issue/TW-18726)）并且找不到有关如何使其工作的任何其他信息.

有谁知道为什么 TeamCity 不适用于包含空间的项目集合下的 TFS 项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:45:56.373

这是TeamCity 中已修复的[错误。](http://youtrack.jetbrains.com/issue/TW-21138)升级到 7.0.3 或更高版本将解决此问题。

# mysql - 将文本添加到 MySQL 列的名称

> ID：10178018
> 
> 赞同：7
> 
> 时间：2012-04-16T16:29:59.647
> 
> 标签：mysql

假设一个查询，例如：

```
SELECT * FROM tableA; 
```

如何`a_`在每列的名称前添加？例如，如果有一列“用户名”，它将在结果中作为“a_username”访问。

**编辑：**格式`SELECT username AS a_username`无济于事，因为我需要继续使用`*`字段选择。存在 JOIN，并且与 JOIN 中另一个表的返回列存在潜在冲突。我将遍历返回的列 (foreach)，并且只想将来自特定表的列（其架构可能会更改）输出到 HTML 输入字段，站点管理员可以在其中直接编辑字段的内容。有问题的 SQL 查询看起来像`SELECT firstTable.*, anotherTable.someField, anotherTable.someOtherField`，并且它们存在 someField 或 someOtherField 存在于 firstTable 中的可能性。

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-24T17:29:58.263

您可以使用 INFORMATION_SCHEMA.COLUMNS 表来制定查询，然后使用动态 SQL 来执行它。

首先让我们创建一个名为的示例数据库`dotancohen`和一个名为`mytable`

```
mysql> drop database if exists dotancohen;
Query OK, 1 row affected (0.03 sec)

mysql> create database dotancohen;
Query OK, 1 row affected (0.00 sec)

mysql> use dotancohen
Database changed
mysql> create table mytable
    -> (
    ->     id int not null auto_increment,
    ->     username varchar(30),
    ->     realname varchar(30),
    ->     primary key (id)
    -> );
Query OK, 0 rows affected (0.06 sec)

mysql> insert into mytable (realname,username) values
    -> ('rolando','odnalor'),('pamela','alemap'),
    -> ('dominique','euqinimod'),('diamond','dnomaid');
Query OK, 4 rows affected (0.05 sec)
Records: 4  Duplicates: 0  Warnings: 0

mysql> select * from mytable;
+----+-----------+-----------+
| id | username  | realname  |
+----+-----------+-----------+
|  1 | odnalor   | rolando   |
|  2 | alemap    | pamela    |
|  3 | euqinimod | dominique |
|  4 | dnomaid   | diamond   |
+----+-----------+-----------+
4 rows in set (0.00 sec)

mysql> 
```

这是名为 INFORMATION_SCHEMA.COLUMNS 的元数据表：

```
mysql> desc INFORMATION_SCHEMA.COLUMNS;
+--------------------------+---------------------+------+-----+---------+-------+
| Field                    | Type                | Null | Key | Default | Extra |
+--------------------------+---------------------+------+-----+---------+-------+
| TABLE_CATALOG            | varchar(512)        | NO   |     |         |       |
| TABLE_SCHEMA             | varchar(64)         | NO   |     |         |       |
| TABLE_NAME               | varchar(64)         | NO   |     |         |       |
| COLUMN_NAME              | varchar(64)         | NO   |     |         |       |
| ORDINAL_POSITION         | bigint(21) unsigned | NO   |     | 0       |       |
| COLUMN_DEFAULT           | longtext            | YES  |     | NULL    |       |
| IS_NULLABLE              | varchar(3)          | NO   |     |         |       |
| DATA_TYPE                | varchar(64)         | NO   |     |         |       |
| CHARACTER_MAXIMUM_LENGTH | bigint(21) unsigned | YES  |     | NULL    |       |
| CHARACTER_OCTET_LENGTH   | bigint(21) unsigned | YES  |     | NULL    |       |
| NUMERIC_PRECISION        | bigint(21) unsigned | YES  |     | NULL    |       |
| NUMERIC_SCALE            | bigint(21) unsigned | YES  |     | NULL    |       |
| CHARACTER_SET_NAME       | varchar(32)         | YES  |     | NULL    |       |
| COLLATION_NAME           | varchar(32)         | YES  |     | NULL    |       |
| COLUMN_TYPE              | longtext            | NO   |     | NULL    |       |
| COLUMN_KEY               | varchar(3)          | NO   |     |         |       |
| EXTRA                    | varchar(27)         | NO   |     |         |       |
| PRIVILEGES               | varchar(80)         | NO   |     |         |       |
| COLUMN_COMMENT           | varchar(1024)       | NO   |     |         |       |
+--------------------------+---------------------+------+-----+---------+-------+
19 rows in set (0.02 sec)

mysql> 
```

您需要从该表中获取以下列：

*   表模式
*   表名
*   列名
*   ordinal_position

您要求的是在 column_name 和 column_name 前面加上`a_`

这是查询以及如何执行它：

```
select concat('select ',column_list,' from ',dbtb) into @newsql
from (select group_concat(concat(column_name,' a_',column_name)) column_list,
concat(table_schema,'.',table_name) dbtb from information_schema.columns
where table_schema = 'dotancohen' and table_name = 'mytable'
order by ordinal_position) A;
select @newsql;
prepare stmt from @newsql;
execute stmt;
deallocate prepare stmt; 
```

让我们执行它

```
mysql> select concat('select ',column_list,' from ',dbtb) into @newsql
    -> from (select group_concat(concat(column_name,' a_',column_name)) column_list,
    -> concat(table_schema,'.',table_name) dbtb from information_schema.columns
    -> where table_schema = 'dotancohen' and table_name = 'mytable'
    -> order by ordinal_position) A;
Query OK, 1 row affected (0.01 sec)

mysql> select @newsql;
+--------------------------------------------------------------------------------+
| @newsql                                                                        |
+--------------------------------------------------------------------------------+
| select id a_id,username a_username,realname a_realname from dotancohen.mytable |
+--------------------------------------------------------------------------------+
1 row in set (0.00 sec)

mysql> prepare stmt from @newsql;
Query OK, 0 rows affected (0.00 sec)
Statement prepared

mysql> execute stmt;
+------+------------+------------+
| a_id | a_username | a_realname |
+------+------------+------------+
|    1 | odnalor    | rolando    |
|    2 | alemap     | pamela     |
|    3 | euqinimod  | dominique  |
|    4 | dnomaid    | diamond    |
+------+------------+------------+
4 rows in set (0.01 sec)

mysql> deallocate prepare stmt;
Query OK, 0 rows affected (0.00 sec)

mysql> 
```

试试看 ！！！

您在问题中提到： SELECT username AS a_username 格式无济于事，因为我需要继续使用 * 字段选择。

要实现我的建议，您所要做的就是使用 tableA 运行查询，如下所示：

```
select concat('select ',column_list,' from ',dbtb) into @newsql
from (select group_concat(concat(column_name,' a_',column_name)) column_list,
concat(table_schema,'.',table_name) dbtb from information_schema.columns
where table_schema = DATABASE() and table_name = 'tableA'
order by ordinal_position) A; 
```

当您检索该查询结果时，只需将其用作提交到[**mysql_query**](http://us3.php.net/manual/en/function.mysql-query.php)的查询。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T16:31:35.277

您需要列出列，例如

```
SELECT username AS a_username FROM tableA; 
```

或者，在后端进行后处理，例如更改代码中的数组键

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T10:19:31.663

创建一个包含重命名列的视图，例如 -

```
CREATE VIEW a_view AS SELECT username AS a_username FROM table; 
```

然后参考这个观点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-24T13:47:00.127

如前所述，没有标准方法可以在常规查询中为列名添加前缀。

但是如果你真的想实现它，你可以编写一个存储过程，它会查询 information_schema 以获取表中的列列表，然后一一添加前缀。之后，可以将查询连接为字符串，`PREPARE`然后将其连接`EXECUTE`起来。

这种方法的一个缺点是您不能加入存储过程的结果。但是，当然，您也可以为您发出的每种类型的查询创建一个存储过程。然后可以将任何表的字段前缀作为单独的 generic `FUNCTION`。

不过，在我看来，所有这些东西都像是矫枉过正。我建议要么重命名实际的列，以便它们始终带有前缀，要么只列出所有带有`AS`别名的结果字段，如 Scibuff 和 A​​lister 建议的那样。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T16:34:18.873

我不相信它可以自动为所有列完成，但您可以列出任意数量的列`AS`

```
SELECT id    AS a_id, 
       name  AS a_name, 
       email AS a_email  /*, etc....*/
FROM tableA; 
```

我只是为了更清楚而插入了换行符。

# php - 文件夹选择对话的表现

> ID：10178021
> 
> 赞同：0
> 
> 时间：2012-04-16T16:30:05.973
> 
> 标签：php, jquery, directory, dynatree

我需要提供用户整个硬盘驱动器的文件夹选择（脚本在用户电脑上运行）。从该列表中，用户可以选择一个或多个文件夹。我正在使用 jquery 库 dynatree ( [http://code.google.com/p/dynatree/](http://code.google.com/p/dynatree/) ) 进行演示。

我的脚本是这样工作的：

1.列出指定驱动器号或路径的所有文件夹，并通过此递归函数将其解析为Dynatree可读格式：

代码：

```
function getDirectory( $path = '.', $level = 0, $id = 0){ 
$ignore = array( 'cgi-bin', '.', '..' , 'windows', 'user_folders', 'user_profiles'); 
$dh = @opendir( $path ); 
$zaehl = 0; 
if($level != 0) echo(', children: [ ');
while( false !== ( $file = readdir( $dh ))){ 
$zaehl++;
      if( !in_array( strtolower($file), $ignore ) ){ 
        $spaces = str_repeat( '&nbsp;', ( $level * 4 ) ); 
        if( is_dir( "$path/$file" ) ){
        echo('{title: "'.$file.'", isFolder: true, key: "'.$path.'/'.$file.'"');
    echo("\n"); 
            getDirectory( "$path/$file", ($level+1), $id.'.'.$zaehl); 
    echo('},');
    echo("\n");

        }       

    } 

} 
 if($level != 0)
    {
        echo(']');
    }
closedir( $dh ); 
} 
```

2.使用Dynatree展示列表：

```
 $("#tree3").dynatree({

        checkbox: true,

        selectMode: 3,

        children: treeData,

        onSelect: function(select, node) {

            var selKeys = $.map(node.tree.getSelectedNodes(), function(node){

                return node.data.key;

            });
            var selRootNodes = node.tree.getSelectedNodes(true);
            var selRootKeys = $.map(selRootNodes, function(node){
                return node.data.key;
            });
            $("#echoSelectionRootKeys3").text(selRootKeys.join(", "));
            $("#echoSelectionRoots3").text(selRootNodes.join(", "));
        },
        onDblClick: function(node, event) {
            node.toggleSelect();
        },
        onKeydown: function(node, event) {
            if( event.which == 32 ) {
                node.toggleSelect();
                return false;
            }
        }
    }); 
```

我不认为进程号 2 是问题，因为我基本上是从创作者教程中复制的。我认为我在列出文件夹的过程 1 中犯了一个错误。

使用带有几个文件夹的硬盘驱动器参数运行 getDirectory 脚本，它就像一个魅力。当涉及到（通常）具有大量嵌套文件夹的硬盘时，它会持续几分钟。

有没有人知道列出文件夹的更好方法或用于呈现服务器端文件夹创建对话框的完全不同的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T16:58:33.330

一种完全不同的方法是使用 PHP 仅获取特定文件夹的内容（无递归）。如果您使用 AJAX 进行递归并深入浏览您的目录结构，您可以并行执行。

我认为这将大大提高速度。此外，您可以展示每个人都会很高兴这么快看到数据的东西，即使它没有完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T12:44:08.863

如果您抱怨速度，我建议您使用[Lazy Loading](http://wwwendt.de/tech/dynatree/doc/dynatree-doc.html#h5.5)。如果您正在加载目录中的每个文件夹/文件，它将变得非常慢。

# android - 以编程方式使用 setTextSize 到 ?attr/textAppearanceLarge

> ID：10178024
> 
> 赞同：13
> 
> 时间：2012-04-16T16:30:13.463
> 
> 标签：android, textview

我现在正在修改自定义首选项，我想使用 TextView 给它一个标签。但是我似乎找不到使用 setTextView() 将文本大小指定为“大”的方法

我在这里想念什么？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-04-16T16:35:10.220

```
TextView title = new TextView(context);
title.setTextAppearance(context, android.R.attr.textAppearanceLarge); 
```

或尝试

```
setTextAppearance(context, android.R.style.TextAppearance_Large); 
```

使用上面的代码并尝试

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-15T22:01:39.660

由于自 API Level 23 (Marshmallow) 开始以来语法发生了变化，一些用户也提到`android.R.attr.textAppearanceLarge`对他们不起作用，因为它对我不起作用。这里是更新版本...

```
Button b = new Button(getContext());

if( Build.VERSION.SDK_INT >= Build.VERSION_CODES.M )
    b.setTextAppearance( android.R.style.TextAppearance_Medium );
else
    b.setTextAppearance( getContext(), android.R.style.TextAppearance_Medium ); 
```

# jquery - Fancybox，在最新版本中调整宽度

> ID：10178028
> 
> 赞同：0
> 
> 时间：2012-04-16T16:30:52.490
> 
> 标签：jquery, web, fancybox

在单击文本框以显示错误后，我尝试调整幻想框的宽度，但它不起作用。我在 SO 上看到了另一篇文章，但我认为它已经过时了。

```
$("a.fancy").fancybox({
        'width'             : 425,
        'height'            : 415,
        'autoDimensions'    : true,
        'transitionIn'      : 'elastic',
        'transitionOut'     : 'elastic',
        'type'              : 'iframe'
}); 
```

在fancybox中，我有一个带有用户需要注册的注册表单的iFrame，我正在使用验证引擎Posabsolute在右上角显示错误，但fancybox设置为425，我需要将其调整为445或发生错误后的 450。

任何人都知道我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T23:12:20.827

这对我有用：

```
$('#fancybox-wrap, #fancybox-outer, #fancybox-content').css('width', 'auto');
$.fancybox.center(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T16:55:03.653

您可以向元素添加一个类并更改其样式：

```
$(".fancy").addClass("errorClass"); 
```

# java - 如何在 gwt Uibinder 中使用 JavaScript

> ID：10178034
> 
> 赞同：2
> 
> 时间：2012-04-16T16:31:07.637
> 
> 标签：java, javascript, gwt, uibinder

我想在我用 GWT 编写的应用程序中执行 JavaScript。这是在常规 HTML 中工作的代码：

```
<html>
  <head>
  </head>

  <body>
    <ul>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
    </ul>
    <script src="jquery.js"></script>
    <script src="jquery.roundabout.js"></script>
    <script>
      $(document).ready(function() {
          $('ul').roundabout();
      });
    </script>
  </body>
</html> 
```

（假设`jquery.js`和`jquery.roundabout.js`在同一个文件夹中。）

我有一个`somePresenter`(with `someView.java`and `someView.ui.xml`)，我希望上面的代码在`someView.ui.xml`.

我将上面的代码复制粘贴到 XML（除了`<html>`我有`<g:HTMLPanel>`标签的标签），但 JavaScript 似乎没有被执行（我看到的只是列表，因为它应该在脚本之前）。

我怎样才能让它工作？

相关问题：我可以如何使用 GQuery 吗（例如：GQuery.$().getScript(jquery.roundabout.js) 加载外部 js 脚本）？

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-16T16:46:30.120

您不能将 a`<script>`放入 UiBinder 并期望看到它加载和执行，原因与您不能将 a在 JS 中的 a 放入具有相同解释的相同原因（仅仅是因为`<script>`UiBinder将在幕后使用）。`innerHTML``HTMLPanel``innerHTML`

如果您需要动态加载脚本，请查看[`ScriptInjector`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/core/client/ScriptInjector.html)：

```
ScriptInjector.fromUrl(GWT.getModuleBaseURL() + 'jquery.js').inject(); 
```

我想 GQuery 使用`ScriptInjector`或工作方式类似。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T08:37:07.420

我最终设法通过将

```
<script src="jquery.js"></script>
<script src="jquery.roundabout.js"></script> 
```

`project.html` 然后在加载相关页面（我的演示者）时使用 JSNI 调用执行相关 JavaScript 。

# ruby-on-rails - 无法 rvm pkg 安装 zlib

> ID：10178036
> 
> 赞同：1
> 
> 时间：2012-04-16T16:31:13.997
> 
> 标签：ruby-on-rails, gem, zlib

在我做之后

```
rvm uninstall 1.9.3
rvm pkg install zlib
rvm install 1.9.3 --with-zlib-dir=$rvm_path/usr 
```

仍然没有zlib。任何 gem install 或 gem update 命令都会失败并出现错误：

```
$ gem update --system
ERROR:  Loading command: update (LoadError)
    cannot load such file -- zlib
ERROR:  While executing gem ... (NameError)
    uninitialized constant Gem::Commands::UpdateCommand 
```

系统是 Ubuntu 服务器 11.10 x64。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T18:20:32.767

尝试从 Ubuntu apt repos 安装软件包。

`sudo apt-get install zlib1g zlib1g-dev`

请记住在安装这些之后再次卸载 1.9.3。

# javascript - 褪色的幻灯片不循环？

> ID：10178037
> 
> 赞同：1
> 
> 时间：2012-04-16T16:31:28.397
> 
> 标签：javascript, jquery

我试图制作一个褪色的幻灯片，但我似乎无法让它褪色......

[http://jsfiddle.net/FGb6L/](http://jsfiddle.net/FGb6L/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T16:43:08.983

如果你改变

```
$(function() {
    setInterval( "slideSwitch()", 5000 );
}); 
```

进入

```
$(function() {
    setInterval(slideSwitch, 5000 );
}); 
```

幻灯片似乎工作。小提琴示例：http: [//jsfiddle.net/eSrcr/](http://jsfiddle.net/eSrcr/)

作为旁注，[永远不要将字符串传递给 setInterval/setTimeout](http://dev.opera.com/articles/view/efficient-javascript/?page=2#timeouts)

# facebook - 使用 deprecate_offline_access 选项进行 Facebook 身份验证

> ID：10178040
> 
> 赞同：1
> 
> 时间：2012-04-16T16:31:36.960
> 
> 标签：facebook, oauth

我要求打开 deprecate_offline_access 的 Facebook 访问令牌，我得到以下响应：

access_token=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&expires=5183977

有人知道，“过期”参数是什么意思吗？它的价值不是时间戳......我想知道令牌何时到期，我该怎么做？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T15:48:17.600

5183977 秒 = 59.9997337962963 天。

并回答您的最后一个问题'如果令牌过期，我会得到什么？我会得到例外还是刚刚过期=0？

您将在令牌过期之前收到通知。如果它已经过期（主要由于 facebook 开发人员文档中解释的不同原因），您必须重新验证应用程序并且必须获取新的访问令牌，该令牌将在接下来的 60 天内再次有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T17:09:37.033

“expires”参数就是从请求时间到过期时间的剩余时间。它应该读作“从请求时间起 5183977 秒后过期”。

# c# - Levenshtein 编辑距离算法，支持 C# 中两个相邻字母的转置

> ID：10178043
> 
> 赞同：1
> 
> 时间：2012-04-16T16:31:48.843
> 
> 标签：c#, nlp, edit-distance

我正在寻找一种用于计算 Levenshtein 编辑距离的算法，该算法还支持在 C# 中实现的两个相邻字母被转置的情况。

例如单词“animals”和“ainmals”：在字母“n”和“i”之间切换不会被计分为两个替换——这会产生很大的距离——而是会被计为两个字母的转置——距离更小——

到目前为止我在搜索中所达到的

*   [计算 Lichtenstein 距离](http://www.dotnetperls.com/levenshtein) ，但不包含替换
*   [这个问题](https://stackoverflow.com/questions/878114/is-there-an-edit-distance-algorithm-that-takes-chunk-transposition-into-accoun)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T17:32:43.060

请参阅 Wikipedia 上的实现。您可以轻松地调整算法以包含字母交换的情况。例如：

```
//bla bla. I'm just copying the code on the Wikipedia.
 d[i, j] := minimum
                   (
                     d[i-1, j] + 1,  // a deletion
                     d[i, j-1] + 1,  // an insertion
                     d[i-1, j-1] + 1, // a substitution
                   )

// This single statement is all you need:
if(s[i-1]==t[j-2] && s[i-2]==t[j-1])
   d[i,j] := minimum
                  (
                      d[i,j],               //cost without swapping 
                      d[i-2,j-2]+something  //cost with swapping. probably something=1 
                  ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-16T21:10:33.770

您需要添加附加条件以使其成为“Damerau–Levenshtein 距离”算法。因此，使用此处的示例：http: [//www.dotnetperls.com/levenshtein](http://www.dotnetperls.com/levenshtein)您只需要在第 6 步之后添加以下条件：

```
 //** Step 7 to make it Damerau–Levenshtein distance
      if (i > 1 && j > 1 && (s[i - 1] == t[j - 2]) && (s[i - 2] == t[j - 1]))
      {
             d[i, j] = Math.Min(
                            d[i, j],
                            d[i - 2, j - 2] + cost   // transposition
                         );
      } 
```

# c# - 水晶报表作为网站

> ID：10178045
> 
> 赞同：0
> 
> 时间：2012-04-16T16:32:00.877
> 
> 标签：c#, crystal-reports, asp.net-2.0

好的，我不确定我需要问的问题，所以我将描述我希望能够做什么我想知道这是否可能。

我有一些我正在为其创建网页的纸质表格，以便可以使用计算机将信息存储在数据库中。我已经创建了一个，用户输入它存储在数据库中的信息，然后用户可以选择打印一份水晶报告，该报告看起来像带有输入信息的纸质表格。

是否可以去掉中间人并将水晶报表作为网页，用户可以点击将信息输入报表，然后点击页面上的保存控件将其保存到数据库并从那里打印。

如果我没有问正确的问题，或者您需要更多信息，请随时提问。如果可以设计报告，然后在页面上使用它，使其对客户可编辑，那么这将使我的生活变得更加轻松，我只是不知道要查找什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T17:04:31.017

如果您需要让用户填写表单并将数据保存到数据库，然后用户可以访问表单，那么有几种选择：

1.  使用 Adob​​e 表格。通过这种方式，您可以创建 pdf 表单，并且可以让人们下载或通过电子邮件发送表单。表单是可填写的，当他们提交表单时，您只需要在服务器端处理它（以 xml 的形式）以将其保存到数据库中。您可以预先填充数据，以便当用户下载文件并打开它时，它会填写一些数据。创建 Adob​​e 表单所需的工具是 Adob​​e LiveCycle，您必须学习如何使用它。我们公司将它用于我们的一些网络表单，因为它们是安全的并且可以通过电子邮件发送。当然，您需要实现服务器端代码来处理它。

2.  使用 asp.net 网络表单。您创建 Web 表单并链接到数据库。您可以使用 ado.net 处理用户输入的表单数据并将它们保存到数据库中。这为您提供了最大的灵活性。

    如果您希望用户以特定格式打开他们输入的表单，使其看起来像“表单”，您有两个选择：

    <1> 将原始数据传递给特定的 css，让用户以更好的格式打印出来，而不仅仅是纯文本甚至网页。同样，您可以通过这种方式获得灵活性。

    <2> 使用 SQL Server Report Services（如果使用 sql server）。这样，您可以使用Visual Studio创建打印布局，然后编写存储过程来获取数据。如果你这样做，用户也会得到一个 pdf 文件。他们可以保存或打印它。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T07:54:47.527

这是可能的（假设您使用的是允许您编写存储过程的 SQL 版本），但这是一个非常糟糕的主意：

1.  编写一个 SQL 存储过程，每个要输入的字段都有一个参数，该过程使用适当的参数值更新相关的数据库表。
2.  从存储过程生成 Crystal 报表。

请注意，数据输入字段（查找、验证等）唯一可用的功能将是您使用的任何版本的 Crystal 中的 Crystal Report 参数可用的功能 - 通常，此功能很少。

# java - Java：优化/提高 DFS 中的运行速度

> ID：10178049
> 
> 赞同：1
> 
> 时间：2012-04-16T16:32:11.997
> 
> 标签：java, arraylist, depth-first-search

所以我一直在研究一个问题，基本前提是给定任意大小的网格，我需要计算“旅行”的数量。巡回赛是从左上角开始（我使用点 x=1，y=1 表示）并在左下角结束（x=1 y=max，无论 'y' 的最大值是多少）。除此之外，它还必须沿途每隔一个点接触一次，并且只能访问网格中的任何点一次。

按照我在下面写的方式，它运行时间约为 42-45 秒，但如果可能的话，我想让它在 30 秒或更短的时间内运行。所以，我问你的问题是，我可以改变或去掉什么来让它运行得更快？

我尝试使所有内容都不是静态的并实例化该类（这增加了我的运行时间几秒钟）。

```
import java.awt.Point;
import java.util.ArrayList;
import java.util.List;
import java.util.Stack;
import java.util.Date;

public class CodingPuzzle
{
public static List<Point> lAllPoints = new ArrayList<Point>();
public static int iMaxX;
public static int iMaxY;
public static int iCompletePaths = 0;

public static void depthFirstSearch(Point current, Stack<Point> result)
{
    if (result.contains(current))
        return;

    result.push(current);

    if (current.x == 1 && current.y == iMaxY && result.size() == iMaxX*iMaxY)
    {
        // This is a complete path
        iCompletePaths++;
    }
    for (Point p: getPossibleMoves(current))
    {
        depthFirstSearch(p, result);
    }

    // No path was found
    result.pop();
    return;
}

public static List<Point> getPossibleMoves (Point fromPoint)
{
    int iCurrentPointIndex = lAllPoints.indexOf(fromPoint);
    List<Point> lPossibleMoves = new ArrayList<Point>();

    if (fromPoint.x == 1 && fromPoint.y == 1)
    {
        // Top left point
        lPossibleMoves.add(lAllPoints.get(iCurrentPointIndex + 1));
        lPossibleMoves.add(lAllPoints.get(iCurrentPointIndex + iMaxY));
    }

    else if (fromPoint.x == 1 && fromPoint.y == iMaxY)
    {
        // Bottom left point. Should always be the last point. No valid moves.
        // If a path gets here before the end it shouldn't need to continue.
    }

    else if (fromPoint.x == iMaxX && fromPoint.y == 1)
    {
        // Top right point
        lPossibleMoves.add(lAllPoints.get(iCurrentPointIndex - iMaxY));
        lPossibleMoves.add(lAllPoints.get(iCurrentPointIndex + 1));
    }

    else if (fromPoint.x == iMaxX && fromPoint.y == iMaxY)
    {
        // Bottom right point
        lPossibleMoves.add(lAllPoints.get(iCurrentPointIndex - iMaxY));
        lPossibleMoves.add(lAllPoints.get(iCurrentPointIndex - 1));
    }

    else if (fromPoint.x == 1 && fromPoint.y != iMaxY)
    {
        // Any other point on the left side
        lPossibleMoves.add(lAllPoints.get(iCurrentPointIndex - 1));
        lPossibleMoves.add(lAllPoints.get(iCurrentPointIndex + 1));
        lPossibleMoves.add(lAllPoints.get(iCurrentPointIndex + iMaxY));
    }

    else if (fromPoint.x == iMaxX)
    {
        // Any other point on the right side
        lPossibleMoves.add(lAllPoints.get(iCurrentPointIndex - 1));
        lPossibleMoves.add(lAllPoints.get(iCurrentPointIndex + 1));
        lPossibleMoves.add(lAllPoints.get(iCurrentPointIndex - iMaxY));
    }

    else if (fromPoint.y == 1)
    {
        // Any other point on the top
        lPossibleMoves.add(lAllPoints.get(iCurrentPointIndex + 1));
        lPossibleMoves.add(lAllPoints.get(iCurrentPointIndex - iMaxY));
        lPossibleMoves.add(lAllPoints.get(iCurrentPointIndex + iMaxY));
    }

    else if (fromPoint.y == iMaxY && fromPoint.x != 1)
    {
        // Any other point on the bottom
        lPossibleMoves.add(lAllPoints.get(iCurrentPointIndex - 1));
        lPossibleMoves.add(lAllPoints.get(iCurrentPointIndex - iMaxY));
        lPossibleMoves.add(lAllPoints.get(iCurrentPointIndex + iMaxY));
    }

    else
    {
        // Any other point not on an edge.
        lPossibleMoves.add(lAllPoints.get(iCurrentPointIndex + 1));
        lPossibleMoves.add(lAllPoints.get(iCurrentPointIndex - 1));
        lPossibleMoves.add(lAllPoints.get(iCurrentPointIndex - iMaxY));
        lPossibleMoves.add(lAllPoints.get(iCurrentPointIndex + iMaxY));
    }

    return lPossibleMoves;
}

public static void setUpGrid(int x, int y)
{
    iMaxX = x;
    iMaxY = y;
    for (int i = 1; i <= x; i++)
        for (int j = 1; j <= y; j++)
            lAllPoints.add(new Point(i, j));
}

public static void main(String[] args)
{
    Date start = new Date(System.currentTimeMillis());
    setUpGrid(10, 4);
    Stack<Point> sCurrentPoints = new Stack<Point>();
    depthFirstSearch(lAllPoints.get(0), sCurrentPoints);
    Date end = new Date(System.currentTimeMillis());
    long total = end.getTime() - start.getTime();
    System.out.println(iCompletePaths + " paths found in " + total/1000 + " seconds.");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T17:01:03.277

我会减少代码为获得计数所做的工作量。

```
public class CodingPuzzle2 {
    private final int width;
    private final int height;

    public CodingPuzzle2(int width, int height) {
        this.width = width;
        this.height = height;
    }

    public int countPaths(int x, int y) {
        boolean[][] visited = new boolean[width][height];
        int[] count = {0};
        countPaths(x, y, visited, 1,  count);
        return count[0];
    }

    private void countPaths(int x, int y, boolean[][] visited, int depth, int[] count) {
        if (x < 0 || x >= width || y < 0 || y >= height || visited[x][y])
            return;
        visited[x][y] = true;
        try {
            if (x == 0 && y == height - 1) {
                if (depth == width * height)
                    count[0]++;
                return;
            }
            countPaths(x, y + 1, visited, depth+1, count);
            countPaths(x + 1, y, visited, depth+1, count);
            countPaths(x - 1, y, visited, depth+1, count);
            countPaths(x, y - 1, visited, depth+1, count);
        } finally {
            visited[x][y] = false;
        }
    }

    public static void main(String... args) {
        long start = System.nanoTime();
        CodingPuzzle2 cp = new CodingPuzzle2(10,4);
        int count = cp.countPaths(0, 0);
        long time = System.nanoTime() - start;
        System.out.printf("%,d paths found in %.3f seconds.%n", count, time / 1e9);
    }
} 
```

印刷

```
2,329 paths found in 1.758 seconds. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T16:43:56.233

我要做的第一件事是分析您的代码（正如彼得在对您的问题的评论中所说的那样）。如果不知道您将时间花在哪里，很难“让事情变得更快”。但是您的算法可能效率低下。对于分析，您可以使用 Oracle JVM 附带的 jvisualvm。

您可能想研究解决图的[哈密顿路径的](http://en.wikipedia.org/wiki/Hamiltonian_path)[算法](http://en.wikipedia.org/wiki/Hamiltonian_path_problem#Algorithms)，这实际上就是您正在做的事情。有比蛮力更有效的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T16:50:47.323

别人怎么说。它将帮助您成为更好的程序员。

除此之外，这是您正在寻找的快速胜利 - 从[Deque](http://docs.oracle.com/javase/7/docs/api/java/util/Deque.html)[切换](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayDeque.html)`Stack`到ArrayDeque 。这个单一的改变使它在我的机器上快了 44%。`Java 7 -server`

# php - 允许用户搜索 MySQL 数据库时处理不同 SQL 搜索查询的最佳方式

> ID：10178050
> 
> 赞同：2
> 
> 时间：2012-04-16T16:32:30.253
> 
> 标签：php, mysql, database, select

我在描述这个“问题”时遇到了一些麻烦。请随时将标题更改为对该主题更具描述性的名称。

我有一个数据库，希望让用户有机会选择如何对结果进行排序、搜索数据库等。

我正在使用 PHP 和 MySQL。

我以这个表设置为例：

```
table Persons
+----+------+----------+------------+------+-----+
| id | age  | gender   | date       | hits | car |
+----+-----------------+------------+------+-----+
| 1  | 18   | male     | xx.xx.xxxx | 1040 | 1   |
| 2  | 35   | female   | xx.xx.xxxx | 443  | 2   |
| 3  | 67   | male     | xx.xx.xxxx | 453  | 2   |
| 4  | 10   | male     | xx.xx.xxxx | 3454 | 4   | ==> 4 means Citroen
| 5  | 98   | female   | xx.xx.xxxx | 323  | 6   |
+----+------+----------+------------+------+-----+

table Cars
+----+----------+
| id | model    |
+----+----------+
| 1  | Porche   |
| 2  | Ferrari  |
| 3  | Volvo    |
| 4  | Citroen  |
| 5  | VW       |
+----+----------+ 
```

从数据库中选择数据的一种方法可能是这样的：

```
$sql = "SELECT *, DATE_FORMAT(date, '%b %e, %Y') AS show_date FROM persons ORDER BY date DESC LIMIT 100"; 
```

但是，如果我想让用户有机会按日期、点击次数、评级（另一个表）进行降序和升序排序，并且有机会只选择年龄低于 X 且性别为男性的人（例如）。我该怎么做呢？我是否需要`if else`对所有可能的查询进行查询，或者是否可以在一个查询中进行？

我不需要完成代码片段，我只需要知道是否有任何好的文章或“最佳实践”方式来做到这一点。首选最简单和最安全的方法。

PS你怎么称呼这种“问题”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T17:06:42.290

在您的搜索查询功能中，只需获取搜索字段、选项等并构建您的查询字符串。如果`SELECT`语句将始终提取相同的字段，那么您可以从创建查询开始直到`WHERE`子句，并从那里构建。（确保保护用户输入免受[sql 注入攻击](http://php.net/manual/en/security.database.sql-injection.php)。使用准备好的语句或手册中的提示方法（`getSqlVal()`在我的前代码中定义。））这是一个小例子：

```
$sql = "SELECT ... FROM Persons p, Cars c WHERE p.car = c.id";

if(isset($_POST["age"]))
    $sql .= " AND age < " . getSqlVal($_POST["age"], 'int');
if(isset($_POST["gender"]))
    $sql .= " AND gender = '" . getSqlVal($_POST["gender"], 'text') . "'";
if(isset($_POST["sortBy"])){
    $sql .= " ORDER BY " . getSqlVal($_POST["sortBy"], 'text');
    if(isset($_POST["sortDirection"]) && $_POST["sortDirection"] == "DESC")
        $sql .= " DESC";
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T16:44:54.900

简单地说，您想出一个代表他们实际请求的模型，然后您很可能将该模型体现在一个动态创建的 SQL 语句中，该语句为他们的查询返回适当的数据。

例如，如果他们只想要按点击次数排序的年龄、性别，您就会知道不必费心加入 Cars 表（因为他们不需要该表中的任何内容）。而如果他们确实想要汽车模型，您可以根据需要添加连接。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-16T16:47:22.460

您可以将所有这些选项包含在一个[`switch`](http://php.net/manual/en/control-structures.switch.php)语句中，并将 URL`$_GET`变量传递给它。

例如，要自定义排序，`sort_by`请将变量传递给 URL：

```
/my_list.php?sort_by=hits 
```

并像这样构造`swith`语句：

```
$sort_by = '';
switch ($_GET['sort_by']) {
    case 'rating':
        $sort_by = ' ORDER BY `rating` ';
        break;
    case 'hits':
        $sort_by = ' ORDER BY `hits` ';
        break;
    default:
        $sort_by = ' ORDER BY `date` ';
        break;
} 
```

然后您的查询将如下所示：

```
$sql = "SELECT *, DATE_FORMAT(date, '%b %e, %Y') AS show_date
        FROM persons "
        . $sort_by .
        "DESC LIMIT 100"; 
```

# c++ - 为什么要使用更高的基数来实现 BigInt？

> ID：10178055
> 
> 赞同：3
> 
> 时间：2012-04-16T16:33:22.277
> 
> 标签：c++, c, biginteger, base

我正在尝试实现 BigInt 并阅读了一些关于它的线程和文章，其中大多数建议使用更高的基数（256 或 2 ^(32)甚至 2 ^(64)）。

**为什么更高的碱基有利于这个目的？**

我的另一个问题是我应该如何将字符串转换为更高的基数（> 16）。我读到没有标准的方法，除了base64。最后一个问题，我如何使用那些更高的碱基。一些例子会很棒。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-16T16:36:27.673

乘以或添加适合寄存器的数字所花费的 CPU 周期往往是相同的。因此，通过用完整个寄存器，您将获得最少的迭代次数和最佳性能。也就是说，在 32 位架构上，将基本单元设为 32 位，在 64 位架构上，将其设为 64 位。否则——比如说，如果你只填满 32 位寄存器的 8 位——你就是在浪费周期。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T19:32:17.620

1.  第一个答案最好地说明了这一点。我个人使用基数 2^16 来防止乘法溢出。这允许任何两个数字相乘一次而不会溢出。

2.  转换为更高的基数需要快速除法方法以及尽可能多地打包数字（假设您的 BigInt lib 可以处理多个基数）。

考虑基数 10 -> 基数 2。实际转换将是 10 -> 10000 -> 32768 -> 2。这可能看起来慢，但从基数 10 转换到 10000 非常快。在 10000 和 32768 之间转换的迭代量非常快，因为要迭代的数字很少。将 32768 解包为 2 也非常快。

所以首先将基地打包到它可以去的最大基地。为此，只需将数字组合在一起。这个基数应该 <= 2^16 以防止溢出。

接下来，将数字组合在一起，直到它们 >= 目标基数。从这里开始，使用在任何其他情况下通常会溢出的快速除法算法除以目标基数。

一些快速代码

```
if (!packed) pack()

from = remake() //moves all of the digits on the current BigInt to a new one, O(1)
loop
    addNode()

    loop
        remainder = 0
        remainder = remainder*fromBase + from.digit
        enter code here`exitwhen remainder >= toBase
        set from = from.prev
        exitwhen from.head

    if (from.head) node.digit = remainder
    else node.digit = from.fastdiv(fromBase, toBase, remainder)

    exitwhen from.head 
```

快速除法

```
loop
    digit = remainder/divide
    remainder = remainder%divide

    //gather digits to divide again
    loop
        this = prev
        if (head) return remainder

        remainder = remainder*base + digit
        exitwhen remainder >= divide

        digit = 0

return remainder 
```

最后，如果您应该解包，请解包

打包只是将数字组合在一起。

以 10 到 10000 为底的示例

```
4th*10 + 3rd
*10 + 2nd
*10 + 1st 
```

3.  ？？？

您应该有一个存储 toString 的字母 + 大小的基类。如果 Base 无效，则只需在逗号分隔列表中显示数字。

您的所有方法都应该使用 BigInt 的当前基数，而不是某个常数。

就这样？

从那里，您将能够执行以下操作

```
BigInt i = BigInt.convertString("1234567", Base["0123456789"]) 
```

其中 [] 被重载并将创建一个新的基础或返回已经创建的基础。

您还可以执行以下操作

```
i.toString()
i.base = Base["0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"]
i.base = 256
i.base = 45000 
```

等^_^。

此外，如果您使用整数并且希望能够返回 BigInt 余数，则除法可能会有点棘手 =P，但它仍然很容易 ^_^。

[这是我在 vjass 中编写的 BigInt 库（是的，对于魔兽争霸 3，哈哈，不要评判我）](http://www.hiveworkshop.com/forums/jass-resources-412/system-bigint-188973/)

诸如此类的事情`TriggerEvaluate(evalBase)`只是为了防止线程崩溃（邪恶的操作限制）。

祝你好运：D

# html - 如何在一个跨度块中将一张照片放在另一张照片上？

> ID：10178057
> 
> 赞同：0
> 
> 时间：2012-04-16T16:33:29.457
> 
> 标签：html

基本上 pic1 将具有 pic2+pic3 的高度。

并且所有 pic1,2,3 将在同一个块中，pic2 和 pic3 和 pic1 将具有相同的宽度

左边的 pic1 和右边的 pic2,3。

我的代码不起作用...请帮助：

```
<div class ="row">

<span class ="row_1">
<img src="image/under.png" />
</span>

<span class ="row_2">
<img src="image/under.png" />
<img src="image/under.png" />

</span>
</div> 
```

CSS：

```
.row_1 img {
display: inline-block;
width: 100px;
height: 100px;
}
.row_2 img {
display: inline-block;
width: 30px;
height: 30px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T16:56:25.557

我相信这就是你想要的。为了遵守 W3C 标准的块级元素不能嵌套在内联的元素中，但是 inline-block 允许您这样做。唯一需要注意的是，inline-block 的显示值并不完全向后兼容浏览器，特别是 IE7 及以下。

```
.row_1 img{
    width: 100px;
    height: 100px;
}

.row_2 img{
    width: 30px;
    height: 30px;
}

.row_1,
.row_2{
    display: inline-block;
}

.row_2 img{
    padding-top: 5px;
    display: block;
}

.row_2 img:first-child{
    padding: 0;
} 
```

# php - jQuery 处理 php 返回

> ID：10178063
> 
> 赞同：0
> 
> 时间：2012-04-16T16:33:40.860
> 
> 标签：php, jquery, post

我想要一个 jQuery 脚本来接收一个 php 脚本的返回，该脚本`$.post("script.php", args)`在请求启动时发出数据库请求，但是如何处理任何答案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T16:35:20.030

在开始学习之前，你真的应该阅读这些教程

*   [http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

回答你的问题

jQuery post 采用如下参数

> jQuery.post( url [, data] [, success(data, textStatus, jqXHR)] [, dataType] )

具有某些参数的典型 jquery 发布请求，期望来自 XML 格式的 php 文件（在本例中为 test.php）的结果如下所示

```
$.post("test.php",
 { name: "John", time: "2pm" },
 function(data) {
   process(data);
 }, 
 "xml"
); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T16:35:34.790

```
$.post("script.php", args, function(res) {
  // res is the response send to your from server
  // now do your stuff
}); 
```

阅读有关[ajax](http://api.jquery.com/jQuery.ajax/)和[post](http://api.jquery.com/jQuery.post/)方法的信息，希望您能找到解决方案

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T16:56:03.390

正如许多人建议使用 jQuery 手册检查 POST 或 AJAX 调用的可能用法一样，这是我的 ajax 调用示例：

```
$.post("server.php", { "func": "getNameAndTime" }, function(data){
  console.log(data.name); //  John Doe
  console.log(data.time); //  2001-01-01 23:00:00
}, "json"); 
```

**服务器.php**

```
//do some processing and validation
$response = array('name' => 'John Doe', 'time'=> '2001-01-01 23:00:00');
print json_encode($response);
exit; 
```

# c++ - 将数组从 RAM 复制到 GPU 以及从 GPU 复制到 RAM

> ID：10178067
> 
> 赞同：1
> 
> 时间：2012-04-16T16:33:54.100
> 
> 标签：c++, cuda, gpgpu

我正在尝试在我的一个项目中引入一些 CUDA 优化。但我认为我在这里做错了什么。我想实现一个简单的矩阵向量乘法（`result`= `matrix`* `vector`）。但是当我想将结果复制回主机时，会出现错误（`cudaErrorLaunchFailure`）。我的内核 ( ) 中有错误`matrixVectorMultiplicationKernel`还是我调用`cudaMemcpy`不正确？对于这种错误状态，我没有找到有用的文档。我认为这完全破坏了 GPU 的状态，因为我无法调用任何 CUDA 内核而不会在第一次出现后再次出现此错误。

**编辑#1：**更新代码，遵循 leftaroundabout 的建议。

```
// code
...
Eigen::MatrixXf matrix(M, N); // matrix.data() usually should return a float array
Eigen::VectorXf vector(N);    // same here for vector.data()
Eigen::VectorXf result(M);
... // fill matrix and vector
float* matrixOnDevice = copyMatrixToDevice(matrix.data(), matrix.rows(), matrix.cols());
matrixVectorMultiplication(matrixOnDevice, vector.data(), result.data(), matrix.rows(), cm.cols());
... // clean up

// helper functions
float* copyMatrixToDevice(const float* matrix, int mRows, int mCols)
{
  float* matrixOnDevice;
  const int length = mRows*mCols;
  const int size = length * sizeof(float);
  handleCUDAError(cudaMalloc((void**)&matrixOnDevice, size));
  handleCUDAError(cudaMemcpy(matrixOnDevice, matrix, size, cudaMemcpyHostToDevice));
  return matrixOnDevice;
}

void matrixVectorMultiplication(const float* matrixOnDevice, const float* vector, float* result, int mRows, int mCols)
{
  const int vectorSize = mCols*sizeof(float);
  const int resultSize = mRows*sizeof(float);
  const int matrixLength = mRows*mCols;
  float* deviceVector;
  float* deviceResult;
  handleCUDAError(cudaMalloc((void**)&deviceVector, vectorSize));
  handleCUDAError(cudaMalloc((void**)&deviceResult, resultSize));
  handleCUDAError(cudaMemset(deviceResult, 0, resultSize));
  handleCUDAError(cudaMemcpy(deviceVector, vector, vectorSize, cudaMemcpyHostToDevice));
  int threadsPerBlock = 256;
  int blocksPerGrid = (mRows + threadsPerBlock - 1) / threadsPerBlock;
  matrixVectorMultiplicationKernel<<<blocksPerGrid, threadsPerBlock>>>(matrixOnDevice, vector, result, mRows, mCols, matrixLength);
  // --- no errors yet ---
  handleCUDAError(cudaMemcpy(result, deviceResult, resultSize, cudaMemcpyDeviceToHost)); // cudaErrorLaunchFailure
  handleCUDAError(cudaFree(deviceVector)); // cudaErrorLaunchFailure
  handleCUDAError(cudaFree(deviceResult)); // cudaErrorLaunchFailure
}

__global__ void matrixVectorMultiplicationKernel(const float* matrix, const float* vector, float* result, int mRows, int mCols, int length)
{
  int row = blockDim.x * blockIdx.x + threadIdx.x;
  if(row < mRows)
  {
    for(int col = 0, mIdx = row*mCols; col < mCols; col++, mIdx++)
      result[row] += matrix[mIdx] * vector[col];
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T16:42:54.327

您的问题是`void copyMatrixToDevice(..., float* matrixOnDevice, ...)`按值获取此指针，即它不能“输出”设备矩阵。您可以使用`void copyMatrixToDevice(..., float** matrixOnDevice, ...)`, 调用

```
copyMatrixToDevice(matrix.data(), &matrixOnDevice, matrix.rows(), matrix.cols()); 
```

`result`in也有同样的问题`matrixVectorMultiplication`。

从长远来看，在 C++ 中，您应该围绕所有这些放置一个适当的类抽象层。

# asp.net-mvc-3 - MVC3 通过 LINQ 选择 int 值

> ID：10178069
> 
> 赞同：0
> 
> 时间：2012-04-16T16:33:59.467
> 
> 标签：asp.net-mvc-3, linq

我正在尝试从 Customer 表中获取 customerId。

但是，当我尝试制作它时，它有错误说，'不能隐式地将类型'System.Linq.Iqueryable'转换为'int''

我怎样才能得到customerId？

谢谢你。

这是我的编码。

```
int customerId = from a in db.Customer
                            where a.userName == customerName
                            select a.customerId; 
                           //it has error in here.

order.customerId = customerId; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T16:35:46.683

您的查询可能会返回多行。您需要告诉 LINQ 您只想要第一个（或单个）结果：

```
int customerId = (from a in db.Customer
                  where a.userName == customerName
                  select a.customerId).First(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T17:45:12.423

当我知道应该只有一行时，我喜欢使用 .Single() 函数。

```
int customerId = (from a in db.Customer
                  where a.userName == customerName
                  select a.customerId).Single(); 
```

如果发现多于或少于一行，这将引发异常，根据您的情况，这有时很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T16:36:13.273

以这种方式使用它： var customer = db.Customer.FirstOrDefault(c =>c.userName == customerName) var id = customer.Id

Select 返回一个 IEnumerable，因此您无法将其转换为 int。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T16:39:29.717

对于这个问题，我可以推荐的另一个建议是使用 First 或 default。

```
var customerId = (from a in db.Customer
                            where a.userName == customerName
                            select a.customerId).FirstOrDefault(); 
```

`order.customerId = customerId;`这现在应该可以正常工作了，因为它已经知道它 int

# memory - 为什么 EMR 实例没有映射器那么多的 reducer？

> ID：10178071
> 
> 赞同：3
> 
> 时间：2012-04-16T16:34:07.643
> 
> 标签：memory, hadoop, amazon-web-services, elastic-map-reduce, reducers

默认情况下，在 EMR 作业期间，实例配置为具有比映射器更少的 reducer。但是减速器没有得到任何额外的内存，所以看起来它们应该能够拥有相同的数量。（比如超大的高cpu实例有7个mapper，但只有2个reducer，但是mapper和reducer都配置了512MB的可用内存）。

有谁知道这是为什么，有什么方法可以指定使用与映射器一样多的减速器吗？

编辑：我的数量错误，它是 512 MB

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T11:02:17.403

映射器从其输入流（映射器的 STDIN）中提取数据，并且它们发出的内容更加紧凑。然后，该出站流（映射器的 STDOUT）也按键排序。因此，reducers 在其传入的数据中具有较小的排序数据。

这就是为什么任何 Hadoop MapReduce 集群（而不仅仅是 EMR）的默认配置是拥有比 reducer 更多的映射器的原因，这与作业跟踪器可用的核心数量成正比。

您可以通过 jobconf 参数控制映射器和缩减器的数量。配置变量是 mapred.map.tasks 和 mapred.reduce.tasks。

# c# - 执行 SQL 查询后将参数传递到 url

> ID：10178072
> 
> 赞同：-1
> 
> 时间：2012-04-16T16:34:09.373
> 
> 标签：c#, asp.net, sql, wml

我最近问了一个关于如何写查询的问题，谢天谢地你们回答了我（谢谢）

[我的最后一个问题](https://stackoverflow.com/questions/10165915/getting-data-from-database-from-different-tables)

我在一个 WML 站点上工作，所以我需要从查询中传递值我找到了一种方法（如下代码所示），但它没有用。

```
 <%   
//this Query was provided earlier in the previous question.

        string queryString = "select st.firstname + ' ' + st.lastname,se.year, c.coursename,c.NumberOfCredits,ri.mark  from Students st inner join RegisteredIn ri on ri.StudentId=st.id inner join Semester se on se.id=ri.SemesterId inner join Courses c on c.id=se.id "; 
```

我找到但没有工作的方式

```
 using (System.Data.SqlClient.SqlConnection connection = new System.Data.SqlClient.SqlConnection(connectionString))
         {

            System.Data.SqlClient.SqlCommand command = new System.Data.SqlClient.SqlCommand(queryString, connection);

            command.Parameters.AddWithValue("@StudentId",StudentId);

                connection.Open();
                System.Data.SqlClient.SqlDataReader reader = command.ExecuteReader();
                if (reader.HasRows)
                {
                    reader.Read();
                    string _firstname = reader[0].ToString();
                    string _lastname = reader[1].ToString();
                    string _coursename = reader[2].ToString();
                    string _credits = reader[3].ToString();
                    string _mark = reader[4].ToString();

                    string url = string.Format("~/StudentInfo.aspx?StudentId={0}&firstname={1}&lastname={2}&coursename={3}&credits={4}&mark={5}", StudentId, _firstname, _lastname, _coursename, _credits, _mark);
                    Response.Redirect(url);

    %> 
```

接收参数的页面将类似于

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="StudentInfo.aspx.cs" Inherits="StudentInfo" %>

<wml>
    <card>

        <p><% Response.Write(Request.Params["StudentId"]);%></p>
        <p><b>firstname:</b> <% Response.Write(Request.Params["firstname"]);%></p>
        <p><b>lastname:</b> <% Response.Write(Request.Params["lastname"]);%></p>
        <p><b>coursename:</b> <% Response.Write(Request.Params["coursename"]);%></p>
       <p><b>credits:</b> <% Response.Write(Request.Params["credits"]);%></p>
        <p><b>Mark:</b> <% Response.Write(Request.Params["mark"]);%></p>

    </card>
</wml> 
```

结果将类似于

```
First Semester  2010
Student : Arin Rizk

Course Name     No. of Credit      Mark
    AAA                3            65
    BBB                3            23
    CCC                3            65
    DDD                3            58
    EEE                3            70

Your GPA for this semster is 3.12 
```

我的问题是： - 如何从查询中提取值并放入 URL 中？- 我将如何在 WML 或 ASP 中显示多个值？（因为结果将是多行和值）

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T18:01:26.887

您现在的代码将只读取数据库中的第一行。要读取所有行，您必须调用 Reader。[循环读取](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.read.aspx)()，类似于：

```
while(reader.Read())
{
    string _firstname = reader[0].ToString();
    string _lastname = reader[1].ToString()
    ...
} 
```

但恐怕在 URL 中将所有这些信息作为参数传递确实不是一个好主意。您必须以某种方式加入所有行的结果，并在另一页上将它们拆分回单个值，这在我看来是多余的。此外，URL 长度通常是有限的，因此如果您的查询返回的不仅仅是几行，它将不起作用。为什么要在 URL 中传输整个查询结果？在 URL 中仅传输学生的标识符（或您想要显示的任何内容）并在第二页上再次从数据库中读取数据更为常见（并且更容易做到）。

**更新：** 如果我理解正确，您的实际问题不是如何将查询字符串中的数据库查询结果传递到另一个页面，而是您想在页面上显示查询结果。第一步是在第二页的窗体上添加适当的控件（Label、DataGridView 等）。然后根据您使用的控件，您可以将控件绑定到数据源，或者在 StudentInfo.aspx 文件中的 Page_Load 等方法中手动添加数据到控件。但由于这与您首先提出的问题完全不同，我建议您再问一个问题。这个话题也在这里讨论过很多次，所以你可以先看看[这些问题](https://www.google.cz/#sclient=psy-ab&hl=cs&q=display+query+ASP.NET+site%3astackoverflow.com&oq=display+query+ASP.NET+site%3astackoverflow.com&aq=f&aqi=&aql=&gs_l=hp.3...2110l161613l1l161818l24l24l0l0l0l0l155l1887l21j3l24l0.&pbx=1&bav=on.2,or.r_gc.r_pw.,cf.osb&fp=22fdcfe0c4fb8a75&biw=1266&bih=837)。

# php - PHP Smarty 包含在 js 函数中

> ID：10178073
> 
> 赞同：0
> 
> 时间：2012-04-16T16:34:09.813
> 
> 标签：php, javascript, smarty

我有一个工具提示脚本来自：
[http ://www.dynamicdrive.com/dynamicindex5/fixedtooltip.htm](http://www.dynamicdrive.com/dynamicindex5/fixedtooltip.htm)

通常使用的类型是这样的：

```
<script src="http://thescript.com/tooltip.js"></script>

<a onMouseover="fixedtooltip('I am html harharhar', this, event, '150px')" onMouseout="delayhidetip()">JavaScript Kit</a> 
```

但是.. 我正在使用**Smarty**来解析模板。我正在尝试将我的工具提示“内容”解析为包含文件。

```
<script src="http://thescript.com/tooltip.js"></script>

<a onMouseover="fixedtooltip('{include file="popup.html" all=$response['item1'] id=$response['id']}', this, event, '150px')" onMouseout="delayhidetip()">JavaScript Kit</a> 
```

不幸的是，我找不到不破坏 javascript 的方法。想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T16:39:19.230

[{literal}](http://www.smarty.net/docsv2/en/language.function.literal.tpl)标签允许按字面意思获取数据块。这通常用于 Javascript 或样式表块，其中 {花括号} 会干扰模板分隔符语法。{literal}{/literal} 标记中的任何内容都不会被解释，而是按原样显示。如果您需要在 {literal} 块中嵌入模板标签，请考虑使用 {ldelim}{rdelim} 来转义各个分隔符。

# asp-classic - Can Do While 循环在计数器到达 X 时停止

> ID：10178079
> 
> 赞同：1
> 
> 时间：2012-04-16T16:34:34.727
> 
> 标签：asp-classic, while-loop

我想编辑一些用经典 ASP 编写的遗留代码。

目前我已经声明了一个子程序，它使用 for-next 循环输出一些单选按钮：

```
 For i = 1 to Cols
   response.write "blah"
   ...
 Next 
```

**i**只是一个计数器，**Cols**是传递给子例程的值。我尝试将 for 循环编辑为 while 循环：

```
i = Start
do while i <= Cols
  response.write "blah"
  ...
  i = i + 1
loop 
```

但我收到一个超出响应缓冲区限制的错误。如果我用它的值替换 Cols 就可以了。这是经典 ASP 的限制吗？

* * *

我想使用 do while 循环的原因是因为当前子例程仅限于从 1 循环到*Cols*。有时向后指定循环计数（即步骤-1）会有所帮助，但我不能写：

```
if Direction = Backwards then 
  For i = Cols to 1 step -1
else
  For i = 1 to Cols
end if 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T16:40:48.013

怎么样：

```
If Direction = Backwards Then
    cs = 10
    ce = 1
    s = -1
Else
    cs = 1
    ce = 10
    s = 1
End If

For i = cs To ce Step s
    ''
Next 
```

# javascript - jQuery Mobile 列表分隔线使用了错误的样本？

> ID：10178080
> 
> 赞同：2
> 
> 时间：2012-04-16T16:34:36.413
> 
> 标签：javascript, jquery, css, jquery-mobile

我使用[jQuery Mobile ThemeRoller](http://jquerymobile.com/themeroller/)为我正在开发的新移动网站创建主题。一般来说，主题效果很好，但在我的应用程序中没有使用 ThemeRoller 中显示的列表分隔符。

这是说明问题的屏幕截图：

[ThemeRoller 问题 http://img.skitch.com/20120416-8fbfbu41abrci1ym8uthatfi4e.png](http://img.skitch.com/20120416-8fbfbu41abrci1ym8uthatfi4e.png)

相关页面的相关 HTML 是：

```
<div id="schedule" data-role="page" data-theme="a">
    <div data-role="content" data-theme="a">
        <ul data-role="listview">
            <li data-role="list-divider">8:00 am</li>
            <li><a href="#session">Welcome &amp; Keynote</a></li>
            <li data-role="list-divider">9:00 am</li>
            <li><a href="#session">Session title displayed here</a></li>
        </ul>
    </div>
</div> 
```

我什至尝试添加一些我在 ThemeRoller 标记中找到的东西：

```
<li data-role="list-divider" data-swatch="a" class="ui-bar-a" data-form="ui-bar-a">8:00 am</li> 
```

这没有效果。无论我做什么，似乎都将课程设置为`ui-bar-b`. 我可以在 Chrome 中实时编辑 HTML 并更改`ui-bar-b`为`ui-bar-a`它看起来完全符合我的预期。

难道我做错了什么？这可能是一个 jqm 错误吗？

使用 jqm 1.1.0 和 jquery 1.7.0。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T17:31:25.347

您可以将该`data-dividertheme="a"`属性添加到您的`data-role="listview"`元素，以强制将特定样本用于分隔列表项。默认情况下，如果您`listview`设置为 theme `a`，那么分隔线将设置为 theme `b`，因此您必须强制 list-dividers 成为正确的主题，或者您必须牢记这一点来构建您的主题。

```
 <ul data-role="listview" data-dividertheme="a">
        <li data-role="list-divider">8:00 am</li>
        <li><a href="#session">Welcome &amp; Keynote</a></li>
        <li data-role="list-divider">9:00 am</li>
        <li><a href="#session">Session title displayed here</a></li>
    </ul> 
```

这是一个演示： http: [//jsfiddle.net/8aZpQ/](http://jsfiddle.net/8aZpQ/)（此演示强制`e`分隔主题）

这里是文档：http: [//jquerymobile.com/demos/1.1.0/docs/lists/docs-lists.html](http://jquerymobile.com/demos/1.1.0/docs/lists/docs-lists.html)

# objective-c - “没有可见的@inteface ...声明...”属性错误

> ID：10178082
> 
> 赞同：0
> 
> 时间：2012-04-16T16:34:38.953
> 
> 标签：objective-c

为什么会出现以下情况：

`[object propertyName:propertyValue]`在 Xcode 4.3 和 Lion 中导致上述异常，但`object.propertyName=propertyValue`可以正常工作吗？有问题的@property 是一个简单的浮点数，我也使用过@synthesize。

我对 Objective C 比较陌生，但在 C# 方面有相当多的经验，并且一直在阅读 Aaron Hillegass 的关于这两种方法被列为同义词的主题的书，其中 [...] 是首选的一种.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T16:37:02.757

setter 方法的名称与属性不同。您想要`setPropertyName`而不是`propertyName`在将其作为方法调用时。getter 仍然只是属性名称。

请参阅[如何为 ivar 编写我自己的 setter 以](https://stackoverflow.com/a/4150987/901059)获得一个很好的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T16:48:45.680

当您使用`@property`and`@syntesize`来声明变量时，系统会为您编写 get 和 set 方法。在此您需要使用`[object setPropertyName:propertyValue]`. 您也可以使用`object.propertyName=propertyValue`，但它是一种 C 编程风格。

# php - 按路径从数据库中检索文件

> ID：10178085
> 
> 赞同：0
> 
> 时间：2012-04-16T16:34:46.317
> 
> 标签：php, upload, phpmyadmin

我有一个简单的 html 表单，可以保存电子邮件和多个附件路径。我将文件保存在服务器上以及它们到数据库的路径。

现在我如何从其路径中检索文件，然后将它们显示给用户，当单击下载时，我正在使用以下代码来获取文件，但这不起作用

```
$query = "
     SELECT `type`, `name`, `size`, `file1`,`file2`,`file3`,`file4`,`file5`
     FROM `upload` WHERE `id` = {$id}";
    $result = $dbLink->query($query);

    if($result) {
         if($result->num_rows == 1) {
             $row = mysqli_fetch_assoc($result);
            header("Content-Type: ". $row['type']);
            header("Content-Length: ". $row['size']);
            header("Content-Disposition: attachment; filename=". $row['name']);

            $path = $row['file1']; 
            $dir = opendir($path);
             echo $dir;
          while ($dir && ($file = readdir($dir)) !== false) {
             echo $file;
                } 
```

回显的文件不包含任何数据。

我现在只为一个文件执行此操作，其路径位于“file1”。同样，我有 5 个附件路径，我必须在这段代码中全部检索它们。请问我该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T19:48:53.543

第一：你不能有多个这样的下载。您只能发送该标头一次，仅此而已。

$path 是文件的完整路径吗？您可以尝试 is_readable($file) 在测试中首先检查。一旦你有了完整的路径，它就很简单了。

```
header("Content-Type: application/octet-stream");
header("Content-Length: ". $row['size']);
header("Content-Disposition: attachment; filename=". $row['name']);
readfile($row['file1']);
exit(); 
```

[Readfile](http://php.net/readfile)直接输出并流式传输，因此您不必读取内容然后输出。添加出口以确保在它之后没有添加其他输出，否则您可能会损坏文件。

这可行，假设 $row['file1'] 有一个正确的路径！

对于多个文件，您必须进行多次调用。就像给用户多个链接一样，他们可以点击下载。

唯一的选择是您使用 zip 将其打包在一起，然后将其作为一个大 zip 文件发送。

# c# - 将新的 Windows 窗体与 C# 中的现有项目链接

> ID：10178086
> 
> 赞同：1
> 
> 时间：2012-04-16T16:34:48.257
> 
> 标签：c#

我有 ac# 问题。我创建了一个名为“classproject”的项目，并添加了几个表单以成功进行项目并成功运行该程序，但是我刚刚添加了另一个 Windows 表单，当我双击该表单时，它把我带到了代码视图并提出了这个：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
namespace WindowsFormsApplication1
{
    public partial class demo : Form
    {
        public demo()
        {
            InitializeComponent();

        }

        private void demo_Load(object sender, EventArgs e)
        {
        }

    }

} 
```

现在，我的挑战是项目名称默认显示在命名空间之后，如“命名空间类项目”而不是“命名空间 WindowsFormsApplication1”。请任何人都可以帮助我，我打算做什么，因为已经尝试了所有可能的方法。即使我自己更改名称，它仍然会标记错误......有人请尽快帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T16:39:54.070

我不确定你的问题到底是什么。如果您在代码中手动将命名空间更改为`classproject`它应该没问题。你在说什么错误？您还需要更改设计器代码文件（可能称为`demo.Designer.cs`）。

也只是一个旁注。C# 的标准命名约定是使用 Pascal-case（如在 ClassProject 中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T16:46:24.797

您必须更改 Visual Studio 生成的所有文件中的命名空间。您可以手动完成，或者只是将光标设置在“WindowsFormsApplication1”上，按 F2 并输入新名称。

可选地，您还可以在应用程序选项卡上更改项目属性中的命名空间 - 然后添加到项目的所有新文件也将具有您在那里设置的命名空间。

# python - error = class DBError(exceptions.Exception) (do `help('dbhash')`)，这个语言结构叫什么？

> ID：10178089
> 
> 赞同：0
> 
> 时间：2012-04-16T16:34:50.730
> 
> 标签：python, django

`help('dbhash')`（标准库模块）：

```
CLASSES
    exceptions.Exception(exceptions.BaseException)
        bsddb.db.DBError

    error = class DBError(exceptions.Exception)
     |  Method resolution order:
     |      DBError
     |      exceptions.Exception
     |      exceptions.BaseException
     |      __builtin__.object
     : 
```

这种`error = class DBError(exceptions.Exception)`语言结构是如何命名的？它有什么作用？如果您安装了 django，则在执行 help('django.http.HttpResponse') 时可以看到此构造的另一个示例。

（我正在使用 python 2.7.2 和 django 1.4）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T16:43:49.933

它不是有效的语法。在帮助中，它的意思是表示`error`最初定义为`class DBError`并派生自`exceptions.Exception`。

# java - 如何将 Java 线程 PIN 到 Linux 上的处理器？（使用 JNI、本机代码、linux 技巧等）

> ID：10178099
> 
> 赞同：1
> 
> 时间：2012-04-16T16:35:23.350
> 
> 标签：java, linux, multithreading, concurrency, parallel-processing

> **可能重复：**
> [Java 线程亲和性](https://stackoverflow.com/questions/2238272/java-thread-affinity)

我想测试我的 2 线程程序在自己的物理处理器上运行每个线程。我听说在 linux 中，您可以将线程 PIN 到某个处理器，以便它留在那里。Java中是否有某种库（当然使用本机代码）可以让我这样做？如果没有，Linux 大师能否描述我如何暂停我的 JVM、列出我的 Java 线程、获取它们的本机 id 并运行某种 linux 命令来对它们进行 PIN 操作？然后我可以恢复我的 JVM，线程将绑定到它们分配的处理器。

# java - 从java程序将图像作为参数传递给php脚本

> ID：10178100
> 
> 赞同：0
> 
> 时间：2012-04-16T16:35:24.603
> 
> 标签：java, php, web, image-uploading

我在客户端有一个 java 程序，我需要从该程序发送图像以上传到运行 php 脚本的服务器。
谁能建议这样做的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T16:39:59.487

您需要发送一个 HTTP POST 请求，其中包含作为正文的图像数据。

至于java解决方案，这里有一个类似的帖子：

[如何使用 POST 上传二进制数据](https://stackoverflow.com/questions/5055278/how-to-upload-binary-data-using-post)

# c++ - 多线程 (openMP) - 多少个并行线程

> ID：10178108
> 
> 赞同：5
> 
> 时间：2012-04-16T16:36:14.493
> 
> 标签：c++, multithreading, parallel-processing, multiprocessing, openmp

我想知道是否可以在具有 8 个内核的硬件上同时运行超过 8 个线程。

如果是这样，使用 openMP 并行化 N 个计算，我可以创建大小为 N/8 的块，并在每个线程中进一步分叉为 (N/8)/8 个线程，甚至更多？

当我嵌套并行化时会发生什么？我还有 8 个用于嵌套并行的可用线程吗？

谢谢！！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-16T16:41:02.557

8 核在给定时间点最多只能同时运行 8 个线程。但是，很大程度上取决于您的线程在做什么。如果他们正在执行 CPU 密集型任务，则不建议生成多于内核数量的线程（少数可能还可以）。否则过多的上下文切换和缓存未命中将开始降低性能。但是，如果有大量 I/O，线程可能会被大量阻塞，而不是使用 CPU，因此您可以并行运行更多线程。

底线是，您需要在特定情况下，在特定环境中测量性能。

另请参阅[此相关线程](https://stackoverflow.com/questions/4317551/openmp-what-is-the-benefit-of-nesting-parallelizations)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T06:49:22.320

现代 cpu 处理器可以选择超线程。
这意味着管道可以同时运行两个或多个线程。

所以可以同时运行的线程数是：
total_threads = num_procs * 超线程因子

通常，超线程因子 = 2。

对于 CPU 密集型工作负载，您必须运行 total_threads。对于 io 密集型工作负载，您应该使用 total_threads * 2 个线程。这样我们就可以将一些线程的计算与其他线程的 io 重叠。

这些拇指规则是我遵循的。您可以根据工作量进行更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T19:10:21.043

首先，你不能运行超过 8 个线程。其次，如果没有其他方法，则求助于嵌套并行，因为 openmp 在这方面必须改进很多。

# javascript - JavaScript 代码架构 - 使用或不使用构造函数

> ID：10178119
> 
> 赞同：4
> 
> 时间：2012-04-16T16:37:10.897
> 
> 标签：javascript, unobtrusive-javascript

请帮助我决定是否应该使用函数的原型对象和“new”关键字，或者完全远离构造函数。

**情况：**

调用的函数`widget()`将被调用 10-15 次以初始化页面上的每个小部件。`widget()`包含相当多的内部方法。

每次`widget()`调用该函数都需要返回一个对象，该对象作为 API 对小部件进行操作。

**问题**

1）我是否将所有内部方法都放在`Widget()`其原型属性下？这没有任何意义，但主要原因是每次`widget()`调用时不重新实例化内部函数。

但如果我确实将内部函数放在原型中，每个实例化`w`对象 ( `w = new Widget();`) 都可以访问内部私有方法。

2）如果我远离构造函数和`new`关键字并将我的代码构造如下，我该如何解决每次`widget()`调用时重新实例化内部函数的性能问题。

```
function widget()
{
   var returnObj = {};

   /* Add internal functions but this will be re-instantiated every time */

   return returnObj;

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T16:41:24.467

你在这里需要权衡一下。正如您似乎已经了解的那样，您放置的方法`.prototype`是公开可用的，但这是放置方法的最有效位置，因为它们会以非常有效的方式自动添加到该对象的所有新副本中。使用`.prototype`for 方法时，您的方法只有一个副本，并且对该单个副本的引用会自动添加到该对象的所有新实例中。

但是，javascript 没有内置私有方法，唯一的解决方法是不使用`.prototype`它们或任何需要调用私有方法的方法。

[Doug Crockford](http://www.crockford.com/javascript/private.html)的这篇文章很好地描述了如何为任何对象中的数据或方法创建隐私。

无论哪种情况，我都没有理由避免使用`new`关键字来创建新对象。您可以使任`.prototype`一方法或私有方法与`new`.

但是，如果您想实现真正的私有方法，那么您不能使用`.prototype`私有方法或任何需要访问它们的方法，因此您必须决定哪个对您更重要。没有一个正确的答案，因为您对隐私的需求因情况而异。

在我的编码中，我通常不强制隐私，我确实使用`.prototype`and `new`。我通过以下划线开始它们的名称来指定原型上的“非公共”方法。这是一个符号约定，而不是访问强制方案。

在回答您关于避免`new`运算符和重新实例化方法的第二个问题时，我只想问您为什么要这样做？你有什么收获？我不知道使用`new`. 据我所知，您关于是否`.prototype`在构造函数中使用手动创建/分配方法的决定应该是关于私有方法的需要。

仅供参考，无论哪种方式，15 个对象都不会在性能上产生显着差异。我会评估您对真正隐私的需求，并据此做出决定。如果您必须强制执行隐私，请使用 Crockford 方法来实现私有方法。如果您不必拥有真正的隐私，请使用`.prototype`. 在这两种情况下，我都没有理由避免使用`new`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T16:59:24.287

您可以使用 metaconstructor* 模式来解决这个问题。

```
function defineCtor(metaCtor) {

  var proto = new metaCtor();

  var ctor = proto.hasOwnProperty('constructor') ? 
             proto.constructor : new Function();

  return (ctor.prototype = proto).constructor = ctor;

} 
```

现在您有了一个构造构造函数（或更准确地说构造原型并返回构造函数）的函数。

```
var Widget = defineCtor(function() {

  function doInternalStuff() {

    // ...cant see me

  }

  // this function ends up on the prototype

  this.getFoo = function() { return doInternalStuff(); };

});

// ...

var myWidget = new Widget(); 
```

* * *

**解释**

`defineCtor`将单个匿名函数作为属性。它使用 调用函数`new`，创建一个对象。它将对象分配为新构造函数的原型属性（空函数或生成的原型对象自己的`constructor`属性），并返回该函数。

这为您的内部函数提供了一个闭包，解决了您的问题 1，并为您设置了构造函数/原型对，解决了问题 2。

* * *

**比较**

将该`defineCtor`技术与以下两个示例进行比较。

本例使用原型，存在问题1：内部的东西没有封装。

```
function Widget(options) {
  this.options = options;
}

Widget.prototype = {

  getFoo: function() {
    return doInternalStuff();
  }

};

// How to encapsulate this?
function doInternalStuff() { /* ... */ } 
```

此示例在构造函数中设置所有内容，并且存在问题 2：每次构造对象时，都会为每个属性实例化新的函数对象。

```
function Widget(options) {

  this.options = options;

  function doInternalStuff() { /* ... */ }

  this.getFoo = function() {
    return doInternalStuff();
  };

} 
```

此示例使用上述技术提供封装，同时仍利用原型：

```
var Widget = defineCtor(function() { 
  //                    ^
  // This function runs once, constructing the prototype.

  // In here, `this` refers to the prototype.

  // The real constructor.
  this.constructor = function(options) {

    // In function properties, `this` is an object instance 
    // with the outer `this` in its prototype chain.

    this.options = options;

  };  

  function doInternalStuff() { /* ... */ }

  this.getFoo = function() { return doInternalStuff(); };

});

// ...

var myWidget = new Widget(); 
```

* * *

这种方法有一些好处，其中一些好处比其他方法更明显。

*   它提供封装。您可以通过将第一个“比较”示例包装在立即调用的函数中来做到这一点，但这种方法在团队设置中可能更清晰，更容易“实施”。

*   它是可扩展的。`metaCtor`您可以为您的“元构造函数”函数提供自己的原型，具有“扩展”、“混合”等函数属性。然后，在`this.extends(BaseWidget)`. `defineCtor`API 永远不需要改变来实现这些。

*   它“欺骗”了 Google Closure Compiler、Eclipse、jsdoc 等，让您认为您正在定义实际的构造函数而不是“元函数”。这在某些情况下可能很有用（代码以这些工具理解的方式“自我记录”）。

^(* 据我所知，“元构造函数”这个词完全是虚构的。)

# android - 来自 TextToSpeech 的 Android 死对象异常

> ID：10178120
> 
> 赞同：5
> 
> 时间：2012-04-16T16:37:17.613
> 
> 标签：android, exception, text-to-speech

请问有人知道什么可能导致这个异常吗？ [http://cl.ly/370E3C4425162j2F2b3h](http://cl.ly/370E3C4425162j2F2b3h)（来自 LogCat 的屏幕截图）

这就是我调用 TextToSpeech 的方式

```
public void say(String text, Context context, String utteranceID){
    if(mTts == null){
        this.text = text;

        mTts = new TextToSpeech(context, (OnInitListener) helper);

    }
    else{
        map.clear();
        map.put(TextToSpeech.Engine.KEY_PARAM_UTTERANCE_ID, utteranceID);
        mTts.speak(text, TextToSpeech.QUEUE_FLUSH, map);
    }
} 
```

TextToSpeech 实际上可以正常工作（但您根本看不到:)，但是由于我的应用程序确实经常使用 TTS，因此我将 TTS 实例保存在自定义帮助程序类中。有时我遇到了异常。它是偶然出现的，有时它可以正常工作，有时 UI 会冻结一段时间然后抛出异常。（整件事都是盲人 UI 的一部分）

[如何修复 android.os.DeadObjectException android X](https://stackoverflow.com/questions/1573557/how-to-fix-android-os-deadobjectexception-android-x)

实际上这是可能的解决方案..但是在查看堆栈跟踪后，我认为我的问题有所不同

# apache - 需要帮助 301 htaccess RedirectMatch

> ID：10178122
> 
> 赞同：0
> 
> 时间：2012-04-16T16:37:19.457
> 
> 标签：apache, .htaccess, mod-rewrite

我需要在文件扩展名之后直接做一个技巧

`http://www.your-name.dk/Whatever-url.php-Whatever 301`-->`http://www.your-name.dk/Whatever.php`

我试过这个但没用

```
RedirectMatch permanent (.*).php.* htt*://www.your-name.dk/$1.php 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T17:57:07.280

启用 mod_rewrite 和 .htacess，然后将此代码添加到 DOCUMENT_ROOT 下的 .htaccess 中：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^([^-]+)-[^.]+\.php-\1$ $1.php [L,NC,R=301] 
```

# bash - 创建链接的脚本

> ID：10178123
> 
> 赞同：2
> 
> 时间：2012-04-16T16:37:21.713
> 
> 标签：bash, hyperlink

我有一个文件夹（例如 /data），其中包含一组文件，例如：a.txt、b.bin、c.bak、d.txt、e.bin。我需要在文件夹 (/dataIL) 中创建指向具有完全相同名称（1-1 映射）的文件的链接。也就是说，/dataIL 应该有 5 个链接：

```
a.txt->../data/a.txt  
b.bin->../data/b.bin  
c.bak->../data/c.bak  
d.txt->../data/d.txt  
e.bin->../data/e.bin 
```

创建一个链接的命令是：ln -s ../data/a.txt a.txt

想知道我可以运行哪些脚本命令来为所有文件创建。注意还有其他扩展名的文件。我只需要带有任何扩展名的所有文件的链接。

我有一个 bash 外壳。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T16:40:54.770

您可以简单地使用星号创建指向所有文件的符号链接，因为它们位于一个目录中：

```
ln -s data/* . 
```

这假设您想要创建指向`data`. 另请注意，根据您的设置，这可能会跳过名称以点开头的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T16:42:24.097

```
find ../data -maxdepth 1 -type f -exec bash -c "ln -s {} \`basename {}\`" \; 
```

../data 可以是任何目录

# php - MySQL WHERE 数组

> ID：10178124
> 
> 赞同：-1
> 
> 时间：2012-04-16T16:37:26.637
> 
> 标签：php, mysql

我一直在阅读、测试和理解如何创建一个 MySQL 语句来匹配一列与一组值......

这就是我所拥有的...

```
<form id="form" action="index.php" method="post">
<?
$query = "SELECT Interest FROM Interests";
$result = mysql_query($query);
while ($row = mysql_fetch_assoc($result))
{
    echo '<input type="checkbox" name="Interest[]" value="' . $row['Interest'] . '" /> ' . $row['Interest'] . '<br />';
}
?>
<input id="Search" name="Search" type="submit" value="Search" />
</form>

<?
if (isset($_POST['Search']))
{
    $InterestMatches = implode(',', $_POST['Interest']);
    $query = "SELECT MemberID FROM MemberInterests WHERE Interest IN ( $InterestMatches )";
    $result = mysql_query($query) or die(mysql_error());
    if (!$result) {
        $message  = 'Invalid query: ' . mysql_error() . "\n";
        $message .= 'Whole query: ' . $query;
        die($message);
    }
    while ($row = mysql_fetch_assoc($result))
    {
        $ResultingMemberIDs[] += $row['MemberID'];
    }
}
?> 
```

我总是得到同样的错误......

```
Unknown column 'WhateverInterest' in 'where clause' 
```

有人可以告诉我我做错了什么，我需要做些什么来纠正这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T16:41:16.207

我建议回显您的查询，这将有助于调试。您的查询当前如下所示：

```
SELECT MemberID FROM MemberInterests WHERE Interest IN (WhateverInterest,Testing) 
```

如您所见，在`IN`值中未加引号，因此它们被解释为字段名称。您需要在`IN`.

您可以通过循环来修复它，并在每个值周围添加引号：

```
foreach($_POST['Interest'] as &$intrest){
    $intrest = "'$intrest'";
}
$InterestMatches = implode(',', $_POST['Interest']); 
```

或者通过 内爆`"','"`，然后在前后添加引号：

```
$InterestMatches = "'" . implode("','", $_POST['Interest']) . "'"; 
```

PS您应该`mysql_real_escape_string`输入每个值`$_POST['Interest']`以避免SQL注入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T16:42:18.173

尝试

```
$InterestMatches = '"' . implode('","', $_POST['Interest']) . '"'; 
```

# php - 不考虑数组的错误消息

> ID：10178126
> 
> 赞同：-1
> 
> 时间：2012-04-16T16:37:33.557
> 
> 标签：php

如果“名称”字段为空，我希望显示一条错误消息，但它会显示表单中所有字段的错误消息。

```
$key = array('Name');
    foreach ($_POST as $key => $val) {
        while (is_array($val))
            $val = reset($val);
        if (is_string($val))
            $val = trim($val);
        if (empty($val)) {
            $err[] = "ERROR - $key is required";
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T16:57:36.120

我会做的

```
foreach ($_POST as $key => $val) {
        if($val == "Name")
        {

           if (empty($val)) {
               $err[] = "ERROR - $key is required";
               break;
           }
        }

    } 
```

请注意，这是未经测试的

# java - 对以 UTF 格式编写的文件执行二进制搜索

> ID：10178127
> 
> 赞同：0
> 
> 时间：2012-04-16T16:37:33.703
> 
> 标签：java

有没有办法对以 UTF 格式存储的文件按排序顺序执行二进制搜索。我可以使用 RandomAccessFile 对文本文件执行二进制搜索。首先我找出文件的长度，然后使用 fseek 跳转到文件的中间位置，跳转到中间位置后我读取字节。但是，我发现以 UTF 格式存储的文件不可行，因为第一个字符在 UTF 格式中是随机的。而且使用 DataInputStream 我无法跳转到文件中的特定位置。是否可以对这样的文件进行二进制搜索。如果是，那么使用哪些类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T16:54:11.530

是的，有可能。如果您跳到文件的中间，您首先需要转到最近的记录分隔符，然后使用记录分隔符后开始的文本。

根据您拥有的确切文件格式，可以使用换行符、TAB 字符或类似的东西作为记录分隔符。

如果记录分隔符是 Unicode 编号低于 32 的字符（NL、CR、TAB 满足），则很容易找到记录分隔符。然后你不需要关心多字节 UTF-8 编码（用于定位分隔符）。如果它是一种宽字符 Unicode 格式，那么它也不会更难。

*DataInputStream*是随机访问的错误类。（流式传输有点与随机访问相反。）请查看[RandomAccessFile](http://docs.oracle.com/javase/6/docs/api/java/io/RandomAccessFile.html)。

# cakephp - Sanitize::html 带重音 CakePHP2.0

> ID：10178128
> 
> 赞同：0
> 
> 时间：2012-04-16T16:37:42.523
> 
> 标签：cakephp, cakephp-2.0, sanitization, diacritics, sanitize

我正在使用它来将我的数据保存到数据库中：

```
$this->request->data['Post']['body'] = utf8_decode($this->request->data['Post']['body']); 
```

像这样，我可以将一些“特殊”字符保存到我的数据库中，比如带有重音符号的字符：áéíóú 没有任何问题。

然后，我尝试保护我的应用程序免受 HTML 和 SQL 注入，并像这样使用 Sanitization：

```
$this->request->data['Post']['body'] = Sanitize::html($this->request->data['Post']['body']); 
```

所以现在我的文本像这样存储在数据库中：

```
á = &aacute;
é = &eacute;
í = &iacute; ...etc 
```

我不想那样。此外，我在 DB 上的字段有最多的字符，这无济于事。

我还尝试使用编码 = true、编码 = 假或编码 = 'utf8' 的 sanitize 选项参数，但似乎没有任何改变。

我应该怎么办？谢谢。

# 更新 1

我也尝试在我的控制器上使用 htmlentities 函数，但它将它插入我的数据库而不是á：

```
&Atilde; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T16:45:09.900

如果您使用 Cake 来保存您的数据（即使用`save()`not `query()`），那么您就可以防止 SQL 注入。它会自动转义值。

如文档中所述，[`Sanitize::html()`](http://api20.cakephp.org/class/sanitize#method-Sanitizehtml)会将字符转换为 HTML 实体，例如`&gt;`,`&aacute;`等。除非您特别想要 HTML 实体，否则您可能不应该使用它。如果您的应用程序和表格具有正确的编码，Cake 将负责将您的口音存储在数据库中。

# android - 重命名 xml 中引用的片段类

> ID：10178130
> 
> 赞同：1
> 
> 时间：2012-04-16T16:37:50.677
> 
> 标签：android, android-fragments

我喜欢片段 - 但是如果片段类在这样的 xml 中被引用，那么重命名这些类真的很痛苦：

```
<fragment
 android:id="@+id/listFragment"
 android:layout_width="match_parent"
 android:layout_height="match_parent"
 class="com.pkg1.Screens.MyFragmentClass" > 
```

现在，当用其 java 文件重命名 MyFragmentClass 时，只重命名 JAVA 文件 - 所有引用的 xml 都保持不变。

是否有一种“秘密”的重命名方式，以便 xml 引用也得到更新？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T16:44:00.730

不是特别机密，但您可以使用 Eclipse 进行文件搜索，使用 *.xml 的文件名模式，并将“class="com.pkg1.Screens.MyFragmentClass"”替换为您要重命名的任何内容。 .?

# svn - SVN 更新导致“RA 层请求失败”和“SSL 握手失败：安全连接被截断”

> ID：10178131
> 
> 赞同：1
> 
> 时间：2012-04-16T16:37:58.493
> 
> 标签：svn, subclipse

有时，当我尝试在 MyEclipse 9.0 上使用 Subclipse 1.6 对**HEAD 进行标准更新时**，我会收到以下错误：

> RA 层请求失败
> svn：“https://svn.example.com/myrepo/myproj/trunk”的选项：SSL 握手失败：安全连接被截断（https://svn.example.com）

对于大多数尝试，更新工作正常。我不确定失败的尝试有什么共同点，但我怀疑它们包含更多更改，因此需要更长的时间才能完成。

过去，当我收到此错误时，我只是再次运行更新。我从来没有在连续更新中得到它。

这个错误是什么意思，我怎样才能防止它再次发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T16:48:38.757

您可能只是失去了与 SVN 服务器的连接。

# mod-rewrite - RewriteRule 获取任何 url

> ID：10178138
> 
> 赞同：0
> 
> 时间：2012-04-16T16:38:55.940
> 
> 标签：mod-rewrite

我的 RewriteRule 规则有什么问题：

```
RewriteRule ^(.*)$ /ps1462/info_page.php?key=$1 [QSA,L] 
```

当我在我的 .htaccess 文件中添加这一行时 - 得到 500 错误。我需要将所有字符发送到新页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T18:50:50.727

确保至少`AllowOverride FileInfo`在您的 virtualhost/httpd 配置中进行了设置。

如果你真的是一个点，那么在正则表达式中转义点总是一个好主意：

```
RewriteRule ^(.*)$ /ps1462/info_page\.php?key=$1 [QSA,L] 
```

但这不会导致 500 内部服务器错误...

# php - php中的数据传输

> ID：10178143
> 
> 赞同：0
> 
> 时间：2012-04-16T16:39:13.947
> 
> 标签：php, data-transfer

我在 php 中实现 kerberos。在这里，受信任的身份验证服务器发出票证，目的是向其他服务器验证客户端。因此涉及到三个实体（身份验证服务器、客户端和其他服务器）之间的票证和 ID 等传输。所以现在的问题是什么可以用来传输数据？例如，客户端在其他服务器上登录。身份验证服务器为客户端创建加密票证。现在必须将其传输给客户端。同样，客户端需要将此票证发送到其他服务器，以便其他服务器可以验证它。我有一些选项，例如 cURL 或 javascript XHR。我不确定它们是否可以在这种情况下使用。我寻求某人的指导。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T20:15:57.813

我会选择 cURL。如果您使用 Javascript，您将暴露要处理数据的 URL，这可能会导致安全漏洞。当然，你绝不能相信用户输入，但对我来说这很简单：只使用服务器端

# javascript - 将 KinteticJS 绘图导出到 SVG？

> ID：10178146
> 
> 赞同：2
> 
> 时间：2012-04-16T16:39:18.283
> 
> 标签：javascript, html, canvas, svg, kineticjs

是否可以将[Kinetic JS](http://www.kineticjs.com/)对象导出到 SVG？

或者解决方法是将 Kintetic JS 的画布转换为 SVG。

编辑：

最好的方法是使用[fabricJS](https://github.com/kangax/fabric.js/)，因为它在处理织物对象时支持画布到 SVG 渲染。

我接受了 Phrogz 的回答，因为它还可以将画布转换为 svg，而无需使用其他库在画布上绘图。

编辑 2：好的，我搞砸了，Phrogz 的库是围绕画布元素的包装，所以你使用它的方法在画布上绘图（我认为它只是在画布上“监听”并创建 SVG 路径）。所以最好的解决方案绝对是fabricJS。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T22:45:35.063

我创建[了一个库的 alpha 版本，](http://phrogz.net/svg/HTML5CanvasRecordsSVG.js)它允许您扩展 HTML5 Canvas 上下文，以便它跟踪所有矢量绘图命令并将它们作为数组 SVG 元素存储在`ctx.svgObjects`上下文的属性中。

您可以在此处查看该库的运行情况：http: [//phrogz.net/svg/HTML5CanvasRecordsSVG.html](http://phrogz.net/svg/HTML5CanvasRecordsSVG.html)
该演示打开录制，在 HTML5 画布上绘制一些形状，然后将“录制”的 SVG 对象附加到 SVG 容器隔壁。

一般来说图书馆：

1.  [`SVGMatrix`](http://www.w3.org/TR/SVG/coords.html#InterfaceSVGMatrix)通过对象跟踪当前的上下文转换。（这是因为 HTML5 Context api 允许您*将*当前转换设置为矩阵，但不允许您*获取*当前矩阵。）它通过拦截`translate()`和`rotate()`相应地更新矩阵来实现这一点。
2.  拦截`beginPath()`并创建一个新的 SVG 路径元素，然后拦截进一步的命令，如`moveTo()`和`lineTo()`，以便将等效路径命令添加到 SVG 路径。
    *   *注意：在撰写本文时，库中并不支持或测试所有路径命令。*
3.  截取当前 SVG 的副本`fill()`并将其添加到数组中，设置当前变换矩阵、填充和描边样式。 `stroke()``<path>``svgObjects`
    *   *注意：在撰写本文时，并非所有笔划样式 ( `lineCap`, `lineJoin`, `miterLimit`) 都受支持。*
    *   *注意：调用`fill()`后跟`stroke()`创建两个单独的 SVG 元素；没有优化将这种特定情况与笔触/填充区分开来，或者更改调用之间的变换或路径。*
4.  拦截`fillRect()`并`strokeRect()`创建一个 SVG`<rect>`元素。

可以在这个库上做更多的工作来充实所有的命令（不仅仅是路径命令，还有类似的东西`fillText()`）。但这不是我个人需要的东西，所以我不倾向于花几个小时把它带到终点线。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-17T17:24:18.513

最好的解决方案是使用[Fabric.js](https://github.com/kangax/fabric.js/)！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T16:58:27.353

基本上你可以将画布转换为base64 png，然后把它放在svg上

也许这可以帮助你

[http://svgkit.sourceforge.net/tests/canvas_tests.html](http://svgkit.sourceforge.net/tests/canvas_tests.html)

# dynamics-crm-2011 - MS Dynamics CRM，将跟踪代码添加到电子邮件活动中的链接

> ID：10178149
> 
> 赞同：2
> 
> 时间：2012-04-16T16:39:26.537
> 
> 标签：dynamics-crm-2011

使用 MS Dynamics CRM 2012，是否可以将跟踪代码添加到电子邮件中每个链接的末尾？

因此，我们可以确定哪些联系人点击了我们网站的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T18:14:34.823

不是开箱即用。

但 CRM 是 xRM，因此您可以通过多种方式实现这一目标。可能想到的最简单的方法是修改电子邮件模板以在 URL 中包含收件人的 GUID 作为参数。然后在您的网站（链接指向的位置）内，根据 GUID 参数记录访问。

# .net - 如何从 C# 中的匿名事件处理程序转换为 VB.Net

> ID：10178159
> 
> 赞同：0
> 
> 时间：2012-04-16T16:40:13.500
> 
> 标签：.net, windows-phone-7, c#-to-vb.net

我有以下 Windows Phone 7 应用程序的示例代码，我正试图将其转换为 VB.Net 作为起点。像这样的作业：

```
Loaded += (_, __) => { anonymousMethodBody();} 
```

当我使用 C# 到 VB 转换工具时无法转换。这些应该怎么翻译？

```
public MainPage()
{
    InitializeComponent();

    Loaded += (_, __) =>
        {
            PhoneApplicationService.Current.ApplicationIdleDetectionMode = IdleDetectionMode.Disabled;
            cam = new VideoCamera();
            cam.Initialized += (___, ____) =>
                {
                    cam.LampEnabled = true;
                    cam.StartRecording();
                };
            vCam.SetSource(cam);

            new Thread(() =>
                {
                    try
                    {
                        var isf = IsolatedStorageFile.GetUserStoreForApplication();

                        var files = isf.GetFileNames();
                        foreach (var file in files)
                        {
                            Debug.WriteLine("Deleting... " + file);
                            isf.DeleteFile(file);
                        }
                    }
                    catch (Exception ex)
                    {
                        Debug.WriteLine("Error cleaning up isolated storage: " + ex);
                    }
                }).Start();
        };
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T17:01:00.797

`Loaded`事件处理程序是在您使用 lambda 表达式发布的 C# 代码中定义的。我想大多数 VB.NET-C# 转换器都不能很好地处理这些，因为它们相对较新。尝试这个：

```
AddHandler Loaded, Sub() 'Pass the Loaded event parameters, I cannot see them in your code
                  'The code inside the big block
                   End Sub 
```

你不需要打电话`RemoveHandler`（阅读下面的评论）。

# java - java.io.FileInputStream.readBytes(Native Method) 的无限 100% CPU 使用率

> ID：10178162
> 
> 赞同：24
> 
> 时间：2012-04-16T16:40:45.057
> 
> 标签：java, jvm, cpu-usage, infinite-loop

我现在正在调试一个程序，它每个外部进程有两个线程，这两个线程使用`while ((i = in.read(buf, 0, buf.length)) >= 0)`循环继续读取 Process.getErrorStream() 和 Process.getInputStream() 。

有时，当外部进程由于 JVM 崩溃而崩溃时（请参阅[这些 hs_err_pid.log 文件](https://gist.github.com/2405004)），那些读取该外部进程的 stdout/stderr 的线程开始消耗 100% 的 CPU 并且永远不会退出。*循环体没有被执行*（我在那里添加了一个日志语句），所以无限循环似乎在 native method 内`java.io.FileInputStream.readBytes`。

我已经在 Windows 7 64 位（jdk1.6.0_30 64 位、jdk1.7.0_03 64 位）和 Linux 2.6.18（jdk1.6.0_21 32 位）上重现了这一点。有问题的代码在[这里](http://code.google.com/p/pitestrunner/source/browse/pitest/src/main/java/org/pitest/util/StreamMonitor.java?r=9210fd33a879c17af2f94b5d94b72ddbaf345a02#38)，它是[这样](http://code.google.com/p/pitestrunner/source/browse/pitest/src/main/java/org/pitest/util/JavaProcess.java?r=9210fd33a879c17af2f94b5d94b72ddbaf345a02#43)使用的。请参阅这些链接以获取完整代码 - 以下是有趣的部分：

```
private final byte[]              buf = new byte[256];
private final InputStream         in;
...    

int i;
while ((i = this.in.read(this.buf, 0, this.buf.length)) >= 0) {
    ...
} 
```

堆栈跟踪看起来像

```
"PIT Stream Monitor" daemon prio=6 tid=0x0000000008869800 nid=0x1f70 runnable [0x000000000d7ff000]
   java.lang.Thread.State: RUNNABLE
    at java.io.FileInputStream.readBytes(Native Method)
    at java.io.FileInputStream.read(FileInputStream.java:220)
    at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)
    at java.io.BufferedInputStream.read1(BufferedInputStream.java:258)
    at java.io.BufferedInputStream.read(BufferedInputStream.java:317)
    - locked <0x00000007c89d6d90> (a java.io.BufferedInputStream)
    at org.pitest.util.StreamMonitor.readFromStream(StreamMonitor.java:38)
    at org.pitest.util.StreamMonitor.process(StreamMonitor.java:32)
    at org.pitest.util.AbstractMonitor.run(AbstractMonitor.java:19)
   Locked ownable synchronizers:
    - None 
```

或者

```
"PIT Stream Monitor" daemon prio=6 tid=0x0000000008873000 nid=0x1cb8 runnable [0x000000000e3ff000]
   java.lang.Thread.State: RUNNABLE
    at java.io.FileInputStream.readBytes(Native Method)
    at java.io.FileInputStream.read(FileInputStream.java:220)
    at org.pitest.util.StreamMonitor.readFromStream(StreamMonitor.java:38)
    at org.pitest.util.StreamMonitor.process(StreamMonitor.java:32)
    at org.pitest.util.AbstractMonitor.run(AbstractMonitor.java:19)
   Locked ownable synchronizers:
    - None 
```

使用 Sysinternals Process Explorer，我能够获得这些线程的本机堆栈跟踪。大多数情况下，超过 80% 的时间，堆栈跟踪如下所示：

```
ntdll.dll!NtReadFile+0xa
KERNELBASE.dll!ReadFile+0x7a
kernel32.dll!ReadFile+0x59
java.dll!handleRead+0x2c
java.dll!VerifyClassCodesForMajorVersion+0x1d1
java.dll!Java_java_io_FileInputStream_readBytes+0x1d 
```

这也经常发生：

```
ntdll.dll!RtlNtStatusToDosErrorNoTeb+0x52
ntdll.dll!RtlNtStatusToDosError+0x23
KERNELBASE.dll!GetCurrentThreadId+0x2c
KERNELBASE.dll!CreatePipe+0x21a
kernel32.dll!ReadFile+0x59
java.dll!handleRead+0x2c
java.dll!VerifyClassCodesForMajorVersion+0x1d1
java.dll!Java_java_io_FileInputStream_readBytes+0x1d

ntdll.dll!RtlNtStatusToDosErrorNoTeb+0x42
ntdll.dll!RtlNtStatusToDosError+0x23
KERNELBASE.dll!GetCurrentThreadId+0x2c
KERNELBASE.dll!CreatePipe+0x21a
kernel32.dll!ReadFile+0x59
java.dll!handleRead+0x2c
java.dll!VerifyClassCodesForMajorVersion+0x1d1
java.dll!Java_java_io_FileInputStream_readBytes+0x1d 
```

有时它正在执行这部分代码：

```
java.dll!VerifyClassCodesForMajorVersion+0xc3
java.dll!Java_java_io_FileInputStream_readBytes+0x1d

java.dll!Java_sun_io_Win32ErrorMode_setErrorMode+0x847c
java.dll!VerifyClassCodesForMajorVersion+0xd7
java.dll!Java_java_io_FileInputStream_readBytes+0x1d

jvm.dll!JNI_GetCreatedJavaVMs+0x1829f
java.dll!VerifyClassCodesForMajorVersion+0x128
java.dll!Java_java_io_FileInputStream_readBytes+0x1d

jvm.dll+0x88c1
jvm.dll!JNI_GetCreatedJavaVMs+0x182a7
java.dll!VerifyClassCodesForMajorVersion+0x128
java.dll!Java_java_io_FileInputStream_readBytes+0x1d

java.dll!VerifyClassCodesForMajorVersion+0x10b
java.dll!Java_java_io_FileInputStream_readBytes+0x1d

jvm.dll!JNI_CreateJavaVM+0x1423
java.dll!VerifyClassCodesForMajorVersion+0x190
java.dll!Java_java_io_FileInputStream_readBytes+0x1d

jvm.dll+0x88bf
jvm.dll!JNI_CreateJavaVM+0x147d
java.dll!VerifyClassCodesForMajorVersion+0x190
java.dll!Java_java_io_FileInputStream_readBytes+0x1d

java.dll!VerifyClassCodesForMajorVersion+0x1aa
java.dll!Java_java_io_FileInputStream_readBytes+0x1d

java.dll!VerifyClassCodesForMajorVersion+0x1c3
java.dll!Java_java_io_FileInputStream_readBytes+0x1d

java.dll!VerifyClassCodesForMajorVersion+0x224
java.dll!Java_java_io_FileInputStream_readBytes+0x1d 
```

任何想法如何解决这个问题？这是 JVM 的一个已知问题吗？有解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T08:22:25.270

我还不能在本地重现这个，但两种可能的解决方法可能是

*   玩弄`in.available()`.

*   *将外部进程中的stout*和*stderr*重定向到一个套接字，然后从控制进程中读取它。

# java - 生成的 Axis 类非常通用，希望为 XML 结果集成生成的 JAX 类

> ID：10178166
> 
> 赞同：0
> 
> 时间：2012-04-16T16:41:01.587
> 
> 标签：java, xml, xml-serialization, jaxb, axis2

我使用基于 WSDL 的 Apache Axis 为 .NET SOAP Web 服务生成了很多类。为 Web 方法生成的方法返回`Result`仅具有一些通用`org.apache.axis.message.MessageElement[]`值的类。相反，我想要一个`Result`与 Web 方法返回的 XML 完全对应的类。我使用 JAX 为我的一个 Web 方法返回的 XML 创建了几个基于 XSD 的 Java 类，并且*这些*生成的类带有注释并且具有与我的 XML 匹配的属性：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "", propOrder = {
    "content"
})
@XmlRootElement(name = "fields")
public class Fields {
    @XmlValue
    protected String content;

    @XmlAttribute(required = true)
    @XmlSchemaType(name = "anySimpleType")
    protected String parameters;

    public String getContent() {
        return content;
    }

    public void setContent(String value) {
        this.content = value;
    }

    public String getParameters() {
        return parameters;
    }

    public void setParameters(String value) {
        this.parameters = value;
    }
} 
```

我现在正在尝试将 JAX 类（`Fields`如上）集成到`Result`Apache Axis 生成的类中。我不知道该怎么做。Apache Axis 生成的类具有以下可能有用的方法：

```
public static org.apache.axis.encoding.Serializer getSerializer(
        java.lang.String mechType, java.lang.Class _javaType,
        javax.xml.namespace.QName _xmlType) {
    return new org.apache.axis.encoding.ser.BeanSerializer(_javaType,
        _xmlType, typeDesc);
}
public static org.apache.axis.encoding.Deserializer getDeserializer(
        java.lang.String mechType, java.lang.Class _javaType,
        javax.xml.namespace.QName _xmlType) {
    return new org.apache.axis.encoding.ser.BeanDeserializer(_javaType,
        _xmlType, typeDesc);
} 
```

我可以以某种方式将`MessageElement[]`进入我的类构造函数（它的唯一参数）中，并根据注释方式`Result`等填充 a实例吗？还是在基于我的 .NET WSDL 生成 Apache Axis 类时出现问题，导致生成的类如此通用？`Fields``Fields``@XmlRootElement``Result`

**编辑：**迈克尔的评论让我检查了 WSDL，它有这个`wsdl:types`：

```
<s:element name="MyResponse">
    <s:complexType>
        <s:sequence>
            <s:element minOccurs="0" maxOccurs="1" name="MyResult">
                <s:complexType mixed="true">
                    <s:sequence>
                        <s:any/>
                    </s:sequence>
                </s:complexType>
            </s:element>
        </s:sequence>
    </s:complexType>
</s:element> 
```

这就是我看到的所有提及`MyResult`，而且`complexType`/ `sequence`/`any`看起来很一般。也许我需要用我的 .NET Web 服务做更多的事情，然后用 Axis 生成 Java 类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T14:34:10.350

Michael 关于检查 WSDL 的评论为我指明了正确的方向。我的一些 Web 方法刚刚返回`XmlDocument`，因此 WSDL 对它们非常通用。我更改了 Web 方法以返回具有`[Serializable]`属性的自定义类，现在 WSDL 更加具体，因此 Axis 生成的代码更加具体。

# php - 如何为文本框值实现 htmlspecialchars？

> ID：10178168
> 
> 赞同：1
> 
> 时间：2012-04-16T16:41:02.760
> 
> 标签：php, wordpress, textbox, htmlspecialchars

您好，我目前正在使用表格将值输入到自定义元字段中。我有一个名为剧集标题的文本框。我的问题是，如果在字段中添加字符“”，那么一切都会变得混乱。我想使用 htmlspecialchars 将值输入为 " 和 ' 而不是“”。以下代码无法隐藏字符。有人可以帮忙吗？

```
 <p>
      <input type="text" name="episode_title[]" id="episode_title[]" value="<?php echo ($_POST['episode_title']); ?>" class="title regular-text" style="width: 98%" />
      <span class="description"><?php _e('Title of The Episode.'); ?></span>
    </p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T16:50:57.820

将此添加到`htmlspecialchars`通话中：`ENT_QUOTES`像这样：

```
<?php echo htmlspecialchars($_POST['episode_title'], ENT_QUOTES); ?> 
```

这将启用更改`"`和`'`引号

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T16:43:15.877

`$_POST['episode_title']`是一个数组，因此您需要从数组中获取正确的值并使用`htmlspecialchars()`该值。

就像是：

```
value="<?php echo htmlspecialchars($_POST['episode_title'][$some_key]); ?>" 
```

**编辑：**我假设`$_POST`数组在提交时包含表单的结果。

# delphi - 网络基础设施发现

> ID：10178173
> 
> 赞同：13
> 
> 时间：2012-04-16T16:41:11.077
> 
> 标签：delphi, network-programming, lan, discovery

我想执行一个彻底的 LAN 设备发现，以便我可以创建一个类似于所附图表的图表，但包含 IP 和 MAC 地址等附加信息。

我已经尝试过 Torry 的代码：

```
type
  PNetResourceArray = ^TNetResourceArray;
  TNetResourceArray = array[0..100] of TNetResource;

function CreateNetResourceList(ResourceType: DWord;
                              NetResource: PNetResource;
                              out Entries: DWord;
                              out List: PNetResourceArray): Boolean;
var
  EnumHandle: THandle;
  BufSize: DWord;
  Res: DWord;
begin
  Result := False;
  List := Nil;
  Entries := 0;
  if WNetOpenEnum(RESOURCE_GLOBALNET,
                  ResourceType,
                  0,
                  NetResource,
                  EnumHandle) = NO_ERROR then begin
    try
      BufSize := $4000;  // 16 kByte
      GetMem(List, BufSize);
      try
        repeat
          Entries := DWord(-1);
          FillChar(List^, BufSize, 0);
          Res := WNetEnumResource(EnumHandle, Entries, List, BufSize);
          if Res = ERROR_MORE_DATA then
          begin
            ReAllocMem(List, BufSize);
          end;
        until Res <> ERROR_MORE_DATA;

        Result := Res = NO_ERROR;
        if not Result then
        begin
          FreeMem(List);
          List := Nil;
          Entries := 0;
        end;
      except
        FreeMem(List);
        raise;
      end;
    finally
      WNetCloseEnum(EnumHandle);
    end;
  end;
end;

procedure ScanNetworkResources(ResourceType, DisplayType: DWord; List: TStrings);

procedure ScanLevel(NetResource: PNetResource);
var
  Entries: DWord;
  NetResourceList: PNetResourceArray;
  i: Integer;
begin
  if CreateNetResourceList(ResourceType, NetResource, Entries, NetResourceList) then try
    for i := 0 to Integer(Entries) - 1 do
    begin
      if (DisplayType = RESOURCEDISPLAYTYPE_GENERIC) or
        (NetResourceList[i].dwDisplayType = DisplayType) then begin
        List.AddObject(NetResourceList[i].lpRemoteName,
                      Pointer(NetResourceList[i].dwDisplayType));
      end;
      if (NetResourceList[i].dwUsage and RESOURCEUSAGE_CONTAINER) <> 0 then
        ScanLevel(@NetResourceList[i]);
    end;
  finally
    FreeMem(NetResourceList);
  end;
end;

begin
  ScanLevel(Nil);
end;

procedure TForm1.Button1Click(Sender: TObject);
begin
  ScanNetworkResources(RESOURCETYPE_DISK, RESOURCEDISPLAYTYPE_SERVER, ListBox1.Items);
end; 
```

但它只返回网络中计算机的名称，没有路由器及其 IP 地址。所以这不是一个真正的解决方案。

您能否告诉我枚举本地网络中的所有设备（路由器、计算机、打印机）以及它们的 IP 和 MAC 地址的好方法是什么？

谢谢你。

[![在此处输入图像描述](../Images/4049d6c958eea319110c5db717743a89.png)](https://i.stack.imgur.com/ZSBxw.gif)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-16T18:26:06.147

我修改了你的代码，添加了函数[GetHostName](http://msdn.microsoft.com/en-us/library/windows/desktop/ms738527%28v=vs.85%29.aspx)和[inet_ntoa](http://msdn.microsoft.com/en-us/library/windows/desktop/ms738564%28v=vs.85%29.aspx)来获取 IP 地址和[`SendARP`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366358%28v=vs.85%29.aspx)函数来获取网络资源的 MAC 地址。

```
{$APPTYPE CONSOLE}

{$R *.res}

uses
  StrUtils,
  Windows,
  WinSock,
  SysUtils;

type
  PNetResourceArray = ^TNetResourceArray;
  TNetResourceArray = array[0..1023] of TNetResource;

function SendArp(DestIP,SrcIP:ULONG;pMacAddr:pointer;PhyAddrLen:pointer) : DWord; StdCall; external 'iphlpapi.dll' name 'SendARP';

function GetIPAddress(const HostName: AnsiString): AnsiString;
var
  HostEnt: PHostEnt;
  Host: AnsiString;
  SockAddr: TSockAddrIn;
begin
  Result := '';
  Host := HostName;
  if Host = '' then
  begin
    SetLength(Host, MAX_PATH);
    GetHostName(PAnsiChar(Host), MAX_PATH);
  end;
  HostEnt := GetHostByName(PAnsiChar(Host));
  if HostEnt <> nil then
  begin
    SockAddr.sin_addr.S_addr := Longint(PLongint(HostEnt^.h_addr_list^)^);
    Result := inet_ntoa(SockAddr.sin_addr);
  end;
end;

function GetMacAddr(const IPAddress: AnsiString; var ErrCode : DWORD): AnsiString;
var
 MacAddr    : Array[0..5] of Byte;
 DestIP     : ULONG;
 PhyAddrLen : ULONG;
begin
  Result    :='';
  ZeroMemory(@MacAddr,SizeOf(MacAddr));
  DestIP    :=inet_addr(PAnsiChar(IPAddress));
  PhyAddrLen:=SizeOf(MacAddr);
  ErrCode   :=SendArp(DestIP,0,@MacAddr,@PhyAddrLen);
  if ErrCode = S_OK then
   Result:=AnsiString(Format('%2.2x-%2.2x-%2.2x-%2.2x-%2.2x-%2.2x',[MacAddr[0], MacAddr[1],MacAddr[2], MacAddr[3], MacAddr[4], MacAddr[5]]));
end;

function ParseRemoteName(Const lpRemoteName : string) : string;
begin
  Result:=lpRemoteName;
  if StartsStr('\\', lpRemoteName) and (Length(lpRemoteName)>2) and (LastDelimiter('\', lpRemoteName)>2) then
   Result:=Copy(lpRemoteName, 3, PosEx('\', lpRemoteName,3)-3)
  else
  if StartsStr('\\', lpRemoteName) and (Length(lpRemoteName)>2) and (LastDelimiter('\', lpRemoteName)=2) then
   Result:=Copy(lpRemoteName, 3, length(lpRemoteName));
end;

function CreateNetResourceList(ResourceType: DWord;
                              NetResource: PNetResource;
                              out Entries: DWord;
                              out List: PNetResourceArray): Boolean;
var
  EnumHandle: THandle;
  BufSize: DWord;
  Res: DWord;
begin
  Result := False;
  List := Nil;
  Entries := 0;
  if WNetOpenEnum(RESOURCE_GLOBALNET, ResourceType, 0, NetResource, EnumHandle) = NO_ERROR then
  begin
    try
      BufSize := $4000;  // 16 kByte
      GetMem(List, BufSize);
      try
        repeat
          Entries := DWord(-1);
          FillChar(List^, BufSize, 0);
          Res := WNetEnumResource(EnumHandle, Entries, List, BufSize);
          if Res = ERROR_MORE_DATA then
          begin
            ReAllocMem(List, BufSize);
          end;
        until Res <> ERROR_MORE_DATA;

        Result := Res = NO_ERROR;
        if not Result then
        begin
          FreeMem(List);
          List := Nil;
          Entries := 0;
        end;
      except
        FreeMem(List);
        raise;
      end;
    finally
      WNetCloseEnum(EnumHandle);
    end;
  end;
end;

procedure ScanNetworkResources(ResourceType, DisplayType: DWord);

procedure ScanLevel(NetResource: PNetResource);
var
  Entries: DWord;
  NetResourceList: PNetResourceArray;
  i: Integer;
  IPAddress, MacAddress : AnsiString;
  ErrCode : DWORD;
begin
  if CreateNetResourceList(ResourceType, NetResource, Entries, NetResourceList) then try
    for i := 0 to Integer(Entries) - 1 do
    begin
      if (DisplayType = RESOURCEDISPLAYTYPE_GENERIC) or
        (NetResourceList[i].dwDisplayType = DisplayType) then
        begin
          IPAddress   :=GetIPAddress(ParseRemoteName(AnsiString(NetResourceList[i].lpRemoteName)));
          MacAddress  :=GetMacAddr(IPAddress, ErrCode);
          Writeln(Format('Remote Name %s Ip %s MAC %s',[NetResourceList[i].lpRemoteName, IPAddress, MacAddress]));
        end;
      if (NetResourceList[i].dwUsage and RESOURCEUSAGE_CONTAINER) <> 0 then
        ScanLevel(@NetResourceList[i]);
    end;
  finally
    FreeMem(NetResourceList);
  end;
end;

begin
  ScanLevel(Nil);
end;

var
  WSAData: TWSAData;
begin
  try
   if WSAStartup($0101, WSAData)=0 then
   try
     ScanNetworkResources(RESOURCETYPE_ANY, RESOURCEDISPLAYTYPE_SERVER);
     Writeln('Done');
   finally
     WSACleanup;
   end;
  except
    on E:Exception do
      Writeln(E.Classname, ': ', E.Message);
  end;
  Readln;
end. 
```

# asp.net-mvc-3 - Orchard 1.3 检查属性是否存在

> ID：10178185
> 
> 赞同：0
> 
> 时间：2012-04-16T16:42:00.870
> 
> 标签：asp.net-mvc-3, razor, orchardcms

我只想知道是否可以检查对象中是否存在属性/属性

就像是：

```
if(widgetPart.RenderTitle.GetType().ToString() != null) {...} 
```

或者

```
String.isNullOrEmpty(widgetPart.RenderTitle) 
```

它给了我

> “Orchard.Widgets.Models.WidgetPart”不包含“RenderTitle”的定义，也没有扩展方法“RenderTitle”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T20:08:26.567

只需使用反射或更好，在使用它们之前检查 WidgetPart 以获取可用成员。那甚至不会编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T17:12:32.167

我得到这样的解决方案：

```
var renderTitleObj = ((IContent)Model.ContentItem).As<WidgetPart>();
System.Reflection.PropertyInfo propInfoSrcObj = renderTitleObj.GetType().GetProperty("RenderTitle");
if (propInfoSrcObj != null) { renderTitle = Convert.ToBoolean(propInfoSrcObj.GetValue(renderTitleObj, null)); } 
```

谢谢。

# c++ - 通过使用来自同一类 C++ 的函数内的指针向量访问数据

> ID：10178186
> 
> 赞同：2
> 
> 时间：2012-04-16T16:42:15.230
> 
> 标签：c++, function, pointers, vector

这是我的问题：我正在使用两个不同的类 A 和 B。A 类包含一个指向 B 类型对象的指针向量，我想在函数 myfunc 中使用这个向量，它是 A 的成员。这里是一个例子

```
class B {

public:

int x, y;

float z;

// other class members...

};

class A {

public:

// other class members...

vector <B*> myvect;

float myfunc() {

for(size_t i = 0; i < myvect.size(); ++i) cout << myvect[i] -> x << endl;

// rest of the code...

return (some float)

}

}; 
```

该程序无法编译。它返回一个错误，指出 B 是未定义的类型。只有当我注释掉 cout 语句时它才会编译。我搜索了互联网并尝试了几件事，比如将 i 声明为迭代器并取消引用迭代器，但没有任何效果。任何想法这段代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T16:49:16.010

您可以`#include "B.h"`在内部`A.h`，或者更正确的方式，`class B`在定义之前有一个前向声明`A`并将实现移到标题之外：

```
//B.h
class B
{
//...
};

//A.h
class B; //forward declaration
class A
{
    //...
    vector <B*> myvect;  // <- correct syntax
    float myfunc();      // only declaration
    //...
};

//A.cpp
#include "A.h"
#include "B.h"

//...
float A::myfunc() { //implementation
   for(size_t i = 0; i < myvect.size(); ++i) cout << myvect[i] -> x << endl;
   // rest of the code...
   return (some float)
}
//.. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-20T14:55:10.543

编译错误源于您在`cout`语句中**取消引用**指向 B 的指针这一事实。为此，编译器此时必须具有可用的类 B 的定义。

换句话说，像这样的代码

```
pointerToB->x 
```

仅当您`#include "B.h"`在该点之前具有该值时才有效。

因此，您可以在 中执行此操作`A.h`，或者，为了避免这种额外的耦合（以及避免大的头文件），您可能希望将这些带有指针解引用的片段移动到 中`A.cpp`并前向声明类 B `A.h`，[正如 Luchian 建议的那样](https://stackoverflow.com/a/10178273/5722863)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-16T16:53:48.650

我会先尝试添加括号：

```
cout << myvect[i] -> x << endl; 
```

对此：

```
cout << ((myvect[i]) -> x) << endl; 
```

我认为它只是这样简单的事情，并且 cout 试图在箭头运算符之前首先“获取” B* 对象。如果不是这样，请发布编译器错误消息。

# java - android:gravity="right" 不适用于阿拉伯语和其他 RTL 语言的所有设备

> ID：10178187
> 
> 赞同：9
> 
> 时间：2012-04-16T16:42:17.050
> 
> 标签：java, android, android-layout, arabic, right-to-left

我有一个阿拉伯语 Android 应用程序，这里是 XML 代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/greygradientbackground">
<ImageView android:id="@+id/logo"
    android:layout_width="150dp"
    android:layout_height="fill_parent"
    android:scaleType="centerCrop"
    android:layout_margin="5dp"
    android:layout_alignParentTop="true"
    android:layout_alignParentRight="true" />
<TextView android:id="@+id/title"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textSize="16sp"
    android:textColor="#000000"
    android:layout_gravity="center_vertical|right"
    android:gravity="right"
    android:layout_toLeftOf="@id/logo"/>
</RelativeLayout> 
```

问题是 android:gravity 在某些 Android 模型上有效，而在其他模型上无效。

更具体地说，我已经在许多 2.3.3 android 设备上测试了该应用程序，并且阿拉伯文本正确对齐。但是在其他 2.3.3 设备上，阿拉伯文本左对齐（这是错误的）。

当我将 android:gravity="right" 更改为 android:gravity="left" 时，问题从第二组设备转移到了第一组。

所以我的问题是如何解决这个问题，尤其是据我所知，没有办法根据设备型号对布局进行本地化。

提前感谢您的任何指导，因为我完全迷路了。:(

**更新：**

我搜索了“如何在所有 Android 版本上正确对齐阿拉伯语？” 但在我的所有测试设备上都没有发现任何工作。请问有什么建议吗？我确信有一种最佳实践方法可以在 Android 上对齐阿拉伯语文本。

**更新 2：**

我尝试使用 WebView 而不是 TextView 来使用 CSS 样式正确对齐阿拉伯语。但是，阿拉伯文本在 WebView 中显示为奇怪的字符。

这是代码：

```
mWebView.loadData("<html  dir=\"rtl\">الأسم<body></body></html>", "text/html", "UTF-8"); 
```

奇怪的是，阿拉伯语网站的文本显示正确。所以有什么问题？:(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-30T18:41:39.157

这是预期的行为。您可能不会使用`gravity="right"`，而是使用`gravity="end"`您应用的相同想法`gravity="left"`，您可能会使用`gravity="start"`，以及`layout_marginStart`代替`layout_marginLeft`

这样，Android 将根据位置将文本置于“开始”方向。（对于我们美国人来说，我们从**左边****开始**写，我们**从**右边**结束**，但阿拉伯人从**右边****开始**，从**左边****结束**）。

 ******您可以使用 方法获取布局/文本方向`getLayoutDirectionFromLocale(null)`，这将返回`View.LAYOUT_DIRECTION_LTR`(left-to-right) 或`View.LAYOUT_DIRECTION_RTL`(right-to-left, like arabic)。

您可以[在此处查看更多信息](http://android-developers.blogspot.fr/2013/03/native-rtl-support-in-android-42.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T07:28:45.900

将布局中的 textveiw 更改为此....

```
<TextView android:id="@+id/title" 
```

将您的 layout_width 更改为“fill_parent”

```
 android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     android:textSize="16sp"
     android:textColor="#000000"
     android:layout_gravity="center_vertical|right"
     android:gravity="right"
     android:layout_toLeftOf="@id/logo"
/> 
```

你也可以用另一种方式改变它......你可以在活动类中进行改变......如下......让你的带有id标题的TextView在活动类中映射一个名为“tv”的TextView对象你可以通过写这个来使它正确对齐。

```
 tv.setGravity(Gravity.RIGHT); 
```

但在这两种情况下，宽度布局宽度都应该是“fill_parent”。如果你不这样做并保持它“wrap_content”，那么文本就没有空间移动了......所有的对齐方式（中心，左，右...）保持不变.....

如果这两个都不起作用......那么我希望你使用表格布局并将文本视图保留在其中......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T07:02:39.337

尝试将你的 textview 放在一个单独的 LinearLayout 中，并设置这样的布局属性： android:layout_gravity="center_vertical" 和 android:orientation="vertical" android:gravity="right"

注意：不要指定 textview 的 layout_gravity。

希望这可以帮助！它对我来说很好。

您也可以尝试此处提供的解决方案：[Android 阿拉伯语文本对齐](https://stackoverflow.com/questions/9837230/android-arabic-text-aligment)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-22T09:28:32.247

实现这种行为的另一种解决方案：

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal">

    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layoutDirection="ltr"        
        android:layout_weight="1"
        android:gravity="end"
        android:padding="16dp"
        android:text="@string/locale_switch_btn" />
</LinearLayout> 
```

请注意，为了正确的**重力=“结束”**对齐，在 rtl 语言环境中您应该设置属性：

**安卓：layoutDirection="ltr"********

# android - VM 不会让我们分配 ... 字节

> ID：10178195
> 
> 赞同：1
> 
> 时间：2012-04-16T16:42:35.050
> 
> 标签：android, memory, file-transfer

因此，我正在构建一个具有文件传输应用程序的应用程序，该应用程序允许您将文件从主文件夹内的一个文件夹传输到另一个文件夹。但是，我收到此错误“VM 不会让我们分配 ... 字节”。

Logcat 错误：

```
04-16 16:32:06.072: E/dalvikvm-heap(17644): 184440-byte external allocation too large for this process.
04-16 16:32:06.132: E/GraphicsJNI(17644): VM won't let us allocate 184440 bytes 
```

有没有人有办法克服这个问题？我看到了几篇关于图像而不是文件的帖子。

添加代码：（根据要求）。请注意，此代码也被复制到其他地方，但我自己做了一些修改。

```
private static void copyFile(File sourceFile, File destFile)
            throws IOException {
    if (!sourceFile.exists()) {
            return;
    }
    if (!destFile.exists()) {
            destFile.createNewFile();
    }
    destFile = new File(destFile.toString().substring(0, destFile.toString().lastIndexOf('/')));
    FileChannel source = null;
    FileChannel destination = null;
    source = new FileInputStream(sourceFile).getChannel();
    destination = new FileOutputStream(destFile).getChannel();
    if (destination != null && source != null) {
            destination.transferFrom(source, 0, source.size());
    }
    if (source != null) {
            source.close();
    }
    if (destination != null) {
            destination.close();
        }
    } 
```

正如人们所提到的，内存错误是一个图像，是的，感谢您找到我令人尴尬的错误。完成这个 fileNotFoundException 后，我会尽快纠正它。

抱歉，长时间等待更新 logcat 忘记在复制文件方法中添加 try 和 catch，然后另一个方法从另一个方法捕获另一个错误，该方法显示顶部的内容：

```
04-16 18:19:41.322: W/System.err(4989): java.io.FileNotFoundException: /mnt/sdcard/ActivityApp (Is a directory)
04-16 18:19:41.322: W/System.err(4989):     at org.apache.harmony.luni.platform.OSFileSystem.open(Native Method)
04-16 18:19:41.322: W/System.err(4989):     at dalvik.system.BlockGuard$WrappedFileSystem.open(BlockGuard.java:232)
04-16 18:19:41.322: W/System.err(4989):     at java.io.FileOutputStream.<init>(FileOutputStream.java:94)
04-16 18:19:41.322: W/System.err(4989):     at java.io.FileOutputStream.<init>(FileOutputStream.java:66)
04-16 18:19:41.322: W/System.err(4989):     at tab.layout.FileFusionActivity.copyFile(FileFusionActivity.java:107)
04-16 18:19:41.322: W/System.err(4989):     at tab.layout.FileFusionActivity.onListItemClick(FileFusionActivity.java:78)
04-16 18:19:41.322: W/System.err(4989):     at android.app.ListActivity$2.onItemClick(ListActivity.java:319)
04-16 18:19:41.322: W/System.err(4989):     at android.widget.AdapterView.performItemClick(AdapterView.java:284)
04-16 18:19:41.322: W/System.err(4989):     at android.widget.ListView.performItemClick(ListView.java:3513)
04-16 18:19:41.322: W/System.err(4989):     at android.widget.AbsListView$PerformClick.run(AbsListView.java:1812)
04-16 18:19:41.322: W/System.err(4989):     at android.os.Handler.handleCallback(Handler.java:587)
04-16 18:19:41.322: W/System.err(4989):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-16 18:19:41.322: W/System.err(4989):     at android.os.Looper.loop(Looper.java:123)
04-16 18:19:41.322: W/System.err(4989):     at android.app.ActivityThread.main(ActivityThread.java:3683)
04-16 18:19:41.322: W/System.err(4989):     at java.lang.reflect.Method.invokeNative(Native Method)
04-16 18:19:41.322: W/System.err(4989):     at java.lang.reflect.Method.invoke(Method.java:507)
04-16 18:19:41.322: W/System.err(4989):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-16 18:19:41.332: W/System.err(4989):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-16 18:19:41.332: W/System.err(4989):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T18:16:06.473

编辑：我以前应该注意到它，但你的日志猫证明了这一点。错误在这一行

```
destFile = new File(destFile.toString().substring(0, destFile.toString().lastIndexOf('/'))); 
```

把它改成这样

```
 destFile = new File(destFile.toString().substring(0, destFile.toString().lastIndexOf('/')),"hello.dat"); 
```

您看到的错误可能与复制过程没有直接关系。您是否对您的应用程序进行了[分析](http://developer.android.com/guide/developing/debugging/ddms.html#profiling)以检查内存使用情况？您可以尝试的另一件事是按照此[问题中的概述分块复制文件](https://stackoverflow.com/questions/9935214/android-nio-java-io-ioexception-value-too-large-for-defined-data-type)

# doctrine-orm - 原则 2 - 完整性约束违反错误

> ID：10178198
> 
> 赞同：2
> 
> 时间：2012-04-16T16:42:50.110
> 
> 标签：doctrine-orm, zend-framework2

我有两个实体，产品和附属公司。我想插入一个新产品，但出现错误：

违反完整性约束：1048 列“affiliateId”不能为空

这是php代码：

```
 $affiliate = $this->_em->getRepository("Common\Entity\Affiliate")->find(1);

            $product = new Product();
            $product->setAffiliate($affiliate);
            $product->statusId = $form->getValue('statusId');
            [...]
            $product->created = new \DateTime("now");

            $this->_em->persist($product);
            $this->_em->flush(); 
```

产品实体：

```
<?php

namespace Common\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * A product.
 *
 * @ORM\Entity
 * @ORM\Table(name="product")
 */
class Product {

    /**
     * @ORM\Id
     * @ORM\Column(type="integer");
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /**
     * @ORM\Column(type="integer")
     */
    protected $statusId;

    /**
     * @ORM\Column(type="datetime")
     */
    protected $created;

    /**
     * @ORM\ManyToOne(targetEntity="Affiliate", inversedBy="product")
     * @ORM\JoinColumn(name="affiliateId", referencedColumnName="id")
     */
    protected $affiliate;

    public function setAffiliate($affiliate) { 
        $this->affiliate = $affiliate; 
    }

    /**
     * Magic getter to expose protected properties.
     *
     * @param string $property
     * @return mixed
     */
    public function __get($property) {
        return $this->$property;
    }

    /**
     * Magic setter to save protected properties.
     *
     * @param string $property
     * @param mixed $value
     */
    public function __set($property, $value) {
        $this->$property = $value;
    }
} 
```

附属实体：

```
<?php

namespace Common\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * A product.
 *
 * @ORM\Entity
 * @ORM\Table(name="affiliate")
 */
class Affiliate {

    /**
     * @ORM\Id
     * @ORM\Column(type="integer");
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /**
     * @ORM\Column(type="string")
     */
    protected $name;

    /**
     * @ORM\Column(type="datetime")
     */
    protected $lastModified;

    /**
     * @ORM\Column(type="datetime")
     */
    protected $created;

    /**
     * @ORM\OneToMany(targetEntity="Product", mappedBy="affiliate")
     */
    protected $product;

    public function getId() { 
        return $this->id; 
    }

    public function getName() { 
        return $this->name; 
    }

    /**
     * Magic getter to expose protected properties.
     *
     * @param string $property
     * @return mixed
     */
    public function __get($property) {
        return $this->$property;
    }

    /**
     * Magic setter to save protected properties.
     *
     * @param string $property
     * @param mixed $value
     */
    public function __set($property, $value) {
        $this->$property = $value;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T09:22:41.993

我不确定你是如何设置你的配置文件的，但是我已经设法让它与 zend 1.10 框架一起工作，它在下面（只需更改命名空间和类引用以匹配你的，代码执行也在底部页）

```
<?php
namespace GR\Entity;
/**
 *
 * @Table(name="affiliate")
 * @Entity
 */
class Affiliate {

    /**
     * @var integer $id
     * @Column(name="id", type="integer", nullable=false);
     * @Id
     * @GeneratedValue(strategy="IDENTITY")
     */
    protected $id;

    /**
     * @Column(type="string")
     * @var string
     */
    protected $name;

    /**
     * @Column(type="datetime", nullable=false)
     */
    protected $modified_on;

    /**
     * @Column(type="datetime", nullable=false)
     */
    protected $created_on;

    /**
     * @OneToMany(targetEntity="GR\Entity\Product", mappedBy="affiliate", cascade={"persist", "remove"})
     * @param \Doctrine\Common\Collections\Collection $property
     */

    protected $products;
    /**
     * Magic getter to expose protected properties.
     *
     * @param string $property
     * @return mixed
     */
    public function __get($property)
    {
        return $this->$property;
    }

    /**
     * Magic setter to save protected properties.
     *
     * @param string $property
     * @param mixed $value
     */
    public function __set($property, $value)
    {
        $this->$property = $value;
    }

    public function __construct()
    {
        $this->created_on = new \DateTime("now");
    }
}

<?php
namespace GR\Entity;
/**
 * 
 * @Table(name="product")
 * @Entity
 */
class Product {

    /**
     *
     * @var integer $id
     * @Column(name="id", type="integer",nullable=false)
     * @Id
     * @GeneratedValue(strategy="IDENTITY")
     */
    protected $id;

    /**
     * @Column(type="integer")
     */
    protected $status_id;

    /**
     * @Column(type="datetime",nullable=false)
     */
    protected $created_on;

    /**
     * @var GR_Entity_Affiliate
     * @ManyToOne(targetEntity="GR\Entity\Affiliate")
     * @JoinColumns({
     *  @JoinColumn(name="affiliate_id", referencedColumnName="id")
     * })
     **/
    protected $affiliate;

    /**
     * Magic getter to expose protected properties.
     *
     * @param string $property
     * @return mixed
     */
    public function __get($property)
    {
        return $this->$property;
    }

    /**
     * Magic setter to save protected properties.
     *
     * @param string $property
     * @param mixed $value
     */
    public function __set($property, $value)
    {
        $this->$property = $value;
    }

    public function __construct()
    {
        $this->created_on = new \DateTime("now");
    }
} 
```

这是如何执行代码的示例

```
$p1 = new GR\Entity\Product();
    $p1->status_id = 2;

    $p2 = new GR\Entity\Product();
    $p2->status_id = 3;

    $a = new GR\Entity\Affiliate();
    $a->name = 'test1';
    $a->modified_on = new DateTime('now');
    $a->created_on = new DateTime('now');
    $a->product = array ($p1, $p2);

    $doctrineContainer = Zend_Registry::get('doctrine');
    $em = $doctrineContainer->getEntityManager(); 
    $em->persist($a);
    $em->flush();

    $affiliate = $em->createQuery('select a from GR\Entity\Affiliate a')->execute();
    var_dump($affiliate[0]->products[0]->id); 
```

# r - 从函数发送列名到 ddply

> ID：10178203
> 
> 赞同：19
> 
> 时间：2012-04-16T16:43:03.910
> 
> 标签：r, plyr

我希望能够将列名发送给我正在拨打的电话`ddply`。一个示例`ddply`调用：

```
ddply(myData, .(MyGrouping), summarise, count=sum(myColumnName)) 
```

如果我已经`ddply`包装在另一个函数中，是否可以包装它以便我可以将任意值传递`myColumnName`给调用函数？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-16T17:20:46.517

必须有更好的方法。而且我不知道如何使它与摘要一起使用。

```
my.fun <- function(df, count.column) { 
  ddply(df, .(x), function(d) sum(d[[count.column]]))
}

dat <- data.frame(x=letters[1:2], y=1:10)

> my.fun(dat, 'y')
  x V1
1 a 25
2 b 30
> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-04-15T17:30:41.110

正如@David Arenburg 所说，这个问题已经很老了。今天，无论是`data.table`或`dplyr`包都可以以更快的速度为您提供相同的结果。

这是`data.table`答案的版本。

```
library(data.table)
my.fun <- function(myData, MyGrouping, myColumnName) { 
  setDT(myData)[, lapply(.SD, sum), by=MyGrouping, .SDcols=myColumnName]
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-08T00:38:56.097

我想我找到了一种*适用*于摘要的方法。我不确定我是否理解为什么，因为我不是处理 R 环境的专家，但这是解决方案：

```
> library(plyr)
> 
> 
> 
> ###########################
> # Creating test DataFrame #
> ###########################
> 
> x <- 1:15
> 
> set.seed(1)
> y <- letters[1:3][sample(1:3, 15, replace = T)]
> 
> df <- data.frame(x, y)
> 
> ### check df
> df
    x y
1   1 a
2   2 b
3   3 b
4   4 c
5   5 a
6   6 c
7   7 c
8   8 b
9   9 b
10 10 a
11 11 a
12 12 a
13 13 c
14 14 b
15 15 c
> 
> 
> #####################
> # auxiliar function #
> #####################
> evalString <- function(s) {
+ eval(parse(text = s), parent.frame())
+ }
> 
> 
> ### columnName input
> columnName <- 'x'
> 
> ### call with columnName as input
> xMeans <- ddply(df,
+                 'y',
+                 summarise,
+                 mean = mean(evalString(columnName)))
> 
> 
> ### regular call to ddply
> xMeans2 <- ddply(df,
+                 'y',
+                 summarise,
+                 mean = mean(x))
> 
> 
> ### Compare Results
> xMeans
  y mean
1 a  7.8
2 b  7.2
3 c  9.0
> xMeans2
  y mean
1 a  7.8
2 b  7.2
3 c  9.0
> 
```

编辑：您可以使用`get`基本包中的函数，如下所示：[ddply：如何将列名作为参数传递？](https://stackoverflow.com/questions/22266468/ddply-how-do-i-pass-column-names-as-parameters)

```
> xMeans3 <- ddply(df,
+                 'y',
+                 summarise,
+                 mean = mean(get(columnName)))
> 
> xMeans3
  y mean
1 a  7.8
2 b  7.2
3 c  9.0 
```

# c# - 只有第一次出现

> ID：10178211
> 
> 赞同：1
> 
> 时间：2012-04-16T16:43:41.693
> 
> 标签：c#, .net, string, split

我有这个字符串`MIL_A_OP=LI_AND=SSB12=JL45==DO=90==IT=KR002112` ，我需要根据第一个 "="**将其拆分为 2**

所以我需要它来获得：

第一个字符串：`MIL_A_OP`

第二个字符串：`LI_AND=SSB12=JL45==DO=90==IT`

下面的代码是我所拥有的，但它给了我 MIL_A_OP 和 LI_AND，我想念其余的

```
try
{
    StreamReader file1 = new StreamReader(args[0]);
    string line1;
    while ((line1 = file1.ReadLine()) != null)
    {
        if (line1 != null && line1.Trim().Length > 0)//if line is not empty
        {
            int position_1 = line1.IndexOf('=');
            string s_position_1 = line1.Substring(position_1, 1);
            char[] c_position_1 = s_position_1.ToCharArray(0,1);
            string[] line_split1 = line1.Split(c_position_1[0]);
            Foo.f1.Add(line_split1[0], line_split1[1]);
        }
    }
    file1.Close();
}
catch (Exception e)
{
    Console.WriteLine("File " + args[0] + " could not be read");
    Console.WriteLine(e.Message);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T16:46:05.230

您希望允许您指定要返回的最大元素数的 Split() 方法的重载。试试这个：

```
string[] line_split1 = line1.Split( new char[]{'='}, 2 ); 
```

[文档在这里](http://msdn.microsoft.com/en-us/library/c1bs0eda.aspx)。

*更新了 Matthew 的反馈。*

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-16T16:46:05.773

尝试以下

```
string all = "MIL_A_OP=LI_AND=SSB12=JL45==DO=90==IT=KR002112";
int index = all.IndexOf('=');
if (index < 0) {
  throw new Exception("Bad data");
}
var first = all.Substring(0, index);
var second = all.Substring(index + 1, all.Length - (index + 1)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-16T16:54:21.970

如果您的行始终包含 = 字符，则以下内容应该有效

```
string[] line_split1 = line.Split( new char[] {'='} , 2);

if (line_split1.Length != 2)
    throw new Exception ("Invalid format"); 
```

# ios - cameraOverlayView 防止使用allowEditing进行编辑

> ID：10178214
> 
> 赞同：8
> 
> 时间：2012-04-16T16:43:57.180
> 
> 标签：ios, camera, uiimagepickercontroller, editing, camera-overlay

在拍摄后编辑照片（移动和缩放它）在我的应用程序中使用这条线可以正常工作：

```
[imagePicker setAllowsEditing:YES]; 
```

但是如果我也使用cameraOverlayView，编辑模式就不再起作用了。屏幕出现了，但平移和捏合手势不会发生任何事情。

我正在使用您的普通图像选择器控制器：

```
UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init]; 
```

我添加了一个从自定义视图控制器的视图创建的相机覆盖视图：

```
CameraOverlayViewController *overlayController = [[CameraOverlayViewController alloc] init];
UIView *overlayView = overlayController.view;
[imagePicker setCameraOverlayView:overlayView]; 
```

在 IB 中，该视图设置为启用用户交互和多点触控，这允许它在拍照时进行缩放和聚焦。但是，一旦拍摄照片并进入编辑模式，您就无法平移或捏合来移动或缩放照片。

我错过了什么？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-04-24T14:34:36.610

您的叠加层是否占据了相机视图的整个空间？如果是这样，即使您有透明背景，触摸也会转到覆盖层而不是下面的视图。

将此方法添加到您的叠加视图中，它将忽略触摸，以便将它们传递给下面的视图。（您正在覆盖检测触摸的 UIView 方法。）

```
- (BOOL)pointInside:(CGPoint)point withEvent:(UIEvent *)event
{
    return NO;
} 
```

* * *

注意：除了那个奇妙的提示，您可能还想使用这条信息来删除您的覆盖视图，在那个阶段：[UIImagePicker cameraOverlayView 出现在 Retake 屏幕上](https://stackoverflow.com/questions/17942444/uiimagepicker-cameraoverlayview-appears-on-retake-screen)

# cocos2d-iphone - 如何在 cocos2d 中获得屏幕中心？

> ID：10178217
> 
> 赞同：6
> 
> 时间：2012-04-16T16:44:08.543
> 
> 标签：cocos2d-iphone

如何在 Cocos2d-iPhone 中获取位于屏幕中心的点的世界空间坐标？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-16T18:48:22.197

很简单，只需将高度和宽度除以 2

```
CGSize winSize = [[CCDirector sharedDirector] winSize];
CGPoint point = ccp(winSize.width/2, winSize.height/2); 
```

这是一种更高级的方法。如果您在 sprite 的父级上调用了 setPosition（在本例中为 =self），这也将起作用

```
CGSize winSize = [[CCDirector sharedDirector] winSize];
CCSprite* centerSprite = [CCSprite spriteWithFile:@"sprite"];
CGPoint centerPoint = ccpSub(ccp(winSize.width/2, winSize.height/2), [self position]);
[centerSprite setPosition:centerPoint];
[self addChild: centerSprite]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T01:29:16.453

无论您使用什么框架，无论是否使用 Cocos，您都可以获得屏幕的确切中心，即使 Cocos 未设置为使用整个屏幕（有时如果您裁剪 Cocos 为广告腾出空间，就会出现这种情况）通过做这样的事情：

```
int width=[[UIScreen mainScreen] bounds].size.width
int height=[[UIScreen mainScreen] bounds].size.height
CGPoint center=ccp(width/2,height/2); 
```

注意`ccp`宏只在 Cocos 中有效；否则，使用`CGPointMake`

# sql-server - 将用户定义的 CLR 函数的执行限制为 sysadmin 而不是 dbowner

> ID：10178219
> 
> 赞同：2
> 
> 时间：2012-04-16T16:44:26.727
> 
> 标签：sql-server, sql-server-2005, sqlclr

我可能遗漏了一些明显的东西或以错误的方式处理这个问题，但它是这样的：

我在 SQL Server 2005 中编写了一个标量 CLR 函数。它有一个参数 ( `int`) 并返回一个`varchar(2000)`. 我无法弄清楚如何专门向 sysadmin 角色授予权限并限制任何其他角色（包括 db_owner）执行它。

我猜 CLR 函数的授予和撤销权限与任何其他 UDF 相同。这是一个敏感函数，因为它会解密存储在应用程序的 SecurityUser 表中的密码。我不希望任何人能够运行它，除了 sysadmin 角色的成员。

在数据库中，我首先尝试从数据库授予 sysadmin：

```
grant execute ON dbo.fCrossTabDx1 TO sysadmin 
```

当然收到错误：

> 消息 15151，级别 16，状态 1，行 1
> 找不到用户 'sysadmin'，因为它不存在或您没有权限。

然后我尝试授予权限`db_securityadmin`，这是数据库中的一个角色，但出现错误：

> 消息 4617，级别 16，状态 1，第 1 行
> 无法授予、拒绝或撤销特殊角色的权限。

因此，如果可能的话，将不胜感激有人引导我朝着正确的方向前进。

1.  我可以限制具有 db_owner 权限的用户执行函数吗？
2.  我可以只允许一个函数的 sysadmin 角色执行权限吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T17:03:51.693

您不能限制安全所有者的权限。根据定义，`db_owner`拥有数据库中每个安全对象的成员。函数是安全的数据库。因此，您不能将函数的权限限制为 dbo 或 db_owner 角色的成员。

你这样做是不对的：

*   滚动您自己的加密/解密功能。使用[内置的加密功能](http://msdn.microsoft.com/en-us/library/bb510663.aspx)。
*   依赖于加密安全的权限。您应该依靠**解密密码的知识**，即。*知道密码的人*可以解密数据。
*   我很确定您的 CLR 函数具有内置的解密密码，即。您将解密密钥嵌入代码中，这是一个很大的禁忌。

请阅读并内化[Encryption Hierarchy](http://msdn.microsoft.com/en-us/library/ms189586.aspx)。请遵循标准做法。不要发明**你**自己的。

# css - 应用于 div 的 css 类的范围？

> ID：10178221
> 
> 赞同：1
> 
> 时间：2012-04-16T16:44:41.157
> 
> 标签：css, html, styling

我想对我网站上的某个页面部分应用一些特殊样式。

我认为通过定义这样的东西：

```
h2.privacy_policy {
    color: #456123;
    padding: 10px 20px 30px 40px;
    margin: 40px 30px 20px 10px;
} 
```

并通过将类应用于包装`div`：

```
<div class='privacy_policy'>
    <h2>Some text etc</h2>
    <p>More text ...</p>
    ...
</div> 
```

样式将适用于`h2`上面的附件，但 Firebug 告诉我不，样式尚未应用。

将类应用于 a 的范围是`div`什么？它适用于封闭的元素吗？我有错误的期望吗？我做错了吗（如果是，解决方案是什么）？我这样做是否正确，并且必须发生其他事情（如果是，我应该在哪里看？）？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T16:46:29.827

错误的选择器顺序......你想要

```
div.privacy_policy h2 
```

你有什么

```
h2.privacy_policy 
```

仅匹配具有明确给出`h2`的类的元素`privacy_policy`

ps 对html标签属性使用双引号，即`<div class="privacy_policy">`而不是`<div class='privacy_policy'>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T16:46:31.930

与您的 HTML 匹配的 CSS：

```
h2.privacy_policy {} 
```

**或**与您的 CSS 匹配的 HTML：

```
<h2 class="privacy_policy">Text</h2> 
```

基本上，想象每个空间都是一个新的层次结构。因此，`h2 .privacy_policy`匹配 a`descendant`的`h2`类具有`privacy_policy`，而`h2.privacy_policy`匹配`h2`类的`privacy_policy`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T16:49:20.370

`h2.privacy_policy`意思是“只有`h2`一个类的元素`privacy_policy`”

# mysql - 如何在计算列上使用 WHERE？

> ID：10178224
> 
> 赞同：9
> 
> 时间：2012-04-16T16:44:57.367
> 
> 标签：mysql

我正在尝试为两个表的完整性编写一些查询。查询是这样的

```
SELECT if( o.is_discounted !=1, o.item_cost, o.discounted_item_cost ) AS order_item_total,
SUM( oi.quantity * oi.price ) AS item_total
FROM orders o
INNER JOIN order_items oi ON oi.order_id = o.id
WHERE order_item_total != item_total
GROUP BY o.id 
```

我过去肯定使用过此类列的别名，所以我不确定为什么在这种情况下它告诉我`order_item_total`不是列。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-16T16:50:19.503

在聚合列上使用具有。

```
SELECT if(o.is_discounted != 1, o.item_cost, o.discounted_item_cost) order_item_total,
  SUM(oi.quantity * oi.price) item_total
FROM orders o
INNER JOIN order_items oi ON oi.order_id = o.id
GROUP BY o.id
HAVING order_item_total != item_total 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-16T16:47:14.013

尝试将整个事情包装在另一个`SELECT`查询中。

```
SELECT *
FROM 
(
    SELECT if( o.is_discounted !=1, o.item_cost, o.discounted_item_cost ) AS order_item_total,
    SUM( oi.quantity * oi.price ) AS item_total
    FROM orders o
    INNER JOIN order_items oi ON oi.order_id = o.id
    GROUP BY o.id
) x
WHERE X.order_item_total != X.item_total 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-16T16:47:51.983

`WHERE``SELECT`在处理数据时出现在前面。所以你需要`WHERE if( o.is_discounted !=1, o.item_cost, o.discounted_item_cost ) != SUM( oi.quantity * oi.price )`

处理此问题的另一种方法是使用子查询

```
SELECT 
  ..
 FROM 
   ( //your query here
   ) t
//now you can use your aliases
WHERE t.order_item_total != t.item_total 
```

这里有：

```
SELECT if( o.is_discounted !=1, o.item_cost, o.discounted_item_cost ) AS order_item_total,
SUM( oi.quantity * oi.price ) AS item_total
FROM orders o
INNER JOIN order_items oi ON oi.order_id = o.id
WHERE 1
GROUP BY o.id
HAVING order_item_total != item_total 
```

# php - PHP 从不同的 mp3 创建 mp3

> ID：10178229
> 
> 赞同：2
> 
> 时间：2012-04-16T16:45:15.643
> 
> 标签：php, mp3

> **可能重复：**
> [使用 PHP 在服务器上合并/连接 MP3](https://stackoverflow.com/questions/2164562/combine-concatenate-mp3s-on-server-using-php)

我想通过将大约 1000 个小 mp3 组合在一起来创建一个 30 分钟的 mp3。

这种事情是否可以使用 PHP 或资源使用在 CPU/带宽方面过于昂贵？

例如，我想要“小罗击败球员 X 并且正在奔跑！踢得很好！等等。”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T17:32:03.480

有一个名为[getID3](http://getid3.sourceforge.net/)的库。它具有将多个 MP3 文件合并为一个的能力，尽管我从未使用过此功能。[在http://getid3.sourceforge.net/source/demo.joinmp3.phps](http://getid3.sourceforge.net/source/demo.joinmp3.phps)的 getID3 的 Source Forge 站点上有一个演示。似乎它可以在不使用任何命令行系统调用的情况下解决。

我已经使用这个库从各种媒体格式中获取长度和其他数据。它就像一个魅力。但是，如前所述，我还没有测试过其中的`CombineMultipleMP3sTo()`功能......

您应该对其进行测试，就好像它对您有用一样，这将是比 LAME 更容易的选择（在我看来，LAME 功能强大但使用起来相当复杂）。

# css - 选择框中的填充

> ID：10178233
> 
> 赞同：13
> 
> 时间：2012-04-16T16:45:46.523
> 
> 标签：css, padding, html-select

我知道选择框使用 css 进行样式设置有点痛苦，但是如果不采用高级技术，无论如何我可以添加一些填充来稍微下推文本，而无需在右侧的箭头上添加填充？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-01-10T09:45:20.180

将此添加到您的 CSS 类中。也许这有帮助？

```
-webkit-appearance:none;
-moz-appearance:none;
appearance:none; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-10T10:36:30.730

由于`select`框在不同的浏览器，尤其是操作系统上的显示方式不同，因此您无法保证一致性。

例如，我可以在 mac 上进行的最少格式化是这样的：

```
select { height:40px; background:transparent; } 
```

它看起来像这样：

![选择框](../Images/c8481fcac4c9e00f8ad8048062f01e82.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-04-09T02:30:04.723

@Demilio 的回答非常适合隐藏默认选择框。使用自定义样式，您可以根据需要更改选择框的外观。

正如@romainnm 所提到的，唯一剩下的问题是箭头/插入符号也消失了。

不幸的是，伪元素（例如：after）不适用于 select 元素，因此唯一的解决方法是在 select 之后创建一个实际元素，例如`<div class="Caret"></div>`.

添加一些样式：

```
.Caret {
  display: block;
  position: absolute;
  cursor: pointer;
  right: 1rem;
  top: 50%;
  margin-top: -1px;
  width: 0;
  height: 0;
  border-top: 5px solid #000;
  border-right: 5px solid transparent;
  border-left: 5px solid transparent;
} 
```

这应该会产生一个带有箭头的自定义样式选择框：

[![在此处输入图像描述](../Images/47f63adfadbdc17d4bedb4f242d173ae.png)](https://i.stack.imgur.com/olnEL.png)

不幸的是，唯一的缺点是单击箭头不会打开选择框，而且这似乎也无法用 JavaScript 解决。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-10T21:19:59.590

有趣的测试在这里 [http://cssdeck.com/labs/styling-select-box-with-css3](http://cssdeck.com/labs/styling-select-box-with-css3)

作者覆盖了右侧的箭头并创建了自己的箭头，使用供应商前缀 css 来针对不同的浏览器。这样做之后，你的填充都是免费的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-01T14:53:02.057

```
select {
    background: url(http://cdn1.iconfinder.com/data/icons/cc_mono_icon_set/blacks/16x16/br_down.png) no-repeat right #ddd;
    -webkit-appearance: none;
    background-position-x: 97%;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-05-28T11:12:54.317

您可以使用边框为您的选择元素添加填充，并使用轮廓添加边框本身

```
.select {
    border: 12px solid #FFF;
    outline: 1px solid #000;
}
```

假设你有一个白色背景，这将作为 12px 填充，但它也会为箭头添加填充

# jsp - 在评估之前将 JSP 代码注入 BodyTag？

> ID：10178237
> 
> 赞同：2
> 
> 时间：2012-04-16T16:45:56.003
> 
> 标签：jsp, jsp-tags

我想知道如何在评估之前将一些 JSP 片段插入到 BodyContent 中？我尝试了不同的方法，但都没有奏效。我一定做错了什么。

例如，我希望有人将我的标签用作：

```
<mytag:html>
   <mytag:head>
      <link href="test.css"></link>
   </mytag:head> 
```

然后它可以在头部之后插入一个jsp片段（从配置文件中读取）：

```
<link href="<%=request.getAttribute("theme")%>/test.css"/> 
```

它最终会输出：

```
<html>
  <head>
    <link href="target-theme/test.css"></link>
    <link href="test.css"></link>
  </head> 
```

这是我想做的事情：

1.  我想通过使用来简化其他团队成员的 JSP 开发`<myTag:*/>`

2.  而且我不想在 MyTag.Java 中硬编码一些 HTML 输出。这就是为什么我想从外部文件中读取一些 JSP 片段并在运行时注入它。

有关如何使用 TagSupport 实现此目的的任何示例/片段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T20:00:43.320

JSP 文件被[转换为 servlet](http://www.jsptutorial.net/understanding-jsp-life-cycle.aspx)，此时还生成了 JSP 标记的调用代码。基本上，servlet 容器[实例化您的标签](http://java.sun.com/products/jsp/tutorial/TagLibraries18.html)，有时使用标签实例池，但无论哪种方式，这些实例都不会直接由容器公开。

在标记处理程序内部没有 JSP 代码的概念。标签处理程序“更接近金属”（可以这么说），在这里您只能直接写入响应。您无法评估 JSP 代码。此时已经评估了正文内容。

因此，您不能将 JSP 片段注入到您的标记处理程序中，但您可以让标记处理程序本身从该外部文件中提取内容。但这将是静态内容！

诸如此类的东西`<%=request.getAttribute("theme")%>`在这里没有任何意义，将直接发送给客户端（按原样）。`${theme}`如果您将自己限制为可以[评估自己](http://tomcat.apache.org/tomcat-5.5-doc/jspapi/javax/servlet/jsp/el/ExpressionEvaluator.html)的 EL 表达式，那么您可以在其中包含某种 JSP 代码，但是随着您的外部代码将变得更加复杂，这将很快变得非常复杂。

根据您想要做什么，或者您的 servlet 容器实现的规范，另一种解决方案可能是使用[JSP 2.0 标记文件](http://docs.oracle.com/javaee/5/tutorial/doc/bnama.html)，因此根据您的情况看看这是否有帮助（如果可以构建[JSPFragment](http://docs.oracle.com/javaee/1.4/api/javax/servlet/jsp/tagext/JspFragment.html)会很好由开发人员，但不幸的是这是容器实现）。

但是在我看来，您所做的确实是在[装饰](http://en.wikipedia.org/wiki/Decorator_pattern)其他 JSP 代码的输出。如果您想简化开发并稍后在其输出之上添加内容，那么还要检查[SiteMesh](http://web.archive.org/web/20101203145043/http://www.opensymphony.com/sitemesh/)。它是一个网页布局和装饰框架，可以完成您想要实现的目标（甚至更多）。

# android - 我们何时知道 Activity 的视图何时布局

> ID：10178245
> 
> 赞同：4
> 
> 时间：2012-04-16T16:46:51.260
> 
> 标签：android, android-layout, android-activity, android-view

我有一个视图层次结构的活动，如下所示：

```
<RelativeLayout>
    <LinearLayout>
        <GridLayout />
    </LinearLayout>
</RelativeLayout> 
```

顶部的 RelativeLayout 占据了整个屏幕，而 LinearLayout 占据了屏幕的一个子集。我正在尝试设置 GridLayout 的子视图的大小，以便在 n 行和 m 列的情况下，单元格的大小与 n、m 值以及 LinearLayout 的宽度和高度直接相关。

因此，例如，我试图获取单元格的宽度和高度，如下所示：

```
int linearLayoutWidth = mLinearLayout.getMeasuredWidth();
int linearLayoutHeight = mLinearLayout.getMeasuredHeight();
...

int rows = mGridModel.getRows() + 1;
int columns = mGridModel.getColumns() + 1;
int cellWidth = (int) (linearLayoutWidth / columns);
int cellHeight = (int) (linearLayoutHeight / rows); 
```

不幸的是，在创建视图时，mLLinearLayout.getMeasuredWidth() 不会返回正确的大小。它总是返回实际设备的屏幕宽度，直到视图完全布局——在这种情况下为时已晚。我已经根据最初完全不正确的值给我的孩子单元格视图的大小。

我的问题是 - 我如何知道视图何时已完全展开。我需要查询他们正确或实际测量的宽度/高度。

setContentView() 创建视图并在理论上对它们进行布局。但他们的观点还不能保证处于最终正确的位置/大小。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-16T17:03:19.647

您可以将 ViewObserver 添加到任何视图中，在这个观察者中有一个回调方法 onGlobalLayout，在布局布局时调​​用；

```
ViewTreeObserver observer = view.getViewTreeObserver();
observer.addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
    @Override
    public void onGlobalLayout() {
        //in here, place the code that requires you to know the dimensions.

         //this will be called as the layout is finished, prior to displaying.
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-13T16:17:54.227

扩展 jeet 的答案，您可以让您的活动实现侦听器，这会产生更好的代码。

```
public class MyActivity extends Activity implements ViewTreeObserver.OnGlobalLayoutListener {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        ...
        view.getViewTreeObserver().addOnGlobalLayoutListener(this);
    }

    @Override
    public void onGlobalLayout() {
        ...
    }

} 
```

# sql - 如何为以下查询编写关系代数表达式？

> ID：10178246
> 
> 赞同：0
> 
> 时间：2012-04-16T16:46:54.557
> 
> 标签：sql, tsql, relational-algebra

如何为以下查询编写关系代数表达式？

```
select Customer_ID
from tbl_Reservation
where Customer_ID not in (select Customer_ID from tbl_Bill) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T16:57:53.890

像这样的东西：

```
excludedCustomers = π(Customer_ID)(tbl_Bill)
customerReservations= π(Customer_ID)(tbl_Reservation)
result = customerReservations- excludedCustomers 
```

您只需要获取您想要排除的客户的预测（全部来自 tbl_Bill），对 tbl_Reservation 执行相同操作，然后从两个预测中减去就是您的答案。

# ms-access - 在 Access 查询中为左外连接上的空记录重新调整值

> ID：10178249
> 
> 赞同：4
> 
> 时间：2012-04-16T16:47:09.290
> 
> 标签：ms-access, left-join

我已经尝试了在这种情况下返回值的所有公式，并且不断收到错误消息，告诉我我的参数数量错误。这是我的查询：

```
SELECT [ER Root].[Network Indicator], 
[ER Root].[Prov Indicator], 
[ER Root].[Pos Indicator], 
[ER].[ER Visit]
FROM [ER Root] LEFT JOIN ER ON ([ER Root].[Network Indicator] = ER.[Network Flag]) AND ([ER Root].[Pos Indicator] = ER.[POS Indicator]) AND ([ER Root].[Prov Indicator] = ER.[Category Indicator]); 
```

我努力了：

```
SELECT [ER Root].[Network Indicator], 
[ER Root].[Prov Indicator], 
[ER Root].[Pos Indicator], 
ISNULL([ER].[ER Visit],0) AS "ER Visit"
FROM [ER Root] LEFT JOIN ER ON ([ER Root].[Network Indicator] = ER.[Network Flag]) AND ([ER Root].[Pos Indicator] = ER.[POS Indicator]) AND ([ER Root].[Prov Indicator] = ER.[Category Indicator 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T02:49:59.777

Access'`ISNULL`函数只接受一个参数并返回一个布尔值。

如果要返回`0`何时`[ER Visit]`为 Null，可以`Nz`在从 Access 会话中运行的查询中使用。

```
SELECT Nz([ER Visit], 0) AS ER_Visit 
```

请注意，我用作`ER_Visit`别名是因为如果您尝试将字段名称重新用作别名，数据库引擎可能会抱怨“循环”引用。

如果您从 Access 会话外部（例如从经典 ASP 或 .Net）运行查询，则该`Nz`功能将不可用。你可以这样做...

```
SELECT IIf([ER Visit] Is Null, 0, [ER Visit]) AS ER_Visit 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T02:53:42.473

您的 SQL 代码中有一些错误：

*   `ISNULL`不是两个参数函数，它仅评估（变体）值是否为 NULL 并返回`Boolean`值（`True`或`False`）。您正在搜索的功能是`NZ`：

> 当 Variant 为 Null 时，您可以使用 Nz 函数返回零、零长度字符串 (" ") 或其他指定值。例如，您可以使用此函数将 Null 值转换为另一个值，并防止它通过表达式传播。

您查询中的第二个问题是：

*   您将人类可读的文件名括在双引号中`"`。这是不允许的，您应该将其括在方括号内`[]`。

因此，您的查询将如下所示：

```
SELECT [ER Root].[Network Indicator], 
[ER Root].[Prov Indicator], 
[ER Root].[Pos Indicator], 
Nz([ER].[ER Visit],0) AS [ER Visit]
FROM [ER Root] 
LEFT JOIN ER ON ([ER Root].[Network Indicator] = ER.[Network Flag]) AND
([ER Root].[Pos Indicator] = ER.[POS Indicator]) AND 
([ER Root].[Prov Indicator] = ER.[Category Indicator]); 
```

如果您没有直接在 Access 应用程序本身中运行此查询，而是在通过`ADO`、`JET`、`DAO`、`ODBC`或任何其他外部 Access 驱动程序使用 Access 数据库的某些外部应用程序中运行，您还应该注意`NZ`这些驱动程序不支持. `IIF`但是，您可以选择您`ER Visit`的：

```
IIF([ER].[ER Visit] Is Null, 0, [ER].[ER Visit]) AS [ER Visit] 
```

`NZ`但是，如果您直接在 Access 中尝试，那么使用该功能应该没有问题。

干杯!

# wcf - 如何访问托管在 SharePoint 2010 中的 wcf 服务

> ID：10178250
> 
> 赞同：0
> 
> 时间：2012-04-16T16:47:09.457
> 
> 标签：wcf, sharepoint-2010

如何访问托管在 SharePoint 中的 wcf 服务。是否需要考虑任何安全问题。我知道当我们在 SharePoint 中部署自定义服务时，它会处理安全问题。我们如何保护服务，例如：从 asp.net 应用程序中使用相同的服务。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T18:35:10.330

这可能对您有帮助：

[http://beta.c-sharpcorner.com/UploadFile/anavijai/how-to-create-and-host-wcf-service-inside-sharepoint-2010/](http://beta.c-sharpcorner.com/UploadFile/anavijai/how-to-create-and-host-wcf-service-inside-sharepoint-2010/)

# ruby-on-rails - Rails - 将度量单位与我的数据库列相关联的好方法？

> ID：10178255
> 
> 赞同：0
> 
> 时间：2012-04-16T16:47:22.393
> 
> 标签：ruby-on-rails

我有一个模型，它有大约 50 列测量数据，每列都有不同的测量单位（即克、盎司等）。将计量单位与数据库中的列相关联的好方法是什么？其主要用途只是用于显示目的。(Ruby on Rails)

编辑：澄清一下，我的模型是一个对象，属性是该对象的不同测量值。所以，一个例子是，如果我有模型`Car`和属性列，，，，`:power`等`:torque`。我想返回和返回`:weight`，等等。这样，我就可以做这样的事情：`:wheelbase``car.power.unit``hp``car.weight.unit``lbs.`

```
<%= car.power + car.power.unit %> 
```

它会返回

```
400hp 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T16:52:38.350

**更新的答案**

由于您要存储许多数据列，但每一列只有一种类型，并且您的关注点是严格的表现形式，所以我只会使用装饰器来完成您所需要的。[有关使用Draper](https://github.com/jcasimir/draper)执行此操作的好方法的示例，请参阅此[railscast](http://railscasts.com/episodes/286-draper)。

基本上，装饰器使用特定于演示的方法包装您的模型，因此而不是：

```
#CarsController.rb
def show
  @car = Car.find(params[:id])
end 
```

你会用

```
#CarsController.rb
def show
  @car = CarDecorator.find(params[:id])
end 
```

你会像这样定义一个装饰器：

```
class CarDecorator < ApplicationDecorator
  decorates :car

  def horsepower
    model.power.to_s + "hp" #call to_s just in case
  end

end 
```

那么在你看来，任何时候你打电话`@car.horsepower`都会得到`123hp`而不是`123`. 通过这种方式，您可以构建一个很长的可重复使用的表示方法列表。您可以使用继承在对象之间共享方法，也可以允许调用来自原始模型的方法。请参阅 railscast 和文档等。您可以使用 Draper，或者如果您不想使用库，也可以滚动自己的演示者类。

* * *

上一个答案（删节）：

我可以看到两种不错的简单方法：

`units`1）只需为您的数据模型添加一个文本列。IE：获得“400hp”使用`[data.value,data.units].join`

2）您可以通过拥有一个`Units`模型来获得更丰富的关联，也许在[ActiveEnum 之](https://github.com/adzap/active_enum)类的帮助下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T16:54:25.373

您可以添加具有`for`属性的单元模型，将属性保存在要应用该单元的消息中。例子：

```
def Unit < ActiveRecord::Base
  scope :for, lambda{|messurement| find_by_for( messurement.to_s ) }
end 
```

这使您可以使用以下内容：

```
<%= @car.torque + Unit.for(:torque).symbol %> 
```

我不知道这是否有这么大的优势，但它是解决您问题的一种方法......

# linq - 在 EF 中的内部选择上有两个连接的 Linq 查询

> ID：10178257
> 
> 赞同：3
> 
> 时间：2012-04-16T16:47:46.290
> 
> 标签：linq, entity-framework

我正在尝试为 EF 创建一个 Linq 查询，该查询连接来自内部选择的 2 个值。在下面，您会发现可以解决问题的 SQL 查询，在 Linq 中尝试这样做时，事情会变得更加棘手。

我使用 POCO 对象并希望查询返回 List 而不是匿名类型。Linq to EF 有可能吗？

```
选择 s1.*
FROM [统计] s1
内部联接
(
    选择 MAX(CreateDate) 作为 createdate
    来自[统计]
    按用户 ID 分组
) s2
ON s1.UserId = s2.[UserId] 和 s1.CreateDate = s2.createdate
ORDER BY s1.Balance desc

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T17:57:06.017

您可以使用 Where 或 Join 来做到这一点。

```
from s1 in Statistics
join s2 in (from s in Statistics group s by s.UserId into g
select new { UserId = g.Key, CreateDate = g.Max (s => s.CreateDate) })
on new { s1.UserId, s1.CreateDate } equals new { s2.UserId, s2.CreateDate }
orderby s1.Balance descending
select s1; 
```

或者，

```
from s1 in Statistics
from s2 in (from s in Statistics group s by s.UserId into g
select new { UserId = g.Key, CreateDate = g.Max (s => s.CreateDate) })
where s1.UserId == s2.UserId && s1.CreateDate == s2.CreateDate
orderby s1.Balance descending
select s1; 
```

# php - 我的 php GD 绘图后页面内容不显示

> ID：10178258
> 
> 赞同：0
> 
> 时间：2012-04-16T16:47:47.903
> 
> 标签：php, html, gd

我尝试制作一个像插件一样的 PHP GD 横幅，让用户复制和粘贴图像链接并放入他们的网站，到目前为止这对我来说还可以，问题是当我加载图像时，其他页面内容，如文本等不显示在浏览器中

这是我绘制图像的 php 代码

```
<?php
    header("Content-type: image/png");
    $string = $_GET['text']. '  Click Here';
    $im     = imagecreatefrompng("../../images/banner.png");
    $orange = imagecolorallocate($im, 0, 0, 0);
    $px     = (imagesx($im) - 1.5 * strlen($string)) / 2;
    $font = 'verdana.ttf';
    imagestring($im,50, $px, 45, $string, $orange);
    imagepng($im);
    imagedestroy($im);
        ?> 
```

提示：我将此代码放在页面顶部以使标题正常工作

现在其他html代码是：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>add plugin</title>
</head>

<body>
<h3>Select One or More Plugin to connect your website for your reservation</h3>

<h4>Just A Button</h4>
<br />
<p>Instructions</p>
<p>Copy this code and paste into your website</p>

</body>
</html> 
```

有人可以提出任何解决方案来克服这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T17:03:40.233

> 提示：我将此代码放在页面顶部以使标题正常工作

那是你的问题。您基本上完成了相当于在文本编辑器中打开计算机上的图像文件并在文件末尾键入随机字符的操作。它会破坏图像，并且您将永远看不到字符，因为它们在图像数据中毫无意义。

您的 PHP 代码无法在一个 HTTP 请求中同时返回图像和 HTML。相反，您可以有两个不同的 PHP 文件，一个用于图像，一个用于 HTML。让 HTML 通过标准`<img src="image.php" alt="" />`标记包含图像 PHP。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T16:58:12.377

如果您的 PHP 脚本生成图像，那么您应该将其输出适当地包装在 IMG 标记中。

尝试将其添加到您的 html 页面的示例：`<img id="banner" src="/path/to/your.php?text=Click%20Here"/>`

如果您使用 jQuery 客户端，您可以动态更改图像的 src 属性。请参阅此处的示例：[使用 jQuery 更改图像源](https://stackoverflow.com/questions/554273/changing-the-image-source-using-jquery)

# python - 需要将更新事件传达给同一 python 脚本的多个正在运行的实例

> ID：10178267
> 
> 赞同：2
> 
> 时间：2012-04-16T16:48:48.087
> 
> 标签：python, state

我需要将更新事件传达给我的 python 脚本的所有正在运行的实例，并且我希望代码尽可能简单。我在正在运行的进程之间进行通信的经验为零。到目前为止，我一直在读/写配置文件，每个实例都会读取和/或更新这些配置文件。

这是我编写的一些伪代码（有点像一个简单的模板），让我了解如何解决这个问题。请试着帮我填空。请记住，我没有使用套接字、线程等的经验......

```
import process # imaginary module

class AppA():
    def __init__(self):
        # Every instance that opens will need to attach
        # itself to the "Instance Manager". If no manager
        # exists, then we need to spawn it. Only one manager
        # will ever exist no matter how many instances are
        # running.
        try:
            hm = process.get_handle(AppA_InstanceManager)
        except NoSuchProgError:
            hm.spawn_instance(AppA_InstanceManager)
        finally:
            hm.register(self)
        self.instance_manager = hm

    def state_update(self):
        # This method won't exist in the real code, however,
        # it emulates internal state changes for the sake of
        # explaination.
        #
        # When any internal state changes happen, we will then
        # propagate the changes outward by calling the
        # appropriate method of "self.instance_manager".
        self.instance_manager.propagate_state()

    def cb_state_update(self):
        # Called from the "Instance Manager" only!
        #
        # This may be as simple as reading a known
        # config file. Or could simply pass data
        # to this method.

class AppA_InstanceManager():
    def __init__(self):
        self.instances = []

    def register_instance(self, instance):
        self.instances.append(instance)

    def unregister_instance(self, instance):
        # nieve example for now.
        self.instances.remove(instance)

    def propagate_state(self):
        for instance in self.instances:
            instance.cb_state_update(data)

if __name__ == '__main__':
    app = AppA() 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T16:55:16.967

这种设计有几种选择。

你可以使用一个消息队列，它是为这种东西制作的，例如 AMQP 或一些 ZeroMQ 或类似的东西。

或者您可以使用 Redis 或其他（内存中）数据库进行同步。

如果你不想使用类似的东西，你可以使用多处理模块同步的东西。

或者使用平台特定的 IPC 系统，例如通过 mmap、sysv 套接字等共享内存。

如果你想按照你解释的方式做事，你可以看看 Twisteds 透视经纪人。

# jquery - 检查联系表单中电子邮件地址的格式

> ID：10178268
> 
> 赞同：5
> 
> 时间：2012-04-16T16:48:53.280
> 
> 标签：jquery, forms, email

我正在使用带有名称、电子邮件和评论字段的简单表单从网页发送消息。还有一个隐藏的标题字段，该字段应为空，以便提交表单 - 如果您愿意，可以进行垃圾邮件保护。

我在提交之前运行表单的 JQuery 代码可以正常工作，但目前只在电子邮件地址字段中寻找“@”字符。我想要的是更好地检查格式正确的电子邮件地址。

这是代码。

```
 $(function() {  
    $('.error').hide();  
    $(".button").click(function() {  
    // validate and process form here  

        $('.error').hide();  
        var name = $("input#name").val();  
            if (name == "") {  
            $("label#name_error").show();  
            $("input#name").focus();  
            return false;
        }  
        var email = $("input#email").val();  
            if (!(email.indexOf('@') > 0)) {
            $("label#email2_error").show();  
            $("input#email").focus();  
        return false;  
        }  
        var message = $("textarea#message").val();  
            if (message == "") {  
            $("label#message_error").show();  
            $("textarea#message").focus();  
        return false;  
        } 
        var title = $("input#title").val()
            if(title !== "") {  
            $("input#title").focus();  
        return false;  
        } 

    var dataString = 'name='+ name + '&email=' + email + '&message=' + message;  
    //alert (dataString);return false;  
    $.ajax({  
        type: "POST",  
        url: "sendmail.php",  
        data: dataString,  
        success: function() {  
            $('#message_form').html("<div id='response'></div>");  
            $('#response').html("<div id='content_success_block' class='shadow_box'>")  
                .append("<div id='success_image'><img src='assets/misc/success.png'></div>")
                .append("<div id='success_text'>Thanks for contacting us! We will be in touch soon.</div>")
                .append("</div>")                   
            .hide()  
            .fadeIn(2500, function() {  
                $('#response');  
            }); 
        }  
    });  
    return false; 
    });

}); 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-16T16:52:35.650

最适合“我”的那个

```
function validEmail(v) {
    var r = new RegExp("[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?");
    return (v.match(r) == null) ? false : true;
} 
```

* * *

### 重要的！

你真的应该读[***这个***](http://www.regular-expressions.info/email.html)。它提供了很多关于电子邮件正则表达式的信息，以及为什么没有真正好的“全部，全部结束”解决方案。简而言之，您必须确定最适合您的预期用户的内容。

* * *

> 合并

```
}  
var email = $("input#email").val();  
if (!validEmail(email)) {
    $("label#email2_error").show();  
    $("input#email").focus();  
    return false;  
} 
```

> 您可以尝试的替代策略：我倾向于在[按键超时时](http://spyk3lc.blogspot.com/2012/03/helpful-hints-javascriptjquery-knowing.html)检查电子邮件（因此如果不是所有字段都准备好，则可以淡出提交按钮）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T17:55:41.473

调用该文本框的 onBlur 事件函数，您想在其中检查有效的电子邮件。

```
 function validateForm()
{
 var x = document.getElementById('txtEmail');
 var atpos=x.value.indexOf("@");
 var dotpos=x.value.lastIndexOf(".");
 if (atpos<1 || dotpos<atpos+2 || dotpos+2>=x.length)
  {
    alert("Not a valid e-mail address");
    return false;
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-07T03:50:36.030

只是陈述一个更明显的函数，它在测试电子邮件值时返回 true 或 false。使用`regExp.test(value)`

```
 var emailIsValid =  function(value){
        var regex = new RegExp ("^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}$");
        return regex.test(value);
    }

var email = $("input#email").val();  
        if (!emailIsValid(email)) {
           $("label#email2_error").show();  
           $("input#email").focus();  
        return false;  
        } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-05-18T19:16:51.540

上面的正则表达式（SpYk3HH）的问题是它验证类似：**.me@gmail.c** 我认为最好的方法是使用一些 ajax 来调用 PHP 函数（如果你确实使用 PHP）是这样的：

```
if(!filter_var($email, FILTER_VALIDATE_EMAIL))
echo "Email Not Valid ! "; 
```

# reporting-services - 使用 WITH MEMBER 进行 mdx 查询的参数

> ID：10178274
> 
> 赞同：1
> 
> 时间：2012-04-16T16:49:16.247
> 
> 标签：reporting-services, ssrs-2008, ssas, mdx

好吧，我`member monthname as ()`每个月都有一个“”

这是我查询的一部分

```
member Diciembre as
(
([Dim Tiempos].[Año-Mes].[Año].&[@anioact].&[12],([Measures].[venta]),[Dimregion].[Puntovta].&[@cedis],[Dimproductos].[Categoria].&[Agua 20 Lt])
-([Dim Tiempos].[Año-Mes].[Año].&[@anioant].&[12],([Measures].[venta]),[Dimregion].[Puntovta].&[@cedis],[Dimproductos].[Categoria].&[Agua 20 Lt])

)

select {Enero,Febrero,Marzo,Abril,Mayo,Junio,Julio,Agosto,Septiembre,Octubre,Noviembre,Diciembre} on columns,
FILTER(
{[Dimrutas].[Ruta].Members},
(([Measures].[Venta]),[Dimregion].[Puntovta].&[@cedis],[Dimproductos].[Categoria].&[Agua 20 Lt]) > 0
)ON ROWS

from CuboBebidas
where ([Dimproductos].[Categoria].&[Agua 20 Lt],[Dimregion].[Puntovta].&[@cedis]) 
```

如果我不使用参数它工作正常！现在我需要将它传递给报告服务，我需要参数

你可以看到我有@nameparameter，我需要这些参数，但它不能仅仅作为它工作。

```
@anioact= user will one year
@anioant= @anioact-1
@cedis=a intenger number 
```

那我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T18:36:05.700

SSRS 的 MDX 查询中的参数可能是 [whatever] 中的一个痛苦。我的建议是用这些参数构建一个字符串。查询应如下所示：

```
="member ... [Dimregion].[Puntovta].&[" & Parameters!cedis.Value & "] ..." 
```

希望这有帮助！

# c# - 将 MapPageRoute 添加到 asp.net mvc 项目后，站点停止进入 Home Controller

> ID：10178276
> 
> 赞同：6
> 
> 时间：2012-04-16T16:49:24.063
> 
> 标签：c#, asp.net-mvc, routing, webforms

我正在尝试在我的 asp.net mvc 项目中路由一个 .aspx（webforms 页面）。我在 global.asax 中注册页面：

```
routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
routes.MapPageRoute("Tickets", "Reports/Tickets", "~/WebForms/Reports/Tickets.aspx");
routes.MapRoute("Default", "{controller}/{action}/{id}", new { controller = "Home", action = "Index", id = UrlParameter.Optional }); 
```

问题是，在我添加第二行之后，站点停止进入我的主控制器（索引操作）并重定向到：`http://localhost:37538/Reports/Tickets?action=Index&controller=Login%22`总是我运行项目。

项目详情：

*   ASP.NET MVC 3
*   表单认证
*   .Net 4.0

Obs：要重现此错误，创建一个新的 asp.net mvc 项目作为互联网应用程序，在文件夹`Tickets`内创建 webforms 页面后`/WebForms/Reports`，并注册新路由。运行项目（可能您已登录），所以现在注销，您将被重定向到`http://localhost:35874/Reports/Tickets?action=LogOff&controller=Account`，那为什么呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-16T17:31:56.523

**解决了！**因此，我们需要为 webforms 路由添加一个路由约束，以确保它只捕获传入路由，而不是生成传出路由。

将以下类添加到您的项目中（在新文件中或 global.asax.cs 的底部）：

```
public class MyCustomConstraint : IRouteConstraint{
    public bool Match(HttpContextBase httpContext, Route route, string parameterName, RouteValueDictionary values, RouteDirection routeDirection){
        return routeDirection == RouteDirection.IncomingRequest;
    }
} 
```

然后将门票路线更改为以下内容：

```
routes.MapPageRoute(
    "Tickets",
    "Reports/Tickets",
    "~/WebForms/Reports/Tickets.aspx",
    true, null, 
    new RouteValueDictionary { { "outgoing", new MyCustomConstraint() } }
); 
```

# c# - 页面没有进行母版页设计

> ID：10178277
> 
> 赞同：0
> 
> 时间：2012-04-16T16:49:28.897
> 
> 标签：c#, asp.net, .net, master-pages

我遇到的问题是我像往常一样制作了一个母版页。然后我添加一个视图文件夹并使用母版页添加一个 Web 表单。但是母版页中的设计没有显示在新制作的 Web 表单上。

`<%@ Page Title="Home - " Language="C#" MasterPageFile="~/App_Themes/Theme/shop.Master" AutoEventWireup="true" CodeBehind="home.aspx.cs" Inherits="Shop.Views.home" %>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T16:51:21.873

在 Visual Studio 中添加新的网络表单时，您需要检查“设置母版页”。

# salesforce - 如何自动下载每周导出服务文件

> ID：10178279
> 
> 赞同：8
> 
> 时间：2012-04-16T16:49:55.527
> 
> 标签：salesforce

在 SalesForce 中，您可以在此处安排最多每周“备份”/转储您的数据：设置 > 管理设置 > 数据管理 > 数据导出

如果您有一个大型 Salesforce 数据库，则可能需要手动下载大量文件。

是否有人有最佳实践、工具、批处理文件或技巧来自动化此过程或减少手动操作？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-16T22:54:38.483

上次我检查时，无法通过 API 访问备份文件状态（或实际文件）。我怀疑他们已经使这个过程难以通过设计实现自动化。

我使用 Salesforce 调度程序每周准备文件，然后我有一个在本地服务器上运行的计划任务，用于下载文件。假设您有能力自动化/编写一些 Web 请求，您可以使用以下步骤下载文件：

1.  获取活动的 Salesforce 会话 ID/令牌
    *   企业 API - login() SOAP 方法
2.  获取您的组织 ID（“组织 ID”）
    *   设置 > 公司简介 > 公司信息或
    *   使用企业 API getUserInfo() SOAP 调用来检索您的组织 ID
3.  向 https://{your sf.com instance}.salesforce.com/ui/setup/export/DataExportPage/d?setupid=DataManagementExport 发送 HTTP GET 请求
    *   设置请求cookie如下：
        *   oid={您的组织 ID}; sid={你的会话 ID};
4.  解析生成的 HTML 以获取`<a href="/servlet/servlet.OrgExport?fileName=`
    *   （文件名在 fileName= 之后开始）
5.  将文件名插入此 URL 以下载（并保存）：
    *   https://{您的 sf.com 实例}.salesforce.com/servlet/servlet.OrgExport?fileName={filename}
    *   下载文件时使用与步骤 3 中相同的 cookie

这绝不是最佳实践，但它可以完成工作。不用说，如果他们更改了相关页面的布局，这可能不再起作用。希望这可以帮助。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-07-27T21:59:36.363

下载 SalesForce 备份文件的脚本位于[https://github.com/carojkov/salesforce-export-downloader/](https://github.com/carojkov/salesforce-export-downloader/)

它是用 Ruby 编写的，可以在任何平台上运行。提供的配置文件为您的用户名、密码和下载位置提供了字段。

只需很少的配置，您就可以开始下载。该脚本在完成或失败时发送电子邮件通知。

如果 Ruby 解决方案不适合您，那么很容易弄清楚编写自己的程序所需的步骤顺序。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-12-03T18:15:34.263

我是 Naomi，CMO 和 cloudHQ 的联合创始人，所以我觉得这是一个我应该回答的问题。:-)

cloudHQ 是一种 SaaS 服务，可同步您的云。在您的情况下，您永远不需要上传您的报告作为从 Salesforce 导出的数据，但您将始终将它们备份在标记为“Salesforce Reports”的文件夹中，无论您与 Salesforce 同步的哪个服务，例如：Dropbox、Google Drive、Box、Egnyte、Sharepoint 等

该服务不是免费的，但有 15 天的免费试用期。迄今为止，没有其他服务可以将您的 Salesforce 报告与其他云存储公司实时同步。

您可以在这里试用：[https ://cloudhq.net/salesforce](https://cloudhq.net/salesforce)

我希望这可以帮助你！

干杯，娜奥米

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-09T14:42:18.180

请注意，您知道备份文件中的内容。备份是 65 个不同 CSV 文件的 zip。它是原始数据，不能很容易地在 Salesforce UI 之外使用。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-18T04:11:24.550

我们公司制作了免费的[DataExportConsole](http://www.fuseit.com/Solutions/SFDC-Explorer/Help-Data-Exports.aspx)命令行工具来完全自动化该过程。您执行以下操作：

1.  使用 Salesforce 调度程序自动执行每周数据导出
2.  使用 Windows 任务计划程序以正确的参数运行 FuseIT.SFDC.DataExportConsole.exe 文件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-15T08:44:57.260

我最近编写了一个小型 PHP 实用程序，它使用 Bulk API 下载您通过 json 配置文件定义的 sObjects 的副本。

它非常基本，但可以轻松扩展以满足您的需求。

github 上的[Force.com 复制器。](https://github.com/tom-gangemi/Force.com-Replicator)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-04-05T14:29:35.723

添加 Python3.6 解决方案。应该可以工作（虽然我还没有测试过）。确保安装了包（requests、BeautifulSoup 和 simple_salesforce）。

```
import os
import zipfile
import requests
import subprocess
from datetime import datetime
from bs4 import BeautifulSoup as BS
from simple_salesforce import Salesforce

def login_to_salesforce():
    sf = Salesforce(
        username=os.environ.get('SALESFORCE_USERNAME'),
        password=os.environ.get('SALESFORCE_PASSWORD'),
        security_token=os.environ.get('SALESFORCE_SECURITY_TOKEN')
    )
    return sf

org_id = "SALESFORCE_ORG_ID"  # canbe found in salesforce-> company profile
export_page_url = "https://XXXX.my.salesforce.com/ui/setup/export/DataExportPage/d?setupid=DataManagementExport"

sf = login_to_salesforce()
cookie = {'oid': org_id, 'sid':sf.session_id}
export_page = requests.get(export_page_url, cookies=cookie)
export_page = export_page.content.decode()

links = []
parsed_page = BS(export_page)
_path_to_exports = "/servlet/servlet.OrgExport?fileName="
for link in parsed_page.findAll('a'):
   href = link.get('href')
   if href is not None:
       if href.startswith(_path_to_exports):
           links.append(href)

print(links)
if len(links) == 0:
    print("No export files found")
    exit(0)

today = datetime.today().strftime("%Y_%m_%d")
download_location = os.path.join(".", "tmp", today)
os.makedirs(download_location, exist_ok=True)
baseurl = "https://zageno.my.salesforce.com"

for link in links:
    filename = baseurl + link
    downloadfile = requests.get(filename, cookies=cookie, stream=True)  # make stream=True if RAM consumption is high
    with open(os.path.join(download_location, downloadfile.headers['Content-Disposition'].split("filename=")[1]), 'wb') as f:
        for chunk in downloadfile.iter_content(chunk_size=100*1024*1024):  # 50Mbs ??
            if chunk:
                f.write(chunk) 
```

# git - 是否有将不同软件分支导入新的 git 存储库的简单解决方案？

> ID：10178280
> 
> 赞同：2
> 
> 时间：2012-04-16T16:50:03.947
> 
> 标签：git, branch

一点背景。我工作的实验室里有一堆自制软件。许多项目源于相同的来源，但没有版本历史记录。在某些时候，其中几个被分叉用于不同的实验目的。我们正在将所有这些软件放入 git 存储库中。希望这将使我们能够在未来合并不同的版本。

因此，我必须为 project1 versionA 创建一个新的 git 存储库并调用该主分支。

然后我希望 project1 versionB 成为同一个 git 存储库的一个分支。

不过，我还没有找到很好的解决方案。到目前为止，我最好的想法是：

git init（在 project1 versionA 中）目录，然后提交并推送到远程存储库。然后将其拉到版本B所在的同一台计算机上的一个新的空文件夹中。然后，我签出一个名为 versionB 的新分支，并将该版本中的所有内容复制到版本 A 之上。然后我提交 -a 并推送。

那应该在 git 中给我两个版本/分支。一个称为 master (versionA)，一个称为 versionB。除了不是一个简洁的解决方案之外，这个问题还在于版本A中存在但版本B中不存在的任何文件现在都将存在于两者中。这肯定会造成混乱，并且由于许多软件会查看某些文件夹并将所有内容加载到那里，这将是个问题。

另一个想法是在复制之前从版本 B 分支中清除版本 A 的东西，这会解决问题吗？

这似乎是一种迂回的方式来做一些应该相当简单（并且经常遇到）的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T17:45:03.047

它们都是具有不同版本的“project1”，您预计这两个版本之间会有很大的重叠。我会这样做（这有点不标准）。假设您有两个目录，一个称为verAsrc，另一个称为verBsrc。

```
$ cd verAsrc
$ git init
$ git branch versionA master
$ git branch versionB master
$ git checkout versionA
$ git add
$ git commit -m 'Project 1 version A'

# now the non-standard part

$ cd verBsrc
$ ln -s verAsrc/.git .git
$ git symbolic-ref HEAD refs/heads/versionB      # change to versionB w/o touching working files
$ git add -A
$ git commit -m 'Project 1 version B'

# Now you are done with verBsrc

$ cd verAsrc
$ git symbolic-ref HEAD refs/heads/versionA 
```

现在您在 verAsrc 中有一个 git 存储库，它在自己的分支上同时具有版本 A 和 B。您可以检查任何一个。他们现在独立了；但是，这里是关键，你想从版本 A 变基版本 B。

```
$ git checkout versionB
$ git rebase versionA 
```

GIT 将识别所有共享的内容，并在 versionA 上生成一个提交，将您带到 versionB。该单一提交将具有 A 和 B 之间的所有差异

```
$ git diff versionA..versionB 
```

去应该不错。合并您想要掌握的内容。在 verAsrc 中克隆存储库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T16:59:20.463

> 另一个想法是在复制之前从版本 B 分支中清除版本 A 的东西，这会解决问题吗？

或多或少。在您提交并推送您的主分支后，创建和`checkout versionB`. 现在`git rm .`（即，清空目录），复制 versionB 的东西，然后提交 + 推送。这*可能会*为第一个版本 B 创建一种混乱的提交记录；OTOH它可能不是 - 但这只是“修改后的文件A”和“删除的文件A，新的文件文件A”之间的区别（我以前做过，但我不记得这方面的结果）。

实际上：如果您改为覆盖`git rm`您不需要的文件，而不是先将它们全部删除（除非这太乏味），可能会更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T17:12:25.973

据我了解，您正在这样做：

```
project1 repository
   versionA branch   A
   versionB branch    \--- B 
```

基本上 versionB 是从 versionA 分支的（我猜是 master 分支），您甚至将 versionA 的文件留在了 versionB 分支中，因为您只是“复制了它”。提交 A 是您的第一个提交。

由于您丢失了项目历史记录并且您没有他们分叉的代码，因此我建议您从空提交分支。

```
project1 repository
   master            M
   versionA branch   |---A
   versionB branch   \---B 
```

提交 M 将是您的初始（空）提交（可能仅包括`.gitignore`文件或其他内容），提交 A 将仅包含来自 VersionA 的文件，而提交 B 将仅包含来自 VersionB 的文件。

# c# - 在视图中设置两列主键

> ID：10178281
> 
> 赞同：0
> 
> 时间：2012-04-16T16:50:06.150
> 
> 标签：c#, .net, entity-framework, primary-key, edmx

在 SQL Server Management Studio 中，您可以在设计器中编辑表，选择两列，右键单击并将它们设为主键。

是否也有可能这样做以获得视图？

通常当我在我的数据库中有一个视图时，它需要一些列是`NOT NULL`. 然后在`Entity Framework 4`我执行`Update Model From Database`（在 .edmx 文件设计视图中）导入视图，并且因为一列是`NOT NULL`它使该列成为主键。如果没有列，则`NOT NULL`拒绝将视图导入模型。问题是，我现在有一个视图，其中没有单列可能是主键，只有两列组合。如何使实体框架接受这两个列作为主键。

或者我是否可以在视图中添加一个新列（可能称为 Identity）并使该列成为主键？我怎么能这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T18:13:20.277

在 EF 中，您只需在 desinger 中选择您的实体并将任何属性（或一组属性）设置为实体键。数据库视图不能有主键，您可以制作索引视图，但 EF 很可能会忽略这一点。

# javascript - JavaScript 中类的层次结构是什么？

> ID：10178283
> 
> 赞同：0
> 
> 时间：2012-04-16T16:50:28.133
> 
> 标签：javascript, class, inheritance

谁能指出 JavaScript 标准类/原型克隆继承关系的可靠模型？

我所指的“标准原型”是窗口、导航器、文档等等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T17:00:17.567

这是一个很好的。

[http://phrogz.net/js/classes/OOPinJS2.html](http://phrogz.net/js/classes/OOPinJS2.html)

正如@Radu 和@johnH 指出的那样，本身没有“类”，但通过原型存在*某种*继承。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T17:19:55.080

如果您指的是浏览器提供的 DOM 对象，请查看[Mozilla 的 Gecko DOM 参考](https://developer.mozilla.org/en/Gecko_DOM_Reference)。但是，每个浏览器都提供自己的本机对象，因此您应该验证某个对象确实可用并且在您想要定位的所有浏览器中都类似地工作。

# android - Android 扩展了应用程序基础

> ID：10178284
> 
> 赞同：0
> 
> 时间：2012-04-16T16:50:32.777
> 
> 标签：android

我在从应用程序扩展的类中设置全局变量。只是对基础知识感到困惑。以下代码正在运行，但它是正确的方法吗？

```
public class GlobalMV extends Application{

private static final String TAG = "Global";
private String userid, pwd, name, station;

@Override public void onCreate () 
{     
    Thread.setDefaultUncaughtExceptionHandler(            
            new UncaughtExceptionHandler(){                  
                @Override                 
                public void uncaughtException(Thread arg0, Throwable arg1) {                     
                       Functions.CustomToastLong(getApplicationContext(), arg0.toString() + arg1.toString());
            }              
        }     
    );     
    super.onCreate();   
} 

public GlobalMV(){
   userid ="000000";
   pwd="";
} 
```

onCreate() 和构造函数都可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T17:02:47.467

看起来不错，你也可以写：

```
private String userid="000000";
private String pwd;
private String name;
private String station; 
```

麦芽酒删除 c-tor

# android - 在 XML 中定义的自定义 ListView（因此没有以编程方式定义的自定义适配器）

> ID：10178289
> 
> 赞同：0
> 
> 时间：2012-04-16T16:50:38.180
> 
> 标签：android

我的应用程序的主菜单是一个具有非常特定外观的项目列表。它有一个自定义分隔线，每个列表元素都有一个自定义颜色和高度。为了实现这一点，我们构建了一个自定义的 ArrayAdapter，但我想知道这是否真的有必要。主菜单中的按钮总是相同的，所以我想知道这里有什么更好的设计模式。纯 XML 还是覆盖 ArrayAdapter？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T17:18:27.063

您不能在不使用以编程方式定义的自定义适配器的情况下，纯粹以 XML 为主菜单创建“自定义 ListView”。`ListView`需要一个`ListAdapter`，不管你喜欢与否。

话虽如此，我一开始就不会把“按钮”`ListView`放在首位。理想情况下，您甚至不会有“[您的] 应用程序的主菜单”，而是会在用户启动它时将其带到有用的地方。如果您确定需要有一个“主菜单”活动，请使用仪表板模式：[Android Dashboard Pattern](https://stackoverflow.com/questions/2873568/android-dashboard-pattern)

# javascript - javascript - 检查cookie值是否在数组中

> ID：10178291
> 
> 赞同：0
> 
> 时间：2012-04-16T16:50:51.083
> 
> 标签：javascript, arrays, cookies

我现在正在学习 javascript，所以这可能是一个非常新的问题！我用谷歌搜索了它，但没有找到我要找的东西，也许我只是没有用谷歌搜索正确的东西，但是是的......哦，我没有使用任何 cookie 插件。

我有一个名为“country”的 cookie，其值是用户的国家代码，如 US、CA、UK、AU 或 FR……我只想显示一个内容块，如果国家是，比如说 DE，ES， AT、IT 或 NL。

我正在寻找的逻辑：如果存在 cookie“国家”并且国家 == 我数组中的国家之一......

我正在考虑类似的事情......但这显然太简单而且不起作用:)

```
var countryArray = new Array["DE", "ES", "AT", "IT", "NL"];

if( $.cookie('country') && $.cookie('country') == countryArray ) { alert("working"); } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T16:52:49.000

您可以将[indexOf](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/indexOf)用于新浏览器：

```
countryArray.indexOf($.cookie('country')) > -1 
```

另外，而不是

```
 countryArray = new Array["DE", "ES", "AT", "IT", "NL"]; 
```

你需要写：

```
 countryArray = ["DE", "ES", "AT", "IT", "NL"]; 
```

**更新：**对于旧浏览器，请将此脚本包含在您的`js`：

```
 Array.prototype.indexOf = Array.prototype.indexOf || function( value, startIndex ){
     var i = startIndex || 0;
     for(; i < this.length; ++i){
         if( value === this[i] ){
             return i;
         }          
     }
     return -1;
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T16:54:53.467

有一个关联数组。

```
var countryArray = [];

countryArray["DE"]=true;
countryArray["ES"]=true;
etc.

if( $.cookie('country') && countryArray[$.cookie('country')] )
 { alert("working"); } 
```

将适用于所有浏览器..

# sql - 在 Oracle SQL 中比较日期

> ID：10178292
> 
> 赞同：166
> 
> 时间：2012-04-16T16:50:51.720
> 
> 标签：sql, oracle, date-comparison

我试图让它显示 1994 年 6 月 20 日之后雇用的员工人数，

```
Select employee_id, count(*)
From Employee
Where to_char(employee_date_hired, 'DD-MON-YY') > 31-DEC-95; 
```

但我得到一个错误说

> “JUN”无效标识符。

请帮忙，谢谢！

* * *

## 回答 #1

> 赞同：336
> 
> 时间：2012-04-16T16:54:32.237

`31-DEC-95`不是字符串，也不是`20-JUN-94`. 它们是最后添加了一些额外内容的数字。这应该是`'31-DEC-95'`or `'20-JUN-94'`- 注意单引号，`'`. 这将使您能够进行字符串比较。

但是，您没有进行字符串比较；*你正在做一个日期比较*。您应该将字符串转换为日期。通过使用内置[`TO_DATE()`](http://docs.oracle.com/database/121/SQLRF/functions219.htm#SQLRF06132)函数或[日期文字](http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements003.htm#SQLRF51062)。

## 迄今为止（）

```
select employee_id
  from employee
 where employee_date_hired > to_date('31-DEC-95','DD-MON-YY') 
```

这种方法有一些不必要的陷阱

*   正如评论中指出的 a_horse_with_no_name ，`DEC`不一定意味着 12 月。这取决于你的[`NLS_DATE_LANGUAGE`](http://docs.oracle.com/cd/E11882_01/server.112/e10729/ch3globenv.htm#i1006894)和[`NLS_DATE_FORMAT`](http://docs.oracle.com/cd/E11882_01/server.112/e10729/ch3globenv.htm#i1006817)设置。为了确保您与任何语言环境中的工作进行比较，您可以改用日期时间[格式模型](http://docs.oracle.com/database/121/SQLRF/sql_elements004.htm#SQLRF00212) `MM`
*   95 年是不准确的。你知道你的意思是 1995 年，但如果是 50 年，那是 1950 年还是 2050 年？最好是明确的

```
select employee_id
  from employee
 where employee_date_hired > to_date('31-12-1995','DD-MM-YYYY') 
```

## 日期文字

日期文字是 ANSI 标准的一部分，这意味着您不必使用 Oracle 特定的函数。使用文字时，您*必须*以格式指定日期，`YYYY-MM-DD`并且不能包含时间元素。

```
select employee_id
  from employee
 where employee_date_hired > date '1995-12-31' 
```

请记住，Oracle 日期数据类型包括一个时间元素，因此没有时间部分的日期相当于`1995-12-31 00:00:00`.

如果要包含时间部分，则必须使用时间戳文字，其格式为`YYYY-MM-DD HH24:MI:SS[.FF0-9]`

```
select employee_id
  from employee
 where employee_date_hired > timestamp '1995-12-31 12:31:02' 
```

## 更多信息

[`NLS_DATE_LANGUAGE`](http://docs.oracle.com/cd/E11882_01/server.112/e10729/ch3globenv.htm#i1006894)源自[`NLS_LANGUAGE`](http://docs.oracle.com/cd/E11882_01/server.112/e10729/ch3globenv.htm#i1006480)并且[`NLS_DATE_FORMAT`](http://docs.oracle.com/cd/E11882_01/server.112/e10729/ch3globenv.htm#i1006817)源自[`NLS_TERRITORY`](http://docs.oracle.com/cd/E11882_01/server.112/e10729/ch3globenv.htm#i1006575)。这些是在您最初创建数据库时设置的，但可以通过更改初始化参数文件（仅在确实需要时）或在会话级别使用[`ALTER SESSION`](http://docs.oracle.com/database/121/SQLRF/statements_2015.htm#SQLRF00901)语法来更改它们。例如：

```
alter session set nls_date_format = 'DD.MM.YYYY HH24:MI:SS'; 
```

这表示：

*   `DD`数字日期，1 - 31
*   `MM`一年中的数字月份，01 - 12（一月是 01）
*   `YYYY`4 位数年份 - 在我看来，这*总是*比 2 位数年份好`YY`，因为与您所指的世纪没有混淆。
*   `HH24`一天中的小时，0 - 23
*   `MI`小时的分钟，0 - 59
*   `SS`分钟的秒数，0-59

您可以通过查询找到您当前的语言和日期语言设置，`V$NLS_PARAMETERSs`并通过查询找到有效值的全部范围`V$NLS_VALID_VALUES`。

## 进一步阅读

*   [格式化模型](http://docs.oracle.com/database/121/SQLRF/sql_elements004.htm#SQLRF00212)

* * *

顺便说一句，如果你想要`count(*)`你需要分组`employee_id`

```
select employee_id, count(*)
  from employee
 where employee_date_hired > date '1995-12-31'
 group by employee_id 
```

这为您提供了*每* `employee_id`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-11-11T11:57:21.697

结论，

`to_char`以自己的方式工作

所以，

始终使用此格式**YYYY-MM-DD**进行比较，而不是**MM-DD-YY**或**DD-MM-YYYY**或任何其他格式

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-02-03T22:24:13.307

您可以按如下方式使用 trunc 和 to_date：

```
select TO_CHAR (g.FECHA, 'DD-MM-YYYY HH24:MI:SS') fecha_salida, g.NUMERO_GUIA, g.BOD_ORIGEN, g.TIPO_GUIA, dg.DOC_NUMERO, dg.* 
from ils_det_guia dg, ils_guia g
where dg.NUMERO_GUIA = g.NUMERO_GUIA and dg.TIPO_GUIA = g.TIPO_GUIA and dg.BOD_ORIGEN = g.BOD_ORIGEN
and dg.LAB_CODIGO = 56 
and trunc(g.FECHA) > to_date('01/02/15','DD/MM/YY')
order by g.FECHA; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-12-03T09:18:51.367

根据您的查询：

```
Select employee_id, count(*) From Employee 
Where to_char(employee_date_hired, 'DD-MON-YY') > '31-DEC-95' 
```

我认为它不显示 1994 年 6 月 20 日之后雇用的员工人数。如果要显示员工人数，可以使用：

```
Select count(*) From Employee 
Where to_char(employee_date_hired, 'YYYMMMDDD') > 19940620 
```

我认为最佳做法是比较您可以使用的日期：

```
employee_date_hired > TO_DATE('20-06-1994', 'DD-MM-YYYY');
or
to_char(employee_date_hired, 'YYYMMMDDD') > 19940620; 
```

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2014-06-19T06:44:09.887

单引号必须在那里，因为日期转换为字符。

```
选择employee_id，count(*)
来自员工
其中 to_char(employee_date_hired, 'DD-MON-YY') > '31-DEC-95';

```

# ios - 如何获取可用蓝牙设备的列表？

> ID：10178293
> 
> 赞同：51
> 
> 时间：2012-04-16T16:50:52.690
> 
> 标签：ios, bluetooth, core-bluetooth

我目前正在创建一个可以使用蓝牙设备的 iPhone 应用程序（Xcode 4.3.1，IOS 5）！此应用程序的主要目标是室内导航（建筑物内的 GPS 并不十分准确）。

我在这里看到的唯一解决方案（将我的应用程序保留在 AppStore 上）是尝试扫描可用的蓝牙设备！

我尝试使用 CoreBluetooth 框架，但我没有得到可用设备的列表！也许我没有正确使用这些功能

```
#import <UIKit/UIKit.h>
#import <CoreBluetooth/CoreBluetooth.h>

@interface AboutBhyperView : UIViewController <CBPeripheralDelegate, CBCentralManagerDelegate>
{
    CBCentralManager *mgr;
}
@property (readwrite, nonatomic) CBCentralManager *mgr;
@end

- (void)viewDidLoad
{
    [super viewDidLoad];

    mgr = [[CBCentralManager alloc] initWithDelegate:self queue:nil];
}

- (void)centralManager:(CBCentralManager *)central didDiscoverPeripheral:(CBPeripheral *)peripheral advertisementData:(NSDictionary *)advertisementData RSSI:(NSNumber *)RSSI {

    NSLog([NSString stringWithFormat:@"%@",[advertisementData description]]);
}

-(void)centralManager:(CBCentralManager *)central didRetrievePeripherals:(NSArray *)peripherals{
    NSLog(@"This is it!");
}

- (void)centralManagerDidUpdateState:(CBCentralManager *)central{ 
    NSString *messtoshow;

    switch (central.state) {
        case CBCentralManagerStateUnknown:
        {
            messtoshow=[NSString stringWithFormat:@"State unknown, update imminent."];
            break;
        }
        case CBCentralManagerStateResetting:
        {
            messtoshow=[NSString stringWithFormat:@"The connection with the system service was momentarily lost, update imminent."];
            break;
        }
        case CBCentralManagerStateUnsupported:
        {
            messtoshow=[NSString stringWithFormat:@"The platform doesn't support Bluetooth Low Energy"];
            break;
        }
        case CBCentralManagerStateUnauthorized:
        {
            messtoshow=[NSString stringWithFormat:@"The app is not authorized to use Bluetooth Low Energy"];
            break;
        }
        case CBCentralManagerStatePoweredOff:
        {
            messtoshow=[NSString stringWithFormat:@"Bluetooth is currently powered off."];
            break;
        }
        case CBCentralManagerStatePoweredOn:
        {
            messtoshow=[NSString stringWithFormat:@"Bluetooth is currently powered on and available to use."];
            [mgr scanForPeripheralsWithServices:nil options:nil];
            //[mgr retrieveConnectedPeripherals];

//--- it works, I Do get in this area!

            break;
        }   

    }
    NSLog(messtoshow); 
} 
```

我不确定这条线，如何传递正确的参数？

```
[mgr scanForPeripheralsWithServices:nil options:nil]; 
```

我看了看苹果参考..我还是不明白那个 CBUUID 是什么？？？每个设备都有一些蓝牙ID？我在哪里可以找到它？

```
- (void)scanForPeripheralsWithServices:(NSArray *)serviceUUIDs options:(NSDictionary *)options; 
```

参数 serviceUUIDs - 应用程序感兴趣的 CBUUID 数组。 options - 自定义扫描的字典，请参阅 CBCentralManagerScanOptionAllowDuplicatesKey。

有没有其他方法可以在 IOS 上使用蓝牙？我的意思是，不使用 BLE 4.0 的旧框架！

任何意见，将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-20T22:04:56.923

[本指南](http://www.devx.com/wireless/Article/43502/0/page/1)对蓝牙 3.0 很有希望。请记住，CoreBluetooth 框架仅适用于低功耗蓝牙 (4.0)。在[bluetooth.com 的 dev-pages](https://www.bluetooth.com/specifications/gatt/services/)中，您可以看到一些全局定义服务的示例，正​​如 Guan Yang 所提到的，您可以看到心率服务是 0x180D。单位的 UUID 由制造商定义。

这是一个代码片段，可能会对您有所帮助。

```
// Initialize a private variable with the heart rate service UUID    
CBUUID *heartRate = [CBUUID UUIDWithString:@"180D"];

// Create a dictionary for passing down to the scan with service method
NSDictionary *scanOptions = [NSDictionary dictionaryWithObject:[NSNumber numberWithBool:NO] forKey:CBCentralManagerScanOptionAllowDuplicatesKey];

// Tell the central manager (cm) to scan for the heart rate service
[cm scanForPeripheralsWithServices:[NSArray arrayWithObject:heartRate] options:scanOptions] 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-11T10:47:44.620

在蓝牙中，有“服务”。一个设备发布`1..N`服务，每个服务都有`1..M`特性。每个服务都有一个唯一标识符，称为**UUID**。

例如，提供“心率”服务的心率蓝牙传感器发布**UUID 为 0x180D**的服务。

（更多服务[在这里](http://developer.bluetooth.org/gatt/services/Pages/ServicesHome.aspx)）

因此，当您执行搜索时，您必须提供一个**UUID**作为条件，告诉您要搜索哪个服务。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-04-17T14:45:57.907

你应该看看[其中一个例子](http://developer.apple.com/library/mac/#samplecode/HeartRateMonitor/Listings/HeartRateMonitor_HeartRateMonitorAppDelegate_m.html)。这是相关的行：

```
[manager scanForPeripheralsWithServices:[NSArray arrayWithObject:[CBUUID UUIDWithString:@"180D"]] options:nil]; 
```

（我知道这是一个 Mac OS X 示例，但 iOS CoreBluetooth API 非常相似。）

CBUUID 标识您感兴趣的服务，而不是设备。标准服务有一个 16 位 UUID，在这种情况下，0x180d 用于心率监测器，或者 0x180a 用于设备信息，而专有服务有一个 128 位 UUID（16 字节）。

大多数设备都实现了设备信息服务，所以如果您只是在寻找任何设备，您可以尝试`[CBUUID UUIDWithString:@"180A"]`.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-06-27T20:29:40.230

尝试在扫描设备时提供此信息

```
NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithBool:NO], CBCentralManagerScanOptionAllowDuplicatesKey, nil];

 [self.centralManager scanForPeripheralsWithServices:nil options:options]; 
```

您将能够在`didDiscoverPeripheral`委托方法中获取设备列表

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-17T17:54:59.060

保持冷静并使用[https://github.com/l0gg3r/LGBluetooth](https://github.com/l0gg3r/LGBluetooth)

所有你需要做的

```
[[LGCentralManager sharedInstance] scanForPeripheralsByInterval:4
                                                         completion:^(NSArray *peripherals) {
     }]; 
```

# wpf - 如何对具有绑定到 Item 子类属性的项目的 WPF 树视图进行排序？

> ID：10178296
> 
> 赞同：1
> 
> 时间：2012-04-16T16:50:58.800
> 
> 标签：wpf, sorting, treeview, subclass, collectionviewsource

我有两节课，

```
public class BookItem
{
    public string BookID            { get; set; }
    public string ItemID            { get; set; }
    public Item Item                { get; set; }   
    public ItemType Type            { get; set; }
    public string ParentID          { get; set; }
    public string BoxID             { get; set; }
    public string StyleID           { get; set; }
    public string NotesID           { get; set; }
    public string Code_XAML         { get; set; }
    public string Description_XAML      { get; set; }
    public CompositeCollection SubItems { get; set; }
}

public class Item : ClaunchBaseClass
{
    public string ItemID        { get; set; }
    public int    Type          { get; set; }
    public string Code          { get; set; }
    public string Description   { get; set; }
    private BookList _books = new BookList();
    public BookList Books       { get {return _books;} set { _books = value; }}
} 
```

我创建了以下 XAML：

```
<pre>    
<TreeView Name="tvList" Grid.Row="2" MouseDoubleClick="tvList_MouseDoubleClick">
    <TreeView.ItemTemplate>
        <HierarchicalDataTemplate DataType="x:Type j:BookItem" ItemsSource="{Binding SubMenu}">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="50"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <TextBlock Text="{Binding Item.Code}" Grid.Column="0" />
                <TextBlock Text="{Binding Item.Description}" Grid.Column="1"/>
            </Grid>
        </HierarchicalDataTemplate>
    </TreeView.ItemTemplate>
</TreeView>
<code> 
```

此 XAML 将树视图项目绑定到书籍项目的集合并显示项目子类的描述和代码，树视图填充并正确显示，但现在我想在 Item.Code 或 Item.Description 上对树视图进行排序，并尝试了以下没有结果：

```
<pre> 
var bookItemsSort = CollectionViewSource.GetDefaultView(_bookItemList) as ListCollectionView;
tvList.ItemsSource = _bookItemList;         //bind the book items to the treeview
bookItemsSort.SortDescriptions.Clear();
bookItemsSort.SortDescriptions.Add(new SortDescription(sort, Ascending));
<code> 
```

我已经让这段代码在其他树视图上正常工作，所以我只能猜测这是绑定到子类的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T13:44:38.797

虽然这里的答案为我的问题提供了部分答案，但没有一个给出我需要的答案。

这个问题最明智的解决方案是为这个对象类型编写我自己的对象比较器并对底层列表进行排序，然后将新列表重新绑定到树视图。这允许在任何嵌套级别比较子类，我无法以任何其他方式工作:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T17:00:30.283

您需要获取每个子列表的默认视图，并对其应用 CollectionViewSource 排序。您发布的代码仅影响顶级项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T16:57:16.370

将您绑定`TreeView.ItemsSource`到 DefaultView。SortDescriptions 不会改变你的 DataList，只会改变它的 View。

```
tvList.ItemsSource = bookItemsSort; 
```

请参阅 Bea Stollnitz 博客：[如何对层次结构进行排序？](http://www.beacosta.com/blog/index.php?s=collectionview)

# c# - 获得围绕给定值的随机异常

> ID：10178299
> 
> 赞同：1
> 
> 时间：2012-04-16T16:51:10.613
> 
> 标签：c#, arrays, algorithm, math

我想在**double**类型的已知值数组中添加一种波纹。我指出这一点是因为 Random.Next / Random.NextDouble() 表现不同。

我怎样才能最好地完成这项任务？

假设我在数组中有 20 个值，
`List<double> arr = new List<double>() { 40, 40, 40, 40 ..... };`
20 个值是 40 的平均值，总共 800，以使其更容易。

采用这种方法后，我希望*总和*仍然保持 800，但每个单独的值都应该修改。这些值应该是正数，因为它们是`total+=i`在之后添加的。

到目前为止，这个问题是使用给定数量的值的百分比来解决的。
`1.0 / 20 = 0.05, then multiplicate that with the total and the iteration number. Then subtract the result from the remainder. Finally i just return a sort by new Guid()`.

正如您已经看到的那样，这种方法只是有点棒，而只有大约 5-20 个值。在我今天的例子中，这个数组需要支持 500-2000 个值（每个值 0,2-0,05%）。

相反，我想有一个衍生物或类似的东西，它会以 +-x% 的值 40 为基础进行失真。或者，也许更好，在数组中的任何单个值上 +-x%）。

**[更新]**

我将根据对此问题的回复添加更新的问题。

```
 Random rnd = new Random();
    List<double> ripple = new List<double>();

    int qty = bArray.Count();
    double diff = last.Value - first.Value;

    if (qty == 1)
    {
        double linearAvg = (diff / qty) / 2;
        ripple.Add(linearAvg);
    }
    else
    {
        double[] rndarr = new double[qty];

        for (int i = 0; i < qty; i++)
            rndarr[i] = rnd.NextDouble();

        double rndArrSum = rndarr.Sum();

        for (int i = 0; i < qty; i++)
            rndarr[i] /= rndArrSum; 

        for (int i = 0; i < qty; i++)
            ripple.Add(diff * rndarr[i]);
    }

    double valueOverall = first.Value;
    for (int i = (qty > 1) ? 1 : 0; i < qty; i++)
        valueOverall += ripple[i]; 
```

已考虑到最后生成的值不重叠。另外，当列表只包含两个值时例外。可能看起来很神奇，但它指的`qty=1`是对象 bArray 的实际外观。无论如何，我认为整个想法很清楚。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T17:04:02.417

一种方法是生成 0 到 1 之间的 N 个随机数（不包括）。总结他们。然后将每个数字除以总和。您现在有一个总和为 1 的 N 个随机数的列表。现在，将这些数字中的每一个乘以您想要的总和，以获得将进入最终数组的数字。

如果您希望您的值是 +/- 某个百分比，则用于`Random.Next`生成某个范围内的随机数并将它们相加。然后除以总数得到总和为 1 的数字列表。最后一步是相同的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T17:05:40.843

另一种方法是遍历数组并按百分比值扰动。完成后，计算与总数相差多远，并将超额量平均分布在所有数字中。这是一些示例代码：

```
var test = Enumerable.Repeat<double>(40, 100).ToArray();
var percent = 0.5d;

var rand = new Random();
var expectedTotal = test.Sum();
var currentTotal = 0d;
var numCount = test.Count();

for (var i = 0; i < numCount; i++)
{
    var num = test[i];
    var range = num * percent * 2;

    var newNum = num + (rand.NextDouble() - 0.5) * (range);
    currentTotal += newNum;
    test[i] = newNum;
}

var overage = (expectedTotal - currentTotal);

for (var i = 0; i < numCount; i++)
    test[i] += overage / numCount; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T17:15:38.640

下面是我的解决方案。

基本上，它将每个值“抖动”某个指定的百分比，然后检查原始总数和“抖动”总数之间的差异。为了使最终总数与原始总数相匹配，它会在每个“抖动”值上添加一个固定数量。

从数学的角度来看，我觉得这不是一个很好的解决方案，因为我认为将固定量添加到每个值可能会扭曲每个值的真实偏差百分比。可能有一种在数学上更正确的方法可以在一组值中应用余数，以保持预期的畸变百分比，但我想这样做需要几次通过，而这个解决方案在一组数量的通过。

```
// prepare data
double[] values = new double[20];
for (int i = 0; i < values.Length; i++)
{
    values[i] = 40.0;
}

// get the original total
double originalTotal = 0.0;
for (int i = 0; i < values.Length; i++)
{
    originalTotal += values[i];
}

// specify an abberation percentage
double x = 0.05;

// jitter each value +/- the abberation percentage
// also capture the total of the jittered values
Random rng = new Random();
double intermediateTotal = 0.0;
for (int i = 0; i < values.Length; i++)
{
    values[i] += values[i] * (rng.NextDouble() - 0.5) * (2.0 * x);
    intermediateTotal += values[i];
}

// calculate the difference between the original total and the current total
double remainder = originalTotal - intermediateTotal;

// add a flat amount to each value to make the totals match
double offset = remainder / values.Length;
for (int i = 0; i < values.Length; i++)
{
    values[i] += offset;
}

// calculate the final total to verify that it matches the original total
double finalTotal = 0.0;
for (int i = 0; i < values.Length; i++)
{
    finalTotal += values[i];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T17:26:23.373

为连续数字*之间*的每一步选择一个随机数（关于零对称） 。然后，将其添加到第一个，并从第二个中减去：

```
for(int i=1; i<length; i++) {
  dx = (rng.NextDouble() - 0.5) * scale;
  arr[i-1] += dx;
  arr[i] -= dx;
} 
```

这应该确保数组的总和保持不变（模浮点误差），而数组元素都被修改。

# jquery - 如何在调用 Click 事件之前检查 .Net Validation 是否为 True

> ID：10178302
> 
> 赞同：1
> 
> 时间：2012-04-16T16:51:22.663
> 
> 标签：jquery, validation

我正在使用 .Net 验证来验证我的表单。问题是当我单击提交时，它不会检查表单是否经过验证。即使字段为空白，它也会触发警报。我希望仅在验证表单后触发警报。谢谢你。

```
<asp:ValidationSummary ID="ValidationSummary1" runat="server" CssClass="error-box" />

<asp:Label ID="empLast4Lbl" runat="server" Text="Last 4 digits of SSN#">Last 4 digits of SSN</asp:Label>
<asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" ControlToValidate="empLast4Txt"
                    ErrorMessage="Last 4 digits of SSN is required." ForeColor="Red" CssClass="float-none">*</asp:RequiredFieldValidator>
<asp:TextBox ID="empLast4Txt" runat="server"></asp:TextBox>

<asp:Label ID="empDobLbl" runat="server" Text="Label">Date of Birth</asp:Label>
<asp:RequiredFieldValidator ID="RequiredFieldValidator2" runat="server" ControlToValidate="empDobTxt"
                    ErrorMessage="Date of Birth is required." ForeColor="Red" CssClass="float-none">*</asp:RequiredFieldValidator>
<asp:TextBox ID="empDobTxt" runat="server"></asp:TextBox>

<asp:Button ID="submitEmp" runat="server" Text="Submit" Class="ap-webmethod" /> 
```

// jQuery

```
$(".ap-webmethod").click(function () {

                alert("Fired");

        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T09:06:33.670

它是通过在 ASP.NET 母版页中使用 jQuery 验证来实现的。看到这个链接[http://www.dotnetcurry.com/ShowArticle.aspx?ID=310](http://www.dotnetcurry.com/ShowArticle.aspx?ID=310)

[ASP.NET Web 窗体中的 jQuery 验证插件](https://stackoverflow.com/questions/619816/jquery-validation-plugin-in-asp-net-web-forms)

# redirect - 在 Jekyll 和 GitHub Pages 中重定向旧页面的最佳方法是什么？

> ID：10178304
> 
> 赞同：79
> 
> 时间：2012-04-16T16:51:30.363
> 
> 标签：redirect, github, jekyll, http-status-code-301, github-pages

我在 github 页面上有博客 - jekyll

解决 url 策略迁移的最佳方法是什么？

我发现共同的最佳实践是像这样创建 htaccess

```
Redirect 301 /programovani/2010/04/git-co-to-je-a-co-s-tim/ /2010/04/05/git-co-to-je-a-co-s-tim.html 
```

但它似乎不适用于 Github。我发现的另一个解决方案是创建 rake 任务，它将生成重定向页面。但由于是html，无法发送`301`head，所以SE爬虫不会将其识别为重定向。

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2013-10-31T22:10:09.880

最好的解决方案是同时使用`<meta http-equiv="refresh"`和`<link rel="canonical" href=`

效果很好，Google Bot 在新链接下重新索引了我的整个网站而不会丢失位置。此外，用户会立即被重定向到新帖子。

```
<meta http-equiv="refresh" content="0; url=http://konradpodgorski.com/blog/2013/10/21/how-i-migrated-my-blog-from-wordpress-to-octopress/">
<link rel="canonical" href="http://konradpodgorski.com/blog/2013/10/21/how-i-migrated-my-blog-from-wordpress-to-octopress/" /> 
```

使用`<meta http-equiv="refresh"`会将每个访问者重定向到新帖子。至于 Google Bot，它被视为`<link rel="canonical" href=`301 重定向，其效果是您的页面被重新索引，这就是您想要的。

我在这里描述了我如何将我的博客从 Wordpress 移动到 Octopress 的整个过程。 [http://konradpodgorski.com/blog/2013/10/21/how-i-migrated-my-blog-from-wordpress-to-octopress/#redirect-301-on-github-pages](http://konradpodgorski.com/blog/2013/10/21/how-i-migrated-my-blog-from-wordpress-to-octopress/#redirect-301-on-github-pages)

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-12-03T03:22:23.343

你试过[Jekyll Alias Generator 插件](https://github.com/tsmango/jekyll_alias_generator)吗？

您将别名 url 放在帖子的 YAML 前面：

```
---
  layout: post
  title: "My Post With Aliases"
  alias: [/first-alias/index.html, /second-alias/index.html]
--- 
```

当用户访问其中一个别名 url 时，他们会通过元标记刷新重定向到主 url：

```
<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="refresh" content="0;url=/blog/my-post-with-aliases/" />
  </head>
</html> 
```

另请参阅有关该主题的[博客文章](http://rawsyntax.com/blog/blogging-on-jekyll-url-redirects/)。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2016-04-25T18:33:06.227

**重定向插件**

[https://github.com/jekyll/jekyll-redirect-from#redirect-to](https://github.com/jekyll/jekyll-redirect-from#redirect-to)

它由 GitHub 支持，并使其变得容易：

_config.yml

```
gems:
  - jekyll-redirect-from 
```

a.md

```
---
permalink: /a
redirect_to: 'http://example.com'
--- 
```

如解释：[https://help.github.com/articles/redirects-on-github-pages/](https://help.github.com/articles/redirects-on-github-pages/)

现在：

```
firefox localhost:4000/a 
```

会将您重定向到`example.com`.

`redirect_to`每当页面定义时，插件就会接管。

在 GitHub 页面 v64 上测试。

*注意*：此版本最近修复了一个严重的错误，错误地重用了重定向的默认布局：[https ://github.com/jekyll/jekyll-redirect-from/pull/106](https://github.com/jekyll/jekyll-redirect-from/pull/106)

**手动布局方法**

如果您不喜欢使用[https://github.com/jekyll/jekyll-redirect-from](https://github.com/jekyll/jekyll-redirect-from)，您可以自己轻松实现：

a.md

```
---
layout: 'redirect'
permalink: /a
redir_to: 'http://example.com'
sitemap: false
--- 
```

`_layouts/redirect.html`基于[从 HTML 页面重定向](https://stackoverflow.com/questions/5411538/redirect-from-an-html-page)：

```
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Redirecting...</title>
  {% comment %}
    Don't use 'redirect_to' to avoid conflict
    with the page redirection plugin: if that is defined
    it takes over.
  {% endcomment %}
  <link rel="canonical" href="{{ page.redir_to }}"/>
  <meta http-equiv="refresh" content="0;url={{ page.redir_to }}" />
</head>
<body>
  <h1>Redirecting...</h1>
  <a href="{{ page.redir_to }}">Click here if you are not redirected.<a>
  <script>location='{{ page.redir_to }}'</script>
</body>
</html> 
```

像这个例子一样，`redirect-from`插件不生成 301，只生成`meta`+ JavaScript 重定向。

我们可以验证发生了什么：

```
curl localhost:4000/a 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-06-26T03:24:53.890

### 此解决方案允许您通过 .htaccess 使用真正的 HTTP 重定向 - 但是，涉及 .htaccess 的任何内容都不会在 GitHub 页面上运行，因为它们不使用 Apache。

截至 2014 年 5 月， [GitHub Pages 支持重定向](https://help.github.com/articles/redirects-on-github-pages)，但根据[jekyll-redirect-from Gem 文档](https://github.com/jekyll/jekyll-redirect-from#usage)，它们仍然基于[HTTP-REFRESH](http://en.wikipedia.org/wiki/Meta_refresh)（使用`<meta>`标签），这需要完整的页面加载才能发生重定向。

我不喜欢这种`<meta>`方法，所以我为任何希望使用 Apache 在 .htaccess 文件中提供真正的 HTTP 301 重定向的人提供了一个解决方案，该文件为预先生成的 Jekyll 站点提供服务：

* * *

首先，`.htaccess`在`include`属性中添加`_config.yml`

```
include: [.htaccess] 
```

接下来，创建一个 .htaccess 文件并确保包含[YAML front matter](http://jekyllrb.com/docs/frontmatter/)。这些破折号很重要，因为现在 Jekyll 将使用 Jekyll 的模板语言 Liquid 解析文件：

```
---
---
DirectoryIndex index.html

RewriteEngine On
RewriteBase /

... 
```

确保需要重定向的帖子具有两个属性，如下所示：

```
---
permalink: /my-new-path/
original: blog/my/old/path.php
--- 
```

现在在 .htaccess 中，只需添加一个循环：

```
{% for post in site.categories.post %}
  RewriteRule ^{{ post.original }} {{ post.permalink }} [R=301,L]
{% endfor %} 
```

这将在您每次构建站点时动态生成 .htaccess，并且`include`在您的配置文件中确保 .htaccess 将其放入`_site`目录中。

```
RewriteRule ^blog/my/old/path.php /my-new-path/ [R=301,L] 
```

从那里开始，由您决定`_site`使用 Apache 服务。我通常将完整的 Jekyll 存储库克隆到非 webroot 目录中，然后我的虚拟主机是该`_site`文件夹的符号链接：

```
ln -s /path/to/my-blog/_site /var/www/vhosts/my-blog.com 
```

多田！现在 Apache 可以从您的虚拟根目录提供 _site 文件夹，并使用您想要的任何 HTTP 响应代码完成由 .htaccess 提供支持的重定向！

您甚至可以变得超级花哨，并`redirect`在每个帖子的前面使用一个属性来指定要在 .htaccess 循环中使用的重定向代码。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-11-15T07:44:18.627

最好的选择是通过在 _config.yml 中设置永久链接格式以匹配您的旧博客，从而完全避免 url 更改。

除此之外，最完整的解决方案是生成重定向页面，但不一定值得付出努力。我最终只是让我的 404 页面更友好一些，使用 javascript 来猜测正确的新 url。它对搜索没有任何作用，但实际用户可以访问他们正在寻找的页面，并且在其余代码中没有遗留的东西需要支持。

[http://tqcblog.com/2012/11/14/custom-404-page-for-a-github-pages-jekyll-blog/](http://tqcblog.com/2012/11/14/custom-404-page-for-a-github-pages-jekyll-blog/)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-19T18:24:13.197

由于 github 不允许 301 重定向（这不足为奇），您必须在迁移到新的 URL 结构（并接受搜索引擎点击）或保留 URL 原样之间做出决定。我建议你继续前进。让搜索引擎的筹码落在他们可能的地方。如果有人通过搜索引擎点击您的旧链接之一，他们将被重定向到新位置。随着时间的推移，搜索引擎会接收到您的更改。

您可以做的事情是创建一个[站点地图](https://support.google.com/webmasters/bin/answer.py?hl=en&answer=156184)，您可以在其中仅列出新页面而不是旧页面。这应该可以加快用新 URL 替换旧 URL。此外，如果您所有的旧 URL 都在您的“/programovani”目录中，您还可以使用[robots.txt 文件](https://en.wikipedia.org/wiki/Robots_exclusion_standard)来告诉未来的抓取他们应该忽略该目录。例如：

```
User-agent: *
Disallow: /programovani/ 
```

搜索引擎需要一段时间才能赶上这些变化。这真的没什么大不了的。只要旧 URL 仍然存在并将实际人员重定向到活动页面，就可以了。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-07-16T03:37:06.350

正如其他人所提到的，最好的解决方案是保留工作 URL 或复制页面并指定[规范](http://googlewebmastercentral.blogspot.com/2009/02/specify-your-canonical.html)URL。

由于 github 页面不支持真正的重定向，我选择在 Heroku 上设置重新[路由](https://github.com/joeyAghion/rerouter)，以将 301（永久）重定向从我网站的旧域返回到新域。我在这里描述了细节：

[http://joey.aghion.com/simple-301-redirects/](http://joey.aghion.com/simple-301-redirects/)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-09-25T04:02:22.173

Jekyll 在过去几个月中经历了一些重大更新，所以当这个问题最初发布时，这可能是不可能的......

Jekyll 支持您博客文章的[YAML 前端部分](http://jekyllrb.com/docs/frontmatter/)`permalink`中的属性。您可以指定您希望您的帖子拥有的 URL，Jekyll 将在生成您的站点时使用该 URL（而不是文件名）。

```
---
title: My special blog post
permalink: /programovani/2010/04/git-co-to-je-a-co-s-tim
---
My blog post markdown content 
```

# javascript - 如何将全局范围变量引用到本地范围？

> ID：10178307
> 
> 赞同：4
> 
> 时间：2012-04-16T16:51:44.163
> 
> 标签：javascript

```
var b=1;

function someFunc(b) {
     //here 
} 
```

我希望能够引用在函数外部定义的变量 b。这怎么能在javascript中完成？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-16T16:53:13.453

您需要通过浏览器和node.js`global object`中的 访问它。`window``global`

```
var b=1;

function someFunc(b) {
    alert( window.b ); // or console.log( global.b );
} 
```

为什么 ？好吧，所谓的*Activation Object*（在 ES3 中）或*Lexical Environment Record* (ES5) 将与变量 name 重叠`b`。因此，任何时候 JS 引擎解析`b`它都会在第一次出现时停止，这是在它自己的 Scope 中。

# php - 使用 SSH 和 CHMOD 更改文件权限以允许文件上传

> ID：10178308
> 
> 赞同：4
> 
> 时间：2012-04-16T16:51:48.523
> 
> 标签：php, mysql, ssh, chmod

```
 Warning: move_uploaded_file(activities.png): 
failed to open stream:
 Permission denied in /var/www/vhosts/default/htdocs/backoffice/db/changelogo.php on line 17
Warning: move_uploaded_file():
 Unable to move '/tmp/phpTNQXEi' to 'activities.png' in /var/www/vhosts/default/htdocs/backoffice/db/changelogo.php on line 17 
```

因此，由于此 .php 脚本的文件权限不正确，我被拒绝了权限。

如何允许文件上传而不是获得使用 SSH（或 SFTP）拒绝的权限来获得允许图像上传的权限。

这是供参考的php脚本：

```
 <?php
include 'realtydevkit.php';
session_start();

umask(0077);

$name = $_FILES['yourlogo']['name'];
$tmpname = $_FILES['yourlogo']['tmp_name'];
$error = $_FILES['yourlogo']['error'];

ini_set("display_errors", 1);

echo $error;

if ($name) {
    $directory = $name;
    $userid = $_SESSION['userid'];
    $type = "logo";

    $file = move_uploaded_file($tmpname, $directory);

    if ($file) {    
    mysql_query("INSERT INTO usercontent
    (`userid`, `type`, `url`) VALUES
    ('$userid', '$type', '$directory')");
    echo 'Uploaded';
    echo "<img src='".$directory."'/>";
    } else {
    echo 'There was an error moving the file.';
    }

    chmod($directory, 0644);
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T17:37:21.907

这里真正的问题是文件一开始就没有以适当的权限写入。我怀疑您没有`umask`提前在应用程序中设置您的：

我会小心这个设置，因为通过在任何给定的上传文件上设置全局读/写很容易为自己创建安全问题。采取通常的安全预防措施，也许只对网络用户设置读/写，而不是在公共目录中。甚至可以设置一个按需运行或即时运行的作业，为您移动这些作业以减少您的安全威胁。

从文档中的评论，快速的操作方法：

```
<?php
// files will create as -rw-------
umask(0077);

// create a file, eg fopen()

// give access: -rw-r--r--
chmod('/path/to/file', 0644);
?> 
```

文档中的更多信息：

[http://php.net/manual/en/function.umask.php](http://php.net/manual/en/function.umask.php)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-16T17:37:34.913

您可能会使用 PHP 的[内置](http://php.net/manual/en/function.chmod.php) `chmod()`函数。

这将允许您更改要将文件传输到的文件夹的权限。移动文件后，您始终可以将其 chmod 恢复。

或者，您可以在任何人访问您的站点之前手动简单地更改文件夹。

在处理驻留在服务器中的文件和文件夹的权限时请小心。这些文件可能可以从外部世界访问，并且设置非常开放的权限（例如 0777）将允许任何脚本或任何人创建、删除和更改该文件夹中的文件。

# php - 如何使用 PHP 从 MyMemory 翻译中解析 JSON？

> ID：10178310
> 
> 赞同：0
> 
> 时间：2012-04-16T16:51:55.803
> 
> 标签：php, json, translation

由于 Google Translate API 不再免费，我尝试从[http://mymemory.translated.net/doc/spec.php获取翻译](http://mymemory.translated.net/doc/spec.php)

例如我的 PHP 页面

```
header("Cache-Control: no-cache");
header("Pragma: no-cache");
header('Content-type: application/json');
$_POST['value']=="Hello everybody";
// URI to get italian from english
$translate_it=json_decode(file_get_contents("http://mymemory.translated.net/api/get?q=".$_POST['value']."&langpair=en|it")); 
```

我不是对象开发人员，也不知道如何访问数据...

我怎样才能从中只获得“翻译”字段？ [http://mymemory.translated.net/api/get?q=Hello%20everybody&langpair=en|it](http://mymemory.translated.net/api/get?q=Hello%20everybody&langpair=en|it)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T16:56:11.613

您收到错误是因为您正在使用`echo`.

要查看内容，请尝试使用：

```
var_dump($translate_it); 
```

使用新 json 变量的一种方法是这样

```
$translate_it->responseData; 
```

这是一个翻译：

```
echo $translate_it->matches[0]->translation; 
```

**更新：**

您可以使用 for each 循环匹配：

```
foreach ($translate_it->matches[0] as $obj){
   echo $obj->translation;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T16:58:57.193

[json_decode](http://uk3.php.net/manual/en/function.json-decode.php)会，但默认返回一个对象 - `stdClass`。第二个（可选）参数将让它返回一个数组。无论哪种方式，它都不仅仅是一个简单的字符串，当它被解码时。

`print_r($translate_it)`，或`var_dump($translate_it)`将显示对象或数组的结构。

# c++ - 在 C++ 行中读取不同的数据类型

> ID：10178311
> 
> 赞同：1
> 
> 时间：2012-04-16T16:51:57.170
> 
> 标签：c++, binaryfiles

我从 C++ 开始，我需要读取一个二进制文件。

我知道文件的结构，即每个文件行由以下组成：

```
'double';'int8';'float32';'float32';'float32';'float32';'float32';'float32';'int8';'float32';'float32';'float32';'float32';'int8';'float32' 
```

或字节数：

```
8 1 4 4 4 4 4 4 1 4 4 4 4 1 4 
```

我做了一些代码，但太过时了......这是代码：

```
void test1 () {
const char *filePath = "C:\20110527_phantom19.elm2";    
double *doub;           
int *in;
float *fl;
FILE *file = NULL;     
unsigned char buffer;

if ((file = fopen(filePath, "rb")) == NULL)
    cout << "Could not open specified file" << endl;
else
    cout << "File opened successfully" << endl;

// Get the size of the file in bytes
long fileSize = getFileSize(file);
cout << "Tamanho do ficheiro: " << fileSize;
cout << "\n";
// Allocate space in the buffer for the whole file
doub = new double[1];
in = new int[1];
fl = new float[1];
// Read the file in to the buffer
//fread(fileBuf, fileSize, 1, file);

//fscanf(file, "%g %d %g", doub[0],in[0],fl[0]);

fread(doub, 8, 1, file);
//cout << doub[0]<< " ";
fseek (file ,8, SEEK_SET);
fread(&buffer,1,1,file);
//printf("%d ",buffer);
fread(fl,4,1,file);
//cout << fl[0]<< " ";
fread(fl,4,1,file);
//cout << fl[0]<< " ";
fread(fl,4,1,file);
//cout << fl[0]<< " ";
fread(fl,4,1,file);
//cout << fl[0]<< " ";
fread(fl,4,1,file);
//cout << fl[0]<< " ";
fread(fl,4,1,file);
//cout << fl[0]<< " ";
fread(&buffer,1,1,file);
//printf("%d ",buffer);
fread(fl,4,1,file);
//cout << fl[0]<< " ";
fread(fl,4,1,file);
//cout << fl[0]<< " ";
fread(fl,4,1,file);
//cout << fl[0]<< " ";
fread(fl,4,1,file);
//cout << fl[0]<< " ";
fread(&buffer,1,1,file);
//printf("%d ",buffer);
fread(fl,4,1,file);
//cout << fl[0]<< "\n";

cin.get();
//delete[]fileBuf;
fclose(file); 
} 
```

我怎样才能将其更改为有效的方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T16:55:54.600

当您可以使用自定义格式轻松读取整个结构并让字段自动填充正确的值时，问题是什么？

```
struct MyDataFormat {
  double d;
  int8 i1;
  float32 f[6];
  ..
};

MyDataFormat buffer;

fread(&buffer, sizeof(MyDataFormat), 1, file); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T17:51:11.440

除了文件的“结构”之外，我们还需要知道所涉及的数据类型的格式，以及如果格式不是文本格式，您所说的“行”是什么意思。然而，一般来说，您将 1) 必须读取一个适当大小的块，然后根据指定的格式从中提取每个值。对于整数值，使用移位提取无符号整数值相当容易；对于`int8`，实际上，您只需要读取字节即可。对于大多数机器，只需将无符号整数转换为相应大小的有符号类型即可，尽管这并不能明确保证；如果`unsigned char` 大于`CHAR_MAX`，则必须按比例缩小以获得
适当的值：类似的东西`-(UCHAR_MAX+1 - value)`应该可以解决问题（对于`char`s——对于较大的类型，您还必须担心`UINT_MAX+1`会溢出的事实）。

*如果*外部格式是 IEEE，并且这也是您的机器使用的（Windows 和 Unix 机器的常见情况，但大型机很少使用这种情况），那么您可以读取无符号的 4 或 8 字节整数（同样，使用移位），并键入双关语，例如：

```
uint64_t
get64BitUInt( char const* buffer )
{
    return reinterpret_cast<double>(
          ((buffer[0] << 52) & 0xFF)
        | ((buffer[1] << 48) & 0xFF)
        | ((buffer[2] << 40) & 0xFF)
        | ((buffer[3] << 32) & 0xFF)
        | ((buffer[4] << 24) & 0xFF)
        | ((buffer[5] << 16) & 0xFF)
        | ((buffer[6] <<  8) & 0xFF)
        | ((buffer[7]      ) & 0xFF) );
}

double
getDouble( char const* buffer )
{
    uint64_t retval = get64BitUInt( buffer );
    return *reinterpret_cast<double*>( &retval );
} 
```

（这对应于通常的网络字节顺序。如果您的二进制格式使用另一种约定，则必须对其进行调整。并且 `reinterpret_cast`取决于实现定义的行为；您可能必须将其重写为：

```
double
getDouble( char const* buffer )
{
    union
    {
        double          d;
        uint64_t        i;
    }               results;
    results.i = get64BitUInt( buffer );
    return results.d;
} 
```

. 甚至用于`memcpy`从 a 复制`uint64_t`到 a`double`中。）

如果您的机器不使用 IEEE 浮点，并且外部格式是 IEEE，您必须将 8 字节字作为 8 字节 unsigned int ( `unsigned long long`)，然后根据 IEEE 提取符号、指数和尾数格式; 类似于以下内容：

```
double
getDouble( char const* buffer )
{
    uint64_t            tmp( get64BitUInt( buffer );
    double              f = 0.0 ;
    if ( (tmp & 0x7FFFFFFFFFFFFFFF) != 0 ) {
        f = ldexp( ((tmp & 0x000FFFFFFFFFFFFF) | 0x0010000000000000),
                   (int)((tmp & 0x7FF0000000000000) >> 52) - 1022 - 53 ) ;
    }
    if ( (tmp & 0x8000000000000000) != 0 ) {
        f = -f ;
    }
    return f;
} 
```

但是，在确定需要它之前不要这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T16:55:07.760

如果每一行都是相同的格式，我可能会一次将一行读入缓冲区，然后有一个函数将该缓冲区分成单独的元素 - 更容易理解，更容易测试，适用于更大的文件并且可能更有效做更少的读取。

# regex - 正则表达式删除所有双（或更多）字母-> preg_replace

> ID：10178312
> 
> 赞同：0
> 
> 时间：2012-04-16T16:51:58.507
> 
> 标签：regex, preg-replace

直升机，

我有这个正则表达式来删除字符串上的双字母：

```
<?
$string = "Heeeeelloo";
echo preg_replace( '`(.*)\1`', '$1',$string)."\n"; 
```

当前结果是：Heeelo

但我想要这个结果：Helo

怎么了 ？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T16:53:23.853

做就是了：

```
preg_replace( '`(.)\1+`', '$1',$string); 
```

# python - Django 没有在 virtualenv 中使用正确的 Python 实例

> ID：10178313
> 
> 赞同：0
> 
> 时间：2012-04-16T16:52:01.610
> 
> 标签：python, django, virtualenv

我已经创建了一个用于在 Django 中开发的 virtualenv，但是 Django 没有使用正确的 Python 实例。这是我发现的：

1.  `C:\Python27`不在我的路上。如果我`python`从命令提示符运行它说它无法识别

2.  当我启动 virtualenv 时，运行 python 并检查`sys.executable`它是否指向 virtualenv 的 python 实例并且`sys.path`也指向正确的位置

3.  当我`manage.py shell`从 virtualenv 中运行并检查它们时`sys.executable`，`sys.path`它们都指向`C:\python27`安装

关于发生了什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T16:57:29.730

你是跑步`./manage.py shell`还是`python manage.py shell`？它可以有所作为。

使用该`./`版本对解释器使用 shebang 行，通常会导致使用系统级解释器。正如您所见，运行`python`使用 virtualenv 的版本，`python manage.py shell`也应该如此。

# java - 如何在 JtextPane 或 StringBuffer 中对齐文本

> ID：10178315
> 
> 赞同：0
> 
> 时间：2012-04-16T16:52:10.753
> 
> 标签：java, swing, jtextpane, text-alignment, stringbuffer

我正在使用 JTextPane 并希望对齐从 StringBuffer 收到的文本结果。运行结果的线程返回一个包含所有请求结果的字符串，然后在另一个线程中，我将数据放在 JTextPane 中。

获取结果（字符串）的代码如下所示：

```
 info.append("\n\nResult:\n");

    for (TResult result : results)
        info.append(result.getID());

    info.append("\n");

    for (TResult result : results)
        info.append(result.getApprovalDateStr+"              "); //the space is used for the alignment 

    info.append("\n");

    for (TResult result : results)
        info.append(result.getState+","+result.getCity()+"                 "); 
```

显然，取决于州/城市的长度，屏幕上的结果是不一致的。任何人都可以指出应该使用什么来整齐地对齐它。这可以使用 StringBuffer 或稍后在 JTextPane 中完成。

谢谢

下面是所需结果的屏幕截图。

![在此处输入图像描述](../Images/0cf305e5f13450772e66449fb2526c77.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T18:03:08.570

称呼

```
textPane.setContentType("text/html"); 
```

并使用 html 表：

```
info.append("<html><table>");

for (TResult result : results)
    info.append("<tr><td>"+result.getID()+"</td><td>"+result.getApprovalDateStr+"</td><td>"+result.getState+","+result.getCity()+"</td></tr>");

info.append("</table></html>");

//then
textPane.setText(info.toString()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T17:02:06.883

定义一个辅助函数：

```
private void log(StringBuilder buffer, String data, int numberOfSpaces) {
    buffer.append(String.format("%" + numberOfSpaces + "s", data));
} 
```

然后：

```
for (TResult result : results)
    log(info, result.getID(), 30);

info.append("\n");

for (TResult result : results)
    log(info, result.getApprovalDateStr, 30);

info.append("\n");

for (TResult result : results)
    log(info, result.getState+","+result.getCity(), 30); 
```

# perl - Term::ReadKey::ReadKey：为什么 MS Windows 的行为与 Linux 不同？

> ID：10178317
> 
> 赞同：0
> 
> 时间：2012-04-16T16:52:32.390
> 
> 标签：perl, keyboard, terminal

[术语::ReadKey](http://search.cpan.org/perldoc?Term%3a%3aReadKey) :

```
#!/usr/bin/env perl
use warnings;
use 5.012;
use Term::ReadKey;

my $key;

ReadMode 4;
print "Enter a key: ";
$key = ReadKey();
printf "|%s|\n", $key // 'undef';
$key = ReadKey(-1);
printf "|%s|\n", $key // 'undef';
$key = ReadKey(-1);
printf "|%s|\n", $key // 'undef';
ReadMode 0;

say "END"; 
```

当我在 Windows 或 Linux 上运行此脚本时，`k`我会两次得到此输出：

```
Enter a key: |k|  
|undef|  
|undef|  
END 
```

当我按下`Up`“键”时，我得到

```
Enter a key: |  
|[|  
|A<  
END 
```

在 Linux 上，但在 Windows 上，脚本会停止：

```
Enter a key: 
```

为什么我到这里不是一些奇怪的迹象而是？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T17:08:12.337

简而言之，Term::ReadKey 假定 Unixy 终端，Windows 不提供（除非您使用 Cygwin）。

你可以试试[Win32::Console](http://search.cpan.org/~jdb/Win32-Console-0.09/Console.pm)。或者可能有一些咒语可以让 Term::ReadKey 工作——祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T19:20:23.527

您无法从为您提供字符的界面中获取密钥。这就是为什么你有一大堆东西一个键。

在 unix 方面，键被转换为终端特定的内联转义序列，您必须自己弄清楚。

在 Windows 中，您可以自己获取密钥，但显然不能像显然那样从为您提供字符的界面中获取`ReadKey`。

我最近[展示](https://stackoverflow.com/questions/10172253/how-to-read-in-special-keys-with-win32console)了如何在 Windows 中获取密钥。不知道如何在unix中这样做。

# windows-phone-7 - windows phone api访问内置警报

> ID：10178318
> 
> 赞同：0
> 
> 时间：2012-04-16T16:52:33.047
> 
> 标签：windows-phone-7, alarm

是否有任何 api 可以访问 windows phone 7 设备的警报设置。我不是要创建新警报，而是要访问默认警报应用程序的设置。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T18:11:12.113

不，没有。如果你很了解 7.0，你可以查看 7.1 中添加的新功能，看看是否添加了你想要的功能：

[http://msdn.microsoft.com/en-us/library/ff637516(v=VS.92).aspx](http://msdn.microsoft.com/en-us/library/ff637516(v=VS.92).aspx)

# java - 使用 SQLite 进行数据收集

> ID：10178322
> 
> 赞同：0
> 
> 时间：2012-04-16T16:52:48.227
> 
> 标签：java, android, database, sqlite, android-sdcard

我对 android 和 SQL 很陌生。我正在制作一个应用程序，它可以从加速度计获取数据，并将它们存储在 SQLLite 数据库中。之后我打算把数据库拿出来，这样我就可以绘制数据了。我有两个问题：

1.  如何将数据保存为 SD 卡上的可用文件？我已经看到了一些主题，但我无法摆脱它的工作。我想我需要一些例子/教程。

2.  其次，经过一些收集后，应用程序开始滞后。我猜是存储方法，在 DB-class 中是这样的：

    ```
    public long createEntry(float x, float y, float z, float t) {
    ContentValues cv = new ContentValues();
    cv.put(X_DATA,x);
    cv.put(Y_DATA,y);
    cv.put(Z_DATA,z);
    cv.put(TIME_DATA,t);
    return ourDatabase.insert(DATABASE_TABLE, null, cv);
    } 
    ```

我希望你能帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T17:25:48.320

对于您问题的第一部分，在事务中执行所有插入应该会使其更快。为此，在开始插入之前，请调用以下代码：

```
ourDatabase.beginTransaction() 
```

然后，一旦您完成插入数据，请调用：

```
ourDatabase.setTransactionSuccessful();
ourDatabase.getDb().endTransaction(); 
```

要回答问题的第二部分，您需要从数据库中检索数据并从中创建一个 CSV 文件：

```
 StringBuilder csv = new StringBuilder();

        Cursor cursor = this.db.query("Data", new String[] { "x","y", "z", "t" }, null, null, null, null, null);

        while (cursor.moveToNext()) {
            csv.append(cursor.getFloat(0))
            .append(",")
            .append(cursor.getFloat(1))
            .append(",")
            .append(cursor.getFloat(2))
            .append(",")
            .append(cursor.getFloat(3))
            .append("\n");
        }

cursor.close();

        File outputFile = new File("/sdcard/mycsv.csv");

        FileWriter writer;
        try {
            writer = new FileWriter(outputFile);

            writer.write(csv.toString());

            writer.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

如果您要收集很多行（可能是数万行），您可能需要在写入的同时将此 CSV 流式传输到磁盘。

# java - OSX JNLP 下载未达到 KeyChain 上的证书

> ID：10178327
> 
> 赞同：0
> 
> 时间：2012-04-16T16:52:52.563
> 
> 标签：java, macos, ssl, jnlp, keychain

如果 Tomcat 服务器（在 Linux 上）以 client-authentication=on (org.jboss.web.connector.ssl.client-auth=true) 运行，那么客户端 (OSX 1.7.3) 可以下载 JNLP（在浏览器中)，但是 java-webstart 不能下载任何东西，甚至 JNLP 也不能，只显示一个空的证书选择对话框。

证书是**自签名**的。CA 和客户端证书被导入 OSX 的 KeyChain (ca->system, client+key->login)

调试问题似乎是苹果的 JNLP Java 接口试图以错误的方式到达 OSX 的 KeyChain 密钥库，没有密码（*参见下面的示例）

我基于调试JNLP下载（在OSX上）上的运行代码制作了一个小程序。

```
import java.security.Key;
import java.security.KeyStore;
import java.security.cert.Certificate;
import java.security.cert.X509Certificate;
import java.util.Enumeration;

import javax.net.ssl.KeyManager;
import javax.net.ssl.KeyManagerFactory;
import javax.net.ssl.X509KeyManager;

public class OSXKeyChainTest {

/**
 * Demonstrating issue in OSX-JNLP-Java interface, the keys from the
 * KeyChain are not accessed during JNLP downloading phase. But if it would
 * use any password it would work (see the FIXME line). This small test
 * program is based on the debugging works on OSX 1.7.3.
 */
public static void main(String[] args) throws Exception {

    KeyStore ks = KeyStore.getInstance("KeyChainStore", "Apple");
    ks.load(null, new char[0]);
    KeyManagerFactory keyManagerFactory = KeyManagerFactory.getInstance("SunX509", "SunJSSE");

    // FIXME !!!! try it with ANY password, and it will work, eg. = new char[] {'x'};
    char[] password = new char[] {};

    // as AppleX509DeployKeyManager.getBrowserKeyManager() does
    keyManagerFactory.init(ks, password);

    X509KeyManager localX509KeyManager = null;
    KeyManager[] arrayOfKeyManager = keyManagerFactory.getKeyManagers();

    int i = 0;
    while (i < arrayOfKeyManager.length) {
        if ((arrayOfKeyManager[i] instanceof X509KeyManager)) {
            localX509KeyManager = (X509KeyManager) arrayOfKeyManager[i];
            break;
        }

        i++;
    }

    for (Enumeration<String> t = ks.aliases(); t.hasMoreElements();) {
        String alias = t.nextElement();
        System.out.println("@Alias: " + alias);
        if (ks.isKeyEntry(alias)) {
            System.out.println("It's a key entry");
            for (Certificate c : ks.getCertificateChain(alias)) {
                X509Certificate x509 = (X509Certificate) c;
                System.out.println(x509.getSubjectDN().toString());
                System.out.println("SN: " + x509.getSerialNumber());
            }

            // as SunX509KeyManagerImpl does
            Key localKey = ks.getKey(alias, password);
            System.out.println("Localkey: " + localKey);
        }
    }

    System.out.println("--------------------------------");
    System.out.println("It should be not null!: " + localX509KeyManager.getPrivateKey("client"));
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T17:50:45.363

不确定这是否能解决您的问题，但您应该注意以下几点：

*   `KeychainStore`旨在使用任何密码。

    实际授权应该由 OSX 的安全守护进程处理。当您要使用私钥时，应该会出现一个弹出窗口并询问类似“您要允许此应用程序使用此私钥签名吗？”的内容。如果你没有得到这样的提示，你可能已经授权应用程序在没有提示的情况下使用密钥，这个设置可以在`Keychain.app`.

    （在某种程度上，它类似于带有键盘的硬件令牌，希望您输入 PIN 码，而无需与 Java 进行任何交互。）

*   如果您的钥匙串中有多个身份（证书 + 相应的私钥），[则存在一个错误，即`KeychainStore`无论如何只能看到一个](http://lists.apple.com/archives/java-dev/2007/Aug/msg00278.html)。（上次我检查时，这还没有解决。）

*   Safari 在客户端证书选择方面存在许多问题（并不总是提供选择，您必须事先手动进行身份配置，或者只有在服务器拒绝没有客户端证书的连接时才会这样做：Apache Httpd`SSLVerifyClient optional`不会不行）。我不确定这些问题是否已得到解决。

*   如果您使用的是自签名客户端证书，您应该配置 Tomcat 以将其宣传为接受的颁发者，或者它应该发送一个空列表。尽管后者由 TLS 1.1 明确授权，但我不确定 OSX 在客户端的行为方式。

# c# - 保存添加额外的小数位

> ID：10178328
> 
> 赞同：2
> 
> 时间：2012-04-16T16:52:56.013
> 
> 标签：c#, .net, entity-framework, decimal, savechanges

我有一个定义为十进制（9,9）的数据库字段。C# 中的 edmx 模型将此字段映射到精度和小数位数为 9 的十进制变量。

我将数字 5 放入变量中。我可以检查的所有地方都将值显示为 5（在局部变量、实体类实例、数据上下文等中）。

此时的`DataContex.SaveChanges()`值被转换为“5.000000000”。尽我所能告诉实体框架在尝试保存到数据库之前将值添加 9 个小数位。这会导致错误，因为该值现在有太多数字。

有谁知道是什么导致了这种行为以及如何改变它？

**附加信息**- 我首先在 Microsoft SQL 2008 R2 中创建我的数据库。然后我从数据库中生成了实体框架模型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T18:24:11.423

如果您确实已经`decimal(9,9)`在数据库中定义了数据类型，那么您就有问题了。
根据[微软](http://msdn.microsoft.com/en-us/library/ms187746.aspx)的说法，第一个数字是总位数，第二个数字是小数点右边的位数。
所以你真的只能在这样的字段中存储低于 1 的数字，格式为`.123456789`. 如果需要存储 5，则需要不同的格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T17:01:02.553

这不是实体框架特有的，而是精度定义为 9 的小数（映射回您的数据库）。因此，当您输入 5 时，由于数据的定义方式，小数点后将添加 0。

这是在 .NET 1.1 中实施的，以符合标准（我忘记是哪个标准了）。出于显示目的，您始终可以使用 Math.Round 来删除一定程度的精度（或根据您的实际需要以不同的方式定义数据）。

# .net - PRISM + Unity - 加载动态模块集的问题

> ID：10178335
> 
> 赞同：2
> 
> 时间：2012-04-16T16:53:29.390
> 
> 标签：.net, wpf, prism, unity-container

我不断收到以下错误，一直无法弄清楚。我想知道是否有人可以提供帮助。

**错误：** 无法加载模块 MyExternalAssembly.MyNamespace.MyModule 的类型。

如果在 Silverlight 应用程序中使用 MEF 时发生此错误，请确保对 MefExtensions 程序集的引用的 CopyLocal 属性在主应用程序/shell 中设置为 true，在所有其他程序集中设置为 false。

错误是：无法从加载的程序集中检索模块类型 MyExternalAssembly.MyNamespace.MyModule、MyExternalAssembly.MyNamespace、Version=1.0.0.0、Culture=neutral、PublicKeyToken=null。您可能需要指定更完全限定的类型名称..

**代码：**

加载屏幕（加载模块，存储用于各种用途的程序集参考）

```
 string[] dynamicLibraries = Directory.GetFiles(pluginDirectory, "*.dll", SearchOption.AllDirectories);

    // Parse through the DLL's and look for types that implement "IModule".
    foreach (string file in dynamicLibraries)
    {
        // Get the plugin assembly information.
        Assembly plugin = Assembly.LoadFile(file);

        // Get all types that are exported for plugins.
        IEnumerable<Type> modules = plugin.GetTypes()
            .Where(t => typeof(IModule).IsAssignableFrom(t));

        if (modules.Count() > 0)
        {
            ApplicationState.Instance.Plugins.Add(plugin, modules);
        }
    } 
```

这是 ConfigureModuleCatelog 方法

```
protected override void ConfigureModuleCatalog()
{
    base.ConfigureModuleCatalog();

    ModuleCatalog catalog = (ModuleCatalog)this.ModuleCatalog;

    foreach (var assembly in ApplicationState.Instance.Plugins)
    {
        foreach (var type in assembly.Value)
        {
            this.ModuleCatalog.AddModule(new ModuleInfo
            {
                ModuleName = type.FullName,
                ModuleType = type.AssemblyQualifiedName,
                Ref = new Uri(assembly.Key.Location, UriKind.RelativeOrAbsolute).AbsoluteUri,
                InitializationMode = InitializationMode.WhenAvailable
            }); 
        }
    }
} 
```

基本上，我需要一种方法来维护/使用这个“插件”字典并让模块化正确地 wprk。和想法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T17:53:23.690

我很困惑。您说 Unity，但您的代码使用 MEF 类型。如果您使用的是 MEF，为什么要手动查找`IModule`实现 - 您应该使用 MEF 为您进行动态解析。

# facebook - 服务条款和隐私政策 URL 可以本地化吗？

> ID：10178336
> 
> 赞同：3
> 
> 时间：2012-04-16T16:53:29.803
> 
> 标签：facebook, url, localization, facebook-apps

Facebook 应用程序的身份[验证对话框设置表单](https://developers.facebook.com/docs/opengraph/authentication/#configure)具有必须包含 URL 的字段，包括“隐私政策 URL”和“服务条款 URL”。

这些可以本地化吗？我知道该字段的名称已由 Facebook 本地化，但是否可以根据用户的区域设置提供不同的 URL？

我没有看到 URL 在翻译工具中显示为可翻译的字符串。

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-18T18:07:15.010

您还应该尝试通过 GeoIP 获取用户的地理位置或位置，并根据其所在地区显示不同的语言，如果您无法访问他的地理位置，则以英文显示标准策略。

# sql - 代替触发器，它会无限循环吗？

> ID：10178340
> 
> 赞同：15
> 
> 时间：2012-04-16T16:53:52.537
> 
> 标签：sql, sql-server, tsql, triggers

具有“INSTEAD OF”触发器的表上的插入语句会导致无限的“相反，插入”执行循环吗？

例如这个：

```
CREATE TRIGGER setDescToUpper ON part_numbers
INSTEAD OF INSERT

AS
BEGIN
    INSERT INTO part_numbers (
        colA,
        colB,
        part_description
    ) SELECT
        colA,
        colB,
        UPPER(part_description)
    ) FROM
        INSERTED
END
GO 
```

“代替”触发器内的插入语句会导致循环吗？

我不想禁用递归触发器。

我需要暂时禁用触发器吗？

来源：[SQL Server - 插入触发器后 - 更新同一张表中的另一列](https://stackoverflow.com/questions/5341584/sql-server-after-insert-trigger-update-another-column-in-the-same-table/5341675#5341675)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-16T17:03:54.173

此 INSERT 不会重新调用触发器。

SQL Server 不会递归调用 INSTEAD OF 触发器，这正是您提出的原因。

# java - 如何从谷歌搜索中获取前 5 个链接的列表？

> ID：10178344
> 
> 赞同：1
> 
> 时间：2012-04-16T16:54:23.253
> 
> 标签：java

我需要从有关特定主题的用户查询中获得的前 5 个链接的列表。有什么方法可以做到这一点吗？如何获取谷歌搜索的前 5 个链接？是否有任何可用的 API？一些演示示例会有所帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T17:01:09.310

Google 确实提供了一个[用于搜索的 API](https://developers.google.com/custom-search/v1/overview)。你必须：

1.  获取/使用您的 Google 帐户
2.  [注册一个 API 密钥](http://code.google.com/apis/console/?api=customsearch)（遗憾的是，他们每天只允许 100 次免费搜索）
3.  [在此处](http://javadoc.google-api-java-client.googlecode.com/hg/apis/customsearch/v1/index.html)查看他们用于自定义搜索的[Java 示例](http://code.google.com/p/google-api-java-client/wiki/APIs#CustomSearch_API)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T17:01:47.837

您可以使用 JSoup，它是一个 Java HTML 解析器。

我建议学习 DOM，会让你的生活更轻松。[http://jsoup.org/cookbook/extracting-data/dom-navigation](http://jsoup.org/cookbook/extracting-data/dom-navigation)

# google-apps-script - google-docs api 的数据类型和控制结构

> ID：10178359
> 
> 赞同：1
> 
> 时间：2012-04-16T16:55:44.320
> 
> 标签：google-apps-script

我正在为我的办公室创建一个用于 Google Docs 电子表格的 Google 应用程序。我可以找到电子表格和 UI 元素的教程，但没有一个包资源可以描述 google-docs 脚本使用的数据类型和控制结构。我的背景是 python，所以我期待 python 在 google-docs 中使用的列表和其他相关数据类型。有人可以建议我一个地方或一个链接，在那里我可以找到有关 google-docs 脚本数据类型和控制结构的所有相关信息吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T19:28:39.403

Apps Script 使用 JavaScript，因此对于数据类型和控制结构，您可以查看任何 JavaScript 参考。[MDN](https://developer.mozilla.org/en/JavaScript/Reference)就是一个例子。

对于 Apps 脚本特定的类和方法，您可以在[此处](https://developers.google.com/apps-script/defaultservices)查看 API 参考文档。

# ruby-on-rails - 测试中的 Rails 资产管道调试

> ID：10178361
> 
> 赞同：0
> 
> 时间：2012-04-16T16:55:55.267
> 
> 标签：ruby-on-rails, ruby-on-rails-3, cucumber, asset-pipeline

我在 config/environments/test.rb 中有以下内容：

```
config.assets.debug = true
config.assets.enabled = true 
```

我将所有 js 文件连接到 application.js

但是，当我在开发中做同样的事情时，我会得到自己包含的 javascript 文件。

有没有办法让测试（我正在使用黄瓜）表现得像开发？我问的原因是因为我希望能够修改 javascript 并立即运行我的黄瓜测试，而不必每次都进行 rake assets:precompile RAILS_ENV=test。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T09:59:53.463

我发现我有一个愚蠢的硬编码行：

我有以下代码，我建议你永远不要将 :debug 选项传递给 javascript_include_tag，而是在你的 development.rb 和 test.rb 中配置所有内容。

```
<!-- watch out when passing the :debug option to javascript_include_tag -->
<%= javascript_include_tag "application", :debug => (Rails.env == "development") %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T17:20:20.243

在您的 application.rb 文件中，您可能需要将 test 添加到以下行：

Bundler.require(*Rails.groups(:assets => %w(开发测试)))

# objective-c - 解析 BST 时区

> ID：10178364
> 
> 赞同：0
> 
> 时间：2012-04-16T16:56:05.733
> 
> 标签：objective-c, ios, timezone, nsdateformatter

我在解析以“BST”为时区的日期时遇到问题。

这是日期：`2012-04-22 16:00:00 BST`

这是我的代码

```
NSDateFormatter * formatter = [[NSDateFormatter alloc] init];
[formatter setLocale:[[NSLocale alloc] initWithLocaleIdentifier:@"en_GB"]];
[formatter setDateFormat:@"yyyy-MM-dd HH:mm:ss ZZZ"];
NSDate * matchDate = [formatter dateFromString:dateStr]; 
```

例如，这适用于 GMT，但对于 BST，我得到了零，有什么线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T17:36:27.827

BST 是一种被视为[metazone](http://unicode.org/reports/tr35/tr35-10.html#Date_Format_Patterns)的日期格式，因此您应该使用`V`语法对其进行解析。

我建议将您的解析字符串更改为：

```
[formatter setDateFormat:@"yyyy-MM-dd HH:mm:ss V"]; 
```

在 ZZZ 周围使用引号意味着解析器应该期待*文本*ZZZ，而不是时区

# c - 为什么要为该数组中的第一个元素打印垃圾？

> ID：10178369
> 
> 赞同：0
> 
> 时间：2012-04-16T16:56:18.010
> 
> 标签：c, string

```
 #include <stdio.h>
  #include<string.h>
  #include<stdlib.h>

  int main()
  {
     char *words[] = {"mHello", "kWorld", "kHow", "9Are", "3You?"};
     char **parsed = malloc(5);
     int i;
     for (i = 0; i < 5; i++)
     {
        int n = strlen(words[i]);
        parsed[i] = malloc(n);
        strncpy(parsed[i], words[i] + 1, n);
        printf("[%s] ", parsed[i]); 
     }
     printf("\n----------------------\n");
     for (i = 0; i < 5; i++)
       printf("[%s] ", parsed[i]);
         return 0;
  } 
```

`parsed[i]`包含`words[i]`没有第一个字符。

输出是

```
 [Hello] [World] [How] [Are] [You?]
 ----------------------
 [▒▒ o] [World] [How] [Are] [You?] 
```

为什么第一个 printf 调用可以`parsed[0]`正常工作，而第二个不能正常工作？

此外，如果我从中删除一个元素`words`，则此代码可以正常工作。到底是怎么回事 ？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-16T16:58:40.307

您`malloc`没有为指向字符串的指针分配正确的空间，它应该是

```
parsed = malloc(sizeof(char*)*5) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T16:59:32.387

对于初学者来说，对于`**parsed`存储在那里的所有指针来说都不够大。应该分配

```
parsed=malloc(sizeof(*parsed)*5); 
```

您可以滚动单个字符串分配并将所有字符串复制到一个中，如下所示：

```
parsed[i]=strdup(words[i]+1); 
```

这也正确处理了字符串长度，现在乍一看似乎可能存在一个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T17:22:18.450

[要添加到其他答案，您可以使用valgrind](http://valgrind.org/)跟踪此类内存错误。

如果您希望您的代码在这些情况下严重失败，另一种工具是[address sanitizer](http://code.google.com/p/address-sanitizer/wiki/AddressSanitizerAlgorithm)。

# python - 如何在 GAE 上过滤图像？

> ID：10178372
> 
> 赞同：2
> 
> 时间：2012-04-16T16:56:31.097
> 
> 标签：python, image, google-app-engine

我正在开发python google app engine应用程序，我正在使用python2.5，我想处理GAE（过滤图像）上的图像，最初我尝试了wit PIL库并且我成功安装了它并且我测试了它并且它可以工作在我的计算机上正确，但是当我在 localhost（在 GAE 上运行）上测试它时，我有一个错误`NotImplementedError: Unable to find the Python PIL library`，然后我尝试使用 Images Python API 处理图像，如本教程中所示：[https ://developers.google.com /appengine/docs/python/images/overview](https://developers.google.com/appengine/docs/python/images/overview)，并且我测试了调整图像大小服务，它工作正常，但我想要的主要应用程序是过滤图像，问题是：如果 GAE 中的图像 Python API 支持此服务（图像过滤）？我在 GAE 上过滤图像？我看到 PIL 中提供了此服务并对其进行了测试，但 GAE 在 python2.5 中不支持此库

**编辑：**

我尝试使用 python2.7 在 GAE 上使用 PIL 库作为[https://developers.google.com/appengine/docs/python/python27/using27#Configuring_Libraries](https://developers.google.com/appengine/docs/python/python27/using27#Configuring_Libraries)，我安装了 PIL 1.1.7，并配置了**app.yaml**文件作为：

```
application: app_id
version: 1
runtime: python27
api_version: 1
threadsafe: false
handlers:
- url: /.*
  script: main.py
libraries:
- name: PIL
  version: "1.1.7" 
```

现在我如何在 main.py 页面中使用这个库？我试过了`from PIL import Image`，但问题仍然是：

```
No module named PIL 
      args = ('No module named PIL',) 
      message = 'No module named PIL' 
```

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T18:26:08.143

使用 python2.5，PIL 本身不可用。内置[图像模块](https://developers.google.com/appengine/docs/python/images/overview)使用类似于 PIL 的 API，并且使用 SDK（在您的计算机上）PIL 用于兼容性，因此您需要安装它。文档（上一个链接）有关于如何在 windows/mac/linux 上执行此操作的说明。

使用 python2.7，您需要将[您的应用程序配置](https://developers.google.com/appengine/docs/python/python27/using27#Configuring_Libraries)为在部署后使用 PIL 的应用程序引擎版本。在本地，您需要在应用程序文件夹之外自己安装 PIL。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T19:57:56.207

没有`import PIL`它的`import Image`

# amazon-ec2 - 列出与特定弹性负载均衡器关联的 EC2 实例的 AWS API 操作？

> ID：10178374
> 
> 赞同：4
> 
> 时间：2012-04-16T16:56:56.100
> 
> 标签：amazon-ec2, amazon-web-services, amazon-elb

我查看了 AWS EC2 和 ELB api，但无法找到一种方法来列出与 Elastic Load Balancer 关联的 EC2 实例。我认为有一种方法可以做到这一点，因为在控制台上很容易做到。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T18:11:29.683

正如预期的那样，这确实可以通过[Elastic Load Balancing API 实现：](http://aws.amazon.com/elasticloadbalancing/)

[DescribeLoadBalancers](http://docs.amazonwebservices.com/ElasticLoadBalancing/latest/APIReference/API_DescribeLoadBalancers.html)操作返回一个*LoadBalancerDescriptions*列表，其中每个[LoadBalancerDescription](http://docs.amazonwebservices.com/ElasticLoadBalancing/latest/APIReference/API_LoadBalancerDescription.html)依次包含一个*Instances*元素，该元素为 LoadBalancer 提供所需*的 EC2 实例 ID 列表*。

# c# - USB HID 在 C# 中的 Read() 上挂起

> ID：10178375
> 
> 赞同：7
> 
> 时间：2012-04-16T16:56:56.040
> 
> 标签：c#, .net, winapi, usb, hid

我正在尝试连接到 USB 数字秤。代码确实连接到规模`scale.IsConnected`，但它挂在`scale.Read(250)`应该是超时的 250 毫秒的位置，但它永远不会从读取返回。

我正在使用[该线程中的代码，但由于](https://github.com/mikeobrien/HidLibrary/issues/17)[Mike O Brien 的 HID 库](https://github.com/mikeobrien/HidLibrary)的新版本导致的一项更改除外：

```
public HidDevice[] GetDevices ()
{
    HidDevice[] hidDeviceList;

    // Metler Toledo
    hidDeviceList = HidDevices.Enumerate(0x0eb8).ToArray();
    if (hidDeviceList.Length > 0)
        return hidDeviceList;

    return hidDeviceList;
} 
```

* * *

我设法让规模工作，看看迈克的答案[在这里](http://stackoverflow.com/questions/5596531/c-sharp-net-get-scale-weight-usb-windows-7-64-bit)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T15:22:29.700

我设法让秤正常工作。在*规模*返回数据时运行的回调中，我正在执行`Read`阻塞调用。

所以造成了死锁，我应该只使用`ReadReport`or `Read`。看看 Mike 在下面发布的[示例](https://github.com/mikeobrien/HidLibrary/issues/17)。

```
using System;
using System.Linq;
using System.Text;
using HidLibrary;

namespace MagtekCardReader
{
    class Program
    {
        private const int VendorId = 0x0801;
        private const int ProductId = 0x0002;

        private static HidDevice _device;

        static void Main()
        {
            _device = HidDevices.Enumerate(VendorId, ProductId).FirstOrDefault();

            if (_device != null)
            {
                _device.OpenDevice();

                _device.Inserted += DeviceAttachedHandler;
                _device.Removed += DeviceRemovedHandler;

                _device.MonitorDeviceEvents = true;

                _device.ReadReport(OnReport);

                Console.WriteLine("Reader found, press any key to exit.");
                Console.ReadKey();

                _device.CloseDevice();
            }
            else
            {
                Console.WriteLine("Could not find reader.");
                Console.ReadKey();
            }
        }

        private static void OnReport(HidReport report)
        {
            if (!_device.IsConnected) {
                return;
            }

            var cardData = new Data(report.Data);

            Console.WriteLine(!cardData.Error ? Encoding.ASCII.GetString(cardData.CardData) : cardData.ErrorMessage);

            _device.ReadReport(OnReport);
        }

        private static void DeviceAttachedHandler()
        {
            Console.WriteLine("Device attached.");
            _device.ReadReport(OnReport);
        }

        private static void DeviceRemovedHandler()
        {
            Console.WriteLine("Device removed.");
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T13:13:19.863

我无法帮助您解决问题，但前一段时间我不得不将脚踏开关集成到应用程序中，我发现这个 USB HID C# 库运行良好：

*[用于 C# 的 USB HID 组件](http://www.codeproject.com/Articles/18099/A-USB-HID-Component-for-C)*

也许您应该尝试一下，因为它非常易于集成。

# vba - 可以将 Access 宏保存为加载项以在另一个 Access 数据库中使用吗？

> ID：10178376
> 
> 赞同：2
> 
> 时间：2012-04-16T16:57:04.233
> 
> 标签：vba, ms-access, add-in

我正在 MS Access 中做一些工作，但遇到了一个相当烦人的障碍。我已经编写了一些代码并创建了一个宏来执行所述代码。我的问题是我希望能够从任何项目中执行这个宏。

截至目前，我可以为新项目运行宏/代码的唯一方法是在代码中创建一个新模块粘贴，然后创建一个新宏来运行所述代码。有没有办法将此宏/代码捕获到插件中或全局保存宏，以便在访问项目打开时随时可用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T18:02:37.867

您可以像创建任何其他引用一样创建对 Access 数据库的引用。完成后，您可以运行它包含的任何代码。

# java - Java 泛型 - 类型参数 String 隐藏了 String 类型

> ID：10178377
> 
> 赞同：9
> 
> 时间：2012-04-16T16:57:15.607
> 
> 标签：java, generics

在我的界面中：

```
public <T> Result query(T query) 
```

在我的第一个子类中：

```
public <HashMap> Result query(HashMap queryMap) 
```

在我的第二个子类中：

```
public <String> Result query(String queryStr) 
```

第一个子类根本没有编译警告，而第二个子类有：类型参数字符串隐藏类型字符串？我知道我的参数被泛型类型隐藏。但我想了解到底发生了什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-16T16:59:17.057

它认为您正在尝试创建一个类型参数——一个*变量*——其名称为`String`. 我怀疑您的第一个子类根本不 import `java.util.HashMap`。

无论如何，如果`T`是你的*接口*的类型参数——它可能应该是——那么你根本不应该`<String>`在子类中包含。它应该只是

```
public interface Interface<T> {
  public Result query(T query);
}

public class Subclass implements Interface<String> {
  ...
  public Result query(String queryStr) { 
    ...
  }
} 
```

# javascript - getJSON 在服务器上不起作用，但在本地起作用

> ID：10178381
> 
> 赞同：0
> 
> 时间：2012-04-16T16:57:33.190
> 
> 标签：javascript, jquery, json, getjson

我将 jQuery 用于级联复选框，但该`getJSON`命令在服务器上不起作用（在本地它工作正常）。它找不到`data.json`文件（请参阅错误调试）。

部分脚本：

```
<script type="text/javascript" src="scripts/jquery-1.7.2.js"></script>
<script>
    $(function() {

        $("#json-one").change(function() {

            var $dropdown = $(this);

            $.getJSON("data.json?callback=?", function(data) {

                var key = $dropdown.val();
                var vals = [];

                switch(key) {
                    case 'BR9':
                        vals = data.BR9.split(",");
                        break;
                    case 'base':
                        vals = ['Please choose from above'];
                }

                var $jsontwo = $("#json-two");
                $jsontwo.empty();
                $.each(vals, function(index, value) {
                    $jsontwo.append("<option>" + value + "</option>");
                });

            });
        });

    });
</script> 
```

萤火虫的错误：

```
GET http://______my url site ____/data.json 404 NOT FOUND x 25ms 
```

如果我换行

```
$.getJSON("data.json", function(data) ... 
```

至

```
$.getJSON("data.json?callback=?", function(data) ... 
```

它也不起作用。

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T17:02:36.630

您是否尝试过为您的 json 文件提供完整路径？

```
$.getJSON("http://www.mywebsite.com/folder/data.json?callback=?", function(data) {}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T16:32:58.887

您进行 JSON 调用的页面和您调用的页面是否在同一个域中？JSON 不支持跨域调用，您需要使用 JSONP。

# redirect - 会话超时后的 Wicket setResponsePage

> ID：10178386
> 
> 赞同：1
> 
> 时间：2012-04-16T16:57:59.593
> 
> 标签：redirect, wicket, session-timeout

这是`onSubmit()`我的 Wicket 1.5 应用程序登录页面的方法：

```
@Override
public void onSubmit() {
    super.onSubmit();
User theUser = loginForm.getModelObject();

/* call a DAO function to check the user's credentials */
if(/* DAO call succeeds*/) {
    MyCustomeSession authSession = (MyCustomSession)Session.get();
        authSession.success("Welcome, " + theUser.getFullName());
    setResponsePage(new HomePage());
}
else {
    loginForm.error("Username or password was incorrect");
}   
} 
```

这对于初始登录和注销然后重新登录都很好，因为接下来看到的是带有欢迎消息的主页。

会话超时后，此应用程序将用户重定向回同一登录页面，并带有反馈消息“您的会话已过期等等等等”，并允许用户再次输入用户名和密码。如果用户这样做，则登录成功：隐藏的菜单变为可见，欢迎消息显示等。

但是，显示的页面仍然是登录页面，并带有有关所需用户名和密码的附加反馈消息（即使两者都已输入并且登录成功）。这是一个剪辑的屏幕截图：

![会话超时后反馈面板](../Images/e049e11db8e034eec7b72e3df5e5cf87.png)

这是 Wicket 的一些奇怪的事情吗？有修复或解决方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T15:11:00.710

好吧，似乎 a 的页面`application.setPageExpiredErrorPage(page)`随后不能执行 a`setResponsePage(new HomePage());`而是必须执行`setRepsonsePage(HomePage.class);`。

同时，当这个LoginPage 只是一个普通页面时，即在初始登录或注销后，它必须使用`setResponsePage(new HomePage());` This 没有多大意义，但这似乎是Wicket 的方式。

因此，我在 LoginPage 构造函数中添加了一个布尔值，`isTimeout`并相应地调用了一个或另一个版本`setResponsePage`。

# javascript - Javascript 正则表达式匹配 iframe src

> ID：10178387
> 
> 赞同：3
> 
> 时间：2012-04-16T16:58:05.760
> 
> 标签：javascript, regex

如果我有两个 iframe，如何匹配没有 youtube src 的那个？

```
<iframe  src="http://googleads.g.doubleclick.net/pagead/ads?client=ca-feed-pub"></iframe>
<iframe  src="http://www.youtube.com/embed/Y4MnpzG5Sqc?wmode=opaque"></iframe> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T09:20:19.557

您将所有数据都放在一个字符串中，可能包含多个标签？在这种情况下，您需要 1）在字符串中找到每个单独的 iframe，2）检查每个找到的 iframe，如果您需要删除它或不理会它。这是执行此操作的代码，其中注释显示了每个步骤的执行位置：

```
var string='<iframe  src="http://googleads.g.doubleclick.net/pagead/ads?client=ca-feed-pub"></iframe><iframe  src="http://www.youtube.com/embed/Y4MnpzG5Sqc?wmode=opaque"></iframe><iframe  src="http://googleads.g.doubleclick.net/pagead/ads?client=ca-feed-pub"></iframe><some_good_tag>TEST</some_good_tag><iframe  src="http://www.youtube.com/embed/Y4MnpzG5Sqc?wmode=opaque"></iframe>'

function filter_iframe(iframe_tag){
    // if iframe have youtube in it - return it back unchanged
    if(/src=".+youtube/.test(iframe_tag)){ return iframe_tag }
    // if not - replace it with empty string, effectively removing it
    return ''
}

// first, find each iframe in string and call function to check if you need to remove it
var filtered=string.replace(/(<iframe.*?>.*?<\/iframe>)/g, filter_iframe)

console.log(filtered) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T17:04:12.083

```
var a='<iframe  src="http://googleads.g.doubleclick.net/pagead/ads?client=ca-feed-pub"></iframe><iframe  src="http://www.youtube.com/embed/Y4MnpzG5Sqc?wmode=opaque"></iframe><iframe  src="http://googleads.g.doubleclick.net/pagead/ads?client=ca-feed-pub"></iframe><iframe  src="http://www.youtube.com/"></iframe>'

var b=a.match(/(<iframe.+?<\/iframe>)/g),l=b.length,i=0;
for(i;i<l;i++){
  if(b[i].indexOf('youtube.com')>-1){a=a.replace(b[i],'')}
}​ 
```

[http://jsfiddle.net/7ykXv/](http://jsfiddle.net/7ykXv/)

# javascript - 如何使用 Javascript 插入文本框

> ID：10178389
> 
> 赞同：0
> 
> 时间：2012-04-16T16:58:20.053
> 
> 标签：javascript, asp.net, textbox

我是 ASPX 的新手，我在开发代码时遇到了问题。请看下文。如何在删除按钮旁边设置一个文本框？

```
testTypeNode.Text = testTypeNode.Text & "" & _
                    " <img src=""../images/delete_16x.ico""" & _
                    " style=""text-align:bottom; cursor:pointer;"" alt=""Delete TestType""" & _
                    " title=""Delete TestType"" onclick=""javascript:if(confirm('`enter code here`Are you sure you want to delete? Any running tests will be aborted!'))" & _
                    " {" & ClientScript.GetPostBackEventReference(btnDeleteTestType, "" & sequenceNode.Value.ToString & _
                    WordSeparationChar & testTypeNode.Value.ToString & "") & ";};"" />" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T13:46:57.670

答案是：

```
testTypeNode.Text = testTypeNode.Text & "" & _
                                                            " <img src=""../images/delete_16x.ico""" & _
                                                            " style=""text-align:bottom; cursor:pointer;"" alt=""Delete TestType""" & _
                                                            " title=""Delete TestType"" onclick=""javascript:if(confirm('Are you sure you want to delete? Any running tests will be aborted!'))" & _
                                                            " {" & ClientScript.GetPostBackEventReference(btnDeleteTestType, "" & sequenceNode.Value.ToString & _
                                                            WordSeparationChar & testTypeNode.Value.ToString & "") & ";};"" />" & _
                                                            " <input type = ""text"" id = ""txtExperimentalStressdays"" name =""ExperimentalStressdays"" size = ""5"" title=""Please enter the Experimental Stressdays"" onclick="javascript:IsNumeric()/>" 
```

# php - 显示 3 张图片而不是 1 张

> ID：10178390
> 
> 赞同：1
> 
> 时间：2012-04-16T16:58:23.600
> 
> 标签：php, image, layout, html

我是社区的新手，这是我迄今为止的第一个问题。

一个小时前我被困在了这个问题上。会话检查用户是否登录，然后显示`login-form_eng.php`或`logout-form_eng.php`包含。问题是显示的图像显示了 3 次，而我只调用了一次包含函数。

```
<body>

<div id="full-wrap" class="container-wrap">
    <div id="header-wrap" class="secondary-wrap">
        <h1 class="linky-logo" title="elcoma.com"></h1>
        <div id="main-menu-wrap" class="secondary-wrap">
            <table border="0"cellspacing="0"cellpadding="0">
                <tr><td>
                    <a class="linky8"title="Home"onclick="alert('Button Click')">
                </td><td>   
                    <a class="linky2"title="News"onclick="alert('Button Click')">
                </td><td>
                    <a class="linky3"title="Products"onclick="alert('Button Click')">
                </td><td>
                    <a class="linky4"title="Services"onclick="alert('Button Click')">
                </td><td>
                    <a class="linky5"title="About Us"onclick="alert('Button Click')">
                </td><td>
                    <a class="linky6"title="Contact"onclick="alert('Button Click')">
                </td>
            </tr>
        </table>
    </div>
</div>
<div id="login-logoff-wrap" class="secondary-wrap">
<?php
session_start();
if(isset($_SESSION['user']))
{
    echo "Welcome back ". $_SESSION['user']. ". Please enjoy your stay at our site!";
    include "logout-form_eng.php";
} else {
    echo "Welcome guest. Please log in or register at our site";
    include "login-form_eng.php";
}
?>
</div>
</div> 
```

这是问题外观的链接：

[图片](http://www.mediafire.com/i/?ep85qdegp0ao2et)

**编辑**

显然，围绕 php 脚本的两个 div 导致了问题。但是我仍然无法解释为什么，有人可以向我解释吗？

我从所有 div 中一一删除了所有类，然后我开始删除 div。这就是我如何解决php登录脚本周围的两个div以某种方式“调用”脚本的解决方案？我没有其他解释，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T17:08:37.770

session_start() 应该在页面上的所有输出之前。您在 PHP 之前的 HTML 被视为输出。

由于您没有为您的两个 PHP 页面发布 PHP，是否有可能在这些页面之一中存在重定向，该重定向会自行循环？

还可以使用 include_once() 来防止页面被多次包含。 [http://php.net/manual/en/function.include-once.php](http://php.net/manual/en/function.include-once.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T17:53:10.197

检查你的 CSS。类`secondary-wrap`在 DOM 中被使用了 3 次。我想，在你的 CSS 中，图像被用作`.secondary-wrap`.

为了解决这个问题，你可以坚持额外`.my-picture`的课程，比如 topmost `<div>`：

```
<div id="header-wrap" class="secondary-wrap my-picture"> 
```

并将背景图像从新`.secondary-wrap`移动`.my-picture`。

* * *

或者只是`class="secondary-wrap"`从其他两个 div 中删除：

```
<div id="main-menu-wrap" class="secondary-wrap"> 
```

和

```
<div id="login-logoff-wrap" class="secondary-wrap"> 
```

如果此类中没有其他相关的 CSS。

# jquery - 无法屏蔽输入

> ID：10178394
> 
> 赞同：0
> 
> 时间：2012-04-16T16:58:38.303
> 
> 标签：jquery, forms, jquery-plugins, maskedinput

这应该很简单，但由于某种原因，我没有做对。：/

我正在使用[此处提供的 jQuery 屏蔽输入插件](http://digitalbush.com/projects/masked-input-plugin/)

以下是我的代码片段：

**jQuery：**

```
<script>
$(document).ready(function(){
  $("#newStudentForm").validate();
});
jQuery(function($){
   $("#Sphone").mask("(999) 999-9999");
});
</script> 
```

**HTML：**

```
<input type="text" maxlength="10" name="Sphone" id="Sphone"  size="28px"/> 
```

截至目前，我在文本框中看不到任何掩码。我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T17:00:39.880

**检查**您是否包含插件文件

```
<input type="text" maxlength="10" name="Sphone" id="Sphone"  size="28"/> // not `28px`

$(document).ready(function(){
  $("#newStudentForm").validate();
  $("#Sphone").mask("(999) 999-9999");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T02:10:03.813

根据你给我的信息，我在[http://jsfiddle.net/Sgu6e/](http://jsfiddle.net/Sgu6e/)得到了它。

这是我所做的：

我删除了该行`$("#rad1").buttonset();`，因为它不适用于您给我的代码并且破坏了 JS 的其余部分。

然后我将JS的其余部分更改为以下内容：

```
$(document).ready(function() {
    $("#newStudentForm").validate();
    $("#Sphone").mask("(999) 999-9999");
}); 
```

[同样，您可以在http://jsfiddle.net/Sgu6e/](http://jsfiddle.net/Sgu6e/)看到它的工作原理。

# xcode - xcode 导航窗格中的“I”是什么意思？

> ID：10178396
> 
> 赞同：1
> 
> 时间：2012-04-16T16:58:43.243
> 
> 标签：xcode, svn, xcode4.3

我在 Xcode 导航框架中的一个文件旁边有一个看起来像“我”的东西。我认为它与版本控制有关（我使用的是 svn）。但是我无法弄清楚它的含义或如何摆脱它。我通过终端进行所有 svn 交互，并且 svn 状态不返回任何内容。我已提交并更新无效。

我将 Xcode 4.3 与 Lion 一起使用。

![在此处输入图像描述](../Images/fb5a9256ef5edf29de70e824b300a7c5.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T17:04:25.153

这意味着“忽略”

[http://developer.apple.com/library/mac/#documentation/ToolsLanguages/Conceptual/Xcode4UserGuide/SCM/SCM.html](http://developer.apple.com/library/mac/#documentation/ToolsLanguages/Conceptual/Xcode4UserGuide/SCM/SCM.html)

# postgresql - pgAdmin 显示类型 [] 但不显示类型

> ID：10178402
> 
> 赞同：4
> 
> 时间：2012-04-16T16:59:16.713
> 
> 标签：postgresql, plpgsql, pgadmin

我已经`ENUM`在 PostgreSQL 中创建了一个类型，`tribool`我已经创建了带有 type 的表列，`tribool`现在我正在编写一个函数，该函数采用 type 的参数`tribool`。但是，pgAdmin 仅显示`tribool[]`在下拉列表中，而不显示`tribool`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T07:17:56.450

这显然是当前 pgAdmin 1.14.2 版本中的一个小错误。我在项目 bugtracker 中创建了一张票：http:
[//code.pgadmin.org/trac/ticket/360](http://code.pgadmin.org/trac/ticket/360)

感谢您报告它。

Guillaume Lelarge 应用了修复程序。将与下一个版本 1.14.3 一起部署。
[http://archives.postgresql.org/pgadmin-hackers/2012-04/msg00032.php](http://archives.postgresql.org/pgadmin-hackers/2012-04/msg00032.php)

* * *

pgAdmin v1.14.3 已经发布，错误已修复。

# msbuild - msbuild，多个项目和依赖解析

> ID：10178408
> 
> 赞同：0
> 
> 时间：2012-04-16T16:59:33.833
> 
> 标签：msbuild, build-dependencies

我有由 10 个项目组成的解决方案。每个项目都有一个测试程序集（制作 20 个项目）。

目前，我的构建脚本构建所有测试程序集，然后运行所有测试，非常棒。除了每个测试程序集（直接和间接）引用 2 个或更多核心程序集外，这意味着有很多冗余的构建正在进行。

如何简化事情（不减少装配数量）以加快构建速度？

我想我可以直接构建每个项目而无需解决项目间引用并将其全部放在一个输出目录中，但是我如何仍然解决其他引用项目必须到 3rd aprty ddls 等。

其他建议？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T00:20:19.620

我正在开发一种工具来自动化构建过程，它仍在开发中，它是开源的，这里是链接：

[https://github.com/jupaol/NCastor](https://github.com/jupaol/NCastor)

为了加快构建速度，您可以尝试并行构建项目：

*   [http://geekswithblogs.net/deadlydog/archive/2012/03/30/parallel-msbuild-ftwndashbuild-faster-in-parallel.aspx](http://geekswithblogs.net/deadlydog/archive/2012/03/30/parallel-msbuild-ftwndashbuild-faster-in-parallel.aspx)

*   [http://www.hanselman.com/blog/FasterBuildsWithMSBuildUsingParallelBuildsAndMulticoreCPUs.aspx](http://www.hanselman.com/blog/FasterBuildsWithMSBuildUsingParallelBuildsAndMulticoreCPUs.aspx)

强制 MSBuild 使用单个输出目录：

```
<BuildProperties>
  Configuration=$(Configuration);
  Platform=$(Platform);
  OutputPath=$(BuildingPath);
  $(BuildProperties);
</BuildProperties>
<MSBuild Projects="$(FullSolutionFilePath)" Properties="$(BuildProperties);" Targets="ReBuild"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T18:00:49.073

您可以先构建引用的程序集，将它们复制到“Common”文件夹，然后将使用项目中引用的“Common”文件夹程序集作为“Referenced Libraries”吗？

我们使用我们的*CompanyName* .Enterprise 库来执行此操作，并且效果很好。它们每年建造一到两次，使用它们的项目每天都在建造。

# query-string - AFNetworking 中带有大查询字符串的 URL

> ID：10178415
> 
> 赞同：0
> 
> 时间：2012-04-16T17:00:04.950
> 
> 标签：query-string, afnetworking, request.querystring

我在我的 iPhone 应用程序中使用 AFNetworking 来构建一个 http 获取请求。一般来说，我在查询字符串中附加所有参数。问题是其中一个参数是一个可能变得非常大的 ID 列表（直到 4.000 id）。如何管理这么大的参数？

多谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T22:19:50.133

URL 只能包含大约 2000 个字符，因此您所描述的内容可能不起作用。取而代之的是，要么在 POST 请求中作为 HTTP 正文发送，要么只是将内容分成几个较小的请求。

# asp.net-mvc - MVC 3 - C# - 使用表格提交表单

> ID：10178426
> 
> 赞同：0
> 
> 时间：2012-04-16T17:00:53.110
> 
> 标签：asp.net-mvc

我有一个包含行和 3 个可编辑列的表的视图

Col1：名字
Col2：年龄
Col3：年份

您可以拥有多行这些数据并对其进行编辑..

是做表单提交还是让 jquery 将数据提交给控制器更好？

如何定义控制器来处理这种类型的提交？我是否只给出每个 ROW、COL 和名称，然后使用 FormCollection 循环遍历？看来我应该能够将列表定义为控制器中的参数..

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T17:06:50.647

请记住 - 您实际上并没有向控制器提交表格。您正在以某种格式提交数据。该表只是显示该数据的一种方式。我可以像在表格中显示 XML 数据一样轻松地在表格中显示 JSON 数据，也可以在 CSV 数据中显示它们。

所以，你真正需要的是让你的控制器定义它期望的数据（这可能是 JSON、模型对象或只是一个参数列表），然后在你的表单提交中发送该数据（无论你用jQuery，通过 Html 表单助手或其他）。

我知道这对于解决方案来说过于笼统，但我想明确表示您不会向控制器提交“表格”。表格只是显示基础数据的一种方式。您需要考虑的是如何表示数据。解决这个问题，其他一切都应该变得更加清晰。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T17:06:56.103

我认为你如何提交它并不重要，做最适合你的 UI/验证/等的事情。

您可以将控制器操作绑定到数组/列表/集合。看看这个...

[http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)

# ios - 在 drawLayer:inContext 中更新自定义 CALayer 的边界：

> ID：10178431
> 
> 赞同：0
> 
> 时间：2012-04-16T17:01:00.963
> 
> 标签：ios, calayer, layer, quartz-2d

我有一个自定义层，它是其他东西的子层。问题是，我的图层在进入`drawLayer:inContext:`.

当我*不*更改图层的边界/框架时，一切都会完美绘制。

当我添加更改框架/边界的行时，我的背景看起来很完美，但我的内容不存在。看起来内容正在裁剪原始边界而不是新的（更大的）边界，所以我只看到背景。

```
- (void)drawLayer:(CALayer *)layer inContext:(CGContextRef)context {   
    CGFloat initialGraphContentsWidth = graph.frame.size.width - graph.leftMargin;
    CGFloat initialGraphContentsHeight = graph.frame.size.height - graph.bottomMargin - graphHelper.topMargin;

    self.frame = CGRectMake(0, 0, initialGraphContentsWidth, initialGraphContentsHeight);
    self.position = CGPointMake(graphHelper.leftMargin + 1, graphHelper.topMargin + 1);
    self.backgroundColor = [UIColor greenColor].CGColor;

    CGContextSetStrokeColorWithColor(context, [UIColor blackColor].CGColor);
    CGContextAddRect(context, CGRectMake(0, 0, 20, 20));
} 
```

那么如何动态更改我的界限并仍然让我的内容出现？

我尝试设置`CATransaction`持续时间为 0 的 a，但没有任何效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T07:49:05.993

您是否`setNeedsDisplay`在更新框架/边界后尝试调用？

因此，例如，如果您有一个`CALayer`被调用的`layer`，您可以尝试以下操作：

```
layer.frame = CGRectMake(20, 40, 100, 300);
// tell the layer that it needs to refreshed
[layer setNeedsDisplay]; 
```

# jquery - 谷歌浏览器中的下拉菜单的jQuery点击事件不会立即触发

> ID：10178437
> 
> 赞同：1
> 
> 时间：2012-04-16T17:01:33.683
> 
> 标签：jquery, google-chrome

jQuery v 1.7.1

铬 v 18.0.1025.162

我有一个附加到下拉菜单的 jquery click 事件处理程序。在 FF/Safari 中，事件处理程序在单击后立即触发，但我在 Chrome 中观察到奇怪的行为：

1.  在下拉菜单中单击
2.  请注意，事件处理程序没有触发（而在 FF/Safari 中）
3.  当下拉菜单仍然具有焦点时，Tab 到计算机上的另一个应用程序
4.  回到 Chrome
5.  请注意，事件处理程序已触发

或者，

1.  在下拉菜单中单击
2.  请注意，事件处理程序尚未触发
3.  单击页面的另一部分，使下拉菜单失去焦点
4.  请注意，事件处理程序尚未触发
5.  跳到计算机上的另一个应用程序
6.  回到 Chrome
7.  请注意，事件处理程序尚未触发

```
    $("#dropdown-id").detectRealTimeChange(function(){
          $("#some-div").html("html 内容");
    );
    /**
     * 检测输入的变化而不需要输入失去焦点
     */
    jQuery.fn.detectRealTimeChange = 函数（回调）{
        var oldValue = $(this).val();
        var didRecordChange = false;
        $(this).keyup(function(){
            var newValue = $(this).val();
            如果（旧值！= 新值）{
                如果（！didRecordChange）{
                    变化计数 = 变化计数 + 1；
                    didRecordChange = true;
                }
            }
            别的{
                如果（didRecordChange）{
                    更改计数 = 更改计数 - 1；
                    didRecordChange = false;
                }
            }
            if(typeof 回调 == 'function'){
                回调.call(this);
            }
        });
        $(this).click(function(){
            var newValue = $(this).val();
            如果（旧值！= 新值）{
                如果（！didRecordChange）{
                    变化计数 = 变化计数 + 1；
                    didRecordChange = true;
                }
            }
            别的{
                如果（didRecordChange）{
                    更改计数 = 更改计数 - 1；
                    didRecordChange = false;
                }
            }
            if(typeof 回调 == 'function'){
                回调.call(this);
            }
        });

```

# node.js - Websocket 传输在我的 Firefox/Chrome（Windows 版本）上不起作用

> ID：10178439
> 
> 赞同：1
> 
> 时间：2012-04-16T17:01:46.127
> 
> 标签：node.js, websocket, socket.io

我在 Windows 上使用最新稳定版本的 Firefox/Chrome 来测试我的应用程序（使用 socket.io）。但是 websocket 传输不起作用，在浏览器控制台中它发送的消息显示它支持 Websocket，xhr-polling ......但它不起作用然后回退使用其他（大约 10 秒后）。

我带来了在 Ubuntu（在 VM 中）上运行的源代码，并在 Ubuntu 上使用 Firefox/Chrome 进行了测试，它可以立即与 websocket 配合使用。然后我尝试使用 Windows 版本的 2 个浏览器在 Ubuntu 上使用服务器进行测试，websocket 不起作用（与 Windows 上的服务器相同）然后回退。所以我认为问题出在我的 Windows 或 Firefox/Chrome 上。

我不知道为什么：其他使用Windows的计算机会发生这种情况还是Windows防火墙有问题？

更新：Websocket 在 Windows 上的 Safari 中工作。我尝试卸载 Firefox 和 Chrome，它仍然无法正常工作。我试过了，它可以在其他 Windows 7 计算机（我的朋友和 VM）上运行。我的 Windows 7 一定有一些问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T09:38:09.040

确保您的防病毒软件没有阻止 WebSocket：[https ://github.com/LearnBoost/socket.io/wiki/Socket.IO-and-firewall-software](https://github.com/LearnBoost/socket.io/wiki/Socket.IO-and-firewall-software)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T11:10:56.700

面临同样的问题。解决这个问题的方法是让你的 web-sockets 安全。切换到 wss 调用，一切都应该没问题。

# sql - 有序的 SQL 更新

> ID：10178451
> 
> 赞同：0
> 
> 时间：2012-04-16T17:02:21.487
> 
> 标签：sql

给定这样的表，其中 x 和 y 具有唯一约束。

```
编号,x,y
1, 1,1
2, 1,2
3, 2,3
4, 3,5
..

```

我想使用 UPDATE 语句将一组行中的值 x 和 y 增加固定量。假设我将它们都增加 1，似乎 UPDATE 遵循 id 顺序并在用 1 2 更新行后给我一个错误，因为它与下一行 2 3 冲突，该行尚未更新为 3、4然而。

谷歌搜索，我找不到强制 UPDATE 使用订单的方法。反过来做对我的应用程序来说就足够了。我也确信整个更新后设置是一致的。

有什么解决办法吗？以某种方式强制订单进行更新，或者以任何方式使其将约束检查推迟到完成？

这适用于 Django 应用程序，并且与所有受支持的数据库兼容。我知道有些数据库有原子事务并且不会发生这个问题，有些数据库有避免这个问题的功能，但我需要一个严格标准的 SQL 解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T17:12:57.983

对于 PostgreSQL，您可以将主键约束定义为“可延迟”，然后仅在提交时对其进行评估。

在 PostgreSQL 中，这看起来像这样：

```
postgres=>create table foo (
postgres(>    id integer not null,
postgres(>     x integer,
postgres(>     y integer
postgres(>);
CREATE TABLE
postgres=>alter table foo add constraint pk_foo primary key (id) deferrable initially deferred;
ALTER TABLE
postgres=> insert into foo (id, x,y) values (1,1,1), (2,1,1), (3,1,1);
INSERT 0 3
postgres=> commit;
COMMIT
postgres=> update foo set id = id + 1;
UPDATE 3
postgres=> commit;
COMMIT
postgres=> select * from foo;
 id | x | y
----+---+---
  2 | 1 | 1
  3 | 1 | 1
  4 | 1 | 1
(3 rows)
postgres=> 
```

对于 Oracle，这不是必需的，因为它将 UPDATE 语句评估为单个原子操作，因此可以立即使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T18:35:31.740

为了参考起见，MS SQL Server 也不会出现这个问题。UPDATE 是单个原子操作。

```
ALTER TABLE [table_name]
ADD CONSTRAINT unique_constraint
UNIQUE(x)

ALTER TABLE [table_name]
ADD CONSTRAINT unique_constraint2
UNIQUE(y)

update [table_name]
set x = x+1,
y = y+1 
```

应该完全没有问题。

# audio - 在ffmpeg中平移所有音频通道中心？

> ID：10178459
> 
> 赞同：3
> 
> 时间：2012-04-16T17:03:14.783
> 
> 标签：audio, ffmpeg, transcode

我正在使用 FFMPEG 将大文件转码为小文件。通常这些文件将有 2 个音频通道（尽管并非总是如此）。我正在尝试将所有音频通道居中。

我向 ffmpeg-users 询问了如何执行此操作的示例：http: [//ffmpeg-users.933282.n4.nabble.com/Panning-audio-channels-example-td4417939.html](http://ffmpeg-users.933282.n4.nabble.com/Panning-audio-channels-example-td4417939.html)

我从回复中得到的是 FFMPEG 还没有实现音频过滤器。不知何故，我应该能够设置一个 libav 过滤器（？）来平移所有频道中心......效果如下： `pan="c0=0.5*FL+0.5*FR"`虽然当我这样做时，我得到了错误：`No such filter: 'pan'`. 这些人很棒，但我无法通过阅读[文档](http://ffmpeg.org/ffmpeg.html)来解决这个问题。

我没有禁用过滤器，这是我的构建信息 `configuration: --prefix=/opt/local --enable-gpl --enable-postproc --enable-swscale --enable-avfilter --enable-libmp3lame --enable-libvorbis --enable-libtheora --enable-libdirac --enable-libschroedinger --enable-libopenjpeg --enable-libxvid --enable-libx264 --enable-libvpx --enable-libspeex --mandir=/opt/local/share/man --enable-shared --enable-pthreads --cc=/opt/local/bin/gcc-apple-4.2 --arch=x86_64 --enable-yasm --enable-nonfree --enable-libfaac`

这是我构建的命令行之一的示例：`ffmpeg -i inMovie.mov -acodec libfaac -ab 64k -vcodec libx264 -vpre medium -b 320k -pass 1 -s 374x210 -threads 0 outMov.mp4`

我的 FFMPEG 命令行的其余部分工作得很好......基本上我正在寻找的是让左/右音频通道在输出文件中都有相同的音频。如果有更简单的方法来做到这一点（转换为 2 个混合单声道？）我全神贯注！

感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T13:37:33.217

音频过滤器在 FFMPEG 上有不同的 sintax。您可以平移音频通道而无需创建混音。

使用您的示例：

```
ffmpeg -f lavfi -i "amovie=inMovie.mov,pan=stereo: c0=c0+c1: c1=c0+c1" -i inMovie.mov -map 0:0 -map 1:0 -vcodec libx264 -vpre medium -b 320k -pass 1 -s 374x210 -threads 0 -acodec libfaac -ab 64k outMov.mp4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T17:33:59.173

目前我没有方便的命令参考，但我会使用 FFMPEG 混音为单声道，然后再转换回立体声。这应该会给你你需要的结果。

# javascript - 如何在 Django 表单中添加标签 ID

> ID：10178462
> 
> 赞同：3
> 
> 时间：2012-04-16T17:03:31.157
> 
> 标签：javascript, html, django, django-forms

我正在使用 Django 表单进行输入。但是，我想稍微定制一下。例如下面的 Django 代码将被翻译成：

```
#Django code

aerial_size_dist = forms.ChoiceField(initial='Very Fine to Fine') 

#Translated HTML  
<tr><th><label for="id_aerial_size_dist">Aerial size dist:</label></th><td><select name="aerial_size_dist" id="id_aerial_size_dist"></select></td></tr> 
```

我的问题是如何从 Django 端添加标签属性，例如“样式”？小部件可以更改 Django 表单标签属性吗？

# 目标 HTML

```
<tr><th><label for="id_aerial_size_dist" style="display:none;">Aerial size dist:</label></th><td><select name="aerial_size_dist" id="id_aerial_size_dist"></select></td></tr> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-11T11:10:59.117

类似的问题在这里得到解答： [Get the ID of a field widget in a formset](https://stackoverflow.com/questions/4520536/get-the-id-of-a-field-widget-in-a-formset)。虽然它不允许您直接自定义 ID，但它使用默认（自动生成的）ID

（简答）在模板中使用它：

**编辑：**

```
<label for="{{ form.my_field.id_for_label }}">{{ form.my_field.label }}</label> 
```

* * *

**旧的：（**这在某些情况下不起作用 - 请参阅评论）

```
<label for="{{ form.my_field.auto_id }}">{{ form.my_field.label }}</label> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T11:57:42.993

```
class FormName(forms.ModelForm):

    def __init__(self, *args, **kwargs):
        super(FormName, self).__init__(*args, **kwargs)
        self.fields['field_name'].widget.attrs['style'] = '...' 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-16T17:25:47.180

[https://docs.djangoproject.com/en/dev/ref/forms/widgets/#django.forms.Widget.attrs](https://docs.djangoproject.com/en/dev/ref/forms/widgets/#django.forms.Widget.attrs)

# multithreading - Python 3 - 由字符串索引的锁的竞争条件

> ID：10178465
> 
> 赞同：0
> 
> 时间：2012-04-16T17:03:48.647
> 
> 标签：multithreading, caching, concurrency, python-3.x

我有一个执行按需镜像的简单服务器。获取成本很高（网络延迟、完整性检查、（重新）压缩等）。因此，我希望每个 url 获取一个锁，这样：

*   只有一个线程会获取一个文件；
*   如果另一个线程想要当前正在获取的文件之一，它将阻塞直到文件准备好。

我最初虽然想做类似的事情：

```
# Globals
fetching = dict()
fetch_lock = threading.Lock()

...

lock = None
do_fetch = False
with fetch_lock:
    if url in fetching:
        lock = fetching[url]
    else:
        lock = threading.Lock()
        fetching[url] = lock
        do_fetch = True

# Race condition
lock.acquire()

if do_fetch:
    ...

with fetch_lock:
    lock.release()
    if do_fetch:
        del fetching[url]

# Serve file
... 
```

竞争条件相当轻微（一个线程可能会尝试访问尚未在缓存中的文件），但我找不到解决它的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T17:50:37.063

为了解决这个问题，如果你正在创建它（没有其他人会拥有它），你可以在关键部分内获取锁，如果锁已经存在，那么在关键部分之外获取它。

```
with fetch_lock:
    if url in fetching:
        lock = fetching[url]
    else:
        lock = threading.Lock()
        fetching[url] = lock
        do_fetch = True
        lock.acquire()
if not do_fetch:
    lock.acquire() 
```

这将解决那里的竞争条件。虽然，我不明白为什么创建锁的线程将它从锁表中删除，然后你可以让一个线程在一个较新的线程获取它时为文件提供服务。但这不是你问的。

# javascript - Javascript-创建 HTML

> ID：10178466
> 
> 赞同：-4
> 
> 时间：2012-04-16T17:03:51.137
> 
> 标签：javascript, html

您好，我将如何在 Javascript 中创建它？：

```
 You have <strong><span id="commentsCounter">${const['COMMENT_MAX_LENGTH']}</span></strong> characters left.<br/> 
```

在上面添加它：

```
 function editCommentToggle( id )
{
    theRow = document.getElementById("id"+id);
    //user = theRow.cells[0].innerHTML;
    //date = theRow.cells[1].innerHTML;
    com = theRow.cells[2].innerText ;

    idx = 2;
    maxlength = 250;

                // Comment field
        cell = theRow.cells[idx];
        while( cell.childNodes.length > 0 ) cell.removeChild(cell.childNodes[0]);

        //spanTag = document.createElement("span"); 
        //spanTag.innerHTML = "id='commentsCounter'>" + maxlength + "</span>characters left.<br/>" 
        //cell.appendChild(spanTag);
        element = document.createElement("textarea");
        element.id="comments-"+id;
        element.rows="3";
        element.value = com;
        element.style.width = "400px";
        element.maxLength = "250";
        element.onfocus = element.onkeydown = element.onkeyup = function(){return characterCounterEdit(undefined, maxlength, this);}; 
        cell.appendChild(element);

        $(function()
                {
                    setTimeout("syncCommentTableSizes()",0);    <%-- Run after HTC code --%>
                });

    // Actions field
    cell = theRow.cells[++idx];
    while( cell.childNodes.length > 0 ) cell.removeChild(cell.childNodes[0]);

    link = document.createElement("a");
    link.href = 'javascript:saveComment('+id+')';

    element = document.createElement( "img" );
    element.className = "edit"; // check if we need this changed
    element.src="../images/icon_save.gif";
    element.border="0";
    element.alt = "Save";

    link.appendChild( element );

    cell.appendChild(link);
    cell.appendChild( document.createTextNode("  ") );

    link = document.createElement("a");
    link.href = 'javascript:cancelCommentEdit('+id+')';

    element = document.createElement( "img" );
    element.className = "delete"; // check if we need this changed
    element.src="../images/icon_cancel.gif";
    element.border="0";
    element.alt = "Cancel";

    link.appendChild(element);
    cell.appendChild(link);
} 
```

jsp：

```
<table id="add-comment-table" class="data_table" style="border-top-style: none; margin-top: 0px;">
<td colspan="3">
    You have <strong><span id="commentsCounter">${const['COMMENT_MAX_LENGTH']}</span></strong> characters left.<br/>
    <textarea id="comment" name="comment" rows="3"
        onfocus="characterCounter('commentsCounter',${const['COMMENT_MAX_LENGTH']}, this)"
        onkeydown="characterCounter('commentsCounter',${const['COMMENT_MAX_LENGTH']}, this)"
        onkeyup="characterCounter('commentsCounter',${const['COMMENT_MAX_LENGTH']}, this)"></textarea>
        <a href="javascript:addComment();"><img src="../images/icon_add.gif" border="0" alt="Add"/></a>
</td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T17:08:52.973

例如，您可以将此 html 放到一个元素中

```
elem.innerHTML = "your html generated code"; 
```

当然为您的 html 使用单引号

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T18:54:58.630

在隐藏的 div 中输出常量。

然后，您可以从 html 中获取 innerHTML，而不是尝试通过 javascript 设置它。

```
<div id="maxSize" style="display:none;">${const['COMMENT_MAX_LENGTH']}</div>
<span id="commentsCounter"></span>
<div onclick="update()">Click</div>

<script>
    function update()
    {
        var maxLength = parseInt( document.getElementById( "maxSize" ).innerHTML );
        document.getElementById( "commentsCounter" ).innerHTML = maxLength;
    }
</script> 
```

# android - Android GLES20.glDrawArrays(GLES20.GL_LINE_LOOP ...)

> ID：10178474
> 
> 赞同：3
> 
> 时间：2012-04-16T17:04:26.577
> 
> 标签：android, opengl-es

这可能是一个非常新手的问题，但我找不到答案。

使用来自谷歌的简单教程（http://developer.android.com/resources/tutorials/opengl/opengl-es20.html）

我试图画一个正方形（呃，使用常识？），但得到了有趣的结果。如果有人能告诉我出了什么问题，将不胜感激。

```
 private void initShapes(){    
    float triangleCoords[] = {
        // X, Y, Z
        -0.5f, -0.25f, 0,
         0.5f, -0.25f, 0,
         0.0f,  0.559016994f, 0,
         0.0f,  0f, 0
    }; 

    // initialize vertex Buffer for triangle  
    ByteBuffer vbb = ByteBuffer.allocateDirect(
            // (# of coordinate values * 4 bytes per float)
            triangleCoords.length * 4); 
    vbb.order(ByteOrder.nativeOrder());// use the device hardware's native byte order
    triangleVB = vbb.asFloatBuffer();  // create a floating point buffer from the ByteBuffer
    triangleVB.put(triangleCoords);    // add the coordinates to the FloatBuffer
    triangleVB.position(0);            // set the buffer to read the first coordinate    
}

public void onDrawFrame(GL10 unused) {    
    // Redraw background color
    GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT | GLES20.GL_DEPTH_BUFFER_BIT);

 // Add program to OpenGL environment
    GLES20.glUseProgram(mProgram);

    GLES20.glVertexAttribPointer(maPositionHandle, 4, GLES20.GL_FLOAT, false, 12, triangleVB);
    GLES20.glEnableVertexAttribArray(maPositionHandle);
    GLES20.glDrawArrays(GLES20.GL_LINE_LOOP, 0, 4);

} 
```

其他一切与教程相同。

```
private final String vertexShaderCode = 
    "attribute vec4 vPosition; \n" +
    "void main(){              \n" +
    " gl_Position = vPosition; \n" +
    "}                         \n";

private final String fragmentShaderCode = 
    "precision mediump float;  \n" +
    "void main(){              \n" +
    " gl_FragColor = vec4 (0.63671875, 0.76953125, 0.22265625, 1.0); \n" +
    "}                         \n";

private int mProgram;
private int maPositionHandle;

private int loadShader(int type, String shaderCode){

    // create a vertex shader type (GLES20.GL_VERTEX_SHADER)
    // or a fragment shader type (GLES20.GL_FRAGMENT_SHADER)
    int shader = GLES20.glCreateShader(type); 

    // add the source code to the shader and compile it
    GLES20.glShaderSource(shader, shaderCode);
    GLES20.glCompileShader(shader);

    return shader;
}

public void onSurfaceCreated(GL10 unused, EGLConfig config) {
    initShapes();

    // Set the background frame color
    GLES20.glClearColor(0f, 0f, 0f, 1.0f);

    int vertexShader = loadShader(GLES20.GL_VERTEX_SHADER, vertexShaderCode);
    int fragmentShader = loadShader(GLES20.GL_FRAGMENT_SHADER, fragmentShaderCode);

    mProgram = GLES20.glCreateProgram();             // create empty OpenGL Program
    GLES20.glAttachShader(mProgram, vertexShader);   // add the vertex shader to program
    GLES20.glAttachShader(mProgram, fragmentShader); // add the fragment shader to program
    GLES20.glLinkProgram(mProgram);                  // creates OpenGL program executables

    // get handle to the vertex shader's vPosition member
    maPositionHandle = GLES20.glGetAttribLocation(mProgram, "vPosition");
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T18:53:01.350

正如我在上面的评论中发布的：

似乎您可能希望将 glVertexAttribPointer 调用中的 size 参数从 4 更改为 3，因为您没有使用 4d 向量 (XYZW)。

干杯

# haskell - 列表推导中的“统一”

> ID：10178480
> 
> 赞同：6
> 
> 时间：2012-04-16T17:04:45.103
> 
> 标签：haskell, functional-programming, list-comprehension

好的，我正在尝试创建一个函数来确定元组列表是否是可传递的，即如果 (x,y) 和 (y,z) 在列表中，那么 (x,z) 也在列表中。

例如，`[(1,2), (2,3), (1,3)]`是传递的。

现在，来自 Prolog 背景，以下内容对我来说很有意义：

```
transitive xs = and [elem (x, z) xs | (x, y) <- xs , (y, z) <- xs ] 
```

但是，它不起作用。'y' 似乎没有像我预期的那样得到单个值，而是在涉及到第二个元组时被“重新分配”。相反，我们必须使用：

```
transitive xs = and [elem (x, z) xs | (x, y1) <- xs , (y2, z) <- xs, y1 == y2 ] 
```

为什么会这样？为什么第一个示例不会导致错误，这不违反函数式编程语言的“引用透明性”原则吗？

“然而，在纯函数和逻辑语言中，由于引用透明性的要求，变量绑定到表达式并在其整个生命周期内保持一个值。” -[维基百科](http://en.wikipedia.org/wiki/Variable_%28computer_science%29)

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-16T17:09:45.643

即使在函数式语言中，也存在名称阴影。有时这很有用。在第一个代码中，`(y,z) <- xs`阴影`y`受`(x,y) <- xs`之前的约束。

编译时打开警告以提醒此类事情。

# javascript - 谷歌地图 api v3 中的复杂多边形

> ID：10178481
> 
> 赞同：0
> 
> 时间：2012-04-16T17:04:45.713
> 
> 标签：javascript, google-maps, google-maps-api-3

我想在谷歌地图 v3 ex 中为复杂多边形中的每个多边形制作点击事件：

```
var path1 = [new google.maps.LatLng(31.246599, 29.999199),
             new google.maps.LatLng(29.999199, 31.246599),
             new google.maps.LatLng(30.246599,28.999199)];
var path2 = [new google.maps.LatLng(31, 30),
             new google.maps.LatLng(29.999199, 31.246599),
             new google.maps.LatLng(30.246599,28.999199)];

poly = new google.maps.Polygon({
  paths: [path1, path2],
  strokeColor: "#FF0000",
  strokeOpacity: 0.8,
  strokeWeight: 3,
  fillColor: "#FF0000",
  fillOpacity: 0.35,
  map: map });

 // i want to make click event for a polygon that represents by path1 
 // and the other that represents by path2 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T17:18:09.543

然后创建两个多边形 poly1 和 poly2 并处理它们的点击事件：

```
google.maps.event.addListener(poly1, 'click', function (e) {
    ....
});
google.maps.event.addListener(poly2, 'click', function (e) {
    ....
}); 
```

# javascript - js删除某些不匹配的单词

> ID：10178484
> 
> 赞同：1
> 
> 时间：2012-04-16T17:05:16.997
> 
> 标签：javascript, jquery

我有一个js字符串...

```
var string = "Hi how are you <b>today</b>"; 
```

我现在有一个新的 js 字符串...

```
var newstring = "are today"; 
```

我想删除所有`var string`不匹配的单词`var newstring`。如果有的话，我还想保留与这些词相关联的标签。

```
Example Result:
are <b>today</b> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T17:16:40.120

有一些简单的方法可以做这样的事情，如果它们对你有用，取决于你打算用它做什么，但可能是这样的：

```
var string = "Hi how are you <b>today</b>",
    newstring = "are today",
    words = newstring.split(' ');

for (var i=0; i<words.length; i++) {
    var reg = new RegExp(words[i], 'gi');
    string = string.replace(reg, '');
}

console.log(string);​ 
```

[小提琴](http://jsfiddle.net/adeneo/ddfeq/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T17:21:56.250

```
var string = "Hi how are you <b>today</b>",
    newstring = "are today",
    words= newstring.split(' ');
$.each(words, function(i, v) {
    if(new RegExp(v, 'ig').test(string) && !new RegExp('<b>'+v+'</b>', 'ig').test(string)) {
        string = string.replace(v,'');
    }
});
console.log(string); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T17:22:43.117

```
var source = "Hi how are you <b>today</b>",
    pattern = "are today",
    res = [];

pattern.split(/\s+/).forEach(function( word ) {
    source.split(/\s+/).forEach(function( sWord ) {
        if( ~sWord.indexOf(word) ) res.push( sWord );
    });
});

console.log(res.join(' ')); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T17:25:23.000

```
var str = 'Hi how are you <b>today</b>',
    words = ['are', 'today']; //or 'are today'.split(' '),
    regex = new RegExp('(<[a-zA-Z]*>)?(' + words.join('|') + ')(</[a-zA-Z]*>)?', 'g');

console.log(regex, str.match(regex), str.match(regex).join(' ')); 
```

不过，您将需要一个更复杂的正则表达式来捕获所有 HTML 标记。

[http://jsfiddle.net/g7xQx/](http://jsfiddle.net/g7xQx/)

# c# - LINQ：RemoveAll 并删除元素

> ID：10178485
> 
> 赞同：12
> 
> 时间：2012-04-16T17:05:27.433
> 
> 标签：c#, linq, removeall

这是从列表中删除与某些条件匹配的项目然后获取这些项目的最简单方法。

我可以从几个方面考虑，我不知道哪个是最好的：

```
var subList = list.Where(x => x.Condition);
list.RemoveAll(x => x.Condition); 
```

或者

```
var subList = list.Where(x => x.Condition);
list.RemoveAll(x => subList.Contains(x)); 
```

这是最好的方法之一吗？如果是，是哪一个？如果不是，我该怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-16T17:54:16.377

我喜欢使用函数式编程方法（只做新的东西，不要修改现有的东西）。一个优点`ToLookup`是您可以处理多个项目的双向拆分。

```
ILookup<bool, Customer> lookup = list.ToLookup(x => x.Condition);
List<Customer> sublist = lookup[true].ToList();
list = lookup[false].ToList(); 
```

或者，如果您需要修改原始实例...

```
list.Clear();
list.AddRange(lookup[false]); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-16T17:09:38.513

出于可读性目的，我会选择第一个选项，并注意您应该首先实现列表，否则您将丢失您尝试在下一行选择的项目：

```
var sublist = list.Where(x => x.Condition).ToArray();
list.RemoveAll(x => x.Condition); 
```

第二个例子是 O(n^2) 无缘无故，最后一个很好，但可读性较差。

编辑：现在我重新阅读了您的最后一个示例，请注意，现在写的内容将删除所有其他项目。您缺少条件检查，而删除行实际上应该是`list.RemoveAt(i--);`因为第 th 元素在删除后`i+1`成为第`i`th 元素，并且当您递增时，`i`您正在跳过它。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-07-28T14:13:06.350

第一个选项很好，但它会导致两次收集。您可以通过在谓词中执行附加逻辑来一次性完成：

```
 var removedItems = new List<Example>();
        list.RemoveAll(x =>
        {
            if (x.Condition)
            {
                removedItems.Add(x);
                return true;
            }

            return false;
        }); 
```

您还可以将其包装到扩展中以方便使用：

```
public static class ListExtensions
{
    public static int RemoveAll<T>(this List<T> list, Predicate<T> predicate, Action<T> action)
    {
        return list.RemoveAll(item =>
        {
            if (predicate(item))
            {
                action(item);
                return true;
            }

            return false;
        });
    }
} 
```

并像这样使用：

```
 var removedItems = new List<Example>();
        list.RemoveAll(x => x.Condition, x => removedItems.Add(x)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-04-24T15:51:49.140

我一直在寻找同样的东西。我想对要删除的项目进行一些错误记录。由于我添加了一大堆验证规则，remove-and-log 调用应该尽可能简洁。

我做了以下扩展方法：

```
public static class ListExtensions
{
    /// <summary>
    /// Modifies the list by removing all items that match the predicate. Outputs the removed items.
    /// </summary>
    public static void RemoveWhere<T>(this List<T> input, Predicate<T> predicate, out List<T> removedItems)
    {
        removedItems = input.Where(item => predicate(item)).ToList();
        input.RemoveAll(predicate);
    }

    /// <summary>
    /// Modifies the list by removing all items that match the predicate. Calls the given action for each removed item.
    /// </summary>
    public static void RemoveWhere<T>(this List<T> input, Predicate<T> predicate, Action<T> actionOnRemovedItem)
    {
        RemoveWhere(input, predicate, out var removedItems);
        foreach (var removedItem in removedItems) actionOnRemovedItem(removedItem);
    }
} 
```

示例用法：

```
items.RemoveWhere(item => item.IsWrong, removedItem =>
    errorLog.AppendLine($"{removedItem} was wrong.")); 
```

# excel - 使用 VBA 输入单元格公式

> ID：10178486
> 
> 赞同：8
> 
> 时间：2012-04-16T17:05:37.480
> 
> 标签：excel, vba, quotes, formula

我在单元格 A1 中有这个简单的公式

```
=10*Round(B1/10,0) 
```

我知道如何在 VBA 中输入这个，我只写：

```
Range("A1").Formula = "=10*Round(B1/10,0)" 
```

现在，如果我不知道要舍入其编号的单元格怎么办？换句话说，我的代码中有一个整数变量 N，它可以取多个值，我想对 B 列的第 N 行中的数字进行四舍五入。

我怎么写这个？我试过：

```
Range("A1").Formula = "=10*Round(B" & N & "  & "/10",0)" 
```

但这不起作用。尝试了多种报价布局，但均未成功。

谁能告诉我：

1.  如何输入这个简单的公式？更重要的是
2.  提供一些链接/参考，以帮助我将来输入其他公式？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T20:01:25.763

Barry 和 Excellll 已经清楚地解决了您的具体问题。至于更一般的，我搜索了一下，很惊讶没有找到一个好的通用教程。这是 Excel 每日剂量的一篇[短文](http://www.dailydoseofexcel.com/archives/2004/04/16/worksheet-formulas-in-vba-part-i/)。

我会打开宏记录器，创建一些公式，看看你得到了什么，然后谷歌具体问题。最后，一本好书，例如 John Walkenbach 的“Power Programming in VBA”一书应该会有所帮助。

# c# - 避免使用 Response.Redirect 重置 ViewStates

> ID：10178489
> 
> 赞同：0
> 
> 时间：2012-04-16T17:05:48.757
> 
> 标签：c#, asp.net

在我的 Web 应用程序中，我有两个，一个 ViewState 和一个保存值的 Session，问题是我需要通过单击按钮重置一个并保持另一个不变。如果我`Response.Redirect`在我的按钮中使用，ViewState 和 Session 都会被重置。我尝试使用 if(!IsPostBack) 但我认为这不适用于按钮事件。我非常感谢您的建议和帮助。

代码：

// 此代码上方有一个 ViewState，我必须重置它

```
 protected void Button_Click(object sender, EventArgs e)
   {
       Session["Counter"] = (int)Session["Counter"] + 1; // I do not want to reset this Session.
       Label1.Text = Session["Counter"].ToString();
       Response.Redirect("Page1.aspx"); // If this button is pressed then Session["counter"] is resetted which I don't want to happen

} 
```

谢谢 ！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T17:28:48.520

如果您只是想增加计数器，您需要做的就是：

```
 public override void OnLoad(EventArgs e)
 {
     if(!Page.IsPostBack)
     {
        if (Session["PersistedCounter"] == null)
            Session["PersistedCounter"] = "0";

        Label1.Text = Session["PersistedCounter"];
     }
 }

 protected void Button_Click(object sender, EventArgs e)
 {
     int oldValue = int.Parse(Label1.Text);
     Label1.Text = (oldValue + 1).ToString();
     Session["PersistedCounter"] = Label1.Text;
 } 
```

由于页面已经保存状态，标签将返回到服务器，其当前值从视图状态恢复。您只需提取该值，然后使用您的修改设置该值。试试看，它应该可以工作。

您的解决方案实际上使事情过于复杂。

# cakephp - 如何在 CakePHP 中获取当前语言代码？

> ID：10178492
> 
> 赞同：0
> 
> 时间：2012-04-16T17:06:16.233
> 
> 标签：cakephp, internationalization

我尝试使用 CakePHP 开发一个新应用程序，并且在我的 html 标记中，我有属性 lang，它支持 en-us 形式的语言 iso 代码

如何从 CakePHP 中检索当前所选语言的代码；

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T17:21:49.383

由于 PHP 在 HTML 之前处理，因此您不能。我建议使用 CakePHP 设置语言（因为无论如何它都会处理翻译），然后将其输出到您的`<html>`标签上。

# jquery - JQueryUI 按钮样式在应用于链接元素时定位不正确

> ID：10178503
> 
> 赞同：0
> 
> 时间：2012-04-16T17:07:29.120
> 
> 标签：jquery, jquery-ui, button

使用 JQuery UI`.button`功能设置链接项目的样式时，在 Chrome 和 Safari 以外的任何浏览器中查看时，链接“按钮”的位置会向上移动。这在 FireFox 和 IE 中很明显，即使在访问[http://jqueryui.com/demos/button](http://jqueryui.com/demos/button)的 JQuery 演示页面时也是如此。

我知道这是 JQuery 错误中列出的一个[已知问题](http://bugs.jqueryui.com/ticket/5254)，但它目前没有显示解决方案。

有没有人找到可行的解决方法（通过 JQuery 或 CSS）来缓解此问题，以便“按钮”在所有浏览器中正确排列？我觉得这是一个重要的问题，因为我有许多表单，它们的提交按钮和取消链接彼此相邻。

```
 <input type="submit" value="Submit" class="button"/>
  <a class="button" href="/Home">Cancel</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T17:23:46.257

只需创建一个带有 onclick 事件的按钮，该事件就像一个标签：

```
<script type="text/javascript">
    function openWindow( location )
    {
        window.open( location );
    }
</script>

<button onclick="openWindow('\home')">Home</button> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T17:25:01.690

嗯，我不知道这个错误，但是当我在 Firefox 中尝试它时它确实存在。由于这似乎是一个垂直对齐问题，解决它的一种方法是将锚放在父元素中`display:table`并分配 `display:table-cell`给锚。这应该像表格单元格的内容一样将锚点置于父级中。我在firefox中修改了css，这解决了jquery ui演示页面上的问题：

![在此处输入图像描述](../Images/128dca36049d6ced37b770af682fd63f.png)

请注意，这在 IE7 中不起作用，因为它不支持`display:table-cell`. 但应该可以在 IE8+ 和 firefox 中使用。

# tabs - vimdiff 中选项卡之间的复制粘贴行

> ID：10178506
> 
> 赞同：16
> 
> 时间：2012-04-16T17:07:34.480
> 
> 标签：tabs, copy-paste, vimdiff

我正在使用 vimdiff 来查看两个文件之间的区别。我想知道是否可以从左侧选项卡（第一个文件）复制一行并将其粘贴到第二个选项卡（第二个文件）中。实际上，我什至似乎无法访问第二个选项卡。

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-24T13:50:55.283

如评论中所述，您可以使用`dp`或`do`在缓冲区之间移动光标所在的差异。

您还可以使用命令`:[range]diffget`和`:[range]diffput`，这意味着如果您已经查看了整个文件中的所有差异，您可以分别从当前缓冲区`:1,$diffput`或将所有差异移动或移动到当前缓冲区。`:1,$diffget`

# c# - 三层架构中的哪些内容

> ID：10178508
> 
> 赞同：2
> 
> 时间：2012-04-16T17:07:40.183
> 
> 标签：c#, 3-tier

最近，我们的教授说我们的表示层应该主要由方法调用组成，并且我们的大部分代码应该在业务对象和数据访问层中完成。我的问题是这通常包括用户输入的代码吗？我的意思是这个；我有一个由多个文本框组成的表单，以便用户可以输入不同内容的值。然后，用户单击一个按钮，信息将保存在数据库中。

按钮偶数方法如下所示：

```
//event handler for data input
public static void btnEnterAbRipperXInfo_Click(object sender, EventArgs e)
{
    //convert text box data into int datatype and assign to variable
    inAndouts = int.Parse(txtInAndOuts.Text);
    forwardBicycles = int.Parse(txtForwardBicycles.Text);
    reverseBicycles = int.Parse(txtReverseBicycles.Text);
    crunchyFrog = int.Parse(txtCrunchyFrog.Text);
    crossLegWideLegSitups = int.Parse(txtCrossLegWideLegSitups.Text);
    fiferScissors = int.Parse(txtFiferScissors.Text);
    hipRockNRaise = int.Parse(txtHipRockNRaise.Text);
    pulseUpsHeelsToHeaven = int.Parse(txtPulseUpsHeelsToHeaven.Text);
    vUpRollUpCombos = int.Parse(txtVUpRollUpCombos.Text);
    obliqueVUps = int.Parse(txtObliqueVUps.Text);
    legClimbs = int.Parse(txtLegClimbs.Text);
    masonTwists = int.Parse(txtMasonTwists.Text);            
} 
```

上述按钮事件方法中的代码是否应该真正进入业务对象或数据访问类而不是表示层类？

这不是家庭作业。在我的编程课之外，我正在为我的儿子创建一个 90 天的锻炼计划。我也可以将它用作毕业时的投资组合，因此，我想确保我遵循标准做法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T17:13:42.120

您的代码从 UI 读取值。

此代码只能在 UI 层，因为业务层无法访问 UI。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T17:22:54.053

通常在 UI 层或表示层中，您可以从控件中获取值（就像您现在所做的那样）。然后使用所有这些值调用您的业务逻辑方法。就像是

```
BAL.ProcessRequest(arg1,arg2,.....); 
```

现在，如果您有一些与这些输入相关的业务规则，那么您可以在业务逻辑中执行。例如，如果您传递产品及其订购数量，并且您想根据某些业务规则计算这些产品的折扣，那么您在业务层中执行折扣计算。
之后，当您即将提交到数据库时，您将调用数据访问层。就像是：

```
DAL.SaveData(arg1,arg2,...); 
```

拥有单独层的原因基本上是为了松散地耦合应用程序。例如，如果您决定更改底层数据库，那么您将只需要更改数据访问层，而不是业务层或表示层。
假设您想将 UI/Presentation 层从 Web 应用程序更改为桌面应用程序，那么如果更改只会在 Presentation 层中进行。业务层和数据访问层将保持不变。如果您正在考虑将文本框控件传递给业务层，那么您的应用程序将被耦合（UI/Presentatioin 层将与业务层耦合）。
这是一篇解释[三层架构](http://www.codeproject.com/Articles/36847/Three-Layer-Architecture-in-C-NET)的文章。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T17:10:34.597

BOL 负责在进入 DAL（数据访问层）之前需要清理的特定业务检查/案例。DAL 只是从 BOL 中获取输入并将它们传递给数据库。

如果您的文本框值不需要任何类型的业务逻辑，您可以将它们传递给 BOL 以自由地将它们传递给 DAL。

从您的代码的外观看，不需要检查/验证。尽管它可能看起来多余，但为了与您的项目保持一致，您仍然可以将它们传递给 BOL。本质上，您的 BOL 不会对这些值采取行动 - 它只会采用这些值并将其传递给 DAL。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T17:12:25.550

不，这不适用于域或数据层对象。因为您直接与表示元素交互，所以这对于 UI 层来说很好。

现在，一旦您将这些值提取并解析为适当的类型，那么将这些工作从 UI 层转移是一个好主意。

此外，您应该考虑使用`int.TryParse`来转换您的值，因为如果您在一个文本框中输入一个非数字值，您的表单将引发异常。

# windows - 我可以从我的应用程序重定向注册表调用吗？

> ID：10178510
> 
> 赞同：0
> 
> 时间：2012-04-16T17:07:44.043
> 
> 标签：windows, registry

我有一个供应商 DLL，它在 HKLM 注册表分支中查找一个值以更改 DLL 的行为。对于传递给 API 的简单布尔标志，这是一个糟糕的替代方案。有没有办法让 DLL 从运行时设置的变量的“本地”版本中读取？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T17:50:45.933

您可以通过第三方 dll 的导入表修补来挂钩注册表 API。您将需要修补`RegCreateKey(Ex)/RegOpenKey(ex)`和`RegGetValue`，并且每次调用第一个时，您都需要查看路径是否是您正在寻找的路径。如果是这样 - 保存生成的 HKEY 并检查以下 RegGetValue 调用以查看是否将 tat HKEY 传递给它。如果是，并且值的名称与您要查找的名称匹配 - 只需将结果替换为您需要的任何内容。

[http://www.codeproject.com/Articles/2082/API-hooking-revealed](http://www.codeproject.com/Articles/2082/API-hooking-revealed) http://www.codeproject.com/Articles/6265/Process-wide-API-spying-an-ultimate-hack

# mysql - 跨 MySQL 和 MongoDB/HBase 连接分析数据

> ID：10178516
> 
> 赞同：1
> 
> 时间：2012-04-16T17:08:24.090
> 
> 标签：mysql, mongodb, join, analytics, hbase

我们正在寻求使用 MongoDB 或 HBase 构建一个内部实时分析系统（其他选项可能，但这是我们现在正在研究的两个。）我们选择这两个是因为：

*   我们将记录大量事件，并希望能够水平和垂直扩展。
*   我们将收到“长尾”请求——例如，“给我三年前这个项目的指标”——因此需要在大范围内进行实时查询，无论是时间还是其他值。

我们尝试将 MySQL 用于分析表，但表变得非常快，我们不希望我们的分析表成为 MySQL 系统其余部分的“死重”。（如果有人有洞察力，我愿意接受有关使用 MySQL 或其他分析表解决方案的建议。）

所以，问题是：我们经常需要在我们的分析数据存储和 MongoDB/Hbase 中进行实时查找和联接。例如，我们将在分析中存储一个表的“id”，但是对于任何请求，我们都必须将它“加入”它，例如“内容”表的“标题”和“内容”字段mysql。

有没有办法在 MongoDB/HBase 和 MySQL 之间进行 JOIN，或者这是我们必须自定义构建到我们的应用程序中的东西？如果我们在应用程序中构建它，我们将如何处理跨 MySQL 和 MongoDB/HBase 的大型数据集的自定义 JOIN？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T23:44:39.883

> 有没有办法在 MongoDB/HBase 和 MySQL 之间进行 JOIN...

MongoDB 对 JOIN 的支持绝对为零。如果您使用 MongoDB，您基本上必须构建自己的联接系统

HBase 建立在 Hadoop 之上，理论上，[一些类似 JOIN 的语法是可能的](https://issues.apache.org/jira/browse/HIVE-1257)。

然而，MySQL 和 HBase 之间的连接几乎可以肯定是自定义代码。您可能需要考虑将 MySQL 数据复制*到*HBase。

> ...需要在大范围内进行实时查询... *“给我三年前这个项目的指标”*

认识到这将是一个巨大的挑战，而且你不太可能找到任何“开箱即用”的东西来为你做这件事。

您需要对“实时”一词非常谨慎。听起来您想要“相对响应的查询”而不是“实时查询”。您将必须确定“相对响应”的范围，因为这将极大地影响您使用的成本和产品。

# hibernate - 休眠状态无会话更新与多对一不工作（瞬态实例）？

> ID：10178517
> 
> 赞同：0
> 
> 时间：2012-04-16T17:08:26.040
> 
> 标签：hibernate, foreign-keys, fetch, transient

当我检索具有故意未提取的多对一关联的实体（行）然后尝试更新该实体时，我得到了著名的瞬态实例错误：

**更新 Object 对象引用未保存的瞬态实例时出错 - 在刷新之前保存瞬态实例**

但是那个“瞬态实例”从未被提取，因此甚至不能是瞬态的

**代码：**

ProductFamily - java 代码

```
public class ProductFamily
{
    private Integer id;
    private Company company;
    private String name;

    //autogenerated getter & setter and constructors
} 
```

ProductFamily - hbm.xml

```
<hibernate-mapping>
    <class name="package.ProductFamily" table="product_family" catalog="db">
        <id name="id" type="java.lang.Integer">
            <column name="id" />
            <generator class="identity" />
        </id>
        <many-to-one name="company" class="package.Company" fetch="select">
            <column name="company" not-null="true"/>
        </many-to-one>
        <property name="name" type="string">
            <column name="name" length="64" not-null="true"/>
        </property>
    </class>
</hibernate-mapping> 
```

公司-java代码

```
public class Company
{
    private String name;
    private Set<ProductFamily> productFamilies = new HashSet<ProductFamily>(0);
    //autogenerated getter & setter and constructors
} 
```

公司 - hbm.xml

```
<!-- same header as above -->
<hibernate-mapping>
    <class name="package.Company" table="company" catalog="db">
        <id name="id" type="java.lang.Integer">
            <column name="id" />
            <generator class="identity" />
        </id>
        <property name="name" type="string">
            <column name="name" length="64" not-null="true"/>
        </property>
        <set name="productFamilies" table="product_family" inverse="true" lazy="true" fetch="select">
            <key>
                <column name="company" not-null="true"/>
            </key>
            <one-to-many class="package.ProductFamily" />
        </set>
    </class>
</hibernate-mapping> 
```

测试方法简单的检索和更改和更新

```
public void test()
{
    final StatelessSession session = this.sessionFactory.openStatelessSession();

    //get
    final ProductFamily productFamily = (ProductFamily)session.get(ProductFamily.class, 1);

    //change primitive property
    productFamily.setName(productFamily.getName() + "x");

    //update
    final Transaction tr = session.beginTransaction();

    try
    {
        session.update(productFamily);
        tr.commit();
    }
    catch (HibernateException e)
    {
        logger.severe(e.getMessage() + "\n" + e.getStackTrace());
        try
        {
            if(tr != null
                && tr.isActive())
                tr.rollback();
        }
        catch (HibernateException eTr)
        {
            logger.severe(eTr.getMessage() + "\n" + eTr.getStackTrace());
        }
    }
    finally
    {
        session.close();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T01:14:37.677

错误出现在我以前没有使用过的 StatelessSession 中。忘记提了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T17:06:56.680

我无法重现问题。根据您的代码重新创建项目。数据库 - MySQL，Hibernate 4.1.1。代码毫无例外地工作。

所以，这里是[我的项目的链接](http://dl.dropbox.com/u/3855139/so-hibernate.zip)。我决定将它与我使用的库一起打包（这样您就可以检查特定版本的库是否出现问题）。

`build.xml``print`包含 3 个以预定义参数(`create`和)开头的目标`test`。

# zend-framework - ZEND FRAMEWORK => CONCAT 来选择

> ID：10178519
> 
> 赞同：1
> 
> 时间：2012-04-16T17:08:30.560
> 
> 标签：zend-framework, zend-db, zend-db-table

我有这个查询：

```
->join(array('p'=>'persona'),'u.persona_id=p.id',array('nomp'=> new Zend_Db_Expr("CONCAT(p.nombre, ' ', p.apellidos)"))) 
```

我连接（`p.nombre`y `p.apellidos`）并给它们命名为“nomp”

当我执行“Where”并给它一个“LIKE”时，我会寻找“nomp”列，zend 告诉我该列不存在。

您知道任何其他连接方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-01-12T10:18:30.137

你好你可以试试这个

```
 ->join(array('us' => 'user_subscriptions'), "user_name" => new Expression("CONCAT(first_name,' ',last_name)"), array('user_end_date' => 'end_date', 'sso_subscription_status' => 'subscription_status'), 'left'); 
```

我希望它会帮助你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T09:35:01.543

考虑这个 SQL：

```
Select x.id, CONCAT(fname,' ',lname) as name 
from 
(Select 1 as id) x
inner join 
(Select 1 as id,"Tom" as fname,"Johns" as lname) p on x.id = p.id
WHERE name = 'Tom Johns' 
```

它类似于您实际生成的内容。join 中的第三个参数是将要为该表添加的主选择列表的一部分。如您所见，变量名称是在选择列表中定义的，因此您不能在 WHERE 中使用它。您的解决方案是将 SQL 更改为类似的内容。

```
WHERE CONCAT(fname,' ',lname) like 'Tom Johns' 
```

# c# - 在 Metro (C#/XAML) 中使用 ItemsControl 拖放

> ID：10178521
> 
> 赞同：2
> 
> 时间：2012-04-16T17:08:38.783
> 
> 标签：c#, xaml, drag-and-drop, microsoft-metro

我有一个应用程序，其中有一个用户控件，其中包含一个带有正方形的 ItemsControl（由边框和底层控件表示）。把它想象成一个棋盘。

由于我的 ItemTemplate 包含一个边框，因此它不支持像 GridView 或 ListView 这样的拖放。之前我尝试对我的方块同时使用 GridView 和 ListView ，但是 GUI 变得太迟钝，所以我切换到一个简单的边框，这使它更快。

通过连接 Manipulation 事件，我仍然设法获得了我的边框及其内容的拖动行为（至少在 GUI 方面）。但是，当我尝试将一个正方形（边框）拖到另一个正方形时，我似乎无法触发 drop 事件。我需要知道目标方格是哪个。

我知道，因为我自己在做拖放功能，所以我需要做一些事情来挂钩边框的放置事件，但是什么？

我还尝试订阅边界事件 PointerEntered、PointerMoved 等，以找出指针在哪个方格上，当释放按钮时，我会知道目标方格是哪个。这似乎只在两个方向上起作用（向右和向下），当向左或向上移动时，指针事件似乎没有触发，奇怪。我在某处读过项目（正方形）具有不同的 ZIndex，这可能会影响事件的触发。

我已经为此苦苦挣扎了几个小时，非常感谢一些帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:23:16.820

创建一个附加属性并将其与Border外的父控件挂钩，将本机拖放到ItemTemplate的TargetType。

将它连接到 PreviewMouseUp 和 PreviewMouseDown 事件。

更多内容可在此处找到[WPF 教程拖放](http://wpftutorial.net/DragAndDrop.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T19:33:22.447

您只需要`Thumb`在要拖放的任何内容之上包含一个对象。该`Thumb`对象将触发所需的事件，您可以从这些事件中处理您想要的任何行为（例如，您可能希望在画布上移动底层对象以模拟拖动底层对象）。

您可以查看[Thumb 的 MSDN 页面](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.primitives.thumb)以帮助您入门。

然后，当`Thumb`您收到通知时，您会以任何适合您的方式持有您的底层证券，然后您调用`Canvas.SetLeft/Top (object, my new coordinates)`. 通常，您的新坐标将类似于`Canvas.GetLeft/Top(object) + args.Horizontal/VerticalChange`.

正如您所知道的，您必须使用 a`Canvas`并自己放置对象，而不是使用 a`Grid`或 a `ListView`。

# windows - Windows批处理脚本从文件名中删除括号中的文本？

> ID：10178524
> 
> 赞同：2
> 
> 时间：2012-04-16T17:08:59.350
> 
> 标签：windows, shell, scripting, vbscript, batch-file

我在一个文件夹中有一堆文件，我想通过 .bat 或 .vbs 脚本（或类似脚本）复制和重命名它们。这些文件被命名为：

```
ABC-DE-(XXX)SomeNameHere.dat 
```

我想**复制**文件并重命名它们，删除 (XXX) 部分，只留下：

```
ABC-DE-SomeNameHere.dat 
```

[这里](https://stackoverflow.com/questions/261515/batch-file-script-to-remove-special-characters-from-filenames-windows)回答了一种类似的问题，但我无法修改它以适用于上述文件名模式，而且它只是重命名文件，不复制它们。

任何帮助深表感谢！非常感谢。

* * *

**编辑：**在下面发布（*可怕的！*）代码。可能最好忽略这个;_;

```
@ECHO OFF
FOR %%F IN ("ABC-DE-(*)*.dat") DO CALL :process "%%F"
GOTO :EOF

:process
SET oldname=%1
SET "newname=%~nx1"
SET "newname=%newname:*] =%"
RENAME %oldname% "%newname%" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T18:50:11.507

你对自己太苛刻了。你的代码比你想象的更接近。

```
@ECHO OFF
FOR %%F IN ("ABC-DE-(*)*.dat") DO CALL :process "%%F"
GOTO :EOF

:process
SET oldname=%1
SET "newname=%~nx1"
SET "newname=%newname:*)=ABC-DE-%"
RENAME %oldname% "%newname%" 
```

以上可以缩短

```
@ECHO OFF
FOR %%F IN ("ABC-DE-(*)*.dat") DO CALL :process "%%F"
GOTO :EOF

:process
SET "name=%~nx1"
REN %1 "%name:*)=ABC-DE-%" 
```

您可以通过使用延迟扩展来消除对 CALL 的需求

```
@ECHO OFF
SETLOCAL EnableDelayedExpansion
FOR %%F IN ("ABC-DE-(*)*.dat") do (
  SET name=%%~nxF
  REN "%%F" "!name:*)=ABC-DE-!"
) 
```

上面的延迟扩展方案比使用CALL效率更高，但是如果文件名包含会失败，`!`因为%%F扩展会被延迟扩展破坏。这可以通过在循环中打开和关闭延迟扩展来解决。

```
@ECHO OFF
FOR %%F IN ("ABC-DE-(*)*.dat") do (
  SET oldName=%%F
  SET newName=%%~nxF
  SETLOCAL EnableDelayedExpansion
  REN "!oldName!" "!newName:*)=ABC-DE-!"
  ENDLOCAL
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T19:09:23.023

如果你的文件命名模式是一致的，你可以使用这个：

```
for /f "tokens=1-3 delims=)(" %%a in ('dir /b') do @rename "%%a(%%b)%%c" "%%a-%%c" 
```

# c++ - 如何在 boost::program_options 中处理未经请求的参数

> ID：10178525
> 
> 赞同：6
> 
> 时间：2012-04-16T17:09:15.980
> 
> 标签：c++, boost, boost-program-options

我用来`boost::program_options`为我的应用程序提供命令行解析接口。我想配置它来解析选项，

```
using namespace boost::program_options;
options_description desc("Allowed options");
desc.add_options()
    ("help,h", "produce help message")
    ("version,v", "print the version number")
    ("include-path,I", value< vector<string> >(), "include path")
    ("input-file,i", value<string>(), "input file");

positional_options_description p;
p.add("input-file", 1);

variables_map vm;

parsed_options parsed = command_line_parser(ac, av).
options(desc).positional(p).run();
store(parsed, vm);
notify(vm); 
```

我想对其进行配置，以便在最后一次切换之后的每个标记都以向量的形式返回。我已经尝试`collect_unrecognized`按照 Boost 文档中给出的示例使用，但我遇到了一些问题，因为我也在使用输入文件的位置参数。

基本上我想这样做。如果我有：

```
./program -i "inputfile.abc" argument1 argument2 argument3 
```

我希望它存储`inputfile.abc`在`input-file`值中并返回 a `vector<string>`of `argument1`，`argument2`并`argument3`作为未经请求的参数。

但是，我也希望能够进行位置论证，以便

```
./program "inputfile.abc" argument1 argument2 argument3 
```

会给我同样的结果。

如果已经有人问过这个问题，我很抱歉，感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T18:20:20.113

我想出了可以解决问题的代码，但这是一个轻微的解决方法。也就是说，我放弃了位置子句，并采取了无法识别的第一个论点。它似乎工作正常，但它不是很灵活。

```
using namespace boost::program_options;

options_description desc("Allowed options");
desc.add_options()
    ("help,h", "produce help message")
    ("version,v", "print the version number")
    ("include-path,I", value< vector<string> >(), "include path")
    ("input-file,i", value<string>(), "input file")
    ;

variables_map vm;
vector<string> additionalParameters;

parsed_options parsed = command_line_parser(ac, av).
    options(desc).allow_unregistered().run();
store(parsed, vm);
additionalParameters = collect_unrecognized(parsed.options, 
    include_positional);
notify(vm);

if (!vm.count("input-file"))
    if (additionalParameters.empty()) 
    {
        cerr << "error: No input file specified\n";
        return EXIT_FAILURE;
    } 
    else
    {
        inputFileName = additionalParameters[0];
        additionalParameters.erase(additionalParameters.begin());
    }
else
    inputFileName = vm["input-file"].as<string>(); 
```

# c# - 用户在datagridview中删除行

> ID：10178528
> 
> 赞同：2
> 
> 时间：2012-04-16T17:09:32.497
> 
> 标签：c#, events, datagridview

我想使用 UserDeletingRow 事件来询问用户是否确定要删除 dgv 中的选定行。问题是我不知道如何使用这个事件。另外，我想获取有关所选行的信息，以便我可以执行 SQL 请求以删除 SQL Compact 数据库中的匹配行。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T17:24:39.443

```
 private void dataGridView1_UserDeletingRow(object sender, DataGridViewRowCancelEventArgs e)
            {
              if (user don't want to remove the selected row from grid)
                e.Cancel = true; 
            } 
```

对于更新数据库记录，例如获取所需的单元格值

获取记录id `object val = dataGridView1.SelectedRows[0].Cells["IdColumns"].Value;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-14T14:26:07.993

在你的主脚本中添加这个：

```
private void DgvResults_UserDeletingRow(object sender, DataGridViewRowCancelEventArgs e)
{
    var result = MessageBox.Show("text", MessageBoxButtons.YesNo);
    if (result == DialogResult.No)
    {
        e.Cancel = true
    }
} 
```

然后将其添加到设计器文件中的适当位置：

```
this.DgvResults.UserDeletingRow += new System.Windows.Forms.DataGridViewRowCancelEventHandler(this.DgvResults_UserDeletingRow); 
```

# javascript - JMVC：steal/buildjs - 构建抛出错误“无法打开文件文件：/profile/getPolicy

> ID：10178535
> 
> 赞同：1
> 
> 时间：2012-04-16T17:09:56.170
> 
> 标签：javascript, jquery, javascriptmvc

有问题的“文件”实际上是一个 Ajax 调用。对于特定文件中的每个 ajax 调用，我们几乎都会遇到一个错误。我们过去常常打开固定装置，但从那以后就将它们移除了。

错误：

```
failed to open file  file:/profile/getPolicy   JavaException: java.io.FileNotFoundException: /profile/getPolicy (No such file or directory) 
Exception in thread "Thread-2" org.mozilla.javascript.EcmaError: TypeError: Cannot call method "indexOf" of null (steal/rhino/env.js#24532)
    at org.mozilla.javascript.ScriptRuntime.constructError(ScriptRuntime.java:3654)
    at org.mozilla.javascript.ScriptRuntime.constructError(ScriptRuntime.java:3632)
    at org.mozilla.javascript.ScriptRuntime.typeError(ScriptRuntime.java:3660)
    at org.mozilla.javascript.ScriptRuntime.typeError2(ScriptRuntime.java:3679)
    at org.mozilla.javascript.ScriptRuntime.undefCallError(ScriptRuntime.java:3698)
    at org.mozilla.javascript.ScriptRuntime.getPropFunctionAndThisHelper(ScriptRuntime.java:2221)
    at org.mozilla.javascript.ScriptRuntime.getPropFunctionAndThis(ScriptRuntime.java:2214)
    at org.mozilla.javascript.Interpreter.interpretLoop(Interpreter.java:3143)
    at script(steal/rhino/env.js:24532)
    at script(steal/rhino/env.js:2278)
    at script.makeRequest(steal/rhino/env.js:24484)
    at script(steal/rhino/env.js:2027)
    at org.mozilla.javascript.Interpreter.interpret(Interpreter.java:2487)
    at org.mozilla.javascript.InterpretedFunction.call(InterpretedFunction.java:164)
    at org.mozilla.javascript.ContextFactory.doTopCall(ContextFactory.java:398)
    at org.mozilla.javascript.ScriptRuntime.doTopCall(ScriptRuntime.java:3065)
    at org.mozilla.javascript.InterpretedFunction.call(InterpretedFunction.java:162)
    at org.mozilla.javascript.Synchronizer.call(Synchronizer.java:79)
    at org.mozilla.javascript.tools.shell.Runner.run(Global.java:1162)
    at org.mozilla.javascript.Context.call(Context.java:515)
    at org.mozilla.javascript.ContextFactory.call(ContextFactory.java:507)
    at org.mozilla.javascript.tools.shell.Runner.run(Global.java:1156)
    at java.lang.Thread.run(Thread.java:662)
could not load script  http://localhost:3000/socket.io/1/?t=1334594888337&jsonp=0  
  TypeError: Cannot find function 0.0\. 
!!!!!!!!!!! ERROR !!!!!!!!!!!

-message    = Cannot find function 0.0.
-fileName   = http://localhost:3000/socket.io/1/?t=1334594888337&jsonp=0
-name       = TypeError
-lineNumber = 0
failed to open file  file:/profile/getProfile   JavaException: java.io.FileNotFoundException: /profile/getProfile (No such file or directory) 
Exception in thread "Thread-4" org.mozilla.javascript.EcmaError: TypeError: Cannot call method "indexOf" of null (steal/rhino/env.js#24532) 
```

如您所见，下一个错误与下一个 ajax 调用有关。我们的 ajax 调用并没有做任何奇怪的事情：

```
$.ajax({
        url:"/profile/getProfile",
        type:"get",
        success:function(data){
            try{
                STATE.PROFILE = JSON.parse(data);
            }catch(err){
                STATE.PROFILE = data;
            }
            updateState();
        }
    }); 
```

有谁知道为什么我们在尝试构建时会遇到这些错误？此代码在浏览器中运行良好！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T19:16:41.087

布赖恩，毕竟你是对的，事实上删除 Ajax 调用确实会从构建中删除错误。虽然措辞变了。我们的一位开发人员在以下页面上发现了“steal.isRhino”的提及：http://javascriptmvc.com/docs.html#! [migrate](http://javascriptmvc.com/docs.html#!migrate)

因此，使用 if 语句封装每个 ajax 调用确实有效：

```
 if(!steal.isRhino) {
  } 
```

但是，这在整个应用程序中是不可行的。 **幸运的是，我们的一位开发人员确实找到了正确的解决方案：**

所有 ajax 调用必须有一个完整的 url： [http://localhost:3000/profile/getProfile](http://localhost:3000/profile/getProfile) - 不只是 - /profile/getProfile

# asp.net-mvc-3 - 自定义 HtmlHelper 在用于强类型视图时失败

> ID：10178536
> 
> 赞同：0
> 
> 时间：2012-04-16T17:09:58.513
> 
> 标签：asp.net-mvc-3, razor, html-helper

我有以下自定义 HtmlHelper 签名：

```
 public static MvcHtmlString MessageBox(this HtmlHelper htmlHelper, string name, object value, object htmlAttributes = null) {...} 
```

我在剃刀视图中使用这个助手，如下所示：

```
@Html.MessageBox("msg", ViewBag.Message) 
```

它可以工作，但是当视图是强类型时，我收到了这个错误：

**编译器错误消息：CS1973：“System.Web.Mvc.HtmlHelper”没有名为“MessageBox”的适用方法，但似乎具有该名称的扩展方法。扩展方法不能动态调度。考虑强制转换动态参数或在没有扩展方法语法的情况下调用扩展方法。**

我不需要附加任何模型，所以我想知道如何在不编写新方法的情况下解决这个问题。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T21:13:11.400

我相信扩展方法无法确定您的调用`MessageBox(string, Message)`实际上是调用`MessageBox(string, object)`. 您只需要将您的`Message`转换为`object`：

```
@Html.MessageBox("msg", (object) new Message("Hola Mundo")) 
```

# javascript - Backbone.js ：从集合中删除一个项目

> ID：10178540
> 
> 赞同：5
> 
> 时间：2012-04-16T17:10:17.813
> 
> 标签：javascript, backbone.js

我正在使用backbone.js 来实现一个好友列表，也就是名册。我对名册集合和个人的主干观点`rosterEntry`如下：

```
 Slx.Roster.Views.RosterEntry = Backbone.View.extend({
    tagName: "li",
    className : "rosterEntry clearfix",
    templateSelector: '#rosterEntryTemplate',

    initialize: function() {
        _.bindAll(this, 'render');
        this.model.bind('change', this.render);
        this.model.bind('remove', this.remove);
        this.template = _.template($("#rosterEntryTemplate").html());
    },

    remove: function () {
        debug.log("Called remove event on model");
        $(this.el).remove();
    },
    render: function() {
        var renderedContent = this.template(this.model.toJSON());
        this.id = this.model.Id;
        $(this.el).attr('id', "friendid-" + this.model.get("id")).html(renderedContent);
        return this;
    }
});

    Slx.Roster.Views.Roster = Backbone.View.extend({
        el: "div#roster-container",
        initialize: function () {
            _.bindAll(this, 'render', 'add', 'remove');
            this.template = _.template($("#rosterTemplate").html());
            this.collection.bind('reset', this.render);
            this.collection.bind('add', this.add);
            this.collection.bind('remove', this.remove);
        },
        add: function (rosterEntry) {
            var view = new Slx.Roster.Views.RosterEntry(
                {
                    model: rosterEntry
                });
            $(this.el).append(view.render().el);
        },
        remove: function (model) {  // if I ommit this then the whole collection is removed!!
            debug.log("called remomve on collection");
        },
        render: function () {
            var $rosterEntries, collection = this.collection;

            $(this.el).html(this.template({}));
            $rosterEntries = this.$('#friend-list');

            _.each(collection.models, function (model) {
                var rosterEntryView = new Slx.Roster.Views.RosterEntry({
                    model: model,
                    collection: collection
                });

                $(this.el).find("ul#friend-list").append(rosterEntryView.render().el);
            }, this);

            return this;
        }
    }) 
```

我现在正在使用 Firebug 控制台进行测试，并且可以通过执行以下命令很好地填充花名册：

```
collection = new Slx.Roster.Collection
view = new Slx.Roster.Views.Roster({collection:collection})
collection.fetch() 
```

通过在 Firebug 控制台中执行以下命令，添加到集合也可以正常工作：

`collection.add(new Slx.Roster.Model({username:"mickeymouse"})`

并且新`rosterEntry`的被添加到名册中。

我的问题是`collection.remove(5)`从内存集合中删除，但没有更新 DOM。

奇怪的是，如果我`remove()`从名册视图中省略该函数，名册中的所有条目都会被删除。如果我添加了这个方法，除了控制台日志之外什么都没有，它`RosterEntry`会调用名册和视图上的 remove 方法 - 虽然我不知道为什么，但它们是乱序的！

```
["Called remove event on model"]
["called remomve on collection"] 
```

如果我从 RosterEntry 模型中删除删除功能，我会收到此错误：

```
TypeError: this.$el is undefined
this.$el.remove(); 
```

我究竟做错了什么？从集合中删除元素时，如何从 DOM 中删除元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T18:33:44.840

我认为您`context`在每个事件绑定定义中都有问题。

尝试改变这一点：

```
this.model.bind('remove', this.remove); 
```

为了这：

```
this.model.bind('remove', this.remove, this); 
```

我知道您已尝试使用 解决此问题`bindAll`，但是`bindAll`正在使用实际对象的上下文包装对列出的方法的每个调用，但是如果您**在其他对象上调用相同的方法，**这将无济于事:)。

# 更新

我已经阅读了更多.. 看起来`bindAll`和命令的第三个参数`bind`完全一样。所以也许你可以使用其中一个。

*因为*`bindAll`在其中不起作用是`model.remove`因为您忘记将其添加到该`_.bindAll(this, 'render')`行中，请查看您的代码。我的建议解决了这个问题，因为正如我所说，两种方法都是一样的。

所有这一切都是为了确保对列出的方法的调用（`render, remove, ...`在一种情况下或`this.remove`另一种情况下）将被解释`this`为对实际对象的引用。这看起来很愚蠢，但在 JS`this`中非常*不稳定。*

如果您仍然对这件事感到困惑，请不要担心`this`，我已经处理了很长时间，但仍然[没有完全确定](https://twitter.com/#!/fguillen/status/136760076491956224)。

也许[这样的论文](http://unschooled.org/2012/03/understanding-javascript-this/)可以帮助我们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T19:32:31.433

您是否尝试过以下操作？

```
this.listenTo(this.model, "remove", this.remove); 
```

这似乎对我有用，我更喜欢它的阅读方式。

[链接到主干文档](http://backbonejs.org/#Events-listenTo)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-16T17:57:53.373

两个视图上的 remove 方法可能都被调用了，因为您必须在模型和集合上都删除。

在名册条目中：

```
 this.model.bind('remove', this.remove); 
```

在名册中：

```
this.collection.bind('remove', this.remove); 
```

# objective-c - 如何控制 iPhone 屏幕上的单个像素？

> ID：10178541
> 
> 赞同：2
> 
> 时间：2012-04-16T17:10:28.010
> 
> 标签：objective-c, ios

我正在尝试使用 iOS 和 Objective C 编写一个程序，在我的 iPhone 屏幕上绘制抛物线。

为此，我必须能够切换 iPhone 屏幕上的单个像素是黑色还是白色。

如何控制单个像素？我找不到合适的 UIView 对象来使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T20:08:49.027

您可能想阅读 Core Plot 的代码（或只是使用它）

[http://code.google.com/p/core-plot/](http://code.google.com/p/core-plot/)

基本上，它使用核心图形库。这是绘制条形图的代码

[http://code.google.com/searchframe#yOGuvxPxbkc/framework/Source/CPBarPlot.m&l=330](http://code.google.com/searchframe#yOGuvxPxbkc/framework/Source/CPBarPlot.m&l=330)

这叫这个

[http://code.google.com/searchframe#yOGuvxPxbkc/framework/Source/CPBarPlot.m&l=390](http://code.google.com/searchframe#yOGuvxPxbkc/framework/Source/CPBarPlot.m&l=390)

对于每个酒吧。

这是核心图形的文档

[http://developer.apple.com/library/ios/#DOCUMENTATION/CoreGraphics/Reference/CoreGraphics_Framework/_index.html](http://developer.apple.com/library/ios/#DOCUMENTATION/CoreGraphics/Reference/CoreGraphics_Framework/_index.html)

这是一个开始的地方

[http://developer.apple.com/library/ios/#DOCUMENTATION/GraphicsImaging/Conceptual/drawingwithquartz2d/dq_context/dq_context.html#//apple_ref/doc/uid/TP30001066-CH203-TPXREF101](http://developer.apple.com/library/ios/#DOCUMENTATION/GraphicsImaging/Conceptual/drawingwithquartz2d/dq_context/dq_context.html#//apple_ref/doc/uid/TP30001066-CH203-TPXREF101)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T17:12:43.890

这不是切换像素的情况——你只需要在屏幕上你想要的地方画一个正方形。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T17:24:32.603

对于绘图，您可能需要认真研究[Quartz 2D](https://developer.apple.com/library/mac/#documentation/graphicsimaging/conceptual/drawingwithquartz2d/Introduction/Introduction.html)。比标准 UIView 的东西更复杂，但更丰富。

# android - 如何使用适用于 Android 的 AIR Flex Mobile SDK 流式传输视频？

> ID：10178542
> 
> 赞同：0
> 
> 时间：2012-04-16T17:10:30.780
> 
> 标签：android, air, flex-mobile

我只是想在 Android 设备 (Nexus S) 上的 Flex Mobile AIR 项目中流式传输网络上的视频文件。

我的文件格式是 H.264 .mp4 我正在使用 stageWebView 加载一个远程网页，该网页具有一个以视频集为源的视频标签。它在普通的安卓浏览器中播放，

海报图像与视频控件一起显示在 AIR 中，但是当单击播放按钮时，海报图像消失但没有视频无限期播放。

我尝试了多个视频，多个编解码器，它适用于 iOS，我觉得我正在服用疯狂的药丸，有没有人能够在 AIR for Android 上成功流式传输视频？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T00:45:49.100

您是否尝试过使用 NetStream 和 Video？

尝试从这篇文章中实施解决方案

[h264 FLV 的 NetStream appendByte 问题。视频在结束前约两秒停止](https://stackoverflow.com/questions/5899170/netstream-appendbyte-issue-with-h264-flv-video-stops-about-two-second-before-th)

请务必阅读评论并添加完整的侦听器

```
_ustream.addEventListener( Event.COMPLETE, onComplete );

  private function onComplete( e:Event ):void
  {
      _ns.appendBytesAction(NetStreamAppendBytesAction.END_SEQUENCE);
  } 
```

# mysql - wamp 服务器中的服务器没有响应（或本地 MySQL 服务器的套接字配置不正确）

> ID：10178547
> 
> 赞同：13
> 
> 时间：2012-04-16T17:10:46.827
> 
> 标签：mysql

我目前在我的 phpmyadmin 中收到此错误：

# 2002 - 服务器没有响应（或者本地 MySQL 服务器的套接字没有正确配置）

我尝试使用谷歌搜索并尝试找到每个解决方案。不幸的是，没有什么对我有用。

顺便说一句，我正在使用 wamp 服务器。

下面是我从 C:\wamp\apps\phpmyadmin3.2.0.1 配置的 config.inc.php 配置文件。

```
<?php

/* Servers configuration */
$i = 0;

/* Server: localhost [1] */
$i++;
$cfg['Servers'][$i]['verbose'] = 'localhost';
$cfg['Servers'][$i]['host'] = 'localhost';
$cfg['Servers'][$i]['port'] = '';
$cfg['Servers'][$i]['socket'] = '/tmp/mysql.sock';
$cfg['Servers'][$i]['connect_type'] = 'tcp';
$cfg['Servers'][$i]['extension'] = 'mysqli';
$cfg['Servers'][$i]['auth_type'] = 'config';
$cfg['Servers'][$i]['user'] = 'root';
$cfg['Servers'][$i]['password'] = '';
$cfg['Servers'][$i]['AllowNoPassword'] = true;

/* End of servers configuration */

$cfg['DefaultLang'] = 'en-utf-8';
$cfg['ServerDefault'] = 1;
$cfg['UploadDir'] = '';
$cfg['SaveDir'] = '';

?> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-03T11:13:09.533

这里有可能的解决方案：[http](http://forums.mysql.com/read.php?35,64808,254785#msg-254785) ://forums.mysql.com/read.php?35,64808,254785#msg-254785 和这里： http: [//forums.mysql.com/read.php?35,23138， 254786#msg-254786](http://forums.mysql.com/read.php?35,23138,254786#msg-254786)

所有这些都是配置设置。就我而言，我有两台计算机，XAMPP 中的所有内容都已同步。在另一台计算机上，phpMyAdmin 确实正常启动。所以我的问题似乎出在特定的计算机上，而不是配置文件上。停止防火墙没有帮助。

最后，或多或少偶然，我碰到了文件：

...path_to_XAMPP\XAMPP...\mysql\bin\mysqld-debug.exe

双击该文件奇迹般地让我回到了 PhpMyAdmin。发布在这里，以防任何人也可能因此得到帮助。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-07-06T06:30:08.827

我面临同样的问题并且正在改变

```
$cfg['Servers'][$i]['host'] = 'localhost';
```

至

```
$cfg['Servers'][$i]['host'] = '127.0.0.1';
```

解决了这个问题。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-04-16T17:14:02.620

mysql默认端口是3306 能不能试试把它再试试

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-28T14:42:02.203

我有一个类似的问题，全新安装和同样的错误令人惊讶。最后我发现这是浏览器cookie的问题......

1.  在尝试任何配置更改之前，请尝试清理您的浏览器 cookie 并查看它是否有助于解决此问题。

2.  尝试使用 XAMPP 控制面板的“管理”按钮而不是通常的`http://localhost`或`http://localhost/phpmyadmin`

3.  尝试直接链接：`http://localhost/phpmyadmin/main.php`或`http://127.0.0.1/phpmyadmin/main.php`

4.  最后试试这个：`http://localhost/phpmyadmin/index.php?db=phpmyadmin&server=1&target=db_structure.php`

不知何故，如果您有旧安装并升级到新版本，它会通过 cookie 跟踪您的旧设置。

如果此解决方案有帮助，请告诉我。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-02-02T04:54:49.310

我使用 XAMPP 并且有同样的错误。我使用了上面的[Paul Gobée](https://stackoverflow.com/users/1872387/paul-gobee)解决方案，它对我有用。我导航到`C:\xampp\mysql\bin\mysqld-debug.exe`并在启动`.exe`我的 Windows 防火墙时弹出请求权限。一旦我允许它，它工作得很好。我会在他的帖子下发表评论，但我还没有那么多代表……对不起！只是想让每个人都知道这对我也有用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-02T20:36:42.260

如果您使用 MAMP，请确保它已启动。:)

我刚遇到这个问题，在启动 MAMP 后，错误就消失了。不是我最美好的时刻。

# javascript - 阻止浮动 HTML 元素下降到下一行

> ID：10178548
> 
> 赞同：4
> 
> 时间：2012-04-16T17:10:46.827
> 
> 标签：javascript, html, css

我正在构建一个网站，该网站旨在显示许多动态数量的 div 元素（每个元素都有自己的宽度），但它们不是沿着页面向下移动，而是水平移动。但是，当合并宽度大于容器 div 的项目数时，它会自动下降到下一行。有没有办法阻止这种情况发生，并允许水平滚动（通过脚本而不是溢出栏）？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-16T17:13:39.330

而不是浮动它们，将它们设置为`display:inline-block;`. 将包含元素设置为`overflow:hidden;`，然后您可以使用脚本通过多种方式滚动它们，例如调整第一个元素的边距，或将它们包装在另一个元素中并更改`left`属性（您需要设置`position`如果你走这条路）。

编辑：您还需要设置`white-space:nowrap`

看到这个工作小提琴：http: [//jsfiddle.net/D8bea/](http://jsfiddle.net/D8bea/)

# perl - perl 中不能重载构造函数

> ID：10178555
> 
> 赞同：3
> 
> 时间：2012-04-16T17:11:15.807
> 
> 标签：perl, oop, constructor, overloading

OOP perl 的新手...第一个程序，而不是重载构造函数。我已经尝试了很多东西，可能我仍然缺少一些东西！

基类：

```
#!/usr/bin/perl
use strict;
package Person;
sub new
{
my($class)=shift;
my($self)={ 
        _name=>shift,
        _sname=>shift,
};
bless $self, $class;
return $self;
}       
1; 
```

派生类：

```
#!/usr/bin/perl
package Employee;
use strict;
use Person;
our @ISA = qw(Person);
sub new
{
my($class)=@_;
my($self)=$class->SUPER::new($_[1],$_[2]);
my $self1={
        _id=>$_[3],
        _sal=>$_[4],
};
bless $self1,$class;
return ($self);
}
1; 
```

主程序：

```
#!/usr/bin/perl
use strict;
use Data::Dumper;
use Employee;

sub main
{
my($obj)=Employee->new("abc","def","515","10");
print Dumper $obj;
}
main(); 
```

我无法获取基类类成员的值。没有得到我在程序中错过的东西。帮帮我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-16T17:17:36.820

不需要`$self1`在派生构造函数中调用对象。你应该说：

```
sub new {
    my($class)=@_;
    my($self)=$class->SUPER::new($_[1],$_[2]);
    $self->{_id} = $_[3];
    $self->{_sal} = $_[4];
    # no need to bless -- $self is already blessed correctly in SUPER::new
    return ($self);
} 
```

# facebook - 从 Facebook Business 帐户访问统计信息

> ID：10178558
> 
> 赞同：1
> 
> 时间：2012-04-16T17:11:47.963
> 
> 标签：facebook, facebook-graph-api, statistics, account

我是一家公司的网站开发人员，我想在我们的网站上显示来自社交网络的统计数据。Facebook 让我陷入了困境。fb 帐户是作为企业创建的，我现在知道企业帐户无法使用 FB API 创建或编辑应用程序。

没有 App ID 和秘密，有什么方法可以访问分析/统计信息？还是我必须创建个人帐户才能使用 FB API？

[黑莓的社区](http://ca.blackberry.com/communities/?lid=ca%3abb%3aCommunities&lpos=ca%3abb%3aCommunities)页面就是一个很好的例子。我不知道他们是否有个人或企业帐户，但这正是我想要实现的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T17:47:10.090

如果您所追求的只是粉丝的数量，那么这是轻而易举的事。

查看 Blackberry 的 Facebook 页面的 JSON 数据：

[https://graph.facebook.com/blackberry](https://graph.facebook.com/blackberry)

JSON 数据中有一个`likes`块（请注意，您不需要经过身份验证或需要任何访问令牌或应用程序 ID）。

要为您的主页获取此信息，请`blackberry`将该 URI 替换为您的主页的短名称或主页 ID，您将获得类似的 JSON 块。这是耐克的： http: [//graph.facebook.com/nike](http://graph.facebook.com/nike)

你可以在前端使用 JSONP 来获取它，或者在服务器端获取响应并在那里解析它（如果你这样做，缓存它可能是个好主意）。

除此之外，还需要一个 App ID、一个访问令牌和一些 FQL。

# c# - 淡出面板 - Windows 窗体

> ID：10178559
> 
> 赞同：9
> 
> 时间：2012-04-16T17:11:56.897
> 
> 标签：c#, winforms, .net-3.5

我有一个可以显示或隐藏的详细信息面板。

如何制作一个简单的淡入淡出效果来显示/隐藏该面板（当然还有它的内容）？

**我正在使用 Windows 窗体，并且控件在 Windows 窗体中没有`opacity`属性。**

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-16T21:21:14.000

这在 Winforms 中是非常可行的，它只需要*看起来*像一个淡入淡出。一种技术是使用 Control.DrawToBitmap() 创建控件的位图。然后使用计时器从背景位图混合到前景位图。

我将使用 UserControl 而不是 Panel，以便您可以使用 Winforms 设计器设计控件。然而，该代码将在任何类型的控制下工作。向您的项目添加一个新类并粘贴如下所示的代码。编译。使用 Project + Add New Item、Windows Forms 节点、“Inherited User Control”模板创建您自己的 UserControl，然后从弹出列表中选择 FadeControl。像往常一样设计用户控件。

正如所写，只要将控件添加到父级，控件就会自动从父级的 BackColor 淡出到控件内容。调用 FadeOut() 使其混合回背景。如果您想在控件完成淡入时自动处理控件，请传递 true。您可以使用 FadeIn() 和 Faded 属性来手动控制渐变。您可以调整用 // 可调整来调整动画的注释行中的数字。如果父级具有非透明背景，则需要进行额外的工作。

```
using System;
using System.Drawing;
using System.Drawing.Imaging;
using System.Windows.Forms;

class FadeControl : UserControl {

    public FadeControl() {
        pbox = new PictureBox();
        pbox.BorderStyle = BorderStyle.None;
        pbox.Paint += new PaintEventHandler(pbox_Paint);
        fadeTimer = new Timer();
        fadeTimer.Interval = 15;   // tweakable
        fadeTimer.Tick += new EventHandler(fadeTimer_Tick);
    }

    public bool Faded {
        get { return blend < 0.5f; }
    }
    public void FadeIn() {
        stopFade(false);
        createBitmaps();
        startFade(1);
    }
    public void FadeOut(bool disposeWhenDone) {
        stopFade(false);
        createBitmaps();
        disposeOnComplete = disposeWhenDone;
        startFade(-1);
    }

    private void createBitmaps() {
        bmpBack = new Bitmap(this.ClientSize.Width, this.ClientSize.Height);
        using (var gr = Graphics.FromImage(bmpBack)) gr.Clear(this.Parent.BackColor);
        bmpFore = new Bitmap(bmpBack.Width, bmpBack.Height);
        this.DrawToBitmap(bmpFore, this.ClientRectangle);
    }
    void fadeTimer_Tick(object sender, EventArgs e) {
        blend += blendDir * 0.02F;   // tweakable
        bool done = false;
        if (blend < 0) { done = true; blend = 0; }
        if (blend > 1) { done = true; blend = 1; }
        if (done) stopFade(true); 
        else pbox.Invalidate();
    }
    void pbox_Paint(object sender, PaintEventArgs e) {
        Rectangle rc = new Rectangle(0, 0, pbox.Width, pbox.Height);
        ColorMatrix cm = new ColorMatrix();
        ImageAttributes ia = new ImageAttributes();
        cm.Matrix33 = blend;
        ia.SetColorMatrix(cm);
        e.Graphics.DrawImage(bmpFore, rc, 0, 0, bmpFore.Width, bmpFore.Height, GraphicsUnit.Pixel, ia);
        cm.Matrix33 = 1F - blend;
        ia.SetColorMatrix(cm);
        e.Graphics.DrawImage(bmpBack, rc, 0, 0, bmpBack.Width, bmpBack.Height, GraphicsUnit.Pixel, ia);
    }

    private void stopFade(bool complete) {
        fadeTimer.Enabled = false;
        if (complete) {
           if (!Faded) this.Controls.Remove(pbox);
           else if (disposeOnComplete) this.Dispose();
        }
        if (bmpBack != null) { bmpBack.Dispose(); bmpBack = null; }
        if (bmpFore != null) { bmpFore.Dispose(); bmpFore = null; }
    }
    private void startFade(int dir) {
        this.Controls.Add(pbox);
        this.Controls.SetChildIndex(pbox, 0);
        blendDir = dir;
        fadeTimer.Enabled = true;
        fadeTimer_Tick(this, EventArgs.Empty);
    }

    protected override void OnCreateControl() {
        base.OnCreateControl();
        if (!DesignMode) FadeIn();
    }
    protected override void OnResize(EventArgs eventargs) {
        pbox.Size = this.ClientSize;
        base.OnResize(eventargs);
    }
    protected override void Dispose(bool disposing) {
        if (disposing) {
            stopFade(false);
            pbox.Dispose();
            fadeTimer.Dispose();
        }
        base.Dispose(disposing);
    }

    private PictureBox pbox;
    private Timer fadeTimer;
    private Bitmap bmpBack, bmpFore;
    private float blend;
    private int blendDir = 1;
    private bool disposeOnComplete;
} 
```

# php - 有没有办法使用 FPDF 库设置输出 pdf 的 DPI？

> ID：10178560
> 
> 赞同：7
> 
> 时间：2012-04-16T17:12:02.263
> 
> 标签：php, fpdf

有没有办法使用 FPDF 库在不影响其大小的情况下降低输出 pdf 的 DPI？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-16T17:42:07.313

据我所知，PDF 文档没有 DPI 设置，因为它们是矢量对象。我假设您实际上是指嵌入式光栅图像（JPEG、GIF ...）。在这种情况下，只需检查[Image() 函数的文档](http://fpdf.org/en/doc/image.htm)：如果您写入负值，第四个和第五个参数 ( `$w`and ) 可以表示所需的 DPI：`$h`

```
// Insert a logo in the top-left corner at 300 dpi
$pdf->Image('logo.png',10,10,-300); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-14T11:50:57.570

如果您正在寻找一种在 mPdf 中设置转换 px -> mm 的方法：

[http://mpdf1.com/manual/index.php?tid=449](http://mpdf1.com/manual/index.php?tid=449)

[http://mpdf1.com/manual/index.php?tid=148](http://mpdf1.com/manual/index.php?tid=148)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T17:32:36.247

不，但是如果您正在考虑减小文档的大小，您可以使用 FPDF SetCompression() 方法：

```
$pdf = new FPDF();
$pdf->SetCompression(true); 
```

他们的网页上有更多详细信息，在“手册”部分：[http](http://www.fpdf.org/en/doc/setcompression.htm) ://www.fpdf.org/en/doc/setcompression.htm 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-14T16:38:34.843

```
function toMM($v) {
   return ($v * 26.2) / 25.4;
} 
```

[http://www.dallinjones.com/2008/07/how-to-convert-from-pixels-to-millimeters/comment-page-1/#comment-1079](http://www.dallinjones.com/2008/07/how-to-convert-from-pixels-to-millimeters/comment-page-1/#comment-1079)

# dozer - 如何使用 Dozer 映射空数组

> ID：10178564
> 
> 赞同：1
> 
> 时间：2012-04-16T17:12:15.897
> 
> 标签：dozer

我正在使用推土机将一个数组映射到一个完美运行的列表，但是当我尝试将该列表映射到一个数组时，如果列表为空，我会得到一个空对象。

这是一个例子：

假设我有一个type1的数组，它没有孩子，所以长度为0。映射到列表后，我得到一个空列表，这很正常。

当我尝试映射那个空列表时，问题就开始了，我得到了一个空数组，但我想得到一个空数组（不是空的，而是长度=0）。

我可以在映射文件中更改什么，以便获得我想要的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T10:02:14.223

```
<mappings xmlns="http://dozer.sourceforge.net" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://dozer.sourceforge.net
          http://dozer.sourceforge.net/schema/beanmapping.xsd">

<mapping map-null="true" map-id="yourClassMapping" >
    <class-a>yourClass1</class-a>
    <class-b>yourClass2</class-b>
    <field map-id="list2Array">
        <a>list</a>
        <b>array</b>
        <a-hint>java.util.List</a-hint>
        <b-hint>java.util.ArrayList</b-hint>
    </field>
    ...
</mapping>
</mappings> 
```

# iphone - 仅限 iOS 上的内容顶部的 Youtube 视频 (iPad/iPhone)

> ID：10178571
> 
> 赞同：1
> 
> 时间：2012-04-16T17:12:42.117
> 
> 标签：iphone, ios, ipad, youtube, z-index

我的问题很简单：

*   我的页面中嵌入了一个 youtube 视频
*   我有一个登录模式，应该在执行某些操作时显示

在桌面上一切都很好，但在 iPad 上，登录模式隐藏在 youtube 视频后面。

我发现的常见解决方案：

```
<param name="wmode" value="opaque"> 
```

在 iOS 上不起作用（因为我猜它没有使用 flash 版本）。

我尝试使用两者`object`并`iframe`嵌入视频，但它们都不起作用。

有任何想法吗？

# python - Pythonic 方式来修改列表中的所有项目，并将列表保存到 .txt 文件

> ID：10178573
> 
> 赞同：6
> 
> 时间：2012-04-16T17:12:44.737
> 
> 标签：python, file, list

我有一个字符串列表。

```
theList = ['a', 'b', 'c'] 
```

我想将整数添加到字符串中，从而产生如下输出：

```
newList = ['a0', 'b0', 'c0', 'a1', 'b1', 'c1', 'a2', 'b2', 'c2', 'a3', 'b3', 'c3'] 
```

我想将其保存为 .txt 文件，格式如下：

```
a0
b0
c0
a1
b1
c1
a2
b2
c2
a3
b3
c3 
```

尝试：

```
theList = ['a', 'b', 'c']
newList = []

for num in range(4):
    stringNum = str(num)
    for letter in theList:
        newList.append(entry+stringNum)

with open('myFile.txt', 'w') as f:
    print>>f, newList 
```

现在我可以保存到文件 myFile.txt 但文件中的文本为：

```
['a0', 'b0', 'c0', 'a1', 'b1', 'c1', 'a2', 'b2', 'c2', 'a3', 'b3', 'c3'] 
```

非常欢迎任何有关实现我的目标的 Pythonic 方法的提示，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-16T17:15:13.960

而不是你的最后一行，使用：

```
f.write("\n".join(newList)) 
```

这会将 newList 中的字符串（以换行符分隔）写入 f。请注意，如果您实际上不需要 newList，则可以组合两个循环并随时编写字符串：

```
the_list = ['a', 'b', 'c']

with open('myFile.txt', 'w') as f:
    for num in range(4):
        for letter in the_list:
            f.write("%s%s\n" % (letter, num)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T17:21:19.633

这可能会做你的工作

```
with open('myFile.txt', 'w') as f:
    for row in itertools.product(range(len(theList)+1),theList):
        f.write("{1}{0}\n".format(*row)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-16T17:21:39.353

如果你想稍微压缩你的代码，你可以这样做：

```
>>> n = 4
>>> the_list = ['a', 'b', 'c']
>>> new_list = [x+str(y) for x in the_list for y in range(n)]
>>> with open('myFile.txt', 'w') as f:
...     f.write("\n".join(new_list)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T17:21:52.353

你所做的很好[——Python 之禅](http://www.python.org/dev/peps/pep-0020/)的要点之一是“简单胜于复杂”。您可以轻松地将其重写为单行（可能使用嵌套列表理解），但是您所拥有的很好且易于理解。

但我可能会做一些小改动：

*   通常最好通过 Python 的`json.dump(newList, f)`. 不过，很适合使用该`with`语句。
*   你不需要一个单独的`stringNum`变量——`str(num)`在 append 里面也一样好
*   遵循[PEP-8](http://www.python.org/dev/peps/pep-0008/)命名约定，`new_list`而不是`newList`
*   吹毛求疵：您的问题标题说“修改列表中的所有项目”，而实际上您的代码正在构建一个新列表。通常这是 Pythonic 的事情——就地修改列表等副作用通常不太有用。

# jqgrid - 低于行数的记录数 - 垂直滚动条

> ID：10178575
> 
> 赞同：2
> 
> 时间：2012-04-16T17:12:48.990
> 
> 标签：jqgrid

如果`reccount < rownum`那么我在最后一列之后有一个“空列”。如何避免这种现象？实际上这个列有垂直滚动条的尺寸！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T19:18:06.887

是的，即使网格中没有足够的行需要滚动条，通常也会为垂直滚动条保留空间。请参阅[jqgrid-is-there-a-way-to-always-display-a-vertical-scrollbar](https://stackoverflow.com/questions/1575051/jqgrid-is-there-a-way-to-always-display-a-vertical-scrollbar)以获取有关如何始终显示垂直滚动条以确保空间被填充的一些想法。

或者，如果您知道永远不会有足够的行需要滚动条，您可以将 设置`scrollOffset`为`0`回收空间。从[jqGrid 文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:options)：

> **滚动偏移**
> 
> 整数
> 
> 确定垂直滚动条的宽度。由于不同的浏览器对此宽度的解释不同（并且在所有浏览器中都很难计算），因此可以更改此宽度。

# asp.net - 需要一种在 ASP.NET Web 窗体应用程序的子文件夹中托管 ASP.NET MVC 文件的好方法

> ID：10178579
> 
> 赞同：3
> 
> 时间：2012-04-16T17:13:06.500
> 
> 标签：asp.net, asp.net-mvc, webforms

我有一个 ASP.NET 4.0 Web 表单应用程序，需要在同一个 Web 中托管一个 ASP.NET MVC 应用程序（即在同一个 IIS 进程中 - 相同的会话、模块等）

只要两者中的文件夹/文件都位于根文件夹中，这很容易工作。

我怎样才能干净地允许 MVC 文件全部包含在子文件夹中？

我有一个视图引擎，可以为子文件夹添加位置格式。这允许所有控制器/视图的东西正常工作，但我需要一个好的内容文件解决方案。目前，我必须小心确保 MVC 应用程序中的所有路径都指向 MVC 子文件夹名称，如下所示：

```
Url.Content("~/mvc/Content/Site.css") 
```

有哪些可靠的选择可以实现这一目标？

我不希望任何进出 Web 表单的请求受到影响。此逻辑应仅操作可在 MVC 引擎内解析的 URL（或操作除可单独由 Web 窗体引擎解析的URL*之外的所有 URL）*

**编辑：** 客户要求两个站点共享相同的 IIS 会话，因此暂时不考虑单独的应用程序。此时对在 IIS 进程之间共享会话不感兴趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T18:08:16.457

我只会制作一组 URL 帮助程序扩展，这些扩展会为我考虑到这一点。

**扩展类**

```
namespace Core.Extensions{
   public static class UrlHelperExtensions
   {
      public static string Image(this UrlHelper helper, string fileName)
      {
        return helper.Content("~/mvc/Content/Images/" + fileName);
      }

      public static string Stylesheet(this UrlHelper helper, string fileName)
      {
        return helper.Content("~/mvc/Content/Css/" + fileName);
      }

      public static string Script(this UrlHelper helper, string fileName)
      {
        return helper.Content("~/mvc/Content/Scripts/" + fileName);
      }
   }
} 
```

**网络配置**

```
<system.web.webPages.razor>
    <host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <pages pageBaseType="System.Web.Mvc.WebViewPage">
      <namespaces>
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Routing" />
        <add namespace="Core.Extensions" />  <-- Add your extension namespace here
      </namespaces>
    </pages>
  </system.web.webPages.razor> 
```

**视图中的用法**

```
<link href="@Url.Stylesheet("site.css")" rel="stylesheet" type="text/css" />
<script src="@Url.Script("jquery-1.7.1.min.js")" type="text/javascript"></script>
<img src="@Url.Image("MyImageName.jpg")" />

<!--CSS in a sub directory from your root that you specified in your Extension class -->
<link href="@Url.Stylesheet("SomeDirectory/otherCss.css")" rel="stylesheet" type="text/css"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T17:25:46.327

一种可行的解决方案是为 MVC 应用程序创建一个子域，例如。mvc.mydomain.com。它在易于集成的应用程序之间提供了清晰的分离，并且不需要额外的域。

# android - 使用 ORMLite 的 ActiveRecord

> ID：10178580
> 
> 赞同：1
> 
> 时间：2012-04-16T17:13:11.043
> 
> 标签：android, database, dao

我真的很喜欢活动记录的想法，我将实现以下设计：所有具体模型都扩展抽象模型，它具有基本的 CRUD 操作。

这是模型上的示例保存功能：

```
public void save(){
    try {
        getDao().createOrUpdate(this);
    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

这是getDao（）：

```
private static Dao<Model, Integer> getDao(Context context){
    Dao<Model, Integer> result = null;

    DatabaseHelper dbHelper = new DatabaseHelper(context);
    try {
        result = dbHelper.getDao(Model.class);
    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }       

    return result;
} 
```

如您所见，我有 Model.class。除了将 Class 传递给 getDao 函数之外，还有其他选项或模式可以实现以下设计吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T17:17:43.070

不要将`getDao`方法设为静态，然后：

```
result = dbHelper.getDao(getClass()); 
```

编辑：

在这种情况下，您将不得不以某种方式告诉 getDao 方法要获取什么 dao。你可以使用类似的东西：

```
private static <T> Dao getDao(Context context, T object){
    try {
        return new DatabaseHelper(context).getDao(object.getClass());
    } catch (SQLException e) {
        e.printStackTrace();
    }
    return null;
} 
```

# c++ - 如何使用指针读取 nxn 矩阵？

> ID：10178581
> 
> 赞同：1
> 
> 时间：2012-04-16T17:13:12.610
> 
> 标签：c++, c

我是 C++ 新手，我正在尝试学习指针。作为一项工作练习，我尝试使用指向指针的指针来读取 nxn 矩阵。到目前为止，这是我尝试过的，但是 scanf 失败了。我究竟做错了什么？
后期编辑：

```
int **matrix;
int i=0;
int j=0;
int li=0;
int dim;

printf("What is the dimmension:");
scanf("%d",&dim);
matrix=(int **)malloc(sizeof(int *) * dim);
for(li=0;li<dim;li++)
{
    matrix[li] = (int *)malloc(sizeof(int) * dim);
}
printf("Type the elements:\n");
for(i=0;i<dim;i++)
{
    for(j=0;j<dim;j++)
    {
        scanf("%d", matrix[i][j]);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T17:18:21.743

如果您使用的是 C++，最好这样做

```
matrix = new int*[dim];
for(int = 0; i < dim; ++i)
    matrix[i] = new int[dim];

// to read matrix
scanf("%d", matrix[i][j]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T17:26:40.097

您有两个（半个）主要选择。您可以单独分配每一行，

```
matrix = malloc(dim * sizeof(int*));  // gives you dim int*
for(i = 0; i < dim; ++i)
{
    matrix[i] = malloc(dim * sizeof(int)); // row i gets dim int
} 
```

或者你可以分配一个连续的块

```
int *array = malloc(dim*dim*sizeof(int)); 
```

并使用

```
array[i*dim + j]; 
```

half 选项是使用打包的内存布局，但有一个包装器来访问它`matrix[i][j]`：

```
int **matrix = malloc(dim*sizeof(int*));
for(i = 0; i < dim; ++i)
{
    matrix[i] = array + i*dim;
} 
```

（当然，在 C++ 中，您通常不会`malloc`使用`new`和/或标准库提供的其他类型。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T17:25:28.610

如果您尝试创建指针数组，其中每个指针都指向一行，那么您实际上需要自己为每一行创建指针。这是代码：

//为M*N（或N*N）

```
int **a;
a=malloc(M*sizeof(int *));
for(i=0;i<M;i++)
    a[i] = &aa[i][0]; 
```

使用该代码，您将一个指针分配给一个大型 malloc，然后将一部分 malloc 分配给每行的第一个元素！这允许您使用传统的二维数组 a[0][0]、a[1][1]、ec 取消对数组的引用。这是我解释这一点的最佳参考：http: [//www.eskimo.com/~scs/cclass/int/sx9b.html](http://www.eskimo.com/~scs/cclass/int/sx9b.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T17:17:39.623

你应该能够像普通的二维数组一样访问它，`matrix[i][j]`然后`scanf`使用它的位置

```
scanf("%d", &matrix[i][j]); 
```

编辑还需要自己分配指针：

```
matrix=(int **)malloc(sizeof(int *) * dim);
for(i = 0; i < dim; i++) {
    matrix[i] = (int *)malloc(sizeof(int) * dim);
} 
```

此外，如果这是直接`C`的，您不应该从 malloc 转换返回类型，因为`C`它会自动升级并且转换可以隐藏错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T17:17:59.327

您已经分配了指向指针的顶级数组，但没有将下一级指针设置为任何分配的内存。循环为每个指针matrix[i]分配一个块，或者将每个指针设置为现有分配的内存，然后它可以被scanf使用。

# selenium - 断言确认的 webdriver 等效项是什么？

> ID：10178584
> 
> 赞同：2
> 
> 时间：2012-04-16T17:13:21.913
> 
> 标签：selenium, junit, webdriver, junit4

与 assertconfirmation 等效的**Webdriver**是什么？我有以下 selenium IDE 代码，当导出到 JUnit 4 (Webdriver) 时返回错误：

IDE代码：

```
<tr>
    <td>click</td>
    <td>link=Logout</td>
    <td></td>
</tr>
<tr>
    <td>assertConfirmation</td>
    <td>Are you sure you want to logout?</td>
    <td></td>
</tr> 
```

导出的 Webdriver 代码对应于上述：

```
@Test
    public void testUntitled2() throws Exception {
        driver.findElement(By.linkText("Logout")).click();
        // ERROR: Caught exception [ERROR: Unsupported command [getConfirmation]]
    } 
```

我曾经能够成功地将以下内容与 RC 一起使用，但使用 webdriver 它不再起作用 - （请注意我正在尝试将我的脚本迁移到 webdriver）

```
assertTrue(selenium.getConfirmation().matches("^Are you sure you want to logout[\\s\\S]$")); 
```

干杯

山

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T18:03:01.563

应该是这个！

```
final String text = "Are you sure you want to logout?";
assertTrue(driver.switchTo().alert().getText().equals(text)); 
```

...或者也许是你得到的“matches()”版本。

[切换到（）](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebDriver.html#switchTo%28%29)

[警报（）](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebDriver.TargetLocator.html#alert%28%29)

[获取文本（）](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/Alert.html#getText%28%29)

# java - 使用 STL / POSIX 将二进制文件从 J2SE 加载到 iOS iphone

> ID：10178585
> 
> 赞同：0
> 
> 时间：2012-04-16T17:13:27.533
> 
> 标签：java, iphone, c++, ios

所以我试图支持一些我在 Java 中编写的用于 J2ME 开发的遗留工具。

我需要在 iphone/ipad 上用 C++ 读取相同的文件格式。在你问为什么之前->（因为我还需要支持 Android NDK r7）

现在我无法获得匹配的值，我确定我做对了：这是我的 Java (J2SE) 代码：-

```
File file = new File(location, "test.d2r");

BufferedWriter writer = new BufferedWriter(new FileWriter(file));

int i = Integer.reverseBytes(8);

writer.write(i);
writer.newLine();
writer.flush();
writer.close(); 
```

在 iOS 领域，我正在做：-

```
NSString *url = [[NSBundle mainBundle] pathForResource:@"test" ofType:@"d2r"];

FILE* fp = fopen([url UTF8String], "r");

if (fp) 
{
    int j;
    printf("\nReading...\n");

    fscanf(fp, "%c", &j);
    fclose(fp); 

    printf("DIGIT 1 %d\n\n", j);
}
else
{
    printf("\n\n No file found...... \n\n");
} 
```

所以文件打开得很好，但数字不匹配。我试过把 Endian 翻过来。我唯一能考虑的是，当我从无符号 (java) 平台转换为有符号 (c++) 平台时，我在那里得到了符号并且它弄乱了价值。

但不确定，任何指针都会受到极大的欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T18:13:27.873

`fscanf`用于读取文本，而不是用于读取二进制数据。

而不是`fscanf`，您应该使用`fread`：

```
fread(&j, 4, 1, fp); 
```

此外，您应该使用选项“rb”而不是“r”打开文件，以指示您要读取二进制文件。根据操作系统的不同，这可能是必不可少的。

这是正确的，然后这是Java方面：-

好的，所以 Codo 在 C++ 端的答案的混合，这是 Java 端的写操作

```
BufferedOutputStream out = new BufferedOutputStream(  
                  new FileOutputStream("bob_FontTool.d2r", false));

ByteBuffer buffer = ByteBuffer.allocate(4).order(ByteOrder.nativeOrder());  
buffer.putInt(8);  
out.write(buffer.array());

out.flush();  
out.close(); 
```

# .net - StartNew 在通话期间是否持有一个线程？

> ID：10178590
> 
> 赞同：0
> 
> 时间：2012-04-16T17:13:42.730
> 
> 标签：.net, asynchronous, threadpool, task-parallel-library

我假设 StartNew 仅在实际完成工作时使用 ThreadPool 中的线程，并在等待时释放它。例如：

```
 Task.Factory.Startnew() {
          () => {
                    ..
                    var dr = cmd.ExecuteReader();
                    while (dr.Read())
                    {
                     ..
                    }
                }
} 
```

所以说上面的 cmd.ExecuteReader() 是一个非常慢的存储过程，需要 10 分钟才能运行。我认为 TPL 会将线程释放回池中，而不是一直保留线程。这是不正确的吗？如果不是，那么 TPL 方法的最大优势是说后台工作线程。[阅读Stephen Toub 的帖子后](http://blogs.msdn.com/b/pfxteam/archive/2012/03/24/10287244.aspx)，我开始认为我的假设不正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T18:01:08.567

不，这不是线程在 .Net 中的工作方式。如果您进行阻塞调用，线程必须实际阻塞，它不能做任何其他事情。TPL 中没有“魔法”可以做到这一点。*

`ThreadPool.QueueUserWorkItem()`基本上，调用和没有太大区别`Task.Factory.StartNew()`。但是使用 TPL 有很多优点，比如：

1.  支持取消。
2.  支持延续 ( `task.ContinueWith()`)。
3.  支持线程池以外的其他调度程序。最常用的一种是同步上下文，在 GUI 应用程序中很有用。
4.  内联任务（如果您开始等待尚未启动的任务，它可以开始在当前线程上执行）。
5.  任务的线程本地队列，可以提高性能。
6.  `Task`是对将来完成的事物的单一抽象，它不必是计算绑定的后台操作。这在 .Net 4.5 中将变得更加重要。

* C# 5 具有编译器的魔力，可以使您的异步代码看起来像今天的同步代码。但阻塞呼叫仍将保持阻塞呼叫。

# blackberry - 拨打外线电话

> ID：10178592
> 
> 赞同：2
> 
> 时间：2012-04-16T17:13:56.910
> 
> 标签：blackberry, java-me

有人知道是否有可能制作一个可以执行外拨电话的黑莓应用程序？具体来说，是否有可能在应用程序中设置一个循环来重拨号码，直到有人接听（例如，打电话到广播电台，直到您得到接听）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T17:20:23.667

是[的，这是可能的](http://docs.blackberry.com/en/developers/deliverables/11935/Make_call_723711_11.jsp)。

[另一种方法](http://docs.blackberry.com/en/developers/deliverables/11935/Start_phone_app_fromBB_device_app_565541_11.jsp)。

# c++ - 特化模板类的模板化成员

> ID：10178598
> 
> 赞同：12
> 
> 时间：2012-04-16T17:14:16.157
> 
> 标签：c++, templates

> **可能重复：**
> [模板类中模板化成员函数的特化](https://stackoverflow.com/questions/6773302/specialization-of-templated-member-function-in-templated-class)

```
template <class T>    
class MyClass
{
   template <int N>
   void func() {printf("unspecialized\n");}
};
template<class T>
template<>
MyClass<T>::func<0>()
{
   printf("specialzied\n");
} 
```

这不起作用。是否可以专门化模板类的模板方法？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-16T17:29:43.713

不能按要求完成。出于某种原因（我不确定基本原理）成员模板的*显式*（即*完全）特化仅在封闭类也**显式*（即*完全*）特化时才允许。语言标准中明确规定了这一要求（参见 C++98 中的 14.7.3/18、C++11 中的 C++03 和 14.7.3/16）。

同时，允许成员*类模板的**部分*特化，这在许多情况下可以用作一种变通方法（尽管是一种丑陋的变通方法）。但是，很明显，它只适用于成员*类*模板。对于成员*函数*模板，必须使用替代解决方案。

 ***例如，一种可能的解决方法是将调用委托给模板类的静态成员并专门化该类（这通常被推荐为比函数模板专门化更好的主意[http://www.gotw.ca/publications/磨机17.htm](http://www.gotw.ca/publications/mill17.htm)）

```
template <class T>    
class MyClass
{
   template <int N, typename DUMMY = void> struct Func {
     static void func() { printf("unspecialized\n"); }
   };

   template <typename DUMMY> struct Func<0, DUMMY> {
     static void func() { printf("specialized\n"); }
   };

   template <int N> void func() { Func<N>::func(); }
}; 
```***

# objective-c - 从 OSX 应用程序启动 sass --watch

> ID：10178599
> 
> 赞同：0
> 
> 时间：2012-04-16T17:14:17.810
> 
> 标签：objective-c, macos, sass

我想创建一个应用程序来在特定文件夹上启动 sass watch，我的问题是如何集成终端调用：

```
sass --watch /MyPath/to/scss 
```

进入 OSX 应用程序？

我已经尝试过使用 NSTask 但没有结果...使用此代码我得到“启动路径无法访问”

```
NSTask *task;
task = [[NSTask alloc] init];
[task setLaunchPath: @"/bin/sass"];

NSArray *arguments;
arguments = [NSArray arrayWithObjects: @"--watch",@"path/to/folder", nil];
[task setArguments: arguments];

NSPipe *pipe;
pipe = [NSPipe pipe];
[task setStandardOutput: pipe];

NSFileHandle *file;
file = [pipe fileHandleForReading];

[task launch];

NSData *data;
data = [file readDataToEndOfFile];

NSString *string;
string = [[NSString alloc] initWithData: data
                               encoding: NSUTF8StringEncoding];
NSLog (@"%@", string); 
```

# php - windows 7 64位xampp上的phpredis

> ID：10178600
> 
> 赞同：18
> 
> 时间：2012-04-16T17:14:22.070
> 
> 标签：php, windows, redis, 64-bit

我正在尝试让 Redis 在我的 Windows 机器上工作以用于开发目的。我已经使用 phpredis 客户端在我的 Ubuntu 10.04 服务器上启动并运行了 Redis。

目前在我的 Windows 机器上我可以启动 Redis 服务器，因为它不需要安装，而且对开发来说已经足够了，但我不知道如何安装 phpredis。看起来很混乱，我已经花了两天时间研究这个，但没有结果。

我已经使用 Git 克隆了源文件，但我使用 Git Bash 进行了克隆，但这是最后一个与 ubuntu 工作方式相同的命令。我还下载了两个 .dll 文件，一个带有“ts”，另一个带有“nts”，不知道有什么区别：/

[http://commandperls.com/install-phpredis/](http://commandperls.com/install-phpredis/) 有手册如何安装 phpredis，但它只适用于我的 ubuntu。我是命令行的新手，我不确定这是否可以在 Windows 上工作，比如使用 cmd 或 git bash。

所以我的问题是，我怎样才能让 phpredis 在 Windows 上工作？有什么办法可以做到这一点？我知道有 Predis 并且我已经尝试过，但是因为我打算在我的服务器上使用 phpredis，所以我想在开发机器上使用它。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-17T08:24:32.370

找到了！为误解道歉，但所有这些情况对于那些对服务器管理有一点了解的人来说真的很困惑。无论如何，以下是我的解决方案。

[http://code.google.com/p/pecl-win/downloads/detail?name=php_redis-2.1.3-5.3-ts.dll&can=2&q=](http://code.google.com/p/pecl-win/downloads/detail?name=php_redis-2.1.3-5.3-ts.dll&can=2&q=)

上面的链接提供了 .dll 文件，在我的情况下必须复制到：`C:\xampp\php\ext`并在 php.ini 文件中添加一行，`extension=php_redis.dll`最后重新启动 apache2 服务。

就是这样，不需要安装任何东西，只要 redis 服务器已经启动并运行，它将提供 php 和 redis 之间的连接！

**2020-05-06 更新**

似乎以前的 url 只包含过时的 .dll 文件。@Niz 在评论中提供了一个更新的 url，您可以在其中为您的 Windows 下载正确版本的 redis DLL。确保下载与您的 redis 和 php 版本匹配的版本。

[https://pecl.php.net/package/redis](https://pecl.php.net/package/redis)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-05-09T01:09:50.127

您仍然可以在以下位置找到最新编译的 Redis dll 二进制文件（以及更多）：http: [//windows.php.net/downloads/pecl/releases/redis/2.2.7/](http://windows.php.net/downloads/pecl/releases/redis/2.2.7/)

```
 # php -i | find "Architecture"
    # php -i | find "Thread" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-22T16:54:35.483

具有对 xammp 的 redis 支持的 PHP 7 有新的二进制文件可用： [https://windows.php.net/downloads/pecl/releases/redis/](https://windows.php.net/downloads/pecl/releases/redis/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-10-10T10:56:02.753

这对我有用：

**本文引用的答案**：[https ://www.linkedin.com/pulse/using-redis-windows-php-shekhar-joshi/](https://www.linkedin.com/pulse/using-redis-windows-php-shekhar-joshi/)

**检查来自 phpinfo() 的所有信息，例如 x86、php 版本和线程安全。**

**文章中的有用部分：**

[从https://pecl.php.net/package/redis/2.2.7/windows](https://pecl.php.net/package/redis/2.2.7/windows)下载 PECL 扩展，你需要知道哪个版本适合你。首先检查你的 php 版本并知道是否启用了线程安全（你可以使用 phpinfo() 来做到这一点）。下载相应版本的 dll，启用线程安全使用 ts 版本，否则使用 nts 版本。提取内容并将 .dll 文件复制到 xamp/php/ext 中。接下来，打开位于 (xampp/php) 的 php.ini 文件，并将此字符串 extension="php_redis.dll" 与其他扩展名一起添加。

# java - Linux上的RubyMine

> ID：10178601
> 
> 赞同：9
> 
> 时间：2012-04-16T17:14:28.030
> 
> 标签：java, ruby-on-rails-3, ide, intellij-idea

我是 ubuntu 的新手，遇到了问题。我无法启动 RubyMine 4：

```
kvet@Kvet-Notebook:~/RubyMine-4.0.3/bin$ java -version
java version "1.7.0_03"
OpenJDK Runtime Environment (IcedTea7 2.1.1pre) (7~u3-2.1.1~pre1-1ubuntu2)
OpenJDK 64-Bit Server VM (build 22.0-b10, mixed mode)
kvet@Kvet-Notebook:~/RubyMine-4.0.3/bin$ ./rubymine.sh
OpenJDK Runtime Environment (IcedTea7 2.1.1pre) (7~u3-2.1.1~pre1-1ubuntu2)
OpenJDK 64-Bit Server VM (build 22.0-b10, mixed mode)
OpenJDK 64-Bit Server VM (build 22.0-b10, mixed mode)
WARNING: You are launching the IDE using OpenJDK Java runtime.

         THIS IS STRICTLY UNSUPPORTED DUE TO KNOWN PERFORMANCE AND GRAPHICS PROBLEMS!

NOTE:    If you have both Oracle (Sun) JDK and OpenJDK installed
         please validate either RUBYMINE_JDK, JDK_HOME, or JAVA_HOME environment variable points to valid Oracle (Sun) JDK installation.
         See http://ow.ly/6TuKQ for more info on switching default JDK.

Press Enter to continue.

Error: Could not find or load main class com.intellij.idea.Main 
```

我试图安装 openjdk6 并且有同样的错误。我不知道我必须做什么。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-16T17:21:14.127

我自己最近有这个（[[错误：无法启动RubyMine。找不到JDK。JDK版本？+桌面链接](https://stackoverflow.com/questions/9862143/error-cannot-start-rubymine-no-jdk-found-jdk-version-desktop-link][1])）。

> 答：安装java并检查你的路径：

**下载 oracle7 jdk：**
[http ://www.oracle.com/technetwork/java/javase/downloads/java-se-jdk-7-download-432154.html](http://www.oracle.com/technetwork/java/javase/downloads/java-se-jdk-7-download-432154.html)

**按照以下说明操作：**
[http](http://www.webupd8.org/2011/09/how-to-install-oracle-java-7-jdk-in.html) ://www.webupd8.org/2011/09/how-to-install-oracle-java-7-jdk-in.html例如

下载 java 后（上图）：将下载的 Oracle Java JDK 存档解压缩到您的主文件夹中，并将新创建的文件夹重命名为“java-7-oracle”。

```
sudo mv its_name java-7-oracle 
```

**安装它：**

```
cd
sudo mkdir -p  /usr/lib/jvm/ #just in case
sudo mv java-7-oracle/ /usr/lib/jvm/
sudo add-apt-repository ppa:nilarimogard/webupd8
sudo apt-get update
sudo apt-get install update-java
sudo update-java 
```

**核实：**

```
java -version
javac -version 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T10:14:08.517

我很确定您不需要安装 JDK。要运行 RubyMine，您只需要 JRE。除非您打算进行 Java 开发，否则您不需要 JDK。

要在 Ubuntu / Mint / Debian 上设置 Oracle / Sun JRE，请按照此处的说明进行操作：[https](https://help.ubuntu.com/community/Java#Oracle_Java_7) ://help.ubuntu.com/community/Java#Oracle_Java_7 。

就个人而言，我已经使用了`Script (JRE only)`部分下的说明。具体来说，我使用此站点上提到的存储库安装了 JRE：[http](http://www.duinsoft.nl/packages.php?t=en) ://www.duinsoft.nl/packages.php?t=en 。完美运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T17:19:40.120

尝试安装 Oracle JDK 并使用它运行 RubyMine。

# ruby - 解决方案/架构：队列还是其他？

> ID：10178603
> 
> 赞同：0
> 
> 时间：2012-04-16T17:14:57.140
> 
> 标签：ruby, node.js, architecture, distributed-computing, solution

我有多个用 Node.js 编写的服务的前端和用 Ruby 编写的 worker。现在的问题是如何让这些沟通？我需要维护动态的工作人员池来处理负载（当负载增加时产生更多的工作人员）并且消息相当大~2-3M，因为我正在通过 Node.js 前端向用户上传的工作人员发送图像。因为我想要很好的扩展性，所以我考虑了一些排队解决方案，但我没有找到任何现有的解决方案（或被误解的指南）可以提供：

1.  后备机制。到目前为止，我发现的解决方案只有一个故障点 - 消息代理，并且没有办法提供回退。
2.  序列化。因此，当代理失败时，任务不会丢失。
3.  传递重要信息的能力。
4.  Ruby 和 Node.js 的简易 API
5.  一些用于跟踪队列大小的 API，以便我可以重新安排工作池。
6.  最好是轻量级的。

也许我的方法是错误的？也许我不应该使用队列而是其他方式？或者有一些符合上述要求的排队解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T21:09:48.153

最终，我采用了[ZeroMQ](http://www.zeromq.org/)队列解决方案。非常快速、健壮和轻量级的实现。必须编写自己的经纪人，但这是此解决方案的唯一缺点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T11:25:04.820

毫无疑问，您需要一个队列来扩展，并且您可以监视此队列以产生“工人”。

[Apache ActiveMQ](http://activemq.apache.org/)非常健壮并且支持 REST 协议。Ruby 客户端也可用于访问队列。

[关于使用 Apache ActiveMQ](http://activemq.apache.org/restful-queue.html)的 RESTful 队列的有趣文章

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T06:09:56.463

redis发布/订阅应该可以解决问题

[http://redis.io/topics/pubsub](http://redis.io/topics/pubsub)

# bash - 在新 bash 中更改 bash 提示符

> ID：10178608
> 
> 赞同：6
> 
> 时间：2012-04-16T17:15:18.530
> 
> 标签：bash, shell, prompt

当我创建一个新的 bash 进程时，提示默认为一个非常简单的。我知道我可以编辑 .bashrc 等来改变它，但是有没有办法用 bash 命令传递提示？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-16T17:23:32.750

提示由 PS1、PS2、PS3 和 PS4 环境变量定义。因此，例如以下将启动一个新的 bash，提示设置为“foo：”：

```
PS1="foo: " bash --norc 
```

`--norc`需要抑制初始化文件的处理，这将覆盖变量`PS1`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-12T04:12:58.043

我有同样的问题 - 我想从命令行启动一个临时 bash；并且大多数其他环境变量仍然存在；那些来源`~/.bashrc`的东西很难覆盖——特别是如果你像我一样，真的想保留`~/.bashrc`你已经拥有的东西（和里面的别名等）——除了`PS1`提示。

这是对我有用的东西（注意这`--init-file`是 的同义词/别名`--rcfile`）：

```
bash --rcfile <(cat ~/.bashrc ; echo 'PS1="\[\033[0;33m\]\u@HELLO:\W\$\[\033[00m\] "') 
```

基本上，方括号/小于 + 括号习语`<()`启动`bash`进程替换；括号内回显到标准输出的所有内容都将在一个临时文件中结束，`/dev/fd/<n>`. 所以我们首先 cat 出来的内容`~/.bashrc`；然后我们只需`PS1`在末尾添加一个 set 命令，（它有效地覆盖） - 这最终在`/dev/fd/<n>`; 然后`bash`用于`/dev/fd/<n>`新的`rcfile`.

这是它的行为方式：

```
user@pc:tmp$ TESTVAR="testing" bash --rcfile <(cat ~/.bashrc ; echo 'PS1="\[\033[0;33m\]\u@HELLO:\W\$\[\033[00m\] "')
user@HELLO:tmp$ test-alias-tab-completion ^C
user@HELLO:tmp$ echo $TESTVAR 
testing
user@HELLO:tmp$ exit
exit
user@pc:tmp$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T17:18:44.770

您可以设置一个环境变量，然后在 .bashrc 中的提示符中使用该环境变量。

# tags - 带有 WatiN 的“a href”标签

> ID：10178614
> 
> 赞同：1
> 
> 时间：2012-04-16T17:15:46.597
> 
> 标签：tags, watin, href

如何使用 WatiN 点击标签“a href="#" onclick="pesqResp();"> 搜索”定义的链接？

表单验证 ID 是否存在，如果是，则再次显示带有员工姓名的表单，如果不存在，则再次显示表单并显示错误消息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T20:21:43.097

您可以使用 Class 或 Id 查找链接，单击链接的命令是：

```
browser.Eval("$('.ClassNameHere').click();"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T02:57:44.793

How about:

```
browser.Link(link => link.Text == "Search").Click(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-05-27T08:37:19.737

Link(link => link.Text == "搜索").Click(); 这项工作节省了很多时间！

# c# - 在 Windows 7 中更改屏幕保护程序设置时应用程序冻结 - System.Threading.Timer 罪魁祸首？

> ID：10178615
> 
> 赞同：3
> 
> 时间：2012-04-16T17:15:49.183
> 
> 标签：c#, winforms, windows-7, timer, screensaver

我有一个 C#/TCP/Winform 应用程序已经运行了很长一段时间，但我的一个用户发现了一个我可以轻松复制但我似乎无法解决的问题。

如果应用程序在 Windows 7 上打开，并且用户随后更改了屏幕保护程序设置中的任何选项 - 无论是正在使用的屏幕保护程序还是时间 - 应用程序冻结并且 UI 变得无响应。单击表单上的任意位置只会让系统“叮”。

当应用程序在调试模式下通过 Visual Studio 运行时，问题不复存在，但一旦超出 VS 的范围，就会重新冻结。

经过一些修补和测试，我似乎已将问题缩小到每秒运行一次的 System.Threading.Timer。我一直在逐步减少计时器的功能，并发现即使计时器的事件什么都不做，它仍然会锁定应用程序。如果我在更改屏幕保护程序设置之前禁用代码中的计时器或取消应用程序中的计时器，则应用程序将在屏幕保护程序更改后恢复正常运行（尽管它似乎仍会冻结大约 2-3 秒）。

此处的代码似乎是使应用程序可冻结（在 WinForm 代码中）所需的全部内容：

```
 /// <summary>
    /// Starts the countdown timer for unit alerts
    /// </summary>
    private void startCountDownTimer()
    {
        Object timeState = new object();
        this._timerCall = new System.Threading.TimerCallback(this.countDown);
        this._countdownTimer = new System.Threading.Timer(_timerCall, timeState, 0, 1000);
    }

    /// <summary>
    /// Invokes the countdown logic for unit alerts
    /// </summary>
    /// <param name="state"></param>
    private void countDown(Object state)
    {
        // REMOVED AND STILL FREEZING
    } 
```

请注意，即使 countDown 的内容被注释掉，这种冻结也会发生，因此计时器除了每秒触发一次之外什么都不做。

如果我启动进程，然后将远程调试器附加到它，则输出中没有任何内容表明应用程序有任何问题。该表单实际上仍会触发诸如“已激活”之类的事件：

```
*** MAIN WINDOW ACTIVATED ***
*** MAIN WINDOW ACTIVATED *** 
```

然而，似乎没有其他任何东西在触发，应用程序必须通过 EndTask 被杀死或关闭。如果在仍然附加调试器的情况下使用 EndTask，我会突然收到错误：

```
A first chance exception of type 'System.InvalidOperationException' occurred in System.Windows.Forms.dll
===================================
ERR: Invoke or BeginInvoke cannot be called on a control until the window handle has been created.
       at System.Windows.Forms.Control.MarshaledInvoke(Control caller, Delegate method, Object[] args, Boolean synchronous)
   at System.Windows.Forms.Control.BeginInvoke(Delegate method, Object[] args)
   at System.Windows.Forms.Control.BeginInvoke(Delegate method)
   at Wcsg.UI.Windows.CadClient.client_MessageReceived(TcpMessageReceivedEventArgs mrea) in C:\Users\---------\Documents\Visual Studio 2010\Projects\Dispatch-DEVELOPMENT\CadClient\Forms\CadClientForm.cs
   at Wcsg.Net.Tcp.WcsgTcpClient.processStream(Int32 count)
   at Wcsg.Net.Tcp.WcsgTcpClient.performSocketRead(IAsyncResult ar)
--------------------- 
```

我最终得到的错误似乎与表单的关闭有关，而它最终可以处理套接字上的消息。

我正在寻找任何方向看这里。

*** 编辑 ***

当预期的解决方法（见答案）不起作用时，我被问及程序中的 Main 方法。这是主要代码：

```
[STAThread]
    static void Main(String[] args)
    {
        // check for other running CadClients
        bool createdNew = _mutex.WaitOne(TimeSpan.Zero, false);

        if (createdNew) // first-run, launch Status Monitor on load
        {
            List<String> newArgs = new List<string>(args);
            newArgs.Add("-SM");
            args = newArgs.ToArray();
        }

        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);

        AppDomain currentDomain = AppDomain.CurrentDomain;
        Application.SetUnhandledExceptionMode(UnhandledExceptionMode.CatchException);

        // try to catch issue 13445 -- see testing notes
        CadClient cc = new CadClient(args);
        CadExceptionHandler ceh = new CadExceptionHandler(ref cc);
        currentDomain.UnhandledException += new UnhandledExceptionEventHandler(ceh.CurrentDomain_UnhandledException);
        Application.ThreadException += new System.Threading.ThreadExceptionEventHandler(ceh.Application_ThreadException);

        Application.Run(cc);
    } 
```

*** 编辑 *** 我也应该添加 Splashscreen 代码：

```
 private void showSplashScreen()
    {
        WaitCallback wcb = new WaitCallback(doSplashScreen);
        ThreadPool.QueueUserWorkItem(wcb);
    }

    private void doSplashScreen(object state)
    {
        if (this._splash == null)
            this._splash = new SplashForm(this);

        this._splash.FormClosed += new FormClosedEventHandler(_splash_FormClosed);
        this._splash.Show();

        while (this._splash != null && !this._splash.WorkDone)
            Application.DoEvents();
        this._splash.Close();
    } 
```

方法 showSplashScreen() 在主窗体的构造函数中调用 - 最初是在 InitializeComponents() 调用之前和现在之后。初始屏幕显示更新其显示，而主应用程序验证某些安全性。然后它变成一个登录屏幕，然后在主应用程序从服务器加载数据时显示更多更新。一旦主窗体（通过事件）表明它已经完成了它的工作，SplashScreen 就会关闭。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T21:23:05.660

使用来自@HansPassant 的评论，发现我们的启动/登录屏幕的 showSplash 方法没有在 Application.Run 之前被调用，而是在我们的主窗体的 InitializeComponent 方法之前被调用。将 this.showSplash 移到 InitializeComponent() 正下方的行并重新编译，问题似乎消失了。

# php - 当涉及虚拟文件夹时，服务器变量文档根目录与 file_exists 不兼容

> ID：10178619
> 
> 赞同：1
> 
> 时间：2012-04-16T17:16:26.130
> 
> 标签：php, file-exists, document-root, server-variables, virtual-path

我在 IIS 上有一个虚拟文件夹。当我做一个服务器文档根目录时，我`file_exists`找不到文件。但有趣的是，如果我使用包含（或为此需要指令）找到相同的文件。

例子

```
$full_path = $_server['DOCUMENT_ROOT'] . "/file.txt";
include($full_path); // works fine. 
if file_exists($full_path) : // returns false! 
```

同样，这仅在我涉及虚拟文件夹时。

我想我必须使用不同的服务器变量，它不受是否存在虚拟文件夹的影响。

最终，我希望以下工作

`/wwwroot/file.txt`应该用这个找到

`file_exists($_server['?'] . "/file.txt")`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T16:54:33.770

使用配置文件并定义 baseroot 和 publicroot。

```
<?php
// myconfig.php -- stored in the public root
$direx = explode("/", getcwd());
DEFINE ('BASEROOT', '/'.$direx[1].'/'.$direx[2].'/'); // host/mysite/
DEFINE ('PUBLICROOT', '/'.$direx[1].'/'.$direx[2].'/'.$direx[3].'/'); // host/mysite/public_html/
?>

<?php
require_once('myconfig.php'); // called on every page

IF (File_Exists(PUBLICROOT.'some_folder/file.txt')) { /* do something */ }

include_once(PUBLICROOT.'some_folder/file.txt');
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T17:33:21.520

我不知道 IIS 虚拟文件夹的行为如何，但是您可以从全局常量中获取当前脚本的完整文件路径`__FILE__`，请参见[http://php.net/manual/en/language.constants.predefined.php](http://php.net/manual/en/language.constants.predefined.php)。

如果您知道脚本中的相对路径，请使用以下内容：

```
$filepath = dirname(__FILE__) . "/../../file.txt"; 
```

不确定这是否可以解决您的问题。

# php - 如何覆盖 pecl 安装包的默认配置选项

> ID：10178621
> 
> 赞同：2
> 
> 时间：2012-04-16T17:16:45.067
> 
> 标签：php, lua, pecl

由于配置失败，我目前在安装 PECL LUA 包时遇到问题：

```
pecl install channel://pecl.php.net/lua-0.9.4 
```

给予

```
...
checking for lua support... yes, shared
checking for lua in default path... not found
configure: error: Please reinstall the lua distribution - lua.h should be in <lua-   dir>/include/
ERROR: `/tmp/pear/temp/lua/configure' failed 
```

查看 tarball 后，配置脚本似乎将接受“--with-lua”覆盖以传递 lua 标头的已知位置。然而，如何使用 pecl 安装程序传递这些信息是完全不明显的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T09:59:19.087

好吧，似乎软件包中的配置魔法被破坏了。最后，我不得不硬连线几条路径：

```
ln -s /usr/include/lua /usr/include/lua5.1
ln -s /usr/lib/liblua5.1.a liblua.a
ln -s /usr/include/lua/* /usr/include 
```

足以让编译器通过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-05T10:21:06.650

I solved a similar problem on ubuntu:17.10 with lua5.3 and php7.1 by

```
pecl download lua
tar xvzf lua-2.0.4.tgz
cd lua-2.0.4
phpize
./configure --with-lua-version=5.3
make
make install 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-16T17:35:24.850

AFAIK，每个`configure`脚本都允许您通过自定义`CFLAGS`和`LDFLAGS`. 这允许您执行以下操作：

```
CFLAGS="-I/path/to/lua/include" LDFLAGS="-L/path/to/lua/lib" ./configure 
```

`CXXFLAGS`如果源代码是 C++ 则使用。

# perl - DBIx::Class has_many 加入列的子字符串

> ID：10178622
> 
> 赞同：4
> 
> 时间：2012-04-16T17:16:51.777
> 
> 标签：perl, dbix-class

我有两个链接的课程

```
foreign.weirdkey => substr(self.key, 1, 9) 
```

...并且我一生都无法弄清楚如何构造 has_many 调用来表明这一点。

底层数据库（一组 Oracle 表）没有定义外键，是固定的，并且不在我的控制范围内。

我浏览了文档，似乎找不到在手动 has_many 定义范围内有效的语法。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T13:57:42.573

像这样的东西应该工作：

```
__PACKAGE__->has_many( baubles => 'My::Schema::Result::Thing', sub {
   my $args = shift;

   return ({
      "$args->{foreign_alias}.weirdkey" => \"substr($args->{self_alias}.key, 1, 9)",
   },
   $args->{self_rowobj} && {
      "$args->{foreign_alias}.weirdkey" => substr($args->{self_rowobj}->key, 1, 9)
   })
}); 
```

请注意，如果您有当前行对象，我将使用 perl 的 substr，因此连接将仅折叠为 where 子句，并且不会使用数据库进行字符串处理。如果您有问题，请删除它或摆弄它。DBIC_TRACE 应该清楚发生了什么。

此处的文档：[https ://metacpan.org/pod/DBIx::Class::Relationship::Base#condition](https://metacpan.org/pod/DBIx::Class::Relationship::Base#condition)

# asp.net - Exchange 模拟未显示详细信息

> ID：10178623
> 
> 赞同：1
> 
> 时间：2012-04-16T17:17:02.353
> 
> 标签：asp.net, exchangewebservices

我正在尝试模拟用户以让其他用户的日历显示在 Web 应用程序上。

我正在使用以下代码来执行此操作。

```
 ...
  private const string aliasUserName = "vader@mydomain.com";

 public CalendarItem[] GetCalendarItemsForUser(string userEmail, DateTime startDate, DateTime endDate)
    {
        _exchangeService.AutodiscoverUrl(aliasUserName);

        List<AttendeeInfo>userList = new List<AttendeeInfo> {new AttendeeInfo(userEmail)};
        List<CalendarItem> itemList = new List<CalendarItem>();

        GetUserAvailabilityResults availabilityResults = _exchangeService.GetUserAvailability(userList, new TimeWindow(startDate, endDate), AvailabilityData.FreeBusy);
        foreach (var item in availabilityResults.AttendeesAvailability)
        {
            foreach (var e in item.CalendarEvents)
            {
                if (e.FreeBusyStatus == LegacyFreeBusyStatus.Busy)
                {
                    CalendarItem i = new CalendarItem {Id = DateTime.Now.Millisecond};
                    if (e.Details != null)
                    {
                        i.Title = e.Details.Subject;
                        i.Location = e.Details.Location;
                    }
                    i.StartTime = e.StartTime;
                    i.EndTime = e.EndTime;
                    itemList.Add(i);
                }
            }
        } 
```

对于我正在查看其日历的所有用户，这在我的开发机器上非常有效。在同一域上发布到我的生产机器时。我找回了约会的时间，但没有详细信息，例如约会的主题或地点。它再次适用于我的开发机器，而不是生产机器。任何帮助都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T17:54:38.527

您在生产中的应用程序池需要使用您在本地拥有的凭据运行，通常只是域用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T09:37:30.833

将电子邮件地址与 AutodiscoverUrl 一起使用并不意味着您在冒充该用户。您还必须设置凭据，还必须设置要模拟的用户的 ID。例如，如果您希望以当前用户身份登录 EWS，并且希望冒充“vader@mydomain.com”，您可以这样做：

```
 ExchangeService service = ...;
  service.Credentials = CredentialCache.DefaultNetworkCredentials;
  service.AutodiscoverUrl("vader@mydomain.com");
  service.ImpersonatedUserId = new ImpersonatedUserId(ConnectingIdType.SmtpAddress, "vader@mydomain.com"); 
```

另请参阅有关EWS[模拟的 MSDN 。](http://msdn.microsoft.com/en-us/library/dd633680%28v=exchg.80%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T17:27:40.583

这是我创建的一个类，它利用`WinAPI`允许基于实例的模拟。试一试，看看它是否有帮助：

```
/// <summary>
/// Leverages the Windows API (advapi32.dll) to programmatically impersonate a user.
/// </summary>
public class ImpersonationContext : IDisposable
{
    #region constants

    private const int LOGON32_LOGON_INTERACTIVE = 2;
    private const int LOGON32_PROVIDER_DEFAULT = 0;

    #endregion

    #region global variables

    private WindowsImpersonationContext impersonationContext;
    private bool impersonating;

    #endregion

    #region unmanaged code

    [DllImport("advapi32.dll")]
    private static extern int LogonUserA(String lpszUserName, String lpszDomain, String lpszPassword, int dwLogonType, int dwLogonProvider, ref IntPtr phToken);

    [DllImport("advapi32.dll", CharSet = CharSet.Auto, SetLastError = true)]
    private static extern int DuplicateToken(IntPtr hToken, int impersonationLevel, ref IntPtr hNewToken);

    [DllImport("advapi32.dll", CharSet = CharSet.Auto, SetLastError = true)]
    private static extern bool RevertToSelf();

    [DllImport("kernel32.dll", CharSet = CharSet.Auto)]
    private static extern bool CloseHandle(IntPtr handle);

    #endregion

    #region constructors

    public ImpersonationContext()
    {
        impersonating = false;
    }

    /// <summary>
    /// Overloaded constructor and begins impersonating.
    /// </summary>
    public ImpersonationContext(string userName, string password, string domain)
    {
        this.BeginImpersonationContext(userName, password, domain);
    }

    #endregion

    #region impersonation methods

    /// <summary>
    /// Begins the impersonation context for the specified user.
    /// </summary>
    /// <remarks>Don't call this method if you used the overloaded constructor.</remarks>
    public void BeginImpersonationContext(string userName, string password, string domain)
    {
        //initialize token and duplicate variables
        IntPtr token = IntPtr.Zero;
        IntPtr tokenDuplicate = IntPtr.Zero;

        if (RevertToSelf())
        {
            if (LogonUserA(userName, domain, password, LOGON32_LOGON_INTERACTIVE, LOGON32_PROVIDER_DEFAULT, ref token) != 0)
            {
                if (DuplicateToken(token, 2, ref tokenDuplicate) != 0)
                {
                    using (WindowsIdentity tempWindowsIdentity = new WindowsIdentity(tokenDuplicate))
                    {
                        //begin the impersonation context and mark impersonating true
                        impersonationContext = tempWindowsIdentity.Impersonate();
                        impersonating = true;
                    }
                }
            }
        }

        //close the handle to the account token
        if (token != IntPtr.Zero)
            CloseHandle(token);

        //close the handle to the duplicated account token
        if (tokenDuplicate != IntPtr.Zero)
            CloseHandle(tokenDuplicate);
    }

    /// <summary>
    /// Ends the current impersonation context.
    /// </summary>
    public void EndImpersonationContext()
    {
        //if the context exists undo it and dispose of the object
        if (impersonationContext != null)
        {
            //end the impersonation context and dispose of the object
            impersonationContext.Undo();
            impersonationContext.Dispose();
        }

        //mark the impersonation flag false
        impersonating = false;
    }

    #endregion

    #region properties

    /// <summary>
    /// Gets a value indicating whether the impersonation is currently active.
    /// </summary>
    public bool Impersonating
    {
        get
        {
            return impersonating;
        }
    }

    #endregion

    #region IDisposable implementation

    ~ImpersonationContext()
    {
        Dispose(false);
    }

    public void Dispose()
    {
        Dispose(true);               
    }

    protected virtual void Dispose(bool disposing)
    {
        if (disposing)
        {
            if (impersonationContext != null)
            {
                impersonationContext.Undo();
                impersonationContext.Dispose();
            }
        }
    }

    #endregion    
} 
```

以下是您将如何使用该类：

```
using (ImpersonationContext context = new ImpersonationContext("user", "password", "domain"))
{
    if (context.Impersonating)
    {
        Process.Start(@"/Support/SendFax/SendFax.exe");
    }
} 
```

# c# - 如何在绑定中使用转换器而不抛出“FormatException”？

> ID：10178624
> 
> 赞同：1
> 
> 时间：2012-04-16T17:17:08.047
> 
> 标签：c#, wpf, binding, ivalueconverter

使用我的转换器会引发“FormatException”，并显示消息“输入字符串的格式不正确”。在疑难解答提示中，它说“将字符串转换为 DateTime 时，在将每个变量放入 DateTime 对象之前解析字符串以获取日期”。这个提示总是出现吗？因为我没有在 Converter 中使用 DateTime 对象，尽管它在 MainWindow 的其他地方使用。

我的主窗口中有一个用户控件：

```
<local:dCB_Props x:Name="cbTags" Height="23" VerticalAlignment="Top" AddClick="cbTags_AddClick" EditClick="cbTags_EditClick" /> 
```

我动态地向它添加项目，其类型是另一个 UserControl，称为 EditDeleteItem。我将它的 DataTemplate 设置为以下之一：

```
<DataTemplate x:Shared="false" x:Key="TagTemplate">
    <StackPanel>
        <TextBlock Text="{Binding Path=Label, Mode=TwoWay}"/>
        <CheckBox Style="{DynamicResource DaisyCheckBox}" HorizontalAlignment="Left" Content="Isolated">
            <CheckBox.IsChecked>
                <Binding Path="TagSearchOptions.TagPosition" Converter="{StaticResource TagPosConverter}"/>
            </CheckBox.IsChecked>
        </CheckBox>
        <CheckBox Style="{DynamicResource DaisyCheckBox}" HorizontalAlignment="Left" Content="Match Case" />
        <CheckBox Style="{DynamicResource DaisyCheckBox}" HorizontalAlignment="Left" Content="Include" />
    </StackPanel>
</DataTemplate> 
```

我的转换器是：

```
public class TPositionToBoolConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        if(value!=null)
        {
        }
        return false;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        return TagPosition.Anywhere;
    }
} 
```

下面是资源字典中的 Key

```
<local:TPositionToBoolConverter x:Key="TagPosConverter"/> 
```

当转换器正常工作时，我将更改转换器中的代码。我应该提到，如果我删除转换器，它不会抛出异常。

提前致谢。

## 更新：

我更改了`Convert`方法的代码，它现在返回`false`而不是`"false"`. 我应该提到我首先返回一个布尔值，但作为最后的手段，在尝试了其他事情之后，我试图返回一个字符串，但在写这个问题时忘记把它改回来。

## 更新 2：

堆栈跟踪：

> 在 System.Text.StringBuilder.AppendFormat(IFormatProvider provider, String format, Object[] args) 在 System.String.Format(IFormatProvider provider, String format, Object[] args) 在 System.Diagnostics.TraceListener.TraceEvent(TraceEventCache eventCache,字符串源，TraceEventType eventType，Int32 id，字符串格式，Object[] args) 在 System.Diagnostics.TraceSource.TraceEvent(TraceEventType eventType, Int32 id, String format, Object[] args) 在 MS.Internal.AvTrace.Trace(TraceEventType类型，Int32 eventId，字符串消息，字符串 [] 标签，对象 [] 参数）在 MS.Internal.TraceData.Trace（TraceEventType 类型，AvTraceDetails traceDetails，对象 p1，对象 p2）在 System.Windows.Data.BindingExpression.UpdateSource（对象值）在 System.Windows.Data.BindingExpressionBase.UpdateValue() 在 System。Windows.Data.BindingExpression.SetValue(DependencyObject d, DependencyProperty dp, Object value) at System.Windows.DependencyObject.SetValueCommon(DependencyProperty dp, Object value, PropertyMetadata metadata, Boolean coerceWithDeferredReference, OperationType operationType, Boolean isInternal) at System.Windows.DependencyObject System.Windows.Controls.Primitives.ToggleButton.OnToggle() 的 System.Windows.Controls.Primitives 的 System.Windows.Controls.Primitives.ToggleButton.set_IsChecked(Nullable`1 值) 的 .SetValue(DependencyProperty dp, Object value)。 ToggleButton.OnClick() 在 System.Windows.Controls.Primitives.ButtonBase.OnMouseLeftButtonDown(MouseButtonEventArgs e) 在 System.Windows.RoutedEventArgs.InvokeHandler（委托处理程序，对象目标）在 System.Windows.EventRoute。InvokeHandlersImpl(Object source, RoutedEventArgs args, Boolean reRaised) at System.Windows.UIElement.ReRaiseEventAs(DependencyObject sender, RoutedEventArgs args, RoutedEvent newEvent) at System.Windows.UIElement.OnMouseDownThunk(Object sender, MouseButtonEventArgs e) at System.Windows.RoutedEventArgs .InvokeHandler(Delegate handler, Object target) at System.Windows.EventRoute.InvokeHandlersImpl(Object source, RoutedEventArgs args, Boolean reRaised) at System.Windows.UIElement.RaiseEventImpl(DependencyObject sender, RoutedEventArgs args) 在 System.Windows.UIElement.RaiseEvent System.Windows.Input.InputManager.ProcessStagingArea() 处的（RoutedEventArgs args，布尔值信任）RoutedEventArgs args, RoutedEvent newEvent) at System.Windows.UIElement.OnMouseDownThunk(Object sender, MouseButtonEventArgs e) at System.Windows.RoutedEventArgs.InvokeHandler(Delegate handler, Object target) at System.Windows.EventRoute.InvokeHandlersImpl(Object source, RoutedEventArgs args , Boolean reRaised) at System.Windows.UIElement.RaiseEventImpl(DependencyObject sender, RoutedEventArgs args) at System.Windows.UIElement.RaiseEvent(RoutedEventArgs args, Boolean trust) at System.Windows.Input.InputManager.ProcessStagingArea()RoutedEventArgs args, RoutedEvent newEvent) at System.Windows.UIElement.OnMouseDownThunk(Object sender, MouseButtonEventArgs e) at System.Windows.RoutedEventArgs.InvokeHandler(Delegate handler, Object target) at System.Windows.EventRoute.InvokeHandlersImpl(Object source, RoutedEventArgs args , Boolean reRaised) at System.Windows.UIElement.RaiseEventImpl(DependencyObject sender, RoutedEventArgs args) at System.Windows.UIElement.RaiseEvent(RoutedEventArgs args, Boolean trust) at System.Windows.Input.InputManager.ProcessStagingArea()InvokeHandlersImpl(Object source, RoutedEventArgs args, Boolean reRaised) at System.Windows.UIElement.RaiseEventImpl(DependencyObject sender, RoutedEventArgs args) 在 System.Windows.UIElement.RaiseEvent(RoutedEventArgs args, Boolean trust) 在 System.Windows.Input.InputManager。 ProcessStagingArea()InvokeHandlersImpl(Object source, RoutedEventArgs args, Boolean reRaised) at System.Windows.UIElement.RaiseEventImpl(DependencyObject sender, RoutedEventArgs args) 在 System.Windows.UIElement.RaiseEvent(RoutedEventArgs args, Boolean trust) 在 System.Windows.Input.InputManager。 ProcessStagingArea()

## 解决方案

我发现了问题。在资源字典中，转换器的键应该在 DataTemplate 之上。我认为不管它的位置如何，它都会起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T17:21:01.443

您的转换器应该返回一个布尔值，而不是一个字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T17:30:53.963

把它拼出来

```
 if(value!=null) return true; else return false; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T17:28:56.707

[ToggleButton.IsChecked 属性](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.togglebutton.ischecked.aspx)等待来自您的转换器的`Nullable<bool>`/ 。`bool?`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T17:22:07.303

您是否尝试过返回布尔对象而不是字符串表示形式？

```
public class TPositionToBoolConverter : IValueConverter 
{     
   public object Convert(object value, Type targetType, object parameter, CultureInfo culture)     
{         
   if(value!=null)         
   {
   }
    return false;
}      

   public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)     
   {         
       return TagPosition.Anywhere;     
   } 
} 
```

# ios - 如何使用导航控制器关闭弹出框？

> ID：10178625
> 
> 赞同：0
> 
> 时间：2012-04-16T17:17:10.370
> 
> 标签：ios, navigationcontroller, popover

我有一个应用程序，它分为四个视图，当我点击一个视图时，应用程序会显示一个弹出框，并且该弹出框有一个导航控制器。我可以在视图之间导航，并且数据显示正确。但是当我在最后一个视图中并点击一行时，弹出框不会关闭（我想要在 didSelectRowAtIndexPath 中）。

怎么可能做到？

我以这种方式尝试过，我创建了一个关闭弹出框的方法，我将此方法称为 en didSelectRowAtIndexPath，但没有奏效。

这是主 ViewController 中的方法

```
-(IBAction)mostrarTabla:(id)sender
{
    // Popover that shows the table
    UIPopoverController *popover;

    // RootViewController is the first view

    RootViewController *rootViewController = [[RootViewController alloc] init];
    // With a nav bar
    UINavigationController *navBar = [[UINavigationController alloc] initWithRootViewController:rootViewController];
    [rootViewController release];

    // Popover customitation
    navBar.contentSizeForViewInPopover = CGSizeMake(20.0f, 20.0f);
    popover = [[UIPopoverController alloc] initWithContentViewController:navBar];
    [navBar release];
    popover.delegate = self;
    popover.popoverContentSize = CGSizeMake(320.0f, 832.0f);

    // PopOver is shows in the view 1
    [popover presentPopoverFromRect:CGRectMake(100.0f, 10.0f, 20.0f, 20.0f) inView:_view1 permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
} 
```

我在这个视图控制器中创建了一个方法

```
-(void)hidePopover
{
    [self.popOver dismissPopoverAnimated:YES];
} 
```

在最后一个视图中，我使用了该方法但没有用

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    ViewController *grafica = [[ViewController alloc] init];

    self.indicadorId = [[self.arrayId objectAtIndex:indexPath.row] integerValue];

    DataIndicador *datos =[[DataIndicador alloc] init];

    datos.idIndicador = self.indicadorId;

    [datos release];

    [grafica hidePopover];
} 
```

在最后一个视图中，我希望弹出框返回其视图并显示数据（图表）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T01:42:25.153

ViewController 的 grafica 瞬间与 VieController 最初呈现弹出框的任何瞬间不同。

# html - 有没有办法用 CSS 边框创建水平渐变？

> ID：10178630
> 
> 赞同：1
> 
> 时间：2012-04-16T17:17:41.853
> 
> 标签：html, css, border, gradient

我正在尝试创建一种效果，其中我的 DIV 对象的边框具有从左到右的水平渐变渐变效果。渐变的透视必须包含所有边界（不仅仅是顶部和底部）

到目前为止，我遇到的所有文档都描述了如何垂直进行

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-12T19:28:15.793

所有其他答案只是将您指向一个 CSS 生成器。

虽然[Colorzilla](http://www.colorzilla.com/gradient-editor/)在应用供应商前缀方面做得很好，但它的核心 CSS 非常简单。不过，我相信在这种情况下使用伪元素而不是边框​​可以获得更好的跨浏览器兼容性。我就是这样做的：

从一个简单的 div 开始：

```
<div class="top-gradient-border">
    Lorem ipsum
</div> 
```

基本 CSS：

```
.top-gradient-border {
    width: 200px;
    height: 30px;
    /*other irrelevant styling in here*/
} 
```

添加渐变边框（此示例向您展示如何为 a 执行此操作`border-top`，更改其他边的伪元素）：

```
.top-gradient-border::before {
    content: "";
    background-image: linear-gradient(to right, white, black);
    height: 1px; /*for horizontal border; width for vertical*/
    display: block;
} 
```

[您可以在CSS-Tricks](http://css-tricks.com/css3-gradients/)上了解有关 CSS 渐变的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T17:25:02.557

Colorzilla 允许您使用 CSS 生成渐变 - 不涉及图形文件。它还可以在许多浏览器中可靠地工作。

[http://www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-16T17:23:23.977

Photoshop

但是看看这个，它可能只是为你做的伎俩（加上它的 GUI）

[彩色斯拉](http://www.colorzilla.com/gradient-editor/)

# google-analytics - Google Analytics，“新版本”中的事件跟踪在哪里

> ID：10178632
> 
> 赞同：0
> 
> 时间：2012-04-16T17:17:44.877
> 
> 标签：google-analytics

好吧，问题说明了一切，在旧版本中它在`Content > Event Tracking`但在“新版本”中，我到处搜索，但在任何地方都找不到。

它还在谷歌分析中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T18:23:12.837

它仍然存在，但重命名为`Events`（仍在 下`Content`）。

# android - 在 Android 上解码 RTP 流 (MPEG4)

> ID：10178638
> 
> 赞同：3
> 
> 时间：2012-04-16T17:18:12.710
> 
> 标签：android, video, stream, rtp

大家好，我希望你能帮助我解决这个问题。

**问题：** 我有一个 RTP 流，我在我的专用网络 (WiFi) 上进行多播。我想使用一些 android 平板电脑来显示流。平板电脑的数量不能被限制，并且质量不应该随着客户数量的增加而下降。这解释了为什么我需要多播而不是单播。

**方法：** 理论上，通过在服务器端创建 RTSP 或 HTTP 流，我应该能够将视频提供给我的客户。但是，我的理解是，当太多客户端同时连接时，服务器会受到性能影响，我需要避免这种情况。理想情况下，我希望所有客户端都简单地收听相同的多播。这样，客户端的数量对服务器性能没有影响。*[注意：IP 是本地的，并且 TTL 设置为 0/1，因此除了我自己的网络之外，没有任何危险会被多播数据包阻塞。]*

**实现** 为了实现上述方法，我想在 Android 中编写一个多播客户端，接收 RTP 数据包并将流拼接在一起。我用 JPEG 有效载荷尝试了这个，效果很好。然而，JPEG 的问题在于，对每一帧进行解码的*BitmapFactory.decodeByteArray*调用非常昂贵（几乎 100 毫秒！），这极大地限制了帧速率。网络上的负载也相当高，因为 JPEG 不是一个好的视频流协议。

我想做的是为视频做我已经为图片做的事情，即将来自 RTP 数据包的有效负载流（例如 MPEG4）拼接在一起并将其提供给“某物”。最初我认为 VideoView 可以使用原始输入流，但我错了，VV 似乎只能使用 rtsp 或 http url（正确吗？）。

**解决方案？** 现在，我有什么选择？由于上述原因，我想避免从原始 RTP 流设置 RTSP 服务器并为所有平板电脑提供服务。我确实环顾了 2 天，并检查了 SO 和网络上提出的所有解决方案，但似乎没有任何问题适用于我的问题（在大多数情况下，RTSP url 或单播是解决方案，但我认为我不能使用它）所以我想是时候问这个问题了。

非常感谢任何帮助！

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T19:38:35.303

再次阅读您的帖子后，我发现了我第一次错过的东西。我使用 BitmapFactory.decodeByteArray 来自 Axis 摄像机多播的 MJPEG over HTTP。呼叫可以在几毫秒内完成。问题在于它通常希望每次调用都创建一个新的位图。有一种方法可以使位图持续存在，并且可以缩短时间。我只是不记得当时的电话，我的普通开发计算机目前正在被破坏......错误，我们的 IT 已经“升级”了，所以我不能告诉你，但你应该找到它，如果你搜索了一下。我能够在 Xoom 和 Galaxy Tab 10.1 上获得 30fps，其他一些没问题。

马克·博特彻 mboettcher@ara.com

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T20:00:51.653

好的，我检查并使用重载的 BitmapFactory.decodeByteArray 来使用在 BitmapFactory.Options 中设置了 InBitmap 标志的不可变位图。可能是我必须为位图本身做的其他事情，至少可能使它成为静态。可能还需要设置其他一些标志，但你现在绝对应该有足够的时间继续下去。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T19:28:28.120

我们在 Android 上尝试通过 RTSP 播放 MJPEG 流时遇到问题。我们拥有的多播视频服务器无法通过 HTTP 发送 MJPEG，并且由于延迟，我们不想在 RTSP 上使用 H.264。该应用程序是一个 ROV，将实时视频发送回 Droid 进行显示。只是为了给你省很多麻烦，如果我正确理解了这个问题，你根本无法使用 Android SDK 中的任何东西，比如 MediaPlayer 等。最后我们付钱给一个人做一些自定义代码使用MPlayer、ffmpeg 和 Live555。希望这可以帮助。

# clojure - STM 事务中的 refs 真的是一致的吗？

> ID：10178639
> 
> 赞同：4
> 
> 时间：2012-04-16T17:18:12.987
> 
> 标签：clojure, stm

我在[clojure.org/refs](http://clojure.org/refs)上读到

> 从事务的起点（它的“读取点”）开始，所有对 Refs 的读取都将看到“Ref world”的一致快照。事务将看到它所做的任何更改。这称为交易中价值。

在 wikipedia上还有一个指向[Snapshot Isolation](http://en.wikipedia.org/wiki/Snapshot_isolation)的链接，这意味着一旦事务开始，读取任意数量的 ref 将彼此一致。

我做了一个测试用例...

```
(def r1 (ref 0))
(def r2 (ref 0))

(defn delay-then-inc-ref [id ref delay]
  (.start 
    (Thread. 
        #((println id " start")
          (Thread/sleep delay)
          (dosync
             (alter ref inc))
             (println id " end")))))

(defn deref-delay-deref [ref1 ref2 delay]
    (.start 
       (Thread. 
          #((println "S start")
            (dosync 
              (let [a @ref2]
                 (Thread/sleep delay)
                 (println "S r1=" @ref1))) ; @ref1 consistent with @ref2 ?
                 (println "S end")))))

*clojure-version*
;=> {:major 1, :minor 3, :incremental 0, :qualifier nil}
(deref-delay-deref r1 r2 2000) 
(delay-then-inc-ref "1" r1 500)
(delay-then-inc-ref "2" r1 1000)
(delay-then-inc-ref "3" r1 1500) 
```

输出是：

```
S start
1 start
2 start
3 start
1 end
2 end
3 end
r1 = 3
S end
nil 
```

`r1 = 3`而不是的值`r1 = 0`表明，在`deref-delay-deref`ref1 的 deref 中，在三个事务发生*后*`sleep`选择 r1 的值。*`delay-then-inc-ref`*

 *请注意，我知道`ensure`要*防止*在特定事务期间其他事务对 refs 进行更新，但我认为这不适用于此处。`ref1`只要我看到与我的交易开始一致的值，我不在乎是否发生变化。

这种行为如何符合上述参考文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T17:42:25.237

事实证明，如果 ref 有一些历史记录，它的行为与我预期的一样，因此将 ref 声明更改为添加 a `:min-history`，然后如图所示设置两个 refs，似乎可以使它工作....

```
(def r1 (ref 0 :min-history 5))
(def r2 (ref 0 :min-history 5))

(dosync
 (ref-set r1 0)
 (ref-set r2 0)) 
```

然后输出是：

```
S start
1 start
1 end
2 start
2 end
3 start
3 end
S r1= 0
S end
nil 
```

读到[这里](http://java.ociweb.com/mark/stm/article.html#faults)，很清楚发生了什么。读取事务正在重新启动，因为在事务开始之前的 ref 历史记录中没有条目。为了确认，我添加了更多日志记录：

```
(defn deref-delay-deref [ref1 ref2 delay]
    (.start 
       (Thread. 
          #((println "S start")
            (dosync
              (println "transaction starting")
              (let [a @ref2]
                 (Thread/sleep delay)
                 (println "S r1=" @ref1))) ; should be consistent with @ref2
            (println "S end"))))) 
```

没有历史模型的输出：

```
S start
transaction starting
1 start
2 start
3 start
1 end
2 end
3 end
transaction starting
S r1= 3
S end 
```

并使用历史模型：

```
S start
transaction starting
1 start
2 start
3 start
1 end
2 end
3 end
S r1= 0
S end
nil 
```

**更新：**事实证明，由于测试用例的人为性质，我上面的回答让人分心。在现实世界的使用中，事务是否重新启动并不重要，因为必须编写事务以使其可重新启动。运行时不保证只读事务是否会在存在/不存在历史记录的情况下完成。相反，它可以做任何必要的事情来完成交易世界，并且必须在编写交易代码时牢记这一点。更详细的讨论[在这里](http://www.reddit.com/r/Clojure/comments/sd7vq/clojure_stm_ref_consistency/#)

我将以上内容留作参考。*

# vim - 在vim中打开新窗口时垂直线对齐

> ID：10178644
> 
> 赞同：3
> 
> 时间：2012-04-16T17:18:28.607
> 
> 标签：vim

在vim中的当前窗口下打开新窗口（拆分）时如何保持垂直对齐？

当我编辑一个文件时，有些行是可见的（比如 1-20）。一旦我打开另一个窗口，可见线就会变成其他东西（比如 5-15）。我想保持原始窗口垂直对齐，这意味着在我的示例中参见第 1-11 行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T20:35:14.143

“垂直对齐”发生了变化，因为 Vim 试图保持光标当前所在的行在视图中。做你想做的最简单的方法就是`H`在你分裂之前按下。 `H`将光标移动到窗口的顶行，因此当您拆分视口时不必更改以使光标保持在视图中。

这当然会移动您的光标，但您可以点击````返回到您按下 时设置的标记`H`。

# c++ - 通过指针在 gdb/Eclipse CDT 调试监视中显示真实对象层次结构

> ID：10178646
> 
> 赞同：0
> 
> 时间：2012-04-16T17:18:45.773
> 
> 标签：c++, linux, debugging, gdb, eclipse-cdt

MSVS 有一个很好的特性，当观察一个指向接口的指针时，它显示的是真实的对象。例如

```
struct IIntf1 {}
struct IIntf2 {}
class CIntf1: public IIntf1 {}
class CIntf2: public IIntf2, public CIntf1 {}
IIntf1 *p = new CIntf2(); 
```

MSVS 将显示 p 确实是 CIntf2，即 IIntf1 及其所有成员，它甚至会在那里显示多个嵌套类（即 p 是 C/IIntf1 等等）。

Linux 下的 gdb 和/或 Eclipse CDT 有类似的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T17:04:40.547

`set print object on`在 gdb 中尝试。`set print pretty`（如果您希望打印的对象具有更多结构，您也可以尝试。）

# android - Android Webview：为什么选项菜单中的刷新不起作用？

> ID：10178651
> 
> 赞同：0
> 
> 时间：2012-04-16T17:19:28.090
> 
> 标签：android, webview, refresh, reload

多年来，我一直在绞尽脑汁，但认为我离树林太近了，看不到树木。谁能告诉我为什么下面菜单中的*item1*不能刷新 web 视图？

（退出按钮（*item2*）工作得很好，如果这很重要。）

```
package com.my.project;

import android.app.Activity;
import android.os.Bundle;
import android.webkit.WebView;
import android.view.View;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.Window;

public class MyProjectActivity extends Activity
{
    final Activity activity = this;

        public void onCreate(Bundle savedInstanceState) 

            {
                super.onCreate(savedInstanceState);
                getWindow().requestFeature(Window.FEATURE_NO_TITLE);
                setContentView(R.layout.main);       

                WebView WebView = (WebView) findViewById(R.id.webview);                         
                WebView.getSettings().setJavaScriptEnabled(true);
                WebView.setScrollBarStyle(View.SCROLLBARS_OUTSIDE_OVERLAY);
                WebView.loadUrl("http://www.mydomain.php");
            }   

        // Create Menu Buttons
        @Override
        public boolean onCreateOptionsMenu(Menu menu)
            {   
                MenuInflater inflater = getMenuInflater();
                inflater.inflate(R.menu.options_menu, menu);
                return true;
            }

        // Set Menu Button Actions
        @Override
        public boolean onOptionsItemSelected(MenuItem item) 
            {
            switch (item.getItemId()) 
                {
                    case R.id.item1:
                        reload();
                        return true;
                    case R.id.item2:     
                        finish();
                        return true;
                    default:
                        return super.onOptionsItemSelected(item);
                }
            }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T17:26:17.433

试试这个只是微小的变化:::

```
public class MyProjectActivity extends Activity
{
final Activity activity = this;
WebView webView;

    public void onCreate(Bundle savedInstanceState) 

        {
            super.onCreate(savedInstanceState);
            getWindow().requestFeature(Window.FEATURE_NO_TITLE);
            setContentView(R.layout.main);       

            webView = (WebView) findViewById(R.id.webview);                         
            webView.getSettings().setJavaScriptEnabled(true);
            webView.setScrollBarStyle(View.SCROLLBARS_OUTSIDE_OVERLAY);
            webView.loadUrl("http://www.mydomain.php");
        }   

    // Create Menu Buttons
    @Override
    public boolean onCreateOptionsMenu(Menu menu)
        {   
            MenuInflater inflater = getMenuInflater();
            inflater.inflate(R.menu.options_menu, menu);
            return true;
        }

    // Set Menu Button Actions
    @Override
    public boolean onOptionsItemSelected(MenuItem item) 
        {
        switch (item.getItemId()) 
            {
                case R.id.item1:
                    webView.reload();
                    break;
                case R.id.item2:     
                    finish();
                    break
            }
                    return super.onOptionsItemSelected(item);
        }
} 
```

# tkinter - tkinter 包几何：1 列，一行中有 4 个单选按钮？

> ID：10178652
> 
> 赞同：1
> 
> 时间：2012-04-16T17:19:29.903
> 
> 标签：tkinter, python-2.7

我想在一列中有四个水平按钮（整个 UI 是一列）。我无法弄清楚如何使用包几何管理器执行此操作。我已经使按钮垂直，但必须有办法做到这一点。我是 Python 新手，所以我的代码非常简单：

```
v = IntVar()

Radiobutton(root, text="Red", variable=v, value=1, command = red).grid(row=1) 
Radiobutton(root, text="Blue", variable=v, value=2, command = blue).grid(row=2)
Radiobutton(root, text="Green", variable=v, value=3, command = green).grid(row=3)
Radiobutton(root, text="Other", variable=v, value=4, command = Other).grid(row=4) 
```

如果我把它们放在同一行，它们就会堆叠在一起。我阅读了另一篇关于对按钮进行分组的文章，但那是针对 Android 应用程序的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T19:32:39.900

当按钮垂直堆叠时，它们都在一列中。
假设您的意思是：“*我想在* **一行**中有四个水平按钮。”，
每个按钮在该行的单独列中，
我的第一个建议是使用框架来包含按钮。

这是一个使用[*网格*](http://effbot.org/tkinterbook/grid.htm)及其*行*和*列*选项的示例：

```
import Tkinter as tki # tkinter in Python 3

root = tki.Tk()

frm = tki.Frame(root, bd=16, relief='sunken')
frm.grid()

var = tki.StringVar()

mild = tki.Radiobutton(frm, text='Mild', variable=var)
mild.config(indicatoron=0, bd=4, width=12, value='Mild')
mild.grid(row=0, column=0)

medium = tki.Radiobutton(frm, text='Medium', variable=var)
medium.config(indicatoron=0, bd=4, width=12, value='Medium')
medium.grid(row=0, column=1)

hot = tki.Radiobutton(frm, text='Hot', variable=var)
hot.config(indicatoron=0, bd=4, width=12, value='Hot')
hot.grid(row=0, column=2)

root.mainloop() 
```

或者您可以使用[*pack*](http://effbot.org/tkinterbook/pack.htm)，将*side*选项设置为`'left'`.
这是一个在循环中创建按钮并绑定到字典中的键的示例：

```
import Tkinter as tki

def print_var(*args):
    print root.getvar(name=args[0])
    # or
    print var.get()

root = tki.Tk()

frm = tki.Frame(root, bd=16, relief='sunken')
frm.pack()

var = tki.StringVar()
var.trace('w', print_var)

b_dict = {'Mild':0, 'Medium':0, 'Hot':0}

for key in b_dict:
    b_dict[key] = tki.Radiobutton(frm, text=key, bd=4, width=12)
    b_dict[key].config(indicatoron=0, variable=var, value=key)
    b_dict[key].pack(side='left')

root.mainloop() 
```

有关变量类及其方法的信息，请参阅 →[此处](http://effbot.org/tkinterbook/variable.htm)。

# wpf - 未知的构建错误“此实现不是 Windows 平台 FIPS 验证的加密算法的一部分”

> ID：10178655
> 
> 赞同：4
> 
> 时间：2012-04-16T17:19:49.700
> 
> 标签：wpf, silverlight, xaml, fips

所以我启用了这个组策略，当我第一次尝试编译我的解决方案时，我得到了这个错误。有趣的是，我只在一个地方使用加密功能，但我看到的是我所有的 Silverlight ResourceDictionary 文件和 WPF userControl 文件。其他一切似乎都编译得很好。

为什么我只在我对加密什么都不做的 xaml 文件上看到错误？我知道我可以禁用 FIPS 组策略，但我确实想支持它。知道为什么特定的 XAML 文件在编译期间会抛出此错误吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-07-01T16:39:07.243

我知道我玩游戏有点晚了，但我最近遇到了这个问题并且也找到了解决方案。[由于上述](https://stackoverflow.com/questions/10178655/unknown-build-error-this-implementation-is-not-part-of-the-windows-platform-fip/10190769#10190769)@mdutra 所述的原因，这就是它不起作用的原因，但有趣的是，Visual Studio 2010 和 2012 有两个不同的“修复”。

Microsoft Connect 帖子（不再存在）指出：

> Visual Studio 2012 现在在运行 msbuild 的单独进程中构建 C# 项目。此过程不会看到您添加到 devenv.exe.config 的条目（适用于 VS 2010）。您应该`<enforceFIPSPolicy enabled="false"/>`直接`</runtime>`在 msbuild.exe.config 文件中的标记上方添加；通常在`C:\Windows\Microsoft.Net\Framework\v4.0.30319\msbuild.exe.config`.

我也将它添加到`C:\Windows\Microsoft.Net\Framework64\v4.0.30319\msbuild.exe.config`文件中，因为我不知道我使用的是哪个 MSBuild。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T11:56:18.417

经过一些研究，我发现这个答案很有意义：

[WPF 和 FIPS](http://social.msdn.microsoft.com/Forums/en/wpf/thread/c9ec023b-fd43-4c50-abe5-ce39d7e3e624)

以下是链接的内容，以防万一它被删除：

```
The following is the reply I got from the WPF XAML team:

We didn’t fix it because this issue was discovered days (June 2, 2008) before the release.

I still have the BBPack I didn’t checkin.  Here is the comment from the code.

            // The Federal Information Processing Standard mandates that

            // MD5 is obsolete and not safe for cryptographic checksums.

            // We are using it to coordinating source files for debugging

            // not authenticating so MD5 use is OK here.

            // But, on a OS with the FIPS compliant switch ON, the managed

            // MD5CryptoServiceProvider Ctor will throw.  So we can't use it.

            //

            // Currently we use a PInvoke wrapper to the Native layer;

            // which still works, even on a FIPS compliant machine.  A Better

            // fix would be to move to the approved SHA checksums, but that

            // will require co-ordination with VS and the Debugger groups etc.

The MSI builder and a few other tools also threw on a FIPS=1 machine.

So even we if we fixed our part (in 3.5sp1), the customer’s end-to-end solution was still broken.

General FIPS info:

http://support.microsoft.com/kb/811833/en-us 
```

# unix - unix：如何使用排序实用程序根据列对 bcp 文件进行排序？

> ID：10178658
> 
> 赞同：1
> 
> 时间：2012-04-16T17:20:06.753
> 
> 标签：unix

您好，我需要根据列字段值对 bcp 文件进行排序。此处字段分隔符用作 \x01，行分隔符用作 \x02。所有信息都存储在 bcp 文件的单行中。我已尝试使用以下查询

排序 -t \x01 -z\x02 -k2n,2n -o sorted_data_ `date "+%m%d%y%H%M%S"`.bcp /BNYM/act_agent_events_AgDrCUa5Uiw7kHq5NgGoIBWs_133456.bcp

但它没有根据第二列 m 排序，附加 bcp 文件。请帮助我了解如何根据第二列（在日期值之后）对文件进行排序

## bcp 文件中的数据

2012-04-16 10:35:16.117BAAAAC0000-6TgTbL12lFR9uTYB-8A0251CAAABY25JFX6XZfri6NgGoIBWs30004373120010840/LogisticsMgr/DeliveryLogisticsMgrDeliveryCheckStatusLogisticsMgrqwQzeSlY7aWIcu6jFxHS/Q==wBkxsG+SGmPkV8Cz7LoMvw==logistics652841288162400nbhydsoletixp9.00002012-04-16 10:35:16.120BAAAAB0000-6TgTbL12lFR9uTYB-8A0251CAAADUsVwslC8nf7i6NgGoIBWs30003762320010090/AccountMgmt/BillingAccountMgmtBillingChargeAccountAccountMgmtdNCvO/ 2f5LX3BjewCbfCaA==zhdycSzBtfdvoeEC8hPLfA==finance652845508162400nbhydsoletixp9.00002012-04-16 10:35:16.137AQBRv3dT4YnZfri6NgGoIBWs0000-6TgTbL12lFR9uTYB-8A0251CAAABRv3dT4YnZfri6NgGoIBWs30003044870011040/OrderManagement/OrderingOrderManagementOrderingCheckStatusOrderManagementPTWWE0wTSwsQZMYEQ4g6RQ==0KtezUvQkOOkSrTAhl455w==ordermgmt652841378162400ordermgmt1.writenow.com9.00002012-04-16 10:35:16.109AAAoQXS2OW7Zfri6NgGoIBWs0000-6TgTbL12lFR9uTYB-8A0251CAAAAoQXS2OW7Zfri6NgGoIBWs30003913990010760/StockApp/StockServiceStockAppStockServiceStockCheckStockAppV3UuJQeiUa4b+DydaHy3FQ==mnn8+QVDZ+Clj8Fyz7ddsA==warehouseamericas652841368162400nbhydsoletixp9.00002012-04-16 10:35:16.102AcD0000-6TgTbL12lFR9uTYB-8A0251CAAACs2k00egPZfri6NgGoIBWs30003443250010840/LogisticsMgr/DeliveryLogisticsMgrDeliveryCheckStatusLogisticsMgrqwQzeSlY7aWIcu6jFxHS/Q==wBkxsG+SGmPkV8Cz7LoMvw== logistics652841288162400nbhydsoletixp9.00002012-04-16 10:35:16.141QAqSPLPSqLZfri6NgGoIBWs0000-6TgTbL12lFR9uTYB-8A0251CAAAAqSPLPSqLZfri6NgGoIBWs30003973920011080/OrderingServices/OrderingOrderingServicesOrderingCheckStatusOrderingServicesCVim6lKsl/QGDrErqenNdg==13RQpOOyOFvxX7p5dAzVdQ==customergw652841248172400custgw1.writenow.com9.00002012-04-16 10:35:16.125AQDO.WX2ikQnf7i6NgGoIBWs0000-6TgTbL12lFR9uTYB-8A0251CAAADO.WX2ikQnf7i6NgGoIBWs30003943690010140/AccountMgmt/BillingAccountMgmtBillingChargeAccountAccountMgmtdNCvO/2f5LX3BjewCbfCaA==zhdycSzBtfdvoeEC8hPLfA==finance652845508162400nbhydsoletixp9.0000

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T17:31:30.047

我没有你的原始文件可以玩，但我认为这可能有用。

排序 -t \x01 -z \x02 -k 2n

面对这个问题，我会使用 sed 对其进行按摩，然后对其进行排序。

此外，如果您对 bcp 命令的运行方式有任何控制权，则可以添加 -c 选项为其添加换行符，这应该可以简化操作。

[http://msdn.microsoft.com/en-us/library/ms162802.aspx](http://msdn.microsoft.com/en-us/library/ms162802.aspx)

# c - 从文件中读取（） - 阻塞与非阻塞行为

> ID：10178660
> 
> 赞同：1
> 
> 时间：2012-04-16T17:20:17.070
> 
> 标签：c, linux, nfs, ocfs2

假设我们使用`fopen()`和从收到的文件指针打开一个文件，使用`fileno()`. 然后我们从这个文件中做很多（>10^8）随机`read()`的相对小的块，大小在 4Bytes 到 10KBytes 之间：

如果`read()`文件`errno`系统是

1.  `ext3`

2.  `NFS`

3.  `OCFS2`

4.  2 和 3 的组合（`OCFS2`通过`NFS`）

?

我的读数给了我一个结论，它不应该是 1\. （如果文件没有`O_NONBLOCK`设置，如果`ext3`有可能设置它）但对于其他三个（2., 3., 4.）我不确定.

（顺便说一句：我可以假设`O_NONBLOCK`在任何情况下都没有设置为默认值吗？）

之所以出现这个问题，是因为我观察到`read()`s 返回的字节数少于`errno`案例 4 中未设置的请求。

通过测试深入研究的问题是这种行为发生在 <1/1000000000 的情况下...... - 这仍然太频繁了:-}

**更新**：平均文件大小在几 TBytes 和大约 1GByte 之间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T18:07:56.717

您不应该假设 read() 不会返回比任何文件系统请求的字节少。在大读取的情况下尤其如此，因为 POSIX.1 表明大于 SSIZE_MAX 的大小的 read() 行为取决于实现。在我现在使用的这个主流 Unix 机器上，SSIZE_MAX 是 32767 字节。read() 今天总是返回全额的事实并不意味着它将来会。

一个可能的原因可能是将来 I/O 优先级在内核中更加充实。例如，您正尝试从与另一个更高优先级进程相同的设备读取数据，如果您的进程没有导致磁头移动远离其他进程想要的扇区，则其他进程将获得更好的吞吐量。内核可能会选择给你的 read() 一个简短的计数来让你暂时离开，而不是继续进行低效的交错块读取。 为了 I/O 效率，[已经做了一些奇怪的事情。](https://bugs.launchpad.net/ubuntu/+source/linux/+bug/317781?comments=all)不被禁止的往往变成强制性的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T18:55:21.750

我们解决了描述为`read()`从位于`NFS`挂载上的文件读取时返回的字节数少于请求的问题，指向`OCFS2`文件系统（我的问题中的案例 4）。

事实上，使用上述设置，`read()`文件描述符上的此类 s 有时返回的字节数少于请求的字节数，而无需`errno`设置。

要读取所有数据，只需`read()`一次又一次地读取，直到读取所请求的数据量。

此外，这样的设置有时会`read()`导致失败`EIO`，即使这样，简单的`read()`也会导致成功并且数据到达。

我的结论：通过`OCFS2`via读取文件的行为类似于从套接字读取`NFS`，这与[http://pubs.opengroup.org/onlinepubs/9699919799/functions/read.html](http://pubs.opengroup.org/onlinepubs/9699919799/functions/read.html)的规范不一致：`read()``read()``read()`

> 尝试读取支持非阻塞读取且当前没有可用数据的文件（管道或 FIFO 除外）时：
> 
> 如果设置了 O_NONBLOCK，read() 将返回 -1 并将 errno 设置为 [EAGAIN]。
> 
> 如果 O_NONBLOCK 被清除，read() 将阻塞调用线程，直到某些数据可用。

不用说我们从未尝试过，甚至没有想过`O_NONBLOCK`为有问题的文件描述符设置。

# c# - 只能在 Type.IsGenericParameter 为 true 的类型上调用获取方法。在我的 ViewModel 中的重载类型

> ID：10178666
> 
> 赞同：1
> 
> 时间：2012-04-16T17:20:30.380
> 
> 标签：c#, .net, asp.net-mvc

这是基类中的属性

```
[ReadOnly(true), Display(GroupName = "Payment Details")]
public virtual GridViewModel<PaymentDetails> Details { get; set; } 
```

这是继承类中的属性

```
[Display(AutoGenerateField = false, AutoGenerateFilter = false), ScaffoldColumn(false)]
public override GridViewModel<PaymentDetails> Details { get; set; } 
```

我得到 Method 只能在 Type.IsGenericParameter 为 true 的类型上调用。错误这是调用堆栈的一部分

```
[InvalidOperationException: Method may only be called on a Type for which Type.IsGenericParameter is true.]
   System.RuntimeType.get_DeclaringMethod() +9546416

[TargetInvocationException: Property accessor 'DeclaringMethod' on object 'System.RuntimeType' threw the following exception:'Method may only be called on a Type for which Type.IsGenericParameter is true.']
   System.ComponentModel.ReflectPropertyDescriptor.GetValue(Object component) +400
   System.Web.Mvc.<>c__DisplayClassb.<GetPropertyValueAccessor>b__a() +18
   System.Web.Mvc.ModelMetadata.get_Model() +19
   System.Web.Mvc.TemplateInfo.Visited(ModelMetadata metadata) +69 
```

# iphone - 在设备中启动项目时出现问题

> ID：10178667
> 
> 赞同：0
> 
> 时间：2012-04-16T17:20:32.087
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

在设备上运行我的项目时，我遇到了一个奇怪的问题。即使应用程序文件存在于上述路径中，我也会看到以下错误。该项目也被复制到设备中，我需要点击应用程序图标来启动它，但是从 XCODE 启动时它失败了。任何线索 - 这是因为我的架构名称中有空格吗？：

```
error: failed to launch '/Users/abhi/Library/Developer/Xcode/DerivedData/MyProject-atlkwwnwccqaopgembmyzeecthfx/Build/Products/QA - Debug - Production-iphoneos/MyProject.app/MyProject' -- No such file or directory (/Users/abhi/Library/Developer/Xcode/DerivedData/MyProject-atlkwwnwccqaopgembmyzeecthfx/Build/Products/QA - Debug - Production-iphoneos/MyProject.app/MyProject) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T17:25:31.460

从您的设备中删除应用程序，切换`OFF`和`ON`您的设备，清理您的代码，然后在设备上运行它，它将安装..

如果没有重启你的 Xcode...

当我遇到同样的问题时，我尝试过这个，这个对我有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T23:03:25.250

Sree Charan 尝试过 XCode 4.3.3 的建议，但没有成功。最终（我不确定这是修复它的原因），我转到编辑器菜单上的验证设置，它将设置从 GDB 更新为 LLDB，然后它工作了。

我只是提供上面的信息，希望它可以帮助别人。我无法验证是什么解决了这个问题（我花了 2 个小时寻找解决方案）。

# cocoa - 如何在 Twitter 流 API 中排除提及

> ID：10178670
> 
> 赞同：0
> 
> 时间：2012-04-16T17:20:46.393
> 
> 标签：cocoa, twitter, twitter-streaming-api

我正在使用 Twitter 流 API，因为我需要获取主页时间线上的所有帖子以及用户关注的列表和主题标签。但是，这也会返回提及（未出现在时间线上）有没有办法将这些从流 API 中排除？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T17:27:33.600

事实证明，在 Twitter Stream 中忽略 @mentions 是不可能的，所以我只需要在收到数据后手动排序和删除 @mentions。

# jquery - rails，解析 json 数组以获得自动完成功能

> ID：10178676
> 
> 赞同：0
> 
> 时间：2012-04-16T17:21:07.893
> 
> 标签：jquery, ruby-on-rails, json, autocomplete

我想知道在这种情况下是否有办法解析 json 数组。我正在为标签文本字段进行自动完成，非常类似于堆栈溢出的标签文本字段。我想有一个与该特定标签相关联的计数。

在我的一个观点中，我有一个...

```
<div class="tags">
    <%= f.label :tag_name, "Tags" %>
    <%= f.text_field :tag_name, data: { autocomplete_source: tags_path} %>
</div> 
```

这反过来又叫我的articles.js.coffee

```
jQuery ->
    $('#article_tag_name').autocomplete
        source: $('#article_tag_name').data('autocomplete-source') 
```

在我的标签控制器中，我有...

```
def index
    @tags = Tag.order(:name).where("name like ?", "%#{params[:term]}%")
    render json: @tags.map{|tag| "#{tag.name} x #{tag.count}"}
end 
```

该代码有效，我可以使用 ajax 从我的标签表中检索我的标签（及其计数）。

但是我也有这个代码，它在我的文章模型文件中

```
def tag_name=(name)
    self.tag = Tag.find_or_create_by_name(name) if name.present?
end 
```

如果标签不存在，它允许用户创建标签。我遇到的问题是……标签现在标记为“Java x 1”，如果用户选择该标签，数据库现在包含“Java x 1”作为自己的标签，而不仅仅是“Java” .

是否有单独的方法来解析 json 数组或让 jquery 分别处理名称和计数？

抱歉，我对所有这些 json 和 jquery 还是很陌生。我正在关注一个railscasts。非常感谢您的帮助=）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T17:56:09.460

您的自动完成操作必须呈现类似

```
render json: @tags.map{ |tag| {:label => "#{tag.name} x #{tag.count}", :value => tag.name} } 
```

# java - 对多键数据结构的操作

> ID：10178681
> 
> 赞同：0
> 
> 时间：2012-04-16T17:21:35.783
> 
> 标签：java

![在此处输入图像描述](../Images/9f98511809028fec023327299d99947c.png)

我的要求是创建上述数据结构。

我希望对这个数据结构进行以下操作。

操作1：

```
public Set<Subscriber> retrievedSetofSubscribers(eventName, RegionID, RegionName); 
```

这意味着当我提供`EventName`, `RegionID`and `RegionName` （多个键）时，操作应该返回订阅者列表。

操作 2：

```
public void InsertIntoTable(eventName, regionID, String RegionName, Subscriber); 
```

是否有任何 Java 支持的 API 可用于上述操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T17:26:16.307

创建一个代表该表的一行的类。

然后整个表是一个 Map，其中“key”是 EventName，“value”是行类。

无需多键！

# .net - Reactive Extensions 基于特定数量的并行处理

> ID：10178683
> 
> 赞同：1
> 
> 时间：2012-04-16T17:21:42.913
> 
> 标签：.net, system.reactive, throttling, reactive-programming

我是响应式扩展的新手。我有对象集合并为每个对象调用一个方法，并且方法返回布尔值。不是通过使用 for each 循环并调用该方法来遍历每个循环，而是有一种方法可以在**响应式扩展**中同时调用（fork 和 join）给定数量的对象（例如，一次 5 个）并在第一个完成后调用该方法，第六个应该调用方法，它应该继续，直到所有对象都完成。

感谢您的回复。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T20:30:25.243

```
IObservable<bool> someBoolAsyncMethod(SomeObject o)

someCollection.ToObservable()
    .Select(x => Observable.Defer(() => 
        someBoolAsyncMethod(x).Select(y => new { Item = x, Result = y})))
    .Merge(5)
    .ToList()
    .Subscribe(newListOfBools); 
```

# c# - 将无效字符解析为 XML

> ID：10178686
> 
> 赞同：1
> 
> 时间：2012-04-16T17:21:55.913
> 
> 标签：c#, xml, xml-parsing, clr

应用程序的想法很简单，给应用程序一个路径，应用程序将每个文件的路径写入XML，我面临的问题是文件名可能包含无效字符，这使应用程序停止工作，这是我的代码用于将文件信息解析为 XML ：

```
 // the collecting details method
    private void Get_Properties(string path)
    {
        // Load the XML File
        XmlDocument xml = new XmlDocument();
        xml.Load("Details.xml");

        foreach (string eachfile in Files)
        {
            try
            {
                FileInfo Info = new FileInfo(eachfile);

                toolStripStatusLabel1.Text = "Adding : " + Info.Name;

                // Create the Root element
                XmlElement ROOT = xml.CreateElement("File");

                if (checkBox1.Checked)
                {
                    XmlElement FileName = xml.CreateElement("FileName");
                    FileName.InnerText = Info.Name;
                    ROOT.AppendChild(FileName);
                }

                if (checkBox2.Checked)
                {
                    XmlElement FilePath = xml.CreateElement("FilePath");
                    FilePath.InnerText = Info.FullName;
                    ROOT.AppendChild(FilePath);
                }

                if (checkBox3.Checked)
                {
                    XmlElement ModificationDate = xml.CreateElement("ModificationDate");
                    string lastModification = Info.LastAccessTime.ToString();
                    ModificationDate.InnerText = lastModification;
                    ROOT.AppendChild(ModificationDate);
                }

                if (checkBox4.Checked)
                {
                    XmlElement CreationDate = xml.CreateElement("CreationDate");
                    string Creation = Info.CreationTime.ToString();
                    CreationDate.InnerText = Creation;
                    ROOT.AppendChild(CreationDate);
                }

                if (checkBox5.Checked)
                {
                    XmlElement Size = xml.CreateElement("Size");
                    Size.InnerText = Info.Length.ToString() + " Bytes";
                    ROOT.AppendChild(Size);
                }

                xml.DocumentElement.InsertAfter(ROOT, xml.DocumentElement.LastChild);

                // +1 step in progressbar
                toolStripProgressBar1.PerformStep();
                success_counter++;
                Thread.Sleep(10);
            }
            catch (Exception ee)
            {
                toolStripProgressBar1.PerformStep();

                error_counter++;
            }
        }

        toolStripStatusLabel1.Text = "Now Writing the Details File";

        xml.Save("Details.xml");

        toolStripStatusLabel1.Text = success_counter + " Items has been added and "+ error_counter +" Items has Failed , Total Files Processed ("+Files.Count+")";

        Files.Clear();
    } 
```

以下是生成详细信息后 XML 的样子：

```
<?xml version="1.0" encoding="utf-8"?>
 <Files>
  <File>
    <FileName>binkw32.dll</FileName>
    <FilePath>D:\ALL DLLS\binkw32.dll</FilePath>
    <ModificationDate>3/31/2012 5:13:56 AM</ModificationDate>
    <CreationDate>3/31/2012 5:13:56 AM</CreationDate>
    <Size>286208 Bytes</Size>
  </File>
 <File> 
```

我想毫无问题地解析为 XML 的字符示例：

BX]GC^O^_nI_C{jv_rbp&1b_H âo&psolher d) doိiniᖭ</p>

icon_Áq偩侉₳㪏ံ�ぞ鵃_䑋屡犯1]

MANAFor줡�

编辑[问题已解决]

我所要做的就是：1-将文件名转换为 UTF8-Bytes 2-将 UTF8-Bytes 转换回字符串

这是方法：

```
byte[] FilestoBytes = System.Text.Encoding.UTF8.GetBytes(Info.Name);
string utf8 = System.Text.Encoding.UTF8.GetString(FilestoBytes); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T17:25:15.803

目前尚不清楚你的哪些角色有问题。只要您使用 XML API（而不是尝试自己直接写出 XML），您*应该*可以使用任何有效的文本（损坏的代理对可能会导致问题），但*无效*的是 Unicode 代码点少比空格 (U+0020)，除了制表符、回车和换行。它们根本不适合 XML。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T17:28:25.743

可能xml格式不正确。xml 文件不能有一些字符而不被转义。例如，这是无效的：

```
<dummy>You & Me</dummy> 
```

相反，您应该使用：

```
<dummy>You &amp; Me</dummy> 
```

XML 中的非法字符是 &、< 和 >（以及属性中的 " 或 '）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T17:33:52.013

XML 中的非法字符是 &、< 和 >（以及属性中的 " 或 '）

在 Windows 的文件系统中，文件名中只能有 & 和 '（文件名中不允许有 <、>、、）

在保存 XML 时，您可以转义这些字符。例如对于 & 你将需要`&amp;`

# android - Android 谷歌地图层 - 可绘制图标

> ID：10178695
> 
> 赞同：1
> 
> 时间：2012-04-16T17:22:30.577
> 
> 标签：android, google-maps, drawable

我正在寻找您在 Google 地图应用中看到的 Android“图层”图标的资源标识符。它用于选择图层，并且有 3 个相互重叠的偏移矩形。

![在此处输入图像描述](../Images/d9ddd0aa94ca67568a14861f09c01660.png)

我查看了 android.jar 并找不到它。我也看过这个网站，但似乎找不到。是否有更完整的内置图形库？

[http://androiddrawableexplorer.appspot.com/](http://androiddrawableexplorer.appspot.com/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T18:18:08.360

> 我正在寻找您在 Google 地图应用中看到的 Android“图层”图标的资源标识符。

Google 地图不是 Android SDK 的一部分，也不是 Android 开源项目的一部分。因此，该图标很可能不可用。

> 是否有更完整的内置图形库？

SDK 中的所有可绘制对象都在您的开发机器上的 SDK 安装中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-17T06:23:04.213

谁需要图层图标可以在下面使用

![地图可绘制图标](../Images/ebc3fe39dc7149a2218c58134ceba038.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-25T06:40:49.893

此图标包含在 Android Studio 中。如果有人需要它：

```
R.drawable.ic_baseline_layers_24 
```

[![在此处输入图像描述](../Images/2a37290d8f573bec8b02998ca27622b7.png)](https://i.stack.imgur.com/OrLQ0.png)

# c++ - C++ 从字符串中去除非 ASCII 字符

> ID：10178700
> 
> 赞同：8
> 
> 时间：2012-04-16T17:22:45.487
> 
> 标签：c++, string, ascii

在你开始之前；是的，我知道这是一个重复的问题，是的，我已经查看了发布的解决方案。我的问题是我无法让他们工作。

```
bool invalidChar (char c)
{ 
    return !isprint((unsigned)c); 
}
void stripUnicode(string & str)
{
    str.erase(remove_if(str.begin(),str.end(), invalidChar), str.end()); 
} 
```

我在“Prusæus, Ægyptians”上测试了这种方法，但它没有做任何我也试图替代`isprint`的方法`isalnum`

当我在程序的另一部分转换 string->wstring->string 时，就会出现真正的问题。如果 string->wstring 转换中有 unicode 字符，则转换会停止。

参考：

[如何从字符串中去除非 ASCII 字符？（在 C# 中）](https://stackoverflow.com/questions/123336/how-can-you-strip-non-ascii-characters-from-a-string-in-c)

[如何从 C++ 中的字符串中去除所有非字母数字字符？](https://stackoverflow.com/questions/6319872/how-to-strip-all-non-alphanumeric-characters-from-a-string-in-c)

**编辑：**

我仍然想删除所有非 ASCII 字符，不管它是否有帮助，这就是我崩溃的地方：

```
// Convert to wstring
wchar_t* UnicodeTextBuffer = new wchar_t[ANSIWord.length()+1];
wmemset(UnicodeTextBuffer, 0, ANSIWord.length()+1);
mbstowcs(UnicodeTextBuffer, ANSIWord.c_str(), ANSIWord.length());
wWord = UnicodeTextBuffer; //CRASH 
```

**错误对话框**

MSVC++ 调试库

调试断言失败！

程序：//我的项目

文件：f:\dd\vctools\crt_bld\self_x86\crt\src\isctype.c

行：//以上

表达式：(无符号)(c+1)<=256

**编辑：**

更复杂的是：我从中读取的 .txt 文件是 ANSI 编码的。里面的一切都*应该*是有效的。

**解决方案：**

```
bool invalidChar (char c) 
{  
    return !(c>=0 && c <128);   
} 
void stripUnicode(string & str) 
{ 
    str.erase(remove_if(str.begin(),str.end(), invalidChar), str.end());  
} 
```

如果其他人想复制/粘贴这个，我可以勾选这个问题。

**编辑：**

供将来参考：尝试使用[__isascii、iswascii](http://msdn.microsoft.com/en-us/library/5wcd48xw.aspx)命令

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-04T14:04:55.883

解决方案：

```
bool invalidChar (char c) 
{  
    return !(c>=0 && c <128);   
} 
void stripUnicode(string & str) 
{ 
    str.erase(remove_if(str.begin(),str.end(), invalidChar), str.end());  
} 
```

编辑：

供将来参考：尝试使用 __isascii、iswascii 命令

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T17:28:38.860

至少有一个问题存在于您的`invalidChar`职能中。它应该是：

```
return !isprint( static_cast<unsigned char>( c ) ); 
```

如果a为负数（isprint是未定义的行为`char`。`unsigned``char``UNIT_MAX+1 + c). Passing such a value to`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T18:31:55.837

`isprint`取决于语言环境，因此相关字符必须在当前语言环境中可打印。

如果您想要严格的 ASCII，请检查 [0..127] 的范围。如果您想要可打印的 ASCII，请检查范围和`isprint`.

# design-patterns - F# 中的无限主循环

> ID：10178706
> 
> 赞同：14
> 
> 时间：2012-04-16T17:23:05.920
> 
> 标签：design-patterns, f#, functional-programming

CLI 应用程序的一个常见模式是无限循环运行，直到用户键入一些退出命令。就像，在 C 语言中：

```
while(1){
scanf("%c", &op);
    ...
    else if(op == "q")
        break;
    } 
```

F# 中此类控制台应用程序的模式是什么（尝试使用尾递归，但失败）？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-16T17:27:28.740

在浏览器中输入，因此可能包含错误：

```
let rec main() = 
    let c = System.Console.ReadKey()
    if c.Key = System.ConsoleKey.Q then () // TODO: cleanup and exit
    else 
    // TODO: do something in main
    main() 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-16T18:07:34.660

这是一个响应单键按下的无阻塞版本。

```
open System

let rec main() = 
    // run code here

    // you may want to sleep to prevent 100% CPU usage
    // Threading.Thread.Sleep(1);

    if Console.KeyAvailable then
        match Console.ReadKey().Key with
        | ConsoleKey.Q -> ()
        | _ -> main()
    else
        main()

main() 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-16T18:05:02.507

这样的功能可能很有用：

```
let rec forever f = 
  f()
  forever f 
```

用法：

```
forever <| fun () ->
  //function body 
```

但是，您的代码的更直译是：

```
while true do
  //body 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-16T17:57:35.843

还

```
while true do
    (* ..code.. *) 
```

但我猜尾递归更花哨（它们都会在 下编译成相同的东西`--optimize`）。

# jquery - 如果 href 设置为块，则鼠标悬停不起作用

> ID：10178707
> 
> 赞同：0
> 
> 时间：2012-04-16T17:23:13.457
> 
> 标签：jquery, html

所以我有 3 张图片需要链接到其他页面，并通过悬停淡入。但是我注意到一旦图像在 CSS 中排列成一个块，jquery 影响就会被禁用。和解决方案？

CSS：

```
div {
display: none;
width: 600px;
margin: auto;
}

.row_1 img{
    width: 300px;
    height: 300px;
}

.row_2 img{
    width: 150px;
    height: 150px;
}

.row_1,
.row_2{
    display: inline-block;
}

.row_2 img{
    display: block;
}
.row_1 img{
    display: block;
} 
```

html代码：

```
<div>

<h2>Blog</h2>

<div class ="row">

<span class ="row_1">
<a href="#"><img src="image/under.png" /></a>
</span>

<span class ="row_2">
<a href='#'><img src="image/under.png" /></a>
<a href="#"><img src="image/under.png" /></a>
</span>

</div>

</div> 
```

jQuery：

```
$(document).ready(function(){
     $('a').fadeTo(1,0.5);

  $('a').hover(
      function () {
       $(this).fadeTo('slow',1);
      }, 
      function () {
         $(this).fadeTo('slow',0.5);
      }
    );      

});

$(document).ready(function(){
$('div').fadeIn('slow');
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T17:30:12.670

更改`display`to`block`不应该有所作为。

我在这里粘贴了你的代码，它似乎工作：

[http://jsfiddle.net/jtbowden/cG8c9/](http://jsfiddle.net/jtbowden/cG8c9/)

您的问题可能出在其他地方。你能在[jsfiddle](http://jsfiddle.net)复制它吗？

另外，我不知道您是否在为您的示例进行概括，但我会避免仅在 selector 上执行任何 jQuery `div`。给你的主包装一个 ID 并使用它。另外，`.stop()`在淡入淡出效果之前添加，否则如果鼠标移入/移出太快会出现循环行为：

```
$(document).ready(function() {
    $('a').fadeTo(1, 0.5);
    $('#wrapper').fadeIn('slow');

    $('a').hover(function() {
        $(this).stop().fadeTo('slow', 1);
    }, function() {
        $(this).stop().fadeTo('slow', 0.5);
    });
}); 
```

演示：http: [//jsfiddle.net/jtbowden/cG8c9/1/](http://jsfiddle.net/jtbowden/cG8c9/1/)

**编辑：**我在 IE 中进行了测试，发现淡入淡出在链接上根本不起作用。在这种情况下，您需要对图像进行淡入淡出：

```
$(document).ready(function() {
    $('img').fadeTo(1, 0.5);
    $('#wrapper').fadeIn('slow');

    $('a').hover(function() {
        $('img', this).stop().fadeTo('slow', 1);
    }, function() {
        $('img', this).stop().fadeTo('slow', 0.5);
    });

}); 
```

演示：http: [//jsfiddle.net/cG8c9/2/](http://jsfiddle.net/cG8c9/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T17:33:36.277

您可能希望同时更改悬停时的淡入顺序，并以图像而不是锚元素为目标。进行此更改：

```
$('a').hover(
    function() {
        $('img',this).fadeTo('slow', 0.5);
    }, 
    function() {
        $('img',this).fadeTo('slow', 1);
}); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/k5uUV/)**。

# oracle - 哪个 ORM 支持 upsert 语句？

> ID：10178708
> 
> 赞同：1
> 
> 时间：2012-04-16T17:23:19.493
> 
> 标签：oracle, hibernate, orm, upsert

例如，在 Hibernate 中，有 saveOrUpdate 方法，它首先进行选择，并根据是否有可用的记录，然后插入或更新。但是，Oracle DB 支持“upsert”，您可以在其中一个语句中执行插入或更新。

我知道 Hibernate 不支持这个开箱即用，还有其他支持它的 ORM 吗？另外，有没有人设法覆盖 Hibernate 来支持 upserts？

非常感谢

# android - 拖动/移动手指时获取所有 X 和 Y 坐标

> ID：10178714
> 
> 赞同：0
> 
> 时间：2012-04-16T17:24:12.767
> 
> 标签：android

当我触摸一次 ( `MotionEvent.Action_Down`) 时，它会给出准确的所有 X 和 Y 坐标，但是当我触摸并移动手指 ( `MotionEvent.Action_Move`) 时，它会给出一些触摸坐标。

例如

我在 10 到 150 的 y 轴上拖动手指，这是准确的 我在这个轴上移动手指，但它给了我

> 10 13 15 19 20 25 26 28 29 31

我`event.getY()`在我的 Logcat 中得到了所有这些，看看差异。1st 10 然后 13 但我也将手指移到 11,12 并且它没有给出我所有代码都在 ontouchevent 中的坐标

有谁能够帮助我 ？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T17:49:57.923

我认为这只是您必须忍受的东西，也许您可​​以生成一条贯穿您大部分观点的最佳拟合线并使用它？

触摸屏控制器不是无限快的，它不能捕捉你手指滑过的每一个像素，它只需要不时地对屏幕进行采样。

你能说一下你需要用这些数据做什么吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T18:18:12.320

要查明某人的手指是否与您的线条相交，您可以测试每一对相邻的触摸坐标，并针对您的线条进行测试。

以下页面包含一些 Java 代码，可用于测试两条线的交集： [http ://www.ahristov.com/tutorial/geometry-games/intersection-lines.html](http://www.ahristov.com/tutorial/geometry-games/intersection-lines.html)

假设您使用该页面中的方法，并假设您有一个称为点的接触点数组，您可以使用如下代码测试交叉点：

```
boolean doesIntersect = intersection(points[i-1].x, points[i-1].y, points[i].x, points[i].y, yourlinestart.x, yourlinestart.y, yourlineend.x, yourlineend.y); 
```

# asp.net - 如何防止在我的数据中插入相同的数据

> ID：10178723
> 
> 赞同：0
> 
> 时间：2012-04-16T17:25:04.850
> 
> 标签：asp.net, asp.net-mvc-3, linq, entity-framework

我正在将 MVC3 与实体框架数据库一起使用

我只有一张表格，上面有星期几、你想训练的肌肉以及你想为那块肌肉做的组数。

所以基本上我正在制定一个时间表。我从创建时间表开始。当我创建一个时间表时，我想确保我的表中只有一周中的一天。（所以星期一会有一次）

创建部分有效，但检查它是否已经存在，然后给出 ok 符号以用记录填充数据库是我的问题。我很确定这需要在我的控制器中完成。

从视图中获取帖子，并检查它是否已经存在于我的数据库中。有人可以举个例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T18:04:48.717

在 MVC 中进行此操作的最佳方法是在模型上使用自定义数据注释。这是一个示例： [http ://byatool.com/mvc/custom-data-annotations-with-mvc-how-to-check-multiple-properties-at-one-time/](http://byatool.com/mvc/custom-data-annotations-with-mvc-how-to-check-multiple-properties-at-one-time/)

您的自定义注释应检查数据库以查看是否存在具有相同值的数据库。你可以用它做更多的事情。

您需要将它与 ModelState.IsValid 一起使用 -[在 NerdDinner 的 ASP.NET MVC 中，ModelState.IsValid 对什么有效？](https://stackoverflow.com/questions/881281/what-is-modelstate-isvalid-valid-for-in-asp-net-mvc-in-nerddinner)

# winforms - 无法使用 DevExpress WinForms XtraTab 更改 TabPage 的背景色

> ID：10178729
> 
> 赞同：3
> 
> 时间：2012-04-16T17:25:21.667
> 
> 标签：winforms, devexpress

我正在使用 DevExpress WinForms XtraTab 控件 v11.2，但无法更改标签页背景颜色。它卡在透明上。我在 XtraTab 的 AppearancePage.PageClient 上设置了颜色，但没有任何效果。

如果你抛出一个默认的 XtraTabControl，你会得到两个在主区域都是白色的选项卡。我希望这个区域是灰色的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T19:09:36.787

除了您正在执行的操作之外，将 XtraTabControl 设置`PaintStyleName`为 Standard 或 PropertyView 或其他非默认样式之一以获得您想要的外观：

这是一个在 XtraTabControl 中拖动并仅更改`PaintStyleName`属性的示例：

![在此处输入图像描述](../Images/5b869812b5cd66e6252615ecd9f77952.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T19:27:04.917

如果控件的外观设置为皮肤，那么据​​我所知，您无法更改背景颜色。

为了真正做到这一点，你有两个选择：

1) 使用 devexpress SkinEditor 实用程序创建具有所需颜色的皮肤。

2）将默认外观和感觉设置为false，将样式设置为平面，然后您将能够选择您想要的颜色（请记住，因为您将禁用皮肤看起来不太好所以第一个选项可能是更好的）。

```
this.xtraTabControl1.LookAndFeel.Style = DevExpress.LookAndFeel.LookAndFeelStyle.Flat;
            this.xtraTabControl1.LookAndFeel.UseDefaultLookAndFeel = false;
            this.xtraTabControl1.TabPages[0].BackColor = System.Drawing.Color.Gray; 
```

# mercurial - Mercurial 合并 - 自动合并某些冲突模式

> ID：10178733
> 
> 赞同：2
> 
> 时间：2012-04-16T17:25:28.877
> 
> 标签：mercurial, merge, pom.xml

我们将 Maven pom.xml 文件从一个存储库合并到另一个存储库。

pom.xml 文件以这种形式列出了一个版本：

```
<version>5.0.17-SNAPSHOT</version> 
```

如果我们在这条线上有冲突，我们总是希望使用本地文件的冲突版本。有没有办法自动获取更改的本地文件版本？

对于任何其他冲突，我们希望继续使用标准的手动合并过程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T17:56:29.150

当然。查看[Merge Tool Configuration](https://www.mercurial-scm.org/wiki/MergeToolConfiguration) wiki 页面，您会发现应该这样做：

```
 [merge-patterns]
 pom.xml = internal:local 
```

# c++ - 所有最接近的较小值

> ID：10178734
> 
> 赞同：0
> 
> 时间：2012-04-16T17:25:29.220
> 
> 标签：c++, stack

我想构建我的代码来解决所有最近的较小值问题，这是我的努力

```
#include<iostream>
#include<stack>
using namespace std;
void all_smallest(int a[],int n)
{
    stack<int>s;
    for(int x=0;x<n;x++)
    {
        while(!s.empty() && s.top()>=a[x])
        {
            cout<<s.top();
            s.pop();
        }
        if(s.empty()){ continue;}
        else
        {
            s.push(a[x]);
        }

    }
}

int main()
{
    int a[]={0, 8, 4, 12, 2, 10, 6, 14, 1, 9, 5, 13, 3, 11, 7, 15};
    int n=sizeof(a)/sizeof(a[0]);
    all_smallest(a,n);

    return 0;
} 
```

它编译，但没有输出，为什么？请帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T17:41:55.900

检查[维基百科](http://en.wikipedia.org/wiki/All_nearest_smaller_values)你没有正确实现算法。应该是这样的：

```
 #include<iostream>
    #include<stack>
    using namespace std;
    void all_smallest(int a[],int n)
    {
        stack<int>s;
        for(int x=0;x<n;x++)
        {
            while(!s.empty() && s.top()>=a[x])
            {
                s.pop();
            }
            if(!s.empty())
            {
                cout<<s.top();
            }
            s.push(a[x]);
        }
    }

    int main()
    {
        int a[]={0, 8, 4, 12, 2, 10, 6, 14, 1, 9, 5, 13, 3, 11, 7, 15};
        int n=sizeof(a)/sizeof(a[0]);
        all_smallest(a,n);
        cout << "\n";
        return 0;
    } 
```

输出：

```
 004022601151337 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T17:29:33.383

由于 s 一开始是空的，所以`else`子句永远不会发生（所以 s 保持为空）。

# python - Django：选择模型并按子模型排序创建详细信息

> ID：10178736
> 
> 赞同：0
> 
> 时间：2012-04-16T17:25:31.787
> 
> 标签：python, django

我有以下型号：

```
class Item(models.Model):
    closed = models.DateTimeField(blank=True, null=True)
    closed_by = models.ForeignKey(User, blank=True, null=True)

class Letter(models.Model):
    item = models.ForeignKey(Item)
    created = models.DateTimeField(default=datetime.now)
    letter_name = models.CharField(max_length=40)
    file_name = models.CharField(max_length=40, blank=True, null=True)
    deleted = models.DateTimeField(blank=True, null=True)
    deleted_by = models.ForeignKey(User, blank=True, null=True)

    def lastVersion(self):
    return self.letterversion_set.order_by('created').latest().created

class LetterVersion(models.Model):
    letter = models.ForeignKey(Letter)
    created = models.DateTimeField(default=datetime.now)
    created_by = models.ForeignKey(User)
    text = models.TextField()

    def letterItem(self):
    return self.letter.item 
```

`Letter`编辑 a时`Letter Version`会创建一个新的。我正在尝试选择`Letter`最近使用`LetterVersion.create`. 我有以下内容`views.py`：

```
lettersAll = Letter.objects.filter(item=i_iID,deleted__isnull=True).order_by('-letterversion__created')[:3] 
```

`LetterVersion`不幸的是，即使它们来自同一个，这也会让我在最后 3秒都知道他们创建的日期/时间`Letter`。

```
letter 1 version 3 [1]
letter 3 version 4 [2]
letter 1 version 2 [3]
letter 1 version 1
letter 2 version 2
letter 2 version 1
letter 3 version 3
letter 3 version 2
letter 3 version 1 
```

我想要的地方：

```
letter 1 version 3 [1]
letter 3 version 4 [2]
letter 2 version 2 [3] 
```

无论如何我可以获得最后3个字母的列表编辑吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T17:30:01.157

您可以`annotate()`使用`Max()`of `letterversion__created`，然后`order_by()`使用它们。

```
from django.db.models import Max

lettersAll = Letter.objects.filter(
        item=i_iID,
        deleted__isnull=True
    ).annotate(
        last_created_version=Max('letterversion_created')
    ).order_by('-last_created_version')[:3] 
```

# c# - C# 应用程序的安装程序

> ID：10178737
> 
> 赞同：6
> 
> 时间：2012-04-16T17:25:31.817
> 
> 标签：c#, .net, installation

我正在开发一个开源 C# 应用程序。一段时间以来，我一直在使用自己编写的基本 .NET 安装程序。但是，随着最近的更改，这对我来说不再实用，因为我必须向安装程序添加大量文件 - 而且它们可能会随着每个版本而改变。ZIP 文件也不实用。

我在网上做了一些检查，我看到了很多 MSI、ClickOnce、自解压 ZIP 和（imo 最有前途的）NSIS 系统。它们似乎都不完全符合我的需求，所以我正在寻找关于使用哪个系统的建议。

我的程序的实际安装非常简单。基本上，我只需要将 bin\Release 目录（和所有子目录）复制到客户端的计算机上。通过将每个文件嵌入到我的 .NET 安装程序中，并维护一个文件表，我一直在实现这一点。

不幸的是，我刚刚本地化了我的应用程序。我现在有 30 多个 .resx 文件（它们被编译为 dll 并由 Visual Studio 放置到 MORE 子目录中），显然，将 30 多个文件夹和 DLL 添加到我的安装程序是不切实际的。因此，我为什么在这个搜索中。

还有一些其他要求：

*   安装程序应在预定义目录中搜索指定的 .exe。（我的应用程序被设计为替代品）如果找不到 .exe，它应该提示它的位置
*   安装程序应验证“OldApp.exe.bak”是否存在。如果不是，它应该将“OldApp.exe”重命名为“OldApp.exe.bak”
*   安装程序应该更新文件。即，如果“Culture.de.dll”没有改变，安装程序将不理会它。
*   安装程序应该适用于所有 .NET IDE（VS、SharpDevelop、Mono 等）的所有 Windows 版本，但不需要在其他平台上运行。
*   当我构建解决方案时，安装程​​序应该会自动重新生成。换句话说，它应该可以通过“构建后”部分运行。
*   安装程序生成必须能够添加到源代码存储库中。这样任何下载我的应用程序源代码的人都可以编译安装程序。

抱歉，帖子太长了，我认为多发比少发更好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T17:32:37.817

我推荐[SharpSetup](http://sharpsetup.eu/)。它结合了 WiX 和 C# 以实现非常灵活的实现。没有多少我发现它无法完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T22:37:29.470

我会推荐 NSIS。根据我的经验，我需要的任何安装程序功能都已包含在 NSIS 文档或社区示例中。我无法评论 NSIS 与 Visual Studio 的集成，因为我使用与我的 Jenkins 构建服务器集成的 NSIS。似乎有一个名为[Visual & Installer](http://visualstudiogallery.msdn.microsoft.com/5e57fe9a-ae5d-4740-a1c3-7a8e278e105b)的免费 Visual Studio 加载项，它提供 NSIS 与 Visual Studio 的集成。我没有亲自使用过它，但它似乎目前正在积极开发中，因此可能值得一试。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-16T17:30:47.827

我们广泛使用 WIX： [http ://wix.codeplex.com/](http://wix.codeplex.com/)

您可能必须使用一些退出例程来自定义安装程序以执行不同寻常的操作，但 Windows Installer 框架中的挂钩可让您执行此操作。

您可以将这些定义文件 (XML) 放在源代码管理中，并且可以配置构建以执行安装。但是，任何获得您的源代码的人都需要安装 WIX 实用程序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T17:31:28.903

[WIX](http://wix.codeplex.com/)是一个不错的选择。根据[维基百科](http://en.wikipedia.org/wiki/WiX)，微软使用它来为他们自己的一些产品制作安装程序。

# drupal - 如何调用 drupal 服务模块以按自定义 cck 字段进行过滤？

> ID：10178743
> 
> 赞同：1
> 
> 时间：2012-04-16T17:25:54.967
> 
> 标签：drupal, drupal-services

我创建了名为“业务类型”的分类法，其术语如下

餐厅 非美食 酒厂 饮料 公司

我创建了一个名为“公司”的 CCK，其中一个字段 term_reference 类型记录在分类法之上

我想访问诸如“酒厂”之类的分类术语的公司列表

http://tasteofoc.myappdemo.com/api/node?parameters[type]=Company

这使所有公司都很好。

但我需要过滤以仅获取特定的业务类型。

http://tasteofoc.myappdemo.com/api/node?parameters[type]=Company¶meters[field_cat]=Beverage

我收到上述调用的错误。

您能否帮助了解如何使自定义 CCK 字段的调用正确？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T00:01:32.857

这将对您有所帮助。[http://drupal.org/node/1354202](http://drupal.org/node/1354202)

# linux - linux eth0 不能与网桥一起使用

> ID：10178744
> 
> 赞同：4
> 
> 时间：2012-04-16T17:25:56.297
> 
> 标签：linux, qemu, kvm

朋友们，我正在尝试使用 linux bridge 实用程序将我的 qemu 访客桥接到真实网络。
为此，我使用了非常简单的方法：

1.  使用 (sudo brctl addbr br0) 在主机上创建网桥
2.  将 eth0 添加到此网桥 (sudo brctl addif br0 eth0)
3.  更改 /etc/qemu-ifup 脚本 (brctl addif br0 $1)
4.  更改 /etc/qemu-ifdown 脚本 (brctl delif br0 $1)

通过以上 4 个步骤，我让我的客人的网络正常工作。但现在的问题是，在我将 eth0 连接到桥接 br0 后，我的主机网络无法正常工作。

我确认在第 1 步和第 2 步之后，我的主机网络停止工作。但是访客网络继续工作，这让我感到困惑。

有人可以指出这两行有什么问题吗？

1.  使用 (sudo brctl addbr br0) 在主机上创建网桥
2.  将 eth0 添加到此网桥 (sudo brctl addif br0 eth0)

PS：我几乎尝试了网上给出的所有方法，但没有任何方法成功。除了我的问题与 linux 网络有关，特别是与 qemu 无关

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-16T18:27:06.797

我意识到我的愚蠢。但由于这个问题同时仍然很有趣和有用，我不会关闭它。

这是问题所在。我应该在桥上而不是 eth0 上有 IP 堆栈。
因为 eth0 上的 ip 堆栈破坏了网桥结构。我只是在我的解决方案中添加了几个步骤，它就像一个魅力。比网络上的大多数解决方案都要好。

脚步 ：

1.  使用 (sudo brctl addbr br0) 在主机上创建网桥
2.  在 eth0 上释放 ip addr（重新打开和关闭链接）
3.  将 eth0 添加到此网桥 (sudo brctl addif br0 eth0)
4.  在网桥上启动 ip 堆栈 (sudo dhclient br0)
5.  更改 /etc/qemu-ifup 脚本 (brctl addif br0 $1)
6.  更改 /etc/qemu-ifdown 脚本 (brctl delif br0 $1)

我使用的 qemu 命令是：
sudo qemu-system-i386 -enable-kvm -net tap,vlan=0,ifname=tap0 -net nic,vlan=0 -hda ~/Data/OS_DiskImages/ubuntu11.10/disk.qcow2

此处给出脚本的详细步骤： [链接](http://www.cse.iitd.ernet.in/~prathmesh/random.html#Connecting_qemu_guest_to_real_network)

# c - 带有 libsoup 的 HTTP POST

> ID：10178750
> 
> 赞同：1
> 
> 时间：2012-04-16T17:26:30.973
> 
> 标签：c, post, curl

我想使用 libsoup 执行一个简单的 POST 请求。我想向其发送数据的网站的 API 只需要一个名为“内容”的字段。使用 curl 我这样做：

```
curl -si -F 'content=mycontent' http://mywebsite.org/api 
```

我怎样才能对 libsoup 做同样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T18:20:54.820

谷歌可能比我更适合你。这是 libsoup 客户端基础知识的链接。[http://developer.gnome.org/libsoup/stable/libsoup-client-howto.html](http://developer.gnome.org/libsoup/stable/libsoup-client-howto.html)

从那里你应该尝试类似的东西

```
guint status;
SoupMessage *msg;
const char * mycontent; //alloc and fill this with your data
msg = soup_message_new ("POST", "http://example.com/form.cgi");
soup_message_set_request (msg, "whatever content type here",
          SOUP_MEMORY_COPY, mycontent, strlen (mycontent));
status = soup_session_send_message (session, msg);
//error handling etc 
```

# c# - 获取指向相同类型项目的列表项 c#

> ID：10178751
> 
> 赞同：-1
> 
> 时间：2012-04-16T17:26:37.627
> 
> 标签：c#, list, pointers

有什么办法可以做这样的事情

```
List<Myclass> classlist = new List<Myclass>(); 
```

`Myclass * item = &classlist.ElementAt(0);`

当我更改项目中的值时，列表项中的值也会更改吗？

例如：item.name = "changedme"; 当我访问 classlist.ElementAt(0).name 时，值为“changedme”？？？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T17:29:23.290

假设这`Class`真的是一个类而不是一个结构，你所要做的就是：

```
var classList = new List<Class>();
var instance = classList[0];
instance.name = "changedme"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T17:29:49.790

如果列表中的对象是引用类型，它将完全按照您指定的方式工作。

# android - phonegap开发环境

> ID：10178752
> 
> 赞同：0
> 
> 时间：2012-04-16T17:26:38.240
> 
> 标签：android, ios, visual-studio-2010, jquery-mobile, cordova

我正在尝试设置使用 phonegap 进行移动开发，这样我就可以在 android 商店和苹果商店中部署我的应用程序。我的理解是，我可以简单地将我的应用程序包装在 phonegap 中，这样我就可以为 Android、iOs、BB 等进行部署。

我的应用程序是一个用 VisualStudio 编写的 ASP.Net MVC 应用程序。我在研究中阅读的所有示例都告诉您将 Eclipse 用于 PhoneGap 和 Android，将 XCode 用于 PhoneGap 和 iO。我的应用程序是生成 Html 5 的 ASP.Net MVC。是否可以将 PhoneGap 与 VisualStudio 一起使用来生成 Android 和 iOS 可部署的 phonegap 应用程序？

我一直在考虑的一种替代方法是创建一个简单的 Index.html 页面，该页面使用 jQuery 调用我的 ASP.Net MVC 应用程序并将生成的 HTML 加载到 div 中。然后我可以简单地在 Eclispe、XCOde 等中复制这个非常轻量级的 Index 页面来运行 Phonegap。不过，这似乎是一个 hack。我试过让它工作，但在我的 Windows 环境中的 Android 模拟器中没有任何运气。

有人可以为我指出如何将 PhoneGap 与我的 ASP.Net MVC 应用程序结合起来的正确方向吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T17:39:12.817

ASP.NET 存在于您的服务器上，因此无论何时您引用任何 ASP.NET 脚本，您都必须使 URL 成为具有主机名的绝对 URL `http://www.example.com/my-script.aspx`：. 任何非动态文件都应本地存储在设备上，以便在没有网络连接时可以正常工作。然后，您可以在服务器上托管动态文件，并在需要时引用它们。为了使数据传输的大小尽可能小，我通常会传递 JSON 或类似于应用程序的东西。从我的服务器端脚本，然后在应用程序的 JavaScript 代码中将数据解释为 HTML。

您应该在设备上保留尽可能多的本地资产，这样就不需要互联网连接即可使用该应用程序。所以不要链接到远程版本的 jQuery，将它保存为应用程序的一部分。您创建的包，因此它始终可用。

Eclipse/Xcode 很好，因为它们可以帮助您创建应用程序。并将其正确打包以提交到应用程序。商店。它们也很不错，因为使用 Eclipse 或 Xcode 创建应用程序很容易找到帮助。Xcode 实际上是必需的，Apple 确保您购买了最新的硬件和最新的软件，以便能够提交应用程序。到商店。

# eclipse-cdt - Eclipse CDT 构建错误：不在路径中

> ID：10178755
> 
> 赞同：2
> 
> 时间：2012-04-16T17:26:46.240
> 
> 标签：eclipse-cdt

我最近（实际上是今天）开始在 Windows 上使用 Eclipse CDT。创建了一个项目，将一个测试 C 文件（Hello World）添加到项目中。构建项目，我收到如下错误。

```
Error: Program make is not found in Path - 
```

然后我读到 Eclipse CDT 需要 Mingw/MSYS，我确实安装了它。现在我看到里面有make.exe

```
C:\MinGW\msys\1.0\bin 
```

但由于我没有管理员权限，我无法将此包含 make 的文件夹添加到 Windows 上的 Path 系统变量中。（我不太可能获得管理员权限）

现在如何解决此错误以在 Windows 上构建和使用 CDT？Eclipse CDT 的任何项目设置，如果添加路径可以帮助解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T10:20:16.703

能够解决此问题。

将两个 exe 的正确路径 - make 和 gcc/g++（由 Mingw/Ansys 安装）添加到**用户环境变量 Path**（不允许编辑**系统变量 Path**）。

但是将这些路径添加到**用户环境变量 Path**也有助于解决这个问题。现在 Eclipse CDT 可以很好地构建和执行代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-29T10:51:56.403

1.  检查环境变量路径有 c:/cygwin/bin 或 c:/mingw/bin 或你安装它的任何地方
2.  如果 makefile 名称是 mingw32-make.exe 或其他名称，请复制并将其重命名为 make.exe

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-29T13:50:34.520

Also after adding `C:\MinGW\bin` to PATH variable. Make sure your new project is created with `MinGW GCC` toolchain as shown below. [![enter image description here](../Images/1d785dbbb0cd6804c7afc2f33bd595f0.png)](https://i.stack.imgur.com/AsChO.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-09T19:44:40.990

问题很简单，你的 IDE 需要知道 GNU Binary Utilities 的位置在哪里，那么如何处理这个简单的问题

Windows -> 首选项 -> C/C++ -> 新 c++ 项目 wizerd -> makefile

[![第一的](../Images/ee50e5931c04ffa3a468e7cdc7629f72.png)](https://i.stack.imgur.com/vW3ae.jpg)

然后选择你安装的是什么，例如我使用 MinGW，所以现在我将选择 GUN elf 解析，现在我需要 c++ filt 的位置：D [![在此处输入图像描述](../Images/f49e14fae439b8c1822ef71220dd9053.png)](https://i.stack.imgur.com/8t4Mh.jpg) 你将去你安装 minGW 的位置，默认情况下它将是 C:\MinGW [![第二](../Images/6d2402b63c813fe7d6f0b788846f8d13.png)](https://i.stack.imgur.com/aG9sB.jpg)

并搜索 c++ filt.exe :D 现在你完成了:D

[你可以从http://www.mingw.org/](http://www.mingw.org/)安装 minGW

# ios - MPMoviePlayerController 导致泄漏

> ID：10178757
> 
> 赞同：0
> 
> 时间：2012-04-16T17:27:03.157
> 
> 标签：ios, mpmovieplayercontroller, automatic-ref-counting

我正在开发一个非常重的仅 iPad 的 iOS 应用程序，该应用程序使用 ARC，但是当我尝试使用 MPMoviePlayerController 时似乎出现了泄漏，仪器在为视频播放器对象分配内存的代码行上引发了内存泄漏，任何想法? 当视频完成播放时，视频播放器的清理似乎也没有发生。

任何帮助将不胜感激，到处寻找答案，因为您可以说这个问题在很大程度上是应用程序性质的阻碍。

编码：

```
@interface ViewController ()
@property(nonatomic,strong) MPMoviePlayerController * vidPlayer;
@end

@implementation ViewController
@synthesize vidPlayer;

- (void)viewDidLoad
    {
        @autoreleasepool {

        [super viewDidLoad];
        // Do any additional setup after loading the view, typically from a nib.
        [self playVideoForFile:@"01_intro"];
        }
    }

    -(void)playVideoForFile:(NSString*)p_fileName
    {    
            NSString *path = [[NSBundle mainBundle] pathForResource:p_fileName ofType:@"mp4"];
            NSURL *tempURI = [NSURL fileURLWithPath:path];
            vidPlayer = [[MPMoviePlayerController alloc] initWithContentURL:tempURI];

        [vidPlayer setControlStyle:MPMovieControlStyleNone];
        [vidPlayer setAllowsAirPlay:NO];

        [vidPlayer.view setFrame:CGRectMake(0, 0, [[UIScreen mainScreen] bounds].size.height,[[UIScreen mainScreen] bounds].size.width)];

        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(vidFinishedCallback:) name:MPMoviePlayerPlaybackDidFinishNotification object:vidPlayer];

        [vidPlayer play];

        [self.view addSubview:vidPlayer.view];

}

-(void)vidFinishedCallback:(NSNotification*)aNotification
{       
            [vidPlayer pause];
            vidPlayer.initialPlaybackTime = -1;
            [vidPlayer stop];
            vidPlayer.initialPlaybackTime = -1;
            [vidPlayer.view removeFromSuperview];
            vidPlayer = nil;

        [[NSNotificationCenter defaultCenter] removeObserver:self name:MPMoviePlayerPlaybackDidFinishNotification object:vidPlayer];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T03:28:17.680

我试过了

```
MPMoviePlayerController *movieController = [notification object];
[[NSNotificationCenter defaultCenter] removeObserver:self 
    name:MPMoviePlayerPlaybackDidFinishNotification 
    object:movieController];  
movieController = nil; 
```

这似乎有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-30T20:28:27.363

我遇到了这个问题，它让我发灰！每次实例化一个新视频时，它都不会发布（使用 ARC），并且随着更多的 viewController 实例被创建，它最终导致了一个笨拙的崩溃。我也检查了所有 MPMoviePlayer 调用，确保它已停止并设置为零。

问题不在于 MPMoviePlayerController 的分配和释放，而在于用于传递视图控制器详细信息的委托。在子视图控制器中，我有一个委托来检查从 tableViewController 传递的模型数据：

```
@property (strong, nonatomic) id<MyViewControllerDelegate> delegate; 
```

作为强指针的赋值导致了巨大的内存泄漏。通过将其指定为“弱”，它解决了问题。

```
@property (weak, nonatomic) id<MyViewControllerDelegate> delegate; 
```

作为一般规则，对于视图控制器委托，将它们分配为弱属性指针。

祝你好运。希望这可以清除泄漏！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T18:01:13.237

这是一种预感，但请尝试在 vidPlayer 被销毁**之前**调用 removeObserver 。文档指定您应该“确保在 notificationObserver 或 addObserver:selector:name:object: 中指定的任何对象被释放之前调用 removeObserver: 或 removeObserver:name:object:。” -- [NSNotification 中心](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/nsnotificationcenter_Class/Reference/Reference.html#//apple_ref/occ/instm/NSNotificationCenter/addObserver%3aselector%3aname%3aobject%3a)

此外，您可以尝试删除 viewDidLoad 中的显式自动释放池。如果每个视图只有一个 vidPlayer，则没有必要，并且最近发现了 ARC 和 autoreleasepools 的一些问题。看到[这个错误修正](http://lists.cs.uiuc.edu/pipermail/llvm-commits/Week-of-Mon-20120409/140819.html)

# c# - NullReferenceException 未处理 #2

> ID：10178759
> 
> 赞同：0
> 
> 时间：2012-04-16T17:27:10.097
> 
> 标签：c#, nullreferenceexception, unhandled

我正在关注这个视频：[http](http://www.youtube.com/watch?v=Y63vq_tcTGk) ://www.youtube.com/watch?v= Y63vq_tcTGk 并在 8:20 他输入

```
 ds.Add(a);
    show_diem(); 
```

但是，当我执行 ds.Add(a); 时出现错误；

我是新手，所以我仍然不确定 ds 是什么？可以是什么吗？他宣称

```
 ds = new ArrayList(); 
```

一开始那会是什么吗？为什么会弹出错误？这是我的 Form1 上的代码。“Employee”是一个类，“employeeId”“firstName”等是文本框。我使用“em”而不是“ds”。

```
 using System;
    using System.Collections.Generic;
    using System.ComponentModel;
    using System.Data;
    using System.Drawing;
    using System.Linq;
    using System.Text;
    using System.Windows.Forms;
    using System.Collections;

    namespace Employee_Program
    {
        public partial class Form1 : Form
        {

    public Form1()
    {
        InitializeComponent();

    }

    public ArrayList em;

    private void Form1_Load(object sender, EventArgs e)
    {
        em = new ArrayList();
    }

    private void show_employee()
    {
        listView1.Items.Clear();
        foreach(Employee a in em)
        {
            int i = listView1.Items.Count;
            listView1.Items.Add(a.FirstName);
            listView1.Items[i].SubItems.Add(a.LastName);
            listView1.Items[i].SubItems.Add(a.EmployeeId.ToString());
            listView1.Items[i].SubItems.Add(a.YearSalary.ToString());

}
    }

    private void button1_Click(object sender, EventArgs e)
    {
        Employee a = new Employee();
        a.FirstName = firstName.Text;
        a.LastName = lastName.Text;
        a.EmployeeId = float.Parse(employeeId.Text);
        a.YearSalary = float.Parse(yearSalary.Text);
        em.Add(a);
        show_employee();

            }
        }
    } 
```

错误说：对象引用未设置为对象的实例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T17:34:01.030

在我看来，您正在编写代码来模仿视频，但是设计师可能已经习惯于连接`Form1_Load`。因此，您需要确保这已连接到您的表单。如果不是，则`ArrayList`永远不会调用 的初始化。

如果你进入设计器，你可以点击表格。然后在“属性”窗口中，选择“事件”选项卡。找到`OnLoad`（或者`Load`我不确定命名）事件。然后在下拉列表中，您的方法应显示为参数定义将匹配。选择这个，设计师将把它连接起来。

接线应该看起来像

```
form.Load += Form1_Load; 
```

或者，您可以通过在声明中执行以下操作从 FormLoad 中删除它来完成相同的操作：

```
public ArrayList em = new ArrayList(); 
```

最后，您可以在 Form 构造函数中执行此操作\

```
public Form1()
{
    em = new ArrayList();
    InitializeComponent();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T17:39:05.633

当它为空时，您将尝试使用 em。解决它的一种方法是：

```
public Form1() 
{ 
    em = new ArrayList();  
    InitializeComponent(); 
} 
```

但是，您可能会遇到另一个问题，即 Form1_Load 事件未连接。

# javascript - jQuery 设置 input.value = input.title （或其他输入属性）

> ID：10178760
> 
> 赞同：0
> 
> 时间：2012-04-16T17:27:14.123
> 
> 标签：javascript, jquery, forms, this

我试图弄清楚如何将`input`文本字段的值设置为`title`页面加载时的值，作为显示占位符文本的一种方式。我正在使用 HTML4 Strict 文档类型。我不想将占位符文本存储在输入值中，因为我不希望没有 javascript 的人在输入之前必须删除文本。我希望用 javascript 添加它，然后在输入获得焦点时将其删除。我有`focus()`and`blur()`方法工作，但我不知道如何编写初始页面加载函数以将输入的标题传递给`val()`函数。

我目前有这个代码：

```
// This doesn't work, it grabs the page title:
$('#item-search').val(this.title);

// Works:
$('#item-search').focus(function() {
    if (this.value == this.title) {
        this.value = '';
    } 
});

// Works: 
$('#item-search').blur(function() {
    if (this.value == '') {
        this.value = this.title;
    } 
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T17:33:50.130

只是为了添加另一个变体，`.val()`可以[接受一个函数作为它的参数](http://api.jquery.com/val/#val-functionindex-%20value)，解决你的`this`问题：

```
$('#item-search').val(function () {
    return this.title;
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T17:29:43.217

`this`指当前范围。在您的第一个示例中，它指的是`document`.

你可能想要。

```
$('#item-search').val($('#item-search').attr('title')); 
```

更好的是：

```
var $itemSearch = $('#item-search');
$itemSearch.val($itemSearch.attr('title')); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-16T17:30:37.260

```
$('#item-search').val(this.title); 
```

在这一行`this`中，参考 document( `html`) 并设置`<title>`. 要完成您的工作，请执行以下操作：

```
$('#item-search').val($('#item-search').attr('title')); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T17:30:04.073

试试这个：

```
$('#item-search').val($('#item-search').attr('title')); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-16T17:33:10.240

请试试这个。

```
$('#item-search').val($("#item-search").attr("title")); 
```

# java - 在文件中拆分一个巨大的 xml

> ID：10178761
> 
> 赞同：2
> 
> 时间：2012-04-16T17:27:18.390
> 
> 标签：java, xml, unix, informatica-powercenter

我们一直在尝试在文件中拆分一个巨大的 7GB xml，到目前为止，没有一个尝试过的选项有希望。让我解释：

有一个来自外部用户的文件，因此我们无法更改它。为了加载到数据库中，需要对其进行拆分。

检查后，informatica 有大约 4400 个端口，这意味着每个项目上至少有 4400 个节点。该文件被切割成 11 个不同的文件。

```
 <?xml version="1.0" encoding="ISO-8859-1" standalone="no"?>
    <file>
        <fileHeader>This has some information</fileHeader>
        <fileBody>
            <Item id="1">
                <definition>
                    <id>1</id>
                    <name>Something</name>
                    <description>This is a dummy</description>
                </definition>
                <raw_materials>
                    <material>
                        <name>polycarbonate</name>
                        <description>Something to describe</description>
                        <cost>24.33</cost>
                        <units>LB</units>
                    </material>
                    <material txt="this" />
                    <material txt="had to" />
                    <material txt="be splitted" />
                    <material txt="into 3" />
                    <material txt="different files"/>
                </raw_materials>
                <specs>
                    <rating_usa issuer_id="3">A</rating_usa>
                    <rating_cnd issuer_id="9">10</rating_cnd>
                    <rating_br issuer_id="5">24.12</rating_bra>
                </specs>
                <budget>
                    <budget_usa>
                        <amount>465</amount>
                        <currency>USD</currency>
                        <usd_vs>1</usd_vs>
                    </budget_usa>
                    <budget_cnd>
                        <amount>30</amount>
                        <currency>CND</currency>
                        <usd_vs>1.24</usd_vs>
                    </budget_cnd>
                    <budget_bra>
                        <amount>20</amount>
                        <currency>BRP</currency>
                        <usd_vs>17.31</usd_vs>
                    </budget_bra>
                </budget>
                <vendor>  
                    <id>1HR24ZA</id>
                    <vendorName>Vendor</vendorName>
                    <deliveryRate>9.5</deliveryRate>
                    <location>
                        <country>Italy</country>
                        <address>Lamborghini Str. 245</address>
                        <phone>1234</phone>                 
                    </location>
                </vendor>
                <taxes>
                    <tax>
                        <country>MEX</country>
                        <federal_pct>16</federal_pct>
                        <currency>MXN</currency>
                        <pct_price>5</pct_price>
                    </tax>
                    <tax txt="this also"/>
                    <tax txt="contains too"/>
                    <tax txt="much nodes"/>
                </taxes>
            </Item>
            <Item id="2">
            </Item>
        </fileBody>
    </file> 

```

这里每个项目只有 6 个市长标签（定义、原材料、规格、预算、供应商、税收），但实际上它有 9 个。

原始映射是这样的：Source -> Source Qualifier -> Target (XML)

为了尝试解决问题，更改了设置，但没有明显改善。之后，每个文件都被放入一个任务中的工作流中，并且所有任务都并行放置。最后一次，和原来一样。

之后，尝试了java。DOM 不是一个选项，因为它将文件加载到内存中。然后，尝试了 SAX 和 StAX，StAX 表现出比 SAX 更好的性能，所以我们朝那个方向走。

值得一提的是，informatica 上的最终文件是这样的：

```
 <?xml version="1.0" encoding="ISO-8859-1" standalone="no"?>
    <file>
        <fileHeader>This has some information</fileHeader>
        <fileBody>
            <Item id="1">
                <raw_materials>
                    <material>
                        <name>polycarbonate</name>
                        <description>Something to describe</description>                    
                    </material>
                    <material txt="this" />
                    <material txt="is hardcore" />
                </raw_materials>          
    </file> 

```

如您所见，您必须检查文件中是否存在特定标签。因此，每次有新标签出现时，您最终都会检查大约 200 个标签，并且您要为要将该标签放入的每个文件都执行此操作：

```
 public class XMLCopier implements javax.xml.stream.StreamFilter {
        static boolean allowStream = false;
        static boolean tagFinished = false;

        private static boolean isWithinValidTag = false;
        private static Map tagMap = new HashMap();
        private static String currentTag = "";

        public static void main(String[] args) throws Exception {        
            String filename = "/path/to/xml/xmlInput.xml";        
            String fileOutputName = "/path/to/target/finalXML.xml";
            try
            {

                XMLInputFactory xmlif = null;
                xmlif = XMLInputFactory.newInstance();          
                FileInputStream fis = new FileInputStream(filename);
                XMLStreamReader xmlr = xmlif.createFilteredReader(xmlif.createXMLStreamReader(fis),new XMLCopier());            

                OutputStream outputFile = new FileOutputStream(fileOutputName);                     
                XMLOutputFactory outputFactory = XMLOutputFactory.newInstance();            
                XMLStreamWriter xmlWriter = outputFactory.createXMLStreamWriter(outputFile);

                while (xmlr.hasNext())          
                {               
                    write(xmlr, xmlWriter);             
                    xmlr.next();
                }
                write(xmlr, xmlWriter);                                 
                xmlWriter.flush();
                xmlWriter.close();          
                xmlr.close();
                outputFile.close();         
            }
            catch (Exception e)
            {
                e.printStackTrace();
            }
        }

        public boolean accept(XMLStreamReader reader) {
            int eventType = reader.getEventType();
            if ( eventType == XMLEvent.START_ELEMENT )
            {
                String currentName = reader.getLocalName();
                if (isWithinValidTag)
                    if ( ( (List)tagMap.get(currentTag) ).contains(currentName) )               
                    {   
                        allowStream = true;                 
                    }

                if ( tagMap.containsKey(currentName) )
                {   
                    isWithinValidTag = true;
                    currentTag = currentName;
                    allowStream = true;
                }
            }
            return allowStream;
        }

        private void write(XMLStreamReader xmlr, XMLStreamWriter writer) throws XMLStreamException
        {
            switch (xmlr.getEventType()) {
                case XMLEvent.START_ELEMENT:
                    final String localName = xmlr.getLocalName();
                    writer.writeStartElement(localName);
                break;
            }
        } 

```

当我们尝试在单个类上执行此操作时，我们以难以维护的代码结束，并且完成时间比 informatica 流程少大约 5 分钟。然后我们将类拆分为并行运行，但它看起来并不乐观，因为它的运行时间比 informatica 进程少 7 分钟，可能是因为您要在 4400 个节点上执行 200 个标签的搜索。11 次。

正如你所看到的，这不是关于如何制作东西，而是关于如何快速制作东西。

您对我们如何改进文件拆分有任何想法吗？

PD。服务器有 JVM 1.4.2，所以我们必须坚持下去。PD2。这里它只显示一个项目，在真实文件中它有很多。

# java - Java：是否总是保证调用构造函数之外的成员初始化？

> ID：10178764
> 
> 赞同：4
> 
> 时间：2012-04-16T17:27:29.347
> 
> 标签：java

如果我在构造函数之外初始化一个成员变量，该成员什么时候真正被初始化？是否保证为类的所有可能的构造函数初始化？

```
public class MyClass
{
    private String myName = "MyClass";

    public MyClass(int constructor1Arg)
    {}

    public MyClass(int constructor2Arg1, int constructor2Arg2)
    {}
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-16T17:34:06.413

是的。所有实例变量初始化器都在超级构造函数执行*之后*执行，但在此类中声明的任何构造函数的主体*之前执行。*

（正如 Jigar Joshi 提到的，这是假设超级构造函数正常执行。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T17:34:11.937

根据 Java 语言规范：

[http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.5](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.5)

实例变量在调用构造函数*之前*被初始化，除非任何先前的初始化抛出错误：

*执行该类的实例初始化程序和实例变量初始化程序，将实例变量初始化程序的值分配给相应的实例变量，按照它们在源代码中以文本形式出现的从左到右的顺序。如果执行这些初始化程序中的任何一个导致异常，则不会处理更多初始化程序，并且此过程会突然完成相同的异常。否则，继续执行步骤 5。*

（第 5 步是运行构造函数）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-16T17:33:36.027

是的，如果在创建对象时没有异常

# sql - 即使尝试使用 where - 嵌套查询 - 转换为 LINQ 对字段进行排序，SQL 问题语句也会返回相同的结果

> ID：10178765
> 
> 赞同：1
> 
> 时间：2012-04-16T17:27:30.850
> 
> 标签：sql, linq, join, subquery, where-clause

我有以下查询：

```
select distinct(ab.id) 
from WidgetClicks ab
join  ManufacturerWidgets aa 
    on ab.ManufacturerWidgetId = aa.Id
join ManufacturerRetailers ad 
    on aa.ManufacturerId = ad.ManufacturerId
join Products ac 
    on ab.ProductId = ac.Id  
where ad.Enabled = 0 
    and ad.RetailerId = 189 
    and  aa.ManufacturerId = 46  
    and aa.CountryId = 72 
    and ac.Id = 6914 
    and ab.CreatedAt >= '2011-10-31 00:00:00.000' 
    and ab.CreatedAt <= '2012-03-31 00:00:00.000' 
```

启用= 1 和retailerId 我得到完全相同的结果，即使我不应该 - 结果应该少得多。

我敢肯定它是直截了当的，但它让我发疯！任何帮助表示赞赏

编辑：

我实际上需要做的基本上是写 3 条语句来获得结果 - 再次不确定如何执行此操作，但这是语句需要做的（用简单的英语）：

1.  从affiliateretailer 表中选择 * where manufacturerid = 46 and enabled = true

2.  从制造商零售商中选择 *，其中零售商是上述选择中剩余的零售商，其中制造商 ID = 46

3.  Select * from widgetClicks join on retialer d where productid = abc and wc.CreatedAt >= '2011-10-31 00:00:00.000' and wc.CreatedAt <= '2012-03-31 00:00:00.000'

编辑 **

对，我有我想要的 Sql 查询......

```
 SELECT COUNT(*) 
    FROM WidgetClicks 
    WHERE CreatedAt >= '2011-10-31 00:00:00.000' 
    and CreatedAt <= '2012-03-31 00:00:00.000' 
    and ProductId = 6914 
    AND RetailerId in (
                        SELECT RetailerId 
                        FROM AffiliateUpdateFiles auf
                        WHERE auf.Enabled = 1 AND auf.ManufacturerId = 46 and RetailerId <> 189
                        )
    AND ManufacturerWidgetId in (
                                select id 
                                from ManufacturerWidgets 
                                where  ManufacturerId = 46 and CountryId = 72
                                ) 
```

这就是你的东西-我实际上在Linq中需要它-如果有人可以为我转换它，我将不胜感激......我会试一试！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T17:35:48.450

尝试改用 LEFT OUTER JOIN。即使您的联接表中没有相应的行，这也会从 WidgetClicks 返回结果。

如果您发现在将联接更改为 LEFT OUTER JOIN 后获得了预期的行，请检查联接表中的数据 - 它们不包含您期望的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T13:31:07.427

这是将上述内容转换为 Linq 的解决方案：

```
public int GetWidgetClicksForManufacturerCategoryModel(int manufacturerId, int countryId, int categoryId, int productId, DateTime myStartDate, DateTime myEndDate)
        {
            var widgetInCountry = (from mw in _er.ManufacturerWidgets
                                                where mw.ManufacturerId == manufacturerId && mw.CountryId == countryId
                                                select mw.Id).ToList();

            var enabledWidgets = (from auf in _er.AffiliateUpdateFiles
                        where auf.Enabled && auf.ManufacturerId == manufacturerId 
                        select auf.RetailerId).ToList();

            var widgetClicks = (from wc in _er.WidgetClicks
                          where wc.CreatedAt.CompareTo(myStartDate) >= 0 && wc.CreatedAt.CompareTo(myEndDate) <= 0 
                          && wc.ProductId == productId 
                          && enabledWidgets.Contains(wc.RetailerId) 
                          && widgetInCountry.Contains(wc.ManufacturerWidgetId)
                                               select wc.Id);

            return widgetClicks.Count();
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T17:42:02.373

鉴于您的连接结构，如果从 WHERE 子句中删除“ad”表过滤器没有效果，则表明 ab-to-aa 连接或 ab-to-ac 连接正在过滤掉由于那些 WHERE 的东西条款。

```
ab -- aa -- ad
|
ac 
```

因此，请尝试将广告过滤器保留在 WHERE 子句中，但删除其余部分，然后将它们一一添加，以查看哪个 WHERE 过滤器导致的结果比您预期的要少。一旦你看到事情被过滤掉了，你就可以确定你需要改变什么——并可能进行重组。您可能希望在此时使用一些 OUTER 连接或创建别名表的连接，例如： X JOIN (Y OUTER JOIN Z WHERE ...) AS Q ON X.id = Q.id WHERE ...

# c - ANSI C 链表。Add() 函数的行为很有趣

> ID：10178766
> 
> 赞同：1
> 
> 时间：2012-04-16T17:27:34.797
> 
> 标签：c

代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <stdbool.h>

typedef struct node {
    char* identifier;
    char* expression;
    struct node* next;
} node;

void add(node** database, char* _identifier, char* _expression, int * size) {
    node* tmp = (node*) malloc (sizeof(node));
    tmp->identifier = _identifier;
    tmp->expression = _expression;
    tmp->next = *database;
    *database = tmp;
    (*size)++;
    printf("Added: %s : %s\n", _identifier, _expression); fflush(NULL);
}

void show(node* database, int size) {
    if (database == NULL) {
        printf("Database empty\n");
    }
    else {
        node* tmp = database;
        printf("Identifier list (%d):\n", size); fflush(NULL);
        while (tmp != NULL) {
            printf("%s : \"%s\" \n", tmp->identifier, tmp->expression);fflush(NULL);
            tmp = tmp->next;
        }
    }
}

int main() {
    node* database = NULL;
    int size = 0;
    add(&database, "a1", "abc", &size);
    add(&database, "a2", "def", &size);
    add(&database, "a3", "ghi", &size);

    char identifier[20];
    char expression[1000];
    int i;
    for (i = 0; i<3; i++) {
        scanf("%s %s", identifier, expression);
        add(&database, identifier, expression, &size);
    }
    show(database, size);
    printf ("Bye!");
    return 0;
} 
```

“添加”函数在手动调用时效果很好，但它在循环内不起作用，数据从标准输入读取。以下是一次运行的结果：

```
Added: a1 : abc
Added: a2 : def
Added: a3 : ghi
a4 mno
Added: a4 : mno
a5 ghi
Added: a5 : ghi
a6 kml
Added: a6 : kml
Identifier list (6):
a6 : "kml" 
a6 : "kml" 
a6 : "kml" 
a3 : "ghi" 
a2 : "def" 
a1 : "abc" 
Bye! 
```

如您所见，节点 a1、a2、a3 已正确添加到列表中。但是，a4 和 a5 在正确添加到列表后，在添加 a6 后更改为全“a6”。我已经花了一天时间，但我无法弄清楚。有人吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T17:32:13.577

您的问题是它们都指向同一个指针：`identifier`. （也`expression`）。（而前 3 个添加指向单独`const char*`的 s 静态初始化。）

要解决此问题，您需要为添加的每个新元素（例如 with ）动态分配空间，并在删除它们时`malloc`释放它们（例如 with ）。`free`

例如：

```
void add(node** database, char* _identifier, char* _expression, int * size) {
   node* tmp = (node*) malloc (sizeof(node));
   tmp->identifier = (char *)malloc(strlen(_identifier));
   strcpy(tmp->identifier, _identifier);
   tmp->expression = (char *)malloc(strlen(_expression));
   strcpy(tmp->expression, _expression);
   tmp->next = *database;
   *database = tmp;
   (*size)++;
   printf("Added: %s : %s\n", _identifier, _expression); fflush(NULL);
} 
```

您必须确保这些资源在某个时候被相应地释放，否则您将发生内存泄漏。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T17:34:56.313

嗯...因为您存储的是指针而不是字符串的副本？

您每次都将“标识符”和“表达式”的地址存储在 main 中，因此链表上的所有 3 个项目都指向相同的数据。

# ruby-on-rails - 在 Rails 中，数据库锁定是否会确保只有进程一次检查属性值而不会成为巨大的瓶颈？

> ID：10178767
> 
> 赞同：0
> 
> 时间：2012-04-16T17:27:37.003
> 
> 标签：ruby-on-rails, postgresql, activerecord

我们的设置是 Rails 3，在负载均衡器后面有 6 个应用服务器和一个 PostgreSQL 数据库。

在我们的应用程序中，用户可以在表演期间“提示”和艺术家。

流程如下所示：

1.  用户点击“提示”按钮
2.  提示对象已创建
3.  after_create 回调确保用户帐户有足够的钱，如果是这样，金融交易就会转移资金。否则，会引发回滚异常。

可能发生的情况是，如果用户向提示按钮“发送垃圾邮件”，则可能会同时处理多个提示。当这种情况发生时，“这个用户有足够的钱吗？” 由于金融交易尚未发生，因此检查对于许多提示返回相同的值。

我需要的是确保每个“提示”按顺序进行处理。这样，提示 #2 的余额检查确实发生在提示 #1 更新余额之前。

我们已经将 Resque 用于其他东西，所以这可能是一种解决方案。虽然我不知道如何确保多个作品不会开始并行处理作业并导致相同的问题。让一名工人做小费工作不是可行的解决方案，因为我们的应用程序在任何给定时刻都会处理大量小费。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T18:16:36.423

如果您在数据库事务中强制执行此操作，则解决问题相当简单。

[http://www.postgresql.org/docs/9.1/interactive/mvcc.html](http://www.postgresql.org/docs/9.1/interactive/mvcc.html)

# android - Android xml shape drawable - 如何绘制 u-form？

> ID：10178770
> 
> 赞同：5
> 
> 时间：2012-04-16T17:28:12.703
> 
> 标签：android, xml, shape

我需要创建一个可绘制的 xml 形状，它绘制一个没有顶线的矩形（“u 形”）。我能做的是画一个矩形，像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
android:shape="rectangle" >

<solid android:color="@color/detailrow_bg_normal" />

<corners
    android:bottomLeftRadius="0dp"
    android:bottomRightRadius="0dp"
    android:radius="1dp"
    android:topLeftRadius="10dp"
    android:topRightRadius="10dp" />

<padding
    android:bottom="2dip"
    android:left="1.5dip"
    android:right="1.5dip"
    android:top="8dip" />

<stroke
    android:width="1dip"
    android:color="@color/detailtable_border" /> 
```

但是如何 - 如果可能的话，我可以在没有顶（或底）线的情况下定义相同的形状吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-16T17:41:29.020

您可以尝试使用图层列表。看看这样的事情是否可行：

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
    <item>
      <shape android:shape="rectangle">
            <solid android:color="@color/detailtable_border" />
        </shape>
   </item>

   <item android:left="1.5dp" android:right="1.5dp" android:bottom="2dp">
      <shape android:shape="rectangle">
        <solid android:color="@color/detailrow_bg_normal" />
      </shape>
   </item>
</layer-list> 
```

这（应该）用边框颜色填充矩形，然后用默认背景颜色覆盖它，留下适当数量的右/左/下边框颜色显示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T17:34:35.043

试试这个代码，也参考这个[链接](https://stackoverflow.com/questions/2422120/open-sided-android-stroke):::

我用这个实现了一个很好的解决方案：

```
<?xml version="1.0" encoding="utf-8"?>

<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
<!-- This is the line -->
    <item android:top="-1dp" android:right="-1dp" android:left="-1dp">
      <shape>
            <solid android:color="@android:color/transparent" />
            <stroke android:width="1dp" android:color="#ffffff" />
      </shape>
    </item>

</layer-list> 
```

如果您需要透明颜色但仍然是开放的笔触颜色（在我的情况下，我只需要底线），这很有效。如果您需要背景颜色，您可以像上面的答案一样添加纯色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T17:30:30.157

您也许可以使用两个形状和一个[LayerList](http://developer.android.com/guide/topics/resources/drawable-resource.html#LayerList)来实现这一点，但我认为这既是一个更好的解决方案，也更容易使用[NinePatch](http://developer.android.com/reference/android/graphics/NinePatch.html) -drawable。

# web-services - 从另一个 Web 应用程序更新 DotNetNuke 用户

> ID：10178771
> 
> 赞同：0
> 
> 时间：2012-04-16T17:28:13.173
> 
> 标签：web-services, dotnetnuke

DNN 版本 5.6.7 .NET 3.5

任何人都知道从另一个 Web 应用程序访问/更新 DNN 站点上的用户帐户的方法吗？

我的目标是允许客户服务从 Intranet 应用程序（包括其他一些与员工相关的非 DNN 数据）更新员工的 DNN 密码，但我没有任何运气。我尝试将一个简单的 Web 服务添加到 DNN 站点的虚拟目录（[如此处所述](http://www.dotnetnuke.com/Resources/Blogs/EntryId/1085/DotNetNuke-Tip-15-Running-a-webservice-inside-of-a-DNN-site.aspx)），希望 Web 服务能够访问 DNN 的所有内容，但我无法创建 UserInfoController 的实例 - 它没有实例化MemberProvider 对象。

```
UserController objUserController = new UserController();
UserInfo objUser = objUserController.GetUser(portalId, userId); 
```

每次，objUserController 对象都为 DotNetNuke.Security.Membership.MembershipProvider 显示 null

DNN 站点和我们的内部网络应用程序都托管在同一台服务器上。任何建议表示赞赏。

编辑：除了 DNN bin 文件夹中的所有 DLL 之外，我还将 DNN web.config 中的所有内容复制到我的 Web 服务 web.config 中，看起来与 DNN 相关

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T10:49:30.673

如果您的 WebService 在 DNN 中，则此代码必须有效：

```
UserInfo objUser = UserController.GetUserById(DotNetNuke.Entities.Portals.PortalSettings.Current.PortalId, userId); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T14:59:43.817

我是通过[http://iweb.adefwebserver.com/](http://iweb.adefwebserver.com/)完成的。

我添加了一个 Web 服务方法，该方法利用了 DNN API 中所有与用户相关的功能（UserInfo、UserController、RoleController 等）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T05:07:57.300

如果您的 Intranet 应用程序在 ActiveDirectory 上运行，我会查看一些可用的 ActiveDirectory 集成模块。

如果您可以等到 DotNetNuke 6.2 发布，它将包括一个内置的服务层，它允许您像用户一样对 DotNetNuke 对象进行身份验证和交互。

# sencha-touch - 在 Sencha Touch 2 中为 Dataview 创建搜索器

> ID：10178778
> 
> 赞同：0
> 
> 时间：2012-04-16T17:28:41.063
> 
> 标签：sencha-touch, sencha-touch-2

在 dataview 组件中我可以插入一个数据项，但是我如何插入一个搜索器？，就像在列表组件中一样

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T21:37:46.827

Dataviews 和 Lists 直接绑定到 Stores ( `Ext.data.Store`)。因此，该商店发生的任何事情都将反映在视图中。

所以你需要做的是**过滤**商店。您可以使用store中的`filter`or方法来做到这一点。`filterBy`

更多信息：[http ://docs.sencha.com/touch/2-0/#!/api/Ext.data.Store-method-filter](http://docs.sencha.com/touch/2-0/#!/api/Ext.data.Store-method-filter)

**例子**

```
var store = Ext.create('Ext.data.Store', {
    fields: ['text'],
    data: [
        { text: 'one'},
        { text: 'two'},
        { text: 'three'}
    ]
});

store.filter('text', 'one'); // will only show the one record 
```

# ruby-on-rails - Rails 3 中的路由

> ID：10178783
> 
> 赞同：1
> 
> 时间：2012-04-16T17:29:18.807
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个具有以下模型的应用程序：类别；子类别和产品。我设置了模型，以便：类别 has_many sub_categories sub_categories belongs_to categories sub_categories has_many products products belongs_to sub_categories。

我想要的是每个类别都有单独的子类别，每个子类别都有单独的产品。例如; 我有一个名为“Foo”的类别，一个名为“Bar”的子类别和一个名为“FooBar”的产品。我希望“Foo”只链接到“Bar(s)”，而“Bar”只链接到“FooBar(s)”。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T18:03:57.470

您可以使用嵌套资源来完成此操作。

```
resources :categories do
  resources :sub_categories do
    resources :products
  end
end 
```

然后使用参数设置类别和 sub_category 对象`category_id`并`sub_category_id`传递给产品控制器。

[Rails 路由指南](http://guides.rubyonrails.org/routing.html#nested-resources)很棒。

# xml - XSLT 名称空间可防止在输出中发生更改的身份转换

> ID：10178786
> 
> 赞同：0
> 
> 时间：2012-04-16T17:29:29.903
> 
> 标签：xml, xslt, xslt-2.0

我正在对一些 EAD（编码存档描述）XML 文档执行 XSLT 2.0 身份转换。我需要稍微修改输出，但我似乎遇到了命名空间问题。

不要在模式感知处理器中测试它，你会得到错误！:)

XSLT：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:xs="http://www.w3.org/2001/XMLSchema"
exclude-result-prefixes="#all"
version="2.0">

<xsl:output method="xml" indent="yes" standalone="no"/>

<!-- The identity transform -->
<xsl:template match="@* | node()">
    <xsl:copy>
        <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
</xsl:template>

<xsl:template match="filedesc">
    <xsl:copy>
        <header>Subjects</header>
        <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
</xsl:template> 
```

Sample-EAD.xml（也可在此处的 pastebin 上找到：http: [//pastebin.com/RFAQaY3w](http://pastebin.com/RFAQaY3w)）

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<ead xsi:schemaLocation="urn:isbn:1-931666-22-9 http://www.loc.gov/ead/ead.xsd"     xmlns:ns2="http://www.w3.org/1999/xlink" xmlns="urn:isbn:1-931666-22-9" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

<eadheader findaidstatus="Ready_for_online" repositoryencoding="iso15511" countryencoding="iso3166-1" dateencoding="iso8601" langencoding="iso639-2b">  
<eadid>01234</eadid>
<filedesc>
    <AAA>1</AAA>
    <BBB>2</BBB>
</filedesc>
</eadheader>
<archdesc>
    <bib>
        <CCC>1</CCC>
        <DDD>2</DDD>
    </bib>
</archdesc>
 </ead> 
```

如果我从元素中提取名称空间信息（也可在此处获得：http: [//pastebin.com/6ygi3xUm](http://pastebin.com/6ygi3xUm)），则带有修改的身份转换将起作用。

样品-EAD-2：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<ead>

<eadheader findaidstatus="Ready_for_online" repositoryencoding="iso15511" countryencoding="iso3166-1" dateencoding="iso8601" langencoding="iso639-2b">  
<eadid>01234</eadid>
<filedesc>
    <AAA>1</AAA>
    <BBB>2</BBB>
</filedesc>
</eadheader>
<archdesc>
    <bib>
        <CCC>1</CCC>
        <DDD>2</DDD>
    </bib>
</archdesc> 
```

我对命名空间不是很好，所以任何建议都将不胜感激。如果我尝试将命名空间添加到 XSLT，则转换可以工作，但我会在新元素中获得命名空间属性。非常感谢您的阅读和您的建议！干杯!

编辑：输入（w/namespaces），通过身份转换结果运行——

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<ead xmlns:ns2="http://www.w3.org/1999/xlink" xmlns="urn:isbn:1-931666-22-9"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation="urn:isbn:1-931666-22-9 http://www.loc.gov/ead/ead.xsd">

<eadheader findaidstatus="Ready_for_online" repositoryencoding="iso15511"
          countryencoding="iso3166-1"
          dateencoding="iso8601"
          langencoding="iso639-2b"> 
     <eadid>01234</eadid>
     <filedesc>
           <AAA>1</AAA>
           <BBB>2</BBB>
     </filedesc>
  </eadheader>
  <archdesc>
        <bib>
              <CCC>1</CCC>
              <DDD>2</DDD>
        </bib>
  </archdesc>
</ead> 
```

输入（无命名空间）贯穿身份转换结果——

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<ead>

<eadheader findaidstatus="Ready_for_online" repositoryencoding="iso15511"
          countryencoding="iso3166-1"
          dateencoding="iso8601"
          langencoding="iso639-2b"> 
     <eadid>01234</eadid>
     <filedesc>
     <header>Subjects</header>
           <AAA>1</AAA>
           <BBB>2</BBB>
     </filedesc>
  </eadheader>
  <archdesc>
        <bib>
              <CCC>1</CCC>
              <DDD>2</DDD>
        </bib>
  </archdesc> 
```

最后，输入（带命名空间）通过 XSLT（添加命名空间）结果运行——

XSLT：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:xs="http://www.w3.org/2001/XMLSchema"
exclude-result-prefixes="#all"
version="2.0"
xsi:schemaLocation="urn:isbn:1-931666-22-9 http://www.loc.gov/ead/ead.xsd"
xmlns:ns2="http://www.w3.org/1999/xlink" 
xmlns="urn:isbn:1-931666-22-9"  
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

<xsl:output method="xml" indent="yes" standalone="no"/>

<!-- The identity transform -->
<xsl:template match="@* | node()">
    <xsl:copy>
        <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
</xsl:template>

<xsl:template match="filedesc">
    <xsl:copy>
        <header>Subjects</header>
        <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
</xsl:template>    

</xsl:stylesheet> 
```

结果：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<ead xmlns:ns2="http://www.w3.org/1999/xlink" xmlns="urn:isbn:1-931666-22-9"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation="urn:isbn:1-931666-22-9 http://www.loc.gov/ead/ead.xsd">

<eadheader findaidstatus="Ready_for_online" repositoryencoding="iso15511"
          countryencoding="iso3166-1"
          dateencoding="iso8601"
          langencoding="iso639-2b"> 
     <eadid>01234</eadid>
     <filedesc>
           <AAA>1</AAA>
           <BBB>2</BBB>
     </filedesc>
  </eadheader>
  <archdesc>
        <bib>
              <CCC>1</CCC>
              <DDD>2</DDD>
        </bib>
  </archdesc>
</ead> 
```

编辑＃2：抱歉，所有，因为我认为我未能表达我想要的输出。我想避免在修改后的元素中添加额外的属性，因为在身份转换之后会进行额外的处理，并且我想让 XML 尽可能接近它的当前状态（编辑除外）。再次感谢您的耐心和帮助！这是一个例子：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<ead xsi:schemaLocation="urn:isbn:1-931666-22-9 http://www.loc.gov/ead/ead.xsd" xmlns:ns2="http://www.w3.org/1999/xlink" xmlns="urn:isbn:1-931666-22-9" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

<eadheader findaidstatus="Ready_for_online" repositoryencoding="iso15511" countryencoding="iso3166-1" dateencoding="iso8601" langencoding="iso639-2b">  
    <eadid>01234</eadid>
    <filedesc>
        <header>List Name</header>
        <AAA>1</AAA>
        <BBB>2</BBB>
    </filedesc>
</eadheader>
<archdesc>
    <bib>
        <CCC>1</CCC>
        <DDD>2</DDD>
    </bib>
</archdesc>
</ead> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T21:23:51.277

这是一个很长的问题，有点难以理解，但我认为这就是你想要的。问题是您要匹配的元素位于源 xml 文档的命名空间中，因此您也必须匹配命名空间。因此，我在 xslt: 中为其分配了一个前缀：`xmlns:input="urn:isbn:1-931666-22-9"`然后我使用它来匹配 filedesc 元素：`<xsl:template match="input:filedesc">`。我还将相同的命名空间设置为 xsl 的默认命名空间，因此您的元素将位于该命名空间中。

```
<?xml version="1.0" encoding="UTF-8"?>
 <xsl:stylesheet 
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:input="urn:isbn:1-931666-22-9"
    xmlns="urn:isbn:1-931666-22-9"
    exclude-result-prefixes="input"
    version="2.0">

  <xsl:output method="xml" indent="yes" standalone="no"/>

  <!-- The identity transform -->
  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="input:filedesc">
    <xsl:copy>
      <header>Subjects</header>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>  
</xsl:stylesheet> 
```

# matlab - 从matlab中的一个奇怪对象访问值

> ID：10178788
> 
> 赞同：2
> 
> 时间：2012-04-16T17:29:37.987
> 
> 标签：matlab

当我像这样在 Matlab 中输入对象时

```
>> a 
```

我得到了关注。

```
ans = 

    [6x1004 uint16] 
```

如何访问对象的单元格`a`，例如 (2,4) 的单元格？

我徒劳地尝试了 a(2,4) 或 a[2,4]。

我知道这是一个菜鸟问题，但不知道我可以从哪里开始。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T17:51:41.360

它看起来像是`a`一个 size 的单元格变量`1x1`。那么，您是否尝试使用 进行索引`{}`，例如

```
a{1}(2,4) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T17:55:13.940

这应该有助于：

```
>> a = cell(1);
>> a{1} = rand(6,1004);
>> a

a = 

    [6x1004 double]

>> a{1}(1)

ans =

    0.8147 
```

引用单元格时 () 返回单元格，{} 返回单元格的内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-16T18:02:07.213

要找出对象的类，您可以使用[类](http://www.mathworks.com/help/techdoc/ref/class.html)函数。

```
>> a{1} = uint16(zeros(6,1004));
>> a

a = 

    [6x1004 uint16]

>> class(a)

ans =

cell 
```

# javascript - 谷歌地图标记删除的反向动画？

> ID：10178789
> 
> 赞同：5
> 
> 时间：2012-04-16T17:29:42.527
> 
> 标签：javascript, google-maps, google-maps-api-3, google-maps-markers

我知道我可以为谷歌地图上标记的“添加”设置动画，例如[https://developers.google.com/maps/documentation/javascript/overlays#MarkerAnimations](https://developers.google.com/maps/documentation/javascript/overlays#MarkerAnimations)

无论如何我可以做反向动画来从地图上删除标记吗？我希望它在移除标记时飞回地图顶部......这可能吗？

到目前为止，这是我的删除代码（只是将其从地图中删除，没有动画）：

```
// TODO figure out if there is a way to animate this removal, like the add
$.contextualMap.prototype.removeMarker = function(m) {
  m.mapMarker.setMap(null);
  m.mapMarker = null;
}; 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-16T18:17:04.297

由于[google.maps.Animation](https://developers.google.com/maps/documentation/javascript/reference#Animation)不支持下降的反向动画，您需要编写自己的脚本来为标记设置动画。

你可以这样写：

```
function removeMarkerWithAnimation(map, marker){
    (function animationStep(){
        //Converting GPS to World Coordinates
        var newPosition = map.getProjection().fromLatLngToPoint(marker.getPosition());

        //Moving 10px to up
        newPosition.y -= 10 / (1 << map.getZoom()); 

        //Converting World Coordinates to GPS 
        newPosition = map.getProjection().fromPointToLatLng(newPosition);
        //updating maker's position
        marker.setPosition( newPosition );
        //Checking whether marker is out of bounds
        if( map.getBounds().getNorthEast().lat() < newPosition.lat() ){
            marker.setMap(null);
        }else{
            //Repeating animation step
            setTimeout(animationStep,10);
        }
    })();
} 
```

这是[**演示：**](http://jsfiddle.net/bMsTp/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-16T17:41:16.123

我的想法：

1.  创建一个飞行标记别针的动画 GIF，然后消失。
2.  在标记删除事件上，交换`icon`以显示 GIF
3.  由于您创建了 GIF，您应该知道动画时间长度。然后，用这个值 setTimeout 调用 setMap(null)

它可能会阻止事件传播，这是许多可能的缺点之一。

# javascript - 支持取消带有转义的 DHTML 对话框

> ID：10178793
> 
> 赞同：3
> 
> 时间：2012-04-16T17:29:50.560
> 
> 标签：javascript, onkeydown

想象一个带有以下标记的 DHTML 对话框：

```
<div id="someDialog" class="dialog">
    <h2>Title of dialog</h2>

    Lots: <input ...>
    of: <select ...>
    controls: <textarea ...>

    <input type="submit" value="OK">
    <input type="reset" value="Cancel">
</div> 
```

用户会期望点击退出来取消对话框。这本身并不难——只需将 keydown 事件处理程序添加到 document.documentElement 以检查 ev.keyCode == 27，并使用它来关闭页面上最顶部的对话框。

问题是——在某些情况下，浏览器首先看到转义键很重要。例如，如果浏览器提示自动完成菜单`<input type="text">`，按转义键应该取消，而不是取消对话框。如果您调出 a 的下拉/弹出菜单`<select>`，按 Escape 应该关闭它，而不是对话框。

当且仅当浏览器不需要转义键时，您如何安排处理窗口的转义键？

* * *

编辑： Stack Exchange 本身就有这个错误。如果我单击“您希望通过电子邮件将您的问题的回复发送给您吗？” 链接，打开一个 DHTML 对话框，然后 tab 到频率下拉菜单，按 alt-down 打开下拉菜单，然后退出以关闭下拉菜单，整个对话框关闭。这不应该发生。在这些情况下，浏览器的控制实现应该首先选择转义键。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T18:44:57.750

经过一些体面的研究和试验/错误，这里最好/唯一的解决方案似乎是创建自己的自定义表单控件。

* * *

以下是解决问题的失败尝试。

**[http://jsfiddle.net/CoryDanielson/4jBgs/10/](http://jsfiddle.net/CoryDanielson/4jBgs/10/)**

这基本上是它的工作原理。

* * *

首先，有一个`activeInput`变量存储`DOMElement`用户关注的输入。（仅当输入是可转义的）

```
var activeInput = false; 
```

* * *

为了填充这个变量，我创建了一个你提到的 DOMElements 数组`escaped`（带有自动完成功能的文本框，选择元素）

```
var escapableElements = [];
escapableElements = escapableElements.concat(
    Array.prototype.slice.call(document.getElementsByTagName('select')),
    Array.prototype.slice.call(document.getElementsByTagName('input'))
    //add more elements here
); 
```

然后循环遍历数组并附加到`eventListeners`和`focus`（`blur`失去焦点）事件。（我在这篇文章的底部包含了每个函数）

```
forEach(escapableElements, function() {
    this.addEventListener('focus', registerActiveElement);
    this.addEventListener('blur', deregisterActiveElement);
});

function registerActiveElement() {
    if (!activeInput)
        activeInput = this;
    //console.log('registered'); //testing only
}

function deregisterActiveElement() {
    if (activeInput)
        activeInput = false;
    //console.log('deregistered'); //testing only
} 
```

* * *

在那之后，我`eventListener`为这个`keydown`活动准备了一个。在其中，我检查是否有一个，`activeInput`如果没有，我只是`return true;`让浏览器做它想做的事情（逃避自动完成等），如果没有`activeInput`，我检查是否`ESC`被按下并调用`hide_dialog_box(event.keyCode);`

与您关于处理`ESC`按键的问题中的段落的唯一区别是我检查了是否有`activeInput`事先。如果有`activeInput`，我什么也不做（让浏览器本地处理 ESC）如果没有`activeInput`我调用`event.preventDefault()`这将取消浏览器对 ESC 的本机处理，然后调用该函数`hide_dialog_box(keyCode)`，然后执行`return false;`这也有助于防止浏览器处理`ESC`按键。

```
document.addEventListener('keydown', function(event) {
    if (!activeInput) {
        if (event.keyCode == 27) { //esc
            event.preventDefault();
            hide_dialog_box(event.keyCode);
            return false;
        }
    } else {
        return true; //if active input, let browser function
    }
    /*
        if the browser prompts with an autocomplete menu for 
        <input type="text">, or options on a <select> drop down
        pressing escape will cancel that, not cancel the dialog. 
    */
}); 
```

* * *

最后 2 段代码是函数`hide_dialog_box(keyCode)`和我编写的用于循环`NodeList`调用的函数`escapableElements`

```
function hide_dialog_box(keyCode) {
    var dialog_box = document.getElementById('dialog_box');
        dialog_box.style.display = 'none';
}

function forEach(list, callback) {
    for (var i = 0; i < list.length; i++)
    {
        //calls the callback function, but places list[i] as the 'this'
        callback.call(list[i]);
    }
} 
```

# ios - 如何在iOS中删除UITableViewCell的No Result TableView？

> ID：10178794
> 
> 赞同：1
> 
> 时间：2012-04-16T17:29:50.583
> 
> 标签：ios, cocoa-touch, uitableview, uisearchbar

实际上我的 TableView 的背景颜色是真的黑色。但是，当我使用 SearchBar 和搜索词时，如果没有匹配的数据，则会出现白色的“NO Result”UITableView。如果没有匹配的单词，我不想出现带有“NO Result”TableViewCell 的白色背景。如何删除白色 UITableViewCell？

如果没有匹配的结果，我想删除 No Result TableView 。 ![在此处输入图像描述](../Images/501a75b932a83712773666a57e2f6950.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T11:03:42.313

该 tableView 是自动的，因为它是搜索的一部分，但是您可以通过执行以下操作进行修改：

1.  创建一个名为**noResultsToDisplay**的布尔标志（或其他名称）。
2.  如果您没有要显示的结果，请`noResultsToDisplay = YES`设置 ，`NO`否则将其设置为。
3.  在**numberOfRowsInSection**中，`if (noResultsToDisplay) return 3;`
4.  在**cellForRowAtIndexPath**中，`if (noResultsToDisplay && indexPath.row == 2) cell.textLabel.text = @"No Results";`

# asp.net - ASP.NET 应用程序连接字符串和 SQL Server 安全/权限

> ID：10178799
> 
> 赞同：1
> 
> 时间：2012-04-16T17:30:12.450
> 
> 标签：asp.net, sql-server, sql-server-2008, connection-string, database-security

我正在**实时（生产）服务器**上部署 ASP.NET 应用程序和 SQL Server (2008) 数据库。物理服务器同时**运行**SQL Server 2008 和 IIS 7 - 它由托管公司提供，**不属于我们的内部网络**。

我有几个关于数据库安全和 ASP.NET 应用程序的连接字符串的问题。

以前我会创建一个数据库用户并为每个表指定 SELECT/INSERT 等权限 - 但我的问题是这个数据库中有**50 多个表**，所以这样做需要**很长时间**。

应用程序需要对每个表执行 SELECT/INSERT/DELETE/UPDATE。

*   **有没有比单独**指定每个表的权限更好的方法？
*   是否有等效于实时 Web 服务器的**集成安全性**- 有什么缺点？
*   或者有没有办法**将特定用户的访问权限提升**为对特定数据库的完全访问权限

另外连接字符串将如何变化？

我只是在寻找一些专家**建议**，只是有人为我指明正确的**方向**，以及指向一些有关如何实现更好方法的**文档的链接。**

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T17:46:37.570

您的项目符号列表中基本上有三个不相关的问题，而不是一个。

*   第一个更适合[ServerFault.com](https://serverfault.com/)，因为它处理 SQL Server，不一定是编程问题。
    *   然而，谷歌得到了回报，这是一种方法： [http ://www.tech-recipes.com/rx/2298/sql_server_2005_easily_grant_select_all_tables_views/](http://www.tech-recipes.com/rx/2298/sql_server_2005_easily_grant_select_all_tables_views/)
    *   或者，您可以将用户分配给正确的组，如@Oded 在此处的回答中所述：[TSQL granting read and write permissions to all tables](https://stackoverflow.com/questions/3100831/tsql-granting-read-and-write-permissions-to-all-tables)
*   对于第二个，集成安全性，是的，有一种方法可以将集成安全性与 ASP.NET 结合使用。请参阅这篇文章：http: [//msdn.microsoft.com/en-us/library/bsz5788z.aspx](http://msdn.microsoft.com/en-us/library/bsz5788z.aspx)
    *   最大的缺点是配置较多。这是一种非标准（但受支持）配置，因此维护程序员以前可能没有见过该设置。
    *   此外，如果您这样做，如果您使用的帐户在其他地方具有权限，则可能存在安全问题。一定要遵循最小特权原则。最好为每个网站专门创建一个域帐户，这样如果一个网站遭到入侵，它就会限制可以造成的损害。你比我更清楚你的安全问题，所以这可能是也可能不是相关的建议，但这是需要考虑的事情。
    *   最后，（这可能太明显了，无法指出）使用真人的 UserId 是愚蠢的。如果那个人离开公司并且他们的帐户被删除，那么网站显然会崩溃。
*   既然我已经找到了第一个问题的答案，那么第三个问题就变得没有意义了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T17:58:08.650

您可以创建或使用现有的数据库角色。然后，您将用户放入该角色以允许该用户拥有您需要的所有权限。例如，根据您描述的场景，您可以将您在连接中使用的用户帐户放入**db_datawriter**角色中。

请参阅[http://msdn.microsoft.com/en-us/library/ms189121%28v=sql.105%29.aspx](http://msdn.microsoft.com/en-us/library/ms189121%28v=sql.105%29.aspx)

本文还涉及如何提升用户的权限。

[集成的安全性](http://msdn.microsoft.com/en-us/library/bsz5788z.aspx)将起作用——它只要求建立连接的计算机上使用的登录名可以被数据库服务器识别（在相同的或信任的 Windows 域中）。

# tomcat - 理解 Tomcat 中的 servlet 路径扩展

> ID：10178803
> 
> 赞同：0
> 
> 时间：2012-04-16T17:30:27.350
> 
> 标签：tomcat, web-applications, servlets

我没有高兴地搜索了高低的答案/教程。这一定是一个太琐碎的问题。

我已经安装了 Tomcat 7.0.27 并且正在处理库存示例。示例存储在`webapps/examples`并`server.xml`说`docBase`is `webapps`。示例的 HTML 索引可通过 访问`http://localhost:8080/examples/servlets/`。到现在为止还挺好。

在此页面上，将鼠标悬停在“Hello World”servlet 的“Execute”链接上，路径将扩展为：`http://localhost:8080/examples/servlets/servlet/HelloWorldExample`，这当然会成功执行。但`servlet`应该扩大到`WEB-INF/classes`. 所以我希望类的磁盘路径是`webapps/examples/servlets/WEB-INF/classes/HelloWorldExample.class`，但事实并非如此。实际路径是`webapps/examples/WEB-INF/classes/HelloWorldExample.class`。目录中唯一的内容`servlets`是 HTML 和图像文件。问题1：这是怎么回事？如何`examples/servlets/servlet`被重新路由到`examples/WEB-INF/classes`？

问题 #2：我将一个已编译的类`Foo.class`放入`WEB-INF/classes`并尝试`http://localhost:8080/examples/servlets/servlet/Foo`通过`http://localhost:8080/examples/servlet/Foo`. 两者都产生 404 未找到。重新启动Tomcat（不应该，但干草）这没有帮助。是什么赋予了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T17:34:26.053

不能那样工作。小服务程序！= CGI。没有扩展。

Servlet 在 web.xml 中专门映射到它们的 URL。它们的包名称，或在 WEB-INF 中作为 .class、.jar 或位于类路径上的其他位置的位置与它们映射到的 URL 无关。

Addena，在 Servlet 3.0 中，它们可以被注释而不是在 web.xml 中映射。这并不一定意味着编译的类可以“直接加入”。那将是一个容器功能，我不能说 Tomcat 是否允许这样做。

# android - 从活动返回时防止简历触发（很难解释）

> ID：10178812
> 
> 赞同：0
> 
> 时间：2012-04-16T17:31:13.280
> 
> 标签：android, timer, resume

我目前有一个点击游戏，当用户按下主页按钮时，它利用 on pause、stop 和 onresume 方法，计时器被“取消”并且剩余的时间被保存很长时间，然后在 onresume 中创建一个新的计时器与时间剩余 - 很好，但是现在当计时器完成完整运行并且用户开始启动新活动，即排行榜/设置等。并返回 onResume 再次触发并且剩余 1 秒的倒计时再次开始，有没有办法从某种活动或类似活动返回时停止它被解雇？

在下面你会看到一个我尝试过但徒劳无功的工作，非常混乱且有效，但我的想法已经不多了！

```
 protected void onResume() {
        super.onResume();

        if (timeLeft < 1000) {

        } else {
            if (timeLeft <= 0) {

            } else {

                if (newActivityOpened == true) {

                } else {
                    if (isTimerRunning == true) {
                        startCountDownTimer();
                    }

                }

            }
        }
    } 
```

原谅所有多余的 if 语句，我一直在添加它们，希望能让一些东西点击哈哈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T18:01:43.127

当然，您需要做的就是以下...

```
// Code where you start the new Activity...
stopCountDownTimer();
if (timeLeft < 1000)
    isTimerRunning = false;
startActivity(intent); 
```

然后在`onResume()`你做...

```
if (isTimerRunning)
    startCountDownTimer(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T17:38:25.743

为什么不在您的活动中使用简单的全局布尔值？每当您开始某些活动时，将其设置为 true。在您的 onResume() 检查布尔值。如果您看到它设置为 true，则不要启动倒数计时器。否则启动它。

```
protected void onResume() { 
    if( !newActivityOpened){
        if ( isTimerRunning ) {
            startCountDownTimer();
        }
    }
    super.onResume();
} 
```

不确定我是否正确解决了问题，但这应该可以正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T17:50:17.260

只需创建一个标志，指示您当前是否正在计时/倒计时。一旦你开始你的定时器设置`timing = true;`一旦它完成`timing = false;`

然后在您的 onResume 中，您知道您的计时器是否已经开始运行。

```
protected void onResume() {
    if (timing)
    {
        //  create your timer here
    }
    else{
        // do nothing?
    }
} 
```

# java - 使用休眠侦听器跟踪父实体

> ID：10178821
> 
> 赞同：0
> 
> 时间：2012-04-16T17:31:59.690
> 
> 标签：java, hibernate, jpa

我正在尝试通过使用休眠事件侦听器（PostUpdateEventListener、PostInsertEventListener 等）来跟踪我的父实体。当对关联实体进行更改的父实体发生更新时，hibernate 返回关联实体而不是父实体。当对关联实体进行更改时，是否有办法找到/了解父实体？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T07:22:59.380

您可能需要添加从子到父的关系才能遍历。

```
<many-to-one name="parent" inverse="true">
</many-to-one> 
```

# python - Python和numpy：从1-dim数组中逐行减去2-dim数组

> ID：10178823
> 
> 赞同：4
> 
> 时间：2012-04-16T17:32:04.047
> 
> 标签：python, arrays, math, numpy

在 python 中，我希望从 1-dim 数组中逐行减去 2-dim 数组。

我知道如何使用“for”循环和索引来做到这一点，但我想使用 numpy 函数可能会更快。但是我没有找到办法。这是一个带有“for”循环的示例：

```
from numpy import *
x=array([[1,2,3,4,5],[6,7,8,9,10]])
y=array([20,10])
j=array([0, 1])
a=zeros([2,5])
for i in j :
...     a[i]=y[i]-x[i] 
```

这是一个不起作用的例子，用这个替换'for'循环：

```
a=y[j]-x[j,i]
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: shape mismatch: objects cannot be broadcast to a single shape 
```

你有什么建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-16T17:36:30.970

问题是`y-x`有各自的形状`(2) (2,5)`。要进行正确的广播，您需要 shape `(2,1) (2,5)`。`.reshape`只要保留元素的数量，我们就可以做到这一点：

```
y.reshape(2,1) - x 
```

给出：

```
array([[19, 18, 17, 16, 15],
   [ 4,  3,  2,  1,  0]]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T15:54:51.467

```
y[:,newaxis] - x 
```

也应该工作。（小）比较好处是你关注维度本身，而不是维度的大小。

# plugins - CRM 2011 异步更新后插件

> ID：10178824
> 
> 赞同：2
> 
> 时间：2012-04-16T17:32:05.023
> 
> 标签：plugins, dynamics-crm-2011, crm

我有一个异步操作后插件在更新步骤上运行。现在我的挑战是找到用户正在更新的字段的原始值。既然是后操作步骤，是否可以找到之前更新的值字段？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T17:47:42.330

是的。`preimage`根据插件中的步骤注册实体的快照。

[前后实体图像](http://msdn.microsoft.com/en-us/library/gg309673.aspx#bkmk_preandpost "了解传递给插件的数据上下文")

# c++ - 数字输入的输入验证

> ID：10178830
> 
> 赞同：1
> 
> 时间：2012-04-16T17:32:35.217
> 
> 标签：c++, linux, validation

我对这个 C++ 世界非常陌生，并尝试为数字密码编写输入验证函数。这是我到目前为止得到的：

```
#include <iostream>
#include <limits>
using namespace std;

void isNumeric(int &iN)
{
    while (1) {
        cin >> iN;

        if (cin.fail()) {
            cin.clear();
            cin.ignore(numeric_limits<streamsize>::max(), '\n');
            cout << "Only 'numeric' value(s) are allowed: ";
            continue;
        }

        // alpha-numeric entry also not allowed 
        cin.ignore(numeric_limits<streamsize>::max(), '\n');
        if (cin.gcount() >  1) continue;

        // check against the -ve value
        if (iN <= 0 ) continue;

    break;
    }
}

int main()
{
    int x;

    cout << "Enter your number: ";
    isNumeric(x);
    cout << "You've entered: " << x << endl;

    return 0;
} 
```

对于不正确的值，它工作得很好，但在有效输入时不会跳出循环。知道我在这里缺少什么吗？干杯！！

* * *

**来自 James Kanze 脚本的错误：**

```
test.cpp: In function ‘bool parseNumber(const string&, int&)’:
test.cpp:11:20: error: no match for ‘operator>>’ in ‘text >> results’
test.cpp:11:20: note: candidates are:
/usr/include/c++/4.6/bits/basic_string.tcc:998:5: note: template<class _CharT, class _Traits, class _Alloc> std::basic_istream<_CharT, _Traits>& std::operator>>(std::basic_istream<_CharT, _Traits>&, std::basic_string<_CharT, _Traits, _Alloc>&)
/usr/include/c++/4.6/bits/istream.tcc:957:5: note: template<class _CharT2, class _Traits2> std::basic_istream<_CharT, _Traits>& std::operator>>(std::basic_istream<_CharT, _Traits>&, _CharT2*)
/usr/include/c++/4.6/bits/istream.tcc:925:5: note: template<class _CharT, class _Traits> std::basic_istream<_CharT, _Traits>& std::operator>>(std::basic_istream<_CharT, _Traits>&, _CharT&)
/usr/include/c++/4.6/istream:709:5: note: template<class _Traits> std::basic_istream<char, _Traits>& std::operator>>(std::basic_istream<char, _Traits>&, unsigned char&)
/usr/include/c++/4.6/istream:714:5: note: template<class _Traits> std::basic_istream<char, _Traits>& std::operator>>(std::basic_istream<char, _Traits>&, signed char&)
/usr/include/c++/4.6/istream:756:5: note: template<class _Traits> std::basic_istream<char, _Traits>& std::operator>>(std::basic_istream<char, _Traits>&, unsigned char*)
/usr/include/c++/4.6/istream:761:5: note: template<class _Traits> std::basic_istream<char, _Traits>& std::operator>>(std::basic_istream<char, _Traits>&, signed char*)
test.cpp:11:42: error: ‘const string’ has no member named ‘peek’
test.cpp:11:52: error: ‘EOF’ was not declared in this scope 
```

* * *

新代码：*使用**`getline()`**和**验证作为字符串*** 感谢大家（尤其是 James Kanze）帮助我。这东西在这里工作得差不多了。

```
void isNumeric( int &iN )
{
    string sN; 

    while (1) {
        getline(cin, sN);

        bool valNum = true;
        for ( unsigned iDx=0; iDx < sN.length(); iDx++ )
            if ( !isdigit(sN[iDx]) ) { 
                valNum = false;
                break;
            }   

        if ( !valNum ) { 
            cout << "Wrong entry; Try again: ";
            continue;
        }   

        stringstream sStream (sN );
        sStream >> iN; 

        if ( iN<=0 ) {
            cout << "Cannot be 0; Try again: "; 
            continue;
        }     
    break;   
    }   
} 
```

那里还有改进的余地吗？干杯！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T17:36:55.080

如果转换失败，则流本身的计算结果为 false，因此您可以执行以下操作：

```
int get_int() {
    int i;
    std::cout << "Please enter a number: " << std::endl;
    while(!(std::cin >> i)) {
        std::cin.clear();   //clear flags
        //discard bad input
        std::cin.ignore(std::numeric_limits<std::streamsize>::max()); 
        std::cout << "Incorrect, must be numeric: " << std::endl;
    }
    return i;
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T18:08:17.390

这看起来像面向行的输入。在这种情况下，通常的解决方案是使用`getline`：

```
bool parseNumber( std::string const& text, int& results )
{
    std::istringstream parser( text );
    return parser >> results >> std::ws && parser.peek() == EOF;
}

int getNumber()
{
    int results;
    std::string line;
    while ( ! std::getline( std::cin, line ) || ! parseNumber( line, results ) ) 
    {
        std::cin.clear();
        std::cout << "Only 'numeric' value(s) allowed:";
    }
    return results;
} 
```

# c# - GridView 通过 id asp.net 获取数据

> ID：10178833
> 
> 赞同：0
> 
> 时间：2012-04-16T17:32:37.943
> 
> 标签：c#, asp.net, select, gridview

问题真的是我可以通过gridview上的选择通过id获取数据，但是然后我使用我在页面上实现的搜索选项，gridview显示它获得的与结果匹配的选项，但如果我按下选择它将重定向到具有错误 id 的页面，而不是获取我选择的那个的 id，而是获取位于单元格第一个位置的字段的 id。

这是代码：

```
protected void Page_Load(object sender, EventArgs e)
    {

        TeamGest.DBLayer.DBLTeams dbl = new TeamGest.DBLayer.DBLTeams();
        GridView1.DataSource = dbl.List();
        GridView1.DataBind();

        TeamGest.DBLayer.DBLPlayers dbl1 = new TeamGest.DBLayer.DBLPlayers();
        GridView2.DataSource = dbl1.List();
        GridView2.DataBind();
    }

    protected void MyMenu_MenuItemClick(object sender, MenuEventArgs e)
    {
        {
            MyMultiView.ActiveViewIndex = Int32.Parse(e.Item.Value);
            int i;
            for (i = 0; i <= MyMenu.Items.Count - 1; i++)
            {
                if (i == Convert.ToInt32(e.Item.Value))
                {
                    MyMenu.Items[i].Text = MyMenu.Items[i].Text;
                }
                else
                {
                    MyMenu.Items[i].Text = MyMenu.Items[i].Text;
                }
            }
        }
    }

    protected void GridView1_SelectedIndexChanged(object sender, EventArgs e)
    {
        GridViewRow row = GridView1.SelectedRow;

        Response.Redirect("DetalhesClube.aspx?Id="+row.Cells[0].Text);

    }
    protected void Button1_Click1(object sender, EventArgs e)
    {
        string searchStringTeam = TextBox1.Text;
        GetTeamResults(searchStringTeam);
    }
    protected void GridView2_SelectedIndexChanged(object sender, EventArgs e)
    {
        GridViewRow row = GridView2.SelectedRow;
        Response.Redirect("DetalhesJogador.aspx?Id=" + row.Cells[0].Text);
    }

    protected void Button2_Click(object sender, EventArgs e)
    {
        string searchStringPlayer = TextBox2.Text;
        GetPlayerResults(searchStringPlayer);    
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T18:05:54.093

不要使用单元格值。这就是 DataKeys 集合的用途：

```
<asp:GridView ID="GridView1" runat="server" DataKeyNames="ID, SomeOtherColumn" ...> 
```

在代码隐藏中，您只需要行索引：

```
var rowIndex = 0;
var ID = (int)GridView1.Rows[rowIndex]["ID"]; 
```

# c# - 等概率范围内的随机数

> ID：10178837
> 
> 赞同：29
> 
> 时间：2012-04-16T17:32:55.870
> 
> 标签：c#, random, range, prng

这可能比 C# 更与数学相关，但我需要一个 C# 解决方案，所以我把它放在这里。

我的问题是关于随机数生成器的概率，更具体地说，是否以相等的概率返回每个可能的值。

我知道有[Random.Next(int, int)](http://msdn.microsoft.com/en-us/library/2dx6wyd4.aspx)方法返回第一个整数和最后一个整数之间的一个数字（最后一个是排他的）。

`Random.Next()`[无重载] 将返回一个介于 0 和 Int32.MaxValue（即 2147483647）之间的值 - 1，即 2147483646。

如果我想要一个 1 到 10 之间的值，我可以调用`Random.Next(1, 11)`来执行此操作，但是 1 到 10 之间的每个值是否具有相同的发生概率？

例如，范围是 10，所以 2147483646 不能完全被 10 整除，所以值 1-6 出现的概率略高（因为`2147483646 % 10 = 6`）。这当然是假设`Random.Next()`[没有重载] 中的每个值都以相等的概率返回 0 到 2147483646 之间的值。

如何确保一个范围内的每个数字都有相同的出现概率？假设对于彩票类型系统，某些人比其他人拥有更高的概率是不公平的，我并不是说我会为此使用 RNG 中内置的 C#，我只是将其用作示例。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-16T17:47:28.673

我注意到没有人真正回答了您帖子中的重要问题：

> 例如，范围是 10，因此 2147483646 不能完全被 10 整除，因此值 1-6 出现的概率稍高（因为 2147483646 % 10 = 6）。这当然是假设 Random.Next() [没有重载] 中的每个值都以相等的概率返回 0 到 2147483646 之间的值。
> 
> 如何确保一个范围内的每个数字都有相同的出现概率？

是的，所以你只需丢弃导致不平衡的值。例如，假设您有一个可以在 上产生均匀分布的 RNG `{ 0, 1, 2, 3, 4 }`，并且您想用它来在 上产生均匀分布`{ 0, 1 }`。天真的实现是：从中提取`{0, 1, 2, 3, 4}`然后返回值`% 2`；然而，这显然会产生有偏差的样本。发生这种情况是因为，正如您所注意到的，`5`（项目的数量）不能被 2 整除。因此，相反，抛出任何产生 value 的平局`4`。因此，该算法将是

```
 draw from { 0, 1, 2, 3, 4 }
 if the value is 4, throw it out
 otherwise, return the value % 2 
```

您可以使用这个基本思想来解决一般问题。

> 但是，1 到 10 之间的每个值是否具有相同的发生概率？

是的，它确实。来自[MSDN](http://msdn.microsoft.com/en-us/library/ts6se2ek.aspx)：

> **从一组有限的数字中以相等的概率**选择伪随机数。

编辑：显然文档与 .NET 中的当前实现不一致。文档说明抽签是统一的，但代码表明它不是。但是，这并不能否定这是一个可以解决的问题，我的方法是解决它的一种方法。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-16T17:37:05.930

如您所料，RNG 中内置的 C# 是一个均匀分布的 C#。给定您为 指定的范围，每个数字都有相同的发生可能性`Next(min, max)`。

您可以自己测试（我有），例如，采集 1M 个样本并存储每个数字实际出现的次数。如果你绘制它，你会得到一条几乎平坦的曲线。

另请注意，每个数字具有相同的可能性**并不意味着每个数字将出现相同的次数。**如果您正在查看从 1 到 10 的随机数，在 100 次迭代中，它不会是每个数字出现 10 次的均匀分布。有些数字可能出现 8 次，而另一些数字可能出现 12 或 13 次。然而，随着更多的迭代，这往往会有所平衡。

此外，由于评论中提到了它，我会补充一点：如果你想要更强大的东西，请查找加密 PRNG。Mersenne Twister 在我所见的情况下特别好（速度快、计算成本低、周期长），并且它在 C# 中具有开源实现。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-04-16T17:37:22.623

*测试程序：*

```
var a = new int[10];
var r = new Random();
for (int i = 0; i < 1000000; i++) a[r.Next(1, 11) - 1]++;
for (int i = 0; i < a.Length; i++) Console.WriteLine("{0,2}{1,10}", i + 1, a[i]); 
```

*输出：*

```
1 99924
 2 100199
 3 100568
 4 100406
 5 100114
 6 99418
 7 99759
 8 99573
 9 100121
10 99918

```

*结论：*

每个值都以相等的概率返回。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-16T17:56:33.613

Ashes 和 dtb 是不正确的：您怀疑某些数字比其他数字更有可能发生是正确的。

当您调用 时`.Next(x, y)`，有 y - x 个可能的返回值。.NET 4.0`Random`类根据的返回值计算返回值`NextDouble()`（这是稍微简化的描述）。

显然，可能的 double 值的集合是有限的，而且，正如您所注意到的，它可能不是 的可能返回值集合的大小的倍数`.Next(x, y)`。因此，假设这组输入值*是*均匀分布的，那么一些输出值出现的概率会稍大一些。

我不知道有多少数字双精度值（即，不包括无穷大和 NaN 值），但它肯定大于 2^32。在您的情况下，如果我们假设 2^32 个值，那么我们必须将 4294967296 个输入映射到 10 个输出。某些值的发生概率会大 429496730 / 429496729，或者大 0.00000023283064397913028110629%。事实上，由于输入状态的数量*大于*2^32，因此概率差异会更小。

# sql - 订购方式：在 LIKE 之前返回 unLIKE？

> ID：10178838
> 
> 赞同：5
> 
> 时间：2012-04-16T17:32:56.830
> 
> 标签：sql, sqlite

这应该很容易，但我有一点时间。为什么 ORDER BY with LIKE 将匹配结果排序为高于不匹配的值？为了得到我期望的结果，我必须在其他相同的数据上混合 ASC 和 DESC：

```
create table foo (name text);
select name from foo order by name like 'm%' desc, name; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-16T17:37:25.960

"x" like 'm%' 是 FALSE；像 'm%' 这样的“车队”是 TRUE；“假”<“真”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T17:37:24.553

你可以用`union`这个...

```
select name from foo where name like 'm%' 
order by name desc
union all 
select name from foo where name not like 'm%' 
order by name asc 
```

它会根据您的要求给出结果.. :)

* * *

在第二个联合选择查询中添加了 asc ......只是为了更容易理解的语句......没有这个（ASC）也查询应该给出期望的结果..

# ruby - 通过rails控制台保存文本文件中的文本

> ID：10178839
> 
> 赞同：1
> 
> 时间：2012-04-16T17:32:59.127
> 
> 标签：ruby, database, ruby-on-rails-3, creation, rails-console

就像标题一样-我想通过rails控制台将文本文件的内容保存在数据库中（以及其他一些东西）-怎么做？

我正在通过以下方式进入rails控制台： `rails c` 然后我应该这样做

```
`MyItem.create! body: content_from_my_text_file, field1: '123', field2: 'abc' 
```

但是如何强制 Rails 控制台从文件中读取并将内容写入数据库？有没有简单的解决方案？请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T18:12:57.120

您不需要rails来读取文件。您可以使用`IO.read(path)`.

你应该阅读更多关于它的信息：

*   [http://www.ruby-doc.org/core-1.9.3/IO.html](http://www.ruby-doc.org/core-1.9.3/IO.html)
*   [http://www.ruby-doc.org/core-1.9.3/File.html](http://www.ruby-doc.org/core-1.9.3/File.html)

# c# - 稍作修改的 Jquery 选择器选项

> ID：10178860
> 
> 赞同：0
> 
> 时间：2012-04-16T17:34:55.247
> 
> 标签：c#, jquery, asp.net, ajax, json

我正在 asp.net 中开发一个讨论面板，其中我使用带有两个类的 jquery 选择器选项

```
 $("#plblDisAgreeProblem", "plblDisAgreeComment").click(function(){
var str = {
            problemID: $("#problemID").val(),
            empID : $("#empID").val(),
            commentID : -1
        }
        $.ajax({

            type: "GET",
            url: "<%= Url.Action("GetStatus", "Discussion") %>",
            data: str,
            error: function(msg){
                    alert("error2" + msg);
                },
                success: function (msg) {

                  var out = msg.split("<br/>");
                  if (out[1] == "DisAgree: True")
                  {
                        alert("You are already disagree to this problem.");
                  }
                  else
                  {

                }
            });

        }) 
```

我想如果 div 的类是“plblDisAgreeProblem”，那么在 JSon 中的 commentID 应该是 -1，如果 div 的类是“plblDisAgreeComment”，那么在 JSon 中的 commentID 应该是 this.id，但我该怎么做呢？

请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T17:41:15.747

使用这个 is() 函数：

```
commentID : $(this).is(".plblDisAgreeProblem") ? -1 : this.id 
```

我相信这应该可行（无法从我现在所在的位置进行测试）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T17:41:33.450

首先让我们修复类选择器中缺少的点.. 见下文，

```
$("#plblDisAgreeProblem", ".plblDisAgreeComment").click(function(){ 
```

然后您可以使用 hasClass 函数检查单击的元素是否来自指定的类..见下文，

```
 var str = {
        problemID: $("#problemID").val(),
        empID : $("#empID").val(),
        commentID : -1
    }

   if ($(this).hasClass('plblDisAgreeComment') {
       str.commentID = this.id;
   } 
```

我们不需要，`else if of ('plblDisAgreeProblem')`因为它默认为 -1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T17:36:27.070

```
$("#plblDisAgreeProblem", ".plblDisAgreeComment").click(function(e) {
  ....
  ....

  if(this.className == 'plblDisAgreeComment') {
     str.commentID = this.id;
  } else {
   // do other
  }
  ......
  ......
}); 
```

类选择器缺少点 (.)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T19:18:18.017

这应该可以解决问题：（也修复了几个语法错误）

```
$("#plblDisAgreeProblem", ".plblDisAgreeComment").click(function() {
    var str = {
        problemID: $("#problemID").val(),
        empID: $("#empID").val(),
        commentID: $(this).hasClass('plblDisAgreeComment') ? this.id : -1
    };
    $.ajax({
        type: "GET",
        url: "<%= Url.Action("GetStatus", "Discussion") %>",
        data: str,
        error: function(msg) {
            alert("error2" + msg);
        },
        success: function(msg) {
            var out = msg.split("<br/>");
            if (out[1] == "DisAgree: True") {
                alert("You are already disagree to this problem.");
            } else {}
        });
    });
}); 
```

速度参考：

[jQuery .hasClass() 与 .is()](https://stackoverflow.com/questions/4901553/jquery-hasclass-vs-is)

# iphone - 是否可以在 cellForRowAtIndexPath 之外的 UITableViewCell 上刷新 UIView

> ID：10178862
> 
> 赞同：0
> 
> 时间：2012-04-16T17:35:02.117
> 
> 标签：iphone, uitableview

我将 UIView 放在 UITableViewCell 上，用于绘制自定义视图，例如简单的图表视图。然后，一旦有新数据出现，我就会尝试刷新 UIView。但它不起作用。我想知道我这样做的方式是否正确。或者还有另一种刷新 UIView 的方法。

```
Here is code fragment.

   UITableViewCell *cell = (UITableViewCell*)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil)
    {

        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] autorelease];   
        cell.selectionStyle = UITableViewCellSelectionStyleNone;
//

        graphView = [[ChartView alloc] initWithFrame:CGRectMake(290, 5, 18, 36)];                                 
        [cell.contentView addSubview:graphView];
        [graphView release];

         nameLabel                      = [[UILabel alloc] initWithFrame:CGRectMake(10.0, 0.0, 105.0, 45.0)];
        [cell.contentView addSubview:nameLabel];
        [StockNameLabel release];

}

....

..
return cell;
}

- (void)realTimeData:(NSMutableDictionary *)data {  <--- its a call back method

             NSIndexPath *cellIndexPath =  [NSIndexPath indexPathForRow:i inSection:0];  
            UITableViewCell  *cell = [m_InterestTableView cellForRowAtIndexPath:cellIndexPath];
            ChartView *chartView =  (ChartView*)[cell.contentView.subviews objectAtIndex:0];
            [chartView initWithPrices:sPrice withcPrice:cPrice withlPrice:lPrice withhPrice:hPrice];

}

ChartView

- (void) refreshScreen{    
      [self setNeedsDisplay];
}

- (void)drawRect:(CGRect)rect
{
    //get graphic context
    CGContextRef context = UIGraphicsGetCurrentContext();
     CGContextClearRect(context, rect);

    CGContextSetLineWidth(context,2.0f);
    CGContextSetShouldAntialias(context, NO);
    CGContextMoveToPoint(context,x1,y1);
    CGContextAddLineToPoint(context,x2, y2);
    [RGB(r,g, b) set];
    CGContextStrokePath(context);

    CGContextAddRect(context,fillArea);
    [RGB(r, g, b) set];
    CGContextFillPath(context);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T18:02:43.727

如果您可以访问 ChartView 实例，然后调用`refreshScreen`，它应该会刷新视图。从提供的代码中，我没有看到发生这种情况的证据。事实上，看起来你正在尝试初始化一个已经初始化的 ChartView，这总是坏消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T18:09:11.230

该方法`tableView:cellForRowAtIndexPath:`是您自己实现的方法。它创建一个新的表格单元格，用于指定的索引路径。它不会也应该返回一个现有的（不再使用的电池回收除外）。

所以你基本上有两个选择：

1.  保留对稍后将更新的表格单元格的引用。然后，一旦有新数据到达，您就可以直接更新它。这有点棘手，因为您需要检测表格单元格是否已移出视图并被回收以用于不同的表格行。

2.  要求表格视图重新加载影响单元格：

    ```
    NSIndexPath *cellIndexPath =  [NSIndexPath indexPathForRow:i inSection:0];
    [tableView beginUpdates];
    [tableView reloadRowsAtIndexPaths: [NSArray arrayWithObjects: cellIndexPath , nil] withRowAnimation: UITableViewRowAnimationNone];
    [tableView endUpdates]; 
    ```

    然后表格视图将调用`tableView:cellForRowAtIndexPath:`您可以使用最新数据创建新单元格的位置。

# jquery - jQuery 显示下一个父 div

> ID：10178868
> 
> 赞同：5
> 
> 时间：2012-04-16T17:35:34.350
> 
> 标签：jquery, jquery-selectors

我有以下 HTML 标记：

```
<div id="step1" class="step">
                    <h1>Enter code</h1>
                    <p><input type="text" value="<%= @groupCode %>" name="group_code" class="span3" />
                        <a class="btn btn-primary btn-medium">
                            Next &raquo;
                        </a>
                    </p>
                </div>
                <div id="step2" class="step" style="display: none">
                    <p>Hello World</p>
                </div> 
```

单击链接 ( `.btn`) 后，我需要显示下一个父 div ( `#step2`)。我将其设计为注册过程，因此将有多个父 div（均以 step{:id} 命名）

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-16T17:38:29.223

你应该能够使用类似的东西：

```
//This should access the parent (step1), then the next element (step2)
$(this).parent().next() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T17:39:02.397

```
jQuery('.btn').click(function(){
    jQuery(this).closest('.step').next().show();
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-16T17:39:27.877

```
$(function(){
  $(".step a.btn").click(function(){
   var item= $(this);
   item.parent().parent().next().show();
  });
}); 
```

如果你想隐藏当前一个并显示下一个带有一些淡入淡出效果，你可以这样做

```
$(function(){   
  $(".step a.btn").click(function(){
   var item= $(this);
      item.parent().parent().fadeOut(400,function(){
        item.parent().parent().next(".step").fadeIn(300);
      });
  });
}); 
```

这是一个例子：http: [//jsfiddle.net/Jm7fW/15/](http://jsfiddle.net/Jm7fW/15/)

# django - 每个模型对象的 Celery 任务。跟踪进度的最简洁方式

> ID：10178874
> 
> 赞同：0
> 
> 时间：2012-04-16T17:36:11.430
> 
> 标签：django, celery, django-celery

我有分布式硬件传感器节点，这些节点将被 celery 任务询问。每个传感器节点都有一个关联的对象，保存最近的读数和配置数据。

我永远不想超过一个 celery 任务来询问单个传感器节点。但是请求可能会在节点仍在处理之前的请求时询问节点。

我在任何 celery 文档中都没有看到任何此类任务跟踪的示例。但我认为这是一个相当普遍的要求。

我的第一个想法是在任务开始和结束时使用类似 task_in_progress 的标志来标记模型对象。

任务实例化中有什么东西可以用来更好地实现我的任务跟踪吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T22:44:46.347

您想要的是锁定给定资源上的任务，Celery 上有一个非常好的示例。

总结该示例建议使用缓存键来持有锁，任务将在启动之前检查锁键（您可以生成特定于实例的缓存键，如“sensor-%(id)s”）并仅在缓存时执行未设置密钥。

例子。

```
def check_sensor(sensor_id):
    if check_lock_from_cache(sensor_id):
        ... handle the lock ...
    else:
        lock(sensor_id)
        ... use the sensor ...
        unlock(sensor_id) 
```

你可能真的想确保正确解锁（除了最后尝试）

这是芹菜示例[http://ask.github.com/celery/cookbook/tasks.html#ensuring-a-task-is-only-executed-one-at-a-time](http://ask.github.com/celery/cookbook/tasks.html#ensuring-a-task-is-only-executed-one-at-a-time)

# python - 如何使用带有 Qt4 和 Python 的降价制作编辑器？

> ID：10178875
> 
> 赞同：0
> 
> 时间：2012-04-16T17:36:11.850
> 
> 标签：python, qt4, pyqt4, markdown, rtf

我想制作一个小型桌面编辑器来记笔记，它使用降价来快速格式化文本。应用程序应立即或在单击按钮后转录降价。

为此，我想使用 Qt4 和 Python。

在您看来，最有效的方法是什么？

在按下按钮后呈现富文本的情况下，我想我可以使用 QTextEdit 小部件作为编辑模式，但是用什么来显示富文本呢？我想让这个看起来不错。我应该在 HTML 中呈现文本吗？或者是其他东西？

请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T17:47:18.017

你可以看看[ReText](https://github.com/retext-project/retext)是如何做到的。甚至 ReText 也可能是您想要编写的应用程序 :-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-25T21:56:26.587

我来到这里是因为我正在寻找相同任务的解决方案。

这是我会（或希望会）尝试的方法：

*   子类`QTextEdit`，可以显示纯文本和富文本。
*   提供两个字符串属性，一个包含 Markdown 源，另一个包含生成的 HTML。
*   进入“编辑模式”（但是你的 UI 会处理这个）
    *   `self.setText(self.markdown)`
    *   `self.setReadOnly(False)`
*   离开“编辑模式”：
    *   `self.markdown = self.toPlainText()`
    *   `self.toHtml() # convert self.markdown to self.html`
        `# don't know yet how to achieve that`
    *   `self.setHtml(self.html)`
    *   `self.setReadOnly(True)`

为了显示 HTML，可以使用 CSS 样式表。
作为我可以想象的UI界面：点击只读*显示*模式切换到编辑模式，[Ctrl]-[Enter]触发HTML生成。

# mysql - 用于 ODBC 驱动程序的 Microsoft OLE DB 提供程序错误

> ID：10178881
> 
> 赞同：0
> 
> 时间：2012-04-16T17:36:47.723
> 
> 标签：mysql, iis, odbc, oledb

我收到以下错误。

用于 ODBC 驱动程序的 Microsoft OLE DB 提供程序错误“80040e21”

ODBC 驱动程序不支持请求的属性。

C:\Local_Path/tblPlaylist.asp，第 4 行

我已经在 IIS 中设置了网站

代码中的第 4 行是

```
rs.Open "SELECT numPlaylistID FROM `tbl_playlist-page` WHERE numPageID=" & Cint(numPageID), dbConn, 1, 2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T14:56:20.567

一个可能的原因是正在指定的游标类型。调用`1`中的表示键集[游标类型](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681771%28v=vs.85%29.aspx)(adOpenKeySet)。这可能会导致 0x80040e21 错误，具体取决于底层驱动程序。您可以尝试将其更改为另一个值作为测试（例如，更改为 0 表示仅向前游标）。`Open`

# swing - 使 JXTreeTable 可编辑

> ID：10178882
> 
> 赞同：4
> 
> 时间：2012-04-16T17:36:49.090
> 
> 标签：swing, swingx, jxtreetable

谁能提供一个如何使 JXTreeTable 可编辑的具体示例？具体来说，我想让一列中的所有单元格都可编辑。开箱即用似乎不支持此功能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T06:48:59.970

`JXTreeTable`具有常规的所有功能，`JTable`因此您可以使用[`setCellEditor`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html#setCellEditor%28javax.swing.table.TableCellEditor%29)和[`setDefaultEditor`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html#setDefaultEditor%28java.lang.Class,%20javax.swing.table.TableCellEditor%29)方法。因此，开始寻找可编辑的具体示例，`JTable`您可以（或多或少）使用相同的代码

# ruby-on-rails - RoR 可以访问和监控客户端本地机器上的外部硬盘驱动器吗？

> ID：10178884
> 
> 赞同：0
> 
> 时间：2012-04-16T17:36:58.657
> 
> 标签：ruby-on-rails

我正在尝试构建基于 Web 的文件归档应用程序（如 Apple Time Machine），它可以监视外部硬盘驱动器，并且在添加文件/文件夹时，它会将文件路径写入数据库，以便以后搜索。因此，如果用户在此日期“04/16/12”将此文件夹“我的文件夹”添加到外部高清“驱动器 1”，并且需要在以后找到该文件夹​​或其内容，他们可以搜索名称、日期或驱动器名称并返回相应的结果。

这是否可以使用 RoR 或者我必须使用另一种语言或两者的组合？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T18:36:47.777

Ruby 可以访问本地系统，有关可能的磁盘 IO 操作的一些示例，请参见此处：

[http://www.tutorialspoint.com/ruby/ruby_input_output.htm](http://www.tutorialspoint.com/ruby/ruby_input_output.htm)

显然，这意味着 ruby​​ 必须在本地磁盘上运行。理论上，RoR 可以与 vanilla ruby​​ 代码一起用于此目的，只要它都在本地运行。然而，为某些软件使用设置 Web 服务器似乎很麻烦。

有关不适用于 Web 应用程序的 Ruby 框架的讨论，请参阅此问题：

[Ruby App MVC 框架（非 Web）](https://stackoverflow.com/questions/1681820/ruby-app-mvc-framework-not-web)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T18:17:06.713

不，Ruby on Rails 是一个 Web 框架。您需要使用一些客户端，例如 Objective-C、C++ 甚至 Java。

# eclipse - TestNG 测试用例不能在 Eclipse 中自动编译

> ID：10178887
> 
> 赞同：3
> 
> 时间：2012-04-16T17:37:00.203
> 
> 标签：eclipse

我有一个 Maven 项目作为 General --> 现有工作区导入到我的 Eclipse 中。当我编写新的测试文件或编辑现有的测试文件时，该文件似乎不会自动构建。我的构建路径是正确的，并且测试输出文件夹位于 \target\test-classes

这里有什么帮助吗？

# node.js - 连接到 mongodb

> ID：10178889
> 
> 赞同：-1
> 
> 时间：2012-04-16T17:37:07.000
> 
> 标签：node.js

代码：

```
 var Db = require('mongodb').Db,
        Server = require('mongodb').Server,
        Client = new Db('test', new Server('127.0.0.1', 52235, {})) 
```

在功能：...

```
 Client.open(function(err, pClient) {
        Client.collection('test_insert', function(err, collection){
            collection.find().toArray(function(err, results) {
                console.log(results);
            });
        });
        // etc.
     }); 
```

这显示错误：无法读取未定义的属性 'arbiterOnly' 你能帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T17:47:45.223

出现此错误是因为它无法连接到服务器，因此没有正确接收到配置信息。可能您使用了错误的端口：尝试 27017。

# objective-c - 如何动态地用部分和行填充 UITableView？

> ID：10178895
> 
> 赞同：0
> 
> 时间：2012-04-16T17:37:46.013
> 
> 标签：objective-c, uitableview, rows, sections

我对 UITableView 和部分/行有一些问题。我正在从 xml 中解析每个部分的部分名称、所有行名称和行数。

我有 3 个 NSMutableArrays：

nameArray（包含所有行名称） sectionArray（所有部分名称） secCountArray（每个部分的行数）

为了使 cellForRowAtindexPath 工作，我是否必须返回显示部分的行？我要做的下一步是构建一个二维数组，其中包含部分和每个部分的所有行。

有谁知道更好的解决方案？

代码如下：

```
// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath    *)indexPath
{
static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault     reuseIdentifier:CellIdentifier] autorelease];
    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
}

// Set up the cell
int xmlEntryIndex = [indexPath indexAtPosition: [indexPath length] -1];

//???
cell.textLabel.text = [[theParser.nameArray objectAtIndex: 1]valueForKey:@"name"];

return cell;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-03T08:52:30.440

您可以为整个 tableview 设置一个 _section 数组和一个 _row 数组。

像您的视图控制器.h 文件声明数组

```
NSMutableArray *arrSection, *arrRow; 
```

然后你的 view controller.m 文件粘贴到下面的代码..

```
- (void)viewDidLoad
{
    [super viewDidLoad];
arrSection = [[NSMutableArray alloc] initWithObjects:@"section1", @"section2", @"section3", @"section4", nil];
    arrRow = [[NSMutableArray alloc] init];
[arrSection enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
        NSMutableArray *tempSection = [[NSMutableArray alloc] init];
        [arrSection enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
            [tempSection addObject:[NSString stringWithFormat:@"row%d", idx]];
        }];
        [arrRow addObject:tempSection];
    }];
    NSLog(@"arrRow:%@", arrRow);
}

#pragma mark - Table view data source

-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return [arrSection count];
}

-(NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    return [arrSection objectAtIndex:section];
}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [[arrRow objectAtIndex:section] count];
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell* cell = [tableView dequeueReusableCellWithIdentifier:nil];
    if(!cell)
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:nil];
    cell.textLabel.text = [[arrRow objectAtIndex:[indexPath section]] objectAtIndex:[indexPath row]];
    return cell;
} 
```

此方法不涉及定义和创建您自己的自定义视图。在 iOS 6 及更高版本中，您可以通过定义

```
- (void)tableView:(UITableView *)tableView 
    willDisplayHeaderView:(UIView *)view 
    forSection:(NSInteger)section 
```

委托方法。

例如：

```
- (void)tableView:(UITableView *)tableView willDisplayHeaderView:(UIView *)view forSection:(NSInteger)section
{
    // Background color
    view.tintColor = [UIColor blackColor];

    // Text Color
    UITableViewHeaderFooterView *header = (UITableViewHeaderFooterView *)view;
    [header.textLabel setTextColor:[UIColor whiteColor]];

    // Another way to set the background color
    // Note: does not preserve gradient effect of original header
    // header.contentView.backgroundColor = [UIColor blackColor];
} 
```

你可以看到显示动态部分和行可能对你有帮助..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T19:21:09.133

您可以为整个表格视图设置一个数组。该数组包含每个部分的数组。然后`cellForRowAtIndexPath`可能看起来像：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath    *)indexPath {
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    }

    [[cell textLabel] setText: [[[myArray objectAtIndex: indexPath.section] objectAtIndex: indexPath.row]];
    return cell;
} 
```

我希望这可以帮助您解决问题。

编辑：使用现代的 Objective-C 和 ARC，我会把它写成

```
- (void)viewDidLoad {
    ....
    [self.tableView registerClass:[MyCellClass class] forCellReuseIdentifier:kMyCellIdentifier];
} 
...
- (UITableViewCell*)tableView:(UITableView*)tableView cellForRowAtIndexPath:(NSIndexPath*)indexPath {    

    MyCellClass *cell = [tableView dequeueReusableCellWithIdentifier:kMyCellIdentifier forIndexPath:indexPath];

    cell.textLabel.text = myArray[indexPath.section][indexPath.row];

    return cell;
} 
```

# java - Pattern.compile 没有标志？

> ID：10178897
> 
> 赞同：4
> 
> 时间：2012-04-16T17:38:09.317
> 
> 标签：java, regex

我在文档中找不到这个。我需要启用不区分大小写，但仅在特殊情况下。

如何`Pattern.compile(String regex, int flags)`以等效于的方式调用该方法`Pattern.compile(String regex)`？我可以用`Pattern.compile("my regex", 0)`吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-16T17:39:44.747

是的 -`Pattern.compile(foo)`最终只是返回`Pattern.compile(foo, 0)`。

如果文档真的这么说会很好，但这就是我刚刚看到的实现......

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-16T17:42:02.533

> 我可以用`Pattern.compile("my regex", 0)`吗？

是的。[javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#compile%28java.lang.String%29)说_

> flags - 匹配标志，可能包括 CASE_INSENSITIVE、MULTILINE、DOTALL、UNICODE_CASE、CANO​​N_EQ、UNIX_LINES、LITERAL、UNICODE_CHARACTER_CLASS 和 COMMENTS 的位掩码

0 is the bitmask containing no bits.

* * *

> I need to enable case insensitivity, but only in special cases.

There are a few different kinds of [case-sensitivity](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#UNICODE_CASE) available with `Pattern`.

For more fine-grained control over case-sensitivity, you might need to do your own case folding or collation.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-16T17:40:07.957

[代码为`Pattern.compile(String regex)`](http://www.docjar.com/html/api/java/util/regex/Pattern.java.html)（第1021 行及以下）：

```
public static Pattern compile(String regex) {
    return new Pattern(regex, 0);
} 
```

代码`Pattern.compile(String regex, int flags)`是：

```
public static Pattern compile(String regex, int flags) {
    return new Pattern(regex, flags);
} 
```

所以是的。

# database - 如何减少 SQL Server CE 中数据库的增长？

> ID：10178904
> 
> 赞同：0
> 
> 时间：2012-04-16T17:38:44.730
> 
> 标签：database, size, sql-server-ce

我有一个 468 MB 的数据库。

我删除了所有表，这个数据库的大小是一样的。

为什么这个数据库的大小是一样的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T18:20:16.240

您需要`Shrink`或`Compact`数据库来回收数据库文件中的空白空间。

请参阅此博客文章：[SqlCeEngine/ISSCEEngine：Shrink Vs Compact](http://blogs.msdn.com/b/sqlservercompact/archive/2007/10/26/sqlceengine-issceengine-shrink-vs-repair.aspx)

# ruby-on-rails - OSX Lion - 无法安装 Postgres gem

> ID：10178911
> 
> 赞同：1
> 
> 时间：2012-04-16T17:39:30.267
> 
> 标签：ruby-on-rails, postgresql, gem, osx-lion

我不确定发生了什么——我知道 Postgres 在升级到 Lion 后可以正常工作，但它不再工作了。我安装了 Xcode 4。

错误：

```
$ gem install pg -- --with-pg-config=/usr/bin/pg_config
Building native extensions.  This could take a while...
ERROR:  Error installing pg:
    ERROR: Failed to build gem native extension.

        /Users/Me/.rvm/rubies/ruby-1.9.2-p318/bin/ruby extconf.rb --with-pg-config=/usr/bin/pg_config
Using config values from /usr/bin/pg_config
checking for libpq-fe.h... *** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/Users/Me/.rvm/rubies/ruby-1.9.2-p318/bin/ruby
    --with-pg
    --without-pg
    --with-pg-dir
    --without-pg-dir
    --with-pg-include
    --without-pg-include=${pg-dir}/include
    --with-pg-lib
    --without-pg-lib=${pg-dir}/lib
    --with-pg-config
/Users/Me/.rvm/rubies/ruby-1.9.2-p318/lib/ruby/1.9.1/mkmf.rb:368:in `try_do': The complier failed to generate an executable file. (RuntimeError)
You have to install development tools first.
    from /Users/Me/.rvm/rubies/ruby-1.9.2-p318/lib/ruby/1.9.1/mkmf.rb:452:in `try_cpp'
    from /Users/Me/.rvm/rubies/ruby-1.9.2-p318/lib/ruby/1.9.1/mkmf.rb:853:in `block in find_header'
    from /Users/Me/.rvm/rubies/ruby-1.9.2-p318/lib/ruby/1.9.1/mkmf.rb:693:in `block in checking_for'
    from /Users/Me/.rvm/rubies/ruby-1.9.2-p318/lib/ruby/1.9.1/mkmf.rb:280:in `block (2 levels) in postpone'
    from /Users/Me/.rvm/rubies/ruby-1.9.2-p318/lib/ruby/1.9.1/mkmf.rb:254:in `open'
    from /Users/Me/.rvm/rubies/ruby-1.9.2-p318/lib/ruby/1.9.1/mkmf.rb:280:in `block in postpone'
    from /Users/Me/.rvm/rubies/ruby-1.9.2-p318/lib/ruby/1.9.1/mkmf.rb:254:in `open'
    from /Users/Me/.rvm/rubies/ruby-1.9.2-p318/lib/ruby/1.9.1/mkmf.rb:276:in `postpone'
    from /Users/Me/.rvm/rubies/ruby-1.9.2-p318/lib/ruby/1.9.1/mkmf.rb:692:in `checking_for'
    from /Users/Me/.rvm/rubies/ruby-1.9.2-p318/lib/ruby/1.9.1/mkmf.rb:852:in `find_header'
    from extconf.rb:40:in `<main>'

Gem files will remain installed in /Users/Me/.rvm/gems/ruby-1.9.2-p318/gems/pg-0.13.2 for inspection.
Results logged to /Users/Me/.rvm/gems/ruby-1.9.2-p318/gems/pg-0.13.2/ext/gem_make.out 
```

编辑*** 我尝试通过自制软件安装 postgres 并收到以下错误：

```
Warning: You have no /usr/bin/cc.
This means you probably can't build *anything*. You need to install the Command
Line Tools for Xcode. You can either download this from http://connect.apple.com
or install them from inside Xcode's Download preferences. Homebrew does not
require all of Xcode! You only need the Command Line Tools package!
Warning: Setting DYLD_LIBRARY_PATH can break dynamic linking.
You should probably unset it.
Warning: Your Homebrew is outdated
You haven't updated for at least 24 hours, this is a long time in brewland!
Warning: Unbrewed dylibs were found in /usr/local/lib.
If you didn't put them there on purpose they could cause problems when
building Homebrew formulae, and may need to be deleted.

Unexpected dylibs:
    /usr/local/lib/libruby.1.8.7.dylib
Warning: Unbrewed static libraries were found in /usr/local/lib.
If you didn't put them there on purpose they could cause problems when
building Homebrew formulae, and may need to be deleted.

Unexpected static libraries:
    /usr/local/lib/libruby-static.a
Warning: Your compilers are different from the standard versions for your Xcode.
If you have Xcode 4.3 or newer, you should install the Command Line Tools for
Xcode from within Xcode's Download preferences.
Otherwise, you should reinstall Xcode.
Warning: /usr/bin occurs before /usr/local/bin
This means that system-provided programs will be used instead of those
provided by Homebrew. The following tools exist at both paths:

    bundle
    edit_json.rb
    erb
    erubis
    gem
    irb
    prettify_json.rb
    rails
    rake
    rake2thor
    rdoc
    ri
    ruby
    testrb
    thor
    tt
    update_rubygems

Consider amending your PATH so that /usr/local/bin
is ahead of /usr/bin in your PATH.
Warning: Your Xcode is configured with an invalid path.
You should change it to the correct path. Please note that there is no correct
path at this time if you have *only* installed the Command Line Tools for Xcode.
If your Xcode is pre-4.3 or you installed the whole of Xcode 4.3 then one of
these is (probably) what you want:

    sudo xcode-select -switch /Developer
    sudo xcode-select -switch /Applications/Xcode.app/Contents/Developer 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T18:00:05.130

尝试强制 pg gem 使用 64 位 libpg 版本进行构建。

`ARCHFLAGS='-arch x86_64' gem install pg`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T17:46:54.960

查看以下博客文章：[在带有 RoR 的 Mac OS X (Tiger) 上使用 MySQL 和 Postgres](http://fusionspan.blogspot.com/2012/03/using-mysql-and-postgres-on-mac-os-x.html)

# c++ - codegen matlab to c++ :- 尝试构建基于 c++ 的 .exe 而不是 c 时出现问题？

> ID：10178913
> 
> 赞同：1
> 
> 时间：2012-04-16T17:39:45.320
> 
> 标签：c++, c, matlab, matlab-coder, codegen

我在使用 codegen 时遇到了一些问题（通过 gui 界面）。

我已经基于以下两个文件成功构建了一个非常简单的基于 c 的 .exe 程序。

码兰德.m

```
function r = coderand() %#codegen
r = rand(); 
```

主程序

```
#include <stdio.h>
#include <stdlib.h>
#include "coderand.h"
int main()
{
  printf("coderand=%g\n", coderand());
  return 0;
} 
```

如果我现在尝试将 main.c 更改为 main.cpp 中的相同代码，

主文件

```
#include <stdio.h>
#include <stdlib.h>
#include "coderand.h"

void main(int argc, char **argv)
{
  printf("coderand=%g\n", coderand());
} 
```

我收到以下编译错误。

```
main.obj : error LNK2019: unresolved external symbol "double __cdecl coderand(void)" (?coderand@@YANXZ) referenced in function _main 25 F:\CoderTest\coderand.exe : fatal error LNK1120: 1 unresolved externals 
```

非常感谢任何帮助。

编辑： - 自己解决...

对于那些遇到同样问题的人...

编码器 -> 更多设置 -> 所有设置 -> 高级 -> 语言..将 C 更改为 C++

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T17:42:21.003

C++ 可以毫无困难地调用 C 函数，您只需让编译器知道 C 调用约定适用于该函数，如下所示：

```
extern "C" {
#  include "coderand.h"
} 
```

# css - 这个用于“视网膜”显示器的 CSS 精灵解决方案有什么缺点吗？

> ID：10178916
> 
> 赞同：5
> 
> 时间：2012-04-16T17:39:53.310
> 
> 标签：css, css-sprites, retina-display

我的想法，假设你从一个 200x200 的精灵开始（意味着双分辨率图像是 400x400）是这样的：

```
.sprite {
    background-image:url('1x.png');
    background-repeat: no-repeat;
    background-size: 200px 200px;
}

@media only screen and (-webkit-min-device-pixel-ratio: 2) {
    .sprite {
        background-image:url('2x.png');
    }
} 
```

现场示例： http: [//ov3rkill.com/temp/a5dii52/](http://ov3rkill.com/temp/a5dii52/)

我一直在努力确定提供更高分辨率图像的最佳方法（以前我将所有图像分开并单独调整它们的大小），坦率地说，这似乎太简单了。

任何人都可以看到任何潜在的缺点吗？我正在玩弄这个以供生产使用，到目前为止它似乎有效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T20:10:40.973

由于在加载时调用了针对视网膜的媒体查询，因此它应该覆盖原始调用以加载小图像。在视网膜显示器上使用这种方法时，我从未目睹过低分辨率图像闪烁。

有没有人使用 JS 来确认较小的图像加载到视网膜显示器上？我很想知道。

# php - 从非常慢的外部数据源获取大量数据

> ID：10178917
> 
> 赞同：3
> 
> 时间：2012-04-16T17:39:59.677
> 
> 标签：php, javascript, jquery, asynchronous, queue

我需要从外部来源接收大量数据。问题是外部源发送数据非常慢。工作流程是这样的：

1.  用户从应用程序界面启动一些过程（通常是从本地 xml 文件中获取数据）。这是一个相当快的过程。
2.  之后，我们需要加载与从外部源获取的数据相关的信息（基本上是来自 xml 的数据的外部统计信息）。而且速度很慢。但用户需要此附加信息才能继续工作。例如，他可以根据外部数据或其他东西进行过滤。

所以，我们需要异步进行。主要思想是在外部数据可用时显示它。问题是我们如何组织这个异步过程？也许是一些问题或其他什么？我们使用 php+mysql 作为后端，使用 jquery 作为前端。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T18:10:06.470

您的两种可能的策略是：

1.  **在后端进行流式传输**，使用 PHP 脚本将大型外部资源卷曲到数据库或内存缓存中，并通过将该数据库行或缓存刷新到响应中来响应对新数据的周期请求。

2.  **[使用此答案](https://stackoverflow.com/questions/6558129/process-a-continuous-stream-of-json)中解释的跨浏览器 JavaScript 技术**在前端进行流式传输**。在 Gecko 和 WebKit 中，`XmlHttpRequest.onreadystatechange`每次接收到新数据时都会触发该事件，从而可以将数据缓慢地流式传输到 JavaScript 运行时。在 IE 中，您需要使用 iframe 解决方法，在上述 SO 帖子中链接的[Ajax 模式文章中也进行了说明。](http://ajaxpatterns.org/HTTP_Streaming)**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T18:13:45.770

一种可能的解决方案是使用`system()`在文件中重定向的输出进行 cURL 调用。因此 PHP 在调用完成之前不会挂起。来自 PHP 手册`system()`：

> 如果使用此函数启动程序，为了使其继续在后台运行，程序的输出必须重定向到文件或另一个输出流。否则将导致 PHP 挂起，直到程序执行结束。

这将拆分从用户界面收集的数据。然后，您可以通过多种方式处理收集到的本地数据，例如：

*   在 GUI 中使用 iFrame，它会在一定间隔内刷新自身并从本地存储的文件中获取数据（并可能将其存储在数据库中或其他任何地方），
*   使用 jQuery 进行 AJAX 调用以获取数据并对其进行操作，
*   使用一些将在后台运行的 CGI 脚本并处理数据库写入，并直接使用数据库中的上述之一显示数据，
*   还有几十个我现在想不起来了……**

# javascript - 将画布标签转换为 HTML

> ID：10178921
> 
> 赞同：-1
> 
> 时间：2012-04-16T17:40:22.310
> 
> 标签：javascript, html, canvas, html5-canvas

我有以下代码工作，但我想在我的代码中添加一个画布。当我尝试将它直接添加到它时，`<body>`它给了我一个错误。

**我需要为画布创建另一个表单还是有其他方法可以将画布标记添加到 html 标记？**

第二个代码添加了画布标签，在函数中`tracks()`我添加了一些代码来绘制一些图形。第二个代码也给出了错误。

第一段代码说明：

1.  首先，我有一个字符串数组，比如 1 c2 c4 等。1 是第一个。而 c1 c4 是连接。

2.  `split()`然后，我使用and `substring()`in从 c1 和 c4 中提取 1 和 4`test()`

3.  接下来，我有两个数组，`sbray[]`并且`op[]`. sbray 包含所有的没有。在左侧附加 c，而`op[]`包含 no。在右侧附加 c。

4.  现在我`sbray[]`先将其保存到一个中`Obj{}`然后对其进行排序。排序后的索引保存在`A[]`. 使用这些索引，我`ob[]`对. 实际上，我试图先对左连接进行排序，然后使用我对右连接进行排序的索引。`oin[]``op[]``oup[]`

5.  最后，我连接各自的左右连接并计算它们之间的轨道数。

在第二个代码中，唯一的变化是我试图绘制一些矩形和线条来表示管道和连接。

```
 <html>
    <head>
    <title> JavaScript Array from Input</title>
    <script type="text/javascript">

    var array = new Array();
    var sbray= new Array();
    var op = new Array();
    var oup= new Array();
    var oin= new Array();

    function insert(val)
    {
        array[array.length]=val;
        show();
    }

    function show() 
    {
        var string="<b>All Element of the Array :</b><br>";
        for(i = 0; i < array.length; i++) 
        {
            string = string+array[i]+"<br>";
        }
        if(array.length > 0)
            document.getElementById('myDiv').innerHTML = string;
    }

    function display()
    {
        if(i=array.length)
            var string1="total no. of connections is "+i +"<br>";
        for(i = 0; i < array.length; i++)
        {
            var temp=array[i].split(" ");
            sbray[i]=eval(temp[1].substring(1,temp[1].length));
            op[i]=eval(temp[2].substring(1,temp[2].length));

        }
        document.getElementById('myDiv').innerHTML = string1;
    }

    function keysbyValue()
    { 
        var Ob= sbray.slice();
        var A= []; 

        for(var p in Ob)
        { 
            if(Ob.hasOwnProperty(p)) A.push([p, Ob[p]]); 
        } 
        A.sort(function(a, b)
        { 
            var a1= a[1], b1= b[1]; 
            return a1-b1; 
        }); 

        for(var k= 0, L= A.length; k<L; k++)
        { 
            A[k]= A[k][0]; 
            var tmp=A[k];
            oin[k]=Ob[tmp];
            oup[k]=op[tmp];
        }             
     } 

     function tracks()
     {
         var a=0;
         var j=0;
         var m;
         var resm= "total no. of tracks used ";
         var must="<b>All Elements of the Array :</b><br>";

         for ( m=0;m<array.length;m++)
         {
           if(oin[m+1] > oup[m])
               a++;
           else
               j++;        
         }

         if(j<6)
              continue;
         else
         {
              alert("you exceeded the no. of tracks, only 6 tracks available!");
              break;        
         }        
         must =must+array[0]+"<br />"+array[1]+"<br />"+array[2]+"<br />"+  resm +j+"<br />";
         document.getElementById('myDiv').innerHTML = must;        
    }        
    </script>        
    </head>          
    <body>          
    <h2>JavaScript Array from Input</h2>         
    <form name="form1">          
    <table width="40">          
    <tr>          
    <td width="154" align="right"><b>input</b>          
    <td width="9"><b>&nbsp;:</b>          
    <td width="224">          
    <input type="text" name="name"/>          
    </tr>          
    <tr>          
    <td width="154" align="right">          
    <td width="9">          
    <td width="224">          
    </tr>          
    <tr>          
    <td width="154" align="right">          
    <td width="9">          
    <td width="224">          
    <input type="button" Value="Add Into Array" 
     onclick="insert(this.form.name.value)"/>        
    <input type="button" Value="next" 
     onclick="display();"/>        
    <input type="button" Value="show results" 
     onclick="keysbyValue(),tracks();"/>        
    </tr>          
    </table>          
    </form>          
    <div id="myDiv"></div>          
    </body>        
    </html> 
```

我认为我定义标签并从javascript调用它的方式存在一些错误。

```
<!DOCTYPE html>
<html>
<head>
<title> JavaScript Array from Input</title>
<script type="text/javascript">

var array = new Array();
var sbray= new Array();
var op = new Array();
var oup= new Array();
var oin= new Array();

function insert(val)
{
    array[array.length]=val;
    show();
}

function show() 
{
    var string="<b>All Element of the Array :</b><br>";
    for(i = 0; i < array.length; i++) 
    {
        string = string+array[i]+"<br>";
    }
    if(array.length > 0)
        document.getElementById('myDiv').innerHTML = string;
}

function display()
{
    if(i=array.length)
        var string1="total no. of connections is "+i +"<br>";
    for(i = 0; i < array.length; i++)
    {
        var temp=array[i].split(" ");
        sbray[i]=eval(temp[1].substring(1,temp[1].length));
        op[i]=eval(temp[2].substring(1,temp[2].length));    
    }
    document.getElementById('myDiv').innerHTML = string1;
}

function keysbyValue()
{ 
    var Ob= sbray.slice();
    var A= []; 

     for(var p in Ob)
     { 
         if(Ob.hasOwnProperty(p)) A.push([p, Ob[p]]); 
     } 
     A.sort(function(a, b)
     { 
         var a1= a[1], b1= b[1]; 
         return a1-b1; 
     }); 

     for(var k= 0, L= A.length; k<L; k++)
     { 
         A[k]= A[k][0]; 
         var tmp=A[k];
         oin[k]=Ob[tmp];
         oup[k]=op[tmp];                    
     }         
 } 

function tracks()
{
    var a=0;
    var j=0;
    var m;
    var resm= "total no. of tracks used ";
    var must="<b>All Elements of the Array :</b><br>";

    //here I have added the canvas code.
    var c=document.getElementById("myCanvas");
    var ctx=c.getContext("2d");
    ctx.fillStyle="#FFFF00";
    ctx.fillRect(0,0,1000,75);
    ctx.fillStyle = '#003300';
    ctx.font = 'bold 20px ariel';
    ctx.textBaseline = 'bottom';
    ctx.fillText('1', 5, 115);
    ctx.fillText('2', 5, 145);
    ctx.fillText('3', 5, 175);
    ctx.fillText('4', 5, 205);
    ctx.fillText('5', 5, 235);
    ctx.fillText('6', 5, 265);    
    ctx.fillStyle = '#003300';
    ctx.font = 'bold 30px ariel';
    ctx.textBaseline = 'bottom';
    ctx.fillText('1', 15, 50);
    ctx.fillText('2', 65, 50);
    ctx.fillText('3', 115,50);
    ctx.fillText('4', 165, 50);
    ctx.fillText('5', 215, 50);
    ctx.fillText('6', 265, 50);
    ctx.fillText('7', 315, 50);
    ctx.fillText('8', 365, 50);
    ctx.fillText('9', 415, 50);
    ctx.fillText('10', 460, 50);
    ctx.fillText('11', 510, 50);
    ctx.fillText('12', 560, 50);
    ctx.fillText('13', 610, 50);
    ctx.fillText('14', 660, 50);
    ctx.fillText('15', 710, 50);
    ctx.fillText('16', 760, 50);
    ctx.fillText('17', 810, 50);
    ctx.fillText('18', 860, 50);
    ctx.fillText('19', 910, 50);
    ctx.fillText('20', 960, 50);

    ctx.beginPath();
    ctx.moveTo(0,75);
    ctx.lineTo(1000,75);
    ctx.stroke();
    for(var i=50;i<1050;i=i+50)
    {
        ctx.moveTo(i,0);
        ctx.lineTo(i,75);
        ctx.stroke();
    }   
    for ( m=0;m<array.length;m++)
    {    
        if(oin[m+1] > oup[m])
            a++;
        else
            j++;    
    }

    if(j<6)
        continue;
    else
    {
        alert("you exceeded the no. of tracks, only 6 tracks available!");
        break;    
    }          
    must =must+array[0]+"<br />"+array[1]+"<br />"+array[2]+"<br />"+  resm +j+"<br />";
    document.getElementById('myDiv').innerHTML = must;    
}    
</script>    
</head>      
<body>      
<h2>JavaScript Array from Input</h2>     
<form name="form1">      
<table width="40">      
<tr>      
<td width="154" align="right"><b>input</b>      
<td width="9"><b>&nbsp;:</b>      
<td width="224">      
<input type="text" name="name"/>      
</tr>     
<tr>      
<td width="154" align="right">      
<td width="9">      
<td width="224">      
</tr>
<tr>      
<td width="154" align="right">      
<td width="9">      
<td width="224">      
<input type="button" Value="Add Into Array" 
 onclick="insert(this.form.name.value)"/>    
<input type="button" Value="next" 
 onclick="display();"/>    
<input type="button" Value="show results" 
 onclick="keysbyValue(),tracks();"/>    
</tr>      
</table>      
</form>      
<div id="myDiv"></div>    
<canvas id="myCanvas" width="1000" height="300" style="border:2px solid #c3c3c3;">
Your browser does not support the canvas element.
</canvas>         
</body>    
</html> 
```

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T17:48:45.473

您在 for 或 switch 循环之外有一个“继续”语句。那很糟。

您还有一个非法的“中断”声明，可能应该是一个回报。

我将您的代码的那部分重写为：

```
for (m = 0; m < array.length; m++) {
    if (oin[m + 1] > oup[m]) a++;
    else j++;
}

if (j > 6) {
    alert("you exceeded the no. of tracks, only 6 tracks available!");
    return;
}​ 
```

画布工作得很好。工作示例：http: [//jsfiddle.net/AcWU7/](http://jsfiddle.net/AcWU7/)

# c# - 全局热键 - C#

> ID：10178925
> 
> 赞同：0
> 
> 时间：2012-04-16T17:40:33.207
> 
> 标签：c#, keyboard-shortcuts, keyboard-hook

我已经构建了一个应用程序，它侦听全局热键（当前为 Alt + Space），当我在 Google Chrome 处于焦点时按下热键时，它会使我的应用程序成为焦点，但也会打开 Chrome 的上下文菜单（右键菜单）。我使用以下 dll 来[实现键盘挂钩](http://www.codeproject.com/Articles/7294/Processing-Global-Mouse-and-Keyboard-Hooks-in-C)。

我可以防止这种情况发生吗？如果有怎么办？这不是一个主要问题，但如果有一种方法可以清除与该组合相关的所有现有热键，那么我想学习这一点。

**编辑**

我选择的正确答案是正确的答案，但对于我的问题。为了在 C# WinForm 中正确实现此功能，我使用了非常有帮助的本教程：[http ://www.dreamincode.net/forums/topic/180436-global-hotkeys/](http://www.dreamincode.net/forums/topic/180436-global-hotkeys/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T17:47:46.123

链接文章的常见问题部分包含您的答案：

> **问题**
> 
> 在处理完一些击键后，我需要抑制它们。
> 
> **回答**
> 
> 只需将`e.Handled`属性设置为`true`您已处理的关键事件。它可以防止其他应用程序处理击键。

# c# - webservice设置的可变内容

> ID：10178926
> 
> 赞同：1
> 
> 时间：2012-04-16T17:40:34.573
> 
> 标签：c#, wpf, wcf, rest

我有一个休息服务，其中有一个组列表，每个组都有一个 GroupName，在我的客户端，我试图将这些 GroupName 添加到变量 groupbox 的列表中（组框的数量取决于我的休息组服务中有多少 GroupName ) 任何人都可以帮助编写代码吗？：

```
 string uriGroups = "http://localhost:8000/Service/Group";
        XDocument xDoc = XDocument.Load(uriGroups);
        var groups = xDoc.Descendants("Group")
        .Select(n => new
        {
            GroupBox groupbox = new GroupBox();
            groupbox.Header = String.Format("Group #{0}", n.Element("GroupName");
            groupbox.Width = 100;
            groupbox.Height = 100;
            groupbox.Margin = new Thickness(2);

            StackPanel stackPanel = new StackPanel();
            stackPanel.Children.Add(groupbox);
            stackPanel.Margin = new Thickness(10);

            MainArea.Children.Add(stackPanel);
        } 
```

这是不正确的，我只是坚持如何去做。

编辑：

```
 public Reports()
    {
        InitializeComponent();

        string uriGroups = "http://localhost:8000/Service/Group";
        XDocument xDoc = XDocument.Load(uriGroups);
        foreach(var node in xDoc.Descendants("Group"))
        {

            GroupBox groupbox = new GroupBox();
            groupbox.Header = String.Format("Group #{0}", node.Element("Name")); 
            groupbox.Width = 100;
            groupbox.Height = 100;
            groupbox.Margin = new Thickness(2);

            StackPanel stackPanel = new StackPanel();
            stackPanel.Children.Add(groupbox);
            stackPanel.Margin = new Thickness(10);

            MainArea.Children.Add(stackPanel);
        }

    }
    public static IEnumerable<T> ForEach<T>(this IEnumerable<T> enumerable, Action<T> action)
    {
        foreach (var item in enumerable)
            action(item);

        return enumerable;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T17:53:54.703

1）您不应该使用 LINQ`Select`扩展来遍历集合并做某事；它只能用于将元素转换为新形式。如果你想做这样的事情，要么只使用一个`foreach`语句，要么创建一个新的 LINQ 扩展来处理枚举，如下所示：

```
 public static IEnumerable<T> ForEach<T>(this IEnumerable<T> enumerable, Action<T> action)
  {
       foreach(var item in enumerable)
           action(item);

       return enumerable;
  } 
```

2）上面的代码不应该编译，因为它在语法上被破坏了。您尝试做的是创建一个新的匿名类型（`new { }`）。由于您没有在此对象上创建属性，而是尝试执行随机代码行（这是不允许的），因此这是无效的。制作匿名类型时，您会执行以下操作：

```
 Enumerable.Range(0, 10).Select(x => new { Number = x });
 // Creates a series of 10 objects with a Number property 
```

3）听起来您只需将代码重构为适当的代码即可完成此操作。除了非编译部分之外，我没有看到您遇到的特定问题。

# css - 可以使用 CSS 来根据元素在 DOM 中的顺序设置元素的样式吗？

> ID：10178928
> 
> 赞同：2
> 
> 时间：2012-04-16T17:41:13.700
> 
> 标签：css, css-selectors

我需要在元素上添加样式，但该元素没有类或 id，我也不能编辑该部分代码以在其上放置类或 id。

在 jQuery 中，我会使用 .eq[4] 或其他东西来选择它，但我只能使用 CSS。

所以问题是 - 我可以在第二个 <tr> 中设置第二个 <td> 的样式吗？

```
<table class="tableClass">
    <tr>
        <td>...</td>
        <td>...</td>
        <td>...</td>
    </tr>
    <tr>
        <td>...</td>
        <td> I NEED TO STYLE THIS ONE </td>
        <td>...</td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T17:42:39.860

您可以使用`:nth-child()`，但您需要将它与the*及*其父级一起*使用*：`td` *`tr`*

 *```
.tableClass > tr:nth-child(2) > td:nth-child(2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T21:46:04.727

这是另一种方法，它也适用于 IE7 和 IE8，以获得更好的兼容性：

```
.tableClass tr + tr > td + td {
  /* selects 2nd to last td from 2nd to last rows.
     Do something here with some CSS instructions of your choice.
     Beware of thead and th, they aren't expected in your example */
}
.tableClass tr + tr > td + td + td,
.tableClass tr + tr + tr > td + td {
  /* selects 3rd to last td from 2nd to last rows and also
     2nd to last td from 3rd to last rows.
     Cancel here everything you did in previous CSS rule! */
} 
```

*   `td + td`选择除第一个之外的所有内容，`td`并`td + td + td`选择除第一个和第二个之外的所有内容`td`：使用 2 个 CSS 规则就完成了。您的示例中增加了复杂性，因为您还需要考虑行，但您只需将后一个选择器规则与`tr + tr + tr`选择器结合起来。
*   这是替换的绝妙技巧，`:not(:first-child)`值得了解；当它变得像您的示例中那样复杂时，由您决定是否使用它。
*   当您处理不同的元素时，`+`可以用（一般兄弟）替换，例如 h3 然后是 p 然后是 h4 然后再是 p。`~`这里没有`p + p`，但仍然有`p ~ p`.
*   上面的代码不管在and`tbody`之间是否有一个元素都有效，因为它不希望每个元素都是 的子元素，而只是一个后代元素。`table``tr``tr``table`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T17:44:00.420

当然，使用`nth-child`选择器。在这种情况下，

```
table tr:nth-child(2) td:nth-child(2) 
```

这是一个[很好的解释](http://css-tricks.com/how-nth-child-works/)这是如何工作的。*

# objective-c - iPad/iPhone 方向问题

> ID：10178931
> 
> 赞同：0
> 
> 时间：2012-04-16T17:41:21.463
> 
> 标签：objective-c, ios, interface-builder, orientation, xcode4.3

我意识到有很多与此问题有关的问题，但是我还没有找到一个可以解决我的问题的问题。

首先，我在 menu.h 中设置了此代码

```
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {    
return YES; } 
```

状态栏随方向而变化，但视图不会旋转或调整大小。为了尝试缩小我的问题，我决定尝试根据方向在一个 .xib 中切换两个视图

```
 - (void)viewDidLoad {
    [super viewDidLoad];

    [[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(orientationChanged:) name:@"UIDeviceOrientationDidChangeNotification" object:nil];
     }
    -(void) orientationChanged:(NSNotification *)object
{
   UIDeviceOrientation deviceOrientation = [[object object] orientation];

    if (deviceOrientation == UIDeviceOrientationLandscapeLeft || deviceOrientation == UIDeviceOrientationLandscapeRight)
    {
        self.view = self.landscapeView;
    }
    else 
    {
        self.view = self.portraitView;
    }
} 
```

在 iOS 模拟器中，视图肯定会更改为特定视图。然而，横向视图显示为纵向和横向。

我在 IB 的风景 ![在此处输入图像描述](../Images/a32869c754ce5b8da144df10e212e5bf.png)

更改方向后我在 iOS 模拟器中的横向视图 ![在此处输入图像描述](../Images/4e47a319f3d368ec7be542a0b1e50457.png)

我在这里做错了什么？我无法弄清楚，任何帮助将不胜感激。先感谢您。** 编辑：下面的新代码 ** 好的.. 我的问题是视图在横向中正确加载，它只是横向的。所以横向视图加载，只是横向。我基于@Seega 修改的代码是：

```
- (void)viewDidLoad {
    [super viewDidLoad];
    [[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(orientationChanged:) name:@"UIDeviceOrientationDidChangeNotification" object:nil];

    [[TTNavigator navigator] setCustomTarget:self];
    [[TTNavigator navigator] setCustomAction:@selector(photoAction)];
}

- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
    if (toInterfaceOrientation == UIDeviceOrientationLandscapeLeft || toInterfaceOrientation == UIDeviceOrientationLandscapeRight)
    {
        self.view = self.landscapeView;
    }
    else 
    {
        self.view = self.portraitView;
    }
}

-(void) orientationChanged:(NSNotification *)object
{
    UIDeviceOrientation deviceOrientation = [[object object] orientation];

    if (deviceOrientation == UIDeviceOrientationLandscapeLeft || deviceOrientation == UIDeviceOrientationLandscapeRight)
    {
        self.view = self.landscapeView;
    }
    else 
    {
        self.view = self.portraitView;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T18:42:04.420

我建议将您的代码放入：

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration 
```

而不是制作新方法。如果 shouldAutorotateToInterfaceOrientation 方法对该旋转返回 YES，这将被自动调用。

UIDeviceOrientation 和 UIInterfaceOrientation 之间也存在差异，因此请确保引用正确的。您现有的代码将更改为以下内容：

```
if (toInterfaceOrientation == UIInterfaceOrientationLandscapeLeft || toInterfaceOrientation == UIInterfaceOrientationLandscapeRight)
{
    self.view = self.landscapeView;
}
else 
{
    self.view = self.portraitView;
} 
```

您还可以使用宏来检查界面方向，以保持代码更清晰。

```
if (UIInterfaceOrientationIsLandscape(toInterfaceOrientation)) 
{
    self.view = self.landscapeView;
}
else 
{
    self.view = self.portraitView;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T18:19:28.487

你最好简单地使用

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
 if (toInterfaceOrientation == UIInterfaceOrientationLandscapeLeft || toInterfaceOrientation == UIInterfaceOrientationLandscapeRight)
    {
        self.view = self.landscapeView;
    }
    else 
    {
        self.view = self.portraitView;
    }
} 
```

处理旋转而不是创建自己的旋转。
现在您可以删除所有通知内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T18:19:49.780

你能确定，你选择了所有的方向支持，如下所示。我试过这个，它似乎对我来说工作得很好。

![在此处输入图像描述](../Images/53ab214a9925bc780b56b672e3284b5b.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T20:09:17.670

**主意！！！**

如果您在界面构建器中设置视图，然后切换视图旋转时显示的实际视图，那么您需要在该特定方向构建该视图，而不仅仅是调整其大小以适应方向。

要检查这一点：

*   在 Interface Builder 中打开您的 .xib。
*   单击对象下的“视图”，以便选择整个视图。
*   查看 IB 右侧的“模拟指标”下方。确保在“方向”下拉菜单中选择“横向”。

如果您的视图对要表示您的 LandscapeView 的视图显示“纵向”，那么可能是 xcode 正在将您的横向视图旋转为纵向并弄乱您的演示文稿。

让我知道这是否有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-28T14:07:10.987

嘿，谢谢大家的帮助。我有一个朋友的帮助，我不完全确定问题所在。我可以告诉你我知道他做过的事情。

1.  暂时禁用我们的广告

2.  完全删除了第二个视图并使用原生方向和调整大小

3.  将此添加到几乎每个 .m 文件中。

    ```
    -(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {    
    return YES; 
    ```

    }

4.  以及以编程方式更改了与此类似的其他一些视图

    ```
    -(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation 
    {
         if (interfaceOrientation == UIDeviceOrientationLandscapeLeft || interfaceOrientation == UIDeviceOrientationLandscapeRight)
         {
              if ([UIDevice currentDevice].userInterfaceIdiom == UIUserInterfaceIdiomPhone) 
              {         
                   self.Button.frame = CGRectMake(27,96,86,86);
                   self.Label.frame  = CGRectMake(27,162,86,21);
              }
             else 
             {
                   self.Button.frame = CGRectMake(18,100,86,86);
                   self.Label.frame  = CGRectMake(18,164,86,21);
              }
         }
     } 
    ```

抱歉，我无法完全解释答案，我不完全理解项目中影响方向的所有内容。我对 iOS 开发还是很陌生。

# plone - 决定何时创建新目录的规则是什么？

> ID：10178933
> 
> 赞同：2
> 
> 时间：2012-04-16T17:41:28.020
> 
> 标签：plone

我想了解如何正确使用目录。

我有大约 30 种有用的内容类型、大约 50 个 catalog.xml 中的索引和大约 45 个元数据。只有三种类型占据了网站的大部分数据——我可能需要数百万个。我一直在阅读，还有很多事情要做，但是我想在开始之前先进行基本配置。

[这个页面](http://toutpt.wordpress.com/2008/12/14/archetype_tool-queuecatalog-becareful-with-indexing-with-plones-portal_catalog/)告诉我任何非默认索引都不应该添加到portal_catalog。我什至读过有人解释删除一个或两个默认索引如何产生性能差异。

我的问题是：将索引划分为不同目录以及选择哪些目录索引哪些类型的规则是什么？

到目前为止，我已经创建了一个额外的目录，用于对我的“站点设置”对象的所有索引进行编目（我已经导致不再在 portal_catalog 中编制索引）。站点设置索引经常被使用，但比其他索引更少修改，所以我认为将它们与更频繁地重新索引的对象分开是正确的。我不确定这是否是主要考虑因素。

另一个类似的问题（我想解决的问题的一个很好的例子）：您将如何处理诸如辅助工作流 review_state 变量之类的问题？我给每个工作流的 review_state 变量一个索引（并经常搜索它们），但我的一些工作流仅用于少数类型。（我最多产的对象有辅助工作流程......）

我将非常感谢您的建议！

坎贝尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T01:17:10.950

这不会涵盖所有内容，但我会提出一些观点..

不在portal_catalog 中的任何东西都不适用于集合、folder_contents 视图、getFolderContents 方法、搜索、portlet 集合、相关项目（我认为）以及假设您正在使用portal_catalog 的任何其他东西。

当我需要能够查询数据但它只影响内容对象的子集时，我喜欢使用额外的目录。

使用collective.indexing 来加速索引操作。

将目录挂载在它们自己的挂载点上，这样您就可以将它们与站点的其余部分不同地缓存（这样您就可以缓存整个目录）。然后，您甚至可以从专用 zeoserver 提供目录。

此外，如果您的内容不必通过 portal_catalog 进行编目（列出所有约束），您甚至可能首先需要考虑是否需要将其作为成熟的（原型|灵巧）类型。您可以使用更精简的 repoze.catalog 来对任意对象（可能是非常简单的数据）进行分类，无论您的目的是什么，并获得更高的性能。或者更好的是，查看 Solr 以对其进行索引以获得非常好的性能。

更重要的是，根据您存储的数据类型，您甚至可以考虑使用关系数据库进行数据存储。但我不知道你有什么样的查询、索引、数据等......

30 种不同的类型似乎很多，但我不知道您的用例是什么。愿意分享吗？也许有更好的方法来做到这一点。

# objective-c - NSData 到 NSString 返回 Null

> ID：10178936
> 
> 赞同：15
> 
> 时间：2012-04-16T17:41:42.123
> 
> 标签：objective-c

我已经搜索过了。但是还是拿不到。

我正在将 NSdata 转换为 NSString。当我这样做时`[data description];` ，它会返回我 <00000000 31323334 35363738> 是的，我收到了我的字符串@“12345678”。

如何将其适当地转换为 NSString？我试过了

```
NSString *b = [NSString stringWithUTF8String:[data bytes]];
NSString *a = [[NSString alloc] initWithBytes:[data bytes] length:[data length] encoding:NSUTF8StringEncoding]; 
```

两者都返回我null。任何想法？谢谢

大家好，感谢所有建议。它似乎是恒定的，因此前面总是有一个空字符。所以每当我收到东西时，我只需删除第一个 <00000000>，然后它就可以正常工作了

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-16T17:50:43.240

如果编码不正确，就会发生这种情况。

尝试使用 ASCII 进行测试。ASCII 几乎可以肯定可以检索某种字符串。如果只是数字，它可能会起作用。

```
NSString *a = [[NSString alloc] initWithBytes:[data bytes] length:[data length] encoding:NSASCIIStringEncoding]; 
```

除 UTF-8 编码外，最常见的是：

```
NSASCIIStringEncoding
NSUnicodeStringEncoding
NSISOLatin1StringEncoding
NSISOLatin2StringEncoding
NSSymbolStringEncoding 
```

尝试一下，看看它们是否有效。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-16T17:57:39.233

> 我正在将 NSdata 转换为 NSString。当我做[数据描述]；它返回我 <00000000 31323334 35363738> 是的，我收到了我的字符串@“12345678”。

不——你没有收到那个字符串。您正在接收一个字节序列，该字节序列以一堆 0x00 值开头，然后是一系列恰好对应于 ASCII 序列“12345678”的字节。

即您有原始数据并试图将其转换为受约束的类型，但不能因为受约束的类型不能代表原始数据。

您可以尝试在 NSString 上使用“有损转换”API，但这可能不起作用并且无论如何都会很脆弱。

最好的选择？

仅将 NSData 中实际表示字符串的字节转换为 NSString 的实例。这可以用`-initWithBytes:length:encoding:`; 您需要进行计算以找到正确的偏移量和长度。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-16T17:59:50.337

这可能是因为数据的第一个字节是 00。字符 0 是字符串字符的结尾。当从 ASCII 创建一个字符串时（从一个字符数组或一个字节数组，就像你正在做的那样），当字符 0 在开头遇到时，它会产生一个空字符串。

但是，我希望它返回一个 NSString 的实例，其中包含 0 个字符，而不是 null。

# asp.net - 使用 asp.net 和传递值的会话

> ID：10178946
> 
> 赞同：1
> 
> 时间：2012-04-16T17:42:14.620
> 
> 标签：asp.net

我想知道如何在 asp.net 中使用会话，为此我使用以下代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    string academics = "academics";
    Session["header_value"] = academics;
} 
```

然后我想在下面的代码中使用该值

```
<a href="academics.aspx">
     <%if("header_value"=="academics")
     {%>
          <div id="academics" class="pri-nav active"></div>
     <%}else{%>
          <div id="academics" class="pri-nav"></div>
     <%}%></a> 
```

我还想知道除了会话之外还有其他方法可以将值传递给.cs吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T17:44:18.820

与您在代码隐藏中执行的方式相同：

```
... <%if(Session["header_value"] == "academics") { ... 
```

或者更简洁地说：

```
<a href="academics.aspx">
    <div id="academics"
         class="pri-nav <%=Session["header_value"] == "academics" ? "active" : ""%>"></div>
</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T17:49:23.830

可以在页面上访问受保护或公共变量。

```
protected string ActiveNav = "";
protected void Page_Load(object sender, EventArgs e)
{
    ActiveNav = "academics";
} 
```

和

```
 <a href="academics.aspx">
       <div id="academics" class="pri-nav <%= ActiveNav=="academics"? "active" :"" %> "></div>
   </a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T21:54:15.363

在 aspx 文件中：

```
<%if(get_session()=="academics")
{%>
     <div id="academics" class="pri-nav active"></div>
<%}else{%>
     <div id="academics" class="pri-nav"></div>
<%}%> 
```

在 aspx.cs 文件中：

```
public String get_session() 
{
    string academics = "academics";
    Session["header_value"] = academics;

    return academics;
} 
```

# ant - Ant 包含任务

> ID：10178948
> 
> 赞同：1
> 
> 时间：2012-04-16T17:42:22.317
> 
> 标签：ant, 包含, , ant, include

[ant](/questions/tagged/ant "显示标记为“蚂蚁”的问题")中的基本[包含](/questions/tagged/include "显示标记为“包括”的问题")任务不起作用。我只想在我的自定义构建文件中包含 Eclipse 生成的 build.xml。

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<project basedir="." name="rizotek_server">
    <include file="build.xml"/>
</project> 
```

两个文件都在同一个目录中。

我得到例外。BUILD FAILED build_server.xml:3：问题：未能创建任务或类型包括原因：名称未定义。行动：检查拼写。行动：检查是否已声明任何自定义任务/类型。行动：检查任何/声明已经发生。

我查看了 Ant 教程，我看不出那里的示例与我所做的有任何区别。我究竟做错了什么？感谢大家。基里尔。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T18:53:24.267

导入与包含的结果不同，它们的工作方式也大不相同。因此，如果您需要包含，那么导入可能会解决您的问题，也可能不会。这将取决于您如何使用它，但是这两个语句做的事情非常不同。

确保您使用的是支持包含的 Ant 版本。您使用的版本可能没有。Include 仅在 ant 版本 1.8.0 或更高版本中可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T17:44:20.597

尝试导入任务，例如

```
<!-- importing.xml -->
<project name="importing" basedir="." default="...">
<import file="${path_to_imported}/imported.xml"/>
</project> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-12T16:35:11.340

你有旧版本的 Ant。我通过升级 Ant 解决了这个问题。

# c++ - C++ 头文件和源目录

> ID：10178951
> 
> 赞同：0
> 
> 时间：2012-04-16T17:42:31.310
> 
> 标签：c++, gcc, directory-structure, undefined-reference

我有以下文件：

```
listDriverTest.cpp
src/List.cpp
headers/List.h 
```

List.cpp 中的包含是

```
#include "../headers/List.h" 
```

listDriverTest.cpp 中的包含是

```
#include "headers/List.h" 
```

当我使用以下语句编译时，

```
g++ listDriverTest.cpp "src/List.cpp" 
```

我最终得到了相当多的“未定义参考”错误，例如

```
listDriverTest.cpp:(.text+0x81): undefined reference to `List<int>::List()'
listDriverTest.cpp:(.text+0x8f): undefined reference to `List<int>::add(int)'
listDriverTest.cpp:(.text+0x9d): undefined reference to `List<int>::add(int)'
... 
```

我应该如何正确使用包含和编译这三个文件才能使编译正常工作？我已经让 listDriverTest.cpp 编译并正确运行同一目录中的所有文件，但当它们像这样被分解时却不是。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T17:46:09.233

请参阅我在[模板类的子项也必须是模板类中的回答吗？](https://stackoverflow.com/q/10082225/1238764).

这可能是一个不同的问题，但同样的答案也适用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T18:00:16.403

看起来编译 src/List.cpp 生成的目标文件已经包含特化 List，但它与 listDriversTest.cpp 的目标文件位于不同的目录中。因此，链接器找不到它。

当然，这取决于您如何组织模板代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T17:50:51.760

您的程序在我的机器上正确编译。
只需删除 src/List.cpp 周围的双引号我认为你的问题是别的。

我在 list.cpp 中添加了一个函数 void list(void) ，它打印了“list”。
list.h 中添加了相同的签名。

# google-chrome-extension - 如何读取上下文菜单复选框的值？

> ID：10178954
> 
> 赞同：1
> 
> 时间：2012-04-16T17:43:05.903
> 
> 标签：google-chrome-extension

我正在尝试创建用户可能希望经常启用/禁用的 Chrome 扩展程序。为方便起见，我想在上下文菜单中添加一个复选框，基本上显示“启用扩展”。当页面加载时，它会检查上下文菜单项是否有检查。我已经创建了菜单项，它在整个页面加载过程中保持不变，但我不知道如何读取它的值。谁能帮我吗？

这是我用来将复选框添加到上下文菜单的代码。

```
var checkbox1 = chrome.contextMenus.create({
    "title": "Enable",
    "type": "checkbox",
    "onclick":enableAutofilter
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T18:29:52.437

从 Chrome 文档中，似乎无法读取有关上下文菜单项的信息。有`create`、`update`和`remove`函数，但没有`read`函数（因此它只有三个[CRUD](http://en.m.wikipedia.org/wiki/Create,_read,_update_and_delete)运算符）。这意味着您必须在其他地方保持开/关状态，例如，在您的背景页面和/或 localStorage 中，并在您触发时切换它`enableAutoFilter`。

# visual-studio-2010 - 尝试从 Windows 7 中的 Visual Studio 2010 部署 sharepoint 2010 工作流包时出错

> ID：10178960
> 
> 赞同：0
> 
> 时间：2012-04-16T17:43:38.507
> 
> 标签：visual-studio-2010, sharepoint, sharepoint-2010, sharepoint-workflow, nintex-workflow

我正在尝试在运行 Sharepoint 2010 的 Windows 7 Ultimate x64 机器上从 Visual Studio 2010 部署 Nintex Sharepoint 工作流，但我不断收到此错误：

部署步骤“回收 IIS 应用程序池”中发生错误：此系统上未安装 Microsoft .NET Framework 3.5 SP1。需要执行此操作。

任何想法可能是什么问题或如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T22:29:27.377

我偶然发现了答案。我发现有几个人通过在 Windows 功能中禁用 .NET Framework 3.5.1 来解决类似问题。我关闭了该功能，重新启动并且它可以工作。没有更多的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T09:54:31.817

我认为正如错误所述，您需要在您的机器上安装 Microsoft .Net Framework 3.5 SP1。你可以在这里下载：http: [//www.microsoft.com/download/en/details.aspx?id=22](http://www.microsoft.com/download/en/details.aspx?id=22)

# wcf-data-services - WCF 数据服务类型转换

> ID：10178965
> 
> 赞同：0
> 
> 时间：2012-04-16T17:44:18.757
> 
> 标签：wcf-data-services

我有一个自定义的 ValueObject 类型，如下所示：

```
public class Token
{
   public string Id { get; set; }
} 
```

我有一个类，我想通过 OData 公开它，如下所示：

```
[DataServiceKey("Name")]
public class Record
{
   public Token Token { get; set; }
   public string Name { get; set; }
} 
```

我想提供一个自定义格式化程序/序列化程序/转换器，将我的 Token 类型转换为原始字符串。

我不想仅仅为了使它与 WCF 一起工作而将 Token 变成一个实体。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T01:58:16.103

令牌不需要是实体 - 它可以是带有字符串 ID 的复杂类型。我认为没有办法将一个类型序列化为另一种类型......将它用作复合体有什么问题吗？

# javascript - 比较多个 JSON 数组

> ID：10178969
> 
> 赞同：-1
> 
> 时间：2012-04-16T17:44:24.357
> 
> 标签：javascript, arrays, json

我有 3 个数组，如下所示。我无法控制数组。

```
groups_array = [ {
    "group" : "Mobile Test Region",
    "id" : "251"
}, {
    "group" : "Mobile Demo Region",
    "id" : "252"
} ]
locations_array = [ {
    "location" : "M Testing",
    "id" : "1376"
}, {
    "location" : "Trade Show Machine",
    "id" : "1403"
}, {
    "location" : "M Trailer",
    "id" : "1471"
}, {
    "location" : "Test Los Angeles",
    "id" : "1475"
} ]
pairs_array = [ {
    "location_id" : "1376",
    "group_id" : "251"
}, {
    "location_id" : "1475",
    "group_id" : "251"
}, {
    "location_id" : "1403",
    "group_id" : "252"
}, {
    "location_id" : "1471",
    "group_id" : "252"
} ] 
```

这是我用来遍历pairs_array并检索与组ID对应的location_id的代码。Ti.API.info(pairs_array[s].location_id); 根据使用 e.rowData.groupid 给出的 groupid 输出 2 个位置 ID。

```
for (var s = 0; s < pairs_array.length; s++) {
    if (e.rowData.groupid === pairs_array[s].group_id) {
        Ti.API.info(pairs_array[s].location_id); 
    }
} 
```

我正在尝试使用从 IF 语句中获得的 location_id 比较字符串并检索位置名称。我是否应该将结果推入一个数组并遍历 location_array 和结果并进行比较？如果是这样，我希望看到一个很好的代码片段，因为我尝试过几次都没有得到预期的输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T18:45:57.817

```
for (var s = 0; s < pairs_array.length; s++) {
    if (e.rowData.groupid === pairs_array[s].group_id) {
        Ti.API.info(pairs_array[s].location_id); 

        // find location name
        for(var t = 0; t < locations_array.length; t++)
        {
            if(locations_array[t].id == pairs_array[s].location_id)
            {
                location_name = locations_array[t].location;                        
            }
        }
    }
} 
```

# xml - 带有远程 xml 数据源的 iReport

> ID：10178970
> 
> 赞同：0
> 
> 时间：2012-04-16T17:44:24.577
> 
> 标签：xml, jasper-reports, datasource, ireport

我一整天都被这个困住了。似乎除了纸质文件外没有其他文件。

我正在使用`iReport 4.5.1`.

我想要做的是创建一个带有`remote xml data source`. 这是我到目前为止所做的：

*   从欢迎页面，我进入第一步并创建了一个新的数据源，“远程 XML 文件数据源”。我输入了 URL，没有别的，因为这只是一些字符串数据。XML URL 指向我内部网络上的一台机器，这个 URL 在浏览器中为我提供了 xml 输出。
*   我点击测试。即使我只使用 URL“http://”，它似乎总是报告成功。
*   我转到第 2 步。我选择了我的 dtaa 源，查询文本框消失了。我单击下一步，我没有得到任何字段。

我不应该在`XPath`某处输入查询吗？我搜索了整个`iReport`用户界面，但一无所获。

奇怪的是，我在某个地方找到了一个遇到同样问题的人的帖子。那个帖子没有回复，尽管它是四年前发布的！

一般来说，我可能会在错误的树上吠叫`JasperReports`。但是这个功能，使用远程 XML 数据作为数据源，正是我需要的！通过这样做，我可以将本地 Tomcat 用作数据提供者，并且所有数据库逻辑都将集中在一个地方。

希望有人能帮忙！

吉斯利

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T14:03:26.963

谢谢回复！我的问题的主要原因是 iReport 的查询窗口的默认大小使得从 xml 中提取的字段不可见。当我调整窗口大小时，我可以看到从 xml 中提取的内容。

此外，一开始，我使用的 xml 提要中有空行，导致它不报告任何字段。有点奇怪，虽然测试数据源总是成功的。

再次感谢！吉斯利

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T18:04:44.170

查看本教程[http://www.packtpub.com/article/jasperreports-creating-report-from-xml-data-using-xpath](http://www.packtpub.com/article/jasperreports-creating-report-from-xml-data-using-xpath)

只需按照向导进行操作，进入报告后，单击查询设计器（“预览”和缩放图标之间的类似数据库的图标，选择 xpath2 作为查询语言，然后您可以继续输入您的查询。

# saxon - 我可以告诉 saxon 自己找出 XSLT 版本吗？

> ID：10178973
> 
> 赞同：0
> 
> 时间：2012-04-16T17:44:57.207
> 
> 标签：saxon, command-line-tool

我必须运行一个 XSLT 2.0 样式表`saxonb-xslt`（它会警告 1.0 样式表）和一个 XSLT 1.0 样式表`saxon-xslt`（它不适用于 2.0 样式表）。有没有办法告诉撒克逊人：“这是一个样式表，自己想办法处理它。”？

我想让我的 Makefile 尽可能简单并且尽可能无警告。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T18:35:32.837

Not sure why this question hasn't been answered; you might find it more effective to ask Saxon-specific questions on the Saxon help list (accessible via the project on Sourceforge).

Generally these days I advise people to use a recent Saxon release (9.4) even for processing XSLT 1.0 code, in preference to using the old Saxon 6.5 processor. Yes, it produces a warning - unfortunately the XSLT 2.0 spec requires the warning - but you have to be doing something pretty strange to hit any compatibility problems. If you don't like the warning you can suppress it using -versionmsg:off.

But if you do want to select a different XSLT processor based on the version attribute in the stylesheet, you'll just have to code that logic into your script. This is easy enough if your script is written in an XML-oriented language such as XProc or xmlsh, it's a bit more tricky if you are using a general-purpose shell script.

# sql - 如何在 vb.net 中使用动态列名（使用 Visual Studio 2005）

> ID：10178977
> 
> 赞同：1
> 
> 时间：2012-04-16T17:45:23.313
> 
> 标签：sql, vb.net, ms-access

嗨，我正在创建一个考勤系统，我希望对于用户给出的特定 ID，该 ID 的考勤保存在 MS 访问表中。我想要的是列名应该是我预先创建的日期格式，因为用户输入程序从系统检索日期的 id 并基于该日期（将其作为动态列名）在它们上写一个 p。我正在使用 SQL 查询来更新，即现在使用更新语句我无法找到使用动态列名的正确语法。所以任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T19:45:15.140

如果我理解您在说什么...我会更改您设想的架构，以拥有一个带有“ID”和日期列的表。这可以防止您拥有固定且大量的日期列。

您在此表中为 ID 和日期组合插入新行。

我还假设您想要一个报告，它将您在列位置 0 中具有 ID 并将日期作为列标题的数据进行透视？由于您使用的是 Access，因此您可以创建一个交叉表查询 (pivot) 来完成此操作。

# c#-4.0 - 找出差值最小的两组点？

> ID：10178978
> 
> 赞同：0
> 
> 时间：2012-04-16T17:45:29.330
> 
> 标签：c#-4.0

假设我们有一组 V1= { p0(x0,y0), p1(x1,y1),p2(x2,y2),p3(x3,y3),p4(x4,y4)}

并设置 V2= { M0(x0,y0),.........Mn(xn,yn) }

V1 中的成员数量是恒定的 [ 比如说 5 组点 }

每次调用函数 minDifference() 时，它都应该从 V2 返回一组点，其中与 V1 中的点的差值最小

在此示例中：输出应返回来自 V2 的 5 组点，这些点与 V1 中的点具有最小/最小值差异

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T17:58:01.880

尝试这个：

```
List<Point> V1 = new List<Point>();
V1.Add(new Point(2, 2));
V1.Add(new Point(4, 4));
V1.Add(new Point(6, 6));
V1.Add(new Point(8, 8));
V1.Add(new Point(10, 10));

List<Point> V2 = new List<Point>();
V2.Add(new Point(1, 1));
V2.Add(new Point(3, 3));
V2.Add(new Point(5, 5));
V2.Add(new Point(7, 7));
V2.Add(new Point(9, 9));

List<Point> result = new List<Point>();

foreach (Point p1 in V1)
{
    Point minPoint = Point.Empty;
    double minDist = double.MaxValue;
    foreach (Point p2 in V2)
    {
        double dist = Math.Sqrt(Math.Pow(p1.X - p2.X, 2) + Math.Pow(p1.Y - p2.Y, 2));
        if (dist < minDist)
        {
            minDist = dist;
            minPoint = p2;
        }
    }
    result.Add(minPoint);
} 
```

作为额外的优化，您可以放弃 ，`Math.Sqrt`因为您并不需要确切的距离。

# java - 如何在 Java 中将二进制字符串转换为以 10 为底的整数

> ID：10178980
> 
> 赞同：138
> 
> 时间：2012-04-16T17:45:39.453
> 
> 标签：java, string, binary, radix

我有一个字符串数组，代表二进制数（不带前导零），我想将其转换为相应的以 10 为基数的数字。考虑：

```
binary 1011 becomes integer 11
binary 1001 becomes integer 9
binary   11 becomes integer 3   etc. 
```

最好的方法是什么？我一直在探索 java.lang.number.* 却没有找到直接的转换方法。`Integer.parseInt(b)`产生一个等于字符串的整数...例如，1001 变为 1,001 而不是 9...并且似乎不包括输出基数的参数。`toBinaryString`转换方向错误。我怀疑我需要进行多步转换，但似乎找不到正确的方法或子类组合。我也不确定前导零或缺少前导零会在多大程度上成为问题。有人有什么好的方向可以指点我吗？

* * *

## 回答 #1

> 赞同：341
> 
> 时间：2012-04-16T17:47:23.730

您需要[指定 radix](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#parseInt%28java.lang.String,%20int%29)。有一个过载`Integer#parseInt()`允许你这样做。

```
int foo = Integer.parseInt("1001", 2); 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-04-16T17:56:33.923

这可能有效：

```
public int binaryToInteger(String binary) {
    char[] numbers = binary.toCharArray();
    int result = 0;
    for(int i=numbers.length - 1; i>=0; i--)
        if(numbers[i]=='1')
            result += Math.pow(2, (numbers.length-i - 1));
    return result;
} 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2014-04-15T15:58:54.053

```
int foo = Integer.parseInt("1001", 2); 
```

如果您正在处理正数，则工作正常，但如果您需要处理带符号的数字，您可能需要签署扩展您的字符串，然后转换为 Int

```
public class bit_fun {
    public static void main(String[] args) {
        int x= (int)Long.parseLong("FFFFFFFF", 16);
        System.out.println("x =" +x);       

        System.out.println(signExtend("1"));
        x= (int)Long.parseLong(signExtend("1"), 2);
        System.out.println("x =" +x);

        System.out.println(signExtend("0"));
        x= (int)Long.parseLong(signExtend("0"), 2);
        System.out.println("x =" +x);

        System.out.println(signExtend("1000"));
        x= (int)Long.parseLong(signExtend("1000"), 2);
        System.out.println("x =" +x);

        System.out.println(signExtend("01000"));
        x= (int)Long.parseLong(signExtend("01000"), 2);
        System.out.println("x =" +x);
    }

    private static String signExtend(String str){
        //TODO add bounds checking
        int n=32-str.length();
        char[] sign_ext = new char[n];
        Arrays.fill(sign_ext, str.charAt(0));

        return new String(sign_ext)+str;
    }
}

output:
x =-1
11111111111111111111111111111111
x =-1
00000000000000000000000000000000
x =0
11111111111111111111111111111000
x =-8
00000000000000000000000000001000
x =8 
```

我希望这会有所帮助！

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-12-03T09:50:20.460

```
static int binaryToInt (String binary){
    char []cA = binary.toCharArray();
    int result = 0;
    for (int i = cA.length-1;i>=0;i--){
        //111 , length = 3, i = 2, 2^(3-3) + 2^(3-2)
        //                    0           1  
        if(cA[i]=='1') result+=Math.pow(2, cA.length-i-1);
    }
    return result;
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-10-11T00:09:20.563

```
public Integer binaryToInteger(String binary){
    char[] numbers = binary.toCharArray();
    Integer result = 0;
    int count = 0;
    for(int i=numbers.length-1;i>=0;i--){
         if(numbers[i]=='1')result+=(int)Math.pow(2, count);
         count++;
    }
    return result;
} 
```

我想我更无聊了！修改了哈桑的答案以正确运行。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-08-19T16:22:04.120

对我来说，我在尝试处理负数时得到了 NumberFormatException 。我将以下用于负数和正数。

```
System.out.println(Integer.parseUnsignedInt("11111111111111111111111111110111", 2));      

Output : -9 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-07-01T10:55:28.663

使用 bitshift 比`Math.pow`. 只需将数字（0或1）移位到适当的位置`val <<= 1`

```
// parse an unsigned binary string, valid up to 31 bits
static int binaryToBase10(String binaryString) {
    int val = 0;
    for (char c : binaryString.toCharArray()) {
        val <<= 1;
        val += c-'0';
    }
    return val;
} 
```

**示例使用**

```
int val = binaryToBase10("1011");
System.out.println(val); 
```

打印 11

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-06-16T20:03:45.280

修复了 java 的 Integer.parseInt(text) 版本以使用负数：

```
public static int parseInt(String binary) {
    if (binary.length() < Integer.SIZE) return Integer.parseInt(binary, 2);

    int result = 0;
    byte[] bytes = binary.getBytes();

    for (int i = 0; i < bytes.length; i++) {
        if (bytes[i] == 49) {
            result = result | (1 << (bytes.length - 1 - i));
        }
    }

    return result;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-12-23T01:51:58.583

现在你想从二进制字符串到十进制但后记，你可能需要相反的方法。它在下面。

```
public static String decimalToBinaryString(int value) {
    String str = "";
    while(value > 0) {
        if(value % 2 == 1) {
            str = "1"+str;
        } else {
            str = "0"+str;
        }
        value /= 2;
    }
    return str;
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-01-07T12:05:36.347

如果给定字符串，您也可以使用此方法将二进制转换为十进制整数。（Java 语言）

```
static int binaryTodecimal(String s){
    int i= -1;
    char[] str = s.toCharArray();
    int dec_val= 0;

    for (int j=str.length-1; j>=0 ;j-- ){
        int k= Integer.valueOf(str[j]) - '0';
        i = i+1;
        dec_val += k*(Math.pow(2, i));

    }
    System.out.println(dec_val);
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-11-20T05:31:59.643

我喜欢循环！耶！

```
String myString = "1001001"; //73 
```

带累加器的while循环，从左到右（`l`不变）：

```
int n = 0,
    j = -1,
    l = myString.length();
while (++j < l) n = (n << 1) + (myString.charAt(j) == '0' ? 0 : 1);
return n; 
```

从右到左有 2 个循环变量，灵感来自[Convert boolean to int in Java](https://stackoverflow.com/q/3793650/2371861)（绝对可怕）：

```
int n = 0,
    j = myString.length,
    i = 1;
while (j-- != 0) n -= (i = i << 1) * new Boolean(myString.charAt(j) == '0').compareTo(true);
return n >> 1; 
```

一个更合理的实现：

```
int n = 0,
    j = myString.length(),
    i = 1;
while (j-- != 0) n += (i = i << 1) * (myString.charAt(j) == '0' ? 0 : 1);
return n >> 1; 
```

一个可读的版本：p

```
int n = 0;
for (int j = 0; j < myString.length(); j++) {
    n *= 2;
    n += myString.charAt(j) == '0' ? 0 : 1;
}
return n; 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2017-02-28T16:40:06.333

如果你担心性能，`Integer.parseInt()`而且`Math.pow()`太贵。您可以使用位操作以两倍的速度执行相同的操作（根据我的经验）：

```
final int num = 87;
String biStr = Integer.toBinaryString(num);

System.out.println(" Input Number: " + num + " toBinary "+ biStr);
int dec = binaryStringToDecimal(biStr);
System.out.println("Output Number: " + dec + " toBinary "+Integer.toBinaryString(dec)); 
```

在哪里

```
int binaryStringToDecimal(String biString){
  int n = biString.length();      
  int decimal = 0;
  for (int d = 0; d < n; d++){
    // append a bit=0 (i.e. shift left) 
    decimal = decimal << 1;

    // if biStr[d] is 1, flip last added bit=0 to 1 
    if (biString.charAt(d) == '1'){
      decimal = decimal | 1; // e.g. dec = 110 | (00)1 = 111
    }
  }
  return decimal;
} 
```

输出：

```
 Input Number: 87 toBinary 1010111
Output Number: 87 toBinary 1010111 
```

# unity3d - 用于清理 Unity 垃圾文件目录的批处理文件

> ID：10178983
> 
> 赞同：2
> 
> 时间：2012-04-16T17:45:50.753
> 
> 标签：unity3d

Unity 创建了一堆垃圾二进制文件。据我了解，很多这些文件都是临时的，是不必要的。是否已经编写了可以删除这些文件的批处理脚本？如果不是，哪些文件可以安全删除，哪些文件对场景文件的完整性至关重要？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-11-07T01:53:05.867

这是为任何想要现在工作的批处理文件的人准备的。Unity 会在您的保存中生成大量垃圾文件，我强烈建议您在每次保存项目备份时运行此脚本。

说明：将代码复制并粘贴到批处理文件中。将批处理文件放在你的统一项目文件中运行文件，阅读说明，按几次回车，等待，一切都完成了！您刚刚节省了 30-50 mb 的磁盘空间！

```
@echo off
echo %cd%
echo "this will delete some files within the directory above!  Make sure unity is not running!"
pause
echo "are you sure you would like to do this?"
pause
rd /s /q Library
rd /s /q Temp
del /s /q /f *.csproj
del /s /q /f *.pidb
del /s /q /f *.unityproj
del /s /q /f *.DS_Store
del /s /q /f *.sln
del /s /q /f *.userprefs
echo "done."
pause 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T11:59:17.583

您可以忽略这些文件扩展名以实现统一

```
*.csproj
*.pidb
*.unityproj
*.DS_Store
*.sln
*.userprefs 
```

以及下面的任何东西

```
<PATH TO PROJECT>/Library/*
<PATH TO PROJECT>/Temp/* 
```

只要确保它们不与非统一项目冲突；）

如果您将其用于版本控制，请保留您的元文件。

如果您只是不希望组中的其他 Perforce 用户获取它们，而不是制作批处理文件来删除它们，只需将这些类型的行添加到您的工作区（将路径和 CLIENT 交换为正确的）

```
-//depot/foo/*.csproj //CLIENT/foo/*.csproj
-//depot/foo/.../*.pidb //CLIENT/foo/.../*.pidb 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-17T11:42:20.657

如果你想按文件扩展名清理文件（比如目录结构中的所有文件），你可以在 osx 和 linux 上`.tmp`实现这一点。`find`

例如

```
find . -name "*.tmp" -exec rm {} \; 
```

如果您知道临时生成的文件的扩展名（或名称），您可以通过这种方式删除它们。

# java - JComboBox 的问题

> ID：10178984
> 
> 赞同：4
> 
> 时间：2012-04-16T17:45:50.830
> 
> 标签：java, swing, jcombobox

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.ItemEvent;
import java.awt.event.ItemListener;

public class Test1{
    JComboBox combo;
    JTextField txt;

    public static void main(String[] args) {
        Test1 b = new Test1();
    }

    public Test1(){
        String degrees[] = {"AAS1","AAS2","AAS1","AAS3"};
        JFrame frame = new JFrame("Creating a JComboBox Component");
        JPanel panel = new JPanel();

        combo = new JComboBox(degrees);
        combo.setEditable(true);
        combo.setBackground(Color.gray);
        combo.setForeground(Color.red);

        txt = new JTextField(10);
        txt.setText("1");

        panel.add(combo);
        panel.add(txt);
        frame.add(panel);

        combo.addItemListener(new ItemListener(){
            public void itemStateChanged(ItemEvent ie){
                txt.setText(String.valueOf(combo.getSelectedIndex()+1));
            }
        });

        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(400,400);
        frame.setVisible(true);

    } } 
```

从上面的代码可以看出。我有 4 个项目的 JComboBox。如果没有相同的项目，一切正常。

但在我的示例中 ("AAS1","AAS2","AAS1","AAS3") 第一项和第三项是相同的，在这种情况下我遇到了问题。当我选择任何项目时，我想在 JTextField 中获取它的索引，但是当我选择第三个项目时，我得到第一个项目的索引。有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T18:24:17.920

那是因为 JComboBox 使用 equals 来检查项目是否相等。在您的情况下，这两个 String 相等，因此它返回匹配的第一个索引。如果你真的需要这样做，你可能需要像这样定义自己的项目类：

```
private static class MyItem {
    private String value;

    public MyItem(String value) {
        this.value = value;
    }

    public String getValue() {
        return value;
    }

    @Override
    public String toString() {
        return value; //this is what display in the JComboBox
    }
} 
```

然后像这样添加项目：

```
MyItem degrees[] = {new MyItem("AAS1"),new MyItem("AAS2"),new MyItem("AAS1"),new MyItem("AAS3")};
JComboBox combo = new JComboBox(degrees); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T18:16:39.360

创建一个这样的类：

```
class ComboItem{

    private String name;

    public ComboItem(String name){
        this.name = name;
    }

    public String toString() {
        return name;
    }
} 
```

并创建您的组合框：

```
comboBox = new JComboBox(new ComboItem[]{
    new ComboItem("AAS1"),
    new ComboItem("AAS2"),
    new ComboItem("AAS1"),
    new ComboItem("AAS3")
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T17:56:19.180

尝试`combo.getSelectedItem()`改用。由于它在字符串数组中有两个不同的字符串，因此您应该能够进行参考比较并区分两者之间的区别。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T17:48:39.800

您必须区分如何在`String`s 项和有效表示上计算等号。我认为这可以通过为您的目的创建一个特定的类并使用它来代替`String`.

由于这可能是作业，我不会给出确切的结果，只需考虑`JComboBox`内部如何选择指定的索引。

# mysql - MySQL 表创建错误（语法对我来说很好）

> ID：10178986
> 
> 赞同：1
> 
> 时间：2012-04-16T17:46:01.413
> 
> 标签：mysql

谁能弄清楚我在这里做错了什么？错误信息相当模糊......

```
16-Apr-2012 17:36:42] WordPress database error You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 24 for query CREATE TABLE wp_psadata(
    id INTEGER(10) UNSIGNED AUTO_INCREMENT,
    date_entered TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    submitter_name VARCHAR(255),
    submitter_email VARCHAR(255),
    submitter_phone VARCHAR(255),
    event_name VARCHAR(255),
    location_name VARCHAR(255),
    address VARCHAR(255),
    city VARCHAR(255),
    state VARCHAR(255),
    zipcode VARCHAR(5),
    phone VARCHAR(255),
    email VARCHAR(255),
    uri VARCHAR(255),
    event_start_date DATE,
    event_start_time TIME,
    event_end_date DATE,
    event_end_time TIME,
    recurs_on_dow TINYINT,
    description VARCHAR(4000),
    comments VARCHAR(4000), 
    active TINYINT DEFAULT 1,
    wants_reach_at_event TINYINT DEFAULT 0 made by activate_plugin, do_action, call_user_func_array, psa_activate, dbDelta 
```

使用：SQLite 版本 2.8.17 - 3.7.4 / PHP 版本 5.3.6

谢谢！

编辑：

这是我在 PHP 中的实际代码。上面的代码来自日志，所以它可能会遗漏一些东西：

```
$sql = 'CREATE TABLE '. $table_name . '(
    id INTEGER(10) UNSIGNED AUTO_INCREMENT,
    date_entered TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    submitter_name VARCHAR(255),
    submitter_email VARCHAR(255),
    submitter_phone VARCHAR(255),
    event_name VARCHAR(255),
    location_name VARCHAR(255),
    address VARCHAR(255),
    city VARCHAR(255),
    state VARCHAR(255),
    zipcode VARCHAR(5),
    phone VARCHAR(255),
    email VARCHAR(255),
    uri VARCHAR(255),
    event_start_date DATE,
    event_start_time TIME,
    event_end_date DATE,
    event_end_time TIME,
    recurs_on_dow TINYINT,
    description VARCHAR(4000),
    comments VARCHAR(4000), 
    active TINYINT DEFAULT 1,
    wants_reach_at_event TINYINT DEFAULT 0;
    PRIMARY KEY  (ID) )'; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T17:48:46.763

**编辑：**

此行后面有一个分号，它是 mysql 语句分隔符。

```
wants_reach_at_event TINYINT DEFAULT 0; <-- 
```

你可能打算让它成为一个逗号`,`

```
wants_reach_at_event TINYINT DEFAULT 0,
PRIMARY KEY  (ID) )'; 
```

# java - 没有外部提供者的 GoogleAppEngine Java Captcha

> ID：10178987
> 
> 赞同：1
> 
> 时间：2012-04-16T17:46:07.103
> 
> 标签：java, google-app-engine, awt, captcha, simplecaptcha

是否有任何不包含列入黑名单的类的验证码生成库？

我想避免使用recaptcha。

我尝试了 JCaptcha 和 SimpleCaptcha，但都使用 AWT 生成图像。

谷歌票[http://code.google.com/p/googleappengine/issues/detail?id=1423&q=awt&colspec=ID%20Type%20Component%20Status%20Stars%20Summary%20Language%20Priority%20Owner%20Log](http://code.google.com/p/googleappengine/issues/detail?id=1423&q=awt&colspec=ID%20Type%20Component%20Status%20Stars%20Summary%20Language%20Priority%20Owner%20Log)已被接受 1一年前，但我们没有关于它的消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T15:08:32.420

我发现[http://code.google.com/p/litetext/](http://code.google.com/p/litetext/)对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T01:28:42.767

Java 运行时目前不支持任何图像处理，只需要编写您自己的解码/编码/像素-bitbashing 代码。您不太可能找到任何可以自己进行图像处理而不是使用 AWT 的工具。

您最好的选择是使用外部服务。

# excel - 关闭 vba 生成的 Excel 绘图上的标记阴影

> ID：10178990
> 
> 赞同：7
> 
> 时间：2012-04-16T17:46:17.253
> 
> 标签：excel, vba, macos

我正在移植一些用于在 Excel 中生成散点图的代码，从 Win 7 / Excel 2010 到 OS X / Excel 2011。在 Mac 上，数据点显示为阴影。我不想要阴影，我不知道如何摆脱它。

使用[此工作表](http://dl.dropbox.com/u/48901983/shadowOff.xlsm)（如果您不想下载启用宏的工作表，它在单元格 A1:B6 中只有随机数）以下代码运行良好，但会产生带有阴影的数据点：

```
Sub plotNoShadow()

  Dim x As Range
  Dim y As Range

  Dim cht As ChartObject

  Set x = ActiveSheet.Range("A1:A6") 'haphazard numbers
  Set y = ActiveSheet.Range("B1:B6")

  Set cht = ActiveSheet.ChartObjects.Add(Left:=150, Top:=50, Width:=200, Height:=160)
  With cht.Chart
    .ChartType = xlXYScatter
    .SeriesCollection.NewSeries
    With .SeriesCollection(1)
        .XValues = x
        .Values = y
        .Format.Shadow.Visible = msoFalse 'This seems to parse, but have no effect
    End With
    .SetElement (msoElementLegendNone)
    .SetElement (msoElementPrimaryValueGridLinesNone)
  End With      
End Sub 
```

谁能给我解释一下：

1.  如何修改此代码以删除阴影，以及

2.  这段代码是如何运行的，但是将 SeriesCollection(1).Format.Shadow.Visible 设置为 msoFalse 却设法在没有任何明显效果的情况下运行？

根据下面的评论线程，这是左侧宏输出的屏幕截图，中间打开然后关闭阴影的点，右侧打开阴影。为了清楚起见，我编辑了宏以删除图例和网格线。看起来宏输出的阴影比“shadow on”状态少，但比“shadow off”状态的阴影多。

![截图说明影子存在的三种状态](../Images/7b3cfdc5e13190154c7a17114766f4f8.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T20:42:36.690

如前所述，Excel 中产生轻微 3D 效果的几个默认图表样式也有轻微的阴影。

在我的 Excel（在 Windows 7 中）上，默认图表样式为 2，因此不会出现阴影或 3D 效果。我怀疑在 Mac 上，默认的图表样式是不同的。

要解决此问题，您可以在代码中设置图表样式：

```
With cht.Chart
  .ChartType = xlXYScatter
  .ChartStyle = 2
  ..... 
```

在 Excel 中，ChartStyle 设置能够修改图表外观的所有方面，包括标记的外观。MarkStyle 唯一设置的是标记的形状。更改 ChartStyle 时，标记的所有其他外观方面都将被覆盖。

**编辑**

上面的评论基本还是对的，不过我找到了关掉影子的方法。与 Excel 的许多事情一样，它并不像您想象的那么容易。如果在代码中设置阴影的可见性属性（无论出于何种原因），那么您需要将阴影类型设置为“无阴影”。

```
Sub plotNoShadow()

  Dim x As Range
  Dim y As Range

  Dim cht As ChartObject

  Set x = ActiveSheet.Range("A1:A6") 'haphazard numbers
  Set y = ActiveSheet.Range("B1:B6")

  Set cht = ActiveSheet.ChartObjects.Add(Left:=150, Top:=50, Width:=200, Height:=160)
  With cht.Chart
    .ChartType = xlXYScatter
    .ChartStyle = 26 'Something 3D with a default shadow. This line can be left out.
    .SeriesCollection.NewSeries
    With .SeriesCollection(1)
        .XValues = x
        .Values = y
        .Format.Shadow.Type = msoShadow30 'This is the code for an inner shadow
    End With
  .SetElement (msoElementLegendNone)
  .SetElement (msoElementPrimaryValueGridLinesNone)
  End With

End Sub 
```

**再次编辑**

实际上，`msoShadow30`它是一种“内部阴影”样式，可能看起来很奇怪，具体取决于您的标记样式。 `msoShadow41`是我能找到的最接近“无影”的东西。其实就是下面阴影的代码，但是默认的太微弱了，看不出来。如果确实出现了，可以随时更改颜色以使其消失。

或者更好的是，将透明度设置为 1（完全透明）：

```
.Format.Shadow.Transparency = 1.0 'Fully transparent 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T18:16:43.417

你看到的影子其实不是影子。我的意思是这是标记看起来没有阴影的默认方式。

不幸的是，您对此无能为力。看看下面的快照，你就会明白我的意思。

**快照：**

![在此处输入图像描述](../Images/d05105d45ae86be7334bfcab0d0dfd4c.png)

**选择：**

但是，您可以使用标记大小来最小化这种影响。试试这个代码。

```
Sub plotNoShadow()

  Dim x As Range
  Dim y As Range

  Dim cht As ChartObject

  Set x = ActiveSheet.Range("A1:A6") 'haphazard numbers
  Set y = ActiveSheet.Range("B1:B6")

  Set cht = ActiveSheet.ChartObjects.Add(Left:=150, Top:=50, Width:=200, Height:=160)
  With cht.Chart
    .ChartType = xlXYScatter
    .SeriesCollection.NewSeries
    With .SeriesCollection(1)
        .MarkerStyle = 2
        .MarkerSize = 7
        .XValues = x
        .Values = y
        .Format.Shadow.Visible = msoFalse 'This seems to parse, but have no effect
    End With
  End With

End Sub 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-27T18:26:19.407

Mac Excel 图表中这种无缘无故的多余格式严重阻碍了我的许多程序到 Mac 的转换。幸运的是我发现：

```
ActiveChart.ChartStyle = 2 
```

它应用了没有阴影、渐变和发光的默认格式。无需返回并重新格式化图表中每个系列的每个小细节。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-13T22:23:11.550

单击数据系列，转到格式化数据系列。在阴影选项下，“阴影”框可能会被取消选中，对吧？核实。这将激活下面的编辑控件。然后将“透明度”设置为 100%。您还可以将“颜色”设置为白色。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-25T03:36:07.053

您可以通过图表图例消除阴影：

cht.Chart.Legend.LegendEntries(1).LegendKey.Shadow = False

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-31T00:03:08.053

不能容忍这种不守规矩的图表行为！停止阴暗系列...

```
With .Shadow
    .ForeColor.RGB = &HFFFFFF
    .Visible = msoFalse
End With 
```

# java - RandomAccessFile Java - 复杂性

> ID：10178994
> 
> 赞同：4
> 
> 时间：2012-04-16T17:46:33.753
> 
> 标签：java, io, complexity-theory

我在处理大量数据的 Linux 上的 Java 程序中使用 RandomAccessFile。

所以我正在做的是我保留了很多文件，每个文件都包含不同的信息。

当我执行动作时

```
int x=???//some large number
RandomAccessFile rand = new RandomAccessFile("file.txt","r");
rand.seek(x); //the file contains more than x bytes
 byte b = rand.readByte(); 
```

程序的复杂性是多少？程序是否在最后 2 行执行 2 个动作？一个用于寻找第 x 个字节，一个用于读取字节？- 换句话说，整个文件位于磁盘上的一个连续位置（如阵列）？还是它会为搜索执行 x 个动作，为读取执行一个动作？

谢谢你

马特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T17:48:56.003

Seek 只是定位内部指针，它不会从磁盘读取任何内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T17:50:06.157

Seek 是 O(1) 或接近。它不必通过文件运行到您的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T17:51:48.613

`seek`几乎是恒定的。定位指向`x`第 th 字节的指针通常是 O(1)，就像数组查找一样，但有时文件在磁盘上是碎片化的，它可能需要 #-of-fragments 步骤来找到第`x`th 字节。

# jquery - 如何动态加载linkedin分享按钮？

> ID：10178996
> 
> 赞同：7
> 
> 时间：2012-04-16T17:46:38.970
> 
> 标签：jquery, linkedin

我在我的网站上动态加载内容，当我获得必要的信息时，我需要在 ajax 功能之后创建社交媒体按钮。我为 facebook 和 twitter 找到了很好的解决方案，但我找不到linkedin 的有效解决方案。希望我的问题很清楚......提前感谢您的聪明答案！

编辑：我找到了解决方案。

```
var din ='<script id="holderLink" type="IN/Share" data-url="http://kitchenprague.com/news.php?id='+val.id+'" data-counter="right"></script>';
$(".linkedinDetail").html(din);
IN.parse(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-06-01T15:12:58.807

hjuster 所述的完整解决方案是......

```
var din ='<script id="holderLink" type="IN/Share" data-url="http://kitchenprague.com/news.php?id='+val.id+'" data-counter="right"></script>';
$(".linkedinDetail").html(din);
IN.parse(); 
```

但是让我提供一些解释，因为解释很棒！

构建一个脚本标签来保存您的共享 URL 数据...

```
var din ='<script id="holderLink" type="IN/Share" data-url="http://kitchenprague.com/news.php?id='+val.id+'" data-counter="right"></script>'; 
```

只需将 URL 数据附加到页面...

```
$(".linkedinDetail").html(din); 
```

根据[官方 LinkedIn 文档](https://developer.linkedin.com/docs/lts/apply-with-linkedin/customer-configuration?src=aff-lilpar&veh=aff_src.aff-lilpar_c.partners_pkw.123201_plc.adgoal%20GmbH_pcrid.449670_learning&trk=aff_src.aff-lilpar_c.partners_pkw.123201_plc.adgoal%20GmbH_pcrid.449670_learning&clickid=SRPXd0wT8xyORz2wUx0Mo38TUki1Iq1twXmmUQ0&irgwc=1)，“为了在单页应用程序上重新加载小部件，请使用 in.parse()”，所以...

```
IN.parse(); 
```

*希望这可以帮助那里的人！*