# StackOverflow 问答 12301000-12301999

# linq-to-sql - LinqToSQL 认为相同的不同 ASCII 符号/字符

> ID：12301011
> 
> 赞同：0
> 
> 时间：2012-09-06T13:17:41.223
> 
> 标签：linq-to-sql, special-characters, extended-ascii

我刚刚发现在 LinqPad 中运行查询时出现了一些奇怪的行为。LinqToSQL 似乎认为某些 ASCII 符号/字符是相等的，而实际上它们并非如此。

考虑以下类（带有相应的表）：

```
public class SpecialCharacter
{
    int Id;
    string Character;
    string Name;
} 
```

如果您在表中为“⇒”（右箭头）和“⇐”（左箭头）添加一行，以下查询将告诉您它们相等（结果将包含两项）：

```
var result = from a in SpecialCharacters
             from b in SpecialCharacters
             where a.Character == b.Character  && a != b
             select new {A = a, B = b}; 
```

通过添加对 .ToList() 的调用来更改查询将导致预期的行为（结果为空）：

```
var result = from a in SpecialCharacters.ToList()
             from b in SpecialCharacters.ToList()
             where a.Character == b.Character && a != b
             select new {A = a, B = b}; 
```

任何想法这是怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T13:33:08.683

您看到的差异是由于 LINQ 处理相等性的方式与 SQL Server 的排序规则设置之间的差异。如果您进行区分大小写的搜索，您会看到同样的结果。LINQ 到对象。考虑以下查询：

```
var query = from c in Customers
            where c.City == "london"
            select c; 
```

LINQ to Objects 将匹配伦敦的城市，但不匹配伦敦或伦敦的城市。另一方面，LINQ to SQL 或 EF 将默认匹配这三个中的任何一个，因为它不区分大小写。您可能希望通过检查 result.ToString 来检查 LINQ to SQL 中生成的 TSQL 以查看生成的 SQL，然后直接在 SSMS 中运行该 SQL。您应该会看到返回的相同的额外记录。您可能需要调整排序规则设置或其他特定于数据库的设置，以获得此查询的正确行为。

# linux - 在 VPS red-hat linux 上设置 LD_LIBRARY_PATH

> ID：12301016
> 
> 赞同：0
> 
> 时间：2012-09-06T13:17:54.073
> 
> 标签：linux, apache, redhat, vps

我应该在哪里以及如何设置`LD_LIBRARY_PATH`？

我尝试将以下代码添加到`.bash_profile`：

```
LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/lib/folder_with_library/
export LD_LIBRARY_PATH 
```

我重新启动 apache，但`phpinfo()`仍然看到错误，因此库尚未加载。

任何帮助如何设置此路径？

我需要在 VPS 服务器上设置它 - 操作系统是 linux red-hat。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T13:26:18.430

HTTPd 不使用用户文件。在启动服务器之前，您必须修改`httpd`initscript（在 下`/etc/init.d`）以导出变量。

但最好的办法是找出有问题的图书馆实际上属于哪里，然后把它放在那里。

# c# - 重新创建 TextBox 控件

> ID：12301019
> 
> 赞同：2
> 
> 时间：2012-09-06T13:18:02.283
> 
> 标签：c#

我想从头开始重新创建 TextBox。没有压倒一切，等等。我不在乎它有多难，或者需要多长时间。

* * *

我一直在搜索有关此的信息，但还没有找到任何东西。有没有你知道的文件？或者，我们将如何（我们甚至允许）“看到”Windows 中的 TextBox 是如何编写的？我们可以在 Visual Studio 中使用对象浏览器吗？

我还想知道以前是否有其他人这样做过，以及在我开始努力之前是否有什么我*应该知道的。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T13:25:26.580

**有没有你知道的文件？** 很多，但我假设您的意思是有关 TextBox 如何工作的文档。你会得到的最好的就是 MSDN 文档。

**我们将如何“看到”Windows 中的 TextBox 是如何编写的？**使用像 Jetbrains DotPeek 或 Telerik 的 JustDecompile 这样的反编译器。

**有没有人这样做过？** 几乎可以肯定不是。价值是多少？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T13:25:17.413

我记得几年前读过关于这个产品的文章，作者重新编写（或至少重新调整）可用的控件 - 在他的情况下，出于安全目的（例如，确保密码不会暴露在 RAM 中等）控件的寿命）。

这都是开源的，所以在这里可能有用。当时网站上也有关于这一切的方式/原因的文档。

[KeePass 密码保险箱](http://keepass.info/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T13:20:38.777

您需要查看 MSDN 关于创建自定义控件的信息。在 Google 上快速搜索“.NET 自定义控件”应该会让您顺利上路。 [MSDN 链接](http://msdn.microsoft.com/en-us/library/6hws6h2t.aspx)

# linux - 查看正在通过 SSH 访问（实时）哪些 http 页面？

> ID：12301021
> 
> 赞同：0
> 
> 时间：2012-09-06T13:18:07.977
> 
> 标签：linux, apache, ssh

是否有一个命令可以让我查看我的服务器上的哪些网站页面当前正在通过 SSH 实时访问？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T13:22:27.787

当然，试试`tail -f /your/server/log/file.log`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T13:23:27.187

当然。如果您的 apache 配置启用了日志记录，则每个页面视图都将写入 access_log。您可以使用`tail -f access_log`跟随文件。

# php - 当用户“喜欢”Facebook 页面选项卡时重定向用户

> ID：12301022
> 
> 赞同：1
> 
> 时间：2012-09-06T13:18:10.650
> 
> 标签：php, facebook

当用户喜欢页面选项卡时，如何将用户重定向到另一个页面？

我遵循了本教程：http: [//developers.facebook.com/docs/appsonfacebook/pagetabs/](http://developers.facebook.com/docs/appsonfacebook/pagetabs/)

一切正常，但如果他喜欢页面选项卡，我需要显示另一个页面。如果他不喜欢该页面，也会出现同样的问题。上一页应该会重新出现......

这是我找到但不起作用的代码...

```
<?php
require 'php-sdk/src/facebook.php';
?>

<!doctype html>
<html xmlns:fb="http://www.facebook.com/2008/fbml">
    <head>

    </head>
    <body>
            you don't like yet

    </body>

    <script>
        FB.api(pageId +  '/likes', 'post' ,function(response) {

            location.href = 'youlike.php';

        });
    </script>
</html> 
```

我希望我足够清楚。

如果您想测试自己： http: [//www.facebook.com/Luthe131](http://www.facebook.com/Luthe131) 页面选项卡是测试应用程序

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T14:05:25.587

我看到你正在使用 php sdk，让我们通过 php 来做吧，你不需要使用 FB.api() 来检查你自己的页面是否喜欢。这里是如何做到的，

```
$facebook = new Facebook(array(
      'appId'  => APP_ID,
      'secret' => APP_SECRET,
      'cookie' => true,
    ));

    $signedRequest = $facebook->getSignedRequest();
    $liked = $signedRequest["page"]["liked"]; 
```

现在，如果用户喜欢该页面，**$liked**将是**1**，现在，

```
`if($liked){
    header("Location:youlike.php");
 }else{
 echo "you didnt like";
 }` 
```

哦，当喜欢按钮被触发时，facebook会刷新应用程序。因此，$liked 的值会相应改变。

# objective-c - UINavigation setViewControllers：内存分配

> ID：12301025
> 
> 赞同：0
> 
> 时间：2012-09-06T13:18:23.110
> 
> 标签：objective-c, ios, ipad, memory-management

我在导航控制器上使用 setViewControllers，例如：

```
XYZController *xyz = [XYZController alloc] initWithXibName:@"XYZController"];
[myNavController setViewControllers:xyz];
[xyz release]; 
```

我正在检查仪器中的分配，但是我发现这个函数调用仪器中实时对象的次数会增加，如果这个函数被调用 5 次，仪器会在 #live 中显示 5 次。

这意味着它正在分配内存，我如何处理内存分配。

* * *

**编辑**：

```
RootViewController *rootController = [[RootViewController alloc] initWithNibName:@"RootViewController" bundle:nil];
UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:rootController];
[rootController.navigationController.navigationBar setHidden:YES];
[self.myNavController setViewControllers:nil];
[self.myNavController setViewControllers:[NSArray arrayWithObjects:navController,nil]];
[rootController release];
[navController release]; 
```

这是我在应用程序中使用的实际代码。这里的问题是，每当调用这段代码时，仪器中的 rootController 活对象计数总是会增加。不仅rootController数量增加，而且类变量也没有释放，因此内存堆积。结果是我的应用程序的性能在很大程度上降低了。

请就此提出建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T13:25:51.800

首先，仪器在查看内存分配时通常会提供误报，所以我会对这些警告持保留态度。它不应该安装，因为（除了你的代码的错误）它对我来说看起来相当有效。

其次，您的代码不正确，因为`myNavController`（我假设是 a `UINavigationController`）在调用时会崩溃，`setViewControllers`因为它需要一个 's 数组`UIViewController`，而不是像上面那样的单个视图控制器。这很可能会崩溃，甚至无法编译。

检查您的代码是否有效并再次运行仪器。如果您仍然有同样的问题，它可能只是误报，应该被忽略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T13:28:05.473

确保不要在（NSZombiesEnabled 参数或在方案诊断中）使用僵尸测试内存使用情况。默认情况下，僵尸永远不会被删除。

# linux - Linux libffi-3.0.11 安装问题

> ID：12301028
> 
> 赞同：1
> 
> 时间：2012-09-06T13:18:29.040
> 
> 标签：linux, linux-kernel, udev, libffi

我尝试安装 libffi-3.0.11 我跟着那一边

[http://www.linuxfromscratch.org/blfs/view/svn/general/libffi.html](http://www.linuxfromscratch.org/blfs/view/svn/general/libffi.html)

但是我收到了这个错误信息。我该如何解决？

```
make[3]: *** [src/powerpc/ffi.lo] Error 1 
make[3]: Leaving directory `/root/libffi-3.0.11/powerpc-unknown-linux-gnu' 
make[2]: *** [all-recursive] Error 1 
make[2]: Leaving directory `/root/libffi-3.0.11/powerpc-unknown-linux-gnu' 
make[1]: *** [all] Error 2 
make[1]: Leaving directory `/root/libffi-3.0.11/powerpc-unknown-linux-gnu' make: ***   
[all-all] Error 2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T06:52:01.397

我解决了这个问题：我认为主要问题是/是我有一个 PowerPc 架构。

我使用了这个补丁[http://sourceware.org/ml/libffi-discuss/2012/msg00201.html](http://sourceware.org/ml/libffi-discuss/2012/msg00201.html)并替换了教程补丁[http://www.linuxfromscratch.org/blfs/view/svn/general/libffi中的代码.html](http://www.linuxfromscratch.org/blfs/view/svn/general/libffi.html)并继续按照说明进行操作。你瞧，它奏效了。

希望这将有助于其他一些开发人员。

# java - 使用自定义视图数组的 NullPointerException

> ID：12301030
> 
> 赞同：0
> 
> 时间：2012-09-06T13:18:35.933
> 
> 标签：java, android, arrays, nullpointerexception

我决定使用简单的循环而不是硬编码来优化我的代码，因为之前我分别实现了每个 PickView 并且效果很好。

这是一个有问题的地方：

```
pick = new PickView[9];
int id;
for(int i = 0; i < pick.length; i++) {
    id = getResources().getIdentifier("pick_" + i, "id", getPackageName());
    pick[i] = (PickView)findViewById(id);
    pick[i].setOnTouchListener(this); //this is MainActivity, line:54
} 
```

...我意外地收到了 NullPointerException：

```
ERROR/AndroidRuntime(8450): FATAL EXCEPTION: main
    java.lang.RuntimeException: Unable to start activity ComponentInfo{com.***}: java.lang.NullPointerException
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
    at android.app.ActivityThread.access$2300(ActivityThread.java:125)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:123)
    at android.app.ActivityThread.main(ActivityThread.java:4627)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:521)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
    at dalvik.system.NativeStart.main(Native Method)
    Caused by: java.lang.NullPointerException
    at com.***.onCreate(MainActivity.java:54)
    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
    ... 11 more 
```

我附上了一个 PickView 类：

```
public class PickView extends RelativeLayout {

    private TextView textView;
    private ImageView imageView;
    private String text;

    public PickView(Context context, AttributeSet attrs) {
        super(context, attrs);
        TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.PickView);
        text = a.getString(R.styleable.PickView_text);

        LayoutInflater layoutInflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View view = layoutInflater.inflate(R.layout.pick_view, this);
        textView = (TextView)findViewById(R.id.pick_text);
        imageView = (ImageView)findViewById(R.id.pick_bg);
    }

    public void setText(String text) {
        textView.setText(text);
    }

    public void activate(boolean isActive) {
        if (isActive)
            imageView.setImageResource(R.drawable.pick_active);
        else
            imageView.setImageResource(R.drawable.pick);
    }
} 
```

我将不胜感激任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T13:25:07.003

Java doc of`getIdentifier`建议`0`如果没有找到它会返回这是您的问题的原因。所以如果没有找到就`findViewById`返回。`null`

`public int getIdentifier (String name, String defType, String defPackage)`

> 返回给定资源名称的资源标识符。完全限定的资源名称的格式为“package:type/entry”。如果此处分别指定了 defType 和 defPackage，则前两个组件（包和类型）是可选的。
> 
> 注意：不鼓励使用此功能。按标识符检索资源比按名称检索资源效率更高。

`int The associated resource identifier. Returns 0 if no such resource was found. (0 is not a valid resource ID.)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T13:25:38.127

只是一个小问题，您有 pick_0 资源吗？

无论如何，您应该检查您是否确实获得了一个 id 并且返回的 PickView 不为空？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T13:32:57.060

也许你可以这样找到它：

```
for (int i = 0; i < pick.length; i++)
{
  resources = getResources();
  if(resources == null)
  {
    System.out.println("oops.. no resources");
    throw new RuntimeException("oops... no resources");
  }
  id = resources.getIdentifier("pick_" + i, "id", getPackageName());
  pickView = (PickView) findViewById(id);
  if(resources == null)
  {
    System.out.println("oops.. noo pickView");
    throw new RuntimeException("oops... no pickView");
  }
  pick[i] = pickView;
  pick[i].setOnTouchListener(this); //this is MainActivity, line:54
} 
```

# sql - Spring JDBC 和 Oracle 函数问题

> ID：12301031
> 
> 赞同：1
> 
> 时间：2012-09-06T13:18:38.543
> 
> 标签：sql, oracle, spring, function

我正在尝试使用 Spring JDBC 执行 SQL 函数。

我的代码是

```
SimpleJdbcCall caller = new SimpleJdbcCall(this.jdbcTemplateRandOnline).withCatalogName("RATELIMIT_OWN").withFunctionName("Get_Logs");
RateLimitLogBean resultBean = null;
SqlParameterSource paramMap = new MapSqlParameterSource().addValue(P_YYYYMM, inputBean.getMonth(), Types.VARCHAR).addValue(P_NUMEC, inputBean.getNumec(), Types.INTEGER);
resultBean = caller.executeFunction(RateLimitLogBean.class, paramMap); 
```

但是当我运行这段代码时，我遇到了错误

> org.springframework.jdbc.UncategorizedSQLException: CallableStatementCallback; SQL [{? = 调用 RATELIMIT_OWN.GET_LOGS()}]; SQL 状态 [99999]；错误代码 [17041]；索引处缺少 IN 或 OUT 参数:: 1; 嵌套异常是 java.sql.SQLException: Missing IN or OUT parameter at index:: 1 at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:83) at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate (AbstractFallbackSQLExceptionTranslator.java:80) 在 org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:1030) 在 org.springframework.jdbc.core.JdbcTemplate.call(JdbcTemplate.java:1064) 在 org.springframework。 jdbc.core.simple.AbstractJdbcCall.executeCallInternal（AbstractJdbcCall.java：

我不明白为什么它会抛出这个错误。对于准备好的语句，我们声明输入和输出参数并编译它们。但是对于函数，当我们将它作为 SqlParamSource 传递时，我们如何编译

Sql 函数

```
FUNCTION RATELIMIT_OWN.Get_Logs ( p_yyyymm VARCHAR2, p_numec NUMBER ) 
```

此函数返回类型的记录

```
TYPE RATELIMIT_OWN.LOG_RECORD AS OBJECT
   (EVENTID              VARCHAR2(15),
    MSG                    VARCHAR2(2000),
    CREATE_DATE      DATE); 
```

我已经调试到 Spring 框架。我发现的是，在

> org.springframework.jdbc.core.metadata.CallMetaDataContext.reconcileParameters 方法，我得到 this.metaDataProvider.getCallParameterMetaData() 这个数组列表，所有值都是空的。

任何原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-20T12:19:17.767

您需要添加

```
.withoutProcedureColumnMetaDataAccess() 
```

到您的 SimpleJdbcCall。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T16:25:48.670

您必须声明函数的参数，如下所示：

```
SimpleJdbcCall caller = new SimpleJdbcCall(this.jdbcTemplateRandOnline)
                                           .withCatalogName("RATELIMIT_OWN")
                                           .withFunctionName("Get_Logs")
                                           .withReturnValue()
                                           .declareParameters(
                                              new SqlParameter("p_yyyymm",java.sql.Types.VARCHAR))
                                           .declareParameters(
                                              new SqlParameter("p_numec",java.sql.Types.INTEGER)); 
```

# php - 删除下拉列表中选择的文件

> ID：12301032
> 
> 赞同：0
> 
> 时间：2012-09-06T13:18:38.570
> 
> 标签：php, forms, delete-file, unlink

尝试创建一个下拉列表，显示特定文件夹中的文件，并使用删除按钮删除所选文件。

下拉列表：

```
<?php
    $dirname = "files";
    $dir = opendir($dirname);
    echo '<form action="delete.php" method="get">';
    echo '<select name="file2">';
    while(false != ($file = readdir($dir)))
    {
        if(($file != ".") and ($file != ".."))
        {
            echo "<option value=".$file.">$file</option>";
        }
    }
    echo '</select>';
    echo '<input type="submit" value="Delete" class="submit" />';
    echo '</form>';
?> 
```

delete.php*文件*：

```
<?php
    $dirpath = "files";
    $file_to_delete = $_POST['file2'];
    if ( unlink ($dirpath.'/'.$file_to_delete) ) {
        echo $file_to_delete . " deleted.";
    } else {
        echo "Error.";
    }
?> 
```

然后当我尝试选择一个文件并按删除时，我收到以下错误：

> 警告：unlink(files/): 是 /xxx/xxx/xxx/xxx/xxx/xxx/xxx/xxx/delete.php 中的目录第 4 行错误。

由于隐私，xxx'ed out :) 所有试图删除的文件都是 chmod 777。它是一个简单的 .txt 文件，我试图删除。

不知道我错过了什么或我在这里做错了什么......：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T13:25:53.403

是`$_GET`，因为您的表单具有`method="get"`：

```
$file_to_delete = $_GET['file2']; 
```

所以：

```
<?php
    $dirpath = "files";
    $file_to_delete = $_GET['file2'];
    if ( unlink ($dirpath.'/'.$file_to_delete) ) {
        echo $file_to_delete . " deleted.";
    } else {
        echo "Error.";
    }
?> 
```

如果您想发布，请将您的表单更改为`method="post"`.

# android - 在 MonoDroid 中开发 - 迁移到 BlackBerry 10 的前景

> ID：12301036
> 
> 赞同：1
> 
> 时间：2012-09-06T13:18:47.867
> 
> 标签：android, mobile, xamarin.android, blackberry-10

我们有一些 MonoDroid 代码，我们对其进行了结构化，以促进在 Android、iOS（通过 MonoTouch）和 WP7 中开发等效应用程序；为业务逻辑使用单个底层库。

我们有客户要求将我们的应用程序移入 BlackBerry-10。当我读到 BlackBerry-10 支持 Android 应用程序时，我感到很兴奋。我从[“Android 应用程序运行时”](https://developer.blackberry.com/android/documentation/Mastertopic_1849583_11.html)页面了解了更多内容。我是否正确地假设这不适用于从 Mono for Android 生成的 APK 文件？

在哪种情况下，是否有人知道构建 BlackBerry-10 应用程序以嵌入我们已建立的 C# 业务逻辑的方法？或者，在 BlackBerry-10 上为单声道生成所需的运行时对某人来说会有多大的挑战——这种事情可以通过社区的努力来资助吗？它比 10 家必须将其应用程序完全移植到 BlackBerry-10 的公司便宜。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:13:19.320

您还可以在 Xamarin 的 UserVoice 页面上投票：

[http://xamarin.uservoice.com/forums/144858-xamarin-suggestions/suggestions/2617326-monoblackberry](http://xamarin.uservoice.com/forums/144858-xamarin-suggestions/suggestions/2617326-monoblackberry)

Xamarin 没有回应，所以我希望我们能得到一些关于他们计划的反馈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T11:55:26.630

You need to convert your mono android .apk file into blackberry .bar file. Online tool is available for this you can check that if your .apk file run on BB10 or not?

Link to check apk file : [https://bdsc.webapps.blackberry.com/android/bpaa/](https://bdsc.webapps.blackberry.com/android/bpaa/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-20T19:18:57.043

还有另一个项目[dot42](http://www.dot42.com)，直接将 c# 编译为 Android dex 应用程序，无需 Mono 等任何运行时要求。

# css - 如何 CSS div 100%

> ID：12301037
> 
> 赞同：0
> 
> 时间：2012-09-06T13:18:48.613
> 
> 标签：css

我正在尝试编辑一个 css div 以在其上显示 100% 的文本，

我的代码是：

```
#categorycontent, .categorycontent {
    display:block;
    line-height:22px;
    height:290px;
    margin:0;
    padding:4px 10px;
    background:#ecebe3;
    border:1px solid #d5d3c7;
} 
```

我正在尝试类似的东西：

```
#categorycontent, .categorycontent{
    display:block;
    line-height:100%;
    height:100%;
    margin:0;
    padding:4px 10px;
    background:#ecebe3;
    border:1px solid #d5d3c7;
} 
```

但这不起作用。

我是css初学者，谢谢。

编辑：高度为 290px 的屏幕截图； [http://i45.tinypic.com/359z2ti.png](http://i45.tinypic.com/359z2ti.png)

和高度为 100% 的屏幕截图； [http://i46.tinypic.com/fwq4q8.png](http://i46.tinypic.com/fwq4q8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T13:20:32.597

你不能设置 div height:100% 除非身高是 100%

```
 html,body{height:100%}

#categorycontent, .categorycontent{display:block;line-height:100%;height:100%;margin:0;padding:4px 10px;background:#ecebe3;border:1px solid #d5d3c7;} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T13:21:25.683

如果您希望它显示您输入的所有文本，只需设置：

`overflow: visible;`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T13:22:08.403

你必须穿上`height: 100%;`你的`<html>`和`<body>`标签

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T13:33:13.580

您可以将宽度添加为 100%。

```
width:100%; 
```

# php - For循环没有给出预期的重复

> ID：12301042
> 
> 赞同：3
> 
> 时间：2012-09-06T13:19:05.457
> 
> 标签：php, codeigniter, file-upload, for-loop, upload

我的站点中有一个函数可以从 $_FILES 数组上传图像。如果您只有一个图像，并且数组中有两个或更少的项目，此功能可以正常工作，但它只能上传 2 个图像。例如，我的表单在 pei_name[] 字段中最多允许 17 张图像，但它只上传前 2 个字段。这是功能：

```
private function productImageUploader($id, $image, $altText, $uploadDir)
{

    $uploadDir = (!substr($uploadDir, "/")) ? $uploadDir."/" : $uploadDir;
    $image = $_FILES[$image];

    if(is_array($image['name']))
    {
    print_r($_FILES);
        for($i=0; $i<=sizeof($image['name']); ++$i)
        {
            echo $i;
            if($image['error'][$i] != 4)
            {

                $image['name'][$i] = str_replace(" ", "-", $image['name'][$i]);

                $targetPath = $uploadDir.basename($image['name'][$i]);

                if(!move_uploaded_file($image['tmp_name'][$i], $targetPath))
                {

                    switch($image['error'][$i])
                    {

                        case 1:
                            return "<p class=\"error\">The file for Extra Image {$i} is too large for the server.</p>";
                            break;

                        case 2:
                            return "<p class=\"error\">The file for Extra Image {$i} is too large for the form.</p>";
                            break;

                        case 3:                             
                        case 6:
                        case 7:
                            return "<p class=\"error\">An error occured uploading Extra Image {$i}. Please <a onclick=\"location.reload(true);\">refresh</a> the page.</p>";
                            break;  

                        case 8:
                            return "<p class=\"error\">The file for Extra Image {$i} is not the correct file type. Please convert it to either a jpg, .png or .bmp file.</p>";
                            break;

                    }

                }
                else
                {

                    $thisAlt = (isset($_POST[$altText][$i]) && $_POST[$altText][$i] != "") ? $_POST[$altText][$i] : $_POST['prod_title'];

                    $data = array (
                        'pei_product_id' => $id,
                        'pei_location' => $image['name'][$i],
                        'pei_alt' => $thisAlt
                    );

                    if(!isset($_POST["pei_id"][$i]))
                    {

                        $this->db->insert("product_extra_images", $data);

                    }
                    else
                    {

                        $this->db->where("pei_id", $_POST['pei_id'][$i]);
                        $this->db->update("product_extra_images", $data);

                    }

                    return true;

                }

            }

        }

    }
    else
    {

        if($image['error'] != 4)
        {

            $image['name'] = str_replace(" ", "-", $image['name']);

            $targetPath = $uploadDir.basename($image['name']);

            if(!move_uploaded_file($image['tmp_name'], $targetPath))
            {

                switch($image['error'])
                {

                    case 1:
                        return "<p class=\"error\">The file for the main product image is too large for the server.</p>";
                        break;

                    case 2:
                        return "<p class=\"error\">The file for the main product image is too large for the form.</p>";
                        break;

                    case 3:                             
                    case 6:
                    case 7:
                        return "<p class=\"error\">An error occured uploading the main product image. Please <a onclick=\"location.reload(true);\">refresh the page.</p>";
                        break;  

                    case 8:
                        return "<p class=\"error\">The file for the main product image is not the correct file type. Please convert it to either a jpg, .png or .bmp file.</p>";
                        break;

                }

            }
            else
            {

                $data = array ('prod_main_image' => $image['name']);

                $this->db->where("prod_id", $id);
                $this->db->update("products", $data);

                return true;

            }

        }

    }

    if(isset($_POST["pei_id"]) && is_array($_POST["pei_id"]))
    {

        for($i=0; $i<sizeof($_POST["pei_id"]); ++$i)
        {

            $thisAlt = (isset($_POST[$altText][$i]) && $_POST[$altText][$i] != "") ? $_POST[$altText][$i] : $_POST['prod_title'];
            $this->db->where("pei_id", $_POST["pei_id"][$i]);
            $this->db->update("product_extra_images", array("pei_alt"=> $thisAlt));
        }

    }

    return true;

} 
```

这是 $_FILES 数组的内容：

```
Array
(
[prod_main_image] => Array
    (
        [name] => 
        [type] => 
        [tmp_name] => 
        [error] => 4
        [size] => 0
    )

[pei_image] => Array
    (
        [name] => Array
            (
                [0] => Untitled.jpg
                [1] => Untitled.jpg
                [2] => Untitled.jpg
                [3] => Untitled.jpg
                [4] => Untitled.jpg
                [5] => Untitled.jpg
                [6] => Untitled.jpg
                [7] => Untitled.jpg
                [8] => Untitled.jpg
                [9] => Untitled.jpg
                [10] => Untitled.jpg
                [11] => Untitled.jpg
                [12] => Untitled.jpg
                [13] => Untitled.jpg
                [14] => Untitled.jpg
                [15] => Untitled.jpg
                [16] => Untitled.jpg
            )

        [type] => Array
            (
                [0] => image/jpeg
                [1] => image/jpeg
                [2] => image/jpeg
                [3] => image/jpeg
                [4] => image/jpeg
                [5] => image/jpeg
                [6] => image/jpeg
                [7] => image/jpeg
                [8] => image/jpeg
                [9] => image/jpeg
                [10] => image/jpeg
                [11] => image/jpeg
                [12] => image/jpeg
                [13] => image/jpeg
                [14] => image/jpeg
                [15] => image/jpeg
                [16] => image/jpeg
            )

        [tmp_name] => Array
            (
                [0] => /tmp/phpGgDKqk
                [1] => /tmp/phpruuIs2
                [2] => /tmp/phpIEbSuK
                [3] => /tmp/phpHDhaxs
                [4] => /tmp/phpigwAza
                [5] => /tmp/phpnEY8BS
                [6] => /tmp/phpEytPEA
                [7] => /tmp/phpRCcEHi
                [8] => /tmp/phpeyUAK0
                [9] => /tmp/php5aQFNI
                [10] => /tmp/php07zSQq
                [11] => /tmp/phppQHdU8
                [12] => /tmp/php8GFGXQ
                [13] => /tmp/phpbaQh1y
                [14] => /tmp/phpqN7Z4g
                [15] => /tmp/phpjPlP8Y
                [16] => /tmp/phpYL3KcH
            )

        [error] => Array
            (
                [0] => 0
                [1] => 0
                [2] => 0
                [3] => 0
                [4] => 0
                [5] => 0
                [6] => 0
                [7] => 0
                [8] => 0
                [9] => 0
                [10] => 0
                [11] => 0
                [12] => 0
                [13] => 0
                [14] => 0
                [15] => 0
                [16] => 0
            )

        [size] => Array
            (
                [0] => 172159
                [1] => 172159
                [2] => 172159
                [3] => 172159
                [4] => 172159
                [5] => 172159
                [6] => 172159
                [7] => 172159
                [8] => 172159
                [9] => 172159
                [10] => 172159
                [11] => 172159
                [12] => 172159
                [13] => 172159
                [14] => 172159
                [15] => 172159
                [16] => 172159
            )

    ) 
```

)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T10:36:28.570

第一个`return true`是在错误的地方。它需要像以下代码一样移动：

```
private function productImageUploader($id, $image, $altText, $uploadDir)
{

    //$uploadDir = (!substr($uploadDir, "/")) ? $uploadDir."/" : $uploadDir;
    $image = $_FILES[$image];

    if(is_array($image['name']))
    {

        for($i=0; $i<sizeof($image['name']); ++$i)
        {

            if($image['error'][$i] != 4)
            {

                $image['name'][$i] = str_replace(" ", "-", $image['name'][$i]);

                $targetPath = $uploadDir.basename($image['name'][$i]);

                if(!move_uploaded_file($image['tmp_name'][$i], $targetPath))
                {

                    switch($image['error'][$i])
                    {

                        case 1:
                            return "<p class=\"error\">The file for Extra Image {$i} is too large for the server.</p>";
                            break;

                        case 2:
                            return "<p class=\"error\">The file for Extra Image {$i} is too large for the form.</p>";
                            break;

                        case 3:                             
                        case 6:
                        case 7:
                            return "<p class=\"error\">An error occured uploading Extra Image {$i}. Please <a onclick=\"location.reload(true);\">refresh</a> the page.</p>";
                            break;  

                        case 8:
                            return "<p class=\"error\">The file for Extra Image {$i} is not the correct file type. Please convert it to either a jpg, .png or .bmp file.</p>";
                            break;

                    }

                }
                else
                {

                    $thisAlt = (isset($_POST[$altText][$i]) && $_POST[$altText][$i] != "") ? $_POST[$altText][$i] : $_POST['prod_title'];

                    $data = array (
                        'pei_product_id' => $id,
                        'pei_location' => $image['name'][$i],
                        'pei_alt' => $thisAlt
                    );

                    if(!isset($_POST["pei_id"][$i]))
                    {

                        $this->db->insert("product_extra_images", $data);

                    }
                    else
                    {

                        $this->db->where("pei_id", $_POST['pei_id'][$i]);
                        $this->db->update("product_extra_images", $data);

                    }

                }

            }

        }

        return true;  //This is the moved return

    }
    else
    {

        if($image['error'] != 4)
        {

            $image['name'] = str_replace(" ", "-", $image['name']);

            $targetPath = $uploadDir.basename($image['name']);

            if(!move_uploaded_file($image['tmp_name'], $targetPath))
            {

                switch($image['error'])
                {

                    case 1:
                        return "<p class=\"error\">The file for the main product image is too large for the server.</p>";
                        break;

                    case 2:
                        return "<p class=\"error\">The file for the main product image is too large for the form.</p>";
                        break;

                    case 3:                             
                    case 6:
                    case 7:
                        return "<p class=\"error\">An error occured uploading the main product image. Please <a onclick=\"location.reload(true);\">refresh the page.</p>";
                        break;  

                    case 8:
                        return "<p class=\"error\">The file for the main product image is not the correct file type. Please convert it to either a jpg, .png or .bmp file.</p>";
                        break;

                }

            }
            else
            {

                $data = array ('prod_main_image' => $image['name']);

                $this->db->where("prod_id", $id);
                $this->db->update("products", $data);

                return true;

            }

        }

    }

    if(isset($_POST["pei_id"]) && is_array($_POST["pei_id"]))
    {

        for($i=0; $i<sizeof($_POST["pei_id"]); ++$i)
        {

            $thisAlt = (isset($_POST[$altText][$i]) && $_POST[$altText][$i] != "") ? $_POST[$altText][$i] : $_POST['prod_title'];
            $this->db->where("pei_id", $_POST["pei_id"][$i]);
            $this->db->update("product_extra_images", array("pei_alt"=> $thisAlt));
        }

    }

    return true;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T10:17:43.870

在这里[上传多张图片，PHP](https://stackoverflow.com/questions/9772340/upload-multiple-images-php)是您可能会研究的东西。我觉得这对你会有帮助。

# python - Python中的格式化语法

> ID：12301043
> 
> 赞同：3
> 
> 时间：2012-09-06T13:19:14.410
> 
> 标签：python, syntax, format

有没有办法以更好的方式编写这行代码：

```
"""{a};{b};{c};{d}""".format(a = myDictionary[a], b = myDictionary[b], c = myDictionary[c], d = myDictionary[d]) 
```

像这样的东西？

```
"""{a};{b};{c};{d}""".format(myDictionary) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-06T13:20:04.483

在字典上使用[关键字扩展：](http://docs.python.org/tutorial/controlflow.html#unpacking-argument-lists)

```
"{a};{b};{c};{d}".format(**myDictionary) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T14:41:59.470

`format`可以取消引用它的参数：

```
>>> D=dict(a=1,b=2,c=3,d=4)
>>> '{0[a]};{0[b]};{0[c]};{0[d]}'.format(D)
'1;2;3;4' 
```

可以在类上使用类似的语法：

```
>>> class C:
...  a=1
...  b=2
...  c=3
...  d=4
...
>>> '{0.a};{0.b};{0.c};{0.d}'.format(C)
'1;2;3;4' 
```

请参阅[格式规范迷你语言](http://docs.python.org/library/string.html#formatspec)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T14:42:07.473

```
"""%(a)s;%(b)s;%(c)s;%(d)s""" % myDictionary 
```

尽管有很多争议和推动，传统的字符串格式化操作符“%”没有离开的动机（也没有迹象），因为很多事情都变得更简单了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T14:52:23.283

这是你要找的吗？

```
di = {
  'key1': 'value1',
  'key2': 'value2',
  'key3': 'value3'
}

print "value of key3 is: %(key3)s" % di 
```

> > > key3 的值为： value3

# c# - 代码块内的 MVC Razor 括号

> ID：12301046
> 
> 赞同：7
> 
> 时间：2012-09-06T13:19:25.477
> 
> 标签：c#, asp.net-mvc, linq, razor

我在代码块内进行 linq 查询时遇到问题。

```
@{
  var foo = @Model.Things.Select((value, index) => new { value, index });
} 
```

问题是新的{}，它认为第二个括号关闭了整个代码块。有什么办法逃脱吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-06T13:21:10.197

`@`从以下位置删除`Model`：

```
@{
  var foo = Model.Things.Select((value, index) => new { value, index });
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-06T13:21:10.673

请试试

```
@{
 var foo = Model.Things.Select((value, index) => new { value, index });
} 
```

# php - 公共和私人资源管理

> ID：12301048
> 
> 赞同：0
> 
> 时间：2012-09-06T13:19:37.853
> 
> 标签：php, web-applications, resources, privacy

我正在用 PHP 构建一个 Web 应用程序。用户将使用他们的帐户访问。他们将在系统中拥有图片、笔记等资源，就像在 Facebook 中一样。

我的第一个问题是不允许任何人访问帐户的私有资源。假设这是一张照片。有3种情况：

1.  每个人都可以通过图片的 URL 访问该图片。
2.  该图片所有者帐户的朋友帐户可以访问该图片。
3.  只有所有者帐户可以看到该图片，其他人无法看到。即使有图片的网址。

我不知道 Facebook 是否会像第 1 点那样做。因为业务很重要，用户的隐私也很重要。

我的第一个想法是通过 PHP 文件进行所有资源访问。但过了一会儿，它看起来真的很复杂。

我的另一个想法是将所有资源的列表保存在数据库表中，并将隐私设置放在一起。这看起来是一个更好的主意，但我不确定性能会如何及时受到影响。

您有什么想法，您将如何构建这样的系统？

PS 我打算再添加一个 Web 应用程序，并创建一个共享资源区域来放置共享资源。我在那里也需要相同的特权系统。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T20:29:24.277

嗯..

1.  您`User_ID`在应用程序中有“”。
2.  你有你想访问的目录（url）。
3.  这个目录有它的所有者“ `User_ID`”。像`/store/user_9892/album_2/beer&girls.jpg`

所以你可以执行一个 SQL 查询来检查目录中的“ `User ID`”是当前的应用程序执行者 ID 还是他的所有者是朋友。在这种情况下 - 授予访问权限。其他 - 使用 403 标头（或其他）重定向。
这意味着您不需要任何具有资源等的表。只需使用极快的 SQL 查询检查所有者\朋友状态。

编辑：
对于委派的其他帐户，您可以简单地添加到您的`'user'`表格字段中。例如，让我们命名`'access_accounts'`。可能是序列化数组，可能是特殊字符分隔的文本。同样我们所做的一切——检查一个 SQL 查询以获取当前 User_ID 的权限。

如果我们需要更进一步并定义任何文件夹的任何访问权限（对于任何人，对于任何人组等）......所以是的，我想必须有一个结构类似于`[path]=>[access_id]`. 但这个想法再次奏效——简单的一次 SQL 检查。

PS这一切意味着我投票赞成“通过PHP文件进行所有资源访问”。使用 php-script 可以很容易地完成，其中`.htaccess`包含一些 SQL 查询和规则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T21:41:56.227

根据我的经验，您可以通过将文件上传到不公开的目录来最好地解决这个问题。然后，您的数据库中还会有一些表，其中至少有三列：文件*名*、您要为其提供的*访问级别以及上传文件的**用户*。

然后，您可以编写一些内容来检查访问用户是否有权访问该文件。首先，它将检索包含有关所提及文件的信息的列。根据该信息，如果用户有权访问，请使用[readfile](http://php.net/readfile)（参见 PHP 手册中的示例）来显示该文件。在所有其他情况下，您可以只显示 403 禁止页面。

在您的情况下，检查访问权限的函数如下所示：

```
function hasAccess($accesslevel, $owner, $visitor) 
{
    if ($accesslevel === 'public') {
        return true;
    }
    if ($accesslevel === 'private') {
        return $owner === $visitor;
    }
    if ($accesslevel === 'friends') {
        return $owner === $visitor || isfriend($visitor, $owner);
    }
} 
```

这只是一个示例，您的实现可能会有所不同，具体取决于您的环境。

据我所知，Facebook 只允许所有人查看所有文件，但会尝试创建一个难以猜测的 url。获得网址后，您就可以查看图像本身，而不管上传图像的用户的隐私设置如何。

# android - 在android中的方向更改后Webview不可见

> ID：12301049
> 
> 赞同：0
> 
> 时间：2012-09-06T13:19:42.787
> 
> 标签：android, webview, orientation, orientation-changes

在网上长时间搜索后仍然无法解决我的问题。

显现：

```
<application
    android:hardwareAccelerated="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@android:style/Theme.NoTitleBar" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".Application"
        android:configChanges="keyboardHidden|orientation"
        android:label="@string/title_activity_application" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

应用布局：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" >

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:background="@color/white" >
        <WebView
            android:id="@+id/navWeb"
            android:layout_width="match_parent"
            android:layout_height="match_parent" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent">

        <fragment
            android:id="@+id/mainFragment"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            class="be.smartschool.mobile.MainFragment" ></fragment>

    </LinearLayout> 
```

片段布局

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >
<WebView 
    android:id="@+id/mainWeb"
    android:layout_width="match_parent"
    android:layout_height="match_parent" /> 
```

应用活动：

```
public class Application extends Activity {
protected WebView mainWeb;
protected FrameLayout mainWebPlaceholder;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_application);
    //mainWeb = (WebView) getLastNonConfigurationInstance();
    //initUI();
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_application, menu);
    return true;
}
} 
```

片段类

```
public class MainFragment extends Fragment {
protected WebView mainWeb;

public MainFragment(){
    this.setRetainInstance(true);
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.fragment_mainweb, container, false);
    Log.i("INFO", ">>>>>>> onCreateView");
    if(mainWeb != null) {
        mainWeb.restoreState(savedInstanceState);
        Log.i("INFO", ">>>>>>> restoreState");
     }
    return view;
}

 @Override
 public void onActivityCreated(Bundle savedInstanceState) {
     super.onActivityCreated(savedInstanceState);
     if(mainWeb == null) {
         initUI();
     }
 }

 @Override
 public void onSaveInstanceState(Bundle outState) { 
     if(mainWeb != null) {
         Log.i("INFO", ">>>>>>> onSaveInstanceState");
         mainWeb.saveState(outState);
     }
 }

protected void initUI(){
    Log.i("INFO", ">>>>>>> UI Init called");

    // Create the webview
    mainWeb = (WebView) getActivity().findViewById(R.id.mainWeb);
    if(mainWeb != null) {
        mainWeb.getSettings().setSupportZoom(false);
        mainWeb.getSettings().setBuiltInZoomControls(false);
        mainWeb.getSettings().setLoadsImagesAutomatically(true);
        mainWeb.getSettings().setJavaScriptEnabled(true);
        // Load a page
        mainWeb.loadUrl("http://www.google.com");

        Log.i("INFO", ">>>>>>> WEBVIEW CREATED");
    }
}
} 
```

所以你可以看到我使片段可保留，并且当我调试日志时是逻辑的。webview 创建一次，但仅在第一次可见。在orientationchange之后，我再也看不到webview了。Whet 在这里绞尽脑汁。在我看来这是一个小问题，但我找不到合适的解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T13:24:52.887

您可能需要覆盖 onConfigurationChanged。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T13:25:39.630

尝试`android:configChanges="orientation"`在您的 AndroidManifest.xml 中放入您的活动标签

希望它会工作......

# javascript - Jquery 验证淡入和隐藏

> ID：12301051
> 
> 赞同：1
> 
> 时间：2012-09-06T13:19:49.583
> 
> 标签：javascript, jquery

我有一个这样的 JS 验证代码：

```
$(document).ready(function(){
    $('#username').keyup(username_check);
}); 

function username_check(){  
    var username = $('#username').val();
    if(username == "" || username.length < 4){
        $('#username').css('border', '3px #CCC solid');
        $('#tick').hide();
    }else{
        jQuery.ajax({
            type: "POST",
            url: "check_username.php",
            data: 'username='+ username,
            cache: false,
            success: function(response){
                if(response == 1){
            $('#username').css('border', '3px #C33 solid'); 
            $('#tick').hide();
            $('#cross').fadeIn();
                }else{
            $('#username').css('border', '3px #090 solid');
            $('#cross').hide();
            $('#tick').fadeIn();
                }
            }
        });
    }
} 
```

HTML 代码：

```
<input type="text" name="username" id="username" class="input">
<img id="tick" src="images/tick.png" width="16" height="16"/>
<img id="cross" src="images/cross.png" width="16" height="16"/> 
```

此代码运行良好，但现在我希望在验证之前隐藏图像。下面是截图。

![在此处输入图像描述](../Images/f8d6ca2f9e949a452b7bfc333832b714.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T13:22:52.817

虽然这可以用 JavaScript 完成，但最好使用 CSS。JavaScript 在页面上最后加载，这意味着图像会在 JavaScript 运行后出现然后消失。

快速而肮脏的方法是：

```
<img id="tick" src="images/tick.png" width="16" height="16" style="display:none"/>
<img id="cross" src="images/cross.png" width="16" height="16" style="display:none"/> 
```

但是像这样添加一个 CSS 类会更好：

```
<img id="tick" src="images/tick.png" width="16" height="16" class="hider"/>
<img id="cross" src="images/cross.png" width="16" height="16" class="hider"/> 
```

然后在 CSS 中：

```
.hider {
    display:none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T13:26:18.297

```
<img id="tick" src="images/tick.png" width="16" height="16" style="display:none"/>
<img id="cross" src="images/cross.png" width="16" height="16" style="display:none"/>

$(document).ready(function(){
$('#username').keyup(username_check);
}); 
function username_check(){  
var username = $('#username').val();
if(username == "" || username.length < 4){
$('#username').css('border', '3px #CCC solid');
$('#cross').fadein();  //changed
}else{
jQuery.ajax({
type: "POST",
url: "check_username.php",
data: 'username='+ username,
cache: false,
success: function(response){
if(response == 1){
$('#username').css('border', '3px #C33 solid'); 
$('#tick').hide();
$('#cross').fadein();  //changed

}else{
$('#username').css('border', '3px #090 solid');
$('#cross').hide();
$('#tick').fadeIn();// changed
     }
}
});
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T13:32:32.363

试试这个逻辑

1）更改 jQuery 源：

```
 $(document).ready(function(){
$('#username').keyup(username_check);
}); 
function username_check(){  
var username = $('#username').val();
if(username == "" || username.length < 4){
 $('#username').css('border', '3px #CCC solid');
 $('#tick').fadeIn("slow");
 $('#cross').fadeOut("slow");
}else{
jQuery.ajax({
   type: "POST",
   url: "check_username.php",
   data: 'username='+ username,
   cache: false,
   success: function(response){
if(response == 1){
    $('#username').css('border', '3px #C33 solid'); 
    $('#cross').fadeIn("slow");
    $('#tick').fadeOut("slow");
    }else{
    $('#username').css('border', '3px #090 solid');
     $('#tick').fadeIn("slow");
      $('#cross').fadeOut("slow");
         }
}
});
}
} 
```

2）和HTML源：

```
 <input type="text" name="username" id="username" class="input">
        <img id="tick" src="images/tick.png" alt="Tick" style="display: none" width="16"
            height="16" />
        <img id="cross" src="images/cross.png" alt="Cross" style="display: none" width="16"
            height="16" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T13:22:42.137

在你的css中，把属性：`display: hidden;`放在勾号和十字上。这将确保它们在您第一次加载页面时被隐藏。输入用户名后，`fadeIn`将根据您的需要设置显示。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T13:24:01.783

```
$(document).ready(function(){
$("#tick").hide();
$("#cross").hide();
}); 
```

如果您需要 jquery 或`display:none`在 css 中使用，您可以使用它。可见性：隐藏；也可以使用完整的jquery脚本

```
<script>
$(document).ready(function(){
$("#tick").hide();
$("#cross").hide();
$('#username').keyup(username_check);
}); 
function username_check(){  
var username = $('#username').val();
if(username == "" || username.length < 4){
$('#username').css('border', '3px #CCC solid');
$('#tick').hide();
}else{
jQuery.ajax({
   type: "POST",
   url: "check_username.php",
   data: 'username='+ username,
   cache: false,
   success: function(response){
if(response == 1){
    $('#username').css('border', '3px #C33 solid'); 
    $('#tick').hide();
    $('#cross').fadeIn();
    }else{
    $('#username').css('border', '3px #090 solid');
    $('#cross').hide();
    $('#tick').fadeIn();
         }
}
});
}
}
</script> 
```

# javascript - 遵循 url 方案后与 HTML5 Web SQL 的连接丢失

> ID：12301054
> 
> 赞同：1
> 
> 时间：2012-09-06T13:19:59.007
> 
> 标签：javascript, html, google-chrome, local-storage, web-sql

我正在 Google Chrome 上使用 HTML5 和 Web SQL 开发应用程序。应用程序使用自定义 URL 方案（例如 skype://）调用外部应用程序。当用户点击这样的URL（例如window.location.href='aaa://bbb'）时，JS浏览器引擎崩溃，数据库连接丢失。在调试期间，数据库对象返回 0 错误代码。数据库大小很小 - 它不能成为故障的原因。

有没有人遇到过类似的问题？我怎样才能解决这个问题？（当用户单击“skype://”等自定义 URL 时，数据库连接不得中断）

将感谢您的建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T01:41:53.657

另一个新的存储选项是[SequelSphere](http://www.sequelsphere.com)。

它是一个支持 SQL 的 HTML5/JavaScript 关系数据库。它是它自己的数据库引擎，并将其数据存储在 localStorage 中，而不是使用 WebSQL。因此，它适用于所有浏览器，并且不会在用户单击自定义 URL 方案时中断。这可能很好地满足您的需求。

# visual-studio - Double click to go to source in Output Window

> ID：12301055
> 
> 赞同：14
> 
> 时间：2012-09-06T13:19:59.613
> 
> 标签：visual-studio, output-window

When you build a project in Visual Studio, the Output Window outputs the status of the build process, which included errors and warnings. Double clicking those lines will open up the file containing that error/warning in the editor.

Now, is it possible to get that functionality with output from Debug.WriteLine, or anything like that? So that when the Debug window outputs for example

```
Buffering: 13:03:20 to 13:03:21 
```

I would be able to double click it and be taken to BufferClass.cs, line 45, since that was the location of the Debug.WriteLine call.

Is that possible, either through .net libraries, or through a Visual Studio Extension?

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-11T11:57:37.120

I'll just go ahead and answer this by myself then.

To be able to directly jump to the source file, format your message like this:

```
string.Format("{0}({1})", filePath, lineNumber); 
```

That way, Visual Studio will automatically add the double click functionality and take you directly to the source.

Additionally, if you use the new functionality in Visual Studio 2012, as described here: [Caller Details](http://blogs.msdn.com/b/mvpawardprogram/archive/2012/09/04/caller-details.aspx), you can implement your Log Method like this:

```
private void LogData(string message, 
                     [CallerMemberName] string callerName = "",
                     [CallerLineNumber] int lineNumber = -1,
                     [CallerFilePath] string filePath = "")
    {
        Debug.WriteLine(message);
        Debug.WriteLine(string.Format("    {0}({1})", filePath, lineNumber));
    } 
```

In addition, adding " : error" or ": warning" to the end makes Visual Studio color it red or yellow. If there are any articles describing this further, I'd really like to know.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-05-21T23:39:39.363

Well, this question (and answer) appear to be a bit outdated, so let me refresh:

In Visual Studio 2013, the following format is the only one that appears to cause linkage to the file/line that echoed the message:

**C#**:

```
{0}({1}): <message here> 
```

**For C/C++, give this a whirl**:

```
#define STRINGX(x) #x
#define STRING(x) STRINGX(x)
#define MY_LOG(msg) __pragma(message(__FILE__"(" STRING(__LINE__) "): " msg)) 
```

If you don't include the colon after the ending parenthesis, or there is a space between the file name and line number, it *will not link to the source code.*

# python - 如何模拟两个深度导入的 Python 类？

> ID：12301061
> 
> 赞同：5
> 
> 时间：2012-09-06T13:20:04.917
> 
> 标签：python, unit-testing, mocking

如何在不更改任何一个导入模块中的代码的情况下模拟两个深度导入的 Python 类？假设我正在导入一个 Web 实用程序库，该库导入一个 HTTPClient() - 我如何编写一个单元测试，模拟 HTTPClient 以返回一个值，而不更改文件 web_utils.py？我想在 DataHandler 中使用数据操作（而不是模拟*出来*），但我不希望 HTTPClient 实际连接到网络。

这甚至可能吗？鉴于 Python 有猴子补丁，它当然看起来应该是。还是有替代/更好的方法？我仍在弄清楚模拟过程，更不用说改变进口了。

```
# someLib/web_utils.py
from abc.client import SomeHTTPClient # the class to replace

def get_client():
    tc = SomeHTTPClient(endpoint='url') # fails when I replace the class
    return tc

class DataHandler(object):
    def post_data(someURL, someData):
        newData = massage(someData)
        client = get_client()
        some_response = client.request(someURL, 'POST', newData)
        return some_response

# code/myCode.py
from someLib.web_utils import DataHandler

dh = DataHandler()
reply = dh.post_data(url, data)

# tests/myTests.py
from django.test.testcases import TestCase
from mock import Mock

class Mocking_Test(TestCase):
    def test_mock(self):
        from someLib import web_utils
        fakeClient = Mock()
        fakeClient.request = web_utils.SomeHTTPClient.request # just to see if it works
        web_utils.SomeHTTPClient = fakeClient
        dh = DataHandler()
        reply = dh.post_data(url='somewhere', data='stuff') 
```

更新 - 添加了该`get_client()`功能。我认为@spicavigo 的答案在正确的轨道上——它似乎确实正在取代`SomeHTTPClient`课程。但由于某种原因，该类没有实例化一个对象（错误是，“必须是类型，而不是 Mock”）。我也看不出它是如何成为一个`Mock()`已创建的对象，而不是一个类。所以我不确定如何使这部分工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T13:30:50.353

你能把它添加到 myTest.py 并尝试

```
from someLib import web_utils
web_utils.SomeHTTPClient = <YOUR MOCK CLASS> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T18:15:14.540

这是最终奏效的方法：

```
class Mocking_Test(TestCase):
    def test_mock(self):
        def return_response(a, b, c, *parms, **args):
            print "in request().return_response"
            class makeResponse(object):
                status = 200
                reason = "making stuff up"
            return makeResponse()

        fakeClient = Mock()
        fakeClient.return_value = return_response

        #with patch('abc.client.SomeHTTPClient') as MockClient: # not working.
        with patch('abc.client.SomeHTTPClient.request', new_callable=fakeClient):
            dh = DataHandler()
            reply = dh.post_data(url='somewhere', data='stuff') 
```

我在原来的帖子中走在正确的轨道上`patch`，我只是没有*正确地*进行修补。另外，我不是替换整个类，而是仅替换类`request`上的函数（这是所有需要模拟的内容，以避免实际发出 HTTP 请求）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-06T14:18:07.190

我知道这不是你想要的，但是在创建你的模拟类之后，我会简单地做这样的事情，以使代码更干净（在 bash shell 中，否则如果你有 1 个文件，你可以做一个 find 和代替）

```
find . -name "*.py" -type f -exec sed -i "s/<old_class>/<mock_class>/g" '{}' \; 
```

这应该用新类替换旧类的所有实例，我个人认为它会使代码更简洁。如果您只想要一个文件，而不是所有 .py 文件，只需将 -name 更改为“file.py”

# python - 多维置信区间

> ID：12301071
> 
> 赞同：20
> 
> 时间：2012-09-06T13:20:39.267
> 
> 标签：python, matplotlib, scipy

我有许多元组（par1，par2），即通过多次重复实验获得的二维参数空间中的点。

我正在寻找一种计算和可视化置信椭圆的可能性（不确定这是否是正确的术语）。这是我在网上找到的一个示例图来说明我的意思：

![在此处输入图像描述](../Images/ee4c5a98b1dd073e30fdbc6309ab153f.png)

来源：blogspot.ch/2011/07/classification-and-discrimination-with.html

因此，原则上，我猜必须将多元正态分布拟合到数据点的二维直方图。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-09-07T15:39:26.937

听起来你只想要点散点的 2-sigma 椭圆？

如果是这样，请考虑这样的事情（来自这里的论文的一些代码：[https](https://github.com/joferkington/oost_paper_code/blob/master/error_ellipse.py) ://github.com/joferkington/oost_paper_code/blob/master/error_ellipse.py ）：

```
import numpy as np

import matplotlib.pyplot as plt
from matplotlib.patches import Ellipse

def plot_point_cov(points, nstd=2, ax=None, **kwargs):
    """
    Plots an `nstd` sigma ellipse based on the mean and covariance of a point
    "cloud" (points, an Nx2 array).

    Parameters
    ----------
        points : An Nx2 array of the data points.
        nstd : The radius of the ellipse in numbers of standard deviations.
            Defaults to 2 standard deviations.
        ax : The axis that the ellipse will be plotted on. Defaults to the 
            current axis.
        Additional keyword arguments are pass on to the ellipse patch.

    Returns
    -------
        A matplotlib ellipse artist
    """
    pos = points.mean(axis=0)
    cov = np.cov(points, rowvar=False)
    return plot_cov_ellipse(cov, pos, nstd, ax, **kwargs)

def plot_cov_ellipse(cov, pos, nstd=2, ax=None, **kwargs):
    """
    Plots an `nstd` sigma error ellipse based on the specified covariance
    matrix (`cov`). Additional keyword arguments are passed on to the 
    ellipse patch artist.

    Parameters
    ----------
        cov : The 2x2 covariance matrix to base the ellipse on
        pos : The location of the center of the ellipse. Expects a 2-element
            sequence of [x0, y0].
        nstd : The radius of the ellipse in numbers of standard deviations.
            Defaults to 2 standard deviations.
        ax : The axis that the ellipse will be plotted on. Defaults to the 
            current axis.
        Additional keyword arguments are pass on to the ellipse patch.

    Returns
    -------
        A matplotlib ellipse artist
    """
    def eigsorted(cov):
        vals, vecs = np.linalg.eigh(cov)
        order = vals.argsort()[::-1]
        return vals[order], vecs[:,order]

    if ax is None:
        ax = plt.gca()

    vals, vecs = eigsorted(cov)
    theta = np.degrees(np.arctan2(*vecs[:,0][::-1]))

    # Width and height are "full" widths, not radius
    width, height = 2 * nstd * np.sqrt(vals)
    ellip = Ellipse(xy=pos, width=width, height=height, angle=theta, **kwargs)

    ax.add_artist(ellip)
    return ellip

if __name__ == '__main__':
    #-- Example usage -----------------------
    # Generate some random, correlated data
    points = np.random.multivariate_normal(
            mean=(1,1), cov=[[0.4, 9],[9, 10]], size=1000
            )
    # Plot the raw points...
    x, y = points.T
    plt.plot(x, y, 'ro')

    # Plot a transparent 3 standard deviation covariance ellipse
    plot_point_cov(points, nstd=3, alpha=0.5, color='green')

    plt.show() 
```

![在此处输入图像描述](../Images/e717f8d03bc7c5a43c4c113ca69491a5.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-09-28T13:40:59.323

请参阅帖子[如何绘制协方差误差椭圆](http://www.visiondummy.com/2014/04/draw-error-ellipse-representing-covariance-matrix/)。

这是python的实现：

```
import numpy as np
from scipy.stats import norm, chi2

def cov_ellipse(cov, q=None, nsig=None, **kwargs):
    """
    Parameters
    ----------
    cov : (2, 2) array
        Covariance matrix.
    q : float, optional
        Confidence level, should be in (0, 1)
    nsig : int, optional
        Confidence level in unit of standard deviations. 
        E.g. 1 stands for 68.3% and 2 stands for 95.4%.

    Returns
    -------
    width, height, rotation :
         The lengths of two axises and the rotation angle in degree
    for the ellipse.
    """

    if q is not None:
        q = np.asarray(q)
    elif nsig is not None:
        q = 2 * norm.cdf(nsig) - 1
    else:
        raise ValueError('One of `q` and `nsig` should be specified.')
    r2 = chi2.ppf(q, 2)

    val, vec = np.linalg.eigh(cov)
    width, height = 2 * sqrt(val[:, None] * r2)
    rotation = np.degrees(arctan2(*vec[::-1, 0]))

    return width, height, rotation 
```

Joe Kington 的回答中*标准差*的含义是**错误的。**通常我们使用 1, 2 sigma 来表示 68%, 95% 的置信度，但他的答案中的 2 sigma 椭圆不包含总分布的 95% 概率。正确的方法是使用卡方分布来估计椭圆大小，如[帖子](http://www.visiondummy.com/2014/04/draw-error-ellipse-representing-covariance-matrix/)所示。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-07-01T16:29:17.903

我稍微修改了上面绘制错误或置信区域轮廓的示例之一。现在我认为它给出了正确的轮廓。

它给出了错误的轮廓，因为它应该将 scoreatpercentile 方法应用于联合数据集（蓝色 + 红色点），而它应该单独应用于每个数据集。

修改后的代码如下：

```
import numpy
import scipy
import scipy.stats
import matplotlib.pyplot as plt

# generate two normally distributed 2d arrays
x1=numpy.random.multivariate_normal((100,420),[[120,80],[80,80]],400)
x2=numpy.random.multivariate_normal((140,340),[[90,-70],[-70,80]],400)

# fit a KDE to the data
pdf1=scipy.stats.kde.gaussian_kde(x1.T)
pdf2=scipy.stats.kde.gaussian_kde(x2.T)

# create a grid over which we can evaluate pdf
q,w=numpy.meshgrid(range(50,200,10), range(300,500,10))
r1=pdf1([q.flatten(),w.flatten()])
r2=pdf2([q.flatten(),w.flatten()])

# sample the pdf and find the value at the 95th percentile
s1=scipy.stats.scoreatpercentile(pdf1(pdf1.resample(1000)), 5)
s2=scipy.stats.scoreatpercentile(pdf2(pdf2.resample(1000)), 5)

# reshape back to 2d
r1.shape=(20,15)
r2.shape=(20,15)

# plot the contour at the 95th percentile
plt.contour(range(50,200,10), range(300,500,10), r1, [s1],colors='b')
plt.contour(range(50,200,10), range(300,500,10), r2, [s2],colors='r')

# scatter plot the two normal distributions
plt.scatter(x1[:,0],x1[:,1],alpha=0.3)
plt.scatter(x2[:,0],x2[:,1],c='r',alpha=0.3) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T23:25:14.233

我想您正在寻找的是计算[Confidence Regions](http://en.wikipedia.org/wiki/Confidence_region)。

我不太了解它，但作为一个起点，我会检查python的[sherpa应用程序。](http://cxc.cfa.harvard.edu/contrib/sherpa/)至少，在他们的 Scipy 2011 演讲中，作者提到您可以使用它来确定和获得置信区域（尽管您可能需要为您的数据建立一个模型）。

查看夏尔巴人谈话的[视频](http://archive.org/details/Wednesday-204-9-SherpaMethodsForCalculatingConfidenceLimitsOfModel)和相应的[幻灯片](http://cxc.harvard.edu/contrib/sherpa/scipy11/)。

高温高压

# eclipse - 为什么m2eclipse从svn导入maven项目时要重命名模块？

> ID：12301073
> 
> 赞同：1
> 
> 时间：2012-09-06T13:20:58.747
> 
> 标签：eclipse, maven, m2eclipse

基本上有一个我不熟悉的项目使用 maven。我以前只使用过一次maven。无论如何，我正在使用 m2eclipse 插件。项目是一个根目录，所有模块都是子项目。我将它作为一个 maven 项目签入，它正确创建了所有子项目，但它更改了所有目录的名称。

我不知道它为什么这样做，但这会导致很多问题。从现在开始，模块/项目将无法更新。通过 maven 子菜单进行正常同步和“更新 maven”都不能正确更新项目。而且我显然不能再提交/共享项目了，因为目录结构已经改变。

所以我的问题是从 svn 导入 maven 项目的正确方法是什么，这样它就不会这样做了？我想我也想知道它为什么这样做？它导致了这么多问题，为什么要重命名它们？我在某处读到它被重命名为工件 ID ......但就像我说的，我不知道为什么。

另一种方法是根本不使用 m2eclipse 插件，而是使用 maven 的 eclipse:eclipse 命令（我相信就是这样）。有没有办法使这项工作？

感谢您的帮助和知识，

-阿萨夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T14:03:02.400

我有一个类似的结构，除了在我的情况下，子项目位于单独的存储库中，并通过`svn:externals`. 我通过选择执行签出`Import -> SVN -> Project from SVN`，一旦所有内容都签出 - 只有主项目显示在 Eclipse 中 - 我选择`Import -> Maven -> Existing Maven Projects`.

最后，我所有的项目都显示在 Eclipse 中，没有修改目录，版本控制也没有问题。

# sql - 如何从 EXEC() 语句中运行的 INSERT 获取 SCOPE_IDENTITY()

> ID：12301075
> 
> 赞同：6
> 
> 时间：2012-09-06T13:21:05.730
> 
> 标签：sql, sql-server, scope-identity

我正在存储过程中构建动态插入语句。

我在变量中构建 sql 语法，然后使用`EXEC(@VarcharVariable)`.

SQL 插入工作正常，但是当我`SET @Record_ID = Scope_Identity()`之后执行时，我没有得到值。

我怎样才能捕捉到这个？我需要将它包装到`EXEC`?

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-06T13:27:30.237

基本示例，使用 sp_executesql

```
DECLARE @sql NVARCHAR(MAX)
DECLARE @Id INTEGER

SET @sql = 'INSERT MyTable (Field1) VALUES (123); SELECT @Id = SCOPE_IDENTITY()'
EXECUTE sp_executesql @sql, N'@Id INTEGER OUTPUT', @Id OUTPUT

-- @Id now has the ID in 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-15T16:31:58.533

你也可以试试这个......

```
CREATE PROCEDURE [dbo].[SaveSingleColumnValueFromGrid]
(
    @TableName VARCHAR(200),
    @ColumnName VARCHAR (200),
    @CompareField VARCHAR(200),
    @CompareValue VARCHAR(200),
    @NewValue VARCHAR(200),
    @Result INT OUTPUT
)
AS
BEGIN
    DECLARE @SqlString NVARCHAR(2000),
            @id INTEGER = 0;

    IF @CompareValue = ''
        BEGIN

            SET @SqlString = 'INSERT INTO ' + @TableName + ' ( ' + @ColumnName +  ' )  VALUES ( ''' + @NewValue + ''' ) ; SELECT @id = SCOPE_IDENTITY()';
            EXECUTE sp_executesql @SqlString, N'@id INTEGER OUTPUT',  @id OUTPUT
        END
    ELSE
        BEGIN
            SET @SqlString = 'UPDATE ' + @TableName + ' SET ' + @ColumnName +  ' = ''' + @NewValue + '''  WHERE ' + @CompareField +  ' = ''' + @CompareValue + '''';
            EXECUTE sp_executesql @SqlString
            set @id = @@ROWCOUNT
        END

    SELECT @Result = @id
END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T13:24:01.687

是的，它应该是动态 sql 的一部分，这就是 scope_identity() 的用途

# php - 分隔两个用破折号连接的数字

> ID：12301076
> 
> 赞同：1
> 
> 时间：2012-09-06T13:21:09.447
> 
> 标签：php

谁能告诉我如何区分以下数字。

```
12255252-675765675 
```

所以它们可以单独调用：

```
$number1 = 12255252;

$number2 = 675765675; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T13:22:19.833

使用[爆炸](http://uk.php.net/explode)：

```
$number = '12255252-675765675';
$exp = explode('-', $number);
echo $exp[0]."<br />";
echo $exp[1]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T13:22:46.450

```
$result = explode('-', $yournumber);
$number1 = $result[0];
$number2 = $result[1]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T13:24:33.947

```
$number = '12255252-675765675';
list($number1, $number2) = explode('-', $number); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T13:25:22.137

您可以使用explode 将其分开。

```
<?php
$number = '12255252-675765675';
$new_arr = explode('-', $number);
echo $new_arr[0]; // returns 12255252
echo $new_arr[1]; // returns 675765675
?> 
```

[在这里爆炸](http://php.net/manual/en/function.explode.php)文档。

# ios - 调用 openURL 安装 App OTA 导致安装缓存的应用

> ID：12301079
> 
> 赞同：10
> 
> 时间：2012-09-06T13:21:11.303
> 
> 标签：ios, uiapplication

我正在创建一个内部应用程序来提供我们的业务客户可以无线安装的更新应用程序。

最终我启动安装的方式是：

```
NSURL *otaURL = [NSURL URLWithString:@"itms-services://?action=download-manifest&url=<<my-url.plist>>"]; 
[[UIApplication sharedApplication] openURL:otaURL]; 
```

这很好用，但我们注意到它有时会保留 plist 或 ipa 文件的缓存并安装旧版本。我们已经排除了它没有在服务器上更新，因为我们甚至可以从服务器上删除 ipa 文件，它仍然会安装旧版本。

更改 .plist 和 .ipa 文件名将起作用，但并不是真正想要的最终状态，所以我的问题是：有没有办法强制设备退出并从服务器获取文件，而不是依赖它的缓存？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-19T17:28:16.680

我有一个非常相似的问题，我用（肮脏的）解决方法解决了它；仍然比为每个新版本创建不同的 .plist 文件更好。

我在 url 中插入了一些随机数，例如：

```
 NSURL *otaURL = [NSURL URLWithString:[NSString stringWithFormat:@"itms-services://?action=download-manifest&url=myapp.%d.plist", arc4random() % 10000]; 
 [[UIApplication sharedApplication] openURL:otaURL]; 
```

另一方面，我在 .htaccess 中添加了一条规则（假设是 Apache，配置了 mod_rewrite）：

```
AddType application/octet-stream ipa
AddType text/xml plist

RewriteEngine on
RewriteRule (.*)\.\d+\.plist $1.plist 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T16:57:46.447

我认为 TestFlight 的人们遇到了同样的问题。在使用他们的服务时，我发现在不删除任何现有旧版本的情况下更新应用程序可能会导致一个非常错误的行为，其中一半的旧版本正在运行（例如图标）和一半的新行为。

那真的很奇怪。参照。另一个问题：[为什么通过 TestFlight 安装时某些文件没有正确安装？](https://stackoverflow.com/questions/8727616/why-are-some-files-not-correctly-installed-when-installing-via-testflight)

您应该尝试与 Apple 的支持人员或 TestFlight 人员取得联系，看看他们是否解决了这个问题。祝你好运！

# eclipse - 在 Eclipse 中突出显示文本文件中的相同单词

> ID：12301080
> 
> 赞同：6
> 
> 时间：2012-09-06T13:21:13.093
> 
> 标签：eclipse, text, notepad++, highlight

是否有任何选项可以在 Eclipse 的文本文件中突出显示相同的单词。我知道 eclipse 正在突出显示 java 代码。

但是我们也可以在文本文件中以某种方式突出显示相同的单词吗？

Notepad++ 中也有同样的功能。如果我们选择某个单词，它将突出显示整个文件中的所有相同单词。

![记事本++高亮](../Images/268878a2c20662613c22026e77a8c3ea.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T13:42:29.693

如果您启用“标记出现次数”（Alt + Shift + O），那么所有与您标记的单词相同的单词都将被突出显示。

![在此处输入图像描述](../Images/483da64a0ce585daca87621d4725fa8a.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T13:28:26.753

好吧，如果您仅在当前打开的文件中搜索（通过 CTRL-F），那么不，您不能突出显示所有内容。

但是，如果您使用高级搜索（CTRL-H，然后转到“文件搜索”选项卡），您可以在那里输入搜索模式，以及应该搜索的文件的文件名模式，以及何时搜索完成，搜索词在找到它们的每个文件中突出显示：

![在此处输入图像描述](../Images/7d3d07833e1f74c105071a0ecaed1bec.png)

# php - 登录 php 会话详细信息未传递到管理页面

> ID：12301086
> 
> 赞同：0
> 
> 时间：2012-09-06T13:21:30.040
> 
> 标签：php, sql-server, session

我有一个我无法弄清楚的问题，我已经用两个单独的服务器测试了相同的代码，即服务器 A 运行良好，而我需要此页面存在的服务器 B 无法运行。我需要允许用户登录系统并捕获登录详细信息以发表公告。

我有以下代码。

```
<?php
session_start();
ob_start();
require_once("dugsi/validation.php");
?>

Form

<form method="post" id="loginForm" action="dugsi/login_validation.php">
            <div>
                <label for="username">User name</label>
                <input id="username" name="username" type="text" autocomplete="off"/>
                <span id="userInfo"></span>
            </div>
            <div>
                <label for="password">Password</label>
                <input id="password" name="password" type="password" autocomplete="off"/>
                <span id="passwordInfo"></span>
            </div>
            <div>
                <input id="send" name="send" type="submit" value="Login" />
            </div>
        </form> 
```

验证 php 文件

```
 <?php
date_default_timezone_set('Europe/London');
session_start();
ob_start();

require_once("dbconnection.php");

login_user();

function login_user()
{
    global $conn;
    $username = $_POST['username'];
    $pass = $_POST['password'];

    $password = hash('sha256', $pass);

    try
    {
        $login_sql =  "SELECT * FROM loginuser WHERE username = :username AND password = :password";
        $result = $conn->prepare($login_sql);
        $result->execute(array(':username'=> $username, ':password'=>$password));

        $_SESSION = $result->fetch(PDO::FETCH_ASSOC);

        $row_count = $result->rowCount();

        if($row_count == 1)
        {

            if ($_SESSION['access_level']  == 1)
            {

            }
            //student 
            else if ($_SESSION['access_level'] == 2)
            {
                $student_sql = "SELECT * FROM loginuser, student_module, module,student 
                                     WHERE loginuser.username=student.username 
                                     AND student.username=student_module.student_username 
                                     AND student_module.`module_id` = module.id 
                                     AND loginuser.username= :username";
                $result_student_sql = $conn->prepare($student_sql);
                $result_student_sql->execute(array(':username'=>$username));

                $_SESSION = $result_student_sql->fetch(PDO::FETCH_ASSOC);

                $module = $_SESSION['module_id'];

                switch ($module)
                {
                    case "ab01":
                        header("Location: http://madarasah.com//dugsi/module/ab01_student.php");
                        break;
                    case "ai01":
                        header("Location: http://madarasah.com//project/module/ai01.php");
                        break;
                    case "fa01":
                        header("Location: http://madarasah.com//project/module/fa01.php");
                        break;
                    case "kh01":
                        header("Location: http://madarasah.com//project/module/kh01.php");
                        break;
                    case "ma01":
                        header("Location: http://madarasah.com//project/module/ma01.php");
                        break;
                    case "ma02":
                        header("Location: http://madarasah.com//project/module/ma02.php");
                        break;

                }

            }
            //teacher
            else if ($_SESSION['access_level'] == 3)
            {
            $teacher_sql = "SELECT * FROM loginuser, teacher_module, module,teacher 
                                     WHERE loginuser.username=teacher.username 
                                     AND teacher.username=teacher_module.teacher_username 
                                     AND teacher_module.`module_id` = module.id 
                                     AND loginuser.username= :username";

                $result_teacher_sql = $conn->prepare($teacher_sql);
                $result_teacher_sql->execute(array(':username'=>$username));

                $_SESSION = $result_teacher_sql->fetch(PDO::FETCH_ASSOC);

                $module = $_SESSION['module_id'];

                switch ($module)
                {
                    case "ab01":
                        header("Location: http://madarasah.com/dugsi/module/ab01.php");
                        break;
                    case "ai01":
                        header("Location: http://madarasah.com/dugsi/module/ai01.php");
                        break;
                    case "fa01":
                        header("Location: http://madarasah.com/dugsi/module/fa01.php");
                        break;
                    case "kh01":
                        header("Location: http://madarasah.com/dugsi/module/kh01.php");
                        break;
                    case "ma01":
                        header("Location: http://madarasah.com/dugsi/module/ma01.php");
                        break;
                    case "ma02":
                        header("Location: http://madarasah.com/dugsi/module/ma02.php");
                        break;

                }

            }

            else if ($_SESSION['access_level'] == 4) 
            {
                $admin_sql = "SELECT * FROM loginuser, admin 
                                     WHERE loginuser.username=admin.username 
                                     AND loginuser.username= :username";
                $result_admin_sql = $conn->prepare($admin_sql);
                $result_admin_sql->execute(array(':username'=>$username));

                $_SESSION = $result_admin_sql->fetch(PDO::FETCH_ASSOC);

                header("Location:http://madarasah.com/dugsi/admin/admin.php");

                exit();

            }
        }
        else
        {
            echo "wrond login details";
        }

    $conn = null;

    }
    catch(PDOException $exception)
    {
         printf("Failed to fetch the database. Error: %s",  $exception->getMessage());
    }

}

ob_flush(); 
?> 
```

# javascript - 谷歌地图 api (v3) 中的可选形状（圆形/矩形）

> ID：12301088
> 
> 赞同：0
> 
> 时间：2012-09-06T13:21:34.853
> 
> 标签：javascript, google-maps-api-3, geometry

我制作了一个谷歌地图，您可以在其中使用绘图管理器或使用自定义的“绘制圆”和“绘制矩形”按钮绘制圆/矩形，如 [http://googlegeodevelopers.blogspot.com.au/2011/11/上的示例使您的地图与 shape.html 交互](http://googlegeodevelopers.blogspot.com.au/2011/11/make-your-map-interactive-with-shape.html)

但是在这个例子中，可以选择形状然后在我的版本中删除，这是不可能的；总是选择所有形状，我在文档中找不到任何东西？

我的代码：

```
<script type="text/javascript">
function drawCircle(){
        console.log("Drawing Circle on Map");
        var circleOptions = {
            <!--draw the circle in the center of the viewport-->
            center : (map.getCenter()),
            radius : 1000000,
            map: map,
            editable: true,
            clickable:true
        };

        circle = new google.maps.Circle(circleOptions);
        return false;
    }

    function drawRectangle(){
        console.log("Drawing Rectangle on Map");
        var rectOptions = {
            <!--draw the circle in the center of the viewport-->
            bounds: map.getBounds(),
            radius : 1000000,
            map: map,
            editable: true,
            clickable:true
        };

        rectangle = new google.maps.Rectangle(rectOptions);
        return false;
    }

    function showDrawingManager(){
        var managerOptions = {
            drawingControl: true,
            drawingControlOptions: {
            position: google.maps.ControlPosition.TOP_CENTER,
            drawingModes: [google.maps.drawing.OverlayType.MARKER, google.maps.drawing.OverlayType.CIRCLE,google.maps.drawing.OverlayType.RECTANGLE]
            },
            markerOptions: {
                editable: true
            },
            circleOptions: {
                editable: true
            },
            rectangleOptions: {
                editable : true
            }
        }

        var drawingManager = new google.maps.drawing.DrawingManager(managerOptions);
        drawingManager.setMap(map); 
    }
   </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T08:48:43.887

这更好： [http ://www.geocodezip.com/v3_GoogleEx_DrawingTools_deleteAll.html](http://www.geocodezip.com/v3_GoogleEx_DrawingTools_deleteAll.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-09T09:21:46.120

我已经回答了一个问题，其中绘制的圆形/多边形附有删除按钮（ X 标记）。单击它将删除它附加到的形状。

[在 Google Maps API v3 中使用单独的删除按钮绘制圆/多边形](https://stackoverflow.com/questions/45586442/drawing-circles-polygons-with-individual-delete-buttons-in-google-maps-api-v3/45586443#45586443)

# c# - 替换整个html

> ID：12301092
> 
> 赞同：0
> 
> 时间：2012-09-06T13:22:04.920
> 
> 标签：c#, html, dom, bho

我有一个外部 Web 服务，它接收整个 html 字符串解析其内容并在将其返回给浏览器之前对其进行修改。

现在在浏览器中，我只需要用**我收到的内容替换 html 文档，**但事实证明这是一场令人难以置信的**噩梦**！

我尝试了各种组合，例如：

```
document.documentElement.outerHTML = responseText; 
```

和

```
document.getElementsByTagName("html").item(0).innerHTML 
```

和 document.getElementsByTagName("head").item(0).outterHTML

似乎没有任何效果。它要么因 COM 异常而**失败**（是的，它在 BHO 内运行，或者带有其他一些随机消息，表明 O(o)utterHTML 不是目标的有效属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T13:55:34.100

你能改变网络服务吗？如果是这样，您可以使用 HTML 表单。为此，您需要让服务器接受编码为 application/x-www-form-urlencoded 或 multipart/form-data 的数据。

如果你能做到这一点，你可以简单地在你的页面上放置一个带有单个输入的表单。要从 Web 服务获取新代码，请将 HTML 字符串写入输入值并提交表单。浏览器将自动显示返回的 HTML 页面。

如果您不能/不会更改服务，那么我同意 nonnb：我认为不可能替换整个 HTML。但是你可以手动替换 body 和 head 的 innerHTML。从返回的字符串中拆分出身体和头部并替换它们。这与替换整个文档基本相同，但如果需要，您需要手动将属性应用于 body/head/html-tags。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T13:24:02.797

AFAIK，你不能。最接近的是替换[正文的内部 html](https://stackoverflow.com/questions/793436/how-to-select-and-replace-the-whole-page-with-jquery)。

# html - html5中的aes加密

> ID：12301097
> 
> 赞同：0
> 
> 时间：2012-09-06T13:22:10.790
> 
> 标签：html, jquery-mobile

我正在用 HTML5 开发一个应用程序。我想将密码以加密形式存储在数据库中。

有人可以建议我进行加密的代码吗？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T13:24:57.620

这是一个服务器端的问题，你必须在服务器端解决它。HTML5 只是一种标记语言，可以帮助您创建 Web 界面，这是一种客户端的东西。所有主要的服务器端 Web 开发技术，如 PHP、JavaEE、ASP.NET 和 RoR，都有库来使用流行的加密模式，如 AES-256。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T13:29:40.700

使用 PHP 的[Cryptography Extensions](http://www.php.net/manual/en/refs.crypto.php)之一。我会推荐[Hash Function](http://www.php.net/manual/en/function.hash.php)。正如 Arash 已经说过你不能为此使用 HTML 5，HTML 仅用于布局（即它不能处理用户输入）

# android - Android TableLayout - 没有包标识符问题

> ID：12301104
> 
> 赞同：0
> 
> 时间：2012-09-06T13:22:29.643
> 
> 标签：android

我的应用程序有问题。

我有一个网站，我有一个排名表。我想从这张表中得到所有的用户名、积分和奖金。

我使用 Asynctask 通过 Jsoup 将 HttpRequest 发送到我的网站。

解析我的 html 字符串后，我将所有用户名、积分和奖金保存在 3 个数组中。

好的，现在我想创建一个动态表，并在 main_activity.xml 中使用 TableLayout

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/myTableLayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
</TableLayout> 
```

这是应用程序代码：

```
package it.android.mypackage;
import java.io.IOException;

import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.select.Elements;

import android.app.Activity;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.Menu;
import android.widget.TableLayout;
import android.widget.TableRow;
import android.widget.TableRow.LayoutParams;
import android.widget.TextView;

public class MainActivity extends Activity {

    TextView tv;
    TableLayout chartTable;
    String[] users;
    String[] points;
    String[] bonuses;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        chartTable = (TableLayout) findViewById(R.id.myTableLayout);

        String pathURL = "http://mywebsite.com/chart.aspx";

        DownloadWebPageTask task = new DownloadWebPageTask();
        task.execute(pathURL);

    }

    class DownloadWebPageTask extends AsyncTask<String, Void, String> {

        @Override
        protected String doInBackground(String... urls) {
            String response = "";
            String url = urls[0];
            Document doc = null;

            try {
                doc = Jsoup.connect(url).get();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            response = doc.toString();
            return response;
        }

        @Override
        protected void onPostExecute(String result) {
            Document doc = null;

            doc = Jsoup.parse(result);

            Elements listUsers = doc
                    .select("tr[style=border-bottom: 2px solid black;] td:eq(2)");
            Elements listPoints = doc
                    .select("tr[style=border-bottom: 2px solid black;] td:eq(3)");
            Elements listBonuses = doc
                    .select("tr[style=border-bottom: 2px solid black;] td:eq(4)");

                users = (listUsers.text()).split(" ");
                points = (listPoints.text()).split(" ");
                bonuses = (listBonuses.text()).split(" ");

            int i;
            for (i = 0; i < 100; i++) {

                TableRow tr = new TableRow(MainActivity.this);
                tr.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));

                TextView positiontv = new TextView(MainActivity.this);
                positiontv.setText(i+1);
                positiontv.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));

                TextView usernametv = new TextView(MainActivity.this);
                usernametv.setText(users[i]);
                usernametv.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));

                TextView pointstv = new TextView(MainActivity.this);
                pointstv.setText(points[i]);
                pointstv.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));

                TextView bonusestv = new TextView(MainActivity.this);
                bonusestv.setText(bonuses[i]);
                bonusestv.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));

                tr.addView(positiontv);
                tr.addView(usernametv);
                tr.addView(pointstv);
                tr.addView(bonusestv);

                chartTable.addView(tr, new TableLayout.LayoutParams(
                        LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
            }

        }
    }
} 
```

当我调试我的应用程序时，我有一个异常，在 LogCat 中我可以看到：

```
09-06 14:58:21.230: W/ResourceType(29801): No package identifier when getting value for resource number 0x00000001 
```

我有这个错误

```
positiontv.setText(i+1); 
```

以及 setText() 方法中的其他三个 TextView。

```
usernametv.setText(users[i]);
pointstv.setText(points[i]);
bonusestv.setText(bonuses[i]); 
```

我不明白问题出在哪里。

谁来帮帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T18:42:31.887

通过替换解决：

```
positiontv.setText("" + i+1);
usernametv.setText("" + users[i]);
pointstv.setText("" + points[i]);
bonusestv.setText("" + bonuses[i]); 
```

:)

# python - Django 1.3 错误报告删除敏感信息

> ID：12301105
> 
> 赞同：0
> 
> 时间：2012-09-06T13:22:31.447
> 
> 标签：python, django

我知道 django 1.4 具有删除错误报告中的敏感信息的功能。我正在使用 django 1.3 和 python 2.4。我想知道[https://docs.djangoproject.com/en/dev/howto/error-reporting/#filtering -error-report](https://docs.djangoproject.com/en/dev/howto/error-reporting/#filtering-error-reports) s 可以移植到 django 1.3 和 python 2.4。我尝试过但没有成功。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T14:15:12.157

我只是将sensitive_information 装饰器复制到本地decorators.py 文件中，然后使用它。

```
import functools

def sensitive_variables(*variables):
 """
 Indicates which variables used in the decorated function are sensitive, so
 that those variables can later be treated in a special way, for example
 by hiding them when logging unhandled exceptions.

 Two forms are accepted:

* with specified variable names:

    @sensitive_variables('user', 'password', 'credit_card')
    def my_function(user):
        password = user.pass_word
        credit_card = user.credit_card_number
        ...

* without any specified variable names, in which case it is assumed that
  all variables are considered sensitive:

    @sensitive_variables()
    def my_function()
        ...
"""
 def decorator(func):
    @functools.wraps(func)
    def wrapper(*args, **kwargs):
        if variables:
            wrapper.sensitive_variables = variables
        else:
            wrapper.sensitive_variables = '__ALL__'
        return func(*args, **kwargs)
    return wrapper
 return decorator 
```

用法：

```
@sensitive_variables('user', 'pw', 'cc')
def my_view(request):
  pass 
```

也需要 functools.py ，默认情况下它不会随 python2.4 一起提供（我猜） - 你可能必须单独包含该文件。

# c - 在windows机器上读取linux机器上生成的二进制文件

> ID：12301113
> 
> 赞同：1
> 
> 时间：2012-09-06T13:22:50.657
> 
> 标签：c, windows, linux, binary

我正在尝试使用相同的 c 代码读取在 Windows（xp 32 位）机器上的 Linux 机器（OpenSuse 11.2、64 位）上生成的二进制文件，这些文件只是在各自的机器上编译的。在 Windows 机器上，我使用的是 MinGW 编译器。

我可以在 Linux 机器上毫无错误地读取和写入文件，但是，当我尝试在 Windows 机器上读取文件时，代码似乎因文件错误结束而失败。

具体来说：`feof(file)==16`

有谁知道问题可能是什么？更大的问题可能是我的C技能不是很强......

我提取了一些写代码（至少我认为）。注意：有一个写出 ASCII 文件的选项，但我不喜欢：

```
void write_node_data(void *nndes, void *x, void *y, void *z)
 {
   int tmpnndes;
   float *tempx, *tempy, *tempz;
   double *tempx64, *tempy64, *tempz64;
   long tmpnndes64, longcount, totnodes;

   strcpy(tmpname, "nodes   ");  

   if (iflag64)
      totnodes = tmpnndes64 = *((long *) nndes);
   else
      totnodes = tmpnndes = *((int *) nndes);

   if (rflag64)
     {
      tempx64 = (double *) malloc(sizeof(double) * totnodes);
      tempy64 = (double *) malloc(sizeof(double) * totnodes);
      tempz64 = (double *) malloc(sizeof(double) * totnodes);
     }
   else
     {
      tempx = (float*) malloc(sizeof(float) * totnodes);
      tempy = (float*) malloc(sizeof(float) * totnodes);
      tempz = (float*) malloc(sizeof(float) * totnodes);
     }
    if (rflag64)
      {
       for (longcount = 0; longcount < totnodes; longcount++)
     {
      tempx64[longcount] = *((double *) x + longcount);
          tempy64[longcount] = *((double *) y + longcount);
      tempz64[longcount] = *((double *) z + longcount);
         }
      }
    else
      {
       for (longcount = 0; longcount < totnodes; longcount++)
         {
          tempx[longcount] = *((float *) x + longcount); 
          tempy[longcount] = *((float *) y + longcount); 
          tempz[longcount] = *((float *) z + longcount);
     }
      }

   if (filetype == IEEE_F)
      fwrite(tmpname,sizeof(char),8,fp);
   else
      fprintf(fp,"nodes  "); 

   if (iflag64)
     {
      if (filetype == IEEE_F)
         fwrite(&tmpnndes64, INT64, 1, fp);
      else
         fprintf(fp,"%ld\n",tmpnndes64);
      n_nodes = tmpnndes64;
     }
   else
     {
      if (filetype == IEEE_F)
         fwrite(&tmpnndes, INT32, 1, fp);
      else
         fprintf(fp,"%d\n",tmpnndes);
      n_nodes = tmpnndes;
     }
   if (rflag64)
     {
      if (filetype == IEEE_F)
        {
         fwrite(tempx64, FLOAT64, n_nodes, fp);
         fwrite(tempy64, FLOAT64, n_nodes, fp);
         fwrite(tempz64, FLOAT64, n_nodes, fp);
        }
      else
        {
         write_ascii_double(n_nodes, tempx64);
         write_ascii_double(n_nodes, tempy64);
         write_ascii_double(n_nodes, tempz64);
        }
      free(tempx64), free(tempy64), free(tempz64);
     }
   else
     {
      if (filetype == IEEE_F)
        {
         fwrite(tempx, FLOAT32, n_nodes, fp);
         fwrite(tempy, FLOAT32, n_nodes, fp);
         fwrite(tempz, FLOAT32, n_nodes, fp);
        }
      else
        {
         write_ascii_float(n_nodes, tempx);
         write_ascii_float(n_nodes, tempy);
         write_ascii_float(n_nodes, tempz);
        }
      free(tempx), free(tempy), free(tempz);
     }
 } 
```

和阅读代码：

```
if (lstructuredflag == 0 || lstructuredflag == 2)
     {
      lxic = (double *)malloc((lnodes)*sizeof(double));
      lyic = (double *)malloc((lnodes)*sizeof(double));
      lzic = (double *)malloc((lnodes)*sizeof(double));
      if (lxic == NULL || lyic == NULL || lzic == NULL)
        {
         gmvrdmemerr();
         return;
        }
      if (ftype != ASCII)
        {
         if (ftype == IEEEI4R8 || ftype == IEEEI8R8)
           {
            tmpdouble = (double *)malloc((3*lnodes)*sizeof(double));
            if (tmpdouble == NULL)
              {
               gmvrdmemerr();
               return;
              }
            binread(tmpdouble,doublesize,DOUBLE,3*lnodes,gmvin);
            ioerrtst(gmvin);
            if (node_inp_type == 0)  /*  nodes type  */
              {
               for (i = 0; i < lnodes; i++)
                 {
                  lxic[i] = tmpdouble[i];
                  lyic[i] = tmpdouble[lnodes+i];
                  lzic[i] = tmpdouble[2*lnodes+i];
                 }
              }
            if (node_inp_type == 1)  /*  nodev type  */
              {
               for (i = 0; i < lnodes; i++)
                 {
                  lxic[i] = tmpdouble[3*i];
                  lyic[i] = tmpdouble[3*i+1];
                  lzic[i] = tmpdouble[3*i+2];
                 }
              }
            FREE(tmpdouble);
           }
         else
           {
            tmpfloat = (float *)malloc((3*lnodes)*sizeof(float));
            if (tmpfloat == NULL)
              {
               gmvrdmemerr();
               return;
              }
            binread(tmpfloat,floatsize,FLOAT,3*lnodes,gmvin);
            ioerrtst(gmvin);
            if (node_inp_type == 0)  /*  nodes type  */
              {
               for (i = 0; i < lnodes; i++)
                 {
                  lxic[i] = tmpfloat[i];
                  lyic[i] = tmpfloat[lnodes+i];
                  lzic[i] = tmpfloat[2*lnodes+i];
                 }
              }
            if (node_inp_type == 1)  /*  nodev type  */
              {
               for (i = 0; i < lnodes; i++)
                 {
                  lxic[i] = tmpfloat[3*i];
                  lyic[i] = tmpfloat[3*i+1];
                  lzic[i] = tmpfloat[3*i+2];
                 }
              }
            FREE(tmpfloat);
           }
        }
      if (ftype == ASCII)
        {
         tmpdouble = (double *)malloc((3*lnodes)*sizeof(double));
         if (tmpdouble == NULL)
              {
               gmvrdmemerr();
               return;
              }
         rdfloats(tmpdouble,3*lnodes,gmvin);
         if (node_inp_type == 0)  /*  nodes type  */
           {
            for (i = 0; i < lnodes; i++)
              {
               lxic[i] = tmpdouble[i];
               lyic[i] = tmpdouble[lnodes+i];
               lzic[i] = tmpdouble[2*lnodes+i];
              }
           }
         if (node_inp_type == 1)  /*  nodev type  */
           {
            for (i = 0; i < lnodes; i++)
              {
               lxic[i] = tmpdouble[3*i];
               lyic[i] = tmpdouble[3*i+1];
               lzic[i] = tmpdouble[3*i+2];
              }
           }
         FREE(tmpdouble);
        }
     } 
```

函数 Binread：

```
int binread(void* ptr, int size, int type, long nitems, FILE* stream)
{
  int ret_stat;

#ifdef CRAY

  float *floatptr, *floatbuf; 
  double *doubleptr, *doublebuf; 
  int tierr, ttype, tbitoff;
  char *charptr;
  int  *intptr, *intbuf;
  short *shortptr, *shortbuf;

   tbitoff = 0;  tierr = 0;
   ret_stat = 0;

   switch(type)
     {

      case CHAR:
        charptr = (char *)ptr;
        ret_stat = fread(charptr, size, nitems, stream);
        break;

      case SHORT:
        ttype = 7;
        shortbuf = (short *)malloc(size*nitems);
        shortptr = (short *)ptr;

        ret_stat = fread(shortbuf, size, nitems, stream);
        tierr = IEG2CRAY(&ttype, &nitems, shortbuf, &tbitoff, shortptr);
        free(shortbuf);
        break;

      case INT:
        ttype = 1;
        intptr = (int *)ptr;
        intbuf = (int *)malloc(size*nitems);

        ret_stat = fread(intbuf, size, nitems, stream);
        tierr = IEG2CRAY(&ttype, &nitems, intbuf, &tbitoff, intptr);
        free(intbuf);
        break;

      case FLOAT:
        ttype = 2;
        floatptr = (float *)ptr;
        floatbuf = (float *)malloc(size*nitems);

        ret_stat = fread(floatbuf, size, nitems, stream);
        tierr = IEG2CRAY(&ttype, &nitems, floatbuf, &tbitoff, floatptr);
        free(floatbuf);
        break;

      case DOUBLE:
        ttype = 3;
        doubleptr = (double *)ptr;
        doublebuf = (double *)malloc(size*nitems);

        ret_stat = fread(doublebuf, size, nitems, stream);
        tierr = IEG2CRAY(&ttype, &nitems, doublebuf, &tbitoff, doubleptr);
        free(doublebuf);
        break;

      case WORD:
        intptr = (int *)ptr;
        ret_stat = fread(intptr, size, nitems, stream);
        break;

      default:
        fprintf(stderr,"Error: Cannot match input datatype.\n");
        gmv_data.keyword = GMVERROR;
        return;
     }

     if(tierr != 0)
       {
        fprintf(stderr,"Error: Cannot convert IEEE data to CRAY\n");
        gmv_data.keyword = GMVERROR;
        return;
       }

     return ret_stat;

#else

   ret_stat = fread(ptr, size, nitems, stream);

   if (swapbytes_on && type != CHAR && type != WORD)
      swapbytes(ptr, size, nitems);

   return ret_stat;

#endif

} 
```

免责声明：我没有编写此代码，我只是想使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T13:28:27.860

您是否指定“b”以二进制模式打开文件？尝试使用`fopen(fname, "rb")`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T13:30:10.637

如果您尝试直接加载例如结构，请不要。切换编译器后，绝对没有理由相信该结构与您在另一台机器上的结构是逐字节相同的。即使在同一个 CPU 上，填充和对齐也可能不同。

我的意思是不要这样做：

```
struct foo my_foo;

fwrite(&my_foo, sizeof my_foo, 1, my_binary_file); 
```

相反，分别序列化和反序列化结构的每个字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T13:31:53.007

我可能在这里叫错了树，但我认为

```
feof(file)=16 
```

用作“if”的一部分将产生错误，因为它通过*单个*等于运算符被使用/解释为对函数的*赋值。*它可能应该是：

 *```
if (feof(file)==16) /* setting aside the comparison to 16 rather than for 0 or non-zero */ 
```*

# javascript - 如何强制函数在任何焦点更改时运行？

> ID：12301119
> 
> 赞同：0
> 
> 时间：2012-09-06T13:23:27.970
> 
> 标签：javascript, jsf

我的目标是确保同一个组件始终具有焦点。该表单有一个输入框和许多按钮。用户将扫描条形码（使用模拟键盘的扫描仪），然后选择一个按钮来激活一个功能。我希望他们能够扫描多个条形码，而无需单击输入框。我有以下 javascript 来完成准备收件箱以进行覆盖的肮脏工作（目前只有当他们将焦点移到收件箱时）。

```
function SelectAll(id)
    {
        document.getElementById(id).focus();
        document.getElementById(id).select();
    }
    window.onload = SelectAll('form:scan'); 
```

我需要让输入畅通无阻（因此认为它应该只在失去焦点时才返回焦点）。我已经尝试添加功能来聚焦更改和按钮激活事件，但没有成功。确实需要使其页面宽，因为在按钮激活后焦点转到未知的地方。

**编辑**

在这种情况下，似乎对模糊事件进行焦点更改不起作用。看起来 JSF 的处理程序在执行模糊事件（以及因此的焦点更改请求）之后移动焦点。任何 JSF 专家都知道如何进入 JSF 的处理程序并对其进行调整，而不是尝试使用纯 JavaScript 来完成？

**编辑**

我是其中的一部分。模糊事件被忽略的原因与在 AJAX 调用期间重新渲染整个表单有关，而不仅仅是单个组件。限制更新范围使其适用于所有组件，除了输入框本身。我需要输入框本身重新渲染，因为它对输入进行了一些验证。如果我禁用它的重新渲染，它将在输入时选择。如果我启用重新渲染，则选择代码会在重新输入验证信息*之前*运行。当信息重新输入时，选择会丢失（保持焦点，但如果没有选择，我们无法立即再次扫描，需要点击某处）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T13:52:58.970

试试这个，很确定窗口加载在 jsfiddle 中不起作用

[http://jsfiddle.net/jemZT/](http://jsfiddle.net/jemZT/)

```
var scannerID = document.getElementById("scannerID");
function startFocus(){
    scannerID.focus();
}
if(window.addEventListener){
    window.addEventListener('load',startFocus,false); //W3C
}
else{
    window.attachEvent('onload',startFocus); //IE
}
scannerID.addEventListener("blur", function(e){
    e.target.focus();
});​ 
```

它们也是用于复制和粘贴的事件，以便在您单击标签时轻松将其复制到剪贴板，您可能会感兴趣，使复制和粘贴代码的过程更简单。

编辑：确认和工作我在我的浏览器中尝试了这个，它工作得很好。

```
<html>
<body>
<input type="text" id="scannerID" />
<script type="text/javascript">
var scannerID = document.getElementById("scannerID");
if(window.addEventListener){
    window.addEventListener('load',startFocus,false); //W3C
}else{
    window.attachEvent('onload',startFocus); //IE
}
function startFocus(){
    scannerID.focus();
}
scannerID.addEventListener("blur", function(e){
    e.target.focus();
});
</script>
</body>
</html> 
```

# ruby-on-rails - ActiveRecord 有一个 MyModel.delete(...) 方法，而 Mongoid 没有？

> ID：12301121
> 
> 赞同：1
> 
> 时间：2012-09-06T13:23:31.233
> 
> 标签：ruby-on-rails, activerecord, mongoid

我们目前正在从 MySQL 迁移到 MongoDB，我偶然发现了以下内容：

```
MyModel.destroy(params[model_ids]) # Remove many objects at once by passing an array of IDs 
```

这适用于 ActiveRecord，但对于 MongoDB 则不行：我必须遍历 ID，找到它，然后`delete`在实例化对象上调用该方法：

```
MyModel.find(params[model_ids]).each do |item|
  item.destroy
end 
```

这是正确的方法吗？Mongoid 不提供上述功能是否有特殊原因？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T14:22:53.467

你可以试试这个

```
MyModel.where(:_id.in => params[model_ids]).destroy 
```

在 Mongoid 中，您可以在标准上运行 destroy 方法。

# javascript - 计算 div 高度并返回为边距？

> ID：12301122
> 
> 赞同：2
> 
> 时间：2012-09-06T13:23:31.453
> 
> 标签：javascript, html

我正在尝试制作一个脚本来计算 div 'id' 的高度并返回与 margin-top 相同的值。但这并没有。怎么了？

```
<script language="text/javascript">
var height = document.getElementById('id').innerHeight;
document.getElementById('id').style.marginTop = height + 'px';
</script> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T13:31:07.417

请记住，您应该只在触发事件后操作 DOM `onload`，或者在触发事件时操作现代浏览器`DOMContentLoaded`。无论如何，`onload`这对你的情况来说很好。

尝试：

```
<script language="text/javascript">
window.onload = function() {
    var height = document.getElementById('id').innerHeight;
    document.getElementById('id').style.marginTop = height + 'px';
}
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T13:33:08.510

尝试;

```
<script type="text/javascript">
window.onload = function() {
var height = document.getElementById('mydiv').offsetHeight;
document.getElementById("mydiv").style.marginTop = height+'px';
}
</script> 
```

**[这](http://jsfiddle.net/blasteralfred/Kstbk/)**是一个现场演示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T13:43:37.760

你的 js 中的第一个错误是 `language="text/javascript"` 它必须是`type="text/javascript"`. 并尝试使用`offsetHeight`代替`innerHeight`

```
 <script type="text/javascript"  >

        var height = document.getElementById('id').offsetHeight;
        document.getElementById('id').style.marginTop = height + 'px';
        }
  </script> 
```

并将其称为`onload`事件。

谢谢 ，

# objective-c - Objective-C WebKit 框架从 Facebook 获取访问令牌

> ID：12301123
> 
> 赞同：0
> 
> 时间：2012-09-06T13:23:35.217
> 
> 标签：objective-c, facebook, macos, webkit

我在互联网上发现了一些信息，可以通过 WebKit 框架从 Facebook 获取访问令牌。这是真的吗？如果是，那该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T13:44:22.683

您可以向 Facebook API 发布请求并取回有效的访问令牌，或者使用[Facebook iOS SDK](https://developers.facebook.com/ios/)让用户登录。

```
-(NSString *)loadAccessToken{
    NSString *accessTokenURL = [NSString stringWithFormat:@"https://graph.facebook.com/oauth/access_token?client_id=%@&client_secret=%@&grant_type=client_credentials",client_id, client_secret];

    ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:[NSURL URLWithString:accessTokenURL]];  
    [request startSynchronous];

    NSMutableString *accessMutable = [[request responseString] mutableCopy];
    [accessMutable replaceOccurrencesOfString:@"access_token=" 
                               withString:@"" 
                                  options:NSLiteralSearch 
                                    range:NSMakeRange(0, [[request responseString] length])];

    return accessMutable;
} 
```

# c# - TPL 数据流和异步方法调用

> ID：12301126
> 
> 赞同：3
> 
> 时间：2012-09-06T13:23:43.037
> 
> 标签：c#, .net, task-parallel-library, async-await, tpl-dataflow

我试图更好地理解并行处理的整个概念并设置了测试用例。在玩了测试之后，我发现在 Dataflow `ActionBlock`（或`TransformBlock`）中使用 Async 方法调用不会对性能产生积极影响，它只会使代码复杂化。我是否正确假设如果我使用 Dataflow Blocks，其中的代码不必是异步的，Dataflow 会自行使其异步。还是我错过了重点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-06T15:41:34.897

TPL Dataflow 不支持并发或并行化（尽管您可以获得`ActionBlock`并行化其处理之类的东西），它是并发或并行代码用于通信数据的东西。除此之外，它是一种消息传递机制——它是共享数据的一种替代方案。共享数据在被多个线程使用时需要昂贵的同步。如果处理得当，消息传递不需要同步，因为需要处理的数据被封装在一条消息中，该消息“发送”到将要处理它的代码。

如果您有特定的设计，您可以使用 TPL 数据流。如果您没有专门实现[基于 Actor 的](http://en.wikipedia.org/wiki/Actor_model)编程、[消息传递](http://en.wikipedia.org/wiki/Message_passing)或非阻塞生产者/消费者场景，那么 TPL 数据流可能会使事情复杂化。

如果您认为您可能想要设计这样的系统，这里有一些很好的资源来了解 TPL 数据流 (TDF)，例如 Stephen Toub（Microsoft 并行团队的成员）的[视频](http://channel9.msdn.com/Shows/Going+Deep/Stephen-Toub-Inside-TPL-Dataflow)，以及[Dataflow MSDN 页面](http://msdn.microsoft.com/en-us/library/hh228603)。

### 更新：

您可以为块设置最大并行度，但将其设置为高于 CPU 或核心数通常会适得其反。假设执行的每个操作都或多或少受 CPU 限制（在运行时以 100% 使用 CPU）。如果操作花费大量时间等待（等待等待句柄，等待消息泵中的消息——这对于操作来说是不正常的，但对于 UI 威胁来说是不正常的——等等），那么一定程度的并行度会超出CPU 的数量可能是有意义的（尽管这很难调整）。当你*运行*的动作比 CPU*多时*受 CPU 限制，您真正开始执行操作系统任务。操作系统希望为每个线程（或本例中的每个操作）放弃 CPU 时间，因为它正在“运行”。当没有足够的 CPU 运行时，操作系统开始抢占多任务，循环将 CPU 时间分配给每个活动线程。每次操作系统将 CPU 从一个线程中取出并交给另一个线程时，称为[上下文切换](http://en.wikipedia.org/wiki/Context_switch)。这*真的很*昂贵（在[2000-8000 cpu 周期](http://msdn.microsoft.com/en-us/magazine/cc163552.aspx#S4)的范围内）。所以，操作系统真的把所有时间都花在了上下文切换上，而不是运行你的操作。

如果您的操作真的是异步的，那么块的并行度是无关紧要的，因为其他东西正在做并行化。但是，同样的问题出现了，您的异步操作正在未经检查地执行，并且您有可能在您引入的上下文切换程度上压倒操作系统。由于缺乏控制，我会认真考虑*不执行异步操作。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T21:11:06.357

TPL Dataflow 不适合所有类型的并行处理，它也不会让你的代码神奇地更快。

TDF 背后的主要思想是你有块，它们独立地完成它们的工作。这意味着每个块的工作都可以在单独的线程上执行，因此在某些情况下使用 TDF 并行化您的代码可能非常简单。

如果块内的代码使用了一些无法共享的资源，这将特别有用。这样，您可以充分利用该共享资源，因为该块的处理独立于其他块。

一般来说，如果您的代码像管道一样，TDF 最合适：一个项目进入，在阶段 1 处理，然后在阶段 2，......，最后是输出。尽管数据流网络可能比这复杂得多。但是你不应该试图强迫这一点，如果你想做的事情不适合 TDF，你是对的，你只会使你的代码复杂化而没有任何好处。

# java - Java 对象/类是否有标准的 XML 模式？

> ID：12301142
> 
> 赞同：1
> 
> 时间：2012-09-06T13:24:19.853
> 
> 标签：java, xml, jaxb, xsd

是否有可用的标准 XML 模式来描述 Java 对象的一般结构和内容？我已经搜索过这个无济于事。

总的来说，我对 XML 和各种基于 Java 的 XML 技术（尤其是 JaxB）都比较陌生，所以如果我忽略了一些东西，请原谅我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T13:25:50.887

简单的答案是没有这样的标准模式。

当您使用 JAXB 之类的东西进行序列化时，您绑定的每个类/类网络实际上都有一个不同的 XML 模式。

* * *

还有一些观察：

*   可以编写能够表示任何类型的 Java 对象的 XML 模式。您将需要一个“对象”元素，该元素具有称为类名的属性，称为“字段”的子元素等等。但生成的 XML 表示将占用更多空间，并且难以阅读和使用。

*   在 JAXB 等中，类网络和 XML 结构之间（显然）存在系统关系，但它不能表示为 XML 模式。相反，从概念上讲，它是从类“生成”模式的映射。（事实上​​，这类似于 XMI 中发生的事情，其中​​元模型映射到 XML 模式。）

*   参照完整性超出了 XML 模式中可表达的范围，但这并不是没有通用模式的原因。即使您忽略参照完整性并将问题简化为“树形”，您仍然无法为 JAXB、XMI 和类似映射产生的那种 XML 生成有用的公共模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T08:31:50.997

它不是官方的 Oracle/Sun 标准，而是第三方工具 JSX，将 java 对象序列化为 xml，并具有[其格式的 XML Schema 规范](http://jsx.org/jsx.xsd)。

[示例 XML](http://jsx.org/)显示了它如何记录对象的内部细节，包括字段类型和继承的类。

Even if you don't use this schema yourself, it would give you a starting point for the issues to be addressed by a format in order to fully represent object state.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T13:46:03.293

XMLSchema 文件描述了符合存储在此 XMLSchema 文件中的元素定义的 XML 文档中什么是可能的和不可能的。

XMLSchema 本身与 Java 无关：这里的 XMLSchema 文件仅用于检查符合 XMLSchema 文件的 XML 文件的有效性。

Java 人员使用 XMLSchema 文件生成能够从符合 XMLSchema 的 XML 文件（xjc 工具）接收数据的 Java 源代码。

您还可以从一组 Java 源文件生成 XMLSchema 文件（为此使用 schemagen 工具）。

当您拥有以下元素时，您可以使用 JAXB 将 Java 对象编组/解组到 XML 文件/从 XML 文件编组/解组：

*   XMLSchema 文件
*   Java 源文件
*   XML 文件

还有其他方法可以将xml 数据从 Java[编组/解组到 Java。](http://docs.oracle.com/javaee/5/api/javax/xml/bind/Unmarshaller.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T13:55:27.723

假设可以构造一种元模式，允许 JAX-B 或其他序列化库生成的所有可能的 XML 文件。然而，大多数人不会发现这样的模式有用，因为它会允许范围如此广泛的 XML 文档，以至于本质上是无用的。相反，人们要么从模式开始并生成 Java 类，要么从特定的 Java 类图开始并生成反映（哈哈）其中特定数据的模式。

# javascript - 如何捕获收到所有ajax请求的事件

> ID：12301146
> 
> 赞同：2
> 
> 时间：2012-09-06T13:24:26.067
> 
> 标签：javascript, jquery

我使用 JQuery。有一个基于小部件的应用程序。单个页面上有多个小部件。每个小部件在加载小部件时都包含 N 个 ajax 请求。

收到所有 ajax 请求的结果后，如何捕获事件？没有计时器有什么办法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T13:30:56.563

愚蠢的 jquery 方法将在每个 ajax 请求完成时被调用。如果您知道 ajax 请求的数量。所以你可以有一个全局变量并在每次调用时递增它，直到它达到所需的值，然后触发你想要的事件

```
var i=0;
$("body").ajaxComplete(function(event,request, settings) {
  if(i==MAX_REQ){
    alert("done all");
  }
  else {
    i+=1;
  } 
```

});

# php - MySQL语法错误，似乎无法弄清楚

> ID：12301147
> 
> 赞同：0
> 
> 时间：2012-09-06T13:24:27.033
> 
> 标签：php, mysql, database

好的，所以我正在为一家房地产公司构建数据库，大约 3 或 4 个月前才开始使用 PHP。我遇到此错误，“您的 SQL 语法有错误；请查看与您的 MySQL 服务器版本相对应的手册，以了解在 'VALUES ('3605 2nd Street', '', 'gfnfgnbfgn', ' MD'，'21230'，'dfgbfgnbg'，''，''，'在第 2 行"。

这是涉及的代码，有一个表单，我使用 POST 方法将信息传递到此页面。

```
<?php
session_start();
require('connect.php');
$address = $_POST["Address"];
$apt = $_POST["Apt #"];
$city = $_POST["City"];
$state = $_POST["State"]; 
$zip = $_POST["Zip"];
$tenant1 = $_POST["Tenant1"];
$tenant1phone = $_POST["Tenant 1 Phone"];
$tenant1email= $_POST["Tenant 1 Email"];
$tenant2 = $_POST["Tenant 2"];
$tenant2phone = $_POST["Tenant 2 Phone"];
$tenant2email= $_POST["Tenant 2 Email"];
$tenant3 = $_POST["Tenant 3"];
$tenant3phone = $_POST["Tenant 3 Phone"];
$tenant3email= $_POST["Tenant 3 Email"];
$daterented = $_POST["Date Rented"];
$rent = $_POST["Rent"];
$leaseexp= $_POST["Lease Expiration"];
$datedue = $_POST["Date Due"];
$vacant = $_POST["Vacant"];
$rentpaid= $_POST["Rent Paid"];
$amountdue = $_POST["Amount Due"];
$fee = $_POST["Fee"];
$secdeposit= $_POST["Security Deposit"];
$leadcert = $_POST["Lead Cert"];
$leadcertdate= $_POST["Lead Cert Date"];
$repairlimit= $_POST["Repair Limit"];
$key = $_POST["Key #"];
$bedrooms= $_POST["Bedrooms"];
$bathrooms = $_POST["Bathrooms"];
$heat = $_POST["Heat"];
$appliances= $_POST["Appliances"];
$owner = $_POST["Owner"];
$owneraddress = $_POST["Owner Address"];
$ownercity = $_POST["Owner City"];
$ownerstate= $_POST["Owner State"];
$ownerzip = $_POST["Owner Zip"];
$ownerphone1 = $_POST["Owner Phone 1"];
$ownerphone2 = $_POST["Owner Phone 2"];
$ownerother= $_POST["Owner Other"];
$owneremail = $_POST["Owner Email"];

$sql = ("INSERT INTO info (Address, Apt #, City, State, Zip, Tenant 1, Tenant 1 Phone,     
Tenant 1 Email, Tenant 2, Tenant 2 Phone, Tenant 2 Email, Tenant 3, Tenant 3 Phone,   
Tenant 3 Email, Date Rented, Rent, Lease Expiration, Date Due, Vacant, Rent Paid,   
Amount Due, Fee, Security Deposit,  Lead Cert, Lead Cert Date, Repair Limit, Key #, 
Bedrooms, Bathrooms,  Heat, Appliances, Owner, Owner Address, Owner City, Owner State, 
Owner Zip, Owner Phone 1, Owner Phone 2, Owner Other, Owner Email)

VALUES ('$address', '$apt', '$city', '$state', '$zip', '$tenant1', '$tenant1phone',   
'$tenant1email', '$tenant2', '$tenant2phone', '$tenant2email', '$tenant3', 
'$tenant3phone', '$tenant3email', '$daterented', '$rent', '$leaseexp', '$datedue', 
'$vacant', '$rentpaid', '$amountdue', '$fee', '$secdeposit', '$leadcert', 
'$leadcertdate', '$repairlimit', '$key', '$bedrooms', '$bathrooms', '$heat', 
'$appliances', '$owner', '$owneraddress', '$ownercity', '$ownerstate', '$ownerzip', 
'$ownerphone1', '$ownerphone2', '$ownerother', '$owneremail')");

var_dump($sql);
mysql_query($sql)or die(mysql_error());
if(mysql_affected_rows()>=1){
echo "<p>Entry Added</p>";
echo "<a href='index.php'>Home</a>";
}else{
echo "<p>Entry Not Updated</p>";
}

?> 
```

我在这个页面上有几乎完全相同的问题，它编辑了一行

```
<?php
session_start();
require('connect.php');
$id = $_GET["id"];
$address = $_POST["Address"];
$apt = $_POST["Apt #"];
$city = $_POST["City"];
$state = $_POST["State"];
$zip = $_POST["Zip"];
$tenant1 = $_POST["Tenant 1"];
$tenant1phone = $_POST["Tenant 1 Phone"];
$tenant1email= $_POST["Tenant 1 Email"];
$tenant2 = $_POST["Tenant 2"];
$tenant2phone = $_POST["Tenant 2 Phone"];
$tenant2email= $_POST["Tenant 2 Email"];
$tenant3 = $_POST["Tenant 3"];
$tenant3phone = $_POST["Tenant 3 Phone"];
$tenant3email= $_POST["Tenant 3 Email"];
$daterented = $_POST["Date Rented"];
$rent = $_POST["Rent"];
$leaseexp= $_POST["Lease Expiration"];
$datedue = $_POST["Date Due"];
$vacant = $_POST["Vacant"];
$rentpaid= $_POST["Rent Paid"];
$amountdue = $_POST["Amount Due"];
$fee = $_POST["Fee"];
$secdeposit= $_POST["Security Deposit"];
$leadcert = $_POST["Lead Cert"];
$leadcertdate= $_POST["Lead Cert Date"];
$repairlimit= $_POST["Repair Limit"];
$key = $_POST["Key #"];
$bedrooms= $_POST["Bedrooms"];
$bathrooms = $_POST["Bathrooms"];
$heat = $_POST["Heat"];
$appliances= $_POST["Appliances"];
$owner = $_POST["Owner"];
$owneraddress = $_POST["Owner Address"];
$ownercity = $_POST["Owner City"];
$ownerstate= $_POST["Owner State"];
$ownerzip = $_POST["Owner Zip"];
$ownerphone1 = $_POST["Owner Phone 1"];
$ownerphone2 = $_POST["Owner Phone 2"];
$ownerother= $_POST["Owner Other"];
$owneremail = $_POST["Owner Email"];

$sql = "UPDATE info
SET 
Address='$address', 
Apt #='$apt', 
City='$city',
State='$state', 
Zip='$zip',
Tenant 1='$tenant1', 
Tenant 1 Phone='$tenant1phone',
Tenant 1 Email='$tenant1email',
Tenant 2='$tenant2', 
Tenant 2 Phone='$tenant2phone',
Tenant 2 Email='$tenant2email', 
Tenant 3='$tenant3', 
Tenant 3 Phone='$tenant3phone',
Tenant 3 Email='$tenant3email',  
Date Rented='$daterented',
Rent='$rent', 
Lease Expiration='$leaseexp',
Date Due='$datedue', 
Vacant='$vacant',
Rent Paid='$rentpaid', 
Amount Due='$amountdue',
Fee='$fee', 
Security Deposit='$secdeposit',
Lead Cert='$leadcert', 
Lead Cert Date='$leadcertdate',
Repair Limit='$repairlimit', 
Key #='$key',
Bedrooms='$bedrooms', 
Bathrooms='$bathrooms',
Heat='$heat', 
Appliances='$appliances',
Owner='$owner', 
Owner Address='$owneraddress', 
Owner City='$ownercity',
Owner State='$ownerstate', 
Owner Zip='$ownerzip',
Owner Phone 1='$ownerphone1', 
Owner Phone 2='$ownerphone2', 
Owner Other='$ownerother',
Owner Email='$owneremail'
WHERE id='$id'";
var_dump($sql);
mysql_query($sql)or die(mysql_error());
if(mysql_affected_rows()>=1){
echo "<p>Entry Updated</p>";
echo "<a href='index.php'>Home</a>";
}else{
echo "<p>Entry Not Updated</p>";
}
?> 
```

我已经看了 15 次，似乎找不到语法错误。我越看它，它就越像一堵巨大的文字墙。也许更有经验的人可以看看它，并立即看到它。我在不同的站点中使用了几乎相同的代码，没有任何问题，唯一的区别是它有更多的变量。在此先感谢，这个网站和它上面的伟大人物一直是学习 PHP 的救星！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T13:30:09.760

您需要用 `` 引号将所有列名用空格括起来。

像这样：

```
`Owner Address` 
```

最好的办法可能是用空格重命名所有列名，用下划线替换空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T13:38:26.607

这个例子：

```
select apt # from mytable 
```

将被解释为`select apt`，包括直到 EOL 之后的所有内容都`#`将被解释为注释。您会注意到 SO 的语法突出显示也选择了这一点。

这会起作用：

```
select `apt #` from mytable 
```

甚至：

```
select `apt #` from `mytable` 
```

# c# - 可移植类库，XmlAnyElementAttribute

> ID：12301157
> 
> 赞同：2
> 
> 时间：2012-09-06T13:25:04.010
> 
> 标签：c#, xml, xml-serialization, portable-class-library

在**Portable Class Library**中，我有一个包含具有`XmlAnyElement`属性的成员的类。

```
public partial class VariableWebServiceResponse {

    private List<System.Xml.XmlElement> anyField;

    public VariableWebServiceResponse () {
        this.anyField = new List<System.Xml.XmlElement>();
    }

    [System.Xml.Serialization.XmlAnyElementAttribute(Order=0)]
    public List<System.Xml.XmlElement> Any {
        get {
            return this.anyField;
        }
        set {
            this.anyField = value;
        }
    }
} 
```

这种类型的类在 .NET 4.0 中完美运行，所以我的代码如下：

```
 private T Deserialize<T>(VariableWebServiceResponse response)
    {
        var name = typeof(T).Name;
        var element = response.Any.SingleOrDefault(x => x.Name == name);
        return Deserialize<T>(element.OuterXml);
    }

    private static T Deserialize<T>(string xml)
    {
        return (T)new XmlSerializer(typeof(T)).Deserialize(new StringReader(xml));
    } 
```

现在的问题似乎`XmlElement`是 PCL 不支持该问题。那么如何在 PCL 中获得相同的结果呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T17:00:21.730

这么晚才回复很抱歉。正如您所注意到的，您不能在便携式中使用 XmlElement，这是因为它仅在 .NET Framework 中可用。Silverlight、Phone 和 Windows Store 应用程序不公开此类型。

但是，我们确实有一个替代品，当面向可移植的 .NET 4.0.3 及更高版本（获得 XLINQ 支持所需）时，您可以使用 XElement* 作为 XmlAnyElementAttribute 的替代品。

* 我刚刚提交了一个错误，以便在文档中更清楚地说明这一点。

# iphone - 在 UIWebView 中加载本地 HTML 文件时遇到问题

> ID：12301160
> 
> 赞同：0
> 
> 时间：2012-09-06T13:25:13.843
> 
> 标签：iphone, html, ios, xcode, uiwebview

我正在尝试从项目中的支持​​文件文件夹中加载本地 HTML 文件...我不断收到此消息...线程 1：断点 1.1，我不知道为什么，我的 Web 视图代码如下

```
#import "WPViewController.h"

@interface UIViewController ()

@end

@implementation WPViewController

@synthesize viewWeb;

- (void)viewDidLoad {

[super viewDidLoad];
NSString *path = [[NSBundle mainBundle] pathForResource:@"index" ofType:@"html"  inDirectory:@"localHTML"];
NSURL *url = [NSURL fileURLWithPath:path];
NSURLRequest *request = [NSURLRequest requestWithURL:url];
[viewWeb loadRequest:request];
}

 - (void)viewDidUnload
{
[super viewDidUnload];
// Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation: (UIInterfaceOrientation)interfaceOrientation
{
return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

- (IBAction)dismissView:(id)sender {
[self dismissModalViewControllerAnimated:YES];
}

@end 
```

标题...

```
#import <UIKit/UIKit.h>

@interface WPViewController : UIViewController

@property (strong, nonatomic) IBOutlet UIWebView *viewWeb;

- (IBAction)dismissView:(id)sender;

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T16:50:44.673

首先，仔细检查您没有设置任何停止您的应用程序的断点。您可以使用 CMD+Y 禁用/启用它们。此外，您可以查看是否在左侧窗格 -> Breakpoint Navigator 选项卡上设置了任何内容。

此外，您应该尝试实现[UIWebViewDelegate](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebViewDelegate_Protocol/Reference/Reference.html)协议并覆盖

```
- (void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error 
```

在您的 WPViewController 中，以便您可以获得有关页面未显示原因的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T13:34:43.017

尝试可能会帮助你..

```
- (void)viewDidLoad {

[super viewDidLoad];

NSString *htmlFile = [[NSBundle mainBundle] pathForResource:@"index" ofType:@"html" inDirectory:@"html_files"];

NSData *htmlData = [NSData dataWithContentsOfFile:htmlFile];
webView = [UIWebView alloc] init];
[webView loadData:htmlData MIMEType:@"text/html" textEncodingName:@"UTF-8" baseURL:[NSURL URLWithString:@""]];

} 
```

# iphone - 无效的代码签名权利 - 不支持数据保护密钥

> ID：12301161
> 
> 赞同：1
> 
> 时间：2012-09-06T13:25:16.687
> 
> 标签：iphone, encryption, app-store, app-store-connect, data-protection

我收到了一封来自 Apple 的邮件，说我的应用程序已被拒绝。

原因是：

> 我们发现您最近交付的“安全发送”存在一个或多个问题。要处理您的交付，必须更正以下问题：
> 
> 无效的代码签名权利 - 您的应用程序包的签名包含不受支持的代码签名权利。请检查您的 Xcode 项目的代码签名权利配置，并删除任何不需要的权利。
> 
> **具体来说，不支持密钥“com.apple.developer.default-data-protection”。**
> 
> 更正这些问题后，请转到“版本详细信息”页面并单击“准备上传二进制文件”。继续完成提交过程，直到应用状态为“等待上传”。然后，您可以提供更正后的二进制文件。

我发现[这个问题](https://stackoverflow.com/questions/11719035/invalid-binary-email-received)出现了完全相同的问题。标记的解决方案是禁用配置文件中的数据保护。但是当我这样做时，我的应用程序无法使用数据保护安全地存​​储文件，它绝对应该这样做！

我也尝试禁用数据保护，但`DataProtectionClassNone`无论设置了哪个保护类，所有文件都存储在其中。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T08:54:19.403

好的，它**绝对不会被弃用**！它将与 iOS6 一起引入，我有这些设置是因为我的 iOS6 Beta。这就是为什么我们的二进制文件无效的原因。

我们的部署目标设置为 iOS5，但此配置密钥将在 iOS6 中引入。所以自动二进制检查失败了，因为它不知道 iOS5 应用程序的这个标志。

更多关于这个：

1.  [https://devforums.apple.com/message/687733](https://devforums.apple.com/message/687733)
2.  [https://devforums.apple.com/message/702754](https://devforums.apple.com/message/702754)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-09T05:38:55.000

它在 iOS 5 中已被弃用，我相信它应该在 iOS 6 中完全消失。您必须使用系统加密调用而不是使用透明加密；有一个很棒的项目叫做[RNCryptor](https://github.com/rnapier/RNCryptor)可以为你打包。

您还需要政府提供的[SNAP-R](https://snapr.bis.doc.gov/snapr/exp/UserLoginLoad)才能在 iOS 中合法使用加密。当您提交时，Apple 会要求您提供 ERN。

# sql-server - 可以汇总当月费用的 T-SQL 查询，求和的平均值是所有月份的平均值

> ID：12301164
> 
> 赞同：1
> 
> 时间：2012-09-06T13:25:24.217
> 
> 标签：sql-server, tsql, aggregate-functions, average

我有一张桌子`Month_Id(int), Year(nvarchar), Expenses(money)`。

我需要一份报告，显示当月的总和，以及该月的平均值。

这是我到目前为止得到的。

```
SELECT     dt.Date, dt.Other_Revenue, dt.Month_Id, dt.Date_Year
FROM         S1_Rpt_Daily_Totals 
WHERE     (dt.Month_Id = MONTH(GETDATE())) 
```

逻辑 - 将 2012 年 9 月、2011 年、2010 年等的费用总和除以年数得到我的平均值。

但是我如何在 SQL 查询中做到这一点。可能吗？

免责声明 - 我对 SQL 很陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T13:36:52.593

```
SELECT MONTH(Date), sum(Expenses), avg(Expenses)
FROM S1_Rpt_Daily_Totals
GROUP BY MONTH(Date); 
```

但我不确定你的表的定义是什么——我只是从给定的 SQL 中猜测的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T14:20:47.630

假设您使用的是 SQL Server 2005+，您应该能够使用它：

```
;with a(sumexpenses, [month])
as
(
select  SUM(Expenses)
        ,DATEADD(month, datediff(month,0,[Date]), 0)
from    S1_Rpt_Daily_Totals
group by 
        DATEADD(month, datediff(month,0,[Date]), 0)
)

select  a1.[month]
        ,a1.sumexpenses
        ,AVG(a2.sumexpenses) as average
from    a a1
join    a a2
    on  MONTH(a1.[month]) = MONTH(a2.[month])
group by 
        a1.[month]
        ,a1.sumexpenses 
```

此解决方案仅使用日期，因此如果它有效，您可能会摆脱 month_id 和 date_year。

# php - PHP 中的 realpath_cache 是什么？

> ID：12301167
> 
> 赞同：10
> 
> 时间：2012-09-06T13:25:27.970
> 
> 标签：php

谁能告诉我`realpath_cache`PHP中的确切含义是什么？在 PHP 手册中已经对它进行了很多引用，但没有充分解释它。比如on上的[文章](http://www.php.net/manual/en/function.clearstatcache.php)`clearstatecache`说参数`clear_realpath_cache`表示是否清除realpath缓存。这句话是什么意思？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T13:29:02.950

`realpath_cache`是允许 php 缓存您正在使用的文件/目录位置的路径的系统，以最大程度地减少昂贵的磁盘查找。如果您在每次引用它们时使用 PHP 必须解析/查找的大量相对文件路径，它可能会大大提高您的 PHP 应用程序/站点的性能。

# c# - 节点在winform TreeView中被部分切断

> ID：12301169
> 
> 赞同：5
> 
> 时间：2012-09-06T13:25:34.523
> 
> 标签：c#, .net, winforms, treeview, treenode

我在弄清楚这个问题是什么时遇到了问题。我用谷歌搜索并没有找到很多解决这个问题的方法。我发现的唯一“解决方案”是扩展然后折叠最后一个节点的技巧。

```
this.Nodes[this.Nodes.Count - 1].Expand();
this.Nodes[this.Nodes.Count - 1].Collapse(); 
```

正如您从该屏幕截图中看到的，最后一个节点被部分切断，唯一暴露它的方法是展开节点，这将导致 TreeView 正确地重新呈现自身。

![在此处输入图像描述](../Images/eeac7a42567965986dac44d5c08f9c15.png)

我务实地将节点添加到 TreeView。我不知道这是否会影响结果，但我已将 TreeView 扩展到我自己的类，因此我可以向它添加一些属性和方法。

```
public class MyTreeView : TreeView
{

public void BuildTree()
{
    this.Nodes.Clear();
    foreach (TestSetFolder folder in Folders)
    {
         MyTreeNode node = new MyTreeNode();
         node.Name = folder.Name;
         node.Text = folder.Name;
         node.Tag = folder;
         node.FolderID = folder.NodeID;
         node.IsPopulated = false;

         this.Nodes.Add(node);
     }
 }
 } 
```

这就是我将节点添加到列表中的方式。有没有人有一个干净的解决方案来解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T14:54:33.903

在任何视觉变化之前和之后使用`treeView.BeginUpdate()` 和。`treeView.EndUpdate()`

SuspendLayout() 和 ResumeLayout() 也很有用！

如果要更新 UI，请不要一次性添加所有节点！一个接一个地添加，夹在 begin 和 endupdate 调用之间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T13:40:43.157

您可以调用`EnsureVisible`有问题的 TreeViewNode，如下所示：

```
treeView1.Nodes[treeView1.Nodes.Count - 1].EnsureVisible(); 
```

查看此方法的[MSDN 条目](http://msdn.microsoft.com/en-us/library/system.windows.forms.treenode.ensurevisible.aspx)以获取更多信息。

**编辑：**
我想我找到了。您可能有一个根节点，而您想要滚动到视图中的节点是该根节点的子节点。试试这个：

```
 TreeNode rootNode = treeView1.Nodes[0];
        TreeNode lastNode = rootNode.Nodes[rootNode.Nodes.Count - 1];
        lastNode.EnsureVisible(); 
```

或者使用 MSDN 文章中的示例来获取最后一个节点：

```
TreeNode lastNode = treeView1.Nodes[treeView1.Nodes.Count - 1].
    Nodes[treeView1.Nodes[treeView1.Nodes.Count - 1].Nodes.Count - 1]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T13:31:37.157

查看 TreeNode 类中的 Expand 方法。请参阅[http://msdn.microsoft.com/en-us/library/system.windows.forms.treenode.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.treenode.aspx)

# c++ - 在 Linux 上跟踪 HID 设备流量

> ID：12301172
> 
> 赞同：1
> 
> 时间：2012-09-06T13:25:41.033
> 
> 标签：c++, usb, hid, lsusb

我正在为 HID 设备阅读器重写软件以支持 Linux，但在调试它时遇到了一些麻烦。在 Windows 上，我使用一个名为[Busdog](http://code.google.com/p/busdog/)的工具，它可以让您选择一个设备并记录写入/读取报告。它通过安装自定义驱动程序来嗅探流量来管理这一点。

我使用的基于 Linux 的库使用 lsusb 直接与设备通信，因此没有驱动程序交互。有谁知道我如何跟踪我的应用程序和 USB 设备之间的流量？

注意：我尝试在写入设备之前从我的应用程序中转储数据，一切看起来都很好。但是，如果我在 Windows 中运行我编译的应用程序，busdog 显示正在写入设备的数据不正确。这表明我正在使用的库 (hidapi.h) 存在问题。如果可以的话，我想在 Linux 中确认这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T11:19:31.430

事实证明，[Wireshark](http://wireshark.org)可以捕获 USB 流量以及网络流量。它没有像 busdog 那样很好地呈现数据（那里有很多额外的东西，不仅仅是 HID 数据），但它可以完成工作。

# jsf - 如何告诉 jsf 哪些包存储托管 bean

> ID：12301180
> 
> 赞同：0
> 
> 时间：2012-09-06T13:26:10.047
> 
> 标签：jsf, jsf-2

我有一个使用 JSF 2.0 mojjarra 的 Web 应用程序。我想把我的托管 bean 类放到一个像这样命名的包中。

```
package com.myapp.managedbean 
```

我如何告诉 jsf 扫描这个包以查找带注释的托管 bean。

我的 Maven 依赖项

```
dependencies>
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>javax.servlet-api</artifactId>
        <version>3.0.1</version>
</dependency>
 <dependency>
  <groupId>com.sun.faces</groupId>
  <artifactId>jsf-api</artifactId>
  <version>2.0.2</version>
</dependency>

<dependency>
  <groupId>com.sun.faces</groupId>
  <artifactId>jsf-impl</artifactId>
  <version>2.0.2</version>
</dependency>

<dependency>
  <groupId>javax.servlet</groupId>
  <artifactId>jstl</artifactId>
  <version>1.2</version>
</dependency>

<dependency>  
    <groupId>org.primefaces</groupId>  
    <artifactId>primefaces</artifactId>  
    <version>3.4</version>  
</dependency>

<dependency>  
    <groupId>org.apache.tomcat</groupId>  
    <artifactId>tomcat-servlet-api</artifactId>  
    <version>7.0.26</version>  
    <scope>provided</scope>  
  </dependency> 
```

我的托管豆：

导入 javax.faces.bean.ManagedBean；导入 javax.faces.bean.ManagedProperty；导入 javax.faces.bean.SessionScoped；

```
@ManagedBean(name="helloWorld")
@SessionScoped
public class HelloWorld{

    @ManagedProperty(value="Hello World")
    private String a;

public String getA() {
    return a;
}

public void setA(String a) {
    this.a = a;
} 
```

}

我的页面：

```
<h:head></h:head>

<h:body>

<p:outputLabel for="extended"  />  
            <p:inputText id="extended" value="#{helloWorld.a}" />

</h:body>

</html> 
```

该页面仅显示一个空文本字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T13:29:24.833

您不必指定只需将注释放在您的类名上方，就像这样它会自己找到它们......

```
@ManagedBean
@SessionScoped
public class MyBean { 
```

代替

```
@ManagedProperty(value="Hello World")
private String a; 
```

做就是了

```
private String a = "Hello World"; 
```

这不是如何`ManagedProperty`使用的，做一些谷歌关于它

通常`ManagedProperty`用于注入值/ bean

这是一个如何注入另一个bean的例子

```
@ManagedProperty(value = "#{someOtherBean }")
private SomeOtherBean someOtherBean ; // + getter and setter 
```

# android - Bitmapfun 示例代码给出 NullPointerException

> ID：12301181
> 
> 赞同：5
> 
> 时间：2012-09-06T13:26:11.300
> 
> 标签：android, bitmap

示例来源：http: [//developer.android.com/training/displaying-bitmaps/index.html](http://developer.android.com/training/displaying-bitmaps/index.html)

不知道为什么我根本无法运行该项目。

## 原木猫

```
09-06 13:14:13.664: E/AndroidRuntime(591): FATAL EXCEPTION: main
09-06 13:14:13.664: E/AndroidRuntime(591): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.android.bitmapfun/com.example.android.bitmapfun.ui.ImageGridActivity}: java.lang.NullPointerException
09-06 13:14:13.664: E/AndroidRuntime(591):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1955)
09-06 13:14:13.664: E/AndroidRuntime(591):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
09-06 13:14:13.664: E/AndroidRuntime(591):  at android.app.ActivityThread.access$600(ActivityThread.java:122)
09-06 13:14:13.664: E/AndroidRuntime(591):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
09-06 13:14:13.664: E/AndroidRuntime(591):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-06 13:14:13.664: E/AndroidRuntime(591):  at android.os.Looper.loop(Looper.java:137)
09-06 13:14:13.664: E/AndroidRuntime(591):  at android.app.ActivityThread.main(ActivityThread.java:4340)
09-06 13:14:13.664: E/AndroidRuntime(591):  at java.lang.reflect.Method.invokeNative(Native Method)
09-06 13:14:13.664: E/AndroidRuntime(591):  at java.lang.reflect.Method.invoke(Method.java:511)
09-06 13:14:13.664: E/AndroidRuntime(591):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
09-06 13:14:13.664: E/AndroidRuntime(591):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
09-06 13:14:13.664: E/AndroidRuntime(591):  at dalvik.system.NativeStart.main(Native Method)
09-06 13:14:13.664: E/AndroidRuntime(591): Caused by: java.lang.NullPointerException
09-06 13:14:13.664: E/AndroidRuntime(591):  at com.example.android.bitmapfun.util.DiskLruCache.getDiskCacheDir(DiskLruCache.java:268)
09-06 13:14:13.664: E/AndroidRuntime(591):  at com.example.android.bitmapfun.util.ImageCache.init(ImageCache.java:121)
09-06 13:14:13.664: E/AndroidRuntime(591):  at com.example.android.bitmapfun.util.ImageCache.<init>(ImageCache.java:61)
09-06 13:14:13.664: E/AndroidRuntime(591):  at com.example.android.bitmapfun.util.ImageCache.findOrCreateCache(ImageCache.java:107)
09-06 13:14:13.664: E/AndroidRuntime(591):  at com.example.android.bitmapfun.ui.ImageGridFragment.onCreate(ImageGridFragment.java:96)
09-06 13:14:13.664: E/AndroidRuntime(591):  at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:834)
09-06 13:14:13.664: E/AndroidRuntime(591):  at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1080)
09-06 13:14:13.664: E/AndroidRuntime(591):  at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:622)
09-06 13:14:13.664: E/AndroidRuntime(591):  at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1416)
09-06 13:14:13.664: E/AndroidRuntime(591):  at android.support.v4.app.FragmentActivity.onStart(FragmentActivity.java:505)
09-06 13:14:13.664: E/AndroidRuntime(591):  at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1133)
09-06 13:14:13.664: E/AndroidRuntime(591):  at android.app.Activity.performStart(Activity.java:4475)
09-06 13:14:13.664: E/AndroidRuntime(591):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1928)
09-06 13:14:13.664: E/AndroidRuntime(591):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:40:23.483

您是否尝试在模拟器中运行它？

我的问题是我对 Galaxy Nexus 和 Nexus S 进行了 AVD 配置，但没有为它们设置 SD 存储。您会看到这些设备没有可以删除的 SD 卡，它们只有内部存储器，但此存储器分为应用程序的“内部”分区和可以安装在 PC 上的“外部”分区。

Bitmapfun ImageCahcer 类中的代码将调用 Environment.isExternalStorageRemovable() 方法，这将为提到的设备返回 false，但由于您没有指定 SD 卡大小，因此不会有外部存储。

解决方案是将 SD 卡大小设置为某个值，代码将起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-16T09:12:09.823

可能您将 null 作为键传递。您可以通过以下更改检查您的代码：

```
public static String hashKeyForDisk(String key) {
    String cacheKey;
    try {
        final MessageDigest mDigest = MessageDigest.getInstance("MD5");
        if (key == null) {
            Log.e("TEST","key = null");
            throw new IllegalArgumentException(" key == null");
        }

        if (mDigest == null) {
            Log.e("TEST","mDigest = null");

            return String.valueOf(key.hashCode());
        }
        byte[] bytes = key.getBytes();
        mDigest.update(bytes);
        cacheKey = bytesToHexString(mDigest.digest());
    } catch (NoSuchAlgorithmException e) {
        cacheKey = String.valueOf(key.hashCode());
    }
    return cacheKey;
} 
```

# java - 如何在 CVS 中分支多个模块 maven 项目？

> ID：12301182
> 
> 赞同：1
> 
> 时间：2012-09-06T13:26:11.543
> 
> 标签：java, maven, branch, cvs, multi-module

我对多模块项目的分支方法有一些疑问。我在 CVS 上有我的 maven 项目，我打算创建一个分支。问题是我对给出的建议解决方案不太满意。我应该分支整个项目而不是我正在修改的模块。

那样行吗？

我的意思是，这个有问题的模块本身可能是一个项目，但我们将它作为一个模块，以便将所有客户的项目作为模块包装在一个 maven 项目中。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T13:54:21.200

您应该分支整个项目，因为它更简单并且不会产生任何问题。此外，如果你只是分支多模块项目的单个模块，你会遇到问题来发布这样的东西并失去模块之间的同步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T15:53:51.840

我自己考虑了一段时间。我同意@chad 的观点，因为没有直接的答案，这非常令人惊讶，因为必须有数百人面临这个问题。

我的经验是在 maven+cvs+jenkins 的上下文中，所以请记住，我将提到的一些优势在 jenkins 上下文中确实是优势

我的看法是，您应该只分支实际上具有不同代码的子模块（基本上是乍得的#2）。不仅如此，我发现如果你调整规范的 maven 多模块结构，整个分支和构建会变得更好；具体来说，将聚合器 POM 与父 POM 分开，它们通常一起在一个 POM 中。这将为您带来的是，现在在您的构建系统中，您可以完全独立地构建每个子模块 + 父 POM，并根据您的意愿对它们进行分支。如果你不将它们分开，像 jenkins 这样的系统将创建它们自己的不可分支的子模块。

所以基本上我的结构看起来像这样

```
root
--pom.xml (aggregator)
--parent
----pom.xml
--subModA
----pom.xml
--subModB
----pom.xml 
```

为了完整起见，我对整个结构进行分支的最大问题是你有几个相同的分支的一部分。这最终会在您的依赖项中创建复杂性，其中说 subModA 的 v1.1 需要 subModB 的 v1.1 并且会因 subModB v1.0 而失败，而实际上 1.0 会非常好，因为没有任何更改。另一方面，如果您分支但不增加未更改模块中的版本（在我的示例中为 subModB），您将部署完全相同代码的多个快照。这种无用的部署可能会触发不必要的操作（例如测试，QA）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T16:06:52.143

我一直在考虑同样的事情。我什至试图在 maven 用户列表上问这个问题，但我得到的答案很少。这是我认为最好的答案。

首先，Maven 构建世界的一些现实。

1) 多模块构建是将一组事物构建在一起的好方法。但我认为它们是比“A 应该在 B 之前构建”的简单用例所要求的更紧密的模块耦合——这种更松散的耦合由 Jenkins 触发器更好地处理。

2) 多模块构建希望构建为目录树，尽管这不一定总是您想要的。它在源代码控制结构、分支和构建逻辑之间建立了耦合。

3) 分支是与第 1 点和第 2 点以及您的软件交付/发布模型相关的复杂事物。对于您的开发人员来说，这也可能是一场噩梦。. .

我的建议（对我自己和你）：

1) 不要创建你的构建、源代码控制结构、分支或任何东西。. . 手头有我们的一套要求。与软件工程的其他方面一样，需求是必须的。在这个领域，它们似乎比编码更容易被跳过。

2）不要分支你实际上不需要做并发开发的任何东西。如果您的构建结构迫使您对实际上没有看到并发开发的代码进行分支，那么就有问题了。

3) 在你得到你的要求之后，创建一些可能的构建、scm、发布解决方案，并在纸上浏览它们，看看分支和构建是如何发挥作用的。

这可能是一个评论，但我实际上不认为有一个简单的“答案”；所以这就足够了。

# unit-testing - Netbeans 中的自定义 PHPUnit 测试命令

> ID：12301185
> 
> 赞同：2
> 
> 时间：2012-09-06T13:26:24.770
> 
> 标签：unit-testing, cakephp, netbeans, phpunit, xdebug

我正在尝试使用我的 CakePHP 项目在 Netbeans 中突出显示代码覆盖率。

要在 CakePHP 中正常运行测试，您可以像这样执行 cake CLI 工具：

```
cake test app AllModels 
```

此命令接受所有正常的 phpunit 参数，例如`--coverage-clover`等。运行时，此命令执行`Test/AllModelsTest.php`其中包含一个`AllModelsTest`which extends `PHPUnit_Framework_TestSuite`。显然，通过使用该`cake`命令，Cake 会自动加载应用程序的所有先决条件。这在 CLI 甚至 Web 界面上都可以正常工作。

从 Netbeans 运行单元测试的问题，似乎 Netbeans 中的默认行为是将文件直接传递给 PHPUnit 命令，这是失败的，因为我的测试的第一行是自动加载我正在测试的模型的 CakePHP 方法: `App::uses('Inventory', 'Model');`- 我自己尝试过包含模型，但它本身扩展了另一个模型，并且没有一个是自行自动加载的。

**有没有办法调整 Netbeans 执行测试的命令？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T13:42:07.650

您可以告诉 NetBeans 运行一个自定义脚本，该脚本调用`cake test app`和传递 NetBeans 传递的任何参数。我不知道您如何将其链接到正确的子系统/文件以运行，但也许您会这样做。

1.  从主菜单中选择**工具：选项。**
2.  单击**PHP**选项卡，然后单击**单元测试**选项卡。
3.  输入脚本的路径或单击**浏览**找到它。

# objective-c - Core Data 获取的属性 $FETCHED_SOURCE 解析为对象 ID

> ID：12301189
> 
> 赞同：11
> 
> 时间：2012-09-06T13:26:26.887
> 
> 标签：objective-c, macos, core-data

在 Core Data 获取的属性表达式中，显然`$FETCH_SOURCE`解析为*对象 ID*而不是对象本身。这导致了异常“类不是键值编码......”。这是真的，因为它是响应该键的对象。

我想将源对象的属性值用作获取的属性谓词的一部分。

知道如何解决这个问题吗？

```
*** Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<_NSObjectID_48_0 0x10101b200> valueForUndefinedKey:]: this class is not key value coding-compliant for the key messageType.'
*** First throw call stack:
(
    0   CoreFoundation                      0x00007fff92ba00c6 __exceptionPreprocess + 198
    1   libobjc.A.dylib                     0x00007fff8f85e3f0 objc_exception_throw + 43
    2   CoreFoundation                      0x00007fff92c34249 -[NSException raise] + 9
    3   Foundation                          0x00007fff9518b08c -[NSObject(NSKeyValueCoding) valueForUndefinedKey:] + 238
    4   Foundation                          0x00007fff950d2df9 -[NSObject(NSKeyValueCoding) valueForKey:] + 400
    5   Foundation                          0x00007fff950f36a8 -[NSObject(NSKeyValueCoding) valueForKeyPath:] + 341
    6   Foundation                          0x00007fff950a3489 -[NSFunctionExpression expressionValueWithObject:context:] + 751
    7   CoreData                            0x00007fff88cbbdda -[NSSQLSimpleWhereIntermediate initWithPredicate:inScope:] + 618
    8   CoreData                            0x00007fff88cbb672 -[NSSQLGenerator generateWhereIntermediatesInContext:] + 162
    9   CoreData                            0x00007fff88cbb010 -[NSSQLGenerator generateIntermediatesForFetchInContext:countOnly:] + 416
    10  CoreData                            0x00007fff88cb7d30 -[NSSQLGenerator newSQLStatementForFetchRequest:ignoreInheritance:countOnly:nestingLevel:] + 400
    11  CoreData                            0x00007fff88cb7a97 -[NSSQLAdapter _newSelectStatementWithFetchRequest:ignoreInheritance:] + 471
    12  CoreData                            0x00007fff88cb76b6 -[NSSQLCore newRowsForFetchPlan:] + 118
    13  CoreData                            0x00007fff88cb6f2e -[NSSQLCore objectsForFetchRequest:inContext:] + 526
    14  CoreData                            0x00007fff88cb6a91 -[NSSQLCore executeRequest:withContext:error:] + 225
    15  CoreData                            0x00007fff88cb5f72 -[NSPersistentStoreCoordinator executeRequest:withContext:error:] + 2114
    16  CoreData                            0x00007fff88cb4309 -[NSManagedObjectContext executeFetchRequest:error:] + 537
    17  CoreData                            0x00007fff88cfca4e -[NSManagedObjectContext(_NestedContextSupport) _parentObjectsForFetchRequest:inContext:error:] + 414
    18  CoreData                            0x00007fff88d3072a __82-[NSManagedObjectContext(_NestedContextSupport) executeRequest:withContext:error:]_block_invoke_0 + 634
    19  libdispatch.dylib                   0x00007fff8b2710b6 _dispatch_client_callout + 8
    20  libdispatch.dylib                   0x00007fff8b272723 _dispatch_barrier_sync_f_invoke + 39
    21  CoreData                            0x00007fff88cfc87c _perform + 172
    22  CoreData                            0x00007fff88cfc6c2 -[NSManagedObjectContext(_NestedContextSupport) executeRequest:withContext:error:] + 354
    23  CoreData                            0x00007fff88cb4309 -[NSManagedObjectContext executeFetchRequest:error:] + 537
    24  CoreData                            0x00007fff88d0481e -[NSFaultHandler retainedFulfillAggregateFaultForObject:andRelationship:withContext:] + 254
    25  CoreData                            0x00007fff88d7faa8 -[_NSFaultingMutableArray willRead] + 120
    26  CoreData                            0x00007fff88d7fe99 -[_NSFaultingMutableArray count] + 25
    27  CoreFoundation                      0x00007fff92b82e69 -[NSArray lastObject] + 25
    28  Scuttlebutt                         0x0000000100041aab -[BSMessageCellView setObjectValue:] + 283
    29  AppKit                              0x00007fff936ca006 -[NSTableRowData _addViewToRowView:atColumn:row:] + 696
    30  AppKit                              0x00007fff936c9b5f -[NSTableRowData _addViewsToRowView:atRow:] + 151
    31  AppKit                              0x00007fff936c80f5 -[NSTableRowData _addRowViewForVisibleRow:withPriorView:] + 415
    32  AppKit                              0x00007fff936c7e7a -[NSTableRowData _addRowViewForVisibleRow:withPriorRowIndex:inDictionary:withRowAnimation:] + 272
    33  AppKit                              0x00007fff936c7149 -[NSTableRowData _unsafeUpdateVisibleRowEntries] + 740
    34  AppKit                              0x00007fff936c6ce1 -[NSTableRowData updateVisibleRowViews] + 119
    35  AppKit                              0x00007fff936da8b3 -[NSTableRowData _idleUpdateVisibleRows] + 66
    36  CoreFoundation                      0x00007fff92b5cdc4 __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 20
    37  CoreFoundation                      0x00007fff92b5c8dd __CFRunLoopDoTimer + 557
    38  CoreFoundation                      0x00007fff92b420c9 __CFRunLoopRun + 1513
    39  CoreFoundation                      0x00007fff92b416e2 CFRunLoopRunSpecific + 290
    40  HIToolbox                           0x00007fff9427e0a4 RunCurrentEventLoopInMode + 209
    41  HIToolbox                           0x00007fff9427de42 ReceiveNextEventCommon + 356
    42  HIToolbox                           0x00007fff9427dcd3 BlockUntilNextEventMatchingListInMode + 62
    43  AppKit                              0x00007fff93544b13 _DPSNextEvent + 685
    44  AppKit                              0x00007fff935443d2 -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] + 128
    45  AppKit                              0x00007fff9353b773 -[NSApplication run] + 517
    46  AppKit                              0x00007fff934e01a6 NSApplicationMain + 869
    47  Scuttlebutt                         0x0000000100002225 main + 53
    48  Scuttlebutt                         0x00000001000021e4 start + 52
    49  ???                                 0x0000000000000003 0x0 + 3
) 
```

这就是当我尝试转储有问题的对象的详细信息时出现的情况——很明显它是一个对象 ID 而不是对象本身。

```
(lldb) expression (NSString*) [(id)0x10101b200 description]
(NSString *) $0 = 0x0000000108b03880 @"0x10101b200 <x-coredata://8F1FBB6B-505B-4169-A9D0-10D48CE5D4DC/YammerMessage/p101>"
(lldb) expression (Class) [(id)0x10101b200 class]
(Class) $2 = _NSObjectID_48_0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-02T22:07:03.670

您可以使用 setResultType: 方法设置 NSFetchRequest 的结果类型，要获取 NSManagedObjects，您必须将其设置为 NSManagedObjectResultType。

```
NSFetchRequest *fetchrequest = [[NSFetchRequest alloc] init];
[fetchRequest setResultType:NSManagedObjectResultType]; 
```

如果您使用 XCode 的 CoreData 编辑器，您可以通过选择获取请求并导航到右侧实用程序选项卡中的“数据模型检查器”选项卡来选择结果类型。

**编辑：** 看这个[截图](http://imgur.com/pyhXEIz)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-11T10:09:25.240

你是绝对正确的。$FETCH_SOURCE 解析为 NSManagedObjectID，因此像 $FETCH_SOURCE.myProperty 这样的任何东西都会抛出异常（即使 Apple 的文档使用这种表示法）。

我通过在我的项目中添加以下类别来解决它，该类别会捕获调用并将其转发给真实对象：

```
@implementation NSManagedObjectID (FetchFix)

- (id)valueForUndefinedKey:(NSString *)key {

    // Try to get the real object
    NSManagedObject *object = [[NSManagedObjectContext defaultContext] objectWithID:self];
    return [object valueForKey:key];

}

@end 
```

PS我正在使用MagicalRecord，因此是`defaultContext`快捷方式。在您的代码中使用适当的 MOC。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-26T21:32:17.847

这已在 iOS 的未来版本中得到修复（我提交了一个错误。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-18T03:56:18.777

似乎 iOS 11 和 XCode 9 中的 bug 尚未修复。我最终放弃了 fetched 属性，而是使用了计算属性。`NSFetchRequest`毕竟他们使用相同的底层证券。

这是一个示例代码段：

```
public class Sales: NSManagedObject {

}

extension Sale {

    var detailList: [SaleDetail] {
        guard let id = self.id else {
            return []
        }

        let predicate = NSPredicate(format: "sale_id == '\(id)'")

        let fetchRequest: NSFetchRequest<SaleDetail> = SaleDetail.fetchRequest()
        fetchRequest.predicate = predicate
        do {
            if let list = try self.managedObjectContext?.fetch(request) {
                return list
            } else {
                return []
            }
        } catch let error {
            print("error:\(error)")
            return []
        }
    }
} 
```

# iphone - 关闭模式视图控制器后视图上升

> ID：12301192
> 
> 赞同：0
> 
> 时间：2012-09-06T13:26:49.720
> 
> 标签：iphone, objective-c, ios

我有一个带有 NavBar 和 ToolBar 的简单项目。我的代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self.view setBackgroundColor:[UIColor whiteColor]];

    [toolBar setBarStyle:UIBarStyleBlack];
    [toolBar setTranslucent:YES];

    addPhotoItem = [[UIBarButtonItem alloc] initWithTitle:@"Add photo" style:UIBarButtonItemStyleBordered target:self action:@selector(showActionSheet)];
    NSArray *itemsArray = @[ addPhotoItem ];
    [toolBar setItems:itemsArray];
    [toolBar setFrame:CGRectMake(0.0f, self.view.frame.size.height-44.0f, self.view.frame.size.width, 44.0f)];
    [self.view addSubview:toolBar];

    [navBar setFrame:CGRectMake(0.0f, 0.0f, self.view.frame.size.width, 44.0f)];
    [navBar setBarStyle:UIBarStyleBlack];
    [navBar setTranslucent:YES];
    [self.view addSubview:navBar];
} 
```

在我的工具栏中，我有一个按钮可以打开带有 2 个选项的 ActionSheet：从相机和库中获取图像。我的代码：

```
- (void)getMediaFromSource:(UIImagePickerControllerSourceType)sourceType {
    self.imagePicker.delegate = self;
    self.imagePicker.sourceType = sourceType;
    [self presentModalViewController:self.imagePicker animated:YES];
} 
```

但是在关闭模态控制器后，我的父视图上升了 44pt（大约）。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T13:37:37.560

您不需要设置工具栏的框架，只需将其添加到 viewDidLoad

```
[self.navigationController setToolbarHidden:NO animated:NO]; 
```

它会调出工具栏，不要手动将其添加为子视图，您可以将 UIBarButtonItem 添加为

```
self.navigationController.toolbarItems = [NSArray arrayWithObjects:addPhotoItem, nil]; 
```

你完成了。

`YES`你可以通过设置参数再次隐藏工具栏`setToolbarHidden`

我希望它有所帮助。快乐编码:)

# php - 从坐标数组构建谷歌地图 v3 多边形路径

> ID：12301193
> 
> 赞同：2
> 
> 时间：2012-09-06T13:26:53.710
> 
> 标签：php, javascript, json, google-maps-api-3

我正在尝试在美国县周围建立一个多边形。多边形的坐标来自数据库和 json 编码以在 javascript 中使用。这是来自 php 代码的 json 编码数组

```
{"Abbeville-sc":[["34.02593","-82.59388"],["34.02629","-82.59383"],["34.03162","-82.5975"],["34.04056","-82.60997"],["34.05677","-82.62081"],["34.06238","-82.62598"],["34.0649","-82.63427"],["34.06788","-82.64052"],["34.07661","-82.64548"],["34.08025","-82.64416"],["34.08676","-82.64022"],["34.09155","-82.64131"],["34.0947","-82.64426"],["34.09827","-82.64744"],["34.09987","-82.65131"],["34.10116","-82.65488"]]} 
```

我构建多边形的方式如下：

```
 var points = []
    for(j=0;j < counties[i].length;j++)
    {
        var Latit =  parseFloat(counties[i][j][0]);
        var Longit = parseFloat(counties[i][j][1]);
        var ll = new google.maps.LatLng(Latit,Longit);
        points.push(ll);
    }

      var county = new google.maps.Polygon({
        paths: points,
        strokeColor: '#000',
        strokeOpacity: 0,
        strokeWeight: 2,
        fillColor:  '#000',
        fillOpacity: 0
      }); 
```

其中counties[i] 是abbeville-sc。我遇到的问题是它没有按预期创建多边形。任何形式的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:14:07.173

看起来您的多边形是用不可见的边框和填充创建的。不透明度的工作方式类似于百分比的十进制表示。

```
1 = 100% = opaque
0 = 0% = transparent 
```

将不透明度值设置为大于 0 但不大于 1 的值。

# python - 使用 sweetpie 从 PointField 返回纬度和经度值

> ID：12301195
> 
> 赞同：6
> 
> 时间：2012-09-06T13:26:57.550
> 
> 标签：python, django, api, tastypie, geodjango

使用[django-tastypie v0.9.11](http://django-tastypie.readthedocs.org/en/v0.9.11/) [django 1.4.1](https://www.djangoproject.com/)和[geodjango](http://geodjango.org/)。

在 geodjango 之前，我曾经将我的 lat 和 lng 值直接保存到我的模型中。然后，当我调用 API 时，我会轻松地提取我的值。像这样的东西：

```
{
    "id": "1",
    "lat": "-26.0308215267084719",
    "lng": "28.0101370772476450",
    "author": "\/api\/v1\/user\/3\/",
    "created_on": "2012-07-18T14:33:31.081105",
    "name": "qweqwe",
    "updated_on": "2012-09-06T14:17:01.658947",
    "resource_uri": "\/api\/v1\/spot\/1\/",
    "slug": "qweqwe"
}, 
```

现在我已经升级了我的 web 应用程序以使用[geodjango](http://geodjango.org/)，我现在将我的信息存储在[PointField()](https://docs.djangoproject.com/en/dev/ref/contrib/gis/model-api/#pointfield)中。现在，如果我对以前使用的 API 进行相同的调用，我会得到这个：

```
{
    "id": "1",
    "point": "POINT (28.0101370772476450 -26.0308215267084719)",
    "author": "\/api\/v1\/user\/3\/",
    "created_on": "2012-07-18T14:33:31.081105",
    "name": "qweqwe",
    "updated_on": "2012-09-06T14:17:01.658947",
    "resource_uri": "\/api\/v1\/spot\/1\/",
    "slug": "qweqwe"
}, 
```

如您所见，积分值不同，因此我的移动应用程序正在崩溃。

**我的问题是如何从点字段中获取纬度和经度值并像以前一样使用查询集返回它们？**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-06T13:35:26.763

您需要覆盖您的*dehydrate()*方法，如[http://django-tastypie.readthedocs.org/en/latest/cookbook.html#adding-custom-values中所述](http://django-tastypie.readthedocs.org/en/latest/cookbook.html#adding-custom-values)

所以这样的事情可能对你有用：

```
class MyModelResource(Resource):
    class Meta:
        qs = MyModel.objects.all()

    def dehydrate(self, bundle):
        # remove unneeded point-field from the response data
        del bundle.data['point']
        # add required fields back to the response data in the form we need it
        bundle.data['lat'] = bundle.obj.point.y
        bundle.data['lng'] = bundle.obj.point.x
        return bundle 
```

顺便说一句，tastepie 的开发版本不久前就支持了 geodjango，您可能会感兴趣。文档可在[http://django-tastypie.readthedocs.org/en/latest/geodjango.html 获得](http://django-tastypie.readthedocs.org/en/latest/geodjango.html)

# jquery - 关闭 jsf 中的模态对话框

> ID：12301206
> 
> 赞同：0
> 
> 时间：2012-09-06T13:27:39.487
> 
> 标签：jquery, primefaces, modal-dialog

这是我的情况：我使用了 primefaces 网站的对话登录示例，并用于另一种情况： http: [//www.primefaces.org/showcase/ui/dialogLogin.jsf](http://www.primefaces.org/showcase/ui/dialogLogin.jsf)

问题是我的对话框是模态的，上面示例中使用的代码只是隐藏了对话框，而在我的情况下，它使覆盖层保持可见。我需要从对话框中触发“关闭功能”。我尝试了 jquery 默认用法，但失败了：

```
jQuery('#dlgComprasItens').PrimeFaces.widget.Dialog('close'); // not work
jQuery('#dlgComprasItens').dialog('close'); // not work
jQuery('#dlgComprasItens').hide(); // doesn't hide the overlay :( 
```

还是非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T20:21:26.000

好的，很简单，我只使用了以下代码：

```
 dlgComprasItens.hide(); 
```

其中 'dlgComprasItens' 是对话框的 ID。

# php - 在联系表格中添加发件人信息

> ID：12301211
> 
> 赞同：-1
> 
> 时间：2012-09-06T13:27:56.860
> 
> 标签：php, forms, send

如何为用户添加信息，如 ip、发送时间（按埃及时间等国家）、浏览器、分辨率、访问者来自

这是我的 php 文件

```
<?php
$webmaster_mail = 'sales@elfnoon.com';
$redirect_page = 'http://www.elfnoon.com/';
$message_subject = 'رسالة من زائر لموقعك';

$in_Body ='';
    foreach($_POST as $in_k=>$in_v)
    {
$in_Body .="$in_k = $in_v\n\n";
    }
mail(trim($webmaster_mail), "$message_subject ", "$in_Body","From: " . trim($webmaster_mail));
header("Location: $redirect_page");
?> 
```

和这个表格

```
<form action="form.php" method="post">
    <input name="" type="text" value="اسمك الكريم" onblur="if (this.value=='')this.value='اسمك الكريم'" onclick="value=''" />
    <br />
    <input name="email" type="text" value="البريد الالكتروني" />
                        <br />
    <input name="phone" type="text" value="رقم الهاتف" onblur="if (this.value=='')this.value='رقم الهاتف'" onclick="value=''" />
                    <br />
                    <textarea name="msg" cols="41" rows="5" placeholder="نص الرساله" wrap=soft></textarea>
                    <br />
                    <input type="submit" value="ارسال" />
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T13:39:40.347

有关 IP 和浏览器的信息，您可以检查`$_SERVER['REMOTE_ADDR']`和`$_SERVER['USER_AGENT']`（请参阅 var_dump($_SERVER) 到所有可用条目）。

您可以使用时区指示获取时间：如果您正在运行 PHP5.1+ ( [http://www.php.net/manual/pt_BR/function.date.php](http://www.php.net/manual/pt_BR/function.date.php) ) `date('Y-m-d e');`，“e”将显示时区

**编辑**

```
<?php
$webmaster_mail = 'sales@elfnoon.com';
$redirect_page = 'elfnoon.com/';
$message_subject = 'رسالة من زائر لموقعك';
$in_Body ='';
foreach($_POST as $in_k=>$in_v) {
  $in_Body .="$in_k = $in_v\n\n";
}
$in_Body .= 'The sender IP: ' . $_SERVER['REMOTE_ADDR'];
$in_Body .= 'The sender Browser: ' . $_SERVER['USER_AGENT'];
mail(trim($webmaster_mail), "$message_subject ", "$in_Body","From: " . trim($webmaster_mail));
header("Location: $redirect_page");
?> 
```

# xml - 过滤没有属性的元素，但使用 XSLT 保留包含其父元素的元素

> ID：12301215
> 
> 赞同：3
> 
> 时间：2012-09-06T13:28:24.427
> 
> 标签：xml, xslt

我正在尝试为包含特定属性的叶元素过滤 xml 文档，但我想保持更高级别的文档完好无损。我想用 XSLT 做到这一点。

开始的文档如下所示：

```
<root>
  <a name="foo">
    <b name="bar" critical="yes"/>
  </a>
  <a name="foo2" critical="yes">
    <b name="bar2">
    <b name="bar3">
  </a>
  <a name="foo3">
    <b name="bar4">
    <b name="bar5">
  </a>
</root> 
```

结果应如下所示：

```
<root>
  <a name="foo">
    <b name="bar" critical="yes"/>
  </a>
  <a name="foo2" critical="yes">
  </a>
</root> 
```

由于 XSLT 不是我的母语，因此非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T14:32:13.790

**这种转变**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="*[not(descendant-or-self::*[@critical='yes'])]"/>
</xsl:stylesheet> 
```

**当应用于所提供的 XML 文档时（针对格式正确进行了更正）：**

```
<root>
  <a name="foo">
    <b name="bar" critical="yes"/>
  </a>
  <a name="foo2" critical="yes">
    <b name="bar2"/>
    <b name="bar3"/>
  </a>
  <a name="foo3">
    <b name="bar4"/>
    <b name="bar5"/>
  </a>
</root> 
```

**产生想要的正确结果：**

```
<root>
   <a name="foo">
      <b name="bar" critical="yes"/>
   </a>
   <a name="foo2" critical="yes"/>
</root> 
```

# javascript - 使用 Javascript 添加 PDF 需要鼠标焦点

> ID：12301220
> 
> 赞同：0
> 
> 时间：2012-09-06T13:29:18.053
> 
> 标签：javascript, pdf, iframe

我正在使用 Javascript 在我的网页上的 iframe 中加载 PDF。

这不是一个选择：

```
<iframe id="some" src="some.pdf" ...></iframe> 
```

我真的需要稍后使用Javascript添加pdf，例如：

```
document.getElementById("some").src = "some.pdf"; 
```

我的问题是，当 PDF 加载时，它会获得鼠标的焦点。我的意思是，当您尝试滚动时，不是滚动页面，而是滚动 PDF。当我单击另一个选项卡并返回带有 pdf 的选项卡时，此问题已得到纠正。

有没有办法使用 Javascript 添加 PDF 但禁用自动对焦？使用 iframe 在这样的页面中显示 PDF 是否更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T13:40:31.210

加载 PDF 后强制关注页面上的另一个元素

```
var mywhatever = document.getElementById("mywhatever"); 
mywhatever.focus(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T13:40:44.853

如果您希望 pdf 成为页面的一部分，则必须使用 iframe。当您不希望它在加载后聚焦时，您只需侦听 load 事件并将焦点放在其他元素上。

```
document.getElementById('some').onload= function() {
    document.getElementById('otherElement').focus();
}; 
```

# svn - 如何将本地 svn 存储库迁移到谷歌代码的 svn 存储库？

> ID：12301222
> 
> 赞同：0
> 
> 时间：2012-09-06T13:29:21.790
> 
> 标签：svn, svnadmin, google-code, svndump

我的问题与 stackoverflow 上的其他帖子完全不同，例如[如何将代码库从一个 svn 存储库迁移到另一个保留历史记录？](https://stackoverflow.com/questions/2540689/how-to-migrate-a-codebase-from-one-svn-repo-to-another-preserving-history).

将 svn repo 从一台电脑迁移到另一台电脑很容易，因为我可以完全控制这些电脑。如果我想将本地 svn repo 迁移到 google code 的 svn repo 应该怎么做？

似乎 svnadmin 转储和加载只能用于本地 URI。

那么有没有其他方法可以用来将本地 svn 转储导入谷歌的 svn 主机？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T02:56:59.077

有一个名为[svnsync](http://svnbook.red-bean.com/en/1.7/svn.ref.svnsync.html)的工具可以做你想做的事——它基本上从源 repo 中读取每个修订版，然后将它们播放回目标 repo。

如果您打算在两个存储库之间进行镜像，请小心，因为事情可能会有点失控；但是，对于一次性迁移，svnsync 可能是最直接的选择。

# javascript - 如何在highcharts获得y轴的最大值？

> ID：12301236
> 
> 赞同：14
> 
> 时间：2012-09-06T13:30:00.520
> 
> 标签：javascript, jquery, highcharts

如何在highcharts获得y轴的最大值？

即[http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/line-basic/](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/line-basic/)这里最大值是**30**。如果禁用纽约和东京，则为**20**，依此类推。

有任何想法吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-06T13:53:32.697

假设这`chart`是您的图表变量。
`chart.yAxis[0].max;`

[**演示**](http://jsfiddle.net/m7gV5/)

**更新**

@Anagio 告诉我们可以通过以下方式获得它。
`chart.yAxis[0].getExtremes`

这样您就可以获得数据值和刻度值。
数据值是您的系列中的值，而刻度值是图表线中的值。

[**参考**](http://api.highcharts.com/highcharts#Axis.getExtremes)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-08-16T12:37:59.063

此信息可直接从`Axis`对象访问。例如：

```
var chart = $('#container').highcharts();
var axisMax = chart.yAxis[0].max; // Max of the axis
var dataMax = chart.yAxis[0].dataMax; // Max of the data 
```

如前所述，您可以使用`Axis.getExtremes`( [API](http://api.highcharts.com/highcharts#Axis.setExtremes) ) ，但同样的数据也可用于：

*   `Axis.min`: 轴的最小值
*   `Axis.max`: 轴的最大值
*   `Axis.dataMin`：数据的最小值
*   `Axis.dataMax`：数据的最大值

如果轴的极端发生了变化，甚至还有一些历史数据：

*   `Axis.oldMin`: 轴的前一个最小值
*   `Axis.oldMax`: 轴的前一个最大值

# jquery - 使用 jquery 加载所有表单文件正文标记

> ID：12301238
> 
> 赞同：0
> 
> 时间：2012-09-06T13:30:08.663
> 
> 标签：jquery, jquery-load

我正在尝试使用 jquery 在文件中仅加载正文标记（但不包括正文标记）中的信息。但是，由于`.load()`删除了 body 标签，我找不到“简单”的方法来做到这一点。

我真的宁愿不必围绕所有内容创建一个 div 并将其加载，而是希望有一个解决方法，最好使用`.load()`，但`.get()`也`.ajax()`欢迎使用解决方案。

我这样做的原因是我希望我正在加载的页面仍然可以作为一个页面工作，但是在加载时不希望它受到头部内标签的影响。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T13:33:40.663

有一个 html 文件，其中仅包含您要加载的内容（没有正文）。现在，

```
$('body').load('/test_witout_body.html', function() {
alert('Load was performed.');
}); 
```

# php - Symfony 动态元描述

> ID：12301240
> 
> 赞同：1
> 
> 时间：2012-09-06T13:30:17.290
> 
> 标签：php, symfony1, symfony-1.4

有没有办法（除了插槽）来设置动态描述元标记。在 Symfony 1.4 中？我在动态标题方面遇到了类似的问题，解决方案是实际使用此功能：

```
$this->getResponse()->setTitle 
```

但我找不到类似的功能来操纵描述....有什么帮助吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T13:43:02.983

我一直在挖掘，终于找到了我正在寻找的解决方案：

```
$this->getResponse()->addMeta('description', $description); 
```

# php - CakePHP 中的 Auth 和 ACL 条件

> ID：12301241
> 
> 赞同：0
> 
> 时间：2012-09-06T13:30:17.773
> 
> 标签：php, cakephp, acl, before-filter

我找不到我的问题的解决方案。我有一个使用 Auth 组件和 ACL 组件的 CakePHP 网站。我不希望不活跃的用户能够登录。

我发现 Auth 组件中的 userScope 可以做到这一点。因此，在**beforeFilter**内的**AppController**中，我添加了以下内容：

 **```
 $this->Auth->userScope = array('User.active' => 1); 
```

当然，在我的 UserController beforeFilter 中，调用了父方法。

但是，这无济于事，我仍然可以使用活动设置为 0 的用户登录。我认为这可能是因为 ACL 组件？

这是我在 AppController 中的 beforFilter

```
 public function beforeFilter()
    {
    if (!$this->Session->check('Auth.User'))
        $this->layout = 'identification';
    $this->Auth->allow('display');

    //Configure AuthComponent
    $this->Auth->loginAction = array('controller' => 'users', 'action' => 'login');
    $this->Auth->logoutRedirect = array('controller' => 'users', 'action' => 'login');
    $this->Auth->loginRedirect = array('controller' => 'users', 'action' => 'welcome');
    $this->Auth->userScope = array('User.active' => 1);
    } 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T14:26:40.290

如果你不成功，你可以随时使用替代方案：

```
$user = $this->Auth->user();
if($user['User']['active'] == 0){
   $this->redirect($this->Auth->logout());
   $this->Session->setFlash('You are not active.');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T20:37:04.007

您使用的代码对 Cake 2 无效。请参阅[http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#configuring-authentication-handlers](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#configuring-authentication-handlers)

这是一些应该可以工作的代码：

```
$this->Auth->authenticate = array('Form' => array('scope' => array('User.active' => 1))); 
```**

# javascript - 带有 setInterval 的 jQuery 图像滑块循环

> ID：12301246
> 
> 赞同：2
> 
> 时间：2012-09-06T13:30:31.590
> 
> 标签：javascript, jquery, image, slider, setinterval

我有这个标记：

```
<div id="imagedisplay">
    <div class="slider_item active"></div>
    <div class="slider_item"></div>
    <div class="slider_item"></div>
    <div class="slider_item last"></div>
</div> 
```

和这个脚本

```
setInterval(function(){
    $('.slider_item.active').fadeOut().removeClass('active')
        .next('.slider_item').fadeIn().addClass('active');
}, 5000); 
```

我如何以最好的方式制作这个循环？现在最后一张图像刚刚淡出，而第一张图像没有再次淡入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T13:34:00.680

检查 nextItem 是否有项目，如果没有将其设置回第一个：

```
var nextItem = $('.slider_item.active')
    .fadeOut()
    .removeClass('active')
    .next('.slider_item');

if (nextItem.length === 0) {
   nextItem = $('.slider_item').first();
}

nextItem.fadeIn().addClass('active'); 
```

这是一个例子：[**jsFiddle**](http://jsfiddle.net/RX5rx/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T13:35:44.497

演示：http: [//jsfiddle.net/gdS8Q/2/](http://jsfiddle.net/gdS8Q/2/)

```
var cur = 0;
var count = $('.slider_item').length;

$('.slider_item').hide();
$('.slider_item').eq(0).show();

setInterval(function() {    
    $('.slider_item').eq(cur).fadeOut(function () {
        $(this).removeClass('active');
        cur = (cur + 1) % count;
        $('.slider_item').eq(cur).addClass('active').fadeIn();
    });
}, 2000);​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T13:35:26.880

实际上，我只是为此编写了一个插件，它的可读性很强，因此您只需看一下就可以理解。

Github 存储库 - [https://github.com/joshbedo/fullPageSlider/blob/master/fullpagesliderV2.js](https://github.com/joshbedo/fullPageSlider/blob/master/fullpagesliderV2.js)

箭头的某些功能仍在开发中，以使其更具动态性，但它在这里也是一个示例。我正在滑动 html，但您可以轻松地添加一个带有图像的 .slide-panel 类。

在行动 [http://strikingalchemy.publishpath.com/portfolio](http://strikingalchemy.publishpath.com/portfolio)

编辑：他们编辑了脚本，因此它没有 setInterval 循环，一旦用户单击箭头并有兴趣查看更多内容，github 上的原始文件就有一个间隔循环。如果您希望它在加载时循环，则可以轻松更改。当用户不感兴趣时​​，我只是不想使用额外的资源。下班后会在github上放一个例子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-25T22:13:58.913

我知道这是一个旧线程，但有人可以告诉我显示前一个 div 的正确代码吗？

这是 HTML

```
<div id="imagedisplay">
    <div class="slider_item active"></div>
    <div class="slider_item"></div>
    <div class="slider_item"></div>
    <div class="slider_item last"></div>
</div> 
```

和 jQuery

```
 var nextItem = $('.slider_item.active')
        .fadeOut()
        .removeClass('active')
       .next('.slider_item');

 if (nextItem.length === 0) {
       nextItem = $('.slider_item').first();
    }
       nextItem.fadeIn().addClass('active'); 
```

我看到了 jsfiddle 链接并尝试了各种组合，但似乎无法掌握正确的代码

谢谢

# django - “NoneType”类型的参数不能用 ModelForm 迭代

> ID：12301248
> 
> 赞同：6
> 
> 时间：2012-09-06T13:30:38.587
> 
> 标签：django

尝试提交表单时出现以下错误：

`argument of type 'NoneType' is not iterable`

我的表单类如下：

```
class requestform(ModelForm):
def __init__(self, *args, **kwargs):
    super(requestform, self).__init__(*args,**kwargs)
    self.is_update=False
requestedpart = forms.CharField (label="Requested Part", max_length=80, required= True)
librarytype = forms.TypedChoiceField (label="Type", choices = ((1, "Type1"), (2, "Type2"), (3, "Type3")), coerce = lambda x: bool(int(x)), widget = forms.RadioSelect, required= True)
requestformat = forms.TypedChoiceField (label="Format", choices = ((1, "Format1"), (2, "Format2")), coerce = lambda x: bool(int(x)), widget = forms.RadioSelect, required= True)
def clean(self):
    if 'requestedpart' not in self.cleaned_data:
        return
    if not self.is_update:
        return self.cleaned_data
class Meta:
    model = LibraryRequest 
```

我的看法如下

```
if request.method == "POST":
    formtoaddrequest = requestform(request.POST, request.FILES)
    if requestform.is_valid(formtoaddrequest):
        new_request = formtoaddrequest.save(commit=False)
        new_request.requestadder = request.user 
        new_request.save()
        request.user.message_set.create(message=_("You have saved '%(requestedpart)s'") %  {'requestedpart': new_request.requestedpart}) 
```

这是我的回溯

```
Traceback:
File "/Users/AB/Desktop/myenv2/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response
  100\.                     response = callback(request, *callback_args, **callback_kwargs)
File "/Users/AB/Desktop/store/project/views.py" in view_requests
  201\.          if formtoaddmodel.is_valid():
File "/Users/AB/Desktop/myenv2/lib/python2.7/site-packages/django/forms/forms.py" in is_valid
  121\.         return self.is_bound and not bool(self.errors)
File "/Users/AB/Desktop/myenv2/lib/python2.7/site-packages/django/forms/forms.py" in _get_errors
  112\.             self.full_clean()
File "/Users/AB/Desktop/myenv2/lib/python2.7/site-packages/django/forms/forms.py" in full_clean
  269\.         self._post_clean()
File "/Users/AB/Desktop/myenv2/lib/python2.7/site-packages/django/forms/models.py" in _post_clean
  316\.         self.instance = construct_instance(self, self.instance, opts.fields, opts.exclude)
File "/Users/AB/Desktop/myenv2/lib/python2.7/site-packages/django/forms/models.py" in construct_instance
  40\.                 or not f.name in cleaned_data:

Exception Type: TypeError at /project/view_requests/
Exception Value: argument of type 'NoneType' is not iterable 
```

对我为什么会收到此错误有任何见解吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-06T13:44:26.193

有多个问题。

您的 clean 方法应该引发 a`ValidationError`或 return `self.cleaned_data`。您的`clean()`方法不会引发错误而是返回`None`，更改如下：

```
def clean(self):
    if self.cleaned_data and 'requestedpart' not in self.cleaned_data:
        raise forms.ValidationError("Some error message")
    if not self.is_update:
        return self.cleaned_data
    return self.cleaned_data 
```

同样，如果你有`clean_fieldname`一个 field `fieldname`，返回它的值：

```
def clean_fieldname(self):
    # ...
    return self.cleaned_data['fieldname'] 
```

您还可以检查是否`self.cleaned_data`为非空

在您看来，表单验证应该是这样的：`if requestform.is_valid()`即。没有参数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-06T13:43:46.487

你的方法不应该有一个空`return`的`clean`。如果表单有效则返回cleaned_data，否则引发a `forms.ValidationError`。

# c++ - 如何根据QSignalMapper获取QList的索引

> ID：12301251
> 
> 赞同：4
> 
> 时间：2012-09-06T13:30:49.670
> 
> 标签：c++, qt, qt4

我有`QList`' `QPushButton`s 和`QSignalMapper`识别哪个按钮被按下。所以我做了类似的事情（我的项目非常大，所以我只剪掉了问题所需的线条）

```
QList<QPushButton*> Buttons;
QList <QLabel*> LabelList1;
QList <QLabel*> LabelList2;
QList <QLabel*> LabelList3;
QList <QLabel*> LabelList4;
QSignalMapper *ButtonsMapper;
ButtonsMapper= new QSignalMapper(this);
connect(ButtonsMapper, SIGNAL(mapped(int)),this,SIGNAL(ButtonsClicked(int)));
connect(this, SIGNAL(ButtonsClicked(int)),this,SLOT(deleteButton(int)));

Buttons.append(new QPushButton(tr("0")));//first button 
LabelList1.append(new QLabel(tr("0")));
LabelList2.append(new QLabel(tr("0")));
LabelList3.append(new QLabel(tr("0")));
LabelList4.append(new QLabel(tr("0")));
QPushButton * pb1 = Buttons.last();//pointer to the last button
connect(pb1, SIGNAL(clicked()), ButtonsMapper, SLOT(map()));
ButtonsMapper->setMapping(pb1,0);

Buttons.append(new QPushButton(tr("1")));//second button
LabelList1.append(new QLabel(tr("1")));
LabelList2.append(new QLabel(tr("1")));
LabelList3.append(new QLabel(tr("1")));
LabelList4.append(new QLabel(tr("1"))); 
QPushButton * pb2 = Buttons.last();//pointer to the last button
connect(pb2, SIGNAL(clicked()), ButtonsMapper, SLOT(map()));
ButtonsMapper->setMapping(pb2,1); 
```

并且按下了`deleteButton`应该删除按钮的功能。如果我做这样的事情

```
void myclass::deleteButton(int i){ 
   delete (Buttons.takeAt(i));
   delete ( LabelList1.takeAt(i));
   delete ( LabelList2.takeAt(i));
   delete( LabelList3.takeAt(i));
   delete( LabelList4.takeAt(i));
    } 
```

该功能可能会导致`index out of range`错误，如果我删除第一个按钮，然后按第二个按钮，则功能`Buttons.takeAt(i)`指向不存在按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T17:23:07.397

从理论上讲，您可以保留指向信号映射器的指针，并在删除后重新映射索引。

```
void myclass::deleteButton(int i){
    delete (Buttons.takeAt(i));
    for(int i = 0; i < Buttons.size(); ++i) {
        ButtonsMapper->setMapping(Buttons[i], i);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T14:24:17.987

我建议您对代码进行一些修改：

```
QMap<QPushButton*,int> Buttons;
QSignalMapper *ButtonsMapper;
ButtonsMapper= new QSignalMapper(this);
connect(ButtonsMapper, SIGNAL(mapped(int)),this,SIGNAL(ButtonsClicked(int)));
connect(this, SIGNAL(ButtonsClicked(int)),this,SLOT(deleteButton(int)));

Buttons.insert (new QPushButton(tr("0")),0);//first button 
QPushButton * pb1 = Buttons.last();//pointer to the last button
connect(pb1, SIGNAL(clicked()), ButtonsMapper, SLOT(map()));
ButtonsMapper->setMapping(pb1,0);

Buttons.insert (new QPushButton(tr("1")),1);//second button 
QPushButton * pb2 = Buttons.last();//pointer to the last button
connect(pb2, SIGNAL(clicked()), ButtonsMapper, SLOT(map()));
ButtonsMapper->setMapping(pb2,1);

void myclass::deleteButton(int i){
    if (Buttons.contains(i))
    delete (Buttons[i]);  
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T19:38:41.403

除了将 QPushButton 映射到 index( `int`) 之外，您还可以将其映射到`QWidget *`.

```
- ButtonsMapper->setMapping(pb1,0);
+ ButtonsMapper->setMapping(pb1, pb1); 
```

然后插槽也会改变

```
void myclass::deleteButton(QWidget * widget){
    Buttons.removeOne(widget);
    delete widget;  
} 
```

# ios - 是否可以从界面生成器设置 UIView 边框属性？

> ID：12301256
> 
> 赞同：194
> 
> 时间：2012-09-06T13:31:04.903
> 
> 标签：ios, uiview, interface-builder, border

是否可以直接从界面生成器控制 UIView 边框属性（颜色、厚度等），或者我只能以编程方式进行控制？

* * *

## 回答 #1

> 赞同：401
> 
> 时间：2013-04-05T17:28:03.380

实际上，您可以通过界面生成器设置视图层的一些属性。我知道我可以通过xcode设置一个图层的borderWidth和cornerRadius。边框颜色不起作用，可能是因为图层需要 CGColor 而不是 UIColor。

您可能必须使用字符串而不是数字，但它有效！

```
layer.cornerRadius
layer.borderWidth
layer.borderColor 
```

> 更新：layer.masksToBounds = true

![例子](../Images/36e6b7ad736a34d5aa6c38e44642f4e5.png)

> 更新：为 Keypath 选择适当的类型：
> 
> [![在此处输入图像描述](../Images/a31b76ca7685399a402c633728d004c6.png)](https://i.stack.imgur.com/Ml2Rv.png)

* * *

## 回答 #2

> 赞同：187
> 
> 时间：2013-08-01T12:19:56.430

Rich86Man 的回答是正确的，但是可以使用类别来代理layer.borderColor 等属性。（来自[ConventionalC](https://github.com/ConventionalC/ConventionalC/blob/develop/ios/CALayer+XibConfiguration.h) CocoaPod）

**CALayer+XibConfiguration.h：**

```
#import <QuartzCore/QuartzCore.h>
#import <UIKit/UIKit.h>

@interface CALayer(XibConfiguration)

// This assigns a CGColor to borderColor.
@property(nonatomic, assign) UIColor* borderUIColor;

@end 
```

**CALayer+XibConfiguration.m：**

```
#import "CALayer+XibConfiguration.h"

@implementation CALayer(XibConfiguration)

-(void)setBorderUIColor:(UIColor*)color
{
    self.borderColor = color.CGColor;
}

-(UIColor*)borderUIColor
{
    return [UIColor colorWithCGColor:self.borderColor];
}

@end 
```

![界面生成器](../Images/f57113420984151b06ac6904b1a65a92.png)

```
layer.borderUIColor 
```

结果将在运行时显示，而不是在 Xcode 中。

**编辑**：您还需要设置`layer.borderWidth`为至少 1 才能看到所选颜色的边框。

***在 Swift 2.0 中：***

```
extension CALayer {
    var borderUIColor: UIColor {
        set {
            self.borderColor = newValue.CGColor
        }

        get {
            return UIColor(CGColor: self.borderColor!)
        }
    }
} 
```

***在 Swift 3.0 中：***

```
extension CALayer {
    var borderUIColor: UIColor {
        set {
            self.borderColor = newValue.cgColor
        }

        get {
            return UIColor(cgColor: self.borderColor!)
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：93
> 
> 时间：2016-02-12T21:38:37.207

*与 iHulk 类似的答案，但在 Swift 中*

在您的项目中添加一个名为 UIView.swift 的文件（或将其粘贴到任何文件中）：

```
import UIKit

@IBDesignable extension UIView {
    @IBInspectable var borderColor: UIColor? {
        set {
            layer.borderColor = newValue?.cgColor
        }
        get {
            guard let color = layer.borderColor else {
                return nil
            }
            return UIColor(cgColor: color)
        }
    }
    @IBInspectable var borderWidth: CGFloat {
        set {
            layer.borderWidth = newValue
        }
        get {
            return layer.borderWidth
        }
    }
    @IBInspectable var cornerRadius: CGFloat {
        set {
            layer.cornerRadius = newValue
            clipsToBounds = newValue > 0
        }
        get {
            return layer.cornerRadius
        }
    }
} 
```

然后，这将在 Interface Builder 中为 Utilities Panel > Attributes Inspector 中的每个按钮、imageView、标签等提供：

[![属性检查器](../Images/6ddf361b67e6b36b2ba593d3d5bf91fe.png)](https://i.stack.imgur.com/Bm8jH.png)

注意：边框只会在运行时出现。

* * *

## 回答 #4

> 赞同：57
> 
> 时间：2015-05-20T11:13:33.713

您可以创建一个 UIView 类别并将其添加到类别的 .h 文件中

```
@property (nonatomic) IBInspectable UIColor *borderColor;
@property (nonatomic) IBInspectable CGFloat borderWidth;
@property (nonatomic) IBInspectable CGFloat cornerRadius; 
```

现在将其添加到 .m 文件中

```
@dynamic borderColor,borderWidth,cornerRadius; 
```

这也是在 . 文件

```
-(void)setBorderColor:(UIColor *)borderColor{
    [self.layer setBorderColor:borderColor.CGColor];
}

-(void)setBorderWidth:(CGFloat)borderWidth{
    [self.layer setBorderWidth:borderWidth];
}

-(void)setCornerRadius:(CGFloat)cornerRadius{
    [self.layer setCornerRadius:cornerRadius];
} 
```

现在您将在故事板中看到所有 UIView 子类（UILabel、UITextField、UIImageView 等）的这一点

![在此处输入图像描述](../Images/fa26ae642ba1321857db369a79136f0e.png)

就是这样.. 无需在任何地方导入类别，只需在项目中添加类别的文件并在情节提要中查看这些属性。

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2017-07-15T13:02:28.357

对于**Swift 3 和 4**，如果你愿意使用`IBInspectable`s，有这个：

```
@IBDesignable extension UIView {
    @IBInspectable var borderColor:UIColor? {
        set {
            layer.borderColor = newValue!.cgColor
        }
        get {
            if let color = layer.borderColor {
                return UIColor(cgColor: color)
            }
            else {
                return nil
            }
        }
    }
    @IBInspectable var borderWidth:CGFloat {
        set {
            layer.borderWidth = newValue
        }
        get {
            return layer.borderWidth
        }
    }
    @IBInspectable var cornerRadius:CGFloat {
        set {
            layer.cornerRadius = newValue
            clipsToBounds = newValue > 0
        }
        get {
            return layer.cornerRadius
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2013-05-28T08:06:12.233

虽然这可能会设置属性，但它实际上并没有反映在 IB 中。因此，如果您本质上是在 IB 中编写代码，那么您不妨在源代码中进行

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-10-12T06:00:31.260

`layer.masksToBounds = true`只有当您设置并休息时，它才是绝对可能的。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2019-06-12T09:28:33.460

> 即使在这里尝试了所有解决方案之后，故事板也不总是对我有用

所以总是完美的答案是使用代码，只需创建 UIView 的 IBOutlet 实例并添加属性

*简短的回答：*

```
layer.cornerRadius = 10
layer.borderWidth = 1
layer.borderColor = UIColor.blue.cgColor 
```

* * *

*长答案：*

## UIView/UIButton等的圆角

```
customUIView.layer.cornerRadius = 10 
```

## 边框厚度

```
pcustomUIView.layer.borderWidth = 2 
```

## 边框颜色

```
customUIView.layer.borderColor = UIColor.blue.cgColor 
```

* * *

## 回答 #9

> 赞同：-5
> 
> 时间：2018-02-06T06:45:43.437

请添加这 2 行简单的代码：

```
self.YourViewName.layer.cornerRadius = 15
self.YourViewName.layer.masksToBounds = true 
```

它会正常工作。

# iphone - iphone内存不足崩溃

> ID：12301258
> 
> 赞同：0
> 
> 时间：2012-09-06T13:31:07.570
> 
> 标签：iphone, memory-management

我的 iPhone 应用程序由于内存不足而崩溃。我可以看到崩溃后保存了一个名为 lowmemory 的崩溃日志。但是，代码中没有泄漏。

有没有其他方法可以减少内存使用？当在模拟器中分析应用程序时，我可以看到内存使用量（分配）高达 91 mb，我怀疑这是应用程序在设备（iPhone 3GS）上崩溃的地方。那时我正在做很多字符串替换（基本上我在 HTML 中替换了大约 100 个标签）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T13:41:03.063

首先，我不认为您的应用程序使用了 91mb（太大）。我认为 91mb - 是分配的内存大小（可以释放，但这个数字没有减少）。你能检查一下 Live Bytes 列吗？关于字符串替换：我不知道您如何使用此类功能。但我建议您避免在这种情况下使用 NSString 并使用 NSMutableString 并更改内部的字符串值 - 这可以让您避免每次分配 NSString 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T13:52:06.747

您应该尝试使用 Instruments 工具。您可以使用 XCode (cmd + I) 启动 Instruments 工具，而无需 XCode (cmd + space => Instruments)。

如果您使用 XCode 启动 Instruments，我建议使用“Leaks”选项。您应该按“泄漏”，选择“调用树”而不是“统计”，然后 - 根据我的经验 - 选中以下复选框：隐藏 Obj-C、展平递归、隐藏丢失的符号、隐藏系统库。在这里，该工具向您显示在运行期间被上诉的行。

另一种方法是在没有 XCode 的情况下启动 Instruments。您应该在这里使用“活动监视器”，选择您的设备并记录它的活动。您应该双击其中一项统计信息以获取统计信息列表。找到您的应用程序的名称，然后查看“Real Memory”列。稍微玩一下你的应用程序，如果内存在增加并且没有释放，你应该知道哪些类用于你所做的操作，你应该检查你的类。

注意：如果您在没有 XCode 的情况下启动 Instruments，请确保应用程序不是在调试模式下从 XCode 启动的。XCode 4.0 中有一个错误（我不知道后来是否更正了它），但它发生在我身上，活动监视器的真实内存列没有显示正确的信息。

注意2：如果您正在进行内存管理测试，您应该始终使用设备进行测试。总是。

*编辑：*您甚至可以在您的项目中尝试 XCode 中的“cmd + shift + B”快捷键，它暗示了一些可能的内存泄漏。有时它很有用，但该工具并非每次都正确:)

# windows - 从 FTP 下载文件的批处理文件

> ID：12301263
> 
> 赞同：0
> 
> 时间：2012-09-06T13:31:26.360
> 
> 标签：windows, ftp, batch-file

我想下载“abcd.txt”文件'n'次，步长为 2 分钟。以下是我为从 FTP 下载文件而创建的批处理文件（其中包含 ftp 脚本）。

```
:DOWNLOAD_AGAIN
@ftp -i -s:"%~f0"&GOTO:DOWNLOAD_AGAIN
open 192.168.4.4
username
password
!:--- FTP commands below here ---
cd /data/
pwd
get abcd.txt
bye 
```

问题是，1）上面的批处理文件没有等待2分钟，它立即开始再次下载文件。2）我不知道如何限制它只下载'n'次。

任何帮助！谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T13:35:30.123

PING 可用于延迟执行数秒。如果指定（-w 开关），PING 将在两次 ping 之间等待几毫秒，然后再给出超时。

即 PING 127.0.0.1 -n 6 延迟 5 秒。或 PING 1.1.1.1 -n 1 -w 60000 >NUL 将延迟执行下一个命令 60 秒，前提是 1.1.1.1 不是有效的 IP 地址

您也可以使用 TIMEOUT 120 将下一个命令的执行延迟 120 秒

对于运行批处理 n 次，您可以执行

```
FOR /L %i IN (1,1,n) DO (
       //to stuff
 ) 
```

1,1,n 被解码为：

（开始，步骤，结束）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T20:41:27.787

除了 Kaushal 的回答，如果您使用的是 Vista/7，您可以使用

```
TIMEOUT /T 120 /NOBREAK 
```

而不是`ping`让脚本暂停 2 分钟。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T13:36:39.230

您可以使用`CHOICE`' 超时等待：

```
CHOICE /C XY /D X /T 120 > NUL 
```

（提供 X 或 Y 的提示选择，在 120 秒内默认为 X 并返回，通过指向 nul 隐藏选择）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T13:34:43.677

Grab [Unix Utilities port](http://sourceforge.net/projects/unxutils/)，那里有一个有用的`sleep`程序，可以让你延迟脚本。

# jquery - 使带有 ajax 加载部分的页面可用于谷歌索引

> ID：12301265
> 
> 赞同：1
> 
> 时间：2012-09-06T13:31:29.807
> 
> 标签：jquery, soa

我有一个页面：

```
www.example.com/?Id=1 
```

它的一部分是使用 jquery ajax Get 请求引导的，如下所示：

```
$.get(
'/Home/GetContent',
{ Id: Id },
function (response) {
   $("#Content").text(response);
}
); 
```

内容html是：

```
<p id="Content"></p> 
```

我想让这个页面可以被谷歌索引。不幸的是，我看不到谷歌指南是如何给出的：

[谷歌指南](https://developers.google.com/webmasters/ajax-crawling/docs/specification)

可以适用于我的情况。任何反馈将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T13:59:58.200

搜索索引单页应用程序很麻烦。我们决定为了索引我们的 SPA，我们将有一个 nodejs express.js 服务器，它在任何连接上检查用户代理

```
req.headers["user-agent"]; 
```

如果是 Googlebot，那么我们提供使用简单模板引擎（例如 Jade）生成的静态内容。我想不出更简单的方法来解决这个问题，如果有人知道的话，我很想听听这个问题的更好解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T13:37:13.910

我实际上已经将该指南用于 GWT 应用程序，并且运行良好。基本上我所做的是制作一个组件，它可以为某些 URL 动态生成正常（也称为非 ajaxy）页面，这就是 Google 将用来索引我的页面的内容。我没有浪费时间尝试使快照与他们的 Ajax 对应部分完全相同，我只是确保它们包含所有相同的文本、相同的链接、图像等。

# google-maps - 新的 Google API 密钥“Google Maps API v3”不适用于 Google Places API？

> ID：12301269
> 
> 赞同：0
> 
> 时间：2012-09-06T13:31:51.103
> 
> 标签：google-maps, google-maps-api-3, maps, google-maps-markers, google-places-api

我正在使用 Google Places API (https://developers.google.com/places/documentation/search)，并生成了一个带有“允许任何 IP”的新 Google API 密钥。当我尝试获取以下 API 服务 URL 的结果时，我收到了 REQUEST DENIED 错误。

[https://maps.googleapis.com/maps/api/place/search/json?location=-33.8670522,151.1957362&radius=500&sensor=false&key=AIzaSyA3vtFM8AMlIO853ra82KzryBs752VIWts](https://maps.googleapis.com/maps/api/place/search/json?location=-33.8670522,151.1957362&radius=500&sensor=false&key=AIzaSyA3vtFM8AMlIO853ra82KzryBs752VIWts)

[https://maps.googleapis.com/maps/api/place/search/xml?key=AIzaSyA3vtFM8AMlIO853ra82KzryBs752VIWts&location=-33.8670522,151.1957362&radius=1000&sensor=false](https://maps.googleapis.com/maps/api/place/search/xml?key=AIzaSyA3vtFM8AMlIO853ra82KzryBs752VIWts&location=-33.8670522,151.1957362&radius=1000&sensor=false)

我已经尝试了请求参数的所有组合，但没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T16:58:49.067

您还必须在 API 控制台中激活场所服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T00:05:50.193

请按照Places API 文档入门页面上的[身份验证说明为您的 API 控制台密钥激活 Places API Web 服务。](https://developers.google.com/places/documentation/#Authentication)

# c# - HTML5 Web 应用程序的客户端证书身份验证（用于处理请求的 C# HttpServer）

> ID：12301273
> 
> 赞同：2
> 
> 时间：2012-09-06T13:32:04.880
> 
> 标签：c#, .net, ipad, html, security

在从服务器请求数据时，有一个关于使用客户端证书向服务器验证客户端的问题。

我有一个网络“应用程序”（HTML5/JavaScript），它从我在 C# 中创建的 HttpSever 请求数据以处理请求。我希望能够在向客户端发送数据之前验证客户端是否已被授予访问权限（使用设备上的证书）。

用户通过浏览器中的 URL 访问该应用程序，该应用程序主要用于移动设备 (iPad)。我想要做的是将证书邮寄给客户，让他们安装在他们的设备上（我知道对于 iPad，这就像单击附件一样简单？）并在请求显示数据时使用它在应用程序中。这样，如果需要，可以从服务器端撤销证书。

我对证书安全性或在 HTML5 网站中使用它们进行身份验证知之甚少。

我该怎么做呢？交互将如何进行？你能推荐互联网上的任何资源吗？

# iphone - iOS 访问字符串中的字符

> ID：12301274
> 
> 赞同：1
> 
> 时间：2012-09-06T13:32:14.087
> 
> 标签：iphone, objective-c, ios, string

我有一个很长的字符串，我想查找一些单词和字符。Objective C 中是否有与 c# 等效的函数？

`string string name; string[0];`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T13:33:49.670

是的，它被称为`characterAtIndex:`

```
NSString s = @"hello";
char c = [s characterAtIndex:3]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T13:48:38.957

如果您想同时查找字符和单词，我认为这会更好一些。characterAtIndex 旨在仅用于单个字符，并让您通过字符串添加迭代并检查每个您正在寻找的内容。

```
NSRange range = [@"test12" rangeOfString:@"t12"];
NSLog(@"Position %d: Length %d", range.location, range.length); 
```

# jquery - jquery实时更改输入

> ID：12301279
> 
> 赞同：-1
> 
> 时间：2012-09-06T13:32:22.080
> 
> 标签：jquery, html

我有超过 1 个实时更改来监控输入并复制到另一个字段 - 在名字上效果很好，但之后的任何其他字段由于某种原因不起作用......有人有任何想法吗？

```
$("input#same_shipping_address_first_name").live('change', function() {
    $('input#same_billing_address_first_name').val($('input#same_shipping_address_first_name').val());
});
$("input#same_billing_address_last_name").live('change', function() {
    $('input#same_billing_address_last_name').val($('input#same_shipping_address_last_name').val());
});
$("input#same_billing_address_address_line_1").live('change', function() {
    $('input#same_billing_address_address_line_1').val($('input#same_shipping_address_address_line_1').val());
});
$("input#same_billing_address_address_line_2").live('change', function() {
    $('input#same_billing_address_address_line_2').val($('input#same_shipping_address_address_line_2').val());
});
$("input#same_billing_address_address_line_3").live('change', function() {
    $('input#same_billing_address_address_line_3').val($('input#same_shipping_address_address_line_3').val());
});
$("input#same_billing_address_town_city").live('change', function() {
    $('input#same_billing_address_town_city').val($('input#same_shipping_address_town_city').val());
});
$("input#same_billing_address_county").live('change', function() {
    $('input#same_billing_address_county').val($('input#same_shipping_address_county').val());
});
$("input#same_billing_address_postcode").live('change', function() {
    $('input#same_billing_address_postcode').val($('input#same_shipping_address_postcode').val());
});​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T13:34:53.407

您似乎希望将实时侦听器添加到 same_shipping_address_last_name，而不是像当前那样添加到 same_ *billing* _address_last_name。

现在，只要输入发生变化，您只需覆盖输入的值。在您的 first_name 示例中，当输入更改时，您将覆盖*另一个*输入的值，这更有意义。

不过，您可能只需要一个侦听器就可以处理所有这些输入。如果将`shipping`类添加到第一组输入，例如：

```
$(".shipping").live('change', function() {
    var billingId = $(this).attr('id').replace('_shipping_','_billing_');
    $('#' + billingId).val($(this).val());
}); 
```

你当然也可以在没有课程的情况下做这样的事情：

```
$('input[name^="same_shipping_address"]').live('change', function() { ... }); 
```

正如其他人指出的那样，使用`.on`or `.delegate`（取决于 jQuery 版本） over `.live`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T13:35:49.750

它不适用于连续的，因为第一个选择器是`same_billing_x`它应该在的位置`same_shipping_x`。

此外，`live()`应避免使用。如果你使用 jQuery 1.7+，你应该使用`on()`，否则`delegate()`. 这是一个修改后的示例：

```
$("form").delegate('#same_shipping_address_first_name', 'change', function(){ 
    $('#same_billing_address_first_name').val($(this).val());
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T13:36:00.550

尝试使用：

```
$("input#same_shipping_address_first_name").on('change', function(){
 ..... 
```

# sql-server - 如何在 MSSQL 的所有数据库中将所有位类型列 NULL 值更改为 false？

> ID：12301281
> 
> 赞同：9
> 
> 时间：2012-09-06T13:32:24.970
> 
> 标签：sql-server, null, multiple-columns, false-positive

我有一个数据库，里面有很多位类型的列。添加其他列后，我需要所有旧列都具有默认的“false”值。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-06T13:46:03.377

要将每个旧列更新为 0，您可以使用此查询（逐列）：

```
UPDATE MyTable
SET OldCol1 = 0
WHERE OldCol1 IS NULL 
```

然后，如果您希望任何未来值也具有默认值 0，请使用以下命令：

```
ALTER TABLE MyTable
ALTER COLUMN OldCol1 bit NOT NULL

ALTER TABLE MyTable
ADD CONSTRAINT OldCol1ShouldBeFalse DEFAULT 0 FOR OldCol1 
```

现在，您必须对每个旧列运行此操作，所以希望您没有太多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T14:26:06.223

如果您不想一个一个地做这件事，这个嵌套的动态 SQL 将完成这项工作。请注意，它不会首先进行任何检查以验证该列是否还没有默认约束（这是可能的，即使该列可以为空），但可以扩充脚本以执行此操作（甚至删除如果它是默认值 1)，则存在这样的约束。

```
DECLARE @sql NVARCHAR(MAX);
SET @sql = N'DECLARE @sql NVARCHAR(MAX); SET @sql = N'''';';

SELECT @sql = @sql + N'
  SELECT @sql = @sql + N''UPDATE ' + QUOTENAME(name) 
  + '.'' + QUOTENAME(s.name) + ''.'' + QUOTENAME(t.name) + '' 
  SET '' + QUOTENAME(c.name) + '' = 0 
  WHERE '' + QUOTENAME(c.name) + '' IS NULL;

  ALTER TABLE ' + QUOTENAME(name) + '.'' + QUOTENAME(s.name) 
    + ''.'' + QUOTENAME(t.name) 
    + '' ADD CONSTRAINT '' + c.name + ''_FalseByDefault 
    DEFAULT (0) FOR '' + QUOTENAME(c.name) + '';

  ALTER TABLE ' + QUOTENAME(name) + '.'' + QUOTENAME(s.name) 
    + ''.'' + QUOTENAME(t.name) 
    + '' ALTER COLUMN '' + QUOTENAME(c.name) + '' BIT NOT NULL;
  ''

FROM ' + QUOTENAME(name) + '.sys.columns AS c
INNER JOIN ' + QUOTENAME(name) + '.sys.tables AS t
ON c.[object_id] = t.[object_id]
INNER JOIN ' + QUOTENAME(name) + '.sys.schemas AS s
ON t.[schema_id] = s.[schema_id]
WHERE c.system_type_id = 104 AND c.is_nullable = 1
AND t.is_ms_shipped = 0;'
FROM sys.databases WHERE database_id > 4;

SET @sql = @sql + 'PRINT @sql;
  --EXEC sp_executesql @sql;';

EXEC sp_executesql @sql; 
```

真的很难看，而且`PRINT`由于 Management Studio 中的输出限制，命令不一定完整。但是一旦您确信前几个命令看起来正确，您可以将其注释掉并取消注释倒数第二行并再次运行脚本以进行更改。GO 存在是因为有些可能会失败。您可能希望为每个 db/table/column 组合添加打印输出，以便您可以打印状态消息，以便更轻松地将任何潜在错误与实际的 db/table/column 关联起来。

# c# - 引用某些 .NET 库的多个版本的程序集

> ID：12301284
> 
> 赞同：2
> 
> 时间：2012-09-06T13:32:34.997
> 
> 标签：c#, .net, clr, static-analysis, decompiling

当我在 JustDecompile 中反编译我的程序集时，我发现它们引用了某些 .NET 库的多个版本。

这是一个示例（`mscorlib`，`System.Drawing`并被`System.Windows.Forms`引用两次）：

```
mscorlib, Version=2.0.0.0
mscorlib, Version=4.0.0.0
System, Version=4.0.0.0 
System.Core, Version=4.0.0.0
System.Data, Version=4.0.0.0
System.Drawing, Version=2.0.0.0
System.Drawing, Version=4.0.0.0
System.Windows.Forms, Version=2.0.0.0
System.Windows.Forms, Version=4.0.0.0 
```

有人可以解释一下为什么会这样吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T13:33:59.017

如果他们编写的 .Net 4.0 应用程序使用为 .Net 2.0 构建的第三方库，就会发生这种情况。

# javascript - 更改 jQuery 数据表中显示的行数

> ID：12301286
> 
> 赞同：8
> 
> 时间：2012-09-06T13:32:47.063
> 
> 标签：javascript, jquery, datatable

为什么`jquery datatable`（见下面的代码）中的行数没有设置为 5？默认情况下等于 10 8as）。为什么`'iDisplayLength': 5`在这里不起作用？

```
<script>
function loadData() {
    $.getJSON(
              'modules/getData.php',
        function(data) {
                  var oTable = $('#newspaper-b').dataTable({
                        "sPaginationType":"full_numbers",
                        "aaSorting":[[3, "asc"]],
                        "bJQueryUI":true,
                        'iDisplayLength': 5,
                        'bLengthChange': false
                  });

                  oTable.fnDraw();

                  var list = data.flights;
                  var textToInsert = '';

                  for (var i = 0; i < list.length; i++) {
                        aux = list[i];
                        textToInsert  += '<tr><td>';
                        textToInsert  += aux.Var1;                                                                  
                        textToInsert  += '</td> </tr>' ;

                    }
                  $('table#newspaper-b tbody').html(textToInsert);

              }
    );             
}         

</script> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-06T13:45:35.250

尝试这样的事情。DataTables 具有内置选项，可让您从 AJAX 源中提取数据，而无需尝试自己构建。[阅读文档](http://datatables.net/release-datatables/examples/data_sources/ajax.html)并根据需要对其进行自定义：

```
function loadData() {
    var oTable = $('#newspaper-b').dataTable({
            "sAjaxSource": 'modules/getData.php',
            "sPaginationType": "full_numbers",
            "aaSorting": [
                [3, "asc"]
            ],
            "bJQueryUI": true,
            'iDisplayLength': 5,
            'bLengthChange': false
    });
}; 
```

要在加载数据后以某种方式修改表，您需要添加[`fnDrawCallback`](http://datatables.net/ref#fnDrawCallback)选项：

```
 "fnDrawCallback": function( oSettings ) {
      // use jQuery to alter the content of certain cells
      $lastcell = $('#newspaper-b').find('tr').find('td:last');
      // manipulate it somehow
 } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-08T10:41:59.730

你可以试试

```
$('#example').dataTable( {
        "aLengthMenu": [[10, 25, 50, -1], [10, 25, 50, "All"]]
    } ); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-03-26T22:05:43.560

此外，如果您之前一直在运行/测试但未指定/默认值`"bStateSave": true`，`iDisplayLength`则保存的默认值`iDisplayLength`将覆盖任何后续尝试指定新值的尝试，您仍将获得 10 行。尝试清空缓存，设置`"bStateSave": false`，指定`iDisplayLength`你想要的，然后再次运行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-16T17:47:19.497

这绝对是我发现的最简单的方法：

```
var oTable;

$(document).ready(function() {
    $('.some-button').click( function () {
        var oSettings = oTable.fnSettings();
        oSettings._iDisplayLength = 50;
        oTable.fnDraw();
    });

    oTable = $('#example').dataTable();
}); 
```

# forms - 如何获取名称中带有“-”的表单值？

> ID：12301287
> 
> 赞同：1
> 
> 时间：2012-09-06T13:32:49.397
> 
> 标签：forms, playframework-2.0

我正在使用 Play Framework (2.0.3)，并且我有这种表单元素：

```
<input type="text" name="element-name" value="" /> 
```

服务器端，我有一个简单的 Form 类：

```
public class MyForm {
    @Constraints.Required
    public String elementName;
} 
```

当然，它不起作用。

我怎样才能做到这一点？是否有注释表明与名称匹配？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T13:44:13.873

*   在 HTML 表单中使用相同的名称：

    ```
    <input type="text" name="elementName" value="" /> 
    ```

*   或为您的字段使用单字名称
*   或从[DynamicForm手动绑定](http://www.playframework.org/documentation/api/2.0/java/play/data/DynamicForm.html)

    ```
    String el = form().bindFromRequest().get("element-name"); 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T15:21:54.607

AFAIK，这是不可能的。

我认为您可以使用[DynamicForm](http://www.playframework.org/documentation/api/2.0.3/java/play/data/DynamicForm.html)并自己进行验证。

或者你可以尝试这样的事情（不知道它是否有效）：

```
Map<String, String> elementNameAsMap = new HashMap<String, String>();
// find the HTML input value
elementNameAsMap.put("elementName", request().body().asFormUrlEncoded().get("element-name")[0]);

Form<MyForm> myForm = form(MyForm.class).bindFromRequest().bind(elementNameAsMap); 
```

# java - 如何从 JSF 中的 PhaseEvent 中获取调用方法的名称

> ID：12301288
> 
> 赞同：3
> 
> 时间：2012-09-06T13:32:51.637
> 
> 标签：java, jsf, phaselistener

我有这个 PhaseListner：

```
public class CheckAccessInterceptor implements PhaseListener {
    private static final long serialVersionUID = -311454347719850720L;
    private static Logger logger = Logger.getLogger(CheckAccessInterceptor.class);

    @Override
    public PhaseId getPhaseId() {
        return PhaseId.ANY_PHASE;
    }

    public void beforePhase(PhaseEvent event) {
        System.out.println("START PHASE " + event.getPhaseId());
    }

    public void afterPhase(PhaseEvent event) {
        System.out.println("END PHASE " + event.getPhaseId());
    }

} 
```

是否可以从 PhaseEvent 对象中获取 ManagedBean 的名称和调用方法的名称？如何？

**更新：**

我在[这里](https://stackoverflow.com/questions/4788454/logging-the-invoked-managed-bean-action-in-a-phaselistener)找到了解决方案，但看起来它不适用于 Ajax。所以我不知道该怎么办。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T18:51:03.683

一切皆有可能，我确信有更简单的方法可以做到这一点，但我放弃了，直接去找源头。

UIViewRoot 有一个私有字段`events`，在 INVOKE APPLICATION 阶段将有一个列表列表，其中包含要在每个相应阶段广播的所有事件。我能想到的唯一方法是使用反射来获取该列表。

```
Field field = UIViewRoot.class.getDeclaredField("events");
field.setAccessible(true);
ArrayList<ArrayList<SystemEvent>> events =
  (ArrayList<ArrayList<SystemEvent>>)field.get(
     FacesContext.getCurrentInstance().getViewRoot());

for (ArrayList<SystemEvent> phaseEvents : events) {
   for (SystemEvent event : phaseEvents) {
      // is this the event you are looking for?
   }
} 
```

我想在某个地方我听到 Gosling 和 JSF 规范的原始作者现在在哭泣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T05:56:33.773

所以正确的答案就[在这里](https://stackoverflow.com/questions/4788454/logging-the-invoked-managed-bean-action-in-a-phaselistener)

但我必须警告你，它只适用于动作，而不适用于动作列表。

**maple_shaft**的解决方案也有效，但我认为**BalusC**的解决方案更好。

# c# - 一页中的多个表单（MVC3）

> ID：12301292
> 
> 赞同：2
> 
> 时间：2012-09-06T13:33:10.763
> 
> 标签：c#, asp.net, asp.net-mvc-3

我是 ASP.NET MVC 3 的新手，我正在尝试为具有几个关系的用户对象创建一个编辑视图。我为用户提供了基本的编辑视图，并为每个需要处理的关系拆分了选项卡。

选项卡 1 = 编辑用户选项卡 2 = 创建新的组访问权限（包含当前组访问权限的列表）等等...

我为编辑视图创建了一个 ViewModel：

```
public class UserViewModel
{
    public User User { get; set; }
    public GroupAccess GroupAccess { get; set; }
    public IEnumerable<GroupAccess> GroupAccessList { get; set; }
} 
```

编辑视图：

```
@model Project.ViewModels.UserViewModel

<div class="row">
    <div class="span9">
        <div class="tabbable tabs-left">
            <ul class="nav nav-tabs">
                <li class="active"><a href="#tab1" data-toggle="tab">User Information</a></li>
                <li><a href="#tab3" data-toggle="tab">Group Access</a></li>
            </ul>

            <div class="tab-content">
                <div class="tab-pane active" id="tab1">
                    @{ Html.RenderPartial("User/_CreateEditUser", Model.User); }
                </div>

                <div class="tab-pane" id="tab3">
                    @{ Html.RenderPartial("User/_CreateGroupAccess", Model.GroupAccess); }
                    @{ Html.RenderPartial("User/_ViewGroupAccessByUser", Model.GroupAccessList); }
                </div>
            </div>
        </div>
    </div>

    @{ Html.RenderPartial("_SidebarPartial"); }

</div> 
```

每个部分视图都是针对其各自对象的强类型...

部分视图发布到同一个控制器 UserController 以分离操作。保存“正确”数据时一切正常，但是当发生某种服务器端错误时，我需要以某种方式返回编辑视图。如果我在 UserController 中的“CreateGroupAccess”操作中收到服务器端错误...如何返回带有所需 UserId 参数的编辑视图？

我被卡住了，我猜我用当前的解决方案走错了方向。

有人知道如何最好地解决这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:07:03.020

让自己成为一个 BaseController：

***基本控制器***

```
public class BaseController : Controller {
   protected const String ModelStateTempData = "ModelStateTempData";
   protected Boolean PreserveModelState { get; set; }

   protected override RedirectToRouteResult RedirectToAction(string actionName, string controllerName, System.Web.Routing.RouteValueDictionary routeValues)
    {
        if(PreserveModelState)
          TempData[ModelStateTempData] = ModelState;

        return base.RedirectToAction(actionName, controllerName, routeValues);
    }

    protected override void OnActionExecuting(ActionExecutingContext filterContext)
    {
      if (TempData[ModelStateTempData] != null && !ModelState.Equals(TempData[ModelStateTempData]))
            ModelState.Merge((ModelStateDictionary)TempData[ModelStateTempData]);

      base.OnActionExecuting(filterContext);
    }
} 
```

***SomeotherController***

```
public class SomeController : BaseController {
  public ActionResult SomeAction(FormCollection collection) {
    if(ModelState.IsValid) {
      //Do something
      return SomeThingValidHappened();
    }

    //Not Valid
    PreserveModelState = true;
    return RedirectToAction("myAction");
  }
} 
```

# php - DELETE FROM NOT IN 不使用 PHP 数组

> ID：12301299
> 
> 赞同：1
> 
> 时间：2012-09-06T13:33:39.187
> 
> 标签：php, mysql, database, arrays, notin

我有一个这样的数组

```
array([0]=> 'email@email.com', [1]=> 'email2@email.com', [2]=> 'email3@email.com'); 
```

我还有一张桌子，上面有数百封电子邮件。

我希望能够删除除数组中的电子邮件之外的所有这些电子邮件。

我尝试了这段代码，但没有任何反应：

```
 $emails = join(', ', $emails);
    $sql = "DELETE FROM emails WHERE customer_id='".$id."' AND email NOT IN(".$emails.")";
    $query = $this->db->query($sql); 
```

谁能告诉我哪里出错了？

谢谢

彼得

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T13:34:45.233

您需要在 php 中使用[implode](http://php.net/manual/en/function.implode.php)函数将隐蔽数组导入字符串。

还需要用引号将电子邮件的字符串值括起来：

```
$sql = "DELETE FROM emails WHERE customer_id='".$id."' AND 
        email NOT IN('".implode("','",$emails)."')"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T13:35:08.727

也许：

```
$emails = implode("', '", $emails);
$sql = "DELETE FROM emails WHERE customer_id='".$id."' AND email NOT IN('".$emails."')";
$query = $this->db->query($sql); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T13:35:56.777

您缺少引号：

```
$emails = implode("', '", $emails);
$sql = "DELETE FROM emails WHERE customer_id='".$id."' AND email NOT IN('".$emails."')";
$query = $this->db->query($sql); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T13:35:59.973

您的数组包含文字，但这些文字并不是每个都被您的 IN 列表的引号括起来。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T13:38:40.357

您更有可能没有在查询中使用引号包装单个电子邮件。mysql_error 应该已经确定了吗？

```
$emails = join('", "', $emails);
$sql = 'DELETE FROM emails WHERE customer_id="'.$id.'" AND email NOT IN("'.$emails.'")';
$query = $this->db->query($sql); 
```

尝试回显 $sql 并看看你得到了什么（如果它没有多大意义，请在此处发布）。

EDIT: How dare 2 people post the same answer as me while I'm typing my answer! >:|

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-06T13:44:09.810

please try this.

```
$emails = join(',', $emails);
To avoid comma in last ,
$emails=trim($emails,',');
$sql = "DELETE FROM emails WHERE customer_id='".$id."' AND email NOT IN(".$emails.")";
$res = $this->db->query($sql); 
```

# jpa - sun.reflect.annotation.TypeNotPresentExceptionProxy 添加EntityListeners后异常

> ID：12301302
> 
> 赞同：3
> 
> 时间：2012-09-06T13:33:45.713
> 
> 标签：jpa, jpa-2.0, eclipselink

当使用 EntityListeners 添加到应用程序时`@EntityListeners(value = {MyEventListener.class})`，出现以下崩溃。它看起来是反射的问题。该应用程序具有为同一实体定义的自定义注释。请注意，此崩溃仅在添加 EntityListener 后发生。如果自定义注释被注释，应用程序仍然会崩溃。奇怪的是，相同的代码在通过 Netbeans 调试器运行时可以正常工作。该`getAnnotation()`调用将读取为实体定义的所有注释。我在调试器之外启动应用程序的那一刻，我得到了崩溃。我一直无法找到类加载器找不到 MyEventListener.class 的原因。

```
at sun.reflect.annotation.AnnotationParser.parseClassArray(Unknown Source)
at sun.reflect.annotation.AnnotationParser.parseArray(Unknown Source)
at sun.reflect.annotation.AnnotationParser.parseMemberValue(Unknown Source)
at sun.reflect.annotation.AnnotationParser.parseAnnotation(Unknown Source)
at sun.reflect.annotation.AnnotationParser.parseAnnotations2(Unknown Source)
at sun.reflect.annotation.AnnotationParser.parseAnnotations(Unknown Source)
at java.lang.Class.initAnnotationsIfNecessary(Unknown Source)
at java.lang.Class.getAnnotation(Unknown Source)
at com.feedoffice.FOEDataCache.initializeInternalListeners(FOEDataCache.java:34)
at com.DataCache.<init>(DataCache.java:20)
at com.feedoffice.FOEDataCache.<init>(FOEDataCache.java:16)
at com.feedoffice.ClientDataCache.<init>(ClientDataCache.java:163)
at com.ClientDataCache.<clinit>(ClientDataCache.java:171)
at com.feedoffice.forms.FOENumericTextFieldFactory.<init>(FOENumericTextFieldFactory.java:14)
at com.feedoffice.forms.FOENumericTextFieldFactory.getInstance(FOENumericTextFieldFactory.java:24)
at com.feedoffice.FOEApplet.displayMenu(FOEApplet.java:282)
at com.feedoffice.FOEApplet.loginWindowClosed(FOEApplet.java:215)
at com.feedoffice.forms.AppLogin.submitButtonClicked(AppLogin.java:49)
at com.feedoffice.forms.AppLogin.performSubmitAction(AppLogin.java:106) 
```

有没有人看到这个并且知道如何解决它？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-11T08:59:28.350

问题很可能如下：有些注释的值使用了不在类路径中的类。

这是一个简短的示例：

```
@MyAnnotation (value = MyClass.class)
public class TestClass 
```

您必须确保“Myclass”在您的类路径中可用。（例如，将其打包到您的应用中）

# iphone - 在 iPhone 应用中计费

> ID：12301306
> 
> 赞同：2
> 
> 时间：2012-09-06T13:33:53.273
> 
> 标签：iphone, ios, in-app-purchase, in-app-billing

我应该做一个应用程序，人们可以在应用程序内购买和支付真实商品。该应用程序适用于便利店。

有没有办法做到这一点？我找到了一些 API，例如 ZooZ 等，但我还阅读了 Apple 指南：Apple：11.3 使用 API 购买实物的应用程序或在应用程序之外使用的商品和服务将被拒绝。

但是有很多应用程序提供用户通过用户的手机购买和支付商品......

有谁知道，如何以“合法”的方式做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T14:50:43.083

Apple 指南正在讨论应用内购买 API。没有什么可以阻止您使用另一个计费 API（例如[这个](http://developer.authorize.net/downloads/)API）来销售真实商品。

# c# - 获取最新方法总是重新下载

> ID：12301311
> 
> 赞同：4
> 
> 时间：2012-09-06T13:34:00.363
> 
> 标签：c#, .net, tfs, tfs-sdk, getlatest

我正在使用 TFS SDK，并且我有一种方法可以获取最新版本的项目。但是当我调用方法时，它总是重新下载文件。这也需要很长时间。

我试过了，我得到了changeSet，我比较了特别的项目。如果项目有变化，请下载。但是这种方式也需要很长时间。

这是我的第一个没有检查 changeSet 的代码

```
ItemSet items = sourceControl.GetItems(itemPath, VersionSpec.Latest, RecursionType.Full);
foreach (Item item in items.Items)
{                    
    localName = item.ServerItem.ToString();
    localName = localName.Substring(2, (localName.Length - 2)).Replace("/", "\\");

    switch (item.ItemType)
    {
        case ItemType.Any:
            throw new ArgumentOutOfRangeException("ItemType returned was Any; expected File or Folder.");
        case ItemType.File:
            item.DownloadFile("D:\\WORK\\Tries\\"+localName);
            break;
        case ItemType.Folder:
            Directory.CreateDirectory("D:\\WORK\\Tries\\"+localName);
            break;
    }
} 
```

那是我检查变更集的新代码

```
ItemSet items = sourceControl.GetItems(itemPath, VersionSpec.Latest, RecursionType.Full);

foreach (Item item in items.Items)
{                    
    localName = item.ServerItem.ToString();
    localName = localName.Substring(2, (localName.Length - 2)).Replace("/", "\\");

    var histories = sourceControl.QueryHistory(itemPath, VersionSpec.Latest, 0, RecursionType.OneLevel, null, null, null, Int32.MaxValue, true, false, true);
    bool check = false;

    foreach (Changeset history in histories)
    {
        foreach (Change change in history.Changes)
        {
            if (change.Item.Equals(item))
                check = true;
        }

    }

    switch (item.ItemType)
    {
        case ItemType.Any:
            throw new ArgumentOutOfRangeException("ItemType returned was Any; expected File or Folder.");
        case ItemType.File:
            if(check)
                item.DownloadFile("D:\\WORK\\Tries\\"+localName);
            break;
        case ItemType.Folder:
            if(!Directory.Exists("D:\\WORK\\Tries\\" + localName))
                Directory.CreateDirectory("D:\\WORK\\Tries\\"+localName);
            break;
    }
} 
```

有人有建议吗？谢谢。

编辑：我以这种方式解决了问题：

```
 String ServerFolder = itemPath; // start with "$/ + serverFolder path"
            itemPath = itemPath.Substring(2, (itemPath.Length - 2)).Replace("/", "\\");

            String LocalFolder = @"D:\WORK\"+itemPath;

            WorkingFolder workfolder = new WorkingFolder(ServerFolder, LocalFolder);
            workspace.CreateMapping(workfolder);

            workspace.Get(VersionSpec.Latest,GetOptions.Overwrite); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T17:58:06.527

如果您尝试将工作区更新为最新更改，您实际上调用了错误的方法。VersionControlServer.GetItems() 是一种要求服务器列出它拥有的项目的方法。它总是会告诉你相同的答案。

如果您尝试将工作区中的项目更新为最新，您将需要获取相应的 Workspace 对象，然后对该对象调用“Get”方法。这将从您请求的版本下载过期的文件。

**编辑**：添加一些示例代码：

```
// Get a reference to our Team Foundation Server. 
TfsTeamProjectCollection tpc = new TfsTeamProjectCollection(new Uri("http://<yourserver>:8080/tfs/<yourcollection> "));

// Get a reference to Version Control. 
VersionControlServer versionControl = tpc.GetService<VersionControlServer>();

Workspace workspace = versionControl.GetWorkspace("<local path to your workspace>");
workspace.Get(); 
```

# java - JInternalFrame 的一个实例

> ID：12301312
> 
> 赞同：0
> 
> 时间：2012-09-06T13:34:01.923
> 
> 标签：java, swing, jinternalframe

我正在使用 JinternalFrames 开发一个 Swing 应用程序，但是当我打开一个 Jinternelframe 时，它​​会出现在 JDesktopePane 中，并且再次单击同一组件时会出现另一个实例。我试图通过在构造函数中声明每个 JInternalFrame 的新实例来解决这个问题，但是在内存方面它是无用的，所以我问是否有任何方法可以摆脱这个问题。非常感谢你们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T13:43:23.233

延迟初始化帧：

```
private JInternalFrame frame1;
private JInternalFrame frame2;
...

/**
 * invoked when the button used to show the first frame is clicked
 */
private void showFrame1() {
    if (frame1 == null) {
        frame1 = new JInternalFrame();
        // TODO initialize the frame
    }
    // TODO show the frame
}

// same for the other frames 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T21:33:32.543

这是可能的示例代码。希望这有帮助。在 JdesktopPane 所在的主应用程序中调用内部框架的菜单操作。

```
 private void YourJinternalFrameMenuItemActionPerformed(java.awt.event.ActionEvent evt) {                                                 

    YourJinternalFrame nw = YourJinternalFrame.getInstance();
    nw.pack();
    //usefull part for you.. if open shows, if not creates new one 
    if (nw.isVisible()) {
    } else {
        desktopPane.add(nw);
        nw.setVisible(true);
    }
    try {

        nw.setMaximum(true);
    } catch (PropertyVetoException ex) {
        Logger.getLogger(MainApplication.class.getName()).log(Level.SEVERE, null, ex);
    }
} 
```

把它放在你的 YourJinternalFrame 里面

```
private static YourJinternalFrame myInstance;

public static YourJinternalFrame getInstance() {
    if (myInstance == null) {
    myInstance = new YourJinternalFrame();
    }
return myInstance; 
```

# java - 如何在跨域调用中获取客户端域名

> ID：12301314
> 
> 赞同：0
> 
> 时间：2012-09-06T13:34:05.797
> 
> 标签：java, cross-domain

我可能没有正确构建查询。所以让我解释一下我面临的问题。

*环境*：
我有一个响应 http API 调用的服务器。进行此调用的客户端是另一台服务器上的 html 文件。所以这是一个跨域调用。该功能按预期工作。

*问题*：
在我的 webapp（tomcat servlet）上，我希望能够获取客户端的域名，进行此调用

*示例*：
如果[http://abc.com/crossDomainCall.html](http://abc.com/crossDomainCall.html)正在对我的服务器进行跨域调用，我希望能够看到它是 abc.com

*我尝试过的*：
我尝试过 request.getRemoteAddr() 和 request.getRemoveHost()
但他们正在返回当时正在为 HTML 提供服务的服务器地址。*不是*托管 html (abc.com) 的服务器地址

对此的任何指示，将不胜感激。

干杯，
罗希特什

*编辑1*：
正如@gigadot 回答的那样，使用HTTP Header 中的'referer' 对我有用。但这并不是万无一失的。所以，我的问题是，像谷歌地图这样的服务是如何做到这一点的？我知道，他们需要将 API 密钥与已注册该密钥的相应域进行比较。那么，他们如何验证这样的事情呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T13:53:27.993

尝试在请求中获取引用者标头。这是您最好的选择，因为实际调用是由客户端（用户或网络浏览器）进行的，因此不可能总是得到这个。但是，推荐人标头并不总是由客户端 Web 浏览器发送。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T10:15:18.107

这是一个跨站 ajax 请求，根本不可能。

用于`$.getJSON()`检索您的跨站点 JSON 响应，您是否看过[http://api.jquery.com/jQuery.getJSON](http://api.jquery.com/jQuery.getJSON)。

# c - 通过尾部构建优化链表中的特殊情况

> ID：12301315
> 
> 赞同：1
> 
> 时间：2012-09-06T13:34:13.783
> 
> 标签：c, linked-list

我想通过将节点附加到尾部来构建一个列表 {1, 2, 3, 4, 5}。出于我们客户端的目的，所有其他节点都使用尾指针插入到最后一个节点之后。此解决方案的唯一“问题”是可以优化为第一个节点编写单独的特殊情况，并且客户端正在逼迫我。尽管如此，从理论上讲，这种方法对于生产代码来说应该是可靠的……至少我认为直到它在我到达尾部时不断抛出空指针异常……我错过了什么吗？

```
struct node* BuildWithSpecialCase() {
    struct node* head = NULL;
    struct node* tail;
    int i;

    Push(&head, 1);
    tail = head;

    for (i=2; i<6; i++) {
        Push(&(tail->next), i); 
    }
    return(head); 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T14:42:41.617

如果您的所有访问指针都从头到尾移动，那么将节点添加到尾部会将它们暴露给在列表的“查询”开始时不存在的“新”数据。

与您的客户交谈，也许不仅仅是“优化”。

---在看到您的代码编辑后进行编辑---

如果不了解`Push`正在做什么，我猜它会将一个节点推到链表的顶部，就好像它是一个堆栈一样。

```
Push(&head, 1);
tail = head; 
```

到目前为止，一切都很好。

```
for (i=2; i<6; i++) {
    Push(&(tail->next), i); 
} 
```

看来您只是`Push`在尾部编辑了几个节点，但我看不到您实际更新尾部的位置以保持它对列表末尾的引用。在我的阅读中，`head`仍然指向列表的头部，`tail`仍然指向列表的头部（来自 assignment `tail = head`），并且除了尾部之外还有很多“额外”节点。

那是问题吗？

# c# - MS Chart：如何获得选择范围？

> ID：12301324
> 
> 赞同：0
> 
> 时间：2012-09-06T13:34:44.843
> 
> 标签：c#, .net, charts

我有图表（轴 X - 日期，轴 Y - 数字），数据源是字典。我如何在图表的选择范围内获取数据（或索引）？例如数据：10/10/2012 , 10 10/11/2012 , 11 10/12/2012 , 12 10/13/2012 , 13 10/14/2012 , 14

然后用户选择从 10/11/2012 到 10/13/2012 的图表范围，我可以得到从 10/11/2012 到 10/13/2012 的 X 值吗？

谢谢！

# android - 应用程序中的空指针异常

> ID：12301329
> 
> 赞同：-1
> 
> 时间：2012-09-06T13:34:56.577
> 
> 标签：android, nullpointerexception, broadcastreceiver, android-service

提前致谢 ，

我试图在服务中获取用户当前位置，但是当我通过 DDMS（在 Eclipse 中）发送经度和纬度时，突然应用程序被强制关闭服务代码

代码：

```
package com.android.trace;

  import java.io.BufferedReader;
  import java.io.InputStream;
 import java.io.InputStreamReader;
import java.util.ArrayList;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;

import android.app.Service;
import android.content.Context;
import android.content.Intent;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
 import android.os.Bundle;
import android.os.IBinder;

 import android.widget.Toast;

 public class MyService extends Service{

String tag="TestService";
double logi;
double lat;
long MINIMUM_DISTANCE_CHANGE_FOR_UPDATES = 1; // in Meters
    long MINIMUM_TIME_BETWEEN_UPDATES = 1000; // in Millisecon
    Location loc;
    LocationManager manager;
   @Override
   public void onCreate() {

   manager=(LocationManager)getSystemService(Context.LOCATION_SERVICE);
      manager.requestLocationUpdates(
           LocationManager.GPS_PROVIDER, 
           MINIMUM_TIME_BETWEEN_UPDATES, 
           MINIMUM_DISTANCE_CHANGE_FOR_UPDATES,
           new MyLocationListener()

   );
  Toast.makeText(MyService.this,"activity created...",Toast.LENGTH_LONG).show();
  loc=manager.getLastKnownLocation(LocationManager.GPS_PROVIDER);

  String s;
  if(loc!=null)
  {
     logi=loc.getLongitude();
     lat=loc.getLatitude();
      s="Lat:" + lat + "\nLong:" + logi;

  }
  else
  {
    s ="no location found";
  }

  Toast.makeText(this,"Your Current Position is:\n" +
          s,Toast.LENGTH_LONG).show();
  webcall(logi,lat); 

  }

     @Override
     public int onStartCommand(Intent intent, int flags, int startId) {

   return START_STICKY;
   }
     @Override
        public void onDestroy() {
        super.onDestroy();
      Toast.makeText(MyService.this, "Service destroyed...", Toast.LENGTH_LONG).show();
    }

    @Override
    public IBinder onBind(Intent intent) {
   return null;
   }

    public void webcall(double logi,double lat)
{
    InputStream is=null;
    String result = "";
    //the year data to send
    ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
    nameValuePairs.add(new BasicNameValuePair("logitude",Double.toString(logi)));
    nameValuePairs.add(new BasicNameValuePair("latitude",Double.toString(lat)));

    //http post
    try{
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost("http://10.0.2.2/location.php");
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            HttpResponse response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity();
            is = entity.getContent();
    }catch(Exception e){
            Toast.makeText(MyService.this,"Error in http connection "+e.toString(),Toast.LENGTH_LONG).show();
    }
    //convert response to string
    try{
            BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                    sb.append(line + "\n");
            }
            is.close();

             result=sb.toString();

            Toast.makeText(MyService.this,result,Toast.LENGTH_LONG).show();
    }catch(Exception e){
            Toast.makeText(MyService.this,"Error converting result "+e.toString(),Toast.LENGTH_LONG).show();
    }
}

}

 class MyLocationListener implements LocationListener
{
 public void onLocationChanged(Location location) {

     new MyService().webcall(location.getLongitude(),location.getLatitude());
 }
   public void onProviderDisabled(String s) {

 }

 public void onProviderEnabled(String s) {

 }
  public void onStatusChanged(String s, int i, Bundle b) {

 }

} 
```

我正在使用广播接收器在 stat up 处启动服务，广播接收器的代码是

代码：

```
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;

public class MyBroadcastReceiver extends BroadcastReceiver {

  public void onReceive(Context context, Intent intent) {
      Intent startServiceIntent = new Intent(context, MyService.class);
      startServiceIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
       context.startService(startServiceIntent);

   }
} 
```

清单是

```
<service android:enabled="true" android:name=".MyService">
            <intent-filter>
                <action android:name="com.android.trace.MyService"/>

            </intent-filter>
        </service>

        <receiver android:name="com.android.trace.MyBroadcastReceiver">  
            <intent-filter>  
              <action android:name="android.intent.action.BOOT_COMPLETED" />  
             </intent-filter>  
        </receiver> 
         <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
         <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
        <uses-permission android:name="android.permission.INTERNET" />
        <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" /> 
```

logcat 是

```
 09-06 13:14:38.427: E/AndroidRuntime(255): FATAL EXCEPTION: main
     09-06 13:14:38.427: E/AndroidRuntime(255): java.lang.NullPointerException
     09-06 13:14:38.427: E/AndroidRuntime(255):     at    android.content.ContextWrapper.getResources(ContextWrapper.java:80)
     09-06 13:14:38.427: E/AndroidRuntime(255):at android.widget.Toast.<init>Toast.java:89)
     09-06 13:14:38.427:E/AndroidRuntime(255):aandroid.widget.Toast.makeText(Toast.java:231)
     09-06    13:14:38.427:E/AndroidRuntime(255):atcom.android.trace.MyService.webcall(MyService.java:128)
      09-06 13:14:38.427:E/AndroidRuntime(255):atcom.android.trace.MyLocationListener.onLocationChanged(MyService.java:141)
09-06 13:14:38.427: E/AndroidRuntime(255):  at android.location.LocationManager$ListenerTransport._handleMessage(LocationManager.java:191)
09-06 13:14:38.427: E/AndroidRuntime(255):  at android.location.LocationManager$ListenerTransport.access$000(LocationManager.java:124)
09-06 13:14:38.427: E/AndroidRuntime(255):  at android.location.LocationManager$ListenerTransport$1.handleMessage(LocationManager.java:140)
09-06 13:14:38.427: E/AndroidRuntime(255):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-06 13:14:38.427: E/AndroidRuntime(255):  at android.os.Looper.loop(Looper.java:123)
09-06 13:14:38.427: E/AndroidRuntime(255):  at android.app.ActivityThread.main(ActivityThread.java:4627)
09-06 13:14:38.427: E/AndroidRuntime(255):  at java.lang.reflect.Method.invokeNative(Native Method)
09-06 13:14:38.427: E/AndroidRuntime(255):  at java.lang.reflect.Method.invoke(Method.java:521)
09-06 13:14:38.427: E/AndroidRuntime(255):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
09-06 13:14:38.427: E/AndroidRuntime(255):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
09-06 13:14:38.427: E/AndroidRuntime(255):  at dalvik.system.NativeStart.main(Native Method) 
```

位置更改时出现空指针异常请帮助我，我是android新手。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T13:45:11.767

您不能自己实例化您的服务。这必须由框架实例化才能初始化上下文。在服务内移动 MyLocationListener 并

代替

```
new MyService().webcall 
```

采用

```
 MyService.this.webcall(location.getLongitude(),location.getLatitude()); 
```

要不就

```
webcall(location.getLongitude(),location.getLatitude()); 
```

# objective-c - 带有标签栏控制器的导航栏上的分段控制

> ID：12301333
> 
> 赞同：2
> 
> 时间：2012-09-06T13:35:14.063
> 
> 标签：objective-c, xcode, uinavigationcontroller, uitabbarcontroller, uisegmentedcontrol

目前我有一个应用程序，顶部有带有导航栏的标签栏控制器。我的主要目标是做这样的事情： [http](http://www.roseindia.net/tutorials/newtutorials/iphone/TabwithSegment/Final-image-for-Tab-with-Se.jpg) ://www.roseindia.net/tutorials/newtutorials/iphone/TabwithSegment/Final-image-for-Tab-with-Se.jpg 所以它应该看起来像上面的图片，只有分段控件将更改表视图。任何想法如何实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T13:45:34.750

试试这个

```
 [segmentedControl setFrame:[self.navigationController.toolbar bounds]];

 [self.navigationController.toolbar addSubview:segmentedControl]; 
```

# c# - 计算或生成的成员不能更改

> ID：12301336
> 
> 赞同：0
> 
> 时间：2012-09-06T13:35:26.130
> 
> 标签：c#, asp.net, sql-server

我在数据库中有一个列，它需要一个位值（1,0）。默认设置为 1。我使用的是 Linq。当我尝试更改值时，它给了我这个异常。

```
 A member that is computed or generated cannot be changed. 
```

在林克

```
 [global::System.Data.Linq.Mapping.ColumnAttribute(Storage="_IsDefault", DbType="Bit NOT NULL",IsDbGenerated="true" )] 
```

如果我删除 IsDbGenerated 属性。我可以更改这些值，但是当我使用 CSV 文件直接导入一些数据时，默认值始终为 0，但在数据库中设置为 1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T13:57:20.443

您不能将代码中的字段或属性的默认值也设置为 1（或 true）吗？您还可以在字段所属对象的构造函数中设置默认值。

# c - 区分可选参数、路径名或文件？c语言

> ID：12301341
> 
> 赞同：1
> 
> 时间：2012-09-06T13:35:31.737
> 
> 标签：c, arguments, filenames, pathname

我对 c 很陌生，对任何其他语言的经验都比较少：/ 对于 uni 的作业，我有点卡在这个小部分上。本质上，我需要编写一个具有 4 个可选参数的“ls”函数，例如：

```
list [-l] [-f] [pathname] [localfile] 
```

现在，前两个是直截了当的。为了使事情变得更加困难，“本地文件”不一定存在，并且“路径名”（如果给定）将位于我通过套接字连接到的服务器上（因此检查它是否是文件并检查路径名已出）。我在想，检查字符串中的最后 4 个字符是否有 '.txt' 或类似的东西。我实际上完全被难住了，如果我找不到解决方案，明天我会把这个问题提交给我的路线输送机。

这是我实际必须做的一小部分，但任何朝着正确方向的推动都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T13:44:23.847

您将需要处理 argc 和 argv 以获取命令行参数。这是首先要做的事情，获取论点 - 确保它们是正确的，并确定所要求的内容。

```
int main(int argc, char  *argv[]) 
```

假设您在 Linux/Unix 上，您将需要使用目录函数 opendir()/readdir()/closedir() - *dirent.h*。**stat()**函数将需要满足 -l 要求。**access()**将确定文件是否存在，然后**stat()**将告诉您该文件是常规文件还是目录。

我会创建一个结构来保存四个可选参数，并从一个名为“process_arguments”的函数中返回它，该函数将 argc 和 argv 作为参数。

```
struct args {
  bool valid;
  bool l_option;
  bool f_option
  char directory[200]; 
  char filename[200];
} 
```

由于需要套接字连接，您将不得不编写一个将在服务器上不断运行的“服务器程序”和一个它将分叉来处理来自本地程序的请求的“客户端程序”。尝试查找套接字程序的示例。

另一个检查您是否有路径字符串或文件名的方法是查找路径分隔符 - 如果服务器是 Unix/Linux，则为“/”。这个方案在文件名中不应该有任何路径分隔符，所以一个的存在告诉你它是一个路径。

# c# - 加载内容时的透明窗口

> ID：12301351
> 
> 赞同：0
> 
> 时间：2012-09-06T13:35:57.753
> 
> 标签：c#, wpf, window, transparent, mahapps.metro

可悲的是，在 stackoverflow 上没有一个关于这个问题的问题。至少，我在搜索时没有碰到。

无论如何，当我要谈论的程序是构建时。出现的第一个窗口是登录。当用户输入正确的登录信息时，将显示主窗口。但是，在主窗口中有大量从互联网收集的信息。

这会导致主窗口在一段合理的时间内保持透明，如下图 [1] 所示。从互联网收集的信息由一些 xml 以及来自 MySQL db 的数据组成。

我有一个看起来像的 Window_Loaded 事件；

```
 private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        method1();
        method2(1);
        method3();
        .
        .
        .
        //method6();
    } 
```

因此，很明显，当我取消某些方法并以更少的时间离开此事件时，窗口在进入正常状态之前保持透明，变得更小。

![](../Images/23337e82c95613905e50d0e55093a946.png)

但是，我想要做的是让窗口正常加载，然后可能有加载指示器来通知用户正在加载内容。

ps 我正在使用 mahapps.metro 控件。

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T13:37:51.980

发生这种情况是因为您在 UI 线程上运行阻塞代码，因此窗口没有机会重新绘制。
您需要在后台线程中完成所有这些操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T14:12:35.533

试试这个

主窗口和代码。

```
<Window x:Class="SplashScreenWithStatus.Window1"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Window1" Height="600" Width="800" Loaded="Window_Loaded">
    <Grid>

    </Grid>
</Window>

 public partial class Window1 : Window
    {
        public Window1()
        {
            InitializeComponent();

            // Setting the status to show the application is still loading data
            Splash.Loading("Connecting...");
            // Set to sleep to simulate long running process
            Thread.Sleep(1500);
            Splash.Loading("Retrieving....");
            Thread.Sleep(1500);
            Splash.Loading("Success....");
            Thread.Sleep(1500);
        }

        private void Window_Loaded(object sender, RoutedEventArgs e)
        {
            Splash.EndDisplay();
        }
    } 
```

启动画面和代码

公共部分类飞溅：窗口{私有静态飞溅飞溅=新飞溅（）；

```
 // To refresh the UI immediately
    private delegate void RefreshDelegate();
    private static void Refresh(DependencyObject obj)
    {
        obj.Dispatcher.Invoke(System.Windows.Threading.DispatcherPriority.Render,
            (RefreshDelegate)delegate { });
    }

    public Splash()
    {
        InitializeComponent();
    }

    public static void BeginDisplay()
    {
        splash.Show();
    }

    public static void EndDisplay()
    {
        splash.Close();
    }

    public static void Loading(string test)
    {
        splash.statuslbl.Content = test;
        Refresh(splash.statuslbl);
    }

    } 
```

应用类 xaml 和代码

```
<Application x:Class="SplashScreenWithStatus.App"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    StartupUri="Window1.xaml" Startup="Application_Startup">
    <Application.Resources>

    </Application.Resources>
</Application>

 public partial class App : Application
    {
        private void Application_Startup(object sender, StartupEventArgs e)
        {
            Splash.BeginDisplay();
        }
    } 
```

# svn - 在 Xcode 4 中将文件从另一台计算机添加到我的 SVN 存储库

> ID：12301354
> 
> 赞同：1
> 
> 时间：2012-09-06T13:36:01.127
> 
> 标签：svn, version-control, xcode4

我想在 Xcode 4 中使用内置的 SVN？我的主要问题是如何将新创建的类从其他计算机添加到我的项目中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T13:39:36.577

在 SVN 控件上应该有一个“添加文件”选项。比如在 Smart SVN 中，你可以看到你的项目所在的文件夹，但在最近添加的文件附近出现“未版本化”。您应该右键单击该文件，然后按“将文件添加到 Smart SVN 控件”或类似的东西。

该方法在每个 SVN 控制系统中应该是类似的。

# android - 为什么 AsyncTask 不在另一个 AsyncTask 的 PostExecute 方法中执行？

> ID：12301356
> 
> 赞同：-1
> 
> 时间：2012-09-06T13:36:07.393
> 
> 标签：android

我正在制作一个部分列表视图，其中第一个部分是待处理的请求列表，第二个部分已经是朋友，在列表视图的第一部分有两个按钮接受和拒绝。当我单击接受命中服务器并更改状态时，现在我的列表应该更新，并且第一部分接受列表应该显示在列表视图第二部分的好友列表中。我正在使用以下代码：-

```
public class EntryAdapter extends ArrayAdapter<Item> {

private Context context;
private List<Item> items;
private LayoutInflater objlayoutinflator;
private PostJobImageLoader objimageLoader;
private ConnectionFriendListModle objmodle=null;

public EntryAdapter(Context context,List<Item> items) {
    super(context, 0, items);
    this.context = context;
    this.items = items;
    objlayoutinflator = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    objimageLoader = new PostJobImageLoader(context.getApplicationContext());
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View myview = convertView;

    final Item objitem = items.get(position);
    if (objitem != null) {
        if (objitem.isSection()) {
            SectionItem objsection = (SectionItem) objitem;
            myview = objlayoutinflator.inflate(R.layout.listviewsection,
                    null);

            myview.setOnClickListener(null);
            myview.setOnLongClickListener(null);
            myview.setLongClickable(false);

            final TextView sectionView = (TextView) myview
                    .findViewById(R.id.txtsection);
            sectionView.setText(objsection.getTitle());
        } else {
            objmodle = (ConnectionFriendListModle) objitem;
            myview = objlayoutinflator.inflate(R.layout.connectionlistrow,
                    null);
            final TextView title = (TextView) myview
                    .findViewById(R.id.jobtitleinjobbidalert);
            final TextView subtitle = (TextView) myview
                    .findViewById(R.id.jobsubtitle);
            final ImageView objimageview = (ImageView) myview
                    .findViewById(R.id.user_image);
            final Button objaccept = (Button) myview
                    .findViewById(R.id.btnaccept);
            final Button objreject = (Button) myview
                    .findViewById(R.id.btnreject);

            if (objmodle.getStatus().equalsIgnoreCase("pending")) {
                objaccept.setVisibility(View.VISIBLE);
                objreject.setVisibility(View.VISIBLE);
                title.setText(objmodle.getUsername());
                subtitle.setText(objmodle.getName());
                String url = objmodle.getPicture();
                objimageLoader.DisplayImage(AppConstants.IMAGE_BASE_URL
                        + url, objimageview);
            } else {
                objaccept.setVisibility(View.INVISIBLE);
                objreject.setVisibility(View.INVISIBLE);
                title.setText(objmodle.getUsername());
                subtitle.setText(objmodle.getName());
                String url = objmodle.getPicture();
                objimageLoader.DisplayImage(AppConstants.IMAGE_BASE_URL+url, objimageview);
            }

            objaccept.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {

                    new AcceptFriendRequest().execute(objmodle.getId(),"accepted");
                }
            });
            objreject.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v)
                {

                }
            });
        }
    }
    return myview;
}

 private class AcceptFriendRequest extends AsyncTask<String,Void,String>
    {
     ProgressDialog objprogress = new ProgressDialog(EntryAdapter.this.context);
     AppRequestHandler objApprequest = new AppRequestHandler();
     String objresponce="";
        @Override
        protected void onPreExecute() {
            objprogress.setMessage("Please Wait While Loading...");
            objprogress.show();
        }

        @Override
        protected String doInBackground(String... params) {
            objresponce = objApprequest.acceptRequest(params[0],params[1]);
            return objresponce;
        }

        @Override
        protected void onPostExecute(String result) {
            if(objprogress.isShowing())
            {
                objprogress.dismiss();
            }
            if(result.equals("0"))
            {
                SharedPreferences myPrefs = EntryAdapter.this.context.getSharedPreferences(
                        AppConstants.MYPREF, EntryAdapter.this.context.MODE_WORLD_READABLE);
                String userid = myPrefs.getString(AppConstants.USER_ID, "");

                                 //but when controll reach this line not execute this asynctask and niether update listview
                new GetAllConnectionDetail().equals("86");

            }
        }
    }

 private class GetAllConnectionDetail extends AsyncTask<String,Void,List<Item>>
    {
     ProgressDialog objprogress = new ProgressDialog(EntryAdapter.this.context);
     AppRequestHandler objApprequest = new AppRequestHandler();
     List<Item> objlistitem=null;
        @Override
        protected void onPreExecute() {
            objprogress.setMessage("Please Wait While Loading...");
            objprogress.show();
        }

        @Override
        protected List<Item> doInBackground(String... params) {
            objlistitem = objApprequest.connectionDetails(params[0]);
            return objlistitem;
        }

        @Override
        protected void onPostExecute(List<Item> result) {
            if(objprogress.isShowing())
            {
                objprogress.dismiss();
            }
              items.clear();
              items.addAll(result);
              notifyDataSetChanged();   
        }

    } 
```

}

我的方向是对还是错，请任何人帮助我为什么它不起作用......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T13:42:46.880

你必须`GetAllConnectionDetail`通过调用它的`execute`方法来开始你的任务，似乎你不这样做。

# php - 使用 PHP Mail() 发送附件？

> ID：12301358
> 
> 赞同：242
> 
> 时间：2012-09-06T13:36:22.137
> 
> 标签：php

我需要用邮件发送pdf，可以吗？

```
$to = "xxx";
$subject = "Subject" ;
$message = 'Example message with <b>html</b>';
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
$headers .= 'From: xxx <xxx>' . "\r\n";
mail($to,$subject,$message,$headers); 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：337
> 
> 时间：2012-09-06T14:27:57.097

我同意评论中的@MihaiIorga - 使用 PHPMailer 脚本。你听起来像是在拒绝它，因为你想要更简单的选择。相信我，与尝试使用 PHP 的内置函数自己做相比，PHPMailer**是一个更容易的选择。**`mail()`PHP的`mail()`功能真的不是很好。

使用 PHPMailer：

*   从这里下载 PHPMailer 脚本：http: [//github.com/PHPMailer/PHPMailer](http://github.com/PHPMailer/PHPMailer)
*   提取存档并将脚本的文件夹复制到项目中方便的位置。
*   包含主脚本文件——`require_once('path/to/file/class.phpmailer.php');`

现在，发送带有附件的电子邮件变得异常简单：

```
use PHPMailer\PHPMailer\PHPMailer;
use PHPMailer\PHPMailer\Exception;

$email = new PHPMailer();
$email->SetFrom('you@example.com', 'Your Name'); //Name is optional
$email->Subject   = 'Message Subject';
$email->Body      = $bodytext;
$email->AddAddress( 'destinationaddress@example.com' );

$file_to_attach = 'PATH_OF_YOUR_FILE_HERE';

$email->AddAttachment( $file_to_attach , 'NameOfFile.pdf' );

return $email->Send(); 
```

这只是一行`$email->AddAttachment();`- 你不能要求任何更容易。

如果你用 PHP 的`mail()`函数来做这件事，你会写一堆代码，而且你可能会有很多很难找到的错误。

* * *

## 回答 #2

> 赞同：217
> 
> 时间：2012-09-07T06:46:18.827

您可以尝试使用以下代码：

```
 $filename = 'myfile';
    $path = 'your path goes here';
    $file = $path . "/" . $filename;

    $mailto = 'mail@mail.com';
    $subject = 'Subject';
    $message = 'My message';

    $content = file_get_contents($file);
    $content = chunk_split(base64_encode($content));

    // a random hash will be necessary to send mixed content
    $separator = md5(time());

    // carriage return type (RFC)
    $eol = "\r\n";

    // main header (multipart mandatory)
    $headers = "From: name <test@test.com>" . $eol;
    $headers .= "MIME-Version: 1.0" . $eol;
    $headers .= "Content-Type: multipart/mixed; boundary=\"" . $separator . "\"" . $eol;
    $headers .= "Content-Transfer-Encoding: 7bit" . $eol;
    $headers .= "This is a MIME encoded message." . $eol;

    // message
    $body = "--" . $separator . $eol;
    $body .= "Content-Type: text/plain; charset=\"iso-8859-1\"" . $eol;
    $body .= "Content-Transfer-Encoding: 8bit" . $eol;
    $body .= $message . $eol;

    // attachment
    $body .= "--" . $separator . $eol;
    $body .= "Content-Type: application/octet-stream; name=\"" . $filename . "\"" . $eol;
    $body .= "Content-Transfer-Encoding: base64" . $eol;
    $body .= "Content-Disposition: attachment" . $eol;
    $body .= $content . $eol;
    $body .= "--" . $separator . "--";

    //SEND Mail
    if (mail($mailto, $subject, $body, $headers)) {
        echo "mail send ... OK"; // or use booleans here
    } else {
        echo "mail send ... ERROR!";
        print_r( error_get_last() );
    } 
```

**编辑 2018 年 6 月 14 日**

在某些电子邮件提供商使用中提高可读性

`$body .= $eol . $message . $eol . $eol;`和 `$body .= $eol . $content . $eol . $eol;`

* * *

## 回答 #3

> 赞同：149
> 
> 时间：2015-07-15T11:11:04.767

对于 PHP 5.5.27 安全更新

```
$file = $path.$filename;
$content = file_get_contents( $file);
$content = chunk_split(base64_encode($content));
$uid = md5(uniqid(time()));
$file_name = basename($file);

// header
$header = "From: ".$from_name." <".$from_mail.">\r\n";
$header .= "Reply-To: ".$replyto."\r\n";
$header .= "MIME-Version: 1.0\r\n";
$header .= "Content-Type: multipart/mixed; boundary=\"".$uid."\"\r\n\r\n";

// message & attachment
$nmessage = "--".$uid."\r\n";
$nmessage .= "Content-type:text/plain; charset=iso-8859-1\r\n";
$nmessage .= "Content-Transfer-Encoding: 7bit\r\n\r\n";
$nmessage .= $message."\r\n\r\n";
$nmessage .= "--".$uid."\r\n";
$nmessage .= "Content-Type: application/octet-stream; name=\"".$filename."\"\r\n";
$nmessage .= "Content-Transfer-Encoding: base64\r\n";
$nmessage .= "Content-Disposition: attachment; filename=\"".$file_name."\"\r\n\r\n";
$nmessage .= $content."\r\n\r\n";
$nmessage .= "--".$uid."--";

if (mail($mailto, $subject, $nmessage, $header)) {
    return true; // Or do something here
} else {
  return false;
} 
```

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2014-05-15T21:14:27.177

[Swiftmailer](http://swiftmailer.org/)是另一个易于使用的脚本，可自动防止[电子邮件注入](http://securephpwiki.com/index.php/Email_Injection)并使附件变得轻而易举。我也强烈反对使用 PHP 的内置`mail()`函数。

要使用：

*   下载[Swiftmailer](https://github.com/swiftmailer/swiftmailer)，并将`lib`文件夹放入您的项目中
*   使用包含主文件`require_once 'lib/swift_required.php';`

现在在需要邮寄时添加代码：

```
// Create the message
$message = Swift_Message::newInstance()
    ->setSubject('Your subject')
    ->setFrom(array('webmaster@mysite.com' => 'Web Master'))
    ->setTo(array('receiver@example.com'))
    ->setBody('Here is the message itself')
    ->attach(Swift_Attachment::fromPath('myPDF.pdf'));

//send the message          
$mailer->send($message); 
```

更多信息和选项可以在[Swiftmailer 文档](http://swiftmailer.org/docs/introduction.html)中找到。

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2012-09-06T13:39:59.647

要发送带附件的电子邮件，我们需要使用 multipart/mixed MIME 类型，指定混合类型将包含在电子邮件中。此外，我们希望使用 multipart/alternative MIME 类型来发送电子邮件的纯文本和 HTML 版本。看一下示例：

```
<?php 
//define the receiver of the email 
$to = 'youraddress@example.com'; 
//define the subject of the email 
$subject = 'Test email with attachment'; 
//create a boundary string. It must be unique 
//so we use the MD5 algorithm to generate a random hash 
$random_hash = md5(date('r', time())); 
//define the headers we want passed. Note that they are separated with \r\n 
$headers = "From: webmaster@example.com\r\nReply-To: webmaster@example.com"; 
//add boundary string and mime type specification 
$headers .= "\r\nContent-Type: multipart/mixed; boundary=\"PHP-mixed-".$random_hash."\""; 
//read the atachment file contents into a string,
//encode it with MIME base64,
//and split it into smaller chunks
$attachment = chunk_split(base64_encode(file_get_contents('attachment.zip'))); 
//define the body of the message. 
ob_start(); //Turn on output buffering 
?> 
--PHP-mixed-<?php echo $random_hash; ?>  
Content-Type: multipart/alternative; boundary="PHP-alt-<?php echo $random_hash; ?>" 

--PHP-alt-<?php echo $random_hash; ?>  
Content-Type: text/plain; charset="iso-8859-1" 
Content-Transfer-Encoding: 7bit

Hello World!!! 
This is simple text email message. 

--PHP-alt-<?php echo $random_hash; ?>  
Content-Type: text/html; charset="iso-8859-1" 
Content-Transfer-Encoding: 7bit

<h2>Hello World!</h2> 
<p>This is something with <b>HTML</b> formatting.</p> 

--PHP-alt-<?php echo $random_hash; ?>-- 

--PHP-mixed-<?php echo $random_hash; ?>  
Content-Type: application/zip; name="attachment.zip"  
Content-Transfer-Encoding: base64  
Content-Disposition: attachment  

<?php echo $attachment; ?> 
--PHP-mixed-<?php echo $random_hash; ?>-- 

<?php 
//copy current buffer contents into $message variable and delete current output buffer 
$message = ob_get_clean(); 
//send the email 
$mail_sent = @mail( $to, $subject, $message, $headers ); 
//if the message is sent successfully print "Mail sent". Otherwise print "Mail failed" 
echo $mail_sent ? "Mail sent" : "Mail failed"; 
?> 
```

如您所见，发送带有附件的电子邮件很容易完成。在前面的示例中，我们有 multipart/mixed MIME 类型，在其中我们有 multipart/alternative MIME 类型，它指定了电子邮件的两个版本。为了在我们的消息中包含附件，我们将指定文件中的数据读入字符串，使用 base64 对其进行编码，将其拆分为更小的块以确保它符合 MIME 规范，然后将其作为附件包含在内。

取自[这里](http://webcheatsheet.com/php/send_email_text_html_attachment.php)。

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2017-04-21T08:13:32.693

这对我有用。它还附加了多个附件。容易地

```
<?php

if ($_POST && isset($_FILES['file'])) {
    $recipient_email = "recipient@yourmail.com"; //recepient
    $from_email = "info@your_domain.com"; //from email using site domain.
    $subject = "Attachment email from your website!"; //email subject line

    $sender_name = filter_var($_POST["s_name"], FILTER_SANITIZE_STRING); //capture sender name
    $sender_email = filter_var($_POST["s_email"], FILTER_SANITIZE_STRING); //capture sender email
    $sender_message = filter_var($_POST["s_message"], FILTER_SANITIZE_STRING); //capture message
    $attachments = $_FILES['file'];

    //php validation
    if (strlen($sender_name) < 4) {
        die('Name is too short or empty');
    }
    if (!filter_var($sender_email, FILTER_VALIDATE_EMAIL)) {
        die('Invalid email');
    }
    if (strlen($sender_message) < 4) {
        die('Too short message! Please enter something');
    }

    $file_count = count($attachments['name']); //count total files attached
    $boundary = md5("specialToken$4332"); // boundary token to be used

    if ($file_count > 0) { //if attachment exists
        //header
        $headers = "MIME-Version: 1.0\r\n";
        $headers .= "From:" . $from_email . "\r\n";
        $headers .= "Reply-To: " . $sender_email . "" . "\r\n";
        $headers .= "Content-Type: multipart/mixed; boundary = $boundary\r\n\r\n";

        //message text
        $body = "--$boundary\r\n";
        $body .= "Content-Type: text/plain; charset=ISO-8859-1\r\n";
        $body .= "Content-Transfer-Encoding: base64\r\n\r\n";
        $body .= chunk_split(base64_encode($sender_message));

        //attachments
        for ($x = 0; $x < $file_count; $x++) {
            if (!empty($attachments['name'][$x])) {

                if ($attachments['error'][$x] > 0) { //exit script and output error if we encounter any
                    $mymsg = array(
                        1 => "The uploaded file exceeds the upload_max_filesize directive in php.ini",
                        2 => "The uploaded file exceeds the MAX_FILE_SIZE directive that was specified in the HTML form",
                        3 => "The uploaded file was only partially uploaded",
                        4 => "No file was uploaded",
                        6 => "Missing a temporary folder");
                    die($mymsg[$attachments['error'][$x]]);
                }

                //get file info
                $file_name = $attachments['name'][$x];
                $file_size = $attachments['size'][$x];
                $file_type = $attachments['type'][$x];

                //read file 
                $handle = fopen($attachments['tmp_name'][$x], "r");
                $content = fread($handle, $file_size);
                fclose($handle);
                $encoded_content = chunk_split(base64_encode($content)); //split into smaller chunks (RFC 2045)

                $body .= "--$boundary\r\n";
                $body .= "Content-Type: $file_type; name=" . $file_name . "\r\n";
                $body .= "Content-Disposition: attachment; filename=" . $file_name . "\r\n";
                $body .= "Content-Transfer-Encoding: base64\r\n";
                $body .= "X-Attachment-Id: " . rand(1000, 99999) . "\r\n\r\n";
                $body .= $encoded_content;
            }
        }
    } else { //send plain email otherwise
        $headers = "From:" . $from_email . "\r\n" .
                "Reply-To: " . $sender_email . "\n" .
                "X-Mailer: PHP/" . phpversion();
        $body = $sender_message;
    }

    $sentMail = @mail($recipient_email, $subject, $body, $headers);
    if ($sentMail) { //output success or failure messages
        die('Thank you for your email');
    } else {
        die('Could not send mail! Please check your PHP mail configuration.');
    }
}
?> 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2018-03-28T18:56:53.560

`application/octet-stream`由于指定的附件格式（ ），上述答案均不适合我。用于`application/pdf`PDF 文件以获得最佳效果。

```
<?php

// just edit these 
$to          = "email1@domain.com, email2@domain.com"; // addresses to email pdf to
$from        = "sent_from@domain.com"; // address message is sent from
$subject     = "Your PDF email subject"; // email subject
$body        = "<p>The PDF is attached.</p>"; // email body
$pdfLocation = "./your-pdf.pdf"; // file location
$pdfName     = "pdf-file.pdf"; // pdf file name recipient will get
$filetype    = "application/pdf"; // type

// creates headers and mime boundary
$eol = PHP_EOL;
$semi_rand     = md5(time());
$mime_boundary = "==Multipart_Boundary_$semi_rand";
$headers       = "From: $from$eolMIME-Version: 1.0$eol" .
    "Content-Type: multipart/mixed;$eol boundary=\"$mime_boundary\"";

// add html message body
$message = "--$mime_boundary$eol" .
    "Content-Type: text/html; charset=\"iso-8859-1\"$eol" .
    "Content-Transfer-Encoding: 7bit$eol$eol$body$eol";

// fetches pdf
$file = fopen($pdfLocation, 'rb');
$data = fread($file, filesize($pdfLocation));
fclose($file);
$pdf = chunk_split(base64_encode($data));

// attaches pdf to email
$message .= "--$mime_boundary$eol" .
    "Content-Type: $filetype;$eol name=\"$pdfName\"$eol" .
    "Content-Disposition: attachment;$eol filename=\"$pdfName\"$eol" .
    "Content-Transfer-Encoding: base64$eol$eol$pdf$eol--$mime_boundary--";

// Sends the email
if(mail($to, $subject, $message, $headers)) {
    echo "The email was sent.";
}
else {
    echo "There was an error sending the mail.";
} 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2015-04-28T07:59:02.797

工作理念：

```
if (isset($_POST['submit'])) {
    $mailto = $_POST["mailTo"];
    $from_mail = $_POST["fromEmail"];
    $replyto = $_POST["fromEmail"];
    $from_name = $_POST["fromName"];
    $message = $_POST["message"];
    $subject = $_POST["subject"];

    $filename = $_FILES["fileAttach"]["name"];
    $content = chunk_split(base64_encode(file_get_contents($_FILES["fileAttach"]["tmp_name"])));

    $uid = md5(uniqid(time()));
    $name = basename($file);
    $header = "From: " . $from_name . " <" . $from_mail . ">\r\n";
    $header .= "Reply-To: " . $replyto . "\r\n";

    $header .= "MIME-Version: 1.0\r\n";
    $header .= "Content-Type: multipart/mixed; boundary=\"" . $uid . "\"\r\n\r\n";
    $header .= "This is a multi-part message in MIME format.\r\n";
    $header .= "--" . $uid . "\r\n";

// You add html "Content-type: text/html; charset=utf-8\n" or for Text "Content-type:text/plain; charset=iso-8859-1\r\n" by I.khan
    $header .= "Content-type:text/html; charset=utf-8\n";
    $header .= "Content-Transfer-Encoding: 7bit\r\n\r\n";

// User Message you can add HTML if You Selected HTML content
    $header .= "<div style='color: red'>" . $message . "</div>\r\n\r\n";

    $header .= "--" . $uid . "\r\n";
    $header .= "Content-Type: application/octet-stream; name=\"" . $filename . "\"\r\n"; // use different content types here
    $header .= "Content-Transfer-Encoding: base64\r\n";
    $header .= "Content-Disposition: attachment; filename=\"" . $filename . "\"\r\n\r\n"; // For Attachment
    $header .= $content . "\r\n\r\n";
    $header .= "--" . $uid . "--";
    if (mail($mailto, $subject, "", $header)) {
        echo "<script>alert('Success');</script>"; // or use booleans here
    } else {
        echo "<script>alert('Failed');</script>";
    }
} 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2016-05-24T17:30:18.663

在为格式错误的附件苦苦挣扎后，这是我使用的代码：

```
$email = new PHPMailer();
$email->From      = 'from@somedomain.com';
$email->FromName  = 'FromName';
$email->Subject   = 'Subject';
$email->Body      = 'Body';
$email->AddAddress( 'to@somedomain.com' );
$email->AddAttachment( "/path/to/filename.ext" , "filename.ext", 'base64', 'application/octet-stream' );
$email->Send(); 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2020-03-19T15:14:17.997

HTML 代码：

```
<form enctype="multipart/form-data" method="POST" action=""> 
    <label>Your Name <input type="text" name="sender_name" /> </label> 
    <label>Your Email <input type="email" name="sender_email" /> </label> 
    <label>Your Contact Number <input type="tel" name="contactnumber" /> </label>
    <label>Subject <input type="text" name="subject" /> </label> 
    <label>Message <textarea name="description"></textarea> </label> 
    <label>Attachment <input type="file" name="attachment" /></label> 
    <label><input type="submit" name="button" value="Submit" /></label> 
</form> 
```

PHP代码：

```
<?php
if($_POST['button']){
{
    //Server Variables
    $server_name = "Your Name";
    $server_mail = "your_mail@domain.com";

    //Name Attributes of HTML FORM
    $sender_email = "sender_email";
    $sender_name = "sender_name";
    $contact = "contactnumber";
    $mail_subject = "subject";
    $input_file = "attachment";
    $message = "description";

    //Fetching HTML Values
    $sender_name = $_POST[$sender_name];
    $sender_mail = $_POST[$sender_email];
    $message = $_POST[$message];
    $contact= $_POST[$contact];
    $mail_subject = $_POST[$mail_subject];

    //Checking if File is uploaded
    if(isset($_FILES[$input_file])) 
    { 
        //Main Content
        $main_subject = "Subject seen on server's mail";
        $main_body = "Hello $server_name,<br><br> 
        $sender_name ,contacted you through your website and the details are as below: <br><br> 
        Name : $sender_name <br> 
        Contact Number : $contact <br> 
        Email : $sender_mail <br> 
        Subject : $mail_subject <br> 
        Message : $message.";

        //Reply Content
        $reply_subject = "Subject seen on sender's mail";
        $reply_body = "Hello $sender_name,<br> 
        \t Thank you for filling the contact form. We will revert back to you shortly.<br><br>
        This is an auto generated mail sent from our Mail Server.<br>
        Please do not reply to this mail.<br>
        Regards<br>
        $server_name";

//#############################DO NOT CHANGE ANYTHING BELOW THIS LINE#############################
        $filename= $_FILES[$input_file]['name'];
        $file = chunk_split(base64_encode(file_get_contents($_FILES[$input_file]['tmp_name'])));
        $uid = md5(uniqid(time()));
        //Sending mail to Server
        $retval = mail($server_mail, $main_subject, "--$uid\r\nContent-type:text/html; charset=iso-8859-1\r\nContent-Transfer-Encoding: 7bit\r\n\r\n $main_body \r\n\r\n--$uid\r\nContent-Type: application/octet-stream; name=\"$filename\"\r\nContent-Transfer-Encoding: base64\r\nContent-Disposition: attachment; filename=\"$filename\"\r\n\r\n$file\r\n\r\n--$uid--", "From: $sender_name <$sender_mail>\r\nReply-To: $sender_mail\r\nMIME-Version: 1.0\r\nContent-Type: multipart/mixed; boundary=\"$uid\"\r\n\r\n");
        //Sending mail to Sender
        $retval = mail($sender_mail, $reply_subject, $reply_body , "From: $server_name<$server_mail>\r\nMIME-Version: 1.0\r\nContent-type: text/html\r\n");
//#############################DO NOT CHANGE ANYTHING ABOVE THIS LINE#############################

        //Output
        if ($retval == true) {
            echo "Message sent successfully...";
            echo "<script>window.location.replace('index.html');</script>";
        } else {
            echo "Error<br>";
            echo "Message could not be sent...Try again later";
            echo "<script>window.location.replace('index.html');</script>";
        }
    }else{
        echo "Error<br>";
        echo "File Not Found";
    }
}else{
    echo "Error<br>";
    echo "Unauthorised Access";
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-01-11T00:10:27.823

我最终编写了自己的电子邮件发送/编码功能。这对我发送 PDF 附件很有效。我没有在生产中使用其他功能。

注意：尽管规范非常强调必须使用 \r\n 来分隔标题，但我发现它仅在我使用 PHP_EOL 时才有效。我只在 Linux 上测试过这个。YMMV

```
<?php
# $args must be an associative array
#     required keys: from, to, body
#          body can be a string or a [tree of] associative arrays. See examples below
#     optional keys: subject, reply_to, cc, bcc
# EXAMPLES:
#    # text-only email:
#    email2(array(
#        'from' => 'noreply@foo.com',
#        'to' => 'jason@jasonwoof.com',
#        'subject' => 'test',
#        # body will be text/plain because we're passing a string that doesn't start with '<'
#        'body' => 'Hi, testing 1 2 3',
#    ));
#
#    # html-only email
#    email2(array(
#        'from' => 'noreply@foo.com',
#        'to' => 'jason@jasonwoof.com',
#        'subject' => 'test',
#        # body will be text/html because we're passing a string that starts with '<'
#        'body' => '<h1>Hi!</h1>I like <a href="http://cheese.com">cheese</a>',
#    ));
#
#    # text-only email (explicitly, in case first character is dynamic or something)
#    email2(array(
#        'from' => 'noreply@foo.com',
#        'to' => 'jason@jasonwoof.com',
#        'subject' => 'test',
#        # body will be text/plain because we're passing a string that doesn't start with '<'
#        'body' => array(
#            'type' => 'text',
#            'body' => $message_text,
#        )
#    ));
#
#    # email with text and html alternatives (auto-detected mime types)
#    email2(array(
#        'from' => 'noreply@foo.com',
#        'to' => 'jason@jasonwoof.com',
#        'subject' => 'test',
#        'body' => array(
#            'type' => 'alternatives',
#            'body' => array(
#                "Hi!\n\nI like cheese",
#                '<h1>Hi!</h1><p>I like <a href="http://cheese.com">cheese</a></p>',
#            )
#        )
#    ));
#
#    # email with text and html alternatives (explicit types)
#    email2(array(
#        'from' => 'noreply@foo.com',
#        'to' => 'jason@jasonwoof.com',
#        'subject' => 'test',
#        'body' => array(
#            'type' => 'alternatives',
#            'body' => array(
#                array(
#                    'type' => 'text',
#                    'body' => "Hi!\n\nI like cheese",
#                ),
#                array(
#                    'type' => 'html',
#                    'body' => '<h1>Hi!</h1><p>I like cheese</p>',
#                ),
#            )
#        )
#    ));
#
#    # email with an attachment
#    email2(array(
#        'from' => 'noreply@foo.com',
#        'to' => 'jason@jasonwoof.com',
#        'subject' => 'test',
#        'body' => array(
#            'type' => 'mixed',
#            'body' => array(
#                "Hi!\n\nCheck out this (inline) image",
#                array(
#                    'type' => 'image/png',
#                    'disposition' => 'inline',
#                    'body' => $image_data, # raw file contents
#                ),
#                "Hi!\n\nAnd here's an attachment",
#                array(
#                    'type' => 'application/pdf; name="attachment.pdf"',
#                    'disposition' => 'attachment; filename="attachment.pdf"',
#                    'body' => $pdf_data, # raw file contents
#                ),
#                "Or you can use shorthand:",
#                array(
#                    'type' => 'application/pdf',
#                    'attachment' => 'attachment.pdf', # name for client (not data source)
#                    'body' => $pdf_data, # raw file contents
#                ),
#            )
#        )
#    ))
function email2($args) {
    if (!isset($args['from'])) { return 1; }
    $from = $args['from'];
    if (!isset($args['to'])) { return 2; }
    $to = $args['to'];
    $subject = isset($args['subject']) ? $args['subject'] : '';
    $reply_to = isset($args['reply_to']) ? $args['reply_to'] : '';
    $cc = isset($args['cc']) ? $args['cc'] : '';
    $bcc = isset($args['bcc']) ? $args['bcc'] : '';

    #FIXME should allow many more characters here (and do Q encoding)
    $subject = isset($args['subject']) ? $args['subject'] : '';
    $subject = preg_replace("|[^a-z0-9 _/#'.:&,-]|i", '_', $subject);

    $headers = "From: $from";
    if($reply_to) {
        $headers .= PHP_EOL . "Reply-To: $reply_to";
    }
    if($cc) {
        $headers .= PHP_EOL . "CC: $cc";
    }
    if($bcc) {
        $headers .= PHP_EOL . "BCC: $bcc";
    }

    $r = email2_helper($args['body']);
    $headers .= PHP_EOL . $r[0];
    $body = $r[1];

    if (mail($to, $subject, $body, $headers)) {
        return 0;
    } else {
        return 5;
    }
}

function email2_helper($body, $top = true) {
    if (is_string($body)) {
        if (substr($body, 0, 1) == '<') {
            return email2_helper(array('type' => 'html', 'body' => $body), $top);
        } else {
            return email2_helper(array('type' => 'text', 'body' => $body), $top);
        }
    }
    # now we can assume $body is an associative array
    # defaults:
    $type = 'application/octet-stream';
    $mime = false;
    $boundary = null;
    $disposition = null;
    $charset = false;
    # process 'type' first, because it sets defaults for others
    if (isset($body['type'])) {
        $type = $body['type'];
        if ($type === 'text') {
            $type = 'text/plain';
            $charset = true;
        } elseif ($type === 'html') {
            $type = 'text/html';
            $charset = true;
        } elseif ($type === 'alternative' || $type === 'alternatives') {
            $mime = true;
            $type = 'multipart/alternative';
        } elseif ($type === 'mixed') {
            $mime = true;
            $type = 'multipart/mixed';
        }
    }
    if (isset($body['disposition'])) {
        $disposition = $body['disposition'];
    }
    if (isset($body['attachment'])) {
        if ($disposition == null) {
            $disposition = 'attachment';
        }
        $disposition .= "; filename=\"{$body['attachment']}\"";
        $type .= "; name=\"{$body['attachment']}\"";
    }
    # make headers
    $headers = array();
    if ($top && $mime) {
        $headers[] = 'MIME-Version: 1.0';
    }
    if ($mime) {
        $boundary = md5('5sd^%Ca)~aAfF0=4mIN' . rand() . rand());
        $type .= "; boundary=$boundary";
    }
    if ($charset) {
        $type .= '; charset=' . (isset($body['charset']) ? $body['charset'] : 'UTF-8');
    }
    $headers[] = "Content-Type: $type";
    if ($disposition !== null) {
        $headers[] = "Content-Disposition: {$disposition}";
    }

    $data = '';
    # return array, first el is headers, 2nd is body (php's mail() needs them separate)
    if ($mime) {
        foreach ($body['body'] as $sub_body) {
            $data .= "--$boundary" . PHP_EOL;
            $r = email2_helper($sub_body, false);
            $data .= $r[0] . PHP_EOL . PHP_EOL; # headers
            $data .= $r[1] . PHP_EOL . PHP_EOL; # body
        }
        $data .= "--$boundary--";
    } else {
        if(preg_match('/[^\x09\x0A\x0D\x20-\x7E]/', $body['body'])) {
            $headers[] = "Content-Transfer-Encoding: base64";
            $data .= chunk_split(base64_encode($body['body']));
        } else {
            $data .= $body['body'];
        }
    }
    return array(join(PHP_EOL, $headers), $data);
} 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-09-21T07:11:40.037

```
 $to = "to@gmail.com";
            $subject = "Subject Of The Mail";
            $message = "Hi there,<br/><br/>This is my message.<br><br>";

            $headers = "From: From-Name<from@gmail.com>";
// boundary
            $semi_rand = md5(time());
            $mime_boundary = "==Multipart_Boundary_x{$semi_rand}x";

// headers for attachment
            $headers .= "\nMIME-Version: 1.0\n" . "Content-Type: multipart/mixed;\n" . " boundary=\"{$mime_boundary}\"";

// multipart boundary
            $message = "This is a multi-part message in MIME format.\n\n" . "--{$mime_boundary}\n" . "Content-Type: text/html; charset=ISO-8859-1\"\n" . "Content-Transfer-Encoding: 7bit\n\n" . $message . "\n\n";

                $message .= "--{$mime_boundary}\n";
                $filepath = 'uploads/'.$_FILES['image']['name'];
                move_uploaded_file($_FILES['image']['tmp_name'], $filepath); //upload the file
                $filename = $_FILES['image']['name'];
                $file = fopen($filepath, "rb");
                $data = fread($file, filesize($filepath));
                fclose($file);
                $data = chunk_split(base64_encode($data));
                $message .= "Content-Type: {\"application/octet-stream\"};\n" . " name=\"$filename\"\n" .
                        "Content-Disposition: attachment;\n" . " filename=\"$filename\"\n" .
                        "Content-Transfer-Encoding: base64\n\n" . $data . "\n\n";
                $message .= "--{$mime_boundary}\n";

mail($to, $subject, $message, $headers); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-12-24T16:16:00.160

您可以使用我创建的此类发送常规或附件电子邮件。

这是带有如何使用它的示例的链接。

[https://github.com/Nerdtrix/EZMAIL](https://github.com/Nerdtrix/EZMAIL)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-06-24T10:16:21.443

```
联系请求提交**名称：** '.$name.'**电子邮件：** '.$email。'**主题：** '.$subject.'**消息：**
 '.$message。'';$headers="From:$fromName"."";if(!empty($uploadedFile)&&file_exists($uploadedFile)){$semi_rand=md5(time());$mime_boundary="==Multipart_Boundary_x{$semi_rand }x";$headers.="\nMIME-Version:1.0\n"."Content-Type:multipart/mixed;\n"."boundary=\"{$mime_boundary}\"";$message="- -{$mime_boundary}\n"."Content-Type:text/html;charset=\"UTF-8\"\n"."Content-Transfer-Encoding:7bit\n\n".$htmlContent."\ n\n";if(is_file($uploadedFile)){$message.="--{$mime_boundary}\n";$fp=@fopen($uploadedFile,"rb");$data=@fread($ fp,filesize($uploadedFile));@fclose($fp);$data=chunk_split(base64_encode($data));$message.="Content-Type:application/octet-stream;name=\"".basename ($uploadedFile)."\"\n"."内容描述：".basename($uploadedFile)."\n"."Content-Disposition:attachment;\n"."filename=\"".basename($uploadedFile)."\";size=".filesize ($uploadedFile).";\n"."Content-Transfer-Encoding:base64\n\n".$data."\n\n";}$message.="--{$mime_boundary}--" ;$returnpath="-f".$email;$mail=mail($toEmail,$emailSubject,$message,$headers,$returnpath);@unlink($uploadedFile);}else{$headers.="\r \n"."MIME-Version:1.0";$headers.="\r\n"."Content-type:text/html;charset=UTF-8";$mail=mail($toEmail,$emailSubject, $htmlContent,$headers);}if($mail){$statusMsg='Yourcontactrequesthasbeensubmittedsuccessfully!';$msgClass='succdiv';$postData='';}else{$statusMsg='Yourcontactrequestsubmissionfailed,请再试一次。';}}}}else{$statusMsg='请填写所有字段。';}}?>">"placeholder="Name"required="">"placeholder="Emailaddress"required="">"placeholder="Subject"required="">[来源][1]
[https://www.findinall.com/blog/how-to-test-mail-and-send-attachment-in-mail/](https://www.findinall.com/blog/how-to-test-mail-and-send-attachment-in-mail/)

            回答 #15

赞同：-1

时间：2016-06-02T10:59:02.520

100% 工作概念在 php 中发送带有附件的电子邮件：

```
if (isset($_POST['submit'])) {
  extract($_POST);
  require_once('mail/class.phpmailer.php');

  $subject = "$name Applied For - $position";
  $email_message = "<div>Thanks for Applying ....</div> ";

  $mail = new PHPMailer;
  $mail->IsSMTP(); // telling the class to use SMTP
  $mail->Host = "mail.companyname.com"; // SMTP server
  $mail->SMTPDebug = 0;
  $mail->SMTPAuth = true;
  $mail->SMTPSecure = "ssl";
  $mail->Host = "smtp.gmail.com";
  $mail->Port = 465;
  $mail->IsHTML(true);
  $mail->Username = "info@companyname.com";  // GMAIL username
  $mail->Password = "mailPassword";          // GMAIL password

  $mail->SetFrom('info@companyname.com', 'new application submitted');
  $mail->AddReplyTo("name@yourdomain.com","First Last");
  $mail->Subject = "your subject";

  $mail->AltBody = "To view the message, please use an HTML compatible email viewer!"; // optional, comment out and test

  $mail->MsgHTML($email_message);

  $address = 'info@companyname.com';
  $mail->AddAddress($address, "companyname");

  $mail->AddAttachment($_FILES['file']['tmp_name'], $_FILES['file']['name']);      // attachment

  if (!$mail->Send()) {
    /* Error */
    echo 'Message not Sent! Email at info@companyname.com';
  } else {
    /* Success */
    echo 'Sent Successfully! <b> Check your Mail</b>';
  }
} 
```

我将此代码用于带有附件的 google smtp 邮件发送....

**注意：从这里下载 PHPMailer 库 -> ** [https://github.com/PHPMailer/PHPMailer](https://github.com/PHPMailer/PHPMailer)

            回答 #16

赞同：-2

时间：2015-11-04T17:33:29.213

[从此页面](http://www.finalwebsites.com/forums/topic/php-e-mail-attachment-script)复制代码- 在 mail() 中工作

他开始我制作一个稍后可以调用的函数 mail_attachment。他稍后使用附件代码执行此操作。  

```
<?php
function mail_attachment($filename, $path, $mailto, $from_mail, $from_name, $replyto, $subject, $message) {
    $file = $path.$filename;
    $file_size = filesize($file);
    $handle = fopen($file, "r");
    $content = fread($handle, $file_size);
    fclose($handle);
    $content = chunk_split(base64_encode($content));
    $uid = md5(uniqid(time()));
    $header = "From: ".$from_name." <".$from_mail.">\r\n";
    $header .= "Reply-To: ".$replyto."\r\n";
    $header .= "MIME-Version: 1.0\r\n";
    $header .= "Content-Type: multipart/mixed; boundary=\"".$uid."\"\r\n\r\n";
    $header .= "This is a multi-part message in MIME format.\r\n";
    $header .= "--".$uid."\r\n";
    $header .= "Content-type:text/plain; charset=iso-8859-1\r\n";
    $header .= "Content-Transfer-Encoding: 7bit\r\n\r\n";
    $header .= $message."\r\n\r\n";
    $header .= "--".$uid."\r\n";
    $header .= "Content-Type: application/octet-stream; name=\"".$filename."\"\r\n"; // use different content types here
    $header .= "Content-Transfer-Encoding: base64\r\n";
    $header .= "Content-Disposition: attachment; filename=\"".$filename."\"\r\n\r\n";
    $header .= $content."\r\n\r\n";
    $header .= "--".$uid."--";
    if (mail($mailto, $subject, "", $header)) {
        echo "mail send ... OK"; // or use booleans here
    } else {
        echo "mail send ... ERROR!";
    }
}

//start editing and inputting attachment details here
$my_file = "somefile.zip";
$my_path = "/your_path/to_the_attachment/";
$my_name = "Olaf Lederer";
$my_mail = "my@mail.com";
$my_replyto = "my_reply_to@mail.net";
$my_subject = "This is a mail with attachment.";
$my_message = "Hallo,\r\ndo you like this script? I hope it will help.\r\n\r\ngr. Olaf";
mail_attachment($my_file, $my_path, "recipient@mail.org", $my_mail, $my_name, $my_replyto, $my_subject, $my_message);
?> 
```

他的页面上有更多详细信息，并在评论部分回答了一些问题。

```

# mapreduce - 如何使用 map-reduce 级联跟踪大量统计信息？

> ID：12301359
> 
> 赞同：0
> 
> 时间：2012-09-06T13:36:23.140
> 
> 标签：mapreduce, statistics, cascading

我有一系列 map-reduce 作业来处理用户数据（使用 Cascading 框架实现），我想跟踪很多细粒度的统计信息（我可以有 100 到 1000 个用户和每个用户 20 个统计信息，所以，可能总共有 5000 到 10.000 个统计数据）。我想使用 map-reduce 计数器来构建这些统计信息，因为在代码中使用它们非常方便，但是 map-reduce 计数器的数量有限制（默认为 120），根据这篇文章：[http ://developer.yahoo.com/blogs/hadoop/posts/2010/08/apache_hadoop_best_practices_a/](http://developer.yahoo.com/blogs/hadoop/posts/2010/08/apache_hadoop_best_practices_a/) 如果我有超过 20/50 个自定义计数器，我不应该使用它们。

问题：有没有一种适当的方法可以在这个 map-reduce 上下文中使用类似计数器的模式来跟踪我的统计数据？我所说的类似计数器的意思是，可以在我的代码中随处访问计数器，并能够在需要的地方增加它们。

感谢提前注册

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T10:44:35.513

如果您的统计数据只是计数并且它们仅在并行阶段增加，您可以为每个实例单独收集它们，然后加起来（减少）。实际上，这就是 MapReduce 的全部思想。

# iphone - 如何在不调整大小（不扩大宽度或高度）的情况下旋转原始图像

> ID：12301365
> 
> 赞同：0
> 
> 时间：2012-09-06T13:36:43.703
> 
> 标签：iphone

我已经使用旋转图像[`UIRotationGestureRecognizer`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIRotateGestureRecognizer_Class/Reference/Reference.html)并且它工作正常。但是图像的宽度和高度增加了。

**原始**图像尺寸： x = *85.000000* , y = *83.000000* , 宽度 = *150.000000* , 高度 = *150.000000旋转*
**后**图像尺寸： x = *54.476551* , y = *52.476551* , 宽度 = *211.046906* , 高度 = *211.046906*

如何处理这个问题？我正在尝试这样：

```
recognizer.view.transform = CGAffineTransformRotate(recognizer.view.transform, recognizer.rotation);
recognizer.rotation = 0; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T13:41:04.790

```
CGAffineTransform transform = self.view.transform;
            if (UIDeviceOrientationLandscapeLeft == deviceOrientation) {
                transform = CGAffineTransformRotate(transform, -(M_PI / 2.0));
            } else {
                transform = CGAffineTransformRotate(transform, M_PI / 2.0);
            }
            self.view.transform = transform; 
```

我希望它有帮助

# css - 纯 CSS 三角形在 Firefox 中看起来很模糊

> ID：12301366
> 
> 赞同：5
> 
> 时间：2012-09-06T13:36:47.437
> 
> 标签：css, firefox, blurry

[我正在尝试在 CSS 技巧http://css-tricks.com/snippets/css/css-triangle/](http://css-tricks.com/snippets/css/css-triangle/)中使用本文中使用的纯 css 三角形，但在 Firefox 14 中看起来很模糊。我可以以某种方式修复它吗？只是FF没有正确渲染它？

编辑：这是一个截图，它看起来像[http://awesomescreenshot.com/0fcf904eb](http://awesomescreenshot.com/0fcf904eb)我认为这是一个普遍的问题，所以我只是放了一个链接到文章对不起

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T00:52:18.260

我遇到了同样的问题。原来这是我的图形驱动程序的问题。

检查`Anisotropic Filtering`3D 图形驱动程序中的设置。我把我的设置为`Override Application Settings`and `16x`。将其更改回`Use Application Settings`并重新启动 Firefox 后，模糊消失了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T00:33:44.733

使用`border-style: dotted;`将摆脱FF上的模糊边缘。基本上，除了`border-style: solid;`应该工作之外的任何东西。它可能在 FF 最新版本中得到修复，但我肯定遇到了和你一样的问题，但无法在不同的 FF 版本上进行测试。

为了记录我在FF（我猜是15）winXP

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T13:42:46.860

屏幕抓取会很好。这可能会因设备、显示器等而有所不同。您是否查看过不同设备上的结果？我倾向于认为这将超出您的控制范围。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-11T09:45:36.757

```
-moz-transform: scale(.9999); 
```

我解决了这个问题。

# css - 为什么 IE9 中会出现图像边框和额外的填充？

> ID：12301368
> 
> 赞同：0
> 
> 时间：2012-09-06T13:36:54.097
> 
> 标签：css, internet-explorer-9, border, padding

我在 Firefox 中构建并测试了我的网站，但现在想要启动时，我意识到在 IE9 中查看时，菜单和帖子之间以及某些图像的边框之间会出现额外的填充。

我查看了所有的 CSS，但无法弄清楚可能导致这些问题的原因。任何想法都会很棒。

这是网站：[http ://beautyintheweeds.com](http://beautyintheweeds.com)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T14:09:52.940

每个浏览器都有不同的默认 CSS 规则。使用 css 重置将所有内容恢复为相同的默认值。

# javascript - 将变量放入ajax函数JQuery

> ID：12301369
> 
> 赞同：0
> 
> 时间：2012-09-06T13:36:54.460
> 
> 标签：javascript, jquery, variables, scope

我有一个由单击触发的 AJAX 函数，它基本上将一个表行复制到另一个表中。

我遇到的问题是我在 AJAX 请求之前从原始表行中获取了所需的变量，但是这些变量似乎没有传递给成功函数，它们以`undefined`.

反正有没有将变量传递给函数？

```
$('.addfile_popup').on('click', '.add2_fl', function(){
    var file_id1=$(this).data('file');
    var id=$('.useri').val();
    var file_name1=$(this).closest('tr').children('td:first').text();
    var upload_date1=$(this).closest('tr').children('td').eq(1).text();
    var upload_desc=$(this).closest('tr').children('td').eq(2).text();
    var job_idx=$(this).data('jid');
    //write to appointment database
    var data="job_id="+job_idx+"&file_id="+file_id1+"&user_id="+id;
    $.ajax({
        type:"POST",
        url:"admin_includes/prepend_files.php",
        data:data,
        success:function(html){
            var ups='';
            ups+='<tr data-file='+file_id1+'><td width="40%">'+file_name1+'</td><td>'+upload_date1+'</td><td>'+upload_desc+'</td><td><a href="sym.php?doc_id='+file_id1+'" class="view2_fl">VIEW FILE</a> | <a href="javascript:void(0);" class="del2_fl">DELETE</a></td></tr>';
            $(ups).prependTo('.app_table');
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T13:56:12.277

```
$('.addfile_popup').on('click', '.add2_fl', function(){
    var file_id1=$(this).data('file');
    var id=$('.useri').val();
    var file_name1=$(this).closest('tr').children('td:first').text();
    var upload_date1=$(this).closest('tr').children('td').eq(1).text();
    var upload_desc=$(this).closest('tr').children('td').eq(2).text();
    var job_idx=$(this).data('jid');
    //write to appointment database
    var data="job_id="+job_idx+"&file_id="+file_id1+"&user_id="+id;

    // closure function that wrap your variables
    function success(file_id1, file_name1, upload_date1 ... ) {
         return function(html) {  
            var ups='';
            ups+='<tr data-file='+file_id1+'><td width="40%">'+file_name1+'</td><td>'+upload_date1+'</td><td>'+upload_desc+'</td><td><a href="sym.php?doc_id='+file_id1+'" class="view2_fl">VIEW FILE</a> | <a href="javascript:void(0);" class="del2_fl">DELETE</a></td></tr>';
            $(ups).prependTo('.app_table');
    }

    $.ajax({
        type:"POST",
        url:"admin_includes/prepend_files.php",
        data:data,
        success: success(file_id1, file_name1, upload_date1 ...)
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T13:39:38.033

您需要使用闭包。你可以在这里阅读它们：[JavaScript 闭包是如何工作的？](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)

这应该有效：

```
$('.addfile_popup').on('click', '.add2_fl', function(){
  var me = this;

  (function() {
    var file_id1=$(me).data('file');
    var id=$('.useri').val();
    var file_name1=$(me).closest('tr').children('td:first').text();
    var upload_date1=$(me).closest('tr').children('td').eq(1).text();
    var upload_desc=$(me).closest('tr').children('td').eq(2).text();
    var job_idx=$(me).data('jid');

    //write to appointment database
    var data="job_id="+job_idx+"&file_id="+file_id1+"&user_id="+id;

$.ajax({
    type:"POST",
    url:"admin_includes/prepend_files.php",
    data: {
      job_id: job_idx,
      file_id: file_id1,
      user_id: id
    },  
    success:function(html){
        var ups='';
        ups+='<tr data-file='+file_id1+'><td width="40%">'+file_name1+'</td><td>'+upload_date1+'</td><td>'+upload_desc+'</td><td><a href="sym.php?doc_id='+file_id1+'" class="view2_fl">VIEW FILE</a> | <a href="javascript:void(0);" class="del2_fl">DELETE</a></td></tr>';

    $(ups).prependTo('.app_table');
    }
    });//end ajax

    })();

}); 
```

另请注意，我更改了将数据传递给 AJAX 调用的方式。

# c - 如何设置发送数据包的 TCP 选项？

> ID：12301375
> 
> 赞同：5
> 
> 时间：2012-09-06T13:37:20.587
> 
> 标签：c, networking, tcp

我正在编写可以将 tcp 数据包发送到主机的软件。

我能够创建带有 IP 标头、TCP 标头和数据的数据包，但我无法管理如何添加 TCP 选项，如 MSS、NOP、STACK、窗口缩放或时间戳。

我的意思是我无法向 TCP 标头添加选项，计算正确的校验和以向主机发送一个好的 TCP 数据包。

我可以在没有 TCP 选项的情况下发送正确的 TCP 数据包。

你认为我在正确的补丁上吗？有人可以帮我吗？

```
/* TCP Header structure */
struct tcphdr
{
    u_int16_t   th_sport;           /* source port */
    u_int16_t   th_dport;           /* destination port */
    u_int32_t   th_seq;             /* sequence number */
    u_int32_t   th_ack;             /* acknowledgement number */
#if __BYTE_ORDER == __LITTLE_ENDIAN
    u_int8_t    th_x2:4;            /* (unused) */
    u_int8_t    th_off:4;           /* data offset */
#endif
#if __BYTE_ORDER == __BIG_ENDIAN
    u_int8_t    th_off:4;           /* data offset */
    u_int8_t    th_x2:4;            /* (unused) */
#endif
    u_int8_t    th_flags;
    # define    TH_FIN        0x01
    # define    TH_SYN        0x02
    # define    TH_RST        0x04
    # define    TH_PUSH       0x08
    # define    TH_ACK        0x10
    # define    TH_URG        0x20
    # define    TH_ECE        0x40
    # define    TH_CWR        0x80
    u_int16_t   th_win;             /* window */
    u_int16_t   th_sum;             /* checksum */
    u_int16_t   th_urp;             /* urgent pointer */
};

struct tcp_option_mss
{
    uint8_t     kind;               /* 2 */
    uint8_t     len;                /* 4 */
    uint16_t    mss;
}           __attribute__((packed));

struct tcphdr_mss
{
    struct tcphdr       tcphdr;
    struct tcp_option_mss   mss;
};

/* IP Header structure */

struct ip
{
#if __BYTE_ORDER == __LITTLE_ENDIAN
    unsigned int    ip_hl:4;               /* header length */
    unsigned int    ip_v:4;                /* version */
#endif
#if __BYTE_ORDER == __BIG_ENDIAN
    unsigned int    ip_v:4;                /* version */
    unsigned int    ip_hl:4;               /* header length */
#endif
    u_int8_t    ip_tos;                    /* type of service */
    u_short     ip_len;                     /* total length */
    u_short     ip_id;                      /* identification */
    u_short     ip_off;                     /* fragment offset field */
    # define    IP_RF 0x8000                /* reserved fragment flag */
    # define    IP_DF 0x4000                /* dont fragment flag */
    # define    IP_MF 0x2000                /* more fragments flag */
    # define    IP_OFFMASK 0x1fff           /* mask for fragmenting bits */
    u_int8_t    ip_ttl;                    /* time to live */
    u_int8_t    ip_p;                      /* protocol */
    u_short     ip_sum;                     /* checksum */
    struct in_addr  ip_src, ip_dst;      /* source and dest address */
};

int send_packet(int sock, long dest_ip , long source_ip, long port, u_int8_t th_flags, unsigned long seq, unsigned long ack, unsigned long port1, unsigned char * data, unsigned long data_i)
{
    char                    *   packet;

    struct ip               *   pkt_ip;
    struct tcphdr               *   pkt_tcp;
    struct tcphdr_mss           *   tcp_header;
    struct sockaddr_in              sin;

    packet = malloc(sizeof(struct ip) + sizeof(struct tcphdr_mss) + data_i);

    if (packet == NULL)
    {
        if (ECHO)
            fprintf(stderr, "Error in allocating memory\n");
        exit(EXIT_FAILURE);
    }

    memset(packet, 0, sizeof(struct ip) + sizeof(struct tcphdr_mss));

    pkt_ip              = (struct ip *)     packet;
    pkt_tcp             = (struct tcphdr *) (packet + sizeof(struct ip));

    pkt_tcp->th_sport       = htons(port1);
    pkt_tcp->th_dport       = htons(port);
    pkt_tcp->th_seq         = htonl(seq);
    pkt_tcp->th_ack         = htonl(ack);
    pkt_tcp->th_off         = sizeof(struct tcphdr) / 4 + 1;
    pkt_tcp->th_flags       = th_flags;
    pkt_tcp->th_win         = htons(32768);
    pkt_tcp->th_sum         = 0;

    tcp_header          = malloc(sizeof(struct tcphdr));
    tcp_header->tcphdr      = *pkt_tcp;
    tcp_header->mss.kind        = 2;
    tcp_header->mss.len     = 4;
    tcp_header->mss.mss     = htons(32000);

    pkt_ip->ip_v            = 4;
    pkt_ip->ip_hl           = sizeof(struct ip) >> 2;
    pkt_ip->ip_tos          = 0;
    pkt_ip->ip_len          = htons(sizeof(struct ip) + sizeof(struct tcphdr) + data_i);

    if (ipid > 65000)
        ipid = 0;
    ipid++;
    pkt_ip->ip_id           = ipid;
    pkt_ip->ip_off          = 0;
    pkt_ip->ip_ttl          = 64;
    pkt_ip->ip_p            = IPPROTO_TCP ;
    pkt_ip->ip_sum          = 0;
    pkt_ip->ip_src.s_addr       = source_ip;
    pkt_ip->ip_dst.s_addr       = dest_ip;

    pkt_ip->ip_sum          = checksum((unsigned short*)pkt_ip, sizeof( struct ip) );
    pkt_tcp->th_sum         = in_cksum_tcp(pkt_ip->ip_src.s_addr, pkt_ip->ip_dst.s_addr, (unsigned short *) pkt_tcp, sizeof(struct tcphdr_mss), data, data_i);

    memcpy(((char *)pkt_tcp + sizeof(struct tcphdr_mss)), data, data_i);

    memset(&sin, 0, sizeof(sin));
    sin.sin_family          = AF_INET;
    sin.sin_addr.s_addr     = pkt_ip->ip_dst.s_addr;

    if (sendto(sock, packet, sizeof(struct ip) + sizeof(struct tcphdr_mss) + data_i, 0, (struct sockaddr *) &sin, sizeof(sin)) < 0)
    {
        perror("sendto");
        free(packet);
        return -1;
    }

    free(packet);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:41:19.610

下面是一个计算数据包正确校验和的函数

```
unsigned short csum(unsigned short * ptr, int nbytes) {
   register long sum;
   unsigned short oddbyte;
   register short answer;

   sum = 0;
   while (nbytes > 1) {
       sum += * ptr++;
       nbytes -= 2;
   }
   if (nbytes == 1) {
       oddbyte = 0; * ((u_char * ) & oddbyte) = * (u_char * ) ptr;
       sum += oddbyte;
   }

   sum = (sum >> 16) + (sum & 0xffff);
   sum = sum + (sum >> 16);
   answer = (short)~sum;

   return (answer);
} 
```

调用该函数以获取 ip 和 tcp 的校验和。除此之外，为了使用诸如 MSS、NOP、STACK 之类的选项，您需要在 TCP 标头中声明所有这些。当您在程序中使用所有这些时，您必须相应地设置 th_off 的值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T11:07:31.920

在行中：

```
 pkt_tcp->th_sum         = in_cksum_tcp(pkt_ip->ip_src.s_addr, pkt_ip->ip_dst.s_addr, (unsigned short *) pkt_tcp, sizeof(struct tcphdr_mss), data, data_i); 
```

根据我在野外看到的 in_cksum_tcp 函数：

```
unsigned short in_cksum_tcp(int src, int dst, unsigned short *addr, int len, unsigned char * data, int data_i) 
```

您正在传递选项标头的大小 (sizeof(struct tcphdr_mss))，而不是完整 TCP 标头的大小 (sizeof (tcphdr) + sizeof(tcphdr_mss))。我认为这可能是问题所在（您没有正确计算 TCP 校验和）。

检查创建原始数据包的问题的一个好方法是将带有 libpcap 的数据包保存到 pcap 文件并使用 wireshark 打开。您可以轻松检查数据包的完整性。

# ruby - 关于使用“重试”逻辑的 Ruby 设计策略

> ID：12301378
> 
> 赞同：0
> 
> 时间：2012-09-06T13:37:38.507
> 
> 标签：ruby, metaprogramming

我正在处理一个需要我执行以下操作的 API（无法更改 API）：

1.  登录服务使用它（登录）
2.  使用 api 方法从登录和一些 api 方法特定参数传递一些令牌信息（每个这样的方法调用都包装在它自己的“api_user”方法中 - 见下文）。

但是，在第 2 步中，api 可能会导致某些异常，在这种情况下，我必须重试登录方法并使用新令牌再次调用相同的 api。每个 api 方法都可能有额外的参数（除了 token 参数）。从概念上讲，如果我已经登录，我现在拥有可以使用一段时间的令牌。

```
def api_user
  begin
    api_method1 token, x,y,z
  RetryException => e
    new_token = login
    api_method1 token, x,y,z
  end
end 
```

我该如何优雅地做到这一点？选项1：

对于每个 api_user 方法 - 单独执行上述操作

选项 2：使用 ruby​​ 的元编程。我试图在下面展示这一点。

```
class Y
  def self.api_invoker(token,y,z)
    if token == 'old'
      raise "Old token - renew it"
    end 
    puts "Token = #{token}"
  end 

  def self.call_method(m, *params)
    method = Y.method(m)
    begin
      method.call(*params)
    rescue Exception => e
      if e.message.include? "Old token"
        puts "params before = #{params}"
        params[0] = "new"
        puts "params after = #{params}"
        method.call(*params)
      end 
    end 
  end 

end 
```

如果您按如下方式调用上述方法，则会触发重试并将“新”令牌传递给该方法的第二次调用。

```
Y.call_method("api_invoker", "old",2,3) 
```

我不喜欢从 1 开始的设计。虽然我更喜欢选项 1，但它似乎有点复杂，因为它从所有 api 调用程序方法中删除了重复的重试逻辑。2\. 由于 ruby​​ 无法使用参数名称访问参数，因此我必须强制约定使令牌参数成为所有“api 调用程序”方法中的第一个参数。这样我就可以在重试时用新令牌替换该参数。

如果 ruby​​ 有办法使用参数名称访问参数，那么上述设计将是一个可以接受的设计。

你能推荐一个更好的方法吗？

谢谢！PS：我可以为每个 api_invoker 传递“哈希”中的所有参数，然后使用令牌参数名称来访问它，无论它位于何处（类似于链接[http://deepfall.blogspot.com/2008中提到的/08/named-parameters-in-ruby.html](http://deepfall.blogspot.com/2008/08/named-parameters-in-ruby.html) - 但这对我来说似乎更丑陋。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T02:07:32.080

使用选项 2 以避免重复 try catch 块。

# ruby-on-rails-3 - 使用 ruby on rails 3 在另一个局部视图中渲染视图时出现问题

> ID：12301380
> 
> 赞同：0
> 
> 时间：2012-09-06T13:37:41.473
> 
> 标签：ruby-on-rails-3, jquery, pagination, render

我正在尝试在不使用任何分页宝石的菜单（类似于模板）的情况下进行 ajax 分页。例如，要在品牌菜单名称的鼠标悬停时显示品牌菜单，我使用“menu_brand”渲染，因为当时页面加载时只会从数据库中获取品牌。对于这个渲染视图，我必须执行分页功能。我成功地在控制台日志中获取当前页面内容。

在控制器中我正在这样做

```
def menu_brand
    $cnt=Brand.count
end

def menu_brand_page
    $st=0
    if !(params[:startingRow].nil?)
        $st = params[:startingRow].to_i
    end
    $brands=Brand.limit(24).offset($st)
end 
```

在 _menu_brand.html.erb

```
<% if !($cnt.nil?) %>
<% @pg = ($cnt / 24).ceil %>

<div class="paginator">
    <%
    for j in 0..@pg %>
    <%= link_to "#{j+1}", "javascript:GotoPage('#{j*24}')",  %>
    <% end
    %>
</div>
<table width="700px"; align="center" id="menupage">
    <%= render "menu_brand_page"%>
</table>
<% end %>
<script type="text/javascript">
    function GotoPage(startrow) {
var theURL = '/menu_brand_page/'+<%= params[:deptid] %>
    +'/' + startrow;
    $.ajax({
        url : theURL
    });
    }
</script> 
```

在 menu_brand.js.erb

```
$('#bval').html('<%= escape_javascript render ('menu_brand') %>'); 
```

在 _menu_brand_page.html.erb

```
<% $brands.each do |brand| %>
    <%= brand.name %>
<% end %> 
```

在 menu_brand_page.js.erb

```
$('#menupage').html('<%= escape_javascript render ('menu_brand_page') %>'); 
```

在布局中

```
<div id="bval">
<%= render "menu_brand" %>
</div>
<script type="text/javascript">
$(document).ready(function() {
var theBrand = '/menu_brand/' + <%= params[:deptid] %>;
$.ajax({
url : theBrand
});
});
</script> 
```

我的路由器.rb

```
match "menu_brand_page/:deptid/:startingRow" => "product_details#menu_brand_page"
match "menu_brand/:deptid" => 'product_details#menu_brand' 
```

控制台日志输出

$('#menupage').html('\n\n \nBC\n</td>\n\n \nBC 鞋类\n</td>\n\n \nBCBG\n</td>\n </tr>\n\n\n \nBCBGeneration\n</td>\n\n \nBCBGMAXAZRIA\n</td>\n\n \nBCX\n</td>\n</tr>\n \n\n \n有创意\n</td>\n\n \n沙滩兔\n</td>\n\n \n沙滩屋\n</td>\n</tr>\n\n\ n \n海滨别墅女\n</td>\n\n \nbebe\n</td>\n\n \nBecca\n</td>\n</tr>\n\n\n \nBed Stu \n</td>\n\n \nBellatrix\n</td>\n\n \nBELLE BY SIGERSON MORRISON\n</td>\n</tr>\n\n\n \nBelle Du Jour\ n</td>\n\n \nBelle Noel\n</td>\n\n \nBen Amun\n</td>\n</tr>\n\n\n \nBENCH\n</td >\n\n \nBerek\n</td>\n\n \nBernardo\n</td>\n</tr>\n\n\n \n纽约伯尼\n</td>\n \n \nBETMAR\n</td>\n\n \n贝齐·约翰逊\n</td>\n</tr>\n\n');

请帮助我不明白为什么 menu_brand 视图中的内容没有改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T05:59:43.567

谢谢@agncleod。@agmcleod 是对的。我在文档就绪函数中调用渲染，并且我已经使用了很多全局变量。现在正在渲染鼠标悬停事件并使用实例变量。我纠正了这个错误。我已将所有全局 ($) 变量更改为实例 (@) 变量。在布局中调用渲染函数，如下所述。

在布局中

```
<a href="#" id="menubrand">brands</a>
<div id="bval">
<%= render "menu_brand" %>
</div>
<script type="text/javascript">
$("a#menubrand").hover(function () {
var theBrand = '/menu_brand/' + <%= params[:deptid] %>;
$.ajax({
url : theBrand
});
},
function () {
});
</script> 
```

# php - 从 Zend Framework 2 中的模块发布资产

> ID：12301385
> 
> 赞同：4
> 
> 时间：2012-09-06T13:37:56.157
> 
> 标签：php, module, assets, zend-framework2

通常建议将模块资产存储在模块目录中，内部`moduleName/public`（或任何您想要命名资产目录的名称）。

Zend Framework 2 很遗憾默认不支持模块资产的**资产发布**。根据*MWOP*，大约 1 个月前没有任何计划，我想仍然没有真正的计划（他们可能有很多工作来准备稳定版本）。（但是，总有一天，他们会解决这个问题。）

随着我的 ZF2 应用程序不断增长，我已经到了需要拥有**特定于模块的资产**的地步。目前，我在模块目录中维护它们并将它们复制到应用程序的公共目录中。您可以想象这种方法容易出错且令人筋疲力尽。

你如何处理这个问题？是否有一个简单的解决方案，只需很少的编码工作？我的项目计划不允许我自己创建复杂的资产处理。是否有兼容 ZF2 的可推荐的轻量级资产框架？我已经考虑过创建符号链接，但我认为这不是最好的解决方案，因为它需要一些额外的 Web 服务器配置 ( `FollowSymlinks`) 和额外的维护工作（应用程序在本地开发并部署在远程服务器上）。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T20:13:34.480

之前已经在很多地方讨论过这个问题，它归结为三种方法来管理这个问题。

1.  将资产复制并粘贴到 public/ 目录中

2.  使用符号链接

3.  使用资产加载模块，如[assetic](https://github.com/widmogrod/zf2-assetic-module)

一个简单的解决方案是将资产复制作为构建过程的一部分。

另一个问题已经被问到[如何合并 Zend Framework 2 模块公共目录](https://stackoverflow.com/questions/10296920/how-to-merge-zend-framework-2-module-public-directories)以获取信息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-09T11:20:11.087

我知道这已经很老了，但我想为其他读者添加这些信息。

现在还有一个用于此的模块，它已经过全面测试，并且被许多模块使用（甚至依赖）。

在这里查看：[https ://github.com/RWOverdijk/AssetManager](https://github.com/RWOverdijk/AssetManager)

希望这可以帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-07T00:45:51.840

还有第四种选择。在 VirtualHost 配置中使用目录别名。

# codeigniter - Codeigniter 路由表达式

> ID：12301386
> 
> 赞同：0
> 
> 时间：2012-09-06T13:37:59.753
> 
> 标签：codeigniter, routes

我正在尝试根据用户角色动态更改路线。所以我有一个缓存 routes.php ，当用户登录时我会写入它。无论如何，我需要一些 url 不被重新路由：

现在我有： `$route['(:any)']='CA/$1';`在任何网址上都可以正常工作。

`auth`我需要所有以或`rest`保留为开头的 URI，因为第一个是登录控制器，第二个是带有 JQgrids 使用的控制器的子文件夹。我试过这个但没有结果：

```
$route['^(?!auth|rest).*'] = "CA/$1"; 
```

编辑：@Vlakarados

您的路线目前正在运行，但我有以下问题：

我的`routes.php`样子是这样的：

```
$route['404_override'] = '';
$route['default_controller'] = "auth";

include_once(APPPATH."cache/routes.php"); 
```

在 Auth 控制器中，我执行以下操作：

```
class Auth extends CI_Controller {
    function Auth() {
        parent::__construct();
    }
    function index()
    {
        if ($this->ion_auth->logged_in())
        {
            $this->__checkRoles();
        }
        else
        {
                        //render the form
            }
    }

    function logout()
    {
        session_start();
        session_unset();
        session_destroy();
        $logout = $this->ion_auth->logout();
        redirect('auth');
    }
    function __checkRoles()
    {

        $role=$this->ion_auth->get_group();
        $this->save_routes($role);
        switch ($role) {

            case 'CA':
                redirect(base_url()); //this is how I'm redirecting now, because it will route to base_url()/CA (but it won't because first it will route to default_controller which is 'Auth'
                break;
            case 'CD':
                redirect(base_url().'CD'); //this is how I used to redirect,
                break;
            case 'DV':
                redirect(base_url().'DV');
                break;
            case 'AC':
                redirect(base_url().'AC');
                break;

            case 'Admin':
                redirect(base_url().'Admin');
                break;
            default:
                show_404();
                break;
        }
    }
    public function save_routes($controller=null)
    {
            $output="<?php ";
            $output.="\$route['auth']='auth';";     
            $output.="\$route['rest']='rest';";
            $output.="\$route['(:any)']='".$controller."/$1';";

            $this->load->helper('file');
            write_file(APPPATH . "cache/routes.php", $output);
            $string = read_file('./path/to/file.php');
    }
} 
```

**解决了：**

我通过不重定向到 base_url() 并期望`base_url().'/CA'`哪个当然导致`base_url().'/CA/index'`但直接重定向到`base_url().'/index'`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T13:41:27.690

尝试这个：

```
$route['auth']='auth';
$route['auth/(:any)']='auth/$1';
$route['rest']='rest';
$route['rest/(:any)']='rest/$1';

$route['(:any)']='CA/$1'; 
```

首先到达的路线具有最高优先级

# jquery - jquery将处理程序附加到ajax加载的内容

> ID：12301388
> 
> 赞同：2
> 
> 时间：2012-09-06T13:38:12.967
> 
> 标签：jquery

我有点被一个简单的问题困住了。如何将处理程序附加到元素（现在和将来）？例如，我有一个选择器“测试”，我对其应用了一个插件：

```
$('.test').handler(); 
```

但这不适用于稍后通过 ajax 加载的内容。

我知道我可以使用`.on`，但是`.on`方法必须将事件名称作为第一个参数，我认为我在这里没有。那么这里有一个均匀的名字还是我该如何解决这个问题？多谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T13:43:02.290

该`livequery`插件允许您执行此操作：

[http://brandonaaron.net/code/livequery/docs](http://brandonaaron.net/code/livequery/docs)

```
$(".test").livequery(function(){
    $(this).handler();
}); 
```

这会将`hander()`插件应用于所有当前的选择器和未来的选择器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T13:41:56.840

您需要在成功处理程序中**重新绑定**它，您可以在其中从 ajax 获取新数据并注入到 tht DOM

前任 ：

```
$.get("getNewContentForDOM.aspx",function(data){
    ("#someDiv").append(data);
    $('.test').handler();
}); 
```

# rpm - 如何获得 RPM 构建以正确设置安装路径

> ID：12301389
> 
> 赞同：0
> 
> 时间：2012-09-06T13:38:13.513
> 
> 标签：rpm, rpmbuild, rpm-spec

这是我第一次尝试构建 RPM，我发现它有点令人困惑，还没有真正得到不同的变量，所以不胜感激下面的任何建议..

我有以下规格文件：

```
BuildRoot       : /home/dm40477/rpmbuild/BUILD

%description
Package to deploy PROD Support scripts

%prep

zcat ~/rpmbuild/SOURCES/ITRS.tar.gz | tar -xvf -

%install
RPM_INSTALL_PREFIX=/var/opt

%files
%defattr(0622,muser,muser)
/ITRS/bin/SXS
/ITRS/bin/SXSRT
/ITRS/etc/SXS
/ITRS/etc/SXSRT

%changelog 
```

它可以创建 rpm 文件，但是当我在目标服务器上安装它时，它安装在 /bin 和 /etc

源文件是以下目录结构中的 gzip tar 文件，除了将其安装在文件夹 /var/opt 中之外，我想保留它

```
/ITRS/bin/SXS
/ITRS/bin/SXSRT
/ITRS/etc/SXS
/ITRS/etc/SXSRT 
```

1.  如何在规范文件中设置安装路径？
2.  我是否需要制作目录以保留结构，还是会自动保留该结构？

任何他都表示赞赏。

谢谢

D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T22:47:24.127

BuildRoot : /home/dm40477/rpmbuild/BUILD 现在被忽略。

尝试这个...

在您的主目录中创建一个名为 .rpmmacros 的文件，其内容如下...

```
%_topdir /home/builder/rpmbuild 
```

确保使用 fakeroot 进行构建。

cd 到 /home/builder/rpmbuild 并运行 rpmbuild 命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T13:57:12.983

```
RPM_INSTALL_PREFIX=/var/opt 
```

将变量 RPM_INSTALL_PREFIX 设置为 /var/opt

```
/ITRS/bin/SXS
/ITRS/bin/SXSRT
/ITRS/etc/SXS
/ITRS/etc/SXSRT 
```

不引用该变量。

# salesforce - 无效的值类型：整数的字符串

> ID：12301394
> 
> 赞同：-5
> 
> 时间：2012-09-06T13:38:41.797
> 
> 标签：salesforce, apex-code

以下代码

```
public List<Map<String,String>> getPhoneData() {
    List<Map<String, String>> mapp = new List<Map<String, String>>();
    Map<String, Integer> temp
         = new Map<String, Integer>{'type' => 'Profile Value', 'count' => 1};
    return mapp;
} 
```

在给我

```
Compile Error: Invalid value type: String for Integer 
```

在第 3 行

我想`Map`用一种价值`String`和另一种价值来创造`Integer`。怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T13:39:53.890

删除数字周围的引号，如下所示：

```
Map<String, Integer> temp = new Map<String, Integer>{'type' => 123, 'count' => 1}; 
```

**编辑：** 当你完全改变你的问题时，实现这一目标的最佳方法是：

```
public List<Map<String,String>> getPhoneData() {
    List<Map<String, String>> mapp = new List<Map<String, String>>();
    Map<String, String> temp = new Map<String, String>{'type' => 'Profile Value', 'count' => '1'};
    return mapp;
} 
```

# eclipse - 如何将 DSL 关键字突出显示和代码完成嵌入到应用程序中

> ID：12301408
> 
> 赞同：0
> 
> 时间：2012-09-06T13:39:43.627
> 
> 标签：eclipse, groovy, dsl, rule-engine

我正在使用 groovy 创建自定义 DSL，以创建规则（用于规则引擎）。我的目标受众将是非程序员。像这样的东西：

```
when user visit page "test" within 5.days
 then assign campaign 200 
```

我想为我的用户提供至少某种文本框，他们将能够使用 DSL 创建规则。为了使其简单和专业，我正在寻找第三方组件来帮助我完成关键字突出显示和代码完成的任务。我读到了 groovy DSL 描述符，但显然只在 Eclipse IDE 中工作。有什么方法可以将所需的功能合并到我的应用程序中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T14:02:26.067

您有一堆代码编辑器可以放入您的项目中。检查维基[http://en.wikipedia.org/wiki/Comparison_of_JavaScript-based_source_code_editors](http://en.wikipedia.org/wiki/Comparison_of_JavaScript-based_source_code_editors)。

你可以看到一个很好的例子：[Console Plugin source code](https://github.com/tuler/grails-console)

# apache - 由于 DOS 攻击无法访问 Plesk Admin，通过 SSH 阻止 IP 地址？

> ID：12301411
> 
> 赞同：5
> 
> 时间：2012-09-06T13:39:52.920
> 
> 标签：apache, ssh, plesk, ddos, denial-of-service

由于 DOS 攻击，我无法访问 Plesk Amdin；我可以通过 SSH 阻止主机名或 IP 地址吗？如果是这样，我怎么能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T16:51:30.173

如果你有 iptables，你可以使用简单的规则来阻止它：

```
iptables -I INPUT --source 1.2.3.4 -j DROP 
```

此规则丢弃来自 IP 1.2.3.4 的数据包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T08:18:31.137

可能最简单的方法是使用 vim 将 SSH 连接到您的机器，并将以下内容添加到域根目录中的 .htaccess 文件的顶部（`/var/www/vhosts/yourdomain.com/httpdocs/.htaccess`）：

```
deny from 12.345.67.89 
```

显然，将 IP 地址替换为您要阻止的 IP 地址。对您认为受到攻击的任何站点重复此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T02:17:16.233

iptables -I INPUT -p tcp -s 1.2.3.4 -m statistic --probability 0.5 -j DROP iptables -I INPUT n -p tcp -s 1.2.3.4 -m rpfilter --loose -j ACCEPT # n 将是一个数字索引到 INPUT CHAIN -- 默认是附加到 INPUT 链

iptables -I INPUT -p tcp -m hashlimit --hashlimit-mode srcip -s 1.2.3.4 --hashlimit-srcmask --hashlimit-above 9/second -j DROP

iptables -I INPUT -p tcp -s 1.2.3.4 -m limit --sport 80 --limit 100/秒 -j ACCEPT

对于您的情况，还有无数其他人。

真挚地，

箭树

# spring - 如何在 Spring Security 上实现自己的 OpenIDConsumer？

> ID：12301414
> 
> 赞同：1
> 
> 时间：2012-09-06T13:39:53.573
> 
> 标签：spring, spring-security, openid

我想为 Spring Security OpenID 实现一个新的 OpenIDConsumer。我在一个类中实现了OpenIDConsumer，然后添加了相应的配置`applicationContext-security.xml`，但是我的代码似乎根本没有执行。

这是来自的相关部分`applicationContext-security.xml`：

```
<http auto-config="false">
    <intercept-url pattern="/**" access="ROLE_USER"/>
    <openid-login login-page="/auth/login"
            authentication-failure-url="/auth/login?login_error=true">
        <attribute-exchange>
            <openid-attribute name="email" type="http://axschema.org/contact/email" required="true"/>
        </attribute-exchange>
    </openid-login>
</http>
<b:bean id="openIdConsumer" class="sample.OpenIDTestConsumer">
    <b:property name="email" value="email"/>
</b:bean> 
```

现在，类 sample.OpenIDTestConsumer 已初始化，但 Spring Security 不使用它，我认为使用原始类代替`OpenID4JavaConsumer`。

该类`sample.OpenIDTestConsumer`实现了`OpenIDConsumer`接口并对其进行了初始化并`setEmail`设置了方法，但它不执行`beginConsumption`或`endConsumption`方法，这就是为什么我认为它只是因为`applicationContext-security.xml`bean定义而创建但没有使用的原因。

问题是：如何粘合或设置自定义类作为 OpenIDConsumer 工作而不使用 Spring 实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T18:20:11.970

默认情况下，Spring Security在使用安全命名空间配置时向[OpenID4JavaConsumer](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/openid/OpenID4JavaConsumer.html)注册一个[OpenIDAuthenticationFilter 。](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/openid/OpenIDAuthenticationFilter.html)您不能使用命名空间定义自定义使用者。一个解决方案是使用[自定义过滤器](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/ns-config.html)并手动配置 OpenIDAuthenticationFilter ：`applicationContext-security.xml`

```
<http ...>
   ...
   <custom-filter position="OPENID_FILTER" ref="openIdFilter" />
</http>
<b:bean id="openIdFilter" class="org.springframework.security.openid.OpenIDAuthenticationFilter">
   <b:property name="consumer" ref="openidConsumer" />
   <!-- customize your filter (authentication failure url, login-page, … -->
</b:bean>
<b:bean id="openIdConsumer" class="sample.OpenIDTestConsumer">
   <!-- config attribute exchange here -->
   <b:property name="email" value="email"/>
</b:bean> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T18:44:20.760

另一种解决方案是使用[常见问题解答](http://static.springsource.org/spring-security/site/faq.html#faq-namespace-post-processor)中的提示并使用 BeanPostProcessor。结果可能如下所示：

```
public class CustomOpenidConsumerBeanPostProcessor implements BeanPostProcessor {
    private OpenIDConsumer openidConsumer;

    public Object postProcessAfterInitialization(Object bean, String name) {
        if (bean instanceof OpenIDCOnsumer) {
           return openidConsumer;
        }
        return bean;
    }

    public Object postProcessBeforeInitialization(Object bean, String name) {
        return bean;
    }

    public void setOpenidConsumer(OpenIDConsumer openidConsumer) {
        this.openidConsumer = openidConsumer;
    }
} 
```

那么您的配置将包括以下内容：

```
<b:bean class="CustomOpenidConsumerBeanPostProcessor">
    <b:property name="openidConsumer" ref="openIdConsumer"/>
  </b:bean>
<b:bean id="openIdConsumer" class="sample.OpenIDTestConsumer">
   <!-- config attribute exchange here -->
   <b:property name="email" value="email"/>
</b:bean> 
```

# javascript - 正则表达式从一组关键字中获取奇数

> ID：12301416
> 
> 赞同：1
> 
> 时间：2012-09-06T13:39:59.863
> 
> 标签：javascript, regex

我正在尝试对一组自定义数据使用正则表达式，它可以以任何顺序出现

```
var str= "keyword2 : (content2),  sas, keyword1 : (content1)" 
```

或者

```
 var str= "keyword2 : (content2),  app, keyword1 : (content1), sos, key word : (content) " 
```

每个键使用逗号分隔。我试图从中找到奇怪的，没有配对的，如 sas、app、sos 并使用正则表达式将其返回到数组中。是否可以使用正则表达式来实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T13:45:41.027

当然，您正在寻找以下正则表达式：`/\w+\s?(?=,|$)/igm`.

```
var reg = /\w+\s?(?=,|$)/igm;

var str = "keyword2 : (content2), app, keyword1 : (content1), sos, key word : (content), das";

console.info(str.match(reg)); 
```

这是工作演示： http: [//jsfiddle.net/tvUaK/139/](http://jsfiddle.net/tvUaK/139/)，记得打开firebug控制台查看输出。

# mongodb - 保护正在运行的 mongo 服务器

> ID：12301419
> 
> 赞同：0
> 
> 时间：2012-09-06T13:40:07.533
> 
> 标签：mongodb, security, database-replication, database, nosql

我在没有安全和授权的情况下为 mongo 设置了复制设置。但是现在我希望通过授权来增加安全性。设置就像这样， `4 boxes : A,B,C,D,`A 为主，其余为从。它们都在无身份验证模式下运行。现在我希望将 -keyFile 选项添加到所有选项，从而确保它的登录模式。

问题是我不想要任何停机时间。我希望无缝地添加安全性，而不会对最终用户站点产生任何影响。我应该遵循什么步骤？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T14:51:13.937

您将不得不在某个时候重新启动每个实例以启用安全性和身份验证。您不能混合运行（身份验证和非身份验证），因此如果不停机就无法进行切换。

您所能做的就是通过首先添加管理员用户并确保您的密钥文件是一致的并且按照此处所述重新启动来最大程度地减少停机时间：

[http://www.mongodb.org/display/DOCS/Security+and+Authentication](http://www.mongodb.org/display/DOCS/Security+and+Authentication)

# php - 无法在 php 套接字中循环

> ID：12301420
> 
> 赞同：3
> 
> 时间：2012-09-06T13:40:17.150
> 
> 标签：php, sockets

在循环客户端套接字数组时，如果套接字按原样回显，它会为每个客户端显示“resource id# 23”等不同的资源，但是当调用 socket_write 函数在每个循环中写入相同的回显消息时，写入功能失败，只有一个客户端得到写入的消息（ders一个输入框，如果你输入并提交，它会转到套接字服务器并为所有客户端写入d消息）

```
<form method='GET' action="">
<input type='text' name='name' />
<input type='submit' />
</form>
<?php
$no=500;$n=0;
$sock=null;
if(!($sock=socket_create(AF_INET,SOCK_STREAM,0)))
{
    $code=socket_last_error();
    $msg=socket_strerror($code);
    die("ERROR $msg");
}
echo "Socket created $sock";
/*

$sock1=socket_create(AF_INET,SOCK_STREAM,0);
socket_set_option($sock1, SOL_SOCKET, SO_REUSEADDR, 1)
socket_connect($sock1,'localhost',9001);
if(sizeof($_GET)>0)
{
    $msg=$_GET['name'];
    if(!socket_send($sock1,$msg,strlen($msg),0))
    {
        $err=socket_last_error();
        $emessg=socket_strerror($err);
        die("ERROR $emessg");
    }
}
*/
if (!socket_set_option($sock, SOL_SOCKET, SO_REUSEADDR, 1)) { 
    echo socket_strerror(socket_last_error($sock)); 
    exit; 
} 
if(!socket_bind($sock, "127.0.0.1" , 9001) )
{
    $cod=socket_last_error();
    $msg=socket_strerror($cod);
    die("ERROR:$msg");
}
echo "Socket BOund";
if(!socket_listen($sock,10))
{
    $cod=socket_last_error();
    $msg=socket_strerror($cod);
    die("ERROR:$msg");
}
echo "Socket listen OK \n";
class clients{
public $addr=null,$portc=null,$soc=null;
function __construct($sock1)    {
/*if(!($client[$n]=socket_create(AF_INET,SOCK_STREAM,0)))
{
    $code=socket_last_error();
    $msg=socket_strerror($code);
    die("ERROR $msg");
}*/
$this->soc=$sock1;
if(socket_getpeername($this->soc,$address,$port))
{
    echo "$address in port $port";
    $this->addr=$address;
    $this->portc=$port;
}
                    }

function sock(){return $this->soc;}
}//$client[500];
$client=array();
while(true){
//$client[$n++]=socket_accept($sock);
if($clienttemp=socket_accept($sock))
{
    $client[$n]=new clients($clienttemp);
    echo "NEw client ".$client[$n]->addr;
    $n++;
    //var_dump($client[$n-1]);
}
for($j=0;$j<$n;$j++)
//if($input=socket_read($client[$n-1]->soc,1024))
if($input=socket_read($client[$j]->soc,1024))
{
    //$resp="<br/>****".$client[$n-1]->addr." says: $input*****";
    $resp="<br/>****".$client[$j]->addr." says: $input*****";
    if($input=='quit')break;
    for($i=0;$i<$n;$i++)
{
    socket_write($client[$i]->soc,$resp);
    echo "****</br>$resp".$client[$i]->soc."****</br>";
}
}

// TO write in all clients

}
socket_close($client[$n-1]->soc);
socket_close($sock);

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T17:41:14.357

Johan 提到你的 for 循环没有开场的荣誉。在这种情况下，没关系，因为它只会执行下一个**表达式**，该表达式恰好是包含其余逻辑的**if块。**

[尽管使用socket_strerror](http://us3.php.net/manual/en/function.socket-strerror.php)和[socket_last_error](http://us3.php.net/manual/en/function.socket-last-error.php)，您可能会看到问题。

在此代码块中（已格式化，并删除了注释）：

```
for($j=0;$j<$n;$j++)
   if($input=socket_read($client[$j]->soc,1024))
   {
      $resp="<br/>****".$client[$j]->addr." says: $input*****";
      if($input=='quit')break;
      for($i=0;$i<$n;$i++)
      {
        // Get write response
        $sent = socket_write($client[$i]->soc,$resp);
        // Check response for error
        if($sent === false) 
        { 
           $err = socket_strerror(socket_last_error($client[$i]->soc));
           echo("\n $err \n");
        }
        echo "****</br>$resp".$client[$i]->soc."****</br>";
      }
    } 
```

这应该可以帮助您确定失败的原因。

# zend-framework2 - zf2 创建选择/下拉框并在控制器中填充选项？

> ID：12301421
> 
> 赞同：5
> 
> 时间：2012-09-06T13:40:19.863
> 
> 标签：zend-framework2

为了创建一个文本输入框，我在 zend framework2 中使用了以下代码

```
use Zend\Form\Form;

class Loginform extends Form
{
    public function __construct()
    {
           $this->add(array(            
            'name' => 'usernames',
            'attributes' =>  array(
                'id' => 'usernames',                
                'type' => 'text',
            ),
            'options' => array(
                'label' => 'User Name',
            ),
        ));       
    }
} 
```

我可以使用在控制器操作中填充值

```
$form = new Loginform();
$form->get('usernames')->setAttribute('value', 'user 1'); 
```

知道如何为 zf2 中的选择/下拉框做同样的事情吗？

参考：[zend 框架 2 文档](http://packages.zendframework.com/docs/latest/manual/en/modules/zend.form.quick-start.html)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-06T13:42:56.650

检查 API（文档很糟糕，所以检查代码）。

使用`Zend\Form\Element\Select`类并设置 options 属性，如下所示：

```
$element->setAttribute('options', array(
    'key' => 'val',
    ...
)); 
```

`FormRow`使用or`FormSelect`视图助手输出元素。

该站点也是示例和信息的良好来源：http: [//zf2.readthedocs.org/en/latest/modules/zend.form.quick-start.html](http://zf2.readthedocs.org/en/latest/modules/zend.form.quick-start.html)

例子：

```
$this->add(array(     
    'type' => 'Zend\Form\Element\Select',       
    'name' => 'usernames',
    'attributes' =>  array(
        'id' => 'usernames',                
        'options' => array(
            'test' => 'Hi, Im a test!',
            'Foo' => 'Bar',
        ),
    ),
    'options' => array(
        'label' => 'User Name',
    ),
)); 
```

如果需要，您还可以在控制器中分配选项，如上所示。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-12-03T10:15:10.547

```
$form = new Loginform();      
$form->get('usernames')->setValueOptions($usernames ); 
```

***$usernames****是一个数组*

参考[点击这里](https://unofficial-zf2.readthedocs.org/en/latest/modules/zend.form.element.select.html?highlight=test)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-30T13:36:54.887

Zend Framework 2.2 ，选择选项已移至“选项”而不是“属性”，因此上述代码也将更改

```
$this->add(array(     
    'type' => 'Zend\Form\Element\Select',       
    'name' => 'usernames',
    'attributes' =>  array(
       'id' => 'usernames'              
    ),
    'options' => array(
        'label' => 'User Name',
        'options' => array(
            'test' => 'Hi, Im a test!',
            'Foo' => 'Bar',
        ),
    ),
)); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-09-05T04:25:44.927

如果您想在控制器中执行此操作，请以这种方式执行

```
$form->get('ELEMENT_NAME')->setAttribute('options' ,array('KEY' => 'VALUE')); 
```

# c# - 如果方法返回接口类型，为什么我不能将结果传递给具体类型？

> ID：12301422
> 
> 赞同：1
> 
> 时间：2012-09-06T13:40:30.193
> 
> 标签：c#, interface, concrete

这个问题可能有点令人困惑，但很难在主题标题中明确这个问题。

我有这样声明和实现的方法：

```
public IList<string> GetBookTitles()
{
    IList<string> bookTitles = new List<string>();
    // do something to populate the bookTitles list.
    return bookTitles;
} 
```

为什么我不能将此方法的结果传递给 a `List<string>`？毕竟`List<string>`是一种`IList<string>`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T13:45:02.343

好吧，对于初学者，只需查看 的成员`IList`并将其与`List`. `List`有一个`IList`没有的方法。（`List`有一个没有的`BinarySearch`方法`IList`，仅作为一个例子。）

例如，数组也实现`IList`了 。但是，数组不是 a `List`，因此您不能也不应该将 a 传递`string[]`给接受 a 的方法`List<string>`。

你有几个可能的解决方案。一种方法是更改​​您的方法以返回 a`List<string>`而不是 a `IList<string>`（这就是我的建议）。如果那是您真正需要的，那么您不应该将返回类型限制为`IList<string>`. 另一个（较差的）选择是将结果转换回 a `List<string>`，然后再将其传递给下一个方法，因为您碰巧知道它是底层类型的真正含义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T13:41:27.083

> 毕竟`List<string>`是一种`IList<string>`。

但也有其他种类的`IList<String>`。

如果您的方法要返回一个`IList<String>`which is a`ReadOnlyCollection<String>`怎么办？

```
IList<string> x = new ReadOnlyCollection<string>();
List<string> y = x;  //Huh? 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T14:19:08.330

编译器在决定是否可以将 GetBookTitles 的结果分配给变量时使用方法的签名，而不是实现，因此它无法知道结果实际上是一个 List。如果它允许你做这样的事情，那么你可以写这样的东西：

```
List<string> myBooks = GetBookTitles();
myBooks.Sort(); 
```

在您的示例中，您可以这样做，实际上，如果您转换方法的结果，则可以：

```
List<string> myBooks = (List<string>)GetBookTitles(); 
```

但是有一天你可能会决定你的藏书是不可修改的，然后你重写你的方法如下：

```
public IList<string> GetBookTitles()
    {
        IList<string> tmp = new List<string>();
        // do something to populate the bookTitles list.
        IList<string> bookTitles = new ReadOnlyCollection<string>(tmp);
        return bookTitles;
    } 
```

ReadOnlyCollection 不实现排序，因此您的应用程序会编译，但会在运行时崩溃。使用强制转换方法在尝试进行强制转换时会崩溃，但在这种情况下，您有责任确定这种强制转换是可行的，并且编译器不会试图猜测。

更好的方法是使用 as 而不是 cast 和 chek for null。IE：

```
List<string> myBooks = GetBookTitles() as List<string>;
if (myBooks != null)
    myBooks.Sort(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T13:44:53.400

你应该可以，你只需要一个显式的转换。

```
List<string> foo = (List<string>)GetBookTitles() 
```

应该这样做。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T13:46:40.137

接口可以在不同的类中实现。因此，很难找到相应的类。

您可以从 IList 键入 cast 到 List ！！！

# linux - 单行输入的 sed 命令

> ID：12301424
> 
> 赞同：4
> 
> 时间：2012-09-06T13:40:34.200
> 
> 标签：linux, sed, solaris

我正在使用 SunOS 10。

`:`如果 SunOs 上的单词包含在行尾，我正在尝试替换行尾的字符，`:`我正在使用以下命令。

```
echo -n "test:" | sed 's/:$//g' 
```

它不工作。我在这里做错了什么？

在 GNU/Linux 中同样可以正常工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T13:45:58.277

您不需要换行。您需要删除它`-n`

```
echo "test:" | sed 's/:$//g' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T01:30:10.507

```
myshell:/home/myfolderpath # echo -n "test:"|sed 's/:$//g'
testmyshell:/home/myfolderpath# 
```

你的代码在我的机器上工作。

因为没有尾随新行。您将在下一个 shell 命令行之前看到结果。-n 不是必需的。

```
myshell:/home/myfolderpath # echo "test:"|sed 's/:$//g'
test
myshell:/home/myfolderpath# 
```

没有-n应该是这样的

# php - 浏览器关闭后 CakePHP cookie 不会持续存在

> ID：12301425
> 
> 赞同：2
> 
> 时间：2012-09-06T13:40:39.067
> 
> 标签：php, cakephp, cookies, nginx, cakephp-2.0

由于资源消耗较低，我正在从 Apache 转向 nginx。我已经设置了一个安装了 LEMP 堆栈的 Ubuntu 服务器框。在将我所有的应用程序转移过来（3 个 CakePHP 2.0.5 应用程序，1 个 Wordpress 安装）之后，一切似乎都运行良好，除了一件事 - 当浏览器关闭时，Cake 的 cookie 突然消失了。

我创建了一个非常简单的测试 PHP 页面来测试 cookie 是否正常工作，它们实际上是否正常工作，只是不在 Cake 中。当我关闭浏览器时，Wordpress 也没有任何麻烦记住我。

使用 Chrome 开发人员工具，我检查了是否设置了 cookie，如下所示：

![正在设置的 Cookie](../Images/982fe78f3e93aac389cefc9b8254d738.png)

到期日期甚至也设置在未来一个月，所以我不明白为什么他们不超过浏览器关闭。一旦我启动浏览器并导航到我的应用程序，cookie 现在就消失了：

![曲奇不见了！](../Images/edf0ae25b97a643fe4c49d74916dbc3a.png)

我确实注意到的一件事是，当我的应用程序在 Apache 上运行时，`CAKEPHP`您在上面看到的 cookie 在关闭之前和之后具有相同的值。但是在 nginx 服务器上，每次我关闭并重新打开浏览器时，该 cookie 的值都不同。

我认为这可能与会话有关，所以我检查了我的会话设置`core.php`并设置为让 PHP 进行会话处理：

```
Configure::write('Session', array(
    'defaults' => 'php'
)); 
```

我检查了我的`/tmp`目录，并且正在创建会话文件。我尝试将会话处理程序更改为`cake`以便 Cake 将会话存储在其`app/tmp/sessions`目录中，虽然会话将在此目录中成功创建，但我的 cookie 在浏览器关闭时仍然丢失。

以前有没有人经历过 nginx 和 Cake 之间的这种行为，或者对为什么会发生这种情况有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:28:00.390

该问题与加密 cookie 和 Suhosin 补丁有关。显然 Suhosin 会忽略任何`mt_srand()`并`srand()`调用您并初始化随机化器本身 [[参见此处](http://www.adayinthelifeof.nl/2010/12/13/php-srand-problems-with-suhosin/)]。因为 Cake 依赖于这些函数，所以它干扰了我的加密 cookie。为了修复它，我将这两行添加到我的 php.ini 文件中并重新启动服务器（请注意，简单地重新启动 nginx 不起作用）：

```
suhosin.srand.ignore = Off
suhosin.mt_srand.ignore = Off 
```

# iphone - 在 iPhone 中使用 OpenGL 从 Blender 导出的 Header 文件中绘制 3D 形状

> ID：12301427
> 
> 赞同：2
> 
> 时间：2012-09-06T13:40:43.237
> 
> 标签：iphone, objective-c, opengl-es, blender

我已经安装了[Blender](http://www.blender.org/)，编译了[Jeff LaMarche 的 Blender Objective-C Export Plugin](http://iphonedevelopment.blogspot.in/2011/04/blender-257-objective-c-export-script.html)并成功地将“MyImage.obj”导出为 Objective-C 头文件（GraphicsTypes.h）。

现在我正在尝试使用 iPhone 中的 OpenGL 从 Blender 导出的 Header 文件中绘制 3D 形状。

这是Blender[中 MyImage.obj 的图片表示。](http://imgur.com/YSiwY)我在下面粘贴了我的 Blender 导出的 Objective-C 头文件。

如何使用以下代码在 Objective-C 中绘制相同的 3D 图片。

我正在关注 [这个](http://adampreble.net/blog/2011/02/from-blender-to-iphone/)链接来完成这个过程。但是我无法将模型合并到我的应用程序中。

我没有找到使用以下代码（Blender 导出的 Objective-C 标头）渲染图像的任何教程。

我已经尝试了[HelloGLKit OpenGL 示例应用程序](https://github.com/jrwren/HelloGLKit)的代码。然而它并没有画出任何东西。

对此问题的任何帮助表示赞赏。

**GraphicsTypes.h [Blender 导出的 Objective-C 标头]**

```
//If not using MC3D, change 1 to 0 to add needed types
#if 1
    #import "MC3DTypes.h"
#else
    struct texCoord
    {
        GLfloat     u;
        GLfloat     v;
    };
    typedef struct texCoord texCoord;
    typedef texCoord* texCoordPtr;

    typedef struct vec2 vec2;
    typedef vec2* vec2Ptr;

    struct vec3
    {
        GLfloat x;
        GLfloat y;
        GLfloat z;
    };

    typedef struct vec3 vec3;
    typedef vec3* vec3Ptr;

    struct vec4
    {
        GLfloat x;
        GLfloat y;
        GLfloat z;
        GLfloat w;
        };

    typedef struct vec4 vec4;
    typedef vec4* vec4Ptr;

#endif

struct vertexData
{
    vec3        vertex;
    vec3        normal;
}
typedef struct vertexData vertexData;
typedef vertexData* vertexDataPtr;

static const vertexData MeshVertexData[] = {
    {/*v:*/{1.000000, -1.000000, -1.000000}, /*n:*/{0.577349, 0.577349, -0.577349} },
    {/*v:*/{1.000000, -1.000000, 1.000000}, /*n:*/{0.577349, -0.577349, -0.577349} },
    {/*v:*/{-1.000000, -1.000000, 1.000000}, /*n:*/{-0.577349, -0.577349, -0.577349} },
    {/*v:*/{1.000000, 1.000000, -1.000000}, /*n:*/{0.577349, 0.577349, 0.577349} },
    {/*v:*/{-1.000000, 1.000000, -1.000000}, /*n:*/{-0.577349, 0.577349, 0.577349} },
    {/*v:*/{0.999999, 1.000000, 1.000001}, /*n:*/{0.577349, -0.577349, 0.577349} },
    {/*v:*/{1.000000, -1.000000, -1.000000}, /*n:*/{0.577349, 0.577349, -0.577349} },
    {/*v:*/{1.000000, 1.000000, -1.000000}, /*n:*/{0.577349, 0.577349, 0.577349} },
    {/*v:*/{1.000000, -1.000000, 1.000000}, /*n:*/{0.577349, -0.577349, -0.577349} },
    {/*v:*/{1.000000, -1.000000, 1.000000}, /*n:*/{0.577349, -0.577349, -0.577349} },
    {/*v:*/{0.999999, 1.000000, 1.000001}, /*n:*/{0.577349, -0.577349, 0.577349} },
    {/*v:*/{-1.000000, -1.000000, 1.000000}, /*n:*/{-0.577349, -0.577349, -0.577349} },
    {/*v:*/{-1.000000, -1.000000, 1.000000}, /*n:*/{-0.577349, -0.577349, -0.577349} },
    {/*v:*/{-1.000000, 1.000000, 1.000000}, /*n:*/{-0.577349, -0.577349, 0.577349} },
    {/*v:*/{-1.000000, 1.000000, -1.000000}, /*n:*/{-0.577349, 0.577349, 0.577349} },
    {/*v:*/{1.000000, 1.000000, -1.000000}, /*n:*/{0.577349, 0.577349, 0.577349} },
    {/*v:*/{1.000000, -1.000000, -1.000000}, /*n:*/{0.577349, 0.577349, -0.577349} },
    {/*v:*/{-1.000000, -1.000000, -1.000000}, /*n:*/{-0.577349, 0.577349, -0.577349} },
    {/*v:*/{-1.000000, -1.000000, -1.000000}, /*n:*/{-0.577349, 0.577349, -0.577349} },
    {/*v:*/{1.000000, -1.000000, -1.000000}, /*n:*/{0.577349, 0.577349, -0.577349} },
    {/*v:*/{-1.000000, -1.000000, 1.000000}, /*n:*/{-0.577349, -0.577349, -0.577349} },
    {/*v:*/{-1.000000, 1.000000, -1.000000}, /*n:*/{-0.577349, 0.577349, 0.577349} },
    {/*v:*/{-1.000000, 1.000000, 1.000000}, /*n:*/{-0.577349, -0.577349, 0.577349} },
    {/*v:*/{0.999999, 1.000000, 1.000001}, /*n:*/{0.577349, -0.577349, 0.577349} },
    {/*v:*/{1.000000, 1.000000, -1.000000}, /*n:*/{0.577349, 0.577349, 0.577349} },
    {/*v:*/{0.999999, 1.000000, 1.000001}, /*n:*/{0.577349, -0.577349, 0.577349} },
    {/*v:*/{1.000000, -1.000000, 1.000000}, /*n:*/{0.577349, -0.577349, -0.577349} },
    {/*v:*/{0.999999, 1.000000, 1.000001}, /*n:*/{0.577349, -0.577349, 0.577349} },
    {/*v:*/{-1.000000, 1.000000, 1.000000}, /*n:*/{-0.577349, -0.577349, 0.577349} },
    {/*v:*/{-1.000000, -1.000000, 1.000000}, /*n:*/{-0.577349, -0.577349, -0.577349} },
    {/*v:*/{-1.000000, -1.000000, -1.000000}, /*n:*/{-0.577349, 0.577349, -0.577349} },
    {/*v:*/{-1.000000, -1.000000, 1.000000}, /*n:*/{-0.577349, -0.577349, -0.577349} },
    {/*v:*/{-1.000000, 1.000000, -1.000000}, /*n:*/{-0.577349, 0.577349, 0.577349} },
    {/*v:*/{-1.000000, 1.000000, -1.000000}, /*n:*/{-0.577349, 0.577349, 0.577349} },
    {/*v:*/{1.000000, 1.000000, -1.000000}, /*n:*/{0.577349, 0.577349, 0.577349} },
    {/*v:*/{-1.000000, -1.000000, -1.000000}, /*n:*/{-0.577349, 0.577349, -0.577349} },
};

// Example OpenGL ES 1.1 Drawing Code:
// glEnableClientState(GL_VERTEX_ARRAY);
// glEnableClientState(GL_NORMAL_ARRAY);
// glVertexPointer(3, GL_FLOAT, sizeof(VertexData3D), &MeshVertexData[0].vertex);
// glNormalPointer(GL_FLOAT, sizeof(VertexData3D), &MeshVertexData[0].normal);
// glDrawArrays(GL_TRIANGLES, 0, kMeshNumberOfVertices);
// glDisableClientState(GL_VERTEX_ARRAY);
// glDisableClientState(GL_NORMAL_ARRAY); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T10:02:56.370

我使用的是**NinevehGL**而不是 Blender。

**NinevehGL**是用纯 Obj-C 打造的 3D 引擎

NinevehGL 现在是 BETA 0.9.3 版本

[您可以在此处](http://nineveh.gl)查看有关 NinevehGL 的详细信息

[您可以在这里](http://nineveh.gl/community/forum/)查看 NinevehGL 论坛

# android - 不同屏幕中的 GridView ImageView 大小

> ID：12301429
> 
> 赞同：1
> 
> 时间：2012-09-06T13:40:54.047
> 
> 标签：android, gridview

当我在屏幕 4.3 上运行我的应用程序时，它可以正常工作，但是当我在 3.14 屏幕上运行时，图像不能正确显示为大尺寸。

有没有办法使用取决于不同屏幕尺寸的百分比来显示图像？

这是 ImageView 代码：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    ImageView imageView = new ImageView(mContext);
    imageView.setImageResource(mThumbIds[position]);
    imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
    imageView.setLayoutParams(new GridView.LayoutParams(200,200 ));
    return imageView;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T18:37:14.027

我找到了我的答案的解决方案，它接近@dmon 的答案

我在 Values 文件夹中创建了 dimensions.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
<dimen name="width">150dp</dimen>   
<dimen name="height">150dp</dimen>
</resources> 
```

在 imageadapter.java 中

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    ImageView imageView = new ImageView(mContext);
    imageView.setImageResource(mThumbIds[position]);
    imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
    imageView.setLayoutParams(new GridView.LayoutParams(
            (int) mContext.getResources().getDimension(R.dimen.width),                                                                                   
            (int) mContext.getResources().getDimension(R.dimen.height)));
    imageView.setPadding(5, 5, 5, 5);
    return imageView;
} 
```

感谢大家努力帮助最好的问候

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T14:18:54.617

//注意与屏幕英寸天气相关的是 4' 或 3.2

无论是 ldpi、mdpi、hdpi 还是 xhdpi，它都与屏幕分辨率有关。

```
final int scaleImage=200;

// Get the screen's density scale
final float scale = getResources().getDisplayMetrics().density;
// Convert the dps to pixels, based on density scale
final int imgSize  = (int) (scaleImage * scale + 0.5f);

// Use imgSize as a distance in pixels...
this 200 will give you a pixel as 

@Override
    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView imageView = new ImageView(mContext);
        imageView.setImageResource(mThumbIds[position]);
        imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
        imageView.setLayoutParams(new GridView.LayoutParams(imgSize,imgSize ));
        return imageView;
    } 
```

*   ldpi - 150 像素
*   mdpi - 200 像素
*   hdpi - 300像素
*   xhdpi- 400像素

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T13:45:32.703

试试这个代码来获取屏幕尺寸

```
DisplayMetrics metrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(metrics);

metrics.heightPixels;
metrics.widthPixels; 
```

或这个

```
getContext().getResources().getDisplayMetrics().widthPixels
getContext().getResources().getDisplayMetrics().heightPixels 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T13:46:46.840

创建一个dimens.xml 文件：

```
<resources>
  <dimen name="gridview">200dp</dimen>
</resources> 
```

然后获取该资源：

```
 int size = mContext.getResources().getDimensionPixelSize(R.dimen.gridview);
   imageView.setLayoutParams(new GridView.LayoutParams(size, size)); 
```

您可以阅读[文档中的](http://developer.android.com/guide/topics/resources/more-resources.html#Dimension)Dimension 资源。

# html - HTML5 视频标签卷支持

> ID：12301435
> 
> 赞同：1
> 
> 时间：2012-09-06T13:41:12.627
> 
> 标签：html, video, volume

我对 iPad 和 Android Tables 等设备有疑问，您无法更改视频标签的音量，因为此设备不支持 Volume API。你知道我如何检测这是否不支持吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T23:32:58.697

我能想到的最好的是：

```
function volumeChangeSupported () {
    var ua = navigator.userAgent.toLowerCase();
    // got information from jplayer:
    var noVolume = /ipad|iphone|ipod|android|blackberry|windows ce|windows phone|webos|playbook/.exec(ua);

    if (noVolume) {
        if (noVolume[0] === 'android' && /gecko/.test(ua)) {
            // Firefox on android DOES support changing the volume:
            return true;
        }
        else {
            return false;
        }
    }
    return true;
} 
```

这并不真正“检测”对更改音量的支持。我从 jPlayer 获得了这些信息，部分来自我自己在旧的 Android 3 平板电脑上测试 Firefox 19 的经验。谁知道 Firefox 在 Android 手机或不同 Android 版本上的行为是否不同。

但在此之前，我试图检测这样的音量变化支持：

```
function volumeChangeSupported () {
    var audio = new Audio();
    audio.volume = 0.5;
    return audio.volume === 0.5;
} 
```

这对 iPhone Safari 和 Android Firefox 产生了正确的结果，但不适用于其他 Android 浏览器（“Android 浏览器”和“Dolphin”，它们不能改变音量，但必须`audio.volume === 0.5`是真的）。

# php - 在哪里放置应该运行的代码并为每条路线设置一些变量？

> ID：12301436
> 
> 赞同：0
> 
> 时间：2012-09-06T13:41:13.137
> 
> 标签：php, symfony, controller, symfony-2.1

我想在每次调用 URL 或路由时运行一些会话处理代码，但我显然希望能够在任何我希望的控制器中访问这个会话变量。假设这应该放在我的捆绑包的前端控制器中，我错了吗？

我尝试将一些变量放在`...Bundle.php`我的 bundle 根目录的文件中`src`，在`DefaultController.php`（我创建了一个构造函数）等等。没有任何效果。

### 如何运行一些代码并为每条路线设置一些变量？

* * *

笔记：

*   我是 MVC 和 Symfony2 的新手。
*   “每条路线” == 我正在谈论的捆绑包中的每个控制器

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T13:45:30.030

我建议将其实现为内核事件侦听器，并将会话注入其中。

阐述：

如果您查看[http://symfony.com/doc/current/cookbook/service_container/event_listener.html](http://symfony.com/doc/current/cookbook/service_container/event_listener.html)，您将了解如何注册事件侦听器。

基本上，您使用此方法创建一个内核事件侦听器，该侦听器在每次系统启动时运行，并注入会话（yml 中的@session）以执行您需要的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T13:46:18.100

查看内核事件 kernel.request [http://symfony.com/doc/current/book/internals.html#events](http://symfony.com/doc/current/book/internals.html#events)

如果您不熟悉事件，请查看[http://symfony.com/doc/current/components/event_dispatcher/introduction.html](http://symfony.com/doc/current/components/event_dispatcher/introduction.html)

# sql - 搜索（在 Oracle 中），使用通配符而不用担心单词出现的大小写或顺序

> ID：12301441
> 
> 赞同：2
> 
> 时间：2012-09-06T13:41:27.277
> 
> 标签：sql, oracle, wildcard

如何使用通配符（在 Oracle 中）进行搜索，而不用担心单词出现的大小写或顺序。

例如，如果我搜索`like '%a%b%'`，它应该返回包含 *a*b*、*A*B*、*b*a* 和 *B*A* 的值 这只是一个示例，搜索可能有 5 个或更多单词，是它可能只用一个表达式而不是使用 AND 来获得结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T13:42:22.963

```
select * 
from yourtable
where yourfield like '%a%'
and yourfield like '%b%' 
```

或者您可以调查[Oracle Text](http://docs.oracle.com/cd/B28359_01/text.111/b28304/cqoper.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T14:00:43.180

```
select * from table
 where upper(column) like '%A%B%'; 
```

或者

```
select * from table
 where lower(column) like '%a%b%'; 
```

或者

```
select * from table
 where upper(column) like '%A%'
   and upper(column) like '%B%'; 
```

或者

```
select * from table
 where lower(column) like '%a%'
   and lower(column) like '%b%'; 
```

但是，如果您想了解`*a*b*`或`*b*a*`等等。另一种解决方案是`CHARS`在第一个中进行排序，`VARCHAR`即如果你有一个类似的字符串，`aebcd`然后对其进行排序，`abcde`然后使用 like 进行模式匹配。根据[这个](https://forums.oracle.com/forums/thread.jspa?messageID=1791550)，您可以使用以下查询对 varchar 中的字符进行排序，然后对其进行模式匹配。

```
SELECT 1 val
FROM (SELECT MIN(permutations) col
        FROM (SELECT REPLACE (SYS_CONNECT_BY_PATH (n, ','), ',') permutations
                FROM (SELECT LEVEL l, SUBSTR ('cba', LEVEL, 1) n
                        FROM DUAL   --replace dual by your table
             CONNECT BY LEVEL <= LENGTH ('cba')) yourtable
      CONNECT BY NOCYCLE l != PRIOR l)
        WHERE LENGTH (permutations) = LENGTH ('cba')) temp_tab
  WHERE upper(col) like '%A%B%'; 
```

退货

```
val 
------------------
1 
```

# magento - 确定 CMS 块中的类别

> ID：12301442
> 
> 赞同：0
> 
> 时间：2012-09-06T13:41:28.770
> 
> 标签：magento

我在 Magento 中有一些类别，其中有“静态块和产品”作为显示模式。所有这些类别都指向同一个 CMS 块，该块又指向一个模板文件。模板文件应根据类别生成不同的内容。

所以我的问题是：我可以在 CMS 块（或模板文件）中以某种方式找出类别吗？

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T14:25:48.420

```
Mage::registry('current_category'); 
```

# android - 如何将同一视图从 Activity (A) 添加到另一个 Activity (B)

> ID：12301443
> 
> 赞同：1
> 
> 时间：2012-09-06T13:41:31.957
> 
> 标签：android, view, android-activity, checkbox, add

我是 Android 的初学者，我有以下问题：

我在两个选项卡中创建了一个 TabHost：活动 A 和活动 B。

Activity A 包含一个带有动态添加复选框的线性布局：

```
Activity A:

1[ ] 
2[ ] 
3[x] 
4[ ] 
5[x] 
```

活动 B 包含一个空的线性布局。

现在我希望将活动 A 中的选中复选框添加到活动 B 中：

```
Activity B:

3[x]
5[x] 
```

如果未选中这些复选框，它们应该会消失...

```
Activity B:

...is empty again. 
```

应该使用什么技术来做这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T13:49:52.093

将信息从一个活动传递到另一个活动的最简单方法通常是传递一个捆绑包（听起来很适合您的情况）。您可以将 A 中所选框的字符串或数字传递给 be （[这里是传递捆绑包的解释](https://stackoverflow.com/questions/768969/passing-a-bundle-on-startactivity)），然后根据捆绑包添加这些复选框。

# phpunit - 在 Magento 中寻找 PHPUnit 测试的确切 config.xml 位置

> ID：12301444
> 
> 赞同：0
> 
> 时间：2012-09-06T13:41:33.343
> 
> 标签：phpunit, magento-1.7

我目前正在尝试让 PHPUnit 与 Magento 一起工作。在网络上的某些地方，人们推荐 EcomDev 的扩展，所以我试了一下。

[我构建了本教程](http://www.ecomdev.org/2011/02/01/phpunit-and-magento-yes-you-can.html)中编写的示例设置，我只是将 EcomDev_Example_... 替换为 Test_JustTest_...

但是，它不能正常工作，我想我将数据放在错误的 config.xml 中。目前我已经在 /app/code/local/Test/JustTest/etc/config.xml 和扩展的 config.xml 中写下了模块名称，只是为了尝试不同的东西。好吧，我可以运行 PHPUnit，但它总是告诉我没有要运行的测试。

我在谷歌上花了很多时间没有找到更详细的例子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T10:12:52.553

我面临同样的问题，但现在我得到了它的工作。我创建了**app/code/local/Namespace/Module/etc/config.xml**：

```
<?xml version="1.0"?>
<config>
    <phpunit>
        <suite>
            <modules>
                <Namespace_Module/>
            </modules>
        </suite>
    </phpunit>
    <modules>
        <namespace_module>
            <version>0.1</version>
        </namespace_module>
    </modules>
    <global>
        <models>
            <eav>
                <rewrite>
                    <entity_increment_numeric>Namespace_Module_Model_Entity_Increment_Numeric</entity_increment_numeric>
                </rewrite>
            </eav>
        </models>
    </global>
</config> 
```

其实这些名字都不是Namespace_Module，我只是换了给大家看。它是一个覆盖来自 magento 的数字模型的模块，但它没有太大的区别。

看到我的测试在 **app/code/local/Namespace/Module/Test/Model/Entity/Increment/Numeric.php 下**

看起来像：

```
<?php
class Namespace_Module_Test_Model_Entity_Increment_Numeric extends EcomDev_PHPUnit_Test_Case
{

    /**
    * Test Next Id Never Returns zero
    *
    * @test
    */
    public function testGetNextIdNeverReturnsZero(){   
        $this->assertTrue(true);
    }
} 
```

完成所有设置后，您应该在控制台/终端上使用以下命令运行测试：

> phpunit UnitTests.php

请记住，您应该通过在 app/etc/modules 中添加 Namespace_Module.xml 作为任何其他模型来启用您的模块。我的错误是我在模型中将该文件夹命名为 Tests 而不是 Test。我不认为你在做同样的事情......

无论如何，我希望它有所帮助。有关更多信息，[该手册](http://www.ecomdev.org/2011/05/24/ecomdev_phpunit-manual-version-0-2-0-is-available-for-download.html)可以为您提供很多帮助。

# jquery - 使用内容自动设置覆盖 div 的 z-index

> ID：12301445
> 
> 赞同：1
> 
> 时间：2012-09-06T13:41:33.580
> 
> 标签：jquery, z-index, draggable, handler

我有一个非常具体的问题，以前似乎没有被问到——至少我什么也没找到。不管怎样，情况如下：

我有 n 个可拖动的 div。那些包含列表的 div，可以通过双击进行编辑，它们是可排序的，并且可以不断地排序 - 你可以在这些容器中做一些事情。

现在我的问题：首先，作为可拖动的 JQuerys 的一部分，我可以将 z-index 自动设置为所有元素的最大值 - 但仅限于拖动时。只需在事件区域内单击一下，z-index 就会设置为自动，这并不意味着“单击”元素将显示在顶部。

第二个也是更大的问题是，如果不修改将焦点设置为 div 或其任何子项的每个处理程序，似乎不可能让 div 上的任何处理程序将其置于顶部。

关于如何向完整的 div 添加句柄之类的东西，有什么建议吗？

非常感谢，

努里坎

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T13:55:50.190

如果我理解您的问题，您可以使用单击和焦点事件来更新 z-index。每当 div 中的子元素获得焦点时，焦点就会触发。

```
$("div").draggable(
    {start:updateContent}
);
$("div").click(updateContent);
$("div").focus(updateContent);

function updateContent()
{
    $("div").css("z-index", 1);
   $(this).css("z-index",2);
} 
```

​ 小提琴样例：http: [//jsfiddle.net/Cwp2e/14/](http://jsfiddle.net/Cwp2e/14/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T13:50:21.507

我想到一件事——你研究过可拖动代码吗？至少它与单击和鼠标事件相关的部分可能值得检查。

如果它们中的任何地方都有 preventDefault() 函数，那么除了将自己的事件绑定到父 DIV 的每个子元素并以这种方式控制父元素之外，您可能无法做任何其他事情。

# extjs - Extjs4如何改变滚动条宽度

> ID：12301447
> 
> 赞同：0
> 
> 时间：2012-09-06T13:41:44.980
> 
> 标签：extjs, extjs4

我有一个带有一些数据的网格面板，当网格行超过时，即，如果数据更多，则网格高度是小滚动条。我想改变那个滚动条的样式。我尝试了以下 css ：

```
 .x-box-scroller
     .x-scroller-vertical 
```

但滚动条宽度 n 样式没有变化。请有人告诉我更改 Extjs4 滚动条宽度和颜色的正确方法

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T13:56:27.747

滚动条由浏览器而不是 ExtJS 呈现。框架只是为它腾出一些空间。像你一样问你的问题只能回答没有

> 滚动条 CSS 样式是 Microsoft 开发人员发明的一种奇怪的东西。它们不是 CSS 的 W3C 标准的一部分，因此大多数浏览器都会忽略它们。

这可能会让您感兴趣[stackoverflow.com/questions/7725652](https://stackoverflow.com/questions/7725652/css-scrollbar-style-cross-browser)

# php - 使用 PHP5 从 SharePoint 2010 获取所有项目

> ID：12301448
> 
> 赞同：-1
> 
> 时间：2012-09-06T13:41:52.440
> 
> 标签：php, sharepoint, soap

我使用以下代码从共享点获取根元素：

```
$client->GetListItems(array('listName' => $listName, 'rowLimit' => 10); 
```

而且效果很好。但现在我想用这段代码递归地查询所有项目（添加 queryOptions）：

```
$client->GetListItems(array('listName' => $listName, 'queryOptions' => '<ViewAttributes Scope="RecursiveAll"/>', 'rowLimit' => 10); 
```

但我做错了什么。此代码从服务器返回 HTTP 500。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T06:45:15.493

让它工作，不得不像这样使用 SoapVar：

```
$xml = new SoapVar('<ns1:queryOptions>' . '<QueryOptions><ViewAttributes    Scope="RecursiveAll" /></QueryOptions>' . '</ns1:queryOptions>', XSD_ANYXML, 'ns1');

$client->GetListItems(array('listName' => $listName, 'rowLimit' => 100, 'queryOptions' => $xml))->GetListItemsResult->any 
```

# wpf - WPF 图表打印到 XPS

> ID：12301451
> 
> 赞同：2
> 
> 时间：2012-09-06T13:41:59.250
> 
> 标签：wpf, charts, xps

更新：我设法通过为系列数据点创建简单的样式模板来解决这个问题。对于任何面临类似问题的人来说，这是我的简单代码。此代码不显示系列 LegendItems，但我认为它可以以类似的方式修复。

```
<Style
            x:Key="MyColumnDataPointStyle"
            TargetType="charting:ColumnDataPoint">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="charting:ColumnDataPoint">
                    <Border
                            Background="Plum"
                            BorderBrush="Gray"
                            BorderThickness="1"
                            Opacity="1"
                            x:Name="Root" >

                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="Root" Property="Background" Value="Yellow"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

我在 WPF/C# 项目中使用 system.windows.controls.datavisualization.toolkit 来创建图表。

我创建图表没有问题，但是当我尝试将其打印到 XPS 时，它根本不显示系列。加载窗口时打印图表工作正常，但我需要打印图表而不在窗口中显示它。

窗口中显示的图表：

[正常图表](http://www.freeimagehosting.net/4yito)

XPS 中的图表：

[XPS 图表](http://www.freeimagehosting.net/96zdc)

这是我创建 XPS 文件的方法：

```
 XpsDocument doc = new XpsDocument(@".\chart.xps", FileAccess.Write);

 XpsDocumentWriter writer = XpsDocument.CreateXpsDocumentWriter(doc);

 VisualsToXpsDocument vToXpsD = (VisualsToXpsDocument)writer.CreateVisualsCollator();

 foreach (Canvas canvas in reportViewer.Document.Pages)
 {
          canvas.Measure(canvas.RenderSize);

          canvas.Arrange(new Rect(new Point(0, 0), canvas.RenderSize));

          vToXpsD.Write(canvas);   
  }

  vToXpsD.EndBatchWrite();

  doc.Close(); 
```

图表代码：

```
Chart chart = new Chart();

BarSeries bar = new BarSeries();

Binding valuesBinding = new Binding("Value");
Binding namesBinding = new Binding("Title");

bar.ItemsSource = content.Series[0].Points;
bar.IndependentValueBinding = namesBinding;
bar.DependentValueBinding = valuesBinding; 

chart.Series.Add(bar); 
```

我已经尝试过这个[解决方案](https://stackoverflow.com/questions/4080486/wpf-chart-print-system-windows-controls-datavisualization-toolkit)，但我无法让它工作。

任何帮助深表感谢！

# java - 设置 JAVA_HOME 时是否需要大写并带有下划线

> ID：12301465
> 
> 赞同：2
> 
> 时间：2012-09-06T13:42:55.433
> 
> 标签：java

设置 JAVA_HOME 环境变量时，它是否一定需要采用那种精确的格式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T13:46:16.617

它*肯定*需要有一个下划线——它是一个标识符，并且下划线不会被随机忽略。

它*应该*都是大写的，尽管一些退化的系统可能会决定忽略大小写，或者如果找不到大写的，就查找小写的东西。当然不是依赖的行为。

不过，这似乎是一个奇怪的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T13:43:53.310

是的，它需要采用这种确切的格式。

有关定义，请参见[此处](http://cr.openjdk.java.net/~gbenson/zero-11-hotspot/hotspot/src/os/linux/vm/os_linux.cpp-.html)，第 2086 行或[此处](http://code.google.com/p/needle/source/browse/src/os/windows/vm/os_windows.cpp?r=1e637defdda69004d10472d3f54f6b29b1feac64#1718)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T21:38:31.757

是的，它需要完全一样

```
 JAVA_HOME 
```

它没有任何优势。约定的存在是有原因的，最好只是遵循它们，当替代方案没有好处时。

请注意，JAVA_HOME 出现的常见方式有以下三种：

1) 作为操作系统级别定义。
2) 它被 IDE、Web 服务器等应用程序的配置文件引用。 3) 构建工具，如 ant、maven 等。

所以对于工作的引用，它首先需要通常在操作系统级别定义，然后在配置文件中引用。引用和定义是不一样的。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-06T13:49:04.933

你必须完全这样命名它，除非使用它的代码是你自己的并且你可以改变它。

如果您的代码正在寻找一个环境变量，如果它的名称与您期望的名称不完全一样，您将如何找到它？

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-06T13:54:07.350

是的，它应该是大写字母。喜欢`JAVA_HOME`。它区分大小写。但是，路径不区分大小写。

# c++ - 扩展通过 Boost.Python 公开的虚拟 C++ 类

> ID：12301472
> 
> 赞同：1
> 
> 时间：2012-09-06T13:43:30.487
> 
> 标签：c++, python, boost-python, python-extensions

我正在尝试使用 Boost.Python 公开这个 C++ 类：

```
class VAlgorithm {
public:

  VAlgorithm(const char *name);

  virtual ~VAlgorithm();

  virtual bool Initialize() = 0;
  virtual bool Process() = 0;
  virtual bool Finalize() = 0;

  virtual const char *GetName() const; // Default implementation in cpp file
} 
```

我的最终目标是在 python shell 中将 VALgorithm 的子级定义为 python 类。按照[这个例子](http://wiki.python.org/moin/boost.python/OverridableVirtualFunctions)，我定义了一个回调类：

```
class VAlgorithm_callback: public VAlgorithm {
public:
  VAlgorithm_callback(PyObject *p, const char *name) :
      self(p), VAlgorithm(name) {
  }
  const char * GetName() const {
    return call_method<const char *>(self, "GetName");
  }

  static const char * GetName_default(const VAlgorithm& self_) {
    return self_.VAlgorithm::GetName();
  }

private:
  PyObject *self;
}; 
```

现在我只公开类本身和 GetName() 方法。由于它是一个虚拟类，我将这段代码放在 BOOST_PYTHON_MODULE 中：

```
class_<VAlgorithm, VAlgorithm_callback, boost::noncopyable>("VAlgorithm", no_init) //
  .def("GetName", &VAlgorithm_callback::GetName_default); // 
```

我可以编译它并将模块加载到 python shell 中。然后我尝试定义一个子类并调用 C++ 代码中定义的 GetName() 默认实现：

```
>>> class ConcAlg1(VAlgorithm):
...   pass
... 
>>> c1 = ConcAlg1("c1")
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
RuntimeError: This class cannot be instantiated from Python
>>> class ConcAlg2(VAlgorithm):
...   def __init__(self, name):
...     pass
... 
>>> c2 = ConcAlg2("c2")
>>> c2.GetName()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
Boost.Python.ArgumentError: Python argument types in
    VAlgorithm.GetName(ConcAlg2)
did not match C++ signature:
    GetName(VAlgorithm)
>>> class ConcAlg3(VAlgorithm):
...   def __init__(self, name):
...     super(ConcAlg3, self).__init__(self, name)
... 
>>> c3 = ConcAlg3("c3")
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 3, in __init__
RuntimeError: This class cannot be instantiated from Python 
```

我不是专家（只是第一次遇到这些问题），但在我看来，ConcAlg1 和 ConcAlg3 尝试实例化一个 VAlgorithm 对象并由于公开 VAlgorithm 时使用的 no_init 参数而失败（我不能省略它或代码不会编译），并且 ConcAlg2 不能调用 GetName() ，因为它不被识别为 VAlgorithm 的子代。我一定是做错了什么，但我不知道是什么（我是 Boost.Python 和扩展的新手）。谁能帮帮我吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:14:33.450

我想我找到了解决方案。通过我在询问中引用的示例以及[此处](http://www.boost.org/doc/libs/1_51_0/libs/python/doc/v2/class.html)的 boost 文档，我发现问题在于回调类是由 Boost.Python 包装的真实类，并且它必须是一个具体的类。所以我在其中实现了缺失的纯虚方法：

```
class VAlgorithm_callback: public VAlgorithm {
public:
  VAlgorithm_callback(PyObject *p, const char *name) :
      self(p), VAlgorithm(name) {
  }

  virtual bool Initialize() {
    return call_method<bool>(self, "Initialize");
  }
  virtual bool Process() {
    return call_method<bool>(self, "Process");
  }
  virtual bool Finalize() {
    return call_method<bool>(self, "Finalize");
  }

  const char * GetName() const {
    return call_method<const char *>(self, "GetName");
  }

// Supplies the default implementation of GetName
  static const char * GetName_default(const VAlgorithm& self_) {
    return self_.VAlgorithm::GetName();
  }

private:
  PyObject *self;
}; 
```

并将包装器修改为：

```
class_<VAlgorithm, boost::shared_ptr<VAlgorithm_callback>, boost::noncopyable ("VAlgorithm", init<const char *>()) //
 .def("Initialize", &VAlgorithm_callback::Initialize)
 .def("Process", &VAlgorithm_callback::Process)
 .def("Finalize", &VAlgorithm_callback::Finalize)
 .def("GetName", &VAlgorithm_callback::GetName_default); 
```

现在我可以在 Python 中定义一个子类并调用默认的 GetName() 方法：

```
>>> class ConcAlg(VAlgorithm):
...   pass
... 
>>> c = ConcAlg("c")
>>> c.GetName()
'c'
>>> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T15:16:15.687

我做过与此非常相似的事情。您为什么不关注您在评论中已经找到的内容？

当您在 Python 中创建派生自 VAlgorithm 的类的实例时，必须在 C++ 中实例化 VAlgorithm_callback 来表示它。如果您不在 BOOST_PYTHON_MODULE 中声明任何构造函数，这是不可能的。

按照示例中的方式进行操作应该没问题：

```
class_<VAlgorithm, VAlgorithm_callback, boost::noncopyable>("VAlgorithm", init<std::string>()) 
```

当你定义子类的**init**时，你可以使用下面的语法来调用父类的构造函数（但是你的代码也可以工作，我就是这样做的）。在您使用的示例中，他们甚至没有定义**init**因此调用父级。

```
class ConcAlg3(VAlgorithm):
    def __init__(self, name):
    VAlgorithm.__init__(self, name) 
```

# wpf - PathListBox 的替代品

> ID：12301473
> 
> 赞同：0
> 
> 时间：2012-09-06T13:43:36.490
> 
> 标签：wpf, animation, listbox

我想建立一个轮播来从列表中选择项目。它应该让用户可以通过将鼠标移动到列表的顶部区域来滚动列表（这应该会加速滚动），并且当鼠标在中间时滚动应该停止。

接近的是微软的[PathListBox](https://www.microsoft.com/design/)。我尝试构建示例，但是当我切换到下一个项目时，这些项目以一种非常奇怪的方式从一端跳到另一端。

[![旋转木马](../Images/11efb17b124b547074fd7b7295a20a30.png)](https://i.stack.imgur.com/6Xjtc.jpg)
[（来源：[microsoft.com](http://www.microsoft.com/design/toolbox/tutorials/pathlistbox/images/carousel1.jpg)）]

所以我的问题是，如果 WPF / C# 中有类似的东西来构建这样一个可以漂亮地动画但没有动画错误的项目列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T14:02:40.690

试试这些

[http://wpfcarousel.codeplex.com/](http://wpfcarousel.codeplex.com/)

[http://www.codeproject.com/Articles/181835/WPF-Carousel-Control](http://www.codeproject.com/Articles/181835/WPF-Carousel-Control)

# ruby-on-rails - Rails：仅在选中复选框时更新

> ID：12301475
> 
> 赞同：0
> 
> 时间：2012-09-06T13:43:36.977
> 
> 标签：ruby-on-rails, checkbox, updatemodel

我想更新一个模型 - 仅在单击 checkox 并插入备注的行

看法：

```
<%= form_tag update_fb_instruction_users_path, :method => :put do %>
<% @user_wishes.each do |u| %>
   <%= u.user.name %>
      <%= fields_for "instruction[]", u do |f| %>
      <%= f.text_field :remark_tl %>
   <% end %>
   <%= check_box_tag "instruction_user_ids[]", u.id %>

<% end %> 
```

控制器：

```
def update_fb

params[:instruction_user_ids].each do
@check = InstructionUser.update(params[:instruction].keys, params[:instruction].values).reject { |p| p.errors.empty? }
end 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-06T13:56:04.980

问题是它们都具有相同的名称。所以无论最后一个值是什么，这就是它在请求参数中的值。

它有点旧，但您可能想在这里查看 railscast：[http](http://railscasts.com/episodes/73-complex-forms-part-1) ://railscasts.com/episodes/73-complex-forms-part-1 。基本思想是在每个用户对象之上使用 fields_for。我以前没有自己做过，否则我会写一个完整的解决方案:)。

# ember.js - Ember-Data 转换后的值未使用绑定更新

> ID：12301477
> 
> 赞同：2
> 
> 时间：2012-09-06T13:43:38.997
> 
> 标签：ember.js, ember-data

这是我的变压器：

```
DS.attr.transforms.category = {
    from: function(serialized) {
        return OO.Category.create({
            tag: serialized
        });
    },

    to: function(deserialized) {
        return deserialized.get('tag');
    }
} 
```

我的模型：

```
OO.Event = DS.Model.extend({
    category: DS.attr('category', { key: 'tag' })
} 
```

当我提出用于创建 OO.Event 的表单时，我创建了一个“空白”OO.Event 并将表单元素绑定到 OO.Event 的属性。转换器在创建空白 OO.Event 时调用，但在 OO.Category 的标记属性更改时（由于绑定）不会再次调用。因此，在记录的 JSON 表示中，“标记”始终为空！

我应该怎么办？谢谢你的帮助！

# ios - 导航控制器让我进入 IOS 中的标签栏控制器

> ID：12301478
> 
> 赞同：1
> 
> 时间：2012-09-06T13:43:43.390
> 
> 标签：ios, uinavigationcontroller, uitabbarcontroller

好吧，我已经阅读了这些帖子和教程，但它们让我更加困惑：

[网址 1](http://www.wiredbob.com/2009/04/iphone-tweetie-style-navigation.html) [任务 1](https://stackoverflow.com/questions/576764/tab-bar-controller-inside-a-navigation-controller-or-sharing-a-navigation-root?lq=1) [任务 2](https://stackoverflow.com/questions/11136283/tab-bar-controller-inside-a-navigation-controller-how-to-push-new-viewcontrolle)

我想要的是这样做：

在我的应用程序开始时，有一个表格视图。当我按下一行时，它应该带我到另一个有标签的视图。

到目前为止我所做的是这些：

1）创建了一个导航控制器，还有我的tableview。当我按下一行时，会打开一个视图。在那个视图中（带有它自己的 .xib 文件）我添加了标签栏项目。

你可以在这里看到图片：

![导航控制器](../Images/ab917697ce5f1ae01c6144758033fca0.png) ![单视图](../Images/991870be7b0cd280351185014cb73ba5.png)

但是现在，我不知道如何在按下标签栏项目时打开一个新视图。我正在尝试将我的视图嵌入到控制器中，但我不能。

2）然后我尝试了这个：像以前一样拥有我的导航控制器，并在情节提要中添加了一个标签栏控制器，就像那张图片一样： ![在此处输入图像描述](../Images/9e21395aa6243fc954d89089991c229a.png)

但我无法连接它们。我的第一个视图是“SkiCenter”类，我使用的代码是：

```
SkiCenter *myDetViewCont = [[SkiCenter alloc] initWithNibName:@"SkiCenter" bundle:[NSBundle mainBundle]];
    myDetViewCont.ski_center=[centers objectAtIndex:indexPath.row];
    [self.navigationController pushViewController:myDetViewCont animated:YES]; // "Pushing the controller on the screen"
    [myDetViewCont release]; // releasing controller from the memory
    myDetViewCont = nil; 
```

我得到 SIGBRT，它说明了“SkiCenter”的 .nib 文件。

您能否建议 1 或 2 中的解决方案？

只是为了更清楚：解决方案1：按行让我进入一个名为skicentermain的uiview。我添加了几个 tabbaritems，但我不知道如何让它们打开新视图。

解决方案 2：插入标签栏控制器。它的第一个选项卡是 SkiCenter。但是当按下该行时，我得到一个 sigbart 错误。它说明了 SkiCenter 的 nib 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T13:55:29.673

如果您决定使用情节提要，您可以简单地将标识符放入任何视图控制器`attributes inspector`，然后使用其 id 实例化它。

```
UIStoryboard * storyBoard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];

[[self navigationController] pushViewController:[storyBoard instantiateViewControllerWithIdentifier:@"ViewControllerID"] animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T13:47:07.850

看起来您的声明`*myDetViewCont`不正确。您调用了您的笔尖 SkiCenterMain，而不是 SkiCenter。另外，SkiCenterMain 到底是什么？那是 UITabBarController 吗？

```
//SkiCenter *myDetViewCont = [[SkiCenter alloc] initWithNibName:@"SkiCenter" bundle:[NSBundle mainBundle]];
SkiCenter *myDetViewCont = [[SkiCenter alloc] initWithNibName:@"SkiCenterMain" bundle:[NSBundle mainBundle]]; 
```

# wpf - 使用 wpf VisualStateManager 动画可见性和不透明度

> ID：12301479
> 
> 赞同：2
> 
> 时间：2012-09-06T13:43:43.733
> 
> 标签：wpf, animation, storyboard, transition, visualstatemanager

我正在尝试为控件设置动画，以便将其可见性设置为可见，然后将不透明度从 0 设置为 1

但是什么也没发生，然后在 1 秒后，控件显示为 1 的不透明度...我看不到我做错了什么

这是我尝试过的代码

```
<Grid x:Name="layout_root" Margin="10">
    <VisualStateManager.VisualStateGroups>
        <VisualStateGroup x:Name="Filtering">
            <VisualStateGroup.Transitions>
                <VisualTransition GeneratedDuration="0:0:1">
                    <VisualTransition.GeneratedEasingFunction>
                        <ElasticEase EasingMode="EaseInOut"/>
                    </VisualTransition.GeneratedEasingFunction>
                </VisualTransition>
            </VisualStateGroup.Transitions>

            <VisualState x:Name="Disabled"/>
            <VisualState x:Name="Enabled">
                <Storyboard>
                    <ObjectAnimationUsingKeyFrames BeginTime="0:0:0" Duration="0:0:0" Storyboard.TargetName="filter_control" Storyboard.TargetProperty="(UIElement.Visibility)">
                        <DiscreteObjectKeyFrame KeyTime="0:0:0" Value="{x:Static Visibility.Visible}"/>
                    </ObjectAnimationUsingKeyFrames>
                    <DoubleAnimation Storyboard.TargetName="filter_control" Storyboard.TargetProperty="(UIElement.Opacity)" To="1"/>
                </Storyboard>
            </VisualState>
        </VisualStateGroup>
    </VisualStateManager.VisualStateGroups>

    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition/>
    </Grid.RowDefinitions>

    <TextBox x:Name="filter_control" Margin="0,0,0,10" Text="Filtering" Visibility="Collapsed" Opacity="0"/>

    <ListView Grid.Row="1" ItemsSource="{Binding Posts}">
        <ListView.View>
            <GridView>
                <GridViewColumn Width="100" Header="Date" DisplayMemberBinding="{Binding Date, StringFormat={}{0:dd/MM/yyyy}}"/>
                <GridViewColumn Width="100" Header="Text" DisplayMemberBinding="{Binding Text}"/>
                <GridViewColumn Width="100" Header="Value" DisplayMemberBinding="{Binding Value, StringFormat=F2}"/>
            </GridView>
        </ListView.View>
    </ListView>

    <Button Grid.Row="1" Content="v" FontFamily="Marlett" FontSize="14" VerticalAlignment="Top" HorizontalAlignment="Left" Click="ShowFilterClick"/>
</Grid> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T17:28:01.800

至于你做错了什么或为什么你看到你看到的行为的问题：启用状态的故事板是 VSM 在 VSGroup**处于**该状态时使用的故事板。但是，您为组指定一个转换故事板，并且 VSM在状态**之间**转换时应用它。因此，当您将 VSGroup 置于启用状态时，VSM 首先播放转换情节提要，然后使用您为启用状态指定的稳态情节提要。过渡情节提要为 1 秒，这就是为什么您会看到 1 秒延迟，然后是爆音。

像下面这样的东西可能是你想要的。请注意，过渡情节提要执行您想要的动作/动画，状态情节提要仅说明动画属性应保持的最终值。此外，我将缓动函数应用于双动画而不是整个 VisualTransition——尝试使用缓动函数插入 Visibility 是没有意义的。

```
<VisualStateGroup x:Name="Filtering">
    <VisualStateGroup.Transitions>
        <VisualTransition From="Disabled" To="Enabled" GeneratedDuration="0:0:1">
            <Storyboard>
               <ObjectAnimationUsingKeyFrames Duration="0:0:0" Storyboard.TargetName="filter_control" Storyboard.TargetProperty="(UIElement.Visibility)">
                   <DiscreteObjectKeyFrame KeyTime="0:0:0" Value="{x:Static Visibility.Visible}"/>
               </ObjectAnimationUsingKeyFrames>
               <DoubleAnimation Duration="0:0:1" Storyboard.TargetName="filter_control" Storyboard.TargetProperty="(UIElement.Opacity)" To="1">
                  <DoubleAnimation.EasingFunction>
                     <ElasticEase EasingMode="EaseInOut"/>
                  </DoubleAnimation.EasingFunction>
               </DoubleAnimation>
           </Storyboard>
       </VisualTransition>
       <!-- you could also have a transition from Enabled to Disabled -->
    </VisualStateGroup.Transitions>

    <VisualState x:Name="Disabled">
            <Storyboard>
               <ObjectAnimationUsingKeyFrames Duration="0:0:0" Storyboard.TargetName="filter_control" Storyboard.TargetProperty="(UIElement.Visibility)">
                   <DiscreteObjectKeyFrame KeyTime="0:0:0" Value="{x:Static Visibility.Collapsed}"/>
               </ObjectAnimationUsingKeyFrames>
               <DoubleAnimation Duration="0:0:0" Storyboard.TargetName="filter_control" Storyboard.TargetProperty="(UIElement.Opacity)" To="0"/>
           </Storyboard>
    </VisualState>
    <VisualState x:Name="Enabled">
            <Storyboard>
               <ObjectAnimationUsingKeyFrames Duration="0:0:0" Storyboard.TargetName="filter_control" Storyboard.TargetProperty="(UIElement.Visibility)">
                   <DiscreteObjectKeyFrame KeyTime="0:0:0" Value="{x:Static Visibility.Visible}"/>
               </ObjectAnimationUsingKeyFrames>
               <DoubleAnimation Duration="0:0:0" Storyboard.TargetName="filter_control" Storyboard.TargetProperty="(UIElement.Opacity)" To="1"/>
           </Storyboard>
    </VisualState>
</VisualStateGroup> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T14:53:14.170

Visibility 枚举不是固有的动画属性。通常只有数字属性是真正可动画的，因为 WPF 可以填充关键帧之间的空间。例如，它知道介于 0 和 1 之间的不透明度是 0.5。它根据当前时间知道每个可能的值。

如果您从 Visibility.Collapsed 到 Visibility.Visible 的动画超过 1 秒，它不知道在 0.5 秒标记处或中间的任何其他时间点做什么。它只知道您正在将枚举从 1 个值更改为另一个值。如果你的过渡时间是 1 秒，它会等到那一秒结束然后改变值，所以你永远看不到不透明动画的发生。

您可以尝试使用 FluidLayout。您可以这样启用它：

```
<VisualStateGroup x:Name="Filtering" ei:ExtendedVisualStateManager.UseFluidLayout="True"> 
```

您还可以使用 Blend UI 中的切换开关来启用它。

FluidLayout 为您动画布局更改。折叠或展开元素会影响布局，因此它可以自动为这些布局更改设置动画。

# c++ - 如何将 QString 视为文件位置并获取其目录

> ID：12301484
> 
> 赞同：5
> 
> 时间：2012-09-06T13:44:04.823
> 
> 标签：c++, qt

我从 Qt GUI 将文件列表收集到 QStringList 中。这些文件中的每一个都是一个`.txt`文件，在`same_folder_as_txt/videos/`.

有没有一种简单的方法可以将 QString 对象作为文件路径进行操作？例如，给定`C:/some/path/foo.txt`，我想检索`C:/some/path/videos/foo.avi`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-06T14:36:11.747

鉴于您的路径`QString` `s`

```
info = QFileInfo(s)
// Get the name of the file without the extension
base_name = info.baseName()
// Add a ".avi" extension
video_file = QStringList((base_name, "avi")).join(".")
// Get the directory
dir_name = info.path()
// Construct the path to the video file
video_path = QStringList((dir_name, QString("videos"), video_file).join("/") 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-06T13:47:59.973

您可以将它们分别转换为`QDir`，将您的修改作为路径执行，然后用于`absolutePath()`返回`QString`。

# c# - RsaProtectedConfigurationProvider 实现与 RSACryptoServiceProvider c#

> ID：12301485
> 
> 赞同：0
> 
> 时间：2012-09-06T13:44:08.227
> 
> 标签：c#, windows, encryption-asymmetric, encryption-symmetric

如果[RSACryptoServiceProvider](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rsacryptoserviceprovider.aspx)不能加密大于它的[KeySize](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rsacryptoserviceprovider.keysize.aspx)的数据，那么[RsaProtectedConfigurationProvider](http://msdn.microsoft.com/en-us/library/system.configuration.rsaprotectedconfigurationprovider.aspx)是如何在 .Net 框架中实现的？

我正在开发一个用于加密/解密一些敏感信息的实用程序。我的两个加密提供程序选项是 DPAPI 和 RSA，而 DPAPI 不适合网络农场类型的环境，RSA 适合因为带有 KeyContainer 的导出/导入选项。这是在工作站上运行的独立应用程序。

我知道非对称算法不是为大数据设计的，我只是尝试使用下面的代码加密长度超过 400K 的字符串，它运行良好。

```
 if (!section.SectionInformation.IsProtected)
        {
            section.SectionInformation.ProtectSection("RSAProtectedConfigurationProvider");
            section.SectionInformation.ForceSave = true;
            config.Save(ConfigurationSaveMode.Full);
        } 
```

这绝对意味着除了 aspnet_regiis.exe 中的导出导入密钥选项之外，还有更多的事情发生在幕后。

我的理解：

1.  我们使用*RsaProtectedConfigurationProvider*加密*myapp.exe.config*，提供一个密钥容器名称*myrsakeycontainer*，并将公钥和私钥导出到一个 xml 文件*myrsakeyfile.xml*。

****   如果我们希望*myapp.exe.config*在另一台计算机上解密，我们使用名为*myrsakeycontainer*的容器从*myrsakeyfile.xml*导入它们的密钥对。*** 

 ***这很好用。[我可以通过RSACryptoServiceProvider](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rsacryptoserviceprovider.aspx)在我的项目中实现相同的目标。但我无法处理大于 `new RSACryptoServiceProvider(cspParameters)` 为我生成的密钥大小的数据。

*   我希望能够像 [RsaProtectedConfigurationProvider](http://msdn.microsoft.com/en-us/library/system.configuration.rsaprotectedconfigurationprovider.aspx)那样解密大量数据（以防万一）。
*   是的，我可以使用[RijndaelManaged](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rijndaelmanaged.aspx)（我最喜欢的）进行实际加密，而对于对称密钥传输（导出/导入），我可以使用[RSACryptoServiceProvider](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rsacryptoserviceprovider.aspx)。这让我处于这样一种情况，如果我想导出/导入对称密钥，我应该首先用公钥或 RSA 对其进行加密，将其导入另一台机器，然后用 RSA 的私钥解密。将 RSA 密钥对与加密的对称密钥一起导出。
*   [但是，当我通过 aspnet_regiis.exe 导出RsaProtectedConfigurationProvider](http://msdn.microsoft.com/en-us/library/system.configuration.rsaprotectedconfigurationprovider.aspx)使用的 RSA 密钥对时 ，我相信它只导出 xml 文件中的公钥/私钥对，而不导出其他信息（如对称密钥信息）。

*   那么，仅使用 RSA 密钥对， [RsaProtectedConfigurationProvider](http://msdn.microsoft.com/en-us/library/system.configuration.rsaprotectedconfigurationprovider.aspx)如何设法解密在另一台计算机上加密的信息（在我的情况下是巨大的 - 超过 40 万个字符）？**如果它使用对称算法（也许？！）来加密信息，那么该对称密钥如何导出/导入到另一台计算机进行解密？RSA 密钥容器的对称密钥部分是通过 aspnet_regiis.exe 导出的，还是对称密钥是基于算法设计的动态？**

*   我可以使用 Rijndael，它的密钥使用 RSA 密钥对加密，我可以将 RSA 密钥对和 Rijndael 对称密钥导出/导入到另一台计算机。（我过去做过）

    我很想知道 [RsaProtectedConfigurationProvider](http://msdn.microsoft.com/en-us/library/system.configuration.rsaprotectedconfigurationprovider.aspx)内部使用了什么。

有什么理论吗？概念？链接？建议？请..

> 类似问题 - [RSAProtectedConfigurationProvider 在 web.config 加密中使用了哪些算法？](https://stackoverflow.com/questions/4782375/what-algorithms-are-used-by-rsaprotectedconfigurationprovider-in-web-config-ency)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T23:44:41.493

*加密*的对称密钥与对称密钥已加密的加密配置信息**一起**存储在 XML中。

如果您使用 Reflector 查看代码，它所做的就是加载 XML 节点并使用*非对称*RSA 私钥来解密存储在 XML 节点本身中的*对称密钥。*

真正发挥这种魔力的函数在这里：

公共虚拟 SymmetricAlgorithm GetDecryptionKey(EncryptedData encryptedData, string symmetricAlgorithmUri);

声明类型：System.Security.Cryptography.Xml.EncryptedXml 程序集：System.Security，版本=2.0.0.0

查看周围的代码

```
this.m_document.SelectNodes("//enc:EncryptedKey", nsmgr); 
```

这篇博文有一篇很好的文章，介绍了如何在实际实践中配对非对称和对称算法：http: [//pages.infinit.net/ctech/20031101-0151.html](http://pages.infinit.net/ctech/20031101-0151.html)***

# jquery - $('div.img', 这个)

> ID：12301487
> 
> 赞同：1
> 
> 时间：2012-09-06T13:44:11.290
> 
> 标签：jquery, jquery-plugins

我有一个非常简单的问题，我正在学习 jQuery 插件并看到了这个：

```
var nav = {};
nav.$ = $('div.nav', this); 
```

有人可以解释一下这是做什么的吗？为什么在`$`那儿？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T13:45:35.620

它纯粹用作属性名称。而已。就像使用例如一样`nav.myProperty = something;`

其实和做的一样：

```
var nav = {
    $: $('div.nav', this)
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T13:49:55.090

第一个 $ 只是 的属性名称`nav`，而第二个 $ 是 jQuery 对象。

`$('div.nav', this)`和`jQuery('div.nav', this)`

所以`nav.$ = jQuery('div.nav', this);`

为避免混淆，您可以使用`nav.jqNav = jQuery('div.nav', this);`

希望你能理解...

详情请参阅[`http://api.jquery.com/category/selectors/`](http://api.jquery.com/category/selectors/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T13:45:49.753

$ 是为了表明它是一个缓存的 jQuery 对象（与元素相反）。

请注意，这只是一个约定，不需要在对 jQuery 对象的引用前加上 $。

# sql - 使用 Select 连接两个表，只显示几列并且还有一个 between 条件

> ID：12301494
> 
> 赞同：1
> 
> 时间：2012-09-06T13:44:26.167
> 
> 标签：sql, tsql

我用谷歌搜索并搜索了这个地方，但找不到我能找到的答案，因为其他人的不同。

```
USE TestDatabase
Select Firstname,Lastname,Salary From Employee as E 
Join JobTitle as J
on E.JobTitleID = J.JobTitleID

WHERE Salary 
BETWEEN $25000.00 AND $50000.00 
```

这可行，但我试图显示 JobTitle Table 中的两列，我不知道要搜索什么词或谷歌，也找不到简单的答案。任何人都可以帮助一些人，但我很困惑。我在学校使用服务器 2008 t-sql

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T13:46:03.013

您可以使用表格的别名`JobTitle`来`J`选择您想要选择的任何额外列

```
Select Firstname, Lastname, Salary, 
   j.Field1, j.Field2 ... -- and other fields you want to select here
From Employee as E 
Join JobTitle as J
on E.JobTitleID = J.JobTitleID

WHERE Salary 
BETWEEN $25000.00 AND $50000.00 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T13:52:48.553

使用别名将谁是您正在使用的表设置到该字段。

```
Select
    E.Firstname,E.Lastname,E.Salary,
    j.JobTitle, j.Otherfieldyouwanttoselect
From Employee as E Join JobTitle as J on E.JobTitleID = J.JobTitleID
WHERE
    Salary BETWEEN $25000.00 AND $50000.00 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T13:49:03.120

你的意思是这样吗？

```
USE TestDatabase
Select Firstname,Lastname,Salary,J.YourcolumnfromJobTitle  From Employee as E 
Join JobTitle as J
on E.JobTitleID = J.JobTitleID

WHERE Salary 
BETWEEN $25000.00 AND $50000.00 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T13:48:21.907

```
Select E.Firstname, E.Lastname, E.Salary, J.Column1, J.Column2
    From Employee as E 
        Join JobTitle as J
            on E.JobTitleID = J.JobTitleID
    WHERE E.Salary BETWEEN $25000.00 AND $50000.00 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T13:52:24.917

您应该为这两个表使用别名，如下所示：

```
USE TestDatabase
Select E.Firstname,E.Lastname,E.Salary,J.Column1,j.Column2 From Employee as E 
Join JobTitle as J
on E.JobTitleID = J.JobTitleID

WHERE E.Salary 
BETWEEN $25000.00 AND $50000.00 
```

# java - 保持服务器套接字打开

> ID：12301496
> 
> 赞同：-1
> 
> 时间：2012-09-06T13:44:27.930
> 
> 标签：java, multithreading, sockets

即使抛出错误或异常，我也想保持我的套接字服务器打开

这是我的服务器

编辑：

```
public void serveur()
{
     int maxConnectionAllowed=2;
     int port=5000;

    try{

        serveur = new ServerSocket(port);
        serveur.setReuseAddress(true);
        System.out.println("Waiting for connection");

        while (true) {
            synchronized (connectedCount) {
                while (connectedCount.get() >= maxConnectionAllowed) {
                    try {
                        connectedCount.wait();
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                }
            }
            Socket socket = serveur.accept();   
            factory.processRequest(socket,connectedCount);
        }           
    }

    catch(SocketException sException){
        System.err.println("Error when a socket connects");

    }   
    catch(IOException ioException){
        System.err.println("Error when reading output/input datas");

    }   
      }
public void run() {
    serveur();
} 
```

例如，同时允许的 maxConnection 是 2 ，但是我连接了第三个，抛出异常`java.net.ConnectException: Connection refused: connect`并且我的 serversocket 已关闭我希望服务器继续运行，直到有一个地方可用。

**编辑：**

工厂方法

```
public void processRequest(Socket socket,AtomicInteger connectedCount) {
    try
    {

    RequestTreatment requestTreatment= new RequestTreatment(socket,connectedCount);
    Thread threadWorker= new Thread(requestTreatment);
    threadWorker.start();
    }
    finally
    {
        compteurConnexion.incrementAndGet();
        synchronized (connectedCount) {
            connectedCount.notify();
        }
    }

}

} 
```

请求治疗等级

```
public RequestTreatment(Socket socket) {
    super();
    this.socket=socket;

}
@Override
public void run() {
            try
            {
            requestTreatment();
            }
             finally
             {
                try {
                socket.getInputStream().close();
                socket.getOutputStream().close();
                socket.close();
                    } catch (IOException e) {
                e.printStackTrace();
                 }

            }
          }

public void treatment() {
        try {
            in = socket.getInputStream();
            out = socket.getOutputStream();

            // do stuff 

        } catch (IOException e) {
            e.printStackTrace();
             } 
        }
    } 
```

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T13:57:02.967

我建议您让您的服务器接受它可以接受的所有连接并将它们存储在某种列表或映射中（最好是线程安全版本），并具有通过 2 个线程池一次处理 2 个连接的机制。当一个进程结束时，您可以从列表中获取最旧的套接字连接并进行处理。

编辑：

我看到您不想允许第三个连接，所以我将代码更改为：

```
While(true){
    Socket socket = serveur.accept();
    if(nbClient++< maxConnectionAllowed) factory.processRequest(socket);
    //Else just close the connection and start the loop again
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T05:46:31.153

```
finally{
        try{
            in.close();
            out.close();
            socket.close();
        }
        catch(IOException ioException){
            ioException.printStackTrace();
        }
    } 
```

问题就在这里。您正在启动一个新线程来处理套接字，然后您将进入这个关闭套接字的 finally 块，而线程仍在运行。所以线程遇到“套接字关闭”异常。请注意，这*不是*客户所接受的，`ServerSocket,`而是`Socket`客户所接受的。这段代码应该在线程代码的 finally 块中，而不是在这里。

你这里还有一个问题：

```
public RequestTreatment(Socket socket)
{
    super();
    this.socket=socket;
    threadWorker= new Thread(this);
    threadWorker.start();
} 
```

此代码在完全构造之前泄漏了“this”。你不应该在这里启动线程，你应该在你做的地方启动它`new RequestTreatment()`。

# php - 贝宝交易

> ID：12301500
> 
> 赞同：-3
> 
> 时间：2012-09-06T13:44:38.117
> 
> 标签：php, paypal

我正在创建一个网站，可以让我们使用 Paypal 提供的交易功能。

再次为了让网站完美运行，我正在使用沙盒帐户进行开发。

现在有两个名为return 和cancel_return 的参数。当交易成功完成时，贝宝网站将其重定向到返回参数中提到的页面，否则它会在 cancel_return 参数中返回。但网页没有重定向。当单击返回链接到网页时，它显示错误。

我的代码成功.php

```
 <?php
             define("DB_HOST", "localhost");
             define("DB_USERNAME", "root");
              define("DB_PASSWORD", "");
             define("DB_DATABASE", "test");
            $connect = mysql_connect(DB_HOST, DB_USERNAME, DB_PASSWORD) or   
                 die("Database Connection Error");
            mysql_select_db(DB_DATABASE) or ("Database Selection Error");

             session_start();
             $uid = $_SESSION['uid'];
             $username=$_SESSION['username'];

              $item_no = $_GET['item_number'];
              $item_transaction = $_GET['tx'];
              $item_price = $_GET['amt'];
              $item_currency = $_GET['cc'];

           //Getting product details
$sql=mysql_query("select product,price,currency from products where pid='$item_no'");
   if($sql === FALSE) {
       die(mysql_error()); // TODO: better error handling
   }
   $row=mysql_fetch_array($sql);
       $price=$row['price'];
      $currency=$row['currency'];

        //Rechecking the product details
      if($item_price==$price && $item_currency==$currency)
     {

     $result = mysql_query("INSERT INTO sales(pid, uid, saledate,transactionid) 
     VALUES('$item_no', '$uid', NOW(),'$item_transaction')");
  if($result){
         echo "<h1>Welcome, $username</h1>";
        echo '<h1>Payment Successful</h1>';

       }else{
        echo "Payment Error";
      }
     }
      else
        {
      echo "Payment Failed";
            }
          ?> 
```

它没有保存到数据库中并显示错误为

```
 Undefined index: item_number in C:\wamp\www\mvc\view\success.php on line 13
  Undefined index: tx in C:\wamp\www\mvc\view\success.php on line 14
  Undefined index: amt in C:\wamp\www\mvc\view\success.php on line 15
  Undefined index: cc in C:\wamp\www\mvc\view\success.php on line 16 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T13:53:01.657

这是一个通知错误。这意味着您的某些 $_GET 变量未设置。

摆脱此错误消息的一个示例是切换分配变量的方式...例如

```
$item_no = isset($_GET['item_number']) ? $_GET['item_number'] : null; 
```

您还可以通过更改 php.ini 中的变量 error_reporting 来禁用通知，但不建议在开发机器上这样做

# routing - ASP.Net Web API：基于内容的路由

> ID：12301501
> 
> 赞同：1
> 
> 时间：2012-09-06T13:44:42.993
> 
> 标签：routing, asp.net-web-api

在 ASP.Net Web API 中执行“基于内容的路由”的可能方法是什么？它是否提供了 WCF 提供的开箱即用的东西（[基于 WCF 内容的路由](http://consultingblogs.emc.com/owainwragg/archive/2009/07/22/content-based-routing-with-wcf.aspx)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-02-27T16:25:53.257

只需覆盖 ApiControllerActionSelector 类中的 SelectAction 方法，您可以在其中检查请求的内容并确定要使用的操作方法（使用反射）。然后，只需返回一个 ReflectedHttpActionDescriptor 实例，传入当前控制器上下文和反射动作方法的 MethodInfo。如果没有找到匹配的方法，只需调用 base 并返回该结果。

可以在此处找到示例：[https ://stackoverflow.com/a/16545954/1402786](https://stackoverflow.com/a/16545954/1402786)

# asp.net-mvc - 仅来自 Web.config 的 MVC3 项目的 ASP.Net 成员资格，就像在网站中一样

> ID：12301503
> 
> 赞同：0
> 
> 时间：2012-09-06T13:44:44.747
> 
> 标签：asp.net-mvc, asp.net-mvc-3, membership

我想在 MVC3.0 项目中的区域应用 ASP.Net 成员资格，但我不想将 [Authorize] 放在控制器中。如果可以的话，这是否可能，那么我该如何实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T13:50:22.967

您可以在调用每个方法时自己实现安全检查，方法是在基本控制器中重写 OnActionExecuting（或者如果您不想实现基本控制器，则为每个方法）并决定是否允许调用。只是出于好奇，为什么不使用 [Authorize]？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T13:57:31.460

是的，您可以在 mvc3 中实现全局授权。为此，您首先编写一个覆盖默认 AuthorizeAttribute 的全局过滤器，然后在 global.asax 中注册您的自定义过滤器

[查看这篇博文了解更多详情](http://blog.tomasjansson.com/2011/08/securing-your-asp-net-mvc-3-application/)

# c# - 我不能捕获特定或自定义异常吗？

> ID：12301504
> 
> 赞同：7
> 
> 时间：2012-09-06T13:44:46.177
> 
> 标签：c#, .net, exception-handling

我不想捕捉一些异常。我能以某种方式做到吗？

我可以这样说吗：

```
catch (Exception e BUT not CustomExceptionA)
{
} 
```

?

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-06T13:47:51.423

```
try
{
      // Explosive code
}
catch (CustomExceptionA){ throw; }
catch (Exception ex)
{
    //classic error handling
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-06T13:46:41.510

```
try
{
}
catch (Exception ex)
{
    if (ex is CustomExceptionA)
    {
        throw;
    }
    else
    {
        // handle
    }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-03-29T16:37:13.390

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-06T13:46:43.500

你可以过滤它：

```
if (e is CustomExceptionA) throw; 
```

当然，您可以抓住它并重新抛出它：

```
try
{
}
catch (CustomExceptionA) { throw; }
catch (Exception ex) { ... } 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-06T13:47:18.163

首先，除非您记录并重新抛出异常，否则捕获异常是不好的做法。但如果必须，您需要捕获自定义异常并重新抛出它，如下所示：

```
try
{
}
catch (CustomExceptionA custome)
{
    throw custome;
}
catch (Exception e)
{
    // Do something that hopefully re-throw's e
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-09-06T13:48:26.617

在评论中接受@Servy 的教育后，我想到了一个解决方案，可以让你做你想做的[我认为的]。让我们创建一个如下所示的方法`IgnoreExceptionsFor()`：

```
public void PreventExceptionsFor(Action actionToRun())
{
    try
    {
         actionToRun();
    }
    catch
    {}
} 
```

然后可以这样调用：

```
try
{
     //lots of other stuff
     PreventExceptionsFor(() => MethodThatCausesTheExceptionYouWantToIgnore());
     //other stuff
}
catch(Exception e)
{
    //do whatever
} 
```

这样，除了 with 的那一行之外的每一行`PreventExceptionsFor()`都会正常抛出异常，而里面的那一行`PreventExceptionsFor()`会被悄悄地通过。

# unit-testing - 在 HUnit 中选择性地运行测试

> ID：12301506
> 
> 赞同：2
> 
> 时间：2012-09-06T13:44:54.510
> 
> 标签：unit-testing, haskell

`Test.HUnit`提供了一个大红色按钮来运行测试：

```
runTestTT :: Test -> IO Counts 
```

由于需要构建大型测试套件，`Test`因此它不是单个测试，而是实际上是带有`Assertion`叶子的标记玫瑰树：

```
data Test
  = TestCase Assertion | TestList [Test] | TestLabel String Test
        -- Defined in `Test.HUnit.Base' 
```

它不是抽象的，因此可以对其进行处理。一种特别有用的处理是通过路径提取子树：

```
byPath = flip $ foldl f where
    f (TestList l) = (l !!)
    f (TestLabel _ t) = const t
    f t = const t 
```

因此，例如，我可以运行单个子套件`runTestTT $ byPath [1] tests`或由测试路径标识的特定测试`runTestTT $ byPath [1,7,3] tests`，而不是等待整个套件。

国产工具的一个缺点是没有保留（缩短）测试路径。

Hackage 上是否已经有这样的处理辅助工具？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T14:47:22.657

最接近您需求的似乎是对 HUnit、Quickcheck 和其他测试进行抽象的库和程序，并拥有自己的测试名称分组和管理基础设施，例如[test-framework](http://hackage.haskell.org/package/test-framework)。它为您提供了一个`main`接受命令行参数的函数，包括一个允许您指定要运行的测试或测试组的函数（通过名称的通配符）。

# android - 如何获得 ActionBar 的高度？

> ID：12301510
> 
> 赞同：206
> 
> 时间：2012-09-06T13:45:03.437
> 
> 标签：android, android-actionbar

`ActionBar`每次创建活动时，我都试图获取（使用 Sherlock）的高度（特别是为了处理 ActionBar 高度可能发生变化的旋转配置更改）。

为此，我使用`ActionBar.getHeight()`仅在显示时才有效的方法`ActionBar`。

第一次创建第一个活动时，我可以调用回调`getHeight()`。`onCreateOptionsMenu`但是这个方法之后没有被调用。

所以我的问题是我什么时候可以调用 getHeight() 并确保它不会返回 0？或者如果不可能，我该如何设置 ActionBar 的高度？

* * *

## 回答 #1

> 赞同：443
> 
> 时间：2012-11-04T07:14:26.607

如果您想明确控制 ActionBar 的大小，@birdy 的答案是一个选项，但有一种方法可以在不锁定我在支持文档中找到的大小的情况下将其拉起。这有点尴尬，但它对我有用。您将需要一个上下文，此示例在 Activity 中有效。

```
// Calculate ActionBar height
TypedValue tv = new TypedValue();
if (getTheme().resolveAttribute(android.R.attr.actionBarSize, tv, true))
{
    int actionBarHeight = TypedValue.complexToDimensionPixelSize(tv.data,getResources().getDisplayMetrics());
} 
```

**科特林**：

```
val tv = TypedValue()
if (requireActivity().theme.resolveAttribute(android.R.attr.actionBarSize, tv, true)) {
    val actionBarHeight = TypedValue.complexToDimensionPixelSize(tv.data, resources.displayMetrics)
} 
```

* * *

## 回答 #2

> 赞同：156
> 
> 时间：2014-02-17T19:54:37.063

在 XML 中，您应该使用此属性：

```
android:paddingTop="?android:attr/actionBarSize" 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2014-01-05T13:18:40.173

好的，我在谷歌上搜索了好几次，所以我认为不仅对 Sherlock 进行描述，对 appcompat 也进行描述会很好：

**使用 appCompat 的操作栏高度**

与@Anthony 描述非常相似，您可以使用以下代码找到它（我刚刚更改了资源 ID）：

```
TypedValue tv = new TypedValue();

if (getActivity().getTheme().resolveAttribute(R.attr.actionBarSize, tv, true))
{
    int actionBarHeight = TypedValue.complexToDimensionPixelSize(tv.data,getResources().getDisplayMetrics());
} 
```

**预三明治问题**

我需要操作栏高度，因为在 ICE_CREAM_SANDWITCH 之前的设备上，我的视图与操作栏重叠。我尝试设置 android:layout_marginTop="?android:attr/actionBarSize", android:layout_marginTop="?attr/actionBarSize"，将重叠设置为视图/操作栏，甚至使用自定义主题固定操作栏高度，但没有任何效果。这就是它的样子：

![重叠问题](../Images/567e493ef0a5d2ab3f465a66d3ffb4b9.png)

不幸的是，我发现使用上述方法我只能得到一半的高度（我假设选项栏没有到位）所以要完全解决这个问题，我需要将操作栏高度**加倍**，一切看起来都很好：

![重叠固定](../Images/080562a7fdbcde976a2d077446984125.png)

如果有人知道更好的解决方案（比将 actionBarHeight 加倍），我会很高兴告诉我，因为我来自 iOS 开发，并且我发现大多数 Android 视图的东西都非常令人困惑 :)

问候，

历史

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2013-03-18T12:23:48.210

@Anthony 答案适用于支持的设备以及必须使用`ActionBar`仅支持以下方法的设备`Sherlock Action Bar`

```
 TypedValue tv = new TypedValue();
    if (getTheme().resolveAttribute(android.R.attr.actionBarSize, tv, true))
        actionBarHeight = TypedValue.complexToDimensionPixelSize(tv.data,getResources().getDisplayMetrics());

    if(actionBarHeight ==0 && getTheme().resolveAttribute(com.actionbarsherlock.R.attr.actionBarSize, tv, true)){
            actionBarHeight = TypedValue.complexToDimensionPixelSize(tv.data,getResources().getDisplayMetrics());
    }

   //OR as stated by @Marina.Eariel
   TypedValue tv = new TypedValue();
   if(Build.VERSION.SDK_INT>=Build.VERSION_CODES.HONEYCOMB){
      if (getTheme().resolveAttribute(android.R.attr.actionBarSize, tv, true))
        actionBarHeight = TypedValue.complexToDimensionPixelSize(tv.data,getResources().getDisplayMetrics());
   }else if(getTheme().resolveAttribute(com.actionbarsherlock.R.attr.actionBarSize, tv, true){
        actionBarHeight = TypedValue.complexToDimensionPixelSize(tv.data,getResources().getDisplayMetrics());
   } 
```

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2013-08-25T09:59:12.287

我认为最安全的方法是：

```
private int getActionBarHeight() {
    int actionBarHeight = getSupportActionBar().getHeight();
    if (actionBarHeight != 0)
        return actionBarHeight;
    final TypedValue tv = new TypedValue();
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
        if (getTheme().resolveAttribute(android.R.attr.actionBarSize, tv, true))
            actionBarHeight = TypedValue.complexToDimensionPixelSize(tv.data, getResources().getDisplayMetrics());
    } else if (getTheme().resolveAttribute(com.actionbarsherlock.R.attr.actionBarSize, tv, true))
        actionBarHeight = TypedValue.complexToDimensionPixelSize(tv.data, getResources().getDisplayMetrics());
    return actionBarHeight;
} 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-09-06T16:01:22.740

要设置高度，`ActionBar`您可以像这样创建新`Theme`的：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>   
    <style name="Theme.FixedSize" parent="Theme.Sherlock.Light.DarkActionBar">
        <item name="actionBarSize">48dip</item>
        <item name="android:actionBarSize">48dip</item> 
    </style> 
 </resources> 
```

并将其设置`Theme`为您的`Activity`：

```
android:theme="@style/Theme.FixedSize" 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2017-07-21T16:40:54.967

如果您使用工具栏作为操作栏，

```
Toolbar toolbar = (Toolbar) findViewById(R.id.toolbar);
setSupportActionBar(toolbar); 
```

然后只需使用工具栏的 layout_height 。

```
int actionBarHeight = toolbar.getLayoutParams().height; 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2014-07-12T22:10:22.947

爪哇：

```
 int actionBarHeight;
    int[] abSzAttr;
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
        abSzAttr = new int[] { android.R.attr.actionBarSize };
    } else {
        abSzAttr = new int[] { R.attr.actionBarSize };
    }
    TypedArray a = obtainStyledAttributes(abSzAttr);
    actionBarHeight = a.getDimensionPixelSize(0, -1); 
```

xml:

```
 ?attr/actionBarSize 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2015-04-16T07:08:11.813

如果您使用的是 Xamarin/C#，这是您要查找的代码：

```
var styledAttributes = Context.Theme.ObtainStyledAttributes(new[] { Android.Resource.Attribute.ActionBarSize });
var actionBarSize = (int)styledAttributes.GetDimension(0, 0);
styledAttributes.Recycle(); 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2016-01-18T06:59:43.317

您可以使用此函数来获取操作栏的高度。

```
public int getActionBarHeight() {
    final TypedArray ta = getContext().getTheme().obtainStyledAttributes(
            new int[] {android.R.attr.actionBarSize});
    int actionBarHeight = (int) ta.getDimension(0, 0);
    return actionBarHeight;
} 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2018-07-10T06:08:14.530

满足最受欢迎答案的现成方法：

```
public static int getActionBarHeight(
  Activity activity) {

  int actionBarHeight = 0;
  TypedValue typedValue = new TypedValue();

  try {

    if (activity
      .getTheme()
      .resolveAttribute(
        android.R.attr.actionBarSize,
        typedValue,
        true)) {

      actionBarHeight =
        TypedValue.complexToDimensionPixelSize(
          typedValue.data,
          activity
            .getResources()
            .getDisplayMetrics());
    }

  } catch (Exception ignore) {
  }

  return actionBarHeight;
} 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2019-08-26T17:00:28.717

这是我使用的 Kotlin 的更新版本，假设手机高于 Honeycomb：

```
val actionBarHeight = with(TypedValue().also {context.theme.resolveAttribute(android.R.attr.actionBarSize, it, true)}) {
            TypedValue.complexToDimensionPixelSize(this.data, resources.displayMetrics)
        } 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2014-06-14T19:01:05.480

这种辅助方法应该对某人派上用场。例子：`int actionBarSize = getThemeAttributeDimensionSize(this, android.R.attr.actionBarSize);`

```
public static int getThemeAttributeDimensionSize(Context context, int attr)
{
    TypedArray a = null;
    try{
        a = context.getTheme().obtainStyledAttributes(new int[] { attr });
        return a.getDimensionPixelSize(0, 0);
    }finally{
        if(a != null){
            a.recycle();
        }
    }
} 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2015-01-15T18:55:28.830

你只需要添加这个。

```
public int getActionBarHeight() {
        int height;

        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
            height = getActivity().getActionBar().getHeight();
        } else {
            height = ((ActionBarActivity) getActivity()).getSupportActionBar().getHeight();

        }
        return height;
    } 
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2015-04-22T12:16:51.267

我找到了一种更通用的方法来发现它：

```
 int[] location = new int[2];
  mainView.getLocationOnScreen(location);
  int toolbarHeight = location[1]; 
```

其中“ **mainView** ”是布局的根视图。

这个想法基本上是获取**mainView**的 Y 位置，因为它设置在 ActionBar（或工具栏）的正下方。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2016-10-06T09:30:06.407

操作栏高度根据应用的主题而有所不同。如果您使用的是**AppCompatActivity**，则在大多数情况下，高度将与正常 Activity 不同。

如果你使用**AppCompatActivity**你应该使用 R.attr.actionBarSize 而不是 android.R.attr.actionBarSize

```
public static int getActionBarHeight(Activity activity) {
        TypedValue typedValue = new TypedValue();

        int attributeResourceId = android.R.attr.actionBarSize;
        if (activity instanceof AppCompatActivity) {
            attributeResourceId = R.attr.actionBarSize;
        }

        if (activity.getTheme().resolveAttribute(attributeResourceId, typedValue, true)) {
            return TypedValue.complexToDimensionPixelSize(typedValue.data, activity.getResources().getDisplayMetrics());
        }

        return (int) Math.floor(activity.getResources()
                .getDimension(R.dimen.my_default_value));
    } 
```

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2018-02-20T10:50:39.530

在 xml 中，您可以使用 ?attr/actionBarSize，但如果您需要在 Java 中访问该值，则需要使用以下代码：

```
public int getActionBarHeight() {
        int actionBarHeight = 0;
        TypedValue tv = new TypedValue();
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
            if (getTheme().resolveAttribute(android.R.attr.actionBarSize, tv,
                    true))
                actionBarHeight = TypedValue.complexToDimensionPixelSize(
                        tv.data, getResources().getDisplayMetrics());
        } else {
            actionBarHeight = TypedValue.complexToDimensionPixelSize(tv.data,
                    getResources().getDisplayMetrics());
        }
        return actionBarHeight;
    } 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2016-07-04T04:35:11.470

```
The action bar now enhanced to app bar.So you have to add conditional check for getting height of action bar.

if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
   height = getActivity().getActionBar().getHeight();
 } else {
  height = ((ActionBarActivity) getActivity()).getSupportActionBar().getHeight();
} 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2013-10-26T11:59:59.037

查找操作栏高度的一种简单方法是使用 Activity`onPrepareOptionMenu`方法。

```
@Override
public boolean onPrepareOptionsMenu(Menu menu) {
           ....
           int actionBarHeight = getActionBar().getHeight());
           .....
    } 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2017-07-26T14:03:58.793

在 javafx（使用 Gluon）中，高度是在运行时设置的或类似的。虽然能够像平常一样获得宽度......

`double width = appBar.getWidth();`

您必须创建一个侦听器：

`GluonApplication application = this;`

```
application.getAppBar().heightProperty().addListener(new ChangeListener(){
    @Override
    public void changed(ObservableValue observable, Object oldValue, Object newValue) {
        // Take most recent value given here
        application.getAppBar.heightProperty.get()
    }
}); 
```

...并取其更改为的最新值。获得高度。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2017-08-10T08:47:41.140

在尝试了所有没有成功的方法后，我偶然发现了一种获得操作栏默认高度的实用且非常简单的方法。

仅在 API 25 和 24 中测试

C＃

```
Resources.GetDimensionPixelSize(Resource.Dimension.abc_action_bar_default_height_material); 
```

爪哇

```
getResources().getDimensionPixelSize(R.dimen.abc_action_bar_default_height_material); 
```

# java - Gradle 为 Java 插件提供的依赖项

> ID：12301513
> 
> 赞同：12
> 
> 时间：2012-09-06T13:45:13.747
> 
> 标签：java, gradle

我正在尝试编译几个 WAR 文件，所有这些文件都依赖于一个通用的 JAR 模块。然而，在我的 Gradle 构建中，我似乎无法获得类似“已提供”的依赖项来使用 Java 插件。

我的编译看起来像这样：

```
apply plugin: 'java'
configurations{
    providedCompile
}

dependencies {
    compile module("org.springframework.amqp:spring-amqp:${springAmqpVersion}")
    compile module("org.slf4j:slf4j-api:${slf4jVersion}")
    compile module("org.slf4j:slf4j-ext:${slf4jVersion}")

    providedCompile "javax.servlet:servlet-api:${servletApiVersion}"

    runtime module("org.slf4j:jcl-over-slf4j:${slf4jVersion}")
    runtime module("org.slf4j:jul-to-slf4j:${slf4jVersion}")
    runtime module("org.slf4j:log4j-over-slf4j:${slf4jVersion}")

    sourceArchives module("org.springframework.amqp:spring-amqp:${springAmqpVersion}:sources")
    sourceArchives module("javax.servlet:servlet-api:${servletApiVersion}:sources")
}

sourceSets {
    main { compileClasspath += configurations.providedCompile }
} 
```

但是，最后一点是异常的地方。我曾尝试在运行时依赖项扩展它之后将 servlet-api（由 Tomcat 提供）添加到配置中，或者只是将其作为编译模块放入，然后稍后将其从运行时依赖项中删除。

我尝试了几种不同的方式来修改依赖项，我最接近的结果是：

```
newRuntime = configurations.runtime.minus(configurations.providedCompile)
configurations.runtime = newRuntime 
```

然而，最后一点将生成具有适当依赖关系的变量*newRuntime*，但是当我尝试将变量重新分配回运行时配置时，它会引发“找不到属性异常”

我在 Gradle 的错误跟踪中发现了很多关于这个确切问题的讨论：[Gradle-784](http://issues.gradle.org/browse/GRADLE-784)

然而，主要的线索来自 Spring，他使用 Maven 和他们的 gradle 构建，我不熟悉。

我在 SO 上找到的最有希望的链接，但不幸的是，我无法让这些示例也能正常工作：[SO](https://stackoverflow.com/questions/10405970/how-do-i-define-a-compile-time-only-classpath-in-gradle) 为 Stack Overflow 问题提供了注释问题，该行显示出最有希望的行：

```
//Include provided for compilation
sourceSets.main.compileClasspath += configurations.provided 
```

此行不会像其他尝试一样给出错误，但是似乎providedCompile（提供的我的版本）依赖项实际上并未放在编译类路径中，因为尝试编译时出现类路径错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T13:52:59.130

我不是 100% 关注您的消息，但提供编译只允许用于“战争”插件。

```
apply plugin: 'war'

dependencies {
  // others go here
  providedCompile "javax.servlet:javax.servlet-api:${servletVersion}"
} 
```

在“战争”步骤期间，不包括 servlet jar。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-06T15:59:34.647

您已经添加了一个`providedCompile`配置，但您没有对它做任何事情。因此它不会出现在任何类路径上。要将配置放在主编译类路径上，您可以执行以下操作：

```
sourceSets.main.compileClasspath += configurations.providedCompile 
```

同样，将其放在测试编译类路径中：

```
sourceSets.test.compileClasspath += configurations.providedCompile 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-23T15:30:35.023

您可以在“jar”模块中使用**编译**范围，并在“war”模块中使用**providedCompile 。**

War 的**providedCompile**范围将覆盖 jar 的**编译**范围。

# android - 从服务启动活动总是打开 MainActivity

> ID：12301514
> 
> 赞同：3
> 
> 时间：2012-09-06T13:45:16.837
> 
> 标签：android

当我在收到 GCM 消息后启动 Activity 时，它会在所需的 Activity 旁边启动，MainActivity 也会启动。问题是，我想将不想要的 Activity (DialogActivity) 显示为 Dialog-Box-Style Activity，所以它的背景是透明的。

这就是我开始活动的方式：

```
@Override
protected void onMessage(Context arg0, Intent arg1) {
  Log.d("GCM", "RECIEVED A MESSAGE");
  generateNotification(arg0, arg1.getStringExtra("message"));
  Intent i = new Intent();
    i.setClass(this, DialogActivity.class);
    i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    startActivity(i); 
   } 
```

这是styles.xml 中的主题

```
<style name="Theme.Transparent" parent="android:Theme">
<item name="android:windowIsTranslucent">true</item>
<item name="android:windowBackground">@android:color/transparent</item>
<item name="android:windowContentOverlay">@null</item>
<item name="android:windowNoTitle">true</item>
<item name="android:windowIsFloating">true</item>
<item name="android:backgroundDimEnabled">false</item> 
```

因此，透明的 Activity 位于 MainActivity 之上，这是我想避免的。它应该只显示 DialogActivity。有谁知道帮助？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T13:55:13.233

我已经解决了。对于将来遇到问题的任何人：将 FLAG_ACTIVITY_MULTIPLE_TASK 标志添加到 Intent

```
Intent i = new Intent();
i.setClass(this, DialogActivity.class);
i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK|Intent.FLAG_ACTIVITY_MULTIPLE_TASK);
startActivity(i); 
```

根据[Android文档](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_NEW_TASK)

# razorengine - RazorEngine 内存使用情况

> ID：12301515
> 
> 赞同：9
> 
> 时间：2012-09-06T13:45:18.313
> 
> 标签：razorengine

我创建了一个 Windows 服务来构建和发送电子邮件。我正在使用[Razor 引擎](https://github.com/Antaris/RazorEngine)来解析电子邮件模板。我正在使用动态 ExpandoObject 来创建模型。

我的问题是当每封电子邮件被创建和发送时，内存在增加，但它从未被释放。我已经使用 Ants Memory profiler 分析了该服务（我以前没有使用过），但它显示了以下结果：

**使用剃须刀引擎**

使用 Razor.Parse(text,model) 解析 200 封电子邮件

> 第 1 代：12.9kb
> 
> 第 2 代：**15.88mb**
> 
> 大对象堆：290.9kb
> 
> 分配给 .NET 的未使用内存：3.375mb
> 
> 非托管：69.51mb
> 
> 内存碎片总数：197

**没有剃须刀引擎**

返回 200 封电子邮件未解析的文本。

> 第 1 代：13.87kb
> 
> 第 2 代：3.798mb
> 
> 大对象堆：95.58kb
> 
> 分配给 .NET 的未使用内存：4.583mb
> 
> 非托管：44.58mb
> 
> 内存碎片总数：7

Razor 最大的第 2 代实例是：

System.Reflection.Emit __FixUpData[] - 2,447,640 个活动字节，3,138 个实例

有谁知道为什么这些对象没有被释放并且第 2 代正在增长？每次我想解析模板时，有没有办法拥有一个新的 RazorEngine 实例，当它完成时，它不会被引用，而是会进入 GC。

每次解析模板时，我都尝试创建模板服务的新实例，但这并没有什么不同

```
using (ITemplateService templateService = new TemplateService())
{
     result = templateService.Parse<ExpandoObject>(text, model);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-26T18:03:32.583

老问题，但要激活模板缓存，您必须向 Parse 方法提供“缓存”参数（可以/应该是模板的路径）：

```
return RazorViewService.Parse(File.ReadAllText(path), model, null, cache); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T13:47:05.323

每次解析模板时，RazorEngine 都会*编译内存中的程序集*。
那可能会变得昂贵。

您应该尽可能地重复使用您的模板。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-08T01:33:00.437

如果您使用相同的模板重复调用 RazorEngine.Compile 一次，然后 Razor.Run 之后确保模板只编译一次。

此外，我相信在构建中启用 DEBUG 时，RazorEngine 的内存似乎会泄漏内存。确保您的生产代码是使用 Release 配置文件构建的，即没有 DEBUG 编译器常量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T23:18:20.070

编译模板时，创建的动态程序集会加载到当前的 appdomain 中。没有工具可以卸载它们，因此当您编译更多模板时，内存会不断增长。

您可以使用 RazorEngine 3.x 中的 IsolatedTemplateService 来解决此问题。它所做的是将编译后的模板加载到新的应用程序域中。当该 appdomain 被垃圾回收时，加载到该 appdomain 中的模板程序集也会被回收。但是有一些限制——例如无法使用动态模型（Expando 对象）或匿名模型。该模型还需要可序列化。

从 RazorEngine 的作者那里看看这个：[http ://www.fidelitydesign.net/?p=473](http://www.fidelitydesign.net/?p=473)

# file-io - 谁在 SD 卡读取期间唤醒 kthreadd 守护进程？

> ID：12301525
> 
> 赞同：1
> 
> 时间：2012-09-06T13:45:49.780
> 
> 标签：file-io, filesystems, linux-kernel, usb, linux-device-driver

当使用 vfs_read 从 SD 卡读取数据时，我想知道是谁唤醒了 kthread 守护进程。根据代码流，kthreadd 将唤醒 mmcqd (mmc_queue_thread)，它将处理对 SD 驱动程序的读/写请求。

我在这里面临的问题是，虽然 USB 大容量存储驱动程序调用了对 SD 卡的 vfs_read，但读取不会继续到 mmc_queue_thread。这会导致 PC 上显示 SD 卡的旧内容。

这是从 sdhci_send_command() 生成的 vfs_read 之后的内核堆栈。------------[ 剪在这里 ]------------ 警告：在 /vobs/iandroid/src/kernel/drivers/mmc/host/mx_sdhci.c： 495 sdhci_send_command+0x120/0x758() 模块链接在：g_mot_android mxc91341_oh_udc sipcttydrv aplogger coredump bploader sipcdrv mu_drv [] (dump_stack+0x0/0x14) from [] (warn_slowpath+0x68/0x84)

```
[<c009cd3c>] (warn_slowpath+0x0/0x84) from [<c0249000>] (sdhci_send_command+0x120/0x758)
 r3:00000033 r2:00000000
 r7:c6605f04 r6:c6605f5c r5:c65305c0 r4:c0409510

[<c0248ee0>] (sdhci_send_command+0x0/0x758) from [<c0249a98>] (sdhci_request+0x188/0x1bc)

[<c0249910>] (sdhci_request+0x0/0x1bc) from [<c0240834>] (mmc_wait_for_req+0x110/0x128)
 r8:c656f870 r7:c6605dc8 r6:00000000 r5:c6530400 r4:c6605ef0

[<c0240724>] (mmc_wait_for_req+0x0/0x128) from [<c02479f8>] (mmc_blk_issue_rq+0x1f4/0x7b0)
 r7:c642ae00 r6:00000000 r5:c64daeac r4:c64daea0

[<c0247804>] (mmc_blk_issue_rq+0x0/0x7b0) from [<c0248464>] (mmc_queue_thread+0x134/0x154)

[<c0248330>] (mmc_queue_thread+0x0/0x154) from [<c00b2e88>] (kthread+0x54/0x80)
 r8:00000000 r7:00000000 r6:00000000 r5:c0248330 r4:fffffffc

[<c00b2e34>] (kthread+0x0/0x80) from [<c009f3a8>] (do_exit+0x0/0x738)
 r5:00000000 r4:00000000
---[ end trace 24b57c573e7a44e3 ]--- 
```

# php - 使用 PHP 解析 xml 文档

> ID：12301527
> 
> 赞同：0
> 
> 时间：2012-09-06T13:45:52.390
> 
> 标签：php, xml, dom

我知道这个问题以前被问过很多次，但仍然找不到我一直在寻找使用 php DOMDocument 函数解析 xml 文档的预期结果。

最初，我的名为“local.xml”的 xml 文档包含以下脚本

```
<?xml version="1.0" encoding="utf-8"?>
<config>
    <global>
        <host><![CDATA[name123]]></host>
        <username><![CDATA[root45]]></username> 
    </global>
</config> 
```

我想把“ `<host><![CDATA[name123]]></host>`”改成“ `<host><![CDATA[name456]]></host>`”

我有 php 代码可以更改标签内的值。这是php代码

```
<?php
$doc = new DOMDocument();
$doc->load('local.xml');
$config = $doc->getElementsByTagName( "global" );
foreach( $config as $global )
{

    $hosts=$global->getElementsByTagName( "host" );
    $usernames=$global->getElementsByTagName( "username" );
    $a = "<![CDATA[name456]]>";
    $hosts1=$hosts->item(0)->nodeValue=$a;
}
$doc->save('local.xml');
?> 
```

当我执行上述代码时，xml文件中的输出为

```
<?xml version="1.0" encoding="utf-8"?>
<config>
    <global>
        <host>&lt;![CDATA[name456]]&gt;</host>
        <username><![CDATA[root45]]></username> 
    </global>
</config> 
```

如何在 xml 文档中`"&lt;" to "<"`进行转换？`"&gt;" to ">"`

我已经尝试过`$a = htmlspecialchars("<![CDATA[name456]]>");`，`$a = html_entity_decode("<![CDATA[name456]]>");`但它仍然提供与上面相同的输出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T13:48:45.713

使用[DOMDocument::createCDATASection](http://php.net/manual/en/domdocument.createcdatasection.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T11:08:51.343

最后经过几个小时的跟踪和错误，我设法解决了它。如果 Daniel Sloof 没有给出提示，我的代码将毫无用处。谢谢丹尼尔斯洛夫

这是最终代码

```
<?php
$doc = new DOMDocument();
$doc->load('local.xml');
$config = $doc->getElementsByTagName( "global" );
foreach( $config as $global )
{
    $hosts=$global->getElementsByTagName( "host" );
    $oldcdata=$hosts->item(0)->nodeValue="";
    $newcdata=$doc->createCDATASection("name456");
    $hosts1=$hosts->item(0)->appendChild($newcdata);
}
$doc->save('local.xml');
?> 
```

通过向其添加空值`$oldcdata`将清空`<host><![CDATA[name123]]></host>`标签内的值，这将`<host></host>`在 xml 文件中变为

`$newcdata`现在我们向它添加一个新值，然后`<host></host>`使用 appendChild($newcdata) 将其追加，它将变为`<host><![CDATA[name456]]></host>`

# javascript - 日期选择器仅适用于第一行

> ID：12301529
> 
> 赞同：1
> 
> 时间：2012-09-06T13:45:53.700
> 
> 标签：javascript, asp.net-mvc-3, html-table, datepicker

我对日期选择器有一个奇怪的问题。他只在动态表的第一行上工作。

```
 $(document).ready(function () {
        $(".Data1").datepicker({
            showOn: "button",
            buttonImage: "/calendar.png",
            buttonImageOnly: true,
            changeMonth: true,
            changeYear: true

        });
    }); 
```

这是我用于创建新行的 Javascript：

```
 function addRow(tableID) {
            var table = document.getElementById(tableID);
            var rowCount = table.rows.length;
            var row = table.insertRow(rowCount);
            var colCount = table.rows[0].cells.length;
            for (var i = 0; i < colCount; i++) {
                var newcell = row.insertCell(i);
                newcell.innerHTML = table.rows[1].cells[i].innerHTML;
                newcell.className = "clastest";
                if (i == 3)  {
                                  newcell.getElementsByTagName("input")[0].id="StartD"+rowCount;
                              }
                              if (i == 4) {
                                  newcell.getElementsByTagName("input")[0].id = "EndD" + rowCount;
                              }
                              if (i == 5)
                              {
                                  newcell.getElementsByTagName("input")[0].id =rowCount;
                              }

            }
        } 
```

这是HTML

```
 <td>
                @Html.TextBox("Pozition", poz, new { @style = "width:50px;", @id = "Pozition" })
            </td>
            <td>
                @Html.TextArea("Description", des, new { @style = "width:250px; min-height:50px;", @id = "Description" })
            </td>
            <td>
                @Html.TextBox("StartDate", di, new { @class = "Data1", @id = "StartD" })
            </td>
            <td>
                @Html.TextBox("EndDate", de, new { @class = "Data1", @id = "EndD" })
            </td> 
```

任何想法为什么它只适用于第一行而不是全部？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T13:54:24.333

问题是您没有将事件添加到新创建的元素中，当您添加 datepicker 函数时仅适用于第一行，因为它是唯一在 dom 准备好时创建的，您需要再次添加事件每次添加新行时。

您有 2 个选项：

1.  做他们在这里解释什么是最佳的： [动态创建元素上的事件绑定？](https://stackoverflow.com/questions/203198/jquery-event-binding-on-dynamically-created-elements)
2.  或者将 datepicker 代码放在一个函数中（不是最佳的）：

> ```
> function addDatePicker(){
>       $(".datepicker").datepicker({
>         showOn: "button",
>         buttonImage: "/calendar.png",
>         buttonImageOnly: true,
>         changeMonth: true,
>         changeYear: true
>       });
> } 
> ```

然后在函数`addDatePicker()`末尾添加`addRow()`

# regex - 需要正则表达式来匹配动态 url 以在 Google Analytics 中设置目标

> ID：12301531
> 
> 赞同：0
> 
> 时间：2012-09-06T13:45:58.047
> 
> 标签：regex, google-analytics

我需要匹配完整的动态 URL 以设置为 Google Analytics 中的目标。我不知道该怎么做。我在谷歌上搜索过没有运气。

所以这就是这种情况。

当按下**回车**按钮时，目标 URL 会因所选产品而异。

**例子：**

> [http://www.somesite.com/footwear/mens/hiking-boots/atmosphere-boot-p7023.aspx?cl=BLACK](http://www.somesite.com/footwear/mens/hiking-boots/atmosphere-boot-p7023.aspx?cl=BLACK)
> 
> [http://www.somesite.com/womens/clothing/waterproof-jackets/canyon-womens-long-jacket-p7372.aspx?cl=KHAKI](http://www.somesite.com/womens/clothing/waterproof-jackets/canyon-womens-long-jacket-p7372.aspx?cl=KHAKI)
> 
> [http://www.somesite.com/travel/accessories/mosquito-nets/mosquito-net-double-p5549.aspx?cl=WHITE](http://www.somesite.com/travel/accessories/mosquito-nets/mosquito-net-double-p5549.aspx?cl=WHITE)
> 
> [http://www.somesite.com/ski/accessories/ski-socks-tubes/ski-socks-p2348.aspx?cl=BLACK](http://www.somesite.com/ski/accessories/ski-socks-tubes/ski-socks-p2348.aspx?cl=BLACK)

如果您仔细查看 URL，您可以看到包含三个部分：

> [http://www.somesite.com/](http://www.somesite.com/) { 第 1 部分 }/{ 第 2 部分 }/{ 第 3 部分 }/{ 页面 URL }/{ 查询字符串参数}

因此，如果我手动将页面 URL 部分更改`p2348`为`p1234`，网站将重定向到正确的页面：

> [http://www.somesite.com/kids/clothing/padded-down-jackets/khuno-kids-padded-jacket-p1234.aspx?cl=BLUE](http://www.somesite.com/kids/clothing/padded-down-jackets/khuno-kids-padded-jacket-p1234.aspx?cl=BLUE)

我不知道该怎么做。请帮助正则表达式匹配这 4 位数字，而 p 仍然存在，或者帮助我匹配任何文本/数字和 4 位数字产品代码的这三个部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T14:32:55.490

你应该试试这个正则表达式。它是最简单的，也是最实用的。

```
p\d{4} 
```

这将返回您的字符串，如`p7634`, `p7351`, `p0872`。

如果您不能完全确定会有 4 位数字，请使用以下正则表达式。

```
p\d* 
```

这将返回您的字符串，如, ,`p43`和`p9165`其他。`p012``p456897689`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T14:14:57.647

尝试

```
p[0-9][0-9][0-9][0-9]\.aspx 
```

如果 p 后面总是有 4 位数字。

你的尝试

```
 [^p]\d[0-9][0-9] 
```

不起作用，因为`[^p]`匹配除 p 之外的任何内容，并且`\d[0-9][0-9]`仅匹配三位而不是四位。

# java - struts2 从带有数据的超链接调用操作

> ID：12301535
> 
> 赞同：1
> 
> 时间：2012-09-06T13:46:09.450
> 
> 标签：java, jsp, struts2

我有页面显示员工名单，他们的名字。我需要将它们作为超链接和单击员工姓名我需要调用另一个动作说“detailsAction”。此操作将从该数据库中获取有关该员工的数据并在页面中显示相同的数据。如何将与用户单击的超链接关联的员工 ID 发送到我的“detailsAction”？

现在员工名单在我的jsp页面下面完成

```
<s:if test="empList">
 <table>
  <tr>
    <th>Employee Name</th>
   </tr>
  <s:iterator value="empList">
  <tr>
     <td><s:property value="empName" /></td>
  </tr>
  </s:iterator>
</table>
</s:if> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T13:48:55.573

您可以为此使用 Struts 标签：

```
 <s:a href="/whateverAddress" >
        <s:text name="Link text goes here"/>
        <s:param name="param1" value="value1"/>    
    </s:a> 
```

# crystal-reports-xi - Crystal Reports“主报表中的子报表书签”

> ID：12301540
> 
> 赞同：0
> 
> 时间：2012-09-06T13:46:23.293
> 
> 标签：crystal-reports-xi

我有一个使用书签的 Crystal Report（11.5 版）。当报告导出为 pdf 时，它会为“group by”子句的每个分支创建一个书签。这是通过选中“文件->导出->报告导出选项”中的复选框来实现的。

我有一个插入到主报告中的子报告。它具有与主报告不同的“分组依据”模式。我希望子报告中的书签也显示在主报告中。

有没有办法做到这一点？我想要完成的是输出 pdf 中不同级别的书签。例如，我的主要“分组依据”有 5 个字段，所以我得到 5 个级别的书签。在某些情况下，我只需要 2 个级别的书签，这就是为什么我将其从主报告中拉出并放入子报告中，希望我可以获得不同级别的书签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T20:05:30.283

到目前为止，我发现最好的情况是合并两个 pdf 文件。每个都有不同的分组。这并不理想，但它有效。

# cloud - 适用于 Android 的 Google Cloud Messaging 发送消息

> ID：12301552
> 
> 赞同：0
> 
> 时间：2012-09-06T13:46:49.787
> 
> 标签：cloud, message, google-cloud-messaging

我尝试使用 GCM 向 android 发送消息。但是我有一个问题，例如第一条、第二条和第三条消息传递到 android，而下一条消息没有传递。在 cca X 分钟后，再次传递了一些消息，然后没有传递。有调用发送通知到 GCM 服务器的 URL。Android 设备仍然连接到互联网（不睡眠，不显示关闭） 我有一个好的参数吗？

[https://android.googleapis.com/gcm/send](https://android.googleapis.com/gcm/send)

和参数：

```
String.Format("collapse_key={4}&time_to_live={3}&delay_while_idle=0&data.message={0}&data.time={1}&registration_id={2}", value, System.DateTime.Now, deviceId, timeToLive, DateTime.Now.Ticks); 
```

我收到来自服务器的响应：id=0:123354....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T13:07:21.740

不保证交货顺序。 从我的角度来看，不能保证可以使用新版本的[代码，我认为如果它们被快速发送，谷歌可能会阻止这些消息。](http://application.developer.android.com/google/gcm/adv.html)像 2-3 分钟内的 10 条消息。

# ios - 通过外观为 UIBarButtonItem 设置背景图像不适用于其他 UIControlStates

> ID：12301555
> 
> 赞同：1
> 
> 时间：2012-09-06T13:46:54.873
> 
> 标签：ios, ios5, customization, uibarbuttonitem, uiappearance

我正在尝试使用外观方法（> iOS 5.0）自定义 UIBarButtonItem 。它适用于 UIControlStateNormal，但不适用于突出显示或禁用。查看图片

![好的默认状态，注意右边的禁用状态](../Images/e33b438f2382a5dabf6cb31fa582bb62.png)

![突出显示的状态也不起作用](../Images/7aa32a5f2e8b8c304eb05681f93261fa.png)

这是我用来设置这些的代码：

```
 // now configure the UIBarButtonItems
    UIImage *buttonBGInactive = [[UIImage imageNamed:@"button-navbar-30-inactive.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 15, 0, 15)];
    UIImage *buttonBGActive = [[UIImage imageNamed:@"button-navbar-30-pressed.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 15, 0, 15)];

    [[UIBarButtonItem appearanceWhenContainedIn:[MFMailComposeViewController class], nil] setBackgroundImage: buttonBGInactive forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
    [[UIBarButtonItem appearanceWhenContainedIn:[MFMailComposeViewController class], nil] setBackgroundImage: buttonBGActive forState:UIControlStateHighlighted barMetrics:UIBarMetricsDefault]; 
```

有任何想法吗？图片本身是 30x30px，我不需要横向模式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T13:59:32.377

我找到了问题的解决方案。我的图像是 30x30 像素，我将可调整大小的端盖设置为

UIEdgeInsetsMake(0, 15, 0, 15)

通过将那些 15 设置为 14，问题就消失了。所以最好不要让端盖正好是图像宽度的一半。

# dynamics-crm - CRM 2011 - 来自案例默认值的新约会 要求参加者到帐户

> ID：12301556
> 
> 赞同：2
> 
> 时间：2012-09-06T13:46:59.567
> 
> 标签：dynamics-crm, dynamics-crm-2011

当我从已保存事件的上下文中创建新约会时，它会将“必需的与会者”字段默认为事件帐户。我希望它默认为空白或当前用户。（为了创建约会，我使用事件上的导航窗格查看相关活动，然后使用功能区按钮添加新活动。）

我在哪里可以控制这种行为？

我尝试查看实体映射，但似乎“RequiredAttendees”字段没有“可映射”关系。（我按照这里的说明进行了检查：[http](http://rc.crm.dynamics.com/rc/2011/en-us/on-prem/5.0/help/ui_cust_Mapping.htm) ://rc.crm.dynamics.com/rc/2011/en-us/on-prem/5.0/help/ui_cust_Mapping.htm ）我错过了什么还是这是硬编码的CRM主义？

展望未来，我有任何选择来修改它吗？我想我可以在表单加载时执行 javascript，但我希望这可以在 CRM 中进行配置，而无需接触 javascript。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T14:08:40.493

我认为最好的解决方案是使用 onLoad javascript。只需检查约会是从事件表单创建的。（在网址中 - 类型=112）

您可以重写事件表单上的功能区按钮以打开带有 URL 的新窗口

```
http://myCRM/myOrg/main.aspx?etc=4201&extraqs=%3fcontactInfo%3d%26etc%3d4201%26pId%3d%257bB8C55089-26D7-E111-93D4-005056986118%257d%26pName%3dCaseName%26pType%3d112%26pagemode%3diframe%26preloadcache%3d1346939630259&pagetype=entityrecord 
```

所以只排除：

```
partyaddressused%3d%26
partyid%3d%257bA9D02C74-26D7-E111-93D4-05056986118%257d%26partyname%3dAdministrator%2540crm.local%26
partytype%3d2%26 
```

这部分 url 包含与活动方相关的数据（“必填”字段）。

# sharepoint-2010 - Featurereceiver 共享点 2010 xdocument 503

> ID：12301561
> 
> 赞同：0
> 
> 时间：2012-09-06T13:47:11.517
> 
> 标签：sharepoint-2010, linq-to-xml, http-status-code-503

我的问题似乎与权限有关，但我不确定如何解决。

在我的一项功能的 FeatureActivated 事件中，我调用了我为使用 SPWebConfigModification 类管理 webconfig 条目而创建的类。该类读取我已添加到项目中映射的 Layouts 文件夹中的 xml 文件。

当我将 .wsp 部署到我的 Sharepoint 服务器时，一切都安装得很好，但是当 FeatureActivated 事件运行时，它会在尝试访问 xml 文件时引发 503 错误。我正在使用 powershell 脚本远程部署 .wsp，并且我有 powershell 、iisapp 池和 owstimer.exe 都使用相同的域管理用户。

我认为问题是 FeatureActivated 事件代码正在 OWSTIMER.exe 的范围内运行，因此将服务的登录更改为对服务器具有管理访问权限的域用户，以查看是否可以解决问题，但没有不管我得到什么503。

我已经找到了 xml 文件的 URL 并将其粘贴到 IE 中，一旦复制了它，我就可以从服务器上取回 xml 而没有问题。

谁能给我任何想法，以找出为什么 FeatureActivated 事件代码似乎无法访问服务器上的 XML 文件？

下面是从 FeatureActivated 事件调用以读取 xml 的类中的代码。

```
_contentservice = ContentService;

WriteTraceMessage("Getting SPFeatureProperties", TraceSeverity.Medium, 5);

_siteurl = properties.Definition.Properties["SiteUrl"].Value;
_foldername = properties.Definition.Properties["FolderName"].Value;
_filename = properties.Definition.Properties["FileName"].Value;
_sitepath = properties.Definition.Properties["SitePath"].Value;

WriteTraceMessage("Loading xml from layouts for configuration keys", TraceSeverity.Medium, 6);

xdoc = new XDocument();
XmlUrlResolver resolver = new XmlUrlResolver();
XmlReaderSettings settings = new XmlReaderSettings();

StringBuilder sb = new StringBuilder();
                 sb.Append(_siteurl).Append("_layouts").Append("/").Append(_foldername).Append("/").Append(_filename);

WriteTraceMessage("Path to XML: " + sb.ToString(), TraceSeverity.Medium, 7);
WriteTraceMessage("Credentials for xml reader: " + CredentialCache.DefaultCredentials.ToString(), TraceSeverity.Medium, 8);

resolver.Credentials = CredentialCache.DefaultCredentials; //this the issue might be here
settings.XmlResolver = resolver;
xdoc = XDocument.Load(XmlReader.Create(sb.ToString(), settings)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T18:21:58.087

我终于对这个问题进行了抨击，因为我发现在将 -Force 开关添加到 Enable-SPFeature 命令时，在添加解决方案时确实使用了不同的过程来激活该功能，但在更新解决方案时它不起作用。最终，我只是将 XDocument.Load() 更改为使用 TextReader 而不是 URI。部署 WSP 时，xml 文件将始终可用，因为它是包的一部分，因此没有理由使用 IIS 和 webrequest 来加载 xml。

# java - javax.annotation：@Nullable 与 @CheckForNull

> ID：12301570
> 
> 赞同：55
> 
> 时间：2012-09-06T13:47:58.210
> 
> 标签：java, annotations, static-analysis, findbugs

两者有什么区别？两者似乎都意味着该值可能为空，应进行相应处理，即检查是否为空。

**更新：** 上面的两个注释是 JSR-305/FindBugs 的一部分：http: [//findbugs.sourceforge.net/manual/annotations.html](http://findbugs.sourceforge.net/manual/annotations.html)

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-06T14:05:42.543

我认为您添加的链接很清楚：如果您使用`@CheckForNull`并且使用该值的代码不检查`null`，FindBugs 会将其显示为错误。

FindBugs 将忽略`@Nullable`.

> 在实践中，此注释仅对覆盖总体`NonNull`注释有用。

`@CheckForNull`在必须始终检查值的情况下使用。使用可能没问题的`@Nullable`地方。`null`

编辑：目前似乎`@CheckForNull`没有得到很好的支持，所以我建议避免使用它`@NonNull`（另请参阅[我应该使用哪个 @NotNull Java 注释？](https://stackoverflow.com/questions/4963300/which-notnull-java-annotation-should-i-use)）。另一个想法是直接与 FindBugs 开发人员联系，并询问他们对文档中不一致的意见。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-06T14:48:00.880

`@Nonnull`并由`@Nullable`IntelliJ IDEA 正确处理。FindBugs 发现了问题，`@Nonnull`但错过了`@Nullable`和的问题`@CheckForNUll`。IDEA 和 FindBugs 检测到的问题都标有注释。

```
package com.db.icestation;

import javax.annotation.CheckForNull;
import javax.annotation.Nonnull;
import javax.annotation.Nullable;

public class test {

    @Nullable public String nullable() {
        return "";
    }

    @Nonnull public String nonnull() {
        return null; // IDEA, findbugs
    }

    @CheckForNull public String checkForNull() {
        return null;
    }

    public static void main(String[] args) {
        System.out.println(new test().nullable().length()); // IDEA
        System.out.println(new test().nonnull().length());
        System.out.println(new test().checkForNull().length());
    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-20T07:18:54.697

IntelliJ Idea`@javax.annotation.Nullable`默认支持，任何取消引用`@Nullable`参数或返回值的尝试都会导致警告。

@alexander-pavlov，您可以添加`@javax.annotation.CheckForNull`“恒定条件和异常”检查的配置。转到文件->设置->检查->可能的错误->恒定条件和异常->配置注释。

我更喜欢这样做，因为它比他在上面的回答中提到的@lbalazscs`@CheckForNull`具有更明确的含义。`@Nullable`

# vb.net - vb.net 使用单选按钮将文本写入文件

> ID：12301573
> 
> 赞同：-3
> 
> 时间：2012-09-06T13:48:08.420
> 
> 标签：vb.net, text, radio-button

嗨，我想知道如果单击单选按钮，我如何向以下文件 C:test.txt 写入特定的文本字符串，例如“LANDSCAPE”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T13:50:49.063

将文件编写代码添加到单选按钮的选中更改事件中。

```
Private Sub RadioButton1_CheckedChanged(sender As System.Object, e As System.EventArgs) Handles RadioButton1.CheckedChanged
    If RadioButton1.Checked = True Then
        'Write to file
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T14:00:56.493

如果您只是想创建一个只包含文本“LANDSCAPE”的文件，并且如果该文件已经存在，您想用该名称覆盖该文件，那么您需要做的就是：

```
Private Sub RadioButton1_CheckedChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles RadioButton1.CheckedChanged
    If RadioButton1.Checked Then
        File.WriteAllText("C:\test.txt", "LANDSCAPE")
    End If
End Sub 
```

# html - 在ajax数据查找中找不到div元素

> ID：12301576
> 
> 赞同：0
> 
> 时间：2012-09-06T13:48:14.917
> 
> 标签：html, jquery

这是我返回的整个**Ajax 页面**

```
 <!DOCTYPE div PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<div class="CareerAjaxData">Simple Div Content</div> 
```

调用此**Ajax 页面**的**主页**面中的 **jQuery 脚本**是

 ****```
$.ajax({
    type : 'POST',
    url : url,
    data : data,
    datatype : 'html',
    success : function(ajaxdata) {
        var $tabcontent = $(ajaxdata).find('.CareerAjaxData');
        console.log($tabcontent.html());        
    }
}); 
```

但是控制台的输出给出：未定义

我从服务器得到正确的响应。但是我猜js有一些问题。

这里有什么问题..？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:36:46.727

浪费了半天之后..我在[https://stackoverflow.com/a/405700/920271](https://stackoverflow.com/a/405700/920271)找到了答案。

是`doctype`的，这是一个错字……但这不是问题。

使用`filter`而不是`find`帮助我。！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T13:53:36.207

不知道`doctype`你用的是什么类型的。我以前从未见过。我会尝试一个正常的

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
   "http://www.w3.org/TR/html4/strict.dtd"> 
```

至于`jQuery`，试试这个：

```
$('#tabcontent').load('url .CareerAjaxData'); 
```****

# php - 第二个 AJAX 调用返回整个页面而不是预期目标

> ID：12301577
> 
> 赞同：1
> 
> 时间：2012-09-06T13:48:17.023
> 
> 标签：php, jquery, html, ajax

![在此处输入图像描述](../Images/d0a38fcb26daf2fe28e965fd83669bf6.png)所以我有一个简单的 web 应用程序界面，它依靠 AJAX 来构建和控制用户可以在任何时间点看到的设置。把它们想象成子菜单。

```
<script type="text/javascript">
$(document).ready(function(e) {

    $(".option").click(function() {

        var method = $(this).attr("id");
        var target = "";

        switch(method){
            case "optManPpl":
                target = "/controls/location/manage_people.php";
                break;
            case "optManLoc":
                target = "/controls/location/manage_locations.php"
                break;
        }

        $.ajax({
            type: "POST",
            data: "user=0",
            url: target,
            success: function(msg){
                $("#controls").html(msg);
            }
        });

    });
});
</script>

<div id="options">
    <div id="optManPpl" class="option"> Manage People </div>
    <div id="optManLoc" class="option"> Manage Locations </div>
</div>

<div id="controls">
</div> 
```

这个页面显然是从另一个 ajax 调用中调用并显示并加载到屏幕上的。当我第一次单击“optManPpl”或“optManLoc”时，调用非常顺利并返回了预期的结果。但是，当我第二次单击其中任何一个时（任意组合的 2 个调用），将返回整个页面而不是 [target] url。

编辑：我在整个应用程序中“链接”AJAX 调用。我对在 web 应用程序情况下使用 AJAX 比较陌生，所以我不确定这是否是最好的方法，但这是我想出的将用户输入从表单获取到 PHP 中而无需重新提交的方法这页纸。

编辑：附加图像是第二次调用后页面的样子。在 FIRST 调用之后，“controls” div 标签改为填充 4 个其他 div 标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T13:52:59.150

请在 manage_locations.php 文件的最后一行后面加上 exit。

您也可以通过以下方式查看put。

```
$.ajax({
    type: "POST",
    data: "user=0",
    url: target,
    success: function(msg){
    alert(msg); return false;
    $("#controls").html(msg);
    }
}); 
```

在这里，您只会看到特定的输出。以便您可以在警报中找到结果。

# visual-studio - 如何使用 MsDeploy 在网站内部署子应用程序

> ID：12301578
> 
> 赞同：9
> 
> 时间：2012-09-06T13:48:18.970
> 
> 标签：visual-studio, deployment, iis-7, msdeploy, webdeploy

我在 IIS 网站下有一个子应用程序，我可以使用 Visual Studio 中的发布向导部署它，没问题。

但是，我正在从我们的构建服务器自动化我们的部署，所以我更喜欢直接使用 msdeploy.exe。

我可以部署主网站，但尝试部署子应用程序拒绝工作。

这有效（www.mymainwebsite.co.uk 是 IIS 网站）：

> msdeploy.exe -source:package='www.mymainwebsite.co.uk\obj\Test\Package\www.mymainwebsite.co.uk.zip' -dest:auto,computerName='https://testweb1:8172/MsDeploy .axd?site=www.mymainwebsite.co.uk',userName='xxx',password='xxx',authtype='Basic',includeAcls='False' -verb:sync -disableLink:AppPoolExtension -disableLink:ContentExtension - disableLink:CertificateExtension -setParamFile:"www.mymainwebsite.co.uk\obj\Test\Package\www.mymainwebsite.co.uk.SetParameters.xml" -allowUntrustedInfo

这不是（SubApplication 是应用程序路径）：

> msdeploy.exe -source:package='SubApplication\obj\Test\Package\SubApplication.zip' -dest:auto,computerName='https://testweb1:8172/MsDeploy.axd?site=www.mymainwebsite.co.uk / **SubApplication** ',userName='xxx',password='xxx',authtype='Basic',includeAcls='False' -verb:sync -disableLink:AppPoolExtension -disableLink:ContentExtension -disableLink:CertificateExtension -setParamFile:"SubApplication\obj \Test\Package\SubApplication.SetParameters.xml" -allowUntrustedInfo

错误是：

```
Error Code: ERROR_USER_UNAUTHORIZED
More Information: Connected to the remote computer ("testweb1") using the Web Management Service, but could not authorize. Make sure that you are using the correct user name and password, that the site you are connecting to exists, and that the credentials represent a user who has permissions to access the site.  Learn more at: http://go.microsoft.com/fwlink/?LinkId=221672#ERROR_USER_UNAUTHORIZED.
Error: The remote server returned an error: (401) Unauthorized. 
```

正如我所说，这适用于 Visual Studio 发布向导，将 Site/application 属性设置为 www.mymainwebsite.co.uk/SubApplication，所以我知道这不是服务器上的权限问题。

我在 msdeploy 参数中遗漏了什么吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-10T12:52:04.853

我在命令行上使用以下内容来设置 Web 应用程序：

```
-setParam:name="IIS Web Application Name",value="www.mymainwebsite.co.uk/SubApplication" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-06-08T21:16:38.930

为了对主站点的子应用程序进行 Web 部署，请转到 TFS，部署 IIS 应用程序步骤，将覆盖参数更新为类似这样

name="IIS Web 应用程序名称",value="MainSite/SubApplication"

它应该做的伎俩！

# zend-framework - 如何在 Zend Framework 中注销控制器插件

> ID：12301579
> 
> 赞同：0
> 
> 时间：2012-09-06T13:48:19.923
> 
> 标签：zend-framework

如何从控制器操作中取消注册或禁用控制器插件。

```
class IndexController
{
    public function indexAction()
    {
        // disable plugin here
        // do some other stuff
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T13:48:19.923

首先获取前端控制器的实例，然后通过给定名称（类名）获取插件实例，最后调用`unregisterPlugin()`方法。

```
public function disableSomePluign()
{
    $frontController = $this->getFrontController();
    $plugin = $frontController->getPlugin('Some_Plugin');
    $frontController->unregisterPlugin($plugin);
} 
```

# javascript - 我们如何为 鼠标滚轮敏感

> ID：12301588
> 
> 赞同：1
> 
> 时间：2012-09-06T13:48:33.403
> 
> 标签：javascript, jquery, html, scrollbar

我需要创建一个具有自己滚动条的页面区域，就像下图中的 Facebook Messenger 一样。

堆栈溢出在带有大量代码的答案中具有相同的系统，但该滚动条没有样式。

请注意图片，您将在 Messenger DIV 中看到普通滚动条和样式化滚动条。有谁知道该怎么做？

![在此处输入图像描述](../Images/e747e870cf3ec02cfa2565c54717f99d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T13:50:11.163

我想自定义滚动条是用**javascript**实现的，它看起来很漂亮，你不能让浏览器滚动条看起来那么好！

查找我刚刚为您整理的**示例：http:** [//jsfiddle.net/9LHPW/2/](http://jsfiddle.net/9LHPW/2/) - 请注意检查资源选项卡，因为这包括四个外部文件（3x Js 和 1x CSS）

使用 Javascript 和 jQuery 查看此网站以获取更多示例（看起来正是您想要的）：http: [//manos.malihu.gr/tuts/jquery_custom_scrollbar.html](http://manos.malihu.gr/tuts/jquery_custom_scrollbar.html)

[您可以在http://manos.malihu.gr/jquery-custom-content-scroller](http://manos.malihu.gr/jquery-custom-content-scroller)找到插件的主页

以及**如何使用**它部分！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T13:51:27.287

这应该有帮助： http: [//manos.malihu.gr/tuts/jquery_custom_scrollbar.html](http://manos.malihu.gr/tuts/jquery_custom_scrollbar.html)

另一个在这里：[http ://dotroe.com/subpage.html](http://dotroe.com/subpage.html)

这些是您可以在页面上使用的 jquery 插件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T18:40:28.167

使用 j 滚动窗格。很棒，非常可定制，这里有很多演示：http: [//jscrollpane.kelvinluck.com/#examples](http://jscrollpane.kelvinluck.com/#examples)

# asp.net - Crystal Report 转换为 PDF（错误登录数据库失败。（（0x8004100f）））

> ID：12301592
> 
> 赞同：0
> 
> 时间：2012-09-06T13:48:43.153
> 
> 标签：asp.net, vb.net, crystal-reports

在我的应用程序中，我有一些代码可以转换为 PDF。在调试模式下，一切都很好并且可以正常工作，但是当我在服务器上对其进行测试时，我不断登录到数据库失败。我不知道为什么我会收到错误，因为登录名和密码都是 100% 好的。

为发送报告的服务器尝试了 2 种方法

```
SetCrystalReportFilePath(Server.MapPath("~/MemberPages/Report.rpt"))
SetPdfDestinationFilePath(Server.MapPath("~/MemberPages/Report_" & Report & ".pdf"))
SetRecordSelectionFormula("{Report.Report_id} =" & ID)
Transfer()

SetCrystalReportFilePath("C:\inetpub\wwwroot\Werkbon.rpt")
SetPdfDestinationFilePath("C:\inetpub\wwwroot\Werkbon_" & werkbonnr & ".pdf")
SetRecordSelectionFormula("{werkbon.werkbon_id} =" & werkbonnr)
Transfer()

Dim ConInfo As New CrystalDecisions.Shared.TableLogOnInfo
Dim oRDoc As New ReportDocument
Dim expo As New ExportOptions
Dim sRecSelFormula As String
Dim oDfDopt As New DiskFileDestinationOptions
Dim strCrystalReportFilePath As String
Dim strPdfFileDestinationPath As String

Public Function SetCrystalReportFilePath(ByVal CrystalReportFileNameFullPath As String)
    strCrystalReportFilePath = CrystalReportFileNameFullPath
End Function

Public Function SetPdfDestinationFilePath(ByVal pdfFileNameFullPath As String)
    strPdfFileDestinationPath = pdfFileNameFullPath
End Function

Public Function SetRecordSelectionFormula(ByVal recSelFormula As String)
    sRecSelFormula = recSelFormula
End Function

Public Function Transfer()
    oRDoc.Load(strCrystalReportFilePath)
    oRDoc.RecordSelectionFormula = sRecSelFormula
    oDfDopt.DiskFileName = strPdfFileDestinationPath
    expo = oRDoc.ExportOptions
    expo.ExportDestinationType = ExportDestinationType.DiskFile
    expo.ExportFormatType = ExportFormatType.PortableDocFormat
    expo.DestinationOptions = oDfDopt
    oRDoc.SetDatabaseLogon("databasename", "password")
    oRDoc.Export()
End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:01:35.253

Crystal 在交换连接信息时非常特别（尤其是在有子报告时）。多年来，他们并没有真正变得更好，这一直是一个痛处。我分享了一个博客条目，其中包含我创建的扩展方法（在 VB.Net 中），以便轻松加载和交换新连接（通常我使用 ADO 作为报告中的连接）。可以在此链接中找到扩展方法（下面是如何使用它们的示例，如果您从 ASP.NET 使用它，请忽略 System.Diagnostics 行）。希望这可以帮助。

[http://www.blakepell.com/Blog/?p=487](http://www.blakepell.com/Blog/?p=487)

```
 Using rd As New ReportDocument
        rd.Load("C:\Temp\CrystalReports\InternalAccountReport.rpt")
        rd.ApplyNewServer("serverName or DSN", "databaseUsername", "databasePassword")
        rd.ApplyParameters("AccountNumber=038PQRX922;", True)
        rd.ExportToDisk(ExportFormatType.PortableDocFormat, "c:\temp\test.pdf")
        rd.Close()
    End Using

    System.Diagnostics.Process.Start("c:\temp\test.pdf") 
```

# web-services - REST Web 服务：响应状态为 4XX（客户端错误）时可接受的 HTTP 响应内容类型

> ID：12301594
> 
> 赞同：4
> 
> 时间：2012-09-06T13:48:45.933
> 
> 标签：web-services, http, rest, mime-types

如果 HTTP 客户端发出了无效的 HTTP 请求，我无法在 HTTP 规范中找到任何文档来管理是否可以接受生成 HTTP 响应，包括人类可读的错误消息（例如内容类型：文本/纯文本），并指定了一个请求标头，该标头使用接受标头限制可接受的响应内容类型。

想象一个 REST Web 服务客户端向“http://myhost/validpath?illegalRequestParameter=rubbish”发出无效的 GET 请求，并包含请求标头“Accept: application/xml”或“Accept: application/vnd.ms-excel” .

服务器将使用 4XX 系列中的 HTTP 状态代码（在本例中为“400 Bad Request”）进行响应。但是服务如何能够向客户端传达有关错误原因的信息？

我看到以下选项：

1.  在 HTTP 响应内容中创建明文错误消息。设置响应头“内容类型：文本/纯文本”，并在响应内容中包含描述性错误消息。但是，这会打破 HTTP 客户端的“接受”限制。

2.  不要包含 HTTP 响应内容。这显然是有效的，但对于只知道发生“客户端错误”但无法知道原因（并在客户端日志文件中报告原因）的客户端来说不是很有帮助。

3.  尝试将错误消息强制转换为“可接受的”MIME 类型。这是很少可能的。即使可以将错误消息构造为有效的应用程序/xml 类型，它也可能会破坏 Web 服务合同（例如 XML 模式一致性）。

**我的问题是：上述情况是否受现有 HTTP 规范/标准的约束？**

参考：

1.  HTTP 状态码定义：[http ://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)
2.  HTTP 标头字段定义[http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T01:54:28.047

如果接受标头是“应用程序/xml”，那么您应该将错误消息作为 xml 返回。它会破坏客户，但这没关系，客户无论如何都没有得到他们要求的信息。至少客户端能够解析错误消息......

# wix - 如何在基于 WiX 的安装程序中显示将要安装的功能列表？

> ID：12301597
> 
> 赞同：0
> 
> 时间：2012-09-06T13:48:57.670
> 
> 标签：wix, wix3.5

我想显示将在 Windows 安装程序中安装的功能列表。该列表将在用户即将安装产品之前出现。我想知道是否有使用 WiX 执行此操作的标准方法？

我尝试在具有文本控件的“验证就绪”对话框之前创建一个单独的 UI 对话框。此处的目的是在安装功能时显示文本，如果未安装则隐藏该文本。

```
<Control Id="FeatureText" Type="Text" Text="SomeText">
      <Condition Action="show">
        <![CDATA[(&feature="3")]]>
      </Condition>
      <Condition Action="hide">
        <![CDATA[(&feature="2")]]>
      </Condition>
</Control> 
```

这段代码的问题是条件中指定的操作没有被执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:05:40.537

在尝试了很多事情后，我发现：

i- 不需要在数字周围加上引号，并且

ii- 默认情况下可以将控件设置为隐藏。

以下代码现在为我工作

```
<Control Id="FeatureText" Type="Text" Text="SomeText" Hidden="yes">
  <Condition Action="show">
    <![CDATA[(&feature=3)]]>
  </Condition>
</Control> 
```

但我仍然不知道的是，如果这是做我打算做的最好/正确的方法......

# jquery - jQuery没有找到元素

> ID：12301605
> 
> 赞同：4
> 
> 时间：2012-09-06T13:49:27.617
> 
> 标签：jquery, selector

jQuery 没有找到任何元素。`alert($("#testbutton").length);`每次显示 0。

难道我做错了什么？

**我的 JS/jQuery 代码：**

```
(function ($) {
    alert($("#testbutton").length);
}) (jQuery); 
```

**我的 HTML：**

```
<html>
    <body>
        <div id="header">
            <div class="button" id="testbutton">Test</div>
        </div>
    </body>    
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T13:51:34.210

当您的代码运行时，DOM 尚未准备好，因此该元素不存在。你是不是打算这样做（将函数传递给 jQuery 是 jQuery 的快捷方式`$(document).ready(fn)`）：

```
$(function () {
    alert($("#testbutton").length);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T13:53:39.113

如果您使用以下方法在头部编写 jQuery 脚本：

```
(function() {

    ...

})(); 
```

它不起作用，因为它可能会在加载正文页面的内容之前执行脚本。

采用：

```
$(document).ready(function() {

    ...

}); 
```

或将脚本移至页脚。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T13:51:42.513

如您在此处看到的，将其称为准备好的文档：http: [//jsfiddle.net/SwQUH/](http://jsfiddle.net/SwQUH/)

```
$(document).ready(function() {
  alert($("#testbutton").length);
}); 
```

如果您只是这样称呼它，那么 DOM 还没有“准备好”并且 HTML 元素还不存在。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T13:51:48.463

尝试以下

```
<script type="text/javascript"> 
```

首先确保在加载 jquery 时没有错误

在加载 DOM 时发出警报并检查是否一切正常。

# c - WinDBG 扩展 - 断点列表

> ID：12301606
> 
> 赞同：2
> 
> 时间：2012-09-06T13:49:32.077
> 
> 标签：c, windbg, breakpoints

有什么方法可以从 Windows 调试器扩展中获取断点列表？

我使用的是纯 C（我试图避免使用它们提供的 COM 接口，我什至不确定该 COM 接口是否提供了一种方法）。

我已经阅读和研究过`wdbgexts.h`，`dbghelp.h`但它们似乎都不包含任何可用的函数或全局变量，尽管这些文件中有一些关于 BP 的信息，例如`DBGKD_GET_VERSION::BreakpointWithStatus`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T00:13:43.337

使用 IDebugControl::GetNumberBreakpoints，然后使用 IDebugControl::GetBreakpointByIndex。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T06:31:46.710

Windows Debugger Extension 提供功能`ULONG64 GetExpression(PCSTR lpExpression)`（当然是*<sarcasm>welldocumented</sarcasm>*）

```
#define GetExpression    (ExtensionApis.lpGetExpressionRoutine) 
```

它允许您从任何 WinDBG 表达式（如`?? @eip`.

```
GetExpression( "@eip"); // Without `?? ` in the beginning 
```

接下来，如果您查看：Windows 调试器帮助**»** Windows调试工具**»**调试器**»**调试器参考**»**调试器命令**»**语法规则**»**伪寄存器语法

你会发现一行看起来像这样：

> **$bp** *Number* - 对应断点的地址。例如，$bp3（或$bp03）是指断点ID 为3 的断点。数字始终是十进制数。如果没有断点的 ID 为 Number，则 $bpNumber 的计算结果为零。有关断点的更多信息，请参阅使用断点。

因此，通过一些开销，您将获得此（工作）解决方案：

```
#define MAX_BREAKPOINTS 100

DWORD i, addr;
CHAR buffer[] = "$bp\0\0\0\0\0\0\0\0\0\0\0\0";

for( i = 0; i < MAX_BREAKPOINTS; ++i){
    // Appends string to BP prefix
    itoa( i, buffer+3, 10);
    addr = GetExpression( buffer);
    if( !addr){
        break;
    }

    // Do stuff
} 
```

唯一的另一个解决方案是按照 Steve Johnson 的建议使用 COM 对象。

# javascript - 如何在运行时在 HTML5 Canvas 中绘制正方形？

> ID：12301610
> 
> 赞同：0
> 
> 时间：2012-09-06T13:49:44.663
> 
> 标签：javascript, html, canvas

我正在研究一个 HTML5 项目。有一个绘图图形 API 来绘制矩形 (fillRectStrokeRect)。但是我如何绘制一个 SQUARE。我尝试了以下方式来绘制它 **CODE**

```
getMouse(e);
x2=mx; y2=my;
var width=endX-startX;
var height=endY-startY;

annCanvasContext.beginPath();
annCanvasContext.lineWidth=borderWidth;
var centerX=width/2;
var centerY=width/2;
var radius=width/2;
annCanvasContext.arc(centerX+5, centerY+5, radius, 0, 2 * Math.PI, false);
annCanvasContext.stroke(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T13:51:39.050

使用`fillRect`或`strokeRect`宽度和高度相等。

```
var x = 0, y = 0,
    side = 10;

ctx.fillRect(x, y, side, side); 
```

[演示](http://jsfiddle.net/amaan/BQZtB/)

正如您在评论中所说，如果您想将最大的正方形放在一个圆圈中，那么它与数学有关而不是与代码有关。我会尝试向您解释，但您可能会在 Internet 的其他地方找到更好、更直观的解释。

以将正方形分成两个相等部分的方式绘制圆的直径。现在一部分是一个直角三角形，它的两条边相等。我们知道直径。使用勾股定理，你得到这个方程： `side^2 + side^2 = diameter^2`。

现在让我们找到一边。

`2(side^2) = diameter^2`
`side^2 = (diameter^2)/2`
`side = Math.sqrt( (diameter^2)/2 )`

现在，把它变成代码。

```
var ctx = document.getElementById('canvas').getContext('2d'),
    radius = 20;

ctx.canvas.addEventListener('click', function (e){
    ctx.fillStyle = 'black';
    ctx.arc(e.pageX, e.pageY, radius, 0, Math.PI*2, false);
    ctx.fill();
    ctx.beginPath();
    ctx.fillStyle = 'red';
    var diameter = radius * 2;
    var side = Math.sqrt( (diameter * diameter)/2 );
    ctx.fillRect(e.pageX - side/2, e.pageY - side/2, side, side);
    ctx.closePath();
}, false); 
```

无论您在画布上单击何处，这都会在圆圈内绘制一个正方形。

[演示](http://jsfiddle.net/amaan/H5Tcu/)

# ruby - nokogiri xpath 属性 - 奇怪的结果

> ID：12301611
> 
> 赞同：2
> 
> 时间：2012-09-06T13:49:46.727
> 
> 标签：ruby, xpath, nokogiri

我有一堆字段，当我尝试运行时：

```
src.xpath('//RECORD').each do |record|
tbegin = record.xpath('//FIELD/TOKEN') 
```

该`tbegin`数组返回其他记录的字段。我检查了第一行是否为我提供了适当的“记录”子树数组，但下一次调用`tbegin`不会将搜索限制为“记录”子树。事实上，它始终返回 的字段子树`record[0]`。

到目前为止，我已经通过使用以下方法解决了这个问题：

```
tbegin = record.css('TOKEN') 
```

但我想了解我做错了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T13:58:03.387

问题是 中的前导双斜杠`xpath('//FIELD/TOKEN')`，它告诉 nokogiri 匹配与该节点无关的节点，而是匹配整个文档，无论位置如何。要相对于节点本身匹配，您必须删除双斜杠：

```
tbegin = record.xpath('FIELD//TOKEN') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T18:08:36.210

作为补充说明，`tbegin = record.css('TOKEN')`有效的原因是`record`提供搜索将开始的顶部节点。`'TOKEN'`不会强制在文档的根目录进行搜索，不像`//FIELD/TOKEN`，它会这样做。

# hadoop - hadoop 从 hdfs 复制到 S3

> ID：12301613
> 
> 赞同：1
> 
> 时间：2012-09-06T13:49:50.033
> 
> 标签：hadoop, amazon-s3, amazon-web-services, amazon-emr, emr

我已成功完成 Amazon EMR 上的 mahout 矢量化作业（使用[Elastic MapReduce 上的 Mahout](https://cwiki.apache.org/MAHOUT/mahout-on-elastic-mapreduce.html)作为参考）。现在我想将结果从 HDFS 复制到 S3（以在未来的集群中使用它）。

```
For that I've used hadoop distcp:

den@aws:~$ elastic-mapreduce --jar s3://elasticmapreduce/samples/distcp/distcp.jar \
> --arg hdfs://my.bucket/prj1/seqfiles \
> --arg s3n://ACCESS_KEY:SECRET_KEY@my.bucket/prj1/seqfiles \
> -j $JOBID 
```

失败的。发现这个建议：[使用 s3distcp](https://stackoverflow.com/a/10749610/658346)也试过了：

```
elastic-mapreduce --jobflow $JOBID \
> --jar --arg s3://eu-west-1.elasticmapreduce/libs/s3distcp/1.latest/s3distcp.jar \
> --arg --s3Endpoint --arg 's3-eu-west-1.amazonaws.com' \
> --arg --src --arg 'hdfs://my.bucket/prj1/seqfiles' \
> --arg --dest --arg 's3://my.bucket/prj1/seqfiles' 
```

在这两种情况下，我都有相同的错误：**java.net.UnknownHostException: unknown host: my.bucket**
下面是第二种情况的完整错误输出。

```
2012-09-06 13:25:08,209 FATAL com.amazon.external.elasticmapreduce.s3distcp.S3DistCp (main): Failed to get source file system
java.net.UnknownHostException: unknown host: my.bucket
    at org.apache.hadoop.ipc.Client$Connection.<init>(Client.java:214)
    at org.apache.hadoop.ipc.Client.getConnection(Client.java:1193)
    at org.apache.hadoop.ipc.Client.call(Client.java:1047)
    at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:225)
    at $Proxy1.getProtocolVersion(Unknown Source)
    at org.apache.hadoop.ipc.RPC.getProxy(RPC.java:401)
    at org.apache.hadoop.ipc.RPC.getProxy(RPC.java:384)
    at org.apache.hadoop.hdfs.DFSClient.createRPCNamenode(DFSClient.java:127)
    at org.apache.hadoop.hdfs.DFSClient.<init>(DFSClient.java:249)
    at org.apache.hadoop.hdfs.DFSClient.<init>(DFSClient.java:214)
    at org.apache.hadoop.hdfs.DistributedFileSystem.initialize(DistributedFileSystem.java:89)
    at org.apache.hadoop.fs.FileSystem.createFileSystem(FileSystem.java:1413)
    at org.apache.hadoop.fs.FileSystem.access$200(FileSystem.java:68)
    at org.apache.hadoop.fs.FileSystem$Cache.get(FileSystem.java:1431)
    at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:256)
    at com.amazon.external.elasticmapreduce.s3distcp.S3DistCp.run(S3DistCp.java:431)
    at com.amazon.external.elasticmapreduce.s3distcp.S3DistCp.run(S3DistCp.java:216)
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:79)
    at com.amazon.external.elasticmapreduce.s3distcp.Main.main(Main.java:12)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.hadoop.util.RunJar.main(RunJar.java:187) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T14:23:50.233

我发现了一个错误：

1.  主要问题不是

    java.net.UnknownHostException：未知主机：my.bucket

但：

```
2012-09-06 13:27:33,909 FATAL com.amazon.external.elasticmapreduce.s3distcp.S3DistCp (main): Failed to get source file system 
```

所以。在源路径中再添加 1 个斜杠后 - 作业开始时没有问题。**正确的命令是**：

```
elastic-mapreduce --jobflow $JOBID \
> --jar --arg s3://eu-west-1.elasticmapreduce/libs/s3distcp/1.latest/s3distcp.jar \
> --arg --s3Endpoint --arg 's3-eu-west-1.amazonaws.com' \
> --arg --src --arg 'hdfs:///my.bucket/prj1/seqfiles' \
> --arg --dest --arg 's3://my.bucket/prj1/seqfiles' 
```

PS所以。这是工作。作业已正确完成。我已经成功地用 30Gb 文件复制了 dir。

# c# - 获取项目序列的索引

> ID：12301614
> 
> 赞同：1
> 
> 时间：2012-09-06T13:49:51.110
> 
> 标签：c#, collections, indexing, ienumerable, sequence

我试图获取一个内的一系列项目的索引`IEnumerable<T>`

```
var collection = new[] { 1, 2, 3, 4, 5 };
var sequence   = new[] { 2, 3 };

// IndexOf is an extension method.
collection.IndexOf(sequence); // Should return 1 
```

我为此编写了一个`IndexOf`扩展方法，它工作正常*，除非*集合中序列的第一项有多个，连续：

```
// There are two items that are 2, consecutively in the collection,
// which is the first item of the sequence.
var collection = new[] { 1, 2, 2, 3, 4, 5 };
var sequence   = new[] { 2, 3 };

collection.IndexOf(sequence); // Should return 2 but returns -1 
```

这是`IndexOf`方法：

```
public static int IndexOf<T>(this IEnumerable<T> collection,
    IEnumerable<T> sequence)
{
    var comparer = EqualityComparer<T>.Default;
    var counter = 0;
    var index = 0;
    var seqEnumerator = sequence.GetEnumerator();

    foreach (var item in collection)
        if (seqEnumerator.MoveNext())
        {
            if (!comparer.Equals(item, seqEnumerator.Current))
            {
                seqEnumerator.Dispose();
                seqEnumerator = sequence.GetEnumerator();
                counter = 0;

                // UPDATED AFTER MICHAEL'S ANSWER,
                // IT WORKS WITH THIS ADDED PART:
                seqEnumerator.MoveNext();
                if (comparer.Equals(item, seqEnumerator.Current))
                    counter++;
            }
            else counter++;
            index++;
        }
        else break;

    var done = !seqEnumerator.MoveNext();
    seqEnumerator.Dispose();
    return done ? index - counter : -1;
} 
```

我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T14:08:55.563

```
public static int IndexOf<T>(this IEnumerable<T> collection,
                                IEnumerable<T> sequence)
{
    var ccount = collection.Count();
    var scount = sequence.Count();

    if (scount > ccount) return -1;

    if (collection.Take(scount).SequenceEqual(sequence)) return 0;

    int index = Enumerable.Range(1, ccount - scount + 1)
                          .FirstOrDefault(i => collection.Skip(i).Take(scount).SequenceEqual(sequence));
    if (index == 0) return -1;
    return index;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T14:04:22.510

当您在非第一个位置遇到错误符号时，您将重新启动序列迭代器，但您不检查当前项目是否与序列迭代器的开头匹配，因此您实际上永远不会将第二个 2 from collection 与 2 from sequence 进行比较。

# iphone - 在 ios Facebook SDK 3.0 中登录时应用程序崩溃

> ID：12301617
> 
> 赞同：2
> 
> 时间：2012-09-06T13:49:55.400
> 
> 标签：iphone, objective-c, ios, facebook

我的应用程序使用 Facebook 身份验证。如果设备上没有安装 Facebook 应用程序，它可以正常工作，如果用户未登录 Facebook 应用程序，它也适用于具有 Facebook 应用程序的设备。但是，如果用户已经登录到 Facebook 应用程序，我的应用程序会显示登录页面两到三秒钟并通过说

```
 -[SBJsonParser errorTrace]: unrecognized selector sent to instance 0x48ad90 
```

崩溃日志显示异常类型：EXC_CRASH (SIGTRAP) 任何人请帮忙？

```
Stack Trace: (
    0   CoreFoundation                      0x37aae8d7 __exceptionPreprocess + 186
    1   libobjc.A.dylib                     0x315941e5 objc_exception_throw + 32
    2   CoreFoundation                      0x37ab1acb -[NSObject doesNotRecognizeSelector:] + 174
    3   CoreFoundation                      0x37ab0945 ___forwarding___ + 300
    4   CoreFoundation                      0x37a0b680 _CF_forwarding_prep_0 + 48
    5   MyFbApp                            0x0014bf83 -[SBJSON objectWithString:allowScalar:error:] + 118
    6   MyFbApp                            0x0014bffb -[SBJSON objectWithString:error:] + 26
    7   MyFbApp                            0x0015030b -[FBRequestConnection parseJSONOrOtherwise:error:] + 94
    8   MyFbApp                            0x0014ff19 -[FBRequestConnection parseJSONResponse:error:statusCode:] + 100
    9   MyFbApp                            0x0014fcbb -[FBRequestConnection completeWithResponse:data:orError:] + 566
    10  MyFbApp                            0x0014e08f __68-[FBRequestConnection startWithCacheIdentity:skipRoundtripIfCached:]_block_invoke_0 + 174
    11  MyFbApp                            0x00151acf -[FBURLConnection invokeHandler:error:response:responseData:] + 482
    12  MyFbApp                            0x0015202b -[FBURLConnection connectionDidFinishLoading:] + 298
    13  Foundation                          0x31a0ac39 __65-[NSURLConnectionInternal _withConnectionAndDelegate:onlyActive:]_block_invoke_0 + 16
    14  Foundation                          0x319626e9 -[NSURLConnectionInternalConnection invokeForDelegate:] + 28
    15  Foundation                          0x319626b3 -[NSURLConnectionInternal _withConnectionAndDelegate:onlyActive:] + 198
    16  Foundation                          0x319625d5 -[NSURLConnectionInternal _withActiveConnectionAndDelegate:] + 60
    17  CFNetwork                           0x36f8f8a5 _ZN19URLConnectionClient23_clientDidFinishLoadingEPNS_26ClientConnectionEventQueueE + 192
    18  CFNetwork                           0x36f84545 _ZN19URLConnectionClient26ClientConnectionEventQueue33processAllEventsAndConsumePayloadEP20XConnectionEventInfoI12XClientEvent18XClientEventParamsEl + 424
    19  CFNetwork                           0x36f84243 _ZN19URLConnectionClient13processEventsEv + 106
    20  CFNetwork                           0x36f84179 _ZN17MultiplexerSource7performEv + 156
    21  CoreFoundation                      0x37a82b03 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 14
    22  CoreFoundation                      0x37a822cf __CFRunLoopDoSources0 + 214
    23  CoreFoundation                      0x37a81075 __CFRunLoopRun + 652
    24  CoreFoundation                      0x37a044dd CFRunLoopRunSpecific + 300
    25  CoreFoundation                      0x37a043a5 CFRunLoopRunInMode + 104
    26  GraphicsServices                    0x37582fcd GSEventRunModal + 156
    27  UIKit                               0x34e94743 UIApplicationMain + 1090
    28  MyFbApp                            0x0007512d main + 236
    29  MyFbApp                            0x0007503c start + 40
) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-07T09:33:37.497

最后我通过添加解决了我的问题

```
-(id) errorTrace{
    return [NSArray arrayWithObjects:@"error1", nil];
} 
```

在 SBJsonParser 中。我不知道它是如何工作的。

感谢上帝>>>>>>>>>>

如需进一步参考[http://developers.facebook.com/bugs/202230616574138/](http://developers.facebook.com/bugs/202230616574138/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T14:12:39.553

我不熟悉 Facebook 身份验证，但这里可能会发生两件事：

*   要么您向已在内存中被对象替换的已释放对象发送了 errorTrace: 消息`SBJsonParser`。
*   或者您向您的`SBJsonParser`对象发送了无效消息

我建议两件事：

1.  添加 NSZombieEnabled 标志以查看您是否错误地释放了对象
2.  在您使用 SBJsonParser 的地方发布代码，希望它不是在外部源代码或库中创建的

# c# - NHibernate 和 Firebird 的性能问题

> ID：12301618
> 
> 赞同：2
> 
> 时间：2012-09-06T13:50:01.780
> 
> 标签：c#, asp.net-mvc, nhibernate, firebird

我遇到了 NHibernate 3.3 和 Firebird 2.5.1 的性能问题。我使用 ASP.NET MVC 和本地（！）Firebird 数据库创建了一个非常简单的示例。但是下面的代码执行大约需要 1 秒？！？

```
 var startTickCountWrite = Environment.TickCount;

        IRepository<Project> repository = facade.ProjectRepository(null);
        for (int i = 1; i <= 250; ++i)
        {
            var myProject = new Project { ProjectId = i };
            repository.Insert(myProject);
        }
        repository.Commit();

        var endTickCountWrite = Environment.TickCount; 
```

如果我将 commit() 放在 for 循环中，大约需要 5 秒！

Repository 和外观背后并没有什么特别之处。我只是将项目转发给 ISession.Insert。

Project 只有 ID 和 ProjectID 作为属性。

谁能告诉我出了什么问题？

谢谢， 安德烈亚斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T21:03:01.913

250 objects in 1 second does not sound shockingly slow. For evaluating performance it would also be good to provide some comparison - how long does it take to execute the same amount of SQL directly against Firebird?

NHibernate can in some circumstances batch INSERT statements, but I don't know if this works on Firebird. [http://nhibernate.info/doc/nh/en/index.html#performance-batch-updates](http://nhibernate.info/doc/nh/en/index.html#performance-batch-updates) The choice of identity generator can also have an effect. Some generators force NHibernate to execute the INSERT statement immediately, which will prevent the use of batching.

From a design point of view you might want to change some things: IRepository.Insert() is typically named Add(), since it mimics a collection interface (and Insert on collections, if present, usually take an index parameter which is not relevant here of course). Also, Commit() seems out-of-place on the repository, since you will typically have multiple repository instances involved, that share the same transaction and session.

For accurate time measurements, you can use Stopwatch from System.Diagnostics, so you don't need to convert the value yourself.

# scala - 如何为 Maven 站点生成聚合的 scaladoc？

> ID：12301620
> 
> 赞同：13
> 
> 时间：2012-09-06T13:50:16.243
> 
> 标签：scala, maven, maven-site-plugin, scala-maven-plugin

我有一个多模块 Maven 构建，我想在我的根模块中生成一个聚合的 Scaladoc，类似于 maven-javadoc-plugin 的聚合目标。我的第一次尝试是：

```
<project ...>
    <build>
        <pluginManagement>
            <plugins>
                <plugin>
                    <artifactId>maven-site-plugin</artifactId>
                    <configuration>
                        <reportPlugins>
                            <plugin>
                                <artifactId>maven-project-info-reports-plugin</artifactId>
                            </plugin>
                            <plugin>
                                <groupId>net.alchim31.maven</groupId>
                                <artifactId>scala-maven-plugin</artifactId>
                                <reports>
                                    <report>doc</report>
                                </reports>
                                <configuration>
                                    <aggregateDirectOnly>false</aggregateDirectOnly>
                                    <sendJavaToScalac>false</sendJavaToScalac>
                                </configuration>
                            </plugin>
                            <plugin>
                                <artifactId>maven-javadoc-plugin</artifactId>
                                <reports>
                                    <report>aggregate</report>
                                </reports>
                            </plugin>
                        </reportPlugins>
                    </configuration>
                </plugin>
            </plugins>
        </pluginManagement>
    </build>
</project> 
```

但是，aggregateDirectOnly 属性似乎没有任何效果。我总是只获得单个 jar 类型 POM 的 Scaladoc。

我也尝试将 forceAggregate 设置为 true，但它也没有效果。

这个怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-29T21:24:49.197

这并没有*完全*按照要求回答问题，但在 ScalaDoc 能够解析 JavaDoc 注释之前，它实际上可能是混合 java/scala 项目的首选解决方案。它生成一个单一的聚合 JavaDoc，*其中还包括来自项目的所有 Scala 源文件的文档*。

解决方案很简单：配置 Maven 使用[GenJavaDoc](https://github.com/typesafehub/genjavadoc) Scala 编译器插件，以便 ScalaDocs 可以转换为 JavaDocs。然后，使用正常`javadoc:aggregate`目标将项目聚合为正常。

这是执行此操作的示例 Maven 配置文件。它配置 Scala 编译器生成与 Scala 源代码对应的 JavaDocs，配置 Maven 将`genjavadoc`Scala 编译器创建的目录视为源目录，然后配置 javadoc 插件本身（如果您没有特殊的 JavaDoc，则最后一个可能是可选的插件配置要求）。

```
<profile>
  <id>javadoc</id>
  <build>
    <plugins>
      <plugin>
        <groupId>net.alchim31.maven</groupId>
        <artifactId>scala-maven-plugin</artifactId>
        <executions>
          <execution>
            <id>doc</id>
            <phase>generate-sources</phase>
            <goals>
              <goal>compile</goal>
            </goals>
          </execution>
        </executions>
        <configuration>
          <args>
            <arg>-P:genjavadoc:out=${project.build.directory}/genjavadoc</arg>
          </args>
          <compilerPlugins>
            <compilerPlugin>
              <groupId>com.typesafe.genjavadoc</groupId>
              <artifactId>genjavadoc-plugin_${scala.binary.full.version}</artifactId>
              <version>0.4</version>
            </compilerPlugin>
          </compilerPlugins>
        </configuration>
      </plugin>
      <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>build-helper-maven-plugin</artifactId>
        <executions>
          <execution>
            <phase>generate-sources</phase>
            <goals>
              <goal>add-source</goal>
            </goals>
            <configuration>
              <sources>
                <source>${project.build.directory}/genjavadoc</source>
              </sources>
            </configuration>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-javadoc-plugin</artifactId>
        <version>2.9</version>
        <configuration>
          <minmemory>64m</minmemory>
          <maxmemory>2g</maxmemory>
          <outputDirectory>${project.build.directory}</outputDirectory>
          <detectLinks>true</detectLinks>
        </configuration>
      </plugin>
    </plugins>
  </build>
</profile> 
```

# c# - Visual Studio 无法写入输出文件“...\obj\Debug\Foo.Bar.dll”

> ID：12301625
> 
> 赞同：14
> 
> 时间：2012-09-06T13:50:38.583
> 
> 标签：c#, .net, visual-studio, build, compiler-errors

我在 Visual Studio 2010 中编译大型 c# 解决方案时遇到此错误。每次编译后，我都必须删除此解决方案使用的项目之一的 obj 文件夹。否则我得到以下错误：

```
Could not write to output file '...\obj\Debug\Foo.Bar.dll'
The process cannot access the file because it is being used by another process 
```

我一直在整个互联网上寻找解决方案，实际上发现/尝试了其中的几个。

例如：开发论坛上的很多人建议在打开**UserControl**（在其他一些来源**From**）设计器时不要开始编译。

其他一些人使用**预构建脚本**来删除 obj 文件夹，这个特定的解决方案是可以接受的，但是如果发布的项目是一个广泛使用的库，它的重新编译将导致“父”项目的重新编译。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-09-06T13:50:38.583

最后，我发现了这个**VS2010**（SP1 也是）“错误”的解决方案，我想与 stackoverflow 用户分享它。

就我而言，问题是 csproj 文件是自引用锁定`'...\obj\Debug\Foo.Bar.dll'`文件。疯了我知道。`.csproj`所以我通过从文件中删除以下行来解决这个烦人的问题：

```
<Reference Include="Foo.Bar">
  <HintPath>obj\Debug\Foo.Bar.dll</HintPath>
</Reference> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T13:06:43.253

我最初找到了另一个解决问题的方法，因为 VS 似乎将程序集锁定在 obj\debug 文件夹中。我在项目中添加了一个预构建脚本来解决我的问题。

```
del "$(ProjectDir)obj\*.*" /S /F /Q 
```

看到萨拉罗斯给出的答案后，确实是这个问题。我创建了一个新的用户控件，它使用来自另一个项目的服务器控件。出于某种原因，当您在设计模式下查看用户控件时，VS 有时会创建对自身的自引用。即使删除自引用也会修复它，直到 VS 认为是时候再次添加引用了。还没有找到那部分的确切模式。

PS：我正在使用`vs2012`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-05T04:36:41.907

这个问题发生在我身上，当我：

1.  打开 Visual Studio
2.  跑调试
3.  转到 C: 并使用系统清理

如果您尝试再次构建，您会发现此错误。

解决方案：

1.  关闭 Visual Studio
2.  做系统清理
3.  重启你的电脑
4.  以管理员身份打开 Visual Studio
5.  选择您的项目
6.  干净的
7.  重建

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-06T11:36:32.483

就我而言，以某种方式发布时缺少 exe 文件。不知道这是怎么发生的。我用调试的副本替换它，一切都很好。我应该早点检查一下，但从没想过文件会丢失。

# python - Requests 流式传输示例在我的环境中不起作用

> ID：12301630
> 
> 赞同：5
> 
> 时间：2012-09-06T13:50:57.273
> 
> 标签：python, python-requests, twitter-streaming-api

我一直在尝试使用 Python 请求来使用 Twitter 流 API。

文档中有一个[简单的例子](http://docs.python-requests.org/en/latest/user/advanced/#streaming-requests)：

```
import requests
import json

r = requests.post('https://stream.twitter.com/1/statuses/filter.json',
    data={'track': 'requests'}, auth=('username', 'password'))

for line in r.iter_lines():
    if line: # filter out keep-alive new lines
        print json.loads(line) 
```

当我执行此操作时，对`requests.post()`永不返回的调用。我已经实验并证明它肯定是连接到 Twitter 并从 API 接收数据。但是，它并没有返回响应对象，而是坐在那里消耗 Twitter 发送的数据。从上面的代码来看，我希望`requests.post()`返回一个与 Twitter 建立开放连接的响应对象，我可以继续接收实时结果。

（为了证明它正在接收数据，我在另一个 shell 中使用相同的凭据连接到 Twitter，然后 Twitter 关闭了第一个连接，并且调用返回了响应对象。该`r.content`属性包含在连接打开时接收到的所有备份数据。 )

该文档没有提及`requests.post`在使用所有提供的数据之前导致返回所需的任何其他步骤。其他人似乎正在使用类似的代码而没有遇到这个问题，例如[这里](http://kracekumar.com/post/19556427690/n00bs-epic-research-on-twitters-streaming-api-on)。

我正在使用：

*   蟒蛇 2.7
*   Ubuntu 11.04
*   请求 0.14.0

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-06T14:11:32.850

您需要关闭预取，我认为这是一个更改默认值的参数：

```
r = requests.post('https://stream.twitter.com/1/statuses/filter.json',
    data={'track': 'requests'}, auth=('username', 'password'),
    prefetch=False)

for line in r.iter_lines():
    if line: # filter out keep-alive new lines
        print json.loads(line) 
```

请注意，从 requests 1.x 开始，参数已重命名，现在您使用[`stream=True`](https://requests.readthedocs.io/en/master/user/advanced/#body-content-workflow)：

```
r = requests.post('https://stream.twitter.com/1/statuses/filter.json',
    data={'track': 'requests'}, auth=('username', 'password'),
    stream=True)

for line in r.iter_lines():
    if line: # filter out keep-alive new lines
        print json.loads(line) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-06T14:08:46.267

啊，我通过阅读代码找到了答案。在某些时候，预取参数被添加到 post 方法（和其他方法，我假设）。

我只需要添加一个`prefetch=False`kwarg 到`requests.post()`.

# excel - Excel vlookup 和添加时间

> ID：12301631
> 
> 赞同：0
> 
> 时间：2012-09-06T13:50:58.017
> 
> 标签：excel, function, vlookup

我在 Excel 中有一些日期/时间单元格，我想在它们上添加一定的时间（将新值保存在另一个单元格中）。这是它的外观：

主表：

![在此处输入图像描述](../Images/fb58d0f1d2ae7062fe2b3f6168b1c2ef.png)

表 3：

![在此处输入图像描述](../Images/0a751721bb897eb9e73258dbe87b550e.png)

因此，在主工作表中，对于列 EI，希望将主列 D 与 Sheet3 中的 B 列相匹配，并在此基础上将 C 列（Sheet3）添加到 C 列（主工作表）中的日期，然后将新日期存储在主列 E .

C 列（表 3）表示要添加的小时数。

该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T14:00:50.920

将此公式放在主工作表的 E 列中：

```
=C1+VLOOKUP(D1,Sheet3!$B$1:$C$9,2,FALSE) 
```

假设您要添加天数。如果要添加秒或小时，则需要调整工作表 3 的 C 列中的时间。

# ios - 使用 UIScrollView 缩小内容会跳转

> ID：12301635
> 
> 赞同：6
> 
> 时间：2012-09-06T13:51:14.887
> 
> 标签：ios, uiscrollview

我需要有关 UIScrollView 示例的帮助。

我创建了一个简单的程序来滚动和缩放内容 ( `UIImageView`)。它工作正常，除了当我尝试缩小时内容经常消失在右下角。但是由于我设置`minimumZoomScale`为1.0f，实际上并没有缩小，只是内容跳出了视图。更奇怪的是，在此之后我无法向上滚动。显然内容大小也搞砸了。

![在此处输入图像描述](../Images/0e226162357b23dcaf861c4780b2f37a.png)

我在示例代码中的设置如下图所示。

![在此处输入图像描述](../Images/0c137f57750eda33ed6b7e9a4b544dcd.png)

当我（尝试）缩小后检查状态时，我发现了两个错误的地方。

*   **`_scrollView.contentSize`为 480x360，不应小于 1000x1000**
*   **`_scrollView.bounds`以某种方式跳到顶部（即，`_scrollView.bounds.origin.y`始终为 0）**

为了应对上述两项，我在 UIScrollViewDelegate 中添加了以下代码，现在它可以正常工作了。

```
- (void)scrollViewWillBeginZooming:(UIScrollView *)scrollView withView:(UIView *)view
{
    if(scrollView == _scrollView && view == _contentView)
    {
        // Setting ivars for scrollViewDidZoom
        _contentOffsetBeforeZoom = _scrollView.contentOffset;
        _scrollViewBoundsBeforeZoom = _scrollView.bounds;
    }
}

- (void)scrollViewDidZoom:(UIScrollView *)scrollView
{
    if(scrollView == _scrollView)
    {
        // If you zoom out, there are cases where ScrollView content size becomes smaller than original,
        // even though minimum zoom scale = 1\. In that case, it will mess with the contentOffset as well.
        if(_scrollView.contentSize.width < CONTENT_WIDTH || _scrollView.contentSize.height < CONTENT_HEIGHT)
        {
            _scrollView.contentSize = CGSizeMake(CONTENT_WIDTH, CONTENT_HEIGHT);
            _scrollView.contentOffset = _contentOffsetBeforeZoom;
        }

        // If you zoom out, there are cases where ScrollView bounds goes outsize of contentSize rectangle.
        if(_scrollView.bounds.origin.x + _scrollView.bounds.size.width > _scrollView.contentSize.width ||
           _scrollView.bounds.origin.y + _scrollView.bounds.size.height > _scrollView.contentSize.height)
        {
            _scrollView.bounds = _scrollViewBoundsBeforeZoom;
        }            
    }
} 
```

然而，有必要归结为这一点吗？这是一个非常简单的序列，很难相信苹果需要我们付出这样的努力。所以，我敢打赌我在这里遗漏了一些东西......

以下是我的原始代码。请帮我找出我做错了什么（或遗漏了什么）！

```
#define CONTENT_WIDTH 1000
#define CONTENT_HEIGHT 1000

  >>>> Snip >>>>

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    _scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, 320, 460)];
    _scrollView.contentSize = CGSizeMake(CONTENT_WIDTH, CONTENT_HEIGHT);
    _scrollView.backgroundColor = [UIColor blueColor];
    _scrollView.maximumZoomScale = 8.0f;
    _scrollView.minimumZoomScale = 1.0f;
    _scrollView.indicatorStyle = UIScrollViewIndicatorStyleWhite;
    _scrollView.scrollEnabled = YES;
    _scrollView.delegate = self;
    [self.view addSubview:_scrollView];

    _contentView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"sample.jpg"]]; // sample.jpg is 480x360
    CGPoint center = (CGPoint){_scrollView.contentSize.width / 2, _scrollView.contentSize.height / 2};
    _contentView.center = center;
    [_scrollView addSubview:_contentView];

    _scrollView.contentOffset = (CGPoint) {center.x - _scrollView.bounds.size.width / 2, center.y - _scrollView.bounds.size.height / 2};        
}

- (UIView *) viewForZoomingInScrollView:(UIScrollView *)scrollView
{
    if(scrollView == _scrollView)
    {
        return _contentView;
    }
    return nil;
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-09T04:12:49.083

我创建了一个快速示例项目，并遇到了您使用粘贴的代码描述的相同问题。我不完全知道在 iOS 中“正确”的缩放方式是什么，但我发现[这个](http://www.raywenderlich.com/10518/how-to-use-uiscrollview-to-scroll-and-zoom-content)教程说你需要在缩放滚动视图后重新定位你的 contentView。我个人希望它会自动重新居中，因为它是您在 viewForZoomingInScrollView 委托方法中返回的视图，但显然不是。

```
- (void)centerScrollViewContents {
    CGSize boundsSize = _scrollView.bounds.size;
    CGRect contentsFrame = _contentView.frame;

    if (contentsFrame.size.width < boundsSize.width) {
        contentsFrame.origin.x = (boundsSize.width - contentsFrame.size.width) / 2.0f;
    } else {
        contentsFrame.origin.x = 0.0f;
    }

    if (contentsFrame.size.height < boundsSize.height) {
        contentsFrame.origin.y = (boundsSize.height - contentsFrame.size.height) / 2.0f;
    } else {
        contentsFrame.origin.y = 0.0f;
    }

    _contentView.frame = contentsFrame;
}

- (void)scrollViewDidZoom:(UIScrollView *)scrollView {
    // The scroll view has zoomed, so we need to re-center the contents
    [self centerScrollViewContents];
} 
```

上面的代码不是我写的，只是从教程中复制过来的。我认为它非常简单。此外，将 contentView 居中似乎要优雅得多，然后不断更改滚动视图的边界和内容大小，因此请尝试一下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-07T14:43:17.330

如果有人在缩小结果背景以显示时遇到弹跳问题，请尝试在 Interface Builder 中删除弹跳（弹跳缩放）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-17T18:04:06.523

我能够使用在缩放后调整速率的代表答案来解决这个问题......但后来我记得我正在使用自动布局，并且只是添加了水平和垂直居中的约束（除了将图像绑定到的约束之外滚动视图的每个边缘）在不使用委托方法的情况下为我解决了这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-09T08:42:36.143

奥尔尚斯克迅速回答 5

```
 func scrollViewDidZoom(_ scrollView: UIScrollView) {
        centerScrollViewContents()
    }

    func centerScrollViewContents() {
        let boundsSize = scrollView.bounds.size;
        var contentsFrame = container.frame;

        if (contentsFrame.size.width < boundsSize.width) {
            contentsFrame.origin.x = (boundsSize.width - contentsFrame.size.width) / 2.0;
        } else {
            contentsFrame.origin.x = 0.0;
        }

        if (contentsFrame.size.height < boundsSize.height) {
            contentsFrame.origin.y = (boundsSize.height - contentsFrame.size.height) / 2.0;
        } else {
            contentsFrame.origin.y = 0.0;
        }

        container.frame = contentsFrame;
    } 
```

# php - 限制数据库行上的数据插入

> ID：12301638
> 
> 赞同：-1
> 
> 时间：2012-09-06T13:51:15.730
> 
> 标签：php, sql

您好，目前我正在使用这行代码：

```
 if( $get_display->level== "Nursery"){
        $lbl="Kinder";
        }
    else if( $get_display->level== "Kinder"){
        $lbl="Preparatory";
        }
    else if( $get_display->level== "Preparatory"){
        $lbl="Grade 1";
        }
    else if( $get_display->level== "Grade 1"){
        $lbl="Grade 2";
        }
     ******THE else if goes on but still the same***** 
```

所以我打算根据学生的成绩自动选择一个部分，我打算把这段代码放在上面的每个 if 语句中。像这样：

```
 else if( $get_display->level== "Grade 1"){
        $lbl="Grade 2";
                 if($get_display->gpa => "88"){ 
       $result = mysql_query("SELECT * FROM tbl_section where level='$lbl' 
       and section_name="A"");
       $row = mysql_fetch_array($result);
               $sname = $row['section_name'];
               }else if($get_display->gpa => "80"){ 
       $result = mysql_query("SELECT * FROM tbl_section where level='$lbl' 
       and section_name="B"");
       $row = mysql_fetch_array($result);
               $sname = $row['section_name'];
       }else if($get_display->gpa => "75"){ 
       $result = mysql_query("SELECT * FROM tbl_section where level='$lbl' 
       and section_name="C"");
       $row = mysql_fetch_array($result);
               $sname = $row['section_name'];                        
                    }
        } 
```

**$sname**将在这里使用：

```
 <input type="text"  name="levele" value="<?php echo $sname;?>"> 
```

我现在的主要问题是，如果**a 部分**已满，它应该自动插入到**b 部分**吗？我应该怎么做？我应该在我的**tbl_section**添加一个字段来计算其中的学生吗？如果我会篡改我的数据库，它应该看起来如何？将不胜感激任何帮助。（请不要提到我的数据库非常受损，已经知道这只是一个简单的项目，但我稍后会实现 mysql_real_escape_string()，还没有关于 mysqli 的知识。）

编辑：**a 和 b**部分只是我的数据库中的字段名称，这就是**tbl_section 的**样子。

```
 section_id (int)
     section_name(vchar)(default names are A,B,C and cannot be changed)
     sy (school year) 
     adviser_id
     level 
```

很抱歉第一次在这里展示我的数据库希望这是正确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T14:06:42.543

我只是`SELECT`一个`section_name`不完整的：

```
SELECT section_name, COUNT(*) 
FROM tbl_section 
WHERE level='$lbl' 
GROUP BY section_name
HAVING COUNT(*) < 80 
LIMIT 1 
```

您还需要停止使用`mysql_`函数，因为它们已[被弃用](http://www.deprecatedphp.com)并且容易受到 SQL 注入的影响。

另外，我会重写上面的代码段以压缩代码，如下所示：

```
elseif( $get_display->level== "Grade 1" ) {
    $lbl="Grade 2";

    if( $get_display->gpa => "88" ) {
        $section_name = 'A';
    }
    elseif( $get_display->gpa => "80" ) {
        $section_name = 'B';
    }
    elseif( $get_display->gpa => "75" ) {
        $section_name = 'C';                      
    }

    $result = mysql_query("SELECT * FROM tbl_section where level='$lbl' and section_name='$section_name' LIMIT 1");
    $row = mysql_fetch_array($result);
    $sname = $row['section_name'];  
} 
```

# php - 如何为数组 _POST vars 获取 getPost？

> ID：12301639
> 
> 赞同：17
> 
> 时间：2012-09-06T13:51:20.237
> 
> 标签：php, yii, http-post

假设我有

```
$_POST["x"]["y"] = 5; 
```

我怎样才能

```
Yii::app()->request->getPost('x[y]'); 
```

如何按索引检索 post 变量？是否有任何检查 sql 注入的 yii 函数？getPost 会做那个检查吗？

谢谢你 。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-06T14:17:23.753

我对yii不熟悉，但是查看函数的源代码 [https://github.com/yiisoft/yii/blob/1.1.12/framework/web/CHttpRequest.php](https://github.com/yiisoft/yii/blob/1.1.12/framework/web/CHttpRequest.php)

你会做

```
$x = Yii::app()->request->getPost('x');
$y = $x['y']; 
```

getPost 函数不会阻止 sql 注入。请阅读[http://www.yiiframework.com/wiki/275/how-to-write-secure-yii-applications/#hh11](http://www.yiiframework.com/wiki/275/how-to-write-secure-yii-applications/#hh11)了解更多关于保护您的 yii 应用程序的信息

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-12-09T17:33:43.437

**Yii2**

```
$x = Yii::$app->request->post('x'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-12T11:45:54.533

Yii::app()->request->getParam('delete');

你可以看到这个链接

[http://www.yiiframework.com/forum/index.php/topic/28547-get-post-parameters-with-the-same-name/](http://www.yiiframework.com/forum/index.php/topic/28547-get-post-parameters-with-the-same-name/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-25T22:55:35.757

使用模型测试它看起来像这样

```
$test = new Test();
$test->attributes = Yii::app()->request->getPost('x');   
$y = $test->getAttribute('y'); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-04-09T00:32:17.910

```
> My controller 
>     public function mi(){
>         echo "Hola MI Controlador!";
>         // in login scenario
> 
>         $request = Yii::app()->request->getPost('nombre');
>         print_r($request);
> 
> 
>         //$this->render('index',array('nombre',$post));
>     } 
```

# python - 如何使用 scikit-learn 的 SVM 和直方图作为特征？

> ID：12301640
> 
> 赞同：4
> 
> 时间：2012-09-06T13:51:23.140
> 
> 标签：python, machine-learning, svm, scikit-learn

我希望将 scikit-learn 的 SVM 与卡方内核一起使用，如此[处所示](http://scikit-learn.org/0.11/modules/kernel_approximation.html#additive-chi-squared-kernel)。在这种情况下，内核位于直方图上，这就是我的数据所表示的内容。但是，我找不到与直方图一起使用的示例。这样做的正确方法是什么？

将直方图视为向量是否正确，其中向量中的每个元素都对应于直方图的一个 bin？

先感谢您

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-07T09:07:02.150

[这里](http://scikit-learn.org/dev/auto_examples/plot_kernel_approximation.html#example-plot-kernel-approximation-py)有一个使用近似特征图的例子。它适用于 RBF 内核，但它的工作原理相同。

上面的示例使用“管道”，但您也可以在将数据传递给线性分类器之前将转换应用于数据，因为`AdditiveChi2Sampler`实际上并没有`fit`以任何方式应用于数据。

请记住，这只是内核映射的近似值（我发现它工作得很好），如果你想使用确切的内核，你应该使用 ogrisel 的 anwser。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T21:20:28.180

`sklearn.svm.SVC`以 2 种方式接受自定义内核：

*   `kernel`作为参数传递给构造函数的任意python函数
*   `fit`预先计算的内核矩阵作为第一个参数传递给`kernel=precomputed`构造函数

前者可能要慢得多，但不需要提前分配整个内核矩阵（这对于 large 来说是令人望而却步的`n_samples`）。

[更多详细信息和指向自定义内核文档](http://scikit-learn.org/dev/modules/svm.html#custom-kernels)中示例的链接。

# javascript - 用javascript中的对象替代'self = this'

> ID：12301642
> 
> 赞同：2
> 
> 时间：2012-09-06T13:51:27.413
> 
> 标签：javascript, scope

我有这个代码：

```
function Person(name){      
    var self = this;

    this.name = name;

    function hello(){
        alert("hello " + self.name);
    }

    return {
        hello: hello
    };
}

var newPerson = new Person("john");

newPerson.hello(); 
```

我希望能够使用“this”关键字访问“hello”函数中的“name”属性；我想要一个替代使用“自我”变量的方法。

除了使用 jquery 的 $.proxy 函数来控制上下文之外，我如何编写相同的代码但没有变量'self'？

我想要一个如下所示的代码，但当我调用“newPerson.hello()”时，“名称”总是“未定义”。我不知道为什么，因为我一直认为函数的范围始终是调用者点左侧的对象，在这种情况下，它是“newPerson”，在创建时被赋值为“john”物体。

```
function Person(name){              
    this.name = name;

    function hello(){
        alert("hello " + this.name);
    }

    return {
        hello: hello
    };
}

var newPerson = new Person("john");

newPerson.hello(); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-06T13:58:44.413

您可以使用`.bind`强制函数的所有者成为您传递的任何对象。所以，你可以这样写你的`Person`对象：

```
function Person(name){ 
    this.name = name;

    var hello = function(){
        alert("hello " + this.name);
    }.bind(this);

    return {
        hello: hello
    };
} 
```

这将确保始终在调用它`.hello`的上下文中执行。`Person`

这是一个演示：

[**--- jsFiddle 演示 ---**](http://jsfiddle.net/mhJ4f/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-06T14:00:28.333

`new`在使用函数将返回的关键字时，默认情况下不要使用 return，`this` 您将需要更改函数的声明方式。

这是一个小提琴

[http://jsfiddle.net/SaintGerbil/9SAhD/](http://jsfiddle.net/SaintGerbil/9SAhD/)

```
function Person(name){              
    this.name = name;
    this.hello = function (){
        alert("hello " + this.name);
    }
}

var newPerson = new Person("john");

newPerson.hello();​ 
```

**编辑**如果您要求名称是私有的，那么这里是另一种选择

```
function Person(name){              
    var _name = name;
    this.hello = function (){
        alert("hello " + _name);
    }
}

var newPerson = new Person("john");

newPerson.hello();​ 
```

在回答您的问题时，有 4 种调用函数的方法这些会影响`this`它们的值

*   构造函数调用（使用`new`关键字）在哪里`this`是自动返回的新对象。
*   如果一个函数附加到一个对象并从它调用，则方法调用是调用`this`的对象。
*   函数调用 直接调用函数会导致`this`被全局对象，（在没有new的情况下调用构造函数时的常见错误）
*   使用方法指定应该是什么时应用\调用调用（以jackwanders为例）

**进一步编辑**

因此，在开始时获取您想要的代码并解释正在发生的事情。

```
function Person(name){
    this.name = name; // 1

    function hello(){ // 2
        alert("hello " + this.name); // 3
    } 

    return {
        hello: hello
    }; //4
} 
```

作为函数的 Person*可以*通过两种方式调用：

`var x = Person("ted");`

和

`var x = new Person("jimmy");`

由于您已将 Person 命名为大写，这意味着您希望人们使用`new`.
因此，我们输入函数，然后 javascript 创建一个新对象并将其分配给`this`.

*   *第 1 行*，我们将一个“名称”变量附加到`this`并使用传递的参数进行初始化。
*   *第 2 行*我们将一个 'hello' 函数附加到`this`.
*   *第 3 行*，该函数期望有一个“名称”变量存在附加到它（它现在这样做）。
*   *第 4 行*，而不是 return `this`（默认行为），我们现在声明一个新对象并将函数附加到它。这个新对象在其范围内没有“名称”变量。

因此，当您创建对象时，您会得到一个附加了函数的对象，但它无法访问它需要正确执行的变量。这就是为什么你得到未定义的原因。

这有意义吗？当我必须扩展文本框时，我总是担心我在胡扯吗？

或者，如果我尽可能详细地写出你的函数，它会看起来像这样。

```
function Person(name){
  var this = new Object();
  this.name = name;
  var hello = function (){
    alert("hello " + this.name);
  } 
  this.hello = hello;

  var that = new Object();
  that.hello = hello;

  return that;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-06T14:08:59.577

您似乎混淆了两件事。

# a) 常规函数

```
function CreatePerson(name) {
    // create a new object
    var person = {};
    // or (if you want to provide a prototype)
    var person = Object.create(...);

    // fill it with some more data
    person.name = name;
    person.foo = 123;
    person.bar = function() { /* ... your method body ... */ }; 
} 
```

调用如下：

```
var person = CreatePerson("Jack"); 
```

# b) 构造函数

```
function Person(name) {
    // called after a Person is created,
    // `this` is bound to the new object
    // and its prototype is set to `Person.prototype`

    this.name = name;
    this.foo = 123;
    this.bar = function() { /* ... your method body ... */ }; 
}

var person = new Person("Jack"); 
```

注意这里的特殊`new`语法。

使用这种风格时，您可能只想创建一次方法，而不是为每个创建的实例创建方法：

```
function Person(name) {
    // called after a Person is created,
    // `this` is bound to the new object
    // and its prototype is set to `Person.prototype`

    this.name = name;
    this.foo = 123;
}
Person.prototype.bar = function() {
    /* ... your method body ... */
};

var person = new Person("Jack"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T13:55:02.210

这样做很有效。

如果您只想在函数中访问 this ，您可以这样做。你使用 return {hello:hello} 来声明函数，你不需要做它，除非它是你想要的

示例 1

> ```
>  function _persons(array) {
>           this.available = array;
>           this.write = function () {
>               writedata(this.available, '#array2');
>           };
>           this.SortAge = function () {
>               array.sort(compare);
>               writedata(this.available, '#array3');
>           };
>           array.sort(compareName);
>       } 
>      var users = new _persons(myarray); 
> ```

示例 2

> ```
>  function Person(name ){
>        this.name = name ;
>         this.hello = function(){
>         alert("hello " + this.name);
>         }
>       }
> 
>       var a = "john";
>       var newPerson = new Person(a); 
>       newPerson.hello(); var
>       otherPerson = new Person("annie"); 
>       otherPerson.hello(); 
> ```

# java - Windows 找不到“\bin\ssvagent.exe”

> ID：12301643
> 
> 赞同：0
> 
> 时间：2012-09-06T13:51:31.250
> 
> 标签：java, java-web-start

我在 Windows 7 CMD 上输入了以下内容：_

```
javaws -viewer 
```

但是出现了以下错误：-“Windows 找不到 '\bin\ssvagent.exe'”，那么出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T02:15:36.633

有两种简单的方法可以正确运行命令：

1) 对于永久修复，您需要将 java bin 文件夹添加到您的 windows calsspath 中。然后，当您使用 javaws 命令时，它将知道 ssvagent.exe 文件的位置。

2）如果您只需要使用一次或两次，那么您需要导航到**jre** bin 文件夹，使用： 例如：`cd "[path to`**`jre`**`bin folder]"``cd "C:\Program Files (x86)\Java\jre7\bin"`

完成后，您可以使用命令：`javaws -viewer`

* * *

有关将 java 添加到类路径的更多信息：

*   [http://www.ehow.com/how_7166816_set-up-java-classpath-windows.html](http://www.ehow.com/how_7166816_set-up-java-classpath-windows.html)
*   [http://docs.oracle.com/javase/1.5.0/docs/tooldocs/windows/classpath.html](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/windows/classpath.html)

* * *

如果由于某种原因上述选项没有帮助，那么您需要重新安装 java

# iphone - 只允许用户按一次 UIButton

> ID：12301648
> 
> 赞同：4
> 
> 时间：2012-09-06T13:51:40.533
> 
> 标签：iphone, ios, xcode, ipad

我正在尝试设计一个应用程序的界面，我只想让用户按一次 UIButton 来获得结果。有什么办法可以在按下按钮后锁定按钮？并且仅在按下另一个按钮时才释放锁定？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-06T13:57:48.210

您可以将按钮设置为在单击后禁用：

```
- (IBAction)clicked:(id)sender {
    //See all buttons enabled
    //Try a loop or manually

    ((UIButton *)sender).enabled = NO;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T13:56:39.120

当然可以。只需使用`enabled`UIButton 的属性。当用户按下它时，将启用设置为 NO: `[myButton setEnabled:NO];`，并`YES`在以后需要再次启用时设置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-06-27T16:14:21.487

这是 James Paolantonio 对 Swift 4 的回答的更新版本

```
@IBAction func clicked(_ sender: Any) {
    //See all buttons enabled
    //Try a loop or manually
    (sender as? UIButton)?.isEnabled = false
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T13:57:39.500

只需在调用按钮的选择器方法时禁用 Uibutton。如 [aButton setEnabled:False];，当用户点击另一个按钮时，重新启用第一个按钮并禁用第二个按钮，如 [bButton setEnabled:False] 和 [aButton setEnabled:True]，

希望能帮助到你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T14:10:22.443

您需要参考第一个按下的按钮。在下一次按下时，您可以启用旧按钮并禁用新按钮

```
Button *disabledButton;
- (IBAction)clicked:(id)sender {        
   if (disabledButton)
     disabledButton.enabled = YES;

   disabledButton = ((UIButton *)sender);
   disabledButton.enabled = NO;
 } 
```

# svn - 标签差异和提交消息

> ID：12301654
> 
> 赞同：3
> 
> 时间：2012-09-06T13:51:59.517
> 
> 标签：svn, changelog

我是 SVN 的新手。我需要获取比较两个标签的报告以及提交消息。

即我需要文件的完整路径并提交消息作为报告。

请让我知道是否有任何 svn 命令或任何脚本可以解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T14:13:24.963

假设您遵循关于存储库中文件夹组织的通用约定 ( `trunk/branch/tags`) 并且您的标签都是从主干创建的，您可以执行以下操作：

首先，如果您想要两个标签之间的变更日志，您首先需要找到与这些标签对应的修订。例如，这可以`Tag1`使用以下命令来完成：

```
svn log --stop-on-copy https://repoAddress/tags/Tag1 
```

结果输出将类似于：

```
------------------------------------------------------------------------
r106 | myName | 2012-06-06 17:15:34 +0200 (mer., 06 juin 2012) | 1 line

Commit message
------------------------------------------------------------------------ 
```

从那里您可以找到相应的修订版是`106`. 对另一个标签做同样的事情会给你第二个修订版（比如`258`）。

然后，您可以通过执行以下命令来获得完整的变更日志：

```
svn log --verbose -r258:106 https://repoAddress/trunk 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T23:15:54.643

如果您使用的是 Windows，则可以使用 PowerShell 对系统数据进行各种巧妙的处理。我编写了一套小工具来分析您正在寻找的那种 Subversion 元数据。这是一个完全按照您的要求执行的示例：收集两个标签名称之间接触的所有文件的路径和日志消息。您不必将标签与修订号交叉引用——它会自动为您完成。

```
Get-SvnLog -ByFile `
    -TagPath file:///C:/usr/svn/cleancode/tags `
    -RevisionRange "Release_1_1_04:Release_1_2_01" |
Select Revision, Path, Msg |
Format-List 
```

这是输出的一部分。

```
Revision : 1255
Path     : /trunk/devel/cleancode-support/sourceXml/translate.xsl
Msg      : Improved XSLT with variable for 'newline'.

Revision : 1256
Path     : /trunk/devel/cleancode-support/sourceXml/translate.xsl
Msg      : Updated google analytics tracking code.

Revision : 1257
Path     : /trunk/devel/cleancode-support/build.xml
Msg      : Updated google analytics tracking code for language APIs: java, perl, powershell, and c#.

Revision : 1257
Path     : /trunk/devel/cleancode-support/analytics-files.txt
Msg      : Updated google analytics tracking code for language APIs: java, perl, powershell, and c#. 
```

请注意，您可能在一次提交中包含许多文件。该`-ByFile`参数的使用表示分别显式枚举每个文件（从而看到重复的日志消息）。如果你省略了`-ByFile`参数——并且选择`Paths`而不是`Path`在属性列表中——你会得到这个更简洁的列表：

```
Revision : 1255
Paths    : <paths><path action="M" kind="">/trunk/devel/cleancode-support/sourceXml/translate.xsl</path></paths>
msg      : Improved XSLT with variable for 'newline'.

Revision : 1256
Paths    : <paths><path action="M" kind="">/trunk/devel/cleancode-support/sourceXml/translate.xsl</path></paths>
msg      : Updated google analytics tracking code.

Revision : 1257
Paths    : <paths><path action="M" kind="">/trunk/devel/cleancode-support/build.xml</path><path action="A" 
           kind="">/trunk/devel/cleancode-support/analytics-files.txt</path><path action="M" 
           kind="">/trunk/devel/dotnet/Projects/CleanCode/SandCastle/CleanCode.shfbproj</path><path action="M" 
           kind="">/trunk/devel/powershell/scripts/psdoc_template.html</path></paths>
msg      : Updated google analytics tracking code for language APIs: java, perl, powershell, and c#. 
```

[您可以在我的开源书架](http://cleancode.sourceforge.net/wwwdoc/APIbookshelf.html)中看到 Get-SvnLog 的 API 。打开 PowerShell“书”并转到 SvnTools。[在此处](http://cleancode.sourceforge.net/wwwdoc/download.html)下载代码。

# c# - c# web应用程序中的条形码打印

> ID：12301656
> 
> 赞同：0
> 
> 时间：2012-09-06T13:52:06.097
> 
> 标签：c#, javascript, .net, barcode

下面的代码在 Web 应用程序中用于条码（斑马条码打印机）打印。如果我在应用程序服务器中打印，我可以打印。

```
[DllImport("winspool.Drv", EntryPoint = "WritePrinter", SetLastError = true,                                            ExactSpelling = true, CallingConvention = CallingConvention.StdCall)]          
public static extern bool WritePrinter(IntPtr hPrinter, IntPtr pBytes, Int32 dwCount,     out Int32 dwWritten);

public static bool SendBytesToPrinter(string szPrinterName, IntPtr pBytes, Int32 dwCount)
{
    Int32 dwError = 0, dwWritten = 0;
    IntPtr hPrinter = new IntPtr(0);
    DOCINFOA di = new DOCINFOA();
    bool bSuccess = false; // Assume failure unless you specifically succeed.

    //di.pDocName = "My C#.NET RAW Document";
    //di.pDataType = "RAW";

    // Open the printer.
    if (OpenPrinter(szPrinterName.Normalize(), out hPrinter, IntPtr.Zero))
    {
        // Start a document.
        if (StartDocPrinter(hPrinter, 1, di))
        {
            // Start a page.
            if (StartPagePrinter(hPrinter))

            {
                // Write your bytes.
                bSuccess = WritePrinter(hPrinter, pBytes, dwCount, out dwWritten);
                EndPagePrinter(hPrinter);
            }
            EndDocPrinter(hPrinter);

        }
        ClosePrinter(hPrinter);
    }
    // If you did not succeed, GetLastError may give more information
    // about why not.
    if (bSuccess == false)
    {
        dwError = Marshal.GetLastWin32Error();
    }
    return bSuccess;
} 
```

这`szPrinterName`是应用程序下拉框中的打印机名称。在这里，我只能获取安装在应用程序服务器中的打印机名称，并且打印将转到服务器。

如何获取*客户端*机器打印机名称并在*客户端*机器打印机中打印？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:17:40.573

正如@PabloRomeo 在上面的评论中所指出的那样，简短的回答是，您不能以简单的方式做您所描述的事情。原因是 Web 浏览器不允许直接访问本地资源，包括打印机。这样做是出于安全目的。话虽如此，如果将访问该站点的机器将安装一些您需要编写的帮助软件，那么有一些方法可以获得您想要的体验类型。不久前，我在类似类型的问题中提供了一些重要的细节，您可以在下面的链接中看到。

[从网页打印条形码到 Zebra 打印机](https://stackoverflow.com/q/10967599/964043)

# java - JMS - 分布式事务

> ID：12301658
> 
> 赞同：1
> 
> 时间：2012-09-06T13:52:07.610
> 
> 标签：java, jakarta-ee, transactions, jms, distributed-transactions

如果我们希望 JMS 会话参与事务，我们创建一个会话参数为 true 的 JMS 会话。

但是，我在哪里提到了 JMS，它参与事务的会话是本地事务还是全局事务？

换句话说，我是否可以控制让 JMS 参与本地或全局事务，还是由应用程序容器来决定？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T14:14:33.297

这取决于您使用的连接工厂。

JMS 规范指定了两种不同类型的连接工厂，每种类型包含三个接口。

> XAConnectionFactory、XAQueueConnectionFactory 和 XATopicConnectionFactory

对于 XA 连接工厂和

> ConnectionFactory、QueueConnectionFactory 和 TopicConnectionFactory

对于非 XA 连接工厂。如果您使用 XA* ***，那么您的 JMS 会话将参与全局事务。当然，这部分是从您的代码中抽象出来的，因为通常通过提供者特定的接口配置连接工厂，然后通过 JNDI 查找它们。

这是一个讨论 WebLogic 中 JMS 的全局事务的[链接。](http://weblogic.sys-con.com/node/44439)

# freebsd - Libspotify 可用于 FreeBSD

> ID：12301665
> 
> 赞同：0
> 
> 时间：2012-09-06T13:52:33.153
> 
> 标签：freebsd, spotify

首先让我说我不是程序员，而只是最终用户。我不知道是否有人正式提出过这方面的要求，但我真的很想 libspotify 是否可以用于 FreeBSD。通过这种方式，某人可以构建应用程序或服务以在基于 Freenas 和 NAS4Free 的服务器上使用 Spotify。谢谢雷纳托·劳斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:01:02.803

我认为如果有足够的需求，libspotify 可以用于 FreeBSD，但我不认为它会在不久的将来发生。同时，您可以查看[FreeBSD 的 Linux 二进制仿真](http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/linuxemu.html)，因为 libspotify 确实支持 32/64 位 Linux。

但是，如果您绝对需要原生库，我建议您联系 Spotify 并了解他们对该平台的计划。

# java - 为什么不允许这样使用泛型和通配符？

> ID：12301670
> 
> 赞同：1
> 
> 时间：2012-09-06T13:52:55.210
> 
> 标签：java, generics, wildcard, super

这段代码

```
static void writeTo(List<? super Apple> apples) {
        apples.add(new Apple());
        apples.add(new Jonathan());
    } 
```

这段代码的作者说

> 参数 apples 是某种类型的 List，它是 Apple 的基本类型；因此您知道添加 Apple 或 Apple 的子类型是安全的。由于下限是苹果，

乔纳森是苹果的一个子类。

但是当我尝试这个时

```
 List<Jonathan> loj = new ArrayList<Jonathan>();
    listSuper(loj); 
```

它给了我这个错误

```
The method listSuper(List<? super Apple>) in the type Basket<T> is not applicable for the arguments (List<Jonathan>) 
```

哪里`listSuper`看起来像这样

```
static void listSuper (List<? super Apple> cont) {} 
```

两者有何不同？

还有什么让我对我发布的第一个代码感到困惑的是我认为？super T 表示 T 的任何基本类型。但从外观上看，他添加了 T 的子类型。我很困惑。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T14:05:21.093

`List<? super Apple>`表示 a`List`你可以添加`Apple`到（因为`Jonathan` *是 a* `Apple`，你也可以将`Jonathan`s 放入`List`该类型的 a 中）。

它可以是`List<Apple>`,`List<Fruit>`或`List<Object>`, 但不是`List<Jonathan>`, 因为你不能将任意`Apple`s 放入`List<Jonathan>`. 如您所见，在这种情况下`?`可以是一个`Apple`或任何它的超类。

`List<? extends Apple>`意味着`List`你可以从中得到一个`Apple`。它可以是`List<Apple>`or `List<Jonathan>`，但不是`List<Fruit>`，因为`List<Fruit>`不能保证只包含`Apple`s。

这种解释被称为“生产者- `extends`，消费者- `super`”规则：如果参数充当元素的消费者，则应使用 声明`super`，反之亦然。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-06T14:04:29.520

`Jonathan`是 的子类型`Apple`，而不是超类型。它会匹配`<? extends Apple>`但不匹配`<? super Apple>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T14:04:07.010

代码的作者是错误的。您不能将 Apple 的子类传递给采用 ? 超级苹果，只有苹果本身和苹果的超类。如果您希望能够添加 Apple 的子类，您需要使用 ? 扩展苹果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T14:05:54.853

type 参数必须是 Apple 的*超类型*，而不是*子类*，这是什么`Jonathan`。因此，例如，这将是有效的：

```
List<Fruit> loj = new ArrayList<Fruit>();     
listSuper(loj); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T14:11:04.623

> 两者有何不同？
> 
> 还有什么让我对我发布的第一个代码感到困惑的是我认为？super T 表示 T 的任何基本类型。但从外观上看，他添加了 T 的子类型。我很困惑。

您必须区分 (1) 可以插入通用列表的内容和 (2) 可以作为参数发送到具有通用列表参数的方法的内容。

1.  您可以插入 的子类型，`Apple`因为`apples`绑定类型参数是一个能够引用其所有子类型的基类。

2.  如果`Jonathan`不是 的超类型`Apple`，那么尝试将列表发送`Jonathan`到该方法通常是不正确的，因为我可以将`Apple`s 插入到 s 列表中`Jonathan`。然后你会有类型的引用`Jonathan`访问它一无所知的对象的属性和方法，这不是类型安全的。

# api - 使用“curl”的私有应用 API

> ID：12301671
> 
> 赞同：1
> 
> 时间：2012-09-06T13:52:57.317
> 
> 标签：api, curl, private, shopify

我正在尝试使用`curl`私有应用程序 API，并已成功访问我的商店，但收到一条错误消息，要求`curl`在 PHP 中修改当前产品。下面是我使用的代码

（我将 xml 文件作为 input.xml 包含修改详细信息并使用产品 id 尝试了 sku）是否有任何地方可以一键修改超过 250 个产品？

```
//php
curl -v -X PUT -d @input.xml -H 'Content-Type: application/xml'(<-- this is line 2) 
'https://myapikey:mypassword@myshopdomain/admin/products/product_id.xml'

// and i got this error message 
"Parse error: syntax error, unexpected T_STRING in /home/content/s/o/n/song2660/html/curltest.php on line 2" 
```

# c# - 枚举相等（和 EventHandlerList 的键）

> ID：12301676
> 
> 赞同：2
> 
> 时间：2012-09-06T13:53:10.517
> 
> 标签：c#, events

# 副标题：EventHandlerList 键的类型可以不是对象吗？

我想使用枚举存储我想在 EventHandler 中拥有的键。

```
public enum EventKey
{
    OnBark, OnCry
}

public EventHandlerList EventList = new EventHandlerList();

public event ComplaintEventHandler OnBark
{
    add
    {
        EventList.AddHandler(EventKey.OnBark, value);
    }
    remove
    {
        EventList.RemoveHandler(EventKey.OnBark, value);
    }
}

var handler = EventList[eventKey] as ComplaintEventHandler; 
```

>

```
handler = null 
```

事实证明它不起作用。但如果我使用声明为（[如上所示](http://msdn.microsoft.com/en-us/library/8843a9ch "微软")）的键，它会起作用：

```
static object EventKeyOnTap = new object(); 
```

在阅读了一些 mscorlib 的代码后，我发现问题出`next.key == key`在

```
private EventHandlerList.ListEntry Find(object key)
{
    EventHandlerList.ListEntry next = this.head;

    while (next != null && next.key != key)
    {
        next = next.next;
    }
    return next;
} 
```

两个比较的键都来自 my `Enum`，但它们不相等！我猜它来自一些隐式转换`object`（存储在列表中的键是 type `object`），但对这些低级概念不够流畅。

我的猜测对吗？

## `Enum`在 an 中使用 an 作为键的最佳方法是`EventHandlerList`什么？

~~现在我将创建我自己`EventHandlerList`的`Enum`作为键类型。~~

现在我`EventHandlerList`用一个构造函数创建了我自己的`Func<object, object, bool>`，然后我用它来代替前面提到的相等比较。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T14:24:48.123

试试这个代码。你能解释一下输出吗？

```
var bark1 = (object)EventKey.OnBark;
var bark2 = (object)EventKey.OnBark;

Console.WriteLine(bark1 != bark2);
Console.WriteLine(bark1.Equals(bark2)); 
```

如果是，我不知道你为什么问这个问题。如果不是，你绝对应该了解**值类型**、**引用类型**和**装箱**。

简而言之，`AddHandler`方法接受`object`参数，因此当您调用时，您的键（即值类型）被装箱：

```
EventList.AddHandler(EventKey.OnBark, value); 
```

如果使用相同的枚举键调用此方法两次，则键将被装箱两次，实际上会创建堆中的两个不同对象。

这就是这个检查`next.key != key`内部`Find`方法失败的原因（它比较堆中两个单独对象的地址）。

EventHandlerList 是密封类，因此您不能影响其内容，但在您自己的代码中，您可以通过更好的检查来处理这种情况：

```
next.key.Equals(key) 
```

# sql-server - XACT_ABORT 是否可以被 sql server 设置覆盖，以便将其设置为 on 无效？

> ID：12301679
> 
> 赞同：0
> 
> 时间：2012-09-06T13:53:23.950
> 
> 标签：sql-server

XACT_ABORT 是否可以被 sql server 设置覆盖，以便将其设置为“ON”无效？

谢谢！

PS我问一下sql server 2005 db。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T14:03:24.617

将其设置为 ON 将对会话有效

# grails - Grails 2.0 错误中的模拟测试

> ID：12301689
> 
> 赞同：3
> 
> 时间：2012-09-06T13:53:42.033
> 
> 标签：grails, mocking, gmock

我最近将 Grails 1.3.7 项目升级到 Grails 2.0.4，并注意到我的许多带有模拟的单元测试已经开始失败。控制器测试似乎顺利通过，当您让服务相互协作并尝试模拟对协作者的调用时，问题就出现了。关于它的奇怪部分是，如果我运行单个测试，它会通过，但是一旦我运行整个套件，它们就会失败并给出错误：

```
No more calls to 'getName' expected at this point. End of demands.
junit.framework.AssertionFailedError: No more calls to 'getName' expected at this point. End of demands. 
```

我什至尝试过使用 GMock 而不是 new MockFor()，但得到了这个非常相似的错误：

```
No more calls to 'getSimpleName' expected at this point. End of demands.
junit.framework.AssertionFailedError: No more calls to 'getSimpleName' expected at this point. End of demands. 
```

这是一个人为的示例，展示了如何复制我得到的错误，以及 GitHub 上的整个示例项目[https://github.com/punkisdead/FunWithMocks](https://github.com/punkisdead/FunWithMocks)。关于如何完成这项工作的任何想法？

酒吧控制器：

```
package funwithmocks

class BarController {

  def barService
  def fooService

  def index() { }
} 
```

酒吧服务：

```
package funwithmocks

class BarService {

  def fooService
  def bazService

  def serviceMethod() {

  }
} 
```

BarController测试：

```
package funwithmocks

import grails.test.mixin.*
import org.junit.*
import groovy.mock.interceptor.MockFor

/**
 * See the API for {@link grails.test.mixin.web.ControllerUnitTestMixin} for usage instructions
 */
@TestFor(BarController)
class BarControllerTests {

  def fooService
  def barService

  @Before
  public void setUp() {
    fooService = new MockFor(FooService)
    fooService.use {
      controller.fooService = new FooService()
    }

    barService = new MockFor(BarService)
    barService.use {
      controller.barService = new BarService()
    }
  }

  @Test
  void doSomething() {
    controller.index()
  }
} 
```

BarServiceTests：包 funwithmocks

```
import grails.test.mixin.*
import org.junit.*
import groovy.mock.interceptor.MockFor

/**
 * See the API for {@link grails.test.mixin.services.ServiceUnitTestMixin} for usage instructions
 */
@TestFor(BarService)
class BarServiceTests {

  def fooService
  def bazService

  @Before
  public void setUp() {
    fooService = new MockFor(FooService)
    fooService.use {
      service.fooService = new FooService()
    }

    bazService = new MockFor(BazService)
    bazService.use {
      service.bazService = new BazService()
    }
  }

  @Test
  void callSomeService() {
    service.serviceMethod()
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T14:51:00.860

您不应该将新的测试 mixin 与`MockFor`groovy 类结合起来。用方法替换所有`MockFor`实例`mockFor`。

[http://grails.org/doc/latest/guide/testing.html#mockingCollaborators](http://grails.org/doc/latest/guide/testing.html#mockingCollaborators)

# php - Codeigniter 更新数据库：在输入字段中回显数据并在提交时更新

> ID：12301691
> 
> 赞同：1
> 
> 时间：2012-09-06T13:53:58.473
> 
> 标签：php, codeigniter, activerecord, updatemodel

我正在使用 Codeigniter 框架发展我的技能。我已经查看了数据并将其插入到数据库中，发现更新数据更加棘手。我见过的大多数教程都是在代码中输入值，而不是从数据库中提取选定的 id 并在表单字段中回显。到目前为止，我有：

新闻模型：

```
function editArticle($data) {
        $data = array(
                       'title' => $title,
                       'content' => $content,
                       'author' => $author
                    );

        $this->db->where('id', $id);
        $this->db->update('news', $data, array('id' =>$id));

    } 
```

控制器：

```
 public function update_entry() {
        //load the upate model
        $this->load->model('update_model');

        //get the article from the database
        $data['news'] = $this->news_model->get_article($this->uri->segment(4));

        // perform validation on the updated article so no errors or blank fields
        $this->load->library('form_validation');

        $this->form_validation->set_rules('title', 'Title', 'trim|required');
        $this->form_validation->set_rules('content', 'Content', 'trim|required');
        $this->form_validation->set_rules('author', 'Author', 'trim|required');

        // If validation fails, return to the edit screen with error messages
        if($this->form_validation->run() == FALSE) {

            $this->index();

        }else{
            //update the news article in the database
            if($query = $this->update_model->update()) {

        }else{
            redirect('admin/edit');
        }
    }
} 
```

看法：

```
 <?php echo form_open('admin/edit/edit_article'); ?>

        <?php echo form_input('title', set_value('title', 'Title')); ?><br />
        <?php echo form_textarea('content', set_value('content', 'Content')); ?><br />
        <?php echo form_input('author', set_value('author', 'Author')); ?>
        <?php echo form_submit('submit', 'Edit Article'); ?>
        <?php if (isset($error)){echo "<p class='error'>$error</div>";
        }?>
        <?php echo validation_errors('<p class="error">' );?>
         <?php echo form_close(); ?> 
```

1）我不确定如何回显数据（从用户从所示文章视图中单击编辑按钮时）以获取该 ID，然后在文本字段中的编辑页面上显示。

2）然后让用户提交更新的数据并发布到数据库中？

对于构建我的其余控制器/视图文件的任何指导或帮助，我将不胜感激，因为我已经在这方面工作了一天多！

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:04:59.393

你还没有给出你的观点的所有代码，所以我不确定你有多少是正确的，你有多少是错误的，但我会提到一些我能看到的东西 -

您似乎没有像`$this->load->view('edit', $data);`（请参阅[http://codeigniter.com/user_guide/general/views.html](http://codeigniter.com/user_guide/general/views.html)）那样从当前字段的内容所在的控制器调用您的视图`$data`。

要预填充表单字段，请将当前字段值放在第二个参数中，`set_value()`例如`set_value('title', $article->title)`.

您的模型还需要处理提交的表单 (in `$this->input->post`)，然后在模型中调用更新查询。

（我不得不说 CodeIgniter 文档在这方面不是很好 - 你必须查看[Form Helper](http://codeigniter.com/user_guide/helpers/form_helper.html)和[Form Validation Class](http://codeigniter.com/user_guide/libraries/form_validation.html)文档，以及跟踪 Views （上面的链接）、[Controllers](http://codeigniter.com/user_guide/general/controllers.html)和[Models](http://codeigniter.com/user_guide/general/models.html)（加上一两个其他人，我不应该怀疑））。

# javascript - Javascript重定向循环直到成功

> ID：12301693
> 
> 赞同：0
> 
> 时间：2012-09-06T13:54:04.453
> 
> 标签：javascript, html, web

这是我们用于重定向的 javascript 的摘录：

```
<script language="javascript" type="text/javascript">

    var THE_URL = "http://www.google.co.uk";

    function onPageLoad()
    {
        setTimeout('pageRedirect()', 5000);
    }

    function pageRedirect()
    {
        window.location = THE_URL;
    }
</script>

<body onload="onPageLoad()">
...
</body> 
```

但有时页面`THE_URL`不可用，因为服务器已关闭。在这种情况下，我们希望刷新当前页面，以便它可以一次又一次地尝试加载页面，直到成功。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T13:58:35.087

这将不起作用，因为您的 JS 代码一旦被重定向就会停止执行。您可能应该使用 XHR 请求让一些服务器检查该站点是否在循环中为您准备就绪，并且仅在检测到该站点可用后才进行重定向。

# java - 当 Arraylist 大小为 139 时，索引 6 上的 IndexOutOfBoundsException

> ID：12301696
> 
> 赞同：1
> 
> 时间：2012-09-06T13:54:18.867
> 
> 标签：java, list, exception, arraylist, indexoutofboundsexception

我有一个名为 A 的类。在这个类中，我有一个 String 名称以及这个 String 的 setter 和 getter。我还有一个正在初始化的列表，如下所示：

```
List<A>myList = ArrayList<A>(SomeOtherList); 
```

现在，当我检查 ArrayList 的大小时，我可以看到列表的大小是 139，但是当我尝试获取索引 6 中的值时，我得到了

`java.lang.IndexOutOfBoundsException: Index: 6, Size: 6.`

但是，如果我尝试在 for 循环中打印 0 - 138 的值，我将不会得到异常，

```
String name = myList.get(6).getName(); // Exception

for(int i = 0 ; i < 139 ; i++){
    System.out.println(myList.get(i).getName());
}//will work 
```

有没有人遇到过这个问题？？？

for 循环将所有 139 个名称打印到控制台，但是当代码到达 get 函数的行时，我得到了流异常：

```
Caused by: java.lang.IndexOutOfBoundsException: Index: 6, Size: 6
    at java.util.ArrayList.RangeCheck(ArrayList.java:547)
at java.util.ArrayList.get(ArrayList.java:322)
at com.icap.dashboard.DashboardPage.getSelectionFromCookie(DashboardPage.java:337)
at com.icap.dashboard.DashboardPage.addCCYPanelAndChannels(DashboardPage.java:149)
at com.icap.dashboard.DashboardPage.<init>(DashboardPage.java:107)
... 52 more 
```

我使用 Maven 编译我的项目，ArrayList 的初始化是使用 Collection Nanes

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T14:22:26.260

这有效：

```
import java.util.*;

public class StackOverflow {

    public static void main(String[] args) {
        List<A> SomeOtherList = new ArrayList<A>();
        for(int i = 0; i < 139; i++) {
            SomeOtherList.add(new A().setName(String.valueOf(i)));
        }
        List<A> myList = new ArrayList<A>(SomeOtherList);

        System.out.println("random access: " + myList.get(6).getName());

        for(int i = 0 ; i < myList.size() ; i++){
            System.out.println(myList.get(i).getName());
        }

    }

    public static class A {
        String name;

        public A setName(String theName) { this.name = theName; return(this); }
        public String getName() { return(this.name); }
    }
} 
```

尝试将这个工作示例与您的数据一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T14:51:39.163

错误消息不言自明：您正在尝试获取仅包含 6 个元素的数组的第 6 个元素。而且，由于数组索引从 0 开始，您可以要求的最高可能索引是 5。

您的代码和描述：

```
String name = myList.get(6).getName(); // Exception

for(int i = 0 ; i < 139 ; i++){
    System.out.println(myList.get(i).getName());
}//will work 
```

根本不可能，因为调用

```
myList.get(6).getName(); 
```

将在 for 循环内进行。对于您描述的可能的场景， myList 在两种情况下必须不同。

# google-app-engine - 在 Java 中的 App Engine 数据存储区中按键过滤

> ID：12301700
> 
> 赞同：4
> 
> 时间：2012-09-06T13:54:30.980
> 
> 标签：google-app-engine

你会认为这将是一个容易回答的问题。

在 Java 中，我如何按实体的键（不是恰好是 type 的属性`Key`，而是它的实际键——我们在关系数据库领域中称之为“主键”）进行过滤？

我不想获得具有特定键的单个实体。我实际上确实想做一个过滤器并返回实体的一个子集。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-06T15:38:22.793

诀窍是使用`Entity.KEY_RESERVED_PROPERTY`代替属性名称：

```
Query q = new Query("MyEntity");
q.setFilter(new Query.FilterPredicate(Entity.KEY_RESERVED_PROPERTY, 
                Query.FilterOperator.GREATER_THAN,
                KeyFactory.createKey("MyEntity", "somevalue"))); 
```

这将找到`MyEntity`键大于 的所有实体`somevalue`。

# version-control - 将 TFS 2008 源代码迁移到 TFS 2010

> ID：12301701
> 
> 赞同：2
> 
> 时间：2012-09-06T13:54:34.507
> 
> 标签：version-control, tfs, tfs-migration

我想将所有源代码从 TFS 2008 服务器迁移到新安装的 TFS 2010。没有要迁移的工作项、报告或门户，只有源代码。我们想要迁移到新的流程模板，并且不想升级 TFS 2008 项目中使用的模板。有什么好的工具可以只迁移源代码吗？我已经进行了一些测试，`TimelyMigrations` `TfsToTfs`但是在迁移大量源代码时它们似乎效果不佳。

有没有人尝试过使用 Team Foundation Server 集成工具？我想您需要先将 TFS 2008 升级到 TFS 2010，然后才能使用我们要使用的流程模板（使用新的门户和报告）将源代码移动到新的 TPC/TP。这个对吗？

# mysql - MySQL 从站不

> ID：12301703
> 
> 赞同：1
> 
> 时间：2012-09-06T13:54:43.203
> 
> 标签：mysql, master-slave, slave

我有一个在主服务器运行后启动的从服务器。我在 master bin 日志中的一个位置启动它，那时我开始在 master 上导入数据库。这个从站一直在运行，但现在卡住了，没有进展。它一直停留在中继主日志 000055 和位置数小时。
show slave status的结果：

```
mysql> show slave status \G
*************************** 1\. row ***************************
Slave_IO_State: Waiting for master to send event
              Master_Host: db10.domain.com
              Master_User: replicator
              Master_Port: 3306
            Connect_Retry: 60
          Master_Log_File: DB10-bin.000102
      Read_Master_Log_Pos: 917727958
           Relay_Log_File: dbbk9-relay-bin.000152
            Relay_Log_Pos: 863694346
    Relay_Master_Log_File: DB10-bin.000055
         Slave_IO_Running: Yes
        Slave_SQL_Running: Yes
          Replicate_Do_DB:
      Replicate_Ignore_DB:
       Replicate_Do_Table:
   Replicate_Ignore_Table:
  Replicate_Wild_Do_Table:
Replicate_Wild_Ignore_Table: %.rmallaccountinfo,%.rmaccountbalance,%.rmoldestcharge,%.rmautotemp,%.rmitemtemp,%.rmcust
               Last_Errno: 0
               Last_Error:
             Skip_Counter: 0
      Exec_Master_Log_Pos: 863694199
          Relay_Log_Space: 56169138270
          Until_Condition: None
           Until_Log_File:
            Until_Log_Pos: 0
       Master_SSL_Allowed: No
       Master_SSL_CA_File:
       Master_SSL_CA_Path:
          Master_SSL_Cert:
        Master_SSL_Cipher:
           Master_SSL_Key:
    Seconds_Behind_Master: 842902
Master_SSL_Verify_Server_Cert: No
            Last_IO_Errno: 0
            Last_IO_Error:
           Last_SQL_Errno: 0
           Last_SQL_Error:
Replicate_Ignore_Server_Ids:
         Master_Server_Id: 100 
```

一组中的 1 行（0.00 秒）

我在主二进制日志中查找该位置的内容，它只是一个放置临时表：

```
# at 863694053
#120827 15:32:50 server id 100  end_log_pos 863694199   Query   thread_id=6068      exec_time=0     error_code=0
SET TIMESTAMP=1346095970/*!*/;
DROP TEMPORARY TABLE IF EXISTS `rmtemptableinclude` /* generated by server */
/*!*/;
# at 863694199
#120827 15:32:51 server id 100  end_log_pos 863694282   Query   thread_id=7152   exec_time=1     error_code=0
SET TIMESTAMP=1346095971/*!*/;
BEGIN
/*!*/; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T16:53:01.757

每当我看到某些东西的复制挂起时，STATUS 输出中都会显示一个错误...

您可以尝试在复制中跳过一条语句：

```
STOP SLAVE;
SET GLOBAL SQL_SLAVE_SKIP_COUNTER = 1;
START SLAVE; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T04:09:17.583

我刚刚经历了同样的事情，奴隶没有报告任何错误，只是卡在一个旧的“Read_Master_Log_Pos”上我执行了一个“STOP SLAVE;” 接着是“START SLAVE”；现在它正在追赶主人！这有点令人不安，因为奴隶甚至没有报告它被卡住了。

# c# - asp.net C# sql 查询依赖于会话数据

> ID：12301705
> 
> 赞同：0
> 
> 时间：2012-09-06T13:54:46.337
> 
> 标签：c#, asp.net, sql, code-behind

我有一个`Session`，它是 list `int`，我需要进行一个查询，该查询将只从数据库中获取那些具有.`PK`中存在的值的行`Session`。

我正在考虑用这个`IN`函数来做，或者用 1 个列和 Session 中的值创建一个新的数据表，然后做一个双连接，可能离开了......

我只是不知道如何从列表中制作表格。

到目前为止我所拥有的：

```
String ConnString = "Data Source=BRACO-PC\SQL1;Initial Catalog=DiplomskiSQL1SQL;Integrated Security=True";
SqlConnection Conn = new SqlConnection(ConnString);
Conn.Open();
DataTable ukosarici = new DataTable();
SqlDataAdapter da = new SqlDataAdapter("Select Proizvodi.ime, TipProizvoda.tip, Proizvodi.dimenzije, Proizvodi.cijena from Proizvod LEFT JOIN TipProizvoda On Proizvod.tip=TipProizvoda.id_t WHERE Proizvod.id_p IN ", Conn);
SqlCommandBuilder cmd = new SqlCommandBuilder(da);
da.Fill(ukosarici);
GridView1.DataSource = ukosarici;
GridView1.DataBind();
Conn.Close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T14:07:37.753

尝试如下更改您的 SqlDataAdapter 调用

```
 List<int> list ; // Assign with your session int list values
            List<string> l2 = list.ConvertAll<string>(delegate(int i) { return i.ToString(); });
            string query = "Select Proizvodi.ime, TipProizvoda.tip, Proizvodi.dimenzije, Proizvodi.cijena from Proizvod LEFT JOIN TipProizvoda On Proizvod.tip=TipProizvoda.id_t WHERE Proizvod.id_p IN (";
            query = query + string.Join(",", l2.ToArray()) + ")";
            SqlDataAdapter da = new SqlDataAdapter(query, Conn); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T13:57:30.877

`INSERT`创建一个临时表或表变量，使用or将整数插入其中`BULK INSERT`，在 SQL 查询中进行连接，然后删除临时表或表变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T14:05:31.027

有很多方法可以做到这一点，但我首选的方法之一是将列表序列化为 CSV，例如“1,3,5,33”。然后，我使用自定义 SQL 表函数对数据库中的列表和过滤器进行反序列化：

```
SELECT * FROM mytable t
JOIN dbo.ufn_CSVtoTextList('1,3,5,33' , ',') csv
ON csv.[Entry] = t.Id 
```

ufn_CSVtoTextList 函数`CREATE`脚本如下：

```
CREATE FUNCTION [dbo].[ufn_CSVToTextlist] ( @StringInput nVARCHAR(max) ,@SepChar nchar(1) = ',')
RETURNS @OutputTable TABLE ( [Entry] nVarchar(255), [index] int identity (0,1) )
AS
BEGIN

    DECLARE @Entry   nVarChar(255)

    WHILE LEN(@StringInput) > 0
    BEGIN
        SET @Entry      = LEFT(@StringInput, 
                                ISNULL(NULLIF(CHARINDEX(@SepChar, @StringInput) - 1, -1),
                                LEN(@StringInput)))
        SET @StringInput = SUBSTRING(@StringInput,
                                     ISNULL(NULLIF(CHARINDEX(@SepChar, @StringInput), 0),
                                     LEN(@StringInput)) + 1, LEN(@StringInput))

        INSERT INTO @OutputTable ( [Entry] )
        VALUES ( @Entry )
    END

    RETURN
END 
```

# php - PHP fb api无需用户登录即可获取秘密组信息

> ID：12301709
> 
> 赞同：0
> 
> 时间：2012-09-06T13:55:00.633
> 
> 标签：php, facebook, facebook-graph-api, facebook-access-token

我是一个秘密组的成员，想要访问和使用 php 网站中的组信息。是否可以在没有最终用户登录的情况下访问秘密组？有没有办法将应用程序添加为组成员或设置“特殊”权限？我不想将组设置为公共组，因为成员不应该是公开的。

```
require "api/facebook.php";

$facebook = new Facebook(array(
    'appId'  => 'xxxxxxxxxxxxxxx',
    'secret' => 'xxxxxxxxxxxxxxxxxxxxxxxxxxxx',
));

$access_token = $facebook->getAccessToken();

    // try to fetch all events - error no user token provided
$ret = file_get_contents("https://graph.facebook.com/xxx/events?access_token=$access_token"); 
```

结果：

```
{
   "error": {
   "message": "A user access token is required to request this resource.",
   "type": "OAuthException",
   "code": 102
   }
} 
```

`getAccessToken`返回一个 App-Token，但我需要一个用户令牌。AFAIK 我需要用户登录才能获得用户令牌 - 对吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T14:33:31.340

如果允许，这将是一个安全问题。您应该无法在没有登录的情况下访问私人群组信息。想想您不属于您可以访问的其他组。您需要执行 oauth 才能访问私人群组。并且登录的用户必须是该组的一部分

# entity-framework - EF：部分类 - 访问适配器？

> ID：12301714
> 
> 赞同：0
> 
> 时间：2012-09-06T13:55:09.297
> 
> 标签：entity-framework

假设我有一张桌子`TabA`

```
namespace MyProject.Models.Database //<-- the same namespace as the EF's dbmx file
{
    public partial class TabA
    {
        public void Foo()
        { 
            //
        }
    }
 } 
```

在`Foo`方法内部，我需要对另一个与 不相关的表执行一些操作。`TabA`换句话说，我需要访问该方法内部的实体框架适配器。可能吗 ？

## 编辑

答案在这里[https://stackoverflow.com/a/11135157/106616](https://stackoverflow.com/a/11135157/106616)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:10:12.013

如果我正确理解了这个问题，我假设您有理由想要从 TabA 实体处理另一个实体。如果这是真的，我可以看到两种方法。

A) 如果您希望您的更改与 TabA 实体的其他潜在更改同时应用，那么您始终可以将上下文作为参数传递：

```
namespace MyProject.Models.Database //<-- the same namespace as the EF's dbmx file 
{ 
    public partial class TabA 
    { 
        public void Foo(YourDbContext context) 
        {  
            var otherTableQuery = from x in context.SecondTable
                             where ...
                             select x;

            foreach (var item in otherTableQuery)
            {
                item.Column1 = "A certain value";
            }
        } 
    } 
} 
```

您的调用方法可能如下所示：

```
public void DoChangesToTabA()
{
    using ( YourDbContext context = new YourDbContext())
    {
        var tabAquery = from x in context.TabA
                        where ...
                        select x;

        foreach( var item in tabAQuery)
        {
            item.LastModified = DateTime.Now;

            if(???)
            {

            }

        }
    }
} 
```

现在，您的更改将在您下次从调用方法调用 context.SaveChanges() 时应用。

# sql - MS Access FE / SQL BE 保存后需要自动编号以填充表单

> ID：12301715
> 
> 赞同：2
> 
> 时间：2012-09-06T13:55:10.120
> 
> 标签：sql, database, ms-access, ms-access-2007

所以，我有一个带有 SQL BE 的 Access 2007 FE。我正在使用绑定表单来添加新记录或更新现有记录。

我的问题是：与本地 Access 表不同，使用 SQL 表会导致自动编号字段（“SeqID”）在保存记录之前不可用。我在表单上有一个“保存”按钮，它对新记录执行各种验证步骤，然后在成功验证后将新记录添加到表中。那时，我可以在我的代码中获取该记录的自动编号，但问题是我无法获取表单以在 SeqID 字段中更新/显示它。因为它是一种绑定形式，所以我不能简单地更新 SeqID.Value。我需要更新这个字段，因为它稍后会用于其他事情，例如更改字段的审计跟踪等。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T14:22:19.713

在这些线上尝试一些东西。这个对我有用：

```
Private Sub AText_AfterUpdate()
   Me.Dirty = False
   Me.Recalc
End Sub 
```

如果实验有效，只需将步骤融入代码流程即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T16:39:48.697

当使用 SharePoint 或 SQL 服务器，或者事实上大多数基于服务器的数据库时，在记录保存时间之前不会生成自动编号 ID。使用表单 + 子表单，当焦点移动到子表单时，Access 将始终执行自动记录保存，因此将子记录附加到这些父表单 + 记录不会有问题。

在绑定表单的情况下，获取自动编号 ID 的唯一方法是强制保存记录。简单的代码是这样的：

```
If isnull(me!ID) = true then
    ' we don't have a record primary key yet, save record
   Me.Dirty = false
End if 
```

此时，您可以使用PK自动编号

```
MsgBox "pk = " & me!id 
```

因此，一个简单的 me.Dirty = false 将保存记录，并将强制生成 ID 和代码，然后可以免费使用 + 随意获取 PK 自动编号。

# java - spring mvc jquery ajax响应作为json编码问题

> ID：12301719
> 
> 赞同：1
> 
> 时间：2012-09-06T13:55:27.273
> 
> 标签：java, jquery, spring, spring-mvc, character-encoding

最近我对来自服务器的 JSON 响应中的波兰字符有很大的问题。我对此有简单的 Ajax 请求：

```
jQuery.ajax( "/GetSimpleRuleList",
    {
        type:"GET",
        responseType:"application/json;charset=utf-8",
        contentType:"application/json;charset=utf-8",
        cache:false
    } ).done( function ( data )
    {
        console.log( data );
        //nevermind here
    } ); 
```

并在服务器端适当的控制器：

```
@RequestMapping(value = "/GetSimpleRuleList", method = RequestMethod.GET)
public
@ResponseBody
String getRuleList( ServletResponse response )
{
    //magically getting my list here
     response.setCharacterEncoding( "UTF-8" );
    return //Using JACKSON ObjectWriter here
} 
```

现在我 100% 确定在服务器端和我从中获取数据的数据库上进行编码是可以的，这没问题。但是当从服务器读取响应时，它是：

```
??? 
```

而不是波兰字符，如：

```
ąćź 
```

此外，它仅在接收到来自服务器的响应时才会失败，而发送带有数据的请求是正确编码的。

在我的 web.xml 中，我有字符编码过滤器。

有什么帮助吗？我没主意了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-28T10:35:37.367

尝试将您的响应类型更改为 org.springframework.http.ResponseEntity

```
public ResponseEntity<String> getRuleList(){
    HttpHeaders responseHeaders = new HttpHeaders();
    responseHeaders.add("Content-Type", "application/json; charset=utf-8");
    responseHeaders.setCacheControl("no-cache, max-age=0"); 
    String allyourjson = "yourjsongoeshere";
    return new ResponseEntity<String>(allyourjson, responseHeaders, HttpStatus.OK);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T14:50:42.250

> 现在我 100% 确定在服务器端和我从中获取数据的数据库上进行编码是可以的

如果您的响应中不存在 Content-Type 标头，请尝试添加它：

```
response.setHeader("Content-Type", "application/json;charset=UTF-8") 
```

从数据库读取时确保使用 UTF-8 字符集。Jackson 的编码默认为 UTF-8，所以你的数据可能没有使用 UTF-8 编码？！？

从数据库读取时使用什么编码？也许是 ISO-8859-2？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-04T09:59:24.887

您可以在控制器类上方使用 spring 注释**RequestMapping来接收****application/json;utf-8**在所有响应中

```
@Controller
@RequestMapping(produces = {"application/json; charset=UTF-8","*/*;charset=UTF-8"})
public class MyController{
 ...
@RequestMapping(value = "/GetSimpleRuleList", method = RequestMethod.GET)
public
@ResponseBody
String getRuleList( ServletResponse response )
{
    //magically getting my list here
     response.setCharacterEncoding( "UTF-8" );
    return //Using JACKSON ObjectWriter here
}
 ...
} 
```

# android - 输入流错误

> ID：12301721
> 
> 赞同：0
> 
> 时间：2012-09-06T13:55:33.273
> 
> 标签：android

这是我遇到的一个奇怪的错误，在尝试下载文件时，我需要打开输入流，然后将读取的数据写入输出流......输入流不起作用......调试时没有错误。 .但它似乎只是挂在那里，键盘上的 F6 似乎不起作用....必须终止调试会话...我做错了什么？？？

```
 try{
        URL url = new URL(pdfurl);
        URLConnection conexion = url.openConnection();
        conexion.connect();

        int lenghtOfFile = conexion.getContentLength();
        Log.d("k", "Lenght of file: " + lenghtOfFile);
        //InputStream s=file
        InputStream s=url.openStream();
        InputStream input = new BufferedInputStream(s);
        OutputStream output = new FileOutputStream(file);

        byte data[] = new byte[1024];

        long total = 0;

         while ((count = input.read(data)) != -1) {
          total += count;
          publishProgress((int)((total*100)/lenghtOfFile));
          output.write(data, 0, count);
         }

         output.flush();
         output.close();
         input.close();
        } 
         catch (Exception e) 
        {
         download_flag = true;
         String s=e.getMessage().toString();
         Log.d("k","exception occured"+s);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T14:06:47.160

你可以尝试一个 HttpGet 请求：

```
HttpGet httpGet = new HttpGet(url);
HttpClient httpclient = new DefaultHttpClient();
// Execute HTTP Get Request
HttpResponse response = httpclient.execute(httpGet);
content = response.getEntity().getContent(); 
```

# c++ - cpp中的对象范围

> ID：12301723
> 
> 赞同：0
> 
> 时间：2012-09-06T13:55:41.823
> 
> 标签：c++, object, scope

谁能解释在cpp中创建的对象的范围

```
#include <iostream>
using namespace std;

class box
{
    public:
        int i;
        box* doubled ();
};

box* box::doubled ()
{
    box *temp = new box;
    temp->i = 2*this->i;
    return temp;
}

int main ()
{
    box *obj1 = new box;
    obj1->i = 5;

    box *obj2;
    obj2 = obj1->doubled();
    delete obj1;
    cout << "i = " << obj2->i << endl;
    return 0;
} 
```

在上面的示例代码中，obj2 是一个指针，它保存由函数**Doubled**创建的内存。temp 的范围应该只对 double 的函数有效，但它也可以在 main 函数中访问。

所以任何人都可以解释为什么会这样。我想这是一个小疑问，但无法弄清楚。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T13:58:11.423

您没有删除在函数中动态创建的对象`doubled`，因此指向它的指针当然仍然有效。运算符`new`动态分配对象，并且它们保留在内存中，直到显式销毁。只有*指向内存地址*（`temp`变量）的指针被破坏了，但是由于您返回了它的值（地址），所以内存仍然属于程序。实际上**不删除**它会造成内存泄漏。

`std::unique_ptr`如果您希望在范围结束后删除对象，则应该使用。

**这是一个没有动态分配的快速示例：**

```
T* foo ()
{
    T T_instance;
    return &T_instance;
} 
```

它甚至不应该编译，并带有类似于 的消息`returning address of local variable or temporary`，表明`T_instance`在程序退出后将被销毁`foo()`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T13:57:50.517

当你这样做时：

```
box *temp = new box; 
```

您创建了一个动态分配的`box`对象，该对象超出了所有范围，并创建了一个位于本地范围内的`box*`被调用对象。`temp`您必须自己通过调用`delete`指向它的指针来释放动态分配的对象，例如，像这样：

```
delete temp; 
```

上面代码行中唯一尊重范围的是实际的指针`temp`，它指向那个对象。

```
{
   box *temp = new box; // local box* points to dynamically allocated object
}
// temp is out of scope, but the object it pointed to is still alive (and unreachable) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T13:58:51.987

的返回值`doubled`是一个由 分配的指针`new`。该指针的值是`box`堆上对象的地址，因此虽然`temp`是临时的，但它的值存储在`obj2`这一行

```
obj2 = obj1->doubled(); 
```

所以当你通过`obj2`它访问数据时仍然有效。

# c++ - 如何通过 C++ bho 访问 onload 事件

> ID：12301726
> 
> 赞同：1
> 
> 时间：2012-09-06T13:55:56.337
> 
> 标签：c++, events, browser, invoke, bho

我在使用 IWebBrowser 时遇到问题。我的项目是，当用户单击 IE 工具栏中的按钮时，会显示一个弹出窗口（由`CreateWindow`Method 创建）。弹出窗口用于显示 HTML。我使用一个新的 IWebBrowser 点来显示，而不是在 SetSite 方法中设置的点。但我无法从弹出窗口中捕获加载事件。

我的 bho 扩展了 IDispatch，并且在 Invoke 方法中，它可以从在浏览器中打开的网站而不是弹出窗口中捕获加载事件！

我的代码有问题吗？如果我想捕捉加载事件，我该怎么办？

# objective-c - 算法日历目标c

> ID：12301727
> 
> 赞同：-2
> 
> 时间：2012-09-06T13:56:02.367
> 
> 标签：objective-c, ios, calendar

我想创建一个显示月份和日期的日历。我不想使用 API 或库。我想弄清楚如何创建日历的算法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T14:07:59.510

最快的方法是计算一个月的天数，然后编写一个例程，像日历应用程序一样以图形方式显示这一天。

您可以使用一个例程来显示`UIButton`每一天并将其显示为虚拟网格。在每一行中，您应该显示 7 天（从周日到周六），然后在下一行显示接下来的日子。

# html - HTML 选择下拉列表中选项值的样式在 Chrome 和 Safari 中不起作用

> ID：12301729
> 
> 赞同：9
> 
> 时间：2012-09-06T13:56:09.460
> 
> 标签：html, css, html-select

html 下拉列表中选项值的内联 CSS 样式不适用于 Chrome 和 Safari，但似乎适用于 Firefox 和 IE。

HTML 代码片段：

```
<option style="color:#4f5652;background:#f0f0ef;hite-space:nowrap;-webkit-appearance:button;text-overflow:ellipsis; padding:5px 4px 3px 4px;border-bottom:1px solid green" value="project">Project</option> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-07-25T12:14:03.473

`color`样式在`<option>`带有当前版本的 Chrome、Safari、Firefox、IE 和 Opera 的 Windows 7 以及带有 Firefox 的 Mac 上的元素中运行良好；但在带有 Chrome 和 Safari 的 Mac 上似乎是无操作的。对我来说似乎是一个错误。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-06T14:12:35.940

简短的回答——你不能在基于 Webkit 的浏览器中这样做。即`padding`看看[这里](https://stackoverflow.com/a/4749864/1499781)

为了克服您的问题，您可以将您的问题更改`<select>`为列表`<ul>`并设置其项目的样式`<li>`。这将保证在每个浏览器中都有效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-24T11:22:59.993

请尝试使用这个

```
select {
      -webkit-appearance: none;
      -moz-appearance: none;
      appearance: none;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T14:36:22.810

尝试一下

```
<!DOCTYPE html>
<html>
<body>

<form action="form_action.asp">
Select your favorite car:
<select name="carlist">
  <option style="color:#4f5652;background:#f0f0ef;hite-space:nowrap;-webkit- appearance:button;text-overflow:ellipsis; padding:5px 4px 3px 4px;border-bottom:1px solid green" value="volvo">Volvo XC90</option>
  <option style="color:#4f5652;background:#f0f0ef;hite-space:nowrap;-webkit-appearance:button;text-overflow:ellipsis; padding:5px 4px 3px 4px;border-bottom:1px solid green" value="saab">Saab 95</option>
  <option style="color:#4f5652;background:#f0f0ef;hite-space:nowrap;-webkit-appearance:button;text-overflow:ellipsis; padding:5px 4px 3px 4px;border-bottom:1px solid green" value="mercedes">Mercedes SLK</option>
  <option style="color:#4f5652;background:#f0f0ef;hite-space:nowrap;-webkit-appearance:button;text-overflow:ellipsis; padding:5px 4px 3px 4px;border-bottom:1px solid green" value="audi">Audi TT</option>
</select>
<input type="submit" value="Submit" />
</form>

<p>Choose a car, and click the "Submit" button to send input to the server.</p>

</body>
</html> 
```

正如我们所见： [http ://www.w3schools.com/tags/att_option_value.asp](http://www.w3schools.com/tags/att_option_value.asp)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-19T23:52:40.090

如果您正在寻找`padding`解决方法：

*   您可以`height`用于顶部和底部。
*   因为`padding-left`你可以使用`text-indent`.

CSS：

```
select {
    height: 45px;
    text-indent: 5px;
} 
```

如果你确实需要使用`select`下拉菜单，否则你可以按照其他人的建议使用`ul`和`li`元素。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-09-06T14:12:27.833

我能够在 jsfiddle 上的 Chrome 中复制它。您可以将样式应用于`select`，如下所示：http: [//jsfiddle.net/aaronmacy/3uv8D/](http://jsfiddle.net/aaronmacy/3uv8D/)

# python - django python cumulus - 如何处理上传大量文件到云文件存储

> ID：12301731
> 
> 赞同：0
> 
> 时间：2012-09-06T13:56:19.450
> 
> 标签：python, django, django-file-upload

我在服务器上的临时文件夹中处理并保存了许多文件，现在我想将它们移动到我的 default_storage 位置（使用 django-cumulus 将 default_storage 设置为机架空间云文件）。

该过程开始正确上传文件，但在停止之前只管理不到一半的文件。我的猜测是它的内存问题，但我不知道如何去解决它。以下是相关代码：

```
listing = os.listdir(path + '/images')
listing.sort()

for infile in listing:
    image = open(path + '/images/' + infile, 'r')
    image_loc = default_storage.save(infile, ContentFile(image.read()))

    image.flush()
    image.close() 
```

以防万一它有所不同，我的服务器设置是 ubuntu 上的 rackspace 云 nginx 和 gunicorn

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T14:04:02.343

你可以试试[django-storages](http://django-storages.readthedocs.org/en/latest/index.html)。它是一个易于集成的自定义后端，还支持[rackspace](http://django-storages.readthedocs.org/en/latest/backends/rackspace-cloudfiles.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T17:26:59.903

最后，答案分为几个部分。首先，我必须向 cumulus 添加一个 TIMEOUT 设置（在 django-cumulus 文档中没有提到）。其次，我增加了 gunicorn 的超时时间。最后我增加了nginx的超时参数。

# postgresql - pgagent centos 6.2

> ID：12301733
> 
> 赞同：0
> 
> 时间：2012-09-06T13:56:26.387
> 
> 标签：postgresql, centos, pgagent

我已经成功地[在 CentOS 6.2 服务器上从源代码编译了 pgagent](https://stackoverflow.com/questions/12298247/pgagent-on-centos-64bit)。

当我尝试使用以下命令启动 pgagent 时：

```
/usr/bin/pgagent -l 2 hostaddr=serveur.com dbname=postgres user=postgres 
```

我收到以下错误消息：

```
DEBUG:      user         : postgres
DEBUG:      port         : 0
DEBUG:      host         : server.com
DEBUG:      dbname       : postgres
DEBUG:      password     : 
DEBUG:      conn timeout : 0
DEBUG: Connection Information:
DEBUG:      user         : postgres
DEBUG:      port         : 0
DEBUG:      host         : server.com
DEBUG:      dbname       : postgres
DEBUG:      password     : 
DEBUG:      conn timeout : 0
DEBUG: Creating DB connection: user=postgres host=server.com dbname=postgres
DEBUG: Database sanity check
DEBUG: Clearing zombies
WARNING: Query error: ERROR:  could not extend file "base/12870/12615": No space left on device
HINT:  Check free disk space.

WARNING: Query error: ERROR:  relation "pga_tmp_zombies" does not exist
LINE 1: INSERT INTO pga_tmp_zombies (jagpid) SELECT jagpid   FROM pg...
                    ^

WARNING: Query error: ERROR:  table "pga_tmp_zombies" does not exist

WARNING: Query error: ERROR:  could not extend file "base/12870/17167": No space left on device
HINT:  Check free disk space.

WARNING: Couldn't create the primary connection (attempt 1): ERROR:  could not extend file "base/12870/17167": No space left on device
HINT:  Check free disk space.
DEBUG: Clearing all connections
DEBUG: Connection stats: total - 1, free - 0, deleted - 1 
```

知道问题的根源吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T07:44:31.783

```
WARNING: Query error: ERROR:  could not extend file "base/12870/12615": No space left on device
HINT:  Check free disk space. 
```

您的磁盘空间不足，或者（不太可能）数据库用户已达到磁盘访问配额限制。对于某些平台和文件系统，您也可能在文件系统上用完了 inode。检查`df`。

# python - PySide 的 shiboken python 模块未找到

> ID：12301735
> 
> 赞同：1
> 
> 时间：2012-09-06T13:56:32.827
> 
> 标签：python, import, installation, pyside

PySide 安装成功，运行完美，但找不到导入 shiboken 模块的方法。现在我找到了关于通过 python 模块（[http://bugs.pyside.org/show_bug.cgi?id=902](http://bugs.pyside.org/show_bug.cgi?id=902)）公开 shiboken 函数的功能请求的讨论，但问题已解决。如果我理解正确的话，它是在 2012 年 1 月实施的。即使在我尝试安装 PySide 1.1.1 之后：

```
>>> import shiboken
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named shiboken 
```

我得到一个 ImportError 异常。如何安装 shiboken python 模块？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T16:27:45.937

看起来有人忘记更新 cmake: [bugs-PYSIDE-55](https://bugreports.qt.io/browse/PYSIDE-55)。

但是，我刚刚编译`shiboken-1.1.2`，问题似乎已解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T10:22:10.370

我相信在理想情况下，ekhumoro 的回答是完全正确的，不幸的是我没有那么幸运，二进制包仍然不允许使用 shiboken python 模块。我不得不手动编译它，但这部分也变得很棘手，因为它不能按照他们主页上的默认说明工作，可能是因为我使用的是 ubuntu 12.04，或者我不知道为什么。由于目标是使用 virtualenv 我遵循以下说明：

```
export PYSIDESANDBOXPATH=/path/to/my/virtualenv
export PATH=$PYSIDESANDBOXPATH/bin:$PATH
export PYTHONPATH=$PYSIDESANDBOXPATH/lib/python2.6/site-packages:$PYTHONPATH
export LD_LIBRARY_PATH=$PYSIDESANDBOXPATH/lib:$LD_LIBRARY_PATH
export PKG_CONFIG_PATH=$PYSIDESANDBOXPATH/lib/pkgconfig:$PKG_CONFIG_PATH

mkdir build
cd build
cmake .. -DCMAKE_INSTALL_PREFIX=$PYSIDESANDBOXPATH -DCMAKE_BUILD_TYPE=Debug -DENABLE_ICECC=0'
make
make install
sudo ldconfig 
```

这里的第一个问题是编译后，开始安装，想安装shiboken python模块，出现了这样的情况：

```
-- Installing: .../lib/python2.7/site-packages/shiboken.so
-- Removed runtime path from .../lib/python2.7/site-packages/shiboken.so 
```

然后我发现在某个地方我应该将此参数添加到 cmake：

```
-DCMAKE_SKIP_RPATH:BOOL=YES 
```

现在安装成功了，但是当我尝试在python中导入shiboken时，发生了这种情况：

```
import shiboken
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: libshiboken.so: cannot open shared object file: No such file or directory 
```

谷歌透露这个问题是因为 $LD_LIBRARY_PATH 不包含这些库所在的路径。首先，ubuntu 12（我认为 10 和 11 也是）不再使用 $LD_LIBRARY_PATH 环境变量，所以它甚至没有设置。所以即使路径不正确，因为我试图将未设置的变量与路径连接：

```
export LD_LIBRARY_PATH=$PYSIDESANDBOXPATH/lib:$LD_LIBRARY_PATH 
```

所以它将它视为两个常规字符串并将它们连接在一起。下面的片段显示了如何安全地加入它们以避免造成此类麻烦。但这也没有解决问题。由于运行 ldconfig 仍然没有更新任何内容，因此在 python 中的导入再次失败。谷歌也找到了最终的解决方案 :) 在 /etc/ld.so.conf.d/ 中创建一个新文件并将 $LD_LIBRARY_PATH 的内容放在那里，然后运行 ​​ldconfig。所以这是按预期工作的最终安装脚本：

```
#!/usr/bin/env bash
export PYSIDESANDBOXPATH=/path/to/my/virtualenv
export PATH="$PYSIDESANDBOXPATH/bin${PATH:+:$PATH}"
export PYTHONPATH="$PYSIDESANDBOXPATH/lib/python2.7/site-packages${PYTHONPATH:+:$PYTHONPATH}"
export LD_LIBRARY_PATH="$PYSIDESANDBOXPATH/lib${LD_LIBRARY_PATH:+:$LD_LIBRARY_PATH}"
export PKG_CONFIG_PATH="$PYSIDESANDBOXPATH/lib/pkgconfig${PKG_CONFIG_PATH:+:$PKG_CONFIG_PATH}"

mkdir build
cd build
cmake .. -DCMAKE_INSTALL_PREFIX=$PYSIDESANDBOXPATH -DCMAKE_SKIP_RPATH:BOOL=YES -DCMAKE_BUILD_TYPE=Debug -DENABLE_ICECC=0
make
make install
sudo sh -c "echo $LD_LIBRARY_PATH > /etc/ld.so.conf.d/shiboken.conf"
sudo ldconfig 
```

就是这样，我花了几个小时才弄清楚，希望这会拯救别人:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T19:19:20.930

以下是我在 Windows 上从源代码编译 shiboken.pyd 的方法，并使用 PySide-1.1.2 + Qt4.8.4 + msvc2010 进行了测试。

首先，手动下载shiboken-1.1.2.tar.bz2，解压。然后以这种方式编译它（您可能需要设置 virtualenv）：

```
python setup.py build --openssl=C:\dev\OpenSSL\1.0.0j\bin --qmake=C:\Qt\4.8.4\bin\qmake.exe 
```

完成后，我在以下位置获得了 shiboken.pyd：

```
PySide-1.1.2\pyside_install\py2.7-qt4.8.4-32bit-release\lib\site-packages\shiboken.pyd 
```

附言

但是，“PySide-1.1.2\build\lib”中缺少 shiboken.pyd，文件将安装到站点包中。这解释了为什么我无法通过使用以下方法从 PIP 编译 PySide 来获得 shiboken.pyd：

```
pip install PySide --install-option="--openssl=C:\dev\OpenSSL\1.0.0j\bin" --install-option="--qmake=C:\Qt\4.8.4\bin\qmake.exe" 
```

顺便说一句，在 Mac OS X 上，如果您使用 macports 安装 PySide，“import shiboken”也会失败，因为它安装到了错误的位置（“/opt/local/lib/python2.7/site-packages”而不是“ /opt/local/Library/Frameworks/Python.framework/Version/2.7/lib/python2.7/site-packages”）。将“/opt/local/lib/python2.7/site-packages”添加到 PYTHONPATH 将解决该问题。

pyside-setup 脚本中肯定存在错误。希望 Digia 可以在项目结束之前派人修复 PySide。

# jquery - 带有切换导航的 Jquery fadeTo

> ID：12301737
> 
> 赞同：0
> 
> 时间：2012-09-06T13:56:46.860
> 
> 标签：jquery, toggle

**问题**

我有一个侧面导航，我已经把它放在一起，到目前为止它工作正常。我正在尝试淡入面板上的一个小“关闭”按钮，以便用户在完成后可以轻松关闭切换面板。

我有一些东西可以做到这一点，但是如果你从一个导航项目点击到另一个，你会发现它变得混乱和不同步。

**jsFiddle**

[http://jsfiddle.net/visualdecree/4A23Z/37/](http://jsfiddle.net/visualdecree/4A23Z/37/)

**jQuery**

```
$(".sn a").on('click',function(){ // Sidenav panel script

    var panID = $("#" + $(this).data('panel') );

    $("div[id*='sn-pan-']")
    .stop()
    .hide({slide:'toggle'}, 400);

    $(panID)
    .css({'left' : '139px','overflow':'visible'})
    .stop()
    .animate({width:'toggle'}, 400)

        $(".control-view").stop().fadeOut("slow");  // Fadein menu close button
    $(".control-view").not(":visible").stop().delay(400).fadeTo("fast", 0.33);   

});

$('.sn').click(function(e) {
    $('ul.sidenav li').not(this).removeClass('active'); // Active class removal / add
    $(this).stop(true, true).toggleClass("active");    
});

$(".control-view").hover( // Hover effect for menu close button
    function () {
    $(".control-view").stop().hide().fadeTo("fast", 1); // Hover in
   }, 
    function () {
    $(".control-view").fadeTo("normal",0.33); // Fade back to previous set opacity
});

$('.control-view').click(function(e) {
        $("div[id*='sn-pan-']")
        .stop()
        .hide({slide:'toggle'}, 400);

        $('ul.sidenav li').not(this).removeClass('active');

        $(".control-view").stop().fadeOut("fast");
}); 
```

我很感激我的代码可能很乱，我正在学习，所以任何你能提供帮助的东西我都会感激并带走。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T14:22:48.860

换行试试

```
$(".control-view").stop().fadeOut("slow");  // Fadein menu close button 
```

到

```
$(".control-view").hide();  // Fadein menu close button 
```

基本上是选择器

```
$(".control-view").stop().fadeOut("slow"); 
```

正在淡出所有锚点（<a class="control-view"></a>），然后您立即尝试使用 $(".control-view").not(":visible" )....但实际上还没有隐藏锚点。

# mysql - mysql 按最近日期/小时之前或之后排序

> ID：12301740
> 
> 赞同：-1
> 
> 时间：2012-09-06T13:56:48.647
> 
> 标签：mysql, date

我有一个 mysql 表，其中有一列存储日期但不是日期格式，它是一个 varchar。

该列被调用`data_hora`并具有`dd/mm/yy`格式的日期，例如：`06/09/2012 15:00`，所以我必须在 mysql 查询中转换为日期格式。

我需要在当前时间之前或之后获取最接近的日期和小时，我想出了以下代码，但由于某种原因，它似乎只得到最接近的日期而不是小时，奇怪？！？！

```
SELECT str_to_date(data_hora, '%d/%m/%Y %H:%i') AS data_hora 
FROM requisicoes 
ORDER BY abs(DATE_FORMAT(NOW(),'%d/%m/%Y %H:%i') - data_hora) LIMIT 1 
```

**帮助 ：（**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T14:07:18.317

尝试这个：

您的 ORDER BY 条款必须更改

```
SELECT str_to_date(data_hora, '%d/%m/%Y %H:%i') AS data_hora 
FROM requisicoes 
ORDER BY abs(TIMEDIFF( NOW() , str_to_date(data_hora, '%d/%m/%Y %H:%i'))) LIMIT 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T14:00:55.450

您不应该格式化`NOW()`为字符串：它已经是一个`TIMESTAMP`值；取而代之的是，取所选列的当前[`UNIX_TIMESTAMP()`](http://dev.mysql.com/doc/en/date-and-time-functions.html#function_unix-timestamp)值与`data_hora`别名之间的（绝对）差异：`STR_TO_DATE()`

```
ORDER BY ABS(UNIX_TIMESTAMP() - UNIX_TIMESTAMP(data_hora)) 
```

如果可能的话，我建议更改您的架构，以便将您的`data_hora`列存储为`TIMESTAMP`: 这将大大提高此类查询的性能。

# c# - 如何将 int 转换为具有两个固定值的字节数组

> ID：12301743
> 
> 赞同：2
> 
> 时间：2012-09-06T13:56:57.300
> 
> 标签：c#, bytearray, arduino

我正在向 Arduino 发送五个字节：

```
byte[] { 0xF1, byte1, byte2, byte3, 0x33 } 
```

和的值`byte1`是动态的。第一个和最后一个字节总是相同的。`byte2``byte3`

字节值从 0 到 255。

如何简单地将`int`s 转换为字节并将它们放入我的字节数组中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T14:02:45.427

要从 int 获取字节数组，请使用：

```
 byte[] intAsArrayOfBytes = BitConverter.GetBytes(yourInt); 
```

然后你可以将值复制到你的数组

```
 byte[] { 0xF1, intAsArrayOfBytes[0], intAsArrayOfBytes[1], intAsArrayOfBytes[3], 0x33 } 
```

或者如果您只需要将 int 类型转换为 byte 类型并且您知道 0..255 之间的变量，请使用：

```
 byte byte1 = (byte) int1;
   byte byte2 = (byte) int2;
   byte byte3 = (byte) int3; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T13:59:06.150

假设整数介于 0 和 255 之间，请使用[Convert.ToByte()](http://msdn.microsoft.com/en-us/library/system.convert.tobyte.aspx)。例如：

```
int byte1;
int byte2;
int byte3;
byte[] bytes = new byte[]{ 0xF1, Convert.ToByte(byte1), 
    Convert.ToByte(byte2), Convert.ToByte(byte3), 0x33 }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T14:07:51.990

如果您确定您的值不会超过 byte range `[0, 255]`，您可以简单地转换它们：

```
byte[] b = { 0xF1, (byte)byte1, (byte)byte2, (byte)byte3, 0x33 } 
```

或者，您可以使用[`Convert.ToByte`](http://msdn.microsoft.com/en-us/library/5949zd89.aspx)，它会抛出一个`OverflowException`if 值小于 0 或大于 255。

# javascript - $(window).load 在带有异步 js 库的 IE 中触发太快

> ID：12301747
> 
> 赞同：1
> 
> 时间：2012-09-06T13:57:04.457
> 
> 标签：javascript, jquery, internet-explorer, asynchronous, window-load

我在异步获取一些 js 库并`$(window).load`在 IE中执行它们时遇到了一些严重的问题

当然在其他浏览器中都可以使用

所以问题是，我正在做类似的事情

```
 <script type="text/javascript">
 var scr1 = document.createElement('script'); 
 scr1.type = 'text/javascript'; 
 scr1.src = 'some_lib.js'; 
 $('BODY').prepend(scr1); 
</script> 
```

就在之前`</body>`并使用`$(window).load`它上面的html中的方法来操作一些插件`some_lib.js`，但这一切都发生在IE中很快，可能是因为包含异步库，并且我得到一个错误，该方法不适用于该元素。

有没有可能修改`$(window).load`方法，所以我仍然可以对每个浏览器以相同的方式使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T14:55:08.057

调用中的任何代码都`window.load()`必须放在一个函数中（`onLoad`在本例中调用）。

每次你有一个动态加载的脚本时，增加一个计数器。还包括一些减少该计数器的东西......

```
src1.onload = function() { counter--; onLoad(); } 
```

然后在'onLoad'中有第一行......

```
if (counter > 0) return; 
```

这意味着`onLoad`它将在每个脚本加载时和之后触发`window.load`，但仅在全部加载时才会执行。

它很杂乱，但它会解决你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T14:57:33.597

您还没有真正描述需要异步加载这些库的原因。第三方库通常具有“脚本加载”功能，您可以在加载脚本之前定义这些功能。如果您需要在执行代码之前加载多个库，您可能必须 1\. 每次加载库时启动一些代码以测试是否加载了所有所需的库，然后启动您的代码 2\. 对于每个库，创建一个 jQuery Promise/deferred 以在加载该库时得到解决，并使用`$.when(`*Promise*`).done(`*函数/代码*`)`在加载特定集合时测试和运行代码，或者 3\. 重写以使用 RequireJS。如果这些库是您的代码，那么您可能必须将启动代码添加到您的库中；这可能是学习 RequireJS 的好时机。

我希望我可以进一步推荐，但是学习 RequireJS 背后的基础知识一直在我的待办事项清单上，但还没有完成；我只知道这里有人成功使用它。如果这看起来太麻烦了，我会考虑选项 2 的一些变体。如果你不知道会使用什么 jQuery 嗯......你可能会被选项 1 或 3 卡住。

编辑：

当然，这并不是说 jQuery 有唯一的 Promise 库，我只是经常建议在这类事情上使用某种形式的 Promise。

Archer 的技术看起来很有趣，我只是不知道它有多可靠（它可能非常可靠，我只是想看看证明/文档）。您也可以将其与选项 2 结合使用，如果您想缩短某些事情的执行速度，同时让其他事情异步处理，并且这些脚本 onload 方法确实按预期工作。

# jsf - 如何在 JSF 中处理会话，而不是托管 Bean 级别？

> ID：12301750
> 
> 赞同：1
> 
> 时间：2012-09-06T13:57:16.660
> 
> 标签：jsf

如何在网页级别处理 JSF 中的 Session？我不想在托管 bean 级别进行检查。每次我想检查会话是否处于活动状态时，我都会使用

```
If active ,Redirect . if not , redirect 
```

但得到

```
invalid page 
```

# oracle - 如何更改 Oracle Forms 上的字体？

> ID：12301751
> 
> 赞同：1
> 
> 时间：2012-09-06T13:57:17.477
> 
> 标签：oracle, fonts, oracleforms

我有几个不是从模板开发的表格（Oracle 数据库和表格 10）。当前字体是 Time New Roman，我需要将其更改为 Arial。除了手动执行此任务之外，还有其他人有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T14:06:51.273

*您可以*考虑使用Oracle 提供的一个名为 JDAPI 的实用程序。它是一个 Java 库，允许您编写 Java 程序来读取和写入 Forms 源文件，并以编程方式进行诸如您的修改。

几年前我不得不使用它，同时升级了许多不同的表格，看起来它们属于一起。我不能说这很容易，除非您已经是一位经验丰富的 Java 开发人员，并且存在一些问题，即某些表单会被 JDAPI “破坏”而必须手动完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T07:52:42.010

您可以查看我的博客，了解如何更改字体的分步示例。祝你好运。

[http://oracleformsinfo.wordpress.com/2011/12/25/more-code-snippets-jdapi-change-font-for-all-items-prompts-boilerplates-frames/](http://oracleformsinfo.wordpress.com/2011/12/25/more-code-snippets-jdapi-change-font-for-all-items-prompts-boilerplates-frames/)

# mongodb - 需要配置服务器列表 MongoDB

> ID：12301753
> 
> 赞同：2
> 
> 时间：2012-09-06T13:57:22.250
> 
> 标签：mongodb

我需要（在 MongoDB 的 C# 驱动程序中）获取连接到我的`Mongo-s`. 或者，如果做不到这一点，我会选择一种方法来获取所有服务器，并通过一种方法来逐个检查它们，哪些是 configsvr，哪些是其他东西。我在考虑这个`getShardMap`命令，但我仍然不知道如何（以编程方式）查看服务器并决定它是否是`configsvr`。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-21T21:38:54.427

```
mongos> db.runCommand("getShardMap")
{
    "map" : {
        "node2:27021" : "node2:27021",
        "node3:27021" : "node3:27021",
        "node4:27021" : "node4:27021",
        "config" : "node2:27019,node3:27019,node4:27019",
        "shard0000" : "node2:27021",
        "shard0001" : "node3:27021",
        "shard0002" : "node4:27021"
    },
    "ok" : 1
} 
```

getShardMap 命令给出了传递给 mongos 服务器的配置字符串。您可以解析字符串以获取配置服务器列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T14:17:33.853

我能想到的获取此信息的唯一方法是在 mongos 上运行 getCmdLineOpts 命令并查看它传递的 --configdb 参数。我不确定你如何在 C# 驱动程序中运行管理命令，但我想它是这样的：

```
db.RunCommand("getCmdLineOpts"); 
```

# php - 如何在 PHP 中的 exit() 函数后保留变量的值

> ID：12301754
> 
> 赞同：0
> 
> 时间：2012-09-06T13:57:23.420
> 
> 标签：php, exit

请问在php中退出函数后获取变量新值的最佳方法是什么？下面的脚本是一个示例，我想获取变量 $ee 的新值，并在调用 exit 函数后使用它来回显错误消息。

```
$ee = 0;
$required = array('name', 'location', 'email', 'school', 'age');

if(isset($_POST['name'])){

    foreach($required as $ff){
    if(empty($_POST[$ff])){
    header("location:register.php");
    $ee = 1;
    exit($ee);          
    }
    }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T13:58:44.000

如果你`exit`那么脚本已经完成并且不能做任何其他事情而不被再次执行。

**在**调用`exit`. _

如果您想在脚本完成后使用变量中的数据，那么您必须将**其存储**在它将持续存在的地方，然后在将来执行脚本（或不同的脚本）时将其读回。

您可能存储它的可能位置是：

*   一块饼干
*   一个会话
*   一个数据库
*   通过网络服务器
*   在文件中（不要使用文件，您必须处理竞争条件和文件系统效率低下，使用数据库服务器代替，以便为您处理所有事情）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T14:01:10.530

有一个[`register_shutdown_function`](http://php.net/register_shutdown_function)函数允许您注册在`exit`事件发生时将调用的函数。

```
void register_shutdown_function ( callable $callback [, mixed $parameter [, mixed $... ]] ) 
```

> 在脚本执行完成或调用 exit() 后注册要执行的回调。
> 
> 可以对 register_shutdown_function() 进行多次调用，每次调用的顺序与注册时的顺序相同。如果在一个已注册的关闭函数中调用 exit()，则处理将完全停止，并且不会调用其他已注册的关闭函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T14:02:05.933

使该变量保持活动状态的最简单方法是通过`PHP` `$_GET`，例如：

```
foreach($required as $ff){
    if(empty($_POST[$ff])){
        $ee = 1;
        $encoded_ee = urlencode($ee);
        header("location:register.php?error=" . $encoded_ee);
        exit($ee);          
    }
} 
```

# iphone - 带有详细标签栏的 Objective C Master Detail 项目

> ID：12301764
> 
> 赞同：0
> 
> 时间：2012-09-06T13:57:51.470
> 
> 标签：iphone, objective-c, uinavigationcontroller, uitabbar, xcode4.4

我的项目已设置，以便用户搜索特定项目。该项目具有三组不同的详细信息。我想做的是创建一个主/细节场景，然后在细节屏幕上有一个带有三个不同视图的选项卡栏，以匹配三个不同的细节信息组。但是，我在让它工作时遇到了很多麻烦。我搜索并发现了这个stackoverflow问题：

[IOS - 如何将标签栏添加到导航控制器（主从模板）？](https://stackoverflow.com/questions/9595416/ios-how-can-i-add-a-tab-bar-to-navigation-controller-master-detail-template)

这似乎表明，如果我遵循我的计划，Apple 可能不会接受我的应用程序，因为标签栏应该在整个应用程序中保持不变。这对我来说似乎很荒谬。在很多情况下，标签栏不应该出现在每个视图上。例如，我的应用程序中的第一个视图是登录屏幕。我当然不希望有标签栏。这是其他人遇到过的吗？如果是这样，你知道任何可以帮助我完成这项工作的教程吗？

我在 xcode 4.4 中工作并使用情节提要而不是 nib 文件。现在我可以让我的主视图导航到详细视图，我可以在详细视图上看到标签栏。但是，我的详细视图有带有静态单元格的表格视图，我看不到任何应该包含在其中的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:02:13.017

有规则，也有指导方针。Apple 没有规定如果你有一个标签栏，它必须出现在你的应用程序的任何地方。他们有指导方针，指出标签栏应该在视图之间保持一致。苹果有一些规则，比如不要使用未发布的 API 调用。这些规则会让你的应用被拒绝，它们在应用商店提交指南中。用户界面指南实际上是关于如何创建应用程序的指南，除非您有充分的理由不这样做。

# c - cudaHostRegister 在具有计算能力 1.1 的 GPU 上返回 cudaErrorInvalidValue

> ID：12301772
> 
> 赞同：1
> 
> 时间：2012-09-06T13:58:32.903
> 
> 标签：c, cuda

我有一个简单的程序，它分配一个`unsigned __int64`（堆栈上的 8 个字节），然后尝试使用 cudaHostRegister 在 GPU 上注册该内存。进行此调用的程序部分如下所示：

```
unsigned __int64 mem;
unsigned __int64 *pMem = &mem;
cudaError_t result;

result = cudaHostRegister(pMem, sizeof(unsigned __int64), cudaHostRegisterMapped);
if(result != cudaSuccess) {
    printf("Error in cudaHostRegister: %s.\n", cudaGetErrorString(result));
    return -1;
} 
```

我正在使用 nvcc 标志 compute_11 和 sm_11 在 Visual Studio 2010 Premium 中进行编译，并且在运行具有 3.0 版 cuda 功能的 Quadro K1000m 的笔记本电脑上一切正常。

我最近切换到我的台式机，我尝试使用 GeForce 8600 GT 和 GeForce 9500 GT 运行，两者的 cuda 功能版本均为 1.1。

根据 NVIDIA 的 cudaHostRegister 文档，cuda 能力为 1.1 及以上的卡应该允许使用 cudaHostRegisterMapped：

> *cudaHostRegisterMapped：将分配映射到 CUDA 地址空间。可以通过调用 cudaHostGetDevicePointer() 获得指向内存的设备指针。此功能仅在计算能力大于或等于 1.1 的 GPU 上可用。*

经过一番搜索，似乎 cudaHostRegisterMapped 可能需要页面对齐的内存。我认为这可能是我的 3.0 卡和我的 1.1 卡之间的差异，所以我屏蔽了地址以获得页面对齐的地址，并在 size 字段中使用了页面的大小（4096 字节），如下所示：

```
unsigned __int64 mem;
unsigned __int64 *pMem = &mem;
unsigned __int64 memAddr = (unsigned __int64)pMem;
cudaError_t result;

pMem = (unsigned __int64 *)(memAddr & 0xFFFFFFFFFFFFF000);

result = cudaHostRegister(pMem, 4096, cudaHostRegisterMapped);
if(result != cudaSuccess) {
    printf("Error in cudaHostRegister: %s.\n", cudaGetErrorString(result));
    return -1;
} 
```

此代码也适用于我的 3.0 卡，但在我的 1.1 卡上失败，结果与之前相同。cudaHostRegister 函数返回错误`cudaErrorInvalidValue`，表示：

> *传递给 API 调用的一个或多个参数不在可接受的值范围内*

我还没有找到更多关于为什么这个函数可能会像这样失败的更多信息。感谢任何人都可以提供的任何帮助。

[编辑] 根据 talonmies 的回复，我验证了我的至少一张卡（9500 GT，我没有在 8600 GT 上运行它）确实支持根据 SDK 附带的 NVIDIA 的 deviceQuery 可执行文件进行内存映射。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:26:54.573

*某些*计算能力 1.1 设备支持映射内存，但不是全部。MCP79 系列集成芯片组（如 Ion 和 9300M/9400M）确实支持映射内存。但是，较旧的计算能力 1.1 设备（例如 8600GT 和 9500GT）不支持映射内存。

`cudaGetDeviceProperties`您可以使用API 调用以编程方式检查这一点；`canMapHostMemory`将告诉您给定设备是否支持映射内存。

# android - WebView 摆脱双击缩放。

> ID：12301775
> 
> 赞同：10
> 
> 时间：2012-09-06T13:58:39.143
> 
> 标签：android, webview, zooming, touch-event, motionevent

我阅读了很多关于 Zooming in WebViews 主题的票，并没有为我的案例找到答案。

这是我的设置：

我正在使用通常具有以下设置的自定义网络视图：

```
getSettings().setBuiltInZoomControls(false);
getSettings().setSupportZoom(false);
getSettings().setUseWideViewPort(true);
getSettings().setLoadWithOverviewMode(true); 
```

让我在这里注意一下，我依赖 OverviewMode 以及 WideViewPort 来缩放我的 WebView。

我还覆盖了我的 OnTouchEvent 并将所有合适的事件委托给手势检测器：

```
 @Override
  public boolean onTouchEvent(MotionEvent event) {
    if (gestureDetector.onTouchEvent(event)) return true;
    return super.onTouchEvent(event);
  } 
```

这是拦截所有 doubleTap 事件的侦听器实现：

```
 @Override
  public boolean onDoubleTapEvent(MotionEvent e) {
    // Do nothing! 
    return true;
  }

  @Override
  public boolean onDoubleTap(MotionEvent e) {
    // Do nothing! 
    return true;
  }

  @Override
  public boolean onSingleTapConfirmed(MotionEvent e) {
    // Do nothing! 
    return true;
  } 
```

我还覆盖了这两个与缩放相关的 WebView 方法：

```
 @Override
  public boolean zoomIn() {
    return true;
  }

  @Override
  public boolean zoomOut() {
    return true;
  } 
```

除了所有这些选项，特定的点击频率会导致我的 web 视图放大/缩小。我还没有找到禁用这种缩放的选项，此缩放的 MotionEvent 似乎不适用于 GestureDetector 并且覆盖 zoomIn() zoomOut() 方法也没有效果。

任何人都可以帮助我避免这种 WebView 的双击缩放行为吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T11:26:41.127

有两种方法可以实现您的目标：

**方法一**

像这样实现`GestureDetector.OnDoubleTapListener`：

```
@Override
public boolean onSingleTapConfirmed(MotionEvent e) {
  return false; //Nothing
}

@Override
public boolean onDoubleTap(MotionEvent e) {
  //Indicates that this implementation has handled the double tap.
  return true;
}

@Override
public boolean onDoubleTapEvent(MotionEvent e) {
  //Indicates that this implementation has handled the double tap.
  return true;
} 
```

并将其附加到您的`GestureDetector`像这样：

```
gestureDetector.setOnDoubleTapListener(this); 
```

**方法二**

您还可以使用`WebSettings.setUseWideViewPort(false);`并手动计算视图的大小。

这些方法应该可以帮助您实现显示所有内容的不可缩放的 Web 视图。

```
public int getWindowWidth(Activity activity) {
  Display display = ((WindowManager) activity.getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay();
  Point size = new Point();
  display.getSize(size);
  int width = size.x;
  return width;
}

public int getInitialScale(Activity activity, int websiteWidth) {
  return (getWindowWidth(activity) / websiteWidth) * 100;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-28T05:22:38.393

对于您的问题，有一个基于 Javascript 的绝妙解决方案（因此，如果是这种情况，您必须能够访问远程端的 HTML/JS 代码）。

使用[FastClick 库](https://github.com/ftlabs/fastclick)，您只需添加 .js 文件，然后调用它：

```
<script type="application/javascript" src="fastclick.js"></script>

<script language="javascript">

window.addEventListener('load', function() {
    FastClick.attach(document.body);
}, false);

</script> 
```

这将摆脱双击缩放，并且（在我看来）仍然有一个巨大的好处：所有点击都快 0.3 秒，因为系统不必再等待双击！在 Android 上查看此示例以查看差异：[Practical Example](http://ftlabs.github.io/fastclick/examples/layer.html)

好吧，我不知道这个解决方案是否适合你的情况，但它是我的 Webview 项目的完美解决方案。希望能帮助到你！

ps1：你必须在所有页面和框架中添加上面的代码

ps2：捏缩放会正常工作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T04:50:05.607

您需要通过以下方式覆盖 WebView 上的 OnTouchListener

```
 wv.setOnTouchListener(this); 
```

并且内部方法 onTouch 只是检查它是否检测到双标签然后通过强制忽略 webview 中的缩放以返回 true

```
@Override
public boolean onTouch(View v, MotionEvent event) {
    // TODO Auto-generated method stub
    onTouchEvent(event);

    if (doubletab)
        return true;

    return false;
} 
```

你可以看到这样的完整代码：MainActivity.java

```
package com.example.testwebview;

import android.os.Bundle;
import android.app.Activity;
import android.view.GestureDetector;
import android.view.GestureDetector.OnGestureListener;
import android.view.View.OnTouchListener;
import android.view.MotionEvent;
import android.view.View;
import android.webkit.WebSettings;
import android.webkit.WebView;
import android.widget.TextView;

public class MainActivity extends Activity implements OnGestureListener, OnTouchListener, GestureDetector.OnDoubleTapListener
{

    TextView tv;
    WebView wv;
    GestureDetector gd;

    boolean doubletab = false;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        gd = new GestureDetector(this);

        setContentView(R.layout.activity_main);

        tv = (TextView)findViewById(R.id.textView1);
        wv = (WebView)findViewById(R.id.webView1);

        WebSettings setting = wv.getSettings();
        setting.setBuiltInZoomControls(false);
        setting.setSupportZoom(false);
        setting.setUseWideViewPort(true);
        setting.setLoadWithOverviewMode(true);

        wv.setOnTouchListener(this);
        wv.loadUrl("http://www.sanook.com");
    }
    @Override
    public boolean onDoubleTap(MotionEvent arg0) {
        tv.setText("double tap");
        doubletab = true;
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public boolean onDoubleTapEvent(MotionEvent arg0) {
        tv.setText("double tap event");
        doubletab = true;
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public boolean onSingleTapConfirmed(MotionEvent arg0) {
        tv.setText("single tap confirm");
        doubletab = false;
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public boolean onTouchEvent(MotionEvent me)
    {
        return gd.onTouchEvent(me);
    }

    @Override
    public boolean onDown(MotionEvent arg0) {
        tv.setText("down");
        doubletab = false;
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public boolean onFling(MotionEvent arg0, MotionEvent arg1, float arg2,
            float arg3) {
        tv.setText("fling");
        doubletab = false;
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public void onLongPress(MotionEvent arg0) {
        tv.setText("long press");
        doubletab = false;
        // TODO Auto-generated method stub

    }

    @Override
    public boolean onScroll(MotionEvent arg0, MotionEvent arg1, float arg2,
            float arg3) {
        tv.setText("scroll");
        doubletab = false;
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public void onShowPress(MotionEvent arg0) {
        // TODO Auto-generated method stub
        tv.setText("show press");
        doubletab = false;

    }

    @Override
    public boolean onSingleTapUp(MotionEvent arg0) {
        // TODO Auto-generated method stub
        tv.setText("single tab up");
        doubletab = false;
        return false;
    }

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        // TODO Auto-generated method stub
        onTouchEvent(event);

        if (doubletab)
            return true;

        return false;
    }
} 
```

和activity_main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:text="TextView" />

    <WebView
        android:id="@+id/webView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/textView1" />

</RelativeLayout> 
```

不要忘记在 manifest.xml 中添加权限

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-03T12:03:03.203

另一种方法（唯一对我有用的方法）是模拟双击之间的远程中间点击，以便 WebView 不会将它们重新识别为结果。负坐标可用于此目的，尽管小于 -1 的任何值都会减慢甚至破坏该过程。因此，我们至少需要两个点，例如 (0, -1) 和 (2*d+1, -1)，其中*d*是轻敲之间的最大距离，以便将它们视为双击。

```
webView.setOnTouchListener(new View.OnTouchListener() {
        private long lastUp = -1000;
        private float lastDownX = -1000;
        private float lastDownY = -1000;
        private int dtDistance = 0;         
        private int dtDistanceSquared = 0;
        private long dtTime = 0;

        private void performTap(View v, int x, int y, long t) {             
            MotionEvent e_down = MotionEvent.obtain(t, t, MotionEvent.ACTION_DOWN, x, y, 0);
            v.dispatchTouchEvent(e_down);
            e_down.recycle();

            MotionEvent e_up = MotionEvent.obtain(t, t, MotionEvent.ACTION_UP, x, y, 0);
            v.dispatchTouchEvent(e_up);
            e_up.recycle();
        }

        private int getRemoteX(float x) {
            return Math.round(x > dtDistance + 0.5 ? 0 : 2 * dtDistance + 1);
        }

        private boolean inRadius(int x0, int y0, float x1, float y1) {
            boolean result = (x0 - x1) * (x0 - x1) + (y0 - y1) * (y0 - y1) <= dtDistanceSquared;
            return result;
        }

        @Override
        public boolean onTouch(View v, MotionEvent event) { 
            if (event.getY() >= 0)  // Otherwise it's a fake tap we simulated
            {               
                if (dtTime == 0)
                {
                    dtDistance = ViewConfiguration.get(v.getContext()).getScaledDoubleTapSlop();    // Maximum distance between taps for them to be considered double tap
                    dtDistanceSquared = dtDistance * dtDistance;
                    dtTime = ViewConfiguration.getDoubleTapTimeout();   // Maximum time elapsed between taps for them to be considered double tap
                }

                switch (event.getAction())
                {
                    case MotionEvent.ACTION_UP:
                        lastUp = event.getEventTime();
                        break;
                    case MotionEvent.ACTION_DOWN:
                        long t = event.getEventTime(); 
                        if (t - lastUp < dtTime * 4/3)  // Very rarely just (t - lastUp <= dtTime) doesn't work
                        {
                            int x = getRemoteX(event.getX());
                            if (inRadius(x, -1, lastDownX, lastDownY))
                                performTap(v, getRemoteX(lastDownX), -1, t);    // Otherwise our fake tap would constitute a double tap with the previous real tap
                            performTap(v, x, -1, t);                                
                        }
                        lastDownX = event.getX();
                        lastDownY = event.getY();
                        break;                      
                }
            }

            return false;                                   
        }
    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-11T12:34:29.133

如果可能，请替换 html 中的静态元标记：

```
<script>
 var meta = document.createElement("meta");
 meta.setAttribute('name','viewport');
 meta.setAttribute('content','width=device-width, user-scalable=no');
 document.getElementsByTagName('head')[0].appendChild(meta); 
</script> 
```

此外，您可以使用一个不错的脚本：[FastClick](https://github.com/ftlabs/fastclick)
它不会等待点击事件，因此它更快。

```
<script type="application/javascript" src="fastclick.js"></script>

    <script language="javascript">

        window.addEventListener('load', function() {
            FastClick.attach(document.body);
        }, false);

</script> 
```

然后为您的手势检测器设置一个双击监听器。（在自定义 WebView 中）

```
gestureDetector.setOnDoubleTapListener(new OnDoubleTapListener() {

    @Override
    public boolean onSingleTapConfirmed( MotionEvent e ) {
        return false;
    }

    @Override
    public boolean onDoubleTapEvent( MotionEvent e ) {

        return true;
    }

    @Override
    public boolean onDoubleTap( MotionEvent e ) {

        return true;
    }
}); 
```

覆盖 onTouchEvent 方法（在自定义 WebView 中）：

```
@Override
public boolean onTouchEvent( MotionEvent event ) {

    boolean gestureHandled = gestureDetector.onTouchEvent(event);
    int actionMask = event.getActionMasked() & MotionEvent.ACTION_MASK;
    int index = ( event.getAction() & MotionEvent.ACTION_POINTER_INDEX_MASK) >> MotionEvent.ACTION_POINTER_INDEX_SHIFT;
    int pointId = event.getPointerId(index);

    // ignore move events
    if (actionMask == MotionEvent.ACTION_MOVE) {

        return super.onTouchEvent(event);
    }

    // cancel detected double taps
    if (gestureDetector.onTouchEvent(event)) {
        event.setAction(MotionEvent.ACTION_CANCEL);
        super.onTouchEvent(event);
        return true;
    }

    // if you want to ignore multi touch events/taps
    if (pointId != 0) {

        System.out.println("KEY multiple points detected");
        return true;
    }

    // use single taps
    if (event.getAction() == MotionEvent.ACTION_UP) {

        event.setAction(MotionEvent.ACTION_CANCEL);
        super.onTouchEvent(event);
        event.setAction(MotionEvent.ACTION_DOWN);
        super.onTouchEvent(event);
        event.setAction(MotionEvent.ACTION_UP);
        return true;
    }

return super.onTouchEvent(event);
} 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-09-06T14:03:34.887

尝试将 onDoubleTapEvent onDoubleTap 的返回值设为 false....

```
@Override
  public boolean onDoubleTapEvent(MotionEvent e) {
    // Do nothing! 
    return false;
  }

  @Override
  public boolean onDoubleTap(MotionEvent e) {
    // Do nothing! 
    return false;
  } 
```

# c# - 插入sql表的问题

> ID：12301776
> 
> 赞同：0
> 
> 时间：2012-09-06T13:58:42.300
> 
> 标签：c#, sql

我有一个正在开发的网站，当用户创建一个帐户时，我想存储一些我在 CreateUserWizard 期间收集的附加信息。当我运行代码时，尝试将数据写入我创建的表时出现错误。我在名为 UserProfile 的 ASPNETDB.mdf 数据库（默认创建的数据库）中创建了表，并包含了我要写入的所有列。在 web.config 文件中，我有：

```
<connectionStrings>
  <add name="ApplicationServices" connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnetdb.mdf;User Instance=true"
  providerName="System.Data.SqlClient" />
</connectionStrings> 
```

当用户创建帐户时，这是我在 Creating_User 事件中的代码。

```
protected void RegisterUser_CreatingUser(object sender, LoginCancelEventArgs e)
    {
        //try
        //{
            string trimUserName = RegisterUser.UserName.Trim();
            if (RegisterUser.UserName.Length != trimUserName.Length)
            {
                accountlbl.Text = "The username cannot contain leading or trailing spaces.";
                accountlbl.Visible = true;
                //Cancel the created user info
                e.Cancel = true;
            }

            if (RegisterUser.Password.IndexOf(RegisterUser.UserName, StringComparison.OrdinalIgnoreCase) > 0)
            {
                accountlbl.Text = "The username may not appear anywhere in the password.";
                accountlbl.Visible = true;
                //Cancel the created user info
                e.Cancel = true;
            }

            String FirstName = ((TextBox)RegisterUser.CreateUserStep.ContentTemplateContainer.FindControl("FirstName")).Text;
            String LastName = ((TextBox)RegisterUser.CreateUserStep.ContentTemplateContainer.FindControl("LastName")).Text;
            String Company = ((TextBox)RegisterUser.CreateUserStep.ContentTemplateContainer.FindControl("CompanyName")).Text;
            String PartsList = ((DropDownList)RegisterUser.CreateUserStep.ContentTemplateContainer.FindControl("companyddl")).SelectedValue;
            String UserName = ((TextBox)RegisterUser.CreateUserStep.ContentTemplateContainer.FindControl("UserName")).Text;
            String Password = ((TextBox)RegisterUser.CreateUserStep.ContentTemplateContainer.FindControl("Password")).Text;
            String Email = ((TextBox)RegisterUser.CreateUserStep.ContentTemplateContainer.FindControl("Email")).Text;
            String Question = ((TextBox)RegisterUser.CreateUserStep.ContentTemplateContainer.FindControl("Question")).Text;
            String Answer = ((TextBox)RegisterUser.CreateUserStep.ContentTemplateContainer.FindControl("Answer")).Text;
            // Insert a new record into User_Profile            
            if ((Company == "OurCompany" || Company == "OurCompany, Inc.") && PartsList == "")
            {
                Roles.AddUserToRole(UserName, "manager");
                UserRole = "manager";
            }
            if (PartsList == "SF")
            {
                Roles.AddUserToRole(UserName, "user_sf");
                UserRole = "user_sf";
            }
            if (PartsList == "TL")
            {
                Roles.AddUserToRole(UserName, "user_tl");
                UserRole = "user_tl";
            }
            if ((Company != "OurCompany" || Company != "OurCompany, Inc.") && PartsList == "")
            {
                Roles.AddUserToRole(UserName, "user");
                UserRole = "user";
            }

            // Get your Connection String from the web.config. ApplicationServices is the name I have in my web.config
            string connectionString = ConfigurationManager.ConnectionStrings["ApplicationServices"].ConnectionString;
            string insertSql = "INSERT INTO UserProfile(FirstName, LastName, Company, PartsList, UserName, Password, Email, Question, Answer, UserRole)" +
                               "VALUES(@FirstName, @LastName, @Company, @Partslist, @UserName, @Password, @Email, @Question, @Answer, @UserRole)";
            using (SqlConnection myConnection = new SqlConnection(connectionString))
            {
                myConnection.Open();
                SqlCommand myCommand = new SqlCommand(insertSql, myConnection);
                myCommand.Parameters.AddWithValue("@FirstName", FirstName);
                myCommand.Parameters.AddWithValue("@LastName", LastName);
                myCommand.Parameters.AddWithValue("@Company", Company);
                myCommand.Parameters.AddWithValue("@PartsList", PartsList);
                myCommand.Parameters.AddWithValue("@UserName", UserName);
                myCommand.Parameters.AddWithValue("@Password", Password);
                myCommand.Parameters.AddWithValue("@Email", Email);
                myCommand.Parameters.AddWithValue("@Question", Question);
                myCommand.Parameters.AddWithValue("@Answer", Answer);
                myCommand.Parameters.AddWithValue("@Role", UserRole);
                myCommand.ExecuteNonQuery();  //ERROR HERE!!!//
                myConnection.Close();                    
            }
    } 
```

我在 myComman.ExecuteNonQuery(); 上收到错误消息 声明——必须声明标量变量“@UserRole”。
如果我注释掉代码，它不会向数据库表写入任何内容。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T14:01:25.193

你有`myCommand.Parameters.AddWithValue("@Role", UserRole);`，但我认为你应该有`myCommand.Parameters.AddWithValue("@UserRole", UserRole);`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T16:17:36.917

对于任何关心的人......这是工作代码：

```
protected void RegisterUser_CreatingUser(object sender, LoginCancelEventArgs e)
    {
            string trimUserName = RegisterUser.UserName.Trim();
            if (RegisterUser.UserName.Length != trimUserName.Length)
            {
                accountlbl.Text = "The username cannot contain leading or trailing spaces.";
                accountlbl.Visible = true;
                //Cancel the created user info
                e.Cancel = true;
            }

            if (RegisterUser.Password.IndexOf(RegisterUser.UserName, StringComparison.OrdinalIgnoreCase) > 0)
            {
                accountlbl.Text = "The username may not appear anywhere in the password.";
                accountlbl.Visible = true;
                //Cancel the created user info
                e.Cancel = true;
            }

            String FirstName = ((TextBox)RegisterUser.CreateUserStep.ContentTemplateContainer.FindControl("FirstName")).Text;
            String LastName = ((TextBox)RegisterUser.CreateUserStep.ContentTemplateContainer.FindControl("LastName")).Text;
            String Company = ((TextBox)RegisterUser.CreateUserStep.ContentTemplateContainer.FindControl("CompanyName")).Text;
            String PartsList = ((DropDownList)RegisterUser.CreateUserStep.ContentTemplateContainer.FindControl("companyddl")).SelectedValue;
            String UserName = ((TextBox)RegisterUser.CreateUserStep.ContentTemplateContainer.FindControl("UserName")).Text;
            String Password = ((TextBox)RegisterUser.CreateUserStep.ContentTemplateContainer.FindControl("Password")).Text;
            String Email = ((TextBox)RegisterUser.CreateUserStep.ContentTemplateContainer.FindControl("Email")).Text;
            String Question = ((TextBox)RegisterUser.CreateUserStep.ContentTemplateContainer.FindControl("Question")).Text;
            String Answer = ((TextBox)RegisterUser.CreateUserStep.ContentTemplateContainer.FindControl("Answer")).Text;
            // Insert a new record into User_Profile            
            if (((Company == "OurCompany" || Company == "OurCompany, Inc.") && PartsList == ""))
            {
                if (!User.IsInRole("manager"))
                {
                Roles.AddUserToRole(UserName, "manager");
                Role = "manager";
                }
            }
            if (PartsList == "SF")
            {
                if (!User.IsInRole("user_sf"))
                {
                    Roles.AddUserToRole(UserName, "user_sf");
                    Role = "user_sf";
                }
            }
            if (PartsList == "TL")
            {
                if (!User.IsInRole("user_tl"))
                {
                    Roles.AddUserToRole(UserName, "user_tl");
                    Role = "user_tl";
                }
            }
            if ((Company != "OurCompany" || Company != "OurCompany, Inc.") && PartsList == "")
            {
                if (!User.IsInRole("user"))
                {
                    Roles.AddUserToRole(UserName, "user");
                    Role = "user";
                }
            }

            ////Get your Connection String from the web.config...ApplicationServices is the name I have in my web.config
            string connectionString = ConfigurationManager.ConnectionStrings["ApplicationServices"].ConnectionString;
            string insertSql = "INSERT INTO UserProfile(FirstName, LastName, Company, PartsList, UserName, Password, Email, Question, Answer, Role)" +
                               "VALUES(@FirstName, @LastName, @Company, @Partslist, @UserName, @Password, @Email, @Question, @Answer, @Role)";

            using (SqlConnection myConnection = new SqlConnection(connectionString))
            {
                myConnection.Open();
                SqlCommand myCommand = new SqlCommand(insertSql, myConnection);
                myCommand.Parameters.AddWithValue("@FirstName", FirstName);
                myCommand.Parameters.AddWithValue("@LastName", LastName);
                myCommand.Parameters.AddWithValue("@Company", Company);
                myCommand.Parameters.AddWithValue("@PartsList", PartsList);
                myCommand.Parameters.AddWithValue("@UserName", UserName);
                myCommand.Parameters.AddWithValue("@Password", Password);
                myCommand.Parameters.AddWithValue("@Email", Email);
                myCommand.Parameters.AddWithValue("@Question", Question);
                myCommand.Parameters.AddWithValue("@Answer", Answer);
                myCommand.Parameters.AddWithValue("@Role", Role);

                myCommand.ExecuteNonQuery();
                myConnection.Close();                    
            }
    } 
```

# php - 在php中访问登录表单的会话变量

> ID：12301784
> 
> 赞同：-1
> 
> 时间：2012-09-06T13:59:03.730
> 
> 标签：php, mysql, open-source

> **可能重复：**
> [PHP 已发送的标头](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

问候开源爱好者。

有人可以向我解释下面粘贴的错误是什么意思吗，我在存储会话变量并使用 header("Location:home.php"); 将我的用户重定向到主页之后就遇到了它。功能。任何帮助将不胜感激。

```
Warning: Cannot modify header information - headers already sent by 
    (output started at C:\xampp\htdocs\testproject\login.php:58) 
    in C:\xampp\htdocs\testproject\inc\checklogin.php on line 35 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T14:00:35.543

这意味着您在重定向或使用另一个标题之前将一些内容输出到页面。例如这样的：

```
<?php
  echo 'this will not work';
  header('Location: some page.php');
?> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-06T14:11:10.693

根据您提供的错误，我猜您已经在 login.php 脚本中包含或 require_onced 了 checklogin.php。这就是 php 给出该错误的原因。在登录系统中，您实际上并不需要这样做。只需将用户从登录重定向到检查登录，如果登录正确则重定向到主页，或者如果登录不正确则登录..

# c# - 处理从 Flash 的 ExternalInterface 接收到的 \x01

> ID：12301787
> 
> 赞同：0
> 
> 时间：2012-09-06T13:59:06.763
> 
> 标签：c#, flash, byte

我从嵌入在 Windows 窗体中的 Flash 组件接收数据。不幸的是，如果从套接字返回的数据包含以下任何字符，则下面对 loadXml 的调用将失败：

这是我必须从套接字接收数据的回调方法（通过 Flash 组件中的 ExternalInterface）。

```
private void player_FlashCall(object sender, _IShockwaveFlashEvents_FlashCallEvent e)
{
            String output = e.request;
            //output = CleanInvalidXmlChars(output);
            XmlDocument document = new XmlDocument();
            document.LoadXml(output);

            XmlAttributeCollection attributes = document.FirstChild.Attributes;
            String command = attributes.Item(0).InnerText;              
            XmlNodeList list = document.GetElementsByTagName("arguments");               
            process(list[0].InnerText); 
```

我有一种用文本替换字符的方法（CleanInvalidXmlChars），但我认为这不是正确的方法。

如何将这些数据加载到 XML 文件中，因为这使得分离返回的方法名称、参数名称和参数类型非常容易使用。

将不胜感激任何帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T21:09:51.467

如果“XML”包含任何 U+0001（又名 '\x01'）或其他类似字符，则它*不是有效的 XML*。您无法在 XML 中包含这些字符（好吧，无论如何，在 XML 1.0 中）。请参阅[XML 规范](http://www.w3.org/TR/REC-xml/#charsets)。如果您需要传递例如XML 中的二进制数据，您需要将它们转换为适当的形式，例如使用Base-64。

如果数据确实包含那些无效字符，则它不是 XML，因此无法使用标准 XML 工具读取（我认为任何标准 .NET 类都不允许您覆盖该行为）。您可以替换所有这些字符（这些基本上都是控制字符（U+0000 到 U+001F），除了 U+0009（制表符）、U+000A 和 U+000D (CR+LF)，以及 U+FFFE 和 U +FFFF（非字符））在您尝试使用之前 - 您可以设计一个不会丢失任何数据的安全转换（例如，首先用@0040替换所有@字符，然后用@xxxx替换任何无效字符，其中xxxx是它的代码，并且在处理解析的 XML 数据时，将所有 @xxxx 替换回来）。

另一种选择是放弃 XML 想法并将其作为字符串处理。只是为了获得灵感，请参见例如[这段代码](http://code.google.com/p/msfast/source/browse/trunk/src/MySpace.MSFast.GUI.Engine/Panels/GraphView/Controls/FlashPlayer.cs?r=5#357)。

# asp.net - GAC 程序集缺少引用的 TFS 构建抛出错误

> ID：12301788
> 
> 赞同：1
> 
> 时间：2012-09-06T13:59:08.773
> 
> 标签：asp.net, .net

我为我的项目创建了构建脚本。项目参考 GAC 的 dotnetCHARTING DLL。在 TFS 上启动构建后，出现与 dotnetCHARTING 相关的错误。有什么方法可以在构建脚本中配置 GAC DLL 引用？

谢谢， 切坦

# java - 如何将一个 MATRIX 覆盖在另一个之上？

> ID：12301789
> 
> 赞同：0
> 
> 时间：2012-09-06T13:59:12.670
> 
> 标签：java, math, matrix, geometry

> **可能重复：**
> [如何将点映射到扭曲的网格上](https://stackoverflow.com/questions/1601600/how-to-map-a-point-onto-a-warped-grid)

假设我们有两个矩阵。一个是简单的直矩阵，另一个是扭曲的。

我们需要将扭曲的矩阵按比例缩小，并将其放置在直线矩阵的某个点上，使直线矩阵扭曲。

例如，在下图中，直矩阵中的红色顶点应该会根据按比例缩小的扭曲矩阵进行扭曲。

有任何想法吗？谢谢！

![在此处输入图像描述](../Images/9868c8794cc2db5e606ba71932e0fee3.png)

# c# - 如何解决 Funq IoC 中的循环依赖？

> ID：12301792
> 
> 赞同：4
> 
> 时间：2012-09-06T13:59:16.743
> 
> 标签：c#, ioc-container, servicestack, circular-dependency, funq

我有两个需要相互引用的类。

```
class Foo
{
    public Foo(IBar bar) {}
}

class Bar
{
    public Bar(IFoo foo) {}
} 
```

当我做：

```
container.RegisterAutoWiredAs<Foo, IFoo>();
container.RegisterAutoWiredAs<Bar, IBar>(); 
```

当我尝试解析任一接口时，我得到一个循环依赖图，导致无限循环。有没有简单的方法可以在 Funq 中解决这个问题，或者你知道解决方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-09T21:05:09.753

您总是可以（并且在所有容器中，我会说）依赖 Lazy 作为依赖项，这将产生所需的结果。在 Funq 中：

```
public Bar(Lazy<IFoo> foo) ...
public Foo(Lazy<IBar> bar) ...

container.Register<IBar>(c => new Bar(c.LazyResolve<IFoo>());
container.Register<IFoo>(c => new Foo(c.LazyResolve<IBar>()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T20:08:09.457

你的问题的答案是否定的，没有简单的方法。*鉴于上面的代码，没有*Funq就不可能构造任何一个类，因此没有理由期望 Func 能够做到。

```
var foo = new Foo(/* what do I pass here? */);
var bar = new Bar(foo); 
```

当然，如果您有另一个实现，`IFoo`或者`IBar`没有依赖，或者您进行了重构，这可能是可能的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T22:00:02.410

一般来说，“在进行依赖注入时如何分解循环引用”这个问题的答案是：“使用属性注入”。

```
class Foo
{
    public Foo() {}

    // Break the dependency cycle by promoting IBar to a property.
    public IBar Bar { get; set; }
}

class Bar
{
    public Bar(IFoo foo) {}
} 
```

使用 Funq，我认为这将是注册此依赖项的方式。

```
container.Register<IBar>(c =>
{
    var foo = new Foo();
    var bar = new Bar(foo);
    foo.Bar = bar;
    return bar;
}); 
```

此外，我同意 Tim Rogers 的评论。当你有循环依赖时，你的设计可能有问题，你应该看看它。这并不总是错误的，但经常是。但是，您展示的代码非常抽象，我们无法对此提供任何反馈。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T15:29:19.097

这对我有用：

```
using Funq;
using NUnit.Framework;

namespace FunqIoCyclicReferenceTest
{
    [TestFixture]
    public class FunqIoCCyclicReferenceTest
    {
        [Test]
        public void Please_Work()
        {
            var container = new Container();
            container.Register<IBar>(c => new Bar());
            container.Register<IFoo>(c => new Foo(c.Resolve<IBar>()));

            var foo = container.Resolve<IFoo>();

            Assert.IsNotNull(foo);
        }
    }

    public class Foo : IFoo
    {
        public Foo(IBar bar)
        {
            bar.Foo = this;
            Bar = bar;
        }

        public IBar Bar { get; set; }
    }

    public interface IBar
    {
        IFoo Foo { get; set; }
    }

    public interface IFoo
    {
        IBar Bar { get; set; }
    }

    public class Bar : IBar
    {
        public IFoo Foo { get; set; }
    }
} 
```

**编辑**
相同的想法，但在构造函数中没有副作用：

```
// interfaces
public interface IBar
{
    IFoo Foo { get; set; }
}

public interface IFoo
{
    IBar Bar { get; set; }
}

// implementations
public class Foo : IFoo
{
    public IBar Bar { get; set; }
}    

public class Bar : IBar
{
    public IFoo Foo { get; set; }
}

// usage
container.Register<IBar>(c => new Bar());
container.Register<IFoo>(c => 
{
    var bar = c.Resolve<IBar>();
    var foo = new Foo();

    bar.Foo = foo;
    foo.Bar = bar;
}); 
```

ps 但我同意 Tim Rogers 的观​​点——循环引用是一个需要解决的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T08:43:53.427

在容器中注册您的类型后，使容器可用作静态变量：

```
public static class ContainerHolder
{
   public static Container Container {get;set;}
}

public class Foo : IFoo
{
  private IBar _bar;

  public Foo(IBar bar)
  {
    _bar = bar;
  }
}

public class Bar : IBar
{
  private IFoo _foo
  {
    get { return ContainerHolder.Container.Resolve<IFoo>(); }
  }

  public Bar()
  {
  }

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-23T18:46:20.510

我有一个类似的场景，两个类之间的依赖关系让我意识到它们实际上应该组合成一个类。

# asp.net - 用户控件中的 ASP.NET AJAXNumeric Updown 控件

> ID：12301795
> 
> 赞同：0
> 
> 时间：2012-09-06T13:59:26.083
> 
> 标签：asp.net, controls, numeric, updown

我有许多（大约 20 - 30 个）NumericUpDown 控件，我已将它们添加到用户控件中，并且它们与其相应的文本框相关联。这些 NumericUpDown 控件工作正常，允许我调整文本框中的数字。但是，如果用户更改文本框值（没有回发）并且需要将其设置在网页上的标签/文本框上，我需要能够计算数量。我的问题是，当按下 NumericUpDown 控件或文本框值更改时，我找不到事件或其他方式来进行这些计算。我试过了：

*   使用 NumericUpDown 控件的事件，但似乎没有在值更改时触发事件

*   使用文本框控件的 OnTextChanged 事件，但这似乎不会触发，即使我将 AutoPostback 属性设置为 true

*   在文本框控件的 onchange 事件中调用 javascript 函数，但似乎除非文本框失去焦点，否则不会调用 onchange 事件。用户可以更改值的唯一方法是通过 NumericUpDown 控件，因此文本框永远不会有焦点，因此永远不会触发此事件。

有没有人有任何建议可以让它发挥作用？请注意，我确实将其包含在更新面板中，因为当我的 NumericUpDown 控件中的值发生更改并计算百分比时，我不希望整页回发。

谢谢 ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T14:05:46.953

通过这个：[http ://www.asp.net/ajaxlibrary/act_NumericUpDown.ashx](http://www.asp.net/ajaxlibrary/act_NumericUpDown.ashx)

它有一个 currentChanged 事件，您可以为其添加事件处理程序。您还可以在文本框上添加一个事件处理程序，使用 onblur（当它失去焦点时）或 keypress（当用户键入一个键时）。两个事件处理程序都是必需的。

要为 AJAX 控件工具包控件添加事件处理程序，请将方法的名称添加到控件的 OnClientCurrentChanged 属性中，或类似名称。

# windows - 计划任务调用的批处理文件在计划时抛出错误，双击时运行正常

> ID：12301798
> 
> 赞同：2
> 
> 时间：2012-09-06T13:59:32.620
> 
> 标签：windows, batch-file, scheduled-tasks, drive-mapping

我有一个映射网络驱动器的批处理文件。大约一周前密码过期了，所以调用批处理文件的程序开始抛出错误。

我已经更新了批处理文件中的密码，当我双击批处理文件时，驱动器映射正常。但是，当计划任务开始时，我收到以下错误：

```
Logon failure: unknown user name or bad password. 
```

有人见过这个吗？我已经尝试重新创建计划任务，但它似乎没有任何区别。

**编辑**

我已经更新了计划任务的属性，这不是问题。问题似乎是批处理文件中的用户名和密码。奇怪的是，如果我以交互方式登录并双击可执行文件，一切正常。

上次作业运行时抛出“信号量超时期限已过期”错误。我以前从未见过这个特定的错误，但似乎它实际上已登录并在发生这种情况时尝试复制文件。

**编辑**

我已经修改了我的代码以使其尽可能简单。我正在使用批处理文件来映射驱动器，然后使用代码来传输文件。我仍然遇到同样的问题 - 当我双击批处理文件时它工作正常，但是一旦我将调度程序放入图片中，它就会抛出“错误的用户名或无效密码”错误。

有时，当我尝试通过双击文件来运行文件时，我会收到“找不到路径的一部分”错误。这对我说驱动器映射确实有效，但是在尝试复制时出现了故障。（大多数情况下，通过双击进行测试可以正常工作）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-12-10T10:57:49.187

创建任务时与任务关联的用户名和密码不再有效或已更改。这通常发生在创建任务并忘记选择不存储密码的选项时。当您的密码设置为过期时，每次您必须重置密码时都会遇到此问题。确保按照图片上的方式进行操作： ![在此处输入图像描述](../Images/7cde1a559131094f0f29fb941160db6d.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T16:06:31.207

听起来与计划任务关联的用户名和/或密码不再正确。批处理文件可能没问题，您只需要更改计划任务的属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T14:04:46.287

在测试我们编写的用于创建计划任务以备份到一个或多个网络位置的新 powershell 脚本时，我遇到了类似的情况。我不得不经历多次迭代，当我从两个网络位置减少到一个时，计划任务停止工作，调用脚本中的各个步骤给出“登录失败：未知用户名或密码错误”错误，尽管当我复制了参数并从它们工作的命令行运行它们。

在阅读了这个问题和蒂姆的评论后，我尝试删除计划任务并重新创建它。之后它起作用了。我同意计划任务可能缓存了一些东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-22T10:13:26.087

来自： [https ://danblee.com/log-on-as-batch-job-rights-for-task-scheduler/](https://danblee.com/log-on-as-batch-job-rights-for-task-scheduler/)

转到开始菜单。跑。键入 secpol.msc 并按 Enter。本地安全策略管理器打开。转到安全设置 - 本地策略 - 用户权限分配节点。双击右侧的作为批处理作业登录。单击添加用户或组... 选择用户并单击确定。

# python - Python 和队列

> ID：12301800
> 
> 赞同：0
> 
> 时间：2012-09-06T13:59:37.360
> 
> 标签：python, queue

这个问题与[这个项目](https://stackoverflow.com/questions/12058099/remote-devices-supervision/12079718#12079718)有关。

我必须将 json 格式的设备信息发送到服务器。但是，我担心如果我无法连接到远程服务器会发生什么？我不想丢失数据，所以我认为每个数据都可以排在队列中。连接线程可以解析队列并将数据发送到服务器。在我看来，这是一个比直接发送数据的连接线程更好的解决方案。我对么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T14:03:57.807

像队列这样的东西总是适合解耦事物。特别是当数据的处理可以被推迟时。像 RabbitMQ 这样的队列实现是事务性的，因此您可以很好地集成到必须具有事务完整性的系统中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T14:08:22.590

是的，您可能希望在应用程序组件之间建立一个类似队列的持久存储。根据您的要求，它可能是从简单文件到完全成熟的事务存储的任何内容。

# c - C 和铸造 - 为什么这个程序在 6 处停止？

> ID：12301801
> 
> 赞同：4
> 
> 时间：2012-09-06T13:59:37.853
> 
> 标签：c, casting

我为我的作业编辑了一个 C 程序，以前没有类型转换，迭代在 i=1 处停止，现在类型转换在 i=6 处停止。

任何想法为什么？提前致谢！

```
int main(void)
{

    int i = 0;
    double d = 0.0;

    while ( (i == (int) (d * 10)) && (i < 10) )
    {
        i = i + 1;
        d = (double) (d + 0.1);
        printf("%d %lf\n", i, d);
    }

    printf("%d %lf\n", i, d);

    getch();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T14:01:12.390

浮点运算是不精确的。该值`0.1`不能以二进制浮点数精确表示。这里推荐的阅读是：[每个计算机科学家都应该知道的关于浮点运算的知识](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)。

在程序的某个时刻，由于舍入误差而`d`变得略小于，因此您的循环终止。`i/10`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T14:13:56.663

除了其他答案之外，我还想回答为什么循环以 condition`i == (d * 10)`比 with更早终止的问题`i == (int) (d * 10)`。

在第一种情况下，`int`左边的`==`值被提升为加倍，因此当累积误差`d*10`为正或负时（例如 0.999999 或 1.000001），就会发生不等式。

在第二种情况下，右侧被截断为 int，因此不等式仅在错误为负时发生（例如 5.999999）。因此，第一个版本会提前失败。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T14:06:20.627

如前所述，这不起作用的原因是二进制浮点数不能代表所有十进制浮点二进制数，这是不可能的。要了解更多信息，请查看这篇非常棒的文章：

[每个程序员都应该知道的关于浮点运算的知识](http://floating-point-gui.de)

现在，在更实际的方面，当使用浮点并将其与另一个数字进行比较时，您应该几乎总是`round`使用该值或使用 epsilon 值，如下所示：

```
if (ABS(doubleValue - intValue) < 0.00001) // 0.00001 is a margin-of-error for floating point arithmetic
    // the two numbers are even (or close to it) 
```

# scala - 如何一次匹配选项映射值？

> ID：12301804
> 
> 赞同：5
> 
> 时间：2012-09-06T13:59:42.500
> 
> 标签：scala, scala-option

是否可以`Option[Map[String,String]]`一次匹配某个键（例如没有嵌套匹配）？

以下片段是现在的样子：

```
val myOption:Option[Map[String,String]] = ...
myOption match {
  case Some(params) =>
    params get(key) match {
      case Some(value) => Ok(value)
      case None => BadRequest
  case None => BadRequest     
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-06T14:04:34.877

当然！就是[`flatMap`那个狗屎](https://stackoverflow.com/q/8559537/334519)！

```
def lookup(o: Option[Map[String, String]], k: String) =
  o.flatMap(_ get k).map(Ok(_)).getOrElse(BadRequest) 
```

如果您使用的是 Scala 2.10，则可以折叠`Option`：

```
def lookup(o: Option[Map[String, String]], k: String) =
  o.flatMap(_ get k).fold(BadRequest)(Ok(_)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T14:06:50.713

```
(for (params <- myOption; value <- params.get(key)) yield Ok(value)).getOrElse(BadRequest) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T14:14:11.117

您应该能够使用几个高阶函数来做到这一点。我认为这可以满足您的要求：

```
myOption.collect {
  case m if (m contains key) => Ok(m(key))
} getOrElse BadRequest 
```

`collect`接受偏函数，并`getOrElse`处理偏函数返回的情况，将`None`其转换为您的`BadRequest`情况。

# java - OnClick 似乎没有被调用

> ID：12301807
> 
> 赞同：0
> 
> 时间：2012-09-06T13:59:55.810
> 
> 标签：java, android, onclick

我正在尝试单击按钮打开 Web 浏览器窗口。

我的点击事件似乎没有被调用。LogCat 没有显示任何错误或任何被调用的证据。我有一种感觉，这是因为我有 2 个名为 ' `onClick`' 的方法，但删除第二种方法会导致错误。我可以通过使 MainActivity 抽象来修复此错误，但这会使应用程序崩溃。

我觉得这是一个简单的解决方法，但是在翻阅文档和几个教程之后，我找不到答案。

代码如下，后面是我的清单。提前致谢。

```
package com.spotsofmagic.spotsofmagic;

import android.app.Activity;
import android.app.AlertDialog;
import android.bluetooth.BluetoothAdapter;
import android.content.DialogInterface;
import android.content.DialogInterface.OnClickListener;
import android.content.Intent;
import android.net.Uri;
import android.nfc.NdefMessage;
import android.nfc.NdefRecord;
import android.nfc.NfcAdapter;
import android.os.Bundle;
import android.os.Parcelable;
import android.util.Log;
import android.view.View;
import android.widget.TextView;

public class MainActivity extends Activity implements OnClickListener {
    private static final String TAG = "Activity...";
    private NfcAdapter mAdapter;
    private TextView mTextView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main_activity);

        // grab our NFC Adapter
        mAdapter = NfcAdapter.getDefaultAdapter(this);

        // TextView that we'll use to output messages to screen
        mTextView = (TextView)findViewById(R.id.text_view);

        //displayMessage("Loading payload...");

    }

    private void displayMessage(String message) {
        mTextView.setText(message);
    }

    public void onClick(View v) {
        // TODO Auto-generated method stub
        // do something when the button is clicked
        displayMessage("Loading broswer");
        Uri uriUrl = Uri.parse("http://www.***.com/");      
        Intent launchBrowser = new Intent(Intent.ACTION_VIEW, uriUrl);  
        startActivity(launchBrowser);  

        if(v.getId() == R.id.btnVisitWebsite) {

        }
    }

    public void onClick(DialogInterface dialog, int which) {
        // TODO Auto-generated method stub

    }
} 
```

和清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.spotsofmagic.spotsofmagic"
    android:versionCode="1"
    android:versionName="1.0" android:installLocation="auto">

    <uses-sdk android:minSdkVersion="14" android:targetSdkVersion="14" />

    <uses-permission android:name="android.permission.NFC" />
    <uses-permission android:name="android.permission.BLUETOOTH" />
    <uses-permission android:name="android.permission.BLUETOOTH_ADMIN" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-feature android:name="android.hardware.nfc" android:required="true" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >

        <activity
            android:name=".MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

         <activity
            android:name=".CardActivity"
            android:label="@string/app_name" >

            <!-- Handle a collectable card NDEF record -->
            <intent-filter>
                <action android:name="android.nfc.action.NDEF_DISCOVERED"/>
                <data android:mimeType="application/vnd.spotsofmagic.spotsofmagic"/>
                <category android:name="android.intent.category.DEFAULT"/>
            </intent-filter>
         </activity>

    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T14:00:56.800

因为你没有关联点击事件。

如果要将其绑定到按钮（或）某物，则需要为“this”绑定它

例子：

```
 button.setOnClickListener(this); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T14:02:11.910

你有一个，`OnClickListener`但你没有把它附加到任何按钮上。尝试

```
((Button) findViewById(R.id.your_button_id)).setOnClickListener(this); 
```

**编辑：**另一个问题是，您实施`DialogInterface.OnClickListener`而不是`View.OnClickListener`在您的`Activity`.

删除导入

```
import android.content.DialogInterface;
import android.content.DialogInterface.OnClickListener; 
```

并添加

```
import android.view.View.OnClickListener; 
```

您还可以删除

```
public void onClick(DialogInterface dialog, int which) {
    // TODO Auto-generated method stub

} 
```

在这之后。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T14:26:14.413

为避免混淆，如果您不以编程方式创建视图，也可以使用 XML 来完成。你可以做这样的事情。

```
<Button android:width="20dp" android:height="20dp" android:onClick="openBrowser" /> 
```

并在您的程序中提供方法

```
public void openBrowser(View v)
{
   /*  do your stuff here */

 } 
```

# jquery - 在 jquery 移动页面中更改标题主题？

> ID：12301808
> 
> 赞同：0
> 
> 时间：2012-09-06T13:59:57.923
> 
> 标签：jquery, jquery-mobile

我需要更改`Default(theme a)`jquery 移动页面标题的主题`to (theme c)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T14:03:29.763

正如他们的文档[http://jquerymobile.com/test/docs/toolbars/bars-themes.html](http://jquerymobile.com/test/docs/toolbars/bars-themes.html)中所述，您必须使用`data-theme`属性指定您的主题。前任：

```
<div data-role="header" data-theme="b"> 
    <h1>Page Title</h1> 
</div> 
```

# c - 检查文件是否存在（由命令行参数给出）

> ID：12301809
> 
> 赞同：5
> 
> 时间：2012-09-06T14:00:01.390
> 
> 标签：c, unix

我必须做一个使用 unix 环境的 C 程序。我已经购买了《Unix 环境中的高级编程》一书，到目前为止它已经帮了很多忙。但是，我的一些问题没有得到解答，我正在寻求帮助。

我正在尝试编写一个程序，如果存在复制程序，它可以验证是否输入了第一个和第二个参数。如果第一个参数不存在，则必须出现错误消息并退出。如果第二个参数确实存在，则必须显示覆盖提示。我不完全确定如何验证文件是否已经存在或不存在。

我见过一些人说您可以执行 (!-e) 或类似的操作来验证文件是否存在。

如果有人可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-06T14:18:13.667

**[access()](http://pubs.opengroup.org/onlinepubs/009695299/functions/access.html "使用权（）")**函数旨在告诉您文件是否存在（或可读、可写或可执行）。

```
#include <unistd.h>
int result;
const char *filename = "/tmp/myfile";
result = access (filename, F_OK); // F_OK tests existence also (R_OK,W_OK,X_OK).
                                  //            for readable, writeable, executable
if ( result == 0 )
{
   printf("%s exists!!\n",filename);
}
else
{
   printf("ERROR: %s doesn't exist!\n",filename);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T14:01:34.087

在你的`int main(int argc, char** argv) {`街区。

```
if (argc == 3) {
   // then there were 3 arguments, the program name, and two parameters
} else if (argc == 2) {
   // then prompt for the "second" argument, as the program name and one
   // parameter exists
} else {
   // just print out the usage, as we have a non-handled number of arguments
} 
```

现在，如果您想验证*文件*是否存在，这与验证程序*参数*是否存在不同。基本上尝试打开文件并从中读取，但要密切注意捕获整数错误代码并检查它们是否有错误。这将防止您的程序进展到假设那些关键操作已经工作的位。

新程序员在用 C 语言处理文件时，有一个常见但被误导的概念。基本上，一个人真的想确保特定的代码块有效（在你的情况下是复制块），所以他们检查、检查和加倍- 在执行块之前检查条件。检查文件是否存在，检查它是否具有正确的权限，检查它是否不是目录等。我的建议是你**不**要这样做。

您的复制块应该能够正常失败，就像它应该能够成功一样正常。如果它失败，那么通常您拥有打印出有意义的错误消息所需的所有信息。如果您先检查*然后采取行动，那么*在检查和行动之间总会有一个小的时间间隔，并且这个时间间隔最终会在检查通过之后看到文件被删除或更改，但在读取之前。在这种情况下，所有预检查代码都无法提供任何好处。

没有好处的代码只是未来错误和架构问题的一个窝点。不要浪费时间编写具有可疑（或没有）好处的代码。当您怀疑*您编写*的某些代码没有什么好处时，您需要重组代码以将其放在正确的位置。当你怀疑*别人写*的代码没有什么好处时，你首先需要怀疑你的怀疑。很容易看不到一段代码背后的动机，在刚开始使用一种新语言时更是如此。

祝你好运！

---疲惫的代码---

```
#include <errorno.h>
#include <stdio.h>
#include <stdlib.h>

extern int errno;

int main(int argc, char** argv) {

   // to hold our file descriptor
   FILE *fp;

   // reset any possible previously captured errors
   errno = 0;

   // open the file for reading
   fp = fopen(argv[1], "r");

   // check for an error condition
   if ( fp == 0 && errno != 0 ) {

     // print the error condition using the system error messages, with the
     // additional message "Error occurred while opening file"
     perror("Error occurred while opening file.\n");

     // terminate the program with a non-successful status
     exit(1);

   }

} 
```

# ios - 在应用核心图像过滤器时处理内存警告

> ID：12301810
> 
> 赞同：2
> 
> 时间：2012-09-06T14:00:06.620
> 
> 标签：ios, automatic-ref-counting, core-image

我正在使用以下代码来应用图像过滤器。这在按比例缩小的图像上效果很好。但是当我在全分辨率图像上应用超过 2 个过滤器时，应用程序会崩溃。收到内存警告。

当我打开“分配”工具时，我看到 CFData(store) 占用了程序使用的大部分内存。当我在全分辨率图像上应用超过 2 个过滤器时，“总字节数”高达 54MB。虽然当我用眼睛观察这些数字时，“活动字节”似乎没有超过 12MB，但峰值表明活动字节也达到了这个数字并回来了。

我哪里错了？

```
- (UIImage *)editImage:(UIImage *)imageToBeEdited tintValue:(float)tint 
{ 
CIImage *image = [[CIImage alloc] initWithImage:imageToBeEdited]; 
NSLog(@"in edit Image:\ncheck image: %@\ncheck value:%f", image, tint); 

[tintFilter setValue:image forKey:kCIInputImageKey]; 
[tintFilter setValue:[NSNumber numberWithFloat:tint] forKey:@"inputAngle"]; 

CIImage *outputImage = [tintFilter outputImage]; 
NSLog(@"check output image: %@", outputImage); 
return [self completeEditingUsingOutputImage:outputImage]; 
} 

- (UIImage *)completeEditingUsingOutputImage:(CIImage *)outputImage 
{ 
CGImageRef cgimg = [context createCGImage:outputImage fromRect:outputImage.extent]; 
NSLog(@"check cgimg: %@", cgimg); 
UIImage *newImage = [UIImage imageWithCGImage:cgimg]; 
NSLog(@"check newImge: %@", newImage); 
CGImageRelease(cgimg); 
return newImage; 
} 
```

编辑：我也尝试将 cgimg 设为 nil。没有帮助。我尝试将上下文声明和定义放在第二个函数中。没有帮助。我试图在函数内移动过滤器的声明和定义，但没有帮助。

AlsoCrash 发生在

```
CGImageRef cgimg = [context createCGImage:outputImage fromRect:outputImage.extent]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T07:24:33.917

```
// where is your input filter name like this:

[tintFilter setValue:image forKey:@"CIHueAdjust"];

// I think you have a mistake in outputImage.extent. You just write this 

CGImageRef cgimg = [context createCGImage:outputImage fromRect:outputImage extent]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T11:15:20.820

我正在制作的 cgimg 占用了内存中的大部分空间并且没有被释放。

我观察到调用具有较小值的文件管理器会将 CFData（存储）内存值恢复为更小的值，从而避免崩溃。

所以我应用过滤器，然后使用图像作为“nil”调用相同的过滤器。在应用所有 4 个过滤器后，这会将内存恢复到 484kb 或 48 MB。

另外，我在后台线程而不是主线程上应用这个过滤器。再次应用于主线程会导致崩溃。可能它没有足够的时间来释放内存。我不知道。但这些事情现在进展顺利。

# c# - 如何按计数对列表列表进行排序？

> ID：12301814
> 
> 赞同：6
> 
> 时间：2012-09-06T14:00:27.927
> 
> 标签：c#, .net, list, sorting

在 C# 中：

```
List<List<Point>> SectionList = new List<List<Point>>(); 
```

SectionList 包含点列表，其中每个子列表包含的点数量不同。

我想弄清楚的是如何按子列表的数量按降序对 SectionList 进行排序。

因此，如果 SectionList 有 3 个点列表，排序后，SectionList[0] 将包含所有 3 个列表中的最高 Count 值。

谢谢，神话

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-06T14:03:12.920

这应该有效：

```
SectionList.Sort((a,b) => a.Count - b.Count); 
```

是`(a,b) => a.Count - b.Count`一个比较委托。该方法用成对的列表调用它以进行比较，如果短于，`Sort`则返回负数的委托，如果长于则返回正数，当两个列表长度相同时返回零。`a``b``a``b`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-06T14:01:37.847

```
var sortedList = SectionList.OrderByDescending(l=>l.Count()).ToList(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-06T14:07:49.887

您可以创建一个自定义比较器。

```
public class ListCountComparer : IComparer<IList> {
    public int Compare(IList x, IList y) {
        return x.Count.CompareTo(y.Count);
    }
} 
```

然后你可以像这样对你的列表进行排序：

```
SectionList.Sort(new ListCountComparer()); 
```

希望这可以帮助 ：）

# html - 以编程方式在 jsf 托管 bean 中创建 html 组件

> ID：12301817
> 
> 赞同：1
> 
> 时间：2012-09-06T14:00:40.583
> 
> 标签：html, jsf

我有以下代码：

```
<div id="mws-navigation">
    <ul>
        <li><p:commandLink
                value="#{contentMB.msg.welcome_title.value}" actionListener="#{cleanUpMB.alChangeArea}"
                styleClass="mws-i-24 i-home" action="#{welcomeMB.aLoadDashboard}" global="false" /></li>
        <li><p:commandLink
                value="#{contentMB.msg.layout_menu_measures.value}"
                rendered="#{userSessionMB.measureEdit or userSessionMB.measureCreate}"
                styleClass="mws-i-24 i-table-1" global="false" />
            <ul>
                <li><p:commandLink
                        value="#{contentMB.msg.layout_menu_mm_findMeasures.value}"
                        rendered="#{userSessionMB.measureEdit}"
                        actionListener="#{cleanUpMB.alChangeArea}"
                        action="#{chooseMeasureControllerMB.aChoose}" /></li>
                <li><p:commandLink
                        value="#{contentMB.msg.layout_menu_mm_newMeasures.value}"
                        rendered="#{userSessionMB.measureCreate}"
                        actionListener="#{cleanUpMB.alChangeArea}"
                        action="#{newMeasureControllerMB.aNew}" /></li>
            </ul>
      </li>
   </ul>
</div> 
```

我想从支持的 JSF 托管 bean 生成它。我知道 Primefaces 存在 java 组件，我可以使用它们并将它们绑定为模型，但是如何生成纯 HTML 标记：

```
<ul>
<div>
... 
```

?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T07:20:51.857

一种简单的方法是从支持 bean 返回一些 HTML：

```
@Named
@RequestScoped
public class HtmlController implements Serializable {

private static final long serialVersionUID = 1L;

    public String getSomeHtml(){
        return "<h1>Some HTML from a bean</h2>";
    }
} 
```

并将其粘贴到 JSF 部分：

```
<h:outputText value="#{htmlController.someHtml}" escape="false" /> 
```

但我认为对于您的情况，创建自己的组件会更好，您还可以对支持 bean 进行一些绑定。可以在[此处](http://jugojava.blogspot.de/2011/09/jsf-composite-component-binding-to.html)找到如何执行此操作的一个示例，或者查看[Java EE 6 的教程](http://docs.oracle.com/javaee/6/tutorial/doc/bnavg.html)。

# android - 如何设置从中读取文件的标准文件夹

> ID：12301818
> 
> 赞同：0
> 
> 时间：2012-09-06T14:00:41.130
> 
> 标签：android, android-layout, android-intent, android-widget

我正在尝试创建一个小型益智游戏。我的问题是设置应用读取图片的文件夹。是否可以在可绘制文件夹中创建另一个名为“images”的文件夹，并在此文件夹中插入应用程序读取的图片？

我在用着：

```
((SelectImagePreference) findPreference(IMAGE_SOURCE)).setCustomLocation(data.getData()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T14:09:50.030

使用资产文件夹[http://www.wiseandroid.com/post/2010/06/14/Android-Beginners-Intro-to-Resources-and-Assets.aspx](http://www.wiseandroid.com/post/2010/06/14/Android-Beginners-Intro-to-Resources-and-Assets.aspx)

# android - Android 跟踪位置问题

> ID：12301827
> 
> 赞同：0
> 
> 时间：2012-09-06T14:00:56.270
> 
> 标签：android, gps, location

我正在开发应用程序，我必须在其中计算从起点到终点的总距离。我使用 Android SDK 的位置管理器，使用位置侦听器并同时使用提供程序（GPS 和网络提供程序），并且每 20 秒我跟踪一次位置并将跟踪的位置放入数组列表中。一段时间后计算总距离

```
total distance = dist at point[0,1]+ dist at point[1,2] + ... +dist at point[n-1,n] 
```

其中`0,1,2,...,n`是数组列表位置值的索引。

经过多次测试，没有得到准确的结果。大约为实际里程表值的 60-70%。请指导是否有其他替代方法可以使用。请指导我如何获得更准确的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T16:52:55.340

GPS 和网络位置都具有一定程度的不确定性，因此与里程表之类的东西相比，它们通常都不会为您提供准确的距离。如果您在户外而不是在城市峡谷中，GPS 通常会给您比网络位置更好的距离估计。

低估距离（您所看到的）可能是由于您的采样率（每 20 秒）或 GPS 信号丢失所致。我会尝试将您的采样率提高到每 4 秒左右一次，并确保您的 GPS 单元不会丢失修复。GPS 灵敏度因设备而异，因此请尝试使用一些不同的 Android 设备进行测试。您还可以查看我开发的一个 Android 应用程序，以帮助测量 Android 设备上的 GPS 精度： [http ://www.gpsbenchmark.com/](http://www.gpsbenchmark.com/)

距离的高估通常是由 GPS 噪声引起的，或者由于 GPS 位置误差很小（有时很大）而导致的位置反弹。卡尔曼滤波器是减少部分噪声影响的好方法。您还可以尝试过滤路径并通过线条简化来减少一些细节。执行此操作的 Douglas-Peucker 算法的实现可在 MyTracks 项目中的 Apache 2.0 下获得： [http ://code.google.com/p/mytracks/source/browse/MyTracks/src/com/google/android/apps /mytracks/util/LocationUtils.java#78](http://code.google.com/p/mytracks/source/browse/MyTracks/src/com/google/android/apps/mytracks/util/LocationUtils.java#78)

# android - ListFragment setRetainInstance (true); 不工作

> ID：12301829
> 
> 赞同：3
> 
> 时间：2012-09-06T14:00:59.920
> 
> 标签：android, android-listfragment

我使用 ListFragment

设置保留实例（真）；不起作用，我不知道为什么

已保存实例状态 == 空

我的消息来源

```
 public class Fragment_Left extends ListFragment {

        @Override
        public void onAttach(Activity activity) {
            super.onAttach(activity);
            Log.d(LOG_TAG, "Fragment1 onAttach");
        }

        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            Log.d(LOG_TAG, "Fragment1 onCreate");
        }

        @Override
        public void onActivityCreated(Bundle savedInstanceState) {
            super.onActivityCreated(savedInstanceState);

            setRetainInstance(true);

        }

        @Override
        public void onListItemClick(ListView l, View v, int position, long id) {
            getListAdapter().getItem(position);

        }

         public void onSaveInstanceState(Bundle state) {
                super.onSaveInstanceState(state);
                Log.i(LOG_TAG, "onSaveInstanceState()");

            }

} 
```

* * *

```
 public class Fragment_Left extends ListFragment {
        private ArrayList<Menu_item> menu_list;  .....

     @Override
        public void onActivityCreated(Bundle savedInstanceState) {
            super.onActivityCreated(savedInstanceState);

            setRetainInstance(true);   
menu_list = new ArrayList<Menu_item>();...... 
```

但是在我打开屏幕之后 menu_list 为空，或者我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T14:46:30.240

> 如何将数组存储在片段中？

我假设“将数组存储在片段中”是指“在配置更改中保留片段使用的数组”。如果是这样的话：

选项 #1：将其放入片段的数据成员中，然后调用`setRetainInstance(true)`该片段。

选项#2：如果数组是支持的数据类型`Bundle`，覆盖`onSaveInstanceState()`，将数据放入`Bundle`，并在配置更改后创建的新片段实例中的其他方法中检索该数据（例如，`onCreateView()`）。

选项#3：如果数组确实代表了您的应用程序的数据模型，请将其保存在新旧片段实例可以访问的中央持久点中，例如数据库或文件。

# c# - 输出类型为类库的项目不能直接启动（二）

> ID：12301832
> 
> 赞同：30
> 
> 时间：2012-09-06T14:01:08.377
> 
> 标签：c#

> 输出类型为类库的项目不能直接启动。为了调试这个项目，将一个可执行项目添加到这个引用库项目的解决方案中。将可执行项目设置为启动项目。

在 C# Visual Studio 2010 中运行程序时，出现此错误。请告诉我如何解决这个错误？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-09-06T14:03:34.583

通过在可执行项目上单击鼠标右键并选择“**设置为启动项目**” ，在项目资源管理器中设置您的启动项目

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-09-06T14:03:08.600

您将项目创建为类库项目，而不是可执行程序。类库被编译，然后被其他应用程序用于通用功能。

如果您打算创建一个类库，则需要创建一个测试应用程序（或者更好的是，单元测试）来测试功能。如果您打算创建一个可执行应用程序，则需要修改该项目。

如果您在单个解决方案中有多个项目，您可能还需要确保将正确的项目设置为“开始项目”而不是类库项目之一。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-09-06T14:04:57.873

你所做的是你`class library`用你的所有代码制作了一个
.Net中的每个项目都需要一个像c#中的函数这样的起点`Main()`，这在类库类型的项目中不存在
你可以做的是
1.制作一个**控制台项目**在同一个解决方案中。通过右键单击解决方案并添加新项目
2\. 添加对类库的引用 3\. 访问类库**的**
类/方法，然后启动**控制台项目**而不是**类库**项目**或者，** 如果您有**控制台项目**或任何解决方案中的其他项目已经 **********右键单击解决方案资源管理器中的项目并**设置为启动项目************

 ***** * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-11-07T14:19:04.060

右键单击解决方案->转到属性->展开通用属性选项卡->（在右侧）选择带有选项单启动项目的单选按钮->从下拉列表中选择项目。
享受。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-06T14:04:39.207

如果要调试 DLL 中的代码或使用测试运行它，请转到项目的属性，转到“调试”选项卡，选择“启动外部程序”并输入要使用的应用程序的名称，例如测试运行程序.

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-09-06T14:03:02.423

转到您的项目属性页面，将输出类型更改为`Console Application`或`Windows Application`（取决于它是什么）。

确保您已将正确的项目设置为启动项目（右键单击 -> 设置为启动项目），并且该项目的类型不是`Class Library`. 如果您在解决方案中唯一的项目是类库，那么您需要为其创建一些测试可执行文件。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-10-11T16:14:12.007

我在我的一个项目中突然发现了相同的错误类型，该项目仅在 VS 2012 中使用 MVC 4 运行。我已经运行了多种方法来解决此错误，但我在您各自的错误给出项目的属性窗口中发现了小更改选项。我已经进入项目属性窗口，我将启动项目从 Healpars 更改为 Myproject。然后它工作正常。谢谢

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-02-19T17:07:23.013

我很惊讶地发现您确实可以将一些类库设置为启动并运行它们，如果它们包含用户控件。它们在 UserControl TestContainer 中运行，它允许修改属性等。基本上在 DesignTime 进行调试，这真的很有帮助。我在一个项目中有大约 20 个用户控件。这样我就可以运行 TestContainer 并选择要运行和调试的用户控件。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-02-01T16:21:21.357

如果其他答案都没有帮助，也可能是项目的输出类型设置不正确。在 .csproj 文件中，将输出类型设置为 WinExe，如下所示：

```
<OutputType>WinExe</OutputType>
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-10-05T05:47:31.720

如果是要执行的函数应用项目，则需要在 Visual Studio 中安装 Azure 开发工具。请参阅下图了解更多信息。

[在此处输入图像描述](https://i.stack.imgur.com/MGs5o.png)

* * *

## 回答 #11

> 赞同：-3
> 
> 时间：2020-11-26T18:28:17.060

选择 .net core 项目，那么它会直接启动，毫无疑问。谢谢****

# sql-server - 如何防止 VS2010 Database Project Deployment 生成 drop 数据库？

> ID：12301837
> 
> 赞同：5
> 
> 时间：2012-09-06T14:01:25.090
> 
> 标签：sql-server, visual-studio-2010, database-project, database-deployment, drop-database

假设您有一个数据库项目，并且没有在 Database.sqldeployment 设置中选中“始终重新创建数据库”。假设您部署到一台已经拥有数据库的服务器，该数据库的名称与您正在部署的数据库相同。

在其他什么情况下，数据库部署会生成带有“DROP DATABASE”语句的脚本？

如果您从不希望您的数据库被通过右键单击您的数据库项目并选择“部署”生成的部署脚本删除，您可以采取哪些步骤来防止这种情况发生？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T15:07:28.113

除了未选中“始终重新创建数据库”之外，您还应该检查数据库项目的“属性”页面上的“开发”选项卡。确保您定义了目标连接。当您不定义一个项目时，项目将始终且仅部署为就好像目标数据库不存在一样。此行为是设计使然。有关更多详细信息，请参阅此[链接](http://social.msdn.microsoft.com/Forums/en/vstsdb/thread/184af3b8-e24f-4156-8c93-4870aaed039c)。

我的建议是使用 Windows 身份验证创建连接，以便每个用户都可以访问他们应该访问的扩展。

另请注意，您必须为每个部署配置（例如调试、发布等）执行此操作

我个人将部署操作设置为仅创建一个脚本并手动运行它以确保安全！

# android - 从 Android 上的 Picasa 检索图像

> ID：12301838
> 
> 赞同：0
> 
> 时间：2012-09-06T14:01:27.177
> 
> 标签：android, picasa

您好，我正在尝试在 Android 应用程序中从 picasa 的相册中获取图像。我尝试创建相册并成功创建相册，但是当我尝试获取相册中的图像时出现问题。请在下面找到我的代码：

```
PicasawebService myService = new PicasawebService("myApp");
myService.setUserCredentials("username", "password");
URL url = new URL ("https://picasaweb.google.com/data/feed/api/user/myusername/albumid/myalbumid");
AlbumFeed  feed= myService.getFeed(url, AlbumFeed.class);
List<MediaContent> l;
for(PhotoEntry photo : feed.getPhotoEntries()){
l= photo.getMediaContents();
return l.get(0).getUrl().toString();
 } 
```

没有输入 for 循环，但是当我检查提要的大小时，它会显示相册中正确的图像数量。我从谷歌开发者指南中获得了代码：(​​https://developers.google.com/picasa-web/docs/2.0/developers_guide_java#listalbums) 注意：我在桌面应用程序中尝试了相同的代码并且运行良好。谢谢

编辑：问题是 ALbumFeed 正在返回 GPhotoEntry 类的条目，而不是 PhotoEntry。我在网上搜索，解决方案是将 gdata-photos-meta.jar 包含在我的库中，它已经包含在我的库中......知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T17:04:28.877

google 的 GData 不适用于 android。您应该使用 google Client api，他们说在 android 上有一个用于 picasa 的运行示例。

# php - 错误的当前时间 - php时间函数

> ID：12301847
> 
> 赞同：2
> 
> 时间：2012-09-06T14:01:52.390
> 
> 标签：php, html

我对PHP 中的**时间函数有疑问。**

它提供了不同的时间。

例如，我电脑中的当前时间是上午 10:00，它显示晚了 5 个小时。

**有什么想法吗？**

**提前致谢**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T14:03:47.323

服务器系统为您的位置配置了错误的时区。用[`date_default_timezone_set`](http://www.php.net/manual/en/function.date-default-timezone-set.php).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T14:06:13.130

也可以更改 php ini 文件中的时区，例如

```
[Date]
; Defines the default timezone used by the date functions
date.timezone = "America/Los_Angeles" 
```

# facebook - 更改 Facebook 应用请求上的通知文本

> ID：12301848
> 
> 赞同：5
> 
> 时间：2012-09-06T14:01:58.520
> 
> 标签：facebook, facebook-app-requests

我注意到一些 Facebook 应用程序，如 BranchOut，有自定义通知消息。当应用程序请求被发送并出现在左上角的通知中心时，通知上的文本似乎是他们自己控制的，而不是默认的“名称向您发送了请求”。

从我发现的文档来看，这是不可能的。自定义消息仅显示给已经使用该应用程序的用户，否则您会收到 Facebook 的默认邀请消息。

有谁知道他们是怎么做到的？他们只是与 Facebook 达成交易，还是他们发送的不是应用请求？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-21T09:31:56.133

万一其他人发现此问题，您似乎无法再控制此消息。有一些关于其他问题的东西浮出水面，但它们都不再起作用了。

根据文档，仅允许列入白名单的应用程序编辑通知本身中显示的应用程序请求消息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T16:02:41.367

您可以使用通知 API 发送自定义通知： [https ://developers.facebook.com/docs/concepts/notifications/](https://developers.facebook.com/docs/concepts/notifications/)

这些只能发送给已经安装了应用程序的用户。如果您想邀请某人加入应用程序，那么您必须使用不允许您自定义消息的 apprequest。

# c# - Linq-To-Sql 尝试插入父实体而不是子实体

> ID：12301850
> 
> 赞同：0
> 
> 时间：2012-09-06T14:02:04.870
> 
> 标签：c#, sql-server, database, winforms, linq-to-sql

我试图理解为什么 Linq to Sql 为子实体生成插入语句而不是插入父实体。我正在使用两个表：WorkOrders 和 Boats。工作订单除其他外还有一条船。在我添加工作订单的表单上，我允许用户为选定的客户添加新船。如果他们选择添加新船而不是选择现有船，则会向他们提供另一种表格以添加船/船。每次我尝试保存新船时，它都会尝试插入工作订单。下面，我包含了两个类的 Linq 到 Sql 映射的子集、用于在 WorkOrders 和 Boats 之间创建外键的 sql 服务器脚本、我的 C# 保存逻辑、生成的 linq-to-sql 语句以及调用堆。有人可以告诉我这里可能发生的事情吗？

我已经检查了添加新船只的表格，并且它没有参考工作订单，因此我知道在保存之前我没有在船只上设置工作订单。此外，我可以使用该表格添加新船只，而无需浏览工作订单屏幕，而不会出现此问题。

**标记**

```
 <Table Name="dbo.Boats" Member="Boats">
    <Type Name="Boat">
      <Column Name="recno" Type="System.Int32" DbType="Int NOT NULL IDENTITY" IsPrimaryKey="true" IsDbGenerated="true" CanBeNull="false" />
      <Column Name="EditedDateTime" Type="System.DateTime" DbType="DateTime NOT NULL" CanBeNull="false" />
      <Column Name="AddDateTime" Type="System.DateTime" DbType="DateTime NOT NULL" CanBeNull="false" />
      <Association Name="Boat_WorkOrder" Member="WorkOrders" ThisKey="recno" OtherKey="Vessel" Type="WorkOrder" />
    </Type>
 </Table> 
```

**SQL**

```
 ALTER TABLE [dbo].[WorkOrders]  WITH CHECK ADD  CONSTRAINT [FK_WorkOrders_Vessel] FOREIGN KEY([Vessel])
    REFERENCES [dbo].[Boats] ([recno])

    INSERT INTO [dbo].[WorkOrders]([CustomerFullName], [ClassListID], [ClassFullName], [ARAccountListId], [ARAccountFullName], [TemplateListID], [TemplateFullName], [InvoiceDate], [BillingAddress1], [BillingAddress2], [BillingAddress3], [BillingAddress4], [BillingAddress5], [BillingCity], [BillingState], [BillingPostalCode], [BillingCountry], [BillingNote], [ShippingAddress4], [ShippingAddress5], [TermsListID], [TermsFullName], [SalesRepListID], [SalesRepFullName], [Memo], [CustomerMessageListID], [CustomerMessageFullName], [OrderType], [OrderStatus], [Technician], [StartDate], [EstCompletionDate], [CompletionDate], [Vessel], [ShippingAddress1], [ShippingAddress2], [ShippingAddress3], [ShippingCity], [ShippingState], [ShippingPostalCode], [ShippingCountry], [PONumber], [ShippingNote], [Symptoms], [Notes], [AddDateTime], [AddBy], [EditedDateTime], [EditedBy], [TransactionStatus], [SyncStatus], [CustomerListId], [CustomerId], [Location])
    VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53) 
```

**C＃**

```
 private void saveBoat()
    {
        try
        {
            if (operationType == GlobalCollections.dbOperationType.Update)
            {
                currentBoat.AddBy = "user";
                currentBoat.AddDateTime = DateTime.Now;
                currentBoat.EditedBy = "user";
                currentBoat.EditedDateTime = DateTime.Now;

                dao.UpdateEntity(currentBoat, false);
            }
            else if (operationType == GlobalCollections.dbOperationType.Insert)
            {
                currentBoat.AddBy = "user";
                currentBoat.AddDateTime = DateTime.Now;
                currentBoat.EditedBy = "user";
                currentBoat.EditedDateTime = DateTime.Now;
                dao.AddEntity(currentBoat);
            }
        }
        catch (Exception ex)
        {
            GlobalCollections.showAndLogErrors(logger, ex);
        }
    } 
```

**堆栈跟踪**

```
09/06/2012 09:36:15 Error BEN-LAPTOP MarineService.GlobalCollections.showAndLogErrors Cannot insert the value NULL into column 'AddDateTime', table 'ScribbleSoft.dbo.WorkOrders'; column does not allow nulls. INSERT fails.
The statement has been terminated.
09/06/2012 09:36:15 Error BEN-LAPTOP MarineService.GlobalCollections.showAndLogErrors    at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj)
   at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at System.Data.SqlClient.SqlDataReader.ConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, DbAsyncResult result)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at System.Data.Linq.SqlClient.SqlProvider.Execute(Expression query, QueryInfo queryInfo, IObjectReaderFactory factory, Object[] parentArgs, Object[] userArgs, ICompiledSubQuery[] subQueries, Object lastResult)
   at System.Data.Linq.SqlClient.SqlProvider.ExecuteAll(Expression query, QueryInfo[] queryInfos, IObjectReaderFactory factory, Object[] userArguments, ICompiledSubQuery[] subQueries)
   at System.Data.Linq.SqlClient.SqlProvider.System.Data.Linq.Provider.IProvider.Execute(Expression query)
   at System.Data.Linq.ChangeDirector.StandardChangeDirector.DynamicInsert(TrackedObject item)
   at System.Data.Linq.ChangeDirector.StandardChangeDirector.Insert(TrackedObject item)
   at System.Data.Linq.ChangeProcessor.SubmitChanges(ConflictMode failureMode)
   at System.Data.Linq.DataContext.SubmitChanges(ConflictMode failureMode)
   at System.Data.Linq.DataContext.SubmitChanges()
   at Scribble.Database.Utilities.Domain.Persistence.Repository`1.SaveAll() in C:\Aaron\Dev\HIGH PRIORITY\ServiceModule\MarineService\PureService.DatabaseAccess\Scribble.Database.Utilities\Domain\Persistence\Repository.cs:line 69
   at Scribble.Database.Utilities.Domain.Persistence.Repository`1.UpdateEntity(T entity, Boolean attach) in C:\Aaron\Dev\HIGH PRIORITY\ServiceModule\MarineService\PureService.DatabaseAccess\Scribble.Database.Utilities\Domain\Persistence\Repository.cs:line 43
   at MarineService.Tests.AddVesselForm.saveBoat() in C:\Aaron\Dev\HIGH PRIORITY\ServiceModule\MarineService\ServiceModule\AddVesselForm.cs:line 207 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T01:12:00.447

两天后，我终于弄清楚了我的问题。简而言之，我有一个用于添加工单的表单。表单具有用于填充表单的 WorkOrder 的类变量。一个 WorkOrder 可以有一个 Vessel 和一个 Customer。我的问题是船只与客户有关系，而客户又与 WorkOrder 有关系。一旦用户选择了客户，客户就被设置到工作订单上。然后，当用户尝试添加或更新船时，Linq 检测到该船已附加到已附加到 WorkOrder 的客户。这解释了为什么框架在尝试插入或更新新船之前为工作订单生成插入。

现在，我已经修改了表单，以便我修改或访问支持表单的 WorkOrder 的唯一时间是加载和保存。否则，我在我的控件上使用 text 或 tag 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T01:41:09.740

您也许可以使用[`Attach`](http://social.msdn.microsoft.com/forums/en-US/linqprojectgeneral/thread/1ab52f43-c294-4a43-b9e6-02b12efcad6f/).

你会做类似的事情

```
context.WorkOrders.Attach(currentBoat.WorkOrder); 
```

这告诉上下文 WorkOrder 是一个现有对象，应该与数据库相关联，但不能像“新”项目那样插入。

# c# - 在控制器和视图之间修改的实体

> ID：12301857
> 
> 赞同：4
> 
> 时间：2012-09-06T14:02:17.007
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

这怎么可能？ ![控制器](../Images/04bb202e83900ce19607263112be0653.png) ![看法](../Images/7d624965f105e20b7f0eb828b4abfc8c.png) ![查看代码](../Images/64cbb37f595ed289f574b93ff8b9d1b1.png)

两天的头撞。如果有人有理智的解释，那就太好了。

请注意，如果我删除`EditorFor(o => o.DocumentParentID)`，则在 [HttpPost] 中收到时，该值将变为 0，因此它们与数据库的其他记录相匹配

请注意，这些是数据库中的相关记录 ![在此处输入图像描述](../Images/78fadded01052a81f86061378d8d73f6.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T14:12:08.737

您获得的 ID 属性值为 6，因为它与您的路线中的 Id 参数匹配。似乎默认模型绑定器也在您的 url 中寻找这些属性。

在 StatusClient 类中更改您的操作方法的参数名称或 ID 属性的名称，它应该可以正常工作。

此外，如果您没有`EditorFor(o => o.DocumentParentID)`在视图中添加，DocumentParentID 将不会被发送回您的操作方法，您将获得默认值 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T14:11:07.840

我不太确定您的要求是什么，但我认为这就是为什么当 EditorFor 不在页面上时默认进入 DocumentParentID ？

modelbinder 将绑定对象类型的默认值，因此如果您将 DocumentParentID 定义为 Int32，则 modelbinder 将在 post 上绑定到 0。如果 DocumentParentID 被定义为 Int32?，那么 modelbinder 将在 post 上绑定到 null。

# java - 从谷歌应用引擎收到的电子邮件中提取附件

> ID：12301867
> 
> 赞同：1
> 
> 时间：2012-09-06T14:02:47.583
> 
> 标签：java, google-app-engine, mime, restlet, email-attachments

我想从我的 GAE java 应用程序中收到的邮件中提取附件。附件将是一个图像文件：JPG、PNG、GIF 等。我在我的 GAE 项目中使用 Restlet 框架。所以我从 Restlet 的表示对象中提取 MimeMessage。但我不知道如何提取邮件附件中的图像文件。

下面是我用来提取 MimeMessage 的代码：-

```
@Post 
public Representation addPoints(Representation entity) {
    Properties props = new Properties(); 
    Session session = Session.getDefaultInstance(props, null); 
    try {
        MimeMessage message = new MimeMessage(session, entity.getStream());
    } catch (MessagingException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return null;
} 
```

# java - 大型项目的 Java 依赖管理

> ID：12301869
> 
> 赞同：2
> 
> 时间：2012-09-06T14:02:51.557
> 
> 标签：java, dependencies

我希望我可以让这个问题足够具体，我的团队目前正在讨论管理一个大型项目的依赖项的最佳方法（150 多个依赖项 ~300mb）。

我们有两个主要问题

*   保持所有开发人员的依赖关系相同，因此我们针对相同的文件进行编译
*   确保项目（一旦编译）针对相同的依赖项进行编译

建议的两个想法是使用 BirJar（一个文件中的所有依赖项），只需向其添加版本号并使用共享文件夹并将每个人的机器指向同一个位置。

或者在我们编译它时将所有依赖项包含在 jar 中（一个 jar、of jar、of jar）并且只有一个“没有依赖关系”的项目

有人还提到设置 Ivy 的内部版本并指向所有代码以从那里提取依赖项。

关于大规模依赖管理的最佳实践是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-06T14:03:50.483

为什么不使用[Maven](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html)及其[依赖管理](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html)？

您可以指定每个依赖项、其特定版本及其范围（编译时、测试、部署等）。您可以提供一个`pom.xml`指定这些的主文件（配置文件），开发人员可以*根据需要*覆盖（例如，评估新版本）。

例如，我指定了一个 pom.xml，详细说明了我需要的特定 jar 及其版本（或范围）。依赖的 jars 会自动确定/下载。我可以指定这些 jar 中的哪些用于编译和部署等。如果我使用 Nexus 之类的集中式存储库，我可以构建我的人工制品（例如库）并将其部署到[Nexus](http://www.sonatype.org/nexus/)中，它将变得可用于其他开发人员以与第 3 方库等完全相同的方式下载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T14:07:09.550

如果您不喜欢/不想遵循 Maven 项目结构...

如果您已经使用 Ant，那么最好的选择是使用 Ivy 进行依赖管理。

[http://ant.apache.org/ivy/](http://ant.apache.org/ivy/)

它为依赖操作提供了一组丰富的 ant 任务。

来自：[Ant 依赖管理](https://stackoverflow.com/questions/1091827/ant-dependency-management)

# php - 调用 Ajax 并返回响应

> ID：12301875
> 
> 赞同：0
> 
> 时间：2012-09-06T14:03:08.997
> 
> 标签：php, javascript, jquery

我搜索了很多问题，但没有得到正确的答案。我根据我的研究做了以下函数，我知道 ajax 调用是异步的，所以它完成了将值传递给全局变量并返回但我得到一个空白或未定义的值。我可以用 $('#someid' ).html 作为响应或其他一些方法，但我不想实现它们。知道我在这里做错了什么

```
function SimpleAjax(form, postData, url)
{
    var returnData;
    var sendData;

    if (form == "") {
        sendData = postData;
    }
    else if (postData == "") {
        sendData = $(form).serialize();

    }

    $.ajax({
        type: 'POST',
        url: url,
        cache: false,
        data: sendData,
        success: function(data)
        {
            if (data != null || typeof data != 'undefined') {
                returnData = data;
            }
        }
    }).done(function(data) {
        returnData = data;
    });

    return returnData;
}​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T14:10:12.507

问题是`return returnData;`在您的成功或完成功能执行之前发生。正如你所说，它是异步的。但是，您的函数 SimpleAjax 正在同步运行。

因此它启动 Ajax 调用`$.ajax({ ... });`，然后执行`return returnData;`.

我所做的不是使用全局，那只会让你头疼。但是传入一个函数以在成功时执行，而不是尝试返回结果。

就像是...

```
function SimpleAjax(form, postData, url, successCallback)
{
    var returnData;
    var sendData;

    if (form == "") {
        sendData = postData;
    }
    else if (postData == "") {
        sendData = $(form).serialize();

    }

    $.ajax({
        type: 'POST',
        url: url,
        cache: false,
        data: sendData,
        success: successCallback
    });
}​

//TODO: set your input parameters
SimpleAjax(form, postdata, url, function(data) {
    alert(data);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T14:12:14.920

也找到了答案，我认为 .done 会发挥神奇的作用，并会在 ajax 完成后返回值，但它没有做......只需将此代码异步：false，

在ajax中，它会工作

```
 function SimpleAjax(form,postData,url)

    {

    var returnData;
   var sendData;
 if (form == "")
  {
    sendData=postData;  
  }
  else if(postData=="")
  {
    sendData=$(form).serialize();     

  }

        $.ajax({
    type:'POST',
    url: url,
    cache: false,
    data:sendData ,
   async: false, 
    success: function(data)                

    {
    if (data != null || typeof data!='undefined')   
    {  
    returnData= data;

    }

    } 

    });

    return returnData;

      } 
```

# android - 活动问题中的 findViewById

> ID：12301878
> 
> 赞同：1
> 
> 时间：2012-09-06T14:03:17.057
> 
> 标签：android, android-layout, actionbarsherlock

我正在使用 ActionBarSherlock 和自定义样式：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="match_parent"
              android:layout_height="match_parent">

    <TextView
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:gravity="center"
            android:textColor="@color/grey"
            android:id="@+id/bar_title"
            style="@style/Text.Medium">
    </TextView>

</LinearLayout> 
```

```
View mActionBarView = getLayoutInflater().inflate(R.layout.action_bar_custom, null);
getSupportActionBar().setCustomView(mActionBarView);
getSupportActionBar().setDisplayOptions(ActionBar.DISPLAY_SHOW_CUSTOM | ActionBar.DISPLAY_USE_LOGO | ActionBar.DISPLAY_SHOW_HOME);
getSupportActionBar().setDisplayHomeAsUpEnabled(true); 
```

在我的活动中，我重写了 setTitle 方法：

```
@Override
public void setTitle(CharSequence title) {
    TextView txt = (TextView) findViewById(R.id.bar_title);
    txt.setText(title);
} 
```

但是当我在片段中调用 getActivity().setTitle() 时，覆盖的 setTitle 中的变量 txt 等于 null。有什么问题？

日志：

```
09-06 18:18:21.807: ERROR/AndroidRuntime(953): FATAL EXCEPTION: main
        java.lang.RuntimeException: Unable to start activity ComponentInfo{com.alwx.reader/com.alwx.reader.activity.BookActivity}: android.view.InflateException: Binary XML file line #10: Error inflating class fragment
        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
        at android.app.ActivityThread.access$600(ActivityThread.java:130)
        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
        at android.os.Handler.dispatchMessage(Handler.java:99)
        at android.os.Looper.loop(Looper.java:137)
        at android.app.ActivityThread.main(ActivityThread.java:4745)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:511)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
        at dalvik.system.NativeStart.main(Native Method)
        Caused by: android.view.InflateException: Binary XML file line #10: Error inflating class fragment
        at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:704)
        at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
        at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
        at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
        at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
        at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:256)
        at com.actionbarsherlock.internal.ActionBarSherlockNative.setContentView(ActionBarSherlockNative.java:119)
        at com.actionbarsherlock.app.SherlockFragmentActivity.setContentView(SherlockFragmentActivity.java:251)
        at com.alwx.reader.activity.BookActivity.onCreate(BookActivity.java:19)
        at android.app.Activity.performCreate(Activity.java:5008)
        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
        ... 11 more
        Caused by: java.lang.NullPointerException
        at com.alwx.reader.activity.BookActivity.setTitle(BookActivity.java:28)
        at com.alwx.reader.fragment.BookFragment.onCreateView(BookFragment.java:52)
        at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:846)
        at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1061)
        at android.support.v4.app.FragmentManagerImpl.addFragment(FragmentManager.java:1160)
        at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:272)
        at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:676)
        ... 22 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T14:08:04.057

//这会起作用

```
 TextView txt = (TextView)mActionBarView. findViewById(R.id.bar_title);
    txt.setText(title); 
```

//没有Text.Medium的默认样式。你被创造了改变它

```
style="@android:style/TextAppearance.Medium" 
```

# php - 水平对齐单选按钮

> ID：12301882
> 
> 赞同：1
> 
> 时间：2012-09-06T14:03:28.173
> 
> 标签：php, zend-framework, radio-button, zend-form

我正在使用 zend 表单来创建一个单选按钮元素。我如何水平对齐它们。

```
$this->addElement('radio', 'howYouFeel3', array(
    'onClick' => 'showFields(this);',
    'required' => true,
    'multiOptions' => array(
            'Positive' => 'Positive',
            'negative' => 'Negative',
    )
)); 
```

我试过添加：

```
'setSep' => '', 
```

和

```
'separator' => '', 
```

和

```
'setSeparator' => '' 
```

但没有一个奏效。

也试过：

```
$howYouFeel3 = new Zend_Form_Element_Radio('howYouFeel3');
        $howYouFeel3
            ->setLabel('How you Feel?')
                    ->setSeparator('')
            ->addMultiOptions(array(
                    'positive' => 'Positive',
                    'negative' => 'Negative'
                    ));

        $this->addElement($howYouFeel3); 
```

查看了源代码，似乎代码是在 ul 中的 li 标签中创建单选按钮，这与其他有相同问题的情况下
最后有 a 不同。这也许就是分隔符不起作用的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T14:09:21.743

这个问题已经在 [这里](https://stackoverflow.com/questions/1162107/display-zend-form-element-radio-on-one-line)问过，接受的答案应该告诉你如何去做。

编辑：您是否尝试过：`array("listsep" => ' ')`

这似乎是通用的解决方案，[这](http://blog.richardknop.com/2009/07/three-zend_form-tips/)是另一个例子

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T15:18:14.467

您可以使用 setSeperator 函数来对齐单选按钮

`$radio= new Zend_Form_Element_Radio('status');
$radio->setSeparator('&nbsp');`

# events - 在图表类中显示事件和 GUI 类

> ID：12301888
> 
> 赞同：0
> 
> 时间：2012-09-06T14:03:40.463
> 
> 标签：events, user-interface, uml, diagram

我目前正在做一个项目，需要正确创建一些 uml 图，以便将它们放入我的最终报告中。

所以我想知道是否应该将 GUI 类放在图中？在那种情况下，会有很多信息，我担心这会让它更难阅读！除此之外，当我在我的程序中使用观察者时，我该如何继续添加我使用的事件类？我在这里发现了一个类似的问题： [用于显示事件的典型 uml 图](https://stackoverflow.com/questions/7923455/typical-uml-diagram-for-showing-events) ，我不知道它是否正确！

谢谢您的回答

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T16:40:39.810

`Class Diagram`通常用于显示具有关系（基数）的类之间的交互。它有点像 ER 图。对于您的情况，如果您想以时间顺序的方式显示不同类之间的控制流，那么最好使用`Sequence Diagram`，如果您想通过一个对象参与另一个对象来显示不同类之间的关系，那么使用类图。这两个图表肯定会在您的最终报告中添加一些标准。

我曾经使用`Argo UML`（免费和开源软件）来创建这些图表。但也可以使用各种其他工具，例如`Rational Rose`,`violet`或`visual Studio-2010`...。

# css - IIS 7 Windows Server 2008 / CSS 文件未在 aspx 中加载

> ID：12301893
> 
> 赞同：4
> 
> 时间：2012-09-06T14:03:47.973
> 
> 标签：css, iis-7, windows-server-2008

我发现了几个与此问题相关的主题，但找不到适合我的问题的答案，如下所示：我将 Asp.Net 4.0 站点移至新服务器（IIS 7、Windows Server 2008）。服务器端工作正常，但 CSS 样式表未加载。当我使用 firebug 时，我在应该加载 css 的部分看到以下内容

## 404 - 找不到文件或目录。

### 您要查找的资源可能已被删除、名称已更改或暂时不可用。

尽管有这条消息，我可以在网络上显示 css 的内容（以文本形式）（例如 ../Styles/button.css ..etc）

我尝试了一些解决方案，例如 IIS 上的静态文件处理程序映射或在服务器管理器上添加 ASP 角色（通过控制面板）。

任何帮助将不胜感激亲切的问候

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-11-30T11:26:43.423

您发现的文章/主题与 Uali 的答案谈论的是同一件事，这是正确的，但并不总是能解决每个人的问题。问题也不在于你的 CSS 本身。

在继续之前，请确保您已按照其他答案的指示启用**静态内容。**

**然后在IIS 管理器**窗口中选择您的虚拟目录执行这些步骤。

1.  打开**处理程序映射**。
2.  在右侧的操作面板中单击**添加托管处理程序。**
3.  在请求路径字段中，输入：***.css**
4.  在类型文本框中，输入：**System.Web.StaticFileHandler**
5.  在名称文本框中，输入您想要的任何描述性名称，例如**css fix**。
6.  单击确定。

更新：我还忘了说，如果需要，您可以对 .jpg、.png、.gif 或任何其他文件类型执行相同的操作。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-06-10T08:21:12.690

请确保您的 IIS“静态内容”已启用。请按照以下步骤操作：

1.  打开控制面板
2.  点击程序
3.  单击“程序和功能”中的“打开或关闭 Windows 功能”。
4.  打开 Internet 信息服务 -> 万维网服务 -> 通用 HTTP 功能
5.  确保选中静态内容，如果没有选中标记。

希望它会帮助你。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-08-26T21:26:20.313

在 Windows 7 上启用静态内容的过程与在 Windows Server 2008 上不同。

要在 Windows Server 2008 和 Windows Server 2008 R2 上安装静态内容功能，请执行以下步骤：

一种。打开服务器管理器，然后展开角色。湾。右键单击 Web 服务器 (IIS)，然后单击添加角色服务。C。在 Web 服务器下，单击以选中“静态内容”复选框。d。单击下一步完成安装。

这是两种情况的完整分步指南，以供参考。 [http://support.microsoft.com/kb/2196177](http://support.microsoft.com/kb/2196177)

# android - 三星等离子检查是否已经购买

> ID：12301897
> 
> 赞同：2
> 
> 时间：2012-09-06T14:03:59.977
> 
> 标签：android, samsung-mobile, plasma

所以我正在编写一个 android 应用程序并想使用三星 Plasma SDK 进行应用内支付。（我必须使用它，这不是由我决定的）而且我没有找到任何关于检查是否有人已经购买了这个项目。

例如，如果有人购买了额外的关卡，但会删除应用程序并重新安装，有没有办法检查他是否购买了我的物品？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T06:29:29.013

三星文档可能有点挑战性。等离子对象有调用 requestPurchasedItemInformationList 我真的希望触发一个带有已完成购买列表的回调。我的计划是使用该调用来避免重复购买。这可能有点矫枉过正，但总比惹恼用户好。挑战是避免对服务器的愚蠢点击。

进一步的研究让我相信，虽然这个调用确实获得了购买物品的列表，但结果无法验证。

# asp.net - 填写非常大的表格时，Asp.Net MVC 出现奇怪的错误

> ID：12301899
> 
> 赞同：1
> 
> 时间：2012-09-06T14:04:01.340
> 
> 标签：asp.net, asp.net-mvc

在一个新网站上，我有一个巨大的公式（意思是非常大，至少需要 15-20 分钟才能完成），为明年的一个客户配置整个网站。

它分布在几个选项卡之间（它是一个向导）。每次我们转到下一个选项卡时，它都会对生成下一个“页面”的服务器进行常规（非 ajax）调用。先前的信息存储在会话中（具有自定义活页夹的对象）。

在我们今天使用所有真实数据对其进行测试之前，一切都运行良好。真实数据需要反思，努力寻找正确的元素，......而且这需要时间。

我们遇到的问题是视图收到了一个部分为空的模型。会话持续时间设置为 1440 分钟（在 IIS 中也是如此）。现在我知道的是，当我第一次尝试将模型访问到我的视图中时，我得到了一个 NullException。

我从大约 1 小时开始检查控制器，但它不可能给出一个空模型。如果我把所有这些数据都非常快，我没有任何问题（但它是随机数据）。

目前我只设法在 IIS 服务器上重现此问题，并且我正在检查 elmah 日志以对其进行调试，因此重现它并不容易。

您对我应该如何调试有任何想法吗？我有点迷失在这里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T14:30:12.987

除了@Ufuk提供的ans之外，
您还可以每1分钟轻松发送一个`ajax`请求，这实际上不会做任何事情，但这样做`session`不会过期并且网站将继续长时间运行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T07:12:46.110

问题是我认为会议没有足够的空间。我通过重新启动应用程序池暂时解决了我的问题。仍在寻找不意味着更改所有这些代码的解决方案。也许使用其他会话状态模式，但我需要使我的模型可序列化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T14:26:26.397

我认为您应该假设 session 不提供可靠的持久性。我不确定细节，但我猜它会在超过内存限制时开始释放一些元素。

如果您使用数据库来存储该信息，或者您可以引入自己的实现来持久化状态，您会更安全。

# asp.net - 在 Visual Basic 中向 gridview 添加行

> ID：12301902
> 
> 赞同：0
> 
> 时间：2012-09-06T14:04:08.737
> 
> 标签：asp.net, vb.net, gridview

我的 ASP 网站上有一个 gridview，需要处理每一行，并根据条件保留该行或将其删除并将其添加到另一个 gridview。我已经弄清楚了如何通过简单地使用一种内置方法来删除该行。我在网上找到的所有内容都告诉我使用“gridview.Rows.Add(row)”属性，但是它在 Visual Studio 中创建了以下错误：

“‘添加’不是‘System.Web.UI.WebControls.GridViewRowCollection’的成员。”

*   grdTraining 是包含要检查的结果的“主”网格视图。
*   grdExpTraining 是“辅助”网格视图，它采用从“主”中提取的行。
*   grdTraining_RowDataBound 是一种方法，每次网站找到要放入 grdTraining 的记录时都会调用该方法。

    ```
    Protected Sub grdTraining_RowDataBound(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewRowEventArgs) Handles grdTraining.RowDataBound

       ' Grey out expired training courses
       Dim row As GridViewRow
       row = e.Row
       Dim incomingDate As String
       incomingDate = row.Cells(4).Text.ToString()

       If (e.Row.RowType <> DataControlRowType.DataRow) Then
           Exit Sub
       End If

       Try
           Dim expDate As Date = incomingDate
           If (expDate < DateTime.Today) Then
               grdExpTraining.Rows.Add(row)    'The line that is causing the error
               grdTraining.DeleteRow(trnIndex)
           End If
       Catch ex As Exception
       End Try

       trnIndex += 1
    End Sub 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T22:29:04.587

我能够使用以下代码在我的网格视图中添加一行。我基本上不得不再次重新执行整个过程，将嵌套的网格视图视为全新的网格视图。这也仅在您计划在嵌套网格视图中放置一行时才有效。您可以使用 DataTable 和 DataRow 声明的范围来做其他事情。

```
 'Create datatable and columns
            Dim dtable As New DataTable
            dtable.Columns.Add(New DataColumn("StateCode"))
            dtable.Columns.Add(New DataColumn("CourseDesc"))
            dtable.Columns.Add(New DataColumn("Hours"))
            dtable.Columns.Add(New DataColumn("EffectiveDate"))
            dtable.Columns.Add(New DataColumn("ExpirationDate"))
            dtable.Columns.Add(New DataColumn("LastChange"))

            'Create counter to prevent out of bounds exception
            Dim i As Integer = row.Cells.Count

            'Create object for RowValues
            Dim RowValues As Object() = {"", "", "", "", "", ""}

            'Fill row values appropriately
            For index As Integer = 0 To i - 1
                RowValues(index) = row.Cells(index).Text
            Next

            'create new data row
            Dim dRow As DataRow
            dRow = dtable.Rows.Add(RowValues)
            dtable.AcceptChanges()

            'now bind datatable to gridview... 
            grdExpTraining.DataSource = dtable
            grdExpTraining.DataBind() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-22T05:00:47.997

如果您喜欢在 gridview 上自动行，例如从数据库记录数中获取一些学生信息，那么这可能会有所帮助。

HTML

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
    CellPadding="2" CellSpacing="1" DataKeyNames="Roll_No,ID_Number,Marks,Remarks" ForeColor="#333333" GridLines="None">
        <AlternatingRowStyle BackColor="White" />
        <Columns>
          <asp:TemplateField HeaderText="Roll No">
            <ItemTemplate>
              <asp:Label ID="txtRoll_No" runat="server"></asp:Label>
            </ItemTemplate>
          </asp:TemplateField>
          <asp:TemplateField HeaderText="ID Number">
            <ItemTemplate>
              <asp:Label ID="txtID_Number" runat="server"></asp:Label>
            </ItemTemplate>
          </asp:TemplateField>
          <asp:TemplateField HeaderText="Marks">
            <ItemTemplate>
              <asp:TextBox ID="txtMarks" runat="server" Width="50px" CssClass="text" 
            Text=""></asp:TextBox>
            </ItemTemplate>
          </asp:TemplateField>
          <asp:TemplateField HeaderText="Remarks">
            <ItemTemplate>
              <asp:TextBox ID="txtRemarks" runat="server" CssClass="text" Width="200"></asp:TextBox>
            </ItemTemplate>
          </asp:TemplateField>
        </Columns>
        <EditRowStyle BackColor="#2461BF" />
        <FooterStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
        <HeaderStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
        <PagerStyle BackColor="#2461BF" ForeColor="White" HorizontalAlign="Center" />
        <RowStyle BackColor="#EFF3FB" />
        <SelectedRowStyle BackColor="#D1DDF1" Font-Bold="True" ForeColor="#333333" />
        <SortedAscendingCellStyle BackColor="#F5F7FB" />
        <SortedAscendingHeaderStyle BackColor="#6D95E1" />
        <SortedDescendingCellStyle BackColor="#E9EBEF" />
        <SortedDescendingHeaderStyle BackColor="#4870BE" />
      </asp:GridView> 
```

VB.NET 代码

```
Dim dt As New DataTable()
Dim i As Integer
dt.Columns.Add(New DataColumn("Roll_No"))
dt.Columns.Add(New DataColumn("ID_Number"))
dt.Columns.Add(New DataColumn("Marks"))
dt.Columns.Add(New DataColumn("Remarks"))
For i = 1 To 10
  Dim dRow As DataRow      
  dRow = dt.NewRow
  dt.Rows.Add(dRow)    
  dt.AcceptChanges()      
Next i
'now bind datatable to gridview... 
GridView1.DataSource = dt
GridView1.DataBind()

With GridView1
  For i = 0 To .Rows.Count - 1
    Dim Roll_No As Label = DirectCast(.Rows(i).Cells(1).FindControl("txtRoll_No"), Label)
    Dim ID_Number As Label = DirectCast(.Rows(i).Cells(2).FindControl("txtID_Number"), Label)        
    Roll_No.Text = i + 1
    ID_Number.Text = "2014-01-" & i + 1
  Next
End With 
```

如果要逐行插入单行，则可以在其中编辑标记和备注以及 INSERT INTO DB，然后删除循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T14:56:12.933

我认为您需要在 grdExpTraining 上使用 CopyTo，将行添加到 ArrayList，然后再次初始化 GridViewRowCollection。

# ibm-mq - MQ 进程 amqrmppa 在 Linux 中获取失效状态

> ID：12301903
> 
> 赞同：1
> 
> 时间：2012-09-06T14:04:10.777
> 
> 标签：ibm-mq, mq

我的进程**`amqrmppa`**显示**`defunct`**状态有问题，请参阅以下详细信息：

```
mqm       2055  2912  0 Sep01 ?        00:00:31 [amqrmppa] <defunct>
mqm       2524  2912  0 Sep02 ?        00:00:23 [amqrmppa] <defunct>
mqm       2570  2912  0 Sep03 ?        00:00:21 [amqrmppa] <defunct>
mqm       4754  2912  0 Sep03 ?        00:00:19 [amqrmppa] <defunct>
mqm       5628  2912  0 Sep02 ?        00:00:23 [amqrmppa] <defunct> 
```

我检查了错误日志文件，但那里没有任何线索。你能帮我弄清楚吗？如何处理？

谢谢

WebSphere MQ for Linux（x86-64 平台）7.0.1.5 Linux 2.6.32.12-0.7-default

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T17:08:19.163

这些是通道池过程。这种状态有几个原因，其中最常见的原因是通道被抢先杀死或这些通道的父进程被杀死。其他不太常见的错误包括编码不正确的通道出口或偶尔出现的错误。（是的，amqrrmpa 不时出现在 APAR 列表中。）如果不查看通道配置，真的很难提供比这更具体的响应。如果出于安全原因无法发布它们，您需要打开 PMR 并让 IBM 查看它们。具体来说，我会查看通道是在 FASTPATH 还是受信任模式下运行，是否定义了出口等。我还会查看版本和修复包级别，然后查看 APAR 列表以获取以后的修复看看有没有解决问题。[MustGather](http://www-01.ibm.com/support/docview.wss?rs=171&uid=swg21229861)程序并打开 PMR。

对于它的价值，通常最好转到 MustGather 页面并按平台和问题类别进行深入研究，以获得一些非常有用的诊断建议。

# android - 如何在谷歌地图上绘制和导航路线

> ID：12301904
> 
> 赞同：0
> 
> 时间：2012-09-06T14:04:20.657
> 
> 标签：android, google-maps, navigation, coordinates

我想在谷歌地图上绘制路线（步行或开车），我想给出当前用户坐标和目的地坐标的意图，以绘制和导航路线，如图所示

![在此处输入图像描述](../Images/4b40c97b35304fba4791120e2ff9a4b3.png)

我用了这段代码

```
Intent intent = new Intent(android.content.Intent.ACTION_VIEW, Uri.parse("http://maps.google.com/maps?saddr=20.344,34.34&daddr=20.5666,45.345")); startActivity(intent); 
```

但我得到“找不到路线”

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T18:17:41.697

你不能故意这样做。你应该使用 JSON 请求`http://maps.googleapis.com/maps/api/directions/output?parameters.`如果你使用 JSON 请求，你必须像这个例子一样，只需添加你的坐标：`String url = "http://maps.googleapis.com/maps/api/directions/json?origin="yourlat","yourlong"&destination="secondlat","secondlong"&sensor=false";`

这可能会有所帮助：[Android draw route on a Mapview with twoo POI-s](https://stackoverflow.com/questions/4408671/android-draw-route-on-a-mapview-with-twoo-poi-s)和这个[How do I draw a KML file on a MapView in Android?](https://stackoverflow.com/questions/11845790/how-do-i-draw-a-kml-file-on-a-mapview-in-android)

# mysql - 我如何构建这个 JOIN 语句？条件有问题

> ID：12301906
> 
> 赞同：0
> 
> 时间：2012-09-06T14:04:21.563
> 
> 标签：mysql, search, join

现在我刚刚开始加入，所以我可能缺少对它的一些核心理解，但这就是我想做的：

我有一个带有个人资料的表格，以及几个带有 profile_id 的表格（角色、技能、头衔等）、一些不相关的数据和 value_id（一对一的关系）

用户将输入一个包含不同 value_id 的数组，我想检索所有配置文件的 id，这些配置文件的对应表的 value_id 与我们从用户那里检索到的值匹配。

输入中的某些值被指定为仅匹配某个表（在本例中为角色和行业），并且该部分现在正在工作。但是我不能做的是检查**任何**相关表中是否有匹配项。

* * *

**我不知道如何设置这个 sql 块的样式。对不起。**编辑：它自己设计的。整洁的。
在这个例子中，我有三个值。一个 (88) 指定用于搜索某个角色，一个用于行业 (128)，第三个 (73) 必须匹配一组表中的至少一行。

```
SELECT DISTINCT(profiles.id) as id,  
FROM profiles  
INNER JOIN profile_experience_roles r ON(r.profile_id = profiles.id)  
INNER JOIN profile_experience_industries i ON(i.profile_id = profiles.id)  
INNER JOIN profile_experience_technology t ON(t.profile_id = profiles.id)  
INNER JOIN profile_wanted_roles w ON(w.profile_id = profiles.id)  
INNER JOIN profile_languages l ON(l.profile_id = profiles.id)   
WHERE r.value_id = 88 AND i.value_id = 128 AND  
(r.value_id = 73 OR i.value_id = 73 OR t.value_id = 73 OR w.value_id = 73 OR l.value_id = 73) 
```

最后一行是导致问题的原因。任何帮助表示赞赏。

另外，我以前从来没有在这里发过帖子，所以我不知道我在做什么。
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T14:21:00.140

关于连接差异的一个很好的例子是：[“INNER JOIN”和“OUTER JOIN”有什么区别？](https://stackoverflow.com/questions/38549/difference-between-inner-and-outer-join)

内部连接可能是原因。您可能正在加入不存在的 id，并且所有数据都没有返回。我还包括了 Robin 对 IN 所做的更改并删除了 r.value 和 i.value

尝试这个：

```
SELECT 
    DISTINCT(profiles.id) as id,  
FROM profiles  
RIGHT JOIN profile_experience_roles r ON(r.profile_id = profiles.id)  
RIGHT JOIN profile_experience_industries i ON(i.profile_id = profiles.id)  
RIGHT JOIN profile_experience_technology t ON(t.profile_id = profiles.id)  
RIGHT JOIN profile_wanted_roles w ON(w.profile_id = profiles.id)  
INNER JOIN profile_languages l ON(l.profile_id = profiles.id)   
WHERE profiles.id is not null AND r.value_id = 88 AND i.value_id = 128 AND 
    73 IN (t.value_id, w.value_id, l.value_id) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T14:10:35.360

尝试

```
WHERE r.value_id = 88 AND i.value_id = 128 AND 
73 IN (r.value_id, i.value_id, t.value_id, w.value_id, l.value_id) 
```

在您的情况下，您应该可以使用

```
WHERE r.value_id = 88 AND i.value_id = 128 AND 
73 IN (t.value_id, w.value_id, l.value_id) 
```

因为`r.value_id`永远不可能是 88*和*73。同样`i.value_id`不能是 128*和*73。

请注意，这需要*所有*`INNER JOIN`这些表之间的连接以获取任何行。

# c# - 如何在 Z3 中使用 .net API 使用 elim-quantifiers？

> ID：12301908
> 
> 赞同：1
> 
> 时间：2012-09-06T14:04:28.453
> 
> 标签：c#, .net, z3, smt

我找不到 .net api，因为`(elim-quantifiers (exists ((x Int)) (and (< t1 x) (< x t2))))`它是一种策略吗？有人可以帮助我使用 Z3 的 .net API 来实现以下脚本吗？

```
(declare-const t1 Int)
(declare-const t2 Int)

(elim-quantifiers (exists ((x Int)) (and (< t1 x) (< x t2)))) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T15:07:12.623

是的，你可以使用一种策略。这是一个使用 .NET API 的示例（我没有运行此特定示例，因此可能需要进行一些小的修改，但我在我的程序中使用大致相同的示例）。

```
// (exists ((x Int)) (and (< t1 x) (< x t2))))
Context z3 = new Context();
Expr t1 = z3.MkIntConst("t1");
Expr t2 = z3.MkIntConst("t2");
Expr x = z3.MkIntConst("x");

Expr p = z3.MkAnd(z3.MkLt((ArithExpr)t1, (ArithExpr)x), z3.MkLt((ArithExpr)x, (ArithExpr)t2));
Expr ex = z3.MkExists(new Expr[] { x }, p);

Goal g = z3.MkGoal(true, true, false);
g.Assert((BoolExpr)ex);
Tactic tac = Instance.Z3.MkTactic("qe"); // quantifier elimination
ApplyResult a = tac.Apply(g); // look at a.Subgoals 
```

# android - SQLCipher Android 的稳定性

> ID：12301912
> 
> 赞同：2
> 
> 时间：2012-09-06T14:04:46.923
> 
> 标签：android, android-sqlite, sqlcipher

关于 Android 中 SQLCipher 稳定性的一般问题，以及 github[自述](https://github.com/sqlcipher/android-database-sqlcipher)文件是否可能只需要更新。库的最新完整描述非常古老（5 月 11 日），内容如下：

> 此版本中的 Android 支持库仍然是 alpha 质量，因此是 Developer Preview 标签。

另一方面，Zetetic[提供了一个商业二进制文件](http://sqlcipher.net/downloads/)，Mark Murphy 有[一个使用它的项目，他还支持在](https://github.com/commonsguy/cw-omnibus/tree/master/Database/ConstantsSecure)[6 月份](http://community.developer.motorola.com/t5/MOTODEV-Blog/SQLCipher-for-Android-and-You/ba-p/27070)使用该库，但没有提及不稳定性。那么，我是否可以安全地假设评论不再适用并且 SQLCipher 实际上已准备好用于生产（如果我只针对 2.3 及更高版本）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T21:37:23.550

代表尼克发帖，来自[邮件列表的回复](https://groups.google.com/group/sqlcipher/browse_frm/thread/c161f0cd76f11c60)

> 是的，我们确实需要更新 README 以反映对 Android 的 SQLCipher 状态的更准确描述。它很稳定，并且在 Google Play 商店中有几个应用程序在生产中使用它。我们已经在 Android 版本 2.1 到 4.0.3 上验证了它的测试套件。我们也在 4.1 上成功运行了它。我很快就会得到更准确的 README 文件。如果你有问题就告诉我们。谢谢！

# javascript - 这个javascript代码getElementById有什么问题？

> ID：12301913
> 
> 赞同：1
> 
> 时间：2012-09-06T14:04:49.207
> 
> 标签：javascript, html, getelementbyid

我在下面有这个代码..

```
<script>  document.getElementById('example').style.background-color =
'#FFCC00';    
</script>
<div id="example">This is an example.</div> 
```

为什么它不起作用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T14:06:35.763

该脚本在具有给定 id 的元素存在之前运行，并且您有一个带有连字符的[DOM 属性名称](http://www.w3.org/TR/DOM-Level-2-Style/css.html#CSS-CSS2Properties)（它被视为减号运算符）。

```
<!-- Put the element first -->
<div id="example">This is an example.</div>
<script>
    // camelCase CSS property names when converting to DOM property names
    document.getElementById('example').style.backgroundColor = '#FFCC00';    
</script> 
```

请参阅上述代码片段的[实时示例。](http://jsfiddle.net/eYukX/)

您可以将 JS 语句包装在一个函数中，然后在元素存在后调用它，而不是将元素放在首位。您可以通过将其作为[事件处理程序](https://developer.mozilla.org/en-US/docs/DOM/event)绑定到合适的东西（例如文档[加载事件](https://developer.mozilla.org/en-US/docs/DOM/DOM_event_reference)）来自动发生这种情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T14:06:59.060

你应该写 backgroundColor

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T14:17:09.257

代码中需要更改的 2 件事。

1.  照原样，您的代码顺序错误。您需要先拥有 HTML，然后是 JS。按此顺序该元素尚不存在，JS 正在执行，DOM 对象尚不存在。

2.  没有“背景颜色”属性。而是使用“.backgroundColor”。破折号通常用驼色外壳代替。

**这是一个工作示例**：

```
<div id="example">This is an example.</div>

<script>
  document.getElementById('example').style.backgroundColor = '#FFCC00';
</script> 
```

**另一个提示**：

如果要将订单作为依赖项删除，可以将 JavaScript 包装在“onload”事件处理程序中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T14:10:21.677

将 更改`<script>`为低于您的元素并使用`backgroundColor`

```
<div id="example">This is an example.</div>
<script>  
    document.getElementById('example').style.backgroundColor ='#FFCC00';    
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-03T17:28:36.193

更新：

```
<div id="example">This is an example.</div>
<script>document.getElementById('example').style.setProperty('background-color','#fco','important');</script> 
```

,'重要'不是必需的

# c# - 如何使用 WPF 调用 JavaScript 对象的函数？

> ID：12301915
> 
> 赞同：0
> 
> 时间：2012-09-06T14:04:52.117
> 
> 标签：c#, javascript, wpf, browser

我的 WPF 应用程序 (System.Windows.Controls.WebBrowser) 中有一个 WebBrowser 实例。在网站中，我有以下 JavaScript 代码。

```
// Javascript   
myNamespace = {};
myNamespace.helloJavaScriptMETHOD = function() { alert("Hello"); };

helloJavaScriptFUNCTION = function() { alert("Hello); }; 
```

我可以调用 helloJavaScriptFUNCTION

```
// C#
webBrowser.InvokeScript("helloJavaScriptFUNCTION"); 
```

如何在不更改网站/JavaScript 的情况下调用 helloJavaScriptMETHOD？我尝试了以下但没有成功：

```
// C#
webBrowser.InvokeScript("myNamespace.helloJavaScriptMETHOD");
webBrowser.InvokeScript("(function(){ return myNamespace.helloJavaScriptMETHOD; })");
webBrowser.InvokeScript("myNamespace.helloJavaScriptMETHOD()"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T14:36:51.313

您可能无法直接在命名空间中调用 JavaScript 方法，但可以使用`eval`. 类似的技术被用于调用 JQuery。查看[如何使用 InvokeScript() 从 .NET WebBrowser 控件调用 jQuery 函数？](https://stackoverflow.com/questions/9188063/how-to-call-a-jquery-function-from-net-webbrowser-control-using-invokescript). 它使用了错误的控制，但该技术可能在这里起作用。

# c++ - 等式比较 std::weak_ptr

> ID：12301916
> 
> 赞同：38
> 
> 时间：2012-09-06T14:04:54.663
> 
> 标签：c++, c++11, shared-ptr, weak-ptr

我想比较两个 std::weak_ptr 或一个 std::weak_ptr 和一个 std::shared_ptr 是否相等。

我想知道的是每个weak_ptr/shared_ptr指向的对象是否相同。不仅如果地址不匹配，而且如果底层对象被删除然后偶然用相同的地址重建，则比较应该产生负面结果。

所以基本上，即使分配器保留相同的地址，我也希望这个断言成立：

```
auto s1 = std::make_shared<int>(43);
std::weak_ptr<int> w1(s1);

s1.reset();

auto s2 = std::make_shared<int>(41);
std::weak_ptr<int> w2(s2);

assert(!equals(w1,w2)); 
```

weak_ptr 模板不提供相等运算符，据我了解，这是[有充分理由](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2004/n1590.html)的。

所以一个天真的实现看起来像这样：

```
template <typename T, typename U>
inline bool naive_equals(const std::weak_ptr<T>& t, const std::weak_ptr<U>& u)
{
    return !t.expired() && t.lock() == u.lock();
}

template <typename T, typename U>
inline bool naive_equals(const std::weak_ptr<T>& t, const std::shared_ptr<U>& u)
{
    return !t.expired() && t.lock() == u;
} 
```

如果第一个weak_ptr 在此期间过期，它产生0。如果没有，我将weak_ptr 升级为shared_ptr 并比较地址。

问题是我必须两次（一次）锁定weak_ptr！恐怕这需要太多时间。

我想出了这个：

```
template <typename T, typename U>
inline bool equals(const std::weak_ptr<T>& t, const std::weak_ptr<U>& u)
{
    return !t.owner_before(u) && !u.owner_before(t);
}

template <typename T, typename U>
inline bool equals(const std::weak_ptr<T>& t, const std::shared_ptr<U>& u)
{
    return !t.owner_before(u) && !u.owner_before(t);
} 
```

它检查 u 的所有者块是否不在“之前”t 和 t 不在 u 之前，所以 t == u。

这是否按我的意愿工作？从不同的 shared_ptr 创建的两个weak_ptr 是否总是以这种方式比较不相等？还是我错过了什么？

**编辑：**为什么我首先要这样做？我想要一个带有共享指针的容器，并且我想分发对其中对象的引用。我不能使用迭代器，因为它们可能会失效。我可以分发（整数）ID，但这会导致唯一性问题，并且需要地图类型和复杂的搜索/插入/删除操作。这个想法是使用 std::set 并将指针本身（封装在包装类中）作为键，以便客户端可以使用weak_ptr 访问集合中的对象。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-06T14:17:38.450

完全重写这个答案，因为我完全误解了。这是一件很难做对的事情！

`std::weak_ptr`和`std::shared_ptr`标准一致的通常实现是有两个堆对象：托管对象和*控制块*。每个指向同一个对象的共享指针都包含一个指向该对象和控制块的指针，每个弱指针也是如此。控制块记录共享指针的个数和弱指针的个数，当共享指针的个数达到0时释放被管理对象；当弱指针的数量也达到 0 时，控制块本身被释放。

由于共享或弱指针中的对象指针可以指向实际托管对象的子对象，例如基类、成员或什至托管对象拥有的另一个堆对象，这一事实变得复杂。

```
S0 ----------______       MO <------+
   \__             `----> BC        |
      \_ _______--------> m1        |
     ___X__               m2 --> H  |
S1 -/      \__ __----------------^  |
    \___ _____X__                   |
    ____X________\__                |
W0 /----------------`---> CB -------+  
                          s = 2 
                          w = 1 
```

这里我们有两个共享指针，分别指向托管对象的基类和成员，以及指向托管对象拥有的堆对象的弱指针；控制块记录了存在两个共享指针和一个弱指针。控制块还有一个指向托管对象的指针，当托管对象过期时，它使用它来删除托管对象。

`owner_before`/语义是通过`owner_less`控制块的地址来比较共享指针和弱指针，保证不改变，除非指针本身被修改；即使弱指针因为所有共享指针都被破坏而*过期*，它的控制块仍然存在，直到所有弱指针也被破坏。

因此，您的`equals`代码绝对正确且线程安全。

问题是它不一致，`shared_ptr::operator==`因为它比较对象指针，并且具有相同控制块的两个共享指针可以指向不同的对象（如上）。

为了与 保持一致`shared_ptr::operator==`，写作`t.lock() == u`绝对没问题；但是请注意，如果它返回，`true`那么仍然不能确定弱指针是另一个共享指针的弱指针；它*可能*是别名指针，因此在以下代码中仍可能过期。

但是，比较控制块的开销较小（因为它不需要查看控制块），并且会给出与`==`不使用别名指针相同的结果。

* * *

我认为这里的标准存在缺陷；添加一个`owner_equals`and`owner_hash`将允许`weak_ptr`在无序容器中使用，并且考虑`owner_equals`到比较弱指针是否相等实际上是明智的，因为您可以安全地比较控制块指针*然后*对象指针，因为如果两个弱指针具有相同的控制块，那么您知道要么两者都过期，要么都不过期。也许是标准的下一个版本。

# xpages - 单击寻呼机号码时刷新容器面板

> ID：12301920
> 
> 赞同：0
> 
> 时间：2012-09-06T14:05:04.527
> 
> 标签：xpages

我在选项卡式面板中有一个数据表。无论分页器是在选项卡式面板内部还是外部，此数据表的分页器控件都不会自行刷新。但是数据表毫无问题地前进到下一页。有没有人遇到过这个问题？这是一个示例代码。

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core">
<xp:tabbedPanel id="tabbedPanel1">
<xp:this.selectedTab><![CDATA[#{javascript:viewScope.selectedTab?viewScope.selectedTab:"tabPanel1"}]]></xp:this.selectedTab>
    <xp:pager layout="Previous Group Next" partialExecute="true"
        partialRefresh="true" for="dataTable1" id="pager1">
    </xp:pager>
    <xp:tabPanel label="New Tab 1" id="tabPanel1">
        <xp:dataTable id="dataTable1" rows="2" indexVar="i">
            <xp:this.value><![CDATA[#{javascript:["1","2","3","4","5","6"]}]]></xp:this.value>
            <xp:column id="column1">
                <xp:text escape="true" id="computedField1" value="#{javascript:i}">
                </xp:text>
            </xp:column>
        </xp:dataTable>
    </xp:tabPanel>
    <xp:tabPanel label="New Tab 2" id="tabPanel2"></xp:tabPanel>
    <xp:tabPanel label="New Tab 3" id="tabPanel3"></xp:tabPanel>
    <xp:tabPanel label="New Tab 4" id="tabPanel4"></xp:tabPanel>
</xp:tabbedPanel>
</xp:view> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:07:10.383

如果设置 partialRefresh="false" 则分页器将与页面上的所有其他元素一起刷新。

# arrays - 什么是从数组中删除的最简单方法

> ID：12301921
> 
> 赞同：1
> 
> 时间：2012-09-06T14:05:06.103
> 
> 标签：arrays, actionscript-3, flash

```
var myLetters = new Array(
         new BlockA(),
         new BlockB(),
         new BlockC()
    ); 
```

例如，我如何删除 myLetters[1]。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T14:07:25.380

要删除任意位置的元素，您可以使用 splice [http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Array.html#splice%28%29](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Array.html#splice%28%29)：

```
myLetters.splice(1, 1); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T14:06:29.933

怎么样[`.splice()`](http://help.adobe.com/en_US/AS2LCR/Flash_10.0/help.html?content=00000752.html)？

如果要删除第一个元素：

```
myLetters.splice(0, 1); 
```

其中第一个参数是索引（从 0 开始），第二个参数是要删除的项目数量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T18:35:22.147

删除我的信件[1]；也可以工作，只是它不会在 [1] 之后移动项目以缩小差距。

# java - JTable getSelectedRow 不返回选定的行索引

> ID：12301923
> 
> 赞同：2
> 
> 时间：2012-09-06T14:05:10.797
> 
> 标签：java, swing, jtable, listselectionlistener

我尝试在选定但`getSelectedRow()`不起作用的行中获取数据。实际上，我在另一个类中使用了该方法，但它在那里有效。当我尝试打印行索引时；提示显示-1；如未选中。

我尝试了互联网上的大多数解决方案，但他们没有解决我的解决方案。

```
public Canteen() {
    try {
        jbInit();
    } catch (Exception e) {
        e.printStackTrace();
    }
}

private void jbInit() throws Exception {
    this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    this.getContentPane().setLayout( null );
    this.setSize( new Dimension(400, 300) );
    this.setTitle( "CANTEEN" );
    jScrollPane1.setBounds(new Rectangle(0, 0, 230, 235));
    jButton1.setText("REFRESH");
    jButton1.setBounds(new Rectangle(0, 235, 100, 20));
    jButton1.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                jButton1_actionPerformed(e);
            }
        });
    jButton2.setText("CLOSE");
    jButton2.setBounds(new Rectangle(120, 235, 110, 20));
    jButton2.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                jButton2_actionPerformed(e);
            }
        });
    jScrollPane1.getViewport().add(jTable1, null);
    this.getContentPane().add(jButton2, null);
    this.getContentPane().add(jButton1, null);
    this.getContentPane().add(jScrollPane1, null);
    jTable1 = new JTable (model);

    String header [] = {"CUSTOMER", "PRODUCT", "QUANTITY","ORDER NO"};
    for (int i = 0; i < 4; i++){
        model.addColumn(header[i]);
        }  

    //refresh every 1 minute 
    Timer timer = new Timer();
    timer.scheduleAtFixedRate(new TimerTask(){
        public void run(){
            model.setRowCount(0);
            try {
                Class.forName(driverName);
                conn = DriverManager.getConnection(url,username, password);
                statement = conn.createStatement();
                ResultSet rs = statement.executeQuery("SELECT USER_NAME, QUANTITY, PRD_NAME, ORDER_NUMBER FROM ORDERS ORDER BY ORDER_NUMBER DESC");
                int count = rs.getRow();
                String user [] = new String [count];
                int i = 0;
                while (rs.next()){
                    String name = rs.getString(1);
                    String prdName = rs.getString(3);
                    int number = rs.getInt(2);
                    int orderNumber = rs.getInt(4);
                    model.insertRow(i,new Object []{name,prdName,number, orderNumber});
                    }
                conn.close();
                }
                    catch (ClassNotFoundException s) {
                            System.out.println("Couldn't find the database driver");
                            System.out.println(s);

                        } 
                        catch (SQLException s) {
                            System.out.println("Couldn't connect to the database\n" +s);
                        }

       }
    },0, 60000); 
    }

private void jButton1_actionPerformed(ActionEvent e) {
    //set from row 0 for refresh
    model.setRowCount(0);

    try {
        Class.forName(driverName);
        conn = DriverManager.getConnection(url,username, password);
        statement = conn.createStatement();
        ResultSet rs = statement.executeQuery("SELECT USER_NAME, QUANTITY, PRD_NAME FROM ORDERS ORDER BY ORDER_NUMBER DESC");
        int count = rs.getRow();
        String user [] = new String [count];
        int i = 0;
        while (rs.next()){
            String name = rs.getString(1);
            String prdName = rs.getString(3);
            int number = rs.getInt(2);
            model.insertRow(i,new Object []{name,prdName,number});
            } 
        conn.close();
        }
    catch (ClassNotFoundException s) {
            System.out.println("Couldn't find the database driver");
            System.out.println(s);

        } 
        catch (SQLException s) {
            System.out.println("Couldn't connect to the database\n" +s);
        }

}

private void jButton2_actionPerformed(ActionEvent e) {
    System.out.println(jTable1.getSelectedRow());
        }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T10:45:38.900

查看您的代码

```
private void jbInit() throws Exception {
    ...
    jScrollPane1.getViewport().add(jTable1, null);
    this.getContentPane().add(jButton2, null);
    this.getContentPane().add(jButton1, null);
    this.getContentPane().add(jScrollPane1, null);
    jTable1 = new JTable (model);
    ... 
```

您首先添加`jTable1`到 ，`JScrollPane`然后才创建`jTable1`. 这是不正确的方式。`jTable1`变量现在没有与您放置在表单中的表格链接。我认为这是你的问题的原因。

在添加`jTable1`到`JScrollPane`.

```
...
jTable1 = new JTable (model);
jScrollPane1.getViewport().add(jTable1, null);
this.getContentPane().add(jButton2, null);
this.getContentPane().add(jButton1, null);
this.getContentPane().add(jScrollPane1, null);
... 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-06T18:21:19.810

正如您的其他示例所示，`getSelectedRow()`确实有效，因此您将不得不调试代码。[与下面的sscce](http://sscce.org/)进行比较可能会暗示前进的方向。`ActionListener`和都`ListSelectionListener`显示选定的行。

![图片](../Images/693689e3aa7295979a2e33d6a3c7b0ae.png)

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.event.ActionEvent;
import javax.swing.AbstractAction;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.ListSelectionModel;
import javax.swing.event.ListSelectionEvent;
import javax.swing.event.ListSelectionListener;
import javax.swing.table.DefaultTableModel;

/**
 * @see http://stackoverflow.com/q/12301923/230513
 */
public class TableSelection extends JPanel {

    private static final String SHOW = "Show";
    private DefaultTableModel model = new DefaultTableModel();
    private JTable table = new JTable(model);
    private JButton button = new JButton(new AbstractAction(SHOW) {

        @Override
        public void actionPerformed(ActionEvent e) {
            System.out.println(table.getSelectedRow());
        }
    });

    public TableSelection() {
        model.addColumn("Column");
        for (int i = 0; i < 16; i++) {
            model.addRow(new Object[]{i});
        }
        table.setPreferredScrollableViewportSize(new Dimension(160, 100));
        table.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
        table.getSelectionModel().addListSelectionListener(
            new ListSelectionListener() {

            @Override
            public void valueChanged(ListSelectionEvent e) {
                if (!e.getValueIsAdjusting()) {
                    button.setText(SHOW + " " + table.getSelectedRow());
                }
            }
        });
        this.add(new JScrollPane(table));
        table.setRowSelectionInterval(3, 3);
    }

    private void display() {
        JFrame f = new JFrame("TableSelection");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(this, BorderLayout.CENTER);
        f.add(button, BorderLayout.SOUTH);
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TableSelection().display();
            }
        });
    }
} 
```

# c++ - 错误 LNK2019：未解决的外部符号？

> ID：12301925
> 
> 赞同：0
> 
> 时间：2012-09-06T14:05:18.550
> 
> 标签：c++, visual-studio-2010, cplex

我正在使用 Cplex 和 Visual Studio 2010。我添加了包含并链接了`.lib`. 我有很多错误，如下所示：

*   错误 1

    ```
    error LNK2019: unresolved external symbol "public: void __thiscall IloAlgorithm::extract(class IloModel)const "
    (?extract@IloAlgorithm@@QBEXVIloModel@@@Z) referenced in function
    _main   C:\Users\yasmine\Documents\Visual Studio 2010\Projects\NursesAllocation\NursesAllocation\NursesAllocation.obj 
    ```

*   错误 2

    ```
    error LNK2019: unresolved external symbol "public: __thiscall IloCplex::IloCplex(class IloEnv)"
    (??0IloCplex@@QAE@VIloEnv@@@Z) referenced in function
    _main   C:\Users\yasmine\Documents\Visual Studio 2010\Projects\NursesAllocation\NursesAllocation\NursesAllocation.obj 
    ```

请问，你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:09:37.873

我遇到了同样的问题，我解决了它，包括 ilocplex.lib 到其他依赖项。但是，我有 Visual Studio 2008 的 Cplex。

# haskell - 不在范围内：Haskell 中的数据构造函数

> ID：12301930
> 
> 赞同：19
> 
> 时间：2012-09-06T14:05:28.243
> 
> 标签：haskell

请告诉我是什么问题？

```
data Stack' v = Stack' [v] Int deriving (Show)
...
类型 StackInt = Stack' Int

主 = 打印（StackInt [1,2,3] 4）

```

我得到的错误是

```
不在范围内：数据构造函数“Stackint”

```

怎么了？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-06T14:18:50.020

在我看来，您混淆了类型和构造函数的概念，这是一个常见问题，因为它们位于不同的命名空间中并且通常具有相同的名称。在 Haskell 表达式中

```
data SomeType = SomeType Int 
```

比如说，您实际上是在定义类型`SomeType`和*构造函数* `SomeType`。类型不是正常意义上的函数，但构造函数是。如果你向 ghci 询问 SomeType 的类型，你会得到：

```
:t SomeType
SomeType :: Int -> SomeType 
```

现在，`type`声明只是更长类型定义的简写，在您的情况下，`StackInt`它是`Stack' Int`. 但是为了构造这种类型的值，您仍然需要使用构造函数`Stack'`（它具有 type `[v] -> Int -> Stack' v`）。所以你的代码应该是

```
data Stack' v = Stack' [v] Int deriving (Show)

main = print(Stack' [1,2,3] 4) 
```

如果您想确定类型是，`Stack' Int`那么您可以添加一个函数

```
data Stack' v = Stack' [v] Int deriving (Show)

stackInt :: [Int] -> Int -> Stack' Int
stackInt list i = Stack' list i

main = print(stackInt [1,2,3] 4) 
```

编辑：不是我在`stackInt list i = Stack' list i`这里写的透明度，但你可以写得更优雅，就像`stackInt = Stack'`. 类型约束确保您在此处获得正确的类型。

如果需要，您还可以同时拥有新功能和类型同义词，即

```
data Stack' v = Stack' [v] Int deriving (Show)
type StackInt = Stack' Int

stackInt :: [Int] -> Int -> StackInt
stackInt list i = Stack' list i

main = print(stackInt [1,2,3] 4) 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-09-06T14:10:44.437

构造函数的名称是`Stack'`，不是`StackInt`。创建类型别名 using`type`不会为构造函数创建别名（这没有意义，因为该类型可能有许多构造函数，并且它们的名称根本不必与类型名称相关）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T14:14:12.423

没有调用数据构造函数`Stackint`。如您的声明`Stackint`所定义的是*类型*构造函数。`type`

 *数据构造函数是 , `Stack'`，`Stack'`尽管由于类型同义词，它会有 type`Int -> Stack' Int`而不是`a -> Stack' a`.*

# hash - 散列：插入已删除的插槽

> ID：12301932
> 
> 赞同：0
> 
> 时间：2012-09-06T14:05:31.307
> 
> 标签：hash

我是散列新手，这是我的问题：

您可以插入哈希表的 DELETED 槽吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:18:26.517

是的，您可以插入到已删除的插槽中。但...

首先你应该知道有软删除和硬删除。在软删除中，您只需翻转一个标志并将您的插槽标记为“已删除”，在硬删除中您清空插槽。

让我解释一下为什么我们需要软删除：例如，您正在使用带有线性探测的哈希表，并且您的哈希函数以某种方式将 3 个输入值映射到同一个插槽。通过使用线性探测，您可以通过在桌子上线性推进来放置这三个元素，直到找到一个空槽。在这种情况下，如果您使用硬删除进行删除，您将破坏哈希表，因为在尝试检索值时会有一个空槽，因此一个值将变得无法访问。

另一方面; 如果你有一个完美的散列函数，你可以使用硬删除。完美的散列函数将每个输入值唯一地映射到槽。所以不需要探测方案，硬删除不会破坏你的表。

现在回到您的问题，您还应该考虑并弄清楚如何避免重复插入。

# jvm - org.apache.commons.io.FileCleaningTracker 不会删除临时文件，除非显式调用 System.gc()？

> ID：12301934
> 
> 赞同：3
> 
> 时间：2012-09-06T14:05:32.773
> 
> 标签：jvm

我正在为我的网络应用程序开发上传图像功能，并且在 apache commons fileupload 的“FileCleaningTracker”中遇到了一个奇怪的问题。我有一个带有实例变量 FileCleaningTracker 的 ImageUploadService，然后我有一个创建 DiskFileItemFactory 实例然后引用 FileCleaningTracker 的上传方法，在上传方法成功完成后，我将 DiskFileItemFactory 的 FileCleaningTracker 设置为 null，所以我希望 DiskFileItemFactory进行垃圾收集，然后将通知 FileCleaningTracker 中 PhantomReference 的底层子类，因此删除 DiskFileItemFactory 创建的临时文件。

但这不会发生，直到我在上传方法结束时将 DiskFileItemFactory 清空并调用 System.gc() （仅清空 DiskFileItemFactory 没有帮助）。这对我来说似乎很奇怪。这是我的代码：

```
 @Override
    public void upload(final HttpServletRequest request) {

        ValidateUtils.checkNotNull(request, "upload request");

        final File tmp = new File(this.tempFolder);

        if (!tmp.exists()) {
            tmp.mkdir();
        }

        DiskFileItemFactory fileItemFactory = new DiskFileItemFactory(this.sizeThreshold, tmp);

        fileItemFactory.setFileCleaningTracker(this.fileCleaningTracker);

        ServletFileUpload uploadHandler = new ServletFileUpload(fileItemFactory);

        List items;
        try {
            items = uploadHandler.parseRequest(request);
        } catch (final FileUploadException e) {
            throw new ImageUploadServiceException("Error parsing the http servlet request for image upload.", e);
        }

        final Iterator it = items.iterator();
        while (it.hasNext()) {

            final DiskFileItem item = (DiskFileItem) it.next();
            if (item.isFormField()) {

                // log message
            } else {

                final String fileName = item.getName();

                final File destination = this.createFileForUpload(fileName, this.uploadFolder);

                FileChannel outChannel;
                try {
                    outChannel = new FileOutputStream(destination).getChannel();
                } catch (final FileNotFoundException e) {
                    throw new ImageUploadServiceException(e);
                }
                FileChannel inChannel = null;
                try {

                    inChannel = new FileInputStream(item.getStoreLocation()).getChannel();
                    outChannel.transferFrom(inChannel, 0, item.getSize());
                } catch (final IOException e) {
                    throw new ImageUploadServiceException(String.format("Error uploading image to '%s/%s'.", this.uploadFolder, destination.getName()), e);
                } finally {
                    IOUtils.closeChannel(inChannel);
                    IOUtils.closeChannel(outChannel);
                }

            }
        }
             fileItemFactory.setFileCleaningTracker(null);
} 
```

上面的代码导致每次上传都会在临时文件夹中创建一个文件，但最后不会被“fileCleaningTracker”删除，可能是因为 DiskFileItemFactory 实例没有被垃圾收集（我看不出为什么它不应该有）或者它已被 GCed 但未由 fileCleaningTracker 中的 PhantomReference 通知（PhantomReference 的可靠性如何？）

我等了10分钟，文件还在，应该不是GC没有运行的原因。并且没有例外。

现在，如果我添加以下代码，则每次上传后都会删除临时文件：

```
 fileItemFactory = null;
    System.gc(); 
```

这对我来说看起来很奇怪，因为我希望在没有显式调用 System.gc() 的情况下对 fileItemFactory 进行 GC。

任何输入将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T22:50:30.420

我也有同样的问题。即使服务器关闭，临时文件也永远不会删除：GC 进程尚未启动，因此`FileCleaningTracker`没有机会从中删除跟踪文件`ReferenceQueue`，所有文件都保留在硬盘上。

由于我的应用程序的特定行为，我必须在每次上传后进行清理（文件可能非常大）。而不是使用标准`org.apache.commons.io.FileCleaningTracker`，我很幸运能用我自己的实现覆盖这个类：

```
/**
 * Cleaning tracker to clean files after each upload with special method invocation.
 * Not thread safe and must be used with 1 factory = 1 thread policy.
 */
public class DeleteFilesOnEndUploadCleaningTracker extends FileCleaningTracker {

     private List<String> filesToDelete = new ArrayList();

     public void deleteTemporaryFiles() {
         for (String file : filesToDelete) {
             new File(file).delete();
         }
         filesToDelete.clear();
     }

     @Override
     public synchronized void exitWhenFinished() {
         deleteTemporaryFiles();
     }

     @Override
     public int getTrackCount() {
         return filesToDelete.size();
     }

     @Override
     public void track(File file, Object marker) {
         filesToDelete.add(file.getAbsolutePath());
     }

     @Override
     public void track(File file, Object marker, FileDeleteStrategy deleteStrategy) {
         filesToDelete.add(file.getAbsolutePath());
     }

     @Override
     public void track(String path, Object marker) {
         filesToDelete.add(path);
     }

     @Override
     public void track(String path, Object marker, FileDeleteStrategy deleteStrategy) {
         filesToDelete.add(path);
     }
 } 
```

如果这对您来说是正确的情况，只需将上述类的实例注入您的`DiskFileItemFactory`：

```
DeleteFilesOnEndUploadCleaningTracker tracker = new DeleteFilesOnEndUploadCleaningTracker();
fileItemFactory.setFileCleaningTracker(tracker); 
```

完成上传项目后，不要忘记调用清理方法：

```
tracker.deleteTemporaryFiles(); 
```

忘了提：我使用的是`commons-fileupload`1.2.2 和`commons-io`1.3.2 版本。

# codeigniter - 有没有办法在codeigniter中循环遍历uri段？

> ID：12301941
> 
> 赞同：0
> 
> 时间：2012-09-06T14:05:53.430
> 
> 标签：codeigniter

我想知道是否有一种方法可以遍历 URL 中的所有 uri 段......

/segment1/segment2/segment3/

是否可以使用 foreach 循环遍历这些内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T14:10:52.643

您可以通过以下方式专门引用段`$this->uri->segment(n)`或迭代段：

```
$segs = $this->uri->segment_array();

foreach ($segs as $segment) {
    echo $segment . '<br />';
} 
```

[http://ellislab.com/codeigniter/user_guide/libraries/uri.html](http://ellislab.com/codeigniter/user_guide/libraries/uri.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T14:11:03.173

```
$uri = $this->uri->uri_string(); 
```

你可以用`explode()`它来和平切割它并放入一个阵列中。然后使用`foreach`循环遍历数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T14:11:55.057

我不确定 foreach，但您应该能够在控制器中使用带有 $this->uri->segment($id) 的“for”。

# iphone - 相机库问题

> ID：12301944
> 
> 赞同：0
> 
> 时间：2012-09-06T14:06:05.510
> 
> 标签：iphone, camera, xcode4.3

> **可能重复：**
> [iphone 4.0 的 UIPopover](https://stackoverflow.com/questions/3192160/uipopover-for-iphone-4-0)

我在 Xcode 中有一个通用应用程序。如果用户使用的是 iPad，则使用库中的图像按钮效果很好。但是，如果他们使用 iPhone，则该按钮不起作用。

这是我收到的错误。

由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[UIPopoverController initWithContentViewController:] 未在 UIUserInterfaceIdiomPad 下运行时调用。”

请帮忙！

这是我的代码。

```
- (IBAction) useCameraRoll: (id)sender
{

if ([self.popoverController isPopoverVisible]) {
[self.popoverController dismissPopoverAnimated:YES];

} else {
if ([UIImagePickerController isSourceTypeAvailable:
     UIImagePickerControllerSourceTypeSavedPhotosAlbum])
{
    UIImagePickerController *imagePicker =
    [[UIImagePickerController alloc] init];
    imagePicker.delegate = self;
    imagePicker.sourceType =
    UIImagePickerControllerSourceTypePhotoLibrary;
    imagePicker.mediaTypes = [NSArray arrayWithObjects:
                              (NSString *) kUTTypeImage,
                              nil];
    imagePicker.allowsEditing = YES;

    newMedia = NO;
}
}
} 
```

我将如何合并以下代码？if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) { 在此处添加弹出框代码 } else { 在此处
添加弹出框的替代项}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T14:09:26.873

崩溃的原因是 UIPopoverController 仅适用于 iPad，在 iPhone 上运行时无法使用。所以你需要寻找替代品。

# asp.net - gridview 中的 asp.net 下拉列表

> ID：12301945
> 
> 赞同：1
> 
> 时间：2012-09-06T14:06:07.513
> 
> 标签：asp.net

我在一个带有gridview 的asp.net 网站上工作。

gridview 具有来自 sql 数据库的数据。

像：

```
Cuntry----Name
USA--------John
England----Frank 
```

...

数据像这样加载到gridview中：

```
SqlCommand cmd;
        cmd = new SqlCommand();
        cmd.Connection = sqlConn;
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.CommandText = "sp_loadData";
        sqlConn.Open();

        dr = cmd.ExecuteReader();

        DataTable dt = new DataTable();
        dt.Load(dr);
        GridView1.DataSource = dt;
        GridView1.DataBind(); 
```

所以，在名称列中，我想要一个下拉列表。我希望下拉列表具有所选数据库中的相应值。

我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T14:17:55.200

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="false" 
  OnRowDataBound="GridView1_RowDataBound">    
  <Columns>
  <asp:TemplateField HeaderText="Country">
    <ItemTemplate>
      <asp:DropDownList Width="50" runat="server" id="ddlCountry" AutoPostBack="true">
      </asp:DropDownList> 
    </ItemTemplate>
  </asp:TemplateField>
</asp:GridView> 
```

**在代码隐藏中**

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    //Checking whether the Row is Data Row
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        //Finding the Dropdown control.
        Control ctrl = e.Row.FindControl("ddlCountry");
        if (ctrl != null)
        {
            DropDownList dd = ctrl as DropDownList;
            //Here Bind with country list
            dd.DataSource = lst;
            //Put here the object properties name
            dd.DataValueField = "idCountry";
            dd.DataTextField = "nameCountry";
            dd.DataBind();
            //Here add the code to select the current user country in the list
            int idUserCountry = 10;
            dd.Items.FindByValue(idUserCountry).Selected = true;

        }
    }
} 
```

# osgi - 无法在 OSGi 中访问 javamail 中的类

> ID：12301959
> 
> 赞同：0
> 
> 时间：2012-09-06T14:06:33.817
> 
> 标签：osgi

我有一个 OSGi 包，我在其中使用 java 邮件 api 来添加邮件功能。

我面临的问题是，捆绑类加载器没有在加载本地或全局类时创建的类路径变量中添加 mail-1.4.jar 和 activation.jar 的条目。

我在清单的捆绑类路径中添加了 mail-1.4.jar 和 activation.jar，这些 jar 是简单的 jar（不是 OSGi 捆绑）。这些在我的包中的 lib 目录中。现在在加载 javax.mail.Address 类 ClassNotFoundException 时抛出。这是我使用命令行运行我的应用程序的时候。

当我在 Eclipse 中运行它时，它工作得很好。我使用Equinox作为我的容器。有什么建议么？

```
Manifest-Version: 1.0
Bundle-ManifestVersion: 2
Bundle-Name: Workexp
Bundle-SymbolicName: com.gslab.workexp
Bundle-Version: 1.0.0
Bundle-Activator: com.gslab.workexp.Activator
Bundle-Vendor: GSLAB
Bundle-RequiredExecutionEnvironment: JavaSE-1.6
Import-Package: org.osgi.framework
Bundle-ClassPath: .,
 lib/mysql-connector-java-5.1.20-bin.jar,
 lib/commons-beanutils-1.8.0.jar,
 lib/commons-collections-2.1.1.jar,
 lib/commons-digester-2.1.jar,
 lib/commons-javaflow-20060411.jar,
 lib/commons-logging-1.1.1.jar,
 lib/iText-2.1.7.jar,
 lib/jasperreports-4.6.0.jar,
 lib/jdt-compiler-3.1.1.jar,
 lib/log4j-1.2.9.jar,
 lib/mail-1.4.jar,
 lib/activation.jar 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T14:37:49.897

您对 bundle 类路径的使用是不寻常的。您应该使用 Import-Package（最佳实践）或 Require-Bundle 来获取依赖项。Bundle 类路径是说所有这些 jar 包都打包在你的 bundle 档案内的 lib 文件夹中。我怀疑情况并非如此，即使是这样，您也将完全绕过 Eclipse 为您提供的所有模块化。

尝试将“javax.mail”包添加到您的 Import-Package 标头。有关为何 Eclipse 不需要这样做的解释，请参阅 i/Why_does_Eclipse_find_javax.swing_but_not_Felix%3F。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-14T09:50:18.490

确保您已将 lib 文件夹包含在 bin.includes（清单编辑器中的构建选项卡）中，否则它们不会在最终的 jar 中导出。这是一个非常烦人的“错误”，它在 eclipse 中工作（因为文件可以在文件系统中访问）但构建器将忽略未包含的文件。

# module - 如何使用 safe_code/1 来确保代码是独立的且无害的？

> ID：12301960
> 
> 赞同：0
> 
> 时间：2012-09-06T14:06:33.860
> 
> 标签：module, prolog, sandbox

我想要一个完整的例子。

我尝试过类似的东西：

```
% swipl -s lib_safecode.pl
% library(swi_hooks) compiled into pce_swi_hooks 0.00 sec, 2,224 bytes
%  library(assoc) compiled into assoc 0.01 sec, 20,744 bytes
%   library(error) compiled into error 0.00 sec, 10,156 bytes
%   library(lists) compiled into lists 0.00 sec, 15,308 bytes
%  library(debug) compiled into prolog_debug 0.01 sec, 38,140 bytes
% /home/janus/Desktop/lib_safecode.pl compiled into safe_code 0.02 sec, 80,464 bytes

?- assert(tree(oak)).
true.

?- safe_code(tree(A)).
ERROR: toplevel: Undefined procedure: safe_code/1 (DWIM could not correct goal)
?- safe_code(tree(A)).
ERROR: toplevel: Undefined procedure: safe_code/1 (DWIM could not correct goal)
?- safe_code:safe_code(tree(A)).
ERROR: toplevel: Undefined procedure: safe_code:safe_code/1 (DWIM could not correct goal)
?- safe_code:safe(tree(A)).
ERROR: Undefined procedure: safe_code:safe/1
ERROR:     However, there are definitions for:
ERROR:         safe_code:safe/5
false.

?- safe_code:safe(tree(A),_,_,_,_).
ERROR: Out of global stack
?- use_module('lib_safecode.pl',[safe_code]).
ERROR: import/1: safe_code:safe_code/0 is not declared public (still imported)
true.

[trace]  ?- safe_code(tree(A)).
ERROR: toplevel: Undefined procedure: safe_code/1 (DWIM could not correct goal)
[trace]  ?- 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T14:48:48.200

使用似乎是`safe_goal(:Goal).`为了测试是否`:Goal`安全。

例如：

```
?- safe_goal(a == 1). 
```

会产生`true.`而

```
?- safe_goal(open(passwords.txt, read, Stream)). 
```

会产生`false.`

唯一导出的谓词是`safe_goal/1`你必须使用的这个，而不是`safe_code/1`.

# ios - 如何在继续之前更新应用程序

> ID：12301965
> 
> 赞同：0
> 
> 时间：2012-09-06T14:06:39.877
> 
> 标签：ios, storyboard

我正在编写一个处理广告和限时优惠的 noobie 应用程序，我如何检查我是否已将更新版本添加到应用程序商店并在更新之前停止工作？如果您有任何示例可以帮助菜鸟，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T14:32:52.730

我不能 100% 肯定地告诉你这一点，但我相信苹果公司不太可能批准这一点。您应该在开发之前查看审查指南，以确保您正在做的事情是允许的，但我真的不希望 Apple 批准一个只有在您拥有最新版本时才有效的应用程序。下面列出了可能的拒绝原因。

来自[App Store 审查指南](https://developer.apple.com/appstore/resources/approval/guidelines.html)：

*   2.9：“beta”、“demo”、“trial”或“test”版本的应用程序将被拒绝
*   2.13：主要是营销材料或广告的应用程序将被拒绝
*   2.22: 任意限制哪些用户可以使用应用程序的应用程序，例如位置或运营商，可能会被拒绝
*   11.9：包含“出租”内容或服务的应用程序将被拒绝在有限的时间后过期

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T14:18:18.070

您无法（轻松）查询应用故事，但您可以查询自己的网站。只需创建一个包含应用商店中活动的最新版本的静态文本文件，然后在应用启动时始终检查该文件。

# c# - 如何在 MS Access 表中获取最后插入的行标识

> ID：12301967
> 
> 赞同：1
> 
> 时间：2012-09-06T14:06:40.883
> 
> 标签：c#, ms-access-2003

我需要知道如何在 MS Access 表中获取最后插入行的标识

我正在这样做：

在最后的查询中我写了这个语句“选择@OutputId = SCOPE_IDENTITY（）”

在代码中我做了

```
OLEDBParameter param = new OLEDBParameter();
param.ParameterName = "@OutputId";
param.Value = 0;
param.Direction = ParameterDirection.Output; 
```

但我收到此错误：“System.Data.OleDb.OleDbDataAdapter 内部错误：无效的参数访问器：”

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T14:10:03.287

要针对连接选择最后一个自动编号，您可以使用@@Identity。

```
 SELECT @@identity 
```

# java - 仅在子类中使用的超类受保护字段是不好的做法吗？

> ID：12301974
> 
> 赞同：5
> 
> 时间：2012-09-06T14:07:07.263
> 
> 标签：java

我有一个像这样的超类，我希望很多类可以继承：

```
public abstract class Super {
    protected Object myField; //Not used anywhere in this class
    //a load more code here which does useful stuff
} 
```

所有这些类都需要使用`myField`. 但是超类没有。我是否在某个地方做出了错误的设计决定？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T14:09:03.263

不必要。如果所有子类出于*相同的原因*需要相同的字段，那么这与在基类中提供任何其他通用功能没有什么不同。随着类的增长，您可能会发现添加了使用该字段的通用功能（例如，在 equals/hashCode 方法中引用它）。

现在，如果该字段的类型是 Object 并且每个子类都将一些完全不同的东西塞入其中，我会认为这是代码异味。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-06T14:14:30.753

恕我直言，如果该类没有真正使用该字段，则该字段不应出现在该类中。在我看来，你真正想要的是有一个基类来告诉它的子类“你应该都有某种方式来保持 X 的状态，但我（基类）不会修改那个 X 状态，在这种情况下你应该创建一个抽象方法来传达该消息，如下所示：

```
public abstract class Super {
    protected abstract Object getMyField();
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-06T14:12:06.167

用这种模糊的描述很难说，但看起来你可以做一些概括并将一些通用代码推到你的超类中。如果您的子类与该字段做类似的事情，那么可以找到一些共性（使用模板方法或策略来处理特定于子类的差异），否则如果每个子类都在做不同的事情，那么使用公共字段有什么意义呢？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-06T14:09:40.883

不，我不这么认为。抽象类服务于该目的（在基类中具有通用功能，并让子类仅实现特定的必需功能）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-06T14:15:20.767

所以，如果你不在课堂上使用那个字段`Super`——你为什么需要它呢？

也许您的超类会提供一个接口以通用方式与该字段进行交互，例如：

```
public abstract class Super<T> {
    protected T myField; 

    public T getField() {
        return myField;
    }
}

public class Child extends Super<String> {
    public Child( String label ) {
        super.myField = label;
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-06T15:02:05.157

只是在一个更轻的音符`The only thing common in your hirarchy is one field then you should get rid of abstract class and Create one Marker Interface.`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-06T14:13:30.083

如[本教程所述](http://java.sun.com/developer/onlineTraining/Programming/BasicJava2/oo.html)

> *类本身、其子类和同一包中的类可以访问受保护的字段或方法。*

这意味着受保护区域的设计精确地具有这些特性。

# java - WebLogic 10 中的临时目录

> ID：12301976
> 
> 赞同：6
> 
> 时间：2012-09-06T14:07:10.353
> 
> 标签：java, weblogic, weblogic-10.x

每当 WL 停止时，它都不会删除其临时目录 .. 即

`domains/mydomain/servers/myserver/tmp/_WL_TEMP_APP_DOWNLOADS`

`/domains/mydomain/servers/myserver/tmp/_WL_user/ /domains/mydomain/servers/myserver/stage`

因此，当我们部署新应用程序时，它不会部署一些 JSP 或一些类，而是保留这些文件的旧版本。导致大量业务错误+运行时错误。

这是一个已知问题吗？我们该如何应对？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T10:51:57.357

一般来说，WL 会缓存您的部署，除非被要求，否则不会重新部署。但这取决于您如何部署应用程序以及服务器是处于生产模式还是开发模式。请参阅[开发部署](http://docs.oracle.com/cd/E24329_01/web.1211/e24443/autodeploy.htm#g1035158) 和[生产部署](http://docs.oracle.com/cd/E24329_01/web.1211/e24443/redeploy.htm#i1032371)。

一个简单的解决方法，转到**/domains/mydomain/servers/myserver/**目录并删除：

*   **时间**
*   **缓存**
*   **日志**

并离开**数据**和**安全**目录。然后重新启动。这将迫使 WL 重新部署。

我最初的答案包括删除**数据**目录，但正如@g-demecki 和@j23 在下面指出的那样，这可能会弄乱管理服务器。我相信删除托管服务器上的**数据目录是可以的。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T03:21:22.010

我从未在生产模式下遇到过此类问题，如果您在开发模式下运行并使用自动部署，请遵循记录的最佳实践

> 每当您希望触发重新部署自动部署的应用程序时，都必须触摸 REDEPLOY 文件（更改其时间戳）。即使您在服务器关闭时修改应用程序，您也必须触摸 REDEPLOY 以确保在服务器下次启动时应用更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-11T08:52:22.920

重新部署应该更新 tmp - 也许您的时间戳不正确？停止和启动不会刷新 tmp，因为它在重新启动后仍然使用。

根据我的经验，当服务器关闭时删除 tmp 以强制解压缩 WAR 就足够了（这是通过 Weblogic 将 WAR 解压缩到 tmp 的问题，这是部署期间完成的主要任务）。例如在你的情况下

```
/domains/mydomain/servers/myserver/tmp/ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-11T05:42:10.263

就我而言，Linux 机器的简单重启解决了这个问题。

# java - 让 Ant 的 Java 任务打印空行

> ID：12301977
> 
> 赞同：4
> 
> 时间：2012-09-06T14:07:10.263
> 
> 标签：java, ant

通过[java Ant 任务](http://ant.apache.org/manual/Tasks/java.html)运行 Java 应用程序时，不会打印空行。这使得扫描长输出文件变得更加困难，因为所有分离都被删除了。

有人知道如何让蚂蚁打印空行吗？

谢谢

**例子：**

通过ant运行以下java代码：

```
System.out.println("Hello");
System.out.println("");
System.out.println("World"); 
```

我希望蚂蚁生产：

```
[java] Hello
[java]  
[java] World 
```

但输出是

```
[java] Hello
[java] World 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T22:35:30.903

我在 Ubuntu Linux 12.04 和 Windows 7 上使用 Ant 1.8.2 测试了以下代码。在两个操作系统上都打印了空行，如下面的输出所示。

## JavaTest.java

```
/**
 * Java test.
 */
public class JavaTest {

  public static void main(String[] args) {
    System.out.println("Hello");
    System.out.println("");
    System.out.println("World");
  }
} 
```

## 在 build.xml 里面

```
<target name="java-test" depends="compile">
  <java classpath="${classes.dir}" classname="JavaTest"
      fork="true" failonerror="true" />
</target> 
```

## 输出

```
$ ant java-test 
Buildfile: /home/my/project/build.xml

java-test:
     [java] Hello
     [java] 
     [java] World

BUILD SUCCESSFUL
Total time: 2 seconds 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-11T10:49:56.297

无需编译特殊类的另一种方法 - 使用脚本，例如

```
 `<script language="groovy">
       println("Hello\n\nWorld!")
</script>` 
```

# jquery - 对 enumdropdownlistfor 的 jquery 验证

> ID：12301981
> 
> 赞同：0
> 
> 时间：2012-09-06T14:07:26.333
> 
> 标签：jquery, asp.net, asp.net-mvc-3, razor, jquery-validate

我有这个代码

剃须刀页面：

```
 <div class="editor-label">
              @Html.LabelFor(model => model.Citizenship)
            </div>
            <div class="editor-field">
              @Html.EnumDropDownListFor(model => model.Citizenship)
              @Html.ValidationMessageFor(model => model.Citizenship)
            </div> 
```

模型：

```
[DisplayName("Гражданство")]
[Required(ErrorMessageResourceType = typeof(Resources), ErrorMessageResourceName = "Required")]
public CitizenshipEnum? Citizenship { get; set; } 
```

最后我得到了这个 HTML：

```
<select data-val="true" data-val-required="Пожалуйста, укажите значение" id="Citizenship" name="Citizenship"><option value=""></option>
<option value="RF">Российская Федерация</option>
<option value="other">другое государство</option>
</select> 
```

对此进行验证有什么问题？unobtrusive.js 和其他必需的脚本肯定已加载（其他输入验证正常工作）

我正在尝试通过添加自定义规则来解决这个问题

像这样，但它不起作用：

```
$(function () {
  $.validator.addMethod('selectNone', function (value, element) { debugger; return $(element).val(); }, "Please select an option");

  $("form").validate({
    rules: {
      '#Citizenship': {
        selectNone: true
      }
    }
  });
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-11-26T14:43:43.037

我现在有同样的问题。如果没有从下拉列表中选择任何项目，枚举将获得 0 值，对于 jquery 验证器，它可能是一个正确的值，因此它通过了验证。

因此，我为我的枚举类型添加了范围验证属性：

```
[Range(1, int.MaxValue)]
[EnumDataType(typeof(Priority))]
public Priority Priority { get; set; } 
```

之后，jquery 验证按我的意愿工作。

注意：通过添加 [EnumDataType] 属性，如果没有选择任何项，则 ModelState 在控制器中将无效，因此您可以使用它在控制器中进行验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T17:47:17.813

在控制器中：

```
 [HttpPost]
    [Authorize]
    public ActionResult Edit ( ClassOfModel model )
    {
        if ( ModelState.IsValid )
        {
            if ( model.Citizenship == null )
            {
                ModelState.AddModelError( "Citizenship", "Пожалуйста, укажите значение" );
            }
            // Do something (e.g. save data)
        }
        return View( model );
    } 
```

# jsf - JSF 有条件地渲染页脚（jsf facet）

> ID：12301987
> 
> 赞同：4
> 
> 时间：2012-09-06T14:07:56.233
> 
> 标签：jsf, datatable, render, myfaces, facet

如果数据表内容为空，我想呈现一个页脚（具有特定内容）。

我发现这个[如何有条件地渲染 <f:facet>？](https://stackoverflow.com/questions/4369114/how-do-i-conditionally-render-an-ffacet)但这并不能真正解决我的问题，因为如果消息不为空，它只会呈现页脚。

```
 <f:facet name="footer">
      <h:outputText value="List is empty" rendered="#{empty list}" />
 </f:facet> 
```

如果列表为空，这确实有效，但如果它不是空的，这会将一个空行呈现为页脚......

还有其他解决方法吗？谢谢您的帮助！我正在使用 MyFaces 2.0.13。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T23:52:12.767

据我所知，在 JSF 1.2 中没有简单的方法可以做到这一点。

但是您可以使用此解决方法：

使用以下命令创建一个 CSS 类`display: none`：

```
.hidden { display: none; } 
```

在您的 dataTable 中，`footerClass`按如下方式指定属性：

```
<h:dataTable footerClass="#{hideFooterCondition ? 'hidden' : ''}"> 
```

这样，您就可以轻松地将页脚隐藏起来。

此外，如果您想在页脚不存在的情况下减少发送到浏览器的数据，您可以在`rendered`facet 的内容属性中使用相同的条件：

```
<f:facet name="footer">
    <rich:datascroller for="myDataTable" rendered="#{not hideFooterCondition}" />
</f:facet> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-06T15:08:27.920

您可以使用 hpanel 而不是 facet 来控制它。我在我处理的一些 JSF 应用程序中大量使用了这种技术。根据我的阅读，在视图中使用条件在 JSF 中被认为是不好的做法。HTML：

```
<h:panelGroup rendered="#{isEmpty}">
  <h:outputText value="List is empty" />
</h:panelGroup> 
```

支持豆：

```
boolean isEmpty = false;
if (list.isEmpty()) {
  isEmpty = true;
} 
```

# php - 任何用 PHP 为 CodeIgniter 2.0 框架（如 BackendPro）编写的开发人员控制面板？

> ID：12301988
> 
> 赞同：0
> 
> 时间：2012-09-06T14:07:57.873
> 
> 标签：php, codeigniter

我已经安装了 Codeigniter 2.1.0，我正在寻找 Admin Panel PHP 开源。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T06:23:36.777

试试[backendpro](http://www.kaydoo.co.uk/projects/backendpro)。它提供了从控制面板开始的必需功能，如访问控制、组等。您也可以尝试[CI-Backend](http://code.google.com/p/ci-backend/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T21:51:21.290

我已经在 CodeIgniter 驱动的站点中实现了几次

RevAxArts WhiteLabel 管理主题。

[http://revaxarts-themes.com/?t=whitelabel](http://revaxarts-themes.com/?t=whitelabel)

您可以使用它快速构建一个干净的后端管理框架，其中包含登录对话框、ajaxified 表单、图表和动态小部件。

到目前为止，我遇到的唯一问题是，如果您使用 mod_rewrite 获取 index.php，通过 WhiteLabel 发布的表单不是那么成功？在 CodeIgniter 的路径之外。

# knockout.js - 淘汰赛清理数字

> ID：12301991
> 
> 赞同：1
> 
> 时间：2012-09-06T14:08:01.290
> 
> 标签：knockout.js, knockout-mapping-plugin, knockout-2.0, knockout-validation

我正在使用敲除和映射插件来自动创建我的视图模型。我的视图模型中有很多数量绑定到文本框。当用户在文本框中更改金额时，我只想确保他们输入的是一个数字，并且它大于 0，如果不是，我想用 0 替换他们输入的内容。这看起来像它应该很简单......带有自定义绑定或订阅功能。

我正在阅读的关于淘汰赛验证的所有内容都在谈论扩展器和读/写计算的 observables，或者添加另一个插件（例如 jquery 验证）。对于这种情况，它们似乎都过大了，并且必须为您要验证的每个可观察对象显式声明扩展器/计算可观察对象。我有很多使用映射插件自动创建的金额，所以这似乎不合理。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T15:31:27.193

对于您的特定场景，处理此问题的一种方法是创建一个能够拦截值并进行验证的自定义绑定。这可以通过在要绑定的自定义绑定中创建一个可写计算来完成。优点是您不必担心映射插件自定义您的对象创建。

它可能看起来像：

```
ko.bindingHandlers.positiveNumericValue = {
    init : function(element, valueAccessor, allBindingsAccessor) {
        var underlyingObservable = valueAccessor();
        var interceptor = ko.computed({
            read: underlyingObservable,
            write: function(newValue) {
                var current = underlyingObservable(),
                    valueToWrite = isNaN(newValue) ? 0 : parseFloat(+newValue);

                if (valueToWrite < 0) {
                   valueToWrite = 0;   
                }

                //only write if it changed
                if (valueToWrite !== current) {
                    underlyingObservable(valueToWrite);
                } else {
                    //if the rounded value is the same as it was, but a different value was written, force a notification so the current field is updated to the rounded value
                    if (newValue !== current) {
                        underlyingObservable.valueHasMutated();
                    }
                }   
            } 
        });
        ko.bindingHandlers.value.init(element, function() { return interceptor }, allBindingsAccessor);
    },  
    update : ko.bindingHandlers.value.update
}; 
```

这是一个示例：http: [//jsfiddle.net/rniemeyer/2TnSM/](http://jsfiddle.net/rniemeyer/2TnSM/)

另一种方法是使用一个选项来扩展 observables 以创建可写计算。

对于您的方案，它可能如下所示：

```
ko.observable.fn.forcePositive = function() {
    var underlyingObservable = this;
    if (!this.forcePositiveInterceptor) {
         this.forcePositiveInterceptor = ko.computed({
            read: this,
            write: function(newValue) {
                var current = underlyingObservable(),
                    valueToWrite = isNaN(newValue) ? 0 : parseFloat(+newValue);

                if (valueToWrite < 0) {
                   valueToWrite = 0;   
                }

                //only write if it changed
                if (valueToWrite !== current) {
                    underlyingObservable(valueToWrite);
                } else {
                    //if the rounded value is the same as it was, but a different value was written, force a notification so the current field is updated to the rounded value
                    if (newValue !== current) {
                        underlyingObservable.valueHasMutated();
                    }
                }   
            } 
        });
    }            

    return this.forcePositiveInterceptor;        
}; 
```

然后你会像这样绑定它：

```
<input type="text" name="age" data-bind="value: age.forcePositive()" /> 
```

我在这里实现它的方式，您需要调用它作为一个函数`forcePositive()`，以便初始化可写对象。这样您就可以使用映射插件而无需任何自定义，只需在您想要使用此功能的任何可观察对象上执行此操作。

示例：http: [//jsfiddle.net/rniemeyer/Dy4MH/](http://jsfiddle.net/rniemeyer/Dy4MH/)

我认为这两种选择都适合您的情况。我可能更喜欢第二种选择，这样您就可以在使用普通绑定时添加更多这些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T15:38:47.263

一个又快又小的

[http://jsfiddle.net/gxfup/1/](http://jsfiddle.net/gxfup/1/)

编辑：

我不喜欢让映射插件定义我的视图模型，我使用原型视图模型（就像上面的示例一样，然后让映射器插件映射到它上面）。

```
ViewModel = function (data) {
    this.number = ko.observable().extend({ number: true });
    return ko.mapping.fromJS(data, {}, this);
}; 
```

# javascript - 将变量值从一个 javascript 传递到另一个

> ID：12301992
> 
> 赞同：0
> 
> 时间：2012-09-06T14:08:01.537
> 
> 标签：javascript, .net

我`EXAMPLE1.Master`为我的 .net Web 应用程序创建了母版页。他们的我将值存储在 JavaScript 变量中。我想在另一个 JS 文件中检索该变量。

示例1.大师：-

```
<script language="javascript" type="text/javascript">
        $(document).ready(function() {
            var pageAccess = '<%=Session["UserAccess"]%>';
            masterPageLoad();
        });
</script>

<script language="javascript" type="text/javascript" src="JS/pageActions.js">
</script> 
```

pageAction.js

```
//Retrieve pageAccess variable here. 
```

的定义`masterPageLoad();`存在于 pageAction.js 文件中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T14:12:13.093

声明你的`pageAccess`变量，之前`$(document).ready(function() {`

喜欢

```
var pageAccess = '<%=Session["UserAccess"]%>';
$(document).ready(function() {
   masterPageLoad();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T14:12:17.543

将变量声明移到函数外

```
var pageAccess = '<%=Session["UserAccess"]%>';
$(document).ready(function() {
        masterPageLoad();
}); 
```

这个变量现在应该在任何 JS 文件中都可见。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T14:13:22.830

如果你能做这样的事情会更好：

```
$(document).ready(function() {
    masterPageLoad('<%=Session["UserAccess"]%>');
}); 
```

然后相应地更新您的 pageActions.js：

```
function masterPageLoad(pageAccess) {
    ...
} 
```

但是，如果您需要使用外部变量，它当前不起作用的原因是它是在 DOMReady 处理程序的范围内定义的。您应该将变量声明提取到 DOMReady 处理程序之外，或者您应该创建一个全局变量：

```
window.pageAccess = '<%=Session["UserAccess"]%>'; 
```

# xpages - 服务器端验证 - 计算 viewScope 所需的参数

> ID：12301995
> 
> 赞同：2
> 
> 时间：2012-09-06T14:08:08.307
> 
> 标签：xpages

我遇到了一些服务器端验证的问题，我不知道这是否是 XPages 中的预期行为，或者我是否在这里遗漏了一些简单的东西。

我有一个具有计算验证公式的字段 - 基本上，在设置 viewScope 变量时它成为必需的。

我的提交按钮设置 viewScope 并进行完全刷新。

我希望提交表单，对验证公式进行评估，如果失败，将显示验证失败。但是当我点击我的提交按钮时，表单提交没有错误。如果我再次单击它，验证将按预期失败。

为了说明我的问题，我创建了一个简单的示例：

```
<xp:inputText id="inputText1" required="#{javascript:viewScope.validate}">
    <xp:this.validators>
        <xp:validateRequired message="This field is required."></xp:validateRequired>
    </xp:this.validators>
</xp:inputText>
&#160;
<xp:button value="Submit" id="button1">
    <xp:eventHandler event="onclick" submit="true"
        refreshMode="complete" immediate="false" save="true">
        <xp:this.action><![CDATA[#{javascript:viewScope.validate=true;}]]></xp:this.action>

        <xp:this.script><![CDATA[dojo.attr(dojo.byId("#{id:inputText1}"),"aria-required","true")]]></xp:this.script>
    </xp:eventHandler>
</xp:button>
<xp:br></xp:br>
<xp:message id="message1" for="inputText1"></xp:message> 
```

如您所见，我还尝试在按钮中添加带有 csjs 的 aria-required 属性，希望它能启动验证。

如果验证按预期工作，是否有任何建议让这样的动态验证正常运行？我知道我可以在数据源上使用 querySave 做一些事情（为简单起见，我从示例中排除了数据源），但希望有比这更简单的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T21:16:13.410

看起来问题在于对生命周期的误解。您正在指定 viewScope 变量中是否需要该字段。首次加载页面时，viewScope 为 false，因此该字段不是必需的。提交后，viewScope 变量被设置，页面再次呈现。只是现在该字段成为必填字段，但仅在下次提交表单时才需要。

如果您希望该字段是必需的，则需要在提交表单*之前将 required 属性评估为 true 并传递给浏览器。*

您尝试管理的功能有许多替代方案，运行 SSJS 并在满足某些条件时失败。

一种是使用验证器属性而不是计算所需属性。验证器允许您运行代码，但您需要使用 this.getSubmittedValue() 来检查字段的值 - 验证器在将提交的值传递给 value 属性之前在生命周期的早期运行。

第二个选项是将验证放在提交按钮中。您可以使用 facesContext.addMessage()。如果你 google xpages facesContext addMessage 有很多例子说明如何做到这一点。然后执行“return false”以中止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T05:35:08.973

看起来您可能需要条件验证。不久前，我写了一篇关于此的博文：

[使验证行为正常](http://dontpanic82.blogspot.no/2010/03/xpages-making-validation-behave.html)

# r - 将我的数据集指定为工作数据集

> ID：12301999
> 
> 赞同：2
> 
> 时间：2012-09-06T13:56:20.880
> 
> 标签：r, dataset

我是R的新手。

我可以成功地将我的数据集加载到 R-Studio 中，并且可以在工作区中看到我的数据集。当我运行命令`summary(mydataset)`时，我得到了所有变量的预期摘要。

但是，当我跑步时

```
data(mydataset) 
```

我收到以下警告消息：

```
In data(mydataset) : data set ‘mydataset’ not found 
```

我需要按照`data()`命令中的建议运行该命令，该`fitLogRegModel()`命令是[PredictABEL](http://cran.r-project.org/web/packages/PredictABEL/index.html)包的一部分。

有人对我如何指定`mydataset`为工作数据集有提示吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T15:04:04.803

您不需要使用该`data`命令。您可以将数据传递给函数

```
riskmodel <- fitLogRegModel(data=mydataset, cOutcome=2, 
     cNonGenPreds=3:10, cNonGenPredsCat=6:8, 
     cGenPreds=c(11, 13:16), cGenPredsCat=0) 
```

该示例使用`data(ExampleData)`它可以使包中的数据对您可用。由于您已经拥有数据，因此无需加载它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T15:33:51.310

一个替代方案，虽然它有它的缺点，是使用`attach(mydataset)`. 然后，您可以引用不带`mydatdataset$`前缀的变量。据我所知（尽管我欢迎更多专家 R 用户的意见），主要缺点是如果您在附加后修改变量，则它不是数据集的一部分。这可能会导致混乱并导致“陷阱”。无论如何，许多 R 专家用户反对使用`attach`.