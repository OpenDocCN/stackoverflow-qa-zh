# StackOverflow 问答 12398000-12398999

# c# - 使用 HttpWebRequest 访问 Active Directory 联合服务后面的链接

> ID：12398002
> 
> 赞同：0
> 
> 时间：2012-09-13T00:51:10.953
> 
> 标签：c#, httpwebrequest, ntlm

我有一个使用 Active Directory 联合身份验证服务对用户进行身份验证的网站。我想在代码中使用 HttpWebRequest 类访问站点的 URL。但是当我尝试这样做时，我收到了 401 错误。经过一番研究，我发现它使用 NTLM 身份验证。我试过[这个解决方案](https://stackoverflow.com/questions/1520703/sending-http-headers-with-http-web-request-for-ntlm-authentication)。但我看到我得到的响应是一个带有一些隐藏字段的 HTML 页面，它有一个 javascript 来提交加载页面。操作 URL 将是我的域的 URL。我尝试手动将 HTML 文本作为表单提交，但我再次得到相同的响应。不太确定如何访问该页面。有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:38:16.930

在过去的几天里，我一直在处理这样的问题。在尝试了很多事情之后，我最终采用了以下方法：

1.  创建一个 System.Net.CookieContainer 对象并将其传递给每个 httpwebrequest 的 CookieContainer。
2.  手动解析表单元素并将它们作为 RequestStream 传递给表单的目标。这必须在 httpwebrequest 上作为 POST 而不是 GET 来完成。
3.  对于任何连续请求，请确保附加相同的 CookieContainer。您的经过身份验证的 ADFS cookie 存储在此处。没有它们，您将陷入无限循环。

问候

# matlab - 在Matlab中将稀疏矩阵行归一化为零均值

> ID：12398003
> 
> 赞同：2
> 
> 时间：2012-09-13T00:51:25.530
> 
> 标签：matlab, sparse-matrix, normalize, bsxfun

我有一个大的 m *n 稀疏矩阵 Y。我想对 Y 的每一行进行归一化，以便每一行的均值为零。

我第一次尝试这个。但是每行的平均值也会从零条目中减去，这不是我想要的。

```
Ynorm = bsxfun(@minus, Y, Ymean); 
```

然后我尝试了这个。

```
[m, n] = size(Y);
nonZeroNum = nnz(Y); 
Ynorm = spalloc(m,n,nonZeroNum); 
for i = 1:m
    Ynorm(i, :) = spfun(@(x)(x - Ymean(i)), Y(i, :));
end 
```

但是，这种非矢量化解决方案太慢了。

我也想过将 bsxfun 和 spfun 结合起来，但没有成功。

有人有矢量化解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T01:24:43.900

十分简单。

一个随机稀疏矩阵。

```
A = sprand(100,100,.05); 
```

获取行均值。如果一行中没有非零元素，我们将期望 0/0 = NaN，但下一步将永远不会触及该行。

```
rowmeans = sum(A,2)./sum(A~=0,2); 
```

提取非零。

```
[i,j.a] = find(A); 
```

并恢复数组，均值相减。

```
[n,m] = size(A);
B = sparse(i,j,a - rowmeans(i),n,m); 
```

现在，测试一下。不要忘记浮点运算在这里适用，因此行均值不会完全为零，仅在 eps 的数量级上。

```
min(mean(B,2))
ans =
   (1,1)     -1.5543e-17

max(mean(B,2))
ans =
   (1,1)      1.1657e-17 
```

似乎是正确的，并且完全矢量化。为了让你相信结果确实是稀疏的并且零元素没有被破坏，这里是 spy.spy 的结果。

```
spy(B) 
```

![间谍图.jpg](../Images/34e9eb77139bd7f09b9548b103506f00.png)

# ruby - 使用 Ruby 和正则表达式单独选择多个字符串

> ID：12398008
> 
> 赞同：0
> 
> 时间：2012-09-13T00:52:21.400
> 
> 标签：ruby, regex

我有一串看起来像这样的数据，它在一行上。

```
<record xmlns:f="http://abc.com/">
<f:Table><f:Row><f:Cell>#1</f:Cell></f:Row><f:Row><f:Cell>Data 222</f:Cell></f:Row><f:Row>           <f:Cell>Version: v3</f:Cell></f:Row><f:Row><f:Cell>Serial Number: 000000000</f:Cell></f:Row> <f:Row><f:Cell>Signature: 123</f:Cell></f:Row><f:Row><f:Cell>Issuer:</f:Cell></f:Row><f:Row> <f:Cell>C=EE,</f:Cell></f:Row><f:Row><f:Cell>ST=ABC,</f:Cell></f:Row><f:Row><f:Cell>L=avavv,</f:Cell></f:Row><f:Row><f:Cell><f:HexDump><f:Line seq=""0x0000"" hex=""09 09 4f 3d 5a 65 72 6f 54 75 72 6e 61 72 6f 75"">..O=ABC</f:Line><f:Line seq=""0x0010"" hex=""6e 64 20 4f c3 9c 2c"">nd OÇ.,</f:Line></f:HexDump></f:Cell></f:Row><f:Row><f:Cell>OU=abc,</f:Cell></f:Row><f:Row><f:Cell>CN=trtrtrtr,</f:Cell></f:Row><f:Row><f:Cell>E=null,</f:Cell></f:Row><f:Row><f:Cell>Create: 03/03/2010 14:58</f:Cell></f:Row><f:Row><f:Cell>Expire: 04/02/2010 14:58</f:Cell></f:Row><f:Row><f:Cell>Subject:</f:Cell></f:Row><f:Row><f:Cell>C=EE,</f:Cell></f:Row><f:Row><f:Cell>ST=SS,</f:Cell></f:Row><f:Row><f:Cell>L=Tartu,</f:Cell></f:Row><f:Row><f:Cell><f:HexDump><f:Line seq=""0x0000"" hex=""09 09 4f 3d 5a 65 72 6f 54 75 72 6e 61 72 6f 75"">..O=ZeroTurnarou</f:Line><f:Line seq=""0x0010"" hex=""6e 64 20 4f c3 9c 2c"">nd OÇ.,</f:Line></f:HexDump></f:Cell></f:Row><f:Row><f:Cell>OU=KKK,</f:Cell></f:Row></f:Table> 
```

我的 Ruby 正则表达式如下所示：

```
<f:HexDump>[\s\S]*,<\/f:Line><\/f:HexDump> 
```

因此，我试图删除`<f:HexDump>`和`<f:/HexDump>`标签之间的所有内容（包括标签），但将内容保留在两者之间。

问题是我的正则表达式正在选择直到第二个`<f:/HexDump>`标签之间的所有内容。

```
<f:HexDump><f:Line seq=""0x0000"" hex=""09 09 4f 3d 5a 65 72 6f 54 75 72 6e 61 72 6f 75"">..O=ABC</f:Line><f:Line seq=""0x0010"" hex=""6e 64 20 4f c3 9c 2c"">nd OÇ.,</f:Line></f:HexDump></f:Cell></f:Row><f:Row><f:Cell>OU=abc,</f:Cell></f:Row><f:Row><f:Cell>CN=trtrtrtr,</f:Cell></f:Row><f:Row><f:Cell>E=null,</f:Cell></f:Row><f:Row><f:Cell>Create: 03/03/2010 14:58</f:Cell></f:Row><f:Row><f:Cell>Expire: 04/02/2010 14:58</f:Cell></f:Row><f:Row><f:Cell>Subject:</f:Cell></f:Row><f:Row><f:Cell>C=EE,</f:Cell></f:Row><f:Row><f:Cell>ST=SS,</f:Cell></f:Row><f:Row><f:Cell>L=Tartu,</f:Cell></f:Row><f:Row><f:Cell><f:HexDump><f:Line seq=""0x0000"" hex=""09 09 4f 3d 5a 65 72 6f 54 75 72 6e 61 72 6f 75"">..O=ZeroTurnarou</f:Line><f:Line seq=""0x0010"" hex=""6e 64 20 4f c3 9c 2c"">nd OÇ.,</f:Line></f:HexDump> 
```

这可以使用 Ruby 正则表达式来完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T03:22:10.143

您可以使用正则表达式：

```
/<f:HexDump>.*?<\/f:HexDump>/ 
```

这里的关键是通过使用`?`.

假设您的字符串存储在 str 中，您可以摆脱所有 HexDump 标记：

```
str.gsub(/<f:HexDump>.*?<\/f:HexDump>/, '') 
```

请注意，如果标签之间可以有回车，您可能希望为正则表达式启用多行模式（将 m 添加到末尾）。

# java - 在 gridview 中显示来自 ArraList 的值并更改文本大小

> ID：12398015
> 
> 赞同：0
> 
> 时间：2012-09-13T00:53:08.430
> 
> 标签：java, android, gridview, adapter

我正在展示来自 a`ArrayList<String>`中的一些项目，`GridView`但文本大小太大！

我设置gridview的代码如下：

```
GridView selectedItemView = (GridView) findViewById(R.id.selected_items_view);
ArrayAdapter<String> adapter= new ArrayAdapter<String>(v.getContext(), android.R.layout.simple_list_item_1, selected_Items);
selectedItemView.setAdapter(adapter); 
```

现在我想更改`GridView`. 我怎么能做到这一点，`Adapter`因为没有办法在 XML 中做到这一点。我是一个相当新的android。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T01:21:54.757

您在这里想要的似乎不是 GridView。如果您尝试制作包含文本的网格项目，这似乎是一个糟糕的设计决策，或者只是一个糟糕的视图选择。

`android.R.layout.simple_list_item_1`用于列表视图，只是一个纯文本视图。很明显这不是你想要的，为什么要使用它呢？

如果您坚持使用一个，请创建您自己的布局并将其传递给您的 gridview。

使用`android:textSize`属性来改变你的文字大小。

# php - 如何在PHP中每隔一个div交替背景颜色

> ID：12398017
> 
> 赞同：0
> 
> 时间：2012-09-13T00:53:36.100
> 
> 标签：php

我目前正在创建一个带有博客平台的网站，我希望主页上的所有其他帖子容器都可以交替颜色。像浅蓝色，然后是深蓝色、浅蓝色、深蓝色、浅蓝色等。我正在使用 while 循环从 mysql 数据库中获取 5 个帖子。这是我的代码。

```
<?php
$sql = mysql_query("SELECT * FROM posts ORDER BY id DESC LIMIT 6");
$array = mysql_fetch_array($sql);
while ($array = mysql_fetch_array($sql)) {

//The php below this is the problem

$counter = 0;
$counter++;

$postcolour =  WHAT DO I PUT HERE ? 'lightblue' : 'darkblue';

?>

<div class="postcontainer" style="background-color: <?php echo $postcolour; ?>;">
</div> <?php } ?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T00:55:01.550

只需使用[模数](http://php.net/manual/en/language.operators.arithmetic.php)二：

```
$postcolour = $counter % 2 ? 'lightblue' : 'darkblue'; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-13T00:59:54.493

我只是使用CSS：

```
.postcontainer {
    background-color: lightblue;
}

.postcontainer:nth-of-type(even) {
    background-color: darkblue;
} 
```

[这是一个演示！](http://dabblet.com/gist/3711119)

# objective-c - 目标 C - 无法解决 @property/@synthesize setter 和 getter？

> ID：12398022
> 
> 赞同：1
> 
> 时间：2012-09-13T00:54:45.717
> 
> 标签：objective-c, ios

我知道这是一个新手问题，但我无法解决这个问题（或者真的，我无法让它工作）

所以我在我的.h

```
@interface
NSString *test;
@end;

@property NSString *test 
```

在我的.m

```
...
@synthesize test;
... 
```

但我想要一个用于测试的自定义设置器 - 正确的语法是什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T01:03:22.160

`test`首先，如果您打算声明变量，则无需声明`@synthesize`，但如果这样做，则需要将其放在花括号中。

其次，属性的声明需要在接口内部：

```
@interface {
    NSString *test;
}
@property (readwrite) NSString *test
@end; 
```

最后，setter 的语法是

```
-(void)setTest:(NSString*)test {
    ...
} 
```

如果您也选择覆盖 getter，则约定是

```
-(NSString*)test {
    return test;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T01:02:35.187

简单地用定义创建一个方法

```
- (void) setTest:(NSString*) new_value 
```

这是当您尝试修改测试属性的值时将调用的方法（您可以根据其他属性名称进行更改）。

请记住，仅当您尝试修改 self.test（属性）时才会调用此方法 - 如果您直接修改测试变量，则不会调用 setTest。将非属性变量命名为其他名称是一种很好的做法（`_test`常用下划线开头），并让您的综合语句引用它：

```
@synthesize test = _test; 
```

这将访问 self.test 获取 _test 的值，并修改 self.test 调用您的 setTest 方法。如果你想覆盖 getter，这有定义

```
- (NSString*) test 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-13T01:10:50.040

如果您的自定义设置器的方法名称不同于`setTest:`（假设属性名称为`test`），您可以使用以下方法指定设置器：

```
@property(readwrite,setter=setShokolokobangoshay:) NSString *test; 
```

那么如果你有：

```
object.test = @"SomeValue"; 
```

它将自动“翻译”为：

```
[object setShokolokobangoshay:@"SomeValue"]; 
```

否则，您可以简单地提供一个`setTest:`方法，它会自动用作属性的设置器，即使您使用`@synthesize`指令（在这种情况下，`@synthesize`指令将只实现一个 getter）。

# wcf - 如何使用 CoreService 在自定义类上实现 WCF 事务支持？

> ID：12398027
> 
> 赞同：8
> 
> 时间：2012-09-13T00:55:07.840
> 
> 标签：wcf, tridion, transactionscope

我编写了一个类来帮助使用核心服务向发布目标添加和删除目标。目的地通常通过核心服务作为字符串（带有 XML 内容）公开，所以我围绕它编写了自己的包装器，等等。

我现在有一种情况，我需要更新 2 个发布目标，并认为使用事务范围来确保同时更新两个目标会很酷。

然而，我正在努力实现这一点。

代码工作（使用标准 CoreService WCF 客户端）：

```
TransactionOptions txOptions = new TransactionOptions 
                    { IsolationLevel = IsolationLevel.ReadCommitted };
using(TransactionScope scope = new TransactionScope(
                            TransactionScopeOption.Required, txOptions))
{
    PublicationTargetData publicationTarget1 = (PublicationTargetData)client.Read("tcm:0-1-65537", readOptions);
    PublicationTargetData publicationTarget2 = (PublicationTargetData)client.Read("tcm:0-2-65537", readOptions);

    publicationTarget1.TargetLanguage = "JSP";
    publicationTarget2.TargetLanguage = "JSP";
    client.Save(publicationTarget1, readOptions);
    client.Save(publicationTarget2, readOptions);

    // Stop saving
    scope.Dispose();
} 
```

执行此代码将成功回滚我所做的更改（如果我之前中断`scope.Dispose()`并检查 Tridion 中的发布目标，它会成功更改目标，然后“撤消”更改）。

如果我现在尝试在事务中使用我的“扩展发布目标”类，我将无法处理它。

```
TransactionOptions options = new TransactionOptions { IsolationLevel = IsolationLevel.ReadCommitted };
using (TransactionScope scope = new TransactionScope(TransactionScopeOption.Required, options))
{
    ExtendedPublicationTarget target1 = new ExtendedPublicationTarget("tcm:0-1-65537");
    ExtendedPublicationTarget target2 = new ExtendedPublicationTarget("tcm:0-2-65537");
    target1.Destinations.Add(target1.Destinations[0]);
    target2.Destinations.Add(target2.Destinations[0]);
    target1.Save();
    target2.Save();
    scope.Dispose();
} 
```

所以基本上，这是一个问题：我必须做什么才能将事务性添加到我的 .Save() 方法中？

我试过这样做：

```
[OperationContract]
[TransactionFlow(TransactionFlowOption.Allowed)]
public void Save()
{
    _client.Save(targetData, readOptions);
} 
```

但这并没有什么不同。有没有办法确定我当前是否正在进行交易并以某种方式“使用”该交易？我不想要求交易，只想有一个操作的选项。

谢谢，很抱歉发了很长的帖子……想确保我提供了尽可能多的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T17:41:59.327

最好的资源是：[WCF Transaction Propagation](http://msdn.microsoft.com/en-us/magazine/cc163432.aspx)

你至少少了一个步骤。您还需要在绑定中启用事务：

```
<bindings>
   <netTcpBinding>
      <binding name = “TransactionalTCP” transactionFlow = “true” />
   </netTcpBinding>
</bindings> 
```

> 有没有办法确定我当前是否正在进行交易并以某种方式“使用”该交易？

是的。要确定您是否处于事务中，您可以检查 Transaction.Current。如果您正在进行交易，除非您明确选择退出，否则您将使用它。这就是环境交易的美丽/可怕之处。

[WCF 事务传播](http://msdn.microsoft.com/en-us/magazine/cc163432.aspx)中的图 5 ：

```
class MyService : IMyContract 
{
   [OperationBehavior(TransactionScopeRequired = true)]   
   public void MyMethod(...)
   {
      Transaction transaction = Transaction.Current;
      Debug.Assert(transaction.TransactionInformation.
                   DistributedIdentifier != Guid.Empty);
   } 
} 
```

如果 Transaction.Current.TransactionInformation.DistributedIdentifier 为空，则事务是本地的并且没有“流动”。请注意，在`TransactionFlowOptions.Allowed`配置中，如果事务无法流动，它会静默失败。所以这确实是检查的唯一方法......并且不流动比您预期的更容易发生。

当我将事务用于生产服务时，我实际上避免了`TransactionFlowOptions.Allowed`，因为调用者永远不确定事务是否真正流动。如果部署中出现绑定配置错误，一切都会正常运行，但回滚会失败……这是一个非常难以检测的错误。所以我切换到必需的。然后*调用者*可以确保他们提供的交易实际上是成功传递的。（如果事务不在 `TransactionFlowOptions.Required`配置中流动，您将获得异常。）

# wordpress - 如何在 wordpress 中创建自定义帖子类型？

> ID：12398028
> 
> 赞同：0
> 
> 时间：2012-09-13T00:55:08.767
> 
> 标签：wordpress, custom-post-type

我有一个健身公司的网站。我有不同的健身房位置。在每个健身房位置我都有课程和设施的页面。

我想要做的是在 wordpress 的后端为每个位置创建一个部分。所以在页面选项卡下面有一个为健身房的每个位置命名的部分。当您单击该位置时，它会打开课程和设施选项卡。单击类后，我希望用户能够为类添加标题和描述。然后我希望他们能够添加视频。标题和描述将向左浮动，视频将向右浮动，其下方有一条线将其与下一个类分开。

我希望设施的工作方式非常相似，只是它们会添加图像而不是视频。

这个插件可以实现吗？如果是这样，我会怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T01:05:16.497

这应该可以帮助您满足您的需求：

[类型](http://wordpress.org/extend/plugins/types/)

至于所有内容的样式，规则将在 Theme 的 CSS 中定义。

# ruby-on-rails - 转换为 PDF：Heroku 上的 Ruby on Rails

> ID：12398029
> 
> 赞同：0
> 
> 时间：2012-09-13T00:55:19.963
> 
> 标签：ruby-on-rails, heroku, wkhtmltopdf

我正在尝试将特定页面呈现为 PDF。我的应用程序是用 Ruby on Rails 编写的，并托管在 Heroku 上。

对于开发，我在 Mac OS X 上。我正在使用 wicked_pdf（使用 wkhtmltopdf）将页面转换为 pdf。我也在 Heroku 上正确设置了它，但我面临的问题是，与 Heroku 相比，渲染的 PDF 在 OS X 上看起来非常不同：大多数 CSS 根本不起作用。

1) 有没有人在 Heroku 上做过 html 到 pdf 的操作？如果是这样，你用了什么？

2) 知道为什么 Mac 上的渲染与 Linux 上的不同吗？

谢谢！林戈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T07:12:26.923

我使用 prawnPDF (http://prawn.majesticseaacreature.com/)，但这不适合您的 html->PDF 案例。但是其中一个问题可能是 Mac 与 Heroku 支持哪些字体，这可能会导致渲染问题，这可能是相关的。

# android - View.SYSTEM_UI_FLAG_LOW_PROFILE 没有效果

> ID：12398032
> 
> 赞同：0
> 
> 时间：2012-09-13T00:56:32.027
> 
> 标签：android, android-4.0-ice-cream-sandwich, android-4.2-jelly-bean

在冰淇淋三明治和果冻豆上，我想为我的游戏降低状态栏的配置文件。

```
 if(Integer.parseInt(VERSION.SDK) >= 14)
        activity.getWindow().getDecorView().setSystemUiVisibility(View.SYSTEM_UI_FLAG_LOW_PROFILE); 
```

我称之为，但对状态栏没有任何影响。我想我错过了一些东西，但是在查看了文档和谷歌很长一段时间后，我找不到任何东西。我的设备是 Nexus 7。如果有帮助，这是我的清单片段

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android">
                 android:theme="@android:style/Theme.NoTitleBar.Fullscreen">

</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T22:32:47.327

您会发现 SDK 已被弃用，您需要 SDK_INT [http://developer.android.com/reference/android/os/Build.VERSION.html#SDK](http://developer.android.com/reference/android/os/Build.VERSION.html#SDK)还在 if 语句的正文中添加一条日志语句，以确保它正在执行。

# java - 启动 GrizzlyWebServer 的最佳方式是什么？

> ID：12398037
> 
> 赞同：3
> 
> 时间：2012-09-13T00:57:56.627
> 
> 标签：java, rest, jersey, grizzly

我们正在使用 Grizzly 和 Jersey 构建 Web 服务，并通过进行 Web 搜索来学习。我们注意到启动 grizzly 网络服务器的两种不同方式，但不知道一种方式是否比另一种更好。有人可以帮忙吗？

# 1 - 使用 GrizzlyWebContainerFactory：

```
 public static void main(String[] args) throws IOException {
 Map initParams = new HashMap();
 initParams.put( "com.sun.jersey.config.property.packages", "net.gilstraps.server" );
 SelectorThread selector = GrizzlyWebContainerFactory
 .create( "http://localhost:9998/", initParams ); //noinspection ResultOfMethodCallIgnored
 System.in.read();
 threadSelector.stopEndpoint();
 System.exit(0);
 }
} 
```

# 2 - 使用 GrizzlyWebServer

```
 GrizzlyWebServer gws = new GrizzlyWebServer(8080, "/var/www");

// Jersey web resources
 ServletAdapter jerseyAdapter = new ServletAdapter();
 jerseyAdapter.addInitParameter("com.sun.jersey.config.property.packages",
 "com.example");
 jerseyAdapter.setContextPath("/jersey");
 jerseyAdapter.setServletInstance(new ServletContainer());

// Another non-Jersey servlet
 ServletAdapter simpleServletAdapter = new ServletAdapter();
 simpleServletAdapter.setContextPath("/simple");
 simpleServletAdapter.setServletInstance(new SimpleServlet());

// register all above defined adapters
 gws.addGrizzlyAdapter(jerseyAdapter, new String[] {"/jersey"});
 gws.addGrizzlyAdapter(simpleServletAdapter, new String[] {"/simple"});

// let Grizzly run
 gws.start(); 
```

那么哪种方式更好呢？

谢谢——亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T11:14:46.540

起初我使用您的方法#1，但是一旦我需要提供更复杂的配置，我发现我需要方法#2 才能访问 GrizzlyWebServer 对象。

例如使用 GrizzlyWebServer 你可以控制工作线程池的大小。（我应该注意，Grizzly 文档只建议您这样做，因为您需要完成 IO 绑定工作）。

```
grizzlyWebServer.setCoreThreads(30);
grizzlyWebServer.setMaxThreads(50); 
```

我找不到使用方法#1 调整线程池大小的方法，因此我推荐方法#2 以提高可配置性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-02T13:08:28.997

起初我使用方法#1，但是一旦我需要提供更复杂的配置，我发现我需要方法#2 才能访问 ServletAdapter 对象。

例如使用 ServletAdapter 我们可以设置它是否必须在启动时加载。

`jerseyAdapter.setProperty("load-on-startup", 1);`

# java - 从已编译的程序中执行 jar

> ID：12398038
> 
> 赞同：0
> 
> 时间：2012-09-13T00:58:05.570
> 
> 标签：java, jar, runtime

我有一个作为迷你项目创建的启动器，我正在尝试执行一个 jar 文件。我想出了如何执行一个exe。继承人的代码：

```
mineshaft.addActionListener(new ActionListener() {

        public void actionPerformed(ActionEvent e) {
            String mhome = System.getProperty("user.home") + "";
            try {
                Runtime.getRuntime().exec("java -jar .mhome+ \\AppData\\Roaming\\.minecraft\\minecraft.exe");
            }

            catch (Exception a) {

            }

        }
    }); 
```

我到处搜索，每个人都说这段代码有效，但它不适合我。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T01:45:06.430

首先，你的命令是错误的。`.mhome+`? 确保您的命令是正确的。从命令提示符输入以下内容：

```
java -jar .mhome\AppData\Roaming\.minecraft\minecraft.exe 
```

这基本上就是您正在运行的内容。

另外，打印您的堆栈跟踪。尤其是在开发过程中。

我想你正在寻找这样的东西：

```
 public void actionPerformed(ActionEvent e) {
        String mhome = System.getProperty("user.home") + "";
        try {
            Runtime.getRuntime().exec("java -jar " + mhome + "\\AppData\\Roaming\\.minecraft\\minecraft.jar");
        }

        catch (Exception a) {
             a.printStrackTrace();
        }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T02:18:24.830

```
JarInputStream stream = null;

try {   

  File jar = new File("/path/to/jar.jar");
  stream = new JarInputStream(new FileInputStream(jar));
  String mainClass = stream.getManifest().getMainAttributes().getValue("Main-class");
  ClassLoader loader = URLClassLoader.newInstance(new URL[] { jar.toURI().toURL() }, getClass().getClassLoader);
  Class<?> main = Class.forName(mainClass, loader);
  main.getDeclaredMethod("main", String[].class).invoke(null, null);

} finally {
  stream.close();
} 
```

如果它适合您的需要，km1 的答案会更简单。

# zend-framework - 在 session 中保存 url 参数

> ID：12398042
> 
> 赞同：2
> 
> 时间：2012-09-13T00:58:41.287
> 
> 标签：zend-framework, session, zend-session

我有这样的路线：

```
resources.router.routes.home.route = /:state/:city
resources.router.routes.home.defaults.module = default
resources.router.routes.home.defaults.controller = index
resources.router.routes.home.defaults.action = index
resources.router.routes.home.defaults.state = ''
resources.router.routes.home.defaults.city = '' 
```

我网站上的大多数链接都需要这两个参数（州和城市），比如

```
www.mysite.com/sp/sao-paulo/establishments
www.mysite.com/sp/sao-paulo/establishment-name
www.mysite.com/sp/sao-paulo/establishments-category 
```

我需要检查用户访问我的网站时是否已经设置了这两个参数。如果没有，我会在他选择城市时将他重定向到特定页面。

我相信实现这一目标的最佳方法是创建一个我已经开始的插件。

```
class App_Controller_Plugin_CheckCity extends Zend_Controller_Plugin_Abstract {

  protected $_session;

  public function preDispatch(Zend_Controller_Request_Abstract $request) {

    $this->_session = new Zend_Session_Namespace('locationInformation');

    if (!isset($this->_session->state) || !isset($this->_session->city)) {
      // ...
    } else {
      // ...
    }

  }

} 
```

问题是我不知道该怎么做，如果这真的是最好的方法。

这是正确的路径吗？如果没有，我该怎么做才能解决我的问题？如果是，这个插件还需要什么？

我希望我说清楚了。我很感激任何帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:43:01.610

考虑到您没有默认的州/城市，那么用户在访问网站时首先看到的是他将选择他的位置的页面，无论他尝试访问哪个链接。

如果是这种情况，那么您需要编写一个插件来检查用户是否已经设置了这些选项：

```
<?php
class App_Controller_Plugin_CheckCity extends Zend_Controller_Plugin_Abstract
{
    public function preDispatch(Zend_Controller_Request_Abstract $request)
    {
        // Gets the session
        $session = new Zend_Session_Namespace('locationInformation');

        // Checks if the state/city are set and
        // if not set, checks if those params are set in the URI
        if( (!isset($session->state) || !isset($session->city))
            && ($request->has('state') && $request->has('city')) ) {
            // If yes, then saves it in the session
            $session->state = $request->getParam('state');
            $session->city = $request->getRequest()->getParam('city');
        } elseif(!isset($session->state) || !isset($session->city)) {
            // If not, forward the user to the controller/page where he'll choose his location
            $request->setControllerName('location')
                    ->setActionName('choose-location')
                    ->setModuleName('default');
        }

        if(isset($session->state) && isset($session->city)) {
            // Sets the params for use within your views
            $view = Zend_Registry::get('view');
            $view->state = $session->state;
            $view->city = $session->city;
        }
    }
} 
```

选择后，您将再次将用户重定向到他刚刚尝试访问的页面。为此，您将获取州/城市页面 ( `LocationController`) 上的 URI：

`$session->redirectTo = 'http://' . $this->getRequest()->getHttpHost() . $this->getRequest()->getRequestUri();`

设置用户的位置后，您将使用它在您的内部执行重定向`LocationController`：

`$this->_redirect($session->redirecTo);`

## 更新

为了在任何地方都可以访问您的视图对象，请将其保存在注册表中：

```
/**
 * Initializes the layout and view
 */
protected function _initView() {
    /**
     * @var \Zend_View $view
     * @var \Zend_Layout $layout
     */
    $layout = $this->bootstrap('layout')->getResource('layout');
    $view = $layout->getView();

    $view->doctype('XHTML1_STRICT');
    $view->headMeta()->appendHttpEquiv('Content-Type', 'text/html;charset=utf-8');

    // Adds to the registry
    Zend_Registry::set('view', $view);
} 
```

> [*再次检查插件代码，看看如何在视图中设置变量。*]

# java - 惯用 scala 中 jvm 选项的指南

> ID：12398046
> 
> 赞同：11
> 
> 时间：2012-09-13T00:59:23.497
> 
> 标签：java, scala, memory, garbage-collection, jvm

好的，我知道我应该对我的特定应用程序进行基准测试和等等等等，但是：

-Xmx、默认垃圾收集器等的默认 JVM 设置是*大多数*典型 Java 程序的合理默认值，并且可能不适合惯用的 Scala 代码（部分原因是惯用的 Scala 会倾向于生成更多的“垃圾”） ”）。

因此，我正在寻找可供选择的建议。典型的 Scala 程序是否需要更高的 -Xmx 设置？某些 JVM 是否比其他 JVM 更适合 scala？与 Java 通常默认的相比，Scala 的不同垃圾收集器（-XX:+UseParallelGC vs XX:+UseConcMarkSweepGC）通常是更安全/更好/更快的猜测/赌注/默认值吗？对于 Scala 代码，我还应该特别考虑其他选项吗？以何种方式？

既然生成了更多的临时对象，那么是否应该默认给“年轻”一代更多的空间呢？还是应该*减少*通常给年轻代的空间来强制更频繁的垃圾收集？其他几代人呢？

当然，我仍然需要为我的特定应用程序调整这些东西，但通常我猜想对于一个典型的 Scala 程序，我的起点可能与 Java 中的不同。

我确实发现自己在某些特定应用程序中遇到了内存不足错误和“达到 GC 开销限制”，或者只是让应用程序在垃圾收集暂停上花费了太多时间。在某种程度上，我可以通过调整选项来解决这些问题，但我想听听其他经验、一般原则和起点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T09:14:03.277

我在为 Eclipse IDE 优化 JVM 和 GC 设置时发现的一件事——更大的生成大小意味着当它最终收集它们时会有很大的停顿。

暂停显然是交互式应用程序的一大烦恼。这里的含义是使用较大的最大值但不强制使用较大的最小值。

我确实对 XX:+UseParallelGC 与 XX:+UseConcMarkSweepGC 进行了相当深入的比较——但那是在以前的计算机上。我最终在那台机器（单处理器）上使用了 XX:+UseConcMarkSweepGC，但对于多核机器来说，Parallel 显然是要走的路。

**有趣的 GC 调优技巧：**

IIRC，我确实发现 -XX:SurvivorRatio=2 或 -XX:SurvivorRatio=3 的“低值”可以提供显着的性能优势。我尝试的所有其他选项都没有明显的效果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T09:52:38.880

这是来自 scala 用户，因此纯粹基于个人经验。简而言之：我倾向于做很多 JVM 优化，因为我发现一点点努力可以让你走很长一段路，但我没有找到任何特定于 scala 的东西。

正如您所说，JVM 默认值充其量是合理的。设置适当的堆大小、选择正确的 GC、使用服务器 VM、调整生成大小等都可以提高 scala 应用程序的性能，就像它对普通 java 应用程序一样。这并不是说 java 和 scala 的配置文件是相同的，只是您的实际应用程序可能会产生更大的影响。

从理论上讲，我唯一期望重要的是新一代的大小，因为 scala 可能会产生更多的短期垃圾，而更大的新一代可以在这里对 VM 有所帮助。

# c# - 具有多个文本字段、标题和详细信息的水晶报表出现在单独的页面上？

> ID：12398047
> 
> 赞同：0
> 
> 时间：2012-09-13T00:59:42.117
> 
> 标签：c#, .net, crystal-reports

我正在使用 Crystal Reports 生成合同文档，其中包含多个带标题的格式化段落。数据不是来自数据库，所以我主要使用文本对象和参数字段来显示内容。

问题是在某些页面上，段落标题出现在页面底部，段落文本出现在下一页。请告诉我有没有一种方法可以将段落标题（这是一个单独的文本对象）与段落文本（这是另一个文本对象）结合起来，以便它们都出现在同一页面上。

奇怪的是，即使页面底部有空间，它有时也会在下一页上传递段落。

谢谢。

**编辑**
报告将打印在固定尺寸的 A4 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T01:01:08.570

尝试从水晶报表导出到另一种格式，看看是否可以重现问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T15:20:43.017

使用多个部分（详细信息、页眉、页脚）并调整部分的大小以将段落推到下一页。我在 Infomaker 和 Crystal 中都做了类似的事情，以使报告正确对齐。

# php - 两个特殊字符之间的正则表达式

> ID：12398057
> 
> 赞同：0
> 
> 时间：2012-09-13T01:00:43.773
> 
> 标签：php, javascript, jquery

有没有办法在 JQuery 或 Javascript 中复制这个 PHP 片段...

```
<?php 
  $A = preg_match_all('#{.*(.*)}#U', $value, $B); //matches all between {} put it into array "B"
  $C = $B[1]; // array[0] = "{content}" --- array[1] = "content"
?> 
```

我一直试图找到类似的东西 4 小时左右无济于事。目标基本上是找到之间的所有内容`{`，`}`然后将这些信息提取出来以使其有用。

我不是 Javascript 专家，所以我将不胜感激。先感谢您。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T01:12:22.293

您可以使用以下命令将 { 和 } 之间的所有文本块放入一个数组中：

```
function getBracedText(input) {
    var re = /\{(.*?)\}/g, matches, output = [];
    while (matches = re.exec(input)) {
        output.push(matches[1]);
    }
    return(output);
}

var str = "Some text {tag} and more {text}";
var results = getBracedText(str);
// results == ["tag", "text"]; 
```

工作演示：http: [//jsfiddle.net/jfriend00/DT4Km/](http://jsfiddle.net/jfriend00/DT4Km/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T01:04:01.910

正则表达式在所有语言中几乎相同。如果您想获取介于两者之间的所有内容`{}`并将其放入数组中，您可以这样做：

```
var arr = [];
var str = 'Lorem {ipsum dolor} sit {amet} conseteur {adipisci}';
str.replace(/{(.+?)}/g, function(a, b){ arr.push(b) });

console.log(arr); //=> ["ipsum dolor", "amet", "adipisci"] 
```

**演示：http:** [//jsfiddle.net/elclanrs/xeHZn/](http://jsfiddle.net/elclanrs/xeHZn/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T01:10:45.340

这个表达式应该可以正常工作：

```
/{([^}]+)}/g 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T01:11:53.780

这样的事情应该做：

```
 var re = /{[^}]*}/g;
 var s = '{foo},bar,{fum}';

 alert(s.match(re)); // ['{foo}','{fum}'] 
```

但您可能不希望包含“{}”。

```
var re = /{([^}]*)}/g;
var s = '{foo},bar,{fum}';

var a = [];
var b;
while (b = re.exec(s)) {
  a.push(b[1]);
}

alert(a); // ['foo','fum']; 
```

肯定有一种方法可以使用单个正则表达式并且没有循环。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-13T01:17:32.580

这是你需要的吗？

```
var value = "some {example}";
value.match(/{([^}]+)}/); //array[0] = "{example}" --- array[1] = "example" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-13T01:20:37.680

```
var str = '{Some groovy text}not so groovy text';
var regex = /\{(.*?)\}/;
var value = str.match(regex)[1];  // 'Some groovy text'; 
```

这将检索括号内的内容。希望这可以帮助。

# sql - 包含视图的模式可视化工具（适用于 Oracle）

> ID：12398059
> 
> 赞同：2
> 
> 时间：2012-09-13T01:00:56.097
> 
> 标签：sql, database, oracle, database-design, schema

我正在寻找可以快速为我在 Oracle 中可视化架构的东西（最好是免费的）？我找到了一些显示表之间关系的内容，但我还没有找到包含视图的内容。我知道视图可能比表更复杂，但最好有一个可视化器，至少可以理解简单连接等视图。我很乐意清理它并在之后添加它，但只是产生的东西基本关系会很好。

就像我说的，这是在 Oracle 数据库上，但如果有一个独立于数据库的工具，我很乐意转储生成模式的 sql 并将其提供给该工具。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T13:49:11.643

之前用过这个产品，挺好用的。您只需将其指向数据库，它就会为您对架构进行逆向工程。

[http://www.embarcadero.com/products/er-studio](http://www.embarcadero.com/products/er-studio)

# php - 尝试收藏推文/状态

> ID：12398067
> 
> 赞同：1
> 
> 时间：2012-09-13T01:01:38.993
> 
> 标签：php, api, twitter

使用 $connection = new tmhOAuth(array(....

所以，我正在尝试收藏一条推文/状态，如下所示：

```
$the_tweet = 239128150125191168;

$connection->request('POST', $connection->url('1/favorites/create'), array('id' => $the_tweet)); 
```

它给了我一个 400 错误代码。想不通为什么。如果我使用 GET，我会得到 200，但它不喜欢这条推文。它必须是一个 POST，这就是定义所说的使用。

任何帮助是极大的赞赏。

谢谢，埃迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T01:22:39.810

如果你这样做，我希望它能够工作：

```
$connection->request('POST', $connection->url('1/favorites/create/'.$the_tweet.'.json') ); 
```

如果您注意到这里：[https](https://dev.twitter.com/docs/api/1/post/favorites/create/%3Aid) ://dev.twitter.com/docs/api/1/post/favorites/create/%3Aid “POSTDATA” 是无。

# objective-c - 在导航控制器中调用其他视图时的 EXC_BAD_INSTRUCTION

> ID：12398069
> 
> 赞同：3
> 
> 时间：2012-09-13T01:02:21.433
> 
> 标签：objective-c, uitableview, uinavigationcontroller

我有一个带有一些数据的 UITableView 单元格。

当我选择一个单元格时，我希望表格视图将我重定向到另一个视图。这就是我正在做的事情：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    Multa *multa = [self.multas objectAtIndex:indexPath.row];

    DetalheMultaViewController *form = [[DetalheMultaViewController alloc] initWithMulta:multa];
    form.delegate = self;

    [self.navigationController pushViewController:form animated:YES];
} 
```

但是，当在最后一行出现此错误时：EXC_BAD_INSTRUCTION。

在控制台中我收到了这条消息（我明白在说什么，但不明白发生了什么）：

```
2012-09-16 17:11:25.719 Multas Sociais[5092:11603] *** Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<DetalheMultaViewController 0x7a46e10> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key fotoUrl.'
*** First throw call stack:
(0x1547052 0x1b0cd0a 0x1546f11 0xf2d032 0xe9ef7b 0xe9eeeb 0xeb9d60 0x7ac91a 0x1548e1a 0x14b2821 0x7ab46e 0x652e2c 0x6533a9 0x6535cb 0x652c1c 0x67956d 0x663d47 0x67a441 0x67a4f9 0x871c68 0x6314a1 0x63212b 0x8714c7 0x65a427 0x65a58c 0x65a5cc 0x3c2f 0x61d71d 0x61d952 0xea586d 0x151b966 0x151b407 0x147e7c0 0x147ddb4 0x147dccb 0x1f7a879 0x1f7a93e 0x58da9b 0x2608 0x2565)
terminate called throwing an exception(gdb) 
```

想法？

非常感谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T20:32:52.593

您可能有一个旧的 IBOutlet 调用`fotoURL`，直到连接到您的 XIB 文件中的某个对象，而您从代码中的 .h 中删除了 IBOutlet。

编辑您的 XIB 文件并删除与旧`fotoURL`插座的连接。

如果这还不够，您可能需要在再次构建之前清理您的项目（“产品”菜单、“清理”，或者为了获得更好的结果按住“alt”键并选择“清理构建文件夹...”）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T20:30:00.880

我可以假设您之前`fotoUrl`在 xib 中有一些 IBOutlet 属性，`DetalheMultaViewController`并且您已将其链接到某个对象。稍后您从类接口中删除了此属性，但保留了 xib 中的链接。所以现在，当框架加载 xib 时，它会尝试设置一个值，但没有这样的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T20:29:13.273

似乎您的视图控制器在推送时正在尝试访问`fotoURL`，但它不存在。这可能在视图控制器的`viewDidLoad`方法中，但可能是它的 nib 文件中的设置无效；也许`fotoURL`插座存在于早期版本的笔尖中并且从未断开连接？

# c# - 消息：此 EntitySet 中已存在具有相同标识的实体

> ID：12398073
> 
> 赞同：1
> 
> 时间：2012-09-13T01:02:41.800
> 
> 标签：c#, wcf, entity, ria

添加实体时出现以下错误
“此 EntitySet 中已存在具有相同身份的实体”
令人沮丧的部分是这是一个间歇性问题，我很难重现。我的代码：

```
 private void OKButton_Click(object sender, RoutedEventArgs e)
    {
        this.IsHitTestVisible = false;
        Form Form = _context.Forms.FirstOrDefault();

        Form.Transactions.Add(new Transactions
        {
            Comments = textbox_taskcomments.Text,
            By = UserID,
            Name = Name,
            IssuedOn = DateTime.Now,
            StatusID = StatusID
        });

        this.DialogResult = DevExpress.Xpf.Core.DialogResult.OK;
        this.Close();
    } 
```

任何帮助将不胜感激，因为我不知道从哪里开始......

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T01:08:28.387

你试过这个[`contains`](http://msdn.microsoft.com/en-us/library/bb335831.aspx)方法吗？

> **包含：**指定 EntitySet 是否包含特定实体。

`EntitySet`在修改它之前，您应该检查它的内容。

```
 Transactions t = new Transactions{
        Comments = textbox_taskcomments.Text,
        By = UserID,
        Name = Name,
        IssuedOn = DateTime.Now,
        StatusID = StatusID
 };
 //check that the entity does not yet contain t
 if(!Form.Transactions.Contains(t)){
 //do something.
 } 
```

（我不知道您的其余代码，但是..从我[读过](http://msdn.microsoft.com/en-us/library/bb341748.aspx)的内容来看，这可能是一个解决方案）

# objective-c - 如何确定 NSButton 是否为复选框？

> ID：12398075
> 
> 赞同：3
> 
> 时间：2012-09-13T01:03:12.267
> 
> 标签：objective-c, macos, cocoa, nib, nsbutton

在 Interface Builder 中，您可以将按钮的样式设置为“检查”以将其变成复选框，并且您可以使用 NSButton 的`setButtonStyle:`方法在代码中设置按钮的样式，但是我如何在运行时确定某个特定`NSButton`是否为复选框（或单选按钮，或常规按钮等）？

我正在处理的项目的一部分需要从其他包加载视图，并且每个复选框都需要特殊行为（这些包来自第 3 方）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T01:59:21.993

我不确定是否有万无一失的方法可以做到这一点。您可以检查 bezelStyle，以及记录 2 (NSRegularSquareBezelStyle) 的复选框。我不知道是否还有其他具有 NSRegularSquareBezelStyle 的按钮，它们不是复选框。您可能需要进行试验才能发现这一点。

编辑后：我确实找到了另一个为 bezelStyle 记录 2 的按钮（斜角按钮），但您可以记录 [button.cell showsStateBy]，并且该复选框是我发现的唯一一个记录 1 的按钮。

# cakephp - CAKEPHP：在线 Web 应用程序的完全不同的行为

> ID：12398078
> 
> 赞同：0
> 
> 时间：2012-09-13T01:03:41.007
> 
> 标签：cakephp

我有一个链接，比如`http://www.myweb.it/people/add/`执行时我有关于不存在的`add`视图和 json 的问题：

> 错误：未找到 PeopleController::add() 的视图。
> 
> 错误：确认您已创建文件：/var/datas/httpd/vhosts/myweb.it/demo/htdocs/0.4/app/View/elements/json.ctp

问题是在本地正确处理了导入的文件。这是整个人员控制器：

```
<?php
class PeopleController extends AppController {
    var $name = 'People';
    public $components = array('RequestHandler');
    public $helpers = array('Html', 'Form');

        public function add() {
        $this->autorender = false;

        if ($this->request->is('post')) {
            if ($this->Person->save($this->request->data)) {
                $this->set('return', 'I dati sono stati salvati.');
            } else {
                $this->set('return', 'Non è stato possibile salvare i dati.');
            }
        }

        $this->layout = 'void';
        $this->render('/elements/json');
    }

    public function getPeopleByName(){
        $people = $this->Person->getPeopleByName($_GET['name']);
        $this->set(array(
            'People' => $people,
            '_serialize' => array('People')
        ));
    }
} 
```

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T07:32:23.240

我认为`$this->render('/elements/json');`应该是`$this->render('/Elements/json');`，至少如果您的元素放置在 CakePHP 的默认元素位置，即`app/View/Elements`.

# php - PHP通过带有特殊字符的SSH传递shell命令

> ID：12398079
> 
> 赞同：1
> 
> 时间：2012-09-13T01:03:40.883
> 
> 标签：php, bash, shell, special-characters

我正在`PHP`使用该`ssh2`库通过 SSH 将动态 shell 命令传递给服务器。我传递的命令是（注意这只是一个例子，命令是动态的和用户生成的）。

```
$command = 'ls -al
free -m'; 
```

注意换行符，这是必需的，因为用户可以使用换行符和制表符键入完整的 bash 脚本。然后，我执行以下操作来构建要使用 ssh2 库执行的实际命令：

```
$command = str_replace("'", "\'", $command);
$command = 'echo $\'' . $command . '\' | bash'; 
```

这导致最终命令：

```
echo $'ls -al
free -m' | bash 
```

上面的命令直接在 shell 上执行得很好，但是当我使用 ssh2 从 PHP 执行它时，我得到：

```
ls: invalid option --  
Try `ls --help' for more information. 
```

所以我想，好吧必须有一些特殊字符或者美元符号没有被转义，所以我做了：

```
 print_r(bin2hex($command)); 
```

结果是：

```
 6563686f2024276c73202d616c0d0a66726565202d6d27207c2062617368 
```

不过，将十六进制转换为 ascii 会返回正确的命令（完全如上）。

知道是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T01:11:31.253

该错误来自 bash，而不是 PHP。

当我在 shell 中尝试你的命令时，我得到了同样的错误。

但是你为什么要使用如此复杂的方式来运行 bash？

而是使用`proc_open()`, with`bash`作为命令，然后将用户输入输入到标准输入文件句柄中。

如果您需要如何使用它的示例：[https ://stackoverflow.com/a/2390755/664364](https://stackoverflow.com/a/2390755/664364)

PS。我希望你知道你在做什么，允许用户以网络服务器用户的身份运行任意命令！

# javascript - 谷歌图表 - 如何更改整个表格的 CSS 属性

> ID：12398082
> 
> 赞同：2
> 
> 时间：2012-09-13T01:04:19.117
> 
> 标签：javascript, css, overloading, google-visualization

我有一个为 div 设置“表格边框折叠：折叠”的 CSS 定义。在那个 div 中，我显示了一个继承此属性的 Google Orgchart，然后在呈现图表时导致显示问题。

鉴于它是动态生成的，因此我不能使用内联属性，如何为图表删除/重载此属性。

编辑：谷歌的 js 生成的代码是：

```
<table class="google-visualization-orgchart-table" dir="ltr" cellpadding="0" cellspacing="0" align="center"`> 
```

我试图在我的文件中添加：

```
.google-visualization-orgchart-table {
border-collapse:separate;
} 
```

但是没有效果..

仍然使用 Chrome 的检查功能，我可以看到以下 css 导致了这个：

```
#main-content table {
width: 100%;
border-collapse: collapse;
} 
```

主要内容是我的 DIV。当我在 Chrome 中手动取消选中这个“border-collapse”属性时，它工作正常。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T03:56:47.887

我在类似情况下所做的是使用 Firebug for Firefox 来查找导致问题的项目的名称、ID 或类，然后在我的样式表中为该元素添加 css。

如果您在最新版本的 Firefox 上还没有 Firebug，请在此处获取：[https ://addons.mozilla.org/en-US/firefox/addon/firebug/us](https://addons.mozilla.org/en-US/firefox/addon/firebug/us)

例子：

假设元素的 id 是 googleTable

```
#googleTable{
 border-collapse:separate !important;
} 
```

一定要包括 !important 以确保不会发生继承。

# android - 在 Phonegap Android 应用程序中安装 FacebookConnect 插件时出错

> ID：12398084
> 
> 赞同：2
> 
> 时间：2012-09-13T01:04:45.340
> 
> 标签：android, cordova

我创建了一个 android 应用程序（phonegap 2.0）并安装了插件：[https ://github.com/mgcrea/cordova-facebook-connect](https://github.com/mgcrea/cordova-facebook-connect)

这一行：在 res/xml/config.xml 中。facebook-android-sdk.jar 在 libs/ 下并添加到构建路径中。

我的资产/www/ 包含：[https ://github.com/mgcrea/cordova-facebook-connect/tree/master/samples/ios/www](https://github.com/mgcrea/cordova-facebook-connect/tree/master/samples/ios/www)

当我编译它并在我的三星 2.3 Infuse 4G 上运行它时，我得到：

`I/InputReader( 139): dispatchTouch::touch event's action is 1 I/InputDispatcher( 139): Delivering touch to current input target: action: 1, channel '40812958 com.example.milea/com.example.milea.MainActivity (server)' V/webview (20224): singleCursorHandlerTouchEvent -getEditableSupport FASLE W/System.err(20224): java.lang.ClassNotFoundException: org.apache.cordova.plugins.FacebookConnect W/System.err(20224): at java.lang.Class.classForName(Native Method) W/System.err(20224): at java.lang.Class.forName(Class.java:234) W/System.err(20224): at java.lang.Class.forName(Class.java:181) W/System.err(20224): at org.apache.cordova.api.PluginEntry.getClassByName(PluginEntry.java:103) W/System.err(20224): at org.apache.cordova.api.PluginEntry.createPlugin(PluginEntry.java:78) W/System.err(20224): at org.apache.cordova.api.PluginManager.getPlugin(PluginManager.java:255) W/System.err(20224): at org.apache.cordova.api.PluginManager.exec(PluginManager.java:182) W/System.err(20224): at org.apache.cordova.CordovaChromeClient.onJsPrompt(CordovaChromeClient.java:207) W/System.err(20224): at android.webkit.CallbackProxy.handleMessage(CallbackProxy.java:602) W/System.err(20224): at android.os.Handler.dispatchMessage(Handler.java:99) W/System.err(20224): at android.os.Looper.loop(Looper.java:130) W/System.err(20224): at android.app.ActivityThread.main(ActivityThread.java:3687) W/System.err(20224): at java.lang.reflect.Method.invokeNative(Native Method) W/System.err(20224): at java.lang.reflect.Method.invoke(Method.java:507) W/System.err(20224): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842) W/System.err(20224): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600) W/System.err(20224): at dalvik.system.NativeStart.main(Native Method) W/System.err(20224): Caused by: java.lang.NoClassDefFoundError: org.apache.cordova.plugins.FacebookConnect W/System.err(20224): ... 17 more W/System.err(20224): Caused by: java.lang.ClassNotFoundException: org.apache.cordova.plugins.FacebookConnect in loader dalvik.system.PathClassLoader[/data/app/com.example.milea-2.apk] W/System.err(20224): at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240) W/System.err(20224): at java.lang.ClassLoader.loadClass(ClassLoader.java:551) W/System.err(20224): at java.lang.ClassLoader.loadClass(ClassLoader.java:511) W/System.err(20224): ... 17 more I/System.out(20224): Error adding plugin org.apache.cordova.plugins.FacebookConnect. D/CordovaLog(20224): Error: Status=2 Message=Class not found D/CordovaLog(20224): file:///android_asset/www/js/cordova-2.0.0.js: Line 938 : Error: Status=2 Message=Class not found I/Web Console(20224): Error: Status=2 Message=Class not found at file:///android_asset/www/js/cordova-2.0.0.js:938 D/CordovaLog(20224): facebookConnect.login:"Class not found" D/CordovaLog(20224): file:///android_asset/www/js/plugin.js: Line 5 : facebookConnect.login:"Class not found" I/Web Console(20224): facebookConnect.login:"Class not found" at file:///android_asset/www/js/plugin.js:5 D/Cordova (20224): onPageFinished(file:///android_asset/www/index.html#) D/CordovaWebView(20224): >>> loadUrlNow() D/DroidGap(20224): onMessage(onNativeReady,null)`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T05:04:04.367

它正在寻找您的 FacebookConnect 类位于 org.apache.cordova.plugins 命名空间中。仔细检查您在 FacebookConnect.java 文件顶部为包设置的内容。

# jquery - 带有属性的 Bassistance 验证。语法是什么？

> ID：12398085
> 
> 赞同：0
> 
> 时间：2012-09-13T01:04:46.653
> 
> 标签：jquery, validation, jquery-validate

根据文档 - 例如它 - 您可以通过使用属性指定需要输入元素参数的验证。它说这是推荐的方法。像这样：

```
<input type="password" minlength="6" maxlength="50"/> 
```

好的，这很容易。现在如何使用 html 属性指定（例如）范围？

```
<input type="number" range="[5, 50]"/> 
```

不，那行不通。也没有括号、花括号、花括号和括号或它们的任何组合。但这以一种完全出乎意料的方式起作用：

```
<input type="number" range="53"/> 
```

- 它吐出错误消息“数字必须在 5 到 3 之间”

有人可以告诉我正确的语法吗？

注意：这是一个示例。我意识到我可以通过使用来解决这个特定问题

```
<input type="number" min="5" max="50"/> 
```

我正在寻找关于如何使用 jquery-validate 属性 API 构建复杂验证规则的更一般的答案。

谢谢！

**编辑**

这是另一个例子。你如何使用“首选”属性语法来做到这一点？

```
$('form').validate({
    rules: {
        rt: {
          required: function(element) {
            return $("#age").val() < 13;
          }  
        }
    }
}); 
```

以下不起作用：

```
<form>
    <input type="text" id="age" name="age"/>
    <input type="text" id="rt" name="rt" required="function(element) { return $('#age').val() < 13;}"/>

    <input type="text" id="tabcatcher"/>
    <input type="submit"/>
</form> 
```

使用以下 jsfiddle：

[http://jsfiddle.net/GKNZF/](http://jsfiddle.net/GKNZF/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T05:51:48.333

在更一般的情况下，没有关于可以通过添加类来调用哪些验证、可以通过添加属性和参数/表达式/函数来调用哪些验证以及不能通过属性调用哪些验证的文档。从代码中，可以通过将其名称添加到类列表中来调用验证列表：

所需的
电子邮件
url
日期
dateISO
数字
数字
信用卡

我知道的验证可以由属性调用：

最小
最大
最小长度最大
长度
等于

未知。没有使这些工作所需的语法文档，也没有文档说它们不起作用：

需要回调
需要表达式
远程

由于长期存在的错误而无法正常工作：

范围范围
长度

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T01:33:04.747

这是插件中的一个已知问题/错误，如此**[处](https://github.com/jzaefferer/jquery-validation/issues/112)**所述。基本上，该插件被视为`53`一个两位数的数组，`5`最小值为最大值，`3`最大值为最大值。

要修复它，您需要应用以下补丁：

```
// Patch by Chris Tierney (CF Webtools 7/13/2011)
// Issue logged at https://github.com/jzaefferer/jquery-validation/issues/112
$.each(['rangelength', 'range'], function() {
    if (typeof rules[this] == 'string') {
        rules[this] = rules[this].split(",");
    }
    if (rules[this]) {
        rules[this] = [Number(rules[this][0]), Number(rules[this][1])];
    }
}); 
```

# xcode4.4 - 如何在 XCode 4.4 中禁用 @synthesize

> ID：12398090
> 
> 赞同：2
> 
> 时间：2012-09-13T01:05:28.617
> 
> 标签：xcode4.4, synthesize

Xcode 4.4 不需要`@synthesize`插座。然而，当我在 Xcode 中使用引用插座连接器时，它仍然会生成它。反正有没有告诉它不要生成`@synthesize`？我在项目和首选项中寻找设置，但找不到任何东西。

它在 .m 文件中生成的示例：

```
@synthesize name = _name;
@synthesize lastName = _lastName; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T20:31:55.423

您可以通过单击左侧 Project Navigator 中的项目名称然后单击 Build Settings 中的 All Cobined 然后搜索 synthesize 来关闭合成警告。那应该设置为否。

# deployment - Heroku 和 Sqlite3 问题

> ID：12398091
> 
> 赞同：0
> 
> 时间：2012-09-13T01:05:42.820
> 
> 标签：deployment, heroku, sqlite, github

尝试将一个非常基本的 Rails 应用程序部署到 Heroku。它在 sqlite3 上运行，我在部署它时遇到了一些问题。

首先，我确保 gem 列出了正在开发的 sqlite3。这让索引页面终于可以工作了，但是现在当我部署它并尝试按照链接指向实际上依赖于我的数据库的页面部分时，heroku 错误。我盯着日志看了一会儿，不知道发生了什么，所以我希望这里有人可以。我现在只发布似乎是最后一个操作的日志（按照链接）：

```
2012-09-13T01:00:23+00:00 heroku[router]: GET bloc-blog-1.herokuapp.com/ dyno=web.1 queue=0 wait=0ms service=187ms status=200 bytes=531
2012-09-13T01:00:24+00:00 heroku[router]: GET bloc-blog-1.herokuapp.com/assets/application-0149f820dbdd285aa65e241569d8c256.css dyno=web.1 queue=0 wait=0ms service=9ms status=200 bytes=811
2012-09-13T01:00:24+00:00 heroku[router]: GET bloc-blog-1.herokuapp.com/assets/application-1c74ddb87f4b5b3c36c58d068d148c95.js dyno=web.1 queue=0 wait=0ms service=9ms status=200 bytes=99469
2012-09-13T01:00:27+00:00 app[web.1]: 
2012-09-13T01:00:27+00:00 app[web.1]: 
2012-09-13T01:00:27+00:00 app[web.1]: Started GET "/posts" for 50.131.223.42 at 2012-09-13 01:00:27 +0000
2012-09-13T01:00:27+00:00 app[web.1]: Processing by PostsController#index as HTML
2012-09-13T01:00:27+00:00 app[web.1]: Completed 500 Internal Server Error in 75ms
2012-09-13T01:00:27+00:00 app[web.1]: 
2012-09-13T01:00:27+00:00 app[web.1]: LINE 4:              WHERE a.attrelid = '"posts"'::regclass
2012-09-13T01:00:27+00:00 app[web.1]:                                         ^
2012-09-13T01:00:27+00:00 app[web.1]: :             SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
2012-09-13T01:00:27+00:00 app[web.1]:               FROM pg_attribute a LEFT JOIN pg_attrdef d
2012-09-13T01:00:27+00:00 app[web.1]: ActiveRecord::StatementInvalid (PG::Error: ERROR:  relation "posts" does not exist
2012-09-13T01:00:27+00:00 app[web.1]:                 ON a.attrelid = d.adrelid AND a.attnum = d.adnum
2012-09-13T01:00:27+00:00 app[web.1]:              WHERE a.attrelid = '"posts"'::regclass
2012-09-13T01:00:27+00:00 app[web.1]: ):
2012-09-13T01:00:27+00:00 app[web.1]: 
2012-09-13T01:00:27+00:00 app[web.1]:   app/controllers/posts_controller.rb:5:in `index'
2012-09-13T01:00:27+00:00 app[web.1]:                AND a.attnum > 0 AND NOT a.attisdropped
2012-09-13T01:00:27+00:00 app[web.1]: 
2012-09-13T01:00:27+00:00 app[web.1]:              ORDER BY a.attnum
2012-09-13T01:00:27+00:00 heroku[router]: GET bloc-blog-1.herokuapp.com/posts dyno=web.1 queue=0 wait=0ms service=86ms status=500 bytes=643 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T01:09:01.547

Heroku 使用 PostgreSQL。按照[Rails 教程手册](http://railstutorial.org)中的说明在本地安装 PostgreSQL，以便您可以复制 Heroku DB 环境。 [Heroku 本身](https://devcenter.heroku.com/articles/how-do-i-use-sqlite3-for-development)以及几乎每个教程都警告说，在 sqlite3 中开发然后部署到 PostgreSQL 是充满危险的。

# r - Hmisc::latex 不打印带有表格对象的标题

> ID：12398093
> 
> 赞同：6
> 
> 时间：2012-09-13T01:05:54.707
> 
> 标签：r, latex, tabular, hmisc

首先，我会告诉你我正在尝试做些什么，以防万一我做错了。我有一个嵌套表，我想在 RStudio 中使用 knitr 将其作为 LaTeX 表输出。我很好，直到我尝试添加标题。`tables`我在小插图[(LINK)](http://cran.r-project.org/web/packages/tables/vignettes/tables.pdf)中尝试了第 9 页上的示例。

它可以在没有标题的情况下使用，但是当我添加标题时它不会。它也适用于非表格对象。有趣的是，它`latex.default`可以工作，但会导致 RStudio/knitr 的编译 PDF 出现错误，并且`latex`无论如何都会调用我读到的内容；再加上表格不再适当地四舍五入。我试过`latexTabular`了，但这也没有适当地四舍五入。

```
library(Hmisc); library(tables)
latex(head(mtcars), file="", caption="de")   #works

x <- tabular( (Species + 1) ~ (n=1) + Format(digits=2)*
         (Sepal.Length + Sepal.Width)*(mean + sd), data=iris )

latex(x, file="", caption="de") #no caption :( 
```

理想情况下，我希望能够`\caption{de}`输出，但无法弄清楚我哪里出错了。

如果有帮助，这里是输入和输出：

```
> latex(x, file="", caption="de", label="tab1") 
\begin{tabular}{lccccc}
\hline
 &  & \multicolumn{2}{c}{Sepal.Length} & \multicolumn{2}{c}{Sepal.Width} \\ 
Species  & n & mean & sd & mean & sd \\ 
\hline
setosa  & $\phantom{0}50$ & $5.01$ & $0.35$ & $3.43$ & $0.38$ \\
versicolor  & $\phantom{0}50$ & $5.94$ & $0.52$ & $2.77$ & $0.31$ \\
virginica  & $\phantom{0}50$ & $6.59$ & $0.64$ & $2.97$ & $0.32$ \\
All  & $150$ & $5.84$ & $0.83$ & $3.06$ & $0.44$ \\
\hline 
\end{tabular} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-13T03:51:39.500

我很尴尬地承认这一点，但整个问题是我试图在代码块中强制执行一些不属于的内容。我为帮助未来的搜索者而感到自豪。乳胶的东西在外面。因此，如果您尝试将上面的表格绘制为格式良好的表格，这就是您要查找的内容：

```
\begin{table}[ht]
\caption{This is a sample caption. \label{guy}}
<<desc, echo = FALSE, results = 'asis'>>=
x <- tabular( (Species + 1) ~ (n=1) + Format(digits=2)*
     (Sepal.Length + Sepal.Width)*(mean + sd), data=iris )
latex(x)
@
\end{table} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-13T01:30:47.143

tabular() 中的 x 对象属于 'tabular' 类，并且被分派到没有标题参数的 latex.tabular 。我猜它的预期用例在 Sweave 中，它的任务是提供标题。

但是，第 22 页上有一个示例，该示例使用`"\\caption{.}"`表小插图中的选项参数。这似乎取得了成功：

```
 x <- tabular( (Species + 1) ~ (n=1) + Format(digits=2)*
          (Sepal.Length + Sepal.Width)*(mean + sd), data=iris )

 latex(x, file="", options = list( tabular="longtable", toprule="\\caption{This is a sample caption.}\\\\   \\toprule",  midrule="\\midrule\\\\[-2\\normalbaselineskip]\\endhead\\hline\\endfoot"))
\begin{longtable}{lccccc}
\caption{This is a sample caption.}\\   \toprule
 &  & \multicolumn{2}{c}{Sepal.Length} & \multicolumn{2}{c}{Sepal.Width} \\ 
Species  & n & mean & sd & mean & sd \\ 
\midrule\\[-2\normalbaselineskip]\endhead\hline\endfoot
setosa  & $\phantom{0}50$ & $5.01$ & $0.35$ & $3.43$ & $0.38$ \\
versicolor  & $\phantom{0}50$ & $5.94$ & $0.52$ & $2.77$ & $0.31$ \\
virginica  & $\phantom{0}50$ & $6.59$ & $0.64$ & $2.97$ & $0.32$ \\
All  & $150$ & $5.84$ & $0.83$ & $3.06$ & $0.44$ \\
\hline 
\end{longtable} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-29T09:02:27.407

这应该有效。

```
cat('\\begin{table}[ht]
    \\centering')
latex(tabularTable)
cat('\\caption{some caption}')
cat('\\label{tab:table1}')
cat('\\end{table}') 
```

# python - node.js socket.io-client + python socketio

> ID：12398094
> 
> 赞同：1
> 
> 时间：2012-09-13T01:06:10.910
> 
> 标签：python, node.js, socket.io, gevent

我正在尝试使用 Socket.IO 来允许我的 Node.JS 应用程序与 Python 后端进行通信。我希望 Node.JS 充当客户端，Python 充当服务器，所以除了 gevent-socketio python 模块之外，我还使用了 socket.io-client Node.JS 模块。

[https://github.com/LearnBoost/socket.io-client](https://github.com/LearnBoost/socket.io-client) https://github.com/abourget/gevent-socketio

这是我的python服务器：

```
#!/usr/bin/env python
from socketio.server import SocketIOServer
from socketio.namespace import BaseNamespace

class MyNamespace(BaseNamespace):
    def on_foobar(self,data):
        print 'received method for foobar'
        print data

server = SocketIOServer(('localhost', 1234),resource=MyNamespace,policy_server=False)
print 'SocketIO server listening...'
server.serve_forever() 
```

这是我的 Node.JS 服务器（充当客户端）：

```
#!/usr/bin/env node
var io = require('socket.io-client');
var PySocket = io.connect('localhost:1234');
PySocket.emit('foobar',{'key1':'value1'}); 
```

由于某种原因，python 服务器没有看到连接。谁能指出我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T12:57:31.123

在 Python 方面你需要更多一点。

Namespace 对象不能作为参数传递给 SocketIOServer 对象。那`resource`（后来重命名为`namespace`）只是要识别的路径的名称（如 http://localhost/[namespace]/[rest of the socket.io 协议路径]。我同意术语上有重叠，但我们除了 .之外，很少处理资源/命名空间`socket.io`。

现在，为了让你的 python IO-server 运行，你需要使用一些框架来包装它......以实际将一些传入请求分派给正确的处理程序。该处理程序必须执行`socketio_manage()`，这是您应该将命名空间对象作为参数传递的函数。此外，您的框架可能希望提供其他文件，例如 .swf ... gevent-socketio 不会为您执行此操作。另外，如果你想让你的 python 进程做任何事情（比如与数据库交互，加载一些配置文件），我建议你选择一个框架，因为它可以让你的生活轻松完成大部分你需要做的事情。

如果你真的只想拥有一种`socket`服务器类型，从 node.js 到 python，那么为什么不使用标准的 TCP/UDP 套接字呢？在这种情况下，您不需要框架的开销、Socket.IO 协议的编码/解码等。

您的特定用例是什么？也许这可以为前进的道路提供一些启示。

# git - 迁移 Git 主机

> ID：12398095
> 
> 赞同：4
> 
> 时间：2012-09-13T01:06:27.760
> 
> 标签：git, github, bitbucket-server

我目前正在为我的团队评估 Git 存储库托管服务的选项。我偏爱使用 GitHub，但可能有一些原因我们会改为（或另外）想要使用 Atlassian 的 Stash。

使用 Git 是否可以将存储库及其历史从托管服务复制到另一个？这样做有什么问题吗？如果我们关闭一个供应商并决定我们必须稍后切换，那么我们会失去什么吗？

我对 Git 的一般性答案很感兴趣，但是如果尝试在 GitHub 和 Atlassian 堆栈之间进行专门迁移，作为其中一部分存储的数据（不一定只是源版本历史记录）是否会丢失任何可能的问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T13:39:26.070

乔，根据您的评论，这个问题在 git 的上下文中没有多大意义。您的存储库的任何克隆都包含该存储库的整个历史记录。写下来，如果您更改服务，则需要重新创建三件事：

1.  github 上的任何[git hooks设置。](https://help.github.com/articles/post-receive-hooks)这些不与存储库一起存储（对于任何克隆的存储库）。但是，您也没有理由不能对它们进行版本控制，因此在任何服务上重新创建它们都很容易。这也是一个很好的做法。版本控制您关心的任何内容。

2.  有权访问存储库的用户。显然，任何服务更改都意味着您的开发人员必须获得该服务的帐户，获得查看公司存储库的权限等。

3.  个人开发者存储库。您的公司回购的分叉显然需要在新服务上重新创建，但是一旦您完成 -2- 并牢记 -1-，这是一个微不足道的操作。你可以像大卫在他的回答中描述的那样简单地做到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T01:12:56.620

我刚刚用两个不同的遥控器对此进行了测试，通过添加新的、删除旧的和推送，提交历史不会丢失。

# drupal - Drupal 6 - 如何实现（CCK）类型'nodereference_autocomplete'的表单元素？

> ID：12398096
> 
> 赞同：1
> 
> 时间：2012-09-13T01:06:30.100
> 
> 标签：drupal, drupal-6, drupal-modules, drupal-fapi, drupal-forms

在 Drupal 社区页面上搜索一个看似简单的问题的答案已经花费了数小时，但到目前为止没有任何结果，因此希望您能提供帮助！

谁能描述如何以自定义形式使用 FAPI 实现“nodereference_autocomplete”类型的输入元素？对于初学者来说，这是一个 AJAX 装饰的文本字段，它在 CCK 模块提供的匹配引用节点的字段上自动完成。我想在我自己的 Drupal 6 模块中利用这个功能。

提交的值必须是被引用节点的nid。此外，将非常感谢限制自动完成路径以仅包含“文章”和“博客文章”类型的节点的说明。

感谢您对这个最基本的问题的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T22:49:16.193

我相信，由于您没有直接使用 CCK，因此您需要在模拟 CCK 行为的自定义模块中编写一些代码。您可以使用 FAPI 的自动完成功能。

您的 form_alter 或表单定义代码可能如下所示：

```
$form['item'] = array(   
  '#title' => t('My autocomplete'),
  '#type' => 'textfield',   
  '#autocomplete_path' => 'custom_node/autocomplete'  
); 
```

由于您需要按节点类型进行限制，因此您可能还需要创建自己的自动完成回调。这看起来像这样：

```
function custom_node_autocomplete_menu() {
  $items = array();
  $items['custom_node/autocomplete'] = array(
      'title' => '',
      'page callback' => 'custom_node_autocomplete_callback',
      'access arguments' => array('access content'),
      'type' => MENU_CALLBACK,
    );
  return $items;
}

function custom_node_autocomplete_callback($string = '') {
  $matches = array();
  if ($string) {
    $result = db_query_range("SELECT title, nid FROM {node} WHERE type IN('article', 'blogpost') AND LOWER(title) LIKE LOWER('%s%%')", $string, 0, 5);
    while ($data = db_fetch_object($result)) {
      $matches[$data->title] = check_plain($data->title) . " [nid:" . $data->nid . "]";
    }
  }
  print drupal_to_js($matches);
  drupal_exit();
} 
```

然后，您需要编写代码从提交的值中提取节点 ID。这是 CCK 用来执行此操作的代码：

```
preg_match('/^(?:\s*|(.*) )?\[\s*nid\s*:\s*(\d+)\s*\]$/', $value, $matches);
if (!empty($matches)) {
  // Explicit [nid:n].
  list(, $title, $nid) = $matches;
  if (!empty($title) && ($n = node_load($nid)) && trim($title) != trim($n->title)) {
    form_error($element[$field_key], t('%name: title mismatch. Please check your selection.', array('%name' => t($field['widget']['label']))));
  }
}
else {
  // No explicit nid.
  $reference = _nodereference_potential_references($field, $value, 'equals', NULL, 1);
  if (empty($reference)) {
    form_error($element[$field_key], t('%name: found no valid post with that title.', array('%name' => t($field['widget']['label']))));
  }
  else {
    // TODO:
    // the best thing would be to present the user with an additional form,
    // allowing the user to choose between valid candidates with the same title
    // ATM, we pick the first matching candidate...
    $nid = key($reference);
  }
} 
```

# ios - 为了支持 iPhone 5 的更长屏幕，需要检查什么？

> ID：12398098
> 
> 赞同：-1
> 
> 时间：2012-09-13T01:06:43.233
> 
> 标签：ios, iphone-5

> **可能重复：**
> [如何处理 iPhone 5 的屏幕尺寸？](https://stackoverflow.com/questions/12396545/how-to-deal-with-iphone-5-screen-size)

iPhone 5 配备更长的屏幕（1136x640 vs 960x640），为了优雅地支持新（和旧）分辨率，应该注意什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T01:17:13.853

初始屏幕、屏幕截图、nib 文件。此外，我敢打赌，Apple 会优雅地处理所有这些尺寸不匹配的问题（至少在最初阶段如此），以让开发人员有时间赶上这些新要求（例如他们最初处理非视网膜应用程序资产的方式）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T01:10:19.330

首先，XIB 资源需要是可拉伸的，即使用正确的自动调整大小设置，或者需要重新设计。

# maps - 使用谷歌地图进行地理编码 - 使用 API 的零结果，但在地图上找到？

> ID：12398099
> 
> 赞同：0
> 
> 时间：2012-09-13T01:06:51.040
> 
> 标签：maps

我正在尝试获取这个特定位置的经度和纬度 -

> Jalan Kaki Bukit, Off Jalan Yeap Chor Ee

我用它来查询谷歌地图以获取 XML 响应 -

[http://maps.googleapis.com/maps/api/geocode/xml?address=Jalan+Kaki+Bukit,+Off+Jalan+Yeap+Chor+Ee+&sensor=true](http://maps.googleapis.com/maps/api/geocode/xml?address=Jalan+Kaki+Bukit,+Off+Jalan+Yeap+Chor+Ee+&sensor=true)

返回零个结果。然而，当我在谷歌地图网站上手动搜索位置时，却发现——

[http://bit.ly/PcV4BM](http://bit.ly/PcV4BM)

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T07:18:30.523

而不是“关闭”，尝试“在”——我得到了 [http://maps.googleapis.com/maps/api/geocode/xml?address=Jalan+Kaki+Bukit+At+Jalan+Yeap+Chor的结果+Ee+&传感器=真](http://maps.googleapis.com/maps/api/geocode/xml?address=Jalan+Kaki+Bukit+At+Jalan+Yeap+Chor+Ee+&sensor=true)

# php - 如何从 php curl 横向数据中接收值？

> ID：12398107
> 
> 赞同：0
> 
> 时间：2012-09-13T01:08:32.673
> 
> 标签：php, curl

现在我想将 POST 数据横向输入`a.com/a.php` 到`b.com/b.php`.suppose`a.php`有一个表单。

```
<form method="post" action="">
name: <input type="text" name="name" /><br />
email: <input type="text" name="email" />
</form> 
```

以下是我的代码 php 代码部分`a.php`。如何接收横向数据`b.com/b.php`

```
 $url = 'http://www.b.com/b.php';
    $fields = array(
    'username' => addslashes($_POST['name']),
    'email' => addslashes($_POST['email']),
     'ip' => $_SERVER['REMOTE_ADDR']
);

$ch = curl_init();
curl_setopt($ch,CURLOPT_URL, $url);
curl_setopt($ch,CURLOPT_POST, true);
curl_setopt($ch,CURLOPT_POSTFIELDS, $fields);
 curl_close($ch); 
```

如何编写表单动作部分？我的代码有问题吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T01:14:37.883

在 curl_close($ch) 之前，

```
url_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$result = curl_exec($ch); 
```

# frameworks - 如何识别STAF完成初始化？

> ID：12398109
> 
> 赞同：1
> 
> 时间：2012-09-13T01:08:47.210
> 
> 标签：frameworks, automation, automated-tests, startup

如何在重新启动后确定 STAF 已完全启动并准备就绪？我们目前使用“staf local ping ping”，但即使在 STAF 完全准备好其他命令之前，此命令也会返回“pong”。最好我需要一些独立于平台的东西（适用于 Win、Linux 等）。谢谢！

# javascript - 谷歌地图劫持 了 iphone 的滚动（触摸事件） - 如何带回来？

> ID：12398113
> 
> 赞同：7
> 
> 时间：2012-09-13T01:09:08.433
> 
> 标签：javascript, google-maps, google-maps-api-3

我使用 JQuery。我使用谷歌地图 api v3。

现在，**在我的 iPhone 上，如果我将手指放在地图的区域上，我就无法向下滚动页面**。

`draggable : false`在地图的选项中不起作用。它只是阻止地图在内部移动。

找到了这些类似的问题，但无法从中得到答案：

[如何禁用谷歌地图移动布局上的滚动？](https://stackoverflow.com/questions/4531052/how-can-i-disable-scrolling-on-the-google-maps-mobile-layout)

[在页面上嵌入谷歌地图而不覆盖 iPhone 滚动行为](https://stackoverflow.com/questions/7534888/embed-google-maps-on-page-without-overriding-iphone-scroll-behavior)

[谷歌地图 API；抑制地图平移以启用页面滚动](https://stackoverflow.com/questions/5596781/google-maps-api-suppress-map-panning-to-enable-page-scrolling?lq=1)

有什么简单的方法可以做到这一点？看起来谷歌是故意这样做的！（显然不是）

编辑#1：
我不能使用静态地图。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-13T01:13:10.103

`<div>`在地图上放一个透明的`<div>`应该可以解决问题。

或者，如果您不想要任何类型的交互性，只需使用[静态地图 API 。](https://developers.google.com/maps/documentation/staticmaps/)（它更轻量级，因为你嵌入的只是一张图片。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-14T10:49:42.747

josh3736 的回答对我有帮助，谢谢。我想用我的解决方案扩展它：

我做的第一件事是添加了一个#overlay div，就像 josh3736 提到的那样。

然后我实现了一个小 jQuery 脚本来检测用户是否正在做某事或处于空闲模式：

```
// jQuery Idle
idleTimer = null;
idleState = false;
idleWait = 2000;

(function ($) {
    $(document).ready(function () {
        $('*').bind('mousemove keydown scroll', function () {

        clearTimeout(idleTimer);

        if (idleState == true) { 
            // Reactivated event
            $('html').removeClass('idle');
            $('html').addClass('no-idle');
        }

        idleState = false;
        idleTimer = setTimeout(function () {
            // Idle Event
            $('html').addClass('idle');
            $('html').removeClass('no-idle');
            idleState = true; }, idleWait);
        });
        $("body").trigger("mousemove");
    });
}) (jQuery) 
```

如您所见，该脚本正在向 html 添加类：idle 和 no-idle。

之后，我添加了以下 CSS-Snipet：

```
#map-overlay {
    display: none;
    position: absolute;
    z-index: 500;
}

.idle #map-overlay {
    display: block;
} 
```

如您所见，这个想法是用户一旦不再空闲就可以使用地图功能。并且由于事实上，在滚动后空闲开始，它就像触摸设备的魅力一样。

希望这可以帮助。

# php - 执行时 PHP 进度更新

> ID：12398115
> 
> 赞同：-1
> 
> 时间：2012-09-13T01:09:35.450
> 
> 标签：php

有没有办法让 PHP 在页面执行大型脚本时向您显示进度？例如，如果我正在解析一个大型数组，我可以在整个过程中输出状态更新吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T02:21:40.740

我能想到的有四种方法可以做到这一点。我只用过其中两个：

1）您可以定期推送输出（刷新）并希望它通过浏览器。这可能仅在某些情况下有效 - Web 服务器（apache）可能会有自己的缓存并为您保留数据，直到它有足够大的数量，ISP / Workplace / User 可能有自己的缓存，可能在整个页面完成之前不要转发信息，最后浏览器可能不会显示它。所以不推荐。（不曾用过）

2）对本地文件（或数据库）进行状态更新，然后通过AJAX查询。这已在评论中提出，您无需仅通过上传文件来完成。您将使用 AJAX 调用来启动进程（使用通用标识符，例如会话来链接所有调用），然后进程将其状态更新为文件（链接到通用标识符），然后 AJAX 定期调用服务器并读取状态文件。当状态文件显示“完成”时，您可以重定向到新页面（使用状态生成）或仅通过 AJAX 更新。这种方法效果很好——我上次在移动设备上使用它以在等待后台事件时保持移动站点的连接；如果一切都失败了，我有一个“超时”。

3）批量运行PHP脚本。如果 PHP 有一个 max-execution-time 并且你可能会超过它，你就需要这个。基本上你运行 30 秒，然后在页眉中提供一个具有当前状态和元刷新的页面，该页面从最后一个离开的地方开始下一个进程。您通过 URL 和 HTML 传递状态。如果你采用这种方法，如果浏览器从未收到服务器的回复，那么如果互联网连接不可靠，它可能会失败；所以结合AJAX方法（即AJAX调用“请先做50个，等待完成，更新状态，请做下一个50个等待，更新状态等）是一个很好的混合解决方案。你还需要确保你的脚本可以安全地处理如果您从先前处理的位置开始处理。

4）您打开一个从浏览器到服务器的 javascript 套接字，并通过套接字进行更新。由于浏览器中缺少对套接字的支持，我从未使用过它，但是如果您了解受众并且他们的浏览器可以很好地支持套接字，则可以使用示例。

# cassandra - Astyanax ColumnFamily 多列？

> ID：12398116
> 
> 赞同：3
> 
> 时间：2012-09-13T01:09:58.713
> 
> 标签：cassandra, astyanax

我有一个包含多个列的列族：

```
create column family user_attr2
with comparator = 'UTF8Type'
and default_validation_class = 'UTF8Type'
and key_validation_class = 'UTF8Type'
and column_metadata = [
 {column_name: attr_value, validation_class: UTF8Type },
 {column_name: last_sync_timestamp, validation_class: LongType},
 {column_name: last_sync_digest, validation_class: UTF8Type }
]; 
```

但 Astyanax 只有：

```
public class ColumnFamily<K, C> { ... } 
```

如何使用 Astyanax 从上面的列族中读取数据？

thx 夹头

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-29T18:55:23.403

Astyanax 入门指南涵盖了这样做的一个示例。但是，根据您的问题，混淆在于列元数据中指定的多个列值类型（验证器），而 ColumnFamily 合同似乎暗示 ColumnFamily 的值是单一类型的。

在幕后，Astyanax 无论如何都将序列化到/从 ByteBuffer（使用它的序列化器作为原语或使用您指定的序列化器）......但是这个 ColumnFamily api/contract，当在读/写的上下文中（而不是编程列族定义），可能会产生误导。

首先，您需要初始化 Astyanax ( [Initialization](https://github.com/Netflix/astyanax/wiki/Getting-Started#initializing-astyanax) )。然后是这样的（从入门指南修改）：

```
ColumnFamily<String, String> CF_USER_ATTR =
  new ColumnFamily<String, String>(
    "user_attr2",              // Column Family Name
    StringSerializer.get(),   // Key Serializer
    StringSerializer.get());  // Column Serializer

OperationResult<ColumnList<String>> result =
  ks.prepareQuery(CF_USER_ATTR)
    .getKey("Key1")
    .execute();
ColumnList<String> columns = result.getResult();

// Lookup columns in response by name 
String attr_value        = columns.getColumnByName("attr_value").getStringValue();
long timestamp   = columns.getColumnByName("last_sync_timestamp").getLongValue();
String digest = columns.getColumnByName("last_sync_digest").getStringValue();

// Or, iterate through the columns
for (Column<String> c : result.getResult()) {
  System.out.println(c.getName());
} 
```

有关更多信息，请参阅[Astyanax 入门](https://github.com/Netflix/astyanax/wiki/Getting-Started)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T19:57:10.280

我不知道它是否会有所帮助，但阅读示例在此文件的第 106 行

[https://github.com/deanhiller/playorm/blob/8a4f3405631ad78e6822795633da8c59cb25bb29/input/javasrc/com/alvazan/orm/layer9z/spi/db/cassandra/CursorKeysToRows.java](https://github.com/deanhiller/playorm/blob/8a4f3405631ad78e6822795633da8c59cb25bb29/input/javasrc/com/alvazan/orm/layer9z/spi/db/cassandra/CursorKeysToRows.java)

和此文件中的第 86 行

[https://github.com/deanhiller/playorm/blob/8a4f3405631ad78e6822795633da8c59cb25bb29/input/javasrc/com/alvazan/orm/layer9z/spi/db/cassandra/Cas​​sandraSession.java](https://github.com/deanhiller/playorm/blob/8a4f3405631ad78e6822795633da8c59cb25bb29/input/javasrc/com/alvazan/orm/layer9z/spi/db/cassandra/CassandraSession.java)

或者您可以运行 playOrm 的测试用例，但您必须修改 FactorySingleton.java 中的 IN_MEMORY 并将其更改为 CASSANDRA 以运行和调试它并观察它的运行情况。这可以让你复制。

playOrm 是一个 ORM，它在 noSQL 之上执行 S-SQL（可扩展 SQL），这样您就可以在分区内进行查询（包括连接）......很快它就会有一个临时工具来查询分区。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T18:34:46.033

看起来 ColumnFamily 中的 C 用于列名。这在该类的 java doc 中并不清楚。

```
 * @param <C> 
```

在这种情况下，我很幸运——我的列名是字符串。

# php - 在旁边设置带有 GMap 的联系表 7

> ID：12398121
> 
> 赞同：0
> 
> 时间：2012-09-13T01:10:25.513
> 
> 标签：php, google-maps, wordpress, contact-form

我正在构建一个使用联系表 7 作为联系页面的网站。我还使用了一个名为**Comprehensive Google Map Plugin**的插件，所以我使用这个插件生成了地图简码。我想把表格和谷歌地图并排放置。这是[网站](http://www.espiralinfinitoca.com/)。对此有什么建议吗？任何其他给我相同行为的插件？

提前欢呼和感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T05:27:00.490

您可以通过编辑 CSS 轻松实现这一目标。转到您的仪表板，然后单击左侧外观选项卡下的编辑器。

现在按下`Ctrl+F`并输入`#post`。你可以在那里看到下面的代码：

```
/*-----------------------------------------------------------------------------------*
/* Posts & Pages
/*-----------------------------------------------------------------------------------*/
#post {
    float: left;
    width: 650px;
} 
```

`width: 650px;`从那里删除线。

之后按更新文件按钮。

就是这样。现在检查您的联系页面。

干杯！！！

# webgl - WebGL：读取缓冲区对象的内容？

> ID：12398122
> 
> 赞同：2
> 
> 时间：2012-09-13T01:10:31.597
> 
> 标签：webgl, vbo, arraybuffer

在其他平台上，我通过将很少访问的每个顶点几何和颜色数据仅存储在 GPU 内存中的 VBO 中并使用 glMap 每隔一段时间分段读取和/或修改它来降低内存使用率。

在阅读 OpenGL ES 2 书时，我注意到它在第 118 页上说：

> OpenGL 允许应用程序读取顶点缓冲区存储的内容，但 OpenGL ES 中缺少这些 API 调用。由于 OpenGL ES 中没有读取缓冲区数据的机制，因此这些枚举不再有效，因此不受支持。

我用谷歌搜索了一段时间，看到了 glMapBufferOES 的存在（这似乎记录得很差）。这仍然有效吗？它是一个普遍支持的扩展吗？有什么办法可以在 WebGL 中使用它吗？如果没有，是否有其他方法可以读取 VBO 的内容，或者我唯一的选择是保留对我自己的 ArrayBuffer 对象（或其他一些非 GPU 存储）的 JavaScript 引用？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-13T15:23:55.847

如果扩展不在[Khronos WebGL 扩展存储库](http://www.khronos.org/registry/webgl/extensions/)中，则它不能在 WebGL 中使用。

# iphone - +[NSNumber numberWithUnsignedInteger:] 字面量？

> ID：12398123
> 
> 赞同：4
> 
> 时间：2012-09-13T01:10:35.010
> 
> 标签：iphone, objective-c, nsnumber, unsigned-integer, objective-c-literals

我知道我可以这样做`@3`，`[NSNumber numberWithInt:3]`
但字面意思是`[NSNumber numberWithUnsignedInteger:3]`什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-13T01:15:02.973

您可以使用`@3U`or `@3UL`（或使用通常的整数后缀来更改类型，例如`@3ULL`for `unsigned long long`）。

有关 NSNumber 文字的更多信息，请参阅[此页面](http://clang.llvm.org/docs/ObjectiveCLiterals.html)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-13T01:23:56.287

如果您不记得正确的文字，类型转换也可以工作。

```
NSNumber* number = @((NSUInteger)3); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-13T01:29:55.250

`@3UL`会给你一个`NSNumber`与`NSUInteger`.

但是问问自己*为什么*要这个？由于可以由C/Objective-C ^(1中的)*所有*`3`数字类型精确表示，因此为您提供了一个行为相同的对象。尽管使用的常量的类型不同，但您得到的对象可以以所有相同的方式使用，并且可以使用相同的方法集进行拆箱。*^(`@3`)*

 *¹好的，好的，除了仅代表 1 位的类型，例如`_Bool`和`int : 1`。*

# scheme - 方案二叉搜索树错误 (R5RS)

> ID：12398128
> 
> 赞同：2
> 
> 时间：2012-09-13T01:10:57.363
> 
> 标签：scheme, binary-search-tree, racket, r5rs

总的来说，我对 Scheme 和函数式语言完全陌生。我正在尝试创建一个二叉搜索树。节点的格式是三个元素的列表，第一个是节点的值，第二个是左子节点，第三个是右子节点。我有一个“make”函数，它创建一个空树：( () () () )。我也有插入功能。这是代码：

```
;Inserts a number into the tree
(define (insert t x)
  (cond ((null? (car t))
      (list x (make) (make)))
      ((< x (car t))
       ((list (car t) ((insert (cadr t)  x)) (caddr t))))
      ((> x (car t))
       ((list (car t) (cadr t) ((insert (caddr t) x)) )))

  )
)

;Makes a new empty tree
(define (make)
  (list (list) (list) (list))
) 
```

为了测试它，我运行以下几行：

```
> (define b1 (make))
> (define b2 (insert b1 1))
> b2
(1 (() () ()) (() () ()))
> (define b3 (insert b2 2)) 
```

然后我收到以下错误：

```
application: not a procedure;
expected a procedure that can be applied to arguments
given: (2 (() () ()) (() () ()))
arguments...: [none] 
```

我已经检查并重新检查了我的括号......并在调试模式下运行它，我看到它在将 2 插入树的末尾失败。直到，它按计划工作。这是我愚蠢的语法/逻辑错误的原因吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T01:18:50.987

```
((list (car t) ((insert (cadr t)  x)) (caddr t))) 
```

外面的一对括号是这里的问题。`(list (car t) ((insert (cadr t) x)) (caddr t))`给你一个清单。通过将另一对括号包裹在它周围，您试图应用该列表，就好像它是一个函数一样，您不能 - 因此是错误消息。

# html - Dreamweaver：如何在多个页面中编辑通用代码

> ID：12398133
> 
> 赞同：0
> 
> 时间：2012-09-13T01:11:52.653
> 
> 标签：html, dreamweaver, common-code

我正在编辑一个在多个 .html 中具有公共代码的网站（下面的示例）。我习惯使用 .asp 页面中的包含文件，那么**如何将网站导入 Dreamweaver CS5.5 以便将公共代码识别为包含文件？**谢谢！

```
<!-- begin [Menu] -->
<ul class="menu">
<li><a href="index.html">Home</a></li>
<li><a href="about.html">About</a></li>
<li><a href="news.html">News</a>
    <ul>
        <li><a href="news.html">News List</a></li>
        <li><a href="news_details.html">News Detail</a></li>
    </ul>
</li>
<li><a href="portfolio_3columns.html">Portfolio</a>
    <ul>
        <li><a href="portfolio_1column.html">One Column</a></li>
        <li><a href="portfolio_2columns.html">Two Columns</a></li>
        <li><a href="portfolio_3columns.html">Three Columns</a></li>
    </ul>
</li>
<li><a href="column_layouts.html">Features</a>
    <ul>
        <li><a href="column_layouts.html">Columns Layouts</a></li>
        <li><a href="page_elements.html">Page Elements</a></li>
        <li><a href="pricing_tables.html">Pricing Tables</a></li>
        <li><a href="twitter_feed.html">Twitter Feed</a></li>
        <li><a href="buttons.html">Buttons</a></li>
        <li><a href="404.html">404 Page</a></li>
    </ul>
</li>
<li><a href="contacts.html">Contacts</a></li>
</ul>
<!-- end [Menu] --> 
```

# python - 在 Virtualenv 之外访问 Celery 实例

> ID：12398134
> 
> 赞同：3
> 
> 时间：2012-09-13T01:11:58.803
> 
> 标签：python, virtualenv, celery

我有一个基于烧瓶的 API 在我的服务器上的虚拟环境中运行。我希望我的 API 能够调用 celery 任务，但是 Celery 已安装并且已经在运行 API 的虚拟环境之外用于其他目的。如何导入我的任务模块，以便它可以在 virtualenv 内部使用.

对不起，如果这是一个愚蠢的问题，使用 Virtualenv 对我来说是新的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T16:33:51.870

您只需要安装在 virtualenv 中加载“任务”模块所需的依赖项（例如`pip install celery`）。

发送任务的行为与 virtualenv 并没有真正的关系，它只需要与正确的代理 URL 进行通信（但是，当使用 Django 数据库作为代理时，这可能会有点复杂）。

事实上，您也可以轻松地按名称发送任务：

```
$ python
>>> from celery import Celery
>>> Celery(broker='amqp://').send_task('tasks.add', (2, 2)) 
```

所以代理是唯一需要的通信点，但是 tasks.py 模块和 Celery 应用程序可以包含影响任务发送方式的配置（比如路由到不同的队列，设置默认队列名称和队列+任务配置等）。

# .net - 在应用程序中打开自定义文件类型？

> ID：12398136
> 
> 赞同：0
> 
> 时间：2012-09-13T01:12:11.860
> 
> 标签：.net, vb.net, visual-studio-2010, deployment, clickonce

在我的应用程序中，用户创建基于文本的文件，然后将它们保存到我自己的特殊文件类型中。当我创建我的 clickonce 项目时，我将对其进行设置，以便我的应用程序在应用程序外部单击打开这些文件时打开这些文件。

我的问题是，我究竟如何编写逻辑，以便我的程序知道它是通过文件打开的，所以我可以将文件加载到我的应用程序中？我猜我需要在表单加载中输入某种代码来选择应用程序的加载方式，无论是打开文件还是正常加载，如果我只是打开它的程序集。我只是不确定我是怎么做到的。我正在使用 vb.net。

这行得通吗？在创建 clickone 程序并设置文件类型关联之前，我该如何测试呢？

```
If (Environment.GetCommandLineArgs.Length > 1) Then

    Dim s As String = Environment.GetCommandLineArgs(1)

    ' Open file s

End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T02:40:25.547

您有正确的想法，请查看此[代码项目文章（File-Association-in-VB-NET）](http://www.codeproject.com/Articles/18594/File-Association-in-VB-NET)，它准确地讨论了您的要求。

来自链接：

> 当注册表设置正确并在 Windows 资源管理器中打开文件时，文件的路径将作为命令行参数传递（如果您将应用程序视为函数，那么这些就是参数）。要检索参数，请使用

`My.Application.CommandlineArgs`. 它返回一个`ReadOnlyCollection(Of String)`.
您可以使用`My.Application.CommandlineArgs(0)`来检索文件路径。

# c++ - Qt QString::toDouble() 返回整数 0

> ID：12398138
> 
> 赞同：1
> 
> 时间：2012-09-13T01:12:19.313
> 
> 标签：c++, qt, type-conversion

我正在从 xml 文件中读取数据并尝试将数据解析为双精度数据。它正在读取数据并在应用程序输出中显示适当的字符串，但不会从字符串转换为双精度。这是进行转换的代码部分。

```
if ( !(imgDur = QString ( xmlReader->readElementText() ).toDouble()) ){
        imgDur = 10;
} 
```

这将返回数字 0。我得到零错误并且代码编译。为什么这行不通？谢谢你的时间。

读取 XML 文件的整个循环

```
//Parse the XML until we reach end of it
    while(!xmlReader->atEnd() && !xmlReader->hasError()) {
            // Read next element
            QXmlStreamReader::TokenType token = xmlReader->readNext();
            //If token is just StartDocument - go to next
            if(token == QXmlStreamReader::StartDocument) {
                    continue;
            }
            //If token is StartElement - read it
            if(token == QXmlStreamReader::StartElement) {

                    if(xmlReader->name() == "time_delay") {
                        qWarning() << xmlReader->readElementText(); // OUTPUTS 15

                        if ( !(imgDur = QString (xmlReader->readElementText()).toDouble()  ) ){
                            qWarning() << "AS AN DOUBLE" << imgDur;  // OUTPUTS 0
                            imgDur = 10;
                        }

                    }

                    if(xmlReader->name() == "value") {
                        qWarning() << xmlReader->readElementText(); // OUTPUTS 8
                    }

            }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T08:54:50.087

您的代码的主要问题是这一`qWarning() << xmlReader->readElementText(); // OUTPUTS 15`行。`QXmlReader::readElementText()`将 xmlReader 指针移动到文本节点的末尾，因此`readNext()`将返回`EndElement`of`A`而不是`QXmlStreamReader::Characters`token。所以基本上`readElementText`做类似的事情（请注意，在实际实现中它要复杂得多，因为它检查默认行为，设置 QXmlStreamReader 内部数据/状态/令牌等）：

```
QString retval;
if(xmlReader->readNext() == QXmlStreamReader::Characters)
{
    retval = xmlReader->text().toString();
    xmlReader->readNext();
}
return retval; 
```

所以基本上第二个`xmlReader->readElementText();`总是返回空的QString，因为当前令牌`QXmlStreamReader::StartElement`不再是

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T01:25:19.170

首先，我们假设 imgDur 是一个浮点数。然后将您的 if 语句更改为

`QString tempText = xmlReader->readElementText();`

`if (imgDur != tempText.toDouble()) {`

有两个问题，你的条件是一个真值陈述，你冗余地将 QString 转换为 QString。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T01:44:54.843

您在评论中提到您尝试转换的字符串中包含的数字是 15。它总是会是 15 吗？如果是这样，您应该改用`QString::toInt`整数类型来存储该函数的返回值。

如果它更具动态性，则最好利用`bool*`toDouble 的参数并将代码更改为以下内容：

```
bool ok = false;
imgDur = xmlReader->readElementText().toDouble(&ok);
if (!ok) {
    imgDur = xmlReader->readElementText().toInt(&ok);
    if (!ok) {
        imgDur = 10.0;
    }
} 
```

# wordpress - 从 Simple Press 迁移到 WP 论坛服务器

> ID：12398142
> 
> 赞同：1
> 
> 时间：2012-09-13T01:12:59.640
> 
> 标签：wordpress, plugins

我目前在我的 Wordpress 安装上运行 Simple press。

使用 Simple Press 几个星期后，我不喜欢这样一个事实，即有如此多的功能限制，如果不安装插件就无法克服。为了安装插件，您必须自己编写或支付 30 美元以上才能访问支持论坛和插件库。

是否可以将我的 Simple Press 数据迁移到[WP Forum Server 插件](http://wordpress.org/extend/plugins/forum-server/)？

# git - 在远程仓库上移动标签

> ID：12398143
> 
> 赞同：1
> 
> 时间：2012-09-13T01:13:08.427
> 
> 标签：git, version-control

我在本地仓库中创建了一个标签并将其推送到远程仓库。然后我发现了一些属于该标签的额外更改。所以我提交了更改并将标签移动到我的本地仓库中。现在远程仓库上的标签是空的。如何更新远程仓库上的标签以指向它在本地仓库中所做的相同提交？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T07:08:05.923

请注意，[git1.8.2 提及](http://article.gmane.org/gmane.linux.kernel/1443021)将强制使用 --force (-f) 选项：

> " `git push $there tag v1.2.3`" 用于允许替换`v1.2.3`存储库 $there 中已经存在的标签，如果您正在推送的重写标签指向的提交是旧标签`v1.2.3`指向的提交的后代。
> 
> 发现这很容易出错，并且从这个版本开始，任何更新`refs/tags/`层次结构下现有引用的尝试都将失败，没有“ `--force`”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T01:31:16.583

`git push origin tag_name`

如果标签的变化是非快进的，添加强制选项

`git push -f origin tag_name`

# c# - 如何在 Ninject 3 中取消绑定具体的自绑定单例绑定？

> ID：12398145
> 
> 赞同：2
> 
> 时间：2012-09-13T01:13:25.297
> 
> 标签：c#, ninject

我目前正在为一个项目测试一些 IoC 框架，我希望能够使用 Ninject 3。

我遇到了一个问题，在我配置绑定到具体类型的单例之后，我似乎无法在以后有效地取消绑定服务类型。即`StandardKernel.TryGet<T>()`调用后返回非空值`StandardKernel.Unbind<T>()`。有关我的确切用法，请参见下面的代码段。

这是 Ninject 3 中的错误，还是我遗漏了什么？

作为一种解决方法，我可以简单地将具体类型重新绑定到一个常量空值。但在我回到那个位置之前，我更愿意了解我是否没有在摸索什么。

顺便说一句，如果我在单例范围内指定绑定到具体类型的接口，但对于单例范围内的自绑定具体类型，则取消绑定按预期工作。如果这不是一个错误（以及额外的业力），你能解释为什么行为会有所不同吗？

```
public class MyServiceType : IDisposable
{
    public bool IsDisposed { get; private set; }
    public void Dispose()
    {
        IsDisposed = true;
    }
}

static void Main(string[] args)
{
    var kernel = new StandardKernel();

    kernel.Bind<MyServiceType>().ToSelf().InSingletonScope();

    var instance = kernel.TryGet<MyServiceType>();
    Debug.Assert(instance != null && !instance.IsDisposed);

    // release the instance
    kernel.Release(instance);
    Debug.Assert(instance.IsDisposed);
    instance = null;

    // unbind the service
    kernel.Unbind<MyServiceType>();

    // uncomment below for workaround
    // kernel.Rebind<MyServiceType>().ToConstant((MyServiceType)null); 

    // after unbinding should no longer be able to get an instance of the service
    instance = kernel.TryGet<MyServiceType>();
    Debug.Assert(instance == null);  // <---- this is failing!
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T01:20:18.163

这是因为即使没有绑定，Ninject 也会尝试构造您的对象。如果它有一个无参数的构造函数，它将使用它，否则它将尝试使用在容器中找到的依赖项来构造它。

为了证明这一点，即使跳过 MyServiceType 的初始绑定，仍然执行 TryGet，也会得到一个实例。

或者，您可以在绑定和释放实例后尝试解析实例，并断言它们实际上是同一类的不同实例。

# linux - Unix 点命令

> ID：12398149
> 
> 赞同：1
> 
> 时间：2012-09-13T01:14:23.397
> 
> 标签：linux, unix, command

我有以下代码片段，下面是我的问题。由于我对 unix 完全陌生，我什至不确定我应该从谷歌搜索什么。

我知道 ./Path 是在我也知道的当前路径中运行特定程序。/PATH 是在另一个目录中运行程序。

但是关于 。。/小路 ？

```
if [[ -f ./dbatools.pro ]]; then
        . ./dbatools.pro  -> **what does this do ? I don’t think such a command is possible ?** 
else
        . /app/dbatools/profile/dbatools.pro
fi

echo "Started at `date`" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T03:36:24.770

dot`.`命令是[标准的 POSIX shell](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/V3_chap02.html#tag_18_18)（Bourne、Korn、Bash）表示法，用于“读取命名文件，就像它是当前脚本的一部分一样”。最大的优点是该文件可以设置环境变量和定义函数，它会影响 shell 脚本。通常，如果您将脚本作为常规命令运行（使用`./dbatools.pro`or `sh dbatools.pro`），则环境变量仅影响执行脚本的 shell，而不影响当前 shell。

测试查看`dbatools.pro`当前目录中是否有一个文件被调用（因此`./dbatools.pro`）。如果有，它使用该文件；如果没有，则使用文件`/app/dbatools/profile/dbatools.pro`. 如果它无法读取它“点”的文件，它将产生一个错误。

在 Bash 中，`source ./dbatools.pro`可以使用另一种表示法 , 来代替。它是从 C shell 借来的。

请注意，`.`（和，[内置](http://www.gnu.org/software/bash/manual/html_node/Bash-Builtins.html#index-source)[`source`](http://ss64.com/bash/source.html)Bash ）命令将在 上的目录中搜索普通文件（例如 ），但该文件不需要是可执行的 - 它只需要是可读的。`. dbatools.pro``$PATH`

# python - Django 引导按钮小部件

> ID：12398150
> 
> 赞同：1
> 
> 时间：2012-09-13T01:14:28.153
> 
> 标签：python, django, twitter-bootstrap, django-widget

有没有办法创建一个生成 twitter 引导按钮的小部件？我需要在表单中间放置一些按钮。（或不是输入的html）

尝试如下：

```
class BootstrapButtonWidget(forms.Widget):
    def render(self, value, attrs=None):
        return '<a href="#" class="btn btn-danger delete">%s</a>' % (value,)

class BootstrapButton(forms.Field):
    def __init__(self, value,  *args, **kwargs):
        if not kwargs:
            kwargs = {}
        kwargs["widget"] = BootstrapButtonWidget

        super(BootstrapButton, self).__init__(*args, **kwargs)

    def clean(self, value):
        return value 
```

但是我无法传递值​​​。他总是花费一个“价值”。

我需要渲染一个这样的按钮：

```
<button type="button" class="btn %s">%s</button> % (btn_type, btn_text) 
```

渲染：

```
<button type="button" class="btn btn-primary">Delete this</button> 
```

[http://twitter.github.com/bootstrap/base-css.html#buttons](http://twitter.github.com/bootstrap/base-css.html#buttons)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-12T22:37:27.553

我假设您的来源是为您的自定义字段引用[http://djangosnippets.org/snippets/2312/](http://djangosnippets.org/snippets/2312/)或反之亦然。我错过了使用文档，但在文件顶部它指出：

```
"""
Usage:
SubmitButtonField(label="", initial=u"Your submit button text")
""" 
```

如果您需要自定义值或样式，则必须更改传递给 BootstrapButton 字段的初始值。

# javascript - Highstocks 纪元时间与时区不匹配

> ID：12398151
> 
> 赞同：5
> 
> 时间：2012-09-13T01:14:36.100
> 
> 标签：javascript, graph, highcharts

我正在尝试使用 highstocks 库填充图表。我将纪元时间作为 x 轴的输入。我能够成功生成图表，但问题是 highstock 转换的纪元时间与我的时区不匹配。例如

我的输入纪元时间是：1347497100000

转换后的当前结果为：Thu, 13 Sep 2012 00:45:00 GMT

预期结果是：2012 年 9 月 12 日星期三 17:45:00 GMT-0700

此时区不匹配是当前显示的错误值。

我也尝试设置此属性，但没有运气：

```
global: {
    useUTC: false
}, 
```

我在太平洋时区。当我尝试做：

```
console.log(new Date) 
```

从同一个脚本，它返回我太平洋时间的时间。

你能建议如何解决这个时区的不匹配吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-13T07:51:38.400

[再次阅读global.useUTC](http://api.highcharts.com/highstock#global.useUTC) api 参考可能是个好主意

> 不适用于每个图表的全局选项。这些选项，如 lang 选项，必须使用 Highcharts.setOptions 方法设置。

```
Highcharts.setOptions({
    global: {
        useUTC: false
    }
}); 
```

这意味着全局属性并不真正适用于任何图表，`Highcharts`即使您在单个图表中设置它也会盲目地忽略该选项

```
var chart=new Highcharts.StockChart({
{
  ...
    global: {
        useUTC: false
    }
  ...
}); 
```

简而言之，`Highcharts.setOptions`在创建任何图表对象之前使用该方法显式设置全局选项
[本地/客户端时区 | Highchart & Highstock @ jsFiddle](http://jsfiddle.net/jugal/RvRSB/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T06:55:53.743

在处理日期和时间时，转换问题非常普遍。

[此处的此链接显示了乘以 1000 以获得正确版本的解决方案。](https://stackoverflow.com/questions/8648861/how-to-use-epoch-time-with-highcharts-series-data)

希望有帮助。

# c - 正则表达式如何翻译成汇编？

> ID：12398153
> 
> 赞同：1
> 
> 时间：2012-09-13T01:14:41.703
> 
> 标签：c, assembly, mips

我了解到 C 被翻译成汇编，然后汇编被翻译成机器代码。我还学会了如何将基本的 C 结构（如指针和循环）转换为 32 位 MIPS 程序集。但是我没有学习如何将 C 中的正则表达式翻译成程序集，有秘诀吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T01:17:53.120

C 不支持正则表达式。组装也不行。您必须编写一些用于模式匹配的算法代码，然后，如果它还没有在汇编/机器代码中，则将其翻译/编译成它。没有魔法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-13T01:18:37.083

几十年前，将正则表达式翻译成汇编语言似乎已经过时了。相反，如今它们通常被编译为确定性有限自动机 (DFA)，通常带有一个中间步骤作为非确定性有限自动机 (NFA)。如果您不熟悉这些术语，请参阅：

*   [http://en.wikipedia.org/wiki/Deterministic_finite_automaton](http://en.wikipedia.org/wiki/Deterministic_finite_automaton)
*   [http://en.wikipedia.org/wiki/Nondeterministic_finite_automaton](http://en.wikipedia.org/wiki/Nondeterministic_finite_automaton)

对应于正则表达式的 NFA 很容易构建；只需将正则表达式中的每个点视为一个状态，以及可以匹配并将您移动到正则表达式中的下一个点的字符集，作为从该状态到下一个状态的转换。

其他流行的正则表达式引擎，包括 PCRE，根本不编译正则表达式，而是使用回溯匹配器，这很容易编写，但内存使用非常糟糕（许多递归调用帧，如果作为实际函数实现，则会导致堆栈溢出调用）和病态糟糕的大 O 性能（可能是指数时间）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-13T01:19:19.843

通常，这取决于您如何实现正则表达式。例如，您可以：

*   使用 PCRE 或 POSIX 正则表达式之类的东西。在这种情况下，通过使用特定于您的体系结构/ABI 的调用约定进行正确调用，对该 API 的函数调用被简单地转换为机器（汇编）代码。
*   使用类似的工具`flex`。在这种情况下，该工具将生成大量 C 代码，通常以表格和状态机的形式，并且这些代码将使用编译器进行翻译。

如果你实现某种特殊的正则表达式解析方案，它就是编译器为你的代码生成的任何东西。

# jsf - Running Chat Example Primefaces

> ID：12398161
> 
> 赞同：0
> 
> 时间：2012-09-13T01:15:59.283
> 
> 标签：jsf, primefaces, websocket, chat

I'm trying to run the Chat like in the Mobile Chat Example with the sourcecode:

here: [http://code.google.com/p/primefaces/source/browse/examples/trunk/showcase/src/main/webapp/mobile/chat.xhtml](http://code.google.com/p/primefaces/source/browse/examples/trunk/showcase/src/main/webapp/mobile/chat.xhtml "chat.xhtml") [http://code.google.com/p/primefaces/source/browse/examples/trunk/showcase/src/main/java/org/primefaces/examples/view/ChatView.java?r=7770](http://code.google.com/p/primefaces/source/browse/examples/trunk/showcase/src/main/java/org/primefaces/examples/view/ChatView.java?r=7770 "ChatView.java") [https://code.google.com/p/primefaces/source/browse/examples/trunk/showcase/src/main/java/org/primefaces/examples/view/ChatUsers.java?spec=svn7780&r=7770](https://code.google.com/p/primefaces/source/browse/examples/trunk/showcase/src/main/java/org/primefaces/examples/view/ChatUsers.java?spec=svn7780&r=7770 "ChatUsers.java")

Now to my problem: The whole think deploy and run well but if i want to insert a username and click on "Login" the ajax-loader.gif come up and then nothing happens i never come to the Chat. I found out that i get this response:

Error:

```
<?xml version='1.0' encoding='UTF-8'?>
<partial-response><error><error-name>class javax.el.PropertyNotFoundException</error-name><error-message><![CDATA[/index.xhtml @46,87 value="#{chatView.username}": Target Unreachable, identifier 'chatView' resolved to null]]></error-message></error></partial-response> 
```

Where did i go wrong? please help..

BTW: I'm using Primefaces 3.4 and Glassfish 1.3.2 with enabled Websocket!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T05:08:32.043

You need to annotate the `ChatView` class with `@ManagedBean`. Strangely the class isn't already.

```
@ManagedBean
@ViewScoped
public class ChatView {
.... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-04T10:20:01.853

The problem was that I forgot to add some libraries.

**Solution:** Make a complete checkout of the repository from Primefaces and it will run like on the showcase. Somehow simply coping smaller parts of it doesn't work like expected.

```
# Non-members may check out a read-only working copy anonymously over HTTP.
svn checkout http://primefaces.googlecode.com/svn/primefaces/trunk/ primefaces-read-only 
```

# ruby-on-rails - 在 Rails 模型范围定义中使用数组函数

> ID：12398162
> 
> 赞同：0
> 
> 时间：2012-09-13T01:16:18.077
> 
> 标签：ruby-on-rails, scope

我正在尝试在 Rails 模型的范围（或 self.func_name）内使用数组函数（特别是“keep_if”和“include？”），但不知道如何使其工作。我认为这是可能的，因为“where”似乎意味着“set.where”，所以“set.keep_if”是有意义的。

我有一个文档表（或者，更确切地说，文档的元数据），其中每个文档在表中都有不同的版本，链接；doc.next_version 和 doc.prior_version。我有一个链接到文档的人员表（通过另一个表“作者”），因此 person.documents 是该人员处理的每个文档的所有版本的列表。我想获取每个人处理的文档的第一个或最后一个版本，而不是 /every/ 版本。

这是我对代码的猜测：

```
class Document < ActiveRecorrd::Base

  has_many :authors

  belongs_to :next_version, :class_name => 'Document'
  has_one :prior_version, :class_name => 'Document'
  #document.document_id is the ID of the prior version of this document

  scope :last!, lambda{ keep_if{|d| (d.next_version.nil?)||(! include?(d.next_version))}}
  # Keep a doc if it either has no next_version (and is thus the last version in 
  # the database), or it's next version isn't in this list.
end

class Person < ActiveRecord::Base
  has_many :authors
  has_many :documents, :through => :authors
end

class Author > ActiveRecord::Base
  belongs_to :person
  belongs_to :document
end

#Usage Example
documents = Person.find(id).documents.last!
published = documents.keep_if{|d| d.published}
success_rate = published.size / documents.size
# etc 
```

我尝试转换为 a `self.first!`，但这没有帮助。（我意识到如果一个人跳过了一个版本的账单，这个方法不会跳过，并且会返回那个文档的两个版本）

我正在寻找更多关于“范围”内发生的事情，以及如何做我想做的事情，即使它使用完全不同的方法。

尽管我自己从纯文本生成元数据，但我几乎可以完全控制一切——所以虽然我可能可以添加新的元数据字段，但我必须完成所有相关的工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T20:50:53.587

发生什么了：

`scopes`功能类似于查询的命名片段；您使用它们来构建查询，ActiveRecord 会懒惰地评估生成的复合查询。因此，从范围和类方法的角度来看，`Person.first.documents` *它不是*一个数组，即使从其他代码的角度来看它的工作方式也一样 -`Person.first.documents.keep_if{...}`

解决方法非常简单 - 只需提示 AREL 评估查询并将其转换为数组：

```
def self.last!
  all.keep_if{...}  
 #^^^ It's the "all" that does it
end 
```

请注意，在这种情况下，我的实际逻辑`(d.next_version.nil?)||(! all.include?(d.next_version))`不起作用，我还不确定为什么。

编辑：这与'belongs_to :next_version ...'有关`def next_version`，如果不能真正解决问题，一种变通方法可以使事情正常进行。

编辑 2：我现在要接受这个作为答案，因为它可以按照我想要的方式使用使用代码完成我想要的工作，但是 IMO/AFAIK 它不是一个非常 Rails 的解决方案 - 所以如果你有一个更好的，我会完全跳槽到那个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T02:10:29.143

ActiveRecord 已经有一个`last!`方法，您正在覆盖它。我不相信这是个好主意。相反，我认为以不同的方式表达你的逻辑会更好：

```
class Document < ActiveRecord::Base

    def self.published_documents
        keep_if do |d|
            (d.next_version.nil? || !include?(d.next_version)) && d.published
        end
    end
end 
```

这实现了您在 IMO 之后的基本逻辑。

更进一步，我想我也会将此方法移至 Person 类，因为您真的对 Person 的已发布文档感兴趣：

```
class Person < ActiveRecord::Base

    def published_documents
        documents.keep_if do |d|
            (d.next_version.nil? || !documents.include?(d.next_version)) && d.published
        end
    end
end 
```

然后你的用法变成：

```
Person.find(id).published_documents 
```

# sql - oracle查询在两个表中查找匹配项

> ID：12398163
> 
> 赞同：2
> 
> 时间：2012-09-13T01:16:30.770
> 
> 标签：sql, database, oracle

数据库中有两个表，结构类似。

-我需要 TABLE1 中的元素列表，其中 P1 与 S3 匹配，同时 P2 与 S2 匹配。

```
+            TABLE1           +        +           TABLE2            +
+---------+---------+---------+        +---------+---------+---------+
| P1      | P2      | P3      |        + S1      | S2      | S3      |
+---------+---------+---------+        +---------+---------+---------+
| A       | B       | C       |        | P       | B       | A       |
| B       | B       | C       |        | A       | G       | T       |
| Z       | K       | R       |        | T       | M       | T       |
| T       | S       | L       |        | M       | K       | Z       |
| W       | W       | W       |        | W       | W       | W       |
+---------+---------+---------+        +---------+---------+---------+ 
```

所以，结果我会得到：

```
+            RESULT           +
+---------+---------+---------+
| P1      | P2      | P3      |
+---------+---------+---------+
| A       | B       | C       |
| Z       | K       | R       |
| W       | W       | W       |
+---------+---------+---------+ 
```

问题：执行此连接、比较和匹配操作的 oracle 查询是什么。注意：不鼓励使用循环。

提前致谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T01:18:38.587

```
SELECT a.*
FROM TABLE1 a, TABLE2 b
WHERE a.P1 = b.S3 AND a.P2 = b.S2; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T01:18:45.217

您可以使用`INNER JOIN`来组合两个表。

```
SELECT  a.*
FROM    table1 a
        INNER JOIN table2 b
            ON a.P1 = b.S3 AND
               a.P2 = b.S2 
```

**[单击此处了解更多类型的联接（Oracle 文档）](http://docs.oracle.com/cd/B19306_01/server.102/b14200/queries006.htm)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T01:19:13.290

使用[`INNER JOIN`](http://docs.oracle.com/cd/B19306_01/server.102/b14200/queries006.htm)：

```
SELECT table1.*
FROM table1 INNER JOIN table2 
     ON (table1.P1 = table2.S3 AND table1.P2 = table2.S2); 
```

# php - Jquery 文件上传小部件的动态上传文件夹

> ID：12398168
> 
> 赞同：0
> 
> 时间：2012-09-13T01:17:38.300
> 
> 标签：php, jquery, json, file, upload

我的问题是关于这个 - [jQuery File Upload](http://blueimp.github.com/jQuery-File-Upload/)它很棒，除了缺乏支持文档和回答似乎最常见的问题！

我们如何在 upload.class.php 中动态定义上传文件夹？

充其量，我发现这个问题的答案是“模糊的”，所以一个明确的答案会很棒。

到目前为止，我有这个：

```
class UploadHandler
{

public $MY_PATH = "rootFolder/subFolder/anotherSubFolder";

 protected $options;
    function __construct($options=null) {

        $this->options = array( 
            'script_url' => $this->getFullUrl().'/',
            'upload_dir' => $this->MY_PATH .'/',
            'upload_url' => $this->getFullUrl().'/'.$this->MY_PATH .'/', 
```

这行得通，但是当我尝试使用`$variables`定义时问题就开始了`$MY_PATH`：

```
public $MY_PATH = $rootFolder.'/'.$subFolder.'/'$anotherSubFolder; 
```

为什么这不起作用......我只是得到错误（对于某人来说无疑是一个明显的原因！）。

那么，如何按照`$MY_PATH`我描述的方式进行定义，然后`UploadHandler`根据需要在类中使用结果以允许上传文件夹是动态的？

注意：我确定我`$vars`的值是正确的，我通过在我的测试中回显它们来检查它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-12T13:02:05.037

这种方式对我有用：

1- 在upload.class.php 更改：

```
$a = $_REQUEST["path"];

    $this->options = array(
        'script_url' => $this->getFullUrl().'/',
        'upload_dir' => dirname($_SERVER['SCRIPT_FILENAME']).'/'.$a.'/',
        'upload_url' => $this->getFullUrl().'/'.$a.'/', 
```

*这样您就可以通过请求获取目录名称*

2- 然后，您应该在三个地方放置路径变量，以便您在请求时将其发布到 upload.class.php。

a- 在表单中（默认为 id="fileupload"）放置一个名为 path 的隐藏输入

```
<input type="hidden" name="path" value="whatever_you_want_the_path" id="fileuploadpth"> 
```

b- 创建一个全局 javascript 变量

```
var mypath = "whatever_you_want_the_path" 
```

c- 添加到 Jquery File Uploader 初始化

```
$('#fileupload').fileupload({'formData' : { 'path' : mypath }}); 
```

d-在加载现有文件的js中更改get url

```
$.getJSON(this.action 
```

至

```
$.getJSON(this.action+'index.php?path='+ path 
```

e- 在 html 模板中更改删除按钮的 data-url

```
 data-url="{%=file.delete_url%} 
```

至

```
 data-url="{%=file.delete_url%}&path={%=path%}"> 
```

**PS 使用时要小心，因为此技巧可能会降低应用程序的安全性，因为目录名称存储在客户端**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T01:41:35.623

*叹息*..好吧，试试

```
class UploadHandler {

  public $MY_PATH;

  protected $options; function __construct($options=null) {
    // make sure $rootFolder or any variable is known to the constructor scope, 
    // use globals etc.
    $this->MY_PATCH = $rootFolder.'/'.$subFolder.'/'$anotherSubFolder;
    $this->options = array( 
     'script_url' => $this->getFullUrl().'/',
     'upload_dir' => $this->MY_PATH .'/',
     'upload_url' => $this->getFullUrl().'/'.$this->MY_PATH .'/',
    ....
  }
} 
```

# ajax - JSF Ajax 渲染实际上做了什么？

> ID：12398171
> 
> 赞同：0
> 
> 时间：2012-09-13T01:18:23.503
> 
> 标签：ajax, jsf

在 JSF 代码中，我看到：

```
...

<h:selectOneMenu id="clientCode" value="#{theBean.clientCodeSelection}">
  <f:selectItem itemValue="" itemLabel="Please select one" />
  <f:selectItems value="#{theBean.clientList}" />
  <f:ajax render="go"/>
</h:selectOneMenu>

...

<h:commandButton id="go" value="Go" immediate="true" >
  <f:ajax render="clientTable" event="click" listener="#{theBean.doSearch}"></f:ajax>
</h:commandButton> 
```

我可以知道`<f:ajax render="go"/>`实际上做什么吗？我最初的假设是渲染*Go button*，但我认为它不像我想的那么严格。如果我错了，请纠正我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T11:08:07.033

当ajax 请求在 webbrowser 中成功完成时，将`<f:ajax render="go">`使用相对客户端 ID 更新生成的 JSF 组件的 HTML 表示。`go`基本上，具有相对客户端 ID`go`的 JSF 组件将位于 Web 服务器的 JSF 组件树中，然后执行，然后其生成的 HTML 输出将在 ajax 响应中结束。一旦 ajax 响应在 webbrowser 中返回，该 HTML 输出将在 webbrowser 的 HTML DOM 树中更新。如果 JSF 组件可以根据提交的表单数据在每个请求的基础上生成不同的 HTML 内容，这将非常有用。

请注意，这只适用于*始终*`rendered="false"`呈现 JSF 组件的情况（即它本身或其父组件没有 a on ）。

在您的特定示例中，生成的 HTML 表示中基本上没有任何内容可以根据每个请求进行更改。因此，`<f:ajax render="go">`在这种特定情况下，这似乎完全没用。例如，如果您有第二个下拉列表，其可用项目列表取决于当前下拉列表的选定项目，那么在 中引用它是有意义的`<f:ajax render>`，以便在您更改当前下拉列表时使用新项目更新它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T05:23:18.357

在这里它什么也不做，但如果您想在某些渲染条件下显示 commandButton，那么它将被使用...

# winapi - 在 Windows 7 中将桌面扩展到 2 个显示器

> ID：12398174
> 
> 赞同：0
> 
> 时间：2012-09-13T01:18:37.577
> 
> 标签：winapi, windows-7

我正在尝试使用 ChangeDisplaySettingsEx 函数将桌面拉伸到两台显示器。我希望桌面分辨率为 3840x1080 而不是 1920x1080 分辨率。我尝试了以下方法：

```
 POINTL posPrimary={0};
 posPrimary.x=0
 posPrimary.y=0;

 DEVMODE mode_primary = {0};
 mode_primary.dmSize = sizeof(mode_primary);
 mode_primary.dmFields = DM_POSITION;
 mode_primary.dmPosition = posPrimary;
 mode_primary.dmPelsWidth = 3840;
 mode_primary.dmPelsHeight = 1080;

LONG status = ChangeDisplaySettingsEx(
    nameofMonitor,
    &mode_primary,
    nullptr, // reserved
   CDS_SET_PRIMARY | CDS_UPDATEREGISTRY,
    nullptr // no video parameter
);
  if (DISP_CHANGE_SUCCESSFUL != status) {
    printf("ChangeDisplaySettingsEx returned %d", status);
    return -__LINE__;
} 
```

我还尝试了 SetDisplayConfig 函数：

```
SetDisplayConfig(0,NULL,0,NULL,SDC_TOPOLOGY_CLONE|SDC_APPLY); 
```

SDC_TOPOLOGY_CLONE 只是克隆监视器，而 SDC_TOPOLOGY_EXTEND 将桌面扩展到第二个显示器。

任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T02:58:21.423

Windows 7 不支持跨多个显示器“拉伸”桌面。您可以将桌面扩展到多台显示器，但您始终必须选择哪个显示器作为主显示器。任务栏出现在主显示器上，无法将其延伸到其他显示器。

Windows 8 具有更好的多显示器支持，并允许在每个显示器上都有一个任务栏。您可以将相同的任务栏配置为在所有屏幕上，或在单个任务栏上配置该屏幕上的窗口图标。AFAIK，你仍然不能在所有显示器上都有一个任务栏。

**更新**

我对此进行了更多思考，突然想到，视频卡驱动程序**可以**将多个监视器作为具有组合分辨率的单个设备呈现给 Windows。此配置将是视频卡供应商专有的，如果确实存在，您必须使用他们的 API 来访问该功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T00:38:37.590

The other option is to use a device like SAPPHIRE Vid-2X or Matrox 2H2Go. These will include 3840x1080 in their EDID so you can use SetDisplayConfig to setup 1920x1080 and you will get cloned diwplays or setup 3840x1080 to get one desktop stretched across both displays. This way you are graphics card/vendor agnostic. Note that you need DL-DVI or DP to make this work.

# jquery - 编写自定义 ddSlick KnockoutJS bindingHandler

> ID：12398184
> 
> 赞同：0
> 
> 时间：2012-09-13T01:20:09.497
> 
> 标签：jquery, knockout.js, knockout-mapping-plugin

我似乎无法让[ddSlick](http://designwithpc.com/Plugins/ddSlick)（基于图像的下拉列表 jQuery 插件）的自定义绑定处理程序正常工作。

我总是可以让它绑定到静态数据上，但是由于某种原因，一旦 ddSlick 被初始化，KO 就不会调用活页夹的更新方法。太疯狂了！我实际上可以从自定义活页夹中删除 $(element).ddslick() 调用，并且将再次调用更新方法！

请随时使用此链接（更易于调试）[http://mjf.me/Dev/ddSlickBinder.html测试我的代码](http://mjf.me/Dev/ddSlickBinder.html)

或者这个 JS Fiddle [http://jsfiddle.net/farina/JSTUA/1/](http://jsfiddle.net/farina/JSTUA/1/)

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T04:56:05.560

[http://jsfiddle.net/amtiskaw/nEVsP/](http://jsfiddle.net/amtiskaw/nEVsP/)

这里实际上有几个问题。首先，ddslick 插件替换了它被调用的元素。Knockout 检测 div 何时被删除并清理其注册的绑定，这就是为什么 slickIt 更新不会被多次调用的原因。我通过添加一个子 div 并在其上调用插件解决了这个问题。

第二个是 ddslick 将忽略随后在同一元素上对其进行初始化的尝试。我已经通过事先调用“destroy”解决了这个问题，以便删除任何预先存在的 ddslick 实例。

# java - Java String.charAt() 无法正常工作

> ID：12398185
> 
> 赞同：0
> 
> 时间：2012-09-13T01:20:14.013
> 
> 标签：java, string, char

我正在尝试从文本文件中读取网格以从中构建图形。

目标节点由 a 表示，`X`而其他节点由 a 表示`.`。

我也有行数和列数。所以，我基本上只是试图读取每一行的下一行，然后通过传递列位置的迭代器来获取每个列位置的字符，并根据它检查它`X`是否应该标记为目标节点。

```
goalGraph = new int[rows][cols];
for (int i = 0; i < rows; i++) {
    String readLine = in.nextLine();
    System.out.println(readLine);
    for (int ii = 0; ii < cols; ii++) {
        char c = readLine.charAt(ii);
        if (c == 'x') {
            goalGraph[i][ii] = 1;
        }
        else {
            goalGraph[i][ii] = 0;
            System.out.print(".");
        }
    }
} 
```

但我不断收到`arrayoutofbounds`错误`index (0)`。

另一个奇怪的地方是，`readLine`在执行较低的代码时它并没有打印，而是将其取出，看起来像：

```
goalGraph = new int[rows][cols];
for (int i = 0; i < rows; i++) {
    String readLine = in.nextLine();
    System.out.println(readLine);
    /**
    for (int ii = 0; ii < cols; ii++) {
        char c = readLine.charAt(ii);
        if (c == 'x') {
            goalGraph[i][ii] = 1;
        }
        else {
            goalGraph[i][ii] = 0;
            System.out.print(".");
        }
    }
    **/
} 
```

结果，正在读取的行被打印出来，我得到了正确的字符串：

```
X.....

...X..

......

.X.... 
```

谁能指出我正确的方向？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T01:46:57.053

您显示的代码没有任何明显错误。我们需要看到更多。可能正在发生的事情是您的输入中实际上没有`rows`数据行。`rows`又是如何`cols`产生的？什么类型`in`，它是如何初始化的？arrayoutofbounds 错误发生在哪一行？

# cakephp - CakePHP 插件模型关联不起作用

> ID：12398186
> 
> 赞同：2
> 
> 时间：2012-09-13T01:20:14.130
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1, cakephp-2.2

场景：我有一个 CakePHP 应用程序，带有一个名为 Fruit 的插件。Fruit Plugin 包含一个到 TagsController.php 的路由，带有一个指向 index.ctp 的 index 动作

标签模型有一个关联。用户身份

问题：即使我在 Model->find('all'...

标签控制器

```
public function index($ajax = false) {
    $this->Tag->recursive = 2;
    $tags = $this->Tag->find('all', array('conditions' => array('User.id' => $this->Auth->user('id')), 'joins'=>array(
    array(
         'table'=>'users',
         'alias'=>'User',             
         'conditions'=>array(
              'User.id=Tag.user_id'
         )
    ),
    )));

    print_r($tags);

    $this->set('tags', $this->paginate());

    if($ajax == 'ajax')
    {
        $this->layout = 'ajax';
    }
} 
```

标签 模型

```
App::uses('FruitAppModel', 'Fruit.Model');
class Tag extends FruitAppModel {

public $name = 'Tag';
public $uses = array('User');
public $belongsTo = array(
    'User' => array(

        'className' => 'User',
        'foreignKey' => 'user_id',
        'conditions' => '',
        'fields' => '',
        'order' => ''
    )
); 
```

用户模型

```
App::uses('AppModel', 'Model');

class User extends AppModel {

public $name = 'User';
public $displayField = 'username';

public $hasMany = array(        
    'Tag' => array(
        'className' => 'Fruit.Tag',
        'foreignKey' => 'tag_id',
        'dependent' => false,
        'conditions' => '',
        'fields' => '',
        'order' => '',
        'limit' => '',
        'offset' => '',
        'exclusive' => '',
        'finderQuery' => '',
        'counterQuery' => ''
    ),

); 
```

我已经在这个问题上停留了几个小时，所以非常感谢任何关于我可以尝试的新想法。我已经很好地梳理了stackoverflow，我只是在兜圈子，我需要一双新的眼睛。任何想法都会很棒。

谢谢！

*   杰夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T06:13:40.637

我认为您已经尝试了很多并使其变得更加复杂，请尝试使用此代码，它将为您提供所需的输出。

在用户模型中：

```
public $hasMany = array(        
'Tag' => array(
    'className' => 'Fruit.Tag',
    'foreignKey' => 'user_id',
    'dependent' => false,
    'conditions' => '',
    'fields' => '',
    'order' => '',
    'limit' => '',
    'offset' => '',
    'exclusive' => '',
    'finderQuery' => '',
    'counterQuery' => ''
), 
```

在控制器中：-

```
$this->Tag->recursive = 1;

 $this->paginate = array(
    'conditions' => array('Tag.user_id' => $this->Auth->user('id'))
);
$data = $this->paginate('Tag');
pr($data);
$this->set(compact('data')); 
```

# jquery - CSS & jQuery 没有正确更新？

> ID：12398191
> 
> 赞同：0
> 
> 时间：2012-09-13T01:20:42.610
> 
> 标签：jquery, html, css

我正在尝试使用 div 创建一个菜单，但由于某种原因，我无法达到我想要的效果。我想在悬停时更改菜单项的背景，但还要将菜单上的另一个 div 更改为另一个。到目前为止，我可以让悬停工作和选择，但是一旦我选择了另一个元素，除非我先将鼠标悬停在它上面，否则所选元素不会改变它的样式。

我的 JS：

```
$(document).ready(function () {

    $(".collapsebar").click(function () {
        $("#body").toggleClass("use-appmenu");
    });

    $(".appmenu-item").click(function () {
        $(".appmenu-accent-selected").removeClass("appmenu-accent-selected").addClass("appmenu-accent");
        $(this).find(".appmenu-accent").removeClass("appmenu-accent").addClass("appmenu-accent-selected");
    });

    $(".appmenu-item").hover(function () {
        $(this).addClass("appmenu-item-hover");
        $(this).find(".appmenu-accent").removeClass("appmenu-accent").addClass("appmenu-item-item1-accent");
    },
    function () {
        $(this).removeClass("appmenu-item-hover");
        $(this).find(".appmenu-item-item1-accent").removeClass("appmenu-item-item1-accent").addClass("appmenu-accent");
    });
}); 
```

我的 HTML：

```
<div class="appmenu-item appmenu-item-item1">
    <div class="appmenu-accent float-left"></div>
    <div class="appmenu-text float-left">Item 1</div>
    <div style="clear: both;"></div>
</div>
<div class="appmenu-item appmenu-item-item2">
    <div class="appmenu-accent float-left"></div>
    <div class="appmenu-text float-left">Item 2</div>
    <div style="clear: both;"></div>
</div>
<div class="appmenu-item appmenu-item-item3">
    <div class="appmenu-accent float-left"></div>
    <div class="appmenu-text float-left">Item 3</div>
    <div style="clear: both;"></div>
</div>
<div class="appmenu-item appmenu-item-item4">
    <div class="appmenu-accent float-left"></div>
    <div class="appmenu-text float-left">Item 4</div>
    <div style="clear: both;"></div>
</div>
<div class="appmenu-item appmenu-item-item5">
    <div class="appmenu-accent float-left"></div>
    <div class="appmenu-text float-left">Item 5</div>
    <div style="clear: both;"></div>
</div>
<div class="appmenu-item appmenu-item-item6">
    <div class="appmenu-accent float-left"></div>
    <div class="appmenu-text float-left">Item 6</div>
    <div style="clear: both;"></div>
</div> 
```

我的 CSS：

```
.appmenu-item
{
    cursor: pointer;
}

div.appmenu-item-item1-accent
{
    width: 4px;
    height: 40px;
    background-color: #FF0000;
}

div.appmenu-accent
{
    width: 4px;
    height: 40px;
    background-color: #F26D47;
} 
```

Essentially I have a rectangle with text and a color accent on the left when not selected or hovered on the rectangle is just grey if hovered on the accent changes color and when selected that item stays accented with that color when another item is selected the previously selected项目只是灰色，新项目有颜色口音。我希望这是有道理的。任何帮助将不胜感激。

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T02:22:22.497

click 处理程序中的这一行不起作用的主要原因有两个：

```
$(this).find(".appmenu-accent").removeClass("appmenu-accent")
                               .addClass("appmenu-accent-selected"); 
```

1.  您添加的类`appmenu-accent-selected`不会出现在您的 CSS 中。
2.  `$(this).find(".appmenu-accent")`没有找到任何元素，因为在您的`.hover()`处理程序中您实际上*删除*了`appmenu-accent`该类（显然您单击的项目是您悬停的项目）。

所以很明显你可以通过将类添加到你的 CSS 来修复第 (1) 点。我对修复点 (2) 的建议是永远不要删除`appmenu-accent`该类，但要确保它出现在样式表中的`appmenu-accent-selected`和`appmenu-item-item1-accent`类之前，以便它的优先级低于它们。然后你可以稍微简化一下代码：

```
$(".appmenu-item").click(function () {
    $(".appmenu-accent-selected").removeClass("appmenu-accent-selected");
    $(this).find(".appmenu-accent").addClass("appmenu-accent-selected");
});

$(".appmenu-item").hover(function () {
    $(this).addClass("appmenu-item-hover");
    $(this).find(".appmenu-accent").addClass("appmenu-item-item1-accent");
},
function () {
    $(this).removeClass("appmenu-item-hover");
    $(this).find(".appmenu-item-item1-accent").removeClass("appmenu-item-item1-accent");
}); 
```

演示：http: [//jsfiddle.net/NVa3d/1/](http://jsfiddle.net/NVa3d/1/)

# ruby-on-rails - 没有这样的文件或目录：rails 控制器中的 open-uri

> ID：12398193
> 
> 赞同：0
> 
> 时间：2012-09-13T01:21:12.897
> 
> 标签：ruby-on-rails, open-uri

我正在尝试在 Rails 中使用 open-uri gem 的 open 方法。

当我在独立的 Ruby 应用程序中尝试它时，我只需要在文件顶部使用它，一切正常。但现在我希望它在 Rails 应用程序中使用它的控制器。将 require 放在控制器之上是否可取？

控制器代码：

```
def search
  if params.has_key? :q
    params[:q] =~ /\?v=(.*?)&/
    xmlfeed = Nokogiri::XML(open("http://gdata.youtube.com/feeds/api/videos?q=#{$1}"))
    if xmlfeed.at_xpath("//openSearch:totalResults").content.to_i == 1
      flash[:notification] = "Video #{xmlfeed} found"
      #save video id to database
      redirect_to root_url
    else
      flash[:error] = "Video #{xmlfeed} not found"
      redirect_to root_url
    end
  else
    flash[:error] = "You didn't insert video URL."
    redirect_to root_url
  end
end 
```

错误：

> 没有这样的文件或目录 - [http://gdata.youtube.com/feeds/api/videos?q=cSnkWzZ7ZAA](http://gdata.youtube.com/feeds/api/videos?q=cSnkWzZ7ZAA)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T15:14:47.863

你应该为这种东西做一个模型。

但是直接回答你的问题。将它放在控制器顶部或在您需要它的操作中时，您不会真正感受到任何区别。

也许高强度应用程序在基准测试时可能会注意到它，但我还没有看到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T08:34:21.743

我认为更好的做法是创建一个用于获取 youtube 提要的模型，并将所有获取视频并解析结果的代码放在那里 - 控制器应该尽可能薄。

# javascript - 在 Express 3 中跨 Jade 模板块传递变量

> ID：12398194
> 
> 赞同：1
> 
> 时间：2012-09-13T01:21:26.487
> 
> 标签：javascript, node.js, express, pug

我正在使用 Jade 模板引擎运行 Express 3.0。我正在尝试将变量从模板页面传递到主布局页面。像这样：

## layout.jade（片段）：

```
!!! 5
html(lang='en') 
    head 
        meta(charset='utf-8')
        title= locals.title

        - if (typeof(stylesheets) !== 'undefined')
            each stylesheet in stylesheets
                link(rel='stylesheet', href='/stylesheet/#{stylesheet}.css')

    body
        block body 
```

## 着陆.jade（片段）：

```
stylesheets = ["landing"]
extends layout

block body
    h1 Test 1234 
```

生成的代码不包含额外的样式表标签。我尝试`- var stylehseets...`重命名“样式表”，担心它可能是一个关键字。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T04:38:11.560

为此，请使用[块附加](https://github.com/visionmedia/jade#a12)功能。直接来自文档是一个与您正在尝试做的完全一样的示例。

布局.jade

* * *

```
html
  head
    block head
      link(rel='stylesheet', href='/css/layout.css')
    body
      block body 
```

登陆.jade

* * *

```
extends layout

block append head
  link(rel='stylesheet', href='/css/landing.css')
block body
  h1 Test 1234 
```

# java - JAVA循环并为条件内的每个值生成输出

> ID：12398197
> 
> 赞同：0
> 
> 时间：2012-09-13T01:22:04.817
> 
> 标签：java

我的范围从最小值到最大值。我想通过计算这些值中的每一个来生成一组信息。我想通过打印输出这些信息。

给定一个循环一次只能输出 1 个范围值的信息，如何生成此输出？

编程经验——绝对的初学者。

代码如下： 基本上，如果用户输入 1，我会输出 min2 的所有值的信息。否则，我只输出 min2 的集合及其 probB 为 1/2 的信息。另外，我可以只使用 min1（来自用户输入）而不将其分配给 min2 吗？

```
int prompt = Integer.parseInt(input);   // user input
int min2 = 0;
double probB = 0;
for (min2 = min1; min2 < max1; min2++) // for loop
{
  if (prompt==1){
    int R = 0;
    double Rlow = 0;
    double Rhigh = 0;
    R = (int) (Math.sqrt(2) + 1)*min2;
    Rlow = (Math.sqrt(2)+1)*min2+ 1;
    Rhigh = (Math.sqrt(2)+1)*min2;
    System.out.println(min2);
    System.out.print(""+Rlow+""+Rhigh);
    System.out.println(R);
    probB = (R/R+min2)*(R-1/R+min2-1);
    System.out.println(probB);
  }
  else {
    int R = 0;
    double Rlow = 0;
    double Rhigh = 0;
    R = (int) (Math.sqrt(2) + 1)*min2;
    Rlow = (Math.sqrt(2)+1)*min2+ 1;
    Rhigh = (Math.sqrt(2)+1)*min2;
    probB = (R/R+min2)*(R-1/R+min2-1);

    if (probB == 1/2){
      System.out.println(min2);
      System.out.println(""+Rlow+""+Rhigh);
      System.out.println(R);
      System.out.println(probB);
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T01:33:18.397

代替

```
 if (probB == 1/2){ 
```

利用

```
 if (probB == 1.0d/2.0d){ 
```

表达式`1/2`计算为整数，其值为零。更好的是：

```
 if (probB == 0.5d){ 
```

但是请注意，如果在计算`probB`结果时有任何舍入，即使您期望它最终也可能不会恰好是 0.5。您可以构造最终结果“应该”为 0.5 但实际结果非常接近但不*完全是*0.5 的表达式，因为浮点表示不准确。您最好的选择是执行以下操作：

```
 if (Math.abs(probB-0.5d) <1.0e-10d) 
```

即接近 10^10 的一部分

浮点计算非常有用，但由于它们不是精确的表示，它们带有一些陷阱。在十进制中，有一整套有理数不能精确表达，比如1/3、1/7等。可以通过扩展位数（0.33333333...或0.142857142857142...）任意接近但你不能用十进制写出*精确*的表示。同样的事情发生在浮点数中（对于一组不同的数字），但是 FP 有一个固定的长度，所以像 0.1 这样的数字不能在 FP 中精确地表示。它很接近，但不准确。您必须始终在比较中考虑到这种可能性。

# jquery - jQuery可排序？

> ID：12398198
> 
> 赞同：0
> 
> 时间：2012-09-13T01:22:25.170
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

所以我想知道为什么如果我有一个嵌套列表，例如

```
<ul id="categories">
  <li> <span class="categoriesSort">[Move]</span>Category
    <ul id="tasks">
      <li><span class="handle">[Move]</span>Task</li>
      <li><span class="handle">[Move]</span>Task</li>
    </ul>
  </li>
  <li> <span class="categoriesHandle">[Move]</span>Category
    <ul id="tasks">
      <li><span class="handle">[Move]</span>Task</li>
      <li><span class="handle">[Move]</span>Task</li>
    </ul>
  </li>
</ul> 
```

第二个类别必须在顶部才能使其任务可编辑.....我可以移动这两个类别。但必须在上面。现在，如果我将第二个类别移动到列表顶部并编辑其任务，然后我可以将其拖到底部并继续编辑任务列表，但如果我刷新页面，则这些任务不再可编辑。

**代码**

```
 jQuery(function() {
    return $('#categories').sortable({
      axis: 'y',
      handle: '.categoriesSort',
      update: function() {
        return $.post($(this).data('update-url'), $(this).sortable('serialize'));
      }
    });
  });

  jQuery(function() {
    return $('#tasks').sortable({
      axis: 'y',
      handle: '.handle',
      update: function() {
        return $.post($(this).data('update-url'), $(this).sortable('serialize'));
      }
    });
  }); 
```

有什么想法吗？- ajax 请求工作正常。除非第二个类别位于顶部，否则我无法对其任务进行排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:34:54.483

`UL`您的问题是因为您正在重用#tasks 的 ID 值。

您不能在文档中复制 ID。[http://www.w3.org/TR/html401/struct/global.html#h-7.5.2](http://www.w3.org/TR/html401/struct/global.html#h-7.5.2)

您看到的原因之一：js 和 css 只会评估它找到的第一个具有该 ID 值的元素，而不是全部。这就是课程的用途。

[http://jsfiddle.net/rlemon/xYGsA/](http://jsfiddle.net/rlemon/xYGsA/)这是一个将 ID 更改为类的示例。

# linker - 移至 iOS6 时，几乎所有外部包都出现此链接器错误

> ID：12398201
> 
> 赞同：5
> 
> 时间：2012-09-13T01:22:44.817
> 
> 标签：linker, ios6, armv7

“文件是为存档而构建的，它不是被链接的架构（armv7s）”

我需要等待人们发布新的二进制文件还是我有出路，
我为 GoogleAnalytics Restkit 得到了这个......

编辑：Restkit 的问题通过他们最新的提交解决了，只需从 github 中提取，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T01:57:52.463

是的，他们必须发布为 armv7s 架构编译的二进制文件，以支持新的 iPhone 5 A6 处理器。同时，您可以暂时仅针对 armv7 进行编译，以便在当前设备上继续在 iOS 6 上进行开发，直到其他库更新为止。

*   转到目标 -> 构建设置 -> 架构
*   选择“其他...”
*   添加“armv7”
*   删除 $(ARCHS_STANDARD_32_BIT)
*   完毕
*   清洁和建造

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T02:18:16.000

编辑：解决了 Restkit 的问题，查看来自 github 的最新提交：git://github.com/RestKit/RestKit.git

编辑：从 1.5.1 版开始，Google Analytics 的问题也已解决，只需下载新版本即可。

只是不要忘记删除旧的二进制文件，然后清理然后构建。

对于你拥有源代码的“RestKit”之类的东西，如果你单独清理它们然后构建（确保架构包含 Armv7s）它工作得很好，你会得到你需要的二进制文件，然后正确链接到你的应用程序。

由于我无法理解的原因，当我将目标从 iOS 设备更改为 iPhone 6.0 模拟器并进行清理然后构建时，我也可以链接到 Google Analytics，

仍然为“iOS 设备”（不是模拟器）构建不起作用，我收到链接器错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T12:19:29.773

关于此事的合理建议来自：[http ://wanderingcoder.net/2012/09/16/no-armv7s-til-tested/](http://wanderingcoder.net/2012/09/16/no-armv7s-til-tested/)

基本上：在构建设置中从架构中删除 armv7，直到您可以使用设备（我想在几天内）并且人们（例如 Google 的 Google Analytics 问题）开始发布二进制文件，不要发布被黑客入侵的、未经测试的代码。

# javascript - 日期时间在 FIREBUG 中为 getDateFromFormat 函数返回 0

> ID：12398203
> 
> 赞同：1
> 
> 时间：2012-09-13T01:22:51.087
> 
> 标签：javascript, date

```
var startDate = getDateFromFormat("27/09/2012 12:00 AM", "dd/mm/yy hh:mm tt"); 
```

`startDate`当我应该以`DateTime`上面指定的格式 获取时，上面的代码在 FireBug 中设置为 0。

日期时间格式无法更改。
你能告诉我我能做些什么来获得指定的日期时间吗？

# mysql - 重置根 MySQL 4.1.22 密码

> ID：12398205
> 
> 赞同：-1
> 
> 时间：2012-09-13T01:23:01.993
> 
> 标签：mysql, passwords, root

我正在与遇到 MySQL 连接问题并且正在运行 MySQL 4.1.22 的人一起工作。root 密码似乎已丢失或更改，我很难正确更改它。这是我尝试过的：

1.  添加`skip-grant-tables`到他们的 my.cnf
2.  重新启动 MySQL
3.  成功登录MySQL
4.  运行以下命令：

    mysql>使用mysql；
    数据库更改
    mysql> update user set password=PASSWORD("thepassword") where User='root';
    查询正常，2 行受影响（0.03 秒）
    匹配行：2 更改：2 警告：0

    mysql> 刷新权限；
    查询正常，0 行受影响（0.00 秒）

5.  `skip-grant-tables`从 my.cnf 中删除并重新启动 MySQL 。

但是，这似乎并没有解决问题，并且仍然阻止以 root 身份使用正确的密码访问 MySQL。

有人有想法么？我对 MySQL 4 不太了解，所以我可能在这里做错了，但从我读过的内容来看，应该可以。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T01:35:42.120

您是否检查过“主机”的值？换句话说，您是否尝试从不允许的主机以 root 身份登录？

# iphone - UIImagePickerController 有时不会初始化相机视图

> ID：12398206
> 
> 赞同：5
> 
> 时间：2012-09-13T01:23:02.500
> 
> 标签：iphone, objective-c, ios, cocoa-touch, uiimagepickercontroller

当我实例化并呈现一个 UIImagePickerController 时，有时视频源显示最多需要 5 秒，并且只会出现黑屏。我确实从不同的视图多次实例化 UIImagePickerController。这个问题的根源可能是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T00:25:55.820

UI 的延迟通常与未在主线程上运行的代码有关。只有主线程可以更改 UI，因此如果您的代码碰巧在其他后台线程上运行，它将有几秒钟的延迟。您可以保证一段代码将在主线程上运行：

```
dispatch_async(dispatch_get_main_queue(), ^{
    // Your code
}); 
```

我在这里回答了一个类似的问题：

[dismissViewControllerAnimated:completion: 有几秒钟的延迟](https://stackoverflow.com/questions/14341739/dismissviewcontrolleranimatedcompletion-has-a-couple-second-delay/14344533#14344533)

# batch-file - 使用批处理文件在主目录外运行带有 .exe 的程序

> ID：12398208
> 
> 赞同：0
> 
> 时间：2012-09-13T01:23:11.773
> 
> 标签：batch-file, cmd, exe

我想知道是否可以使用批处理文件来运行 .exe，例如主目录之外的游戏。.exe 将位于与它关联的文件完全不同的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T01:25:01.930

`start /B /WAIT /D <WorkingDir> <ExePath> <Parameters>`

[http://asawicki.info/news_1501_how_to_run_windows_command_with_given_working_directory.html](http://asawicki.info/news_1501_how_to_run_windows_command_with_given_working_directory.html)

或者，如果您不需要使用批处理文件，则创建快捷方式并从其属性设置工作目录也可以

# c# - 尝试使用 . 调用必填

> ID：12398210
> 
> 赞同：0
> 
> 时间：2012-09-13T01:24:00.043
> 
> 标签：c#, .net, multithreading

我在这里做错了什么？

我的计划是从不同的线程更改标签文本属性，而不会出现“跨线程操作无效”异常。

```
 private void button1_Click(object sender, EventArgs e)
    {
        Thread thread1 = new Thread(new ThreadStart(ChangeTime));
        thread1.Start();
    }

    delegate void SetTimeDelegate();

    private void ChangeTime()
    {
        while (true)
        {
            if (lbl1.InvokeRequired)
            {
                SetTimeDelegate setTime = new SetTimeDelegate(ChangeTime);
                lbl1.Invoke(setTime);

            }
            else
            {
                lbl1.Text = DateTime.Now.ToString("yyyy-MM-dd hh:mm:ss tt");
                Thread.Sleep(1000);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T01:51:45.303

要从不同的线程更新 UI 控件，您需要调用`BeginInvoke`or`Invoke`方法。您可以使用特定控件的方法或表单的方法。

您的原始代码具有无限递归。除了您的委托调用相同的方法外，您正在正确调用。创建一个单独的方法来随时间更新标签，并让委托调用该新方法。

```
private bool _IsShuttingDown = false;

private void ChangeTime()
{
   while (!_IsShuttingDown)
   {
      if (lbl1.InvokeRequired)
      {
         SetTimeDelegate setTime = new SetTimeDelegate(UpdateTimeLabel);
         lbl1.Invoke(setTime);
         Thread.Sleep(1000);
      }
      else
      {
         UpdateTimeLabel();
         Thread.Sleep(1000);
      }
   }
}

private void UpdateTimeLabel()
{
   lbl1.Text = DateTime.Now.ToString("yyyy-MM-dd hh:mm:ss tt");
}

protected override void OnClosing(CancelEventArgs e)
{
   _IsShuttingDown = true;
   base.OnClosing(e);
} 
```

我还在表单上添加了一个字段，以在表单关闭或发生奇怪的事情时退出循环。

我的原始代码：

```
if (lbl1.InvokeRequired)
{
    lbl1.Invoke((Action)(() => lbl1.Text = DateTime.Now.ToString("yyyy-MM-dd hh:mm:ss tt")));
    Thread.Sleep(1000);
} 
```

# mysql - MySql中的多对多关系中不希望的删除

> ID：12398214
> 
> 赞同：1
> 
> 时间：2012-09-13T01:24:50.823
> 
> 标签：mysql, hibernate, many-to-many, cascading-deletes

[这里](https://stackoverflow.com/questions/2914936/mysql-foreign-key-constraints-cascade-delete/2917374#2917374)有一个类似的问题，但没有帮助

我之间有一个经典的多对多关系`Organisme`| `Organisme_groupe`| `Groupe`.

我想`Organisme`在删除时保留，`Groupe`反之亦然。实际上，如果我删除 Organisme，则附加的 Groupe 也会被删除。

我有点困惑，因为据我了解，级联动作不会比子表（这里是中间表）更远。

有机体

```
 CREATE TABLE IF NOT EXISTS `organisme` (
  `ORGANISME_ID` int(10) NOT NULL PRIMARY KEY AUTO_INCREMENT,  
  `TYPE_ORGANISME` varchar(128) NOT NULL DEFAULT '',
  `NAME` varchar(80) DEFAULT ''  
 ) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ; 
```

集团

```
CREATE TABLE IF NOT EXISTS `groupe` (
  `GROUPE_ID` int(10) NOT NULL AUTO_INCREMENT PRIMARY KEY, 
  `NAME_GROUPE` varchar(50) NOT NULL DEFAULT ''  
) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ; 
```

有机体组

```
 CREATE TABLE IF NOT EXISTS  `organisme_groupe`(
      `ORGANISME_ID` int(10) NOT NULL,
      `GROUPE_ID` int(10) NOT NULL,
       PRIMARY KEY (ORGANISME_ID, GROUPE_ID)
    )ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ; 
```

约束

```
ALTER TABLE `organisme_groupe`
  ADD CONSTRAINT `FK_organisme_groupe_1` FOREIGN KEY (`ORGANISME_ID`) REFERENCES `organisme` (`ORGANISME_ID`)  ON DELETE CASCADE ON UPDATE CASCADE,
  ADD CONSTRAINT `FK_organisme_groupe_2` FOREIGN KEY (`GROUPE_ID`) REFERENCES `groupe` (`GROUPE_ID`)  ON DELETE CASCADE ON UPDATE CASCADE; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T14:58:05.423

MySql 映射是正确的，问题是我在 Hibernate 模型中添加了 Cascading 注释，这似乎覆盖了 MySQL 约束

# javascript - Javascript 范围和新数组（）

> ID：12398216
> 
> 赞同：1
> 
> 时间：2012-09-13T01:25:00.097
> 
> 标签：javascript, json

我知道我在我的 javascript 代码中违反了范围规则，而且我很确定我知道出了什么问题。我只是不明白导致我做错的规则或如何解决它。

我正在创建一个具有照片库的应用程序。系统一次显示 9 张照片。当用户想看新照片时，他可以点击屏幕右侧的箭头。此操作向服务器查询更多照片，这些照片随后以 json 列表的形式返回。如果用户点击屏幕左侧的箭头，他可以查看以前看过的照片。出于这个原因，缓存所有照片 URL 客户端是有意义的。

这个缓存是在一个名为 photoData. photoData 是一个二维数组，其中包含出现特定照片的照片集（基本上是用户在到达该照片之前单击右箭头的次数）以及该集中出现的所有照片 URL。我遇到了一个问题，照片将在我的 GetNewPhotos() 函数中正确填充 photoData，但在函数超出范围后它们会离开数组。

在我发布我的代码之前，让我说欢迎任何批评。我 2 天前开始使用 javascript，但对它并不满意。幸运的是，jQuery 完成了大部分工作。

这是我的代码：

```
var photoData = new Array();
var currentPhotoSet = 1;
var maxPhotoSet = 1;

//I originally tried using a closure to avoid global variables and it wasn't working properly, but this is still lingering here.
(function() 
{
    $(document).ready(function()
    {
        //Irrelevant functions removed for clarity's sake
        GetNewPhotos();
    });
})();

function GetNewPhotos()
{
    $("#right-arrow").click(function(event) 
    {
        currentPhotoSet++
        if (currentPhotoSet <= maxPhotoSet)
        {
          // Load photos from cache
        }
        else
        {
            $.ajax({
                 type: "POST",
                 url: "/match/",
                 data: {"arrow" : "right", "currentPhotoSet" : currentPhotoSet},
                 dataType: "json",
                 success: function(jsonObject) 
                 { 
                    photoData[currentPhotoSet] = new Array();
                    photoData[currentPhotoSet] = jsonObject;
                 }
            });
        }
        SwapOnscreenPhotos(currentPhotoSet)
    });
}

function SwapOnscreenPhotos(currentPhotoSet)
{
    $("#photo-list img").each(function(index) 
    { 
        $(this).attr("src", photoData[currentPhotoSet][index+1]); 
    }); 
} 
```

所以新的 url 在执行 AJAX 查询后出现在 photoData 中，但是当我们到达 SwapOnscreenPhotos 时，它们已经消失了，添加的数组不再出现在 photoData 中。我认为这与这一行有关 photoData[currentPhotoSet] = new Array();

在这个范围内声明数组是否意味着当我离开这个函数时它会超出范围？这很奇怪，因为该数据属于 photoData 全局变量。如果我确实需要在这个函数之外声明新数组，我该怎么做呢？我无法在编译时知道 AJAX 请求将被调用多少次。

作为旁注，如果有人对我决定渲染 HTML 客户端而不是服务器端的决定发表评论，我很想听听。我在只发回 JSON 中所需的 url 与发送包含图像的整个 DOM 元素然后缓存它们之间争论不休。我知道 javascript 很慢，所以后一种选择可能会更好。

感谢您的帮助！

# php - 如何在 symfony2 中自定义 403 错误异常？

> ID：12398222
> 
> 赞同：0
> 
> 时间：2012-09-13T01:26:06.953
> 
> 标签：php, symfony

我已将以下文件放入

`/app/Resources/TwigBundle/views/Exception`

```
error.html.twig, error.json.twig , error403.json.twig, error404.json.twig 
```

但我仍然无法获得这些模板

我希望它用于拒绝访问异常

```
 Token does not have the required roles.
403 Forbidden - AccessDeniedHttpException
1 linked Exception:

    AccessDeniedException » 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T08:38:04.253

如果我是你，我会`error403.html.twig`在以下文件夹中自定义`app/Resources/TwigBundle/views/Exception/error403.html.twig`

我猜你弄错了这个文件的格式（`json`而不是`html`）

此外，请确保您已清除缓存 ( `php app/console ca:cl`) 并且您处于 prod 环境中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-21T19:01:59.987

对此的更新。我发现在 Symfony 2.8.x 中，您需要覆盖的模板称为`exception.html.twig`.

我通过在此路径中添加以下文件来做到这一点。

```
app/Resources/TwigBundle/views/Exception/exception.html.twig 
```

您可以在此文件夹中找到原件：

```
vendor/symfony/symfony/src/Symfony/Bundle/TwigBundle/Resources/views/Exception 
```

# c# - 在 for/foreach 循环中声明相同的对象

> ID：12398223
> 
> 赞同：1
> 
> 时间：2012-09-13T01:26:07.047
> 
> 标签：c#, object

在 foreach 循环中声明一个对象可以吗？我的 main 方法有一个 for 循环，该循环调用 method1 也有一个 for 循环。我只想更改同一个对象的 setFileFolder 值，是否可以再次声明同一个对象然后更改它的值？

示例代码：

```
string[] arrs = { "a", "b", "c", "d", "e", "f", "g", "h", "i", };

foreach(string arr in arrs)
{
    GetFile gf = new GetFile();
    gf.setFileFolder(arr);
    Console.WriteLine(gf.getFileFolder());
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T01:29:21.137

如果这是您的意图，则可以在循环内声明一个对象。在这种情况下，循环的每次迭代都会创建一个新的`GetFile`.

您可以将声明移到循环外以重用相同的对象：

```
GetFile gf = new GetFile();
foreach(string arr in arrs)
{
    gf.setFileFolder(arr);
    Console.WriteLine(gf.getFileFolder());
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T01:28:50.997

是的，这是一件常见且正常的事情。

唯一的问题是如果`new GetFile()`操作缓慢。然后你会想要在循环之外声明它以提高性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T01:29:07.090

您不需要实例化 GetFile X 次。

我当然会工作，但它不干净

# ios - OpenGL ES 2.0 的线条看起来比 Core Animation 更加锯齿。在 iOS 4 中可以抗锯齿吗？

> ID：12398225
> 
> 赞同：3
> 
> 时间：2012-09-13T01:26:40.043
> 
> 标签：ios, opengl-es, ios4, opengl-es-2.0

是否有一种相对简单的方法可以使用**OpenGL ES 2.0在****iOS 4**上实现抗锯齿？

 **有一种情况，我需要放弃**Core Animation**转而使用**OpenGL ES 2.0**来获得真正的**3d**图形。

一切正常，但我注意到使用**Core Animation**渲染的简单**3d立方体比使用****OpenGL**生成的具有更多锯齿线的立方体要清晰得多。

 ****我读到**iOS 4.0**支持**GL_TRIANGLE_STRIP****的抗锯齿**，并且我发现了一个看起来很有希望的**[在线教程](http://www.gandogames.com/2010/07/tutorial-using-anti-aliasing-msaa-in-the-iphone/)**（请参阅下面的链接代码），但我无法让它工作。

 **我注意到的第一件事是所有**OES**后缀，它们似乎是**Open GL ES 1.0**的残余。

由于我所做的一切都是针对**OpenGL ES 2.0**的，因此我尝试删除每个**OES**只是为了看看发生了什么。以零错误或警告编译和构建的东西，但我的图形不再呈现。

如果我保留**OES**后缀，我会收到以下类型的几个错误和警告：

```
Error - Use of undeclared identifier ''
Warning - Implicit declaration of function '' is invalid in C99 
```

包含**ES1**头文件会生成干净的构建，但仍然没有渲染任何内容。无论如何，我似乎不需要包含**ES 1.0**头文件来实现此功能。

**所以我的问题是如何让它发挥作用，它真的能解决我的问题吗？**

我链接的在线教程中的方法是否有正确的想法，我只是搞砸了实现，还是有更好的方法？

**任何指导或细节将不胜感激。**

* * *

来自上面链接的代码：

```
GLint backingWidth, backingHeight;

//Buffer definitions for the view.
GLuint viewRenderbuffer, viewFramebuffer;

//Buffer definitions for the MSAA
GLuint msaaFramebuffer, msaaRenderBuffer, msaaDepthBuffer;

//Create our viewFrame and render Buffers.
glGenFramebuffersOES(1, &amp;viewFramebuffer);
glGenRenderbuffersOES(1, &amp;viewRenderbuffer);

//Bind the buffers.
glBindFramebufferOES(GL_FRAMEBUFFER_OES, viewFramebuffer);
glBindRenderbufferOES(GL_RENDERBUFFER_OES, viewRenderbuffer);
[context renderbufferStorage:GL_RENDERBUFFER_OES fromDrawable:(CAEAGLLayer*)self.layer];
glFramebufferRenderbufferOES(GL_FRAMEBUFFER_OES, GL_COLOR_ATTACHMENT0_OES, GL_RENDERBUFFER_OES, viewRenderbuffer);
glGetRenderbufferParameterivOES(GL_RENDERBUFFER_OES, GL_RENDERBUFFER_WIDTH_OES, &amp;backingWidth);
glGetRenderbufferParameterivOES(GL_RENDERBUFFER_OES, GL_RENDERBUFFER_HEIGHT_OES, &amp;backingHeight);

//Generate our MSAA Frame and Render buffers
glGenFramebuffersOES(1, &amp;msaaFramebuffer);
glGenRenderbuffersOES(1, &amp;msaaRenderBuffer);

//Bind our MSAA buffers
glBindFramebufferOES(GL_FRAMEBUFFER_OES, msaaFramebuffer);
glBindRenderbufferOES(GL_RENDERBUFFER_OES, msaaRenderBuffer);

// Generate the msaaDepthBuffer.
// 4 will be the number of pixels that the MSAA buffer will use in order to make one pixel on the render buffer.
glRenderbufferStorageMultisampleAPPLE(GL_RENDERBUFFER_OES, 4, GL_RGB5_A1_OES, backingWidth, backingHeight);
glFramebufferRenderbufferOES(GL_FRAMEBUFFER_OES, GL_COLOR_ATTACHMENT0_OES, GL_RENDERBUFFER_OES, msaaRenderBuffer);
glGenRenderbuffersOES(1, &amp;msaaDepthBuffer);

//Bind the msaa depth buffer.
glBindRenderbufferOES(GL_RENDERBUFFER_OES, msaaDepthBuffer);
glRenderbufferStorageMultisampleAPPLE(GL_RENDERBUFFER_OES, 4, GL_DEPTH_COMPONENT16_OES, backingWidth , backingHeight);
glFramebufferRenderbufferOES(GL_FRAMEBUFFER_OES, GL_DEPTH_ATTACHMENT_OES, GL_RENDERBUFFER_OES, msaaDepthBuffer);

- (void) draw
{
    [EAGLContext setCurrentContext:context];
    //
    // Do your drawing here
    //
    // Apple (and the khronos group) encourages you to discard depth
    // render buffer contents whenever is possible
    GLenum attachments[] = {GL_DEPTH_ATTACHMENT_OES};
    glDiscardFramebufferEXT(GL_READ_FRAMEBUFFER_APPLE, 1, attachments);

    //Bind both MSAA and View FrameBuffers.
    glBindFramebufferOES(GL_READ_FRAMEBUFFER_APPLE, msaaFramebuffer);
    glBindFramebufferOES(GL_DRAW_FRAMEBUFFER_APPLE, viewFramebuffer);

    // Call a resolve to combine both buffers
    glResolveMultisampleFramebufferAPPLE();

    // Present final image to screen
    glBindRenderbufferOES(GL_RENDERBUFFER_OES, viewRenderbuffer);
    [context presentRenderbuffer:GL_RENDERBUFFER_OES];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T17:15:33.273

这[https://developer.apple.com/library/ios/documentation/3DDrawing/Conceptual/OpenGLES_ProgrammingGuide/WorkingwithEAGLContexts/WorkingwithEAGLContexts.html#//apple_ref/doc/uid/TP40008793-CH103-SW12](https://developer.apple.com/library/ios/documentation/3DDrawing/Conceptual/OpenGLES_ProgrammingGuide/WorkingwithEAGLContexts/WorkingwithEAGLContexts.html#//apple_ref/doc/uid/TP40008793-CH103-SW12)可能是现代版本教程正在描述。建议的技术是多重采样，其中您绘制 4 个像素，然后在屏幕上采样到 1 个像素。********

# css - 表 DIV 和 CSS

> ID：12398226
> 
> 赞同：0
> 
> 时间：2012-09-13T01:26:59.027
> 
> 标签：css, html

该表格是在 PHP 中动态生成的，但由于某种原因，它无法正确显示边框。CSS 的某些方面仍然困扰着我。谁能帮我理解为什么 Firefox 会超越我为元素边框设置的内容？这是生成的 HTML。

```
<table style="width:208px;">
<tr>
    <td colspan="7">
        <table style="width:100%; border-collapse:collapse">
            <tr>
                <td style="background-color:#999999; color:#FFFFFF; text-align:center; height:28px;">&lt;</td>
                <td colspan="5" style="background-color:#999999; color:#FFFFFF; text-align:center; height:28px;">September</td>
                <td style="background-color:#999999; color:#FFFFFF; text-align:center; height:28px">&gt;</td>
            </tr>
         </table>
     </td>
</tr> 
<tr>
    <td style="background-color:#999999; color:#FFFFFF; text-align:center; width:28px; height:28px; border:thin; border-color:#FFFFFF; border-style:solid;">S</td>
    <td style="background-color:#999999; color:#FFFFFF; text-align:center; width:28px; height:28px; border:thin; border-color:#FFFFFF; border-style:solid;">M</td>
    <td style="background-color:#999999; color:#FFFFFF; text-align:center; width:28px; height:28px; border:thin; border-color:#FFFFFF; border-style:solid;">T</td>
    <td style="background-color:#999999; color:#FFFFFF; text-align:center; width:28px; height:28px; border:thin; border-color:#FFFFFF; border-style:solid;">W</td>
    <td style="background-color:#999999; color:#FFFFFF; text-align:center; width:28px; height:28px; border:thin; border-color:#FFFFFF; border-style:solid;">T</td>
    <td style="background-color:#999999; color:#FFFFFF; text-align:center; width:28px; height:28px; border:thin; border-color:#FFFFFF; border-style:solid;">F</td>
    <td style="background-color:#999999; color:#FFFFFF; text-align:center; width:28px; height:28px; border:thin; border-color:#FFFFFF; border-style:solid;">S</td>
</tr>
<tr>
    <td colspan="7">
        <table style="width:100%; border:thin; border-color:#000000; border-style:solid; background-color:#FFFFFF; color:#000000">
            <tr style="border:thin; text-align:center;">
                <td style="border:thin; text-align:center;"></td>
                <td style="border:thin; text-align:center;"></td>
                <td style="border:thin; text-align:center;"></td>
                <td style="border:thin; text-align:center;"></td>
                <td style="border:thin; text-align:center;"></td>
                <td style="border:thin; text-align:center;"></td>
                <td style="border:thin; text-align:center;"></td>
            </tr>
            <tr style="border:thin; text-align:center;">
                <td style="border:thin; text-align:center;">1</td>
                <td style="border:thin; text-align:center;">2</td>
                <td style="border:thin; text-align:center;"><div style="border-style:solid; border:thin; border-color:#008000; height:27px; width:27px">3</div></td>
                <td style="border:thin; text-align:center;"><div style="border-style:solid; border:thin; border-color:#0000FF; height:27px; width:27px">4</div></td>
                <td style="border:thin; text-align:center;">5</td>
                <td style="border:thin; text-align:center;">6</td>
                <td style="border:thin; text-align:center;">7</td>
            </tr>
            <tr style="border:thin; text-align:center;">
                <td style="border:thin; text-align:center;">8</td>
                <td style="border:thin; text-align:center;">9</td>
                <td style="border:thin; text-align:center;"><div style="border-style:solid; border:thin; border-color:#008000; height:27px; width:27px">10</div></td>
                <td style="border:thin; text-align:center;">11</td>
                <td style="border:thin; text-align:center;">12</td>
                <td style="border:thin; text-align:center;">13</td>
                <td style="border:thin; text-align:center;">14</td>
            </tr>
            <tr style="border:thin; text-align:center;">
                <td style="border:thin; text-align:center;">15</td>
                <td style="border:thin; text-align:center;">16</td>
                <td style="border:thin; text-align:center;">17</td>
                <td style="border:thin; text-align:center;">18</td>
                <td style="border:thin; text-align:center;">19</td>
                <td style="border:thin; text-align:center;"><div style="border-style:solid; border:thin; border-color:#008000; height:27px; width:27px">20</div></td>
                <td style="border:thin; text-align:center;"><div style="border-style:solid; border:thin; border-color:#0000FF; height:27px; width:27px">21</div></td>
            </tr>
            <tr style="border:thin; text-align:center;">
                <td style="border:thin; text-align:center;">22</td>
                <td style="border:thin; text-align:center;">23</td>
                <td style="border:thin; text-align:center;">24</td>
                <td style="border:thin; text-align:center;">25</td>
                <td style="border:thin; text-align:center;">26</td>
                <td style="border:thin; text-align:center;"><div style="border-style:solid; border:thin; border-color:#F5831C; height:27px; width:27px">27</div></td>
                <td style="border:thin; text-align:center;">28</td>
            </tr>
            <tr style="border:thin; text-align:center;">
                <td style="border:thin; text-align:center;">29</td>
                <td style="border:thin; text-align:center;"><div style="border-style:solid; border:thin; border-color:#F5831C; height:27px; width:27px">30</div></td>
                <td style="border:thin; text-align:center;"></td>
                <td style="border:thin; text-align:center;"></td>
                <td style="border:thin; text-align:center;"></td>
                <td style="border:thin; text-align:center;"></td>
                <td style="border:thin; text-align:center;"></td>
            </tr>
        </table>
    </td>
</tr> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T01:33:17.133

完成您的边框属性，例如 `style="border:thin solid silver;`

希望这会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T01:29:17.253

我不确定您遇到的错误，但尝试将border：thin更改为border：2px；

Thin = 2px in ie 但 1px 在 FF 和 Chrome

# ruby-on-rails - Rails 3：奇怪的设计重定向错误

> ID：12398227
> 
> 赞同：0
> 
> 时间：2012-09-13T01:27:17.727
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, routes, mongoid

所以，我遇到了一个有趣的问题。我正在尝试覆盖并将设计 sign_up 和 sign_in 请求重定向到其相应的个人资料页面，但我遇到了错误。配置文件和 URL 通过使用控制台、link_to 或通过键入来访问它来工作。由于某种原因，设计方法不会路由到它。我不确定为什么。无论如何，为所有贡献或解决的人投票。谢谢！

**路线：**

```
 root :to => 'pages#index'
  get "pages/index"

  devise_for :users, :path => 'accounts', :controllers => { :registrations => "registrations" }

  get 'users/:id/profile' => 'profiles#show', :as => 'current_profile'
  get 'users/:id/profile/edit' => 'profiles#edit', :as => 'edit_current_profile'
  put 'users/:id/profile' => 'profiles#update'

  resources :users do
    resources :profiles 
  end 
```

**注册控制器：**

```
class RegistrationsController < Devise::RegistrationsController

  protected

  def after_sign_up_path_for(resource)
     edit_current_profile_path(resource)
  end

  def after_sign_in_path_for(resource)
     current_profile_path(resource)
  end

end 
```

**配置文件控制器**

```
 def show
    @user = current_user
    @profile = @user.profile

    respond_to do |format|
      format.html 
    end
  end 
```

**错误信息：**

```
Routing Error

No route matches {:controller=>"profiles", :action=>"show"}
Try running rake routes for more information on available routes. 
```

**查看：edit.html.erb**

```
<%= form_for([@profile.user, @profile]) do |f| %>
  <% if @profile.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@profile.errors.count, "error") %> prohibited this profile from being saved:</h2>

      <ul>
      <% @profile.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :real_name %><br />
    <%= f.text_field :real_name %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T01:31:36.397

你应该给你的路由助手一个属性。试试看

```
def after_sign_up_path_for(resource)
   edit_current_profile_path(resource)
end

def after_sign_in_path_for(resource)
   current_profile_path(resource) 
end 
```

# wordpress - Wordpress - 动态更改页面但在运行 php 的短代码内

> ID：12398230
> 
> 赞同：0
> 
> 时间：2012-09-13T01:27:58.700
> 
> 标签：wordpress

我正在使用自定义简码插件。该插件允许我运行一些 php。php 查询非 wp 数据库以构建车辆规格页面，一切正常。问题是页面标题和描述所需的所有信息都包含在来自数据库的数据中。我已经尝试了一些标准的 wp php 过滤器，但标题没有改变。

这可能不是因为短代码的执行时间吗？

```
TinyMCE in WP admin. Shortcode
-----------------------------------------------
[myplugin data_id='42']

PHP window in shortcode editor
-----------------------------------------------
$GP=array_merge($_GET, $_POST);

echo "hello word" //works
echo $data_id;  //works
echo $GP[some_post_data]; //works
//connect to database (irrelevant)
echo "the title from data table for data_id 42 = ".$data[title];  //works

// the following has no effect on page title even though $data[title] contains valid data
add_filter('the_title','myCallback'); 
function myCallback($data){ 
  return $data[title]; 
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T02:38:06.543

问题是 $data[title] 超出范围，并且您的过滤器回调设置不正确。此外，您应该用引号封装关联索引。

向现有过滤器添加回调时，回调中的参数由过滤器定义传递。案例和要点：[过滤标题](http://codex.wordpress.org/Plugin_API/Filter_Reference/the_title)

the_title 的标准过滤器中的参数是 $title 和 $id。如果要从 $data 数组中返回标题，可以使用全局范围以草率的方式进行：

```
add_filter('the_title','myCallback'); 
function myCallback($title, $id){
    global $data;
    return $data['title']; 
} 
```

但就个人而言，我会考虑完全避免全局变量并专注于使用自定义过滤器。研究添加你[自己的钩子](http://archive.extralogical.net/2007/06/wphooks/)。在掌握了 action hooks 之后，[Filter Hooks](http://archive.extralogical.net/2007/06/wphooks/#comment-1051)就很容易掌握了。

# wcf - WCF Odata 实体框架关系名称

> ID：12398231
> 
> 赞同：1
> 
> 时间：2012-09-13T01:28:11.070
> 
> 标签：wcf, entity-framework, wcf-data-services, odata, entity-framework-5

我首先遇到了 EF 代码和 Odata 的问题。

如果我导航到元数据，那么我发现我的所有关系都是这样定义的：

```
<NavigationProperty Name="Jobs" ToRole="Jobs" FromRole="Applicant" Relationship=".Applicant_Jobs"/> 
```

注意关系名称前的句号？

这使我无法将服务引用添加到控制台应用程序。它给出了一个自定义工具错误：

指定的架构无效。错误：关系属性无效 - 根据其数据类型，值“.Applicant_Jobs”无效。

我的数据合同在这里定义：

```
[DataContract]
public class Applicant
{
[DataMember]
public int ID { get; set; }

[DataMember]
public string Forename { get; set; }

[DataMember]
public string Surname { get; set; }

[DataMember]
public string EmailAddress { get; set; }

[DataMember]
public string PassPhrase { get; set; }

[DataMember]
public string City { get; set; }

[DataMember]
public string County { get; set; }

[DataMember]
public string Country { get; set; }

[DataMember]
public DateTime CreationDate { get; set; }

[DataMember]
public ICollection<Job> Jobs { get; set; }
}

[DataContract]
public class Job
{
[DataMember]
public Applicant Applicant { get; set; }

[DataMember]
public JobStatus JobStatus { get; set; }

[DataMember]
public int ID { get; set; }

[DataMember]
[ForeignKey("Applicant")]
public int ApplicantID { get; set; }

[DataMember]
[ForeignKey("JobStatus")]
public int JobStatusID { get; set; }

[DataMember]
public string JobTitle { get; set; }

[DataMember]
public string WebsiteURL { get; set; }

[DataMember]
public string Reference { get; set; }

[DataMember]
public string Location { get; set; }

[DataMember]
public string Salary { get; set; }

[DataMember]
public string ContactName { get; set; }

[DataMember]
public string ContactEmail { get; set; }

[DataMember]
public string ContactPhone { get; set; }

[DataMember]
public string Pros { get; set; }

[DataMember]
public string Cons { get; set; }

[DataMember]
public string GeneralNotes { get; set; }

[DataMember]
public DateTime CreationDate { get; set; }

[DataMember]
public bool Archived { get; set; }

[DataMember]
public ICollection<JobProgression> JobProgress { get; set; }
} 
```

如您所见，我并没有在任何地方打上句号，但出于某种原因，我的模型中的每个关系都生成了一个句号，这意味着自定义工具失败了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T07:31:05.640

事实证明，合约需要在命名空间中。这就是提供商试图放在点前面的内容。

# jquery - jquery 翻转/定位/选择器问题

> ID：12398233
> 
> 赞同：0
> 
> 时间：2012-09-13T01:28:49.950
> 
> 标签：jquery

所以基本上，我正在使用 jquery 进行翻转。我有一个常规的 html 包装，里面有一个图像的缩略图。然后对于翻转，我动态附加一个 div（以便稍后为翻转设置动画）并在动态附加的 div 中，我希望 alt 文本在屏幕上显示为实际文本。在推出时，它会隐藏它。

这是基本的html

```
<div id="portSecW">

                <div class="portThumbsL">
                     <a href="images/sitePortThumbs/2882.png"><img src="images/sitePortThumbs/2882.png" alt="2882films"/></a>
                    <div class="thumbTxtSmall">2882FILMS</div>
                </div>

    </div> 
```

这是javascript

```
$('#portSecW div:not(".closeXbtn")').prepend('<div class="portSecRollOver"><div class="portSecInner"></div></div>');

    $('.portThumbsL , .portThumbsR, .portSecRollOver, .portSecInner, h3').mouseover(function(){
        //$(this).css("background-color","#0099FF");//blue bg for thumgs
        $(this).children('.portSecRollOver').css("display","block");
        //$(this).children('.portSecRollOver').show();
        $(this).find('.portSecInner').html("<h3 class='h34roll'>" + $(this).find('img').attr("alt") + "</h3>");

    });
////    
    $('.portThumbsL , .portThumbsR').mouseleave(function(){
        //$(this).css("background-color","#333");
        $(this).children('.portSecRollOver').css("display","none");
        //$(this).children('.portSecRollOver').hide();
    }); 
```

​现在问题来了，问题是尽管一切正常，但在鼠标移出时有时会卡住。搞砸了我发现如果你像往常一样翻滚，将鼠标放在中间的文本上，水平滚动（左/右）附加的 div 不会隐藏自己。它只是停留在屏幕上。无论我做了什么，如果您将鼠标悬停在 div 的顶部或底部区域，它就会起作用，只要将鼠标悬停在文本所在的位置，它就会卡住。

这是一个 jsFiddle，所以你们都可以看到发生了什么。再次，将鼠标悬停在框上，您会在中间看到文本（由 alt 标签提供），将鼠标放在那里并水平滚动（左//右），看看它是如何停留在那里的。如果您然后将鼠标悬停在顶部/底部部分，那么它的行为就像正常一样。

在上面的 jQuery 选择器中，我把每个选择器都放在了那个盒子里，我首先尝试了它们，全部自己尝试，然后像上面一样一起尝试，我只是不明白这让我感到困惑。

这是 jsFiddle [http://jsfiddle.net/somdow/KSt6a/](http://jsfiddle.net/somdow/KSt6a/)

提前致谢。

​</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T02:00:30.723

```
$('.portThumbsL').hover(function(){        
    $(this).children('.portSecRollOver').css("display","block");
    $(this).find('.portSecInner').html("<h3 class='h34roll'>" + $(this).find('img').attr('alt') + "</h3>");
}, function() {
    $(this).children('.portSecRollOver').css("display","none");
}); 
```

我不熟悉 mouseover 和 mouseleave 方法，但对于同样的情况，我使用 hover 和 in & out 的处理程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T02:08:50.507

将复杂的代码简化为简单的 CSS:hover 语句？

[http://jsfiddle.net/5jYem/](http://jsfiddle.net/5jYem/)

# json - 一个线性 *NIX 命令将 JSON 对象键作为参数传递给 shell 命令

> ID：12398236
> 
> 赞同：0
> 
> 时间：2012-09-13T01:29:11.397
> 
> 标签：json, node.js, shell, unix

我希望仅在您设置测试环境时安装节点模块。如果您运行`devDependencies`and`optionalDependencies`仍将安装`npm install <the-module>`。相反，我会将这些存储在`testDependencies`. 要做到这一点，如果有一个 *NIX 单线从 JSON 对象中获取密钥并将其通过管道传递到命令中，那就太好了`npm install`。这可以用于 travisci 并使其默认安装不会安装这些额外的库。

您如何读取 package.json 文件、提取密钥以获取模块名称并运行`npm install <keys>`？package.json 看起来很像这样：

```
{
  "name": "the-module",
  "dependencies": {
    "express": "2.x"
  },
  "devDependencies": {
    "ejs": ">= 0.6.1"
  },
  "testDependencies": {
    "mocha": ">= 0.8.1",
    "chai": ">= 0.3.3",
    "sinon": ">= 1.3.1"
  }
} 
```

要运行的命令是这样的：

```
npm install mocha chai sinon 
```

试图做这样的事情：

```
npm install $(read-json ./package.json | extract-keys) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T01:36:45.193

想出了一个可怕的黑客：p

```
npm install $(node -e "console.log(Object.keys(JSON.parse(require('fs').readFileSync('./package.json', 'utf-8'))['testDependencies']).join(' '))") 
```

仍在寻找“正确”的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T04:02:12.653

检查[JSON.sh](https://github.com/dominictarr/JSON.sh)

此外，您可以直接使用使您的单行更短`require('./package.json')`- 它与`JSON.parse(require('fs').readFileSync('./package.json', 'utf-8'))`

# c# - 在 C# 中从/向数据库保存/读取 csv 文件

> ID：12398241
> 
> 赞同：2
> 
> 时间：2012-09-13T01:29:39.163
> 
> 标签：c#, asp.net, sql-server

是否可以使用 C# 将 csv 文件保存到 SQL Server 数据库表中？

是否需要将 csv 文件转换为二进制格式才能执行此操作？

有没有其他方法，比如以文本格式保存（csv基本上是一个txt文件）？

如果您能提供一些示例代码，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T01:32:28.383

CSV 文件只是文本。您可以创建一个包含 nvarchar(max) 列的表并将 CSV 文件存储在其中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T01:49:00.700

您还有另一个有用的 C# 示例，用于使用 SQL Server 导入和导出 CSV 文件。以下是链接：

[http://www.codeproject.com/Articles/30705/C-CSV-Import-Export](http://www.codeproject.com/Articles/30705/C-CSV-Import-Export)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T01:34:02.893

您可以使用我相信的数据导入向导并将其指向 csv 文件。这应该创建一个与您导入的 csv 的结构相匹配的表

# java - java - 上个月的开始日期

> ID：12398246
> 
> 赞同：2
> 
> 时间：2012-09-13T01:30:35.247
> 
> 标签：java, date, calendar

我想计算上个月的开始日期。我已经提到[了这篇文章](https://stackoverflow.com/questions/3083781/start-and-end-date-of-a-current-month)，并且我编写了如下代码片段：

```
Calendar calendar = getCalendar(new Date());
calendar.set(Calendar.DAY_OF_MONTH-1,
        calendar.getActualMinimum(DAY_OF_MONTH));
calendar = getTimeToBeginningOfDay(calendar);

return calendar.getTime(); 
```

有了这个**，我可以在上个月结束之前获得 Date**。帮助我获得任何帮助的开始日期将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T01:55:46.557

你可能会得到你所期望的：

```
Calendar c = Calendar.getInstance();

// substract one month
c.add(Calendar.MONTH, -1);

// get to the lowest day of that month
c.set(Calendar.DAY_OF_MONTH, c.getActualMinimum(Calendar.DAY_OF_MONTH));

// lowest possible time in that day
c.set(Calendar.HOUR_OF_DAY, c.getActualMinimum(Calendar.HOUR_OF_DAY));
c.set(Calendar.MINUTE, c.getActualMinimum(Calendar.MINUTE));
c.set(Calendar.SECOND, c.getActualMinimum(Calendar.SECOND)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T01:57:25.247

您永远不应该对字段常量进行数学运算，例如`Calendar.DAY_OF_MONTH`. 你想做的是：

```
Calendar calendar = getCalendar(new Date());
calendar.add(Calendar.MONTH, -1);
calendar.set(Calendar.DAY_OF_MONTH, 1);
calendar = getTimeToBeginningOfDay(calendar);

return calendar.getTime(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T01:57:33.903

如果您只想要上个月的第一天，那么应该这样做。

```
 Calendar instance = Calendar.getInstance();
    instance.add(Calendar.MONTH, -1);
    instance.set(Calendar.DAY_OF_MONTH, 1);

    System.out.println(instance.getTime()); 
```

如果您需要清除时间组件，则使用`getTimeToBeginningOfDay()`帖子中提到的来实现这一点。

# ios - 没有请求权限的 Facebook 应用请求

> ID：12398253
> 
> 赞同：0
> 
> 时间：2012-09-13T01:32:14.180
> 
> 标签：ios, facebook

我从我的 iOS 应用程序发出 Facebook 应用程序请求。当 facebook 用户收到我的请求通知并单击它时，facebook 会显示权限对话框。但我不需要任何权限。我希望用户只需访问我的网站即可下载该应用程序。是否可以禁用权限对话框并直接访问我的网站？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T08:13:16.270

> 是否可以禁用权限对话框并直接访问我的网站？

您是否通过任何更改在您的应用程序设置中设置了[Authenticated Referrals ……？](https://developers.facebook.com/docs/opengraph/authentication/#referrals)

这是 Facebook 提供的一种机制，通过要求他们登录并接受指定的权限，在他们进入您的应用程序之前，确保所有从 Facebook 内部链接到达您的应用程序的用户都已经过身份验证。

如果您不希望用户为此烦恼，因为您不需要他们连接/接受权限，或者想要稍后登录并自己触发它 - 然后只需在您的应用设置中关闭 Authenticated Referrals。

# c - 是否可以使用 SWIG 来包装带有 .a 扩展名的静态库？

> ID：12398255
> 
> 赞同：0
> 
> 时间：2012-09-13T01:32:45.313
> 
> 标签：c, android-ndk, swig

我使用 NDK 编译了一个 C 项目并获得了许多 .a 文件，据我所知，它们只不过是静态库。我不确切知道 .a 和 .so 文件之间有什么区别，但我想问：我确切地知道使用 NDK 中的工具链我可以导入所有 .a 文件并获取 .so 文件，但具有 . a 文件如何将 .a 文件包含在 .interface 文件中以 SWIG 整个库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T07:31:47.220

SWIG 不会从库中生成接口文件。您可以提供一个包装器来包含所有相关的头 ( `.h`) 文件，或者手动创建`.i`文件，只公开相关`C`功能。

请注意，Android 应用程序不能使用静态库，您*必须*构建动态库`.so`才能使用 JNI。您`System.load()`将从您的 Java 代码调用以`.so`从磁盘加载它。

# bash - Bash-使用“查找”命令进行测试

> ID：12398259
> 
> 赞同：0
> 
> 时间：2012-09-13T01:33:17.303
> 
> 标签：bash

我想知道是否有任何方法可以在 bash 中使用“查找”命令进行测试。换句话说，我该如何做出一个条件语句来测试是否使用“find”找到了一个文件？

为了详细说明我的意思，我包含了以下代码。其目的应该是：

1.  查找用户输入的目录
2.  在该目录中找到一个文件，文件名由用户输入
3.  在该文件中找到一个单词，该单词也是由用户输入的

```
#!/bin/bash
#Task9.sh
cd /
echo "please enter a directory"
read direc
path= find home -depth -name "$direc" 
if [ -z $path ]; then
    echo "not a valid directory"
    exit 1
else
    cd $path
    counter=3
    while [ $counter -gt 0 ]; do
        echo "enter a filename"
        read FileName
        FilePath= find $direc -depth -name "$FileName"
        if [ -z $FilePath ]; then
            break
        else
                let counter--
    fi  
    done
if [ -z $FilePath ]; then 
            cd $FilePath        
            echo "input a word"
            read SearchWord
            echo "Found!"
            grep $SearchWord $FileName

    else
           echo "No such file"
           exit 2
    fi
fi

exit 0 
```

我对 Bash 很陌生，所以对于我忽略的任何简单错误，我深表歉意。我还不习惯解析语言。感谢任何帮助我的人，非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T01:54:39.570

您正在使用`find`命令加上 shell 的`-z $foo`运算符来确定用户是否指定了现有文件的路径。可能有一种方法可以直接询问 bash 文件是否存在，使用基于文件的运算符，而不是运行不必要的命令，然后对结果使用基于字符串的运算符（提示：存在）。此页面上的一些链接可能会对您有所帮助：

[http://tldp.org/LDP/abs/html/tests.html](http://tldp.org/LDP/abs/html/tests.html)

祝你好运！

# c++ - 如何从用 C/C++ 编写的 DLL 调用导出的函数，返回类型为 char* 或字符串？

> ID：12398261
> 
> 赞同：1
> 
> 时间：2012-09-13T01:33:28.817
> 
> 标签：c++, dll, go

我们这样设计 C/C++ DLL：

```
WIN32_DLL_EXPORT int FnRetInt(int i)
{
   ....
   return 32 ;
} 

WIN32_DLL_EXPORT char* FnRetString()
{
   return "THIS IS A TEST STRING" ;
} 
```

`Go`当我们使用 syscall调用这两个函数时：

```
hd:=syscall.NewLazyDLL(dll_path)
proc:=hd.NewProc(dll_func_name)
ret:=proc.Call() 
```

我们找到：

`FnRetInt`工作正常，但`FnRetString`没有。`proc.Call`返回类型是`uintptr`，我们如何将其更改为我们想要的类型（例如：char* 或字符串）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T01:35:54.067

A`uintptr`是表示指针的 Go 类型。您可以使用该`unsafe`包并将其转换为`unsafe.Pointer`，然后您可以将 an 转换`unsafe.Pointer`为任何 Go 指针类型。所以你可以做类似的事情

```
str := (*uint8)(unsafe.Pointer(ret)) 
```

回来`*uint8`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T02:53:20.487

查看 syscall.Getwd windows 实现[http://code.google.com/p/go/source/browse/src/pkg/syscall/syscall_windows.go#323](http://code.google.com/p/go/source/browse/src/pkg/syscall/syscall_windows.go#323)。它与您的问题不同：

*   它将缓冲区传递给 dll，而不是从 dll 接收缓冲区；
*   数据是 uint16s (Microsoft WCHARs)，而不是 uint8s；
*   GetCurrentDirectory 告诉我们结果字符串将有多长，而您的示例可能希望您在末尾搜索 0；

但应该给你足够的线索。

亚历克斯

# azure - 没有 web.config 的 Azure 和 .json mimeType

> ID：12398262
> 
> 赞同：8
> 
> 时间：2012-09-13T01:33:34.933
> 
> 标签：azure, web-config

添加到我的 web.config

```
<system.webServer>
  <staticContent>
    <mimeMap fileExtension=".json" mimeType="application/json" />
  </staticContent>
</system.webServer> 
```

允许我的应用程序在 Azure 上运行，但会导致我的远程 IIS 服务器崩溃，因为它已经包含在内。在这种特殊情况下，删除远程 IIS mimeType 是不切实际的。我最终使用了不同的 web.config

是否有另一种机制可以让我配置 Azure IIS mimeType，这样我就没有这个有问题的 web.config？

我想要一个可以在 Azure 和非 Azure 上运行的部署包。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-13T07:54:03.947

这应该有效：

```
<system.webServer>
  <staticContent>
    <remove fileExtension=".json" />
    <mimeMap fileExtension=".json" mimeType="application/json" />
  </staticContent>
</system.webServer> 
```

另请参阅：http: [//blogs.msdn.com/b/chaun/archive/2009/12/04/iis7-error-cannot-add-duplicate-collection-entry-of-type-mimemap-with-unique-关键属性文件扩展名.aspx](http://blogs.msdn.com/b/chaun/archive/2009/12/04/iis7-error-cannot-add-duplicate-collection-entry-of-type-mimemap-with-unique-key-attribute-fileextension.aspx)

`web.config`这对您的整体 IIS 配置没有任何影响，它只是在再次添加之前有条件地从该特定站点的配置中删除 mimeMap（由 this 管理）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T07:35:03.857

您可以[创建一个](http://blogs.msdn.com/b/avkashchauhan/archive/2011/05/28/how-to-perform-custom-iis-configuration-such-as-adding-dynamic-compression-for-additional-mime-types-in-web-role-using-startup-task.aspx)在 IIS 级别添加 mime 类型的启动任务。这样你就不需要将它包含在你的 web.config 中：

```
"%windir%\System32\inetsrv\appcmd.exe" set config /section:staticContent /+"[fileExtension='.json',mimeType='application/json']"
exit /b 0 
```

# php - mod_rewrite 和尾部斜杠

> ID：12398263
> 
> 赞同：0
> 
> 时间：2012-09-13T01:33:40.620
> 
> 标签：php, regex, .htaccess, mod-rewrite

我有

```
RewriteRule    ^([A-Za-z0-9-_≈]+)/?$    page.php?text=$1 
```

把热门歌曲翻译`domain.com/sample_text`成`page.php?text=sample_text`

但是，我希望以下两个条件也可以工作（并给出相同的结果）。

1）如果他们去`domain.com/sample_text/`我想在地址栏中保留斜杠并显示`page.php?text=sample_text`（现在它进入正确的页面，但 css 和 js-paths 搞砸了）。

2）如果他们去`domain.com/sample_text/worthlessdata123`我想删除 / 之后的所有内容，保留`domain.com/sample_text/`在地址栏中并显示`page.php?text=sample_text`。

我已经很挣扎了，但是我在正则表达式方面很糟糕，而且我的脑袋也不能正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T01:47:28.320

您拥有的规则应该足以满足第一个条件。如果有人访问`domain.com/sample_text/`，则 URI`sample_text/`匹配并且应该在`/page.php?text=sample_text`浏览器的 URL 地址栏保持不变的情况下获得内容。

对于第二个条件，您需要添加一个规则来处理它：

```
RewriteRule ^([A-Za-z0-9-_≈]+)/.+$ /$1/ [L,R=301] 
```

这将重定向：`domain.com/sample_text/worthlessdata123`到`domain.com/sample_text/`，那么第一条规则应该从那里获取东西。

* * *

误读了您的第一个问题。由于额外的斜线，您在页面内容中拥有的相对/绝对路径得到了不同的基础。当你有类似的东西`<img src="images/blah.gif">`时，相对基础来自浏览器看到的 URL（不是服务器内部重写的内容）。因此，如果浏览器看到 : `http://domain.com/sample_text`，则 URI 基数是`/`，但是当浏览器看到 时`http://domain.com/sample_text/`，URI 基数变为`/sample_text/`，我猜这不是类似的东西`images/blah.gif`所在的位置。

您可以通过在页面标题中包含基础来解决此问题：

```
<base href="/"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T01:49:04.840

您需要通过使用资产（js、图像等）的绝对路径来解决的第一个问题

对于第二个问题，您需要@Jon Lin 的解决方案。

# php - php strip_tags() 问题

> ID：12398264
> 
> 赞同：0
> 
> 时间：2012-09-13T01:33:47.723
> 
> 标签：php

我正在制作一个项目发布系统，它会有一些标记，类似于 bbcodes，当我从我使用的数据库中获取数据时

```
strip_tags($content,'<br />'); 
```

要删除任何不需要的 html 标签，然后我继续使用

```
str_ireplace($markup,$html_t,$strip_tags); 
```

并且这些都放在变量中以便于工作。我想允许该`<br />`标签，因为这是我的数据库中现在实现 line downs (nl2br) 的内容，由于某种原因它没有回显`<br />`'s.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T01:41:48.827

第二个参数中没有空格。

```
strip_tags($content,'<br>'); 
```

[http://php.net/manual/en/function.strip-tags.php](http://php.net/manual/en/function.strip-tags.php)

# c# - 在 ASP.NET MVC 应用程序中放置函数

> ID：12398268
> 
> 赞同：4
> 
> 时间：2012-09-13T01:34:40.673
> 
> 标签：c#, asp.net, asp.net-mvc, design-patterns, asp.net-mvc-2

出于教育目的，我正在构建一个克隆社交书签服务（类似于 reddit）。在列表中的每个“书签”下，我想显示源 URL 的**基本域**（而不是完整的 URL。

我已经在 SO 上找到了一些关于如何执行此操作的线程，所以我继续创建了一个类来抽象功能，但我不确定我应该在哪里调用该方法。

目前我有我的`BookmarkList`控制器方法将`Bookmark`对象列表传递给视图，我正在迭代列表。由于该`Bookmark`对象没有用于存储基本 URL 的属性（因为我正在动态计算它），所以`Bookmark`在将它们传递给视图之前，我不能将其放入对象中（无论如何它似乎是错误的）。那么我应该调用从视图本身创建的 GetDomainFromUrl 方法吗？出于某种原因，这也不合适。

我不确定如何在不破坏 MVC 约定的情况下适应此功能。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T01:57:09.217

我会将它添加到 Bookmark 类中。可以计算属性，这是来自 msdn（[MSDN 源](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/creating-a-more-complex-data-model-for-an-asp-net-mvc-application)）的 asp.net mvc 教程中的示例：

```
 public string LastName { get; set; }
    public string FirstMidName { get; set; }

    public string FullName
    {
        get
        {
            return LastName + ", " + FirstMidName;
        }
    } 
```

您可以在这里调用 GetDomainFromUrl 方法，而不是简单地连接字符串。

IE，

```
public string BaseUrl
{
    get
    {
        return GetDomainFromUrl(this.Url);
    }
} 
```

*请注意，没有定义 set 方法，因为您可以/将要设置 Url 属性。*

另外，您的网址是否存储为字符串？

如果您使用的是[URI 类](http://msdn.microsoft.com/en-us/library/system.uri.aspx "URI 类")，则可以只使用 this.FullUrl.Host，假设您的文章的 url 是在名为 FullUrl 的属性中定义的。（还假设这不会破坏此分配的要点，因为您说这是为了学校。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T01:54:59.460

对于非常基本的场景，或者您可以完全控制模型的情况，MVC（模型、视图、控制器）是一个很好的模式。

根据我的经验，您通常需要额外的信息，这些信息对您的视图很重要，但对您的实际模型并不重要。例如，要为模型属性显示的下拉项目列表，或者在您的情况下，放置站点的基本 URL 以供用户查看。

在这种情况下，我喜欢将 MVC 改编为 VM-VC（**ViewModel**、View、Controller）。

本质上，您会想要创建一个 Bookmark ViewModel 并在渲染视图时使用它：

书签视图模型.cs：

```
public class BookmarkViewModel
{
    public string BaseUrl {get;set;}

    // + all existing bookmark properties
} 
```

您可以将基本 URL 函数直接添加到视图模型中并让视图模型自己执行该功能，或者您可以在创建视图模型时在控制器中执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T01:56:14.100

关于如何做到这一点，有几种不同的选择。我建议将 GetDomainFromUrl() 方法存储在 Bookmark 类中。我还建议为 BaseUrl 创建一个属性。

然后，您可以将完整的 Url 传递给构造函数中的 Bookmark 对象，执行您的函数，并将其设置为 BaseUrl 属性。

```
class Bookmark
{
    public string BaseUrl { get; }

    public Bookmark(string url)
    {
        BaseUrl = GetDomainFromUrl(url);
    }

    private string GetDomainFromUrl(string url)
    {
        //your logic to generate BaseUrl
    }
} 
```

另一种选择是执行以下操作：

```
class Bookmark
{
    private string baseUrl;

    public string BaseUrl
    {
        get
        {
            return baseUrl;
        }
        set
        {
            baseUrl = GetDomainFromUrl(value));
        }
    }

    private string GetDomainFromUrl(string url)
    {
        //your logic to generate BaseUrl
    }
} 
```

然后将代码中的 BaseUrl 属性 somplace 设置为完整 url 的值，当您这样做时，它将执行您的功能并将其存储在您的属性中。

# iphone - ^(void)completion token 的用途

> ID：12398269
> 
> 赞同：0
> 
> 时间：2012-09-13T01:34:50.093
> 
> 标签：iphone, xcode, deprecated, ios

正在使用最新的 iOS SDK 更新适用于 iPhone 和 iPod touch 的应用程序，我正在尝试修复一些弃用的问题，但我不知道如何完成字符串。它以一个标记“^(void)completion”结尾，但我不知道用什么来填充它。我试着四处寻找它，但我找不到任何东西。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T01:38:06.983

这看起来像是一个畸形的尝试有一个[block](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Blocks/Articles/00_Introduction.html)。这大概是一个完成处理程序，它是一个不带参数且不返回任何内容的 C 块。

如果您不需要完成处理程序，则只需传递`nil`. 否则你可以通过一个块，它看起来像

```
[obj someFuncWithCompletion:^{
    // this is the block here, the ^{ code }
}]; 
```

# powershell-3.0 - Powershell 3 如何引用本地文件

> ID：12398276
> 
> 赞同：0
> 
> 时间：2012-09-13T01:35:54.710
> 
> 标签：powershell-3.0

如何让 Powershell 识别脚本本地路径？

例如，我在与 test.ps1 相同的文件夹中有“test.htm”，其中包含 Get-Content .\test.htm

这是错误：获取内容：找不到路径“C:\Users\some username\test.htm”，因为它不存在。

引用本地文件的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T01:51:31.067

如果“本地”是指运行脚本的本地（即对等），那么您应该使用以下技术：

```
$file = join-path $psscriptroot "test.htm" 
```

`$psscriptroot`是当前执行的 ps1 文件所在的文件夹。

# android - 无效的文件名：必须只包含 [a-z0-9]

> ID：12398280
> 
> 赞同：2
> 
> 时间：2012-09-13T01:37:20.357
> 
> 标签：android, eclipse, icons

我明白为什么我会收到这个错误。我的问题更多：我该如何解决？

问题是：我正在创建一个 Android 图标包，而 Youtube 活动名称恰好包含一个“$”。除非我在文件名中包含 $ （据我所知），否则我无法为这个应用程序设置主题。我试图用'_'替换它，但它不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T11:51:24.290

文件名只能包含小写的 az、0-9 或 _。

*   只是`a-z`，请注意不是资本......和`white-space not allowed`

*   名称必须以字符开头。不能以数字 (0-9)

*   仅允许使用名称`_`符号。不允许使用其他符号。

# android - Android：镜像视图

> ID：12398283
> 
> 赞同：1
> 
> 时间：2012-09-13T01:38:22.700
> 
> 标签：android, android-view

我有一个需要垂直翻转或镜像的视图。有很多关于通过将单个位图缩放 -1 并转换偏移量来镜像单个位图的信息，如此处所述[，](https://stackoverflow.com/questions/7925278/drawing-mirrored-bitmaps-in-android)但似乎没有任何关于如何绘制视图的所有内容的信息 - 具体来说，所有它的子视图 - 颠倒。

我在这个容器中有多个子视图 - 文本、图像 - 我希望有一种方法可以让我将它们添加到单个视图中并颠倒/横向绘制该视图，而不是让它们都执行自定义绘图代码来绘制将它们倒置并让容器适当地重新定位它们。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T01:45:24.500

[`Canvas`](http://developer.android.com/reference/android/graphics/Canvas.html)您可以简单地从 a创建一个`Bitmap`然后调用您的根视图的[`View.draw(Canvas)`](http://developer.android.com/reference/android/view/View.html#draw%28android.graphics.Canvas%29)方法。这将为您提供视图层次结构的快照`Bitmap`。然后，您应用上述转换来镜像图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T02:44:06.917

将视图转换为位图，然后使用以下方法将其翻转：

```
private static Bitmap getBitmapFromView(View view,int width,int height) {
    int widthSpec = View.MeasureSpec.makeMeasureSpec(width, View.MeasureSpec.EXACTLY);
    int heightSpec = View.MeasureSpec.makeMeasureSpec(height, View.MeasureSpec.EXACTLY);
    view.measure(widthSpec, heightSpec);
    view.layout(0, 0, width, height);
    Bitmap bitmap = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);
    Canvas canvas = new Canvas(bitmap);
    view.draw(canvas);

    return bitmap;
}

private static Bitmap flipBitmap(Bitmap src)
{
    Matrix matrix = new Matrix();
    matrix.preScale(-1, 1);
    Bitmap dst = Bitmap.createBitmap(src, 0, 0, src.getWidth(), src.getHeight(), matrix, false);
    dst.setDensity(DisplayMetrics.DENSITY_DEFAULT);
    return dst;
} 
```

# list - 冷融合：listContains 和 listFind

> ID：12398284
> 
> 赞同：9
> 
> 时间：2012-09-13T01:38:39.307
> 
> 标签：list, coldfusion

`listContains()`和`listFind()`/有什么区别`listFindNoCase()`？

它们都是列表函数，采用相同的参数，并返回相同的结果。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-09-13T01:59:05.737

`listContains`在字符串中的任意位置查找值，例如

```
<cfset list = '1,2,33,4,5' />
<cfdump var="#listContains(list,3)#"> 
```

将返回 3，因为在第 3 个列表项中找到了 3。

`listFind`查找作为列表项之一的值。

```
<cfdump var="#listFind(list,3)#"> 
```

返回 0，因为 3 不是列表项之一。

# asp.net-mvc - 使用 Automapper 返回 IQueryable

> ID：12398289
> 
> 赞同：10
> 
> 时间：2012-09-13T01:39:30.037
> 
> 标签：asp.net-mvc, vb.net, automapper, llblgenpro

我试图在我的一个函数中返回一个 IQueryable 对象并使用映射（Automapper）。它设法返回一个 IEnumerable 对象，但是一旦我尝试返回一个 IQueryable 对象，它就会抛出一个错误：

这是错误：

缺少类型映射配置或不支持的映射。

映射类型：LLBLGenProQuery `1 -> CostCentre SD.LLBLGen.Pro.LinqSupportClasses.LLBLGenProQuery`1[[Mail.DAL.EntityClasses.TblCostCentreEntity, Mail.DAL, Version=1.0.4638.16064, Culture=neutral, PublicKeyToken=null]] -> Mail.Model.CostCentre

目的地路径：CostCentre

源值：SD.LLBLGen.Pro.LinqSupportClasses.LLBLGenProQuery`1[Mail.DAL.EntityClasses.TblCostCentreEntity]

这是代码：

Dim metaData As New LinqMetaData Dim q = From p In metaData.TblCostCentre _ Select p Mapper.CreateMap(Of TblCostCentreEntity, CostCentre)()

```
 Dim t As IEnumerable(Of CostCentre) = Mapper.Map(Of CostCentre)(q)
    'Select New CostCentre With {.Active = p.Active, .CostCentre = p.CostCentre, .CreatedBy = p.CreatedBy, .DateCreated = p.DateCreated, .DateLastModified = p.DateLastModified, .ModifiedBy = p.ModifiedBy, .CostCentreID = p.CostCentreId}

    Return t 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T01:45:24.217

为了让 Automapper 实际执行映射，它必须查看 IQueryable 中的每个元素。一旦你迭代了一个可查询的，它就不再是可查询的，因为它已经被查询过了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-02-28T02:09:06.830

对于任何可能错过[评论链接的](https://stackoverflow.com/questions/2212126/does-automapper-support-linq/12365931#12365931)人，您可以使用 Automapper 的`[QueryableExtensions][1]`，特别是`ProjectTo`. 例如：

```
var collection = _db.Patients
     .ProjectTo<PatientDto>(_mapper.ConfigurationProvider); 
```

这将从 db 实体创建一个 IQueryable 投影。

# sql - 如果不是工作日，则计算两个工作日之前的日期，然后增加

> ID：12398291
> 
> 赞同：2
> 
> 时间：2012-09-13T01:39:36.833
> 
> 标签：sql, sql-server, sql-server-2008

我必须根据条件计算两天前的日期。

示例日期 = '2012-09-01' 那么 @date 应该是 '2012-08-30' 但如果 2012-08-31 不是工作日，那么 @date 应该是 '2012-08-29'。

你能帮我解决这个问题吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T04:10:14.507

您的问题虽然显然看起来很简单，但并非如此，因为其中涉及许多测试用例（至少我是这样解释的）。让我先编写查询（我假设您使用的是 Sql Server 2005+）

```
Declare @tbl_Data Table(Dates Date,WorkDayCount Int)

Insert Into @tbl_Data Select '2012-08-25',1
Insert Into @tbl_Data Select '2012-08-26',1
Insert Into @tbl_Data Select '2012-08-27',1
Insert Into @tbl_Data Select '2012-08-28',1
Insert Into @tbl_Data Select '2012-08-29',1
Insert Into @tbl_Data Select '2012-08-30',1
Insert Into @tbl_Data Select '2012-08-31',0
Insert Into @tbl_Data Select '2012-09-01',1

Declare @InputData Date = '2012-09-01'

;WITH CTE AS
(
    SELECT Sequence = ROW_NUMBER() OVER(ORDER BY Dates DESC),*
    FROM @tbl_Data
    WHERE  Dates < @InputData
)
,CTE2 AS
(
    SELECT 
        Sequence = ROW_NUMBER() OVER(ORDER BY Dates DESC)
        ,Dates 
        ,WorkDayCount
    FROM
    (
        SELECT * FROM CTE WHERE Sequence  = ((SELECT TOP 1 Sequence FROM CTE WHERE WorkDayCount = 1)-1)
        UNION  
        SELECT TOP 2 * FROM CTE WHERE WorkDayCount = 1
    )X
)
SELECT TOP 1
            Date = CASE WHEN  Sequence = 1 AND  WorkDayCount = 0 THEN (SELECT Dates FROM CTE2 WHERE  Sequence = 3)
                    WHEN  Sequence = 1 AND  WorkDayCount = 1 THEN (SELECT Dates FROM CTE2 WHERE  Sequence = 2)
            END 
FROM CTE2 
```

**案例1：输入日期为9月1日（2012-09-01），前一个日期的WorkDayCount = 0**

**结果：** `2012-08-29`

原因：由于 8 月 31 日的 WorkDayCount = 0，所以工作日为 8 月 29 日

**案例 2：输入日期为 9 月 1 日（2012-09-01），8 月 31 日 + 8 月 30 日 WorkCount = 0。**

**结果：** `2012-08-28`

**案例 3：输入日期为 9 月 1 日（2012-09-01），前一个日期的 WorkDayCount = 1**

**结果：** `2012-08-30`

如果任何假设/测试用例不正确，请纠正我。

让我知道你的担忧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T03:26:54.370

试试这个：

```
SELECT MIN(DATE_COL) 
FROM  (
        SELECT  TOP 2  DATE_COL 
        FROM TBL_DATE
        WHERE DATE_COL<='2012-09-01'
        AND WORKDAYCOUNT =1)A 
```

# php - 如何使输入框变大为文本区域？

> ID：12398298
> 
> 赞同：0
> 
> 时间：2012-09-13T01:41:19.147
> 
> 标签：php, html

我到处搜索以找到此问题的答案，但没有找到，如何使输入框更宽更大，作为我们可以设置它们的列和行的文本区域？

我的代码如下：

```
<td align="right">
    <input type="text" value="<?php echo $row_remark['remark']; ?>" name="remark" rows="8" cols="30">
</td> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T01:42:07.147

那是因为你做不到。为什么？因为这就是`<textarea>`目的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-01-11T13:36:21.190

您可以`textarea`为此使用标签。这是一个例子：

```
<textarea cols="30" rows="10"></textarea> 
```

您可以使用`cols`和`rows`属性为框指定您要查找的大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T01:45:17.917

改用 a `<textarea>`。这有点违反直觉，但这实际上也是一种输入类型。不知道为什么 textarea 不是有效`<input type='textarea' ...>`的，但它不是；相反，它是一个显式标签。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-07-26T02:09:41.273

对于输入类型的文本，您无法做到这一点，您可以使用 CSS 高度和宽度使其更大，但它可以只有一行，所以如果您想要更大的空间，您必须使用 chek bootstarp 他们有一些不错的 CSS文本区域

# postgresql - HDFS 到 PostgreSQL

> ID：12398307
> 
> 赞同：4
> 
> 时间：2012-09-13T01:42:59.253
> 
> 标签：postgresql, hadoop, etl, hdfs

我们需要一个流程来定期将数据从[Hadoop 分布式文件系统 (HDFS)提取到关系数据库 (PostgreSQL)。](http://hadoop.apache.org/hdfs/)我们需要每小时传输数百万条记录，我正在寻找最佳的行业标准来将数据移出 HDFS。有没有人有什么建议？这个想法是让 Web 应用程序与具有聚合数据的 PostgreSQL 交互。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T12:50:59.630

[Sqoop](http://sqoop.apache.org/)是为在关系数据存储和 Hadoop 之间移动数据而构建的。具体来说，您需要[sqoop-export](http://sqoop.apache.org/docs/1.4.2/SqoopUserGuide.html#_literal_sqoop_export_literal)。

# unix - 对文件进行复杂的连接

> ID：12398310
> 
> 赞同：0
> 
> 时间：2012-09-13T01:43:16.570
> 
> 标签：unix, join

我有看起来（基本上）像这样的文件（~1k）：

```
NAME1.txt
NAME    ATTR    VALUE
NAME1   x       1      
NAME1   y       2
...

NAME2.txt
NAME    ATTR    VALUE
NAME2   x       19
NAME2   y       23
... 
```

ATTR 列在每个文件中都是相同的，而名称列只是文件名的某个版本。我想将它们组合成一个文件，如下所示：

```
All_data.txt
ATTR    NAME1_VALUE    NAME2_VALUE    NAME3_VALUE ...
X       1              19             ...
y       2              23             ...
... 
```

是否有简单的方法可以仅使用命令行实用程序来执行此操作，还是我必须求助于编写一些脚本？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T15:06:05.343

你需要写一个脚本。gawk 是明显的候选者 您可以在 BEGIN 块中创建一个关联数组，使用 FILENAME 作为 KEY 和
ATTR " " VALUE 值作为值。然后在 END 块中创建您的输出。gawk 可以通过使用 *txt 作为文件名一起处理所有 txt 文件

期望有一个现成的命令可以完全按照您的意愿行事，这有点乐观。很少有命令水平连接数据。

# python - 读取文件名并直接写入列表

> ID：12398311
> 
> 赞同：2
> 
> 时间：2012-09-13T01:43:24.040
> 
> 标签：python, filenames

是否可以让 Python 查看文件夹并将所有文件名（具有特定扩展名）放入列表中？

例如：

```
[filename1.txt, filename2.txt,...] 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-13T01:46:21.697

您可以使用该`glob`模块轻松完成此操作：

```
import glob
filenames = glob.glob('<some_path>/*.<extension>') 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-10-16T01:18:16.643

我总是为此使用 os 模块，并且非常适合我。

```
import os
file_list = os.listdir(path)
print(file_list)

>>> ["file1.txt", "file2.txt", etc...] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-13T01:45:51.610

这是我找到的快速答案。

```
import os

txt_files = filter(lambda x: x.endswith('.txt'), os.listdir('mydir')) 
```

# php - 验证电子邮件验证页面是否已通过我的电子邮件访问？

> ID：12398313
> 
> 赞同：0
> 
> 时间：2012-09-13T01:43:34.060
> 
> 标签：php

我有一个电子邮件验证页面，我想确保它是通过电子邮件访问的，并且是*我的电子邮件*，并且有人不只是拥有、猜测或弄清楚 URL 的机制并造成一些恶作剧。

我正在调查`HTTP_REFERER`，但我听说这不是一种非常安全的检查方式，因为它很容易被欺骗？

除了电子邮件验证，我还有其他用途，但我想要一种更安全、更值得信赖的方法。有没有更好的方法来验证访客来自哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T01:47:30.473

NONCE 会有所帮助。在第一页向客户端发出 NONCE，然后客户端需要在回复中包含发出的 NONCE。

例如 WordPress 使用这种方法。

nonce = 使用一次的数字。参考[维基百科文章](http://en.wikipedia.org/wiki/Cryptographic_nonce)

PHP具体实现，参考[PHP手册](http://php.net/manual/en/oauth.setnonce.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T02:10:55.400

您不能信任 HTTP 标头：它可以被伪造。

您不能期望收到引用标头：来自的网站`HTTPS://`不会转发该信息。这样做会违反安全预期，不，你不能强迫它。

正如 Sepster 发布的那样，您可以使用 nonce。如果您希望使用 PHP 的 oAuth 以外的其他东西，您可以创建电子邮件的哈希值，并与来自 /dev/urandom 等来源的 24 位以上的加密安全伪随机数连接起来。如果您在 POSIX 操作系统上无权访问 /dev/urandom，则不应尝试编写安全软件。没有加密安全 PRNG 的安全软件不是安全软件。

您可以将该哈希存储在您的表中并滚动您自己的代码来处理尝试使用 nonce 进行的注册。

# ios - 检测触摸事件并将其传递给 MKMapView

> ID：12398316
> 
> 赞同：0
> 
> 时间：2012-09-13T01:44:18.293
> 
> 标签：ios, map, touch

我想检测到 MKMapView 的触摸事件但不干扰它们。有人对此有什么建议吗？

我已经尝试将 MKMapView 子类化并在 touchesBegan 等上调用 super 无济于事。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T03:08:00.950

如果有人需要这个，我可以通过覆盖来做到这一点

```
- (void)sendEvent:(UIEvent *)event 
```

在 UIWindow 上并在那里处理我的事件，然后再传递它们。

# java - 为 Spring Security 实现 JSON 响应

> ID：12398322
> 
> 赞同：1
> 
> 时间：2012-09-13T01:45:19.207
> 
> 标签：java, spring, spring-security

我有这个安全配置，当在我的应用程序控制器中访问“资源”时，它会返回一个 Spring 登录表单：

```
<http auto-config="true" create-session="stateless" use-expressions="true">
     <intercept-url pattern="/admin/*" access="hasRole('ROLE_ADMIN')"/>
     <intercept-url pattern="/admin*" access="hasRole('ROLE_ADMIN')"/>
</http> 
```

但是，我需要的是返回 JSON 响应而不是登录。当我尝试设置时`auto-config="false"`，出现此错误：

```
No AuthenticationEntryPoint could be established. 
```

我需要在我的应用程序中设置什么配置，以便它提供 JSON 响应而不是登录表单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T06:11:18.567

尝试在控制器 @ResponseBody 上指定 default-target-url="/url"。

# arrays - MongoDB查询百分比

> ID：12398326
> 
> 赞同：0
> 
> 时间：2012-09-13T01:45:27.870
> 
> 标签：arrays, mongodb

好吧，我想我做错了。这是我目前的收藏，但我需要按百分比订购。

```
array (
  '_id' => new MongoId("505006de36314b4b27000001"),
  'status' => 'pending',
  'store_id' => new MongoId("505006de36314b4b27000000"),
  'minspendone' => '50.00',
  'cashbackone' => '1.50',
  'percentageone'▼ => '0.03',
  'minspendtwo' => '100.00',
  'cashbacktwo' => '3.00',
  'percentagetwo' => '0.03',
  'minspendthree' => '',
  'cashbackthree' => '',
  'percentagethree' => '',
  'minspendfour' => '',
  'cashbackfour' => '',
  'percentagefour' => '',
) 
```

那么我最好将其更改为以下内容

```
array (
  '_id' => new MongoId("505006de36314b4b27000001"),
  'status' => 'pending',
  'store_id' => new MongoId("505006de36314b4b27000000"),
  'offers' => array( 
  'minspend' => '50.00',
  'cashback' => '1.50',
  'percentage' => '0.03'),
  array(
  'minspend' => '100.00',
  'cashback' => '3.00',
  'percentage' => '0.03'))
) 
```

有人可以告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T03:08:37.577

拉塞尔，

如果您希望使用 mongodb 内部排序功能，您需要将数组元素拆分为单独的文档。

Mongodb sort 用于设置返回的整个文档的顺序，而不是文档中元素的返回顺序。

希望澄清。

# backbone.js - Backbone.js：将此咖啡脚本转换为 jquery

> ID：12398327
> 
> 赞同：1
> 
> 时间：2012-09-13T01:45:30.127
> 
> 标签：backbone.js

我正在尝试学习如何使用backbone.js。问题是我正在关注的教程（Railscast）正在使用coffeescript，我宁愿使用jquery。我知道如何将coffeescript 中的函数更改为jquery，但我不知道如何更改路由的定义

```
 routes:
   '': 'index' 
```

我应该在它周围加上括号吗？警报不起作用，所以我假设路线的定义有问题。

这是最初的咖啡脚本

```
Backboner.Routers.Entries = Backbone.Router.extend

       routes:
       '': 'index'

       index: ->

        alert "homepage" 
```

javascript/jquery

```
Backboner.Routers.Entries = Backbone.Router.extend({

   routes:
   '': 'index'

   index: function(){

    alert("homepage");
   }
}); 
```

更新：我进行了建议的更改，但警报没有出现。

Javascripts/Backboner.js

```
window.Backboner = {
  Models: {},
  Collections: {},
  Views: {},
  Routers: {},
  init: function() {
    new Backboner.Routers.Entries();
    Backbone.history.start();
  }
}; 
```

Javascripts/路由器/entries.js

```
Backboner.Routers.Entries = Backbone.Router.extend({

   routes: {
   '': 'index'
    },

   index: function(){

    return alert('homepage');
   }
}); 
```

第二次更新：

将文件准备好放入文件

```
window.Backboner = {
  Models: {},
  Collections: {},
  Views: {},
  Routers: {},
  init: function() {
    new Backboner.Routers.Entries();
    Backbone.history.start();
  }
};

$(document).ready(function() {
  return Backboner.init();
}); 
```

第三次更新

清单文件

```
//= require jquery
//= require jquery_ujs
//= require underscore
//= require backbone
//= require backboner
//= require_tree ../templates/
//= require_tree .//models
//= require_tree .//collections
//= require_tree .//views
//= require_tree .//routers
//= require_tree . 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T14:34:41.637

有时当我想快速在两者之间来回切换以应对混乱的情况时，我会使用这个工具......它至少尝试了自动 Javascript -> CoffeeScript 转换。

[使用 js2coffee.org 风险自负 :)](http://js2coffee.org)

当然对于 Coffeescript -> Javascript 你可以使用 coffeescript 网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T01:49:18.673

简短的回答是肯定的，你应该在它周围加上花括号。将来，您可以直接在[CoffeeScript.org](http://coffeescript.org/)上通过单击“试用 CoffeeScript”将 CoffeeScript 转换为 Javascript。粘贴到 CoffeeScript 中，您将看到 Javascript 输出。

请记住，CoffeeScript 有**大量**空白，因此您的原始问题格式不正确。它应该是：

```
Backbone.Routers.Entries = Backbone.Router.extend

       routes:
         '': 'index'

       index: ->

         alert "homepage" 
```

使用 CoffeeScript 网站给出：

```
Backbone.Routers.Entries = Backbone.Router.extend({
  routes: {
    '': 'index'
  },
  index: function() {
    return alert("homepage");
  }
}); 
```

# google-chrome-extension - 识别 Chrome 扩展程序发出的请求？

> ID：12398337
> 
> 赞同：1
> 
> 时间：2012-09-13T01:47:21.420
> 
> 标签：google-chrome-extension, xmlhttprequest

我有一个 Web 应用程序，其中包含一些非常直观的 URL，因此人们编写了一些 Chrome 扩展程序，使用这些 URL 向我们的服务器发出请求。不幸的是，这些扩展给我们带来了问题，锤击我们的服务器，发出格式错误的请求等，所以我们试图弄清楚如何阻止它们，或者至少难以向我们的服务器发送请求以阻止这些扩展被使用（我们提供了他们应该使用的 API）。

我们尝试在请求中添加一些自定义标头，在响应中添加 junk-json-preamble，但扩展作者已经更新了他们的代码以匹配。

我不熟悉 chrome 扩展，那么他们对主机页面有什么样的访问权限？他们可以在主机页面上调用 JavaScript 函数吗？浏览器是否包含一个特殊的标头来区分主机页面请求和扩展请求？主机页面可以检查扩展列表并拒绝某些扩展吗？

我们考虑过的一些选项是：

1.  用户限制 QPS 的速率，但问题不在于所有查询都是平等的，并且扩展通常会启动几个看起来像用户输入查询的昂贵查询。
2.  限制用户可以使用的服务器时间，但问题是用户可能会通过多次浏览或运行昂贵的查询来达到此限制。
3.  添加静态自定义标题/响应文本，但他们更新了代码以模仿我们的代码。
4.  找出某种令牌（可能以某种方式加密），我们在请求中包含扩展无法轻易猜到的令牌。我们缩小/混淆了我们的 JS，因此可以将它嵌入到 JS 源代码中（因为它的变量名很难猜到）。

我意识到这可能不是一个 100% 可解决的问题，但我们希望要么让我们在对抗它方面占上风，要么让我们的 UI 变得足够困难，以至于更少的人这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T03:45:50.027

哎呀，估计没人知道。最后，我们只是发送了一个自定义标题并开始跟踪没有发送它的人。

# jquery-plugins - 无法使 Scrollspy Bootstrap 工作

> ID：12398340
> 
> 赞同：0
> 
> 时间：2012-09-13T01:47:46.240
> 
> 标签：jquery-plugins, twitter-bootstrap, scroll

我正在设计一个单页网站，并且希望固定导航链接在用户滚动到指定位置时改变颜色。似乎很容易做到，我认为这很容易做到，但我在使它工作时遇到了问题。

我只下载了 Scrollspy JS 插件，因为我没有使用 Twitter Bootstrap CSS。我只需要 Scrollspy 插件。

你能检查一下这个 jsFiddle 并提供一些指导吗？我已经在[这里](http://twitter.github.com/bootstrap/javascript.html#scrollspy)查看了文档，但我没有运气。任何帮助是极大的赞赏 ：）

[http://jsfiddle.net/xjTpk/28/](http://jsfiddle.net/xjTpk/28/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T05:15:00.453

忽略您使用 JSFiddle ^(**1**)和印刷错误^(**2**)的严重问题，错误的原则是

1.  您需要导航栏中的 .nav 类`<ul>`，并且
2.  `#welcome`不是现有元素，导致 JS 错误。

这是一个固定的演示：

## [JSFiddle](http://jsfiddle.net/xjTpk/48/)

哦，你不需要 data-api 和 js 来初始化插件；选一个。

[**1**同时加载Bootstrap 2.0.2 + 2.0.4；试图`<body>`在 html 面板中包含一个]

[**2**在不需要它的函数上使用 upperCamelCase: `scrollSpy()`;]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T05:10:36.693

您缺少的关键是您必须在 ul 元素（或其他一些父元素）上有一个“导航”类，因为它在 scrollspy 代码中用作选择器的一部分。

由于某种原因，我无法让你的工作，但这里有一个简化的例子：http: [//jsfiddle.net/UWzeD/5/](http://jsfiddle.net/UWzeD/5/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T13:40:31.753

您的 ul 需要一个 nav 类，但要让 scrollspy 正常工作，最重要的是您的目标必须是 ul 的一个级别。否则我发现 scrollspy 不起作用。

# javascript - 每个循环中的 settimeout 有问题

> ID：12398347
> 
> 赞同：0
> 
> 时间：2012-09-13T01:49:23.883
> 
> 标签：javascript, jquery, settimeout, each

我正在尝试循环一些以毫秒为单位的值。我需要每隔 xxxx 秒运行一次代码，具体取决于他从循环中获得的值，但我无法让它工作，它工作得很好，但它没有按时运行。

该代码包含一个重置按钮（代码来自插件，但我必须修改它）

**//插件选项**

```
 step:[
      {
          time: 6000,
          // more stuff here 
          // but we dont need 
          // it in this example
      },
      {
          time: 3000,
          // more stuff here 
          // but we dont need 
          // it in this example
      },
      {
          time: 12000,
          // more stuff here 
          // but we dont need 
          // it in this example
      }
  ] 
```

**// 循环**

```
 var timeouts = [];
  $.each(options.step, function(i, value){

      var time =  value.time;                                                       
      timeouts.push(setTimeout(function(){

          alert('some action');

      },time*i));

  }); 
```

**// 复位按钮**

```
 $('.stop').click(function(){
      $.each(timeouts, function (_, id) {
          clearTimeout(id);
      });
      timeouts = [];
  }) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T01:55:23.287

我的主要猜测是您没有设置所需的计时器时间。你正在使用`i * value.time`你的计时器时间，这看起来很奇怪。你是否意识到这`i`是你数组的索引，所以第一次它会是零，然后是 1，然后是 2，等等......

这将导致计时器时间：`0*6000, 1*3000, 2*12000`转换为`0, 3000, 24000`。

这似乎不是你想要的。

此外，浏览器中的 Javascript 是单线程的（除了 webWorkers 和一些我们在这里不讨论的事件副作用）。因此，`setTimeout()`不能保证准确。如果在计时器事件触发时正在运行其他东西，则该计时器事件将进入事件队列，并将在当前 Javascript 执行线程完成后运行。因此`setTimeout()`，如果在触发时有其他东西正在运行，则不会准时运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T01:57:59.067

您设置的时间间隔将为 0 秒 (6000 * 0)、3 秒 (3000 * 1) 和 24 秒 (24000 * 2)。这是因为您要乘以索引 ( `i`)。这是您要达到的时间间隔吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T01:58:45.377

`time*i`- 这可能是你的问题。

以您提供的数据为例，您将获得以下时间：`6000`, `3000`, `12000`.

让我们将这些乘以`i`，您将得到`0`, `3000`, `24000`。

编辑：正如下面评论中所建议的，您希望第一个值始终为零，并且结果值保持原样。

将超时的延迟设置为`i == 0 ? 0 : time`将起作用。

这基本上意味着`expression ? true : false;`

这是一个例子：http: [//jsfiddle.net/2ka9g/1/](http://jsfiddle.net/2ka9g/1/)

# silverlight - 禁用 TabItem 的工具提示

> ID：12398348
> 
> 赞同：2
> 
> 时间：2012-09-13T01:49:45.730
> 
> 标签：silverlight, xaml

我想要在 TabControl 中为禁用的 TabItems 提供工具提示。在 Silverlight 中将工具提示放在禁用控件上的标准方法是将控件包装在具有工具提示的虚拟元素中，但我无法像那样访问 TabItem。TabItems 的宿主控件是一个 TabPanel，它似乎没有公开任何有用的属性。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T08:19:08.540

将 Toolip 放在禁用的菜单项上时我遇到了同样的问题，我通过将菜单项的 VisualState 更改为 Disabled 然后禁用 MouseButton 事件来解决它。

```
VisualStateManager.GoToState(tabitem, "Disabled", true); 
```

但是，您必须小心其他事件，因为 VisualState 会根据不同的事件而改变。这不是一个完美的解决方案，但它适用于某些场景。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T09:17:46.887

我目前针对自己的问题的解决方法：

我有一个 TabControl Behavior，它可以找到“TabPanelTop”模板部分（或左侧、右侧或底部，具体取决于 TabStripPlacement）以及“TemplateTop”。我在 TemplateTop（它是一个网格）中添加了一个 Canvas，并用透明矩形填充它，其位置（使用 TransformToVisual）和大小被计算（和更新）与 TabItems 相同，它们是 TabPanelTop 的子项。

Rectangles 的可见性绑定到 TabItem IsEnabled 的逆，ToolTipService.ToolTip 绑定到 TabItem 上的 ToolTipService.ToolTip。

这有点吓人，但它有效且易于使用。

# sql - 绘制 EER 模型创建 Store Database 系统

> ID：12398353
> 
> 赞同：1
> 
> 时间：2012-09-13T01:50:44.630
> 
> 标签：sql, database-design, relational-database, er-diagrams, eer-model

我在数据库站点上问了以下问题：

> 我正在尝试为拥有 5 个位置并提供一系列汽车产品的 Autostore 构建 EER 模型。他们还提供汽车维修和适行性测试服务。我需要能够每两周报告一次未完成的服务工作，每两周报告一次销售情况。他们有一个广泛的客户数据库，里面有完整的地址。新库存商品不断流入，旧商品不断补充库存。还应该有一种方法可以了解库存中每件商品的成本以及存放地点。
> 
> 我发誓我已经对它进行了足够的研究，现在能够理解它，但我真的很难把它映射出来，因为在处理特定商店正在补货、销售和库存的产品时，我经常遇到困难。不同的位置。
> 
> -我是这种事情的新手，但如果有人能帮助我，那就太棒了。

但我正在努力寻找答案，并在想，如果我在这里请某人建立一个 SQL 设置，它可能会引导我走向能够制作模型的方向，或者如果有一种构建关系模型的方法，那么它从那里开始将是一个简单的步骤，除非有人有原始答案 - 或者他们所有人哈哈，希望你能提供帮助！

谢谢，雅各布

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T02:24:20.730

如果您正在努力创建 EER 图，我猜您可能没有为应用程序捕获足够详细的需求。清楚地了解应用程序应提供的功能应该为您需要在数据库中建模的内容奠定基础。

问自己这些问题。

我是否为将使用该应用程序的每种类型的用户创建了用户配置文件？我是否概述了这些用户将在应用程序上执行的每个操作以及操作的详细信息？

这些只是您希望充分解决的众多问题中的两个。如果您已经完全解决了这些主题和其他所有问题，那么您可能只需要一种不同的方法来组织您的需求。

将其分解为数据段。例如，您需要创建一个管理库存的表系统。然后需要将其链接到管理销售和服务记录的表系统。这将需要链接到管理客户数据的表系统。销售/服务和库存控制需要与管理员工及其角色和做事能力（安全性、特权等）的表格系统相关联。我可以在理论上继续谈论这个问题，但这应该足以让你开始。

祝你好运。

# java - 什么是 url 双重转义？

> ID：12398356
> 
> 赞同：-2
> 
> 时间：2012-09-13T01:51:07.227
> 
> 标签：java, url-encoding

我正在寻找在java中双重转义一个url字符串。我不知道双重转义网址是什么意思。我还要求有人发布我可以用来执行此操作的示例 java 代码。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T03:17:50.733

> 如何在java中双重转义一个url字符串

简单的答案是转义它，然后再次转义它。

假设“转义”确实意味着 URL 编码，那么：

```
String input = ...
String output = URLEncoder.encode(URLEncoder.encode(input, "UTF-8"), "UTF-8"); 
```

但是，正确的解决方案可能比这更复杂……*取决于您要对结果做什么*。例如，如果您对完整的 URL 字符串进行 URL 编码（一次或两次），则它不再是有效的 URL。

如果您花时间解释上下文，我们将能够更好地为您提供可能真正适合您的解决方案。

# multithreading - throw：所有的 goroutine 都处于休眠状态 - 死锁

> ID：12398359
> 
> 赞同：21
> 
> 时间：2012-09-13T01:51:41.230
> 
> 标签：multithreading, go, deadlock, channel

给定以下简单的 Go 程序

```
package main

import (
    "fmt"
)

func total(ch chan int) {
    res := 0
    for iter := range ch {
        res += iter
    }
    ch <- res
}

func main() {
    ch := make(chan int)
    go total(ch)
    ch <- 1
    ch <- 2
    ch <- 3
    fmt.Println("Total is ", <-ch)
} 
```

我想知道是否有人可以告诉我为什么我会得到

```
throw: all goroutines are asleep - deadlock! 
```

谢谢你

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-09-13T06:45:22.467

由于您永远不会关闭`ch`通道，因此范围循环将永远不会结束。

您不能在同一频道上发回结果。一个解决方案是使用不同的。

您的程序可以这样调整：

```
package main

import (
    "fmt"
)

func total(in chan int, out chan int) {
    res := 0
    for iter := range in {
        res += iter
    }
    out <- res // sends back the result
}

func main() {
    ch := make(chan int)
    rch  := make(chan int)
    go total(ch, rch)
    ch <- 1
    ch <- 2
    ch <- 3
    close (ch) // this will end the loop in the total function
    result := <- rch // waits for total to give the result
    fmt.Println("Total is ", result)
} 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2016-12-22T12:01:59.390

这也是对的。

```
package main

import "fmt"

func main() {
    c := make(chan int)
    go do(c)
    c <- 1
    c <- 2
    // close(c)
    fmt.Println("Total is ", <-c)
}

func do(c chan int) {
    res := 0
    // for v := range c {
    //  res = res + v
    // }
    for i := 0; i < 2; i++ {
        res += <-c
    }
    c <- res
    fmt.Println("something")
} 
```

# python - 将预定参数传递给 scipy.optimize.fsolve

> ID：12398368
> 
> 赞同：2
> 
> 时间：2012-09-13T01:52:43.583
> 
> 标签：python, scipy, nonlinear-functions

我正在尝试使用 python 来求解一个由 6 个非线性方程组成的系统。有 9 个变量，其中 3 个是预先确定的（留下 6 个方程和 6 个未知数的系统）。问题是，它可能是任何 3，我无法事先知道。

这是方程式（如果您有兴趣）。

c11*c12 + c21*c22 + c31*c32 = 0

c11*c13 + c21*c23 + c31*c33 = 0

c12*c13 + c22*c23 + c32*c33 = 0

c11*c21 + c12*c22 + c13*c23 = 0

c11*c31 + c12*c32 + c13*c33 = 0

c21*c31 + c22*c32 + c23*c33 = 0

* * *

注意：这是我认为最快/最容易解决的方法。另一种可能的表达方式是：

```
 |c11 c21 c31|
A = |c12 c22 c32|
    |c13 c23 c33|

    |c11 c12 c13|
B = |c21 c22 c23|
    |c31 c32 c33|

      |1 0 0|
A*B = |0 1 0|
      |0 0 1| 
```

* * *

**我的问题是：无论如何将其中 3 个设置为固定，并让 scipy.optimize.fsolve （或更合适的模块？）解决剩余的参数？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T18:43:26.167

所以，我自己找到了一个有效的解决方案。不确定它是否是最好的解决方案，但它很实用。

要回答我的问题， scipy.optimize.fsolve 需要一个参数 args =（此处为额外参数）。我把预定的参数放在这里。调用该函数时，首先解析 args 并将 3 个预定值放置在适当的位置。

剩余的 6 个变量在列表中传递，并迭代以填补剩余的空白。由于参数没有改变，每个变量总是被放置在矩阵中的相同位置。

使用这种方法，可以预先确定任意 3 个矩阵元素，并且 fsolve 将尝试确定余数。

fsolve 的调用语句如下所示：

```
paramSolve1, infodict, ier, mesg = scipy.optimize.fsolve(func,(i,i,i,i,i,i),args = (knownVals[0],knownVals[1],knownVals[2]), full_output = True, warning = False) 
```

knwonVals 是预先确定的参数列表，i 是起始猜测（所有 6 个缺失的参数都得到相同的起始猜测）。full_output 允许返回可选输出，warning = False 关闭未找到解决方案时出现的警告消息。有关更多信息，请查看[http://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.fsolve.html](http://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.fsolve.html)

对于那些感兴趣的人，问题的整个代码如下。

```
import scipy
from scipy.optimize import fsolve

def func(params, *args):
    c = propMatrix(createMatrix(args), params)

    ans =(scipy.dot(c[:, 0],c[:, 1]), scipy.dot(c[:, 1],c[:, 2]), scipy.dot(c[:, 0],c[:, 2]),scipy.dot(c[:, 0],c[:, 0])-1,scipy.dot(c[:, 1],c[:, 1])-1,scipy.dot(c[:, 2],c[:, 2])-1)
    return ans

def createMatrix(knownVals):

    c = [['____', '____', '____'],['____', '____', '____'], ['____', '____', '____']]  

    for element in knownVals:
        x, y, val = element
        c[y][x] = float(val)
    return c

def propMatrix(c, params):
    for p in params:
        assign = True
        for x in range(3):
            for y in range(3):
                if c[x][y]=='____' and assign:
                    c[x][y] = float(p)
                    assign = False

    return scipy.array(c)

def test(c):
    v1 = c[:, 0]
    v2 = c[:, 1]
    v3 = c[:, 2]
    h1 = c[0, :]
    h2 = c[1, :]
    h3 = c[2, :]
    ans = (scipy.dot(v1,v1)-1, scipy.dot(v1,v2), scipy.dot(v1, v3), scipy.dot(v2, v2)-1, scipy.dot(v2, v3), scipy.dot(v3,v3)-1, scipy.dot(h1,h1)-1, scipy.dot(h1,h2), scipy.dot(h1, h3), scipy.dot(h2, h2)-1, scipy.dot(h2, h3), scipy.dot(h3,h3)-1)
    return ans

def getInput():
    knownVals = []
    print """\n\nThis module analytically solves for the rotation matrix\n
    First, enter 3 known values of the matrix:\n
                 x
            1    2    3   
       1 | c11  c12  c13 |
    y  2 | c21  c22  c23 |
       3 | c31  c32  c33 |\n\n"""

    for i in range(3):
        invalid = True
        print "Point Number %i:"%(i)
        while invalid:
            x = int(raw_input("\tx-coordinate:"))-1
            if x>2 or x<0:
                print "\tInvalid x-coordinate."
            else:
                invalid = False
        invalid = True
        while invalid:
            y = int(raw_input("\ty-coordinate:"))-1
            if y>2 or y<0:
                print "\tInvalid y-coordinate."
            else:
                invalid = False
        invalid = True
        while invalid:
            val = float(raw_input("\tValue:"))
            if val>1 or val<-1:
                print "\tInvalid value. Must be -1 <= value <= 1"
            else:
                invalid = False
        knownVals.append((x, y, val))
    c = createMatrix(knownVals)
    print "Input Matrix:\n\n", scipy.array(c)
    choice = raw_input("\nIs this correct (y/n)?  ")
    if choice == "y":
        return knownVals
    elif choice == "n":
        return getInput()

def Main():
    solution = False
    knownVals = getInput()
    for i in (-1,-.5,0,.5,1):
        paramSolve1, infodict, ier, mesg = scipy.optimize.fsolve(func,(i,i,i,i,i,i),args = (knownVals[0],knownVals[1],knownVals[2]), full_output = True, warning = False)
        if ier == 1:
            print "\nInitial value: %r"%(i) 
            print propMatrix(createMatrix(knownVals),paramSolve1)
            solution = True
    if not solution:
        print "Could not find a valid solution"

scipy.set_printoptions(precision = 4, suppress = True)
Main() 
```

# c# - 为什么选择 System.Threading 而不是 BackgroundWorker？

> ID：12398371
> 
> 赞同：2
> 
> 时间：2012-09-13T01:53:00.593
> 
> 标签：c#, .net, multithreading

如果最后一个为我抽象了踩踏管理网，为什么我会决定直接使用 System.Threading 而不是 BackgroundWorker？

我看不到无法使用 BackgroundWorker 替换 System.Threading 的情况

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-13T02:21:05.730

`BackgroundWorker`自 .NET 2.0 以来一直存在，旨在帮助编写将在后台线程中运行且不会阻塞 UI 线程的代码。它最初出现在 Windows 窗体中，但也适用于 WPF 或任何未来的注册同步上下文的 UI 框架。它允许您将进度和结果报告回 UI 线程，而无需处理`InvokeRequired`/`BeginInvoke`还支持取消。

任务并行库 (TPL) 是在 .NET 4 中引入的，旨在为异步任务建模。这些任务是异步的，可能会也可能不会在另一个线程上运行。不在另一个线程上运行的示例是异步 IO 和需要在 UI 上运行的任务（同时仍然是异步的）。此任务隐喻还支持期货（或延续），以便您可以将任务与 链接在一起`ContinueWith`，有时使用特定的同步上下文，以便您可以执行诸如在 UI 线程上运行任务（例如更新 UI）之类的事情。

任务还支持取消，多个任务可以共享一个取消令牌，因此请求的取消会取消多个任务。

区别之一是`Task`没有将进度报告回 UI 的固有方法。当然这是可能的，但它不是内置在接口中的。 `Task`s 也支持取消。

如果您只想在后台做一件事，并且特别想与 UI 进行交流，例如报告进度，我建议您使用`BackgroundWorker`. 否则，我通常建议使用`Task<T>`（或者`Task`如果不需要结果）。 `Task`在 C# 5 async/await 语法中固有地使用...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T02:12:39.870

我希望您尝试考虑每种方法的意图。

BackgroundWorker 一开始主要是为 Windows 窗体设计的（虽然它也可以在 WPF 中使用），它只提供了一些异步操作的功能。与 System.Threading 下的所有类相比，您可以看到 BackgroundWorker 显然是建立在它们之上的。

使用 System.Threading 下的所有类，您可以构建自己的 BackgroundWorker 并享受更多功能和对代码的控制。这里的困难是尖锐的学习曲线和调试挑​​战。

所以如果你觉得 BackgroundWorker 就够用了，继续用吧。如果您发现缺少某些东西，System.Threading 中的构建块可以成为您的帮手。

在 .NET Framework 4 中，微软在 System.Threading 上设计了另一组类，命名为基于任务的异步模式，

[http://www.microsoft.com/en-us/download/details.aspx?id=19957](http://www.microsoft.com/en-us/download/details.aspx?id=19957)

使用它，您几乎可以忘记 BackgroundWorker，因为它提供了更多功能并为您提供了足够的控制权，同时不需要您深入研究直接使用 System.Threading 的复杂性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-13T02:50:09.463

我有[一篇关于这个主题的博文](http://nitoprograms.blogspot.com/2010/08/various-implementations-of-asynchronous.html)。

简而言之，`async Task`如果可能的话，你应该使用 s。`Thread`确实提供了一些额外的“旋钮” - 例如`Priority`- 但通常这些旋钮不是必需的，并且程序员经常以错误的方式转动它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T02:02:42.163

一方面，您不能在 BackgroundWorker 上设置调度优先级，但可以在 Thread 上设置。

[Thread.Priority 属性](http://msdn.microsoft.com/en-us/library/system.threading.thread.priority.aspx)

对我的回答提出质疑的评论继续参考 Task 和 ThreadPool。所述问题与 Task 或 ThreadPool 无关，我的回答也不是。

请参阅上面链接中的代码示例。它清楚地演示了在启动线程之前分配优先级并控制启动线程。

完整的代码示例：

```
PriorityTest priorityTest = new PriorityTest();
ThreadStart startDelegate =  new ThreadStart(priorityTest.ThreadMethod);

Thread threadOne = new Thread(startDelegate);
threadOne.Name = "ThreadOne";
Thread threadTwo = new Thread(startDelegate);
threadTwo.Name = "ThreadTwo";

threadTwo.Priority = ThreadPriority.BelowNormal;
threadOne.Start();
threadTwo.Start();

// Allow counting for 10 seconds.
Thread.Sleep(10000);
priorityTest.LoopSwitch = false; 
```

我对此进行了测试，ThreadTwo 在 ThreadPriority.BelowNormal 上开始和结束。在我的测试中，threadOne 处理大约 10X 作为 threadTwo。

BackGroundWorker 没有 Priority 属性。BackgroundWorker 以默认的 Normal 优先级启动。在 DoWork 中可以更改 BackgroundWorker 线程的优先级，但在工作开始后更改线程的优先级显然是不一样的。

# hadoop - Hadoop 的标准 Mapper 和 Reducer 类？

> ID：12398372
> 
> 赞同：0
> 
> 时间：2012-09-13T01:53:21.830
> 
> 标签：hadoop, spring-batch, spring-data

是否有适用于 Hadoop 的标准 Mappers 和 Reducers 的包或集合？

例如，OpenMP 带有一组预定义的用于循环并行化的化简器，它派上用场，但不可扩展。对于 Hadoop，一组类似的基本 reducer 会很方便。

当您使用 Spring-Data Hadoop 构建 Spring Batch 应用程序时，这样的集合将非常有用。

如果没有这样的东西，我们可以开始收集。

氪，R

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T17:28:38.553

Hadoop 附带了大量的 Mappers 和 Reducers。它们存储在 中`org.apache.hadoop.mapred.lib`，并涵盖了各种各样的用例。如果您想查看快速列表，[这](http://hadoop.apache.org/docs/r0.20.0/api/org/apache/hadoop/mapred/lib/)是`mapred.lib`javadocs Web UI。看一看，看看其中是否符合您的需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T17:41:11.470

看看这个[github 项目](https://github.com/SpringSource/spring-hadoop)。我从来没有使用过它，但它声称里面有 spring 和 hadoop 的东西。

# c++ - QNetworkReply 回复在finishedSlot 中没有成员

> ID：12398373
> 
> 赞同：1
> 
> 时间：2012-09-13T01:53:38.730
> 
> 标签：c++, web-services, qt

Qt Creator 用作这个正在开发的小应用程序的 ide

我正在尝试使用 QNetworkAccessManager 从网站检索一些信息。将请求“发布”到网络后，将触发 finished() 信号，但是传递给 finishedSlot() 函数的指针似乎并未指向实例化对象，它只是指针的地址。启动请求的按钮单击代码和finishedSlot() 方法的代码如下所示。

在监视窗口中，我希望在“回复”旁边看到一个三角形，展开后会显示 QNetworkReply 对象的所有数据成员。相反，它有一个 @0x80c770 的值，看起来像指针地址。

我很感激任何可以帮助我理解为什么我的指针似乎没有指向 QNetworkReply 对象的人的意见。

```
void MainWindow::on_btnGetOAuthToken_clicked()
{

    QUrl serviceUrl("https://api.ProPhotoWebsite.com/services/oauth/authorize.mg");
    QUrl postData;
    postData.addQueryItem("method", "ProPhotoWebsite.auth.getRequestToken");
    postData.addQueryItem("oauth_consumer_key", "AAAAAAAAAAAAAAAAAAAAAAAA"); //example key
    postData.addQueryItem("oauth_nonce",QUuid::createUuid().toString());
    postData.addQueryItem("oauth_signature_method","PLAINTEXT");  
    postData.addQueryItem("oauth_signature","999999999999999999999999999"); //example
    postData.addQueryItem("oauth_timestamp", QString::number(QDateTime::currentMSecsSinceEpoch()/1000));
    postData.addQueryItem("oauth_version","1.0");

    //...
    QNetworkRequest request(serviceUrl);
    request.setHeader(QNetworkRequest::ContentTypeHeader,
                      "application/x-www-form-urlencoded");

    // Call the webservice
    QNetworkAccessManager *nam = new QNetworkAccessManager(this);
    connect(nam, SIGNAL(finished(QNetworkReply*)),
            SLOT(finishedSlot(QNetworkReply*)));
    nam->post(request,postData.encodedQuery());

}

void MainWindow::finishedSlot(QNetworkReply *reply)
{
    // Reading attributes of the reply
    // e.g. the HTTP status code
    QVariant statusCodeV =
            reply->attribute(QNetworkRequest::HttpStatusCodeAttribute);
    // Or the target URL if it was a redirect:
    QVariant redirectionTargetUrl =
            reply->attribute(QNetworkRequest::RedirectionTargetAttribute);
    // see CS001432 on how to handle this

    // no error received?
    if (reply->error() == QNetworkReply::NoError)
    {

        QByteArray bytes = reply->readAll();  // bytes
        QString string(bytes); // string
        ui->lblWarning->setText(string);

    }
    else
    {
        // handle errors here
    }

    // need to dispose reply
    delete reply;
} 
```

# html - 如何在列表中设置列表样式？

> ID：12398376
> 
> 赞同：1
> 
> 时间：2012-09-13T01:53:59.930
> 
> 标签：html, css

我在列表中有一个列表，但我不希望内部列表接收外部列表的样式。这是我的代码：

CSS：

```
li {
    background-color:red;
}

#sections li {
    color:blue;
} 
```

HTML：

```
<ol id="sections">
<li>Item 1</li>
<li>Item 2</li>
<li>
<ol><li>Item A</li>
<li>Item C</li>
</ol>
</ol> 
```

我可以设置`color`为我的默认值，但这有点像 hack，将来如果我在样式中添加一些东西，`#sections li`它可能会与内部列表样式混淆，所以我认为这是一种糟糕的编码形式。

如何使内部列表不受外部列表的影响？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T01:56:57.337

可能想要为嵌套列表做一个新的样式，像这样：

```
ol ol li,
ol ul li,
ul ol li,
ul ul li
{
    /* Nested list styles */
    background: #FFF;
    color: #000;
} 
```

您还可以使用[`>`子选择器](http://www.w3.org/TR/CSS2/selector.html#child-selectors)仅针对顶级`<li>`s：

```
ol#selections > li
{
    color: blue;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T01:56:34.017

我相信你想要的是

```
ul li {color:blue}
ul li li {color:white;} 
```

只需更改第二种颜色

# buffer - 是否可以让 zlib 从同一个内存缓冲区读取和写入？

> ID：12398377
> 
> 赞同：4
> 
> 时间：2012-09-13T01:54:00.933
> 
> 标签：buffer, zlib, in-memory

我有一个要压缩到位的字符缓冲区。现在我已经设置好了，所以有两个缓冲区，zlib 的 deflate 从输入缓冲区读取并写入输出缓冲区。然后我必须更改输入缓冲区指针以指向输出缓冲区并释放旧的输入缓冲区。这似乎是不必要的分配量。由于 zlib 正在压缩，next_out 指针应该总是落后于 next_in 指针。无论如何，我找不到足够的文档来验证这一点，并希望有人对此有一些经验。谢谢你的时间！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-13T18:51:03.497

可以做到，但要小心。下面的例程做到了。并非所有数据都是可压缩的，因此您必须处理输出数据赶上输入数据的情况。它需要大量不可压缩的数据，但它可能会发生（参见代码中的注释），在这种情况下，您必须分配一个缓冲区来临时保存剩余的输入。

```
/* Compress buf[0..len-1] in place into buf[0..*max-1].  *max must be greater
   than or equal to len.  Return Z_OK on success, Z_BUF_ERROR if *max is not
   enough output space, Z_MEM_ERROR if there is not enough memory, or
   Z_STREAM_ERROR if *strm is corrupted (e.g. if it wasn't initialized or if it
   was inadvertently written over).  If Z_OK is returned, *max is set to the
   actual size of the output.  If Z_BUF_ERROR is returned, then *max is
   unchanged and buf[] is filled with *max bytes of uncompressed data (which is
   not all of it, but as much as would fit).

   Incompressible data will require more output space than len, so max should
   be sufficiently greater than len to handle that case in order to avoid a
   Z_BUF_ERROR. To assure that there is enough output space, max should be
   greater than or equal to the result of deflateBound(strm, len).

   strm is a deflate stream structure that has already been successfully
   initialized by deflateInit() or deflateInit2().  That structure can be
   reused across multiple calls to deflate_inplace().  This avoids unnecessary
   memory allocations and deallocations from the repeated use of deflateInit()
   and deflateEnd(). */
int deflate_inplace(z_stream *strm, unsigned char *buf, unsigned len,
                    unsigned *max)
{
    int ret;                    /* return code from deflate functions */
    unsigned have;              /* number of bytes in temp[] */
    unsigned char *hold;        /* allocated buffer to hold input data */
    unsigned char temp[11];     /* must be large enough to hold zlib or gzip
                                   header (if any) and one more byte -- 11
                                   works for the worst case here, but if gzip
                                   encoding is used and a deflateSetHeader()
                                   call is inserted in this code after the
                                   deflateReset(), then the 11 needs to be
                                   increased to accomodate the resulting gzip
                                   header size plus one */

    /* initialize deflate stream and point to the input data */
    ret = deflateReset(strm);
    if (ret != Z_OK)
        return ret;
    strm->next_in = buf;
    strm->avail_in = len;

    /* kick start the process with a temporary output buffer -- this allows
       deflate to consume a large chunk of input data in order to make room for
       output data there */
    if (*max < len)
        *max = len;
    strm->next_out = temp;
    strm->avail_out = sizeof(temp) > *max ? *max : sizeof(temp);
    ret = deflate(strm, Z_FINISH);
    if (ret == Z_STREAM_ERROR)
        return ret;

    /* if we can, copy the temporary output data to the consumed portion of the
       input buffer, and then continue to write up to the start of the consumed
       input for as long as possible */
    have = strm->next_out - temp;
    if (have <= (strm->avail_in ? len - strm->avail_in : *max)) {
        memcpy(buf, temp, have);
        strm->next_out = buf + have;
        have = 0;
        while (ret == Z_OK) {
            strm->avail_out = strm->avail_in ? strm->next_in - strm->next_out :
                                               (buf + *max) - strm->next_out;
            ret = deflate(strm, Z_FINISH);
        }
        if (ret != Z_BUF_ERROR || strm->avail_in == 0) {
            *max = strm->next_out - buf;
            return ret == Z_STREAM_END ? Z_OK : ret;
        }
    }

    /* the output caught up with the input due to insufficiently compressible
       data -- copy the remaining input data into an allocated buffer and
       complete the compression from there to the now empty input buffer (this
       will only occur for long incompressible streams, more than ~20 MB for
       the default deflate memLevel of 8, or when *max is too small and less
       than the length of the header plus one byte) */
    hold = strm->zalloc(strm->opaque, strm->avail_in, 1);
    if (hold == Z_NULL)
        return Z_MEM_ERROR;
    memcpy(hold, strm->next_in, strm->avail_in);
    strm->next_in = hold;
    if (have) {
        memcpy(buf, temp, have);
        strm->next_out = buf + have;
    }
    strm->avail_out = (buf + *max) - strm->next_out;
    ret = deflate(strm, Z_FINISH);
    strm->zfree(strm->opaque, hold);
    *max = strm->next_out - buf;
    return ret == Z_OK ? Z_BUF_ERROR : (ret == Z_STREAM_END ? Z_OK : ret);
} 
```

# php - 如何根据数据库中的行创建文件数组？

> ID：12398378
> 
> 赞同：1
> 
> 时间：2012-09-13T01:54:02.343
> 
> 标签：php

在 PHP 中，我有一组照片：

```
$file = array('p1.jpg','p2.jpg','p3.jpg'); 
```

现在我想根据数据库中的行和上传/删除的文件进行动态处理。例如，如果用户上传了 10 张照片并删除了第 2、3、5、9 张照片，则数组现在为：

```
$file = array('p1.jpg','p4.jpg','p6.jpg','p7.jpg','p8.jpg','p10.jpg'); 
```

当用户上传文件时，php脚本将文件名更改为“p”+whatever-row-the-database-is-at+“.jpg”。

我假设我将使用一个循环来测试该行是否存在于数据库中，好吧我很好，但是如何使该输出成为我需要的正确数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T01:55:58.600

我猜你是 PH​​P 新手？

```
$file = array();
while(.....) { //your loop goes here
  $file[] = ....; //add elements here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T01:57:52.913

如果您要遍历整个数组以检查数据库中是否仍然存在条目，则实际删除整个数组并使用新数据库查询的结果重建它可能会更快（因为数据库查询会更快找到感兴趣的行，而不是迭代地调用数据库来检查一行是否仍然感兴趣）。

# java - 为什么我尝试使用组件上传文件后总是得到 Null xhtml的代码如下： <h:form enctype="multipart/form-data" id="importForm">问问题 问问题 2012-09-13T01:54:04.167 89 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. xhtml的代码如下：

| <t:inputfileupload id="upFile" title="#{messages['global.label.import.browse']}" value="#{attachmentAction.upFile}" storage="file" maxlength="1000000"></t:inputfileupload> |
| <h:commandbutton action="#{attachmentAction.upload}" value="#{messages['button.upload']}" styleclass="btnCla" onclick="return checkSelectFile();" type="submit"></h:commandbutton> |</h:form> Action方法的代码如下。我只是想从客户那里得到一个excel。 public void upload(){ try { jxl.Workbook wb = Workbook.getWorkbook(upFile.getInputStream());// Here , I always got Null for the value of upFile! Why? wb.getSheet(0); } catch (Exception e) { } } 对于 upFile 的值，我总是得到 Null！为什么？ Cassandra Hector：给定行键和二级索引的 IndexedSliceQuery 赫克托：赫克托核心1.0-5 Cassandra-1.1.2 我需要在 Hector 中建模一个查询，例如： select * from table1 where rowkey='x' and secondary_indexed_column='y' 如果我使用将 setStartKey 设置为 rowKey 'x' 的 IndexedSliceQuery，我仍然会得到所有包含 secondary_indexed_column='y' 的行。如果我在 addEqualsExpression("row_key",'x') 中添加 row_key 字段，则会出现以下异常： org.apache.thrift.protocol.TProtocolException: Required field 'value' was not present! Struct: IndexExpression(column_name:64 65 76 69 63 65 5F 69 64, op:EQ, value:null) at org.apache.cassandra.thrift.IndexExpression.validate(IndexExpression.java:562) at org.apache.cassandra.thrift.IndexExpression.write(IndexExpression.java:499) at org.apache.cassandra.thrift.IndexClause.write(IndexClause.java:521) at org.apache.cassandra.thrift.Cassandra$get_indexed_slices_args.write(Cassandra.java:13469) at org.apache.cassandra.thrift.Cassandra$Client.send_get_indexed_slices(Cassandra.java:793) at org.apache.cassandra.thrift.Cassandra$Client.get_indexed_slices(Cassandra.java:781) at me.prettyprint.cassandra.service.KeyspaceServiceImpl$19.execute(KeyspaceServiceImpl.java:732) 那么，如何限制我的 indexedSliceQuery 只返回给定行键的结果？ javajsffile-upload 4 0 回答 0 Related 2 c++ - 为什么 C++ 被视为静态语言 2 ios - 我可以像在 Android 中那样通过 ID 获取视图的实例吗？ 0 magento - 在 Magento 中做事的多种方式——哪一种是正确的？（我的例子是属性集/组） 9 oracle - 如何在 Oracle 中查找授予用户的权限和角色？ 1 c++ - 如何识别 Qt 中哪个 QObject 发出了信号？ 1 jquery - 动画渐进式虚线 HTML5 Canvas & Jquery 4 javascript - 使用 Sinon 在 Javascript 中测试私有成员 1 java - Imap idle(false) 未收到所有电子邮件 1 ruby-on-rails - rails partial rspec 中的 view.stub 给出了“未定义的方法 view_context” 2 php - 从 cakephp 中的给定 url 中提取所有命名参数 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：12398381
> 
> 赞同：1
> 
> 时间：
> 
> 标签：java, jsf, file-upload

xhtml的代码如下：

```
 <h:form enctype="multipart/form-data" id="importForm">
        <table cellpadding="0" cellspacing="0" border="0">
            <tr>
                <td>
                    <t:inputFileUpload id="upFile"
                        title="#{messages['global.label.import.browse']}"
                        value="#{attachmentAction.upFile}" storage="file"
                        maxlength="1000000">
                    </t:inputFileUpload>
                </td>
            </tr>
            <tr>
                <td>
                    <h:commandButton action="#{attachmentAction.upload}" value="#{messages['button.upload']}" 
                        styleClass="btnCla" onclick="return checkSelectFile();" type="submit">
                    </h:commandButton>
                </td>
            </tr>
        </table>
    </h:form> 
```

Action方法的代码如下。我只是想从客户那里得到一个excel。

```
public void upload(){
    try {
        jxl.Workbook wb = Workbook.getWorkbook(upFile.getInputStream());// Here , I always got Null for the value of upFile! Why?
        wb.getSheet(0);
    } catch (Exception e) {

    }
} 
```

对于 upFile 的值，我总是得到 Null！为什么？

# cassandra - Cassandra Hector：给定行键和二级索引的 IndexedSliceQuery

> ID：12398382
> 
> 赞同：1
> 
> 时间：2012-09-13T01:54:31.503
> 
> 标签：cassandra, hector

赫克托：赫克托核心1.0-5 Cassandra-1.1.2

我需要在 Hector 中建模一个查询，例如：

```
select * from table1 where rowkey='x' and secondary_indexed_column='y' 
```

如果我使用将 setStartKey 设置为 rowKey 'x' 的 IndexedSliceQuery，我仍然会得到所有包含 secondary_indexed_column='y' 的行。如果我在 addEqualsExpression("row_key",'x') 中添加 row_key 字段，则会出现以下异常：

```
org.apache.thrift.protocol.TProtocolException: Required field 'value' was not present! Struct: IndexExpression(column_name:64 65 76 69 63 65 5F 69 64, op:EQ, value:null)
    at org.apache.cassandra.thrift.IndexExpression.validate(IndexExpression.java:562)
    at org.apache.cassandra.thrift.IndexExpression.write(IndexExpression.java:499)
    at org.apache.cassandra.thrift.IndexClause.write(IndexClause.java:521)
    at org.apache.cassandra.thrift.Cassandra$get_indexed_slices_args.write(Cassandra.java:13469)
    at org.apache.cassandra.thrift.Cassandra$Client.send_get_indexed_slices(Cassandra.java:793)
    at org.apache.cassandra.thrift.Cassandra$Client.get_indexed_slices(Cassandra.java:781)
    at me.prettyprint.cassandra.service.KeyspaceServiceImpl$19.execute(KeyspaceServiceImpl.java:732) 
```

那么，如何限制我的 indexedSliceQuery 只返回给定行键的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T20:00:26.880

另一种选择是，如果您有分区数据，您可以在 playOrm 中执行此查询，该查询支持分区中的数百万行（但不超过 1000 万行）以及表中所需的任意数量的分区。然后你只做查询

@NoSqlQuery(name="findSomething", query="PARTITIONS t(:partitionId) SELECT t FROM TABLE as t WHERE date > :some and yyyy < :second")

注意：请注意，查询没有任何限制，除非它在分区内，而且您也可以执行 JOINS！！！！

# sql - 获取下一次登录

> ID：12398386
> 
> 赞同：1
> 
> 时间：2012-09-13T01:54:49.967
> 
> 标签：sql, common-table-expression

我正在尝试根据一系列考勤记录获得正确的登录和注销。这是一个示例数据。

```
employee_id logdatetime         tkstype
  PH120013  2012-08-25 08:30:00.000 0
  PH120013  2012-08-25 13:00:00.000 1
  PH120013  2012-08-26 02:30:00.000 0
  PH120013  2012-08-27 15:00:00.000 1
  PH120013  2012-08-27 17:00:00.000 0
  PH120013  2012-08-27 21:00:00.000 1
  PH120013  2012-08-28 08:00:00.000 0
  PH120013  2012-08-28 19:00:00.000 1
  PH120013  2012-08-29 03:30:00.000 0
  PH120013  2012-08-29 21:00:00.000 1
  PH120013  2012-08-30 05:30:00.000 0
  PH120013  2012-08-30 19:00:00.000 1
  PH120013  2012-08-31 05:30:00.000 0
  PH120013  2012-08-31 20:30:00.000 1
  PH120013  2012-09-01 01:00:00.000 1
  PH120013  2012-09-01 21:00:00.000 0 
```

TKSTYPE = 0 - 输入 1 - 输出

我的困境是根据用户查询日期获得下一次登录。这样我就可以正确注销用户。例如，我想查看用户 PH120013 的登录信息，日期为 2012-08-26。我想要的输出将是：

```
 IN                              OUT 
```

PH120013 2012-08-26 02:30:00.000 2012-08-27 15:00:00.000

这是我的完整查询：

```
;With Attendance_CTE As 
(

        SELECT employee_id,CONVERT(VARCHAR(10), logdatetime, 120) logdate,
               CONVERT(VARCHAR(12), logdatetime, 114) logtime,logdatetime,tkstype
        FROM MSTR_ATTENDANCE WHERE CONVERT(VARCHAR(10), logdatetime, 120) >='2012-08-26'

),
Employee_CTE As
(
    SELECT employee_id,
       '2012-08-26' + CONVERT(datetime,tks_ofc_in,108) as Official_IN, 
       '2012-08-26' + CONVERT(datetime,tks_ofc_out,108) as Official_OUT,
       hireddate + '00:00:00.000' as HiredDate_DateTime,           
       '2012-08-26' + ' 00:00:00.000' as TKS_DateTime
    FROM vwu_Employee_Contract_Info                 
),
Min_Max_Attendance As
(
    SELECT t_in.employee_id,
           min(isnull(t_in.logdatetime,'1753-01-01 00:00:00.000')) min_in,
           max(isnull(t_out.logdatetime,'1753-01-01 00:00:00.000')) max_out 
    FROM
        (SELECT employee_id,logdatetime FROM Mstr_Attendance WHERE tkstype=0) t_in
    LEFT JOIN   
        (SELECT employee_id,logdatetime FROM Mstr_Attendance WHERE tkstype=1) t_out
    ON
        t_in.employee_id=t_out.employee_id      
    GROUP BY
        t_in.employee_id
)
SELECT Attendance_CTE.Employee_ID,logdatetime,
       CASE WHEN TKSType=0 THEN
           CASE Min_Max_Attendance.min_in 
                -- first day
                WHEN '1753-01-01 00:00:00.000' THEN 
                    CASE
                        -- check if current logdatetime is within the hireddate and current date query
                        WHEN Attendance_CTE.LogDateTime BETWEEN HiredDate_DateTime AND TKS_DateTime 
                        THEN 
                            CASE
                                WHEN Attendance_CTE.LogDateTime BETWEEN Employee_CTE.Official_In AND 
                                     Employee_CTE.Official_Out THEN Attendance_CTE.LogDateTime                                                                                                                           
                            END 
                        ELSE
                        -- no time in?
                                '1753-01-01 00:00:00.000'
                    END
                ELSE
                    -- regular days
                    CASE
                        -- check whether no out
                        WHEN Min_Max_Attendance.max_out = '1753-01-01 00:00:00.000' THEN Attendance_CTE.Logdatetime
                    ELSE
                        -- but with previous out
                        CASE
                            -- check whether logdatetime is not greater than the TKS_DateTime
                            WHEN  Convert(varchar(10),Attendance_CTE.logdatetime,120) !> TKS_DateTime THEN                              
                                  CASE
                                    -- when logdatetime range on employee official time including late
                                    WHEN Attendance_CTE.logdatetime BETWEEN Employee_CTE.Official_In AND Employee_CTE.Official_Out THEN Attendance_CTE.Logdatetime
                                    -- when logdatetime is less than the max l_out on the records
                                    WHEN Attendance_CTE.LogDateTime <= Min_Max_Attendance.max_out THEN Attendance_CTE.LogDateTime
                                    -- when logdatetime is on range between the min l_in and max l_out on the records
                                    WHEN Attendance_CTE.LogDateTime BETWEEN Min_Max_Attendance.min_in AND Min_Max_Attendance.max_out THEN Attendance_CTE.LogDateTime
                                    -- when logdatetime is on range between current query date to official in 
                                    WHEN Attendance_CTE.LogDateTime BETWEEN TKS_DateTime AND Employee_CTE.Official_In THEN Attendance_CTE.LogDateTime                                   
                                    -- when logdatetime is not greater than equal to current query date 
                                    WHEN Attendance_CTE.LogDateTime < TKS_DateTime THEN Attendance_CTE.LogDateTime
                                  END
                            /*ELSE
                                -- no time in?
                                '1753-01-01 00:00:00.000'*/
                        END 
                    END
            END 
        END ActualLogIn,
        CASE WHEN TKSType=1 THEN                 
             CASE
                -- check whether logdatetime is less than  official_out and greater than official_in, undertime
                WHEN Attendance_CTE.LogDateTime > Employee_CTE.Official_Out AND Attendance_CTE.LogDateTime !> Employee_CTE.Official_In
                THEN    Attendance_CTE.LogDateTime
                -- logdatetime is greater than official out and not greater than the next log in                                    
                WHEN Attendance_CTE.LogDateTime >= Employee_CTE.Official_Out AND Attendance_CTE.LogDateTime !> '2012-08-27 17:00:00.000'
                    THEN Attendance_CTE.LogDateTime                         
                WHEN Attendance_CTE.LogDateTime !> '2012-08-27 17:00:00.000'
                THEN Attendance_CTE.LogDateTime                     
             END
        END ActualLogOut            
FROM Employee_CTE
LEFT JOIN Attendance_CTE
ON
    Employee_CTE.Employee_ID=Attendance_CTE.Employee_ID
LEFT JOIN Min_Max_Attendance
ON
    Employee_CTE.Employee_ID=Min_Max_Attendance.Employee_ID
AND
    Attendance_CTE.Employee_ID=Min_Max_Attendance.Employee_ID
WHERE 
    Employee_CTE.Employee_ID IN ('PH120012','PH120013') 
```

*   2012-08-27 17:00:00.000' <-- 硬编码，这是我需要正确获取的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T02:44:38.547

试试这个：

由于我不确定数据库，这是一个通用的解决方案，这将适用于几乎所有数据库

```
select * from (
select logi_in.logdatetime as 'IN' , logi_out.logdatetime as 'OUT' 
from MSTR_ATTENDANCE logi_in
left outer join MSTR_ATTENDANCE logi_out
on logi_in.employee_id=logi_out.employee_id
and logi_in.tkstype=0
and logi_out.logdatetime =(
select     MIN(logdatetime)  
             from       MSTR_ATTENDANCE MSTR   
             where      MSTR.employee_id = logi_out.employee_id  
             and        MSTR.tkstype = 1
             and        MSTR.logdatetime > logi_in.logdatetime 
       )
and logi_in.employee_id='PH120013'
and logi_in.logdatetime='2012-08-26 02:30:00.000')t
where OUT is not null 
```

# [SQL Fiddle 演示](http://www.sqlfiddle.com/#!2/a4eb9/3)

# jfreechart - 带有滚动条的 Jfreechart 引起

> ID：12398398
> 
> 赞同：1
> 
> 时间：2012-09-13T01:56:46.510
> 
> 标签：jfreechart

我想在图表中添加一个滚动条，以便查看不适合屏幕的大数据集，因为要保留所有 xtick。但是，我收到以下错误消息：

```
Exception in thread "main" java.lang.NullPointerException
at MySlidingCategoryDatasetDemo2$DemoPanel.createChart(MySlidingCategoryDatasetDemo2.java:96)
at MySlidingCategoryDatasetDemo2$DemoPanel.<init>(MySlidingCategoryDatasetDemo2.java:148)
at MySlidingCategoryDatasetDemo2.createDemoPanel(MySlidingCategoryDatasetDemo2.java:170)
at MySlidingCategoryDatasetDemo2.<init>(MySlidingCategoryDatasetDemo2.java:166)
at MySlidingCategoryDatasetDemo2.main(MySlidingCategoryDatasetDemo2.java:174) 
```

使用以下代码：

```
import java.awt.*;
import javax.swing.*;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;
import org.jfree.chart.*;
import org.jfree.chart.axis.NumberAxis;
import org.jfree.chart.axis.ValueAxis;
import org.jfree.chart.event.ChartChangeListener;
import org.jfree.chart.plot.CombinedDomainXYPlot;
import org.jfree.chart.plot.Plot;
import org.jfree.chart.plot.XYPlot;
import org.jfree.chart.renderer.xy.StandardXYItemRenderer;
import org.jfree.chart.renderer.xy.XYLineAndShapeRenderer;
import org.jfree.data.category.*;
import org.jfree.data.xy.XYDataset;
import org.jfree.data.xy.XYSeries;
import org.jfree.data.xy.XYSeriesCollection;
import org.jfree.ui.ApplicationFrame;
import org.jfree.ui.RefineryUtilities;

public class MySlidingCategoryDatasetDemo2 extends ApplicationFrame {
static class DemoPanel extends JPanel implements ChangeListener {
    private static XYDataset createDataset() {
    XYSeries xyseries = new XYSeries("First");
    xyseries.add(1.0D, 1.0D);
    xyseries.add(2D, 4D);
    xyseries.add(3D, 3D);
    xyseries.add(4D, 5D);
    xyseries.add(5D, 5D);
    xyseries.add(6D, 7D);
    xyseries.add(7D, 7D);
    xyseries.add(8D, 8D);
    xyseries.add(9D, 8D);
    xyseries.add(10D, 8D);
    xyseries.add(11D, 8D);
    xyseries.add(12D, 8D);
    xyseries.add(13D, 8D);
    xyseries.add(14D, 8D);
    xyseries.add(15D, 8D);
    xyseries.add(16D, 25D);
    xyseries.add(17D, 8D);
    xyseries.add(18D, 5D);
    xyseries.add(19D, 7D);
    xyseries.add(20D, 6D);
    xyseries.add(21D, 8D);
    xyseries.add(22D, 4D);
    xyseries.add(23D, 4D);
    xyseries.add(24D, 2D);
    xyseries.add(25D, 1.0D);
    xyseries.add(26D, 8D);
    xyseries.add(27D, 8D);
    xyseries.add(28D, 8D);
    xyseries.add(29D, 8D);
    xyseries.add(30D, 8D);
    xyseries.add(31D, 8D);
    xyseries.add(32D, 25D);
    xyseries.add(33D, 8D);
    xyseries.add(34D, 5D);
    xyseries.add(35D, 7D);
    xyseries.add(36D, 6D);
    xyseries.add(37D, 8D);
    xyseries.add(38D, 4D);
    xyseries.add(39D, 4D);
    xyseries.add(40D, 2D);
    xyseries.add(41D, 1.0D);

    XYSeriesCollection xyseriescollection = new XYSeriesCollection();
    xyseriescollection.addSeries(xyseries);

    return xyseriescollection;
    }

    private static JFreeChart createChart(XYDataset xydataset) {
    final CombinedDomainXYPlot xyplot = new CombinedDomainXYPlot();
    NumberAxis rangeAxis1 = new NumberAxis();
    rangeAxis1.setLowerBound(0);
    rangeAxis1.setUpperBound(30);

    final XYPlot subplot1 = new XYPlot(xydataset, null, rangeAxis1,
        new StandardXYItemRenderer());

    xyplot.add(subplot1);
    final JFreeChart jfreechart = new JFreeChart("Hello",
        JFreeChart.DEFAULT_TITLE_FONT, xyplot, true);
    // JFreeChart jfreechart =
    // ChartFactory.createXYLineChart("Line Chart Demo 2", "X", "Y",
    // xydataset, PlotOrientation.VERTICAL, true, true, false);
    // XYPlot xyplot = (XYPlot)jfreechart.getPlot();
    //
    xyplot.setDomainPannable(true);
    xyplot.setRangePannable(true);
    XYLineAndShapeRenderer xylineandshaperenderer = (XYLineAndShapeRenderer) xyplot
        .getRenderer();
    xylineandshaperenderer.setBaseShapesVisible(true);
    xylineandshaperenderer.setBaseShapesFilled(true);
    // NumberAxis numberaxis = (NumberAxis)xyplot.getRangeAxis();
    // numberaxis.setStandardTickUnits(NumberAxis.createIntegerTickUnits());
    // numberaxis.setRange(0.0D, 100D);
    ValueAxis valueaxis = xyplot.getDomainAxis();
    // valueaxis.setLowerMargin(0.34999999999999998D);
    valueaxis.setLowerBound(0);
    valueaxis.setUpperBound(60);
    return jfreechart;
    }

    public void stateChanged(ChangeEvent changeevent) {
    // dataset.setFirstCategoryIndex(scroller.getValue());
    BoundedRangeModel scrollBarModel = scroller.getModel();
    try {
        Object src = changeevent.getSource();
        if (src == scrollBarModel) {
        int val = scrollBarModel.getValue();
        int ext = scrollBarModel.getExtent();

        System.out.println(val);
        System.out.println(ext);

        Plot plot = this.chartpanel.getChart().getPlot();
        if (plot instanceof XYPlot) {
            XYPlot hvp = (XYPlot) plot;
            ValueAxis axis = hvp.getDomainAxis();

            this.chartpanel.getChart().removeChangeListener(
                (ChartChangeListener) this);

            axis.setRange(val / this.xscrollFactor, (val + ext)
                / this.xscrollFactor);

            this.chartpanel.getChart().addChangeListener(
                (ChartChangeListener) this);
        }
        }
    } catch (Exception e) {
        e.printStackTrace();
    }

    }

    JScrollBar scroller;
    SlidingCategoryDataset dataset;
    ChartPanel chartpanel;
    double xscrollFactor = 50;

    public DemoPanel() {
    super(new BorderLayout());
    JFreeChart jfreechart = createChart(createDataset());
    chartpanel = new ChartPanel(jfreechart);

    // chartpanel.setPreferredSize(new Dimension(400, 400));
    scroller = new JScrollBar(JScrollBar.HORIZONTAL);// (0, 0, 10, 0, 50);
    add(chartpanel);
    scroller.getModel().addChangeListener(this);
    JPanel jpanel = new JPanel(new BorderLayout());
    jpanel.add(scroller);
    jpanel.setBorder(BorderFactory.createEmptyBorder(2, 2, 2, 2));
    jpanel.setBackground(Color.white);
    add(jpanel, "South");
    }
}

public MySlidingCategoryDatasetDemo2(String s) {
    super(s);
    setDefaultCloseOperation(3);
    setContentPane(createDemoPanel());
}

public static JPanel createDemoPanel() {
    return new DemoPanel();
}

public static void main(String args[]) {
    MySlidingCategoryDatasetDemo2 slidingcategorydatasetdemo2 = new MySlidingCategoryDatasetDemo2(
        "JFreeChart: SlidingCategoryDatasetDemo2.java");
    slidingcategorydatasetdemo2.pack();
    RefineryUtilities.centerFrameOnScreen(slidingcategorydatasetdemo2);
    slidingcategorydatasetdemo2.setVisible(true);
}
} 
```

我做错了什么？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T04:24:03.970

之所以*出现*`NullPointerException`，是因为`CombinedDomainXYPlot`named`xyplot`没有渲染器；只有它的子图有渲染器。中唯一的子图是一个命名的，它有一个类型为标准的渲染器。你可以这样调节它：*`xyplot``XYPlot``subplot1``StandardXYItemRenderer``createChart()`*

 *```
StandardXYItemRenderer renderer =
    (StandardXYItemRenderer) subplot1.getRenderer();
renderer.setBaseShapesVisible(true);
renderer.setBaseShapesFilled(true); 
```*

# android - 图片未显示在滚动视图中的 android imageview 中

> ID：12398400
> 
> 赞同：1
> 
> 时间：2012-09-13T01:56:54.687
> 
> 标签：android, imageview

我有一张大图片，我试图让我的用户查看。我还想稍后在图片上添加按钮，以便他们获得有关某些地图点的更多信息。

我的 XML 如下：

```
<?xml version="1.0" encoding="utf-8"?>
<HorizontalScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="match_parent"
android:scrollbars="none">
<RelativeLayout
    android:layout_width="wrap_content"
    android:layout_height="match_parent">

    <ImageView
        android:id="@+id/map_image"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:src="@drawable/map_1280" />

</RelativeLayout> 
```

我使用相对布局作为直接子级的原因是为了稍后放置按钮。我遇到的问题是图像没有显示。它与背景颜色相同。但是，在我得到指示滚动视图结束的发光之前，我可以左右滚动一下。但是，我看不到图片。

我还将它添加到 Java 中，以防万一：

```
setContentView(R.layout.map_view);
ImageView mapView = (ImageView)findViewById(R.id.map_image);
mapView.setImageResource(R.drawable.map_1280); 
```

依然没有。难道我做错了什么？图像打开很好，没有任何问题。这是一张 2000*1280 的大图片，其他东西都可以打开。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T07:13:53.180

有几种方法可以做到这一点。以下链接可以帮助您。 [链接 1](http://android-er.blogspot.sg/2012/05/display-scrollable-imageview-bigger.html) [链接 2](https://sites.google.com/site/androidhowto/how-to-1/custom-scrollable-image-view) [链接 3](https://stackoverflow.com/questions/3058164/android-scrolling-an-imageview)

# android - 接收触摸的所有窗口顶部的 Android 覆盖布局

> ID：12398402
> 
> 赞同：7
> 
> 时间：2012-09-13T01:56:58.027
> 
> 标签：android, events, layout, view, touch

我使用以下代码创建了一个显示在所有应用程序和窗口之上的视图：

```
 //These three are our main components.
    WindowManager wm;
    LinearLayout ll;
    WindowManager.LayoutParams ll_lp;

    //Just a sample layout parameters.
    wm = (WindowManager) getSystemService(WINDOW_SERVICE);
    ll_lp = new WindowManager.LayoutParams();
    ll_lp.format = PixelFormat.TRANSLUCENT;
    ll_lp.height = WindowManager.LayoutParams.FILL_PARENT;
    ll_lp.width = WindowManager.LayoutParams.FILL_PARENT;
    ll_lp.gravity = Gravity.CLIP_HORIZONTAL | Gravity.TOP;

    //This one is necessary.
    ll_lp.type = WindowManager.LayoutParams.TYPE_SYSTEM_ALERT;

    //Play around with these two.
    ll_lp.flags = WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE;
    ll_lp.flags = ll_lp.flags | WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE;

    //This is our main layout.
    ll = new LinearLayout(this);
    ll.setBackgroundColor(android.graphics.Color.argb(50, 255, 255, 255));
    ll.setHapticFeedbackEnabled(true);
    ll.setOnTouchListener(new OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            Toast.makeText(getApplicationContext(), "TOUCHED", Toast.LENGTH_SHORT).show();
            return false;
        }
        });

    //And finally we add what we created to the screen.
    wm.addView(ll, ll_lp); 
```

因为设置了 FLAG_NOT_TOUCHABLE，所以它只显示视图但不接收任何触摸事件。视图后面的应用程序接收所有触摸事件。但是，如果我不设置标志，那么只有视图会接收到触摸，导致其后面的应用程序不会接收到任何触摸。

有没有办法让视图和它背后的应用程序都接收触摸？我试过返回 false 但还是一样。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T02:35:08.587

如果我没记错的话，后台的视图没有接收到触摸事件，因为它被系统过滤掉以防止“点击劫持”攻击。

您可以通过使用[View.setFilterTouchesWhenObscured(Boolean)](http://developer.android.com/reference/android/view/View.html#setFilterTouchesWhenObscured%28boolean%29)方法在后台关闭视图的触摸事件过滤来绕过此系统功能。

# c# - 使用带有 C# 的 LINQ 使用 LIKE 和 OR 查询数据集

> ID：12398406
> 
> 赞同：1
> 
> 时间：2012-09-13T01:57:30.903
> 
> 标签：c#, asp.net, visual-studio-2010, linq

我有一个`DataSet`名为`PName`,`PCode`和的列`PDesc`。无论如何我可以根据类似的查询设置我的数据源

```
gridview.DataSource = Get me everything where PName LIKE 'somevalue' 
                      OR PCode LIKE 'somevalue' 
                      OR PDesc LIKE 'somevalue' 
```

我试图找到有关使用 LINQ 的信息，但我没有看到任何 OR's ，这可能吗？我将不胜感激任何指针/帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T02:01:57.737

您可以在 Where 子句中使用逻辑 OR 运算符 ( `||`)。没有 LIKE 函数，但您可以使用`string`函数`BeginsWith`、`EndsWith`或`Contains`（取决于您使用 LIKE 的方式）完成类似的操作：

```
where ("somevalue".Contains(PName) || 
       "somevalue".Contains(PCode) ||  
       "somevalue".Contains(PDesc) ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T02:06:22.600

你可以试试这个：

```
gridview.DataSource = from d in DataSetVar.Tables[0].AsEnumerable()
                  where d.Field<string>("PName").IndexOf("stringToFind1") >= 0 ||
                  d.Field<string>("PCode ").IndexOf("stringToFind2") >= 0 ||
                  d.Field<string>("PDesc").IndexOf("stringToFind3") >= 0
                  select d; 
```

此外，AsEnumerable 是 System.Data.DataSetExtensions 库的一部分。

# c - 用户级和内核级线程的并发性。为什么输出不同？

> ID：12398408
> 
> 赞同：0
> 
> 时间：2012-09-13T01:57:37.127
> 
> 标签：c, multithreading

我开始学习线程，现在我明白这本书让我对用户级和内核级线程感到困惑。

这本书非常强调差异并提出了一个问题，说以下两个相似代码的输出是不同的，但是（据我所知），它们的输出对我来说似乎是相同的。

第一个是关于用户级线程：

```
int number = 0;
int main() {
fork()
if it is child {number--, return 0}
if it is parent {number++, wait till child return, print number}} 
```

我的分析是由于 number-- 和 number++ 只需要执行一次，并且执行完这两次后会打印输出，所以输出必须为 0。

第二种情况是关于内核级线程：

```
int number = 0;
t1() {number--}
t2() {number++}
main() {
    createThread(pass t1)
    createThread(pass t2)
    wait till both complete
    print number
} 
```

在这种情况下，同样的事情，内核创建了两个线程，一个 --，另一个 ++，所以它们都只需要执行一次。并且结果必须再次为 0。

但是，书上说输出是不同的，或者由于干预可能会有不同的输出，谁能告诉我为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T05:17:44.030

在第一种情况下，它不是创建线程，而是分叉一个进程（查看 fork() 函数的描述）。分叉的进程有自己的内存，是从父进程复制过来的，所以子进程中递减数字的结果对父进程没有影响。在父进程中打印数字的结果将为 1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T02:05:39.213

即使您编写了一条指令`i++`，或者`i--`它可能被翻译成机器语言中的多条指令。如果您使用的是内核线程，这两个计算可能会在不同的内核上运行，每个内核都会缓存`i`. 在这种情况下，实际写入内存的结果是未定义的，因为硬件和编译器假定没有人在背后修改数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T10:10:27.940

在线程的情况下，由于可能的数据竞争，有可能获得`1`甚至作为最终值。`-1`由于无法保证线程 2 将在线程 1 完成后启动，反之亦然，因此如果没有适当的同步，两个线程可能会在大约同时启动并看到 的初始值`0`。然后根据哪个线程第二个完成，该值将是`1`或者`-1`而不是`0`. 为了避免这种情况，必须使用诸如临界区或原子增量/减量之类的同步习语。

# r - 在R中选择没有缺失值的行

> ID：12398409
> 
> 赞同：6
> 
> 时间：2012-09-13T01:57:39.700
> 
> 标签：r

我是 R 和 for 循环的新用户。我正在尝试从数据中取样并检查是否存在共线列。我想在该迭代中记录共线列存在并将其记录在向量（baditr）中。另外，我想打印一行表明“共线性在迭代 i 处”。然后我希望代码跳转到第二次迭代并继续运行。对于每次迭代，我希望代码保存矩阵相应行中的列的总和。

我的问题是我得到了错误迭代的 NA。我的意图是让糟糕的迭代根本不包含在我的矩阵中。这是我的代码：

```
a0=rep(1,40)
a=rep(0:1,20)
b=c(rep(1,20),rep(0,20))
c0=c(rep(0,12),rep(1,28))
c1=c(rep(1,5),rep(0,35))
c2=c(rep(1,8),rep(0,32))
c3=c(rep(1,23),rep(0,17))
da=matrix(cbind(a0,a,b,c0,c1,c2,c3),nrow=40,ncol=7)
sing <- function(nrw){
  sm <- matrix(NA,nrow=nrw,ncol=ncol(da))
  baditr <- NULL
  for(i in 1:nrw){
    ind <- sample(1:nrow(da), nrow(da),replace =TRUE)
    smdat <- da[ind,]
    evals <- eigen(crossprod(smdat))$values
    if(any(abs(evals) < 1e-7)){
      baditr <- c(baditr,i)
      cat("singularity occurs at", paste(i),"\n")
      next
    }
  sm[i,] <- apply(smdat,2,sum)
  }
  return(sm)
}
sing(20) 
```

我将得到以下输出：

```
singularity occurs at 9 
singularity occurs at 13 
      [,1] [,2] [,3] [,4] [,5] [,6] [,7]
 [1,]   40   23   22   25    5    8   26
 [2,]   40   20   18   30    4    7   22
 [3,]   40   19   24   28    6    7   25
 [4,]   40   19   22   30    6    9   26
 [5,]   40   12   26   26    8   13   30
 [6,]   40   17   16   27    7   10   19
 [7,]   40   20   17   33    3    5   19
 [8,]   40   22   19   28    4    9   23
 [9,]   NA   NA   NA   NA   NA   NA   NA
[10,]   40   21   24   28    3    6   27
[11,]   40   21   16   31    2    4   22
[12,]   40   21   21   26    3    6   23
[13,]   NA   NA   NA   NA   NA   NA   NA
[14,]   40   18   16   29    2    7   22
[15,]   40   24   18   30    6    9   21
[16,]   40   23   18   29    4    8   21
[17,]   40   17   25   25    3    8   29
[18,]   40   22   28   23    9   14   30
[19,]   40   25   23   25    7   11   30
[20,]   40   20   23   27    7   10   26 
```

我希望我的矩阵看起来像这样：

```
singularity occurs at 9 
singularity occurs at 13 
      [,1] [,2] [,3] [,4] [,5] [,6] [,7]
 [1,]   40   23   22   25    5    8   26
 [2,]   40   20   18   30    4    7   22
 [3,]   40   19   24   28    6    7   25
 [4,]   40   19   22   30    6    9   26
 [5,]   40   12   26   26    8   13   30
 [6,]   40   17   16   27    7   10   19
 [7,]   40   20   17   33    3    5   19
 [8,]   40   22   19   28    4    9   23
[10,]   40   21   24   28    3    6   27
[11,]   40   21   16   31    2    4   22
[12,]   40   21   21   26    3    6   23
[14,]   40   18   16   29    2    7   22
[15,]   40   24   18   30    6    9   21
[16,]   40   23   18   29    4    8   21
[17,]   40   17   25   25    3    8   29
[18,]   40   22   28   23    9   14   30
[19,]   40   25   23   25    7   11   30
[20,]   40   20   23   27    7   10   26 
```

作为故障保险，我还将感谢您将一定数量的迭代保存到文件（例如，50 次迭代）的任何信息，一旦产生下一个迭代次数，我可以覆盖这些信息。意思是，我将前 50 次迭代保存到一个文件中，然后一旦产生了第二轮 50 次迭代，它们就会覆盖第一轮，因此，我的文件现在有 100 次迭代。

对不起，很长的帖子。但提前谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-13T02:23:00.797

在返回之前`sm`，您可以使用 过滤掉具有`NA`值的行`complete.cases()`。它看起来像`sm[complete.cases(sm),]`. 该函数返回 TRUE/FALSE 值的逻辑向量，这会强制 R 不返回具有 FALSE 的值。

此外，在定义它之后，您看起来并没有做任何事情`baditers`。我可以注释掉所有引用的行，`baditers`并且您的函数似乎工作得很好......也许它是旧代码迭代的遗留物？

# 更新

这是您使用`complete.cases()`. 请注意，我还注释掉了所有相关的内容，`baditr`以说明它当前在您的代码中没有做任何事情。

```
sing <- function(nrw){
  sm <- matrix(NA,nrow=nrw,ncol=ncol(da))
  #baditr <- NULL
  for(i in 1:nrw){
    ind <- sample(1:nrow(da), nrow(da),replace =TRUE)
    smdat <- da[ind,]
    evals <- eigen(crossprod(smdat))$values
    if(any(abs(evals) < 1e-7)){
      #baditr <- c(baditr,i)
      cat("singularity occurs at", paste(i),"\n")
      next
    }
    sm[i,] <- apply(smdat,2,sum)
  }
  return(sm[complete.cases(sm),])
} 
```

现在让我们运行这个函数，我正在环绕`dim()`函数调用，它将告诉我们结果对象的#rows 和#columns：

```
> dim(sing(20))
singularity occurs at 6 
[1] 19  7 
```

所以一个奇点和一个 19 行 7 列的矩阵，我错过了什么吗？

至于你关于写东西的另一个问题，你知道`append`参数 to `write.table()`and friends 吗？帮助页面告诉我们`If TRUE, the output is appended to the file. If FALSE, any existing file of the name is destroyed.`

# 更新 2

`append = TRUE`这是一个使用in的示例`write.table()`

```
#Matrix 1 definition and write to file
x <- matrix(1:9, ncol = 3)
write.table(x, "out.txt", sep = "\t", col.names = TRUE, row.names = FALSE)
#Matrix 2 definition and write to same file with append = TRUE
x2 <- matrix(10:18, ncol = 3)
write.table(x2, "out.txt", sep = "\t", col.names = FALSE, row.names = FALSE, append = TRUE)
#read consolidated data back in to check if it's right
x3 <- read.table("out.txt", header = TRUE) 
```

结果是

```
 V1 V2 V3
1  1  4  7
2  2  5  8
3  3  6  9
4 10 13 16
5 11 14 17
6 12 15 18 
```

# ios - 是否需要针对 iPhone 5 的屏幕修改应用程序？

> ID：12398412
> 
> 赞同：0
> 
> 时间：2012-09-13T01:57:56.190
> 
> 标签：ios, iphone-5

> **可能重复：**
> [如何处理 iPhone 5 的屏幕尺寸？](https://stackoverflow.com/questions/12396545/how-to-deal-with-iphone-5-screen-size)

iPhone 5 的屏幕比以前的所有型号都大（4 英寸而不是 3.5 英寸）。当它们在 iPhone 5 上显示时，这将如何影响为原始屏幕设计的当前应用程序？

我问是因为我拒绝发布我的新应用程序，并且想知道我是否需要对 iPhone 5 屏幕进行修改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T02:06:08.213

现有应用程序将以兼容模式运行，并以“信箱”格式呈现。

# c++ - 无法解释的链接器错误

> ID：12398414
> 
> 赞同：0
> 
> 时间：2012-09-13T01:58:08.653
> 
> 标签：c++, linker

我的电脑上有以下文件。

```
/lib64/libm.so.6
/usr/lib64/libm.so 
```

但是当我链接以下内容时，我收到错误

```
$ g++ -L/usr/lib64 -O3 -static -Wall -Wno-char-subscripts -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -IMSToolkit/include Comet.o Threading.o CometSearch.o CometPreprocess.o CometPostAnalysis.o CometMassSpecUtils.o CometWriteOut.o CometWriteSqt.o CometWritePepXML.o -LMSToolkit -lmstoolkitlite -o comet.exe
/usr/bin/ld: cannot find -lm
collect2: ld returned 1 exit status
$ 
```

有谁知道为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T02:00:50.583

是的，我愿意。您正在尝试链接没有共享库的静态 exe - 由于`.so`扩展名而共享的库 - 您需要安装 libm.a

删除`-static`选项或安装`.a`库的版本

# android - 在android中创建一个表来显示数据

> ID：12398418
> 
> 赞同：0
> 
> 时间：2012-09-13T01:58:48.920
> 
> 标签：android

理想情况下，这应该是一项简单的任务，但我无法弄清楚如何在 android 中显示带有边框的表格中的数据。

我看过这个[`How can I create a table with borders in Android?`](https://stackoverflow.com/questions/2108456/how-can-i-create-a-table-with-borders-in-android)，它似乎是我正在寻找的东西，但行数和列数事先不知道。我将不得不即时创建它们。有谁知道如何在 xml 中创建一个表，然后插入一行或一列？

# wpf - DataContext 在 Style.Trigger 中未绑定

> ID：12398419
> 
> 赞同：2
> 
> 时间：2012-09-13T01:58:56.667
> 
> 标签：wpf, xaml, mvvm, binding, datacontext

所以我有一些类似于以下的代码：（请原谅任何拼写错误——我试图在帖子的 SO 编辑器中简化）

```
<my:CustomContentControl>
        <my:CustomContentControl.Style>
            <Style TargetType="{x:Type my:CustomContentControl}">
                <Style.Triggers>                        
                    <DataTrigger Binding="{Binding Path=CurrentView}" Value="MyCustomView">
                        <Setter Property="Content">
                            <Setter.Value>
                                <my:CustomView DataContext="{Binding DataContextForMyCustomView"/>
                            </Setter.Value>
                        </Setter>
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </m:CustomContentControl.Style>
</my:CustomContentControl> 
```

问题是，每当`DataTrigger`发生这种情况时，setter**确实**将`Content`属性设置为`my:CustomView`，但它**没有**bind `DataContext`。如果我将相同的代码移到触发器之外，则`DataContext`绑定工作得很好。

有任何想法吗？如果这是某种限制，是否有任何解决方法？

**更新：**

我在输出窗口中收到以下错误：

`System.Windows.Data Error: 3 : Cannot find element that provides DataContext. BindingExpression:Path=DataContextForMyCustomView; DataItem=null; target element is 'CustomView' (Name='customView'); target property is 'DataContext' (type 'Object')`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T16:32:31.577

您发布的错误听起来像是您的自定义控件位于没有 的对象中`DataContext`，例如`DataGridColumn.Header`.

为了解决这个问题，您可以在包含您正在寻找的绑定中创建一个[Freezeable](http://msdn.microsoft.com/en-us/library/system.windows.freezable.aspx)对象，然后将您的绑定到该对象`.Resources``my:CustomView.DataContext`

```
<my:CustomContentControl.Resources>
    <local:BindingProxy x:Key="proxy" 
        Data="{Binding DataContextForMyCustomView, ElementName=MyControl}" />
</my:CustomContentControl.Resources>

...

<my:CustomView DataContext="{Binding Source={StaticResource proxy}}"/> 
```

[这是从此处](http://www.thomaslevesque.com/2011/03/21/wpf-how-to-bind-to-data-when-the-datacontext-is-not-inherited/)`Freezable`复制的示例对象的代码：

```
public class BindingProxy : Freezable
{
    #region Overrides of Freezable

    protected override Freezable CreateInstanceCore()
    {
        return new BindingProxy();
    }

    #endregion

    public object Data
    {
        get { return (object)GetValue(DataProperty); }
        set { SetValue(DataProperty, value); }
    }

    // Using a DependencyProperty as the backing store for Data.  
    // This enables animation, styling, binding, etc...
    public static readonly DependencyProperty DataProperty =
        DependencyProperty.Register("Data", typeof(object), 
            typeof(BindingProxy), new UIPropertyMetadata(null));
} 
```

此外，如果多个对象应用该样式，您真的应该使用`ContentTemplate`而不是避免异常:)`Content`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-26T14:21:01.267

我通过将 UserControl 放入资源中然后用它更改内容来解决了类似的问题。

例如来自我自己的代码（不同的名称，相同的概念）

```
<ContentControl Grid.Column="1"
                Margin="7,0,7,0">
    <ContentControl.Resources>
        <mapping:Slide11x4MappingView x:Key="Slide11X4MappingView" DataContext="{Binding MappingViewModel}"/>
        <mapping:MicrotubeMappingView x:Key="MicrotubeMappingView"  DataContext="{Binding MappingViewModel}"/>
    </ContentControl.Resources>
    <ContentControl.Style>
        <Style TargetType="{x:Type ContentControl}">
            <Style.Triggers>
                <DataTrigger Binding="{Binding Acquirer.Sorter.TrayType}" Value="{x:Static mapping:TrayType.SLIDES11X4}">
                    <Setter Property="Content" Value="{StaticResource Slide11X4MappingView}"/>
                </DataTrigger>
                <DataTrigger Binding="{Binding Acquirer.Sorter.TrayType}" Value="{x:Static mapping:TrayType.VIALS}">
                    <Setter Property="Content" Value="{StaticResource MicrotubeMappingView}"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </ContentControl.Style>
</ContentControl> 
```

# c# - 3D 游戏的地图格式

> ID：12398423
> 
> 赞同：6
> 
> 时间：2012-09-13T01:59:27.390
> 
> 标签：c#, xna, format

我正在学习 3D 编程，我决定制作一个非常简单的“引擎”，您可以在其中绕着地图飞行，等等。只有墙壁的基本渲染。

所以，我在想——如何保存关卡以及如何编辑它。我不想同时为它做一个编辑器，因为它只是一个学习项目，而不是一个真正的游戏。所以，我一直在寻找这种关卡格式：UDMF [http://zdoom.org/wiki/Universal_Doom_Map_Format](http://zdoom.org/wiki/Universal_Doom_Map_Format)虽然它适用于完全不同类型的游戏，但它仍然可以满足我的需求。指定顶点、地板、天花板位置等。因此，基本的 2.5D 几何图形可以很容易地解释为 3D 空间，这对我的目的来说已经绰绰有余了。还有大量的编辑（主要原因）。

但是，我确实意识到这并不是最好的解决方案，也不是一种解决方法。

**所以，我的问题是：**是否有任何“开放”地图格式和“开放”编辑器可以用于我的引擎/游戏？

UPD：如果这很重要，我正在使用 C# 和 XNA。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T02:05:09.633

您可以使用 XML（或者更简单的东西）来提供关卡中所有对象的位置和其他属性。这将是最简单的解决方案（并且具有包含*您*想要的任何信息但仅此而已的好处），但不会提供关卡编辑器。

但是，我知道您想要一个编辑器（谁不会）。这是一个非常新的、正在进行中的编辑器，看起来很有趣：[XNA 的 3D 场景编辑器](https://sceneeditor.codeplex.com/)

![编辑器图像](../Images/e34d12a555f1a8a158a4b53839017ed6.png)

# c# - 我试图从一个网站获取所有链接并将它们放在一个列表中，但有时我会得到奇怪的链接，为什么？

> ID：12398425
> 
> 赞同：0
> 
> 时间：2012-09-13T01:59:29.813
> 
> 标签：c#

这是获取链接的代码：

```
private List<string> getLinks(HtmlAgilityPack.HtmlDocument document)
        {

            List<string> mainLinks = new List<string>();
            var linkNodes = document.DocumentNode.SelectNodes("//a[@href]");
            if (linkNodes != null)
            {
                foreach (HtmlNode link in linkNodes)
                {
                    var href = link.Attributes["href"].Value;
                    mainLinks.Add(href);
                }
            }
            return mainLinks;

        } 
```

有时我得到的链接开始像“/”或：

“/videos?feature=mh”或“//www.youtube.com/my_videos_upload”

我不确定“/”是指正确的网站还是以“/videoes？...或“//www.youtube...

每次我需要获取以 http 或 https 开头的网站的链接，也许只是 www 也算作正确的网站。问题是我将什么定义为正确的站点地址和链接，什么不是？

我确定我的 getLinks 函数不好，代码不是正确的方式。

这就是我将链接添加到列表的方式：

```
private List<string> test(string url, int levels , DoWorkEventArgs eve)
        {
                HtmlAgilityPack.HtmlDocument doc;
                HtmlWeb hw = new HtmlWeb();
                List<string> webSites;// = new List<string>();
                List<string> csFiles = new List<string>();

                                               try
                {
                    doc = hw.Load(url);
                    webSites = getLinks(doc); 
```

webSites 是一个列表 几次后，我在列表站点中看到“/”或如上“//videoes... 或“//www...。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T02:04:34.423

不确定是否理解您的问题，但

/Videos 表示它正在从您正在访问的主机的根目录访问 Videos 文件夹

前任：

www.somesite.com/Videos

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T02:06:33.313

有绝对和相对 URL - 所以你从不同的链接获得不同的风格，你需要适当地使它们成为绝对 URL（Uri 类主要会为你处理它）。

*   foo/bar.txt - 来自与当前页面相同路径的相对 url
*   ../foo/bar.txt - 当前上一个文件夹的相对路径
*   /foo/bar.txt - 来自根目录的服务器相对 pat - 相同的服务器，从根目录开始的路径
*   //www.sample.com/foo/bar.txt - 与当前页面具有相同方案 (http/https) 的绝对 url
*   [http://www.sample.com/foo/bar.txt](http://www.sample.com/foo/bar.txt) - 完整的绝对网址

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T02:11:21.390

看起来您正在使用能够解析/读取 html 标签的库。

为了我的理解

var href = link.Attributes["href"].Value;

除了读取“href”属性的值之外什么都不做。

因此，假设网站的源代码使用 href="/news" 之类的链接，它甚至会抓取并保存到您列表的相对链接。

只需查看目标网站的源代码并根据您的结果进行检查。

# asp.net-mvc - LLBLGenProQuery 与 IQueryable

> ID：12398426
> 
> 赞同：0
> 
> 时间：2012-09-13T01:59:38.510
> 
> 标签：asp.net-mvc, vb.net, llblgenpro

我正在使用 LLBLGen Pro、MVC 3 和 VB.NET。我正在尝试返回 Iqueryable 的对象，但出现以下异常

无法投射类型为“SD.LLBLGen.Pro.LinqSupportClasses.LLBLGenProQuery `1[Mail.DAL.EntityClasses.TblCostCentreEntity]' to type 'System.Linq.IQueryable`1[Mail.Model.CostCentre]”的对象。

我不确定 LLBLGenProQuery 和 IQueryable 之间有什么区别？如何使用 LLBLGenPro 返回 IQueryable 对象？我的代码如下：

```
 Public Function GetAllCostCentres() As IQueryable(Of Model.CostCentre) Implements ICostCentreRepository.GetAllCostCentres
        Mapper.CreateMap(Of TblCostCentreEntity, CostCentre)()
        Dim metaData As New LinqMetaData
        Dim q = From p In metaData.TblCostCentre _
                    Select Mapper.Map(Of IQueryable(Of CostCentre), TblCostCentreEntity)(p)

        'Dim t As IQueryable(Of CostCentre) = Mapper.Map(Of CostCentre)(q)
        'Select New CostCentre With {.Active = p.Active, .CostCentre = p.CostCentre, .CreatedBy = p.CreatedBy, .DateCreated = p.DateCreated, .DateLastModified = p.DateLastModified, .ModifiedBy = p.ModifiedBy, .CostCentreID = p.CostCentreId}

        Return q
    End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T06:53:13.373

可查询的

（http://llblgen.com/documentation/3.5/LLBLGen%20Pro%20RTF/hh_goto.htm#Using%20the%20generated%20code/Linq/gencode_linq_gettingstarted.htm#LinqMetaData）

这是一个查询，它将使编译器生成代码，该代码在运行时创建一个表达式实例树，代表整个查询，简而言之就是一个表达式树。表达式树不能直接执行，必须对其进行解释才能执行表达式树中指定的内容。这就是 Linq 提供程序（如 Linq to LLBLGen Pro）所做的：它接受一个表达式树，将其转换为它可以理解的元素，解释这些元素并生成该查询的可执行形式。

ILLBLGenProQuery (http://llblgen.com/documentation/3.5/LLBLGen%20Pro%20RTF/hh_goto.htm#Using%20the%20generated%20code/Linq/gencode_linq_gettingstarted.htm#ILLBLGenProQuery)

在 LinqMetaData 生成的 IQueryable 元素上定义的接口。该接口允许您通过调用 Execute 方法来执行查询。这样做的好处是您可以在其本机容器中获取查询结果，例如实体集合。另一个优点是，要获取结果列表，提供者不必完整遍历结果，并将结果复制到列表中：返回的结果已经在它们最初存储的容器中。

# java - Guice vs EJB 用于注入池

> ID：12398427
> 
> 赞同：3
> 
> 时间：2012-09-13T01:59:38.687
> 
> 标签：java, jakarta-ee, ejb, guice

EJB 池和 Guice 的比较是什么？Guice 可以替代 EJB 吗？

在 EJB 会话 bean 中，将从池中分配以进行快速实例化，但 Guice 呢？

RGDS

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T19:23:35.470

我相信 nop，Guice 不能完全取代 EJB。

Guice 只实现了[JSR-330](http://www.jcp.org/en/jsr/detail?id=330)，CDI 实现了[JSR-330](http://www.jcp.org/en/jsr/detail?id=330)和[JSR-299](http://jcp.org/en/jsr/detail?id=299)。

EJB 是另一回事。

您可以使用 CDI 来注入 EJB。不确定，但我真的相信它不适用于 Guice，因为 JSR-299。

# asp.net - SignalR 不会在 ASP.Net Web 应用程序的 IIS 中加载信号器/集线器

> ID：12398428
> 
> 赞同：0
> 
> 时间：2012-09-13T01:59:59.477
> 
> 标签：asp.net, signalr

我有一个简单的示例 signalR 应用程序，可以使用 VS Development Studio 服务器正常工作，但是当我切换到使用 IIS 时它无法工作。

我已经尝试了所有版本的脚本声明，

```
<script src="/signalr/hubs" type="text/javascript"></script>
<script src="../signalr/hubs" type="text/javascript"></script>
<script src="http://localhost/TestApp/signalr/hubs" type="text/javascript"></script>
<script type="text/javascript" src='<%= ResolveClientUrl("~/signalr/hubs") type="text/javascript"></script> 
```

一切都无济于事。在 chrome 或 IE 中使用开发人员工具时，它仍然将 /signalr/hubs 视为 404 错误。任何想法将不胜感激。

我已经有线了

`GlobalHost.DependencyResolver.Register(typeof(IConnectionIdGenerator), () => new MyConnectionFactory());`

在 global.ascx 的 Application_Start 中。但似乎服务器端没有发生一些初始化。

ps 这是 asp.net 而不是 asp MVC。

# css - CSS 能否以两种不同的字体或颜色渲染文本两次？

> ID：12398429
> 
> 赞同：4
> 
> 时间：2012-09-13T02:00:08.467
> 
> 标签：css

[在这个 jsfiddle](http://jsfiddle.net/W2yRa/)中，相同的文本被绘制了两次：

*   首先是白色，纯色字体
*   然后是黑色，轮廓字体

Londrina Solid 和 Londrina Shadow 这两种字体被设计为具有完全相同的度量标准并以这种方式一起使用。

有没有办法在不将文本的两个副本放入 HTML 的情况下使用 CSS 来实现这种效果？（当然，我也不想将文本的副本放入 CSS 中。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T02:05:46.027

五个`text-shadow`s 几乎相同¹：

```
text-shadow: 0.03em 0.03em 0 black, -1.25px 0 0 black, 1.25px 0 0 black, 0 -1.25px 0 black, 0 1.25px 0 black; 
```

[这是一个演示！](http://dabblet.com/gist/3711421)

[¹是的，我知道这是矛盾的。]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T02:07:05.350

您可以尝试使用 :after 并使用 content 属性：

```
h1:after, h1 > span.shadow:after {
    content: "Nashville hack day is November 11";
    font-size: 700%;
} 
```

html可能是：

```
<body>
  <h1><span class="shadow"></span></h1>
</body> 
```

我意识到这可能很麻烦，但至少您只需编写一次内容。

见[jsfiddle](http://jsfiddle.net/bozdoz/W2yRa/2/)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-13T02:03:12.910

如果您尝试创建文本阴影，请查看[W3C: Css: text shadows](http://www.w3.org/Style/Examples/007/text-shadow.en.html)。

但是，这些与不兼容的 IE<10 不兼容。

# sql - 如何检查 SQLite 3 DB 表是否有模式，如果没有与新的合并？

> ID：12398431
> 
> 赞同：0
> 
> 时间：2012-09-13T02:00:31.337
> 
> 标签：sql, c, sqlite, database-design

假设我们创建了简单的数据库表，例如：

```
CREATE TABLE IF NOT EXISTS users (email varchar(100) UNIQUE NOT NULL primary key, pass varchar(100)) 
```

现在我们想要`CREATE TABLE IF NOT EXISTS or merge with previous one`看起来像

```
users (email varchar(100) UNIQUE NOT NULL primary key, name varchar(100)) 
```

因此，如果表存在，我们要删除 pass 列并添加 name 列。

这样的事情是否可以通过 SQL 命令和 SQLite pragma 或如何使用 C SQLite api 来实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T02:04:46.717

[事实证明](http://www.sqlite.org/faq.html#q11)，在 SQLite 中，如果要删除单个列，则必须重新创建整个表。提供的链接中的示例非常好 - 不过，您可能需要对其进行调整以满足您的需求。

这就是我想出的。

```
CREATE TEMPORARY TABLE users_1(email varchar(100) unique not null primary key, user varchar(100));
INSERT INTO users_1 SELECT email, '' FROM users;
DROP TABLE users;
CREATE TABLE users(email,user varchar(100));
INSERT INTO users SELECT email, user FROM users;
DROP TABLE users_1; 
```

# linker - Apple Mach-O Linker Error ZBarSDK 在构建分发时出错

> ID：12398433
> 
> 赞同：25
> 
> 时间：2012-09-13T02:00:44.597
> 
> 标签：linker, ios6

我在使用 ZBarSDK（iOS 的条形扫描库）时遇到了同样的错误。当我将它上传到我的开发设备或在 iOS6 模拟器上测试它时，它运行良好。但是，当我尝试为 Distribution 运行它时，它失败了：

（空）：文件是通用的（3 个切片）但不包含一个（n）armv7s 切片：/Users/quique123/Documents/iphone apps/ScanThis/ZBarSDK/libzbar.a 用于架构 armv7s

其中 libzbar.a 是来自 sdk 的库。

有任何想法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-20T01:04:17.797

打开 ZBar 代码 Mercurial 代码仓库

[http://zbar.hg.sourceforge.net/hgweb/zbar/zbar/summary](http://zbar.hg.sourceforge.net/hgweb/zbar/zbar/summary)

转到 bz2/zip/gz 链接以下载当前源（首选格式）

[http://zbar.hg.sourceforge.net/hgweb/zbar/zbar/archive/fa84e0427c24.tar.bz2](http://zbar.hg.sourceforge.net/hgweb/zbar/zbar/archive/fa84e0427c24.tar.bz2)（截至发布日期） [http://zbar.hg.sourceforge.net/hgweb/zbar/zbar/ archive/fa84e0427c24.zip](http://zbar.hg.sourceforge.net/hgweb/zbar/zbar/archive/fa84e0427c24.zip)（截至发布日期） [http://zbar.hg.sourceforge.net/hgweb/zbar/zbar/archive/fa84e0427c24.tar.gz](http://zbar.hg.sourceforge.net/hgweb/zbar/zbar/archive/fa84e0427c24.tar.gz)（截至发布日期）

打开“iphone”子目录

打开“zbar.xcodeproj”文件

在方案的菜单中选择 libzbar 并在支持的架构中构建您自己的二进制版本

打开该项目的 DerivedData 并导航到 Build/Products/

查看 libzbar.a 的所有文件夹

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-13T02:30:15.177

只需从 Target Aguilar 设置中的 Valid Architectures 中删除不良架构，您就可以开始了 :)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-13T09:47:44.490

当您选择目标 > 构建设置（全部）> 架构 > 有效架构时。

当您收到上述错误时，请通过双击该行并选择 armv7s 并按 (-) 按钮来删除 armv7s（现在可能是 [armv7 armv7s]）。

就我而言，这解决了错误。不知道这是否会进一步产生任何不利影响..

编辑：现在我确信这至少有一个缺点：该项目不适用于 iPhone 5。解决方案是重新编译 ZBar 源，如此处所述：[ZBar library for iPhone 5(ARMV7s)](http://www.federicocappelli.net/2012/10/05/zbar-library-for-iphone-5-armv7s/)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-08-05T07:12:00.643

您可以在下面的 URL 中下载 ZBarSDK 的新版本。

[http://sourceforge.net/projects/zbar/files/iPhoneSDK/beta/](http://sourceforge.net/projects/zbar/files/iPhoneSDK/beta/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-23T19:48:02.843

我刚刚在 Build Settings / Valid Architectures: "armv7" 中替换了 2 行 "armv6" 和 "armv7"

（通常我只在提交到 iTunes 时才会收到此链接器错误，但在设备中调试时不会出现此错误）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-22T12:37:18.167

只需删除“armv7s”，这将工作:)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-06-27T12:37:09.757

将“仅构建活动架构”设置为“是”以进行发布。我这样做解决了我的问题，因为我面临同样的问题。

# axis2 - 如何为 Rampart 指定消息体加密方法？

> ID：12398434
> 
> 赞同：0
> 
> 时间：2012-09-13T02:00:46.907
> 
> 标签：axis2, ws-security, policy, encryption-asymmetric, rampart

我在 Web 服务的服务器端使用 Axis2 1.6.1 + Rampart 1.6.1。

我被要求使用 RSA 1.5 进行消息正文加密。据我所知（通过检查捕获的 SOAP 消息），加密消息正文的默认算法是 Triple DES CBC。所以我想将其更改为 RSA 1.5。

我假设我需要在我的服务器策略 XML 文件中设置一些属性。但是，我无法弄清楚可能是什么属性。我查看了示例策略文件、[关于 WSS 配置](http://ws.apache.org/wss4j/config.html)的[页面、关于 Rampart 配置](https://axis.apache.org/axis2/java/rampart/rampartconfig-guide.html)的页面，以及各种博客等等。

如果有人可以指出示例策略或相关配置文档或其他内容，我将不胜感激。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T17:09:57.070

请参阅[WS-Security Policy Specification 第 6.1 节](http://docs.oasis-open.org/ws-sx/ws-securitypolicy/v1.3/os/ws-securitypolicy-1.3-spec-os.html#_Toc212617835)。为什么要使用 RSA ？规范中给定的算法套件不使用 RSA 进行加密。

# facebook - Facebook 讨厌我的网站/赞按钮未加载

> ID：12398436
> 
> 赞同：0
> 
> 时间：2012-09-13T02:00:50.193
> 
> 标签：facebook, facebook-like

这是一个两部分的问题：

Facebook 讨厌我的网站。我多次测试了“赞”按钮，现在当我尝试赞我网站上的帖子时，它只会以红色小字显示“错误”。其他人似乎能够喜欢我的网站。

当我尝试在我的 Facebook 页面上分享我的网站时，它也会在那里显示一个错误。

此外，除了个别帖子外，“赞”按钮现在甚至都不会加载。

我使用了 Facebook 调试器，除了应用程序和管理标签外，一切都很好。

有谁知道如何从 FB 的狗窝中获取一个网站，以及为什么我的喜欢按钮无法加载？干杯。

我的网站是[http://speechnotrecognised.blogspot.com.au/](http://speechnotrecognised.blogspot.com.au/)我正在使用以下 FB 代码，包括 OG 标签：

```
xmlns:fb='http://ogp.me/ns/fb#'

<meta expr:content='data:blog.canonicalUrl' property='og:url'/>
<meta expr:content='data:blog.metaDescription' property='og:description'/>  

<b:if cond='data:blog.postImageThumbnailUrl'> 
<meta expr:content='data:blog.postImageThumbnailUrl' property='og:image'/> 
<b:else/> 
<meta content='http://i1252.photobucket.com/albums/hh569/speechnotrecognised/bc0a9481.jpg' property='og:image'/> 
</b:if> 

<b:if cond='data:blog.pageType == &quot;item&quot;'> 
<meta expr:content='data:blog.pageName' property='og:title'/> 
<meta content='article' property='og:type'/>
<b:else/> 
<meta expr:content='data:blog.title' property='og:title'/> 
<meta content='blog' property='og:type'/> 
</b:if> 

<div id='fb-root'/>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = &quot;//connect.facebook.net/en_US/all.js#xfbml=1&quot;;
  fjs.parentNode.insertBefore(js, fjs);
}(document, &#39;script&#39;, &#39;facebook-jssdk&#39;));</script>

<fb:like font='arial' href=' + data:post.canonicalUrl + ' send='false' show_faces='true' width='450'/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T13:38:08.710

这就是在页面的 HTML 代码中实际呈现为 XFBML 标记的内容：

```
<fb:like width="450" show_faces="true" send="false"
  href=" + data:post.canonicalUrl + " font="arial"
  class=" fb_edge_widget_with_comment fb_iframe_widget"> 
```

你不能指望 Facebook 知道网络上的页面`+ data:post.canonicalUrl +`应该是什么……</p>

因此，请解决您的 CMS/模板语言/用于创建此代码的任何内容的问题，以便将*实际 URL*放入此元素的 href 属性中。

# .net - 使用全局临时表会影响性能吗？

> ID：12398438
> 
> 赞同：0
> 
> 时间：2012-09-13T02:01:37.593
> 
> 标签：.net, performance, oracle, architecture

我目前正在查看使用 Oracle 11g 数据库的 .net 解决方案上的数据访问代码。我发现了一些代码，其功能是使用从数据库中获取的数据填充 .net 集合。为实现此目的，代码在数据访问层使用以下步骤：

1.  在全局临时表中插入输入数据。这些数据来自前端。前端接收一个字符串并在全局临时表上创建一个 DML 插入语句，然后使用`OracleCommand.ExecuteNonQuery()`.
2.  执行预期的程序。此过程使用上一步填充的全局临时表来生成输出。
3.  从步骤 2 中的全局临时表中读取数据。

这是我第一次看到类似的东西。虽然我还没有看到这段代码运行，但我认为这段代码可能存在一些性能和可维护性问题。通常我看到这些步骤是通过编写一个实现该功能的过程而不求助于全局临时表来完成的。

1.  第一种方法会产生性能问题？
2.  您能否引用任何反对第一种方法的权威来源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T06:24:02.617

全局临时表的执行速度与普通表相同。它们被写入磁盘、包含块、加载到缓冲区缓存等。

他们只有一些交易功能，[请参阅文档](http://docs.oracle.com/cd/B28359_01/server.111/b28318/schema.htm#autoId12)。

您如何实现应用程序，是您的选择。如果数据很大并且您不能完全保存在内存中，则在处理之前将数据加载到表中可能是一种策略。而且...您可以测试这些场景。

# javascript - 当侧边栏很长时，滚动/固定侧边栏会被切断

> ID：12398439
> 
> 赞同：1
> 
> 时间：2012-09-13T02:01:43.493
> 
> 标签：javascript, jquery, scroll, position

当您向下滚动浏览器时，我有一个小的 jQuery 脚本来保持侧边栏可见。但是，侧边栏可能会变得很长，因为它会包含过滤器（下拉菜单和复选框），因此底部会被截断。

我想在这个网站上产生这样的效果：

[http://www.lyst.com/](http://www.lyst.com/)

在某种程度上，当侧边栏很长时，您仍然可以上下滚动。只有当它到达侧边栏的底部/顶部时，它才会变得固定。

有谁知道我在哪里可以得到一个完全做到这一点的脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T02:20:30.893

以您可以轻松引用您想要避免冲突的对象的方式设置您的 CSS 和 HTML 标记。创建条件语句以比较所述引用。

[首先，工作的 jsFiddle。](http://jsfiddle.net/PB3vQ/)

HTML ->

```
<div class="content">
    <div class="main">
        Main Content
    </div>
    <div class="sidebar">
        Sidebar
    </div>
    <div class="footer">
        Footer
    </div>
</div> 
```

CSS ->

```
#content{
  position:relative; /* required */
  height:2000px;    
}
.main{
  margin-left:100px;
  border:1px solid rgb(120,120,120);
  height:1500px;  
}
.sidebar{
  position:absolute; /* required */
    top:25px; /* required -- does NOT need to be this value, however. */
    left:5px; /* required -- does NOT need to be this value, however.*/
  border:1px solid rgb(8,8,8);
  background:rgba(70,70,70,.9);  
  color:#ecebeb;
  width:93px;    
}
.footer{
  border-top:1px solid #ff0000;
  height:498px;    
} 
```

jQuery ->

```
$(window).scroll(function(){
    var dist = $(window).scrollTop();
    var sTop = $('.sidebar').position().top;
    var mHeight = $('.main').height();
    var userDist = 100;
    if((sTop > (mHeight - userDist)) && (dist > (mHeight - userDist))){
        //the sidebar is pinned now. it won't scroll further.
    }else if(dist < (mHeight - userDist)){
        $('.sidebar').animate({
            top: dist + $('.sidebar').height()
        }, 0);         
    }
}); 
```

# python - Python 相对导入导致 SyntaxError 异常

> ID：12398442
> 
> 赞同：12
> 
> 时间：2012-09-13T02:01:59.933
> 
> 标签：python, import, syntax-error

根据[python 文档](http://docs.python.org/tutorial/modules.html#intra-package-references)，从 python 2.5 开始就支持相对导入和包内引用。我目前正在运行 Python 2.7.3。因此，我尝试在自己的包中实现这一点，以便将其用于更简单的导入。我惊讶地发现它向我抛出了一个 SyntaxError 异常，我希望有人能帮助解决这个问题。

我设置了一个测试目录进行测试：

```
tester
├── __init__.py
├── first_level.py
└── sub
    ├── __init__.py
    └── second_level.py 
```

两个 __init__.py 模块都是空的。其他模块是：

* * *

```
# first_level.py
print "This is the first level of the package" 
```

* * *

```
# sub/second_level.py
import ..first_level
print "This is the second level" 
```

* * *

当我尝试导入 second_level 模块时，出现以下错误：

```
Python 2.7.3 (default, Aug  1 2012, 14:42:42) 
[GCC 4.2.1 Compatible Apple Clang 4.0 ((tags/Apple/clang-421.0.57))] on darwin
Type "help", "copyright", "credits" or "license" for more information.
Welcome!
>>> import tester
>>> import tester.sub.second_level
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "tester/sub/second_level.py", line 1
    import ..first_level
           ^
SyntaxError: invalid syntax 
```

我希望这两行一个接一个地打印，但它引发了一个异常。那么，我是否做错了导入？你还有其它的想法吗。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-13T02:10:45.440

你不能像那样导入模块。 `import ..blah`不是有效的导入语法。你需要做`from .. import first_level`。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-13T02:11:10.503

我通常会做类似的事情：

```
import sys 
sys.path.append("/home/me/tester")
import first_level 
```

希望这可以帮助。〜本

# html - 使用border-image/border-width时的居中内容

> ID：12398443
> 
> 赞同：1
> 
> 时间：2012-09-13T02:02:02.850
> 
> 标签：html, border, centering, css

我正在尝试创建一个样式按钮，其中有一个以单个字符为中心的按钮。

我正在使用“border-image”和“border-width”来创建一个可以拉伸到更大内容的按钮（在这个简化的场景中已经失去了这种能力......）。

**我的问题是：当按钮很小时（特别是当按钮略大于 2*border-width 时），内容不居中。**我已经尝试过“传统”技术，`margin: 0 auto;`但似乎没有任何乐趣。使用`dumb-button`没有这些边框属性的类我可以得到我想要的（见下文）

这巧妙地说明了这个问题。我想要以样式按钮为中心的字符：

[http://jsfiddle.net/rjmLy/](http://jsfiddle.net/rjmLy/)

（适用于 Chrome/Safari，这仅针对 Webkit）（来自[http://girliemac.com/blog/2011/07/29/five-css-tricks-used-in-enyo](http://girliemac.com/blog/2011/07/29/five-css-tricks-used-in-enyo)的主题按钮示例）

我的CSS如下：

```
.fancy-button {
    border-image: url(http://girliemac.com/sandbox/images/alert-button.png) 0 14 111 14 fill repeat repeat;
    border-width: 0 14px;
    box-sizing: border-box;
    font-size: 16px;
    height: 37px;
    line-height:37px;
    text-align: center;
    margin: 0 auto;
    width: 28px;
}
.centerme {
    position:relative;
    margin:0 auto;
}
.dumb-button {
    font-size: 16px;
    height: 37px;
    line-height: 37px;
    text-align: center;
    width: 28px;
    background-color: red;
    margin: 0 auto;
} 
```

​</p>

HTML 看起来像这样。这`centerme`门课试图尝试`div`在旧形状的顶部集中一个新的。它对我不起作用。版本看起来正确（`dumb-button`但乏味......）

```
<div class="fancy-button">I</div>
<div class="fancy-button">W</div>
<div class="fancy-button"><div class="centerme">W</div></div>

<div class="dumb-button">I</div>
<div class="dumb-button">W</div>
<div class="dumb-button"><div class="centerme">W</div></div> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T05:08:55.590

您正在使用 CSS3 Sprite 和一个`border-image`属性构建按钮，其中按钮左侧的起点为 14px 宽，而按钮右侧的起点为 14px 宽。

![CSS3 边框图像](../Images/7b28dd1c7d46266bda13d7423110cfef.png)

在您的 CSS 中，您将按钮的宽度设置为 28 像素：问题是这没有为您放置在按钮中间的任何文本留下空间，因此字母与边框图像的一部分重叠。

为了解决这个问题，您可以简单地`width`将按钮的大小增加到大约 42 像素或更大。

```
.fancy-button {
  border-image: url(http://girliemac.com/sandbox/images/alert-button.png) 0 14 111 14 fill repeat repeat;
  border-width: 0 14px;
  box-sizing: border-box;
  font-size: 16px;
  height: 37px;
  line-height:37px;
  text-align: center;
  margin: 0 auto;
  width: 42px;
} 
```

这是一个工作小提琴：http: [//jsfiddle.net/QYrzS/](http://jsfiddle.net/QYrzS/)

但是，如果你真的想保持图像那么小 - 事情就有点困难了。一种选择是将每个按钮（单个字母）的内容包装在 a 中`<div>`，然后手动设置每个按钮的边距。例如：

HTML

```
<div class="fancy-button"><div class="centerme">W</div></div> 
```

CSS

```
.centerme {
  margin-left:-7px;
} 
```

这有点老套，需要手动调整（因为每个字母的宽度不同）。

这是一个工作演示：http: [//jsfiddle.net/rjmLy/](http://jsfiddle.net/rjmLy/)

*请注意，字母`i`没有居中。您需要为`<div>`持有该信件的个人指定正确的边距才能解决此问题。*

# ruby-on-rails-3 - gmaps4rails 不显示地图

> ID：12398445
> 
> 赞同：0
> 
> 时间：2012-09-13T02:02:13.813
> 
> 标签：ruby-on-rails-3, gmaps4rails

我不知道我错过了什么。我在另一篇文章中看到 gmaps4rails gem 包含一些处理 json 的 javascripts 代码，并且在我的页面呈现的代码中它没有出现。地图的容器窗口是空白的，里面没有任何地图。我正在运行 rails 3.2.8、ruby 1.9.3 和 gmaps4rails 1.5.5。提前致谢。

# 控制器代码

```
respond_to :json, :html

def mostrar_mapa_unidades
  @json = Unidade.all.to_gmaps4rails
  respond_with @json
end 
```

# 查看代码

```
<%= gmaps4rails(@json) %>
<%= @json %> 
```

# 型号代码

```
acts_as_gmappable :process_geocoding => false 
```

# application.html.erb 代码

```
<!DOCTYPE html>
<html>
<head>
    <title>SONep</title>
    <%= stylesheet_link_tag :all %>
    <%= javascript_include_tag :defaults %>
    <%= csrf_meta_tag %>
</head>
<body>
<%= yield %>
<%= yield :scripts %>
</body>
</html> 
```

# 渲染的网页代码（主要部分）

```
<link href="/assets/gmaps4rails.css?body=1" media="screen" rel="stylesheet" type="text/css" />
<script src="/assets/jquery.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery_ujs.js?body=1" type="text/javascript"></script>
<script src="/assets/gmaps4rails/gmaps4rails.base.js?body=1" type="text/javascript"></script>
<script src="/assets/gmaps4rails/gmaps4rails.bing.js?body=1" type="text/javascript"></script>
<script src="/assets/gmaps4rails/gmaps4rails.googlemaps.js?body=1" type="text/javascript"></script>
<script src="/assets/gmaps4rails/gmaps4rails.mapquest.js?body=1" type="text/javascript"></script>
<script src="/assets/gmaps4rails/gmaps4rails.openlayers.js?body=1" type="text/javascript"></script>

<div class="map_container"> 
  <div id="map" class="gmaps4rails_map"></div>
</div>

@json

[{&quot;lat&quot;:&quot;-23.701613&quot;,&quot;lng&quot;:&quot;-46.547077&quot;},{&quot;lat&quot;:&quot;-23.704757&quot;,&quot;lng&quot;:&quot;-46.545274&quot;},{&quot;lat&quot;:&quot;-23.7074712&quot;,&quot;lng&quot;:&quot;-46.5419723&quot;}] 
```

# ruby-on-rails - Rspec：如何让工厂有两个协会？

> ID：12398447
> 
> 赞同：1
> 
> 时间：2012-09-13T02:02:37.653
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, factory-bot, rspec-rails

由于位置属于我的应用程序中的所有者和用户，我想根据这个事实来构建它。所以在我的工厂里是这样的：

```
FactoryGirl.define do
  factory :user do
    username   'user1'
    email      'user@example.com'
    timezone   'Eastern Time (US & Canada)'
    password   'testing'
  end

  factory :owner do
    name    'Owner One'
    user
  end

  factory :location do
    name 'Location One'
    about 'About this location'
    website 'http://www.locationone.com/'
    phone_number '12 323-4234'
    street_address 'Shibuya, Tokyo, Japan'
    owner
    user
  end
end 
```

比我有我的**规范/模型/location_spec.rb**

```
describe Location do
  before(:each) do
    @location = FactoryGirl.build(:location)
  end
end 
```

比我的模型**location.rb**

```
class Location < ActiveRecord::Base
  attr_accessible :name, :about. :website, phone_number, 
                  :street_address, owner_id
  belongs_to :user 
  belongs_to :owner
end 
```

注：`owner_id`可用是因为可以选择。

尽管如此，它会返回我的测试失败：

```
Failure/Error: @location = FactoryGirl.build(:location) 
     ActiveRecord::RecordInvalid: 
       Validation failed: Email has already been taken, Email has already been taken, Username 
```

我希望这是因为所有者在不应该创建用户时首先创建用户，然后该位置创建相同的用户。那么我该如何解决呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T04:35:11.207

你可以这样写关联

```
User
has_one :locations

Owner
has_one :locations

Location
belongs_to :users
belongs_to :owner 
```

虽然这个关联会起作用并且它**与 FactoryGirl 无关**。而且我觉得这个设计不好，为什么要让所有者成为不同的领域，假设一个位置是否属于不同的用户和所有者。您也可以通过在用户模型中添加字段 is_owner 来做到这一点，无需为所有者创建不同的模型。

根据目前的信息，我可以说这么多。

也尝试改变你的工厂女孩​​实施

```
FactoryGirl.define  do
  factory :user, :class=> User do |f|    
    f.username   'user1'
    f.email      'user@example.com'
    f.timezone   'Eastern Time (US & Canada)'
    f.password   'testing'  
  end
end

FactoryGirl.define do
  factory :owner do, :class => Owner do |f|
    f.name    'Owner One'
    f.about   ''
    f.private false    
  end 
end 
```

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T22:15:50.457

不得不为我的工厂添加序列。就是这样。[https://github.com/thoughtbot/factory_girl/wiki/Usage](https://github.com/thoughtbot/factory_girl/wiki/Usage)

```
factory :user do
  sequence(:username)  { |n| "User#{n}" }
  sequence(:email)     { |n| "User#{n}@example.com"}  
  timezone   'Eastern Time (US & Canada)'
  password   'testing'
end 
```

# scala - Scala IDE 支持自动完成和语法高亮

> ID：12398455
> 
> 赞同：2
> 
> 时间：2012-09-13T02:03:24.497
> 
> 标签：scala, ide

我正在寻找一个好的 Scala IDE。

我尝试了 Eclipse（前一段时间）和 IntelliJ Idea（这些天）插件，但我对它们都不满意。首先它非常缓慢且不稳定，而我不太喜欢 IntelliJ Idea 的界面。

有没有替代方案？

我将使用 SBT 项目，我正在寻找的主要是语法突出显示、自动完成。最好对源代码进行部分编译，因为我不习惯 Scala 语法，它会帮助我在编写错误时立即发现错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-13T07:00:58.540

恕我直言 InteliJ 是目前最好的 Scala IDE。首先，与 Eclipse 相比，我在不同的界面上也遇到了一些问题。但最终您会从 IntelliJ 附带的整个软件包中受益。还有一个活跃的 scala 插件开发。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-13T02:52:20.247

我喜欢做的是将我的终端水平拆分一次，然后将底部窗格垂直拆分一次。

在顶部窗格中，我使用 NERDTree 插件（就像文本编辑器中的项目文件夹/文件浏览器一样）`vim`（`emacs`如果您是人也可以使用）。`emacs`在左下角，我有 SBT 连续编译 ( `sbt ~compile`)。我使用右下窗格来实际运行代码（测试等）。

关于自动完成，您可以尝试类似 Snipmate 插件的`vim`.

此外，正如 Ivan 所说，如果您最终使用ENSIME 似乎会受到广泛欢迎 - 不幸的是，至少据我所知，目前`emacs`似乎还没有 ENSIME 端口。`vim`

使用此设置，我在顶部窗格中进行编辑，一旦我保存文件，我只需浏览左下角并知道我何时输入错误，或者我的代码可能只是完全错误，就可以立即获得反馈，例如那。

在一个稍微相关的说明中，我曾经使用 IDE，但它们对我的口味来说太乱了（当时我正在编写 C 和 C++），所以我只使用了一个文本编辑器（例如 Chocolat、Sublime Text 2）并使用了一个终端，这对我来说很好了大约一年。然后今年夏天我真的坐下来尝试了`vim`，老实说，我的所有终端设置比以前更有效率。只是我的2美分。

这一切还具有在远程服务器上工作的额外好处。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-13T07:39:20.957

[Scala IDE for Eclipse](http://www.scala-ide.org)正在积极开发和快速发展。您现在应该尝试一下（我不知道“前一段时间”是什么意思，但如果超过 6 个月，您可能会感到惊喜）。当然，因为我是提交者，所以我有偏见。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T02:19:10.387

你可以为 emacs 尝试 ENSIME。您还可以将它与 jEdit、Sublime Text 2 等一起使用。

我个人使用 Scala IDE 2.1（用于 eclipse）。现在它快了很多，并且在与您处于类似情况之后，它已经到了我真正想要使用它的地步。

# wix - WIX 组件 -> 文件共享

> ID：12398456
> 
> 赞同：0
> 
> 时间：2012-09-13T02:03:31.070
> 
> 标签：wix

我正在尝试使用 FileShare 共享文件夹，但出现此错误；任何想法？

```
Coppying WixCommonLib
Coppying TNSORA
running Candle, candle.exe -ext WixIisExtension Product.wxs
Microsoft (R) Windows Installer Xml Compiler version 3.5.2519.0
Copyright (C) Microsoft Corporation. All rights reserved.
Product.wxs
Product.wxs(41) : error CNDL0005 : The Component element contains an unexpected child element 'FileShare'.
Product.wxs(44) : error CNDL0005 : The Component element contains an unexpected child element 'User'. 
```

这是脚本：

```
 <Component Id="FilesShareComp" Win64="yes" Guid="801595A6-4CB0-481B-892E-C37A48954DD9">
      <FileShare Id="FilesShare" Name="MyFolder" Description="MyFolder">
        <Permission User="sharedusers" GenericAll="yes" />
      </FileShare>
      <User Id="shareduser" Name="testuser" CreateUser="No" Domain="[ComputerName]" Password="Password1" FailIfExists="no">
      </User>
    </Component> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T18:42:38.303

尝试这个

```
<user:User Id='Everyone' Name='Everyone' CreateUser='no' FailIfExists='no' RemoveOnUninstall='no' />
<user:FileShare Id='SharedFolder' Description='Share Folder description if any' Name='ShareFolderName'>
  <user:Permission GenericRead='yes' ReadPermission='yes' Read='yes' GenericExecute='yes' User='Everyone' />
</user:FileShare> 
```

# c# - 如何修改我的班级以覆盖列表添加？

> ID：12398457
> 
> 赞同：0
> 
> 时间：2012-09-13T02:03:34.840
> 
> 标签：c#

我正在使用向我建议的以下课程来跟踪时间：

```
public sealed class TimeEvent
{
  public long Elapsed {get; private set;}
  public string Description { get; private set;}
  public TimeEvent(long elapsedTime, string descriptionOfEvent)
  {
    this.Elapsed = elapsedTime;
    this.Description = descriptionOfEvent;
  }
} 
```

这是我的班级，其中包含时间列表：

```
public abstract class BaseGridViewModel
{

    protected BaseGridViewModel()
    {
        Times = new List<TimeEvent>();
    }
    public IList<TimeEvent> Times {get; set;}

} 
```

以下是如何启动秒表并添加事件：

```
var sw = Stopwatch.StartNew();
vm.Times.Add(new TimeEvent(sw.ElapsedMillisends, "After event 1"));
sw.Stop(); 
```

有没有一种方法可以让我在我的视图模型中有一个方法，我可以将值传递给它，然后它会在内部执行与 Add 相同的操作。例如这样的方法：

```
vm.Event(sw, "After event 1")); 
```

甚至

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T02:09:15.293

为什么不？

```
public abstract class BaseGridViewModel
{

    protected BaseGridViewModel()
    {
        Times = new List<TimeEvent>();
    }
    public IList<TimeEvent> Times {get; set;}

    public void Event(StopWatch watch, string message)
    {
        Times.Add(new TimeEvent(watch.ElapsedMilliseconds, message));
    }

} 
```

# haskell - 如何使用 Haskell 对列表中的相似项目进行分组？

> ID：12398458
> 
> 赞同：27
> 
> 时间：2012-09-13T02:04:03.677
> 
> 标签：haskell

给定这样的元组列表：

```
dic = [(1,"aa"),(1,"cc"),(2,"aa"),(3,"ff"),(3,"gg"),(1,"bb")] 
```

如何对*dic*的项目进行分组，从而生成一个列表*grp*，其中，

```
grp  = [(1,["aa","bb","cc"]), (2, ["aa"]), (3, ["ff","gg"])] 
```

我实际上是 Haskell 的新手......并且似乎爱上了它......在 Data.List 中*使用*
group*或*groupBy*只会*将列表中相似的相邻项目分组。我为此编写了一个效率低下的函数，但它会导致内存故障，因为我需要处理一个非常大的编码字符串列表。希望您能帮助我找到更有效的方法。

 ** * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-09-13T03:23:20.267

只要有可能，重用库代码。

```
import Data.Map
sortAndGroup assocs = fromListWith (++) [(k, [v]) | (k, v) <- assocs] 
```

在 ghci 中尝试一下：

```
*Main> sortAndGroup [(1,"aa"),(1,"cc"),(2,"aa"),(3,"ff"),(3,"gg"),(1,"bb")]
fromList [(1,["bb","cc","aa"]),(2,["aa"]),(3,["gg","ff"])] 
```

**编辑**在评论中，有些人担心是否`(++)`是`flip (++)`正确的选择。文档没有说明事物的关联方式。您可以通过实验找出答案，或者您可以使用[差异列表](https://wiki.haskell.org/Difference_list)来回避整个问题：

```
sortAndGroup assocs = ($[]) <$> fromListWith (.) [(k, (v:)) | (k, v) <- assocs]
-- OR
sortAndGroup = fmap ($[]) . M.fromListWith (.) . map (fmap (:)) 
```

这些替代品的长度与原件的长度大致相同，但它们对我来说可读性差一些。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-09-13T02:08:45.813

这是我的解决方案：

```
import Data.Function (on)
import Data.List (sortBy, groupBy)
import Data.Ord (comparing)

myGroup :: (Eq a, Ord a) => [(a, b)] -> [(a, [b])]
myGroup = map (\l -> (fst . head $ l, map snd l)) . groupBy ((==) `on` fst)
          . sortBy (comparing fst) 
```

这首先使用以下命令对列表进行排序`sortBy`：

```
[(1,"aa"),(1,"cc"),(2,"aa"),(3,"ff"),(3,"gg"),(1,"bb")]     
=> [(1,"aa"),(1,"bb"),(1,"cc"),(2,"aa"),(3,"ff"),(3,"gg")] 
```

然后通过关联的键对列表元素进行分组`groupBy`：

```
[(1,"aa"),(1,"bb"),(1,"cc"),(2,"aa"),(3,"ff"),(3,"gg")] 
=> [[(1,"aa"),(1,"bb"),(1,"cc")],[(2,"aa")],[(3,"ff"),(3,"gg")]] 
```

然后将分组项转换为元组`map`：

```
[[(1,"aa"),(1,"bb"),(1,"cc")],[(2,"aa")],[(3,"ff"),(3,"gg")]] 
=> [(1,["aa","bb","cc"]), (2, ["aa"]), (3, ["ff","gg"])]`) 
```

测试：

```
> myGroup dic
[(1,["aa","bb","cc"]),(2,["aa"]),(3,["ff","gg"])] 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-13T02:25:51.830

您也可以使用[TransformListComp](http://www.haskell.org/ghc/docs/7.4.1/html/users_guide/syntax-extns.html#generalised-list-comprehensions)扩展，例如：

```
Prelude> :set -XTransformListComp 
Prelude> import GHC.Exts (groupWith, the)
Prelude GHC.Exts> let dic = [ (1, "aa"), (1, "bb"), (1, "cc") , (2, "aa"), (3, "ff"), (3, "gg")]
Prelude GHC.Exts> [(the key, value) | (key, value) <- dic, then group by key using groupWith]
[(1,["aa","bb","cc"]),(2,["aa"]),(3,["ff","gg"])] 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-13T02:16:02.970

1.  如果列表没有按第一个元素排序，我认为你不能做得比 O(nlog(n)) 更好。

    *   一种简单的方法是`sort`使用第二部分答案中的任何内容。

    *   您可以从`Data.Map`地图`Map k [a]`中使用，例如使用元组的第一个元素作为键并继续添加值。

    *   你可以编写自己的复杂函数，即使在你所有尝试之后仍然需要 O(nlog(n))。

2.  如果列表按第一个元素排序，就像您的示例中的情况一样，那么对于@Mikhail 的答案中给出的 groupBy 之类的任务或使用 foldr ，任务是微不足道的，还有许多其他方法。

使用 foldr 的示例如下：

```
 grp :: Eq a => [(a,b)] -> [(a,[b])]
  grp = foldr f []
     where 
       f (z,s) [] = [(z,[s])] 
       f (z,s) a@((x,y):xs)  | x == z = (x,s:y):xs 
                             | otherwise = (z,[s]):a 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-12T14:27:00.083

```
{-# LANGUAGE TransformListComp #-}

import GHC.Exts
import Data.List
import Data.Function (on)

process :: [(Integer, String)] -> [(Integer, [String])]
process list = [(the a, b) |  let info = [ (x, y) | (x, y) <- list, then    sortWith by y ], (a, b) <- info, then group by a using groupWith] 
```*

# php - 为什么我在使用 html/jquery/php 的输出时遇到问题

> ID：12398459
> 
> 赞同：0
> 
> 时间：2012-09-13T02:04:04.190
> 
> 标签：php, html, jquery

问题 1 为什么我的表不对齐？

![在此处输入图像描述](../Images/307277aa08d9d226a09c003b8df5c683.png)

问题 2 为什么每次我在导航中单击我的战士列表时，输出都是这样的

![在此处输入图像描述](../Images/4d16bf4feedae1f1bf240be97e01593c.png)

这是我的js

```
function getWarriors() {
        $.ajax({
            url: 'display_warrior.php',
            success: function(data) {
                $('#listWarriors').append(data);
            }
        });
    } 
```

这是我的html

```
<article id="listWarriors">
    <h1>Warrior List</h1>
    <table>
        <tr>
            <th colspan="2">Warriors</th>
        </tr>
        <tr>
            <td>Warrior Name</td>
            <td>Warrior Type</td>
        </tr>

    </table>
</article> 
```

这是我的 php

```
foreach($result as $names){

$warriors['wname'] = $names['warrior_name'];
$warriors['wtype'] = $names['warrior_type'];

echo '<tr>
<td>'.$warriors['wname'].'</td>
<td>'.$warriors['wtype'].'</td>
</tr>'; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T02:10:52.440

结果附加在`</table>` 尝试将您的ajax成功更改为：

```
$('#listWarriors table').append(data); 
```

对于number2，我担心它会被容器截断（#listWarriors）..检查你的那个id的css是否宽度是固定的......让它变宽你喜欢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T02:18:46.107

您拥有 jQuery 的方式是将内容附加到 '' 标签，而不是表格。

这就是添加每个项目时发生的情况，以及它的设置方式（我顺便添加了一个thead标签。一旦你开始为你的表格设计样式就会派上用场）

这是附加内容时的输出，以及为什么它的渲染错误。

```
<article id="listWarriors">
    <h1>Warrior List</h1>
    <table>
        <thead>
            <tr>
                <th colspan="2">Warriors</th>
            </tr>
            <tr>
                <td>Warrior Name</td>
                <td>Warrior Type</td>
            </tr>
        </thead>

    </table>

    <tr>
         <td>the wname</td>
         <td>the wtype</td>
    </tr>
</article> 
```

话虽如此，将您的 jquery 修改为

```
$('#listWarriors table').append(data); 
```

顺便说一句，您要附加多少项目。如果您将进行多个 ajax 调用并一次附加一个内容，我建议您通过 JSON 获取数据。让我知道，如果我能帮忙

**正如评论中所讨论的，因为您想要获得多个项目 JSON 是要走的路。您可以通过这种方式使用 JSON 传递数据**

** php *（我确定您已经完成了查询，但这里以防万一）* **

```
// Make a MySQL Connection
$query = "SELECT * FROM example";//Your query to get warriors from db 

$result = mysql_query($query) or die(mysql_error());

$myWarriorsArray = array();//Where you will store your warriors

while($row = mysql_fetch_array($result)){
     $myWarriorsArray[] = $row;

     //This stores all keys for each iteration
     /*//This is teh same as the following commented code
     $myWarriorArray['warrior_name'] = row['warrior_name'];
     $myWarriorArray['warrior_type'] = row['warrior_type'];
     */
}

echo json_encode($myWarriorsArray);//This will return a json object to your ajax call 
```

**Javascript**

```
function getWarriors() {
        $.ajax({
            url: 'display_warrior.php',
            dataType : 'json',
            success: function(data) {
                var toAppend = '';
                alert(data);
                //console.log(data);//Uncomment this to see the returned json data in browser console
                for(var i=0;i<data.length;i++){//Loop through each warrior
                     var warrior = data[i];
                     toAppend += '<tr>';
                     toAppend += '<td>'+data[i]['warrior_name']+'</td>';
                     toAppend += '<td>'+data[i]['warrior_type']+'</td>';
                     toAppend += '</tr>';
                }
                $('#listWarriors table').append(toAppend);
            }
        });
    } 
```

# django - django 应用程序文件结构

> ID：12398460
> 
> 赞同：0
> 
> 时间：2012-09-13T02:04:12.737
> 
> 标签：django

下面是一个常见的应用程序文件结构：

```
app/
    views.py
    forms.py
    urls.py
    tests.py 
```

我发现一旦代码库变得越来越大，维护代码就会变得越来越困难。我正在考虑根据单个网页来组织代码，所以每个网页都会有自己的 view.py、form.py 和 test.py。

```
app/
    views/
        page1_view.py
        page2_view.py

    forms/
        page1_form.py
        page2_form.py

    tests/
        page1_test.py
        page2_test.py 
```

我会遇到什么大问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T02:35:03.983

不，Django 理解包和文件。

示例，如果您使用

```
app/
   views/
     page1_view.py
     page2_view.py
     __init__.py 
```

您可以毫无问题地将视图引用为 app.views.page1_views。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T02:31:02.320

最简洁的答案是不。事实上，我经常像您一样拆分视图、任务和测试。

# jquery - jQuery——blockUI 不是一个函数

> ID：12398461
> 
> 赞同：4
> 
> 时间：2012-09-13T02:04:15.750
> 
> 标签：jquery, jquery-ui, jquery-plugins

我有以下 jQuery 代码给我带来了问题。我有两个都调用 blockUI 的 jQuery 函数，并且两者都得到相同的错误。它说 blockUI 不是一个函数。谁能告诉我为什么？

```
function loading() {
                // register on click event for buttons.
                $.blockUI({
                    message: '<h3 class="fldHead">Loading... <img src="/app/images/winliveprog.gif"/></h3>'
                });
                $('body').css('cursor', 'wait');
        }
        $(function() {
            $('[name="btnPreviewPost"]').click(function() {
                console.log('btnPreviewPost clicked');
                $(this).blockUI();
                loading();
                $.blockUI({
                    message: '<h3 class="fldHead">Loading... <img src="/capserver/images/winliveprog.gif"/></h3>'
                });
                $('body').css('cursor', 'wait');
            });
            $('[name="btnEditPost"]').click(function() {
                console.log('btnEditPost clicked')
                $(this).blockUI();
                loading();
                $.blockUI({
                    message: '<h3 class="fldHead">Loading... <img src="/capserver/images/winliveprog.gif"/></h3>'
                });
                $('body').css('cursor', 'wait');
          });
        }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-05-09T09:36:37.043

我有同样的问题，结果我通过一些依赖包含了两次 javascript 文件。一旦我删除了其中一个 javascript 文件，`blockUI`就可以正常工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-20T20:57:11.107

请注意，jQuery BlockUI 插件在最新版本的 jQuery 中不会“开箱即用”。这是因为 BlockUI 使用了 jQuery.browser API，该 API 在 jQuery 1.9 中被删除。要让 BlockUI 再次工作，您需要使用 jquery-migrate：

[https://github.com/jquery/jquery-migrate/#readme](https://github.com/jquery/jquery-migrate/#readme)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-01-04T15:51:34.360

我遇到了同样的问题，我通过包含这个文件来解决它：

```
<script src="http://malsup.github.io/jquery.blockUI.js"> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-13T02:26:15.083

您可以在`$(element).block();`
这里查看[http://www.malsup.com/jquery/block/#element](http://www.malsup.com/jquery/block/#element)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-13T02:10:23.550

尝试将其创建为 $.fn.blockUI 以便在 $(this).blockUI(); 等 jquery 对象上调用它；

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-13T04:46:30.587

我有同样的问题，问题是我用来注册 blockUI 的路径。在我的情况下，site.master 页面中 jquery.blockUI.js 的 src 是错误的。请检查您是否正确注册了 jquery.blockUI.js。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-06-07T09:28:43.733

我的情况是 woocommerce 插件的旧版本（2.0.10） - 我无法更新它，因为它会破坏一些自定义功能 - 所以我不得不在 write-panels.min.js 中用 .block 注释掉 jQuery 行和writepanel-product-type-variable.php 。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-03-02T23:48:01.380

我正在使用 Angular 并在这里遇到同样的问题。受@Robert 启发，我发现有两个参考资料：

> jquery.min.js

在 angular.json 中。我删除了一个，它工作。

# ruby-on-rails - Rails：simple_format 和类条件

> ID：12398466
> 
> 赞同：1
> 
> 时间：2012-09-13T02:05:09.137
> 
> 标签：ruby-on-rails, class, loops

我正在尝试使用 simple_format 在 Rails 中呈现一些文本，但我想为任何短于 100 个字符的行添加一个类。这完全可以实现吗？

在我看来，我有：

```
<%= add_titles(simple_format(truncate(@a1b, :length => 1450))) %> 
```

在我的控制器中，我有这个：

```
 def add_titles(a)
    for a.each_line do |b|
      if b.length < 100
        print(b, :class => 'strong')
      else
        print b
      end
    end
  end 
```

有什么想法吗？干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T05:06:12.470

对于其他陷入这个问题的人，我已经通过将这个逻辑放入相关视图来解决它：

```
<% @article.body.each_line do |m| %>
  <% if m.length > 70 %>
    <%= content_tag(:p, m) %>
  <% else %>
    <%= content_tag(:h4, m) %>
  <% end %>
<% end %> 
```

# ios - 将此代码重新用于多个 mapkit 引脚注释

> ID：12398472
> 
> 赞同：1
> 
> 时间：2012-09-13T02:05:49.290
> 
> 标签：ios, mapkit, mkannotation

我下面的这段代码完美地适用于一个独特的 Pin 和一个注释。我想在不进行太多更改的情况下对其进行调整，以显示更多 Pin 图、位置和注释。

有一个`MyAnnotationPins`用以下几行调用的类：

MyAnnotationPins.h

```
@interface MyAnnotationPins : NSObject < MKAnnotation>
@property (nonatomic, readonly) CLLocationCoordinate2D coordinate;
@property (nonatomic, readonly, copy) NSString *title;
@property (nonatomic, readonly, copy) NSString *subtitle;
-(id)initWithCoordinate:(CLLocationCoordinate2D)annotCoordinate title:(NSString*)annotTitle subtitle:(NSString*)annotSubtitle; 
```

MyAnnotationPins.m

```
@synthesize coordinate;
@synthesize subtitle;
@synthesize title;
-(id)initWithCoordinate:(CLLocationCoordinate2D)annotCoordinate title:(NSString*)annotTitle subtitle:(NSString*)annotSubtitle
{
    self = [super init];
    if (self)
    {
        coordinate = annotCoordinate;
        subtitle = [[NSString alloc] initWithString:annotSubtitle];
        title = [[NSString alloc] initWithString:annotTitle];
    }

    return self;
} 
```

在视图控制器中，以下代码：

SecondViewController.h

```
import "MyAnnotationPins.h"

@interface SecondViewController : UIViewController < MKMapViewDelegate > 

@property (weak, nonatomic) IBOutlet MKMapView *mapView;    
@property (strong, nonatomic) MyAnnotationPins* biblioAnnotation; 
```

在 SecondViewController.m 中的实现：

```
- (void)viewDidLoad
{

    [super viewDidLoad];

    mapView.delegate = self;

    MKCoordinateRegion mapRegion;
    mapRegion.center.latitude=-18.924129;
    mapRegion.center.longitude=-48.283963;
    mapRegion.span.latitudeDelta=0.2;
    mapRegion.span.longitudeDelta=0.2;

    [mapView setRegion:mapRegion animated:YES];

    ///// This is just for One annotaion/Pin on Map /////
    CLLocationCoordinate2D parliamentLocation = CLLocationCoordinate2DMake(-18.924129, -48.283963);
    biblioAnnotation = [[MyAnnotationPins alloc]
                            initWithCoordinate:parliamentLocation
                            title:@"Ponto Biblioteca"
                            subtitle:@"Taxi proximo"];
    [mapView addAnnotation:biblioAnnotation]; 
```

如果您想要多个引脚和注释，请复制下面的 CLLocation 实例并更改以下属性

```
CLLocationCoordinate2D secondLocation = CLLocationCoordinate2DMake(another latitude, another longitude);
secondAnnotation = [[MyAnnotationPins alloc]
                            initWithCoordinate:secondLocation
                            title:@"Second Title"
                            subtitle:@"Second subtitle"];
[mapView addAnnotation:secondAnnotation];  <code> 
```

依此类推，第三个，第四个第五个等等。不要忘记在您的视图控制器上创建 secondLocation 属性，就像 SecondViewController.h 中的第一个属性以及 SecondViewController.m 文件中的 @synthesize secondAnnotation 属性

```
@property (strong, nonatomic) MyAnnotationPins* secondAnnotation; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T03:46:13.570

像这样将它们添加到循环中

```
for(X in Y)
{
 CLLocationCoordinate2D parliamentLocation = CLLocationCoordinate2DMake(-18.924129, -48.283963);
MyAnnotationPins* biblioAnnotation = [[MyAnnotationPins alloc]
                        initWithCoordinate:parliamentLocation
                        title:@"Ponto Biblioteca"
                        subtitle:@"Taxi proximo"];
[mapView addAnnotation:biblioAnnotation];
} 
```

当您遍历列表时，您可以获得每个列表的正确坐标和标题。这样您的列表可以增长或缩小，您不需要添加第三、第四或第五个注释属性。

# android - 将事件添加到 android 日历但没有提示（无弹出窗口）

> ID：12398479
> 
> 赞同：1
> 
> 时间：2012-09-13T02:06:37.290
> 
> 标签：android, events, calendar

我有以下有效的代码。

但我不希望出现确认

希望它自动进入日历上的事件

有人有建议

```
calIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK
                            | Intent.FLAG_ACTIVITY_SINGLE_TOP
                            | Intent.FLAG_ACTIVITY_CLEAR_TOP
                            | Intent.FLAG_ACTIVITY_NO_HISTORY
                            | Intent.FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET);
                    calIntent.setType("vnd.android.cursor.item/event");    
                    calIntent.putExtra(Events.TITLE, "SMS: "+contact); 
                    calIntent.putExtra(Events.EVENT_LOCATION, ""); 
                    calIntent.putExtra(Events.DESCRIPTION, msgBody); 
                    calIntent.putExtra(Events.HAS_ALARM, 0);
                    calIntent.putExtra(CalendarContract.EXTRA_EVENT_ALL_DAY, false); 
                    calIntent.putExtra(CalendarContract.EXTRA_EVENT_BEGIN_TIME, System.currentTimeMillis()); 
                    calIntent.putExtra(CalendarContract.EXTRA_EVENT_END_TIME, System.currentTimeMillis()+1); 
                    context.startActivity(calIntent); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T02:57:45.953

通过使用意图，您将控制权交给日历应用程序以创建实际事件。日历应用程序确定如何处理意图，在这种情况下，通过抛出一个确认弹出窗口。

虽然使用意图是与用户日历交互的推荐方式，但您也可以直接这样做。这将切断对日历应用程序的调用并避免弹出窗口。缺点是您需要请求日历权限才能这样做。

这是[日历提供程序](http://developer.android.com/guide/topics/providers/calendar-provider.html#add-event)教程页面中的示例：

```
long calID = 3;
long startMillis = 0; 
long endMillis = 0;     
Calendar beginTime = Calendar.getInstance();
beginTime.set(2012, 9, 14, 7, 30);
startMillis = beginTime.getTimeInMillis();
Calendar endTime = Calendar.getInstance();
endTime.set(2012, 9, 14, 8, 45);
endMillis = endTime.getTimeInMillis();
...

ContentResolver cr = getContentResolver();
ContentValues values = new ContentValues();
values.put(Events.DTSTART, startMillis);
values.put(Events.DTEND, endMillis);
values.put(Events.TITLE, "Jazzercise");
values.put(Events.DESCRIPTION, "Group workout");
values.put(Events.CALENDAR_ID, calID);
values.put(Events.EVENT_TIMEZONE, "America/Los_Angeles");
Uri uri = cr.insert(Events.CONTENT_URI, values);

// get the event ID that is the last element in the Uri
long eventID = Long.parseLong(uri.getLastPathSegment());
// 
// ... do something with event ID
//
// 
```

# c# - 在 Snap View XAML 中更改为不同的页面

> ID：12398481
> 
> 赞同：1
> 
> 时间：2012-09-13T02:06:50.180
> 
> 标签：c#, xaml, visual-studio-2012

我创建了一个 1 页 (MainPage.xaml.cs) 骰子应用程序，以及另一个用于 Snap View (Snapped.xaml.cs) 的单独页面。有没有办法在我进入 Snap View 时直接从 MainPage.xaml 导航到 Snapped.xaml？然后，当我返回完整视图时，再次返回 MainPage.xaml？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T02:41:54.750

是的。首先，将 a`Frame`作为当前 Window 的内容：

```
//this should happen when the app launches
var rootFrame = new Frame();
Window.Current.Content = rootFrame; 
```

然后，让您的页面从一个公共页面库继承以使其更容易：

```
public partial MainPage : LayoutAwarePage 
```

GridApp 的默认模板包括一个`LayoutAwarePage`您可以开始使用的类。传入对框架的引用（或将其包装在您自己的[NavigationService](https://stackoverflow.com/questions/10971023/page-navigation-through-viewmodel-using-mvvmlight-in-windows-8/10974150#10974150)中）

然后，处理视图状态更改并检测您何时处于快照/全屏状态，并导航到相应的页面。要检测当前视图，请使用`ApplicationView`类（[MSDN 参考](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.viewmanagement.applicationview.aspx)）。

# mysql - MySQL：查找具有相同投票答案的用户数

> ID：12398484
> 
> 赞同：0
> 
> 时间：2012-09-13T02:07:10.913
> 
> 标签：mysql, database, join

我有一张桌子，`poll_response`，有三列：`user_id`, `poll_id`, `option_id`。

给出任意数量的轮询/响应对，我如何确定不同`user_id`s 匹配的数量？

因此，假设表的数据如下所示：

```
user_id | poll_id | option_id
1         1         0
1         2         1
1         3         0
1         4         0
2         1         1
2         2         1
2         3         1
2         4         0 
```

假设我想知道有多少用户对轮询 2 响应“1”，对轮询 3 响应“0”。

在这种情况下，只有用户 1 匹配，所以答案是：只有一个不同的用户。

但是假设我想知道有多少用户对轮询 2 响应“1”，对轮询 4 响应“0”。

在这种情况下，用户 1 和用户 2 都匹配，所以答案是：有 2 个不同的用户。

我在构建 MySQL 查询来实现这一点时遇到了麻烦，特别是考虑到有任意数量的轮询/响应对。我是否只是尝试将一堆连接链接在一起？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T02:19:07.387

了解有多少用户对投票 2 回复了“1”，对投票 3 回复了“0”。

```
select count(user_id) from(
select user_id from tblA 
where (poll_id=2 and option_id=1) or (poll_id=3 and option_id=0)
group by user_id
having count(user_id)=2
)m 
```

[SQL 小提琴在这里。](http://sqlfiddle.com/#!2/7d8ea/2)

# javascript - 在 node.js 中编写 ECONNRESET 错误和套接字连接检查

> ID：12398486
> 
> 赞同：5
> 
> 时间：2012-09-13T02:08:31.243
> 
> 标签：javascript, sockets, node.js, error-handling, socket.io

运行我的 node.js 脚本时，我偶尔会收到此错误。

```
events.js:66
        throw arguments[1]; // Unhandled 'error' event
                       ^
Error: write ECONNRESET
    at errnoException (net.js:768:11)
    at Object.afterWrite (net.js:592:19) 
```

是什么导致了这个错误？我在某个地方读到这是由于尝试将数据写入关闭的套接字而引起的。**那正确吗？**

如果是这种情况，**如何检查套接字连接是否处于活动状态？**[我在这里](https://stackoverflow.com/questions/8546627/how-to-check-if-socket-still-connected) 找到了这个 SO question ，但没有人在那里回答。

第三，**围绕 socket.write 语句的简单 try catch 是否足以处理此错误？**还是它会发出我必须处理的错误事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T18:06:49.427

我们已经看到它与 http-proxy 并在这里报告了问题： [https ://github.com/nodejitsu/node-http-proxy/issues/331](https://github.com/nodejitsu/node-http-proxy/issues/331)

如果没有处理“错误”（并且只有“错误”）事件，nodejs 会抛出。

# spring - 带有 Tomcat 代理的 Apache：不显示图像

> ID：12398487
> 
> 赞同：2
> 
> 时间：2012-09-13T02:08:43.710
> 
> 标签：spring, apache, tomcat

我已经使用 mod_proxy 设置了一个 Apache httpd 服务器代理对 Tomcat 的请求，监听端口 80。我唯一的问题是静态图像和 css 没有正确显示。如果我在端口 8080 上单独使用 Tomcat 作为服务器，则图像和 css 看起来很好。任何想法如何显示它们？谢谢！

注意：我在 Mac 上并且正在使用 Amazon EC2 服务器。一个例子将是非常受欢迎的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T03:46:56.500

终于想通了，伙计们-当你读到这篇文章时请不要踢我。我将 Apache2 与 Spring 3 一起使用，并使用 Springsource Tool Suite 作为 IDE。我无法让它运行的全部原因是因为我在我的索引 jsp 文件中使用了它：

```
<link rel="stylesheet" href="<spring:url value="/resources/styles/foo.css" htmlEscape="true" />" type="text/css"/> 
```

问题是，当在 Tomcat 7 服务器上运行时，它是完美的。但是，当在以 tomcat 作为容器的 apache 2 服务器上运行时，该 css 文件没有显示出来。所以我删除了`/`来自`/resources/styles/foo.css`：

```
<link rel="stylesheet" href="<spring:url value="resources/styles/foo.css" htmlEscape="true" />" type="text/css"/> 
```

然后，它在 Apache+Tomcat 和独立的 Tomcat 上都能完美运行。

感谢并抱歉浪费您的时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T13:27:24.663

此问题涉及路径转换，您可能会将您的应用程序提供给顶层 / 的客户端，但相应的路径将是 /myapp/（例如）。在 tomcat 下运行的 Servlet 应用程序通常以这种方式设置，以便将多个应用程序合二为一，您的 apache 设置如下所示：

```
ProxyPass / http://localhost:8080/myapp/
ProxyPassReverse / http://localhost:8080/myapp/ 
```

您的后端应用程序 (myapp) 不知道这种翻译，并且仍然提供它的常用路径。例如，您的应用程序引用了一些静态图像文件，这些文件由在tomcat 中运行的应用程序提供，位于/myapp/images/ 位置，您可以做的一种方法是将特殊代理映射与其他重写规则分开。

```
ProxyPass /myapp/images http://localhost:8080/myapp/images

ProxyPassReverse /myapp/images http://localhost:8080/myapp/images 
```

所以你可以在前一个指令块前面使用这些行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T06:01:45.257

在 apache 中有一个 htdocs 文件夹，其中创建一个与您的项目文件夹名称相同的文件夹并将资源粘贴到该文件夹​​中并重新启动服务器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T12:59:16.887

您的 apache 错误日志将包含图像的 404，请注意正在使用的 URL 以及：

*   将它们与您使用的 ProxyPass 指令进行比较并修复/添加 ProxyPass
*   将它们复制到您的网络服务器文档根目录的正确子目录

# unit-testing - 分支覆盖与决策覆盖相同吗？

> ID：12398494
> 
> 赞同：13
> 
> 时间：2012-09-13T02:09:15.610
> 
> 标签：unit-testing, testing, code-coverage

我现在正在学习软件测试，我发现那里有很多覆盖标准。有些事情让我很困惑。

**分支覆盖率等于决策覆盖率吗？** wiki说这里不一样[，](http://en.wikipedia.org/wiki/Code_coverage#Modified_condition.2Fdecision_coverage)我看了参考文档，但是没有找到类似：`branch coverage`is not `decision coverage`，可能是因为我的英文不好...

而其他导师都说`branch coverage`是`decision coverage`。那么有人可以给我一个明确的答案吗？多谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T12:24:04.647

不完全是。正如 ISTQB 基金会的书所给出的， *分支覆盖率与决策覆盖率密切相关，并且在 100% 的覆盖率下，它们给出的结果完全相同。决策覆盖率衡量条件分支的覆盖率；分支覆盖率测量条件分支和无条件分支的覆盖率。教学大纲使用决策覆盖，因为它是分支的来源。一些覆盖率测量工具可能会在实际上意味着决策覆盖率时谈论分支覆盖率。(c) ISTQB 基础书籍。*

决策范围![例子](../Images/a8e5979ce23e56e26a1cf0766f24ba20.png)：

希望现在它对你来说很清楚）

# qt - 将一组图像添加到 Qt 项目中

> ID：12398498
> 
> 赞同：1
> 
> 时间：2012-09-13T02:10:09.847
> 
> 标签：qt

如何将计算机中的一组图像添加到 Qt 项目文件中，以便开始对其进行编码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T06:07:24.417

如果要添加 Qt 项目中的所有文件，可以将它们放在同一目录中，然后使用 Qt Creator 将所有这些图像添加到资源文件中，并进行多选。或者您可以简单地手动修改资源文件，因为它是一个简单的 XML，如下所示：

```
<RCC>
    <qresource prefix="/">
        <file alias="...">...</file>
        <file alias="...">...</file>
    </qresource>
</RCC> 
```

考虑到您在此处放置的所有内容都会在程序启动时加载到内存中。在此处添加太多图像可能不是一个好主意。在需要时从文件系统加载可能会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T06:09:06.503

简短的回答是，按键盘上的 Ctrl 按钮选择更多。

# winapi - DllMain() 和 __attribute__((constructor)) 执行顺序

> ID：12398502
> 
> 赞同：1
> 
> 时间：2012-09-13T02:10:46.573
> 
> 标签：winapi, dll, constructor

**问**：如果我`DllMain()`在共享库中编写了一个函数，并且还编写了一个带有 的函数`__attribute__((constructor))`，那么在加载库时会先执行哪个函数？

**问**：如果我`__attribute__((constructor))`在链接到该共享库的可执行文件中有函数，首先将调用什么 - 库`DllMain()`或可执行文件的`__attribute__((constructor))`函数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T02:10:46.573

**A** : 函数按以下顺序调用：

*   `DLL constructor`
*   `DLL DllMain() (process attach)`
*   `EXE constructor`
*   `EXE main()`
*   `EXE main() ends`
*   `EXE destructor`
*   `DLL DllMain() (process detach)`
*   `DLL destructor`

如果在运行时 ( `LoadLibrary()`/ `FreeLibrary()`) 完成链接，则按以下顺序调用函数：

*   `EXE constructor`
*   `EXE main()`
*   `EXE LoadLibrary()`
*   `DLL constructor`
*   `DLL DllMain() (process attach)`
*   `EXE main() continues`
*   `EXE FreeLibaray()`
*   `DLL DllMain() (process detach)`
*   `DLL destructor`
*   `EXE main() ends`
*   `EXE destructor`

如果您忘记释放库，则顺序如下：

*   `EXE constructor`
*   `EXE main()`
*   `EXE LoadLibrary()`
*   `DLL constructor`
*   `DLL DllMain() (process attach)`
*   `EXE main() continues`
*   `EXE main() ends`
*   `EXE destructor`
*   `EXE FreeLibaray() (system cleans up for you)`
*   `DLL DllMain() (process detach)`
*   `DLL destructor`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-31T14:08:29.430

考虑代码

**EXE文件：**

```
int main ()
{

    printf("Executable Main, loading library\n");
#ifdef HAVE_WINDOWS
    HMODULE lib = LoadLibraryA ("testdll.dll"); 
#elif defined(HAVE_LINUX)
    void * lib  = dlopen("testdll.so", RTLD_LAZY);  
#endif 

    if (lib) {
        printf("Executable Main, Freeing library\n");
    #ifdef HAVE_WINDOWS
        FreeLibrary (lib); 
    #elif defined(HAVE_LINUX)
        dlclose(lib);   
    #endif 
    }
    printf("Executable Main, exiting\n");
    return 0;
} 
```

**动态链接库**

```
struct Moo
{
    Moo() { printf("DLL Moo, constructor\n"); }
    ~Moo() { printf("DLL Moo, destructor\n"); }
};

Moo m;

#ifdef HAVE_WINDOWS
BOOL APIENTRY DllMain( HMODULE hModule,
                       DWORD  ul_reason_for_call,
                       LPVOID lpReserved)
{
    switch (ul_reason_for_call)
    {
    case DLL_PROCESS_ATTACH:
        printf("DllMain, DLL_PROCESS_ATTACH\n");
        break;
    case DLL_THREAD_ATTACH:
        printf("DllMain, DLL_THREAD_ATTACH\n");
        break;
    case DLL_THREAD_DETACH:
        printf("DllMain, DLL_THREAD_DETACH\n");
        break;
    case DLL_PROCESS_DETACH:
        printf("DllMain, DLL_PROCESS_DETACH\n");
        break;
    default:
        printf("DllMain, ????\n");
        break;
    }
    return TRUE;
}
#else
CP_BEGIN_EXTERN_C
__attribute__((constructor))
/**
 * initializer of the dylib.
 */
static void Initializer(int argc, char** argv, char** envp)
{
    printf("DllInitializer\n");
}

__attribute__((destructor))
/** 
 * It is called when dylib is being unloaded.
 * 
 */
static void Finalizer()
{
    printf("DllFinalizer\n");
}

CP_END_EXTERN_C
#endif 
```

输出不同： **在 windows** Executable Main，加载库 DLL Moo，构造函数 DllMain，DLL_PROCESS_ATTACH Executable Main，释放库 DllMain，DLL_PROCESS_DETACH DLL Moo，析构函数 Executable Main，退出

**Linux** Executable Main，加载库 DllInitializer DLL Moo，构造函数 Executable Main，释放库 DllFinalizer DLL Moo，析构函数 Executable Main，退出

在 Windows 上，Moo 构造函数在 DLLMain 之前调用，而在 linux 上，它在使用**属性**((constructor)) 定义的 Initializer 之后调用。

为什么？

# ios - 如何修改参数Ellipsoid中x、y、z的值

> ID：12398506
> 
> 赞同：-1
> 
> 时间：2012-09-13T02:11:01.600
> 
> 标签：ios, unity3d

我们在使用untiy3d引擎时遇到了一些问题。在程序中使用Ellipsoid Particle Emitter时，如何通过代码修改参数Ellipsoid中x、y、z的值？

PS：我们在iOS目标平台上使用版本：3.5.0和Legacy Particles的Ellipsoid Particle Emitter。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:30:23.000

在 Unity Answers 网站上查看此线程：

*   [http://answers.unity3d.com/questions/14200/script-access-to-ellipsoid-property-on-emitter.html](http://answers.unity3d.com/questions/14200/script-access-to-ellipsoid-property-on-emitter.html)

# regex - 仅匹配 admin 子文件夹时的 Nginx HTTPS

> ID：12398514
> 
> 赞同：0
> 
> 时间：2012-09-13T02:11:46.900
> 
> 标签：regex, ssl, https, nginx, regex-negation

我设法通过以下方式将所有 /admin 请求重定向到 https：

```
server {
    listen 80;

    location /admin {
        rewrite ^ https://$server_name$request_uri?$args permanent;
    }
} 
```

但是非 /admin https 请求需要重定向回 http。以下代码在重定向方面有点工作，但 /admin 返回 404。在空块中需要什么来保持 nginx 快乐？

```
server {
    listen       443;
    server_name  mywebsite.local.com;

    ssl                  on;
    ssl_certificate      /opt/nginx/server.crt;
    ssl_certificate_key  /opt/nginx/host.key;

    ssl_session_timeout  5m;

    ssl_protocols  SSLv2 SSLv3 TLSv1;
    ssl_ciphers  HIGH:!aNULL:!MD5;
    ssl_prefer_server_ciphers   on;

    root /Users/me/Sites/website/public;

    location /admin {
        # here is your configuration for admin requests
        # don't forget to set "root"
    }

    location / {
        return 301 http://$server_name$request_uri;
    }

    passenger_enabled on;
    rails_env development;
} 
```

error.log 中的错误：

```
12 open() "/Users/me/Sites/website/public/admin" failed (2: No such file or directory),     client: 127.0.0.1, server: something.com, request: "GET /admin HTTP/1.1", host: "something.com" 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T07:55:03.930

```
server {
    listen 80;

    location /admin {
        return 301 https://$server_name$request_uri;
   }

    location / {
        # here is your configuration for non-admin requests
        # don't forget to set "root"
    }
}

server {
    listen 443;

    location /admin {
        # here is your configuration for admin requests
        # don't forget to set "root"
    }

    location / {
        return 301 http://$server_name$request_uri;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T03:48:34.157

这似乎可行：

```
 if ($request_uri !~* ^/admin)
    {
        rewrite ^ http://$server_name$request_uri?$args permanent;
    } 
```

有没有人有更好的方法？

# css - 欢迎来到匿名的 HTML 表格

> ID：12398516
> 
> 赞同：2
> 
> 时间：2012-09-13T02:12:08.020
> 
> 标签：css, html

Hl，我的名字是储蓄者，我有一个问题。我只是忍不住使用`<table>`s. 我上瘾了，这对我来说是个问题。我需要一些支持，并且需要一些聪明的网页设计师向我展示我的方式的错误。

**2列布局**

所以我试图做一个简单的两列布局：左侧导航，右侧内容。一张快速的桌子，我很高兴。

```
<table>
  <tr>
    <td valign="top"><!-- Navigation --></td>
    <td valign="top"><!-- Content --></td>
  </tr>
</table> 
```

对结果相当满意。内容在页面的流程中。我可以指定单元格的宽度，让它们扩大以填充空间，或缩小以适应内容。但是一旦我开始引入嵌套表（当然是合法的表格数据）......标记变得丑陋且难以阅读和维护。此外，我所有的网页设计师伙伴都诉诸于点名。

那么我的选择是什么？我比较喜欢`position:absolute;`。只需一点 css...

```
.left { position:absolute; top:0; bottom:0; left:0; width:200px; }
.right { position:absolute; top:0; bottom:0; left:200px; right:0; } 
```

...和最少的 HTML 标记...

```
<div class="left"><!-- Navigation --></div>
<div class="right"><!-- Content --></div> 
```

光滑！标记清晰，设计流畅。但是现在我尝试在我光滑的两列下面添加一些东西，我遇到了[彻底的混乱 (jsFiddle)](http://jsfiddle.net/HZxBB/2/)。我不在页面的流程中工作，但我不知道我的内容会有多高！所以我不能指定高度。我很容易放弃……所以让我们试试别的吧。

老实说：`float`吓到我了。标记不明显，浮动元素似乎有自己的想法，有险恶的动机在边缘情况下破坏我的设计。[考虑这个jsfiddle。](http://jsfiddle.net/rw86y/)我仍然没有在页面流程中工作。我想要具有流畅内容的静态宽度导航？做什么？

我不知道伙计们。桌子似乎是一个更好的选择。有人跟我讲道理。我可能会再次使用...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T04:34:13.437

如果我理解您想要正确执行的操作，我认为您正在寻找`overflow="auto"`. overflow 属性用于指定如果内容溢出元素的框会发生什么。

```
.more {
background: rgba(0,255,0,.5);
padding:10px;
overflow: auto;
} 
```

这是一个工作示例：http: [//jsfiddle.net/MJaSD/](http://jsfiddle.net/MJaSD/)

# python - 用于在网络跟踪 (PCAP) 中解析文本和二进制协议消息的 Google 协议缓冲区

> ID：12398517
> 
> 赞同：0
> 
> 时间：2012-09-13T02:12:19.850
> 
> 标签：python, protocol-buffers, pcap

我想使用 Google 协议缓冲区从网络跟踪中解析应用层协议并重播跟踪（我正在使用 python）。我需要建议以从网络跟踪中自动生成协议消息描述（在 .proto 文件中）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T03:41:12.913

所以你想重建通过应用层协议传递的 .proto 消息？

这并不像听起来那么容易。首先，.proto 消息不能通过网络直接发送，因为接收者需要知道它们的长度。它们需要以某种方式封装，可能是在 HTTP POST 中或前面加上原始的 4 字节大小。我不知道你的应用程序会是什么，但你需要处理它。

其次，您不能仅从消息中重建完整的 .proto 。您只能获得标签编号和类型，而不是名称。此外，您将丢失有关子消息的信息 - 子消息和纯字符串的编码相同（您可能通过观察它们来判断哪个是哪个，但我认为您不能自动做到这一点）。您也永远不会知道从未发送过的可选项目。但是您可以在没有 proto 的情况下解析缓冲区并获得一些合理的数据（整数、重复字符串等）。

第三，您需要从 pcap 日志中重建应用程序字节流。我不确定如何做到这一点，但我怀疑有一些工具可以为你做到这一点。

# javascript - HTML/CSS - 用于拖放的整页叠加

> ID：12398518
> 
> 赞同：1
> 
> 时间：2012-09-13T02:12:38.643
> 
> 标签：javascript, html, css, drag-and-drop

我在创建整页覆盖以识别拖放时遇到了一些麻烦。如果用户将文件从他们的计算机拖到页面上，将其放在任何地方都会触发上传。但是，我无法获得一个完整的页面覆盖，该覆盖在文件被删除并且不会阻止页面上的任何悬停元素时被识别。这是我当前的代码。

HTML：

```
<div id = 'dropZone'></div> 
```

CSS：

```
#dropZone
{
    background: gray;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 100;
    opacity: .8;
} 
```

识别drop的JS：

```
var dropZone = document.getElementById('dropZone');
dropZone.addEventListener('dragover', handleDragOver, false);
dropZone.addEventListener('drop', handleFileSelect, false); 
```

[http://jsfiddle.net/V37cE/](http://jsfiddle.net/V37cE/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-26T20:04:07.267

对于此类叠加，仅在拖动内容时显示，您应该处理不同元素上的 dragenter 和 dragleave 事件：

```
<body>
 <div>...</div>
 <div id="myDropZone" ondragenter="handleDragEnter" style="z-index: 1">

   <div id="myDropOverlay" ondragleave="handleDragLeave" onDrop="handleDrop" hidden style="z-index: 2">
     Drop your file here
   </div>

   <div>
     content covered by the drop zone overlay while dragging
   </div>
 </div>
</body> 
```

然后在 js 中隐藏/显示叠加层：

```
function handleDragEnter(event) {
  showMyDropZoneOverlay();
}
function handleDragLeave(event) {
  hideMyDropZoneOverlay();
}
function handleDrop(event) {
  ...
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-13T04:20:37.973

这应该会有所帮助。这是关于 HTML5 文件拖放 API的[精彩教程。](http://blogs.sitepointstatic.com/examples/tech/filedrag/1/index.html)这是 API 的[w3.org 文档](http://www.w3.org/TR/2011/WD-html5-20110525/dnd.html#dnd)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-14T00:20:30.007

我通过将放置区 id 添加到覆盖整个页面的标签来解决了这个问题。

# apache-flex - 按日期然后时间对 ArrayCollection 排序 - Flex

> ID：12398520
> 
> 赞同：0
> 
> 时间：2012-09-13T02:12:40.207
> 
> 标签：apache-flex, sorting, actionscript, arraycollection

我有一个 ArrayCollection，我想按日期和时间排序（如果有两个项目具有相同的日期）。我已经按日期排序（YYYY/MM/DD），但我不知道时间位，时间是 24 小时格式，所以代码与日期基本相同。

这是我用于日期排序的代码，它工作正常。

```
import mx.collections.SortField;
import mx.collections.Sort;

private function sort():void  
{
var dataSortField:SortField = new SortField();
dataSortField.name = "date";

var arrayDataSort:Sort = new Sort();
arrayDataSort.fields = [dataSortField];

reminderXMLArray.sort = arrayDataSort;
reminderXMLArray.refresh();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T08:41:51.417

您可以使用此代码按日期和时间排序：

```
private function sort():void
{
    var dataSortField:SortField = new SortField();
    dataSortField.name = "date";
    dataSortField.compareFunction = function (a:Object, b:Object) : int {
        var na:Number = a.date.getTime();
        var nb:Number = b.date.getTime();

        if (na < nb)
            return -1;

        if (na > nb)
            return 1;

        return 0;
    };

    var arrayDataSort:Sort = new Sort();
    arrayDataSort.fields = [dataSortField];

    reminderXMLArray.sort = arrayDataSort;
    reminderXMLArray.refresh();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T09:50:58.797

由于您要对两个单独的字段进行排序，因此您可以使用 Sort 对象的 fields Array 添加两个排序字段：

```
var sort:Sort = new Sort();
var fields:Array = [ new SortField("date"), new SortField("time") ];
sort.fields = sort; 
```

# iphone - iPhone 5 [[UIScreen mainScreen] bounds].size.height

> ID：12398521
> 
> 赞同：5
> 
> 时间：2012-09-13T02:13:03.597
> 
> 标签：iphone, objective-c, ios, uikit, uiscreen

> **可能重复：**
> [如何为 iPhone 5 屏幕分辨率开发或迁移应用程序？](https://stackoverflow.com/questions/12395200/how-to-develop-or-migrate-apps-for-iphone-5-screen-resolution)
> [如何处理 iPhone 5 的屏幕尺寸？](https://stackoverflow.com/questions/12396545/how-to-deal-with-iphone-5-screen-size)
> [为了支持 iPhone 5 的更长屏幕，需要检查什么？](https://stackoverflow.com/questions/12398098/what-to-check-in-order-to-support-the-iphone-5s-longer-screen)

随着 iPhone 5 的新屏幕尺寸，任何人都知道或猜想`[[UIScreen mainScreen] bounds].size.height`在 iPhone 5 上运行的应用程序会返回什么？在包括 Retina 在内的所有其他 iPhone 上，它会返回`480`- 我认为它现在会返回`568`？

或者，除非在应用程序中进行一些其他配置以“允许”完整的 iPhone 5 分辨率，否则它会以“居中、信箱”模式运行吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T02:59:30.003

是的，高度是 568。如果你想去掉“信箱”，请看这篇文章： [iPhone 5 信箱/屏幕调整大小](https://stackoverflow.com/questions/12398819/iphone-5-letterboxing-screen-resize)

# android - ActionBarSherlock + Tabbed Fragments + ViewPager 内幕一个片段

> ID：12398525
> 
> 赞同：6
> 
> 时间：2012-09-13T02:13:37.747
> 
> 标签：android, android-fragments, android-viewpager, actionbarsherlock, android-nested-fragment

我有一个使用 ActionBarSherlock 的选项卡式应用程序。ActionBar 中的选项卡是每个片段。其中一个片段包含一个查看页面，它显示了许多片段 - 每个片段都包含来自 URL 的图像（使用 ImageView 的变体）。

当您第一次单击选项卡时，整个事情就很好地工作了 - 它显示了显示图像的寻呼机。第二次单击选项卡（单击其他选项卡后）没有任何反应 - 寻呼机不显示并且屏幕保持空白（除了 actionBar）。代码附在下面。似乎正在创建 FragmentPagerAdapter，但它没有第二次对项目进行分页。

我究竟做错了什么 ？

```
import java.io.IOException;
import java.io.InputStream;
import java.net.HttpURLConnection;
import java.net.URL;

import com.actionbarsherlock.app.SherlockFragment;

import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.AsyncTask;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;
import android.support.v4.view.ViewPager;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

public class SurfaceChartFragment extends SherlockFragment {

private ViewPager mPager;
private SurfacePagerAdapter mAdapter;
private static String [] urls = { "gif url 1", "gif url 2 etc." };

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

    View V = inflater.inflate(R.layout.surface_pager, container, false);        
    mPager = (ViewPager) V.findViewById(R.id.surface_viewpager);
    mAdapter = new SurfacePagerAdapter(getActivity().getSupportFragmentManager());
    new setAdapterTask().execute();

    return V;
}

private class setAdapterTask extends AsyncTask<Void,Void,Void>{
    protected Void doInBackground(Void... params) {
          return null;
      }

      @Override
      protected void onPostExecute(Void result) {
          mPager.setAdapter(mAdapter);
      }
}

static final class SurfacePagerAdapter extends   FragmentPagerAdapter { // 
    public SurfacePagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public int getCount() {
        return urls.length;
    }

    @Override
    public Fragment getItem(int position) {
        SurfaceFragment f = new SurfaceFragment();

        f.url = urls[position];
        f.position = position;
        return f;
    }
}

public static class SurfaceFragment extends SherlockFragment {
    String url = "";
    Integer position = 0;

    public SurfaceFragment() {
       // setRetainInstance(true);
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //setHasOptionsMenu(true);
    }

     public static Bitmap getBitmapFromURL(String src) {

            try {

                URL url = new URL(src);
                HttpURLConnection connection = (HttpURLConnection) url.openConnection();
                connection.setDoInput(true);
                connection.connect();
                InputStream input = connection.getInputStream();
                Bitmap myBitmap = BitmapFactory.decodeStream(input);

                return myBitmap;

            } catch (IOException e) {

                Log.e("Exception",e.getMessage());

                return null;
            }
        }
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        ImageView image = new ImageView(getActivity());
        Bitmap bimage=  getBitmapFromURL(url);
        image.setImageBitmap(bimage);

        return image;

    }            

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-04T00:11:43.723

为了在片段中做片段，您要么需要自己进行所有片段管理（即调用`FragmentManager.add()`，而不是使用`ViewPager`and `PagerAdapter`），或者您可以使用 `getChildFragmentManager()`在较新的支持库版本中引入的。

所以你需要更换：

`new SurfacePagerAdapter(getActivity().getSupportFragmentManager());`

和：

`new SurfacePagerAdapter(getChildFragmentManager());`

我自己没有尝试过，但它应该可以工作。

# php - mongoDB按百分比排序

> ID：12398528
> 
> 赞同：0
> 
> 时间：2012-09-13T02:13:59.343
> 
> 标签：php, mongodb, sorting, database

我知道这是可以做到的，但我面临的问题是我所有的尝试都无法让它发挥作用。

百分比保存为 0.03 或 0.05 或 0.10

我试图对它们进行排序

```
$cursor->sort(array("offers"=>array("percentage"=>0))); 
```

我也试过

```
$cursor->sort(array("offers"=>array("cashback"=>1))); 
```

但没有变化。

这是一个样本集合

```
array (
  '_id'▼ => new MongoId("50513d8338fc5de706000000"),
  'test' => new MongoInt32(1),
  'offers' => 
  array (
    '0' => 
    array (
      'minspend' => '50.00',
      'cashback' => '1.50',
      'percentage' => '0.03',
    ),
    '1' => 
    array (
      'minspend' => '100.00',
      'cashback' => '3.00',
      'percentage' => '0.03',
    ),
  ),
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T03:04:58.547

拉塞尔，

排序用于排列整个文档的顺序。从这个表格中，您看起来正在尝试对单个文档中的数组进行排序。

为此，您需要检索整个文档，然后需要编写自己的排序功能客户端 (PHP)。

请看一下在 PHP 中使用 usort 函数。 [http://php.net/manual/en/function.usort.php](http://php.net/manual/en/function.usort.php)

# javascript - 带有 Google Book Preview 的 Android 4.03-4.04 中的 Webview

> ID：12398529
> 
> 赞同：2
> 
> 时间：2012-09-13T02:14:03.143
> 
> 标签：javascript, android, webview

我的一个活动中有一个 web 视图，我在加载活动时动态加载。我现在只是向它发送一串html。这个 webview 基本上加载了一个嵌入的谷歌图书预览。它还有一个 setTimeout，每 5 秒翻一页。在 Android 2.2 和 2.3 上，这很好用。但是，在 4.03 和 4.04 中，它最初会加载预览，但随后不会执行翻页，并且任何按钮也不起作用。

下面是创建 webview 的代码示例。

```
WebView wv = (WebView) findViewById(R.id.wv1);
String html = getGoogleBookPreviewHTML(book_isbn);
wv.getSettings().setJavaScriptEnabled(true);
wv.getSettings().setPluginState(PluginState.ON);
wv.loadDataWithBaseURL("", html, "text/html", "utf-8", null); 
```

有任何想法吗？

# c++ - Visual Studio 2012（在其任何版本中）是否显示未使用的包含？

> ID：12398531
> 
> 赞同：2
> 
> 时间：2012-09-13T02:14:18.983
> 
> 标签：c++, refactoring, visual-studio-2012

假设我有一个`*.cpp/.h/.hpp*`文件， `#include <map>`但我没有使用`map`头文件定义或引用的任何内容。我希望 VS 向我发出警告或我不使用我包含的文件中的数据的东西。

那么 Visual Studio 2012（在其任何版本中）是否显示未使用的包含？（所需答案应包括简单的 - 是/否）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-15T01:07:22.843

这些答案让我难以接受。其他所有语言都这样做。任何支持 C++ 的链接器都可以做到这一点。这很简单：

1.  编译所有内容，生成该模块的符号表等

2.  链接它。

    *   任何已使用但未定义的内容都已生成`undefined external`错误。
    *   已定义但未使用的所有内容都应生成`extraneous external definition`警告。当您使用它时，将它们按源文件分组，并且仅在没有引用该模块中的符号时生成警告。
3.  任何一个

    *   显示警告：“嘿，伙计，你并没有真正使用这个东西......所以......无论如何，伙计。干杯”，或
    *   启用上下文菜单选项，例如“删除未使用的包含”来清理它。

对于静态语言，您有一个符号表。链接时，您可以查看使用了该表中的哪些项目。您可以提供一个选项，至少*突出显示*所有未使用的内容。

如果你真的需要，构建这个东西，完成上述步骤，并在删除可能未使用的引用*后重新构建。*如果它爆炸了，把它滚回去。

有一百种方法可以解决这个问题。显然没有一个 IDE 可以做到这一点，这一事实令人惊讶。

至少，让它成为一个“有用的提示”选项。做程序员的工作不是编译器的工作。IDE 的工作是尽可能多地完成程序员的工作，并相互理解最终责任在于坐在椅子上的人。

***源代码**我曾经以编写 C 编译器为生。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T02:16:11.053

没有已知的方法可以判断您是否不使用包含文件中的任何内容。这是一个未解决的问题，除非在完全微不足道的情况下。

考虑以下包含文件：

```
int x; 
```

你怎么知道是否`x`被引用？包含该文件的编译输出可能链接到另一个访问`x`. 编译的目标文件可能不止一次以不止一种方式链接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T03:04:27.420

判断包含文件是否不必要的最好方法是将其注释掉或完全删除它，然后查看代码是否仍然可以编译。这是一个易于自动化的过程。

# python - 如何从表中确定 pytables 文件名

> ID：12398532
> 
> 赞同：1
> 
> 时间：2012-09-13T02:14:26.410
> 
> 标签：python, pytables

我有一个应用程序，我在其中传递一个表实例（或“节点”）。我需要知道沿途某些地方的父文件的文件名。我似乎找不到一个内置的方法来返回它。可能吗？

例如，我正在寻找下面的“get_parent_file”功能：

```
import tables

f = tables.openFile("myfile.h5", 'r')

t = f.root.a

f = t.get_parent_file() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T02:50:09.240

看起来像`t._v_file.filename`给你文件名。

# android - 如何在 SQLite 查询中去除特定情况

> ID：12398534
> 
> 赞同：1
> 
> 时间：2012-09-13T02:15:15.583
> 
> 标签：android, sqlite

我在解决这个问题时遇到了问题。这是我的查询：

```
SELECT * FROM events WHERE date('2012-9-4') >= start_date AND 
date('2012-9-4') <= end_date 
```

现在正如您从上面看到的那样，我只能以某种方式获得当天匹配的行。就我而言，当天发生的或前几天发生的任何事件。问题是，例如，前一天从晚上 10:00 到凌晨 12:00 (2012-9-3) 发生事件的情况在第二天 (2012-9-4) 出现。所以我需要防止这种情况发生。

这是我遇到麻烦的地方。我不知道如何正确完成它。我尝试过不同的事情，但都失败了。我需要一种方法来使 where 子句中的语句仅在`end date > start date`、`end date == current day`和`end time == 00:00`. 任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T02:33:22.033

难道你只需要把 where 子句的第一部分转过来吗？

```
Where start_date >= date ('2012-9-4') and end_date <= date('2012-9-4') 
```

假设您的数据的 end_date 总是晚于 start_date （如果不是，则添加一个 OR 和相反的值来获取它们）。

如果（从 Q 中混淆）您实际上想要相交的日期（重叠），那么您需要两个相交的子句：

```
where (start_date >= date('2012-09-03 00:00:00') and start_date < date('2012-09-04 00:00:00')) or (end_date >= date('2012-09-03 00:00:00') and end_date < date('2012-09-04 00:00:00')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T04:36:47.560

我终于想通了（很确定）！

```
SELECT * FROM events WHERE date('2012-9-4') >= start_date AND 
date('2012-9-5') <= end_date AND datetime(end_date,end_time) != datetime(2012-9-5,'00:00') 
```

经过 2 天的思考，我不知道为什么我从来没有想过要使用这些时间。我想我需要更多的数据库练习。无论如何，我添加的部分过滤了按日期和时间列出的事件。示例就像我的查询日期，假设 4 日晚上 11:00 到 5 日上午 12:00。本质上说“`AND datetime(end_date,end_time) != datetime(2012-9-5,'00:00')`仅当它不是午夜的结束日期时才输出。” 它只会过滤掉第 5 天而不是第 4 天，因为从技术上讲，午夜是另一天。这是我想要过滤掉事件的唯一情况，而不仅仅是在事件期间之间。我感谢 Wolf5370 提供的帮助。

# c++ - 结构体的结构？

> ID：12398538
> 
> 赞同：0
> 
> 时间：2012-09-13T02:16:05.047
> 
> 标签：c++, struct, typedef

> **可能重复：**
> [C++ 中“struct”和“typedef struct”之间的区别？](https://stackoverflow.com/questions/612328/difference-between-struct-and-typedef-struct-in-c)

有人可以解释以下结构定义之间的区别吗

```
typedef struct
{
}GOOD;

&

struct GOOD
{
};

&

typedef struct tagGOOD
{
}GOOD; 
```

我的老师使用了最后一个示例，但我真的不知道他为什么在结构名称上使用“标签”（如果是名称），有人可以说清楚吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T02:21:22.020

在 C 和 C++ 中，`struct`您使用名称声明的任何内容都可以称为`struct GOOD`. 您还可以声明没有名称的匿名结构，如第一个示例中所做的那样。

任何类型都可以`typedef`给它一个备用名称。在第一个示例中，您只是将名称`GOOD`（不带`struct`）赋予匿名结构。在第二个示例中，您的结构只能以`struct GOOD`. 在第三个中，您可以使用`GOOD`或访问它`struct GOOD`。

这三个选项都是合法的，使用哪一个是风格问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T02:21:51.840

在我多年来阅读的所有代码中，我看到了所有这些变体的使用。我刚刚检查了 VS2010，它们似乎是等价的。我可以告诉你的是 typedef 关键字曾经在 C 中是必需的，但在 C++ 中不再需要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T02:25:28.860

结构应该有一个名字：

```
struct StructName {
   // stuff
}; 
```

Typedefs 接受一个类型并给它一个名字：

```
typedef SomeType NameYouWannaGiveThatType; 
```

第三个例子结合了这些。

该示例是一个未命名的结构，一些编译器对此感到不安。

第二个例子是一个命名的结构，但传统上你不能在不包括单词结构的情况下引用它。 *例如*

```
struct MyStruct {
    //...
};

MyStruct iffy;          // Not allowed in C, in my experience anyway
struct MyStruct good;   // No problem. 
```

我还没有发现这在 C++ 中是个问题，但我敢肯定有人知道 C++ 规范，并且会给你一个更好的答案。不管怎样，你可以用 typedef 解决这个问题。

```
typedef MyStruct { /* etc */ } MyStruct;

MyStruct s; 
```

就个人而言，这可能只是风格问题，我宁愿不使用相同的名称：

```
typedef MyStruct { /* etc */ } SMyStruct; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T02:28:26.433

如果您在谈论 C++，我相信 typedef 并不是真正需要的。这个故事实际上来自 C.

在 C 中，当我声明

```
struct GOOD_STRUCT {
   ...
} 
```

当我想声明这个结构的变量时，我需要做

```
struct GOOD_STRUCT good; 
```

为了有更好的编码风格和可读性，人们习惯在这个上使用 typedef：

```
typedef GOOD_STRUCT GOOD; 
```

所以你可以做

```
GOOD good; 
```

将两者结合起来，人们过去常常做

```
typedef struct GOOD_STRUCT {
   ...
} GOOD; 
```

或者

```
typedef struct {
   ...
} GOOD; 
```

但是，在 C++ 中，不再需要它。一旦你有 declare `struct GOOD`，你已经可以`GOOD`直接引用它了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-13T02:23:39.987

定义 1：

定义一个匿名（空）结构，并给它一个 typedef `GOOD`。这种类型可以简称为`GOOD`将来。

定义 2：

定义一个名为 的（空）结构`GOOD`。在 C 和 C++ 中，这可以称为`struct GOOD`，而在 C++ 中，这可以称为`GOOD`。

定义 3：

定义一个名为的（空）结构体`tagGOOD`和一个名为 的 typedef `GOOD`。在 C 和 C++ 中，结构体可以称为`struct tagGOOD`and `GOOD`，而在 C++ 中，结构体可以称为`tagGOOD`.

根据我的经验，定义 3 往往是 C 代码中最常见的。人们往往不太喜欢匿名结构，所以他们给结构命名，但他们也不喜欢`struct`在引用类型时使用关键字，所以他们也给它一个 typedef。在 C++ 中，typedef 形式是毫无意义的。

# c# - 获取RSS链接

> ID：12398539
> 
> 赞同：1
> 
> 时间：2012-09-13T02:16:05.567
> 
> 标签：c#, rss

我有一个提要阅读器并在列表框中获取标题，但是如何插入标题的值链接？

```
private void Form1_Load(object sender, EventArgs e)
{
    var reader = XmlReader.Create("http://feeds.feedburner.com/myusername?format=xml");
    var feed = SyndicationFeed.Load<SyndicationFeed>(reader);

    foreach (var item in feed.Items)
    {
       listBox1.Items.Add(item.Title.Text);
       listBox1."add value link" = item.Links."Text";
    }
}

private void listBox1_Click(object sender, EventArgs e)
{          
    MessageBox.Show(listBox1."value link for item selected".ToString());
} 
```

如果点击标题显示链接

例如：点击`my feed2`显示`wwww/mywebsite/myfeed2`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T03:19:18.627

如果你想链接 rss 标题和它的 url，你必须编写你自己的带有 title 和 url 属性的类，并为列表框编写自定义项目模板，或者简单地定义一个字典。

```
private Dictionary<string,string> dictionary = new Dictionary<string,string>();

foreach (var item in feed.Items)
        {
            dictionary.Add(item.Title.Text, item.Links.Text);
            listBox1.Items.Add(item.Title.Text);

        }

private void listBox1_Click(object sender, EventArgs e)
  {   
      string url = dictionary[listBox1.SelectedValue];       
      MessageBox.Show(url);
  } 
```

# c# - 带有标志的 C# 中的 cURL 调用

> ID：12398541
> 
> 赞同：2
> 
> 时间：2012-09-13T02:16:14.860
> 
> 标签：c#, .net, curl, solr

我想在 C# 中进行以下 curl 调用：

```
curl "http://localhost:8983/solr/update/extract?literal.id=doc1&commit=true" -F "myfile=@tutorial.html" 
```

我发现我应该使用 WebRequest 类，但我仍然不确定如何处理这部分：

```
-F "myfile=@tutorial.html" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T02:25:22.917

[来自http://msdn.microsoft.com/en-us/library/debx8sh9.aspx](http://msdn.microsoft.com/en-us/library/debx8sh9.aspx)的代码片段展示了如何使用 WebRequest 类发送 POST 数据：

```
// Create a request using a URL that can receive a post. 
WebRequest request = WebRequest.Create("http://localhost:8983/solr/update/extract?literal.id=doc1&commit=true");
// Set the Method property of the request to POST.
request.Method = "POST";
// Create POST data and convert it to a byte array.
string postData = "myfile=@tutorial.html";
byte[] byteArray = Encoding.UTF8.GetBytes(postData);
// Set the ContentType property of the WebRequest.
request.ContentType = "application/x-www-form-urlencoded";
// Set the ContentLength property of the WebRequest.
request.ContentLength = byteArray.Length; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T09:28:33.267

作为 WebRequest 的替代方案，您可以考虑使用 WebClient 类。它提供了可能被认为比 WebRequest 更干净、更简单的语法。像这样的东西：

```
using (WebClient client = new WebClient())
        {
            client.Headers[HttpRequestHeader.ContentType] = "application/x-www-form-urlencoded";

            byte[] postResult = client.UploadFile("http://localhost:8983/solr/update/extract?literal.id=doc1&commit=true", "POST", "tutorial.html");
        } 
```

请参阅[http://msdn.microsoft.com/en-us/library/esst63h0%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/esst63h0%28v=vs.100%29.aspx)

# php - WordPress Cron API 是否在后台运行？

> ID：12398543
> 
> 赞同：4
> 
> 时间：2012-09-13T02:16:28.833
> 
> 标签：php, cron, wordpress

我正在阅读`cron.php`wp-includes 中的代码，它`spawn_cron()`似乎是实际执行注册任务的代码。

函数的最后两行：

```
$cron_url = site_url( 'wp-cron.php?doing_wp_cron=' . $doing_wp_cron );

wp_remote_post( $cron_url, array( 'timeout' => 0.01, 'blocking' => false, 'sslverify' => apply_filters( 'https_local_ssl_verify', true ) ) ); 
```

它只是打开 wp-cron.php，将任务作为查询参数传递。

cron.php 顶部的 API 说明：

```
* Schedules a hook which will be executed once by the WordPress actions core at 
* a time which you specify. The action will fire off when someone visits your
* WordPress site, if the schedule time has passed.` 
```

我的问题是，假设访问者打开站点的一个页面，然后注册的任务被 cron API 触发。如果任务很繁重并且需要几分钟才能完成，访问者是否会在任务完成之前获得一个尚未完全加载的页面？

[编辑]为了澄清我的问题，问题是，页面加载完成后 WP Cron API 是否运行任务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T19:14:58.013

```
$cron_url = site_url( 'wp-cron.php?doing_wp_cron=' . $doing_wp_cron );
wp_remote_post( $cron_url, array( 'timeout' => 0.01, 'blocking' => false, 'sslverify' => apply_filters( 'https_local_ssl_verify', true ) ) ); 
```

使用下面的示例插件，我确认上面的代码（我也在问题中引用）是实际调用计划任务的代码。它设置 0.0.1 超时并访问 wp-cron.php。这意味着如果有 100 个任务，加载所有任务需要 1 秒。所以它对页面加载速度有轻微的影响。但这似乎是不用太担心的事情。

```
<?php
/* Plugin Name: Sample Cron Task */ 

    // I used `heavy` because this code was initially written to test how it affects the server response if a heavy task is registered as a cron job. So forget about the naming.
add_action('admin_menu', 'sample_cron_heavy_task');
function sample_cron_heavy_task() {
    add_options_page(
        'Sample Cron Heavy Task', 
        'Sample Cron Heavy Task', 
        'manage_options',
        'sample_cron_heavy_task', 
        'sample_cron_heavy_task_admin');
}
function sample_cron_heavy_task_admin() {
    ?>
    <div class="wrap">
    <?php
        wp_schedule_single_event(time(), 'my_action_name');
        $cron_url = site_url( 'wp-cron.php?doing_wp_cron=' . $doing_wp_cron );
        // executes the registered task immediately 
        wp_remote_post( $cron_url, array( 'timeout' => 0.01, 'blocking' => false, 'sslverify' => apply_filters( 'https_local_ssl_verify', true ) ) );
        echo get_option('sample_cron_heavy_task');
    ?>
    </div>
    <?php
}

add_action('my_action_name', 'myevent'); 
function myevent() {
    $msg = date('Y m d h:i:s A') . ': the cron task is called.<br />';
    update_option('sample_cron_heavy_task', $msg);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-13T02:18:59.637

cron 作业根本不应该影响您的查看器。如果它确实找到了新的托管公司。

# android - 如何将消息从 Web 服务传输到 android 客户端？

> ID：12398544
> 
> 赞同：0
> 
> 时间：2012-09-13T02:16:31.390
> 
> 标签：android, wcf, web-services

你能告诉我如何将消息从 web 服务传输到 android 客户端吗？它可用吗？示例：客户端将消息 A 发送给服务..然后我希望服务将此消息发送给所有客户端使用..

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T02:26:59.453

也许您需要[使用 kSoap](http://codeoncloud.blogspot.com/2012/04/android-403-webservice-access-tutorial.html)或者您可以使用 PHP 制作自己的网络服务。希望为您使用 :-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T02:27:33.743

我想你是在问这个[Doing HTTP Post with Android](https://stackoverflow.com/questions/3912494/doing-http-post-with-android)

您可以使用 apache 中的 HttpClient 组件。

# javascript - setInterval 和 clearInterval javascript 不能按需要工作

> ID：12398546
> 
> 赞同：2
> 
> 时间：2012-09-13T02:17:08.217
> 
> 标签：javascript, jquery, setinterval

我有以下代码部分工作。我是 javascript 的新手，所以如果我的方法不是最好的，请不要怪我。

```
window.url_var = "status.htm";
window.elem = "#e1";

function menu_item(){
$(window.elem).click(function (event)
{ 
    $("#divTestArea1").load(window.url_var);
});
}

$("#e1").click(function (event)
{ 
event.preventDefault(); 
window.url_var = "demo2.txt";
window.elem = "#e1";
$("#divTestArea1").load(window.url_var);
auto_refresh = setInterval(menu_item(), 5000);  
});

$("#e2").click(function (event)
{ 
event.preventDefault(); 
window.url_var = "status.htm";
window.elem = "#e2";
$("#divTestArea1").load(window.url_var);
auto_refresh = setInterval(menu_item(), 5000);  
});

$("#e3").click(function (event)
{ 
event.preventDefault(); 
window.url_var = "form.htm";
window.elem = "#e3";
clearInterval(auto_refresh);
$("#divTestArea1").load(window.url_var);
});

jQuery(document).ready(function() {
$("#divTestArea1").load(window.url_var);
auto_refresh = setInterval(menu_item(), 5000);  
}); 
```

每当我单击元素 e1 和 e2 时，setInterval 都会按预期工作，并且只要我单击元素 e3，该元素就会停止重新加载。

到目前为止，这就是我想要的行为。但是，如果再次单击 e1 或 e2 get，我也想再次启动 setinterval。

最后是它在上面的代码中不起作用的地方。

如果您能指出正确的方向，我将不胜感激。

* * *

在看到我原来的问题的一些答案（感谢大家）之后，我来到了这个代码。为了澄清我最初的想法，我需要定期更新网页上的一些项目，但内容可以通过一些菜单进行更改，并且某些内容（如表单）不应更新。

```
window.url_var = "demo2.txt";
var     auto_refresh = null;

function setRefresh() {
    var self = this;
    this.bar = function() {
      if(window.url_var != ""){ 
    $("#divTestArea1").load(window.url_var);
            auto_refresh = setTimeout(function() { self.bar(); }, 5000);
        }
    }
    this.bar();
}

$("#e1").click(function (event)
{ 
    event.preventDefault(); 
    window.url_var = "demo2.txt";
    setRefresh();
});  

$("#e2").click(function (event)
{ 
    event.preventDefault(); 
    window.url_var = "status.htm";
    setRefresh();
});  

$("#e3").click(function (event)
{ 
    event.preventDefault(); 
    window.url_var = "form.htm";
    $("#divTestArea1").load(window.url_var);
    window.url_var = "";
});

$(document).ready(function() {
    setRefresh();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T02:29:14.920

尝试使用 2 个不同的变量并在需要时清除所有变量。这是：auto_refresh1 和 auto_refresh2。每次调用 setinterval 时，它都会创建一个具有新 id 的新计时器。您正在覆盖 auto_refresh 变量，并且在此之前的计时器仍将触发。

或者您可以将 setinterval 存储在哈希对象中并运行并清除它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T16:04:22.450

我不清楚你到底想在这里做什么。尽管如此，我还是稍微重写了您的代码以进行一些改进（并修复了您的代码中涉及`setInterval`调用的一个明显错误）。

```
var url_var = "status.htm",
    elem = "#e1",
    $destination = $("#divTestArea1"),
    auto_refresh;

function menu_item() {
    $(elem).bind("click", function (e) {
        $destination.load(url_var);
    });
}

function load() {
    $destination.load(url_var);
}

function set(url, id) {
    url_var = url;
    elem = id;
}

function setRefresh() {
    return setInterval(menu_item, 5000);
}

function handleClick(e) {
    e.preventDefault();
    set(e.data.url, e.data.id);
    load();
    auto_refresh = setRefresh();
}

$("#e1").on("click", {
    url: "demo2.txt",
    id: "#e1"
}, handleClick);

$("#e2").on("click", {
    url: "status.htm",
    id: "#e2"
}, handleClick);

$("#e3").on("click", function (e) {
    e.preventDefault();
    set("form.htm", "#e3");
    clearInterval(auto_refresh);
    load();
});

$(document).ready(function () {
    load();
    auto_refresh = setRefresh();
}); 
```

我猜也许这些`setInterval`电话实际上应该是`setTimeout`电话？为什么要一遍又一遍地绑定“click”事件处理程序？

**编辑＃1：**`on`从方法切换到jQuery当前首选的`bind`方法，包括使用事件数据参数来进一步抽象事件处理代码。

# php - 删除 WordPress 上的“发表评论”链接

> ID：12398547
> 
> 赞同：2
> 
> 时间：2012-09-13T02:17:45.700
> 
> 标签：php, wordpress, comments

我希望我的“发表评论”部分不链接到 comment.php 文件，因为我将使用它来切换。

这是代码：

```
<span class="comments-link"><?php comments_popup_link( __( '0 Comments', 'Bomb!' ), __( '1 Comment', 'Bomb!' ), __( '% Comments', 'Bomb!' ) ) ?></span> 
```

我有点 PHP 菜鸟，所以我想知道如何在不破坏显示的评论数量的情况下删除 comments_popup_link 部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T06:29:48.083

@user1636968

根据您的需要，您可以通过在您的帖子/页面的 WYSIWYG 区域下方的讨论部分中选中/取消选中允许评论来切换您在 WordPress 中的帖子或页面的评论。

在 WordPress 管理员的右上角还有**屏幕选项**可扩展部分（在用户信息下方），您可以从中选择要在 WordPress 中的帖子/页面中包含的部分类型。

检查附加图像以获取更多详细信息。![在 wordpress 中切换评论](../Images/c05d0aada83693ea52ed06496a87d86a.png)

此外，您可以查看下面的参考文献。到自定义的 WordPress 管理员...

[http://sixrevisions.com/wordpress/how-to-customize-the-wordpress-admin-area/](http://sixrevisions.com/wordpress/how-to-customize-the-wordpress-admin-area/)

这是另一个参考。哪个地址和你一样的问题...... [https://wordpress.stackexchange.com/questions/11222/is-there-any-way-to-remove-comments-function-and-section-totally](https://wordpress.stackexchange.com/questions/11222/is-there-any-way-to-remove-comments-function-and-section-totally)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T02:25:31.060

我认为最好的方法是在 CSS 中，而不是在 PHP 代码中，尽管我的 wordpress-fu 有点生疏。

在你的 CSS 文件中试试这个：

```
.comments-link { display: none; } 
```

# git - Git克隆导致：“无法获取远程存储库信息。”

> ID：12398548
> 
> 赞同：3
> 
> 时间：2012-09-13T02:18:05.310
> 
> 标签：git, github, clone

当 I 时`ssh -v git@github.com`，它的身份验证很好。

但是，当`git clone https://github.com/myusername/project.git`我得到：

```
Initialized empty Git repository in /home/webapps/myproject/.git/
Cannot get remote repository information.
Perhaps git-update-server-info needs to be run there? 
```

我已经三重检查了我输入的网址是否正确。另外，我是否使用 git:// vs http:// 协议也没关系。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T22:00:24.423

`git clone git://github.com/myusername/project.git`

应该有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T02:28:58.420

尝试实际使用 SSH 协议（如果您不指定协议，也会发生这种情况）：

```
git clone git@github.com:username/project.git 
```

还要仔细检查您输入的用户名和项目是否正确（如果您尝试克隆现有项目，您是否已经分叉了存储库）。

# java - 如果单元格值相同，则更改 JTable 中的单元格背景

> ID：12398549
> 
> 赞同：-1
> 
> 时间：2012-09-13T02:18:09.933
> 
> 标签：java, swing, jtable, tablecellrenderer, listselectionlistener

我有一个关于 JTable 的问题。

当我选择一个单元格，然后在我选择的 JTable 中有相同的值单元格时，该单元格突出显示背景红色。

我不知道该怎么办....

PS：对不起，我不知道如何在这里输入代码...;;

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T03:15:44.393

您可以实施`ListSelectionListener`以跟踪表中的选择更改。然后实现`TableCellRenderer`这将改变具有所选对象相同值的单元格的背景。查看[如何使用表格](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)了解更多关于`JTable`渲染器和选择的详细信息。

这是一个非常简单的例子来展示这个想法：

```
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.event.ListSelectionEvent;
import javax.swing.event.ListSelectionListener;
import javax.swing.table.DefaultTableCellRenderer;
import javax.swing.table.DefaultTableModel;

import java.awt.Color;
import java.awt.Component;

public class TableDemo {
    private static void createAndShowGUI() {
        JFrame frame = new JFrame("TableDemo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JPanel contentPanel = new JPanel();
        String[] columnNames = { "Column1", "Column2" };
        Object[][] data = { { "1", "3" }, { "2", "5" }, { "7", "1" },
                { "5", "3" } };

        JTable table = new JTable();
        MyModel model = new MyModel(Color.RED, table.getBackground());
        model.setDataVector(data, columnNames);

        table.setModel(model);
        table.setColumnSelectionAllowed(true);
        table.setDefaultRenderer(Object.class, new TestCellRenderer());

        SelectionListener listener = new SelectionListener(table);
        table.getSelectionModel().addListSelectionListener(listener);
        table.getColumnModel().getSelectionModel()
                .addListSelectionListener(listener);

        JScrollPane scrollPane = new JScrollPane(table);
        contentPanel.add(scrollPane);

        contentPanel.setOpaque(true);
        frame.add(contentPanel);

        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    static class TestCellRenderer extends DefaultTableCellRenderer {
        public Component getTableCellRendererComponent(JTable table,
                Object value, boolean isSelected, boolean hasFocus, int row,
                int column) {
            Component c = super.getTableCellRendererComponent(table, value,
                    isSelected, hasFocus, row, column);
            MyModel model = (MyModel) table.getModel();
            c.setBackground(model.getCellColor(row, column));
            return c;
        }
    }

    static class MyModel extends DefaultTableModel {
        private Object selectedObject;
        private Color selectedColor;
        private Color normalColor;

        public MyModel(Color selectedColor, Color normalColor) {
            this.selectedColor = selectedColor;
            this.normalColor = normalColor;
        }

        public Color getCellColor(int row, int column) {
            if (getValueAt(row, column).equals(selectedObject))
                return selectedColor;
            return normalColor;
        }

        public void setSelectedObject(Object selectedObject) {
            this.selectedObject = selectedObject;
            fireTableRowsUpdated(0, getRowCount());
        }
    }

    static class SelectionListener implements ListSelectionListener {
        private JTable table;

        SelectionListener(JTable table) {
            this.table = table;
        }

        public void valueChanged(ListSelectionEvent e) {
            int rowIndex = table.getSelectedRow();
            int colIndex = table.getSelectedColumn();
            if (!e.getValueIsAdjusting() && colIndex != -1 && rowIndex != -1) {
                ((MyModel) table.getModel()).setSelectedObject(table
                        .getValueAt(rowIndex, colIndex));
            }
        }
    }

    public static void main(String[] args) {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
    }
} 
```

这是一个结果：

![在此处输入图像描述](../Images/8a0a3eb022776851e90e47b43f4e1bbe.png)

***编辑：仅使用渲染器的解决方案，没有表模型***

```
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.event.ListSelectionEvent;
import javax.swing.event.ListSelectionListener;
import javax.swing.table.DefaultTableCellRenderer;
import javax.swing.table.DefaultTableModel;

import java.awt.Color;
import java.awt.Component;

public class TableDemo {
    private static void createAndShowGUI() {
        JFrame frame = new JFrame("TableDemo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JPanel contentPanel = new JPanel();
        String[] columnNames = { "Column1", "Column2" };
        Object[][] data = { { "1", "3" }, { "2", "5" }, { "7", "1" },
                { "5", "3" } };

        JTable table = new JTable(new DefaultTableModel(data, columnNames));
        table.setColumnSelectionAllowed(true);
        TestCellRenderer renderer = new TestCellRenderer();
        table.setDefaultRenderer(Object.class, renderer);

        SelectionListener listener = new SelectionListener(table);
        table.getSelectionModel().addListSelectionListener(listener);
        table.getColumnModel().getSelectionModel()
                .addListSelectionListener(listener);

        JScrollPane scrollPane = new JScrollPane(table);
        contentPanel.add(scrollPane);

        contentPanel.setOpaque(true);
        frame.add(contentPanel);

        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    static class TestCellRenderer extends DefaultTableCellRenderer {

        public Component getTableCellRendererComponent(JTable table, 
                Object value, boolean isSelected, boolean hasFocus, 
                int row, int column) {

            Component c = super.getTableCellRendererComponent(table, value,
                    isSelected, hasFocus, row, column);

            int columnIndex = table.getSelectedColumn();
            int rowIndex = table.getSelectedRow();

            if (columnIndex != -1 && rowIndex != -1){
                Object selectedValue = table.getValueAt(rowIndex, columnIndex);

                if (value.equals(selectedValue)) {
                    c.setBackground(Color.RED);
                } else {
                    c.setBackground(table.getBackground());
                }
            } 
            return c;
        }
    }

    static class SelectionListener implements ListSelectionListener {
        private JTable table;

        SelectionListener(JTable table) {
            this.table = table;
        }

        public void valueChanged(ListSelectionEvent e) {
            int rowIndex = table.getSelectedRow();
            int colIndex = table.getSelectedColumn();

            if (!e.getValueIsAdjusting() && colIndex != -1 && rowIndex != -1){
                table.repaint();
            }
        }
    }

    public static void main(String[] args) {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
    }
} 
```

# c++ - FindResource 的内核模式版本

> ID：12398558
> 
> 赞同：4
> 
> 时间：2012-09-13T02:19:02.810
> 
> 标签：c++, windows, kernel

我正在尝试将二进制资源嵌入到我的内核模式静态库中，但我没有看到与 FindResource 和 LoadResource API 等效的内核。你能帮帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T06:42:27.930

也许`LdrFindResource`并`LdrAccessResource`帮助你。但是这个功能没有被微软记录和支持。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T15:47:49.090

编写一个简单的脚本作为预构建事件运行：

1.  `Bin2Hex`在您的资源上运行实用程序
2.  将输出作为数组注入到源代码中：`char *data[] = {/* hex data */};`

# php - Sessions are not being saved

> ID：12398562
> 
> 赞同：0
> 
> 时间：2012-09-13T02:19:22.880
> 
> 标签：php, session

I wrote this script. It is working, but when I leve the page, or when I return to the page, sessions are not being saved. What I am doing wrong?

**login.php**

```
<?php
session_start();
require 'classes.php';

//if user is not yet authorized
if ($_SESSION['user']->iduser == null) {
    $dbhandle = mysql_connect($hst, $usr, $pass);
    if (!$dbhandle) {
        die('Could not connect: ' . mysql_error());
    }
    $selected = mysql_select_db($dbName, $dbhandle)
            or die("Could not select the database");

    $result = mysql_query(" query ");
    $resultArray = mysql_fetch_array($result);
    $num_rows = mysql_num_rows($result); //count how many rows returned
    //if 0 rows returned, then login was failed
    if ($num_rows == 0) {
        die('Error! Access denied. Incorrect username or password.');
    } else { //if username and password match
        $_SESSION['user'] = new user();
        $_SESSION['user']->iduser = $resultArray{'iduser'};
        $_SESSION['user']->fname = $resultArray{'fname'};
        echo 'Dear ' . $_SESSION['user']->fname . ', you succesfully logged in!';
    }
    //if user is already logged in
} else {
    echo 'You already logged in!<br>Your email is: ';
}
?> 
```

**class user**

```
<?php
class user {
    public $iduser = null;
    public $fname = null;
    public $lname = null;
    public $email = null;
    public $password = null;
    public $permission = null;
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T02:36:48.367

You need to "require (classes.php)" before the session starts.

(Simple answer :) )

Reason: the session is decoded when you call session_start. For an object to be unserialized correctly, then the class must be already defined. Ergo you need to define the class before session_start - swapping those two lines around should do it.

[http://php.net/manual/en/oop4.serialization.php](http://php.net/manual/en/oop4.serialization.php)

# opencl - gpu程序的坏结果

> ID：12398563
> 
> 赞同：-1
> 
> 时间：2012-09-13T02:19:30.750
> 
> 标签：opencl, gpu

我没有通过迭代方程求解得到好的结果。我正在使用具有“size_y”行的二维数组，每行带有“size_x”元素。

问题是代码只进行了一次迭代，因为累积误差为零。这个累积误差是在内核代码中为数组的每个单元计算的。

这是此解决方案的源文件的 2 部分：

内核代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <math.h>
#include <time.h>

#define min(a,b) a <= b ? a : b

// kernel code

const char *source =
"__kernel void line_compute(__global double diagx, __global double diagy,\
__global double weightx, __global double weighty, __global int size_x,\
__global double* tab_process, __global double* tab_new, __global double* r) {\
  const unsigned int iy = get_global_id(0);\
  const unsigned int ix = get_global_id(1);\
  /* do computation */\
  tab_process[iy*size_x+ix] = weighty *( tab_new[(iy-1)*size_x+ix] +\
  tab_new[(i+1)*size_x+ix] + tab_new[iy*size_x+ix]*diagy)+\
  weightx *( tab_new[iy*size_x+(ix-1)] + tab_new[iy*size_x+(ix+1)] + tab_new[iy*size_x+ix]*diagx) ; \
  r[iy*size_x+ix] = 0;\
  rk = tab_new[iy*size_x+ix] - tab_process[iy*size_x+ix];\
  r[iy*size_x+ix] =r[iy*size_x+ix]+ rk * rk;\
  tab_new[iy*size_x+ix] = tab_process[iy*size_x+ix]\
}"; 
```

在执行时，我打印的累积错误：

```
result = 0.0;
        for(i=1;i<=size_x*size_y;i++)
             { result = result + r[i];
           printf("r[%d]=%20.18f\n",i,r[i]);
         }

        printf("result=%f\n",result);
        *error=result; 
```

等于零。这就是代码只进行一次迭代的原因。

我不明白探针在哪里。如果有人能看出什么是错的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T11:55:45.357

请在向 Stack Overflow 发布问题时，仅隔离代码的相关部分（并正确格式化）。这个太多了，任何人都看不下去。

除了过早更新`tab_new`内核末尾的

```
tab_process[iy*size_x+ix] = weighty *( tab_new[(iy-1)*size_x+ix] +\
>>>  tab_new[(i+1)*size_x+ix] <<< + tab_new[iy*size_x+ix]*diagy)+\
weightx *( tab_new[iy*size_x+(ix-1)] + tab_new[iy*size_x+(ix+1)] + tab_new[iy*size_x+ix]*diagx) ; \ 
```

您错误地写成`i`了`iy`. 所以程序很可能不会在`clCreateProgramWithSource`. 因为您没有在 中检查返回码`ret`，所以您错过了这个事实，然后是以下内容`clCreateKernel`并且`clEnqueueNDRangeKernel`也失败了。在没有执行内核的情况下， 的值`r_mem_obj`保持与其初始值相同 - 全为零，因为它是一个副本`r`，作为新分配的堆内存，它也是全零（在 Linux 上读取错误页面后新提交的页面是 CoW映射到内核中一个特殊的全零页面）。将所有零相加得出零。

# android - Android ICS Flash WebView 全屏抛出 NullPointerException

> ID：12398565
> 
> 赞同：0
> 
> 时间：2012-09-13T02:19:41.053
> 
> 标签：android

我的应用程序使用 WebView 来显示 Flash 视频内容。
在您尝试在 Android ICS 设备上全屏播放之前，一切似乎都很顺利。
它在较低版本的设备上运行良好。
在 ICS 设备上，它会引发 NullPointerException。这是我的代码：

```
 webView.getSettings().setJavaScriptEnabled(true);
            webView.getSettings().setPluginsEnabled(true);
            webView.getSettings().setLoadWithOverviewMode(true);
            webView.getSettings().setUseWideViewPort(true);
            webView.setVerticalScrollbarOverlay(true);
            webView.setWebViewClient(new WebViewClient() {
                private ProgressDialog pd;

                @Override
                public void onPageStarted(WebView view, String url,
                        Bitmap favicon) {
                    pd = new ProgressDialog(TrainingDetailActivity.this);
                    pd.setProgressStyle(ProgressDialog.STYLE_SPINNER);
                    pd.setMessage("Loading");
                    pd.show();
                    super.onPageStarted(view, url, favicon);
                }

                @Override
                public void onPageFinished(WebView view, String url) {
                    this.dismissDialog();
                    super.onPageFinished(view, url);
                }

                @Override
                public boolean shouldOverrideUrlLoading(WebView view,
                        String url) {
                    return false;
                }

                private void dismissDialog() {
                    if (pd != null) {
                        pd.dismiss();
                        pd = null;
                    }
                }
            });
            webView.loadDataWithBaseURL(baseUrl, htmlstr, "text/html", "utf-8", null); 
```

经过一番挖掘，我发现在 ICS 中调用了 android.webkit.PluginFullScreenHolder show() 方法并抛出了 NullExceptionPointer。问题出在那儿，而不是在我的代码上。我尝试了一些解决方法，但它们都不起作用。
**- 解决方法：我添加了这一行：**

```
webView.setWebChromeClient(new WebChromeClient() ); 
```

通过这项工作，不会发生 NullPointerException，但视频播放时没有声音，并且不会切换到全屏模式。
我环顾stackoverflow寻找解决方案，似乎最能解决我的问题的是这个答案：
[https](https://stackoverflow.com/a/9921073/1503155)
: //stackoverflow.com/a/9921073/1503155 但不幸的是，回答者没有解释`base`他的代码片段中的变量是什么，我我仍然卡住了。
我的问题是，有没有办法解决这个错误。是，如何？
提前致谢。 ![这是这里的堆栈跟踪](../Images/7ecb37d812917db014632a552bfa2cc7.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T14:49:31.180

我的老板允许我与你分享这个。

在拼凑起来之前，我很长一段时间都遇到了同样的问题。

将此创建为一个类，并设置 WebView 的 chrome 客户端：

```
WebView.setWebChromeClient(...); 
```

对此：

```
public class FullscreenableChromeClient extends WebChromeClient {
    protected Activity mActivity = null;

    private View mCustomView;
    private WebChromeClient.CustomViewCallback mCustomViewCallback;
    private int mOriginalOrientation;

    private FrameLayout mContentView;
    private FrameLayout mFullscreenContainer;

    private static final FrameLayout.LayoutParams COVER_SCREEN_PARAMS = new FrameLayout.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.MATCH_PARENT);

    public FullscreenableChromeClient(Activity activity) {
        this.mActivity = activity;
    }

    @Override
    public void onShowCustomView(View view, int requestedOrientation, WebChromeClient.CustomViewCallback callback) {
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.ICE_CREAM_SANDWICH) {
            if (mCustomView != null) {
                callback.onCustomViewHidden();
                return;
            }

            mOriginalOrientation = mActivity.getRequestedOrientation();
            FrameLayout decor = (FrameLayout) mActivity.getWindow().getDecorView();
            mFullscreenContainer = new FullscreenHolder(mActivity);
            mFullscreenContainer.addView(view, COVER_SCREEN_PARAMS);
            decor.addView(mFullscreenContainer, COVER_SCREEN_PARAMS);
            mCustomView = view;
            setFullscreen(true);
            mCustomViewCallback = callback;
            mActivity.setRequestedOrientation(requestedOrientation);
        }

        super.onShowCustomView(view, requestedOrientation, callback);
    }

    @Override
    public void onHideCustomView() {
        if (mCustomView == null) {
            return;
        }

        setFullscreen(false);
        FrameLayout decor = (FrameLayout) mActivity.getWindow().getDecorView();
        decor.removeView(mFullscreenContainer);
        mFullscreenContainer = null;
        mCustomView = null;
        mCustomViewCallback.onCustomViewHidden();
        mActivity.setRequestedOrientation(mOriginalOrientation);
    }

    private void setFullscreen(boolean enabled) {
        Window win = mActivity.getWindow();
        WindowManager.LayoutParams winParams = win.getAttributes();
        final int bits = WindowManager.LayoutParams.FLAG_FULLSCREEN;
        if (enabled) {
            winParams.flags |= bits;
        } else {
            winParams.flags &= ~bits;
            if (mCustomView != null) {
                mCustomView.setSystemUiVisibility(View.SYSTEM_UI_FLAG_VISIBLE);
            } else {
                mContentView.setSystemUiVisibility(View.SYSTEM_UI_FLAG_VISIBLE);
            }
        }
        win.setAttributes(winParams);
    }

    private static class FullscreenHolder extends FrameLayout {
        public FullscreenHolder(Context ctx) {
            super(ctx);
            setBackgroundColor(ctx.getResources().getColor(android.R.color.black));
        }

        @Override
        public boolean onTouchEvent(MotionEvent evt) {
            return true;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-22T13:04:02.517

谢谢楼上的代码

楼主的问题我遇到了。</p>

在Activity中我是这样解决的。</p>

```
@Override
public void onBackPressed() {
    Log.e(TAG, "onBackPressed");

    if(mCustomView!=null){
        mFull.onHideCustomView();
    }else{
        super.onBackPressed();
    }
} 
```

# mongodb - 具有列表属性的 MongoDB 对象模型设计

> ID：12398566
> 
> 赞同：0
> 
> 时间：2012-09-13T02:19:51.787
> 
> 标签：mongodb, database-design, model

我刚开始使用 MongoDB，我很困惑用列表属性构建对象模型。我有一个与关注者和关注对象相关的用户模型，它们是用户 ID 列表。所以我可以想到一些对象模型结构来表示这种关系。

1.  嵌入式文档。追随者和追随者嵌入到用户模型中。这样，在许多 Web 框架中，每个请求都会生成一个“current_user”对象，并且序列化/反序列化 Follower 和 Follower 列表属性是额外的开销，因为我们很少在大多数请求中使用这些属性。我们可以在生成“current_user”时排除这些属性。但是，我们需要在对它进行任何更新之前再次获取完整的“current_user”对象。

2.  在用户模型中使用参考属性。我们可以拥有 Followers 和 Followers 对象模型本身，不是嵌入的，而是保存对 User 对象的引用。

3.  在追随者和追随者模型中使用参考属性。我们可以将用户 ID 保存在 Follower 和 Follower 属性中以供以后查询。

可能还有其他一些方法可以做到这一点，更容易使用或更好的性能。我的问题是：
设计具有一些相关列表属性的模型的建议方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T22:48:54.810

对于来自 SQL 世界的人（比如我自己）来说，学习 MongoDB 最难的事情之一就是新的模式设计风格。在 SQL 世界中，一切都进入第三范式。人们开始认为只有一种正确的方式来设计他们的架构，因为通常有一个。

在 MongoDB 世界中，没有一种最好的模式设计。更准确地说，在 MongoDB 中，模式设计取决于应用程序将如何访问数据。

为了为 MongoDB 设计一个好的模式，您需要回答以下关键问题：

*   你有多少数据？
*   你最常见的操作是什么？您主要是插入新数据、更新现有数据还是进行查询？
*   您最常见的查询是什么？
*   您最常见的更新是什么？
*   您期望每秒执行多少次 I/O 操作？

如果您正在考虑一对多的对象关系，这些问题可能会出现以下情况。

在 SQL 中，您只需创建一对具有主键/外键关系的主/从表。在 MongoDB 中，您有多种选择：可以嵌入数据，可以创建链接关系，可以复制和非规范化数据，或者可以使用混合方法。

正确的方法将取决于有关应用程序用例的大量细节。

以下是有关 MongoDB 模式设计的一些很好的通用参考资料。

MongoDB 演示文稿：

*   [http://www.10gen.com/presentations/mongosf2011/schemabasics](http://www.10gen.com/presentations/mongosf2011/schemabasics)
*   [http://www.10gen.com/presentations/mongosv-2011/schema-design-by-example](http://www.10gen.com/presentations/mongosv-2011/schema-design-by-example)
*   [http://www.10gen.com/presentations/mongosf2011/schemascale](http://www.10gen.com/presentations/mongosf2011/schemascale)
*   [http://www.10gen.com/presentations/MongoNYC-2012/Building-a-MongoDB-Power-Chat-Server](http://www.10gen.com/presentations/MongoNYC-2012/Building-a-MongoDB-Power-Chat-Server)

这里有几本关于 MongoDB 模式设计的书，我认为你会发现它们很有用：

*   [http://www.manning.com/banker/（MongoDB](http://www.manning.com/banker/)在行动）
*   [http://shop.oreilly.com/product/0636920018391.do（MongoDB](http://shop.oreilly.com/product/0636920018391.do)文档设计）

以下是一些示例架构设计：

*   [http://docs.mongodb.org/manual/use-cases/](http://docs.mongodb.org/manual/use-cases/)
*   [https://openshift.redhat.com/community/blogs/designing-mongodb-schemas-with-embedded-non-embedded-and-bucket-structures](https://openshift.redhat.com/community/blogs/designing-mongodb-schemas-with-embedded-non-embedded-and-bucket-structures)

# html - 将 css 应用于带有 div 的表单

> ID：12398567
> 
> 赞同：0
> 
> 时间：2012-09-13T02:19:54.437
> 
> 标签：html, css, forms

我的表格是

```
<div id="search">
    <form action="http://www.google.com/search" method="get" onSubmit="Gsitesearch(this)">
        <input name="q" type="hidden" />
        <input name="qfront" type="text" style="width: 80px" />
    </form>
</div> 
```

在我放的样式中

```
#search {font: 12px  'Arial', sans-serif; color:#fff; text-align:left} 
```

但是表格仍然没有显示白色

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T02:26:07.960

`INPUT`默认情况下，元素通常不会从周围的文本中继承颜色或字体样式。例如，在带有蓝色文本的区域中，`INPUT`值的颜色仍将是浏览器默认值（通常为黑色）。要覆盖它，您需要`INPUT`专门针对。在您的情况下，请尝试：

```
#search input { font: 12px 'Arial', sans-serif; color:#fff; } 
```

# java - Spring StoredProcedure 可选参数

> ID：12398568
> 
> 赞同：4
> 
> 时间：2012-09-13T02:20:01.730
> 
> 标签：java, spring, oracle11g, java-stored-procedures

我在 Oracle 中有一个过程，共有 12 个参数和 3 个可选参数。如果我在 Spring 3.1.0 中使用[StoredProcedure](http://static.springsource.org/spring/docs/3.1.1.RELEASE/javadoc-api/org/springframework/jdbc/object/StoredProcedure.html)对象，如何考虑这些可选参数？

这是我迄今为止在我的 StoredProcedure 课程中的内容

```
public Map<String, Object> execute(Evaluation evaluation) {
    Map<String, Object> input_params = new HashMap<String, Object>();
    input_params.put(COURSE_MAIN_PK1_INPUT_PARAM, evaluation.getCourseId());
    input_params.put(USERS_PK1_INPUT_PARAM, evaluation.getUsersPk1());
    input_params.put(ACCREDITATION_PK1_INPUT_PARAM, evaluation.getAccreditationPk1());
    input_params.put(TYPE_PK1_INPUT_PARAM, evaluation.getTypePk1());
    input_params.put(PRIVACY_TYPE_PK1_INPUT_PARAM, evaluation.getPrivacyTypePk1());
    input_params.put(FORM_TYPE_PK1_INPUT_PARAM, evaluation.getFormTypePk1());
    input_params.put(TITLE_INPUT_PARAM, evaluation.getTitle());
    input_params.put(DESCRIPTION_INPUT_PARAM, evaluation.getDescription());

    if(evaluation.getStartDate() != null) {
        input_params.put(START_DATE_INPUT_PARAM, new java.sql.Date(evaluation.getStartDate().getMillis()));         
    }

    if(evaluation.getEndDate() != null) {
        input_params.put(END_DATE_INPUT_PARAM, new java.sql.Date(evaluation.getEndDate().getMillis())); 
    }

    input_params.put(SAVE_TO_GRADECENTER_INPUT_PARAM, evaluation.getGradeCenterColumn());
    input_params.put(CREATE_ANNOUNCEMENT_INPUT_PARAM, evaluation.getAnnouncement());

    return super.execute(input_params);
} 
```

问题是我提供了 12 个参数，如果开始日期和结束日期为空，现在我提供 10 个参数并获得异常。

数据库中日期的默认值为`null`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T03:13:40.450

JDBC[`PreparedStatement`](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/PreparedStatement.html)提供了一种使用该`setNull`方法为参数设置空值的工具。因此，只要将所有参数传递给存储过程（如果它们为空），Spring 就能够准备语句并执行它。

因此，您需要将值为 null 的输入参数添加到发送到存储过程调用的 Map 中。

```
input_params.put(START_DATE_INPUT_PARAM, 
                 (null != evaluation.getStartDate() 
                  ? new java.sql.Date(evaluation.getStartDate().getMillis()) 
                  : null)); 
```

这同样适用于 END_DATE_INPUT_PARAM。

# sas - SAS中的多个哈希对象

> ID：12398569
> 
> 赞同：5
> 
> 时间：2012-09-13T02:20:02.957
> 
> 标签：sas

我有两个 SAS 数据集。第一个相对较小，包含唯一的日期和相应的 ID：

```
date   dateID
1jan90     10
2jan90     15
3jan90     20
... 
```

第二个数据集非常大，有两个日期变量：

```
dt1     dt2
1jan90  2jan90
3jan90  1jan90
... 
```

我需要同时匹配`dt1`和`dt2`，`dateID`所以输出将是：

```
id1  id2
10   15
20   10 
```

效率在这里非常重要。我知道如何使用哈希对象进行一次匹配，因此我可以执行一个数据步骤来进行匹配，`dt1`然后再执行另一步骤来匹配`dt2`，但我想在一个数据步骤中同时执行这两个步骤。如何才能做到这一点？

这是我将如何进行比赛的方式`dt1`：

```
data tbl3;
 if 0 then set tbl1 tbl2;

 if _n_=1 then do;
  declare hash dts(dataset:'work.tbl2');
  dts.DefineKey('date');
  dts.DefineData('dateid');
  dts.DefineDone();
 end;

 set tbl1;
 if dts.find(key:date)=0 then output;
 run; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T07:50:22.887

考虑到哈希表的大小，一种格式可能会同样有效地工作......

```
data fmt ;
retain fmtname 'DTID' type 'N' ;
set tbl1 ;
start = date ;
label = dateid ;
run ;
proc format cntlin=fmt ; run ;

data tbl3 ;
  set tbl2 ;
  id1 = put(dt1,DTID.) ;
  id2 = put(dt2,DTID.) ;
run ; 
```

基于以下评论的编辑版本...

```
data fmt ;
retain fmtname 'DTID' type 'I' ;
set tbl1 end=eof ;
start = date ;
label = dateid ;
output ;
if eof then do ;
  hlo = 'O' ;
  label = . ;
  output ;
end ;
run ;
proc format cntlin=fmt ; run ;

data tbl3 ;
  set tbl2 ;
  id1 = input(dt1,DTID.) ;
  id2 = input(dt2,DTID.) ;
run ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T05:58:31.670

我现在没有 SAS 来测试它，但代码如下所示：

```
 data tbl3;
   if 0 then set tbl1 tbl2;

   if _n_=1 then do;
     declare hash dts(dataset:'work.tbl2');
     dts.DefineKey('date');
     dts.DefineData('dateid');
     dts.DefineDone();
   end;

   set tbl1;

   date = dt1;
   if dts.find()=0 then do;
     id1 = dateId;
   end;

   date = dt2;
   if dts.find()=0 then do;
     id2 = dateId;
   end;

   if dt1 or dt2 then do output; * KEEP ONLY RECORDS THAT MATCHED AT LEAST ONE;

   drop date dateId;
 run; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-13T12:33:54.547

一方面，我同意格式解决方案，但如果你想做散列解决方案，就可以了。这里的基本内容是您将键定义为要匹配的变量，而不是散列本身。

```
data tbl2;
informat date DATE7.;
input date   dateID;
datalines;
01jan90     10
02jan90     15
03jan90     20
;;;;
run;

data tbl1;
informat dt1 dt2 DATE7.;
input dt1     dt2;
datalines;
01jan90  02jan90
03jan90  01jan90
;;;;
run;
data tbl3;
 if 0 then set tbl1 tbl2;

 if _n_=1 then do;
  declare hash dts(dataset:'work.tbl2');
  dts.DefineKey('date');
  dts.DefineData('dateid');
  dts.DefineDone();
 end;

 set tbl1;
 rc1 = dts.find(key:dt1);
 if rc1=0 then id1=dateID;
 rc2 = dts.find(key:dt2);
 if rc2=0 then id2=dateID;
 if rc1=0 and rc2=0 then output;
 run; 
```

# javascript - 如何准确执行 onload 脚本和退出弹出窗口？

> ID：12398570
> 
> 赞同：0
> 
> 时间：2012-09-13T02:20:13.160
> 
> 标签：javascript

> **可能重复：**
> [当用户离开站点时显示消息](https://stackoverflow.com/questions/2753827/display-message-when-user-leaves-site)

好的，这就是我的情况 - 我希望我的用户在他们登陆我的页面时自动开始下载，我有以下代码：

```
<body onload="document.getElementById('download').click()">
<a id="download" href="http://www.website.com/file.zip" style="display:none;">Download</a> 
```

这行得通。

但是问题是，我在底部有另一个脚本，当用户尝试离开页面时执行弹出消息，如下所示：

```
<script language="javascript">
var exitsplashalertmessage = '***************************************\n\n         > > > W A I T < < <\n\n     CLICK THE ***CANCEL*** BUTTON\n    on the NEXT Window for Something\n             VERY Special!\n\n***************************************';
var exitsplashmessage = '***************************************\n\n W A I T   B E F O R E   Y O U   G O !\n\n  CLICK THE *CANCEL* BUTTON RIGHT NOW\n     TO STAY ON THE CURRENT PAGE.\n\n I HAVE SOMETHING VERY SPECIAL FOR YOU!\n\n***************************************';
var exitsplashpage = 'http://www.website.com/more';
</script>
<script language="javascript" src="http://www.website.com/exitsplash.php"></script> 
```

现在的问题是，下载文件工作正常，但 exitsplash 没有执行。

有人告诉我，我需要“onUnload”...中的代码，但我该怎么做呢？

任何人，任何想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T02:36:04.873

您应该使用 onbeforeunload。您可以使用 HTML 或 Javascript 进行操作。

HTML：

```
<body onload="document.getElementById('download').click();" onbeforeunload="alert('your message'); return false;"> 
```

Javascript：

```
document.body.onbeforeunload = function(){
    var exitSplashMessage = "your message";
    alert(exitSplashMessage);
    return false;
} 
```

# ruby-on-rails - 部分加载 Rails 以运行规范

> ID：12398574
> 
> 赞同：3
> 
> 时间：2012-09-13T02:20:58.923
> 
> 标签：ruby-on-rails, testing, rspec

目前我正在编写一个单元测试一个方法，我唯一需要 Rails 的就是使用 url 辅助方法，比如**“product_url”**

我真的不想加载整个 Rails 环境，因为我们都知道它有点贵，只是为了能够运行 url 辅助方法。

这是一种只加载部分 Rails 环境的方式，只是运行这些方法所必需的吗？

谢谢！亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T10:35:39.657

您可以尝试`*_path`在测试中模拟所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T06:07:52.550

我和@Nick_Kugaevsky 在一起——事实上，我比他消极得多。我只是不认为这是可能的。要拥有助手的概念，Rails 必须加载 ActionPack，它本身并不是很有用。我想您可以找到一种直接使用 ActionPack 的方法，但如果可能的话，我会感到非常惊讶。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T02:33:39.883

据我所知，这并不容易。但是您可以使用[spork 服务器](https://github.com/sporkrb/spork)在内存中拥有 rails 测试环境，以使您的测试运行快速流畅。

# ruby - 在 Ubuntu 12.04 上访问登录页面时出现 Poltergeist 超时错误

> ID：12398576
> 
> 赞同：3
> 
> 时间：2012-09-13T02:21:05.353
> 
> 标签：ruby, ubuntu-12.04, phantomjs, poltergeist

给定`Ubuntu 12.04`,`Poltergeist 0.7.0`和一个规范（仅使用普通的旧or`PhantomJS 1.6.5`传递），我在尝试访问页面时收到以下错误：`capybara webkit``selenium`

```
Capybara::Poltergeist::TimeoutError:
   Timed out waiting for response to {
     "args":["http://127.0.0.1:41706/login",{}],
     "name":"visit"
   } 
```

同样的命令也在 Mac 10.7 上本地传递。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T22:32:18.997

你的页面中有谷歌分析吗？我发现将分析代码包装在类似`<% unless Rails.env.test? %>`设法阻止页面超时的东西中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-30T14:22:10.523

**在 Capybara.rb 文件中使用它解决了我的问题：**

```
Capybara.javascript_driver = :poltergeist
options = { js_errors: false, timeout: 180, phantomjs_logger: StringIO.new, logger: nil, phantomjs_options: ['--load-images=no', '--ignore-ssl-errors=yes'] }

Capybara.register_driver(:poltergeist) do |app|
    Capybara::Poltergeist::Driver.new app, options
end 
```

# jqgrid - jqGrid - 字段验证

> ID：12398581
> 
> 赞同：1
> 
> 时间：2012-09-13T02:21:23.013
> 
> 标签：jqgrid

我正在使用 jqGrid 进行内联编辑，以及使用“添加”按钮创建新记录时。

为简单起见，假设我有 2 个字段

```
Field1   Field2 
```

我需要以下规则

*   如果用户未在 Field1 或 Field2 中输入任何内容，则无需验证
*   如果用户确实输入了数据，他们可以在 Field1 或 Field2 中输入数据，但不能同时输入

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T08:43:49.387

jqGrid 的验证可能性有很多限制，尤其是在内联编辑期间的验证。将调用实现验证的方法`$.jgrid.checkValues`（参见源代码[行](https://github.com/tonytomov/jqGrid/blob/v4.4.1/js/grid.inlinedit.js#L208)），将在读取相应输入字段期间直接调用。因此，作为当前验证，没有关于其他字段的信息。

作为解决方法，您可以在字段验证期间保存来自 Field1 的值。Filed2 的验证可以对这两个字段进行验证。自[定义验证](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:common_rules#custom_checking_example)是您可以在案例中使用的方式。

```
var field1, field2,
    myCustomCheck = function (value, colname) {
        if (colname === "field1") {
            field1 = value;
        } else if (colname === "field2") {
            field2 = value;
        }

        if (field1 !== undefined && field2 !== undefined) {
            // validate the fields here
            return [false, "some error text"];
        } else {
            return [true];
        }
    };

$("#grid").jqGrid({
    ...
    colModel: [ 
        ... 
        {name: 'field1', editable: true, ...,
            editrules: {custom: true, custom_func: myCustomCheck}},
        ...
        {name: 'field2', editable: true, ...,
            editrules: {custom: true, custom_func: myCustomCheck}},
        ...
    ]
    ...
}); 
```

您不应该忘记在编辑之前或之后将变量`field1`和`field2`变量重置为值（在或其他回调中）。`undefined``oneditfunc``aftersavefunc`

我在上面的代码中使用了“对称”版本`field1`和`field2`验证，以使代码在字段顺序更改的情况下工作，如果您使用[columnChooser](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:jquery_ui_methods#column_chooser) ，这可能很重要。在这种情况下，您不能确定`field1`在`field2`.

您可以通过使用现有 jqGrid 方法的“子类化”来归档一些附加效果。[以答案](https://stackoverflow.com/a/6162086/315935)为例。

**更新**：[演示](http://www.ok-soft-gmbh.com/jqGrid/2filedsvalidation.htm)更详细地展示了上述验证思想。

# java - Java逻辑测试题

> ID：12398588
> 
> 赞同：2
> 
> 时间：2012-09-13T02:22:21.747
> 
> 标签：java, boolean-logic

我一直在解决一些关于 AP 计算机科学逻辑测试的问题，但我碰巧遇到了一些问题。

以下是来自网站的说明： 将以下每个英语语句翻译成可用于 if/else 语句的逻辑测试。为下面的每个语句编写适当的逻辑测试。假设已经声明了三个 int 变量 x、y 和 z。

这些是我遇到的两个问题：

x 或 y 中的一个是偶数，另一个是奇数。

x 和 z 的符号相反。

几个小时以来，我一直试图找出这些答案，但我仍然没有任何线索。如果有人能引导我朝着正确的方向前进，我将不胜感激。我知道这是“家庭作业”，但一些明确的帮助会非常有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-12-22T10:11:13.810

第一个问题：`x % 2 != y % 2` 第二个问题：`x * z < 0`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T02:31:34.753

您需要使用 and ( `&&`) 和 or ( `||`) 来制作逻辑公式。我不会做你的，但这是另一个：

> x 大于 y 和 z 或 x 小于 y 和 z。

转换为：

```
((x > y) && (x > z)) || ((x < y) && (x < z)) 
```

您只需要找出奇/偶（提示 - 低位）和正/负（提示 - 与 0 比较）的公式，并将它们与和/或结合起来。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-18T10:10:36.413

> x 或 y 中的一个是偶数，另一个是奇数。

奇数和偶数的和是奇数。两个奇数之和为偶数，两个偶数之和为偶数。

所以`(x+y)%2!=0`。

> x 和 z 的符号相反

这个类似，你可以这样做：

```
x*z<0 
```

因为 0 既不是负数也不是正数，并且

*   否定 * 位置 = 否定
*   负 * 负 = 正
*   位置 * 位置 = 位置

如果您想考虑 0 和负数的相反符号，您可以使用`(x >= 0) == (z < 0)`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T02:34:17.053

对于第一个问题，如果 x（或 y）^*为奇数，则 y（或 x）*必须*为偶数，反之亦然。检查奇数值意味着 x 和 2 的模为 1 - 从那里，您必须断言 y（或 x）模 2 是否为 0（以检查均匀性）。

对于第二个问题，您需要遵循如下逻辑链：

*   X 为正数（或大于 0），这意味着 Z 必须为负数（或小于 0）。
*   Z 为正，这意味着 X 必须为负。

^(*：这是一个排他或 - 我的意思是你要么检查 x 要么检查 y，但不能同时检查两者。)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-13T02:36:08.950

首先，您必须完全理解该语句才能将其放入计算机的语言中。例如，

> x 和 y 具有相同的符号

这真正的意思是：

> **(** x*大于等于 0* **且**y*大于等于 0* **)** **或** **(** *x 小于 0* **且** *y 小于 0* **)**

现在很容易将其放入 Java 中：

```
(x >= 0 && y >= 0) || (x < 0 && y < 0) 
```

当然，您的问题也可以通过类似的方法来解决。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-13T02:48:48.443

无论如何，对我来说，用简单的英语说。

```
If ((x is even AND y is odd) OR (x is odd AND y is even)) 
```

对于另一个

```
If ((x gt or eq 0 AND y lt 0) OR (y gt or eq 0 AND x lt 0)) 
```

假设 0 为正。

# php - php如何解释语法$var[] = $val？

> ID：12398590
> 
> 赞同：0
> 
> 时间：2012-09-13T02:22:39.850
> 
> 标签：php, web-applications, syntax

当我发现以下内容时，我正在查看一些继承的 PHP 代码：

```
$emails=array();
foreach($usrs as $usr){
    $emails[]=$usr['email'];
} 
```

很明显，这是试图提取用户列表中每个对象的“电子邮件”属性并将它们保存在一个数组中。这就是我想要它做的。这是这样做的吗？我从来没有见过这样的事情。我把它换成了

```
array_push($emails, $usr['email']); 
```

因为我知道那是我想要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T02:28:44.193

两者差不多，差不多。

就像这样做一样，它将向数组的末尾添加一个项目`array_push`。唯一的区别是`array_push`返回数组中元素的新数量。显然，空括号表示法不返回任何内容。

你应该对这个符号感到满意，它更容易打字和阅读。

[`array_push`在 PHP 文档](http://php.net/manual/en/function.array-push.php)中提到了这种表示法的使用，并且还涵盖了其他两个差异。

> 注意：如果您使用 array_push() 向数组添加一个元素，最好使用 $array[] = 因为这样就没有调用函数的开销。
> 
> 注意：如果第一个参数不是数组，array_push() 将引发警告。这与创建新数组的 $var[] 行为不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T02:29:43.293

当您想将多个元素推送到一个数组时，您可以使用`array_push`.

```
array_push($emails, $var1, $var2, $var3, ...); 
```

否则，如果您只将一个元素推送到数组中，只需使用：

```
$emails[] = $var; 
```

这为您节省了一个函数调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T02:24:28.243

是的，它做同样的事情。分配到`$array[]`相当于将一个元素推到`$array`。

此外，它看起来更漂亮，所以使用它;）

# javascript - 如何在动态创建的节点上绑定函数

> ID：12398593
> 
> 赞同：0
> 
> 时间：2012-09-13T02:23:01.300
> 
> 标签：javascript, jquery

我正在写一个占位符启用功能

```
var t=document.createElement("input");
"placeholder" in t||$("input").each(function(){
   if("submit"!==$(this).attr("type")){
         var n=$(this),l=n.attr("placeholder");
         n.css("color","#ccc").val(l);
         n.focus(function(){("#ccc"==n.css("color")||"rgb(204, 204, 204)"==n.css("color"))&&n.val("").css("color","#000")});
         n.blur(function(){""==n.val()&&n.css("color","#ccc").val(l)})}
}) 
```

我可以在 dom 就绪时调用这个函数，但是如何在新创建的时候使用这个函数`input`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T02:31:14.083

我假设您正在尝试绑定`focus`and`blur`回调？

您可能需要`on()`将事件绑定到*可能尚不*存在的元素。它取代了弃用`live()`和`bind()`函数，旨在将处理程序绑定到*现在或将来的任何事件*。

```
$.on("focus", "input", function() {}); 
```

您需要提供**事件**、**选择器**和**处理程序**。

# objective-c - 使用核心数据实体的子类而不存储在核心数据中

> ID：12398594
> 
> 赞同：0
> 
> 时间：2012-09-13T02:23:26.307
> 
> 标签：objective-c, ios

我有一个名为“Color”的实体，它存储了 R、G、B，以及一个根据需要返回饱和度、UIColor 等的子类。我最近写了一些代码，我需要将 Color 实体作为“Color”类，这样我就可以在它上面调用一个方法。

但似乎打破了另一部分。

在存储颜色之前，我使用 Color 类根据 Color 类中的方法确定要存储的颜色。这是我遇到问题的地方。

```
Color *color = [[Color alloc] initWithColor:[UIColor whiteColor]];
if (color.saturation > 0.2) {
    [self addOrIncrementColor:color];
} 
```

在 if 语句中，调试器显示：

```
color   Color * 0x1f532740
NSManagedObject NSManagedObject 
red CGFloat 0.392157
green   CGFloat 0.443137
blue    CGFloat 0.203922
count   __NSCFNumber *  0x1f559d00
color   UIDeviceRGBColor *  0x200e8f10
saturation  CGFloat 0.539823 
```

但是，如果我打印 Color 对象的描述，我会得到：

```
Color: 0x1f532740 (entity: (null); id: (null) ; data: {}) 
```

当然，这会将颜色对象传递给带有 null 信息的 addOrIncrement: 方法，即使它是在本地设置的。

知道我怎样才能让它工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T04:58:39.733

`NSManagedObject`像使用普通对象那样使用 s 看起来不正常（例如使用通常的`alloc init`. 相反，`NSManagedObject`s 应该使用`NSManagedObjectContext`.

话虽这么说，如果您只想要一个`NSManagedObject`不会保存到 a的临时文件`context`，那么像往常一样创建它们，但是使用 nil `context`：

```
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Color" inManagedObjectContext:managedObjectContext];
Color *color = [[Color alloc] initWithEntity:entity insertIntoManagedObjectContext:nil];
if (color.saturation > 0.2) {
    ...
} 
```

查看[其他帖子](https://stackoverflow.com/questions/3256195/how-to-deal-with-temporary-nsmanagedobject-instances)以供参考。

# python - MySQL VarChar 255 及以上

> ID：12398597
> 
> 赞同：1
> 
> 时间：2012-09-13T02:23:53.733
> 
> 标签：python, mysql, varchar

我目前正在进行屏幕抓取并将其存储到 MySQL 数据库中，我使用了一些列，`answer_content varchar(255) NOT NULL,`但问题是一些数据被截断，我正在阅读以下[博客文章](http://www.pythian.com/news/1353/max-varchar-size/)。

但我不确定这是否是解决方案：在不截断文本的情况下保存文本的最佳解决方案是什么？我不是在服务器端执行此操作，而是在个人笔记本电脑上执行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T02:27:15.450

将类型更改为 TEXT

参考这里： [http ://www.electrictoolbox.com/maximum-length-mysql-text-field-types/](http://www.electrictoolbox.com/maximum-length-mysql-text-field-types/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T02:26:33.697

将列类型更改为[`TEXT`](http://dev.mysql.com/doc/refman/5.0/en/blob.html)。

# c# - 在方法的 for 循环中看不到类中的对象

> ID：12398603
> 
> 赞同：0
> 
> 时间：2012-09-13T02:24:34.460
> 
> 标签：c#, object

我的示例代码：

```
public partial class Service1 : ServiceBase
{
    object a = new object ();

    static void methodA()
    {
        string[] tests = {"test1","test2","test3"}
        foreach(string test in tests)
        {
            a.SetValue(""); //object a cannot be seen
        }
    }
} 
```

无法看到对象。如何在`for`循环中使用对象？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T02:27:12.457

你的方法是`static`。您不能从静态方法访问非静态字段。考虑您的方法（或变量）是否应该是静态的并且

1.  `static`用关键字声明你的变量
2.  从方法声明中删除`static`关键字

这是[静态的（C# 参考）](http://msdn.microsoft.com/library/98f28cdx.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-13T02:26:59.063

对象不是静态的，但方法是静态的。将声明更改为：

```
static Object a = new Object (); 
```

它将可以从您的循环中访问。

您的另一个选择是使方法 not `static`。您选择哪种实际上取决于您想要哪种行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T02:29:43.353

您的方法是静态的，这就是您无法访问该对象的原因。尝试使您的对象也静态。

# joomla2.5 - 将 Joomla 网站包装成 div

> ID：12398604
> 
> 赞同：1
> 
> 时间：2012-09-13T02:24:45.820
> 
> 标签：joomla2.5

关于 joomla 模板，我有一个非常直接的问题。最终结果是：[http ://css3playground.com/flip-card.php](http://css3playground.com/flip-card.php)

从某种意义上说，我想做的很简单，但需要知道在哪里看；我希望将整个页面包含在两个 div 中，所有 PHP 代码，我可以在 css 中定义的类并放入一些 javascrpt 以便我可以将页面转换应用于该 div。除了在哪里做之外，所有这些我都知道怎么做，joomla 的 PHP 结构对我来说是新的。

而且，在第一步完成后，在内容之后创建第二个 div，该内容将动态加载来自模板内页面上单击链接的内容，但这同时是两个问题，哈哈。

第一部分有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T02:40:16.493

如果您只想使用 div 来包含整个模板，请执行以下操作：将模板包装在 div 中并为其提供自定义类或 id：

```
<html>
    <head>
        //stuff here
    </head>

    <body>
        //insert the wrapper here
        <div id="wrapper">
            //template structure here
        </div>
    </body>
</html> 
```

您要编辑的文件可能会命名为`index.php`位于`public_html/templates/your_template/index.php`.

对于某些模板，例如 Yootheme 的模板，您将希望在`public_html/templates/your_template/layouts/template.php`（或者`/public_html/templates/your_template/styles/current_profile/layouts/template.php`如果您使用的配置文件不是默认配置文件）编辑文件。

# c# - jQuery Accordion + ASP:MultiView

> ID：12398607
> 
> 赞同：0
> 
> 时间：2012-09-13T02:25:30.250
> 
> 标签：c#, jquery, jquery-ui

我的问题与此处提出的问题相似，但那里的解决方案不够简单，我无法理解/请求更多详细说明和/或代码示例：

[ASP.Net MultiView 和 JQuery 手风琴](https://stackoverflow.com/questions/8908865/asp-net-multiview-jquery-accordion)

我有一个在 base.aspx 上初始化的 jQuery UI 手风琴

```
<script type="text/javascript">
        $(document).ready(function () {
            var icons = {
                header: "ui-icon-circle-arrow-e",
                headerSelected: "ui-icon-circle-arrow-s"
            };

            $("#accordion1").accordion({
                autoHeight: false,
                icons: icons,
                event: "mouseover"
            });
        });
    </script> 
```

然后在我的手风琴 DIV 中，我调用了几个用户控件，每个手风琴部分一个：

```
<div id="accordion1">
        <DT:TrainerCost ID="dtTrainerCost" runat="server" Visible="false" />
        <DT:TrainerAvailability ID="dtTrainerAvailability" runat="server" Visible="false" />
        <DT:ProfessionalInfo ID="dtProfessionalInfo" runat="server" />
</div> 
```

这些控件中有一个 ASP:MultiView，有两个索引 0 和 1。它们默认为 0。Index0 中有一个按钮，如果单击该按钮，将启动 View1。

当我显示默认 Index0 （在页面加载时）时，手风琴的一切都很好。但是在单击触发 View1 的按钮时，我失去了 jQuery 手风琴功能......根据另一篇文章，当多视图切换时，似乎 jQuery 绑定被破坏了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T23:36:17.163

几天后，我能够解决我的问题。这两篇文章给出了它：

[https://siderite.dev/blog/including-external-javascript-on-async.html](https://siderite.dev/blog/including-external-javascript-on-async.html)

[http://forums.asp.net/t/1348484.aspx/1/10?error+in+MicrosoftAjax+js+Cannot+read+property+_notified+of+null](http://forums.asp.net/t/1348484.aspx/1/10?error+in+MicrosoftAjax+js+Cannot+read+property+_notified+of+null)

底线是 ASP.Net AJAX 的浏览器问题。

# c# - 如何将 nopcommerce 页面标题更改为我的一个网站名称？

> ID：12398611
> 
> 赞同：1
> 
> 时间：2012-09-13T02:26:04.507
> 
> 标签：c#, asp.net-mvc, nopcommerce

我想将 nopcommerce 网站页面标题中的每一页更改为我的一个网站名称。

我该怎么做？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T03:13:06.743

在管理菜单中尝试

配置 -> 全局设置 -> 商店名称

在 2.6 及更高版本中：

配置 -> 设置 -> 常规和其他

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-23T10:11:26.843

从“您的商店”更改标题：

*   以管理员身份登录
*   转到配置->设置->常规和其他设置
*   单击选项卡 SEO 设置
*   更改默认标题

# c# - 正则表达式来发现字符

> ID：12398616
> 
> 赞同：0
> 
> 时间：2012-09-13T02:26:49.453
> 
> 标签：c#, regex

请告知如何获取下面的正则表达式：我想将“.abc_”前面的单词更改为 john。前面的单词可以是任意字符。

```
 material.abc_Inventory    = john.abc_Inventory  
 abx.abc_abxx              = john.abc_abxx  
 stackoverflow.abc_stack   = john.abc_stack 
```

如果它有很长的修复字符但不是这个随机单词，我可以更改。请指教

------- 在下面编辑 ------
错过下面的要求。以下解决方案中建议的正则表达式突出显示了关键字之前的所有文本，包括我不想要的“插入”。

```
insert into material.abc_Inventory   = insert into john.abc_Inventory  
insert into material.ABC_Inventory   = insert into john.ABC_Inventory 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T02:38:42.297

您可以在没有正则表达式的情况下执行此操作，应该更简单更快：

```
var str = "material.abc_Inventory";

str = "john" + str.Substring(str.IndexOf(".abc_"));

// str == "john.abc_Inventory" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T02:32:23.060

尝试这个：

```
Console.WriteLine(Regex.Replace("material.abc_Inventory", "^[^.]*[.]abc_", "john.abc_")); 
```

这个表达式不允许前面的字符串`.abc_`包含一个点。如果您想允许使用点，请`"^.*?\[.\]abc_"`改用（[ideone link](http://ideone.com/hfTAb)）。

**编辑：**如果您必须避免使用空格，请使用不同的表达式（[ideone link](http://ideone.com/wBJPr)）：

```
Console.WriteLine(Regex.Replace("material.abc_Inventory", "^[^. ]*[.]abc_", "john.abc_")); 
```

现在关键字前面的连续字符列表也排除了空格。

# java - 安卓编程；得到一个小错误

> ID：12398622
> 
> 赞同：1
> 
> 时间：2012-09-13T02:27:30.527
> 
> 标签：java, android

我正在开发一个 Android 应用程序，我正在使用 .setAdapter 命令，并且在它下面出现了红色曲线。Eclipse 告诉我这一点。“ViewPager 类型中的方法 setAdapter(PagerAdapter) 不适用于参数 (Upperbody.MyPagerAdapter)”

具体就在这里；

```
myPager.setAdapter(adapter); 
```

这是我的代码；

```
package com.example.gymbuddy; 

import android.app.Activity; 
import android.content.Context; 
import android.os.Bundle; 
import android.os.Parcelable; 
import android.support.v4.view.ViewPager; 
import android.view.LayoutInflater; 
import android.view.View; 

public class Upperbody extends Activity { 

   @Override 
   public void onCreate(Bundle savedInstanceState) { 
   super.onCreate(savedInstanceState); 
   setContentView(R.layout.activity_upperbody); 

   MyPagerAdapter adapter = new MyPagerAdapter(); 
   ViewPager myPager = (ViewPager) findViewById(R.id.myfivepanelpager); 
   myPager.setAdapter(adapter); 
   myPager.setCurrentItem(2); } 

   public class MyPagerAdapter extends Activity { 

    public int getCount() { 
        return 9; 
    } 

    public Object instantiateItem(View collection, int position) { 

        LayoutInflater inflater = (LayoutInflater) collection.getContext() 
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE); 

        int resId = 0; 
        switch (position) { 
        case 0: 
            resId = R.layout.upper0; 
            break; 
        case 1: 
            resId = R.layout.upper1; 
            break; 
        case 2: 
            resId = R.layout.upper2; 
            break; 
        case 3: 
            resId = R.layout.upper3; 
            break; 
        case 4: 
            resId = R.layout.upper4; 
            break; 
        case 5: 
           resId = R.layout.upper5; 
           break; 
        case 6: 
           resId = R.layout.upper6; 
           break; 
        case 7: 
           resId = R.layout.upper7; 
           break; 
        case 8: 
           resId = R.layout.upper8; 
           break; } 

        View view = inflater.inflate(resId, null); 

        ((ViewPager) collection).addView(view, 0); 

        return view; } 

    public void destroyItem(View arg0, int arg1, Object arg2) { 
        ((ViewPager) arg0).removeView((View) arg2); } 

    public boolean isViewFromObject(View arg0, Object arg1) { 
        return arg0 == ((View) arg1); } 

    public Parcelable saveState() { 
        return null; } 

   } 

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T02:33:56.963

我认为您的问题只是您没有使 MyPageAdapter 扩展 PageAdapter。相反，它正在扩展 Activity。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T08:29:02.337

`MyPagerAdapter`不应该实现`PagerAdapter`一个活动。

请检查此[链接](http://mobile.tutsplus.com/tutorials/android/android-user-interface-design-horizontal-view-paging/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T02:39:23.463

您的 MyPagerAdapter 需要是 PagerAdapter 的子类，而不是活动。

改变

```
public class MyPagerAdapter extends Activity { 
```

到

```
public class MyPagerAdapter extends PagerAdapter { 
```

# mongodb - mongodb $exists 总是返回 0

> ID：12398625
> 
> 赞同：7
> 
> 时间：2012-09-13T02:27:52.307
> 
> 标签：mongodb, pymongo

我有一个数据库集合（名为 fols），如下所示：

```
{'followers':
        {
           '123':1
           '123':2
           '123':3
         }
} 
```

如果我运行查询（使用 pymongo）：

```
cursor = fols.find()
cursor.count()
>>3 
```

工作正常。现在：

```
cursor = fols.find({'followers':{'123':1}})
cursor.count()
>>1 
```

再次工作正常。但如果我尝试：

```
cursor = fols.find({'followers':{'123':{'$exists': True}}})
cursor.count()
>> 0 
```

即使有 3 条记录，它也会返回 0。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-13T02:43:25.630

当您不匹配完整的对象时，您需要使用[点表示法](http://docs.mongodb.org/manual/core/document/#dot-notation)来对嵌入对象使用运算符。所以在这种情况下：

```
cursor = fols.find({'followers.123':{'$exists': True}}) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-13T02:44:36.223

尝试点语法：

```
cursor = fols.find({'followers.123': {'$exists': True}}) 
```

但也请参阅我上面的评论。您不能在（子）文档中多次使用相同的密钥。

# django - 在 Django 模板中访问 RequestContext？

> ID：12398626
> 
> 赞同：3
> 
> 时间：2012-09-13T02:27:52.797
> 
> 标签：django, django-templates, django-generic-views, django-context

我似乎无权访问我的 django 模板中的请求对象。

这是我的 settings.py 文件的一部分：

```
import django.conf.global_settings as DEFAULT_SETTINGS
TEMPLATE_CONTEXT_PROCESSOR = DEFAULT_SETTINGS.TEMPLATE_CONTEXT_PROCESSORS + (
    'django.core.context_processors.request',
) 
```

网址.py

```
urlpatterns = patterns('',
    url(r'^event/create/$', EventCreateView.as_view(), name='create_event'),
    url(r'^event/update/(?P<pk>\d+)/$', EventUpdateView.as_view(), name='update_event'),
    url(r'^event/delete/(?P<pk>\d+)/$', EventDeleteView.as_view(), name='delete_event'),
) 
```

视图.py

```
from django.views.generic import CreateView, UpdateView, DeleteView
from events.models import Event
from events.forms import EventForm

class EventCreateView(CreateView):
    model = Event
    form_class = EventForm

class EventUpdateView(UpdateView):
    model = Event
    form_class = EventForm

class EventDeleteView(DeleteView):
    model = Event 
```

表格.py

```
from django.forms import ModelForm
from events.models import Event

class EventForm(ModelForm):
    class Meta:
        model = Event 
```

event_form.html（用于 CreateView/UpdateView）

```
{% block content %}
    <form action='{{ request.get_full_path }}' method='post'>
        {% csrf_token %}
        <table>
            {{ form.as_table }}
        </table>
        <input type='submit' value='Create event!' />
    </form>
{% endblock %} 
```

上面， request.session 似乎什么也没做。我试过查看文档和类似的问题，但似乎没有任何效果。有任何想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T08:30:26.450

您有错字，TEMPLATE_CONTEXT_PROCESSORS 末尾缺少“S”，也许只是在您的问题中？设置应该是：

```
TEMPLATE_CONTEXT_PROCESSORS = ("django.contrib.auth.context_processors.auth",
 "django.core.context_processors.debug",
 "django.core.context_processors.i18n",
 "django.core.context_processors.media",
 "django.core.context_processors.static",
 "django.core.context_processors.tz",
 "django.contrib.messages.context_processors.messages",
 "django.core.context_processors.request",) 
```

，不是`TEMPLATE_CONTEXT_PROCESSOR = ...`。我更喜欢完全覆盖该设置，以便清楚什么是活动的（例如，您可能希望在生产中禁用调试）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T02:32:01.973

你使用 Django 的 Session 框架吗？那么是的，`request.session`什么都不做，因为会话是一个类似字典的对象，而模板引擎不知道如何呈现它。

# sql - 根据日期选择汇率

> ID：12398628
> 
> 赞同：2
> 
> 时间：2012-09-13T02:28:02.013
> 
> 标签：sql, postgresql, case

我正在尝试根据正在搜索的星期几从表中选择 2 个费率列中的 1 个。我正在尝试对这个查询使用两个表：一个日历表（表名=日历，列名=caldates），它是一个严格的日期列表，其中每一行都是 2012 年 6 月 30 日到 2014 年 5 月 31 日之间的日期. 我还有另一个表（表名=rates），它有 4 列：start_date、end_date、weekday_rate 和weekend_rate。

```
Start_date      end_date     weekday_rate     weekend_rate
"2012-05-01"  "2012-06-30"        69              150
"2012-07-01"  "2012-08-31"        74              200
"2012-09-01"  "2012-11-14"        75              210
"2012-11-15"  "2013-01-31"        90              150 
```

执行查询时，系统需要查找正确率。现在我的查询看起来像这样：

```
SELECT  
    CASE cast(extract(dow from caldates) as int)
    WHEN '0'  then (select weekday_rate from rates)
    WHEN '1'  then (select weekday_rate from rates)
    WHEN '2'  then (select weekday_rate from rates)
    WHEN '3'  then (select weekday_rate from rates)
    WHEN '4'  then (select weekday_rate from rates)
    WHEN '5'  then (select weekend_rate from rates)
    When '6'  then (select weekend_rate from rates)
    End AS the_date_rate
FROM calendar WHERE caldates >= '2012-08-30' and  caldates <=  '2012-09-04' ; 
```

当我运行查询时，我收到错误“错误：用作表达式的子查询返回的不止一行。”

我希望输出显示日期范围以及与日期相关的比率。上面的例子看起来像

```
caldates        the_date_rate
2012-08-30           74
2012-08-31           200
2012-09-01           210
2012-09-02           75
2012-09-03           75
2012-09-04           75 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T05:09:25.927

这可以大大简化。

```
SELECT d.day
      ,CASE WHEN extract(isodow from d.day) < 6
         THEN weekday_rate
         ELSE weekend_rate
       END AS rate
FROM  (SELECT generate_series('2012-06-30'::date
                             ,'2014-05-31'::date, '1d'::interval)::date AS day
      ) d
LEFT   JOIN rates r ON d.day BETWEEN r.start_date AND r.end_date
ORDER  BY d.day 
```

### 要点

*   在 PostgreSQL 中，您不需要一个`calendar`表来记录一系列无间隔的日期。改用[`generate_series()`](http://www.postgresql.org/docs/current/interactive/functions-srf.html)类似演示的。

*   您需要加入`rates`表。当前接受的答案根本不起作用。

*   我使用`LEFT JOIN`，所以没有匹配率的一天仍然会在结果中使用`NULL`as 率。

*   当前接受的答案将星期日视为工作日，将星期五视为周末。我不认为这是预期的。
    该`CASE`语句也可以简单得多，只需使用[`extract(isodow FROM source)`](http://www.postgresql.org/docs/current/interactive/functions-datetime.html#FUNCTIONS-DATETIME-EXTRACT).

*   您不必将结果转换为`extract()`to `integer`。我们比较的文字会`double precision`自动转换为匹配的类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T02:30:30.047

这就足够了（也看看你是否真的需要在 when 子句之后的日期值周围加上引号）：

```
SELECT  
    CASE 
        WHEN cast(extract(dow from caldates) as int) < 6  then weekday_rate
        ELSE weekend_rate
    End AS the_date_rate
FROM 
    calendar 
WHERE 
    caldates >= '2012-08-30' and  caldates <=  '2012-09-04' ; 
```

# c++ - boost asio::async_write() 耗时太长

> ID：12398631
> 
> 赞同：-1
> 
> 时间：2012-09-13T02:28:36.230
> 
> 标签：c++, networking, boost-asio

> **可能重复：**
> [boost::async_write 耗时太长](https://stackoverflow.com/questions/12395569/boostasync-write-takes-too-long)

在我的服务器应用程序中，我在一次读取中运行 asio 服务来处理大约 100 个连接。我发现 async_write() 有时需要很长时间，大约 15 毫秒。（数据包非常小）

我的问题是为什么 async_write() 需要这么长时间？我认为 async_write() 应该立即返回。这么慢是很难发送很多数据的。我的意思是，函数不会立即返回。我不是说发送不会立即完成。15ms 对于同步函数来说太长了。并且该应用程序确实被阻止了。（不关心 GetTickCount ）

测试代码如下：

```
uint64_t TStart = 0, TEnd = 0;
TStart = GetTickCount();

async_write(*this->m_Socket,
    boost::asio::buffer(pSendData->m_buf.GetBuffer(), pSendData->m_buf.GetSize()),
    boost::bind(&SttSocketConnection::OnSended, this,
    pSendData, placeholders::error, placeholders::bytes_transferred));

TEnd = GetTickCount();
if (TEnd - TStart > 1) {
    __asm int 3;
    TStart = TEnd;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T05:13:02.057

听起来您正在某处进行上下文切换。15ms 是多处理器 Windows 机器上的调度量。

如果它并不总是经常发生，请不要担心，您只是在进行系统调用时被上下文切换所击中。

如果每次调用都有问题，则应该跟踪系统调用，找出导致上下文切换的原因。我在使用 IO 完成端口、串行端口和小超时时遇到了类似的问题，其中一些系统调用总是以 15 毫秒的延迟结束。为了修复它，我不得不重组代码，以便异步操作的完成不涉及计时器。

我不知道究竟是什么导致了 asio 的这个问题。您应该跟踪系统调用并找出导致延迟的系统调用。

# javascript - 包含括号的 JavaScript 正则表达式模式

> ID：12398640
> 
> 赞同：2
> 
> 时间：2012-09-13T02:29:50.670
> 
> 标签：javascript, regex, less

使用 JavaScript，我需要检查给定模式的第一个实例的字符串，并在该模式之后（包括该模式）返回所有内容。有关典型字符串、模式和所需结果，请参见下面的示例。

我遇到的主要问题是该模式几乎肯定会包含特殊字符，例如括号。我无法手动更改模式以转义这些特殊字符。除非我能够先使用它`replace`吗？

例如`result = string.match(pattern.replace`（特殊转义））

我不确定这样的事情是否可行。正则表达式总是让我头疼，我将不胜感激任何正确或替代方向的指示。

**背景**

我正在尝试为 LESS 做一些复杂的混合。所以我通过使用反引号转义来限制单行 JavaScript。有关在 LESS 中使用 JavaSCript 的信息，请参阅[此处。](http://lesscss.org/#-javascript-evaluation)我希望使用新的可变参数支持来获得多个颜色停止。例如。`radial-gradient(@shape, @position, @colorStops...)`然而，LESS 只为您提供使用@arguments 时传递的全部参数。所以我希望使用正则表达式将@arguments 用于字符串，@colorStop 用于模式，并在第一个颜色停止之后返回所有内容，包括第一个颜色停止。使用 @colorStop 时，LESS 返回第一个颜色停止变量。一般概念取自[这里](http://www.toekneestuck.com/blog/2012/05/15/less-css-arguments-variable/)）

**例如：**

> 字符串：圆 0% 50% rgba(96, 16, 48, 0) 9px #661133 10px rgba(96, 16, 48, 0) 11px
> 
> 图案：rgba(96, 16, 48, 0) 9px
> 
> 结果：rgba(96, 16, 48, 0) 9px #661133 10px rgba(96, 16, 48, 0) 11px

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T04:42:55.953

> *“我无法手动更改模式以转义这些特殊字符。除非我能够先使用 .replace 来做到这一点？”*

是的你可以。给定一个变量`pattern`，它是一个包含正则表达式模式的*字符串*，然后：

```
pattern = pattern.replace(/[-/\\^$*+?.()|[\]{}]/g, '\\$&'); 
```

...将转义所有在正则表达式中具有特殊含义的字符，并将结果放回同一个变量中。当然，只有当您的模式中的每个字符都被视为要匹配的文字字符时才有效。

> *“我需要检查给定模式的第一个实例的字符串，并在模式之后返回所有内容，包括模式”*

我只是附加`.*`到模式的末尾，所以它将匹配指定的位，后跟所有以下字符。也就是说，如果一个正则表达式`/abc/`匹配第一个实例，`"abc"`那么该正则表达式`/abc.*/`将匹配`"abc"`加上后面的每个字符。（在正则表达式中，`.`匹配任何字符，并且`*`匹配前一位零次或多次，默认情况下进行“贪婪”匹配。）

把它放在一起：

```
function matchToEnd(pattern, str) {
    var re = new RegExp(pattern.replace(/[-/\\^$*+?.()|[\]{}]/g, '\\$&') + ".*"),
        result = str.match(re);
    if (result)
       return result[0];
    else {
       // didn't match, return default value of your choice, e.g.:
       return null;
    }
}

var result = matchToEnd("rgba(96, 16, 48, 0) 9px",
                        "rgba(96, 16, 48, 0) 9px #661133 10px rgba(96, 16, 48, 0) 11px"); 
```

演示：http: [//jsfiddle.net/JVdnz/](http://jsfiddle.net/JVdnz/)

请注意，尽管回到我之前必须做出的假设，即您的正则表达式模式不包含任何在正则表达式中具有特殊含义的字符，如果是这种情况，那么您不需要正则表达式来执行此任务，您可以只需将该[`.indexOf()`方法与该](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/indexOf)[`.substr()`方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/substr)结合使用：

```
var i = str.indexOf(pattern);  // find index of first instance of pattern
if (i != -1)
   return str.substr(i);       // return from that index to end of string 
```

这是一个类似于以前的演示但`.indexOf()`不是正则表达式的演示：http: [//jsfiddle.net/JVdnz/1/](http://jsfiddle.net/JVdnz/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T02:33:33.937

如果您的模式不需要使用任何正则表达式功能，并且如果您只需要替换第一次出现的情况，那么您可以将字符串作为模式传递给 replace 方法。

否则（如果您需要正则表达式功能或需要替换所有出现的模式），那么您可以[创建一个函数来转义](https://stackoverflow.com/questions/3561493/is-there-a-regexp-escape-function-in-javascript/3561711#3561711)字符串中的特殊字符并动态生成一个正则表达式对象。

# zend-framework - Zend 框架：更新查询

> ID：12398641
> 
> 赞同：0
> 
> 时间：2012-09-13T02:29:51.337
> 
> 标签：zend-framework

那是我的更新功能：

```
$id = 5; $points = 100;

public function update($id, $points) {
    $this->update(array('points = ?' => new Zend_DB_Expr('points + 1')), array('id = ?' => $id));
} 
```

但是，当我调用此函数时，会发生错误：

> **SQLSTATE[HY093]：参数号无效：没有绑定参数

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T06:17:31.833

应该是

```
$this->update (array (
    'points' => new Zend_DB_Expr ('points + 1') 
), array (
    'id = ?' => $id 
)); 
```

# forms - 在 IE8 中选择复选框时无法使用图像

> ID：12398649
> 
> 赞同：0
> 
> 时间：2012-09-13T02:31:25.267
> 
> 标签：forms, internet-explorer, checkbox, internet-explorer-8

当我单击标签内的图像以选择/取消选择复选框时，它会在 Firefox 和 Chrome 中相应地更改其状态。但是，在 IE8 中，如果我单击图像，复选框永远不会响应，并且只会在我单击文本时更改其状态。

jsFiddle在这里（点击IE中文字前的白框图片）：

[http://jsfiddle.net/dzTMD/3/](http://jsfiddle.net/dzTMD/3/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T06:29:52.653

我不确定 IE8 中的问题是什么，但是您可以在 css 中使用背景图像，而不是直接在 html 中附加它，这将在 IE 中工作。[这](http://jsfiddle.net/kKVPj/1/)是摆弄示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-17T12:23:42.390

将输入字段放在标签标签示例中：

```
<label>
    <input name="yn00" id="yn00_1" type="checkbox">
    <div class="indicator"></div>
    <span>My text for this label</span>
 </label> 
```

所有元素都将在标签内工作，你的 img 也是如此.. 只需记住使用 opacity 隐藏输入字段。IE8 不会在 display:none 或 visibility:hidden 元素上触发事件

# cakephp-1.3 - 在 CakePHP 1.3 中处理非约定表名

> ID：12398653
> 
> 赞同：1
> 
> 时间：2012-09-13T02:32:02.760
> 
> 标签：cakephp-1.3

我的桌子：

```
CREATE TABLE CS_GRPUSU (
    GRPUSU  NUMERIC(3,0) NOT NULL,
    DESGRP  VARCHAR(20)
);
ALTER TABLE CS_GRPUSU ADD PRIMARY KEY (GRPUSU); 
```

应该如何构造我的控制器和模型（文件名和基本内容）？有人可以给我例子吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T07:32:40.437

您的模型类应定义为：

模型：

```
class Example extends AppModel {
     public $useTable = 'CS_GRPUSU'; // This model uses table 'CS_GRPUSU'
     public $primaryKey = 'GRPUSU'; //for cakephp 1.3 use 'var' instead of 'public'
} 
```

控制器：

```
class Test exptends AppController{
    public $uses = array('Example');

    public function add(){
        //your code
    }
} 
```

如果您使用的是 cakephp 1.3，请用 var 替换 public 关键字

喜欢

```
var $uses = array('Example');//cakephp 1.3
public $uses = array('Example'); //cakephp 2 and above 
```

# .net - 实体框架 ObjectContext 在 SaveChanges 之前删除实体

> ID：12398657
> 
> 赞同：1
> 
> 时间：2012-09-13T02:32:42.123
> 
> 标签：.net, entity-framework, objectcontext

我有一个 Person 表，其中有一个可以为空的 AddressId，它是外键到 Address 表的。所以零..一对多。

使用 EF 和 ObjectContext 我可以调用 person.Address 来访问一个人的 Address 对象。整洁的！

看看这个相当简单的代码，然后我会告诉你我的问题：

```
var _db = new DataContext();
Person person = _db.getThatOneGuy();

//some changes are done to the person object
person.FirstName = "Harry";

//If there's no address I want to make one
if(person.Address == null)
person.Address = new Address();

person.Address.StreetOne = "blah";
person.Address.StreetTwo = "blah";

//I decide I don't actually want this new address
person.Address = null;

_db.SaveChanges(); 
```

对 SaveChanges() 的调用仍将生成一个 sql UPDATE (firstname = 'Harry')，这很好，但它也会生成一个 sql INSERT 语句，试图添加该新地址（等等，等等）。（我知道是因为我在 sql profiler 中检查了生成的 SQL）它出错是因为我有像 StateId 这样不可为空的字段，但我什至不希望它尝试添加该地址（我试图阻止它是通过使它空）请帮助我。

注意：我之前在集合（多对多关系）方面取得了成功，我可以在其中执行 person.Addresses.Add(addressObj) 然后 person.Addresses.Remove(addressObj) 并且 ObjectContext 知道不进行插入......只是不知道如何处理这种 0..1 到多个地址的情况。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T08:56:48.107

问题在于将`Address`属性设置为 null 不会`Address`从上下文中删除实例。它只通知上下文`Person`实例和`Address`实例之间没有关系。您仍然必须`Address`从上下文中删除实例。试试这个：

```
_db.Detach(person.Address);
_db.SaveChanges(); 
```

或者：

```
var address = person.Address; 
person.Address = null;
_db.Detach(address);
_db.SaveChanges(); 
```

# python - 运行函数时无限循环重置

> ID：12398660
> 
> 赞同：-1
> 
> 时间：2012-09-13T02:33:03.657
> 
> 标签：python

我只是想知道是否可以为文本游戏中的帮助功能删除一些冗余。我现在拥有的是在每个函数提示 = 0 的开头，每次输入无效答案时提示都会增加一个。

这是我目前拥有的（在每个函数中）：

```
hint = 0
    valid = False
    while valid == False:

        print "Would you like to begin?"

        begin = raw_input("> ")

        if "yes" in begin:
            valid = True
            print "Great!\n"
            start.start()
        elif "no" in begin:
            quit.quit()
        else:
            error.error(1)
            hint += 1

        if hint > 4:
            print "\nYou may choose from \"yes\" and \"no\"." 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T03:04:28.890

```
from itertools import count
for hint in count()
    print "Would you like to begin?"

    begin = raw_input("> ")

    if "yes" in begin:
        print "Great!\n"
        start.start()
        break

    elif "no" in begin:
        quit.quit()
    else:
        error.error(1)

    if hint > 4:
        print "\nYou may choose from \"yes\" and \"no\"." 
```

现在下一个问题是`start.start()`做什么？看起来/感觉您可能正在使用 GOTO 之类的函数调用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T03:39:12.353

以下代码使用装饰器将提示逻辑和命令逻辑分开。每个命令都由一个可以由 Hint 对象修饰的函数处理。

当函数返回 False 时，Hint 对象中的计数会增加，当它大于限制时，它会打印出一条提示消息。

当函数返回一个元组时，它将被主循环调用。

```
class Hint(object):
    def __init__(self, n, msg):
        self.n = n
        self.msg = msg

    def __call__(self, f):
        def wrap(*args, **kw):
            count = 1
            while True:
                ret = f(*args, **kw)
                if ret == False:
                    count += 1
                    if count > self.n:
                        print self.msg
                        count = 0
                else:
                    break
            return ret
        return wrap

def start_at(place):
    print "start at %d" % place
    return "start"

@Hint(3, "You may choose from 1, 2, 3.")
def start():
    print "What place will you start?"
    cmd = raw_input("> ")
    try:
        place = int(cmd)
        if place not in (1,2,3):
            return False
        else:
            return start_at, (place,)
    except ValueError:
        return False

def quit():
    print "I will quit"
    return "quit"

@Hint(4, "You may choose from yes and no.")
def begin():
    print "Would you like to begin?"
    cmd = raw_input("> ")
    if "yes" in cmd:
        print "Great!\n"
        return start, ()
    elif "no" in cmd:
        print "Bad!\n"
        return quit, ()
    else:
        return False

call_func, args = begin, ()
while True:        
    ret = call_func(*args)
    if isinstance(ret, tuple):
        call_func, args = ret
    else:
        break 
```

这是一些测试：

```
Would you like to begin?
> abc
Would you like to begin?
> def
Would you like to begin?
> 123
Would you like to begin?
> 345
You may choose from yes and no.
Would you like to begin?
> yes
Great!

What place will you start?
> 5
What place will you start?
> fg
What place will you start?
> sd
You may choose from 1, 2, 3.
What place will you start?
> 2
start at 2 
```

# jquery - jQuery - 无法弹出对话框弹出窗口，而是出现在页面上

> ID：12398661
> 
> 赞同：0
> 
> 时间：2012-09-13T02:33:19.837
> 
> 标签：jquery

我有几个小 div，当发生某些事情时我试图弹出它们，但它们没有弹出，而是出现在页面的内容中。

有人知道为什么会这样吗？此外，jQuery 应该显示一个微调器 gif 以指示您应该等待，但它也不会呈现。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T02:54:44.863

看起来您的意图是使用 jQuery UI 对话框，并且 jQuery UI 的 google 托管 CDN 的路径错误，它没有加载 jQuery UI 库，无法在 [https://ajax上加载脚本.googleapis.co/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js](https://ajax.googleapis.co/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js)

我确实认为这是一个错字，缺少 'm' off com，所以应该是 [https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js](https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js)

编辑

如果您希望 jQuery 对话框最初被隐藏，然后在用户操作（如按钮单击）上显示，那么首先构造对话框，并将 autoOpen 设置为 false - 因此

```
$("#loginpopup").dialog({ autoOpen: false} ) 
```

然后在需要时，可以通过

```
$("#loginpopup").dialog('open') 
```

看来您正在调用标准的 jQuery .show 方法，即

```
$("#loginpopup").show() 
```

而这一切所做的就是将 display: none 更改为 display: block，所以如果元素不是绝对定位的（或者以某种方式设置为在您想要的位置显示它），那么它只会出现在正常流程中通常会出现的位置页面的

希望有帮助？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T02:36:28.910

抛出 HTML 会有所帮助，但我怀疑你需要设置

```
position:absolute 
```

在你的 div 标签上。

我需要看看你在用微调器 gif 做什么才能在那里提供帮助。

# png - 带有 Splash.png 的 install4j 错误不是有效的图像文件

> ID：12398665
> 
> 赞同：2
> 
> 时间：2012-09-13T02:33:53.303
> 
> 标签：png, install4j

我看到了一个关于这个问题的帖子，作者已经解决了我编辑 png 启动文件的问题。但是，在我的情况下，我没有对 png 文件进行任何更改，但是，我在 install4j 中遇到了这个错误。如果有人解决了这个问题，请帮忙。

```
[install4j] java.lang.IndexOutOfBoundsException
[install4j]     at java.io.RandomAccessFile.writeBytes(Native Method)
[install4j]     at java.io.RandomAccessFile.write(Unknown Source)
[install4j]     at javax.imageio.stream.FileImageOutputStream.write(Unknown Source)
[install4j]     at com.sun.media.imageioimpl.plugins.bmp.BMPImageWriter.write(BMPImageWriter.java:513)
[install4j]     at javax.imageio.ImageWriter.write(Unknown Source)
[install4j]     at javax.imageio.ImageIO.write(Unknown Source)
[install4j]     at javax.imageio.ImageIO.write(Unknown Source)
[install4j]     at com.A.B.D.W(ejt:2330)
[install4j]     at com.A.B.D.Q(ejt:2859)
[install4j]     at com.A.B.D.L(ejt:1319)
[install4j]     at com.A.B.D.N(ejt:463)
[install4j]     at com.A.B.D.d(ejt:555)
[install4j]     at com.install4j.C.D.F.B(ejt:833)
[install4j]     at com.install4j.C.D.B.R(ejt:629)
[install4j]     at com.install4j.C.D.I(ejt:3315)
[install4j]     at com.install4j.C.D.C(ejt:776)
[install4j]     at com.install4j.C.A.A(ejt:1596)
[install4j]     at com.install4j.C.B.¦(ejt:1736)
[install4j]     at com.install4j.C.B.+(ejt:3290)
[install4j]     at com.install4j.C.B.I(ejt:659)
[install4j]     at com.install4j.Install4JApplication.?(ejt:3031)
[install4j]     at com.A.L.?(ejt:2517)
[install4j]     at com.install4j.Install4JApplication.main(ejt:3481)
[install4j]     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
[install4j]     at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
[install4j]     at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
[install4j]     at java.lang.reflect.Method.invoke(Unknown Source)
[install4j]     at com.exe4j.runtime.LauncherEngine.launch(Unknown Source)
[install4j]     at com.exe4j.runtime.WinLauncher.main(Unknown Source)
[install4j] install4j: compilation failed. Reason: com.A.B.E: com.A.B.E: File Splash.png is not a valid image file. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T08:02:17.890

到 4.2.7 版为止，install4j 包含一个 JAR 文件

```
[install4j installation directory]/lib/jai-imageio.jar 
```

这个 JAR 文件包含一个古老的 javax.imageio 实现，并且是该 API 不是 JRE 的一部分（Java 1.3 之前）的遗留物。

只需删除该 JAR 文件，问题很可能就会消失。

# clojure - defmacro 生成另一个 defmacro

> ID：12398669
> 
> 赞同：1
> 
> 时间：2012-09-13T02:34:24.673
> 
> 标签：clojure, macros

我遇到了这个问题......我有两个看起来非常相似的宏

```
(import java.lang.management.ManagementFactory)

(defmacro with-thread-manager [tm & body]
  {:pre [(and (vector? tm) (= 1 (count tm)))]}
  `(let [~(first tm) (ManagementFactory/getThreadMXBean)]
     ~@body))

(defmacro with-os-manager [tm & body]
  {:pre [(and (vector? tm) (= 1 (count tm)))]}
  `(let [~(first tm) (ManagementFactory/getOperatingSystemMXBean)]
     ~@body)) 
```

它们的用法如下：

```
(defn thread-count []
  (with-thread-manager [tm] (.getThreadCount tm)))

(thread-count)
;; => 12

(defn application-cpu-time []
  (with-os-manager [osm] (.getProcessCpuTime osm)))

(application-cpu-time)
;; => 71260000000 
```

我希望将两者概括`with-*-manager`为另一个宏，以便可以像这样简化它们：

```
(defmanagementblock with-thread-manager (ManagementFactory/getThreadMXBean))
(defmanagementblock with-os-manager (ManagementFactory/getOperatingSystemMXBean)) 
```

* * *

所以我知道的最简单的方法是稍微改变一下宏

```
(defmacro with-thread-manager [tm & body]
  {:pre [(and (vector? tm) (= 1 (count tm)))]}
  (apply list 'let [(first tm) '(ManagementFactory/getThreadMXBean)]
      body)) 
```

并编写块：

```
(defmacro defmanageblock [name MANAGER]
  (list 'defmacro name '[tm & body]
    '{:pre [(and (vector? tm) (= 1 (count tm)))]}
    (list 'apply 'list ''let (vector '(first tm) 'MANAGER)
          'body))) 
```

一切顺利，除了经理没有正确报价。我尝试了一堆引用和取消引用选项`'`，例如 ``~'`以及它的许多其他变体。但它没有给出正确的值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T03:07:23.833

如果您将 defmanageblock 定义为一个函数，该函数接受一个描述要使用的工厂的符号，该符号将 s 表达式作为列表返回，那么您将有**两个调用函数而不是嵌套宏的宏**。在大多数情况下，在函数而不是宏中进行真正的代码生成工作会使代码更容易推理和测试

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-13T03:55:53.633

一种合理的解决方案，如果您不介意在脑海中跟踪一些范围：

```
(defmacro defmanagedblock [name mgr]
  `(defmacro ~name [tm# & body#]
     {:pre [(and (vector? tm#)) (= 1 (count tm#))]}
     `(let [~(first tm#) ~'~mgr]
        ~@body#))) 
```

# render - 直接显示，MUX 到渲染器

> ID：12398674
> 
> 赞同：0
> 
> 时间：2012-09-13T02:35:23.640
> 
> 标签：render, directshow, webm, muxer

多路复用器是否通常被实现为写入文件。

我想将渲染器连接到混音器的输出引脚，但它失败了。

我已经植入了我的渲染器，这样我就有了源代码，我可以单步执行它。如果我将它连接到编码数据，渲染器就可以工作。

我的渲染器什么都不做，只是消耗数据。实际上它会发送欠线路的数据。我正在使用 webm 多路复用器。

错误代码说它们不是兼容的类型。有趣的是，它甚至不调用我的 CheckMediaType 或任何输入引脚的函数。所以无论发生什么都发生在 muxers 内部。

我知道很难猜出问题所在。Windows 附带的 AVI 多路复用器也发生在我身上。

# java - Java：创建一个 2D ArrayList 来存储整数和字符串？

> ID：12398675
> 
> 赞同：2
> 
> 时间：2012-09-13T02:35:48.430
> 
> 标签：java, arraylist, multidimensional-array

我需要存储 2 个相互连接的值数组。数组由一组字符串和一组整数/双精度值组成。数据的大小不是固定的。

一个例子：

```
Data 1: AA, 13    
Data 2: BB, 6    
Data 3: GG, 2 
```

我正在尝试查看二维数组。有没有更好的方法来存储值？我可能还需要多维数组来存储值。谁能指出我正确的方向或向我展示创建二维数组以及如何添加/检索元素的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-13T02:38:03.980

使用. _ *_* [`Map`](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html)映射具有键值对，因此您可以自然地以这种方式存储字符串和整数。

```
Map<String, Integer> myMap = new HashMap<String, Integer>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T09:08:10.003

如果您只想将 ArrayList 作为数据结构，您也可以像这样使用两种方法来创建这样的类：

```
 public Class Data{
    private String myString;
    private Integer myInteger;
    public String getMyString() {
        return myString;
    }

    public void setMyString(String myString) {
        this.myString = myString;
    }

    public Integer getMyInteger() {
        return myInteger;
    }

    public void setMyInteger(Integer myInteger) {
        this.myInteger = myInteger;
    }
}
List<Data> list = new ArrayList<Data>();

or else you can use like this

List<Object[]> list = new ArrayList<Object[]>(); 
```

# objective-c - 具有大型 Base64 JSON 主体的 NSURLConnection

> ID：12398677
> 
> 赞同：2
> 
> 时间：2012-09-13T02:35:54.980
> 
> 标签：objective-c, json, web-services, post, nsurlconnection

我对我们的网络服务的请求遇到了一个奇怪而烦人的问题。
我正在尝试通过 NSURLRequest 和 NSURLConnection 方法通过 JSON（以及其他一些内容）发送 base64 编码的字符串。

下面的代码适用于小型 base64 编码图像，例如 64x64 像素头像，但由于某种奇怪的原因，它不适用于较大的 b64 字符串，它返回“错误请求，400”错误。
我正在使用 POST 方法，字符串长度约为 10,000 个字符。Web 服务适用于除了这些大字符串之外的所有内容，我尝试了 3 种不同的 b64 解析解决方案，但没有一个可以工作。
不幸的是，我是前端编码员，几乎没有网络服务经验，因此不胜感激。

```
 NSData *postData = [JSONRequest dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];
    NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];

    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];

    [request setURL:[NSURL URLWithString:URLRequest]];
    [request setHTTPMethod:@"POST"];
    [request setValue:postLength forHTTPHeaderField:@"Content-Length"];
    [request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
    [request setHTTPBody:postData];
    [request setTimeoutInterval:9999.0f];
    [request setCachePolicy:NSURLRequestReloadIgnoringCacheData];
    [request setHTTPShouldUsePipelining:NO];

    NSURLConnection *connection = [[NSURLConnection alloc]initWithRequest:request delegate:delegateData];

    [connection start];
    [connection release];
    [request release];
    NSLog(@"Connection to %@!",URLRequest); 
```

并在此处捕获响应：

```
-(void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response{

     NSLog(@"didRecieveResponse");

     // cast the response to NSHTTPURLResponse so we can look for 404 etc
     NSHTTPURLResponse *httpResponse = (NSHTTPURLResponse *)response;
     NSLog(@"Response:%@ StatusCode: %i",[NSHTTPURLResponse localizedStringForStatusCode:[httpResponse statusCode]],[httpResponse statusCode]);
     if ([httpResponse statusCode] >= 400)
         // do error handling here
} 
```

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T00:40:19.313

似乎服务器响应是由于处理大型请求时的 Web 服务配置。
虽然我没有直接参与该项目的服务器端方面，但讨论过它是以下各项的组合：
服务器缓存
连接超时间隔
连接数据包丢失/服务质量问题。

AKA，这是一个服务器端问题，而不是 iOS 特定的客户端问题。

# javascript - 如何向这个 javascript/jquery 函数添加参数？

> ID：12398683
> 
> 赞同：0
> 
> 时间：2012-09-13T02:36:19.950
> 
> 标签：javascript, jquery, parameters, param

此脚本允许您随意单击某个元素，但是当您单击该元素以外的任何内容时，它会淡出某些内容。在下面的代码中，我可以单击其中的所有`$('.wrapper')`内容，但没有任何反应，但是当我单击该元素之外的任何内容时，我会`$('.popup')`淡出。

```
(function hideElementOnOffClick(elementWrapper, elementToHide) {

    $(document).bind('click', function(evnt) {
        var $target = $(evnt.target);

       if ($target.is(elementWrapper) || elementWrapper.has(evnt.target).length) {
            return;
        }

        elementToHide.fadeOut();
    });
})(); 
```

然后我调用其中包含两个元素类的函数：

```
hideElementOnOffClick($('.wrapper'), $('.popup')) 
```

如果我使用`$('.wrapper')`而不是 elementWrapper 而`$('.popup')`不是 elementToHide，它会起作用，但是当我将它变成可以在不同地方使用不同类调用的东西时，它不会。

如何修复参数以使其正常工作？​</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T02:48:27.290

您可以使用`.stopPropagation()`停止事件传播，这使您的代码更清晰。

```
function hideElementOnOffClick(elementWrapper, elementToHide) {
    elementWrapper.click(function(e) {
        e.stopPropagation();
    });
    $(document).click(function(e) {
        elementToHide.fadeOut();
    });    
} 
```

# python - Python中距离到三角距离矩阵的CSV

> ID：12398685
> 
> 赞同：2
> 
> 时间：2012-09-13T02:36:38.317
> 
> 标签：python, matrix, bigdata, hierarchical-clustering

我在关键字之间有大量相似性的 csv，我想将其转换为三角距离矩阵（因为它非常大并且稀疏会更好）以使用 scipy 执行层次聚类。我当前的数据 csv 看起来像：

```
a,  b, 1
b,  a, 1
c,  a, 2
a,  c, 2 
```

我不知道如何做到这一点，也找不到任何简单的 Python 集群教程。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T03:19:54.070

这个问题有两个部分：

*   如何将这种格式的 CSV 中的距离加载到（可能是稀疏的）三角距离矩阵中？

*   给定一个三角距离矩阵，你如何用 scipy 进行层次聚类？

如何加载数据：我不认为[`scipy.cluster.hierarchy`](http://docs.scipy.org/doc/scipy/reference/cluster.hierarchy.html)适用于稀疏数据，所以让我们做密集。我也打算把它做成完整的方阵，然后取 scipy 想要的上三角形，出于懒惰；如果你更聪明的话，你可以直接索引到压缩版本。

```
from collections import defaultdict
import csv
import functools
import itertools
import numpy as np

# name_to_id associates a name with an integer 0, 1, ...
name_to_id = defaultdict(functools.partial(next, itertools.count()))

with open('file.csv') as f:
    reader = csv.reader(f)

    # do one pass over the file to get all the IDs so we know how 
    # large to make the matrix, then another to fill in the data.
    # this takes more time but uses less memory than loading everything
    # in in one pass, because we don't know how large the matrix is; you
    # can skip this if you do know the number of elements from elsewhere.
    for name_a, name_b, dist in reader:
        idx_a = name_to_id[name_a]
        idx_b = name_to_id[name_b]

    # make the (square) distances matrix
    # this should really be triangular, but the formula for 
    # indexing into that is escaping me at the moment
    n_elem = len(name_to_id)
    dists = np.zeros((n_elem, n_elem))

    # go back to the start of the file and read in the actual data
    f.seek(0)
    for name_a, name_b, dist in reader:
        idx_a = name_to_id[name_a]
        idx_b = name_to_id[name_b]
        dists[(idx_a, idx_b) if idx_a < idx_b else (idx_b, idx_a)] = dist

condensed = dists[np.triu_indices(n_elem, 1)] 
```

然后调用例如[`scipy.cluster.hierarchy.linkage`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.cluster.hierarchy.linkage.html#scipy.cluster.hierarchy.linkage)。`condensed`要将索引映射回名称，您可以使用类似

```
id_to_name = dict((id, name) for name, id in name_to_id.iteritems()) 
```

# ios - 定位服务提醒

> ID：12398688
> 
> 赞同：1
> 
> 时间：2012-09-13T02:37:04.323
> 
> 标签：ios, xcode, mkmapview

我们可以通过不关闭应用程序并转到设置页面来调用位置服务警报再次弹出。就像一些用户不知道一旦弹出是否必须选择“允许或不允许”。问题的任何解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T05:12:43.263

如果您的要求是提醒用户他的位置服务状态，您可以提供自己的警报，并可以将用户导航到设置页面。

```
 - (void) showLocationAlert {

                if ([CLLocationManager authorizationStatus] != kCLAuthorizationStatusAuthorized) {

                        //Check whether Settings page is openable (iOS 5.1 not allows Settings page to be opened via openURL:)
                        if ([[UIApplication sharedApplication] canOpenURL:[NSURL URLWithString:@"prefs:root=LOCATION_SERVICES"]]) {
                            UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Error" message:@"You must enable location service,Turn on location service to allow \"YourApp\" to determine your location" delegate:self cancelButtonTitle:@"Settings" otherButtonTitles:@"Cancel", nil];
                            [alert show];

                        }
                        else {
                            UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Error" message:@"You must enable location service" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"OK", nil];
                            [alert show];
                        }
                 }
            }

  - (void) alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex  {
          if (buttonIndex == 0) {
                [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"prefs:root=LOCATION_SERVICES"]];
            }

        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T05:29:34.360

不幸的是，除非设备越狱，否则无法这样做。但是，将用户路由到设置窗格中的正确区域相对简单。

# c - 如何计算C中两个矩阵之间的距离

> ID：12398689
> 
> 赞同：1
> 
> 时间：2012-09-13T02:37:08.677
> 
> 标签：c, arrays, distance

我正在尝试计算两个矩阵之间的距离。例如。它是这样的。

矩阵-M1

```
1 2
3 4 
5 6 
7 8
9 0 
```

矩阵-M2

```
1 1
2 2 
```

距离矩阵（d1 是 M1 第 1 行和 M2 第 1 行之间的距离，d2 是 M1 第 1 行和 M2 第 2 行之间的距离。）

```
 d1 d2
  d3 d4 
  d5 d6 
  d7 d8 
  d9 d10 
```

我尝试了下面的代码但不起作用。请帮助我。

```
 #include<stdio.h>
    #include<math.h>

    int calcdist(int ,int ,int ,int);

    int main()
    {
            int points[5][2];
            int centroid[2][2];
            int distance[5][2];
            int i,j,k;
            printf("Enter the points:\n");
            for(i=0;i<5;i++)
            for(j=0;j<2;j++)
            scanf("%d",&points[i][j]);

            printf("Displaying the points.\n");
            for(i=0;i<5;i++)
            {
                    for(j=0;j<2;j++)
                    printf("%d\t",points[i][j]);
                    printf("\n");
            }

            printf("Enter the centroids:\n");
            for(i=0;i<2;i++)
            for(j=0;j<2;j++)
            scanf("%d",&centroid[i][j]);

            printf("Displaying the centroids.\n");
            for(i=0;i<2;i++)
            {
                    for(j=0;j<2;j++)
                    printf("%d\t",centroid[i][j]);
                    printf("\n");
            }

            for(i=0;i<5;i++)
            {
                    k=0;
                    for(j=0;j<2;j++)
                    {
                            distance[i][j]=calcdist(points[i][j],points[i][j+1],centroid[k][j],centroid[k][j+1]);
 }
        }

        printf("The distance between the points and centroids are as below.\n");
        for(i=0;i<5;i++)
        {
                for(j=0;j<2;j++)
                {
                        printf("%d\t",distance[i][j]);
                }
                printf("\n");
        }

        return 0;
}

int calcdist(int a,int b,int c,int d)
{
        int dist;
        dist=sqrt(pow((c-a),2)+pow((d-b),2));
        return dist;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T05:38:32.637

计算时的迭代超出范围（等）：

IE：

```
 fprintf(stderr,
            "dist[%d][%d] :: "
            "pt[%d][%d](%d), "
            "pt[%d][%d](%d), "
            "cn[%d][%d](%d), "
            "cn[%d][%d](%d) => "
            "%d\n"
            ,
            i, j,
            i, j, points[i][j],
            i, j + 1, points[i][j + 1],
            k, j, centroid[k][j],
            k, j + 1, centroid[k][j + 1],
            distance[i][j]
        ); 
```

你得到：

```
 a            b            c            d    
dist[0][0] ::pt[0][0](1), pt[0][1](2), cn[0][0](1), cn[0][1](1) => 1
dist[0][1] ::pt[0][1](2), pt[0][2](3), cn[0][1](1), cn[0][2](2) => 1
dist[1][0] ::pt[1][0](3), pt[1][1](4), cn[0][0](1), cn[0][1](1) => 3
dist[1][1] ::pt[1][1](4), pt[1][2](5), cn[0][1](1), cn[0][2](2) => 4
dist[2][0] ::pt[2][0](5), pt[2][1](6), cn[0][0](1), cn[0][1](1) => 6
dist[2][1] ::pt[2][1](6), pt[2][2](7), cn[0][1](1), cn[0][2](2) => 7
dist[3][0] ::pt[3][0](7), pt[3][1](8), cn[0][0](1), cn[0][1](1) => 9
dist[3][1] ::pt[3][1](8), pt[3][2](9), cn[0][1](1), cn[0][2](2) => 9
dist[4][0] ::pt[4][0](9), pt[4][1](0), cn[0][0](1), cn[0][1](1) => 8
dist[4][1] ::pt[4][1](0), pt[4][2](1), cn[0][1](1), cn[0][2](2) => 1 
```

`centroid[0][2]`超出 centroid 以及 ie 的范围`point[1][2]`。

还; 该`calcdist`函数返回一个`int`，这意味着所有距离都向零舍入。`sqrt(61) = 7.810 => 7`

使长话短说; 尝试类似：

```
 distance[i][j] = calcdist(
                    points[i][0],
                    points[i][1],
                    centroid[j][0],
                    centroid[j][1]
                ); 
```

IE：

> $ gcc -Wall -Wextra -pedantic -std=c89 -ggdb -DDEBUG -o dist dist.c -lm

## 代码：

```
#include <stdio.h>
#include <math.h>

int calcdist(int, int, int, int);

void prnt_2dmatrix(const char *title, int m[][2], int len)
{
    int i;

    fprintf(stdout, "%s {\n", title);
    for (i = 0; i < len; i++) {
        fprintf(stdout,
            "  %d    %d\n",
            m[i][0],
            m[i][1]
        );
    }
    fprintf(stdout, "}\n");
}

int main(int argc, char *argv[])
{
    int points[5][2] = {{1,2},{3,4},{5,6},{7,8},{9,0}};
    int centroid[2][2] = {{1,1},{2,2}};
    int distance[5][2] = {{0},{0}};
    int i, j;

    if (argc > 1 && argv[1][0] == 't') {
        printf("Using internal test vectors.\n");
    } else {
        printf("Enter the points:\n");
        for (i = 0; i < 5; i++)
            for (j = 0; j < 2; j++)
                scanf("%d", &points[i][j]);

        printf("Enter the centroids:\n");
        for (i = 0; i < 2; i++)
            for (j = 0; j < 2; j++)
                scanf("%d", &centroid[i][j]);
    }

    prnt_2dmatrix("Points", points, 5);
    prnt_2dmatrix("Centroids", centroid, 2);

    for (i = 0; i < 5; i++) {
        for (j = 0; j < 2; j++) {
            distance[i][j] = calcdist(
                        points[i][0],
                        points[i][1],
                        centroid[j][0],
                        centroid[j][1]
                    );
#ifdef DEBUG
            fprintf(stderr,
                "dist[%d][%d] = "
                "pt[%d][%d](%d), "
                "pt[%d][%d](%d), "
                "cn[%d][%d](%d), "
                "cn[%d][%d](%d) => "
                "%d\n"
                ,
                i, j,
                i, 0, points[i][0],
                i, 1, points[i][1],
                j, 0, centroid[j][0],
                j, 1, centroid[j][1],
                distance[i][j]
            );
        }
        printf("\n");
#else
        }
#endif
    }

    prnt_2dmatrix("Distance points <-> centroids", distance, 5);

    return 0;
}

int calcdist(int a, int b, int c, int d)
{
#ifdef DEBUG
    fprintf(stderr,
        " sqrt((%2d - %2d)^2 + (%2d - %2d)^2) =\n"
        " sqrt(       %2d^2 +        %2d^2) =\n"
        " sqrt(         %2.f +          %2.f) =\n"
        " sqrt(                       %2.f) = "
        " %.3f\n"
        ,
        c, a, d, b,
        c - a, d - b,
        pow(c - a, 2), pow(d - b, 2),
        pow(c - a, 2) + pow(d - b, 2),
        sqrt(pow((c - a), 2) + pow((d - b), 2))
    );
#endif
    return sqrt(pow((c - a), 2) + pow((d - b), 2));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T05:08:11.630

据我所知，您正在计算所有点与“质心”数组第一行的距离。如果这是错误的，您可能需要在主 for 循环中迭代“k”。

# c++ - 循环计算对象

> ID：12398692
> 
> 赞同：0
> 
> 时间：2012-09-13T02:37:49.197
> 
> 标签：c++

这是我写的：

```
#include <iostream> 
using namespace std; 

struct vetura{
    char ngjyra[10];
    char tipi[10];
};

int main(){
    int i,j;
    vetura v[4];

    for(i=0;i<4;i++){
        cout << "Ngjyra:"<<endl;
        cin >> v[i].ngjyra;
        cout << "tipi:"<<endl;
        cin >> v[i].tipi;
    }
    j=0;
    for(i=0;i<4;i++){
        if(v[i].ngjyra == "kuqe" && v[i].tipi == "passat")
        j+1;
    }
    cout<<"kemi "<<j<<" vetura passat me ngjyre te kuqe";

    cin.get();cin.get();
    return 0;
} 
```

我需要计算一下我为 v[i].ngjyra 写了多少次“kuqe”，为 v[i].tipi 写了“passat”。我认为变量 j 每次计数都会变大，但它不起作用，我将在接下来的几个小时内进行考试，谁能帮助我？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-13T02:39:58.150

你有两个问题：

**第一的：**

改变：

```
 j+1; 
```

到：

```
 j = j+1; 
```

或更简单：

```
 j++; 
```

**第二：**

`v[i].ngjyra == "kuqe"`永远不会是真的。您正在检查 的位置**是否**与的**位置**`v[i].ngjyra`相同。事实并非如此。**`"kuqe"`**

 **如果要测试字符串是否具有相同的值，请更改：

```
v[i].ngjyra == "kuqe" 
```

到：

```
strcmp( v[i].ngjyra, "kuqe" ) == 0 
```**

# c# - 在制作clickonce安装程序之前混淆Exe？

> ID：12398698
> 
> 赞同：1
> 
> 时间：2012-09-13T02:38:28.487
> 
> 标签：c#, vb.net, visual-studio-2010, deployment, obfuscation

我已准备好使用 clickonce 发布我的应用程序。虽然我也需要混淆我的应用程序。我正在考虑使用 VS 2010 附带的 dotfuscator。现在我的问题是我是否必须构建我的项目然后对其进行混淆，然后仅使用 clickonce 项目创建一个新的解决方案并将混淆的文件添加到其中？或者我是否像往常一样将 clickonce 项目添加到我的应用程序解决方案中，然后将混淆的程序集添加到其中？对不起，这对我来说都是新的。混淆和点击。另外我还没有编译我的项目，有没有办法将项目添加到我的解决方案中的 clickonce 项目中并一次构建它？还是必须先构建它然后添加到 clickonce 项目？抱歉所有问题，我是初学者，我找不到太多关于它的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-13T11:54:04.137

deepsea 混淆器与 clickonce 一起工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-01T12:36:48.683

如果你有任何你必须为项目制作的库，顺便混淆一下可执行文件，也对它们进行混淆:)

我更喜欢使用强大的算法加密 exe 并将其混淆..

# git - 初始化本地 git/gerrit 存储库 - 执行此操作的最佳方法是什么？

> ID：12398700
> 
> 赞同：0
> 
> 时间：2012-09-13T02:38:46.867
> 
> 标签：git, github, gerrit

[我最近问了一个](https://stackoverflow.com/questions/12269963/getting-local-gerrit-and-repository-working-including-branches-based-on-a-gith)关于镜像到 gerrit 的机制的问题，但我开始认为这可能不是一件理想的事情（知道有用但可能不适用于这个用例）。这个问题建立在那个问题之上。

我们想在 github 上开展一个项目，我们想看看它的分支。我们会用 gerrit 来解决这个问题。我想查看分支（和标签），但我不想直接在远程分支上签出……我们将拥有自己的本地分支和标签。

目前我可以将这样的 repo 镜像到 gerrit 中，这样它看起来就像是存储库的克隆，具有适当的分支和标签（例如，分支 foobar 在本地保持 foobar，而不是*origin/foobar*或*remotes/origin/foobar*）。但是，似乎让远程 refs 保持*origin/foobar*等可能更可取（并且更符合通常的做法）。

那么，以任何方式将外部项目镜像到本地 gerrit（例如上面）中是否比以允许其远程分支保持“远程”的方式克隆它更好？如果我们不想直接在那些远程分支上签出，那么让远程 refs 指向*origin/foobar*而不是*foobar重要吗？*最后，我希望在非镜像克隆上看到*origin/foobar我看到**remotes/origin/foobar* ...我在那里做错了什么？（我也失去了使用克隆进行裸镜像的好处，所以无论如何这似乎都是一个糟糕的选择。）

注意：使用 fetch 的建议有助于填充裸本地 repo（我在原始问题中充实了详细过程，作为使用 --mirror 的替代方法）。

我要补充一点，我现在知道[一个相关的问题](https://stackoverflow.com/questions/10588291/git-branching-master-vs-origin-master-vs-remotes-origin-master)。也许我特别考虑了“远程”的事情，但是镜像或克隆的问题仍然存在——人们将基于标签和本地、唯一命名的分支而不是远程来工作。我想极力避免内部也可能出现的命名冲突，因此知道如何以最佳方式做到这一点不仅仅是学术性的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T13:16:42.500

我不使用 gerrit，但我建议保留远程分支名称。分支是指针，它们的命名空间并没有什么特别之处。如果您将遥控器的分支重命名为，`origin/foo`而不是`foo`，当您在本地跟踪它时，您最终会跟踪`origin/origin/foo`. 本地规范是`<remote>/<remote_branch>`. 这很令人困惑，并且在创建本地跟踪分支时不会阻止诸如`git checkout`默认为本地的操作。`origin/foo`

该方案不会使事情变得更清晰，更不容易出错，而是会使它们复杂化并使错误变得很容易。

根据我的经验，命名冲突是工作流问题，而不是 git 问题。例如，我们通常鼓励我们的开发人员使用基于 case-ID 的名称，并且无论是否带有 case-ID 的所有分支都以作者的首字母 (`mm/3245`或`mm/gerrit-mirroring-code`) 开头。我们从 git 项目本身窃取了这个约定。经过一年的使用（以及近 1000 个功能分支），我们没有遇到过碰撞。在极少数情况下，两个同名但完全不同的分支被推送到同一个远程，git 无论如何都会拒绝推送，因为更新不会快进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T01:20:06.533

希望其他人加入进来。

最简单的解决方案似乎不是镜像，而是简单地制作一个新的本地克隆，然后将其推送到 gerrit，在推送命令的末尾添加“refs/*:refs/*”，以确保远程 refs最终出现在 gerrit 的仓库中。

那时，如果您查看 gerrit git repo 本身，您可以看到远程引用（但不是在 Web UI 中，这很好......我们不想在这项工作中直接合并到它们）。

然后，开发人员可以从 gerrit（或它的克隆）克隆 repo 来完成工作。但是，要查看远程分支 refs，他们需要采取额外的步骤来获取 refs，因此：

```
git fetch origin refs/remotes/*:refs/remotes/* 
```

然后他们可以看到遥控器以及其他所有内容。

*如果您从mirror*开始执行所有这些操作，则外部 refs 会按原样（而不是远程）引入，并且外部分支会出现在 gerrit Web UI 中，就像您将它们放在那里一样。这有它自己的用途，但对于我正在做的事情，它不会有帮助。

# webgl - 将材质/纹理添加到现有的 THREE.Mesh (three.js)

> ID：12398702
> 
> 赞同：2
> 
> 时间：2012-09-13T02:39:23.180
> 
> 标签：webgl, three.js, scenejs

我正在寻找能够根据一些用户输入提取图像（从数据库或任何地方）并将它们覆盖到 THREE.Mesh（three.js）上的能力。我认为我需要做的是以下几点：

1）从图像创建具有纹理的新材料并添加到几何体

2) 确定要覆盖图像的面

3）对于每个顶点，确定并分配图像的UV坐标

4）将每个面的materialIndex更改为新材料

我只是不确定这是否可行以及如何对现有网格进行正确分配。任何帮助将不胜感激。

**更新**

任何人都知道使用另一个库（例如 SceneJS）是否可能/更容易？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T19:34:20.930

您不必创建新材质，只需创建新纹理并替换材质的纹理即可。然后你需要设置你需要的顶点的UV。然后设置`geometry.uvsNeedUpdate`为`true`。

# login - 批处理文件密码“锁定”

> ID：12398704
> 
> 赞同：0
> 
> 时间：2012-09-13T02:39:28.677
> 
> 标签：login, batch-file, password-protection, lockout

我使用了“要求用户名/密码+注册的批处理文件”中的脚本（stackoverflow中已经有主题）......这是我的问题：有什么方法可以将锁定添加到批处理文件或执行关机5 次错误尝试后的命令？（底部超时为24小时） **示例情况：** 用户名：bobTESTattempt1 密码：1234 [输入] 密码不正确，还剩4次尝试！

（使用接下来的 3 次尝试）

用户名：bobTestattempt5 密码 123342 [enter] 密码不正确，剩余 0 次尝试！[进入]

帐户锁定超时 86400

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T12:34:53.920

干得好

```
@echo off
set counter=5
:CREDS
cls
if %counter% equ 0 goto :LOCKOUT
if %counter% lss 5 echo Password incorrect, %counter% attempts left
set /p un=Enter your username:
set /p pw=Enter your password:
if %un%==correctusername (
if %pw%==correctpassword goto :ALLOK
)
goto :WRONG

:WRONG
set /a counter-=1
goto :CREDS

:ALLOK
echo Creds ok, do whatever
pause >nul
exit >nul

:LOCKOUT
echo ACCOUNT LOCKED OUT TIMEOUT 86400
timeout /t 86400
goto :CREDS 
```

# java - Java NLP：在标记文本时提取索引

> ID：12398706
> 
> 赞同：0
> 
> 时间：2012-09-13T02:39:38.477
> 
> 标签：java, nlp, token, tokenize, information-retrieval

在对文本字符串进行标记时，我需要提取标记词的索引。例如，给定：

```
"Mary didn't kiss John" 
```

我需要类似的东西：

```
[(Mary, 0), (did, 5), (n't, 8), (kiss, 12), (John, 17)] 
```

其中 0、5、8、12 和 17 对应于令牌开始的索引（在原始字符串中）。我不能只依赖空格，因为有些单词会变成 2 个标记。此外，我不能只在字符串中搜索标记，因为这个词可能会出现多次。

一个巨大的障碍是我正在使用“脏”文本。这是语料库中的一个真实示例及其标记化：

细绳：

```
The child some how builds a boaty  c capable of getting scrtoacross the sea, even after findingovercoming many treachrous rous obsittalcles. 
```

代币：

```
The, child, some, how, builds, a, boaty, , , c, , capable, of, getting, scrto, , across, the, sea, ,, even, after, finding, , , , , overcoming, many, treachrous, rous, obsittalcles, . 
```

我目前正在使用 OpenNLP 对文本进行标记，但对于使用哪个 API 进行标记化感到矛盾。不过，它确实需要是 Java，所以（不幸的是）Python 的 NLTK 不在图片中。

任何想法将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T07:08:13.423

您可以将 OpenNLP Tokenizer 与[UIMA](http://uima.apache.org/index.html)一起使用。UIMA 中的令牌注释器将为令牌创建一个类型，其中将包括令牌的开始和结束索引。您还可以将词性标签、词干、引理等功能附加到令牌。UIMA 具有 Java 和 C++ API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T08:26:57.827

OpenNLP 将使用 方法返回偏移量`Tokenizer.tokenizePos(String s)`，请参阅[用于 TokenizerME 的 OpenNLP API](http://opennlp.sourceforge.net/api/opennlp/tools/tokenize/TokenizerME.html#tokenizePos%28java.lang.String%29)作为已实现标记器的示例。每个`Span`返回的都包含令牌的开始和结束位置。

您是否决定使用 UIMA 确实是一个单独的问题，但 OpenNLP 确实为使用`tokenizePos()`. 但是，如果您只想标记一个字符串，那么 UIMA 绝对是矫枉过正......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T17:24:09.727

你可以用[BreakIterator](http://docs.oracle.com/javase/7/docs/api/java/text/BreakIterator.html)做同样的事情，而不是使用任何外部 API。

# linux - GNUplot 中的多重绘图

> ID：12398708
> 
> 赞同：6
> 
> 时间：2012-09-13T02:39:53.720
> 
> 标签：linux, gnuplot

我想在 GNUplot 中做多图或子图。我有两个文件，两个文件中有 x1，y1。我想在 GNUplot 中绘制两个图，就像一个子图。假设我有以下两个文件

情节1

12:14:38 10

12:15:38 11

12:16:38 12

12:17:38 15

和另一个文件

情节2

12:17:38 15

12:18:38 11

12:19:38 12

12:20:38 15

我想为这两个值生成两个图表。我如何使用 GNUplot 来做到这一点。谁能帮帮我。

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-13T03:15:45.020

如果我理解您的要求，这是基本语法：

```
set term png size 600,400
set output 'plot.png'

set multiplot           # engage multiplot mode
set size 1.0,1.0        # sets the size of the first plot
set xdata time          ## these three lines control how gnuplot
set timefmt '%H:%M:%S'  ## reads and writes time-formatted data.
set format x '%H:%M:%S' ##

plot 'data1' u 1:2      # plot the first data set

set size 0.4,0.4        # set the size of the second plot in plot units
set origin 0.15,0.5     # set the origin for the second plot in plot units

plot 'data2' u 1:2      # plot the second data set 
```

这会将第二个数据集绘制为子图。

![子图](../Images/25448656919cf5d520828a10eeb0c2bb.png)

要在网格中绘制两个图，您可以使用`set multiplot layout`：

```
set term png size 600,300
set output 'plot.png'

set multiplot layout 1,2        # engage multiplot mode
#set size 1.0,1.0       # sets the size of the first plot
set xdata time          ## these three lines control how gnuplot
set timefmt '%H:%M:%S'  ## reads and writes time-formatted data.
set format x '%H:%M:%S' ##
set xtics 120           # make time spacing of 2 minutes

plot 'data1' u 1:2      # plot the first data set 

#set size 0.4,0.4       # set the size of the second plot in plot units
#set origin 0.15,0.5    # set the origin for the second plot

plot 'data2' u 1:2      # plot the second data set 
unset multiplot 
```

![在此处输入图像描述](../Images/d316547a471f87d77ffb554ffe80b91d.png)

# objective-c - 在 Switch 语句中使用 Double

> ID：12398719
> 
> 赞同：3
> 
> 时间：2012-09-13T02:40:38.510
> 
> 标签：objective-c, ios, switch-statement

以下所有值都是双精度值，但 switch 需要一个整数值。有没有办法解决？

```
switch(fivePercentValue){
case floor((5*fivePercentValue) / 100):
    fivePercent_.backgroundColor = [UIColor greenColor];
    fivePercentLabel_.textColor = [UIColor greenColor];
    break;
case ceil((5*fivePercentValue) / 100):
    fivePercent_.backgroundColor = [UIColor greenColor];
    fivePercentLabel_.textColor = [UIColor greenColor];
    break;
default:
    fivePercent_.backgroundColor = [UIColor redColor];
    fivePercentLabel_.textColor = [UIColor redColor];
    break; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T03:12:38.230

您可能最好只使用 if else 并测试范围，但您可以对您的 FivePercentValue 执行一些数学运算，然后将其转换为整数，以便不同的整数表示不同的范围，例如

```
switch( (int)(value*10.0) )
{
    case 0:        // this is 0.0 <= value < 0.1
        break;
    case 1:        // this is 0.1 <= value < 0.2
        break;
    case 2:        // this is 0.2 <= value < 0.3
        break;
    ....
} 
```

# java - 嵌入式 Felix 无法将激活器投射到 BundleActivator

> ID：12398721
> 
> 赞同：2
> 
> 时间：2012-09-13T02:40:51.533
> 
> 标签：java, osgi, apache-felix

**问题**

我在 Felix OSGi 容器中实例化我的 OSGi 包激活器时遇到问题。当我尝试启动捆绑包时，我收到一个错误，我无法将激活器类型转换为，`org.osgi.framework.BundleActivator`尽管事实上这是项目中定义的父类。

我已包含`org.osgi:org.osgi.core:5.0.0`在激活的捆绑包中，以便可以启动具有激活器的类。我是否需要在 OSGi 包中引用 OSGi 库，还是应该由 Felix 容器为我提供它们？

无论是运行 Felix 嵌入式还是从命令行运行，我都有同样的问题。

** 解决方案 **

事实证明，Felix 中的 OSGi 版本比最新标准还要旧。因为我是 OSGi 的新手，所以我只是抓住了所有最新的东西并开始开发。我已经从版本 5.0.0 移回 4.3.0。我注意到的唯一区别是 API 中缺少好的泛型。

现在我的类是兼容的，它们可以在容器中启动时解决。以前的问题只是由于库的版本。

**背景**

我有一个未启动的 Maven 构建项目，因为它找不到对 org.osgi.framework(vesrion>=1.7.0)(!(version>=2.0.0)) 的依赖项。

项目配置为

```
Main
  SubProjectApi
  SubProjectImpl
  SubProjectIntegrationTest 
```

其中 SubProjectImpl 依赖于 SubProjectApi。SubProjectApi 有一个使用 maven-bundle-plugin 构建的包，但不包含任何 OSGi 参考。SubProjectImpl 引用 Api 模块并提供一个 BundleActivator。为了解析 OSGi 类，项目依赖于`org.osgi:org.osgi.core:5.0.0`. 一切都编译得很好。

项目 SubProjectIntegrationTest 提供了一组单元测试，以确保 SubProjectImpl 在嵌入式 Felix 环境中正常工作。我遵循了设置`Felix`实例的指南（创建激活器、引用所需的罐子等）。因为测试环境和 OSGi 都需要相同的 API 类，所以我使用了 org.osgi.framework.system.packages.extra 配置选项来共享 API 类。

开始测试时出现以下错误

```
ERROR: Bundle dsto.lod.simr.core [12] 
    Error starting file:target/SubProjectImpl.jar 
    (org.osgi.framework.BundleException: Unresolved constraint in bundle
    project.impl [12]: Unable to resolve 12.0: 
    missing requirement [12.0] osgi.wiring.package; 
    (&(osgi.wiring.package=org.osgi.framework)(version>=1.7.0)(!(version>=2.0.0)))) 
```

我认为 Felix 环境会自动提供这些类。我将 org.osgi.core 模块添加到环境中，问题变成了我在转换类型时遇到的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T12:10:13.407

您不应该安装 Core API 包。这些包由框架实现导出。如果您安装捆绑包并针对捆绑包进行解析，那么您的捆绑包和框架实现将为这些类使用不同的 Class 对象。

您还需要针对版本小于或等于框架实现支持的版本的核心 API 版本进行编译。看起来您是针对 core 5.0 编译的，而框架实现是针对 core 4.3（或低于 5.0 的其他版本）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-18T23:52:34.510

我在基于 Maven 的项目中遇到了问题，其中导入似乎是正确的。问题是一些不正确的接口版本被缓存了。它在清除缓存后工作。

为了始终在启动时清除缓存，我使用了配置参数`org.osgi.framework.Constants.FRAMEWORK_STORAGE_CLEAN`：

```
Map<String, String> config = new HashMap<>();
config.put(Constants.FRAMEWORK_STORAGE_CLEAN, 
           Constants.FRAMEWORK_STORAGE_CLEAN_ONFIRSTINIT);
Framework framework = frameworkFactory.newFramework(config); 
```

# asp.net - 如果身份验证 cookie 是由服务器通过 SSL 发布的，它会被窃取吗？

> ID：12398723
> 
> 赞同：0
> 
> 时间：2012-09-13T02:41:17.857
> 
> 标签：asp.net, ssl, forms-authentication

假设客户端和服务器之间的所有通信都是通过 SSL 进行的，并且在 cookie 上设置了“requireSSL=true”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:07:49.840

HTTPS 是[基于 TLS/SSL 的 HTTP](https://www.rfc-editor.org/rfc/rfc2818)，它在交换任何 HTTP 消息之前建立 SSL/TLS 连接。

如果双方配置正确并且客户端验证证书，SSL/TLS 隧道将保护 HTTP 流量免受 MITM 攻击和窃听。

这应该可以防止浏览器和服务器之间的任何一方看到该 cookie。此外，如果这是一个安全 cookie（带有[`secure`标志](https://security.stackexchange.com/q/100/2435)，可能配置为`requireSSL=true`），浏览器应该只在 HTTPS 请求时将其发回（如果您的站点同时使用 HTTP 和 HTTPS）。（也可以`httpOnly`在您的 cookie 上设置以防止涉及脚本的攻击。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T14:10:02.633

理论上不会，只能通过以下方式被盗：

1.  浏览器中的错误
2.  中间人攻击
3.  弱密码算法

# php - 在服务器端显示适合 div 的 div 内容

> ID：12398724
> 
> 赞同：0
> 
> 时间：2012-09-13T02:41:17.880
> 
> 标签：php, css, javascript-events

我的 Web 应用程序中有一个新闻显示部分。我需要在 div 中显示前 2 行新闻，即 450px X 30 px 高度，15 px 行高。

我只需要显示前 2 行。我对服务器端字符串进行了拆分，例如

```
$news=$row['news'];
if(strlen($news)>200)
$news=substr($news,0,197).'...'; 
```

如果我的新闻包含超过 200 个字符，它会显示“sdasd asdasd ad...”。

但真正的问题是..

假设我的新闻包含更多“W”，那么新闻将超出 div 并显示“WWWW...”

如果新闻包含“i”......那么即使我的新闻包含超过 500 个字符，这两行也不会填满......

我想用文本填充我的 2 行，如果文本包含更多字符，则附加一个“...”。

它使我的应用程序看起来很奇怪。

我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T02:47:57.307

我为类似的问题创建了以下内容。

我在一个带有溢出的div中插入了250个字符的文本：隐藏

然后，我创建了一个固定在框右下角的 div 框，带有 ... 阅读更多内容，或者在您的情况下可能只是 ...

我希望这可以帮助一些想法。

# .net - 在 .NET 3.5 中访问 SQL Server 的方法

> ID：12398725
> 
> 赞同：0
> 
> 时间：2012-09-13T02:41:46.737
> 
> 标签：.net, sql-server-2008

我需要在 .NET 3.5 的 C# 项目中访问 SQL Server 2008（由于 SharePoint 2010 的 SharePoint Server 对象模型）。由于 Entity Framework 4.0 及更高版本在 .NET 3.5 中不起作用，EF 基本上不适用，因为我不想使用 EF v1。

除了 System.Data.SqlClient 之外，还有其他方法可以用来访问 SQL Server 2008 吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T02:49:22.990

还有许多其他可用的 ORM 和数据映射器：

在我的头顶上：

*   [休眠](http://nhforge.org/Default.aspx)
*   [亚音速](http://subsonicproject.com/)
*   [光速](http://www.mindscapehq.com/products/lightspeed)
*   铁速
*   Linq2Sql

这个封闭的问题列出了一堆：

[https://stackoverflow.com/questions/3505/what-are-your-favorite-net-object-relational-mappers-orm](https://stackoverflow.com/questions/3505/what-are-your-favorite-net-object-relational-mappers-orm)

# c++ - 调试问题:(

> ID：12398730
> 
> 赞同：0
> 
> 时间：2012-09-13T02:42:28.053
> 
> 标签：c++, debugging, unix

我正在开发一个程序，该程序根据用户的输入打印出字数、字符数和行数。但我不断收到这些我完全不知道的错误。我想知道是否有人可以提供帮助。** 我已更改它，但仍然收到错误。抱歉，我是 C++ 新手。

我得到的错误是

```
 filestat.cpp:47: error: ‘line’ was not declared in this scope
 filestat.cpp: In function ‘int wc(std::string)’:
 filestat.cpp:55: error: ‘line’ was not declared in this scope
 filestat.cpp: In function ‘int cc(std::string)’:
 filestat.cpp:67: error: ‘line’ was not declared in this scope

#include<iostream>
#include<fstream>
#include<string>
using namespace std;
int lc(string fname);
int wc(string fname);
int cc(string fname);

int main(){
string fname,line,command;
ifstream ifs;
int i;
while(true){
    cout<<"---- Enter a file name : ";

    if(getline(cin,line)){
        if(line.length()== 4 && line.compare("exit")== 0){
            cout<<"Exiting";
            exit(0);
        }else{
            string command = line.substr(0,2);
            fname= line.substr(4, line.length() -5);
                if( ifs.fail()){
                    ifs.open(fname.c_str());
                    cerr<< "File not found" <<fname <<endl;
                    ifs.clear();
                }else{
                    if(command.compare("lc")){
                        lc(fname);
                    }else if (command.compare("wc")){
                        wc(fname);
                    }else  if(command.compare("cc")){           
                                      cc(fname);                    
                    }else
                        cout<<"Command unknown. ";

                }
        }
    }
}
return 0;
}

 int lc(string fname){
int count;
while(getline(fname, line)){
    count++;
}
cout<<"Number of lines: "<<count ; 
   }

  int wc(string fname){
int count;
while(getline(fname, line)){
    int pos=line.find_first_of("\n\t ",0);
    while(pos =! string::npos){
        int length=line.length();
        line = line.substr(pos+1, length - pos);
        count++;
    }
  }
cout<< "Number of words: " <<count; 
  }
 int cc(string fname){
int count;
while(getline(fname, line)){
    count = count + line.length();
}

cout<< "Number of words: " <<count;

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T02:45:36.357

length() 是 std::string 的成员函数。你错过了`()`

```
if(line.length== 4 && line.compare("exit")== 0) // line.length() 
```

std::string::length() 也返回一个整数。`4`不应该被包围`""`。

# android - 对于选项卡式视图，我真的必须将所有代码放入一个活动中吗？

> ID：12398731
> 
> 赞同：2
> 
> 时间：2012-09-13T02:42:36.917
> 
> 标签：android, android-fragments, android-actionbar, actionbarsherlock, android-tabs

我正在尝试制作一个带有 3 个选项卡的简单 UI，每个选项卡都有自己独特的用途。我知道实现选项卡的新方法是使用 Actionbar 和 Fragments，但这让我感到困惑，因为最后我的应用程序的所有逻辑当前都位于一个相当大的活​​动中，而我希望更多的功能分离受到鼓励该平台。我在这里做错了吗？

我和这位先生在这里发帖有很多共同点：[Android Layout Fragment/Activity Confusion](https://stackoverflow.com/questions/9106063/android-layout-fragment-activity-confusion) .... 不幸的是，他的大部分问题都没有得到解答。

...而且，我基本上从一个人的在线示例中了解了如何使用 Actionbar 执行选项卡，这里：[http](http://arvid-g.de/12/android-4-actionbar-with-tabs-example) ://arvid-g.de/12/android-4-actionbar-with-tabs-example . （只是没有很多例子！）

这是获取`Actionbar`并创建两个选项卡：

```
ActionBar actionbar = getActionBar();

actionbar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

ActionBar.Tab calendarTab = actionbar.newTab().setText("Calendar");
ActionBar.Tab logTab = actionbar.newTab().setText("Sleep Log");

Fragment calendarFragment = new CalendarFrag();
Fragment sleepLogFragment = new LogFrag();

calendarTab.setTabListener(new MyTabListener(calendarFragment));
logTab.setTabListener(new MyTabListener(sleepLogFragment));

actionbar.addTab(logTab);
actionbar.addTab(calendarTab); 
```

这是我制作的这些“子类”中的全部代码`Fragment`：

```
public class CalendarFrag extends Fragment {

@Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle      savedInstanceState) {
        // Inflate the layout for this fragment
        return inflater.inflate(R.layout.calendar, container, false);
    }
} 
```

从字面上看，我所做的只是放大视图；只是感觉有点不对劲。然后我有一个更长的活动，其中我有我的应用程序的所有逻辑，这也很烦人。不幸的是，我设置它的方式需要动态生成进入视图的内容，例如`R.layout.calendar`，我必须在*某处*做。

现在我在移动我的所有代码时遇到了很多错误，我想知道是否真的值得把它整理出来——最初我试图用 TabHost 和 TabWidget 以及所有这些来做标签，但它是已弃用。

我真的应该将所有代码放在一个活动中以填充三个选项卡吗？没有更好的方法吗？我应该把动态填充这些空片段的逻辑放在哪里？我想，在片段本身中，或者在单独的活动中是我更喜欢的。

# javascript - 从您单击的行上的列中获取数据

> ID：12398733
> 
> 赞同：0
> 
> 时间：2012-09-13T02:43:14.450
> 
> 标签：javascript, yui

我有一个 YUI 数据表如下

```
YAHOO.example.Data = {
        bookorders: [
            {id:"po-0167", date:new Date(1980, 2, 24), quantity:1, amount:4, title:"A Book About Nothing"},
            {id:"po-0783", date:new Date("January 3, 1983"), quantity:null, amount:12.12345, title:"The Meaning of Life"},
            {id:"po-0297", date:new Date(1978, 11, 12), quantity:12, amount:1.25, title:"This Book Was Meant to Be Read Aloud"},
            {id:"po-1482", date:new Date("March 11, 1985"), quantity:6, amount:3.5, title:"Read Me Twice"}
        ]
    } 
```

我向它添加了一个订阅事件

```
myDataTable.subscribe("rowClickEvent", function(args){   
            alert("inside click1");

            var rec = myDataTable.getSelectedRows()[0];
            .
            .
            .
            printTitle(record.title);
        }); 
```

问题是我无法获得选定的行。我有另一个函数 printTitle 来提醒单击该行的书的标题。

我设法使用 myDataTable.getSelectedRows()[0] 获得了 selectedRow。我更新了我的代码，但现在我似乎无法获得标题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T05:42:56.187

我想你很接近。

尝试以下操作：

请注意“var selectedRecordId = myDatatable.getSelectedRows()[0];” 给你记录的ID。您可能需要执行“var selectedRecord = myDatatable.getRecord(id);” 得到你的记录。当你有记录时，你需要使用“var title = selectedRecord.getData('title');” 获得标题。

检查那些文档（帮助我回答）： http: [//developer.yahoo.com/yui/docs/YAHOO.widget.Record.html](http://developer.yahoo.com/yui/docs/YAHOO.widget.Record.html) http://developer.yahoo.com/yui/docs/YAHOO.widget.DataTable .html

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T05:47:52.953

正在通过论坛寻找更多灵感，我偶然发现了这个

[关于 yui 行点击事件的另一个问题](https://stackoverflow.com/questions/3022436/call-click-event-on-last-clicked-row-in-yui-datatable)

最后我用 getselectedrows 替换了

```
myDataTable.subscribe("rowClickEvent", function(args){   

            var record = this.getRecord(args.target);
            var title = record.getData("title");

            alert("inside click2 : " + title);

        }); 
```

它就像一个魅力

# phing - FileSet 中的文件顺序 (phing)

> ID：12398742
> 
> 赞同：0
> 
> 时间：2012-09-13T02:44:45.990
> 
> 标签：phing, fileset

是否可以按特定顺序（例如 0-9 后跟 AZ）从 phing FileSet 获取文件？现在它以完全随机的顺序获取我的编号文件。

```
<fileset dir="${mydirectory}">
    <include name="*" />
</fileset> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T14:12:36.280

```
<exec command="cd ${mydirectory}/ &amp;&amp; echo *" escape="false" outputProperty="myfiles" />
<append destfile="concatenated.txt">
    <filelist dir="${mydirectory}" files="${myfiles}" />
</append> 
```

# php - jQuery json 处理错误

> ID：12398743
> 
> 赞同：0
> 
> 时间：2012-09-13T02:45:01.657
> 
> 标签：php, jquery, ajax, json

我正在使用 jquery 的 ajax 函数将 json 发送到 php 脚本并返回一组 json 值用于前端处理。

php 脚本正在发送 json，我可以从 php 脚本中回显 json 并通过成功函数参数检索。

我的问题是我应该如何处理错误。有没有首选的方式将异常信息（验证等）发回前端，并指出php.ini中发生了错误。我是否应该将这些信息打包在一个 json 对象中并检查收到的内容。

谢谢，

```
$.ajax({
   url: 'gear.php',
   type: 'POST',
   data: {'json': JSON.stringify(shopping)},
   success: function(data){
      console.info(data);
   },
   error: function(data){
      console.info(data);
   }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T02:53:33.157

实际上，我会推荐这两种方法。使用该`error:`块来捕获任何服务器端错误（即 404、500 错误等），但对于业务异常，使用您可以检查的不同 JSON 块进行响应。在`success:`.

例如：

```
$.ajax({
   url: 'gear.php',
   type: 'POST',
   data: {'json': JSON.stringify(shopping)},
   success: function(data){
      if (data.error_message){
          alert(data.error_message);
      } else {
          console.info(data);
      }
   },
   error: function(data){
      console.info(data); //popup an uh-oh message.
   }
}); 
```

# sharepoint - 还原 SharePoint 2010 网站模板时出现异常

> ID：12398747
> 
> 赞同：1
> 
> 时间：2012-09-13T02:46:02.410
> 
> 标签：sharepoint, templates

我正在尝试恢复我创建的 SharePoint 2010 网站模板 (WSP)。我的还原方法是创建一个新站点，然后通过 Central Admin 将此模板应用于该站点。在恢复过程的中途（屏幕在“处理中...”），我得到以下异常：

System.Runtime.InteropServices.COMException：`<nativehr>`0x8107058a`</nativehr><nativestack></nativestack>`无效 URI：URI 方案无效。

深入研究 SharePoint 日志，似乎在激活功能时生成了异常：

功能“MySitePropertyBags”的“PropertyBag”类型元素（id：d8c8ecfe-b8c4-42a9-87ca-a7e21eca5c58）在激活期间引发异常：无效的 URI：URI 方案无效。2b46d061-e1f6-43f0-951d-d3a6252b0b77

我已经尝试了多台目标机器，但没有成功。有什么帮助吗？

编辑：由于母版页中的这一行而失败： `<link href="<%$SPUrl:~SiteCollection/SiteAssets/css/styleSheet.css%>" type="text/css" rel="stylesheet"/>`

我尝试将 ~SiteCollection 更改为 ~Site 但没有帮助。在任何人问之前，是的，该 CSS 文件存在。还有其他想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T19:55:50.377

您不能直接在非服务器控件中使用 $SPUrl，请这样做：

```
<link 
     href="<asp:Literal runat='server' Text='<%$SPUrl:~sitecollection/SiteAssets/css/styleSheet.css%>' />" 
     type="text/css" 
     rel="stylesheet" /> 
```

（格式化到这个小空间）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T22:36:40.863

F. 阿基诺，谢谢你的帮助。您的评论使我找到了解决方案，即使用以下行：

`<SharePoint:CssRegistration name="<% $SPUrl:~Site/SiteAssets/css/styleSheet.css %>" After="corev4.css" runat="server"/>`

# objective-c - 在 xcode 之类的网站上制作下拉列表

> ID：12398748
> 
> 赞同：-1
> 
> 时间：2012-09-13T02:46:23.310
> 
> 标签：objective-c, ios, xcode

我想制作一个下拉列表，看起来类似于网站上的注册页面，其中箭头指向按钮。我已经包含了发生这种情况的雅虎注册页面的图像，我希望有人能够指出我正确的方向来找到如何做到这一点。谢谢！![例子](../Images/81ccdc1c99f99560470064a5ef52cc11.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T04:57:49.063

你是为 iPhone 还是 iPad 开发。如果是 iPad，请使用带有 UITableViewController 作为其 contentViewController 的 UIPopoverController。Popover 控制器有一个方法 presentPopoverFromRect:inView:permittedArrowDirections:animated: 允许您将其箭头指向您启动它的视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T02:59:14.213

您可以创建使用 UITableView 的自定义 UIView。每次单击下拉列表按钮时，都可以将自定义视图的 UITableView 数据源对象设置为要显示的值列表。

您需要在视图控制器中声明您的自定义视图，并在用户点击按钮时将该自定义视图的 X、Y 坐标移动到适当的位置。

我倾向于在我的自定义视图中使用 NSMutableArray，然后当我需要该行时，我调用我的自定义视图的“selectedRow”属性。

# php - 使用 PHP 创建 CSV 文件并将其保存到目录中

> ID：12398750
> 
> 赞同：10
> 
> 时间：2012-09-13T02:46:25.440
> 
> 标签：php

我是 PHP 新手。我正在创建一个脚本，它应该使用我的数据库中的一些数据创建一个 csv 文件，并将其保存到我服务器上的目录中。

我以某种方式做到了，但这个文件总是在下载。我不希望它下载。它应该只保存到一个目录中。

这是为您提供帮助的完整代码。

请帮助我。

```
<?php
$MYSQL_HOST="localhost";
$MYSQL_USERNAME="root";
$MYSQL_PASSWORD="";
$MYSQL_DATABASE="paesana";
$MYSQL_TABLE="ds_orders";
mysql_connect( "$MYSQL_HOST", "$MYSQL_USERNAME", "$MYSQL_PASSWORD" ) or die( mysql_error( ) );
mysql_select_db( "$MYSQL_DATABASE") or die( mysql_error( $conn ) );

$filename="ePay";
$csv_filename = $filename."_".date("Y-m-d_H-i",time()).".csv";

header("Content-Type: application/vnd.ms-excel");

$today="2008-12-21";
$sql = "SELECT * FROM $MYSQL_TABLE where cDate='$today'";

$result=mysql_query($sql);

if(mysql_num_rows($result)>0){

$fileContent="Beneficiary Name,Beneficiary Account No,Beneficiary Bank Code,Transaction Amount,Narration\n";
    while($data=mysql_fetch_array($result))
    {
    $fileContent.= "".$data['customer_id'].",".$data['oNum'].","."$today".",".$data['cShipService']." ".$data['cShipMethod'].",".$data['cEmail'].",".$data['ccType'].",".$data['cShipInstruct'].",".$data['cShipFname']." ".$data['cShipLname']."\n";
}

$fileContent=str_replace("\n\n","\n",$fileContent);
    echo $fileContent;
}
header("content-disposition: attachment;filename=$csv_filename"); ?> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-13T02:56:36.640

1.  如果您不想下载结果，请删除标题。

2.  在这一行之后：

    ```
    $csv_filename = $filename."_".date("Y-m-d_H-i",time()).".csv"; 
    ```

    添加：

    ```
    $fd = fopen ($csv_filename, "w"); 
    ```

3.  代替：

    ```
    echo $fileContent; 
    ```

    利用

    ```
    fputs($fd, $fileContent); 
    ```

4.  不要忘记关闭您的文件

    ```
    fclose($fd); 
    ```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-07-03T13:10:09.183

您可以使用以下代码：

```
$data_array = array (
            array ('1','2'),
            array ('2','2'),
            array ('3','6'),
            array ('4','2'),
            array ('6','5')
        );

$csv = "col1,col2 \n";//Column headers
foreach ($data_array as $record){
    $csv.= $record[0].','.$record[1]."\n"; //Append data to csv
}

$csv_handler = fopen ('csvfile.csv','w');
fwrite ($csv_handler,$csv);
fclose ($csv_handler);

echo 'Data saved to csvfile.csv'; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-14T12:51:50.080

Try...

Simple way to create csv file.

```
<?php 
mysql_connect('hostname', 'username', 'password');
mysql_select_db('dbname');
$qry = mysql_query("SELECT * FROM tablename");
$data = "";
while($row = mysql_fetch_array($qry)) {
  $data .= $row['field1'].",".$row['field2'].",".$row['field3'].",".$row['field4']."\n";
}
$file = 'file.csv';
chmod($file, 0777);
file_put_contents($file, $data);
?> 
```

# python - Django objects.filter 在处理 unicode 时不一致

> ID：12398752
> 
> 赞同：2
> 
> 时间：2012-09-13T02:46:49.990
> 
> 标签：python, django, unicode

通常像这样的过滤器会返回正确的结果：

```
Entry.objects.filter(blog__name__startswith='Beatle') 
```

但有时它不会！而且我必须使其 unicode 才能工作：

```
Entry.objects.filter(blog__name__startswith=u'Beatle') 
```

这是否意味着我们总是必须将 unicode 字符串放在那里，或者这是一个错误？有什么想法吗？谢谢，九月

# symfony - FOSUserBundle，symfony 2.1。如何在注册时向用户添加角色？

> ID：12398754
> 
> 赞同：1
> 
> 时间：2012-09-13T02:47:22.783
> 
> 标签：symfony, symfony-2.1, fosuserbundle

我确定这是一个简单的问题，但我看不到或找不到正确的方法。

当使用注册表单创建用户时，如何向用户添加角色？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T03:40:31.223

找到了。我走在正确的轨道上:)

覆盖注册表单处理程序。

[https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/overriding_forms.md](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/overriding_forms.md)

添加

```
$user->addRole('ROLE_MYROLE'); 
```

前

```
parent::onSuccess() 
```

# ios - 使用原生 iOS 类建立 OAuth 连接

> ID：12398756
> 
> 赞同：0
> 
> 时间：2012-09-13T02:47:25.513
> 
> 标签：ios, nsurlconnection, restkit

好的，所以这是一个通用问题。我一直在使用 RestKit 连接到 OAuth 和其他 Web 服务。它真的很棒。正如我们所知，还有其他几个可用的 3rd 方框架。

但是，是否可以仅使用本机 iOS 框架（NSURLConnection 等）提供的类从 OAuth Web 服务获取数据。

我知道是这样，但是是什么让它变得如此困难，以至于几乎每个人都宁愿选择像 RestKit 这样的东西。**如果我想自己编写所有代码，我该怎么做。要使用哪些类，要考虑哪些事项，要参考的任何示例代码等。**

PS - 我之前真的试图在网上四处寻找，但没有任何结论性的文章可用。如您所知，尽管它们提供了极大的便利，但在使用 3rd 方库时仍有一些明显的事项需要考虑。变化频繁，你不知道它什么时候可能会退役。最重要的是，您会想知道项目中的每一行可见代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T13:55:04.397

OAuth 发生在网络上，传递请求并接收指示接下来需要发生什么的响应。因此，鉴于此，使用 NSURLConnection 发送请求，并实现委托方法来侦听响应或失败，并可能发送更多请求。

如果您第一次接触 OAuth，这可能会令人生畏，因为来回调用该方法似乎过于复杂。我建议获取一个简单的 OAuth 库（一个/非常/简单的 OAuth 库），并跟踪该代码。

# c# - 程序重启时的 JITted 机器指令

> ID：12398760
> 
> 赞同：0
> 
> 时间：2012-09-13T02:47:58.693
> 
> 标签：c#, .net, jit

当程序终止或重新启动时，JIT 编译器生成的机器代码/指令会发生什么。JIT 编译是否再次发生？如果是这样，它为什么要使用这种方法？

为了保持范围简单，我想具体了解.NET，但为了其他人的利益，欢迎回答其他实现

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T02:59:11.480

> JIT 编译是否再次发生？

是的，一般来说。

> 如果是这样，它为什么要使用这种方法？

一方面，它避免了 JITted 代码应该存储在哪里、存储多长时间等问题。另一方面，它避免了由于有人将硬盘驱动器移动到具有不同 CPU 的机器而导致代码无效。我怀疑人们认为 JIT 编译在大多数程序所花费的总时间中只占*相对较小的一部分。*

现在您*可以使用*[NGen](http://msdn.microsoft.com/en-us/library/6t9t5wcf.aspx)对程序集进行“预 JIT” - 但我认为它无法进行一些优化，并且如果您更改 CPU 等，生成的代码再次变得无效。

另请注意，.NET 框架本身将在首次安装时运行后台服务，以 JIT 编译框架库（这可能构成大多数应用程序运行的大部分代码）。大概它有一些聪明的地方可以在必要时重新编译……我从来没有仔细研究过它。

# jar - Gradle 1.1 - 创建 jar 匹配 sourceSets 的文件夹结构

> ID：12398761
> 
> 赞同：0
> 
> 时间：2012-09-13T02:47:59.973
> 
> 标签：jar, gradle, executable-jar

我现在可以使用 sourceSets{ } 编译带有依赖项的 java 源代码并将其他资源打包到 jar gradle 构建中以及修改 manifest.mf 属性，但我不知道如何自定义生成的 jar 的文件夹结构。理想情况下，我更愿意将我的源集的目录结构放在后面 - /java 用于 java 类， /conf 用于附加资源。我将如何在 gradle 1.1 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T20:00:17.350

您将添加自己的 Jar 任务并进行相应的配置。但是，我不太确定这样的 Jar 有什么用处。标准类加载器无法理解它。

# actionscript-3 - 使用 AS3 或 Flash Builder 录制带有声音的屏幕

> ID：12398763
> 
> 赞同：0
> 
> 时间：2012-09-13T02:48:09.567
> 
> 标签：actionscript-3, air, flash-builder

我正在开发一个钢琴应用程序，我想将屏幕与声音一起录制，以便用户录制一段音乐。我可以使用 AS3 或 Flash builder 做到这一点吗？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T05:30:51.533

据我所知，使用闪光灯将屏幕录制到电影中是不可能的。但是，可能有办法绕过它——这完全取决于你如何做事。

您可以使用 draw 函数和 bitmapData 对象为您的应用拍摄一系列“屏幕截图”，将其编码为一系列图像并对其进行处理。您还需要通过生成波形数据并将其发送到声音对象（并同时保存）来手动捕获声音，而不是直接播放。然而，这并不是一件容易的事，而且构建自己的“midi”格式可能更容易；

每次用户按下钢琴按钮时，向数组添加一个“动作”（按下了什么键，发生了什么帧/时间，您可能需要的任何其他信息）。然后你让用户将该数组保存到一个文件中，当他们想要“查看歌曲”时，使用数据“重播”歌曲（只需从数组中读取每个项目并从数据中伪造用户输入）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T05:55:34.783

不，我不这么认为，记录屏幕的 api 不公开（Adobe 将此功能与 Adob​​e Connect 一起使用）但不共享 API

# android - 如何使用 Android 首选项创建一次性欢迎屏幕？

> ID：12398767
> 
> 赞同：2
> 
> 时间：2012-09-13T02:49:06.870
> 
> 标签：android, version, sharedpreferences

我想创建一个仅在应用程序启动后显示一次的屏幕。之后，它将只显示主屏幕。我实现这一点的方式只是检查首选项并根据标志设置当前布局。以这种方式实施它有什么缺点吗？有没有更好的办法？

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //Here is the main layout
        setContentView(R.layout.main);      

        mPrefs = PreferenceManager.getDefaultSharedPreferences(this);

        // second argument is the default to use if the preference can't be found
        Boolean welcomeScreenShown = mPrefs.getBoolean(welcomeScreenShownPref, false);

        if (!welcomeScreenShown) {
            //Here I set the one-time layout
            setContentView(R.layout.popup_message);             
            SharedPreferences.Editor editor = mPrefs.edit();
            editor.putBoolean(welcomeScreenShownPref, true);
            editor.commit(); // Very important to save the preference
        }
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T03:20:06.627

尝试使用**应用程序版本代码**。下面是我使用的示例代码；

```
 SharedPreferences sharedPreferences = getSharedPreferences("version", 0);
    int savedVersionCode = sharedPreferences.getInt("VersionCode", 0);

    int appVershionCode = 0;

    try {
        appVershionCode = getPackageManager().getPackageInfo(getPackageName(), 0).versionCode;

    } catch (NameNotFoundException nnfe) {
        Log.w(TAG, "$ Exception caz of appVershionCode : " + nnfe);
    }   

    if(savedVersionCode == appVershionCode){
        Log.d(TAG, "$$ savedVersionCode == appVershionCode");
    }else{
        Log.d(TAG, "$$ savedVersionCode != appVershionCode");

        SharedPreferences.Editor sharedPreferencesEditor = sharedPreferences.edit();
        sharedPreferencesEditor.putInt("VersionCode", appVershionCode);
        sharedPreferencesEditor.commit();

        Builder alertDialogBuilder = new Builder(this);
        alertDialogBuilder.setTitle("Version");
        alertDialogBuilder.setMessage("This is one time show dialog box ");

        alertDialogBuilder.setNeutralButton("Close", new OnClickListener() {

            @Override
            public void onClick(DialogInterface dialog, int which) {
                Log.d(TAG, "$$ onClick");

            }
        });

        alertDialogBuilder.show();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T04:26:19.777

您可以使用下面的代码代替共享偏好，我也使用过很多次它会完美运行它只显示一次应用程序第一次启动

```
public class SplashActivity extends Activity {
protected boolean _isActive = true;
protected int _splashTime = 3000; //SplashActivity will be visible for 2s
final String TAG = "SplashActivity";

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.splash_activity);

    //a separate thread to manage splash screen
    final Thread splashThread = new Thread() {

        public void run() {

            try {
                int wait = 0;

                while (_isActive && (_splashTime > wait)) { //will show only on the first time
                    sleep(100);

                    if (_isActive) {
                        wait += 100;
                    }
                }
            } catch (InterruptedException e) {
                Log.d(TAG, e.getMessage());

            } finally {
                startActivity(new Intent(SplashActivity.this, MainActivityAbs.class));
                finish();
            }
        }
    };
    splashThread.start();
}

//if a user clicks on a back btnOrder, do not show splash screen

public boolean onTouchEvent(MotionEvent event) {
    if (event.getAction() == MotionEvent.ACTION_DOWN) {
        _isActive = false;
    }
    return true;
} 
```

# c# - 如何使用计时器控制c#/.net在程序过程中给出间隔

> ID：12398775
> 
> 赞同：0
> 
> 时间：2012-09-13T02:50:24.183
> 
> 标签：c#, .net, timer, intervals, time-wait

如何使用计时器控制在程序过程中给出间隔。

喜欢：

```
while(progressBar1.Value ! = 10)
{
    progressBar1.Value = progressBar1.value + 1;
   //i want to give 10 seconds interval here
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T03:22:35.463

- 将 Timer 拖到您的窗体上*，或者如果它不是 winform，则只需在代码中实例化一个 Timer 控件。* - 单击它并按 F4 以显示属性。
- 将 Timers Interval 属性设置为 10000*或以编程`timer1.Interval = 10000;`*方式。
- 将 Enabled 属性设置为 True*或以编程`timer1.Enabled = true;`*方式。
- 要查看计时器事件，请单击闪电图标（在属性窗口中）

然后双击 Tick 事件（属性窗口中称为 Tick 的行）。这将带您进入 Timers_Tick 事件，您可以在其中添加以下代码：

```
//This event will fire each 10 seconds
private void timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) 
{
 if (progressBar1.Value ! = 10)
 {
    progressBar1.Value = progressBar1.value + 1;
 }
} 
```

# c - 多维数组的某些元素错误地读取为零

> ID：12398779
> 
> 赞同：0
> 
> 时间：2012-09-13T02:51:20.310
> 
> 标签：c, arrays

我正在尝试使用多维数组来存储数据，但是，数组的某些索引似乎无法正常工作。我得到了大多数元素的正确数据，但即使读取的值不为零，它们中的一部分也会全部读取为零。数组最终看起来像这样：

```
-3.238467  -3.237679  -0.487128  -3.237634  -3.238513  -3.239868  
-3.239361  -3.238660  0.000000  -3.238610  -3.435949  -3.437109  
-3.622402  -3.621796  0.000000  -3.621911  -3.436662  -3.437587  
-3.237072  -3.236771  0.000000  -3.237329  -3.237926  -3.238605  
-3.227221  -3.227291  0.000000  -3.228477  -3.229173  -3.229775  
-3.204790  -3.205429  0.000000  -3.207087  -3.207956  -3.208255  
-2.618961  -2.621088  -2.622552  -2.623831  -2.624973  -2.625057 
```

即使我检查这样的值：

```
for(j=0; j<(num_cell_y); j++) {
    for(i=0; i<(num_cell_x); i++) {
      ...
      ...
      ...
      grid[i][j] = u_avg;
      printf("%f\n", u_avg);
      printf("%f\n", grid[i][j]);
    }
} 
```

我打印出两个不同的值：

```
-3.237675
0.000000 
```

有没有其他人发生过这种情况，或者知道我可能错过了什么导致这种情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T02:53:48.187

看来您需要按此顺序填充数组 -

```
grid[j][i] = u_avg;  // Note the indexes being reversed. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T03:04:51.183

顺序有误，这应该是

```
grid[j][i] = u_avg; 
```

您的订单发生了什么`grid[i][j] = u_avg;`

j 在外部循环中，因此它曾经为 i 固定，直到`i<(num_cell_x);`数组是多维的，并且根据您的代码，它会更改外部数组，例如

```
i    j
a[0][0]=>
a[1][0]=>
a[3][0]=> 
```

这是不正确的，所以如果你做 j 而不是 i

```
j    1
a[0][2]=>array(1=>'',2=>'',...)
a[1][0]=>
a[3][0]=> 
```

# php - URL、php 模式和 preg_replace

> ID：12398781
> 
> 赞同：0
> 
> 时间：2012-09-13T02:51:41.257
> 
> 标签：php, design-patterns, preg-replace

我正在尝试重写此 URL：

`http://www.mysite.com/index.php?topic=54.msg432#msg432`

对此：

```
http://www.mysite.com/index.php?thread=54&post=432 
```

使用 preg_replace。我试过这个：

```
echo preg_replace('|http?://www\.mysite\.com/index.php/topic=(\d)|', '\1',
                  'http://www.mysite.com/index.php?topic=54.msg432#msg432'); 
```

而且我无法获得线程:(我尝试使用手册，但 php 模式令人困惑。我习惯于 python RE 模式......

这也不起作用

```
php -r "echo preg_replace('~\?topic=(\d+).msg(\d+)~', '?thread=$1&post=$2', 'http://www.mysite.com/index.php?topic=54.msg432#msg432');" 

result:
http://www.mysite.com/index.php?thread=&post=#msg432 
```

另外，我会很感激一个好的 php 模式手册。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T03:04:18.637

尝试：

```
echo preg_replace('~\?topic=(\d+)\.msg(\d+).*~', '?thread=\1&post=\2', 'http://www.mysite.com/index.php?topic=54.msg432#msg432'); 
```

# ios - authPlayerWithCompletionHandler 已弃用，那么我该如何使用 authenticateHandler

> ID：12398782
> 
> 赞同：10
> 
> 时间：2012-09-13T02:51:52.177
> 
> 标签：ios, game-center, gamekit, ios6

标题中的问题非常多，authPlayerWithCompletionHandler 已弃用，那么我该如何使用 authenticateHandler？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-14T18:54:57.067

setAuthenticateHandler 在 iOS 6 中是新的，authenticateWithCompletionHandler 在 iOS 5 及更低版本中仍然必须使用。

此外，为 presentViewController:animated:completion: 提供完成处理程序并不是真正必要的，因为该完成处理程序是在显示游戏中心视图之后调用的，而不是在它完成时。

这是我的解决方案：

*注意*- 仅在 iOS 4.3、iOS 5.1、iOS 6.0 模拟器上测试 - 不在实际设备上测试。

*注意*- 这假设您已检查 GameCenter API 是否可用。

```
- (void)checkLocalPlayer
{
    GKLocalPlayer *localPlayer = [GKLocalPlayer localPlayer];

    if (localPlayer.isAuthenticated)
    {
        /* Perform additional tasks for the authenticated player here */
    }
    else
    {
        /* Perform additional tasks for the non-authenticated player here */
    }
}

#define SYSTEM_VERSION_LESS_THAN(v) ([[[UIDevice currentDevice] systemVersion] \
compare:v options:NSNumericSearch] == NSOrderedAscending)

- (void)authenticateLocalPlayer
{
        GKLocalPlayer *localPlayer = [GKLocalPlayer localPlayer];

        if (SYSTEM_VERSION_LESS_THAN(@"6.0"))
        {
            // ios 5.x and below
            [localPlayer authenticateWithCompletionHandler:^(NSError *error)
             {
                 [self checkLocalPlayer];
             }];
        }
        else
        {
            // ios 6.0 and above
            [localPlayer setAuthenticateHandler:(^(UIViewController* viewcontroller, NSError *error) {
                if (!error && viewcontroller)
                {
                    [[AppDelegate sharedDelegate].viewController
                    presentViewController:viewcontroller animated:YES completion:nil];
                }
                else
                {
                    [self checkLocalPlayer];
                }
            })];
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-14T08:24:52.463

我将此代码用于 iOS 6 及更高版本。没有编译器错误，它似乎工作正常。

```
#pragma
#pragma mark - Player Authentication
-(void)autheticatePlayer
{
    __weak typeof(self) weakSelf = self; // removes retain cycle error

    _localPlayer = [GKLocalPlayer localPlayer]; // localPlayer is the public GKLocalPlayer
    __weak GKLocalPlayer *weakPlayer = _localPlayer; // removes retain cycle error

    weakPlayer.authenticateHandler = ^(UIViewController *viewController, NSError *error)
    {
        if (viewController != nil)
        {
            [weakSelf showAuthenticationDialogWhenReasonable:viewController];
             }
             else if (weakPlayer.isAuthenticated)
             {
                 [weakSelf authenticatedPlayer:weakPlayer];
             }
             else
             {
                 [weakSelf disableGameCenter];
             }
             };
}

-(void)showAuthenticationDialogWhenReasonable:(UIViewController *)controller
{
    [[[[[UIApplication sharedApplication] delegate] window] rootViewController] presentViewController:controller animated:YES completion:nil];
}

-(void)authenticatedPlayer:(GKLocalPlayer *)player
{
    player = _localPlayer;
}

-(void)disableGameCenter
{

} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-20T05:00:45.517

这就是我想出的——它似乎有效。如果您认为我遗漏了任何内容，请随时编辑。

```
-(void)authenticatePlayer {
    GKLocalPlayer *localPlayer = [GKLocalPlayer localPlayer];
    [localPlayer setAuthenticateHandler:(^(UIViewController* viewcontroller, NSError *error) {
        if (!error) {
            [self presentViewController:viewcontroller animated:YES completion:^{
                if (localPlayer.isAuthenticated)
                {
                    // your code if authenticated
                }
                else {
                    // your code if not authenticated
                }
            }];
        }
        else {
            // error handling code here
        }
    })];
} 
```

# javascript - 如何禁用和启用 CSS 规则

> ID：12398783
> 
> 赞同：4
> 
> 时间：2012-09-13T02:52:06.207
> 
> 标签：javascript, html, css

例如，如果我有

```
<style type='text/css' id='divcolorgreen'>
    div{
        color: green;
    }
</style> 
```

我可以使用 3 种方式禁用 css 规则

*   删除样式元素（重新附加以重新启用）
*   修改它的内部html
*   将内联规则一一添加到每个元素（最好使用jquery）

有没有更简单的方法来禁用/删除 css 规则？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-13T03:08:19.387

这就是上课的目的。通过分配一个类，例如。到`<body>`标签，您将获得相同的功能：

```
<style type='text/css' id='divcolorgreen'>
    body.divcolorgreen div{
        color: green;
    }
</style> 
```

然后如果`<body>`看起来像这样：

```
<body class="divcolorgreen">
    ...
</body> 
```

规则被应用。要禁用规则，请删除提到的类：

```
<body>
    ...
</body> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T02:53:32.317

好的，所以您正在尝试更改页面上所有 div 的颜色。

jQuery`.css()`允许您设置与选择器匹配的所有元素的样式。在你的情况下，它只是`div`.

设置：

```
$('div').css('color', 'yellow'); 
```

去除：

```
$('div').css('color', ''); 
```

如果不想使用jQuery，思路是一样的：

`document.getElementsByTagName('div')`为您提供页面上的所有 div。您可以遍历它们并通过以下方式更改它们的样式`elem.style.color="yellow";`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T02:53:48.640

1 你可以通过 jquery `css( propertyName , value )`api 来做到这一点，但根据我的说法是更简单的方法，因为如果有很多风格，比如你已经设置了字体、颜色、高度，......第二种方法更容易，更节省时间

```
 $("div").css("color", "yellow") 
```

2 你可以这样`removeClass('someClass');`做`addClass('someClass');`

例如，使用 jQuery 选择器来定位具有“some”类的除法元素

html

```
<div class="some" ></div> 
```

css

```
.some{ color: green; } 
```

jQuery

如果你想添加另一个类可以使用 addClass

```
$(".some").click( function(){
   $(this).addClass('someClass');
}); 
```

如果您想删除该类，请使用 jQuery 的 removeClass 方法：

```
$(".some").click( function(){
   $(this).removeClass('someClass');
}); 
```

# perl - 使用 Perl 编写带有样式的 MS Word 2007

> ID：12398784
> 
> 赞同：0
> 
> 时间：2012-09-13T02:52:18.220
> 
> 标签：perl, cpan

如何使用 Perl 编写具有背景颜色、字体颜色/名称/大小等样式的 .doc 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T04:31:29.473

签出 CPAN 模块[Win32::Word::Writer](http://search.cpan.org/~johanl/Win32-Word-Writer-0.02/lib/Win32/Word/Writer.pm)

# symfony - symfony 2.1。如何从一个实体获取数据并将其显示在每一页上？

> ID：12398786
> 
> 赞同：2
> 
> 时间：2012-09-13T02:52:27.917
> 
> 标签：symfony, symfony-2.1

从一个实体获取一些数据并将其显示在每个页面上的最佳和最有效的方法是什么？我正在使用树枝和教义。

我有一个实体和数据库表，它只会有一个实例。它有公司名称等。它本质上是配置的东西，所以我知道配置文件更有效，但我希望它可以由管理员用户编辑。

我想我在问两个问题。我在哪里放置代码以在每个请求上检索实体以及如何将数据放入我的顶级树枝模板？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T04:57:40.430

您需要[嵌入一个控制器](http://symfony.com/doc/current/book/templating.html#embedding-controllers)。

在某些时候，您还想为这样的事情做一些[缓存](http://symfony.com/doc/current/book/http_cache.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T07:56:56.873

这不是您实际问题的答案，但我认为它解决了同样的问题。我正在使用[SonataBlockBundle](https://github.com/sonata-project/SonataBlockBundle)在我的页脚中呈现一个特定的可编辑块。我不认为你需要一个真正的单一实体，它有地址、公司名称等字段。有一个内容块并将 HTML 放入其中就足够了，所以你可以更灵活地添加一些内容，比如版权或相似的东西。

这种方法可能也很费力，因为实现 BlockBundle 比渲染控制器更具挑战性，但它可能值得研究，因为您也可以将它用于许多其他事情。

# javascript - 简单类测试未通过

> ID：12398787
> 
> 赞同：0
> 
> 时间：2012-09-13T02:52:30.743
> 
> 标签：javascript, coffeescript, jasmine

我是 JavaScript 的新手。我正在通过 Jasmine 的测试学习 Class。我试图通过测试，但尽管我很努力，但 Jasmine 并没有显示绿色。

我的代码如下：

```
// Generated by CoffeeScript 1.3.3
var Animal;

Animal = (function() {

  function Animal() {}

  Animal.prototype.walk = function() {
    return 'tok tok...';
  };

  return Animal;

})(); 
```

测试代码如下：

```
// Generated by CoffeeScript 1.3.3

describe("Animal", function() {
  var animal;
  animal = new Animal;
  it("shold walk", function() {
    expect(animal.walk).toBe('tok tok...');
  });
}); 
```

来自 Jasmine 的消息如下：

```
Expected Function to be 'tok tok...'.
Error: Expected Function to be 'tok tok...'.
    at new jasmine.ExpectationResult (http://localhost:8888/__JASMINE_ROOT__/jasmine.js:102:32)
    at null.toBe (http://localhost:8888/__JASMINE_ROOT__/jasmine.js:1194:29)
    at null.<anonymous> (http://localhost:8888/__spec__/AnimalSpec.js:8:25)
    at jasmine.Block.execute (http://localhost:8888/__JASMINE_ROOT__/jasmine.js:1024:15)
    at jasmine.Queue.next_ (http://localhost:8888/__JASMINE_ROOT__/jasmine.js:2025:31)
    at goAgain (http://localhost:8888/__JASMINE_ROOT__/jasmine.js:2015:18) 
```

我累死。谢谢你的好意...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T02:55:58.573

您需要执行函数，将函数的结果与字符串进行比较，而不是函数本身。

```
expect(animal.walk()).toBe('tok tok...'); 
```

# java - Glassfish/JMS MDB 事务中止

> ID：12398789
> 
> 赞同：0
> 
> 时间：2012-09-13T02:53:03.240
> 
> 标签：java, glassfish, jms, message-driven-bean

我的 Glassfish 3.1.2.2 应用程序中有许多 MDB，它们定期使用 JMS 消息。在应用程序启动后的一段时间内，一切似乎都可以完美运行——从 12 小时到几天不等。然后，我将开始反复收到如下错误。从错误文本（“客户端的事务中止”）中，听起来好像容器正在尝试在现有事务中运行 MDB，但该事务以某种方式中止，因此它无法调用 MDB。另一条信息是重新部署应用程序不会使错误消失。重新启动 Glassfish 似乎确实使错误消失（一段时间，之后它会重新出现），这让我想知道这是否是某种资源耗尽问题。

```
[#|2012-09-12T21:42:15.045+0000|WARNING|glassfish3.1.2|javax.resourceadapter.mqjmsra.inbound.message|_ThreadID=74;_ThreadName=Thread-2;|MQJMSRA_MR2001: run:Caught Exception from onMessage():Redelivering:
javax.ejb.EJBException
    at com.sun.ejb.containers.MessageBeanContainer.deliverMessage(MessageBeanContainer.java:1176)
    at com.sun.ejb.containers.MessageBeanListenerImpl.deliverMessage(MessageBeanListenerImpl.java:81)
    at com.sun.enterprise.connectors.inbound.MessageEndpointInvocationHandler.invoke(MessageEndpointInvocationHandler.java:171)
    at $Proxy614.onMessage(Unknown Source)
    at com.sun.messaging.jms.ra.OnMessageRunner.run(OnMessageRunner.java:260)
    at com.sun.enterprise.connectors.work.OneWork.doWork(OneWork.java:114)
    at com.sun.corba.ee.impl.orbutil.threadpool.ThreadPoolImpl$WorkerThread.performWork(ThreadPoolImpl.java:497)
    at com.sun.corba.ee.impl.orbutil.threadpool.ThreadPoolImpl$WorkerThread.run(ThreadPoolImpl.java:540)
Caused by: javax.ejb.TransactionRolledbackLocalException: Client's transaction aborted
    at com.sun.ejb.containers.BaseContainer.useClientTx(BaseContainer.java:4722)
    at com.sun.ejb.containers.BaseContainer.preInvokeTx(BaseContainer.java:4601)
    at com.sun.ejb.containers.MessageBeanContainer.beforeMessageDelivery(MessageBeanContainer.java:1040)
    at com.sun.ejb.containers.MessageBeanListenerImpl.beforeMessageDelivery(MessageBeanListenerImpl.java:77)
    at com.sun.enterprise.connectors.inbound.MessageEndpointInvocationHandler.invoke(MessageEndpointInvocationHandler.java:139)
    at $Proxy614.beforeDelivery(Unknown Source)
    at com.sun.messaging.jms.ra.OnMessageRunner.run(OnMessageRunner.java:247)
    ... 3 more
|#] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T19:51:56.397

当错误开始出现时，它是否仍然发生在同一个线程中？像`_ThreadID=74;_ThreadName=Thread-2`这种情况？我报告[了这个错误](http://java.net/jira/browse/GLASSFISH-18942)，其中一个线程仍然与回滚事务相关联，但是对此没有任何反应。但是在我们的数据库连接变得更加稳定之后，我们就摆脱了它。

在此错误开始发生之前，我会查找违规线程上的最后一个活动。

# iphone - iOS 6 - 区分 iPhone 5 和其他设备？

> ID：12398798
> 
> 赞同：6
> 
> 时间：2012-09-13T02:54:34.513
> 
> 标签：iphone, objective-c, xcode, ios6, iphone-5

随着今天 iPhone 5 和新 iPod 的发布，我开始着手优化我的应用程序，以利用新的、额外的屏幕空间。我已经到了我的应用不再是“信箱”的地步了。我知道现在还早，但有人知道我如何区分新的、更高的设备和旧的设备吗？

理想情况下，它会是这样的：

```
if (device is iPhone 5 or taller iPod touch) {
    do stuff that is ideal for the taller screen
} else {
   do what I've been doing before for the smaller screen
} 
```

谢谢！我希望其他人也能享受苹果今天宣布的内容！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-10T04:43:34.083

```
if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)
{
    CGSize result = [[UIScreen mainScreen] bounds].size;
    if(result.height == 480)
    {
        // iPhone Classic
    }
    if(result.height == 568)
    {
        // iPhone 5
    }
} 
```

[有关不同类型的检查，请参阅此链接](https://stackoverflow.com/questions/12446990/how-to-detect-iphone-5-widescreen-devices)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-17T22:27:07.717

```
- (BOOL)isTall
{
    CGRect bounds = [[UIScreen mainScreen] bounds];
    CGFloat height = bounds.size.height;
    CGFloat scale = [[UIScreen mainScreen] scale];

    return (([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) && ((height * scale) >= 1136));
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-13T02:58:29.820

在我的脑海中，您可以使用 UIScreen 的边界信息 `[UIScreen mainScreen].bounds`并检查高度或更好的屏幕比例。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-20T05:26:51.810

对于屏幕仍返回 480 而不是 568 的那些，您需要在应用程序设置的摘要选项卡中添加具有新尺寸的新启动图像。

# c# - 在 asp.net 3.5 中显示进程的实时百分比条

> ID：12398802
> 
> 赞同：1
> 
> 时间：2012-09-13T02:55:07.710
> 
> 标签：c#, jquery, asp.net, ajax

我的应用程序在 asp.net 3.5，C# 中。

我正在开发和应用程序，我正在从 excel 文件中读取产品详细信息并将该数据上传到另一个站点，例如使用 API.so 在读取或上传数据到 xyz 站点时我想显示百分比进度条。如果产品完成上传进度条应该有 1% 的进度。

任何人都可以建议我如何实现这一点。我发现很难在客户端站点上实时获取服务器值我也尝试使用页面方法来调用 Web 方法，但它没有工作。

如果有人知道这种东西的好例子，请帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T03:12:13.263

例子很多，google一下就知道了：）

[使用 jQuery 显示进度条](http://www.codeproject.com/Articles/66049/Showing-Progress-Bar-Using-jQuery)

[jquery 进度条和 ASP.NET RSS](http://forums.asp.net/t/1614640.aspx/1)

# php - 执行 php 函数的 onclick 事件的其他替代方法

> ID：12398806
> 
> 赞同：-1
> 
> 时间：2012-09-13T02:55:37.040
> 
> 标签：php, javascript, html

我已经读到我无法使用 JavaScript onclick() 事件来执行 php 脚本，我可以使用哪些其他替代方法？

我需要的是一个执行 php 函数的按钮，该函数将启动与远程肥皂客户端和服务器“回复状态指示器”的连接。

```
<?php 

 ini_set("soap.wsdl_cache_enabled", "0");

 $client = new
 SoapClient("http://xxxx:8085/axis2/services/RegistrationService?wsdl",array('excepltions' => 0));

---- rest of codes omitted ----
    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T02:59:04.370

没有*直接*的方法。那是因为 JS 运行在浏览器中，而 PHP 运行在服务器上。您必须向服务器发出请求。您可以通过以下几种方式做到这一点：

一种选择：创建一个链接，将您发送到包含您的 PHP 代码的 php 页面，然后将您重定向回来。

或者：AJAX。jQuery 让它变得非常简单。您可能可以使用[`get()`](http://api.jquery.com/jQuery.get/)

```
$.get("test.php", function(data){
     alert("Data Loaded: " + data);
}); 
```

test.php 将包含您的 PHP 代码，它会简单地回显返回的状态。当请求完成时，页面将警告“数据加载：” + php 回显的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T02:58:56.203

我不知道我是否遗漏了什么，但为什么你不能使用使用 ajax 的 onclick 函数来访问soap 函数。

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# c++ - C++ / Boost Filesystem - 检测到“_MSC_VER”不匹配：值“1700”与值“1600”不匹配

> ID：12398809
> 
> 赞同：9
> 
> 时间：2012-09-13T02:56:16.710
> 
> 标签：c++, visual-studio, boost, boost-filesystem

我是 C++ 和 Boost 的新手。我正在做一个简单的小程序来尝试学习 Boost Filesystem 库。我已按照指示构建 Boost 库。现在，当我尝试编译这个简单的代码时，我得到了 6 个这样的错误。

```
错误 5 错误 LNK2038：检测到“_MSC_VER”不匹配：值“1700”与 App.obj C:\SOURCE\ConsoleApp2\ConsoleApp2\libboost_filesystem-vc110-mt-gd-1_51.lib（codecvt_error_category）中的值“1600”不匹配.obj) ConsoleApp2  
错误 1 ​​错误 LNK2038：检测到“_MSC_VER”不匹配：值“1700”与 App.obj C:\SOURCE\ConsoleApp2\ConsoleApp2\libboost_filesystem-vc110-mt-gd-1_51.lib 中的值“1600”不匹配（操作.obj) ConsoleApp2  
错误 2 错误 LNK2038：检测到“_MSC_VER”不匹配：值“1700”与 App.obj C:\SOURCE\ConsoleApp2\ConsoleApp2\libboost_filesystem-vc110-mt-gd-1_51.lib 中的值“1600”不匹配（路径.obj) ConsoleApp2  
错误 3 错误 LNK2038：检测到“_MSC_VER”不匹配：值“1700”与 App.obj C:\SOURCE\ConsoleApp2\ConsoleApp2\libboost_filesystem-vc110-mt-gd-1_51.lib（path_traits）中的值“1600”不匹配.obj) ConsoleApp2  
错误 4 错误 LNK2038：检测到“_MSC_VER”不匹配：值“1700”与 App.obj C:\SOURCE\ConsoleApp2\ConsoleApp2\libboost_filesystem-vc110-mt-gd-1_51.lib(windows_file_codecvt) 中的值“1600”不匹配.obj) ConsoleApp2  
错误 6 错误 LNK1104: 无法打开文件 'libboost_filesystem-vc100-mt-gd-1_51.lib' C:\SOURCE\ConsoleApp2\ConsoleApp2\LINK ConsoleApp2  

```

我`App.cpp`在 ConsoleApp2 项目中的代码

```
#include <iostream>
#include <boost/filesystem.hpp>

using namespace std;
using namespace boost::filesystem;

int main(void) 
{
    path p = "C:\\TestFiles";
    cout << is_directory(p);

    return 0;
} 
```

我正在尝试使用 Visual Studio 2010 编译应用程序。我在网上找到的一些信息与 VS 2012 相关。我认为这不适用于我。我想尝试解决5个不匹配错误和最终链接错误。我希望最后一个错误与之前的 5 有关。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-13T04:56:53.780

`libboost_filesystem-vc110-mt-gd-1_51.lib`是一个使用 VS 2012（也称为 VC 11.0）构建的库，如`vc110`命名约定中所示。此库无法与使用 VS 2010（也称为 VC 10.0）构建的对象正确链接。

如果你想用 VS 2010 构建你的程序，你需要为 VS 2010 获取或构建 boost 库。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-30T05:38:43.500

`*.vcxproj`使用文本编辑器打开文件。

查找并删除`<_ProjectFileVersion>`元素，然后保存文件。

例子，

```
</ImportGroup>
<ImportGroup Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'" Label="PropertySheets">
  <Import Project="$(UserRootDir)\Microsoft.Cpp.$(Platform).user.props" Condition="exists('$(UserRootDir)\Microsoft.Cpp.$(Platform).user.props')" Label="LocalAppDataPlatform" />
</ImportGroup>
<PropertyGroup Label="UserMacros" />
<PropertyGroup>

  <_ProjectFileVersion>11.0.30319.1</_ProjectFileVersion> <--- Delete this element

</PropertyGroup>
<PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'"> 
```

并再次重建解决方案。您将看到项目编译成功。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-12T07:32:10.380

我试图编译 Teamcenter ITK C++ 代码并得到相同的错误消息：

> 错误 LNK2038：检测到“_MSC_VER”不匹配：值“1700”与 itk_main.obj 中的值“1600”不匹配

我所做的解决方法是搜索位于 c 中某处的 msvcprt.lib：（使用 Everything.exe 进行搜索，可在 voidtools.com 上找到）

在 NP++ 或文本编辑器中打开该文件，搜索关键字 _MSC_VER 并将值 /FAILIFMISMATCH:"_MSC_VER=1700" 更改为 /FAILIFMISMATCH:"_MSC_VER=1600"

是的，我能够编译。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-07-19T07:15:02.510

vignesh naidu 提到的解决方案对我有用。

但不完全是 msvcprt.lib

在错误消息中查找 .lib 文件。

就我而言，有 somefile.lib ，我在文件资源管理器中搜索了文件夹中的两个类似文件

1）发布 2）调试

在调试文件夹中打开 somefile.lib ，在 NP++ 中打开，找到并替换为 ex: 1700 和 1900 (VS 2015) 在我的情况下

重新编译，中提琴错误消失了。

对于为什么，其他用户给出的几个技术原因的简要说明。

PS：我在 VS2015 中编译 VS 2012 中的代码，1700 是 VS 2012 的编译器版本，1900 是 VS 2015 的编译器版本

# java - maven 集成测试阶段在类路径中附加 jbossall-client.jar

> ID：12398814
> 
> 赞同：0
> 
> 时间：2012-09-13T02:56:59.047
> 
> 标签：java, maven, intellij-idea

我正在尝试在我的 java 项目中使用 maven 设置集成测试阶段。我对 jboss 没有任何依赖关系（jboss-common-core 除外，它被 hibernate-entitymanager 传递地拉取）。我对故障安全插件的设置是：

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-failsafe-plugin</artifactId>
  <version>2.12</version>
    <executions>
      <execution>
        <phase>integration-test</phase>
        <goals>
          <goal>integration-test</goal>
          <goal>verify</goal>
        </goals>
       </execution>
    </executions>
 </plugin> 
```

当我运行`mvn integration-test -Dmaven.failsafe.debug`并连接我的调试器并进行评估时`System.getProperty("java.class.path")`，我在类路径中看到了一个 jbossall-client.jar！当我在 IntellJ 122.327 中本地运行测试时，类路径不包含 jbossall-client.jar。我一直在试图弄清楚为什么这个 jar 会被添加到类路径中。以前有没有其他人经历过这种情况？提前致谢。

更新：我尝试从我的 .m2/repository 目录中删除 jbossall-client 并仅运行 clean 和 package 阶段，看起来我的项目确实对此有依赖，因为这个 jar 在运行包时被下载。仍然很奇怪，因为我的 pom 对这个 jar 没有直接或传递的依赖。此外，当我尝试通过添加配置使用故障安全插件运行时将其排除在类路径中时

```
<classpathDependencyExcludes>org.jboss.client:jbossall-client</classpathDependencyExcludes> 
```

我收到以下错误：

```
Unable to parse configuration of mojo org.apache.maven.plugins:maven-failsafe-plugin:2.12:integration-test
 for parameter classpathDependencyExcludes: Cannot assign configuration entry 'classpathDependencyExcludes' 
with value 'org.jboss.client:jbossall-client' of type java.lang.String
 to property of type java.util.List -> [Help 1] 
```

[故障安全插件网站](http://maven.apache.org/plugins/maven-failsafe-plugin/examples/configuring-classpath.html)声明该标签应该具有我`groupId:artifactId`所拥有的价值。任何想法为什么这会失败？

第二次更新：刚刚意识到故障安全插件[网页](http://maven.apache.org/plugins/maven-failsafe-plugin/examples/configuring-classpath.html)中有一个错字。在他们的例子中：

```
 <classpathDependencyExcludes>
    <classpathDependencyExcludes>org.apache.commons:commons-email</classpathDependencyExcludes>
  </classpathDependencyExcludes> 
```

真的应该

```
 <classpathDependencyExcludes>
    <classpathDependencyExclude>org.apache.commons:commons-email</classpathDependencyExclude>
  </classpathDependencyExcludes> 
```

现在我可以通过解析错误，但是 jbossall-client 仍然被加载到类路径中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:36:42.123

我已经找到了问题，classpathDependencyExclude 标记按预期工作。我愚蠢地排除了错误的 groupId（当传递依赖是 jboss:jbossall-client 时，我排除了 org.jboss.client:jbossall-client）。我观察到的另一件事是 jbossall-client 是第 3 级传递依赖项（即，它是直接依赖项的第二个子项；myproject -> A -> B -> jbossall-client），它在父 pom 中定义一个 Maven 子模块（在我的示例中 B 是一个更大项目的子模块）。当我使用依赖插件检查 maven 依赖时，它报告实际项目依赖不包括 jbossall-client。但是由于某种原因，集成测试阶段似乎将其包含在类路径中。我将进一步调查，但现在黑客工作。

# android - 为什么 800x1280 模拟器无法正确显示为其设计的应用程序？

> ID：12398815
> 
> 赞同：0
> 
> 时间：2012-09-13T02:57:01.343
> 
> 标签：android, size, screen, emulation

我创建了一个 800x1280 模拟器（用于 Galaxy Note），并为它编写了一个应用程序。

photoshop 制作的原型 UI 是 800x1280 ，可以看到缩小的图片：

![在此处输入图像描述](../Images/30d3b3f6df7dbfcee8237096a733dabc.png)

它的宽度是 800 像素，高度是 1280 像素。

我没有 800x1280 的设备，但我有一个 720x1024 的设备（比 Galaxy Note 小），你可以看到从我的 android pad 捕获的真实应用程序：

![在此处输入图像描述](../Images/b03c277b0c4459c1db26978a1817fc64.png)

但是当我将它部署到 800x1280 模拟器中时，它变成：

![在此处输入图像描述](../Images/dca1b3f185c20c438b23e84dc26653be.png)

您可以看到左侧面板看起来更小，并且空间不足以显示这些文本。

800x1280 avd 的设置为：

![在此处输入图像描述](../Images/643bf577819d70dda32ac4b2e727e0a8.png)

但为什么它看起来比 700x1024 的垫子小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T06:15:30.343

android系统理解的LCD的密度是dp（密度无关像素），计算dp的公式是px=dp * (dpi / 160) 所以如果你把屏幕的物理dpi设置为160 dpi。一个物理像素等于 dp，因此您的分辨率显示正确。之前发生的事情是您的 LCD 密度为 320 dpi，这意味着一个物理像素等于 2 pd，因此一切都显得扩展了。我希望你现在明白原因了。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T06:04:44.527

最后，我发现如果我设置`Abstract LCD density`为`160`，模拟器的屏幕是正确的。我不知道为什么，但它有效。

# recursion - SCHEME 中的完美数递归。（初学者）

> ID：12398816
> 
> 赞同：1
> 
> 时间：2012-09-13T02:57:09.447
> 
> 标签：recursion, scheme, racket, perfect-numbers

嘿，所以我正在创建一个函数（除数 n），它应该借助模函数和一个充当从数 n 向下的计数器的函数来计算数 n 中除数的数量。我的问题是模函数应该输出真或假，这取决于数字是否是整数，但是我的 if 语句

```
(if (= (divides n k) #f)
    0 
```

我不确定为什么，但代码不会将 if 语句评估为 true 或 false .. 它只是跳过它。我也不确定 0 是否应该是正确的输出，我希望它只是跳过该数字而不计算它。

这是我的代码：

```
(define (divides a b) (= 0 (modulo b a)))
(define (divisors-upto n k)
  (if (= (divides n k) #f)
      0
      (+ k (divisors-upto n (- k 1)))))
(define (divisors n) (divisors-upto n n))

(divisors 4) ;for example should produce the result 3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T03:03:50.870

从修复`divides`过程开始，您将参数反转为`modulo`. 它应该是这样的：

```
(define (divides a b)
  (= 0 (modulo a b))) 
```

以上测试 if `b`divides `a`，这就是您在过程中使用它的`divisors-upto`方式。你也应该替换这个：

```
(= (divides n k) #f) 
```

有了这个：

```
(equal? (divides n k) #f) 
```

或者更好的是，这个：

```
(not (divides n k)) 
```

除此之外，这不是您之前[发布](https://stackoverflow.com/questions/12379432/scheme-recursion-perfect-number-beginner-hopefully-easy-fix)的同一个问题吗？我在那里告诉你，你在递归中遗漏了一个案例，请查看我之前在链接中的答案。

如果它不是相同的程序，那么我不太确定您想要做什么：在这个问题中，您声明该程序“应该计算一个数字中的除数”，但这不是程序是什么做 - 你正在添加*实际的除数*（`k`过程中的参数）而不是*除数的数量*。再一次，你会错过一个案例——如果电流`k`不是除数会发生什么？递归会过早退出！试着做一点，填空：

```
(define (divisors-upto n k)
  (cond ((zero? k)
         <???>) ; how many divisors are there if k is zero?
        ((not (divides n k))
         <???>) ; if k is not a divisor of n, we must proceed without incrementing
        (else   ; if k is a divisor of n, by how many should the count be incremented?
         (+ <???> (divisors-upto n (- k 1)))))) 
```

# php - Smarty 日期格式？

> ID：12398817
> 
> 赞同：0
> 
> 时间：2012-09-13T02:57:20.727
> 
> 标签：php, date, formatting, smarty

我正在建立一个RSS提要。

我需要输出一个日期，我传递了一个 date_format 函数可以理解的日期，但我不确定如何格式化日期以使其符合 RFC 822 标准。

我需要输出这样的日期：Tue, 10 Jun 2003 09:41:01 GMT

我应该使用什么格式，或者是否有其他修饰符？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T03:00:43.450

来自[DateTime 的 PHP 文档](http://php.net/manual/en/class.datetime.php)：

```
const string RFC822 = "D, d M y H:i:s O" ; 
```

对应的 Smarty 字符串应该是`"%a, %d %b %Y %H:%M:%S %z"`.

# css - 带有css的旋转div上的链接似乎不起作用

> ID：12398820
> 
> 赞同：5
> 
> 时间：2012-09-13T02:57:44.370
> 
> 标签：css, html, hyperlink

我在旋转的 div 中显示一些图像并超链接它们。但是，链接似乎不起作用....有人可以解释为什么会这样吗？

链接： http: [//inetgate.ca/dev/portfolio](http://inetgate.ca/dev/portfolio) 使用 admin/test 来通过密码提示。

谢谢！罗恩

示例代码：

```
<div id="pic-7" class="pic" style="height:130px; width:110px; top:9px;left:370px; -moz-transform:rotate(-16deg); -webkit-transform:rotate(-16deg); position: absolute; background-color:#fff;background-position:center top;font-size:80%">
            <div align="center">
            <img style="margin-top:4px; border: 1px solid #999;" src="gallery/img/thumbs/wittmerperformance.png"/><a class="fancybox" rel="fncbx" href="http://www.wittmerperformance.com/" target="_blank" onclick>Wittmerperformance
            </a></div>
    </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T16:38:52.693

删除具有子标签`position:absolute;`的 div 上的。`<a>`这将解决您的问题。当在绝对定位元素内嵌套可点击链接时，`<a>`标签本身也必须绝对定位才能使其可点击，这是由于 CSS 优先级。为什么不直接制作 div ，`position:absolute;`然后`relative`你就不会遇到这个问题。或者只是制作它`<a>`本身`absolute`。简单修复！

# c++ - 声明对象

> ID：12398824
> 
> 赞同：0
> 
> 时间：2012-09-13T02:58:06.960
> 
> 标签：c++, linked-list

```
class LinkTest{
public:

    LinkTest(){
    }
    void start(){
        List list;
        Node * n ;
        for(int i = 0; i < 5; i++){

         //using pointer
           // n = new Node(i);
           // list.add(n);

        //not using pointer
            Node n(i);
            list.add(&n);
        }
        list.displayAll();
    }
};

    class List{
public:
    Node * first, *last;

    List(){
        first = last = NULL;
    }

    void add(Node *n){
        if(first == NULL){
            first = last = n;
        }else{
            last->next = n;
            n->prev = last;
            last = n;
        }
    }

    void displayAll(){
        while(first != NULL){
            first->display();
            first =first->next;
        }
    }
}; 
```

我有一些 Java 经验，但我是 C++ 新手。我在这里做一个链表测试。

如果我使用指针，我将得到正确的输出（0 到 4）。但是，如果我不使用指针而只是像本地声明一样使用，那么输出就像是无限的 4。有人可以向我解释一下吗？

如果我是对的，本地声明“节点 n(i)”会将 n 放入堆栈，这是否意味着在下一个循环中 n 将被新的 n(i+1) 替换？还是只将 n(i+1) 添加到堆栈中？为什么输出是一堆4？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T03:02:52.110

您在此处声明的对象

```
Node n(i); 
```

是自动存储的本地对象，所以是的，它存在于堆栈中，更具体地说，存在于本地堆栈帧中。一旦本地范围结束，即 for 循环结束，它将不复存在。

但是您获取该对象的地址并将其放入超出当前范围的列表中。该地址将继续指向堆栈中的某个位置，但将不确定存储在那里的内容。

所以你看到的是未定义的不行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T03:03:37.740

`n`循环的每次迭代都超出范围，因此您将最终无效对象的地址传递给您的列表。一旦循环完成并且您尝试打印结果，您会遇到未定义的行为，试图访问那些（现在无效的）对象。

# php - 解析外部网站表

> ID：12398825
> 
> 赞同：0
> 
> 时间：2012-09-13T02:58:08.633
> 
> 标签：php, html, parsing, dom, web-scraping

上有一个日历：[http](http://www.friendsbalt.org/upper/stulife/calendar.asp) ://www.friendsbalt.org/upper/stulife/calendar.asp以静态表的形式，我想让服务器抓取并逐行解析出表。这可能吗？您将如何以最有效的方式做到这一点？代码示例将是惊人的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-13T03:23:04.310

如果您希望它由网页完成，您可以使用类似[Simple HTML DOM for php 之类的东西。](http://simplehtmldom.sourceforge.net/)

```
require "simple_html_dom.php"; //Get this file from the link above
$html = file_get_html("http://example.com");
$data = array();
foreach($html->find("table tr") as $tr){
    $row = array();
    foreach($tr->find("td") as $td){
        /* enter code here */
        $row[] = $td->plaintext;
    }
    $data[] = $row;
} 
```

然后所有数据都将在 $data 变量中。

```
var_dump($data); //To prove it works. 
```

我会考虑将其放入“刷新”脚本中，并将所有信息保存到数据库中。然后你可以从数据库中获取信息——这几乎是即时的。

然后，如果你愿意，你可以制作一个 cron 脚本，让它每小时运行一次——更新数据库，使其中的信息保持最新。

这真的取决于你想用它做什么:)

# c# - 如何获取网页链接的url内容

> ID：12398826
> 
> 赞同：0
> 
> 时间：2012-09-13T02:58:11.317
> 
> 标签：c#, asp.net, security, web-applications

假设我有一个需要通过用户 ID 的 Web 应用程序

上一页的网址是

[http://app1.faceicicle.com/admin/entryAction.do?action=first&locale=&sessionID=5q2m04k9c5362p50b17b63p53679jx25&login=8121support&prjLinkURL=&moduelType=&reminderLink=&toModule=&toProject=](http://app1.faceicicle.com/admin/entryAction.do?action=first&locale=&sessionID=5q2m04k9c5362p50b17b63p53679jx25&login=8121support&prjLinkURL=&moduelType=&reminderLink=&toModule=&toProject=)

如何获取用户 ID、会话 ID 或密码的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T03:09:10.290

您可以通过访问响应对象的查询字符串属性来访问此类参数

```
Request.QueryString; 
```

例如，查看[文档](http://msdn.microsoft.com/en-us/library/system.web.httprequest.querystring.aspx#Y0)

但是，从安全角度来看，您可能希望以表单而不是 url 参数的形式传递用户 ID 和密码

# c# - 为什么无法使用 Selenium 通过 id 找到网页元素

> ID：12398844
> 
> 赞同：1
> 
> 时间：2012-09-13T03:00:30.160
> 
> 标签：c#, selenium-webdriver, ui-automation

尝试使用 Selenium，创建了一个非常简单的示例

```
static void Main(string[] args)
        {
            using (IWebDriver driver = new InternetExplorerDriver())
            {

                driver.Navigate().GoToUrl("https://gmail.com");

                IWait<IWebDriver> wait = new WebDriverWait(driver, TimeSpan.FromSeconds(2.00));
                wait.Until(d => ExpectedConditions.ElementExists(By.Id("Email")));

                Console.WriteLine("Page loaded ...");

                IWebElement userNameElt = driver.FindElement(By.Id("Email"));

                while (!userNameElt.Displayed)
                {
                    Console.WriteLine("Page not finished loading yet ...");
                    Thread.Sleep(3000);
                }

                userNameElt.SendKeys("my@sample.com");
                userNameElt.Submit();

                IWebElement passwordElt = driver.FindElement(By.Id("Passwd"));
                userNameElt.SendKeys("password");
                userNameElt.Submit();

                IWebElement submitBtnElt = driver.FindElement(By.Id("signIn"));
                submitBtnElt.Click();
            }
        } 
```

但它抱怨找不到元素

```
Started InternetExplorerDriver server (64-bit)
2.25.3.0 
Listening on port 1423 
Page loaded ...

Unhandled Exception: OpenQA.Selenium.NoSuchElementException: Unable to find element with id == Email 
```

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T14:07:00.497

通过您的示例可以想到几件事。

首先，根据您的网络，Wait 的超时时间可能太短。两秒钟可能不够长。将其提高到十个，看看它是否更稳定。

其次，从等待中放弃 lambda-fu。这是不正确的，你只需要一个简单的

```
wait.Until(ExpectedConditions.ElementExists(By.Id("Email"))); 
```

另外，请记住，您的手动 while (!userNameElt.Displayed) 循环没有意义。您已经等待上面的那个元素，所以这个循环不应该发挥作用。

最后，您不需要在使用 SendKeys() 后对元素进行 Submit()。

这是一个重构的代码块，它很稳定并且可以解决问题。

```
using (IWebDriver driver = new InternetExplorerDriver())
{
    driver.Navigate().GoToUrl("https://gmail.com");

    IWait<IWebDriver> wait = new WebDriverWait(driver, TimeSpan.FromSeconds(2.00));
    wait.Until(ExpectedConditions.ElementExists(By.Id("Email")));

    driver.FindElement(By.Id("Email")).SendKeys("mysample.com");

    wait.Until(ExpectedConditions.ElementExists(By.Id("Passwd")));
    driver.FindElement(By.Id("Passwd")).SendKeys("password");

    driver.FindElement(By.Id("signIn")).Click();
} 
```

# jquery - .html() 返回未定义

> ID：12398846
> 
> 赞同：4
> 
> 时间：2012-09-13T03:00:46.390
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3

我是 JQuery 新手，无法获取 div 块的内容。

```
 <div class="update_status">
    Updated successfully
  </div> 
```

当以下脚本运行时：

```
$(document).ready(function () {
  $(function () {
    var $status_div = $("#update_status");
    if ($status_div) {
      alert("1");
      alert($status_div.html());    
      alert("2");
    } else {
      alert("undefined");
    }
  });
}); 
```

我收到三个警报，“1”、“未定义”和“2”。我希望得到“更新成功”。关于我做错了什么有什么想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-13T03:02:59.550

`#`用于查找元素`id`。你正在使用一个类，所以你需要`.`

```
$(".update_status"); 
```

[http://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T03:03:07.377

`update_status`是一个类，所以选择器应该如下：

`var $status_div = $(".update_status");`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-13T03:03:16.393

将类更改为 id

```
<div class="update_status">
    Updated successfully
  </div> 
```

到

```
<div id="update_status">
    Updated successfully
  </div> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T03:40:48.163

您应该使用`.`而不是，`#`因为它`class`不是`id`

`var $status_div = $(".update_status");`

**并且还使用**

`if ($status_div.length) {`

而不是

`if ($status_div) {`

因为后者总是返回一个`true`

# mysql - 在 MySQL 中创建视图时出错

> ID：12398847
> 
> 赞同：1
> 
> 时间：2012-09-13T03:01:27.933
> 
> 标签：mysql, sql, views

我想为这个以前可以正常工作的 sql 语句创建一个视图。但是当我将它创建到一个视图中时，一个错误提示显示，`"View's SELECT contains a variable or parameter."`谁能告诉我错误在哪里，因为我对 MySQL 中的视图很陌生。谢谢！

```
CREATE VIEW `satsschema`.`viewTimeBreak` AS 
SELECT a.EmpName, CONCAT(b.StartTime, '-', b.EndTime) AS ShiftTime, CONCAT(a.EmpTime,     '-', ADDTIME(a.EmpTime, '0 1:0:0.000000')) AS BreakTime, a.Break, 
                     a.EmployeeOnBreak, '' AS SignIn, '' AS SignOut
FROM            satsschema.employeeslot a INNER JOIN
                     satsschema.ufis b ON b.UFISID = a.UFISEmpGroup
WHERE        (a.AllocationDate = @AllocationDate) AND (a.LocationName = @LocationName)   AND (a.Break = 1)
GROUP BY a.EmpName 
```

这部分显示了我尝试使用 sql 语句创建视图时的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T03:08:02.427

`VIEW`s**不能**像存储过程和函数一样有参数。SO用户之前已经回答了这个问题：**[view with parameter](https://stackoverflow.com/a/5331792/491243)**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T03:09:04.900

您不能在视图本身的查询定义中使用 @AllocationDate 和 @LocationName 之类的变量。

相反，您可以做的是

```
CREATE VIEW `satsschema`.`viewTimeBreak` AS 
SELECT 
    a.EmpName, 
    CONCAT(b.StartTime, '-', b.EndTime) AS ShiftTime, CONCAT(a.EmpTime,     '-', ADDTIME(a.EmpTime, '0 1:0:0.000000')) AS BreakTime, 
    a.Break, 
    a.EmployeeOnBreak, '' AS SignIn, 
    '' AS SignOut,
    a.AllocationDate,
    a.LocationName 
FROM            
    satsschema.employeeslot a 
    INNER JOIN satsschema.ufis b 
            ON b.UFISID = a.UFISEmpGroup 
```

然后把使用视图时的条件

所以你的 SELECT 语句将是

```
SELECT * FROM `satsschema`.`viewTimeBreak` a 
WHERE 
(a.AllocationDate = @AllocationDate) 
AND (a.LocationName = @LocationName)   
AND (a.Break = 1)
GROUP BY a.EmpName 
```

# apache - 本地机器上的 example.com VirtualHost

> ID：12398848
> 
> 赞同：-1
> 
> 时间：2012-09-13T03:01:35.747
> 
> 标签：apache, web, virtualhost

**我正在尝试做的事情**：添加一个站点（`example.com`）到`apache2/sites-available`（我已经指定了它的文档根目录），然后启用它，然后在我的本地机器上访问它（如`example.com`在浏览器中）。我有以下一些疑问：

1.  是否可以创建一个网站并为其指定一个特定的域 ( `example.com`)？
2.  为了创建站点、提供域并仅在我的本地计算机上访问它，我需要遵循哪些步骤？

**注意：**我有网站的内容。我想创建一个新站点，并且不想更改 Apache 的**默认**站点（即`apache2/sites-available/default`）。

**更新：**

我在重新启动 Apache 时遇到了一个错误（我已经`VirtualHost`按照描述添加了一个）

错误

```
CustomLog takes two or three arguments, a file name, a custom log format string or format name, and an optional "env=" clause (see docs)
Action 'configtest' failed.
The Apache error log may have more information.
   ...fail! 
```

我的网站文件

```
<VirtualHost *:80>

        ServerAdmin webmaster@localhost
        ServerName dev.subhransu.com

        ScriptAlias /private /home/hg/repositories/private/hgweb.cgi
        <Directory /home/hg/repositories/private/>
                Options ExecCGI FollowSymlinks
                AddHandler cgi-script .cgi
                DirectoryIndex hgweb.cgi
                AuthType Basic
                AuthName "Mercurial repositories"
                AuthUserFile /home/hg/tools/hgusers
                Require valid-user
        </Directory>

        ErrorLog ${APACHE_LOG_DIR}/dev.subhransu.com_error.log

        # Possible values include: debug, info, notice, warn, error, cr$
        # alert, emerg.
        LogLevel warn

        CustomLog ${APACHE_LOG_DIR}/dev.subhransu.com_ssl_access.lo$

        SSLEngine on
        SSLCertificateFile "/etc/apache2/ssl/dev.subhransu.com.crt"
        SSLCertificateKeyFile "/etc/apache2/ssl/dev.subhransu.com.k$

</VirtualHost> 
```

**httpd.conf 文件**

```
<VirtualHost *:80>
ServerName  dev.subhransu.com
ServerAlias www.dev.subhransu.com
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T03:06:28.530

在`httpd.conf`（或虚拟主机）中，`ServerName`和`ServerAlias`设置是 Apache 将响应的域名

```
ServerName example.com
ServerAlias www.example.com 
```

然后只需编辑您的主机文件以`example.com`指向`127.0.0.1`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T03:08:24.160

我认为您可能正在寻找的功能是虚拟主机。使用虚拟主机，您可以创建任意数量的站点，每个站点都相互独立。对于每个虚拟主机，您可以指定作为您的域的“ServerName”指令，可以是您想要的任何内容。然后在您的计算机主机文件中，您可以将对该域的所有调用路由到本地主机。

如果您只有一个需要设置的站点，只需编辑默认的 apache 配置，不理会 vhosts，然后更新您机器上的 hosts 文件，正如我之前提到的。

参考： [vhost 示例](http://httpd.apache.org/docs/2.2/vhosts/examples.html) [如何编辑您的主机文件](http://www.howtogeek.com/howto/27350/beginner-geek-how-to-edit-your-hosts-file/)

# vb.net - 使用字符串变量作为表达式

> ID：12398850
> 
> 赞同：1
> 
> 时间：2012-09-13T03:01:51.110
> 
> 标签：vb.net, string, compiler-construction, command

将命令作为变量传递。我正在创建一个 POP3 客户端，当我想到一些有趣的事情时，我正在研究一些代码。

是否可以将 vb 代码字符串传递给对象，以便对象执行它。我比较熟悉 vb.net 的源代码被转换为中间语言，然后被扔到 JIT 虚拟机中，但我希望有一种简单的方法来实现这个想法。

我希望能够使用字符串

```
Dim Command as string 
    Command = "If a + b > 0 then c = a + b" '<----syntactical sugar!
    System.Compiler.Something.execute(command) 
```

如果有人对上述任何内容有任何指示或任何更正。我很感激你的时间。

啊！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T04:01:52.133

作为开始，您可能需要查看开源[FileHelpers](http://www.filehelpers.com)项目。该项目中的 Runtime.ClassBuilder 类从文本创建一个 .Net 类，然后可以将其用作普通类。

# sql-server - 如何提高数据插入/更新性能？

> ID：12398852
> 
> 赞同：6
> 
> 时间：2012-09-13T03:02:40.237
> 
> 标签：sql-server, performance, delphi, delphi-7, ado

我需要提高数据加载的性能。当前算法从表中进行全选：

```
select Field1, Field2,...,FieldN from Table1 order by FieldM 
```

新数据是从文本文件中读取的（例如，每个数据表行的文本文件行）。该表有一个主键，包含两个字段。对于文本文件的每一行，它通过这两个字段（即主键）定位必要的行。

```
query.Locate('Field1;Field2',VarArrayOf([Value1,Value2]),[]); 
```

如果`Locate`返回`True`，则编辑该行，否则添加一个新行。

因此，就表包含大约 200000 行而言，每个`Locate`操作都需要一定的时间……因此它每秒可以更新大约 5-6 行。

我应该考虑哪些事情来改进它？

可能用单独的查询替换通过这个很棒的选择进行定位？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-13T05:57:09.177

不要使用定位（）。如果您使用 locate() 那么 Delphi 在客户端搜索行只是从您的查询中扫描行集，这需要很多时间。

如果您有权访问 MSSQL 来创建存储过程，则创建以下过程并在没有任何条件的情况下为您的 TEXT 文件中的每一行运行它（在 Delphi 中使用 TAdoStoredProc.ExecProc）。所以在这种情况下，您不需要先选择和定位程序。如果找到 Filed1 和 Field2，它会更新记录，如果没有，则插入。

```
CREATE PROCEDURE dbo.update_table1 
@Field1 int, --key1
@Field2 int, --key2
@Field3 int, -- data fileds
@Field4 int

AS

SET NOCOUNT ON
update table1 set Field3=@Field3,Field4=@Field4 
        where Field1=@Field1 and Field2=@Field2;
IF(@@Rowcount=0)
BEGIN
     insert into table1(Field1,Field2,Field3,Field4) 
                values (@Field1,@Field2,@Field3,@Field4);
END
GO 
```

下面是使用 ADO 调用此存储过程的 Delphi 代码：

```
......
var 
     ADOStoredP: TADOStoredProc;

  ......
begin

........
    ADOStoredP:=TADOStoredProc.Create(nil);
   try
      ADOStoredP.Connection:=DataMod.SQL_ADOConnection; //Your ADO Connection instance here
      ADOStoredP.ProcedureName:='Update_table1';
      ADOStoredP.Parameters.CreateParameter('@Field1', ftInteger, pdInput, 0, 0);
      ADOStoredP.Parameters.CreateParameter('@Field2', ftInteger, pdInput, 0, 0);
      ADOStoredP.Parameters.CreateParameter('@Field3', ftInteger, pdInput, 0, 0);
      ADOStoredP.Parameters.CreateParameter('@Field4', ftInteger, pdInput, 0, 0);

      While () -- Your text file loop here
      begin

      ADOStoredP.Parameters.ParamByName('@Field1').Value:=Field1 value from text file here;
      ADOStoredP.Parameters.ParamByName('@Field2').Value:=Field2 value from text file here;
      ADOStoredP.Parameters.ParamByName('@Field3').Value:=Field3 value from text file here;
      ADOStoredP.Parameters.ParamByName('@Field4').Value:=Field4 value from text file here;

      ADOStoredP.ExecProc;

      end

    finally
      if Assigned(ADOStoredP) then
        begin
         ADOStoredP.Free;
        end;
    end;

........
end; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-13T05:04:07.457

1.  如果可能，那么您应该将文本文件发送到运行 SQL Server 的服务器。然后使用[OPENROWSET(BULK)](http://msdn.microsoft.com/en-us/library/ms190312.aspx)打开文本文件（请参阅“E. 使用带有格式文件的 OPENROWSET BULK 提供程序从文本文件中检索行”）。
2.  如果您无法将文本文件发送到服务器，则创建临时或持久数据库表并使用 INSERT 将所有文本文件行插入表中。
3.  如果您使用的是 SQL Server 2008，那么您应该使用[MERGE](http://technet.microsoft.com/en-us/library/bb510625.aspx)运算符。如果 SQL Server 版本比较旧，那么可以使用两个 SQL 命令：UPDATE 和 INSERT。并作为数据源使用 (1) OPENROWSET 或 (2) DB 表。

# hadoop - Louvain方法有hadoop实现吗？

> ID：12398868
> 
> 赞同：4
> 
> 时间：2012-09-13T03:04:29.160
> 
> 标签：hadoop, mapreduce

这是在社交图中找到社区的 louvain 方法。 [https://sites.google.com/site/findcommunities/](https://sites.google.com/site/findcommunities/) 我想在大图上运行它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-07-08T13:52:11.317

如果你没有停留在 Hadoop 上，我看到了 Apache Spark 的这个实现。 [https://github.com/Sotera/spark-distributed-louvain-modularity](https://github.com/Sotera/spark-distributed-louvain-modularity)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T10:26:45.813

我不知道这种聚类方法的实现，它看起来是基于模块化的。Hadoop 生态系统中集群算法的主要来源是 Mahout。

看看这里：[https ://cwiki.apache.org/confluence/display/MAHOUT/Algorithms](https://cwiki.apache.org/confluence/display/MAHOUT/Algorithms)

也许列出的聚类算法之一可以工作或为您自己的实现提供基础。

# gstreamer - 无法将 videotestsrc 和 uridecodebin 与 GStreamer/videomixer 混合

> ID：12398869
> 
> 赞同：0
> 
> 时间：2012-09-13T03:04:30.963
> 
> 标签：gstreamer

如何使用 GStreamer videomixer 插件混合直播源和非直播源？

混合 uridecodebin（一些 mpeg 视频）和 videotestsrc 时，Gst-launch 不显示任何内容

```
gst-launch \
videomixer name=mix sink_0::zorder=0 sink_1::zorder=1 ! ffmpegcolorspace ! autovideosink \
uridecodebin uri=file:///test.mpg ! timeoverlay ! videoscale ! video/x-raw-yuv,width=704 ,height=576 ! queue ! mix.sink_0 \
videotestsrc ! video/x-raw-yuv, width=176,height=144 ! queue ! mix.sink_1 
```

但是，如果我将两个源都更改为 mpeg 视频，它会起作用，

```
gst-launch 
videomixer name=mix sink_0::zorder=0 sink_1::zorder=1 ! ffmpegcolorspace ! autovideosink 
uridecodebin uri=file:///test.mpg ! timeoverlay ! videoscale ! video/x-raw-yuv,width=704 ,height=576 ! queue ! mix.sink_0 
uridecodebin uri=file:///test.mpg ! timeoverlay ! videoscale ! video/x-raw-yuv,width=176,height=144 ! queue ! mix.sink_1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T01:48:34.500

看来我犯了一个愚蠢的错误。这是我对自己问题的回答：使用上述命令和测试的视频剪辑，它们输出不同的视频格式。将videotestsrc的视频格式强制为I420后，运行正常。

这是一个混合的命令：

gst-launch -v videomixer name=mix sink_0::zorder=0 sink_1::zorder=1 ！ffmpeg色彩空间！autovideosink uridecodebin uri=file:///media/sf_share/test.mpg ！时间叠加！视频缩放！视频/x-raw-yuv，宽度=704，高度=576！videorate force-fps=-1 ！队列 ！mix.sink_0 videotestsrc ！视频/x-raw-yuv，宽度=352，高度=288，格式=（fourcc）I420！时间叠加！队列 ！mix.sink_1

# c++ - 基于 C++ 种子的标准且可移植的伪随机数生成器

> ID：12398870
> 
> 赞同：2
> 
> 时间：2012-09-13T03:04:42.820
> 
> 标签：c++, random

如果我想开始用 C++ 构建[PRNG](http://en.wikipedia.org/wiki/Pseudorandom_number_generator)，什么是最适合这项工作的积木？

是否有任何具有可预测行为（带有种子）和伪随机的标准化和可移植库？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T03:17:47.907

当你说“便携”时，我假设你想要给定相同种子的相同随机数序列，无论它们是为哪个平台编译的。伪随机数生成器应该提供相同的序列，只要它们基于相同的算法。我认为[boost::random](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_random.html)是你最好的选择，它是一个很好的随机数生成器（比`rand`在许多情况下更好），具有跨平台的可预测行为。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T12:19:29.233

C++11 提供了大量可移植的随机数生成器。这是由费米实验室的人推动的，他们对亚原子粒子相互作用进行重型模拟，通常涉及通过网络将工作分配给许多计算机。

# httpclient - 如果池中的连接关闭，HttpClient 会做什么

> ID：12398874
> 
> 赞同：1
> 
> 时间：2012-09-13T03:06:18.833
> 
> 标签：httpclient, apache-httpclient-4.x, apache-commons-httpclient

HttpClient 有特殊的连接管理器（ThreadSafeClientConnManager 或 PoolingClientConnectionManager 或 MultiThreadedHttpConnectionManager），可以支持多线程。我的理解是这些连接管理器将创建连接池并尝试在子序列请求中重用现有连接。

我的问题是，是否会像网络设备一样断开现有连接？如果连接断开，HttpClient 会做什么，如果它会影响下一个请求？

在将我们的应用程序部署到 Azure 后，这些天我遇到了很多类似的问题，因为 Azure 总是在一段时间后关闭我的连接。我想确定 HttpClient 是否可以正确处理此故障转移。

# javascript - Mozilla Rhino 上的 Socket.io

> ID：12398875
> 
> 赞同：1
> 
> 时间：2012-09-13T03:06:28.083
> 
> 标签：javascript, node.js, jvm, socket.io, rhino

我是服务器端 JS 的新手。我正在阅读关于[`Socket.io`](http://socket.io).

是否可以在除`node`like之外的 js 平台上运行 socket.io`Mozilla Rhino`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T03:31:28.503

对不起！看来你必须建立自己的。Node JS 采用了 Google V8 引擎并添加了在服务器上做事的方法。犀牛将需要相同的。

Rhino 允许您访问 Java 类，因此您需要的任何服务器端网络只需要一点 Java 代码。

这里有一个关于这个主题的很棒的教程：http: [//www.mailsend-online.com/blog/internet-protocols-and-rhino-javascript.html](http://www.mailsend-online.com/blog/internet-protocols-and-rhino-javascript.html)

# jquery - g:formatDate 作为 g:textField 上的值

> ID：12398877
> 
> 赞同：4
> 
> 时间：2012-09-13T03:06:39.470
> 
> 标签：jquery, grails, datetimepicker

我有这个`.gsp`文件，它使用`JQuery.datetimepicker()`特定的`<g:textField >`. 提交时`<g:form>`，`<g:textField>`我必须按照[RoseIndia](http://www.roseindia.net/java/java-conversion/StringToDate.shtml)提供的步骤转换`java.lang.String`为与相关控制器的相关域的属性相匹配。`java.util.Date`

问题是必须`java.util.Date`将域的属性显示回以`java.lang.String`以下`<g:textField>`格式显示为`JQuery.datetimepicker()`. 我尝试使用`<g:formateDate>`which 有效，但我必须将结果显示回 ，`<g:textField>`以便我使用该`JQuery.datetimepicker()`特定字段。

Javascript：

```
$("#datetime").datetimepicker({
  timeFormat: 'hh:mm:ss',
  dateFormat: 'dd-mm-yy'
}); 
```

在身体里：

```
<!-- Error here which return a GrailsTagException -->
<% println ${formatDate(format:"dd-MM-yyyy HH:mm:ss", date:"model?.createdDate")} %>
<g:formatDate format="dd-MM-yyyy HH:mm:ss" date="${model?.createdDate}"/>
<g:textField name="dateReported" id="datetime" value="${model?.createdDate}"/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T05:20:50.907

我可能误读了您的问题，但您不能这样做：

`<g:textField name="dateReported" value="${formatDate(format:"dd-MM-yyyy HH:mm:ss", date:model?.createdDate)}"/>`.

请注意删除“model?.createdDate”周围的引号，因为它会将其评估为字符串而不是对日期本身的引用。此外，您不需要标签库将为您创建的 ID，其名称与“名称”属性相同。

# android - 用于 android facebook connect 的按钮注销

> ID：12398878
> 
> 赞同：0
> 
> 时间：2012-09-13T03:06:41.360
> 
> 标签：android, facebook, facebook-android-sdk

需要帮助 - 我有一些这样的注销代码

```
public void logoutFromFacebook() {
    mAsyncRunner.logout(this, new RequestListener() {

        public void onComplete(String response, Object state) {
            Log.d("Logout from Facebook", response);
            if (Boolean.parseBoolean(response) == true) {
                runOnUiThread(new Runnable() {

                @Override
                public void run() {
                    // Login button visible
                    btnFbLogin.setVisibility(View.VISIBLE);
                    // making all remaining buttons invisible
                    btnFbGetProfile.setVisibility(View.INVISIBLE);
                    btnPostToWall.setVisibility(View.INVISIBLE);
                    btnShowAccessTokens.setVisibility(View.INVISIBLE);
                    btnFbLogout.setVisibility(View.INVISIBLE);
                }
            });
        }
    }
} 
```

但是那个代码不起作用，当我点击注销时，再次点击登录，我没有再次输入用户名和密码，我想如果我点击注销，当我再次点击登录时，我可以再次输入用户名和密码，请需要解决方案，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T04:22:17.670

当用户按下注销按钮时，您必须像这样使用，您必须执行此代码

```
 public void runTestLogout() {
    if (testLogout()) {
        logoutText.setText("Logout Tests Passed");
    } else {
        logoutText.setText("Logout Tests Failed");
    }
}

 public boolean testLogout() {
    try {
        Log.d("Tests", "Testing logout");
        String response = authenticatedFacebook.logout(this);
        Log.d("Tests", "Got logout response: *" + response + "*");
        if (!response.equals("true")) {
            return false;
        }

        Log.d("Tests", "Testing logout on logged out facebook session");
        try {
            Util.parseJson(authenticatedFacebook.logout(this));
            return false;
        } catch (FacebookError e) {
            if (e.getErrorCode() != 101 || 
                    !e.getMessage().equals("Invalid API key") ) {
                return false;
            }
        }

        Log.d("Tests", "Testing logout on unauthenticated object");
        try {
            Util.parseJson(new Facebook(APP_ID).logout(this));
            return false;
        } catch (FacebookError e) {
            if (e.getErrorCode() != 101 || 
                    !e.getMessage().equals("Invalid API key") ) {
                return false;
            }
        }

        Log.d("Tests", "All Logout Tests Passed");
        return true;
    } catch (Throwable e) {
        e.printStackTrace();
        return false;
    }
} 
```

主要的是

```
 String response = authenticatedFacebook.logout(this); 
```

通过运行此代码，您现在将注销，您可以再次登录，您将获得空的用户名和密码按钮

# node.js - 为什么在我注销后永远无法保持我的 nodejs 进程运行？

> ID：12398880
> 
> 赞同：2
> 
> 时间：2012-09-13T03:07:14.533
> 
> 标签：node.js, ssh, forever

我在家中设置了一个 Ubuntu 服务器，用于托管由 nodejs 提供的 Web 应用程序。我的服务器上有一个连接应用程序。当我 ssh 进入并做类似的事情时

```
node app.js &> server.log &
logout 
```

然后在我注销后，服务器就像被搁置了，它不会处理任何请求，但是当我 ssh 回来时，它会再次开始处理请求。

所以看起来forever包就是为了解决这个问题而设计的。所以永远安装并且正在这样做：

```
forever start -al forever.log -ao serverout.log -ae servererror.log app.js 
```

我从这个命令得到相同的结果。我的服务器将在我进入 ssh 时为请求提供服务，但是一旦我注销我的服务器就会停止为请求提供服务。我还能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T05:25:25.240

考虑使用`cron`. 您可以`crontab`在没有任何选项的情况下在 bash 中运行以获取您帐户的 cron 配置。您可能需要 root 访问权限，然后必须使用 -u 选项指定用户帐户。有关您的发行版实施的更多信息，请参阅`man crontab`。

我敢肯定那里有更好的，但这[是](http://www.unixgeeks.org/security/newbie/unix/cron-1.html)关于 cron 语法的不错的教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T10:52:38.507

我不会为此使用 Forever，而是像[Supervisord](http://supervisord.org)和 Monit 这样的生产就绪工具，请参阅[在单个服务器上运行和管理 nodejs 应用程序](https://stackoverflow.com/questions/9561475/running-and-managing-nodejs-applications-on-single-server/9584074#9584074)。

对于您的每个应用程序，只需创建一个主管配置文件，如下所示：

```
[program:myapp]
command=node myapp.js                   ; the program (relative uses PATH, can take args)
directory=/www/app/                     ; directory to cwd to before exec (def no cwd)
process_name=myapp                      ; process_name expr (default %(program_name)s)
autorestart=true                        ; whether/when to restart (default: unexpected)
startsecs=1                             ; number of secs prog must stay running (def. 1)
stopwaitsecs=10                         ; max num secs to wait b4 SIGKILL (default 10)
stdout_logfile=/var/log/myapp.log       ; stdout log path, NONE for none default AUTO
stderr_logfile=/var/log/myapp.err.log   ; stderr log path, NONE for none default AUTO 
```

更多信息：[Brin.gr 的 NodeJS 进程管理](http://blog.fgribreau.com/2012/03/process-management-at-bringr.html)。

# python - python，在装饰和关闭方面感到困惑

> ID：12398884
> 
> 赞同：4
> 
> 时间：2012-09-13T03:08:00.383
> 
> 标签：python, closures, decorator

我有一些测试代码：

```
定义数（数）：
    定义装饰（功能）：
        def wrap(*args, **kwargs):
            输入的_num = num
            返回函数（*args，**kwargs）
        返回包装
    返回装饰

@数字（5）
定义测试（一）：
    返回一个 + input_num

打印测试(1)

```

运行此代码时，我收到一个错误，显示未定义“inputed_num **”**

我的问题是：在 wrap 函数中，是否没有 func 可以得到 'inputed_num' 的闭包？

无论如何，如果没有，我该怎么做才能达到我的目的： **初始化一些值，并直接在主函数中使用这个值。**

认为。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T03:12:38.497

> > 我的问题是：在 wrap 函数中，是否没有 func 可以得到 'inputed_num' 的闭包？

抱歉，这不是装饰器的工作方式。它们在函数最初定义*后被应用。*到那时，为时已晚。

当你写：

```
@num(5)
def test(a):
    return a + inputed_num 
```

这相当于：

```
def test(a):
    return a + inputed_num

test = num(5)(test)       # note that num(5) is called after test() is defined. 
```

为了实现您的目标，让 inputed_num 成为*test*的第一个参数。然后，让您的装饰器传入该参数：

```
def num(num):
    def deco(func):
        def wrap(*args, **kwargs):
            inputed_num = num
            return func(inputed_num, *args, **kwargs)  # this line changed
        return wrap
    return deco

@num(5)
def test(inputed_num, a):                              # this line changed
    return a + inputed_num

@num(6)
def test2(inputed_num, a):
    return a + inputed_num

print test(10)   # outputs 15
print test2(10)  # outputs 16 
```

希望这能为你清除一切:-)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-13T03:16:47.083

不，没有这样的闭包。函数可以关闭出现在周围*词法*上下文中的变量，而不是在调用上下文中。换句话说，如果您实际上在另一个函数中编写了一个函数，那么内部函数可以访问外部函数中的变量：

```
def f():
    g = 2
    def f2():
        print g
    f2() 
```

但是函数永远无法访问调用它们的函数内部的变量。

一般来说，没有办法做你想做的事，即从函数外部在函数中设置任意变量。最接近的是您可以`global inputed_num`在装饰器中使用 a 来分配`inputed_num`为全局变量。然后`test`将访问全局值。

```
def num(num):
    def deco(func):
        def wrap(*args, **kwargs):
            global outsider
            outsider = num
            return func(*args, **kwargs)
        return wrap
    return deco
@num(5)
def test(a):
    print a+outsider

>>> test(2)
7 
```

但是当然变量设置是全局的，因此多个并发使用（例如，递归）将不起作用。（只是为了好玩，你也可以[在这里](https://stackoverflow.com/questions/3908335/python-function-local-name-binding-from-an-outer-scope)看到一个非常神秘的方法来做到这一点，但它太疯狂了，无法在现实世界的环境中使用。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-13T03:22:21.350

正如@Raymond 所说 - 在定义函数后应用装饰器。这意味着在编译函数体本身时，Pythn 会看到该`inputed_num`变量，并且当它嗅探本地定义的变量时，它会生成代码以尝试将其作为全局变量来访问。

这意味着您可以在您的装饰器中解决它：您的装饰器可以在函数 globals() 空间中设置一个具有所需名称的全局变量，然后调用该函数。它应该在单线程代码中可靠地工作：

```
def num(num):
    def deco(func):
        def wrap(*args, **kwargs):
            glob = func.func_globals
            marker = object()
            original_value = glob.get("inputed_num", marker)
            glob["inputed_num"] = num
            result = func(*args, **kwargs)
            if original_value is marker:
                del glob["inputed_num"]
            else:
                glob["inputed_num"] = original_value
            return result
        return wrap
    return deco

@num(5)
def test(a):
    return a + inputed_num 
```

和：

```
>>> print test(1)
6 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T03:20:31.560

这不是装饰器应该使用的方式，我认为您的目的可能是这样做的

```
def outwrapper(n):
    def wrapper(func):
        def f(*args, **argw):
            return n + func(*args, **argw) 
        return f
    return wrapper 

@outwrapper(4)
def test(n):
    return n

print test(1) 
```

# java - 从另一个类访问静态变量

> ID：12398887
> 
> 赞同：5
> 
> 时间：2012-09-13T03:08:04.020
> 
> 标签：java, swing, oop, static

我在同一个包中有两个类。我已经`static variable`在一个类中声明了 a 并希望在另一个类中访问该变量。

这是我声明静态变量的代码

```
public class wampusGUI extends javax.swing.JFrame {

    static String userCommand;

    public wampusGUI() {
        initComponents();
    }

    public void setTextArea(String text) {
        displayTextArea.append(text);
    }

    private void enterButtonActionPerformed(java.awt.event.ActionEvent evt) {
        userCommand = commandText.getText();
    }

    public static void main(String args[]) {
        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {
                wampusGUI w = new wampusGUI();
                w.setVisible(true);
                Game g = new Game(w);
                g.play();
            }
        });
    }
} 
```

这是我要访问变量的代码

```
public class Game {

    private wampusGUI gui;

    public Game(wampusGUI w) {
        world = new World();
        world.start();
        gui = w;
    }

    public void play() {
        gui.setTextArea(welcome());
        gui.setTextArea(describe());
        for (;;) {
            String s = userCommand; // here value should come should 
            System.out.println(userCommand);
            Command c = Command.create(s);
            String r = c.perform(world);
            // is game over?
            if (r == null) {
                break;
            }
            System.out.println(r);
        }
        System.out.println("Game over");
    }
} 
```

但是，我可以将第一类的变量作为参数传递。但问题是，当我运行程序时，值第一次变为空，这是我不想要的。我想当我输入值时`textfield` 它应该去另一个类。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T06:08:59.113

查看您的代码，您似乎想向您的用户显示带有特定文本的对话框

```
gui.setTextArea(welcome());
gui.setTextArea(describe()); 
```

有时，该对话框应捕获随后处理的用户输入。

1.  这些`setTextArea`调用不是您想要使用的。用户将永远不会看到欢迎消息，因为它会立即被描述消息替换。
2.  确保您没有阻塞事件调度线程 (EDT)，否则根本不会显示任何内容。我不知道你的`Command`班级会做什么，但我看到一个无限循环，`Event Dispatch Thread`这绝不是一件好事。查看[Swing 中的并发教程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)以获取更多信息
3.  由于该`for`循环，用户将根本无法输入任何命令，因为 EDT 正忙于处理您的循环。您需要的是一个允许用户提供输入的阻塞调用（不阻塞 EDT，而只是阻塞代码的执行）。类中的静态方法[`JOptionPane`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JOptionPane.html)非常适合这种情况（例如`JOptionPane#showInputDialog`）。这些方法还具有将用户输入传递回调用代码而不使用任何静态变量的机制，从而解决了您的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T12:37:37.340

我建议您使用一种或另一种侦听器来允许 Game 对象侦听并响应 GUI 对象状态的变化。有几种方法可以做到这一点，但我发现最优雅和最有用的方法之一是使用 Swing 自己的固有 PropertyChangeSupport 来允许您使用 PropertyChangeListeners。所有 Swing 组件都允许您向其添加 PropertyChangeListener。所以我建议你这样做，让 Game 向你的 WampusGUI 类（应该大写）对象添加一个，如下所示：

```
public Game(WampusGUI w) {
  gui = w;

  gui.addPropertyChangeListener(new PropertyChangeListener() {
     // ....
  } 
```

这将允许 Game 监听 gui 状态的变化。

然后，您需要将 gui 的 userCommand 字符串设置为“绑定属性”，这意味着为其提供一个 setter 方法，该方法将触发属性更改支持，通知所有侦听器更改。我会这样做：

```
public class WampusGUI extends JFrame {
   public static final String USER_COMMAND = "user command";
   // ....

   private void setUserCommand(String userCommand) {
      String oldValue = this.userCommand;
      String newValue = userCommand;
      this.userCommand = userCommand;
      firePropertyChange(USER_COMMAND, oldValue, newValue);
   } 
```

然后你只能通过这个 setter 方法改变这个字符串的值：

```
private void enterButtonActionPerformed(java.awt.event.ActionEvent evt) {
  setUserCommand(commandText.getText());
} 
```

然后，游戏的属性更改侦听器将响应如下：

```
 gui.addPropertyChangeListener(new PropertyChangeListener() {

     @Override
     public void propertyChange(PropertyChangeEvent pcEvt) {

        // is the property being changed the one we're interested in?
        if (WampusGUI.USER_COMMAND.equals(pcEvt.getPropertyName())) {

           // get user command:
           String userCommand = pcEvt.getNewValue().toString();

           // then we can do with it what we want
           play(userCommand);

        }

     }
  }); 
```

这种技术的优点之一是被观察类，即 GUI，不必对观察者类（游戏）有任何了解。一个小的可运行示例如下所示：

```
import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.beans.PropertyChangeEvent;
import java.beans.PropertyChangeListener;

import javax.swing.*;

public class WampusGUI extends JFrame {
   public static final String USER_COMMAND = "user command";
   private String userCommand;
   private JTextArea displayTextArea = new JTextArea(10, 30);
   private JTextField commandText = new JTextField(10);

   public WampusGUI() {
      initComponents();
   }

   private void setUserCommand(String userCommand) {
      String oldValue = this.userCommand;
      String newValue = userCommand;
      this.userCommand = userCommand;
      firePropertyChange(USER_COMMAND, oldValue, newValue);
   }

   private void initComponents() {
      displayTextArea.setEditable(false);
      displayTextArea.setFocusable(false);
      JButton enterButton = new JButton("Enter Command");
      enterButton.addActionListener(new ActionListener() {

         @Override
         public void actionPerformed(ActionEvent evt) {
            enterButtonActionPerformed(evt);
         }
      });
      JPanel commandPanel = new JPanel(); 
      commandPanel.add(commandText);
      commandPanel.add(Box.createHorizontalStrut(15));
      commandPanel.add(enterButton);

      JPanel mainPanel = new JPanel();
      mainPanel.setLayout(new BorderLayout());
      mainPanel.add(new JScrollPane(displayTextArea));
      mainPanel.add(commandPanel, BorderLayout.SOUTH);
      add(mainPanel);
   }

   public void setTextArea(String text) {
      displayTextArea.append(text);
   }

   private void enterButtonActionPerformed(java.awt.event.ActionEvent evt) {
      setUserCommand(commandText.getText());
   }

   public static void main(String args[]) {
      java.awt.EventQueue.invokeLater(new Runnable() {
         public void run() {
            WampusGUI w = new WampusGUI();
            w.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            w.pack();
            w.setLocationRelativeTo(null);
            w.setVisible(true);
            Game g = new Game(w);
            g.play();
         }
      });
   }
}

class Game {
   private WampusGUI gui;

   public Game(WampusGUI w) {
      gui = w;

      gui.addPropertyChangeListener(new PropertyChangeListener() {

         @Override
         public void propertyChange(PropertyChangeEvent pcEvt) {

            // is the property being changed the one we're interested in?
            if (WampusGUI.USER_COMMAND.equals(pcEvt.getPropertyName())) {

               // get user command:
               String userCommand = pcEvt.getNewValue().toString();

               // then we can do with it what we want
               play(userCommand);

            }
         }
      });
   }

   public void play() {
      gui.setTextArea("Welcome!\n");
      gui.setTextArea("Please enjoy the game!\n");
   }

   public void play(String userCommand) {
      // here we can do what we want with the String. For instance we can display it in the gui:
      gui.setTextArea("User entered: " + userCommand + "\n");
   }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T04:32:43.180

我同意 Jon Skeet 的观点，这不是一个好的解决方案......

但如果你想要一个肮脏的解决方案来解决你的问题，那么你可以试试这个：

```
public class wampusGUI extends javax.swing.JFrame
{
    private static wampusGUI myInstance;
    public wampusGUI( )
    {
        myInstance = this;
        initComponents();
    }

    public static void getUserCommand()
    {
        if(myInstance!=null)
        {
            return myInstance.commandText.getText();
        }
        else
        {
            return null;
        }
    }
    ......
    ......
} 
```

在其他类中使用：

```
public void play()
{
    .....
    //String s = userCommand; // here value should come should
    String s = wampusGUI.getUserCommand();
    .....
} 
```

这种代码存在于我们的一些遗留项目中......我讨厌这个。

# javascript - 舍入 JavaScript 计算

> ID：12398888
> 
> 赞同：-2
> 
> 时间：2012-09-13T03:08:08.950
> 
> 标签：javascript

我在一个表单中有三个输入框，并使用其中两个来执行简单的计算，结果在第三个输入框中。然后将这些全部放入数据库中以供其他地方使用。这是我的计算代码。

```
document.insert_moves.elements.number1.value = ((document.insert_moves.elements.biomass1.value * 1000)/ document.insert_moves.elements.weight1.value); 
```

我怎样才能使它四舍五入到最接近的整数？任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T03:09:59.043

数学.地板（）；应该做的伎俩

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T03:13:48.410

如果你只是想四舍五入，更快一点是使用按位 |

```
var roundedDown = 5.672391 | 0; 
```

使用它来四舍五入到特定位数也非常快，例如

```
var roundedTo2Digits = ((5.8273487 * 100) | 0) / 100; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T03:43:11.580

您可以使用`Math.ceil()`或`Math.floor()`。既然你想把它四舍五入，那*就是*后者。

# c - 为什么在 32 位机器上 ~0xF 等于 0xFFFFFFF0？

> ID：12398889
> 
> 赞同：5
> 
> 时间：2012-09-13T03:08:09.090
> 
> 标签：c, operators

为什么~0xF 等于 0xFFFFFFF0？

另外，怎么样`~0xF && 0x01 = 1`？也许我也没有得到 0x01 。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-13T03:22:57.893

**问题 1**

> 为什么~0xF 等于 0xFFFFFFF0？

首先，这意味着您在 32 位机器上运行它。这意味着 0xF 实际上`0x0000000F`是[十六进制](http://en.wikipedia.org/wiki/Hexadecimal)的，

这意味着 0xF 是 `0000 0000 0000 0000 0000 0000 0000 1111`二进制表示的。

`~`运算符表示 NOT 运算。Tt在二进制表示中*每 0 到 1 和每 1 到 0变化一次。*这将使 ~0xF 成为： `1111 1111 1111 1111 1111 1111 1111 0000`二进制表示。

这实际上是`0xFFFFFFF0`。

请注意，如果您在 16 位机器上执行此操作，则答案`~0xF`将是`0xFFF0`.

**问题2**

你写错了，应该是`0xF & 0x1`。请注意`0x1` `0x01`，`0x001`、 和`0x0001`都是相同的。所以让我们把这个十六进制数改为二进制表示：

`0xF`将会：

`0000 0000 0000 0000 0000 0000 0000 1111`

并且`0x1`将是：

`0000 0000 0000 0000 0000 0000 0000 0001`

`&`操作遵循以下规则：

```
0 & 0 = 0
0 & 1 = 0
1 & 0 = 0
1 & 1 = 1 
```

所以对每一点都这样做，你会得到结果：

`0000 0000 0000 0000 0000 0000 0000 0001`

这实际上是`0x1`。

**额外的**

`|`表示按位或运算。它跟随：

```
0 | 0 = 0
0 | 1 = 1
1 | 0 = 1
1 | 1 = 1 
```

`^`表示按位异或运算。它跟随：

```
0 ^ 0 = 0
0 ^ 1 = 1
1 ^ 0 = 1
1 ^ 1 = 0 
```

[您可以在此处](http://en.wikipedia.org/wiki/Bitwise_operation#XOR)获得更多信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T03:10:48.347

如果将 0xF 存储在 32 位“int”中，则所有 32 位都会翻转，因此 ~0xF = 0xFFFFFFF0。

看到这个： [http ://teaching.idallen.com/cst8214/08w/notes/bit_operations.txt](http://teaching.idallen.com/cst8214/08w/notes/bit_operations.txt)

他们给出了很好的解释

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T03:15:22.263

您正在否定 0xF，它将所有位翻转到它们的反相。因此，例如，您有 8 位：`0xF = 00001111`. 如果你否定它，它会变成`11110000`.

由于您使用的是 32 位，因此 F 只是一直延伸。`1111 .... 0000`

对于第二个问题，您使用的是逻辑与，而不是按位与。两者的行为完全不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T03:15:25.290

听起来您的困惑是您认为 0xF 与 0b1111111111111111 相同。不是，它是 0b0000000000001111。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-13T03:29:02.933

~0xF 反转所有位，继续

```
from 0x0000000F = 00000000000000000000000000001111 (32 bits) 
to   0xFFFFFFF0 = 11111111111111111111111111110000 (32 bits) 
```

如果 a 和 b 都非零，并且 ~0xF 和 0x01 都非零，则 a && b 为 1。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-13T04:06:58.983

在 C 中，`~0xF`永远不能等于`0xFFFFFFF0`。前者是负数（在 C 允许的三种有符号表示中的任何一种中），后者是正数。但是，如果在二进制补码实现中两者都转换为 32 位无符号类型，则转换后的值将相等。

至于`~0xF && 0x01`，`&&`运算符是逻辑与，而不是按位与。

# iphone - 如何使用/实现 Tapku Day View 日历？

> ID：12398896
> 
> 赞同：3
> 
> 时间：2012-09-13T03:08:53.493
> 
> 标签：iphone, objective-c, ios, xcode

如何显示日视图日历以显示五月日历中的事件？我试图搜索演示或示例代码，但我找不到任何东西。我也想知道如何使用它的代表。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T22:36:44.593

使用 TKCalendarDayTimelineView 类

```
TKCalendarDayTimelineView  *dayView = [[TKCalendarDayTimelineView alloc] initWithFrame:CGRectMake(0, 0, 320, 460)]; 
```

# delphi - Delphi 7 - 使用 TIdDecoderMIME 解码 Base64

> ID：12398898
> 
> 赞同：5
> 
> 时间：2012-09-13T03:09:04.833
> 
> 标签：delphi, base64, delphi-7, memorystream

好吧，这让我发疯了，哈哈。

我有一个 Base64 字符串，正在尝试使用 TIdDecoderMIME 将其解码为 TMemoryStream。

我目前的代码如下：

```
Var MStream:TMemoryStream; Decoder:TIdDecoderMIME;
begin
  Decoder := TIdDecoderMIME.Create(nil);
  MStream := TMemoryStream.Create;
  Decoder.DecodeToStream(BSting,MStream);
end; 
```

其中 BString = 我的 Base64 字符串。

现在，当代码运行时，我收到一条错误消息，提示“DecodeToString 中的大小不均匀”。

有任何想法吗？

任何帮助是极大的赞赏。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T05:50:13.093

您正在向`DecodeToStream`函数传递一个长度不是 4 的倍数的 Base64 字符串。换句话说，您传递的字符串是无效的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T15:45:30.720

Base64 字符串通常用尾随的“=”符号填充，以确保它们的长度是 4 的倍数。

一些解码器会尝试纠正丢失的填充字符，而另一些则不会。请参阅 StackOverflow 问题“ [Base64 编码时删除尾随“=”](https://stackoverflow.com/questions/4492426/remove-trailing-when-base64-encoding) ”

TIdDecoderMime 对象通过确保输入是 4 的倍数来验证输入 - 如果填充字符包含在输入中，它将是这样。

# php - 使用数据库生成的列表时传递 PHP 变量而不被看到

> ID：12398900
> 
> 赞同：0
> 
> 时间：2012-09-13T03:09:20.877
> 
> 标签：php, mysql, forms, session

寻求有关该问题的任何帮助。这是交易：我有一个数据库，它有一个`teams`表，它包含`team_id`. 在我的一个页面上，我生成了一个链接列表，其中包含`team_id`创建者的获取 URL。我需要`team_id`下一页上的，但不知道如何通过任何其他方式传递它。使用表单和 POST 不是一个选项，因为此方法只会传递列表中的最后一个链接数据。存储在会话中也不是一种选择，因为无法将我需要的变量离散地传递给一个函数来设置会话变量。我已经尝试过了，通过查看源代码可以很容易地查看它。所以这里有一些示例代码，可以准确了解我正在处理的内容。

```
<?
if(mysql_num_rows($result2)>0){ ?>
     <a class="fltrt btn btn-danger btn-small" onclick="test()" href="acceptmatch-exec.php?match_id=<?php echo $match_id; ?>&team_id=<?php echo $team_id;?>&action=cancel">Cancel Match</a>
 <?}else{?>
     <a class="fltrt btn btn-success btn-small" href="acceptmatch-exec.php?match_id=<?php echo $match_id; ?>&team_id=<?php echo $team_id;?>&action=accept">Accept Match</a>
  <?} ?> 
```

上面的代码是通过排除的 while 循环在页面上多次生成的。我想传递`match_id`and`team_id`变量而不被任何地方看到。如果我把它做成一个表格，它不会传递正确的变量，除非当时只有一个结果（不太可能）。我确信必须有一个简单的方法让我难以理解，所以请分享如何解决这个问题的想法。我觉得好像我解释得不够好，但解释起来并不容易。我基本上想要一些像 GET 一样工作但行为像 POST 并且可以对查看源代码或链接位置的人隐藏的东西。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T03:35:35.780

只要您不将其发布到其他地方，人们就无法*从您的服务器*上看到您的源代码。

如果你想隐藏 ID，只需 [hash](hashing method](http://en.wikipedia.org/wiki/Hash_function) 他们：

```
<a href="someScript.php?id=<?php echo md5($id) ?>">Da Link</a> 
```

然后`someScript.php`您必须查看您的数据库 [请通过[PDO](http://php.net/manual/en/book.pdo.php)！] 以获取：

```
SELECT * FROM teams WHERE MD5(id) = :id 
```

但是现在 md5 散列很容易逆转，因此您不会受到攻击者的攻击。

无论如何，只要您的站点构建正确，您就可以根据需要隐藏资源，而无需依赖会话、哈希或其他任何东西：只需充分利用[授权](http://symfony.com/doc/current/book/security.html)即可。

* * *

我坦率地建议你阅读一些关于如何服务器端开发的好东西，以便编写好的代码而不是每次都重新发明轮子——坚持我上面链接的 Symfony 指南，尽管你不会结束使用整个框架 [我强烈的想法无论如何推荐]你会发现它们非常有用。

# php - 中间 mySQL 查询 - 将两个表连接在一起并限制结果

> ID：12398903
> 
> 赞同：0
> 
> 时间：2012-09-13T03:09:43.363
> 
> 标签：php, mysql

这是我的餐桌布置：

```
Posts
   post_id
   post_votes

Comments
   comment_id
   post_id
   comment_time 
```

我未能创建执行以下操作的查询：

1.  按 post_votes desc选择 10 个**帖子排序**
2.  每篇文章获得 5 条评论

如有必要，我将发布我尝试过的内容。我刚刚进入更复杂的查询，非常感谢任何帮助或建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T03:37:16.833

下面将分别检索 10 个按 desc 的帖子顺序和 5 个按 desc 的评论顺序。

```
select post_id,post_votes,comment_id,comment_time,
 @rn := CASE WHEN @prev_post_id = post_id THEN @rn + 1 ELSE 1 END AS rn,
        @prev_post_id := post_id from
  (select p.post_id,post_votes,comment_id,comment_time from
  (SELECT post_id,post_votes from posts order by post_votes desc limit 10) p 
   left outer join 
   comments c on p.post_id=c.post_id order by post_id,comment_time desc )m
having rn<=5 
```

[SQL FIDDLE HERE](http://sqlfiddle.com/#!2/9c51b/1)（通过 desc 检索 3 个 post order 的测试示例，以及每个 post 的 2 个评论）。

# sql - PostGIS 查询因转义字符串而失败？

> ID：12398904
> 
> 赞同：0
> 
> 时间：2012-09-13T03:09:49.697
> 
> 标签：sql, postgresql, postgis, npgsql, query-parameters

我有这个 Postgres/PostGIS 查询：

```
UPDATE raw.geocoding
SET the_geom = ST_Transform(ST_GeomFromText('POINT(((E'-96.6864379495382')::float8) ((E'32.792527154088')::float8))', 4326),3081)
WHERE id=((10793455)::int4) 
```

当我运行它时，我得到这个错误：

```
ERROR:  syntax error at or near "')::float8) ((E'"
LINE 2: ...sform(ST_GeomFromText('POINT(((E'-96.6864379495382')::float8...
                                                             ^

********** Error **********

ERROR: syntax error at or near "')::float8) ((E'"
SQL state: 42601
Character: 94 
```

我正在摸不着头脑，因为 PostGIS 对转义数据（[例如](http://postgis.org/docs/ST_GeomFromEWKB.html)）没有问题，并且查询是基于此参数化查询从 npgsql 生成的：

```
UPDATE raw.geocoding
SET the_geom = ST_Transform(ST_GeomFromText('POINT(:longitude :latitude)', 4326),3081)
WHERE id=:id 
```

我正在运行 Postgres 9.1.5 和 PostGIS 2.0.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T05:52:29.867

该错误是由字符串中未**转义的单引号**引起的。标准方法是将它们加倍：

```
UPDATE raw.geocoding
SET    the_geom = ST_Transform(ST_GeomFromText(
               'POINT(((E**''**-96.6864379495382**''**)::float8)
                     ((E**''**32.792527154088**''**)::float8))', 4326),3081)
WHERE  id=((10793455)::int4)
```

这修复了字符串文字，但您有更多错误。
就像@Paul 在评论中暗示的那样，[`ST_GeomFromText()`](http://postgis.org/docs/ST_GeomFromText.html)期望[**几何 WKT`POINT(0 0)`**](http://postgis.org/docs/using_postgis_dbmanagement.html#RefObject)。显式强制转换`float8`使您看起来像是在尝试输入 Postgres 函数[`point()`](http://www.postgresql.org/docs/current/interactive/functions-geometry.html#FUNCTIONS-GEOMETRY-CONV-TABLE)（起初让我感到困惑）。简化为：

```
UPDATE raw.geocoding
SET    the_geom = ST_Transform(ST_GeomFromText(
                  **$$POINT(96.6864379495382 32.792527154088)$$**, 4326), 3081)
WHERE  id = 10793455
```

另请注意，我如何在第二个示例中使用[美元引用](http://www.postgresql.org/docs/current/interactive/sql-syntax-lexical.html#SQL-SYNTAX-DOLLAR-QUOTING)来避免完全转义单引号。由于修复语法后字符串文字中没有任何单引号，您不妨再次使用单引号。您的参数化查询：

```
UPDATE raw.geocoding
SET    the_geom = ST_Transform(ST_GeomFromText(
                  $$POINT(:longitude :latitude)$$::geometry, 4326), 3081)
WHERE  id = :id
```

您可以添加演员表以`geometry`使其清楚，就像@Paul 在他的评论中建议的那样。但它也可以在没有显式转换的情况下工作。

# ruby - 如何使用用户输入进行算术运算？

> ID：12398906
> 
> 赞同：1
> 
> 时间：2012-09-13T03:10:05.533
> 
> 标签：ruby

这是我试图计算利息的代码

```
def coumpoundinterest
 print "Enter the current balance: "
 current_balance = gets
 print "Enter the interest rate: "
 interest_rate = gets
 _year = 2012
 i = 0
 while i < 5 do

  current_balance = current_balance + current_balance * interest_rate
  puts "The balance in year " + (_year + i).to_s + " is $" + current_balance.to_s

  i = i + 1  
 end
end 
```

这是我遇到所有麻烦的地方

```
current_balance = current_balance + current_balance * interest_rate 
```

如果我保持代码原样，我会收到一个错误，即无法将字符串强制输入 FixNum。如果我在 interest_rate 之后添加 .to_i，那么我会将该行乘以数次。我如何处理红宝石中的算术？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T03:16:44.883

`gets`将返回一个带有`\n`. 你的`current_balance`和`interest_rate`变量是字符串，如`"11\n"` `"0.05\n"`. 所以如果你只使用`interest_rate.to_i`. string 和 fixnum 之间的运算符`*`会根据 fixnum 重复该字符串几次。尝试将它们都转换为浮点数。

```
current_balance = gets.to_f
interest_rate = gets.to_f
...
current_balance *= (1+interest_rate) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T15:15:16.723

我也是一个新的 Ruby 程序员，一开始在数据类型方面遇到了麻烦。一个非常有用的故障排除工具是`obj.inspect`准确确定变量的数据类型。

因此，如果您`current_balance.inspect`在获取用户值后添加，您可以很容易地看到返回值是“5\n”，它是一个字符串对象。由于 Ruby 字符串有自己的基本运算符 (+ - * /) 定义，这不是您所期望的，您需要使用 to_* 运算符之一（即`to_f`如前所述）将其转换为对象您可以在其上使用数学运算符。

希望这可以帮助！

# css - href 出现在 IE 中我的表单的单独一行

> ID：12398907
> 
> 赞同：2
> 
> 时间：2012-09-13T03:10:17.783
> 
> 标签：css, html, internet-explorer, href

我正在尝试创建一个带有背景的简单搜索栏，并在旁边添加一个“高级”href。它在 Chrome、Mozilla 中正确呈现，但是在 IE 8 中，href 显示为下面一行的单独块？

我的 HTML 代码：

```
<!DOCTYPE html>
<html lang = "en">
<head>
<meta charset="utf-8" />
<title>FireFox HomePage</title>
<!--[if lt IE 9]>
    <script src="../HTML5Shiv/dist/html5shiv.js"></script>
<![endif]-->
<link rel="stylesheet" type="text/css" href="MainPage1.css" />
</head>

<body>
<header>
    <div class="wrapper">
        <a href="#"><img src="../../IMG/FireFox.png" alt="FireFox Logo"     title="FireFox Home" /></a>     
        <span id="usernav"><a href="#">Logout</a><a href="#">My Profile</span>  
    </div>

    <form action="" method="Search">
        <p>
            <input type="search" />
            <input type="submit" value="Search"/>
            <a href="#">Advanced</a>
        </p>                    
    </form>         
</header>

</body>
</html> 
```

我的 CSS 代码：

```
 /* CSS Reset */
    * { margin: 0; padding: 0; }

    html { height: 101%; font-family: “Helvetica Neue”, Arial, Helvetica, sans-serif; background: #fff; }
    body { font-size: 62.5%; font-family: Helvetica, Arial, sans-serif; line-height: 10%; }
    img { border: 0;}

    /* HTML5 display-role reset for older browsers */
    article, aside, details, figcaption, figure, 
    footer, header, hgroup, menu, nav, section {
        display: block;
    }

    /* Main CSS */

    header { width: 1000px; margin: 0 auto; clear: both;}
    .wrapper { width: 1000px; margin: 0 auto; margin-top: 10px;}

    #usernav { position: relative;  margin-top: 20 px; font-size: 12px;}
    #usernav a { color: #444; text-shadow: 0px 1px 1px #ddd; text-decoration: none;  float: right; padding: 8px;}   
    #usernav a:hover { text-decoration: underline; }

    form{background-color: #eee; border-bottom: 1px solid #dadada; height: 50px;}

    /** @group clearfix **/
    .clearfix:after { content: "."; display: block; clear: both; visibility: hidden; line-height: 0; height: 0; }
    .clearfix { display: inline-block; }
    html[xmlns] .clearfix { display: block; }
    * html .clearfix { height: 1%; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:50:19.510

好的，在玩了一点代码之后，我已经解决了这个问题。似乎删除

```
<span id="usernav"><a href="#">Logout</a><a href="#">My Profile</span> 
```

从 div 中并将其直接放在标题中解决了 IE 错误。不知道为什么，欢迎提出建议。我无法发布图片，因为我的声誉点数不超过 10 :(

# android - 如何从字符串获取值到文本视图？在安卓中

> ID：12398908
> 
> 赞同：-1
> 
> 时间：2012-09-13T03:10:19.717
> 
> 标签：android

在我的应用程序中，我想在列表中显示一些项目，我将所有项目保存在 String 数组中并使用代码带来

```
 String[] activities = getResources().getStringArray(R.array.Contents); 
```

现在我的任务是将这些字符串数组值分配给我的`TextView`.

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T04:59:30.417

> 在 MainActivity.class

```
String[] activities = getResources().getStringArray(R.array.Contents);
List<RowItem> rowItems;
In onCreate(){
super.onCreate(savedInstanceState);
setContentView(layoutname);
rowItems = new ArrayList<RowItem>();
for (int i = 0; i < titles.length; i++) {
RowItem item = new RowItem(activities[i]);
rowItems.add(item);
}
listView = (ListView) findViewById(id of ListView);
CustomBaseAdapter adapter = new CustomBaseAdapter(this, rowItems);
listView.setAdapter(adapter);
} 
```

> 在 RowItem 类中

```
public class RowItem {
 private String activities;
public RowItem(String activities {
this.activities = activities;
}
public String getActivities() {
return activities;
}
public void setactivities(String activities) {
this.activities = activities;
}
@Override
public String toString() {
return activities;
}
} 
```

> 在 CustomBaseAdapter 类中

```
public class CustomBaseAdapter extends BaseAdapter {
Context context;
List<RowItem> rowItems;
public CustomBaseAdapter(Context context, List<RowItem> items) {
this.context = context;
this.rowItems = items;
}

private class ViewHolder {
TextView txtActivities;
}

public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder = null;

        LayoutInflater mInflater = (LayoutInflater)
            context.getSystemService(Activity.LAYOUT_INFLATER_SERVICE);
        if (convertView == null) {
            convertView = mInflater.inflate(R.layout.list_item, null);
            holder = new ViewHolder();

            holder.txtTitle = (TextView) convertView.findViewById(R.id.activities);

            convertView.setTag(holder);
        }
        else {
            holder = (ViewHolder) convertView.getTag();
        }

        RowItem rowItem = (RowItem) getItem(position);

        holder.txtActivites.setText(rowItem.getActivity());

        return convertView;
    }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T03:20:04.977

尝试这个

```
ArrayAdapter aa = new ArrayAdapter(this,android.R.layout.simple_list_item_1, activities);
mylistView.setAdapter(aa); 
```

# java - 在哪些情况下 getReadableDatabase 返回 null？

> ID：12398909
> 
> 赞同：0
> 
> 时间：2012-09-13T03:10:32.020
> 
> 标签：java, android, sqlite

我最近在我的 android 应用程序中使用时遇到错误`getReadableDatabase()`，它返回 null。

我`DatabaseHelper`的是这样的：

```
package com.example.borec;

import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.database.sqlite.SQLiteDatabase.CursorFactory;

public class DatabaseHelper extends SQLiteOpenHelper {

    private static final int VERSION = 1;

    public DatabaseHelper(Context context, String name, CursorFactory factory,
            int version) {
        super(context, name, factory, version);
    }

    public DatabaseHelper(Context context, String name) {
        this(context, name, VERSION);
    }

    public DatabaseHelper(Context context, String name, int version) {
        this(context, name, null, version);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub
        System.out.println("create a Database");
        db.execSQL("create table users(uid varchar(10),user_name varchar(30))");
        db.execSQL("create table status(create_at varchar(40),datelong integer,id varchar(10),text varchar(1000),user_name varchar(30),uid varchar(10),annotations varchar(1000))");
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub
        System.out.println("update a Database");
    }
} 
```

我在一个活动中使用这个助手：

```
DatabaseHelper dbHelper = new DatabaseHelper(DataOperatorActivity.this, "borec");
db = dbHelper.getReadableDatabase(); 
```

第二条语句返回null？谁知道为什么？

# c# - 无效代码有问题

> ID：12398910
> 
> 赞同：-3
> 
> 时间：2012-09-13T03:10:44.703
> 
> 标签：c#, asp.net, sql

这段代码有问题吗？一晚上都想不通！

```
protected void Page_Load(object sender, EventArgs e)
if (!Page.IsPostBack)
{
    string email2 = Membership.GetUser(User.Identity.Name).Email;
    MembershipUser currentUser = Membership.GetUser();
    string UserId2 = currentUser.ProviderUserKey.ToString();
    TextBox2.Text = email2;
    TextBox3.Text = UserId2;
} 
```

它说必须有返回类型。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-13T03:13:03.683

脑海中浮现三件事：

*   您没有该方法的左大括号
*   您的`If`陈述应该是`if`- C# 区分大小写
*   您没有该方法的右括号。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T03:15:16.180

尝试这个：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
    {
        string email2 = Membership.GetUser(User.Identity.Name).Email;
        MembershipUser currentUser = Membership.GetUser();
        string UserId2 = currentUser.ProviderUserKey.ToString();

        TextBox2.Text = email2;
        TextBox3.Text = UserId2;

    }
} 
```

# javascript - 多次在另一个 javascript 函数中调用一个 javascript 函数

> ID：12398914
> 
> 赞同：0
> 
> 时间：2012-09-13T03:12:19.053
> 
> 标签：javascript, for-loop, settimeout

我有一个 javascript 函数，它运行良好：

```
function playMp3(str) {
  ...
} 
```

另一个脚本：

```
function playMp3wholepage() {
  var dgs=new Array();
  dgs[0] = "/abc.mp3";
  dgs[1] = "/dac.mp3";
  dgs[2] = "/hf.mp3";
  ....
  dgs[28] = "/er23.mp3";
  dgs[29] = "/read/34_15.mp3";
  for (i=0;i<=29;i++){
    ses = dgs[i]
    setTimeout("playMp3(ses);", 2000)
  }
} 
```

我想按照第二个脚本中给出的顺序播放所有声音。但我无法运行第二个脚本，它只播放最后一个声音（dgs [29]），而不是全部。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T03:18:34.477

当 setTimeout 回调执行时，`sec`已经是`dgs[29]`，您需要创建另一个函数范围来保存该值。

```
for (var i=0; i<=dgs.length; i++){
   (function (i) {
       setTimeout(function() {
           playMp3(dgs[i]);
       }, 2000 * i);
   }(i));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T03:16:55.250

我猜正在发生的事情是你的循环完成得如此之快，以至于所有的调用`playMp3`基本上都是一次被调用的。但是，最后一次调用`setTimeout`会设置最后播放的声音，这就是你听到的所有声音的原因。

此外，使用长度或您的数组，并使您的代码灵活：

```
for(var i=0; i<dgs.length; i++) {      
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T03:21:57.837

这是关于关闭的事情。[你可以在这里](http://www.javascriptkit.com/javatutors/closures.shtml)了解更多。

```
function playMp3wholepage() {
   var dgs=new Array();
   dgs[0] = "/abc.mp3";
   dgs[1] = "/dac.mp3";
   dgs[2] = "/hf.mp3";
   for (i=0;i<dgs.length;i++){
       ses = dgs[i];
       (function(mp3) {
           setTimeout(function() {
               playMp3(mp3);
           }, 2000);
       })(ses);
   }
} 
```

# vb.net - OleDbException：查询表达式“@bottlecount ORDER BY ID DESC”中的语法错误（缺少运算符）

> ID：12398920
> 
> 赞同：2
> 
> 时间：2012-09-13T03:13:08.840
> 
> 标签：vb.net, ms-access, select, oledbexception

在测试如何通过单击按钮更新最新数据库条目中的特定列时出现此错误。之前，我将更新语句设置为

```
 Dim statement As String = "UPDATE tblPatientInfo SET bottle_used = @bottlecount"
 statement &=" WHERE room_number =1" 
```

但是数据库中的所有条目都已更新，这就是我尝试使用 ORDER BY ID DESC 的原因，ID 是主 ID。该程序应该获取最新的数据库条目，它只会更新bottle_used。使用它时，我得到了一个 OleDbException。

这是我的代码：

```
 Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    '====test number of bottles=============
   Form5.lblBottle.Text = Form5.lblBottle.Text + 1

    Dim statement As String = "UPDATE tblPatientInfo SET bottle_used = @bottlecount ORDER BY ID DESC"

     Dim cmd As New OleDbCommand

    With cmd

        .Connection = Conn
        .CommandType = CommandType.Text
        .CommandText = statement
        .Parameters.AddWithValue("@bottlecount", Form5.lblBottle.Text)

        Conn.Open()
        .ExecuteNonQuery()
    End With
    Conn.Close()

End Sub 
```

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T03:29:10.283

看来您想用最大值更新行`ID`。[DMax 函数](http://office.microsoft.com/en-us/access-help/dmin-dmax-functions-HA001228826.aspx)应该使这变得容易。

```
UPDATE tblPatientInfo
SET bottle_used = @bottlecount
WHERE ID = DMax('ID', 'tblPatientInfo') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T03:18:06.847

基本上你不能`ORDER BY`直接在`update`语句中添加子句。`update`使用 order by 创建语句的唯一方法是`select`使用 order by 子句创建子查询。例子，

```
UPDATE  messages 
SET status=10 WHERE ID in 
   (
    SELECT ...
    FROM ... 
    WHERE ... 
    ORDER BY priority
   ) 
```

也许你想要这个，

```
UPDATE tblPatientInfo 
SET bottle_used = @bottlecount
WHERE ID =
    (
        SELECT MAX(ID) maxID
        FROM tblPatientInfo
        WHERE room_number = 1
    ) 
```

# html - 不能让 div 达到 100% 的高度？

> ID：12398924
> 
> 赞同：3
> 
> 时间：2012-09-13T03:13:50.453
> 
> 标签：html, css

我不完全确定我做错了什么，而且我不知道如何用谷歌搜索它，因为一个常见的错误非常普遍。**我明确设置了父母的高度**，但我无法将 #main-sub-content 的高度设置为 100%。

这是页面： [http ://coloryourspot.vadremix.com/](http://coloryourspot.vadremix.com/)

以及对应的 CSS： [http ://coloryourspot.vadremix.com/styles/primary/main.css](http://coloryourspot.vadremix.com/styles/primary/main.css)

谁能发现这个问题？

**已解决：**问题是父元素有 height:auto!important;

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T03:26:55.557

删除此属性：

```
div#main-content{height:auto!important} 
```

在 Chrome 中一切正常。

但既然你`#main-sub-content`是`min-height:100%`，你`#footer-clear`就会被排除在屏幕之外。你可能需要稍后解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T03:17:55.117

您的错误是由 footer-clear 引起的

FF 中的 Chrome 开发者工具或 Firebug 将始终帮助您找到这些问题。

# xml-serialization - Go XML Marshalling and the Root Element

> ID：12398925
> 
> 赞同：10
> 
> 时间：2012-09-13T03:14:05.017
> 
> 标签：xml-serialization, go

In Go, you can marshall a struct to XML, e.g.:

```
package main

import (
    "encoding/xml"
    "fmt"
    )

type person struct {
    Name string
    Starsign string
}

func main() {
    p := &person{"John Smith", "Capricorn"}
    b,_ := xml.MarshalIndent(p,"","   ")
    fmt.Println(string(b))
} 
```

produces output:

```
<person>
   <Name>John Smith</Name>
   <Starsign>Capricorn</Starsign>
</person> 
```

My problem is, the person type is lower-case "p" because I want that to be private to the package. But I'd prefer the XML element to be uppercase: `<Person>`. The fields within the struct can be marshalled to other names using tags (e.g. `xml:"name"`) against the structure fields but this doesn't seem to be an option for the structure type.

I have a work-around using templates, but it would be nice to know a better answer.

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-13T04:02:08.357

According to the [encoding/xml.Marshal](http://golang.org/pkg/encoding/xml/#Marshal) documentation:

> The name for the XML elements is taken from, in order of preference:
> 
> *   the tag on the XMLName field, if the data is a struct
> *   the value of the XMLName field of type xml.Name
> *   the tag of the struct field used to obtain the data
> *   the name of the struct field used to obtain the data
> *   the name of the marshalled type

You can use a tag on the XMLName field in the struct to override the person struct's XML tag name. In order to avoid putting it in your actual person struct, you can create an anonymous struct that embeds the person struct you are marshaling.

```
package main

import (
    "encoding/xml"
    "fmt"
)

type person struct {
    Name        string
    Starsign    string
}

func marshalPerson(p person) ([]byte, error) {
    tmp := struct {
        person
        XMLName struct{}    `xml:"Person"`
    }{person: p}

    return xml.MarshalIndent(tmp, "", "   ")
}

func main() {
    p := person{"John Smith", "Capricorn"}
    b, _ := marshalPerson(p)
    fmt.Println(string(b))
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-09-13T19:57:12.037

This also works, though I don't think it's particularly pretty.

However, this worked in a lot more straight forward manner for me than the other accepted solution from 5 years ago.

```
package main

import (
    "encoding/xml"
    "fmt"
    )

type person struct {
    XMLName xml.Name
    Name string
    Starsign string
}

func main() {
    p := &person{xml.Name{Local: "Person"}, "John Smith", "Capricorn"}
    b,_ := xml.MarshalIndent(p,"","   ")
    fmt.Println(string(b))
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-03-17T10:01:07.387

I think the easiest thing is just to add a dummy field to the person struct with the XML tag.

A `struct{}` element does not use any storage, I checked with `unsafe.Sizeof()`.

The only drawback is that e need to add a `struct{}{}` initial value for that field, in this example.

```
package main

import (
    "encoding/xml"
    "fmt"
    )

type person struct {
    Name string
    Starsign string
    XMLName struct{} `xml:Person`
}

func main() {
    p := &person{"John Smith", "Capricorn", struct{}{}}
    b,_ := xml.MarshalIndent(p,"","   ")
    fmt.Println(string(b))
} 
```

# python - 带有nosetests gae问题的App Engine单元测试

> ID：12398927
> 
> 赞同：0
> 
> 时间：2012-09-13T03:14:11.220
> 
> 标签：python, unit-testing, google-app-engine, nosetests

我一直在使用插件对我的应用程序进行单元`nosetests`测试`with-gae`。

然而，我已经用装饰器包装了我的许多 get/post 处理程序，这些装饰器检查数据存储中的某些项目并将它们放入 os.environ 以供处理程序使用。

所以我可能有一个装饰器，它可以做类似的事情：

```
os.environ["user"] = User() 
```

其中 User() 是一个 ndb.Model 实例。但是，当我运行鼻子测试时，这总是会失败并且会给我一个错误，例如：

```
os.environ["user"] = user
File "C:\Python27\lib\os.py", line 420, in __setitem__
   putenv(key, item)
TypeError: must be string, not User 
```

我在这里有一个类似的线程：

[https://groups.google.com/forum/?fromgroups=#!topic/google-appengine/1KR7UIHoQM](https://groups.google.com/forum/?fromgroups=#!topic/google-appengine/1KR7UIPHoQM)

有人告诉我 App Engine 实际上并没有在 os 模块中调用 getenv/putenv。

该错误是因为在 Python 的普通`os`模块中，除了字符串之外，您不能插入任何内容，`os.environ`并且显然`nosetests`正在使用常规 Python`os`模块。

但是，App Engine 用于`request_environment.py`处理`os.environ`调用。

我怎样才能减轻这种情况，以便鼻子测试会在`os.environ`通话中表现出来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T16:31:54.647

另一种方法可能是使用 db 存根 (https://developers.google.com/appengine/docs/python/tools/localunittesting) 在测试之前将所需的实体放在上面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T12:44:46.580

我为其他可能遇到此问题的人找到了解决方案：`PatchOsEnviron`在`google.appengine.api.runtime`运行测试之前调用。

# mysql - 将mysql推送到heroku时出现关系错误

> ID：12398928
> 
> 赞同：2
> 
> 时间：2012-09-13T03:14:11.063
> 
> 标签：mysql, django, ruby, heroku, sequel

我正在尝试使用 valkyrie 将我的本地 mysql 数据库推送到我的 heroku postgres 数据库，其中包含以下内容：

```
valkyrie mysql://localhost/themedb postgres://DATABASE__COLOR_URL/here 
```

它似乎开始运行良好，但随后遇到了一个我无法弄清楚的约束错误：

```
Transferring 17 tables:
auth_group:     100% |=========================================| Time: 00:00:02
auth_group_per: 100% |=========================================| Time: 00:00:00
auth_message:   100% |=========================================| Time: 00:00:00
auth_permissio: 100% |=========================================| Time: 00:00:02
auth_user:      100% |=========================================| Time: 00:00:00
auth_user_grou: 100% |=========================================| Time: 00:00:00
C:/Program Files (x86)/ruby-1.9.3/lib/ruby/gems/1.9.1/gems/sequel-3.31.0/lib/sequel/adapters/postgre
s.rb:181:in `async_exec': PG::Error: ERROR:  relation "user_id" already exists(Sequel::DatabaseError) 
```

我认为这些模型来自`django.contrib.auth`，我不明白为什么会出现关系错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T07:48:09.210

您在 MySQL 中的源数据是否干净？是否在您的 MySQL 数据库中检查了约束，您是否使用 InnoDB？

看起来您的开发数据库中可能有重复的条目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T20:55:30.557

该问题已在 valkyrie 中修复。这是来自[valkyrie 来源](https://github.com/ddollar/valkyrie/blob/master/lib/sequel/extensions/schema_to_hash.rb#L129 "资源")的对该问题的解释：

> mysql 索引命名空间是每个表，而不是每个数据库，因此在 mysql 到 postgresql 的迁移中，可能存在索引名称冲突。

解决方法也很详细：

> 此代码检查它是否*来自*mysql 数据库到 postgresql，如果是，请确保尝试创建第二个同名 idx 不会导致迁移失败，而只是将索引重命名为 prepend表名

请注意，`gem install valkyrie`不会安装“固定”版本。你必须从 github 获取最新的代码，这很好用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T03:22:50.737

你确定你的目标数据库是空的吗？该错误明确告诉您，该 user_id 字段在您尝试创建时已经存在。

# cuda - 阿姆达尔定律和 GPU

> ID：12398929
> 
> 赞同：8
> 
> 时间：2012-09-13T03:14:22.940
> 
> 标签：cuda, parallelism-amdahl

我对阿姆达尔定律在 GPU 上的应用有几个疑问。例如，我有一个内核代码，我使用多个线程启动，比如 N。那么，在阿姆达尔定律中，处理器的数量将是 N 对吗？此外，对于使用大量线程的任何 CUDA 编程，我可以安全地假设 Amdahl 定律减少到 1/(1-p) 其中 p 代表并行代码吗？谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-14T02:11:49.230

> 例如，我有一个内核代码，我使用多个线程启动，比如 N。那么，在阿姆达尔定律中，处理器的数量将是 N 对吗？

不完全是。GPU 的物理内核数 ( *K* ) 不如您可以启动的线程数 ( *N* ) 多（通常，*K*在 10 ³左右，*N*在 10 ⁴ - 10 ⁶范围内）。然而，大部分内核时间（通常）只用于等待从全局内存读取/写入数据，因此一个内核可以无缝处理多个线程。这样，设备最多可以处理*N [0]*个线程而不会相互干扰，其中*N [0]**通常比K*大几倍，但实际上取决于您的内核功能。

在我看来，确定这个*N [0]*的最佳方法是通过实验测量应用程序的性能，然后使用这些数据来拟合阿姆达尔定律的参数 :)

> 此外，对于使用大量线程的任何 CUDA 编程，我可以安全地假设 Amdahl 定律减少到 1/(1-p) 其中 p 代表并行代码吗？

这个假设基本上意味着您忽略了代码并行部分的时间（它执行得无限快），而只考虑串行部分的时间。

例如，如果您在 GPU 上计算两个 100 元素向量的总和，那么初始化设备、数据复制、内核启动开销等（串行部分）比内核执行（并行部分）花费更多的时间。但是，通常情况并非如此。

此外，单个 GPU 内核的性能与 CPU 内核的性能不同，因此您应该进行一些缩放，使 Amdah'l 定律`1 / [(1-p) + k*p/N]`（最简单的是`k = Frequency(CPU) / Frequency(GPU)`，有时*k*会增加更多以考虑架构差异，例如 CPU 内核有 SIMD 块）。

* * *

我也可以反对将阿姆达尔定律直接应用于实际系统。当然，它显示了大势所趋，但它没有抓住一些非平凡的过程。

首先，阿姆达尔定律假设给定无限数量的内核，并行部分会立即执行。这个假设是不正确的（尽管有时它可能非常准确）。即使您计算两个向量的和，也无法比添加两个字节的速度更快。人们可以忽略这个“量子”，或者将它包含在算法的串行部分中，但它有点“打破”这个想法。

如何在阿姆达尔定律中正确估计屏障同步、临界区、原子操作等的影响，据我所知，这是一个未解之谜。这样的操作属于并行部分，但它们执行的 walltime 充其量是独立于线程数的，最坏的情况是正相关的。

简单示例：CPU 集群中计算节点之间的广播时间缩放为`O(log N)`. 一些初始初始化可能需要很`O(N)`长时间。

在简单的情况下，人们可以在一定程度上估计算法并行化的好处，但是（与 CUDA 一样）使用并行处理的静态开销可能比并行处理本身节省的时间更多。

因此，在我看来，编写应用程序、测量其性能并使用它来绘制 Amdahl 曲线通常比尝试*先验*地正确估计算法和硬件的所有细微差别更简单。如果可以很容易地做出这样的估计，它们通常是显而易见的，没有任何“法律”。

# ruby-on-rails - 警卫“找不到表”

> ID：12398930
> 
> 赞同：1
> 
> 时间：2012-09-13T03:14:27.077
> 
> 标签：ruby-on-rails

我正在尝试学习 Rails 和 TDD 做事风格。我对 Guard 有一个问题，它无法找到 table `tasks`。字符串是当我运行 Rails 控制台并执行 Task.all 时，我找到了我正在寻找的表。我已经多次重新启动警卫。知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T03:17:06.373

在命令行中执行`rake db:migrate db:test:prepare`以确保您的测试数据库与开发数据库具有相同的架构。

# c++ - std::ostream 的私有继承和使用 operator<<

> ID：12398932
> 
> 赞同：0
> 
> 时间：2012-09-13T03:14:52.357
> 
> 标签：c++, visual-studio, mysqlpp

**问题：**

```
#include <iostream>
#include <sstream>

class MyClass : private std::ostream
{
public :
    MyClass() : std::ostream(&mBuffer) { }

    using std::operator<<; 

private:
    std::stringbuf mBuffer;
};

// In main function, for example
MyClass c;
c << 'A' << "Hello, World!";  // Works
c << "Hello, World!" << 'A';  // ERROR 
```

错误 (MS Visual Studio 2010) 是错误 C2666: 'std::basic_ostream<_Elem,_Traits>::operator <<' : 5 重载具有类似的转换

我做错了什么还是这是另一个 MS Visual Studio 错误？

**解决方法：** 添加以下成员方法似乎可行，但我想深入了解根本原因。

```
MyClass& operator<<(const char* str) { 
        std::ostream& os = *this;
        os << str;
        return *this; 
    } 
```

**背景：** MySql++ 不能与 Visual Studio 2010 一起编译（参见[邮件列表](http://lists.mysql.com/plusplus/9458 "邮件列表")），因为 VS2010 不支持（除其他外）std::ostream 的公共继承。作为一种解决方法，我正在尝试私有继承，因为这比组合更少黑客攻击。MyClass& 运算符<<(const char* str) { std::ostream& os = *this; 操作系统 << str; 返回*这个；}

**完整的错误信息**

```
1>d:\repo\test\test\main.cpp(30): error C2666: 'std::basic_ostream<_Elem,_Traits>::operator <<' : 5 overloads have similar conversions
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          d:\program files (x86)\microsoft visual studio 10.0\vc\include\ostream(206): could be 'std::basic_ostream<_Elem,_Traits> &std::basic_ostream<_Elem,_Traits>::operator <<(std::_Bool)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          d:\program files (x86)\microsoft visual studio 10.0\vc\include\ostream(467): or       'std::basic_ostream<_Elem,_Traits> &std::basic_ostream<_Elem,_Traits>::operator <<(const void *)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          d:\program files (x86)\microsoft visual studio 10.0\vc\include\ostream(851): or       'std::basic_ostream<_Elem,_Traits> &std::operator <<<char,std::char_traits<char>>(std::basic_ostream<_Elem,_Traits> &,const _Elem *)' [found using argument-dependent lookup]
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          d:\program files (x86)\microsoft visual studio 10.0\vc\include\ostream(764): or       'std::basic_ostream<_Elem,_Traits> &std::operator <<<std::char_traits<char>>(std::basic_ostream<_Elem,_Traits> &,const char *)' [found using argument-dependent lookup]
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          d:\program files (x86)\microsoft visual studio 10.0\vc\include\ostream(679): or       'std::basic_ostream<_Elem,_Traits> &std::operator <<<char,std::char_traits<char>>(std::basic_ostream<_Elem,_Traits> &,const char *)' [found using argument-dependent lookup]
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>
1>          ]
1>          while trying to match the argument list '(MyClass, const char [14])' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T12:19:52.617

只是向前`operator<<`，以便它做正确的事情（TM）：

```
class MyClass : private std::ostream
{
public :
    MyClass() : std::ostream(&mBuffer) { }

    template <typename T>
    MyClass& operator<<(T&& t)
    {
        static_cast<std::ostream&>(*this) << std::forward<T>(t);
        return *this;
    }

private:
    std::stringbuf mBuffer;
}; 
```

事实上，一些流操作符被声明为（友元）自由函数，而不是`std::ostream`. 使用声明不会导入那些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T12:12:41.367

这是定义流插入器的方式有点怪异的结果。有些是`ostream`; 这些是被 using 声明拾取的那些。有些是免费功能；那些采用`stream&`（嗯，正式地，a `basic_ostream<charT>&`），它们不适用于您的类型。这就是为什么`c << 'a'`可以（插入器 for`char`是 的成员`ostream`），而`c << "Hello, world!"`不是（插入器 for`char*`不是成员函数；它需要`stream&`在其左侧）。而在 中，子表达式`c << 'a' << "Hello, world!"`的返回类型是，所以下一个插入器看到的是 an而不是 a ，所以此时就可以了。`c << 'a'``ostream&``ostream&``MyClass`

您的解决方法避免了 的问题`char*`，但对其他类型（如 、 或任何用户定义的类型）没有`std::string`帮助`std::complex`。

正确的答案是，如果你想创建一个可以代表 an 的类型，`ostream`你必须将它实现为`ostream`，从公共继承开始，并实现适当的覆盖。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T04:35:54.987

只是为了澄清，你的意思是

```
using std::ostream::operator<<; 
```

而不是

```
using std::operator<<; 
```

# node.js - 找不到 socket.io.js 的路径

> ID：12398936
> 
> 赞同：2
> 
> 时间：2012-09-13T03:15:13.487
> 
> 标签：node.js, ssl, https, socket.io

我有我的 node.js 和 socket.io 设置并在我的本地机器上完美运行，但现在我正试图将它传输到我的实时服务器。

我已经安装了 node.js 和 socket.io 并且它们正在工作，但我似乎无法通过我的客户端链接到 socket.io/socket.io.js 文件。它不断返回“500 内部服务器错误”

我尝试过使用这两种路径：

```
<script type="text/javascript" src="/socket.io/socket.io.js"></script> 
```

和

```
<script type="text/javascript" src="https://localhost:8080/socket.io/socket.io.js"></script> 
```

为什么找不到呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T09:42:21.390

您是否更改了连接字符串？如果加载了 javascript 文件，您是否检查过浏览器检查器？

```
var sio = io.connect('http://yourdomain.com:80');
sio.socket.on('error', function (reason){
  console.error('Unable to connect Socket.IO', reason);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-03T11:55:56.810

这里我发布了两个文件，一个是 chat.js，另一个是 chat.html。这在 html.this 中有 socket.io.js 的路径。

1) 聊天.js：

```
var io = require("socket.io");
var socket = io.listen(1223);
socket.set("log level", 1);
var people = {};
socket.on("connection", function (client) {
     client.on("join", function(name){
    people[client.id] = name;
    client.emit("update", "You have connected to the server.");
    socket.sockets.emit("update", name + " has joined the server.")
    socket.sockets.emit("update-people", people);
});
client.on("send", function(msg){
    socket.sockets.emit("chat", people[client.id], msg);
});
client.on("disconnect", function(){
    socket.sockets.emit("update", people[client.id] + " has left the server.");
    delete people[client.id];
    socket.sockets.emit("update-people", people);
}); 
```

});

2）聊天.html：

```
 <!DOCTYPE html>
       <html lang="en">
       <head>
        <script src="http://localhost:1223/socket.io/socket.io.js"></script>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js">    </script>
        <script>
        $(document).ready(function(){
            var socket = io.connect("127.0.0.1:1223");
            $("#chat").hide();
            $("#name").focus();
            $("form").submit(function(event){
                  event.preventDefault();
            });
            $("#join").click(function(){
                var name = $("#name").val();
                if (name != "") {
                    socket.emit("join", name);
                    $("#login").detach();
                    $("#chat").show();
                    $("#msg").focus();
                    ready = true;
                }
            });
            $("#name").keypress(function(e){
                if(e.which == 13) {
                    var name = $("#name").val();
                    if (name != "") {
                        socket.emit("join", name);
                        ready = true;
                        $("#login").detach();
                        $("#chat").show();
                        $("#msg").focus();
                    }
                }
            });
            socket.on("update", function(msg) {
                if(ready)
                    $("#msgs").append("<li>" + msg + "</li>");
            })
            socket.on("update-people", function(people){
                if(ready) {
                    $("#people").empty();
                    $.each(people, function(clientid, name) {
                        $('#people').append("<li>" + name + "</li>");
                    });
                }
            });
            socket.on("chat", function(who, msg){
                if(ready) {
                    $("#msgs").append("<li><strong><span class='text-success'>" + who + "</span></strong> says: " + msg + "</li>");
                }
            });

            socket.on("disconnect", function(){
                $("#msgs").append("<li><strong><span class='text-warning'>The server is not available</span></strong></li>");
                $("#msg").attr("disabled", "disabled");
                $("#send").attr("disabled", "disabled");
            });
            $("#send").click(function(){
                var msg = $("#msg").val();
                socket.emit("send", msg);
                $("#msg").val("");
            });
            $("#msg").keypress(function(e){
                if(e.which == 13) {
                    var msg = $("#msg").val();
                    socket.emit("send", msg);
                    $("#msg").val("");
                }
            });

        });
    </script>
   </head>
   <body>
    <div class="row">
      <div class="span2">
        <ul id="people" class="unstyled"></ul>
      </div>
      <div class="span4">
        <ul id="msgs" class="unstyled"></ul>
      </div>
    </div>
    <div class="row">
       <div class="span5 offset2" id="login">
        <form class="form-inline">
        <input type="text" class="input-small" placeholder="Your name" id="name">
            <input type="button" name="join" id="join" value="Join" class="btn btn-primary">
        </form>
    </div>
    <div class="span5 offset2" id="chat">
      <form id="2" class="form-inline">
        <input type="text" class="input" placeholder="Your message" id="msg">
        <input type="button" name="send" id="send" value="Send" class="btn btn-success">
      </form>
        </div>
      </div>
   </body>
</html> 
```

使用命令运行 chat.js - node chat.js 并在浏览器中运行 chat.html。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T03:38:09.717

“500 Internal Server Error”通常意味着“服务器崩溃”或至少“服务器遇到异常”。所以问题可能不是缺少 socket.io.js。

无论如何，当我在本地工作和远程不工作之间存在差异时，有时是由于环境变量的差异。你在哪里部署你的 node.js？Heroku、EC2、Joyent？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-16T23:16:17.153

我知道它已经 8 岁了，但我遇到了同样的错误，也许我的解释可以帮助别人。

通过“尝试转移到我的实时服务器”，我确实将它部署到了通过 Apache 的乘客模块运行节点的虚拟共享主机。然后我联系了技术支持，他们说脚本开始监听一些端口和崩溃，这种托管计划根本不可能，我应该申请 VPS/VDS。

这听起来很奇怪，因为该应用程序甚至没有开始监听，它只是访问静态文件。但可能 Express 提供静态文件的方式不起作用。日志说：

[pid 66771] 19:33:18 listen(12, 511) = -1 EPERM (不允许操作) events.js:183 throw er; // 未处理的“错误”事件 ^

我能够阅读 Express 正在使用“流”（nodejs.org/api/stream.html）来传递静态文件，我有一个建议，它根本不适用于这种类型的托管。其他静态文件是物理存在的，因此它们与 Nginx 一起交付并且不会失败。这让人有些意外，因为有些文件被加载，有些文件在找不到资源时给出错误 500，甚至 4xx。

基本上响应 500 告诉我们输出意外结束。日志说“标题之前的脚本结束”。当您无法访问任何日志消息并且只收到响应 500 并且必须联系支持人员以查看日志时，这是令人不快的。

# c++ - C ++的“简单”解析器

> ID：12398943
> 
> 赞同：1
> 
> 时间：2012-09-13T03:16:15.077
> 
> 标签：c++, regex, parsing, compiler-construction, sed

我有一个项目（SCC），它有点像 C++ 的 REPL。在布什提示我可以做

```
scc '2+2' 
```

或者更复杂一点：

```
scc  'double x = 0.5;  sin(x)' 
```

这相当于：

```
scc  'double x = 0.5;  cout << sin(x) << endl;' 
```

如果最后一个（也是唯一可能的）语句表达式没有以分号终止，则将其发送到`std::cout`. 我的问题是关于从 C++ 代码片段中解析出最后一条语句。我很清楚 C++ 解析有多么困难。用简单的 sed 脚本通过查找 last 来解析 last 语句`';'`最初对我来说已经足够了。但是现在项目比小型个人项目大，我需要一个更好的解析器。

下面是我当前 SED 解析器的迷你单元测试。您可以看到我用来进行解析的 SED 正则表达式：

```
 cat  <<EOF  | sed    's/$//;s/[ \t]*$//;s/\(.*[;}]\)*\([^;}]\+$\)/\0    ==>>  \1   PRINT(\2);/'

    print
    no-print;
    OK;  print
    OK;  no-print;
    OK;  no-print;  print
    FAIL;   while(a){b;}  no-print
    FAIL;   while(a)  no-print
    OK;     for(a;b;c) {no-print}
    FAIL;   for(a;b;c) no-print
    OK;     {}
    OK;     {no-print-code-block;}
    FAIL;  print_rvalue_t{1}
    FAIL;   f(int{1})
    FAIL;   f(";")
    FAIL;   f(';')
    FAIL;   f("}")
    EOF 
```

-line之后的第一行`cat`是空行。第二行是一个空格线。3rd - 不以 - 结尾的语句`';'`应该被打印出来。第 4 - 2 语句片段。等等。如果有`FAIL`- 解析器将在这一行失败。输出如下所示：

```
 print   ==>>     PRINT(print);
    no-print;
    OK;  print      ==>>  OK;   PRINT(  print);
    OK;  no-print;
    OK;  no-print;  print   ==>>  OK;  no-print;   PRINT(  print);
    FAIL;     while(a){b;}  print     ==>>  OK;       while(a){b;}   PRINT(  no-print);
    FAIL;   while(a)  no-print      ==>>  FAIL;   PRINT(    while(a)  no-print);
    OK;     for(a;b;c) {no-print}
    FAIL;   for(a;b;c) no-print     ==>>  FAIL;     for(a;b;   PRINT(c) no-print);
    OK;     {}
    OK;     {no-print-code-block;}
    FAIL;  print_rvalue_t{1}
    FAIL;   f(int{1})       ==>>  FAIL;     f(int{1}   PRINT());
    FAIL;   f(";")  ==>>  FAIL;     f(";   PRINT("));
    FAIL;   f(';')  ==>>  FAIL;     f(';   PRINT('));
    FAIL;   f("}")  ==>>  FAIL;     f("}   PRINT(")); 
```

没有`==>>`标记的行是未经修改就通过解析器的行。在标记被转换后的片段，最后一条语句被包裹在`PRINT( )`. 如您所见，当前的 SED 解析器不是很好。

所以我正在寻找更好的东西。即使解析时不是 100% 正确，我也会接受答案。更好的 SED 脚本对我来说已经足够了。正确的做法可能是使用真正的解析器（来自 CLANG 之类的东西），但我有点担心这项工作的复杂性。

我试图在 boost/xpressive - [http://github.com/lvv/scc/blob/master/sccpp.h](http://github.com/lvv/scc/blob/master/sccpp.h)中编写一个解析器。当然，它不是真正的 C++ 解析器。这只是为了一件事而做的快速破解：解析最后一条语句。它能够完成上述所有单元测试。但不幸的是，对于较长的片段，它的速度非常慢。

问题是：如何制作更好的解析器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:41:41.110

> 正确的做法可能是使用真正的解析器（来自像 CLANG 之类的东西），但我有点担心这项工作的复杂性

不算*太高*。一个简单的事实是，C++ 就像 HTML——你需要一个真正的库来完成它，所以除非你想花费数年时间开发自己的库，否则几乎唯一的方法就是使用现有的 C++ 解析器。在这方面，Clang 是唯一的选择。因此，无论您发现它多么复杂，您都别无选择。

# .net - 使用 Prism MVVM 模拟对话框和弹出窗口？

> ID：12398944
> 
> 赞同：0
> 
> 时间：2012-09-13T03:16:19.317
> 
> 标签：.net, wpf, xaml, mvvm, prism

我正在考虑将 MVVM 项目迁移到 Prism 框架，并想知道 Prism 是否可以轻松支持“模拟”对话框窗口和弹出窗口，每个窗口和弹出窗口都可能具有自己的区域。通过模拟，我的意思是主外壳上的控件，具有对话框或弹出窗口的外观，而不是实际的窗口。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T07:39:25.757

是的，事实上它工作得很好（你的方法正是我们所做的）。

只有一件事，请确保您使用正确的 IRegionManager 注册您的区域，我们遇到了一些问题，即它会被注册到错误的 IRegionManager。

如果您需要任何示例/指导，请大声告诉我！

干杯。圣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T03:23:12.623

我认为它作为简单的silverlight 效果很好。所以不用担心模拟对话框和弹出窗口。它与 Simple MVVM 一样开放。

进入 PRISM 也是个好主意。

问我是否有任何疑问。

# c - 在 C 中模拟 Linux 命令 tee

> ID：12398947
> 
> 赞同：4
> 
> 时间：2012-09-13T03:16:39.413
> 
> 标签：c, linux, pipe, tee

我必须`tee`在 C for Linux 中模拟命令。内部如何`tee`运作？它看起来像一个T形管，所以我应该使用管子吗？有没有一种特殊的管子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T03:20:29.617

tee 接受标准输入并将数据流复制到标准输出以及作为选项提供的文件，它可以在许多非常不同的情况下使用。

C 中的实现非常简单，只需编写一个程序，将所有数据从 stdin 复制到 stdout，而且在基于命令行参数打开的文件上使用相同的输出语句用于 stdout。

基本上在伪代码中：

```
file f = open(argv[1])
while (! end of file stdin) {
  buffer = read stdin
  write stdout buffer
  write f buffer
}
close(f) 
```

请注意，您实际上不必对管道做任何事情，您的 shell 将整理管道，程序只需将数据从一个流复制到另外两个流。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T04:51:33.620

我完成了程序！

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

main(int argc, char *argv[]){

FILE *fp, *fp1;
char buffer;

if(argc != 4){
    printf("\nError");
    printf("\nSintaxis: tee [archivo1] [archivo2]\n");
    exit(0);
}

if(strcmp(argv[1], "tee") == 0){
    fp = fopen(argv[2], "r");
    fp1 = fopen(argv[3], "w");

    printf("\Content in %s:\n", argv[2]);

    while(!feof(fp)){
        buffer = fgetc(fp);
        fputc(buffer, fp1);
        printf("%c", buffer);
    }

    printf("\n\n%s received %s\n", argv[3], argv[2]);   

    fclose(fp);
    fclose(fp1);
    }
    else
        printf("\nThe first argument have to be tee\n");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-11-17T22:17:50.423

这是我大约 20 年前编写的一些代码，用于在 Windows 中实现 TEE。从那时起，我一直将它与各种批处理文件一起使用。请注意每行末尾的 flush 命令。

```
#include <stdio.h>
#include <share.h>

int main (int argc, char * argv[])
{
    if (argc < 2 )
    {
        printf ("Error:  No output file name given, example:  theCmd 2>&1 |ltee outputFileName \n");
        return 1;
    }
    FILE *Out = _fsopen(argv[argc-1], "a", _SH_DENYWR);
    if (NULL == Out)
    {
        char buf[300];
        sprintf_s(buf, 300, "Error openning %s", argv[argc-1]);
        perror(buf);
        return 1;
    }
    int ch;
    while ( EOF != (ch=getchar()))
    {
        putchar(ch);
        putc(ch, Out);
        if ( '\n' == ch )
            fflush(Out);
    }
    _flushall();
    fclose(Out);
    return 0;
} 
```

# search - 在 Mercurial 存储库中，如何找到子目录中包含的最后提交的 10 个文件？

> ID：12398948
> 
> 赞同：2
> 
> 时间：2012-09-13T03:16:40.437
> 
> 标签：search, mercurial, find, commit

在 Mercurial 存储库中，如何找到子目录中包含的最后提交的 10 个文件？我想这样做是因为我有点担心某些文件被错误地提交。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:03:04.373

使用[revsets](http://www.selenic.com/hg/help/revsets)可能是最好的方法。

一个接近的近似值可能是`hg log -r "last(file('subdirectory/*'), 10)"`。

此命令返回触及子目录中任何文件的最后 10 次提交。从那里，您可以查看受影响文件的每个提交。

如果`--template "{files}\n"`添加到命令中，它将列出每个提交中涉及的文件。但是，该列表也将包括子目录之外的文件。有关详细信息，请参阅[hg 帮助模板](http://www.selenic.com/hg/help/templating)。

# node.js - 使用everyauth 和express 将用户详细信息传递给jade

> ID：12398951
> 
> 赞同：0
> 
> 时间：2012-09-13T03:16:51.020
> 
> 标签：node.js, express

基于 Mircosoft 的 WebMatrix 2 中的示例项目，我已经使用everyauth 和 express 启动了一个小型 webapp。我无法理解的是信息如何传递到视图以及视图如何从部分视图拼接在一起。

该视图是从名为 layout.jade 的父视图和部分视图（例如 index.jade）生成的。然而，这些观点似乎没有相互参照。

路由似乎是用以下代码管理的：

```
app.configure(function() {
    app.set('views', __dirname + '/views');
    app.set('view engine', 'jade');
    app.use(express.bodyParser());
    app.use(express.methodOverride());
    app.use(require('./middleware/locals'));
    app.use(express.cookieParser());
    app.use(express.session({ secret: '[secret]' }));
    app.use(everyauth.middleware());
    app.use(express.compiler({ src: __dirname + '/public', enable: ['less'] }));
    app.use(connect.static(__dirname + '/public'));
    app.use(app.router);
}); 
```

并且路线定义如下：

```
app.get('/', function(req, res) {        
    res.render('index', { title: 'Home Page.  ' })
}); 
```

这似乎完美地合并了布局和局部视图，但我无法弄清楚如何。谁能阐明这是如何工作的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T06:07:55.150

如果您不是来自红宝石背景，则可能很难掌握，希望这会有所帮助。

默认情况下，快递将呈现“布局”（在您的情况下为 layout.jade）。然后在每个页面上呈现布局，除非在其他地方指定。尽管这可能对头部始终相同的网站和博客有所帮助，但我发现它在 Web 应用程序中很麻烦。如果您愿意，可以通过将以下代码添加到您的应用设置来禁用：

`app.set('view options', {layout: false});`

Express 然后将呈现您的视图（在本例中为 index.jade）。索引是大部分内容。

Express 还可以渲染局部视图，这是视图内部的局部视图。这对页脚之类的项目很有帮助，但会影响性能。重要的是要注意，局部与视图不同。

我发现没有 Jade/Tempting 经验的人使用 EJS 而不是 Jade 的学习曲线更小，因为它的流程很像 HTML。

下面是一些在我刚开始使用 express 时真正帮助我掌握视图/部分和中间件的视频。Nodetuts 是一个很好的资源。Express 文档也已发展成为一种非常有价值的资源，祝您编码愉快，祝您好运！
[快递文档](http://expressjs.com/)
[nodetuts express](http://nodetuts.com/tutorials/10-express-part-ii-static-files-partials-and-locals.html#video)

# javascript - 在javascript中使用参数执行动态函数

> ID：12398957
> 
> 赞同：0
> 
> 时间：2012-09-13T03:18:02.357
> 
> 标签：javascript

如果以下可能？我希望将警报（结果）移动到一个函数中并动态调用它。

**当前的**

```
$.ajax(this.href, {
    success: function (result)
    {
        alert(result);

        AjaxComplete();
    }
}); 
```

**我的尝试 - 不工作**

```
$.ajax(this.href, {
    success: function (result)
    {
        window["MyAlert(result)"]();

        AjaxComplete();
    }
});

function MyAlert(result)
{
    alert(result);
} 
```

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T03:19:59.923

为什么你不能这样做？

```
MyAlert(result); 
```

如果`MyAlert`是`window`对象的一部分，则它已经是全局的。

除非您想按名称调用任意函数（这不是很好的做法，IMO），否则您可以这样做：

```
window[function_name_string](argument); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T03:22:02.890

```
window["MyAlert(result)"); 
```

是无效的语法（不匹配`[`和`)`，错误的函数名，根本没有调用它，只是得到它..）。应该

```
window["MyAlert"](result); 
```

如果您想这样称呼它，但是正如 Blender 所提到的，我认为您没有理由不能正常称呼它。

# int - uint64_t 的标准位表示？

> ID：12398960
> 
> 赞同：0
> 
> 时间：2012-09-13T03:18:23.693
> 
> 标签：int, standards, uint64

我知道对于浮点数，IEEE 有一个标准的表示格式——IEEE 754。uint64_t 有标准的表示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T03:26:34.143

它是无符号整数，因此没有符号位，并且应该有一个扁平位结构，使得

```
value = bit_0 * 2^0 + bit_1 * 2^1 + bit_2 * 2^2 +  . . .  + bit_(n-1) * 2^(n-1)
value = sigma (i=0 to n-1) {bit_i * 2^i} 
```

# google-maps - 如何找到 google.maps.FusionTablesLayer 的边界？

> ID：12398964
> 
> 赞同：0
> 
> 时间：2012-09-13T03:18:59.827
> 
> 标签：google-maps, google-maps-api-3, google-fusion-tables

我正在构建由 Google Fusion Table 提供支持的动态 Google 学区地图。我希望用户能够操作列表并选择一个区域以放大地图。

标记在 FusionTablesLayer: 'layer0' 中呈现。

```
layer0 = new google.maps.FusionTablesLayer({
    query: {
        select: 'SCHL_FULL_ADDR',
        from: '5119944',
        where: 'CTYDIST = ' + shapes[muni]
    }
}); 
```

我想让地图实际放大学区，以便学区填充地图画布。

但我不知道如何获得这个 FusionTablesLayer 上所有标记的边界。FusionTables api 中似乎没有任何东西可以快速获取此信息。

任何人都可以提出一些建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T09:26:18.120

我知道有两种选择：

1.  使用[GViz](http://www.geocodezip.com/www_vciregionmap_comC.html)或 Fusion Tables v1 API 查询表以获取区域中所有标记的位置，将它们添加到 LatLngBounds 对象并使用该边界调用 map.fitBounds。[[另一个例子](http://www.geocodezip.com/v3_FusionTablesLayer_centerOnMarkers.html)]

2.  将适当的中心和缩放或边界添加到表（或另一个表）并使用它。

# c++ - C ++中的字符串反转不会用新字符串替换旧字符串

> ID：12398966
> 
> 赞同：2
> 
> 时间：2012-09-13T03:19:30.080
> 
> 标签：c++

我正在制作一个简单的回文检测器，方法是将 int 转换为字符串，反转字符串并将字符串返回到 int 进行比较（也可以比较字符串，不是问题），但由于某种原因，反向字符串保留了前一个值并将新的值添加到行中，而不是替换它们……这是为什么呢？

```
#include <iostream>
#include <string>
#include <sstream>

using namespace std;

int main(){
    string tempreverse;
    string temp;
    stringstream out;
    int tempnumber, tempnumber2; 
    int palindrome = 0;

    for(int i = 100; i < 111; i++){
        for(int j = 100; j < 111; j++){
            tempnumber = i * j;
            out << tempnumber;
            temp = out.str();
            tempreverse = string (temp.rbegin(), temp.rend());
            tempnumber2 = atoi(tempreverse.c_str());
            if (tempnumber == tempnumber2){
                palindrome = tempnumber;
            }
        }
    }

    cout << palindrome << "\n";
    cout << "Press ENTER to continue...";
    cin.ignore( std::numeric_limits<std::streamsize>::max(), '\n' );
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T03:22:41.290

您每次都需要清除您的字符串流。你不断地向它附加东西并使字符串变大。

我会在循环中声明它，以便它每次都超出范围。我以前读过有关清除字符串流的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T03:27:52.200

This is because you are declaring your variable `out` outside of the nested for loops. this means the same `out` variable is used for every iteration and being appended to each time through the loop.

To fix simply this, you can move the `stringsteam out` line to inside of the inner for loop.

In general, you should be declaring your variables when you first use them to keep them in the smallest containing scope unless you have a particular reason not to. This also prevents accidental usage of uninitialized values. For instance, you can change the line `temp = out.str()` to `string temp = out.str()` and remove the `string temp;` line from the beginning.

# sql-server - SQL 2008 R2 和 SQL 2012 中的不同行为

> ID：12398976
> 
> 赞同：0
> 
> 时间：2012-09-13T03:20:51.767
> 
> 标签：sql-server, sql-server-2012

当我尝试更新一些数据时

```
if Exists(select * from sys.columns where Name = N'Enabled' 
          and Object_ID = Object_ID(N'SLBPool'))
      begin
            update SLBPool set SLBPool.Enabled=1
      End
GO 
```

它在 SQL 2012 中显示错误“**无效的列名'已启用**'”，但是，在 2008 R2 中没有发生，怎么来的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T09:56:24.520

这应该适用于任何版本的 SQL Server（当然可以追溯到 2000 年，IIRC）的唯一方法是，如果您在评估 if 条件之前阻止该语句被编译 - 这将指示动态 SQL：

```
if Exists(select * from sys.columns where Name = N'Enabled' 
          and Object_ID = Object_ID(N'SLBPool'))
      begin
            exec sp_executesql 'update SLBPool set SLBPool.Enabled=1'
      End
GO 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T03:45:20.477

这可能是因为服务器实例的排序规则，检查这是否有效，或者产生一些其他错误：

```
IF EXISTS(SELECT * FROM sys.columns WHERE name = N'Enabled' 
          AND object_id = OBJECT_ID(N'SLBPool'))
      BEGIN
            UPDATE SLBPool SET SLBPool.Enabled = 1
      END
GO 
```

# javascript - 强制数组在排序后重新计算长度

> ID：12398977
> 
> 赞同：2
> 
> 时间：2012-09-13T03:21:01.547
> 
> 标签：javascript, google-chrome

如果您使用数组并执行以下操作：

```
arr = [];
arr[100] = 1; 
```

长度为 101，这是有道理的，因为 0-99 被设置为`undefined`

现在，如果我们对该数组进行排序：`arr.sort()`它看起来像这样：`[1, undefined x100]`因为没有保留键。但是，长度仍然是 101，因为`undefined`已经全部移到末尾，而不是删除。

这种行为是故意的吗？如果是这样：是否有一个内置函数可以删除`undefined`和重新计算，为什么是故意的？

我**不是**在问如何编写自己的函数来重新计算长度。排序数组的长度可以很容易地强制使用`for (x = 0; arr[x] != undefined; x++);arr.length = x;`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T03:26:22.887

```
> arr = [];
> arr[100] = 1;

> The length will be 101, which makes sense due to 0-99 being set as undefined 
```

该数组在 100 处只有一个成员，就像：

```
var arr = { '100': 1, 'length': 101}; 
```

> 现在，如果我们对该数组进行排序： arr.sort() 它将如下所示： [1, undefined x100]

不，它没有。它有一个成员为 0，长度为 100。没有 100 个成员的值为“未定义”。

如果您希望将数组减少为仅定义的成员，则没有内置函数可以做到这一点（即本质上将*长度*设置为具有值的最高索引）。

您只能通过遍历数组来做到这一点，例如通过从右边减少长度直到达到现有属性：

```
function trimArray(arr) {
  var i = arr.length;
  while ( !(--i in arr)) {
    arr.length -= 1;
  } 
} 
```

请注意，要使上述内容正常工作，必须对数组进行排序。此外，它会修改传入的数组。

这是一种使用 compress 方法扩展 Array.prototype 的方法，因此仅存在已定义成员的数组并且长度被适当地重置：

```
if (!('compress' in Array.prototype)) {
  Array.prototype.compress = function() {

    var i = 0,
        lastExisting = 0,
        len = this.length;

    do {

      if (i in this) {
        this[lastExisting++] = this[i];
      }
    } while (++i < len)

    this.length = lastExisting; 
  }
} 
```

请注意，它不会删除值为*undefined*的成员，只会删除那些根本不存在的成员。所以：

```
var x = [,,,,1,,,2];
x[20] = void 0;

x.compress()

alert(x + '\n' + x.length); // [1,2,<undefined>], length = 3 
```

### 编辑

正如 zzzzBov 所指出的，这也可以使用`filter`：

```
var x = x.filter(function(item){return true;}); 
```

它将替换`x`为仅包含已定义成员的新数组，而不管其值如何。它将是非稀疏的（或连续的）并且具有适当的长度，例如

```
var x = [,,,,1,,,2];
x[20] = void 0;  // set x[20] to undefined, length is 21

x = x.filter(function(item){return true;});  // [2, 3, <undefined>], length = 3 
```

请注意，此方法只会更新 x 引用的数组，不会更新对同一数组的任何其他引用，例如

```
 var x = [,,1];
 var y = x;  // x and y reference same array

 x = x.filter(function(item){return true}); // x is now another array of members
                                            // filtered from the original array

 alert(x); // [1] x references a different array
 alert(y); // [,,1] y still references the original array 
```

如果需要保留原始数组，这可能是有用的行为。相反，该`compress`方法修改了原始数组：

```
 var x = [,,1];
 var y = x;  // x and y reference same array

 x.compress();

 alert(x); // [1] x is a modified version of the original array
 alert(y); // [1] y references the same (original) array 
```

我不知道是否打算`Array.prototype`在未来版本的 ECMAScript 中添加这样的方法或它可能被称为什么，因此可能建议使用不同的名称，比如`xcompress`或类似的名称，以避免与未来版本发生意外冲突并使其成为可能很明显，这是一种本机方法，而不是内置方法。

对于合适的名称，我也有点难过，因为*packed*和*compressed*已经定义了与*non-contiguous*不同的含义，但这看起来很笨拙，所以现在是*compress*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T03:32:40.237

```
arr = [];
arr[100] = 1; 
```

代码不会设置`0-99`为`undefined`，它只是将键设置`100`为`1`，并将`length`属性设置为`101`。

并且`Array.sort`不会改变`length`数组的属性。

排序后，有两个自己的属性`arr`，`0`是`1`，`length`还是仍然`101`。

![在此处输入图像描述](../Images/1e83ebc7600107040157dbe8f2ddc32d.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T03:27:23.917

如果您想解决该问题，[`filter`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)请在对数组进行排序后（或在排序前对其进行过滤）。

```
var arr;
arr = [];
arr[100] = 1;
arr.sort();
arr = arr.filter(function (item) {
    return typeof item !== 'undefined';
}); 
```

实际发生的情况是您正在覆盖`length`属性，对象使用该`Array`属性来确定数组的末尾在哪里，数组是否具有那么多属性。

# python - 如果文件不存在则重新启动循环

> ID：12398978
> 
> 赞同：0
> 
> 时间：2012-09-13T03:21:08.237
> 
> 标签：python

在 Python 循环开始时，我希望代码测试当前文件夹中是否存在某个文件，如果不存在，我希望它跳出并使用下一个值重新启动循环。

我之前尝试删除文件时已经这样做了：

```
try:
    os.remove('file.txt')
except os.error:
    pass 
```

我需要做类似的事情吗？但不是“通过”，而是“继续”？

显然我现在不是要删除文件，我只是想看看它是否存在。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-13T03:23:37.677

采用

```
os.path.exists() 
```

用于检查您的文件是否存在。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-13T03:23:40.837

你最好只使用异常处理程序。如果您检查文件然后尝试删除它，如果在您检查后有其他东西删除了该文件，您可能会遇到异常

```
for filename in filenames:
    try:
        os.remove(filename)
    except os.error:
        pass 
```

检查文件名的存在是这样完成的

```
for filename in filenames:
    if os.path.exists(filename):
        ... 
```

# wxwidgets - 重新附加/删除 wxMenuBar 上的 wxMenu + 内存问题

> ID：12398986
> 
> 赞同：0
> 
> 时间：2012-09-13T03:22:45.980
> 
> 标签：wxwidgets

我有一个 wxMenuBar 和一个 wxMenu。我可以使用 Append(...) 成功地将菜单附加到菜单栏。我还可以使用 Remove(...) 成功删除菜单。

“menu”示例演示了添加和删除菜单：它创建一个菜单，Append-s，然后 Remove-s，在返回的指针上调用 delete。要添加另一个，它会创建一个全新的菜单。因此没有任何重新连接。

但是，我希望能够附加、删除和重新附加任何特定菜单（或允许这样做的等效菜单）。此外，它必须没有内存泄漏。

* * *

我努力了：

```
//startup
menubar->Append(menu,title);
//later
delete menubar->Remove(1); 
```

这会产生一个没有内存泄漏的工作程序。奇怪的是，我发现 menubar->Remove 返回的指针与最初 Append-ed 的指针不同。

我试过了：

```
//startup
menubar->Append(menu,title);
//later
delete menubar->Remove(1);
menubar->Append(menu,title); //add it back immediately after removing it. 
```

这会在 appbase.cpp:1015 中产生一个断言错误，这与两次附加菜单有关。

我真的不知道自己在做什么，如果有人能解释这样做的“正确”方法，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T12:14:57.887

只要您不删除菜单并将其保存在某处，就可以了。

像这样的东西：

```
//construct menu
// this needs to be saved somewhere, perhaps as an attribute of the app frame 
wxMenu * menu = new wxMenu( title );
....

// Attach menu to menubar
menubar->Append(menu,title);

....

// remove menu ( but don't delete! )
menubar->Remove(1);

....

// re-attach menu
Append(menu,title); 
```

这是处理右键单击某些内容时显示的弹出上下文菜单的标准方法，但它不是在窗口中弹出菜单，而是附加到菜单栏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T09:48:47.477

我不明白返回的菜单`Remove()`与您附加的菜单有何不同。也许您的菜单不在位置 1？

无论如何，规则很简单：菜单栏拥有附加（或插入）它的菜单的所有权，这意味着它将删除它们。当您从菜单栏中删除菜单时，它会放弃所有权，现在您有责任将其删除。

因此，您可以删除菜单并稍后重新添加。但是您不能两次添加相同的菜单。

# asp.net - 在 ASP.NET 中执行文件上传而不显示上传控件

> ID：12398989
> 
> 赞同：0
> 
> 时间：2012-09-13T03:23:03.497
> 
> 标签：asp.net, file-upload

我正在使用 VS2010,C# 开发一个 ASP.NET Web 应用程序，我想在我的用户单击超链接（或标签，它没有区别）时显示文件上传控件，然后应该执行上传操作，我使用上传控件没有问题，但目前我有一个不可见的上传控件，它在我的超链接 onclick 函数中使用 JavaScript 显示它，显示上传控件但我不知道如何获取上传的文件，我应该如何执行这个操作？我想在我的用户单击标签或超链接时显示上传文件对话框，然后他们可以选择他们的文件并上传文件，最后我应该能够在服务器端使用这个文件（我要去获取文件流并将其存储在 SQL 中），我有什么选择？查询？阿贾克斯？JavaScript？或者是其他东西？

我的 JavaScript 函数：

```
function OpenFile()
{
document.getElementById("<%=fu.ClientID%>").style.display="";
var result = document.getElementById("<%=fu.ClientID%>").click();
document.getElementById("<%=fu.ClientID%>").style.display="none";
return false;
} 
```

和我的标记：

```
<asp:FileUpload ..... style="display:none;"....>
    <ASP:hyperlink onclick="OpenFile();"...../> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T04:16:34.690

选择文件并执行后`PostBack`，您可以按如下方式访问该文件

```
<asp:FileUpload ID="FileUpload1" ..... style="display:none;"....> 
```

[使用PostedFile](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.fileupload.postedfile.aspx)访问底层发布的文件

```
 var fileLen = FileUpload1.PostedFile.ContentLength;
    Byte[] Input = new Byte[fileLen];
    myStream = FileUpload1.FileContent;
    myStream.Read(Input, 0, fileLen); 
```

或者只是将其保存在服务器上：

```
FileUpload1.SaveAs(savePath); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T04:20:40.447

我想推荐**[uploadify](http://www.uploadify.com/demos/)**，它是用 flash 构建的。使用 jQuery 和 asp.net 非常简单易用。

演示依赖 php 进行上传，但它可以用于任何平台，包括 asp.net。您必须编写一个处理程序文件来执行上传、流式传输和 sql 存储部分。

检查这些答案

*   @Zitun [https://stackoverflow.com/a/4972872/206766](https://stackoverflow.com/a/4972872/206766)
*   @Blankasaurus [https://stackoverflow.com/a/2501069/206766](https://stackoverflow.com/a/2501069/206766)

# jakarta-ee - 这些天选择哪个java开源门户平台？

> ID：12398994
> 
> 赞同：2
> 
> 时间：2012-09-13T03:23:20.013
> 
> 标签：jakarta-ee, liferay, portlet, portal

我们公司正在开发一个基于门户和portlet 的企业应用程序。

您能否推荐哪个开源门户平台适合开发人员并且可以与 Oracle WebLogic 服务器集成。Oracle WebCenter Portal 不是我们的选择。

我已经阅读了一些关于 Liferay、eXo-platform、GateIn 的信息，但我想要一些有经验的开发人员的意见，哪个更好以及为什么。

您能描述一下您正在使用的平台的优缺点吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T10:35:19.667

在我们的组织中，我们目前正在使用 Liferay 6.0.6，社区版。我们开发外联网门户的经验符合预期。您可以在运行时扩展（某些）功能，例如主题、portlet、挂钩。在我们的开发和部署过程中，我没有发现 Liferay 不能做的事情，我们使用了许多不同的 portlet 特性（异步、友好 url、interportlet 通信、服务构建器等），构建了一个主题，扩展了 i18n以及注册等。

现在您可以使用 6.1.0 版本甚至 6.2.0（目前正在开发中），它支持更多花哨的功能来简化 Web 开发和影响组织、站点等的必要模型重组。

社区非常活跃，也有企业版支持、错误修复、服务包......

我不是Liferay专家，我才用了半年，但我很喜欢。

希望能帮助到你 ：）