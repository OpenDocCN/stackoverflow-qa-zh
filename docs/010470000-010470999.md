# StackOverflow 问答 10470000-10470999

# django - 在 Django 中更改 app_label 时出现 UnicodeEncodeError

> ID：10470000
> 
> 赞同：0
> 
> 时间：2012-05-06T10:59:38.890
> 
> 标签：django, django-admin

从[这里](https://stackoverflow.com/questions/4057575/django-admin-interface-custom-app-name)，我改变了我的模型：

```
class MyModel(User):

    class Meta:
        verbose_name=u"my app verbose name"
        app_label = u"My Members"
        db_table = "members_mymodel" 
```

现在在 django admin 中访问应用程序时出现错误：

```
Traceback (most recent call last):

File "/Library/Python/2.6/site-packages/django/core/servers/basehttp.py", line 283, in run
    self.result = application(self.environ, self.start_response)

  File "/Library/Python/2.6/site-packages/django/contrib/staticfiles/handlers.py", line 68, in __call__
    return self.application(environ, start_response)

  File "/Library/Python/2.6/site-packages/django/core/handlers/wsgi.py", line 272, in __call__
    response = self.get_response(request)

  File "/Library/Python/2.6/site-packages/django/core/handlers/base.py", line 146, in get_response
    response = debug.technical_404_response(request, e)

  File "/Library/Python/2.6/site-packages/django/views/debug.py", line 294, in technical_404_response
    'reason': smart_str(exception, errors='replace'),

  File "/Library/Python/2.6/site-packages/django/utils/encoding.py", line 123, in smart_str
    errors) for arg in s])

  File "/Library/Python/2.6/site-packages/django/utils/encoding.py", line 124, in smart_str
    return unicode(s).encode(encoding, errors)

  File "/Library/Python/2.6/site-packages/django/core/urlresolvers.py", line 191, in __repr__
    return '<%s %s (%s:%s) %s>' % (self.__class__.__name__, self.urlconf_name, self.app_name, self.namespace, self.regex.pattern)

  File "/Library/Python/2.6/site-packages/django/core/urlresolvers.py", line 191, in __repr__
    return '<%s %s (%s:%s) %s>' % (self.__class__.__name__, self.urlconf_name, self.app_name, self.namespace, self.regex.pattern)

UnicodeEncodeError: 'ascii' codec can't encode character u'\u0130' in position 17: ordinal not in range(128) 
```

管理员链接：

```
http://localhost:8000/admin/My%20Members/ 
```

我怎么解决这个问题？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T11:49:14.507

听起来`\u0130`您的代码库中某处有一个奇怪的字符 ( )。该字符是“上面带有一个点的拉丁大写字母 i”：İ。尝试搜索并删除它。

如果您在`.py`文件中使用 UTF-8 字符，请将其添加为第一行，将它们声明为 UTF-8：

```
# -*- coding: utf-8 -*- 
```

# c# - 保存常用方法？

> ID：10470002
> 
> 赞同：0
> 
> 时间：2012-05-06T11:00:08.743
> 
> 标签：c#, winforms

我有许多方法返回我为我的程序编写的 C# 形式的 void，我一直使用这些方法。由于我需要在多个表单上使用它们，我认为必须有更好的方法将它们保存在某个 Class、Data 中，而不是为每个表单单独复制它们......我对此很陌生，所以我正在寻找建议。该怎么办？

示例：我创建了类似于以下的方法：

```
private void NewBtn(string nName, int locX, int locY)
private void NewPic(string nName, int locX, int locY, int SizX, int SizY, Image Img) 
```

现在，我不想以每种形式复制它们，而是想将它们写在其他文件中，并且仍然能够以我添加的任何新形式调用它们。建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T11:55:41.407

好吧，其他人都对此有所尝试，我也不妨。我认为已经提出了这个答案，但可能解释得不够清楚。

在 Visual C# 中为您的项目添加一个新类，您将使用 Project -> add Class

给你的班级起个名字，然后点击添加

通常我把这个类命名为工具

然后在 Tools.cs 文件中

已编辑：我正在查看您的其他一些问题，我想我找到了您尝试实施的实际方法。正如有人在该线程中评论的那样，您确实需要使用更好的名称，我已经对该方法进行了更改，以希望模拟您的目标。对于任何试图理解这一点的人，请参阅[C# graphics,paint,picturebox centering](https://stackoverflow.com/questions/10460124/c-sharp-graphics-paint-picturebox-centering)

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace MyNameSpace //Make sure this matches your projects namespace
{
    class Tools
    {
        //Because this is outside the form that is calling it, you cannot access
        //the actual form or panel where you wish to place the button(PictureBox)
        //so instead of returning void (which is nothing) we return the newly
        //created Button(PictureBox)

        public static PictureBox NewBtn(string nName, int locX, int locY)
        {
            Font btnFont = new Font("Tahoma", 16);
            PictureBox S = new PictureBox();
            //You need to specify a size for your pictureBox
            S.Width=100;
            S.Height=100;

            S.Location = new System.Drawing.Point(locX, locY);
            S.Paint += new PaintEventHandler((sender, e) =>
            {
                var size = g.MeasureString(Name, btnFont);
                e.Graphics.DrawString(Name, btnFont, Brushes.Black,
                  (S.Width - size.Width) / 2,
                  (S.Height - size.Height) / 2));
            }
            return S;
         }
    }
} 
```

现在以您的一种形式

```
Panel1.Controls.Add(Tools.NewBtn("btn1",200,200)); 
```

或 PictureBox myButton=Tools.NewBtn("btn1",200,200);

无论如何我都没有编译或测试它，可能有错字，如果有明显的地方请告诉我，以便我可以编辑错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T12:41:03.023

一种方法是继承基本形式：

```
 public partial class BaseForm: Form
    {
private void NewBtn(string nName, int locX, int locY)
{
//Your Action
}
private void NewPic(string nName, int locX, int locY, int SizX, int SizY, Image Img)
{
//Your Action
}
}

public partial class SecondForm: BaseForm
    {
public SecondForm()
        {
NewPic(Parameters);
}
} 
```

第二种方法是创建一个包含函数的静态类：

```
 public static class FunctionClass
        {
    private void NewBtn(string nName, int locX, int locY)
    {
    //Your Action
    }
    private void NewPic(string nName, int locX, int locY, int SizX, int SizY, Image Img)
    {
    //Your Action
    }
    }

public partial class SecondForm: Form
        {
    public SecondForm()
            {
   FunctionClass.NewBtn(Arguments);
    }
    } 
```

您选择哪一种取决于您要实现的方法。如果您想更改表单（创建按钮等），我会选择继承。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T11:04:25.760

你可以让它们[扩展方法](http://msdn.microsoft.com/en-us/library/bb383977.aspx)，

```
static class FormExtensions {
    public static void NewBtn(this Form form, string nName, int locX, int locY) { ... }
} 
```

所以它们可以从任何地方调用，`Form`就好像它们是在表单本身中声明的一样。

或者，您可以将它们添加到辅助类（例如`FormHelpers`）中并为 -- 添加一个参数，`Form`即

```
public void NewBtn(Form form, string nName, int locX, int locY) { ... } 
```

然后通过`FormHelpers.NewBtn(this, ...)`.

但是，我实际上是在质疑这些功能的使用......它们实际上是做什么的？我想，创造新`Button`的 s 和`PictureBox`es，但目的是什么？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T11:04:58.797

您可以做的是重构它们并将它们放入某种实用程序类中。由于您会将这些组件添加到其他控件，因此您可以将它们的签名重构为：

```
public FormUtilClass
private void NewBtn(string nName, int locX, int locY, Control parentControl) 
```

一旦你这样做了，从你的 Form 类，你这样做：

```
public class MyForm : Form
...
FormUtilClass formUtil  = new FormUtilClass();
formUtil.NewBtwn("someName", 0, 0, this); 
```

假设`NewBtn`将创建一个新按钮。

另一方面，您还可以创建一个扩展 a`Form`并包含以下方法的类：

```
public class MyForm : Form
private void NewBtn(string nName, int locX, int locY)
{
     Button btn = new Button();
     ...
     this.Controls.Add(btn);
} 
```

然后，当您创建自己的表单时，您只需从后一个类扩展：

```
public class MyNewForm : MyForm
{
    this.NewButton("someName", 0, 0);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-06T11:46:09.057

我认为创建一个派生自 Form 的超类会更好，这样您就可以从中派生所有其他形式。虽然它可能有点棘手，但它是一个更好的架构解决方案：

*   创建一个新类，比方说`public class CommonForm : Form`。不要使用`Add new form`，而是`Add new class`为了使其成为纯 .cs 文件

*   在该类中实现您的常用方法

*   创建新表单时，转到源代码并手动添加`: CommonForm`以从这个新类派生它们

# iphone - 如何制作显示下拉菜单的按钮？

> ID：10470004
> 
> 赞同：2
> 
> 时间：2012-05-06T11:00:22.580
> 
> 标签：iphone, ios, xcode, menu, drop-down-menu

我是`iPhone`开发新手，`xcode 3.2.6`我想知道如何在导航栏中创建一个按钮，该按钮将显示一个下拉列表，其中包含一个我将编程执行的列表。怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T11:11:44.727

首先，您需要一个`UINavigationController`，它将为您提供`UINavigationbar`. 在您的`.m`文件中，您可以设置一个按钮。

```
self.navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemCancel target:self action:@selector(dropDown:)]; 
```

然后你添加一个方法来处理触摸。

```
- (void) dropDown: (id) sender; 
```

# 编辑

[KSPopoverView](https://github.com/katokichisoft/KSPopoverView) [TSPopover](https://github.com/takashisite/TSPopover)是一些开源的 Popover。

# ruby-on-rails - How to retrieve serialized data?

> ID：10470013
> 
> 赞同：3
> 
> 时间：2012-05-06T11:01:34.833
> 
> 标签：ruby-on-rails, serialization

In a Rails 3.2 app I have a Model with a text column `:data`. In the model I have:

```
class Model
  serialize :data, Hash
end 
```

This is storing data correctly, in the format `data:{"attr1"=>"foo", "attr2"=>"bar"....}`.

If I want to display this in a show view I can do `<%= @model.data %>`, and the entire hash is rendered.

But what if I only need to render a specific attribute? Is this possible?

I've tried several approaches that seemed like they might work:

`<%= @model.data.attr1 %>` - generates `undefined method 'attr1'` `<%- @model.data[:attr1] %>` - displays nothing

Am I missing something? . Thanks for any pointers

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-06T11:18:05.350

```
<%- @model.data[:attr1] %> 
```

Replace with:

```
<%= @model.data["attr1"] %> 
```

NOTE: `<%=` at the beginning. You've used `<%-` mistakenly.

**UPD:**

I recommend to use the `HashWithIndifferentAccess`:

```
serialize :data, HashWithIndifferentAccess 
```

This way you can fetch your values via symbols or strings as the key.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T11:15:00.147

Did you try the string format of Hash key?

```
 @model.data['attr1'] 
```

# php - 处理完表单后，我怎样才能返回到Index.php？

> ID：10470020
> 
> 赞同：0
> 
> 时间：2012-05-06T11:03:39.113
> 
> 标签：php, forms

我正在尝试使用 php 制作留言板，但是当发布新消息时，页面会转到 add.php 而不是停留在 index.php。

我将来自用户的消息存储在一个文本文件中。当有新消息时，我会附加文件。我的目录中有 4 个文件`www`- index.php、show.php、add.php 和 comments.txt。

我的 index.php 看起来像这样：

```
<html>
<head>
<title>messages</title>
</head>
<body>
<h1>Messages</h1>
<div id="comments">
<?php include("show.php"); ?>
<?php include("add.php"); ?>
</div>
</body>
</html> 
```

我的 add.php 看起来像这样：

```
<?php
if (isset($_POST['cmt'])) {
 $cmt = $_POST['cmt'];
 $fh = fopen("comments.txt", 'a');
 fwrite($fh, "B_E_G_I_N\n");
 fwrite($fh, "$cmt\n");
 fwrite($fh, "E_N_D\n");
 fclose($fh);
}
?>
<form action="add.php" method="POST">
<input type="text" name="cmt">
<input type="submit" value="ok"/>
</form> 
```

我知道我的实现真的很糟糕，但我真的想先让它发挥作用。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T11:07:16.057

添加

`header('Location:index.php');`

在结束时`add.php`。

也是`add.php`因为表单动作是这样说的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T11:08:22.133

在主脚本处理后（即`fclose($fh);`）将重定向到“index.php”，如`header('Location: http://www.example.com/');`

# java - 从 Java 中的 HashMap 中检索对象？

> ID：10470023
> 
> 赞同：0
> 
> 时间：2012-05-06T11:04:08.927
> 
> 标签：java

我有一个 HashMap，它将 studentIds 作为键，将学生对象作为值，

```
HashMap<Integer, Student> hashMap = hashTables.buildHash(students);

public static HashMap<Integer, Student> buildHash(Student[] students) {
            HashMap<Integer, Student> hashMap = new HashMap<Integer, Student>();
            for (Student s : students) hashMap.put(s.getId(), s);
            return hashMap;
       } 
```

下面的代码获取每个 KeyValue 对，并且 s.getValue() 返回一个由 id 和字符串名称组成的学生对象，我如何检索/打印这些值（student.int、student.name）；

```
for(Map.Entry s : hashMap.entrySet())
    System.out.print(s.getKey()+" "+s.getValue()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T11:05:53.663

您只需为条目使用参数化类型：

```
for(Map.Entry<Integer, Student> s : hashMap.entrySet())
    System.out.print(s.getKey()+" "+s.getValue().getId()+" "+s.getValue().getName()); 
```

（请注意，一个类不可能有一个名为“int”的字段，因为这是一个语言关键字）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T11:06:05.680

只需`toString`在 Student 中实现，您发布的代码将按原样工作：

```
public class Student {
    ...
    public String toString() {
      return "ID = " + this.id + ", name = " + this.name;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T11:58:49.590

你可以通过..

```
for(Map.Entry<Integer, Student> s : hashMap.entrySet()){
    System.out.print(Long.valueof(s.getKey())+""+String.valueof(s.getValue().getName()));
} 
```

# java - 从 Servlet 传递到 JSP 时不显示图像

> ID：10470025
> 
> 赞同：0
> 
> 时间：2012-05-06T11:04:15.393
> 
> 标签：java, javascript, jsp, servlets

这是我的jsp代码：

```
<%@ page language="java" %>
<% String name = (String)request.getAttribute("name1"); %>
<html>
<head>
</head>
<body>
<%=name%>
<img src=<%=name%>></img>

</body>
</html> 
```

当我通过在我的 servlet 中编写以下代码来访问 jsp 页面时：

```
request.getRequestDispatcher("test.jsp").forward(request, response); 
```

我看到图像的路径已正确显示

```
<%=name> 
```

在正文部分，但以下 < img > 不会被执行，并且即使图像存在于显示的路径中，图像也不会显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T11:06:47.157

我认为这是 HTML 标记的内部`<`和内部的问题。`>`你试过[JSP El](http://docs.oracle.com/javaee/6/tutorial/doc/bnahq.html)吗？

```
<img src="${name}"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T11:34:00.327

`<img src=<%=name%>>`缺少引号`<img src="<%=name%>">`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T11:22:09.653

我认为可能存在一些路径问题。试试这个。

```
<img src="<%=request.getContextPath()%>/images/<%=name%>"/> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T11:31:06.007

将 scriptlet 元素放在双引号（“”）中。

```
<img src="<%=name%>"></img> 
```

# javascript - 客户端文本文件验证和上传

> ID：10470027
> 
> 赞同：3
> 
> 时间：2012-05-06T11:04:40.033
> 
> 标签：javascript, html, file-upload, fileapi

我正在尝试将文件上传到浏览器并使用 JavaScript 访问它。这可能吗？我环顾四周，似乎您可以使用 Flash 完成此操作。我试图查看是否有 HTML5/纯 JavaScript 解决方案。

我正在尝试上传一个 CSV 文件（每一行都包含一个可能的数据库条目）并使用 javascript 即时验证它。如果它通过验证，那么我将向服务器发送一个 POST 以创建项目。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-06T11:07:46.923

这个有可能。[MDN 对此提供了详细的解释](https://developer.mozilla.org/en/Using_files_from_web_applications)。

以下是使用[`FileReader`](https://developer.mozilla.org/en/DOM/FileReader)API 读取文本文件的基本方法：http: **[//jsfiddle.net/tGpDG/](http://jsfiddle.net/tGpDG/)**

```
<input type="file" id="file_upload">
<script>
var input_file = document.getElementById('file_upload');
input_file.onchange = function() {
    var file = this.files[0];
    // Do something with the FileReader object
    var reader = new FileReader();  
    reader.onload = function(ev) {
        // Show content  (ev.target === reader)
        alert(ev.target.result);
    };
    // Read as plain text
    reader.readAsText(file);  
};
</script> 
```

# mysql - 我希望使用 MySql 优化此查询

> ID：10470028
> 
> 赞同：0
> 
> 时间：2012-05-06T11:04:40.547
> 
> 标签：mysql, optimization, query-optimization, subquery, full-text-search

我在用户表中有大量记录，我想以优化的方式显示此记录。我做了一个查询，但是它们花费了很多执行时间（请参阅查询），而且我已经管理了两个表中的索引，但严重没有成功（请参阅说明）。

我希望每个用户发布计数，为什么我这样查询：

```
SELECT 
(SELECT COUNT(up.`user_id`) FROM `users_post` up WHERE up.`user_id` = uf.`user_id`
) AS user_count 
FROM `users` uf; 
```

> 展开 ![在此处输入图像描述](../Images/7308e767048da54255171974a7bb822f.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T11:30:36.493

看起来您所做的只是为所有用户选择每个用户的帖子数。您不需要将查询包装到要查询的结果集中，您应该可以通过

```
SELECT user_id, count(*) as totalPosts
   from user_posts
   group by user_id 
```

现在，如果您想要附加用户信息来标记它，那么您可以加入 users 表，例如：

```
SELECT users.LastName, users.FirstName, etc, user_id, count(*) as totalPosts
   from user_posts
           join users
              on user_posts.user_id = users.user_id
   group by user_id 
```

此外，正如 zerkms 所指出的，如果这是您始终希望作为某种运行总体总数的东西，我强烈建议您更新您的用户表以将“totalPosts”列作为整数。然后，每当向 user_posts 表添加新条目时，它都会触发...

更新用户设置 totalPosts = totalPosts +1 其中 user_id = 发布帖子的用户 ID

然后，您不必继续重新查询总体总数。就像 S/O 上的一些总数一样，用户还有其他总分、总 awrd 等统计数据。对于随后的标签，我相信他们也可以计算每个标签有多少问题。不要在将成为未来性能杀手的事情上过度使用 COUNT()。

# iphone - CLLocationmanager：节省电池

> ID：10470036
> 
> 赞同：5
> 
> 时间：2012-05-06T11:05:26.657
> 
> 标签：iphone, ios, cocoa-touch

我的新“进行中的应用程序”出于多种目的使用 CLLocationManager 的实例。为了使应用程序尽可能对电池友好，定位服务应仅在需要时激活，并在数据刷新完成后立即停用。出于我的目的，在 10 秒内仅获取一次位置数据就足够了。（尚未确定确切的间隔长度）。

我的问题是，“关闭定位服务”最省电的方法是什么？仅使用“stopUpdatingLocation”方法并将 CLLocationManager 自己保留在内存中是否足够，或者我是否需要释放整个实例，并在下次刷新之前分配一个新实例？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-06T11:25:55.337

我同意与and`stopUpdatingLocation`相结合的其他答案是要走的路。请注意，当所需的精度在公里范围内时，位置管理器甚至可能不必启动 GPS。`distanceFilter``desiredAccuracy`

同样，根据您的用途，查看区域监控和重要的位置更新，因为它们对电池更友好。

相关：[位置感知编程指南 - 节省电池电量的提示](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html#//apple_ref/doc/uid/TP40009497-CH2-SW10)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T11:07:41.967

是的。打电话`stopUpdatingLocation`就够了。

更好的方法是为`distanceFilter`和设置好的值`desiredAccuracy`。10 秒不足以预热 GPS。

[CLLocationManager](https://developer.apple.com/library/mac/#documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T11:09:14.507

设置得当`distanceFilter`，`desiredAccuracy`可能是对电池寿命影响最大的两个因素。

### 然而

要真正知道什么是最省电的，您应该使用 Instruments 并测量设备上的电池消耗。为此有一个内置工具。

# mysql - AWS 实例上的 Mysql 启动失败

> ID：10470037
> 
> 赞同：0
> 
> 时间：2012-05-06T11:05:26.970
> 
> 标签：mysql, amazon-web-services

全部

我无法在 aws.ec2.instance 上启动 mysqld，请帮帮我？

我不知道为什么？

```
$ sudo yum install -y mysql mysql-server
$ sudo mysql_install_db
$ sudo service mysqld start
MySQL Daemon failed to start.
Starting mysqld:                                           [FAILED] 
```

打击是一些文件来显示我的环境..

/etc/my.cnf

```
[mysqld]
# Settings user and group are ignored when systemd is used.
# If you need to run mysqld under different user or group, 
# customize your systemd unit file for mysqld according to the
# instructions in http://fedoraproject.org/wiki/Systemd
datadir=/var/lib/mysql
socket=/var/lib/mysql/mysql.sock
# Disabling symbolic-links is recommended to prevent assorted security risks
symbolic-links=0

[mysqld_safe]
log-error=/var/log/mysqld.log
pid-file=/var/run/mysqld/mysqld.pid 
```

我的日志（/var/log/mysql.log）

```
120506 10:53:44 mysqld_safe Starting mysqld daemon with databases from /var/lib/mysql
120506 10:53:44 [Note] Plugin 'FEDERATED' is disabled.
/usr/libexec/mysqld: Can't find file: './mysql/plugin.frm' (errno: 13)
120506 10:53:44 [ERROR] Can't open the mysql.plugin table. Please run mysql_upgrade to create it.
120506 10:53:44 InnoDB: The InnoDB memory heap is disabled
120506 10:53:44 InnoDB: Mutexes and rw_locks use GCC atomic builtins
120506 10:53:44 InnoDB: Compressed tables use zlib 1.2.3
120506 10:53:44 InnoDB: Using Linux native AIO
120506 10:53:44 InnoDB: Initializing buffer pool, size = 128.0M
120506 10:53:44 InnoDB: Completed initialization of buffer pool
120506 10:53:44 InnoDB: highest supported file format is Barracuda.
InnoDB: Log scan progressed past the checkpoint lsn 48941
120506 10:53:44  InnoDB: Database was not shut down normally!
InnoDB: Starting crash recovery.
InnoDB: Reading tablespace information from the .ibd files...
InnoDB: Restoring possible half-written data pages from the doublewrite
InnoDB: buffer...
InnoDB: Doing recovery: scanned up to log sequence number 1595675
120506 10:53:44  InnoDB: Starting an apply batch of log records to the database...
InnoDB: Progress in percents: 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 
InnoDB: Apply batch completed
120506 10:53:44  InnoDB: Waiting for the background threads to start
120506 10:53:45 InnoDB: 1.1.8 started; log sequence number 1595675
120506 10:53:45 [ERROR] /usr/libexec/mysqld: Can't find file: './mysql/host.frm' (errno: 13)
120506 10:53:45 [ERROR] Fatal error: Can't open and lock privilege tables: Can't find file: './mysql/host.frm' (errno: 13)
120506 10:53:45 mysqld_safe mysqld from pid file /var/run/mysqld/mysqld.pid ended 
```

如果需要任何其他信息，请告诉我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T14:06:45.407

尝试查找文件 host.frm 并检查其所属的组和用户。“错误号：13”是指：

```
~$ perror 13
OS error code  13:  Permission denied 
```

所以大概就是这样。如果您没有该文件（即 mysql 中的表），则必须使用以下命令重新生成它们：

```
~$ mysql_install_db 
```

干杯，

马齐。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-24T13:41:21.460

我在多个 AWS 服务器上多次看到这个问题，在我的案例中，主要原因是空间不足。

因此，只需释放服务器上的一些空间并重新启动您的 mysqld，它应该开始正常工作。

# quartz-scheduler - 1.8.3 Quartz 调度程序在 IBM websphere 6.1.0.41 中无法正常工作

> ID：10470047
> 
> 赞同：-1
> 
> 时间：2012-05-06T11:06:39.247
> 
> 标签：quartz-scheduler, websphere-6.1

Quartz Scheduler-1.8.3 在我的应用程序中似乎无法正常工作。这是在升级 websphere 修复包后发生的。请解释为什么会发生这种情况以及如何解决这个问题。

```
[org.springframework.scheduling.quartz.SchedulerFactoryBean#0_Worker-3] [DEBUG] [SimpleThreadPool$WorkerThread:595] - WorkerThread is shut down.
 [org.springframework.scheduling.quartz.SchedulerFactoryBean#0_Worker-7] [DEBUG] [SimpleThreadPool$WorkerThread:595] - WorkerThread is shut down.
 [org.springframework.scheduling.quartz.SchedulerFactoryBean#0_Worker-2] [DEBUG] [SimpleThreadPool$WorkerThread:595] - WorkerThread is shut down.
[org.springframework.scheduling.quartz.SchedulerFactoryBean#0_Worker-4] [DEBUG] [SimpleThreadPool$WorkerThread:595] - WorkerThread is shut down.
[org.springframework.scheduling.quartz.SchedulerFactoryBean#0_Worker-5] [DEBUG] [SimpleThreadPool$WorkerThread:595] - WorkerThread is shut down.
[org.springframework.scheduling.quartz.SchedulerFactoryBean#0_Worker-6] [DEBUG] [SimpleThreadPool$WorkerThread:595] - WorkerThread is shut down.
[org.springframework.scheduling.quartz.SchedulerFactoryBean#0_Worker-8] [DEBUG] [SimpleThreadPool$WorkerThread:595] - WorkerThread is shut down.
 [org.springframework.scheduling.quartz.SchedulerFactoryBean#0_Worker-1] [DEBUG] [SimpleThreadPool$WorkerThread:595] - WorkerThread is shut down.
 [org.springframework.scheduling.quartz.SchedulerFactoryBean#0_Worker-9] [DEBUG] [SimpleThreadPool$WorkerThread:595] - WorkerThread is shut down.
 [org.springframework.scheduling.quartz.SchedulerFactoryBean#0_Worker-10] [DEBUG] [SimpleThreadPool$WorkerThread:595] - WorkerThread is shut down.
    [Timer-114] [DEBUG] [UpdateChecker:56] - Checking for available updated version of Quartz...
[Timer-114] [DEBUG] [UpdateChecker:51] - Quartz version update check failed: java.net.UnknownHostException: www.terracotta.org 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T13:24:32.250

根据您日志的最后两行，Quartz 正在尝试检查更新。在您的quartz.properties 中，您应该设置：org.quartz.scheduler.skipUpdateCheck: true

# delphi - 拦截 TAB 键并抑制它

> ID：10470053
> 
> 赞同：13
> 
> 时间：2012-05-06T11:07:33.667
> 
> 标签：delphi, keyboard, delphi-7

我需要拦截 TEdits 上的 TAB 键盘敲击并以编程方式抑制它们。在某些情况下，我不希望焦点更改为下一个控件。

我尝试使用 KeyPreview=true 在 TEdit 级别和 TForm 上处理 KeyPress、KeyDown。我偷看了以下建议：

*   [在 RichEdit 中截取 TAB 键](https://stackoverflow.com/questions/7104006/intercept-tab-key-in-richedit)
*   [如何使 TAB 键关闭 TComboBox 而不会丢失当前位置？](https://stackoverflow.com/questions/989384/how-do-i-make-the-tab-key-close-a-tcombobox-without-losing-the-current-position)

但它没有用。事件被触发，比方说，Enter 键但不是 TAB 键。

我正在使用 Delphi 7。感谢您的帮助。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-06T11:18:47.003

如果要拦截 TAB 键行为，则应捕获该`CM_DIALOGKEY`消息。在此示例中，如果您将`YouWantToInterceptTab`布尔值设置为 True，则`TAB`密钥将被吃掉：

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls;

type
  TForm1 = class(TForm)
  private
    YouWantToInterceptTab: Boolean;
    procedure CMDialogKey(var AMessage: TCMDialogKey); message CM_DIALOGKEY;
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

procedure TForm1.CMDialogKey(var AMessage: TCMDialogKey);
begin
  if AMessage.CharCode = VK_TAB then
  begin
    ShowMessage('TAB key has been pressed in ' + ActiveControl.Name);

    if YouWantToInterceptTab then
    begin
      ShowMessage('TAB key will be eaten');
      AMessage.Result := 1;
    end
    else
      inherited;        
  end
  else
    inherited;
end;

end. 
```

# json - 用python代码写curl

> ID：10470060
> 
> 赞同：0
> 
> 时间：2012-05-06T11:08:18.247
> 
> 标签：json, post, python-2.7

> **可能重复：**
> [Python 中的 CURL 替代方案](https://stackoverflow.com/questions/2667509/curl-alternative-in-python)

我正在尝试编写一个返回 JSON 响应的 python 片段。使用 curl 它可以工作，看起来像这样：

```
curl -H 'content-type: application/json' \
     -d '' http://example.com/postservice.get_notes 
```

我如何在 python 中编写代码来像 curl 命令一样返回 JSON 对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T11:21:27.697

要**完全模仿**这一点，您需要[pycurl](http://pycurl.sourceforge.net/)。

```
import pycurl
import StringIO 

buf = StringIO.StringIO()

c = pycurl.Curl()
c.setopt(c.URL, 'http://example.com/postservice.get_notes')
c.setopt(c.WRITEFUNCTION, buf.write)
c.setopt(c.HTTPHEADER, ['Accept-Charset: UTF-8'])
c.setopt(c.POSTFIELDS, '')
c.perform()

json = buf.getvalue()
buf.close() 
```

**注意**这里`content-type: application/json`不是一个有效的请求头。所以不需要。

# mysql - mysql过程创建表作为选择（调用（abc（xy）））

> ID：10470065
> 
> 赞同：0
> 
> 时间：2012-05-06T11:08:47.390
> 
> 标签：mysql, call

我想在mysql过程中创建表，比如

```
DROP TABLE IF EXISTS a;
CREATE TABLE a AS SELECT * FROM (CALL(abcdef(abc))); 
```

有什么想法我该怎么做，或者在 mysql 中是不可能的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T10:29:25.140

您不能在问题中使用语法，因为存储过程不返回任何内容（即使它可以更改其某些参数的值，如果配置为`OUT`or `INOUT`）。

我建议如下：

*   修改过程以将行存储在临时表中：

    ```
    CREATE TEMPORARY TABLE temp_table(...);
    INSERT INTO temp_table VALUES(...); // do that for all the data 
    ```

*   过程调用后，要么直接使用表`temp_table`（`SELECT ... FROM temp_table`），要么执行以下查询：

    ```
    CREATE TABLE a AS SELECT * FROM temp_table; 
    ```

*   当您不再需要它时，您可以删除临时表。否则会在 MySQL 连接关闭时自动丢弃。

# android - 向上操作后的返回键行为

> ID：10470066
> 
> 赞同：1
> 
> 时间：2012-05-06T11:08:55.677
> 
> 标签：android

这里[http://developer.android.com/design/patterns/navigation.html](http://developer.android.com/design/patterns/navigation.html)是一些关于**后退**和**向上**导航的提示。很清楚**up**在[这个例子](http://developer.android.com/design/media/navigation_between_siblings_market1.png)中做了什么，它关闭了这些活动。

但是[这里](http://developer.android.com/design/media/navigation_between_siblings_market2.png)发生了什么？我去市场，打开书，然后另一本书，然后打开电影，然后我决定按**下去**电影类别。
图书活动发生了什么？
我能以某种方式去找他们吗？
当我点击返回按钮时，我去哪里市场？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T06:21:42.067

UP 按钮将在 App 内导航。UP 按钮确保用户留在 App 内。应用程序的最顶部屏幕不应显示 UP 按钮。

但是，系统 BACK 按钮可以将用户返回到主屏幕，甚至返回到不同的应用程序，这与 UP 按钮不同。当先前查看的屏幕也是当前屏幕的分层父级时，按 Back 按钮与按 Up 按钮的结果相同

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T12:17:04.173

I don't think there is book activities, I think it is fragments. But about your question. If you read the navigation details it states:

> The system Back button is used to navigate, in reverse chronological order, through the history of screens the user has recently worked with. It is generally based on the temporal relationships between screens, rather than the app's hierarchy.

In other words you should go back to selected movie, from there the selected book and etc. This however needs to be implemented by the developer and often it isn't. Which is why back button might just bring you back to market/play store from the movies top category.

**Edit**: So above was my first thought. Based on experimenting with google apps and looking into the example I change my advice to following:

When you go up to the new root (movie) then the app should close. The reason for this is simply that the user has navigated to a new top hierachy and would probarbly be anoyed by having to go through whole the last navigation. This also means that when the user clicks up in movies whole the back track stack is lost.

# visual-studio - 为 Visual Studio 2010 创建版权宏

> ID：10470074
> 
> 赞同：1
> 
> 时间：2012-05-06T11:10:32.167
> 
> 标签：visual-studio, visual-studio-2010, macros

我最近在宏 IDE 中为 Visual Studio 2010 编写了一个宏，我已经保存了该宏，它位于我解决方案中当前活动的宏项目中。

当要通过将宏添加到我的工具栏时

工具 > 自定义 > 命令（选项卡）> 工具栏 > 标准 > 添加命令 > 宏

只有 Macro.Sample.etc... 存在，没有我的宏。我错过了什么？我进入工具>宏资源管理器并将我当前的项目设置为默认录制项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T21:57:52.823

VS 让这变得非常混乱。您创建的是宏*模块*- 宏的*容器*。但是，如果**模块名称与****文件**名不匹配，它将不会“注册”到系统或被系统看到。您可以创建所有您想要的子程序，但它们不会显示（或“注册”为可用的宏）。

**答：** 检查以确保“Public Module **Blah** ”与文件名匹配（资源管理器中的模块名称）！

您可以通过创建一个新模块，然后从其他地方复制/粘贴代码但没有意识到模块名称不同而被此咬伤。

如果您想确保您的模块将按预期工作，请按照以下步骤操作：

1.  从**Macro Explorer**，右键单击**MyMacros**，然后创建一个**新模块**
2.  现在**右键单击**您的新宏模块，然后选择**新建宏**。
3.  将您的代码放入它生成的子代码中！

构建，保存，检查您的工具栏/添加命令，您将看到您的宏！

你可以重命名潜艇，没关系。这些成为您可用的宏。但不要重命名模块！在创建模块时以您想要的方式获取模块名称。

# regex - 如何将这种颜色名称与 vim 中的 Perl 正则表达式匹配？

> ID：10470080
> 
> 赞同：1
> 
> 时间：2012-05-06T11:11:43.783
> 
> 标签：regex, perl

这是我的 darkerdesert.vim：

```
hi Cursor       guibg=#b3b3df   guifg=grey30    gui=bold
hi VertSplit    guibg=#505050   guifg=grey50    gui=none
hi Folded       guibg=#252525   guifg=gold3
hi FoldColumn   guibg=#252525   guifg=gold3
hi IncSearch    guifg=slategrey dark guibg=ghost white
hi LineNr       guifg=grey30
hi ModeMsg      guifg=goldenrod3
hi MoreMsg      guifg=SeaGreen Dark
hi NonText      guifg=LightBlue guibg=#252525
hi Question     guifg=#28a45c 
```

我需要提取用英文命名的颜色，例如“LightBlue”、“slategrey dark”。我的解决方案如下：

```
while (<DATA>) {
    print $1,"\n" while /(?:[bf]g\=\K(?!\#)(.*)(?=gui))/g;
} 
```

有了这个模式`/[bf]g\=\K(?!\#)(.*)(?=gui)/`，我只能得到之间的项目`gui[bf]g=`。
所以我的问题是：如何匹配所有英文颜色名称？（goldenrod3,SeaGreen....等）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T12:01:45.553

您可以使用 regex 执行此操作`/gui[fb]g=([^#]+?)\s+(?=\w+=|\z)/g`。

下面是一些示例代码来演示它如何处理您自己的数据。

```
use strict;
use warnings;

while (<DATA>) {
  print join ', ', map qq("$_"), /gui[fb]g=([^#]+?)\s+(?=\w+=|\z)/g;
  print "\n";
}

__DATA__
hi Cursor       guibg=#b3b3df   guifg=grey30    gui=bold
hi VertSplit    guibg=#505050   guifg=grey50    gui=none
hi Folded       guibg=#252525   guifg=gold3
hi FoldColumn   guibg=#252525   guifg=gold3
hi IncSearch    guifg=slategrey dark guibg=ghost white
hi LineNr       guifg=grey30
hi ModeMsg      guifg=goldenrod3
hi MoreMsg      guifg=SeaGreen Dark
hi NonText      guifg=LightBlue guibg=#252525
hi Question     guifg=#28a45c 
```

**输出**

```
"grey30"
"grey50"
"gold3"
"gold3"
"slategrey dark", "ghost white"
"grey30"
"goldenrod3"
"SeaGreen Dark"
"LightBlue" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T12:18:32.357

A more obvious, but not necessary better solution:

```
use strict;

my @c;  # colors
my @m;  # matches

while ( <DATA> ) {
  @m = /guifg=([\w ]+?) *($|gui)/;  # trying to extract the FG color, if exists
  push(@c, $m[0]) if $m[0];
  @m = /guibg=([\w ]+?) *($|gui)/;  # trying to extract the BG color, if exists
  push(@c, $m[0]) if $m[0];
}

map { print $_, "\n", } @c;  # all color names are in @c, do whatever you want with them 
```

# shell - shell script - 如何使用 gksudo 执行连续的 sudo 操作，只有一个密码提示？

> ID：10470084
> 
> 赞同：3
> 
> 时间：2012-05-06T11:12:41.913
> 
> 标签：shell, sudo, gksudo

我想使用 sudo 临时挂载两个单独的网络驱动器，因为我的 NAS 设备并不总是在线，所以我不相信向 /etc/fstab 添加任何东西是必要的。

以下代码能够实现这一点，但是我不打算从终端运行脚本，因此 sudo 密码提示是我的问题：

```
#!/bin/sh

sudo mount -t cifs //10.1.1.9/Volume_1 /media/DNS323-A -ousername=user,password=pass,iocharset=utf8
sudo mount -t cifs //10.1.1.9/Volume_2 /media/DNS323-B -ousername=user,password=pass,iocharset=utf8 
```

我需要选择“在终端中运行”才能从文件浏览器窗口成功运行该脚本。因此我更喜欢使用 gksudo，它会打开一个提示窗口让我输入 sudo 密码。

但是，如果我改用下面的代码，我必须输入两次 sudo 密码！

```
gksudo "mount -t cifs //10.1.1.9/Volume_1 /media/DNS323-A -ousername=user,password=pass,iocharset=utf8"
gksudo "mount -t cifs //10.1.1.9/Volume_2 /media/DNS323-B -ousername=user,password=pass,iocharset=utf8" 
```

在这一点上，我尝试变得聪明并使用 gksudo 选项“以 sudo 身份运行”，如下所示，但是只有第一个驱动器像上面的第一个脚本一样安装，如果不从终端运行，则会静默失败：

```
gksudo -S "mount -t cifs //10.1.1.9/Volume_1 /media/DNS323-A -ousername=user,password=pass,iocharset=utf8"
sudo "mount -t cifs //10.1.1.9/Volume_2 /media/DNS323-B -ousername=user,password=pass,iocharset=utf8" 
```

我真正想做的是以下，但我不确定是否有可能：

```
gksudo this{
command1
command2
command3
} 
```

是我一个人还是 gksudo 记性不好？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T11:41:49.830

这是一个脚本，所以最好的方法是不要在脚本中包含`sudo`/命令，而是使用.`gksudo``sudo`

我不认为自己`gksudo`有任何记忆，这一切都是`sudo`在后台使用的。

另一种可能性是使用：

```
gksudo "sh -c 'command1; command2; ...'" 
```

但这不是很优雅。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-27T01:48:51.343

我经常使用它来确保用户以“root”身份运行我的脚本——从内存中回忆，所以我可能有一些事情可以扭转。

```
#!/usr/bin/env

main() {
    # Code to be executed
}

if [[ "$0" == "${BASH_SOURCE[0]}" ]]; then
    [[ $EUID != 0 ]] && exec sudo "$0" $*
    main $*
fi 
```

# javascript - Sencha Touch 2 打包时出现依赖错误

> ID：10470085
> 
> 赞同：2
> 
> 时间：2012-05-06T11:12:43.053
> 
> 标签：javascript, sencha-touch, extjs, sencha-touch-2

我正在尝试为 iOS 打包我的新应用程序，但在解决应用程序依赖项时出现错误。

```
$ sencha app build native
[INFO] Deploying your application to /Applications/XAMPP/xamppfiles/htdocs/appcode/build/package
[INFO] Copied sdk/sencha-touch.js
[INFO] Copied app.js
[INFO] Copied resources/css/app.css
[INFO] Copied resources/images
[INFO] Resolving your application dependencies...
[ERROR] 
```

它没有指定错误发生的位置（那会很好！）。我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T16:54:02.363

您是否`"platform":"iOS",`在 Package.json 文件中进行了更改？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-10T07:40:04.470

我发现这是 OSX Lion 上 Sencha 的打包程序中的一个错误。在 Snow Leopard 和 Windows 7 中完美运行。

# mysql - MySQL 通过正则表达式选择行

> ID：10470088
> 
> 赞同：0
> 
> 时间：2012-05-06T11:13:02.887
> 
> 标签：mysql, sql

我试图弄清楚如何通过 WHERE 子句从表中选择一行，该子句是包含这个或 >= 这个？

让我从一开始就解释一下，我的网站上有一个日志记录系统，它将 php`$_SERVER, $_REQUEST`作为 JSON 保存到表中的字段中

所以我的表格布局是

```
______________________________________________
|__LogId__|___server_obj___|___request_obj___| 
```

现在我正在尝试通过 startDate 进行请求，所以在 server_obj 内部所以一个例子 `"REQUEST_TIME":1333907388`是在 server_obj

字段我将如何查询> 某个数字？

如果这是唯一的方法，我不害怕使用 StoredProcs，但我仍然不确定我会怎么做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T11:22:23.780

```
SELECT *
FROM tblname
WHERE SUBSTRING(request_obj FROM 16) >= UNIX_TIMESTAMP() 
```

这是幻数`16`来自前缀长度的地方`"REQUEST_TIME":`

# google-apps-script - Google Apps 脚本 .getvalues 有问题？

> ID：10470089
> 
> 赞同：1
> 
> 时间：2012-05-06T11:13:07.253
> 
> 标签：google-apps-script

当我运行我的脚本时，我收到以下错误消息：

**语法错误：TypeError：无法从未定义中读取属性“1”。线： ？**

这是我的脚本的一个片段：

```
var posConts = new Array();
var posContsData = SpreadsheetApp.openById(dataSheetValuesID).getSheets()[0].getRange('A:A');
var posContsDataValues = posContsData.getValues();

for (ii = 1; ii <= posContsData.getNumRows(); ii++) {
    iii = ii-1;
    posConts[iii] = posContsDataValues[ii][1];
} 
```

我以前使用 values[0][0] 格式的集合没有问题。

这是一个错误吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T14:36:29.887

你混淆了索引。两个数组都从 0 开始（就像 javascript 中的所有数组一样）。但是您正在使用`ii`which 从 1 开始，从0 开始，`posContsDataValues`基于`iii`. `posConts`您还访问`1`了每一行的索引，这是错误的，因为您只得到一列`A:A`，而且它也是从零开始的。

我不确定您要做什么，但是从您的代码段来看，这是一个“固定”循环。

```
for( var i = 0; i < posContsDataValues.length; ++i )
    posConts.push(posContsDataValues[i][0]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T14:12:36.163

您使用 getValues 获得的数组按行和列索引，因此在您的情况下（数据范围 = 列 A）只有 1 个列索引，并且它由 [0] 引用，因为数组的索引为 0。并且您不应迭代超出数组长度。试试这样：

```
for (ii = 1; ii < posContsDataValues.length; ii++) {
    iii = ii-1;
    posConts[iii] = posContsDataValues[ii][0];
} 
```

最好的问候， 塞尔吉

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T21:54:26.267

尝试`iii=ii-1;`改变`iii=parseInt(ii)-1;`

# .net - 如何将 Azure 联盟与 WWF 持久性表 (SqlWorkflowInstanceStore) 结合使用？

> ID：10470090
> 
> 赞同：1
> 
> 时间：2012-05-06T11:13:08.870
> 
> 标签：.net, service, azure, persistence, federation

我想制作一个 Azure 网站，并在上面使用 WWF。该网站为许多客户提供服务，我决定在 Azure SQL 中使用联合来处理客户数据，但我现在遇到了一个大问题，因为我想使用 WWF 的持久性服务通过 SqlWorkflowInstanceStore 将工作流实例保存在 azure SQL 中这些实例必须通过 CustomerId 来区分才能知道它属于谁。

PS：我每个客户都有很多实例，每个客户都有自己的工作流程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T16:55:00.863

我认为您不能联合 Windows Workflow Foundation 表。这些表采用预定义的模式（更多信息[在这里](http://msdn.microsoft.com/en-us/library/ee395773.aspx)）。即使您要手动将 customerID 列添加到 WWF 表并对其进行联合，您也必须考虑到您仍然需要在对联合表运行任何命令之前发出 USE FEDERATION 语句，并且 SqlWorkflowInstanceStore 类不需要去做。

因此，如果您要使用联合 SQL Azure 数据库，可能唯一的选择是在根数据库中创建 WWF 表。或者，您可以使用单独的 SQL Azure 数据库来实现 WWF 持久性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T09:42:55.083

我对WF不熟悉。但是，我没有看到您希望通过 SQL Azure 联合实现的目标之间存在任何冲突。根据我的理解，您可以在创建表时在 federation on 子句中使用 CustomerId。

最好的祝福，

明旭。

# mysql - 数据库：如何存储未知日期与尚未发生的日期

> ID：10470102
> 
> 赞同：0
> 
> 时间：2012-05-06T11:17:09.250
> 
> 标签：mysql

我在 MySQL 中有一个表，其类型字段`DATE`用于存储一些日期，我还有另一个表，其中我有一个类型字段，`SMALLINT`仅用于存储一年。

现在我需要区分一个完全未知的日期（或一年）和一个尚未发生的日期（或一年）。未知值应该是非常简单的`NULL`。但是，对于使用什么值来存储我提到的类型尚未发生的日期，有什么建议吗？

我很确定不会使用 1000 之前的日期/年份，所以我可以使用例如`0000-01-01`. 有没有更好/推荐的解决方案？

**编辑**只需阅读`DATE`“支持的范围是'1000-01-01'到'9999-12-31'”类型。所以我必须使用`1000-01-01`而不是`0000-01-01`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T12:39:51.043

听起来您正在尝试使用一列来存储两个单独的数据位。某人是死是活（实际上是一个状态字段）以及他们死亡的日期是不同的信息。因此，我建议您将它们分开存放。在不知道其死亡日期的情况下，无论某人是生是死，在任何一种情况下，死亡日期都是 NULL。我不会使用日期字段来确定他们是否已经死亡。因此，我建议使用 TINYINT（或 BOOL）列来存储他们是否还活着，并建议使用 NULL-able DATE 字段来存储他们的死亡日期。

# java - 监听器和适配器有什么区别？

> ID：10470104
> 
> 赞同：22
> 
> 时间：2012-05-06T11:17:25.523
> 
> 标签：java, swing, awt, adapter, listeners

我试图区分侦听器和适配器。

它们是否几乎相同，但在侦听器中您必须实现接口中的所有方法，但使用适配器您可以选择只实现您需要的方法，以便代码更简洁且更易于阅读？

我还被告知适配器仅通过一种实现启用实例化，而您不能实例化侦听器，我不完全理解这一点。

有人可以解释一下哪个更好用，以及你可以用一个做的事情，但你不能用另一个做吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-06T11:20:32.247

[WindowListener](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/event/WindowListener.html)`interface`强制你使用`override`所有方法，而[WindowAdapter](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/event/WindowAdapter.html)是实现，`WindowListener`你只需要`override`你感兴趣的方法来处理。

`WindowListener`是接口，这意味着您不能实例化`WindowListener`，而`WindowAdapter`是可以使用`new`运算符进行实例化的具体类。

当你使用`WindowAdapter`时，代码更干净，你的类只覆盖你想要的方法。例如：

## 窗口监听器

```
public class CloseListener implements WindowListener {
    // im not interest  on this event, but still need to override it
    @Override
    public void windowOpened(WindowEvent e) {

    }
    // im not interest  on this event, but still need to override it    
    @Override
    public void windowClosing(WindowEvent e) {

    }

    @Override
    public void windowClosed(WindowEvent e) {
        System.exit(0);

    }
    // im not interest  on this event, but still need to override it    
    @Override
    public void windowIconified(WindowEvent e) {

    }
    // im not interest  on this event, but still need to override it
    @Override
    public void windowDeiconified(WindowEvent e) {

    }

} 
```

## 窗口适配器

使用适配器时，代码更干净：

```
// at JFrame class
addWindowListener(new CloseListener());

// reusable Close Listener
public class CloseListener extends WindowAdapter {
    @Override
    public void windowClosed(WindowEvent e) {
        System.exit(0);
    }
} 
```

或者

```
addWindowListener(new WindowAdapter() {
    @Override
    public void windowClosed(WindowEvent e) {
         System.exit(0);
     }
}); 
```

所以我会推荐使用`WindowAdapter`，但不是**必须遵循**。但是，两个 API 大致相同，只是为了`WindowAdapter`方便创建侦听器对象而存在。

编辑：

由于`WindowListener`is `interface`，您可以在您的 JFrame 子类中实现它。

```
public class MainWindow extends JFrame implements WindowListener {
    // this is ok
}
public class MainWindow extends JFrame, WindowAdapter {
    // this is not allow
} 
```

但是你不能用`WindowAdapter`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-06T11:21:37.833

你可以用任何一种方法做任何事情，但是如果你从界面开始，你的代码将会有很多样板。我相信您在尝试时注意到了这一点。关于实例化等的陈述是一种非常复杂的说法，并且术语有很多混淆。你可以写

```
c.addWindowListener(new WindowListener() {
  @Override public void windowActivated(WindowEvent arg0) { }
  @Override public void windowClosed(WindowEvent arg0) { System.exit(0); }
  @Override public void windowClosing(WindowEvent arg0) { }
  @Override public void windowDeactivated(WindowEvent arg0) { }
  @Override public void windowDeiconified(WindowEvent arg0) { }
  @Override public void windowIconified(WindowEvent arg0) { }
  @Override public void windowOpened(WindowEvent arg0) { }
}); 
```

或者你可以写

```
c.addWindowListener(new WindowAdapter() {
  @Override public void windowClosed(WindowEvent arg0) { System.exit(0); }
}); 
```

在这两种情况下，您都没有**实例化**，或者——您正在创建实现`WindowListener`/ extend的匿名类。但是当你直接实现接口时，你被迫实现所有方法，而当你扩展适配器类时，你只能重写你需要的。该类已经具有您必须在案例中编写的这些空实现。`WindowAdapter``WindowListener``WindowAdapter``Listener`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T11:38:41.260

有几个适配器类，例如 MouseAdapter、KeyAdapter、WindowAdapter 可以扩展，从而避免编写您实际上不需要的方法。

接口的问题是你必须写出所有你不需要的方法。适配器类可以进一步被子类化，作为覆盖所需方法的一种方式。

[http://www.cafeaulait.org/course/week7/19.html](http://www.cafeaulait.org/course/week7/19.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T15:20:05.913

当您计划使用大多数接口方法时，将使用侦听器。当您只需要使用一些方法时，适配器会更好 b/c 您不必覆盖其余方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-19T09:52:18.257

其他答案中没有解决另一个方面：API 演变。提供适配器类（也就是接口的空实现或默认实现）可以减少在接口中引入新方法的痛苦。如果 API 仅提供接口，则客户端将被迫实现它们，如果向接口添加新方法，则所有实现类都将中断。但是，如果提供了默认实现，那么客户端就有机会扩展那些，除了方便之外，还可以帮助他们升级到更新的 API 版本。使用Java 8 默认/空实现的[默认方法](https://docs.oracle.com/javase/tutorial/java/IandI/defaultmethods.html)变得不那么重要了，但它们在旧版本中可能很方便。

# c# - 从行不为空的 xls 文件中选择

> ID：10470107
> 
> 赞同：2
> 
> 时间：2012-05-06T11:17:49.187
> 
> 标签：c#, excel, oledb

从xls文件中读取数据时，使用oldedb如下没有问题

```
OleDbCommand cmd = new OleDbCommand("SELECT * FROM [" + fileID + "]", oledbConn);
DataSet ds = new DataSet();
OleDbDataAdapter da = new OleDbDataAdapter(cmd);
da.Fill(ds); 
```

但是我想将 select 语句扩展为仅选择某个非空列的行 WHERE ... IS NOT NULL，那是什么...假设是？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T12:26:13.160

如果您`HDR=YES`在连接字符串中使用该选项，则使用子句中的列标题`WHERE`来指定列。如果没有，则使用`F1...FN`指定列。

选择查询`HDR=NO`（和第一列）：

```
SELECT * FROM [" + fileID + "] WHERE [F1] IS NOT NULL 
```

选择查询`HDR=YES`：

```
SELECT * FROM [" + fileID + "] WHERE [YourColumnTitle] IS NOT NULL 
```

# nginx - nginx + php5-fpm 中的错误 502

> ID：10470109
> 
> 赞同：46
> 
> 时间：2012-05-06T11:18:07.660
> 
> 标签：nginx, fastcgi, php

我对主题有一些错误。服务器负载不高：~15% CPU，有几 Gb 内存，硬盘不忙。但是大约 3% 的情况下会抛出错误 502。

程序：Debian 6、nginx/0.7.62、php5-fpm (5.3.3-1)。

在 nginx 的 error.log 中是这个错误：

```
connect() to unix:/var/run/php5-fpm.sock failed 
```

php5-fpm 的状态通常是这样的：

```
accepted conn:   41680
pool:             www
process manager:  dynamic
idle processes:   258
active processes: 1
total processes:  259 
```

我认为，这意味着加载并不高。

我增加了积压参数：在 sysctl - net.core.somaxconn = 5000，在 php-fpm 池 - listen.backlog = 5000。没有效果。

我引用一个配置：

**/etc/nginx/nginx.conf**

```
user www-data;
worker_processes  8;
timer_resolution 100ms;
worker_rlimit_nofile 20240;
worker_priority -5;

error_log  /var/log/nginx/error.log;
pid        /var/run/nginx.pid;

events {
    worker_connections  2048;
    use epoll;
    # multi_accept on;
}

http {
    include       /etc/nginx/mime.types;

    access_log  /var/log/nginx/access.log;

    sendfile        on;
    tcp_nopush     on;

    #keepalive_timeout  0;
    keepalive_timeout  65;
    tcp_nodelay        on;

    gzip  on;
    gzip_min_length 1100;
    gzip_buffers 64 8k;
    gzip_comp_level 3;
    gzip_http_version 1.1;
    gzip_proxied any;
    gzip_types text/plain application/xml application/x-javascript text/css;
    gzip_disable "MSIE [1-6]\.(?!.*SV1)";

    include /etc/nginx/conf.d/*.conf;
    include /etc/nginx/sites-enabled/*;

    client_max_body_size 100M;
    server_tokens off;
} 
```

**/etc/nginx/php_location**

```
fastcgi_pass   unix:/var/run/php5-fpm.sock;
fastcgi_index  index.php;
fastcgi_param  SCRIPT_FILENAME  $document_root/$fastcgi_script_name;
fastcgi_buffers 256 128k;
#fastcgi_buffer_size 16k;
#fastcgi_busy_buffers_size 256k;
fastcgi_connect_timeout 300s;
fastcgi_send_timeout 300s;
fastcgi_read_timeout 300s;
include fastcgi_params; 
```

**php-fpm 池**

```
[www]
listen = /var/run/php5-fpm.sock
listen.backlog = 5000
listen.owner = www-data
listen.group = www-data
listen.mode = 0666
user = www-data
group = www-data
pm = dynamic
pm.max_children = 1024
pm.start_servers = 64
pm.min_spare_servers = 64
pm.max_spare_servers = 128
pm.max_requests = 32000
pm.status_path = /system/php5-fpm-status
slowlog = /var/www/log/php-fpm.log.slow
chdir = /var/www 
```

我可以做些什么来优化这个系统并使它使用所有服务器资源？

PS。对不起，我的英语很差。

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-05-06T13:20:28.117

问题是插座本身，它在高负载情况下的问题是众所周知的。请考虑使用 TCP\IP 连接而不是 unix 套接字，因为您需要进行以下更改：

*   在**php-fpm 池配置**中替换`listen = /var/run/php5-fpm.sock`为`listen = 127.0.0.1:7777`
*   在**/etc/nginx/php_location**替换`fastcgi_pass unix:/var/run/php5-fpm.sock;`为`fastcgi_pass 127.0.0.1:7777;`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-22T01:03:08.473

在 Centos 7、Plesk 12.5 上

在我的硬盘已满且某些服务失败后，我遇到了这个问题。其他域工作得很好，但没有一个域它只给了我 502 和类似的超时。从错误日志：

```
[crit] 3112#0: *65746768 connect() to 
unix:///var/www/vhosts/system/sub.domain.de/php-fpm.sock failed 
(2: No such file or directory) while connecting to upstream 
```

为了解决它，我不得不（首先腾出空间然后）重新启动 php-fpm 和 nginx——然后这个错误就消失了！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-22T06:10:24.390

未创建此文件的唯一原因是 /etc/php-fpm.d/www.conf 中的配置

更改监听 = 127.0.0.1:9000

听 = /var/run/php-fpm/php-fpm.sock

然后重启 nginx 和 php-fpm

* * *

## 回答 #4

> 赞同：-6
> 
> 时间：2014-07-26T04:04:24.650

我同样的问题，但不希望从套接字切换到 TCP/IP。重启 php-fpm 和 nginx 即可解决问题。

```
sudo /etc/init.d/php-fpm restart
sudo /etc/init.d/nginx restart 
```

# iphone - 如何使用 QuartzCore 绘制一段光圈快门

> ID：10470114
> 
> 赞同：2
> 
> 时间：2012-05-06T11:19:24.050
> 
> 标签：iphone, ios, camera, core-image

任何人都知道如何绘制虹膜的一部分，它看起来至少类似于原始的苹果相机快门？

[http://stickertagapp.com/_files/_iris.png](http://stickertagapp.com/_files/_iris.png)

我正在尝试复制此功能：

```
CATransition *animation = [CATransition animation];
[animation setDelegate:self];
[animation setDuration:0.3];
animation.timingFunction = UIViewAnimationCurveEaseInOut;
[animation setType:@"cameraIris"];
[cameraView.layer addAnimation:animation forKey:nil]; 
```

# java - java / rmi / eclipse 不适用于 MalformedURLException

> ID：10470121
> 
> 赞同：0
> 
> 时间：2012-05-06T11:20:51.063
> 
> 标签：java, eclipse, exception, rmi

当我在 Eclipse 中点击“运行”按钮时，我的 RMI 应用程序无法正常工作。它抛出以下异常：

```
java.rmi.UnmarshalException: error unmarshalling return; nested exception is: 
java.net.MalformedURLException: unknown protocol: rsrc
at sun.rmi.registry.RegistryImpl_Stub.lookup(Unknown Source)
at java.rmi.Naming.lookup(Unknown Source)
... 
```

我在互联网上查看，人们在从 Eclipse 生成 JAR 时似乎遇到了这个问题。但是我的（ant-built）jar 工作正常，只是在 Eclipse 内部它没有按应有的方式工作！

# node.js - 将 db.open 与 MongoDB 和 Nodejs 一起使用

> ID：10470123
> 
> 赞同：3
> 
> 时间：2012-05-06T11:21:16.853
> 
> 标签：node.js, mongodb

我有两个问题。

首先，MongoDB 文档经常提到 using `db.open()`and then `db.collection()`，但我注意到即使没有先调用我仍然能够使用 api`db.open().`这样做安全吗？api是内部调用的`db.open()`吗？

[http://mongodb.github.com/node-mongodb-native/api-generated/db.html#collection](http://mongodb.github.com/node-mongodb-native/api-generated/db.html#collection)

其次，`db`对象中是否有指定是否`db.open()`被调用的参数？如果没有，我怎么才能知道是否`db.open()`被调用？

原因是因为我已经构建了几个与 mongo 通信的函数，但是当一些函数相互交互时，我得到了数据库无法多次“打开”的错误。

**编辑**

`db`我在对象中找到了这个参数。看来这是一个布尔值确定使用`db.open()`但我不是 100% 确定，有人知道吗？`db.serverConfig.internalMaster`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T07:37:38.627

如果您需要知道一个 db 对象是否已连接，您可以检查 db._state == 'connected' 或 db.serverConfig.isConnected()。

您可能最好将已知的连接对象实际传递给您的 mvc，确保在启动应用程序之前打开数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T22:07:46.940

> 原因是因为我已经构建了几个与 mongo 通信的函数，但是当一些函数相互交互时，我得到了数据库无法多次“打开”的错误。

您应该重用 db 对象，而不是多次打开它 - 对集合对象也应该这样做，因为创建它们会产生成本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-24T20:10:33.790

我正在使用 javascript 驱动程序，它直接使用 db 对象的“openCalled”布尔属性。引用它很简单

```
if (!db.openCalled) { //open database } 
```

# node.js - node.js 错误 - throw new TypeError('first argument must be a string or Buffer');

> ID：10470133
> 
> 赞同：11
> 
> 时间：2012-05-06T11:22:12.857
> 
> 标签：node.js

我正在尝试在 node.js 中实现一个基本的加法程序，它通过 URL（GET 请求）接受 2 个数字，将它们加在一起，并给出结果。

```
    var http = 要求（“http”）；
    var url1 = 需要("url");

    http.createServer（函数（请求，响应）{
      response.writeHead(200, {"Content-Type": "text/plain"});
      var path = url1.parse(request.url).pathname;

      如果（路径==“/添加”）
      {
        console.log("收到添加请求\n");

        var urlObj = url1.parse(request.url, true);

        var number1 = urlObj.query["var"];
        var number2 = urlObj.query["var2"];
        var num3 = parseInt(number2);
        var num4 = parseInt(number1);

        var tot = num3 + num4;

        response.write(tot);
        response.write(number1 + number2);

      }
      别的
      {
        response.write("无效请求\n");              
      }
      response.end();

    }).听(8889);

      console.log("服务器已启动。");

```

当我运行时，我在控制台中收到“服务器已启动”消息。但是当我请求网址时

```
`http://localhost:8889/addition?var=1&var2=20`
```

我收到以下错误：

**http.js:593 throw new TypeError('第一个参数必须是字符串或缓冲区');**

当我注释掉显示变量“tot”的行时，代码正在运行，我得到的输出是我传递的 2 个 get 参数的连接值。在这种情况下，它恰好是 1+20 = 120。我无法将数据转换为数字格式。

代码中的错误在哪里？错误消息的基本含义是什么？

提前谢谢了。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-06T11:55:30.487

当它们应该是字符串时，您将数字传递给 response.write。像这样：

```
response.write(total + ''); 
```

变量 total 包含数字 21，因为您在求和之前通过 parseInt() 传递了查询参数。通过 response.write 发送时将导致错误，除非您首先通过将空字符串附加到字符串来转换为字符串。number1+number2 可以，因为它们是字符串，但它们的“总和”是“120”。

我建议还研究 node.js 包“express”。它处理了 HTTP 服务器的许多基础知识，因此您可以编写如下：

```
var express=require('express');

var app=express.createServer();

app.get('/add',function(req,res) {
    var num1 = parseInt(req.query.var);
    var num2 = parseInt(req.query.var2);

    var total = num1 + num2;

    res.send(total + '');
});

app.listen(8888); 
```

# shell - 在 shell 脚本中使用字符 |、/、\、- 创建旋转圆

> ID：10470139
> 
> 赞同：6
> 
> 时间：2012-05-06T11:23:11.907
> 
> 标签：shell

我想编写一个执行安装相关任务的 shell 脚本。我想通过打印字符 |、/、\、- 来显示一些图标，例如旋转圆圈。一旦安装完成，这个圆圈就会消失。对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T12:09:30.960

基于 Marc B 的回答，这里有一个简单的演示：

```
spin () {

  chars="| / – \\"

  rotations=3

  delay=0.1

  for i in `seq 0 $rotations`; do

    for char in $chars; do 

      echo -ne $char
      sleep $delay
      echo -ne '\b'

    done

  done

} 
```

将其粘贴到您的终端并输入“旋转”。

* * *

更新：此版本适用于 bash 和 zsh。

```
spin () {

  char=( \| / – \\ )

  charLastIndex=3

  rotations=3

  delay=0.1

  for i in `seq 1 $rotations`; do

    for j in `seq 0 $charLastIndex`; do 

      echo -n ${char[$j]}
      sleep $delay
      echo -ne '\b'

    done

  done

} 
```

* * *

更新：liori 的版本在多个 shell 中工作。

```
spin () {
  rotations=3
  delay=0.1
  for i in `seq 0 $rotations`; do
    for char in '|' '/' '-' '\'; do
      #'# inserted to correct broken syntax highlighting
      echo -n $char
      sleep $delay
      printf "\b"
    done
  done
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T11:26:44.727

```
echo -e 'abc\bd'
            ^^---backspace char 
```

将输出

```
abd 
```

所以基本上你会输出一个动画字符，然后输出一个退格，然后输出下一个字符，等等......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-06T16:14:17.657

公认的解决方案过于复杂。你可以这样做：

```
while sleep 1; do 
  i=$((++i%4 + 2)); 
  printf '\b|/-\' | cut -b 1,$i | tr -d '\n';
done 
```

（请注意，亚秒级睡眠不可移植，seq 也不可移植。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-18T14:28:22.167

这是**POSIX shell 兼容**版本：

```
while true; do for x in '|' '/' '-' '\'; do printf '\b$x'; sleep 1; done; done 
```

请注意，作为副作用，您的值`x`将被覆盖。为了避免这种情况，请将指令包含在函数中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-25T20:32:12.880

由于您没有指定哪个外壳，因此可以使用数组非常优雅地完成[fish shell的一个小插件：](https://fishshell.com/)

```
set -l symbols ◷ ◶ ◵ ◴
while sleep 0.5
    echo -e -n "\b$symbols[1]"
    set -l symbols $symbols[2..-1] $symbols[1]
end 
```

在这种情况下，`symbols`是一个数组变量，如果它被旋转/移位，则为内容，因为`$symbols[2..-1]`除了第一个之外都是所有条目。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-06T19:01:04.937

为了详细说明@gavenkoa 的答案，变量扩展应该有双引号，这样我们应该得到一个原始但工作的 POSIX 兼容微调器：

```
while true; do for x in '|' '/' '-' '\'; do printf "\b$x"; sleep 1; done; done 
```

（这可能不值得单独回答，但我还不允许发表评论，并且在尝试编辑旧答案时，它说编辑队列已满。）

# c# - GridView 以错误的方式删除行

> ID：10470142
> 
> 赞同：1
> 
> 时间：2012-05-06T11:23:32.547
> 
> 标签：c#, wpf, gridview, row

我有一个gridview，如果我以这种方式删除一行：

```
foreach(Label l in currentRow) // I have an internal list of the labels
{
    grdTable.Children.Remove(l); // the cells are filled with labels
}
grdTable.RowDefinitions.Remove(index); 
```

如果它是**最后**一行或**倒数第二**行，则在其他情况下它会失败。

删除第 2 行的示例（索引 1） [http://www.pic-upload.de/view-14074618/Unbenannt.png.html](http://www.pic-upload.de/view-14074618/Unbenannt.png.html)

第 3 行没有显示，第 2 行确实被删除了，但在我看来，第 3 行没有正确推到正确的位置。即使更新网格也无济于事。

**编辑：**当前行是 a `List<Label>`，我有 a`List<List<Label>>`代表网格内容。我已经检查过`List<Label>`填充一行的**总是**与保存它的 RowDefinition 具有相同的索引。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T12:00:55.447

在我看来，您好像在使用`Grid`控件，而不是“GridView”（我不知道有任何具有该名称的 WPF 控件。）您的使用`RowDefinitions`对我来说是这样的。

在 a中，每个控件所在的行由其附加属性`Grid`的值给出。`Grid.Row`网格的`RowDefinitions`指定每行的高度。

当您删除一个 时`RowDefinition`，您所做的只是调整 内各行的高度`Grid`。删除 a`RowDefinition`不会影响`Grid.Row`网格中控件的值。

要完全删除该行，您需要：

1.  删除行中的所有控件，
2.  将已删除的控件下方的行中的所有控件打乱，并且
3.  删除`RowDefinition`.

您的代码似乎缺少第 2 步。

您的方法适用于您删除最后一行的情况，因为这样就没有控件可以改组。它似乎也适用于您删除倒数第二行的情况。假设您有 10 行，编号从 0 到 9，然后删除第 8 行。现在有 9 行定义，编号为 0 到 8。但是，最后一行中的控件的`Grid.Row`值仍设置为 9，即现在超出范围。WPF 将所有`Grid.Row`超出范围的控件放在最后一行，所以第 9 行的控件出现在第 8 行。如果你`RowDefinition`在网格中添加一个 back，你会发现第 9 行的控件随后会出现在新的第 9 行，在第 8 行留下一个空隙。

PS。有什么理由你不使用 a[`DataGrid`](http://www.wpftutorial.net/datagrid.html)吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T11:38:37.103

尝试查看 currentRow 和 grdTable 的确切结构。可能与这些不匹配的东西有关。在这里发布结构（我的意思是那里的数据以及它的结构）会帮助那些试图帮助你的人。

# java - 选择哪种数据结构？

> ID：10470147
> 
> 赞同：1
> 
> 时间：2012-05-06T11:24:43.823
> 
> 标签：java, data-structures, guava

需要选择最佳数据结构以快速处理位置和区域列表。

位置（城市）有简单的 POJO：

```
public class Location {

    private String name;
    private int post; //id 
```

对于地区（地区）：

```
public class Region {
    private String name;
    private int id;
    private List<Location> cities; 
```

最后我有`List`对象`Region`。我需要做什么：

1.  按帖子（id）搜索位置名称
2.  按名称搜索位置帖子。*注意*：名称不是唯一的，因此在名称相同的情况下，我需要更喜欢一些具体的位置

问题是我应该使用什么数据结构？我正在考虑包含来自所有地区的所有位置的 TreeMap。所以我可以通过名称（字符串）快速获取位置。对于 p 1。我有解决方案：位置的帖子包含区域的 id。所以如果 Region 的 id=1，那么它的 Locations 帖子将是 10001、10002 等。或者我可能需要选择 Guava 引入的一些新的 Collections 类型，因为它已经存在于项目中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T11:34:42.167

我建议你创建类`LocationRepository`：

```
class LocationRepository {
    Location getById(int id);
    Collection<Location> getByName(String id);
} 
```

此存储库应包含 2 个集合： Map（位置的 HashMap 或 TreeMap：`Map<Integer, Location>`其中 key 是位置 ID。第二个映射应`[MulitMap][1]`来自 Guava，它在名称和匹配位置集合之间进行映射。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T11:38:03.413

将所有位置添加到两个`HashMap`s：

1.  一个以位置名称为键，位置列表为值的所有位置。
2.  其他以 id 作为键，以 Location 作为值？

最好将两个哈希图隐藏在一个类中为您进行查找。

还是我错过了什么？

# php - flex、amfphp、PHPSESSID ......有没有一种优雅的方式将它们组合在一起？

> ID：10470148
> 
> 赞同：0
> 
> 时间：2012-05-06T11:25:00.063
> 
> 标签：php, flash, apache-flex, session, amfphp

我正在开发带有 amfphp 后端的 flex 应用程序。需要一种方法来检查发出请求的用户是否已登录。我尝试在 php 会话的帮助下做到这一点（顺便说一句：也许你会建议更好的方法）。由于 Flash 播放器不传递 PHPSESSID，我必须自己传递。这里的麻烦是我无法直接控制帖子参数（因为我正在努力`RemoteObject`）。有没有简单的方法来传递 PHPSESSID？

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T15:53:27.473

只需使用会话 ID 作为请求参数请求远程 URL，然后调用`session_id();`之前`session_start();`将会话设置为请求的会话。

例如：

```
<?php
session_id($_REQUEST['PHPSESSID']);
session_start(); 
```

为了防止劫持会话，我通常会添加一些`session_id`可逆的加密，并且我使用非标准请求参数。

# javascript - javascript setInterval()

> ID：10470149
> 
> 赞同：1
> 
> 时间：2012-05-06T11:25:01.780
> 
> 标签：javascript, jquery

我有这个代码：

```
function noti() {
     document.title = document.title + " 1"
}

setInterval("noti()", 1000) 
```

问题是它输出：

> 我的标题 1 1 1 1 1 1 1 ..... 无限.... 1

是否有任何可能的方式将其输出为“我的标题 1”

当每次在数据库中发生更新时，**noti()**函数的用途是，*无论从数据库中收集的长度是多少*，它将被输出到用户**标题栏中**。

> 因此，“My title 1”，其中“My title”是用户名，“1”是来自数据库的长度

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T11:26:58.607

如果你只想执行`noti`一次，你应该使用[`setTimeout`](https://developer.mozilla.org/en/DOM/window.setTimeout)，而不是`setInterval`。

**更新：**好的，所以你想`noti`连续执行但替换后缀而不是每次都重新添加。使用正则表达式替换：

```
document.title = document.title.replace(/(\b\s*\d+)?$/, " " + num); 
```

[**看到它在行动**](http://jsfiddle.net/XgSwW/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T11:28:27.520

通常像这样的东西被标记。通常你会看到类似`(1) My title`.

在这种情况下，这是一个简单的问题：

```
function noti(num) { // num is the number of notifications
    document.title = document.title.replace(/^(?:\(\d+\) )?/,"("+num+") ");
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-06T11:30:24.503

尝试：

```
var ttl = document.title; //initalize title
function noti() {
  document.title = ttl + " 1";
  //if you want to continue setting the title 
  //(so periodically repeat setting document.title) 
  //uncomment the following:
  //setTimeout(noti, 1000);
}

//use a function reference here. 'noti()' will
//cause the interpreter to do an eval
setTimeout(noti, 1000); 
```

看看[为什么你不应该使用`setInterval`](http://weblogs.asp.net/bleroy/archive/2009/05/14/setinterval-is-moderately-evil.aspx)

# jquery - 无法使用 jQuery 读取 SQLite DB

> ID：10470150
> 
> 赞同：0
> 
> 时间：2012-05-06T11:25:26.087
> 
> 标签：jquery, html, sqlite

我目前正在开发一个使用 SQLite 数据库的网络应用程序。我可以创建数据库并将信息写入其中，但我无法在以后的代码中使用存储的信息。

这是我用来从数据库中读取的代码：

```
function GetItemFromDB(request, level, callback) {
DB.transaction(
        function (transaction) {
            transaction.executeSql(
                'SELECT ? FROM levels WHERE id=?;',
                [request, level], function (transaction, results) {
                    callback(results);
                });
        }
); 
```

}

然后我想使用存储的信息在游戏中创建一个关卡。我这样做是这样的：

```
var ptop = GetItemFromDB('ptop', level); 
```

其中 ptop 是包含我想要的信息的行，level 是游戏中的当前级别，

所以我的问题是：如何从数据库中加载存储的信息，然后在代码中使用它？

谢谢你的时间 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T13:32:52.360

我认为您正在尝试使用异步 WebSQL API 获取返回值，因此您将永远不会从函数 GetItemFromDB 收到返回值。

如果你想从你的 DB 对象异步读取数据，你应该尝试这样的事情：

```
function GetItemFromDB(request, level, callback) {
    DB.transaction(function(tx){
        tx.executeSql('SELECT ' + request + ' FROM levels WHERE id = ?', [level], function(tx, results){
            callback(results);
        }, errDB);
    }, errDB);
}

function errDB(err) {
    console.log("Error processing SQL: " + err.code);
}

function getItemCallback(results)
{
    alert("Result rows length: " + results.rows.length);

    //result.rows are the results from the SQL
    //if you know the are only one result, you can
    //work with results.rows.item(0), else iterative over rows
    alert("ptop column of row: " + results.rows.item(0).ptop);
} 
```

然后简单地调用函数：

```
GetItemFromDB('ptop', level, getItemCallback); 
```

如果您想或需要使用同步 API，我认为此链接可能对您有所帮助：http: [//www.w3.org/TR/webdatabase/#synchronous-database-api](http://www.w3.org/TR/webdatabase/#synchronous-database-api)

# php - drupals imagecache 模块仅适用于“默认”站点？

> ID：10470153
> 
> 赞同：0
> 
> 时间：2012-05-06T11:25:49.003
> 
> 标签：php, drupal, module, image-caching

我有多站点设置，其中 imagecache 模块位于站点/全部下。我的目标是让每个站点都有自己的 imagecache 文件夹，里面装满了属于该站点的请求；例如，通过 domain1/imagecache/files/thumb_image/photos/bigavatar.jpg 引用它们。

照片文件夹已通过 FTP 上传，因此 drupal 基本上不知道它（数据库方面），但如果文件夹位于 sites/default/files/photos 下并由 default/imagecache/files/thumb_image/photos/ 引用，则 imagecache 功能完美大化身.jpg。

寻找设置选项 - 并发现如果站点的上传路径发生更改，则 imagecache 可以使用它，但是；对于我的（JS）图像存储，发送到我的画廊，存储数据来自我自己的模块 ximagegallery。这是生成路径的方式：

```
<?php
/**
 * @param title : visible gallery title
 * @param basename filename base of image
 * @param site current site (commonly guessed from REQUEST_URI but goal is to let this be configurable)
 * @param location path of $basename imagefile underneath sites/$site/
*/
    function ximagegallery_get_object($title, $basename, $site, $location) {
        return array(
             "title" => $title,
             "link" => "{$site}{$location}/{$basename}",
             "screenpath" => "{$site}/imagecache/screen{$location}{$basename}",
             "thumbpath" => "{$site}/imagecache/small_thumb{$location}{$basename}"
        );
    }
    ?> 
```

Imagecache 仅适用于文件系统配置的上传路径，我希望超越这一点并使 imagecache 响应任何位置，例如两个站点是否需要共享一个公共画廊/图像文件夹。

编辑; 我想一个解决方案是创建另一个 hook_menu，从我的派生模块调用 imagecache 函数 - 因为它已经是一个依赖项，这对于我猜的目的来说足够模块化

```
<?php
function ximagegallery_menu() {
        // standard route hook
    $items['ximagegallery/store/%'] = array(
         'title' => 'ximagegallery_GENERATE',
         'page callback' => 'ximagegallery_generate_store',
         'page arguments' => array(1),
         'access callback' => 'ximagegallery_access'
    );
        // one hook for each configured path
        $hooks = get_variable('ximagegallery_folderhooks', array());
        foreach($hooks as $folder) {
           $items['$folder.'/imagecache'] = array(
         'page callback' => 'imagecache_cache',
         'access callback' => '_imagecache_menu_access_public_files',
         'type' => MENU_CALLBACK
           );
       }
} ?> 
```

如果我的文件夹挂钩包含“domain2/foo/bar”，那么这允许使用[http://domain.tld/drupal/?q=domain2/foo/bar/imagecache/myimagefolder/galleryid/photo.jpg](http://domain.tld/drupal/?q=domain2/foo/bar/imagecache/myimagefolder/galleryid/photo.jpg)

精彩 =)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T17:44:45.887

```
<?php
function ximagegallery_menu() {
        // standard route hook
    $items['ximagegallery/store/%'] = array(
         'title' => 'ximagegallery_GENERATE',
         'page callback' => 'ximagegallery_generate_store',
         'page arguments' => array(1),
         'access callback' => 'ximagegallery_access'
    );
        // one hook for each configured path
        $hooks = get_variable('ximagegallery_folderhooks', array());
        foreach($hooks as $folder) {
           $items['$folder.'/imagecache'] = array(
         'page callback' => 'imagecache_cache',
         'access callback' => '_imagecache_menu_access_public_files',
         'type' => MENU_CALLBACK
           );
       }
} ?> 
```

# c# - 为什么 ObservableCollection 有用户界面相关的限制？

> ID：10470160
> 
> 赞同：0
> 
> 时间：2012-05-06T11:26:48.120
> 
> 标签：c#, wpf, architecture, mvvm, observablecollection

我正在构建一个 WPF 应用程序，并在创建我使用的域模型时`ObservableCollection<T>`。
我允许自己使用它只是因为它显然属于 System.Collections.ObjectModel 命名空间。

在执行期间，我收到一个错误。我发现 SO 中的一个线程已经在这里解决了这个问题：[我在哪里可以获得线程安全的 CollectionView？](https://stackoverflow.com/questions/2137769/where-do-i-get-a-thread-safe-collectionview)

我的问题是：假设`ObservableCollection<T>`在 System.Collections.ObjectModel 命名空间中，为什么它有与用户界面相关的限制？这是架构缺陷还是有意为之？在域模型中使用它是一种好习惯吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T11:44:05.053

我根本不认为这是一个设计缺陷。我们在 WPF 域模型中使用它们。我们只是确保每当我们更新我们的 observable 集合时，我们都会在 UI 线程上这样做。这很容易做到。我们还创建了自己的实现，因此每当我们更新我们的可观察集合时，我们都会禁用集合更新方法，直到所有项目都被添加或删除。这大大提高了装订性能。

# jquery - jQuery/HTML5 中动态更新的图像旋转器

> ID：10470164
> 
> 赞同：5
> 
> 时间：2012-05-06T11:27:29.170
> 
> 标签：jquery, xml, html, dynamic, rotator

所以我知道有很多免费的图像旋转器等，使用 jQuery 之类的东西。然而，我的问题是，有没有办法在不刷新网站页面的情况下动态更新图像旋转器？

所以基本上你正在显示十张图片，然后 1 小时后你有一个脚本删除旧图片添加十张新图片和一个新的 xml 文件，你需要刷新页面吗？或者脚本是否总是动态检查 xml 文件，因此您不必进行刷新。

ps 它不必在 jQuery 中，可以是 HTML5 或类似的 - 我只想能够从文件夹中添加和删除图像，并让旋转器自动更新以使用文件夹中的内容

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T01:04:22.800

我认为，如果可能的话，最好不要对画廊进行任何可能需要重新初始化的操作。下面的方法旨在通过替换图库图像而不替换 img 节点本身来实现这一目标。

首先，让我们假设服务器端代码已经启动并且可以正常工作，并以任何方式返回 json，当解码后相当于：

```
[
    "images/aaa.jpg",
    "images/bbb.jpg",
    "images/ccc.jpg",
    "images/ddd.jpg",
    "images/eee.jpg",
    etc.
] 
```

然后：

```
$(function(){
    var $galleryImgs = $('#myGallery img');//gallery img nodes in a jQuery wrapper.
    var updateGallery = function() {
        $.ajax({
            url: 'getImageUrls.php', //or whatever
            data: {
                n: $galleryImgs.length //specify how many new image urls to fetch
            },
            dataType: 'json',
            success: function(data) {
                $.each(data, function(i, url) {
                    if($galleryImgs[i]) { //safety
                        $galleryImgs[i].src = url; //replace each gallery image in turn
                    }
                });
            }
        });
    };
    var galleryInterval = setInterval(updateGallery, 60*60*1000);//60*60*1000 for one hour; 30*60*1000 for half an hour
}); 
```

因此，画廊插件将（希望）继续它的旋转，幸福地不知道它的图像已被更改。一些画廊插件可能比其他插件更适合这一点 - 需要进行实验。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T14:12:51.147

就删除和替换文件而言，您必须在服务器端进行。你没有提到服务器语言，所以我建议在另一个问题中打开它。一旦你弄清楚了，你可以让你的脚本使用 ajax 轮询服务器以获取更新。

查询看起来（有点）像这样：

```
 refreshShow = function() {
    $.ajax({
      url: 'imagefeed.json',
      dataType: 'json',
      type: 'post',
      data: {
        gallery: 'homeGallery'
      },
      success: function(data) {
        $('#homeGallery img').remove();
        $.each(data, function(i, image){
          $('#homeGallery').append(
            $('<img />').attr('href', image.path)
          )
        });
      }
    });
  }; 
```

然后你的民意调查：

```
$(function(){
  setTimeout(function(){ refreshShow() }, 30000); //polls every 30 seconds for updates
}); 
```

JSON 提要会提供一些路径，也许还有标题。您可以在 SO 上找到一大堆关于以不同语言创建 JSON 输出的问题。请记住，这是示例代码，大多数幻灯片都比这稍微复杂一些。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T14:27:38.980

我假设文件夹中的图像具有不同的名称，因此您可能需要提供一个 URL，您可以轮询该 URL 以获取新文件名，可能如下所示：

[http://example.com/imagenames](http://example.com/imagenames)

它返回这样的json：

```
{
   images: ["i1.jpg", "i1.jpg", "i1.jpg", "i1.jpg", "i1.jpg"],
   version: 12
} 
```

然后，您可以频繁地向该 url 发出 ajax 请求，查看版本号是否被碰撞，然后替换图像轮播中的图像。如果您没有找到可以让您动态更改图像的工具，那么编写起来应该很简单。

这是一种方法，您只需要添加自动旋转： [http ://sorgalla.com/projects/jcarousel/examples/dynamic_flickr_api.html](http://sorgalla.com/projects/jcarousel/examples/dynamic_flickr_api.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T16:56:24.103

### Python 金字塔示例

我已经实现了这个并且可以正常工作，但是我只是没有图像自动更改。我使用 ajax 请求

```
/basic_stats/graph.png?graph.type=IMAGE 
```

其中 /basic_stats/graph.png 只是我配置到特定视图的路线。您的图像滑块不会关心您是否在图像链接中传递参数，只要该路由返回它所期望的 png 或 jpg。在我的情况下，我有一个自动化进程，它在后台运行统计信息，然后将图像存储到一个 Redis 层，该层的视图为 /basic_stats/graph.png? 配置为轮询。然后我只查询 request.params['some_key_value'] 并返回一个图像作为响应对象。然后你根本不需要做任何 ajax 魔术，只需生成正确的响应对象。

### 从 __init__.py

```
config.add_route('ImageSlider', '/images/ImageSlider.png') 
```

### 来自views.py

```
@view_config(route_name='ImageSlider')
def ImageSlider(request):
    imgData = None
    if 'graph.type' in request.params:
        if request.params['image.name'] == 'ImageSlider1':
            r_server = redis.Redis('127.0.0.1')
            imgDataObj = r_server.get('ImageSlider1')
            del r_server
            imgData = pickle.loads(imgDataObj)
        elif request.params['image.name'] == 'ImageSlider2':
            r_server = redis.Redis('127.0.0.1')
            imgDataObj = r_server.get('ImageSlider2')
            del r_server
            imgData = pickle.loads(imgDataObj)
    return Response(body_file=imgData, content_type='image/png') 
```

此示例使用 Redis 存储序列化图像数据，但您可以使用 PIL ex 从 FS 轻松加载文件

```
imgData = Image.open("/images/ImageSlider1.png") 
```

您现在可以让视图在这些特定位置使用您想要的任何图像进行响应。然后只需将您的图像位置传递给您的滑块

### 滑块的链接

```
src="/images/ImageSlider.png?image.name=ImageSlider1"
src="/images/ImageSlider.png?image.name=ImageSlider2" 
```

只需让您的视图调整它动态响应的图像。Redis 允许您超时您的密钥，并让外部进程在侦听时重新填充密钥，以将新图像提供给您的网络服务器。**请注意**，这可能不会随着您移动的图像数据而扩展，而是用于基本统计报告的内部应用程序，这就是我使用它的原因，它很棒，而且无缝快速。我还没有对它进行负载测试以查看上限是多少，但我们不会有很多并发用户。

不管你使用什么框架，这个例子应该是完成你的任务的一个选项。

我想在 Backbone.js 中链接视图渲染调用以在任意更新期间更改图像 src 也可能有效，但我还没有深入 Backbone.js 兔子洞，而且这个概念可能仅限于 Backbone.js。

[Redis](http://redis.io/)
[金字塔](http://www.pylonsproject.org/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T17:33:14.640

类似的事情可以通过使用服务器端语言和 Ajax 来完成。你没有提到一个，所以我只是以 PHP 为例，但这个概念几乎是：

A) 启动旋转器并加载文件夹中的图像。

B) 使用 setTimeout(); 创建一个函数，该函数将使用 Ajax 调用检查目录的 PHP 页面，并返回检查目录中图像名称的 json。

C) 删除旋转器的当前图像，然后使用 JSON 中的新信息重新填充它。

一个例子是：

[PHP]

```
$listOfImages = new array();

foreach( glob("/uploads/*.jpg") as $file ){
    array_push( $listOfImages, $file ); // gets an array of all the jpgs in the uploads directory
}
return json_encode( $listOfImages ); 
```

[jQuery]

```
<script type='text/javascript'>

    $(function($){
        var slider = new Slider(); //Pseudo-class for a slider
        setTimeout(function(){

           $.ajax({
             url:"update-slider-with-images.php",
             type:"post",
             dataType:"json",
             success:function(data){

               slider.clearAllImages(); //pseudo function to remove images from slider

               var images = JSON.parse( data );
               for(image in images){

                  slider.addImage( image ); //Psuedo function to add image to the rotation queue

               }

               slider.slide(); // Pseudo function to start the slider

            }

         });

        },300000); // check every 6 minutes

    });

</script> 
```

这可能不是您所需要的一切，因为您需要创建滑块类或以其他方式在我的示例中重新实现该代码，但只要您了解 PHP，就足以让您入门。如果您不这样做，我认为将其转换为其他东西不会太难。我知道 Rails 可以处理文件系统的东西，我相信 ASP.Net 也可以。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-16T08:28:38.843

我有一个您可能感兴趣的简单**jQuery方法。**

示例中使用的 Image Rotator 是[JW Image Rotator](http://developer.longtailvideo.com/trac/wiki/ImageRotatorOverview)，它使用 XSPF、RSS 和 ASX 标签格式的外部文件。

它也可能只是可下载演示提供的简单的[xml 文本文件。](http://developer.longtailvideo.com/trac/wiki/ImageRotatorFiles)您可以考虑使用 Flicker，然后访问这些 RSS 源来简化播放列表。

对于您提到的第一个问题，在演示中通过简单的 setTimeout 显示在不刷新网页的情况下更新**图像旋转器。**它重新加载之前更新过的**相同 playlist.xml**文件或使用**不同的播放列表文件**。

为了解决您的第二个问题，**playlist.xml**文件在指定时间重新加载自己时使事情变得容易，因为它会自动强制更新您在图像文件夹中的内容（例如，如果不使用 RSS URL 提要）。

每当您覆盖文件时，例如**01.jpg 到 10.jpg ，然后在重新加载事件期间，由于****JW Image Rotator**检索它们，它将抓取新文件。

这意味着没有时间戳或其他黑客来强制重新加载。更进一步，您可以拥有一系列播放列表，这些播放列表可以自动循环以实现完全自动化的过程。

**演示** 中有很多注释和一些控制台日志消息来解释发生了什么，以便您可以将演示的方法调整到*任何其他图像旋转器或图像插件*。

[这是jsFiddle 上](http://jsfiddle.net/YPP2u/) 的一个DEMO，它是教程版本。

这个[jsFiddle 上的 DEMO 不](http://jsfiddle.net/YPP2u/1/)包含任何注释或控制台，因此您可以清楚地看到代码。

这是可下载的教程版本的[pastebin](http://pastebin.com/r5r8ShY3)。

要在本地试用这个**DEMO**，您需要**开源 JW Image Rotator**，当前版本为 v3.18，现在有 JW 水印，但 v3.17**没有**...它压缩在[这里](http://developer.longtailvideo.com/trac/browser/tags/imagerotator-3.17)，它包括所有源文件，包括**.fla** Flash 文件。

**演示**还包含一个指向**JW Image Rotator JavaScript API**命令的链接，这些命令甚至没有使用过……但可以随时用于进一步定制！

# javascript - 在 AJAX 中搜索代码

> ID：10470165
> 
> 赞同：-5
> 
> 时间：2012-05-06T11:27:34.360
> 
> 标签：javascript

我执行一项任务来听到......我正在搜索像谷歌搜索引擎这样的数据，我只能使用鼠标选择值如何使用箭头键选择该数据？我的代码如下。

```
<html>
<head>
<script type="text/javascript">
function showResult(str)
{
if (str.length==0)
  {
  document.getElementById("livesearch").innerHTML="";
  document.getElementById("livesearch").style.border="0px";
  return;
  }
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("livesearch").innerHTML=xmlhttp.responseText;
    document.getElementById("livesearch").style.border="1px solid #A5ACB2";
    }
  }
xmlhttp.open("GET","livesearch.php?q="+str,true);
xmlhttp.send();
}
</script>
</head>
<body>

<form>
<input type="text" size="30" onkeyup="showResult(this.value)" />
<div id="livesearch"></div>
</form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T11:59:08.823

您的问题相当模糊，但听起来您想在 Javascript 中使用箭头键。之前有人问过这个问题：[Binding arrow keys in JS/jQuery](https://stackoverflow.com/questions/1402698/binding-arrow-keys-in-js-jquery)。

jQuery 还会使您的 AJAX 请求更容易编写。例如，请参阅[jQuery.get()](http://api.jquery.com/jQuery.get/)的文档。

很难告诉您如何编写 Javascript 来选择特定项目（例如在 Google 中），因为这取决于 AJAX 请求 ( `xmlhttp.responseText`) 返回的内容。

# mongodb - Casbah Scala MongoDB 驱动程序 - 从 DBObject 获取数据

> ID：10470166
> 
> 赞同：7
> 
> 时间：2012-05-06T11:27:59.503
> 
> 标签：mongodb, casbah

好的，这是关于 Casbah 和 MongoDB 基础知识的另一个问题。从数据库中检索 DBObject 后，如何从中提取某些数据？我知道有`DBObject.get()`返回的方法`java.lang.Object`。我是否必须这样做，然后将数据转换为所需的类型？我不确定这是不是最好的方法......有人可以推荐如何更好地做到这一点吗？

**更新：**

最后我采用了手动处理所有东西的方式。由于案例类的限制，我没有使用 Salat，因为不建议将案例类用于生孩子，这需要重新安排架构。但是，该答案被标记为最佳答案，因为它适用于大多数情况，并且这里没有其他更通用的答案。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-26T03:41:18.940

您可以使用 MongoDBObject 的`as`方法来获取值并将其转换为一次调用：

```
val coll = MongoConnection()(dbName)(collName)
val query = MongoDBObject("title" -> "some value")
val obj = coll findOne query

val someStr = obj.as[String]("title")
val someInt = obj.as[Int]("count")
// and so on.. 
```

请注意，`as`如果找不到给定的键，则会引发异常。您可以使用`getAs`which 为您提供`Option[A]`：

```
obj.getAs[String]("title") match {
    case Some(someStr) => ...
    case None => ...
} 
```

提取列表有点复杂：

```
val myListOfInts =
  (List() ++ obj("nums").asInstanceOf[BasicDBList]) map { _.asInstanceOf[Int] } 
```

我写了一个 helper，让使用 casbah 更加简洁，可能会有帮助，所以附上：

```
package utils

import com.mongodb.casbah.Imports._

class DBObjectHelper(underlying: DBObject) {

  def asString(key: String) = underlying.as[String](key)

  def asDouble(key: String) = underlying.as[Double](key)

  def asInt(key: String) = underlying.as[Int](key)

  def asList[A](key: String) =
    (List() ++ underlying(key).asInstanceOf[BasicDBList]) map { _.asInstanceOf[A] }

  def asDoubleList(key: String) = asList[Double](key)
}

object DBObjectHelper {

  implicit def toDBObjectHelper(obj: DBObject) = new DBObjectHelper(obj)

} 
```

您可以像这样使用助手：

```
val someStr = obj asString "title"
val someInt = obj asInt "count"
val myDoubleList = obj asDoubleList "coords" 
```

我希望它会帮助你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T11:33:21.730

如果您不害怕使用其他依赖项，请使用[Salat](https://github.com/novus/salat)。使用 Salat，将案例类转换为数据库对象并返回非常简单。

序列化

```
val dbo = grater[Company].asDBObject(company) 
```

反序列化

```
val company_* = grater[Company].asObject(dbo) 
```

# php - apt-get 通过 PHP shell_exec() 安装

> ID：10470169
> 
> 赞同：2
> 
> 时间：2012-05-06T11:28:56.070
> 
> 标签：php, shell-exec, apt, apt-get

我正在尝试使用 PHP 上的 shell_exec() 函数来安装带有 apt 的软件包。为此，我认为我还需要 -y 运算符来假设所有问题都是肯定的。所以我有：

```
$output = shell_exec("apt-get -y install <package-id>");
echo $output; 
```

但是，通过这样做，安装只能输出到“在此操作后，将使用 0B 的额外磁盘空间”点，并且不会返回错误。然而，当从终端运行它时，它运行得很好。此外，shell_exec 是从 root 运行的。那么这是我的 PHP 服务器配置的问题，还是其他问题？谢谢。

编辑：我忘了提到 PHP 正在通过 lighttpd 运行，这可能会导致问题。此外，我认为使用`apt-get install`实际下载 .deb 但无法安装它而没有给出错误。由此，我得出结论，这与权限有关，但我还没有弄清楚如何解决它。谢谢。

# android - 获取默认对话框的视图

> ID：10470174
> 
> 赞同：2
> 
> 时间：2012-05-06T11:29:46.590
> 
> 标签：android, android-layout, android-fragments, android-dialogfragment

我正在尝试在 DialogFragment 中实现 ProgressDialog 并将其用作片段。我的 onCreateDialog 看起来像这样：

```
 public Dialog onCreateDialog(Bundle savedInstanceState) {

    String message = getArguments().getString("msg");

    ProgressDialog dialog =  new ProgressDialog(getActivity());

      dialog.setMessage(message);
      dialog.setTitle("");
      dialog.setCancelable(true);
      dialog.setIndeterminate(true);
      dialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
      return dialog;
} 
```

根据android开发人员的说法，要将这个对话框用作片段，我必须实现onCreateView，它返回视图对象。问题是，我如何获得此类对话框的视图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T16:13:54.070

它只适用于 onCreateDialog。如果你想创建一个更复杂的视图和片段，你应该创建一个方法，例如：

```
public View onCreateView( . .. ) {
    LayoutInflater inflater = getActivity().getLayoutInflater();
    View view = inflater.inflate(R.layout.fragment_xml_id, null);
    return view;
} 
```

有关更多信息，请参阅此博客： [http ://android-developers.blogspot.com/2012/05/using-dialogfragments.html](http://android-developers.blogspot.com/2012/05/using-dialogfragments.html)

# c# - 如何通过 linq 表达式作为 where 子句对多行执行更新

> ID：10470175
> 
> 赞同：0
> 
> 时间：2012-05-06T11:29:51.880
> 
> 标签：c#, nhibernate

我们使用某种标准语言将查询的 where 子句从客户端传递到服务器。对于服务器，我们将其转换为 linq 表达式并使用 NH 执行查询。例如“获取事件页面”查询看起来像这样：

```
Session.Query<EventExtractData>()
.Where(message.Criteria.GetExpression())
.OrderByDescending(e => e.CreateTimeUtc)
.Skip(message.Start)
.Take(message.Size)
.ToArray() 
```

message.Criteria 是实现抽象 Criterion<T> 并与 And<T> 和 Or<T> 标准粘合的“原子”标准的组合。每个具体标准都实现了 Expression<Func<T, bool>> GetExpression() 函数。
这是工作。
现在我们想使用相同的标准对多行执行更新。
我不能只获取符合条件的所有行，然后一一更新它们。这将是一个性能问题。
我想通过一个命令执行更新：

```
UPDATE <real view name of mapped EventExtractData class> 
SET <my business logic> 
WHERE <my criterions' linq expression translated to SQL where clause> 
```

我正在寻找一种使用 NH 实现此更新的方法。
实际上，我认为我需要的是使用 NH linq 提供程序将 linq 表达式解析为 sql。
怎么做？

- - - - - - - - - - - - - - - - - 更新 - - - - - - - - ------------
钻入NH内部有一些中间结果：

```
var implementor = session.GetSessionImplementation();
var hqlUpdate = "update EventExtractData e set e.Status = 2, e.CloseReason = 'Multiple close', e.ClosedUTC = :now";
var updatePlan = new HQLStringQueryPlan(hqlUpdate, false, implementor.EnabledFilters, implementor.Factory);
string sqlUpdate = updatePlan.SqlStrings[0]; 
```

这给了我以下 sql 表达式：

> update EV_EventData_VW set Status=2, CloseReason='Multiple close', ClosedUTC=?

现在我将模拟选择查询并得到它的 sql 表达式

```
var dummyQuery = session.Query<EventExtractData>().Where(message.Criteria.GetExpression());
var nhQuery = new NhLinqExpression(dummyQuery.Expression);
var selectPlan = new HQLExpressionQueryPlan(nhQuery.Key, nhQuery, false, implementor.EnabledFilters, implementor.Factory);
string sqlSelect = selectPlan.SqlStrings[0]; 
```

这给了我：

> 选择
> eventextra0_.ID 作为 ID31_，
> eventextra0_.NaturalID 作为 NaturalID31_，
> eventextra0_.Site 作为 Site31_，
> eventextra0_.CreateTimeUTC 作为 CreateTi4_31_，
> eventextra0_.Description 作为 Descript5_31_，
> eventextra0_.EventTypeDisplayName 作为 EventTyp6_31_，
> eventextra0_.Severity 作为 Severity331_，
> eventextra0_0_Status 作为
> Status .CreateUser 作为 CreateUser31_,
> eventextra0_.Owner 作为 Owner31_,
> eventextra0_.CloseUser 作为 CloseUser31_,
> eventextra0_.ExceededUTC 作为 Exceede12_31_,
> eventextra0_.ExpiredUTC 作为 ExpiredUTC31_,
> eventextra0_.ClosedUTC 作为 ClosedUTC31_,
> eventextra0_.OwnedUTC as OwnedUTC31_,
> eventextra0_.IsFalseEvent as IsFalse16_31_,
> eventextra0_.CloseReason as CloseRe17_31_,
> eventextra0_.IsCloseCommentMandatory as IsClose18_31_,
> eventextra0_.PossibleTrueCloseReasons as Possibl19_31_,
> eventextra0_.PossibleFalseCloseReasons as Possibl20_31_,
> eventextra0_.IsExpired as IsExpired31_,
> eventextra0_.IsExceeded as IsExceeded31_,
> eventextra0_. SourceElementID 作为 SourceE23_31_，
> eventextra0_.SourceElementDisplayName 作为 SourceE24_31_
> 从 EV_EventData_VW eventextra0_
> where eventextra0_.IsExpired=1 and eventextra0_.ExpiredUTC<?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T14:55:21.817

您可以使用 DML 风格的操作，但您将不得不[求助于 HQL](http://docs.jboss.org/hibernate/core/3.3/reference/en/html/batch.html#batch-direct)。

但是，如果您觉得需要使用 LINQ 进行查询，我会获取相应的 ID，这应该是一个非常轻量级的查询，然后将 HQL 与这些查询一起使用：

```
var ids = Session.Query<EventExtractData>()
         .Where(message.Criteria.GetExpression())
         .Select(x=>x.Id)
         .ToList();

int count = Session.CreateQuery(@"update EventExtractData evt
                                  set evt.Date =:date 
                                  where evt.Id in (:ids)")
           .SetParameter("date", DateTime.Now)
           .SetParameterList("ids", ids)
           .ExecuteUpdate(); 
```

# php - 包括 Wordpress 功能

> ID：10470177
> 
> 赞同：1
> 
> 时间：2012-05-06T11:30:23.173
> 
> 标签：php, wordpress

有没有办法在 wordpress 中运行一个能够使用所有 WP 标签的外部 php 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T11:32:46.307

是的。您应该只在 PHP 文件的顶部包含 wp-blog-header.php 文件。

```
include(dirname(__FILE__) . '/../../../wp-blog-header.php'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T11:33:47.563

加载`wp-load.php`以包含所有 Wordpress 功能。

但是，请注意[错误](https://core.trac.wordpress.org/ticket/11549)。

# android - 间歇性 SQLiteException：不是 dbopen 的错误

> ID：10470182
> 
> 赞同：5
> 
> 时间：2012-05-06T11:31:26.153
> 
> 标签：android, sqlite, exception, getwritabledatabase

在我的应用程序中，我在很多情况下都使用 DB，但在一种情况下，我遇到了异常，不是每次都可以重现它（还）。

这仅在操作系统版本 2.3.7 和 2.1-update-1 上发生。

编码：

```
public void removeOldOccurrences() {
        SQLiteDatabase db = dbHelper.getWritableDatabase();
        Long oldTime = System.currentTimeMillis() - VALID_OCCURRENCE_TIME;
        String query = "";
        try {
            query = "DELETE FROM " + LOCATIONS_TABLE + " WHERE not ("
                    + REMEMBERED_FIELD + "=1) " + "and (" + LAST_FIELD + "<"
                    + oldTime + ");";
            db.execSQL(query);
        } catch (Exception e) {
            Log.e(TAG, query);
            e.printStackTrace();
        } finally {
            if (db != null) {
                db.close();
            }
        }
    } 
```

异常跟踪是：

```
android.database.sqlite.SQLiteException: not an error
at android.database.sqlite.SQLiteDatabase.dbopen(Native Method)
at android.database.sqlite.SQLiteDatabase.(SQLiteDatabase.java:1849)
at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:820)
at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:854)
at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:847)
at android.app.ContextImpl.openOrCreateDatabase(ContextImpl.java:573)
at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:203)
at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:118) 
```

请帮忙。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-07-30T19:38:58.007

在传递空字符串进行查询时，我也收到了同样的错误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-06T13:27:32.423

此错误来自您尝试创建/打开数据库的语句 getWritableDatabase。

从您给出的代码段中，我看到您正在尝试为每个操作打开数据库。

这不是正确的做法。在关闭数据库之前，您只需打开一次数据库。通常的做法是在其他初始化期间打开它，并在退出应用程序之前小心关闭它。一旦打开存储数据库上下文并在所有其他操作中使用它

例如：你可以有一个这样的数据库管理类：

```
public DataBaseManager open() throws SQLException {
    try {
        mDbHelper = new DatabaseHelper(mCtx);
        mDb = mDbHelper.getWritableDatabase();

    } catch (Exception ex) {
        ex.printStackTrace();
        Utils.getHomeActivityinstance().finish();

    }
    return this;
} 
```

现在当需要调用 delte 时，不要再调用 open

```
public boolean deleteRow(String tableName, long rowId) {

    return mDb.delete(tableName, ID + "=" + rowId, null) > 0;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-03-27T20:36:29.860

确保您的查询不包含**分号“;”之后的尾随空行 您的查询**。

我在 Sqlite 客户端中执行查询时遇到了同样的问题，在四处寻找之后我发现问题是我在查询下方有两个空行。

如果有人遇到同样的问题，这里有一些 Sqlite 客户端（或加载`.sql`文件）中的通过/失败案例。

好的：

```
-- test.sql
SELECT * FROM table; 
```

好的：

```
-- test2.sql
-- notice the empty line below doesn't break the code

SELECT * FROM table; 
```

好的：

```
-- test3.sql
-- notice the query string is not terminated by semicolon ";"
-- but it does contain trailing empty lines
SELECT * FROM table

-- this line is just a placeholder, in actual file this line should also be empty 
```

坏的：

```
-- test3.sql
-- notice the query string is terminated with semicolon, 
-- and there are trailing empty lines after that
SELECT * FROM table;

-- this line is just a placeholder, in actual file this line should also be empty 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-06T12:52:59.280

看起来您的查询在`not`.

查看[SQLite Docs](http://sqlite.org/lang_expr.html)，根据他们`not`的说法，您没有尝试使用它的方式（作为对您的位置的否定）。

您的选择似乎不是：

```
NOT LIKE
NOT GLOB
NOT REGEXP
NOT MATCH
NOT BETWEEN
NOT IN
IS NOT 
```

其中大多数都需要在他们面前表达。

```
WHERE xxxx NOT MATCH yyyy 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-22T20:43:51.657

我花了两个小时寻找这个问题的解决方案，这就是我无法在 SQLite 数据库中创建表的原因。

**我的错误是我有“is_selected”属性，这导致了 NOT AN ERROR 错误。重命名属性并且它起作用了。**

# google-chrome - 我将如何扩展书签栏？

> ID：10470184
> 
> 赞同：0
> 
> 时间：2012-05-06T11:31:32.490
> 
> 标签：google-chrome, google-chrome-extension

我想通过扩展在 chrome 中的书签栏中添加一个“小部件”。该小部件将固定在书签栏的右侧，并具有几个触发不同操作的按钮。

我对 chrome 开发很陌生，所以如果有人能指出我正在尝试做的事情的正确方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T12:24:50.457

您只能向书签栏添加书签，而不是小部件。但是，您可以使用 Chrome [Bookmark API](http://code.google.com/chrome/extensions/bookmarks.html)`javascript:`添加一个小书签（即，一个书签，其 URL 开头并在单击时在当前页面上运行一个脚本）。但是，单独的功能将需要单独的书签，或者单个书签可以将菜单添加到页面。

不过，也许您想要的是地址栏右侧的[浏览器操作按钮。](http://code.google.com/chrome/extensions/browserAction.html)每个扩展只能添加一个按钮，但该按钮可以产生一个带有更多选项的弹出页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T12:13:51.563

只是为了确保您没有混淆苹果和橙子，我想指出 Chrome 扩展程序的按钮通常不在书签栏中，正如其他人所指出的那样，这甚至可能是不可能的。如果您在 Chrome 上看到了一个扩展按钮，那么它很可能不在书签栏中，或者您实际上看到的是一个小书签。

扩展按钮通常出现在书签栏上方 UI 的其他位置。如果您只是想制作一个操作书签的扩展程序，那么将按钮放在正常位置可能就可以了。

根据设计，扩展根本不需要任何按钮。

也就是说，如果确实无法通过“正常”方式将按钮插入到书签栏中，但我迫切希望我的扩展能够在其中有一个，我可能会尝试以下操作：使用[书签 API](http://code.google.com/chrome/extensions/bookmarks.html)插入书签进入书签栏。然后，该小书签可以与单击它时打开的任何网页进行交互。然后我的扩展程序可以查看每个打开的网页，以查看由小书签触发的事件。当检测到事件时，我的扩展代码可以采取我希望它采取的行动。不过，这有点混乱，而且不是很理想。

根据您的需要，创建一个独立的书签会好得多。然后，您可以将扩展作为一个独立的小书签和作为一个扩展分发，它只是将小书签添加到书签工具栏。

# wpf - WPF 容器控件

> ID：10470189
> 
> 赞同：0
> 
> 时间：2012-05-06T11:32:43.337
> 
> 标签：wpf, xaml, wpf-controls

我有一个应该用作容器的用户控件，它如下所示：

```
<ContentControl ... >
    <Grid>
        <Rectangle RadiusX="8" RadiusY="8">
            <Rectangle.Fill>
...
            </Rectangle.Fill>
        </Rectangle>

...

        <ContentPresenter />
    </Grid>
</ContentControl> 
```

当我在窗口中使用它时，控件的内容被替换而不是放入 ContentPresenter：

```
<XWpf2:MyContainer Margin="40">
        <ListView Margin="16" />
</XWpf2:MyContainer> 
```

什么是正确的方法，这里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T11:36:21.370

您将 设置`Content`为 a ，然后用 a`Grid`覆盖。如果您希望保留该结构，则需要将其分配为.`Content``ListView``ContentControl.Template`

`MyContainer`当然，如果它是 a也可以这样说`UserControl`，如果你设置了`Content`然后用 a 覆盖它，`ListView`你的整体`ContentControl`也会消失。

# sql - SSIS OnError EventHandler 确实在表中创建了一个条目，但插入的行不可见

> ID：10470194
> 
> 赞同：1
> 
> 时间：2012-05-06T11:33:55.117
> 
> 标签：sql, sql-server, event-handling, ssis

我正在构建一个 SSIS 包并尝试实现事件处理程序。

我希望每当在整个过程中的任何地方发生错误时，都应该在具有**System::SourceName、System::ErrorDescription 、 System::ErrorCode**和**System::ExecutionInstanceGUID**的表中创建一个日志条目。

为此，我创建了一个表，如下所示：

```
CREATE TABLE [dbo].[ErrorLog]([LogID] [int] IDENTITY(1,1) NOT NULL,
[ExecutionID] [nvarchar](255) NULL,[SourceName] [varchar](255) NOT NULL,
[Message] [nvarchar](max) NOT NULL,
[MessageCode] [int] NOT NULL,
[LogDateTime] [datetime] NOT NULL
) ON [PRIMARY] 
```

我在包级别创建了一个**OnError事件处理程序。**使用的 Sql 查询是 INSERT INTO [ErrorLog]([ExecutionID],[SourceName],[Message],[MessageCode],
[LogDateTime]) VALUES(?,?,?,?,getdate())

我面临的问题是，每当事件处理程序所做的包中的任何地方发生错误时，都会变为绿色，显示其调用，但数据库中的表不显示条目。

但是，我确信每次发生错误时都会插入一行，因为每当我在该表中手动创建新行时，都会添加一个新行，其中包含列 [LogID] 的下一个标识值。

例如，假设 LogID 列中的值为**74**并且包中发生错误，未添加任何行，并且当我在 ErrorLog 表中手动插入记录时，插入的标识为**76**。

不知道出了什么问题。

我在这个修复中，非常感谢任何帮助。

谢谢莫希特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T12:59:59.857

这看起来像正在回滚插入。

你对你的包裹有交易控制吗？

为了测试，我会将组件上的事务支持属性设置为 onerror，甚至将触发错误的任务设置为 NotSupported。它表示该任务不会参与由包或任何其他父任务发起的任何事务。

# r - R 编程 - 具有等式约束的线性回归（两组虚拟变量）

> ID：10470197
> 
> 赞同：0
> 
> 时间：2012-05-06T11:34:27.667
> 
> 标签：r, constraints, regression

我目前正在使用两组虚拟变量进行线性回归 -

model1 <- lm(y ~ factor1 + factor2, data=mydata)

其中 factor1 包含 30 个分类变量，factor2 包含 5 个分类变量。

我有两个约束 - 总和（每个因子 1 的系数 * 每个因子 1 的某个常数项）= 0 和总和（每个因子 2 的系数 * 每个因子 2 的某个常数项）= 0。

我意识到该解决方案在某种程度上与向 lm 函数添加“对比度”有关，但我不知道如何正确编码。任何人都可以请你启发我。或者请随时留下您对解决此类问题的替代方法的建议

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T17:27:20.887

你可以使用 glmc 包吗？但我不知道如何设置约束。

# javascript - 为什么新阵列慢？

> ID：10470202
> 
> 赞同：3
> 
> 时间：2012-05-06T11:36:06.103
> 
> 标签：javascript, arrays, benchmarking, profile

比较操作时

```
var fat_cats = cats.slice() 
```

到

```
var fat_cats = new Array(cats.length) 
```

性能差异令人困惑。

在 firefox 和 chrome`new Array`中速度较慢（当它应该更快时，它只是分配一个空数组而不是对其进行迭代）

在 IE8`new Array`中更快（这只是令人困惑）

任何解释表示赞赏。

[基准](http://jsperf.com/mapclone/6)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-06T12:11:23.480

通过查看V8 数组函数[的源代码](http://code.google.com/searchframe#W9JxUuHYyMg/trunk/src/array.js&q=slice%20package:http://v8%5C.googlecode%5C.com&ct=rc&cd=9&sq=)弄清楚了。

如果一个数组有超过 1000 个元素并被`.slice`调用，`SmartSlice`则使用一个被调用的函数，而`SimpleSlice`不是其他使用的函数。

`SimpleSlice`实现为 for 循环复制（与数组复制测试用例中的代码完全相同）。`SmartSlice`，另一方面，使用稀疏数组来表示数据。

在元素数量从 10,000 降至 1000 以下[的测试用例](http://jsperf.com/mapclone/12)中，它们的性能完全相同（在误差范围内），而在变化较少且元素超过 1000 个[的更好控制的测试用例](http://jsperf.com/mapclone/11)中，SmartSlice方法比原始副本快约 36%。

* * *

虽然这完美地解释了 V8 方面的问题，但我不知道为什么 Firefox 在新数组上的速度也比切片数组慢，即使在较小的尺寸下也是如此——除非它们有类似的优化（可能适用于所有切片函数）。

编辑

这一直困扰着我，所以我下载了 Firefox 源代码并签出`js/src/jsarray.cpp!array_slice`，Firefox 确实有类似的优化：结果`.slice`是`DenseCopiedArray`or `DenseAllocatedArray`，这显然类似于 V8 稀疏数组。

# c - OpenMP 嵌套循环并行性

> ID：10470208
> 
> 赞同：1
> 
> 时间：2012-05-06T11:36:34.060
> 
> 标签：c, loops, parallel-processing, openmp, nested-loops

我正在使用 OpenMP，但我遇到了错误结果的问题。

这是代码：

```
 #pragma omp parallel shared(L,nthreads,chunk) private(tid,i,j){
        tid = omp_get_thread_num();
        if (tid == 0)
        {
            nthreads = omp_get_num_threads();
            printf("Starting matrix multiple example with %d threads\n",nthreads);
            printf("Initializing matrices...\n");
        }

        #pragma omp for schedule (static, chunk) 
        for( i=0; i<SIZE_A;i++){
            for( j=0; j<SIZE_B;j++){
                if(A[i]==B[j]){
                    if(i==0 || j==0)
                        L[i][j]=1;
                    else
                        L[i][j] = L[i-1][j-1] + 1;
                }
                // or reset the matching score to 0
                else
                    L[i][j]=0;
            }
        }
    } 
```

你怎么看，为什么我得到错误的结果？我应该改变什么？

非常感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-06T14:31:14.197

你有一个循环数据依赖：

```
L[i][j] = L[i-1][j-1] + 1; 
```

在这里，如果交互`i`和`i-1`已分配给不同的线程，则不能保证第一个线程会在第二个线程开始之前完成，因此第二个线程将读取不正确（仍未更新）的值`L[i-1][j-1]`。`ordered`您可以通过将子句赋予工作共享指令来使执行排序，`omp for`但这会终止并行化。

由于依赖是对角线的，你可以重新考虑你的算法以某种方式`L`对角线而不是按行。

# java - Play Framework处理表信息

> ID：10470209
> 
> 赞同：0
> 
> 时间：2012-05-06T11:36:54.350
> 
> 标签：java, database, playframework-2.0

我正在使用 Play Framework 2.0 开发应用程序。

我有一个过滤器部分，它在一个表上返回几个结果，并且在每一行上我都有一个像这样的详细信息按钮：

```
@(logList: List[Log])

@import helper._
@import helper.twitterBootstrap._

@title = {
    Results...
}

@main(title, nav = "filter") {

<table class="table">
    <thead>
        <tr>
                          <th>Id</th>
            <th>Date</th>
            <th>Hour</th>
            <th>Event</th>
        </tr>
    </thead>
    <tbody>
    @helper.form(action = routes.LogDetail.submit) {
        @logList.map { log =>
        <tr>
                          <td>@log.id</td>
            <td>@log.date</td>
            <td>@log.time</td>
            <td>@log.event</td>
            <td>

            <input type="submit" class="btn primary" value="Details">

            </td>
        </tr>
        }
        }
    </tbody>
</table>
} 
```

当按下行的详细信息按钮时，我需要进行哪些更改来传递行的 ID？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T12:03:27.713

我不明白为什么即使您不发送任何内容，您也使用表单？事实上，对于每一行，您应该使用单独的表单并使用 Li-o 向您展示的隐藏字段。

相反，使用普通 GET 会更容易

```
<a href="@routes.LogDetails.show(log.id)" class="btn">Details</a> 
```

在 Twitter Bootstrap 中，您还可以将链接显示为按钮

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T11:46:56.293

在表单中创建一个隐藏的输入字段：`<input type="hidden" name="id" value="@log.id">`

# javascript - Internet Explorer Z-Index 定位问题 - 下推内容

> ID：10470212
> 
> 赞同：1
> 
> 时间：2012-05-06T11:37:48.453
> 
> 标签：javascript, css, internet-explorer

我目前正在编写一个我一直在为我父亲工作的网站，并且遇到了可怕的 IE 问题。

我在页面顶部有一个滑块，顶部有一个深色透明菜单栏，并应用了 Z 索引将其置于前面。它可以在所有浏览器中完美呈现，PC 上的 IE 除外。

该页面应呈现如下：

[http://cl.ly/GOCC](http://cl.ly/GOCC)

请注意，防盗帽的顶部在透明导航栏下可见。

然而，在 IE 中，它呈现如下：

[http://cl.ly/GO6O](http://cl.ly/GO6O)

请注意，它将滑块图像向下推到透明导航 div 下方（同样，使用帽子作为防御点）。

有没有人对我如何纠正这个有任何建议？我不是经验丰富的编码员，对 IE 修复也不是很好！我搜索了互联网但无济于事......帮助！

我的HTML如下：

```
<div class="navigation">
            <div class="container">
                <h1>Plymstock Security Systems</h1>
                <ul id="navigationlinks">
                    <li><a href="#">Products & Services</a></li>
                    <li><a href="#">About Us</a></li>
                    <li><a href="#">Recent Projects</a></li>
                    <li><a href="#">News</a></li>
                    <li><a href="#">Contact</a></li>
                </ul>
            </div>
        </div>

        <div id="sliderarea">

            <div id="state1">

            </div>
            <img src="images/slider1.png" alt=""/>
        </div>

        <div class="contentarea">
        </div> 
```

和CSS如下：

```
.navigation {

position: relative;

z-index: 1991;

height: 140px;

background-repeat: repeat;
background-image: url(../images/navbgtrans.png);

}

.navigation h1 {
margin-left: -9px;
height: 140px;
width: 202px;
background-repeat: no-repeat;
background-image: url(../images/logo.png);
text-indent: -9999px;
}

ul#navigationlinks {
z-index: 0;
margin-top: -83px;
float: right;
list-style-type: none;
}

#navigationlinks li {
padding-left: 20px;
float: left;
}

#navigationlinks li a {
color: #bfbfbf;
font-size: 20px;
font-family: FreightSansBook;
text-decoration: none;
}

#navigationlinks li a:hover {
color: white;
}

#state1 {
background-image: url(../images/sliderbg1.png);
} 
```

非常感谢您为我提供的任何帮助。

# java - 如何在 JUNG 2.0 框架中复制图形？

> ID：10470213
> 
> 赞同：5
> 
> 时间：2012-05-06T11:37:57.673
> 
> 标签：java, frameworks, graph, jung

在 JUNG 1.7.6 中有用于此目的的函数 copy() (myGraph.copy())，但在 JUNG 2.0 中，此函数不再存在。我找不到任何其他可能性来创建图形对象的副本。如果有人可以帮助我，我会很高兴。一个解决方法也会很好。

非常感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-06T14:32:00.557

下面的代码带有泛型，因此您应该将`V`和`E`替换`String`为您的`Graph<String, String>`.

```
 Graph<V, E> src;
    Graph<V, E> dest;

    for (V v : src.getVertices())
        dest.addVertex(v);

    for (E e : src.getEdges())
        dest.addEdge(e, src.getIncidentVertices(e)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T12:21:22.680

You can copy the graph manually by iterating over all vertices and all edges and adding them to a new graph. See [getVertices()](http://jung.sourceforge.net/doc/api/edu/uci/ics/jung/graph/Hypergraph.html#getVertices%28%29) in the API

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-16T08:28:55.043

你可以做一个顶点和边的简单副本，这将创建一个新的图表，但里面的对象将通过引用传递，所以你可以使用这个克隆库[https://code.google.com/p/cloning/](https://code.google.com/p/cloning/)

并做一个深拷贝：

```
Cloner cloner = new Cloner();
Graph<V, E> clonedGraph = cloner.deepClone(graph); 
```

# android - MapView 和错误

> ID：10470220
> 
> 赞同：0
> 
> 时间：2012-05-06T11:39:49.220
> 
> 标签：android, google-maps

我有地图视图的问题。这是代码：

安卓清单：

```
<uses-sdk android:minSdkVersion="8" />
<uses-permission android:name="android.permission.INTERNET"/>
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <uses-library android:name="com.google.android.maps"/>
    <activity
        android:label="@string/app_name"
        android:name=".TestjmkapActivity" >
        <intent-filter >
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

活动：

```
package test.pl.pl;

import com.google.android.maps.MapActivity;
import com.google.android.maps.MapView;
import android.os.Bundle;

public class TestjmkapActivity extends MapActivity {

    MapView mapView;
    /** Called when the activity is first created. */
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        mapView = (MapView)findViewById(R.id.map);

        mapView.setBuiltInZoomControls(true);
        mapView.setTraffic(false);
        mapView.setSatellite(true);
        mapView.setStreetView(true);
    }

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }
} 
```

布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

<com.google.maps.MapView
    android:id="@+id/map"
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_height="100dp"
    android:layout_width="100dp"
        android:enabled="true"
    android:clickable="true"
    android:apiKey="xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
    />

</LinearLayout> 
```

这是我尝试启动它时在 logcat 中得到的：

```
05-06 11:27:23.043: E/AndroidRuntime(565): FATAL EXCEPTION: main
05-06 11:27:23.043: E/AndroidRuntime(565): java.lang.RuntimeException: Unable to start activity ComponentInfo{test.pl.pl/test.pl.pl.TestjmkapActivity}: android.view.InflateException: Binary XML file line #7: Error inflating class com.google.maps.MapView
05-06 11:27:23.043: E/AndroidRuntime(565):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
05-06 11:27:23.043: E/AndroidRuntime(565):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
05-06 11:27:23.043: E/AndroidRuntime(565):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
05-06 11:27:23.043: E/AndroidRuntime(565):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
05-06 11:27:23.043: E/AndroidRuntime(565):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-06 11:27:23.043: E/AndroidRuntime(565):  at android.os.Looper.loop(Looper.java:123)
05-06 11:27:23.043: E/AndroidRuntime(565):  at android.app.ActivityThread.main(ActivityThread.java:4627)
05-06 11:27:23.043: E/AndroidRuntime(565):  at java.lang.reflect.Method.invokeNative(Native Method)
05-06 11:27:23.043: E/AndroidRuntime(565):  at java.lang.reflect.Method.invoke(Method.java:521)
05-06 11:27:23.043: E/AndroidRuntime(565):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-06 11:27:23.043: E/AndroidRuntime(565):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-06 11:27:23.043: E/AndroidRuntime(565):  at dalvik.system.NativeStart.main(Native Method)
05-06 11:27:23.043: E/AndroidRuntime(565): Caused by: android.view.InflateException: Binary XML file line #7: Error inflating class com.google.maps.MapView
05-06 11:27:23.043: E/AndroidRuntime(565):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:576)
05-06 11:27:23.043: E/AndroidRuntime(565):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:618)
05-06 11:27:23.043: E/AndroidRuntime(565):  at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
05-06 11:27:23.043: E/AndroidRuntime(565):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
05-06 11:27:23.043: E/AndroidRuntime(565):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
05-06 11:27:23.043: E/AndroidRuntime(565):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:198)
05-06 11:27:23.043: E/AndroidRuntime(565):  at android.app.Activity.setContentView(Activity.java:1647)
05-06 11:27:23.043: E/AndroidRuntime(565):  at test.pl.pl.TestjmkapActivity.onCreate(TestjmkapActivity.java:13)
05-06 11:27:23.043: E/AndroidRuntime(565):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-06 11:27:23.043: E/AndroidRuntime(565):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
05-06 11:27:23.043: E/AndroidRuntime(565):  ... 11 more
05-06 11:27:23.043: E/AndroidRuntime(565): Caused by: java.lang.ClassNotFoundException: com.google.maps.MapView in loader dalvik.system.PathClassLoader[/system/framework/com.google.android.maps.jar:/data/app/test.pl.pl-2.apk]
05-06 11:27:23.043: E/AndroidRuntime(565):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
05-06 11:27:23.043: E/AndroidRuntime(565):  at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
05-06 11:27:23.043: E/AndroidRuntime(565):  at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
05-06 11:27:23.043: E/AndroidRuntime(565):  at android.view.LayoutInflater.createView(LayoutInflater.java:466)
05-06 11:27:23.043: E/AndroidRuntime(565):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:565)
05-06 11:27:23.043: E/AndroidRuntime(565):  ... 20 more 
```

哪里有问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T11:53:05.807

也许 xml mapview 中的这一行使其失败：

```
xmlns:android="http://schemas.android.com/apk/res/android" 
```

# java - 自定义布局与其他布局 TextView 交互

> ID：10470227
> 
> 赞同：0
> 
> 时间：2012-05-06T11:41:38.200
> 
> 标签：java, android, xml

我有一个如下所示的自定义布局，我想从该布局文件中更新 TextViews 文本。但是 TextView 根本不在布局文件中。

抱歉，我不知道如何正确描述我正在实施的内容。如果有人甚至可以就正确的术语提出建议，那将不胜感激。

基本上，当单击从 com.grogorian.android.control.MinutePicker 膨胀的按钮时，我想将 TextView 从 AM 更改为 PM。我在 com.grogorian.android.control.MinutePicker 中使用下面的 java，但不断得到一个空指针

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:id="@+id/L"
   android:orientation="horizontal"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   android:gravity="center_vertical|center_horizontal">  
<com.grogorian.android.control.MinutePicker
        android:id="@+id/Picker2"
        android:orientation="vertical"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content">
    </com.grogorian.android.control.MinutePicker>
    <TextView android:id="@+id/AMPMIdentifier" 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="AM" /> 
```

这是Java

```
 LinearLayout L = (LinearLayout)findViewById(R.id.L);
    TextView Identifier = (TextView)L.findViewById(R.id.AMPMIdentifier);
    Identifier.setText("PM"); 
```

编辑：这是来自的代码

```
 but = new Button( context );
    but.setTextSize( TEXT_SIZE );
    but.setText( "-" );

    // Decrement once for a click
    but.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
LinearLayout L = (LinearLayout)findViewById(R.id.L);
    TextView Identifier = (TextView)L.findViewById(R.id.AMPMIdentifier);
    Identifier.setText("PM");
        }
    });
            this.setLayoutParams( new LinearLayout.LayoutParams( LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT ) );
    LayoutParams elementParams = new LinearLayout.LayoutParams( ELEMENT_WIDTH, ELEMENT_HEIGHT );

        addView( but, elementParams ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T13:31:05.527

如果我猜的话，现在您正试图在`OnCLickListener`侦听器中从您发布的布局文件中找到`LinearLayout` **L**（您可能将其用作`Activity`?! 的布局）。这将失败，因为`LinearLayout`找不到 并且对象将是`null`。如果这是您正在做的事情，请尝试另一种方法：

```
but.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
      LinearLayout parent = (LinearLayout) v.getParent(); // I assumed your MinutePicker extends LinearLayout
      LinearLayout L = (LinearLayout) parent.getParent();
      TextView Identifier = (TextView)L.findViewById(R.id.AMPMIdentifier);
      Identifier.setText("PM");
    }
}); 
```

我还没有测试过上面的代码（好吧，我什至不知道你的代码到底`MinutePicker`是如何构建的）。如果这不是问题，您可能需要添加可能获得的完整异常堆栈跟踪。

# wordpress - 使用 htaccess 重写旧站点 url

> ID：10470232
> 
> 赞同：0
> 
> 时间：2012-05-06T11:42:52.753
> 
> 标签：wordpress, apache, .htaccess, migration

我刚刚将一个网站移到了 Wordpress。

帖子的旧网站 url 看起来像这样[http://www.example.com/view-story.php?sid=437](http://www.example.com/view-story.php?sid=437) Wordpress 看起来像这样[http://www.example.com/?p=437](http://www.example.com/?p=437)

我需要将任何对旧 url 的请求重定向到新的 wordpress url。

谁能告诉我我需要在网站的 htaccess 文件中添加什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T13:05:12.223

```
RewriteEngine On
RewriteBase /

RewriteCond %{QUERY_STRING} ^sid=([0-9]+)$
RewriteRule ^view-story.php ?p=%1 [R=302,L] 
```

一旦你开始工作，将 302 更改为 301。

# asp.net - 使用 JQuery(?) 将多个值添加到列表以返回 1 个回发

> ID：10470233
> 
> 赞同：0
> 
> 时间：2012-05-06T11:43:06.567
> 
> 标签：asp.net

我有一个概念问题。我有这个 asp.net 页面来管理代码片段。现在我想在提交之前给这个片段添加标签。像你可以用stackoverflow做的事情。我想知道我应该如何去做这件事？

我想到了一个hiddentextbox，当用户从下拉列表中选择一个值时，它由jquery填充，用“;”分隔，可以在服务器端读取和分隔。但我猜这很容易被修补？

有没有合适的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T11:54:52.723

我知道您主要担心的是您的方法容易受到 sql 注入的影响。

您描述的方法非常常见且经常使用，并且本身不会导致任何 sql 注入漏洞。

这完全取决于您的服务器端代码是如何实现的。如果您将编写纯文本 sql 查询（如 var sql = "insert into mytable values(" + param1 + ")），那么您将面临 sql 注入风险。

如果您将使用带参数的 sql 命令、Linq2SQL、Entity Framework 或任何不构建 sql 查询的方法，如我上面提到的，您无需担心。

享受！

# android - 将对话框片段标题设置为从右侧显示

> ID：10470238
> 
> 赞同：8
> 
> 时间：2012-05-06T11:43:39.480
> 
> 标签：android, android-layout, dialog, titlebar

我正在用希伯来语（即 rtl）编写一个应用程序。当我为对话框片段设置标题时，它出现在左侧。我试图通过执行以下操作使其显示在右侧：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState)
{
    //set's up the title for this dialog fragment
    getDialog().getWindow().setGravity(Gravity.RIGHT);
    getDialog().setTitle(R.string.find_Address_text); 
```

但它不影响标题的位置。我怎样才能做到这一点？TNX

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-20T21:47:04.323

隐藏默认标题并在布局中制作自定义标题。

要隐藏默认标题：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setStyle(STYLE_NO_TITLE, 0); // remove title from dialogfragment
} 
```

然后使用您喜欢的样式将 TextView 添加到布局的顶部：

```
<TextView
 android:id="@+id/dialog_title"
 android:layout_width="fill_parent"
 android:layout_height="wrap_content"
 android:gravity="right|center"
 android:text="@string/dialog_title" /> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-11-11T11:57:37.557

我知道这是一个有答案的旧线程。但对于可能有相同问题的其他人：

```
@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
    Dialog dlg = super.onCreateDialog(savedInstanceState);

    dlg.setTitle("Title");
    TextView titleTextView = (TextView) dlg.findViewById(android.R.id.title);
    titleTextView.setGravity(Gravity.RIGHT | Gravity.CENTER_VERTICAL);

    return dlg;
} 
```

这样我们就有了标题栏，我们不需要自定义一个。

# javascript - HTML/JS 作为本地 SQLite 数据库的接口

> ID：10470240
> 
> 赞同：6
> 
> 时间：2012-05-06T11:44:16.840
> 
> 标签：javascript, html, sqlite, web-sql

我正在编写一个非常简单的数据库应用程序，我希望将其存储在本地（而不是查找远程数据库）。我喜欢用 HTML/Javascript 来设计界面，而且它们是跨平台的（每个人都有浏览器！），所以我真的很想写一个网页作为前端。不应涉及客户端/服务器交互 - 我只希望用户能够使用浏览器而不是本机程序与数据库交互。

但是，我可以看到从浏览器访问数据库的唯一方法是使用 WebSQL 或 IndexedDB 之类的东西。然而，这两者都抽象出管理数据库文件本身的过程，并将其存储在用户设置中的某个地方。我想将数据库文件本身与应用程序一起分发。

简而言之：有没有办法使用 HTML/Javascript 来修改本地 SQLite 数据库文件？还是 HTML 不是我应该用于此类应用程序的工具？

*编辑：* [可能相关](https://stackoverflow.com/questions/877033/how-can-i-create-an-local-webserver-for-my-python-scripts)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T22:07:09.113

这就是我最终做的事情：

[如此处](https://stackoverflow.com/questions/877033/how-can-i-create-an-local-webserver-for-my-python-scripts)所述，您可以使用 Python 创建本地 Web 服务器。[本](http://fragments.turtlemeat.com/pythonwebserver.php)教程提供了服务器处理程序的基本基础结构。我不得不处理一些问题，可能是由 Python 3 或使用 Chrome 访问我的本地页面引起的。

我的 GET 处理函数最终看起来像这样：

```
def do_GET(self):
    try:
        self.send_response(200)
        self.send_header('Content-type', 'text/html')
        self.send_header('Access-Control-Allow-Origin', '*')
        self.end_headers()
        try:
            fn = GETHANDLERS[self.path[1:]]
            self.wfile.write(fn().encode("utf-8"))
        except KeyError:
            self.wfile.write(self.path.encode("utf-8"))
        return
    except:
        self.send_error(404, 'File Not Found: {0}'.format(self.path)) 
```

将 URL 映射到函数的字典在哪里`GETHANDLERS`- 例如，如果您访问`http://localhost/my_func`，`GETHANDLERS['my_func']`则调用该函数。如果该 URL 不存在任何函数，则该 URL 只是回显。

我已经实现了使用该`sqlite3`模块操作本地 SQLite 数据库的函数。以下是列出表中所有内容的查询示例`Categories`：

```
import sqlite3

def get_categories():
    con = sqlite3.connect('my.db')
    c = con.cursor()
    c.execute('''SELECT * FROM Categories;''')
    return [cat[0] for cat in c.fetchall()]

GETHANDLERS["categories"] = get_categories 
```

要使用本地应用程序，用户需要安装 Python，然后在打开网页之前运行服务器脚本。我认为这是可以接受的！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T12:00:45.687

如果你真的只想要一个客户端应用程序，你真的应该考虑使用 HTML5 技术（WebSQL，Indexed DB）。一个很好的阅读在这里：[html5医生](http://html5doctor.com/introducing-web-sql-databases/)。您需要将数据库导出到某个地方，或者让用户导出数据库，当用户重新加载页面时，数据库应该重新连接。示例：[将 websql 导出到 csv 文件](https://stackoverflow.com/questions/9182743/how-to-export-web-sql-to-a-csv-file)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T00:04:10.887

您可以使用 sqlite3 连接器并从 HTA 应用程序连接到本地数据库文件。

这是连接器（必须按照页面上的说明注册 dll）

[https://www.assembla.com/spaces/litex/documents](https://www.assembla.com/spaces/litex/documents)

检查 zip 文件中的 HTA Demo App（DLL 在 \litex\bin 文件夹中，hta 在脚本文件夹中..）

# css - 如何相对于页面底部定位页脚/元素？

> ID：10470241
> 
> 赞同：3
> 
> 时间：2012-05-06T11:44:31.740
> 
> 标签：css, sticky-footer, css-position

我试图将页脚放在页面底部，但收效甚微。

我只能粘贴链接，因为那里有很多 CSS，我不确定我的问题出在哪里。

所以这是链接：[Test](http://rolandgroza.com/projects/roland/) ; 如果有人愿意帮助我，我将不胜感激。

**编辑**：这个问题是旧的，网址不再存在，但是当个人需要将页脚（或任何其他元素）定位到页面底部（所谓的*粘性页脚*）时，答案可能被认为是有效的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-05-03T09:49:15.290

I have actually used [this](http://getbootstrap.com/examples/sticky-footer/) solution lately. It works very well. And if you have dynamic content inside the footer you can easily make a script which on resize or orientation change changes the height of the footer and the margin on the body.

```
html {
    position: relative;
    min-height: 100%;
}

body {
    margin-bottom: 100px;
}

footer {
    position: absolute;
    bottom: 0;
    width: 100%;
    height: 100px; //same height as the margin to the bottom of the body
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T11:49:22.970

```
#footer {
      margin-top: -50px;
} 
```

从 #footer {} 定义中删除它。此外，由于您希望它是相对的，因此您必须增加页脚上方 div 的高度，直到它到达屏幕的末尾。否则，您将不得不使用绝对定位。

编辑：还从#footer 中删除“位置：相对”

编辑2：发布我在萤火虫上看到的所有定义。

```
footer {
    background-image: url("http://rolandgroza.com/projects/roland/assets/less/../gfx/background-light.png");
    background-position: center center;
    background-repeat: repeat;
    clear: both;
    height: 50px;
    position: relative;
    width: 100%;
}

footer {
    background-image: url("http://rolandgroza.com/projects/roland/assets/less/../gfx/background-light.png");
    background-position: center center;
    background-repeat: repeat;
    bottom: 0;
    height: 50px;
    left: 0;
    position: absolute;
    width: 100%;
}

footer {
    display: block;
} 
```

您可以使用 "display:block" 删除第一组定义和最后一组定义。如果你能在某个地方找到它们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-01T12:38:14.337

使用 css 表：

**[FIDDLE1](http://jsfiddle.net/danield770/sX9Nk/)** - 内容很少

**[FIDDLE2](http://jsfiddle.net/danield770/sX9Nk/3/)** - 小内容 + 大页脚

**[FIDDLE3](http://jsfiddle.net/danield770/sX9Nk/4/)** - 大量内容

## 标记

```
<header class="row">header content</header>
<div class="row">content here</div>
<footer class="row">footer content</footer> 
```

## CSS

```
html {
    height:100%;
    width:100%;
    }
body {
    height:100%;
    width:100%;
    display:table;
    table-layout:fixed;
    margin:0 auto;
    }
.row {
    display:table-row;
    background:orange
}
div.row {
    height:100%;
    background:pink
} 
```

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-05-06T11:49:10.240

尝试添加

```
.footerClass {
     position:absolute;
     bottom:0;
} 
```

到您的 css 文件并将类 footerClass 添加到您的页脚标签

# canvas - PlayN 中的像素级图形

> ID：10470242
> 
> 赞同：0
> 
> 时间：2012-05-06T11:44:41.327
> 
> 标签：canvas, playn

我想在主要目标是 HTML5 的 PlayN 游戏上做像素级图形。但是，PlayN 的[`Canvas`](http://docs.playn.googlecode.com/git/javadoc/index.html)对象不提供对[`CanvasPixelArray`](https://developer.mozilla.org/En/HTML/Canvas/Pixel_manipulation_with_canvas)类或`putImageData`和`getImageData`函数的访问。我担心[`drawPoint`](http://docs.playn.googlecode.com/git/javadoc/playn/core/Canvas.html#drawPoint%28float,%20float%29)每个像素的使用会很慢；有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T04:32:41.537

PlayN 目前没有像素操作 API。

如果您只想针对 HTML5，您可以使用 GWT 方法创建和操作 ImageData 对象，然后通过我最近添加的用于转换图像的机制将它们注入 PlayN。

```
// use this canvas and context to create as many image data objects as you want
CanvasElement canvas = Document.get().createElement("canvas").<CanvasElement>cast();
Context2d ctx = canvas.getContext2d();
final ImageData data = ctx.createImageData(width, height);
// push those pixels

// use this PlayN image as a factory for creating PlayN images from your ImageData objects
CanvasImage image = PlayN.graphics().createImage(1, 1); // dummy image
Image pixelImage = image.transform(new HtmlBitmapTransformer() {
  public ImageElement transform(ImageElement elem) {
    // we ignore the element passed in and just create a new CanvasElement
    // and draw our bitmap data on it
    CanvasElement canvas = Document.get().createElement("canvas").<CanvasElement>cast();
    canvas.setWidth(width);
    canvas.setHeight(height);
    canvas.getContext2d().putImageData(data, 0, 0);
    return canvas;
  }
}); 
```

这有点骇人听闻。在某个时候，我将添加一种机制来获取和操作图像的像素数据，该机制与支持它的后端一样快。

# java - 如何从消息数组中删除项目

> ID：10470243
> 
> 赞同：0
> 
> 时间：2012-05-06T11:44:55.173
> 
> 标签：java, android, arrays, message

我知道这一定是一个简单的问题。但我找不到任何解决方案。我有一个消息数组；

```
Message[] messages; 
```

它有 9 项，我想在单击按钮时删除其中一项。但我找不到任何删除或删除功能。

我想做的是：

```
messages[1].remove; 
```

或者

```
messages.remove(1); 
```

然后我的数组有 8 个项目。我正在开发 Eclipse-Android。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T11:56:26.360

```
public static Message[] removeFromArray(Message[] array, int index)
{
    int length = array.length;
    if(index < 0 || index >= length) return array;

    Message temp = new Message[length - 1];
    int counter = 0;
    for(int i = 0; i < length; i++)
    {
        if(i == index) continue;
        temp[counter++] = array[i];
    }
    return temp;
}

// ...

Message[] messages = getMessageArraySomeHow();
messages = removeFromArray(messages, 1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T11:50:31.930

您可以为消息使用 ArrayList 而不是数组吗？在这种情况下，您可以使用[ArrayList.remove(index)](http://developer.android.com/reference/java/util/ArrayList.html#remove%28int%29)方法。

前任：

```
ArrayList<Message> messages = new ArrayList<Message>();
messages.remove(1); 
```

如果默认情况下不能使用 Arraylist，

```
ArrayList<Message> messageList = new ArrayList(Arrays.asList(messages));
messageList.remove(1); 
```

# c# - 无法更改图片框的背景图片

> ID：10470244
> 
> 赞同：0
> 
> 时间：2012-05-06T11:44:58.297
> 
> 标签：c#, winforms, image, picturebox

当我将鼠标悬停在图片框中时，我正在尝试更改图片框中的图像。我正在使用带有 Windows 窗体的 Visual c# 2010 express。

这是我目前拥有的基本代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {

        }

        private void pbMV_MouseHover(object sender, EventArgs e)
        {
            pbMV.BackgroundImage = My.Resources.mvhov;
            tbname.Text = "Hello";

        }

        private void pbMV_MouseLeave(object sender, EventArgs e)
        {
            tbname.Text = "";
        }

    }
} 
```

在下一行中，它给了我一个关于使用`My`.

```
pbMV.BackgroundImage = My.Resources.mvhov; 
```

> 当前上下文中不存在名称“我的”

那么当我将鼠标悬停在图片框上时，我在尝试更改图片框的背景图像时做错了什么？

抱歉，如果这看起来也很基本，我对 c# 几乎一无所知。] 谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T11:47:07.203

C# 没有 VB.Net 的`My`关键字。

相反，您可以`Resources`直接访问该类：

```
Properties.Resources.SomeResourceName 
```

# php - reCaptcha 显示错误同一页面

> ID：10470245
> 
> 赞同：0
> 
> 时间：2012-05-06T11:45:18.353
> 
> 标签：php, recaptcha

如何在同一页面中显示错误？

我的表单页面

```
<form id="freeform" method="post" action="/wp-content/themes/ecobiz/teklif.php" onsubmit="return validate_form(this)">
...
<?php
          require_once(ABSPATH. '/wp-content/themes/ecobiz/recaptchalib.php');
          $publickey = "6LeZGdESAAAAAOhZ0SRqLWXcq4TauDK9CUoZhNP8"; // you got this from the signup page
          echo recaptcha_get_html($publickey);
        ?>
....
</form> 
```

teklif.php

```
if (!$resp->is_valid) {
    // What happens when the CAPTCHA was entered incorrectly
    die ("The reCAPTCHA wasn't entered correctly. Go back and try it again." .
         "(reCAPTCHA said: " . $resp->error . ")");
  } 
```

上面的 die 出现了 teklif.php，它看起来很奇怪。我希望模具消息显示在表单页面中，我的意思是同一页面。有什么解决办法吗？（对不起我的英语不好。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T11:51:47.523

将 php 代码放在页面顶部，并将表单元素的 action 属性留空。

例如

```
<?php
require_once(ABSPATH. '/wp-content/themes/ecobiz/recaptchalib.php');
$publickey = "6LeZGdESAAAAAOhZ0SRqLWXcq4TauDK9CUoZhNP8";
//If form is submitted
if(isset($_POST['submit']) {
    if (!$resp->is_valid) {
    // What happens when the CAPTCHA was entered incorrectly
    die ("The reCAPTCHA wasn't entered correctly. Go back and try it again." .
         "(reCAPTCHA said: " . $resp->error . ")");
  }
}
?> 
```

我假设您有一个`input="submit"`name 属性设置为“提交”。现在将此代码放在下面。

```
<form id="freeform" method="post" action="" onsubmit="return validate_form(this)">
    <?php echo recaptcha_get_html($publickey); ?>
</form> 
```

# c++ - 继续中止下载？

> ID：10470246
> 
> 赞同：2
> 
> 时间：2012-05-06T11:45:25.587
> 
> 标签：c++, windows, winapi, http, wininet

我很少有在慢速 Internet 连接网络上运行的 PC + 他们使用 VPN，因此连接变得非常慢。我有自己的应用程序，必须通过 HTTP 从外部服务器下载更新，但如果更新大约为几 MB，则不会下载。所以我要问的是如何实现下载方法，以便在连接中止时可以恢复下载。

我在 Windows、C++ 上编写代码，如果我可以使用 WinAPI 实现这一点，那就太好了。

我认为internet explorer 有这个功能，所以必须用WININET 来实现。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-06T12:29:27.137

HTTP 恢复有点用词不当，因为连接通常在下载“暂停”时终止，然后在恢复时发出新请求。

然后新请求包含范围规范，因此服务器只发送整个请求文件的一部分。

通常你会首先发出一个 HEAD 请求来获取整个文件大小。

**要求**

```
HEAD /big_file.zip HTTP/1.1
Host: www.example.com 
```

**回复**

```
HTTP/1.0 200 OK
Accept-Ranges: bytes
Content-Length: 2000000
Content-Type: application/zip 
```

然后您可以发送这样的请求，仅下载 1,000,000 到 2,000,000 的字节（如果您的第一次下载停止在 1,000,000 字节）：

**要求**

```
GET /big_file.zip HTTP/1.1
Host: example.com
Range: bytes=1000000,2000000 
```

**回复**

```
HTTP/1.0 206 Partial Content
Accept-Ranges: bytes
Content-Length: 1000000
Content-Range: bytes 1000000-2000000/2000000
Content-Type: image/jpeg

... 
```

那将是一般原则。您可以使用 cUrl、Windows 套接字在 C++ 中实现它`boost::asio`……有许多不同的方法和许多好的教程。

# java - Hibernate 标准和 NULL

> ID：10470248
> 
> 赞同：0
> 
> 时间：2012-05-06T11:45:41.333
> 
> 标签：java, hibernate

我正在构建一个休眠标准，它将获取所有具有有效合同日期的公寓。公寓和合同之间存在一对一的关系。它们没有嵌入。合同不是强制性的，因此公寓可能没有合同。合同有开始和结束日期，但它们不是强制性的，因此其中一个或两个可能为 NULL。

*   如果没有合同，则意味着该公寓有永无止境的合同。
*   如果合约开始为NULL，则表示合约从天开始就持续
*   如果合约结束为NULL，则合约永久有效。

基本上我正在向我的 DAO 发送一个整数。整数表示年份。DAO 应返回该年某个时间有效/有效的所有公寓。这意味着它应该返回：

*   所有没有合同的公寓
*   startDate 早于或等于今年的所有公寓，并且 NULL 作为 endDate
*   endDate 等于或晚于今年的所有 Appartments，并且 startDate 为 NULL
*   startDate 等于或早于今年和 enddate 等于或晚于今年的所有公寓。

到目前为止，我不确定如何处理 NULL。以及如何将年份与日期字段进行比较。任何帮助将不胜感激。

我已经做到了这一点：

```
DetachedCriteria criteria = DetachedCriteria.forClass(Appartment.class)
    .setFetchMode("contract", FetchMode.JOIN)
    .createAlias("contract", "c")
    .add(Restrictions.le("c.startDate", ????))
    .add(Restrictions.ge("c.endDate", ????)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T11:49:28.247

至于 null，您需要使用显式[`NullExpression`](http://www.dil.univ-mrs.fr/~massat/docs/hibernate-3.1/api/org/hibernate/criterion/NullExpression.html)标准，就像您编写直接 SQL 时会使用的那样。

# visual-c++ - libjpeg 在没有消息的情况下死亡

> ID：10470251
> 
> 赞同：0
> 
> 时间：2012-05-06T11:46:11.863
> 
> 标签：visual-c++, opengl, encoding, jpeg, libjpeg

我正在尝试使用 libjpeg 从 opengl 缓冲区保存屏幕截图。

我使用的功能是这个

```
void OnKeyPress(unsigned char key, int x, int y) {
  if (key != static_cast<unsigned char>('p'))
    return;

  int width = g_current_width;
  int height = g_current_height;
  boost::scoped_array<boost::uint8_t> buffer(new boost::uint8_t[3 * width * height]);

  glReadBuffer(GL_FRONT);
  glReadPixels(0, 0, width, height, GL_RGB, GL_UNSIGNED_BYTE,
              reinterpret_cast<GLvoid *>(buffer.get()));
  glReadBuffer(GL_BACK);

  FlipImage(buffer.get(), width, height);

  // Generate a BMP files for testing purposes
  SaveRGB("screenshot.bmp", buffer.get(), width, height);

  boost::shared_ptr<FILE> outfile(fopen("screenshot.jpeg", "wb"), fclose);
  if (!outfile)
    return;

  jpeg_compress_struct cinfo;
  jpeg_error_mgr jerr;
  cinfo.err = jpeg_std_error(&jerr);
  jerr.trace_level = 10;
  jpeg_create_compress(&cinfo);
  jpeg_stdio_dest(&cinfo, outfile.get());

  cinfo.image_width = width;
  cinfo.image_height = height;
  cinfo.input_components = 3;
  cinfo.in_color_space = JCS_RGB;
  jpeg_set_defaults(&cinfo);

  jpeg_set_quality(&cinfo, 100, true);
  jpeg_start_compress(&cinfo, true);
  int row_stride = width * 3;
  JSAMPROW row_pointer[1];
  int counter = 0;
  std::cout << boost::format("height: %d\n") % height;
  boost::uint8_t *r_buffer = buffer.get();
  while (cinfo.next_scanline < cinfo.image_height) {
    row_pointer[0] = &r_buffer[cinfo.next_scanline * row_stride];
    jpeg_write_scanlines(&cinfo, row_pointer, 1);
    std::cout << boost::format("current line: %d\n") % (counter++);
  }
  jpeg_finish_compress(&cinfo); // never reaches this point
  outfile.reset();
  jpeg_destroy_compress(&cinfo);
} 
```

此函数启动，但经过一些迭代（大约 100 – 150 次）后，该函数返回时不会在文件中写入任何内容，也不会生成警告或错误。

如果我使用内存编码（这实际上是我需要的），函数完成，但结果没有意义。此外，任何释放缓冲区的尝试都会出错。这是内存目标版本

```
void OnKeyPress(unsigned char key, int x, int y) {
  if (key != static_cast<unsigned char>('p'))
    return;

  int width = g_current_width;
  int height = g_current_height;
  boost::scoped_array<boost::uint8_t> buffer(new boost::uint8_t[3 * width * height]);

  glReadBuffer(GL_FRONT);
  glReadPixels(0, 0, width, height, GL_RGB, GL_UNSIGNED_BYTE,
              reinterpret_cast<GLvoid *>(buffer.get()));
  glReadBuffer(GL_BACK);

  FlipImage(buffer.get(), width, height);

  // Generate a BMP files for testing purposes
  SaveRGB("screenshot.bmp", buffer.get(), width, height);

  jpeg_compress_struct cinfo;
  jpeg_error_mgr jerr;
  cinfo.err = jpeg_std_error(&jerr);
  jerr.trace_level = 10;
  jpeg_create_compress(&cinfo);
  boost::uint8_t *jpeg_buffer_raw = NULL;
  unsigned long outbuffer_size = 0;
  jpeg_mem_dest(&cinfo, &jpeg_buffer_raw, &outbuffer_size);

  cinfo.image_width = width;
  cinfo.image_height = height;
  cinfo.input_components = 3;
  cinfo.in_color_space = JCS_RGB;
  jpeg_set_defaults(&cinfo);

  jpeg_set_quality(&cinfo, 100, true);
  jpeg_start_compress(&cinfo, true);
  int row_stride = width * 3;
  JSAMPROW row_pointer[1];
  int counter = 0;
  std::cout << boost::format("height: %d\n") % height;
  boost::uint8_t *r_buffer = buffer.get();
  while (cinfo.next_scanline < cinfo.image_height) {
    row_pointer[0] = &r_buffer[cinfo.next_scanline * row_stride];
    jpeg_write_scanlines(&cinfo, row_pointer, 1);
    std::cout << boost::format("current line: %d\n") % (counter++);
  }
  jpeg_finish_compress(&cinfo);
  jpeg_destroy_compress(&cinfo);
  std::ofstream jpegfile("screenshot.jpg");
  jpegfile.write(reinterpret_cast<const char*>(jpeg_buffer_raw), outbuffer_size);
  jpegfile.flush();
  // calling free(jpeg_buffer_raw); or delete[] jpeg_buffer_raw; generates an error
} 
```

此函数生成以下 jpeg 图像：

![在此处输入图像描述](../Images/adbae50f77a166e278dc2d484a4f066e.png)

相比之下，保存位图文件的行会生成这个：

![在此处输入图像描述](../Images/c9dd97eee7e3d83faf0cb085b638b2d1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T06:48:28.567

我发现问题在于`FILE *`处理程序不能跨 dll 移植。使用静态版本的库解决了这个问题。

内存版本可以通过像这样打开文件来解决：

```
std::ofstream jpegfile("screenshot.jpg", std::ios_base::out | std::ios_base::binary); 
```

# java - 无法修改 ArrayList 元素

> ID：10470254
> 
> 赞同：0
> 
> 时间：2012-05-06T11:47:03.737
> 
> 标签：java, arraylist

我正在创建一个由多个作者撰写的文章的数据库，所以我有两个类：作者和文章。Article 的构造函数是

```
 Article(String title, String venue, Author[] authors, long year). 
```

Author 对象包含一个带有作者姓名的字符串和一个他撰写的文章的 ArrayList。

所以，我有一个文章数组，我正在尝试创建一个作者数组列表并添加他们写的所有文章。

这是我的代码：

```
for(int i=0; i<allarticles.length; i++) {
            Author[] tempauthors = allarticles[i].getAuthors();
            for (int j=0; j<tempauthors.length; j++) {
                Author tempauthor = tempauthors[j];
                if (authors.contains(tempauthor)) {
                    Author oldAuthor = authors.get(authors.indexOf(tempauthor));
                    if (!oldAuthor.hasArticle(allarticles[i]))
                        oldAuthor.addArticle(allarticles[i]);
                } else {
                    if (!tempauthor.hasArticle(allarticles[i]))
                        tempauthor.addArticle(allarticles[i]);
                    authors.add(tempauthor);
                }
            }
        } 
```

这是 hasArticle 方法： public boolean hasArticle(Article a) { return items.contains(a); }

我按照建议修改了 equals 方法，但现在的问题是我得到的作者有适量的文章，但第一个是重复的。我做错了什么？我也应该覆盖 Article.equals() 方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T11:49:21.790

您需要覆盖`Author.equals()`以返回`true`不同但等效的`Author`实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T12:00:43.447

除非 Author 类有自己的机制为名称相同的 Author 对象的每个实例返回相同的 Author 对象，否则代码可以正常工作。

contains() 方法不“知道”您指的是作者的名字，它只知道您询问了特定的 Author 对象是否在 ArrayList 中。

contains() 方法使用其 equals(Object a) 方法比较整个对象。两个不同的对象相等，当且仅当 equals() 方法说它们相等。对于没有显式 equals() 方法的类（继承自 Object 或您的类扩展的另一个类除外），将使用地址（指针 ...）。

因此，您必须定义“equals()”的含义。在您的情况下，如果作者的姓名相同，则两个对象是相同的。在您的情况下，这意味着 equals() 是这种方法-

```
public boolean equals(Object a) {
  if (! (a instanceof Author))
    return false;

  return this.getname().equals(((Author) a).getname());
} 
```

您的代码中似乎也有一些时髦的逻辑。您想将新文章添加到作者拥有的现有文章中。因此，您需要找到该作者的现有条目（ArrayList 中的 indexOf() 方法），获取该条目（get() 方法 ...），然后将文章添加到 ArrayList 中的 Author 对象中。

为此，您需要执行

```
Author oldAuthor = authors.get(authors.indexOf(tempauthor));
oldAuthor.addArticle(allarticles[i]); 
```

而不是您拥有的 remove / addArticle / remove 代码。

您还需要确保您没有将文章添加到您已经添加的作者的文章列表中。

# java - 需要帮助创建 hbm.xml

> ID：10470258
> 
> 赞同：0
> 
> 时间：2012-05-06T11:47:38.527
> 
> 标签：java, hibernate, orm, hbm

我是休眠的新手，我遇到了一个问题。我已经阅读了hibernate网站上的所有入门指南等，但我仍然无法提出解决方案。

我有这样的课：

```
public class ResultTree {
String attrName;
Map<String, ResultTree> valueMap;
String classValue;
int caseQuant;
Set<Map<String, String>> otherRules;

public String getAttrName() {
    return attrName;
}
public void setAttrName(String attrName) {
    this.attrName = attrName;
}
public Map<String, ResultTree> getValueMap() {
    return valueMap;
}
public void setValueMap(Map<String, ResultTree> valueMap) {
    this.valueMap = valueMap;
}
public String getClassValue() {
    return classValue;
}
public void setClassValue(String classValue) {
    this.classValue = classValue;
}
public int getCaseQuant() {
    return caseQuant;
}
public void setCaseQuant(int caseQuant) {
    this.caseQuant = caseQuant;
}
public Set<Map<String, String>> getOtherRules() {
    return otherRules;
}
public void setOtherRules(Set<Map<String, String>> otherRules) {
    this.otherRules = otherRules;
} 
```

}

像这样的类的 hbm.xml 应该如何看待？我可以自由地创建任何数据结构。

谢谢你的帮助，MM

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T23:45:16.993

在 Ranna 的解决方案的帮助下，我设法通过将其划分为两个单独的类来对类进行建模：

```
public class ResultTree {
private Long id;
private String attrName;
private Map<String, ResultTree> valueMap;
private String classValue;
private int caseQuant;
private Set<Rule> otherRules;
} 
```

和

```
public class Rule {
private Long id;
private Map<String, String> terms;
private ResultTree tree;
private String classValue;
} 
```

hbm.xml 具有以下形式：

```
 <?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
    "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
    "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<hibernate-mapping package="lib.experiment.result">
    <class name="ResultTree" table="RESULT_TREE">
        <id name="id" column="RESULT_TREE_ID" type="long" />
        <property name="attrName" type="string" column="ATTR_NAME" />
        <property name="classValue" type="string" column="CLASS_VALUE" />
        <property name="caseQuant" type="int" column="CASE_QUANT" />
        <map name="valueMap" table="RESULT_TREE_LEAF" lazy="false">
             <key column="RESULT_TREE_ID"/>
             <map-key column="ATTR_VALUE" type="string"/>
             <many-to-many class="ResultTree" />
        </map>
        <set name="otherRules" table="RULE" lazy="false">
            <key column="RESULT_TREE_ID"/>
            <one-to-many class="Rule"/>
        </set>
    </class>
    </hibernate-mapping> 
```

和

```
 <?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
    "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
    "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<hibernate-mapping package="lib.experiment.result">
    <class name="Rule" table="RULE">
        <id name="id" column="RULE_ID" type="long" />
        <property name="classValue" column="CLASS" type="string" />
        <map name="terms" table="RULE_TERM" lazy="false">
             <key column="RULE_ID"/>
             <map-key column="ATTR_NAME" type="string"/>
             <element column="ATTR_VALUE" type="string"/>
        </map>
        <many-to-one name="tree" class="ResultTree" lazy="false">
            <column name="RESULT_TREE_ID"/>
        </many-to-one>
    </class>
    </hibernate-mapping> 
```

非常感谢您的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T16:38:27.077

希望这会对你有所帮助。

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
"-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
<class name="com.ResultTree" table="result_treeid">
<meta attribute="class-description">This class contains student details.</meta>
<id name="id" type="long" column="id">
<generator class="native" />
</id>
<property name="attrName" type="string" length="100" not-null="true" column="attr_name" />
<property name="classValue" type="string" length="100" not-null="true" column="class_value" />
<property name="caseQuant" type="bigint" not-null="true" column="case_quant" />
<map role="valueMap" table="value_map">
     <key column="id"/>
     <map-key column="keyname" type="string"/>
     <element column="valuename" type="ResultTree"/>
</map>
<map role="otherRules" table="other_rules">
     <key column="id"/>
     <map-key column="keyname" type="string"/>
     <element column="valuename" type="string"/>
</map>
</class>
</hibernate-mapping> 
```

# android - parssingorg.json.JSONException：java.lang.String 类型的值无法转换为 JSONArray

> ID：10470259
> 
> 赞同：0
> 
> 时间：2012-05-06T11:48:01.990
> 
> 标签：android, json

我使用下面的代码（从 mysql 检索数据），它在 android 模拟器版本 4 中运行没有问题，但是当我在 2.1 版本中使用相同的代码时，结果出现在 logcat

这是错误：

```
 parssing error org.json.JSONException: A JSONArray text must start with '[' at character 1 of <br /> 
```

这是使用 2.2 parsingorg.json.JSONException 时的错误：java.lang.String 类型的值无法转换为 JSONArray

```
 protected Void doInBackground(Void... params) {
    MealActivity.foodList = new ArrayList<ItemInList>();     

   try
   {
        ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
        nameValuePairs.add(new BasicNameValuePair",k));
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://10.0.2.2/y.php");
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs,"UTF-8"));
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
         is = entity.getContent();
         }
    catch(Exception e)
      {
         Log.e("log_tag", "Error in http connection "+e.toString());
        }
        //convert response to string
        try{
        BufferedReader reader = new BufferedReader(new InputStreamReader(is,"utf-8"),8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
        sb.append(line + "\n");
        }
        is.close();
        result=sb.toString();

          }
        catch(Exception e)
        {
         Log.e("log_tag", "Error converting result "+e.toString());
         }

        //parsing reesult 

        try{
         Log.e("log_tag", " result before parsing " + result);

         String foodName="";
         int Description=0;

        jArray = new JSONArray(result);
        JSONObject json_data = null;

        for (int i = 0; i < jArray.length(); i++) {
         json_data = jArray.getJSONObject(i);
         if(json_data!=null ) 
          {
             foodName=json_data.getString("Food");
             Description=json_data.getInt("Calories");              
             item.setName(foodName);
             item.setDescription(Description);
             item.setSelected(false);
             MealActivity.foodList.add(item);   
             item=new ItemInList();

                            }
                         } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T13:27:37.103

好吧，我现在很确定。您的问题是您正在尝试将 jsonobject 转换为 json 数组。这个问题类似：[“A JSONArray text must start with '[' at character 1 of null”](https://stackoverflow.com/q/3085830/969325)。你应该做的只是使用 jsonobject 代替。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T14:10:12.597

以下代码和输入字符串在 2.2 上为我工作。但是，我确实必须清理您的输入字符串，因为它具有一些控制（不可见）字符。你可能想检查一下。

```
 String data = "[{\"Food\":\"\\u062a\\u0641\\u0627\\u062d \\u0628\\u062f\\u0648\\u0646 \\u0627\\u0644\\u0642\\u0634\\u0631\\u0629\",\"Protein\":\"0.27\",\"Water\":\"86.67\",\"Magnesium\":\"4\",\"Phosphorus\":\"11\",\"Sodium\":\"0\",\"Zinc\":\"0.05\",\"Vit_C\":\"4\",\"Fat_Sat\":\"0\",\"Fat_Mono\":\"0\",\"Vit_B12\":\"0\",\"Calcium\":\"5\",\"Calories\":\"48\",\"Fiber\":\"1\",\"Cholesterole\":\"0\",\"Potassium\":\"90\",\"Sugar_Tot\":\"10.1\",\"Iron\":\"0.07\",\"Folic_Acid\":\"0\",\"carbohydrates\":\"13\",\"Vit_K\":\"0.6\"}]";
    try {
      JSONArray ja = new JSONArray(data);
      Log.d("Sample", "Length:" + ja.length());
      Log.d("Sample", "Data:" + ja.get(0));
    } catch (Exception e) {
      Log.e("Sample", "Error", e);
    } 
```

输出是：

```
Length:1
Data:{"Calories":"48","Calcium":"5","Vit_K":"0.6","Food":"تفاح بدون القشرة","Phosphorus":"11","Potassium":"90","Fat_Mono":"0","Folic_Acid":"0","Cholesterole":"0","Vit_C":"4","Water":"86.67","Vit_B12":"0","Sugar_Tot":"10.1","Sodium":"0","Fat_Sat":"0","Zinc":"0.05","carbohydrates":"13","Magnesium":"4","Iron":"0.07","Fiber":"1","Protein":"0.27"} 
```

# php - jQuery/CSS 中静态 Div 框的困惑？

> ID：10470262
> 
> 赞同：1
> 
> 时间：2012-05-06T11:48:31.397
> 
> 标签：php, jquery, css

我想制作一个在向下滑动时变为静态的 div，然后继续向上滑动。

我的 CSS 是

```
<style type="text/css">
#idletimeout { background:#CC5100; border:3px solid #FF6500; color:#fff; font-family:arial, sans-serif; text-align:center; font-size:12px; padding:10px; position:relative; top:0px; left:0; right:0; z-index:100000; display:none; }
#idletimeout a { color:#fff; font-weight:bold }
#idletimeout span { font-weight:bold }
/*#hiddenContent { background:#CC5100; border:3px solid #FF6500; color:#fff; font-family:arial, sans-serif; text-align:center; font-size:12px; padding:10px; position:relative; top:0px; left:0; right:0; z-index:100000; display:none; }
*/</style> 
```

div中的内容是

```
<div id="idletimeout">
You will be logged off in <span><!-- countdown place holder --></span>&nbsp;seconds due to inactivity. 
</div> 
```

在这段代码中，当超时时间到达时，我将滑块向下，当我单击一个按钮使滑块向上时，滑块向上。但这仅发生在页面顶部。因此，如果用户在下面的页面中，他将无法看到滑块消息。我希望这个滑块应该是可见的，无论用户是在页面的页脚还是页眉。但这并不总是需要可见的。我可以将**位置固定**在 css 中，但随后它将被永久固定。我希望你明白我的意思。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T12:07:21.987

您需要将元素设置为`position: fixed;`，然后使用属性设置它的位置，例如`top`.

例如：

```
.fixed {
    position: fixed;
    bottom: 10px;
    right: 10px;
} 
```

要使其基于滚动出现/消失，请使用 jQuery。

```
$(window).scroll(function() {
    if($(document).scrollTop() > 300) {
        $("#idletimeout").addClass('fixed');
    } else {
        $("#idletimeout").removeClass('fixed');
    } 
}); 
```

当您滚动超过 300 像素时，这将使框固定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T12:03:13.487

只需在 div 元素上添加 css 样式“位置：固定”，然后设置其宽度、高度和位置。

但老实说，大多数人讨厌这种广告。

# java - 使用反射创建新对象？

> ID：10470263
> 
> 赞同：27
> 
> 时间：2012-05-06T11:49:01.543
> 
> 标签：java, reflection, constructor

给定类值：

```
public class Value {

    private int xVal1;
    private int xVal2; 
    private double pVal;

    // constructor of the Value class 

    public Value(int _xVal1 ,int _xVal2 , double _pVal)
    {
        this.xVal1 = _xVal1;
        this.xVal2 = _xVal2;
        this.pVal = _pVal;
    }

    public int getX1val()
    {
        return this.xVal1;
    }

...
} 
```

我正在尝试使用以下方法创建该类的新实例`reflection`：

从主要：

```
 .... // some code 
    ....
    ....
    int _xval1 = Integer.parseInt(getCharacterDataFromElement(line));
    int _xval2 = Integer.parseInt(getCharacterDataFromElement(line2));
    double _pval = Double.parseDouble(getCharacterDataFromElement(line3));

     Class c = null;
     c = Class.forName("Value");
     Object o = c.newInstance(_xval1,_xval2,_pval);

... 
```

这不起作用，Eclipse 的输出：`The method newInstance() in the type Class is not applicable for the arguments (int, int, double)`

如果是这样，我如何创建一个新的 Value 对象使用`reflection`，我在哪里调用`Constructor`of `Value`？

谢谢

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-05-06T11:51:22.020

您需要为此找到确切的构造函数。`Class.newInstance()`只能用于调用 nullary 构造函数。所以写

```
final Value v = Value.class.getConstructor(
   int.class, int.class, double.class).newInstance(_xval1,_xval2,_pval); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-16T16:32:07.647

该`Class.newInstance()`方法只能调用无参数构造函数。如果要使用带有参数化构造函数的反射创建对象，则需要使用`Constructor.newInstance()`. 你可以简单地写

```
Constructor<Value> constructor = Value.class.getConstructor(int.class, int.class, double.class);
Value obj = constructor.newInstance(_xval1,_xval2,_pval); 
```

有关详细信息，您可以阅读[使用示例在 Java 中通过反射创建对象](https://programmingmitra.blogspot.in/2016/05/creating-objects-through-reflection-in-java-with-example.html)

# java - 使用 JPA (Hibernate) 找出包含给定记录的页面

> ID：10470273
> 
> 赞同：8
> 
> 时间：2012-05-06T11:50:20.493
> 
> 标签：java, hibernate, jpa, criteria

## **如何知道 JPA 查询中记录的位置？**

我有一个服务，它返回分页结果或多或少地实现了具有此签名的方法：

```
List<Record> getRecordsPage(long page, int pageSize); 
```

调用它时，我只需创建一个查询并进行如下配置：

```
TypedQuery<Record> query = entityManager.createQuery(criteriaQuery);
query.setFirstResult(page * pageSize);
query.setMaxResults(pageSize); 
```

这对结果进行了分页。这按预期工作，并且非常简单。

## **问题**

我的另一个要求是实现一种方法来检索包含特定记录的页面。实现具有以下签名的方法：

```
List<Record> getRecordsPage(Record record, int pageSize); 
```

此方法需要生成记录所在的正确页面。例如，对于`getRecordsPage(RECORD4, 2)`调用，考虑数据库状态：

```
1\. RECORD1 
2\. RECORD2 
3\. RECORD3 
4\. RECORD4 
5\. RECORD5 
```

返回的页面应该是 2，其中包含`[RECORD3, RECORD4]`.

该`ORDER BY`参数始终设置，并且可以是多个字段。

## **解决方案到现在**

到目前为止，我有一些解决方案是：

1.  **一点都不好，但它解决了问题：**

使用提供的查询，我只选择不分页的 id 并只执行 a`indexOf`以找到它的位置，并根据位置我可以找出记录所在的页面，然后使用`getRecordsPage(long page, int pageSize)`已经实现的执行常规过程。

1.  **不太好，因为与数据库高度耦合：**

当我使用 MySQL 时，我可以执行类似 : 的 sql `select r from (select rownum r, id from t order by x,y) z where z.id = :id`，什么会返回记录的位置，我可以使用它来调用`getRecordsPage(long page, int pageSize)`.

## ***好的解决方案***

要求：

1.  **应**支持多字段排序；
2.  给定一个查询，它将返回记录位置或包含记录的页面偏移量；

一个好的解决方案是：

1.  纯粹是JPA；
2.  *如果*在数据库中执行一个额外的查询只是为了找出记录位置，则可以；
3.  *如果在某些时候使用了休眠*就可以了（因为在这种情况下休眠落后于 JPA）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-06T12:00:46.863

为了确保我理解正确：您正在显示一个`Record`并希望显示所有记录的分页列表，以预先选择包含您的项目的页面？

首先，您必须知道关系数据库不提供数据库中记录的任何隐式排序。尽管它们似乎是从第一个添加到最后一个添加的，但这并不便携和可靠。

因此，您的分页列表/网格必须按某些列显式排序。为简单起见，假设您的网格按`id`. 您知道当前显示的记录的 ID（例如：）`X`。您首先需要确定您的记录在表中的哪个位置与此排序顺序有关：

```
SELECT COUNT(r)
FROM Record r
WHERE r.id < :X 
```

此查询将返回您的记录*之前*的记录数。现在很简单：

```
int page = count / pageSize 
```

`page`是从 0 开始的。

不幸的是，如果您的排序列不是唯一的，这可能不适用于所有情况。但是如果列不是唯一的，排序本身就不稳定（具有相同值的记录可能会以随机顺序出现），因此请考虑按额外唯一列排序：

```
...
ORDER BY r.sex, r.id 
```

在这种情况下，记录首先按`sex`（大量重复项）和 id 排序。在当前记录之前计数记录的解决方案仍然有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T03:02:50.147

鉴于赏金仍未分配，我将添加另一个答案。（这与 Tomasz Nurkiewicz 的回答非常相似，但更多地谈到了我认为棘手的部分：使`WHERE`条款正确。如果被认为不礼貌，我将删除它。）

您不需要本机查询来查找记录的位置，只需一个精心制作的`SELECT COUNT(r)`.

为了使其具体化，让我们假设该`Record`类型具有属性`foo`并且`bar`您正在使用它来进行排序（即`ORDER BY foo, bar`）。然后你想要的方法的快速和肮脏的版本看起来像这样（未经测试）：

```
List<Record> getRecordsPage(Record record, int pageSize) {
    // Note this is NOT a native query
    Query query = entityManager.createQuery(
        "SELECT COUNT(r) " +
        "FROM Record r " +
        "WHERE (r.foo < :foo) OR ((r.foo = :foo) AND (r.bar < :bar))");
    query.setParameter("foo", record.getFoo());
    query.setParameter("bar", record.getBar());
    int zeroBasedPosition = ((Number) query.getSingleResult()).intValue();
    int pageIndex = zeroBasedPosition / pageSize;
    return getRecordsPage(pageIndex, pageSize);
} 
```

有两个棘手的考虑：让`WHERE`子句完全正确，以及处理所有排序列中的“关系”。

关于`WHERE`子句，目标是计算排序“低于”给定的记录`Record`。使用一个排序列很容易：`r.foo < :foo`例如，它只是带有 的记录。

对于两个排序列，它稍微难一些，因为第一列中可能存在必须与第二列断开的“联系”。所以“较低”的记录要么有`r.foo < :foo`，要么`r.foo = :foo`AND `r.bar < :bar`。（如果有三个，那么你需要三个`OR`条件——比如`(r.foo < :foo) OR ((r.foo = :foo) AND (r.bar < :bar)) OR ((r.foo = :foo) AND (r.bar = :bar) AND (r.baz < :baz))`。）

然后在您的所有排序列中都可能存在“关系”。如果发生这种情况，那么您的寻呼机函数`getRecordsPage(long,int)`（

解决此问题的一种简单方法是按记录 ID 添加排序，以确保每次都以相同的方式打破平局。而且您想在问题中提到的两个功能中都放入相应的逻辑。这意味着`id`在查询的末尾添加，例如`ORDER BY foo,bar,id`，在寻呼机函数中，并在in 中添加另一个`OR`条件。）`WHERE``getRecordsPage(Record,int)`

# vb.net - 我在 VB.NET 中的计时器正在丢失一秒

> ID：10470276
> 
> 赞同：-1
> 
> 时间：2012-05-06T11:50:43.313
> 
> 标签：vb.net, time, timer

我使用 DateTimePicker 来选择一个 dateTime 值，看看我有多少时间直到它为零：

```
Private Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick

timeInSeconds = (DateTimePicker1.Value.Subtract(System.DateTime.Now)).ToString
                'RichTextBox1.Text = RichTextBox1.Text + vbTab + timeInSeconds.ToString
                timeInSeconds = timeInSeconds.Substring(0, timeInSeconds.LastIndexOf("."))

End Sub 
```

上面的 RichTextbox 显示我大约每 30 秒失去一秒：

```
23:59:47.4060217
23:59:46.3939638
23:59:45.3799058
23:59:44.3648477
23:59:43.3517898
23:59:42.3377318
23:59:41.3236738
23:59:40.3096158
23:59:39.2955578
23:59:38.2814998
23:59:37.2674418
23:59:36.2533838
23:59:35.2393258
23:59:34.2242677
23:59:33.2112098
23:59:32.1981518
23:59:31.1830938
23:59:30.1690358
23:59:29.1549778
23:59:28.1409198
23:59:27.1268618
23:59:26.1128038
23:59:25.0997458
23:59:24.0856878
23:59:23.0716298
23:59:22.0575718
23:59:21.0435138
23:59:20.0284558
23:59:19.0143978
**23:59:18.0013398
23:59:16.9872818** 
```

所以使用

```
timeInSeconds = timeInSeconds.Substring(0, timeInSeconds.LastIndexOf(".")) 
```

从 23:59:18 到 23:59:16

为什么呢？我做错了什么？是不是那个时候

```
(DateTimePicker1.Value.Subtract(System.DateTime.Now)).ToString 
```

发生我失去的事情？

*计时器设置为每秒钟进行一次更改。*

我该怎么做才能获得正确的结果？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T15:29:49.117

准确性会根据您正在做的事情以及同时发生的所有其他事情而变化。您可以通过每次重置间隔来纠正它。现在，当您正在执行的任务超过一秒时，这会发生故障，但它会使滴答声尽可能接近秒。

```
 Private Sub Timer1_Tick(sender As System.Object, e As System.EventArgs) Handles Timer1.Tick
     Timer1.Enabled = False

     'do your stuff here

     Timer1.Interval = 1000 - Date.Now.Millisecond
     Timer1.Enabled = True

  End Sub 
```

当我希望每分钟或每小时都发生一些事情时，我通常会使用这种技术。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T13:41:33.797

尝试不要直接附加文本，而是将结果连接到 tmp 字符串中。之后将 tmp 分配给 textbox1.text。

我遇到过这样一种情况，每次 forloop 迭代都必须修改一个文本框以显示一个十六进制字节，当我转向以前的方法时，结果令人印象深刻。

试试看。

来自评论：

```
Private Sub Timer1_Tick(ByVal sender As Object, ByVal e As EventArgs) Handles Timer1.Tick
  Dim timeInSeconds = (DateTimePicker1.Value.Subtract(System.DateTime.Now)).ToString 
  'RichTextBox1.Text = RichTextBox1.Text + vbTab + timeInSeconds.ToString
  timeInSeconds = timeInSeconds.Substring(0, timeInSeconds.LastIndexOf("."))
  TextBox1.Text &= timeInSeconds & vbNewLine
End Sub 
```

我在 1000 毫秒计时器中测试了这段代码，没有问题。

# ajax - Ajax 联系我们 表单验证 - Cakephp 2.0

> ID：10470277
> 
> 赞同：0
> 
> 时间：2012-05-06T11:50:47.343
> 
> 标签：ajax, jquery, cakephp-2.0, cakephp-ajaxhelper

我有一个网站[http://1008designs.in/](http://1008designs.in/)在主页上我建立了一个查询表单，表单通常验证工作正常，但我需要 Jquery 和 Ajax 验证，表单提交到“查询/添加” ，请帮助我了解如何在 cakephp 2.0 中使用 Jquery Ajax，我浏览了 Andrew Perkins 的视频，但它对我不起作用。如果我提交表单，那么整个主页都会显示在该 Inquiry Div 上。我从一个星期开始尝试，但没有工作，请尽快帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T09:26:35.793

当您使用 ajax 向控制器提交表单时，`enquiry/add`通过 ajax 请求返回的 html 是与 this 关联的视图`enquiry/add`。如果要自定义此 html，则必须修改`add`控制器中的操作：

在动作结束时试试这个：

```
if($this->request->is('ajax'))
{
    $this->autoRender = false;
    $this->render('/elements/enquiry_success');
} 
```

在 app/view/elements/ 添加 enquiry_success.ctp 包含一些 html/php 代码，这些代码将返回到#succces div（例如`<p>Enquiry added!!!</p>`）。

此代码检测请求是否为 ajax 和 id，它不呈现默认视图以执行操作，而是呈现某些元素。

# php - Kohana ORM：如何查询基于数据库中的字段计算的时间戳

> ID：10470281
> 
> 赞同：0
> 
> 时间：2012-05-06T11:51:44.457
> 
> 标签：php, mysql, datetime, orm, kohana

简单表：

```
start_date       TIMESTAMP
duration_days    INT 
```

In English: 我只想要那些没有经过他们的`duration`时期的行。

在 SQL 中：

```
SELECT * FROM MyTable WHERE now() < TIMESTAMPADD(DAY, duration_days, start_date); 
```

我如何在 Kohana/ORM 中做到这一点？对于我需要检索的许多行中的每一行，持续时间都不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T12:37:19.780

只需使用一个`where()`子句：

```
ORM::factory('MyTable')->where(DB::expr('now()'), '<', DB::expr('TIMESTAMPADD(DAY, duration_days, start_date)'))->find_all(); 
```

# android - 从 Android 应用程序检测/监听 MySQL 数据库更改的最简单方法是什么？

> ID：10470284
> 
> 赞同：3
> 
> 时间：2012-05-06T11:52:13.600
> 
> 标签：android, mysql

我的问题已在标题中说明。

进一步来说？在我的 MySQL 数据库中，我有一个表“事件”，每次添加/删除事件时，我都想更新我的 android 应用程序上的地图上的点。

如果可能的话，教程或代码示例也将非常有用，因为我还是新手并正在探索 Android。

赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T12:45:47.407

您可以使用 C2DM 通知您的 Android 应用程序有关服务器上的数据库更改：

[https://developers.google.com/android/c2dm/](https://developers.google.com/android/c2dm/)

**更新**

> 重要提示：C2DM 已于 2012 年 6 月 26 日正式弃用，并于 2015 年 10 月 20 日完全关闭。鼓励现有 C2DM 开发人员迁移到 Google Cloud Messaging (GCM)。有关更多信息，请参阅 C2DM 到 GCM 迁移文档。开发人员必须使用 GCM 进行新的开发。

现在一天 C2DM 已被弃用，因此您需要使用 Firebase 或 GCM（也已弃用）

[FCM链接](https://firebase.google.com/docs/cloud-messaging/ "FCM链接")

> Firebase 云消息传递 (FCM) 是 GCM 的新版本。它继承了可靠且可扩展的 GCM 基础架构，以及新功能！请参阅常见问题解答以了解更多信息。如果您要在新应用程序中集成消息传递，请从 FCM 开始。强烈建议 GCM 用户升级到 FCM，以便从现在和将来的新 FCM 功能中受益。

[GCM 链接](https://developers.google.com/cloud-messaging/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T12:16:58.083

所以，首先 -> Android 中没有 MySQL -> 你必须使用 SQLite 。

您将在应用程序代码的某个位置在数据库中输入数据 -> 在那里您可以调用一个函数，该函数将使用新数据刷新您的地图视图。

除此之外......如果您可以提供申请的更多详细信息，那么可能有人可以帮助您。

# regex - 在正则表达式中排除字符串

> ID：10470285
> 
> 赞同：0
> 
> 时间：2012-05-06T11:52:20.713
> 
> 标签：regex, string, search

我有一个很长的文本，我需要在其他两个词之间隔离一个词。

这是我所拥有的文字的一部分：

```
2012-05-05 19:31:44 status config-files gwibber-service 3.4.0-0ubuntu4
2012-05-05 19:31:44 status not-installed gwibber-service <none>
2012-05-05 19:31:45 status installed gir1.2-notify-0.7 0.7.5-1
2012-05-05 19:31:45 remove gir1.2-notify-0.7 0.7.5-1 <none>
2012-05-05 19:31:45 status half-configured gir1.2-notify-0.7 0.7.5-1
2012-05-05 19:31:45 status half-installed gir1.2-notify-0.7 0.7.5-1 
```

现在我想选择所有单词和数字 excpet，例如：

```
gir1.2-notify-0.7 
```

所以我用“”替换它们（实际上删除了所有其他单词和数字）。我想，有两个关键字可以用来隔离它们：“remove”和“{some numbers and .} <none>”一切必须排除它们之间...

我希望你明白了。感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T13:21:16.600

**尝试这个：**

```
(?<=remove)\s+([\w\.\-]+)\b 
```

*这不过是一种简单的`positive look-behind`方法。为了更好地理解，请访问[这里](http://www.regular-expressions.info/lookaround.html)*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T12:12:15.337

```
r"\w[\w-]*[\.]{1}\w[\w-\.]*"  /// -> it will match all strings of the form -> 
```

[一个字母数字字符][(零个或多个字母数字字符或-"-")].[一个字母数字字符][(零个或多个字母数字字符或-"- ")]

所以它会匹配girl1.2-notify-0.7，但不会匹配gwibber-service。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T12:33:35.093

我不确定我是否真的理解你的问题，但是......

使用以下正则表达式：`remove(.*)<none>$` `$1`会给你“ gir1.2-notify-0.7 ”

我认为您无法在单个语句中选择/替换除 $1 之外的所有内容，您可能必须根据正则表达式返回的结果滚动一些代码来处理。

# android - 如何在每次点击时更改按钮的图像？

> ID：10470288
> 
> 赞同：6
> 
> 时间：2012-05-06T11:53:15.073
> 
> 标签：android, button, imagebutton, xml-drawable

我`button`在`layout`. 在`Drawable`文件夹中，我创建了一个`XML file`名为`btn01_state`. `btn01_state.xml`分配给通过“ ”创建的`button`i`android:background=@drawable/btn01_state`

现在，`button`有一个默认的`image`img1。当我`click`在 上时`button`，image1 更改为 img2，一旦我松开单击的鼠标按钮，image2 再次更改为 img1。

*我想要做的是，通过每一次点击更改按钮的图像。*

例如，最初 btn01 有 img01

如果按下 btn01==> 将 btn01 的 img 设置为 img02 并保持 img02 直到再次按下 btn01。现在，btn01 上面有 img02。

按下 btn01 时，将 img01 设置为 btn01。

我希望这能更清楚地说明我想要做什么。

**btn_selector**：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:drawable="@drawable/android_blue"
      android:state_pressed="true" />
<item android:drawable="@drawable/ic_launcher"
      android:state_focused="true" />
<item android:drawable="@drawable/ic_launcher" /> 
```

**主要的.xml**

```
<Button 
    android:layout_height="wrap_content"
    android:layout_width="wrap_content"
    android:id="@+id/btn01"
    android:background="@drawable/btn01_state"/> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-06T12:42:32.740

您可以在代码中轻松完成。

```
boolean isPressed = false;
button.setOnClickListener(buttonListener);

OnClickListener buttonListener = new OnClickListener() {
    @Override
    public void onClick(View v) {
        if(isPressed)
           button.setBackgroundResource(R.drawable.icon1);
        else
           button.setBackgroundResource(R.drawable.icon2);

        isPressed = !isPressed;
   }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T12:40:18.267

简单的方法

```
btn.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
    btn.setBackgroundDrawable(getResources().getDrawable(R.drawable.locationbutton_on));
                }
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T11:57:03.047

也许在代码中制作它。在按钮上放置一个侦听器，当单击按钮时，背景会发生变化。

# objective-c - 如何在 MacOS Lion 中从 NSButton 进行拖动

> ID：10470290
> 
> 赞同：0
> 
> 时间：2012-05-06T11:53:23.347
> 
> 标签：objective-c, macos, drag-and-drop

我有 NSButton 接受拖放以将拖动的项目添加到 NSMutableArray。如何从 NSButton 拖动以拖动 NSMutableArray 中的所有项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T15:31:22.347

一种方法是使用 NSView 方法 dragImage:at:offset:event:pasteboard:source:slideBack: 开始拖动。在您的自定义按钮类中，您将覆盖 mouseDown: 并调用该方法。我写了一个示例，其中拖动的图像是按钮的图像，而我拖动的数据只是字符串“ARRAY”。这应该是你从源端需要做的所有事情——当你把它放在你的目的地时，它可以测试是否被丢弃的是字符串“ARRAY”，然后对你创建的数组做任何你想做的事情用你的第一滴。我在我的按钮中使用了 NSMultipleDocuments 图像，当我拖出按钮时我让它消失了。

```
- (void)mouseDown:(NSEvent *)theEvent {
     NSImage *pic = self.image;
     NSSize dragOffset = NSMakeSize(0.0, 0.0);
     NSPasteboard *pboard = [NSPasteboard pasteboardWithName:NSDragPboard];
    [pboard declareTypes:[NSArray arrayWithObject:NSStringPboardType]  owner:self];
    [pboard writeObjects:[NSArray arrayWithObject:@"ARRAY"]];
    NSPoint btnMiddle = NSMakePoint(self.frame.size.width/2,self.frame.size.height/2);
    NSPoint picOrigin = NSMakePoint(btnMiddle.x - pic.size.width/2, btnMiddle.y + pic.size.height/2);
    self.image = nil;
    [self dragImage:pic at:picOrigin offset:dragOffset event:theEvent pasteboard:pboard source:self slideBack:YES];
} 
```

# jquery - 设置 loader.gif 而不是文本。这可能吗？

> ID：10470291
> 
> 赞同：-4
> 
> 时间：2012-05-06T11:53:36.183
> 
> 标签：jquery, ajax

```
<?php wp_enqueue_script( 'jquery'); ?>
<script>
    jQuery(document).ready(function () {
        // ajax pagination
        jQuery('#navigation a').live('click', function () { // if not using wp_pagination, change this to correct ID
            var link = jQuery(this).attr('href');
            // #main is the ID of the outer div wrapping your posts
            jQuery('#main').html('<div><img src="images/loader.gif"></div>');
            // #entries is the ID of the inner div wrapping your posts
            jQuery('#main').load(link + ' #entry')
        });
    }); // end ready function
</script> 
```

不是只写文本，而是可以插入 loader.gif 图像吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T12:24:42.890

检查img的路径，也许那是罪魁祸首。

[http://jsfiddle.net/FS6P9/](http://jsfiddle.net/FS6P9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T12:26:49.553

具有非常稀疏的信息。我猜你得到的错误是 404，即找不到图像。如果是这种情况，我会进一步猜测您的问题在于 src 属性中缺少前导“/”。如果那不能解决它，您真的应该提供有关错误的更多信息

# ruby - 如何编写在不同系统上运行的 ruby 脚本

> ID：10470292
> 
> 赞同：1
> 
> 时间：2012-05-06T11:53:52.603
> 
> 标签：ruby, shell

我有一个 ruby​​ 脚本，它在第一行声明了 ruby​​ 路径

```
#! /usr/bin/ruby 
```

但是，我需要它在不同的系统中运行。并且Ruby的路径在不同的系统中是不同的。如何处理这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-06T11:58:28.420

在 unix 系统中，您可以侥幸逃脱

```
#! /usr/bin/env ruby 
```

这具有使用`ruby`在路径上找到的效果。 `env`是几乎每个 unix 上的核心二进制文件。

# iphone - 如何像素化 UIImage？

> ID：10470294
> 
> 赞同：0
> 
> 时间：2012-05-06T11:54:38.840
> 
> 标签：iphone, objective-c, ipad, image-processing, uiimage

是否有任何过滤器可以在 iOS 中以编程方式对图像进行像素化？

如果没有，我怎样才能以简单的方式对图像进行像素化？

谢谢。

* * *

像[iPad 上的 eBay 应用程序](http://itunes.apple.com/us/app/ebay-for-ipad/id364203371?mt=8)上的像素效果（菜单拖动打开，在左上角）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T11:57:26.633

如果你的意思是像素化，你可以看看这两个链接

[如何在 iOS 中对 UIImage 进行像素化/添加像素化效果](https://stackoverflow.com/questions/6853376/how-to-pixelize-add-pixelating-effect-to-a-uiimage-in-ios)

或者

[如何对图像执行快速像素化过滤器？](https://stackoverflow.com/questions/5049041/how-do-i-perform-a-fast-pixellation-filter-on-an-image)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-23T22:00:36.837

如何使用`Core Image`名为的过滤器`CIPixellate`？[我在如何对图像执行快速像素化过滤器的](https://stackoverflow.com/questions/5049041/how-do-i-perform-a-fast-pixellation-filter-on-an-image)[答案](https://stackoverflow.com/a/29835046/1978096)中发布了代码片段？

# android - Android - 动态的，不集中的复选框看起来不正确

> ID：10470296
> 
> 赞同：1
> 
> 时间：2012-05-06T11:54:57.657
> 
> 标签：android, layout, checkbox, drawable

我想将自定义设计的复选框添加到对话框中。Dialogs 视图设置为 TableLayout 并且行数是动态的。普通复选框太大，所以我创建了具有不同状态可绘制对象的自定义选择器（checkbox.xml）：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:state_checked="true" android:state_focused="true"
      android:drawable="@drawable/checkbox_on_background_focus_yellow"/>
<item android:state_checked="false" android:state_focused="true"
      android:drawable="@drawable/checkbox_off_background_focus_yellow"/>
<item android:state_checked="false" android:drawable="@drawable/checkbox_off_background"/>
<item android:state_checked="true" android:drawable="@drawable/checkbox_on_background"/> 
```

并将其添加到我的自定义复选框构造函数中：

```
 setButtonDrawable(R.drawable.checkbox); 
```

如果复选框具有焦点，一切似乎都可以正常工作，但外观不会退回到默认布局：

![在此处输入图像描述](../Images/16d6a4cfb5807b2d6010dbedf1466c71.png)

我已经在使用 xml 并切换/添加了一些状态，但似乎没有任何效果。

我该如何解决这个问题，以便在复选框没有焦点并且表格单元格中的内容没有默认复选框大的情况下使用我的图像？

在此先感谢，丹尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T13:15:19.043

这是 Google 提供的用于按钮类型图像的 drawable.xml，但它确实包含一些您可能缺少的其他状态信息。也许你可以试试这个。

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:drawable="@drawable/appwidget_bg_pressed" android:state_pressed="true" />
<item android:drawable="@drawable/appwidget_bg_focused"
    android:state_focused="true"
    android:state_enabled="true"
    android:state_window_focused="true" />
<item android:drawable="@drawable/appwidget_bg" /> 
```

# ios - 带有奇怪语言的 Facebook iOS SDK Feed 对话框确认按钮

> ID：10470299
> 
> 赞同：2
> 
> 时间：2012-05-06T11:55:36.470
> 
> 标签：ios, facebook, facebook-wall

我的 iOS 原生应用程序正在使用 Facebook Feed Dialog 发布到用户的墙上。但是对话框按钮是未知语言而不是英语。请参阅下面的屏幕截图：

“盖里”“桑巴扎”？

如何强制按钮为英文？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T23:59:14.817

I've had a user report the same issue. Looks like it's a problem on Facebook's side:

[https://developers.facebook.com/bugs/407246299295529?browse=search_4fa410ea79db26337556383](https://developers.facebook.com/bugs/407246299295529?browse=search_4fa410ea79db26337556383)

# java - Java 播放 mp3 和 ogg

> ID：10470303
> 
> 赞同：5
> 
> 时间：2012-05-06T11:56:47.937
> 
> 标签：java, mp3, ogg

经过无数小时的搜索和阅读大量源代码后，我陷入了死胡同，我需要你的帮助。正如标题所示，我正在尝试用 Java 构建（又一个）音乐播放器。我偶然发现了[Javazoom 项目](http://www.javazoom.net/projects.html)它有点工作，但它也有点不。我的目标是能够播放 mp3 和 ogg 文件。播放 mp3 没有问题：我可以获得所有信息（ID3 标签和一般音频文件信息），我可以执行所有需要的操作（播放、暂停、恢复、搜索等）。但是当我尝试播放 ogg 文件时，我只能得到两者之一，要么我可以播放文件但没有文件信息，要么我得到所有信息但无法播放文件。我的代码基本上是 BasicPlayer 类的改进版本，我尝试通过 jlGui 播放器查看它如何与所有格式兼容，但我完全迷失在该代码中。

[我的媒体播放器代码](http://pastebin.com/i09VgECB)

这是我用来编译程序的命令：

```
javac -cp lib\jl1.0.1.jar;lib\jogg-0.0.7.jar;lib\jorbis-0.0.15.jar;liblog4j-1.2.16.jar;lib\mp3spi1.9.5.jar;lib\tritonus_share-0.3.6.jar;libvorbisspi1.0.3.jar MediaPlayer.java 
```

当我执行它时

```
java -cp .;lib\jl1.0.1.jar;lib\jogg-0.0.7.jar;lib\jorbis-0.0.15.jar;liblog4j-1.2.16.jar;lib\mp3spi1.9.5.jar;libtritonus_jorbis-0.3.6.jar;libtritonus_share-0.3.6.jar;libvorbisspi1.0.3.jar MediaPlayer d:/foo.mp3 
```

它显示信息并播放文件就好了，但是当我对 d:/foo.ogg 尝试相同时，我得到一个异常：

```
167 [main] DEBUG MediaPlayer  - Target format: PCM_SIGNED 48000.0 Hz, 16 bit, stereo, 4 bytes/frame, little-endian
Exception in thread "main" java.lang.RuntimeException: Error initializing stream: java.lang.IllegalArgumentException: Unsupported conversion: PCM_SIGNED 48000.0 Hz, 16 bit, stereo, 4 bytes/frame, little-endian from VORBISENC 48000.0 Hz, unknown bits per sample, stereo, 1 bytes/frame, 16000.0 frames/second,
    at MediaPlayer.initAudioStream(MediaPlayer.java:302)
    at MediaPlayer.open(MediaPlayer.java:663)
    at MediaPlayer.main(MediaPlayer.java:772) 
```

但是，当我随后注释第 262 行（initAudioStream() 中的 createLine() 调用）并使用相同的命令运行它时，它会显示所有文件信息，但会引发类似的异常

```
170 [main] DEBUG MediaPlayer  - Target format: PCM_SIGNED 48000.0 Hz, 16 bit, stereo, 4 bytes/frame, little-endian
Exception in thread "main" java.lang.IllegalArgumentException: Unsupported conversion: PCM_SIGNED 48000.0 Hz, 16 bit, stereo, 4 bytes/frame, little-endian from VORBISENC 48000.0 Hz, unknown bits per sample, stereo, 1 bytes/frame, 16000.0 frames/second,
    at javax.sound.sampled.AudioSystem.getAudioInputStream(Unknown Source)
    at MediaPlayer.createLine(MediaPlayer.java:362)
    at MediaPlayer.initLine(MediaPlayer.java:392)
    at MediaPlayer.startPlayback(MediaPlayer.java:483)
    at MediaPlayer.play(MediaPlayer.java:672)
    at MediaPlayer.main(MediaPlayer.java:773) 
```

然后当我将 lib\tritonus_jorbis-0.3.6.jar 添加到类路径时，它会播放 ogg 文件但不显示任何信息。

所以是的......我很困惑，真的可以使用一些帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-20T03:12:52.810

我有类似的问题，使用 mp3spi 1.9.5-1 和 vorbisspi 1.0.3-1。我必须将 tritonus-share 0.3.7-2 而不是 0.3.7-1 放入类路径，否则 vorbisspi 将无法工作。

我使用了 Maven 依赖项。完整的工作解决方案在这里： http: [//odoepner.wordpress.com/2013/07/19/play-mp3-or-ogg-using-javax-sound-sampled-mp3spi-vorbisspi/](http://odoepner.wordpress.com/2013/07/19/play-mp3-or-ogg-using-javax-sound-sampled-mp3spi-vorbisspi/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T12:44:42.450

您的问题源于播放器实现还将为流提供元数据的假设。不幸的是，许多实现从未以提供元数据为目标。

我会从播放中分离检索元数据，然后您可以使用不同的库来访问元数据。然后，您可以使用[专门处理元数据的库](http://www.jthink.net/jaudiotagger/)来独立于播放文件来解决这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-10T17:52:08.007

不幸的是，`javax.sound.sampled`jogg 的实现有几个缺点。也许您想[试一试 FFsampledSP](http://www.tagtraum.com/ffsampledsp/index.html)。它是基于 FFmpeg 的 Win 和 OSX 实现，也实现了`javax.sound.sampled`接口。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T00:13:13.710

你应该试试easyOgg：

[http://cokeandcode.com/index.html?page=libs](http://cokeandcode.com/index.html?page=libs)

# windows-phone-7 - 如何为 WP7 解析以下 JSON？

> ID：10470307
> 
> 赞同：1
> 
> 时间：2012-05-06T11:58:21.047
> 
> 标签：windows-phone-7, constraints

此外，我建议请参阅下面的链接以获取类似的线程，该线程为同一问题提供了一些解决方案。

在 Silverlight 程序中反序列化 JSON 的问题

希望它可以帮助你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T12:08:07.550

您应该使用[DataContractJsonSerializer](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.json.datacontractjsonserializer%28v=vs.95%29.aspx)进行 json 反序列化，使用[HttpWebRequest](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx)来获取数据。

这是我使用 DataContractJsonSerializer 的一段代码：

```
 //...
    if (CheckError((HttpWebResponse) webResponse)) return;

    var serializer = new DataContractJsonSerializer(typeof(Message[]), new[] { typeof(Message) });
    var stream = webResponse.GetResponseStream();
    _networkMessages = (Message[])serializer.ReadObject(stream);
    //... 
```

# vim - Vim 替换换行符

> ID：10470309
> 
> 赞同：4
> 
> 时间：2012-05-06T11:58:32.197
> 
> 标签：vim

我抵制 Vim，但现在已经屈服了。它像热刀一样处理大文件。

情况：我有一个大文本文件，我想在每行的开头和结尾放置一个竖线字符。

问题：这些 Vim 和其他变体不起作用：

```
:%s/$/|\$|
:%s/\r/|\r|
:%s/$/|\r| 
```

我怀疑解决这个问题很简单，但是搜索 Google 和 Stack 并没有帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-06T12:02:51.113

你几乎拥有它：

```
:%s/^\|$/|/g 
```

`^\|$`表示*行的开头或结尾*。在 Vim 正则表达式中，`|`“或”管道被转义。紧随其后的是`/|/g`--replace *with* *global`|`*。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-06T19:58:19.577

就个人而言，我更喜欢*“用管道字符环绕每一行”*的表现力：

```
:%s/.*/|&| 
```

在我看来，这比*“在一行的开头或结尾替换一个不存在的虚构角色”*更直观。

它还取决于更少的魔法字符 ( `^`, `$`, 引用`\|`的，它们都难以输入并且容易出错。（我的意思是，你记得引用正则表达式吗？你知道和`|`之间的区别吗？你知道一些，如果不是全部的话，其中取决于vim的“神奇配置”？））。`$``\_$`

以上都没有受到这些影响。

# hbase - HBase Java 客户端：getMaster 连接被拒绝

> ID：10470314
> 
> 赞同：1
> 
> 时间：2012-05-06T11:59:04.953
> 
> 标签：hbase

我已经在伪分布式模式下设置了一个带有 hadoop 和 hbase 的单个节点，当然也安装了 zookeeper 和 regionserver。

一切运行顺利，但是当通过 Java 客户端 API 连接到 hbase 时，我遇到了异常。

我尝试了几个小时来解决这个问题，但我做不到。我可以远程登录到 remotemachine:60000，所以这不是端口防火墙问题。日志也没有报告任何特殊情况。

（日志中的注释 debianhdfs 已正确设置为主机文件中的 IP）

> 12/05/06 19:47:27 INFO zookeeper.ClientCnxn：打开与服务器 debianhdfs/192.168.137.135:2181 的套接字连接 12/05/06 19:47:27 INFO zookeeper.ClientCnxn：与 debianhdfs/192.168 建立套接字连接。 137.135:2181，启动会话 12/05/06 19:47:27 INFO zookeeper.ClientCnxn：服务器 debianhdfs/192.168.137.135:2181 上的会话建立完成，sessionid = 0x13721c707ff002f，协商超时 = 40000 12/05/06 19:47 ：28 INFO client.HConnectionManager$HConnectionImplementation：getMaster 尝试 0 of 1 失败；不再重试。java.net.ConnectException：连接被拒绝：在 sun.nio.ch.SocketChannelImpl.finishConnect(Unknown Source) at org.apache.hadoop.net.SocketIOWithTimeout 的 sun.nio.ch.SocketChannelImpl.checkConnect(Native Method) 没有更多信息.connect(SocketIOWithTimeout.java:

在独立模式下，非伪分布式我得到以下具有相同代码的异常：

> 12/05/06 20:32:49 INFO zookeeper.ClientCnxn：打开与服务器 debianhdfs/192.168.137.135:2181 的套接字连接 12/05/06 20:32:49 INFO zookeeper.ClientCnxn：与 debianhdfs/192.168 建立套接字连接。 137.135:2181，启动会话 12/05/06 20:32:49 INFO zookeeper.ClientCnxn：服务器 debianhdfs/192.168.137.135:2181 上的会话建立完成，会话 ID = 0x1372210f8fe0004，协商超时 = 40000 12/05/06 20:32 ：49 INFO client.HConnectionManager$HConnectionImplementation：ZooKeeper 可用，但找不到活动的主位置 06 年 12 月 5 日 20:32:49 INFO client.HConnectionManager$HConnectionImplementation：getMaster 尝试 0 of 1 失败；不再重试。org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation 处的 org.apache.hadoop.hbase.MasterNotRunningException。

 `````
Configuration config = HBaseConfiguration.create();
    config.set("hbase.zookeeper.quorum", "debianhdfs"); 
        config.set("hbase.zookeeper.property.clientPort","2181");    

    HBaseAdmin.checkHBaseAvailable(config); 
````  `* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T01:44:48.167

既然你是独立运行的，为什么不先尝试使用与HBase一起运行的zookeeper呢？由于 HBase 在独立模式下管理自己的本地 zookeeper，因此使用它可能会减少遇到 bug 的机会，并且由于您需要管理的程序较少，因此您更容易解决问题。

要让 HBase 运行自己的 ZK 实例，请转到`${HBASE_HOME}/conf/hbase-env.sh`，一直滚动到底部并确保有一行`export HBASE_MANAGES_ZK=true`，或者该行被注释掉（因为默认情况下 HBase 管理自己的 ZK）``

# sql - 如何从表中找到最近的日期

> ID：10470319
> 
> 赞同：-1
> 
> 时间：2012-05-06T11:59:44.063
> 
> 标签：sql, sql-server, sql-server-2000

表格1：

```
ID  | Date

001 | 02/05/2011
001 | 02/08/2012
001 | 01/09/2012
002 | 08/02/2009
... 
```

我想为每个选择最近的日期`id`。

我试过查询：

```
Select top1 from table1 
```

预期产出

```
001 01/09/2012
002 08/02/2009
... 
```

我怎么能这样做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T12:01:06.397

```
select id, max([date]) 
from [table]
group by id 
```

# twig - 如何在树枝中组合两个字符串？

> ID：10470328
> 
> 赞同：63
> 
> 时间：2012-05-06T12:01:19.350
> 
> 标签：twig

我想做这样的事情：

```
{% set c=a+b %} 
```

其中*a*和*b*是字符串。
我该怎么做？

* * *

## 回答 #1

> 赞同：143
> 
> 时间：2012-05-06T12:03:40.037

这样做的方法是：

```
{% set c = a ~ b %} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-05-06T12:05:37.213

使用“~”运算符。这将连接你的两个字符串。“+”运算符不能用于组合字符串。

你会得到这个：

```
{% set c=a~b %} 
```

更多信息：“+”运算符：将两个对象相加（操作数转换为数字）。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-12-08T06:55:15.737

您可以使用：

{{“你好”~名字~“！” }}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-20T17:39:06.687

**{% block page %}...{% endblock %} 的更清晰示例：**

```
{% block page %}
    {% set page = page | merge({
    "title"       : branchName,
    "description" : "This description has "~branchName~" as its title"
    }) %}
    {{ parent() }}
{% endblock %} 
```

**{% block content %}...{% endblock %} 的更清晰示例：**

```
{% block content %}
    This is just a sample string for {{ branchName }} that needs no concatenation
{% endblock %} 
```

# jquery - 删除表单的动作属性

> ID：10470331
> 
> 赞同：2
> 
> 时间：2012-05-06T12:01:44.417
> 
> 标签：jquery

如何在页面加载时删除表单的操作属性操作？

我的表格是

```
<form action="process" class="TTWForm ui-sortable-disabled" method="post"
      novalidate="">

           <div id="field2-container" class="field f_100 ui-resizable-disabled ui-state-disabled">
                <label for="field2">
                     Comments
                </label>
                <textarea rows="5" cols="20" name="field2" id="field2" required="required"></textarea>
           </div>

           <div id="field3-container" class="field f_100 radio-group required ui-resizable-disabled ui-state-disabled">

                <label for="field3-1">
                     Work
                </label>

                <div class="option clearfix">
                     <input name="field3" id="field3-1" value="Needs Revisions" type="radio">
                     <span class="option-title">
                          Needs Revisions
                     </span>
                </div>

                <div class="option clearfix">

                     <input name="field3" id="field3-2" value="Fine" type="radio">
                     <span class="option-title">
                          Fine
                     </span>
                </div>

                <div class="option clearfix">
                     <input name="field3" id="field3-3" value="Unstable" type="radio">
                     <span class="option-title">
                          Unstable
                     </span>

                </div>
           </div>

           <div id="form-submit" class="field f_100 clearfix submit">
                <input value="Submit" type="submit">
           </div>
      </form> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-06T12:03:51.560

```
$(function(){
    $('form.TTWForm.ui-sortable-disabled').attr('action', '');
}); 
```

或者：

```
$(function(){
    $('form.TTWForm.ui-sortable-disabled').removeAttr('action');
}); 
```

如果要将其值更改为`foo`：

```
$(function(){
    $('form.TTWForm.ui-sortable-disabled').attr('action', 'foo');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T12:03:27.033

您可以选择表单，然后使用 jQuery 的[`.removeAttr()`](http://api.jquery.com/removeAttr/)方法删除该属性。

像这样的东西：

```
// Wait for the document to be ready
$(function(){
   // Remove the attribute from the form
   $("form.TTWForm.ui-sortable-disabled").removeAttr("action");
}); 
```

# java - JTabbedPane 如何判断那个用户左标签？

> ID：10470340
> 
> 赞同：3
> 
> 时间：2012-05-06T12:03:38.673
> 
> 标签：java, swing, user-interface, jtabbedpane

我想知道，如果可以确定，该用户离开了某个标签。例如，我们有 2 个标签：“omg”和“lol”。当前选项卡是 omg。我想知道用户从“omg”切换到“lol”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T12:09:55.863

通过向 中添加更改侦听器，`JTabbedPane`您将知道选项卡选择何时更改。

更新：添加标签索引跟踪

```
tabbedPane.getModel().addChangeListener(new ChangeListener() {
    int lastTabIndex = -1;
    public void stateChanged(ChangeEvent e) {
         int newIndex = tabbedPane.getSelectedIndex();
         if (lastTabIndex == 1 && newIndex == 2) { //or whatever check/combination of checks you would like
             //switched from tab 1 to tab 2!
         }

         //or just check for leaving tab 1
         if (lastTabIndex == 1) {
             //left tab 1!
         }

         //etc

         lastTabIndex = newIndex;
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T12:55:17.970

我没有用于此的源代码，但我很确定我所做的是扩展 JTabbedPane 并覆盖 setSelectedIndex(int)。当索引将要更改为指示的数字时调用它，我用它来验证将要离开的窗格上的内容。如果您的逻辑不执行 super.setSelectedIndex(int)，那么您就不会离开窗格（这就是我所追求的）。

# perl - 使用require访问全局变量的值？

> ID：10470343
> 
> 赞同：5
> 
> 时间：2012-05-06T12:04:00.063
> 
> 标签：perl

是否可以使用 require 在另一个 perl 脚本中访问声明的全局变量的值？

例如。

配置文件

```
#!/usr/bin/perl
use warnings;
use strict;

our $test = "stackoverflow" 
```

主文件

```
#!/usr/bin/perl
use warnings;
use stricts;

require "Config.pl"

print "$test\n";
print "$config::test\n"; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T12:08:52.807

当然。您建议的方式*几乎*可行。尝试：

`Config.pl`：

```
use warnings;
use strict;

our $test = "stackoverflow"; 
```

和主程序：

```
#!/usr/bin/perl
use warnings;
use strict;  

require "Config.pl";

our $test;

print "$test\n"; 
```

当您调用 时`require`，该文件将在与调用者相同的命名空间中执行。因此，如果没有任何命名空间或`my`声明，分配的任何变量都将是全局变量，并且对脚本可见。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T12:09:08.530

您需要通过编写`$test`来声明变量`Main.pl`

```
our $test; 
```

就像你在`Config.pl`. 然后一切都会按您的预期进行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-07T00:26:02.450

最好使用模块：

`MyConfig.pm`:（已经有一个名为“Config”的核心包。）

```
package MyConfig;

use strict;
use warnings;
use Exporter qw( import );

our @EXPORT_OK   = qw( $test );
our %EXPORT_TAGS = ( ALL => \@EXPORT_OK );

our $test = "stackoverflow";

1; 
```

`main.pl`：

```
use strict;
use warnings;
use MyConfig qw( :ALL );
print "$test\n"; 
```

# ajax - 如何使用电话间隙或科尔多瓦 ajax 谷歌地图

> ID：10470345
> 
> 赞同：1
> 
> 时间：2012-05-06T12:04:22.860
> 
> 标签：ajax, google-maps, cordova

我创建了一个名为的 PHP 文件`maps.php`，其中包含一个在 iPad 的默认浏览器上运行的简单 Google Maps API。

但是当我使用 Ajax 调用它时，页面会自行加载，而不是地图。如果我在桌面或移动浏览器中打开链接，它可以正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T07:54:27.700

您可以通过访问 google 的[javascript api](https://developers.google.com/maps/documentation/javascript/tutorial)来显示 google 地图。

```
<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map_canvas { height: 100% }
    </style>
    <script type="text/javascript"
      src="http://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&sensor=SET_TO_TRUE_OR_FALSE">
    </script>
    <script type="text/javascript">
      function initialize() {
        var myOptions = {
          center: new google.maps.LatLng(-34.397, 150.644),
          zoom: 8,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(document.getElementById("map_canvas"),
            myOptions);
      }
    </script>
  </head>
  <body onload="initialize()">
    <div id="map_canvas" style="width:100%; height:100%"></div>
  </body>
</html>
```

或者您可以使用`window.location="http://www.mourady.me/alhokair/iphone/maps.php"`javascript 方法直接在 webView 中加载任何 php 页面，因为您的 php 页面在 canvas 标签中包含谷歌地图，您不能通过 ajax 调用将其加载到 div 中，更好的方法是使用 iframe 标签来工作。

```
<html>
    <body onload="bodyload()">
        <button onclick="bodyload()">Ajax call</button>
        <iframe id="mapDiv" height=500px width=700px src="http://www.mourady.me/alhokair/iphone/maps.php"></iframe>
    </body>
</html> 
```

# c# - 在asp.net中将文本保存到数据库然后通过加载页面调用它不起作用，为什么？

> ID：10470346
> 
> 赞同：0
> 
> 时间：2012-05-06T12:04:29.670
> 
> 标签：c#, asp.net, webforms

我在程序中首先从 datadase 调用文本，然后将其发布到文本框中，然后对 textbos 中的文本进行更改，最后我需要在数据库中进行更改。当我点击保存按钮时的问题不会在文本框中进行更改，而只会在数据库上进行

```
namespace WebApplication4
{
    public partial class WebForm17 : System.Web.UI.Page
    {
         DATAACCESS aaa = new DATAACCESS();
         string  Dname = "Finding";

         protected void Page_Load(object sender, EventArgs e)
         {
              aaa = new DATAACCESS();
              TextBox2.Text= aaa.GetDoctext(Dname, 90);
         }

         protected void Button5_Click(object sender, EventArgs e)
         {

             string textboxvalue = Request.Form[TextBox2.UniqueID];
             aaa.savetext(textboxvalue, Dname, 90);
         }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T12:09:37.387

您需要了解[ASP.NET 页面生命周期](http://msdn.microsoft.com/en-us/library/ms178472.aspx)-`page_load`将在任何按钮事件*之前执行。*

这意味着您仅在尝试从数据库加载*后才保存到数据库。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T12:32:07.277

您应该做的是仅在页面尚未回发时填充文本框：

```
namespace WebApplication4 
{ 
  public partial class WebForm17 : System.Web.UI.Page 
  { 
     DATAACCESS aaa = new DATAACCESS(); 
     string  Dname = "Finding"; 

     protected void Page_Load(object sender, EventArgs e) 
     {  
          aaa = new DATAACCESS(); 

          if(!IsPostBack)
          {
              TextBox2.Text= aaa.GetDoctext(Dname, 90); 
          }
     } 

     protected void Button5_Click(object sender, EventArgs e) 
     { 

         string textboxvalue = TextBox2.Text;
         aaa.savetext(textboxvalue, Dname, 90); 
     } 
  } 
} 
```

# rapidxml - 使用 RapidXML 打印 XML 时防止引号和其他特殊字符的扩展

> ID：10470347
> 
> 赞同：3
> 
> 时间：2012-05-06T12:04:31.043
> 
> 标签：rapidxml

我正在使用 RapidXML 读取 XML 文件，对其进行解析，进行一些操作并将其写回。

任何在标签中用引号写的文本，都会以扩展的形式用引号打印。

是否有任何标志可以防止引号和其他特殊字符的扩展。

欢迎任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T05:08:12.900

我不相信这会奏效。编写 XML 与它的创建方式无关，更改解析标志不会影响它。

打印 XML DOM 的全部目的是创建一个格式良好的 XML，以便以后解析；因此，我不希望 XML 库有这样的选项。

如果你想要这样的功能，你可以很容易地通过改变函数来编写`copy_and_expand_chars`一个`rapidxml_print.hpp`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T12:10:11.963

您可能需要在解析期间关闭实体翻译。您可以尝试[`parse_no_entity_translation`](http://rapidxml.sourceforge.net/manual.html#namespacerapidxml_7223b7815c4fb8b42e6e4e77e1ea6b97_17223b7815c4fb8b42e6e4e77e1ea6b97)在解析期间设置标志吗？

# ios - 如何让 iPhone 应用通过笔记本电脑同步数据？

> ID：10470349
> 
> 赞同：0
> 
> 时间：2012-05-06T12:05:01.697
> 
> 标签：ios, ipad

目前我的应用程序正在通过 Web 服务从远程服务器获取数据。但有时用户处于网络很少可用的区域。因此，在这种情况下，我只想通过他们的笔记本电脑（window 或 mac）同步应用程序的数据。

例如，我需要将 100 张图像同步到应用程序中。我在笔记本电脑上创建了一个环境，在其中创建了一个文件夹并将图像保存在那里，一旦 iPhone 通过 wifi 连接到笔记本电脑，所有图像都会与应用程序同步。

但是我不想自动它通常可以在按钮操作上。但是请指导我有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T14:38:06.923

只需在笔记本电脑上创建一个 Web 服务并使用它来进行存储。我做过类似的事情，我已经走在核心数据模型中本地存储数据的路线，然后当用户回到范围内时同步到服务器。

# java - 使用 JFreeChart 和 MySQL DB 绘制图表的数据集

> ID：10470354
> 
> 赞同：0
> 
> 时间：2012-05-06T12:05:53.680
> 
> 标签：java, mysql, jfreechart

我正在尝试在 Java 上使用 JFreeChart 绘制图表！

我将在图表中使用的数据来自 DB。

所以我有一张包含多种类型的**pannes**表，然后我计算每个 pannes 的数量并使用 JFreeChart 的方法将它们添加到 dataSet 中。

我的问题是我没有得到任何输出。

这是一些代码！

```
for (int i =0 ; i<typesPannes.length ; i++)     
{
    ResultSet res = st.executeQuery(req+" and typeDerang = '"+typesPannes[i]+"'");  
    System.out.println(req+" and typeDerang = '"+typesPannes[i]+"'");
    int count=0; 
    while (res.next()) {    count++ ; }
    System.out.println(count) ;  
    dataset.setValue(count, " "  ,  typesPannes[i]); 
}       
    JFreeChart chart = ChartFactory.createBarChart ("BarChart using JFreeChart","row", "col", dataset, 
    PlotOrientation.VERTICAL, false,true, false);
    chart.setBackgroundPaint(Color.yellow);
    chart.getTitle().setPaint(Color.blue); 
    CategoryPlot p = chart.getCategoryPlot(); 
    p.setRangeGridlinePaint(Color.red); 
    ChartPanel ch1=new ChartPanel(chart);
    panel.add(ch1); 
```

数据集是否有任何问题或....请帮助！

**dataset.setValue(count, " " , typesPannes[i]);**

感谢帮助 ！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T12:33:36.400

```
dataset.setValue(count, " "  ,  typesPannes[i]); 
```

尝试替换为：

```
dataset.setValue(count, typesPannes[i], ""); 
```

因为您只有一个类别，但有多个系列。

看到截图后编辑：当我替换 panel.add(ch1); 时，图表对我来说很好。使用包含图表的新 JFrame。所以你需要检查面板是否已经添加到你的主框架中，以及它是否没有被重新绘制等。你可以尝试调整主框架的大小。您还可以尝试添加一个简单的 JLabel，并在添加图表之前检查它是否正确显示在您的框架中。

# python - 使用python计算笛卡尔坐标

> ID：10470360
> 
> 赞同：-1
> 
> 时间：2012-05-06T12:07:07.097
> 
> 标签：python, math, cartesian

从高中起就没有使用过笛卡尔图，我实际上发现需要它们与现实生活相关。这可能是一个奇怪的需求，但我必须将数据分配给笛卡尔图上的点，这些点可以通过调用笛卡尔坐标来访问。图上必须有无限的点。例如。

```
 ^
 [-2-2,a ][ -1-2,f ][0-2,k ][1-2,p][2-2,u]
 [-2-1,b ][ -1-1,g ][0-1,l ][1-1,q][1-2,v]
<[-2-0,c ][ -1-0,h ][0-0,m ][1-0,r][2-0,w]>
 [-2--1,d][-1--1,i ][0--1,n][1-1,s][2-1,x]
 [-2--2,e][-1--2,j ][0--2,o][1-2,t][2-2,y]
                       v 
```

实际值并不重要。但是，假设我在变量 m 上，这将是笛卡尔图上的 0-0。如果我向上移动一个空间，我需要计算笛卡尔坐标，这将使我留在 l 上。

从理论上讲，假设我有一个 == ("0-1") 的 python 变量，我相信我需要在 - 处拆分它，这将留下 x=0，y=1。然后，我需要执行 (int(y)+1)，然后将 x 重新附加到 y，并在其间添加一个“-”。

我想要做的是使用参数 (x+1,y+0) 调用一个函数，并让程序执行上述操作，然后返回它计算的笛卡尔坐标。

我实际上不需要检索空间的值，只需要笛卡尔坐标。我想我可以使用 re.sub()，但是我不确定如何正确格式化此函数以围绕“-”进行拆分，而且我也不确定如何正确执行计算。

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T12:10:44.777

要表示无限格，请使用将元组 (x,y) 映射到值的字典。

```
grid[(0,0)] = m
grid[(0,1)] = l

print(grid[(0,0)]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T12:13:08.153

我不确定我是否完全理解这个问题，但我建议使用列表列表来获取 2D 结构。

然后查找您可以执行的特定值，`coords[x-minX][y-minY]`其中 x,y 是您想要的整数索引，而 minX 和 minY 是最小值（在您的示例中为 -2）。

您可能还想查看[NumPy](http://numpy.scipy.org/)，它提供了一种更加灵活的 n-dim 对象数组类型，允许您“切片”每个轴或获取子范围。如果您不熟悉使用这样的数组，NumPy 文档可能会有所帮助。

编辑：要将字符串拆分`0-1`为组成整数，您可以使用：

```
s = '0-1'
[int(x) for x in s.split('-')] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T12:16:13.450

您想在变量名称和坐标之间创建双向映射，然后您可以按变量名称查找坐标，将您的函数应用于它，然后使用您的函数生成的新坐标集查找下一个变量。

您可以将函数应用到的数字元组与可用作 dict 中的键的字符串之间的映射很容易。

# version-control - TortoiseHG：用另一个替换默认分支的最简单方法

> ID：10470364
> 
> 赞同：1
> 
> 时间：2012-05-06T12:07:45.907
> 
> 标签：version-control, mercurial, tortoisehg

我的默认分支非常旧，并且在过去几周内没有更改 - 人们在另一个第二个分支上工作。这意味着今天有很大的不同。很多新文件，很多文件被删除，很多文件被改变。我试图找出用第二个分支“替换”默认分支的最简单方法。我真的必须合并每一个变化吗？谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T16:04:26.530

我认为您正在描述一种情况，您有两个非常不同的分支：被遗弃或被遗忘的“默认”分支和活动的“默认2”分支。将这些合并在一起可能很困难。

1.  如果您不希望对“默认”进行任何更改，则可以使用`hg backout`为所有更改集创建反更改集，返回到“默认”和“默认2”的共同祖先。然后，因为'default' 看起来就像'default2' 的祖先，你应该能够毫无问题地将两者合并在一起。然后，您的开发人员将开始使用“默认”作为他们的主要开发分支。
2.  [您可以根据这个 SO thread](https://stackoverflow.com/questions/4378684/mercurial-can-i-rename-a-branch)简单地关闭 'default' 分支并将 'default2' 重命名为 'default' 。
3.  当然，如果您有一个小型开发团队并拥有完整的服务器控制权，您可以使用 Mercurial Queues 从您的存储库中去除“默认”并将“默认2”重命名为“默认”。

# javascript - 反转柱形图中的最小值和最大值

> ID：10470365
> 
> 赞同：1
> 
> 时间：2012-05-06T12:07:47.097
> 
> 标签：javascript, highcharts

我有获胜位置的图表。[http://jsfiddle.net/DhcTV/4/](http://jsfiddle.net/DhcTV/4/)像这样。如您所见，最后一个和最大的位置引起了您的注意。

如何反转列，使最小的位置获得最大的列，最后的位置获得小列？

这可能与highcharts有关还是需要额外的计算？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T13:50:45.267

为什么不只是颠倒值的顺序？查看您的代码[更新](http://jsfiddle.net/DhcTV/6/)。为了反转数组的值，您可以在 values 数组上使用[reverse(..)](http://www.w3schools.com/jsref/jsref_reverse.asp)函数。

# c# - 准备实时应用程序以保存意外关闭、崩溃等意外事件的状态数据

> ID：10470367
> 
> 赞同：1
> 
> 时间：2012-05-06T12:08:04.373
> 
> 标签：c#, .net, crash, shutdown

我有一个应用程序，可以在没有互联网连接的情况下在预配置的计算机上为学生进行交互式考试。该应用程序在考试期间记录用户输入、系统指标等，并采用增量方法保存这些数据，以便突然崩溃或断电不会破坏整个考试的会话数据。

该应用程序每秒将数据序列化为带有时间戳的新文件，并在会话结束时将所有内容编译在一起以将其标记为 ATOMIC 事务。这工作正常。

我想要做的是让应用程序在响应意外情况时更加健壮，例如由 UPS 触发的关机启动、用户自己不小心踢掉电源按钮（它发生了）等。当然我知道没有太多可以如果操作系统崩溃或电源线中断，请执行此操作。

我正在寻找的是：

*   要订阅的事件的完整列表，例如关机启动、对笔记本电脑至关重要的电池电量等。
*   如何在 .NET 4（任何语言）下订阅这些事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T12:22:27.447

你不能在断电的情况下什么都不做。Application.UnhandledException 和 Close 将捕获您有模糊机会处理的任何事情，其中​​包括来自即将耗尽的电池或 UPS 启动的关闭信号。

# android - phonegap：加载远程 html

> ID：10470380
> 
> 赞同：3
> 
> 时间：2012-05-06T12:10:14.073
> 
> 标签：android, cordova

我正在寻找一种在`phonegap`android 应用程序中加载远程 html 的方法。我正在使用`super.loadUrl("file:///android_asset/www/hello.html");`但如何加载远程 html 页面？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-06T15:07:44.270

很简单的文卡特，

只需使用 http 请求加载所需的 html 页面，

`super.loadUrl("http://www.test.com/test1.html");`

或者您可以像以前一样加载本地 html 文件

`super.loadUrl("file:///android_asset/www/hello.html");`

并在 hello.html`window.location`中使用 onLoad() javascript 函数来加载外部 html 页面。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
  <head>
    <!-- Change this if you want to allow scaling -->
    <meta name="viewport" content="width=default-width; user-scalable=no" />
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <title>LoadUrl
    <script type="text/javascript" charset="utf-8">
    function onBodyLoad()
    {
        document.addEventListener("deviceready",onDeviceReady,false);
    }
    /* When this function is called, PhoneGap has been initialized and is ready to roll */
    function onDeviceReady()
    {
    // do your thing!
      window.location="http://170.60.26.20:8099/Sencha/Html/index.html";
    }
    </script>
  </head>
  <body onload="onBodyLoad()">   
  </body>
</html>
```

请确保您在 android manifest 文件中设置了互联网权限。

# permissions - filezilla 中的文件权限不起作用 (707)

> ID：10470382
> 
> 赞同：1
> 
> 时间：2012-05-06T12:10:39.403
> 
> 标签：permissions, ftp, filezilla

状态：将 '/images' 的权限设置为 '707' 命令：SITE CHMOD 707 images 响应：500 'SITE CHMOD 707 images'：命令不理解

我不完全理解为什么这不起作用。我正在尝试设置一个文件夹以接受用户提交的图像，但是当我将文件权限设置为 707 时，它一直收到此响应。为什么要这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T10:20:22.690

这很可能是您的 FTP 服务器不允许更改文件权限。请尝试从您的服务器 Web 面板更新它们。

# mongodb - 如何根据到期日期更新 mongodb 中的一长串文档（行）？

> ID：10470384
> 
> 赞同：0
> 
> 时间：2012-05-06T12:10:55.673
> 
> 标签：mongodb

我需要一个 cron 作业来过滤所有具有 (travellingPath.endDate>now) 的行并设置它们 (travellingPath.isActive=false)。行进路径具有 toCity 属性。现在我想根据 travellingPath 的数量和另一个设置集合来更新 toCity 的数量。

例如：

*   行进路径已过期
*   cron 工作抓住了它
*   从行进路径获取 toCity
*   从另一个集合中获取转换率
*   基于**toCity.quantity**、**travellingPath.quantity**、**conversionRate**和**random**我将 toCity.quantity 更新为新值，我也可能会更改 toCity.owner
*   将行进路径更新为 isActive=false

我的想法是查询具有 endDate>now 的每条行进路径，但这可能最终得到 100000 个结果，所以它不是很好。我可能会将其限制为 250 个结果才能正常工作。然后对于每个 travellingPath，我得到它的 toCity 并进行计算并更新 toCity 和 travellingPath。

但这似乎效率不高..

你有更好的主意吗？谢谢 （：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T12:15:25.313

是的，这就是要走的路。MongoDB 更新不支持依赖于其他字段的表达式。所以你被这个困住了：

1.  逐一或小批量检索文件；
2.  计算字段的新值；
3.  向数据库发送更新（一个一个或一批）；
4.  获取文件的下一部分，重复直到完成。

# php - Wordpress 插件错误 PHP

> ID：10470385
> 
> 赞同：0
> 
> 时间：2012-05-06T12:11:05.150
> 
> 标签：php, wordpress

尝试激活我的插件时，wordpress 出现此错误：

> 插件无法激活，因为它触发了致命错误。解析错误：语法错误，第 79 行的意外 T_FUNCTION

第 79 行是下面代码段的第一行，从调查来看，我认为这是因为 PHP 版本错误，因为我无法控制更新 php，如何使其与早期版本兼容？

```
add_action('admin_menu', function(){
        Plugin_Options::add_menu_page();
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T12:17:34.783

Your plugin requires PHP version 5.3.x for `function`, earlier versions of PHP give you that syntax error message.

Wordpress does not offer a mechanism to make plugins tell which dependency they need so they need to be activated and care on their own (or just fail as in your case).

You can just add it this way instead:

```
add_action('admin_menu', 'Plugin_Options::add_menu_page'); 
```

And done. That's a static class method call (As of PHP 5.2.3, [Type 4 callable in the Callback Example^(*Docs*)](http://php.net/manual/language.types.callable.php)), PHP 5.2.3 is within [the minimum PHP version requirements of wordpress](http://wordpress.org/about/requirements/) (that's since WordPress 3.1), so this looks like the preferred method.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T12:13:38.457

很可能，您的 PHP 版本小于 5.3。PHP 5.3 中添加了匿名函数。为了利用这一点，您可以将函数作为回调字符串传递，例如：

```
function add_menu_callback() {
  Plugin_Options::add_menu_page();
}

add_action('admin_menu', 'add_menu_callback'); 
```

# c# - ForEach 匿名函数，无法返回

> ID：10470386
> 
> 赞同：0
> 
> 时间：2012-05-06T12:11:14.653
> 
> 标签：c#, .net, linq

我无法从 ForEach 返回，这是我的代码：

```
cards.ForEach(delegate(Card c){
    if (c.GetFaceValue().ToString() == card) {
        return "Your Card has been located";
    } 
```

错误：

> 无法将匿名方法转换为委托类型“... .Card>”，因为块中的某些返回类型不能隐式转换为委托返回类型

以下也不起作用，因为`CheckCard`只能返回 void：

```
 cards.ForEach(CheckCard);

 public string CheckCard(Card c) {
        if (c.GetFaceValue().ToString() == card) { // card = global 
            return "Your Card has been located";
        }
    } 
```

错误：

> 'string SharedGamesClasses.Hand.CheckCard(SharedGamesClasses.Card)' 的返回类型错误

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T12:14:22.740

You're currently trying to return a message from the anonymous function and not your calling code; that won't work as the anonymous function is an `Action<T>`, which can't return anything.

Do you just want to see if any element in `cards` matches `card` and return the message if so?

Use [`.Any()`](http://msdn.microsoft.com/en-us/library/bb534972.aspx) instead of `.ForEach()`:

```
if (cards.Any(c => c.GetFaceValue().ToString() == card))
{
    return "Your Card has been located";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T12:16:30.383

Looking on the logic provided, I *suppose* you just gonna terminate iteration as sson as there is `Card` found. Use just a simple `foreach` for this, like for example:

```
string SomeFunc(IEnumerable<Card> cards) 
{
  foreach(Card in cards)
  {
     if(c.GetFaceValue().ToString() == card) {
        return "Your Card has been located";
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T12:13:02.187

ForEach 有一个 void - 你不能返回一个值。

Action 是一个委托快捷方式

```
public delegate void Action<in T>(
    T obj
) 
```

注意这里的空白。

[http://msdn.microsoft.com/en-us/library/bwabdf9z.aspx](http://msdn.microsoft.com/en-us/library/bwabdf9z.aspx)

```
public void ForEach(
    Action<T> action
) 
```

# android - Android sdk 不会安装 - 检查 jdk 时崩溃

> ID：10470394
> 
> 赞同：8
> 
> 时间：2012-05-06T12:13:20.147
> 
> 标签：android

我已经下载了 java jdk 和 android sdk 安装程序，但是当我运行 android sdk 安装程序时，它工作正常，直到它检查 java jdk 的屏幕。

它开始没有响应，然后大约 15 秒后，弹出一条崩溃消息。

对这个问题有任何帮助吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-22T18:56:42.087

可能有点晚了，互联网上没有解决方案对我有用，最后出于绝望我删除了注册密钥：

`HKEY_LOCAL_MACHINE\Software\JavaSoft (not in Wow6432Node)`

它奏效了！我希望我只是像我一样让某人免于寻找两个小时的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-15T01:20:58.120

我的问题是我没有安装 32 位版本的 JDK。我只有64位版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-24T12:58:59.053

这个答案可能来得有点晚，但在安装 Android SDK 之前，我安装了大约 6 个版本的 Java。只需卸载每个版本，然后安装最新的 32 位或 64 位 JDK 即可修复此崩溃。

# java - Developing an Android App - The best system

> ID：10470398
> 
> 赞同：-2
> 
> 时间：2012-05-06T12:14:00.650
> 
> 标签：java, android, cordova, titanium

I'm in the process of starting an android app - however i'm confused as to what is the best option to take with regards to the development of an android app.

What would be the best system to use? Phonegap, Titanium, Feedhenry or a native android app using java?

Thanks in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T12:26:22.203

取决于它是什么类型的应用程序。

如果您不需要与 Web API 进行任何重要的交互，或者它不是一种 web-android-app -> 您应该使用原生 android。

否则，如果您需要使用一些需要从浏览器访问它的网络服务，那么您应该考虑使用 Phonegap、Titanium 等......

Phonegap、Titanium 等所做的是 -> 他们部署了一个特殊的 Activity，它扩展了 Android Activity 类以启动高度定制的 Android Web 视图 + 他们为大多数 Android 功能提供了一个 JavaScript 接口。因此，您可以制作一个 HTML 页面并使用 javascript 处理所有应用程序逻辑。

我在 phonegap 等方面的经验 -> 如果你有更复杂的应用程序逻辑 -> 你最终会得到一个凌乱的 JavaScript 代码。

# performance - AS3 bitmapdata mix two alphachannels based on third alpha channel

> ID：10470399
> 
> 赞同：0
> 
> 时间：2012-05-06T12:14:05.850
> 
> 标签：performance, actionscript-3, flash, air

I have three BitmapData objects, all with alpha channel.

bitmapData 1 & 2 have the same RGB content, but different alpha channels:

```
bitmapData1.rgb == bitmapData2.rgb
bitmapData1.a != bitmapData2.a 
```

bitmapData 3 has completely different data.

what I want to achieve is the following:

```
targetBitmapData.rgb = bitmapData1.rgb;
targetBitmapData.a = bitmapData1.a * bitmapData3.a + bitmapData2.a*(1-bitmapData3.a); 
```

so, I want to blend the alpha channels of bitmapData 1 & 2 based on alpha channel of bitmapData 3

do I need to iterate over all pixels to do this, or is there a faster way? experimented with copyPixels, but didn't get the desired result.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T13:32:08.227

您应该能够[`draw`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/BitmapData.html#draw%28%29)使用[`BlendMode`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/BlendMode.html). 它可能需要太多的操作才能比迭代更有效。

如果您最终迭代像素（并且不针对 iOS），请考虑[PixelBender](http://www.adobe.com/devnet/pixelbender.html)。

# c++ - wglCreateContext GetLastError() 0xc007001f

> ID：10470401
> 
> 赞同：0
> 
> 时间：2012-05-06T12:14:41.647
> 
> 标签：c++, windows, opengl

I have an application that opens many windows. Sometimes, I get wglCreateContext() returns 0 and GetLastError() returns 0xc007001f.

It happens on Intel graphic cards only.

Did someone see it? Someone knows what it is?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T14:25:09.667

您可以将错误代码分解为其部分。0xC 使其成为致命错误，007 产生设施代码 7，即 winapi。这使得最后四位数字 Windows 错误 31：

```
//
// MessageId: ERROR_GEN_FAILURE
//
// MessageText:
//
// A device attached to the system is not functioning.
//
#define ERROR_GEN_FAILURE                31L 
```

假设您将正确的设备上下文句柄传递给 wglCreateContext()，这使它成为一个非常基本的设备驱动程序问题。通常需要更新视频驱动程序并确保安装正确类型的 OpenGL 驱动程序。当然，您无法解决任何问题，这是用户需要解决的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T12:53:27.230

我相信错误 0xc007001f 是`SetPixelFormat()`失败的时候。这意味着，您正在尝试使用该卡不支持的像素格式的某些功能。如果我没记错的话，英特尔显卡几乎不支持 OpenGL（仅 [编辑：2.1]）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T19:51:09.587

您还可以使用 FormatMessage 获取错误描述的字符串：

```
DWORD err = GetLastError();
char* msg;
FormatMessageA(FORMAT_MESSAGE_FROM_SYSTEM|FORMAT_MESSAGE_ALLOCATE_BUFFER, 0, err, 0, (LPCSTR)&msg, 0, 0);
MessageBoxA(0, msg, "Error", 0);
LocalFree(msg); 
```

# android - How to android receives authToken

> ID：10470402
> 
> 赞同：1
> 
> 时间：2012-05-06T12:15:07.263
> 
> 标签：android, android-source, auth-token

Where to find the source code for getting AuthToken. In the folder with the android source (core/java/android/accounts), I found the code only works stored in a database and extracts from it. But I am interested in the code that makes a request to the server for AuthToken I'm wondering which of the four methods (OAuth 1.0, AuthSub, ClientLogin and OAuth 2.0) use, because OAuth 1.0, AuthSub, and ClientLogin have been deprecated.

# xml - Simple Webapp for editing an XML file

> ID：10470406
> 
> 赞同：1
> 
> 时间：2012-05-06T12:16:04.557
> 
> 标签：xml, apache, web-applications

I have a very simple xml file that looks something like this:

```
<teams>
    <team lead="jim" wing="bob" />
    <team lead="frank" wing="mary" />
    <team lead="george" wing="hans" />
</teams> 
```

I need to let people edit this file using a web interface, preferably served over apache. It should just list the "lead" and "wing" attributes in a table and allow them to be edited as free-form text. Before I start mucking about and writing my own, is there some kind of super-simple framework that does this kind of thing out of the box? Liker a general purpose web-based xml editor, where you could set the path to a file and the xpath of the attributes to be edited and they would show up on a nice web form...preferably open source.

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T12:22:37.043

你试过[谷歌表单](http://www.google.com/google-d-s/forms/)吗？它们允许您将表单结果导出为各种格式。

# sql - 在纯 SQL 中使用变量

> ID：10470412
> 
> 赞同：1
> 
> 时间：2012-05-06T12:17:19.103
> 
> 标签：sql

我想通过为嵌套查询分配“变量名”来重写以下查询。

```
select lastname 
  from table2 
 where firstname = (select name from table1 where val="whatever") 
```

我希望查询看起来像这样：

```
( select name 
    from table1 
   where val = "whatever") as retrieved_name;

select lastname 
  from table2 
 where firstname = retrieved_name 
```

纯SQL可以吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T12:18:31.000

> 纯SQL可以吗？

**不。**

您没有“纯 SQL”的变量。您可以使用 Oralce-PL\SQL 等设置变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T12:29:30.650

有点，如果您愿意使用 a`join`而不是子选择并且您[*不*使用 MySQL](https://stackoverflow.com/questions/1382573/how-do-you-use-the-with-clause-in-mysql)，您可以使用 CTE（通用表表达式）：

```
with retrieved_name as ( 
  select name 
    from table1 
   where val = "whatever" 
         )
select lastname
  from table2 t2
  join retrieved_name t1
    on t2.firstname = t1.name 
```

正如 a_horse_with_no_name 所指出的，这与：

```
select lastname
  from table2 t2
  join ( select name 
           from table1 
           where val = "whatever" ) t1
    on t2.firstname = t1.name 
```

实际上，我更喜欢第二个示例的内联视图而不是 CTE，除非查询很荒谬，但这只是个人喜好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T12:25:48.553

你可以做这样的事情

`select name as retrieved_name from table1 where val="whatever");` `select lastname from table2 where firstname=retrieved_name`

# asp.net - 在服务器上找不到 System.Web.Helpers，这是怎么回事？

> ID：10470414
> 
> 赞同：2
> 
> 时间：2012-05-06T12:17:34.350
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

我开发了一个 ASP.NET MVC 3 Web 应用程序，它在本地正常工作，但在服务器上却没有：

```
Line 18:<add assembly="System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" /> 
```

如何解决服务器找不到此程序集的事实？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T12:19:47.450

它正在寻找对该程序集的 GAC 程序集引用。您是否在服务器上安装了该程序集？如果没有，您需要将其设置为`bin deploy`.

这是你如何做到的：

### 将 Copy Local 属性设置为 True

1.  在解决方案资源管理器中，双击项目的“我的项目”节点。

2.  在项目设计器中，选择引用选项卡。

3.  在引用列表中选择一个引用的组件。

4.  与该引用关联的属性出现在“属性”窗口的列表中。

5.  从左侧列中选择 Copy Local，然后单击右侧列中的箭头将值更改为 True。（[来源](http://msdn.microsoft.com/en-us/library/t1zz5y8c%28v=vs.80%29.aspx)）

要设置您的项目`bin deploy`，请[按照 Scott Hanselman 制定的这些说明进行操作](http://www.hanselman.com/blog/BINDeployingASPNETMVC3WithRazorToAWindowsServerWithoutMVCInstalled.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T12:42:40.150

1.  右键单击解决方案资源管理器中的项目。
2.  选择添加可部署依赖项
3.  检查 Asp.net MVC 并单击确定

# analytics - What does number of lines of code tell you about your application?

> ID：10470416
> 
> 赞同：1
> 
> 时间：2012-05-06T12:17:43.673
> 
> 标签：analytics, code-metrics

Recently, we were asked to find the lines of code in our application by our managers. I have actually been pondering since then; what does this metric signify ?

1.  Is it to measure the average lines of code the developer has written over the time ?

    *   IF no re-factoring happens then this can be a possibility.
2.  Does it tell how good is your application ?

3.  Does it help one in marketing the product ?

I don't know how does it help. Can some one please guide me in the right direction or answer what does this metric signify ?

Thanks.

Something I found recently [http://folklore.org/StoryView.py?project=Macintosh&story=Negative_2000_Lines_Of_Code.txt&sub=HN0](http://folklore.org/StoryView.py?project=Macintosh&story=Negative_2000_Lines_Of_Code.txt&sub=HN0)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T20:58:15.280

代码行数是一个流行但有问题的指标。

*优点*

1.  代码行数与错误数量显示出中等 (0.4-0.5) 的相关性 [Rosenberg 1997, Zhang 2009]，即较大的模块通常有更多的错误，而且可能更有趣的是，每行有更多的错误 [Fenton and奥尔森 2000，张 2009]。我想强调的是，有更好（但更复杂）的方法来预测错误的数量。
2.  代码行数可用于预测开发工作量，即，有工作量预测模型（例如，COCOMO）将源代码行数作为输入参数之一。
3.  一些更复杂的 OO 指标与班级规模有很强的相关性 [El Emam et al. 2001]。

*缺点*

1.  使用代码行作为生产力度量是非常有问题的，因为很难比较不同语言或不同开发人员编写的模块。实际上，由于例如“内置”功能的存在/不存在或结构冗长（例如，C 中的 .h），某些语言更加冗长。此外，正如上面已经提到的，一些开发人员按代码行付费，这必然导致代码复杂得离谱。最后，应考虑代码生成。
2.  虽然“代码行数”是一种常见的度量标准，但必须小心区分不同类型的“代码行数”：有无空行，有无注释，计算物理行的逻辑语句......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T12:25:52.553

> 代码行数告诉您有关您的应用程序的哪些信息？

代码行数将大致告诉您存储未压缩的源文件需要多少磁盘空间。即使这样也很粗糙，因为每一行都有不同数量的字符，并且可以使用不同的编码（UTF-8 占用的磁盘空间是 Latin-1 的两倍）。

> 是衡量开发人员在一段时间内编写的平均代码行数吗？

不。

> 它是否说明您的应用程序有多好？

不。

> 它对营销产品有帮助吗？

不。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-06T12:58:40.247

这表明你的经理不称职

如果您以代码行数来衡量，作为开发人员，您将如何实现目标...

谷歌这个指标，它会告诉你这是自阿道夫决定通过入侵俄罗斯来赢得欧洲战争以来最愚蠢的策略。

# ios - How to make the carriage for UILabel

> ID：10470421
> 
> 赞同：1
> 
> 时间：2012-05-06T12:18:56.993
> 
> 标签：ios, cocoa-touch, uikit, uilabel

I need to make a view that will be changing a UILabel font-size (as on a picture below), for example when I touch right top corner and dragging to the top UILabel must changes it font-size.. please help me

![enter image description here](../Images/91ab974ad185a59bad99c5a0221aac0e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T12:54:10.297

我不确定你到底想要做什么，但也许这会让你开始：

确保你有一个 UILabel（我命名为 myLabel）正确连接（必须检查用户交互启用），然后在父类中：

在 viewDidLoad 中：

```
UIPinchGestureRecognizer *recognizer = [[UIPinchGestureRecognizer alloc] initWithTarget:self 
                                            action:@selector(twoFingerPinch:)];

[myLabel addGestureRecognizer:recognizer];

- (void)twoFingerPinch:(UIPinchGestureRecognizer *)recognizer {
    //  Modify this to suit your needs
    if (recognizer.scale > 1.5) {
        self.myLabel.font = [UIFont systemFontOfSize:recognizer.scale *10];
    } else {
        self.myLabel.font = [UIFont systemFontOfSize:14];
    }
} 
```

那里有几种不同的手势识别器，也许 tapGestureRecognizer 可能更适合你。这个将随着用户捏/缩放而调整大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T12:27:30.393

我不确定我是否正确理解了您的问题。您可以尝试将初始字体大小设置为较大的值，然后将`myLabel.adjustsFontSizeToFitWidth = YES;`. 这样，如果标签对于适合的文本来说太小，字体大小将自动缩小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T12:40:48.063

如果您需要的是可调整大小的 UIView。您可以查看[适用于 iOS 的 SPUserResizableView](http://cocoacontrols.com/platforms/ios/controls/spuserresizableview)

然后，我确信处理 UILabel 的大小是通过`adjustsFontSizeToFitWidth`像 Adrian 所说的那样将属性设置为 YES 来完成的。

# postgresql - Returning cursor results

> ID：10470425
> 
> 赞同：0
> 
> 时间：2012-05-06T12:19:55.957
> 
> 标签：postgresql, cursor, resultset, plpgsql, sql-returning

I have the following procedure :

```
CREATE OR REPLACE FUNCTION findKNN()
RETURNS Text AS $body$
DECLARE
    cur refcursor;
    tempcur refcursor;
    gid_ integer;
    _var1 integer;
    _var2 integer;
BEGIN
    open cur for execute('select gid from polygons');
    loop
    fetch cur into gid_;
    open tempcur for SELECT g1.gid , g2.gid FROM polygons AS g1, polygons AS g2
    WHERE g1.gid = gid_  and g1.gid <> g2.gid ORDER BY g1.gid , ST_Distance(g1.the_geom,g2.the_geom)
        LIMIT 5;
             loop
                 fetch tempcur into _var1 , _var2;
                     -- how to return _var1 , _var2 here ? 
                 end loop;
          end loop;
                close cur;
    END;
$body$
LANGUAGE plpgsql; 
```

But I don't know how to return the result out of this procedure. The query returns 5 rows for each execution within outer cursor loop. How can I retrieve these five rows for each query execution?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T13:35:12.057

除非您尝试做一些不属于您的问题的更复杂的事情，否则您可以从根本上简化为：

```
CREATE OR REPLACE FUNCTION find_knn()
    RETURNS TABLE(gid1 integer, gid2 integer)  AS
$body$
BEGIN

    RETURN QUERY
    SELECT g1.gid , g2.gid
    FROM   polygons g1
    JOIN   polygons g2 ON g1.gid <> g2.gid
    -- WHERE  g1.gid = <some_condition>  -- ???
    ORDER  BY g1.gid, st_distance(g1.the_geom, g2.the_geom)
    LIMIT  5;

END;
$body$    LANGUAGE plpgsql; 
```

甚至：

```
CREATE OR REPLACE FUNCTION find_knn()
    RETURNS TABLE(gid1 integer, gid2 integer)  AS
$body$
    SELECT g1.gid , g2.gid
    FROM   polygons g1
    JOIN   polygons g2 ON g1.gid <> g2.gid
    -- WHERE  g1.gid = <some_condition>  -- ???
    ORDER  BY g1.gid, st_distance(g1.the_geom, g2.the_geom)
    LIMIT  5;
$body$    LANGUAGE sql; 
```

称呼：

```
SELECT * FROM x.find_knn(); 
```

[关于从函数返回](http://www.postgresql.org/docs/current/interactive/plpgsql-control-structures.html#PLPGSQL-STATEMENTS-RETURNING)的手册。
关于[CREATE FUNCTION](http://www.postgresql.org/docs/current/interactive/sql-createfunction.html)的手册。

* * *

### 检索一个巨大连接的一小部分

（评论的答案。）
有很多方法可以在不实际评估整个连接的情况下选择一个巨大连接的一小部分。在大多数情况下，您甚至不必担心它。例如，在家里运行这个：

```
EXPLAIN ANALYZE
SELECT *
FROM   huge_tbl t1
CROSS  JOIN huge_tbl t2
LIMIT  5 
```

您将看到只处理 5 行，*而不是*整个交叉连接。[CTE](http://www.postgresql.org/docs/current/interactive/queries-with.html)
也是如此：

```
WITH a AS (
    SELECT *
    FROM   huge_tbl t1
    CROSS JOIN huge_tbl t2
    )
SELECT *
FROM   a
LIMIT  5 
```

一些限制适用。我引用了[优秀的手册](http://www.postgresql.org/docs/current/interactive/queries-with.html)：

> PostgreSQL 的实现只评估 WITH 查询的行数，与父查询实际获取的行数一样多。

为了绝对确定，您可以在源头应用`LIMIT`（或合适的`WHERE`条款）：

```
SELECT *
FROM   (SELECT * FROM huge_table LIMIT 1) t1
CROSS  JOIN (SELECT * FROM huge_table LIMIT 5) t2; 
```

# node.js - 为什么我在nodejs HTTP响应中不能写汉字？

> ID：10470426
> 
> 赞同：9
> 
> 时间：2012-05-06T12:20:03.310
> 
> 标签：node.js, utf-8, cjk

这是我的小代码：

```
var http = require('http');
var port = 9002;
var host_ip = '<my_ip>';
http.createServer(function (req, res) {
    var content = new Buffer("Hello 世界", "utf-8")
    console.log('request arrived');
    res.writeHead(200, {
        'Content-Encoding':'utf-8',
        'charset' : 'utf-8',
        'Content-Length': content.length,
        'Content-Type': 'text/plain'});
    res.end(content.toString('utf-8'),'utf-8');
}).listen(port, host_ip);
console.log('server running at http://' + host_ip + ':' + port); 
```

以前我只是让`res.end`发送“hello world”并且效果很好。然后我想稍微调整一下，把'world'改成中文对应的'世界'，所以把标题中的'charset''content-type'改成'utf-8'。但在 Chrome 和 Firefox 中，我看到了这一点：

```
hello 涓栫晫 
```

然而，令人惊讶的是，opera(11.61) 确实显示了正确的结果`hello 世界`。我想知道我是否遗漏了代码中的某些内容，以及为什么会这样。谢谢你们。

我认为[这篇文章](https://stackoverflow.com/questions/9698552/chinese-character-in-nodejs-response-write)与我的情况相似，但不完全一样。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-06T12:28:07.227

问题在于字符集规范。对我来说，它适用于这种变化：

```
'Content-Type': 'text/plain;charset=utf-8' 
```

使用 Chrome、Firefox 和 Safari 进行测试。

您还可以查看 node.js 包“express”，它允许像这样重写您的代码：

```
var express=require('express');

var app=express.createServer();

app.get('/',function(req, res) {
    var content = "Hello 世界";

    res.charset = 'utf-8';
    res.contentType('text');
    res.send(content);
});

app.listen(9002); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T12:38:15.713

`content-encoding`不是字符集而是http响应本身的编码

`charset`不是常见的http头

`content-length`在这里是不必要的

正如@jjrv 所说，你应该`'Content-Type': 'text/plain;charset=utf-8'`在那里写

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T11:08:22.140

# .net - Running a WPF by creating an AppDomain

> ID：10470427
> 
> 赞同：1
> 
> 时间：2012-05-06T12:20:03.820
> 
> 标签：.net, wpf, security, unmanaged, appdomain

I want to create an AppDomain and run an external WPF application through it. The main reason is security, as I would like to control what the external WPF app can do. Specifically, I want to disallow any usage of unmanaged code.

I've run the following code:

```
PermissionSet set = new PermissionSet(PermissionState.None);
set.AddPermission(new FileIOPermission(FileIOPermissionAccess.AllAccess, PATH));
set.AddPermission(new SecurityPermission(SecurityPermissionFlag.Execution));
set.AddPermission(new UIPermission(PermissionState.Unrestricted));
set.AddPermission(new SecurityPermission(SecurityPermissionFlag.UnmanagedCode));

Evidence ev = new Evidence();
AppDomain domain = AppDomain.CreateDomain("Test", ev, new AppDomainSetup() { ApplicationBase = PATH }, set);
domain.ExecuteAssembly(PATH); 
```

and it works great.

When I remove the last line in the permission set (i.e., allowing the unmanaged code to run) it stops working.

How can I disallow the new app domain to run unmanaged code, but still have the WPF app run? (Btw, the WPF app is just a File->New WPF Application, so it doesn't use any unmanaged code).

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T13:18:59.093

不幸的是，您需要 UnmagedCode 权限才能实例化 WPF 窗口。在后台，WPF 使用非托管代码来访问 Windows API，以进行消息传递和窗口管理等操作。

来自 MSDN 窗口概述文档[http://msdn.microsoft.com/en-us/library/ms748948.aspx](http://msdn.microsoft.com/en-us/library/ms748948.aspx)

> Window 需要 UnmanagedCode 安全权限才能被实例化。对于在本地机器上安装和启动的应用程序，这属于授予应用程序的权限集。
> 
> 但是，这不属于授予使用 ClickOnce 从 Internet 或本地 Intranet 区域启动的应用程序的权限集。因此，用户将收到 ClickOnce 安全警告，并且需要将应用程序的权限集提升到完全信任。

如果您想限制 WPF 应用程序可以执行的操作，您可能想尝试在不同的用户名下运行它。

# c# - linq-to-sql 有条件地更新

> ID：10470433
> 
> 赞同：2
> 
> 时间：2012-05-06T12:20:49.647
> 
> 标签：c#, linq-to-sql

我有一个更新记录的查询；它看起来有点像这样：

```
public void SaveRecord(int TheUserID, Nullable<DateTime> TheDate,
                                                  Nullable<int> TheAction)
    {
      using DC...
      {
         var TheRecordToUpdate = (from....where ....
                                  select l).Single();

         TheRecordToUpdate.TheDate = TheDate;
         TheRecordToUpdate.TheAction = TheAction;

         TheDC.SubmitChanges(); 
```

问题是有时我提供空参数，在这种情况下，我不想更改数据库中的字段。我该如何使用？？当参数为空时，linq-to-sql 中的运算符？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T12:24:21.083

您可以使用`??`运算符

```
TheRecordToUpdate.TheDate = TheDate ?? TheRecordToUpdate.TheDate ; 
```

或者如果您想更明确地编写它

```
if (TheDate.HasValue){
    TheRecordToUpdate.TheDate = TheDate;
} 
```

但是，如果`TheRecordToUpdate.TheDate`不是可为空的属性，则必须编写

```
if (TheDate.HasValue){
    TheRecordToUpdate.TheDate = TheDate.Value;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T12:23:49.227

您可以尝试`??`像这样使用运算符：

```
TheRecordToUpdate.TheDate = TheDate ?? TheRecordToUpdate.TheDate; 
```

`TheDate`如果is ，它将使用现有值更新字段`null`。linq 设计器和 SQL metal 生成的代码包含防止分配相同值的措施，因此这不应触发数据库更新：

```
set
{
  if ((this._TheDate != value))
  {
    this.OnTheDateChanging(value);
    this.SendPropertyChanging();
    this._TheDate = value;
    this.SendPropertyChanged("TheDate");
    this.OnTheDateChanged();
  }
} 
```

无论如何，我认为使用普通`if`语句更具可读性：

```
if (TheDate != null)
{
  TheRecordToUpdate.TheDate = TheDate;
} 
```

作为旁注，您没有遵循变量的正常大小写约定。参数`TheDate`通常写成.`theDate`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T12:23:38.763

以下技巧应该有效。

```
TheRecordToUpdate.TheDate = TheDate ?? TheRecordToUpdate.TheDate;
TheRecordToUpdate.TheAction = TheAction ?? TheRecordToUpdate.TheAction; 
```

如果参数为空，则值会更新但使用先前的值，因此它保留其先前的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T12:27:12.220

您可以根据@sarwar026 使用三元更新到现在的状态，但我个人不喜欢它，它依赖于下游功能检测到的数据没有变化。我只是把它包起来`if TheDate.HasValue`。看不出这么聪明有什么价值。

# model-view-controller - Play 1.2.4 Mobile and PC design on the same app

> ID：10470435
> 
> 赞同：0
> 
> 时间：2012-05-06T12:21:28.670
> 
> 标签：model-view-controller, playframework

I am a new developer in Play world! For a project I need to have a mobile and desktop version. But I don't know how to!!

*   Create 2 applications, share the model..;
*   Create a mobile controller to separate the desktop views against the mobile views

I have no idea of how to make this properly. I know the responsive design but I can't use it on this project.

Thanks

PS: Sorry for my english

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T19:17:54.080

根据用例，我会看一下[Twitter Bootstrap](http://twitter.github.com/bootstrap/)之类的框架。使用 twitter 引导程序，您可以为桌面和移动设备使用一组视图模板。还有一个称为[Kickstrap](http://ajkochanowicz.github.com/Kickstrap/)的框架和其他一些框架。

但另一方面，如果你想开发某种“后端”或“管理”应用程序（你仍然可以使用 twitter 引导程序，但你可能会看看 Sencha（EXT JS 和 Touch）或 Kendo UI 之类的框架。

无论您选择什么，Play 都将使您能够按照应有的方式开发服务器端（RESTful），因此前端的选择可以及时改变，但您的应用程序架构会很好:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T20:09:26.950

任何一个都可以。因为它们本质上是相同的东西，2 组路由/控制器/视图加上 1 组域模型。

如果您使用的是[我的 play clone](https://github.com/greenlaw110/play/tree/v1.2)，那么您可以将其简化为 1 组域模型 + 1 组路由/控制器 + 2 组视图，您可以执行以下操作：

```
public class Application extends Controller {
   ...
   @OnApplicationStart
   public static class ViewRouter extends Job {
        Controller.registerTemplateNameResolver(new ITemplateNameResolver(){
            @Override
            public String resolveTemplateName(String templateName) {
                return UserAgent.isMobile() ? "mobile/" + templateName : templateName;
            }
        });
   }
} 
```

因此，您只需将您的移动视图放在下面`app/views/mobile`，而所有其他视图仍保留在 中`app/views`，模板将根据请求的用户代理动态加载，如果它来自移动设备，则`app/views/mobile/..`加载版本，否则将加载普通视图。

# python - 在 python 中分析多个文件后生成单个输出文件

> ID：10470436
> 
> 赞同：2
> 
> 时间：2012-05-06T12:21:31.020
> 
> 标签：python

我有多个文件，每个文件包含 8/9 列。

对于单个文件：我必须读取包含某个值的最后一列并计算每个值的出现次数，然后生成一个输出文件。

我已经这样做了：

```
inp = open(filename,'r').read().strip().split('\n')  
out = open(filename,'w')  
from collections import Counter  
C = Counter()  
for line in inp:  
    k = line.split()[-1] #as to read last column  
    C[k] += 1  
for value,count in C.items():  
    x = "%s   %d" % (value,count)  
    out.write(x)  
    out.write('\n')  
out.close() 
```

现在的问题是，如果我必须为一个输入生成一个输出，它工作正常。但是我需要使用`glob.iglob`函数扫描一个目录，以便将所有文件用作输入。然后必须对每个文件执行上述程序以收集每个文件的结果，然后当然必须将每个文件的所有分析结果写入单个 OUTPUT 文件。

注意：在生成单个 OUTPUT 文件期间，如果发现任何值被重复，那么与其将相同的条目写入两次，不如仅对“计数”求和。例如分析第一个文件生成：

```
123 6  
111 5  
0   6  
45  5 
```

和第二个文件生成：

```
121 9  
111 7  
0   1  
22  2 
```

在这种情况下，OUTPUT 文件必须以包含以下内容的方式编写：

```
123 6  
111 12 #sum up count no. in case of similar value entry  
0   7  
45  5  
22  2 
```

我已经写了编。对于单个文件分析，但我被困在质量分析部分。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T12:44:56.140

```
from collections import Counter
import glob

out = open(filename,'w')
g_iter = glob.iglob('path_to_dir/*')  
C = Counter()
for filename in g_iter:
    f = open(filename,'r')
    inp = f.read().strip().split('\n')
    f.close()
    for line in inp:
        k = line.split()[-1] #as to read last column
        C[k] += 1
for value,count in C.items():
    x = "%s %d" % (value,count)
    out.write(x)
    out.write('\n')
    out.close() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T01:48:03.830

去丑化后：

```
from collections import Counter
import glob

def main():
    # create Counter
    cnt = Counter()

    # collect data
    for fname in glob.iglob('path_to_dir/*.dat'):
        with open(fname) as inf:
            cnt.update(line.split()[-1] for line in inf)

    # dump results
    with open("summary.dat", "w") as outf:
        outf.writelines("{:5s} {:>5d}\n".format(val,num) for val,num in cnt.iteritems())

if __name__=="__main__":
    main() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T12:48:49.173

在程序顶部初始化一个空字典，比如说，`dic=dict()`

并且对于每次`Counter`更新，`dic`以便将相似键的值相加，并将新键也添加到`dic`

更新`dic`使用这个：

`dic=dict( (n, dic.get(n, 0)+C.get(n, 0)) for n in set(dic)|set(C) )`

`C`当前在哪里`Counter`，在所有文件完成后将 写入`dic`输出文件。

```
import glob
from collections import Counter
dic=dict()
g_iter = glob.iglob(r'c:\\python32\fol\*')
for x in g_iter:

    lis=[]
    with open(x) as f:
        inp = f.readlines()
    for line in inp:
        num=line.split()[-1]
        lis.append(num)
    C=Counter(lis)
    dic=dict( (n, dic.get(n, 0)+C.get(n, 0)) for n in set(dic)|set(C) )
for x in dic:
    print(x,'\t',dic[x]) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T04:49:56.520

我确实喜欢这个。

```
import glob
out = open("write.txt",'a')  
from collections import Counter  
C = Counter()  
for file in glob.iglob('temp*.txt'):
    for line in open(file,'r').read().strip().split('\n'):  
        k = line.split()[-1] #as to read last column  
        C[k] += 1  
for value,count in C.items():  
        x = "%s   %d" % (value,count)  
        out.write(x)  
        out.write('\n')  
out.close() 
```

# jquery - 无法在 codeigniter 视图中加载外部 javascript 文件

> ID：10470456
> 
> 赞同：1
> 
> 时间：2012-05-06T12:25:09.367
> 
> 标签：jquery, codeigniter, include

我有以下目录结构

```
*application
*media
*system 
```

我将我的 js 文件放在 media/js 文件夹中，但是当我尝试在我的视图中包含 js 文件时

```
<script type="text/javascript" src="media/js/common_functions.js"></script> 
```

它给出了以下错误

```
Resource interpreted as Script but transferred with MIME type text/html 
```

它不加载 js 文件.. 甚至 jquery 文件.. 可以告诉我有什么问题。我可能做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T12:41:00.793

试试这个：

```
$config['javascript_location'] = 'http://localhost/codeigniter/themes/js/jquery/'; 
```

*要在控制器构造函数中手动初始化 jQuery 类，请使用以下`$this->load->library`函数：*

```
$this->load->library('jquery'); 
```

[http://codeigniter.com/user_guide/libraries/javascript.html](http://codeigniter.com/user_guide/libraries/javascript.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T12:31:10.880

试试这个：

```
<script type="text/javascript" src="../../media/js/common_functions.js"></script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T15:28:53.020

对于标准和有用的方法，试试这个：

```
<script type="text/javascript" src="<?=base_url()?>media/js/common_functions.js"></script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T16:27:09.443

该死的地狱..！在这上面浪费了半个小时。我使用[url 指南](http://codeigniter.com/user_guide/general/urls.html)删除 index.php。现在我将我的东西放在根文件夹的公共目录中，其中包含 .htaccess 文件，如下所示

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

因此，只需确保该文件夹包含在 RewriteCond $1 ... 行中，如下所示

```
RewriteCond $1 !^(index\.php|**public**|robots\.txt) 
```

希望这可以帮助某人。

# android - 关于 gtalkservice 的信息

> ID：10470457
> 
> 赞同：1
> 
> 时间：2012-05-06T12:25:22.783
> 
> 标签：android, push-notification, google-talk, internet-connection

我正在尝试查找有关为推送消息或数据保持开放互联网连接的更多信息。我读过 xmpp 协议可能适用于此，并且它已被 android 的 gtalkservice 所取代。

不幸的是，我无法在互联网上找到更多关于 com.google.android.gtalkservice 的包信息。

有谁知道我在哪里可以找到这些信息？

谢谢。

# c++ - 使用类作为 BaseClass

> ID：10470460
> 
> 赞同：1
> 
> 时间：2012-05-06T12:25:36.220
> 
> 标签：c++

我有：

```
class BASE{
public:
    virtual void func1() = 0;
}; 
```

然后我有一些派生类，例如：

```
class Derived1 : public BASE{
public:
    void func1() {...implementation....}
};

class Derived2 : public BASE{
    public:
        void func1() {...implementation....}
    }; 
```

主要我想做一些类似（伪代码）的事情：

```
if ( cond ){
   BASE b := new Derived1
}
else{
   BASE b := new Derived2
}
b.func1(); 
```

因此调用的 func1() 函数是派生类专用的。

我试着做：

```
BASE b = new Derived1(); 
```

但编译器抱怨。

是否可以在 C++ 中做到这一点？如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T12:30:23.407

使用指针（或引用），否则您的对象将被复制到普通的 BASE 实例中：

```
BASE* b = new Derived1;
b->func1();

// later...
delete b; 
```

另外，不要忘记在这种情况下使您的析构函数成为虚拟的。

由于整个 new/delete 只是为了让多态起作用有点麻烦，现在人们倾向于使用智能指针：

```
std::shared_ptr<BASE> b=std::make_shared<Derived1>();
b->func1(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T13:23:51.393

显然您已经习惯了垃圾收集的面向对象语言，例如 Java。要很好地回答这个问题，从这个角度来看可能会很好。

当你写东西时

```
Base b = new Derived1(); 
```

在 Java 中，会发生以下情况：

1.  指向通用对象的指针“ `&b`”（我称之为）在堆栈上分配`β``Base`
2.  在堆上分配了一个新`Derived1`对象（我称之为）`d`
3.  `β`设置为指向`Derived`对象。

在 Java 中你很容易摆脱这种情况的原因是有一个垃圾收集器。只要`β`在堆栈上并指向，这将不会产生任何影响`d`，因为这样 GC 知道`d`仍然可以访问并且可能正在使用中。但是一旦不再有指针引用`d`（例如，因为您声明的函数`b`离开了作用域），GC 就被允许释放`d`. 很简单，但是垃圾收集有[几个缺点](http://en.wikipedia.org/wiki/Garbage_collector_%28computing%29#Disadvantages)，这是我们在 C++ 中不想要的。

所以在 C++ 中，如果你做类似的事情

```
Base* b = new Derived1(); 
```

直接对应Java版本，你有一个问题：`b`离开范围时，没有任何引用`d`，但**它仍然在堆上**！。你需要自己删除

```
delete b; 
```

（请注意，这有一个很大的优势，您可以准确地确定它在什么时候被删除，而垃圾收集器可能会让它无用地闲置很长时间，并且只有在您开始耗尽内存时才将其擦除）。但是再一次，这还不够：与垃圾收集器不同，您的程序不会自动知道`b`指向`Derived1`对象而不是`Base`对象，因此`delete`delete 会认为它正在处理一个`Base`. 但是很容易理解这一点：在`Base`类中包含一个虚拟析构函数，比如

```
class Base{
 public:
  virtual void func1() = 0;
  virtual ~Base() {}  
}; 
```

现在，这种手动删除所有内容的需要显然有点危险：如果您忘记这样做，就会发生内存泄漏，即只要您的程序运行，对象就*永远不会从堆中删除。*出于这个原因，应该使用*智能指针*而不是普通的 C 样式指针，这会在离开作用域时自动删除它们指向的对象。在 C++11 中，这些是在标准库 (header `<memory>`) 中定义的。你只是做

```
std::unique_ptr<Base> b(new Derived1()); 
```

现在，当`b`离开作用域时，`Derived1`对象会被自动删除。

在所有这些示例中，调用虚函数的工作方式相同：

```
b->func1(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-06T12:31:52.623

有两种方法可以做到这一点：

*   使用基类类型的指针：

    `Base *b = new Derived1;`

*   如果要在复制构造上创建派生，请使用类型基类的 const 引用：

    `Base const& b = Derived;`

*   如果要分配在其他地方创建的派生类对象，请使用基类类型的非常量引用：

    `Derived d;` `Base& b = d;`

尼特：

*   为了继承，您需要在类定义中指定：

    `class Derived1 : public Base {`

*   你的函数需要有一个返回值。

    `class B{ public: virtual void func() = 0; };`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-06T12:27:59.417

您正在尝试将指针分配给普通对象。

```
new Derived1() 
```

此表达式返回一个指针。您要么必须创建`BASE`一个指针 ( `BASE *`)，要么只是在堆栈上创建它（最好，`Base b;`）。但是，在这种情况下，您需要指针（或引用）来在类之间进行转换。

此外，您不能在 if-else 语句中创建对象，因为它会超出您以后想要使用它的范围。

这是您可以做的事情：

```
BASE *b;

if (cond)
    b = new Derived1();
else
    b = new Derived2();

b->func1(); 
```

当然，`delete`之后你必须记住你的指针。考虑简单地使用智能指针。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-06T13:54:10.820

已经涵盖了指针（及其陷阱）的使用，所以我将向您展示如何在没有动态内存分配的情况下使用多态性，这可能证明我是一个即使考虑它的异端。

首先，让我们看看你的原始代码，修补后编译：

```
void foo(bool const cond) {
    Base* b = 0;
    if (cond) { b = new Derived1(); }
    else      { b = new Derived2(); }

    b->func1();
    delete b; // do not forget to release acquired memory
} 
```

假设你有一个`virtual`析构函数，它工作正常`Base`。

程序员进化的下一个合乎逻辑的步骤是使用智能指针来避免编写`delete`（`delete`仅由初学者和专家库编写者使用）：

```
void foo(bool const cond) {
    std::unique_ptr<Base> b;
    if (cond) { b.reset(new Derived1()); }
    else      { b.reset(new Derived2()); }

    b->func1();
} 
```

当然，它仍然需要一个`virtual`析构函数`Base`。

让我们意识到这个函数做了两件事：

*   选择一个给定条件的类
*   对生成的实例做一些工作

我们可以将其分解，例如通过提取构建工作：

```
std::unique_ptr<Base> build(bool const cond) {
    if (cond) { return { new Derived1() }; }
    return { new Derived2() };
}

void foo(bool const cond) {
    std::unique_ptr<Base> b = build(cond);
    b->func1();
} 
```

这是大多数人所做的。

我声称还有另一种可能性，我们可以隔离实际工作，而不是隔离构建：

```
void dowork(Base& b) { b.func1(); /* and perhaps other things */ }

void foo(bool const cond) {
    std::unique_ptr<Base> b(cond ? new Derived1() : new Derived2());
    work(*b);
} 
```

我们实际上可以更进一步：

```
void foo(bool const cond) {
    if (cond) {
        Derived1 d;
        work(d);
    } else {
        Derived2 d;
        work(d);
    }
} 
```

**多态性不需要动态内存分配。**

你知道最后一个例子有什么好玩的：

*   没有 C++11 移动语义，它工作得很好
*   它不需要有`virtual`析构函数`Base`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-06T12:29:39.070

你忘了这个吗？

```
class Derived1 : public BASE
{
}; 
```

至少我在您的代码中没有看到它 - 派生的 BASE 类

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-06T12:31:10.707

如果函数签名相同，那么在这种情况下，接口声明可能更合适......然后让每个类实现接口，并将变量声明为您声明的接口类型......

# php - 跨域上传，从一个域上传文件到另一个域

> ID：10470466
> 
> 赞同：0
> 
> 时间：2012-05-06T12:26:19.947
> 
> 标签：php, file-upload, upload

如何允许一个域访问另一个域以从 domain1 上传文件到 domain2？我在 domain1 上有一个页面，用户从该页面上传图像，但我希望将图像上传到 domain2.com 上的文件夹中，例如 domain2.com/uploads。

如何让domain1访问domain2？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T12:48:30.957

[http://domain-A.org/send.php](http://domain-A.org/send.php)：

```
<form action="http://domain-B.org/upload.php" method="post" enctype="multipart/form-data">
  <!-- .. -->
</form> 
```

[http://domain-B.org/upload.php](http://domain-B.org/upload.php)：

```
<?php
print_r($_FILES); 
```

# sql-server - 从 SQL Server 数据库中的字段中删除最后 N 个字符

> ID：10470471
> 
> 赞同：37
> 
> 时间：2012-05-06T12:26:51.113
> 
> 标签：sql-server

我有超过 400 万行的表，并且意外地在一列中的数据比需要的多。

例如，而`ABC`不是`ABC DEFG`.

如何使用 TSQL 删除这 N 个符号？请注意，我想从数据库中删除这些字符，而不仅仅是选择子字符串。谢谢

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-05-06T12:29:54.097

```
UPDATE mytable SET column=LEFT(column, LEN(column)-5) 
```

从列中删除最后 5 个字符（mytable 中的每一行）

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-07-18T21:15:46.623

我得到了自己问题的答案，这是：

```
select reverse(stuff(reverse('a,b,c,d,'), 1, N, '')) 
```

其中 N 是要删除的字符数。这避免了两次写入复杂的列/字符串

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-15T12:42:05.440

你可以使用`SUBSTRING()`函数来做到这一点：

```
UPDATE table SET column = SUBSTRING(column, 0, LEN(column) + 1 - N) 
```

删除列中每一行的最后 N 个字符

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-16T18:52:02.463

这应该做到这一点，从左边删除一个或多个需要的字符。

```
lEFT(columnX,LEN(columnX) - 1) AS NewColumnName 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2021-04-02T19:29:10.640

You can use function RIGHT [https://www.w3schools.com/sql/func_sqlserver_right.asp]

RIGHT( "string" , number_of_chars_from_right_to_left)

That should look like this:

```
Query: SELECT RIGHT('SQL Tutorial', 3) AS ExtractString;
Result: "ial" 
```

# android - Android：将自己的视图添加到 LinearLayour

> ID：10470472
> 
> 赞同：2
> 
> 时间：2012-05-06T12:26:57.697
> 
> 标签：android, view

我创建了一个自己的视图：

```
 private class SampleView extends View { 
```

我想将此视图“植入”到我在 xml 文件中创建的 LinearLayout 中。我怎么做？有人能帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T12:28:43.920

添加你的布局文件

```
<LinearLayout >

<com.yourpackagename.SampleView />

<LinearLayout> 
```

**或者**

```
LinearLayout lLayout = (LinearLayout)findViewById(R.id.linearlayout);
lLayout.addView(new SampleView()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T12:31:10.820

只需使用自定义视图类的完全限定名称

```
<LinearLayout ...>
  <your.package.SampleView 
    android:layout_width=".."
    android:layout_height=".."
    ..
  >
  </your.package.SampleView >
  ..
</LinearLayout> 
```

但是，从您的类定义中删除“private”，如果它是嵌套类，则添加**static**。

此时您不能使用内部类

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T12:49:22.800

尝试`View`像这样添加您的自定义：

```
<view
   class="test.project.app.Compass$SampleView"
   //... other attributes
/> 
```

您的自定义`View`类必须是`public`并且`static`上述代码才能工作。另一种选择是将其放在`SampleView`自己的文件中，然后简单地使用上面答案中的代码。

# cocoa - 使用圆形矩形按钮作为带有计数器的徽章

> ID：10470479
> 
> 赞同：2
> 
> 时间：2012-05-06T12:28:11.783
> 
> 标签：cocoa, nsoutlineview, nstableviewcell

我正在使用基于视图的 NSOutlineView 和两个不同的视图（两个视图都是 的自定义子类`NSTableCellView`）。在顶层视图中，我显示一个带有计数器的徽章。计数器指示较低级别的条目数。[按照Apple 的 SidebarDemo](http://developer.apple.com/library/mac/#samplecode/SidebarDemo/Introduction/Intro.html)项目，计数器实现为圆角矩形 NSButton 。

正如您从图像中看到的那样，选择单元格时按钮的行为不是您所期望的行为。我的按钮变成黑色，而在 Apple 的示例中它变成白色。我已经找到了将按钮的这种特定行为设置为该方法的 `setHighlightsBy`方法：

```
[[self.button cell] setHighlightsBy: 0]; 
```

`awakeFromNib`我在自定义单元格类的方法中使用了上述内容。同样`awakeFromNib`，我还设置了按钮的边框：

```
[[self.button cell] setBezelStyle: NSInlineBezelStyle]; 
```

边框样式效果很好，但突出显示似乎被忽略了。

我可以提供的更多信息：大纲视图使用绑定来获取其内容，其突出显示模式设置为“源列表”。

为什么我的突出显示被忽略？

![在此处输入图像描述](../Images/70c90af5f436372e19154a357956861b.png)

![在此处输入图像描述](../Images/42fa61f5187c017b4730687f08a90d8a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T15:33:57.543

您的按钮是否在 IB 中设置（如在演示项目中）？如果是这样，您是否在属性检查器的控制部分中选中了“启用”框？如果我取消选中该框，我会得到您所看到的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T18:11:01.583

感谢@rdelmar 在他的回答中提出的建议，我找到了所描述行为的原因。该按钮使用“参数”绑定检查器绑定到单元格视图。

![在此处输入图像描述](../Images/88d97b1db0cc2c26ddda2b485e6f8559.png)

其中一项设置是“有条件地启用”，它已启用，显然会导致我的按钮自动禁用。禁用此设置后，问题就会消失。

# jsf - PrimeFaces overlayPanel 在其容器外

> ID：10470480
> 
> 赞同：5
> 
> 时间：2012-05-06T12:28:13.943
> 
> 标签：jsf, primefaces

我正在尝试将 OverlayPanel 显示到 Carousel 中，但此面板比 Carousel 更宽，因此其内容未完全显示。

我尝试向`z-index`面板添加样式值，但它仍然保留在轮播“内部”。

有没有办法通过在 Carousel 外部绘制溢出来完全显示它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-12T17:36:11.287

根据 primefaces [OverLayPanel Documentation www.primefaces.org/docs/vdl/3.4/primefaces-p/overlayPanel.html](http://www.primefaces.org/docs/vdl/3.4/primefaces-p/overlayPanel.html)的文档，您应该使用

```
appendToBody="true" 
```

带有它的覆盖面板应该可以解决问题。

# backbone.js - Backbone.js 中的分页

> ID：10470481
> 
> 赞同：13
> 
> 时间：2012-05-06T12:28:14.940
> 
> 标签：backbone.js, pagination

我知道有一个组件，但根据我看到的你必须创建一个扩展组件的新集合。还有另一种方法可以在主干中进行分页吗？

我所需要的只是一个上一个和下一个按钮，将每页的项目限制为 12 个。我一直在 javascript 上创建它（对于生产环境来说不是一个好的解决方案）。有任何想法吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-06T13:30:22.027

由于 Backbone 集合扩展了下划线方法，您可能希望非常轻松地创建辅助分页方法。我使用类似的东西：

```
var Paginated = Backbone.Collection.extend({

    pagination : function(perPage, page) {
       page = page-1;
       var collection = this;
       collection = _(collection.rest(perPage*page));
       collection = _(collection.first(perPage));    
       return collection.map( function(model) { return model.toJSON() } ); 
    }
}); 
```

这将返回您收藏的 JSON，您可以在 jsfiddle 中使用它：http: [//jsfiddle.net/YHmrp/2/](http://jsfiddle.net/YHmrp/2/)

# android - 如何移动到另一个屏幕

> ID：10470483
> 
> 赞同：1
> 
> 时间：2012-05-06T12:28:35.103
> 
> 标签：android

我对 android 完全陌生，我有 listview，我需要在 listOnclick 中转移到另一个屏幕，但不知道该怎么做

我现在做的是以下

```
@Override
protected void onListItemClick(ListView l, View v, int position, long id) {

    //get selected items
    String selectedValue = (String) getListAdapter().getItem(position);
    Toast.makeText(this, selectedValue, Toast.LENGTH_SHORT).show();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T12:30:43.593

阅读有关意图[http://www.vogella.com/articles/AndroidIntent/article.html](http://www.vogella.com/articles/AndroidIntent/article.html)

# php - 将函数拆分为不同的文件会更好吗？

> ID：10470486
> 
> 赞同：1
> 
> 时间：2012-05-06T12:28:54.170
> 
> 标签：php, mysql

我有一个 php 文件来处理我的网站的大量 MySQL 查询，我预计一次有成百上千的用户使用它。如果我将所有这些功能保存为一个文件，或者我应该拆分它们，它会对服务器的反应速度产生影响吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T12:37:15.367

如果您有一个经常访问的网页，您应该完美地组织您的代码，因为它似乎不仅仅是一个留言簿页面 - 否则，该项目将失去您的控制。所以把每个函数放到自己的文件中！

只有你的第二个想法应该是关于性能。您可以考虑使用操作码缓存或其他改进，例如静态地图自动加载器、构建脚本，它可以合并您的 php 文件和内容。

但是不要开始用这种糟糕的风格破坏你的项目的源代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T12:35:55.543

将函数拆分为不同的文件比将所有函数写入一个文件中更好，
这使得包含文件的速度更快，性能更好......因为你只包含你想要的函数，也节省了服务器内存。
它还使您的代码更具可读性。

# java - 我的 web 应用程序在 IDE 中测试时工作正常，但在 webserver (tomcat) 上不起作用

> ID：10470493
> 
> 赞同：3
> 
> 时间：2012-05-06T12:29:42.607
> 
> 标签：java, class, jsp, tomcat, web-inf

我已经创建了我的第一个 Web 应用程序。我设置了我的网络服务器（tomcat+apache2）并尝试在其上部署应用程序。当我测试应用程序时，它在我的测试环境中运行良好，但是在创建战争并部署它时出现以下错误（异常）：

HTTP 状态 500 -

类型异常报告

信息

描述 服务器遇到一个内部错误 () 阻止它完成这个请求。

例外

org.apache.jasper.JasperException：无法为 JSP 编译类：

生成的java文件第14行出现错误只能导入一个类型。bitcoin.BitcoinHandler 解析为一个包

在 jsp 文件中的第 16 行出现错误：/Balance.jsp BitcoinHandler 无法解析 13: double yourcoins=0.0; 14：随机 rand=新随机（）；15:16 :
balance=new Double(BitcoinHandler.getBalance("give")); 17：18：19
：
如果（余额>2.5）

堆栈跟踪： org.apache.jasper.compiler.DefaultErrorHandler.javacError(DefaultErrorHandler.java:102) org.apache.jasper.compiler.ErrorDispatcher.javacError(ErrorDispatcher.java:331) org.apache.jasper.compiler.JDTCompiler.generateClass( JDTCompiler.java:469) org.apache.jasper.compiler.Compiler.compile(Compiler.java:378) org.apache.jasper.compiler.Compiler.compile(Compiler.java:353) org.apache.jasper.compiler。 Compiler.compile(Compiler.java:340) org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:646) org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:357) org.apache.jasper。 servlet.JspServlet.serviceJspFile(JspServlet.java:390) org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334) javax.servlet.http.HttpServlet.service(HttpServlet.java:722)

note Apache Tomcat/7.0.27 日志中提供了根本原因的完整堆栈跟踪。Apache Tomcat/7.0.27

该应用程序无法在 WEB-INF/classes 文件夹中找到我的类。不知道为什么！？？？有人可以帮我吗？

**评论中提供的代码**

```
<%@page import="bitcoinmonitor.BitcoinHandler"%>
<%@page import="java.util.Random"%>
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<% 
double balance=0.0;
double yourcoins=0.0;
Random rand=new Random();
balance=new Double(BitcoinHandler.getBalance("give")); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T13:48:35.523

这告诉我你的测试和生产环境不一样。在失败的环境中，您所做的依赖或假设没有得到正确解决。

您在 JSP 中使用 scriptlet 代码，这是自找麻烦。我建议学习 JSTL 并编写 servlet 来验证和绑定请求、完成用例并传递 JSP 显示所需的信息。事实证明，您的设计在 90 年代的扩展性很差，成为维护的噩梦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T12:34:53.440

实际上，您在异常报告中有一些信息，请仔细查看此处，`line: 16 in the jsp file: /Balance.jsp`您也可以在此处放置此文件中的代码以向我们提供更多信息。据我所知，您的`BitcoinHandler`对象有问题，可能是您没有将此类导入到您的`Balance.jsp`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T11:22:51.800

问题是 JSP 子目录。我现在将 JSP 放入根目录，它终于像魅力一样工作了。

# javascript - 如何截断结果标题？

> ID：10470498
> 
> 赞同：1
> 
> 时间：2012-05-06T12:30:46.027
> 
> 标签：javascript, string

我使用 soundclouds api 来回显曲目信息，但我想将每个曲目标题结果显示的字符数限制为 24 个字符？我还希望能够将曲目标题和艺术家标题都设置为大写文本（首字母大写其余小写）

谢谢

```
 <li><a href="' + track.permalink_url +'">Track: ' + track.title + '<BR>Artist: '+ track.user.username + '</a></li>' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T12:32:22.640

试试这个：

```
function formatter(str) {
    if(str.length < 24) {
      return str;
    } else {
      return str.charAt(0).toUpperCase() + str.substr(1,23) + '..';
    }   
}

<li><a href="' + track.permalink_url +'">Track: ' + formatter(track.title) + '<BR>Artist: '+ formatter(track.user.username) + '</a></li>' 
```

**[演示](http://jsfiddle.net/PwLWG/5/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T12:37:26.997

对于您问题的第 1 部分，请查看[`substr`method](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/substr)。它是所有 JavaScript`String`对象的标准方法。

对于第 2 部分，大写，请查看[这个问题](https://stackoverflow.com/questions/1026069/capitalize-the-first-letter-of-string-in-javascript)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T12:38:40.927

您可以提前准备短标题，首先获取子字符串并确保它是小写的：

```
var shortTitle = track.title.substr(0,24).toLowerCase(); 
```

然后使用以下内容将第一个字母大写并使用其余的小写字符串，添加`...`：

```
// ... HTML ouput by JS ...

document.write(shortTitle.charAt(0).toUpperCase() + shortTitle.slice(1));

if (shortTitle.length > 24)
    document.write('...');

// ... HTML output by JS ... 
```

[这里举个例子](http://jsfiddle.net/WSmW8/2/)。

您可以为作者重复这些步骤。

# java - Hibernate Criteria 从日期中提取年份

> ID：10470502
> 
> 赞同：13
> 
> 时间：2012-05-06T12:31:23.590
> 
> 标签：java, hibernate

我正在创建一个休眠标准，用于检查合同在一年内是否/已经有效。合同具有作为标准日期字段的开始日期和结束日期。

所以习惯了 SQL-SERVER，我会在这个 SQL 的行中想到一些东西：

```
SELECT * FROM CONTRACT WHERE YEAR(startDate) <= ? AND YEAR(endDate) >= ? 
```

问号是给定年份的整数。

那么如何将其转换为休眠标准呢？

```
int year = 2011; //Just a testyear for example purposes.
DetachedCriteria criteria = DetachedCriteria.forClass(Contract.class)
    .add(Restrictions.le("startDate", year))
    .add(Restrictions.ge("endDate", year)); 
```

如您所见，我缺少将日期转换为年份以便进行比较的位。自然，我的代码不会按原样运行。

关于如何获得预期结果的任何建议？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-06T13:04:45.273

看起来 API 不直接支持您想要的，但您可能会考虑一些解决方法。

**解决方案1：**

```
DetachedCriteria criteria = DetachedCriteria.forClass(Contract.class)
    .add(Restrictions.le("startDate", toEndOfYear(year))
    .add(Restrictions.ge("endDate", toStartOfYear(year)));

public Date toStartOfYear(int year) {
    Calendar calendar = Calendar.getInstance();
    calendar.set(Calendar.YEAR, year);
    calendar.set(Calendar.DAY_OF_YEAR, 0);
    calendar.set(Calendar.HOUR_OF_DAY, 0);
    calendar.set(Calendar.MINUTE, 0);
    calendar.set(Calendar.SECOND, 0);
    return calendar.getTime();
}

public Date toEndOfYear(int year) {
    Calendar calendar = Calendar.getInstance();
    calendar.set(Calendar.YEAR, year);
    calendar.set(Calendar.DAY_OF_YEAR, 0);
    calendar.set(Calendar.HOUR_OF_DAY, 0);
    calendar.set(Calendar.MINUTE, 0);
    calendar.set(Calendar.SECOND,-1);
    return calendar.getTime();
} 
```

两种方法的示例输出：

```
System.out.println(toStartOfYear(2013));
System.out.println(toEndOfYear(2013));

Mon Dec 31 00:00:00 MYT 2012
Sun Dec 30 23:59:59 MYT 2012 
```

**解决方案2：**

```
DetachedCriteria criteria = DetachedCriteria.forClass(Contract.class)
    .add(Restrictions.sqlRestriction("YEAR(startDate) >= ? ", year,Hibernate.INTEGER))
    .add(Restrictions.sqlRestriction("YEAR(endDate) <= ? ", year,Hibernate.INTEGER)); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-06T12:53:55.587

使用`Restrictions.sqlRestriction`它将解决您的问题

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-10-27T12:42:02.913

如果您使用 JPA 标准构建器，则可以使用该`criteriaBuilder.function`方法。例如

```
contractRepository.findAll(new Specification<Contract>() {
   @Override
   public Predicate toPredicate(Root<Contract> root, CriteriaQuery<?> query, CriteriaBuilder cb) {
     return cb.ge(cb.function("year", Integer.class, root.get(Contract_.endDate)), year);
   }
}); 
```

（我在这个例子中使用 Spring Data [Specifications](http://docs.spring.io/spring-data/jpa/docs/current/reference/html/#specifications)`contractRepository`来查询数据库。因此是 type [`JpaSpecificationExecutor`](http://docs.spring.io/spring-data/data-jpa/docs/current/api/org/springframework/data/jpa/repository/JpaSpecificationExecutor.html)）

# ios - IOS：AVAudioPlayer

> ID：10470503
> 
> 赞同：0
> 
> 时间：2012-05-06T12:31:28.683
> 
> 标签：ios, avaudioplayer

在我的应用程序中，我有 52 个 mp3，当我加载视图控制器时，我以这种方式分配所有 52 个 mp3：

```
NSString *pathFrase1 = [NSString stringWithFormat:@"%@/%@",[[NSBundle mainBundle] resourcePath],[NSString stringWithFormat:@"a%d_1a.mp3",set]];
NSURL *filePath1 = [NSURL fileURLWithPath:pathFrase1 isDirectory:NO];
f1 = [[AVAudioPlayer alloc] initWithContentsOfURL:filePath1 error:nil];
[f1 prepareToPlay]; 
```

但是当我打开viewcontroller时它很慢，那么我使用它时有没有办法分配mp3？并发布其 AVAudioPlayer??

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-06T13:37:09.807

处理起来有点复杂，但不要使用 AVAudioPlayer，而是使用[AVPlayer](http://developer.apple.com/library/ios/#DOCUMENTATION/AVFoundation/Reference/AVPlayer_Class/Reference/Reference.html)。AVPlayer 旨在播放[AVAssets](http://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVAsset_Class/Reference/Reference.html)，可以是预加载的文件。具体来说，您需要使用名为[AVURLAssets](https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVURLAsset_Class/Reference/Reference.html)的 AVAsset 子类，它可以加载您的 URL：[Loading AVAsset](http://developer.apple.com/library/mac/documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/02_Playback.html#//apple_ref/doc/uid/TP40010188-CH3-SW3)。然后，您可以使用 AVAsset 创建[AVPlayerItem](https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVPlayerItem_Class/Reference/Reference.html)。AVPlayerItem 是一个轻量级包装器，AVPlayer 使用它来跟踪 AVAsset 的播放状态。使用 AVPlayer 的好处是它可以播放[AVMutableComposition](https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVMutableComposition_Class/Reference/Reference.html)，它本身可以包含多个 AVAsset。AVPlayer 还可以播放 AVAsset 队列，并为您提供有关何时开始播放新 AVAsset 以及哪个 AVAsset 的信息。如果您将 MP3 加载到一堆 AVURlAssets 中，您可以加载它们并保留它们，仅当您想播放一个（或多个）MP3 时才创建 AVPlayerItem 和 AVPlayer。

AVAudioPlayer 旨在播放单个文件，但它在幕后使用 AVAssets（可能还有 AVPlayer）。它适用于简单的情况，但对于更复杂的情况，你真的想使用 AVPlayer。

我还应该指出 AVPlayerItem 和 AVPlayer 是轻量级对象。他们不需要很长时间来实例化。它正在加载需要所有时间的 AVAsset。因此，您可以根据需要随意创建和销毁 AVPlayerItem 和 AVPlayer 对象。

最后，AVAsset 和 AVPlayer 有时依赖块来通知。因此，例如，您可能需要在加载 AVURLAsset 时使用 c-blocks 以获取有关资产何时完全加载的通知。请注意，这些块不会在主线程上调用。因此，如果您尝试更新任何 UI 元素或从该块执行任何动画，它将无法正常工作。您需要将另一个块分派到主线程来执行此操作，例如：`dispatch_async(dispatch_get_main_queue(),^{....update UI element code....});`. 有关调度块的更多信息，请参阅 Apple 的[并发编程指南](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008091)和[块编程指南](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Blocks/Articles/00_Introduction.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T13:07:18.990

`AVAudioPlayer`当然可以，但是在分配并准备播放时会有延迟。你能预测什么时候会播放什么吗？如果是这样，也许您可​​以在需要播放特定 mp3 之前加载几秒钟。

根据您的时序要求，可能无法正常工作的替代方法如下：

```
- (void)prepareAudioPlayer {
    static int index = -1;
    index = index + 1;
    if (index < [[self FileNames] count]) {
        NSError *err = nil;
        NSString *audioFilePath = @""; // Figure out how to get each file name here
        NSURL *audioFileURL = [NSURL fileURLWithPath:audioFilePath];
        AVAudioPlayer *player = [[AVAudioPlayer alloc] initWithContentsOfURL:audioFileURL error:&err];
        if (err) {
            NSLog(@"Audio Player Error: %@", [err description]);
        }
        [player prepareToPlay];
        // Add this player to the "AudioPlayers" array
        [[self AudioPlayers] addObject:player];
        // Recurse until all players are loaded
        [self prepareAudioPlayer];
    }
} 
```

`FileNames`此解决方案需要和的属性`AudioPlayers`。

设置完成后，您可以执行以下操作（可能在 中`viewDidLoad`）：

```
// Make the file name array 
[self setFileNames:[NSMutableArray array]];
// Initiate the audio player loading
[self performSelectorInBackground:@selector(prepareAudioPlayer) withObject:nil]; 
```

稍后，当您需要播放特定文件时，您可以在数组中找到文件名的索引，并在数组中对该索引进行`FileNames`调用。`play``AVAudioPlayer``AudioPlayers`

这似乎不是最好的做事方式，但如果您需要这种方式，它可能会起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T13:32:26.510

这里是使用方法，如果声音正在播放，current Time 是当前播放位置的偏移量，以声音开始的秒数为单位。如果声音没有播放，当前时间是调用 play 方法时开始播放的偏移量，以声音开始的秒数为单位。

通过设置此属性，您可以寻找到声音文件中的特定点或实现音频快进和快退功能。当音频播放器正在播放或暂停时，此属性的值会单调增加。

如果不止一个音频播放器连接到音频输出设备，只要至少有一个播放器正在播放或暂停，设备时间就会继续增加。

如果音频输出设备没有连接的正在播放或暂停的音频播放器，则设备时间恢复为 0。

调用 play AtTime: 实例方法时，使用此属性指示“现在”。通过将多个音频播放器配置为从 deviceCurrent Time 的指定偏移量播放，您可以执行精确同步 — 如该方法的讨论中所述。要了解更多信息，请访问..[在此处输入链接描述](http://www.techyv.com)

# html - 如何使用 @import 将多个 HTML 文件合并为一个，就像 Sass 和 css 一样？

> ID：10470507
> 
> 赞同：3
> 
> 时间：2012-05-06T12:31:52.910
> 
> 标签：html, rubygems, sass

在 Sass 中，我们可以将多个部分组合成单个 css 输出，例如

```
@import "scss/header";
@import "scss/footer";
@import "scss/navigation";
@import "scss/sidebar"; 
```

进入

最终的.scss 最终的`>`.css

有什么方法可以对原始`.HTML`文件（不是 .php 或 .asp）做同样的事情，比如

```
@import "header.html";
@import "scss/footer.html";
@import "scss/navigation.html";
@import "scss/sidebar.html"; 
```

进入`index.html`

以上只是一个解释的例子，我在问什么

我知道我可以使用 php 包含来做到这一点，但我想知道我是否可以只使用 .html 文件。我只想在我的 PC 上合并文件，而不是在服务器上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T12:37:18.790

这在纯 HTML 中是不可能的。

要在客户端执行此操作，您必须使用 Ajax 黑客技术和 JavaScript 将文件拉入 DOM，我想这会非常缓慢且容易出错。我认为没有人认真地这样做。显然，还有 iframe，但对于大多数用例来说，这还是不能令人满意的。

由于您用“rubygems”标记了您的问题：如果您使用的是 Rails，则可以为此目的在服务器端使用[partials 。](http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-17T04:45:12.457

您可以使用服务器端包含 (SSI) 在 .html 文件中包含其他文件。在大多数情况下，您需要使用 .shtml 文件扩展名才能使包含工作。要了解如何实现 SSI，请阅读**HTMLGOODIES**中的这篇文章：[SSI：包含命令](http://www.htmlgoodies.com/beyond/webmaster/article.php/3473341/SSI-The-Include-Command.htm)

# svg - Fabric.js 中的 SVG 显示/渲染问题

> ID：10470508
> 
> 赞同：16
> 
> 时间：2012-05-06T12:32:01.320
> 
> 标签：svg, fabricjs

我正在使用 FabricJS，但在画布中显示 SVG 时遇到问题：

*   结果显示在fabricJS的选择框外（由于翻译？）
*   选择的锚点在转换后会消失，然后就不可能找回它们。

这是一个屏幕截图： ![在此处输入图像描述](../Images/18fa7895d645762cf2a0be1e29f443d1.png)

我正在使用[Potrace](http://potrace.sourceforge.net/)的输出 SVG，我认为这是我问题的根源。
这是 SVG 的代码：[pastebin 中的 SVG 代码](http://pastebin.com/nsmDJM11)
您可以在此页面上使用 FabricJS 对其进行测试：[FabricJS Kitchensing 示例](http://fabricjs.com/kitchensink/)。
只需将 SVG 的代码粘贴到“加载 SVG”区域，然后调整大小并旋转部分框以显示 SVG。

您知道导致问题的我的 SVG 代码部分或 fabricjS 代码的部分吗？如果是这样，我可以自己轻松更改吗？如果没有，任何人都可以纠正或定位可能的错误吗？

非常感谢您的帮助。

**编辑：**看起来，FabricJS 不喜欢 SVG 的这一行：

```
<g transform="translate(0,648) scale(0.098780,-0.098780)" fill="#000000" stroke="none"> 
```

尤其是 translate 和 scale 属性……如何解决？

**EDIT2：**解决方案是平移和比例分别等于（0,0）和（1,1），或者更好的是，它们应用于坐标。

有人知道用 Potrace 或 JS 脚本来做这件事吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-12-16T09:24:06.330

2 年后，fabricJs 现在能够完全解析和管理这个 SVG。只需将旧的 pasteBin SVG 代码粘贴到 kitchenSink 演示中，您就会看到它可以正常加载。

最近在 SVG 解析领域发生了很多改进。我知道这不是 stackoverflow 用户期望的答案，但最好知道认为这仍然是一个问题。

# ruby-on-rails - 将 API 构建为服务

> ID：10470509
> 
> 赞同：2
> 
> 时间：2012-05-06T12:32:06.950
> 
> 标签：ruby-on-rails, api

我正在构建一个 api 供其他人使用。这是一个足够简单的 Json 请求，用户作为一些数据传递，我们将一些返回。

我想要的是保护我们的 api 并拥有某种用户系统，我们可以在其中打开和关闭用户，我们可以记录每个用户发出的请求数。

在 Rails 中执行此操作的最佳方法是什么？我不希望它减慢请求。我可以看到使用设计的方法，但很高兴听到其他人的意见。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T18:13:15.960

另一种方法是使用 3scale (http://www.3scale.net) - 它可以免费使用流量上限，但可以处理所有密钥管理、用户、文档等，并且有一个 ruby​​ 库，如果您可以将其放入您的代码中你正在使用导轨。（其他库在这里： https: [//support.3scale.net/libraries](https://support.3scale.net/libraries)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T12:43:11.783

在使用 devise 的令牌身份验证功能之前，我已经完成了此操作（请参阅[https://github.com/plataformatec/devise](https://github.com/plataformatec/devise)）。

我发现以下设置有效：

*   为每个 api 用户创建一个用户帐户。
*   为令牌身份验证配置设备
*   设置 Token Authentication 配置以要求*每次请求*都提交令牌。

这将允许您启用和禁用单个用户，以及将每个请求跟踪回进行调用的 api 用户。

如果您真的对跟踪使用情况感兴趣，您可能还需要考虑创建一个数据库表来跟踪所有 api 请求。这可以设置到`belong_to`users 表，以便您轻松找到来自不同用户的所有请求（例如，`@user.api_requests`）。

用户发出的所有请求的计数为：

```
@user.api_requests.count

# or use a where clause to find how many of each type
@user.api_requests.where("api_request_type = ?", 'SomeAPICallType').count 
```

最后一点——我最近使用 Grape 库来构建 API。我认为它做得很好，它非常适合我们的需求。我特别喜欢它为版本 API 提供的能力。详情在这里：[https ://github.com/intridea/grape/wiki](https://github.com/intridea/grape/wiki)

# sql - 左连接右表上的条件

> ID：10470511
> 
> 赞同：3
> 
> 时间：2012-05-06T12:32:16.443
> 
> 标签：sql, sql-server, left-join

我正在尝试使用`LEFT JOIN`右表上的条件，但这样做会遇到很多问题。

我有两张桌子：

1.  `projects{project_id,start_date}`
2.  `projectForeCast{project_id,year_number,month_number,hours}`

我正在尝试获取上周打开的所有项目以及上个月记录的时间。

```
SELECT      dbo.Project.PROJECT_ID, dbo.ProjectForeCast.HOURS AS F0
FROM         dbo.Project LEFT JOIN  dbo.ProjectForeCast ON dbo.Project.PROJECT_ID = dbo.ProjectForeCast.PROJECT_ID
WHERE   (dbo.ProjectForeCast.YEAR_NUMBER = DATEPART(YYYY, DATEADD(MM, 0, DATEADD(WK, - 1, GETDATE())))) AND 
                      (dbo.ProjectForeCast.MONTH_NUMBER = DATEPART(MM, DATEADD(MM, 0, DATEADD(WK, - 1, GETDATE())))) AND 
                      (DATEPART(WK,dbo.Project.START_DATE) = DATEPART(WK, DATEADD(WK, - 1, GETDATE())))AND
                      (DATEPART(YYYY,dbo.Project.START_DATE) = DATEPART(YYYY, DATEADD(WK, - 1, GETDATE()))) 
```

它工作得很好，但如果项目`projectForeCast`最后没有记录，`month_number`我根本就没有得到这个项目。`F0`在这种情况下，我想在列中获取一个空单元格或 null 。这就是我尝试过`LEFT JOIN`但没有成功的原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T19:44:02.690

根据我以前的经验，我会这样编写您的 SQL 查询：

```
SELECT p.PROJECT_ID, pfc.HOURS AS F0
FROM 
(   SELECT dbo.Project.PROJECT_ID FROM dbo.Project q 
    WHERE (DATEPART(WK,dbo.Project.START_DATE) = DATEPART(WK, DATEADD(WK, - 1, GETDATE())))AND
    (DATEPART(YYYY,dbo.Project.START_DATE) = DATEPART(YYYY, DATEADD(WK, - 1, GETDATE())))
) p
LEFT JOIN  
(   SELECT dbo.ProjectForeCast.HOURS FROM dbo.ProjectForeCast 
    WHERE (dbo.ProjectForeCast.YEAR_NUMBER = DATEPART(YYYY, DATEADD(MM, 0, DATEADD(WK, - 1, GETDATE())))) AND 
    (dbo.ProjectForeCast.MONTH_NUMBER = DATEPART(MM, DATEADD(MM, 0, DATEADD(WK, - 1, GETDATE()))))
) pfc
ON p.PROJECT_ID = pfc.PROJECT_ID 
```

**或者**使用 SQL 语句将更具可读性的表别名：

```
SELECT p.PROJECT_ID, pfc.HOURS AS F0
FROM 
(   SELECT pr.PROJECT_ID FROM dbo.Project pr 
    WHERE (DATEPART(WK,pr.START_DATE) = DATEPART(WK, DATEADD(WK, - 1, GETDATE())))AND
    (DATEPART(YYYY,pr.START_DATE) = DATEPART(YYYY, DATEADD(WK, - 1, GETDATE())))
) p
LEFT JOIN  
(   SELECT pf.HOURS FROM dbo.ProjectForeCast pf
    WHERE (pf.YEAR_NUMBER = DATEPART(YYYY, DATEADD(MM, 0, DATEADD(WK, - 1, GETDATE())))) AND 
    (pf.MONTH_NUMBER = DATEPART(MM, DATEADD(MM, 0, DATEADD(WK, - 1, GETDATE()))))
) pfc
ON p.PROJECT_ID = pfc.PROJECT_ID 
```

我认为您将通过上述查询获得正确的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T12:57:09.937

尝试将您的`WHERE`条款移动到您的`LEFT JOIN`.

```
DECLARE @YEAR_NUMBER1 INT; SET @YEAR_NUMBER1=DATEPART(YYYY, DATEADD(MM, 0, DATEADD(WK, - 1, GETDATE())));
DECLARE @MONTH_NUMBER1 INT; SET @MONTH_NUMBER1=DATEPART(MM, DATEADD(MM, 0, DATEADD(WK, - 1, GETDATE())));
DECLARE @YEAR_NUMBER2 INT; SET @YEAR_NUMBER2=DATEPART(YYYY, DATEADD(WK, - 1, GETDATE()));
DECLARE @WEEK_NUMBER1 INT; SET @WEEK_NUMBER1=DATEPART(WK, DATEADD(WK, - 1, GETDATE()));

SELECT p.PROJECT_ID
, pfc.HOURS AS F0
FROM  project p
LEFT JOIN  projectForeCast pfc 
    ON p.PROJECT_ID = pfc.PROJECT_ID
    AND pfc.YEAR_NUMBER = @YEAR_NUMBER1
    AND pfc.MONTH_NUMBER = @MONTH_NUMBER1
    AND DATEPART(YYYY,p.[START_DATE]) = @YEAR_NUMBER2
    AND DATEPART(WK,p.[START_DATE]) = @WEEK_NUMBER1;
GO 
```

一些额外的快速提示：

*   表别名将使您的代码更具可读性
*   函数调用`WHERE`会`JOIN`减慢您的查询速度，因此请尽可能用变量替换它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T12:41:53.407

您需要检查 NULl 在 where 语句中引用项目预测的位置。

联接正在工作，但第二个表正在获取空值。使用 COALESCE 或 IS NULL。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T12:55:22.493

这是意料之中的。如果您进行左连接，即使您在右表上没有记录，您也会从左表中获取所有记录，但是由于您在 where 子句中说您希望右表上的记录 WHERE YEAR_NUMBER（例如）满足一个条件，你几乎使它成为一个常规连接，因为如果记录不存在，它们是空的，并且与任何结果相比都是空的。

您需要做的是 YEAR_NUMBER = the_year_you_want OR YEAR_NUMBER is null 来处理没有 projectForeCast 的情况

还记得`()`在每个条件下使用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-06T12:58:05.907

当您执行`LEFT JOIN`or`RIGHT JOIN`时，将条件放在`JOIN`子句中还是放在`WHERE`子句中会有所不同。

检查此答案以通过示例进行深入解释：
[这两个查询在获得两个不同的结果集时有什么区别？](https://stackoverflow.com/questions/3926969/what-is-the-difference-in-these-two-queries-as-getting-two-different-result-set/3927915#3927915)

--> 如果您还想获得没有一行的项目`projectForeCast`，那么您必须将整个条件放在`JOIN`子句而不是`WHERE`子句中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-06T13:02:10.783

LEFT JOIN 将返回项目表中的所有记录，因此您的问题在于您的 WHERE 子句，我相信问题在于您上周使用的是 DATEPART 'WEEK'。相反，您应该使用“ISOWEEK”或在 SQL2008 之前自己计算它。

```
DECLARE @TodayDayOfWeek INT
DECLARE @EndOfPrevWeek DateTime
DECLARE @StartOfPrevWeek DateTime

--get number of a current day (1-Monday, 2-Tuesday... 7-Sunday)
SET @TodayDayOfWeek = datepart(dw, GetDate())
--get the last day of the previous week (last Sunday)
SET @EndOfPrevWeek = DATEADD(dd, -@TodayDayOfWeek, GetDate())
--get the first day of the previous week (the Monday before last)
SET @StartOfPrevWeek = DATEADD(dd, -(@TodayDayOfWeek+6), GetDate()) 
```

为了测试这个理论，只需删除 LEFT JOIN 只留下项目表和相关的 where 子句。您应该看到相同的项目列表。

另一个练习是选择各个日期部分以确保它们正确匹配。我想你会发现这`DATEPART(WK...)`并没有给你预期的结果。

另一件需要注意的事情是，您将减去 1 周，这将在周一和周二运行时给出不同的结果。当您说“上周”时，您的意思是字面意义上的今天 - 7 还是您的意思是上周，如周日至周六？

试试这个查询，看看它是否能解决您的问题。

```
DECLARE @Today DATETIME,
        @TodayDayOfWeek INT, 
        @EndOfPrevWeek DATETIME, 
        @StartOfPrevWeek DATETIME, 
        @MonthPart1 INT,
        @MonthPart2 INT,
        @YearPart1 INT,
        @YearPart2 INT 

-- get a date range consisting of 'last week'
SET @Today = GETDATE()
--get number of a current day (1-Monday, 2-Tuesday... 7-Sunday) 
SET @TodayDayOfWeek = datepart(dw, @Today) 
--get the last day of the previous week (last Sunday) 
SET @EndOfPrevWeek = DATEADD(dd, -@TodayDayOfWeek, @Today) 
--get the first day of the previous week (the Monday before last) 
SET @StartOfPrevWeek = DATEADD(dd, -(@TodayDayOfWeek+6), @Today) 

--last week could span months or even years (i.e. Dec/Jan)
SET @MonthPart1 = DATEPART(MM, @StartOfPrevWeek)
SET @MonthPart2 = DATEPART(MM, @EndOfPrevWeek)

SET @YearPart1 = DATEPART(YYYY, @StartOfPrevWeek)
SET @YearPart2 = DATEPART(YYYY, @EndOfPrevWeek)

SELECT      
            dbo.Project.PROJECT_ID, 
            dbo.ProjectForeCast.HOURS AS F0
FROM         
            dbo.Project 
LEFT JOIN   dbo.ProjectForeCast ON dbo.Project.PROJECT_ID = dbo.ProjectForeCast.PROJECT_ID
WHERE       dbo.ProjectForeCast.YEAR_NUMBER IN (@YearPart1, @YearPart2) 
AND         dbo.ProjectForeCast.MONTH_NUMBER IN (@MonthPart1, @MonthPart2) 
AND         dbo.Project.START_DATE BETWEEN @StartOfPrevWeek AND @EndOfPrevWeek 
```

# objective-c - iOS UIView 作为对话框

> ID：10470514
> 
> 赞同：0
> 
> 时间：2012-05-06T12:32:28.353
> 
> 标签：objective-c, ios

这是我的代码。我可以看到出现了小对话框，然后对话框占据了整个屏幕。怎么了？

```
ChangeProfileImage *changeProfileImage =[[ChangeProfileImage alloc] init];

changeProfileImage.modalPresentationStyle = UIModalPresentationFormSheet;
changeProfileImage.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
[self presentModalViewController:changeProfileImage animated:YES];
changeProfileImage.view.superview.frame = CGRectMake(0, 0, 200, 200);//it's important to do this after 
changeProfileImage.view.superview.center = self.view.center 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T13:15:38.063

我已经准备好告诉你这段代码有什么问题，但是我设置了一个简单的 iPad 单视图应用程序并尝试了以下代码：

```
- (IBAction)FlipPressed:(id)sender {
    UIViewController *vc = [[UIViewController alloc] init];
    UIView *view = [vc view];
    [view setBackgroundColor:[UIColor redColor]];
    [vc setModalPresentationStyle:UIModalPresentationFormSheet];
    [vc setModalTransitionStyle:UIModalTransitionStyleFlipHorizontal];
    [self presentModalViewController:vc animated:YES];
    [[[vc view] superview] setFrame:CGRectMake(0, 0, 200, 200)];
    [[[vc view] superview] setCenter:[[self view] center]];
} 
```

当我尝试这个时，我得到一个 200x200 的红色框，带有圆角，它会翻转到屏幕中心的视图。

据我所知，我几乎完全复制了你的代码，我想我得到了你想要的结果，对吧？

***编辑/更新***

进一步的测试似乎表明此代码仅在 iPad 处于纵向时才能正常工作。否则，我的视图似乎“垂直”翻转（关于 iPad 的方向）并且视图未居中。

# php - 使用 php 和 mysql 有效地禁止 IP？

> ID：10470517
> 
> 赞同：2
> 
> 时间：2012-05-06T12:32:43.300
> 
> 标签：php, mysql, ip

```
CREATE TABLE `banned_ip` (
  `id` INT( 25 ) NOT NULL AUTO_INCREMENT PRIMARY KEY , 
  `ip` VARCHAR( 25 ) NOT NULL , 
  `reason` TEXT NOT NULL ) 
```

**配置文件**

```
 <?php
// config
$config['host'] = "localhost"; // host name of your mysql server
$config['user'] = "username"; // your mysql username
$config['pass'] = "password"; // your mysql password
$config['db'] = "database"; // the database your table is in.

// the @ sign is an error supressor, meaning we can use our own error messages, this connects and selects db
@mysql_connect("$config[host]","$config[user]","$config[pass]") 
    or die("There was an error connecting to the database, MySql said:<br />".mysql_error()."");
@mysql_select_db("$config[db]") 
    or die("There was an error connecting to the database, MySql said:<br />".mysql_error()."");
?> 
```

禁止.php

```
<?php 
include("connect.php"); 
$ip = $_SERVER['REMOTE_ADDR']; 
$find_ip = mysql_query("SELECT * FROM banned_ip WHERE ip='$ip'"); 
$ban = mysql_fetch_array($find_ip); 
if($ip == $ban['ip']){ 
    die("You are banned from this site!");
else {
    echo "Your Were not Banned";
    $sql = "INSERT INTO user(ip) VALUES('$ip')";
} 
?> 
```

我正在做的是检查我的数据库中的 ip 是否被禁止。如果没有被禁止，向他显示消息“你没有被禁止”并禁止他。

将他的IP存储在数据库中。然后如果他再次出现在网站上，将会显示“你被禁止进入这个网站！”

这样，我只给每个 ip 一次访问我的内容的权限。这个脚本是否足够有效？这个脚本不适合我。它没有禁止我的 ip ，而是不断向我展示我的内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T12:38:48.580

您显然正在使用不同的表格。您对banned_ip 进行选择查询，以检查该IP 是否被禁止。但是如果他没有被禁止，你尝试插入到用户表中。这样您就可以记下所有被禁止的 IP，但您不会选择它们。

此外，当您查询数据库时，执行 SELECT * 是不好的行为。只选择您需要的值（在这种情况下，它甚至无关紧要，因为您检查他是否找到了 ip 的行）。

从来没有 100% 确定的方法可以防止未登录的用户访问内容。如果您禁止某个 IP，您可能会同时禁止多个人（例如学校）。使用 cookie（以及 Sessions）效率不够，因为 cookie 可以被删除。

```
<?php 
include("connect.php"); 
$ip = $_SERVER['REMOTE_ADDR']; 
$find_ip = mysql_query("SELECT ip FROM banned_ip WHERE ip='$ip'"); 
$ban = mysql_fetch_array($find_ip); 
if($ip == $ban['ip']){ 
    die("You are banned from this site!");
else {
    echo "Your Were not Banned";
    $sql = "INSERT INTO banned_ip (ip) VALUES('$ip')";
} 
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-26T23:48:58.660

```
<?php> include "connect_to_mysql.php";
$proxy_headers = array(
    'HTTP_VIA',
    'HTTP_X_FORWARDED_FOR',
    'HTTP_FORWARDED_FOR',
    'HTTP_X_FORWARDED',
    'HTTP_FORWARDED',
    'HTTP_CLIENT_IP',
    'HTTP_FORWARDED_FOR_IP',
    'VIA',
    'X_FORWARDED_FOR',
    'FORWARDED_FOR',
    'X_FORWARDED',
    'FORWARDED',
    'CLIENT_IP',
    'FORWARDED_FOR_IP',
    'HTTP_PROXY_CONNECTION'
   );
   foreach($proxy_headers as $x){
    if (isset($_SERVER[$x])) die("You are using a proxy!");
   }

     $counter = 1873;
    $MM_redirectLoginFailed = "sorry_search.php";
   $MM_redirecttoReferrer = false;

 $dynamicList="";
 $dynamicListaa="";
 $sql = mysql_query("SELECT * FROM ip WHERE ip LIKE '%54.36.%'");
 $productCount = mysql_num_rows($sql); // count the output amount
 if ($productCount > 0) {
    // get all the product details
    while($row = mysql_fetch_array($sql)){ 
         $product_name = $row["ip"];
        $counter++;

  $sql2 = mysql_query("INSERT INTO bannedIp (bannedip_id, bannedip) VALUES ('".$counter."', '".$product_name."')") or die(mysql_error());
  echo $sql2;
   print($product_name);

     }

     } else {
     header("Location: ". $MM_redirectLoginFailed );
     }

 $ip = $_SERVER['REMOTE_ADDR']; 
$find_ip = mysql_query("SELECT * FROM bannedIp WHERE bannedip='$ip'"); 
$ban = mysql_fetch_array($find_ip); 
if($ip == $ban['bannedip']){ 
 die("You are banned from this site2!");
 }

$ip_parts = explode (".", $_SERVER['REMOTE_ADDR']);
$parts = $ip_parts[0] . $ip_parts[1];
if($parts == 5436)
{
 die("You are banned from this site1!");
 }
 <?> 
```

# javascript - Javascript通知解决方案库：桌面、可听、弹出、标题栏闪烁等

> ID：10470518
> 
> 赞同：3
> 
> 时间：2012-05-06T12:32:52.593
> 
> 标签：javascript, html, notifications

是否有任何 Javascript 库支持在长时间运行的操作结束时发出通知，例如上传？通知最好是通用的，这样如果某些技术不起作用，比如桌面通知，浏览器仍然可以引起注意。

*   响铃

*   桌面通知 (Chrome)

*   Stackoverflow.com 样式的顶部滑块弹出窗口

*   标题栏闪烁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:06:01.970

Mac OS 咆哮式的 jQuery 插件可在此处获得

[http://thrivingkings.com/sticky/](http://thrivingkings.com/sticky/)

# javascript - jQuery 根据其数据属性包装元素的最佳方法是什么？

> ID：10470524
> 
> 赞同：-1
> 
> 时间：2012-05-06T12:34:06.840
> 
> 标签：javascript, jquery, performance, algorithm

给定以下结构：

```
<ul>
    <li data-conference="Conference1" >Spain</li>
    <li data-conference="Conference1" >France</li>
    <li data-conference="Conference1" >Germany</li>
    <li data-conference="Conference1" >Italy</li>
    <li data-conference="Conference2" >Austria</li>
    <li data-conference="Conference2" >Poland</li>
    <li data-conference="Conference3" >Russia</li>
    <li data-conference="Conference3" >USA</li>
    <li data-conference="Conference3" >China</li>
</ul> 
```

考虑到性能，将其重新排列成这样的最佳方法是什么（使用 jQuery）：

```
<ul>
    <li>Spain</li>
    <li>France</li>
    <li>Germany</li>
    <li>Italy</li>
</ul>
<ul>
    <li>Austria</li>
    <li>Poland</li>
</ul>
<ul>
    <li>Russia</li>
    <li>USA</li>
    <li>China</li>
</ul> 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T12:45:41.773

我认为整体问题（按属性分组元素）很好，您应该付出更多努力尝试自己解决。

无论如何，按属性对元素进行分组非常简单。您可以创建一个`attribute value -> [element, ...]`地图，这可以通过一个对象来完成：

```
var groups = {};

$('li[data-city]').each(function() {
    var attr = $(this).attr('data-city'),
        group = groups[attr];
    if(!group) {
        group = groups[attr] = [];
    }
    group.push(this);
}); 
```

现在你有了一个 DOM 元素列表的集合。您可以遍历集合并相应地创建 HTML 列表。

例如：

```
for(var group in groups) {
    var $list = $('<ul />');
    $list.append(groups[group]);
    // now append $list somewhere
} 
```

查看[*Working with Objects* ^([MDN])](https://developer.mozilla.org/en/JavaScript/Guide/Working_with_Objects)以获取有关如何处理对象的更多信息。

只要您有对元素的引用，例如作为`NodeList`. `.each`然后，您可以使用“正常”`for`循环来迭代该列表，而不是使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T12:53:02.820

除非您在这些列表中有大量城市，否则我不会担心性能。我会考虑的唯一性能考虑是通过最小化对 DOM 的写入来避免重绘/重排。我认为在这个用例中代码的清晰性更为重要。

话虽这么说，我会用这样的东西来实现这个 - [http://jsfiddle.net/XWufy/](http://jsfiddle.net/XWufy/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T13:08:47.190

干得好：

```
(function () {
    var $list = $( '#list' );
    var lists = {};
    var $newLists = $();

    $list.children().each( function () {
        var city = $( this ).data( 'city' );
        if ( !lists[ city ] ) lists[ city ] = [];
        lists[ city ].push( this );
    });

    $.each( lists, function ( city, items ) {
        var $newList = $( '<ul />' ).append( items );
        $newLists = $newLists.add( $newList );
    });

    $list.replaceWith( $newLists );            
}()); 
```

**现场演示：http:** [//jsfiddle.net/rjt9W/6/](http://jsfiddle.net/rjt9W/6/)

顺便说一句，代码假定列表的 ID 为`"list"`. 替换此行中的选择器

```
var $list = $( ... ); 
```

以便它正确选择您的 UL 元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T12:42:28.950

使用 data 属性作为对象属性对它们进行排序，然后循环它们以构造新的 html。这应该让你开始：

```
var list = {};
// for each item
list[item.data('city')] = item.text();

// for each property of list
var ul = $('<ul>');
// for each listItem in current list
var li = $('<li>').text(listItem);
ul.append(li); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-06T12:57:16.537

试试这个：

```
var list = [];
var $div = $('#my_container_div');

$('li[data-city]').each(function() {
   var $this = $(this), data = $this.attr('data-city');
   list[ data ] = list[ data ] || [];
   list[ data ].push( $this.text() );
});

for(var data in list) {
   var $ul = $div.append('<ul/>');
   for(var li in list[data]) {
      $ul.append('<li>' + list[data][li] + '</li>');
   }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-06T12:58:25.277

试试这个：

```
<ul id="first"></ul>// you can create the ul tags by using JavaScript

$("li").each(function(){
      data  = $(this).attr("data");
      if (data == "Conference1") {
         txt = $(this).text();
         $("<li>" + txt + "</li>").appendTo("ul#first");
      }
}) 
```

# wcf - 如何防止“请求主体权限失败”导致 WCF 客户端出错？

> ID：10470525
> 
> 赞同：1
> 
> 时间：2012-05-06T12:34:17.403
> 
> 标签：wcf, authorization, principal

我有一个包含多个操作的 WCF 服务。每个操作都有“PrincipalPermission”标签，如下所示：

```
[PrincipalPermission(SecurityAction.Demand, Role = "Administrator")]
public ProductsDto GetAllProducts()
{
     // Do operation here ...
} 
```

问题是 - 如果用户不是“Administratir”角色的一部分 - 服务会抛出异常

**请求主体权限失败**

这会将客户端的通道破坏为“故障”状态。

我希望能够以某种方式捕捉到这一点并向客户发送“故障”消息，

这样客户就知道他试图做他不应该做的事情，而不会导致通道出错！

我尝试在操作中使用“try-catch”块，但没有帮助。异常发生在操作本身的“外部”。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T12:37:10.983

有一个特殊的接口[`IErrorHandler`](http://msdn.microsoft.com/en-us/library/system.servicemodel.dispatcher.ierrorhandler.aspx)，您可以实现并连接 WCF 服务来处理异常。使用`IErrorHandler`将让您处理安全异常和序列化代码抛出的任何异常。

关于客户端通道进入故障状态的另一个注意事项：我建议为您从客户端执行的每个工作单元创建一个新的客户端对象。重用客户端对象会解决这类问题。

# javascript - 只写一次“return false”来处理点击许多链接

> ID：10470526
> 
> 赞同：0
> 
> 时间：2012-05-06T12:34:46.653
> 
> 标签：javascript, refactoring, return

`return false;`有没有一种方法可以设置链接集合，而不是多次编写，这样如果点击其中任何一个，点击功能会`return false;`？我仍然希望拥有大多数链接`return true`，以便显示将`return true`与`return false`将特别感谢的代码。

目标是编写更少的代码。我也想知道这是否是一个坏主意，因为我无法理解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T12:37:54.843

最简单的方法是将一个事件监听器绑定到文档，并检查目标：http: [//jsfiddle.net/gKZ7q/](http://jsfiddle.net/gKZ7q/)

```
document.addEventListener('click', function(e) {
    if (e.target.nodeName.toUpperCase() === 'A') e.preventDefault();
}, false); 
```

*   对于带有嵌套元素的锚点，您必须添加一个额外的循环：

    ```
    var targ = e.target;
    do {
        if (targ.nodeName.toUpperCase() === 'A') {
            e.preventDefault();
            break;
        }
    } while ((targ = targ.parentNode) !== document.documentElement);
    // document.body should be fine. Using document.documentElement in case
    // that a fool places an anchor outside the <body> 
    ```

*   链接也可以通过按键事件触发。

# maven - 如何使用jetty-runner部署不使用maven的war文件

> ID：10470528
> 
> 赞同：0
> 
> 时间：2012-05-06T12:35:02.310
> 
> 标签：maven, jetty, war

嗨，最近我听说我们可以使用 jetty-runner 来部署战争文件。但我的问题是我们可以使用它来部署不使用 maven 的战争文件。我们可以使用 jetty-runner 来部署任何战争文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T11:38:21.770

jetty-runner 与 maven 是分开的，你只需要指向一个 war 文件

[http://blogs.webtide.com/janb/entry/jetty_runner](http://blogs.webtide.com/janb/entry/jetty_runner)

干杯

# entity-framework - 将 .net MVC SQL Server CE 部署到 AppHarbor 404'ing

> ID：10470530
> 
> 赞同：1
> 
> 时间：2012-05-06T12:35:26.333
> 
> 标签：entity-framework, deployment, sql-server-ce, setup-deployment, appharbor

我正在尝试将 .net MVC 应用程序部署到 AppHarbor。这是我第一次使用它并且在让它工作时遇到问题。我只是得到一个404页面。错误选项卡不显示任何内容。我认为这可能与我使用 SQL Server CE 的事实有关，所以我浏览了这个[http://blog.appharbor.com/2012/04/24/automatic-migrations-with-entity-framework-4 -3](http://blog.appharbor.com/2012/04/24/automatic-migrations-with-entity-framework-4-3)仍然没有变化。

我目前处于死胡同，因此将不胜感激。如果您需要代码示例，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T22:39:07.407

由于某种原因，我还没有弄清楚这在从分支推送时不起作用。一旦我合并到主人并推动部署工作。

# php - 将 php 变量转换为会话变量

> ID：10470531
> 
> 赞同：0
> 
> 时间：2012-05-06T12:35:50.740
> 
> 标签：php, session-state, session-variables

我在 PHP 中设置一个变量以供多次使用时遇到问题`if statements`。

虽然我的布局中有很多文件，但这些是与此问题相关的 3 个文件：

**session.php**（它实际上是一个 JavaScript 函数，它确定访问者的浏览器宽度，它包含在我的 javascript 文件中，我通过 ajax 调用调用它。但是，由于这与这个问题无关，因此避免混淆和太多此页面上的代码我避免使用该文件。）

```
<?php
    session_start();
    $_SESSION['layoutType'] = $_REQUEST['layoutType'];  
?> 
```

**核心.php**

```
<?php
    session_start();
    if (empty($_SESSION['layoutType'])) {
        echo '<script type="text/javascript"> var session=false; var layoutType;</script>';
    } else {
        echo '<script type="text/javascript"> var session=true; var layoutType=' . $_SESSION['layoutType'] . ';</script>';
    }

    $layout = 'normal';

    if (!empty($_SESSION['layoutType'])) {
       $layoutType = $_SESSION['layoutType'];
       if ( $layoutType <= 219 ) {
          $layout = 'minimal';
       } else if ($layoutType >= 220 && $layoutType <= 1024 ) {
          $layout = 'small';
       } else {
          $layout = 'normal';
       }
    $_SESSION['layout'] = $layout;

    } 
```

**索引.php**

```
<?php
include ('core/core.php');

// Function to load all the JavaScript files

getJS();

echo '<div>Your browser width is: ' . $_SESSION['layoutType'] . ' and Value of $layout variable currently is <strong>'.$layout.'</strong></div>'; 

if ($layout = 'normal') { ?>

    <?php echo '<strong>' . $layout . '</strong> is the value of $layout in session'; ?>

    <div id="sidebar">
    <p>Widgets go here</p>
    </div>

<?php } ?> 
```

**输出** ![在此处输入图像描述](../Images/408e30e00134fa0f0effa7bd3ac11fce.png)

即使，布局宽度属于小类别***（您的浏览器宽度是：872 并且 $layout 变量的值当前很小）***，它仍然显示它应该显示的位是布局宽度类别是正常的***（ normal 是会话中 $layout 的值）***。

通常这里发生的是文件中的值被`$layout`覆盖。`if statement``index.php`

**我在寻找什么？**

除了`layoutType`我还希望`$layout`根据`core.php`. 这样我就可以在网站上以各种`if statements`.

这非常重要，因为这些是我的布局中的各种小部件/内容，我想根据访问者的设备加载/不加载。因此，几乎所有的 widhets 都会被包裹到一个`if statement`.

请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T12:41:14.567

```
if ($layout = 'normal') { ?> 
```

评估为真，因为它是一个分配（使用`==`或`===`代替）。[您可以在PHP 手册](http://php.net/language.operators.comparison)中找到有关比较运算符的更多信息。

# asp.net - ASP.NET MVC 3 - 不要使用本地化验证消息

> ID：10470532
> 
> 赞同：0
> 
> 时间：2012-05-06T12:35:52.327
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, validation

我正在使用 ASP.NET MVC 3 和 DataAnnotations 验证，出于某种原因，javascript 验证显示本地化消息。我想使用默认的英文验证消息，因为整个应用程序都是英文的。

我不记得配置任何本地化，验证机制如何检测语言？

我应该如何更改我的应用程序以使用英文消息？

我搜索了互联网，但其他人似乎有完全相反的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T12:49:57.330

设置文化`global.asax`

[http://msdn.microsoft.com/en-us/library/hy4kkhe0(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/hy4kkhe0(v=vs.71).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T13:02:37.060

使用`web.config`是另一种不需要显式代码的方法：

```
<system.web>
  <globalization uiCulture="en-US" culture="en-US"/>
  ...
<system.web> 
```

我只会在`global.asax`有真正要求时设置文化，例如依赖于用户的文化：

```
User persistedUser = UserService.GetByDomainUserName( user.Name );
Thread.CurrentThread.CurrentCulture = persistedUser.Culture;
Thread.CurrentThread.CurrentUICulture = persistedUser.UICulture; 
```

然后将该代码放置在`PostAuthenticateRequest`事件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T07:38:05.157

我遇到了麻烦，看www.fentime.com，点击登录，

设置是zh-CN，但是由于服务器没有安装zh-cn语言包，所以提示词是英文。我认为这是MVC的一个错误。

# java - ArrayList 和 toString

> ID：10470536
> 
> 赞同：0
> 
> 时间：2012-05-06T12:36:34.937
> 
> 标签：java, collections, arraylist, tostring

我想问一下，如何使用 ArrayList 来存储 toString()。我有一个类，最后有一个 toString，我必须将类中的 toString 存储到 ArrayList 中。

像这样：音乐名称、作者、发行年份、当前播放 String 、 String 、 int 、 boolean

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T12:41:32.040

希望您在特定类的`toString()`方法中正确格式化文本，请
使用

```
List<String> listDesired = new ArrayList<String>( 10 );
listDesired.add( myMusicDataClassInstance.toString() ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T12:38:34.133

您可以使用该`"" + x`技巧以避免`NullPointerException`在 an`x`为空的情况下：

```
public List<String> musicToString(List<Music> musicList) {
  final List<String> strings = new ArrayList<String>();
  for (Music m : musicList) strings.add("" + m);
  return strings;
} 
```

这是因为连接运算符`+`隐式调用`String.valueOf`所有引用类型的操作数。

`String.valueOf`如果这是你的审美偏好，你也可以明确地写出来。它还具有绝对不实例化 a 的边际好处`StringBuilder`（尽管编译器很有可能会避免这种情况，因为它可以看到空字符串文字）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T13:08:22.330

问题尚不清楚，但如果您的对象已经定义了 toString() 方法，则不需要将它们单独存储在数组列表中。只需将对象添加到 arrayList 并执行`Collections.toString(yourList)`；

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T12:58:55.403

您应该覆盖`toString()`该类并在`toString()`方法中定义将该字符串转换为`ArrayList`对象的业务逻辑。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-06T14:15:47.743

```
List<String> listDesired = new ArrayList<String>( 10 ); 
```

# c# - WinRT Metro 的 Web 服务

> ID：10470543
> 
> 赞同：2
> 
> 时间：2012-05-06T12:37:30.000
> 
> 标签：c#, web-services, windows-8

我正在尝试使用 Windows 8 Xaml / C# Metro 应用程序中的 DictService Web 服务，但遇到了问题。

DictService 的 WSDL 是[http://services.aonaware.com/DictService/DictService.asmx?WSDL](http://services.aonaware.com/DictService/DictService.asmx?WSDL)

但是当我添加服务引用时，我收到以下警告：

自定义工具警告：地址“http://services.aonaware.com/DictService/DictService.asmx”的端点“DictServiceSoap12”与 Windows Metro 风格应用程序不兼容。跳过...

关于如何克服这个问题并使用 Metro Applciation 中的 DictService 的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T15:58:01.703

我想出了如何做到这一点，所以我想我不妨发布一些代码并回答我自己的问题......对于任何有兴趣从 Windows 8 Metro 应用程序调用 XML Web 服务的人来说也可能有用。

```
 public async Task<List<WordDefinition>> GetDefinitions(string word)
    {
        try
        {
            HttpClient httpclient = new HttpClient();
            var dictService = await httpclient.GetStringAsync("http://services.aonaware.com/DictService/DictService.asmx/DefineInDict?DictId=wn&word=" + word);
            XNamespace ns = "http://services.aonaware.com/webservices/";
            var dictInfo = XElement.Parse(dictService);

            var definitions = dictInfo.Descendants(ns + "Definitions");

            List<WordDefinition> defInfo = (from definition in definitions.Descendants(ns + "Definition")
                                            select new WordDefinition
                                            {
                                                Word = definition.Element(ns + "Word").Value,
                                                Definition = definition.Element(ns + "WordDefinition").Value

                                            }).ToList<WordDefinition>();

            return defInfo;
        }
        catch (Exception ex)
        {
            return new List<WordDefinition>();
        }

    }

    public class WordDefinition
    {
        public string Word { get; set; }
        public string Definition { get; set; }
    } 
```

# ssl-certificate - 新的 SSL 证书会影响现有的吗？

> ID：10470547
> 
> 赞同：2
> 
> 时间：2012-05-06T12:37:51.283
> 
> 标签：ssl-certificate

我有一个现有的域名 SSL 证书。（它实际上是一个通配符/子域证书）。

我想为同一个域购买新的 SSL 证书以延长有效期。我想在到期前做好这件事，让我有时间将它传播到我的各种服务器。（通常续订期为到期前 90 天，但我将在到期前 110 天购买）。

购买第二个证书是否会损害、失效或以其他方式对现有证书产生负面影响？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T12:41:11.407

不，这两个证书可以共存，即使它们是由同一个权威机构颁发的，并且具有相同的主题 DN，它们也是完全不同的。

# crm - 添加过滤器以添加现有按钮 crm 2011

> ID：10470549
> 
> 赞同：1
> 
> 时间：2012-05-06T12:38:01.433
> 
> 标签：crm, microsoft-dynamics

我按照此链接中的说明进行操作，但遇到了一个奇怪的问题，即当使用新的过滤视图填充查找时，当我从新视图中选择记录时，添加按钮被禁用！我调试了lookupinfo.aspx页面中的代码，发现这行代码控制了添加按钮是启用还是禁用 btnAdd.disabled = (crmGrid.InnerGrid.SelectedRecords.length == 0); 尽管有选定的记录，这行代码总是返回 true ！

谁能帮我 ？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T15:41:17.977

> 我按照此链接中的说明进行操作

哪个链接？我看不到你的问题中提到的一个。我将对您正在尝试做的事情做出一些假设。我假设您正在尝试隐藏链接到表单子网格的“添加现有”按钮。我还将假设您正在尝试手动编辑 XML 文件（这是一种艰难的方式！）。

在 CRM 2011 中将规则应用于按钮的最简单方法是使用 Erik Pool 的出色工具“Visual Ribbon Editor”（可[在此处](http://crmvisualribbonedit.codeplex.com/)获得）。

要根据所选记录隐藏“添加现有”按钮，您可以：

1.  将该工具连接到您的 CRM 环境
2.  打开“父”实体（即显示“添加现有 xxxx”按钮的记录类型
3.  选择功能区类型为“子网格”
4.  选择您要操作的按钮
5.  添加或编辑该按钮的启用规则

如果我没有描述您的问题的解决方案，也许可以增强您的问题 - 很难理解您想要实现的目标。

# java - 使用记录器计算lucene中的精度和召回率

> ID：10470554
> 
> 赞同：2
> 
> 时间：2012-05-06T12:38:36.737
> 
> 标签：java, lucene, information-retrieval, precision-recall

我使用 lucene 基准测试来测量原始代码中的精度和召回率，有两个文件，主题文件：

```
QualityQuery qqs[] = qReader.readQueries( new BufferedReader(new FileReader(topicsFile))); 
```

和 qrels 文件：

```
Judge judge = new TrecJudge(new BufferedReader(new FileReader(qrelsFile))); 
```

据我了解，这两个文件是文本文件。但我不知道我需要用什么来填充这两个文件，它们是我手动编写的，还是有一些代码可以用所需的信息填充它们。

我需要有关 lucene 程序中这种精度和召回率测量的任何帮助

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T12:52:36.403

TrecJudge 的 Javadocs [http://lucene.apache.org/core/old_versioned_docs/versions/3_4_0/api/all/org/apache/lucene/benchmark/quality/trec/TrecJudge.html](http://lucene.apache.org/core/old_versioned_docs/versions/3_4_0/api/all/org/apache/lucene/benchmark/quality/trec/TrecJudge.html)

给出：

根据Trec格式判断给定文档是否与给定质量查询相关。

TREC (http://trec.nist.gov/) 是一系列提供信息检索竞赛的会议。

我怀疑您可能必须自己做一些侦探工作，但这对我很感兴趣，我可能会添加更多信息。

一般来说，基准测试的策略是这样的：

*   提供与您感兴趣的领域相关的语料库
*   注释它的一部分以指示应该召回的内容。这可能是两组 - 一组有信息（正面），另一组没有（负面）
*   将其分为两部分 - 一部分用于训练您的应用程序，另一部分用于测试它（有更复杂的方法需要更多）
*   在您的测试集上运行评估软件。

我怀疑您将需要以 TREC 格式提供您的格式。

# matlab - matlab中的脉冲响应函数

> ID：10470560
> 
> 赞同：1
> 
> 时间：2012-05-06T12:39:34.580
> 
> 标签：matlab

Matlab中有向量求和的例子，但没有矩阵的例子。所以请帮助解决以下问题：

matlab如何编写脉冲响应函数？

我想在 Matlab 中为方程编程：

```
hij(t) = ∑_(k=1)to n (φik*φjk*e-xwk*sin(wdk(t))/(M*wdk)) 
```

*   h 是脉冲响应函数
*   φ 是振型
*   x 是常数
*   wk 是第 k 个模式 nat 频率
*   wdk 是第 k 个模式阻尼频率
*   M是质量矩阵。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T23:03:55.697

一般来说，对矩阵求和如下所示：

```
>> A = randi(5,[3,6]) % Creating a random [3 x 6] integer matrix

A =

     3     4     4     1     2     4
     3     4     4     3     3     2
     4     2     1     5     2     3

>> sum(A)  % Sums on rows (dim=1 is default) so you get a [1 x 6] vector

ans =

    10    10     9     9     7     9

>> sum(A,2) % Sums on columns (dim=2) so you get a [3 x 1] vector

ans =

    18
    19
    17 
```

同样，如果你有一个 3D 矩阵 V，那么你可以用 sum(V,3) 对切片求和。

如果您需要更具体的帮助，请注意每个输入的维度（phi_i、phi_j、M、w 和 wd）

# joomla - Joomla：无法实例化邮件功能

> ID：10470577
> 
> 赞同：0
> 
> 时间：2012-05-06T12:41:53.433
> 
> 标签：joomla

我在 joomla 中开发了一个网站，并且我有一个联系我们页面，因为该表单仅在我用于从同一域发送电子邮件时才能正常工作

例如：

发件人：rimaz@abcd.com 收件人：john@abcd.com

但是，当我发送到不同的域时，表单会出现“无法实例化邮件功能”的错误。

例如：

发件人：rimaz@abcd.com 收件人：john@gmail.com

谁能解释一下这个问题？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T17:02:14.307

而不是调试您的提供商 SMTP / 电子邮件设置，您可以使用从事 mailchimp 的人提供的新 mandrill 服务 - Mandrill ( [http://blog.mailchimp.com/public-beta-of-mandrill-smtp-email-service/](http://blog.mailchimp.com/public-beta-of-mandrill-smtp-email-service/) )使用插件：

[http://extensions.joomla.org/extensions/content-sharing/mailing-a-distribution-lists/20624](http://extensions.joomla.org/extensions/content-sharing/mailing-a-distribution-lists/20624)

> Mandrill 是一个插件，允许您的 Joomla 安装发送交易电子邮件。您唯一需要做的就是提供您的 Mandrill API 密钥并启用插件。之后，所有电子邮件（新用户注册、密码重置等）都将通过 Mandrill 服务发送。
> 
> 山魈特点：
> 
> *   使用 MailChimp 出色的电子邮件传递引擎而不是您的服务器
> *   跟踪打开并单击，以便您了解这些电子邮件对您的用户的效果。现在您可以 > 查看需要更改哪些内容以使其更有效。
> *   具有漂亮、直观的电子邮件结果报告
> *   允许您标记电子邮件并查看按标签过滤的统计信息
> 
> 为什么理解交易电子邮件对您很重要。例如，当用户在您的网站上注册 > 时，会通过 Joomla 发送一封电子邮件。但是，您没有收到任何报告来了解该电子邮件的效果。这些电子邮件作为说明发送给您的用户，告诉他们您希望他们理解的消息。他们哪里设计的好？内容写得好吗？它的结构是否正确？当它通过 Joomla 时很难说，但现在当电子邮件通过 Mandrill 时，你会明白这一切。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T00:39:53.267

这是来自您的主机的设置。您可以向他们寻求帮助以弄清楚如何使其工作，但他们正试图阻止您使用他们的主机向人们发送垃圾邮件。有时可以解决它，但并非总是如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T02:00:59.743

这通常是由于限制性邮件服务器设置而发生的，您很可能对共享主机没有影响。

如果您对服务器有更多控制权，则应修复邮件服务器设置。

如果没有，最简单的方法是使用 Joomla 的功能，使用任何 SMTP 邮件帐户发送邮件。为 Joomla 创建一个邮件帐户，并在 Joomla 的配置中输入凭据。然后，Joomla 将使用该帐户发送邮件。如果编写得当，扩展也会如此。

# sql - 在 PostgreSQL 查询中按降序聚合字符串

> ID：10470585
> 
> 赞同：12
> 
> 时间：2012-05-06T12:43:12.583
> 
> 标签：sql, postgresql, aggregate-functions, postgresql-8.4

除了问题[如何在 PostgreSQL 'group by' 查询中连接字符串字段的字符串？](https://stackoverflow.com/questions/43870/how-to-concatenate-strings-of-a-string-field-in-a-postgresql-group-by-query)

如何按降序对员工进行排序？

我正在使用不支持`string_agg()`. 我尝试使用以下内容，但不受支持：

```
array_to_string(array_agg(employee ORDER BY employee DESC), ',') 
```

对于正确答案的任何提示，我将不胜感激。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-06T13:05:24.000

在 PostgreSQL **9.0**或更高版本中，您可以[在聚合函数中对元素进行排序](https://www.postgresql.org/docs/current/sql-expressions.html#SYNTAX-AGGREGATES)：

```
SELECT company_id, string_agg(employee, ', ' ORDER BY company_id DESC)::text
FROM   tbl
GROUP  BY 1; 
```

PostgreSQL **8.4**既不可用`string_agg()`也不可用。您必须预先订购要聚合的值。为此使用子选择或[CTE](https://www.postgresql.org/docs/current/queries-with.html) (pg 8.4+)：`ORDER BY`

 **```
SELECT company_id, array_to_string(array_agg(employee), ', ')
FROM  (SELECT * FROM tbl ORDER BY company_id, employee DESC) x
GROUP  BY 1; 
```

我`company_id`另外订购，因为这应该加快随后的聚合。

不那么优雅，但速度更快。（对于 Postgres 14 仍然如此。）

看：

*   [将一列的多个结果行连接成一个，按另一列分组](https://stackoverflow.com/questions/15847173/concatenate-multiple-result-rows-of-one-column-into-one-group-by-another-column/15850510#15850510)
*   [array_agg() 的替代品？](https://stackoverflow.com/questions/9524994/alternatives-to-array-agg/9525081#9525081)**

# android - 如何获取另一个apk的类对象

> ID：10470586
> 
> 赞同：1
> 
> 时间：2012-05-06T12:43:14.993
> 
> 标签：android

我想获取另一个apk的类对象，但是试了这些方法还是没用，比如这样：</p>

```
PackageManager manager=getPackageManager();
ComponentName componentName=new  ComponentName("com.access.test.out",  "com.access.test.out.ShowIInfoActivity");
ActivityInfo activityInfo=  manager.getActivityInfo(componentName, PackageManager.GET_RECEIVERS);
Object obj= activityInfo.getClass(); 
```

但是获取的`obj`对象是空的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T13:00:45.563

您无法访问其他 APK 的代码对象。

只有一个例外：如果您的 APK与您要访问的 APK**使用相同的密钥签名，并且在两个 AndroidManifest 中设置了****相同的 android:sharedUserId**，则您可以访问该特定 APK 的代码对象。

# c# - 如何使用列表 在这里代替ArrayList？

> ID：10470587
> 
> 赞同：1
> 
> 时间：2012-05-06T12:43:17.297
> 
> 标签：c#, arraylist, generic-list

这些天来，一直听说 ArrayList 已经过时了。但我确实有使用 ArrayList 的真实案例，如下所示：

```
 ArrayList GetArrayInt()
    {
        ArrayList l = new ArrayList();
        l.Add(2);

        return l;
    }

    ArrayList GetArrayBool()
    {
        ArrayList l = new ArrayList();
        l.Add(true);

        return l;
    }

    void Process(ArrayList l)
    {
        foreach (var o in l)
        {
            if (o is int)
            {

            }
            else
            {

            }
        }
    } 
```

然后我这样打电话`Process`：

```
 private void Form1_Load(object sender, EventArgs e)
    {
        Process(GetArrayInt());
        //or
        Process(GetArrayBool());
    } 
```

底线是我不需要为`Process`整数和布尔值的 ArrayList 分别编写两个方法。

但我听到了关于 ArrayLists 的所有负面消息。所以我想使用`List<T>`. 这就是我想出的：

```
 List<bool> GetListBool()
    {
        var l = new List<bool>();
        l.Add(true);

        return l;
    }

    List<int> GetListInt()
    {
        var l = new List<int>();
        l.Add(2);

        return l;
    }

    void Process(List<object> l)
    {
        foreach (var o in l)
        {
            if (o is int)
            {

            }
            else
            {

            }
        }
    } 
```

现在我该怎么称呼它？

```
 private void Form1_Load(object sender, EventArgs e)
    {
        Process(GetListInt()); //error
        Process(GetListBool()); //error
        Process((List<object>)GetListBool()); //error
    } 
```

我在这里找到的唯一解决方案是为然后是两个方法编写单独的`Process`方法（我的实际代码要复杂得多，所以按照这种方法，我需要编写二十个这样的方法，它们都做同样的事情）。`List<bool>``List<int>``Process`

我怎样才能在方法`Process`中只写一种方法`List<T>`？即使在这里也可以`List<T>`替换 ArrayList 吗？

**更新：**所有三个答案都有效，但我最喜欢@Phil 的答案。谢谢大家

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T12:47:23.067

这是一个奇怪的例子，不是非常 OOP，但是：您确实可以使用`List<int>`,`List<bool>`等 - 并将返回类型/参数类型更改为非泛型`IList`or `IEnumerable`。奇怪的例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T12:50:27.793

您可以使用 LINQ 将类型安全列表转换为`List<object>`：

```
List<object> objList = GetListBool().Cast<object>().ToList(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T12:53:09.310

正如 Mark Gravell 所说，您的所作所为很奇怪，但您可以使用类型推断，`Process<T>(IEnumerable<T>)`如果您愿意，可以使用：

```
void Main()
{
    Process(GetInts());
    Process(GetBools());
}

IEnumerable<int> GetInts()
{
    return new List<int>{1,2,3};
}

IEnumerable<bool> GetBools()
{
    return new List<bool>{true, false, true};
}

void Process<T>(IEnumerable<T> items)
{
    foreach (var item in items)
    {
        if(item is int)
        {
           Debug.WriteLine("int: " + item.ToString());
        }
        if(item is bool)
        {
           Debug.WriteLine("bool: " + item.ToString());
        }
    }
} 
```

不需要`if(item is int)`等的更明智的方法是对每种类型的 Process 进行重载

```
void Process(IEnumerable<int> items) { foreach(...) };
void Process(IEnumerable<bool> items) { foreach(...) }; 
```

# actionscript-3 - 如何正确划分微小的双精度数而不会出现精度错误？

> ID：10470588
> 
> 赞同：11
> 
> 时间：2012-05-06T12:43:27.473
> 
> 标签：actionscript-3, floating-point, double, division, floating-accuracy

我正在尝试诊断和修复一个错误，该错误归结为 X/Y 在 X 和 Y 很小时会产生不稳定的结果：

![在此处输入图像描述](../Images/5804dbedcf35765c96b21c1541a14efd.png)

在这种情况下，cx 和 patharea 都平滑增加。它们的比率在大数时是平滑渐近线，但对于“小”数则不稳定。显而易见的第一个想法是我们正在达到浮点精度的极限，但实际数字本身却远不及它。ActionScript“数字”类型是 IEE 754 双精度浮点数，所以应该有 15 个十进制数字的精度（如果我没看错的话）。

分母（patharea）的一些典型值：

```
0.0000000002119123
0.0000000002137313
0.0000000002137313
0.0000000002155502
0.0000000002182787
0.0000000002200977
0.0000000002210072 
```

分子（cx）：

```
0.0000000922932995
0.0000000930474444
0.0000000930582124
0.0000000938123574
0.0000000950458711
0.0000000958000159
0.0000000962901528
0.0000000970442977
0.0000000977984426 
```

这些中的每一个都是单调增加的，但如上所示，该比率是混乱的。

在较大的数字下，它会稳定为平滑的双曲线。

**所以，我的问题是：当您需要将一个数除以另一个时，处理非常小的数字的正确方法是什么？**

我想提前将分子和/或分母乘以 1000，但无法完全解决。

有问题的实际代码是[这里](https://github.com/systemed/potlatch2/blob/master/net/systemeD/halcyon/WayUI.as)`recalculate()`的函数。它计算多边形的质心，但是当多边形很小时，质心会在该位置周围不规则地跳跃，并且最终可能与多边形相距很远。上面的数据系列是在一致的方向上移动多边形的一个节点的结果（用手，这就是它不完全平滑的原因）。

这是 Adob​​e Flex 4.5。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-06T13:09:52.953

我认为问题很可能是由您的代码中的以下行引起的：

```
sc = (lx*latp-lon*ly)*paint.map.scalefactor; 
```

如果您的多边形非常小，则`lx`和`lon`几乎相同，就像`ly`和一样`latp`。与结果相比，它们都非常大，因此您要减去两个几乎相等的数字。

为了解决这个问题，我们可以利用以下事实：

```
x1*y2-x2*y1 = (x2+(x1-x2))*y2 - x2*(y2+(y1-y2))
            = x2*y2 + (x1-x2)*y2 - x2*y2 - x2*(y2-y1)
            = (x1-x2)*y2 - x2*(y2-y1) 
```

所以，试试这个：

```
dlon = lx - lon
dlat = ly - latp
sc = (dlon*latp-lon*dlat)*paint.map.scalefactor; 
```

该值在数学上是相同的，但项要小一个数量级，因此误差也应该小一个数量级。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T08:03:39.060

Jeffrey Sax 正确地识别了基本问题 - 组合比最终结果（远）大的术语导致精度损失。建议的重写消除了部分问题 - 考虑到满意的反应，对于实际情况显然足够了。

但是，您可能会发现，如果多边形再次（很多）变得更小和/或更远离原点，则会再次出现不准确性。在重写的公式中，这些术语仍然比它们的差异大得多。

此外，算法中还有另一个“将大的和可比的数字与不同的符号结合起来”的问题。在多边形边缘上的后续迭代循环中的各种“sc”值有效地组合成一个最终数字，该数字比单个 sc(i) 小得多。（如果你有一个凸多边形，你会发现有一个连续的正值序列和一个连续的负值序列，在非凸多边形中，负数和正数可能交织在一起）。

该算法实际上正在做的事情是通过添加由边缘和原点跨越的三角形区域来计算多边形的面积，其中一些项是负数（每当顺时针遍历边缘时，从原点查看它）和一些积极的（逆时针走在边缘）。

您可以通过在多边形的一个角（例如 (lx,ly) 处定义原点，然后添加由边缘和该角跨越的三角形表面（因此：将 lon 转换为 ( lon-lx) 和 latp to (latp-ly) - 额外的好处是您需要减少处理两个三角形，因为显然链接到所选原点角的边产生零表面。

对于区域部分，仅此而已。对于质心部分，您当然必须将结果“转换回”到原始帧，即在末尾添加 (lx,ly)。

# c# - asp.net mvc 3 剃须刀。导航以查看表格 tr 点击

> ID：10470590
> 
> 赞同：26
> 
> 时间：2012-05-06T12:43:34.473
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, razor

我有用户列表表，我如何在 url 上导航：“../users/showprofile?userid="

当用户单击当前用户个人资料上的表格行导航时，我想制作表格

谢谢

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-05-06T12:47:26.637

在不使用 jQuery 的情况下，假设您处于如下所示的 foreach 循环中，只需将`tr`定义更改为：

```
@foreach (var user in Model.Users)
{
    <tr onclick="location.href = '@(Url.Action("ShowProfile", "Users", new { userId = user.UserId }))'">
    //rest of your markup for that table row
    </tr>
} 
```

# android - android 2.2 及以下版本的印地语字体支持

> ID：10470591
> 
> 赞同：0
> 
> 时间：2012-05-06T12:43:39.520
> 
> 标签：android, fonts, hindi

我正在开发一个必须显示印地语字体的应用程序，但是当我尝试在 android 2.2 及以下版本中执行此操作时，却没有发生同样的情况。谁能帮我解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T07:07:12.787

尝试使用[Chetan Gole 博客文章](http://chetangole.com/blog/2011/08/enabling-installing-hindi-marathi-unicode-fonts-on-android-mobile/)中的字体。

# c# - 为什么 Visual Studio 会自动生成长事件处理程序？

> ID：10470592
> 
> 赞同：0
> 
> 时间：2012-05-06T12:44:27.220
> 
> 标签：c#, visual-studio

考虑以下代码：

```
public ViewModel()
{
    PropertyChanged += new PropertyChangedEventHandler(ViewModel_PropertyChanged);
    PropertyChanged += ViewModel_PropertyChanged;
}

void ViewModel_PropertyChanged(object sender, PropertyChangedEventArgs e)
{
    throw new NotImplementedException();
} 
```

在 VisualStudio 中，如果您键入`PropertyChanged +=`，应用程序会提示您按 Tab 键以生成一个事件处理程序，该处理程序类似于我的构造函数的第一行。但是，像构造函数中的第二行一样编写它也是有效的（并且更简洁）。

这两行有不同的含义吗？如果不是，为什么 VisualStudio 喜欢生成前者？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T15:05:07.010

语句语法是相当主观的，你不能争论品味。但值得注意的是，*这两种*形式的语句都是 C# 中的语法糖。糖的长期问题是它会产生腐烂的牙齿。这种语法隐藏了*真正*发生的事情，并且永远让 C# 程序员陷入困境。

首先是简短形式，它完全混淆了编译器实际上在后台创建了一个委托对象。创建对象并不是你想隐藏在地垫下的任何东西，就像你喜欢相信垃圾收集器总是能把它做好一样。不幸的是，它没有，这给使用需要函数回调的 pinvoke 的程序员带来了麻烦。经典案例是 SetWindowsHookEx()，它使用回调让 Windows 传递挂钩事件的通知。很常见的写法是这样的：

```
hhook = SetWindowsHookEx(WH_KEYBOARD_LL, hookProc, hInstance, 0); 
```

其中*hookProc*是回调方法。那是行不通的，保证几秒钟后程序就会崩溃。C# 编译器自动创建委托对象以允许调用 hookProc 并将其传递给 SetWindowsHookEx 函数。麻烦的是，在任何地方都没有对该对象的实时引用。垃圾收集器看不到本机代码正在使用该对象。因此，下一次垃圾清扫会破坏该对象，当 Windows 稍后进行回调时，这就是一个 Big Kaboom。至少对于长格式，C# 程序员有可能意识到他最好将对象引用存储在其他地方。

长表格也很麻烦，不够长。*它完全混淆了 C# 编译器实际上创建了一个使用this*引用的委托对象。当委托目标是实例方法时会发生这种情况。当 C# 程序员编写如下代码时，这会出错：

```
 SystemEvents.UserPreferenceChanged += 
           new UserPreferenceChangedEventHandler(repaintControls); 
```

其中 repaintControls 是表单的一个实例方法，当用户更改主题时会重新绘制所有控件。这里的问题是委托对象捕获了*this*的值并将其分配给静态事件。除非您明确编写代码以再次注销事件处理程序，否则它将永远保留表单对象的引用。这个要求并不明显，当然不是来自糖，否则是 Winforms 编程中非常不常见的要求。然而，这是一个非常讨厌的内存泄漏错误，当它运行足够长的时间时，它很容易使您的程序因内存不足异常而崩溃。

好吧，这两种语法都不是完美的，而且 C# 语言不允许像 C++/CLI 那样显式分配委托目标对象的完整语法。IDE 团队不得不在困难和困难之间做出选择。他们捡起了石头。VS11会有硬的地方，无疑是受到大众需求的启发。

# android - 尽管 Eclipse 和 SDK 管理器在 Vista 上以管理员身份运行，但 Android-SDK 包安装错误

> ID：10470593
> 
> 赞同：7
> 
> 时间：2012-05-06T12:44:30.103
> 
> 标签：android, windows, eclipse, windows-vista

我正在运行 Windows Vista，并且在我的 Android 应用程序中出现错误，Eclipse 将其显示为：

```
The container 'Android Dependencies' references non existing library 'C:\Program Files\Android\android-sdk\tools\support\annotations.jar' 
```

`CornBoyzTutorial Build Path Problem`. 我去 'C:\Program Files\Android\android-sdk\tools` 文件夹看看没有`support`文件夹。Eclipse 的开始向我展示了`This version of ADT requires Android SDK Tools 17 or above. Current revision is 16\. Please update your DDK Tools to the latest version.`

我以管理员身份运行 Eclipse 并转到 Android SDK 管理器，查看 Rev.16`Android SDK Tools`到 Rev 19 的更新。我按下安装包并收到 SDK Manager:failed to 的窗口消息安装，文件夹无法移动，在 Windows 上，这通常意味着程序正在使用该文件夹..（例如防病毒），..关闭任何正在访问目录 C:\Program Files\Android\ 的正在运行的程序android-sdk\tools`，准备好后...再试一次。

控制台消息是：

```
[2012-05-06 13:35:20 - SDK Manager] Failed to rename directory C:\Program Files\Android\android-sdk\tools to C:\Program Files\Android\android-sdk\temp\ToolPackage.old01. 
```

最后的 Android SDK Manager Log 消息是：

```
Done loading packages.
Preparing to install archives
Downloading Android SDK Tools, revision 19
Installing Android SDK Tools, revision 19
Failed to rename directory C:\Program Files\Android\android-sdk\tools to C:\Program Files\Android\android-sdk\temp\ToolPackage.old01.
Done. Nothing was installed. 
```

我已关闭所有防病毒软件，并且没有程序访问此目录。我还以管理员身份直接从 Android 文件夹运行 SDK 管理器，但出现了同样的错误。我也尝试过重新启动 Windows。以前我更新的时候从来没有出现过这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-06T13:28:14.827

Android SDK 管理器（它是一个您可以自行运行的应用程序，Eclipse 只是构建它）本身位于工具目录中（澄清：我查看了 linux 版本，但猜测它在 Windows 上是一样的）。

您可以尝试将它复制到其他地方并运行它，或者手动下载并解压缩工具包，但从头开始重新安装最新的 SDK 可能是最简单的。

# spring-mvc - 使用 spring 3.x 配置速度工具

> ID：10470596
> 
> 赞同：3
> 
> 时间：2012-05-06T12:45:12.133
> 
> 标签：spring-mvc, velocity

我对spring和velocity都是新手我想用spring 3.x配置velocity工具，但我找不到关于那个的好文章
+velocity模板没有显示我从Spring控制器设置的会话变量

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T09:38:40.257

至于在 spring 3.x 中配置 Velocity 工具，首先将您的 tools.xml 文件放在有用的地方，例如：/WEB-INF/vm/toolbox.xml 然后配置您的视图解析器以查看该位置：

```
<bean id="viewResolver" class="org.springframework.web.servlet.view.velocity.VelocityViewResolver">
    ...
    <!--Other config properties in here -->
    ...
    <property name="toolboxConfigLocation" value="/WEB-INF/vm/toolbox.xml" />
</bean> 
```

一个示例 toolbox.xml 文件：

```
<toolbox>
<xhtml>true</xhtml>
<tool>
    <key>date</key>
    <scope>application</scope>
    <class>org.apache.velocity.tools.generic.DateTool</class>
    <parameter name="format" value="dd/MM/yyyy" />
</tool>
<tool>
    <key>display</key>
    <scope>application</scope>
    <class>org.apache.velocity.tools.generic.DisplayTool</class>
</tool>
<tool>
    <key>math</key>
    <scope>application</scope>
    <class>org.apache.velocity.tools.generic.MathTool</class>
</tool>
<tool>
    <key>iter</key>
    <scope>application</scope>
    <class>org.apache.velocity.tools.generic.IteratorTool</class>
</tool>
<tool>
    <key>sort</key>
    <scope>application</scope>
    <class>org.apache.velocity.tools.generic.SortTool</class>
</tool>
</toolbox> 
```

希望这一点有帮助，至少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T23:50:06.313

听起来你可能参与了这项工作，但你没有提供太多细节，所以我不知道你已经走了多远。所以我给你一个笼统的答案：先学习Spring MVC的基础知识，然后使用Spring文档了解Velocity集成。一旦你有一个使用 Spring MVC 和 JSP 的工作 Web 应用程序，使用 Velocity 模板而不是 JSP 是一个非常小的步骤。

所以首先运行一个关于 Spring MVC 的好教程，比如这个：http: [//blog.springsource.com/2011/01/04/green-beans-getting-started-with-spring-mvc/](http://blog.springsource.com/2011/01/04/green-beans-getting-started-with-spring-mvc/)

然后，当您开始工作时，请阅读（相当短的）有关 Velocity 的 Spring 文档：http: [//static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/view.html #view-速度](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/view.html#view-velocity)

本质上，您需要使用`VelocityViewResolver`那里的文档而不是`InternalResourceViewResolver`教程中的文档。然后创建 .vm Velocity 模板来代替 .jsp 文件来显示您的页面。

# c# - 如何在 C# 中检查日期

> ID：10470600
> 
> 赞同：2
> 
> 时间：2012-05-06T12:46:01.577
> 
> 标签：c#

我有 2 个日期：**date1**和**date2**；我想检查另一个日期是否在 date1 和 date2 之间，非常感谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-06T12:49:10.287

您可以只使用标准的 <、>、>= 和 <= 运算符：

```
if( someDate >= date1 && someDate <= date2 )
{
} 
```

而且，您可以为它制作自己的扩展方法：

```
public static class DateExtensions
{
    public static bool Between( this DateTime d, DateTime start, DateTime end )
    {
        return d >= start && d <= end;
    }
} 
```

您可以像这样使用它：

```
DateTime someDate = new DateTime (2012, 5, 6);

if( someDate.Between (date1, date2) )
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T12:48:45.283

这很简单：

```
if (date3 >= date1 && date3 <= date2) 
```

# qt - QLabel 占用太多空间

> ID：10470603
> 
> 赞同：12
> 
> 时间：2012-05-06T12:46:23.953
> 
> 标签：qt, qt4

我在 QStackedWidget 中使用 QLabel 和 QPLineEdit ， QLable 应该几乎是容纳这个小部件的窗口的大小。

但是当我为 QLabel 设置一个超长的文本时，它的扩展太多了，我无法水平减小窗口大小，最小宽度太大了。

我将这三个小部件的大小策略设置为`Minimum`already ，它对我不起作用。

**更新**

也许这样说更好：当没有足够的空间时，如何让 QLabel 显示部分文本

**示例代码**

```
 #include <QtGui>

int main ( int argc , char **argv ) 
{
    QApplication app (argc , argv);

    QWidget w;
    QLabel *label = new QLabel ("Very very very long text");
    label->setSizePolicy (QSizePolicy::Minimum , QSizePolicy::Fixed);
    QVBoxLayout layout (&w);
    layout.addWidget ( label );
    w.show();
    return  app.exec();
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-06T13:50:37.857

如果我理解正确，最简单的做法就是忽略该标签的水平尺寸提示。
只要您有其他小部件（或手动强制容器的最小宽度），这应该可以满足您的需求：

```
#include <QtGui>

int main(int argc, char **argv)
{
    QApplication app(argc, argv);

    QLabel *l1 = new QLabel("This very long text doesn't influence "
                            "the width of the parent widget");
    l1->setSizePolicy(QSizePolicy::Ignored, QSizePolicy::Fixed);
    // Style just to make it clear that the widget is 
    // being resized to fit the parent, it doesn't "overflow"
    l1->setFrameShape(QFrame::Box);
    l1->setFrameShadow(QFrame::Raised);
    l1->setAlignment(Qt::AlignHCenter);

    QLabel *l2 = new QLabel("This influences the width");
    l2->setFrameShape(QFrame::Box);
    l2->setFrameShadow(QFrame::Raised);

    QWidget w;
    QVBoxLayout layout(&w);
    layout.addWidget(l1);
    layout.addWidget(l2);
    w.show();
    return app.exec();
} 
```

# c - 改变单词/C的字母

> ID：10470607
> 
> 赞同：0
> 
> 时间：2012-05-06T12:46:57.310
> 
> 标签：c, arrays, alphabetical

我正在尝试编写加密算法。我更改了字母顺序。

```
char alfabe[26]={'a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z'}; 
```

更改后，我想将 last 分配给字母 z 和 y，但我无法使用这些代码。

```
 strcpy(alfabe[25],"z");
         strcpy(alfabe[26],"y"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T12:50:43.600

这至少适用于小写字母：

```
char *p;
for(p = mystr; *p; p++)
    if(*p >= 'a' && *p <= 'z')
        *p = alfabe[*p-'a']; 
```

但请记住，[转置不是加密](http://en.wikipedia.org/wiki/Transposition_cipher#Detection_and_cryptanalysis)！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T12:49:33.447

```
alfabe[24] = 'z';
alfabe[25] = 'y'; 
```

strcpy 在这里使用绝对是错误的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T13:02:48.163

也许最清楚的是写：

```
alfabe['y' - 'a'] = 'z';
alfabe['z' - 'a'] = 'y'; 
```

这使得您在表中交换 y 和 z 非常明显。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T13:07:58.710

您可以更轻松地进行简单的转置（[Caesar cypher](http://en.wikipedia.org/wiki/Caesar_cipher)）机制，而无需手动定义字母表。

```
char* text;
int i, num_transpose;

for(i=0; a[i] != '\0'; i++)  
  if (a[i] >= 'a' && a[i] <= 'z')
    text[i] = (text[i] - 'a' + num_transpose) % ('z'-'a'+1) + 'a'; 
```

这会将文本中的`num_transpose`字母按字母表中的位置移动。请注意，这仅适用于小写 ASCII 字母。

# php - PHP显示错误

> ID：10470616
> 
> 赞同：0
> 
> 时间：2012-05-06T12:48:29.387
> 
> 标签：php, mysql

我创建了以下代码，但由于某种原因，它正在回显**Array**而不是结果：

```
<?php
    include("../config.php");
    include("functions.php");

    $count = "SELECT `monthly_slots` FROM users WHERE `username` = 'Bill'";
    $count = mysql_query($count);
    $data = mysql_fetch_assoc($count);
    echo "$data";
?> 
```

有任何想法吗？

我不知道它为什么输出数组，因为该查询应该只有一个结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T12:50:10.933

试试这个

```
print_r($data); 
```

这将输出数组的内容。

的返回类型`mysql_fetch_assoc`是数组。所以你应该使用`print_r`来查看结果。

```
Returns an associative array that corresponds to the fetched row and moves the internal data
pointer ahead. mysql_fetch_assoc() is equivalent to calling mysql_fetch_array() with MYSQL_ASSOC 
for the optional second parameter. It only returns an associative array. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T12:50:28.240

mysql_fetch_assoc() 返回一个数组，您需要使用它`print_r($data)`来转储数组的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T12:51:34.180

正如[`array`](http://php.net/array)手册页所解释的，当您在字符串上下文中输出一个数组变量（`echo`如此处）时，它将变为 just `"Array"`。

要查看数组内容，请使用[`print_r`](http://php.net/print_r)or[`var_dump`](http://php.net/var_dump)代替：

```
print_r($data); 
```

或者更好的是，只需访问您想要的内容：

```
print($data["monthly_slots"]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T12:50:25.060

这是预期的。你应该试试`print_r($data)`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-06T12:53:36.673

**解决方案**

*   您可以简单地打印出数组的全部内容

    `print_r($data)`

但是，考虑到您只是在寻找特定的物品，我通常不建议您这样做。

*   您也可以尝试将输出引用为第一项（假设只有一个结果）

    `echo "$data[0]";`.

*   您也可以简单地引用您要查找的数组中的特定项目

    `echo $data['monthly_slots'].`

**参考：**

*   [php数组](http://php.net/manual/en/language.types.array.php)

*   [mysql_fetch_assoc](http://php.net/manual/en/function.mysql-fetch-assoc.php)

*   [打印_r](http://php.net/manual/en/function.print-r.php)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-06T12:54:07.517

用于`print_r($data)`打印`$data`数组或`$data['column_name']`特定行。因为`mysql_fetch_assoc()`总是返回一个数组。

# javascript - 下拉列表中的 jQuery 未定义 selectedIndex

> ID：10470622
> 
> 赞同：10
> 
> 时间：2012-05-06T12:49:20.557
> 
> 标签：javascript, jquery, drop-down-menu, selectedindex

我有一个这样的 ASP.NET 下拉列表：

```
<asp:DropDownList ID="ddlMyDropDown" runat="server">
        <asp:ListItem>Please pick one</asp:ListItem>
    <asp:ListItem>option1</asp:ListItem>
    <asp:ListItem>option2</asp:ListItem>
    <asp:ListItem>option3</asp:ListItem>
    <asp:ListItem>option4</asp:ListItem>
    </asp:DropDownList> 
```

A`CustomValidator`绑定到它，以查看用户是否选择了选项。它调用以下 javascript/JQuery 函数：

```
function checkValueSelected(sender, args) {
        var index = $("#ContentPlaceHolder1_ddlMyDropDown").selectedIndex;
        args.IsValid = index > 0;
    } 
```

但索引是`undefined`在使用 Firebug 进行调试时。JQuery 选择器找到`select#ContentPlaceHolder1_ddlMyDropDown`，所以这**不是**问题。财产不`selectedIndex`存在吗？

在互联网上，我找到了几乎完全相同的示例并且它有效。我对这个很迷茫......

# 更新

这是 Firebug 显示的内容：

![检查](../Images/8e07d3094e4fe4f5524fc38b1ee21d08.png)

如您所见，该`control`变量是某种数组，其中一个条目实际上是我想要的`control`。我不认为 JQuery 的 ID 选择器返回多个值？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-06T13:09:19.567

`selectedIndex`不在这里 ...

你应该使用`prop`jquery ...

```
var index = $("#ContentPlaceHolder1_ddlMyDropDown").prop('selectedIndex'); 
```

或者

```
 var index = $("#ContentPlaceHolder1_ddlMyDropDown").get(0).selectedIndex; 
```

# magento - Magento注册后如何重定向到主页

> ID：10470629
> 
> 赞同：2
> 
> 时间：2012-05-06T12:50:23.353
> 
> 标签：magento, redirect

我正在使用 magento 创建一个电子商务网站。目前，如果有新用户注册，则 url 将重定向到我的帐户页面。一旦新用户注册我的网站，我想显示主页。

指导我这样做。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-03-09T15:55:53.547

虽然这是一篇旧帖子，但我觉得敦促在这里提供一个新答案，因为许多其他答案公然不遵循 Magento 最佳实践（例如：直接修改核心文件）或（当它有效时）他们不必要地重写客户帐户控制器。

下面的解决方案完全通过使用观察者类来执行。以这种方式这样做将确保您的逻辑不会因升级 Magento 而丢失（如果您直接修改了核心类文件），Magento 的核心开发团队也应该选择调整`Mage_Customer_AccountController::createPostAction`在您升级站点时将引入这些更改的方法（这不会让你重写控制器类文件）。

在以下步骤中，根据需要创建任何目录以创建提到的文件。

**第 1 步：定义您的模块**

应用程序/etc/modules/Stackoverflow_Question10470629.xml

```
<?xml version="1.0"?>
<config>
    <modules>
        <Stackoverflow_Question10470629>
            <codePool>local</codePool>
            <active>true</active>
        </Stackoverflow_Question10470629>
    </modules>
</config> 
```

**第 2 步：定义模块配置**

应用程序/代码/本地/Stackoverflow/Question10470629/etc/config.xml

```
<?xml version="1.0"?>
<config>
    <modules>
        <Stackoverflow_Question10470629>
            <version>1.0.0</version>
        </Stackoverflow_Question10470629>
    </modules>
    <global>
        <models>
            <stackoverflow_question10470629>
                <class>Stackoverflow_Question10470629_Model</class>
            </stackoverflow_question10470629>
        </models>
    </global>
    <frontend>
        <events>
            <controller_action_postdispatch_customer_account_createPost>
                <observers>
                    <stackoverflow_question10470629>
                        <type>singleton</type>
                        <class>stackoverflow_question10470629/observer_frontend</class>
                        <method>controllerActionPostdispatchCreatePostAction</method>
                    </stackoverflow_question10470629>
                </observers>
            </controller_action_postdispatch_customer_account_createPost>
            <customer_register_success>
                <observers>
                    <stackoverflow_question10470629>
                        <type>singleton</type>
                        <class>stackoverflow_question10470629/observer_frontend</class>
                        <method>customerRegisterSuccess</method>
                    </stackoverflow_question10470629>
                </observers>
            </customer_register_success>
        </events>
    </frontend>
</config> 
```

**第三步：定义你的观察者类**

应用程序/代码/本地/Stackoverflow/Question10470629/Model/Observer/Frontend.php

```
<?php
/**
 * All publicly accessible method names correspond to the event they observe.
 *
 * @category    Stackoverflow
 * @package     Stackoverflow_Question10470629
 */
class Stackoverflow_Question10470629_Model_Observer_Frontend
{

    /**
     * @param Varien_Event_Observer $observer
     */
    public function customerRegisterSuccess($observer)
    {
        /* @var $session Mage_Customer_Model_Session */
        $session = Mage::getSingleton('customer/session');

        // This event occurs within Mage_Customer_AccountController::createPostAction
        // however it occurs before the controller sets it's own redirect settings.
        // Therefore we set this flag to true now, and then within the postdispatch
        // we'll redirect to our custom URL
        $session->setData('customer_register_success', true);
    }

    /**
     * @param Varien_Event_Observer $observer
     */
    public function controllerActionPostdispatchCreatePostAction($observer)
    {
        /* @var $controller Mage_Customer_AccountController */
        /* @var $session Mage_Customer_Model_Session */

        $session = Mage::getSingleton('customer/session');

        // We must test for a successful customer registration because they
        // could have failed registration despite reaching postdispatch
        // (for example: they used an existing email address)
        if ($session->getData('customer_register_success')) {
            $session->unsetData('customer_register_success');

            $url        = Mage::getBaseUrl();    
            $controller = $observer->getData('controller_action');
            $controller->getResponse()->setRedirect($url);
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T12:28:52.687

打开**Account Controller**并添加代码**$successUrl = Mage::getBaseUrl();** 在行前**返回 $successUrl;** 在函数**_welcomeCustomer()**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-29T11:56:25.507

登录、注销和注册后的重定向是 magento 中非常常见的问题。请找到下面的代码，它可以帮助你。

```
public function customerRegistration(Varien_Event_Observer $observer)    
{    
    $_session = Mage::getSingleton('customer/session');      
    $_session->setBeforeAuthUrl(CustomUrl);    
} 
```

Customurl 是您要在注册后重定向的 url。

如果您想要在登录、注销和注册后为您的电子商务网站自定义 URL 重定向的完整解决方案。自定义重定向扩展可以帮助你。单击链接以获取扩展名。[http://www.magentocommerce.com/magento-connect/custom-redirection.html](http://www.magentocommerce.com/magento-connect/custom-redirection.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T15:11:32.520

首先检查登录后重定向用户的后端是否是您需要的。转到系统 > 配置 > 在客户端选项卡下 - 客户端配置 > 登录选项 > 选择否

默认功能是将用户重定向到他在登录前访问的最后/当前页面。在我看来，如果您让客户完成产品交易并让他采取行动并登录，这应该很有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-05T12:42:54.857

在客户帐户控制器中使用以下代码

查找函数 _successProcessRegistration 和

代替`$url = $this->_welcomeCustomer($customer); // line 350`

和`$url = Mage::getBaseUrl();`

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-06T12:53:55.130

您可以覆盖 AccountController 以将客户重定向到您想要的页面。

如果您需要一个效果很好的现成解决方案，那么您可以尝试以下扩展： http:
[//www.magepsycho.com/custom-login-redirect-pro.html](http://www.magepsycho.com/custom-login-redirect-pro.html)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-08-07T11:42:42.457

转到您的客户 AccountController：

```
aap->core->code->Mage->customer->controllers->AccountController.php 
```

然后搜索`_welcomeCustomer()`功能

替换此代码：

```
$successUrl = $this->_getUrl('*/*/index', array('_secure' => true)); 
```

和 ：`$successUrl = Mage::getBaseUrl();`

这`$successUrl`将使用户在注册后返回主页。

# mongodb - 按 mongodb 中的子集合计数选择

> ID：10470633
> 
> 赞同：1
> 
> 时间：2012-05-06T12:50:35.740
> 
> 标签：mongodb, mongoid

我有一个像这样的 mongo 对象：

```
{
    "_id" : ObjectId("4fa291baf5de89b89cb03f4e"),
    "examples" : [
        "!@3123123123", "23423fd34", "23423we4234"
    ]
} 
```

我需要选择所有具有 >= 3 个示例的对象。这样做的正确方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T13:03:28.847

维护一个专用计数器变量作为文档的一部分，并使用它来执行相关查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-03T09:47:03.530

有不同的方法可以做到这一点。如果您的收藏不是很大，只有几千个条目，那么您可以这样做：

```
User.all.select {|user| !user['examples'].nil? and user['examples'].count >= 3} 
```

这会将集合中的所有条目加载到内存中，并使用 Ruby 原生特性进行选择。如果集合中有 1000 万个条目，则不应这样做。

从 MongoDB 2.2+ 开始，您可以这样做：

```
User.collection.find({'examples.2' => {'$exists' => true}}) 
```

这将返回在“示例”子集合中至少有 3 个元素的所有用户。计数从 0 开始，即子集合中元素的位置。[我们在VersionEye](https://www.versioneye.com)使用此功能来识别不关注任何内容的用户。

# ruby-on-rails - 条目没有正确保存到我的数据库中？

> ID：10470634
> 
> 赞同：1
> 
> 时间：2012-05-06T12:50:36.780
> 
> 标签：ruby-on-rails, ruby-on-rails-3, sqlite

这是我的架构文件..

```
ActiveRecord::Schema.define(:version => 20120505115340) do

  create_table "clients", :force => true do |t|
    t.string   "name"
    t.string   "detail"
    t.string   "more_detail"
    t.string   "more_details"
    t.datetime "created_at",   :null => false
    t.datetime "updated_at",   :null => false
  end

  create_table "jobs", :force => true do |t|
    t.string   "name"
    t.integer  "number"
    t.string   "responsible"
    t.string   "monthly"
    t.string   "quarterly"
    t.string   "other"
    t.datetime "created_at",  :null => false
    t.datetime "updated_at",  :null => false
  end

end 
```

这是我的迁移文件的..

```
class CreateClients < ActiveRecord::Migration
  def change
    create_table :clients do |t|
      t.string :name
      t.string :detail
      t.string :more_detail
      t.string :more_details
      t.timestamps
    end
  end
end

class CreateJobs < ActiveRecord::Migration
  def change
    create_table :jobs do |t|
      t.string :name
      t.integer :number
      t.string :responsible
      t.string :monthly
      t.string :quarterly
      t.string :other
      t.timestamps
    end
  end
end 
```

在我的视图文件中，我对其进行了设置，以便将其拉出`client.name`并显示给用户`<%= link_to client.name, client_path(client) %>`。

但是，当我创建一个新条目时，我返回的所有内容都不是`/clients/1`我在表单中指定的名称。

当我尝试迁移数据库时，什么也没有发生，然后当我尝试删除他的数据库以重新开始时，它告诉我它甚至确实存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T13:00:45.783

如果我对您的理解正确，您是否担心您的视图会显示指向`/clients/1`您新创建的对象的链接？

这是使用 Ruby on Rails 时的默认路径，并且将由您正在使用的路径助手 object_path(object) 生成。这可以自定义（参见[routes.rb](http://guides.rubyonrails.org/routing.html)指南）。如果这不是问题，那么您的应用程序正在按预期工作。

顺便说一句，默认路径中使用的数字是指给`id`定的对象。使用 ActiveRecord 存储的所有对象都将自动获得一个唯一的`id`，可用于识别该对象。就像架构中的`created_at`和`updated_at`列一样，`id`无论您是否在架构中明确定义该列，都会创建该列。

要重置数据库（删除、重新创建并迁移到当前模式），请使用以下命令：

```
rake db:reset 
```

编辑：

```
<%= link_to client.name, client_path(client) %> 
```

应生成以下 HTML（其中 CLIENT_NAME 是客户端的名称属性）

```
<a href="/clients/1">CLIENT_NAME</a> 
```

# c - C中的两种方式UDP套接字

> ID：10470637
> 
> 赞同：2
> 
> 时间：2012-05-06T12:50:54.237
> 
> 标签：c, sockets, client-server

这是关于 UDP 套接字的一个非常基本的问题。我自己已经使用它们编写了一些服务器/客户端应用程序，但我现在被卡住了，无法看到问题出在哪里。

我正在尝试做一个可以发送和接收数据报的服务器和客户端。因此，服务器在确定的套接字上等待来自客户端的请求，当它通过它接收到某些内容时，它会将其答案发送给客户端。只要服务器收到请愿书并发送回答案，它就可以工作，但客户端永远不会得到它。

我在这里展示了一些剥离的代码，只是连接的基本部分：

服务器：

```
if ((socket_id = socket(PF_INET, SOCK_DGRAM, 0)) == -1) {
    return;
}

bzero(&server_socket, sizeof(server_socket));
server_socket.sin_family = AF_INET;
server_socket.sin_addr.s_addr = INADDR_ANY;
server_socket.sin_port = htons(8724);

if (bind(socket_id, (struct sockaddr *) &server_socket, sizeof(server_socket)) == -1) {
    return;
}

bzero(dgram_buffer, 1024);
client_socket_sz = sizeof(client_socket);
if((dgram_length = recvfrom(socket_id, dgram_buffer, 1024, 0, (struct sockaddr *) &client_socket, (socklen_t *) &client_socket_sz)) == -1) {

    return;
}
if (sendto(socket_id, msg_buffer, offset, 0, (struct sockaddr *) &client_socket, (socklen_t) client_socket_sz) < 0) {

    return;
}
printf("%s\n", msg_buffer); 
```

客户：

```
if ((socket_id = socket(PF_INET, SOCK_DGRAM, 0)) < 0) {
        return;
}

if ((hostp = gethostbyname(hostname)) == 0) {
    return;
}
bzero((char *) &client_socket, sizeof(client_socket));
client_socket.sin_family = AF_INET;
client_socket.sin_port = htons(8724);
bcopy(hostp->h_addr, (char *) &client_socket.sin_addr, hostp->h_length);

bzero(msg_buffer,sizeof(msg_buffer));
memcpy(msg_buffer,"mensaje\0",sizeof("message"));

socklen_t client_socket_len = sizeof(struct sockaddr_in);
if (sendto(socket_id, msg_buffer, sizeof(msg_buffer), 0, (struct sockaddr *) &client_socket, client_socket_len) < 0) {
    return;
}
bzero(msg_buffer,sizeof(msg_buffer));
if(recvfrom(socket_id, msg_buffer, sizeof(msg_buffer), 0, (struct sockaddr *) &client_socket, &client_socket_len) == -1) {
    return;
}
printf("%s\n", msg_buffer); 
```

（我知道缓冲区及其内容没有得到很好的处理；我在我的实际应用程序中做得正确，我只是输入它来进行快速测试）

任何人都可以看看并告诉我某些设置是否错误？我在网上看过数百个例子，审查了我的旧代码......无济于事。也许我已经在这方面工作了太多小时，而我只是跳过了显而易见的事情。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T12:57:54.633

您需要绑定两个套接字。

您已经将服务器绑定到一个众所周知的端口。
您还应该将客户端绑定到端口 0。这意味着操作系统为此会话选择任意端口。绑定套接字时，您将获得数据包到该端口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T12:59:28.040

只是一个猜测。尝试在“while”循环中从套接字读取。像这样的东西：

```
int received = 0;
int tmp;
int expected = ...
while(received != expected){
    tmp = recvfrom(socket_id, msg_buffer, sizeof(msg_buffer), 0, (struct sockaddr *) &client_socket, &client_socket_len)
    if(tmp == -1){ ... }
    received += tmp;
} 
```

# google-maps-api-3 - 谷歌地图中的融合数据库

> ID：10470639
> 
> 赞同：1
> 
> 时间：2012-05-06T12:51:14.377
> 
> 标签：google-maps-api-3, google-fusion-tables

你能解释一下KML和融合表有什么不同吗？

什么时候可以使用它们？

他们之间有什么不同？

我有用于 KML 和融合表的数据库吗？

我如何找到 KML 和融合表的公共数据？

它是否有每个国家/地区的城市数据库包括纬度？

问候

约西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T22:47:08.707

我无法回答你所有的问题。但与 KML 相比，Fusion Tables 的主要优势在于 Fusion Table 中的所有地理特征（点、线、多边形）都由 Fusion Table 引擎转换为切片。这意味着当您有许多地理特征时，可以大大提高 GMap 的显示性能，例如多达 100K 点标记等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T18:15:53.917

从广义上讲，KML 提供了一种用于描述点、线和多边形等地理信息的语言。

这些描述可以在 KML 文件中，然后在 Google Earth 或 Google Maps API 的 KML 层中查看。

或者，这些描述可以导入到 Fusion Tables、在地图上查看、嵌入网站或通过 Google Maps API 中的 Fusion Tables Layer 访问。

[可以在帮助中心](http://support.google.com/fusiontables/bin/topic.py?hl=en&topic=27018)或通过[搜索](https://www.google.com/fusiontables/search?hl=en&q=country%20boundaries)找到具有可重复使用资源的公共 Fusion Tables 。

您可能还会发现此页面很有用：[使用地理数据](https://developers.google.com/fusiontables/docs/developers_guide#Geo)。

# clojure - 为什么 Clojure 的 clj-http 不能正确发送 JSON 表单参数？

> ID：10470643
> 
> 赞同：1
> 
> 时间：2012-05-06T12:51:39.080
> 
> 标签：clojure

clj-http 0.4.0 库似乎没有正确发送 JSON 参数；但是，它应该在 0.3.4 中进行修补：

*   [https://github.com/dakrone/clj-http/pull/52](https://github.com/dakrone/clj-http/pull/52)
*   [https://github.com/dakrone/clj-http/blob/master/changelog.org](https://github.com/dakrone/clj-http/blob/master/changelog.org)

很难准确判断发送的是什么，因为在 clj-http 请求选项中设置`debug`为`true`将请求参数显示为：

```
:body #<StringEntity org.apache.http.entity.StringEntity@714c7f58> 
```

为什么不以可视形式显示它们？

所以我使用 netcat 查看发送的内容，这就是它显示的内容：

**这有效...**

```
(client/request
 {:method :post
  :url "http://localhost:7474/db/data/ext/GremlinPlugin/graphdb/execute_script"
  :body (json/generate-string {:script "g.v(id)", :params {:id 321} })
  :content-type :json}) 
```

网猫输出...

```
POST /db/data/ext/GremlinPlugin/graphdb/execute_script HTTP/1.1
Content-Type: application/json; charset=UTF-8
Connection: close
Accept-Encoding: gzip, deflate
Content-Length: 50
Host: localhost:7474
User-Agent: Apache-HttpClient/4.1.3 (java 1.5)

"{\"params\":{\"id\":321},\"script\":\"g.v(id)\"}" 
```

**这行不通...**

```
(client/request
 {:method :post
  :url "http://localhost:7474/db/data/ext/GremlinPlugin/graphdb/execute_script",
  :form-params {:script "g.v(id)", :params {:id 321}}
  :content-type :json}) 
```

网猫输出...

```
POST /db/data/ext/GremlinPlugin/graphdb/execute_script HTTP/1.1
Content-Type: application/json; charset=UTF-8
Connection: close
Accept-Encoding: gzip, deflate
Content-Length: 37
Host: localhost:7474
User-Agent: Apache-HttpClient/4.1.3 (java 1.5)

{"params[id]":321,"script":"g.v(id)"} 
```

这是我第一次使用 Clojure 和 clj-http，所以我可能遗漏了一些东西——发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T04:32:46.127

这是最近对嵌套表单参数的拉取请求中引入的一个错误。我在这里修复了它：[https ://github.com/dakrone/clj-http/commit/2e5aab82029b46f0b1e28d53734c642582306539](https://github.com/dakrone/clj-http/commit/2e5aab82029b46f0b1e28d53734c642582306539)

# xml - 与 Flex 项目断开连接时释放网络摄像头

> ID：10470647
> 
> 赞同：2
> 
> 时间：2012-05-06T12:52:15.630
> 
> 标签：xml, apache-flex

我正在使用我的网络摄像头做一个 flex 项目。一切运行良好，但只有一个人认为我不知道该怎么做：当我从“视频聊天”窗口断开连接时，网络摄像头仍然打开，我无法断开它。注意：当我完成登录后，我会调用一个函数来初始化我的 Vdeo 聊天窗口中的所有内容：

```
`public function initVars() : void
    {
        urlBox_publish.text = "rtmp:/live";
        streamBox_publish.text = "cameraFeed";
        urlBox_playbk.text = "rtmp:/live";
        streamBox_playbk.text = "cameraFeed";
        initCamera();
        return;
    }// end function`

  public function initCamera() : void
    {
        trace("In InitCamera");
        myCamera = Camera.getCamera();
        if (!myCamera)
        {
            trace("Error, No camera is installed");
            errorBox_publish.text = "Error, No camera is installed";
            errorBox_publish.visible = true;
            bPlayStop_publish.visible = false;
            publishBtn.visible = false;
            cameraDetectTimer.addEventListener(TimerEvent.TIMER, initCamera);
            cameraDetectTimer.start();
            return;
        }
        myCamera.setMode(314, 214, 12);
        localVideo.attachCamera(myCamera);
        errorBox_publish.visible = false;
        bPlayStop_publish.visible = true;
        publishBtn.visible = true;
        return;
    }// end function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T16:57:14.200

要释放使用过的网络摄像头，请执行以下操作`video.attachCamera(null)`。

我也会按照上面所说的 wat dirkgently 所说的，对已处理的对象进行一些代码清理总是积极的。

# ruby-on-rails - 如何使用数据库表中的动态表单字段创建 Rails form_for？

> ID：10470648
> 
> 赞同：10
> 
> 时间：2012-05-06T12:52:23.097
> 
> 标签：ruby-on-rails, ruby

*抱歉，如果有人在某处提出并完整回答了这个问题。不确定我是否正在使用正确的 Rails 搜索这个问题。*

我想根据存储在数据库中的字段创建一个 Rails 表单。这是我的模型到目前为止的样子。

```
class Field < ActiveRecord::Base
  belongs_to :form
end

class Form < ActiveRecord::Base
  has_many :fields
end 
```

到目前为止，字段模型非常简单，带有 type:string 和 required:boolean 列。名称是我要创建的控件的名称（文本框、复选框、单选按钮）。理想情况下，我想做这样的事情：

```
<%= form_for [something here] do |f| %>
  <% @fields.each do |field| %>
    <%= field.type %><br />
  <% end %>
<% end %> 
```

我正在努力寻找一种方法来用可以正确呈现 field.type 的标签替换 <%= field.type %> 行。

这可能吗？在将字段类型和值存储为 json/xml 的字段模型中使用有效负载列会更好吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-06T14:05:59.377

就像提到的@TuteC 一样，如果要保存类型，可以使用 .send 方法动态调用每个字段：

```
<%= form_for [something here] do |f| %>
  <% @fields.each do |field| %>
    <%= f.send(field.type.to_sym, field.name) %><br />
  <% end %>
<% end %> 
```

# python - 拆分python并根据接收到的变量进行计算

> ID：10470651
> 
> 赞同：3
> 
> 时间：2012-05-06T12:52:51.647
> 
> 标签：python

我最近发布了一个关于在实例化字符时拆分字符串的问题。我想出了以下代码来计算笛卡尔坐标。但是，我收到错误 - 'TypeError: 'bool' object is unsubscriptable' -。我该如何解决？

```
add_x                    =   "s1"
add_y                    =   "a3"
sample                   =   ("0-0")
coordslst                =   sample.split('-')
user_coordinate_x        =   coordslst[0]
user_coordinate_y        =   coordslst[1]
if    (add_x.split('s'))[0] == ("s"):
    new_coordinate_x    =   str(int(user_coordinate_x) - int((add_x.split('a', 's'))[1]))
elif (add_x[0] == ('a'))[0] == ("a"):
    new_coordinate_x    =   str(int(user_coordinate_x) + int((add_x.split('a', 's'))[1]))
if    (add_y.split('s'))[0] == ("s"):
    new_coordinate_y    =   str(int(user_coordinate_y) - int((add_y.split('a', 's'))[1]))
elif  (add_y.split('a'))[0] == ("a"):
    new_coordinate_y    =   str(int(user_coordinate_y) + int((add_y.split('a', 's'))[1]))
new_coordinates     =   new_coordinate_x + "-" + new_coordinate_y
print new_coordinates 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T12:56:04.110

这里是这条线

```
elif (add_x[0] == ('a'))[0]: 
```

`(add_x[0] == ('a'))`返回`False`

并且您正在尝试访问它的第一个元素，例如`False[0]`，这没有意义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T15:45:33.027

作为旁注，这一行：

```
coordslst = sample.split('-') 
```

`2--1`当您的数据看起来像nor时，将无法正常工作`-2--1`；你需要的是：

```
sample = '-2--1'
pos = sample.index('-', 1)  # find first '-' after first character
x = sample[:pos]            # up to the dash
y = sample[pos+1:]          # skip the dash 
```

# ios - UIWebView 和保持活动？

> ID：10470662
> 
> 赞同：10
> 
> 时间：2012-05-06T12:53:38.547
> 
> 标签：ios, uiwebview, keep-alive

我正在设置一个`UIWebView`通过检索 MPJEG 流的 URL 来显示网络摄像头的内容。

我发现如果我想切换到不同的相机，如果我不重置整个内容，它看起来会更流畅`UIWebView`，而是在我加载的页面中设置一个javascript函数，以替换图像的内容， 像这样：

```
<img id='iImage' src='about:blank'>
<script type='text/javascript'>
function show(url)
{
    iImage.src = url;
}
</script> 
```

如果我不这样做，每次我切换到一个新的 url 时，都会`UIWebView`变白一两秒钟，直到准备好显示新的内容，上面的代码只是直接替换内容，没有白屏。

但是，如果我在两个视频流之间来回切换，有时会出现错误`UIWebView`，并且通过反复试验，我发现这是第四次在视图中显示相同的视频流时发生这种情况。如果我尝试在浏览器选项卡中打开 4 个视频流，则第 4 个会卡在加载周期中，直到我关闭前三个中的一个。

这让我相信：

1.  有问题的相机只能同时服务 3 个流
2.  更改标签`src`上的属性`<img...>`不会关闭上一个流

这可以链接到keepalive吗？即使我已经停止在`<img...>`标签中显示它们，webkit 浏览器系统能否保持以前的流处于活动状态？

基本上，要重现我可以这样做：

1.  将以上内容设置在一个`UIWebView`
2.  调用 4 次：`wv.EvaluateJavascript("show(url)")`

On the 4th call, I get a blue question mark in the middle.

Can keep-alive be the culprit? And if so, can I control it?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T23:49:39.893

This is being caused by WebKit not stopping loading of an image resource even if the source is changed. This normally doesn't cause a problem for images but a never-ending streaming image will cause it to never let go until the page is reloaded.

There is a bug filed against Chromium that points at this issue. [https://code.google.com/p/chromium/issues/detail?id=73395](https://code.google.com/p/chromium/issues/detail?id=73395)

From the comment thread, a workaround is to call `window.stop()` before changing the image. This is the same as clicking stop in the browser and causes all loading resources to abort. Hopefully, the fact that this isn't causing the page to reload will avoid your white flash.

I'd give the following a try:

```
<img id='iImage' src='about:blank'>
<script type='text/javascript'>
function show(url)
{
    window.stop();
    iImage.src = url;
}
</script> 
```

# file - Ada：在块语句中写入文件

> ID：10470664
> 
> 赞同：4
> 
> 时间：2012-05-06T12:53:51.277
> 
> 标签：file, ada, declare

我正在处理一个数组，其长度是在程序执行期间确定的。所以我正在使用一个`block`可以设置数组限制的语句。

我在将数组元素写入文件时遇到问题，**因为我正在使用存根进行写入过程**。我删除了存根以将所有内容都放在相同的代码中。虽然现在我的代码*可以编译并运行*，但它并没有写入文件。这是代码：

```
with Ada.Float_Text_IO;
with Ada.Integer_Text_IO;
with Ada.Text_IO; 

procedure Compute_Parameters is

Spin_Speed, Whirling_Speed        : Float;
Time_Step, Rotor_Revolutions      : Float;
Number_Of_Steps                   : Float;

begin
Ada.Text_IO.Put("Enter the spin speed ");
Ada.Float_Text_IO.Get (Item => Spin_Speed);
Ada.Text_IO.New_Line (1);
Ada.Text_IO.Put("Enter the whirling speed ");
Ada.Float_Text_IO.Get (Item => Whirling_Speed);
Ada.Text_IO.New_Line (1);
Ada.Text_IO.Put("Enter the time step ");
Ada.Float_Text_IO.Get (Item => Time_Step);
Ada.Text_IO.New_Line (1);
Ada.Text_IO.Put("Enter the number of revolutions of the rotor ");
Ada.Float_Text_IO.Get (Item => Rotor_Revolutions);

Number_Of_Steps := (360.0 / (Time_Step * Whirling_Speed)) * Rotor_Revolutions *  (Whirling_Speed / Spin_Speed);

declare

   type Vector is array (Integer range <>) of Float;
   Time_Vector                     : Vector (1 .. Integer (Float'Truncation (Number_Of_Steps)) + 1);
   Rotor_Position_Degrees          : Vector (1 .. Integer (Float'Truncation (Number_Of_Steps)) + 1);

   Count       : Integer := 0;
   Start       : Float := 0.0;
   Step        : Float := Time_Step;

   Output_Data_File                            : File_Type;

   procedure Write_Files (Output_File          : File_Type;
                          Out_1                   : Integer;
                          Out_2                   : Float;
                          Prec                    : Natural := 5
                          ) is 
   begin
      Ada.Integer_Text_IO.Put (File => Output_File, Item => Out_1);
      Ada.Text_IO.Put (Output_File, "   ");
      Ada.Float_Text_IO.Put (File => Output_File, Item => Out_2, Fore => 6, Aft => Prec, Exp => 0);
      Ada.Text_IO.New_Line (Output_File);
   end Write_Files;

 begin -- begin of Declare

     Ada.Text_IO.Put ("Put file name to write: ");
     Create (Output_Data_File, Out_File, Get_Line);

     for I in 1 .. Time_Vector'Length  loop
         Count := Count + 1;
         Time_Vector(I) := Start + Step * Float(I-1);
         Put (Integer'Image(Count));
         Ada.Text_IO.Put("   ");
         Rotor_Position_Degrees(I) := Spin_Speed * Time_Step * Float(I-1);
         Ada.Float_Text_IO.Put (Item => Rotor_Position_Degrees(I), Fore => 5, Aft  => 1, Exp  => 0);
         Ada.Text_IO.New_Line(1);

         --write to file
         Write_Files (Output_Data_File,
                      Out_1 => Count,
                      Out_2 => Rotor_Position_Degrees(I)
                      );
     end loop;

 close(Output_Data_File);

 end; -- end of Declare

end Compute_Parameters; 
```

我注意到 in 之后的 2 行`begin`根本`Declare`没有被执行：

```
Ada.Text_IO.Put ("Put file name to write: ");
Create (Output_Data_File, Out_File, Get_Line); 
```

我究竟做错了什么？

谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T16:51:38.390

`Get`在您最后一次for之后按 return`Rotor_Revolutions`在标准输入中留下一个空行，该行仍有待阅读：

```
 Ada.Text_IO.Put_Line (Ada.Text_IO.Get_Line);
 Ada.Text_IO.Put ("Put file name to write: ");
 Create (Output_Data_File, Out_File, Ada.Text_IO.Get_Line); 
```

只是为了澄清：这是`Get_Line`必需的；这`Put_Line`只是为了表明它是一个空行。

或者，使用[`Ada.Command_Line`](http://www.adaic.org/resources/add_content/standards/05rm/html/RM-A-15.html)，如本[例](https://sites.google.com/site/drjohnbmatthews/hexdump)所示。

# bash - bash，重定向后无法使用 xargs replstr

> ID：10470672
> 
> 赞同：3
> 
> 时间：2012-05-06T12:54:51.317
> 
> 标签：bash, sh

作为提交后挂钩的一部分，我尝试将所有更改为本地文件夹的文件复制到本地文件夹中 - 使用此脚本（仅附加脚本的相关部分）：

```
svnlook changed ${REPOS} -r ${REV} | sed "s/^....//" | xargs -I {} svnlook cat ${REPOS} {} -r ${REV} > /tmp/commit2/{} 
```

它不会用 xargs 参数替换第二个 {}，而是按原样使用它（创建文件名“{}”）。

输出重定向后是否可以替换参数？

谢谢，罗伊

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T13:01:54.637

不是那样的，不。shell 进行重定向，而不是`xargs`. `xargs`甚至没有“意识到”正在发生重定向。

您可以使用以下内容：

```
svnlook changed ${REPOS} -r ${REV} |
  sed "s/^....//" | 
  while read -r line ; do 
    svnlook cat ${REPOS} "$line" -r ${REV} > /tmp/commit2/"$line"
  done 
```

# matlab - 关闭脚本的详细八度音阶

> ID：10470677
> 
> 赞同：0
> 
> 时间：2012-05-06T12:55:53.990
> 
> 标签：matlab, math, octave

我在任何地方都找不到它，尝试添加--silence、--quiet 等，但脚本仍然在标准输出上打印所有内容，就好像它是交互模式一样。

我正在运行八度脚本：

```
octave script.m 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T14:29:26.357

如果你在 Linux 或 Mac OS X 机器上，你可以尝试使用标准的 shell 结构来解决你的问题：

```
octave script.m > /dev/null 
```

将吞噬脚本标准输出中的所有内容。

**编辑** 如果您关心 CPU，则您的代码要么写得不好，并且可以从重写中受益（通过在每个语句后添加至少分号），或者您可以尝试一种肮脏的解决方法。

在这种情况下，我会尝试`display`通过一个接受单个参数并且不执行任何操作的函数来隐藏该函数。如果你将该函数放在你的工作目录中，很多输出应该已经消失了。如果不是这种情况，则代码可能`fprintf`用于输出到控制台，您可以尝试隐藏该函数。但请注意，`fprintf`它通常也用于写入文件，并且具有更复杂的语法来正确重载。

这不是最好的事情，但它可能会产生更快的结果（并且在调试过程中会遇到很多麻烦）。

# php - 尝试将Javascript添加到PHP文件

> ID：10470679
> 
> 赞同：0
> 
> 时间：2012-05-06T12:56:12.900
> 
> 标签：php, javascript

我正在尝试将 javascript 添加到 php 文件中，每次添加 javascript 并保存时，它只显示 javascript 而不是页面内容的其余部分。

代码如下所示：

```
<section class="portlet grid_6 leading"> 

                    <header>
                        <h2>Time <script type="text/javascript">
<!--var currentTime = new Date()
var hours = currentTime.getHours()
var minutes = currentTime.getMinutes()
if (minutes < 10){
minutes = "0" + minutes
}
document.write(hours + ":" + minutes + " ")
if(hours > 11){
document.write("PM")
} else {
document.write("AM")
}
//-->
</script></h2> 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T13:06:09.923

我想你想显示时间，像这样修改你的代码。

```
<section class="portlet grid_6 leading"> 
<header>
    <h2>Time<span id="time_span"></span></h2>
</header>
<script type="text/javascript">
    var currentTime = new Date()
    var hours = currentTime.getHours()
    var minutes = currentTime.getMinutes()
    if (minutes < 10){
        minutes = "0" + minutes
    }
    var t_str = hours + ":" + minutes + " ";
    if(hours > 11){
        t_str += "PM";
    } else {
       t_str += "AM";
    }
    document.getElementById('time_span').innerHTML = t_str;
</script>
</section> 
```

并且请下次在编写问题时付出更多努力...格式化等可以更容易理解您的代码和问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T13:02:13.770

为什么不使用 PHP？ `<h2>Time <?php echo date("g:i A"); ?></h2>` （确保您了解服务器时间和客户端时间之间的区别）

如果显示您的 JS，则您的代码可能会被误解（至少不是 text/html）。尝试删除 HTML 注释集 ( `<!--`& `-->`)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T13:10:26.070

这是如何包含在您的页面中的？如果您通过 php（作为 include 或 ajax 请求）读取它并使用 XHTML doctype，您可能需要在 Javascript 前面加上 CDATA 标记（参见[此处](http://en.wikipedia.org/wiki/CDATA)），以便正确解释它。

我还为@Sarvesh Kumar Singh 的回复+1，因为将您的函数与其显示分开可以使代码更具可读性和可调试性。

# javascript - 单击超链接时，无法将字符串参数传递给正在调用的简单 Javascript 函数

> ID：10470680
> 
> 赞同：2
> 
> 时间：2012-05-06T12:56:38.453
> 
> 标签：javascript

这是一个非常简单的问题，但我无法弄清楚。我正在尝试将参数传递给单击超链接时调用的 Javascript 函数。

当参数是数字时它工作得很好，但当其中一个参数是字符串类型时它不起作用。我什至试图逃避他们，但不幸的是无济于事。

下面是一个非常简单的代码。

```
function temp(a, b)
{
    alert(a+ "   "+b);
}

<a href="javascript:void(0);" onclick="temp(x, 2);">Click</a> 
```

`x is undefined` `x`在这里抱怨是行不通的`onclick="temp(x, 2);"`。当我修改类似这样的函数时`temp(1,2);`，它会按照指定的方式工作并发出警报。

可能是什么原因？解决办法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T12:59:57.407

您应该避免传递未定义的变量...`x`只是一个变量，因为字符串以双引号或单引号开头和结尾

```
function temp(a, b) {
    alert(a+ "   "+b);
}

<a href="javascript:void(0);" onclick="temp('x', 2);">Click</a> 
```

我还创建了一个[小提琴](http://jsfiddle.net/UJmWc/)来展示它的工作原理

编辑：小提琴的这个版本表明你也可以切换标记中使用的引号......如果你习惯于为 JS 字符串加双引号[小提琴版本 1](http://jsfiddle.net/UJmWc/1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T13:00:01.280

```
<a href="javascript:void(0);" onclick="temp('x', 2);">Click</a> 
```

[**演示**](http://jsfiddle.net/Ky3Wq/)

使用您的代码，您将`x`它视为一个变量，虽然它没有贴花，但用引号括起来。

* * *

如果要使用该`x`变量，请将其声明为`<a>`：

```
<script>
    var x ="foo";

    function temp(a, b) {
        alert(a + "   " + b);
    }​
</script>

<a href="javascript:void(0);" onclick="temp(x, 2);">Click</a> 
```

# android - Android：按钮飞效果

> ID：10470681
> 
> 赞同：1
> 
> 时间：2012-05-06T12:56:40.480
> 
> 标签：android, animation, button

我想知道`Android`当用户启动`button`.

`UI thread`在可能只是挂起应用程序的情况下为其设置动画感觉是错误的。

那么有没有什么`API`可以有效地进行飞行？

干杯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-06T13:05:23.153

是的，即使在纯 xml 布局（当然也可以在代码中），您也可以为按钮的像素设置动画，检查 android Animation 的东西。对于自定义动画，在自定义 /res/anim 中定义您的动画 xml。对于幻灯片，我建议使用平移动画为 X 设置动画。或者只是使用内置的幻灯片动画。

像这样的简单案例：

```
//load anim from resources
Animation anim = AnimationUtils.loadAnimation(this, R.anim.my_anim);
button.startAnimation(anim); 
```

因此，将按钮放置在您希望它成为的位置，然后添加动画（因为按钮单击事件将是您将其设置为不是动画显示的位置）。

xml 中的翻译动画可能看起来像这样，根据您的需要对其进行自定义：

```
<translate xmlns:android="http://schemas.android.com/apk/res/android"
 android:fromXDelta="300%" android:toXDelta="0%"  android:duration="4000"  /> 
```

# database - 跨相同数据库与不同数据库连接表的含义

> ID：10470686
> 
> 赞同：0
> 
> 时间：2012-05-06T12:57:52.633
> 
> 标签：database, sqlite, join

我的程序`a.sqlite3`在服务器中下载文件

并且`b.sqlite3`文件已经在本地ios中。

我想加入下载`a.sqlite3`的表格`b.sqlite3`

所以我正在考虑从表中复制`a.sqlite3`并`b.sqlite3` 加入同一数据库中的表/

或者

只是`a.sqlite3's`将表与`b.sqlite3's`表连接起来。

推荐的方法是什么，或者有什么替代方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T13:28:28.993

最佳实践是使用具有多个模式的同一个数据库。每个模式都可以放在自己的文件中，如果这是首先跨 dB 分离数据的原因，则可以轻松备份该文件。一种

此外，您不能有跨多个数据库的外键约束，这是一个主要缺点

您可能想阅读这篇文章[http://www.unityjdbc.com/doc/multiple/multiplequery.html](http://www.unityjdbc.com/doc/multiple/multiplequery.html)

# javascript - 如何设计这个插件？

> ID：10470696
> 
> 赞同：0
> 
> 时间：2012-05-06T12:59:17.097
> 
> 标签：javascript, jquery, naming-conventions, coding-style

我有一个调用回调的 jQuery 插件。
我将一个对象传递给回调，但有一件事我不知道该怎么做。

在一个实例中调用回调时，它会从 ajax 调用返回并将响应传递给对象。
在另一种情况下，它传递了一`jQuery`组之前已经从 ajax 加载的包装对象。

我应该将它们都称为相同的名称，因为它们都代表相同的内容吗？它们是否应该具有不同的名称，因为一个是字符串，另一个是`jQuery`?

`jQuery`在参数对象中传递对象的约定是什么？我叫它`object.$response`吗？还是我应该忘记这个想法，然后离开两者`object.response`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T14:19:06.403

建议，按优先顺序：

*   规范化参数，以便在两种情况下都传递一组 jQuery 包装的对象，并命名参数`obj`或`jObj`
*   在一种情况下传递响应，在另一种情况下传递 jQuery 对象并命名参数`data`。请务必在代码中包含解释性注释。

在第二种方法中，您可以在回调函数内部进行如下分支：

```
function(data) {
    if(data instanceof jQuery) {
        ...
    }
    else {
        ...
    }
} 
```

# c# - 是否可以知道是否在应用程序中调用了方法？

> ID：10470697
> 
> 赞同：4
> 
> 时间：2012-05-06T12:59:18.267
> 
> 标签：c#, .net

我想尝试一些东西，但不知道是否可能。我希望我的代码能够监听 3rd 方应用程序的方法。我正在尝试确定何时调用该方法并检索传递给该方法的任何参数。

例如，在 3rd 方应用程序中调用 a 方法，如下所示：

```
LoggerClass.LogCreate(LogName, LogDetails) 
```

我想知道何时调用 LogCreate，然后通过提取 LogName 和 LogDetails 字符串来检索信息。然后我会为我自己的记录器实用程序解析 2 个字符串。

这可能吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T13:42:16.147

这正是[面向方面的编程](http://en.wikipedia.org/wiki/Aspect-oriented_programming)所支持的那种事情。

上面链接的维基百科文章表明它在 C# 中受支持，但未提供详细信息。也许这里的其他人可以 - 我自己不做 C#...

如果您没有直接在 C# 中找到支持，您可能需要查看[PostSharp](http://www.sharpcrafters.com/)。

# android - Android AnimationDrawable 不适用于所有 ListView 项目

> ID：10470698
> 
> 赞同：0
> 
> 时间：2012-05-06T12:59:23.383
> 
> 标签：android, drawable

我有带有项目的 ListView，每个项目都有 5 个 TextView，其中一个 TextView 从 Html.fromHtml 函数中获取他的文本，我使用 ImageGetter 函数来处理 HTML 中的 img 标签，图像下载异步，而图像下载我想显示 AnimationDrawable（循环进度条）。

**这是我的 ImageGetter 实现：**

```
holder.CommentText.setText(Html.fromHtml(commentObj.getComment(), new ImageGetter() {

                    @Override
                    public Drawable getDrawable(String source) {
                            Drawable  d = null;
                            if(UserSettings.LoadImages)
                            {
                                    if(commentObj.getImages()==null)
                                    {
                                            commentObj.setImages(new HashMap<String, Drawable>());
                                    }

                                    String imageLink=source;
                                    if(!imageLink.contains("http://"))
                                            imageLink="http://rotter.net"+source;
                                    if(commentObj.getImages().containsKey(imageLink))
                                    {
                                            d=commentObj.getImages().get(imageLink);
                                            d.setBounds(0, 0, d.getIntrinsicWidth(), d.getIntrinsicHeight());
                                    }
                                    else
                                    {
                                            AnimationDrawable animated=(AnimationDrawable)context.getResources().getDrawable(R.anim.image_loading);
                                            animated.setBounds(0, 0, animated.getIntrinsicWidth(), animated.getIntrinsicHeight()); 
                                            //animated.start();
                            commentObj.getImages().put(imageLink, animated);
                            DownloadImage downImg=new DownloadImage(commentObj, imageLink,v,adapter,Width,context.getResources());
                            holder.CommentText.onAttachedToWindow();
                            downImg.execute(new String[] { imageLink } );
                            return animated;
                                    }
                            }
                            return d;
                    }
            },null )); 
```

**经过一番阅读，我创建了新的自定义 TextView 类：**

```
public class NewTextView extends TextView {

    private Handler mHandler=new Handler();

    public NewTextView(Context context) {
            super(context);
            // TODO Auto-generated constructor stub
    }

    public NewTextView(Context context,AttributeSet attributeSet) {
            super(context,attributeSet);
            // TODO Auto-generated constructor stub
    }

    @Override
    protected void onAttachedToWindow() {
        super.onAttachedToWindow();

        handleAnimationDrawable(true);
    }

    @Override
    protected void onDetachedFromWindow() {
        super.onDetachedFromWindow();

        handleAnimationDrawable(false);
    }

    private void handleAnimationDrawable(boolean isPlay) {
        CharSequence text = getText();
        if (text instanceof Spanned) {
            Spanned span = (Spanned) text;
            ImageSpan[] spans = span.getSpans(0, span.length() - 1,
                    ImageSpan.class);
            for (ImageSpan s : spans) {
                Drawable d = s.getDrawable();
                if (d instanceof AnimationDrawable) {
                    AnimationDrawable animationDrawable = (AnimationDrawable) d;
                    if (isPlay) {
                        animationDrawable.setCallback(this);
                        animationDrawable.start();
                    } else {
                        animationDrawable.stop();
                        animationDrawable.setCallback(null);
                    }
                }
            }
        }
    }

    @Override
    public void invalidateDrawable(Drawable dr) {
        invalidate();
    }

    @Override
    public void scheduleDrawable(Drawable who, Runnable what, long when) {
        if (who != null && what != null) {
            mHandler.postAtTime(what, when);
        }
    }

    @Override
    public void unscheduleDrawable(Drawable who, Runnable what) {
        if (who != null && what != null) {
            mHandler.removeCallbacks(what);
        }
    }
 } 
```

**NewTextView 类负责启动和停止 AnimationDrawable**，结果是有的 AnimationDrawable 运行正常（循环进度条）而有的 AnimationDrawable 根本没有运行，它们只显示 AnimationDrawable 项中的第一个 Drawable。

可能是什么问题？为什么不是所有的 AnimationDrawables 都能正常运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-05T03:06:17.247

您可以检查项目的方法“onAttachedToWindow”是否被多次调用，每次都会导致无效。

# unicode - 使用 PHP 生成字体字符映射

> ID：10470706
> 
> 赞同：1
> 
> 时间：2012-05-06T13:00:06.360
> 
> 标签：unicode, truetype

我花了很多时间寻找使用 PHP 生成字体字符映射表的解决方案。我只希望PHP在上传字体时自动生成字体字符映射表（如下图：

![在此处输入图像描述](../Images/41c4b299fd37f686bccf4a8095c616e0.png)

这是[一个例子](http://selapa.net/khmerfonts/charmap.php?font=16)。

你能给我一个解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T09:08:08.330

您不太可能找到现成的解决方案。但写出这样的剧本并不难。以字体图的形式制作工件，但字段为空。使用 imagettftext 在这些字段中插入符号。

# jquery - 布局 jQuery 同位素

> ID：10470708
> 
> 赞同：1
> 
> 时间：2012-05-06T13:00:34.523
> 
> 标签：jquery, jquery-isotope

我们的插件 ( [http://isotope.metafizzy.co/](http://isotope.metafizzy.co/) ) 有问题，它运行良好。

但是我对盒子的顺序有疑问。我想知道它是否可以从左到右排列。我在[这里](http://clip2net.com/s/1T4B8)的屏幕上说明了我的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T06:58:08.770

**简短回答**：据我所知，在不更改代码的情况下实现此目的的唯一可能方法是使用以下方法初始化插件：

```
$('#container').isotope({ layoutMode : 'fitColumns' }); 
```

插件使用`layoutMode : 'masonry'`默认值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T11:25:55.840

很难从静态图像中分辨出您真正想要布局逻辑做什么；您是否查看了[类别行](http://isotope.metafizzy.co/custom-layout-modes/category-rows.html)以实现特定顺序？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T13:29:40.163

抱歉，同位素中没有办法同时具有布局的紧密拟合`masonry`和*保留*的顺序布局，例如 of`fitRows`或`fitColumns`

# javascript - Chrome 开发者工具：什么是片段支持？

> ID：10470711
> 
> 赞同：76
> 
> 时间：2012-05-06T13:01:18.830
> 
> 标签：javascript, google-chrome-devtools, web-inspector

从版本 19 开始，Chrome 的 Web Inspector 有一个名为“snippets support”的实验性功能。以下是激活它的方法：

1.  打开 chrome:flags，启用“开发者工具实验”，重启。

2.  打开Web Inspector（开发者工具），点击右下角的设置齿轮图标，启用“Snippets support”，重启。

    ![启用片段支持](../Images/1f0c4c7a06efe377be7ac5ea0a4b18cf.png)

3.  打开 Scripts 面板，单击左侧的“导航树”图标，然后找到一个空的 Snippets 选项卡。

    ![片段选项卡](../Images/ac3ca0aaeff0d12a746bf88f7b53d2b4.png)

我的问题是：**我可以用它做什么？我怎样才能用片段填充它？**

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2013-05-07T18:15:29.527

简而言之，代码片段是一个多行控制台、一个迭代的 JS 开发工作流，以及一个用于常见调试助手的持久存储。

**[developer.google.com/chrome-developer-tools/docs/authoring-development-workflow#snippets](https://developers.google.com/chrome-developer-tools/docs/authoring-development-workflow#snippets)**

> Snippets 可以帮助的一些用例包括：
> 
> *   **书签**- 您的所有书签都可以存储为片段，尤其是您可能希望编辑的那些。
> *   **实用程序**- 可以存储和调试用于与当前页面交互的调试助手。提供了由社区策划的此类实用程序列表。
> *   **调试**- Snippets 提供了一个具有语法高亮和持久性的多行控制台，这使得调试不仅仅是单行代码的代码更加方便。
> *   **Monkey-patching code** - 您希望在运行时修补的代码可以通过 Snippets 完成，尽管很多时候您可以在 Sources 选项卡中实时编辑代码。

[![片段截图](../Images/ad04d178b48fc839fd15d726b2daaa84.png)](https://developers.google.com/chrome-developer-tools/docs/authoring-development-workflow#snippets)

最后，我个人一直在收集一些常见的片段，您可能会将它们包含在您的武器库中：[github.com/paulirish/devtools-addons/wiki/Snippets](https://github.com/paulirish/devtools-addons/wiki/Snippets)

* * *

要快速运行代码片段，现在您可以执行此操作。Ctrl-Shift-P 用于“命令面板”，然后退格，然后使用 ! 前缀，然后键入您要运行的任何片段名称。

[![在此处输入图像描述](../Images/00422bf2253381f11b9a1a9e4c3ef151.png)](https://i.stack.imgur.com/KiwFR.png)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-08T13:53:35.180

我问保罗爱尔兰他是否知道任何事情，他也不确定，但说它还没有完全实现，并指向错误跟踪器，我找到了头[票](https://bugs.webkit.org/show_bug.cgi?id=75094)并查看了一些差异有很多的代码`FIXME: To be implemented.`评论。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-11-12T12:34:03.763

右键单击以创建一个新的。

![Chrome DevTools 代码段 — 新](../Images/d554043b6db99ee9c107880ea20fb5a8.png)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-06T20:17:09.187

Chrome 开发者工具片段支持允许创建/编辑/保存和执行 javascript 代码片段。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-08T13:21:07.037

我自己无法激活该实验（我的 中没有`Developer Tools experiments`，`chrome:flags`但从 Safari 中，我找到[了以下](http://www.seifi.org/css/whats-new-in-safari-31-web-inspector-and-sinppet-editor.html)解释：

简而言之，它“是一个小实用程序，可让您输入 HTML 和 CSS 块并即时渲染它”。

从博文来看，它在 Safari 中似乎有问题，所以 Chrome 可能还没有实现它。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-08-19T09:49:05.710

你可以在这里找到有用的片段列表[http://bgrins.github.io/devtools-snippets/](http://bgrins.github.io/devtools-snippets/)

其中一个有用的片段是“jquerify.js”——如果尚未包含 jQuery，您可以使用它将 jQuery 包含到任何页面中。

# javascript - IE7下拉菜单对齐问题

> ID：10470712
> 
> 赞同：0
> 
> 时间：2012-05-06T13:01:39.517
> 
> 标签：javascript, jquery, css, internet-explorer-7

下拉菜单与其父菜单块不对齐，而是显示在右侧。有任何想法吗？有问题的css是#top-nav li.menu-item ul.subnav

我尝试将#top-nav li.menu-item 设置为“relative”，将ul.subnav 设置为“left:0”，但没有成功。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <title></title>
  <style>
  /* @group Top Nav */
#top-nav { font: 1em Helvetica, Arial, sans-serif; color: #333; clear: right; float: right; list-style: none; z-index: 999; overflow: hidden; padding: 0; margin: 5px 0 10px; width: 640px;}
#top-nav a {text-decoration: none; }
#top-nav li { float: left; margin: 0; }
#top-nav .relative { margin: 5px 0 0 0; position: relative; width: 136px; }
#top-nav a { float: left; margin: 0 3px; font-size: 16px; outline: none; padding-left: 6px; color: #969; display: inline; }
#top-nav li.wf-active a { color: #636; }
#top-nav li li.wf-active a { color: #333; }
#top-nav a:hover { text-decoration: none; }
/*Sub Navigation*/
#top-nav li.menu-item ul { display: none; }
#top-nav li.menu-item a:hover ul.subnav { display: block; }

#top-nav li.menu-item ul.subnav { list-style-type: none; margin: 0 0 0 2px; padding: 0px; position: absolute; top: 30px; width: 100px; z-index: 1000; }

#top-nav li.menu-item ul.subnav li { float: none; }
#top-nav .subnav a { display: block; font-size: 15px; margin: 0 0 0 4px; padding: 5px 0 5px 8px; width: 100px; color: #333; }
#top-nav .subnav a:hover { background-color: #F4E9FF; color: #666; }
#top-nav .subnav a:visited { color: #333; }
.subhover { position: relative; }
ul#top-nav li a span { display: block; padding-right: 10px; padding-left: 4px; padding-top: 9px; height: 32px; }
ul#top-nav li a { cursor: pointer; }

/* @end */
  </style>
<script language="JavaScript" SRC="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  <script>
  // Top navigation
$(function(){var is_selected=false;
$('#top-nav li.menu-item').hover(function(){$('ul',this).show();var j_tab=$(this).children('a');if(j_tab.hasClass('selected'))
{is_selected=true;j_tab.removeClass('selected');j_tab.addClass('menu-tab');}
else
{j_tab.addClass('menu-tab');}},function(){$('ul',this).hide();var j_tab=$(this).children('a');if(is_selected)
{is_selected=false;j_tab.addClass('selected');j_tab.removeClass('menu-tab');}
else
{j_tab.removeClass('menu-tab');}});});$(function()
{var empty_class=false;$('#top-nav li.childless').hover(function(){var j_tab=$(this).children('a');if(j_tab.hasClass('selected'))
{empty_class=true;j_tab.removeClass('selected');j_tab.addClass('hover-tab');}
else
{j_tab.addClass('hover-tab');}},function(){var j_tab=$(this).children('a');if(empty_class)
{empty_class=false;j_tab.addClass('selected');j_tab.removeClass('hover-tab');}
else
{j_tab.removeClass('hover-tab');}});});$(function()
{$('.inactive').focus(function()
{$(this).removeClass("inactive").addClass("active");});$('.active').blur(function()
{$(this).removeClass("inactive").addClass("active");});
});
</script>
 </head>
 <body>
  <ul id="top-nav" >
   <li class="childless"><a href="/" title="" >Menu item #1</a></li>
   <li  class="menu-item"><a href="/" title="">Menu item #2</a>
    <ul  class="subnav">
     <li><a href="/" title="">Menu item #2</a></li>
     <li><a href="/" title="">Menu item #3</a></li>
     <li><a href="/" title="">Menu item #4</a></li>
     <li><a href="/" title="">Menu item #5</a></li>
     <li><a href="/" title="">Menu item #6</a></li>
     <li><a href="/" title="">Menu item #7</a></li>
     <li class="last"><a href="/" title="">Menu item #8</a></li>
    </ul>
   </li>
   <li  class="menu-item"><a href="/" title="">Menu item #2</a>
    <ul  class="subnav">
     <li><a href="/" title="">Menu item #2</a></li>
     <li><a href="/" title="">Menu item #3</a></li>
     <li><a href="/" title="">Menu item #4</a></li>
     <li><a href="/" title="">Menu item #5</a></li>
     <li><a href="/" title="">Menu item #6</a></li>
     <li><a href="/" title="">Menu item #7</a></li>
     <li class="last"><a href="/" title="">Menu item #8</a></li>
    </ul>
   </li>
   <li  class="menu-item"><a href="/" title="">Menu item #4</a>
    <ul  class="subnav">
     <li><a href="/" title="">Menu item #2</a></li>
     <li><a href="/" title="">Menu item #3</a></li>
     <li><a href="/" title="">Menu item #4</a></li>
     <li><a href="/" title="">Menu item #5</a></li>
     <li><a href="/" title="">Menu item #6</a></li>
     <li><a href="/" title="">Menu item #7</a></li>
     <li class="last"><a href="/" title="">Menu item #8</a></li>
    </ul>
   </li>
   <li class="childless"><a href="/" title="" >Menu item #5</a></li>
  </ul>
 </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T10:59:21.680

谢谢。我还从#top-nav 中删除了“溢出：隐藏”（当元素被设为相对时，下拉菜单停止工作）并将其设为“位置：相对”。在#top-nav li 中添加了“位置：相对”，在#top-nav .subnav 中添加了“左：0px”。似乎已经成功了！jsfiddle.net/hotdiggity/AbbT2

# android - 创建一个 Android 应用程序以响应特定的硬件输入

> ID：10470714
> 
> 赞同：0
> 
> 时间：2012-05-06T13:01:53.997
> 
> 标签：android, android-hardware

我是 android 的新手，我正在尝试制作一个响应硬件输入的应用程序，如相机按钮、免提通话接听按钮等。

例如拍摄相机按钮。按下时，默认相机应用程序将启动。我想要做的是阻止默认响应并使我的应用程序对此做出响应。我知道可以更换相机应用程序，但这不是我所期望的。

当按下按钮时，我的应用程序应该首先运行，一旦我的应用程序完成，我的应用程序将直接指向相机应用程序。如果这是可能的，请指出我正确的方向

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T13:22:27.603

目前，`ACTION_CAMERA_BUTTON`是有序广播。您可以创建一个`<intent-filter>`具有较高优先级的尝试在固件自己的相机应用程序之前获得控制，做您想做的事情，并调用`abortBroadcast()`以阻止较低优先级的过滤器接收此广播。

然而：

*   您无法在编译时知道固件中相机应用程序或用户可能已安装的任何其他相机应用程序的优先级是什么。

*   `ACTION_CAMERA_BUTTON`没有记录为有序广播。因此，旧版本的 Android 可能不会订购，未来版本的 Android 可能不会订购，设备制造商也不一定要订购。

*   很少有设备有 CAMERA 按钮

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T13:26:49.447

当您按下例如按下相机按钮时（如果手机有这样的按钮，大多数人都没有！），这是故意留给用户来决定要做什么。默认情况下，它会打开相机应用程序，但听起来您已经知道这一点以及如何注册活动以接收这些事件（意图）。

这将使用户在按下该按钮时选择使用哪个应用程序（或者更确切地说是 Activity）。如果用户愿意，他可以在现在弹出的列表中选择您的活动（因为现在有两种选择如何处理相机按钮按下）。他/她还可以选择始终使用列表中的选项之一。因此，如果您的应用程序是用户想要的，他可以选择它，并且如果他/她在按下按钮时总是想要您的应用程序，他/她也可以指定它。

# html - 如果文档的字体大小在 em 中指定，什么是“em”？

> ID：10470727
> 
> 赞同：13
> 
> 时间：2012-05-06T13:03:26.640
> 
> 标签：html, css, fonts, font-size, em

在 CSS 中，an`em`是基于文档字体大小的相对单位。*那么，如果文档本身*`em`的字体大小以 em 为单位衡量，那么究竟是什么？假设我们说：

 *```
<style type = "text/css">
body
{
    font-size: 1em;
}
</style> 
```

因此，`em`现在递归地定义了 an。那么浏览器是如何处理的呢？

[W3C 文档](http://www.w3.org/TR/CSS21/syndata.html)说：

> 'em' 单位等于使用它的元素的 'font-size' 属性的计算值。例外情况是 'em' 出现在 'font-size' 属性本身的值中，在这种情况下，它指的是父元素的字体大小。它可用于垂直或水平测量。（这个单位有时也被称为印刷文本中的四边形。）

但是如果元素是`document.body`，那么没有父元素呢？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-06T13:05:16.553

`body`不是文档根元素——这是一个很常见的误解。的父元素`body`is `html`，其默认字体大小与浏览器的默认字体大小设置相匹配（通常为`16px`）。¹

即使您在和上*都*`font-size`设置了ems 值，这也适用。所以如果你这样做： *`body``html`*

 *```
html, body { font-size: 2em; } 
```

然后，假设`16px`用户设置的默认字体`html`大小为`32px`（默认字体大小的两倍） ，其`body`字体大小为`64px`（其父字体大小的两倍`html`）。

* * *

¹ [准确地说，`html`元素的默认字体大小是[初始值 ，`medium`](http://www.w3.org/TR/CSS21/fonts.html#font-size-props)根据规范，它对应于用户设置的首选默认字体大小。]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T13:07:00.680

如果没有父元素定义它，它将采用浏览器的默认值 16px。

另见： http: [//pxtoem.com/](http://pxtoem.com/)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-06T13:05:34.530

它将与浏览器的默认字体大小相关，它将以物理大小指定，例如“10pt”。**

# javascript - javascript语法错误：未捕获的表达式

> ID：10470730
> 
> 赞同：0
> 
> 时间：2012-05-06T13:04:08.137
> 
> 标签：javascript, jquery

我正在创建一个 Web 应用程序，但我遇到了一个无法解决的简单问题。我把产生问题的代码放在这里：http: [//jsfiddle.net/rkumarnirmal/5w3FG/](http://jsfiddle.net/rkumarnirmal/5w3FG/)

应该显示此答案的第二个 alert() 有什么问题

```
current 
```

问题是：

```
var b = '.something';
var c = $(b).attr("id");
alert(c); 
```

没有显示id。

但是，当我给

```
var c = $('.something').attr("id");
alert(c); 
```

有用。我对选择器做错了吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T13:06:07.410

你的小提琴实际上是不同的。

```
var b = "." + a.split(/\s+/).pop(); 
```

有效，因为它`.`后面是一个类名。您将`"`和都包含`'`在字符串中，这意味着`'`它是选择器的一部分（这是一个语法错误）。

您可以传递一个字符串，例如`$("abc")`选择`abc`器。如果你使用这样的变量：

```
var selector = "abc";  // the selector abc stored in a variable as a string
$(selector);           // the selector is passed to jQuery 
```

那么你不应该使用额外`'`的 s 或`"`s。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T13:07:37.727

```
$(function(){
var a = $('#current').attr("class");
var b = "."+a.split(/\s+/).pop(); // not "'."+a.split(/\s+/).pop()+"'";
    alert(b);
var c = $(b).attr("id");
    alert(c);
}); 
```

**[演示](http://jsfiddle.net/5w3FG/4/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T13:09:10.457

```
var a = $('#current').attr("class");
var b = "." + a.split(/\s+/).pop();
alert(b);
var c = $(b).attr("id");

alert(c); 
```

# c# - 查看 Worker Role 跟踪行和日志文件

> ID：10470731
> 
> 赞同：1
> 
> 时间：2012-05-06T13:04:44.777
> 
> 标签：c#, logging, azure, cloud, azure-worker-roles

我有`.Net`Worker 角色 (Azure)，我的应用程序以这种形式写入本地日志文件：

```
StreamWriter sw = File.AppendText("aaa.log");
sw.WriteLine("Error occured"");
sw.Close(); 
```

我怎样才能看到这个日志文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T01:15:00.347

这是您提出的上述问题的直接答案：

*   如果您只是从模板创建一个空白的 Windows Azure Worker Role 并在 OnStart() 函数中添加上述代码，然后在 Compute Emulator 中测试您的应用程序：

    ```
    public override bool OnStart()
    {
        // Set the maximum number of concurrent connections 
        ServicePointManager.DefaultConnectionLimit = 12;
        StreamWriter sw = File.AppendText("aaa.log");
        sw.WriteLine("Error occured");
        sw.Close();

        return base.OnStart();
    } 
    ```

*   您将看到 aaa.log 文件在以下位置创建，您可以匹配文件夹详细信息，因为我的测试应用程序名称是“TestWorkerRole”：

    _your_drive_and_Folder_path\TestWorkerRole\TestWorkerRole\csx\Debug\roles\WorkerRole1\approot\aaa.log

*   我还可以验证它是否也包含文本“发生错误”，因此代码按预期执行。

*   当您将完全相同的应用程序部署到 Windows Azure 时，代码将运行，您会发现在以下位置生成了相同的 aaa.log 文件：

    E:\approot\bin

上述方法是否正确，根本不正确，您不得使用它，原因如下：

*   Windows Azure VM 没有持久化，因此您创建的任何内容以后都可能无法使用，因此您必须有办法移动数据
*   Windows Azure 提供了一种在应用程序中添加诊断的特定方法，其中所有日志都创建在 Windows Azure VM 中的特定固定位置，然后根据您的设置（Azure 存储和传输日志的时间）从 Azure 传输这些日志VM 到您的 Windows Azure 存储。
*   您必须使用 Windows Azure 诊断方法来添加以下链接中描述的任何自定义日志方法：

[http://msdn.microsoft.com/en-us/library/hh180875.aspx](http://msdn.microsoft.com/en-us/library/hh180875.aspx)

# validation - 验证来自表单的整数输入

> ID：10470735
> 
> 赞同：16
> 
> 时间：2012-05-06T13:05:17.363
> 
> 标签：validation, symfony

我有一个包含多个字段的实体。其中一个正在表单提交后进行验证，如下所示：

```
/**
 * @var integer $anzahl
 *
 * @ORM\Column(name="anzahl", type="integer")
 * @Assert\NotBlank(message="Bitte geben Sie eine Kistenanzahl an.")
 * @Assert\Type(type="numeric", message="Die Kistenanzahl muss eine Zahl sein.")
 * @Assert\Min(limit="1", message="Sie müssen mindestens eine Kiste suchen oder anbieten.")
 */
private $anzahl; 
```

我对这个解决方案有两个问题：

只应接受大于零的整数值。但是，此验证也接受浮点数/双精度数。但是，如果我更改`@Assert\Type(type="numeric")`为`@Assert\Type(type="integer")`无输入，则验证为真。如何验证我的输入是否为整数值？

另一个问题是，在输入明显无效的值（如一串字母）后，我不仅收到用于类型验证的德语错误消息，还收到英文消息“此值应该是有效数字”。此消息来自哪里，我该如何摆脱它？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-07T06:51:28.023

你应该使用：

```
@Assert\Type(type="integer") 
```

但要小心，你应该将它与 a 一起使用`IntegerType`，而不是 a`NumberType`或 a `TextType`：

```
Symfony\Component\Form\Extension\Core\Type\IntegerType 
```

`IntegerType``NumberType`除了它集成了适当的[数据转换](http://symfony.com/doc/current/form/data_transformers.html)器之外，它是相同的。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-08-20T14:06:25.017

这对我有用：

```
 ->add('field_name', 'integer', array(
     'label' => 'Your label here', 
     'data' => 0, // default value
     'precision' => 0, // disallow floats
     'constraints' => array(
         new Assert\NotBlank(), 
         new Assert\Type('integer'), 
         new Assert\Regex(array(
             'pattern' => '/^[0-9]\d*$/',
             'message' => 'Please use only positive numbers.'
             )
         ),
         new Assert\Length(array('max' => 2))
     )
 )) 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-09-12T01:05:53.540

如果字段类型应该是字符串，您可以使用它来代替：

```
/**
 * @Assert\Type(type="digit")
 */ 
```

虽然[文档中没有提到，但](http://symfony.com/doc/current/reference/constraints/Type.html)也`TypeValidator`使用了`ctype_*`函数。

见[`\Symfony\Component\Validator\Constraints\TypeValidator`](https://github.com/symfony/symfony/blob/v2.3.4/src/Symfony/Component/Validator/Constraints/TypeValidator.php#L36)：

```
public function validate($value, Constraint $constraint)
{
  ...

  $ctypeFunction = 'ctype_'.$type;

  ...

  } elseif (function_exists($ctypeFunction) && call_user_func($ctypeFunction, $value)) {

  ...
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-06T14:27:38.947

您可以使用

```
/**
 * @Assert\Regex(pattern="/\d+/")
 */ 
```

或使用`ctype_digit`.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-01-16T11:50:59.887

从 Symfony v2.3 版本开始，您应该使用：

```
/**
 * @Assert\Type(type="integer")
 * @Assert\GreaterThan(0)
 */ 
```

但请记住，表单字段类型应该是整数（`IntegerType::class`），否则我会得到否定的验证。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-19T05:31:10.233

我必须`number`在表单字段类型中使用，但它`*`在输入标签旁边显示了一个星号，尽管它不是强制性的。所以，我也不得不使用`'required' => false`。表单字段类型`integer`不起作用。基础字段数据类型是`smallint`.

```
->add('storey', 'number', array('required' => false)) 
```

在提供或不提供类型时，YML 中的`Regex`约束也不起作用。`integer`我不知道为什么

```
storey:
    - Regex: '/^[0-9]+$/' 
```

我的 Symfony 版本是 2.7。

# asp.net - .CFM 文件的 Asp.net 处理或从 .cfm 重定向到 .aspx 页面？

> ID：10470740
> 
> 赞同：1
> 
> 时间：2012-05-06T13:05:34.930
> 
> 标签：asp.net, redirect, coldfusion

我有一个旧的 .cfm (ColdFusion) 页面，用于处理表单数据（来自远程服务器）并根据表单数据向用户发送电子邮件。现在我不再使用 ColdFusion，而是托管在“免费”的 ASP.NET (3.5) 上。我不确定我对此有多少控制权。但我在想我是否可以拥有一个 global.asax 文件，其中所有转到 .cfm 页面的请求（实际上是表单帖子）都被重定向到我可以进行所需处理的 aspx 页面。如何在共享托管服务提供商的限制范围内做到这一点？我知道我可以在 IIS 中创建一个虚拟目录。例如，www.xyz.com/processform.cfm 可以定向到 www.xyz.com/processform.aspx？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T13:28:33.570

有两种方法可以做到：

如果要将每个 cfm 文件映射到 aspx 页面，可以通过将 urlMapping 集合添加到 system.web 部分来实现：

```
<system.web>
    <urlMappings>
        <add url="~/mypage.cfm" mappedUrl="~/mypage.aspx"/>
    </urlMappings>
</system.web> 
```

如果您想全局处理对 .cfm 文件的任何请求，您可以在开始请求事件中的 global.asax 中执行此操作：

```
 protected void Application_BeginRequest(object sender, EventArgs e)
 {
        if(HttpContext.Current.Request.CurrentExecutionFilePathExtension == ".cfm")
        {
            // Do what ever you need to do
        }
 } 
```

两种方式都不依赖于主机，所以 Godaddy 不是问题。

在第一个选项中，表单数据将被维护，而在第二个选项中，您必须编写逻辑以将表单数据传递到要重定向的页面。

如果我没有错，但我不确定，也许 Server.Transfer 维护表单数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T23:19:12.187

Koby Mizrahy 很接近帮助我。我的问题是我在 GoDaddy 的 IIS 经典模式下运行 Blog Engine .NET 2.0 作为我网站的主要应用程序。因此 .cfm 扩展名没有被 ASP.NET 引擎处理，因此对 Web.Config 或 Global.asax 的任何更改都没有帮助。我不得不更改为集成模式。这是我所做的修复：

在 Web.Config 中，将其添加到“处理程序”节点中，以确保将处理 .cfm 的表单帖子，否则我会收到一些 405 错误。

```
 <add name="ColdFusion" path="*.cfm" verb="*" type="System.Web.StaticFileHandler" resourceType="Unspecified" preCondition="integratedMode" /> 
```

然后在 global.asax 中，我在 Application_beginrequest 处理程序中有这个

```
if (Request.Url.ToString().Contains("TourEmail-act.cfm"))// 
    {
   Server.Transfer("/360Flash/TourEmail-act.aspx");
   }
 } 
```

问题解决了！非常感谢米兹拉伊！

# android - 带有 JSON 数组的 ExpandableListView

> ID：10470741
> 
> 赞同：1
> 
> 时间：2012-05-06T13:05:58.587
> 
> 标签：android, json, expandablelistview

如果我想要一个 ExpandableListView，它从服务器（JSON 数组）的响应中获取其组及其子级的数据。
我该怎么做？
我知道有 SimpleCursorTreeAdapter，但它只用于光标，我以前用过，但我需要任何等效的这个适配器才能将它与 JSON 数组一起使用

这是获取 groupItems 的函数

```
 protected void BindOrederItemList(final int order_id) 
    {
        // TODO Auto-generated method stub
        //select all categories from order items where order_id =??
        //select items where category=??
        String Url="http://192.168.3.113/mywebservices.php?op=GetOrderCategory&lang_id=1&order_id="+order_id;
        GetNetworkData.OnPostExecuteListener listener=new GetNetworkData.OnPostExecuteListener() 
        {

            @Override
            public void onPostExecute(String result) {
                // TODO Auto-generated method stub
                if (result!=null)
                {
                    try
                    {

                 JSONArray jArray = new JSONArray(result);
                 HashMap<String, String> Catmap = new HashMap<String, String>();
               //  ArrayList<Integer> category=new ArrayList<Integer>();
                 for (int i = 0; i < jArray.length(); i++) 

                    {

                        JSONObject e = jArray.getJSONObject(i);
                            id=e.getInt("order_id");

                         cat_name=e.getString("cat_name");
                          cat_id=e.getInt("cat_id");
                          Catmap.put("cat_id",String.valueOf(cat_id));
                          Catmap.put("cat_name", cat_name);
                          catItemsList.add(Catmap);

                    }
                Log.i("Insid For Loop", "Group size = "+catItemsList.toArray());

                      //  Log.i("Bind item", "CAT SIZE "+catItemsList.size());

                        }
                    catch(Exception e)
                    {
                        e.printStackTrace();
                    }
                }

            }

        };

        try
        {
        GetNetworkData task = new GetNetworkData(Url,null,listener);
        task.execute();
        }
        catch(Exception e)
        {

            e.printStackTrace();

        }
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T13:21:07.923

一种方法是使用[SimpleExandableListAdapter](http://developer.android.com/reference/android/widget/SimpleExpandableListAdapter.html)。

在这种情况下，您必须先获取 JSON 数据，然后将其存储为地图列表。您可以使用[AsyncTaskLoader](http://developer.android.com/reference/android/content/AsyncTaskLoader.html)来完成，您可以在其中获取并重新打包数据，然后在后台创建适配器的新实例，然后将其交换到 ExandableListView。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T08:01:52.190

我已经解决了当数据是动态的并且来自 mySQL 数据库（JSON 数组）时如何处理可扩展列表的问题，这就是答案

```
 protected void BindOrederItemList(final int order_id) 
    {
        // TODO Auto-generated method stub
        //select all categories from order items where order_id =??
        //select items where category=??

        JSONObject params = new JSONObject();
        //int    no_pepole=Integer.valueOf(noOfGest_txt.getText().toString());
            try
            {
        //  params.put("order_status",myStatus);
         int rest_id=prefs.getInt("Rest_id", 0);
            params.put("order_id", order_id);
            params.put("lang_id", 1);
            params.put("rest_id", rest_id );
            //params.put("order_status", 0);
        //  params.put("noOfpepole",number_of_guest);
            }
            catch(Exception e)
            {
                e.printStackTrace();
            }

        String Url="http://192.168.3.113/mywebservices.php?op=GetOrderCategory";
        GetNetworkData.OnPostExecuteListener listener=new GetNetworkData.OnPostExecuteListener() 
        {

            @Override
            public void onPostExecute(String result) {
                // TODO Auto-generated method stub
                if (result!=null)
                {
                    try
                    {
                     catItemsList.clear();
                 JSONArray jArray = new JSONArray(result);
                 ArrayList<ArrayList<HashMap<String, String>>> list=new ArrayList<ArrayList<HashMap<String, String>>>();
               //  ArrayList<Integer> category=new ArrayList<Integer>();

                 for (int i = 0; i < jArray.length(); i++) 

                    {
                      HashMap<String, String> Catmap = new HashMap<String, String>();

                        JSONObject e = jArray.getJSONObject(i);
                            id=e.getInt("order_id");

                         cat_name=e.getString("cat_name");
                          cat_id=e.getInt("cat_id");
                          Catmap.put("cat_id",String.valueOf(cat_id));
                          Catmap.put("cat_name", cat_name);
                          catItemsList.add(Catmap);
                          Log.i("Insid For Loop", "order ID "+order_id);

                          list=  BindCatItems(cat_id, order_id);

                        Log.i("Insid For Loop", "Child size = "+list.size());
                    }
               // Log.i("Insid For Loop", "Group size = "+catItemsList.size());

                 SimpleExpandableListAdapter expandListAdapter= new SimpleExpandableListAdapter(getActivity(), 
                          catItemsList,  R.layout.group_item, 
                          new String[] {"cat_name"},new int[]{R.id.lbl_cat_group},
                          BindCatItems(cat_id, order_id), R.layout.category_row, new String[]{"item_name"}, new int[]{R.id.txt_category_row});

                 order_items_list.setAdapter(expandListAdapter);
                      //  Log.i("Bind item", "CAT SIZE "+catItemsList.size());

                        }
                    catch(Exception e)
                    {
                        e.printStackTrace();
                    }
                }

            }

        };

        try
        {
        GetNetworkData task = new GetNetworkData(Url,params,listener);
        task.execute();
        }
        catch(Exception e)
        {

            e.printStackTrace();

        }
    }

    protected ArrayList<ArrayList<HashMap<String, String>>> BindCatItems(int cat_id,int order_id)

    {
        // TODO Auto-generated method stub
        ItemsList.clear();
        JSONObject params = new JSONObject();

        //int    no_pepole=Integer.valueOf(noOfGest_txt.getText().toString());
            try
            {
        //  params.put("order_status",myStatus);
         int rest_id=prefs.getInt("Rest_id", 0);
            params.put("order_id", order_id);
            params.put("lang_id", 1);
            params.put("cat_id",cat_id );
            //params.put("order_status", 0);
        //  params.put("noOfpepole",number_of_guest);
            }
            catch(Exception e)
            {
                e.printStackTrace();
            }

        String Url="http://192.168.3.113/mywebservices.php?op=GetOrderItems";
        GetNetworkData.OnPostExecuteListener listener=new GetNetworkData.OnPostExecuteListener() 

        {

            @Override
            public void onPostExecute(String result) {
                // TODO Auto-generated method stub
                if (result!=null)
                {
                    try
                    {
                        Log.i("log bind","Inside Bind Category items");
                        // catItemsList.clear();
                         ArrayList<HashMap<String, String>> mapList = 
                                  new ArrayList<HashMap<String, String>>(); 
                        JSONArray jArray = new JSONArray(result);

                            for (int i = 0; i < jArray.length(); i++) 
                            {
                                HashMap<String, String> map = new HashMap<String, String>();

                                JSONObject e = jArray.getJSONObject(i);

                                int id=e.getInt("item_id");
                                if (id==0)
                                {

                                }

                                else
                                {

                                map.put("item_id",String.valueOf(e.getInt("item_id")));
                                map.put("oi_id", String.valueOf(e.getInt("oi_id")));
                                map.put("item_name", e.getString("item_name"));
                                map.put("quantity",String.valueOf( e.getString("quantity")));
                                map.put("price", String.valueOf("price"));
                       mapList.add(map);

                                }
                            }

                            ItemsList.add(mapList);

                         //   Log.i("Bind Item Order", "CAT SIZE "+catItemsList.size());

                           /*  ItemsAdapter=new SimpleAdapter(getActivity(), catItemsList, 
                                    R.layout.list_item,
                                    new String[] {"item_name"},
                                    new int[]{R.id.list_item_title});
                           */
                           //  Log.i("Add Section","ItemsAdapter count= "+ItemsAdapter.getCount());

                             //order_list.setAdapter(adapter);
                            //adapter.notifyDataSetChanged();
                    }
                    catch(Exception e)
                    {
                        e.printStackTrace();
                    }
                }
            }
        };

        try
        {
        GetNetworkData task = new GetNetworkData(Url,params,listener);
        task.execute();
        }
        catch(Exception e)
        {

            e.printStackTrace();

        }
        return ItemsList;

    } 
```

# javascript - 为 decodeAudioData (WebAudio API) 定义“有效的 mp3 块”

> ID：10470742
> 
> 赞同：13
> 
> 时间：2012-05-06T13:06:04.680
> 
> 标签：javascript, mp3, web-audio-api

我正在尝试使用 decodeAudioData 在 javascript 中解码和播放较大 mp3 文件的初始部分。我的第一个粗略的方法是从 mp3 的开头切出一些字节并将它们提供给 decodeAudioData。毫不奇怪，这失败了。

经过一番挖掘，似乎 decodeAudioData 只能使用[Fair Dinkum Thinkum](https://stackoverflow.com/users/218471/fair-dinkum-thinkum)记录的“有效 mp3 块” ，[here](https://stackoverflow.com/questions/8759842/how-to-stream-mp3-data-via-websockets-with-node-js-and-socket-io)。

然而，没有关于有效 mp3 块的结构的说明（上述的作者没有进入这个）。我知道那里存在各种 mp3 拆分器，但我想以编程方式解决这个问题。（我正在尝试在服务器端使用 nodejs 实现一种“穷人的流媒体”）。

那么，在 mp3 帧头上拆分是否就足够了，还是我需要做更多？（也许通过在末尾附加一些数据来“关闭”每个块？）“字节库”怎么样？这会导致问题吗？作为记录，我目前正在使用 128kbps cbr mp3。这会以任何方式简化流程吗？

任何有关 decodeAudioData 期望作为有效数据的信息将不胜感激。

谢谢你。

PS：我意识到这可能是对 Fair Dinkum Thinkum[帖子](https://stackoverflow.com/questions/8759842/how-to-stream-mp3-data-via-websockets-with-node-js-and-socket-io)的澄清请求，但我的低声誉使我无法发表评论。所以除了一个新问题，我看不出还能怎么做。再次感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T19:58:11.903

在对 decodeAudioData（在 Chrome 上）进行了更多实验之后，我发现：

*   只要在 mp3 帧边界上拆分，任何*初始*mp3 块都将被成功解码。找到该边界可能并不总是微不足道的（例如，涉及解析 mp3 标头），因为即使是恒定比特率的 mp3 也不总是包含恒定大小的帧。例如，128kbps mp3 文件包含 417 字节帧和 418 字节帧。（某些帧包含一个额外的字节作为填充）。
*   即使在“两侧”的精确帧边界上分割，也*不能*保证任意 mp3 块是可解码的。这种类型的某些块可以被解码，但其他块会导致 decodeAudioData 抛出错误。我猜这与[mp3 位存储库](http://wiki.hydrogenaudio.org/index.php?title=Bit_reservoir)有关，它在 mp3 帧之间创建了依赖关系。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-06T13:33:10.330

如果您将文件拆分为以有效 MP3 标头开头的片段（在字节边界上对齐的 12 位“1”：FF Fx），您很可能会没事。

# mysql - 使用 html 下拉菜单来确定 Rails 中的用户选择

> ID：10470748
> 
> 赞同：0
> 
> 时间：2012-05-06T13:06:58.580
> 
> 标签：mysql, html, ruby-on-rails

所以我一直在本地机器上构建我的粘贴应用程序，我遇到了一个一直困扰我的小问题。我需要弄清楚如何进行语法突出显示。在 PHP 中，我可以传递用户选择：

```
<select name="paste_syntax">
<option value="ruby">Ruby</option>
<option value="c">C</option>
<option value="html-xml">HTML/XML</option>
<option value="php">PHP</option>
</select> 
```

并使用 $_POST 传递此处选择的变量，以突出显示语法。例如：

```
<pre class='mypostvar'>some code</pre> 
```

但是，在 Rails 中，我不确定如何执行此操作。我正在考虑在粘贴表中创建一个粘贴列，该列链接到一个 paste_syntax 表，其中包含所有粘贴语法选项。2个是连在一起的。我的问题是，我应该这样做，还是有其他方法？帮助表示赞赏！~阿迪尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T13:33:16.100

[我会使用语法荧光笔](http://alexgorbatchev.com/SyntaxHighlighter/)，然后我不会为此打扰 Rails，但是您可以通过将类更改为代码来更改突出显示，例如使用一些 jQuery：

```
# coffeescript
jQuery ->
  $('#syntax').change (ev) ->
    selection = $(ev.target).val()
    $('#code').removeClass().addClass('brush: ' + selection);

-# haml
= select_tag :syntax, options_for_select([['ruby', 'ruby'], ['c', 'c']])
%pre#code{class: 'brush: ruby'}= "def ok \n  puts 'ok'\nend" 
```

# r - Rattle R 包：风险和权重变量作用的区别？

> ID：10470752
> 
> 赞同：3
> 
> 时间：2012-05-06T13:07:15.670
> 
> 标签：r, machine-learning, data-mining

Rattle R 数据挖掘包中的风险和权重属性角色有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-23T20:28:10.997

拨浪鼓界面的帮助部分对此进行了说明，

风险变量用于创建风险图表时的评估选项卡，权重属性用于为观察赋予权重并在创建模型时使用，您还可以在数据选项卡上指定权重公式。

# sql-server - SQL Server 2008 将地理点保存为十六进制

> ID：10470756
> 
> 赞同：2
> 
> 时间：2012-05-06T13:07:52.077
> 
> 标签：sql-server, hex, point

我已经将我的曲目记录到一个文本文件中，现在我想将它作为 Point 类型插入到 SQL Server 2008 R2 数据库的表中。

我使用 OpenRowSet 读取我的文本文件并将每一行插入到临时表中。然后我解析每一行并将正确的值插入到真实表中。文件中的每一行如下所示：

```
$GPRMC,101142.415,A,6210.1547,N,02929.2220,E,3.9,231.8,150310,,,A*62 
```

我正在用这样的代码解析纬度和经度：

```
INSERT INTO Track(Point)
SELECT
geography::Point(
SUBSTRING(entry,21,2)+'.'+SUBSTRING(entry,23,2)+
SUBSTRING(entry,26,CHARINDEX(',',entry,26)-26),
SUBSTRING(entry,33,3)+'.'+SUBSTRING(entry,36,2)+
SUBSTRING(entry,39,CHARINDEX(',',entry,39)-39)
,4326)
FROM #MYTEMP 
```

之后，当我查看真实表（名为 Track）时，我看到了类似的内容：

```
Point
0xE6100000010CE200FA7DFF0C4F40B43C0FEECE4A3D40 
```

这些点被放置在地图上的正确位置（使用 SQL Management Studio 中的空间结果选项卡），但是否有可能将它们视为数据库中的正常地理值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T13:16:08.313

在值上调用[`.STAsText()`](http://msdn.microsoft.com/en-us/library/bb933970.aspx)//以人类可读的形式查看它[`.ToString()`](http://msdn.microsoft.com/en-us/library/bb933803.aspx)。[`.AsTextZM()`](http://msdn.microsoft.com/en-us/library/bb933981.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T15:49:39.767

我来这里是为了说出马丁史密斯所说的话。然而，这是你的幸运日。今天是“授人以渔的日子”。看看[可用的地理方法](http://msdn.microsoft.com/en-us/library/bb933917.aspx)。另请注意，在“另请参阅”部分中还有更多可用的。

# javascript - 使用 javascript 访问 flash 对象方法

> ID：10470759
> 
> 赞同：1
> 
> 时间：2012-05-06T13:08:24.867
> 
> 标签：javascript, jquery, flash

我正在处理音乐播放器，我尝试使用 java 脚本访问此播放器方法，例如播放、暂停、顶部。但代码无法控制这些方法。谁能告诉使用java脚本或jQuery访问停止，播放和暂停方法的方法谢谢

这是我的代码

```
<div class="audiojs" classname="audiojs" id="audiojs_wrapper0">
    <object width="1" height="1" style="position: absolute; left: -1px;" name="audiojs0" id="audiojs0"
            classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000">
        <param value="./audiojs/audiojs.swf?playerInstance=audiojs.instances['audiojs0']&amp;datetime=1336309077444.049"
               name="movie">
        <param value="always" name="allowscriptaccess">
        <embed width="1" height="1" allowscriptaccess="always"
               src="./audiojs/audiojs.swf?playerInstance=audiojs.instances[%27audiojs0%27]&amp;datetime=1336309077444.049"
               name="audiojs0">
    </object>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T13:19:28.527

要从 ActionScript 类访问 JavaScript 函数，您可以使用该`ExternalInterface`方法。

在嵌入 SWF 的 HTML 页面上，您必须包含要从 SWF 访问的自定义 JavaScript 函数。借助该`ExternalInterface`方法，您可以访问任何已声明的 JavaScript 函数。

在您的情况下，只需将音乐播放器的停止、播放和暂停函数包装在自定义 JavaScript 函数中（然后您可以从 SWF 中寻址）或直接调用本机停止、播放和暂停函数。我更喜欢创建一个包装类，以便任何第三方都可以理解您的代码。

该原理很容易实现，只需阅读[此](http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7cb2.html)链接即可！

# php - 如何根据分隔键将文本插入数据库

> ID：10470761
> 
> 赞同：1
> 
> 时间：2012-05-06T13:08:50.630
> 
> 标签：php, mysql, import

如果我有以下数据库表`my_table`（id、year、event）

```
CREATE TABLE `my_table` (
  `id` int(3) NOT NULL auto_increment,
  `year` text,
  `event` text,
  PRIMARY KEY  (`id`),
  KEY `id` (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ; 
```

现在我想`my_table`使用以下确切的文本示例从文本文件中导入该数据库中的一些数据。

```
2011|Italy hosts the 68th Venice International Film Festival<br>
2011|Severe damage occurs as wildfires sweep through Oklahoma<br>
2010|In Sudan Liberation Army will demobilize child soldiers<br> 
```

可以手动完成，但是对于数百万个事件，这是不可能的，所以我一直在考虑使用另一种解决方案，它可以依赖于`|`将年份与事件分开，然后将其插入数据库中，然后停止`<br>`滚动另一个插入。

知道怎么做，如果手动完成，这将节省几个月的时间，并且还会使用 php 解决方案教授重要的想法〜谢谢

我认为应该是的结果

```
CREATE TABLE `my_table` (
  `id` int(3) NOT NULL auto_increment,
  `year` text,
  `event` text,
  PRIMARY KEY  (`id`),
  KEY `id` (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;

INSERT INTO `my_table` VALUES (1, '2011', 'Italy hosts the 68th Venice International Film Festival');
INSERT INTO `my_table` VALUES (2, '2011', 'Severe damage occurs as wildfires sweep through Oklahoma');
INSERT INTO `my_table` VALUES (3, '2010', 'In Sudan Liberation Army will demobilize child soldiers'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T13:11:14.637

阅读[LOAD DATA INFILE](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)。它允许您指定分隔符 ( `|`) 和行终止符 ( `<br>\n`)。

# django - 无法访问 Google APP Engine SDK

> ID：10470763
> 
> 赞同：1
> 
> 时间：2012-05-06T13:09:00.890
> 
> 标签：django, google-app-engine, djangoappengine

它提示我：

```
The Google App Engine SDK could not be found!
Make sure it's accessible via your PATH environment and called google_appengine 
```

当我跑步时

```
python manage.py runserver 
```

但它在我第一次运行它时就起作用了。我把它放在我的 PATH 目录中，但它仍然提示输入该消息。我的操作系统是 Ubuntu 10.04，python 版本 2.6。我的 django 项目目录中的文件/目录。

```
app.yaml   django           google_appengine  main.py      settings.pyc
autoload   djangoappengine  __init__.py       manage.py    urls.py
dbindexer  djangotoolbox    __init__.pyc      settings.py  urls.pyc 
```

我不知道如何调试我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T06:31:24.193

对我来说，我在更新 GoogleAppEngineLauncher 后遇到了这个问题，但我还没有运行该应用程序。我运行了 GoogleAppEngineLauncher，它解压了文件并创建了必要的符号链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T17:31:58.567

只需将您的 sdk 放入 Environment Path

**导出 PATH=$PATH:/home/computer_name/Desktop/google_appengine/**

希望能帮助到你，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T08:40:44.817

我解决了这个问题，只需将 google_appengine 移动到`/usr/local`目录，我曾经移动到`/usr/lib/python2.6/dist-package`，检查后`sys.path`发现它不在其中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-15T09:01:14.820

在 Windows 上，Google 更改了应用引擎 SDK 文件夹的路径，django-nonrel 无法再找到它。您需要编辑该文件`djangoappengine\boot.py`，以便它现在可以找到它。在线`50`添加以下行`if os.name in ('nt', 'dos')`：

```
 paths.append(r'%(PROGRAMFILES(X86))s\Google\Cloud SDK'
                r'\google-cloud-sdk\lib\googlecloudsdk\third_party\appengine' %
                os.environ) 
```

# php - PHP MySQL 添加到数据库中的现有值

> ID：10470766
> 
> 赞同：0
> 
> 时间：2012-05-06T13:09:33.137
> 
> 标签：php, mysql

我有点坚持使用 PHP 脚本。

该脚本适用于广播电台，它需要执行以下操作：

1.  计算电台主持人在当天预订了多少次。插槽存储在数据库的表中，我将使用代码`date("l")`来确定当前日期，然后搜索所有将“day”设置为值的行`date("l")`。

2.  然后我需要找出演示者已经在“users”表的“monthly_slots”列中存储了多少小时，该列中有他们的用户名。`"SELECT monthly_slots FROM users"`

3.  然后，我需要将演示者今天完成的插槽数量的值与monthly_slots 列中已经存在的插槽数量相加。

下面是我的代码

```
$currentday = date("l");
$currentslots = mysql_query("SELECT monthly_slots FROM users");
mysql_query("
    UPDATE users
    SET slots = (SELECT COUNT(*) + "$currentslots" 
                 FROM timetable 
                 WHERE timetable.username = users.username 
                   AND day = "$currentday"
                )
"); 
```

谁能看到我哪里出错了？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T13:28:06.840

获取资源返回的值

```
$currentday = date("l");
$result = mysql_query("SELECT monthly_slots FROM users");
$currentslots = mysql_fetch_assoc($result);

mysql_query("
    UPDATE users
    SET slots = (SELECT COUNT(*) + "$currentslots" 
                 FROM timetable 
                 WHERE timetable.username = users.username 
                   AND day = "$currentday"
                )
"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T16:47:28.750

// 当前的日期

```
$currentday = date("l"); 
```

// 在 users 表中查找小时数

```
$exec_monthlyslots = mysql_query("SELECT monthly_slots FROM users");
$currentslots=mysql_fetch_assoc($exec_monthlyslots); 
```

// 而不是计算所有列，而是使用您要计算的列 id`COUNT(*)`

```
$new_query="UPDATE users
            SET slots = (
                            (
                                SELECT COUNT(*)
                                FROM timetable 
                                WHERE timetable.username = users.username 
                                AND day = ".$currentday."
                            )
                            + ".$currentslots['monthly_slots']."
                        )
            ";

mysql_query($new_query); 
```

这应该可以帮助你。如果没有，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T13:15:26.847

$currentslots 是 mysql 资源而不是数字，请改用 mysql_num_rows($currentslots)

# c# - 根据来自不同组合框的值显示组合框项目

> ID：10470769
> 
> 赞同：0
> 
> 时间：2012-05-06T13:09:54.557
> 
> 标签：c#, silverlight, combobox, filter, converter

我正在尝试创建一个小型应用程序，我可以在其中为即将到来的欧洲足球锦标赛制作一个小球。

为此，我当然需要添加匹配项。

我希望有 3 个组合框，其中第一个由它的匹配类型设置（Poule A、Poule B 等）。设置该组合框后，我希望接下来的两个组合框仅显示这些 poules 中的团队。

我相信这可以使用转换器来完成，但我似乎无法让它工作..还是有更好的方法？

当前代码：

```
<ComboBox ItemsSource="{Binding MatchTypes}"
                        DisplayMemberPath="TypeName"
                        Grid.Row="1" />

<ComboBox ItemsSource="{Binding Teams}"
                        DisplayMemberPath="TeamName"
                        Grid.Column="1"
                        Grid.Row="1" />

<ComboBox ItemsSource="{Binding Teams}"
                        DisplayMemberPath="TeamName"
                        Grid.Column="2"
                        Grid.Row="1" /> 
```

有没有一种简单的方法（linq？）来查询最后两个组合框，只查询在第一个组合框中选择的 poule 中的团队？

如果可能的话，我更喜欢将其保留在视图模型之外并使用转换器或类似的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T13:20:29.527

就个人而言，我会将其保留在 viewmodel 代码中。我做了类似的事情，所以在这里，映射到你正在做的事情：

*   我的视图模型中有一个预先填充的项目列表。这将是 MatchTypes。

*   我将拥有另一个名为 CurrentMatchType 的属性，在设置时使用 INotifyPropertyChanged。

*   当设置 CurrentMatchType 的值时，它将调用数据源并填充视图模型上的其他两个列表。我们还有 2 个变量，称为 PouleA 和 PouleB，代表最终的团队选择。我们将调用您刚刚从服务器 TeamsA 和 TeamsB 获取的列表。两个列表的数据相同，但我会将数据源结果设置为内部值，然后将 TeamsA 设置为除 PouleB 中选择的团队之外的所有团队的列表，并将 TeamsB 的列表设置为除 PouleB 之外的所有团队的列表PouleA中的那些。这样一来，一个团队无法单独匹配。

*   **我忘记的最后一件事：**在 PouleA 和 PouleB 的设置器上，您将运行与上面相同的代码来过滤可用的团队，因此也排除了对面的团队。由于 INPC 连接到所有内容，您的组合框都会自动更改。

*   当我从数据源中抓取数据时，我会公开一个属性以让 BusyIndi​​cator 接管屏幕，因此在完成抓取数据之前不能触摸任何内容。

我认为尝试使用转换器来处理此类事情会增加不必要的挫败感。如果您不想将它添加到您的视图模型中，因为您在不同的地方重复使用它，那么没有什么能阻止您创建一个将旧视图模型作为属性公开的新视图模型。

**伪代码**

```
using System;

/* In your model... */

public sealed class MatchType
{
    public string Name { get; internal set; }
    public string Description { get; internal set; }
    public int ID { get; internal set; }
}

public sealed class Team
{
    public string Name { get; set; }
    public MatchType MatchType { get; set; }
    public int? MatchTypeID { get; set; }
    public int ID { get; set; }
}

/* In your viewmodel... */

public sealed class TeamSelection
{

    // These two should be INotifyPropertyChanged, shortened for this example.
    public MatchType[] MatchTypes { get; private set; }
    public Team[] TeamsA { get; private set; }
    public Team[] TeamsB { get; private set; }

    private Team[] teams = null;
    MatchType matchType = null;
    public MatchType SelectedMatchType {
        get { return matchType; }
        set
        {
            if (value != null)
                matchType = value;
            else if (MatchTypes != null && MatchTypes.Length > 0)
                matchType = MatchTypes[0];
            else
                return;
            PropertyHasChanged(() => SelectedMatchType);
            PopulateTeams();
        }
    }

    Team teamA;
    Team teamB;

    public Team SelectedTeamA 
    {
        get { return teamA; }
        set
        {
            if (teamA.ID == teamB.ID)
                // Alternatively, set a flag and stop execution.
                throw new InvalidOperationException("The same team cannot be selected.");
            teamA = value;
            PopulateTeams();
            PropertyHasChanged(() => SelectedTeamA);
        }
    }

    public Team SelectedTeamB 
    {
        get { return teamB; }
        set
        {
            if (teamA.ID == teamB.ID)
                // Alternatively, set a flag and stop execution.
                throw new InvalidOperationException("The same team cannot be selected.");
            teamB = value;
            PopulateTeams();
            PropertyHasChanged(() => SelectedTeamB);
        }
    }

    /// <summary>
    /// This can be done on your model, or what I do is pass it to 
    /// an intermediary class, then that sets the busy status to
    /// a BusyIndicator set as the visual root of the application.
    /// </summary>
    public bool IsBusy { get; private set; }
    public string IsBusyDoingWhat { get; private set; }

    public TeamSelection()
    {
        // Call out to DB for the match types, setting busy status
        var wcf = new WcfService();
        wcf.GetMatchTypes(response => 
        {
            wcf.GetMatchTypesForTeam(MatchType, response2 =>
            {
                teams = response.Value.ToArray();
                MatchTypes = response2.Value.ToArray();
                MatchType = MatchTypes[0];
                PopulateTeams();
            });
        });
    }

    void PopulateTeams()
    {
        if (MatchType == null)
            return;
        var op = teams.Where(t => t.MatchTypeID == MatchType.ID);
        if (SelectedTeamA != null)
            TeamsB = op.Where(t => t.ID != SelectedTeamA.ID).OrderBy(t => t.Name);
        else
            TeamsB = op.OrderBy(t => t.Name);
        if (SelectedTeamB != null)
            TeamsA = op.Where(t => t.ID != SelectedTeamB.ID).OrderBy(t => t.Name);
        else
            TeamsA = op.OrderBy(t => t.Name);
    }

} 
```

# ruby-on-rails - Libnotify 在使用 Spork 和 Guard 时不显示通知

> ID：10470774
> 
> 赞同：2
> 
> 时间：2012-05-06T13:10:47.743
> 
> 标签：ruby-on-rails, spork, guard, libnotify

在我开始使用guard-spork 之前，Libnotify 在我的系统（Lubuntu）上运行良好。

我的保护文件：

```
notification :libnotify

guard 'spork', :wait => 60, :rspec_env => { 'RAILS_ENV' => 'test' } do
  # ...
end

guard 'rspec', :version => 2, :all_after_pass => false, :cli => '--drb' do
  # ...
end 
```

我的宝石文件：

```
group :development, :test do
  gem 'rspec-rails'
end

group :test do
  gem 'rb-inotify'
  gem 'libnotify'
  gem 'spork'
  gem 'guard-spork'
  gem 'guard-rspec'
end 
```

我在这里做错了什么？我跑了`bundle exec guard`，spork 工作正常，我的测试都通过了，但是通知没有通过 libnotify 显示。我正在使用最新的宝石。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T14:04:38.950

重新启动我的机器可以解决这个问题，就像在 99.99% 的情况下一样

# android - android 按名称启动服务

> ID：10470783
> 
> 赞同：0
> 
> 时间：2012-05-06T13:12:09.997
> 
> 标签：android, android-intent, android-service

我的目标是制作 3 个 apk（用于非常具体的解决方案，而不是正常消费）：

1.  首先包含服务，该服务在启动时启动
2.  使用此服务的客户端
3.  使用此服务的另一个客户端

根据这个网站： [http ://www.androidcompetencycenter.com/2009/06/start-service-at-boot/](http://www.androidcompetencycenter.com/2009/06/start-service-at-boot/)

我可以通过知道它的名字来启动一个服务。但是，这不起作用：

```
// works
context.startService(new Intent(context, MyServiceMessenger.class));

// does not work
Intent serviceIntent = new Intent();
serviceIntent.setAction(MyService.SERVICE_CLASS_NAME);
context.startService(serviceIntent); 
```

针说`MyService.SERVICE_CLASS_NAME`== `mypackage.MyServiceMessenger`。

我的问题在于绑定 - 我需要绑定到课堂之外的服务。

```
// does not work
Intent intent = new Intent(context, MyService.SERVICE_CLASS_NAME);

// works
Intent intent = new Intent(context, MyServiceMessenger.class);

intent.putExtra("MESSENGER", messenger);        
context.bindService(intent, serviceConnection, Context.BIND_AUTO_CREATE); 
```

通过名称绑定到服务时，my`serviceConnection`根本没有被使用，也无法向服务发送信息。

我错过了什么？

编辑1：

我在清单中缺少一个导出。您需要“导出”它，并为其命名。我也同意了。我在意图中使用的字符串与 @@ 中的字符串相同。

```
<permission android:name="MyPermission"
    android:permissionGroup="android.permission-group.SYSTEM_TOOLS"
    android:protectionLevel="dangerous" />    
<uses-permission android:name="MyPermission" />    
<application ... >  
    <service
        android:name="service.MyServiceMessenger"
        android:exported="true"
        android:permission="MyPermission" >
        <intent-filter>
            <action android:name="**platinum8.service.P2PServiceMessenger**"></action>
        </intent-filter>
    </service>

</application> 
```

编辑2：

我添加了一个与服务名称相同的意图过滤器，现在我的代码似乎可以工作了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T13:24:13.500

可能您的元素上缺少 an `<intent-filter>`，您`<service>`在其中声明`<action>`您试图让服务响应，例如：

```
<service android:name=".BshService">
  <intent-filter>
    <action android:name="com.commonsware.android.advservice.IScript" />
  </intent-filter>
</service> 
```

# ruby-on-rails - Rails - 控制器问题 - 无法创建帖子

> ID：10470786
> 
> 赞同：0
> 
> 时间：2012-05-06T13:13:06.847
> 
> 标签：ruby-on-rails, controller

有一个无法创建帖子的控制器。当我创建（尝试）一个帖子时，它给了我一个动作控制器异常：

```
undefined method `Post' for false:FalseClass 
```

我以前没有遇到过 false:FalseClass 。任何帮助表示赞赏！

post_controller.rb：

```
class PostsController < ApplicationController
  # GET /posts
  # GET /posts.json
  def index
    @posts = Post.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @posts }
    end
  end

  # GET /posts/1
  # GET /posts/1.json
  def show
    @post = Post.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @post }
    end
  end

  # GET /posts/new
  # GET /posts/new.json
  def new
    @post = Post.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @post }
    end
  end

  # GET /posts/1/edit
  def edit
    @post = Post.find(params[:id])
  end

  # POST /posts
  # POST /posts.json
  def create
    @post = current_user.Post.new(params[:post])
    respond_to do |format|
      if @post.save
        format.html { redirect_to @post, notice: 'Post was successfully created.' }
        format.json { render json: @post, status: :created, location: @post }
      else
        format.html { render action: "new" }
        format.json { render json: @post.errors, status: :unprocessable_entity }
      end
    end
  end

  # PUT /posts/1
  # PUT /posts/1.json
  def update
    @post = Post.find(params[:id])

    respond_to do |format|
      if @post.update_attributes(params[:post])
        format.html { redirect_to @post, notice: 'Post was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @post.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /posts/1
  # DELETE /posts/1.json
  def destroy
    @post = Post.find(params[:id])
    @post.destroy

    respond_to do |format|
      format.html { redirect_to posts_url }
      format.json { head :no_content }
    end
  end
end 
```

更新：我声明的用户类有很多如下。仍然阻止关联和创建帖子。

```
 class User < ActiveRecord::Base
  has_many :posts
  authenticates_with_sorcery!

  attr_accessible :username, :password, :password_confirmation
  attr_accessible :email
  validates_confirmation_of :password
  validates_presence_of :password, :on => :create
  validates_presence_of :username
  validates_uniqueness_of :username, :on => :create
  validates_presence_of :email
  validates_uniqueness_of :email, :on => :create

end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T13:16:34.427

你的问题在于这条线：

```
current_user.Post.new(params[:post]) 
```

`current_user`似乎是错误的，这可能不是您所期望的，但无论如何都没有任何方法`Post`可以返回`current_user`（因为`Post`是模型类）。

您可能打算“建立”一个帖子，例如：

```
current_user.posts.new(params[:post]) 
```

这假设任何`current_user`是 (a `User`，希望？) `has_many :posts`。

# java - java - 级数继承

> ID：10470787
> 
> 赞同：-1
> 
> 时间：2012-05-06T13:13:29.660
> 
> 标签：java, inheritance

我有两个类，Progression 和 FibonacciProgression，但是当在 4 和 6 上调用 print 方法时，FibonacciProgression 会打印出一些意想不到的结果，如下所示。谁能解释这是为什么？

```
public class Progression {

    protected long first;
    protected long cur;

    Progression() {
        cur = first = 0;
    }

    protected long firstValue() {
        cur = first;
        return cur;
    }

    protected long nextValue() {
        return ++cur;
    }

    public void printProgression(int n) {
        System.out.print(firstValue());
        for (int i = 2; i <= n; i++) {
            System.out.print(" " + nextValue());
        }
        System.out.println();
    }

    public static void main (String[] args) {
        Progression prog = new Progression();
        System.out.println("Default Progression: ");
        prog.printProgression(10);
    }

} 
```

和..

```
public class FibonacciProgression extends Progression {

    protected long prev;

    FibonacciProgression(long value1, long value2) {
        first = value1;
        prev = value2 - value1;
    }

    FibonacciProgression() {
        this(0,1);
    }

    protected long nextValue() {
        long temp = prev;
        prev = cur;
        cur += temp;
        return cur;
    }

    public static void main (String[] args) {
        Progression fibProg = new FibonacciProgression(2,5);
        System.out.println("Default Progression: ");
        fibProg.printProgression(4);
        fibProg.printProgression(6);
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T13:34:28.980

当您`printProgression`第二次使用参数 6 调用时， 的值`prev`不会重置为其初始值。`prev`仍然包含上次调用的值 7。调用of时需要保存`value2`并`FibonacciProgression`重置。像这样：`prev``firstValue``FibonacciProgression`

```
protected long firstValue() {
    prev = val2 - first;  // val2 is value2 passed in constructor
    return super.firstValue();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T13:38:36.637

您的 printProgression “破坏”了 prev 的值。要轻松看到它，请将 main 切换到：

```
public static void main(String[] args) {
    Progression fibProg = new FibonacciProgression(2, 5);
    System.out.println("Default Progression: ");
    fibProg.printProgression(4);
    fibProg = new FibonacciProgression(2, 5);
    fibProg.printProgression(6);
} 
```

# android - 如何使用Android AP发送MAC广播数据帧

> ID：10470788
> 
> 赞同：4
> 
> 时间：2012-05-06T13:13:38.127
> 
> 标签：android, android-ndk, wifi, android-wifi

我正在尝试使用 Android wifi AP 功能发送一个 MAC 广播帧，在该范围内侦听的其他设备将能够接收到该帧。任何想法如何做到这一点将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-17T16:50:54.280

打开一个套接字，将 UDP 数据包发送到 IP 广播地址。它将自动转换为 MAC 广播地址。

# php - 其他人可以看到 PHP 中变量的内容吗？

> ID：10470792
> 
> 赞同：0
> 
> 时间：2012-05-06T13:14:35.273
> 
> 标签：php, security, variables

这个问题就像标题所说的那样简单。可能被问了数百次，但我找不到答案，很抱歉。

基本上，我想从我网站上的一个页面从 MySQL 数据库中获取一些信息，并且只想确保在该页面上建立连接是安全的，因为我显然不想要关于我的 MySQL 数据库的信息被妥协。

我知道任何人都可以使用网络浏览器查看网页的 HTML 源代码，但我不确定 PHP（变量）是否也可以这样做......

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-06T13:16:44.147

除非您的服务器从根本上损坏并提供原始 PHP 代码，否则最终用户将看到的唯一内容就是您的脚本的输出。正常运行的设置永远不会提供 PHP 代码。

如果您担心泄漏的可能性，请将敏感数据保存在文档根目录之外的单独文件中，并将`include()`其保存到 PHP 中。它无法防御对您的服务器具有 shell 访问权限的人，但如果 PHP 代码确实以某种方式提供服务，它可以防止配置错误的服务器泄露该数据。

# iis-7 - IIS 无法连接到 SQL Server 2008R2

> ID：10470793
> 
> 赞同：0
> 
> 时间：2012-05-06T13:14:37.843
> 
> 标签：iis-7, sql-server-2008-r2, connection-string

我已经阅读了关于堆栈溢出和 MSDN 的其他类似问题，但仍然找不到这个问题的答案。

我的开发机器正在运行 VS2010SP1 和 IIS7。IIS7 是在 .Net 框架之后安装的，所以我不得不手动配置网站。我将应用程序部署到本地 IIS，而不是使用 Casinni。

环境：

*   Win7 64 位（开发机器）上的 Visual Studio 2010
*   IIS 在 Win7 64 位（开发机器）上运行
*   在 Win2008（服务器）上运行的 SQL Server 2008

在 Visual Studio 中网站的选项中，我选择使用 IIS 并单击创建虚拟目录，它可以工作（即它成功创建了目录）。

但是当我运行该应用程序时，我收到一条 SQL 连接错误消息：

> 与 SQL Server 建立连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。

SQL Server 配置为允许远程连接，我可以使用相同的凭据从开发机器连接到 Management Studio 中的 SQL Server（当前是 sa 帐户，是的，我知道这很糟糕，以后会更改它，这仅用于开发目的）。

为了以防万一，我尝试将`machine.config`条目的文件更改`LocalSqlServer`为指向服务器，但这并没有帮助，即使服务器是远程的而不是本地的。

我还尝试将其添加到 web.config：

```
<remove name="LocalSqlServer" />
<add name="LocalSqlServer" 
     connectionString="Data Source=esdc01;Initial Catalog=ECS;Persist Security Info=True;User ID=sa;Password=******;MultipleActiveResultSets=True;Network Library=dbnmpntw;"
     providerName="System.Data.SqlClient" /> 
```

中的连接字符串`web.config`是正确的。

如果我在 VS2010 中进入网站的属性并将其更改回“使用 Visual Studio 开发服务器”，那么应用程序工作正常并且它确实连接到 SQL Server。

因此，当我使用 IIS 时，似乎会访问`web.config`NOR 以`machine.config`获取它们的连接字符串......那么 IIS 在哪里寻找连接字符串？我很困惑！

在服务器上，已启用命名管道和 TCP/IP。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T14:03:00.763

您说服务器上启用了命名管道和 TCP/IP。

尝试删除“Network Library=dbnmpntw”元素。如果这不起作用，请尝试将其更改为“Network Library=dbmssocn”并查看它是否会使用 TCP/IP 进行连接。

# visual-studio - Visual Studio 2008/2010 插件 - 错误列表

> ID：10470794
> 
> 赞同：2
> 
> 时间：2012-05-06T13:14:59.607
> 
> 标签：visual-studio, visual-studio-addins, envdte

各位开发者您好！

我正在尝试从 Visual Studio 加载项获取构建错误代码。

我找到了一种从错误列表窗口中获取错误的方法，使用以下代码：

```
_applicationObject.ExecuteCommand("View.ErrorList", " ");
myErrors = _applicationObject.ToolWindows.ErrorList; 
```

但这只会给我当前显示在错误列表中的错误，所以如果没有选择警告，它们将不会显示。但更大的问题是我只得到了错误的描述，而不是错误代码本身。所以我担心如果我要搜索一个特定的错误字符串，我会遇到特定于语言的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:24:41.150

我最终通过解析构建输出解决了这个问题。构建输出确实包含错误代码。

更多关于这个在我的博客 - [yogiprogi](http://yogiprogi.wordpress.com/2012/05/08/getting-build-errors-from-visual-studio-2010-extension/)

# java - 将文件从 FileChooser 转换为 Java 中的字符串

> ID：10470795
> 
> 赞同：0
> 
> 时间：2012-05-06T13:15:09.020
> 
> 标签：java, file-io, jfilechooser, typeconverter

这是我第一次在 Java 中使用 JFileChooser，我目前正在尝试将所选文件夹从文件类型转换为字符串，以便我可以自动将其写入 GUI 上的 JTextField，以便用户可以确认他们选择的内容。

我正在处理的代码部分如下：

```
JButton btnSel1 = new JButton("Select...");
    btnSel1.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent arg0) {
            int returnVal = fc.showOpenDialog(null);
            if (returnVal == JFileChooser.APPROVE_OPTION) {
                File file = fc.getSelectedFile();
                fol1 = fc.getFileAsString(file);
                rawIn1.setText(fol1);
            }   
        }
    });
    welFrame.getContentPane().add(btnSel1, "6, 6, center, default"); 
```

我希望将变量“fol1”（文件夹 1）写入 JTextField“rawIn1”。

getFileAsString 方法返回错误“JFileChooser 类型未定义”

在此先感谢为我查看此内容的任何人。

杰瑞德。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T13:19:05.143

中没有`getFileAsString`方法`JFileChooser`。你应该使用

```
rawIn1.setText(file.getName()); 
```

或者

```
rawIn1.setText(file.getPath()); 
```

作为[文档](http://docs.oracle.com/javase/6/docs/api/javax/swing/JFileChooser.html)中的示例：

```
JFileChooser chooser = new JFileChooser();
FileNameExtensionFilter filter = new FileNameExtensionFilter(
    "JPG & GIF Images", "jpg", "gif");
chooser.setFileFilter(filter);
int returnVal = chooser.showOpenDialog(parent);
if(returnVal == JFileChooser.APPROVE_OPTION) {
   System.out.println("You chose to open this file: " +
        chooser.getSelectedFile().getName());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T13:18:50.737

您可能想要使用`File.getPath()`，或者`File.getName()`如果您只想要文件名的最后一部分。

# android - android 3rd 方库

> ID：10470798
> 
> 赞同：0
> 
> 时间：2012-05-06T13:15:28.147
> 
> 标签：android, gson

我想在我的 android 项目中使用 gson，所以我按照教程完成了这个

1.  在 Eclipse/Android 项目中创建一个新文件夹 libs。
2.  右键单击库并选择导入 -> 常规 -> 文件系统，然后下一步，在文件系统中浏览以找到库的父目录（即：您将其下载到的位置）。
3.  单击确定，然后单击左窗格中的目录名称（不是复选框），然后检查右窗格中的相关 JAR。这会将库放入您的项目中（物理上）。
4.  右键单击您的项目，选择 Build Path -> Configure Build Path，然后单击 Libraries 选项卡，然后单击 Add JARs...，导航到 libs 目录中的新 JAR 并添加它。（顺便说一句，这是转换新 JAR 以在 Android 上使用的时刻。）

它在 android 2.2 中完美运行，但在 android 4.0.3 中它抛出异常 05-06 19:12:18.946: E/AndroidRuntime(602): java.lang.NoClassDefFoundError: com.google.gson.Gson

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T13:21:17.733

对于 android 4，重要的是该文件夹称为 libs 而不是 lib 或其他名称，否则它将无法工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T13:20:13.267

1.  在项目根文件夹中创建一个名为“lib”的文件夹
2.  将您的 Jar 文件复制到 lib 文件夹中
3.  现在右键单击 Jar 文件和构建路径 > 添加到构建路径，你就完成了

# python - 将 PyPy 编译为 Exe

> ID：10470800
> 
> 赞同：34
> 
> 时间：2012-05-06T13:15:36.137
> 
> 标签：python, compilation, exec, pypy

我知道如何使用 cx_freeze 将 CPython 文件编译为 exe，但是是否可以使用 PyPy 编译一个简单的程序到 Exe ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-10T08:13:54.057

据我所知，没有关于如何使用 PyPy 解释器从程序创建 EXE 的现成方法或教程。恐怕让事情顺利进行并非易事。

原则上，有两种方法可以考虑使用 PyPy 的翻译来获取 EXE 文件，使用 PyPy 解释器或编写自己的 RPython 程序（PyPy 解释器本身就是一个 RPython 程序，即使用 Python 的受限子集）。

如果您的程序使用 RPython 的受限子集并且没有依赖项，您可以考虑在[pypy/translator/goal](https://bitbucket.org/pypy/pypy/src/12c1f0538f76/pypy/translator/goal)中使用翻译脚本，您还会在其中找到很多 target*.py 文件。取一个并根据您的目的对其进行修改。您可能首先想从这里开始翻译 python 函数：

[http://doc.pypy.org/en/latest/getting-started-dev.html#trying-out-the-translator](http://doc.pypy.org/en/latest/getting-started-dev.html#trying-out-the-translator)

如果您的程序是一个应用程序并且依赖于外部包，您应该首先尝试确保您的程序完全可以在 pypy 上运行 - 并非所有外部库都受支持。然后，您可能会考虑修改 targetpypystandalone 脚本以加载您的应用程序模块。如果有疑问，请尝试在 pypy-dev 邮件列表或 irc.freenode.net 上的#pypy 频道上获得帮助。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-25T03:06:00.770

这是一个可能适合您的 py2exe 解决方案：[compile.py](http://corey-projects.googlecode.com/svn-history/r166/trunk/python2/compile.py)

```
#!/usr/bin/env python
# Corey Goldberg

from distutils.core import setup
import py2exe
import sys

if len(sys.argv) == 2:
    entry_point = sys.argv[1]
    sys.argv.pop()
    sys.argv.append('py2exe')
    sys.argv.append('-q')
else:
    print 'usage: compile.py <python_script>\n'
    raw_input('press ENTER to exit...')
    sys.exit(1)

opts = {
    'py2exe': {
        'compressed': 1,
        'optimize': 2,
        'bundle_files': 1
    }
}

setup(console=[entry_point], options=opts, zipfile=None) 
```

# path - Andengine Modifier，在路径的每一步都做些什么？

> ID：10470804
> 
> 赞同：0
> 
> 时间：2012-05-06T13:16:36.477
> 
> 标签：path, andengine, path-finding, modifier

我有移动障碍物的寻路，所以 Astar 不是正确的方法，但我认为如果我可以在 PathModifier 采取的每一步更新我的 TiledMap 中的矩阵，我就可以开始工作。

那可能吗？

有 onModifierStarted 和 onModifierFinished 但似乎没有“onModifierMove”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T14:30:31.727

我认为您确实回答了自己的问题-采取 1 步，然后在 onModifierFinished 中进行矩阵调整，然后设置下一个 PathModifier 以再移动 1 步...冲洗，根据需要重复

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-17T17:09:25.677

我不确定 PathModifier 但对于其他修饰符，您可以使用 onManageUpdate 方法，如下所示：

```
sprite.registerEntityModifier(new MoveModifier(time, x1, x2, y1, y2){

    @Override
    protected void onModifierStarted(IEntity pItem) {
        super.onModifierStarted(pItem);

        //do somthing when modifier started
    }

    @Override
    protected void onModifierFinished(IEntity pItem) {
        super.onModifierFinished(pItem);

        //do somthing when modifier finished

    }

    @Override
        protected void onManagedUpdate(float pSecondsElapsed, IEntity pItem) {
        super.onManagedUpdate(pSecondsElapsed, pItem);

        //do somthing when modifier is running

    }

})); 
```

# javascript - Javascript toFixed bug in IE6?

> ID：10470810
> 
> 赞同：1
> 
> 时间：2012-05-06T13:17:20.900
> 
> 标签：javascript, internet-explorer-6

我的代码是：

```
var m=0.00542;
alert(m.toFixed(3));  
alert(m.toFixed(2)); 
```

预期结果是：0.005 0.01

但在ie6中，结果是：0.005 0.00

我能做些什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T13:21:18.823

IE6坏了。甚至谷歌也不再支持它了。不过，这个特殊问题很容易解决。

修补`Number.toFixed()`，定义

```
Number.prototype.toFixed = function(n) {
    var power = Math.pow(10, n);
    var fixed = (Math.round(this * power) / power).toString();
    if(n == 0) return fixed;
    if(fixed.indexOf('.') < 0) fixed += '.';
    var padding = n + 1 - (fixed.length - fixed.indexOf('.'));
    for(var i = 0; i < padding; i++) fixed += '0';
    return fixed;
}; 
```

您的代码现在应该生成预期的输出。

# oop - 序列图和通信图（UML）之间的区别

> ID：10470813
> 
> 赞同：2
> 
> 时间：2012-05-06T13:18:15.347
> 
> 标签：oop, uml, object-oriented-analysis

UML 中的序列图和通信（协作）图有什么区别？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T13:49:31.060

引用[维基百科](http://en.wikipedia.org/wiki/Collaboration_diagram)：

> 通信图**显示了许多与**序列图相同的信息，但是由于信息的呈现方式，**其中一些信息在一个图中比在另一个图中更容易找到**。通信图显示了每个元素与哪些元素更好地交互，但序列图更清楚地显示了交互发生的顺序。

本质上，协作图强调哪些对象相互交互，而序列图更强调实际顺序。但它们实际上是等价的，除了在序列图中可见的更多细节，比如何时以及由谁创建/销毁对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T07:19:32.110

序列图使跟踪交互变得更容易，因为它们是从上到下完成的，因此查找消息顺序非常简单。但是，如果您有许多对象交互，则图表变得难以阅读。

通信图显示了在对象之间传递的消息，并在消息顶部写入序列。对于大量的对象，它比序列图更容易理解，但消息序列更难理解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-24T05:48:38.333

在序列图生命线中，元素存在并可能参与交互。在通信图中，生命线代表交互中的单个参与者。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-30T21:14:24.937

序列图和通信图显示几乎相同的信息，各自的优点和缺点是：

**序列图：**

随着时间的推移，易于查看从对象到对象的消息排序。

**通讯图：**

易于查看特定对象配置之间的链接、角色名称和流量。

# javascript - 为什么 URL Hash 被添加而不是被替换？

> ID：10470818
> 
> 赞同：0
> 
> 时间：2012-05-06T13:19:04.093
> 
> 标签：javascript, url, hash

当使用这样的网址时：

```
http://localhost/nafham/?selection/12/24/122 
```

散列以这种方式完成：

```
http://localhost/nafham/?selection/12/24/122#?selection/12/24/122/الصف-الثالث-الثانوي/السنة-كاملة/الاقتصاد/self 
```

但是，当任何其他部分添加到 URL 时，例如：

```
http://localhost/nafham/?selection/12/24/122/test 
```

在每个操作上再次添加哈希

```
http://localhost/nafham/?selection/12/24/122/test#?selection/12/24/122/الصف-الثالث-الثانوي/السنة-كاملة/الاقتصاد/self

http://localhost/nafham/?selection/12/24/122//test#?selection/12/24/122/test#?selection/12/24/93/الصف-الثالث-الثانوي/السنة-كاملة/الاقتصاد/self 
```

知道为什么将哈希添加到 URL 而不是替换当前的哈希值吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T13:20:30.767

因为您在设置哈希时使用的是 URL 的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T13:21:23.940

使用`location.hash = "..."`. 它应该工作。

# prestashop - 在 prestashop 中显示表单

> ID：10470820
> 
> 赞同：2
> 
> 时间：2012-05-06T13:19:14.143
> 
> 标签：prestashop

我想在 prestashop 模块中显示一个表单，并希望将该值存储在数据库中。这怎么可能？？有没有prestashop专家？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-02-02T08:50:45.727

您可以使用自定义 HTML 块并在其中添加表单代码。当然，必须使用钩子在站点中显示该 HTML 块。有很多免费的自定义 HTML 块模块可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T13:03:16.227

您应该查看 modules/ 目录中所有可用的模块。

如果要在后台和/或前台显示表单，则必须覆盖 Module 类的不同方法，并且必须使用可用的不同钩子。

最好的祝福，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-15T11:26:29.563

试试这个免费模块：

[https://www.prestashop.com/forums/topic/391966-megablock-16-module-gratuit/](https://www.prestashop.com/forums/topic/391966-megablock-16-module-gratuit/)

有了这个，您可以在后台的一些挂钩中添加 HTML。一切都存储在数据库中。您应该使用 Helpers 和 Tools 类（Helpers show forms and Tools::getValues() 做它所说的......）

在 MegaBlock 中也有 TinyMCE 可用。看看，这个模块真的很有用;-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-17T14:25:43.447

您可以使用基于所使用的钩子的钩子来开发模块，表单将显示在 prestashop 中的该位置，而使用钩子时，您需要在该 tpl 文件中分配一个 tpl 文件您可以编写编码以显示表单

你也可以开发一个带有单独控制器的模块，你可以为那个控制器分配一个 tpl。

# javascript - 如何让Javascript时间自动更新

> ID：10470825
> 
> 赞同：3
> 
> 时间：2012-05-06T13:20:08.973
> 
> 标签：javascript

我正在使用以下 Javascript 代码在我的网站上显示时间。如何自动进行此更新。

谢谢

```
<section class="portlet grid_6 leading"> 
<header>
<h2>Time<span id="time_span"></span></h2>
</header>
<script type="text/javascript">
var currentTime = new Date()
var hours = currentTime.getHours()
var minutes = currentTime.getMinutes()
if (minutes < 10){
    minutes = "0" + minutes
}
var t_str = hours + ":" + minutes + " ";
if(hours > 11){
    t_str += "PM";
} else {
   t_str += "AM";
}
document.getElementById('time_span').innerHTML = t_str;
</script>
</section> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-06T13:23:40.677

使用[setTimeout(..)](https://developer.mozilla.org/en/DOM/window.setTimeout)在特定时间后调用函数。在这种特定情况下，最好使用[setInterval(..)](https://developer.mozilla.org/en/DOM/window.setInterval)

* * *

```
function updateTime(){
    var currentTime = new Date()
    var hours = currentTime.getHours()
    var minutes = currentTime.getMinutes()
    if (minutes < 10){
        minutes = "0" + minutes
    }
    var t_str = hours + ":" + minutes + " ";
    if(hours > 11){
        t_str += "PM";
    } else {
        t_str += "AM";
    }
    document.getElementById('time_span').innerHTML = t_str;
}
setInterval(updateTime, 1000); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T13:29:07.277

将所有 javascript 代码添加到一个名为`updateClock()`放置在`<head>`页面部分中的函数中，并以这种方式更改`<body>`标记：

```
<body onload="updateClock(); setInterval('updateClock()', 1000 )"> 
```

它将每秒重新计算并重新显示时间。由于您只显示小时和分钟，因此您可以使用更长的时间间隔。如果你想每次更新时间，`numSeconds`你应该使用类似的东西

```
<body onload="updateClock(); setInterval('updateClock()', numSeconds * 1000 )"> 
```

当然，这只是您可以[在那里](https://www.google.com/#hl=en&q=javascript%20clock)找到的众多解决方案之一。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T13:25:24.297

那里有很多时钟库。也许看看这个以前的帖子：[如何创建一个 jquery 时钟计时器](https://stackoverflow.com/questions/2604450/how-to-create-a-jquery-clock-timer)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-06T13:28:24.760

试试这个，一个更整洁的版本：

```
var el = document.getElementById('time_span')
setInterval(function() {

    var currentTime = new Date(),
        hours = currentTime.getHours(),
        minutes = currentTime.getMinutes(),
        ampm = hours > 11 ? 'PM' : 'AM';

    hours += hours < 10 ? '0' : '';
    minutes += minutes < 10 ? '0' : '';

    el.innerHTML = hours + ":" + minutes + " " + ampm;
}, 1000); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-06T13:45:40.067

不那么混乱的是：

```
timer();

function timer(){
 var now     = new Date,
     hours   = now.getHours(),
     ampm    = hours<12 ? ' AM' : ' PM',
     minutes = now.getMinutes(),
     seconds = now.getSeconds(),
     t_str   = [hours-12, //otherwise: what's the use of AM/PM?
                (minutes < 10 ? "0" + minutes : minutes),
                (seconds < 10 ? "0" + seconds : seconds)]
                 .join(':') + ampm;
 document.getElementById('time_span').innerHTML = t_str;
 setTimeout(timer,1000);
} 
```

计时器更新（大约）每秒（= 1000 毫秒），使用`setTimeout`来自计时器功能。

看到它[在行动](http://jsfiddle.net/KooiInc/zgcYz/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-11T10:10:57.737

```
GetTime();

function GetTime(){
  var CurrentTime = new Date()
  var hour = CurrentTime.getHours()
  var minute = CurrentTime.getMinutes()
  var second = CurrentTime.getSeconds()

  if(minute < 10){
    minute = "0" + minute
  }

  if(second < 10){
    second = "0" + second
  }

  var GetCurrentTime = hour + ":" + minute + ":" + second + " ";

  if(hour > 11){
    GetCurrentTime += "p.m."
  }else{
    GetCurrentTime += "a.m."
  }
<!-- Try changing innerHTML to document.getElementById("CurrentTime").value -->
  document.getElementById("CurrentTime").value = GetCurrentTime;
  setTimeout(GetTime,1000)
}
```

```
<span id="CurrentTime"></span>
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-09-06T17:21:35.233

```
GetTime();

function GetTime(){
  var CurrentTime = new Date()
  var hour = CurrentTime.getHours()
  var minute = CurrentTime.getMinutes()
  var second = CurrentTime.getSeconds()

  if(minute < 10){
    minute = "0" + minute
  }

  if(second < 10){
    second = "0" + second
  }

  var GetCurrentTime = hour + ":" + minute + ":" + second + " ";

  if(hour > 11){
    GetCurrentTime += "p.m."
  }else{
    GetCurrentTime += "a.m."
  }

  document.getElementById("CurrentTime").innerHTML = GetCurrentTime;
  setTimeout(GetTime,1000)
}
```

```
<span id="CurrentTime"></span>
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-11-07T05:05:29.297

此代码输出格式->00:00:00 并像实时时钟一样自动刷新，希望它能正常工作..

```
function r(txt) {
    document.write(tex);
}

function createTIME() {
    d = new Date();
    var time = addZERO(d.getHours()) + ':' + addZERO(d.getMinutes()) + ':' + addZERO(d.getSeconds());
    return 'Present Time = ' + time;
}

function doDyn() {
    document.getElementById('Dyn').innerHTML = createTIME();
}

function addZERO(val) {
    return ((val < 10) ? '0' : '') + val;
} 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2016-05-28T00:22:58.667

```
timer();

function timer(){
 var currentTime = new Date()
var hours = currentTime.getHours()
var minutes = currentTime.getMinutes()
var sec = currentTime.getSeconds()
if (minutes < 10){
    minutes = "0" + minutes
}
if (sec < 10){
    sec = "0" + sec
}
var t_str = hours + ":" + minutes + ":" + sec + " ";
if(hours > 11){
    t_str += "PM";
} else {
   t_str += "AM";
}
 document.getElementById('time_span').innerHTML = t_str;
 setTimeout(timer,1000);
}
```

```
<header>
<h2>Time<span id="time_span"></span></h2>
</header>
```

# php - 带有实时评估的 php 字段

> ID：10470830
> 
> 赞同：1
> 
> 时间：2012-05-06T13:20:32.593
> 
> 标签：php, drupal, drupal-7

在内容类型中，我需要一个字段，我可以在其中放置一些 php 代码（返回数组），并在其中看到渲染结果单击“预览”（例如在弹出窗口或另一个选项卡中）

该领域的典型内容可能是

```
$x = mysql_connect(...);
$x = mysql_query("SELECT ...");
$result = array();
while($row = mysql_fetch_assoc($)) {$result[]=...}
return $result; 
```

编辑一个新节点，我会在该字段中编写此代码，然后单击预览以在表格中显示结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T07:57:52.830

要获取已加载节点的版本，应使用[node_load](http://api.drupal.org/api/drupal/modules!node!node.module/function/node_load/7) () 或[node_load_multiple](http://api.drupal.org/api/drupal/modules!node!node.module/function/node_load_multiple/7) ()

要在模块中实现，可以使用以下代码（使用[db_select](http://api.drupal.org/api/drupal/includes!database!database.inc/function/db_select/7) ()）

```
$nids = db_select("node", "n")
    ->fields("n", array("nid"))
    ->condition("type", "YOUR_CONTENT_TYPE_MACHINE_NAME", "=")
    ->condition("status", 1, "=")
    ->orderBy("created", "DESC")
    ->fetchCol();
$nodes = node_load_multiple($nids);
print_r($nodes); // or use dsm($nodes); if devel module is enabled. 
```

此代码将获取查询返回的节点的完整加载版本。您可以按照自己的方式使用它们。

希望这会有所帮助……穆罕默德。

# ruby - 使用从 API 调用中获取的信息填充视图的 Rake 任务

> ID：10470837
> 
> 赞同：1
> 
> 时间：2012-05-06T13:21:32.200
> 
> 标签：ruby, api, ruby-on-rails-3.1, ruby-on-rails-3.2, rake-task

我目前正在开展一个项目，我正在通过 GoToWebinar API 获取即将举行的网络研讨会。控制台中的一切都运行良好。下面是从控制台运行良好的代码：

```
1.9.3p125 :003 > require 'gotowebinar'
 => true 
1.9.3p125 :004 > g = GoToWebinar::API.new()
# intializes the webinar with API key and access token

1.9.3p125 :005 > g.get_upcoming_webinars
# Fetches the Upcoming webinars from GoTowebinar 
```

现在，我还需要在各自的视图中填充从 g.get_upcoming_webinars 获取的信息。我的计划是将上面的代码放在控制器中的一个动作中，然后用信息填充相应的视图。但是，应用程序将托管在 Heroku 上，并且客户端不希望我将此代码放入控制器中以在每次加载时进行 API 调用。事实上，客户希望我创建一个他可以每天运行一次的 rake 任务，并用信息填充视图。

我不知道我该怎么做。我一直在寻找一些资源，也玩弄了一些东西，但徒劳无功。

任何解决此问题的帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T13:28:31.230

您可以让 rake 任务使用 API 更新您的数据库。然后使用 ORM 在视图中显示数据，就像在 Rails 应用程序中一样。

# c# - 使用 LibGit2Sharp 循环遍历 Git 存储库中的每个提交？

> ID：10470838
> 
> 赞同：3
> 
> 时间：2012-05-06T13:21:35.070
> 
> 标签：c#, git, libgit2, libgit2sharp

我尝试循环遍历`new LibGit2Sharp.Repository(path).Commits`，但它似乎只通过 master 中的提交（或者我猜 HEAD 指向哪里？）。

我将如何遍历存储库中的每个提交，无论它在哪个分支中，并按照提交发生时间（日期）的顺序遍历它们？

我这样做的目的是`git log`为了按日期顺序列出不考虑分支的提交。

如果我还可以循环遍历未引用的提交（即，如果您`git reset`远离某些提交并且这些提交不再被引用并且即将获得 gc'd），则可以加分。

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T14:26:07.537

支持`git log --all`应该可以通过以下语法实现

```
using (var repo = new Repository(yourRepoPath))
{
      var commits = repo.Commits.QueryBy(new Filter { Since = repo.Refs });
} 
```

`Filter`还公开了一个属性来控制结果的`SortBy`顺序。默认排序 ( `GitSortOptions.Time`) 将首先输出最近的提交。

> 如果我还可以遍历未引用的提交，则可以加分

无法访问 reflog 中的提交，也无法访问悬空的提交（还没有？）。然后，我想没有奖励积分:-)

# wpf - 将 wpf 图像控件保存到文件的最简单方法

> ID：10470841
> 
> 赞同：14
> 
> 时间：2012-05-06T13:21:43.010
> 
> 标签：wpf, save, imaging

我的 wpf 应用程序中有一个 Image 控件，里面有一个大图像，但控件本身只有 60x150，这意味着它只显示该图像的某个部分。将可见部分保存到文件的最简单方法是什么？

谢谢您的帮助。

[编辑] 我最终使用了此处找到的代码[（](http://nuigroup.com/forums/viewthread/13035/#66981)在此处发布之前我无法找到）...

```
Grid r = new Grid();
        r.Background = new ImageBrush(image2.Source);

    System.Windows.Size sz = new System.Windows.Size(image2.Source.Width, image2.Source.Height);
    r.Measure(sz);
    r.Arrange(new Rect(sz));

    RenderTargetBitmap rtb = new RenderTargetBitmap((int)image2.Source.Width, (int)image2.Source.Height, 96d, 96d, PixelFormats.Default);
    rtb.Render(r);

    BmpBitmapEncoder encoder = new BmpBitmapEncoder();
    encoder.Frames.Add(BitmapFrame.Create(rtb));

    FileStream fs = File.Open(@"C:\lol.png", FileMode.Create);
    encoder.Save(fs);
    fs.Close(); 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-06T14:12:15.893

您可以使用[RenderTargetBitmap](http://msdn.microsoft.com/en-us/library/ms653503.aspx)类和[BitmapEncoder](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapencoder.aspx)。

定义这些方法：

```
void SaveToBmp(FrameworkElement visual, string fileName)
{
    var encoder = new BmpBitmapEncoder();
    SaveUsingEncoder(visual, fileName, encoder);
}

void SaveToPng(FrameworkElement visual, string fileName)
{
    var encoder = new PngBitmapEncoder();
    SaveUsingEncoder(visual, fileName, encoder);
}

// and so on for other encoders (if you want)

void SaveUsingEncoder(FrameworkElement visual, string fileName, BitmapEncoder encoder)
{
    RenderTargetBitmap bitmap = new RenderTargetBitmap((int)visual.ActualWidth, (int)visual.ActualHeight, 96, 96, PixelFormats.Pbgra32);
    bitmap.Render(visual);
    BitmapFrame frame = BitmapFrame.Create(bitmap);
    encoder.Frames.Add(frame);

    using (var stream = File.Create(fileName))
    {
        encoder.Save(stream);
    }
} 
```

如果您在这样的容器内有[Image控件：](http://msdn.microsoft.com/en-us/library/system.windows.controls.image.aspx)

```
<Grid x:Name="MyGrid">
    <Image Name="MyImage" Stretch="None"></Image>
</Grid> 
```

你只需要这样做：

```
SaveToPng(MyGrid, "image.png"); 
```

否则，您可以在使用 RenderTargetBitmap 时简单地传递所需的尺寸：

```
SaveToPng(MyImage, "image.png");

...

RenderTargetBitmap bitmap = new RenderTargetBitmap(YourWidth, YourHeight, 96, 96, PixelFormats.Pbgra32); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-11-23T15:35:28.950

在使用 gliderkite 的解决方案时，我遇到了与其他人相同的“黑色”图像问题。“黑色”图像似乎是由于 FrameworkElement 的边距导致它在捕获的图像之外呈现。我[在 Rick Stahl 的博客上的评论中找到了解决方法](https://weblog.west-wind.com/posts/2007/Sep/10/Rendering-a-WPF-Container-to-Bitmap)

具体来说，在渲染之前进行测量和排列使它有机会调整自己以适应图片中没有边距的事实。以下是我现在重新用于屏幕截图的静态类。这是基于 gliderkite 的回答和 Rick Stahl 博客上的信息。

```
public static class ScreenCapture
{
    public static void SaveToBmp(FrameworkElement visual, string fileName)
    {
        var encoder = new BmpBitmapEncoder();
        SaveUsingEncoder(visual, fileName, encoder);
    }

    public static void SaveToPng(FrameworkElement visual, string fileName)
    {
        var encoder = new PngBitmapEncoder();
        SaveUsingEncoder(visual, fileName, encoder);
    }

    public static void SaveToJpeg(FrameworkElement visual, string fileName)
    {
        var encoder = new JpegBitmapEncoder();
        SaveUsingEncoder(visual, fileName, encoder);
    }

    private static void SaveUsingEncoder(FrameworkElement visual, string fileName, BitmapEncoder encoder)
    {
        RenderTargetBitmap bitmap = new RenderTargetBitmap((int)visual.ActualWidth, (int)visual.ActualHeight, 96, 96, PixelFormats.Pbgra32);
        Size visualSize = new Size(visual.ActualWidth, visual.ActualHeight);
        visual.Measure(visualSize);
        visual.Arrange(new Rect(visualSize));
        bitmap.Render(visual);
        BitmapFrame frame = BitmapFrame.Create(bitmap);
        encoder.Frames.Add(frame);

        using (var stream = File.Create(fileName))
        {
            encoder.Save(stream);
        }
    }
} 
```

# javascript - 在 Backbone 中处理不可保存的值

> ID：10470844
> 
> 赞同：7
> 
> 时间：2012-05-06T13:22:10.193
> 
> 标签：javascript, database, backbone.js

是否有标准方法来处理 Backbone 中的不可保存值。

例如

```
MyModel = Backbone.extend(Backbone.Model, {
    initialize: function () {
        this.set({'inches': this.get('mm') / 25});
    }
}) 
```

如果我在这个模型上调用 save() ，它会抛出一个错误，因为没有对应的数据库字段`inches`。我可以想出几种方法来解决这个问题，但我想知道是否有一种经过试验和测试的方法通常最适合这个问题？

目前，我首选的解决方案是扩展 Backbone 的`toJSON`方法并允许传递布尔参数`dontCleanup`以允许它在需要时返回所有模型的值（包括不可保存的值），例如传递给模板。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-06T14:30:37.073

我喜欢彼得里昂的想法。我曾想过几次，但从未真正落实到位。不过，对于我处理此问题的所有方式，以下是我最喜欢的两个：

*   非“属性”值
*   查看模型

### 非属性值

这很简单：不要将您需要的值存储在模型的标准属性中。相反，将其直接附加到对象：

```
 myModel.someValue = "some value"; 
```

这里最大的问题是你没有得到与调用`set`模型相关的所有事件。所以我倾向于用一种可以为我做所有事情的方法来解决这个问题。比如我对模型的一个常用方法`select`就是说这个模型被选中了：

```
 MyModel = Backbone.Model.extend({
  select: function(){
    if (!this.selected){
      this.selected = true;
      this.trigger("change:selected", this, this.selected);
    }
  }
}); 
```

就您而言，我不确定这是否是一个好方法。您有需要根据属性中已有的值计算的数据。

为此，我倾向于使用视图模型。

### 查看模型。

基本思想是您创建一个可持久的主干模型，就像您通常那样。但是您来创建另一个模型，该模型继承自原始模型并添加您需要的所有数据。

有很多方法可以做到这一点。这可能是一个非常简单的版本：

```
 MyModel = Backbone.Model.Extend({ ... });

MyViewModel = function(model){
  var viewModel = Object.create(model);

  viewModel.toJSON = function(){
    var json = model.toJSON();
    json.inches = json.mm / 25;
    return json;
  };

  return viewModel;
}); 
```

包装它的最大好处`Object.create`是您现在有了原型继承情况，因此模型中的所有标准功能仍然存在。我们刚刚覆盖了`toJSON`视图模型上的方法，以便它返回带有`inches`属性的 JSON 对象。

然后在需要这个的视图中，您可以将模型包装在初始化函数中：

```
 MyView = Backbone.View.extend({
  initialize: function(){
    this.model = MyViewModel(this.model);
  },

render: function(){
    var data = this.model.toJSON(); // returns with `inches`
  }
}); 
```

您可以`new MyViewModel(this.model)`根据需要调用，但最终不会有任何不同，因为我们从`MyViewModel`函数中显式返回了一个对象实例。

当你的视图的渲染方法调用`toJSON`时，你会得到`inches`它的属性。

当然，此实现存在一些潜在的内存问题和性能问题，但可以通过一些更好的视图模型代码轻松解决这些问题。不过，这个快速而肮脏的例子应该会让你走上正轨。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T13:48:04.240

我认为应该这样做。将您定义`Model` `defaults`为您的有效架构，然后仅返回其中`this.attributes`有效的子集`toJSON`。

```
var Model = Backbone.Model.extend({
  defaults: {
    foo: 42,
    bar: "bar"
  },

  toJSON: function () {
    var schemaKeys = _.keys(this.defaults);
    var allowedAttributes = {};
    _.each(this.attributes, function (value, key) {
    if (_.include(schemaKeys, key)) {
      allowedAttributes[key] = value;
    }
    return allowedAttributes;
  }
}); 
```

请注意，`_.pick`一旦您有下划线 1.3.3 可用，这会使代码更短。在我的骨干社区旅行中，我还没有看到“经过验证的”约定，并且由于骨干留下了很多选择，有时约定不会出现，但我们会看到这个 stackoverflow 问题会产生什么。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-07T13:22:25.283

处理 Backbone.js 中的*非持久属性*已经有一段时间了，特别是自从我开始使用 ember/ember-data 之后，它通过计算属性、ember-data 属性或控制器来处理各种情况。

许多解决方案建议定制该`toJSON`方法。但是，一些流行的 Backbone 插件（尤其是那些处理嵌套模型的插件）实现了自己的`toJSON`方法，并调用以`Backbone.Model.prototype.toJSON`获取模型属性的对象表示。因此，通过覆盖`toJSON`模型定义中的方法，您将失去这些插件的一些（可能至关重要的）功能。

我想出的最好的方法是`excludeFromJSON`在模型定义中包含一个键数组，并覆盖自身的`toJSON`方法`Backbone.Model.prototype`：

```
Backbone.Model.prototype.toJSON = function() {
  var json = _.clone(this.attributes),
      excludeFromJSON = this.excludeFromJSON;
  if(excludeFromJSON) {
    _.each(excludeFromJSON, function(key) {
      delete json[key];
    });
  }
  return json;
};

MyModel = Backbone.Model.extend({
  excludeFromJSON: [
    'inches'
  ]
}); 
```

这样，您只需定义非持久键（如果您忘记这样做，您很快就会在服务器抛出错误时得到提醒！）。如果不存在任何属性，`toJSON`则将正常运行。`excludeFromJSON`

* * *

在您的情况下，`inches`是一个计算属性，派生自`mm`，因此将其作为模型上的方法实现是有意义的（确保在更改 mm 时英寸的值是正确的）：

```
MyModel = Backbone.Model.extend({
  inches: function() {
    return this.get('mm') / 25;
  }
}); 
```

但是，这具有与其他所有属性不同的访问方式的缺点。理想情况下，您会希望使其与访问其他属性保持一致。这可以通过[扩展默认`get`方法](https://stackoverflow.com/a/6696112/783009)来实现：

```
var getMixin = {
  get: function(attr) {
    if(typeof this[attr] == 'function') {
      return this[attr]();
    }
    return Backbone.Model.prototype.get.call(this, attr);
  }
};

MyModel = Backbone.Model.extend({
  inches: function() {
    return this.get('mm') / 25;
  }
});
_.extend(MyModel.prototype, getMixin); 
```

这会让你做：

```
new MyModel().get('inches'); 
```

这种方法不会触及底层`attributes`哈希，这意味着它`inches`不会出现在`toJSON`表示中，*除非*你稍后`set`的值`inches`，在这种情况下你需要像`excludeFromJSON`数组这样的东西。

如果您需要`set`该`inches`值，您可能还想监听变化并调整 的值`mm`：

```
MyModel = Backbone.Model.extend({

  initialize: function() {
    this.on('change:inches', this.changeInches, this);
  },

  inches: function() {
    return this.get('mm') / 25;
  },

  changeInches: function() {
    this.set('mm', this.attributes.inches * 25);
  }
});
_.extend(MyModel.prototype, getMixin); 
```

请参阅[JSBin 上的完整示例](http://jsbin.com/ajinuy/1/edit)。

还值得注意的是，该[方法](https://github.com/documentcloud/backbone/issues/2134)[的（官方？）目的`toJSON`](https://github.com/documentcloud/backbone/issues/2134)最近被重新定义为准备与服务器同步的模型。出于这个原因，调用`toJSON`应该始终只返回“持久”（或“可保存”）属性。

# jquery - jQuery：单击事件问题（我不会删除新添加的元素）

> ID：10470848
> 
> 赞同：0
> 
> 时间：2012-05-06T13:22:31.087
> 
> 标签：jquery, events, click

我在单击事件时遇到了一些问题，如果用户单击链接，它将在正文中附加一个框，如果用户单击框内的链接，它应该删除该框，但我没有。如果我将框附加到单击事件之外，它可以工作，但这不是我想要的。我正在做一些愚蠢的事情，我只知道它，但我似乎看不到什么。

// 在插件包装器中

```
 var obj = $(this);

    obj.click(function(e){

        $(body).append('<div id="thebox"><a href="#" id="thelink">a link</a></div>');

        e.preventDefault();
    });

    $('#thelink').on('click',$(this),(function(e){

        $('#thebox').remove()

        e.preventDefault();
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T13:23:38.087

```
$('#thelink').on('click',$(this),(function(e){

        $('#thebox').remove()

        e.preventDefault();
    }); 
```

应该看起来像：

```
$('body').on('click','#thelink',(function(e){

        $('#thebox').remove()

        e.preventDefault();
    }); 
```

# c# - CYK (Cocke-Younger-Kasami) 语法规则

> ID：10470850
> 
> 赞同：3
> 
> 时间：2012-05-06T13:23:25.103
> 
> 标签：c#, nlp, pos-tagger, cyk

我对自然语言解析很感兴趣，并编写了一个 Brill Part of Speech Tagger，并希望通过将它与基于语法规则的 POS 标记器结合起来来增强它。有人知道任何地方的英语开源规则集文件吗？我对任何与 CYK (Cocke-Younger-Kasami) 算法相关的东西特别感兴趣，尤其是 C#。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T23:01:25.403

你检查[过门](http://gate.ac.uk)吗？

他们似乎有一个带有[词典和规则](http://sourceforge.net/p/gate/code/HEAD/tree/gate/trunk/plugins/ANNIE/resources/heptag/)的基于 Brill 的词性标注器。它是用 Java 实现的，因此您应该很容易理解代码。它在 sourceforge 的同一个项目中可用。这是他们的[POS 标记器文档](http://gate.ac.uk/sale/tao/splitch6.html#sec%3aannie%3atagger)。

希望这可以帮助。

题外话，[Michael Collins](http://www.cs.columbia.edu/~mcollins/notes-spring2013.html)关于 POS 标记及其背后的理论的讲座。

# css - 有没有办法在网络浏览器中以编程方式即时修复 DOM/CSS？

> ID：10470855
> 
> 赞同：1
> 
> 时间：2012-05-06T13:24:05.170
> 
> 标签：css, dom, google-chrome

例如，打开[translate.ru](https://www.translate.ru/)的首页，它包含很多横幅。但是通过 Chrome 中的开发者工具，可以浏览页面并就地调整 CSS（主要是添加“显示：无”），最终页面看起来是这样的：

[![](../Images/21e0050492bde3f5f7b47c7c6f8d3ccf.png)](https://i.stack.imgur.com/Y3LSe.png)
[（来源：[demin.ws](http://demin.ws/images/blog/translate-ru-clean.png)）]

所以，一个问题：Chrome 是否有任何 API 或现有扩展允许以编程方式更改页面上的 DOM/CSS？我看到类似的 Chrome 扩展程序允许调整 Gmail 和 Google Reader，但它是专门针对这些网站的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T13:27:05.803

您可以使用[Stylebot](https://chrome.google.com/webstore/detail/oiaejidbmkiecgbjeifoejpgmdaleoha)做到这一点。

![](../Images/743500214a6d514d56c852f8d6d880b5.png)

# ios - NSFetchedResultsController 需要一个非零获取请求和 managedObjectContext 错误

> ID：10470857
> 
> 赞同：0
> 
> 时间：2012-05-06T13:24:33.970
> 
> 标签：ios, core-data, nsmanagedobjectcontext, nsfetchedresultscontroller

在具有选项卡式视图的应用程序上使用核心数据。第二个选项卡加载核心数据，Xcode 中或运行应用程序时没有显示错误，但是当我单击第二个选项卡时，应用程序崩溃并出现错误“NSFetchedResultsController 的实例需要非零获取请求和 managedObjectContext。

我是核心数据的新手，并且真的在为这个错误而苦苦挣扎，所以我会很感激我能得到的任何帮助。实现文件有以下代码

```
- (void)setupFetchedResultsController
{
    // 1 - Decide what Entity you want
    NSString *entityName = @"EatCategory"; // Put your entity name here
    NSLog(@"Setting up a Fetched Results Controller for the Entity named %@", entityName);

    // 2 - Request that Entity
    NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:entityName];

    // 3 - Filter it if you want
    //request.predicate = [NSPredicate predicateWithFormat:@"EatCategory.name = Blah"];

    // 4 - Sort it if you want
    request.sortDescriptors = [NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"name"
                                                                                     ascending:YES
                                                                                      selector:@selector(localizedCaseInsensitiveCompare:)]];
    // 5 - Fetch it
    self.fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:request
                                                                        managedObjectContext:self.managedObjectContext
                                                                          sectionNameKeyPath:nil
                                                                                   cacheName:nil];
    [self performFetch];
}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    [self setupFetchedResultsController];

    if ([[self.fetchedResultsController fetchedObjects] count] == 0) {
        NSLog(@"No Results were fetched so nothing will be given to the table view");
    }
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Eat Category Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

    }

    // configure the cell...
    EatCategory *eatcategory = [self.fetchedResultsController objectAtIndexPath:indexPath];
    cell.textLabel.text = eatcategory.name;

    return cell;
}

- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath {

    if (editingStyle == UITableViewCellEditingStyleDelete) {

        [self.tableView beginUpdates]; // Avoid  NSInternalInconsistencyException

        // Delete the role object that was swiped
        EatCategory *eatCategoryToDelete = [self.fetchedResultsController objectAtIndexPath:indexPath];
        NSLog(@"Deleting (%@)", eatCategoryToDelete.name);
        [self.managedObjectContext deleteObject:eatCategoryToDelete];
        [self.managedObjectContext save:nil];

        // Delete the (now empty) row on the table
        [self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
        [self performFetch];

        [self.tableView endUpdates];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T14:45:29.267

您确定正确设置托管对象上下文吗？似乎获取请求没问题，但是上下文呢？如果上下文设置不正确，则可能导致该错误。

您是否从外部对象注入上下文？如果是，如何声明`managedObjectContext`财产？

例如：

```
// from an external object
YourController *controller = ... // alloc-init the controller
controller.managedObjectContext = self.managedObjectContext;

// within your controller .h
@property (strong, nonatomic) NSManagedObject* managedObjectContext; // or retain if you don't use ARC

// within your controller .m
@synthesize managedObjectContext; 
```

您还可以从应用程序委托（如果您已在其中声明）获取控制器内部的主要上下文，如下所示：

```
AppDelegate *delegate = [[UIApplication sharedApplication] delegate];
NSManagedObjectContext* managedObjectContext = delegate.managedObjectContext; 
```

但这可能导致更严格的应用程序设计。

**一些笔记**

而不是使用`commitEditingStyle`你可以“注册”`NSFetchedResultsControllerDelegate`回调。创建此类以处理表视图中的更改。您可以使用它并以不同的方式响应表格更改。

[这里是NSFetchedResultsControllerDelegate](http://developer.apple.com/library/ios/#documentation/CoreData/Reference/NSFetchedResultsControllerDelegate_Protocol/Reference/Reference.html)的类参考。

希望能帮助到你。

# android - 如何让 Android 2.2 浏览器只流式传输视频而不是从 html 下载视频？

> ID：10470864
> 
> 赞同：0
> 
> 时间：2012-05-06T13:25:49.663
> 
> 标签：android, video-streaming

我遇到了一个有趣的问题。我有一个嵌入视频的 html 文件。当我使用 Android 2.3 从我的手机启动这个 html 时，它可以正常播放，我可以从 android 浏览器看到整个视频。但是当我尝试从我的其他 2.2 版本的 android 上做同样的事情时，它会尝试下载视频而不是蒸汽。

如何让 Android 2.2 浏览器只流式传输视频而不是从 html 下载视频？

使用的html文件中的媒体播放器是JW播放器，带有视频的html文件托管在bitsontherun网站上。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T13:37:37.177

android 2.2 手机可能不理解该插件（如果有记忆，jw 播放器是一个 Flash 视频播放器）。2.2\. 手机是否已安装并设置使用闪光灯？在 webview 中确保它也被允许使用插件：

```
webView.getSettings().setPluginsEnabled(true); 
```

# jquery - 如果单击主体或 div 外部的任何位置，如何返回到 div 的原始布局

> ID：10470867
> 
> 赞同：-1
> 
> 时间：2012-05-06T13:26:33.313
> 
> 标签：jquery

我创建了一个类似“你在想什么”框的 facebook，当你点击该字段时，会出现一个额外的 div 和按钮。我将如何做到这一点，以便当我在该区域之外单击时，整个框将恢复正常。

[这是我创建的页面的链接](http://randomreflect.com/status)

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T13:34:28.377

尝试这个：

```
$('body').on('click', function(e) {

  if(e.target.id != 'textarea-container') {
    $('#show-button1, #show-button2').hide();
    $('#textarea-container').removeClass('style2');
  }

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T13:36:53.800

更新 - 添加`onclick`到您的`body`：

```
<body onclick="hideDiv(event);"> 
```

JS：

```
function hideDiv(e){
      e = e || window.event;
      var element = e.target || e.srcElement;
      if(element.id != "textarea-container" && element.id != "show-button1" &&
         element.id != "divDate" && element.id != "show-button2"){

        var textareaContainer = document.getElementById("textarea-container");
        var txtArea = textareaContainer.getElementsByTagName("TEXTAREA")[0];
        txtArea.className = "style1";
        document.getElementById("show-button1").style.display = 'none'; // hide button
        document.getElementById("show-button2").style.display = 'none'; // hide button
      }
} 
```

# opengl - 生成 3dsMax 对象

> ID：10470875
> 
> 赞同：-3
> 
> 时间：2012-05-06T13:27:17.807
> 
> 标签：opengl, 3dsmax

我正在编写在 OpenGL 中绘制玻璃的 Computer Graphich 项目，所以我确实在 3dsMax 中制作了一个玻璃模型，但不知道如何将它生成到包含用于 OpenGL 代码的玻璃点坐标的文件中。有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T18:03:38.170

您需要使用 3ds max sdk 编写 3ds max 导出器插件并导出模型。对于初学者来说，这将是非常困难的。

或者，您可以从 3dsmax 导出为某种易于解析的格式，并在程序中为该格式编写导入器。

或者您可以尝试搜索可以解析 3dsmax 可以导出的格式之一的库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T07:19:53.043

以下链接指向`.3ds`由 Matthew Fairfax 编写的部分实现的加载器

[http://www.garagegames.com/community/resources/view/506](http://www.garagegames.com/community/resources/view/506)

这是我在大学时用来阅读物体的东西。这个加载器只真正包含网格数据和可能的材料数据。但是，如果您查看 3ds 文件格式，那么读取其余部分应该相当容易。

使用 google 大约 20 多岁，我还发现了以下链接，该链接对于文件格式看起来相当详细，并且底部的代码可以帮助您解决加载问题。

[http://www.martinreddy.net/gfx/3d/3DS.spec](http://www.martinreddy.net/gfx/3d/3DS.spec)

# sql-server - Excel 类似于 SSRS 中的多选项卡报告

> ID：10470878
> 
> 赞同：1
> 
> 时间：2012-05-06T13:27:44.250
> 
> 标签：sql-server, sql-server-2008, ssrs-2008, reporting-services

有没有可能有一个像标签一样的 SSRS 报告？基本上，用户在 Excel 表中保存了许多数据，其中包含许多选项卡（接近 7-8 个），这些选项卡几乎没有区别。因此，他一直在寻找构建导出到 Excel 时可以在这些选项卡中带来数据的报告。

第二个问题：当我将报告导出到 excel 时，是否可以在 excel 中预定义过滤器？

让我知道任何问题。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T15:30:43.117

您可以配置报表（2008R2 及更高版本）以在导出到 Excel 时将数据分解为命名选项卡... [Reporting Services 导出到带有多个工作表的 Excel](https://stackoverflow.com/questions/462902/reporting-services-export-to-excel-with-multiple-worksheets)

我不认为您可以在 Excel 中使用预定义的过滤器（我假设您的意思是数据功能区选项卡上的 Excel 自动过滤器）以及 SSRS 中的基本导出到 Excel 功能。如果您进行自定义（通过 ReportViewer 控件），那么您可以添加逻辑以更新导出文件（导出后）以编程方式添加过滤选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T06:51:41.350

就我在 SSRS 上的工作而言，我不认为我们可以像在报告中一样在 excel 中导入参数。但是，我们可以在 Excel 中以单独的工作表显示数据正如您所说的数据可以在 7-8 个工作表中，有一个名为“PageName”和“Pagebreak”的属性。写下页面的名称并在这些 tablix 之间添加分页符。这将创建工作表并在这些工作表上给出名称。

# jquery - 在 jquery 中的 HTML= 语句中包含 html/css

> ID：10470879
> 
> 赞同：0
> 
> 时间：2012-05-06T13:27:56.357
> 
> 标签：jquery, if-statement

对 jquery 来说非常新。我有一个简单的 xml 文件，我正在阅读并在 html 页面中很好地显示。但是，我在 xml 中的一条记录具有其他人都没有的属性。虽然所有人都有名字和号码，但每个人都有名字、名字类型和号码。

我可以很好地读取这些数据，但显示它被证明是棘手的。所有数据都进入一个css样式表（非常好），但是我想为这个附加属性创建一个换行符并显示在单元格内的第二行，但让所有其他记录的单元格保持一行.

你可以在这里看到我正在尝试做的事情：

```
function BuildContactHTML(contactName,contactNumber,contactSE){

// Check to see if their is a "type" attribute in the name field
if ((contactType) != undefined){
    contactTypeHTML = "<br /><span class="sub">(" + contactType + ")</span>";
}
else
{
    contactTypeHTML = "";
}

// Build HTML string and return
output = '';
output += '<tr>';
output += '<td class="left">'+ contactName + contactType +'</td>';
output += '<td class="phone">'+ contactNumber +'</td>';
output += '</tr>';
return output;
} 
```

在“contactTypeHTML =”行中，我想添加一个换行符，然后用 css 设置文本样式，然后关闭单元格，因此我有效地获得了名称下的属性，以跨度类“sub”正在处理的较小类型。如果我将这些标签放在输出字符串中，它会为所有记录创建第二行，但我只是希望它影响实际具有属性的记录，其余的根本没有文本。

任何帮助将不胜感激！再说一次，我很新，所以请保持简单。我的印象是我在这里遇到了语法问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T13:42:49.327

undefined 应该是一个字符串值，并且你需要在**contactType周围加上typeof操作符**

```
if (typeof(contactType) != "undefined"){} 
```

**typeof()**运算符返回一个字符串值，因此您需要将其与字符串进行比较。

您的代码正在检查 contactType 是否不等于一个不存在的对象，因此它将始终返回 true，因为它是双重否定的。

您还需要在此行上使用单引号和双引号，而不仅仅是双引号。您需要将双引号放在单引号内的“sub”周围。

```
contactTypeHTML = '<br /><span class="sub">(' + contactType + ')</span>'; 
```

# visual-studio - 如何在 xsl:element 中设置变量名（属性）

> ID：10470880
> 
> 赞同：0
> 
> 时间：2012-05-06T13:28:00.583
> 
> 标签：visual-studio, xslt, xslt-2.0

我有这个代码，目的是创建动态元素名称。

```
 <xsl:template  name="Band" match="*[contains(name(), 'Band')]">
    <xsl:param name="DA" />
    <xsl:element name="$DA"> <!--error this-->

    </xsl:element> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T13:40:44.727

您需要添加花括号来评估变量：

```
<xsl:param name="DA" />
<xsl:element name="{$DA}">
  ...
</xsl:element> 
```

# node.js - Express：与 websocket 共享会话

> ID：10470883
> 
> 赞同：2
> 
> 时间：2012-05-06T13:28:12.327
> 
> 标签：node.js, express, session, websocket

我正在用 node.js 和 Express 编写一个聊天应用程序。身份验证正在工作，我可以登录用户帐户并注册新会话。我的问题是聊天本身在 Websocket（Websocket-node）中运行，我无法访问会话数据。如何在没有会话数据的情况下识别对 websocket 的新连接请求？

谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-07T01:09:15.120

我建议不要直接使用 WebSockets，而是使用 Socket.IO。它具有内置的授权和握手功能

[https://github.com/LearnBoost/socket.io/wiki/Authorizing](https://github.com/LearnBoost/socket.io/wiki/Authorizing)

以下是获取会话信息的方法

[http://www.danielbaulig.de/socket-ioexpress/](http://www.danielbaulig.de/socket-ioexpress/)

# php - Codeigniter 搜索分页

> ID：10470889
> 
> 赞同：1
> 
> 时间：2012-05-06T13:28:29.827
> 
> 标签：php, codeigniter, url, search, pagination

我正在研究一些搜索引擎，我希望有一个不错的分页，但看起来这与 POST 类型不符。我有一些表单，其中输入查询以进行搜索，发送表单后，有一些结果。结果的第一页正常工作，但是如果我单击分页中的任何其他页面，则没有结果，因为 POST 输入值没有存储在任何地方。我已经尝试使用 GET 进行搜索，例如在 URL 中添加查询，但这也是不可能的，因为 CodeIgniter 不允许某些 urlencode 中的字符。我也在寻找使用 base64 对查询字符串进行编码，但看起来这也是不可能的，因为又出现了一些不允许的字符。

我必须做什么来代替所有这些？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T13:45:51.247

您可以将 POST 数据转换为 GET 数据（例如，作为 URL 参数，请参阅[URI 规范的](https://www.rfc-editor.org/rfc/rfc3986#section-3.4)[*查询部分*](https://www.rfc-editor.org/rfc/rfc3986#section-3.4)和[PHP 手册中的](http://www.php.net/manual/en/language.variables.external.php)[*外部源变量*](http://www.php.net/manual/en/language.variables.external.php)），或者将搜索存储到会话中并仅传递搜索标识符，以便您可以从会话中检索搜索的 POST 数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-08T11:36:39.867

```
Search with Pagination in Codeingter

Step 1 : Created search_results.php in view
  <?php include ('public_header.php');?>
  <div class="container">
   <h1>Serach Results</h1>
   <table class="table">
    <thead>
     <tr>
      <td>Sr No.</td>
      <td>Article Title</td>
      <td>Published On</td>
     </tr>
    </thead>
    <tbody>
     <tr>
    <?php if(count($articles)):?>
     <?php $count=$this->uri->segment(4,0);?>
     <?php foreach($articles as $article ):?>
      <td><?= ++$count?></td>
      <td><?= $article->title?></td>
      <td><?= "Date" ?></td>
     </tr>
     <?php endforeach;?>

    <?php else: ?>
     <tr>
      <td colspan="3"> No Records Found.</td>
     </tr>
     <?php endif;?>
    </tbody>
   </table>
   <?= $this->pagination->create_links();?>
  </div>

  <?php include ('public_footer.php');?>

step 2 created function in controller

  public function search()
  {
   $this->load->library('form_validation');
   $this->form_validation->set_rules('query','Query','required');

   if(! $this->form_validation->run())
    $this->index();

   $query=$this->input->post('query');
   return redirect("user/search_results/$query");

   // $this->load->view('public/search_results',compact('articles'));
  }

  public function search_results($query)
  {
   $this->load->helper('form');
   $this->load->model('articlesmodel','articles');
   $this->load->library('pagination');
   $config=[
     'base_url'  => base_url("user/search_results/$query"),
     'per_page'   => 5,
     'total_row'  => $this->articles->count_search_results($query),
     'full_tag_open' => "<ul class='pagination'>",
     'full_tag_close'=> "</ul>",
     'first_tag_opne' => "<li>",
     'first_tag_close'=> "</li>",
     'uri_segment'  => 4,
     // 'first_link'  => "<li>"
     // 'last_link'   => "</li>"
     'last_tag_opne' => "<li>",
     'last_tag_close' => "</li>",
     'next_tag_opne' => "<li>",
     'next_tag_close' => "</li>",
     'pre_tag_open'  => "<li>",
     'pre_tag_close' => "</li>",
     'num_tag_open'  => '<li>',
     'num_tag_close' => '</li>',
     'cur_tag_open'  => "<li class='active'><a>",
     'cur_tag_close' => '</a></li>',
   ];

   $this->pagination->initialize($config);
   $articles=$this->articles->search($query,$config['per_page'],$this->uri->segment(4));
   $this->load->view('public/search_results',compact('articles'));
  }

Step 3 :Created function in model

  public function search($query,$limit,$offset)
  {
   $q=$this->db->from('articles')
      ->like('title',$query)
      ->limit($limit,$offset)
      ->get();
   return $q->result();
  }
  public function count_search_results($query)
  {
   $q=$this->db->from('articles')
     ->like('title',$query)
     ->get();
   return $q->num_rows();
  } 
```

# html - HTML5 画布，按钮而不是键盘

> ID：10470892
> 
> 赞同：0
> 
> 时间：2012-05-06T13:28:37.097
> 
> 标签：html, canvas

找到了一些不错的贪吃蛇游戏的开源代码，但想做一个 iphone 网页版。所以我不能使用物理键盘，是否可以使用按钮代替它？

有这个代码：

```
case 37:
  if (direction != "right"){
    moveLeft();
  }
  break; 
```

还有一些问题，但这个问题让我一直在开发中。

对不起我的英语不好，我是荷兰人。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T13:51:08.310

您不需要 Canvas，只需创建一个常规 HTML 按钮并将该代码放在其 onclick 事件中。

# android - Android中的对话框警报

> ID：10470893
> 
> 赞同：0
> 
> 时间：2012-05-06T13:28:47.833
> 
> 标签：android, dialog

有什么方法可以创建一个对话框，单击该对话框中的一个按钮，该按钮将转到另一个对话框，然后单击新对话框中的另一个按钮，将您带到上一个对话框？

```
Dialog - > Dialog2 -> Dialog 
```

这是我的代码：

```
private void showIBW() {

    final String[] frame = { "Small", "medium", "large" };

    AlertDialog.Builder framechoice = new AlertDialog.Builder(this);
    framechoice.setTitle("please choose your frame size");
    framechoice.setNeutralButton("what's this?",
            new DialogInterface.OnClickListener() {

                public void onClick(DialogInterface dialog, int which) {

                    AlertDialog.Builder help = new AlertDialog.Builder(getApplicationContext());
                    help.setTitle("Frame explanation");
                    help.setMessage("cheikh is not helpful");
                    help.setNeutralButton("okay thanks", new DialogInterface.OnClickListener() {

                        public void onClick(DialogInterface dialog, int which) {

                            ////// Here i want this button to get me back to the "Framechoice" dialog///

                        }
                    });
                    help.create();
                    help.show();
                }

            });
    framechoice.setItems(frame, new DialogInterface.OnClickListener() {

        public void onClick(DialogInterface dialog, int which) {

            SharedPreferences customSharedPreference = getSharedPreferences(
                    "myCustomSharedPrefs", Activity.MODE_PRIVATE);

            Toast.makeText(getApplicationContext(), frame[which],
                    Toast.LENGTH_LONG).show();

            String Height = customSharedPreference.getString("heightpref",
                    null);
            float height = Integer.parseInt(Height);

            float weight1 = ((height / 100) * (height / 100)) * 20;
            float weight2 = ((height / 100) * (height / 100)) * 25;

            AlertDialog.Builder dialogBuilder = new AlertDialog.Builder(
                    CalculationsActivity.this);
            dialogBuilder.setTitle("Ideal weight calculator");

            dialogBuilder
                    .setMessage("Your ideal weight is between:\n           "
                            + Math.round(weight1)
                            + " Kg to "
                            + Math.round(weight2) + " kg");
            dialogBuilder.setPositiveButton("ok",
                    new DialogInterface.OnClickListener() {

                        public void onClick(DialogInterface dialog,
                                int which) {

                            Intent u = new Intent();
                            u.setClass(CalculationsActivity.this,
                                    CalculationsActivity.class);
                            startActivity(u);
                        }
                    }).create();
            dialogBuilder.show();

        }

    }).create();
    framechoice.show();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T13:59:38.843

如果您正在寻找解决方案

> ////// 我希望这个按钮让我回到“Framechoice”对话框///

将其替换为

```
dialog.cancel(); 
```

看看这是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T14:01:20.327

您应该将您的活动用作 AlertDialog.Builder 的上下文，而不是应用程序的 c 上下文。

更多信息在这里：

[为什么 AlertDialog.Builder(Context context) 只接受 Activity 作为参数？](https://stackoverflow.com/questions/5436822/why-does-alertdialog-buildercontext-context-only-accepts-activity-as-a-paramet)

[https://groups.google.com/forum/?fromgroups#!msg/android-beginners/22dlKekP_V0/t8XfhoDlsQsJ](https://groups.google.com/forum/?fromgroups#!msg/android-beginners/22dlKekP_V0/t8XfhoDlsQsJ)

# javascript - 如何重定向外部生成的动态链接

> ID：10470897
> 
> 赞同：0
> 
> 时间：2012-05-06T13:29:40.177
> 
> 标签：javascript, jquery, .htaccess, redirect, dynamic-linking

前段时间我想过如何降低我的网页成本。我决定使用广告。这是一个文本链接广告。单击文本链接时，广告将在新选项卡中打开。

一段时间后，我意识到关闭广告真的很无聊，不仅对我来说，而且对所有访问我网页的人来说都是如此。

我想出的解决方案是制作一个框架。我知道框架很糟糕，但这是我能想到的唯一解决方案。

它看起来像这样：

```
<frameset rows="0.01%,99.99%" border="0" SCROLLING=NO NORESIZE>
<frame src="script" name="script">  
<frame src="advertisement.html" name="advertisement ">
</frameset> 
```

在脚本框架中，我放置了 javascript，当鼠标在/at/in（不知道它是哪一个 :)）窗口的某个位置单击鼠标时，它会将访问者重定向回我的页面。

所以现在我的问题是：
我从赞助商.de 得到这个生成的链接

```
<script type="text/javascript" src="http://www.sponsorads.de/script.php?s=209836"></script> 
```

它正在执行的脚本是：

```
<script type="text/javascript">
    var preferrer='';`
try {
        preferrer = top.document.referrer;
    } catch (e) {
        preferrer = '';
    } finally {
        var rndVal = 100*(Math.random());
        document.write('<!-- '+rndVal+'-->');
        document.write('<scr' + 'ipt type="text\/javascript"
           src="http://www.sponsorads.de/a_script.php?s=209836&pref=' +
           escape(preferrer) +
           '&ref=' + 
           escape(document.referrer) + 
           '&ck=1&rndVal=' +
           rndVal +
           '"><\/scr' + 
           'ipt>'
         );
     }
</script> 
```

那么我怎样才能让这个链接在我的广告框架中打开呢？
我愿意接受 Javascript、jQuery、.htaccess 或任何其他解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T14:32:04.690

```
<script type="text/javascript">
  var preferrer='';`
  try {
    preferrer = top.document.referrer;
  } catch (e) {
    preferrer = '';
  } finally {
    var rndVal = 100*(Math.random());
    var txt = '<!-- '+rndVal+'-->';
    txt += '<script type="text\/javascript"
       src="http://www.sponsorads.de/a_script.php?s=209836&pref=' +
       escape(preferrer) +
       '&ref=' + 
       escape(document.referrer) + 
       '&ck=1&rndVal=' +
       rndVal +
       '"><\/script>';
    window.advertisement.document.write(txt);
    window.advertisement.document.close();
  }
</script> 
```

或者如果您不想破解他们的脚本，请执行以下操作：

```
<script>
var oldWrite = document.write;
document.write=function(str) {
  window.advertisement.document.write(str);
}
</script>
<script type="text/javascript" src="http://www.sponsorads.de/script.php?s=209836"></script>
<script>
document.write=oldWrite;
window.advertisement.document.close();
</script> 
```

# css - 验证码内置 CSS 问题

> ID：10470901
> 
> 赞同：2
> 
> 时间：2012-05-06T13:30:26.347
> 
> 标签：css

我使用的recaptcha有一个内置的css

```
#recaptcha_area, #recaptcha_table {
  width: 318px !important;
} 
```

当我使用萤火虫时，我看到了这一点。

我的问题是如何覆盖内置宽度？我试图在我的样式表上放置 css 代码，例如

```
#recaptcha_area, #recaptcha_table { 
  width: 207px !important;
} 
```

但它不起作用。还有其他方法可以覆盖吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T13:34:22.850

您应该避免使用`!important`覆盖事物。

你不能告诉recaptcha它的宽度应该是多少；但是，您可以指定最大宽度：

```
#recaptcha_area, #recaptcha_table { 
  max-width: 207px;
} 
```

注意认为这可能会破坏 recaptcha 区域。

# encryption - 电子商务网站以及要加密的数据

> ID：10470902
> 
> 赞同：-2
> 
> 时间：2012-05-06T13:30:31.720
> 
> 标签：encryption, e-commerce

很快我将发布我的第一个电子商务网站。对于要加密或根本不存储哪些数据，我有点偏执。

我计划使用 BrainTree 支付和他们的透明重定向解决方案，这意味着我什至不是信用卡支付的代理，而只是将支付处理的令牌保存在服务器上。

此外，我保留用户送货/账单地址以及基本联系信息，例如全名、电话和电子邮件。

我的问题是，除了密码（Django 默认加密）之外，是否有必要/需要加密用户信息，例如他们的地址？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T13:47:04.320

那么这是一个你必须自己回答的问题，当你想在存储或检索时分别访问这些信息时，你愿意支付额外的加密和解密费用吗？值得付出性能代价吗？

您甚至考虑加密的原因是因为您担心您的应用程序被黑客入侵，也许花时间覆盖该基础比担心一旦您的应用程序被黑客入侵会发生什么对您有用。

同样对于加密/解密，您需要使用密钥，以及一旦您的应用程序已经存在并且您无法按原样执行任何操作，您的密钥不会被黑客入侵的保证。请注意，散列与加密不同，您不会使用散列密钥取回散列数据。

还有一些需要考虑的事情，如果有这样的选项并且用户已注册，您是否真的需要存储此信息或依赖外部服务为您提供此信息。

您也可能想阅读此内容：[http ://www.4guysfromrolla.com/articles/081705-1.aspx](http://www.4guysfromrolla.com/articles/081705-1.aspx)

# zend-framework - 登录用户修改配置文件后如何刷新会话值

> ID：10470907
> 
> 赞同：1
> 
> 时间：2012-05-06T13:31:35.050
> 
> 标签：zend-framework

我在登录后使用 Zend_Auth 来存储会话值。我的问题是：假设用户在登录后更改了他的电子邮件/名字，我如何在会话中反映这一点？

当我做 Zend_Auth::getInstance(); 编辑配置文件后，它会返回旧值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T13:49:22.933

未经测试，但我认为您可以使用：

```
// fetch data in auth storage
$authStorage = Zend_Auth::getInstance()->getStorage();
$authData = $authStorage->read();

// change your values in $authData

$authStorage->write($authData); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T12:27:45.163

如果你把 Object 放到 Zend_Auth 中，那么你可以这样做：

```
$user = Zend_Auth::getInstance()->getIdentity();
$user->setFoo(bar); 
```

它会被改变（因为php通过引用传递对象）

# c++ - 如何在 c++ builder 中通过单个函数更改 10 编辑控件的颜色

> ID：10470908
> 
> 赞同：-1
> 
> 时间：2012-05-06T13:31:36.343
> 
> 标签：c++, delphi, api, c++builder

我想在进入编辑和退出编辑时更改编辑控件的颜色，我想通过单个函数执行此操作我不想在输入事件或退出事件中为每个编辑添加代码

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T18:12:43.497

是的，就像大卫和科比克说你只需要为 OnEnter 和 OnExit 创建事件处理程序并分配你希望使用它们的控件

例如

在表单中添加两个 TEdit，并在表单的构造函数中执行以下操作

```
__fastcall TTestForm::TTestForm(TComponent* Owner)
    : TForm(Owner)
{
    Edit1->OnEnter = EditEnter;
    Edit2->OnEnter = EditEnter;

    Edit1->OnExit = EditExit;
    Edit2->OnExit = EditExit;
} 
```

现在像这样创建 Enter 和 Exit 事件处理程序

```
void __fastcall TTestForm::EditEnter(TObject *Sender)
{
    TEdit *Temp = (TEdit*)Sender;
    Temp->Color = clRed;
}

void __fastcall TTestForm::EditExit(TObject *Sender)
{
    TEdit *Temp = (TEdit*)Sender;
    Temp->Color = clGreen;
} 
```

而已。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T16:19:31.577

Write OnEnter and OnExit event handlers and assign them to each control. Use the Sender parameter to the event to identify which control the event applies to.

# c# - 在 C# 中更新 DataGridView 列值

> ID：10470909
> 
> 赞同：1
> 
> 时间：2012-05-06T13:31:41.580
> 
> 标签：c#, datagridview

我创建了一个包含 6 列的网格，所有列都是字符串类型，现在我的要求是当用户双击第 6 列时，将打开一个新表单，并从 id、name 变量中的选定记录中返回值。

它正在打开表单并获取值，但是在执行以下行时

```
grdItemDetail.Rows[e.RowIndex].Cells[e.ColumnIndex].Value = id; 
```

它没有更新字段给出错误并关闭如何更新此列的值请帮助。完整代码如下。

```
private void grdItemDetail_CellDoubleClick(object sender, DataGridViewCellEventArgs e)
{
        if (e.ColumnIndex == 6)
        {
            frmWarehouseList frmWarehouseList = new frmWarehouseList();
            frmWarehouseList.ShowDialog();
            string id = frmWarehouseList.SelectedWarehouseID;
            string name = frmWarehouseList.SelectedWarehouseName;
            //MessageBox.Show(grdItemDetail.Rows[e.RowIndex].Cells[e.ColumnIndex].Value.ToString());
            grdItemDetail.Rows[e.RowIndex].Cells[e.ColumnIndex].Value = id;
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T13:42:39.547

列索引从零开始，因此如果您有六列，则最高索引为五。

快速解决：

```
if (e.ColumnIndex == 5)
{
  // etc
} 
```

# iphone - 如何结合 InAppSettingsKit 使用本地化？(iPhone/iPad)

> ID：10470913
> 
> 赞同：1
> 
> 时间：2012-05-06T13:32:19.557
> 
> 标签：iphone, ipad, localization, settings.bundle

我正在使用`InAppSettingsKit`我的应用程序中的 ，但是我计划为其添加本地化。我想知道在使用`InAppSettingsKit`.

我在网上浏览了一下，到目前为止还没有太多运气。我猜这将与`Settings.bundle`但我不知道该怎么做。请问有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T04:42:45.157

我的 Settings.bundle 中有子文件夹，每种语言一个，称为 en.lproj、de.lproj 等等。每个子文件夹都包含一个包含本地化字符串的 Root.strings 文件。到目前为止它对我有用。

因此，英语 Root.strings 文件具有如下行：

```
// Root.strings (en)
"TITLE" = "My Localised Title"; // TITLE goes into a title field in your Root.plist 
```

我忘记了是否可以在 XCode 中添加子文件夹。无论如何，您绝对可以通过在 Finder 中手动编辑 Settings.bundle 内容来做到这一点。

希望有帮助。

# php - 当我单击取消按钮时，它不会删除数据库行

> ID：10470918
> 
> 赞同：0
> 
> 时间：2012-05-06T13:32:35.980
> 
> 标签：php, javascript, jquery, sql, ajax

我有一个“取消”按钮，当用户单击它时，它会重置源并删除 iframe，以便在用户单击“取消”按钮后文件不会上传到服务器。这工作正常。

但我遇到的问题是，在用户单击“取消”按钮后，我也不希望它将该行插入数据库。但正如我所说，如果文件被上传，然后在数据库中插入一行显示文件名，那么我想做的是如果单击“取消”按钮，那么它将导航到“取消图像.php”页面，它将删除该行。所以从技术上讲，如果单击“取消”按钮，则插入该行然后删除该行。

问题是它没有删除行，它只是插入行。我怎样才能让它删除数据库中的行？

下面是开始上传的 startImageUpload() 函数以及取消按钮功能的特色：

```
function startImageUpload(imageuploadform){

$(".imageCancel").on("click", function(event) {

              $("iframe[name='upload_target']").attr("src", "javascript:'<html></html>'");
          return stopImageUpload();

    jQuery.ajax("cancelimage.php")

});       
      return true;
} 
```

下面是包含上传脚本 (imageupload.php) 的代码，它在数据库中插入一行：

```
<?php

session_start();

$username="xxx";
$password="xxx";
$database="xxx";

mysql_connect('localhost',$username,$password);

mysql_select_db($database) or die( "Unable to select database");

$result = 0;

      move_uploaded_file($_FILES["fileImage"]["tmp_name"],
      "ImageFiles/" . $_FILES["fileImage"]["name"]);
      $result = 1;

        $imagesql = "INSERT INTO Image (ImageFile) 
        VALUES ('ImageFiles/".mysql_real_escape_string($_FILES['fileImage']['name'])."')";

mysql_query($imagesql);

      }

      mysql_close();

?> 
```

最后下面是 cancelimage.php 页面，假设从数据库中删除该行：

```
<?php

$username="xxx";
$password="xxx";
$database="xxx";

mysql_connect('localhost',$username,$password);

mysql_select_db($database) or die( "Unable to select database");

    echo "File Upload was Canceled";

        $imagecancelsql = "DELETE FROM Image 
        WHERE ImageFile = 'ImageFiles/". mysql_real_escape_string($_FILES['fileImage']['name'])."'";

    mysql_query($imagecancelsql);

    mysql_close();

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T13:39:24.970

当您调用 cancelimage.php`$_FILES['fileImage']['name']`将不再包含名称。它仅包含上传页面上的文件名。您需要将名称存储在 cookie、会话或其他内容中。

* * *

编辑：

永远不要相信来自客户的输入：

`move_uploaded_file($_FILES["fileImage"]["tmp_name"], "ImageFiles/" . $_FILES["fileImage"]["name"]);`

如果我用文件名“../imageupload.php”上传了一些东西怎么办。你的网站会被破坏；）更糟糕的是，我可以注入各种讨厌的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T13:59:36.183

> 返回停止图像上传（）；

你的语句读起来就像处理了停止图像并且执行返回。以下语句`jQuery.ajax("cancelimage.php")`永远不会被调用。

# objective-c - 如何等到模态对话框在ios中返回结果

> ID：10470925
> 
> 赞同：1
> 
> 时间：2012-05-06T13:33:18.733
> 
> 标签：objective-c, ios

我在 http 基本身份验证委托中`UIViewController`显示了一个自定义`presentModalViewController`功能，以获取用户名和密码。我想等到用户单击屏幕上显示的模态视图控制器上的登录按钮。我怎样才能做到这一点？我是 iOS 新手，任何评论或链接将不胜感激。

编辑：这是里面的示例代码`NSURLConnectionDelegate`

```
-(void) connection(NSURLConnection*)connection willSendRequestForAuthenticationChallenge(NSURLAuthenticationChallenge*)challenge
{
    CustomAuthViewController *authView = [CustomAuthViewController alloc] initWithNibName"@"CustomAuthViewController" bundle:[NSBundle mainBundle]];
    [parentcontroller presentModalViewController:authView animated:YES];
    // 
    // I want to wait here somehow till the user enters the username/password
    //
    [[challenge sender] userCredentials:credentials forAuthenticationChallenge:challenge];
} 
```

亲切的问候。

编辑：解决方案：没有必要立即在 willSendRequestForAuthenticationChallenge 委托函数中发送凭据。我可以稍后随时发送，但很奇怪。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-06T13:49:33.713

基本上，您想要的是在登录对话框完成时将消息从模态 UIViewController 传递给调用者。有很多方法可以做到这一点。这是一对：

选项 1 - 代表模式：

在您的模态对话框 .h

```
@protocol LoginDelegate
- (void)loginComplete:(NSString *)userId;
- (void)loginFailed;
@end

@interface MyLoginDialog : UIViewController {
    UIViewController *delegate;
}

@property (nonatomic, retain) UIViewController *delegate; 
```

在您的模态对话框 .m

在你的初始化：

```
delegate = nil; 
```

在你的交易中：

```
[delegate release]; 
```

当您完成登录时：

```
[delegate dismissModalViewControllerAnimated:YES]; 
[delegate loginComplete:userId] or [delegate loginFailed]; 
```

然后在调用视图控制器上实现 LoginDelegate 协议。

当您创建登录视图控制器时，设置委托：

```
UIViewController *viewLogin = [[UIViewController alloc] init];
viewLogin.delegate = self; 
```

选项 2 - 使用 NSNotificationCenter 发布通知：

在您的登录对话框中：

```
[self dismissModalViewControllerAnimated:YES];
[[NSNotificationCenter defaultCenter] postNotificationName:@"LoginComplete" object:nil]; 
```

在您的调用视图控制器上

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(loginComplete:) name:@"LoginComplete" object:nil]; 
```

然后实现选择器 loginComplete。

如果您想传回登录信息（用户名、用户 ID 等），您可以将其打包到字典中并将其添加为 postNotificationName 方法中的“对象”。

您还需要确保致电

```
[[NSNotificationCenter defaultCenter] removeObserver:self]; 
```

当你听完。

# javascript - 在javascript中制作一个包含2位数字的数组

> ID：10470926
> 
> 赞同：0
> 
> 时间：2012-05-06T13:33:27.517
> 
> 标签：javascript

假设我有一个变量，它包含数字 19。我想从中创建一个包含以下数字的数组

```
var positions = [ "00", "01", "02", "03", "04", "05", "06", "07", "08", "09", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19" ]; 
```

这在javascript中怎么可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T13:42:39.883

就像是 ：

```
var number = 19;
var arr = [];
for ( i = 0; i <= number ; i++ ) {
   arr.push(i < 10 ? ("0" + i.toString()) : i.toString());
} 
```

演示：http: [//jsfiddle.net/Kfnnr/1/](http://jsfiddle.net/Kfnnr/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T13:53:30.027

或者：

```
var mynumber = 19,
    myarr = String(Array(mynumber+1))
            .split(',')
            .map(function(el,i){return i<10 ? '0'+i : ''+i;}); 
```

对于零填充，您可能需要使用：

```
function padLeft(nr,base,chr){
  base = base || 10;
  chr = chr || '0';
  var  len = (String(base).length - String(nr).length)+1;
  return len > 0? Array(len).join(chr)+nr : nr;
}
// usage
padLeft(1);           //=> '01'
padLeft(1,100);       //=> '001'
padLeft(1,10000,'-'); //=> '----1' 
```

**2019 年更新**：在 es20xx`String.prototype`中包含一个本地`padStart`方法：

```
"1".padStart(2, "0"); //=> "01"
//           ^ max length
//               ^ fill string (or space if omitted) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T13:55:26.110

本质上你想填充 0，当数字改变时，这里的答案是不够的和扩展的。可能更好的解决方案是

```
function padZero(num, size) {
    var s = num+"";
    while (s.length < size) s = "0" + s;
    return s;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-11-19T13:53:30.790

使用这个例子终于解决了我自己的@@iterator 函数接口问题；非常感谢

```
var myArray = [];
function getInterval (start, step, end, ommit){
    for (start; start <= end; start += step) {
		myArray.push( start < 10 ? ("" + start.toString()) : start.toString());

    }
        				}

getInterval(2, 2, 20, 20);

myArray; // __proto__: Array
// (10) ["2", "4", "6", "8", "10", "12", "14", "16", "18", "20"]
myArray[4]; // "10"
```

# javascript - 如何通过 jQuery 随机 {1|2|3|4}？

> ID：10470928
> 
> 赞同：-2
> 
> 时间：2012-05-06T13:33:59.823
> 
> 标签：javascript, jquery, html, arrays, json

```
<div class="xxx">Number is {1|2|3|4}, and {one|two|three|four}</div>

<div class="yyy"></div> 
```

...

```
var data = $(".xxx").text();

$(".yyy").html(data); 
```

[http://jsfiddle.net/tQeCv/](http://jsfiddle.net/tQeCv/)

我只需要这个输入：

**数字是 {1|2|3|4}，{one|two|three|four}**

像这样随机输出：

**数字是 3 和 4**

我不知道该怎么做......对不起:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T13:42:02.300

这不是 JSON。我假设您想随机拆分 1,2,3 和 4 个元素。您必须在 | 上拆分数据。字符，然后随机排序您的结果（或编写您自己的随机播放算法）。

```
var data = $(".xxx").text(); // initial data

var results = data.split("|"); // split on the "|" and store into results 
```

然后，您必须从数组中获取一个随机元素：

```
var randomNumber = Math.floor((Math.random()*4)+1); // random number (no more than 4 or the array will be out of bounds) 
```

随机播放/显示数据：

```
var firstElement = results[randomNumber];
randomNumber = Math.floor((Math.random()*4)+1);
var secondElement = results[randomNumber]; 
```

等等....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T14:02:35.113

尝试一些简单的开始，比如理解 split() 等。

这里有一些东西：

```
var data = $(".xxx").text(),
    numbs = data.split('{')[1].split('}')[0].split('|'),
    words = data.split('{')[2].split('}')[0].split('|'),
    newdata = data.split('{')[0]+' '+numbs[Math.floor(Math.random()*numbs.length)];
    newdata += data.split('}')[1].split('{')[0]+' '+words[Math.floor(Math.random()*words.length)];

$(".yyy").html(newdata);

​ 
```

[小提琴](http://jsfiddle.net/adeneo/tQeCv/4/)

然后继续用正则表达式替换。

**编辑：**

为了使其更具动态性并使用更多占位符，您可以使用一些正则表达式来执行以下操作：

```
var data = $(".xxx").text(),
    placeholder = data.match(/{(.*?)}/gi);

$.each(placeholder, function(i,e) {
    var options = e.split('|'),
        randOpt = options[Math.floor(Math.random()*options.length)];
    data = data.replace(e, randOpt.replace(/({|})/g, ''));
});

$(".yyy").html(data); 
```

[小提琴](http://jsfiddle.net/adeneo/tQeCv/10/) ​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T13:38:40.047

您可以使用`Math`对象`.random()`方法：

[https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Math/random](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Math/random)

```
function randomNumber()  
{  
  num = Math.ceil(Math.random() * (1 - 4) + 4); 
  $(".yyy").text(num) 
} 
```

# php - Zend Framework 2 + Doctrine 2 框架应用

> ID：10470929
> 
> 赞同：3
> 
> 时间：2012-05-06T13:34:15.110
> 
> 标签：php, doctrine-orm, zend-framework2

一段时间以来，我一直在玩 ZF2 和 Doctrine 2，我觉得它们很棒。我对其中任何一个都没有太多经验，但我一直在研究多个教程和示例应用程序。他们给了我一些关于库的想法，但我对 DQL 和在控制器中刷新 EM 之类的东西感到不舒服。我意识到 ZF2 仍然是一个测试版，但我希望有一些代码可以显示一个可扩展的结构，可以成为现实生活中应用程序的骨架。请分享您的经验，并尽可能提供示例源代码。

问候瓦伦丁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T05:50:32.150

骨架是现实生活应用程序的骨架，这就是它的用途。如果您想将 zf2 与学说联系起来，只需安装 DoctrineModule 和 DoctrineORMModule（或 ODM，如果您想要的话。）

DQL 不应该真的存在于您的控制器中，而是将其放在存储库中。

EM 可以在控制器中刷新，但有时最好设置一个事件侦听器，然后在每个请求结束时刷新一次 EM。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T15:50:13.030

[http://www.jasongrimes.org/2012/01/using-doctrine-2-in-zend-framework-2/](http://www.jasongrimes.org/2012/01/using-doctrine-2-in-zend-framework-2/) - 设置 ZF2-D2 所需的所有教程

# web-services - 是否可以使用 Apache ODE 在一个端点上公开多个端口？

> ID：10470935
> 
> 赞同：1
> 
> 时间：2012-05-06T13:34:51.453
> 
> 标签：web-services, bpel, apache-ode

我试图在一个端点上公开多个端口。绑定是相等的 - SOAP。

```
<service name="Test">
<port name="CustomerPort" binding="tns:BindingOne">
<soap:address location="http://localhost:8080/ode/processes/Test" />
</port>
<port name="GuidePort" binding="tns:BindingTwo">
<soap:address location="http://localhost:8080/ode/processes/Test" />
</port>
</service> 
```

由于某种原因，只有一个端口被暴露。在 WCF 中，这将起作用。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T21:02:44.100

ODE 使用 Axis2 来公开 Web 服务，所以如果它不起作用，很可能是 Axis2 的限制。虽然，我不确定这是否是一个限制，但我的直觉是在同一个 EPR 上暴露两个不同的端口是个坏主意。

# javascript - 浏览器对脚本 URL 的反应不一致

> ID：10470936
> 
> 赞同：2
> 
> 时间：2012-05-06T13:34:55.533
> 
> 标签：javascript, asp.net, internet-explorer, firefox

我有一个 Nivo 幻灯片库，并且在浏览器之间遇到了一些奇怪的不一致。

为了让滑块图像出现在 Firefox 和 Chrome 中，可以这样做：

```
<script type="text/javascript" src="scripts/jquery.nivo.slider.pack.js"></script> 
```

为了让它们在 IE9 中呈现，我必须使用：

```
<script type="text/javascript" src="../scripts/jquery.nivo.slider.pack.js"></script> 
```

我正在使用母版页。当内容页面位于根目录时，不会出现此问题；它仅在内容页面位于文件夹中时发生。

任何人都可以对此有所了解并提出解决方法吗？在代码隐藏中注册脚本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T13:49:57.053

确保您拥有正确的资产，或者使用绝对路径

```
<script type="text/javascript" src="http://www.mydomain.com/scripts/my_script.js"></script> 
```

或者

```
<script type="text/javascript" src="/scripts/my_script.js"></script> 
```

# mysql - SQL查询比较表的行比较列值

> ID：10470941
> 
> 赞同：1
> 
> 时间：2012-05-06T13:35:43.503
> 
> 标签：mysql, sql

我已将一个大型 CSV 文件导入到表中。表格示例如下所示

```
name,      eye,point,field,date,seconds,sensitivity*10,slope,intercept,T*1000

NESSA SONIA ,R,6,4,08-04-09,32658845,160,1.062300e+001,62538,  1282
NESSA SONIA ,R,6,5,20-05-09,36288632,20, 5.360101e+000,64036,   771
NESSA SONIA ,R,6,6,02-12-09,53223062,60, 3.425260e+000,64590,   767
NESSA SONIA ,L,6,4,08-04-09,32658922,230,4.629489e+000,64382,   582
NESSA SONIA ,L,6,5,20-05-09,36288515,170,2.805373e+000,64901,   511
NESSA SONIA ,L,6,6,02-12-09,53223059,220,3.528252e+000,64694,  1022 
```

我必须将右眼和左眼“灵敏度 * 10”值与匹配点和字段值进行比较并提取最高值（我的意思是行）。

例如，我必须比较第一行和第四行，因为点、字段和日期相同，并提取第四行，因为灵敏度最高。我有一个巨大的文件，需要提取所有值。任何人都可以帮助使用 sql 查询，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T02:07:23.253

```
(select  `table l`.*  from `table l`, `table r` 
where `table l`. `sensitivity*10` > 10 and `table l`.`sensitivity*10`>`table r`.`sensitivity*10`) 

union 

(select  `table r`.* from `table r`, `table l` 
where `table r`. `sensitivity*10` > 10 and `table r`.`sensitivity*10`>`table l`.`sensitivity*10`) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T15:00:34.027

您需要使用 SQL`MAX()`函数和`GROUP BY`名称。

尝试这样的事情：

```
SELECT  *
FROM    (
    SELECT  point, field, MAX(sensitivty*10) AS max
    FROM    table
    GROUP BY
            name
    ) tbl
JOIN    table
ON      table.point = tbl.field 
```

另外，请查看其他 Stackoverflow Q&A，它的查询类似于您感兴趣的查询：[SQL Group by & Max](https://stackoverflow.com/questions/1299556/sql-group-by-max)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T16:09:04.507

我认为这应该适合你：

```
select if(t1.sensitivity*10 > t2.sensitivity*10,t1.sensitivity*10,t2.sensitivity*10) as col1  
from table t1 
inner join table t2 
    on  t1.field = t2.field 
    and t1.point = t2.point 
    and t1.date = t2.date 
where t1.eye ='R' and t2.eye ='L' 
```

# javascript - 在 iFrame 中显示文本框中的 HTML

> ID：10470942
> 
> 赞同：-3
> 
> 时间：2012-05-06T13:35:56.577
> 
> 标签：javascript, jquery, html

这是我现在所拥有的：

[http://jsfiddle.net/QSDTV/1/](http://jsfiddle.net/QSDTV/1/)

有没有一种方法可以在文本区域中键入 HTML 代码（包括标签和标签等>，当我单击底部的“更新内容”按钮时，它会在该 iFrame 中呈现我的 html 代码？或者也许它应该显示在 DIV 中？我不知道。

谢谢你的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T13:39:53.463

用这个代码试试这个。

[http://jsfiddle.net/QSDTV/2/](http://jsfiddle.net/QSDTV/2/)

```
$(document).ready(function() {
    $("#update").click(function() {
      $("#content").html($("#editor").val()) 
    }) 
}) 
```

# delphi - 如何重新编译对 VCL 源文件 (Menus.pas) 的修改？

> ID：10470943
> 
> 赞同：9
> 
> 时间：2012-05-06T13:35:56.750
> 
> 标签：delphi, compiler-errors, delphi-xe

我们有一个修改过的 menus.pas。

在

```
uses ...,Controls,...; 
```

编译器引发了一个致命错误：

> [DCC 致命错误] Menus.pas(*): F2051 Unit Controls 使用不同版本的 Menus.TPopupMenu 编译

试过：

删除了项目中的所有 dcu。

建造

构建所有

尝试将文件添加到库路径中，这会导致添加 db 文件夹（也来自 vcl），然后添加到

> [DCC 错误] jpeg.pas(872): E2065 Unsatisfied forward or external declaration: 'jpeg_save_markers'

这是一条死胡同。

删除了controls.dcu（全部3个）并且delphi不知道自动重新编译它们，而是报告controls.dcu丢失。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-06T15:44:55.837

以下是我如何处理对 VCL 源文件的修改：

*   在您的项目结构中制作该文件的副本。将文件添加到您的项目中，或者确保搜索路径找到您修改过的文件。
*   进行修改，但仅限于实施部分。如果您使用任何其他本身使用您正在修改的单位的单位，则您无法修改界面部分。
*   在修改后的源文件顶部显式设置编译器选项。使用默认的 Delphi 选项，如在默认 vanilla 项目中按 CTRL+OO 找到的。

我猜最后两个要点之一就是让你绊倒的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-07-09T20:25:27.580

在 Delphi XE7（及以下）中，主题和样式完全无法使用。

所以，我修补了文件（Delphi XE7\source\vcl\Vcl.Themes.pas），将它添加到项目文件中，编译它并得到一个 DCU。我用新的 DCU（Delphi XE7\lib\win32\release\Vcl.Themes.dcu - 与“调试”文件夹相同）替换了旧的 DCU。现在一切都很顺利。我什至不必将 PAS 文件链接到我的项目。

# c++ - 从 OS X 迁移到 linux Red-Hat 时出错

> ID：10470945
> 
> 赞同：0
> 
> 时间：2012-05-06T13:36:32.827
> 
> 标签：c++, linux, xcode, macos

我使用 XCode 编写了我的程序。它在 Mac 上运行没有任何问题。有人告诉我，我们的项目将在 Linux 机器上编译，所以我想在提交之前确保它在 Linux 上工作。当我尝试在 Linux 上编译时，它给了我一些参考错误：

```
/tmp/cckwoehj.o: In function `main':
main.cpp:(.text+0x9): undefined reference to `ReadFile()'
/tmp/cckwoehj.o: In function `leftSearch(NODE*, int)':
main.cpp:(.text+0x38b): undefined reference to `conflict(int**)'
main.cpp:(.text+0x3ca): undefined reference to `removeAllRowsWithLiteral(int**, int)'
main.cpp:(.text+0x3ec): undefined reference to `removeAllSpecifiedLiteral(int**, int)'
main.cpp:(.text+0x4ec): undefined reference to `conflict(int**)'
main.cpp:(.text+0x522): undefined reference to `unitPropagation(int**)'
main.cpp:(.text+0x538): undefined reference to `conflict(int**)'
/tmp/cckwoehj.o: In function `rightSearch(NODE*, int)':
main.cpp:(.text+0x992): undefined reference to `conflict(int**)'
main.cpp:(.text+0x9d4): undefined reference to `removeAllRowsWithLiteral(int**, int)'
main.cpp:(.text+0x9f3): undefined reference to `removeAllSpecifiedLiteral(int**, int)'
main.cpp:(.text+0xaf3): undefined reference to `conflict(int**)'
main.cpp:(.text+0xb29): undefined reference to `unitPropagation(int**)'
main.cpp:(.text+0xb3f): undefined reference to `conflict(int**)'
collect2: ld returned 1 exit status 
```

我在网上找到的东西都是关于模板的。我不使用模板。我还发现了一个关于 32 位和 64 位操作系统问题的问题，但我没有。

我有一个名为 ReadFile 的函数，它在标头中声明。我从 main 调用它并将该头文件包含在 main.h 中。我不确定问题是什么。如果 OS X 编译并运行而 Linux 没有，我假设 OS X 在内部做了一些它认为很明显的事情，但 Linux 不是那样写的。这是链接器错误吗？我认为 OS X 将被编程为在内部执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T14:15:17.830

您在标头中声明您的函数，但没有定义，当您尝试将 main.cpp 转换为可执行文件时会导致未定义的引用。

您需要编译所有源文件并将它们链接在一起（以正确的顺序）。

```
g++ -c ReadFile.cpp
#...
g++ -c main.cpp
g++ main.o ... ReadFile.o -o my_executable 
```

右侧的目标文件不依赖于命令行左侧目标文件中定义的未解析符号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T21:01:46.420

XCode 是一个 IDE，所以我猜它会为您处理链接顺序。

要自动处理所有这些东西，您还必须使用 IDE 和/或编写 Makefile。如果您坚持使用单个命令，是的，您可以，只要您在该行中包含所有源文件（例如 g++ *.cpp），但这会强制对每个更改进行完全重新编译。

# meteor - 如何将命令行参数传递给 Meteor 应用程序？

> ID：10470948
> 
> 赞同：5
> 
> 时间：2012-05-06T13:36:53.787
> 
> 标签：meteor

我想在启动时将命令行参数传递给我的 Meteor 应用程序。

例如 --dev、--test 或 --prod 指示它是否在 dev、test 或 prod 环境中运行。然后它可以在启动时加载不同的资源，等等......

我在 /server/server.js 中尝试过这样的事情

```
var arguments = process.argv.splice(2);
console.log('cmd args: ' + JSON.stringify(arguments,0,4)); 
```

我跑了一个测试。还有很多其他的只是随机的命令行参数。

```
meteor --dev 
```

控制台中的输出只有这个。

```
cmd args: [
    "--keepalive"
] 
```

将命令行参数输入 Meteor 应用程序的最佳方法是什么？

或者，这甚至是解决更高层次问题的正确方法吗？如果没有，解决这个区分运行环境的问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-07T08:03:45.413

如果 Meteor 不知道命令行参数，它不会将它们转发到您的应用程序。您有多种可能性：

1.  重写部分`meteor.js`以转发无法识别的参数。这不应该太难，但这不是一个很好的解决方案。如果发生更新，您就有麻烦了。:D
2.  您可以编写一个小配置文件并根据其中的配置选项更改应用程序的行为。看看[这个问题](https://stackoverflow.com/questions/5869216/how-to-store-node-js-deployment-settings-configuration-files)。
3.  最简单的方法是使用环境变量。[您可以像这样](https://stackoverflow.com/questions/4870328/how-to-read-environment-variable-in-node-js)在节点中读取环境变量。之后，您可以以“express.js”方式启动您的应用程序：`$ METEOR_ENV=production meteor`

我希望我能帮助你！:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-11T15:01:29.993

它不起作用的原因是该`meteor`命令启动了一个代理（它获取您提供的参数），然后它使用`--keepalive`.

`process.argv`如果您使用 Meteor 构建`meteor build --directory /my/build/path`并运行它，它将具有正确的值。

# jquery - Rails3 自动完成 - 对象没有“自动完成”方法

> ID：10470955
> 
> 赞同：1
> 
> 时间：2012-05-06T13:38:34.337
> 
> 标签：jquery, ruby-on-rails, ruby, ruby-on-rails-3, autocomplete

我正在尝试实现自动完成功能。我浏览了[https://github.com/crowdint/rails3-jquery-autocomplete](https://github.com/crowdint/rails3-jquery-autocomplete)但我不得不错过一些东西，因为自动完成字段根本不起作用。

当我尝试使用自动完成字段时，没有任何反应。Chrome JS 控制台显示以下错误：

```
Uncaught TypeError: Object [object Object] has no method 'autocomplete' 
```

# 控制器：

```
class GamesController < ApplicationController
  autocomplete :game, :title 
```

# 路线.rb：

```
get "games/autocomplete_game_title" => "games#autocomplete_game_title", :controller => 'games', :action => "autocomplete_game_title", :via => :get, :as => "autogames" 
```

# 查看*（游戏/编辑）*：

```
<% form_for Game.new, :url => { :controller => "games", :action => "edit" } do |f| %>
 <%= f.error_messages %>
 <%= f.autocomplete_field :title, autogames_path %>
 <%= f.submit "Edit" %>
<%  end %> 
```

# 布局标题：

```
<link href="/stylesheets/admin.css?1300378198" media="screen" rel="stylesheet" type="text/css" /> 
<script src="/javascripts/jquery.js?1335792905" type="text/javascript"></script> 
<script src="/javascripts/jquery_ujs.js?1335792905" type="text/javascript"></script> 
<script src="/javascripts/application.js?1335809045" type="text/javascript"></script> 
<script src="/javascripts/autocomplete-rails.js?1336304504" type="text/javascript"></script> 
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/themes/smoothness/jquery-ui.css" media="screen" rel="stylesheet" type="text/css" /> 
```

我完全糊涂了，我检查了几乎所有的组合。有什么建议可能是错的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T14:00:26.857

我在尝试将那个 gem 与 Rails > 3.0 一起使用时遇到了很多问题，我最终使用了直接的 Jquery-UI 替代方案，这也更容易。您可能想查看此[链接](http://babinho.net/2011/05/autocomplete-fields-in-rails-3-1-with-jquery-ui-pt-2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T10:33:02.103

问题是你没有加载jquery-ui，如果使用资产管道，你需要添加js和css。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T23:36:29.727

我有类似的问题并解决了，然后对[这个问题](https://stackoverflow.com/questions/11705158/rails3-jquery-autocomplete)发表了一些评论。您可能想检查一下。

# iphone - iPad 上的操作表

> ID：10470959
> 
> 赞同：0
> 
> 时间：2012-05-06T13:39:02.497
> 
> 标签：iphone, objective-c, cocoa-touch, ipad

在 iPhone 上，我喜欢操作表占据整个屏幕宽度的方式，并且您可以选择它的高度（这样我就可以包含其他视图）。这是我创建动作视图的整个方法（尽管您可能需要最后几行）...

```
-(void)createActionView {
    UIActionSheet *actionSheet = [[UIActionSheet alloc] initWithTitle:nil 
                                                             delegate:self
                                                    cancelButtonTitle:nil
                                               destructiveButtonTitle:nil
                                                    otherButtonTitles:@"Done",nil];

    [actionSheet setActionSheetStyle:UIActionSheetStyleBlackTranslucent];

    UIButton *downHoleScore = [UIButton buttonWithType:UIButtonTypeCustom];
    downHoleScore.frame = CGRectMake(93, 75, 35, 35);
    [downHoleScore setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
    downHoleScore.backgroundColor = [UIColor clearColor];
    downHoleScore.tag=1;
    [downHoleScore addTarget:self action:@selector(HoleScoreButtonTap:) forControlEvents:UIControlEventTouchUpInside];
    [downHoleScore setBackgroundImage:[UIImage imageNamed:@"Left-Down-Arrow.png"] forState:UIControlStateNormal];
    [actionSheet addSubview:downHoleScore];

    UIButton *upHoleScore = [UIButton buttonWithType:UIButtonTypeCustom];
    upHoleScore.frame = CGRectMake(193, 76, 35, 35);
    [upHoleScore setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
    upHoleScore.backgroundColor = [UIColor clearColor];
    upHoleScore.tag=2;
    [upHoleScore addTarget:self action:@selector(HoleScoreButtonTap:) forControlEvents:UIControlEventTouchUpInside];
    [upHoleScore setBackgroundImage:[UIImage imageNamed:@"Right-Up-Arrow.png"] forState:UIControlStateNormal];
    [actionSheet addSubview:upHoleScore];

    golferScoreLabel = [[UILabel alloc] initWithFrame:CGRectMake(140, 70, 45, 45)];
    golferScoreLabel.text = @"0";
    golferScoreLabel.backgroundColor = [UIColor clearColor];
    golferScoreLabel.font = [UIFont fontWithName:@"ChalkDuster" size: 45.0];
    golferScoreLabel.textAlignment = UITextAlignmentCenter;
    golferScoreLabel.shadowColor = [UIColor grayColor];
    golferScoreLabel.shadowOffset = CGSizeMake(1,1);
    golferScoreLabel.textColor = [UIColor whiteColor];
    [actionSheet addSubview:golferScoreLabel];

    CGRect pickerFrame = CGRectMake(0, 120, 0, 0);

    UIPickerView *pickerView = [[UIPickerView alloc] initWithFrame:pickerFrame];
    pickerView.showsSelectionIndicator = YES;
    pickerView.dataSource = self;
    pickerView.delegate = self;

    [actionSheet addSubview:pickerView];

    [actionSheet showInView:[[UIApplication sharedApplication] keyWindow]];

    [actionSheet showFromRect:CGRectMake(0, 0, 320, 585) inView:self.view animated:YES];
} 
```

我将如何编辑它以使其看起来更像 iPhone 上的操作视图？

在这段代码...

```
[actionSheet showFromRect:CGRectMake(0, 0, 320, 585) inView:self.view animated:YES]; 
```

以上是我认为我搞砸的地方，如何让它覆盖 iPad 屏幕的整个下半部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T15:00:38.410

阅读 上的文档`UIActionSheet`。在 iPad 上，它们以弹出框的形式呈现。

如果你想要 iPhone 上的行为，我认为你必须编写自己的类似 actionSheet 的视图和动画（这真的不难，只是需要一点时间）。

无论如何，在 iPad 上以全宽呈现 actionSheets 无论如何都不是很好的设计——您可能不希望按钮与整个屏幕一样宽。我建议你重新考虑你的设计。

但也许你真的不想要 actionSheets。也许你只想要那个漂亮的动画，像那样呈现一些你自己的内容？这当然是可行的（见上文），但是你问错了问题。

# php - 从 UTF-8 字符串中去除不可打印的字符以在 XML 中使用

> ID：10470963
> 
> 赞同：1
> 
> 时间：2012-05-06T13:39:36.647
> 
> 标签：php, xml

XML 流中的一些特殊字符可能会破坏它。我需要清理我想在这样的流中插入的数据，以便 1）它不会损坏 2）其中的可打印 UTF-8 字符继续工作。

我还需要在生成输出后立即将其刷新，否则我将不得不在 ram 中保留很多东西。

截至目前，我做类似的事情

```
$return = preg_replace('/[^\p{L}\s]/u', '', $return); 
```

它删除了大部分不可打印的字符，但不是全部。我很难弄清楚是什么字符导致了这个问题，但是当我遇到其中一个字符时，终端会返回“1;2c”。

你有没有更好的方法来去除所有这些丑陋的角色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T14:35:19.493

不确定您是否走在正确的道路上...

1.) 为什么要以基于文本的格式传输不可打印（二进制？）数据？

2.) 检查 CDATA 是否有帮助

```
<node><![CDATA[ugly characters]]></node> 
```

3.) 使用 base64 将二进制数据转换为可打印字符

```
<node><?php echo base64_encode($uglyCharacters); ?></node> 
```

# haskell - Haskell：在函数组合中使用映射

> ID：10470964
> 
> 赞同：6
> 
> 时间：2012-05-06T13:39:38.317
> 
> 标签：haskell, syntax, map, function-composition

我对 Haskell 比较陌生，如果我的问题听起来很愚蠢，我很抱歉。我一直在尝试了解函数组合是如何工作的，并且遇到了一个我想知道有人可以帮助我解决的问题。我在以下两种情况下在函数组合中使用 map：

*   `map (*2) . filter even [1,2,3,4]`
*   `map (*2) . zipWith max [1,2] [4,5]`

尽管 filter 和 zipWith 函数都返回一个列表，但只有第一个组合有效，而第二个组合抛出以下错误：

```
"Couldn't match expected type '[Int] -> [Int]' with actual type '[c0]' 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-06T14:06:21.740

回想 的类型`(.)`。

```
(.) :: (b -> c) -> (a -> b) -> a -> c 
```

它接受三个参数：两个函数和一个初始值，并返回两个函数组合的结果。

现在，函数对其参数的应用比`(.)`运算符绑定得更紧密。所以你的表达：

```
map (*2) . filter even [1,2,3,4] 
```

被解析为：

```
(.) (map (*2)) (filter even [1,2,3,4]) 
```

现在，第一个参数`map (*2)`是可以的。它具有类型`(b -> c)`、位置`b`和`c`位置`Num a => [a]`。但是，第二个参数是一个列表：

```
Prelude> :t filter even [1,2,3,4]
filter even [1,2,3,4] :: Integral a => [a] 
```

所以类型检查器会抱怨你在函数需要一个函数`[a]`时将 a 作为参数传递。`(.)`

这就是我们所看到的：

```
Couldn't match expected type `a0 -> [b0]' with actual type `[a1]'
In the return type of a call of `filter'
In the second argument of `(.)', namely `filter even [1, 2, 3, 4]'
In the expression: map (* 2) . filter even [1, 2, 3, 4] 
```

所以...括号！

使用`$`运算符添加括号：

```
map (*2) . filter even $ [1,2,3,4] 
```

或使用显式括号，删除两个函数的组合

```
map (*2) (filter even [1,2,3,4]) 
```

甚至：

```
(map (*2) . filter even) [1,2,3,4] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-06T13:58:32.207

的结果`zipWith max [1,2] [4,5]`是一个列表，而不是一个函数。(.) 运算符需要一个函数作为其右操作数。因此，您的第二行出现错误。可能你想要的是

```
map (*2) (zipWith max [1,2] [4,5]) 
```

您的第一个示例无法在 WinHugs（Hugs 模式）上编译；它有同样的错误。以下将起作用

```
(map (*2) . filter even) [1,2,3,4] 
```

因为它由两个函数组成，并将结果函数应用于一个参数。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-06T14:07:47.967

以下表格有效：

```
map (* 2) $ filter even [1, 2, 3, 4]
(map (* 2) . filter even) [1, 2, 3, 4]
map (* 2) $ zipWith max [1, 2] [4, 5]
(\xs -> map (* 2) . zipWith max xs) [1, 2] [4, 5] 
```

但不是以下内容：

```
map (* 2) . filter even [1, 2, 3, 4]
map (* 2) . zipWith max [1, 2] [4, 5]
(map (* 2) . zipWith max) [1, 2] [4, 5] 
```

为什么呢？好吧，举个例子

```
map (* 2) . zipWith max [1, 2] [4, 5] 
```

它与

```
(map (* 2)) . (((zipWith max) [1, 2]) [4, 5]) 
```

`(map (* 2))`有类型`[Int] -> [Int]`（假设默认为`Int`），`(((zipWith max) [1, 2]) [4, 5])`有类型`[Int]`并且`(.)`有类型`(b -> c) -> (a -> b) -> a -> c`或`([Int] -> [Int]) -> ([Int] -> [Int]) -> [Int] -> [Int]`在这种非多态的情况下，所以这是错误类型的。另一方面`($)`有 type `(a -> b) -> a -> b`，或者`([Int] -> [Int]) -> [Int] -> [Int]`在这种非多态的情况下，所以这个：

```
(map (* 2)) $ (((zipWith max) [1, 2]) [4, 5]) 
```

是很好的类型。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-06T14:08:53.467

由于 的优先级较低`(.)`，Haskell 解析

```
map (*2) . filter even [1,2,3,4] 
```

作为

```
map (*2) . (filter even [1,2,3,4]) 
```

即用（列表）`map (*2)`的结果组合（函数）`filter even [1,2,3,4]`，这是没有意义的，并且是类型错误。

您可以使用@Theodore 的建议或使用以下方法解决此问题`($)`：

```
map (*2) . filter even $ [1,2,3,4] 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-06T14:08:59.567

如果您检查地图的类型，它是：`(a -> b) -> [a] -> [b]`

因此，它将 a 的函数放入 b 中，然后将 a 的列表放入并返回 b 的列表。正确的？

现在，您已经通过传递参数将 a 函数提供到 b 中`(*2)`。因此，您部分应用的 map 函数最终是：`[Integer] -> [Integer]`这意味着您将收到一个整数列表并返回一个整数列表。

到目前为止，您可以编写 (.) 一个具有相同签名的函数。如果您检查什么是类型，`filter even`您会看到它是：`[Integer] -> [Integer]`，因此是此处作文的有效候选者。

那么这个组合不会改变函数的最终签名，如果你检查类型：`map (*2) . filter even`它是`[Integer] -> [Integer]`

情况并非如此，`map (*2) . zipWith max [1,2] [4,5]`因为 与`zipWith max`预期的签名不同`map (*2)`。

# c++ - 关于我的模板链表

> ID：10470965
> 
> 赞同：0
> 
> 时间：2012-05-06T13:39:38.580
> 
> 标签：c++, templates, data-structures, containers

有点奇怪的是，不久前我成功地实现了我自己的模板链表作为一项教育练习。现在我知道它有效，我一直在使用它来创建一个包含“Sprite”对象的节点列表，当时我理解它，但我今天去回顾它，我真的很困惑。

如果你愿意看看我的实现并帮助我弄清楚。

**程序如何知道应该为 _data（在 Node 中）分配一个 NodeType 对象？（如果你会原谅糟糕的措辞）**我的意思是我有那个功能`SetData`，但我什至从不使用它。例如，当我在列表上 PushBack 时，我只是创建了一个 ListType 的新节点，但我从未设置该节点的数据。节点构造函数没有说`_data = new NodeType`什么。

然而，我可以调用`GetData()`列表中的任何节点并返回一个 Sprite 对象。我的意思是我知道它有效，但我忘记了如何！有人可以看看并提醒我吗？将不胜感激！

**节点.hpp：**

```
#if !defined NODE_HPP
#define NODE_HPP

template<typename NodeType>
class Node{

   public:
      Node( Node* prev = 0, Node* next = 0);
      void SetData(NodeType newData);
      NodeType* GetData();
      Node* GetPrev();
      Node* GetNext();

   private:
      template<typename ListType>
      friend class List;

      NodeType _data;
      Node* _prev;
      Node* _next;

};

///implement Node

template <typename NodeType>
Node<NodeType>::Node(Node* prev, Node* next) : _prev(prev), _next(next)
{}
template <typename NodeType>
void Node<NodeType>::SetData(NodeType newData)
{
   _data = newData;
}
template <typename NodeType>
NodeType* Node<NodeType>::GetData()
{
   return &_data;
}
template <typename NodeType>
Node<NodeType>* Node<NodeType>::GetPrev()
{
   return _prev;
}
template <typename NodeType>
Node<NodeType>* Node<NodeType>::GetNext()
{
   return _next;
}
#endif //define 
```

**列表.hpp**

```
#if !defined LIST_HPP
#define LIST_HPP

#include "Node.hpp"

///since we're creating a template everything must be defined in the hpp

template <typename ListType>
class List
{
   public:
      List();
      bool Empty();
      void PushFront();
      void PushBack();
      void PopBack();
      void ClearList();
      Node<ListType>* GetHead();
      Node<ListType>* GetTail();
      int NumberOfNodes();

   private:
      Node<ListType>* _head;
      Node<ListType>* _tail;
      int _size;

};

///implement List class here
template <typename ListType>
List<ListType>::List() : _head(0), _tail(0), _size(0)
{
}
template <typename ListType>
bool List<ListType>::Empty()
{
   return _size == 0;
}
template <typename ListType>
void List<ListType>::PushFront()
{
   _head = new Node<ListType>( _head , 0 );
   if(Empty()) //this is the start of a new list, need to set _tail as well
      _tail = _head;
   else
      _head->_prev->_next = _head; //set previous nodes _next to new _head

   ++_size;
}
template <typename ListType>
void List<ListType>::PushBack()
{
   _tail = new Node<ListType>( 0 , _tail);
   if(Empty()) //this is the start of a new list, need to set _head as well
      _head = _tail;
   else
      _tail->_next->_prev = _tail; // set old tails _prev to new tail

   ++_size;
}
template <typename ListType>
void List<ListType>::PopBack()
{
   if(!Empty()){
      if(_tail != _head)
      {
         _tail = _tail->_next;
         delete _tail->_prev; //delete memory at old tail
         _tail->_prev = 0; //reassign new tails _prev pointer to null
      }
      else  // We are deleting the last node so treatment is a little different.
      {
         delete _tail;
         _tail = 0; _head = 0;
      }

      --_size;
   }
}
template <typename ListType>
void List<ListType>::ClearList()
{
   while(!Empty())
      PopBack();

}

template <typename ListType>
Node<ListType>* List<ListType>::GetHead()
{
   return _head;
}
template <typename ListType>
Node<ListType>* List<ListType>::GetTail()
{
   return _tail;
}
template <typename ListType>
int List<ListType>::NumberOfNodes()
{
   return _size;
}
#endif //define 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T13:44:59.613

构造函数没有明确地对 做任何事情`_data`，所以它默认初始化它*。换句话说，构造后，`_data`是默认构造的`NodeType`。它`NodeType`不是默认可构造的，模板特化不会编译。程序“知道”进行此初始化，因为希望您的编译器遵循 C++ 标准中规定的规则。

至于知道类型，编译器*实质上*替换`NodeType`了您实例化模板的类型，并使用此替换创建新类型。所以_data std::string` `Node<std::string> would result in a type where`。`is of type`

*   如果`NodeType`是 promitive 类型，则不会进行初始化，并且`_data`会保存任何旧的垃圾值。

# c - 如何使用 fork() 函数在 C 中守护进程。- 套接字编程

> ID：10470966
> 
> 赞同：0
> 
> 时间：2012-05-06T13:39:47.467
> 
> 标签：c, sockets, process, background, daemon

我已经搜索了很多，并且知道也许我已经遇到了一些有用的答案，但无法理解它们……我并不是一个真正的程序员：）

情况是我想实现一个守护进程 - 后台进程完全独立于同时发生的事情 - 解析从服务器接收的数据（正在编写 IRC 客户端），但使用 select 以非阻塞方式进行()。

这是我的代码片段。但我无法在程序的注释//rest 下访问 printf

我希望它是可以理解的。

```
pID=fork();
        if(pID < 0){
            //failed to execute fork()
            perror("Error while forking");
            getchar();getchar();
            exit(1);
        }
        if(pID > 0){
            exit(0);
            }
        //child down here
            umask(0);
            //setting new session
            sID = setpgid(0,0);
            if(sID < 0){
                perror("Error while setting new session");
                getchar();getchar();
                exit(1);
            }
            while(1){
                sleep(1);
                if((readReady = readReadiness(sockfd))==0)
                    continue;
                else{
                    //here am going to recv() data from server
                    printf("I am child and parsing\n"); //testing if its in background -i would like it not to print to stdout (run in background)

                }
            }

        //rest of the program down here
        printf("Why isnt it printing to stdout ??\n"); 
```

我应该用孙子吗？（双叉？）还是...？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T20:10:17.410

我上面的评论既不是答案也不是建议；这是一个问题。

我不明白你为什么需要再次分叉 - 你有一个没有控制终端的进程（感谢 setpgid），如你所愿。您可以在 while(1) 循环中处理接收到的数据。看起来你已经准备好了——“程序的其余部分”进入了 while 循环。

编辑

调用 fork 创建正在运行的进程的子副本。在子进程中调用 setsid 将断开子进程与终端的连接，但不会影响父进程（无论如何都会退出）。我建议您从以下内容开始：

```
static void
process_stuff(int sockfd)
{
    while (1) {
        /* receive data on socket and process */
    }
}

void
run_daemon(int sockfd, int foreground)
{
    if (!foreground) {
        if (fork()) {
            exit(EXIT_SUCCESS); /* parent */
        }
        /* child */
        setsid();
    }
    process_stuff(sockfd);
} 
```

有这个`if (foreground)`子句的原因是它允许你在`gdb`它不工作时在前台调试服务器。

# xaml - 在可滚动的 TextBlock 上应用 ContentThemeTransition

> ID：10470972
> 
> 赞同：0
> 
> 时间：2012-05-06T13:41:07.463
> 
> 标签：xaml, windows-8, windows-runtime, transitions, winrt-xaml

我正在尝试创建一个 TextBlock，当其值发生变化时（从左侧滑入）转换其内容。问题是每次用户滚动 TextBlock（包装在 ScrollViewer 中）时都会重播转换

```
 <ScrollViewer Width="300" Height="200" VerticalScrollBarVisibility="Auto" VerticalScrollMode="Enabled" >
        <TextBlock TextWrapping="Wrap" Style="{StaticResource BasicTextStyle}">
            <TextBlock.Transitions>
                <TransitionCollection>
                    <ContentThemeTransition HorizontalOffset="-500" />
                </TransitionCollection>
            </TextBlock.Transitions>
            "Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem. Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur? Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse quam nihil molestiae consequatur, vel illum qui dolorem eum fugiat quo voluptas nulla pariatur?"
        </TextBlock>
    </ScrollViewer> 
```

我做错了什么，还是这是一个 WinRT 错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T22:27:28.867

我想我回应了您的 Connect 错误，但是您可以在这里使用 EntranceThemeTransition 吗？

# c++ - 根据输入调用不同类的构造函数

> ID：10470973
> 
> 赞同：5
> 
> 时间：2012-05-06T13:41:10.483
> 
> 标签：c++, constructor, overloading

我有一个名为 Masterdocument 的类，其中包含不同的流程。每个过程包含不同数量的问题和每个问题的可能答案选项。文档中还提到了每个答案选项的权重。根据用户提供的答案，查阅主文档并对用户响应进行评分。示例代码如下所示。

```
Class Masterdocument {
vector <MasterProcess>;
}; 
Class MasterProcess1 { 
id = 10;
num of questions = 2;
question1;
answer1option1;
answer1option2;
question1Weightage;

question2;
answer2option1;
answer2option2;
question2weightage;

//constructor
MasterProcess1(){
question1 =1;
answer1option1 =1;
answer1 option2 = 2;
question1weightage = 0.1

question2 =2;
answer2option1 = 1;
answer2option2 = 2;
question2weightage = 0.2;
}
};

Class MasterProcess2 {
id  =11; 
num of questions = 3;
question1;
answer1option1;
answer1option2;
question1Weightage;

question2;
answer2option1;
answer2option2;
answer2option3;
question2weightage;

question3;
answer3option1;
answer3option2;
question3weightage;

//constructor
MasterProcess2(){
question1 =1;
answer1option1 =1;
answer1 option2 = 2;
question1weightage = 0.2

question2 =2;
answer2option1 = 1;
answer2option2 = 2;
answer2option3 = 3;
question2weightage = 0.3;

question3 = 3;
answer3option1 = 1;
answer3option2 = 2;
question3weightage = 0.4
}
}; 
```

MasterDocument 和所有 MasterProcesses 都是常量。值不会改变。但是每个过程的问题数量（以及每个问题的答案选项）不同。我可以使用构造函数初始化它们。但是我如何将它们添加到 MasterDocument 中的向量中，因为所有 MasterProcesses 都有不同的名称，例如 MasterProcess1、MasterProcess2 等等。所以我不能在 MasterDocument 中有一个向量。

如果我为每个进程使用相同的名称（每个进程都称为 MasterProcess），那么我怎么知道为第一个 MasterProcess 调用哪个构造函数，因为它有不同的问题数，然后是第二个 masterProcess。

我可以对主文档中的值进行硬编码，因为它不会改变，但我如何初始化这些值。我可以将所有流程放在单个 MasterDocument 中，并创建一个巨大的构造函数，其中包含每个流程的所有问题/答案，但这看起来并不漂亮。

我可以将每个进程称为 MasterProcess 并在构造函数中传递进程的 ID（如 MasterProcess (id)），但我将如何规定 MasterProcess(10) 应该调用第一类的构造函数，而 MasterProcess(11) 应该调用构造函数二等的。

@海森虫

我跟随你的脚步，想出了这段代码

```
#include <iostream>
#include <utility>
#include <string>
#include <iostream>
#include <sstream>
#include <string>
#include <vector>

using namespace std;

class BaseMasterProcess {

protected:

int processID;  
int num_of_Questions;  
double min_Threshold_Score_for_Process;  
double total_Process_Score;  
double overall_Audit_Value;
int question;
pair <int,double> answer;

//define all the variable used in any sub-class 
int question1;
int question2;
int question3;
int question4;
int question5;
double question1_Weightage;
double question2_Weightage;
double question3_Weightage;
double question4_Weightage;
double question5_Weightage;
int passing_Score;
pair <int,double> answer1_Option1;  
pair <int,double> answer1_Option2; 
pair <int,double> answer1_Option3;
pair <int,double> answer2_Option1;  
pair <int,double> answer2_Option2; 
pair <int,double> answer2_Option3;
pair <int,double> answer3_Option1;  
pair <int,double> answer3_Option2; 
pair <int,double> answer3_Option3;
pair <int,double> answer4_Option1;  
pair <int,double> answer4_Option2; 
pair <int,double> answer4_Option3;
pair <int,double> answer5_Option1;  
pair <int,double> answer5_Option2; 
pair <int,double> answer5_Option3;

public:
abstract void Init();
virtual double getQuestionWeightage(int ques) = 0;
virtual double getAnswerScore(int ques, int ans) = 0; 
int getNumQuestions()
{
    return num_of_Questions;
}
int getProcesssID()
{
    return processID;
}
double getMinThresholdScore()
{
    return min_Threshold_Score_for_Process;
}
double overallAuditValue()
{
    return overall_Audit_Value; 
}
};
class ConcreteMasterProcess1 : public BaseMasterProcess
{
public:
    void Init()
    {
processID = 10; 
num_of_Questions = 3;  
passing_Score = 70;  
min_Threshold_Score_for_Process = 0.7; 
overall_Audit_Value = 0.1;

question1 = 1; 
question1_Weightage = 0.3;  
answer1_Option1 = make_pair (1,0.3); 
answer1_Option2 = make_pair (2,0.0);

question2 = 2; 
question2_Weightage = 0.3; 
answer2_Option1 = make_pair (1,0.3); 
answer2_Option2 = make_pair (2,0.0);

question3 = 3;
question3_Weightage = 0.4; 
answer3_Option1 = make_pair (1,0.4); 
answer3_Option2 = make_pair (2,0.0);
}

double getQuestionWeightage(int ques)
{
switch (ques)
{
    case 1:
        return question1_Weightage;
    case 2:
        return question2_Weightage;
    case 3:
        return question3_Weightage;
}
    }
double getAnswerScore(int ques, int ans) 
{
    if (ques == question1 && ans == answer1_Option1.first)
        return answer1_Option1.second;
    else if (ques == question1 && ans == answer1_Option2.first)
        return answer1_Option2.second; 
    else if (ques == question2 && ans == answer2_Option1.first)
        return answer2_Option1.second;
    else if (ques == question2 && ans == answer2_Option2.first)
        return answer2_Option2.second;
    else if (ques == question3 && ans == answer3_Option1.first)
        return answer3_Option1.second;
    else 
        return answer3_Option2.second;

}   
};
class ConcreteMasterProcess2 : public BaseMasterProcess
{
    void Init()
    {
processID = 11; 
num_of_Questions = 4;  
passing_Score = 70;  
min_Threshold_Score_for_Process = 0.75; 
overall_Audit_Value = 0.1;

question1 = 1; 
question1_Weightage = 0.25;  
answer1_Option1 = make_pair (1,0.25); 
answer1_Option2 = make_pair (2,0.0);

question2 = 2; 
question2_Weightage = 0.25; 
answer2_Option1 = make_pair (1,0.25); 
answer2_Option2 = make_pair (2,0.0);
answer2_Option3 = make_pair (3,0.15);

question3 = 3;
question3_Weightage = 0.25; 
answer3_Option1 = make_pair (1,0.25); 
answer3_Option2 = make_pair (2,0.0);

question4 = 4;
question4_Weightage = 0.2; 
answer4_Option1 = make_pair (1,0.2); 
answer4_Option2 = make_pair (2,0.0);

question5 = 5;
question5_Weightage = 0.2; 
answer5_Option1 = make_pair (1,0.2); 
answer5_Option2 = make_pair (2,0.0);
}

double getQuestionWeightage(int ques)
{
switch (ques)
{
    case 1:
        return question1_Weightage;
        break;
    case 2:
        return question2_Weightage;
        break;
    case 3:
        return question3_Weightage;
        break;
    case 4:
        return question4_Weightage;
        break;
}
    }
double getAnswerScore(int ques, int ans) 
{
    if (ques == question1 && ans == answer1_Option1.first)
        return answer1_Option1.second;
    else if (ques == question1 && ans == answer1_Option2.first)
        return answer1_Option2.second; 
    else if (ques == question2 && ans == answer2_Option1.first)
        return answer2_Option1.second;
    else if (ques == question2 && ans == answer2_Option2.first)
        return answer2_Option2.second;
    else if (ques == question2 && ans == answer2_Option3.first)
        return answer2_Option3.second;
    else if (ques == question3 && ans == answer3_Option1.first)
        return answer3_Option1.second;
    else if (ques == question3 && ans == answer3_Option2.first)
        return answer3_Option2.second;
    else if (ques == question4 && ans == answer4_Option1.first)
        return answer4_Option1.second;
    else
        return answer4_Option2.second;

}   
};
class MasterDocument
{
std::vector<BaseMasterProcess*> myProcessList;
void AddProcess(BaseMasterProcess* iProcess)
{
myProcessList.push_back(iProcess);
}
void foo()
{
//myProcessList[...]->Method1(); //do something without knowing which specific concrete    class the process belongs to..
}
};

int main ()
{
BaseMasterProcess bmp; 
ConcreteMasterProcess6 p6;  
MD master_doc;
master_doc.addProcess(bmp); // gives ERROR
    master_doc.addProcess(p6); // gives ERROR
master_doc.foo();

} 
```

它给了我以下错误：

关于 Init() -> ISO C++ 禁止声明没有类型的“Init” [-fpermissive] **编辑：更改为 void Init() ->** RESOLVED 关于函数 getQuestionWeightage(int) -> 在成员函数 'virtual double ConcreteMasterProcess1::getQuestionWeightage （int）'：错误：在'{'标记之前不允许函数定义 **编辑：在开关末尾缺少}->已解决** 关于main（）->预期'}'在输入末尾预期不合格输入末尾的 -id **编辑：在 mian() 中有额外的 } -> RESOLVED**

如何解决 main() 中显示的错误。我要做的就是创建 MasterDocument 并在 myProcssList 中有两个具体流程？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T21:21:49.787

使用这样的结构。把它分解

```
MasterDocument{ 
vector <Process> 
... 
}; 
Process{ 
vector<Question>; 
... 
}; 
Question{ 
vector<Answer>: 
... 
}; 
Answer{ 
map<int answer, int score>;  
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T21:27:52.060

使用 shared_ptr 的另一个选项如下。

```
struct Answer {
int whatever;
}

struct Process {
int whatever;
std::vector<std::shared_ptr<Answer> > answers;
};

struct Document {
Document();
std::vector<std::shared_ptr<Process> > processes;
};
int main (){
Document::Document()
{
// Make some processes
for (int i = 0; i < 5; i++) {
std::shared_ptr<Process> foo = std::shared_ptr<Process>();
foo->whatever = i;
processes.push_back(foo);
}
} 
```

}

# html - html - 正文不会伸展到全高页面

> ID：10470975
> 
> 赞同：0
> 
> 时间：2012-05-06T13:41:12.597
> 
> 标签：html, css

我想在页面底部放置一个元素。我所知道的是，这可以通过设置 HTML、body{height:100%} 然后在 div absolute 和 bottom:0px; 中定位来完成。费：

```
 <html>
    <body>
    .
    .
    .
    <div id="footer">
    </div>
    </body>
    </html> 
```

和CSS：

```
html, body{
height:100%;
}
#footer{
position:absolute;
bottom:0
} 
```

上面的代码没有 HTML 的预期结果，body 元素的高度与包含的元素一样多。你能告诉我为什么吗？网站链接：http: [//www.lesemouvantes.com/dev/](http://www.lesemouvantes.com/dev/)

* * *

使用jQuery部分解决了这个问题，onload我将文档的高度存储到一个var中，然后将此值应用为body元素的高度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T13:51:13.273

绝对位置元素相对于第一个具有非静态位置的父元素定位。如果没有找到这样的元素，则包含块是 html。

因此，在您的情况下，页脚被放置在 html 的底部而不是正文中，您应该设置 position:relative; 为您的身体，因为只有这样它才会被放置在身体的底部。

# php - PHP / JavaScript 动态改变图像路径

> ID：10470977
> 
> 赞同：5
> 
> 时间：2012-05-06T13:41:59.137
> 
> 标签：php, javascript, joomla, path, hyperlink

这是我的第一个问题，因此请忽略错误，如果有的话。

我有一个问题，我根据访问者浏览的设备为他们提供三种备用布局。

**移动设备、平板电脑**和**台式机**。

我的网站是用 PHP 编写的，我只使用 280 字节的 JavaScript 来确定访问者的浏览器宽度。没有其他 JavaScript 或任何库，如 jQuery、MooTools。我想让我的网站保持非常轻的重量，从而提高页面加载速度。

我有一个名为 PHP 的变量`$layout`，它的值是由 JavaScript 根据浏览器宽度动态分配的。分配给它的三个值是`mobile or tablet or desktop`

现在我的 xhtml 中有如下链接：

```
<img src="cdn/images/desktop/image1.jpg" width="500" height="200" alt="image1">
<img src="cdn/images/desktop/image2.jpg" width="500" height="200" alt="image2">
<img src="cdn/images/desktop/image3.jpg" width="500" height="200" alt="image3"> 
```

默认情况下，图像是从`cdn/images/desktop`文件夹加载的。

我正在寻找的是如果值是`$layout`那么`tablet`图像应该从`cdn/images/tablet`文件夹加载，同样如果值`$layout`是`mobile`那么图像应该从文件夹加载 `cdn/images/mobile`。

图像名称保持不变。它们是三个不同文件夹中的三种不同分辨率。

如果可能的话，请建议一个 PHP 解决方案在 PHP 中执行此操作。

否则，请建议一个**普通的 JavaScript**解决方案*（没有像 jQuery、MooTools 这样的库）*

谢谢

**更新**

实际上我使用 Joomla 作为 CMS，所以在我的帖子中我不能在帖子中使用 PHP 代码，因此我希望在呈现页面之后或在呈现过程中这些路径必须更改。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T14:26:15.577

```
$(function(){
        //mobile or tablet or desktop
        var client='<?php echo $layout; ?>'
        if(client=='desktop'){
            //do nothing
        }else if(client=='tablet'){
            $('#image-list img').each(function(){
                $('this').attr('src',$(this).attr('src').replace('desktop','tablet'));  
            });
        }else{
            //mobile
            $('#image-list img').each(function(){
                $('this').attr('src',$(this).attr('src').replace('desktop','mobile'));  
            });
        }
    }); 
```

* * *

```
 <div id="image-list">
        <img src="cdn/images/desktop/image1.jpg" width="500" height="200" alt="image1">
        <img src="cdn/images/desktop/image2.jpg" width="500" height="200" alt="image2">
        <img src="cdn/images/desktop/image3.jpg" width="500" height="200" alt="image3">
    </div> 
```

* * *

使用 jQuery

* * *

抱歉，我不知道它不需要 lib。

```
 var client='<?php echo $layout; ?>'
    var list=document.getElementById('image-list');
    var img=list.getElementsByTagName('img');
    for(var i=0;i<img.length;i++){
        //img[i].src=img[i].src.replace('desktop',client);
        img[i].setAttribute('src',img[i].getAttribute('src-data').replace('desktop',client));
    } 
```

* * *

把它放在文件的末尾。

* * *

```
<img src-data="cdn/images/desktop/image1.jpg" width="500" height="200" alt="image1"> 
```

* * *

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T13:43:02.947

试试这个：

```
<img src="cdn/images/<?php echo $layout; ?>image3.jpg" width="500" height="200" alt="image3"> 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-05-06T14:07:52.863

为什么不使用简单的 javascript 来更改图像的 src ？它可能不是最好看的脚本，但你可以这样做：

xhtml 文件：

```
<img id="image1" src="cdn/images/desktop/image1.jpg" width="500" height="200" alt="image1">
<img id="image2" src="cdn/images/desktop/image2.jpg" width="500" height="200" alt="image2">
<img id="image3" src="cdn/images/desktop/image3.jpg" width="500" height="200" alt="image3"> 
```

在javascript找出它只是做什么布局之后：

```
document.getElementById("image1").src = "cdn/images/" + layout + "/image1.jpg";
document.getElementById("image2").src = "cdn/images/" + layout + "/image2.jpg";
document.getElementById("image3").src = "cdn/images/" + layout + "/image3.jpg"; 
```

你是这个意思吗 ？

# jquery - 如果存在特定标签，则在帖子中条件显示 div

> ID：10470981
> 
> 赞同：1
> 
> 时间：2012-05-06T13:42:23.687
> 
> 标签：jquery

我正在开发一个自定义 Tumblr HTML 模板。在每个帖子（= li 包括“post”类）中，我想隐藏一个包含“callToAction”类的 div，**但前提是**该帖子包含名称为“#id-Original”的标签。

到目前为止，我尝试使用此 CSS 默认隐藏号召性用语 div

```
.callToAction {
display:none;
} 
```

然后如果帖子包含“id-Original”标签，则此 JQuery 语句将显示号召性用语。

```
if ($('#id-Original')) {
  $('#id-Original').closest('li.post').css('background-color', '#005580');
  $('#id-Original').closest('.callToAction').css('display', 'block');
} 
```

**→ 当前问题：背景颜色根据标签而变化。号召性用语 div 始终保持隐藏状态。**

HTML（摘自 2 篇文章，一篇带有“id-Original”标签，一篇没有）

```
 <li class="post photo textcentered">
                    <div class="row">
                        <div class="span12 textcentered">
                        ...
                        </div>
                    </div>
                    <div class="row">
                        <div class="span12 addSpaceAtTop photocaption">
                            <p>Week #1 [Non-Original]</p>
                            <ul class="tags">
                                    <li>
                                        <a href="..." id="id-Weekly">Weekly</a>
                                    </li>
                             </ul>                
                        </div>
                        <div class="span12 addspace callToAction">
                            <p><a class="addspaceright" href="...">Download Original Size</a> <a class="btn" href="/submit">Upload Your Version</a>
                            </p>
                        </div>
                    </div>  
                </li>

                <li class="post photo textcentered">
                    <div class="row">
                        <div class="span12 textcentered">
                            ...
                        </div>
                    </div>
                    <div class="row">
                        <div class="span12 addSpaceAtTop photocaption">
                            <p>Week #2 [Original]</p>
                            <ul class="tags">
                                    <li>
                                        <a href="..." id="id-Original">Original</a>
                                    </li>
                                    <li>
                                        <a href="..." id="id-Weekly">Weekly</a>
                                    </li>
                             </ul>                
                        </div>
                        <div class="span12 addspace callToAction">
                            <p><a class="addspaceright" href="...">Download Original Size</a> <a class="btn" href="/submit">Upload Your Version</a>
                            </p>
                        </div>
                    </div>  
                </li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T13:49:58.593

```
$('#id-Original').closest('.callToAction').show().css('display', 'block'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T13:55:19.263

```
var $deepSelector = $('li.post ul.tags');

$deepSelector.each(function() {

    if ($('li a#id-Original', this).length) {
        $(this)
               .closest('li.post')
               .css('background-color', '#005580')
               .find('div.callToAction')
               .css('display', 'block');
    }

}); 
```

[***工作演示***](http://jsfiddle.net/tQeCv/6/)

# python - 我可以将仿真标签设为 mifare 1k 类型吗

> ID：10470988
> 
> 赞同：1
> 
> 时间：2012-05-06T13:43:11.380
> 
> 标签：python, sqlite, nfc, mifare

我必须阅读仿真标签（PN532）并且必须在 libnfc 中使用 nfc-mfclassic，因为我想从该命令获取 .mfd 文件以保存块中的任何内容，以便在 python 中插入数据库（sqlite3），，，任何人知道这个问题，请帮助我！

# visual-studio-2010 - 有评级控制，windows phone 7

> ID：10470993
> 
> 赞同：2
> 
> 时间：2012-05-06T13:45:02.920
> 
> 标签：visual-studio-2010, windows-phone-7, windows-phone-7.1, windows-phone-7.1.1

windows phone 有分级控制吗？类似于 silver-light 工具包中存在的控件，我知道 silverlight 中没有控件，或者我必须自己自定义控件？我正在使用 Windows Phone 7.1、C#、Visual Studio 2010

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T13:51:42.357

不，silverlight工具包里面没有，你必须自定义控件，请检查下面的问题，和你的想法一样，有你需要[的Listbox with more than one Control](https://stackoverflow.com/questions/10169053/listbox-with-more-than-one-controls-in-wp7-using-c-sharp/10169070#comment13048906_10169070)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T18:46:37.013

Silverlight Toolkit for WP7 目前没有 RatingControl 。您可以检查提供 RatingControl 的 Telerik 等第三方控件。

下面是一篇文章，可以帮助您开始使用 Telerik RadRatingControl。

[Windows Phone 中的 Telerik RadRatingControl](http://windowsphonerocks.com/telerik-radcontrols-for-windows-phone-article-5-radrating-rating-control/)

# deployment - WiX - 卸载时可选择删除用户生成的文件

> ID：10470994
> 
> 赞同：1
> 
> 时间：2012-05-06T13:45:29.763
> 
> 标签：deployment, wix, windows-installer, installation, wix3.5

我想在应用程序卸载时为用户提供保留数据的选项，有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T06:13:08.027

是和不是。

卸载期间不显示 UI，这就是为什么您不能为用户提供此选项的原因。

但是，您可以按照Morten 链接[的问题的答案中](https://stackoverflow.com/questions/195919/removing-files-when-uninstalling-wix)所述删除这些文件。
此外，您可以使用[`RemoveFolderEx`](http://wix.sourceforge.net/manual-wix3/util_xsd_removefolderex.htm)Util 扩展中的元素。此元素正确处理子目录结构的删除。

* * *

至于 UI 部分，有些程序在控制面板上没有显示多个按钮，如*Uninstall*、*Change*、*Repair*，而是一个按钮*Uninstall/Change*。在后一种情况下，卸载时通常会显示 UI。