# StackOverflow 问答 11663000-11663999

# php - 在 PHP 中以 mktime 形式获取当前日期和时间

> ID：11663001
> 
> 赞同：0
> 
> 时间：2012-07-26T05:35:04.403
> 
> 标签：php, time

我在从过去查找当前日期时遇到问题`mktime`。在 PHP 中，我使用**`date("j");`**. 在这里我需要，假设我的日期是在过去的一年中`mktime(0, 0, 0, 2, 1, 2008)`，那么在这里我怎样才能找到过去这个特定月份的当前日期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T05:43:26.647

试试这个：

```
$date = getdate(mktime(0, 0, 0, 2, 1, 2008));
$day = $date['mday']; 
```

要不就：

```
$day = date('j', mktime(0, 0, 0, 2, 1, 2008)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T05:57:30.277

作为@octern 的解决方案，或者你可以这样做

```
$day = date('j', strtotime("-2 months")); 
```

或者

```
$day = date('j', strtotime('-30 days')); 
```

取决于你的需要。

您可能还想参考[`strtotime()`](http://php.net/strtotime)手册。

# php - PHP 是否可以信任 Strlen 用于任务关键型银行应用程序？

> ID：11663002
> 
> 赞同：-1
> 
> 时间：2012-07-26T05:35:05.247
> 
> 标签：php

我想知道当我在 php 中使用 strlen 函数检查字符串的长度时

它说它是 32。但是当我在记事本或记事本++中打开它时，我可以在文件中看到一些空格（与其他行不正确对齐，

**因为我正在做一个银行应用程序，所以 strlen 对 100% 正确至关重要。**

我只是想知道我应该继续相信这个输出还是应该转向其他类似的东西

```
mb_strlen 
```

在普通 ASCII 字符集中值得信赖的最佳功能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T05:39:23.950

如果您想使用 strlen() 或 mb_strlen() 取决于您的服务器设置，它是否使用 mb_string 扩展名。尽管通常 strlen() 在这些情况下都会被 mb_strlen() 重载。除此之外，计算值是 100% 正确的。

您可能会看到的不同之处在于，如果您在文本显示应用程序中打开文本（尤其是多字节字符串），它是如何可视化的。您更有可能在那里获得误导性信息。

# android - Android 用于调整位图亮度的搜索栏

> ID：11663011
> 
> 赞同：1
> 
> 时间：2012-07-26T05:36:10.550
> 
> 标签：android, image, bitmap, seekbar, brightness

我尝试了许多代码，并查看了 Android 开发人员，但无法使其工作。我希望搜索栏调整我的位图图像亮度

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T06:00:45.970

检查在[增加/减少图像亮度中给出的示例](http://xjaphx.wordpress.com/2011/06/22/image-processing-brightness-over-image/)

并在搜索栏进度更改上执行如下所示

```
 int brightness;
 SeekBar seekbarbrightness=(SeekBar)findViewById(R.id.seekBar1);
 seekbarbrightness.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {

         @Override
         public void onStopTrackingTouch(SeekBar arg0) {
          // TODO Auto-generated method stub

         }

         @Override
         public void onStartTrackingTouch(SeekBar arg0) {
          // TODO Auto-generated method stub

         }

         @Override
         public void onProgressChanged(SeekBar arg0, int progress, boolean arg2) {

             // TODO Auto-generated method stub

             brightness=progress;
             Bitmap bitmap=doBrightness(originalbitmap,brightness);
             imageView.setImageBitmap(bitmap);
         }
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-06T08:55:44.590

检查在增加/减少图像亮度中给出的示例

```
 int brightness;
 SeekBar seekBarBrightness=(SeekBar)findViewById(R.id.seekBar1);
 seekBarBrightness.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {

     @Override
     public void onStopTrackingTouch(SeekBar arg0) {

     }

     @Override
     public void onStartTrackingTouch(SeekBar arg0) {

     }

     @Override
     public void onProgressChanged(SeekBar arg0, int progress, boolean arg2) {

       Bitmap newBitMap  =   doBrightness(bitMap,progress);

       imageView.setImageBitmap(newBitMap);

     }
    });

    public static Bitmap doBrightness(Bitmap src, int value)
    {
        // image size
        int width = src.getWidth();
        int height = src.getHeight();
        // create output bitmap
        Bitmap bmOut = Bitmap.createBitmap(width, height, src.getConfig());
        // color information
        int A, R, G, B;
        int pixel;

        // scan through all pixels
        for (int x = 0; x < width; ++x)
            {
                for (int y = 0; y < height; ++y)
                    {
                        // get pixel color
                        pixel = src.getPixel(x, y);
                        A = Color.alpha(pixel);
                        R = Color.red(pixel);
                        G = Color.green(pixel);
                        B = Color.blue(pixel);

                        // increase/decrease each channel
                        R += value;
                        if (R > 255)
                            {
                                R = 255;
                            } else if (R < 0)
                            {
                                R = 0;
                            }

                        G += value;
                        if (G > 255)
                            {
                                G = 255;
                            } else if (G < 0)
                            {
                                G = 0;
                            }

                        B += value;
                        if (B > 255)
                            {
                                B = 255;
                            } else if (B < 0)
                            {
                                B = 0;
                            }

                        // apply new pixel color to output bitmap
                        bmOut.setPixel(x, y, Color.argb(A, R, G, B));
                    }
            }

        // return final image
        return bmOut;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-22T11:18:56.053

使用这个例子

```
SeekBar sb_value = (SeekBar) findViewById(R.id.sb_value);
        final ImageView im_brightness = (ImageView) findViewById(R.id.im_brightness);
        sb_value.setProgress(125);
        sb_value.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {
            @Override
            public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {

                im_brightness.setColorFilter(setBrightness(progress));

            }

            @Override
            public void onStartTrackingTouch(SeekBar seekBar) {

            }

            @Override
            public void onStopTrackingTouch(SeekBar seekBar) {

            }
        }); 
```

设置亮度方法：

```
public static PorterDuffColorFilter setBrightness(int progress) {
        if (progress >=    100)
        {
            int value = (int) (progress-100) * 255 / 100;

            return new PorterDuffColorFilter(Color.argb(value, 255, 255, 255), PorterDuff.Mode.SRC_OVER);

        }
        else
        {
            int value = (int) (100-progress) * 255 / 100;
            return new PorterDuffColorFilter(Color.argb(value, 0, 0, 0), PorterDuff.Mode.SRC_ATOP);

        }
    } 
```

# jquery-ui-map - jquery-ui-map 缩放不会用更少的标记自动向下调整

> ID：11663012
> 
> 赞同：0
> 
> 时间：2012-07-26T05:36:10.953
> 
> 标签：jquery-ui-map

条件：map api v3，jquery ui map，添加marker bounds true。

操作： 1.当我添加标记时，缩放正确并自动调整以包括所有标记。

1.  但是，当我减少制造商的数量时，缩放不会重新调整以包括剩余的标记。

这是一个错误吗，有人知道我可以测试这个的网站吗？如果需要更多信息，我可以提供一个网址。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:23:13.617

添加每个新标记后，需要像这样更新边界：

```
$('#map_canvas').gmap('addBounds', marker.position); 
```

如果您需要完全重置边界、删除标记或添加一组新标记，您可以这样做：

```
$('#map_canvas').gmap('clear', 'markers');
$('#map_canvas').gmap('set', 'bounds', null); 
```

希望下次对您有所帮助，或者 Google 员工 :)

# c# - 无法使用 c# 从 asp.net 3.5 中的网格视图或数据集导出 excel 文件

> ID：11663015
> 
> 赞同：2
> 
> 时间：2012-07-26T05:36:13.267
> 
> 标签：c#, asp.net

我已经用代码尝试了很多东西，但是我之前使用的相同代码在我当前的项目中不起作用。我可以从数据库中获取数据；如果我更改`visible=true`，那么数据也会显示在网格视图中。

以下是代码：

aspx 页面代码

```
<asp:GridView ID="gvExport" runat="server" Visible="false"
                            AutoGenerateColumns="False" CellPadding="4" ForeColor="#333333"
                            GridLines="None">
    <RowStyle BackColor="#F7F6F3" ForeColor="#333333" />
    <Columns>
        <asp:BoundField DataField="artID" HeaderText="ID" />
        <asp:BoundField DataField="artName" HeaderText="Name" />
        <asp:BoundField DataField="artType" HeaderText="Category" />
        <asp:BoundField DataField="artWork" HeaderText="Work Type" />
        <asp:BoundField DataField="artCont1" HeaderText="Contact Person (I)" />
        <asp:BoundField DataField="artMob1" HeaderText="Mobile" />
        <asp:BoundField DataField="artCont2" HeaderText="Contact person (II)" />
        <asp:BoundField DataField="artMob2" HeaderText="Mobile" />
        <asp:BoundField DataField="artPhone" HeaderText="Office Phone" />
        <asp:BoundField DataField="artEmail" HeaderText="Email ID" />
        <asp:BoundField DataField="artStreet" HeaderText="Street" />
        <asp:BoundField DataField="artCity" HeaderText="City" />
        <asp:BoundField DataField="artState" HeaderText="State" />
        <asp:BoundField DataField="artCountry" HeaderText="Country" />
    </Columns>
    <FooterStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
    <PagerStyle BackColor="#284775" ForeColor="White" HorizontalAlign="Center" />
    <SelectedRowStyle BackColor="#E2DED6" Font-Bold="True" ForeColor="#333333" />
    <HeaderStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
    <EditRowStyle BackColor="#999999" />
    <AlternatingRowStyle BackColor="White" ForeColor="#284775" />
</asp:GridView> 
```

以下是后台代码

```
DataBaseConnection.dataBase dConnect = new dataBase();
DataSet ds = new DataSet();
DataTable dt = new DataTable();
static string exceprionString = "", artType = "", searchCity = "", searchType = "",     searchCont = "", searchSugType = "", searchSugCIty = "", fileName = "";
static int i = 0, j = 0, artID = 0;
static List<string> listArt = new List<string>();

 /*Export User Artist File As MS Excel Format*/
protected void btExport_Click(object sender, EventArgs e)
{
    if (((string)Session["userRole"]).Equals("ADMIN") || ((string)Session["userRole"]).Equals("MANAGER"))
    {
            exportFile("artist");
    }
    else
        SMS("User Doed Not Rights To Export File");
}

private void exportFile(string expportType)
{
    if (((string)Session["userRole"]).Equals("ADMIN") || ((string)Session["userRole"]).Equals("MANAGER"))
    {
            ds.Clear();
            if (expportType.Equals("artist"))
            {
                if (((string)Session["userID"]).Equals("admin"))
                    ds = dConnect.artistInfo(0, ((string)Session["userID"]), "", "", "", "", "", "", "", "", "", "", "", "", "", "admin");
                else if (((string)Session["userRole"]).Equals("MANAGER"))
                    ds = dConnect.artistInfo(0, ((string)Session["userID"]), "", "", "", "", "", "", "", "", "", "", "", "", "", "manager");
                else if (((string)Session["userRole"]).Equals("MANAGER"))
                    ds = dConnect.artistInfo(0, ((string)Session["userID"]), "", "", "", "", "", "", "", "", "", "", "", "", "", "select");
                fileName = (string)Session["userID"];
            }

            exceprionString = "";
            exceprionString = dConnect.exceptionMessage();

            if (ds.Tables[0].Rows.Count > 0 && exceprionString.Equals(""))
            {
                if (expportType.Equals("artist"))
                {
                    gvExport.DataSource = ds.Tables[0];
                    gvExport.DataBind();

                    ExportInExcel(gvExport);
                }
            }
            else
                SMS("File Not Export Due To Data Not Found");
    }
    else
        SMS("user Does Not Rights To Export File");
}

private void ExportInExcel(GridView grid)
{
    HtmlForm form = new HtmlForm();
    string attachment = "attachment; filename=" + fileName + ".xls";
    Response.ClearContent();
    Response.AddHeader("content-disposition", attachment);
    Response.ContentType = "application/ms-excel";
    StringWriter stw = new StringWriter();
    HtmlTextWriter htextw = new HtmlTextWriter(stw);
    form.Controls.Add(grid);
    this.Controls.Add(form);
    form.RenderControl(htextw);
    Response.Write(stw.ToString());
    //Response.Output.Write(stw.ToString());//
    //Response.Flush();//
    //Response.End();

    HttpContext.Current.ApplicationInstance.CompleteRequest();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T05:46:05.110

尝试以下代码

```
public void CreateExcel(GridView dgDetails, string fileName)
          {
              dgDetails.AllowPaging = false;
              dgDetails.DataBind();
              Response.ClearContent();
              Response.AddHeader("content-disposition", string.Format("attachment; filename={0}", ""+fileName+".xls"));
              Response.Charset = "";
              Response.ContentType = "application/ms-excel";
              StringWriter sw = new StringWriter();
              HtmlTextWriter htw = new HtmlTextWriter(sw);
              dgDetails.RenderControl(htw);
              Response.End();         
          } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T06:24:24.043

永远不要让网格视图可见错误，

# java - 将位图转换为位图 [] 数组

> ID：11663018
> 
> 赞同：0
> 
> 时间：2012-07-26T05:36:30.003
> 
> 标签：java, android, bitmap

```
List<String> url = new ArrayList<String>();
public Bitmap[] thumbs = { }; 
```

我从我的方法中获取图像`fetchImage(String url)`

```
for (int i = 0; i < (url.size()); i++) {
   /* I fetch image with param String URL and return as Bitmap */
   Bitmap photo = fetchImage(url.get(i));
} 
```

如何推`Bitmap photo`入`Bitmap[] thumbs`数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T05:38:39.553

执行以下操作：

```
List<String> url = new ArrayList<String>();
public Bitmap[] thumbs = new Bitmap[url.size()];

for (int i = 0; i < (url.size()); i++) {
   /* I fetch image with param String URL and return as Bitmap */
   thumbs[i] = fetchImage(url.get(i));
} 
```

# database - Cakephp表单错过沟通

> ID：11663019
> 
> 赞同：1
> 
> 时间：2012-07-26T05:36:33.170
> 
> 标签：database, forms, cakephp, varchar

有一个问题，我们正在创建一个采用 varchar 的表单，但 cakephp 将该字段视为一个 int。

那么我们将如何解决它呢？

这是我们添加关系的添加函数。

```
public function add() {
    $this->set('title_for_layout', 'Send A Relationship Request');
    $this->set('stylesheet_used', 'homestyle');
    $this->set('image_used', 'eBOXLogoHome.jpg'); 
    $this->layout='home_layout';

    if ($this->request->is('post')) {

      $this->Relationship->set($this->request->data);
      if ($this->Relationship->validates(array('fieldList'=>array('receiver_id','Relationship.userExists'))))
      {
        $username=$this->Relationship->username;
        $this->Relationship->save($this->request->data);
        $this->Session->setFlash('The relationship has been saved');  
      } else {
        $this->Session->setFlash('The relationship could not be saved. Please, try again.');
      } 
    }
  } 
```

这是我们的视图（一个要求用户名（varchar）的表单）

```
<?php
echo $this->Form->create('Relationship', array('action'=>'add'));
echo $this->Form->input('sender_id',array('label'=>'Enter your username: '));
echo $this->Form->input('receiver_id',array('label'=>'Username of user: '));
echo "<br />";
echo $this->Form->end('Click here to add relationship');

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T05:48:38.240

这是由于您的命名约定。默认情况下，Sender_id 和 receiver_id 将被视为整数值，因为它表示关系属于发送者和关系属于接收者，为了获得更好的结果，您可以更改字段的命名约定或使用以下代码：

```
echo $this->Form->input('sender_id',array('label'=>'Enter your username:',
                                           'type'=>'text')); 
```

# autofac - Autofac - 对象解析时的全局回调

> ID：11663025
> 
> 赞同：7
> 
> 时间：2012-07-26T05:37:27.990
> 
> 标签：autofac

如何在 Autofac 容器上注册全局回调，该回调在任何对象被解析时触发？

我想使用反射并检查一个对象是否有一个被调用的方法`Initialize()`，如果有，就调用它。我希望它是鸭式的，即不需要接口。

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-26T06:07:29.920

在 Autofac 中，您可以使用该`IComponentRegistration`接口订阅各种生命周期事件：

*   激活时
*   已激活
*   发布时

您可以`IComponentRegistration`通过创建`Module`并覆盖`AttachToComponentRegistration`方法来获取实例：

```
public class EventModule : Module
{
    protected override void AttachToComponentRegistration(
        IComponentRegistry componentRegistry, 
        IComponentRegistration registration)
    {
        registration.Activated += OnActivated;
    }

    private void OnActivated(object sender, ActivatedEventArgs<object> e)
    {
        e.Instance.GetType().GetMethod("Initialize").Invoke(e.Instance, null);
    }
} 
```

现在您只需在容器构建器中注册您的模块：

```
var builder = new ContainerBuilder();
builder.RegisterModule<EventModule>(); 
```

并且`OnActivated`无论您在哪个模块中注册了该组件，每次激活组件后都会调用该方法。

# mysql - 使用 url 参数按 sql 查询排序

> ID：11663027
> 
> 赞同：0
> 
> 时间：2012-07-26T05:37:42.423
> 
> 标签：mysql, ruby-on-rails, ruby, ruby-1.8.7

我在下面有这个巨大的丑陋查询，我想在目录视图中对其进行排序。想像[http://wow.dev:3000/catalog_items?&order=deals](http://wow.dev:3000/catalog_items?&order=deals)这样的东西。一百万提前感谢您的任何评论或答案。

```
select 100 - round((current_price / item.estimated_price)*100) as percent, item.cached_thumbnail_url, item.item_id, it.name,
          ci.current_price, ci.close_date
           from item
           join catalog_item ci on ci.item_id = item.item_id
           join item_translations as it on (it.item_id = item.item_id)
           where  (100 - round((current_price / item.estimated_price)*100)) > 49 and 
           item.estimated_price > 0 and ci.current_price > 0 and ci.close_date > now() and item.active = 1 and ci.active = 1 and 
           (current_price / estimated_price) < 1
           order by (ci.close_date < DATE_ADD(now(), INTERVAL 17 hour))  and (item.estimated_price - current_price) desc
           limit 12 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T06:16:48.737

不确定这与 ROR 有何关系，但无论如何：

1.  您`100 - round((current_price / item.estimated_price)*100) as percent`在 SELECT 子句中有，但无论如何在 WHERE 条件中使用相同的表达式。

2.  可以`item.estimated_price`小于零吗？如果不是，则`item.estimated_price > 0`条件过度，如果为零，则`(100 - round((current_price / item.estimated_price)*100)) > 49`条件为假

3.  出于同样的`(current_price / estimated_price) < 1`原因，过度

因此，您可以像这样更清楚地重写查询：

```
select (100 - round((current_price / item.estimated_price)*100)) as percent,
   item.cached_thumbnail_url, item.item_id, it.name,
   ci.current_price, ci.close_date
from item
   join catalog_item ci on ci.item_id = item.item_id
   join item_translations as it on (it.item_id = item.item_id)
where
   percent > 49
   and ci.current_price > 0
   and ci.close_date > now()
   and item.active = 1
   and ci.active = 1
order by
   (ci.close_date < DATE_ADD(now(), INTERVAL 17 hour))
   and (item.estimated_price - current_price) desc
limit 12 
```

这并没有大大改善这种情况，但是如果不知道有关您的数据库架构的更多原因，我不能说更多。

顺便说一句，您问题中的链接不起作用（显然是您的本地链接）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T06:26:46.293

在 binarycode 的答案的基础上，您可以尝试将查询包装在 ARel 中，然后在控制器操作中对参数哈希中传递的字段进行排序，如下所示：

```
class ItemsController < ApplicationController
  ...
  def index
    @items = Item.select(%{(100 - round((current_price / item.estimated_price)*100)) as percent,
               item.cached_thumbnail_url, item.item_id, it.name,
               ci.current_price, ci.close_date}).
             joins('join catalog_item ci on ci.item_id = item.item_id').
             joins('join item_translations as it on (it.item_id = item.item_id)').
             where('percent > 49 and ci.current_price > 0 and ci.close_date > now() and item.active = 1 and ci.active = 1').
             order(%{(ci.close_date < DATE_ADD(now(), INTERVAL 17 hour))
               and (item.estimated_price - current_price) desc)}).limit(12)
    @items = @items.order(params[:order]) if params[:order]
    ...
end 
```

**编辑**

正如下面的二进制代码指出的那样，您可能希望通过将主查询移到操作之外来使控制器代码更清晰，可能是移到`Item`模型中的方法中，并确保您仍然`Relation`从中返回一个对象（就像当前语句一样），所以你可以`order`稍后链接额外的：

```
def index
  @items = Item.by_price_ratio
  @items = @items.order(params[:order]) if params[:order]
end 
```

# c# - 在自定义控件中设置默认值

> ID：11663036
> 
> 赞同：1
> 
> 时间：2012-07-26T05:38:27.167
> 
> 标签：c#, asp.net, visual-studio-2008, custom-controls

我正在创建自定义 Web 控件（文本框），它只允许文本框中的整数数据类型。如果文本框中没有数据，则在按钮提交事件上，自定义控件应设置 TextBox1.Text=0，这就是我想要的。这是我写的代码。

```
public class MasIntTextBox : TextBox
{
    private RequiredFieldValidator req;
    private RegularExpressionValidator regex;
    public string ValGrp { get; set; }
    public string IsRequired { get; set; }//give true/yes or false/no values only

    protected override void OnInit(EventArgs e)
    {
        //this.CssClass = "inp-form";
        if (IsRequired == "true" || IsRequired == "yes")
        {
            req = new RequiredFieldValidator();
            req.ControlToValidate = this.ID;
            req.ErrorMessage = "Enter Numeric Value";
            req.Display = ValidatorDisplay.Dynamic;
            if (!string.IsNullOrEmpty(ValGrp))
                req.ValidationGroup = ValGrp;
            Controls.Add(req);
        }
        regex = new RegularExpressionValidator();
        regex.ControlToValidate = this.ID;
        regex.ErrorMessage = "Numeric Value Only";
        regex.Display = ValidatorDisplay.Dynamic;
        regex.ValidationExpression = "^\\d+(\\.\\d+)?$";
        if (!string.IsNullOrEmpty(ValGrp))
            regex.ValidationGroup = ValGrp;
        Controls.Add(regex);
        //base.OnInit(e);
    }

    protected override void Render(HtmlTextWriter w)
    {
        base.Render(w);
        if (IsRequired == "true" || IsRequired == "yes")
            req.RenderControl(w);
        regex.RenderControl(w);
    }
} 
```

我为此检查了一些事件或方法，但它们在 btnA_click 事件之后被解雇了。我是这方面的新手。我缺少任何事件或方法吗？接受任何建议。提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T05:59:32.670

您应该尝试在 TextBox.LostFocus 事件上设置默认值。此事件在控件 (TextBox) 失去焦点后立即触发。

# android - 如何在 SQLite 中以古吉拉特语存储数据？

> ID：11663037
> 
> 赞同：3
> 
> 时间：2012-07-26T05:38:30.160
> 
> 标签：android, sqlite

我正在为古吉拉特邦的农民开发一个安卓应用程序。所以这个应用程序也应该在古吉拉特语中。那么有什么方法可以让我将我的数据存储在 SQLite 中的古吉拉特语中吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T05:46:37.847

SQLite[支持](http://www.sqlite.org/version3.html)UTF-8 和 UTF-16 编码，[Android SQLite API 采用](http://developer.android.com/reference/android/content/ContentValues.html#put%28java.lang.String,%20java.lang.String%29)[由 UTF-16 值数组表示的](http://developer.android.com/reference/java/lang/String.html)String对象。所以你可以走了。

# c# - ASP.NET 网站需要多线程？

> ID：11663038
> 
> 赞同：2
> 
> 时间：2012-07-26T05:38:34.573
> 
> 标签：c#, asp.net, multithreading, web-applications

我正在构建一个简单的 ASP.NET**网站**，它将通过第 3 方 SMS API（通过 URL 推送）接收 SMS，然后网站将通过将 SMS 发回给发件人来确认发件人。我将传入的短信保存在数据库中。我已经实现了如下逻辑：

```
public partial class _Default : System.Web.UI.Page
{    
    protected void Page_Load(object sender, EventArgs e)
    {
     //declaring variables to be used elsewhere, but in this same class. I have just this one class.  
     //Grabbing the URL parameters here (contents of SMS). 
     //Saving SMSes in the database. Database interaction happening only inside Page_Load. 
      //Call these functions
      SomeLogicFunction();
      SendSMSFunction(); 
    } 

    SomeLogicFunction()
    {
    }

    SendSMSFunction()
     {
     }
} 
```

现在，我在某处读到 ASP.NET 处理多线程和类似方面。那么，如果我有这样一个简单的网站，我是否需要处理多线程？还是 Page_Load 函数/ASP.NET 几乎可以自动处理它？

如果答案是我不需要做任何事情，那就太棒了！但是，如果我必须处理多线程，您能否提供一些关于我应该如何处理的提示？我预计会有几千条短信。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T05:51:48.220

默认情况下，对于传入的每个请求，ASP.NET 都会获取一个线程池线程，创建 Page 类的新实例，并在该线程上调用适当的 Page_Load 和事件函数。它将同时为多个请求使用多个线程。请注意，您在`static`成员和字段中的任何状态都已正确共享和同步。当然，尽可能避免共享状态。

如果已经处理了足够多的请求，ASP.NET 和 IIS 将开始拒绝请求，因此请确保您的处理时间足够快。如果遇到瓶颈，您可以增加并行发生的请求数量。如果您的负载*非常*高（例如每秒数百个请求），您可以使用异步 API 来进一步增加正在进行的请求的数量。但是，当然，从简单开始，你可能会没事的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T06:00:38.110

在这种特殊情况下，我认为您**将受益于在 ASP.Net 应用程序中使用多线程。**

让我先解释一下多线程在 ASP.Net 中的工作原理

ASP.Net 提供了**固定数量的线程**来处理请求，当使用了最大线程数时，传入的请求将被放置在一个队列中，可能会阻塞 Web 应用程序。如果传入的请求不断到达服务器，您最终会遇到*Service Unavailable*错误。

因此，增加应用程序可伸缩性的一种简单方法是**尽快释放 ASP.Net 用来处理您的请求的线程**。

一种方法是创建一个*Async 页面*（您也可以创建一个 Async HttpHandler），当您创建一个 Async 页面时，将长时间消耗的进程放在另一个线程中，**几乎立即释放 ASP.Net 线程**。当您的流程完成后，将使用一个新线程来实例化您的页面的一个新实例（但不会运行整个页面生命周期，这意味着该流程更便宜），最后将响应发送给您的客户端。

如您所见，由于您几乎立即释放 ASP.Net 线程，因此 ASP.Net 可以处理新的传入请求

例如，考虑以下答案：

[https://stackoverflow.com/a/11525692/1268570](https://stackoverflow.com/a/11525692/1268570)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T06:14:04.233

在您的情况下要问的真正问题是： SomeLogicFunction() 和 SendSMSFunction() 函数是阻塞的还是非阻塞的？（即，它们是否会阻止进一步的代码，直到发送 SMS 或者它在继续异步发送消息的同时恢复您的 Page_Load() 处理？

如果甚至有一个函数阻塞，那么您将“必须”实现多线程，因为您必须为这些函数创建一个单独的线程，以便在 Page_Load() 处理进行时并行运行。OTOA，如果它们是非阻塞的，那么 ASP.NET 将在框架需要或要求时通过在单独的线程中运行来处理它们。

# asp.net - 使用 Oauth 令牌获取 Google 分析数据？

> ID：11663050
> 
> 赞同：4
> 
> 时间：2012-07-26T05:39:08.243
> 
> 标签：asp.net, google-analytics

这里我使用 asp.net web 来显示谷歌分析数据。我可以使用 oauth2.0 成功获取访问令牌。使用访问令牌我还可以获得帐户信息。

在这里，我想使用访问令牌获取 Google 分析数据。请与我分享链接以使用访问令牌获取数据。

我看过以下代码

[http://code.google.com/p/google-gdata/source/browse/trunk/clients/cs/samples/Analytics_DataFeed_Sample/dataFeed.cs](http://code.google.com/p/google-gdata/source/browse/trunk/clients/cs/samples/Analytics_DataFeed_Sample/dataFeed.cs)

但不想使用它，因为在这里我必须传递用户名和密码：

```
 private const String CLIENT_USERNAME = "INSERT_LOGIN_EMAIL_HERE";
 private const String CLIENT_PASS = "INSERT_PASSWORD_HERE"; 
```

让我知道使用访问令牌获取分析数据的任何方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T07:23:23.983

经过长时间的努力，一定会成功的......

这是由 Google 开发人员制作的 Oauth Playground，您可以测试您的数据

```
https://code.google.com/oauthplayground/ 
```

我只是使用 Oauth 2.0 来检索访问令牌信息，之后我使用以下 URL 来获取分析信息。

```
https://developers.google.com/analytics/devguides/reporting/core/v2/gdataReferenceDataFeed 
```

您需要使用您的 URL 传递访问令牌，即：

```
https://www.googleapis.com/analytics/v2.4/data?ids=ga:12345&metrics=ga:visitors,ga:bounces&start-date=2012-07-01&end-date=2012-07-25&access_token=ya29.AHES6ZTzNR6n6FVcmY8uar6izjP9UGeHYNO5nUR7yU2bBqM 
```

祝你好运享受编码..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T12:39:53.787

您可以尝试使用以下代码

```
string ClientId = "CLIENTID"
string ClientSecret = "CLIENTSECRET"
var Client = new NativeApplicationClient(GoogleAuthenticationServer.Description, ClientId, ClientSecret);
var Auth = new OAuth2Authenticator<NativeApplicationClient>(Client, Authenticate);

var Service = new AnalyticsService(Auth);

var Request = Service.Data.Ga.Get("profileID", StartDate, EndDate, "Matrix");
Request.MaxResults = 1000;
Request.Dimensions = "Dimensions";

var Result = Request.Fetch(); 
```

# wpf - WPF应用程序中的循环dll依赖

> ID：11663065
> 
> 赞同：0
> 
> 时间：2012-07-26T05:41:04.823
> 
> 标签：wpf, c#-4.0, circular-dependency

我有3个项目。说项目 Lib1、Lib2、UI。其中，UI 是 WPF UI 项目。UI 项目引用了 Lib1，而项目 Lib2 也引用了 Lib1。

现在我有一种情况，当我想在 UI 项目中引用 Lib2 时，我得到了一个循环依赖。

有人可以告诉我如何解决这个问题吗？

# sip - 黑莓中的 SIP VoIP 呼叫

> ID：11663073
> 
> 赞同：0
> 
> 时间：2012-07-26T05:41:55.930
> 
> 标签：sip, voip

黑莓中是否有任何用于 SIP VoIP 呼叫的开源库或 API。

如何开发用于 VoIP 呼叫的应用程序。

如果在黑莓中可能的话，请为我提供最好的指导。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T12:52:09.687

您可以为黑莓 10 使用 taki sip 软电话。 [http://taki.sourceforge.net/documentation/comment-page-1/#comment-1123](http://taki.sourceforge.net/documentation/comment-page-1/#comment-1123)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T04:20:13.033

你试过[PJSIP 吗](https://trac.pjsip.org/repos/wiki/Getting-Started/Download-Source)？PJSIP 是用 C 语言编写的免费和开源多媒体堆栈，它支持音频、视频、状态和即时消息功能。

您也可以将其他链接称为链接[1](http://devblog.blackberry.com/2012/07/voip-development-on-blackberry-10/) [链接 2](http://blog.truphone.com/2012/04/the-blackberry-jam-in-our-donut.html)

# vba - 如何将我的代码放在 do while 循环中？

> ID：11663079
> 
> 赞同：-1
> 
> 时间：2012-07-26T05:42:20.083
> 
> 标签：vba, ms-word

我想在 word 中检查整个页面的这种情况。

```
If Options.CheckGrammarWithSpelling = True Then
    Selection.Comments.Add Range:=Selection.Range
    Selection.TypeText Text:="WRONG!!!"
    'ActiveDocument.CheckGrammar
Else
    'ActiveDocument.CheckSpelling
    'Selection.Comments.Add Range:=Selection.Range
End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T06:09:39.240

您不需要 Do While 循环。这是你正在尝试的吗？

```
Sub DoSpellCheckAndComment()
    Dim oWord As Range
    Dim StoryRange As Range

    For Each StoryRange In ActiveDocument.StoryRanges
        Application.CheckSpelling Word:=StoryRange
        For Each oWord In StoryRange.Words
            If Not Application.CheckSpelling(Word:=oWord.Text) Then
                oWord.Select
                oWord.Comments.Add Range:=Selection.Range, Text:="WRONG!!!"
            End If
        Next oWord
    Next StoryRange
End Sub 
```

# android - 键盘未隐藏在 ActionBar 选项卡更改上

> ID：11663092
> 
> 赞同：2
> 
> 时间：2012-07-26T05:43:39.973
> 
> 标签：android, android-actionbar, android-tabs

我已经在我的应用程序中实现了 ActionBar Tab。但是我在标签更改期间面临一个问题。我的标签主要包含 webview，但一个标签包含编辑文本。**当我点击编辑文本时，键盘会出现，如果我正在更改标签，键盘会出现，键盘不会消失**。我尝试了一些简单的解决方案，比如明确隐藏它，但没有成功。

```
InputMethodManager mgr = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
 mgr.hideSoftInputFromWindow(fragment.getView().getApplicationWindowToken(), 0); 
```

我正在调用实现 ActionBar.TabListener 的类的 onTabSelected()。我不知道如何解决这个问题，也没有获得相关信息。

提前致谢。任何帮助将不胜感激。

***更新和回答***

Eric 的回答在某种程度上给了我一个推动力并帮助我得到了答案，所以我用我的改变将他的答案标记为正确。即我在我的`onTabUnselected`而不是tabSelected 中添加了eric 的代码，因为当我试图获取视图时，视图没有被创建，因此视图为空。所以我的最终代码是

```
@Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft)
    {
        View target = initialisedFragment.getView().findFocus();

        if (target != null) 
        {
            InputMethodManager mgr = (InputMethodManager) activity.getSystemService(Context.INPUT_METHOD_SERVICE);
            mgr.hideSoftInputFromWindow(target.getWindowToken(), 0);
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T06:01:47.780

我不相信您可以选择 a`View`并将其用作窗口令牌。您必须找到当前显示键盘的字段。

这是我以前使用过的方法的一个端口，值得一试：

```
View target = fragment.getView().findFocus();
if (target != null) {
    InputMethodManager imm = (InputMethodManager) target.getContext().getSystemService(Context.INPUT_METHOD_SERVICE);
    imm.hideSoftInputFromWindow(target.getWindowToken(), 0);
} 
```

如果这不起作用，则有[许多其他方法被报告为有效](https://stackoverflow.com/questions/1109022/close-hide-the-android-soft-keyboard)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-28T10:03:35.380

我使用以下选项来捕获设备正在工作的当前视图：

```
public final void onTabReselected(Tab tab, FragmentTransaction fragmentTransaction) {
        View focus = getCurrentFocus();
        if (focus != null) {
            hiddenKeyboard(focus);
        }
    }
public final void onTabselected(Tab tab, FragmentTransaction fragmentTransaction) {
        View focus = getCurrentFocus();
        if (focus != null) {
            hiddenKeyboard(focus);
        }
    }
public final void onTabUnselected(Tab tab, FragmentTransaction fragmentTransaction) {
        View focus = getCurrentFocus();
        if (focus != null) {
            hiddenKeyboard(focus);
        }
    } 
```

# c# - 使用对象列表和复选框列创建一个简单的 DataGridView (C#)

> ID：11663100
> 
> 赞同：0
> 
> 时间：2012-07-26T05:44:02.310
> 
> 标签：c#, winforms, datagridview, datagridviewcolumn, datagridviewcheckboxcell

我看过很多地方，我正在努力做这件所谓的简单事情。我有一个 Windows 窗体，我必须在该窗体上以这种形式显示一个简单的 DataGridView：

| (复选框列) | 文件路径 | 文件状态 |

现在，有几个问题。我需要绑定到它们的数据位于对象列表中，如下所示：

```
 class FileObject
    {
        string filePath;
        string fileState;
    }

    //Now here's the list of these objects which I populate somehow. 
    List<FileObject> listFiles; 
```

*   是否有任何有效的方法可以将其直接绑定到 DataGridView，以便列表中 Object 的不同成员绑定到不同的列，并且每个都有复选框？
*   我看到了将复选框列添加到数据网格的示例，但没有一个显示如何将其添加到“标题”行，以便它可以充当“选中所有”/“取消选中所有”框。

如何实现这一目标的任何帮助都会很棒！我确实在 C# 中编写了简单的应用程序，但从未使用过数据网格等。:(

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T05:55:45.543

请参考以下示例，准确显示您要查找的内容

[http://www.codeproject.com/Articles/20165/CheckBox-Header-Column-For-DataGridView](http://www.codeproject.com/Articles/20165/CheckBox-Header-Column-For-DataGridView)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T13:21:30.283

DataGridView 控件具有自动生成可由 AutoGenerateColumns 属性设置的列的功能。此属性默认为 true - 即默认情况下自动生成列。

但是，只会为您绑定到网格的对象的公共属性自动生成列 - 字段不会显示。

当绑定对象上有公共布尔属性时，自动生成也适用于复选框列。

因此，实现前两个要求的最简单方法是将您的`FileObject`类更改为：

```
public class FileObject
{
    public string FilePath { get; set; }
    public string FileState { get; set; }
    public bool Selected { get; set; }
} 
```

如果您无法修改该类，那么下一个最好的方法是创建一个包含文件对象的包装器对象：

```
public class FileObjectWrapper
{
    private FileObject fileObject_;

    FileObjectWrapper()
    {
        fileObject_ = new FileObject();
    }

    FileObjectWrapper(FileObject fo)
    {
        fileObject_ = fo;
    }

    public string FilePath
    {
        get { return fileObject_.filePath; }
        set { fileObject_.filePath = value; }
    }

    public string FileState
    {
        get { return fileObject_.fileState; }
        set { fileObject_.fileState= value; }
    }

    public bool Selected { get; set; }
} 
```

然后，您可以创建要绑定的列表（通常最好使用 BindingList），执行以下操作：

```
var fowList = new BindingList<FileObjectWrapper>();

foreach (FileObject fo in // here you have your list of file objects! )
{
    fowList.Add(new FileObjectWrapper(fo));
}

dataGridView1.DataSource = fowList; 
```

有很多方法可以完成上述操作，但这是一个普遍的想法。

* * *

您还可以将未绑定的元素添加`DataGridViewCheckBoxColumn`到网格中，尽管我发现在绑定列表中更容易。如果您确实需要，请按以下步骤操作：

```
DataGridViewCheckBoxColumn c = new DataGridViewCheckBoxColumn();
c.Name = "Selected";
dataGridView1.Columns.Add(c); 
```

* * *

最后，为了在标题中有“SelectedAll”选项，您需要使用自定义代码。

Umesh 链接到的 CodeProject 上的文章（[DataGridView 的 CheckBox Header Column](http://www.codeproject.com/Articles/20165/CheckBox-Header-Column-For-DataGridView)）看起来很容易实现 - 他们创建了一个自定义`DataGridViewHeaderCell`的覆盖`Paint`和`OnMouseClick`方法。

# asp.net-mvc - ASP.NET MVC 4 RC 缺少使用 HTML5 语义标记

> ID：11663101
> 
> 赞同：2
> 
> 时间：2012-07-26T05:44:10.843
> 
> 标签：asp.net-mvc, html

我正在使用 Visual Studio 2010 - SP1

我在我的盒子上安装了 ASP.NET MVC 4.0 RC。在创建 ASP.NET MVC 4.0 Web 应用程序项目类型的新项目时，所有项目模板（空应用程序、Web Api、Internet 应用程序、Intranet 应用程序）中都缺少“使用 HTML5 语义标记”选项。

请记住，在安装 RC 之前，我还没有安装 asp.net mvc 4 beta。但是，在创建 asp.net mvc 3.0 Web 应用程序时会出现此选项。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-26T13:25:55.590

您必须安装此扩展程序：

[Microsoft Visual Studio 2010 SP1 的 Web 标准更新](http://visualstudiogallery.msdn.microsoft.com/a15c3ce9-f58f-42b7-8668-53f6cdc2cd83)

还可以考虑安装[Web Essentials](http://visualstudiogallery.msdn.microsoft.com/6ed4c78f-a23e-49ad-b5fd-369af0c2107f)。它添加了大量与 Web 开发相关的有用工具。

# ajax - 使用验证插件，当检查了一个复选框或特定文本字段时，我如何提交表单

> ID：11663103
> 
> 赞同：1
> 
> 时间：2012-07-26T05:44:24.563
> 
> 标签：ajax, jquery-validate

//使用验证插件，当其中一个复选框被选中或特定文本字段不为空时，我如何提交表单？我有动态生成的复选框和 category_name 文本字段。我想在检查一个复选框或category_name文本字段时提交表单。

```
<?php
            while($cat_row = "fetch_result"){
                $tr.='<b><input type="checkbox" class="required" name="category[]" value="'.$cat_row['category_name'].'" id="category[]" checked/>'.$cat_row['category_name'].'</b>';
            }
            ?>
        //HTML File

<body>  
<form id="abc" name="abc" action="PATH_TO_PHPFILE" method="post" enctype="multipart/form-data" >        

            <div id="cd">
                <?=$tr?>
                <div id="err"></div>
            </div>  
            <input type="text" name="category_name" id="category_name" class="text_box" value="" />
</form>

<script>
$(function() {
    $("form").validate({
        rules:{
            category:{
                required:true,
                minlength:2
            }
        },
        errorPlacement: function(error, element) {
            error.appendTo('#err');
        },
        submitHandler: function(form){
            var options = {

                success:function (data){

                    $.unblockUI();
                  //do something
                },
                beforeSubmit:function (){
                    //do something
                }
            };
            $(form).ajaxSubmit(options);
        }
    }); 
}); 
</script>
</body> 
```

# - 秒算

> ID：11663105
> 
> 赞同：0
> 
> 时间：2012-07-26T05:44:33.323
> 
> 标签：

'SecComp' 是 Secure Computing Mode 的缩写，它是一种内置在现代 Linux 内核中的工具，可用于限制（不可逆地）允许程序执行的操作。

# wpf - 使用组合框作为源来对自动生成的 DataGrid 进行分组

> ID：11663106
> 
> 赞同：0
> 
> 时间：2012-07-26T05:44:36.463
> 
> 标签：wpf, data-binding, mvvm, filtering, grouping

**`ViewModel`**：我想全选`Persons`（每个人可能属于`Type`：Employee、Manager 或 Customer**并且是`PersonType`其中存在的`Persons`**一个不同的集合），这是我想让 执行此操作的唯一操作`ViewModel`。

**`View`**：我想要 a `ComboBox`of`PersonTypes`和 a`DataGrid`根据选择`PersonType`的 of过滤`ComboBox`（换句话说，我想让`ComboBox`负责`DataGrid` `Grouping`）并且会在`XAML`.

有什么建议么？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T06:46:56.467

```
 <Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="50"/>
        <RowDefinition Height="250"/>
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="200"/>
        </Grid.ColumnDefinitions>
    <ComboBox x:Name="combo" ItemsSource="{Binding PersonTypes}" Tag="{Binding Persons}"/>
    <DataGrid  Grid.Row="1" AutoGenerateColumns="False">
        <DataGrid.ItemsSource>
            <MultiBinding Converter="{StaticResource conv}">
                <Binding Path="Tag" ElementName="combo"/>
                <Binding Path="SelectedItem" ElementName="combo"/>
            </MultiBinding>
        </DataGrid.ItemsSource>
        <DataGrid.Columns>
            <DataGridTextColumn Binding="{Binding Name}"/>
        </DataGrid.Columns>
    </DataGrid>

</Grid>

    public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        DataContext = new ViewModel();
    }
}
public class ViewModel
{
    public ViewModel()
    {
        PersonTypes = new ObservableCollection<PersonType>() { PersonType.Manager, PersonType.Customer, PersonType.Employee };

        Persons = new ObservableCollection<Person>();
        Persons.Add(new Person() { Name = "ABC", Type = PersonType.Manager });
        Persons.Add(new Person() { Name = "DEF", Type = PersonType.Manager });
        Persons.Add(new Person() { Name = "GHI", Type = PersonType.Customer });
        Persons.Add(new Person() { Name = "JKL", Type = PersonType.Manager });
        Persons.Add(new Person() { Name = "MNO", Type = PersonType.Employee });
    }
    public ObservableCollection<Person> Persons { get; set; }
    public ObservableCollection<PersonType> PersonTypes { get; set; }

}
public class Person
{
    public string Name { get; set; }
    public PersonType Type { get; set; }
}

public enum PersonType
{
    Manager = 0,
    Employee = 1,
    Customer = 2
}
public class MyConverter : IMultiValueConverter
{
    public object Convert(object[] values, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        if (values.Count() > 1 && values[1] !=null && values[0] is ObservableCollection<Person>)
        {
            string ptype = values[1].ToString();
            ObservableCollection<Person> persons = (ObservableCollection<Person>)values[0];
            if (ptype != null && persons != null)
            {
                return persons.Where(p => p.Type.ToString() == ptype).ToList();
            }
        }

        return null;
    }

    public object[] ConvertBack(object value, Type[] targetTypes, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

我希望这将有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T07:19:12.953

只是为了完整性，这里是一个没有转换器的非（最小）xaml 解决方案。

xml:

```
<Grid>
    <Grid.Resources>
        <ObjectDataProvider x:Key="srcPersonType" MethodName="GetValues" ObjectType="{x:Type System:Enum}">
            <ObjectDataProvider.MethodParameters>
                <x:Type TypeName="local:PersonType"/>
            </ObjectDataProvider.MethodParameters>
        </ObjectDataProvider>
    </Grid.Resources>
    <Grid.RowDefinitions>
        <RowDefinition Height="auto" />
        <RowDefinition Height="*" />
    </Grid.RowDefinitions>
    <ComboBox ItemsSource="{Binding Source={StaticResource srcPersonType}}" SelectedItem="{Binding SelectedType}"/>
    <DataGrid Grid.Row="1"  ItemsSource="{Binding MyView}"/>
</Grid> 
```

视图模型：

```
public class ViewModel
{
    public ObservableCollection<Person> Persons { get; set; }
    public ICollectionView MyView { get; set; }

    private PersonType _selectedType;
    public PersonType SelectedType
    {
        get { return _selectedType; }
        set { _selectedType = value; this.MyView.Refresh(); }
    }

    public ViewModel()
    {
        Persons = new ObservableCollection<Person>();
        Persons.Add(new Person() { Name = "ABC", Type = PersonType.Manager });
        Persons.Add(new Person() { Name = "DEF", Type = PersonType.Manager });
        Persons.Add(new Person() { Name = "GHI", Type = PersonType.Customer });
        Persons.Add(new Person() { Name = "JKL", Type = PersonType.Manager });
        Persons.Add(new Person() { Name = "MNO", Type = PersonType.Employee });

        this.MyView = CollectionViewSource.GetDefaultView(this.Persons);
        this.MyView.Filter = (item) =>
                                 {
                                     var person = (Person) item;

                                     if (this.SelectedType == null || this.SelectedType == PersonType.All)
                                         return true;

                                     if (person.Type == this.SelectedType)
                                         return true;

                                     return false;

                                 };
    }
} 
```

人物类型为枚举：

```
public enum PersonType
{
    All,
    Manager,
    Customer,
    Employee
} 
```

编辑：以符合评论的要求

视图模型

```
public IEnumerable<PersonType> MyGroup { get { return this.Persons.Select(x => x.Type).Distinct(); } }
//when ever your Person collection is altered, you have to call OnPropertyChanged("MyGroup") 
```

xml

```
 <ComboBox ItemsSource="{Binding MyGroup}" SelectedItem="{Binding SelectedType}" />
    <DataGrid Grid.Row="1"  ItemsSource="{Binding MyView}"/> 
```

# java - 当第一次使用 java update 1.7 在对象上调用方法时，applet 对象给出空指针异常

> ID：11663107
> 
> 赞同：1
> 
> 时间：2012-07-26T05:44:41.623
> 
> 标签：java, javascript, applet

我将我的 jre 从 1.6 update 31 更新到 1.7 update05，现在当第一次创建小程序对象并且 java 脚本调用小程序对象上的方法时，它会给出空指针异常，但之后它不会发生，但是当我发出警报时在调用对象上的方法之前显示警报对象，并且不会发生此异常。任何机构都可以告诉我问题是什么，我应该怎么做才能解决它。

```
 <% response.write "<OBJECT "%>
    classid="clsid:8AD9C840-044E-11m1-B3E9-00805F499D93"
    WIDTH=<%= iWidth  %> HEIGHT=<%= iHeight %>   
    hspace=0 vspace=0 border=0 align=top NAME="graph"  
    <% 'codebase="res/plugins/j2re-1_4_0_01-windows-i586-i.exe#Version=1,4,0,1"  %>
    type="application/x-java-applet;version=1.4"  
    id=JavaBeansBridge_Object1>
    <param name ="CODE"             value="com.graph.Graph.class" >
  <param name ="CODEBASE"           value="res/applet/" >
  <param name ="ARCHIVE"            value="graph.jar">
  <param name="Type" id="Param1" value="<%=Type%>">         
  <param name="NodeName" value="<%= NodeName %>">           
  <param name="type" value="application/x-java-applet;version=1.4">
 <param name="scriptable"   value="true">
 </OBJECT> 
```

调用applet方法的javascript代码如下

```
<pre>
//alert (document.graph);
document.graph.setType(inputType);
</pre> 
```

如果我取消注释警报然后为空，则不会发生异常。

# javascript - 调试Javascript时如何在PHPStorm中输出到控制台？

> ID：11663114
> 
> 赞同：0
> 
> 时间：2012-07-26T05:44:58.920
> 
> 标签：javascript, debugging, phpstorm, javascript-debugger

Javascript 调试在 PHPStorm 中很棒，但是我如何简单地将字符串从 JS 输出到控制台？

在 Firebug 中，我会添加如下内容：

`console.log('Internet successfully downloaded');`

什么是 PHPStorm 调试器等价物？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-02T11:12:51.513

现在Chrome 和 Firefox 都[支持](https://youtrack.jetbrains.com/issue/WEB-4378)它。

* * *

2012年的原始答案：

~~目前仅**Firefox**支持此功能。如果您使用的是**Chrome**，请[为相关功能请求投票](http://youtrack.jetbrains.com/issue/IDEA-76789)。~~

# c++ - 大无符号整数 (C++)

> ID：11663118
> 
> 赞同：0
> 
> 时间：2012-07-26T05:45:26.307
> 
> 标签：c++, biginteger

我用过[这个库](http://mattmccutchen.net/bigint/)。我必须对 BigUnsigned 数字执行位操作。

我的代码是

```
#include "BigIntegerLibrary.h"
BigUnsigned n1;

for (int i = 0; i < 100;i++)
{
    if (i < 5)
    {
        n1.setBit(i,true);
    }
    else
    {
        n1.setBit(i,false);
    }
}

BigUnsigned n2;
n2 = n1;
n2.bitShiftLeft(n2 , 40); 
```

它给了我`n2`is`0`而不是`34084860461056`. 为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T05:57:37.830

它可能与库的实现有关。我强烈建议使用[GMP](http://gmplib.org/)来完成这项任务。我的解决方案看起来像这样：

```
#include <iostream>
#include <gmpxx.h>
using namespace std;

int main() {

    mpz_class n2 = 0x1F;

    n2 <<= 40;

    cout << n2 << endl;

    return 0;
} 
```

# php - PHPdoc @param 中的两个或多个数据类型

> ID：11663125
> 
> 赞同：17
> 
> 时间：2012-07-26T05:46:00.133
> 
> 标签：php, documentation, phpdoc

好的，我的类方法上面确实有这个 phpdoc

```
/**
 * this a function that translates the text
 * @param string|boolean $lang if string the string given in the parameter will be the language code that will represent the language desired, if true, this will translate based on the website's current language, if false will not translate.
 */ 
```

现在我的问题是，我如何定义`$lang`只能接受字符串和布尔值的数据类型。

在我看到的其他文档中，`mixed`但它在我的带有 PDT 的 Eclipse IDE 中没有正确反映。

我的问题是我如何显示某个可能接受两种或多种数据类型的*标准方法是什么。*`@param`

**注意**：我给出的 phpdoc 是我现在正在工作的应用程序的现有文档。好吧，我被分配很好地记录一切。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-26T05:50:38.590

你做对了。[PHPDoc 参考](http://manual.phpdoc.org/HTMLSmartyConverter/HandS/phpDocumentor/tutorial_tags.param.pkg.html)为可以是多种数据类型的参数提供了这两个选项（强调我的）。

> 数据类型应该是有效的 PHP 类型（int、string、bool 等）、对象类型的类名或简单的**“混合”**。此外，您可以通过用竖线分隔单个参数来列出多个数据类型 **（例如“@param int|string $p1”）。**

# python - 分解出涉及 tornado.gen.Task 的异步代码

> ID：11663131
> 
> 赞同：3
> 
> 时间：2012-07-26T05:46:34.637
> 
> 标签：python, mongodb, generator, tornado

我有许多 tornado.web.RequestHandler 类，它们使用 id 和访问密钥安全 cookie 测试授权访问。我使用 gen.Task 通过内联回调异步访问 mongodb。由于它的异步性，我无法找出一种方法来分解重复代码。我怎样才能做到这一点？

```
class MyHandler(RequestHandler):
    @tornado.web.asynchronous
    @gen.engine
    def get(self):
        id = self.get_secure_cookie('id', None)
        accesskey = self.get_secure_cookie('accesskey', None)
        if not id or not accesskey:
            self.redirect('/a_public_area')
            return
        try:
            # convert to bson id format to access mongodb
            bson.objectid.ObjectId(id)
        except:
            # if not valid object id
            self.redirect('/a_public_area')
            return
        found_id, error = yield gen.Task(asyncmong_client_inst.collection.find_one, 
            {'_id': id, 'accesskey': accesskey}, fields={'_id': 1})
        if error['error']:
            raise HTTPError(500)
            return
        if not found_id[0]:
            self.redirect('/a_public_area')
            return

        # real business code follows 
```

我想将上述因素纳入一个可能产生 HTTP 状态代码的函数中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T06:12:00.390

也许是装饰者（未经测试或其他任何东西，只是一些想法）

```
def sanitize(fn):
    def _sanitize(self, *args, **kwargs):
        id = self.get_secure_cookie('id', None)
        accesskey = self.get_secure_cookie('accesskey', None)
        if not id or not accesskey:
            self.redirect('/a_public_area')
            return
        try:
            # convert to bson id format to access mongodb
            bson.objectid.ObjectId(id)
        except:
            # if not valid object id
            self.redirect('/a_public_area')
            return
        return fn(self, *args, **kwargs)
    return _sanitize 
```

不知道您是否可以使 check_errors 与业务逻辑一起使用..但也许..

```
def check_errors(fn):
   def _check_errors(*args, **kwargs)
      found_id, error = fn(*args, **kwargs)
      if error['error']:
         raise HTTPError(500)
         return
      if not found_id[0]:
         self.redirect('/a_public_area')
         return
   return _check_errors 
```

然后

```
class MyHandler(RequestHandler):
    @tornado.web.asynchronous
    @gen.engine
    @sanitize
    @check_errors #..O.o decorators
    def get(self):
        found_id, error = yield gen.Task(asyncmong_client_inst.collection.find_one, 
              {'_id': id, 'accesskey': accesskey}, fields={'_id': 1})
        return found_id, error 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T08:52:13.557

Tornado 有装饰器`@tornado.web.authenticated`。让我们使用它。

```
class BaseHandler(RequestHandler):
   def get_login_url(self):
        return u"/a_public_area"

    @gen.engine #Not sure about this step
    def get_current_user(self):
        id = self.get_secure_cookie('id', None)
        accesskey = self.get_secure_cookie('accesskey', None)
        if not id or not accesskey:
            return False

        #Are you sure need this? 
        try:
            # convert to bson id format to access mongodb
            bson.objectid.ObjectId(id)
        except:
            # if not valid object id
            return False

        #I believe that you don't need asynchronous mongo on auth query, so if it's not working - replace it with sync call
        found_id, error = yield gen.Task(asyncmong_client_inst.collection.find_one, 
            {'_id': id, 'accesskey': accesskey}, fields={'_id': 1})

        if error['error']:
            raise HTTPError(500)

        if not found_id[0]:
            return False

        return found_id

class MyHandler(BaseHandler):
    @tornado.web.asynchronous
    @tornado.web.authenticated
    @gen.engine
    def get(self):
        # real business code follows 
```

到处使用`gen`- 不是好的做法。它可以把这个世界变成大意大利面。想想看。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-21T23:04:41.503

我想用 gen.Task 解决这个普遍的问题，即分解出代码要么是不可能的，要么是极其笨拙的。

您只能在 get() 或 post() 方法中执行“yield gen.Task(...)”。如果你想让 get() 调用另一个函数 foo()，并在 foo() 中完成工作，那么：你不能，除非你想把所有东西都写成一个生成器，并以某种笨拙的方式将它们链接在一起。随着您的项目变得越来越大，这将是一个大问题。

这是一个更好的选择：[https ://github.com/mopub/greenlet-tornado](https://github.com/mopub/greenlet-tornado)

我们使用它将大型同步代码库转换为 Tornado，几乎没有任何更改。

# objective-c - 从目标 c 调用目标 c++ 方法

> ID：11663132
> 
> 赞同：0
> 
> 时间：2012-07-26T05:46:34.927
> 
> 标签：objective-c, ios, objective-c++

我只是在学习Objective C（和objective-c++），并且我有一个Objective-C++ 类，它具有以下构造函数。

```
void InputManager::_init (int inputAreaX, int inputAreaY, int inputAreaWidth, int inputAreaHeight) 
```

如何从目标 C 调用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T05:56:19.487

这似乎是一种纯 C++ 方法，因此它的工作方式与普通 C++ 完全相同（即使在 Objective-C++ 文件中）。例如，您可能在堆栈上定义了一个变量：

```
InputManager mgr; // or, include constructor arguments if the class can't be default-constructed
mgr._init(x, y, w, h); // this assumes 4 variables exist with these names; use whatever parameter values you want 
```

不过这个名字`_init`有点奇怪；您的意思是 this 是该类的构造函数吗？如果是这样，`InputManager::InputManager(int x, int y, int w, int h)`可能应该改为定义。

如果您实际上希望此类*仅是 Objective-C*，则语法和行为是不同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T05:56:55.767

你有两个选择：

**选项1。**

将其翻译成仅限 Objective-C 的代码。我不太擅长 C++，但这可能是 .h 中的样子：

```
-(id)initWithAreaX: (int) inputAreaX AreaY: (int) inputAreaY AreaWidth: (int) inputAreaWidth AreaHeight: (int) inputAreaHeight; 
```

因为它看起来像是一个构造方法，所以在实现中它可能看起来像这样：

```
-(id)initWithAreaX: (int) inputAreaX AreaY: (int) inputAreaY AreaWidth: (int) inputAreaWidth AreaHeight: (int) inputAreaHeight {

    self = [super init];

    if(self) {

        //Custom Initialization Code Here    
        _inputAreaX = inputAreaX;
        _inputAreaY = inputAreaY;
        _inputAreaWidth = inputAreaWidth;
        _inputAreaHeight = inputAreaHeight;
    }

    return self;
} 
```

你可以这样称呼它：

```
InputManager *object = [[InputManager alloc] initWithAreaX: 20 AreaY: 20 AreaWidth: 25 AreaHeight: 25]; 
```

**选项 2。**

Objective-C++ 的全部目的是允许开发人员集成 C++ 和 Objective-C 代码。你想知道如何在 Objective-C 中调用 Objective-C++ 方法，但 Objective-C++ 的全部目的就是将两者结合起来，所以没有必要去寻找漏洞调用 Objective-C++ 中的方法否则完全是Objective-C的文件。因此，第二个选项是在扩展名为“.mm”的 Objective-C++ 文件中创建要调用 Objective-C++ 方法的文件。

希望这可以帮助！

# media-player - 将熔化输出保存到另一个 avi/mp4 文件

> ID：11663134
> 
> 赞同：8
> 
> 时间：2012-07-26T05:46:36.977
> 
> 标签：media-player, media, mlt, melt-framework

我正在尝试使用[mltframework](https://github.com/mltframework/mlt)合并 2 个以上的视频。我想从这些合并的视频文件中生成另一个 .avi 文件。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-03-11T11:12:48.347

尝试

```
melt {input-sequence} -consumer avformat:{output-name} acodec=libmp3lame vcodec=libx264 
```

替代`{input-sequence}`并`{output-name}`满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T23:27:18.447

试试 $ melt -consumer avformat: 作为一个基本的工作示例。您可能想为 avformat 设置一些参数，使其看起来不错。

# html - 什么都没有时出现垂直滚动条

> ID：11663136
> 
> 赞同：1
> 
> 时间：2012-07-26T05:46:39.127
> 
> 标签：html, css, scrollbar, vertical-scrolling

我在这个页面上放了一个表格，在我的电脑上它没有超出页面底部，但会出现一个垂直滚动条。

这是页面： http: [//kimkellermedia.com/test3/contact.html](http://kimkellermedia.com/test3/contact.html)

我检查了页面，奇怪的是它在那里什么都没有显示，说 html 在截止点之前停止了，所以我不确定要改变什么来摆脱空白。

由于它似乎并没有出现在每个人身上，这里是我所看到的大屏幕截图：http: [//kimkellermedia.com/test3/example.html](http://kimkellermedia.com/test3/example.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T06:11:14.497

您的内容具有可见性的跨度：隐藏，使其显示：无。这样跨度的空间就不会被使用。

我尝试降低评论文本区域的高度，现在滚动条消失了。请将滚动条的高度设置为 175px。那是因为内容。

现在滚动条不会出现。

# python - 为“仅一个实例”创建一个 Python 类？

> ID：11663137
> 
> 赞同：5
> 
> 时间：2012-07-26T05:46:43.767
> 
> 标签：python, oop

我问的是关于 Python 的这个问题，尽管它可能适用于大多数 OOP 语言。

当我只希望在任何程序中只使用一次数据模型时，我可以使用类/静态方法和属性创建一个类，或者只创建一个常规类并将其实例化一次，然后只使用那个副本。在这种情况下，哪种方法更好，为什么？

使用 python，我还可以编写一个模块并像使用类一样使用它。在这种情况下，哪种方式更好，为什么？

示例：我想要一个中央数据结构来访问/保存数据到文件。

模块方式：

数据.py

```
attributes = something
...
def save():
... 
```

主文件

```
import data
data.x = something
...
data.save() 
```

上课方式：

```
class Data:
    attributes = something
    @classmethod
    def save(cls):

Data.x = something
Data.save() 
```

实例方式

```
class Data:
    def save(self):

data = Data()
data.x = something
data.save() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T05:50:17.260

模块旨在将公共结构包含在“命名空间”中。但实际上在 python 中，模块只是一个文件，您可以根据需要组织它们。有些人将很多功能放在一个模块中。有些人将它们分散在包或子包中。取决于您想要的可重用性。如果一个模块有大量的依赖项，而您只想重用一小部分，那么拆分它们是有意义的。

类允许您定义可以作为子类型继承的类型。它们还允许您为该类的每个实例定义一个状态。

当你的类没有状态，只有静态方法/类方法时，你可能不需要一个类。你只需要函数。

此外，您不能创建模块并像使用类一样使用它。模块不能有子类。它们只有一个基本模块 init 加载一次，然后是一个对象范围。

如果你所追求的是常量，这意味着它们在应用程序的生命周期中定义一次，那么只需创建一个带有一堆原始类型（如字符串、字典和列表）的 constants.py 模块。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T10:50:37.680

标准随机模块实现有一个很好的设计，它显示了模块级实例的创建和使用，而不会强制任何用户使用单例。

例如，如果我称它为`random.random()`使用在导入时初始化的 Random 类的隐藏实例。如果我对默认值不满意，我可以

```
my_random = random.Random()
my_random.seed('not needed but illustrative seed call')
coin_toss = my_random.random() 
```

然后有一个不与隐藏实例共享状态的生成器。如果您对这种方法感兴趣，请阅读`random.py`有据可查的文档；只有几行相关的代码并不那么棘手。

这种方法为单例提供了一个有趣的 Pythonic 转折：在导入时自动构建一个，但如果我愿意，不要阻止我实例化更多。

# ruby-on-rails - 在 AJAX 发布请求中传递提交输入参数

> ID：11663141
> 
> 赞同：0
> 
> 时间：2012-07-26T05:47:06.250
> 
> 标签：ruby-on-rails, jquery

我正在将表单重构为 AJAX 发布请求。

这是现有的表格：

```
 <%= form_for([@group, @invitation], :remote => true, :html => { :'data-type' => 'html', :class => 'fbinvite_form', :id => friend[:identifier]}) do |f| %>
        <%= f.hidden_field :recipient_email, :value => "facebook@meetcody.com" %>

        <div class = "fbinvite btn_list_right" id = "<%= friend[:identifier] %>">
        <%= f.submit "Invite", :class => "btn btn-medium btn-primary", :name => "fb" %>
        </div>
    <% end %> 
```

在控制器中，我有检查提交输入名称的逻辑：

```
if params[:fb]
... 
elsif params[:somethingelse]
...
end 
```

这就是背景。我现在正在尝试用以下 ajax 替换上面的表单（添加了虚拟数据以使其更清晰）：

```
$.post('/groups/7/invitations', { 
  "recipient_email": "facebook@meetcody.com",
  "commit" : "fb",
  "fb" : "fb"
}, function(response) {
  alert("invite created!");
}); 
```

这成功地击中了控制器，但在条件上不评估为真`if params[:fb]`。如您所见，我尝试了一些非常基本的方法来传递该参数，但它显然不起作用。

如何更改我的 ajax 请求以便`params[:fb]`评估为`true`？

# java - Java 按多个关键字搜索

> ID：11663145
> 
> 赞同：1
> 
> 时间：2012-07-26T05:47:35.647
> 
> 标签：java, search, data-structures, collections

我有一个包含国家、城市、地区和建筑物名称信息的记录列表（超过 50,000 条记录），其中建筑物名称对于每条记录都是唯一的。

我想搜索建筑物、地区和城市。但是如果我将国家传递给一个方法，例如get(String country)，我想得到一个城市列表。或者，如果我将国家和城市传递给方法，则获取地区列表，例如 get(String country, String city)。

是否有任何现有的集合/库/数据结构可以做这样的事情？我正在考虑一个树状结构/地图。我尝试了 MultiKeyMap，但它不返回值列表并且它不是线程安全的。另外，我不想使用数据库来执行此操作。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T05:53:30.563

[SolR](http://lucene.apache.org/solr/)可能会完成您所追求的工作：

> Solr 是 Apache Lucene 项目中流行的、超快的开源企业搜索平台。它的主要功能包括强大的全文搜索、命中突出显示、分面搜索、动态聚类、数据库集成、富文档（例如，Word、PDF）处理和地理空间搜索。Solr 具有高度可扩展性，提供分布式搜索和索引复制，它支持许多世界上最大的互联网站点的搜索和导航功能......

它应该允许您创建查询，这反过来又允许您搜索您的记录。

您还可以通过[Solrj](http://wiki.apache.org/solr/Solrj)与 SolR 交互：

> Solrj 是一个访问 solr 的 java 客户端。它提供了一个 java 接口来添加、更新和查询 solr 索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T05:55:48.557

您可以像这样使用 HashMap

```
HashMap<country,HashMap<City,HashMap<district,HashMap<building,value>>>> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T06:25:26.310

An off-beat type of way maybe using .properties files for each country to refer to a subset of localities in their each own .properties that again contains a a .properties to refer to cities that refer to .properties file containing buildings. Another may be a class hierarchy system with a base instantiated "new" class e.g. GeographicLocation with a constructor that is fed an index to load an abstract class that indicates a Region or brings back a list of regions if not indicated by calling one of the two methods overloaded and that in turn automatically loads the next abstract class layer of city over the top of that.

```
Inside GeographicLocation class ....
CountryMap cntry = (CountryMap)this();
RegionMap rgion = (RegionMap)cntry;
CityMap cty = (CityMap)rgion;
....e.t.c. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T22:18:18.750

为什么不简单地使用三个哈希表（例如类型`HashMap<String, List<Record>>`）：一个由建筑物键控，一个由城市键控，一个由地区键控。当然，您将使用大约三倍的内存；但 50,000 条记录确实不算多。此外，查找将非常快速和简单。我建议尝试一下，看看它的表现如何。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T05:55:02.513

你可以看看[Apache 的 Commons](http://commons.apache.org/collections/) [CollectionUtils](http://commons.apache.org/collections/api-release/org/apache/commons/collections/CollectionUtils.html)。它有一个“选择”方法可以做你想做的事。

# asp.net-mvc - 从上一页获取页面标题

> ID：11663147
> 
> 赞同：1
> 
> 时间：2012-07-26T05:47:52.260
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我的网站上有一个页面。这个页面有很大的功能，并且有很多从其他页面到这个页面的链接。我想知道用户从哪里来到这个页面。我`UrlReferrer`在对象中找到了属性`Request`，但它只包含`url`. 但是，我想要页面标题。
我怎样才能做到这一点？
谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T05:58:04.133

您可以在生成链接时将其作为查询字符串参数传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T05:52:30.137

您可以在会话中为每个请求存储标题，然后检查它。

# objective-c - 在启动第一个选项卡视图控制器之前添加或呈现视图

> ID：11663153
> 
> 赞同：0
> 
> 时间：2012-07-26T05:48:39.347
> 
> 标签：objective-c, xcode

我正在制作一个我使用过的 iPhone 应用程序，**导航**和**标签栏控制器**。现在，在启动画面之后，我想在`UIView`显示标签栏的第一个视图控制器之前显示一个。

目前我在第一个 tabBar 控制器上添加了一个子视图。但是这个视图与第一个 tabBar 控制器的视图混淆了。

谁能告诉我是否可以`UIView`在启动 tabBar 控制器之前添加或呈现一个？如果有人有想法，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T06:22:01.327

使用故事板。使您的附加视图成为第一个场景。将 segue 添加到选项卡视图。如果您想要自动转换，请通过计时器触发 segue。

# php - 将数据发布到 php 中的 url

> ID：11663156
> 
> 赞同：0
> 
> 时间：2012-07-26T05:48:45.460
> 
> 标签：php, mysql, web-services, post

我正在通过 url 获取数据，但它没有显示任何记录`user_id`。该值`ali40`存在于数据库中，但未显示记录

[http://celeritas-solutions.com/emrapp/surveyDescription.php?user_id=ali40](http://celeritas-solutions.com/emrapp/surveyDescription.php?user_id=ali40)

```
<?php 

   $linkID = mysql_connect($host, $user, $pass) or die("Could not connect to host."); 
```

mysql_select_db($database, $linkID) or die("找不到数据库。");

```
 if (!function_exists('json_encode'))

  {

  function json_encode($a=false)

 {

 if (is_null($a)) return 'null';
 if ($a === false) return 'false';
 if ($a === true) return 'true';
 if (is_scalar($a))
  {
   if (is_float($a))
   {
    // Always use "." for floats.
    return floatval(str_replace(",", ".", strval($a)));
    }

    if (is_string($a))
    {
      static $jsonReplaces = array(array("\\", "/", "\n", "\t", "\r", "\b", "\f", '"'), array('\\\\', '\\/', '\\n', '\\t', '\\r', '\\b', '\\f', '\"'));
     return '"' . str_replace($jsonReplaces[0], $jsonReplaces[1], $a) . '"';
    }
    else
    return $a;
}
$isList = true;
for ($i = 0, reset($a); $i < count($a); $i++, next($a))
{
  if (key($a) !== $i)
  {
    $isList = false;
    break;
  }
}
$result = array();
if ($isList)
{
  foreach ($a as $v) $result[] = json_encode($v);
  return '[' . join(',', $result) . ']';
 }
 else
 {
  foreach ($a as $k => $v) $result[] = json_encode($k).':'.json_encode($v);
  return '{' . join(',', $result) . '}';
 }
 }
}

  $user_id=$_GET['user_id'];

  echo($user_id);

   $query = mysql_query("SELECT s.*, u.user_id FROM survey_master AS s JOIN user_profile AS u on u.user_id = s.user_id where s.user_id='".$user_id."' ");

  $rows = array();
 while($row = mysql_fetch_assoc($query)) {
  $rows[] = $row;
  }
  echo json_encode($rows);

 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T06:04:07.687

程序 PHP。

在使用 mysql_fetch_assoc 之前使用以下命令执行 sql：

```
$result = mysql_query($query); 
```

然后使用：

```
mysql_fetch_assoc($result) 
```

# r - 如何在 R 中编写 map reduce？

> ID：11663159
> 
> 赞同：7
> 
> 时间：2012-07-26T05:49:11.287
> 
> 标签：r, mapreduce

我是 R 新手。我知道如何用 Java 编写 map reduce。我想在 R 中尝试同样的方法。所以任何人都可以帮助提供任何示例代码，R 中的 MapReduce 是否有任何固定格式。

请发送除此之外的任何链接：[https ://github.com/RevolutionAnalytics/RHadoop/wiki/Tutorial](https://github.com/RevolutionAnalytics/RHadoop/wiki/Tutorial)

任何示例代码都会更有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-03T16:13:53.487

当您想用 Java 以外的语言实现 map reduce（使用 Hadoop）时，您可以使用称为流式传输的功能。然后数据通过 STDIN (readLines()) 馈送到映射器，通过 STDOUT(cat()) 返回到 Hadoop，然后通过 STDIN (readLines()) 再次馈送到 reducer，最后通过 STDOUT (cat()) 脱口而出。

以下代码摘自我写的一篇关于使用 R for Hadoop 编写 map reduce 作业[的文章。](http://www.joyofdata.de/blog/mapreduce-r-hadoop-amazon-emr/)代码应该计算 2 克，但我想说的很简单，可以看到 MapReduce 发生了什么。

```
# map.R

library(stringdist, quietly=TRUE)

input <- file("stdin", "r")

while(length(line <- readLines(input, n=1, warn=FALSE)) > 0) {
   # in case of empty lines
   # more sophisticated defensive code makes sense here
   if(nchar(line) == 0) break

   fields <- unlist(strsplit(line, "\t"))

   # extract 2-grams
   d <- qgrams(tolower(fields[4]), q=2)

   for(i in 1:ncol(d)) {
     # language / 2-gram / count
     cat(fields[2], "\t", colnames(d)[i], "\t", d[1,i], "\n")
   }
}

close(input) 
```

-

```
# reduce.R

input <- file("stdin", "r")

# initialize variables that keep
# track of the state

is_first_line <- TRUE

while(length(line <- readLines(input, n=1, warn=FALSE)) > 0) {
   line <- unlist(strsplit(line, "\t"))
   # current line belongs to previous
   # line's key pair
   if(!is_first_line &&
      prev_lang == line[1] &&
      prev_2gram == line[2]) {
        sum <- sum + as.integer(line[3])
   }
   # current line belongs either to a
   # new key pair or is first line
   else {
     # new key pair - so output the last
     # key pair's result
     if(!is_first_line) {
       # language / 2-gram / count
       cat(prev_lang,"\t",prev_2gram,"\t",sum,"\n")
     }
     # initialize state trackers
     prev_lang <- line[1]
     prev_2gram <- line[2]
     sum <- as.integer(line[3])
     is_first_line <- FALSE
   }
}

# the final record
cat(prev_lang,"\t",prev_2gram, "\t", sum, "\n")

close(input) 
```

* * *

[http://www.joyofdata.de/blog/mapreduce-r-hadoop-amazon-emr/](http://www.joyofdata.de/blog/mapreduce-r-hadoop-amazon-emr/)

# ruby-on-rails - 这个 Ruby on Rails 代码可以优化或改进吗？

> ID：11663167
> 
> 赞同：1
> 
> 时间：2012-07-26T05:50:10.203
> 
> 标签：ruby-on-rails, ruby, optimization

编码：

```
user = ... #pretend it has a value :)
instances = Array.new
Product.all.each do |product|
    productInstance = ProductInstance.new
    productInstance.user = user
    productInstance.product = product
    instances.push(productInstance)
end 
```

`Product`并且`ProductInstance`都是 Rails 模型。for-each 循环`Product.all`会变慢吗？只是想知道是否有更好的方法来做到这一点......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T08:54:17.257

永远不要一次迭代整个集合。

也许这在您的开发箱上可以正常工作，也许在您的新产品上也可以。

但是当您的应用程序变得流行并且您的数据库将有大量记录时，您的代码就会出现时间和内存问题。

使用例如[http://apidock.com/rails/ActiveRecord/Batches/ClassMethods/find_in_batches](http://apidock.com/rails/ActiveRecord/Batches/ClassMethods/find_in_batches)并了解垃圾收集的工作原理[http://timetobleed.com/garbage-collection-slides-from-la-ruby-conference/](http://timetobleed.com/garbage-collection-slides-from-la-ruby-conference/)

```
Product.find_in_batches do |products|
  products.each do |product|
    productInstance = ProductInstance.new
    productInstance.user = user
    productInstance.product = product
    instances.push(productInstance)  
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T05:52:12.840

我只会更改`each`为`map`（它更惯用）。

```
instances = Product.all.map do |product|
    productInstance = ProductInstance.new
    productInstance.user = user
    productInstance.product = product
    productInstance
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T05:58:16.520

像这样的东西应该工作。

```
instances = Product.all.map do |product|
    productInstance = ProductInstance.new(:user => user,:product => product)
end 
```

甚至

```
instances = Product.all.map do |product|
    ProductInstance.new(:user => user,:product => product)
end 
```

对于批量分配限制，您可以尝试类似

```
instances = Product.all.map do |product|
    ProductInstance.new {|instance| instance.user = user;instance.product = product}
end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-26T06:15:32.497

首先在您的`ProductInstance`模型中添加

```
attr_accessible :user, :product 
```

进而

```
instances = Product.all.map {|product| ProductInstance.create(:user => user, :product => product)} 
```

应该管用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T05:59:07.390

它也可以这样做

```
 instances = Product.all.map {|product| ProductInstance.new(:user => user, :product => product)} 
```

# actionscript-3 - AS3 补间基于当前 Y 位置的电影剪辑 Y 位置 - （变化）

> ID：11663169
> 
> 赞同：0
> 
> 时间：2012-07-26T05:50:15.067
> 
> 标签：actionscript-3

我目前正在研究一些导航，我想在点击时移动（和补间）影片剪辑的 y 位置。我在导航影片剪辑中有多个项目，因此我想根据影片剪辑当前的 Y 位置设置起始位置。目前我正在使用这种格式：

```
var myTween:Tween = new Tween(iconnav, "y", Strong.easeOut, 2206, 2001, 18, false);
myTween.stop(); 
```

是否可以将“2206”起始值修改为引用影片剪辑当前 y 位置的值。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T07:04:09.400

你的意思是`iconnav.y`？

# oracle11g - teradata：将数据选择到变量中

> ID：11663177
> 
> 赞同：0
> 
> 时间：2012-07-26T05:50:38.690
> 
> 标签：oracle11g, teradata

在甲骨文中，我们有

贴花 v_data 编号；

开始从部门选择 max(deptno) 到 v_data；

结尾;

我们是否有这种类型的 in terdata 优势，例如从表中选择数据到变量中

你能在terdata中给出等效的代码吗

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T06:02:25.347

在 teradata 中，您只能在存储过程中使用变量，而不能在存储过程之外的 Teradata SQl 语句中使用变量。

您可以将最大值加载到临时表中，并可以访问它以进行操作

# android - 在哪里检查edittext语法？

> ID：11663178
> 
> 赞同：0
> 
> 时间：2012-07-26T05:50:42.573
> 
> 标签：android, android-edittext

我需要一个帮助..我很困惑将这些代码用于检查edittext是否为空：

```
String input = editText.getText().toString();

if(input == null || input.trim().equals("")){
  Toast.makeText(context, "Sorry you did't type anything"), Toast.LENGTH_SHORT).show();
} 
```

我必须在哪里写这些代码？是在这些代码之间吗？

```
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.menuawal);
...
...
...

JmlAhliWarisAnakLK = (EditText) findViewById(R.id.JmlAhliWarisAnakLK);
JmlAhliWarisAnakPR = (EditText)findViewById(R.id.JmlAhliWarisAnakPR); 
```

或者在这个函数中 double sisa=0;??

```
public void cc() {

    int JmlWarisAnakPR = Integer.parseInt(JmlAhliWarisAnakPR.getText().toString());
    int JmlWarisAnakLK = Integer.parseInt(JmlAhliWarisAnakLK.getText().toString());
    int JmlHarta = Integer.parseInt(JmlHartaPeninggalan.getText().toString());
    double HasilSuami = 0;
    double HasilIstri = 0;
    double HasilAnakLK = 0;
    double HasilAnakPR = 0;
    double sisa = 0;

    } 
```

如果我错了，请纠正我.. :D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T05:56:08.967

据我说，你应该检查一些事件，比如它的登录屏幕，然后点击提交按钮。或其他明智的焦点更改它主要立即为用户提供他将字段留空的吐司。或者如果是其他情况，请提供更多信息以供您查询。谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T05:56:24.503

这取决于您何时要验证editText ..您可能有一些“提交”按钮，`EditText`因此在按钮上触发onClick事件后调用此代码..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T05:57:28.013

当您必须离开当前活动时放置输入验证代码，以转到另一个活动或保存输入详细信息。这是向用户推送错误消息最不烦人的地方。

另一种方法是验证焦点何时离开 EditText。但在这种情况下，错误通知应该更微妙（因此不那么烦人），比如将 EditText 的背景更改为浅红色。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T05:58:14.303

你的问题似乎并不清楚。您是否在问您需要在哪里放置空编辑文本的验证？如果这是您的问题，那么一般情况是在任何事件（例如按钮单击）期间进行验证。为您的按钮设置 onClickListener 并在您的 onclick 内部执行验证。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T05:59:45.820

```
String input = editText.getText().toString();

if(input == null || input.trim().equals("")){
  Toast.makeText(context, "Sorry you did't type anything"), Toast.LENGTH_SHORT).show();
} 
```

您上面的代码非常正确。每当您想从这些编辑文本中获取输入时，或者当您想保存这些值时，您都必须添加上述代码。如果编辑文本为空，则创建一个返回 true 的函数，以便您可以要求用户输入值

```
public boolean isETEmpty(){
String input = editText.getText().toString();

if(input == null || input.trim().equals("")){
  Toast.makeText(context, "Sorry you did't type anything"), Toast.LENGTH_SHORT).show();
 return true;    
}

   return false; // if not empty

 } 
```

调用此函数 每当您想使用来自 ET 的值时，如果此函数返回 true，则必须让用户输入值。比如按钮点击保存等

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-26T06:01:03.557

你在正确的轨道上

使用设置布局后，`setContentView`您需要添加您`EditText`做得很好的 's，如下所示。

```
 JmlAhliWarisAnakLK = (EditText)findViewById(R.id.JmlAhliWarisAnakLK);
 JmlAhliWarisAnakPR = (EditText)findViewById(R.id.JmlAhliWarisAnakPR); 
```

然后，您需要将从`EditText`'s 获得的值存储在某个变量中，

```
int JmlWarisAnakPR = Integer.parseInt(JmlAhliWarisAnakPR.getText().toString());
  ....
    .... 
```

存储值后，您可以调用一些方法来验证单击按钮时的输入（如果有）：

```
public void validateinput()
{
    if(input == null || input.trim().equals(""))
  {
     Toast.makeText(context, "Sorry you did't type anything"), Toast.LENGTH_SHORT).show();
   }
} 
```

# sql-server-2008 - 如何从 SSMS 运行 .sql 文件？

> ID：11663180
> 
> 赞同：0
> 
> 时间：2012-07-26T05:50:52.433
> 
> 标签：sql-server-2008, sql-server-2008-r2

嗨，我正在使用 SQL SERVER 2008 R2，我想在文件夹中执行预存储的 *.sql 文件并想在 SSMS 中运行。有可能吗？如果可能的话，有人可以帮助我了解如何实施吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T06:31:04.990

好的，如果我对你的问题很清楚。

1.  转到 cmd 并导航到您存储`.sql`文件的路径。
2.  在我的情况下，我已经在桌面上存储了带有`vish.sql`名称的文件。
3.  然后`sqlcmd -S DALVI1 -d cookbookdb -i vish.sql`

注意（这是我的配置 DALVI1 is my `ServerName` cookbookdb is `database name` vish.sql is `filename`）

根据您的配置进行修改。 [更多参考](http://www.codeproject.com/Tips/138983/Tip-Run-a-Transact-SQL-Script-SQL-File-From-the-Co)

![在此处输入图像描述](../Images/2180ee8883dbe9852c58fa7faf9116b3.png)

# eclipse - 是否有 Eclipse 重启事件？

> ID：11663183
> 
> 赞同：0
> 
> 时间：2012-07-26T05:50:56.333
> 
> 标签：eclipse

eclipse重启时是否触发了事件？如果有这样的事件，我怎样才能注册一个监听器呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T05:57:34.893

请参阅[IWorkbenchListener#preShutdown](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/ui/IWorkbenchListener.html)。

# html - 为什么此文本不在此框中？

> ID：11663184
> 
> 赞同：2
> 
> 时间：2012-07-26T05:51:17.740
> 
> 标签：html, css

[演示](http://tinkerbin.com/JeCiz2uq)

基本上，我正在尝试设置如下所示的内容：

![在此处输入图像描述](../Images/eaab3f4b846d9d41ce646a283ea8969e.png)

但是，由于某种原因，我的代码不起作用。最重要的是，在 teh tinkerbin 中，我的箭头图像甚至没有显示。不过它在我的电脑上运行良好，所以我不确定这是为什么。我也尝试了 jsfiddle，但它也没有在那里工作。

我可以让箭头在那里就好了，但我不能让文本垂直居中，更不用说当图像在那里时甚至进入灰色框。这就是让我感到困惑的地方。

HTML：

```
<div id="answers">
  <div id="arrowcenter"></div><div id="answerstext">Text Next To Arrow</div>

</div><!-- end grayAnswer --> 
```

CSS：

```
#answers {
width:220px;
height:50px;
background-color:#DDDDDD;
border-top:1px solid black;
border-bottom:1px solid black;
margin-top:20px;
 }

#arrowcenter {
width:71px;
height:31px;
background-image:url('http://fortmovies.com/brazil/arrow.png');
background-position:0 50%;
background-repeat:no-repeat;
height:100%;
margin-left:-140px; } 

#answerstext {
margin-top:0;
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T06:03:28.643

你的第一个箭头没有显示，因为你在`margin-left:140px;`使用`#arrow_center`

看我的[**小提琴**](http://jsfiddle.net/vFZF2/1/)

只需 1 个`<div>` **[小提琴](http://jsfiddle.net/vFZF2/4/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T06:47:13.997

这个答案的灵感来自于 Alien 先生使用较少标记（可选）的[**答案。**](https://stackoverflow.com/a/11663333/1195891)`id`

参考：[**jsFiddle**](http://jsfiddle.net/EDXS6/)

HTML：

```
<span>Masculino</span> 
```

CSS：

```
span {
    background-image:url('http://fortmovies.com/brazil/arrow.png');  /*  70px x 31px   */
    background-position: 3px 10px;
    background-repeat: no-repeat;
    background-color: #DDDDDD;
    border-top: 1px solid black;
    border-bottom: 1px solid black;
    font-family: Arial;
    font-weight: bold;
    font-size: 30px;
    padding: 8px 10px 8px 80px;
} 
```

* * *

状态更新：[**带有 Div 的 jsFiddle 用于导航栏方法**](http://jsfiddle.net/rHRnB/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T05:56:35.283

只需删除`margin-left:-140px;`并添加`float:left;`到`#arrowcenter`

**[工作演示](http://tinkerbin.com/cxAJaKCQ)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T05:56:00.853

`margin-left:-140px;`它移动到屏幕外的目的是什么`#arrowcenter`，删除它，你会没事的。

还将 div 设置为`display:inline-block`并适当地垂直对齐

```
#arrowcenter {
    ...
    display:inline-block; 
    vertical-align:middle;
} 
#answerstext {
    ...
    display:inline-block; 
   vertical-align:middle;
}​ 
```

[http://jsfiddle.net/XEk5d/](http://jsfiddle.net/XEk5d/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T05:57:07.180

使用标签而不是标签。

标签默认显示：block，防止不同s的内容相邻对齐。标签默认为 display:inline; 哪个更适合您的想法。作为替代方案，您还可以在您的 CSS 中设置这些显示规则。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-26T06:00:26.130

```
#answers {
width:220px;
height:50px;
background-color:#DDDDDD;
border-top:1px solid black;
border-bottom:1px solid black;
margin-top:20px;
}

#arrowcenter {
width:75px;
height:31px;
background-image:url('http://fortmovies.com/brazil/arrow.png');
background-position:0 50%;
background-repeat:no-repeat;
height:100%;
float: left;
} 
#answerstext {
margin-top: 16px;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-26T06:00:55.800

```
 Little bit changes that i made in just in your css as follow, and it is working...

#answers {
width:220px;
height:50px;
background-color:#DDDDDD;
border-top:1px solid black;
border-bottom:1px solid black;
margin-top:20px;
 }

#arrowcenter {
width:120px;
height:31px; float:left;
background-image:url('http://fortmovies.com/brazil/arrow.png');

background-position:0 50%;
background-repeat:no-repeat;
height:100%;
 } 

#answerstext {
margin-top:0; float:left; height:50px; line-height:50px;
 } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-26T06:03:04.850

***[工作演示](http://tinkerbin.com/xBzHqAyi)***

或者

使用这个 CSS

```
 #answers
    {
        width: 220px;
        height: 50px;
        background-color: #DDDDDD;
        border-top: 1px solid black;
        border-bottom: 1px solid black;
        margin-top: 20px;
    }
    #arrowcenter
    {
        width: 100px;
        height: 50px;
        background-image: url('http://fortmovies.com/brazil/arrow.png');
        background-position: left center;
        background-repeat: no-repeat;
        float:left;
    }
    #answerstext
    {
        line-height:50px;
        margin-left:10px;
        font-size:20px;
        font-family:Arial;
        font-weight:bolder; 
    } 
```

在 HTML 中使用它：-

```
<div id="answers">
    <div id="arrowcenter">
        &nbsp</div>
    <div id="answerstext">
        Masculino</div>
</div> 
```

我希望它会有所帮助！:)

# regex - 使用 sed 过滤多行 pcregrep 匹配

> ID：11663185
> 
> 赞同：3
> 
> 时间：2012-07-26T05:51:27.403
> 
> 标签：regex, sed

我有多个文本文件中的数据，如下所示：

```
1  DAEJ             X            -3120041.6620      -3120042.0476     -0.3856      0.0014               
                    Y             4084614.2137       4084614.6871      0.4734      0.0015               
                    Z             3764026.4954       3764026.7346      0.2392      0.0014               

                    HEIGHT            116.0088           116.6419      0.6332      0.0017      0.0017    8.0
                    LATITUDE     36 23 57.946407    36 23 57.940907   -0.1699      0.0013      0.0012   57.5      0.0012   62.9
                    LONGITUDE   127 22 28.131395   127 22 28.132160    0.0190      0.0012      0.0013    2.3      0.0013 
```

我想通过过滤器运行它，以便输出如下所示：

```
DAEJ: 36 23 57.940907, 127 22 28.132160, 116.6419 
```

我可以很容易地使用 grepWin 使用命名捕获通过搜索：

```
(?<site>\w\w\w\w+)<filler>\r\n\r\n<filler>(?<height>\-?\d+\.\d+)<filler>(?<heightRMS>\d+\.\d+)<filler>\r\n<filler>(?<lat>\-?\ *\d+\ +\d+\ +\d+\.\d+)<filler>(?<latRMS>\d+\.\d+)<filler>\r\n<filler>(?<lon>\-?\ *\d+\ +\d+\ +\d+\.\d+)<filler>(?<lonRMS>\d+\.\d+)<filler> 
```

并替换为（忽略未引用的组，我将在其他实现中使用它）：

```
$+{site}: $+{lat}, $+{lon}, $+{height} 
```

但当然，代价是通过 GUI 手动完成。我想知道是否有一种方法可以通过将 pcregrep 输出传输到 sed 以进行文本替换来编写脚本？我知道与`pcregrep -M`上面的多行正则表达式模式匹配的选项，并且在那之前我一直是成功的，但是我被问题的`sed`结尾所困扰。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T06:30:16.807

我将`awk`用来处理您的文本文件：

```
awk '$1 ~ /^[0-9]+$/ { printf "%s: ", $2 } $1 == "HEIGHT" { height = $3 } $1 == "LATITUDE" { printf "%s %s %s, ", $2, $3, $4 } $1 == "LONGITUDE" { printf "%s %s %s, %s\n", $5, $6, $7, height }' file.txt 
```

为了便于阅读，在多行上拆分：

```
$1 ~ /^[0-9]+$/ { 
    printf "%s: ", $2
}

$1 == "HEIGHT" {
    height = $3
}

$1 == "LATITUDE" {
    printf "%s %s %s, ", $2, $3, $4
}

$1 == "LONGITUDE" {
    printf "%s %s %s, %s\n", $5, $6, $7, height
} 
```

结果：

```
DAEJ: 36 23 57.946407, 127 22 28.132160, 116.6419 
```

* * *

**编辑：**

将以下代码放入名为 的文件中`script.awk`：

```
$3 == "X" {
    printf "%s: ", $2
}

$1 == "HEIGHT" {
    height = $3
}

$1 == "LATITUDE" {
    if ($2 == "-" && $6 == "-") { printf "-%s %s %s, ", $7, $8, $9 }
    else if ($2 == "-") { printf "%s %s %s, ", $6, $7, $8 }
    else if ($5 == "-") { printf "-%s %s %s, ", $6, $7, $8 }
    else { printf "%s %s %s, ", $5, $6, $7 }
}

$1 == "LONGITUDE" {
    if ($2 == "-" && $6 == "-") { printf "-%s %s %s, %s\n", $7, $8, $9, height }
    else if ($2 == "-") { printf "%s %s %s, %s\n", $6, $7, $8, height }
    else if ($5 == "-") { printf "-%s %s %s, %s\n", $6, $7, $8, height }
    else { printf "%s %s %s, %s\n", $5, $6, $7, height }
} 
```

像这样运行：

```
awk -f script.awk file.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T08:23:26.417

这可能对您有用（GNU sed）：

```
sed '/^DAEJ/,/^\s*LONGITUDE/!d;/HEIGHT/{s/^\s*\S*\s*\S*\s*\(\S*\).*/\1/;h};/LATITUDE/{s/^\s*\(\S*\s*\)\{4\}\(\(\S*\s*\)\{2\}\S*\).*/\2/;H};/LONGITUDE/!d;s/^\s*\(\S*\s*\)\{4\}\(\(\S*\s*\)\{2\}\S*\).*/ \2/;H;g;y/\n/,/;s/\([^,]*\),\(.*\)/DAEJ: \2, \1/' file1 file2 filen 
```

# java - 全球信用等级

> ID：11663186
> 
> 赞同：-2
> 
> 时间：2012-07-26T05:51:33.643
> 
> 标签：java

有人可以帮我弄这个吗？

```
GlobalCredit credit1 = new GlobalCredit().getRandom();
GlobalCredit rewardCards = new GlobalCredit(); 
```

这就是课堂。

[http://www.cse.yorku.ca/common/type/api/type/lib/GlobalCredit.html](http://www.cse.yorku.ca/common/type/api/type/lib/GlobalCredit.html)

当我打印 credit1 和/或 rewardCards 时，它们每次都会输出一个随机数量。奖励卡不应该是空的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T06:08:15.663

看看类的`toString()`方法`GlobalCredit`。

```
System.out.println(credit1) 
```

以上语句打印`credit1.toString()`

根据文档

```
the string "Global Credit Company [title]: CARDS=xx" , where title is the GCC's name and xx is the actual number of cards in the collection. 
```

# java - 为什么我的 JPanel 上的滑动效果有时会滞后？

> ID：11663193
> 
> 赞同：2
> 
> 时间：2012-07-26T05:52:08.357
> 
> 标签：java, swing, lag

当有人将鼠标悬停在特定矩形区域上时，我正在`JPanel`使用 a更改 a 的边界`Timer`以获得滑动效果，这按预期工作。中有按钮，`JPanel`它们有不同的`MouseEvent`行为。但*有时*它开始滞后或滑动非常缓慢。请，任何人都可以建议我该怎么做，以确保它每次都表现良好？

**编辑：**

有`buttonsPanel`在`button`里面。`buttonsPanel`被添加到`JLayeredPane`边界为 的 a 中`rect`。当 JLayeredPane 或 JButton`button`为`hovered`鼠标事件时触发。鼠标事件然后触发计时器`slide the buttonsPanel`并将其带到视图中。

```
class MyActionListener implements ActionListener {

    private static final int frames = 50;
    int count = 0;
    private final Timer timer = new Timer(1, this);

    public void start() {
        timer.start();
    }

    @Override
    public void actionPerformed(ActionEvent ae) {
        if (count >= frames) {
            timer.stop();
        } else {
            count = count + 1;
            buttonsPanel.setBounds(hidden_width - hidden_width * count / frames, 0, hidden_width, frameHeight);
        }
    }
}

class MyMouseListener extends MouseAdapter {

    private MyActionListener timerListener;

    @Override
    public void mouseEntered(final MouseEvent event) {

        final Color color = new Color(50, 50, 50);
        if (event.getSource() instanceof JButton) {
            final JButton button = (JButton) event.getSource();
            button.setBackground(color);
            buttonsPanel.setVisible(true);
        } else if (!buttonsPanel.isVisible()) {
            buttonsPanel.setVisible(true);
            timerListener = new MyActionListener();
            timerListener.start();
        }
    }

    @Override
    public void mouseExited(final MouseEvent event) {
        Point point = new Point(0, 0);
        if (event.getSource() instanceof JButton) {
            final JButton button = (JButton) event.getSource();
            point = button.getLocation();
            button.setBackground(Windows8GUI.color);
        }
        Rectangle rect = new Rectangle(0, 0, hidden_width, frameHeight);
        if (!rect.contains(point.x + event.getX(), point.y + event.getY())) {
            buttonsPanel.setVisible(false);
            buttonsPanel.setBounds(0, 0, hidden_width, frameHeight);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T09:13:13.503

主要问题是您假设您可以控制绘画引擎。事实上，绘画引擎不受操作系统的支配。这意味着您可以随心所欲地上下跳跃，但是在操作系统和 Java 的绘图引擎准备好之前，什么都不会发生。

事实上，如果你连续快速地重复调用 repaint，你会发现自己的请求淹没了绘制引擎，进一步减慢了它的速度。

虽然不能解决整个问题，但看看[TimingFramework](http://java.net/projects/timingframework)或[Trident](http://kenai.com/projects/trident/pages/Home)会让你的生活变得更加简单。

它们是“动画”框架，旨在消除猜测并让您的生活更轻松。我个人使用`TimingFramework`我所有的动画并且效果很好。

时间框架随着时间的推移以 % 的速度工作。也就是说，您给它一个周期的时间，框架将根据它们在该周期中的距离返回一个 % 值。您可以应用插值，允许您影响动画的一部分播放速度。

`Trident`它还被设计为提供代表您调用其他方法的方法，因此它可以根据您提供的值为您设置按钮窗格的边界。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T09:25:04.467

> 事实上，如果你连续快速地重复调用 repaint，你会发现自己的请求淹没了绘制引擎，进一步减慢了它的速度。

我认为这是真正的问题。尝试将计时器事件之间的延迟从 1 增加到 10-50，它应该会运行得更好。

对于构建这些（以及许多其他）效果的许多方法，我只能推荐 Book [Filthy Rich Clients](http://filthyrichclients.org/)。在此页面上，您还可以找到书中处理的这些效果的许多示例。

# grails - Grails：如何从控制器中检索 UserDetails 对象？

> ID：11663201
> 
> 赞同：4
> 
> 时间：2012-07-26T05:53:04.327
> 
> 标签：grails, spring-security

我正在使用 Grails 1.3.7。我有一个在身份验证期间`UserDetails`创建的自定义对象`customUserDetailsService`。我假设这个自定义`UserDetails`对象然后存储在会话中的某个地方。但是，我找不到如何检索它。

我以为`SecurityContextHolder.getContext().getAuthentication().getDetails()`会这样做，但返回类型的对象：`org.springframework.security.web.authentication.WebAuthenticationDetails`，而不是我的自定义 UserDetails。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T06:03:37.987

我正在使用 2.0.4 和 spring 安全插件，看起来你正在使用插件？

如果是这样尝试：

```
// Inject 
def springSecurityService

// Action
def index() { 
  UserDetails currentUser = springSecurityService.principal 
} 
```

# html - 重新加载页面后留在右侧标签

> ID：11663203
> 
> 赞同：1
> 
> 时间：2012-07-26T05:53:18.393
> 
> 标签：html, css, tabs

所以我想弄清楚为什么我的页面在刷新后将我加载回默认选项卡。

即使页面刷新/重新加载后，我也想留在当前选项卡中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T06:09:57.707

这很可能是由于您的标签被加载到客户端。

这意味着每次您切换到不同的选项卡时，您实际上并没有提出新的请求，只是显示和隐藏不同的选项卡。如果您重新加载选项卡，它将默认返回到第一个选项卡。

解决此问题的最简单和最常见的方法是使用 URL 哈希来跟踪用户的活动选项卡。然后，当您在每次请求后加载选项卡时，可以检查 URL 中的哈希，如果存在，则显示相应的选项卡。

更多信息在这里：[http ://www.w3schools.com/jsref/prop_loc_hash.asp](http://www.w3schools.com/jsref/prop_loc_hash.asp)

希望这可以帮助 ：）

# ios - ios 如何将代表视频的NSData保存到相机胶卷？

> ID：11663204
> 
> 赞同：1
> 
> 时间：2012-07-26T05:53:19.360
> 
> 标签：ios, video, camera, save, nsdata

我有一个包含视频数据的 NSData 对象。我想把它保存到相机胶卷。我怎样才能做到这一点？

谢谢

# tizen - 动画在 tizen 中不起作用

> ID：11663210
> 
> 赞同：2
> 
> 时间：2012-07-26T05:54:09.953
> 
> 标签：tizen, tizen-web-app

我的动画在 Tizen 模拟器中不起作用。相同的代码在谷歌浏览器中运行良好。我正在使用带有 Tizen 1.0 的 jquery 插件、html5、css3。有任何可用的 API 吗？请帮忙。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-18T05:50:14.180

标准关键帧在 Tizen 中不起作用尝试使用 webkit-keyframes

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-02T16:51:19.563

正如 Chaitanya 所说，标准的 CSS 关键帧不起作用，Webkit 的关键帧起作用。您可以同时定义两者，浏览器将选择可以使用的版本。VelocityJS 也可以在 TIZEN 上使用。

根据我的经验，TIZEN 并非支持所有 CSS 功能，因此根据您在 CSS 块中使用的内容，我希望仍然可以阻止 Web 应用程序运行。基本上，您不能期望来自现代流行浏览器的代码仅在 TIZEN 的基于 webkit 的浏览器上运行。它可能需要一个干净的重新实现。

# java - 无法使用 JNLP 保存

> ID：11663215
> 
> 赞同：0
> 
> 时间：2012-07-26T05:54:32.587
> 
> 标签：java, applet, jnlp

我正在尝试在本地系统中使用 JNLP 保存小程序，但出现异常

```
Exception in thread "AWT-EventQueue-2" java.lang.NullPointerException 
```

下面是片段

```
public void genericDocSave() {
                System.out.println("in genericDocSavedfdd");
                 FileSaveService fss; 
                    FileOpenService fos; 

                    try { 
                        fos = (FileOpenService)ServiceManager.lookup("javax.jnlp.FileOpenService"); 
                        fss = (FileSaveService)ServiceManager.lookup 
                                                   ("javax.jnlp.FileSaveService"); 
                    } catch (Exception e) { 
                        fss = null; 
                        fos = null; 
                    } 

                    if (fss != null && fos != null) { 
                        try { 
                            // get a file with FileOpenService 
                            FileContents fc = fos.openFileDialog(null, null); 
                            // one way to save a file 
                            FileContents newfc = fss.saveFileDialog(null, null, 
                            fc.getInputStream(), "C:\\abc.tiff"); 

                        } catch (Exception e) { 
                            e.printStackTrace(); 
                        } 
                    } 
```

# android - 引起：java.lang.ClassCastException

> ID：11663218
> 
> 赞同：0
> 
> 时间：2012-07-26T05:54:40.360
> 
> 标签：android, android-intent

描述：

当我单击标题栏上的按钮时，我得到了 ClassCast 异常。我的源代码如下：

**我的活动代码：**

```
public void onClick(View v) {

    if (v.getId() == R.id.about_us) {

        if (isInternetConnected()) {
            System.out.println("about us");
            startActivity(new Intent(GridDisplayActivity.this, AboutUsActivity.class));
        } else {
            setAlertBox("No Internet Connection");
        }
    }
    if (v.getId() == R.id.hard_copy) {

        if (isInternetConnected()) {
            System.out.println("hard copy");
            startActivity(new Intent(GridDisplayActivity.this,HardCopyActivity.class));
        } else {
            setAlertBox("No Internet Connection");
        }
    }

} 
```

**自定义应用程序代码：**

```
public class CustomApplication extends Application {

private Map<String, List<CustomAsyncTask<?,?,?>>> mActivityTaskMap;

public CustomApplication() {
    mActivityTaskMap = new HashMap<String, List<CustomAsyncTask<?,?,?>>>();
}

public void removeTask(CustomAsyncTask<?,?,?> task) {
    for (Entry<String, List<CustomAsyncTask<?,?,?>>> entry : mActivityTaskMap.entrySet()) {
        List<CustomAsyncTask<?,?,?>> tasks = entry.getValue();
        for (int i = 0; i < tasks.size(); i++) {
            if (tasks.get(i) == task) {
                tasks.remove(i);
                break;
            }
        }

        if (tasks.size() == 0) {
            mActivityTaskMap.remove(entry.getKey());
            return;
        }
    }
}

public void addTask(Activity activity, CustomAsyncTask<?,?,?> task) {
    String key = activity.getClass().getCanonicalName();
    List<CustomAsyncTask<?,?,?>> tasks = mActivityTaskMap.get(key);
    if (tasks == null) {
        tasks = new ArrayList<CustomAsyncTask<?,?,?>>();
        mActivityTaskMap.put(key, tasks);
    }

    tasks.add(task);
}

public void detach(Activity activity) {
    List<CustomAsyncTask<?,?,?>> tasks = mActivityTaskMap.get(activity.getClass().getCanonicalName());
    if (tasks != null) {
        for (CustomAsyncTask<?,?,?> task : tasks) {
            task.setActivity(null);
        }
    }
}

public void attach(Activity activity) {
    List<CustomAsyncTask<?,?,?>> tasks = mActivityTaskMap.get(activity.getClass().getCanonicalName());
    if (tasks != null) {
        for (CustomAsyncTask<?,?,?> task : tasks) {
            task.setActivity(activity);
        }
    }
  } 
```

}

**我得到的日志是：**

```
07-26 11:06:10.567: E/AndroidRuntime(381):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
07-26 11:06:10.567: E/AndroidRuntime(381):  at dalvik.system.NativeStart.main(Native Method)
07-26 11:06:10.567: E/AndroidRuntime(381): Caused by: java.lang.ClassCastException: android.app.Application cannot be cast to com.bespoken.android.provider.CustomApplication
07-26 11:06:10.567: E/AndroidRuntime(381):  at com.bespoken.android.GridDisplayActivity.onSaveInstanceState(GridDisplayActivity.java:567)
07-26 11:06:10.567: E/AndroidRuntime(381):  at android.app.Activity.performSaveInstanceState(Activity.java:1114)
07-26 11:06:10.567: E/AndroidRuntime(381):  at android.app.Instrumentation.callActivityOnSaveInstanceState(Instrumentation.java:1184)
 07-26 11:06:10.567: E/AndroidRuntime(381):     at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2469)
 07-26 11:06:10.567: E/AndroidRuntime(381):     ... 12 more 
```

请指导我。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T06:11:58.413

不要这样做`(CustomApplication)getApplication()`，而是在类中有一个`static` `CustomApplication`字段，例如，将其设置在to中，并在要访问s 方法的任何地方使用它。`mInstance``CustomApplication``CustomApplication.onCreate``this``CustomApplication'`

```
class CustomApplication extends Application
{

private static CustomApplication mInstance;

@Override
void onCreate() {
    super.onCreate();
    mInstance = this;
}

public static CustomApplication getInstance() { return mInstance; }

public void mySpecificMethod() { .... }

} 
```

然后你从你需要的地方打电话：

```
CustomApplication.getInstance()->mySpecificMethod() 
```

# android - 从文件服务器下载随机图像

> ID：11663221
> 
> 赞同：1
> 
> 时间：2012-07-26T05:54:47.427
> 
> 标签：android, imageview, download

这是我的尝试。我的文件托管在我自己的服务器上，主要是 JPG 文件。我正在尝试将它们下载到我的应用程序中。我未能将这些图像生成到我的应用程序中。我遵循此博客[http://getablogger.blogspot.gr/2008/01/android-download-image-from-server-and.html中的指南](http://getablogger.blogspot.gr/2008/01/android-download-image-from-server-and.html)

我的 xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
>
<TextView 
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:text="Hello World, HTTPImage load test"
/>
<Button android:id="@+id/get_imagebt"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:text="Get an image"
android:layout_gravity="center"
/> 
<ImageView android:id="@+id/imview"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_gravity="center"
/>
</LinearLayout> 
```

编码

```
package com.example.downloadimages;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import java.io.IOException;
import java.io.InputStream;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.HashMap;
import java.util.Map;
import java.util.Random;

import android.app.Activity;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ImageView;

public class MainActivity extends Activity {

    ImageView imView;
    String imageUrl="http://myfilehosting.com/";
    Random r;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        r= new Random();

        Button bt3= (Button)findViewById(R.id.get_imagebt);
        bt3.setOnClickListener(getImgListener);
        imView = (ImageView)findViewById(R.id.imview);
    }

    View.OnClickListener getImgListener = new View.OnClickListener()
    {

        public void onClick(View view) {
        // TODO Auto-generated method stub

        //i tried to randomize the file download, in my server i put 4 files with name like
        //jpg0.jpg, jpg1.jpg, jpg2.jpg so different file is downloaded in button press
        int i =r.nextInt()%4;
        downloadFile(imageUrl+i+".jpg");

        }

        Bitmap bmImg;
        void downloadFile(String fileUrl){
        URL myFileUrl =null; 
        try {
        myFileUrl= new URL(fileUrl);
        } catch (MalformedURLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        }
        try {
        HttpURLConnection conn= (HttpURLConnection)myFileUrl.openConnection();
        conn.setDoInput(true);
        conn.connect();
        int length = conn.getContentLength();
        int[] bitmapData =new int[length];
        byte[] bitmapData2 =new byte[length];
        InputStream is = conn.getInputStream();

        bmImg = BitmapFactory.decodeStream(is);
        imView.setImageBitmap(bmImg);
        } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        }

};
};
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T06:04:52.943

您的代码有几个问题：

*   您正在尝试从 UI 线程执行网络操作（从远程服务器下载文件）。 **网络操作必须从另一个线程执行**。否则 - 抛出异常。

从另一个线程启动代码的方法之一是：

```
new Thread(new Runnable() {

        @Override
        public void run() {
            downloadFile(imageUrl+i+".jpg");
        }
    }).start(); 
```

更好的方法是使用 AsyncTask 或 IntentService （它们也在单独的线程上执行代码）

*   第二件事 - 你不能只创建具有输入流大小的 int 数组：如果图像太大，它可能会失败。尝试将下载中断为固定大小的段（例如每个段 2058 字节），例如：

    ```
    private HttpURLConnection conn;
    private InputStream stream;
    private FileOutputStream out;

    private double fileSize;
    private double downloaded;

    public void downloadFile(String fileURL, String fileName) {
    try {

        conn = (HttpURLConnection) new URL(fileURL).openConnection();
        fileSize = conn.getContentLength();
        File file = new File(fileName);

        out = new FileOutputStream(file);
        conn.connect();

        stream = conn.getInputStream();

        while (status == DOWNLOADING) {
            byte buffer[];

            if (fileSize - downloaded > MAX_BUFFER_SIZE) {
                buffer = new byte[MAX_BUFFER_SIZE];
            } else {
                buffer = new byte[(int) (fileSize - downloaded)];
            }
            int read = stream.read(buffer);

            if (read == -1) {

                out.close();
                if (conn != null) {
                    conn.disconnect();
                }

                break;
            }

            out.write(buffer, 0, read);
            downloaded += read;
        }

    } catch (Exception e) {
        Log.e("downloadFile():", e.getMessage());
        if (conn != null) {
            conn.disconnect();
        }
    }

    } 
    ```

# cocoa - 为什么不想要图层支持的视图

> ID：11663223
> 
> 赞同：4
> 
> 时间：2012-07-26T05:54:53.300
> 
> 标签：cocoa, core-animation, nsview

我主要来自 iOS 开发。

为什么你不想让你所有的 NSView 层都被支持呢？是否有某种性能影响？与每个 UIView 都支持层的 iOS 有什么不同？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T13:02:51.417

在 iOS 上，图形硬件基于平铺渲染。layer-backed-view 配置与硬件将内容合成到屏幕的方式非常匹配。

在 Mac OS 上，硬件不使用平铺渲染。当您请求支持层的视图时，您会增加程序的内存占用。在 Mac OS 上，屏幕通常是双缓冲的，因此任何时候都有 2 个屏幕副本。我相信图层支持的视图也是双缓冲的（这点可能是错误的），所以你使用了更多的内存。当您打开支持图层的视图时，您会递归地为视图的所有子视图执行此操作。如果你的视图有很多重叠的子视图，你可以提高内存需求。

我不知道，但我怀疑，在 Mac OS 中，图层支持的视图比非图层支持的视图渲染速度稍慢。渲染性能有很多因素，因此可能取决于具体情况。

我建议您自己进行一些测试，包括视频内存使用和实际性能。Xcode 和仪器中的新 OpenGL 工具将让您跟踪视频内存使用情况。（它与主存储器不同。）

# javascript - 在哪里可以找到 Chrome 扩展程序崩溃报告？

> ID：11663225
> 
> 赞同：3
> 
> 时间：2012-07-26T05:55:08.427
> 
> 标签：javascript, google-chrome, google-chrome-extension, crash

注意：这是*扩展程序*崩溃报告，而不是 Chrome 本身的崩溃报告

我只在 javascript 中开发了一个 chrome 扩展，但它有时会崩溃。我已经 grep 我的目录并没有找到任何东西，谷歌搜索也没有帮助。

# asp.net-mvc-3 - 如何将历史数据等数据绑定到 MVC3 中的滚动条？

> ID：11663227
> 
> 赞同：0
> 
> 时间：2012-07-26T05:55:44.067
> 
> 标签：asp.net-mvc-3, c#-4.0

大家好，我有一张看起来像这样的桌子

```
 BugHistory
         -------------------------------------
         BugHIstoryId|BugID|FixedBy|AssignedTo|Resolution
             1       | 4   |Null   |Anil      |There Is a Bug
             2       | 4   |Anil   |Raghu     |Checked its not a bug
             3       | 4   |Null   |Anil      |That is a bug sending You Reference
             4       | 5   |       |Sravan    | 
```

我想将此数据绑定到喜欢聊天历史记录的名称和分辨率我想显示这个喜欢聊天..它应该有一个滚动所以我怎么能做到这一点任何想法请..我用谷歌搜索如何做到这一点没有得到任何与此有关的事情

```
 It Should look like this

        Anil:Resolution
        Raghu:Resolution
        Anil:Resolution 
```

任何人都可以帮助我如何解决这个问题或任何想法，如果没有解决方案或新的BUGID首先分配给新用户，则不应向新用户显示滚动，当有历史构建时，滚动应该被填充

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T08:05:55.150

这与服务器端无关。一切都与风格有关。这是您的视图应该是什么样的。设置为外部 div 的高度用于演示目的。但这`overflow-y: auto`是你需要做的。

确保不要使用下面示例中的内联样式。

```
@model IEnumerable<BugHistory>
<div style="height: 300px; overflow-y: auto;">
    <div>
        @foreach(var item in Model) {
            @Html.DisplayFor(modelItem => item.AssignedTo)
            @: :
        @Html.DisplayFor(modelItem => item.Resolution)
            <br />
        }
    </div>
</div> 
```

# javascript - 视频通过javascript隐藏但已经开始播放（自动播放模式），即使它不可见？

> ID：11663230
> 
> 赞同：0
> 
> 时间：2012-07-26T05:55:52.883
> 
> 标签：javascript, jquery, video, embed, autoplay

我想找到一种简单的方法，通过隐藏它们并在单击预览图像后立即使它们可见，从而在我的博客中为我的视频获取自定义预览图像。用户 Dominic Green 帮助我开始使用以下代码。问题是：视频已经在页面加载后立即以自动播放模式开始播放（即使它被隐藏），但我希望在单击预览图像后立即开始自动播放......

这是我的代码：

```
<!doctype html> 
```

```
<script type="text/javascript">
$(window).load(function(){
$(".video").hide();

$(".loader").click(function(){
$(this).hide();
$(this).parent().find(".video").show();
});
}); 
```

```
 #container .post .postimg img{
        width:100%;
        height:auto;
        }
    #container .post .postvideo{
        position:relative;
        display:block;
        width:100%;
        height:430px;
        background-color:#0F3;
        }
        #container .post .postvideo .con{
            position:absolute;
            top:0;
            left:0;
            height:100%;
            width:100%;
            z-index:1;
            }
        #container .post .postvideo .video{
            background-color:#C00;
            }
            #container .post .postvideo .video iframe{
                width:100%;
                height:100%;
                }
        #container .post .postvideo .loader{
            background-color:#06C;
            }
        #container .post .postvideo .loader img{
            width:100%;
            height:100%;
            } 
```

```
<div class="post">
    <div class="postvideo">
        <div class="con video">
            <iframe width="420" height="315" src="http://www.youtube.com/embed/v_MVwUqrwDc?rel=0&autoplay=1" frameborder="0" allowfullscreen></iframe>
        </div>
        <div class="con loader">
          <img src="http://cache2.allpostersimages.com/p/LRG/27/2728/9CKND00Z/poster/gulin-darrell-pansy-flowers-floating-in-bird-bath-with-dew-drops-sammamish-washington-usa.jpg" width="758" height="388">
      </div>
    </div>
</div><!--! end of .post -->

<div class="post">
    <div class="postvideo">
        <div class="con video">
        <iframe src="http://player.vimeo.com/video/29017795?title=0&amp;byline=0&amp;portrait=0&amp;color=a80101&amp;autoplay=1" width="460" height="259" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>
        </div>
        <div class="con loader">
          <img src="http://cache2.allpostersimages.com/p/LRG/27/2728/9CKND00Z/poster/gulin-darrell-pansy-flowers-floating-in-bird-bath-with-dew-drops-sammamish-washington-usa.jpg" width="758" height="388">
      </div>
    </div>
</div><!--! end of .post --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T06:04:23.237

您将需要使用，

[YouTube JavaScript 播放器 API](https://developers.google.com/youtube/js_api_reference/)

或者，

把它作为 url ( `autoplay off`)

```
http://www.youtube.com/embed/v_MVwUqrwDc?rel=0&autoplay=0" 
```

并单击按钮将 src 更改为

```
http://www.youtube.com/embed/v_MVwUqrwDc?rel=0&autoplay=1" 
```

这不会像 js api 那样流畅，但会成功。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T06:37:41.663

如果您不想使用 youtube API 或 vimeo API，我建议您将 iframe src 设置为空，并在单击加载程序 div 时设置它。所以

我会用

```
<iframe width="420" height="315" src="" frameborder="0" allowfullscreen></iframe> 
```

和

```
<div class="con loader" data-iframe-src="http://www.youtube.com/embed/v_MVwUqrwDc?rel=0&autoplay=1"> 
```

然后在 js 代码的点击事件中，只需将 data-iframe-src 值设置为 iframe src：

```
$(this).parent().find(".video iframe").attr("src", $(this).attr("data-iframe-src")); 
```

# java - 选择正确的集合

> ID：11663234
> 
> 赞同：2
> 
> 时间：2012-07-26T05:56:14.227
> 
> 标签：java, collections, hashmap, multimap

我有一种情况，我在一个房间里有一组玩家，每个玩家手中都会有一组牌。

```
HashMap<Integer,ArrayList<Integer>> useridToCardsinTheirHand = new HashMap<Integer, ArrayList<Integer>>(); 
```

任何玩家都可以“拨打电话”。我需要检查进行“跟注”的玩家是否具有最低价值（总牌的最低价值）。

为了继续上述逻辑，我再次使用 LinkedhashMap

```
private static LinkedhashMap<Integer,Integer> useridTotalRank = new LinkedhashMap<Integer,Integer>(); 
```

如果值之间存在平局，则将进行优先级算法。

我在所有逻辑中都使用 hashMap。

自从我使用 HashMaps 以来，我遇到了问题。逻辑流程很笨拙。

我打算重新设计。我正在通过 MultiMap ，但仍然预计会出现类似的问题。我可以对要使用的集合类型提出建议吗？

我试过的伪代码是::

```
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Collection;
import java.util.Collections;
import java.util.Comparator;
import java.util.HashMap;
import java.util.HashSet;
import java.util.Iterator;
import java.util.LinkedHashMap;
import java.util.LinkedList;
import java.util.List;
import java.util.Map;
import java.util.Set;
import java.util.Map.Entry;

public class NewCalling {

    static HashMap<Integer,ArrayList<Integer>> useridToPointsmap = new HashMap<Integer, ArrayList<Integer>>();
    lamposHAshMap hashmapsort = new lamposHAshMap();
    private static HashMap<Integer,Integer> useridTotalRank = new HashMap<Integer,Integer>();

    private static int jokercard = 0x27;
    private static int closedjokercard =0x25 ;
    private static List<Integer> faceCards = new ArrayList<Integer>();

    @SuppressWarnings("unchecked")
    public static void main(String args[]) {

        /**
         * Assuming the calling is made and the Player id is hard Coded
         */
        boolean callingflag = true;
        int callinguserid = 2;

        /*************** Preparing the information which will be given by the ********/
        ArrayList<Integer> cardsArray1 = new ArrayList<Integer>(); 
        ArrayList<Integer> cardsArray2 = new ArrayList<Integer>(); 
        ArrayList<Integer> cardsArray3 = new ArrayList<Integer>(); 
        ArrayList<Integer> cardsArray4 = new ArrayList<Integer>(); 

        cardsArray1.add(0x01);
        cardsArray1.add(0x1A);
        //cardsArray1.add(0x33);

        cardsArray2.add(0x21);
        cardsArray2.add(0x03);
        cardsArray2.add(0x32);

        cardsArray3.add(0x21);
        cardsArray3.add(0x03);
        cardsArray3.add(0x32);

        cardsArray4.add(0x01);
        cardsArray4.add(0x02);
        cardsArray4.add(0x32);
        cardsArray4.add(0x31);

        useridToPointsmap.put(1,cardsArray1);
        useridToPointsmap.put(2,cardsArray2);
        useridToPointsmap.put(3,cardsArray3);
        useridToPointsmap.put(4,cardsArray4);

        faceCards.add(0,10);
        faceCards.add(1,11);
        faceCards.add(2,12);
        faceCards.add(3,13);

        /*************** Preparing the information which will be given by the ********/

        if(callingflag)
        {
            int calledUserTp = totalPointsByUserid(callinguserid,jokercard);
            System.out.println("Total Points of the User Who has made a Call is ::"+calledUserTp);

            HashMap<Integer,Integer> useridTotalRankMap = totalPointsforEveryUser(jokercard);
            LinkedHashMap<Integer,Integer> useridTotalRankMapSorted = new LinkedHashMap<Integer, Integer>();
            useridTotalRankMapSorted = (LinkedHashMap<Integer, Integer>) sortByComparator(useridTotalRankMap);
            for(Map.Entry<Integer, Integer> entry :useridTotalRankMapSorted.entrySet())
            {
                System.out.println( entry.getKey() +"----"+entry.getValue());
                if(entry.getKey() == callinguserid )
                {
                    System.out.println( "GOOD CALL");
                    break;
                }

            }

        }
    }

    /** Gives the Cards Rank    **/
    static int getCardRank(int Cardhexvalue)
    {
        int rank = Cardhexvalue & 15;
        return rank;

    }
    /** Gives the Cards Suit    **/

    static int getCardSuit(int Cardhexvalue)
    {
        int suit = (Cardhexvalue>>4);
        return suit;

    }
    // METHODS REQUIRED 
    private static HashMap<Integer,Integer> totalPointsforEveryUser(int jokerCardVal)
    {
        for(Map.Entry<Integer, ArrayList<Integer>> entry :useridToPointsmap.entrySet())
        {
            int sum = 0;
            int playerId = entry.getKey();
            ArrayList<Integer> cardsList = entry.getValue();

            for (Integer s : cardsList)
            {
                if (getCardRank(s) != getCardRank(jokerCardVal)) {
                    if (faceCards.contains(s))
                    {
                        sum += 10;
                    }
                    else
                    {
                        sum += getCardRank(s);
                    }
                }             
            }
            useridTotalRank.put(playerId, sum);

        }

        return useridTotalRank;
    }

    private static int totalPointsByUserid(int userId,int jokerCardVal)
    {
        ArrayList<Integer> cardsList = useridToPointsmap.get(userId);
        int sum = 0;
        for (Integer s : cardsList)
        {

            if (getCardRank(s) != getCardRank(jokerCardVal)) {
                if (faceCards.contains(s))
                {
                    sum += 10;
                }
                else
                {
                    sum += getCardRank(s);
                }
            }            
        }   
        return sum;
    }

    @SuppressWarnings("unchecked")
    private static Map sortByComparator(Map unsortMap) {

        List list = new LinkedList(unsortMap.entrySet());

        //sort list based on comparator
        Collections.sort(list, new Comparator() {
            public int compare(Object o1, Object o2) {
                return ((Comparable) ((Map.Entry) (o1)).getValue())
                .compareTo(((Map.Entry) (o2)).getValue());
            }
        });

        //put sorted list into map again
        Map sortedMap = new LinkedHashMap();
        for (Iterator it = list.iterator(); it.hasNext();) {
            Map.Entry entry = (Map.Entry)it.next();
            sortedMap.put(entry.getKey(), entry.getValue());
        }
        return sortedMap;
    }   

    private static boolean checkForNoDuplicates(HashMap<Integer, Integer > useridTotalRankMapSorted)
    {
        Collection<Integer> valuesList = useridTotalRankMapSorted.values();
        Set<Integer> valuesSet = new HashSet<Integer>(useridTotalRankMapSorted.values());

        System.out.println("-----"+ valuesList.size() +"----"+valuesSet.size());
        if(valuesList.size() == valuesSet.size())
        {
            return true;
        }
        else
            return false;

    }

    // Stack

    public static HashMap getDuplicateValues(HashMap in)
    {
        // Clone input HashMap because we're removing stuff from it
        in = (HashMap)in.clone();
        HashMap rval = new HashMap();
        Object[] keys = in.keySet().toArray();

        // iterate through all keys
        for(int x=0;x<keys.length;x++) {
            Object value = in.get(keys[x]);
            in.remove(keys[x]);
            // if value is in input HashMap, store it in duplicate HashMap because it has another value
            if(in.containsValue(value)) {
                rval.put(keys[x],value);
            }
            // if value is in duplicate HashMap, store it also because it HAD another value earlier
            if(rval.containsValue(value)) {
                rval.put(keys[x],value);
            }
        }

        return(rval);
    }

    public static HashMap<Object, ArrayList<Object>> gettingTheDuplicates(HashMap map) {
        HashMap<Object, ArrayList<Object>> newMap =  new HashMap<Object, ArrayList<Object>>();

        Set<Entry> set = map.entrySet();
        for(Entry entry : set) {
            ArrayList list = new ArrayList();
            if(newMap.containsKey(entry.getValue())) {
                list=newMap.get(entry.getValue());
            }
            list.add(entry.getKey());
            newMap.put(entry.getValue(), list);
        }
        return newMap;
    }

    private static void priorityCheck(int playerId1,int playerId2,int jokerCardVal)
    {
        int jokerCountPlayerOne = 0;
        int jokerCountPlayerTwo = 0;
        int openJokerCountPlayerOne = 0;
        int openJokerCountPlayerTwo = 0;
        List<Integer> playerOneCards = useridToPointsmap.get(playerId1);
        List<Integer> playerTwoCards = useridToPointsmap.get(playerId2);
        System.out.println("Current game player cards-----"+playerOneCards);
        System.out.println("Tied game player cards--------"+playerTwoCards);
        int playerOneCardCount =  playerOneCards.size();
        int playerTwoCardCount =  playerTwoCards.size();
        // Hard coded
        // playerOneCardCount = 4;
        //playerTwoCardCount = 4;
        // jokerCountPlayerOne = 1;
        // jokerCountPlayerTwo = 1;
        //openJokerCountPlayerOne =1;
        //openJokerCountPlayerTwo =2;
        System.out.println("---jokerCardVal---"+jokerCardVal);
        System.out.println("---playerOneCardCount---playerTwoCardCount"+playerOneCardCount+"  "+playerTwoCardCount);

        if  (playerOneCards.contains(jokerCardVal))
        {
            openJokerCountPlayerOne++;
        }
        if  (playerTwoCards.contains(jokerCardVal))
        {
            openJokerCountPlayerTwo++;
        }
        if  (playerOneCards.contains(0))
        {
            jokerCountPlayerOne++;
        }
        if  (playerTwoCards.contains(0))
        {
            jokerCountPlayerTwo++;
        }
        if (playerOneCardCount == playerTwoCardCount)
        {
            if (jokerCountPlayerOne == jokerCountPlayerTwo)
            {
                if (openJokerCountPlayerOne == openJokerCountPlayerTwo)
                {
                    System.out.println("Still Tie Occurring---------------");
                }  else
                {
                    if (openJokerCountPlayerOne > openJokerCountPlayerTwo)
                    {
                        System.out.println("First player has high rank  based on open joker");
                    }   else
                    {
                        System.out.println("Second player has high rank  based on open joker");
                    }
                }
            }  else
            {
                if (jokerCountPlayerOne > jokerCountPlayerTwo)
                {
                    System.out.println("First player has high rank  based on joker");
                }   else
                {
                    System.out.println("Second player has high rank  based on joker");
                }
            }
        }  else
        {
            if (playerOneCardCount < playerTwoCardCount)
            {
                System.out.println("First player has high rank based on Count");
            }   else
            {
                System.out.println("Second player has high rank based on count");
            }
        }
    }

    // New Priority Check
    private static List<Integer> priorityNew(ArrayList<Integer> tocompare)
    {

        // ArrayList to array 
        Integer[] sortedArray = (Integer[]) tocompare.toArray();
        bubble_srt(sortedArray,sortedArray.length);
        List<Integer> mapValuesNew = Arrays.asList(sortedArray);

        return mapValuesNew;

    }

    public static void bubble_srt( Integer a[], int n ){
        int i, j,t=0;
        for(i = 0; i < n; i++){
            for(j = 1; j < (n-i); j++){
                //    System.out.print(" I am in first "+a[j-1]+"  "+a[j] +"*********"+whichCardHigher(a[j-1],a[j]));   
                if(WhichuserHigher(a[j-1],a[j])){
                    t = a[j-1];
                    a[j-1]=a[j];
                    a[j]=t;
                }
            }
        }

    }

    public static boolean WhichuserHigher(int user1,int user2)

    {
        if(getNumberofCards(user1) == getNumberofCards(user1) )  
        {
            if(getNumberofJoker(user1) == getNumberofJoker(user2))
            {
                if(getNumberofClosedJoker(user1) == getNumberofClosedJoker(user2))
                {
                    System.out.println("Its a Mega Tie");
                }
                else
                {
                    if(getNumberofClosedJoker(user1) > getNumberofClosedJoker(user2))
                    {
                        return true;
                    }
                    else
                    {   
                        return false;
                    }
                }
            }
            else
            {
                if(getNumberofJoker(user1) > getNumberofJoker(user2))
                {
                    return true;
                }
                else
                {   
                    return false;
                }
            }
        }
        else
        {
            if(getNumberofCards(user1) >getNumberofCards(user2))
            {
                return true;
            }
            else
            {   
                return false;
            }

        }
        return false;

    }

    public static int getNumberofCards(int user)
    {
        int noOfCards = 0;
        for(Map.Entry<Integer, ArrayList<Integer>> entry :useridToPointsmap.entrySet())
        {
            if(entry.getKey() == user)
            {
                noOfCards = entry.getValue().size();
            }
        }
        return noOfCards;

    }
    public static int getNumberofJoker(int user)
    {
        int noOfJokers = 0;
        int count = 0;
        for(Map.Entry<Integer, ArrayList<Integer>> entry :useridToPointsmap.entrySet())
        {
            if(entry.getKey() == user)
            {
                for(int i= 0 ;i< entry.getValue().size();i++)
                {
                    if(Integer.parseInt(entry.getValue().toString()) == jokercard)
                    {
                        count ++;
                    }
                }
            }
        }
        noOfJokers = count;
        return noOfJokers;

    }
    public static int getNumberofClosedJoker(int user)
    {
        int noOfClosedJokers = 0;
        int count = 0;
        for(Map.Entry<Integer, ArrayList<Integer>> entry :useridToPointsmap.entrySet())
        {
            if(entry.getKey() == user)
            {
                for(int i= 0 ;i< entry.getValue().size();i++)
                {
                    if(Integer.parseInt(entry.getValue().toString()) == closedjokercard)
                    {
                        count ++;
                    }
                }
            }
        }
        noOfClosedJokers = count;
        return noOfClosedJokers;

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T06:27:10.580

Please have simple Java beans for Room, Player and Card (probably for Card may not be necessary) etc. This way you can change the properties of the classes when new requirement comes in the future. Ultimately you need to manage only List Room, so that if you get an Room object you can easily retrieve the Players from it and so on.

```
Class Room{
   String roomName;
   String location;
   String List<Player>;
   // have getters setters for each of them
} 
```

This way it is more manageable as well, so that processing code if any present you can put them in the related classes only. for e.g. In the room class you can have a method called getLeastValueCard which returns for that Room which user and you can have loop for entire Rooms.

Hope this make sense.

# java - 如何调整 JSpinner 箭头的宽度？

> ID：11663241
> 
> 赞同：0
> 
> 时间：2012-07-26T05:56:28.810
> 
> 标签：java, swing, resize, jspinner

有没有一种简单的方法来编辑 JSpinner 箭头的宽度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T07:35:19.070

您可以使用`setPreferredSize()`：

```
 Dimension d = spinner.getPreferredSize();  
    d.width = 50;  
    spinner.setPreferredSize(d); 
```

小心 LayoutManager，如果它超出范围，它可以修改这个首选大小。

# python - 使用蓝图在 Flask 中复制 url_prefix

> ID：11663244
> 
> 赞同：2
> 
> 时间：2012-07-26T05:56:36.720
> 
> 标签：python, flask, jinja2, url-for

抱歉，我已经在 stackoverflow 中搜索并用谷歌搜索，但没有找到有用的信息。我有一个烧瓶应用程序，python 版本 2.6 烧瓶版本 0.9

它的应用层次结构就像

```
 application/
     __init__.py
     app.py
     hello/
       __init__.py
       view.py
       templates/
         hello.html 
```

两个文件**init** .py 都是空的

```
app.py
-----------------------
from flask import Flask
from flup.server.fcgi import WSGIServer
from hello.view import hello

app = Flask(__name__)
app.debug = True 

app.register_blueprint(hello, url_prefix='/hello')

if __name__ == '__main__':
    WSGIServer(app, bindAddress='/tmp/app.sock').run() 
```

* * *

```
view.py
-----------------------
import os
from flask import Blueprint, render_template, abort
from jinja2 import TemplateNotFound

hello = Blueprint('hello', __name__, template_folder='templates')

@hello.route('/')
def get_index():
    try:
        return render_template('hello.html')
    except TemplateNotFound:
        abort(404) 
```

* * *

```
hello.html
-----------------------
<!DOCTYPE html>
<html>
    <head>
        {% block head %}
        <meta charset="utf-8">
        {% endblock %}
    </head>
    <body>
        <div>
            {% block body %}
            <h1><a href="{{ url_for('hello.get_index') }}">Click Me</a></h1>
        {% endblock %}
        </div>
    </body>
</html> 
```

当我输入时它工作正常`localhost:8080/hello`，但如果我单击 html 中的链接会出错。我发现它的 url 值是`href="/hello/hello/"`（应该是`/hello/`对的吗？）。我知道 hello.get_index 映射到`/hello/`，但不知道第一个`hello/`来自。任何提示表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T02:38:30.133

您在注册蓝图时是否尝试过删除 url_prefix 参数？例如，如果您将以下内容更改为：

```
app.register_blueprint(hello, url_prefix='/hello') 
```

至

```
app.register_blueprint(hello) 
```

# c# - 如何在c#中根据长度将字符串拆分为数组

> ID：11663264
> 
> 赞同：-1
> 
> 时间：2012-07-26T05:58:22.610
> 
> 标签：c#, wcf

我真的被困在这里，并会感谢您的帮助。我创建了服务的请求数据合同和响应数据合同。请求 DTO 包含 Cardnum、Id 和 Noteline1----noteline18。响应 DTO 包含 noteline1--noteline18。

我将一个字符长度为 100 的字符串传递给请求数据成员 noteLine1（数据长度为 78 个字符）。现在我想确保只有 78 个字符应该填充到 noteline1 数据成员中，其余的应该适合请求 DTO 的另一个空的 noteline 数据成员。我使用了以下代码，它对我来说很好：

```
string requestNoteReason = request.noteLine1;
if (response != null)
{
    foreach (PropertyInfo reqPropertyInfo in requestPropertyInfo)
    {
        if (reqPropertyInfo.Name.Contains("noteLine"))
        {
            if (reqPropertyInfo.Name.ToLower() == ("noteline" + i))
            {
                if (requestNoteReason.Length < 78)
                {
                    reqPropertyInfo.SetValue(request, requestNoteReason, null);
                    break;
                }
                else
                {
                    reqPropertyInfo.SetValue(request, requestNoteReason.Substring(0, 78), null);
                    requestNoteReason = requestNoteReason.Substring(78, requestNoteReason.Length - 78);
                    i++;
                    continue;
                }
            }
        }
    }
    goto Finish;
} 
```

现在我希望包含超过 78 个字符长度的字符串的 noteline1 应该拆分并填充到下一个空注释行中。如果字符串长度超过 200 个字符，则应拆分字符串并将其填充到下一个连续的空注释行中。例如，如果字符串需要3个空注释行的空间，那么它应该只填充下一个连续可用的空注释行中的剩余字符串。（即noteline2，noteline3，noteline4）并且不应该用已经存在的字符串填充noteline之前填的。

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T06:34:28.033

```
[TestFixture]
public class Test
{
    [Test]
    public void TestLongLength()
    {
        var s = new string('0', 78) + new string('1', 78) + new string('2', 42);
        var testClass = new TestClass();
        FillNoteProperties(s, testClass);

        Assert.AreEqual(new string('0', 78), testClass.NoteLine1);
        Assert.AreEqual(new string('1', 78), testClass.NoteLine2);
        Assert.AreEqual(new string('2', 42), testClass.NoteLine3);
    }

    public static void FillNoteProperties(string note, TestClass testClass)
    {
        var properties = testClass.GetType().GetProperties();
        var noteProperties = (from noteProperty in properties
                              where noteProperty.Name.StartsWith("NoteLine", StringComparison.OrdinalIgnoreCase)
                              orderby noteProperty.Name.Length, noteProperty.Name
                              select noteProperty).ToList();                
        var i = 0;
        while (note.Length > 78)
        {
            noteProperties[i].SetValue(testClass, note.Substring(0, 78), null);
            note = note.Substring(78);
            i++;
        }

        noteProperties[i].SetValue(testClass, note, null);
    }
} 
```

# c# - 将其他用户的连接 ID 返回给客户端是否有风险？

> ID：11663265
> 
> 赞同：14
> 
> 时间：2012-07-26T05:58:29.167
> 
> 标签：c#, asp.net, signalr

在 SignalR Hub 类中，您可以调用`Context.ConnectionId`用户。我希望将这些存储在 a`Dictionary<string, string>`中，以便将用户连接在一起。将其他用户的客户端 ID 返回给用户的客户端是否存在风险或安全漏洞？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-26T06:09:18.497

是的，我们在一些样本中这样做了，但这很糟糕。如果您泄露了连接 ID，那么人们可以在您的连接上发送/接收您的消息。创建另一个唯一的 id 并在内部存储您的 id 和连接 id 之间的映射，以便您可以将它们映射回来。

这与表单身份验证票基本相同。当然它是加密的，但如果有人得到它，他们无论如何都可以冒充你。

在 MessengR 中查看此逻辑的示例。 [https://github.com/davidfowl/MessengR/blob/master/MessengR/Hubs/Chat.cs#L67](https://github.com/davidfowl/MessengR/blob/master/MessengR/Hubs/Chat.cs#L67)

# apache-kafka - Apache Kafka 和支持的平台

> ID：11663266
> 
> 赞同：2
> 
> 时间：2012-07-26T05:58:50.773
> 
> 标签：apache-kafka

基本问题，Apache Kafka 目前支持哪些平台和语言？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T08:24:46.883

Kafka 是用 Scala 编写的，这意味着它运行在 JVM 上，因此您可以有效地运行在任何支持 JVM 的操作系统上。但是，代理通过使用操作系统的内核缓冲区缓存来获得巨大的性能提升。我不确定这对于像 Windows 这样的非 unix 系统有多好。kafka 源代码库为 Scala 和 Java 客户端提供一流的支持。您还可以在 contrib 目录下找到使用 Php、C++、python 等语言的生产者和消费者客户端。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-08-12T00:31:38.707

Apache Kafka 运行良好，在 Linux（裸机 Linux、私有云或公共云中的 Linux VM 或基于 Linux 的 docker 容器）上运行良好且性能最稳定。众所周知，Kafka 可以在 Windows 上运行，但大多数商业上支持 Kafka 的供应商并未将其支持扩展到生产服务器的 Windows，因此它是 Kafka 社区的“社区支持”。Kafka 在 macOS 上也可以很好地运行以进行开发。

Apache Kafka 发行版仅包括对 Java 和 Scala 客户端的支持，但更大的 Kafka 社区已经为其他语言创建了一长串客户端。此处的 apache kafka wiki 上有一个很好的客户端可用选项列表：[https ://cwiki.apache.org/confluence/display/KAFKA/Clients](https://cwiki.apache.org/confluence/display/KAFKA/Clients)

您会发现对于某些语言（如 C#/.Net、Python 或 Go），客户端库有 2 或 3 个甚至更多选项。有些是最新的 Kafka 有线协议更改，例如 Exactly-Once Semantics，以及在 Apache Kafka 0.11 中添加的消息标头或在 0.10 中添加的时间戳，或在 0.9 中添加的安全增强和新的消费者 api，以及其他人不是。有些拥有 Java 中提供的全套功能/方法（如 seek()、消费者组管理或拦截器），但有些则没有。有些是纯粹用目标语言编写的，有些是 librdkafka C/C++ 库中的包装器。有些由供应商提供商业支持，有些则不支持，因此请根据您在功能、稳定性、执行环境和可支持性方面的需求进行选择。

# matlab - 使用编程查找每个像素的坐标

> ID：11663268
> 
> 赞同：6
> 
> 时间：2012-07-26T05:58:54.410
> 
> 标签：matlab, opencv

使用编程（openCV或MATLAB）在下图中找到内圆（或外圆）每个像素的坐标的方法是什么？
imtool 提供此信息，但它是鼠标驱动的。

![在此处输入图像描述](../Images/de4885610fc9b78aadfa3eaa08e50b1a.png)

**更新**

我使用 imtool 来检测这些位置，方法是将鼠标光标放在圆圈上的每个点上并手动记录该值。但是我如何使用手动编程来做到这一点，我不能在圈子上这么多品脱。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T08:17:10.350

在 Matlab 中，你可以这样做：

```
im = imread('im.png');      %# load image
[y,x] = find(all(im<5, 3)); %# find black pixels
position = [x,y];           %# display them 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T06:01:24.973

这是使用 openCV 查找具有色相和饱和度过滤的对象的指南。也许您可以将它与阈值黑色一起使用？

[http://myrobotlab.org/content/opencv-how-isolate-object-hue-saturation-and-value](http://myrobotlab.org/content/opencv-how-isolate-object-hue-saturation-and-value)

这里还有一种检测圆圈的方法：

[http://cgi.cse.unsw.edu.au/~cs4411/wiki/index.php?title=OpenCV_Guide](http://cgi.cse.unsw.edu.au/~cs4411/wiki/index.php?title=OpenCV_Guide)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-07-14T06:04:31.797

你可以实现这个代码......

```
a=rgb2gray(imread('image.tif'));
[x,y,z]=size(a);
count=0;
for i=1:x
    for j=1:y
        if a(i,j)==0
            count=count+1;
            new_x(count)=j;
            new_y(count)=i;
        end
    end
end 
```

`new_x`您可以从&获取坐标值`new_y`

# php - PHP文件上传失败

> ID：11663269
> 
> 赞同：0
> 
> 时间：2012-07-26T05:58:58.880
> 
> 标签：php, mysql

我正在尝试创建一个允许用户将图像上传到服务器的脚本。我已经实现了脚本，但是一旦我尝试上传图像，脚本就会执行，但服务器上没有出现图像。有任何想法吗？

PHP：

```
<?php
require_once("connect.php");
ini_set('display_errors', 'on'); 
error_reporting(E_ALL);

echo __LINE__;

$allowedExtensions = array("jpg", "jpeg", "gif", "png");
$extension = end(explode(".", $_FILES["image"]["name"]));
print_r($_FILES['image']);
echo $extension;

if((($_FILES["image"]["type"] == "image/gif") || ($_FILES["image"]["type"] == "image/jpeg") || ($_FILES["image"]["type"]=="image/pjpeg") || ($_FILES["image"]["type"] == "type/png")) && ($_FILES["image"]["size"] <= 102400) && in_array($extension, $allowedExtensions)) {

        echo __LINE__;
        if($_FILES["image"]["error"] > 0) {
                $fileUploadFail = true; 
        }
        else {
               chmod("uploadImages/", 0755);
               move_uploaded_file($_FILES["image"]["tmp_name"], "uploadImages/" . $_FILES["image"]["name"]);
        }

} else {
        $fileUploadFail = true;
        echo __LINE__;
}   
        $fileName = $_FILES["image"]["name"];
        chmod("uploadImages/", 0600);
        echo __LINE__;
        /*if($fileUploadFile) {
              header("Location: uploadArt.php");
        }
        else {
             $title = $_POST['title'];
             $description = $_POST['description'];
             mysql_query("INSERT INTO `Art`(`File Name`, `Description`, `uploadLocation`, `Index`) VALUES('$title', '$description', 'uploadImages/$fileName', '')");
              header("Location: viewArt.php");
        }*/
  ?> 
```

我收到的输出：

```
6Array ( [name] => comps_tech.png [type] => image/png [tmp_name] => /tmp/phpgQKnMJ [error] => 0 [size] => 661 ) png2529 
```

HTML：

```
<form id = "uploadDesigns"  enctype="multipart/form-data" name="Upload" method="post" action="fileUpload.php" >
<label for="title">Enter name of design:</label><input type = "text" id = "title" name = "title" size="50"><br /><br />
<label for="image">Upload image:<br />(max 100KB)</label> <input type = "file" id = "image" size = "51" name = "image"><br /><br />
<label for="description">Description:</label> <textarea id = "description" name = "description" rows = "4" cols = "20"></textarea><br /><br />
<button type="submit">Submit Art</button>
</form> 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T06:12:07.380

你有

```
input type = "file" id = "image" size = "51" name = "image" 
```

但是在参考

```
$_FILES["file"]["type"] 
```

$_FILES 中的“文件”是指文件输入的名称。这是“图像”，而不是“文件”

* * *

完整的答案（在修复其他问题和调试后）；最后一个错误是

```
$_FILES["image"]["type"] == "image/png" 
```

需要添加到 if 语句中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T06:00:23.897

您需要为`uploadImages`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T06:28:48.343

你的文件目录结构应该是这样的。

1）test.php 2）uploadImages/（这个文件夹需要你自己创建）。

# sharepoint - 当 Xlstlistviewwebpart 带有来自子站点的 webid 时，从 sharepoint (assetportalbrowser.aspx) 插入链接/图像损坏

> ID：11663270
> 
> 赞同：0
> 
> 时间：2012-07-26T05:58:59.323
> 
> 标签：sharepoint

我在根站点中配置了 Xlstlistviewwebpart 并以编程方式映射到子站点中的列表，一旦我配置了此 Web 部件，assetportalbrowser.aspx 开始给我“值不在预期范围内”，如果我取消配置所有东西开始正常工作

知道如何解决这个问题，在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T04:42:54.690

只需更新到最后一次累积更新即可解决问题

# objective-c - uiimageview 上的 Alpha 蒙版渐变

> ID：11663271
> 
> 赞同：4
> 
> 时间：2012-07-26T05:59:06.533
> 
> 标签：objective-c, uiimageview, quartz-graphics, alpha

我希望能够在图像边缘添加 alpha 渐变，使其“淡入”到下一张图像中。下图解释了我正在尝试做的事情。

![示例图片](../Images/be3edc6b6bc6a2331fb938176c8fadf5.png)

关于如何做到这一点的任何想法？我对图形上下文没有太多经验，这就是我在这里寻求帮助的原因。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-26T07:36:53.133

您可以检查此代码并发布结果。

```
UIImage* first = [[UIImage alloc]initWithContentsOfFile:@"firstImagePath"];
UIImage* second = [[UIImage alloc]initWithContentsOfFile:@"secondImagePath"];
CGSize sizeToSet;
int mergeArea = 200;
sizeToSet.width = first.size.width + second.size.width - mergeArea;
sizeToSet.height = first.size.height;

UIGraphicsBeginImageContext(sizeToSet);

[first drawAtPoint:CGPointMake(0, 0)];
[second drawAtPoint:CGPointMake(first.size.width - mergeArea, 0) blendMode:kCGBlendModeLuminosity alpha:1.0f];

UIImageView* imageView = [[UIImageView alloc]initWithFrame:CGRectMake(0, 0, 300, 300)];
[imageView setCenter:self.view.center];
[imageView setImage:UIGraphicsGetImageFromCurrentImageContext()];

UIGraphicsEndImageContext();

[[self view]addSubview:imageView];

[imageView release];
[first release];
[second release]; 
```

# c# - 从 Silverlight 中的数据库中获取表的列名

> ID：11663275
> 
> 赞同：1
> 
> 时间：2012-07-26T05:59:09.360
> 
> 标签：c#, silverlight, linq-to-entities, wcf-ria-services

如何从 silverlight 应用程序的域服务中的数据库中获取表的列名，然后在列表框中使用这些名称供客户端选择。我在这里查看了 [LINQ Query 以获取 Silverlight 中](https://stackoverflow.com/questions/6512132/linq-query-to-get-column-headers-in-silverlight)的列标题，但有点令人困惑。

据我所知，在 Silverlight 中，你编写域服务以访问服务器端的数据，silverlight 在客户端创建上下文，你在那里使用上下文。所以我假设我需要一个数据上下文，我在服务器端创建了一个到达同一个数据库，我在我的方法中使用了该上下文作为上面的链接，但这次出现了一个异常，如“System.ArgumentException 未被用户代码处理”和“不支持消息 = 关键字：'元数据'。” 我不能在客户端使用 System.Data.Linq inn，所以我也可以在客户端使用该方法

我正在从 LinqToEntitiesDomainService 类继承的域服务中编写此方法。我真的被困在这一点上。

所有答案将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T16:03:44.100

对此没有内置支持。但是，您可以使用以下 SQL 从表中获取列。在此示例中，有一个名为`Foo.Bar`where `Foo`is schema 的表。

```
SELECT c.name
FROM sys.objects o
JOIN sys.columns c
    ON o.object_id = c.object_id
JOIN sys.schemas s
    ON o.schema_id = s.schema_id
WHERE
    s.name = 'Foo'
    AND o.name = 'Bar' 
```

我正在使用实体框架`DbContext`来获取结果。

```
var commandText = "<SQL from above>";
var contextAdapter = (IObjectContextAdapter) this;
IEnumerable<string> columnNames = contextAdapter.ObjectContext.ExecuteStoreQuery<string>(commandText); 
```

然后，您可以将调用方法添加到您的 DomainService。

```
[Invoke] // Use invoke for non-entities
public string[] GetColumnNames(string table)
{
    // Format the SQL and get the results;
    return columnNames.ToArray();
} 
```

# javascript - 将值发送到 Javascript 函数以在元素中显示

> ID：11663278
> 
> 赞同：0
> 
> 时间：2012-07-26T05:59:27.413
> 
> 标签：javascript, overlay, href

我有这个

```
<a href='#?title=sample&url=sample.com'></a> 
```

在我放的同一页上

```
$title = $_GET['title'];
$url = $_GET['url']; 
```

但它没有传递值。代码有什么问题？请帮忙！

注意：我不想重新加载页面，这就是我输入 # 的原因，因为在后面我将调用一个 javascript 函数 onclick

这是 onclick 的函数调用

```
<script language="JavaScript">
function overlay() {
el = document.getElementById("overlay");
el.style.visibility = (el.style.visibility == "visible") ? "hidden" : "visible";
}
</script> 
```

其中元素“overlay”必须包含

```
$title = $_GET['title'];
$url = $_GET['url']; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T06:01:13.240

我认为您需要从 URL 中删除哈希 (#)。如果您的 URL 中需要井号标签，它必须位于 URL 的末尾：

```
mydomain.com?id=1#tag 
```

如果你像你一样将哈希放在查询字符串之前，你基本上是在告诉浏览器找到一个名为“?title=sample&url=sample.com”的元素/目标，它可能不喜欢。

**对于您更新的问题：**

我认为你最好使用链接来调用你的 javascript 函数，而不是像你一样向你的 URL 添加查询字符串值。为了使 PHP 能够获取这些值，页面必须重新加载/发送请求到服务器。如果您不希望页面重新加载，我建议您将链接更改为：

```
<a onclick="overlay('This is the title','www.domain.com')"> 
```

然后有一个功能：

```
function overlay(theTitle, theURL) {
  el = document.getElementById("overlay");
  el.style.visibility = (el.style.visibility == "visible") ? "hidden" : "visible";
  el.innerHTML = theTitle+'<br>'+theURL;
} 
```

这意味着您无需刷新页面即可获得所需的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T06:01:08.083

告诉浏览器`#`您正在尝试转到页面上的锚点，因此它不会向服务器发出另一个 HTTP 请求。

如果要向服务器发出请求，则必须删除该`#`符号并将 URL 添加到页面：

```
<a href="mypage.php?title=sample&url=sample.com"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T06:01:26.753

您的 URL 仅包含片段标识符（以字符开头的 URL 的最后部分`#`）。

这允许您链接到页面的特定部分（由具有与片段标识符匹配的 id 属性的元素标识，或由具有匹配名称的锚元素标识）并且完全由客户端处理 - 它不会发送到服务器。

**`#`从 URI 中删除字符或将其*放在*查询字符串之后。**

（另请注意，您的 HTML 无效，`&`表示字符引用的开始，应表示为`&amp;`好像您希望一个显示为数据）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T06:08:36.670

您需要从href 中删除#。尝试改为`$_SERVER["PHP_SELF"]`包含（此）脚本名称

```
print('<a href='.$_SERVER["PHP_SELF"].'?title=SAMPLE&url=SAMPLE.COM'>Link</a>') 
```

# javascript - window.location 无法正常工作

> ID：11663279
> 
> 赞同：1
> 
> 时间：2012-07-26T05:59:29.143
> 
> 标签：javascript, jquery, blackberry, jquery-mobile, cordova

大家好，我正在从一个 html 页面导航到另一个页面：

```
window.location = "test.html"; 
```

在 test.html 我有标题：

```
<script type="application/javascript">

            function redirect()
            {
                alert("inside redirect:");
                //window.location = url;
                //history.back();
                history.go(-1);
                return false;

            }

        </script>

        <div data-role="navbar">
            <ul>

                <li> <a href="#" data-theme="b" onclick="history.back(); return false;">Go Back</a></li>
                <li> <a onclick="redirect()" data-icon="back" data-iconpos="notext" data-direction="reverse" class="ui-btn-left jqm-home">Back1</a></li>

            </ul>
        </div> 
```

但是这里的两个后退按钮（Go Back 和 Back1）都不起作用。如果我`$.mobile.changePage('test.html')`用来在页面之间导航，那么两个后退按钮都可以工作。为什么他们不使用 windows.location？

我想为不支持 ajax 的 B 级浏览器开发此应用程序。因此我不能使用`$.mobile.changePage('test.html')`.

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:08:50.363

这个**黑莓 OS 5**浏览器有很多问题。最初我也尝试做你现在正在做的事情。但后来我认为你将不得不考虑其他更好的方法。这是我解决它的方法

首先在像这样加载 jquery-mobile 脚本之前添加这些行

```
<script type="text/javascript">
    $(document).bind("mobileinit", function() {
        $.support.cors = true;
        $.mobile.allowCrossDomainPages = true;
    });
</script> 
```

然后我使用了**Single Html 概念**。在这个概念中，我只需要加载我的脚本一次，我就可以使用 jquery-mobile 的`changePage`. 当我有许多 html 页面时，我必须等待几秒钟，因为脚本的加载和卸载发生了。避免这种情况，这是不必要的。

像这样在同一个 Html 中拥有所有页面

```
<div data-role="page" id="page1">
<div data-role="page" id="page2">
.
.
. 
```

然后之后你可以轻松地做一个`changePage`这样的

```
$.mobile.changePage("#page1", {
    transition : "slide"
}); 
```

我希望你采取正确的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T06:03:28.810

**尝试：**

```
window.location.href = "test.html"; 
```

**或者：**

```
window.location.assign("test.html"); 
```

[**见参考**](https://developer.mozilla.org/en/DOM/window.location)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T06:03:58.887

为什么不使用`window.location.replace("test.html")`；

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T06:45:32.220

在 jQuery mobile 中，您可以通过设置一些[启动](http://jquerymobile.com/demos/1.1.1/docs/api/globalconfig.html)变量来关闭 ajax。您需要在加载 jQuery mobile 之前加载此脚本

```
$(document).bind("mobileinit", function(){
  //apply overrides here
  $.mobile.ajaxEnabled = false;
}); 
```

关闭 ajax 后，您现在仍然可以使用 $.mobile.changePage()。

现在要创建一个后退按钮，您所要做的就是给链接一个[data-rel="back"的属性](http://jquerymobile.com/test/docs/toolbars/docs-headers.html)

```
<li><a href="#" data-theme="b" data-rel="back">Go Back</a></li> 
```

# joomla - 如何在cpanel上连接数据库和joomla网站

> ID：11663285
> 
> 赞同：0
> 
> 时间：2012-07-26T06:00:09.717
> 
> 标签：joomla, web-hosting, cpanel, joomla1.7

我想托管一个joomla 1.7网站。我已将数据库和joomla文件夹上传到cpanel。我该如何连接数据库和joomla文件夹，以便公众可以访问它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T09:57:54.747

您必须在 joomla 根文件夹的**configuration.php**中相应地添加数据库详细信息，例如主机名、用户名、密码、日志路径、tmp 路径。

# java - 使用java读取xml文件

> ID：11663286
> 
> 赞同：0
> 
> 时间：2012-07-26T06:00:12.863
> 
> 标签：java, xml

以下是我的xml文件格式

```
<?xml version="1.0" encoding="UTF-8"?>
<Hospitals>
<Hospital hospitalId="14">
    <HospitalName>aaa</HospitalName>
        <Department>
            <DepartmentName departmentId="21">card</DepartmentName> 
                <Clinics>
                    <ClinicName  clinicId="38">c7</ClinicName>
                    <Status Flag="0">0</Status>
                    <ClinicName  clinicId="39">c2</ClinicName>
                    <Status Flag="0">0</Status>

            </Clinics>
       </Department>
 </Hospital>
<Hospital hospitalId="15">
     <HospitalName>bbbb</HospitalName>
        <Department>
            <DepartmentName departmentId="22">dental</DepartmentName>
                <Clinics>
                    <ClinicName  clinicId="35">c6</ClinicName>
                    <Status Flag="0">0</Status>
                    <ClinicName  clinicId="36">c5</ClinicName>
                    <Status Flag="0">0</Status>
                                          </Clinics>
           </Department>
</Hospital> 
```

帮助我使用从 xml 读取的 java 代码以打印如下所示的 alues。我尝试了[这个](http://www.mkyong.com/java/how-to-read-xml-file-in-java-dom-parser/)，但我能够按如下所示的格式打印

```
Root element :Hospitals
----------------------
 hospital Id : 14
 Hospital Name : aaa
 department Id : 21
 Department Name : card
 clinicId : 38
 ClinicName : c7
 status : 0
 Flag : 0
 clinicId : 38
 ClinicName : c2
 status : 0
 Flag : 0
----------------------
hospital Id : 15
Hospital Name : bbbb    
department Id : 22
Department Name : dental
clinicId : 35
ClinicName : c6
status : 0
Flag : 0
clinicId : 38
ClinicName : c5
status : 0
Flag : 0 
```

任何形式的帮助都将帮助我快速完成工作......在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T06:05:43.223

您使用的是哪个版本的 Java？如果您为您的 XML 定义了 XSD，那么您可以通过许多选项在 java 对象中解析您的 XML，并且可以读取或执行您想要对数据执行的任何操作。这里有几个选项供您选择

1.  [JAXB 2.0](http://jaxb.java.net/)
2.  [XStream](http://xstream.codehaus.org/)

如果您使用的是 JDK 6.0+，则还有其他一些来自 Apache 和其他一些，JDK 提供了 JaxB，而 Xstream 非常轻巧且易于使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T07:43:41.637

好吧，众所周知，XML 解析是使用 DOM 和 SAX 完成的，但它们是核心。初学者很难使用复杂的 API 集进行管理。我宁愿建议使用框架，[Apache Digester](http://commons.apache.org/digester/)

它会轻松，它也使用 SAX，但在场景下，您不需要使用 SAX。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T11:56:54.630

我建议用 XSLT 或 XQuery 来做这件事；在这两种情况下，代码都比在 Java 中简单得多。如果您需要在 Java 应用程序中对数据进行一些复杂的处理，则使用 Java 是合理的，但如果您只是想提取一些信息并将其输出到文本文件，则使用高级工具要好得多。

这是您的 XSLT 样式表的入门：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:output method="text"/>

<xsl:variable name="NL" select="'&#xa;'"/>

<xsl:template match="Hospitals">
  <xsl:text>Root element: Hospitals</xsl:text>
  <xsl:apply-templates/>
</xsl:template>

<xsl:template match="Hospital">
  <xsl:text>&#xa;------------------</xsl:text>
  <xsl:text>&#xa;hospital id: </xsl:text>
  <xsl:value-of select="@hospitalId"/>
  <xsl:text>&#xa;</xsl:text>
  <xsl:apply-templates/>
</xsl:template>

<xsl:template match="HospitalName">
  <xsl:text>&#xa;hospital name: </xsl:text>
  <xsl:value-of select="."/>
  <xsl:text>&#xa;</xsl:text>
  <xsl:apply-templates/>
</xsl:template>

<xsl:template match="DepartmentName">
  <xsl:text>&#xa;department id: </xsl:text>
  <xsl:value-of select="@departmentId"/>
  <xsl:text>&#xa;</xsl:text>
  <xsl:text>&#xa;department name: </xsl:text>
  <xsl:value-of select="."/>
  <xsl:text>&#xa;</xsl:text>
  <xsl:apply-templates/>
</xsl:template> 
```

和更多相同。

您当然可以从 Java（或从命令行，或从 Ant 等）运行 XSLT 代码。JDK 带有内置的 XSLT 1.0 处理器，或者您可以下载 Saxon 以获得 XSLT 2.0 处理器。这个简单的例子只使用了 XSLT 1.0，但是您很快就会发现自己需要 XSLT 2.0 的特性，所以您不妨从这种方式开始。

# java - 为什么有时 Eclispe 会在我不设置断点的情况下中断？

> ID：11663291
> 
> 赞同：0
> 
> 时间：2012-07-26T06:00:42.493
> 
> 标签：java, eclipse

当我调试一些代码时，eclipse会在一些我没有设置断点的地方中断。我可以继续调试，但我想知道这种行为的原因可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T10:20:42.930

如果程序中存在编译错误，并且执行了该行，Eclipse 将在那里停止。

如果那里有任何断点，还要检查断点视图。除了通常的“行断点”之外，还有几种断点，例如异常断点、类加载断点等。

# php - PHP - 使用 while 循环创建嵌套数组

> ID：11663294
> 
> 赞同：1
> 
> 时间：2012-07-26T06:00:48.983
> 
> 标签：php, arrays, while-loop

我想做一个这样的数组

```
$array = array("'firstName1', 'lastName1'", "'firstName2', 'lastName2'", ......); 
```

我总是收到这样的错误：

> 解析错误：语法错误，意外的 'while' (T_WHILE)，期待 ')' 在 C:\wamp\www\Tests\index.php 第 11 行

```
<!doctype html>
<html>
<head>
    <meta charset="utf=8">
</head>
<body>
<?php
if(isset($_POST['reg'])){
    $x=1;
    $a = array(
    while($x<=10):
    "'firstName$x', 'lastName$x'"; //I DONT KNOW WHAT TO DO IN THIS LINE//
    $x++;
    endwhile;
    );
    print_r($a);
}
?>
<form action="" method="post">
<input type="text" name="number" /> <input type="submit" name="submit" value="Submit"/>
</form>
    <form action="" method="post">
    <table>
    <?php
    if(isset($_POST['submit'])){
    for($i=1;$i<=$_POST['number'];$i++){
    echo "<tr>
    <td><input type='text' name='firstName$i' /></td>
    <td><input type='text' name='lastName$i' /></td>
    </tr>";
    }
    $i-=1;
    echo "<input type='hidden' name='hide' value='$i' />";
    }           
    ?>
    </table>
    <input type="submit" value="Register" name="reg"/>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T06:03:10.443

```
$a = array();

while($x<=10):
    $a[] = 'firstName'.$x;
    $a[] = 'lastName'.$x;
    $x++;
endwhile; 
```

我再次阅读了您的问题，如果您希望此 "'firstName1', 'lastName1'" 实际上是一个字符串，那么，

```
$a = array();
while($x<=10):
    $a[] = 'firstName'.$x.'lastName'.$x;
    $x++;
endwhile; 
```

或者根据你的问题标题（嵌套数组）然后，

```
$x = 1;
while($x<=10):
   $a[] = array('firstName'.$x, 'lastName'.$x);
   $x++;
endwhile; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T06:26:36.193

愿这对你有所帮助。

```
$x = 1;
while($x <=10 ):    
    $a[] = '"\'firstName'.$x.'\', \'lastName'.$x.'\'"';    
    $x++;
endwhile;
echo '<pre>';
print_r($a);
echo '</pre>'; 
```

输出是：

```
Array
(
    [0] => "'firstName1', 'lastName1'"
    [1] => "'firstName2', 'lastName2'"
    [2] => "'firstName3', 'lastName3'"
    [3] => "'firstName4', 'lastName4'"
    [4] => "'firstName5', 'lastName5'"
    [5] => "'firstName6', 'lastName6'"
    [6] => "'firstName7', 'lastName7'"
    [7] => "'firstName8', 'lastName8'"
    [8] => "'firstName9', 'lastName9'"
    [9] => "'firstName10', 'lastName10'"
) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-26T06:06:01.137

```
if(isset($_POST['reg'])){
$x=1;
$a = array();
while($x<=10){
 $a[] = "firstName$x";
 $a[] = "lastName$x";
 $x++;
}

print_r($a); 
```

}

# eclipse - 离线安装 CUTE 插件

> ID：11663298
> 
> 赞同：0
> 
> 时间：2012-07-26T06:01:03.367
> 
> 标签：eclipse, plugins, installation, offline

我需要在未连接到 Internet 的计算机上将 CUTE 插件安装到 Eclipse。有人可以告诉我在哪里可以找到 CUTE 插件的 zip 文件。

搜索互联网只给了我“http://www.cute-test.com/updatesite”，它只允许我通过互联网安装插件..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T18:54:22.043

请按照这个问题来了解如何创建更新站点的本地副本：[下载 Eclipse 插件更新站点以进行离线安装](https://stackoverflow.com/questions/1371176/downloading-eclipse-plug-in-update-sites-for-offline-installation)。

# null - 当url在nginx中包含空字符时如何重写

> ID：11663304
> 
> 赞同：0
> 
> 时间：2012-07-26T06:01:18.793
> 
> 标签：null, nginx, rewrite

在这里，当 url 在 nginx 中包含空字符时，我有一个关于重写 url 的问题。

例如，获取 url 是

```
http://localhost/test/\x02x00/ 
```

如果`\x00`出现在 url 中，nginx 将返回 400 错误请求。

我尝试了这个重写规则，但看起来不起作用。

```
rewrite "/test/\x02\x00/"  /new/ 
```

但是，如果我删除`\x00`一切正常。

有人对这种情况有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T11:59:39.210

根据 RFC，URL 不能包含空字符。

# c# - 从队列中的所有用户运行方法

> ID：11663305
> 
> 赞同：5
> 
> 时间：2012-07-26T06:01:23.663
> 
> 标签：c#, asp.net

我的设置：用户有一个页面，他在其中执行一些操作和数据转换。
我将这些操作存储在数据集中（在会话中）。
然后，单击一个按钮，我需要执行更多转换并调用自定义数据库函数，该函数会将每个数据表中的每一行插入到数据库中。我已经解决了所有问题，而且效果很好。

但是，现在，我需要做的是修改按钮单击事件不立即运行，而是将该操作放入队列中（这是所有用户的公共队列）。所以如果 user1 点击按钮，然后 user2 点击按钮，那么我们需要获取 user1 数据集并在其上运行方法，然后才能获取 user2 数据集并在其上运行方法。一个队列。

```
private void btnclick()
{
  DataSet ds = Session["test"] as DataSet;
  PerformFinalTransformation(ds);
  foreach (DataTable dt in ds.Tables)
  {
     foreach (DataRow dr in dt.Rows)
     {
        CallCustomSqlFunction(dr);
     }
  }
} 
```

**如果可能的话，我想避免将数据集存储在数据库中，因为它们对于每个用户（表/列的数量）都不相同。我正在寻找有关如何在 asp.net /c# 中完成此操作的任何指示。（我应该考虑quartz.net 吗？）。我应该寻找哪些概念？并行编程？或asp.net队列？或者是其他东西？甚至无法开始，因为不知道从什么开始。顺便说一句，如果有帮助的话，我会在我的应用程序中使用最新的 DotNetNuke。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T20:49:10.200

1.  为了在重启后存活，您必须将队列存储在数据库中。您可以通过将每个数据集序列化为 xml 并将生成的 xml 存储在`nvarchar(max)`列中来克服数据差异。

2.  运行队列的最佳方式是使用单独的 Windows 服务，该服务将一次选择一项并处理它。您可以对 IIS 执行相同的操作（只是在 中启动另一个线程`Application_Start`），但我不建议这样做是不可扩展的（并且受 IIS 重新启动、池回收等影响）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T20:57:37.430

从架构的角度来看，您的解决方案很好。排队是要走的路。但是，解决方案并非易事。需要考虑的一些事情：

1.  弹性：如果系统崩溃或重启怎么办？队列是否保留？
2.  你将如何从这个队列中消费？ASP.Net 应用程序中的线程（丑陋）？Windows 服务？
3.  并发呢？

根据你的回答，我给你一些选择：

1.  内存中的队列，使用`[ConcurrentQueue][1]`，在线程中上升。可能使用单例来启用对队列的访问。我不建议您这样做。

2.  创建一个服务，通过 WCF 公开接口并从您的 ASP.Net 应用程序访问它。服务也应该持有`[ConcurrentQueue][2]`，访问数据库等将是服务的职责（您仍然会遇到崩溃和数据丢失的问题）。

3.  使用[MSMQ](http://msdn.microsoft.com/en-us/library/windows/desktop/ms711472%28v=vs.85%29.aspx)。还有一些服务来封装接收来自 ASP.Net 的调用（如果您不想让 ASP.Net 直接访问 MSMQ）和访问数据库（MSMQ 调用此服务）的功能。

这些只是我的想法。请随时发表评论，我会尽可能回答（我目前正在工作）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T18:16:15.257

我认为你应该看看并行库中的“任务”......

[http://msdn.microsoft.com/en-us/library/dd537609.aspx](http://msdn.microsoft.com/en-us/library/dd537609.aspx)

处理 asinc 队列非常好。

尽管我建议您使用某种持久性来避免数据丢失，无论是在数据库中的另一个表中，还是在文件中序列化或任何其他方法。

你不应该只相信内存存储。IIS 重置或 Windows 重新启动，甚至 appPool 中的回收都会破坏您未处理的数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T20:58:13.420

由于我对此类问题知之甚少，WCF 和 MSMQ 是很好的解决方案，绝对可以帮助您解决方案。如果你做得好，写一个你想要的数据库实现也不错。您可以将数据添加到数据库中，并`AutoIncrement`在每次插入后设置一个字段。

*但是*，要使用队列解决此问题，以下是一些指南和示例：

*   [在 WCF 中排队](http://msdn.microsoft.com/en-us/library/ms789048.aspx)

*   [在 ASP.NET 应用程序中利用 MSMQ](http://www.codeguru.com/csharp/.net/net_general/internet/article.php/c19563/Leveraging-MSMQ-in-ASPNET-Applications.htm)。

一些示例项目实现：

*   [如何使用 ASP.NET、MSMQ 和 Windows
    服务对长时间运行的进程进行异步编程](http://www.codeproject.com/Articles/8809/How-to-do-asynchronous-programming-using-ASP-NET-M)
*   [在 ASP.NET、VB 中使用队列发送电子邮件](http://www.emailarchitect.net/easendmail/kb/vbnet.aspx?cat=14)
*   [WCF 队列消息](http://www.codeproject.com/Articles/34168/WCF-Queued-Messaging)

希望你觉得它们有用。祝你好运。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T21:05:09.360

与其为每一行调用一个函数将其插入数据库，是否可以使用[表值参数](http://msdn.microsoft.com/en-us/library/bb510489.aspx)提交数据？这是 SQL Server 2008 及更高版本的一个功能，它允许您在单个语句中完全提交一个表。

使用这种解决方案，您可能不需要队列。我发现当我切换到表参数时，我的代码在性能上提高了很多，以至于不需要批处理语句。

以下是您的代码的工作方式：

```
private void btnclick()
{
    DataSet ds = Session["test"] as DataSet;
    PerformFinalTransformation(ds);
    using (SqlConnection conn = new SqlConnection(my_connection_string)) {
        conn.Open();
        using (SqlCommand cmd = new SqlCommand("insert_multiple_tables", conn)) {
            cmd.CommandType = CommandType.StoredProcedure;
            SqlParameter param = new SqlParameter("@table0", SqlDbType.Structured);
            param.Value = ds.Tables[0];
            cmd.Parameters.Add(param);
            SqlParameter param = new SqlParameter("@table1", SqlDbType.Structured);
            param.Value = ds.Tables[1];
            cmd.Parameters.Add(param);
            cmd.ExecuteNonQuery();
        }
    }
} 
```

然后，您可以像这样定义您的存储过程：

```
CREATE TYPE udt_mytable0 AS TABLE (
    col1 int,
    col2 varchar(255),
    col3 datetime,
    -- and so on
)

CREATE TYPE udt_mytable1 AS TABLE (
    col1 bigint
)

CREATE PROCEDURE insert_multiple_tables
    @mytable0 udt_mytable0 READONLY,
    @mytable1 udt_mytable1 READONLY
AS

INSERT INTO mydatabase0
    (col1, col2, col3)
SELECT 
    col1, col2, col3
FROM 
    @mytable0

INSERT INTO mydatabase1
    (col1)
SELECT 
    col1
FROM 
    @mytable1 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-30T21:51:02.653

如果我应该这样做，我可能最终会这样做：

**队列存储**

如果您不想将队列保留在内存中（这将是一个坏主意，请参阅其他答案），您需要在服务器上有某种数据库或其他存储在服务器重置时不会被清除等等那。为此，您当然可以使用像 SQL Server 这样的传统数据库，但也可以使用其他选项。

如果您的服务器上没有 SQL Server 或类似的商业数据库，我建议您使用 RavenDB 之类的文档数据库，或者将队列存储为带有时间戳的一系列文件（XML 序列化）（记得使用某种文件名称中的随机性，因此您不会得到两个具有相同时间戳的文件，这不太可能，但它确实发生了）。这两种情况都存在问题，但我认为没有完美的解决方案，因此这取决于您希望用户使用您的服务的频率。

**清空队列**

根据您使用的队列存储类型，我只需将控制台应用程序设置为服务器上每 5 分钟运行一次的计划任务或您需要它运行的频率。计划任务检查队列中是否有任何新作业，并继续处理最前面的作业。

**结论**

上面的描述是“简单”的方法。它不需要很多技能，也不需要你进入一种全新的框架和类似的东西。

如果是我，我会选择包含文件和计划任务的解决方案，因为它很容易实现和测试。如果您遇到大量流量，您可以随时将存储队列的方式更改为对性能更友好的方式。

最后一点：记得在处理队列中的作业时进行日志记录，以帮助您进行调试；）

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-07-26T08:43:14.973

我认为您可以通过使用来实现这一点**cache**。创建一个包含每个会话数据的**队列**并将队列存储在缓存中。然后使用缓存执行您的自定义数据库操作。当您使用队列时，它将是 FCFS。所以用户 2 的数据只有在用户 1 被使用后才会被使用。

# c# - 在 DataTable 中使用语句

> ID：11663307
> 
> 赞同：1
> 
> 时间：2012-07-26T06:01:26.030
> 
> 标签：c#, asp.net, c#-4.0, using

在我下面的函数中...我想返回 DataTable ..

我应该转换以下行

`DataTable table = CreateTable<T>();`

跟随

```
using(DataTable table = CreateTable<T>())
{
} 
```

## 功能

```
public static DataTable ConvertTo<T>(IList<T> list)
{
    DataTable table = CreateTable<T>();

    int iColCount = table.Columns.Count;
    for (int j = 0; j < iColCount; j++)
    {
        DataColumn myDC = table.Columns[j];
        myDC.DataType = System.Type.GetType("System.String");
    }

    Type entityType = typeof(T);
    PropertyDescriptorCollection properties = TypeDescriptor.GetProperties(entityType);
    foreach (T item in list)
    {
        DataRow row = table.NewRow();
        foreach (PropertyDescriptor prop in properties)
        {
            row[prop.Name] = prop.GetValue(item);
        } table.Rows.Add(row);
    }
    return table;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T06:05:22.387

你为什么要？

```
using (obj)
{
    // Do something
} 
```

基本上是一样的：

```
try
{
    // Do something
}
finally
{
    obj.Dispose();
} 
```

关键是一旦您不再需要它，就释放对象使用的资源。在您的情况下，您将数据表返回给调用函数，因此您仍然需要它。因此，没有理由将您的函数包装在`using`语句中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T06:04:46.063

**using**语句可确保调用**Dispose**，即使在调用对象上的方法时发生异常也是如此。如果您想使用**，**请询问此问题“对象是一次性的吗？”。如果是，那么**使用**是最好的选择。您可能想尝试阅读更多关于此的内容。

[http://msdn.microsoft.com/en-us/library/yh598w02.aspx](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T06:11:21.050

您不需要使用 using inside `ConvertTo<T>(IList<T> list)`，但调用者`ConvertTo<T>(IList<T> list)`负责处理该 DataTable。

```
using (var table = Test.ConvertTo(testList)) 
{
   // do stuff with DataTable
} 
```

编辑：从另一面来看，有这篇文章，其中指出在 DataTable 中即使实现 IDisposable 也没有什么可处置的：[我应该 Dispose() DataSet 和 DataTable 吗？](https://stackoverflow.com/questions/913228/should-i-dispose-dataset-and-datatable)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T06:15:34.617

注意：

> using 语句调用对象的**Dispose**方法，并在调用 Dispose 后立即使对象本身超出范围。

并`Dispose`释放`DataTable`.

这样您就不能同时使用[`using Statement`](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)和返回`DataTable`对象。

```
public static DataTable ConvertTo<T>(IList<T> list)
{
    DataTable resultTable = CreateTable<T>();

    using(DataTable table = CreateTable<T>())
    {
         ....
         resultTable = table;
    }

    // 'table' object disposed already
    return resultTable ;
} 
```

# qt - 如何在Qt中的特定位置显示dockWidget？

> ID：11663314
> 
> 赞同：0
> 
> 时间：2012-07-26T06:01:51.570
> 
> 标签：qt

我想打开我的 Qt 应用程序，如下所示。我有四个dockwidgets，一个是固定的，另一个是可停靠的。

```
 ___________________
|            |mov.  |
| Fixed      |dock  |
| dockWidget |widget|
|____________|______| 
| Mov.   |Movable   |
|dockwid.|dockwidget|
|________|__________| 
```

如何创建一些设置或代码来实现这一点？

我可以使用 .ini 文件进行默认设置，并且用户也可以将其设置保存在 .ini 文件中吗？如何？

这是屏幕截图。 ![在此处输入图像描述](../Images/573699a8846025fb196ee14735311fb5.png)

# magento - 从新订单电子邮件中提取订单信息和客户信息

> ID：11663315
> 
> 赞同：1
> 
> 时间：2012-07-26T06:01:53.363
> 
> 标签：magento, magento-1.5, html-email, magento-1.6

我想从 Magento 网站购买任何产品后发送给客户的新订单电子邮件中提取订单信息和客户信息。

我已经尝试了很多，但没有得到任何结果。

这在 Magento 中是否可行，从几天以来我就一直被这个问题困扰。有没有人可以解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T13:05:08.747

新订单电子邮件的发送在 中处理`Mage_Sales_Model_Order`。

大多数 Magento 模型类（所有扩展`Mage_Core_Model_Abstract`）都实现了[模板方法模式](http://en.wikipedia.org/wiki/Template_method_pattern)——不要与视图模板混淆。模板方法可用于挂钩以两种方式保存、加载和删除工作流：

1.  通过基于配置的类覆盖重写方法（Magento 的另一种处理方式）
2.  观察模板方法中调度的事件。

到目前为止，挂钩模型执行的首选技术是事件观察器系统。此外，对于任何给定的执行，整个 Magento 都会调度数百个事件。

# c - C中memset函数的复杂性

> ID：11663316
> 
> 赞同：9
> 
> 时间：2012-07-26T06:02:11.287
> 
> 标签：c, complexity-theory, big-o, memset

我和一些朋友讨论了一段代码，我们讨论了在 C 中使用 memset 函数，如果我们初始化一个大小为 N 的数组，这个函数的 Big-O 表示法的顺序是什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-26T06:58:11.917

在您可以直接访问页表并且它们以分层方式存储的系统上，`memset`可以`O(log n)`通过将整个虚拟地址映射替换为对填充给定字节值的单个页面的写时复制引用来实现. 但是请注意，如果您将来要对对象进行任何修改，则正常`O(n)`成本`memset`将推迟到页面错误，以便在修改页面时实例化页面的单独副本。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-26T12:38:21.093

您询问了复杂性，但您可能打算询问性能。

复杂性，用符号 O(n) 表示，是一个与算法中的操作数量如何随着问题规模的增长而增长有关的概念。O(n) 意味着必须执行一些与输入大小成比例的步骤。它没有说这个比例是多少。memset 是 O(n)。O(n ² ) 意味着必须执行与 n ²成比例的一些步骤。memset 不是 O(n ² )，因为设置 2n 字节所需的工作量仅为 n 字节的两倍，而不是一般工作量的四倍。

您可能对 memset 的性能更感兴趣，因为 memset 的库版本的执行速度比您可能编写的 C 版本快得多。

库版本执行得更快，因为它使用专门的指令。大多数常见的现代处理器都有指令，允许它们在一条指令中将 16 个字节写入内存。库实现者用汇编语言或类似语言编写了 memset 之类的关键函数，因此他们可以访问所有这些指令。

当你用 C 语言编写时，编译器很难利用这些指令。例如，指向您正在设置的内存的指针可能未与 16 字节的倍数对齐。memset 作者将编写测试指针的代码，并针对每种情况分支到不同的代码，目标是单独设置一些字节，然后使指针对齐，这样他们就可以使用存储 16 字节的快速指令时间。这只是库实现者在编写 memset 之类的例程时要处理的许多复杂问题之一。

由于这些复杂性，编译器不能轻易地将 memset 的 C 实现转化为专家编写的快速代码。当编译器在 C 代码中看到一次写入一个字节的循环时，它通常会生成一次写入一个字节的汇编语言。优化器变得越来越聪明，但复杂性限制了他们被允许做的事情以及在不生成大量代码来处理可能很少发生的情况的情况下他们可以做的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T08:27:23.307

一些 C 库提供`memset()`. 除非您的编译器进行自动矢量化和循环展开，否则您的`for`循环将比矢量化慢得多`memset()`。向量化与否，`memset()`受内存带宽的限制，最小时间与数组大小除以内存带宽成正比，即它是一个 O(n) 操作，因为内存带宽是恒定的。

在 NUMA 机器上 memsetting 非常大的数组可以被线程化以实现 NUMA 节点数量级的加速。有关一些基准，请参阅[此答案](https://stackoverflow.com/a/11579987/1374437)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-26T06:04:01.040

复杂度为 O(n)。这是基本的东西。

# monitoring - 监控 Commons DBCP？

> ID：11663320
> 
> 赞同：7
> 
> 时间：2012-07-26T06:02:37.293
> 
> 标签：monitoring, apache-commons-dbcp

我的 Tomcat 中的一个巨大的 webapp 有时会开始使用太多的 DBCP 连接，从而导致问题。
为了进行调查，我想在每个时间点准确地知道哪个线程/方法正在持有池的连接。不需要是实时的，事后分析就可以了。

一直在找这样的DBCP监控工具，无果，所以准备写我的。
*（如果有兴趣我可以开源）*

这是我的计划：

*   修改[PoolingDataSource.getConnection](http://grepcode.com/file/repo1.maven.org/maven2/commons-dbcp/commons-dbcp/1.4/org/apache/commons/dbcp/PoolingDataSource.java#PoolingDataSource.getConnection%28%29)以记录“ `DBCP+1 <thread-id>`”
*   修改[DelegatingConnection.close](http://grepcode.com/file/repo1.maven.org/maven2/commons-dbcp/commons-dbcp/1.4/org/apache/commons/dbcp/DelegatingConnection.java#DelegatingConnection.close%28%29)以记录“ `DBCP-1 <thread-id>`”
*   编写一个小脚本来生成这个简单的 CSV 用于可视化：

![DBCP 监控](../Images/5fb645715c7fd903f3edab1d9a516517.png)

问题：
我是否遗漏了一些使该想法无效的 Commons-DBCP 1.4 概念？
还是我在重新发明轮子？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-06T04:21:53.040

没有这样的工具，所以我创建了它：

[https://github.com/nicolas-raoul/Commons-DBCP-monitoring](https://github.com/nicolas-raoul/Commons-DBCP-monitoring)

它监控 Commons DBCP 的使用情况（使用/等待连接）并允许创建这样的图表：

![在此处输入图像描述](../Images/87a83e52149670382cbd0ed667fc8057.png)

![在此处输入图像描述](../Images/43033bf35a4c70af123c9643d0a399a6.png)

我[问](http://mail-archives.apache.org/mod_mbox/commons-user/201208.mbox/%3CCAHCKxyd3p+R6nbUPbk2dpNo7rzwJRDFvPOubJ1V6Y6NGHb3XcA@mail.gmail.com%3E)我的假设在 Commons DBCP 邮件列表中是否有效。

# ios - ios添加一个对象作为子视图并释放给EXC_BAD_ACCESS异常，为什么？

> ID：11663323
> 
> 赞同：0
> 
> 时间：2012-07-26T06:02:52.400
> 
> 标签：ios, xcode, debugging, memory-management

我有一个简单的应用程序，我在其中以编程方式添加 UIButton，如下所示

```
 for(int i=0;i<[self.contentList count];i++)
    {
        UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
        [button addTarget:self action:@selector(buttonSelection:)forControlEvents:UIControlEventTouchDown];
        [button setTitle:[ [contentList objectAtIndex:i] valueForKey:@"nameKey"]  forState:UIControlStateNormal];
        button.tag=i+kButtonTagOffset;
        [self.view insertSubview:button atIndex:0];
       // [button release];

    } 
```

然后在视图更改其方向时访问它以如下调整其位置

```
 for (int row = 0; row < Portrait_TILE_ROWS; ++row)
    {
        for (int col = 0; col < Portrait_TILE_COLUMNS; ++col)
        {
            int index = (row * Portrait_TILE_COLUMNS) + col;
            CGRect frame = CGRectMake(LandScape_TILE_MARGIN + col * (LandScape_TILE_MARGIN + LandScape_TILE_WIDTH),
                                      LandScape_TILE_MARGIN + row * (LandScape_TILE_MARGIN + LandScape_TILE_HEIGHT),
                                      LandScape_TILE_WIDTH, LandScape_TILE_HEIGHT);

            UIButton *tmb= (UIButton *)[self.view viewWithTag:index+kButtonTagOffset];
            if([tmb isKindOfClass:[UIButton class]]) //isKindOfClass
            {   
                [  [self.view viewWithTag:index+kButtonTagOffset] setFrame:frame];

            }

        }
    } 
```

我的第一个问题是，如果我在添加到子视图后释放 UIBUtton 并且它只发生在设备上而不是模拟器上，为什么会出现 EXC_BAD_ACCESS 错误。我认为当添加到子视图时，对象的保留计数会增加一个并稍后访问它不会提出那个错误任何想法？

我如何在 xcode 调试器中找出什么对象以及在哪里引发了 EXC_BAD_ACCESS 异常，我通过简单地注释部分代码就知道了！

谢谢米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T06:12:39.937

您需要重新阅读内存管理和可可命名约定的基础知识。你没有在它上面调用 alloc、copy 或 retain ......所以释放它是不正确的。该构造函数返回一个*自动释放*的对象。如果这个概念对你来说很难，请切换到 ARC。

至于在 Xcode 4 中找出错误在哪一行 - > [“运行 > 在 Objective-C 异常上停止”？](https://stackoverflow.com/questions/4961770/run-stop-on-objective-c-exception-in-xcode-4)

# java - Spring StopWatch 问题 - 一个进程有多个进程？

> ID：11663327
> 
> 赞同：0
> 
> 时间：2012-07-26T06:03:04.447
> 
> 标签：java, spring, stopwatch

问题描述：我正在调用一个具有多个进程的进程。假设进程 A 内部有多个进程。

> 例子：进程A调用b进程B调用c进程C调用D进程D进程结束。C 进程结束 B 进程最终结束 A 进程结束。在这种情况下，我不确定如何创建 Spring StopWatch。

技术细节：似乎我们只能有像A秒表结束然后我们才能启动B秒表这样的过程

```
StopWatch stopWatch = new StopWatch("Spring Stop Watch");
stopWatch.start("A");
processA();
stopWatch.stop();    
stopWatch.start("B");
processB()
stopWatch.stop(); 
```

如果我在停止 A 的秒表之前启动秒表，则会引发错误。有人可以建议如何进行还是有什么好的秒表可用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T07:47:55.217

我认为 StopWatch 不支持跟踪嵌套执行。这是一个非常简单的工具。如果您需要更复杂的支持，您应该考虑使用[JaMon 之](http://jamonapi.sourceforge.net/)类的东西。方法类似，但更复杂。我认为还有一种方法可以使用它的 spring AOP - 透明地向 spring bean 添加分析。

# c++ - c++ boost lexical cast double to string

> ID：11663328
> 
> 赞同：4
> 
> 时间：2012-07-26T06:03:05.970
> 
> 标签：c++, string, boost, double

对于以下代码

```
std::cout<<boost::lexical_cast<std::string>(2.34)<<std::endl 
```

我得到以下输出：

```
2.3399999999999999 
```

而如果我这样做

```
 double d = 2.34;
 std::stringstream ss;
 ss<<d;
 std::string s = ss.str();
 cout<<s<<endl; 
```

我得到以下输出：

```
 2.34 
```

为什么会这样？显然，我正在寻找后者的输出表示，而不是前者。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T06:19:18.393

这与 boost::lexical_cast 无关，但它伴随着 double 的内部表示：

另请参阅此答案： [C++ internal representation of double/float](https://stackoverflow.com/questions/8656947/c-internal-representation-of-double-float)

# java - Mac OSX 10.7.3 Intellij Idea 12 Android 模拟器崩溃

> ID：11663329
> 
> 赞同：1
> 
> 时间：2012-07-26T06:03:06.130
> 
> 标签：java, android, ios, macos, intellij-idea

我在 mac mini 上运行 android 模拟器时遇到了一些问题。我使用 Intellij Idea 社区版并在尝试运行应用程序时出现此错误。

**I/O 错误：命令“/Users/vladimir/Downloads/androidSdk/platform-tools/aapt package -m -J /private/var/folders/yh/sdp_mx2n1q9263qv9gfmncr40000gn/T/android_apt_output4569562992703377997tmp -M /Users/vladimir/IdeaProjects/demoApplication /AndroidManifest.xml -S /Users/vladimir/IdeaProjects/demoApplication/res -I /Users/vladimir/Downloads/androidSdk/platforms/android-15/android.jar" 执行失败，退出代码 138**

我是Mac新手。我尝试重新安装android sdk，复制并重新创建应用程序项目。尝试授予项目和 android sdk 文件夹的所有权限。但什么都没有改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-21T19:15:13.967

我遇到了同样的问题，并在搜索中找到了您的帖子。我使用的是版本 19 的构建工具，并且能够通过执行以下操作来解决该问题：

1.  通过 SDK 管理器卸载 build 19 工具
2.  改用 build 18 工具重新构建项目。

此版本的构建工具将我的 strings.xml 资源标记为 xml 中有错误字符。一旦我删除了这个，构建再次工作。

希望这可以帮助。

# javascript - 通过单击 a 元素显示 5 li

> ID：11663332
> 
> 赞同：-2
> 
> 时间：2012-07-26T06:03:14.677
> 
> 标签：javascript, jquery, html-lists

我有一个很大`ul`的项目清单`li`。我想使用 JavaScript，但我不知道如何。我怎样才能做到这一点：

前 5`li`是可见的。其余的都是隐藏的。当您单击更多按钮时。每次点击。它提供 5 到 li 的显示。我在 jsfiddle 中制作 html。

[http://jsfiddle.net/FnBrx/](http://jsfiddle.net/FnBrx/)

谢谢各位帮忙，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T06:11:19.253

怎么样

```
$('li:gt(3)').hide();​​​​​​​​​​​​​​
$('.more').on('click', function(){
    $('li:visible:last').nextAll(':lt(4)').show();
}); 
```

[小提琴](http://jsfiddle.net/FnBrx/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T06:07:44.570

```
$('.more').click(function() {
    $('li a:not(:visible)').slice(0,5).show().css('color','red');
    return false;
});​ 
```

[更新的演示](http://jsfiddle.net/FnBrx/8/)

[`.slice(0,5)`](http://api.jquery.com/slice/)将匹配集减少到仅前五个元素

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T06:12:08.880

你可以做这样的事情

 `````
$('li').each(function(rowIndex){
   if(rowIndex<=5)
        $(this).show();
    }
else
{
$(this).hide();
}
}); 
````  `然后有一个按钮和点击事件实现相同的功能。``

# java - 如何渲染从 Blender 导入的 3D 外星人？

> ID：11663335
> 
> 赞同：0
> 
> 时间：2012-07-26T06:03:29.087
> 
> 标签：java, 3d, shader, ogre, jmonkeyengine

尝试渲染在 Blender 中完成的基本外星人时，我得到了好坏参半的结果：

![在此处输入图像描述](../Images/cd1470a4f8d14fa2ada3d9abc6a430e7.png)

我导出到 Ogre 3D 并在 Eclipse 中加载它：

![在此处输入图像描述](../Images/9e840b7a6983b484167b7780b8222ed3.png)

然后当我在我的代码中加载它并尝试渲染它时，材质不会渲染：

![在此处输入图像描述](../Images/b9a878884c5184635af3d663a6c00140.png)

你能告诉我我必须做什么才能在我的场景中实现完整的外星人吗？我在 Jmonkeyengine 中使用的代码是

```
 Spatial model3 = assetManager
            .loadModel("objects/creatures/alien/alien.mesh.xml");
    model3.scale(0.3f, 0.3f, 0.3f);
    model3.setLocalTranslation(-40.0f, 3.5f, -20.0f);
    rootNode.attachChild(model3); 
```

## 更新

我从导出中得到了这样的材料文件：

```
dev@dev-OptiPlex-745:~$ ls workspace/DungeonWorld2/assets/objects/creatures/alien/
alien.mesh          Material.002.material  Material.005.material
alien.mesh.xml      Material.003.material
alien.skeleton.xml  Material.004.material
dev@dev-OptiPlex-745:~$ 
```

此材质代码实际上会在场景中生成材质，但它不是来自搅拌机的材质：

`model3.setMaterial( new Material(assetManager,
"Common/MatDefs/Misc/Unshaded.j3md") );`

结果：

![在此处输入图像描述](../Images/791c08948bb0d00403fc3c7925c3b893.png)

但是，在不定义材料的情况下加载大象的 3D 模型确实有效：

```
Spatial elephant = (Spatial) assetManager.loadModel("Models/Elephant/Elephant.mesh.xml");
float scale = 0.05f;
elephant.scale(scale,scale,scale);
elephant.setLocalTranslation(-50.0f, 3.5f, -20.0f);

    control = elephant.getControl(AnimControl.class);
    control.addListener(this);
    channel = control.createChannel();

    for (String anim : control.getAnimationNames())
        System.out.println("elephant can:"+anim); 
```

上面的代码正确地渲染了大象，那么为什么我不能为外星人导出这样的网格呢？我试图明确加载材料，但它不适合我：

```
 Spatial model3 = assetManager
            .loadModel("objects/creatures/alien/alien.mesh.xml");
    model3.scale(0.3f, 0.3f, 0.3f);
    model3.setLocalTranslation(-40.0f, 3.5f, -20.0f);
    model3.setMaterial( new Material(assetManager,  
            "objects/creatures/alien/alien.material") );
    rootNode.attachChild(model3); 
```

上面生成了一个异常，我真的不知道我正在加载什么材质文件，以及导出生成的两个或三个其他材质文件如何处理：

```
java.lang.ClassCastException: com.jme3.material.MaterialList cannot be cast to com.jme3.material.MaterialDef
    at com.jme3.material.Material.<init>(Material.java:116)
    at adventure.Main.simpleInitApp(Main.java:309)
    at com.jme3.app.SimpleApplication.initialize(SimpleApplication.java:225)
    at com.jme3.system.lwjgl.LwjglAbstractDisplay.initInThread(LwjglAbstractDisplay.java:129)
    at com.jme3.system.lwjgl.LwjglAbstractDisplay.run(LwjglAbstractDisplay.java:205)
    at java.lang.Thread.run(Thread.java:679) 
```

## 更新

以这种方式加载其他模型是有效的：

```
 BlenderKey blenderKey = new BlenderKey(
            "objects/creatures/troll/troll.mesh.xml");

    Spatial troll = (Spatial) assetManager.loadModel(blenderKey);
    troll.setLocalTranslation(new Vector3f(-145, 15, -10));
    rootNode.attachChild(troll);

    BlenderKey blenderKey2 = new BlenderKey(
            "objects/creatures/spaceman/man.mesh.xml");

    Spatial man = (Spatial) assetManager.loadModel(blenderKey2);
    man.setLocalTranslation(new Vector3f(-140, 15, -10));
    rootNode.attachChild(man); 
```

我在我的游戏中找到了模型，它们看起来还不错，巨魔和太空人原本都是 .blend 文件。 ![在此处输入图像描述](../Images/1a90ae3c3f114f415763c7fa8f9fa2f3.png)

现在，当我完成它并且正在加载材料时，它会好得多。外星人现在唯一剩下的问题是头上的洞，这里也得到了回答。

```
 BlenderKey blenderKey = new BlenderKey(
            "objects/creatures/alien/alien.mesh.xml");

    Spatial alien = (Spatial) assetManager.loadModel(blenderKey);
    alien.setLocalTranslation(new Vector3f(-145, 15, -10));
    rootNode.attachChild(alien); 
```

![在此处输入图像描述](../Images/6d75067b2e4f040514561161b157853e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:59:57.307

你没有写任何关于你的材料的东西——你写了一个并正确使用了吗？你得到的问题似乎是我缺乏材料。

一般来说，你需要一些 *.material 文件，可能还有一些纹理（如果你在 Blender 中使用它们）。一开始你可以使用 Ogre 附带的一种材料，你只需要添加：

model3.setMaterialName("示例/Rockwall");

然后看看它是否改变了什么。如果您仍然遇到问题，您可以查看“Ogre.log”文件 - 它总是值得检查，因为所有错误都在那里。

* * *

我在这里也看到了第二个问题-您将对象渲染为“单面”，而搅拌机可能渲染为双面网格，因此您会在头上找到孔。您可以在材质中选择双面，但最好（并且在渲染过程中更快）只创建没有孔的模型:)。

# date - 如何在javascript中将日期从dd mon yyyy拆分为dd mon？

> ID：11663337
> 
> 赞同：0
> 
> 时间：2012-07-26T06:03:39.667
> 
> 标签：date, javascript

我使用 javascript 创建了一个表，其中包含 和 之类的`ID,name`列`birth date`。我还对该表进行了排序。

但是现在我必须将日期从`dd mon yyyy`to分开`dd mon`。

例如：从`4 Nov 1989`到`4 Nov`

我应该怎么办？

这是代码......我只是想更新它......

```
<script>

    var now = new Date();

now.format("dd mmm");
var allNums = false;
var allDates = false;
var lastSort = -1;
var absOrder = true;

function setDataType(inValue) {

    var isDate = new Date(inValue);
    if (isDate == "NaN") {
        if (isNaN(inValue)){

            inValue =  inValue.toUpperCase();
            allNums = false
            allDates = false
            return inValue;
          }
        else {

            allDates = false
            return parseFloat(1*inValue);
          }
        }
  else {

        allNums = false
        return inValue ;
      }
  }

function sortTable(col){
    if (lastSort == col){

        absOrder ? absOrder = false : absOrder = true
    }
    else{
        absOrder = true
    }
    lastSort = col
    allTR = document.getElementById("dataTable").childNodes[0].childNodes

    totalRows = allTR.length
    colToSort = new Array()
    colArr = new Array()
    copyArr = new Array()
    resultArr = new Array()

    allNums = true
    allDates = true

    for (x=1; x < totalRows; x++){
        colToSort[x-1] = setDataType(allTR[x].childNodes[col].innerText)
        colArr[x-1] = allTR[x]
    }

    for (x=0; x<colToSort.length; x++){
        copyArr[x] = colToSort[x]
    }

    if (allNums){
        colToSort.sort(numberOrder)
    }
    else if (allDates){
        colToSort.sort(dateOrder)
    }
    else{
        colToSort.sort(textOrder)
    }

    for(x=0; x<colToSort.length; x++){
        for(y=0; y<copyArr.length; y++){
            if (colToSort[x] == copyArr[y]){
                boolListed = false
                //searcg the ouput array to make sure not to use duplicate rows
                for(z=0; z<resultArr.length; z++){
                    if (resultArr[z]==y){
                        boolListed = true
                        break;
                    }
                }
                if (!boolListed){
                    resultArr[x] = y
                    break;
                }
            }
        }
    }

    for (x=0; x<resultArr.length; x++){
        allTR[x+1].swapNode(colArr[resultArr[x]])
    }
}

function numberOrder(a,b){
    absOrder ? rVal = b - a : rVal = a - b
    return rVal
}

function dateOrder(a,b){
    absOrder ? rVal = Date.parse(a) - Date.parse(b) : rVal = Date.parse(b) - Date.parse(a)
    return rVal
}

function textOrder(a,b){
    if (a.toString() < b.toString()){
        absOrder ? rVal = -1 : rVal = 1
    }
    else{
        absOrder ? rVal = 1 : rVal = -1
    }
    return rVal
}
</script>
<body style="background-color:AliceBlue">
<h1 style="color:Blue" ><b> Employee Birthday Information </b></h1>
<br/>
<br/>

<h><b> Sort by : </b></h>

<input type="radio"  onclick="sortTable(0)" name=sort> Employee Id </input>
<input type="radio"  onclick="sortTable(1)" name=sort> Employee Name </input>
<input type="radio"  onclick="sortTable(2)" name=sort> Employee Birthdate </input>

</br>
</br>
<table id="dataTable"  align="center" cellpadding="10" cellspacing="20" bgcolor="LightCyan">
<tr>
    <th>Employee Name</th>
    <th>Employee Id</th>
    <th>Employee Birthdate</th>

</tr>
<td> 1 </td>
<td> Smita  </td>
<td> 4 Nov 1989</td>
</tr>
<tr>
<td> 26 </td>
<td> Priyanka </td>
<td> 29 Dec 1990 </td>
</tr>
<tr>
<td> 15 </td>
<td> Jack  </td>
<td> 7 Mar 1987 </td>
</tr>
<td> 4 </td>
<td> Joe </td>
<td> 4 June 1986 </td>
</tr>
<td> 48 </td>
<td> Julie </td>
<td> 3 July 1989 </td>
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T06:17:38.677

```
var now = new Date();

now.format("dd mmm"); 
```

[在此处](http://blog.stevenlevithan.com/archives/date-time-format)查看更多示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T07:00:23.270

从...开始：

```
var s = '4 Nov 1989'; 
```

那么你想要：

```
var newFormat = s.match(/\d+ \w{3}/)[0]; 
```

或（也许更健壮）：

```
var newFormat = s.replace(/\s+\d+$/,''); 
```

# java - 如何在 Jsp 页面中执行 DropDownBox IndexChanged 事件？

> ID：11663341
> 
> 赞同：0
> 
> 时间：2012-07-26T06:03:58.353
> 
> 标签：java, javascript, ajax, jsp

我在 jsp 页面中添加 DropDown。
并且我试图在索引更改后准确地重定向页面，而无需单击任何按钮。
我怎样才能将它添加到jsp页面？

```
<script type="text/javascript" src="js/jquery-1.4.4.min.js"></script>
<script type="text/javascript">
$(function(){
      $('com').bind('change', function () {
          var value = $(this).val();
          if(value==1) window.location = "servlet1?id=1";
if(value==2)window.location = "servlet1?id=2";
return false;
});
});
</script>
<body>
<select id="com">
<option></option>
<option value="1">Link1</option>
<option value="2">Link2</option>
</select></body> 
```

不工作，是否缺少任何东西，请

当我更改索引时，我想重定向到相应的链接/页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T06:11:43.747

使用 jQuery 你可以这样做，

```
$(function(){
      // bind change event to select
      $('#ID_OF_select_ITEM').bind('change', function () {
          var value = $(this).val(); // get selected value
          window.location = someURL; // redirect based on the value
      return false;
      });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T10:47:39.340

只需使用 '#com' 而不是 'com' 可能会起作用

如果仍然无法正常工作，请告诉我们我们有此任务的替代方案

# javascript - ASP.NET MVC：从 javascript 传递到 MVC 控制器操作后，二维数组为空

> ID：11663345
> 
> 赞同：1
> 
> 时间：2012-07-26T06:04:10.140
> 
> 标签：javascript, jquery, asp.net-mvc, asp.net-mvc-3

我有一个二维字符串数组（12x5），我想将它从 javascript 函数传递到 asp.net mvc 控制器操作。在 IE 中使用开发人员工具，我知道该数组填充了我想要的内容，因此问题出在 post 函数中或周围。

```
var dateArray = new Array();
//Populate Data

$.post("/Event/SetDateCalculationParameters", { dates: dateArray }, function () {
    //Stuff
});
} 
```

这是 MVC 控制器动作

```
public ActionResult SetDateCalculationParameters(string[][] dates)
    {
        //Do stuff

        return Json(true);
    } 
```

在控制器动作中，日期数组中有 12 项，但它们都是空的。我已经在这里待了几个小时，我很难过。有没有更简单的方法来做到这一点？还是我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T06:22:58.547

您可以将它们作为 JSON 请求发送：

```
var dateArray = new Array();
dateArray[0] = [ 'foo', 'bar' ];
dateArray[1] = [ 'baz', 'bazinga' ];
// ... and so on

$.ajax({
    url: '@Url.Action("SetDateCalculationParameters", "Event")',
    type: 'POST',
    contentType: 'application/json',
    data: JSON.stringify({ dates: dateArray }),
    success: function (result) {

    }
}); 
```

动作签名必须如下所示：

```
[HttpPost]
public ActionResult SetDateCalculationParameters(string[][] dates) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T13:01:16.313

为了解决同样的问题，我创建了应该应用于参数的 JsonModelBinder 和 JsonModelAttribute：

```
public class JsonModelBinder : IModelBinder
    {
        private readonly static JavaScriptSerializer _serializer = new JavaScriptSerializer();

    public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        var stringified = controllerContext.HttpContext.Request[bindingContext.ModelName];

       if (string.IsNullOrEmpty(stringified))
            return null;

        return _serializer.Deserialize(stringified, bindingContext.ModelType);
    }
}

public class FromJsonAttribute : CustomModelBinderAttribute
{
    public override IModelBinder GetBinder()
    {
        return new JsonModelBinder();
    }
} 
```

您的控制器将如下所示：

```
public ActionResult SetDateCalculationParameters([FromJson]string[][] dates) 
```

您还应该对数组进行字符串化：

```
$.post("/Event/SetDateCalculationParameters", { dates: JSON.stringify(dateArray)}, function () {             //Stuff         });         } 
```

这个对我有用。

# android - 如何在 Android 2.2 及更高版本中获得白色圆形进度条？

> ID：11663346
> 
> 赞同：1
> 
> 时间：2012-07-26T06:04:10.273
> 
> 标签：android, colors, progress-bar

当我使用以下代码时，默认情况下我会得到一个黑色的圆形进度条：

```
<RelativeLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent" android:layout_height="fill_parent"
 android:background= "@drawable/login_screen_background">

  <ProgressBar android:layout_centerInParent="true" 
  android:layout_width="wrap_content" android:layout_height="wrap_content" 
  android:id="@+id/authonticateProgressBar"        android:layout_centerHorizontal="true"></ProgressBar>

 <TextView android:id="@+id/sigingInText" 
  android:layout_below="@+id/authonticateProgressBar"     android:layout_width="wrap_content"
  android:layout_height="wrap_content" android:text="@string/signing_in_text"
  android:textColor="#FFFFFF" android:background="@null"
  android:layout_centerHorizontal="true" android:layout_marginTop="50dip"
  android:textSize="17dp">
  </TextView>

</RelativeLayout> 
```

我也尝试添加

```
style="@android:style/Widget.ProgressBar.Inverse" 
```

但我没有得到一个白色的圆形进度条。我将背景设置为黑色图像。

# powershell - 在 Powershell 中，您可以使用 copy-item 命令复制目录的所有内容，包括文件夹吗？

> ID：11663348
> 
> 赞同：2
> 
> 时间：2012-07-26T06:04:32.223
> 
> 标签：powershell, backup, copy-item

我知道如何使用不同的命令来做到这一点，但有没有办法让 copy-item cmdlet 也将目录复制到目标文件夹，例如，如果我想复制 C:\users 文件夹中的所有内容，包括所有目录和子目录是否可以使用 copy-item 命令。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T06:40:35.373

你应该能够做到这一点：

```
copy-item C:\users -recurse

copy-item C:\users -destination c:\somewhereelse -recurse 
```

第一种方式假设您当前位于目标文件夹中，第二种方式是显式的。

# java - 建立与另一个 Web 应用程序的 URLConnection 不适用于 URLConnection .connect()？

> ID：11663351
> 
> 赞同：0
> 
> 时间：2012-07-26T06:05:03.283
> 
> 标签：java, jakarta-ee, urlconnection, httpsurlconnection

这是我正在使用打开 URLConnection 到另一个 webapllication 的代码

```
try {   
 URL   url = new URL("https://mySecondWebApp/Cart");
 HttpsURLConnection conn1 = (HttpsURLConnection) url.openConnection();//line1
 conn1 .connect();//line 2 does not establishes the connection
 conn1.getInputStream();// line 3 works which means that i get control to my app2 in debugger.But this also passes the control to IOException stating error java.io.FileNotFoundException: https://mySecondWebApp/Cart

 }
  catch (MalformedURLException e) {
    log.error("MalformedURLException" + e);

  }
  catch (IOException e) {

  log.info("getting IO error");
  } 
```

**我不明白为什么第 2 行没有与 app2 建立连接，而第 3 行没有？第二件事是为什么我在第 3 行之后得到文件 notfound 异常，即使它成功连接到我想避免的 app2。我的目的只是建立与 app2 的连接，以便我在 app2 的 java 代码中获得控制权**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T06:57:50.293

来自 javadoc 的 connect() 方法预计不会执行此任务：

```
public abstract void connect()
                      throws IOException 
```

*如果此类连接尚未建立，则打开指向此 URL 引用的资源的通信链接。如果在连接已经打开时调用 connect 方法（由值为 true 的 connected 字段指示），则忽略该调用。 **URLConnection 对象经历两个阶段：首先它们被创建，然后它们被连接。在创建之后和连接之前，可以指定各种选项（例如，doInput 和 UseCaches）**。连接后，尝试设置它们是错误的。如果需要，依赖于连接的操作（如 getContentLength）将隐式执行连接。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T06:36:02.627

方法名称可能是您混淆的根源。openConnection() 方法不建立连接，它只是准备连接对象。这是该方法的 API 链接：

[URL.openConnection()](http://docs.oracle.com/javase/7/docs/api/java/net/URL.html#openConnection%28%29)

以下内容写在那里：“应该注意，URLConnection 实例在创建时不会建立实际的网络连接。这只会在调用 URLConnection.connect() 时发生。”

**编辑：** 我混淆了这些线（谢谢 Ankit），因此上述内容不相关。Connecet 确实建立了连接，但实际上这里不需要它，因为如果尚未建立连接，getInputStream 方法将建立连接。

# web-audio-api - 如何连接 JQuery UI 滑块和 Web 音频 API gainNode

> ID：11663356
> 
> 赞同：0
> 
> 时间：2012-07-26T06:05:26.020
> 
> 标签：web-audio-api

我正在尝试使用 Web Audio API 将 JQuery 滑块连接到振荡器的增益节点。

振荡器工作，有一个工作增益滑块，还有一个 JQuery 滑块。我希望 JQuery 滑块像其他滑块一样控制增益。

这是到目前为止的代码

[http://jsfiddle.net/taoist/JCTJj/2/](http://jsfiddle.net/taoist/JCTJj/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T21:37:34.277

给你：http: [//jsfiddle.net/JCTJj/19/](http://jsfiddle.net/JCTJj/19/)

```
$(function() {
    var webSlider = document.getElementById('volume');
    var output = $('#gain');
    var sliderParams = {
        'orientation': "vertical",
        'range': "min",
        'min': 0,
        'max': 1,
        'animate': false,
        'step': 0.01,
        'slide': function(event, ui) {  
            window.gainNode.gain.value = ui.value;
            output.val(window.gainNode.gain.value);
        },
        'stop': function(event, ui) {
            console.log(window.gainNode.gain.value);
        }
    };

    $('#sliderOne').slider(sliderParams);
    webSlider.addEventListener('change', function () {
        window.gainNode.gain.value = this.value;
        output.val(window.gainNode.gain.value);
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T07:49:09.253

你的增益函数应该收到一个像

```
function gain(value) {

    gainNode.gain.value = value;
} 
```

然后在 jQuery 滑块中执行类似的操作

```
slide: function( event, ui ) {

    gain(ui.value);                    
} 
```

# grails - 在显示页面中显示图像

> ID：11663370
> 
> 赞同：0
> 
> 时间：2012-07-26T06:06:52.333
> 
> 标签：grails, gsp

我可以在我的`create.gsp`页面中选择照片上传。我能够在我的创建页面中看到上传的照片，并且能够将我的照片上传到数据库中，但在我的展示页面中看不到那张照片。

这是`create.gsp`页面

```
<html>        
    <head>           
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />         
        <meta name="layout" content="billing-without-grid" />         
            <g:set var="entityName"         
        value="${message(code: 'skeletonBill.label', default: 'SkeletonBill')}" />            
        <title><g:message code="default.create.label"        
         args="[entityName]" /></title>           

        <script>      
            function showPhoto(imageFile) {        
             var fileReader = new FileReader();       
             var image = document.getElementById("uploadPhotoFile");       
             fileReader.onload = function(e) {          
            image.src = e.target.result;          
            }      
            fileReader.readAsDataURL(imageFile.files[0]);       
        }        
       </script>         
    </head>           
    <body>         
     <div class="body">          
     <div class="container-fluid">          
     <div class="row">          
     <div class="span6">         
         <img src="" name="uploadPhotoFile" id="uploadPhotoFile"            
                    height="200" width="160" />       
     <table style="width: 25%">        
     <tbody>       
     <tr class="prop">       
     <td valign="top" class="name"><label for="uploadPhoto"><g:message                        code="uploadInformation.uploadPhoto.label" default="Upload Photo" /></label></td>            
        <td valign="top" class="value ${hasErrors(bean: uploadInformationInstance,           field:    'uploadPhoto', 'errors')}">  
         <input type="file" id="uploadPhoto" name="uploadPhoto"         onchange="showPhoto(this)" />            
        </td>
        </tr>         
        </tbody>         
    </table>         
    </div>         
        </div>         
        </div>    
    </div>        
  </body>           
</html> ' 
```

我创建的域类

```
class UploadInformation {       
     static constraints = {     
         uploadPhoto(nullable:true, maxSize: 16384 /* 16K */)       
     }      
     byte[] uploadPhoto        
     static transients = ["uploadPhoto"]         
     static mapping = {      
         uploadPhoto column:"uploadPhoto",sqlType: "blob"         
    }           
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T08:33:40.697

阿努杰。

快速查看您的代码后我看到的问题是：

```
static transients = ["uploadPhoto"] 
```

***UploadPhoto***不会被保存到数据库，因为它被声明为瞬态。
查看更多详细信息[瞬态属性](http://grails.org/doc/latest/ref/Domain%20Classes/transients.html)

# ruby-on-rails - ref 属性未在 Facebook Insights 中注册

> ID：11663371
> 
> 赞同：1
> 
> 时间：2012-07-26T06:06:55.847
> 
> 标签：ruby-on-rails, facebook, facebook-graph-api, koala

我正在使用`put_wall_post`Koala [gem](http://rubydoc.info/github/arsduo/koala/master/Koala/Facebook/GraphAPIMethods#put_wall_post-instance_method)的调用在经过身份验证的用户朋友的 Facebook 墙上创建通知。我还在`ref`附件哈希中发送一个属性，这是调用的第二个参数，如此处[所述](http://rubydoc.info/github/arsduo/koala/master/Koala/Facebook/GraphAPIMethods#put_wall_post-instance_method)。

附件哈希看起来像这样：

```
{
  "message"=>"Some random message", 
  "name"=>"Some random name", 
  "description"=>"Some random description", 
  "picture"=>"http://someurl.com/images/some_feed_icon.png", 
  "ref"=>"some_ref"
} 
```

但这不起作用 - 我无法`some_ref`在 Insights Dashboard 中将其视为故事类型。有任何想法吗？

# drools - 无法在 .drl 文件中的对象中获取数据

> ID：11663374
> 
> 赞同：0
> 
> 时间：2012-07-26T06:07:19.077
> 
> 标签：drools

我的 .drl 文件中有两条规则

```
rule "Monitor"  
when
    s : Test1( type == Test1.X )    
    n : Test123()
then
    n.monitor();        
    drools.setFocus("Rules");
end

rule "Utilization"
agenda-group "Rules"
when
    s : Test1( type == Test1.X , newValue > oldValue )
    n : Test123()
then
    //Do something
end 
```

monitor() 是Test123 类中的一个方法，该方法通过使用Getters 和Setters 为Test1 类中的一些变量设置值。这个方法返回一个对象'object'。在我的第二条规则中，我想比较对象“object”中的值（newValue > oldValue）。我该如何执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:38:57.883

您可以将旧值保存在全局变量中，并在第二条规则中与它进行比较。

# javascript - 生成动态信息 windows php Javascript Googlemaps

> ID：11663375
> 
> 赞同：0
> 
> 时间：2012-07-26T06:07:24.210
> 
> 标签：javascript, php, google-maps

我希望能够使用由于位置 [i] [3] 中的某些变量而创建的 php for 循环为每个信息窗口动态生成信息，因此它将在每次传递时动态提取信息，我可以简单地分配它。但由于某种原因，如果我尝试插入它。代码生成良好......在源页面上......但地图甚至不会加载......有没有人对此有修复......并帮助使其工作......提前多谢！信息已在单独的脚本中动态提取 $vars 仅用于计数以从各个数组中提取信息。地图标记与 lats 和 lng 一起生成很好，它是位置数组的 [i][3] 部分，这很时髦，而且 -- ps。是的，代码中的 $vars 已再次设置为零。但那是在侧面脚本中。所以它确实提取了所有正确的信息。

```
'<'script type="text/javascript">

    //PHP - Lat,Lng ARRAY
    var locations = [

    php code <?php
    $x = 0; $i = 0; $j = 0;
    for($aa = 0; $aa < $count; $aa++) {
    echo "['" . $business_name[$x] . "'," . $lat[$i] . "," . $lng[$j] . "," . "<div class='coupon'><div class='ribbon'><div class='ribbon-stitches-top'></div><strong class='ribbon-content'><h1>$deal[$y]</h1></strong><div class='ribbon-stitches-bottom'></div></div><div class='picture_coupon'><img src='$deal_photo[$b]' width='150' height='100' /></div><div class='deal'><center><h1>$deal[$y]</h1>$deal_info[$a]<b>Expires: $deal_expiration[$c]</b></center></div></div>" . "],";
    $x++; $i++; $j++; $id++;
    }
    ?>  END of PHP CODE
    [ , , , ]
    //['Maroubra Beach', -33.950198, 151.259302, 6]
    ];  
    //PHP - Lat,Lng ARRAY 
      var map;

      function initialize() {
        var myOptions = {
          zoom: 13,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        map = new google.maps.Map(document.getElementById('map_canvas'),
            myOptions);

        // Try HTML5 geolocation
        if(navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(function(position) {
            var pos = new google.maps.LatLng(position.coords.latitude,
                                             position.coords.longitude);

// INVERSE CODE PHP DYNAMIC

    var infowindow = new google.maps.InfoWindow();

    var marker, i;

    var image = '../images/map-icons/blue.png';
    for (i = 0; i < locations.length; i++) {  
      marker = new google.maps.Marker({
        position: new google.maps.LatLng(locations[i][1], locations[i][2]),
        map: map,
        icon: image
      });

      google.maps.event.addListener(marker, 'click', (function(marker, i) {
        return function() {
          infowindow.setContent(locations[i][3]);
          infowindow.open(map, marker);
        }
      })(marker, i));
    }
/* */
// INVERSE CODE PHP DYNAMIC 
// GEO LOCATION SET CENTER AND ERROR HANDLING
            map.setCenter(pos);
          }, function() {
            handleNoGeolocation(true);
          });
        } else {
          // Browser doesn't support Geolocation
          handleNoGeolocation(false);
        }
      }

      function handleNoGeolocation(errorFlag) {
        if (errorFlag) {
          var content = 'Error: The Geolocation service failed.';
        } else {
          var content = 'Error: Your browser doesn\'t support geolocation.';
        }   
// GEO LOCATION SET CENTER AND ERROR HANDLING       

      }

    //  google.maps.event.addDomListener(window, 'load', initialize);
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T20:38:06.827

已修复——不幸的是回声“”；函数不允许除 ('') 之外的任何内容来分隔 div 等。不幸的是，javascript 不会加载除标准 html 之外的任何内容。不是 PHP 的变体。

解决方案是使用适当的 html 标准设置字符串，而不是使用连接运算符。

前任：

```
$content = '<div class="coupon"><div class="ribbon"><div class="ribbon-stitches-top"></div><strong class="ribbon-content"><h1>'.$deal[$y].'</h1></strong><div class="ribbon-stitches-bottom"></div></div><div class="picture_coupon"><img src="'.$deal_photo[$b].'" width="150" height="100" /></div><div class="deal"><center><h1>'.$deal[$y].'</h1>'.$deal_info[$a].'<b>Expires: '.$deal_expiration[$c].'</b></center></div></div>'; 
```

我把它分配给数组循环看起来像这样

```
 <?php
$x = 0; $i = 0; $j = 0; $y = 0; $z = 0; $a = 0; $b = 0; $c = 0;
for($aa = 0; $aa < $count; $aa++) {
$content = '<div class="coupon"><div class="ribbon"><div class="ribbon-stitches-top"></div><strong class="ribbon-content"><h1>'.$deal[$y].'</h1></strong><div class="ribbon-stitches-bottom"></div></div><div class="picture_coupon"><img src="'.$deal_photo[$b].'" width="150" height="100" /></div><div class="deal"><center><h1>'.$deal[$y].'</h1>'.$deal_info[$a].'<b>Expires: '.$deal_expiration[$c].'</b></center></div></div>';

echo "['" . $business_name[$x] . "'," . $lat[$i] . "," . $lng[$j] . "," . "'$content'" . "],";
$x++; $i++; $j++; $id++; $y++; $z++; $a++; $b++; $c++;
}
?> 
```

我对javascript一无所知，因为它允许goog....所以得出这个结论对我的大脑的伤害超出了我的想象...

# php - ajax 显示从 php 到输入文本的返回值

> ID：11663379
> 
> 赞同：0
> 
> 时间：2012-07-26T06:07:34.413
> 
> 标签：php, ajax

大家好，我刚开始学习ajax。

我试图使用 ajax 调用从 php 获取返回值并显示到文本字段。这是我的ajax代码。

```
var getitem=$('#selectedItemId2').val();
        if (getitem==''){
        //do nothing
        }else{
            // verifying if item code is already been save and put to the text fields 
            $('#gettingitem').css('display','block');
            $('#gettingitem').html();

            $.ajax({
                    type: 'POST',
                    url:   'veritemcode.php',
                    datatype: 'text',
                    data:{'getitem':getitem
                    },
                    success:function(data){

                        window.setTimeout(function(){

                            $('#gettingitem').css('display','none');
                            $('#disp').css('display','block');
                            $('#disp').html(data);

                          });
                    }
            });} 
```

这是我想在文本字段上显示的 veritemcode.php

```
 $getitem=$_REQUEST['getitem'];

        $verifyitem=mysql_query("select * from item_master where item_code='".$getitem."'") or die (mysql_error());
        $vernum=mysql_num_rows($verifyitem);
        if($vernum!=1){

        }else{
                while($dispresult=mysql_fetch_array($verifyitem)){
                             echo $dispresult['item_desc'];
                             echo $dispresult['sup_item_code'];
                             echo $dispresult['smalluom'];

                }

        } 
```

我想要的只是显示这个字段的回声

```
<input type='text' id='itemdesc'/>

<input type='text' id='supitem'/>

<input type='text' id='smalluom'/> 
```

请帮我解决这个问题...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T06:25:26.863

我会做以下...

通过特殊字符分割 php 中的 ajax 数据，例如管道：

```
 while($dispresult=mysql_fetch_array($verifyitem)){
                         echo $dispresult['item_desc'] . "|";
                         echo $dispresult['sup_item_code'] . "|";
                         echo $dispresult['smalluom'];
            } 
```

然后在成功后的 html/javascript 中：function(data){ 添加以下内容：

```
 var split_data=data.split("|");
                    $("#itemdesc").val(split_data[0]);
                    $("#supitem").val(split_data[1]);
                    $("#smalluom").val(split_data[2]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T06:22:20.017

```
ok no need to worry about the code just put the following code in ur file veritemcode.php

<?php
$getitem=$_REQUEST['getitem'];

        $verifyitem=mysql_query("select * from item_master where item_code='".$getitem."'") or die (mysql_error());
        $vernum=mysql_num_rows($verifyitem);
        if($vernum!=1){

        }else{
                while($dispresult=mysql_fetch_array($verifyitem)){
                            $ites_descVal = $dispresult['item_desc'];
                             $supItemVal=$dispresult['sup_item_code'];
                             $smallomVal=$dispresult['smalluom'];

                }

        }
?>

<input type='text' id='itemdesc' value="<?=$ites_descVal?>"/>

<input type='text' id='supitem' value="<?=$supItemVal?>"/>

<input type='text' id='smalluom' value="<?=$smallomVal?>"/>

and remove 
<input type='text' id='itemdesc'/>

<input type='text' id='supitem'/>

<input type='text' id='smalluom'/>

from ur main page (php/html : whatever) 
```

# r - R中的绘图周围的圆形边框

> ID：11663382
> 
> 赞同：3
> 
> 时间：2012-07-26T06:07:45.943
> 
> 标签：r, border

我需要在情节周围放置平滑的边框。代码

```
plot(0:10, 0:10, type="n", xlab="X", ylab="Y")

box("figure", col="blue") 
```

而不是简单的蓝线，我怎样才能用圆角放置平滑的灰线？

![例子](../Images/f0bc451fce6cd8af2ecd6e8c24af1e67.png)

非常感谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-26T06:20:53.947

```
library(grid)

plot(0:10, 0:10, type="n", xlab="X", ylab="Y")
grid.roundrect(gp=gpar(fill="#00000000", col="grey")) 
```

![在此处输入图像描述](../Images/678b5f0b36372b9dcaab419435bb6ad6.png)

如果您发现边框被切断，您可以随时减小圆角矩形的大小：

```
plot(0:10, 0:10, xlab="X", ylab="Y")
grid.roundrect(height=0.99, width=0.99, gp=gpar(fill="#00000000", col="grey")) 
```

![在此处输入图像描述](../Images/9121c90e086aad460215c274585b386b.png)

# javascript - 动态创建 SQLite 子句参数

> ID：11663387
> 
> 赞同：0
> 
> 时间：2012-07-26T06:08:21.340
> 
> 标签：javascript, sql, sqlite, web-sql

我正在尝试为依赖 SQLite 进行持久存储的基于 Web 的应用程序创建一个过滤器函数。我正在尝试使用准备好的语句，但它必须根据用户选中的框数动态创建。我创建了一个动态添加的查询？占位符（使用[IN 子句和 placeholders](https://stackoverflow.com/questions/7418849/android-sqlite-in-clause-and-placeholders)的建议）。

我已经在正确的位置创建了正确数量的 ?s，但我无法弄清楚如何将值添加到 [...] 内的参数中。

当我使用包含 [...] 内所有参数值的变量时，我收到错误“语句字符串中的 '? 的数量与参数字符串不匹配”。我还尝试为每组占位符使用一个变量。那也没用。我想根据参数的数量检查占位符的数量，并在读取变量之前返回错误。

```
// just spaced it with returns and removed the +'s and "'s to make it easier to read
var filterQuery =   SELECT t1.col1, t1.col2, t1.col3, t2.col2, t3.col2
                    FROM t1, t2, t3
                    WHERE t1.col2 = ? 
                    AND t1.col3 IN ( ?, ?, ?)
                    AND t2.col2 IN ( ?, ?, ?, ?) 
```

代码：

```
db.transaction(function(tx) {
    tx.executeSql(
        filterQuery,
        [/* what do I put in here so that the number of ?s matches with the number of parameters? */],
        success,
        failure
    );
}); 
```

如何动态插入参数，使它们匹配占位符的数量并避免不匹配错误？

澄清：我已经成功地运行了没有准备好的语句的查询。我希望有一个解决方案可以让我使用它们。

（额外的问题——这个查询会做我希望它做的事情，即只抓取与用户所做的所有选择匹配的行吗？）

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T08:14:17.993

最快的方法是在动态 SQL 中使用实际参数值而不是问号 ( `?`)，例如

```
WHERE t1.col2 = 'searchstring' 
AND t1.col3 IN ( 12, 23, 24)
AND t2.col2 IN ( 'value', 'onemorevalue', 'x', 'y') 
```

# scala - 在 Scala 中指定 TestNG 测试组

> ID：11663389
> 
> 赞同：1
> 
> 时间：2012-07-26T06:08:42.283
> 
> 标签：scala, testng

我正在尝试将组分配给 Scala 环境中的 TestNG 类和方法（在 Eclipse 中）

```
@Test(groups="register")
class RegisterTest {
... 
```

但我遇到以下错误：

```
Multiple markers at this line
- type mismatch; found : java.lang.String("register") required: 
Array[java.lang.String]
- annotation argument needs to be a constant; found: "register"{<error>} 
```

我尝试将组应用于单个 Scala 方法，但仍然遇到相同的错误。

关于如何解决这个问题的任何建议？

`@Test`只要不指定任何参数，注释就可以工作（如果指定了参数，则会出现同样的错误）`dependsOnMethods`。

`@DataProvider`注释也有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T06:55:52.917

ScalaDoc[给出](http://doc.scalatest.org/1.8/index.html#org.scalatest.testng.TestNGSuite)了以下示例：

```
@Test(groups = Array("com.mycompany.groups.SlowTest"))
def funTest() {
  sb.append("fun!")
  assert(sb.toString === "ScalaTest is fun!")
  assert(lb.isEmpty)
} 
```

这似乎与您得到的错误相符。

# android - 在android应用程序中使用时间选择器节省时间时出错

> ID：11663392
> 
> 赞同：0
> 
> 时间：2012-07-26T06:08:56.153
> 
> 标签：android

我正在开发一个 android 应用程序，我必须在其中保存 5 个编辑文本和 1 个时间选择器值。我为此创建了数据库类。我的所有编辑文本值都得到保存，但时间选择器值没有得到保存，谁能帮我解决这个问题

我已经尝试了很多，但是使用时间选择器节省了时间

我的主要 java 类是[http://pastebin.com/BKnRcXqu](http://pastebin.com/BKnRcXqu)

我的数据库类是[http://pastebin.com/DaHJ2fvj](http://pastebin.com/DaHJ2fvj)

提前感谢图沙尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:15:29.053

要从 TimePicker 获取时间，您可以使用

```
int time_pick_hour = picker.getCurrentHour();
int time_pick_minute = picker.getCurrentMinute(); 
```

它将以 0-23 格式返回小时数。然后，您可以根据需要将这些值放入数据库中。无法从 TimePicker 返回秒数。

# javascript - Jquery UI 选项卡和选择框 - 下一个/上一个按钮

> ID：11663393
> 
> 赞同：3
> 
> 时间：2012-07-26T06:09:08.700
> 
> 标签：javascript, jquery, jquery-ui, tabs

我目前正在使用 Jquery UI 选项卡和动态选择框。我目前正在尝试禁用按钮，直到用户从选择框中选择和项目。是否有可能/如何让用户在进入下一个选项卡之前先单击选择框中的项目？我没有任何可以构建的东西，但到目前为止，这是我的[示例。](http://webprolearner.ueuo.com/dropdown-menu/test1.php)

**JS- 上一个/下一个按钮**

```
 <script>
            $(function() {

                var $tabs = $('#tabs').tabs();

                $(".ui-tabs-panel").each(function(i){

                  var totalSize = $(".ui-tabs-panel").size() - 1;

                  if (i != totalSize) {
                      next = i + 2;
                      $(this).append("<a href='#' class='next-tab mover' rel='" + next + "'>Next Page &#187;</a>");
                  }

                  if (i != 0) {
                      prev = i;
                      $(this).append("<a href='#' class='prev-tab mover' rel='" + prev + "'>&#171; Prev Page</a>");
                  }

                });

                $('.next-tab, .prev-tab').click(function() { 
                       $tabs.tabs('select', $(this).attr("rel"));
                       return false;
                   });

            });
    </script> 
```

**PHP/HTML**

```
<select name="gender" id="gender" class="update" size="7"> 
        <option value="">Select one</option> 
            <?php if (!empty($list)) { ?> 
                <?php foreach($list as $row) { ?> 
                    <option value="<?php echo $row['id']; ?>"> 
                        <?php echo $row['category_name']; ?> 
                                </option> 
                            <?php } ?> 
                        <?php } ?> 
</select> 

<select name="category" id="category" class="update" disabled="disabled" hidden="hidden" size="7"> 
        <option value="">----</option> 
</select> 

<select name="colour" id="colour" class="update" disabled="disabled" hidden="hidden" size="7"> 
        <option value="">----</option> 
</select> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T06:49:14.697

有一些解决方案（使用第二种解决方案，您仍然可以更改选项卡而无需单击下一步按钮）。

`$('#tabs').tab({ disabled: [1] });`1.)如果选择了一个选项，例如通过添加以下*更改*处理程序，您可以禁用第二个选项卡 ( ) 并启用该选项卡：

```
$('#gender').change(function() {
    $('#tabs').tabs(
        'option',
        'disabled',
        (parseInt($(this).val(), 10) > 0 ? [] : [1])
    );
}); 
```

另请参阅[此示例](http://jsfiddle.net/Q8zrQ/)。

2.) 您可以更新您的*下一次点击*处理程序；仅在选择性别时更改选项卡：

```
$('.next-tab, .prev-tab').click(function() {
    if (parseInt($('#gender').val(), 10) > 0) {
        $tabs.tabs('select', $(this).attr("rel"));
    }
    return false;
}); 
```

另请参阅[此示例](http://jsfiddle.net/6bPLz/)。

3.) 添加一个*选项卡选择*处理程序`false`，如果用户在第一个选项卡上并且没有选择性别，则返回；*使用选项卡选择*处理程序添加一个对象作为选项卡参数：

```
var iOldTab = 0;
var $tabs = $('#tabs').tabs({
    select: function(event, ui) {
        var bChange = (iOldTab != 0 || parseInt($('#gender').val(), 10) > 0);
        if (bChange) {
            iOldTab = ui.index;
        }
        return bChange;
    }
}); 
```

另请参阅[此示例](http://jsfiddle.net/sGZHZ/1/)。

* * *

最后，我更喜欢第一个解决方案，因为用户可以看到无法访问第二个选项卡（直到他选择性别），并且选择（启用选项卡）的结果将立即显示。

=== 更新 ===

好的，如果您有不同数量的选择（取决于先前选择的值），这里有一个替代（未经测试的）解决方案：

1.) 替换*updateSelectBox.js*`jQuery.getJSON`中的内容（最后的选择会被标记）：

 *```
// following line is added
$('.update').removeClass('last');
if (!data.error) {
    obj.next('.update').html(data.list).removeAttr('disabled hidden');
} else {
    // following line is changed
    obj.addClass('last').nextAll('.update').attr({'disabled': true, 'hidden':true}).html('<option value="">----</option>');
} 
```

2.) 使用禁用*选项卡 2调用选项卡*

```
$('#tabs').tab({ disabled: [1] }); 
```

3.) 添加以下*选择更改*处理程序：

```
$('.update').change(function() {
    $('#tabs').tabs(
        'option',
        'disabled',
        (
            $(this).hasClass('last') &&
            parseInt($(this).val(), 10) > 0 ?
            [] :
            [1]
        )
    );
}); 
```*

# c# - jffs2 中使用的 rtime 压缩

> ID：11663394
> 
> 赞同：1
> 
> 时间：2012-07-26T06:09:15.967
> 
> 标签：c#, compression, jffs2

在 C# 项目中，我必须读取 jffs2 文件系统的图像。jffs2 中使用的压缩算法之一是“rtime”。

除了 linux 交叉引用主页上的一些 C 代码行外，我没有找到任何关于这种“rtime”压缩方法的信息。

是否有描述解压缩如何工作的描述，或者更好的.Net库或压缩/解压缩项目？

谢谢

彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T15:19:32.167

这是原始 C 源代码到 C# 的或多或少的文字转录。哪个应该适合您的目的。

```
使用 System.IO；命名空间 RTime
{

public class RTimeCompressor
{
    /// <summary>
    /// Compress data in the supplied stream
    /// </summary>
    /// <param name="inputData">Data to be compressed</param>
    /// <param name="compressedBytes">Number of compressed bytes. Normally value is equal to inputData.Length unless maxAcceptableCompressionSize is reached.</param>
    /// <param name="maxAcceptableCompressionSize">Upper limit of the length of the returned compressed memory stream</param>
    /// <returns>Compressed data stream</returns>
    public static MemoryStream Compress(Stream inputData, out int compressedBytes, int maxAcceptableCompressionSize = (int)short.MaxValue)
    {
        int[] positions = new int[256];
        int pos = 0;
        MemoryStream compressed = new MemoryStream();

        inputData.Seek(0, SeekOrigin.Begin);
        while (pos < inputData.Length &&
                compressed.Position <= maxAcceptableCompressionSize - 2)
        {
            int runlen = 0;
            byte value = GetByteAtPos(inputData, pos++);
            int backpos = positions[value];

            compressed.WriteByte(value);
            positions[value] = pos;

            while ((backpos < pos) &&
                    (pos < inputData.Length) &&
                    (GetByteAtPos(inputData, pos) == GetByteAtPos(inputData, backpos)) &&
                    (runlen < 255))
            {
                backpos++;
                pos++;
                runlen++;
            }

            compressed.WriteByte((byte)runlen);
        }

        // result is larger than the original input
        if (compressed.Position >= pos)
        {
            compressedBytes = 0;
            return null;
        }

        compressed.Seek(0, SeekOrigin.Begin);

        compressedBytes = pos;
        return compressed;
    }

    private static byte GetByteAtPos(Stream inputData, int pos)
    {
        long originalPos = inputData.Position;
        inputData.Seek(pos, SeekOrigin.Begin);
        byte value = (byte)inputData.ReadByte();
        inputData.Seek(originalPos, SeekOrigin.Begin);
        return value;
    }

    /// <summary>
    /// Decompress data in the supplied stream
    /// </summary>
    /// <param name="inputData">Data to be decompressed</param>
    /// <returns>Decompressed data stream</returns>
    public static MemoryStream Decompress(Stream inputData)
    {
        int[] positions = new int[256];
        int pos = 0;
        MemoryStream decompressed = new MemoryStream();
        inputData.Seek(0, SeekOrigin.Begin);

        while (pos < inputData.Length)
        {
            byte value = GetByteAtPos(inputData, pos++);
            int backoffs = positions[value];
            int repeat = GetByteAtPos(inputData, pos++);

            decompressed.WriteByte(value);
            positions[value] = (int)decompressed.Position;
            if (repeat > 0)
            {
                for (int i = 0; i < repeat; i++)
                {
                    decompressed.WriteByte(GetByteAtPos(decompressed, backoffs++));
                }
            }
        }

        decompressed.Seek(0, SeekOrigin.Begin);
        return decompressed;
    }
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T14:46:27.500

我也找不到任何真正的文档。所以我不得不求助于在[http://www.codeforge.com/read/7074/compr_rtime.c__html上研究源代码](http://www.codeforge.com/read/7074/compr_rtime.c__html)

这是我想出来的。Rtime 压缩数据以字节对编码。其中第一项是数据字节，第二项是重复计数器。

Rtime 算法一次一个字节地遍历输入数据。它记住当前字节最后一次出现的位置加一。它称之为'backpos'。因此，例如，如果最后一次看到“A”是在位置 0，那么它的 backpos 将为 1。当前字节的位置与 backpos 之间的距离创建了一种 LZ77-ish 滑动窗口。Rtime 然后继续将下一个输入字节与 backpos 处的字节进行比较。如果它们相同，它会将重复计数器加一。它一直这样做，直到检测到差异或达到输入的结尾。

努夫说！这是一个例子：

**压缩**

给定以下输入：

```
  ABBBABBBA

```

1）第一个输入字节是一个A，所以Rtime存储一个A作为第一对压缩结果的第一项。因为在 A 的 backpos 为零之前它从未见过 A。

```
[A] BBBABBBA
  ^ ^
  |__|  
   =？

```

接下来，它比较 backpos 处的字节和输入的下一个字节（即 A 和 B）。由于它们不相同，因此 Rtime 使用零重复计数。所以第一对是（A，0）。

2）第二个输入字节是一个B。Rtime存储一个B作为第二对结果的第一项。由于它以前从未见过 B，因此 B 的 backpos 也为零。它继续将 backpos 处的字节与下一个输入字节进行比较：

```
  A [B] 巴巴巴
  ^ ^
  |_____|
    =？

```

他们显然不是平等的。所以重复计数再次为零。因此第二个结果对是 (B, 0)。

3）第三个字节又是B。Rtime存储一个B作为第三对结果的第一项。由于在上一次迭代中在位置 1 遇到了 B，所以 backpos 现在是 2。

它继续将 backpos 处的字节（索引 2）与下一个输入字节（索引 3）进行比较：

```
  AB [B] 巴巴
        ^ ^
        |__|
         =？

```

它们相等，因此重复计数设置为 1。

```
  AB [B] 巴巴
           ^ ^
           |__|
            =？

```

Rtime 比较接下来的两个字节，但它们是不同的。所以比较停止第三对结果是 (B, 1)

4）由于我们在最后一次迭代中成功重复，第四个输入字节已经被覆盖，我们现在可以继续第五个字节。即 A。所以第四个结果对的第一项是 A。由于在第一次迭代中在位置 0 处遇到了 A，所以 backpos 为 1。

在这一点上，事情变得有趣了。接下来的四次比较将成功，Rtime 必须停止，因为它已到达输入的末尾。

```
  ABBB [A] BBBA
     ^ ^
     |___________|
          =？

  ABBB [A] BBBA
        ^ ^
        |___________|
             =？

  ABBB [A] BBBA
           ^ ^
           |___________|
                =？

  ABBB [A] BBBA
              ^ ^
              |___________|
                   =？

```

所以第四个也是最后一个结果对是 (A, 4)。总而言之，压缩后的结果是：(A, 0)(B, 0)(B, 1)(A, 4)。

这需要“仅”8 个字节，而原始输入是 9 个字节。

**减压**

减压的工作方式完全相同，但顺序相反。鉴于上述结果：

(A, 0)(B, 0)(B, 1)(A, 4)。

1) 第一对的第一个值是 A。所以马上，我们可以将 A 放在结果的第一个位置。并且由于重复计数为零，因此完成了此迭代。A的Backpos为0。

```
压缩：[A, 0](B, 0)(B, 1)(A, 4)

 解压：[A]

```

2) 第二对包含 B。我们将 B 放在结果的第二个位置。并且由于重复计数为零，因此也完成了此迭代。B的Backpos为1。

```
压缩：(A, 0)[B, 0](B, 1)(A, 4)

 解压：A [B]

```

3) 第三对包含 B。我们将 B 放在结果的第三个位置。在这种情况下，重复计数为 1。因此，我们将 backpos 处的字节（此时仍为 1）附加到结果的末尾。然后 B 的 Backpos 设置为 2。

```
压缩：(A, 0)(B, 0)[B, 1](A, 4)

 解压：AB [B]+B+

```

4) 第四对包含 A。我们将 A 放在结果的第五位。重复计数为 4。因此，我们将从 backpos（此时仍为 0）开始的四个字节附加到解压缩流的末尾。

```
压缩：(A, 0)(B, 0)(B, 1)[A, 4]

 解压后：ABBB [A]+A++B++B++B+

```

我们完成了:)

希望这有所帮助。

除非输入中有很多冗余，否则 Rtime 不会产生小于原始结果的结果。在 C 实现的评论中，我在某处读到 Rtime 仅用于进一步压缩已压缩的图像。大概 gzip 包含很少的冗余。我想知道 Rtime 多久会真正产生改进的结果。

# c# - 如何从 C# 中的 url 中提取所需的值

> ID：11663398
> 
> 赞同：-1
> 
> 时间：2012-07-26T06:09:31.567
> 
> 标签：c#, query-string

我需要从当前 url 中提取值。例如，如果我的网址是

```
http://stackoverflow.com/questions/ask 
```

我需要将结果存储在相对于“/”拆分的数组中。

我的数组应该包含 [questions,ask]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T06:12:16.973

您可以使用[Uri](http://msdn.microsoft.com/en-us/library/system.uri.aspx)类：

```
var uri = new Uri("http://stackoverflow.com/questions/ask"); 
```

现在查看[`uri.Segments`](http://msdn.microsoft.com/en-us/library/system.uri.segments)表示包含您要查找的内容的字符串数组的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T06:12:18.803

使用`String.Split`功能。

[http://msdn.microsoft.com/en-us/library/ms131448.aspx](http://msdn.microsoft.com/en-us/library/ms131448.aspx)

# magento - Magento 在编辑产品部分更改标签顺序

> ID：11663402
> 
> 赞同：0
> 
> 时间：2012-07-26T06:09:46.510
> 
> 标签：magento, adminhtml

我想在编辑产品部分更改选项卡的顺序。例如，必须交换类别和库存选项卡。覆盖`Mage_Adminhtml_Block_Catalog_Product_Edit_Tabs`块似乎不起作用。

配置文件

```
<config>
    <global>
        <blocks>
            <my_module>
                <class>Company_Adminhtml_Block</class>
            </my_module>
            <adminhtml>
                <rewrite>
                    <catalog_product_edit_tabs>Company_Adminhtml_Block_Catalog_Product_Edit_Tabs</catalog_product_edit_tabs>
                </rewrite>
            </adminhtml>
        </blocks>
    <global>
</config> 
```

我复制`Company_Adminhtml_Block_Catalog_Product_Edit_Tabs`到`local`文件夹并交换了类别和库存`addTab`代码。任何指针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T05:44:31.073

确保您已正确配置模块。为此，您可以简单地从控制器操作中调用。

```
echo get_class(Mage::getBlockSingleton('adminhtml/catalog_product_edit_tabs')); 
```

如果您的配置正确，它应该返回 Company_Adminhtml_Block_Catalog_Product_Edit_Tabs，如果您的配置失败，它应该返回 Mage_Adminhtml_Block_Catalog_Product_Edit_Tabs。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-04T08:43:41.210

有同样的问题。刷新缓存有帮助。

# java - 设置 HTTP POST 请求的内容长度

> ID：11663407
> 
> 赞同：1
> 
> 时间：2012-07-26T06:10:07.060
> 
> 标签：java, post, apache-httpclient-4.x, http-content-length

我正在尝试使用 apache HTTP 客户端发出 Http POST 请求。我正在尝试将 HTTP POST 请求的内容（在我的应用程序中接收）复制到另一个 HTTP POST 请求（从我的应用程序启动到另一个 URL）。代码如下所示：

```
httpPost = new HttpPost(inputURL);
// copy headers
for (Enumeration<String> e = request.getHeaderNames(); e.hasMoreElements();) {
      String headerName = e.nextElement().toString(); 
      httpPost.setHeader(headerName, request.getHeader(headerName));
}

BufferedInputStream clientToProxyBuf = new BufferedInputStream(request.getInputStream());
BasicHttpEntity basicHttpEntity = new BasicHttpEntity();
basicHttpEntity.setContent(clientToProxyBuf);
basicHttpEntity.setContentLength(clientToProxyBuf.available());

httpPost.setEntity(basicHttpEntity);

HttpResponse responseFromWeb = httpclient.execute(httpPost); 
```

基本上，我正在尝试实现一个代理应用程序，它将获取一个 url 作为参数，将请求转发到该 URL，然后以自定义外观提供页面等。

这`request`是 HttpServletRequest。我在设置内容长度时遇到问题。通过调试，我发现`clientToProxyBuf.available()`没有给我正确的输入流长度，并且我得到了 Http 错误 400 IE 和`Error 354 (net::ERR_CONTENT_LENGTH_MISMATCH): The server unexpectedly closed the connection`chrome。

我做错了吗？还有其他方法可以实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T06:36:35.200

该`available()`函数不提供流内容的实际长度，而是

> 返回可以不阻塞地从此输入流中读取的字节数。（来自[javadoc](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/BufferedInputStream.html#available%28%29)）

我建议您首先从流中读取整个内容，然后将其设置为内容，而不是传递流对象。这样，您还将获得内容的实际长度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T07:13:56.693

这是相当简单且非常明显的。我只需要从标题中获取内容长度：

```
basicHttpEntity.setContentLength(Integer.parseInt(request.getHeader("Content-Length"))); 
```

# android - 如何在列表视图中获取值形式的edittext？

> ID：11663411
> 
> 赞同：1
> 
> 时间：2012-07-26T06:10:35.873
> 
> 标签：android

我有一个自定义列表，每行有一个 textView 和一个编辑文本。我的问题是：每当用户在edittext中输入任何数字时，我都想从edittext中获取值并将其与前一个值添加并显示在顶部textview中。例如。说我在任何编辑文本中输入 10 的内部编辑文本数。10是第一个输入的数字。然后它会加上0。之后如果他在另一个edittext中输入15，那么10 + 15 = **25** 应该显示在顶部textview中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T06:32:57.687

我得到了它...

这就像使用 setOnFocusListener 一样简单。如果焦点从编辑 text.at 中丢失，则布尔 hasFocus 参数变为**false**。我们可以很容易地收集编辑文本中的值。不过谢谢大家的支持。再次感谢 1ce。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T06:15:30.407

试试这个

```
 String content = edtEditText.getText().toString();
  tvTextView.setText(content); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T06:20:14.387

我不确定，这会有所帮助......但你可以试试这个：

在您的编辑文本上获取 setOnFocusListener，例如：

```
mEditText.setOnFocusChangeListener(new OnFocusChangeListener() {

    @Override
    public void onFocusChange(View arg0, boolean arg1) {
         int s=Integer.parseInt(mEditText.getText().toString());
         int ps=Integer.parseInt(mTextView.getText().toString());
         mTextView.setText((s+ps)+"");
         mEditText.setText("");// clear editText after adding its value to textview
    }
}); 
```

当焦点消失时不要忘记清空编辑文本，否则当用户单击编辑文本甚至删除前一个时，值将再次添加到您的文本视图中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-26T06:28:47.803

为此，您必须在 EditText 视图上使用 TextWatcher：

```
EditText editText1 = (EditText) findViewById(R.id.e1);

TextWatcher checker = new TextWatcher() { 
    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {
        if (ChecknotNull()) {
            TextView1.setText(edittext1.getText().toString().trim());;
   Note: You can Also Go on Concating the values with the  
         previous values Of the TextView(InShort,Perform Logic Here)
       }
    }

    private boolean ChecknotNull() {
        return editText1.getText().toString().trim().length() > 0;
    }
};  

//Set the checker method for the EditText View like this Way
editText1.addTextChangedListener(checker); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T06:59:03.133

在适配器中，执行以下操作：

```
public View getView(int position, View convertView, ViewGroup parent) {

    View vi = convertView;
    ViewHolder holder = new ViewHolder();

    p = values.get(position);
    if (vi == null) {

            vi = inflater.inflate(R.layout.feed_items, null);
            holder.text = (TextView) vi.findViewById(R.id.tv);
            holder.editText = (EditText) vi.findViewById(R.id.et);

            holder.editText.addTextChangedListener(new TextWatcher(){
                            public void afterTextChanged(Editable s) {
                                i++;
                                int n = Integer.parseInt(holder.text.getText().toString());
                                int m = Integer.parseInt(s.getText().toString());
                                holder.text.setText("" + n + m);
                                }
                                public void beforeTextChanged(CharSequence s, int start, int count, int after){}
                                public void onTextChanged(CharSequence s, int start, int before, int count){}
                    }); 

            vi.setTag(holder);
    } else {

        holder = (ViewHolder) vi.getTag();
    }
    return vi;
    } 
```

# c++ - 如何显示以字母开头的结果，例如仅 A

> ID：11663413
> 
> 赞同：0
> 
> 时间：2012-07-26T06:10:44.077
> 
> 标签：c++

我有一个`list.txt`文件。

它包含大约 100 条记录，但如果用户`cin`是一个字母，例如 A，我只想在循环中显示所有包含 A 的记录。

记录是以换行格式记录的，在shell命令中我们使用A*，但是在C++中，我们怎么做呢？

例子：

```
Alfred
Alpha
Augustine
Bravo
Charlie
Delta 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T06:27:37.840

Here's a bunch of ways to do it, chose the one you like more ;)

* * *

Crappy solution with strings and streams:

```
std::vector< std::string > vec;//this will hod the file data
std::ifstream ifs("test.txt");//the input file stream
std::string tmp;//a temporary string

while( ifs >> tmp )//reading the whole data from the file
    vec.push_back(tmp);

for( int i = 0; i < vec.size(); i++ )
    if(vec[i][0] == 'a')//vec[i][0] stands for "the first symbol of element number i in vector"
        std::cout << vec[i] << std::endl;//outputting the string if it starts with 'a' 
```

If you have c++11, you can replace the `for` with this range-based for:

```
for( std::string & s : vec )
    if(s.at(0) == 'a')
        std::cout << s << std::endl; 
```

Or, you can complicate things further and replace the `for` with `std::copy_if` and lambdas from c++11 (IMO it's much too complicated and hard to read for such a simple occasion, but still I'll include it):

```
//this will copy all strings starting with 'a' into res vector.
std::vector< std::string > res;
std::copy_if(vec.begin(), vec.end(), back_inserter(res), [](const std::string & s){ return s[0]=='a'; } ); 
```

* * *

If you don't need to store the strings anywhere, it's easier:

```
std::vector< std::string > vec;
std::ifstream ifs("test.txt");
std::string tmp;

while( ifs >> tmp )
    if( tmp.at(0) == 'a' )
        std::cout << tmp; 
```

* * *

A more old-school solution without using streams of strings:

```
FILE * f = fopen("test.txt", "r");//opening the file
if( !f )//checking in case it didn't open
    return -1;

char buffer[255];//buffer for the strings being read from file
while( !feof(f) )
{
    fgets(buffer, 255, f);//getting a string
    if(buffer[0] == 'a')//printing if it starts with 'a'
        printf("%s", buffer);
}
fclose(f);//don't forget to close the file 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T06:39:16.887

这是一个相当优雅，可能更惯用的解决方案：

```
#include <algorithm> //for copy_if
#include <cctype> //for tolower
#include <fstream> //for ifstream
#include <iostream> //for cout, cin
#include <iterator> //for istream_iterator, ostream_iterator
#include <string> //for string

int main() {
    char letter;
    std::cout << "Enter the letter to look for: ";
    std::cin >> letter; //I didn't validate it

    std::ifstream fin ("names.txt");

    std::istream_iterator<std::string> ifbegin (fin); //begin file iter
    std::istream_iterator<std::string> ifend; //end file iter
    std::ostream_iterator<std::string> obegin (std::cout, " "); //begin out iter

    std::copy_if (ifbegin, ifend, obegin, //copy from file to output if
        [letter] (const std::string &str) { //capture letter
            return std::tolower (str [0]) == std::tolower (letter);
        } //copy if starts with upper/lower case of entered letter
    );
} 
```

请注意，它确实需要 C++11`copy_if`和 lambda。这将输出文件中以输入字母的大写/小写开头的每个名称，用空格分隔。它在数据排序时的执行与数据未排序时的执行相同。

但是，正如 Luc 在下面指出的那样，这将读取带有空格的行的单独名称。如果你想解决这个问题，你需要一个`operator>>`读取一行的自定义替换。

第 1 步：创建替换：

```
struct Line {
    std::string text; //note I made this public to save time
    operator std::string() const {return text;} //less work later
}; 
```

第 2 步：修改`operator>>`以读取结构的一行：

```
std::istream &operator>> (std::istream &in, Line &line) {
    std::getline (in, line.text); //get whole line
    return in;
} 
```

第 3 步：更改迭代器以使用我们的自定义结构。请注意，最后一个保留一个字符串，因为它可以隐式转换为一个。让我们也用换行符分隔打印，这样我们就可以知道它是一行，而不是一个单词：

```
std::istream_iterator<Line> ifbegin (fin); //begin file iter
std::istream_iterator<Line> ifend; //end file iter
std::ostream_iterator<std::string> obegin (std::cout, "\n"); //begin out iter 
```

第 4 步：更改 lambda 以满足我们的需要：

```
[letter] (const std::string &line) {
        return !line.empty() //we introduced the possibility of "" 
               && (std::tolower (line [0]) == std::tolower (letter));
} 
```

4个简单的步骤后，我们就完成了！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T06:24:04.313

如果您确实需要新列表，我建议您使用 remove_copy_if 或 for_each 使用检查谓词的 lambda 表达式（如果您不需要）。你能详细说明一下你所说的“表演”是什么意思吗？

# php - 在 wordpress 中破坏了一些东西

> ID：11663414
> 
> 赞同：-1
> 
> 时间：2012-07-26T06:10:46.690
> 
> 标签：php, mysql, wordpress

所以我有这段代码，它是一行中的一个小部件，称为小部件文本。

```
a:15:{i:8;a:3:{s:5:"title";s:0:"";s:4:"text";s:157:"<div align="center"><A href="http://mvprop.com/Deals-and-Specials"><IMG border=0 
      alt=Deals and Specials 
      src="dealsandspecials.gif"></A></div>";s:6:"filter";b:0;}i:14;a:3:{s:5:"title";s:0:"";s:4:"text";s:153:"<div align="center"><A href="http://mvprop.com/24-Hour-Recording><IMG border=0 
      alt=24 Hour Recording 
      src="24hourrecording.gif"></A></div>";s:6:"filter";b:0;}i:16;a:3:{s:5:"title";s:0:"";s:4:"text";s:147:"<div align="center"><A href="http://mvprop.com/We-Will-Buy-Now"><IMG border=0 
      alt=We Will Buy Now 
      src="wewillbuynow.gif"></A></div>";s:6:"filter";b:0;}i:20;a:3:{s:5:"title";s:0:"";s:4:"text";s:123:"<div align="center"> <A href="http://mvprop.com/FAQS"><IMG border=0 
            alt=FAQS
      src="faqs.gif"></A></div>";s:6:"filter";b:0;}i:21;a:3:{s:5:"title";s:0:"";s:4:"text";s:136:"<div align="center"><A href="http://mvprop.com/about-mvp"><IMG border=0 
            alt=About MVP 
      src="aboutus.gif"></A></div>";s:6:"filter";b:0;}i:23;a:3:{s:5:"title";s:0:"";s:4:"text";s:163:"<div align="center"><A href="http://mvprop.com/Deals-and-Specials"><IMG border=0 
            alt=Deals and Specials 
      src="dealsandspecials.gif"></A></div>";s:6:"filter";b:0;}i:24;a:3:{s:5:"title";s:0:"";s:4:"text";s:153:"<div align="center"><A href="http://mvprop.com/We-Will-Buy-Now"><IMG border=0 
            alt=We Will Buy Now 
      src="wewillbuynow.gif"></A></div>";s:6:"filter";b:0;}i:25;a:3:{s:5:"title";s:0:"";s:4:"text";s:159:"<div align="center"><A href="http://mvprop.com/24-Hour-Recording><IMG border=0 
            alt=24 Hour Recording 
      src="24hourrecording.gif"></A></div>";s:6:"filter";b:0;}i:26;a:3:{s:5:"title";s:0:"";s:4:"text";s:152:"<div align="center"><A href="http://mvprop.com/Sell-Your-Home"><IMG border=0 
            alt=Sell Your home 
      src="sellyourhome2.gif"></A></div>";s:6:"filter";b:0;}i:27;a:3:{s:5:"title";s:0:"";s:4:"text";s:143:"<div align="center"> <A href="http://mvprop.com/WE-Will-Buy"><IMG border=0 
            alt=We Will Buy 
      src="wewillbuy.gif"></A></div>";s:6:"filter";b:0;}i:28;a:3:{s:5:"title";s:0:"";s:4:"text";s:161:"<div align="center"> <A href="http://mvprop.com/We-Make-An-Offer"><IMG border=0 
            alt=We Will Make An Offer
      src="wemakeanoffer.gif"></A></div>";s:6:"filter";b:0;}i:33;a:3:{s:5:"title";s:0:"";s:4:"text";s:170:" <br> <font size="2px face="Arial, Helvetica, sans-serif"> <br> Are you an Investor? <br> Are you tired of 
the stock market and looking for a better rate of return? </font>";s:6:"filter";b:0;}i:34;a:3:{s:5:"title";s:0:"";s:4:"text";s:126:"<a href="../../investments/Questions.pdf"><img src="../../investments/top-ten.jpg" width="236" height="250" border="0"></a> 
";s:6:"filter";b:0;}i:35;a:3:{s:5:"title";s:0:"";s:4:"text";s:145:"  <div align="center"><A href="http://mvprop.com/investments"><IMG border=0 
            alt=Investors
      src="151-test-new2.jpg"></A></div>";s:6:"filter";b:0;}s:12:"_multiwidget";i:1;} 
```

显然我在这段代码的某处删除或添加了一个空格。

现在它不起作用。现在我该怎么做？变化在第二部分的某个地方。如果没有办法修复它，有没有办法重建小部件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T06:18:51.980

那在您的 {wp-prefix}_options 表中吗？

我不知道它是否可以轻松修复。尝试使用 PHP 的[unserialize()](http://php.net/manual/en/function.unserialize.php)函数来读取这些值

但是，您可以通过将字段值设置为来重置它`a:0:{}`并重新开始构建小部件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T11:19:56.670

我只是制作了另一个小部件来解决我的问题。

# c# - 如何在c#中创建一个线程

> ID：11663415
> 
> 赞同：2
> 
> 时间：2012-07-26T06:10:57.010
> 
> 标签：c#, windows-phone-7.1.1

我可以为我的 Windows Phone 应用程序创建一个从 c# 中的线程类继承的类吗？

例如：如果我的班级名称是“MyClass”，我想将线程启动为`new MyClass().Start();`

就像在下面的 Java 示例中一样

```
public class TagIndexer 
{
    private static class Task 
    {
        private String docId;
        private String tags;
        private String extension;

        public Task(String docId, String tags, String extension) 
        {
            this.docId = docId;
            this.tags = tags;
            this.extension = extension;
        }
    }

    private static final LinkedList<Task> queue = new LinkedList<Task>();
    private static boolean isWorking = false;

    private static class TaskRunner extends Thread 
    {
        @Override
        public void run() 
        {
            while (true) 
            {
                Task task;
                synchronized (queue) 
                {
                    task = queue.poll();
                    if (null == task) 
                    {
                        isWorking = false;
                        break;
                    }
                    isWorking = true;
                }
                /*
                 * PROCESSING CODE
                 */
            }
        }
    }

    public static void addDocument(int docId, String tags, String extension) 
    {
        Task task = new Task(Integer.toString(docId), tags, extension);

        synchronized (queue) 
        {
            queue.add(task);
            if (!isWorking) 
            {
                new TaskRunner().start();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T06:15:08.600

```
new MyClazz().Start(); 
```

-

```
public abstract class MyThread
{
    public abstract void Run();

    public void Start()
    {
        new Thread(Run).Start();
    }
}

public class MyClazz : MyThread
{
    public override void Run()
    {
        Console.WriteLine("Hello World");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T06:16:40.857

在 Windows Phone 上，`Thread`是一个密封类，因此您不能从它继承。如果您想保留基于任务的方法，您可以创建一个将包装线程实例的类。就像是：

```
public abstract class Task
{
    protected Thread InternalThread { get; set; }

    protected abstract void Run();

    public void Start()
    {
        this.InternalThread = new Thread(this.Run);
        this.InternalThread.Start();    
    }
} 
```

当然，这只是一个例子。如果多次调用，您将不得不添加一些同步机制来防止该`Start`方法创建多个线程。

然后你可以继承它来创建自定义任务：

```
public class MyTask : Task
{
    protected override void Run()
    {
        // Do something
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T06:47:56.353

请参阅这篇关于[`BackgroundAgent`](http://msdn.microsoft.com/en-us/library/microsoft.phone.backgroundagent%28v=vs.92%29.aspx)来自的文章**`MSDN`**：

*   [Windows Phone 后台代理概述](http://msdn.microsoft.com/en-us/library/hh202942%28v=vs.92%29.aspx)

# java - 在Java Spring框架中保存文件夹以上传图像的位置

> ID：11663421
> 
> 赞同：1
> 
> 时间：2012-07-26T06:11:28.843
> 
> 标签：java, spring, spring-mvc, file-upload

许多图像将由用户上传。

1.  这样的文件夹应该放在哪里。
2.  我将如何访问我的 Web 应用程序中的图像。
3.  该文件夹应该在 webcontent/resources 中吗？

环顾四周后更新：

1.  决定在 webapp [Java EE 之外创建一个上传文件夹 - 获取上传文件的真实路径的最佳方式？](https://stackoverflow.com/questions/7274517/java-ee-best-way-to-get-real-path-to-uploaded-files)
2.  上传时

    File file = new File("外部文件夹路径"+文件名);

3.  要访问上传的图像：在 servlet-context.xml 中创建到外部文件夹的映射

    < mvc:resources mapping="/images/**" location="file:///D:/rahul/eclipse_java/images/"/>

现在 localhost/application/images 映射到 D:/folder/images

应该尝试使用 SpEL 和配置属性来分离出属性文件的路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T08:57:36.990

如果您使用的是 Tomcat，请添加

```
<Context docBase="C:/temp" path="/yourapp/resources/images" /> 
```

里面

```
<Engine defaultHost="localhost" name="Catalina"> 
```

server.xml 中的标记

然后，您可以在 JSP 中的任何位置访问您的图像。例如

```
 <img class="fs-sp1-image" src="<c:url value="/resources/images/item_1.png/>"> 
```

如果您想在此文件夹中进行任何处理，例如上传新图像，请将路径 C:/temp 设置为应用程序属性并在控制器中使用它。

这有两个方面的帮助

*   在服务器重新启动时，您上传的图像不会被删除。
*   用户上传的图像文件夹会随着时间的推移变得非常繁重，最好将它们排除在部署的代码之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T06:15:54.370

如果图像是小尺寸的，如徽标、页眉图像和其他用户相关的东西，那么它们可以存储在数据库中，并且可以缓存图像。每当图像相关表发生变化时，编写一些脚本来自动刷新缓存。我在许多应用程序中都看到过这种情况。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-26T06:43:12.847

使用 DB 以字节为单位存储图像。

```
<form id="uploadImageForm" name="uploadImageForm" method="post" enctype="multipart/form-data" action="uploadImage.html">
    <input id="uploadImage" name="uploadImage" type="file">
</form> 
```

在控制器中编写代码以以字节为单位存储图像。

# iphone - 如何删除 iPhone 设备内的 plist 文件？

> ID：11663422
> 
> 赞同：0
> 
> 时间：2012-07-26T06:11:37.283
> 
> 标签：iphone, ios5, xcode4.3

我已经使用 plist 文件来存储我的数据，它确实适用于读取和写入数据。现在如何删除我的 iPhone 设备中的旧 SaveData.plist 文件？因为当我从 xcode 中删除它并添加新的同名文件（SaveData.plist）并在我的设备中运行它时，我的旧数据仍在里面。

我使用此代码添加我的 SaveData.plist

```
NSError *error;
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *path = [documentsDirectory stringByAppendingPathComponent:@"SaveData.plist"];
NSFileManager *fileManager = [NSFileManager defaultManager];
if (![fileManager fileExistsAtPath: path])
{
    NSString *bundle = [[NSBundle mainBundle] pathForResource:@"SaveData" ofType:@"plist"];
    [fileManager copyItemAtPath:bundle toPath: path error:&error];
}
NSMutableDictionary *data = [[NSMutableDictionary alloc] initWithContentsOfFile: path];
NSMutableDictionary *savedStock = [[NSMutableDictionary alloc] initWithContentsOfFile: path]; 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T06:18:57.070

如果有旧版本，`if`语句（如果文件已经存在）：

```
if (![fileManager fileExistsAtPath: path]) 
```

导致它不会被复制到文档文件夹中。

您可以先删除文档文件夹中的文件：

```
if ([fileManager removeItemAtPath:path error:&error] == YES)
{
    NSString *bundle = [[NSBundle mainBundle] pathForResource:@"SaveData" ofType:@"plist"];
    [fileManager copyItemAtPath:bundle toPath: path error:&error];
} 
```

您也可以考虑先加载旧文件的内容，以便迁移保存的数据。

# objective-c - 使用 iOS 应用程序将 .mp3 数据保存到 iOS 设备是否有任何内存限制

> ID：11663424
> 
> 赞同：0
> 
> 时间：2012-07-26T06:11:42.533
> 
> 标签：objective-c, xcode4, ios4, nsfilemanager

我正在开发一个应用程序，它有一个模块从服务器下载 MP3 文件并将最后 5 次下载保存到 iOS 设备。为此，我使用 NSFileManager 和文档目录（每次下载有 40MB 到 60MB）。现在我遇到了一些问题，即成功保存了四次下载，并且在第 5 次下载时，应用程序会自动删除第一次下载，并且有时应用程序会显示崩溃。

我的问题是，将大文件（500MB 以上）保存到 iOS 设备是否有内存限制？如果有限制，最大尺寸是多少？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T06:28:49.370

据我所知，Apple 使用 HFS Plus 文件系统，它的最大文件大小可达 8 EB

1 EB = 1000000000000000000B = 1018 字节 = 1000000000 千兆字节 = 1000000 兆字节

希望对你有帮助

# windows-phone-7 - FlipBoard App 类似于 WP7 中的翻页动画

> ID：11663435
> 
> 赞同：0
> 
> 时间：2012-07-26T06:12:07.397
> 
> 标签：windows-phone-7

我想在我的新闻应用程序中添加类似 FlipBoard 的动画。请帮助如何实现它。像这样：[翻转视图](http://openaphid.github.com/blog/2012/05/21/how-to-implement-flipboard-animation-on-android/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T06:17:08.237

你可以在这里找到很好的例子

[http://rhizohm.net/irhetoric/post/2010/11/09/Page-Transition-Animations-and-Windows-Phone-7.aspx](http://rhizohm.net/irhetoric/post/2010/11/09/Page-Transition-Animations-and-Windows-Phone-7.aspx)

[http://wpfbookcontrol.codeplex.com/](http://wpfbookcontrol.codeplex.com/)

www.telerik.com/products/silverlight/controls/book.aspx

# java - 没有任何 IDE 的 GWT + Maven

> ID：11663436
> 
> 赞同：0
> 
> 时间：2012-07-26T06:12:07.730
> 
> 标签：java, gwt, maven

好像有很多类似问题的信息让搜索变得困难，所以我决定问一下。

我需要使用 GWT 创建小项目。我没有使用 GWT 的经验，尽管我为 java 使用了不同的 web 框架。我想将它作为纯 maven 项目启动，而不依赖于任何 IDE（至少在开始时）。然而，对我来说从哪里开始并不明显。我试过这个：

[http://mojo.codehaus.org/gwt-maven-plugin/user-guide/project.html](http://mojo.codehaus.org/gwt-maven-plugin/user-guide/project.html)

并且 maven 为我创建了 eclipse 项目。我不想要这个！有什么直接的方法可以实现我的目标吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T07:32:51.670

Maven GWT 插件不会创建特定于 Eclipse 的项目。如本页所述：

[http://mojo.codehaus.org/gwt-maven-plugin/user-guide/archetype.html](http://mojo.codehaus.org/gwt-maven-plugin/user-guide/archetype.html)

> 然后可以将生成的项目作为“现有项目”导入 Eclipse，或者如果您不喜欢 Eclipse，您可以使用另一个 IDE 并运行命令行 maven 以使用 ''mvn gwt:run'' 启动 GWT 主机模式。

我可以补充一点，如果您对 Maven 不满意，您可以使用 GWT SDK (Ant) 附带的工具。

如果需要，请按照 GWT 官方网站提供的教程进行操作：

[https://developers.google.com/web-toolkit/doc/2.4/tutorial/create?hl=fr](https://developers.google.com/web-toolkit/doc/2.4/tutorial/create?hl=fr) *创建 StockWatcher 应用程序（不使用 Eclipse）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T07:52:32.303

除非您是为了纯粹的乐趣或个人挑战而这样做，否则在我最起码的意见中，跳过使用 IDE 是没有意义的。

下载 Springsource 的 Eclipse 版本，其中为您设置了 Maven。

从那里使用 Eclipse 不是作为 IDE，而是作为创建/管理 Maven 项目的接口。使用 Eclipse pom 编辑器。

当然，缺点是 IDE 功能就在您面前的诱惑会非常诱人地诱使您打破不使用 IDE 的个人忏悔/放纵。

只要您避免这种诱惑，只需将 Eclipse 视为 Maven 管理工具。仅使用 POM 编辑器。或者如果使用 POM 编辑器违反了放纵，那么使用 XML 编辑器甚至文本编辑器。只需将 Eclipse 视为一个集成的文件资源管理器 - maven 项目管理器。

**分层项目**

在 Eclipse 中，您将能够设置分层的 maven 项目，而 Eclipse 可以帮助您管理该层次结构。

一旦你建立了 Maven 项目的层次结构，你就可以扔掉 Eclipse 并愉快地使用任何文本编辑器并发出命令行 Maven。对于任何真正想学习 Maven 的人来说，这是一种令人生畏的浪费时间。因为我无法看到层次结构并直观地检查 Eclipse 提供给我的依赖关系。

最好花时间学习如何将 Ant 与 Maven 或 Maven 与 OSGI（Eclipse 平台原生依赖项）集成

**在没有 Eclipse 的情况下设置 maven**

但是，如果您确实需要命令行 maven，只需将 maven 3（请使用 maven 3 而不是 2）解压缩到任何位置。然后设置 env 执行路径到它的 bin 目录，这样你就可以简单地输入“mvn”而不是调用 maven 的整个路径。

然后你可以阅读 mvn [http://maven.apache.org/guides/mini/guide-creating-archetypes.html](http://maven.apache.org/guides/mini/guide-creating-archetypes.html)。

**Maven工件结构**

您绝对必须学习的下一个概念是 maven artefact 结构（好吧，artifact 在英式英语中拼写为“artefact”）。

您应该了解 maven 工件结构的简单概念，以便您可以在不使用任何工具的情况下手动设置 maven 存储库（使用 mvn install:install-file 或手动创建简单的目录结构除外）。

而且，这样您就可以通过在您的 google 代码项目中设置该目录结构，使您的开源项目作为 maven 工件在网络上可用。例如，其他人可以通过类似的 url 使用您的“artifact repo”

```
http: //code.google.com/p/ {your project} / {your artifact path} 
```

使用 mvn install-file 在特定目录（而不是本地默认的 .m2 存储库）中设置工件结构，然后将结构复制/复制到您希望将其发布到的其他位置：

[http://maven.apache.org/plugins/maven-install-plugin/examples/specific-local-repo.html](http://maven.apache.org/plugins/maven-install-plugin/examples/specific-local-repo.html)

**在你的 maven 项目中捆绑 jars**

出于某种原因，您可能有 jar 没有作为 maven 工件在 Web 上公开分发（例如，为什么 oracle 拒绝允许他们的 jdk5 和 jdk6 的 jdbc 驱动程序在 maven 上分发？），您需要将该 jar 与您的项目捆绑在一起。那就是在您的项目目录中通过 maven install-file 设置“maven repo”时派上用场：

[Maven 通过 systemPath/system 添加 jars 但未添加到战争或其他任何地方](https://stackoverflow.com/questions/5597099/maven-add-jars-through-systempath-system-but-not-added-to-war-or-anywhere-else/5597277#5597277)

**综上所述**

maven 有很多令人兴奋的事情（比如争论 maven 应该是按惯例还是按配置），所以让 eclipse 为您减轻学习负担。

# .net - 集成框架 .NET 像骆驼/弹簧集成

> ID：11663440
> 
> 赞同：6
> 
> 时间：2012-07-26T06:12:21.813
> 
> 标签：.net, enterprise-integration

我目前正在寻找一个好的框架来集成具有不同通信方法的多个系统，例如

*   FTP
*   邮件
*   队列
*   网络服务

在 .NET 应用程序中。对于 Java，似乎有很多可用的选项，但我在 .NET 平台上找不到类似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T08:46:59.193

工作流基础更适合......嗯......代表业务逻辑的工作流。您似乎对集成现有服务更感兴趣。在这种情况下，我会更多地关注 Windows Communication Foundation。它们是与（原始）工作流基础一起引入的。所以 WCF 是 .NET 版本 3 及更高版本的一部分。WCF 将支持开箱即用的 Web 服务、消息队列和 FTP。对于电子邮件，您可能需要某种自定义渠道。但是，很可能其他人已经为您编写了一个。

[根据微软](http://msdn.microsoft.com/en-us/library/ms731082.aspx)：

> “Windows Communication Foundation (WCF) 是用于构建面向服务的应用程序的框架。使用 WCF，您可以将数据作为异步消息从一个服务端点发送到另一个服务端点。服务端点可以是 IIS 托管的持续可用服务的一部分，或者它可以是托管在应用程序中的服务。端点可以是从服务端点请求数据的服务的客户端。消息可以像以 XML 形式发送的单个字符或单词一样简单，也可以像数据流一样复杂二进制数据。”

[MSDN 上的此页面](http://msdn.microsoft.com/en-us/netframework/dd939784)包含可帮助开发人员加快使用 Windows Communication Foundation (WCF) 进行开发的资源。请记住，所有这些都只涉及通信层。您必须自己编写胶水代码。

如果你真的想要一个更“框架”的解决方案，我会同意 Tommy Grovnes 的观点。“服务总线”是要搜索的流行词。事实上，Stackoverflow 已经提供了许多关于总线适用于哪些服务、存在哪些实现、使用它们的经验等方面的[见解。](https://stackoverflow.com/search?q=.net%20service%20bus)特别是[.NET 服务总线上的这个问题](https://stackoverflow.com/questions/1545442/net-service-bus-recommendations)看起来像是一个有希望的开始。

干杯

戴夫

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T06:59:15.833

1.  对于 FTP 客户端，您可以使用[FTPclient](http://ftpclient.codeplex.com)或[.NET 的 FTP Client Lib](http://www.codeproject.com/Articles/11991/An-FTP-client-library-for-NET-2-0)之类的框架，或者可以从 google 找到以满足您的需求。
2.  Mail Clien :- 你想用框架实现什么，可以找到最好的框架。
3.  要生成 Web 服务和队列 (MSMSQ)，您可以使用 WCF 框架。

希望解释有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T17:24:48.290

我建议你看看[Windows Workflow Foundation (WF)](http://msdn.microsoft.com/en-us/library/ee342461.aspx)。它是 .NET 框架的一部分。

它使用活动的概念。活动是一个通用概念，也非常适合作为其他系统的“连接器”。提供了一些开箱即用的活动（[.NET Framework 4 内置活动库](http://msdn.microsoft.com/en-us/library/dd489459)）

其他可以用 .NET 编写（[教程：创建自定义 WF 活动](http://msdn.microsoft.com/en-us/library/ms734563%28v=vs.90%29.aspx)），您还可以在 Web 上找到大量示例实现（[工作流 SendEmail 自定义活动](http://www.codeproject.com/Articles/36774/Workflow-SendEmail-Custom-Activity)、[Windows Workflow Foundation 的 FTP 活动](http://www.codeproject.com/Articles/38239/FTP-Activity-for-Windows-Workflow-Foundation)、[MSMQ 工作流活动](http://winterdom.com/2006/03/msmqworkflowactivitiesv1)、[构建和测试 WCF Web使用 Workflow Foundation 4.0 的服务](http://www.codeproject.com/Articles/95418/Building-and-Testing-a-WCF-Web-Service-Using-Workf)）或者您也可以从第三方购买已经构建的特定活动（[Xceed 活动](http://doc.xceedsoft.com/products/XceedWfWorkflow/)、[/n 软件工作流活动](http://www.nsoftware.com/workflow/default.aspx)等）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T15:28:18.293

如果你想要更多的东西：你看看 Biztalk，它带有一堆适配器和工具，但是它不是免费的。

# javascript - 如何侦听跨域图像请求上的任何 301/302 重定向状态代码？

> ID：11663451
> 
> 赞同：6
> 
> 时间：2012-07-26T06:14:04.480
> 
> 标签：javascript, jquery, html, image

我有一些`<img>`链接（带有`src`属性）到可能需要重定向到其他图像 URL 的跨域 URL。我需要以某种方式跟踪浏览器请求原始 URL 时发生的每个重定向。

例如，如果我有：

`<img src='http://www.something.com/redirect'/>`

并将`http://www.something.com/redirect`自定义`location`标头发送到`http://something.com/pic.jpg`，我需要了解它。如何在 JS 或 jQuery 中检测重定向`<img>`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T05:05:08.993

如果您不受 IE7 的限制，则可以使用 cors 解决方案。这将让您请求跨域而不受 JSON-P 的限制（即您可以获得状态代码）。

有关更多信息，请参阅[https://developer.mozilla.org/en/http_access_control](https://developer.mozilla.org/en/http_access_control)。对于一个简单的 GET 请求，您应该没问题，但如果您需要 POST，那么您可能需要预检您的请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T06:39:40.503

我认为这不太可能（当然我不是专家，但那是 AFAIK），至少不像人们想象的那样直截了当。

这是我认为尽可能接近您正在寻找的东西，我希望它能给您一些想法

```
var req = new XMLHttpRequest();
$('img').each(function() {
    req.open('GET', $(this).prop('src'), false);
    req.send(null);
    alert(req.status);
}); 
```

两个下边：

1.  仅适用于同一域上的图像。
2.  您必须两次请求图像（或者您可以先请求，然后使用结果显示图像）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T07:23:45.353

```
<script type="text/javascript" src="jquery-1.7.1.min.js"></script>
<img id='img' src='' width='200' />
<script type='text/javascript'>

/* our image */
var image =  new Image();
$(image).load('yourimage.png', function(response, status, xhr) {
    if (xhr.status == 200) {
        // image loaded, now display the image
        $('#img').attr('src','yourimage.png')
    } else {
        alert(xhr.status);
    }
});

</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T09:56:50.983

如何使用 Ajax 加载图像，未经测试的伪代码如下：

HTML：

```
<img id="img1" src="blank.gif"> 
```

查询：

```
GetImage("http://www.something.com/redirect");

function GetImage(url)
{
    $.ajax({
        type: "GET",
        url: url,
        success: function(data, textStatus) {
            if (data.redirect) {
                // data.redirect contains the string URL to redirect to
                ProcessLocationHeader(data);
                GetImage(data.redirect);
            }
            else {
                // No redirect means we have the correct image
                $("#img1").src = url;
            }
        }
    });
} 
```

由于浏览器将缓存图像，因此不会从服务器 twize 加载它。

# python - 在列表中的项目上获取错误的值？设计还是逻辑问题？

> ID：11663452
> 
> 赞同：0
> 
> 时间：2012-07-26T06:14:06.450
> 
> 标签：python, algorithm

我正在尝试创建一个程序来跟踪我拥有的股票并随着价值的变化调整每只股票的百分比。

我遇到的问题是随着投资组合的变化跟踪百分比本身的设计/算法（我有两个限制是我只使用百分比并且有些日子我不买卖任何东西，但必须考虑那些日子。所以股票在那些日子里保持不变，但是百分比变化，因为股票的基础价值在变化。如果我拥有 50% 的 IBM 和 50% 的谷歌，谷歌的股票上涨而 IBM 的股票下跌，那么谷歌的权重增加了，而 IBM 的已经下降）。我觉得我是从这个简单的目标开始的，但随着我进入不同的阶段，我不断地把它复杂化，所以这是我的方法，但我完全愿意消化任何或所有效率低下的部分。

我首先创建两个字典。`holding_stock`和`holding_stock_weight`，每个的键是日期，值是股票或其权重的列表。例如：

```
 holding_stock[2012-07-17] = ["RY", "IBM"]
    holding_stock_weight[2012-07-17] = [50.0, 50.0]
    holding_stock[2012-07-18] = ["GS", "A", "IBM"]
    holding_stock_weight[2012-07-18] = [20.0,30.0,50.0]
    holding_stock[2012-07-23] = ["GS", "A", "IBM", "BSE"]
    holding_stock_weight[2012-07-23] = [10.0,35,40,3] 
```

并且所有股票信息都是返回的对象列表（按日期排序）。我的想法是从最早的日期（在这个例子中，2012-07-17）开始，然后在调整百分比的同时一直到当前日期（我认为这是最简单的方法）。我可以隔离每一天，除非日期作为我的字典中的键存在，否则`holding_stock`我将继续使用相同的值。最后，在每天结束时，我想获取每只股票的回报值并将其除以每日总数以更新百分比。

但是我的设计有问题，很多天我`None`作为每天的回报，我的数字看起来很奇怪。

这是我到目前为止所做的（我试图尽可能地评论它以解释我的逻辑，我很抱歉它看起来有多丑陋。我认为我的简单方法已经变得过于复杂，可能远非最佳解决方案现在）

```
current_holding_date = fund_date[0] #this is used to track which version of fund is current
current_date = fund_date[0] #this variable used to track date changes
current_holdings = holding_stock[current_holding_date] #list of current stocks being held
current_weight = holding_stock_weight[current_holding_date] #list of current weights of stock
current_return = [None]*len(current_holdings) #create a blank lists of the number of items we need so we can put in returns here
total = 0 #init variable to keep overall total
today_total = 0 #init variable to keep track of daily total
for x in stock_returns: #stock_returns is a list of objects that contains 3 items per object, x.ticker=stockname, x.date=date, x.close=price
    if x.date != current_date: #this checks if the day has changed.
        #this is where i planned to revalue the new percentages 
        print 'new date', x.date
        #print 'todays total is ', today_total
        #get new percentages
        for item in range(len(current_holdings)):
            #TODO: this skips the first and last item
            pass
            print current_holdings[item], ' - ', current_weight[item], current_return[item]
        today_total = 0
        current_date = x.date

    if x.date in fund_date:  #fund_date is just a list of all the days we can pick from
        current_holding_date = x.date #change current date to the new day if it exists in the database
        current_holdings = holding_stock[current_holding_date] #replace new holdings
        current_weight = holding_stock_weight[current_holding_date] #replace new weights
        current_return = [None]*len(current_holdings) #recreate area to hold results
        #print 'we just hit a date' 

    if x.ticker in current_holdings: #go through each object(its already sorted by date) and if the stock exists in the current list then calculate the return
        location = current_holdings.index(x.ticker)
        today_total = today_total + ((current_weight[location]  * 0.01) * x.close)
        current_return[location] = ((current_weight[location]  * 0.01) * x.close)
        #print x.date, ': ', x.ticker, current_weight[location] * 0.01 ,' * ', x.close, ' = ', current_return[location], ' total = ', total
    #print current_holding_date
    #print x.ticker, x.date, x.close 
```

这是我运行上述代码时的结果：

```
2012-07-17 [u'RY', u'IBM'] [50.0, 50.0]
2012-07-18 [u'GS', u'A', u'IBM'] [20.0, 30.0, 50.0]
2012-07-23 [u'GS', u'A', u'IBM', u'BSE'] [10.0, 35.0, 40.0, 3.0]
new date 2012-07-18
RY  -  50.0 25.865
IBM  -  50.0 None
new date 2012-07-19
GS  -  20.0 None
A  -  30.0 None
IBM  -  50.0 None
new date 2012-07-20
GS  -  20.0 19.0
A  -  30.0 11.538
IBM  -  50.0 97.67
new date 2012-07-23
GS  -  20.0 18.832
A  -  30.0 11.268
IBM  -  50.0 96.225
new date 2012-07-24
GS  -  10.0 None
A  -  35.0 None
IBM  -  40.0 None
BSE  -  3.0 None 
```

我怀疑这与我分配和更改 current_holdings、current_weight 和 current_return 列表的方式有关，但我看不到我的错误。出于某种原因，我只获得 2012-07-20 的数据，而不是其他日子的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T11:39:03.077

并行列表通常是一种[代码味道](http://en.wikipedia.org/wiki/Code_smell)，这让我认为您的数据表示导致您错误地思考问题。

你有应该代表真实事件的数据。元组对于保持数据相关性要好得多：

```
 ('buy', 'goog', '2012-07-26', 10000, 600.00) 
```

[命名元组](http://docs.python.org/dev/library/collections.html#collections.namedtuple)甚至有助于使您的代码更具可读性（注释更少；）第二个问题是您试图将派生数据（我持有什么）存储为主要信息。这一定是混乱的根源。

如果我告诉你今天比昨天热5度，比前一天冷2度，比周一18日热10度，现在温度是多少？通过对事件之间发生的情况进行建模，我认为您正在购买混乱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T06:31:19.420

1.  `stock_returns`如果它们包含您需要的所有代码，请检查您的“ ”。
2.  在您的内部循环中，您`current_return = [None]*len(current_holdings)`首先要做的是，然后才做：

> `print current_holdings[item], ' - ', current_weight[item], current_return[item]`

因此，即使您的代码计算`current_return`正确，您也要在打印之前重置此变量。

编辑：

您正在使用 list.index() 来查找特定代码在您的`current_holdings`列表中的索引。如果`current_holdings`包含重复项，则此类调用将*始终*返回第一次出现的（请参阅有关[序列类型](http://docs.python.org/library/stdtypes.html#sequence-types-str-unicode-list-tuple-bytearray-buffer-xrange)`x.ticker`的Python 文档）

```
location = current_holdings.index(x.ticker)
today_total = today_total + ((current_weight[location]  * 0.01) * x.close)
current_return[location] = ((current_weight[location]  * 0.01) * x.close) 
```

# android - 如何在谷歌地图图像中绘制当前位置

> ID：11663456
> 
> 赞同：3
> 
> 时间：2012-07-26T06:14:27.053
> 
> 标签：android, google-static-maps, mercator

我想用静止图像地图创建 Android 应用程序，[自定义地图]

在里面。

1）当前位置谷歌地图图像（屏幕短）。[这可能是我们赢得的图纸..]如下所示。

![图像点 9.94015,76.273953](../Images/b9e2f173e9d432d72f975d74ceb2ccee.png) 9.94015,76.273953 是图像的位置。

在此图像中，蓝色图表示当前位置。

这个怎么做？

[墨卡托](http://en.wikipedia.org/wiki/Mercator_projection)可以很容易地做到这一点，但我在编程方面很陌生......

我做不到。

如果有任何机构帮助我完成示例项目，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T12:06:56.887

如果您知道地图坐标（左、右、上下），您可以轻松计算出每个像素代表多少。使用这个和 GPS 纬度，只需在正确的像素处画一个圆圈。

所以对于 X 位置：（**这不是代码）**

```
Map left = 10 
Map Right = 15
Image Width = 1000 pixels 
```

所以：

```
each pixel = (15-10)/ 1000
           = 0.005 
```

你在 GPS X 坐标 11.5 所以：

```
11.5 - 10 = 1.5
1.5 / 0.005 = 300 
```

所以你需要在 X 轴上的像素 300 处绘制你的圆圈，在你的图像上。

**重复 Y 坐标。**（使用高度、顶部和底部）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T10:25:32.600

你试图做谷歌地图标记之类的事情吗？如果是这样，那么你需要使用 ItemizedOverlay。您将在网上的 ItemizedOverlay 上找到示例。只需在 Google 上搜索“ItemizedOverlay 上的示例”即可。

你想在mapView上画一个圆形吗？如果是这样，那么这就是你必须做的......编写一个扩展 ItemizedOverlay 的类......在 onDraw 方法中使用此代码

```
@Override

public void draw(Canvas canvas, MapView mapView, boolean shadow/*, long when*/) {

    super.draw(canvas, mapView, shadow);

    Paint paint = new Paint();
    // Converts lat/lng-Point to OUR coordinates on the screen.
    android.graphics.Point myScreenCoords = new android.graphics.Point();

    GeoPoint point = new GeoPoint(15340000,75120000);
    mapView.getProjection().toPixels(point, myScreenCoords);
    paint.setStrokeWidth(1);
    paint.setARGB(255, 255, 255, 255);
    paint.setStyle(Paint.Style.STROKE);

    paint.setTextSize(20);
    paint.setColor(Color.RED);
    paint.setStrokeWidth(2);

     canvas.drawText("Here I am...", myScreenCoords.x-10,myScreenCoords.y-48, paint);
    return true;                                                   } 
```

# html - 计算网页中出现的字符串？

> ID：11663459
> 
> 赞同：0
> 
> 时间：2012-07-26T06:14:41.267
> 
> 标签：html, http, lua

此代码接收一个 web url (nytimes.com)，并输出前 10 个单词出现的列表以及它们出现的次数。我得到了前 10 个单词，但计数为零。有人可以帮我修复计数变量以显示出现次数吗？谢谢！

```
 local http = require("socket.http")
 local url = "http://www.nytimes.com"
 local body = http.request(url)
 local words = {}

 for word in string.gmatch(body,"%a+") do
   -- print(word)
   words[word] = (words[word] or 0) + 1
 end

 for word, count in pairs(words) do
  -- print(words,count)
 end

function top1(t)
   local max = 0
   local maxword 
   for word, count in pairs(t) do
     if count > max then
       max = count
       maxword = word
     end
   end 
   t[maxword] = nil
   return maxword, count
 end

 for i = 1, 10 do
   print(top1(words))
 end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T06:38:11.113

您从 top1() 返回了错误的变量 -`return maxword, count`应该是`return maxword, max`.

# android - 如何创建像我的示例一样的屏幕？

> ID：11663462
> 
> 赞同：1
> 
> 时间：2012-07-26T06:15:04.463
> 
> 标签：android, screenshot

![在此处输入图像描述](../Images/fce09a594c4b2bf86f2b38f9529082b1.png).

我想为 Android 创建一个类似于上面示例的屏幕。我怎样才能在边缘留下空白？以及如何在所有句子的末尾添加“>”符号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T06:26:21.573

Use "Custom Listview" for that and see below 2 link for custom listview example, it may help you.

[Arrow Image to the Right of a ListView](http://willvk.blogspot.in/2011/07/adding-arrow-image-to-right-of-listview.html)

[Building a Custom Fancy ListView in Android](http://androidresearch.wordpress.com/2012/01/07/building-a-custom-fancy-listview-in-android/)

[Android Custom ListView with Image and Text](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T06:26:03.360

You have to create `Custom List view` for this and set the adapter for the listview which will `inflate the layout` having two image views and textview.`'>'` you are asking about is the imageview kept at the right side(gravity) of the layout and nothing else.

To understand clearly see this [Custom Listview](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/) link which help you to create this.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T06:25:18.870

The "blank" you are talking about is padding. You are going to have to use a ListView and create an adapter of controls

You then create a control for each element in the list: with two images and a textview. You would probably use a RelativeLayout. You add the icon imageview first (padding it on the left and right) to make the "blanks". Then you add the TextView, and then you add the last ImageView which contains the picture of the ">" and align it to the right. (The first two components will be left aligned).

Then you just create an adapter with the desired items you want, changing the icon image and TextView text for each element.

[http://www.vogella.com/articles/AndroidListView/article.html](http://www.vogella.com/articles/AndroidListView/article.html)

# asp.net-mvc-3 - 如何在 MVC3 中为文本编辑器提供下拉组合以及如何根据输入的值填充组合框列表？

> ID：11663463
> 
> 赞同：0
> 
> 时间：2012-07-26T06:15:06.587
> 
> 标签：asp.net-mvc-3, combobox

我正在为我的网站使用 MVC3。我想为**下拉组合框提供文本编辑器，**并根据输入文本（当用户**按键时，应根据下拉组合框的文本编辑器中的整个文本加载时间数据**）我想填充组合框。可能吗？这个怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T07:47:18.953

你可以试试[jquery-ui 自动完成](http://jqueryui.com/demos/autocomplete/)

# firefox - Google 网络字体如何在 Mozilla Firefox 上运行，而其他跨域 @font-face 嵌入失败？

> ID：11663465
> 
> 赞同：5
> 
> 时间：2012-07-26T06:15:29.130
> 
> 标签：firefox, cross-domain, font-face, webfonts, google-webfonts

我没有使用谷歌提供的默认javascript代码，而是使用动态javascript文件中存在的@font-face css代码嵌入了谷歌网络字体。它在 Mozilla Firefox 上运行良好。

现在，当我尝试使用从 Font Squirrel 下载的网络字体时，它在 Mozilla Firefox 上不起作用。我使用了与 google 网络字体服务相同的 @font-face css 代码，但它在 Firefox 上不起作用。

我在 Firefox 上知道这一点

> Firefox（从 v3.5 开始支持 @font-face）默认不允许跨域字体。这意味着必须从同一域（和子域）提供字体。

如果是这样的话，谷歌如何管理跨域网络字体？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T06:19:32.373

要在 Firefox 上使用跨域字体，您需要使用[Access-Control-Allow-Origin](https://developer.mozilla.org/en/http_access_control)标头为它们提供服务，该标头允许托管您的应用程序的域

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-28T01:17:07.197

谷歌可以这样做，因为他们的服务器允许跨域共享。字体（和字体 css）托管在控制与谁共享的服务器上。说得通？

# ruby-on-rails - 命名范围有效，但关联无效

> ID：11663467
> 
> 赞同：0
> 
> 时间：2012-07-26T06:15:30.700
> 
> 标签：ruby-on-rails, ruby-on-rails-3

做了一个命名范围：

```
class Activity
  scope :active, where("active = ?", true)

  has_many :attachments, :as => :attachable 
  accepts_nested_attributes_for :attachments
end 
```

`a = Activity.active`工作正常，但关联`a.attachments`不行（NoMethodError：未定义的方法“附件”）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T07:41:01.127

当你引用这样的范围时，你得到的是一个`ActiveRecord::Relation`对象，而不是一个模型实例，这就是 Rails 抱怨没有关联方法的原因。例如，您可以做这样的事情

```
a.first.attachments 
```

或者

```
att = a.includes(:attachments) 
```

然后访问属于此集合中活动的附件

```
att[0].attachments 
```

# android - 谷歌播放界面

> ID：11663470
> 
> 赞同：2
> 
> 时间：2012-07-26T06:15:37.957
> 
> 标签：android, interface

我正在尝试设计一个类似于 google play 的界面。我目前正在使用列表视图来显示图像，我尝试了[http://android-developers.blogspot.com/2010/07/multithreading-for-performance.html](http://android-developers.blogspot.com/2010/07/multithreading-for-performance.html)中的示例，但它每行只显示一个图像，我需要像在 Google Play 上那样连续多张图片。

关于使用哪些组件有什么建议吗？列表视图是最佳选择吗？

请注意，图像将被延迟加载，我的界面需要垂直滚动。

谢谢，凯文

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T09:22:19.280

尝试使用 GridView：http: [//developer.android.com/guide/topics/ui/layout/gridview.html](http://developer.android.com/guide/topics/ui/layout/gridview.html)

一些教程：[http ://www.androidhive.info/2012/02/android-gridview-layout-tutorial/](http://www.androidhive.info/2012/02/android-gridview-layout-tutorial/)

# windows - 当我尝试访问非登录 servlet 时出现 Http 错误代码 401

> ID：11663475
> 
> 赞同：0
> 
> 时间：2012-07-26T06:15:58.300
> 
> 标签：windows, http, servlets, service

我从我的网络浏览器访问一个非登录 servlet，它按预期响应。我尝试使用[WinINet 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/aa385473%28v=vs.85%29.aspx)访问同一个 servlet ，父进程是 Windows 服务，并且该服务在“本地系统帐户”下运行。我在大多数机器上都得到了响应，但在少数机器上得到了错误代码 401。但我无法在另一台机器上重现。造成这种情况的根本原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T06:54:31.510

来自[RFC](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)：

401 未经授权：

> 如果请求已包含授权凭证，则 401 响应表示已拒绝对这些凭证的授权。

父进程是 Windows 服务，该服务在“本地系统帐户”下运行。

如果“本地系统帐户”没有执行服务的权限，则可能会发生这种情况。

# javascript - 从jquery中的字符串中计算特殊字符

> ID：11663481
> 
> 赞同：1
> 
> 时间：2012-07-26T06:16:22.633
> 
> 标签：javascript, jquery, string

```
var temp = "/User/Create";
alert(temp.count("/")); //should output '2' find '/' 
```

我会尝试这种方式

```
// the g in the regular expression says to search the whole string 
// rather than just find the first occurrence
// if u found User -> var count = temp.match(/User/g);
// But i find '/' char from string
var count = temp.match(///g);  
alert(count.length); 
```

你可以在这里试试[http://jsfiddle.net/pw7Mb/](http://jsfiddle.net/pw7Mb/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T06:20:22.573

使用转义字符输入正则表达式：(\)

```
var count1 = temp1.match(/\//g); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T07:00:11.463

您需要在正则表达式文字中转义斜杠：

```
var match = temp.match(/\//g);
// or
var match = temp.match(new RegExp("/", 'g')); 
```

但是，`null`如果没有找到任何内容，则可能会返回，因此您需要检查：

```
var count = match ? match.length : 0; 
```

* * *

一个较短的版本可以使用[`split`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/split)，它返回匹配之间的部分，总是作为一个数组：

```
var count = temp.split(/\//).length-1;
// or, without regex:
var count = temp.split("/").length-1; 
```

# c - 在 Windows XP 上打印一个 unsigned long long 值 - cygwin

> ID：11663485
> 
> 赞同：1
> 
> 时间：2012-07-26T06:16:28.003
> 
> 标签：c, printf

我正在尝试打印一个 unsigned long long 值。我使用了 printf 和 %llu。当我在 Windows 7 上使用 cygwin 时，我会打印一个值。当我在 Windows Xp 上使用 cygwin 做同样的事情时，我遇到了崩溃。关于如何打印的任何想法。
代码片段

```
printf("%s: Initial endClock= %llu Line %d of %s\n",
                        __FUNCTION__,temp, __LINE__, __FILE__); 
```

其中 temp 定义为 unsigned long long

还想知道 %llu 是否是 c 的标准部分

gcc -v 的输出是

```
gcc version 3.4.4 (cygming special, gdc 0.12, using dmd 0.125) 
```

# c# - 在android上平铺地图叠加层

> ID：11663489
> 
> 赞同：1
> 
> 时间：2012-07-26T06:16:41.840
> 
> 标签：c#, android, google-maps, overlay, xamarin.android

我使用 SDK MonoForAndroid。我目前正在尝试将我自己的地图显示为 android 中的 Google 地图的叠加层。

例如：谷歌地图不能很好地映射我的大学，我有一张我想贴在谷歌地图上的大学地图。

我研究了一些方法，例如：

1) 将地图显示为图像。因为大学是一个很大的地方，地图很详细。位图的图像限制为 16MB，我想加载 50MB 左右的图像。所以这不再是一个真正的选择，但它导致了选择二。

2) 显示平铺的图像。这似乎是更常见的方法。但我找不到任何很好的例子来说明它是如何在地图上绘制的。我可以找到很多关于如何剪切图像的示例，而不是在地图上绘制它。我不确定如何处理不同级别的缩放，因为需要地图的不同细节。

3) 将矩形绘制为图块，并使用图像的 bitmapShader 进行绘制。

我找不到的东西，但可能很好：

4) 是否有用于绘制平铺位图的平铺工具？

5) 绘制矢量图。

我只想以最有效/最简单的方式做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T07:47:59.830

您是否花了很多时间查看 Google Maps API？我知道在 iOS 上至少 MapKit 框架会为你处理大部分这些东西，而且我很确定 Android 会是类似的。

您应该始终开始寻找可能的最高级别 API 以保持简单。如果您已经在考虑位图大小和生成图块，那么您自己可能会觉得太难了。

这是一个看起来不错的教程，它涵盖了设置和使用 MapView 和 Mono for Android 添加叠加层：http: [//docs.xamarin.com/android/tutorials/Maps_and_Location/Part_2_-_Maps_API](http://docs.xamarin.com/android/tutorials/Maps_and_Location/Part_2_-_Maps_API)

一旦你的 MapView 工作起来，还有很多其他资源应该涵盖如何添加不同类型的覆盖（路径、点等）——但你可能会找到更多 Java 示例，所以你会有自己将其转换为 Mono C#。

*   [如何使用 kml 文件在地图上绘制路径？](https://stackoverflow.com/questions/3109158/how-to-draw-a-path-on-a-map-using-kml-file/3109723#3109723)

*   [Android - 在 MapView 上绘制路径作为覆盖](https://stackoverflow.com/questions/3036139/android-drawing-path-as-overlay-on-mapview)

# php - 上传前如何在php中查找wav文件的持续时间？

> ID：11663491
> 
> 赞同：0
> 
> 时间：2012-07-26T06:16:46.713
> 
> 标签：php, wav, duration

我需要在 php.ini 中获取 wav 文件的持续时间。我知道有很多代码示例可用于此问题。我用过这个。

```
function wavDur($file) {
    $fp = fopen($file, 'r');
    if (fread($fp,4) == "RIFF") {
        fseek($fp, 20);
        $rawheader = fread($fp, 16);
        $header = unpack('vtype/vchannels/Vsamplerate/Vbytespersec/valignment/vbits',$rawheader);
        $pos = ftell($fp);
        while (fread($fp,4) != "data" && !feof($fp)) {
            $pos++;
            fseek($fp,$pos);
        }
        $rawheader = fread($fp, 4);
        $data = unpack('Vdatasize',$rawheader);
        $sec = $data[datasize]/$header[bytespersec];
        $minutes = intval(($sec / 60) % 60);
        $seconds = intval($sec % 60);
        return str_pad($minutes,2,"0", STR_PAD_LEFT).":".str_pad($seconds,2,"0", STR_PAD_LEFT);
    } 
```

但问题是我需要文件路径，文件控件不允许我获取完整路径，我想在用户选择文件时上传之前向用户显示持续时间。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T06:24:07.360

Before uploading, the file resides at user's computer, PHP script at server-side has no knowledge of the file. As such, it would not be possible to obtain any data on the file before it is being uploaded.

# android - Android 2.3.3：从 (LinearLayout)findViewById(R.id. )

> ID：11663494
> 
> 赞同：1
> 
> 时间：2012-07-26T06:17:02.917
> 
> 标签：android, android-layout, twitter, nullpointerexception

我正在编写一个推特应用程序。我正在为用户名/主题标签创建一个搜索栏，并且在将 XML 生成的视图添加到当前存在的 LinearLayout 时遇到了一些问题。

这是 Search.java

```
public class Search extends Activity{

String searchType = "username";

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_search);

    EditText t = (EditText)findViewById(R.id.search_content);
    t.setOnClickListener(onClickSearch);
    t.setWidth(225);

    Button b = (Button)findViewById(R.id.search_button_search);
    b.setOnClickListener(onClickButton);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_search, menu);
    return true;
}

OnClickListener onClickSearch = new OnClickListener(){

    public void onClick(View v) {
        EditText searchContent = (EditText)findViewById(R.id.search_content);
        EditText clickedContent = (EditText)v;
        if((EditText)findViewById(R.id.search_content) == (EditText)v){
            EditText t = (EditText)v;
            t.setText("");
        }

        //EditText searchContent = (EditText)findViewById(R.id.search_content);
        //EditText clickedContent = (EditText)v;

        /*if((Button)v == (Button)findViewById(R.id.search_button_type)){
            EditText t = (EditText)findViewById(R.id.search_content);
            Search.this.searchByUserName(t.getText().toString());
        }

        if((Button)v == (Button)findViewById(R.id.search_button_search)){

        }*/
    }

};

OnClickListener onClickButton = new OnClickListener(){

    public void onClick(View v) {
        //if((Button)v == (Button)findViewById(R.id.search_button_search)){
            EditText t = (EditText)findViewById(R.id.search_content);
            Search s = new Search();
            s.searchByUserName(t.getText().toString());
        //}

        //if((Button)v == (Button)findViewById(R.id.search_button_search)){

        //}
    }

};

public void searchByUserName(String userName){
    //System.out.println("beginning->searchByUserName");
    TwitterHandler handler = new TwitterHandler();
    List<View> views = handler.queryUserName(userName, this);

    LinearLayout ll = (LinearLayout)findViewById(R.id.search_panel);
    for(int i = 0; i < views.size(); i++){
        ll.addView(views.get(i));
    }
} 
```

}

这是XML

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:id="@+id/search_panel" >
    <Button
       android:id="@+id/search_button_type"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:text="Search Type"/>

    <EditText
        android:id="@+id/search_content"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Search Here" >
    </EditText>

    <Button
        android:id="@+id/search_button_search"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:text="Search"/>
</LinearLayout> 
```

我的 LogCat 告诉我有一个 NullPointerException，进程被迫在 android 虚拟设备上退出。请帮忙！！！

这是 TwitterHandler

```
public class TwitterHandler extends DefaultHandler{
private final String USER_SEARCH = "https://api.twitter.com/1/users/lookup.xml?screen_name=";

public List<View> queryUserName(String userName, Context context){
    System.out.println("beginning->queryUserName");
    String url = USER_SEARCH + userName;
    //ListView view = new ListView(context);
    List<View> views = new ArrayList<View>();
    Document doc = null;
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    try {
        System.out.println("in try statement->queryUserName");
        DocumentBuilder db = dbf.newDocumentBuilder();

        InputSource is = new InputSource();
        is.setCharacterStream(new StringReader(url));
        doc = db.parse(is); 

        NodeList nl = doc.getChildNodes();

        for(int i = 0; i < nl.getLength(); i++){
            Element e = (Element)nl.item(i);
            TextView t = new TextView(context);

            String name = "";
            String screenName = "";
            Bitmap bitmap = null;

            Node n = (Node)e.getChild("name");
            name = n.getTextContent();
            t.setText(name);
            views.add(t);

            t = new TextView(context);
            n = (Node)e.getChild("screen_name");
            screenName = n.getTextContent();
            t.setText(screenName);
            views.add(t);

            n = (Node)e.getChild("profile_image_url");
            bitmap = getBitmap(n.getTextContent());
            ImageView imageView = new ImageView(context);
            imageView.setImageBitmap(bitmap);
            views.add(imageView);

        }

    }catch(Exception e){ }
    return views;
}

private Bitmap getBitmap(String imageUrl) throws IOException{
InputStream inputStream = null;
 URL u = new URL(imageUrl);
 URLConnection conn = u.openConnection();

 try{
      HttpURLConnection httpConn = (HttpURLConnection)conn;
      httpConn.setRequestMethod("GET");
      httpConn.connect();

      if (httpConn.getResponseCode() == HttpURLConnection.HTTP_OK) {
          inputStream = httpConn.getInputStream();
      }
 }
 catch (Exception ex) { }

return BitmapFactory.decodeStream(inputStream);

}

} 
```

这是日志

```
07-26 17:00:24.523: D/AndroidRuntime(335): Shutting down VM
07-26 17:00:24.523: W/dalvikvm(335): threadid=1: thread exiting with uncaught exception     (group=0x40015560)
07-26 17:00:24.533: E/AndroidRuntime(335): FATAL EXCEPTION: main
07-26 17:00:24.533: E/AndroidRuntime(335): java.lang.ClassCastException:   java.util.AbstractList$SubAbstractListRandomAccess
07-26 17:00:24.533: E/AndroidRuntime(335):  at    com.example.twitter.viewer.Search.searchByUserName(Search.java:84)
07-26 17:00:24.533: E/AndroidRuntime(335):  at com.example.twitter.viewer.Search$2.onClick(Search.java:71)
07-26 17:00:24.533: E/AndroidRuntime(335):  at android.view.View.performClick(View.java:2485)
07-26 17:00:24.533: E/AndroidRuntime(335):  at android.view.View$PerformClick.run(View.java:9080)
07-26 17:00:24.533: E/AndroidRuntime(335):  at android.os.Handler.handleCallback(Handler.java:587)
07-26 17:00:24.533: E/AndroidRuntime(335):  at android.os.Handler.dispatchMessage(Handler.java:92)
07-26 17:00:24.533: E/AndroidRuntime(335):  at android.os.Looper.loop(Looper.java:123)
07-26 17:00:24.533: E/AndroidRuntime(335):  at android.app.ActivityThread.main(ActivityThread.java:3683)
07-26 17:00:24.533: E/AndroidRuntime(335):  at java.lang.reflect.Method.invokeNative(Native Method)
07-26 17:00:24.533: E/AndroidRuntime(335):  at java.lang.reflect.Method.invoke(Method.java:507)
07-26 17:00:24.533: E/AndroidRuntime(335):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
07-26 17:00:24.533: E/AndroidRuntime(335):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
07-26 17:00:24.533: E/AndroidRuntime(335):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T06:27:20.213

You are trying to make a **new Instance Object** of your `Search Activity`. In which your `contentView` is not available, so you can not define `LinearLayout` at `searchByUserName` method.

Instead just simple use method name..

So Replace these lines,

```
Search s = new Search();
s.searchByUserName(t.getText().toString()); 
```

with only,

```
searchByUserName(t.getText().toString()); 
```

# vb.net - 使用 Visual Basic 2005 打印

> ID：11663496
> 
> 赞同：-2
> 
> 时间：2012-07-26T06:17:25.400
> 
> 标签：vb.net, printing

我试着问我的朋友如何使用 Visual Basic 2005 打印...他告诉我没有办法使用 vb2005 打印表单。我是vb2005的新手，我只想问一下这个应用程序是否有任何打印文档工具？如果是这样，请给我一个下载链接。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T08:41:02.927

你的朋友几乎是正确的。在 VB.NET 的早期版本中，没有像以前在 VB6 中那样打印表单的简单方法。从 VS2008 开始，您可以使用`PrintForm`VisualBasic PowerPacks Toolbox 部分中的组件

查看[此链接](http://msdn.microsoft.com/en-us/library/bb690938%28v=vs.100%29.aspx)以获取更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T08:15:51.927

看一下 System.Drawing.Printing 命名空间 ( [http://msdn.microsoft.com/en-us/library/system.drawing.printing](http://msdn.microsoft.com/en-us/library/system.drawing.printing) ) 应该足以开始。

# c++ - 当（执行时间）>>>（编译时间）时，多个编译单元仍然值得吗？

> ID：11663497
> 
> 赞同：4
> 
> 时间：2012-07-26T06:17:26.893
> 
> 标签：c++, compilationunit

根据我的理解，创建具有多个编译单元的程序的主要好处是组件的可重用性和合并小更改时的编译时间更短。

我还认为（可能是错误的）与此相关的惩罚是，在它们自己的编译单元中定义的函数不能声明为“内联”。
[我认识到这个关键字实际上并不强制编译器内联扩展函数，但我的理解是它为编译器提供了更大的优化灵活性，因此值得尽可能包括在内。]

到目前为止，一切都很好？

我真正的问题是，当程序解决复杂的建模问题时，成本/收益分析是否仍然有利于多个编译单元，并且需要在集群上迭代其主循环数月才能生成有用的输出。

假设一个多编译单元程序需要几分钟来编译，而重新配置为单个编译单元的同一程序需要几个小时来编译......如果单个编译单元将所有函数声明为内联，从而提供更多优化机会，对我来说，期望执行时间可以减少几个百分点似乎是合理的，而不是弥补额外的编译时间。

对于这种情况，是否有好的经验法则，或者它是否严重依赖于情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T06:24:56.263

Some compilers/linkers are able to automatically inline functions even when they are defined in one compilation unit and used in another. Microsoft's linker can certainly do this.

To me the main benefit of splitting code into separate compilation units is the overall organization of the code and I always make decisions based on this fact rather than the considerations you have. Also don't forget that larger programs are often worked on by more than one person at a time. Obviously separate compilation units is a great benefit then.

In short I think it's heavily situation dependent. I think your situation is a rare one however.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T06:55:24.417

正如其他人已经说过的，将程序分解为不同的编译单元的主要好处是可读性。更短的编译时间在某种程度上是这个想法的一个很好的副作用。

如果您关心内联，您可以求助于[Link Time Code Generation 和 Link-Time Optimization](https://stackoverflow.com/questions/5987020/can-the-linker-inline-functions)。将程序分解为编译单元和 LTO 看起来是理想的解决方案，尽管尚不清楚当函数的完整定义可用时编译器执行的优化类型是否可以由 LTO 执行。例如，我不知道 LTO 是否可以支持 C++ 中的返回值优化，因为它是在高级抽象层上完成的。需要进行性能测试。(**编辑**：即使在没有 LTO 和此类高级技巧的情况下也会执行 RVO，至少在 gcc 和 clang [我尝试过] 上是这样。最有可能的是，这种优化是通过更改函数的 ABI 来执行的，它接受一个指向必须在函数中构造和返回的对象的“隐藏指针”。）

第三种可能值得研究的解决方案是使用[sqlite amalgamation](http://www.sqlite.org/amalgamation.html)之类的东西，这是一种将不同的编译单元放入一个巨大的 .c 文件的过程。不过，看起来需要相当繁重的用户制造基础设施。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T06:35:40.667

不要忘记 80-20 规则。80% 的程序运行时间用在 20% 的代码中。也许您可以将这 20% 放在一个编译单元中，而其余的则组织良好？

关于源代码组织，您仍然可以将算法放入标头（作为模板或作为内联函数），然后从它们中组合源代码。

# javascript - 正则表达式拆分字符串在javascript中保留引号

> ID：11663498
> 
> 赞同：0
> 
> 时间：2012-07-26T06:17:30.377
> 
> 标签：javascript, regex, split

我有这个完全特定的要求，正则[表达式拆分字符串保留引号](https://stackoverflow.com/questions/4780728/regex-split-string-preserving-quotes/4780801#4780801)

**但在 JavaScript 中。**

研究图书馆“不可用”作者：“伯纳德·肖”

至

研究

图书馆

“无法使用”

作者：《萧伯纳》

我猜 js 不支持积极的向后看（谷歌搜索它:)）。我无法在 js 中干净地做到这一点。任何帮助都会非常棒，因为我不太了解正则表达式。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T06:57:19.417

为我工作。可能是你错过了一些东西。

我尝试了以下代码，它运行良好：

```
<html>
<script type="text/javascript">
    var str = 'single words "fixed string of words"';
    var split_str = str.match(/\w+|"[^"]+"/g)
    alert(split_str[0]);
    alert(split_str[1]);
    alert(split_str[2]);
</script>
</html> 
```

# ruby-on-rails - 无法在 ubuntu 12.04 中安装 nokogiri

> ID：11663499
> 
> 赞同：15
> 
> 时间：2012-07-26T06:17:34.337
> 
> 标签：ruby-on-rails, ubuntu, nokogiri

我正在尝试在我的新 ubuntu 机器上设置 rails env。但是我在安装 nokogiri gem 时遇到了麻烦。我已经安装了 libxslt 和 libxml2 libs thourgh rvm pkg 命令以及使用 apt-get。我认为它向我显示 libxslt is missing 错误。

```
Building native extensions.  This could take a while...
ERROR:  Error installing nokogiri:
    ERROR: Failed to build gem native extension.

        /home/hacker5/.rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb --with-xslt-include=/usr/include/libxslt
checking for libxml/parser.h... yes
checking for libxslt/xslt.h... yes
checking for libexslt/exslt.h... yes
checking for iconv_open() in iconv.h... no
checking for iconv_open() in -liconv... yes
checking for xmlParseDoc() in -lxml2... yes
checking for xsltParseStylesheetDoc() in -lxslt... no
-----
libxslt is missing.  please visit http://nokogiri.org/tutorials/installing_nokogiri.html for help with installing dependencies.
----- 
```

**编辑**

我正在使用 rvm 设置和 ruby​​ 1.9.3

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-26T06:19:12.900

尝试这个：

```
# nokogiri requirements
sudo apt-get install libxslt-dev libxml2-dev
gem install nokogiri 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-01-02T07:35:21.137

对于 Ruby 1.9.3 和 2.0，需要 libxslt-dev 和 libxml2-dev。

`sudo apt-get install libxslt-dev libxml2-dev`

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-05-07T16:21:33.813

这对我有用：

1.  安装 nokogiri 的依赖项

    `sudo apt-get install libxslt-dev libxml2-dev`

2.  确保 nokogiri 使用系统库

    `export NOKOGIRI_USE_SYSTEM_LIBRARIES=1`

3.  使用 --verbose 选项安装 nokogiri，以更好地了解任何问题

    `gem install --verbose nokogiri`

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-12-21T05:03:55.177

由于我偶然发现了这一点，这就是我要解决的问题：

```
sudo apt-get install ruby1.9.1-dev 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-01-16T14:24:20.673

在 14.0.4 上，使用 RVM，您需要：

```
sudo apt-get install -y libgmp-dev 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-04-02T14:35:12.187

通过安装 ruby `rvm`​​，然后安装以下库：

```
sudo apt-get install libxslt-dev libxml2-dev 
```

现在尝试在没有 sudo 的情况下安装 gem：

```
gem install nokogiri 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-11-26T17:11:38.287

apt-get install libxslt-dev libxml2-dev -y && export NOKOGIRI_USE_SYSTEM_LIBRARIES=1 && gem install --verbose nokogiri

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-05-03T07:40:20.563

对于 Centos / Redhat，试试这个： `sudo yum install libxslt-devel libxml2-devel`

# unix - 查找所有未设置粘性位的文件，该文件在我的 FreeBSD 服务器上可执行

> ID：11663502
> 
> 赞同：4
> 
> 时间：2012-07-26T06:17:44.583
> 
> 标签：unix, freebsd

如何在我的 FreeBSD 服务器上获取没有设置粘性位且文件可执行的文件列表（无目录）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T06:25:12.050

This should work for you:

```
find . \! -perm -01000 -perm -00100 -perm -00010 -perm -00001 \! -type l \! -type d -print 
```

You might want to invest some time in learning the intricacies of find. Alvin Alexander blog post [Linux find command recipes](http://alvinalexander.com/blog/post/linux-unix/linux-find-command-recipes-faqs-common-examples) is a place you might start and just google `unix find` for more.

# objective-c - NSTask 在 xCode 问题中启动

> ID：11663505
> 
> 赞同：2
> 
> 时间：2012-07-26T06:17:55.197
> 
> 标签：objective-c, xcode, macos, cocoa

我正在尝试使用此代码在应用程序包中获取我的 ImageMagick 库，但这非常复杂：

```
-(id)init
{
    if ([super init])
    {
        NSString* bundlePath = [[NSBundle mainBundle] bundlePath];
        NSString* imageMagickPath = [bundlePath stringByAppendingPathComponent:@"/Contents/Resources/ImageMagick"];
        NSString* imageMagickLibraryPath = [imageMagickPath stringByAppendingPathComponent:@"/lib"];

        MAGICK_HOME = imageMagickPath;
        DYLD_LIBRARY_PATH = imageMagickLibraryPath;
    }
    return self;
}

-(void)composite
{
    NSTask *task = [[NSTask alloc] init];

    // the ImageMagick library needs these two environment variables.
    NSMutableDictionary* environment = [[NSMutableDictionary alloc] init];
    [environment setValue:MAGICK_HOME forKey:@"MAGICK_HOME"];
    [environment setValue:DYLD_LIBRARY_PATH forKey:@"DYLD_LIBRARY_PATH"];

    // helper function from
    // http://www.karelia.com/cocoa_legacy/Foundation_Categories/NSFileManager__Get_.m
    NSString* pwd = [Helpers pathFromUserLibraryPath:@"MyApp"];

    // executable binary path
    NSString* exe = [MAGICK_HOME stringByAppendingPathComponent:@"/bin/composite"];

    [task setEnvironment:environment];
    [task setCurrentDirectoryPath:pwd]; // pwd
    [task setLaunchPath:exe]; // the path to composite binary
    // these are just example arguments
    [task setArguments:[NSArray arrayWithObjects: @"-gravity", @"center", @"stupid hat.png", @"IDR663.gif", @"bla.png", nil]];
    [task launch];
    [task waitUntilExit];
} 
```

声明`DYLD_LIBRARY_PATH`和`MAGICK_HOME`标识符**（已解决）**

# 更新：

但是当我尝试构建和运行它时，我的应用程序崩溃了。崩溃于：`[task launch];`。
控制台消息：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'working directory doesn't exist.' 
```

我该如何解决当前的问题？

# 更新 2：

当前代码：

```
- (id)initWithCoder:(NSCoder *)coder
{
NSString* bundlePath = [[NSBundle mainBundle] bundlePath];
NSString* imageMagickPath = [bundlePath stringByAppendingPathComponent:@"/Contents/Resources/ImageMagick"];
NSString* imageMagickLibraryPath = [imageMagickPath stringByAppendingPathComponent:@"/lib"];

MAGICK_HOME = imageMagickPath;
DYLD_LIBRARY_PATH = imageMagickLibraryPath;
[self composite];
}

-(void)composite
{
    NSTask *task = [[NSTask alloc] init];

    NSMutableDictionary* environment = [[NSMutableDictionary alloc] init];
    [environment setValue:MAGICK_HOME forKey:@"MAGICK_HOME"];
    [environment setValue:DYLD_LIBRARY_PATH forKey:@"DYLD_LIBRARY_PATH"];

    NSString* loc = [[NSString stringWithFormat:@"%@", MAGICK_HOME] retain];
    NSString* exe = MAGICK_HOME;

    [task setEnvironment:environment];
    NSString* pwd = @"/opt/local/lib/";
    [task setCurrentDirectoryPath:pwd];
    [task setLaunchPath:loc];
    NSLog(@"%@", loc);
    NSLog(@"%@", pwd);
    [task setArguments:[NSArray arrayWithObjects: @"-gravity", @"center", @"stupid hat.png", @"IDR663.gif", @"bla.png", nil]];
    [task launch];
    [task waitUntilExit];
} 
```

和当前错误（在控制台中）：

```
*** NSTask: Task create for path '/Users/development/Library/Developer/Xcode/DerivedData/OGL-cahltqazoqxhrthkxztsqyvvodge/Build/Products/Debug/OGL.app/Contents/Resources/ImageMagick' failed: 22, "Invalid argument".  Terminating temporary process. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T15:16:37.957

`[task setLaunchPath:...]`必须使用可执行二进制文件的路径调用。在您的“更新 2”代码中，您使用目录路径调用它。

# android - 在android中显示数据

> ID：11663506
> 
> 赞同：-1
> 
> 时间：2012-07-26T06:18:04.727
> 
> 标签：android, web-services

我必须构建一个android项目，它在edittext中从用户那里获取输入（命令）并将输出（命令解释）返回给用户。我想有两种方法来实现这一点。1）将解释存储在sql server 2005数据库中并使用webservice。2）将解释存储在文件中并检索解释。3)将解释存储在strings.xml文件中。我想问一下这三种方法中的哪一种更简单易行。此外，要从 sql server 2005 检索数据，我将需要一个 webservice。我从未使用过 webservice。有人可以指导我是否应该使用 webservice 和 sql server 2005 或使用文件。但问题是如果我使用文件来存储解释，我将无法定期修改文件。有没有办法这样做？谁能给我sql server 2005的代码示例和android中的webservice使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T06:22:35.550

好吧，如果您在本地对解释进行硬编码，则您是对的.Net 网络服务 + SQL Server。

您可以做的只是制作一个包含所有解释的 XML 文件并将其在线发布，这样您的应用程序就可以在需要时对其进行解析（无需 SQL 或 websvcs）。

# c# - WPF：将列表框与多个选定项绑定

> ID：11663508
> 
> 赞同：0
> 
> 时间：2012-07-26T06:18:32.233
> 
> 标签：c#, wpf

我正在将我的应用程序集成到 WPF，在我用来`ListBox.SetSelected(i, true);`显示的代码中`Selected Items`，它可以正常工作`Window Application`，但不能使用`WPF`。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T06:57:09.233

首先你必须设置`Selection mode`那个`List box`. 然后在所选项目中添加项目。如下所示。

```
listBox.SelectionMode = SelectionMode.Multiple;
listBox.SelectedItems.Add(seltectedItem1);
listBox.SelectedItems.Add(seltectedItem2); 
```

# python - 更改 LD_LIBRARY_PATH 以进行 pyrit 安装

> ID：11663513
> 
> 赞同：1
> 
> 时间：2012-07-26T06:18:55.537
> 
> 标签：python, setup.py

我正在尝试在没有 root 访问权限的情况下构建 pyrit。我将 libpcap 安装到 /tmp/sunjay/somefolder

我使用 -I 更改了 setup.py 以便它可以找到 pcap.h

现在我遇到了这个问题： http: [//pastebin.com/47f01XcF](http://pastebin.com/47f01XcF)

如您所见，它正在/usr/bin 中寻找lpcap，这是错误的。我从命令行尝试了'export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/tmp/sunjay/lib'，但没有区别。如何告诉脚本在不同的目录中查找 lpcap？

我一直无法找到设置路径的 .py 文件或无法更改以下行：gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions build/temp。 linux-x86_64-2.7/cpyrit/_cpyrit_cpu.o build/temp.linux-x86_64-2.7/cpyrit/_cpyrit_cpu_sse2.o -lcrypto -lpcap -o build/lib.linux-x86_64-2.7/cpyrit/_cpyrit_cpu.so

在你的回答中，请具体。我已经在这个问题上工作了几个小时，但没有成功。请记住，我只有用户权限。谢谢。

# xcode4 - 如何撤消在xcode中缩放的图像

> ID：11663515
> 
> 赞同：0
> 
> 时间：2012-07-26T06:18:58.737
> 
> 标签：xcode4

我正在开发可以缩放、旋转和翻译图像的应用程序。我在旋转撤消时保存角度。同样，我将 centerX 和 centerY 保存为翻译撤消。但是保存缩放参数会导致不希望的结果。请告诉我如何撤消缩放的图像。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T08:46:17.080

```
-(CGFloat)getCurrentScale {
    CGAffineTransform t = image.transform;
    CGFloat a, c, b, d;
    a = t.a;
    c = t.c;
    b = t.b;
    d = t.d;
    CGFloat scaleX = sqrt(powf(a,2)+powf(c,2));
    return scaleX;
} 
```

# php - Halogy仪表板不显示图表

> ID：11663517
> 
> 赞同：0
> 
> 时间：2012-07-26T06:19:04.430
> 
> 标签：php, codeigniter, content-management-system, halogy

我正在使用基于 Codeigniter 的 halogy cms。
我已经安装成功了。它在子文件夹中工作，但我遇到了问题，因为我看到仪表板统计信息未显示。
几个月前我配置了它，仪表板正在显示，但我不记得我是怎么做到的。
有什么帮助吗？
这是我修改的内容

```
config/site_config.php
$config['uploadsPath']      =   'static/uploads';
$config['staticPath']       =   '/halogy/static'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T02:39:22.763

我对这个问题做了一点修正。这是你如何做到的。

在`halogy/config/site_config.php`添加这一行

```
$config['appFolder']            =   '/halogy'; 
```

`halogy`me应用程序所在文件夹的名称在哪里。接下来添加一个函数`helpers/halogy_helper.php`

```
function addFolder($string){
    $CI =& get_instance();
    $folder =   $CI->config->item('appFolder');
    return $folder  .   $string;
} 
```

接下来搜索函数`display_image`并添加这一行

```
$path   =   addFolder($path); 
```

前

```
$imageHTML = '<img src="'.$path.'" alt="'.$alt.'" '; 
```

接下来转到`views/includes/header.php`并将此代码添加到 head 部分

```
<script type="text/javascript">
function base_url(){
    return '<?php echo base_url();?>';
}
</script> 
```

下一个`static/js/jquery.flot.init.js`并替换这个

```
base_url()+'admin/stats/'+days 
```

有了这个

```
'admin/stats/'+days 
```

最后转到第206行并替换此行

```
$imagePath = $imageData['src']; 
```

有了这个

```
$imagePath = addFolder($imageData['src']); 
```

现在图像问题已经解决，仪表板也可以正常工作。

# c# - 在 LINQ 查询中使用内置的 sql 函数？

> ID：11663523
> 
> 赞同：3
> 
> 时间：2012-07-26T06:19:21.577
> 
> 标签：c#, linq, tsql

是否可以在 LINQ 查询中使用像 user_name() 这样的内置 sql 函数？如果没有，我可以用别的东西吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T06:22:21.173

这取决于提供者。例如，在针对 SQL Server 的 LINQ to Entities 中，您可以使用[`SqlFunctions`](http://msdn.microsoft.com/en-us/library/system.data.objects.sqlclient.sqlfunctions.aspx)- 它具有[`UserName`](http://msdn.microsoft.com/en-us/library/system.data.objects.sqlclient.sqlfunctions.username)对应[`USER_NAME()`](http://msdn.microsoft.com/en-us/library/ms188014.aspx)于 Transact-SQL 中的方法。（还有很多其他的方法和属性，对于当前用户，你可以只使用[`CurrentUser`](http://msdn.microsoft.com/en-us/library/system.data.objects.sqlclient.sqlfunctions.currentuser)属性，例如。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T06:22:41.027

## 编辑

扩展到@jon Skeet 答案

[**SqlFunctions 类**](http://msdn.microsoft.com/en-us/library/system.data.objects.sqlclient.sqlfunctions.aspx)- 提供公共语言运行时 (CLR) 方法，这些方法在 LINQ to Entities 查询中调用数据库中的函数。

**如何使用**

```
using (AdventureWorksEntities AWEntities = new AdventureWorksEntities())
{
    // SqlFunctions.CharIndex is executed in the database.
    var contacts = from c in AWEntities.Contacts
                   where SqlFunctions.CharIndex("Si", c.LastName) == 1
                   select c;

    foreach (var contact in contacts)
    {
        Console.WriteLine(contact.LastName);
    }
} 
```

For : [SqlFunctions.UserName 方法](http://msdn.microsoft.com/en-us/library/dd487169.aspx) 使用`SqlFunctions.UserName ()`

* * *

这是 MSDN： [如何：调用自定义数据库函数](http://msdn.microsoft.com/en-us/library/dd456847.aspx)

*   在您的数据库中创建一个自定义函数。
*   在 .edmx 文件的存储架构定义语言 (SSDL) 中声明一个函数。函数名必须与数据库中声明的函数名相同。
*   在应用程序代码中为类添加对应的方法并将 EdmFunctionAttribute 应用到方法注意，属性的 NamespaceName 和 FunctionName 参数分别是概念模型的命名空间名称和概念模型中的函数名称。LINQ 的函数名称解析区分大小写。
*   在 LINQ to Entities 查询中调用该方法。

添加自定义功能

```
[EdmFunction("SchoolModel.Store", "AvgStudentGrade")]
public static decimal? AvgStudentGrade(int studentId)
{
    throw new NotSupportedException("Direct calls are not supported.");
} 
```

在 Linq 查询中

```
var students = from s in context.People
                   where s.EnrollmentDate != null
                   select new
                   {
                       name = s.LastName,
                       avgGrade = AvgStudentGrade(s.PersonID)
                   }; 
```

# java - Java ArrayList 从两个列表中删除重复项

> ID：11663524
> 
> 赞同：1
> 
> 时间：2012-07-26T06:19:24.663
> 
> 标签：java, arraylist

我有 2 个自定义对象的 ArrayList。我想从 ArrayList 中删除重复的条目。

这些对象具有三个字段：fName、lName 和 id。如果 id 出现多次，我想从两个列表中删除。

我怎样才能做到这一点？

我可以合并两个列表并删除 2 个重复条目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T06:21:34.183

如果要合并：只需将两个列表的内容复制到地图。然后你不再有重复项了（但你失去了你的实际顺序）：

```
Map<Integer, MyObject> temp = new HashMap<Integer, MyObject>();
for (MyObject obj:firstList) {
   temp.put(obj.getId(), obj);
}
for (MyObject obj:secondList) {
   temp.put(obj.getId(), obj);
}
List<MyObject> result = new ArrayList<MyObject>(temp.values()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T06:22:18.467

如果您的类正确实现了`equals`and`hashCode`方法，请将列表转换为 a`HashSet`以消除重复项。构造`HashSet<T>`函数接受 a`Collection<T>`所以你应该很高兴。

如果您需要一些自定义比较器功能（例如在您的情况下仅比较的功能`id`），请在`Comparator<T>`创建`TreeSet`. 总而言之，只需创建一个比较器，它比较`id`两个对象的 s 并将其传递给`TreeSet`构造函数。然后将两个列表中的项目添加到该集合中将负责消除重复项。就像是：

```
public class Test {

    public static void main(String[] args) {
        Person p1 = new Person("first", "id1");
        Person p2 = new Person("dummy", "id1"); // same id as above
        Person p3 = new Person("second", "id2");
        Person p4 = new Person("third", "id1");
        List<Person> asList = Arrays.asList(p1, p2, p3, p4);
        CustomComparator comparator = new CustomComparator();
        TreeSet<Person> ts = new TreeSet<Person>(comparator);
        TreeSet<Person> duplicates = new TreeSet<Person>(comparator);
        for (Person p : asList) {
            if (ts.contains(p) || duplicates.contains(p)) {
                duplicates.add(p);
                ts.remove(p);
            } else {
                ts.add(p);
            }
        }
        System.out.println(ts);
    }

}

class Person {

    public Person(String name, String id) {
        super();
        this.name = name;
        this.id = id;
    }

    public String name;

    public String id;

    @Override
    public String toString() {
        StringBuilder builder = new StringBuilder();
        builder.append("Person [id=");
        builder.append(id);
        builder.append(", name=");
        builder.append(name);
        builder.append("]");
        return builder.toString();
    }

}

class CustomComparator implements Comparator<Person> {

    @Override
    public int compare(Person o1, Person o2) {
        return o1.id.compareTo(o2.id);
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T06:24:10.767

Use [Set](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html) for this purpose.

Note: Great care must be exercised if mutable objects are used as set elements. The behavior of a set is not specified if the value of an object is changed in a manner that affects equals comparisons while the object is an element in the set. A special case of this prohibition is that it is not permissible for a set to contain itself as an element.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T06:35:46.723

```
HashSet<Integer> list_1_ids = new HashSet<Integer>();
HashSet<Integer> list_2_ids = new HashSet<Integer>();
for (CustomObject x : list1) list_1_ids.add(x.id);
for (CustomObject x : list2) list_2_ids.add(x.id);
HashSet<Integer> both_ids = list_1_ids;
both_ids.retainAll(list_2_ids);
List<CustomObject> pruned_list_1 = new ArrayList<CustomObject>();
for (CustomObject x : list1) if (!both_ids.contains(x.id)) pruned_list_1.add(x);
List<CustomObject> pruned_list_2 = new ArrayList<CustomObject>();
for (CustomObject x : list2) if (!both_ids.contains(x.id)) pruned_list_2.add(x); 
```

# jquery - jquery ui sortable receive(e,ui)，如何获取传入元素的子元素以便可以显示()？

> ID：11663526
> 
> 赞同：2
> 
> 时间：2012-07-26T06:19:37.317
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

我正在为我的可排序列表使用接收事件，我需要该事件能够在从可拖动元素中拖动元素时更改元素的其中一个子元素的样式。这是一个简化的示例：

```
 <ul id="sortable">
      <li>element1<div class="child"></div></li>
      <li>element2<div class="child"></div></li>
    <ul>

    <ul id="draggable">
      <li>element3<div class="child"></div></li>
      <li>element4<div class="child"></div></li>
    <ul> 
```

使用 JS：

```
 $('#sortable').sortable(
    {
          //extra stuff excluded

              receive: function(e, ui)
                         {
                            //how do I use ui to get the child element "child"?
                            //also I need to be able to style the current li element
                         }
    }
);

    $('#draggable').draggable(
            {
          connectToSortable: '#sortable'
            }
    ); 
```

**已解决的问题：Frédéric Hamidi 在下面发布了答案，但简而言之，答案是在 sortable 上使用停止事件而不是接收事件。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T06:38:59.563

在`receive`事件中，`ui.item`将包含一个包装拖动元素的 jQuery 对象。您可以将[children()](http://api.jquery.com/children/)或[find()](http://api.jquery.com/find/)与[类选择器](http://api.jquery.com/class-selector/)一起使用来匹配其子元素：

```
$("#sortable").sortable({
    receive: function(e, ui) {
        ui.item.css("color", "red");        // For example.
        ui.item.children(".child").show();  // Show child <div>.
    }
}); 
```

*更新：*由于您使用的是克隆助手，因此您可以`ui.helper`使用`ui.item`. 但是，这似乎并没有给出好的结果（可能是因为帮助程序来自另一个小部件）。

另一种解决方案是处理`stop`事件而不是`receive`. 无论辅助选项如何，`ui.item`总是有新元素：

```
$("#sortable").sortable({
    helper: "clone",
    items: "li",
    stop: function(e, ui) {
        ui.item.children(".child").show();
    }
}); 
```

[你会在这里](http://jsfiddle.net/PeS2D/338/)找到一个更新的小提琴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-16T19:10:22.273

您可以使用可排序插件上的停止功能来访问正在放置在列表中的项目。

```
$('#sortable').sortable(
{
    stop: function( event, ui )
{
    $(ui.item).html('your content here');
}
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T06:39:33.537

尝试使用 ui.item 属性。来自 jquery.ui 规范： ui.item - 当前拖动的元素。

```
receive: function(e, ui){
             var content = $(ui.item).children('div.child').html();
         } 
```

# php - PUT 请求 modrewrite

> ID：11663529
> 
> 赞同：1
> 
> 时间：2012-07-26T06:19:55.150
> 
> 标签：php, apache, mod-rewrite, apache2

我有文件 /tm/index.php 我想用这样的规则重写：

```
RewriteRule ^tm/([a-zA-Z1-9]*)$ /tm/index.php?p=$1 [L] 
```

当我尝试将 PUT 请求发送到重写的 url 时，我收到 HTTP 错误：

```
<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html><head>
<title>405 Method Not Allowed</title>
</head><body>
<h1>Method Not Allowed</h1>
<p>The requested method PUT is not allowed for the URL /tm/295014.</p>
</body></html> 
```

我不知道该怎么做。当我调用 /tm/index.php?p=295014 它工作正常，但我不能以这种方式使用它。请帮助更改重写规则。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T17:54:26.123

该问题与您的重写规则无关，您`index.php`没有设置接受该`PUT`方法。这就是 405 错误告诉您的内容。

查看允许 PUT 请求的答案：[https ://stackoverflow.com/a/2935714/851273](https://stackoverflow.com/a/2935714/851273)

# c# - 字符串的休眠映射列表

> ID：11663531
> 
> 赞同：1
> 
> 时间：2012-07-26T06:20:14.417
> 
> 标签：c#, fluent-nhibernate-mapping

我有具有以下属性的实体 SampleObject

```
SampleObject.cs
    Guid Id {get; set;}
    string Name {get; set;}
    IList<string> Images {get; set;} 
```

我试图像这样映射这些 ImagePathUrls 属性

```
Map(x => x.Images, ("ImagePathUrl")).Length(255); 
```

`ImagePathUrl`Ofcourse 在数据库方面，我有一个类型为列的表`nvarchar 255`。

在调试时我收到以下错误

```
Could not determine type for: System.Collections.Generic.IList`1
[[System.String, mscorlib, Version=4.0.0.0, Culture=neutral, 
PublicKeyToken=b77a5c561934e089]], mscorlib, Version=4.0.0.0, Culture=neutral, 
PublicKeyToken=b77a5c561934e089, for columns: NHibernate.Mapping.Column(ImagePathUrl) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T06:41:40.753

您正在将列表映射到字符串列。

```
HasMany(x => x.Images).WithKeyColumn("SampleObjectId").WithTableName("SampleObjectImages").AsElemen‌​t("ImagePathUrl"); 
```

# security - 产品密钥优化

> ID：11663533
> 
> 赞同：2
> 
> 时间：2012-07-26T06:20:31.040
> 
> 标签：security, language-agnostic, cryptography, license-key

我正在就以下问题寻求建议：

保留哪些产品密钥属于哪个客户端的列表。例如，如果我的产品密钥为 8456-7894-4567-7894，则应该这样设计，以便将列表写入数据库而不是文件。

如何将它们记录在文件中。

如果我将来想迁移到数据库并且不想重做所有事情。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T06:34:47.113

如果您选择的平台具有[SQLite](https://www.sqlite.org/)绑定，那么您肯定会想要研究它——这可能是完成您正在寻找的最简单的方法。

SQLite 数据库可以整齐地放入单个文件中，如果您了解一点 SQL，那么创建起来非常容易。此外，为与 SQLite 一起使用而编写的代码不难适应与更重量级的数据库引擎一起使用。

您可能想要创建一个用户数据表，以及另一个有效产品密钥表及其分配的用户。

# http - 在哪里可以找到 http url 方案 rfc

> ID：11663534
> 
> 赞同：3
> 
> 时间：2012-07-26T06:20:31.573
> 
> 标签：http, url, rfc3986

在 RFC3986 中，它排除了 RFC1738 中定义单个 URI 方案的特定语法的部分，并且文档说这些部分将作为单独的文档进行更新，但我找不到。任何人都可以告诉我在哪里可以找到更新的单独文档。我想写一个HTTP URL scheme parsestrong text，所以需要参考一下。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T07:29:55.337

You can look up the location of URI scheme definitions in the IANA URI scheme registry at [http://www.iana.org/assignments/uri-schemes.html](http://www.iana.org/assignments/uri-schemes.html). Not surprisingly, the HTTP URI scheme is defined in RFC 2616 (which defines HTTP/1.1).

# winforms - 以 c# 窗口形式显示用户控件控件

> ID：11663536
> 
> 赞同：0
> 
> 时间：2012-07-26T06:20:51.780
> 
> 标签：winforms, c#-4.0, user-controls

我想在窗口窗体中显示所有用户控件我在窗口窗体中添加 usercontol 并尝试使用 show() 方法显示它们。但窗口上没有显示任何内容。任何人都可以告诉如何做到这一点。

我有以下麻烦的代码（在 C# 中）

```
private void patientform_Load(object sender, EventArgs e)
{
    patient p = new patient();
    patientform patienfrm = new patientform();

    patienfrm.Controls.Add(p);
    patienfrm.Show();
    Control[] ctrl = this.Controls.Find("textBox1", true);
    //String c = ctrl[0].Text;
    //label1.Text = c; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T06:42:04.517

您关心创建一个已经加载的相同表单的新实例。您需要引用表单的正确实例。

我想您正在尝试将患者控件添加到 PatientForm。以下代码可以做到这一点：

```
Controls.Add(new Patient()); 
```

您将必须设置位置和其他属性以通过正确的锚定和对接等将其显示在正确的位置。

# django - Django 管理操作复选框未显示在 chaneglist_view

> ID：11663539
> 
> 赞同：2
> 
> 时间：2012-07-26T06:20:59.390
> 
> 标签：django, django-admin

`changelist_view`我的问题是，在 django 管理员列表视图中，当我在管理员中使用时，操作复选框没有显示。我已经给出了`admin.py`下面的代码。请仔细阅读并为我提供解决方案。

```
def changelist_view(self, request, extra_context=None):
    if request.user == 'admin':
        self.list_display_links = ('project', )
        self.list_display = ('project', 'task_name', 'assignee_role', 'assignee_name', )
    else:
        self.list_display_links = ('task_name', )
        self.list_display = ( 'task_name', 'project', 'priority', )
    return super(ModelAdmin, self).changelist_view(request, extra_context = None) 
```

这里我想要实现的是根据用户更改`list_display`和字段。`list_display_links`当我使用`changelist_view`. 但是当我这样做时，所有用户的操作复选框都被隐藏了。

那么如何在使用时显示动作复选框，`changelist_view`或者如何在不使用`changelist_view`. 请提供解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T13:00:15.443

在浏览了django安装源文件后，我找到了解决方案`django/contrib/admin/options.py`。在使用时显示动作复选框将`changelist_view`其包含在`list_display`. 但我无法弄清楚为什么它在使用时被隐藏`changelist_view`。

```
def changelist_view(self, request, extra_context=None):
    if request.user == 'admin':
        self.list_display_links = ('project', )
        self.list_display = ('action_checkbox', 'project', 'task_name', 'assignee_role', 'assignee_name', )
    else:
        self.list_display_links = ('task_name', )
        self.list_display = ( 'task_name', 'project', 'priority', )
return super(ModelAdmin, self).changelist_view(request, extra_context = None) 
```

因此，仅当当前登录用户为 admin 时才会显示操作复选框，因为它包含在`list_display`.

# jsf - 为我的应用程序更改 skinning.ecss

> ID：11663548
> 
> 赞同：0
> 
> 时间：2012-07-26T06:22:19.907
> 
> 标签：jsf, richfaces

我需要完全改变现有应用程序的 UI 样式。如何告诉 RichFaces，我想使用另一个 EL CSS 文件进行蒙皮？在哪里放置新的 .ecss 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T06:33:09.427

如果您想完全更改 RichFaces 皮肤，可以将其添加到 web.xml：

```
<context-param>
    <param-name>org.richfaces.skin</param-name>
    <param-value>skin_name</param-value>
</context-param> 
```

其中一些皮肤是：emeraldTown、blueSky、wine、japanCherry、ruby、classic、deepMarine 等。

但是，如果您想将某些内容更改为当前（或默认皮肤），您可以使用 .ecss 文件进行操作。

您可以在这里找到更多信息：http: [//docs.jboss.org/richfaces/latest_4_2_X/Developer_Guide/en-US/html/chap-Developer_Guide-Skinning_and_theming.html](http://docs.jboss.org/richfaces/latest_4_2_X/Developer_Guide/en-US/html/chap-Developer_Guide-Skinning_and_theming.html)

希望这可以帮助！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-15T14:01:49.017

Richfaces 明确[描述](http://docs.jboss.org/richfaces/latest_4_2_X/Developer_Guide/en-US/html/chap-Developer_Guide-Skinning_and_theming.html#sect-Developer_Guide-Skinning_and_theming-ECSS_files)了 .ecss 文件的修改。

您可以通过为您的自定义皮肤创建一个 jar 并将 .ecss 文件添加到此存档中来做到这一点。

自定义皮肤 jar 具有以下结构：

```
└───META-INF
    │   faces-config.xml
    │   MANIFEST.MF
    │
    ├───resources
    │   │   skinning.ecss
    │   │   skinning_both.ecss
    │   │   skinning_classes.ecss
    │   │
    │   └───org.richfaces
    │           collapsiblePanel.ecss
    │           datascroller.ecss
    │           panel.ecss
    │           panelMenu.ecss
    │           popupPanel.ecss
    │           tabPanel.ecss
    │           toolbar.ecss
    │
    └───skins
            common.skin.properties 
```

**但请注意。**我遇到了 Richfaces (4.3.7)*并不总是*喜欢您的自定义 ecss 文件而不是其标准文件的问题！我想出的唯一解决方案是从 richfaces-components-ui.jar 中删除相关的 .ecss 文件

# jquery - 为什么这个 jQuery 输入选择器需要过滤器解决方法

> ID：11663550
> 
> 赞同：0
> 
> 时间：2012-07-26T06:22:31.183
> 
> 标签：jquery

以下行这在我的 firefox/firebug 代码中不起作用（但在 JSFIDDLE 中可以正常工作），您将在下面看到我有一个解决方法，只是想知道是否有人知道内部原因？

```
var checkedVal = parseInt($('input[@name=' + uniqueNamePart + 'currDim]:checked').val(), 10); 
```

[http://jsfiddle.net/darrenshrwd/eqh2y/43/](http://jsfiddle.net/darrenshrwd/eqh2y/43/)

```
<input type="radio" value="1" name="blahcurrDim">One
<input type="radio" checked="" value="2" name="blahcurrDim">Two
<input type="radio" value="3" name="blahcurrDim">Three
<input type="radio" value="4" name="blahcurrDim">Four 
```

​...

```
$('document').ready(

function() {

    var uniqueNamePart = "blah";

    var dimensionClick = function() {

        // This does NOT work in my code in firefox/firebug (but works fine in JSFIDDLE):
        var checkedVal = parseInt($('input[@name=' + uniqueNamePart + 'currDim]:checked').val(), 10);

        // This does work in both:
        //var myRadio = $('input[name=' + uniqueNamePart  + 'currDim]'),
        //    checkedVal = parseInt(myRadio.filter(':checked').val(), 10);        

        alert(checkedVal);

    };

    $('input[name=' + uniqueNamePart + 'currDim]:radio').click(dimensionClick);

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T06:27:02.677

您的[属性选择器](http://api.jquery.com/attribute-equals-selector/)格式错误。`@`字符不是必需的：

```
var checkedVal
    = parseInt($('input[name=' + uniqueNamePart + 'currDim]:checked').val(), 10); 
```

该代码似乎可以在您的小提琴中使用，但那是因为唯一的`<input>`元素是单选按钮，因此即使忽略无效的属性选择器，匹配也会成功。

# html - 如何将 div 高度设置为 100%？

> ID：11663551
> 
> 赞同：0
> 
> 时间：2012-07-26T06:22:32.900
> 
> 标签：html, css, css-tables

我创建了空 div。我尝试将高度设置为 100% 对于**样式**中的空 Div，因为我需要在浏览器屏幕的整页中显示 div，但我无法将高度设置为 100%。有没有**可能将空 div 高度设置为 100% 的方法**？

```
 <div id="test">
        <div id="test1">

        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T06:27:36.203

***You have to specify height to parents/divs also, i.e.***

```
#test, #test1
{
  height: 100%;
} 
```

and if you want it to full screen you have to use it like this:

```
#test1, #test, body, html
{
    height: 100%;
} 
```

Hope this helps.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T06:40:54.583

你可以通过在你的css中给出一个最小高度来尝试它，比如

```
#test,#test1 {
min-height: 100%; 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T06:39:41.190

您也可以为此使用 javascript

```
 var h = document.getElementById("mainContentID").offsetHeight;
 document.getElementById("menuID").style.height = h + "px"; 
```

第 1 行创建了一个新变量“h”并将找到的元素的高度分配给该变量。这不会返回 CSS 中指定的“height:”，而是返回文档在屏幕上显示时的实际高度。

第 2 行用变量 h +“px”填充另一个较短元素的“height:”样式值</p>

将此代码放在文档末尾附近，可能就在正文标记之前，它会在页面加载时立即运行。您也可以将其包装在 jquery $(window).load 中，甚至是 $(document).ready 中。但事实上，没有库依赖——只是普通的旧 JavaScript！

请检查[http://jsfiddle.net/BDEnM/](http://jsfiddle.net/BDEnM/)

# c# - 列表 似乎不包含“删除”方法

> ID：11663556
> 
> 赞同：2
> 
> 时间：2012-07-26T06:22:56.753
> 
> 标签：c#, reflection

我有一个 MyClass 的实例，定义为：

```
public partial class MyClass  
{
    public virtual string PropertyName1 { get; set; }
    public virtual IList<Class2List> Class2Lists{ get; set; }
} 
```

我使用反射来尝试找到`Remove`方法：

```
object obj1 = myClassObject;
Type type = obj1.GetType();
Type typeSub = type.GetProperty("Class2Lists").PropertyType; 

//this method can not find
MethodInfo methodRemove = typeSub.GetMethod("Remove");

// this method can find
MethodInfo methodRemove = typeSub.GetMethod("RemoveAt");

// there is no "Remove" method in the list
MethodInfo[] methodRemove = typeSub.GetMethods(); 
```

但是我找不到`Remove`方法，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T06:27:05.050

*   `IList<T>` defines `RemoveAt()`, but it doesn't define `Remove()`.

*   `IList<T>` inherits from `ICollection<T>`, which defines `Remove()`.

An example how to retrieve the correct `MethodInfo`:

```
Type typeWithRemove = typeSub.GetInterfaces ()
    .Where ( i => i.GetMethod ( "Remove" ) != null )
    .FirstOrDefault ();

if ( typeWithRemove != null )
{
    MethodInfo methodRemove = typeWithRemove.GetMethod ( "Remove" ); 
} 
```

# ruby-on-rails - 以编程方式渲染 spacer_template

> ID：11663557
> 
> 赞同：1
> 
> 时间：2012-07-26T06:22:57.580
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个用于集合渲染之间的 rails spacer 模板。例如，它可能很简单

```
<hr /> 
```

例如，如果我呈现一组用户，那么在每个用户之后它将呈现`<hr />`. 这是我在视图中指定间隔模板的方法。

```
render :partial => @users, :spacer_template => "users/user_separator" 
```

这很好，但我想知道是否有一种方法可以从我的控制器中自行渲染间隔模板。类似`render_to_string`但专门针对间隔模板的东西。

我需要这个，因为我正在做一个 ajax 请求来添加用户评论。现在我可以成功地呈现评论，`render_to_string`但由于它不是一个集合，所以间隔模板没有显示出来。

# php - 如何使用 Composer 安装 jQuery？

> ID：11663559
> 
> 赞同：60
> 
> 时间：2012-07-26T06:22:58.693
> 
> 标签：php, symfony, composer-php

我已经能够安装没有 composer.json 文件的存储库，如下所示：

```
 {
        "type": "package",
        "package": {
            "name": "yahoo/yui-compressor",
            "version": "2.0.4",
            "dist": {
                "url": "http://yui.zenfs.com/releases/yuicompressor/yuicompressor-2.4.7.zip",
                "type": "zip"
            }
        }
    }, 
```

我从文档中获取了 "type": "zip" 部分，但我找不到许多其他类型。例如，我需要安装 jQuery，但我不知道在 type 中输入什么（“js”不起作用）。

```
 {
        "type": "package",
        "package": {
            "name": "jquery/jquery",
            "version": "1.7.2",
            "dist": {
                "url": "http://code.jquery.com/jquery-1.7.2.js",
                "type": "js"
            }
        }
    } 
```

有任何想法吗？

**编辑**：我正在添加完整的**解决方案**来帮助@CMCDragonkai：

```
 "require": {
        "vendorname/somefile": "1.2.3",
    },
    "repositories": [
        {
            "type": "package",
            "package": {
                "name": "vendorname/somefile",
                "version": "1.2.3",
                "dist": {
                    "url": "http://example.com/somefile.txt",
                    "type": "file"
                }
            }
        }
    ] 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-06-06T23:51:46.770

实际上有一个更简单的方法来安装 jQuery，只需输入：

```
{
    "require": {
        "components/jquery": "1.9.*"
    }
} 
```

它使用[Composer](https://packagist.org/packages/components/jquery)的 Component Installer，默认情况下，Component 中的所有资产都安装在 下`components`，但可以自定义。（[见文档](https://github.com/RobLoach/component-installer#configuration)）。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-07-26T13:49:48.573

这只是一个缺失的功能。可能应该有一种新的 dist 类型，它只是一个要下载并保持原样的纯文本文件。请在 github 问题跟踪器上提交功能请求：[https ://github.com/composer/composer/issues/](https://github.com/composer/composer/issues/)

**编辑 ：**

该功能[实际上存在](https://github.com/composer/composer/issues/946)但未记录在案。

```
"type": "file" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-28T00:34:49.690

如前所述，解决方案的第一部分是定义您自己的存储库和`"type: ": "file"`存储库定义选项。但随后的问题是让作曲家将 JQuery 放在您想要的位置。就目前而言，composer 似乎仅限于下载依赖源`vendor-dir`（这很烦人，但可能与自动加载要求有关）。对此限制的一般修复是编写一个克服它的作曲家插件。似乎有一些插件可以管理这个。我发现的最简单最轻量级的解决方案是[PHP Composer Asset Manager](http://www.phpclasses.org/blog/package/8429/post/1-Using-Composer-to-Install-JavaScript-CSS-and-Images-Under-the-Web-Document-Directory.html)，它专门用于管理非 PHP/Composer “资产”。但是，它至少有一个限制，即插件所做的更改不是由作曲家管理/检测的。还是可以用的。

这是`composer.json`使用该插件安装 JQuery 的完整内容：

```
{
  "name": "foo/bar",
  "require":
  {
    "phpclasses/assets": "*",
     "jquery/jquery": "*"
  },
  "repositories": [
    {
     "type": "composer",
     "url": "http://www.phpclasses.org/"
    },
    {
      "type": "package",
      "package": {
        "name": "jquery/jquery",
        "version": "1.7.2",
        "type": "jquery",
        "dist": {
          "url": "http://code.jquery.com/jquery-1.7.2.js",
          "type": "file"
        }
      }
    }
  ],
  "extra": {
    "assets": {
      "actions": [
        {
          "type": "copy",
          "target": "webroot/js",
          "pattern": "\\.js$"
        }
      ],
      "packages": {
        "jquery/jquery": "*"
      }
    }
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-10-19T01:58:07.620

使用`npm`,`yarn`或`WebPack`代替 Composer 它们更适合这种需求。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-10-19T06:44:27.523

你可以像这样使用 npm 安装 jquery，

```
npm install jquery 
```

[https://www.npmjs.com/package/jquery](https://www.npmjs.com/package/jquery)

# c# - 了解 JDK 7 - try-with-resources

> ID：11663561
> 
> 赞同：4
> 
> 时间：2012-07-26T06:23:27.347
> 
> 标签：c#, java, java-7, try-with-resources

我是.net 开发人员。最近，我对比较 java 和 c# 产生了兴趣。我发现 Java 的 try-with-resources 相当于 C# 的 using 块。但是，我无法完全理解它。我知道 C# 的 using 块是一种语言功能，编译器会为它生成代码。我想更多地了解 try-with-resources 并且对此有几个问题：

1.  它是类似于 C# 的 using 块的语言功能吗？

2.  以下内容的等效 JDK 6 代码是什么：

    ```
    try(SomeResource resource = new SomeResource())
    {
        //Some logic
    } 
    ```

3.  以下内容的等效 JDK 6 代码是什么：

    ```
    try(SomeResource resource = new SomeResource())
    {
        //Some logic
    }
    catch(SomeException ex)
    {
    } 
    ```

4.  什么是 C# 的 Reflector 或 ILSpy 工具的 Java 等价物？即反汇编Java字节码类文件并查看其Java代码的工具。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T06:28:39.353

1.  是的，它非常相似。
2.  ~~等效的java代码是相同的~~
3.  等效的java代码也相同
4.  有几个Java反编译器，但我很喜欢[JD-GUI](http://java.decompiler.free.fr/?q=jdgui)

更新：我误读了你的问题。JDK6 代码看起来像

```
try {
    final SomeResource resource = new SomeResource();
    Throwable resourceEx = null;
    try {
      //... use resource
    } catch (Throwable t) {
        resourceEx = t;
        throw t;
    } finally {

        if(resource != null) {
            if(resourceEx != null) {
                try {
                    resource.close();
                } catch (Throwable t) {
                    resourceEx.addSuppressed(t);
                }
            } else {
                resource.close();
            }
        }
    }
} catch (SomeException ex) {
//...standard error handling
} 
```

# postgresql - 当 SSH 进入 Vagrant Virtual Box（Linux Ubuntu 机器）时，从命令行编辑来自 Sublime Text 2 的文件

> ID：11663562
> 
> 赞同：2
> 
> 时间：2012-07-26T06:23:49.533
> 
> 标签：postgresql, sublimetext2, vagrant

我正在 Windows 7 机器上开发 Ruby on Rails 应用程序，但使用 Vagrant 在 Linux Ubuntu Virtual Box 上运行它。我需要访问 Postgres pg_hba.conf 文件并使用 Sublime Text 2 对其进行编辑。它位于 /Vagrant/etc 路径中，因此我必须从命令行访问。请让我知道 - 我很感激帮助。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-04T03:30:34.293

你真的需要用 Sublime Text 2 编辑它吗？

如果您可以在命令行中访问它，那么为什么不在 Ubuntu 环境中使用编辑器呢？你应该有[nano](http://www.nano-editor.org/)可用。

# java - 如何操作日期对象

> ID：11663563
> 
> 赞同：1
> 
> 时间：2012-07-26T06:23:50.590
> 
> 标签：java, date

如何按天增加日期对象？小心这个月。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T06:29:39.987

取决于您所说的“增加一天”是什么意思。如果您的意思是“恰好增加 24 小时”，那么：

```
new Date(date.getTime() + 24*60*60*1000); 
```

如果您想纠正并非所有日子都是 24 小时的事实（例如，夏令时转换日），请参阅其他答案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T06:27:12.510

这是[日历](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html)类的工作。

基本上

```
Calendar cal = Calendar.getInstance();
cal.setTime(myDate);
cal.add(Calendar.DATE, 1);
myDaye = cal.getTime(); 
```

如果您对日期/时间操作很认真，请查看[Joda-Time](http://joda-time.sourceforge.net/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T06:27:28.867

这是非常困难的，这就是我们应该使用它的原因`Calendar`。否则，您将不得不处理不同的月份长度和闰年。`Calendar`实现已经可以做到这一点。

# java - Is it only HttpProtocol that the Struts support?

> ID：11663573
> 
> 赞同：1
> 
> 时间：2012-07-26T06:24:25.800
> 
> 标签：java, jakarta-ee, servlets, httpwebrequest, struts

In the execute method of the Struts Action class, we have the following four parameters, `HttpServletRequest, HttpServletResponse, ActionForm, ActionMapping`

Does this mean that any other protocol other than Http is not supported by STRUTS??? I wonder!

Also, in Struts v2.x we do not have these parameters embedded in to the execute method. Does it mean that Struts support all protocols from the Version 2.0?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T06:35:49.307

IN short it is not,Struts was developed to provide a better warpper around the way standard HTTP based web-application was being developed.

Idea behind the framework was to make the development more easily and more flexible by taking away the complexities of the underlying HTTP protocol on which it was working.

In core of the system even Strut use HTTP Request and Repose to perform its functions and other work for you.

Update: Framework follow Servlet specification so it will for support `ServletRequest request, ServletResponse response`

You asked about Struts2 signature so here is the answer for that, Struts2 provides a clean way to make your Action POJO based so as to make the testing easily that does not mean it not support Servlet specifications,

Struts2 has cleaned the `execute` method signature so as to remove the underlying servlet dependencies on your Acton class but under the hood it uses set of interceptors to take away the HTTP complexities out of your action class and make it easy to go ahead to write unit test cases.

Though Xwork which is core of S2 allow you to write standalone application but that is not very well publicize fact

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T06:37:42.720

Struts is a wrapper to support HTTP based web application in better way. In back it uses mechanism based on Servlet.

It also has `Servlet API.jar` as dependency.

Every Struts Action class extends `Action` and By default overrides `execute` method with

```
public ActionForward execute(ActionMapping mapping,
                             ActionForm form,
                             HttpServletRequest request,
                             HttpServletResponse response) 
```

Check [http://struts.apache.org/1.x/apidocs/org/apache/struts/action/Action.html#execute%28org.apache.struts.action.ActionMapping,%20org.apache.struts.action.ActionForm,%20javax.servlet.ServletRequest,%20javax.servlet.ServletResponse%29](http://struts.apache.org/1.x/apidocs/org/apache/struts/action/Action.html#execute%28org.apache.struts.action.ActionMapping,%20org.apache.struts.action.ActionForm,%20javax.servlet.ServletRequest,%20javax.servlet.ServletResponse%29)

There is a method for Non-Http requests also.

# codeigniter - How to setup a CKEditor text area in pyrocms admin add on module?

> ID：11663578
> 
> 赞同：0
> 
> 时间：2012-07-26T06:25:03.263
> 
> 标签：codeigniter, ckeditor, pyrocms

Hi i just wanted to ask if this is the standard way of making may text area use CKEditor built in on Pyro CMS...

Here is my code.

```
 <textarea name="new_description" cols="40" rows="5" id="intro" class="blog wysiwyg-simple" >
            <?php echo set_value('car_desc', $car_desc); ?>
            </textarea> 
```

It on the admin module, and I use the "Sample" addon module to start may addon module.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T06:45:48.677

我以这种方式添加了这个编辑器

只需在控制器中构建模板时附加它即可。 `->append_metadata($this->load->view('fragments/wysiwyg', $this->data, TRUE))`

接着

```
 echo form_textarea(array('id' => 'body', 'name' => 'code', 'value' => '', 'rows' => 30, 'class' => 'wysiwyg-advanced')); 
```

希望这会对你有所帮助..

# c# - 用字符串和整数解析文件c#

> ID：11663585
> 
> 赞同：1
> 
> 时间：2012-07-26T06:25:42.057
> 
> 标签：c#, streamreader

我被分配了一个简单的任务，我似乎无法弄清楚如何完成它。

我得到了一个文本文件，其中包含员工的姓名和工资率/小时数。格式如下：

```
Mary Jones
12.50 30
Bill Smith
10.00 40
Sam Brown
9.50 40 
```

我的任务是编写一个程序，使用 StreamReader 从文本文件中提取数据，然后打印员工姓名，并通过乘以费率和小时数来计算总工资。

我知道如何使用 .Split 方法拆分行，但是我似乎无法弄清楚如何将名称与双精度/整数分开。我的解析方法总是返回格式错误，因为它首先读取字符串。我完全被困住了。

到目前为止，这是我的代码，任何帮助或指导将不胜感激。

```
using System;
using System.IO;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace lab21
{
    class Program
    {
        static void Main(string[] args)
        {

            StreamReader myfile = new StreamReader("data.txt");
            string fromFile;

            do
            {
                fromFile = myfile.ReadLine();
                if (fromFile != null)
                {
                    string[] payInfo = fromFile.Split( );
                    double wage = double.Parse(payInfo[0]);
                    int hours = int.Parse(payInfo[1]);
                    Console.WriteLine(fromFile);
                    Console.WriteLine(wage * hours);
                }
            } while (fromFile != null);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T06:30:52.657

您只在循环中读取一行。员工记录似乎由*两*行组成 - 因此您需要在每次迭代时阅读这两行。（或者，您可以跟踪您正在执行哪一行，但这会很痛苦。）我会将循环重写为：

```
string name;
while ((name = reader.ReadLine()) != null)
{
    string payText = reader.ReadLine();
    if (payText == null)
    {
        // Or whatever exception you want to throw...
        throw new InvalidDataException("Odd number of lines in file");
    }
    Employee employee = ParseTextValues(name, payText);
    Console.WriteLine("{0}: {1}", employee.Name, employee.Hours * employee.Wage);
} 
```

然后有一个单独的方法来解析这两个值，这样会更容易测试。

解析时，请注意您应该使用`decimal`而不是`double`表示货币值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T06:35:51.917

使用[`Decimal.Parse`](http://msdn.microsoft.com/en-us/library/0y1z063b)和**`read two line`**：

```
do
{
    name = myfile.ReadLine();
    if (name != null)
    {
        // read second line
        var nums = myfile.ReadLine();
        if (nums != null)
        {
            string[] payNums = nums.Split(new[] {' '});
            Console.WriteLine("{0}: {1}", 
                              name,
                              Decimal.Parse(payNums[0])
                              * Decimal.Parse(payNums[1]));
        }
    }
} while (name != null); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T06:32:15.640

您应该使用 int.TryParse(string, out int) （int 和 double）。如果它失败了，你可能有一个字符串，否则，你很幸运。

有了这些数据，你知道每一行都是一个字符串，你可能也应该把它放在代码中，你可以有一个索引/计数，当它不均匀时，你应该期待一个字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T06:54:58.770

你也可以试试这个。非常简单的修改。

```
do
{
    fromFile = myfile.ReadLine();
    fromFile += @" " + myfile.ReadLine();
    if (fromFile != null)
    {
         string[] payInfo = fromFile.Split( );
         double wage = double.Parse(payInfo[2]);
         int hours = int.Parse(payInfo[3]);
         Console.WriteLine(fromFile);
         Console.WriteLine(wage * hours);
    }
} while (fromFile != null); 
```

# node.js - 在 Windows 7 中安装 Express.JS 的问题

> ID：11663590
> 
> 赞同：13
> 
> 时间：2012-07-26T06:26:24.937
> 
> 标签：node.js, express

我已经通过他们网页上的安装程序安装了 Node.js，并将它的路径添加到我的环境变量中，以便我可以`node`通过`npm`命令行使用。如果我制作一个快速应用程序，它可以工作，但我必须手动创建它。

我猜这很好，但我想知道为什么我不能使用该`express`命令？我正进入（状态

```
`express` is not recognized as an internal or external command, operable program or batch file. 
```

我注意到 express 安装在 C:\Username\node_modules 中，而不是我认为它会去的地方，在 C:\Program Files\Nodejs\node_modules 中。这是一个问题吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2014-04-11T17:39:36.107

在更高版本的 express 命令行中被迁移到一个单独的模块：express-generetor

采用

npm install -g express-generator@3

并且可以使用 express 命令

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-26T06:44:46.760

尽管这不一定是问题，但它很烦人，即使您可以绕过它，错误也是一个错误。

尽管您可以引用其他节点模块，即使它们不在节点目录中，但据我了解，节点要求模块位于`node_modules`目录内的文件夹`Nodejs`中才能自动找到它们。（我在 osx 上遇到了类似的问题，这种方法解决了它。）

尝试移动的内容

`C:\Username\node_modules`进入`C:\Program Files\Nodejs\node_modules\`

**或者**，

您还可以使用以下方法全局安装模块：

```
npm install express -g 
```

这允许您访问它们而不必担心您的节点目录，尽管这些更难以管理并且“如果可以的话，您应该尽量避免”。

来自节点博客：

> 就像全局变量有点粗俗，但在某些情况下也是必要的一样，全局包很重要，但如果不需要，最好避免使用。
> 
> 一般来说，经验法则是：
> 
> 如果您正在安装要在程序中使用的东西，请使用 require('whatever')，然后将其安装在本地项目的根目录下。如果您要在 shell、命令行或其他地方安装要在 shell 中使用的东西，请全局安装它，以便它的二进制文件最终出现在您的 PATH 环境变量中。

**资源**

*   [相关的 SO 问题/答案](https://stackoverflow.com/questions/5817874/node-js-npm-is-not-installing-module-in-the-default-path)
*   [节点博客文章](http://blog.nodejs.org/2011/03/23/npm-1-0-global-vs-local-installation/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T07:16:28.427

您应该全局安装 express。

```
npm install express -g 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-30T06:01:19.230

安装 node.js 会将 C:\Users\\AppData\Roaming\npm\ 目录添加到您的 PATH 变量中。如果全局安装无法正常工作，那么一定是某些东西意外删除了它。运行 node.js 的修复安装应该可以解决此问题

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-30T15:25:58.500

只想添加以下内容：而不是首先使用全局安装它：

> npm install express -g

然后移动它，就像接受的答案所说（这很愚蠢），只需将它安装在节点 js 中：

```
npm install express 
```

-g 用于全局，您希望它在本地，以便 NodeJS 可以访问它。

# ios5 - iOS phonegap/cordova file browser plugin

> ID：11663600
> 
> 赞同：2
> 
> 时间：2012-07-26T06:26:46.080
> 
> 标签：ios5, phonegap-plugins

I've been working on phonegap/cordova project. My task is to download a file from a webserver , save it to iPad,iPhone native file system. I my view section I need to view these files stored on my native file system. I've managed the download part just cant figure out how to do the file browser part.I am not Objective C programmer hence, i wont be coding, but I can tweak code. If anybody knows any code snippet or **cordova/phonegap plugin** which can help please let me know.

Thanks!

# c# - 从 DB 在 ASP.NET 页面中写入 PDF 文件

> ID：11663602
> 
> 赞同：0
> 
> 时间：2012-07-26T06:26:47.823
> 
> 标签：c#, asp.net, sql, vb.net, pdf

我想在 ASP.NET 的 aspx 页面中编写 PDF 文件

我在我的数据库（sql）表中找到了数据类型图像。

我需要从 db 读取字节并将其以 pdf 格式写入 aspx 网页。

我不想导出 pdf 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T06:57:06.457

@Zia @John Gathogo Image 和 varbinary(max) 都可以用来存储二进制数据（文件），最好使用 varbinary(max) 因为 Image 已被弃用。

请参阅此阅读保存在数据库中的 pdf 文件[http://chiragrdarji.wordpress.com/2007/08/31/storing-and-retrieving-docpdfxls-files-in-sql-server/](http://chiragrdarji.wordpress.com/2007/08/31/storing-and-retrieving-docpdfxls-files-in-sql-server/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T07:56:31.543

我推荐使用 iTextSharp。试试[这个](https://stackoverflow.com/questions/3961804/itextsharp-creation-of-a-pdf-from-a-list-of-byte-arrays)链接，它包含一个将 byte[] 列表转换为 pdf 文件的示例。

# php - XERO API 的快速身份验证技术有哪些？

> ID：11663612
> 
> 赞同：2
> 
> 时间：2012-07-26T06:27:29.573
> 
> 标签：php, oauth, openssl

应用程序如何检查用户是否拥有正确的密钥？[证书并根据xero api](http://blog.xero.com/developer/)中的要求验证这些要求？我当前的算法仅检查与 api 建立初始连接所需的内容的可访问性，但不一定检查信息是否有效。

```
//check for files/keys before running xero
function provideXeroConnection($request = 'xml'){
    //validate everything is inplace
    if(validateXeroAuth()){
        //if it is then bubble the object up to (XeroAc & JSONEngine or XMLEngine)
        return new Xero(XeroAuths::getSetting('xero_consumer'), XeroAuths::getSetting('xero_secret'), XERO_PUBLIC_KEY_PATH, XERO_PRIVATE_KEY_PATH, $request );
    } else return false;
/*
* @TODO validate xero authentication
*/
function validateXeroAuth(){
    $xero_key = XeroAuths::getSetting('xero_consumer');
    $xero_secret = XeroAuths::getSetting('xero_secret');
    if(file_exists(XERO_PUBLIC_KEY_PATH) && file_exists(XERO_PRIVATE_KEY_PATH)){
        if(validateValue($xero_key) && validateValue($xero_secret)){
            return true; //feature not completely implemented @TODO
        } else return false;
    } else return false;
}
//validate the value for xero
function validateValue($value){
    if(isset($value)){
        if(!is_null($value)){
            if(!empty($value)){
                return true;
            } else return false;
        } else return false;
    } else return false;
} 
```

使用的脚本是开源的，可以在 github 上[找到](https://github.com/XeroAPI/PHP-Xero)。我还在[这里](https://github.com/XeroAPI/XeroOAuth-PHP)阅读了脚本的示例实现。但我还没有真正找到任何快速身份验证的东西。

我问这个的原因.. 是我宁愿让我的用户密钥和证书在几秒钟而不是几分钟内进行身份验证（提供并获取必须收到多少发票或联系信息）。对此问题的任何帮助将不胜感激！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T02:51:59.530

对您的问题的快速回答是进行 GET Organization 呼叫 - 如果呼叫失败并出现 401，您就知道您做错了什么。

长答案是：如果您要让用户进行身份验证，您确定应该使用私有 API 应用程序吗？还有其他应用程序类型可能更适合这种情况（我做了一些假设，所以我可能错了）。这可能会有所帮助：[API 应用程序类型指南](http://developer.xero.com/getting-started/api-application-types/)。

# c# - 在 Paint 函数中更改 DataGrid 样式中的属性类型？

> ID：11663616
> 
> 赞同：0
> 
> 时间：2012-07-26T06:27:44.343
> 
> 标签：c#, sql, datagrid, compact-framework

我有一个映射到 SQLDataAdapter 的数据网格，其中一行是一个整数，它是一个对应于字符串的 id。

我想在绘画功能中做的是：

```
protected override void Paint( Graphics g, Rectangle bounds, CurrencyManager source, int rowNum, Brush backBrush, Brush foreBrush, bool alignToRight )
  {
     int id = ( ( int )this.PropertyDescriptor.GetValue( source.List[ rowNum ] ) );

     int oldValue = id;
    this.PropertyDescriptor.SetValue( source.List[ rowNum ], "Some Text" );// m_textDataMapping[ id ] );
     base.Paint( g, bounds, source, rowNum, backBrush, foreBrush, alignToRight );
     this.PropertyDescriptor.SetValue( source.List[ rowNum ], oldValue );
} 
```

我在 this.PropertyDescriptor.SetValue 上收到关于无效参数异常的错误，我认为这是因为类型，如果我设置另一个整数，它运行正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T16:50:32.687

我不使用[PropertyDescriptor](http://msdn.microsoft.com/en-us/library/system.componentmodel.propertydescriptor%28v=vs.80%29.aspx)，但它的[PropertyType](http://msdn.microsoft.com/en-us/library/system.componentmodel.propertydescriptor.propertytype%28v=vs.80%29.aspx)是只读的。因此，如果它是整数，则不能将文本写入该值。

如果要更改字段以显示某些文本，则可能需要更改[SqlDataAdapter](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldataadapter%28v=vs.80%29.aspx)中使用的 SQL，以便将`rowNum`其显示为文本。

例如，而不是这个 SQL：

```
SELECT ID1
FROM Table1 
```

您可以使用此版本的 SQL：

```
SELECT CAST(ID1 AS nVarChar(50)) AS 'ID1'
FROM Table1 
```

现在，您可以将`rowNum`其视为文本字段。

然而，这确实是有代价的。现在，您还必须将读取的值从字符串值转换为整数值。

# cakephp - 如何在 cakephp 的助手类中读取 cookie

> ID：11663617
> 
> 赞同：1
> 
> 时间：2012-07-26T06:28:06.883
> 
> 标签：cakephp

我在 cakephp 中使用 cookie 助手，并且我使用以下代码来访问 cookie 变量的值

```
$this->Cookie->write('testvar','testvalue'); 
```

当我尝试获取此 cookie 变量的值时，我创建了一个辅助类

```
$this->Cookie->read('testvar'); 
```

它会产生错误（调用非对象上的成员函数 read()）。是否有任何其他方法可以访问助手中的 cookie 变量。尽管我可以尝试 $_Cookie （服务器变量）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T07:08:38.643

您的助手应如下所示：

```
<?php
App::uses('AppHelper', 'View/Helper');
App::uses('CakeSession', 'Model/Datasource');
class MyCookieHelper extends AppHelper 
{
         public function writeCookie($name, $value = null) 
         {
               return CakeSession::write($name, $value);
         }
         public function readCookie($name)
         {
               return CakeSession::read($name);
         }
} 
```

您可以在视图中使用它，例如：

```
$this->MyCookie->readCookie($cookie_var_name); 
```

不要忘记`MyCookie`在控制器中包含助手；

```
public $components = array('MyCookie'); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-26T06:47:05.230

您必须按照以下步骤操作：

在控制器类中，您必须放置此行，或者如果您必须在多个控制器中使用它，则可以放入 APP 控制器：

```
public $components = array('Cookie'); 
```

在行动/功能中，您可以使用它：

```
$this->Cookie->write('User.name', 'Larry');
echo $this->Cookie->read('User.name'); 
```

# actionscript-3 - Flex Shoutcast 播放器

> ID：11663619
> 
> 赞同：1
> 
> 时间：2012-07-26T06:28:16.347
> 
> 标签：actionscript-3, apache-flex, flex4, flex3, flex4.5

我需要一些帮助，我正在尝试找到一种方法来通过 flex 播放喊声，只有播放和暂停功能。

我按照以下步骤操作： [Flex/Flash Shoutcast 播放器](https://stackoverflow.com/questions/1704121/flex-flash-shoutcast-player)

但是发现新的 Flex 4.6 比上一个链接中的代码更新多了。

有人可以告诉我正确的方向或可用于播放广播流的代码吗？

谢谢！

# ruby-on-rails - Rails 中的“respond_to do |x| .. end”是什么 Ruby 语言结构？

> ID：11663620
> 
> 赞同：3
> 
> 时间：2012-07-26T06:28:16.183
> 
> 标签：ruby-on-rails, ruby, syntax

我是 ruby​​ 和 rails 的新手。有人可以指出以下构造是什么。我在方法 (def) 中看到了 respond_to 构造。那么它是方法中的方法吗？我的意思是我试图理解这里的语言结构。

我确实了解它的功能，即以给定格式发送响应。

```
 respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @posts }
    end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T06:47:49.807

语言结构是一个红宝石块。但是，如果您真的想了解`respond_to`这里的博客文章，它提供了一个很好的概述

[respond_to 是如何工作的？](http://tokumine.wordpress.com/2009/09/13/how-does-respond_to-work-in-the-rails-controllers/)

> 要理解的关键是，respond_to 是附加到控制器超类的方法：ActionController，我们将作为参数传入称为块的东西：
> 
> ...
> 
> 在 respond_to 方法中，我们最终得到一个带有一个参数的 Proc。该参数调用了 .xml 和 .html 方法。当我们从 respond_to 内部调用 Proc 时，我们将什么作为参数传递给它？我们传入一个 Responder 类的实例。
> 
> 因此，我们最终在响应程序类的实例上调用 .html 和 .xml，因为它被传递到 respond_to 方法内的块（已转换为 Proc）……唷。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T06:43:54.443

是关闭。这就像在其他语言中传递一个函数，即在 Ruby 中，您有两个选项来迭代集合：

```
for elem in collection
  # do something
end 
```

或者

```
collection.each do |elem|
  # do something
end 
```

这两者之间是有区别的，但我不在这里描述它。如您所见，这就像将一个函数传递给该方法并在其中运行它。但是也有两种传递block的方法，使用`do |variables| ... end`block或者`{ |variables| ... }`block。如果您想编写自己的接受块的方法，那么有不止一种方法可以做到（它们有点不同，但会以相同的方式运行）：

```
def run_3_times
  yield
  yield
  yield
end 
```

或者

```
def run_3_times(&block)
  block.call
  block.call
  block.call
end 
```

它们都被称为相同的方式：

```
run_3_times { puts 'hello' }
# will yield
hello
hello
hello 
```

但是当块没有通过时会导致另一个错误：

```
# when using yield
LocalJumpError: no block given (yield)

# when using Proc.call
NoMethodError: undefined method `call' for nil:NilClass
from (pry):8:in `run_3_times' 
```

这里有一些关于它的文章：

*   [http://ruby-doc.org/docs/ProgrammingRuby/html/tut_containers.html](http://ruby-doc.org/docs/ProgrammingRuby/html/tut_containers.html)
*   [http://www.robertsosinski.com/2008/12/21/understanding-ruby-blocks-procs-and-lambdas/](http://www.robertsosinski.com/2008/12/21/understanding-ruby-blocks-procs-and-lambdas/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-12-30T01:08:20.600

在 Ruby **.respond_to 上？** 是一种测试方法。其中一件事是接受一个符号，如果对象可以接收方法则返回**true ，否则返回****false**。
例如：
**[1, 2, 3].respond_to?(:push)** 将返回**true**，因为您可以在数组对象上调用**.push 。**但是
**[1, 2, 3].respond_to?(:to_sym)** 会返回**false**，因为您不能将数组转换为符号

链接：
a] Ruby 面向的是方法调用的答案，而不是对象的类型。 [回应？](http://www.codecademy.com/courses/ruby-beginner-en-1o8Mb/2/3?curriculum_id=5059f8619189a5000201fbcb)

# facebook-graph-api - 如何使用 Facebook api 查找 user_location？

> ID：11663624
> 
> 赞同：-3
> 
> 时间：2012-07-26T06:28:36.197
> 
> 标签：facebook-graph-api

我试过这个

```
https://graph.facebook.com/me/locations 
```

但没有得到我想要的:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T16:16:56.757

假设您想要用户居住的位置，根据[http://developers.facebook.com/docs/reference/api/user/](http://developers.facebook.com/docs/reference/api/user/)，用户对象有一个名为 location 的属性。因此，当您尝试[http://graph.facebook.com/me](http://graph.facebook.com/me)时，您将获得一个包含所有用户详细信息的对象，包括用户的当前位置；它有两个子键 ID 和名称。

这很容易在这里看到：http: [//developers.facebook.com/tools/explorer/ ?method=GET&path=me](http://developers.facebook.com/tools/explorer/?method=GET&path=me)

# firefox - 无法为 Firefox 扩展中的 https URL 设置 localStorage

> ID：11663626
> 
> 赞同：0
> 
> 时间：2012-07-26T06:28:44.920
> 
> 标签：firefox, firefox-addon, local-storage

[http://fartersoft.com/blog/2011/03/07/using-localstorage-in-firefox-extensions-for-persistent-data-storage/](http://fartersoft.com/blog/2011/03/07/using-localstorage-in-firefox-extensions-for-persistent-data-storage/)

我已经使用上面的链接代码为 Firefox 扩展中的 URL 设置了 localStorage。

如果我将 URL 用作“ **https://example.com** ”，则显示错误为

错误：未捕获的异常：[异常...“操作不安全。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T06:38:23.937

使用 https:// 方案保存的 Vales 是隔离的，因此您无法从只是 http:// 的位置访问它们

[http://htmlui.com/blog/2011-08-23-5-obscure-facts-about-html5-localstorage.html](http://htmlui.com/blog/2011-08-23-5-obscure-facts-about-html5-localstorage.html)

# javascript - Javascript（Titanium）中单个和多个执行上下文之间的区别

> ID：11663633
> 
> 赞同：3
> 
> 时间：2012-07-26T06:28:59.307
> 
> 标签：javascript, titanium, appcelerator, titanium-mobile, appcelerator-mobile

我对 Javascript 中的单个和多个执行上下文感到非常困惑。我提到了这个[http://developer.appcelerator.com/blog/2010/08/execution-contexts.html](http://developer.appcelerator.com/blog/2010/08/execution-contexts.html) 虽然我对 JS 上下文有一个很好的概述。但是我不知道在 Titanium 中构建应用程序时使用单个或多个上下文什么时候比较好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T17:16:13.363

来自[最佳实践文档](http://docs.appcelerator.com/titanium/2.1/index.html#!/guide/Mobile_Best_Practices-section-29004793_MobileBestPractices-ApplicationsshallruninasingleJavaScriptcontext)（强调我的）：

> 使用 Titanium Mobile，可以创建一个带有 url 属性的窗口，该属性设置为 Javascript 文件的路径（相对于当前文件）。当窗口的 open 方法被调用时，相关的 JavaScript 文件被评估，创建一个辅助的“执行上下文”，因此，一个新的范围。除非在极少数情况下，应避免这种多活动 JavaScript 环境。
> 
> 这些多个执行上下文会导致问题，因为没有任何其他范围可见，这意味着如果不笨拙地使用应用程序级自定义事件（使用 Titanium.App addEventListener 和 fireEvent），则无法在上下文之间共享数据。它们还可能导致循环引用和可能的内存泄漏。也有生命周期问题，当给定 JavaScript 文件的代码被评估时变得不清楚。
> 
> **虽然这种方法有一些合理的用例，例如“应用程序中的应用程序”，其中每个新窗口都需要一个“干净的状态”而不依赖于全局上下文，但通常不应使用带有 URL 的窗口。**

# zsh - 如何启用 zsh 5.0 命令行的高亮和着色？

> ID：11663634
> 
> 赞同：4
> 
> 时间：2012-07-26T06:29:00.970
> 
> 标签：zsh

ZSH 5.0 支持命令行的高亮和着色，但是如何启用呢？我用谷歌搜索，但没有答案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T17:22:27.513

这条消息有点老了，但我想让你知道我有一个类似问题的[帖子。](https://stackoverflow.com/questions/14981928/syntax-highlighting-at-command-line-as-i-type)一个答案回来了，有一个插件[`zsh-syntax-highlighting`](https://github.com/zsh-users/zsh-syntax-highlighting)可以让你做到这一点。希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T04:14:45.947

默认情况下，zsh 用一种颜色突出显示整个常规命令文本，并为非常规文本设置不同的颜色：增量搜索匹配、标记区域、特殊字符和自动删除的后缀。这一切都由`zle_highlight`变量控制，更多数据可以`Character Highlighting`在`man zshzle`. 此外`region_highlight`，变量可用于在命令行上突出显示任意区域，`USER-DEFINED WIDGETS`在同一手册的部分中对此进行了描述。要使最后一个有用，您需要找到一个 zsh 插件或编写自己的插件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-19T08:18:34.290

您可以改用[zsh-syntax-highlighting](https://github.com/zsh-users/zsh-syntax-highlighting)。它非常易于使用。

# sql - 如何在 SQL Server 中仅获取年份作为日期/日期时间的一部分

> ID：11663637
> 
> 赞同：4
> 
> 时间：2012-07-26T06:29:44.567
> 
> 标签：sql, sql-server, datetime, date

当我在 SQL 中创建日期类型时，结果会像这样`2012-2-1 Monday 00:00:00`

但是，我只想要年份。

我怎样才能得到这个？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T06:32:00.510

创建一个仅包含年份的数字字段，或使用 YEAR() 函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T06:32:15.950

datetime，包括日期和时间，“日期”只包括日期格式。

```
select datepart(year,getdate()) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-02T05:56:53.720

您可以使用此查询来获取当前年份。

```
select year(now()); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-03-24T15:09:18.100

您可以使用以下内容吗？：

```
SELECT * 
FROM
table_name
WHERE CONVERT(DATE, column_name) >= '2017-01-01'
AND
CONVERT (DATE, column_name) <= '2017-03-31'; 
```

但是，您可能只需要使用**CONVERT**部分，因为上面的查询会为您获取 2 个特定日期之间的数据。

它应该只是导致问题的“ **DATE** ”部分，以及您插入数据的方式。**如果您以 ' YYYY-MM-DD** '格式插入日期，它应该可以正常工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T06:37:38.760

不清楚，要不要只选择年份？
如果您使用的是 mysql，您可以执行类似的操作

```
SELECT DATE_FORMAT(<your field name>, '%Y') FROM <your table name> WHERE 1 
```

# iphone - ios - 当搜索文本为空时，UISearchDisplayDelegate 不搜索

> ID：11663639
> 
> 赞同：2
> 
> 时间：2012-07-26T06:30:02.593
> 
> 标签：iphone, ios, uisearchbar, uisearchdisplaycontroller, uisearchbardelegate

我有一个带有搜索栏的表格视图，我想在文本为空时进行搜索。

我想显示所有数据，当搜索文本为空时（当用户没有输入任何搜索文本时）

**注意 - 一切正常，输入搜索文本时，问题仅在搜索文本为空时**

不幸的`self.arForSearch`是，当搜索文本为空时，不使用数组的内容。

我什至尝试用替换文本，`"p"`但未加载数据。

**问题** 当用户没有输入搜索字符串时，如何显示所有数据？

代码粘贴在下面：

```
- (BOOL)searchDisplayController:(UISearchDisplayController *)controller shouldReloadTableForSearchString:(NSString *)searchString
{
    if(searchString.length == 0)
    {
        searchString = @"p";
        NSLog(@"string was empty but was replaced by p");
    }

    [self filterContentForSearchText:searchString];

    // Return YES to cause the search result table view to be reloaded.
    return YES;
}

- (void)filterContentForSearchText:(NSString*)str{
    // for inCaseSensitive search
    str = [str uppercaseString];

    NSMutableArray *ar=[NSMutableArray array];
    for (NSDictionary *d in self.arForTable) {
        NSString *strOriginal = [d valueForKey:@"name"];
        // for inCaseSensitive search
        strOriginal = [strOriginal uppercaseString];

        if([strOriginal hasPrefix:str]) {
            [ar addObject:d];
        }
    }
    self.arForSearch=[NSArray arrayWithArray:ar];

    NSLog(@"self.arForSearch.count = %i", self.arForSearch.count);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T11:51:43.393

```
- (void)filterContentForSearchText:(NSString*)str{
// for inCaseSensitive search
str = [str uppercaseString];

if([str isEqualToString:@""] || str == nil)
{
     self.arForSearch=[NSArray arrayWithArray:self.arForTable];
}
else
{
    NSMutableArray *ar=[NSMutableArray array];
    for (NSDictionary *d in self.arForTable) {
         NSString *strOriginal = [d valueForKey:@"name"];
        // for inCaseSensitive search
        strOriginal = [strOriginal uppercaseString];

        if([strOriginal hasPrefix:str]) {
            [ar addObject:d];
        }
    }
    self.arForSearch=[NSArray arrayWithArray:ar];
}
NSLog(@"self.arForSearch.count = %i", self.arForSearch.count);

//updated code
[yourTable reloadData]; 
```

}

只需检查空字符串并将 self.arForTable 中的所有元素添加到 self.arForSearch。

希望这可以帮助...

更新......那么你可能需要添加行 [yourTable reloadData]; 最后将刷新表数据

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T11:15:34.427

我编写了以下代码，以便在搜索栏获得焦点且没有文本时显示结果。

注意：在我的应用程序中，搜索栏占位符等于最后插入的搜索文本，因此您可能需要修改下面的代码。

```
//auxiliar function to force display of search results
-(void)forceDisplaySuggestionsForText:(NSString*)searchString {
    UISearchDisplayController *sdc = self.searchDisplayController;
    SEL sel = @selector(searchBar:textDidChange:);
    if([sdc respondsToSelector:sel]){
        UISearchBar *sb = sdc.searchBar;
        [sdc performSelector:sel withObject:sb withObject:searchString];
    }
}

- (void) searchDisplayControllerWillBeginSearch:(UISearchDisplayController *)controller {
    controller.searchBar.text = controller.searchBar.placeholder;
    //this will force initial display of the search results
    [self performSelector:@selector(forceDisplaySuggestionsForText:) withObject:controller.searchBar.text afterDelay:0];
}

- (void)filterContentForSearchText:(NSString*)str {
    //this will force display of results when there is no text in search bar
    if([str length] == 0){
        [self performSelector:@selector(forceDisplaySuggestionsForText:) withObject:@" " afterDelay:0];
    }
    //the rest of the code for content filtering
    ...
} 
```

# android - 用 80% 的屏幕宽度创建圆形和酷炫风格的按钮的最佳方法是什么？

> ID：11663640
> 
> 赞同：0
> 
> 时间：2012-07-26T06:30:08.373
> 
> 标签：android, layout, button, view

我正在开发一个 Android 应用程序。

我的应用程序上有一个菜单屏幕，其中必须有一些按钮。我需要按钮的宽度始终为屏幕宽度的 80%，并且这些按钮的样式必须很酷，带有圆形边和一些样式，看起来不错的按钮。这些按钮也必须包含我想放在它们上面的文本。

我试图这样做创建 png 按钮并在 android 上缩放它们（通过 java 代码），但这种方式是一种不好的方式。

我想学习一种更好的方法来做到这一点，**例如，直接使用 java 代码创建视图并覆盖 onDraw 方法**。满足我的需求的最佳方法是什么？

**欢迎代码示例**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T06:36:37.673

我认为您可能会从研究**9 补丁机制**中受益。有很多关于如何做到这一点的教程。

[http://developer.android.com/tools/help/draw9patch.html](http://developer.android.com/tools/help/draw9patch.html)

[http://radleymarx.com/blog/simple-guide-to-9-patch/](http://radleymarx.com/blog/simple-guide-to-9-patch/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T08:02:56.147

如果您不想使用 9-patches，但仍想创建样式按钮，则可以使用 Shapes。
[这篇博文](http://androidresearch.wordpress.com/2012/03/24/drawing-shapes-in-android/)可能会对您有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T08:09:29.170

使用滤色器修改内置按钮以赋予它们不同的颜色。这可以保持它们凉爽的形状和阴影。在布局 xml 中使用 android:weight 使它们占据屏幕宽度的 80%。

```
Button.getBackground().setColorFilter(0x64034C8C,PorterDuff.Mode.MULTIPLY); 
```

此示例使用 8 个十六进制数字来定义颜色。前两位数字指定透明度，而其他数字定义颜色的 RGB 值。

# junit - Junit Mock 外部静态接口

> ID：11663645
> 
> 赞同：0
> 
> 时间：2012-07-26T06:30:19.957
> 
> 标签：junit

我们正在使用外部包，它提供接口来获取我们进行 Web 服务调用的服务实例。

API 就像 ClientServiceInterface.getService(location);

其中 getService 是静态方法。我想嘲笑这个，我该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T06:33:28.653

您将需要一个能够进行字节码操作的模拟框架，因为如果不求助于静态方法，则无法模拟。

看看[Powermock](https://code.google.com/p/powermock/)，尤其是[Mocking Static Methods](https://code.google.com/p/powermock/wiki/MockStatic)部分。

# java - 如何从像 wrk for Work 这样的短短信单词中获取完整的单词？

> ID：11663646
> 
> 赞同：-1
> 
> 时间：2012-07-26T06:30:24.957
> 
> 标签：java, str-replace

我确实喜欢将短词替换为其原始词，例如

```
1.>wrd---word

2.>congrats---congratulations 

3.>oswm-----------owesome

4.>awsum ------- owesome 
```

表情符号不包含所有此类单词

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T06:32:48.843

假设您实际上*知道*要替换为什么，您可能想要设置某种类型，`Map<String, String>`然后遍历`w`输入字符串中的每个单词并将其替换为`yourMap.get(w)`.

这是给您的示例代码段：

```
Map<String, String> dict = new HashMap<String, String>() {{
    put("wrd", "word");
    put("congrats", "congratulations");
    put("oswm", "awesome");
    put("awsum", "awesome");
}};

String input = "Here's an awsum example wrd, congrats!";

StringBuffer result = new StringBuffer();

Pattern p = Pattern.compile("\\w+");
Matcher m = p.matcher(input);

while (m.find()) {
    String toInsert = m.group();
    if (dict.containsKey(toInsert))
        toInsert = dict.get(toInsert);
    m.appendReplacement(result, toInsert);

}

m.appendTail(result);

System.out.println(result); 
```

**输出：**

```
Here's an awesome example word, congratulations! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T06:38:41.537

这是我发现的一个很好的资源：http: [//www.internetslang.com/](http://www.internetslang.com/)

不幸的是，他们不允许您下载完整的缩写词列表，您可以在几分钟内手动完成。只需单击 26 次，然后选择全部+复制+粘贴。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T06:33:04.630

建立你自己的字典。将其加载到 HashMap 之类的东西中并开始运行。

我确信像[Scanner](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html)这样的东西可能有用，或者只是使用像[String.split这样的东西](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)

# string - 高速字符串匹配算法

> ID：11663648
> 
> 赞同：13
> 
> 时间：2012-07-26T06:30:53.427
> 
> 标签：string, algorithm

我基本上是在对一些高速字符串匹配算法进行基准测试，我遇到了一些。

1.  Gonzalo Navarro 和 Mathieu Raffinot 的反向非确定性 DAWG（有向无环词图）匹配算法。请参阅“后缀自动机的位并行方法：快速扩展字符串匹配”

2.  Horspool 改进版的 Boyer-Moore 字符串搜索算法。请参阅“字符串中的实用快速搜索”

3.  不匹配的 Shift-Or 算法

4.  [KMP](http://en.wikipedia.org/wiki/Knuth%E2%80%93Morris%E2%80%93Pratt_algorithm)

我可以尝试其他更好的高速字符串匹配算法吗？

编辑：在类似的行中有另一个[线程](https://stackoverflow.com/questions/5106586/what-are-the-available-string-matching-algorithms-besides-knuth-morris-pratt-ra?rq=1)，它也有很好的参考

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T11:52:55.497

据我所知，双向字符串匹配是字符串匹配的最佳通用算法。它具有线性的最坏情况复杂性，使用恒定空间，并且不会过多地回溯。它背后的理论非常好。

如果您知道您的用户不是混蛋，那么为您的架构优化的天真字符串匹配将赢得短“针”，而 Boyer-Moore 变体将开始真正为长“针”做亚线性的事情。然而，朴素字符串匹配具有二次最坏情况，并且可以使用 Boyer-Moore 来检查输入中的所有字符。处理不匹配所需的额外表实际上比双向字符串匹配带来了令人惊讶的严重惩罚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T11:39:21.577

你也可以试试

*   [Z 算法](http://binfalse.de/2010/09/advanced-searching-via-z-algorithm/)：在某些方面甚至比 KMP 更简洁
*   [Aho Corasick](http://en.wikipedia.org/wiki/Aho%E2%80%93Corasick_string_matching_algorithm)：基于 Trie，最初用于 fgrep
*   [Rabin Karp](http://en.wikipedia.org/wiki/Rabin%E2%80%93Karp_algorithm)：基于哈希

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-04-13T19:32:07.087

```
import java.util.Scanner;

public class StringMatch {

static int temp,i=0,j=0; static boolean flag=true,matcher=false;

    static String str=null,mstr=null;static char astr[],amstr[];

        static void getter(){
        Scanner sc = new Scanner(System.in);
        str = sc.nextLine();
        //String str="today is Monday"; 
        astr=str.toCharArray();
         mstr = sc.nextLine();
        //String mstr="is"; 
         amstr=mstr.toCharArray();
    }
    static void stringMatch(){
        while(i<astr.length){
            if(astr[i]==amstr[j]){
            while((j!=amstr.length)&&flag){temp=i;
                if(astr[i]!=amstr[j]) {flag=false;matcher=false;}
                else{matcher=true;}
                i++;j++;
                //System.out.println(i+"\t"+j);
            }if(matcher==true)break;i=temp;}i++;j=0;flag=true;

        }
        if(matcher==true) {System.out.println("true");}
        else    {System.out.println("false");}
    }
    public static void main(String[] args) {

    StringMatch.getter();
    StringMatch.stringMatch();

    }
} 
```

# android - Android 数据库存储

> ID：11663657
> 
> 赞同：1
> 
> 时间：2012-07-26T06:31:24.303
> 
> 标签：android, database, image, sqlite, audio

这是我想做的：

1.  将图像文件（png）和音频文件写入 SQLite DB（我想我必须使用 BLOB 来执行此操作，但不确定具体如何）
2.  然后从数据库中拉出这个 PNG 图像和文本以在常规列表视图（常规列表适配器）中显示它，并将其与相应的文本结合起来

因此，例如，一个 DB 条目将包含一个婴儿的图像，单词*baby*作为描述图像的文本和一个婴儿哭泣的录音。另一个条目会有一个门铃等等。

然后我想在 ListView （图像+相应的文本元素）中显示所有这些 DB 条目，使其看起来像这样：

（宝贝图片）宝贝

我知道我可以使用自定义列表适配器并从 @drawables 中提取图像，但 SQLite 方法对我来说似乎更优雅和合适。

由于我是新手，我希望有一个教程和示例代码来展示如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T06:39:15.617

首先阅读博客，然后尝试实现示例

1.  [http://www.helloandroid.com/tutorials/store-imagesfiles-database](http://www.helloandroid.com/tutorials/store-imagesfiles-database)
2.  [http://www.anddev.org/png_image_--und-gt_sqlite_db_--und-gt_imageview-t7188.html](http://www.anddev.org/png_image_--und-gt_sqlite_db_--und-gt_imageview-t7188.html)完整示例

希望能帮助到你

最重要的是，而不是将音频文件数据存储在 SQLITE 中，将文件保存到文件系统中（如 Documents 目录中）并将文件名保存到 SQLITE 数据库中存储图像文件的同一张表中......以存储AUDIO 你也可以看到[Upload video into SQLite](https://stackoverflow.com/questions/4004374/upload-video-in-sqlite-in-iphone/4004481#4004481) 部分。

如果我没记错的话，SQLite 的总行大小限制为 < 1024kb

# android - 如何在android中禁用视图的垂直滚动？

> ID：11663668
> 
> 赞同：1
> 
> 时间：2012-07-26T06:32:36.777
> 
> 标签：android

在我的 android 应用程序中。我有一个全景视图，在这个视图中我只想避免垂直滚动。所以我使用 `onTouchEvent(MotionEvent event)`方法禁用了它。

听到的是代码。

```
 @Override
public boolean onTouchEvent(MotionEvent event) {
    if( event.getAction()==MotionEvent.ACTION_UP){
        Log.d(TAG, "onTouchEvent:ACTION_UP");
        return false;
    }else if(event.getAction()==MotionEvent.ACTION_DOWN){
        Log.d(TAG, "onTouchEvent:ACTION_DOWN");     
        return false;
    }else{
        Log.d(TAG, "onTouchEvent:ACTION_UNKWON");
        return super.onTouchEvent(event);
    }

} 
```

但它也禁用水平滚动。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T07:08:12.537

我认为您误解了`ACTION_DOWN`and的概念`ACTION_UP`。

`ACTION_DOWN`指当您的手指触摸触摸屏时，`ACTION_UP`即当您将手指从触摸屏上移开时。

也就是说，您可以指示`ACTION_DOWN`运动事件开始，`ACTION_MOVE`从坐标检查触摸事件的方向并决定是否要阻止运动，然后在`ACTION_UP`.

```
float startX
float startY;   

@Override
public boolean onTouchEvent(MotionEvent event) {

    switch (event.getAction()) {
    case MotionEvent.ACTION_DOWN:
        startX = event.getX();
        startY = event.getY();
        break;
    case MotionEvent.ACTION_MOVE:
        float currentX = event.getX();
        float currentY = event.getY();

        float diffX = Math.abs(currentX - startX);
        float diffY = Math.abs(currentY - startY);

        // The purpose of the +100 is to make sure that we have a big enough
        // difference between the 2 directions, eg. it's not diagonal
        if(diffY > diffX + 100){
            return false;
        }
        break;
    case MotionEvent.ACTION_POINTER_UP:

        break;
    }

    return true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T07:17:57.870

我不确定这应该如何用于全景视图，但对于其他视图，我使用 GestureDetector 来捕捉滚动/甩动运动（我通常使用甩动，因为滚动是一个非常短的运动）：

```
public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX, float distanceY){
   if (Math.abs(distanceY) > Math.abs(distanceX))
    return true;// mark the vertical scroll as handled and do nothing
   return false;
} 
```

另一种选择是使用 onTouchEvent，但是在 ACTION_MOVE 中，您必须检测何时有垂直滚动（如 paradx 所说）。

希望能帮助到你：）

# paypal - 数字商品的 Paypal 可以集成到 Blogger 博客中吗

> ID：11663669
> 
> 赞同：0
> 
> 时间：2012-07-26T06:32:40.753
> 
> 标签：paypal, download, blogger, blogspot, paypal-digital-goods

我意识到数字商品的 Paypal 有一个针对数字商品的 Javascript 覆盖支付方式，但付款后我不确定下载是如何触发的。当我正在运行 Blogger 博客时，有没有办法在不去服务器端的情况下做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T03:51:49.193

不幸的是，这是不可能的。
出于安全原因，Paypal 数字商品流程需要服务器端处理。如果无法访问本地服务器端，您将需要使用其他 Paypal 产品之一来管理整个支付流程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T15:52:58.490

有两个项目可以讨论，*付款*和*产品下载*。

1.  使用 PayPal 数字商品，您可以让客户在线支付您的数字商品。完成后，您将收到来自 PayPal 的即时通知，您需要...
2.  做一些事情来向客户展示下载链接。这不是 Paypal 提供的，您需要向客户显示一个带有下载链接的订单确认窗口，或者提供一些其他方法来交付您的产品，例如电子邮件。

只需确保确保下载链接安全，这样您就不会赠送免费产品。

# angularjs - 如何将 AngularJS 引入使用 Backbone 和 JQuery 的现有应用程序？

> ID：11663677
> 
> 赞同：12
> 
> 时间：2012-07-26T06:33:06.213
> 
> 标签：angularjs

我正在使用 jQuery 和 Backbone 构建一个应用程序，我发现自己一遍又一遍地编写大量样板代码。我一直在研究 AngularJS，它比主干和 jQuery 更适合我的应用程序。我想在几页上介绍 Angular 并逐渐从 Backbone 转换为 Angular，前提是我没有遇到 Angular 的问题。

是否可以在同时使用 Backbone 和 JQuery 的页面上使用 AngularJS？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T13:25:00.687

我相信，简短的回答是“是”。Angular 确实有一个内联模板结构，可以帮助您逐渐从主干迁移，一旦您准备好，您可以将这些内联移动到外部部分。恕我直言，这将是可读性/可维护性的一大优势。Angular 还有一种机制，可以将应用程序（模块）与页面的一个子集（一个 div 元素）关联起来。我已经在 .NET 应用程序中使用了这种技术。我已经完成了一些主干开发，并且很确定您可以使两者共存。

# ruby - 延迟使用 ruby 线程

> ID：11663680
> 
> 赞同：0
> 
> 时间：2012-07-26T06:33:17.947
> 
> 标签：ruby, multithreading

我编写了一个 ruby​​ 脚本，其中包含要下载的文件列表（~250）。由于顺序下载需要很长时间。我想在一个单独的线程中下载每个文件。尽管我给出了 20 的延迟，但看起来所有线程一次都在访问服务器。因此，我收到 502 错误，并且没有下载任何文件。如何在不使服务器超载的情况下并行下载所有文件。

```
#list of fiiles
files = []
threads = []  
files.each do |file|
   threads  << Thread.new(file){ | file |
     sleep(20)  
     #Download the file using either curb or Net::HTTP
     sleep(20)
}
end

threads.each(&:join) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T06:41:58.187

您应该考虑在后台使用此操作。

查看一些实际上不会阻塞并在后台执行操作的 gem - 例如，DelayedJob。另外，查看一些 railscasts ：

[http://railscasts.com/episodes/128-starling-and-workling](http://railscasts.com/episodes/127-rake-in-background)

[http://railscasts.com/episodes/128-starling-and-workling](http://railscasts.com/episodes/128-starling-and-workling)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T06:44:36.430

创建一个线程池，从中创建新线程。这样，您将不会创建比池中提供的更多的内容，并避免应用程序/服务器崩溃。或者，看看[SideKiq](http://mperham.github.com/sidekiq/)这是一个多线程替代后台队列处理器，如 DelayedJob 和 Resque。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-01-03T09:22:09.800

```
threads.each {|thread| thread.join; sleep 1} 
```

# java - Java：Spring/Hibernate 中的增量过滤

> ID：11663684
> 
> 赞同：0
> 
> 时间：2012-07-26T06:33:45.643
> 
> 标签：java, spring, hibernate, filtering

我们正在解决一个问题，我们需要使用一组条件从数据库中获取唯一数据。这个想法是首先使用最一般的条件进行获取（因为它是最快的）。如果它只返回一项，那就太好了；如果它返回多个项目，那么我们需要通过逐步应用越来越多的条件来过滤该数据，直到它只给我们一个结果。

Spring/Hibernate 或任何其他库是否已经提供了与我们想要做的类似的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T06:45:03.157

您可以尝试使用基于规则的编程来处理此问题，但可能会过度设计您的解决方案。

# jquery - 使用 JQuery 访问文本框数组 id 的正确方法

> ID：11663689
> 
> 赞同：1
> 
> 时间：2012-07-26T06:34:10.693
> 
> 标签：jquery, html

谁能帮助我，如果文本框的 id 或名称是一个数组，那么正确的语法是什么？

```
<input type="text" name="txt" id="txt" value="1" />
<input type="text" name="txt[0]" id="txt[0]" value="2" />

<script>
    // Msg: 1
    alert($('#txt').val());

    // Msg: Undefined
    alert($('#txt[0]').val());

</script> 
```

先感谢您

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T06:36:58.290

[使用See here](http://docs.jquery.com/Frequently_Asked_Questions#How_do_I_select_an_element_by_an_ID_that_has_characters_used_in_CSS_notation.3F)转义特殊字符`\\`

```
alert($('#txt\\[0\\]').val()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T06:36:41.433

`[]`用于按属性选择元素。您需要逃避这些，以取消该行为：

```
$('#txt\\[0\\]').val() 
```

# android - Android Search Checkable ListView

> ID：11663693
> 
> 赞同：1
> 
> 时间：2012-07-26T06:34:52.693
> 
> 标签：android, listview, search

我想这样做，以便用户可以搜索 ListView 检查所需的项目。我已经创建了一个没有搜索实现的可检查 ListView。我尝试使用 EditText 和 TextChangedListener 添加搜索。这适用于普通的 ListView，但由于此方法在每次用户键入时都会创建一个新适配器，因此检查的项目会丢失。

我的问题：

A. 有没有办法在保持同一个适配器的同时通过 ListView 进行搜索？

B. 有没有办法使用我当前使用 TextChangedListener 的方法但保持检查的项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T18:20:36.617

您可以构建自己的包含列表视图元素字段的类并添加一个字段（isChecked）。重新创建适配器时，您使用已创建的对象并保存选中状态，并且在每一行的 getview 中，您可以通过此属性选中\取消选中此项

这是我的自定义复选框，您可以使用它并根据需要进行修改，我认为它可以满足您的目的（我从我的应用程序中获取此代码，您可以检查它在[此应用程序](https://play.google.com/store/apps/details?id=ru.human.notes)中的工作方式）：

```
package ru.human.notification;

import java.util.ArrayList;

import android.content.Context;
import android.graphics.Paint;
import android.util.AttributeSet;
import android.view.View;
import android.widget.CheckedTextView;

public class CustomCheckBox extends CheckedTextView
{

    private int CHECKED_IMAGE;
    private int UNCHECKED_IMAGE;
    private main_full parent;
    private ArrayList<View> viewsToCheck;
    private int msgType;

    public void setParent(main_full parent, int msgType)
    {
        this.parent = parent;
        this.msgType = msgType;
        setOnLongClickListener(longClickListner);
    }

    public void addViewToCheck(View view)
    {
        this.viewsToCheck.add(view);
    }

    OnLongClickListener longClickListner = new OnLongClickListener() {

        @Override
        public boolean onLongClick(View v) {
            // TODO Auto-generated method stub
            if (parent != null && isChecked())
                parent.showTimeDialog(msgType);
            return true;
        }
    };

    OnClickListener listener = new OnClickListener()
    {

        public void onClick(View v)
        {
            // TODO Auto-generated method stub
            if (!isChecked())
            {
                setTextColor(getResources().getColor(R.color.green));
                setPaintFlags(0);
                setChecked(true);
                setCheckMarkDrawable(CHECKED_IMAGE);
                if (parent != null)
                    parent.showTimeDialog(msgType);
            }
            else
            {
                setTextColor(getResources().getColor(R.color.lightgrey));
                setPaintFlags(Paint.STRIKE_THRU_TEXT_FLAG);
                setChecked(false);
                setCheckMarkDrawable(UNCHECKED_IMAGE);
            }
            for (View view: viewsToCheck)
                view.setVisibility(isChecked()?View.VISIBLE:View.GONE);
        }
    };

    public CustomCheckBox(Context context, AttributeSet attrs, int defStyle)
    {
        super(context, attrs, defStyle);
        setOnClickListener(listener);
        System.out.println("1");
        // TODO Auto-generated constructor stub
        // TODO mmmm

    }

    public CustomCheckBox(Context context, AttributeSet attrs)
    {
        super(context, attrs);
        viewsToCheck = new ArrayList<View>();
        String xmlns="http://schemas.android.com/apk/res/ru.human.notification";
        setOnClickListener(listener);       
        System.out.println("2");
        int k = R.drawable.alarmgrey;
        CHECKED_IMAGE = attrs.getAttributeResourceValue(xmlns, "checkedImage", 404);
        UNCHECKED_IMAGE = attrs.getAttributeResourceValue(xmlns, "uncheckedImage", 404);
        setCheckMarkDrawable(UNCHECKED_IMAGE);
        setTextColor(getResources().getColor(R.color.lightgrey));
        setTextSize(18f);
        setPaintFlags(Paint.STRIKE_THRU_TEXT_FLAG);
//      setChecked(false);
        System.out.println(CHECKED_IMAGE +" " + UNCHECKED_IMAGE + " " +k);

        // TODO Auto-generated constructor stub
    }

    public CustomCheckBox(Context context)
    {
        super(context);
        final Context parent = context;
        System.out.println("3");
        // TODO Auto-generated constructor stub
        setOnClickListener(listener);
    }

} 
```

attrs.xml：

```
</declare-styleable>

    <declare-styleable name="CustomCheckBox">
        <attr name="uncheckedImage" format="integer"/>
        <attr name="checkedImage" format="integer"/>
    </declare-styleable>

</resources> 
```

用法：

```
<ru.human.notification.CustomCheckBox
                    android:id="@+id/delayed"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:background="@drawable/settingsbutton"
                    android:checked="false"
                    customcheckbox:checkedImage="@drawable/clockcolor"
                    android:text="@string/delay"
                    customcheckbox:uncheckedImage="@drawable/clockgrey" /> 
```

将此视图放到您的 listview 中并创建 setChecked 方法（代码与 onClick 方法中的代码相同）。不要注意 setParent 和 addViewToCheck 方法 - 它们是在我的应用程序中控制 UI 的方法。

# mongodb - 保持 mongo 模式同步

> ID：11663695
> 
> 赞同：0
> 
> 时间：2012-07-26T06:35:00.980
> 
> 标签：mongodb

我在一个项目中工作，该项目具有 PHP 前端和 JAVA 后端。该应用程序使用 MongoDb。在 PHP 和 JAVA 中都有一个映射 Mongo 集合的 ORM 层。问题是有时很难让 mongo 集合保持同步。

PHP 开发人员可以在其实现中添加一个新的文档属性，但没有什么可以警告 JAVA 开发人员。当然，口头和书面交流可以成为一种解决方案，但在实践中它不是万无一失的，而且难以维护。

我能想到的一种解决方案是编写一个 XML 文档并将其用于 JAVA 和 PHP 来为其生成基本的 ORM 类。该文件将使用版本系统保持最新。

你知道解决这个问题的好方法吗？是否已经实现了任何用于 Mongo 映射的 XML/JSON 工具？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T15:02:01.300

由于 MongoDB（尚未）强制执行模式，因此您需要将模式放在其他地方。由于您处理的是 JSON 数据，因此 JSON 模式可能是定义数据存储模式的好方法。

然后，您将构建 Java 和 PHP ORM 层，以便它们强制执行公共模式（在存储到数据存储之前根据模式验证内容）。

[http://json-schema.org/](http://json-schema.org/)

# c++ - C++如何检查cin输入是AZ模式

> ID：11663696
> 
> 赞同：0
> 
> 时间：2012-07-26T06:35:01.040
> 
> 标签：c++

C ++如何检查`cin`输入是`A-Z`模式

我如何检查以下内容

`cin >> input;`

和 input is `A-Z`, 表示不是 number , is `A`to `Z`;

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T06:44:28.023

假设`input`是一个字符串，您可以检查任何非大写字符，`std::find_if`以查找不适合的第一个字符。

```
#include <iostream>
#include <algorithm>
#include <cctype>
#include <string>

int main() {
  std::string input;
  std::cin >> input;
  std::cout << (std::find_if(input.begin(), input.end(), std::isupper) != input.end()) << "\n";
} 
```

如果您有 C++11，可以稍微进一步简化为：

```
std::all_of(input.begin(), input.end(), std::isupper) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T06:38:13.193

考虑输入是`string`：

```
bool flag = true;
for(int i = 0; i < input.length(); ++i) {
 if (input[i] < 'A' || input[i] > 'Z') {
  flag = false;
  break;
 }
} 
```

然后`flag`显示你想要的。如果您使用其他字符表（ASCII、Unicode 除外），则可以使用`isalpha`from `cctype`。

# java - java - 如何在java swing中将PDF文件转换为doc文件？

> ID：11663697
> 
> 赞同：1
> 
> 时间：2012-07-26T06:35:07.670
> 
> 标签：java, swing, pdftotext

如何将 pdf 文件转换为 doc 文件并在 jeditor 窗格上显示此 doc 文件。请任何人帮助我谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T06:48:19.683

我假设您想要做的是阅读 PDF，并将其内容显示为 JTextArea 中的文本。可能最简单的方法是使用[Apache 的 PDFBox](http://pdfbox.apache.org/userguide/index.html)。该[`PDFTextStripper`](http://pdfbox.apache.org/apidocs/org/apache/pdfbox/util/PDFTextStripper.html)课程应帮助您完成此任务：

```
PDDocument doc = PDDocument.load(new File("/path/to/file.pdf"));
String text = new PDFTextStripper().getText(doc);
// display in some JTextArea 
```

[您可以在教程](http://pdfbox.apache.org/userguide/text_extraction.html)中找到其他几个示例。如果格式很重要，您也可以尝试[将其转换为图像](https://stackoverflow.com/a/6223261/473637)，或使用[JMagick 之](http://www.jmagick.org/index.html)类的库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T06:48:20.883

您可以使用 itext 阅读 PDF 内容。示例在下面的链接中

[http://itextpdf.com/book/toc.php](http://itextpdf.com/book/toc.php)

但如果要求只是显示 PDF 内容，我相信您可以使用 PDFRenderer 显示 PDF 文档。

[http://www.javaworld.com/javaworld/jw-06-2008/jw-06-opensourcejava-pdf-renderer.html?page=1](http://www.javaworld.com/javaworld/jw-06-2008/jw-06-opensourcejava-pdf-renderer.html?page=1)

# c# - .Net 自定义安装程序操作与 wix 集成

> ID：11663698
> 
> 赞同：0
> 
> 时间：2012-07-26T06:35:15.060
> 
> 标签：c#, .net-4.0, wix, setup-project, custom-action

我在 vs 2010 .net 4.0 上创建了一个安装项目，用于部署我的产品。整个安装基于我在安装项目中引用的自定义安装程序操作。

现在由于某种原因，我们必须将此设置项目迁移到 WIX。

有没有办法将我以前制作的自定义安装程序操作集成到 WIX。

我在这里搜索和谷歌搜索，但没有找到这样的东西。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T06:33:04.933

只要您提到安装逻辑主要在自定义操作中，那么转移到另一个安装软件供应商的最合适的方式可能如下所示：

1.  检查当前的安装项目并列出它所做的每一个操作，例如：

    *   将文件安装到 XXX 文件夹
    *   将值写入 YYY 注册表项
    *   ZZZ方式修改配置文件
    *   等等
2.  当您准备好此列表时，请参阅您正在使用的工具集的非常基本的教程/用户指南。对于 WiX，我可以推荐[本教程](http://wix.tramontana.co.hu/tutorial)、[这本书或与](https://rads.stackoverflow.com/amzn/click/com/1849513724)[WiX 工具集](http://wixtoolset.org/)一起安装的 WiX.chm 中的一些 How To 文章。

3.  按照您在第 1 点中创建的列表，创建空项目并从头开始构建安装程序。

**重要提示**：您应该尽可能少地使用自定义操作。将这些视为最后的手段。首先，检查 WiX 或 Windows Installer（底层技术）的标准功能是否可以满足您的要求。搜索人们如何使用 Windows Installer 实现这个或那个。如果没有，请搜索现成的自定义操作——例如，WiX 工具集中的[标准自定义操作](http://wix.sourceforge.net/manual-wix3/standard_customactions.htm)，或[第三方](https://github.com/dblock/msiext)。如果你没有找到任何东西，那么你可以转向自己编写。但是即使在这种情况下[，也有一些最佳实践技术](http://robmensching.com/blog/posts/2007/9/13/Zataoca-Custom-actions-should-be-data-driven)可以使[操作更不容易出错](http://www.joyofsetup.com/2010/02/08/introducing-lux-declarative-unit-testing-for-custom-actions/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T20:18:01.010

您最好的选择是使用[dark](http://wix.sourceforge.net/manual-wix3/dark.htm)将您现有的 msi 反编译为 wxs 文件，然后将其用作新项目的基础。

```
dark.exe InputInstaller.msi OutputFile.wxs 
```

黑暗包含在 wix 安装中。

# qt - 如何抑制标题中包含的文件的警告

> ID：11663702
> 
> 赞同：6
> 
> 时间：2012-07-26T06:35:45.333
> 
> 标签：qt, gcc, qmake, suppress-warnings

`-Weffc++`我在我的 Qt 项目中使用 GCC选项。为了抑制来自 Qt 标头的警告，我添加了 `QMAKE_CXXFLAGS += -isystem $(QTDIR)\include`.
但这并不能抑制所有警告，我仍然会收到来自**Quuid**类的烦人警告，因为`$(QTDIR)\include\QtCore\quuid.h`
文件包含
`..\..\src\corelib\plugin\quuid.h`.
我试图添加
`QMAKE_CXXFLAGS += -isystem $(QTDIR)\src`
，
`QMAKE_CXXFLAGS += -isystem $(QTDIR)\src\corelib\plugin`
但它没有帮助。有没有办法来解决这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-11-28T11:05:08.197

您需要分别抑制每个目录。我的项目中的示例：

```
QMAKE_CXXFLAGS += -isystem "$$[QT_INSTALL_HEADERS]/qt5" -isystem "$$[QT_INSTALL_HEADERS]/qt5/QtWidgets" \
                  -isystem "$$[QT_INSTALL_HEADERS]/QtXml" -isystem "/usr/include/qt5/QtGui" \
                  -isystem "$$[QT_INSTALL_HEADERS]/QtCore" 
```

或者，为您启用的确切 Qt 模块自动执行上述操作：

```
for (inc, QT) {
    QMAKE_CXXFLAGS += -isystem \"$$[QT_INSTALL_HEADERS]/Qt$$system("echo $$inc | sed 's/.*/\u&/'")\"
}

# Still need this separately:
QMAKE_CXXFLAGS += -isystem "$$[QT_INSTALL_HEADERS]/qt5" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-09-04T05:45:31.030

这个线程对我帮助很大，谢谢@dismine，但在某些情况下它对我不起作用，所以我正在粘贴我的解决方案（我不想编辑第一个答案）

我已经对其进行了增强以摆脱`sed`命令，因此它是跨平台的，它使用标准 qmake 的替换功能`$$split()`、、、`$$join()`和。`$$upper()``$$take_first()`

`moduleList`需要局部变量，没有它就无法工作。

以下适用于`Qt >=5.15.2`（它当然可以在较低版本上运行，但我没有测试它）：

```
# Treat Qt's headers as system headers
QMAKE_CXXFLAGS += -isystem $$shell_quote($$[QT_INSTALL_HEADERS])

for(module, QT) {
    equals(module, "testlib") {
        QMAKE_CXXFLAGS += \
            -isystem $$shell_quote($$[QT_INSTALL_HEADERS]/QtTest)
    } else {
        # Capitalize a first letter, result: -isystem .../include/QtCore
        moduleList = $$split(module, )
        QMAKE_CXXFLAGS += \
            -isystem $$shell_quote($$[QT_INSTALL_HEADERS]/Qt$$upper(\
                     $$take_first(moduleList))$$join(moduleList, ))
    }
}
unset(moduleList) 
```

它基于当前使用的 Qt 模块动态生成正确`-isystem`的编译器标志，因此您可以将此代码包含在不同的项目/子项目中。

# java - 在 Java 中解析和检索 JSON 中的信息——JSONObject 与 JSONArray？

> ID：11663705
> 
> 赞同：1
> 
> 时间：2012-07-26T06:35:51.340
> 
> 标签：java, json

我刚刚开始搞乱一些网络编程，并试图从音乐网站的 API 中检索有关某些音乐艺术家的信息。我正在使用[此处找到的 JSON.simple 工具包。](http://code.google.com/p/json-simple/)

这是我的代码。两个类，一个是`JSONReader`：

```
import org.json.simple.*;
import org.json.simple.parser.*;

import java.net.*;
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.Reader;
import java.nio.charset.Charset;

public class JSONReader {

private static String readAll(Reader rd) throws IOException {
    StringBuilder sb = new StringBuilder();
    int cp;
    while ((cp = rd.read()) != -1) {
      sb.append((char) cp);
    }
    return sb.toString();
  }

public static JSONObject readJsonFromUrl(String url) throws IOException, ParseException {
    JSONParser parser = new JSONParser();
    InputStream is = new URL(url).openStream();
    try {
      BufferedReader rd = new BufferedReader(new InputStreamReader(is, Charset.forName("UTF-8")));
      String jsonText = readAll(rd);
      Object obj = parser.parse(jsonText);
      JSONObject result = (JSONObject) obj;
      return result;

    } finally {
      is.close();
    }
  }

} 
```

好的，这是我的`Main`课：

```
public class Main {

public static void main(String[] args) throws Exception {
    System.out.println("Starting execution of program...");
    String searchQuery = args[0];
    JSONReader reader = new JSONReader();

    System.out.println("Beginning HTTP request...");
    String baseURL = "http://api.discogs.com/database/search?q=" + searchQuery + "&type=artist";

    JSONObject json = reader.readJsonFromUrl(baseURL);
    System.out.println(json); 
```

末尾的打印语句`main`给了我这个：

```
{"results":[{"id":22898,"title":"Tool","type":"artist","resource_url":"http:\/\/api.discogs.com\/artists\/22898","uri":"\/artist\/Tool","thumb":null},{"id":5481,"title":"DJ Tool","type":"artist","resource_url":"http:\/\/api.discogs.com\/artists\/5481","uri":"\/artist\/DJ+Tool","thumb":null},{"id":186087,"title":"Tool (3)","type":"artist","resource_url":"http:\/\/api.discogs.com\/artists\/186087","uri":"\/artist\/Tool+%283%29","thumb":null},{"id":108078,"title":"Rave Tool","type":"artist","resource_url":"http:\/\/api.discogs.com\/artists\ 
```

还有大约十几位艺术家，他们都以花括号和逗号分隔。

所以我`results`通过这样做“得到”：

```
System.out.println(json.get("results")); 
```

最后得到：

```
[{"id":22898,"title":"Tool","type":"artist","resource_url":"http:\/\/api.discogs.com\/artists\/22898","uri":"\/artist\/Tool","thumb":null},{"id":5481,"title":"DJ Tool", ... ] 
```

问题是，我希望能够从搜索结果中提取所有十几位艺术家。

我将上面的内容转换`JSONArray`为如下所示，然后我可以“获取”搜索结果的索引。在这篇长文之后，我的问题是：为什么会这样？本质上`JSONObject`，如果它需要成为`JSONArray`访问结果的索引才能工作，那么首先的意义是什么？另外，是否有原因我不能将解析结果`jsonText`直接设置为 a `JSONArray`？`readJsonFromUrl`当我尝试将方法中的所有“JSONObject”更改为`JSONArrays`时，会发生错误，说它无法将 a`JSONObject`转换为`JSONArray`. 为什么是这样？

```
JSONArray json1 = (JSONArray) reader.readJsonFromUrl(baseURL).get("results");
System.out.println(json1);
System.out.println(json1.get(0)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T07:00:46.957

原因很简单，就是你的 JSON 输入数据的结构：它是一个只有一个`results`属性的 JSON 对象，它的值是一个数组，这个数组包含你真正想要的数据。

由于您有一个对象，其单个属性是包含所需数据的数组，因此您必须解析整个对象以获取数组。

这似乎是一个只有一个属性的相当微不足道的对象，但这在 JSON 响应中并不少见，实际上在任何类型的网络通信中：您真正想要的结果被包装在一个对象中，该对象有时会包含提供的附加属性与实际结果数据相关的元信息。

将此外部对象视为包含结果的*信封。*

您可以通过丢弃 read 方法中的外部对象来生成解析响应的结果 -`readJsonFromUrl`方法的结果 - 数组，但有时您可能想要保留的包含对象会更多，例如某些标头结果列表附带的数据/元信息，可能会影响您使用数据的方式。

# webserver - 拥有子域有什么好处吗

> ID：11663706
> 
> 赞同：0
> 
> 时间：2012-07-26T06:35:59.873
> 
> 标签：webserver

我想知道拥有子域有什么好处。我正在做一个有很多子域的网站。即，对于每个部分，他们都保留一个服务器。而且服务器很慢。有什么办法可以提高我网站的速度吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T06:47:31.743

什么是替代方案？我假设您正在考虑网络服务器中的子域与子目录。您可以对子域（而不是子目录）做的唯一一件事就是将它们放在您的 DNS 服务中，并为每个子域分配不同的 IP 地址以及其他 DNS 记录。从技术上讲，取决于您的网络服务器，除了 DNS 之外，您可以使用子目录完成所有可以使用子域的操作，反之亦然。这只是您的网络服务器配置的问题。

# java - 无法正确签署 jar 文件

> ID：11663710
> 
> 赞同：0
> 
> 时间：2012-07-26T06:36:03.287
> 
> 标签：java, jar, applet, signed-applet

我在 com.abc.applet 包中有 TViewerApplet.class。要签署 jar 文件，我遵循以下步骤：

1）使用cmd创建com文件夹的jar文件`jar cf Viewer.jar com`

2）使用cmd签名的jar文件

```
 jarsigner -keystore "C:\Documents and Sett
ings\compstore" -storepass abcdef -keypass abcdef
-signedjar "C:\Documents and Settings\SignedViewer
.jar" "C:\Documents and Settings\Viewer.jar" signFiles 
```

在jsp文件中添加了以下标签

`<applet name="viewerApplet" id="TViewerApplet" width="100%" height="500" code="com.abc.applet" align="baseline" codebase="." mayscript="mayscript" archive="SignedViewer.jar,cmbview81.jar"> </applet`>

但问题是我明白了

```
Caused by: java.io.IOException: open HTTP connection failed:http://10.160.120.221:8086/ICMViewer/com/abc/applet.class
    at sun.plugin2.applet.Applet2ClassLoader.getBytes(Unknown Source)
    at sun.plugin2.applet.Applet2ClassLoader.access$000(Unknown Source)
    at sun.plugin2.applet.Applet2ClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    ... 9 more
Exception: java.lang.ClassNotFoundException: com.abc.applet 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T06:41:14.300

看起来问题不在于您签署了您的小程序，而在于它是您在 html 中的小程序标签配置错误。

# html - 在 IE9 和 FF 中嵌入 pdf 层

> ID：11663712
> 
> 赞同：1
> 
> 时间：2012-07-26T06:36:20.460
> 
> 标签：html, css, pdf

我在 IE9 和 FF（Chrome 和 safari 工作）中的嵌入式 pdf 上放置图层时遇到问题。我想在图层上放置的图层位于嵌入式 PDF 后面的 IE9 和 FF 中，z-index 不适用于它。

是否有解决方法、破解、修复或任何可以解决我的问题的方法？

编辑

我尝试了以下方法：

```
<div id="pdf"><embed id="pdfEmbed" src="file.pdf" height="100%" width="100%" type="application/pdf"></embed></div> 
<div id="layer_over_pdf">some content</div> 
```

两个层都具有相对于 z-index 的位置以对层进行排序

我还尝试在嵌入的 pdf 上放置一个空的 iframe。这可行，但 IE9 中的问题是 iframe 不透明（只有嵌入 pdf 的部分不透明，但嵌入 pdf 的 iframe 部分是透明的，非常奇怪）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T08:26:54.613

我想这就是你所追求的。让我知道它是否需要调整或不是您需要的。

[http://jsfiddle.net/fRsUv/](http://jsfiddle.net/fRsUv/)

# python - Perl 字符串在命令提示符下工作，但不是来自 CGI 脚本中的 system()

> ID：11663720
> 
> 赞同：-4
> 
> 时间：2012-07-26T06:36:51.037
> 
> 标签：python, perl, cgi, mod-perl

在我的 CGI 脚本中：

```
system("/home/httpd/cgi-bin/hbplus/hbplus /home/httpd/html/pdb1wdk.ent");

print $?; 
```

系统命令将文件（例如`pdb1wdk.ent`）传递给`hbplus`. 这是一个用 C 语言编写的 exe 文件，它处理输入文件以生成输出文件。

该命令在命令提示符下完美运行，并在当前工作目录中创建一个文件，但当它从我的 CGI 脚本使用`system`.

我也尝试`hbplus`过从 Python 脚本和 shell 脚本运行并从 Perl CGI 调用它们，但这会导致分段错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T08:37:00.757

值 139 - `0x8B`-`$?`表示它由于分段违规而失败 - SIGSEGV - 并且存在核心转储。

我最好的猜测是，当您的 C 程序从 CGI 帐户运行时，它没有打开输入文件的必要权限，此外它没有正确处理打开失败，因此它继续使用无效的文件句柄.

`pdb1wdk.ent`使用类似的东西更改权限

```
chmod 744 pdb1wdk.ent 
```

看看症状是否有变化。

如果这可行，请不要忘记返回并进行更改`hbplus`，以便它正确处理文件打开异常

# c# - 在 XSD 中为 XMLIgnoreAttribute 指定属性

> ID：11663722
> 
> 赞同：2
> 
> 时间：2012-07-26T06:36:56.637
> 
> 标签：c#, xsd

如何在 XSD 中指定一个属性，以便在使用 XSD 工具生成 C# 类时，该特定属性生成为具有 XMLIgnore 属性的属性？

如何调整 XSD 或生成 C# 代码以获得类似的东西，

```
[Serializable]
public class Person {

    public string Name { get; set; }

    [XmlIgnore]
    public string NickName { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T06:39:45.453

根据定义，用于与 xsd**无关**`XmlIgnore`的事物，因此 xsd*永远不会*生成它不知道的成员。如果您需要将非 xml 相关的成员添加到 xsd 生成的类型，这就是 a 的来源，即在单独的代码文件中（指定名称 c# 命名空间）：***`partial class`***

 ***```
// additional (non-xsd) members for Person
partial class Person {
    [XmlIgnore]
    public string NickName {get;set;}
} 
```

请注意，**另一个**.cs 文件（来自 xsd）具有`.Name`等***

# android - 如何移动视图取决于android中的内容？

> ID：11663725
> 
> 赞同：0
> 
> 时间：2012-07-26T06:37:11.287
> 
> 标签：android, android-layout

我有 1 个图像视图和图像的右侧，两个不同的文本视图。第一个文本视图内容可能会增长取决于服务器文本。所以第二个文本视图应该相应地移动。在这整个 3 下我有一个文本视图占据整个宽度，它应该相应移动基于上述文本视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T07:50:35.580

[我们在自定义 listview.same 中膨胀视图，您可以创建自定义视图，其中两个 textview 在另一个之上，并通过CustomListView](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/%E2%80%8C%E2%80%8B)示例与图像右对齐。

在这里，您可以采用相对布局并将 align_below 分配给 textview2 将放置在 textview1 下。这将始终将 text2 放置在 text1 下，而不是为其提供 margintop，这将破坏屏幕尺寸的变化

# encryption - 充气城堡中的空 PGPKeyRing 或 PGPKeyRingCollection

> ID：11663728
> 
> 赞同：0
> 
> 时间：2012-07-26T06:37:29.400
> 
> 标签：encryption, bouncycastle, public-key-encryption, pgp, key-management

如何在 Bouncy Castle 中创建一个空的 PGPKeyRing 或 PGPKeyRingCollection？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T04:12:06.910

这对我有用

PGPSSecretKeyRingCollection aSecretKeyRingCollection = new PGPSecretKeyRingCollection(new ArrayList<>());

# c# - C# DateTime 解析短字符串（“MMMyy”）

> ID：11663738
> 
> 赞同：5
> 
> 时间：2012-07-26T06:38:08.433
> 
> 标签：c#, .net, parsing, c#-4.0, datetime

我有一个包含日期的字符串，格式为“MMMyy”。怎么可能做到这一点？
样本：

```
string date = "MAY09";
DateTime a = DateTime.Parse("MAY09"); //Gives "2012.05.09 00:00:00"
DateTime b = DateTime.ParseExact("MAY09", "MMMyy", null); //Gives error
DateTime c = Convert.ToDateTime("MAY09"); //Gives "2012.05.09 00:00:00"

I need "2009-05-01" 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-26T06:40:49.400

在第三个参数之前指定不变区域性，而不是`null`：

```
DateTime b = DateTime.ParseExact("MAY09", "MMMyy", CultureInfo.InvariantCulture); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T06:41:34.817

第二个是你想要的——除了使用正确的文化。`null`表示使用当前文化中的日期/时间格式信息 - 如果不是英语文化，这将失败。（从你的用户资料中不清楚你在哪里，但大概不是在英国文化中？）

指定不变的文化是获取英文月/日名称的一种简单方法：

```
using System;
using System.Globalization;

class Test
{
    static void Main()
    {
        string text = "MAY09";
        string pattern = "MMMyy";
        var culture = CultureInfo.InvariantCulture;
        DateTime value = DateTime.ParseExact(text, pattern, culture);
        Console.WriteLine(value.ToString("yyyy-MM-dd", culture));
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T06:44:35.437

您可以直接指定日期/时间格式作为 ToString 方法的参数

```
string dateTime = DateTime.Now.ToString("MMMyy"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T06:45:07.493

这应该有助于：

```
string date = "MAY09";
CultureInfo s = new CultureInfo("en-US");
DateTime b = DateTime.ParseExact(date, "MMMyy", s); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T06:48:33.027

请尝试以下代码：

```
string date = "MAY09";
CultureInfo culture = CultureInfo.GetCultureInfo("en-US");
DateTime dateTime = DateTime.ParseExact(date,"MMMyy",culture); 
```

# assembly - 比较 x86 程序集中的字符数组

> ID：11663745
> 
> 赞同：1
> 
> 时间：2012-07-26T06:38:30.267
> 
> 标签：assembly, x86

我正在尝试比较 2 个字符串以查看它们在汇编中是否相等。区分大小写。它们是从 cpp 包装器传入的。这是我到目前为止所拥有的：

我将一个字符串存储在 esi 中，另一个存储在 edi 中：

```
LOOP:
    mov al, [esi + edx*4]
    mov bl, [edi + edx*4]
    sub al, bl
    INC edx
    je LOOP
    jmp END_LOOP  ; if it's not equal, do some stuff at the end

END_LOOP: 
```

我究竟做错了什么？它如何知道我何时位于 char 数组的末尾？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T06:44:51.173

由于这些字符串是 C++ 字符串，而且我猜它们是由`char`s 而不是宽字符组成的，所以每个字符的大小都是一个字节，所以你不应该将索引寄存器乘以`edx`4。此外，你不能`edx`在*紧接*之前递增您的`je`指示，因为只有跳转是 edx 已被撞到零。

最后，字符串以 0 字节结尾。因此，您正在寻找`al`或`bl`为零以知道何时停止循环。

您可以按照以下几行修改您的代码：

```
 xor edx, edx         ; make sure edx is 0 to start with
LOOP:
    mov al, [esi + edx]
    mov bl, [edi + edx]
    inc edx              ; prepare for next char
    cmp al, bl           ; compare two current characters
    jne DIFFERENT        ; not equal, get out, you are DONE!
    cmp al, 0            ; equal so far, are you at the end?
    je SAME              ; got to end of both strings, you're good, get out
    jmp LOOP             ; okay well they agree so far, go to next char
DIFFERENT:
    ; Do what you need to do for the strings being different
    ;
    ;
    jmp DONE
SAME:
    ; Do what you need to do for the strings being the same
    ;
    ;
DONE: 
```

但是我建议只在 x86 中搜索字符串比较。有一个`cmps`指令。如果您愿意，您甚至可以安排调用该`strncmp`函数。有几种方法可以解决这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T07:18:40.740

嗯...为什么是“edx * 4”？看起来你只会比较每四个字符。“sub”设置标志与“cmp”相同。不同之处在于“sub”覆盖了 al，而“cmp”只是设置了标志，而将两个寄存器都放在一边。任何一个都应该适合你。

然后你“inc edx”。这会再次设置标志，并且您想使用标志来查看字符串是否相等！“inc”是一种“有趣”的指令，因为它设置了大多数标志，但不考虑进位标志。这对你没有帮助。“inc”需要完成，但不是在 cmp/sub 和条件跳转之间！

除非我弄错了，否则 C 将“字符串”定义为以零结尾的 char 数组，因此假设您的字符串以零结尾可能是安全的。另一种方法是将长度作为另一个参数传递。

Ray 刚刚发布了一些很好的代码，应该可以解决你的问题，所以我会停下来......

最好的，弗兰克

# java - 声明一个 js 变量，它将被我的 2 个 jsps 访问

> ID：11663746
> 
> 赞同：0
> 
> 时间：2012-07-26T06:38:33.663
> 
> 标签：java, javascript, html, jsp

我有一个要求，我必须为一个变量分配一个值，该变量应该由另一个 jsp 访问，该 jsp 将从该 jsp 调用。阐述：

我有一个 html 字段，它是一个下拉列表，其列表值始终保持不变。它的意义在于，另一个领域依赖于它。

因此，如果选择了该值，则从页面转到不同的 jsp（通过操作）。我希望下拉选择保留在下一页中。请提出任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T06:59:51.867

您可以将数据存储到一个 `JavaBean`with scope`request`中。从第一个 jsp 中，您可以创建 Bean 并设置其所有属性，这些属性对应于表单字段名称，具有类似的指令

```
<jsp:setProperty name="beanName" property="*" /> 
```

它会自动尝试设置所有（非空）请求参数。

在接收表单数据的第二个 jsp 中，您可以从 Bean 中读取您想要的属性

```
<jsp:getProperty name="beanName" property="propertyName" /> 
```

你也可以`forward`从第一个jsp到第二个，Bean仍然会为你存储数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T06:49:39.450

一种方法是在 URL 中传递选定的值，然后从`request.getParameter`另一种方式获取它以将其写入`cookie if its not security issue`. 这取决于你想要什么？有关更多会话跟踪方式，请参阅下面的帖子。

[http://www.apl.jhu.edu/~hall/java/Servlet-Tutorial/Servlet-Tutorial-Session-Tracking.html](http://www.apl.jhu.edu/~hall/java/Servlet-Tutorial/Servlet-Tutorial-Session-Tracking.html)

# iphone - 发送文档附件邮件然后它无法正确打开

> ID：11663748
> 
> 赞同：1
> 
> 时间：2012-07-26T06:38:49.307
> 
> 标签：iphone, objective-c, ios, ios5

如果我们通过获取 web 视图的 innerhtml 来创建 doc 扩展文件然后我们通过邮件将其发送到然后它在快速 office2 上提供 html 标记任何人都可以帮我解决这个问题

这是我的代码：----

-(void)sendMail { MFMailComposeViewController *mailController = [[MFMailComposeViewController alloc] init]; [mailController setSubject:@"从 Mobile Office Pro 发送文件"]; mailController.mailComposeDelegate = self;

```
NSMutableString *strDirectory = [NSMutableString string];
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
[strDirectory setString:documentsDirectory];

if ([[[Manager sharedManager] arrGlobal] count]>0) 
{
    [strDirectory appendString:[NSString stringWithFormat:@"/%@",[[[[Manager sharedManager]arrGlobal]objectAtIndex:[[[Manager sharedManager]arrGlobal] count]-1]valueForKey:@"DirPath"]]];

}

 NSArray *arrFilesToMove = [[NSArray alloc] initWithArray:arrForMoveItems];
 NSString *pathToCopyFrom = strDirectory;

NSData *myData = [NSData dataWithContentsOfFile:[NSString stringWithFormat:@"%@/%@",pathToCopyFrom,[arrFilesToMove objectAtIndex:0]]];

NSString *mimeType ;

if ([[[arrForMoveItems objectAtIndex:0] pathExtension] isEqualToString:@"csv"])
{
    mimeType = @"application/xlsx";
}
else if([[[arrForMoveItems objectAtIndex:0] pathExtension] isEqualToString:@"doc"])  
{
    mimeType = @"application/msword";
}
else if([[[arrForMoveItems objectAtIndex:0] pathExtension] isEqualToString:@"ppt"]) 
{
    mimeType = @"application/vnd.openxmlformats-officedocument.presentationml.presentation";
}
else 
{
    mimeType = @"application/pdf";
}

[mailController addAttachmentData:myData mimeType:mimeType fileName:[arrForMoveItems objectAtIndex:0]];
 NSString *emailBody = @"Please find attachment generated by Mobile Office Pro for iPhone";
[mailController setMessageBody:emailBody isHTML:NO];
[self presentModalViewController:mailController animated:YES]; 
```

}

# html - 在同一个元素上浮动和清除如何工作？

> ID：11663754
> 
> 赞同：5
> 
> 时间：2012-07-26T06:39:20.843
> 
> 标签：html, css, css-float

早些时候我正在复习我的 CSS 技能，我遇到了一个让我秃顶的教程。这是链接：[http](http://css.maxdesign.com.au/floatutorial/tutorial0304.htm) ://css.maxdesign.com.au/floatutorial/tutorial0304.htm我花了几个小时研究这个问题的答案，但没有遇到任何对我有帮助的东西。

本教程的作者没有提供任何关于元素的详细信息。我知道浮动将元素从页面上抬起并沿给定方向（左/右）浮动。清除会重置浮动元素并将其放回页面流中。

如果右侧已被清除，这些元素如何仍向右浮动？我不明白这背后的逻辑。对此的任何澄清将不胜感激*，也许我可以保留一些头发*。

**编辑：**这是CSS代码和上面链接的教程的屏幕截图......

```
.floatright {
    float: right;
    margin: 0 0 10px 10px;
    clear: right;
}

p { margin-top: 0; } 
```

![在此处输入图像描述](../Images/826bd9d6761b089f7805760f09a157a7.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T06:54:11.573

你误解了清算。`clear: right`只是意味着该元素应该*垂直清除*同一上下文中所有以前的右浮动元素，换句话说，它应该下降到所有其他右浮动元素的下方。可视化：

```
|                          |
|            +-----++-----+|
|            |  A  ||  B  ||
|            |     ||     ||
|            +-----++-----+|
|                   +-----+|
|                   |  C  ||
|                   |     ||
|                   +-----+|
|                          | 
```

所有元素都向右浮动，但`C`设置为`clear: right`，因此它低于之前的浮动元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T06:53:12.007

浮动：对；意味着元素应该向右浮动（在其父容器中向右对齐，父容器的非浮动内容在其周围流动）。如果在 HTML 中几个右浮动元素相互跟随，那么它们都将彼此相邻放置，直到父容器已满，此时出现换行符。

clear 属性指定是否允许在元素中出现浮点数。这与元素是否浮动无关。Clear：right 表示右侧不允许有浮动元素。

所以 float: right 在示例中确保图像向右浮动，文本在它们周围流动。clear: right 确保图像彼此下方而不是一行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T06:53:17.780

当您浮动元素并清除方向时，您基本上（简单来说）向文档流添加分页符。如果清除的元素后面跟着另一个浮动元素，在相同的方向上，它当然会向右浮动，但出现在第一个浮动元素的下方。

这是一个包含两组浮动元素的示例，一组带有清除，一组带有。

[http://jsfiddle.net/Kyle_Sevenoaks/detxc/](http://jsfiddle.net/Kyle_Sevenoaks/detxc/)

希望它可以帮助你:)

# google-maps - 存储位置，如何使用/输入我的位置？

> ID：11663765
> 
> 赞同：0
> 
> 时间：2012-07-26T06:39:50.957
> 
> 标签：google-maps, google-maps-api-3

我正在创建一个商店定位器。用户输入其位置的最佳方式是什么。我需要一些方法将用户输入转换为纬度和经度。

我如何从用户输入内容到将其转换为纬度和经度。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T17:27:50.977

首先，在页面加载时包含初始化代码：

```
var myOptions = {
  zoom: 13,
  mapTypeId: google.maps.MapTypeId.ROADMAP
};
var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions); 
```

使用 onclick 属性触发函数或提交表单。

然后在触发的函数中将其放入（注意：这使用 jQuery）：

```
var address = $('#name_of_input_box').val(); 
```

然后使用 Google Geocoder API 对文本框中的地址进行地理编码：

```
var geocoder = new google.maps.Geocoder();
geocoder.geocode( { 'address': address}, function (result, status) {
  cur_lng = result[0].geometry.location.lng();
  cur_lat = result[0].geometry.location.lat();
  var location = new google.maps.LatLng(cur_lat, cur_lng);
});

map.setCenter(location); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T09:28:38.227

您需要使用地理编码器。请参阅下面的链接

使用 API V3 [https://developers.google.com/maps/documentation/javascript/reference#Geocoder](https://developers.google.com/maps/documentation/javascript/reference#Geocoder)

使用网络服务 [https://developers.google.com/maps/documentation/geocoding/index](https://developers.google.com/maps/documentation/geocoding/index)

如果您需要这方面的帮助，请再次询问

问候卡迪尔

# java - 开始使用 Java EE

> ID：11663766
> 
> 赞同：-1
> 
> 时间：2012-07-26T06:40:05.750
> 
> 标签：java, jakarta-ee

我会开始将 Java EE 用于工作目的，但我真的不知道从哪里开始使用如此庞大的这项技术。我最初可以尝试什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T06:43:10.947

从 java`Servlet`和`JSP's`示例开始，并将其部署在[Tomcat](http://tomcat.apache.org/)中。

[http://www.apl.jhu.edu/~hall/java/Servlet-Tutorial/](http://www.apl.jhu.edu/~hall/java/Servlet-Tutorial/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T06:48:46.383

我实际上不会从 jsp 和 servlet 开始，而是从 j2se 以及如何用 java 编程开始。如果你觉得这样做很舒服，那么你可以看得更远。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T06:41:46.763

JSP 和 Servlet。设置服务器（可能是 tomcat）并尝试学习 JSP 和 Servlet

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T06:50:41.260

你在核心java方面有多好？如果你真的精通核心 java，你可以通过参考下面提到的 servlet 和 JSP 链接来启动 Java EE

```
http://www.tutorialspoint.com/servlets/index.htm
http://www.tutorialspoint.com/jsp/index.htm
http://docs.oracle.com/javaee/5/api/ 
```

# gcc - gcc 和使用 CFLAGS 链接文件

> ID：11663770
> 
> 赞同：1
> 
> 时间：2012-07-26T06:40:30.723
> 
> 标签：gcc, makefile

我正在尝试从 Learn C Hard Way 书中运行程序

我需要将库文件名“build/liblcthw.a”作为最后一个参数传递。

例如：

在 Ubuntu 上不起作用：

gcc -g -O2 -Wall -Wextra -Isrc -rdynamic -DNDEBUG build/liblcthw.a 测试/list_tests.c -o 测试/list_tests

在 Ubuntu 上工作：

gcc -g -O2 -Wall -Wextra -Isrc -rdynamic -DNDEBUG 测试/list_tests.c -o 测试/list_tests build/liblcthw.a

我如何在 Makefile 中处理这个？CFLAGS 只会在源文件名之前添加它，它不起作用。如何强制 CFALGS 在命令末尾添加库文件名？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T06:50:33.417

CFLAGS 是 C 编译器的标志。库通常进入一个名为 LDLIBS 的变量。设置 LDLIBS=build/liblcthw.a 看看是否可行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T08:40:24.383

第一次调用没有成功，因为命令行中源和库的顺序错误。正确的顺序是源文件，然后是目标文件，然后是静态库，然后是动态库。

# php - 为什么 $_GET 值与 URL 不同

> ID：11663773
> 
> 赞同：1
> 
> 时间：2012-07-26T06:40:44.423
> 
> 标签：php, get

我有一个这样的网址

```
http://example.com/folder/component/mycom/?insid=7&amp;test=685286640293e700bc9440cafb587290 
```

我需要获得`test`. 当我回显`$_GET['test']`它返回`685286640293e700bc9440cafb587290?url=component/mycom/`。url的最后一个变量正在发生这种情况。我不知道为什么会这样？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T06:42:31.883

`Test`不是在`$_GET`您显示的中发送吗？

您有 :`insid=7`并且它们之间`token=685286640293e700bc9440cafb587290`的格式不正确`&`，即 & 而不是 & 本身的 HTML 代码。

你现在的网址是这样的：

```
http://example.com/folder/component/mycom/?insid=7&amp;test=685286640293e700bc9440cafb587290 
```

如果您将其更改为

```
http://example.com/folder/component/mycom/?insid=7&test=685286640293e700bc9440cafb587290 
```

我愿意打赌你会让你的代码工作:)

# java - 带有标准 api 的子查询和别名

> ID：11663780
> 
> 赞同：3
> 
> 时间：2012-07-26T06:41:07.033
> 
> 标签：java, oracle, hibernate, subquery, criteria

我的问题很简单：我有这个查询：

```
 SELECT * FROM TABLE t WHERE 
    (SELECT count(*) FROM TABLE tbis WHERE  TRUNC(t.date) = TRUNC(tbis.date))>1 ; 
```

字段日期是时间戳。

如何使用标准 API 做到这一点？

我有这样的东西（trunc() 对我的数据库服务器有效，sql 请求有效。）：

```
Criteria crit = session.createCriteria(Myclass.class, "t");
crit.createAlias("t.date", "dateT");

DetachedCriteria subcrit = DetachedCriteria.forclass(MyClass.class, "tbis");
subcrit.createAlias("tbis.date", "dateTbis");

subcrit.add(Restrictions.sqlRestriction("TRUNC(dateT) = TRUNC(dateTbis)"));

subcrit.setProjection(Projections.count("id"));

crit .add(Subqueries.gt(1, subcrit));
return crit.list(); 
```

不知何故，在日志中，我得到： org.hibernate.QueryException: not an association: date

我尝试了各种方法，但无法让它工作......

我试过了：

```
Criteria crit = session.createCriteria(Myclass.class, "t");

DetachedCriteria subcrit = DetachedCriteria.forclass(MyClass.class, "tbis");

subcrit.add(Restrictions.sqlRestriction("TRUNC(t.date) = TRUNC(tbis.date)"));

subcrit.setProjection(Projections.count("id"));

crit .add(Subqueries.gt(1, subcrit));

return crit.list(); 
```

生成的 SQL 条件为：

```
TRUNC(t.date) = TRUNC(tbis.date)) 
```

与日志：

```
18:34:04,461 WARN  [JDBCExceptionReporter] SQL Error: 904, SQLState: 42000
18:34:04,461 ERROR [JDBCExceptionReporter] ORA-00904: "T"."DATE": invalid identifier

18:34:04,461 WARN  [CriteriaAdapter] list exception: 
org.hibernate.exception.SQLGrammarException: could not execute query 
```

还

```
Criteria crit = session.createCriteria(Myclass.class, "t");

DetachedCriteria subcrit = DetachedCriteria.forclass(MyClass.class, "tbis");

subcrit.add(Restrictions.sqlRestriction("TRUNC({t}.date) = TRUNC({tbis}.date)"));

subcrit.setProjection(Projections.count("id"));

crit .add(Subqueries.gt(1, subcrit));

return crit.list(); 
```

条件变为：

```
TRUNC({t}.date) = TRUNC({tbis}.date)) 
```

和日志：

```
18:36:28,206 WARN  [TxConnectionManager] Connection error occured: org.jboss.resource.connectionmanager.TxConnectionManager$TxConnectionEventListener@1b3febd3[state=NORMAL mc=org.jboss.resource.adapter.jdbc.xa.XAManagedConnection@4cb16baf handles=1 lastUse=1343284588160 permit=true trackByTx=true mcp=org.jboss.resource.connectionmanager.JBossManagedConnectionPool$OnePool@7f16f514 context=org.jboss.resource.connectionmanager.InternalManagedConnectionPool@3c34353b xaResource=org.jboss.resource.adapter.jdbc.xa.XAManagedConnection@4cb16baf txSync=null]
java.lang.NullPointerException
at oracle.jdbc.driver.T4C8Oall.getNumRows(T4C8Oall.java:1153)
[...]
at org.hibernate.jdbc.AbstractBatcher.getResultSet(AbstractBatcher.java:208) 
```

甚至：

```
Criteria crit = session.createCriteria(Myclass.class, "t");

DetachedCriteria subcrit = DetachedCriteria.forclass(MyClass.class, "tbis");

subcrit.add(Restrictions.sqlRestriction("TRUNC({t.date}) = TRUNC({tbis.date})"));

subcrit.setProjection(Projections.count("id"));

crit .add(Subqueries.gt(1, subcrit));

return crit.list(); 
```

与之前的结果相同。

我认为标准无法检测到子查询的别名...但是我必须访问该值，有什么解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-20T08:36:35.490

首先，如果您不应该将 { } 仅放在 sqlRestriction 中的别名周围，您可以尝试：

```
subcrit.add(Restrictions.sqlRestriction("TRUNC({t}.date) = TRUNC({tbis}.date)")); 
```

如果您不想比较部分日期字段（如日期），但想查看整个日期字段是否相等，您可以让 Hibernate 像这样进行比较：

```
Restrictions.eq(t.date, tbis.date) 
```

如果您想比较日期字段的一部分，我建议您参考[这个问题。](https://stackoverflow.com/questions/101541/compare-time-part-of-datetime-field-in-hibernate)

# ios - 在片段着色器中计算纹理坐标 (iOS/OpenGL ES 2.0)

> ID：11663785
> 
> 赞同：2
> 
> 时间：2012-07-26T06:41:37.917
> 
> 标签：ios, opengl-es

我发现在我的片段着色器中，这两个语句给出了相同的输出：

```
// #1
// pos is set from gl_Position in vertex shader   
highp vec2 texc = ((pos.xy / pos.w) + 1.0) / 2.0; 

// #2 - equivalent?
highp vec2 texc2 = gl_FragCoord.xy/uWinDims.xy; 
```

如果这是正确的，你能解释一下数学吗？我理解#2，这是我想出的，但在一篇论文中看到了#1。这是 NDC（标准化设备坐标）计算吗？

上下文是我正在使用与视口大小相同的 FBO 纹理坐标。一切正常，但我想了解数学。

顶点着色器的相关部分：

```
attribute vec4 position;
uniform mat4 modelViewProjectionMatrix;
varying lowp vec4 vColor;
// transformed position
varying highp vec4 pos;

void main()
{
    gl_Position = modelViewProjectionMatrix * position;

    // for fragment shader
    pos = gl_Position;
    vColor = aColor;
} 
```

片段着色器的相关部分：

```
// transformed position - from vsh
varying highp vec4 pos;
// viewport dimensions
uniform highp vec2 uWinDims;

void main()
{
    highp vec2 texc = ((pos.xy / pos.w) + 1.0) / 2.0; 

    // equivalent?
    highp vec2 texc2 = gl_FragCoord.xy/uWinDims.xy;

...

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T07:33:16.350

`(pos.xy / pos.w)`是标准化设备坐标 (NDC) 中的坐标值。该值在每个维度中的范围为 -1 到 1。

`(NDC + 1.0)/2.0`将范围从 更改`(-1 to 1)`为`(0 to 1)`（屏幕左侧为 0，右侧为 1，与顶部/底部类似）。

或者，gl_FragCoord 以像素为单位给出坐标，因此它的范围为`(0 to width)`和`(0 to height)`。

将此值除以宽度和高度 (uWinDims)，再次给出从屏幕左侧的 0 到右侧的 1 的位置。

所以是的，它们似乎是等价的。

# c# - 常量和非常量函数重载

> ID：11663786
> 
> 赞同：4
> 
> 时间：2012-07-26T06:41:39.403
> 
> 标签：c#, java, constants, overloading

我们在 C++ 中有`const`和非`const`函数重载，如此处所述[，](https://stackoverflow.com/questions/251159/what-is-the-use-of-const-overloading-in-c)并在 STL 迭代器中使用。

我们在 Java 和 C# 中有这样的方法重载吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T06:43:48.967

Java 和 C# 没有 const 函数的概念，因此 const/non-const 重载的概念并不真正适用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T07:02:25.313

不幸的是，C# 不支持 const 方法或 const 参数。C# 2.0 中有一个新特性在类似的场景中有所帮助。在 C#2.0 中，属性的 get 和 set 访问器可以具有不同的可访问性。因此，您可以将 get 访问器设为 public 并按如下方式保护 set

```
class MyClass

{

int _val;

    public int Val
   {
         protected set { _val = value; }

         get { return _val; }

   }

} 
```

# android - 用于创建丰富/复杂界面的书籍、教程或资源 (android)

> ID：11663788
> 
> 赞同：2
> 
> 时间：2012-07-26T06:41:40.763
> 
> 标签：android

标题差不多。我是android开发的新手。所以，我对开发丰富的应用程序很感兴趣，但找不到好的教程。如果有人指导我一些入门资源，我将不胜感激。

也许有一些开源项目可以找到有用的信息？

谢谢

UPD1 是否有一些从头到尾的指南，解释了如何制作这样的 twitter 应用程序？还是任何其他类型的复杂且从头到尾描述的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T06:43:14.490

我建议从这里开始。Google 用户界面指南。它解释了用于创建 UI 元素的不同 API，还介绍了有关图标、菜单、字体等的优缺点。

[http://developer.android.com/design/index.html](http://developer.android.com/design/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-18T07:46:16.810

[http://appinventor.mit.edu/explore/sites/teach.appinventor.mit.edu/files/MIT%20App%20Inventor%20Development%20Overview_0.pdf](http://appinventor.mit.edu/explore/sites/teach.appinventor.mit.edu/files/MIT%20App%20Inventor%20Development%20Overview_0.pdf)

[http://cs.usfca.edu/~wolber/appinventor/bookSplits/ch4NoTexting.pdf](http://cs.usfca.edu/~wolber/appinventor/bookSplits/ch4NoTexting.pdf)

这些是我发现对复杂的 android 应用程序开发非常有用的一些链接。

# android - 将 ICS 中的视频编辑器用于我的 android 应用程序

> ID：11663798
> 
> 赞同：1
> 
> 时间：2012-07-26T06:42:14.033
> 
> 标签：android, video, android-intent, trim, video-editing

我需要在上传之前修剪视频。我试图（徒劳地）想出某种方法来使用内置的 ICS 视频编辑器。看起来相同的类不能作为 sdk 的一部分使用。我不知道是否有任何方法可以通过某些 Intent 打开编辑器来达到​​我的目的。如果我能得到一些帮助，为我指明正确的方向，那就太好了。

# php - 仅提供已登录用户删除选项

> ID：11663800
> 
> 赞同：0
> 
> 时间：2012-07-26T06:42:28.307
> 
> 标签：php, mysql

我正在编写一个脚本，允许用户创建团队、向其他已注册的人发送合同等等。我希望登录的用户能够退出团队。html 表是使用 php 从 mysql 动态填充的。我可以让它将我的删除选项应用于其中的所有用户，`<td></td>`但不仅仅是登录的用户。这里有一些代码片段，希望能有所帮助。基本上我只希望登录的用户有删除选项。

```
 Id   Player
    1    User 1 - No Delete Option
    2    User 2 - Delete Option (Is the logged in user)
    3    User 3 - No Delete Option

    session_start();
    $get_users_name = $_SESSION['username_u'];

    $sql = ("SELECT id, username FROM user WHERE username='$get_users_name'");
    $result = mysql_query($sql) or die(mysql_error());

    while ($row = mysql_fetch_array($result)) {
    $grab_id = $row['id'];
    $grab_user = $row['username'];

//the rest of the table generation done here such as <tr> etc

    echo "<td>";
    if ($grab_user == $get_users_name) { 
    echo '<a href="user_delete.php?id='.$grab_id.'" onClick="return confirm(\'Are you sure you want to withdrawl from the team?\')">'.$grab_user.'</a>';
    } 
    else
    { 
    echo $grab_user;
    }
    echo "</td>";

//the rest of the table generation done here such as </tr> etc

} 
```

**编辑以修复@easteregg 捕获的回声问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T06:57:44.617

只要确保您将代码样式设置为可读性，然后您会注意到您的`if`条件在`echo`;)

试试这个它应该工作！

```
echo "<td>";

if ($grab_user == $get_users_name)  {
    echo '<a href="user_delete.php?id='.$grab_id.'" onClick="return confirm(\'Are you sure you want to withdrawl from the team?\')">'.$grab_user.'</a>';
} else {
    echo $grab_user;
}

echo "</td>"; 
```

请注意，如果用户有权删除某些内容，您应该再次检查 user_delete.php，否则您会遇到一些奇怪的麻烦；）

# jquery - 如何使用jquery quickselect js中的键搜索单词？

> ID：11663802
> 
> 赞同：0
> 
> 时间：2012-07-26T06:42:37.453
> 
> 标签：jquery, quickselect.js

Hai 正在使用 jquery quickselect js 从[quickselect](https://github.com/dcparker/jquery_plugins/tree/master/quickselect/)搜索 它的工作正常，但知道我需要添加关键字搜索。**例如**，我有一个苹果的关键字是“Healthyfruit”。当我输入healthyfruit 时，苹果会来……我想这样展示。如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T10:52:12.430

按照此链接[jQueryUI Autocomplete - 如何将搜索词与关键字列表匹配并显示匹配的结果？](https://stackoverflow.com/questions/9040137/jqueryui-autocomplete-how-to-match-search-words-with-a-list-of-keywords-and-sh/9043814#9043814).这可能对你有帮助。这是 jquery 自动完成搜索。

# c# - 检索 dll 中使用的 sqlconnection.open 类

> ID：11663803
> 
> 赞同：0
> 
> 时间：2012-07-26T06:42:41.353
> 
> 标签：c#, .net, dll

让我们考虑一下我在一个文件夹中有一堆 dll [10-15]。

现在我需要搜索并找到`connection.open`该 dll 中使用的所有方法和位置。根据我的研究，它可以通过反射来完成。所以给我一些想法，这将有助于我继续。等待您的宝贵命令

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T09:15:30.803

```
public class GlobalInfo
{
    public static string ConnectionString { get; set; }

    //Method to use ti update your connectionString
    public static void UpdateConnectionString(string databaseName)
    {
        ConnectionString = "Build your connection string";
    }
}

public class MyController()
{
    //Method using your connection string
    public void MyMethod()
    {
        using(var connection = new SqlConnection(GlobalInfo.ConnectionString))
        {
            connection.Open();
            //The rest of your code
        }
    }
} 
```

因此，您只需要使用`UpdateConnectionString()`方法更新您的 connectionString，而无需进行任何反射。

**注意**：在我的示例中，我使用了`SqlConnection`.

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T10:39:27.527

根据评论和回复，您需要的是国际奥委会。由于您没有 Web 应用程序的源代码，除非原始代码使用 IOC，否则将很难。

我不明白的是，如果您应该维护/增强某些现有代码库，则需要访问实际代码。我想你需要和你的老板谈谈并获得访问权限。

您也可以尝试在程序中将 dll 作为字符串读取，但这将涉及使用 ILSpy、Reflector 等工具可以轻松完成的工作。

# xml - 如何向 usps 测试服务器发送测试请求以访问 ZipCodeLookup API？

> ID：11663805
> 
> 赞同：4
> 
> 时间：2012-07-26T06:42:47.463
> 
> 标签：xml, request, coldfusion-8

我已在**usps.com/webtools**上注册并获取用户名/密码。
当我向 usps 测试服务器发送测试请求时，我收到错误“**获取 USERID 属性**时出错”

`http://testing.shippingapis.com/ShippingAPITest.dll?API=[API_Name]&XML=[XML_String_containing_User_ID]"`

我正在发送这样的请求（在这种情况下，用户 ID 是虚拟的） 如何使用 xml 用户 ID 发送测试请求？
`[http://testing.shippingapis.com/ShippingAPITest.dll?API=ZipCodeLookup&XML=](http://testing.shippingapis.com/ShippingAPITest.dll?API=ZipCodeLookup&XML=)`<userid>`018BITOC5420`</userid>``

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-26T13:22:39.830

尝试这个：

```
http://production.shippingapis.com/ShippingAPITest.dll?API=ZipCodeLookup&XML=<ZipCodeLookupRequest USERID="xxxxxxx"><Address ID="0"><Address1></Address1><Address2>6406 Ivy Lane</Address2><City>Greenbelt</City><State>MD</State></Address></ZipCodeLookupRequest> 
```

来源：[https ://www.usps.com/business/web-tools-apis/address-information-v3-1d.htm](https://www.usps.com/business/web-tools-apis/address-information-v3-1d.htm)

# android - 无法将 UI 元素拖到 Android 布局 Eclipse

> ID：11663808
> 
> 赞同：2
> 
> 时间：2012-07-26T06:43:11.260
> 
> 标签：android, eclipse, layout, drag-and-drop

我无法让 Eclipse 4.2 与最新的 Android SDK 一起工作。当我尝试将任何 UI 元素从调色板拖到 XML 的图形布局或大纲视图上时，什么都没有发生。当我尝试在相对布局中拖动现有元素时也是如此。我可以使用 XML 进行布局，但不能使用设计器。

我也无法使用 x 图标关闭选项卡，我必须右键单击然后关闭。

我试过使用 Eclipse 3.7，同样的问题。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T10:36:20.673

模拟器可能正在运行。尝试关闭模拟器并拖动......它应该可以工作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T15:32:13.750

检查您的 XML 中显示为黄色小感叹号的警告，如下所示：

![无效的 xml 标签示例](../Images/7905b04f295d0de7ab0833e140e2715e.png)

尽管我的代码运行良好，但这可以防止任何拖放。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T07:52:26.010

您好，我假设在您的`XML`文件中，您看不到`graphical layout`. 当我从工作区导入项目时，我也遇到了同样的问题，那时只需关闭项目并再次打开项目。它对我有用。

有关更多信息，请参阅此[链接](http://www.technotalkative.com/android-in-eclipse-graphical-layout-tab-does-not-appear-for-my-layout-files/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-12T17:47:20.413

尝试清理项目并再次运行它。这对我有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-23T06:06:29.070

终于通过重新下载eclipse解决了

# mysql - 将数据从 mysql 加载到 sql 商业智能 2008

> ID：11663812
> 
> 赞同：1
> 
> 时间：2012-07-26T06:43:20.697
> 
> 标签：mysql, sql-server-2008, datasource, business-intelligence

我使用商业智能 2008，我可以毫无问题地连接到我的 mysql 数据库。我想创建数据源视图。我可以看到我所有的表格，但是当我包含我的表格时，它向我显示了这个错误：

> > ====================================
> 
> ERROR [42000] [MySQL][ODBC 5.1 Driver][mysqld-5.1.41]您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 2 行 (myodbc5.dll) 的 '[].[adrankingoogle]' 附近使用正确的语法
> 
> ------------------------------ 节目地点：
> 
> 在 System.Data.Odbc.OdbcConnection.HandleError(OdbcHandle hrHandle, RetCode retcode) 在 System.Data.Odbc.OdbcDataReader.get_FieldCount() 在 System.Data.Odbc.OdbcDataReader.NewSchemaTable() 在 System.Data.Odbc.OdbcDataReader。 Microsoft.AnalysisServices.Design.DSVUtilities.AddTableItemsInDataSet(DataSourceView dsv, DataSourceConnection conn, ArrayList tableList, String tableType, Hashtable) Microsoft.DataWarehouse.Design.DataSourceConnection.FillDataSet(DataSet dataSet, String schemaName, String tableName, String tableType) GetSchemaTable() Microsoft.AnalysisServices.Design.DSVUtilities.ExportDataSet（DataSourceView dsv，DataSourceConnection conn，ArrayList tableList，ArrayList viewList，Microsoft.AnalysisServices.Wizards.DSVWizardForm.OnFinish(CancelEventArgs e) 上的 ArrayList sysTableList、ArrayList sysViewList、IServiceProvider serviceProvider、ProgressBar progressBar)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T06:46:47.670

之前有人问过问题：

获取 MySQL (6.3.5) .net 连接器（来自 MY SQL） 编辑连接字符串（在设计器中粘贴连接字符串），使其具有新的“SQL SERVER MODE=True”选项。

显然它会影响性能 - 但你能做什么

我的示例连接字符串...（省略密码和用户标识）

server=svr215;User Id=;password=;Persist Security Info=True;database=dw;sql server mode=true

[如何在 Microsoft SQL Server Analysis Services 中使用 MySQL 作为数据源？](https://stackoverflow.com/questions/2779976/using-mysql-as-data-source-in-microsoft-sql-server-analysis-services)

# loops - 检查无限的while循环。我正在使用布尔变量

> ID：11663815
> 
> 赞同：-1
> 
> 时间：2012-07-26T06:43:35.987
> 
> 标签：loops, while-loop, boolean, using, infinite

我正在使用以下代码：

```
boolean continueProcessing = true;  
boolean lastRecord = false;     
while (continueProcessing)  //can it be changed to while (continueProcessing == true), what's the advantage  

{  
if(refListItemItr.hasNext() || lastRecord)  
{  
continueProcessing = true;  
lastRecord = false;  
}  
else  
{  
continueProcessing = false;  
}  

if(continueProcessing)  
{  
lSynonymListType = objFactory.createSynonymListType();  
}  
} 
```

我怀疑存在无限循环的情况。我应该如何确认它不会发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T07:29:45.103

The reason this will cause an infinite loop is that you keep checking if the next item exists, but you never actually call next() to retrieve it, so the internal pointer doesn't move along and you're just checking if there's a first item in the list.

Regardless, you're overcomplicating this. You should just be doing

```
while (refListItemItr.hasNext()){
  Object item = refListItemItr.next(); // change Object to the item's type
  // Presumably actually do something with the item here, which currently you're not...
} 
```

Or, even more simply

```
for (Object o : refListItemItr){
  // do stuff
} 
```

And in answer to your other question, there is absolutely no difference between `while(continueProcessing)` and `while (continueProcessing == true)`

# asp.net - 在控制器构造函数问题中初始化的应用程序变量

> ID：11663816
> 
> 赞同：0
> 
> 时间：2012-07-26T06:43:40.363
> 
> 标签：asp.net, asp.net-mvc

使用 ASP.NET MVC3。

我要做的是使用应用程序状态变量初始化控制器字段/属性。

即在我的 Application_Start() 方法中

```
Application["stats"] = new Stats(); //this is fine 
```

通过控制器方法访问它，例如

```
public ActionResult Index()
{
  return View(HttpContext.Application["stats"]); //this is also fine
} 
```

工作也很好。

```
//blows up with a 'Object reference not set to an object' error.
private Stats stats;
public HomeController()
{
    stats= (Stats)(HttpContext.Application["stats"]);
} 
```

谁能解释我无法理解的内容+如何解决问题？如果有更好的方法，请告诉我（以防万一您想知道，我不是要加载应用程序配置或任何东西；只是为了保持网站状态的实时统计信息）

提前致谢

-马尔辛

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T07:17:45.373

`HttpContext`尚未在控制器构造函数中初始化并且为空。

如果您需要访问任何与 HttpContext 相关的内容，最多可以在[Initialize](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.initialize.aspx)方法中尽早完成：

```
public class HomeController: Controller
{
    private Stats stats;

    protected override void Initialize(RequestContext requestContext)
    {
        base.Initialize(requestContext);
        stats = (Stats)(HttpContext.Application["stats"]);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T07:28:05.790

您问题中的 HttpContext 是控制器上的属性，正如达林所说，它尚未初始化。但是，您可以使用它：

```
private Stats stats;
public HomeController()
{
    stats= (Stats)(System.Web.HttpContext.Current.Application["stats"]);
} 
```

# php - 需要对来自mysql数据的php数组的帮助进行总结

> ID：11663817
> 
> 赞同：0
> 
> 时间：2012-07-26T06:43:44.297
> 
> 标签：php, mysql, arrays

从 MySQL 表中提取数据，数据如下所示：

```
Acct #          Acct Name                  Item     Date Sold            Qty Sold 
10293           Company A               Canon JX200 2012-06-24                1
11042           Company B               Canon JX200 2012-06-05                2
12560           Company D               Canon L90   2012-04-20                1
12560           Company D               Canon L90   2012-05-07                1
14160           Company D               Canon L90   2012-05-22                2
14168           Company C               Canon L90   2012-04-20                6 
```

我想要如下所示的输出：

```
Acct #  Acct Name   Item          Mo 1  Mo 2    Mo 3    Mo 4    Mo 5    Mo 6    Tot
10293   Company A   Canon JX200                                           1       1
11042   Company B   Canon JX200                                           2       2
12560   Company C   Canon L90                             6                       6
12560   Company D   Canon L90                             1       3               4 
```

大学里的 Aced 2 线性代数课程和 php 数组让我难过。需要将我的数据放入数组，排序和汇总。最大的问题（我认为）是构建数组的代码。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T07:45:35.937

尝试通过 addinf ORDER BY *Acct Name*对 MySQL 查询中的数据进行排序。当您收到数据时，此代码应该会有所帮助：

```
$data = array();
foreach ($rows as $row) {
preg_match('/^\d{4}\-(\d{2})\-/', $row['DateSold'], $match);
  $data[] = array(
   'Acct' => $row['Acct'],
   'AcctName' => $row['AcctName'],
   'Item' => $row['Item'],
   'Mo ' . $match[1] => $row['QtySold']
  );

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T07:13:02.130

为此，您可以使用数据透视表。[http://en.wikibooks.org/wiki/MySQL/Pivot_table](http://en.wikibooks.org/wiki/MySQL/Pivot_table)

# javascript - 查找页面空闲时间的脚本

> ID：11663829
> 
> 赞同：1
> 
> 时间：2012-07-26T06:44:20.540
> 
> 标签：javascript, jquery, ajax, jsp, jquery-mobile

如果用户没有在页面上执行任何任务，即页面处于空闲状态，是否有任何方法可以捕获页面空闲或没有对其进行任何操作的时间。我在我的项目中使用 JSP、struts1、JQM、JS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T06:53:26.633

空闲时间实现使用：

1.  [小唯](http://www.nczonline.net/blog/2009/06/02/detecting-if-the-user-is-idle-with-javascript-and-yui-3/)
2.  [jQuery](http://paulirish.com/2009/jquery-idletimer-plugin/)
3.  或使用以下脚本：

    ```
    <script type="text/javascript">
    idleTime = 0;

    $(document).ready(function () {
        //Increment the idle time counter every minute.
        var idleInterval = setInterval("timerIncrement()", 60000); // 1 minute

        //Zero the idle timer on mouse movement.
        $(this).mousemove(function (e) {
            idleTime = 0;
        });

        $(this).keypress(function (e) {
            idleTime = 0;
        });
    })

    function timerIncrement() {
        idleTime = idleTime + 1;

        if (idleTime > 19) { // 20 minutes
            window.location.reload();
        }
    }
    </script> 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T06:49:13.973

您可以使用 body-tag 的 Triggers onclick、[onmousemove](http://www.w3schools.com/jsref/event_onmousemove.asp)和[onkeypress](http://www.w3schools.com/jsref/event_onkeypress.asp)来获取当前用户操作。在其中一个触发后，您可以设置时间戳并通过 setTimeout() 或 setIntervall() 查询空闲时间。您获取当前时间戳并从最后一个操作中减去时间戳。

# java - 将方法添加到android中的现有类

> ID：11663832
> 
> 赞同：6
> 
> 时间：2012-07-26T06:44:28.197
> 
> 标签：java, android, design-patterns

我正在寻找一种将一些方法添加到现有类中的方法，如下所示：

```
String s = "";
s.doSomething(); 
```

在目标 C 中，我可以使用[类别](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/chapters/occategories.html)来执行此操作。

```
@interface NSString( Stuff)
-(void)doSomething();
@end 
```

android有这样的东西吗？还是另一个黑客？

**更新**：实际上，我遇到了这个问题：我使用了 jar 文件中的一个类（不是最终的）（所以，我不能触及它的源代码）。然后我想在不使用继承的情况下将方法（或类似的东西）添加到这个类中。例如：

```
 public class Provider{
       // many methods and fields go here...
       public String getName(){}
 } 
```

我想做的就是：

```
 provider.print(); //that call getName() method; 
```

我也尝试了[代理模式](http://en.wikipedia.org/wiki/Proxy_pattern)，它有效，但我不喜欢这种方式（*因为*它像一个包装类，我必须存储一个具有许多字段和方法的对象才能*仅使用一种*方法）：

```
 public class ProxyProvider{
       Provider provider;
       public ProxyProvider(Provider provider){
           this.provider = provider;
       }
       public void print(){
           String name = provider.getName();
           //do something
       }
 } 
```

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T12:08:08.713

您可以使用静态方法创建实用程序类：

```
public final class ProviderUtils {

    private ProviderUtils() {} // not instantiable, it is a utility class

    public static void print(Provider provider) {
        String name = provider.getName();
        // print the name
    }
} 
```

在您的代码中，您可以调用它：

```
Provider p = new Provider(...);
ProviderUtils.print(p); 
```

如果该类只有一个`print`方法，您可以调用它`ProviderPrinter`而不是`ProviderUtils`.

最后，您没有成千上万的可能性-您可以：

*   在子类中扩展类和你需要的任何方法=>你说你不想要那个
*   修改类的源代码，重新编译自己版本的jar
*   将类包装在添加您需要的方法的包装器中（您的 ProxyProvider 示例）
*   将您需要的方法放在静态实用程序类中（我在上面提出的）
*   在运行时修改类并添加一个方法，但这[是一条复杂的路径](https://stackoverflow.com/questions/6680674/can-a-java-class-add-a-method-to-itself-at-runtime)，因为您需要使用类加载器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T07:04:19.870

然而，这是不可能的，有一个类似于 DSL 的 Java 可用，称为 Xtend，它可以用作 JAVA 的引人注目的替代品，它可能正在寻找支持这样的扩展方法的工作。

[http://www.eclipse.org/xtend/](http://www.eclipse.org/xtend/)

免责声明：我与此无关，我只是用于创建名为 xtext 的 xtend 的核心技术的狂热用户。我考虑过在 Android 项目上使用 xtend

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T06:52:21.937

在 Java 中，可以使用常规继承来扩展一个类，除非它 `final`. `String`是`final`，因为字符串是不可变的，因此有意保护其免受子类化。

此外，在许多情况下，通过子类化添加行为被认为是不好的做法 - 耦合太强了，并且对于您将要创建的对象的实例一直存在。经验法则是“优先组合胜过继承”。

话虽如此，有很多方法/模式可以解决您的特殊问题。[装饰器](http://en.wikipedia.org/wiki/Decorator_pattern)可能是您正在寻找的模式。

请更新您的问题或发布一个包含更多信息的新问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-29T04:37:51.337

尝试扩展有问题的类并将您的方法添加到其中。如果这不能完成（就像有人说的那样，String 是最终的），那么只需用你想要的方法和你想要扩展的对象在它周围编写一个包装器。

像

```
 public class MyString
 {
    private String internal;

    //your methods
 } 
```

尝试进一步阐述您的问题，以便我可以给出更好的答案。就像有问题的真实对象是什么以及你真正想做的事情，如果你可以透露的话。

# iphone - iOS 表格单元格仅返回匹配数据的最后一行

> ID：11663837
> 
> 赞同：0
> 
> 时间：2012-07-26T06:44:38.040
> 
> 标签：iphone, ios, dynamic, uitableview

我正在尝试将数据插入到我创建的行中，但它只插入数据的最后一行。任何人都可以提出一种避免此错误的方法吗？对于`cellForRowAtIndexPath`我的代码是：

```
NSInteger counter = [myArray count];
if (myArray.count > 0){

    for (int i = indexPath.section; i<indexPath.section+1; i++){
        for(int a = 0 ; a < counter; a++) {
            NSDictionary *dic = [counterArray objectAtIndex:i];
            NSString *dateString = [dic valueForKey:@"date"];

            NSDictionary *dic2 = [myArray objectAtIndex:a];
            NSString *dateString2 = [dic2 valueForKey:@"date"];

            if ([dateString isEqualToString:dateString2]){
                cell.bookTitle.text = [dic2 objectForKey:@"name"];
            }
        }
    }   
}
return cell; 
```

}

到目前为止，它看起来像这样：![](../Images/4fc0f314f143f664171b3c43df12d5a9.png)

数组实际上是这样的：

```
(
  {
    BIBNo = 187883;
    date = "13/08/2012";
    itemSequence = 000010;
    name = "Positive thinking / Susan Quilliam.";
    noOfRenewal = 2;
    number = 000187899;
    status = "Normal Loan";
    time = "24:00";
    type = Loans;
  },
  {
    BIBNo = 161816;
    date = "14/08/2012";
    itemSequence = 000010;
    name = "Malaysian Q & As / compiled by Survey & Interview Department ; illustrations by Exodus.";
    noOfRenewal = 0;
    number = 000161817;
    status = "Normal Loan";
    time = "24:00";
    type = Loans;
  },
  {
    BIBNo = 187882;
    date = "14/08/2012";
    itemSequence = 000010;
    name = "Increasing confidence / Philippa Davies.";
    noOfRenewal = 0;
    number = 000187907;
    status = "Normal Loan";
    time = "24:00";
    type = Loans;
  },
  {
    BIBNo = 291054;
    date = "14/08/2012";
    itemSequence = 000010;
    name = "iPhone application development for IOS 4 / Duncan Campbell.";
    noOfRenewal = 2;
    number = 000291054;
    status = "Normal Loan";
    time = "24:00";
    type = Loans;
  },
  {
    BIBNo = 244441;
    date = "15/08/2012";
    itemSequence = 000010;
    name = "Coach : lessons on the game of life / Michael Lewis.";
    noOfRenewal = 1;
    number = 000244441;
    status = "Normal Loan";
    time = "24:00";
    type = Loans;
  },
  {
    BIBNo = 290408;
    date = "15/08/2012";
    itemSequence = 000010;
    name = "Sams teach yourself iPhone application development in 24 hours / John Ray.";
    noOfRenewal = 3;
    number = 000290408;
    status = "Normal Loan";
    time = "24:00";
    type = Loans;
  }
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T08:56:35.607

我之前也遇到过此类问题，这是由于单元格标识符：由于所有单元格都相同，因此它将使单个单元格出列并将其用于所有行。我最终通过一种非常hacky且可能不理想的方法解决了这个问题..但它确实有效。

我像这样实现单元格标识符：

```
NSString *CellIdentifier = [NSString stringWithFormat:@"cell-%d-%d", indexPath.section, indexPath.row]; 
```

这保证了任何被重用的给定单元格都用于其特定的部分/行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T09:25:28.663

你需要做这样的事情。

创建一个类似 mainArray 的 NSArray 名称，其中包含 Nsarray 对象（假设这些用于部分）并且这些部分数组将具有 NSDictionary 对象（假设这些是每个部分的行）

然后你可以像这样运行循环

```
for(unsigned int counter = 0;counter<[mainArray count];counter++){
  NSArray *sectionArray = [mainArray objectAtIndex:indexPath.section];
 for(unsigned int counter1 = 0;counter1 < [sectionArray count];counter++ ){
   NSDictionary *mainDataDictionary = [sectionArray objectAtIndex:indexPath.row];
  //Write your code here for a particular cell/row.
 }

} 
```

您还需要根据此修改 numberOfRowsInSection。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T05:59:16.547

由于我不知道如何继续编写我编写的这些乱七八糟的代码，我提出了另一个问题，让人们就如何动态插入部分和行提供建议，并且我为我的表格部分重新编写了代码，它工作得很好！:)

链接在这里：[iOS Using NSDictionary to load data into section and rows](https://stackoverflow.com/questions/11673963/ios-using-nsdictionary-to-load-data-into-section-and-rows/11674541#11674541)

在此，我使用 NSDictionary 根据日期动态插入数据。:) 希望它能帮助和我有同样问题的人！

# c# - C# 正则表达式匹配“+99.99”或“-99.99”或“99.99”

> ID：11663844
> 
> 赞同：-3
> 
> 时间：2012-07-26T06:45:23.317
> 
> 标签：c#, regex, numbers

我正在寻找 C# 中的正则表达式来匹配以下任何字符串：“+99.99”、“-99.99”、“99.99”。相同的正则表达式不应匹配字符串“+-99.99”。任何人都可以提出一个答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T06:49:37.093

以下对我有用：

```
 String regex = "^(\\+|-)?99\\.99$";
        String str1 = "-99.99";
        String str2 = "+99.99";
        String str3 = "99.99";
        String str4 = "+-99.99";

        System.Console.WriteLine(Regex.IsMatch(str1, regex));
        System.Console.WriteLine(Regex.IsMatch(str2, regex));
        System.Console.WriteLine(Regex.IsMatch(str3, regex));
        System.Console.WriteLine(Regex.IsMatch(str4, regex));

        System.Console.ReadKey(); 
```

产出：

> 真真真假

解释： `^`将指示正则表达式引擎从字符串的开头开始匹配，`(\\+|-)`表示一个`+`或`-`字符。是正则表达式语法中的`+`特殊字符，因此需要转义。OR 运算符由`|`字符表示。

`?`表示`+`or`-`字符可能存在也可能不存在（它将匹配它之前的 0 或 1 个实例）。

`99\\.99`表示字符串`99.99`。也是正则表达式语法中的`.`特殊字符，因此需要转义。该`$`字符将指示正则表达式引擎在字符串末尾停止匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T06:51:39.547

试试这个：

```
[+-]?\d+\.\d+ 
```

解释：

```
[+-]?      any character of: '+', '-' 
           (optional, matching the most amount possible)

\d+         digits (0-9) 
            (1 or more time, matching the most amount possible)

\.          '.'

\d+         digits (0-9) 
           (1 or more times, matching the most amount possible) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T06:54:29.267

您可以使用一些在线测试人员来测试您的正则表达式（对学习正则表达式很有帮助）。我最喜欢的是：[http](http://www.regexplanet.com/advanced/dotnet/index.html) ://www.regexplanet.com/advanced/dotnet/index.html和[http://regexhero.net/tester/](http://regexhero.net/tester/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T07:17:14.667

如果您希望它只匹配正数或负数 99.99，您可以使用`[+-]?99\.99`. 此正则表达式将匹配*99.99*，可选地以`+`or`-`字符开头。如果您想匹配任何数字，可选择最多两位小数，您可以使用`[+-]?\d{1,}(\.\d{0,2})?`.

像往常一样，如果您希望正则表达式仅匹配整个字符串，则需要在前面加上`^`，`$`即`^[+-]?99\.99$`.

# java - 关于将任务分配给守护线程

> ID：11663848
> 
> 赞同：0
> 
> 时间：2012-07-26T06:45:37.840
> 
> 标签：java, threadpool, daemon

我有一个要求，我想创建一个由 5 个线程组成的池，现在我想将这 5 个线程中的 1 个线程作为一个`daemon`线程，当那个特定的 1 个线程成为守护线程时，我想给它分配一些任务与任何服务相关的守护线程，这样当 java 程序退出时，我可以在窗口任务管理器中检查特定的守护线程仍在执行该任务。请告知如何实现这一点..！因为我坚持这个..！

下面是我的代码...

```
public class StoppingThread extends Thread //extend thread class 
{
    // public  synchronized void run()
     //synchronized (this)

    private volatile boolean Completed = false;

    public void setCompleted() {
        Completed = true;
    }

    public void run()
    {
      for(int i=0;i<20 && !Completed;++i) {
          System.out.println(Thread.currentThread().getName());
        try {
          Thread.sleep(500);

          System.out.print(i +"\n"+ "..");
        } catch(Exception e) {
          e.printStackTrace();
        }
      } 
    } 

 public static void main(String... a) 
 {
     StoppingThread x = new StoppingThread();
     StoppingThread y = new StoppingThread();
     x.start();
     x.setName("first");
     x.setCompleted(); // Will complete as soon as the latest iteration finishes means bolean variable value is set to true 
     y.start();
     y.setName("second");

     }  

 } 
```

现在在这个我想让Y线程作为守护线程然后想给它分配一些任务

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T06:50:24.240

使用[ShutDownHook](http://docs.oracle.com/javase/1.4.2/docs/guide/lang/hook-design.html)。您注册到钩子中的线程将在应用程序结束时被调用。您可以在此线程运行方法中添加所有清理代码（DB、Stream、Context 等）或任何自定义功能。

```
Runtime.getRuntime().addShutdownHook(new Thread() {
    public void run() { // clean up code like closing streams,DB etc }
}); 
```

# android - 使用 LocationManager 时位置显示为空

> ID：11663857
> 
> 赞同：0
> 
> 时间：2012-07-26T06:45:54.067
> 
> 标签：android, locationmanager, android-location

我想获取当前位置的经纬度。我为此使用了 LocationManager，但它显示位置为空，纬度和经度为 0.0。我在清单和 GPS 连接中使用了所需的权限。

**代码：**

**位置demoActivity.java**：

```
public class LocationdemoActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        LocationManager mlocManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        LocationListener mlocListener = new MyLocationListener();
        mlocManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0,mlocListener);
        mlocManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, mlocListener);

        Button buttonLocation = (Button) findViewById(R.id.buttonLocation);
        buttonLocation.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {

                Toast.makeText(
                        getApplicationContext(),
                        "loc:" + MyLocationListener.location + "latitude "
                                + MyLocationListener.latitude + "longitude "
                                + MyLocationListener.longitude, 5000).show();

            }

        });

    }
} 
```

**MyLocationListener.java**：

```
 public class MyLocationListener implements LocationListener {

    public static double latitude;

    public static double longitude;
    public static Location location;

    @Override
    public void onLocationChanged(Location loc)
    {
        location = loc;
        loc.getLatitude();
        loc.getLongitude();
        latitude = loc.getLatitude();
        longitude = loc.getLongitude();
    }
    @Override
    public void onProviderDisabled(String provider)
    {
    }
    @Override
    public void onProviderEnabled(String provider)
    {
    }
    @Override
    public void onStatusChanged(String provider, int status, Bundle extras)
    {
    }
    protected boolean isRouteDisplayed() {
        return false;
    }
} 
```

清单中的权限：

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS"/>
<uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION"/>
<uses-permission android:name="android.permission.CONTROL_LOCATION_UPDATES"/> 
```

问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T10:30:02.343

尝试做这样的事情

```
mlocManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0,mlocListener);

location = mlocManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);

Button buttonLocation = (Button) findViewById(R.id.buttonLocation);

 buttonLocation.setOnClickListener(new View.OnClickListener() {

        public void onClick(View view) {

              Toast.makeText(getApplicationContext(),
                            "loc:" + location + "latitude "
                                    + location.latitude + "longitude "
                                    + location.longitude, 5000).show();

                }

            }); 
```

# events - 使用 Drools 执行基于事件的动作

> ID：11663858
> 
> 赞同：1
> 
> 时间：2012-07-26T06:45:56.547
> 
> 标签：events, drools

我想在我们的一个项目中使用流口水——在线买卖。

事件就像买一本书，买一支笔，买一个kindle。这些事件存储在数据库中。

现在，根据之前发生的事件，我想决定后果。

就像说如果一个人有以下序列，

```
1\. Buy a book at a price.
2\. Sell the same book at a higher price. 
```

然后

```
Do something based on that. 
```

如果有人这样做了，

```
1\. Buy a kindle.
2\. Purchase a book in Science Section of books. 
```

然后

```
show him the relevant content in the UI. 
```

我将所有列出的事物作为数据库中的事件。现在我已经为要完成的操作编写了一个界面，并且我还完成了在事件发生时传递客户的界面。

现在，什么会给我最好的性能来处理事件并根据事件的顺序做出决定。我不能确定将所有事件都存储在内存中，因为我有很多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T07:13:19.470

有不同的方面需要考虑：

*   为了向客户推荐其他商品，有[推荐引擎](https://stackoverflow.com/questions/4469281/recommendation-engine)。如果您的大多数/所有用例都是建议，您可能想要使用其中之一。

*   不一定需要存储“内存中的所有事件”。事实上，Drools 删除了不再与规则库相关的事件。[文件](http://docs.jboss.org/drools/release/5.4.0.Final/drools-fusion-docs/html/ch02.html#d0e184)说_

> *“事件可能会在工作记忆中的一段时间后自动过期。通常，当基于知识库中的现有规则，事件无法再匹配和激活任何规则时，就会发生这种情况。虽然，可以明确定义何时发生事件应该过期。”*

*   为了允许及早删除事件，我会使用 Drools 生成聚合数据，如“喜欢科学主题”、“拥有电子书阅读器”等。这些可以从事件中推断出来，但消耗的内存更少。

# php - mysql_connect (localhost / 127.0.0.1) 在 Windows 平台上慢

> ID：11663860
> 
> 赞同：23
> 
> 时间：2012-07-26T06:46:07.617
> 
> 标签：php, mysql, performance, localhost, mysql-connect

我使用的是 Windows 7、Apache 2、PHP 5、MySQL 5，它们都在同一台机器上。我发现了一个有趣的问题，我有以下代码：

```
 $sql = "select * from user1";
    $conn = mysql_connect("localhost", "root", "xxxxxxxx");
    mysql_select_db("test1");
    mysql_query("set names utf8");
    $result = mysql_query($sql, $conn);
    while ($row = mysql_fetch_assoc($result)){
        foreach ($row as $key => $value){
            echo $key." => ".$value." || ";
        }
        echo "<br/>";
    }
    mysql_free_result($result);
    mysql_close($conn); 
```

上述代码的运行时间超过 1 秒。

当我使用`127.0.0.1`代替时`localhost`，运行时间约为 10 毫秒。

我试图在互联网上找到根本原因，结果如下：

> 我最近将我的开发从 XP 转移到 Windows 7，发现我开发的网页需要 5 秒才能加载。这当然是不可接受的，所以我不得不追查问题所在。我最终找到了有问题的函数/方法 pdo::construct。我还发现 mysql_connect 需要大约 1 秒来建立连接。经过一番谷歌搜索后，我发现了一个解释，即 php 存在 IPv6 问题，您可以通过禁用 IPv6 或在建立连接时切换到 ipaddress 127.0.0.1 来解决问题。

我想知道 PHP 上 IPv6 的问题是什么，只是想更深入地了解。谢谢。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-26T10:21:51.973

PHP 正在尝试打开到 localhost 的连接。因为您的计算机通过 IPv6 连接到您的网络，所以它首先尝试 IPv6 版本的 'localhost'，它的 IP 地址为 ::1

[http://en.wikipedia.org/wiki/IPv6_address#Special_addresses](http://en.wikipedia.org/wiki/IPv6_address#Special_addresses)

> ::1/128 — 环回地址是单播 localhost 地址。如果主机中的应用程序将数据包发送到此地址，IPv6 堆栈会将这些数据包循环回同一虚拟接口（对应于 IPv4 中的 127.0.0.0/8）。

看起来您的 MySQL 服务器没有监听该地址，而是仅绑定到 IPv4 地址，因此一旦 PHP 无法打开连接，它就会回退并尝试通过 IPv4 aka 127.0.0.1 打开 localhost

我个人更喜欢使用 IP 地址或使用 Windows 主机文件或 Mac 等价物来定义“假”域名，然后在连接到解析为 IP 地址的 MySQL 时使用这些域名。无论哪种方式，我都可以确切地知道是使用 IPv4 还是 IPv6 地址。

MySQL 和 Apache 都支持 IPv6，但您必须明确告诉他们使用 IPv6 地址。对于 MySQL，请参阅： [http ://dev.mysql.com/doc/refman/5.5/en/ipv6-server-config.html](http://dev.mysql.com/doc/refman/5.5/en/ipv6-server-config.html)

对于 Apache 配置，请参见： [http ://httpd.apache.org/docs/2.2/bind.html](http://httpd.apache.org/docs/2.2/bind.html)

Apache 支持多个 IP 地址，因此您可以同时使用这两个地址 - 如果机器中的网卡同时具有 IPv4 和 IPv6 地址。MySQL 只支持一个地址。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-28T20:12:43.817

PHP 正在尝试连接到 Windows 7/8/10 中的“localhost”，它是 ::1，但 MySQL 没有侦听 IPv6 套接字，您可以应用几个修复：

1) 在您的主机文件 (C:/windows/system32/drivers/etc/host) 中将 localhost 设置为 127.0.0.1

2) 在 PHP 中，MySQL 服务器从 localhost 更改为 127.0.0.1

3）在my.ini中，添加或编辑：bind-address = ::

> 如果地址是 ::，则服务器接受所有服务器主机 IPv4 和 IPv6 接口上的 TCP/IP 连接。使用此地址可允许所有服务器接口上的 IPv4 和 IPv6 连接。

如果您有 MySQL >= 5.5.3，建议的选项

# iphone - 在 iOS 中提高音量

> ID：11663862
> 
> 赞同：2
> 
> 时间：2012-07-26T06:46:19.633
> 
> 标签：iphone, objective-c, ios, ipad

嗨，我正在使用`MPMoviePlayerController`在我的应用程序中播放电影。我的客户想要增强电影的音频，它应该大于`iOS`系统最大音量。如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T07:17:56.607

将音量提高到高于 iOS 默认设置是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-22T13:24:23.063

如果您的客户希望视频中的音频更响亮，请让他们编辑视频内容并提高视频音频的音量（在他们的视频声音非常低的情况下）。例如：[http ://www.youtube.com/watch?v=OvLgQ61wJS8](http://www.youtube.com/watch?v=OvLgQ61wJS8)

对于 iOS，设备用户可以控制音量，如果设备静音，您不能应用大于他们定义的音量或任何音量的音量。

# javascript - php打印选项到新打开的页面

> ID：11663865
> 
> 赞同：0
> 
> 时间：2012-07-26T06:46:33.340
> 
> 标签：javascript, html

我有以下链接

```
<a href="test.pdf" target="_blank">test.pdf</a> 
```

通过单击此链接，文件将在新窗口中打开。在新窗口中打开 PDF 后，我想打开打印对话框（打印 pdf 内容）。有可能这样做吗？

# php - 使用 jQuery 和 PHP 检查数据库中是否已存在电子邮件地址

> ID：11663867
> 
> 赞同：5
> 
> 时间：2012-07-26T06:46:46.447
> 
> 标签：php, jquery, mysql

我正在尝试验证电子邮件地址是否已存在于表中，但这不起作用。

这是我的代码：

```
<html><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript">
$('#Submit').click(function() {
    var emailVal = $('#email').val(); // assuming this is a input text field
    $.post('checkemail.php', {'email' : emailVal}, function(data) {
        alert(data);
    });
});
</script>
</head>
<body>
<form id="form1" name="form1" method="post" action="view.php">
  <p>
    <input type="text" name="email" id="email" />
  </p>
  <p>
     <input type="submit" name="Submit" id="Submit" value="Submit" />
  </p>
</form>
</body></html> 
```

单击提交按钮时，应首先使用 jQuery 进行验证并调用 checkemail.php 文件，如下所示：

```
<?php
include("../includes/db.php");

$sql = "SELECT email FROM lf_clients WHERE email = " .$_POST['email'];
$select = mysqli_query($con, $sql);
$row = mysqli_fetch_assoc($select);

if (mysqli_num_rows > 0) {
    echo "The email already exists.";
}
?> 
```

但是，当我单击提交按钮时，它会转到 view.php 而不是 checkemail.php。在它重定向到 view.php 之前，它应该首先检查电子邮件是否已经存在。如果电子邮件已经存在，则不应重定向到 view.php。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-26T07:16:07.480

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript">
$(document).ready(function(){ //newly added 
$('#Submit').click(function() {alert('in');
    var emailVal = $('#email').val(); // assuming this is a input text field
    $.post('checkemail.php', {'email' : emailVal}, function(data) {
        if(data=='exist') return false;
        else $('#form1').submit();
    });
});});
</script>
</head>
<body>
<form id="form1" name="form1" method="post" action="view.php">
  <p>
    <input type="text" name="email" id="email" />
  </p>
  <p>
    <input type="button" name="Submit" id="Submit" value="Submit" />
  </p>
</form>
</body>
</html> 
```

php代码

```
<?php
include("../includes/db.php");

$sql = "SELECT email FROM lf_clients WHERE email = " .$_POST['email'];
$select = mysqli_query($con, $sql);
$row = mysqli_fetch_assoc($select);

if (mysqli_num_rows > 0) {
    echo "exist";
}else echo 'notexist';
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T07:07:02.177

这类东西的最佳实践是使用 Jquery 远程验证方法。

```
 $("#myform").validate({
      rules: {
        email: {
          required: true,
          email: true,
          remote: "check-email.php"
        }
      },
      messages:{
         email:'Email address exists.'
     }
    }); 
```

在 PHP 文件中，您可以执行@Sachyn 提到的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T06:57:36.910

您可以执行以下操作

1.  在您的 PHP 文件中 -

    ```
     if (mysqli_num_rows > 0) {
          echo "0"; // email exists
     else
          echo "1"; // email doesn't exists
     return; 
    ```

2.  在您的 HTML 文件中，使用`<input type="button"`而不是`<input type="submit"`

在 JavaScript 中

```
$.post('checkemail.php', {'email' : emailVal}, function(data) {
   if (data == 1)
   { 
       $("#form1").submit();
   }
   else
   {
        alert("Email already exists");
        return false;
   }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T06:55:51.573

我怀疑您必须中止提交按钮的标准操作。您可能还必须将操作从单击更改为提交，但现在无法测试。

```
$('#Submit').submit(function(e) {
    var usernameVal = $('#email').val(); // assuming this is a input text field
    $.post('checkemail.php', {'email' : emailVal}, function(data) {
        alert('data');
    });
    e.preventDefault(); // <------
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-09T23:05:10.513

如果您更喜欢使用 JQuery 进行检查，您可以按以下方式进行

```
$('document').ready(function(){
 var username_state = false;
 var email_state = false;
 $('#username').on('blur', function(){
  var username = $('#username').val();
  if (username == '') {
    username_state = false;
    return;
  }
  $.ajax({
    url: 'register.php',
    type: 'post',
    data: {
        'username_check' : 1,
        'username' : username,
    },
    success: function(response){
      if (response == 'taken' ) {
        username_state = false;
        $('#username').parent().removeClass();
        $('#username').parent().addClass("form_error");
        $('#username').siblings("span").text('Sorry... Username already taken');
      }else if (response == 'not_taken') {
        username_state = true;
        $('#username').parent().removeClass();
        $('#username').parent().addClass("form_success");
        $('#username').siblings("span").text('Username available');
      }
    }
  });
 });        
  $('#email').on('blur', function(){
    var email = $('#email').val();
    if (email == '') {
        email_state = false;
        return;
    }
    $.ajax({
      url: 'register.php',
      type: 'post',
      data: {
        'email_check' : 1,
        'email' : email,
      },
      success: function(response){
        if (response == 'taken' ) {
          email_state = false;
          $('#email').parent().removeClass();
          $('#email').parent().addClass("form_error");
          $('#email').siblings("span").text('Sorry... Email already taken');
        }else if (response == 'not_taken') {
          email_state = true;
          $('#email').parent().removeClass();
          $('#email').parent().addClass("form_success");
          $('#email').siblings("span").text('Email available');
        }
      }
    });
 });

 $('#reg_btn').on('click', function(){
    var username = $('#username').val();
    var email = $('#email').val();
    var password = $('#password').val();
    if (username_state == false || email_state == false) {
      $('#error_msg').text('Fix the errors in the form first');
    }else{
      // proceed with form submission
      $.ajax({
        url: 'register.php',
        type: 'post',
        data: {
            'save' : 1,
            'email' : email,
            'username' : username,
            'password' : password,
        },
        success: function(response){
            alert('user saved');
            $('#username').val('');
            $('#email').val('');
            $('#password').val('');
        }
      });
    }
 });
});
```

```
body {
  background: #A9D9C3;
}
#register_form h1 {
  text-align: center;
}
#register_form {
  width: 37%;
  margin: 100px auto;
  padding-bottom: 30px;
  border: 1px solid #918274;
  border-radius: 5px;
  background: white;
}
#register_form input {
  width: 80%;
  height: 35px;
  margin: 5px 10%;
  font-size: 1.1em;
  padding: 4px;
  font-size: .9em;
}
#reg_btn {
  height: 35px;
  width: 80%;
  margin: 5px 10%;
  color: white;
  background: #3B5998;
  border: none;
  border-radius: 5px;
}
/*Styling for errors on form*/
.form_error span {
  width: 80%;
  height: 35px;
  margin: 3px 10%;
  font-size: 1.1em;
  color: #D83D5A;
}
.form_error input {
  border: 1px solid #D83D5A;
}

/*Styling in case no errors on form*/
.form_success span {
  width: 80%;
  height: 35px;
  margin: 3px 10%;
  font-size: 1.1em;
  color: green;
}
.form_success input {
  border: 1px solid green;
}
#error_msg {
  color: red;
  text-align: center;
  margin: 10px auto;
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<html>
<head>
  <title>Register</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
 <form id="register_form">
      <h1>Register</h1>
      <div id="error_msg"></div>
      <div>
        <input type="text" name="username" placeholder="Username" id="username" >
        <span></span>
      </div>
      <div>
        <input type="email" name="email" placeholder="Email" id="email">
        <span></span>
      </div>
      <div>
       <input type="password" name="password" placeholder="Password" id="password">
      </div>
      <div>
        <button type="button" name="register" id="reg_btn">Register</button>
      </div>
    </form>
</body>
</html>
<!-- scripts -->
<script src="script.js"></script>
```

要使此代码充分发挥作用，它需要自己的后端。但是通过查看这段代码，您可以了解如何检查数据库中是否存在任何字段的基本流程。这是完成主要工作的主要代码。

```
 $('#email').on('blur', function(){
var email = $('#email').val();
if (email == '') {
    email_state = false;
    return;
}
$.ajax({
  url: 'register.php',
  type: 'post',
  data: {
    'email_check' : 1,
    'email' : email,
  },
  success: function(response){
    if (response == 'taken' ) {
      email_state = false;
      $('#email').parent().removeClass();
      $('#email').parent().addClass("form_error");
      $('#email').siblings("span").text('Sorry... Email already taken');
    }else if (response == 'not_taken') {
      email_state = true;
      $('#email').parent().removeClass();
      $('#email').parent().addClass("form_success");
      $('#email').siblings("span").text('Email available');
    }
  }
}); 
```

});

您可以从[Source获取后端](https://codewithawa.com/posts/check-if-user-already-exists-without-submitting-form)

# android - 如何根据拨打的号码过滤android意图

> ID：11663870
> 
> 赞同：1
> 
> 时间：2012-07-26T06:46:57.400
> 
> 标签：android, android-intent, pattern-matching, android-activity, intentfilter

我喜欢只有在拨打某些号码时才会在选择器中显示我的应用程序。例如，如果 *88*xxxx 用户可以选择我的应用程序，否则不要在选择器中显示我的应用程序。

# php - php cli没有apache？

> ID：11663871
> 
> 赞同：3
> 
> 时间：2012-07-26T06:47:01.977
> 
> 标签：php, command-line

我理解 PHP CLI 的方式是：它不再使用网络服务器（在最常见的设置中是哪个 apache）？我是对的吗？因此，如果我通过 CLI 运行 php，它将不再调用 apache 来触发 PHP，而是直接调用 PHP。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T06:49:25.400

是的，这是正确的 PHP-CLI 不会使用 apache，apache 是用于服务器网页的网络服务器，但这里我们直接在 CLI 中运行 PHP，所以我们不需要 apache

# asp.net - 网站滑块

> ID：11663873
> 
> 赞同：1
> 
> 时间：2012-07-26T06:47:06.077
> 
> 标签：asp.net

我在 Visual Studio 2010 中设计一个网站，我设计了我网站的标题部分。但是，现在我想在标题部分下方引入一个滑块窗口，它将在窗口内动态移动内容。请帮我详细说明！谢谢！

# ruby-on-rails - 为什么这个“ajax:success”事件没有触发？

> ID：11663875
> 
> 赞同：2
> 
> 时间：2012-07-26T06:47:20.113
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3, jquery

我有几个像这样的“邀请”按钮的视图：

```
<div class = "fbinvite_form" id = "<%= friend[:identifier] %>" name = "fb">
    <div class = "btn btn-small">
        Invite
    </div>
</div> 
```

当单击这些按钮之一时，将调用 AJAX 函数 (invite_friend) ：

```
$('.fbinvite_form').click(function() {
    invite_friend();
}); 
```

这是邀请朋友（一些值在我调试时是硬编码的）：

```
function invite_friend() {      
    $.post('/groups/7/invitations',
        {
            "recipient_email": "facebook@meetcody.com",
            "commit" : "fb",
            "fb" : "fb"
        },
        function(response) {
        });
} 
```

这是从控制器返回的相关行：

```
render :json => {
    :url => signup_with_token_url(@invitation.token),
    :id => @invitation.id
},
:status => :created 
```

我可以确认这个 json 正在正确呈现。在这一点上，我期待一个`ajax:success`事件触发。我的页面顶部有以下代码：

```
$('.fbinvite_form').bind("ajax:success", function(evt, data, status, xhr) {
    ...
}); 
```

但它没有开火。任何线索可能出了什么问题或如何更好地排除故障（我有点菜鸟）？

**附加上下文**

我想补充一点，因为它可能会有所帮助。我最初构建它是为了使用表单，它运行良好。由于某些性能原因，我决定使用 AJAX 切换到按钮。这是原始表格：

```
<%= form_for([@group, @invitation], :remote => true, :html => { :'data-type' => 'html', :class => 'fbinvite_form', :id => friend[:identifier]}) do |f| %>
    <%= f.hidden_field :recipient_email, :value => "facebook@meetcody.com" %>

    <div class = "fbinvite btn_list_right" id = "<%= friend[:identifier] %>">
    <%= f.submit "Invite", :class => "btn btn-medium btn-primary", :name => "fb" %>
    </div>
<% end %> 
```

此后，它已被您在控制器片段上方看到的所有代码替换。

**更新 1**

根据文斯的建议，我已将“ajax:success”代码移至成功函数中。这是原始的“ajax:success”函数：

```
 $('.fbinvite_form').bind("ajax:success", function(evt, data, status, xhr){
          var fb_id = $(this).attr('id');
          var response = eval("(" + xhr.responseText + ")");        
          var link_url = response.url;
          var id = response.id;
          var inv_url = <%= raw('"' + group_url(@group) + '/invitations/"') %> + id;
          var picture_url = "https://www.example.com.com/assets/cody_130by130.png";
          var desc = <%= raw('"' + first_name(current_user) + " is working with Cody on fitness. Join " + genderizer(current_user, "his") + " group to start tracking your workouts. Cody and the other group members will keep you motivated!" + '"') %>;
          send_invite(fb_id, link_url, picture_url, desc, inv_url); return false;
        }); 
```

这是我为将代码移动到成功函数中所做的工作。问题是我似乎无法访问“xhr”

```
 $.ajax({
        type: "POST",
        url: "/groups/7/invitations",
        data: {recipient_email: "facebook@meetcody.com", commit : "fb", fb : "fb" },
        dataType: "json",
        success: function(evt, data, status, xhr) {
              var fb_id = $(this).attr('id');
              var response = eval("(" + xhr.responseText + ")");        
              var link_url = response.url;
              var id = response.id;
              var inv_url = <%= raw('"' + group_url(@group) + '/invitations/"') %> + id;
              var picture_url = "https://www.meetcody.com/assets/cody_130by130.png";
              var desc = <%= raw('"' + first_name(current_user) + " is working with Cody on fitness. Join " + genderizer(current_user, "his") + " group to start tracking your workouts. Cody and the other group members will keep you motivated!" + '"') %>;
              send_invite(fb_id, link_url, picture_url, desc, inv_url); return false;
        }
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T08:29:02.740

添加这样的错误处理程序并记录错误，这应该有助于诊断问题。

```
 error: function(xhr, status, error) {
              console.log(error);

        } 
```

编辑

抱歉，您需要使用 .ajax 而不是 .post。

```
$.ajax({
  type: "POST",
  url: "/groups/7/invitations",
  data: "name=John&location=Boston",
  success: function(msg){
        alert( "Data Saved: " + msg );
  },
  error(xhr, status, error) {
     console.log(error);
  }
}); 
```

# webkit - PJAX：后退按钮的问题

> ID：11663878
> 
> 赞同：22
> 
> 时间：2012-07-26T06:47:33.340
> 
> 标签：webkit, browser-history, pjax, popstate

我们的一些链接由 PJAX 包装。当用户单击 PJAX 链接时，服务器仅返回 HTML 的必需部分。

如果我执行以下操作：

1.  点击 PJAX 链接
2.  点击简单链接
3.  按下返回按钮

浏览器将显示 PJAX 请求返回的内容。HTML 将被破坏，因为它只是要显示的 HTML 的一部分（检查[这个问题](https://stackoverflow.com/questions/11241263/html5-history-api-back-button-with-partial-page-loads)）。

我们试图通过不缓存 PJAX 响应（`Cache-Control`标头）来解决此问题。这解决了我们的问题，但又引发了另一个问题：当用户按下后退按钮时，WebKit (Chrome 20.0) 从服务器加载全部内容，然后触发`popstate`导致不必要的 PJAX 请求的事件。

是否可以重新创建正确的后退按钮行为？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-08T10:00:17.930

为了让浏览器根据请求标头了解不同版本的 HTTP 资源，我添加了一个**Vary** http 标头。

使用 Vary，您不再需要发送无缓存标头，从而再次快速获取您的页面。

在 PHP 中，这看起来像：

```
header("Vary: X-PJAX"); 
```

由于我们有时每个 URL 使用 3 种表示形式（常规 http、pjax 和 ajax）——因为在已经有时 ajax 化的应用程序中迁移到 PJAX 方法——我们实际上使用：

```
header("Vary: X-PJAX,X-Requested-With"); 
```

如果您需要支持旧的 IE（早于 IE9）版本，您需要确保您的网络服务器剥离 Vary 标头，因为否则旧的 IE 将禁用所有提供 Vary 标头的资源的缓存。

这可以通过 .htaccess/vhost 配置中的以下设置来实现：

```
BrowserMatch "MSIE" force-no-vary 
```

编辑：底层 chrome 错误，[https ://code.google.com/p/chromium/issues/detail?id=94369](https://code.google.com/p/chromium/issues/detail?id=94369)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-12T05:51:37.277

这一切都取决于服务器缓存设置。您的浏览器缓存来自服务器的 AJAX 响应，当您单击后退按钮时，它使用缓存版本。

为了防止缓存在服务器上设置以下标头：

```
'Cache-Control' => 'no-cache, no-store, max-age=0, must-revalidate'
'Pragma' => 'no-cache' 
```

如果您使用的是 Rails，那么一定要尝试 Wiselinks [https://github.com/igor-alexandrov/wiselinks](https://github.com/igor-alexandrov/wiselinks)。它是浏览器状态管理的一把瑞士军刀。以下是一些细节：http: [//igor-alexandrov.github.io/blog/2013/07/11/the-way-to-wiselinks-1-dot-0/](http://igor-alexandrov.github.io/blog/2013/07/11/the-way-to-wiselinks-1-dot-0/)。

# arrays - h2：从存储过程返回的数组上的“数据转换错误”

> ID：11663880
> 
> 赞同：1
> 
> 时间：2012-07-26T06:47:42.240
> 
> 标签：arrays, stored-procedures, h2

这是[这篇文章的后续文章](https://stackoverflow.com/questions/11658251/stored-procedure-returns-an-array-how-to-use-in-sql#comment15451220_11658251)。我正在编写一个由 h2 数据库支持的会计系统。帐户树存储在 ACCOUNTS 表中，PARENT_ID 列存储树中的链接。

要获取树中给定节点的路径，我有以下存储过程：

```
public static Long[] getAncestorPKs(Long id) 
```

它的工作是产生一个整数数组，作为给定节点和树根之间的 PARENT_ID 值。让我们想象一下它是这样定义的（因为我已经尝试过这个并且我得到了同样的错误）：

```
public static Long[] getAncestorPKs(Long id)
{
  return new Long[]{new Long(1), new Long(2), new Long(3)};
} 
```

它已在数据库中正确注册，我可以从 SQL 查询中调用它。我的问题是 h2 似乎无法处理返回值：如果我这样使用它：

```
SELECT ID FROM ACCOUNTS WHERE ID IN (ANCESTOR_PKS(5)) 
```

然后我收到以下错误：

```
Data conversion error converting "(1, 2, 3)"; SQL statement:
SELECT ID FROM ACCOUNTS WHERE ID IN (ANCESTOR_PKS(5)) [22018-167] 
```

相反，如果我将以下内容发送到数据库：

```
SELECT ID FROM ACCOUNTS WHERE ID IN (1, 2, 3) 
```

我得到一个包含 3 行的结果集，其中包含三个整数（正是我所期望的）。

我真的看不出这里有什么问题！我正在返回一个 Long 数组，用于与包含 BIGITS 的列进行比较。为什么 h2 拒绝转换这个数组？我尝试将返回值设为 Object[]，因为 h2 文档并不完全清楚返回端和调用端是否需要这样做，但这根本没有区别。我只是在这里用头撞砖墙。这不是火箭科学！肯定有人以前写过类似的代码吗？

非常感谢，在我发疯之前！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T17:09:03.003

如果该方法返回一个对象数组，那么对于数据库，这是数据类型[ARRAY](http://h2database.com/html/datatypes.html#array_type)的一个值。而不是 3 行的表。但当然，您不会在表中使用数据类型 ARRAY，而是使用 INT 或 BIGINT。所以你的查询不正确。

该方法需要返回一个 ResultSet，或者您需要将数组值转换为表。为此，您可以[`TABLE(..)`](http://h2database.com/html/functions.html#table)按如下方式使用该函数：

```
select x from table(x bigint = getAncestorPKs(1)); 
```

所以你可以做的是：

```
drop table accounts;
create table accounts(id int);
insert into accounts values(1), (2), (10), (20);
drop alias getAncestorPKs;
create alias getAncestorPKs as 'Long[] getAncestorPKs(Long id) {
  return new Long[]{new Long(1), new Long(2), new Long(3)};
}';
select * from accounts where id in
(select x from table(x bigint = getAncestorPKs(1))); 
```

# php - 如何将刷新 div 的两个脚本合二为一？

> ID：11663884
> 
> 赞同：1
> 
> 时间：2012-07-26T06:47:57.427
> 
> 标签：php, javascript, html, ajax

我有两个脚本刷新 div 动态：
1）[http://project-welcome.ugu.pl/test/ajax.js](http://project-welcome.ugu.pl/test/ajax.js)
2）[http://project-welcome.ugu.pl/test/ajax2.js](http://project-welcome.ugu.pl/test/ajax2.js)

我试图结合它：

```
 // Customise those settings

    var seconds = 1;
    var divid = "timediv";
    var divid2 = "points";
    var url = "boo.php";
    var url2 = "boo2.php";

    // Refreshing the DIV

    function refreshdiv(){

    // The XMLHttpRequest object

    var xmlHttp;
    try{
    xmlHttp=new XMLHttpRequest(); // Firefox, Opera 8.0+, Safari
    }
    catch (e){
    try{
    xmlHttp=new ActiveXObject("Msxml2.XMLHTTP"); // Internet Explorer
    }
    catch (e){
    try{
    xmlHttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    catch (e){
    alert("Your browser does not support AJAX.");
    return false;
    }
    }
    }

    // Timestamp for preventing IE caching the GET request

    fetch_unix_timestamp = function()
    {
    return parseInt(new Date().getTime().toString().substring(0, 10))
    }

    var timestamp = fetch_unix_timestamp();
    var nocacheurl = url+"?t="+timestamp;
    var nocacheurl2 = url2+"?t="+timestamp;
    // The code...

    xmlHttp.onreadystatechange=function(){
    if(xmlHttp.readyState==4){
    document.getElementById(divid).innerHTML=xmlHttp.responseText;
    document.getElementById(divid2).innerHTML=xmlHttp.responseText;
    setTimeout('refreshdiv()',seconds*1000);
    }
    }
    xmlHttp.open("GET",nocacheurl,true);
    xmlHttp.send(null);
    xmlHttp.open("GET",nocacheurl2,true);
    xmlHttp.send(null);
    }

    // Start the refreshing process

    var seconds;
    window.onload = function startrefresh(){
    setTimeout('refreshdiv()',seconds*1000);
    } 
```

index.html 的来源：

```
 <script src="ajax3.js"></script>
    <script type="text/javascript"><!--
    refreshdiv();
    // --></script>
    Logs<div id="timediv"></div><br>
    Points<div id="points"></div><br> 
```

它不起作用，因为两个 div 显示相同（在本例中为点）。

如何正确组合脚本？

Ps 你可以在文件 original.php 中看到它
登录：testowyuser
通过： testtest
然后点击“Strona Główna”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T07:40:51.080

有些东西最后并与第一个重叠。

没关系，你在抱怨；），看这里

```
xmlHttp.open("GET",nocacheurl,true); // opening 1st URI
xmlHttp.send(null); // requresting. in the mean time we've got the response and our `onreadystatechange` function triggers

xmlHttp.open("GET",nocacheurl2,true); // opening 2nd URI
xmlHttp.send(null); // the same situation. received response, triggered function 
```

您正在使用 1 个`xmlHTTP`实例来请求两者。并按顺序使用它，但要求它同时工作。

因此，当函数触发（*第一次或第二次无关紧要*）时，您假设（*但不是脚本）在***1 个**变量中已经有 2 个响应。此外，您希望脚本猜测您真正想要的内容。

```
document.getElementById(divid).innerHTML = xmlHttp.responseText; // getting response text from the current response (it can be 1st or 2nd response)
document.getElementById(divid2).innerHTML = xmlHttp.responseText; // and again getting the current response text from the same instance (not the response you are expecting from the next request). so, you are repeating the same for the another <div> 
```

实际上，每次您只有一个响应文本。并且每次您`<div's>`输入相同的信息（复制信息超过 2 `<div's>`）时。目前还没有关于下一个请求的信息。

我想，作为脚本的结果，您总是将最后一个请求复制到 2 上`<div's>`。

**尝试为**每个“通道”创建 1 个实例（第一个脚本使用*1 个实例，`xmlHTTP`第二个脚本使用*1 个实例）并将它们设置为不同的（单独的）`onreadystatechange`函数。这样你就不会有数据重叠，也不会纠结。

**更优雅的解决方案**（*JS 中的重构更少*）是区分响应。例如，如果您正在接收 XML，您可以将其解析为一些**标志**，该标志会告诉您此响应是针对`<div id=divid>`另一个响应是针对另一个响应，`<div>`或者此请求是第一个，这是第二个等。

# javascript - 字符串中的第一个单词

> ID：11663895
> 
> 赞同：0
> 
> 时间：2012-07-26T06:48:34.393
> 
> 标签：javascript, string

如何从这些字符串中获取第一个“单词”？

```
/User/Edit/
/Admin/Edit/2
/Tags/Add 
```

我应该得到`User`, `Admin`, `Tags`, 等等

[http://jsfiddle.net/RV5r2/1/](http://jsfiddle.net/RV5r2/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T06:50:34.090

就这么简单。由于您将其拆分为数组，因此只需返回第一个元素：

```
 return ar[1]; 
```

你准备好了；）

或者你可以先 reverse() 然后再 pop() :D 但这可能有点奇怪。只需确保检查数组键 [1] 是否已设置！经过

```
return (typeof ar[1] !== 'undefined') ? ar[1] : ''; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T06:56:35.087

或者再次：

```
return ar.slice(1,2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T07:04:10.403

我建议您稍微更改 lastWord 方法中的逻辑（**注意**：lastWord 不是此方法的好名称 - 也许是 firstWord？）以考虑不以“/”开头的路径/字符串和路径不包含“/”

```
function lastWord(subject)
{
    var ar = subject.split("/");
    if(ar.length >= 2)
     {
         //we have at least one / in our string
        if(ar[0] !== "") {
            //the string doesn't start with /
           return ar[0];
        }
        else {
            //if the strings starts with / then the ar[0] will be ""
         return ar[1];
        }
    }
    else {
        //we return an empty string if the input was not valid, you could handle this differently
        return "";
    }        
} 
```

这边走 ：

*   "/some/amazing/sentence" 将返回 "some"
*   “some/amazing/sentence”将返回“some”
*   “someamazingsentence”将返回“”

# c# - 如何正确保存 WF4 ActivityBuilder

> ID：11663896
> 
> 赞同：3
> 
> 时间：2012-07-26T06:48:39.370
> 
> 标签：c#, workflow-foundation-4, workflow-foundation

我目前正在保存我的 .NET FX 4.0.1 StateMachine 活动，如下所示：

```
var sb = new StringBuilder();
var xamlWriter = ActivityXamlServices.CreateBuilderWriter(
                     new XamlXmlWriter(new StringWriter(sb),
                     new XamlSchemaContext()));
XamlServices.Save(xamlWriter, activityBuilder);

return sb.ToString(); 
```

这工作正常，生成的 XAML 看起来不错。不幸的是，它是无效的。我可以在使用中读回`ActivityXamlServices.Load`它，但是当我执行它时，它说它不知道工作流中定义的属性。在 Visual Studio 设计器中打开它会产生相同的错误：

> 编译器错误遇到处理表达式“ActiveCall”。未声明“ActiveCall”。由于其保护级别，它可能无法访问。

通过将原始 XAML 与我的代码生成的 XAML 进行比较，我发现了如何解决这个问题。我必须在标签之前有这个`StateMachine`标签：

```
<mva:VisualBasic.Settings>
    Assembly references and imported namespaces for internal implementation
</mva:VisualBasic.Settings> 
```

顺便说一句：
标签里面的文字必须是这样的，否则在VS中打开WF会报错：

> 无法从文本“FooBar”创建“设置”

**问题：**
我必须在我的代码中进行哪些更改才能在生成的 XAML 中包含此标记？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:44:34.010

我想我找到了答案。

在调用之前我必须使用以下代码`Save`：

```
VisualBasic.SetSettings(activityBuilder, new VisualBasicSettings()); 
```

* * *

如果`activityBuilder`是从 a 创建的，`DynamicActivity`最好使用以下代码：

```
VisualBasic.SetSettings(activityBuilder,
                        VisualBasic.GetSettings(dynamicActivity)); 
```

如果不使用此选项，则仅扩展方法所需的命名空间不会写入 XAML，并且会在加载和执行 XAML 时导致错误。

* * *

我总结了我对[代码项目](http://www.codeproject.com/Articles/429462/Saving-and-loading-Workflow-Foundation-4-activitie)的发现。

# ternary-operator - 速记三元运算符是否进行多次计算？

> ID：11663899
> 
> 赞同：-1
> 
> 时间：2012-07-26T06:48:56.780
> 
> 标签：ternary-operator, conditional-operator

三元运算符有一个速记版本，即

`var = exp ?: exp2`

我知道它适用于 PHP。其他语言可能也采用了它。C# 具有类似的功能（对于这个问题的上下文） - `??`。

当条件通过时，是再次评估表达式，还是将结果存储在某个地方？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T06:54:19.027

[http://msdn.microsoft.com/en-us/library/ms173224.aspx](http://msdn.microsoft.com/en-us/library/ms173224.aspx)

`The ?? operator is called the null-coalescing operator and is used to define a default value for nullable value types or reference types. It returns the left-hand operand if the operand is not null; otherwise it returns the right operand.`

它被存储，而不是计算两次。

# ios - 在应用浏览器而不是 iTunes 应用中启动 itune 音乐链接~

> ID：11663902
> 
> 赞同：2
> 
> 时间：2012-07-26T06:49:03.673
> 
> 标签：ios, uiwebview, itunes

嗨，我的应用程序有指向这样的 iTunes 音乐专辑的链接 [http://itunes.apple.com/us/album/better-than-a-hallelujah/id366013643?i=366013659&ign-mpt=uo%3D4](http://itunes.apple.com/us/album/better-than-a-hallelujah/id366013643?i=366013659&ign-mpt=uo%3D4)

当他们单击我的应用程序中的链接时，我想在我的应用程序中打开它（我有一个 uiwebview），问题是它在我的应用程序中启动了 uiwebview，但是页面是空白的，地址栏也是空白的，即它不包含地址[http://itunes.apple.com/us/album/better-than-a-hallelujah/id366013643?i=366013659&ign-mpt=uo%3D4](http://itunes.apple.com/us/album/better-than-a-hallelujah/id366013643?i=366013659&ign-mpt=uo%3D4)

我认为这是因为它试图在模拟器/设备中启动 itunes 应用程序，但我不在乎，我想要[http://itunes.apple.com/us/album/better-than-a-hallelujah/ id366013643?i=366013659&ign-mpt=uo%3D4](http://itunes.apple.com/us/album/better-than-a-hallelujah/id366013643?i=366013659&ign-mpt=uo%3D4)在浏览器中加载并像在桌面浏览器中一样显示内容。

请帮忙谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T23:03:17.293

正如我从您的问题中得到的那样，您需要在您的应用中显示专辑数据。为此，我建议你有两种方法。

第一个解决方案是使用带有 url 的 NSURLRequest 并下载它的数据并在 webview 中加载 html。（如果您想获得页面的桌面版本，您也可以更改用户代理。

第二个是使用 iTunes API 从 iTunes Store 获取专辑数据作为 JSON，然后在您的自定义视图中显示数据。[您可以在此处](http://www.apple.com/itunes/affiliates/resources/documentation/itunes-store-web-service-search-api.html)获取有关 iTunes Store API 的更多信息

希望能帮助到你。:)

# css - CSS 布局问题。需要一双新鲜的眼睛

> ID：11663903
> 
> 赞同：1
> 
> 时间：2012-07-26T06:49:08.007
> 
> 标签：css, layout

我遇到了一个问题，我的图片库中的缩略图间距到处都是，我已经筋疲力尽了，哈哈。

以下是包含缩略图的所有页面的一些示例页面： [Good](http://images.geekdrop.com/eReader-Wallpaper) | [好](http://images.geekdrop.com/GeekDrop-Logos)| [好的](http://images.geekdrop.com/mafia-wars)

然而，在大多数专辑页面上，它们被挤在一起，例如这个页面： [Bad](http://images.geekdrop.com/_comments)

然后是这个页面，它似乎已经完全消失了 kablooey： [真的很糟糕](http://images.geekdrop.com/tutorials)

我确定我在某处缺少边距或填充，但目前它正在躲避我。任何人都可以解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T06:58:24.443

您应该重新编写 CSS 以使所有`li`s 向左或向右浮动，并留有余量。

这将确保所有元素彼此保持在指定的距离内，并且当一个类解决问题时，无需定位和大量唯一 ID。

不要忘记在关闭 div 之前添加一个清除元素；）

CSS：

```
#wrap
{
    width: 450px;
    margin: 0 auto;
    border: 1px dashed #000;
}

.imageHolder
{
    float: left;
    width: 100px;
    margin: 5px;
    border: 1px dashed #00f;
}

.clear
{
    display: block;
    clear: both;
}
​ 
```

[http://jsfiddle.net/Kyle_Sevenoaks/a6JGm/](http://jsfiddle.net/Kyle_Sevenoaks/a6JGm/)

# java - Torquebox 上的 Jruby Rails 调用 EJB 服务 - 模型类

> ID：11663907
> 
> 赞同：1
> 
> 时间：2012-07-26T06:49:20.843
> 
> 标签：java, model, ejb, jruby, torquebox

我想使用 Torquebox 并将 Rails（或例如 Sinatra）作为前端，但我的所有服务和业务层都在 EJB 中，带有 CDI 和 JPA 以及所有这些东西。

1) 我可以将它全部部署为一个应用程序并使用 EJB 的本地调用吗

2）如果我有 Rails，我可以使用模型（没有 ActiveRecord）来与前端交换数据。如何使用此类模型调用 EJB 服务？我的意思是：

```
def create
  user = User.new(params)
  userRepository = inject(Java::com.example.UserRepository)
  userRepository.create(user)  // this is java call
end 
```

如何将用户（jruby 模型传递给 EJB 调用）？或者我应该做

用户 = Java::com.example.User(params)

而不是普通的红宝石模型。

基本上我想在 Ruby 中拥有前端，而在 Java EE 堆栈中拥有机器的其余部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T17:02:38.327

TorqueBox 集成测试有一个执行类似操作的应用程序，请参阅：

[https://github.com/torquebox/torquebox/tree/2x-dev/integration-tests/apps/rails3/twitter](https://github.com/torquebox/torquebox/tree/2x-dev/integration-tests/apps/rails3/twitter)

它从 加载一个 ApplicationScoped bean `lib/ejb.jar`，其来源可以在以下位置找到：

[https://github.com/goldmann/confitura-2011-torquebox-demo/tree/master/cdi](https://github.com/goldmann/confitura-2011-torquebox-demo/tree/master/cdi)

希望这会让你指出正确的方向。

# c# - 如何将包含指数数字的字符串转换为十进制并返回字符串

> ID：11663910
> 
> 赞同：3
> 
> 时间：2012-07-26T06:49:33.217
> 
> 标签：c#, .net, decimal, exponent

我在 delphi 和 c# 之间转换代码。
值作为字符串存储在 delphi 应用程序的文本文件中。存储值的示例是：'4.42615029219009E-5'

现在在我的 c# 应用程序中，我需要读取该字符串值，然后才能再次写出该值。最初我使用的代码类似于：

```
string stringField = "4.42615029219009E-5";
double someMoneyVar = Convert.ToDouble(stringField) 
```

稍后，如果我需要使用 someMoneyVar 的值重新创建文本文件，则使用一个简单的方法：

```
string.Format("{0}", someMoneyVar) 
```

会输出：

```
4.42615029219009E-05 // note the 0 
```

最后，我读到最好在 c# 中将钱存储为小数。我尝试使用 将字符串值转换为小数`decimal.Parse(someMoneyVar, NumberStyles.Any)`，但是格式丢失了。

**我需要完全按照输入的方式输出数据。**

请注意， someMoneyVar 的值可能并不总是包含指数部分。例如 0.0428860331919443。如果 someMoneyVar 的值没有指数部分，则该值将正确写入文本文件。

**更新：**
深入研究 delphi 的**FloatToStr**函数和帮助文件（将值存储在文本文件中），我得到了以下内容：

> 如果值中小数点左侧的位数小于或等于指定精度，并且值大于或等于 0.00001 **（编辑：这应该是 0.0001 .delphi 文档有错误)** . 否则，生成的字符串将使用科学格式，并且 Digits 参数指定指数中的最小位数（介于 0 和 4 之间）。
> ...
> 如果正值部分为空，或者整个格式字符串为空，则使用具有 15 个有效数字的通用浮点格式格式化该值，对应于使用**ffGeneral 格式调用 FloatToStrF**. 如果值的小数点左侧超过 18 位并且格式字符串未指定科学记数法，则也使用通用浮点格式。

因此请记住，**FloatToStr**函数调用**FloatToStrF**使用 15 个有效（精度）数字和 0 作为最小位数，因此我们最终得到

> 4.42615029219009E-5

如果数字为 2，则数字将显示为

> 4.42615029219009E-05

根据 MSDN [http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx#GFormatString](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx#GFormatString)
使用通用格式说明符，双精度为 15，十进制为 29

> 如果以科学记数法表示数字所产生的指数大于 -5 且小于精度说明符，则使用定点记数法；否则，使用科学计数法。如果需要，结果包含一个小数点，小数点后的尾随零被省略。如果存在精度说明符并且结果中的有效位数超过指定的精度，则通过舍入去除多余的尾随数字。
> 
> 但是，如果数字是 Decimal 并且省略了精度说明符，则始终使用定点表示法并保留尾随零。
> 
> 如果使用科学记数法，则如果格式说明符为“G”，则结果中的指数前缀为“E”，如果格式说明符为“g”，则为“e”。**指数至少包含两位数**。这与由指数格式说明符生成的科学记数法格式不同，指数格式说明符在指数中至少包含三位数字。
> 
> 结果字符串受当前 NumberFormatInfo 对象的格式信息影响。下表列出了控制结果字符串格式的 NumberFormatInfo 属性。

可以很容易地设置精度，例如 mydecimal.toString("G15") 但是我仍然没有找到一种方法来设置'E'符号后的位数，就像在 delphi **FloatToStrF**函数中一样容易

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T06:58:41.480

如您所知，要将字符串转换为数字，只需使用`double`. 我会尝试不同的转换：

```
double myNum = double.Parse("<yournumber>", NumberStyles.AllowExponent | NumberStyles.Float, CultureInfo.InvariantCulture); 
```

`AllowExponent`并且`Float`应该保留符号，并`InvariantCulture`注意十进制分隔符（根据语言环境，它可能不是点）。

您可以通过 输出科学计数法数字`string.Format()`，如下所示：

```
double num = 1234.5678; // 1.2345678e+03
string.Format("{0:e}", num); // should output "1.2345678E+03" 
```

如果您必须区分带有和不带有“E + xx”部分的数字，则必须在将字符串转换为双精度之前搜索它，并且完整的片段（警告：未测试！）可能如下所示：

```
string myString = ReadNumberFromFile(); // Just a placeholder method
double myNum = double.Parse(myString, NumberStyles.AllowExponent | NumberStyles.Float, CultureInfo.InvariantCulture);
string output = string.Empty; //this will be the "converted-back number" container
if (myString.IndexOf("e", StringComparison.OrdinalIgnoreCase) >= 0)
{
    //Number contains the exponent
    output = string.Format("{0:e}", num); // exponential notation 'xxxExx' casing of 'e' changes the casing of the 'e' in the string
}
else
{
    //TODO: Number does NOT contain the exponent
    output = string.Format("{0:f}", num); // fixed-point notation in the form 'xxxx.xxx'
} 
```

这里的重点是，就数字而言，*有*或*没有*指数并没有任何区别，这只是一个表示问题（区分它们几乎没有意义：这实际上是*同一件事*）。

# java - 将 Enum.values 与扩展 Enum 的泛型类一起使用

> ID：11663914
> 
> 赞同：15
> 
> 时间：2012-07-26T06:49:52.340
> 
> 标签：java, generics, enums

我正在尝试使用枚举中的所有可用值初始化一个泛型类。这是我希望它的工作方式：

```
public class MyClass<E extends Enum<E>> {

    E[] choices;

    public MyClass() {
        choices = E.values();
    } 
```

但是，在 Eclipse 中不接受调用，`E.values`说这个方法对于这个 E 是未定义的。

接受使用此构造函数，但需要调用者提供值：

```
public MyClass(E[] e) {
    choices = e;
} 
```

在我发现的文档中：

> Java 编程语言的枚举类型比其他语言中的枚举类型强大得多。枚举声明定义了一个类（称为枚举类型）。枚举类主体可以包括方法和其他字段。编译器在创建枚举时会自动添加一些特殊方法。例如，它们有一个静态值方法，该方法返回一个数组，该数组按照声明的顺序包含枚举的所有值。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-26T06:52:47.733

您最好的选择可能是`Class`将所需的枚举传递给构造函数。（例如，查看 an[`EnumMap`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/EnumMap.html)是如何构造的。）

然后，您可以使用来获取常量。`clazz.`[`getEnumConstants`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html#getEnumConstants%28%29)`()`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T06:58:22.883

[由于泛型在 Java 中的实现方式以及称为类型擦除](https://stackoverflow.com/a/4399623/473637)的现象，您的第一个代码片段不起作用。因此，JVM 将不知道`E`程序执行时的类型是什么。

您可能可以在`MyClass`的构造函数中执行以下操作：

```
public MyClass(E type) {
    choices = type.getDeclaringClass().getEnumConstants();
} 
```

# ios - iOS App 中的离线和安全性

> ID：11663915
> 
> 赞同：3
> 
> 时间：2012-07-26T06:49:55.750
> 
> 标签：ios, security, core-data, sqlcipher

我正在为一个应用程序设计离线功能，该应用程序在离线模式下缓存数据并将其提供给用户。该应用程序还需要支持离线模式下的登录功能。

我认为 Sqlicipher 是比[具有文件保护的核心数据安全性](https://nickharris.wordpress.com/2010/07/14/core-data-and-enterprise-iphone-applications-protecting-your-data/)更好的选择，因为只有在 iOS 设备中实施数据保护时，才能确保数据的安全性。

而且我也害怕因为这个[事件](http://www.wired.com/gadgetlab/2009/07/iphone-encryption/)而导致iOS的硬件加密。

作为我为 Sqlicipher 设计的一部分，我计划了以下注视：

1.  使用 SqlCipher 存储敏感数据。
2.  将用户的凭据作为 SqlCipher DB 访问的密钥。
3.  将用户的凭据存储在钥匙串访问中。

问题：

1.  将凭据存储在钥匙串访问中是一种更安全且万无一失的选择。如果没有，有什么替代方法？
2.  从数据保护的角度来看，我对核心数据安全性的理解是否正确？

# cookies - 如何在 JSF 2.0 中实现自动登录功能

> ID：11663917
> 
> 赞同：1
> 
> 时间：2012-07-26T06:50:12.420
> 
> 标签：cookies, jsf-2

我有一个登录表单，上面有一个“让我登录”选项。如果用户选中此选项并按下登录按钮。然后我想我可以将用户名和密码保存在 cookie 中并将其发送到用户计算机。然后当用户再次打开站点时，我可以检查该 cookie 是否存在于用户计算机中，如果存在则从 cookie 中获取用户名和密码并登录用户。但问题是如何将 cookie 发送到用户计算机？我所知道的。你可以这样设置cookie

```
Cookie userCookie = new Cookie("userCookie", "loginUser");
//sessionCookie.setMaxAge(60 * 15);
userCookie.setPath("/");
httpServletResponse.addCookie(userCookie); 
```

如果我没有设置，`setMaxAge`那么它是浏览器级别的 cookie，即当用户关闭浏览器时，cookie 将被删除。如何将该 cookie 发送到用户计算机并从用户计算机自动登录？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T08:55:39.197

无论哪种方式，您都不应该，永远，永远不要将密码存储在 cookie 中！

这是一篇关于持久 cookie 的好文章：[持久登录 cookie 最佳实践](http://fishbowl.pastiche.org/2004/01/19/persistent_login_cookie_best_practice/) [http://fishbowl.pastiche.org/2004/01/19/persistent_login_cookie_best_practice/](http://fishbowl.pastiche.org/2004/01/19/persistent_login_cookie_best_practice/)

文章要点：

**前提**

*   Cookie 很容易受到攻击。在常见的浏览器 cookie 窃取漏洞和跨站脚本攻击之间，我们必须承认 cookie 不安全
*   持久登录 cookie 本身就是足够的身份验证来访问网站。它们相当于将有效的用户名和密码合二为一
*   用户重复使用密码。因此，您可以从中恢复用户密码的任何登录 cookie 比您无法从中恢复的登录 cookie 具有更大的潜在危害
*   将持久性 cookie 绑定到特定 IP 地址会使它们在许多常见情况下不是特别持久
*   用户可能希望同时在不同机器上的多个 Web 浏览器上拥有持久性 cookie

作者建议将用户名与一个大的随机数相关联，这是一种常见的做法。

# c++ - C++ 中的 Facebook 图形 API

> ID：11663925
> 
> 赞同：2
> 
> 时间：2012-07-26T06:50:38.590
> 
> 标签：c++, ios, facebook, facebook-graph-api, cocos2d-x

我正在尝试将 Facebook 集成到我使用 Cocos2d-x 为 iPhone 和 Android 用 C++ 开发的游戏中。我在 C++ 中找不到任何好的 API。任何人都可以帮助如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T05:56:44.607

我不知道 iPhone 但在 Android 中我已经使用 JNI 调用 java 并且从 java 我调用了 facebook api，请检查下面的代码。

在 $COCOS2DX_HOME\cocos2dx\platform\android CCApplication.h

```
void postMsgOnFacebook1(char *msg); 
```

无效 CCApplication::postMsgOnFacebook(char *msg){

CCApplication.cpp

```
void CCApplication::postMsgOnFacebook(char *msg){

 JniMethodInfo minfo;

    if(JniHelper::getStaticMethodInfo(minfo, 
        "org/cocos2dx/lib/Cocos2dxHelper", 
        "postMsgOnFacebook", 
        "(Ljava/lang/String;)V"))
    {
        jstring StringArg1 = minfo.env->NewStringUTF(msg);
        minfo.env->CallStaticVoidMethod(minfo.classID, minfo.methodID, StringArg1);
        minfo.env->DeleteLocalRef(StringArg1);
        minfo.env->DeleteLocalRef(minfo.classID);
    }
} 
```

在 java org.cocos2dx.lib.Cocos2dxHelper 添加新方法

```
public static void postMsgOnFacebook(final String msg) {
     //facebook posting code here       
} 
```

在此更改后，请在游戏中单击任何按钮清理并构建项目

```
 CCApplication::sharedApplication()->postMsgOnFacebook((char *)"facebook post"); 
```

我在 cocos2d-2.0-x-2.0.4 中做到了这一点。如果您需要更多帮助，请告诉我

谢谢你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T21:26:08.927

看看这个[线程](https://stackoverflow.com/questions/5290241/most-complete-c-facebook-library)我觉得你可以使用它;）

如果这是用 C++ 编写的，那么您可以将它与 cocos2dx 一起使用。但是寻找 Qt 你可以提取他们的 API :)

# c# - nHibernate 不会在同一会话中通过 Oracle 包更新其他表

> ID：11663928
> 
> 赞同：2
> 
> 时间：2012-07-26T06:50:42.227
> 
> 标签：c#, nhibernate

在一个窗口应用程序中，我们使用 nHibernate。我们在更新表（Tag1 或 Tag2）的数据时遇到问题，并且在同一个 ISession 中，我们使用 Oracle 包将表中的数据插入到另一个表（QA 表）中。提交时，Oracle 包在 Tag1/Tag2 表中看不到更改的数据，因此在 QA 表中未更新修改的数据，可能是因为在同一个会话中被调用？

```
 using (ISession session = iNhibernet.OpenSession())
            {

                using (ITransaction transaction = session.BeginTransaction())
                {

                    try
                    {
                        // Business Entity Saved in Tag1/Tag2 Table
                        session.SaveOrUpdate(l);
                    }
                    catch (Exception ex)
                    {
                        ErrorLogExceptionHandler.ErrorLog(ref ex);
                        throw new Exception("Unable to save data");
                    }
                    // Calling Oracle Package to Compare Tag1 and Tag2 data and inserting data in QA Table.
                    IDbCommand db = ProductionLog.ProductionLogUpdate(l.ProductionlogSeqNo, loadAction) as DbCommand;
                    db.Connection = session.Connection;
                    try
                    {
                        db.ExecuteNonQuery();
                    }
                    catch (Exception ex)
                    {
                        ErrorLogExceptionHandler.ErrorLog(ref ex);
                        throw new Exception("Unable to insert in production log");
                    }
                transaction.Commit();
       }
    } 
```

可以帮忙。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T00:26:35.993

You are calling

```
 session.SaveOrUpdate(l); 
```

but this does not force the session to instantly update the database. NHibernate minimises calls to the database by storing all pending updates, and then calling them on the database in one batch. The `SaveOrUpdate` invocation is instructing the session to update the database with changes to `l` on the next `Flush` or `Commit`.

The oracle command is expecting the data to have already been written to the database.

I believe you can solve this problem with an explict call to `Flush`.

```
 using (ITransaction transaction = session.BeginTransaction())
            {

                try
                {
                    // Business Entity Saved in Tag1/Tag2 Table
                    session.SaveOrUpdate(l);
                    session.Flush();  // <<== Write all of our changes so far
                }
                catch (Exception ex)
                {
                    ErrorLogExceptionHandler.ErrorLog(ref ex);
                    throw new Exception("Unable to save data");
                } 
```

# java - 匹配正则表达式模式时如何忽略变音符号？

> ID：11663931
> 
> 赞同：2
> 
> 时间：2012-07-26T06:50:57.493
> 
> 标签：java, android, regex, diacritics

我需要正则表达式搜索字符串以查找具有以下条件的出现：

*   在单词边界上
*   不区分大小写
*   忽略变音符号

我的代码：

```
CharSequence text = "One Twó";
String searchString = "two";
Pattern p = Pattern.compile("(?i)\\b"+searchString);
Matcher m = p.matcher(text);
while(m.find()) {
   int s = m.start();
   int e = m.end();
} 
```

前两个条件由`(?i)`and`\b`模式表达式实现。

我仍然需要实现第三个目标，忽略变音符号，因此在上面搜索的字符串“two”将匹配文本中的文本“Twó”。如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T06:58:30.180

我没有完美的基于正则表达式的解决方案。也许它存在，也许它不存在。

一个解决方法的建议：您可以在尝试匹配字符串之前尝试*删除变音符号。*

**相关问题：**

*   [从 Unicode 字符中删除变音符号 (ń ǹ ň ñ ṅ ņ ṇ ṋ ṉ ̈ ɲ ƞ ᶇ ɳ ȵ)](https://stackoverflow.com/questions/1453171/n-n-n-or-remove-diacritical-marks-from-unicode-cha)

# sql - 这是语法错误吗？

> ID：11663933
> 
> 赞同：2
> 
> 时间：2012-07-26T06:51:04.533
> 
> 标签：sql, sql-server, sql-server-2005

```
IF( @ActiveStatus = 1 )
BEGIN 
    @PasswordStatus = 3 
END
ELSE 
    SET @PasswordStatus = (SELECT password_status 
                             FROM tbl_user
                            WHERE login_name = @LoginName_fromApp
                              AND password=@Pass
                           ) 
```

我正在使用 Microsoft SQL Server Management Studio..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T06:52:20.563

是的

在`IF`子句中你需要设置变量所以使用`select`or `set`，不要写直接`@PasswordStatus = 3`写`set/select @PasswordStatus = 3`

尝试

```
if( @ActiveStatus = 1 ) 
begin 
--chage of code 

 set @PasswordStatus = 3 --or select @PasswordStatus = 3
   END
else 
begin
Set @PasswordStatus = (select password_status from tbl_user where  login_name=@LoginName_fromApp and password=@Pass)

end 
```

**编辑**

**-@ marc_s 的评论**如果您只是设置“标量”值，请使用 SET @Var = 3 - 如果您实际上是从表（或视图）中选择，请使用 SELECT @Var = ID FROM dbo.Table1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T08:13:15.923

另一个

```
select 
        @PasswordStatus = case when @ActiveStatus = 1 then 3 else password_status  end
from 
    tbl_user  
where  
        login_name = @LoginName_fromApp and password=@Pass 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T06:55:12.293

当您将 valuer 设置为任何变量时，请使用**Set**如下

```
if( @ActiveStatus = 1 )
begin
Set @PasswordStatus = 3 
END
else 
begin
Set @PasswordStatus = (select password_status from tbl_user where
login_name=@LoginName_fromApp and password=@Pass)
end
Select @PasswordStatus 
```

# java - 如何记录断言的真实结果

> ID：11663936
> 
> 赞同：3
> 
> 时间：2012-07-26T06:51:26.693
> 
> 标签：java, logging, testng, assert

我正在使用 TestNG、WebDriver 和 log4j 编写一些测试，如果结果为真或假，我正在尝试记录断言的结果。例如，当我编写此代码时：

```
Assert.assertTrue(condition) 
```

我想在日志中查看这是通过还是失败。现在，如果结果为 FAIL，我只能看到任何日志。有谁知道如何实现这一目标？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T06:54:10.450

您可以覆盖 Assert-Class 并自己触发记录器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T17:02:51.770

我正在重新设计 TestNG 的断言系统，看看新架构，让我知道你的想法：

[https://groups.google.com/group/testng-users/browse_thread/thread/4392868b7d1fd051](https://groups.google.com/group/testng-users/browse_thread/thread/4392868b7d1fd051)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T07:04:33.640

没有办法告诉`Assert`记录一个成功的断言。你可以这样做：

```
Assert.assertTrue(condition);
logger.info(condition ? "PASS" : "FAIL"); 
```

或子类化`Assert`并重新实现`assertTrue`为您进行日志记录。请注意，在这种情况下，您的日志行将声称位于内部`Assert.assertTrue`而不是调用点，因此您必须以某种方式修复它。

# ios - 我们如何在文件中编写结构？

> ID：11663937
> 
> 赞同：2
> 
> 时间：2012-07-26T06:51:26.283
> 
> 标签：ios

我是IOS编程的新手。我想将 C 风格的结构写入文件并检索回来。获取文档目录路径后，我可以将字符串写入文件。但是如何在该文件中编写结构。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T04:13:45.110

普通的 C 方式的 I\O 操作运行良好，但是在特定位置写入文件需要权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T07:09:20.817

您可能对 NSCoding 协议以及[存档和序列化](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Archiving/Archiving.html#//apple_ref/doc/uid/10000047i)指南中的创建和提取存档以及编码和解码对象最感兴趣。

# iphone - 没有任何接触的故事板过渡（即 IBOutlet）

> ID：11663940
> 
> 赞同：2
> 
> 时间：2012-07-26T06:51:40.453
> 
> 标签：iphone, storyboard

我正在使用情节提要，其中我有三个视图控制器。我想在没有任何触摸的情况下从第一个视图控制器开始（所以我使用了 timer 。）我在 timers 方法中添加了以下代码：

[自我presentModalViewController：anyViewControllerRef动画：YES]；或 [[self navigationController] pushViewController:anyViewControllerRef animated:YES];

但是在计时器间隔后我两次都出现空白屏幕（即使我得到了完美的日志，这意味着我在第二个 ViewControllers 类中添加的日志但没有正确的视觉效果）

我应该在 timers 方法中添加什么来执行场景转换？（所以能够看到我在下一个 ViewController 上添加的任何内容）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T06:31:57.540

仅供您自己参考，这对您不起作用的原因是因为您正在“创建”您拥有的任何类型的视图控制器并显示这个“新创建的”控制器，当然这个没有任何视觉效果，因为interfacebuilder 控制器没有链接到这个。

您的解决方案意味着您不是创建 anyViewControllerRef 的实例，而是要求情节提要为您提供它所拥有的实例（带有您添加的视觉元素的实例）。

顺便说一句，几乎 90% 的时间你想在 ios 下为 iphone 呈现模态视图控制器，如果我没记错的话，push 仅用于 ipad 或 navigationviewcontroller。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T06:24:11.160

需要将标识符添加到下一个视图控制器并在 timers 方法中添加以下代码：

anyViewControllerRef = [self.storyboard instantiateViewControllerWithIdentifier:@"identifierName"];

[[self navigationController] pushViewController:anyViewControllerRef 动画：YES]

# python - 从 django 视图调用 REST API

> ID：11663945
> 
> 赞同：21
> 
> 时间：2012-07-26T06:52:36.210
> 
> 标签：python, django, rest

有没有办法从 django 视图进行 RESTful api 调用？

我正在尝试从 django 视图沿 url 传递标头和参数。我在谷歌上搜索了半个小时，但找不到任何有趣的东西。

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-07-26T07:21:49.427

是的，当然有。您可以使用[urllib2.urlopen](https://docs.python.org/2/library/urllib2.html)但我更喜欢[requests](https://requests.readthedocs.io/en/master/)。

```
import requests

def my_django_view(request):
    if request.method == 'POST':
        r = requests.post('https://www.somedomain.com/some/url/save', params=request.POST)
    else:
        r = requests.get('https://www.somedomain.com/some/url/save', params=request.GET)
    if r.status_code == 200:
        return HttpResponse('Yay, it worked')
    return HttpResponse('Could not save data') 
```

requests 库是 urllib3 之上的一个非常简单的 API，您可以在[此处](https://requests.readthedocs.io/en/master/)找到有关使用它发出请求的所有信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-05T07:50:20.663

是的，我正在发布我的源代码，它可能会对您有所帮助

```
import requests
def my_django_view(request):
    url = "https://test"
    header = {
    "Content-Type":"application/json",
    "X-Client-Id":"6786787678f7dd8we77e787",
    "X-Client-Secret":"96777676767585",
    }
    payload = {   
    "subscriptionId" :"3456745",
    "planId" : "check",
    "returnUrl": "https://www.linkedin.com/in/itsharshyadav/" 
    }
    result = requests.post(url,  data=json.dumps(payload), headers=header)
    if result.status_code == 200:
        return HttpResponse('Successful')
    return HttpResponse('Something went wrong') 
```

*在获取 API 的情况下*

```
import requests

def my_django_view(request):
    url = "https://test"
    header = {
    "Content-Type":"application/json",
    "X-Client-Id":"6786787678f7dd8we77e787",
    "X-Client-Secret":"96777676767585",
    }

    result = requests.get(url,headers=header)
    if result.status_code == 200:
        return HttpResponse('Successful')
    return HttpResponse('Something went wrong') 
```

# python - Python中CSV文件的“另存为”向导

> ID：11663952
> 
> 赞同：0
> 
> 时间：2012-07-26T06:53:03.820
> 
> 标签：python, excel, csv, python-2.7

我可以使用以下代码保存 Excel 文件：

```
f = cStringIO.StringIO()  # This is a buffer to Store the above values
wb.save(f)  # This will save the buffer
output_data=base64.encodestring(f.getvalue()) 
res = self.write(cr, uid, ids, {'state':'get','data':output_data, 'name':'kpi.xls'}, context=context)
return res 
```

但我无法使用**另存为**向导保存 CSV 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T07:13:16.437

代码和解释不完整，但据我了解，您需要一个“另存为”对话框。[Tkinter](http://docs.python.org/library/tkinter.html)中的[tkFileDialog](http://tkinter.unpythonic.net/wiki/tkFileDialog)应该可以解决问题。

```
 filename = tkFileDialog.asksaveasfilename()
res = self.write(cr, uid, ids, {'state':'get','data':output_data, 'name':filename}, context=context) 
```

# javascript - 动态添加的数据未加载到 jQuery mobile/java 脚本中的 TextBoxes 中。数据有 [object HTMLInputElement] 而不是值

> ID：11663956
> 
> 赞同：0
> 
> 时间：2012-07-26T06:53:15.237
> 
> 标签：javascript, android, jquery, jquery-mobile, cordova

**我已经使用 jQueryMobile 在 phoneGap 中**实现了一个适用于iphone 和 android 的应用程序

 **我的应用程序已经为单个 html 页面完成并且工作正常。

现在为了获得更好的性能，我曾经在**单独的多个 html 文件**中实现。

*在一个 js 文件中，我实现了用于编辑员工信息的代码，如下所示*。

```
 EditInfoButton.click(function() 
{
         var row = backupInformation;
         alert(row.Emp_Name);
         $('#editEmpName').val(row.Emp_Name);

         ...

         ...

    }); 
```

单击按钮时此处***弹出正确结果但未****显示在文本框中***`alert(row.Emp_Name);`**

 **在编辑页面的 html 文件中，我使用 jQuery mobile 实现了文本框，如下所示

```
using **`id = "editEmpName"`** 
```

我的一个 Html 中的文本框：

```
<div data-role="fieldcontain" >
          <label for="Empname"  class="ui-input-text" ><b>Employee Name</b></label>
            <input name="Empname" type="text"  id="editEmpName"/>
  </div> 
```

但在 html 页面中，一键操作 **`onClick="alert(editEmpName)"`** popus **[object HTMLInputElement]**

y 这个**[object HTMLInputElement]**如何从中获取我的值`editEmpName`

**以及我如何在 texbox 中获得正确的值**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T07:26:51.177

产生错误警报的代码是显示 HTML 元素本身，而不是元素的值。`editEmpName`变量在您的 JavaScript 中在哪里初始化？如果它设置为 id 为“editEmpName”的输入元素，那么你可以这样做

```
onClick="alert(editEmpName.value)" 
```****

# c# - 为什么我的程序只是停止，没有抛出异常？

> ID：11663960
> 
> 赞同：0
> 
> 时间：2012-07-26T06:53:19.283
> 
> 标签：c#, exception

我有以下代码。发生错误，代码只是在`_clientStreamWriter.Flush();`方法处中断`SendData`。

没有给出错误，没有抛出异常......程序只是停止。有什么帮助吗？谢谢！

```
public class clsTCPClient
{
   TcpClient TCPClient = new TcpClient();
   StreamWriter _clientStreamWriter;

   public bool Connect(string Dest, int Port)
   {
       try
       {
           if (!TCPClient.Connected)
           {
               TCPClient.Connect(Dest, Port);
               _clientStreamWriter = new StreamWriter(TCPClient.GetStream());
           }
       }
       catch(Exception e)
       {
           utilities.WriteLog(utilities.LogDir + "\\AEOS.log", e.ToString());
           return false;
       }
       return true;
   }

   public void SendData(string Data)
   {      
       try
       {
           //send message to server
           _clientStreamWriter.WriteLine(Data);
           _clientStreamWriter.Flush();

       }
       catch(Exception e)
       {
           utilities.WriteLog(utilities.LogDir + "\\AEOS.log", e.ToString());
       }
   }    
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T06:57:37.767

TCP 是一种可靠的连接。您需要读取服务器端的所有数据并正确完成读取，以便您的代码进一步移动。超时后您可能会收到异常。

**编辑：**

我刚刚对其进行了测试，即使您不接受套接字或在服务器端读取任何数据，Flush() 也不应该阻塞。所以肯定是其他问题。

# javascript - Backbone.js 错误？

> ID：11663961
> 
> 赞同：0
> 
> 时间：2012-07-26T06:53:20.417
> 
> 标签：javascript, backbone.js

我在 test.html 中有以下内容：

```
<script>
var Foo = Backbone.Model.extend({
  initialize: function(options) {
    console.log('hello!');
  }
});
var Bar = Backbone.Collection.extend({
  model: Foo
});
var m = new Bar({});
</script> 
```

事实证明，当变量`m`被初始化时，`initialize`Foo 的函数被调用。因此，在 Firebug 控制台中，我得到“你好！”。当我注释掉这一行时：

```
model: Foo, 
```

没有“你好！” 在控制台输出中。因此，为集合声明模型会调用该模型的`initialize`函数。我认为这种行为有点愚蠢。我还没有通读骨干代码，但这是有原因的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T07:03:44.643

好吧，代码的行为没有任何问题。
当您在集合定义中传递模型时，您指定该集合中的每个模型都是 type `Foo`。
当您初始化集合`new Bar({})`时，您将模型传递给集合（尽管正如@alexanderb 所说，我认为集合需要一个数组作为第一个参数）并对其进行初始化，从而输出`'hello!'`.
例如，如果您不将任何模型传递给集合构造函数：

```
new Bar();// no console output 
```

不会有控制台输出，另一方面，如果您要传递一个对象数组，那么该集合将初始化所有提供的模型：

```
new Bar([{},[},{}]);// will output 'hello!' 3 times 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T07:05:56.623

我相信集合的构造者期望模型**数组**。所以，你应该做的是：

```
var collection = new Bar( [ {} ] ); 
```

在那里，应该调用模型的初始化方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T07:33:19.123

经过一番调查，我发现，Backbone.Collection 函数如下：

```
var Collection = Backbone.Collection = function(models, options) {
  options || (options = {});
  if (options.model) this.model = options.model;
  if (options.comparator !== void 0) this.comparator = options.comparator;
  this._reset();
  this.initialize.apply(this, arguments);
  if (models) this.reset(models, {silent: true, parse: options.parse});
}; 
```

因此，如果您像这样为您的 Collection 创建一个初始化方法

```
initialize: function() {
  console.log('hello collection!');   
} 
```

您会注意到 hello 集合记录在模型的 hello 之前。所以模型初始化必须来自-call`reset`之后的函数。除非您将模型传递到您的收藏中，否则不会被调用，您乍一看似乎没有这样做，但实际上在`initialize``rest`

```
var m = new Bar({}); 
```

Backbone 将 解释`{}`为模型，因此在`reset`-function 中对其进行初始化。但是`{}`你说的不是模特吗？嗯，Backbone 对此并不太挑剔，它只需要一个可以包含或不包含模型属性的哈希数组。-function`reset`最终导致`add`-function 最终所有道路都通向罗马，或者我应该说`_prepareModel`-function

```
_prepareModel: function(attrs, options) {
  if (attrs instanceof Model) {
    if (!attrs.collection) attrs.collection = this;
    return attrs;
  }
  options || (options = {});
  options.collection = this;
  var model = new this.model(attrs, options);
  if (!model._validate(model.attributes, options)) return false;
  return model;
} 
```

这里发生的情况是，集合检查它是否已通过模型或属性散列，在属性散列的情况下，它只是根据其定义的模型创建一个新模型并传递该散列。

希望这不仅能解决问题，还能进一步阐明那里发生的事情。当然，我也热忱地提倡大家阅读骨干源代码，[最糟糕的 OG 文档](https://github.com/documentcloud/backbone/blob/master/backbone.js)。

# sql - Oracle 中的 Join 子句和 Where 子句

> ID：11663963
> 
> 赞同：0
> 
> 时间：2012-07-26T06:53:27.703
> 
> 标签：sql, oracle

假设我有两张桌子，

```
 Student                           Test

Id    Name                   TestId   Score  StudentId
--    ----                   ------   ----  ---------  
1    Mark                      774     100       1   
2     Sam                      774      89       2  
3    John                      775      78       3 
```

现在我必须打印每个学生的学生姓名、考试 ID 和分数。

我知道它们都产生相同的结果。但是哪一个在性能方面更好？第二个是否找到笛卡尔积然后应用过滤器（where 子句）？

```
1.Select test.testid,student.name,test.score 
  from student 
  join test 
  on test.studentid=student.id

2.Select test.testid,student.name,test.score  
  from student,test 
  where test.studentid=student.id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T07:01:25.833

我不会直接回答你的问题，而是为你提供一个工具来解决这些问题。

Oracle 提供了查看查询如何执行的方法。您可以查看对表的访问是如何执行的、查询执行需要多长时间、是否使用索引等。

命令是：

[解释计划](http://docs.oracle.com/cd/B10500_01/server.920/a96533/ex_plan.htm) 并 [设置自动跟踪](http://docs.oracle.com/cd/B10501_01/server.920/a96533/autotrac.htm)。

在你的情况下，它会像这样简单：

```
EXPLAIN PLAN FOR
Select test.testid,student.name,test.score 
from student 
join test 
on test.studentid=student.id;

EXPLAIN PLAN FOR
Select test.testid,student.name,test.score  
from student,test 
where test.studentid=student.id; 
```

或使用自动跟踪：

```
Set autotrace on;

Select test.testid,student.name,test.score 
from student 
join test 
on test.studentid=student.id;

Select test.testid,student.name,test.score  
from student,test 
where test.studentid=student.id; 
```

在 的情况下`EXPLAIN PLAN`，结果保存在一个特殊的表中，您可以查询以查看它们。检查我链接到的文档，看看可以用它做什么。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-26T09:24:06.027

两个查询都有相同的执行计划（至少在 MS SQL 中是这样）。第二个查询将被优化

# php - 左外连接查询中的简单逻辑

> ID：11663965
> 
> 赞同：0
> 
> 时间：2012-07-26T06:53:42.277
> 
> 标签：php, mysql, database

我有两个表 tblSiteVisits 和 tblConformedList 和列如下

**tblSiteVisits**

```
   姓名 | 电子邮件地址   

```

**tblConformedList**

```
   姓名 | 电子邮件地址 | 联系电话 | 位置 | Conform_Status

```

第一个表包含所有拥有 SiteVisits 的人的姓名和电子邮件地址

现在，在第二个表中，Conform_Status 将根据现场访问时间点的客户可用性设置为 1 或 0。

如果不是，我将填写 ContactNo 和 Location，并使用 Conform_Status = 0 更新表格。

现在我想要的是我想通过关联连接中的 EmailAddress 和 Conform_Status 为 0 的 tblConformedList 中的行来从表 tblSiteVisits 和 tblConformedList 中获取人员的姓名和电子邮件地址。

那是已提供 ContactNo 和 Location 以进行更新但未提供 Conform_Status 的人员列表。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T06:59:44.737

可能对你有帮助。

```
 select t1.* from tblSiteVisits t1 inner join tblConformedList t2 on  
 t1.EmailAddress=t2.EmailAddress where t2.Conform_Status=0 
```

尝试并分享您的反馈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T07:04:26.797

抱歉，如果您*只*需要`Conform_Status`为 0 的行，则不需要`LEFT JOIN`，您需要`INNER JOIN`。

```
SELECT v.* 
FROM tblSiteVisits v 
JOIN tblConformedList c 
ON v.EmailAddress = c.EmailAddress 
WHERE c.Conform_Status=0 
```

因为`c.Conform_Status=0`将过滤掉所有不为 0 的行，包括具有 NULL 的行，所以无论如何都将过滤`tblSiteVisits`其中没有对应行的行- 因此只需使用.`tblConformedList``INNER JOIN`

如果您想要所有行的条目，那么您可以左连接，将 where 子句放在 on 子句中或`OR Conform_Status IS NULL`在 where 子句中添加一个。

```
SELECT v.* 
FROM tblSiteVisits v 
LEFT JOIN tblConformedList c 
ON v.EmailAddress = c.EmailAddress 
AND c.Conform_Status=0 
```

这将显示 中的每一行`tblSiteVisits`，如果可能，显示 的数据`tblConformedList`，但仅当`Conform_Status`实际为 0 时。

# c# - 当页面在asp.net C#中加载时如何使表单不可见？

> ID：11663967
> 
> 赞同：-1
> 
> 时间：2012-07-26T06:53:51.760
> 
> 标签：c#, asp.net, pageload

当页面在asp.net C#中加载时如何使表单不可见？在按钮（显示）它应该是可见的。怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T07:00:58.080

不是很清楚但是可以使用默认的页面加载功能

```
 protected void Page_Load(object sender, EventArgs e)
 {
        yourForm.visible = false;
 }

 private void your_btn_event(object sender, EventArgs e)
 {
       yourForm.visible = true;
 } 
```

# c# - 使用 Try/Catch 检查文件是否存在

> ID：11663978
> 
> 赞同：3
> 
> 时间：2012-07-26T06:54:50.670
> 
> 标签：c#, if-statement, try-catch

我对 Try/Catch 不熟悉。在下面的代码中，我有一个简单的测试来检查文件是否存在。在我的 C# 课程任务中，我必须使用 Try/Catch，但我不确定如何使用它，我是否仍应在 Try 部分中使用 if 语句，或者是否有更好的方法来检查文件是否存在里面试试？如果文件是简单的txt文件还是序列化文件，有什么区别吗？

```
if (File.Exists("TextFile1.txt"))
{
   MessageBox.Show("The file don't exist!", "Problems!", MessageBoxButtons.OK, MessageBoxIcon.Exclamation);
} 
```

我必须使用的 Try/Catch 方式

```
try
{
code to check if file exist here
}
catch
{
error message here
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-26T07:02:38.027

```
try
{
 if (!File.Exists("TextFile1.txt"))
    throw new FileNotFoundException();
}
catch(FileNotFoundException e)
{
   // your message here.
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-26T06:59:39.697

如果你想在不使用的情况下检查文件是否存在`File.Exist`，那么你可以尝试在 try 块中打开文件，然后捕获异常[FileNotFoundException](http://msdn.microsoft.com/en-us/library/system.io.filenotfoundexception.aspx)。

```
try
    {
        // Read in non-existent file.
        using (StreamReader reader = new StreamReader("TextFile1.txt"))
        {
        reader.ReadToEnd();
        }
    }
catch (FileNotFoundException ex)
    {
        MessageBox.Show("The file don't exist!", "Problems!", MessageBoxButtons.OK, MessageBoxIcon.Exclamation);
        // Write error.
        Console.WriteLine(ex);
    } 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-26T07:02:56.453

尝试这个 ：

```
try
{
   if(!File.Exist("FilePath"))
       throw new FileNotFoundException();

   //The reste of the code
}
catch (FileNotFoundException)
{
    MessageBox.Show("The file is not found in the specified location");
}
catch (Exception ex)
{
    MessageBox.Show(ex.Message);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-26T06:57:38.907

您已经在第一个片段中检查了文件的存在。没有任何必要，因为*这段*代码在`try/catch`块内。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-26T07:00:17.573

使用[`throw`](http://msdn.microsoft.com/en-us/library/1ah5wsex.aspx)：

```
try
{
    if (!File.Exists("TextFile1.txt"))
        throw (new Exception("The file don't exist!"));
}
catch (Exception ex)
{
    MessageBox.Show(ex.Message);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-26T07:00:08.157

只有在遇到意外错误或“预期”访问资源时出现错误时，才使用 try/catch。这听起来有点令人困惑，但在你的事业中，两者都没有。

但是，如果您以流的形式打开以读取文件而不检查它是否存在，则需要尝试 try..catch。

总而言之，try..catch 应该用于安全性，以及代码复杂/长度的情况。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-26T07:03:35.210

与此问题相关的以下线程将很有趣

[http://social.msdn.microsoft.com/Forums/en-NZ/winappswithcsharp/thread/1eb71a80-c59c-4146-aeb6-fefd69f4b4bb](http://social.msdn.microsoft.com/Forums/en-NZ/winappswithcsharp/thread/1eb71a80-c59c-4146-aeb6-fefd69f4b4bb)

File.Exists API 在窗口 8 中进行了更改，说明如下：

> 目前检查文件是否存在的唯一方法是捕获 FileNotFoundException。正如已经指出的那样，有一个明确的检查并且打开是一个竞争条件，因此我不希望添加任何文件存在 API。我相信 File IO 团队（我不在那个团队，所以我不确定，但这是我听说的）正在考虑让这个 API 返回 null 而不是在文件不存在时抛出。

**File.Exists 的方法不是线程安全的，它已从 Windows 8 的 API 中删除。所以只需捕获 FileNotFoundException**

# unit-testing - 如何等待服务器启动并从 Jenkins/Hudson 运行单元测试

> ID：11663981
> 
> 赞同：5
> 
> 时间：2012-07-26T06:55:12.040
> 
> 标签：unit-testing, ant, junit, web, jenkins

这是一个很简单的问题。我发布这个是因为我无法得到任何令人满意的答案。首先是背景：我有 Jenkins 工作，负责构建 Web 应用程序并将其部署到服务器上。服务器需要一些时间（大约 5 到 10 分钟）。我想设置一个作业（或根据需要修改现有的）来安装单元测试用例执行，这将测试应用程序。我正在考虑以下方法。我希望您验证或建议任何替代方案：

*   有一个等待固定时间的 Ant 目标
*   有一个自定义的 Ant 目标，它可以 ping URL 并检查应用程序的可用性

在此先感谢您的帮助。-瓦迪拉杰。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T07:41:14.127

等待固定时间的问题是，您选择的时间要么太短（构建失败），要么太长（浪费构建时间）。所以我认为最好检查应用程序是否可用。

我为我的 Selenium 测试做了类似的事情。我不得不等到 Selenium 远程服务器启动。我使用了`waitfor`元素。有关详细文档，请参见[此处](http://ant.apache.org/manual/Tasks/waitfor.html)。

这是我的 ant-Target 的精简版：

```
<parallel>
  <sequential>
    ... Start web application server ...
  </sequential>
  <sequential>
    <waitfor maxwait="10" maxwaitunit="minute">
      <socket server="localhost" port="8080" />
    </waitfor>
    <junit>
    ...
    </junit>
  </sequential>
</parallel> 
```

如果您的服务器在部署 Web 应用程序之前可用，您可以尝试使用`http`条件而不是`socket`检查 HTTP 错误代码。条件在[此处](http://ant.apache.org/manual/Tasks/conditions.html)记录。

# python - 如何使用 python 脚本连接到 MS SQL 数据库

> ID：11663988
> 
> 赞同：0
> 
> 时间：2012-07-26T06:55:53.413
> 
> 标签：python, sql-server, sql-server-2008

> **可能重复：**
> [使用 python 或 ironpython 访问 mssql 的最简单方法是什么？](https://stackoverflow.com/questions/289978/whats-the-simplest-way-to-access-mssql-with-python-or-ironpython)

我想使用 python 脚本 2.6 版本连接到 MS SQL 数据库。

脚本在同一系统上运行，即在 Windows Server 2008 上。连接到数据库后，我想在表上读取和写入数据。

非常感激任何的帮助

# php - google map api 3 使用叠加层选择地点类型

> ID：11663989
> 
> 赞同：0
> 
> 时间：2012-07-26T06:55:58.360
> 
> 标签：php, javascript, android, google-maps-api-3, overlay

我正在为 android webview 开发 google map api 3 并设法从 mysql 数据库动态加载地图和标记。我按照[这里](https://developers.google.com/maps/articles/phpsqlajax_v3)的教程。现在我想添加一个在地图上显示叠加层的功能。每个覆盖对应于特定类型的标记。例如：餐馆、加油站等。当用户点击该叠加层时，他/她只能在地图上看到该类型的标记。现在我的问题是我不知道从哪里开始。我的想法是更改 php 脚本：

```
SELECT * FROM markers WHERE type = type_of_desired_place 
```

我不知道将值从 javascript 传递到 php 的位置。如果用户点击该叠加层，我希望更新标记。

有人能帮我吗？我是谷歌地图的新手。如果我对某些信息有误，请纠正我。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T01:47:20.937

你需要的是使用[MarkerManager](http://code.google.com/p/google-maps-utility-library-v3/source/browse/tags/markermanager/0.1/src/markermanager.js?r=31)，然后一旦你有你的别针，你需要有一个点击覆盖的触发器。一旦关闭，您需要使用 Ajax 对您的 Mysql 服务器进行新查询，并提供所需信息的新详细信息。

我使用的是 jQuery Ajax，您使用 Ajax 将信息发布到 PHP 页面，该页面将解析请求并返回正确的数据以重新编译您的引脚。

很抱歉，我不能告诉你步骤的每一个细节，但是解释起来很长，但是如果你开始朝那个方向前进，你就会开始行动，并且能够一次提出更小的步骤。

祝你好运！

# c++ - 在元组c ++的双端队列中进行比较

> ID：11663992
> 
> 赞同：0
> 
> 时间：2012-07-26T06:56:23.823
> 
> 标签：c++, multithreading, boost, compare, deque

我有这个元组双端队列：

```
 deque<boost::tuple<ppa::Node*, ppa::Node*, ppa::Node*, bool> > deque_wait; 
```

我希望能够将这些元素与其他元素一一进行比较：

```
deque<boost::tuple<ppa::Node*, ppa::Node*, ppa::Node*, bool> > deque_done; 
```

这是因为我想看看哪些节点已经完成，然后让一个线程在列表中选择下一个并用它做一些事情，我拥有的代码是这样的：

试图做这样的事情：

```
 bool tuple_compare(boost::tuple<ppa::Node*, ppa::Node*, 
 ppa::Node*, bool> &tuple_to_check)
 {
  for(int i = 0; i < deque_wait.size(); i++) {

      boost::tuple<ppa::Node*, ppa::Node*, ppa::Node*, bool> tuple_compare = deque_wait.at(i);
      ppa::Node *father = boost::get<0>(tuple_compare);
      ppa::Node *son = boost::get<0>(tuple_compare);
      ppa::Node *second_son = boost::get<2>(tuple_compare);

      bool has_seq = boost::get<3>(tuple_compare);

      cout << "checking " << boost::get<1>(tuple_to_check)->get_name() << " "
              << boost::get<2>(tuple_to_check)->get_name() << " " 
              << boost::get<0>(tuple_compare)->get_name() << endl;
  }

  return true; 
```

}

线程函数：

```
 void wait_function(void)
 {
  try {

  } catch (boost::lock_error &le)
  {
      cout << le.what() << " from " << boost::this_thread::get_id() << endl;
  }

  } 
```

我知道需要互斥体，我已经计划好了，现在我只需要知道如何将双端队列的元素与其他元素进行比较，看看它们是否满足某些条件并运行它们，现在的比较正在与排序功能，如：

```
sort(deque_wait.begin(), deque_wait.end(), tuple_compare); 
```

因为我虽然可以使用这个函数来比较两个双端队列，所以总而言之，我想做的是将 deque_done 的第一个元素与所有等待进行比较，如果满足条件，则将 bool 更改为 true，它们是不同的完成并等待，我想检查它们的原因是因为这是一个树状结构有一个父节点和 2 个儿子，所以每个元组都是这样，一个父节点和 2 个儿子，我需要看看哪些儿子有一个序列准备好做和哪些不是让线程来接它，是否需要其他东西（如向量或另一个双端队列）并不重要，所以在这种情况下价格并不重要，谢谢。（：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T10:34:56.837

好的，让我们试一试：

> 我想要做的是将 deque_done 的第一个元素与所有等待进行比较，如果满足条件，则将 bool 更改为 true，

在这里调用`sort()`不是你需要的——它在技术上将 deque_wait 的每个元素相互比较，并根据结果对它们进行排序。要将一个给定值与每个双端队列元素进行比较，您应该尝试`std::find()`or `std::find_if()`。

```
//Helper functor to compare:
struct tuple_compare
{
  //note: maybe it could use some const's
  tuple<...>& value;
  tuple_compare(tuple<...>& to_compare) : value(to_compare) {}
  bool operator()(tuple<...>& second) const
  {
    //do anything to compare the original value with the given parameter
  }
};

deque<...>::iterator pos = find_if(deque_wait.begin(),deque_wait.end(),tuple_compare(deque_done.front()));
if(pos!=deque_wait.end())
  //... 
```

# windows-8 - 关闭窗口 ui 消息弹出窗口

> ID：11663993
> 
> 赞同：0
> 
> 时间：2012-07-26T06:56:30.013
> 
> 标签：windows-8, winjs

我正在使用 javascript 为我的 windows 8 应用程序显示一条弹出消息，如下所示

```
var msg = new Windows.UI.Popups.MessageDialog("No internet connection has been found.");
msg.commands.append(new Windows.UI.Popups.UICommand("Try again", commandInvokedHandler));
msg.commands.append(new Windows.UI.Popups.UICommand("Close", commandInvokedHandler));
msg.defaultCommandIndex = 0;
msg.cancelCommandIndex = 1;
msg.showAsync(); 
```

现在我想在一段时间后以编程方式关闭弹出消息，因为用户没有给出任何输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T12:00:43.117

我认为这种消息弹出窗口没有隐藏/关闭/取消命令。按下键盘上的退出键时会调用取消命令。这些类型的消息不用于信息目的。您应该改用“FlyOut”。

**HTML：**

```
<!-- Define a flyout in HTML as you wish -->
<div id="informationFlyout" data-win-control="WinJS.UI.Flyout">
    <p>
        Some informative text
    </p>
</div>

<!-- an anchor for the flyout, where it should be displayed -->
<div id="flyoutAnchor"></div> 
```

**JS：**

```
 // Get an anchor for the flyout
    var flyoutAnchor = document.getElementById("flyoutAnchor"); 

    // Show flyout at anchor
    document.getElementById("informationFlyout").winControl.show(flyoutAnchor); 
```

要在设定的时间后关闭弹出窗口，您可以执行 setTimeout 并隐藏在您的代码中：

```
// execute this code after 2000ms
setTimeout(function () {

    // Fetch the flyout
    var flyout = document.getElementById("informationFlyout"); // Get the flyout from HTML

    // Check if the element still exists in DOM
    if (flyout) 
        flyout.winControl.hide(); // Dismiss the flyout

}, 2000); 
```

[在此处](http://msdn.microsoft.com/en-us/library/windows/apps/br211726.aspx)阅读有关 FlyOut 弹出窗口的更多信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-06T09:25:53.547

事实上，您可以在 showAsync 方法返回的对象上调用取消，首先以这种方式调用 messageDialog：

```
var msg = new Windows.UI.Popups.MessageDialog("No internet connection has been found.");
var asyncOperation = msg.showAsync(); 
```

然后，您可以随时致电：

```
asyncOperation.cancel(); 
```

并且 messageDialog 将被关闭。

# python - 正则表达式在正则表达式上工作，但不适用于 Python

> ID：11663995
> 
> 赞同：0
> 
> 时间：2012-07-26T06:56:40.017
> 
> 标签：python, regex

我正在尝试编写一个正则表达式来捕获电子邮件 ID。使用 regexpal.com 进行了几个小时的测试。在该站点上，它能够捕获所有电子邮件 ID。当我在 Python 中替换相同的正则表达式并执行 re.findall(pattern,line) 时，它无法捕捉到它。

正则表达式：

```
[a-zA-Z0-9-_]+[(.)?a-zA-Z0-9-_]*\s*(@|at)\s*[a-zA-Z0-9-_]+\s*(.|dot)\s*[a-zA-Z0-9-_]*\s*(.|dot)\s*e(\-)?d(\-)?u(\-)?(.,)? 
```

例子 ：

```
Line =    <TR> <TD><B>E-Mail: </B> <TD><A HREF=MailTo:*example.young@stackoverflow.edu*\>*example.young@stackoverflow.edu*</A> 
```

（在 regexpal.com 上正确突出显示）。

使用 Python：

```
 for line in f:
    print 'Line = ',line
        matches = re.findall(my_first_pat,line)
    print 'Matches = ',matches 
```

给出输出：

```
Line =    <TR> <TD><B>E-Mail: </B> <TD><A HREF=MailTo:example.young@stackoverflow.edu>example.young@stackoverflow.edu</A>

Matches =  [('@', 'd', '.', '', '', '', ''), ('@', 'd', '.', '', '', '', '')] 
```

问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T07:05:31.690

阅读以下[文档](http://docs.python.org/library/re.html#re.findall)`re.findall`：

> 如果模式中存在一个或多个组，则返回组列表

您的组仅捕获 at 符号、点等，因此这就是 re.findall 返回的全部内容。要么使用非捕获组，将整个事物包装在一个组中，要么使用`re.finditer`.

（正如@Igor Chubin 所指出的，您的正则表达式也错误地使用`.`了代替`\.`，但这并不是主要问题。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T07:04:10.993

你`\.`不能`.`在这里使用：

```
(.|dot) 
```

如果您只想说`edu`零件中的字母之间可以有连字符，则可以在不使用斜杠和分组的情况下执行此操作：

```
e-?d-?u-?[.,]? 
```

如果您`()`仅用于对符号进行分组（但不用于捕获），则必须`(?:)`改用：

```
(?:@|at) 
```

# c# - http rest api - 如何将响应字符串的字段加载到变量

> ID：11663996
> 
> 赞同：2
> 
> 时间：2012-07-26T06:56:43.383
> 
> 标签：c#, rest

我正在开发一个使用 HTTP REST API 的应用程序。我正在加载对字符串的响应，如下所示：

```
string report = "<html><head><tittle>JSLEE OC WebSerbice</title></head><body>
<code><h3>JSLEE webService received REST request:</h3>
<p>HttpRequest..............</p>
<p>X: 52 10 28 <p> Y: 32 12 32 </body></html>" 
```

我想将 X 和 Y 的值加载到其他变量，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T07:06:58.253

您很可能正在成为来自网页的 HTTP 响应。

使用[Html Agility Pack](http://htmlagilitypack.codeplex.com/)解析响应并提取您的值

# nginx - Nginx 重写规则

> ID：11663997
> 
> 赞同：0
> 
> 时间：2012-07-26T06:56:49.730
> 
> 标签：nginx

我需要编写一个通用的 nginx 规则，这样

subdomainmysite.in 被重定向到 www.subdomainmysite.in

randommysite.in 被重定向到 www.randommysite.in]

xyzmysite.in 被重定向到 www.xyzmysite.in

等等

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T11:43:35.293

```
server {
    server_name ~^(?!www\.);
    return 301 http://www.$host/;
} 
```

*   [http://nginx.org/en/docs/http/server_names.html](http://nginx.org/en/docs/http/server_names.html)
*   [http://nginx.org/r/server_name](http://nginx.org/r/server_name)
*   [http://nginx.org/r/return](http://nginx.org/r/return)
*   人 pcrepattern
*   man pcresyntax