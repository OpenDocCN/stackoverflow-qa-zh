# StackOverflow 问答 10899000-10899999

# c - 将一个 C 文件中的全局变量传递给另一个

> ID：10899004
> 
> 赞同：0
> 
> 时间：2012-06-05T14:14:50.237
> 
> 标签：c, global-variables

假设我有一个全局变量

```
 char  Dir[80];  /* declared and defined in file1.c  but not exported using extern etc */ 
```

Dir 变量是在运行时在程序的 main() 中创建的目录的名称。在这个文件中，我们操作这个变量并将它传递给在 file2.c 中定义的函数 func 这个 Dir 变量是一个目录，所有函数都在其中创建各自的日志。

而不是将此变量 n 次传递给最终调用 func() 的每个函数。我将其设为全局。

```
func(x,Dir); /* x is a  local variable in a function  */ 
```

/* 现在在 file2.c */

```
void func(int x,char *Dir)
{
   /*use this variable Dir */
} 
```

我们这里收到的 Dir 的值和 file1.c 中的不一样。为什么 ？编译器：Windows 上的 gcc

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T14:30:38.747

您的代码就目前而言很好。我可以给你一个例子，说明如何在 C 中使用多个源文件，你可以与你写的内容进行比较。

给定 a`main.c`和`some_lib.c`包含`func`，您需要定义 a ，它定义了在 中定义`some_lib.h`的函数原型。`func``some_lib.c`

`main.c`：

```
#include <stdlib.h>
#include <stdio.h>
#include "some_lib.h"
/*
 * This means main.c can expect the functions exported in some_lib.h
 * to be exposed by some source it will later be linked against.
 */

int main(void)
{
    char dir[] = "some_string";

    func(100, dir);
    return EXIT_SUCCESS;
} 
```

`some_lib.c`（包含 的定义`func`）：

```
#include "some_lib.h"

void func(int x, char * dir)
{
    printf("Received %d and %s\n", x, dir);
} 
```

`some_lib.h`（包含函数原型/导出函数的声明`some_lib.c`）：

```
#ifndef SOME_LIB_H
#define SOME_LIB_H
#include <stdio.h>

void func(int x, char * dir);

#endif 
```

上面的内容应该编译为：

```
gcc main.c some_lib.c -o main 
```

这将产生：

```
Received 100 and some_string 
```

* * *

但是，如果您确实使用的是全局变量，则根本不需要传递`dir`。考虑这个修改`main.c`：

```
#include <stdlib.h>
#include <stdio.h>
#include "some_lib.h"

char dir[] = "some_string";

int main(void)
{
    func(100);
    return EXIT_SUCCESS;
} 
```

`dir`在这里定义并且可以全局访问/定义。我们需要做的就是确保它`some_lib.c`知道它的存在。然后，链接器可以在链接阶段解析此符号。`some_lib.h`需要这样定义：

```
#ifndef SOME_LIB_H
#define SOME_LIB_H
#include <stdio.h>

/*
 * The extern informs the compiler that there is a variable of type char array which
 * is defined somewhere elsewhere but it doesn't know where. The linker will
 * match this with the actual definition in main.c in the linking stage.
 */
extern char dir[];
void func(int x);

#endif 
```

`some_lib.c`然后可以像使用范围一样使用全局定义的变量：

```
#include "some_lib.h"

void func(int x)
{
    printf("Received %d and %s\n", x, dir);
} 
```

编译并运行它将产生与第一个示例相同的输出。

# c - 为什么拔掉 USB 线后 select 会返回？

> ID：10899011
> 
> 赞同：3
> 
> 时间：2012-06-05T14:15:14.860
> 
> 标签：c, usb, embedded-linux

我遇到了一些使用 select、FD_ISSET、read 等从 ttyUSB 端口读取的 linux c 代码的问题。我的调制解调器使用 FTDI 串行到 USB 电缆进行输入。问题是拔下 USB 电缆时选择解除阻塞。有没有办法阻止它这样做？

```
count = 0;
while ( g_running ) {
   FD_ZERO(&readFdSet);
   maxfd = 0;
   numTransPorts = 0;
   logger( DEBUG, "Begin g_running loop - %d", count );
   for ( i = 0; i < MAX_CONFIG_PORTS; i++ ) {
      if ( configPorts[i].commType == 1 && configPorts[i].pttyHost != NULL ) {
         FD_SET( configPorts[i].pttyHost->fd, &readFdSet );
         logger( DEBUG, "FD_SET - fd=%d, index=%d", configPorts[i].pttyHost->fd, i );
         if ( configPorts[i].pttyHost->fd >= maxfd ) {
            maxfd = configPorts[i].pttyHost->fd;
         }
         numTransPorts++;
      }
   }
   maxfd++; // add one because select check a range to n-1 file descriptors
   if ( maxfd != 0 ) { // indicates no ports are available
      logger( DEBUG, "Calling select() with %d ports and maxfd of %d", numTransPorts, maxfd );
      logger( INFO, "Waiting for input ..." );
      select( maxfd, &readFdSet, NULL, NULL, NULL ); // blocking until one available
      if( result == -1 ){
         logger( INFO, "select() error. errno: %d", errno );
      } else if ( result > 0 ){
         for ( i = 0; i < MAX_CONFIG_PORTS; i++ ) {
            if ( FD_ISSET( configPorts[i].pttyHost->fd, &readFdSet ) ) { // input is available
               logger( INFO, "Input on port %s", configPorts[i].pttyHost->serialPath );
               result = serialPortRead( buffer, configPorts[i].pttyHost->fd );
               if ( result <= 0 ) {
                  // there was an error due to the file descriptor. It
                  // probably indicates that the tty ports are no longer available
               }
            }
         }
      } else {
         logger ( INFO, "select() returns 0" );
      }
   }
   count++;
} 
```

串行端口读取：

```
int serialPortRead( char *buf, int serialHandle ) {
   //char ch;
   char *ptr;
   int res = 0;
   int bytesRead = 0;
   int i;

   logger( TRACE, "TRACE: serialPortRead() with fd = %d", serialHandle );

   ptr = buf;

   // try 3 times
   for ( i = 0; i < 3; i++ ) {
      while ( (res = read( serialHandle, ptr, 1 )) > 0 ) { // read 1 byte at a time
         if ( *ptr == 0x0d ) { //there is 0x0d as a terminate byte from ECR
            break;
         }
         ptr += res;
      }
      if ( res < 0 && errno == EAGAIN ) {
         continue;
      } else {
         break;
      }
   }

   *ptr = 0x00; // set 0x00 as a terminate byte
   //   pthread_mutex_unlock(&g_serial_trans_mutex);
   if ( res < 0 ) {
      // if res is -1, there is an error
      bytesRead = -1;
      logger( DEBUG, "serialPortRead error. errno = %d", errno );
   } else {
      bytesRead = (int) (ptr - buf);
      logger( DEBUG, "serialPortRead %d bytes", bytesRead );
   }

   return bytesRead;
} 
```

当 USB 电缆拔出时，select() 解除阻塞，暗示输入可用，FD_ISSET 返回真。在 serialPortRead 中，read() 将返回已读取的零字节。然后它循环回到 select() 再次解除阻塞，说输入可用，依此类推。因此，您会得到 select() 的无限循环，FD_ISSET 返回 true，fd 永远不会被清除，read 返回 0 等等。我怎样才能解决这个问题？我期望的行为是，当没有什么要读的时候，select 不会错误地解除阻塞？

NOTE: when select unblocks it returns a positive number

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T14:28:49.190

`select()`正在返回，因为有信息要读取 - 在这种情况下，文件描述符已到达“文件结尾”的事实。这通过`read()`返回来表示`0`。

`read()`返回时，`0`您应该关闭相应的文件描述符。

# excel - 在 Access/Excel VBA 中创建字典类型的结构？

> ID：10899012
> 
> 赞同：2
> 
> 时间：2012-06-05T14:15:18.753
> 
> 标签：excel, ms-access

我想声明这样的东西：

```
dictionaryItem = {("Key1", "Value1"}, {"Key2", "Value2"} ... } 
```

但无法正确使用语法。如果不是，我想创建两个具有初始值的数组（但无论我如何尝试编写它都无法使其工作）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T14:24:34.850

在我看来，您正在描述一个脚本字典。看看这是否令人满意。

```
Dim dct As Object
Set dct = CreateObject("Scripting.Dictionary")
dct.Add "Key1", "Value1"
dct.Add "Key2", "Value2"
Debug.Print dct.Count
Debug.Print dct("Key1")
Debug.Print dct("Key2")
Set dct = Nothing 
```

# drupal - 以 XML 或 JSON 格式导出 Web 表单数据

> ID：10899013
> 
> 赞同：0
> 
> 时间：2012-06-05T14:15:27.903
> 
> 标签：drupal, drupal-6, drupal-modules

我是 Drupal 的新手。现在我正在使用 webform 来存储用户输入数据，并且我想以 XML 或 JSON 格式导出数据，但我似乎在网络上找不到任何解决方案。

有任何想法吗？

或者任何替代解决方案（不必使用Webform输入数据。只要我能找到一种方法以类似的方式将数据存储到数据库中，并使用XML或JSON输出存储的数据）？

我正在使用 Drupal 6（D7 的数据库表让我感到困惑）

最初，我们使用 excel 来存储具有不同列的数据行。并且客户端必须通过调用特定的行来不断地检索信息。由于excel文件有多张表，使用excel存储数据效率不高，相关行更新困难。

我的任务是建立一个数据库来存储数据并在客户请求时输出它们。因为它应该是一个内部系统，所以我计划用 Drupal 构建它，这样它会很容易管理，但是以 XML 或 JSON 格式输出数据对于允许其他软件在不使用 Drupal 的情况下访问数据非常有帮助。

我希望我的描述很清楚，如果有任何令人困惑的地方，请告诉我。

# xpages - 将当前页面保存在 xPages 的范围变量中？

> ID：10899016
> 
> 赞同：0
> 
> 时间：2012-06-05T14:15:33.850
> 
> 标签：xpages

在我的用户完成表单后，我希望他们返回到他们在完成/编辑表单之前所在的页面。如何将当前页面保存在 xPages 的范围变量中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T16:04:17.323

使用以下方法获取当前位置：(xpagescheatsheet.com) 完整路径，包括页面名称 facesContext.getExternalContext().getRequest().getRequestURI()，将其存储在 sessionScope 变量中，然后根据需要使用该值重定向用户。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T14:23:19.327

您是否尝试过使用内置的上一页功能？

选择按钮，转到事件选项卡并创建一个 onclick 事件，在下拉列表中选择 openPage 事件。里面有一个“previousPage”选项作为要移动到的页面。

如果您有一些自定义用例，那么为什么不在 XPage 上的“beforePageLoad”事件中填充一个范围并对其进行硬编码，或者在自定义控件中从 URL 中找出它。您必须将其保留在表单页面之外，否则在任何有链接/按钮移动到另一个页面的地方运行脚本

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T17:31:27.933

在视图的 afterpageLoad 事件中添加以下代码：

```
sessionScope.put('webFrom',context.getUrl().getSiteRelativeAddress(context)) 
```

将以下代码添加到链接/按钮的 onClick 事件中，以重定向用户：

```
var redirectToPage = sessionScope.get('webFrom')||'';
redirectToPage != ''? context.redirectToPage(redirectToPage):context.redirectToHome() 
```

# php - 在 CakePHP 中从 FLASH 上传图片

> ID：10899023
> 
> 赞同：0
> 
> 时间：2012-06-05T14:15:54.653
> 
> 标签：php, actionscript-3, flash, cakephp

我在处理从我的 Flash 应用程序创建的图像时遇到问题，它通过原始发布数据发送数据，并将图像写入我的 /webroot 文件夹。

这是我在“AvatarController.php”文件中的 php 代码。

```
public function uploadImage()
{
    $this->autoRender = false; // no view file

    if ($this->request->is('post')) // if post data
    {
        $aUser = $this->aCurrentUser(); // gets user info

        if ( isset ( $GLOBALS["HTTP_RAW_POST_DATA"] )) // gets raw post data
        {
            $sImgName = $aUser['User']['username'] . '_full' . '.png';

            $fp = fopen($sImgName, "wb");
            fwrite( $fp, $GLOBALS[ 'HTTP_RAW_POST_DATA' ] );
            fclose( $fp );
        }

    }
} 
```

我遇到的麻烦是将其保存到不同的文件夹中，例如/webroot/avatars，我将如何调整图像大小，最终我想要做的是有三个左右的大小，例如“Username_full”， “用户名_80”，“用户名_50”；所以全尺寸，小 80%，小 50%，等等。

我从来没有处理过像这样的上传，来自闪存。

任何帮助，建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T15:15:50.423

[http://www.kavoir.com/2009/01/php-resize-image-and-store-to-file.html](http://www.kavoir.com/2009/01/php-resize-image-and-store-to-file.html)

这看起来像是一个关于调整大小/移动业务 PHP 的不错的教程。关于抓取文件本身的另一部分，请参阅这篇文章，[http:](http://www.kirupa.com/forum/showthread.php?360502-AS3-PHP-File-Upload) //www.kirupa.com/forum/showthread.php?360502-AS3-PHP-File-Upload你正在做的事情可能有效，但我只是倾向于使用 $_FILES 变量，因为我很清楚那里会有什么。

# objective-c - 将 UISplitViewController 作为子视图添加到 UIViewController

> ID：10899024
> 
> 赞同：0
> 
> 时间：2012-06-05T14:16:03.987
> 
> 标签：objective-c, uiviewcontroller, uisplitviewcontroller

我被困在我的 ipad 项目中。现在我有一个 UIViewController，我想将 UISplitViewController 添加为子视图。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T14:23:37.590

```
[myViewController.view addSubview:mySplitviewController.view]; 
```

这是你要找的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T15:10:30.367

在 Xcode 中，单击包含 UIViewController 的 Storyboard，将 UISplitViewController 拖到 Storyboard 上，然后在 UIViewController 和 UISplitViewController 之间控制拖动一个 segue。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-05T01:42:10.103

```
[myViewController.view addSubview: mySplitviewController.view];
[myViewController addChildViewController: mySplitviewController]; 
```

# linq-to-entities - 如何将实体框架 4.3 中的 Include 方法用于抽象类型？

> ID：10899025
> 
> 赞同：0
> 
> 时间：2012-06-05T14:16:06.613
> 
> 标签：linq-to-entities, entity-framework-4.1, poco

我有一个 Order 类，它链接到一个抽象类型的 OrderLine 列表。

我想在 OrderLine 的其中一个子类上发出 Include，例如 ProductOrderLine，它上面有 Product 属性：

就像是：

```
data.Orders.Include(x=>x.Lines).Include("Lines.Product"); 
```

显然这会导致失败，所以我需要一种指定子类型的方法。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T15:25:05.057

[不支持](http://data.uservoice.com/forums/72025-entity-framework-feature-suggestions/suggestions/1249289-include-property-of-derived-classes)包括继承层次结构。您只能包含来自基本类型的属性。

# ms-word - 如何使用“antiword”读取包含间隙 i 文件名的文件？

> ID：10899031
> 
> 赞同：0
> 
> 时间：2012-06-05T14:16:19.083
> 
> 标签：ms-word, file-get-contents, file-format, file-conversion, readfile

我正在使用“antiword”将 MSword 文档转换为文本。我有一个名为“care job house keeper catering job13806.doc”的文件，如果在脚本中传递，antiword 无法读取此文件。

```
 public function Convert($filenames) {         
    return $content = shell_exec('antiword'." ".$filenames.' -');//dash at the end to output content        
} 
```

如果通过键入 antiword 并在文件名几个字符后按 Tab 手动输入文件名，它将如下所示并完美执行。

```
$ antiword care\ job\ housekeeper\ catering\ job13806.doc 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T14:21:41.763

使用引号：

```
shell_exec("antiword '$filename' -"); 
```

那会产生：

```
antiword 'care job housekeeper catering job13806.doc' - 
```

# applescript - 提取作者价值 id 属性

> ID：10899047
> 
> 赞同：0
> 
> 时间：2012-06-05T14:17:03.613
> 
> 标签：applescript

我正在尝试从 Mac Twitter 应用程序中的推文中获取作者 ID。

```
tell application "Twitter"
properties of item 3 of status of (home timeline of account 1)
end tell 
```

![在此处输入图像描述](../Images/eda78220dae56060e34eb9a936393a5e.png)

```
tell application "Twitter"
author of item 3 of status of (home timeline of account 1)
end tell 
```

![在此处输入图像描述](../Images/ce129f8df68654c87086849d2c3bb785.png)

如何隔离“128938832”？

解决方案：AppleScript-Users 邮件列表中的 Chris 刚刚回答了我的问题。author 属性有一个 user id 属性。`user id of author of item 3 of status of (home timeline of account 1)`返回“128938832”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T18:00:05.950

我没有 Twitter，但如果没有获取作者 ID 的条款，您可能会通过强制错误并从错误消息中提取数字来作弊，例如：

```
tell application "Twitter" to try
    (author of item 3 of status of (home timeline of account 1)) as number -- force error
on error errmess -- extract info from the error message
    set here to (offset of quote in errmess) + 1 -- first quote
    set there to here + (offset of quote in (text here thru -1 of errmess)) - 2 -- second quote
    set authorID to text here thru there of errmess
end try 
```

# android - 如何在android中将字符串转换为位图

> ID：10899048
> 
> 赞同：0
> 
> 时间：2012-06-05T14:17:04.933
> 
> 标签：android

> **可能重复：**
> [如何在 Android 中通过 URL 加载 ImageView？](https://stackoverflow.com/questions/2471935/how-to-load-an-imageview-by-url-in-android)

如何在android中将字符串转换为位图。我在字符串中获取url值。我想在imageview中设置bimap有人能告诉我该怎么做吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T14:28:30.160

我建议使用[Prime](https://github.com/DHuckaby/Prime)，我将它用于所有图像加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T14:29:18.233

[这个答案](https://stackoverflow.com/questions/2471935/how-to-load-an-imageview-by-url-in-android)有基本的方法。本质上，您需要先从 URL 下载图像，然后您可以将其设置为`ImageView`，将其保存到手机的 SD 卡等。

如果您喜欢查看其他人的源代码，[这个 GitHub 项目](https://github.com/nostra13/Android-Universal-Image-Loader)将向您展示如何在本地存储图像以供重复使用、在后台线程中运行图像下载、为`ListView`s 下载多个图像等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T14:21:09.080

这个[线程](https://stackoverflow.com/questions/6407324/how-to-get-image-from-url-in-android)，尤其是这个[答案](https://stackoverflow.com/a/6407554/738614)可以帮助你。

但你也必须关心图片。以后要重用吗？在这种情况下，您可以将其保存在缓存中。

# ruby-on-rails - 在 Red Hat Enterprise 服务器上安装 Savon gem 时出现问题

> ID：10899051
> 
> 赞同：0
> 
> 时间：2012-06-05T14:17:31.020
> 
> 标签：ruby-on-rails, ruby, web-services, libxml2, savon

我正在使用 web 服务从 ruby​​ on rails 应用程序与 ERP 通信，使用`Savon`. 我能够在我本地的 Fedora 机器上安装 Savon gem。但我无法在生产服务器上安装它。它给出以下错误：-

```
ERROR:  Error installing savon:
    ERROR: Failed to build gem native extension.

/opt/ruby-enterprise-1.8.7-2010.02/bin/ruby extconf.rb
checking for libxml/parser.h... no
-----
libxml2 is missing.  please visit http://nokogiri.org/tutorials/installing_nokogiri.html for help with installing dependencies.
-----
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options. 
```

试图重新安装`libxml2`，但这也给出了错误。谁能帮我调试这个问题？

提前致谢.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T12:20:18.623

原因就在错误消息中：

> 缺少 libxml2。请访问[http://nokogiri.org/tutorials/installing_nokogiri.html](http://nokogiri.org/tutorials/installing_nokogiri.html)
> 以获取安装依赖项的帮助。

他们甚至提供红帽指南。

# java - Java中的二维数组

> ID：10899055
> 
> 赞同：-1
> 
> 时间：2012-06-05T14:17:57.723
> 
> 标签：java, arrays

只是一个简单的问题 - 如果我像这样实例化一个新的二维 int 数组

```
int[][] input = new int[101][]; //number is irrelevant 
```

eclipse 似乎不介意这一点，但我不完全确定这是否会像我期望的那样工作，即数组的第二部分将动态运行。

阅读您的答案后，我意识到我的问题措辞不当。

我正在从一个文件中读取 - 它是一个 CSV，有 101 列和 X 行。由于我正在逐行读取文件，因此我很容易发现我的“二维数组”的第一个维度是 101。但是，也因为我正在逐行读取文件，我不能肯定地说我的第二维将是 X 而不遍历整个文件。

我如何使用我当前的方法找到 X，或者这实际上是不可能的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T14:20:16.180

然后你会有 101 个元素，`input`其中都是`null`. 要创建第二个维度，您需要为每个项目初始化它：

```
input[13] = new int[63];
input[14] = new int[128]; 
```

对于所有第一级项目，第二个维度不需要相同。如果你使用这个，第二个维度*将是相同的：*

```
int[][] input = new int[101][50]; 
```

然后将所有值初始化为`0`.

但真正的答案是：你为什么不试试？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T14:21:03.730

我猜您正在寻找长度可变的第二维，在这种情况下，您不妨将其设为数组数组，从而使您能够定义每行的长度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T14:21:55.570

Java 仅支持*锯齿数组*，这意味着所有维度都不会自动初始化，但您必须自己初始化它们：

```
for (int i = 0; i < input.length; ++i)
    input[i] = new int[42]; // or anything else. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T14:24:47.350

正如其他答案所指出的，Java 只有“锯齿状”数组——换句话说就是数组的数组。

```
int[][] input = new int[101][]; 
```

您的代码在这里所做的是创建一个 101 个元素的数组`int[]`。因为`int[]`是`Object`，所以每个元素都被初始化为`null`。然后，您需要先设置每个`int[]`元素，然后才能使用它：

```
input[0] = new int[4]; 
```

有*一种*快捷语法可以让您快速将内部数组全部初始化为一个大小：

```
int[][] input = new int[101][4]; 
```

这将创建一个 4 元素数组的 101 元素数组`int`（初始化为`0`）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-05T14:25:04.710

从技术上讲，Java 没有“二维”数组的概念。它所拥有的以及您编写的内容是一个数组数组 - 它允许您拥有锯齿状数组。

通过编写一些东西`new int[3][]`，您基本上说我有一个数组数组，您可以将其概念化为`[null,null,null]`因为您还没有初始化任何实际的“内部”数组。此时您需要执行类似的操作

```
input[0] = new int[3]
input[1] = new int[3]
input[2] = new int[3] 
```

然后您可以将其概念化为 [[0,0,0],[0,0,0],[0,0,0]]。

写作`new int[3][3]`实现了同样的目标。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-05T14:25:49.967

Eclipse 不介意您没有初始化第二维。在您的方法中，您应该初始化每个子数组：int[1]、int[2] 等。

# asp.net - 在 ASP.NET 中的数据中继器内绑定数据中继器

> ID：10899062
> 
> 赞同：2
> 
> 时间：2012-06-05T14:18:38.383
> 
> 标签：asp.net, data-binding, repeater, nested-repeater

我现在正在学习.NET，如果这是一个愚蠢的问题，请原谅我。

我有两个 MSSQL 表，一个称为“Comment”，另一个称为“CommentAdditionalAuthor”。Comment 表包含来自评论表单的数据，例如评论标题、日期、主要作者姓名等。CommentAdditionalAuthor 表包含有关对评论做出贡献的其他作者的信息。所以那里是一对多的关系——每条评论都可以有一个或多个额外的作者。

我有一个转发器控件，它绑定来自 Comment 表的数据，效果很好。现在我想做的是在评论旁边输出作者的详细信息。如此有效地成为中继器中的中继器。

我已尝试尽可能多地清理此代码，但很抱歉它仍然很长，因为我想让它与我正在做的事情保持相关，以便我希望能够理解解决方案。找到了其他示例后，我正在努力实现它们，因为它们以不同的方式绑定到数据，我只是无法在我的应用程序中使用。

aspx文件中的代码是这样的：

```
<div id="comments">
    <asp:Repeater ID="rptComments" runat="server">
    <ItemTemplate>
        <div class="comment-data">
            <h3 class="item">Submitted to <%# GetPageDetails(Eval("nodeid")) %> article on <%# Eval("created") %></strong></h3>
            <p class="item"><strong>Name</strong> <%# Eval("firstname") %> <%# Eval("surname") %></p>
            <p class="item"><strong>Occupation</strong> <%# Eval("occupation") %></p>
            <p class="item"><strong>Affiliation</strong> <%# Eval("affiliation") %></p>
            <p class="item"><strong>Email</strong> <a href='mailto:<%# Eval("email") %>'><%# Eval("email") %></a> <em>Publish email: <%# Eval("publishemail") %></em></p>
            <p class="item"><strong>Competing interests?</strong> <%# Eval("competingintereststext") %>&nbsp;</p>
            <p class="item"><strong>eLetter title</strong> <%# Eval("title") %></p>
            <p><%# Eval("comment").ToString().Replace("\n", "<br/>")%></p>

            <!-- This is what I want to do, but can't get it to bind: -->
            <div class="additional-authors">
                <h3>Additional authors</h3>
                <asp:Repeater id="rptAdditionalAuthors" runat="server">
                    <ItemTemplate>
                        <%# Eval("firstnameother")%><br>
                        <%# Eval("surnameother")%><br>
                        <%# Eval("occupationother")%><br>
                        <%# Eval("affiliationother")%><br>
                        <%# Eval("emailother")%><br>
                    </ItemTemplate>
                </asp:Repeater>
            </div>

        </div>                
    </ItemTemplate>
</asp:Repeater> 
```

这就是代码隐藏的作用：

```
 private void BindData()
    {
        var rr = _sqlHelper.ExecuteReader(string.Format("select * from comment {0} order by created desc", Filter));

        var commentDt = new DataTable("Comments");
        commentDt.Columns.Add("id", Type.GetType("System.Int32"));
        commentDt.Columns.Add("nodeid", Type.GetType("System.Int32"));
        commentDt.Columns.Add("firstname", Type.GetType("System.String"));
        commentDt.Columns.Add("surname", Type.GetType("System.String"));
        commentDt.Columns.Add("occupation", Type.GetType("System.String"));
        commentDt.Columns.Add("affiliation", Type.GetType("System.String"));
        commentDt.Columns.Add("title", Type.GetType("System.String"));
        commentDt.Columns.Add("email", Type.GetType("System.String"));
        commentDt.Columns.Add("publishemail", Type.GetType("System.Boolean"));
        commentDt.Columns.Add("competinginterests", Type.GetType("System.Boolean"));
        commentDt.Columns.Add("competingintereststext", Type.GetType("System.String"));
        commentDt.Columns.Add("comment", Type.GetType("System.String"));
        commentDt.Columns.Add("statusid", Type.GetType("System.Int32"));
        commentDt.Columns.Add("spam", Type.GetType("System.Boolean"));
        commentDt.Columns.Add("ham", Type.GetType("System.Boolean"));
        commentDt.Columns.Add("created",Type.GetType("System.DateTime"));

        while (rr.Read())
        {
            var dr = commentDt.NewRow();
            dr["id"] = rr.GetInt("id");
            dr["nodeid"] = rr.GetInt("nodeid");
            dr["firstname"] = rr.GetString("firstname");
            dr["surname"] = rr.GetString("surname");
            dr["occupation"] = rr.GetString("occupation");
            dr["affiliation"] = rr.GetString("affiliation");
            dr["title"] = rr.GetString("title");
            dr["email"] = rr.GetString("email");
            dr["publishemail"] = rr.IsNull("publishemail") == true ? false : rr.GetBoolean("publishemail");
            dr["competinginterests"] = rr.IsNull("competinginterests") == true ? false : rr.GetBoolean("competinginterests");
            dr["competingintereststext"] = rr.GetString("competingintereststext");
            dr["comment"] = rr.GetString("comment");
            dr["statusid"] = rr.GetInt("statusid");
            dr["spam"] = rr.IsNull("spam") == true ? false : rr.GetBoolean("spam");
            dr["ham"] = rr.IsNull("ham") == true ? false : rr.GetBoolean("ham");
            dr["created"] = rr.GetDateTime("created");

            commentDt.Rows.Add(dr);

            /* My failing attempt at the second bind:
            var rrAuthor = _sqlHelper.ExecuteReader(string.Format("select * from CommentOtherAuthor WHERE commentid = 81"));

            var otherAuthorDt = new DataTable("OtherAuthors");
            otherAuthorDt.Columns.Add("firstname", Type.GetType("System.String"));
            otherAuthorDt.Columns.Add("surname", Type.GetType("System.String"));
            otherAuthorDt.Columns.Add("occupation", Type.GetType("System.String"));
            otherAuthorDt.Columns.Add("affiliation", Type.GetType("System.String"));
            otherAuthorDt.Columns.Add("email", Type.GetType("System.String"));

            while (rrAuthor.Read())
            {
                var drAuthor = otherAuthorDt.NewRow();
                drAuthor["firstnameother"] = rr.GetString("firstname");
                drAuthor["surnameother"] = rr.GetString("surname");
                drAuthor["occupationother"] = rr.GetString("occupation");
                drAuthor["affiliationother"] = rr.GetString("affiliation");
                drAuthor["emailother"] = rr.GetString("email");
                otherAuthorDt.Rows.Add(drAuthor);
            }
            rptAdditionalAuthors.DataBind();
            */
        }

        var pgitems = new PagedDataSource
            {
                DataSource = commentDt.DefaultView,
                AllowPaging = true,
                PageSize = 25,
                CurrentPageIndex = CurrentPage
            };

        rptComments.DataSource = pgitems;
        rptComments.DataBind();

        if (pgitems.PageCount > 1)
        {

            var pages = new ArrayList();
            for (var i = 0; i < pgitems.PageCount; i++)
                pages.Add((i + 1).ToString());

            rptPages.DataSource = pages;
            rptPages.DataBind();
            rptPages.Visible = true;
        }
        else
        {
            rptPages.Visible = false;

        }
    } 
```

由于我设置了第二个中继器，代码隐藏的东西不起作用，但是如果我删除所有这些东西，第一个中继器就可以工作。我认为最好将其保留在那里，这样您就可以看到我的“逻辑”（可能不是很合乎逻辑；））。另外值得注意的是，在第二个数据集中，我对其进行了硬编码，以获取 id 为 81 的其他作者详细信息——这只是为了让中继器工作——显然我需要用 Comment 表中的 id 值替换它，获取循环中当前评论的作者。

如果有人可以帮助我使第二个中继器正常工作，我将不胜感激。目前它已经超出了我的学习曲线的边缘！

谢谢各位！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T14:20:31.887

有几篇关于嵌套中继器的在线文章，包括[这篇](http://support.microsoft.com/kb/306154)文章。

本质上，您需要首先创建 DataSet 并在代码隐藏中定义 DataTables 之间的关系，然后将子转发器绑定到子行。上面链接的文章有一个完整的工作示例，很容易修改。

如果该文章不适合您的需要，请尝试[其中之一](http://www.bing.com/search?q=nested%20repeaters&form=CMDTDF&pc=CMDTDF&src=IE-SearchBox)。

# asp.net - 我可以将 asp.net 放在 css 中吗？

> ID：10899066
> 
> 赞同：0
> 
> 时间：2012-06-05T14:18:57.977
> 
> 标签：asp.net, css, internet-explorer-8

我需要一个独立的搜索页面，我已经建立了独立于母版页和 master.vb 的页面，但是 .vb 文件中有信息我相信它对 ie8 的下拉菜单有一个修复，我需要它这个独立的页面（它应该看起来像网站的其余部分，并且确实如此，除了下拉菜单不能正常工作）。

这是 master.vb 文件中的代码：

```
 Dim ie8 As New HtmlMeta
    ie8.HttpEquiv = "X-UA-Compatible"
    ie8.Content = "IE=7"
    h.Controls.AddAt(0, ie8) 
```

我认为这是使下拉菜单在 ie8 中正确呈现的代码。目前它的行为就像基本上没有 css 一样，有没有办法可以通过顶部的一些 css 将它添加到我的独立页面？非常感谢您能给我的任何帮助，就像可能的那样，我对这类事情知之甚少。:)

顺便说一句，下拉菜单在 IE8 的兼容模式下工作，但想找到我们为主站点提供的解决方案，该解决方案在不打开兼容模式的情况下也能正常工作。提前感谢您的帮助 - 如果可以的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:21:37.167

你不能在 CSS 中做到这一点。您需要在搜索页面的头部添加一个元标记。

```
<head>
<meta http-equiv="X-UA-Compatible" content="IE=7" />
</head> 
```

# c# - 设计视图问题

> ID：10899067
> 
> 赞同：1
> 
> 时间：2012-06-05T14:18:59.040
> 
> 标签：c#, asp.net, visual-studio-2008

如何使我的“datalist”控件在**设计视图中****可见**？

 **我知道它存在，该站点运行完美，并且 C# 代码引用它，以及 asp 代码，但是，我在设计视图中找不到它。请指教。

谢谢！安娜

后期编辑（有人建议我发布代码）：

```
<asp:DataList ID="DataList1" runat="server">
<ItemTemplate>

    <table class="style1">
        <tr>
            <td>
                Name:</td>
            <td>
                <asp:HyperLink ID="HyperLink1" runat="server" 
                    NavigateUrl='<%# MyLinkGen.ToFilm(Eval("fid").ToString()) %>'
                    Text='<%# HttpUtility.HtmlEncode(Eval("name").ToString()) %>'></asp:HyperLink>
            </td>
        </tr>
        <tr>
            <td>
                &nbsp;</td>
            <td>
                <asp:Image ID="Image1" runat="server" 
                    ImageUrl='<%# String.Format("~/img/{0}.jpg",Eval("imgpath1")) %>' />
            </td>
        </tr>
        <tr>
            <td>
                Directed by:</td>
            <td>
                <asp:Label ID="Label2" runat="server" 
                    Text='<%# HttpUtility.HtmlEncode(Eval("director").ToString()) %>'></asp:Label>
            </td>
        </tr>
        <tr>
            <td>
                Actors:</td>
            <td>
                <asp:Label ID="Label3" runat="server" 
                    Text='<%# HttpUtility.HtmlEncode(Eval("actors").ToString()) %>'></asp:Label>
            </td>
        </tr>
        <tr>
            <td>
                Rating:</td>
            <td>
                <asp:Label ID="Label4" runat="server" 
                    Text='<%# HttpUtility.HtmlEncode(Eval("rating").ToString()) %>'></asp:Label>
            </td>
        </tr>
        <tr>
            <td>
                Description:</td>
            <td>
                <asp:Label ID="Label1" runat="server" 
                    Text='<%# HttpUtility.HtmlEncode(Eval("descrip").ToString()) %>'></asp:Label>
            </td>
        </tr>
        <tr>
            <td>
                Price:</td>
            <td>
                <asp:Label ID="Label5" runat="server" 
                    Text='<%# Eval("price", "{0:c}") %>'></asp:Label>
            </td>
        </tr>
    </table>

</ItemTemplate>
</asp:DataList> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T14:23:48.703

一直检查每个面板、div 或表格的可见性，直到到达数据列表。此外，请检查任何容器的显示属性是否未设置为“无”。要查看的另一件事是数据行何时绑定到数据列表。如果您没有设置静态数据源，则数据列表将不会显示在设计视图中，因为数据是在页面加载时在运行时绑定的。

Visual Studio 的设计视图充其量是挑剔的，并且生成质量很差的 html、CSS 和 aspx 标记。完全停止使用它并充分学习 html 和 CSS 以便在编写代码时可视化页面确实符合每个人的最大利益。**

# android - Android 以编程方式禁用 onScroll()

> ID：10899068
> 
> 赞同：0
> 
> 时间：2012-06-05T14:19:02.583
> 
> 标签：android, onscroll

如何`onScroll()`在 Android 中以编程方式禁用？

我`onScroll()`在`ListActivity`. 现在，我需要在代码的某些部分禁用此方法。我需要它来进一步逻辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:36:25.513

无需查看任何代码：当您不希望列表滚动时，您可以将活动中的类级别变量设置为 false。您可以在 onScroll() 处理程序中检查这一点并做出相应的反应。

不过，我必须提醒你不要这样做。用户是否会理解它为什么不滚动，或者他们会因为您的应用程序已锁定而诅咒您的应用程序？

如果您能够发布一些代码，我们将能够提供更多帮助（可能会提出更好的方法）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T14:38:55.123

```
public class MyList extends ListView{
    private boolean isScrollEnabled = true;

    public void setScroll(boolean scrollEnabled){
        isScrollEnabled = scrollEnabled;
    }

    public void onScrollChanged(int l, int t int oldL, int oldT){
        if !(isScollingEnabled) return;
        super.onScrollChanged(l,t,oldL, oldT);
    } 
```

# c# - 从没有实例的类中获取字段的名称

> ID：10899071
> 
> 赞同：8
> 
> 时间：2012-06-05T14:19:18.043
> 
> 标签：c#, reflection, lambda, func

所以我使用以下实用程序从类的实例中获取字段/属性的名称......

```
public static string FieldName<T>(Expression<Func<T>> Source)
{
    return ((MemberExpression)Source.Body).Member.Name;
} 
```

这允许我执行以下操作：

```
public class CoolCat
{
    public string KaratePower;
}

public class Program
{
    public static Main()
    {
        public CoolCat Jimmy = new CoolCat();

        string JimmysKaratePowerField = FieldName(() => Jimmy.KaratePower);
    }
} 
```

当我需要字段名称的字符串表示时，这对于序列化和其他时候非常有用。

但是现在，我希望能够在没有类实例的情况下获取字段名称 - 例如，如果我正在设置一个表并希望将列的 FieldNames 动态链接到类中的实际字段（所以重构等不会破坏它）。

基本上，我觉得我只是不太了解如何完成此操作的语法，但我想它看起来像这样：

```
public static string ClassFieldName<T>(Func<T> PropertyFunction)
{
     // Do something to get the field name?  I'm not sure whether 'Func' is the right thing here - but I would imagine that it is something where I could pass in a lambda type expression or something of the sort?
}

public class Program
{
    public static Main()
    {
        string CatsPowerFieldName = ClassFieldName<CoolCat>((x) => x.KaratePower);

        // This 'CatsPowerFieldName' would be set to "KaratePower".
    }
} 
```

我希望这是有道理的——我对这个主题的词汇不是很好，所以我知道这个问题有点含糊。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T14:22:54.197

你想要做的是微软创建 System.Reflection 的原因之一试试[这个](http://www.csharp-examples.net/reflection-property-names/)：

```
using System.Reflection;  // reflection namespace

public static List<Type> GetClassPropertyNames(Type myClass)
        {
            PropertyInfo[] propertyInfos;
            propertyInfos = myClass.GetProperties(BindingFlags.Public);

            List<Type> propertyTypeNames = new List<Type>();

            // write property names
            foreach (PropertyInfo propertyInfo in propertyInfos)
            {
                propertyTypeNames .Add(propertyInfo.PropertyType);
            }

            return propertyNames;

        } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T17:41:02.937

我有两种方法可以做到这一点。

第一个是可用于任何对象的扩展方法。

```
public static string GetPropertyName<TEntity, TProperty>(this TEntity entity, Expression<Func<TEntity, TProperty>> propertyExpression)
{
    return propertyExpression.PropertyName();
} 
```

哪个像

```
public CoolCat Jimmy = new CoolCat();
string JimmysKaratePowerField = Jimmy.GetPropertyName(j => j.KaratePower); 
```

我没有对象时使用的第二个。

```
public static string PropertyName<T>(this Expression<Func<T, object>> propertyExpression)
{
        MemberExpression mbody = propertyExpression.Body as MemberExpression;

        if (mbody == null)
        {
            //This will handle Nullable<T> properties.
            UnaryExpression ubody = propertyExpression.Body as UnaryExpression;

            if (ubody != null)
            {
                mbody = ubody.Operand as MemberExpression;
            }

            if (mbody == null)
            {
                throw new ArgumentException("Expression is not a MemberExpression", "propertyExpression");
            }
        }

        return mbody.Member.Name;
} 
```

这可以像这样使用

```
string KaratePowerField = Extensions.PropertyName<CoolCat>(j => j.KaratePower); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-05T14:23:26.783

我相信在这里使用反射会很有用。我现在没有 VS，但我相信您可以执行 typeof(class).GetMembers() 之类的操作。我的倒影有点生锈。

# java - Spring Controller 重定向到另一个页面

> ID：10899072
> 
> 赞同：1
> 
> 时间：2012-06-05T14:19:18.540
> 
> 标签：java, ajax, spring, redirect, controller

嘿，我遇到了以下问题。这是 jspx 文件的内容：

```
function postSMTH() {
    $.ajax({
        type: "POST",
        url: document.getElementById("urltxt").value,
        data: parameters,

        });
}

<input type="hidden" value="${pageContext.request.contextPath}/foo/foo2/foodat" name="urltxt" id="urltxt"/>

<div class="foodat"><a href="javascript:postSMTH();"><spring:message code="foo_foo2_foodat_text" text="FOODAT"/></a></div> 
```

因此，如果我按下提交按钮，`postSMTH`则调用该函数并将 ajax 对象粘贴到控制器，如下所示：

```
@Controller
@RequestMapping(value="/foo")
public class FooController {

..............

@RequestMapping(value="/foo2", method=RequestMethod.POST)
public String homePOST(HttpServletRequest request) {
    ........
}    
@RequestMapping(value="/foo2", method=RequestMethod.GET)
public String homeGET(HttpServletRequest request) {
    ........
} 

@RequestMapping(value="/foo2/foodat", method=RequestMethod.POST)
public String doTHAT(HttpServletRequest request) {
    //  check authorization

        Map fooMap = request.getParameterMap();

        // do something in the Database, depending on the paramMap

    return "redirect:/foo/foo1";
}
} 
```

关于数据库的一切工作正常，但问题是，最后的重定向不起作用。它只是停留在 foo2 页面上。

我是Spring的新手，也许是某个地方的小错误。我只是无法自己解决。

如果有人有一些提示会很好。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T14:36:37.510

您正在使用 jquery ajax 调用进行异步表单提交。因此，在您的请求完成后，您需要使用 javascript 更改文档位置。例如，像这样：

```
$.ajax({
    type: "POST",
    url: document.getElementById("urltxt").value,
    data: parameters,
    complete: function() {
        window.location.replace(...);
      }
  }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T14:34:03.153

它没有重定向，因为您是通过 ajax 提交的。您需要自己处理重定向。也许这个非常流行的问题会有所帮助。[如何在 jQuery Ajax 调用后管理重定向请求](https://stackoverflow.com/questions/199099/how-to-manage-a-redirect-request-after-a-jquery-ajax-call)

# ios - 如何确定文件类型

> ID：10899074
> 
> 赞同：0
> 
> 时间：2012-06-05T14:19:21.173
> 
> 标签：ios, asihttprequest, file-type

我使用 ASIHTTPRequest 下载文件。该网址类似于[http://www.aaa.bbb.com:8000/showuploaddocument.aspx?docid=45](http://www.aaa.bbb.com:8000/showuploaddocument.aspx?docid=45)。所以我无法通过 url 确定文件类型。如何确定下载文件的文件类型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T14:26:33.700

我确实认为您最终只会获得数据流（原始数据），然后选择如何将其整合为有意义的东西。像：

```
NSString *aString = [[NSString alloc] initWithData:myData encoding:NSASCIIStringEncoding]; 
```

或者：

```
UIImage *aImage = [UIImage imageWithData:myData]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T15:32:11.800

可以查询服务器返回的 Content-Type 头：

```
NSString *contentType = [[request responseHeaders] objectForKey:@"Content-Type"]; 
```

这将是一个字符串，如 image/jpeg、text/plain 等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T13:55:52.870

NSURLResponse 有类似的方法

```
- (NSString *)MIMEType;
- (NSString *)suggestedFilename; 
```

# java - 迁移到数据存储 HRD 后“服务 url”是否有效？

> ID：10899077
> 
> 赞同：1
> 
> 时间：2012-06-05T14:19:28.757
> 
> 标签：java, google-app-engine, blobstore

我正在将我的应用程序从主/从迁移到 HRD，我意识到一件事：如果我完成迁移（以便旧的 GAE 主/从项目指向新的项目）所有旧的服务 url 仍然有效？

事实上，当我的网络应用程序中的用户上传图片时，我会存储此路径：

> servingUrl = ImagesServiceFactory.getImagesService().getServingUrl(blobKey);

这对我来说非常重要，因为我也在应用程序外部使用服务 url！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T03:15:50.993

只要您的旧应用程序保持活动状态，旧服务 URL 将保持有效，它们在数据存储中引用的 blob。如果您删除应用程序或 blob，则服务 URL 可能随时消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T23:04:13.487

是的，这应该仍然可以正常工作。

# python - reportlab heisenbug 疑难解答

> ID：10899078
> 
> 赞同：5
> 
> 时间：2012-06-05T14:19:39.780
> 
> 标签：python, django, pdf, reportlab

使用 Django 1.4 / Python 2.7 / reportlab（开源版本）生成pdf。

到目前为止，一切都很好。以前的 pdf 生成（如 http 请求返回/下载的生成的 pdf 文件）在 Django 1.3 上并且不向公众开放。已在许多页面上升级并免费提供功能，现在开始出现问题。

我遇到“随机”问题（正如我在日志中偶尔看到的异常），但我自己从来没有能够重现问题（大多数情况下都可以正常工作）。

我得到的是以下类型的错误，它们总是成对发生

```
 Exception Value: ParaParser instance has no attribute '_seq'
    Exception Location: /home/tss/lib/python2.7/reportlab-2.5-py2.7-linux-i686.egg/reportlab/platypus/paraparser.py in _complete_parse, line 1061 
```

接着

```
 Exception Value: 'NoneType' object has no attribute 'close'
    Exception Location: /home/tss/lib/python2.7/reportlab-2.5-py2.7-linux-i686.egg/reportlab/lib/xmllib.py in close, line 521 
```

鉴于我很难重现这一点，并且不确定我身边或报告实验室是否有问题 - 我愿意就如何解决这个问题提出建议（可能是同步问题，因为许多同时生成或只是一个普通的错误或.. .)???

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T19:27:36.977

在 reportlab 邮件列表上发布了这个问题，并且 Reportlab 不是线程安全的。

因此，如果您最终遇到间歇性问题并在多线程/Web 应用程序环境中运行，那么您将因此遇到非常奇怪的问题。

现在我需要弄清楚用什么来替换reportlab，嗯....

/ 延斯

# python - 在 1.4 中覆盖 Model __getattr__ 的适当方法

> ID：10899082
> 
> 赞同：1
> 
> 时间：2012-06-05T14:20:12.980
> 
> 标签：python, django, django-models

在 Django 1.4中覆盖 Model 类的 **getattr的适当方法是什么？**

我有一个模型结构，如：

```
class Main(models.Model):
    [blah]

class Detail(models.Model):
   main = models.ForeignKey(Main)
   name = models.CharField(max_length=255)
   value= models.CharField(max_length=255) 
```

我已经覆盖了我的主要。*getattr* _ 所以我可以引用 Detail 记录，就好像它们是正常的 Main 属性一样。例如一个简单的元模型模式，如

```
>>> m = Main.objects.create()
>>> Detail.objects.create(main=m, name='name', value='value')
>>> print m.name
'value' 
```

为此，我的 1.4 之前的**getattr**看起来像：

```
def __getattr__(self, attrname):
    qs = self.details.filter(name=attrname)
    c = len(qs)
    if c == 0:
        raise AttributeError
    elif c == 1:
        return qs[0].value
    else:
        return [d.value for d in qs] 
```

在我升级到 1.4 之前，这非常有效。现在我得到所有类型的“属性 X 不存在”错误。我尝试了以下类似的方法，但没有运气。它似乎与 Django 为 ForeignKey 引用生成的“_*_cache”属性特别冲突。

```
def __getattr__(self, attrname):
    try:
        return super(Main, self).__getattr__(attrname)
    except AttributeError:
        pass
    qs = self.details.filter(name=attrname)
    c = len(qs)
    if c == 0:
        raise AttributeError
    elif c == 1:
        return qs[0].value
    else:
        return [d.value for d in qs] 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T18:03:22.337

挖掘新的模型代码，似乎后端已经发生了很大的变化，因此模型类不再`__getattr__`需要覆盖。相反，我需要调用`object.__getattribute__`基本模型继承自的 。但是，Django 将缓存数据存储在特殊属性中，需要妥善处理。

我的新`__getattr__`现在看起来像：

```
def __getattr__(self, attrname):
    try:
        return super(Main, self).__getattribute__(attrname)
    except AttributeError:
        if attrname.startswith('_prefetched'):
            raise
    qs = self.details.filter(name=attrname)
    c = len(qs)
    if c == 0:
        raise AttributeError
    elif c == 1:
        return qs[0].value
    else:
        return [d.value for d in qs] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T18:04:16.503

我还没有尝试过，但[`__getattribute__()`](http://docs.python.org/reference/datamodel.html#object.__getattribute__)可能有效：

```
class Main(models.Model):
    def __getattribute__(self, attrname):
        try:
            return super(Main, self).__getattribute__(attrname)
        except AttributeError:
            try:
                return self.__getattr__(attrname)
            except AttributeError:
                # do your database accessing 
```

但正如 Chris Pratt 所说，这效率不高。您可能需要考虑缓存您的属性。

# javascript - Why can't I stop this js click event propogation

> ID：10899086
> 
> 赞同：0
> 
> 时间：2012-06-05T14:20:43.627
> 
> 标签：javascript, jquery

I'm trying to override a click handler by intercepting the event in an inline handler and stopping propagation (propogation disabling code taken from [here](https://stackoverflow.com/a/5108218/165673)).

The following code not only doesn't stop the propagation, it's not even firing the inline handler. I can't tell what's wrong.

fiddle: [http://jsfiddle.net/trKN4/3/](http://jsfiddle.net/trKN4/3/)

**HTML:**

```
<a onclick='stopIt(event);'>do it</a>​ 
```

**JS:**

```
function disableEventPropagation(event)
{
   if (event.stopPropagation){
       event.stopPropagation();
   }
   else if(window.event){
      window.event.cancelBubble=true;
   }
}

function stopIt(event) {
    disableEventPropagation(event);
    alert('dont do it');
}

$(function() {

    $('a').click(function(e){
        alert('im doing it');
    });                   

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:23:04.107

It's not firing the inline function because jsFiddle is wrapping all your code in an `onload` handler, taking it out of the reachable scope of the handler.

Choose a `no wrap` option from the menu on the left.

***DEMO:*** [http://jsfiddle.net/trKN4/4/](http://jsfiddle.net/trKN4/4/)

![enter image description here](../Images/fdc891f95b5faf9926fe4058c9c7935a.png)

# php - move_uploaded_file 在预览页面后不起作用

> ID：10899090
> 
> 赞同：0
> 
> 时间：2012-06-05T14:20:49.937
> 
> 标签：php

我正在将表单提交到预览页面（表单），然后最终提交。我无法让 move_uploaded_file 工作。我该如何解决这个问题？当我检查目录时，那里没有文件。

预览页面

```
 $tmpname = $_FILES['titleimage']['tmp_name'];
            $imagefile = $_FILES['titleimage']['name'];
          $filename = basename($imagefile);
           $imagename = dirname(__FILE__).'/avatar/'.$filename; 

            echo "<form enctype='multipart/form-data' id='submitpreview' action='/upload' method='POST'>
<input type='hidden'  name='image' value='$tmpname' readonly />
    <input type='hidden'  name='imagedir' value='$imagename' readonly />";
                        //other code
                echo "<div id='preview-submit-button'><a>Submit</a></div>
                </form>"; 
```

上传页面

```
$image = $_POST['image'];
$directory = $_POST['imagedir'];

move_uploaded_file($image,$directory); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:25:42.947

您确定`$_FILES['titleimage']['tmp_name']`提交第二个表单后临时文件仍然存在吗？请记住，这是一个临时文件。恐怕它只*存在*于提交第一个表单的时间（直到处理请求）。

所以，你应该：

1.  尽快（这意味着，在接收第一个表单的页面中，实际上是您的预览页面）您将临时文件保存在您的文件夹中，使用**[`move_uploaded_file()`](http://php.net/manual/en/function.move-uploaded-file.php)**.

2.  如果用户**确认**预览，则使用该功能将文件从您在步骤*1*中保存的目录移动到其*最终*文件夹**[`rename()`](http://php.net/manual/en/function.rename.php)**。

3.  如果用户**不确认**预览，则使用**[`unlink()`](http://php.net/manual/en/function.unlink.php)**函数将其删除。

* * *

另外，正如**Marc B**指出的那样，您应该查看*预览保存*逻辑的安全性。在隐藏的表单字段中传递路径和文件名是帮助黑客破坏您的系统的好方法。看看**[PHP Sessions](http://it.php.net/manual/en/book.session.php)**（也许你已经知道了），并考虑将这些路径从公共表单移动到会话变量。

# android - ViewPager 中的 Steema Charts 性能？

> ID：10899095
> 
> 赞同：0
> 
> 时间：2012-06-05T14:21:04.320
> 
> 标签：android, android-viewpager, teechart

有没有人在 Android 的浏览器中使用 Steema Teecharts 的经验？

我在 viewpager 中有 5 个图表 - 它们被创建一次并被缓存。在页面之间滑动真的很不稳定。我正在测试评估版，它在图表中添加了水印，我想知道波动是否是因为水印？分析表明滞后在图表的 onDraw 代码中。

任何使用过 Teecharts 的人都可以告诉我这个问题是否存在于非评估版本中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T13:10:47.267

我不认为水印对性能有很大影响。

你的图表有很多点吗？请注意，绘制的点数是影响性能的方面之一。尝试使用点数是否会改变您的应用响应。

市场上的演示是否重现了您设备中的问题？如果是这样，您使用的是什么设备？

--

最好的祝福，

耶雷·阿隆索

Steema 支持中心

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T13:57:40.640

我的解决方案是在图表对象上调用“setDrawingCacheEnabled(true)”。它产生了显着的差异。不知道为什么会这样，因为Android文档听起来好像没有帮助，因为我启用了硬件加速，但确实如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-10T16:45:30.047

当我遇到同样的问题时，启用绘图缓存会有所帮助，但对我来说真正的问题是自动重绘。这导致几乎不断地调用 OnPaintListener。我可以通过将 setAutoRepaint 设置为 false 来禁用它。这将 CPU 使用率降至更正常的水平。

# php - 从 LinkedIn 回显脚本标签

> ID：10899099
> 
> 赞同：0
> 
> 时间：2012-06-05T14:21:20.783
> 
> 标签：php, wordpress, linkedin

有没有办法通过 php echo 以完整的形式回显这些脚本？

`<script src="//platform.linkedin.com/in.js" type="text/javascript">api_key: 11111 </script> <script type="IN/Apply" data-companyid="111111" data-jobtitle="Sr. Software Support Programmer/Analyst" data-joblocation="atlanta" data-email="script@gmail.com"></script>`

这些脚本是从 LinkedIn 工具生成的，我希望客户能够复制，然后粘贴到 Wordpress 中的自定义字段中。

当我尝试回显该字段时，它会写入页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T14:41:55.460

只需使用[PHP 函数 htmlentities](http://php.net/manual/en/function.htmlentities.php)。

```
echo htmlentities('<script src="//platform.linkedin.com/in.js" type="text/javascript">api_key: 11111 </script> <script type="IN/Apply" data-companyid="111111" data-jobtitle="Sr. Software Support Programmer/Analyst" data-joblocation="atlanta" data-email="script@gmail.com"></script>'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T15:31:14.903

`html_entity_decode()`是我需要的[http://php.net/manual/en/function.html-entity-decode.php](http://php.net/manual/en/function.html-entity-decode.php)。

# javascript - 在 TinyTable 应用程序中跳过字段

> ID：10899100
> 
> 赞同：0
> 
> 时间：2012-06-05T14:21:28.410
> 
> 标签：javascript, drop-down-menu

我正在使用[高级 JavaScript 表格排序器 – TinyTable V3](http://www.scriptiny.com/2009/11/advanced-javascript-table-sorter/#comment-130116751)。

应用排序器后，标题字段将自动加载到下拉列表中。

有谁知道如何跳过 1 或 2 个字段以使下拉列表更短？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T23:27:58.137

这是解决方案。

在源代码中找到这个。

```
var o=document.createElement('option'); o.value=i; o.innerHTML=T$$('h3',c)[0].innerHTML; d.appendChild(o) 
```

并用以下条件包围它：

```
if(c.className!='nosort'){
     var o=document.createElement('option'); o.value=i; o.innerHTML=T$$('h3',c)[0].innerHTML; d.appendChild(o)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T16:33:22.713

快速查看应用程序和演示源代码，我发现选择器在 HTML 中声明，并带有一个 id，该 id 被传递给 option 中的脚本`colddid`。

应用排序器后，您可以找到选择器，遍历其子项并删除您不想要的任何内容，类似这样的操作将删除演示中的“所有列”条目：

```
var selector = document.getElementById ('columns');
for (el = selector.lastChild; el; el = el.previousSibling) {
  // Traverse from last to first so that deletions do not disturb scan 
  if (el.innerHTML === 'All Columns') {
    selector.removeChild (el);
  }
} 
```

警告：这是未经测试的，我没有仔细检查来源以确定这种操作是否会导致任何问题，请适当地进行测试。

# wcf - Silverlight 客户端计算机名称、用户名或来自客户端的唯一密钥

> ID：10899101
> 
> 赞同：1
> 
> 时间：2012-06-05T14:21:35.590
> 
> 标签：wcf, silverlight, client, computer-name

我正在尝试从客户端获取唯一密钥，例如用户名或计算机名称，但在 wcf 方面，以下任何一项都不适合我：

```
HttpContext.Current.Request.LogonUserIdentity.Name // blank
Security.Principal.WindowsIdentity.GetCurrent().Name 
```

为了安全起见，我使用匿名模式，无论如何用户都不应该登录。我怎样才能做到这一点 ？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:30:26.087

如果您使用匿名身份验证模式，那么您将得到一个空白名称。正如模式所暗示的那样，请求有点......匿名。

如果您需要一个唯一标识符，我认为在这种情况下您最好的选择是向您的请求添加一个自定义标头，其中包含一个在首次运行时创建并保存在隔离存储中的 Guid。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T14:32:27.520

### 如果您可以保证唯一的 IP 地址（*不太可能，但可能*）：

您可以尝试访问[`Request.ServerVariables`以检索消费者 IP 地址](http://www.whadiz.com/what-is.aspx/programming/visual-c-sharp-in-asp-dot-net/visitor-ip-address)吗？

这是一个[常见的**服务器变量键**](http://www.w3schools.com/asp/coll_servervariables.asp)列表。

### 如果您不能保证唯一的 IP 地址：

[此 SL 论坛帖子建议使用保存在隔离存储](http://forums.silverlight.net/p/207029/486196.aspx)中的 GUID，该 GUID 来回发送以获取上下文。

# java - 为什么这个 Java UDP 数据包长度太长？

> ID：10899106
> 
> 赞同：1
> 
> 时间：2012-06-05T14:21:48.090
> 
> 标签：java, udp, client, packet

所以我有一个java服务器和客户端，数据被很好地发送到服务器并且服务器正在对其进行交互，但是我发现客户端需要很长时间才能响应服务器发送的内容，经过一段时间我发现我的服务器发送给客户端的数据比应该发送的数据长得多。

发送给客户端的数据包包含我发送的所有数据，但是它后面也有很多空白，我想解决这个问题，有人有什么想法吗？

我获取数据的代码是服务器上每个客户端的简单 for 循环，这会将客户端数据添加到字符串中，然后将该字符串添加到数据包中：

类播放器列表

```
public static String getString()
{
    String message = "";

    for(int x = 0; x < list.size(); x++)
    {
        Player player = list.get(x);

        if(message.equals(""))
        {
            message += player.name+";"+player.address+";"+player.pos[0]+";"+player.pos[1]+";"+player.fakeRotation+";"+player.rotation+";"+player.rotationSpeed+";"+player.speed+";"+player.sheildEnabled+";"+player.sheildStrength+";"+player.health;
        }
        else
        {
            message += ","+player.name+";"+player.address+";"+player.pos[0]+";"+player.pos[1]+";"+player.fakeRotation+";"+player.rotation+";"+player.rotationSpeed+";"+player.speed+";"+player.sheildEnabled+";"+player.sheildStrength+";"+player.health;
        }
    }

    System.out.println(message);

    return message;
} 
```

类发送

```
while(Server.serverRunning)
    {
        for(int p = 0; p < PlayerList.list.size(); p++)
        {
            Player player = PlayerList.list.get(p);

            try
            {
                byte[] buf = PlayerList.getString().getBytes();

                //send the message to the client to the given address and port
                packet = new DatagramPacket(buf, buf.length, player.address);
                Server.socket.send(packet);
            }
            catch (IOException e)
            {
                System.out.println("Can't send packet to player: "+player.name);
            }
        }
    } 
```

我知道从 getString 方法收到的数据是正确的，并且没有空格，因为我已经对其进行了测试，因此当我将字符串添加到数据包时一定会发生这种情况。

预期数据在输出中显示为： `Luke;127.0.0.1:63090;50.0;50.0;0.0;0.0;0.0;0.0;true;100;100`

但是实际数据在客户端上显示为： `Luke;127.0.0.1:63090;50.0;50.0;0.0;0.0;0.0;0.0;true;100;100 (lots of spaces here) ...line is too long, please switch to wrapped mode to see whole line...`

接收数据的客户端代码是：

```
receiveData = new byte[clientSocket.getReceiveBufferSize()];
                receivePacket = new DatagramPacket(receiveData, receiveData.length);
                clientSocket.receive(receivePacket);
                receiveMessage = new String(receivePacket.getData()); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T14:33:47.183

DatagramPacket 上的 getData 返回整个缓冲区，最后可能有额外的数据。您需要调用 getLength() 来确定接收到的数据的实际长度，并且只查看 getData() 中的那些字节

```
byte[] realData = Arrays.copyOf( receivePacket.getData(), receivePacket.getLength() ); 
```

# jquery - 如何将原型 div 选择器作为对象

> ID：10899107
> 
> 赞同：0
> 
> 时间：2012-06-05T14:21:48.440
> 
> 标签：jquery, prototypejs

我是原型/jquery 的菜鸟，当我尝试在 chrome 控制台中执行此操作时，在一个名为“contains_filter_select”的 div 页面上：

```
>> $("contains_filter_select" )
<div id=​"contains_filter_select">​…​&lt;/div>​ 
```

但它似乎以某种方式不是一个对象？

```
>> $("contains_filter_select").text("abc")
TypeError: Object #<HTMLDivElement> has no method 'text'

 $("#contains_filter_select")
 null 
```

我觉得我在这里遗漏了一些微不足道的东西，有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T14:26:18.420

你说：

> `>> $("contains_filter_select").text("abc")`
> 
> `TypeError: Object #<HTMLDivElement> has no method 'text'`

这表明您根本没有使用 jQuery，而是使用了其他一些库。有几个库使用该`$`符号：jQuery、Prototype 和 MooTools（至少）。Prototype 和 MooTools 的工作方式，当您使用 时`$("contains_filter_select")`，您将获得对实际`div`对象的引用；jQuery 是不同的，使用 jQuery，您可以返回一个围绕一组匹配元素的包装器（字符串将是 CSS 样式的选择器，`#`在元素 ID 之前有一个，与 Prototype 和 MooTools 不同，它只是一个 ID 值）。使用 jQuery，即使您的选择器不起作用，您也不会收到您遇到的错误。使用 Prototype 或 MooTools，我很确定您会这样做，因为它们都没有`text`向元素添加方法。

所以答案是：我认为您根本没有在该页面上使用 jQuery。仔细检查脚本标签。（FWIW，如果您碰巧使用流行的在线工具[jsFiddle](http://jsdfiddle.net)，如果您不更改左侧的下拉菜单，它默认为 MooTools。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T14:25:12.480

对选择器使用带有 ID 的井号 (#)

```
$("#contains_filter_select" ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T14:22:46.663

应该是`$("#contains_filter_select" )`为了得到`<div>`ID。一旦你这样做，它应该可以工作。

编辑：如果你看这里：http: [//jsfiddle.net/mRBJq/](http://jsfiddle.net/mRBJq/)它工作正常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T14:23:09.930

ID 的选择器必须以“#”为前缀。

`$("#contains_filter_select")`不是`$("contains_filter_select")`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-05T14:25:37.220

如果你在你的页面中包含了 jQuery，那么你`$`已经被一个通过 Id 获取元素的函数覆盖了，并且与 jQuery 无关。用这个：

```
(function($){
    // Now $ refers to jQuery

    $("#contains_filter_select").text("abc");

})(jQuery); 
```

[**JSFiddle**](http://jsfiddle.net/g7egb/)

如果您尚未包含 jQuery，请参阅[TJ Crowder 的回答](https://stackoverflow.com/questions/10899107/how-to-get-jquery-div-selector-as-object/10899189#10899189)。

# oracle - 如何在 oracle 中使用多个数据库更新进行回滚？

> ID：10899116
> 
> 赞同：0
> 
> 时间：2012-06-05T14:22:19.927
> 
> 标签：oracle, sql-server-2008, postgresql

我想用多个数据库进行更新，每个数据库都包含多个表。如果出现问题，我想将所有数据库和表回滚到原始状态。你能给我任何人建议我能为此做些什么吗？感谢您花时间阅读这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:38:32.183

您将需要一个程序来一次连接到所有数据库并在将要更新的表上启动锁定。

应用您的更改，并在发生异常时回滚当前数据库和所有先前完成的数据库。

目的是使一个会话在所有数据库上保持同步——这不是一件好事。

您的另一个选择是查看您是否可以配置零停机时间安装。这是您将安装分成几个部分的地方 - 可以先应用什么，之后可以应用什么。

即，您可以毫无问题地向所有表添加一列（希望如此），因此这将是预安装。在不再使用列之前，您不能删除它，因此这是一个后期步骤。这将涉及为视图和包等内容提供多个版本，以允许应用程序在没有任何影响的情况下进行转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T13:43:31.177

如果您尝试在单个事务中更新多个 Oracle 数据库，最简单的选择是在它们之间创建数据库链接。这导致 Oracle 自动使用分布式事务。

在数据库 1 上，您创建数据库链接

```
CREATE DATABASE LINK to_db2
  CONNECT TO CURRENT_USER
  USING `<<TNS alias to db2>>`; 
```

然后数据库 1 中的会话可以更新两个数据库中的表作为同一事务的一部分

```
UPDATE table1
   SET some_column = some_value
  ...

UPDATE table2@to_db2
   SET some_column = some_value
  ...

commit; 
```

可以使用异构服务创建从 Oracle 到非 Oracle 数据库的数据库链接，但这需要更多的工作，特别是如果您的 Oracle 数据库在 Unix 上运行并且可能需要购买透明网关产品之一。

现在，如果您尝试更新两个数据库中的相同表，您不应该为此编写代码。相反，您应该使用多种复制技术之一将一个数据库上的更改复制到另一个数据库。

# javascript - 使用 openlayers 在地理服务器中进行身份验证

> ID：10899127
> 
> 赞同：3
> 
> 时间：2012-06-05T14:23:08.817
> 
> 标签：javascript, openlayers, geoserver

有没有办法使用外部网页（用 asp.net 和 openlayers 制作）在 geoserver 中进行身份验证？我只限制了某些用户的访问数据，我不想以这种方式进行身份验证：

```
username:password@geoserverurl 
```

出于安全原因（用户名和密码在网页代码中可见）

提前致谢

# javascript - 显示/隐藏 div jquery

> ID：10899129
> 
> 赞同：0
> 
> 时间：2012-06-05T14:23:12.420
> 
> 标签：javascript, jquery, jquery-ui

当鼠标进入屏幕的第一季度时，是否有任何 jquery 函数可以触发函数？

我实际上在做的是当鼠标移到另一个 div 上时显示和隐藏一个 div 两者都在同一位置（重叠），它显示和隐藏我的内容但按钮被禁用，因为 show_hide div 在菜单 div 上，我将 show hide div 的 z-index 设置为 -1 并且每次鼠标移到菜单 div 上时都会闪烁

```
<div id="menu" style ="width : 100% ; height:50px ;text-align : center ;  background: rgba(51, 102, 255, 0.2); position : absolute  ; top:0 ; display : none" >
            <div id="pre" style ="height:100% ; width: 50px ;  float :left ; left:0  "><a href="facebook.com"><img src="External_Files/images/left.png" style="margin-top:25%" /></a></div>
            <div id="menuContent" style="width:90% ; height:50px ;  position:absolute; margin-left :60px ; border : 2px solid red; overflow-x: scroll; " ><a href="facebook.com">mina</a> </div>
            <div id="next" style ="height:100% ; width: 50px ;  float :right ; right:0 ; text-align : center  "><a href="#"><img src="External_Files/images/right.png" /></a></div>
            </div>
            <div id="show_hide" style ="width : 100% ; height:70px ; position : absolute ; top:0" ></div> 
```

这是jQuery代码：

```
 $(document).ready(function(){
    $("#show_hide").hover(
        function(){
            $("#menu").show() ;

        },
        function(){
            $("#menu").hide() ; 

        }
    ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T14:28:07.920

hover() 事件实际上只是使用 mouseenter() 和 mouseleave()。这应该有效：

```
 $(document).ready(function(){
    $("#show_hide").mouseenter(
        function(){
            $("#menu").show();
        }
    );
    $("#menu").mouseleave(
        function(){
            $(this).hide();
        }
    );
}); 
```

如果您想保持 html 的结构不变，那么您需要在离开时隐藏 #menu div。

使其工作的另一种方法是将#menu div 包含在#show_hide div 中。如果您这样做，那么您的原始 jquery 将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T15:01:57.063

```
$(document).ready(function(){
    $("#show_hide").mouseover(function(){
        $("#menu").show() ; 
        $("#show_hide").css("display","none");
    });
  $("#menu").mouseleave(
    function(){
        $(this).hide();
        $("#show_hide").css("display","");
    });

   }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-25T15:44:25.927

```
$("#show_hide").mouseover(function(){

    if ($("#menu").css('display') == 'none') 
    {
    $("#menu").slideDown("slow");
    }
    else 
    {
    $("#menu").slideUp("slow");
    }
}); 
```

# javascript - JavaScript：如果找到在数组中重复的值，则返回 true 的最佳方法

> ID：10899132
> 
> 赞同：0
> 
> 时间：2012-06-05T14:23:17.913
> 
> 标签：javascript, arrays

> **可能重复：**
> [在 JavaScript 数组中查找重复值的最简单方法](https://stackoverflow.com/questions/840781/easiest-way-to-find-duplicate-values-in-a-javascript-array)

假设我有一个包含数千个元素的数组，并且

我想`return true`如果有**2 个或更多元素具有相同的值**。

我知道我可以运行 a`for loop`并检查每一对元素以找到答案。

**但是有更快的方法吗？最好的方法是什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:25:14.087

对其进行排序（无论比较器如何），然后扫描。O(n log(n))。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T14:26:27.443

这基本上是[Element Distinctness Problem](http://en.wikipedia.org/wiki/Element_distinctness_problem)。您可以阅读它，但只有 1000 个元素，优化可能不值得。

如果您真的想优化它，您可以将元素推送到哈希表中并检查冲突是否重复。这将为您提供平均 O(n)（摊销），但在最坏的情况下为 O(n^2)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T14:26:34.043

可能最快的方法是使用本机方法。`inArray`不是其中之一。`indexOf`如果该方法不存在（旧浏览器），您可以使用并默认为 for 循环。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T14:27:27.990

有一种更快的方法。它的具体实现取决于您在数组中的内容。但这个想法是下面的伪代码：

假设您有一个`id(element)`返回元素的字符串标识符的函数。

```
var map = {};

for(var i = 0; i < myArray.length; i++) {
    var currentId = id(myArray[i]);
    if(map.hasOwnProperty(id)) return true;
    map[id] = true;
} 
```

这里的复杂性是线性的。

如果您没有自然 id，您可以从标识对象的属性构建一个，或者做一些更聪明的事情……您可以在这里做的最聪明的事情是重新实现哈希图。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-05T14:31:53.933

试试这个：

```
Array.prototype.elementsNotDistinct = function () {
    var i, j, length = this.length - 1;

    for(i = 0; i < length; i++)
        for (j = i + 1; j <= length; j++)
            if (this[i] === this[j]) return true;

    return false;
}; 
```

然后，如果您有一个名为的数组，`a`您需要做的就是：

```
if (a.elementsNotDistinct()) {
    // do something
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-05T14:33:10.950

我认为`Array`内置`indexOf`操作会为您出色地工作（取决于您需要排序的数据）

```
// Filter out all instances that occur twice or more.

var example = [ 1, 2, 3, 3, 3, 5, 4, 3, 5, 3 ];
var result = Array.filter( function ( element ) {
    return this.indexOf( element ) >= 2;
}  
// result is an array of [3,5]

return result.length === 0; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-05T14:33:48.870

您可以遍历数组并将对象键设置为等于数组中找到的元素（转换为字符串）。如果您的密钥已经存在，那么您在数组中找到了两个具有重复值的元素

```
function isAllDistinct() {
    var elements  = { },
        yourarray = [...];

    for (i=0, l=yourarray.length; i < l; i++) {
       var key = yourarray[i] + '';  // alternative to yourarray[i].toString()
       if (!elements[key]) {
         elements[key] = 1;
       }
       else {
         return false;
       }
    }
    return true;
} 
```

复杂度：O(n)

# objective-c - 将事件保存到 CalCalendar 是否仅存储指向 CalEvent 的指针，而不是副本？

> ID：10899134
> 
> 赞同：1
> 
> 时间：2012-06-05T14:23:20.530
> 
> 标签：objective-c, macos, cocoa, calendar

如果我想将同一种事件保存到两个日历中，看来我必须创建两个单独的事件对象，*对*吗？

例如，请参见下面的代码。事件被保存到链接到“工作人员”的日历中，然后保存到链接到“任务”的日历中。

```
- (BOOL)setTask:(MJSTask *)aTask
   fromDate:(NSDate *)from
     toDate:(NSDate *)to
{
    NSError *err = nil;
    CalEvent *e = [CalEvent event];
    NSString *task = [[aTask shortName] uppercaseString];
    // Set the first calendar
    [e setTitle:task];
    [e setIsAllDay:NO];
    [e setStartDate:[aTask start]];
    [e setEndDate:[aTask end]];
    [e setLocation:[self lastName]];
    [e setCalendar:[self calendar]];
    if ( ![[CalCalendarStore defaultCalendarStore] saveEvent:e span:CalSpanThisEvent error:&err] )
    {
       <error handling>
    }
    // Set the second calendar
    NSString *titleString = [NSString stringWithFormat:@"%@ (%@)",[self lastName],task];
    [e setTitle:titleString];
    [e setLocation:[aTask longName]];
    [e setCalendar:[[aTask taskTemplate]calendar]];
    if ( ![[CalCalendarStore defaultCalendarStore] saveEvent:e span:CalSpanThisEvent error:&err] )
    {
        <error handling>
    }
    return FALSE;    
} 
```

如果我注释掉日历 2 保存的行，我会在日历 1 中获得事件。但如果我不这样做，似乎这些对象只会保存到最后一个日历（日历 2）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T23:04:33.500

正确的。通过保存两次，第二次通过将事件移动到不同的日历来有效地更新事件

# sql-server - 无法在 Netbeans 7.1 中查看 SQL Server 2005 的表

> ID：10899135
> 
> 赞同：0
> 
> 时间：2012-06-05T14:23:23.730
> 
> 标签：sql-server, sql-server-2005, netbeans, jdbc, netbeans-7

我目前正在使用netbeans。在运行时视图中，我能够连接到我的 sqlserver 2005 数据库。但是，未显示表格列表。当我尝试执行命令时，我可以成功查询数据库、表和字段。我只是想知道为什么这些表没有显示在运行时视图的表文件夹中。

我正在使用 JDBC 驱动器：4.0 Netbeans：7.1

配置整体

主机：172.16.16.18
端口：1433
数据库：Alpha
实例名称：
用户名：用户名
密码：密码

已经尝试通过更改各种架构。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T15:06:15.407

如果有人来解决同样的问题。使用此驱动程序 [http://download.microsoft.com/download/D/6/A/D6A241AC-433E-4CD2-A1CE-50177E8428F0/1033/sqljdbc_3.0.1301.101_enu.tar.gz](http://download.microsoft.com/download/D/6/A/D6A241AC-433E-4CD2-A1CE-50177E8428F0/1033/sqljdbc_3.0.1301.101_enu.tar.gz)

新驱动器中有一些错误...

我讨厌微软…………

# c# - 如何在不重复代码的情况下处理事务？

> ID：10899145
> 
> 赞同：0
> 
> 时间：2012-06-05T14:24:02.543
> 
> 标签：c#, asp.net-mvc-3, transactions, action-filter

每次我想在我的 POST 方法中使用事务时，我似乎都会重复自己。我可以使用动作过滤器或其他东西吗？

```
[HttpPost]
public virtual ActionResult Create(CreateModel model)
{
  if (!ModelState.IsValid)
    return View(model);

  var instruction = new Instruction(CurrentUser);
  Mapper.Map(model, instruction);

  // how do I get rid of this?
  using (var uow = _unitOfWorkFactory.Create())
  {
    _repository.Save(instruction);

    uow.SaveChanges();
  }

  return RedirectToAction("Details", new {id = instruction.Id});
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:24:02.683

创建一个新的操作过滤器，在创建和使用 UnitOfWork 之前检查`ModelState`和属性：`HttpContext.Error`

```
public class TransactionalAttribute : ActionFilterAttribute
{
  private IUnitOfWork _unitOfWork;

  public override void OnActionExecuting(ActionExecutingContext filterContext)
  {
    if (filterContext.Controller.ViewData.ModelState.IsValid && filterContext.HttpContext.Error == null)
      _unitOfWork = DependencyResolver.Current.GetService<IUnitOfWork>();

    base.OnActionExecuting(filterContext);
  }

  public override void OnActionExecuted(ActionExecutedContext filterContext)
  {
    if (filterContext.Controller.ViewData.ModelState.IsValid && filterContext.HttpContext.Error == null && _unitOfWork != null)
      _unitOfWork.SaveChanges();

    base.OnActionExecuted(filterContext);
  }
} 
```

UnitOfWork 的示例 nhibernate 实现（在您的 IoC 中注册）：

```
public class NhibernateUnitOfWork : IUnitOfWork
{
  private readonly ISession _session;
  private ITransaction _transaction;

  public NhibernateUnitOfWork(ISession session)
  {
    _session = session;
    _transaction = session.BeginTransaction();
  }

  public void Dispose()
  {
    if (_transaction == null)
      return;

    if (!_transaction.WasCommitted)
      _transaction.Rollback();

    _transaction.Dispose();
    _transaction = null;
  }

  public void SaveChanges()
  {
    _transaction.Commit();
  }

} 
```

用法：

```
[HttpPost, Transactional]
public virtual ActionResult Create(CreateModel model)
{
  if (!ModelState.IsValid)
    return View(model);

  var instruction = new Instruction(CurrentUser);
  Mapper.Map(model, instruction);
  _repository.Save(instruction);

  return RedirectToAction("Details", new {id = instruction.Id});
} 
```

来源：http: [//blog.gauffin.org/2012/06/how-to-handle-transactions-in-asp-net-mvc3/](http://blog.gauffin.org/2012/06/how-to-handle-transactions-in-asp-net-mvc3/)

# python - 当 sweetpie 连接非 ORM 源 时，如何返回 404？

> ID：10899148
> 
> 赞同：8
> 
> 时间：2012-06-05T14:24:13.337
> 
> 标签：python, rest, http-status-code-404, tastypie

我正在使用此处描述的类似外观的模式：http: [//django-tastypie.readthedocs.org/en/latest/non_orm_data_sources.html](http://django-tastypie.readthedocs.org/en/latest/non_orm_data_sources.html)

```
def obj_get(self, request=None, **kwargs):
    rv = MyObject(init=kwargs['pk'])
    audit_trail.message( ... )
    return rv 
```

我不能返回 None，抛出一个错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T12:46:43.210

您应该提出一个异常：**tastepie.exceptions.NotFound**（根据代码文档）。

我正在为 CouchDB 开发美味的派，并深入研究了这个问题。在 sweetpie.resources.Resource 类中，您可以找到必须覆盖的方法：

```
def obj_get(self, request=None, **kwargs):
    """
    Fetches an individual object on the resource.

    This needs to be implemented at the user level. If the object can not
    be found, this should raise a ``NotFound`` exception.

    ``ModelResource`` includes a full working version specific to Django's
    ``Models``.
    """
    raise NotImplementedError() 
```

我的例子：

```
def obj_get(self, request=None, **kwargs):
    """
    Fetches an individual object on the resource.

    This needs to be implemented at the user level. If the object can not
    be found, this should raise a ``NotFound`` exception.
    """
    id_ = kwargs['pk']
    ups = UpsDAO().get_ups(ups_id = id_)
    if ups is None:
        raise NotFound(
                "Couldn't find an instance of '%s' which matched id='%s'."%
                ("UpsResource", id_))
    return ups 
```

有一件事对我来说很奇怪。当我查看 ModelResource 类（Resource 类的超类）中的 obj_get 方法时：

```
def obj_get(self, request=None, **kwargs):
    """
    A ORM-specific implementation of ``obj_get``.

    Takes optional ``kwargs``, which are used to narrow the query to find
    the instance.
    """
    try:
        base_object_list = self.get_object_list(request).filter(**kwargs)
        object_list = self.apply_authorization_limits(request, base_object_list)
        stringified_kwargs = ', '.join(["%s=%s" % (k, v) for k, v in kwargs.items()])

        if len(object_list) <= 0:
            raise self._meta.object_class.DoesNotExist("Couldn't find an instance of '%s' which matched '%s'." % (self._meta.object_class.__name__, stringified_kwargs))
        elif len(object_list) > 1:
            raise MultipleObjectsReturned("More than '%s' matched '%s'." % (self._meta.object_class.__name__, stringified_kwargs))

        return object_list[0]
    except ValueError:
        raise NotFound("Invalid resource lookup data provided (mismatched type).") 
```

一个异常：self._meta.object_class.DoesNotExist 在找不到对象时引发，最终成为 ObjectDoesNotExist 异常-因此在项目内部没有达成共识。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-25T14:22:29.503

我使用来自 django.core.exceptions 的 ObjectDoesNotExist exeption

```
 def obj_get(self, request=None, **kwargs):
        try:
            info = Info.get(kwargs['pk'])
        except ResourceNotFound:
            raise ObjectDoesNotExist('Sorry, no results on that page.')
        return info 
```

# iphone - iTunesconnect：将应用名称重命名为已删除的应用名称

> ID：10899149
> 
> 赞同：0
> 
> 时间：2012-06-05T14:24:17.440
> 
> 标签：iphone, ios, app-store, app-store-connect

我正在通过提交新版本来更新我的应用程序的名称。但是当我重命名应用程序时，我会收到应用程序名称已经需要使用的消息。

实际上，在我用新名称创建应用程序之前，但很久以前就删除了。

从[这里](http://hesh.am/2012/01/recovering-a-deleted-app-name-in-itunes-connect/)我知道可以通过更改应用程序描述的本地化名称来轻松完成，比如说从英语到英国英语。但是如果我选择的应用程序语言是德语，我该怎么办，我什至不能说类似于德语的东西。

有什么方法可以更改应用程序的名称吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T17:41:41.743

上传后无法更改应用程序的名称。Apple 允许早期从 iTunes 中删除应用程序。但是，现在他们不允许删除应用程序。所以，你需要为申请取另一个名字。您可以为在应用程序上显示提供相同的名称。但是，为了在 iTunes 中显示，您必须使用唯一的名称。

# guice - Shiro Guice，我在哪里可以为 FormAuthenticationFilter 设置 loginUrl、usernameParam、passwordParam 等？

> ID：10899150
> 
> 赞同：2
> 
> 时间：2012-06-05T14:24:20.970
> 
> 标签：guice, shiro

在当前设置中，我使用 shiro.ini。

转到 Guice，为 FormAuthenticatorFilter (authc) 设置这些值的正确位置在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T15:04:19.910

您可以通过绑定参数

```
bindConstant().annotatedWith(Names.named("shiro.<param>")).to(value) 
```

从你的`Shiro(Web)Module`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-04T03:19:06.580

Shiro Guice 的文档[在这里](http://shiro.apache.org/guice.html#Guice-Properties)解释说，您可以使用以下语法注入和覆盖几个不同的属性：

```
bindConstant().annotatedWith(Names.named("shiro.<property>")).to(<propertyValue>); 
```

因此，要回答您的问题，您可以通过执行以下操作将“loginUrl”属性设置为“/loginHere”：

```
bindConstant().annotatedWith(Names.named("shiro.loginUrl")).to("/loginHere"); 
```

# xml - 带有特殊字符的 vbscript 创建转换 xml

> ID：10899151
> 
> 赞同：3
> 
> 时间：2012-06-05T14:24:23.903
> 
> 标签：xml, vbscript

我正在.vbs 文件中**创建**一个 xml 文件，其节点值如下所示，

```
 <car>David's</car>
  <company>Mannar & Co.</company> 
```

在解析这个 xml 时，我发现 & 等问题。

我想用编码字符（带有**函数或其他东西）转换****所有可能的**xml 特殊字符，以便在解析时得到原始内容。

 **感谢您。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-11-02T05:28:48.170

这是一个旧帖子，但我正在回复，因为我希望这可以为某人节省一些悲伤

我正在处理一个供应商抱怨在某些情况下并非所有特殊字符都在 XML 中转义的问题。我很惊讶地看到**开发人员使用了它自己的逻辑（函数）**而不是框架提供的某些功能，因为转义听起来像是一项非常常见的任务。以下是修复前的功能：

```
Function HTML_Encode(byVal string)
  Dim tmp, i 
  tmp = string
  For i = 160 to 255
    tmp = Replace(tmp, chr(i), "&#" & i & ";")
  Next
  tmp = Replace(tmp, chr(34), "&quot;")
  tmp = Replace(tmp, chr(39), "&apos;")
  tmp = Replace(tmp, chr(60), "&lt;")
  tmp = Replace(tmp, chr(62), "&gt;")
  tmp = Replace(tmp, chr(38), "&amp;") <- the problem: this line should be the first replacement
  tmp = Replace(tmp, chr(32), "&nbsp;")
  HTML_Encode = tmp
End Function 
```

有趣的是，它看起来完全是这篇文章的答案之一（可能是从这里复制的:-)。

我将问题追溯到**特殊字符被替换的顺序**。替换＆符号（`&`）**必须**是第一个替换（行），因为替换（如`&quot;`：）正在注入＆符号，而＆符号又将被替换`&amp;`。例如，如果我有以下字符串：`We <3 SO`. 原始（上面）函数会将其转义为：`We &amp;lt;3 SO`. 正确的转义是：`We &lt;3 SO`.

所以修改后的函数可以是：

```
 Function HTML_Encode(byVal string)
      Dim tmp, i 
      tmp = string

      tmp = Replace(tmp, chr(38), "&amp;") <- Must be the first replacement (Thanks Aaron)

      For i = 160 to 255
        tmp = Replace(tmp, chr(i), "&#" & i & ";")
      Next

      tmp = Replace(tmp, chr(34), "&quot;")
      tmp = Replace(tmp, chr(39), "&apos;")
      tmp = Replace(tmp, chr(60), "&lt;")
      tmp = Replace(tmp, chr(62), "&gt;")
      tmp = Replace(tmp, chr(32), "&nbsp;")
      HTML_Encode = tmp
    End Function 
```

[为了完整起见，您可以在此处](http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Predefined_entities_in_XML)找到 XML 中的预定义实体

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T10:12:09.483

根据我自己制作的 OP 的评论，我找不到可靠的版本，我认为它涵盖了所有可能的 ascii 字符

```
Function HTML_Encode(byVal string)
  Dim tmp, i 
  tmp = string
  For i = 160 to 255
    tmp = Replace(tmp, chr(i), "&#" & i & ";")
  Next
  tmp = Replace(tmp, chr(34), "&quot;")
  tmp = Replace(tmp, chr(39), "&apos;")
  tmp = Replace(tmp, chr(60), "&lt;")
  tmp = Replace(tmp, chr(62), "&gt;")
  tmp = Replace(tmp, chr(38), "&amp;")
  tmp = Replace(tmp, chr(32), "&nbsp;")
  HTML_Encode = tmp
End Function

Function HTML_Decode(byVal encodedstring)
  Dim tmp, i
  tmp = encodedstring
  tmp = Replace(tmp, "&quot;", chr(34) )
  tmp = Replace(tmp, "&apos;", chr(39))
  tmp = Replace(tmp, "&lt;"  , chr(60) )
  tmp = Replace(tmp, "&gt;"  , chr(62) )
  tmp = Replace(tmp, "&amp;" , chr(38) )
  tmp = Replace(tmp, "&nbsp;", chr(32) )
  For i = 160 to 255
    tmp = Replace(tmp, "&#" & i & ";", chr(i))
  Next
  HTML_Decode = tmp
End Function

str = "This !@#± is a & test!"
wscript.echo HTML_Encode(str) '=> This&nbsp;!@#&amp;#177;&nbsp;is&nbsp;a&nbsp;&amp;&nbsp;test!
wscript.echo HTML_Decode(HTML_Encode(str)) '=> This !@#± is a & test! 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T10:35:26.867

当我找到另一个钥匙时，我的钥匙还不冷，我把它作为另一个答案，因为输出非常不同，所以你可以选择最适合的。我确实删除了原始答案以免混淆

```
Function Escape(s) 
  Dim scr
  Set scr = CreateObject("MSScriptControl.ScriptControl")
  scr.Language = "VBScript"
  scr.Reset
  Escape = scr.Eval("escape(""" & s & """)")
End Function

Function Unescape(s)
  Dim scr
  Set scr = CreateObject("MSScriptControl.ScriptControl")
  scr.Language = "VBScript"
  scr.Reset
  Unescape = scr.Eval("unescape(""" & s & """)")
End Function

wscript.echo Escape("This !@#± is a & test!") '=> This%20%21@%23%B1%20is%20a%20%26%20test%21
wscript.echo Unescape(Escape("This !@#± is a & test!")) '=> This !@#± is a & test! 
```**

# php - wordpress timthumb.php 漏洞

> ID：10899158
> 
> 赞同：0
> 
> 时间：2012-06-05T14:24:40.360
> 
> 标签：php, wordpress, exploit

我正在尝试将 php 文件远程上传到网页中，它具有 TimThumb 版本：1.28 和众所周知的 timthumb.php vurnable 文件。但是当我从缓存中打开它时上传 php 文件后，它不会执行！我不知道是什么阻止它执行！我看到他们在 timthumb.php 中所做的更改，他们在其中将 .txt 添加到进入缓存文件夹的每个文件中，但它是在较新版本中添加的，而不是在此版本中，所以我真的很困惑是什么阻止了它执行！顺便说一下，这只是为了学习目的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:30:07.843

如果文件在服务器上命名`whatever.php.txt`，那么服务器将把它视为 TEXT 文件，而不是 PHP 文件，并按原样提供。您可以告诉服务器将 .txt 文件视为 PHP 文件，它会通过 PHP 解释器运行文件+代码，但随后您只需重新打开 timthumb 修补的安全漏洞`.txt`。

例如，您仍然容易受到远程黑客攻击。

# php - 在 CodeIgniter 中处理大量半相关的表单

> ID：10899162
> 
> 赞同：1
> 
> 时间：2012-06-05T14:25:00.990
> 
> 标签：php, mysql, forms, codeigniter

我有一个 20 页的文档，里面有 20 个表格。它被组织成几个部分。

```
Section 1:
 1.1 - Form 1
 1.2 - Form 2
 1.3 - Form 3
Section 2:
 2.1 - Form 1

...etc... 
```

我有一个看起来像这样的控制器设置（现在）：

```
class Section extends CI_Controller {
    public function index($section_id) {
        $this->section_model->_require_valid_section($section_id);

        $data['view'] = "section/index";
        $this->load->view('app/template', $data);
    }
} 
```

我需要为这 20 个表单构建视图。每个表格都有不同的数据。一个可能有“姓名、电子邮件、电话”，而下一个可能有“人名、设施名称、职称”，它们不相关。我认为为每个表格设置一个表格可能很愚蠢*（更多表格可能随时出现）*，所以我可以做一个这样的表格：

```
Section | Key     | Value
-------------------------
1.1      name       Randolph
1.1      phone      1111111111
2.1      person     Junior
2.1      title      Playa 
```

我真的很想知道如何设置我的控制器来处理和路由这些表单的请求。

只为每个函数创建函数是否理想？

```
public function form_1_1() {
   $this->section_model->save_1_1();
}
public function form_1_2() {
   $this->section_model->save_1_2();
} 
```

`index()`可以通过路由请求，`call_user_func()`但我不知道这是否是正确的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T17:33:50.873

你总是可以在每个表单中放置一个隐藏的输入，然后在你的控制器函数中对隐藏字段的值进行操作。

添加到每种形式的视图中：

```
<input type="hidden" name="form_name" value="form_1" /> 
```

添加到控制器：

```
$form_submitted = $this->input->post('form_name'); 
```

然后只需使用开关或 if 来处理基于`$form_submitted`变量的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T17:46:41.590

这取决于您稍后需要构建数据、存储或搜索/引用的内容。

一个快速且可能的答案是像您已经使用的那样使用单个表，但参考列，如：、、、`entry_id`等...`form_type``userid``data`

该`data`列将存储序列化的表单元素/值，可能不太容易搜索，但提供了一种干净的方式来存储多个表单提交。

要取回数据，您可以选择所有带有用户 ID 的 entry_id 等；并将值反序列化为您可以轻松使用的数组。

您的另一个选择是获取类似 DataMapper 的东西，并处理表单之间的**一对多**或**多对多**关系。

**[数据映射器参考： http](http://datamapper.wanwizard.eu/) **://datamapper.wanwizard.eu/****

# ios - 通过命令行实用程序检测 iOS 应用程序中的私有 API

> ID：10899163
> 
> 赞同：3
> 
> 时间：2012-06-05T14:25:04.270
> 
> 标签：ios, ipa, iphone-privateapi

我在应用程序的二进制文件中使用了**otool、nm 和字符串**等命令，但无法推断我的方法名称是否与 Apple 的内部 API 发生冲突？

另外，下载类转储并在我的 .app/AppName 文件上运行它，输出为

> “此文件不包含任何 Objective-C 运行时信息。”

任何人都可以建议这样做的方法吗？

# c++ - 只有内联模板有效，如何正确操作

> ID：10899171
> 
> 赞同：0
> 
> 时间：2012-06-05T14:25:33.430
> 
> 标签：c++, function, templates, codeblocks

我在 cpp 中给自己写了一个 StringHelper 来进行转换。但是如果我将 sourceode 放在外部 cpp 文件（包含在 Codeblocks-projectfile 中）或者我不理解错误，它将无法编译：

高压钠灯：

```
#ifndef _INPUT_STRINGHELPER_HPP
    #define _INPUT_STRINGHELPER_HPP

    #include <string>
    #include <sstream>
    #include <deque>

    namespace FiveDimension
    {
        void SplitStream(std::stringstream& s, char c, std::deque<std::string>& ret);
        void SplitString(std::string s, char c, std::deque<std::string>& ret);
        template<typename T> T StringToAll(std::string val);
        template<typename T> bool TryStringToAll(std::string val, T &ret);
        template<typename T> std::string AllToString(T val);
    }

#endif 
```

共产党：

```
#include "StringHelper.hpp"

void FiveDimension::SplitStream(std::stringstream& s, char c, std::deque<std::string>& ret)
{
    std::string line;

    while(std::getline(s, line, c))
        ret.push_back(line);
}
void FiveDimension::SplitString(std::string s, char c, std::deque<std::string>& ret)
{
    std::string line;
    std::stringstream ss(s);

    while(std::getline(ss, line, c))
        ret.push_back(line);
}
template<typename T> T FiveDimension::StringToAll(std::string val)
{
    std::stringstream s(val);
    T ret;
    s >> ret;
    return ret;
}
template<typename T> bool FiveDimension::TryStringToAll(std::string val, T &ret)
{
    std::stringstream s(val);
    return (s >> ret);
}
template<typename T> std::string FiveDimension::AllToString(T val)
{
    std::stringstream s;
    s << val;
    return s.str();
} 
```

我也试过例如：

```
template<typename T> std::string FiveDimension::AllToString<T>(T val)
{
    std::stringstream s;
    s << val;
    return s.str();
} 
```

但这甚至没有编译这个文件，让我觉得我对模板一无所知，所以我来到了这里。我阅读了 Aaron 关于这个主题的答案：[“未定义的引用”模板类构造函数](https://stackoverflow.com/questions/8752837/undefined-reference-to-template-class-constructor)。之后我明白了很多。但是我怎样才能预定义一个函数呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T14:49:08.417

模板不是实际代码，它是在填写完所有模板参数后构建代码的指令。为此，编译器必须在使用模板函数时具有完整的模板定义。您必须使模板化代码可从头文件访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T14:55:49.893

我会做一个简短的答案，那就是在你提到的主题中：有两种方法可以解决这个问题：

1.  使用内联（我知道，你不想这样做，但它是更通用和正确的方法）。
2.  使用您将在 .cpp 文件中使用的类型的定义。

对于模板类，您应该使用以下代码：

```
template class your_class_name < typename_to_use >; 
```

其中 typename_to_use 类似于 int、std::string 或其他。对于模板函数，您应该使用以下代码：

```
template return_type your_function_name<typename_to_use>(...parameters); 
```

对于模板成员函数，您应该使用以下代码：

```
template return_type your_class_name::your_function_name<typename_to_use>(...parameters); 
```

或者

```
template return_type your_class_name<class_typename_to_use>::your_function_name<function_typename_to_use>(...parameters); 
```

最后一种情况是描述模板类使用模板函数的情况。

# java - 使用 JPA 删除实体

> ID：10899177
> 
> 赞同：1
> 
> 时间：2012-06-05T14:25:46.660
> 
> 标签：java, jpa, playframework, persistence

我无法从数据库中删除实体。我有两个班级，其中一个是收据，另一个是服务。收据有

```
 @ElementCollection
@OneToMany(cascade={CascadeType.ALL}, orphanRemoval=true)
public List<Serving> servings; 
```

我正在尝试从控制器中删除服务。

```
Serving serving = Serving.findById(servID);
serving.delete(); 
```

结果是；

发生执行异常 PersistenceException：org.hibernate.exception.ConstraintViolationException：无法执行 JDBC 批量更新

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T14:33:57.553

就像是：

```
Receipt receipt = serving.getReceipt();
receipet.setServings(receipt.getServings().remove(serving)); 
```

由于 Receipt 是其 Serving 的 OO 所有者，因此从 OO 的角度来看，Receipt 必须知道何时删除 Serving。

也许在 Receipt 上为 Serving 或 servingId 写一个查找器。

（您确定 Servings 不应该知道它属于哪个收据吗？- orphanRemoval 似乎表明 Serving 确实属于一个且仅一个收据）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T14:30:32.607

阅读堆栈跟踪的其余部分，您应该会找到已违反的约束的名称。您可能有一些其他实体引用您尝试删除的服务（即，其他一些行具有您尝试删除的服务行的外键）。

因此，为了能够删除此实体，您必须确保所有通过外键引用它的实体不再引用它。如何做到这一点取决于这些实体是哪些实体，它们与 Serving 的关系是如何实现的，以及您想要做什么：只需删除关联，或者也删除引用实体。

# http - 如何使用 HTTP 协议实施“警告”？

> ID：10899178
> 
> 赞同：0
> 
> 时间：2012-06-05T14:25:47.207
> 
> 标签：http, network-protocols

我的服务器应用程序为内部监控提供了一个特殊的 URL `/myapp/status`。如果应用程序正常，则返回带有代码的 HTTP 响应`200 (Ok)`，否则返回带有代码的响应`503 (service unavailable)`。

现在我想添加一个“警告”案例（“我不好，但仍然可用”）。在这种情况下，我希望我的应用程序返回带有代码 200 的响应并说明“警告”。

是否有意义？我可以连同代码一起发送“原因”`200`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:31:26.223

如果您想保持 HTTP 语义的真实性，请继续返回`200 OK`代码，但将`Warning:`标头添加到响应中（这些标头是根据[RFC 2616](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.46)定义的）。

# javascript - jquery正则表达式电子邮件验证

> ID：10899186
> 
> 赞同：-2
> 
> 时间：2012-06-05T14:26:05.090
> 
> 标签：javascript, jquery, asp.net, validation

> **可能重复：**
> [如何使用正则表达式来验证电子邮件地址？](https://stackoverflow.com/questions/201323/how-to-use-a-regular-expression-to-validate-an-email-addresses)

我已经尝试了所有标准选项，但没有一个对电子邮件有帮助：*blablabla-K@kiev.foxtrot.ua*

我在 asp.net webforms 中的自定义验证器的客户端功能：

```
function requiredFields(source, args) {

                var reg = new RegExp('/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/');

                var email = $('#tbEmail').val();
                args.IsValid = ((email.length > 0) && (reg.test(email)));
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T11:14:28.417

```
<script type="text/javascript">
$(document).ready(function() {
  $('#txtEmail').blur(function() {
  if(validateEmail('txtEmail'))
  {
      alert('Email is valid');
  }
  else
  {
      alert('Invalid Email Address');
  }
 });
});
function validateEmail(txtEmail){
   var a = document.getElementById(txtEmail).value;
   var filter = /^((\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*?)\s*;?\s*)+/;
if(filter.test(a)){
    return true;
}
else{
    return false;
}
}
</script> 
```

电子邮件地址：

```
< input type='text' id='txtEmail' /> 
```

现场演示点击这里[1](http://jsfiddle.net/jquerybyexample/LQAYy/)

# javascript - 使用 Python 自动化 HTTP 导航和 HTML 打印

> ID：10899192
> 
> 赞同：2
> 
> 时间：2012-06-05T14:26:30.297
> 
> 标签：javascript, python, html, automation

每个星期一在工作中，我都有打印出 50 多个帐户的帐户分析（投资组合分析）和帐户头寸的任务。于是我进入页面，点击“账户分析”，输入账户名称，点击“格式化此页面打印”，打印输出（不包括公司披露），然后我回到账户分析页面，点击“仓位”而这一次，该账户的头寸出现了。然后我点击“格式化此页进行打印”，打印输出（不包括公司披露）。然后我对其他 50 个帐户重复此过程。

我过去没有上过任何编程课程，但我听说使用 python 来自动化 html 响应可能会帮助我更快地做到这一点。我想知道这是不是真的，如果是这样，它是如何工作的？此外，是否有任何其他程序可以使我自动化此过程并节省时间？

太感谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:30:01.577

您可以查看[mechanize](http://wwwsearch.sourceforge.net/mechanize/) for Python 及其[文档](http://wwwsearch.sourceforge.net/mechanize/documentation.html)，以获得如何实现这一点的良好起点。

它将使您能够在 Python 中模拟浏览器并完成诸如填写 Web 表单和为您进行处理等步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T14:31:01.803

我认为你会更容易获得像 autoit 这样的程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T14:32:04.230

如果您可以运行 Firefox 并希望避免实际编码，则 Selenium IDE firefox 扩展可能是解决方案。

[http://seleniumhq.org/projects/ide/](http://seleniumhq.org/projects/ide/)

您可以在浏览器中记录操作，并在需要时重播它们。

# apache - Apache mod_rewrite，强制 https，从根文件夹转发

> ID：10899193
> 
> 赞同：0
> 
> 时间：2012-06-05T14:26:31.697
> 
> 标签：apache, mod-rewrite

我昨天问了一个关于这个的问题，但我的 httpd.conf 仍然有问题。

我想要发生的是这样的：

*   用户请求`http://www.mysite.com/`或`mysite.com`等。然后将它们重定向到`https://www.mysite.com/shop/`

*   我还想确保`/shop`子目录下的任何请求也被重写为 HTTPS，即使用户在其中键入的`http://www.mysite.com/shop/help/`内容将被重写为`https://www.mysite.com/shop/help/`

这是我现在的配置，它不起作用。

```
Listen *:443 https
Listen *:80 http

<VirtualHost *:80>
    RewriteEngine on
    ReWriteCond %{SERVER_PORT} !^443$
    RewriteRule ^(shop/.*)$ https://%{HTTP_HOST}/shop/$1 [NC,R=301]
    RewriteRule ^/$ https://%{HTTP_HOST}/shop/ [NC,R=301,L]
</VirtualHost>

<VirtualHost *:443>
    SSLEngine On
    SSLAppName QIBM_HTTP_SERVER_ZENDSVR
    SetEnv HTTPS_PORT 443
    RewriteEngine on
    RewriteRule ^/$ https://%{HTTP_HOST}/shop/ [NC,R=301]
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T07:51:30.913

首先，确保 mod_rewrite 在您的服务器收到请求时启动。例如，将所有请求从您的 HTTP 主机重定向到您的 HTTPS 服务器

```
<VirtualHost *:80>
    RewriteEngine on
    RewriteRule .* https://%{HTTP_HOST}/shop/ [R,L]
</VirtualHost> 
```

然后尝试

```
<VirtualHost *:80>
    RewriteEngine on
    RewriteRule ^/?shop/(.*) https://%{HTTP_HOST}/shop/$1 [NC,R=301,L]
    RewriteRule ^/?$ https://%{HTTP_HOST}/shop/ [R=301,L]

    # other directives
</VirtualHost>

<VirtualHost *:443>
    RewriteEngine on
    RewriteRule ^/?$ https://%{HTTP_HOST}/shop/ [R=301,L]

    # other directives
</VirtualHost> 
```

# c++ - hash_map 不工作

> ID：10899197
> 
> 赞同：0
> 
> 时间：2012-06-05T14:26:42.187
> 
> 标签：c++, hashmap

```
#include <ext/hash_map>

using namespace std;

class hash_t : public __gnu_cxx::hash_map<const char*, list<time_t> > { };
hash_t hash;

... 
```

我在使用这个 hash_map 时遇到了一些问题。用作键的 const char* im 始终是长度为 12 的数字，格式为 58412xxxxxxx。我知道有 483809 个不同的数字，所以这应该是插入所有内容后的 hash_map 大小，但我只得到 193 个条目。

```
hash_t::iterator it = hash.find(origen.c_str());
if (it != hash.end()) { //Found

    x++;
    (*it).second.push_front(fecha);         
}
else { //Not found

    y++;
    list<time_t> lista(1, fecha);
    hash.insert(make_pair(origen.c_str(), lista));          
} 
```

使用 python 字典（我得到正确数量的条目），相同的过程可以完美地工作，但使用 c++ 甚至不能关闭。是否有可能因为每个键都以 58412 开头（实际上几乎每个键，但不是全部，这就是我不想砍掉这 5 个字符的原因），我遇到了很多冲突？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T14:29:25.573

`const char*`对键不好，因为您现在有指针比较而不是字符串比较（另外，您可能有悬空指针，的返回值`c_str()`不能长期使用）。

改为使用`hash_map<std::string, list<time_t> >`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T14:30:20.877

如果您的 key 是`char*`，那么您正在比较的不是字符串，而是指针，这使得您的 hashmap 的工作方式与您期望的不同。考虑使用`const std::string`for 键，因此它们使用字典顺序进行比较

# salesforce - 如何在单元测试期间访问 VF 页面的内容

> ID：10899199
> 
> 赞同：1
> 
> 时间：2012-06-05T14:26:49.940
> 
> 标签：salesforce, apex-code, visualforce

我需要测试多个返回 XML 的调用。将 XML 存储在我的单元测试的模拟类中并不是一个很好的解决方案。

我想知道是否还有另一种 Salesforce 对象类型，我可以将 XML 粘贴到单元测试期间可以访问的位置。我已经知道 PageReference 的 getContent() 在单元测试期间没有做任何事情（很糟糕）。

当然，Apex 允许在字符串文字中使用换行符，因此剪切和粘贴 XML 会更容易，但是唉……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T20:07:31.433

为了测试进行 xml 解析的类，我创建了简单的

```
final static string xmlString = 'xml goes here'; 
```

在这个测试课程中。然后我通过将此字符串传递给执行 xml 解析的方法来使用它。

为什么需要发明自行车？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T15:50:37.243

将 XML 存储在静态资源中，然后从测试代码中查询 StaticResource 对象：

```
StaticResource sr = [select Body from StaticResource where Name='Test_XML' limit 1];
String xmlString = String.valueOf(sr.Body);
Dom.Document doc = new Dom.Document();
doc.load(testXML); 
```

# c# - 从 C# 代码调用 C++ 本机 dll

> ID：10899200
> 
> 赞同：1
> 
> 时间：2012-06-05T14:26:53.960
> 
> 标签：c#, c++, c++-cli

我编写了全部原生 C++ 代码 dll，我想使用 P/Invoke 通过 C# 代码调用他的方法。我需要为此更改本机 dll 的属性吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T14:36:23.827

P/Invoking 需要 stdcall 约定。所以看看你的所有函数声明是否都在 __stdcall 之前。否则堆栈会损坏。

另请查看[PInvokeStackImbalance C# 对非托管 C++ 函数的调用](https://stackoverflow.com/questions/2390407/pinvokestackimbalance-c-sharp-call-to-unmanaged-c-function)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T14:31:36.210

不，您不需要更改 DLL 本身的属性，但您需要确保调用约定与 C# 中使用的约定匹配。然后，您需要在 C# 中声明您的可调用函数，并使用匹配的参数和 C++ 中的返回类型。

现在您可以在 C# 中调用您的函数。

除了 C++ 函数的调用约定之外，它应该相当容易。

# python - python从已经打开的文件中获取数据

> ID：10899201
> 
> 赞同：2
> 
> 时间：2012-06-05T14:26:54.837
> 
> 标签：python, file, inputstream

```
f=open("vmi","w")
f.write("asdf")
import os
os.path.getsize("vmi")
#0 byte
f.close()
os.path.getsize("vmi")
# 4 bytes 
```

在文件关闭之前，我在哪里可以找到丢失的 4 个字节，在程序执行时？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T14:28:12.563

您可以尝试先清除数据：

```
f.flush() 
```

你为什么需要这样做？好吧，出于性能原因，操作系统会尝试缓冲对文件的写入 - 一次写入 1024 个字节比只写出整个缓冲区要慢得多。因此，每当您使用文件/管道/套接字之类的东西时，请记住它可能正在缓冲写入，您`flush`首先需要这样做。

当您关闭文件时，它会自动刷新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T14:32:43.690

试试这个：

```
import os
f = open("vmi", "w")
f.write("asdf")
f.flush()
os.path.getsize("vmi")
#4 byte
f.close()
os.path.getsize("vmi")
# 4 bytes 
```

# javascript - Backbone.js 模板需要Phonegap 中的无效html？

> ID：10899203
> 
> 赞同：0
> 
> 时间：2012-06-05T14:27:02.303
> 
> 标签：javascript, cordova, backbone.js

tl;dr ：在我的模板文件中，如果我没有无效的 html，则模板不会显示在 Phonegap 中。

我的索引的 HTML 如下所示：

```
<body onload="onBodyLoad()">
    <div data-role="page">
      <a href="#login" id="clickme">Click to go to Login</a>
    </div>
  </body> 
```

我的模板文件（目前）很简单：

```
<div data-role='content' id='loginpage'>
this is a test
</div> 
```

问题是，当我尝试使用此主干代码显示该模板时：

```
var LoginPage = Backbone.View.extend({
    initialize: function(){
      this.template = _.template(tpl.get("login"));
      console.log("Got Login Template");
      console.log(this.template);
    },

    render: function(e){
        console.log("rendering login page with the following user");
        console.log(this.model);
        $(this.el).html(this.template(this.model));
        this.mainView = new LoginView({ el: $("#loginpage", this.el), model: this.model });
        this.mainView.render();
        return this;
    }
});

var LoginView = Backbone.View.extend({

    initialize: function(){
    },

    render: function(e){
        console.log("rendering login view");
        return this;
    }
}); 
```

它不起作用。

真正有趣的部分是，如果我在模板文件中添加一个没有有效伙伴的打开或关闭标签，它会完美显示。它可以是 close `div`、 opening `table`、 opening `label`、 closing`p`等。到目前为止，只要该标签无效，我尝试过的任何标签都可以使其工作。

太好了……wtf？
我应该指出它在 Chrome 中的任何一种方式都有效。

**编辑**

这就是这样`tpl`做的，并且似乎错误在这里发生了。如果 HTML 有效，则不会加载。

```
tpl = {

    // Hash of preloaded templates for the app
    templates: {},

    // Recursively pre-load all the templates for the app.
    // This implementation should be changed in a production environment. All the template files should be
    // concatenated in a single file.
    loadTemplates: function (names, callback) {
        var that = this;

        var loadTemplate = function (index) {
            var name = names[index];
            console.log("Loading " + name);

            $.ajax({
                url: 'templates/' + name + '.html',
                data: {},
                success: function (data){
                    that.templates[name] = data;
                    index++;
                    if (index < names.length) {
                        loadTemplate(index);
                    } else {
                        callback();
                    }
                },
                error: function (msg) {
                    console.log(msg);
                },
                async: false
            });
        };

        loadTemplate(0);
    },

    // Get template by name from hash of preloaded templates
    get:function (name) {
        console.log('getting ' + name);
        var temp = this.templates[name];
        console.log('got it!');
        return temp;
    }

}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T16:46:38.760

I had the more of less similar issue with backbone template when I run it in device, I changed the loadTemplate method to following and it resolved the issue.

```
var loadTemplate = function (index) {
            var name = names[index];
            console.log('Loading template: ' + name);

            var data = $.ajax({type: 'GET', url: 'tpl/' + name + '.html', async: false}).responseText;
            that.templates[name] = data;
            index++;
            if (index < names.length) {
                loadTemplate(index);
            } else {
                callback();
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T22:50:23.080

詹姆士。

```
<div data-role='content' id='loginpage'>
this is a test 
</div> 
```

抱歉，它是您真正用于 LoginPage 视图的模板吗？但是您使用 a作为参数调用该`template`方法。`model`我很困惑。所以我认为这就是问题所在。尝试从 更改`$(this.el).html(this.template(this.model));`为`$(this.el).html(this.template(this.model.toJSON()));`

# c# - 表单加载时启用的项目，即使它的 IsEnabled 绑定到可能是错误的值

> ID：10899208
> 
> 赞同：0
> 
> 时间：2012-06-05T14:27:28.267
> 
> 标签：c#, wpf, data-binding, isenabled

我希望 LastNumberWeeks NumericUpDown 在表单加载时被禁用，但事实并非如此。一旦我来回切换收音机选择，它就可以正常工作，只是不是在第一次加载时。除了在代码中明确设置此值之外，我还能做什么（由于这种情况，我真的不想使用后面的代码）。

```
<RadioButton GroupName="DayRangeGroup" Content="Last number of usable occurences:"  Name="LastUsableOccurancesRadioButton" IsChecked="True" />           
<winControls:NumericUpDown x:Name="LastUsableOccurances" IsEnabled="{Binding ElementName=LastUsableOccurancesRadioButton, Path=IsChecked}"   />      
<RadioButton GroupName="DayRangeGroup"Content="Last number of weeks:"  Name="LastNumberOfWeeksRadioButton"  />          
<winControls:NumericUpDown x:Name="LastNumberWeeks" IsEnabled="{Binding ElementName=LastNumberOfWeeksRadioButton, Path=IsChecked}" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:54:26.510

我刚刚用 a`TextBox`而不是测试了 XAML `winControls:NumericUpDown`，它在加载时按预期工作，所以 XAML 没有问题。尝试将 UpdateSourceTrigger 设置为 PropertyChanged 以查看是否有帮助。您也可以尝试使用视图模型来绑定而不是绑定到元素。

# javascript - 切换 jquery 显示/隐藏第一次单击不起作用

> ID：10899211
> 
> 赞同：1
> 
> 时间：2012-06-05T14:27:51.353
> 
> 标签：javascript, jquery, toggle

为什么我的第一次点击不起作用，第二次点击！

这是代码

```
$(function () {
    $("#clickme").toggle(function () {
        $(this).parent().animate({left:'0px'}, {queue: false, duration: 500});
    }, function () {
        $(this).parent().animate({left:'-280px'}, {queue: false, duration: 500});
    });
});​ 
```

[http://jsfiddle.net/yHPTv/](http://jsfiddle.net/yHPTv/)

在 jsfiddle 中它有效，但在我的页面上我必须按 2 次？

有谁能够帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:36:17.953

好的，这就是你的全部脚本吗？尝试在文档就绪事件上设置功能

```
$(document).ready(function () {
    $("#clickme").toggle(function () {
        $(this).parent().animate({left:'0px'}, {queue: false, duration: 500});
    }, function () {
        $(this).parent().animate({left:'-280px'}, {queue: false, duration: 500});
    });
}); 
```

# powerbuilder - PowerBuilder 批处理

> ID：10899222
> 
> 赞同：0
> 
> 时间：2012-06-05T14:28:54.707
> 
> 标签：powerbuilder, batch-processing

我不是 PowerBuilder 专家。我的印象是 PowerBuilder 用于开发 GUI 应用程序，包括基于浏览器的应用程序和胖客户端应用程序。

我的问题是，PowerBuilder 是否也可以用于开发非 GUI 应用程序 - 然后可以通过调度程序安排一个进程以无人值守的方式运行？.NET 世界中的等效应用程序类型是控制台应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T16:18:15.050

你当然可以。`application object's`您可以在打开的事件中开始编码，您可以使用`functions`它们本质上是全局的，对于更多的面向对象，您可以使用`non-visual objects`（NVO）和`datastores`（没有显示属性的数据窗口）进行数据管理和访问。一切都在那里，您可以开发出色的应用程序，而无需在 Windows 中向用户显示任何内容。如果您需要接收命令行参数，请`commandline`在应用程序对象的`open`事件中查找参数。

如果您仍然不确定我在这里指出的内容，请询问，然后我可以尝试澄清或更详细地回答。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T16:24:47.277

您需要在PowerBuilder 中实现的第一个对象是*应用程序*（即PB VM 启动时将加载的第一个对象）。它是一个*非可视*对象（除了任务栏）。

然后，您*可以*从应用程序的事件或任何其他方法打开一些窗口`open()`，或者您只能遇到非可视对象，这取决于您要执行的操作。如果不需要，您将*不需要*看到 GUI 窗口。

从 Windows/winapi 的角度来看，PB 应用程序是图形应用程序，而不是控制台应用程序。也就是说，当您启动它时，您不会看到控制台窗口，也无法像*开箱即用*的命令行应用程序那样向标准输出写入内容。顺便说一句，如果你需要一个控制台，你可以破解编译后的应用程序 PE 头的相应字段，或者你可以使用控制台 api 来创建一个。

# javascript - 按 ID 识别行，然后按类识别其中一个单元格

> ID：10899226
> 
> 赞同：1
> 
> 时间：2012-06-05T14:29:07.030
> 
> 标签：javascript, html-table

鉴于此表：

```
<table border="1" width="200" id="table1" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#CB2F7F">
    <tr id="st_ppp">
        <td width="60%" class="totalLabels">Price per piece</td>
        <td width="39%" align="right" class="totalElements">unknown</td>
    </tr>
    <tr id="st_qty">
        <td width="60%" class="totalLabels">Quantity</td>
        <td width="39%" align="right" class="totalElements">unknown</td>
    </tr>
    <tr>
        <td width="60%">&nbsp;</td>
        <td width="39%" align="right">&nbsp;</td>
    </tr>
    <tr>
        <td width="60%" class="subTotalLabel">Sub-Total:</td>
        <td width="39%" align="right" class="subTotal">unknown</td>
    </tr>
</table> 
```

我想做类似下面的伪代码：

```
document.getElementById("st_ppp").[td whose class is totalElements].innerHTML="NewPrice";
document.getElementById("st_qty").[td whose class is totalElements].innerHTML="NewQty"; 
```

我也愿意接受对 HTML 进行任何其他更改的建议，这些更改将使 JS 更易于使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T14:31:25.870

只需使用`querySelector`（[MDN 链接](https://developer.mozilla.org/En/DOM/Document.querySelector)）和相应的 CSS 选择器来获取您的元素并更改其内容。

```
document.querySelector( '#st_ppp .totalElements' ).innerHTML = "NewPrice";
document.querySelector( '#st_qty .totalElements' ).innerHTML = "NewQty"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T14:33:42.367

如果您不担心与 Internet Explorer 7 及更早版本的兼容性，`querySelector`那么它是完美的（但如果您采用这种方式，则归功于 @Sirko）：

```
document.querySelector('#st_ppp > .totalElements').innerHTML = "NewPrice"; 
```

如果您已经在使用 jQuery，那么它非常适合：

```
$('#st_ppp > .totalElements').text('NewPrice'); 
```

否则，循环将起作用：

```
var pricePerPiece = document.getElementById('st_ppp');
var i, c;

for(i = 0; c = pricePerPiece.children[i]; i++) {
    if((' ' + c.className + ' ').indexOf(' totalElements ') > -1) {
        c.innerHTML = 'NewPrice';
        break;
    }
} 
```

# python - 在 python xmlrpc 代理上使用 getattr

> ID：10899229
> 
> 赞同：2
> 
> 时间：2012-06-05T14:29:22.943
> 
> 标签：python, xmlrpclib

[这个答案](https://stackoverflow.com/a/4502576/7432)意味着我可以在 xmlrpc 服务器代理上使用 getattr。但是，就我而言，这似乎不起作用。我错过了定义服务器的步骤吗？

我的服务器代码是这样的：

```
import SimpleXMLRPCServer
class Listener(object):
    def ping(self):
        return "ping"
s = SimpleXMLRPCServer.SimpleXMLRPCServer(("localhost",8910), allow_none=True)
l = Listener()
s.register_instance(l)
s.register_introspection_functions()
s.serve_forever() 
```

当我以交互方式使用它时，我可以调用 ping 函数，但我不能在代理上使用 getattr：

```
$ python -i
ActivePython 2.7.2.5 (ActiveState Software Inc.) based on
Python 2.7.2 (default, Jun 24 2011, 12:22:14) [MSC v.1500 64 bit (AMD64)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> import xmlrpclib
>>> proxy = xmlrpclib.ServerProxy("http://localhost:8910", allow_none=True)
>>> proxy.ping()
'ping'
>>> getattr(proxy, "ping")
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "c:\Python27\lib\xmlrpclib.py", line 1224, in __call__
    return self.__send(self.__name, args)
  File "c:\Python27\lib\xmlrpclib.py", line 1575, in __request
    verbose=self.__verbose
  File "c:\Python27\lib\xmlrpclib.py", line 1264, in request
    return self.single_request(host, handler, request_body, verbose)
  File "c:\Python27\lib\xmlrpclib.py", line 1297, in single_request
    return self.parse_response(response)
  File "c:\Python27\lib\xmlrpclib.py", line 1473, in parse_response
    return u.close()
  File "c:\Python27\lib\xmlrpclib.py", line 793, in close
    raise Fault(**self._stack[0])
xmlrpclib.Fault: <Fault 1: '<type \'exceptions.Exception\'>:method "ping.__repr__" is not supported'>
>>> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T14:56:56.483

它在交互式控制台中不能以这种方式工作。控制台想要显示`repr`函数的，但尝试调用`ping.__repr__`失败。

分配给变量有效：

```
>>> f = getattr(proxy, 'ping')
>>> f()
'ping' 
```

# data-binding - grails弹性搜索数据绑定错误

> ID：10899236
> 
> 赞同：0
> 
> 时间：2012-06-05T14:29:57.677
> 
> 标签：data-binding, grails

我正在使用带有弹性搜索插件 0.18.7.1-SNAPSHOT 的 grails 2.0.0 M1。

我可以安装它，并且可以看到它使用默认配置运行良好。我还可以从我的 DBBootStrap.groovy 文件中看到我的域对象被创建并成功添加到索引中。

然而...

当尝试从 Web 层仅创建（不保存）域对象时（在 Bootstap 脚本成功运行后），我收到以下错误：

```
def testco = new Company(name:"test");

Line | Method
->>  13 | registerCustomEditors in     org.grails.plugins.elasticsearch.conversion.CustomEditorRegistar
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|    38 | test                  in com.tempism.company.CompanyController
|   886 | runTask . . . . . . . in java.util.concurrent.ThreadPoolExecutor$Worker
|   908 | run                   in     ''
^   619 | run . . . . . . . . . in java.lang.Thread 
```

进一步的调查揭示了一个堆栈跟踪，相关部分是......

```
java.lang.NullPointerException
    at groovy.lang.MetaClassImpl.addToAllMethodsIfPublic(MetaClassImpl.java:2975)
    at groovy.lang.MetaClassImpl.addProperties(MetaClassImpl.java:2954)
    at groovy.lang.MetaClassImpl.initialize(MetaClassImpl.java:2918)
    at groovy.lang.ExpandoMetaClass.initialize(ExpandoMetaClass.java:468)
    at     org.codehaus.groovy.reflection.ClassInfo.getMetaClassUnderLock(ClassInfo.java:166)
    at org.codehaus.groovy.reflection.ClassInfo.getMetaClass(ClassInfo.java:182)
    at org.codehaus.groovy.runtime.metaclass.MetaClassRegistryImpl.getMetaClass(MetaClassRegistryImpl.java:242)
    at org.codehaus.groovy.runtime.InvokerHelper.getMetaClass(InvokerHelper.java:751)
    at org.codehaus.groovy.runtime.callsite.CallSiteArray.createCallConstructorSite(CallSiteArray.java:71)
    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallConstructor(CallSiteArray.java:54)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callConstructor(AbstractCallSite.java:182)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callConstructor(AbstractCallSite.java:190)
    at org.grails.plugins.elasticsearch.conversion.CustomEditorRegistar.registerCustomEditors(CustomEditorRegistar.groovy:13)
    at org.codehaus.groovy.grails.web.binding.GrailsDataBinder.registerCustomEditors(GrailsDataBinder.java:182)
    at org.codehaus.groovy.grails.web.binding.GrailsDataBinder.registerCustomEditors(GrailsDataBinder.java:263)
    at org.codehaus.groovy.grails.web.binding.GrailsDataBinder.createBinder(GrailsDataBinder.java:287)
    at org.codehaus.groovy.grails.web.binding.DataBindingUtils.createDataBinder(DataBindingUtils.java:238)
    at org.codehaus.groovy.grails.web.binding.DataBindingUtils.bindObjectToDomainInstance(DataBindingUtils.java:169)
    at org.codehaus.groovy.grails.web.binding.DataBindingUtils.bindObjectToDomainInstance(DataBindingUtils.java:112)
    at     org.codehaus.groovy.grails.plugins.web.api.ControllersDomainBindingApi.initialize(ControllersDomainBindingApi.java:57)
    at com.tempism.company.Company.<init>(Company.groovy) 
```

在 grails 中相对较新，我不知道如何在 DBBootStrap 上下文中创建域对象/DataBinding，但不能在任何其他上下文（服务/控制器。

任何想法将不胜感激。

干杯。

更新...

```
//works
def co =  new Company();
co.name = "hello"
co.save();

//doesn't work
new Company(name:"hello2").save(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T18:42:28.270

通过更新到 grails 2.0.1 解决

# c# - 通过 Web 套接字快速发送 base64 字符串？

> ID：10899241
> 
> 赞同：1
> 
> 时间：2012-06-05T14:30:11.110
> 
> 标签：c#, javascript, node.js, base64, socket.io

我试图通过捕获 jpeg 图像并将其转换为 base64 字符串来创建视频流，然后使用 websockets（Nodejs 和 socket.io）发送它以在 HTML5 画布上绘图。这是 C# 中用于捕获屏幕并使用[SocketIO4Net](http://socketio4net.codeplex.com/)库发送屏幕的代码：

```
Client directSocket = new Client("http://IPHERE");
directSocket.Connect();

private void timer1_Tick(object sender, EventArgs e)
{
    Rectangle bounds = Screen.GetBounds(Point.Empty);
    Bitmap bitmap = new Bitmap(bounds.Width, bounds.Height);

    using (Graphics g = Graphics.FromImage(bitmap))
    {
        g.CopyFromScreen(Point.Empty, Point.Empty, bounds.Size);
    }

    pictureBox1.Image = bitmap;

    // Convert the pictureBox into a byte[] array
    System.IO.MemoryStream stream = new System.IO.MemoryStream();
    pictureBox1.Image.Save(stream, System.Drawing.Imaging.ImageFormat.Jpeg);
    byte[] imageBytes = stream.ToArray();

    // Convert byte[] to Base64 string
    string base64String = Convert.ToBase64String(imageBytes);

    // Send using SocketIO4Net
    directSocket.Emit("send", new { message = base64String });
} 
```

这工作正常，base64String 被发送到发出它的节点服务器。这是客户端的javascript代码：

```
var socket = io.connect('IPHERE');

socket.on('receive', function (data) {
    var canvas = document.getElementById('canvas');
    var context = canvas.getContext('2d');

    var img = new Image();
    img.onload = function () {
        context.drawImage(img, 0, 0, canvas.width, canvas.height);
    };

    img.src = "data:image/jpeg;base64," + data.message.message;
}); 
```

我的问题是 base64String 很大，发出的速度不够快，客户端无法接收它并在画布上显示图像。我不确定它是我的节点服务器（它是一个便宜的 VPS）还是字符串太大。是否可以压缩base64String，然后在收到时将其发送解压缩？或者我有其他方法可以做到吗？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:35:46.150

您可以尝试将图像保存为质量较低的 jpg。您可以使用接受编码器和编码器参数的[保存覆盖。](http://msdn.microsoft.com/en-us/library/ytz20d80)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T06:05:32.083

l昨天我用c#测试它-到base64-websocket-连接到gwt（java脚本）img对象。我在 Intranet 中使用它，流性能很好。但是，如果您对其进行测试，您会在 Firefox 中看到内存泄漏。因为 Firefox 会缓存所有图像。在我的情况下，每秒 10 张。一张图片 200kb。这个弱我测试画布部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T23:54:35.030

如果您只需要支持现代浏览器，请使用画布元素并将该数据作为原始字节发送。使用 ImageData 对象将数据推送到画布元素中。

有关如何创建 ImageData 对象的更多信息，请参阅 MDN 文章[“使用画布进行像素操作” 。](https://developer.mozilla.org/En/HTML/Canvas/Pixel_manipulation_with_canvas)

# header - 如何用非常小的背景图片填充博主标题

> ID：10899242
> 
> 赞同：0
> 
> 时间：2012-06-05T14:30:20.463
> 
> 标签：header, blogger

我正在使用博主，在我的博主标题中我有我的网站标题和描述。我想在上面添加一个背景。我已经挑选了一张背景图片，但它的尺寸非常小（10px 宽和 10px 高），我该如何填充我的博主标题的整个背景图片？

我还想在我的博客标题中添加另一列，我可以在其中添加我的徽标。我还希望该徽标变成指向我主页的链接。

谢谢，祝你有美好的一天。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T14:44:22.937

如果你想用一个小图像为你的标题添加背景，你必须使用 css 样式`background-repeat: repeat;`，它会为你完成这项工作。

关于你的第二个问题，你应该在你的标题中寻找 maxwidgets 。将其更改为 2（或超过 2），然后您就可以添加另一个小工具。您还应该需要将`float:left;`css 属性添加到标题中，以便对齐。

# msbuild - 即使一个特定的 NUnit 测试失败，MSBuild 也不应该失败

> ID：10899244
> 
> 赞同：1
> 
> 时间：2012-06-05T14:30:23.597
> 
> 标签：msbuild, nunit, cruisecontrol.net

我已将持续构建过程与 Cruise Control 集成在一起。在 EOD 时，它会生成一个构建报告。如果任何 NUnit 测试用例失败，则构建失败。我们编写了一个特定的测试用例并将其添加到单独的 dll 中。如果该程序集中的任何测试用例失败，我们不希望我们的构建失败。我们正在使用 MSBuild 目标、.proj 文件和巡航控制、ccnet 配置文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T19:54:04.013

我会调用 NUnit 两次：一次用于测试，如果没有通过，您希望构建失败，然后第二次运行您不想影响构建结果的测试，例如，

```
<!-- Any failing tests in Assembly1.dll will cause the build to fail. -->
<Exec Command="nunit.exe Assembly1.dll" />

<!-- Any failing tests in Assembly2.dll won't fail the build because the ContinueOnError attribute is set to True. -->
<Exec Command="nunit.exe Assembly2.dll" ContinueOnError="True" /> 
```

# mysql - 在mysql中分离匹配和不匹配的值

> ID：10899252
> 
> 赞同：0
> 
> 时间：2012-06-05T14:30:46.540
> 
> 标签：mysql, match

我有两个具有相同字段的表。我想比较其中一个字段并在第 3 和第 4 个表中移动匹配和不匹配的值。谁能帮我这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T14:34:59.837

假设表 A 和表 B。

```
insert into table C values(select colA from A,B where colA=colB)
insert into table D values(select colA from A,B where colA!=colB) 
```

# python - Qt & SqlAlchemy - Qtableview

> ID：10899254
> 
> 赞同：-1
> 
> 时间：2012-06-05T14:30:55.797
> 
> 标签：python, qt, sqlalchemy, pyside, qtableview

好的 - 使用 pyside 和 sqlalchemy 向一个非常简单的 MVC 应用程序迈出小步……这些小步骤让我卡在第 1 步！

我想用数据填充 QTableView。我应该使用 QSqlTableModel 还是 QStandardItemModel 或 QAbstractItemModel... 或其他东西。如果使用 QSqlTableModel，我可以只“setTable”（如果是，如何）。

如果有人能指出一个像样的教程或好的 qt/sqlalchemy 示例的方向，我将永远感激不尽。

我知道这可能有点基本。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-05T21:38:15.570

我建议看看 Camelot 项目。

[http://www.python-camelot.com/index.html](http://www.python-camelot.com/index.html)

也许你可以从那里得到一些想法。

# html - 显示：inline-block 在 IE 中没有 DOCTYPE 时不起作用

> ID：10899255
> 
> 赞同：-2
> 
> 时间：2012-06-05T14:30:57.223
> 
> 标签：html, css

我想要一个数据块，其宽度和高度必须自动调整到数据块的内部内容。我通过将内容放在*显示*样式为**inline-block**的 DIV 标记中来做到这一点。如果存在 DOCTYPE 标签，它在所有浏览器中都可以正常工作。如果 DOCTYPE 不存在，它在 IE 中不起作用（div 宽度调整为浏览器的宽度）。但它在其他浏览器中起作用。有什么解决方案或替代方案....？任何人都可以帮助我....

这是我的一段代码

```
<html>
 <head>
  <title> New Document </title>
  <meta name="Generator" content="EditPlus">
  <meta name="Author" content="">
  <meta name="Keywords" content="">
  <meta name="Description" content="">
  <style>
   .MultiSelectMenu{
     border:1px solid black;
     display:inline-block;
    }
   .MultiSelectMenu ul{
     margin:0px;
     padding:0px;
   }
  .MultiSelectMenu ul li{
    list-style:none;
    background:#abc4c9;
    border-bottom:1px solid #354e53;
    padding:2px 4px 2px 4px;
    cursor:pointer;
  }
  </style>
 </head>

 <body>
   <div class="MultiSelectMenu" >
     <ul>
       <li>Telugu</li>
       <li>Hindi</li>
       <li>English</li>
       <li>Marathi</li>
       <li>Kannada</li>
       <li>Malayalam</li>
     </ul>
  </div>
 </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T16:05:50.973

添加

```
 .MultiSelectMenu { float: left; } 
```

并设置`clear: left`在元素之后的`div`元素上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T18:04:03.100

您可以将 Left Float 添加到 .MultiSelectMenu 并在完成 div 后.. 在最后一个具有 clear:both 或 left 样式的 .MultiSelectMenu div 的结束标记之后添加空 div 以清除 div 浮动。

例如：

```
.clear {
  clear:both; // or left
} 
```

html:

```
<div class="clear"></div> 
```

# c# - ListView.Delete() 方法和参数

> ID：10899258
> 
> 赞同：0
> 
> 时间：2012-06-05T14:31:12.420
> 
> 标签：c#, asp.net, .net, listview

我有一个包含 5 列的列表视图，它通过存储过程填充。那显示得很好。我还有一个 Delete 方法，它只接受一个 int（ID），但我不确定如何在列表视图的 dataSource 中定义这个方法。

我不断收到一个错误，即没有包含 5 个参数（列表视图的列名）的 Delete 方法，当然没有。有一个接受 1 个 int 参数，见下文。

我认为 DataSource Delete 方法声明一定有一些错误，谁能告诉我？

```
<asp:ObjectDataSource ID="userListDataSource" runat="server" 
            SelectMethod="GetUserList" TypeName="UserManagerBO" 
            DeleteMethod="DeleteUser">
            <DeleteParameters>
                <asp:Parameter Name="userID" Type="Int32"/>
            </DeleteParameters>
        <SelectParameters>
            <asp:ControlParameter DefaultValue="61" Name="userID" Type="Int32" 
                ControlID="lbUsers" PropertyName="SelectedValue" />
        </SelectParameters>
</asp:ObjectDataSource> 
```

删除的方法是`DeleteUser(int userID)`，它似乎总是查看 SelectParameters，即使对于我的 Delete 方法也是如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T14:39:26.107

尝试不要为删除方法提供参数，通过这样做，您可以获得选择删除的整个对象作为参数。在删除方法中，

```
Public Void DeleteUser(User usr)
{
        //delete user of usr.UserID
} 
```

# mysql - 拥有大量记录的数据库会影响读取速度吗？(MySQL)

> ID：10899264
> 
> 赞同：0
> 
> 时间：2012-06-05T14:31:34.097
> 
> 标签：mysql, database, optimization, query-optimization, where-clause

我们公司最近与特许经营权签约，为他们的客户提供我们的 POS（收银机）应用程序，这导致我们每周有大约 3-5 个新注册。目前，我们为每个新客户创建应用程序数据库的副本，但我已经可以看出这种方法最终可能会让我们崩溃。我们在想也许最好为所有诊所使用一个数据库，这些诊所由每张表上的某种形式的客户 ID 标识。

现在我们就这个话题进行了一些辩论：一位同事说拥有一个包含 50,000 人的大表会使事情变得太慢，我们必须优化整个应用程序。另一位同事说 MySQL 是为处理大型数据库而设计的，只要您在每个查询 WHERE 子句中指定客户端 ID，您就会收到数据的一个子集，速度几乎没有变化。

从大表（100,000+）中选择数据子集与从较小表中选择相同数量的行是否有显着的速度差异？

此外，任何关于数据库设计方式的建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:37:39.263

数据大小*会*影响性能，但是通过正确的索引，在 50-100k 记录中查找应该没有任何问题。我使用的生产数据库（约 125 万条记录）通过主键查找记录所需的时间可以忽略不计（少于 0.005 秒）。

仍然取决于您的实际使用情况；您最终可能不得不优化一些查询并添加一些额外的索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T14:39:13.577

我会把它们分成几张小桌子，而不是一张又长又大的桌子。如果设计和索引正确，从长远来看应该会更快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T14:40:12.243

为了提高选择（读取）查询的速度，您可以为查询所依据的列添加索引。

例如，如果您通过某种诊所标识符进行查询，您可以在该列上放置一个索引。这将帮助数据库遍历数据并找到与您的条件匹配的记录，而无需查看数据库中的每条记录（这是发生减速的地方）。如果将来您按不同的条件（比如说日期）进行查询，您也可以在该列上放置一个索引。

请记住，添加索引会提高运行时性能，但会增加存储数据所需的物理磁盘大小。

# c# - LoadScriptsBeforeUI 发生在 RegisterStartupScript 之后

> ID：10899279
> 
> 赞同：3
> 
> 时间：2012-06-05T14:32:14.353
> 
> 标签：c#, asp.net, asp.net-ajax, scriptmanager

`ScriptManager`我用（如 jquery）加载我的外部/cdn javascript 库。

```
ScriptManager.Scripts.Add(new ScriptReference(name, null)); 
```

我想在加载 UI 后加载它们

```
ScriptManager.LoadScriptsBeforeUI = false; 
```

然后我想在页面中注入一些 javascript 来使用它们：

```
CurrentPage.ClientScript.RegisterStartupScript(GetType(), "scriptName", script, true); 
```

问题是加载的脚本在when`RegisterStartupScript`之前被注入到页面中。`ScriptManager.Scripts``ScriptManager.LoadScriptsBeforeUI = false`

你知道加载`RegisterStartupScript`后的方法`ScriptManager.Scripts`吗？

我想知道课堂上是否有内置解决方案`ScriptManager`。

# magento - Magento 将 2 个类别合并为 1 个集合

> ID：10899281
> 
> 赞同：0
> 
> 时间：2012-06-05T14:32:23.113
> 
> 标签：magento

我有一个销售汽车零件的网站。我已经将我的类别设置为 Make -> Model -> Year，从这里过滤是通过属性完成的。刹车、车轮、发动机等……</p>

这会按我的预期过滤集合，但是一旦到了 Year，我还想包含通用类别中的项目。IE 该集合应包括特定汽车的项目，以及所有汽车的“通用”项目。

我发现了这个[Magento：如何将两个产品集合合并为一个？](https://stackoverflow.com/questions/5434996/magento-how-to-merge-two-product-collections-into-one)这似乎是我想要的，但我似乎无法弄清楚应该在哪里实施。

List.php、Layer.php 和 Category.php 中有 getCollection() 方法，我尝试实现上面链接中的代码，但没有成功。如果我将它包含在 List.php 中，则集合似乎已合并，但属性过滤不适用于通用产品。

我尝试在 Category.php 中编辑 getProductCollection 函数，如下所示：

```
public function getProductCollection()
{
    $collection = Mage::getResourceModel('catalog/product_collection')
        ->setStoreId($this->getStoreId())
        ->addCategoryFilter($this);
    //return $collection;

    $universalCollection = Mage::getModel('catalog/category')->load(18)->getProductCollection();

    $merged_ids = array_merge($collection->getAllIds(), $universalCollection->getAllIds());
    // can sometimes use "getLoadedIds()" as well

    $merged_collection = Mage::getResourceModel('catalog/product_collection')
        ->addFieldToFilter('entity_id', $merged_ids)
        ->addAttributeToSelect('*');

    return $merged_collection;
} 
```

但这给了我：“致命错误：达到'200'的最大函数嵌套级别，正在中止！”

如果有人可以提供任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T20:29:37.830

您收到致命错误，因为您正在导致发生无限循环。

这仅仅是因为您的代码位于 Category 模型的 getProductCollection() 方法中，并且您再次在新的类别模型上调用 getProductCollection()。这导致无限循环

因此，您需要将该代码移出那里。 **无论如何，您真的不应该像现在这样编辑这些核心文件。**

如何扩展模型完全取决于您：重写、观察者等。但不要更改 Magento 核心代码。

我在下面提供了一个工作示例，它在类别模型外部合并了两个类别产品集合：

```
 $storeId = Mage::app()->getStore()->getId();
    $categoryOneId = 10;
    $categoryTwoId = 13;

    $categoryOne = Mage::getModel('catalog/category')->load($categoryOneId);
    $categoryTwo = Mage::getModel('catalog/category')->load($categoryTwoId);

    $collectionOne = Mage::getModel('catalog/product')->getCollection()
        ->setStoreId($storeId)
        ->addCategoryFilter($categoryOne);

    $collectionTwo = Mage::getModel('catalog/product')->getCollection()
        ->setStoreId($storeId)
        ->addCategoryFilter($categoryTwo);

    $merged_ids = array_merge($collectionOne->getAllIds(), $collectionTwo->getAllIds());

    $mergedCollection = Mage::getModel('catalog/product')->getCollection()
        ->addFieldToFilter('entity_id', $merged_ids); 
```

# c# - 使用 SerialPort C# 的来电显示

> ID：10899283
> 
> 赞同：0
> 
> 时间：2012-06-05T14:32:27.810
> 
> 标签：c#, winforms

当有人拨打我的固定电话时，我正在使用 SerialPort 获取来电显示。我已经使用 PuTTy 软件对其进行了测试，它运行良好。

然而，我的 C# 代码抛出了一个 InvalidOperation 异常，并指出：跨线程操作无效：控件`lblCallerIDTitle`从创建它的线程以外的线程访问。当我尝试这样做时会发生此错误：`lblCallerIDTitle.Text = ReadData;`

我怎样才能解决这个问题？下面是我的代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.IO.Ports;

namespace CallerID
{
    public partial class CallerID : Form
    {
        public CallerID()
        {
            InitializeComponent();
            port.Open();
            WatchModem();
            SetModem();
        }

    protected override void OnPaint(PaintEventArgs e)
    {
        base.OnPaint(e);
        WatchModem();
    }

    private SerialPort port = new SerialPort("COM3");
    string CallName;
    string CallNumber;
    string ReadData;

    private void SetModem()
    {
        port.WriteLine("AT+VCID=1\n");
        port.RtsEnable = true;
    }

    private void WatchModem()
    {
        port.DataReceived += new SerialDataReceivedEventHandler(port_DataReceived);
    }

    private void port_DataReceived(object sender, SerialDataReceivedEventArgs e)
    {
        ReadData = port.ReadExisting();
        //Add code to split up/decode the incoming data
        lblCallerIDTitle.Text = ReadData;
        Console.WriteLine(ReadData);
    }

    private void CallerID_Load(object sender, EventArgs e)
    {

    }
  }
} 
```

我想要一个标签来显示传入的数据。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T14:41:00.870

您的用户控件（例如标签）必须在 UI 线程上更新，并且串行数据正在进入另一个线程。

您的两个选项是使用 Invoke() 将控件更新推送到主 UI 线程，或者让串行线程更新变量，并使用计时器控件检查该变量以更新标签。

第一个（更好的）选项的代码应该如下所示：

```
private void port_DataReceived(object sender, SerialDataReceivedEventArgs e)
{
    ReadData = port.ReadExisting();
    //Add code to split up/decode the incoming data
    if (lblCallerIDTitle.InvokeRequired)
        lblCallerIDTitle.Invoke(() => lblCallerIDTitle.Text = ReadData);
    else
        lblCallerIDTitle.Text = ReadData;
    Console.WriteLine(ReadData);
} 
```

然后标签将始终在主 UI 线程上更新。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T14:47:26.190

[`Invoke`](http://msdn.microsoft.com/en-us/library/zyzhdc6b.aspx)从另一个线程更新 UI 时需要使用。

代替...

```
lblCallerIDTitle.Text = ReadData 
```

... 和 ...

```
lblCallerIDTitle.Invoke(new SetCallerIdText(() => lblCallerIDTitle.Text = ReadData)); 
```

......在你班上的某个地方宣布这个之后......

```
public delegate void SetCallerIdText(); 
```

虽然我更喜欢[这个问题](https://stackoverflow.com/questions/1423446/thread-control-invoke)的答案。

# c# - 静态属性或静态只读字段

> ID：10899285
> 
> 赞同：0
> 
> 时间：2012-06-05T14:32:32.670
> 
> 标签：c#, .net, static, readonly

我有一些“常量”的初始化属性/字段，我想知道以下哪一行最适合使用：

1.  `public static Color MyColor { get { return Color.Red; } }`
2.  `public static readonly Color MyOtherColor = Color.Red;`

（惰性）初始化后是否存在一些运行时差异？性能用途是否不同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T14:34:29.757

如果它们是常量，则使用常量：

 ~~~~```
public const Color MyColor = Color.Red; 
```~~  ~~为了回答这个问题，这里是 msdn 论坛上的一个很好的阅读：[内存消耗：静态字段与静态属性](http://social.msdn.microsoft.com/Forums/en/csharplanguage/thread/705c7c6f-31c7-4376-b845-12e79dc444b2)

**编辑**：

正如乔在评论中指出的那样，`Color`不能将其声明为常量，因为它不是编译时常量。

乔回答了这个问题的[更好答案。](https://stackoverflow.com/a/10899557/9664)

最后，使用静态只读字段与属性之间不会有明显的区别。使用最适合情况的任何东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T14:50:05.837

[字段使用指南](http://msdn.microsoft.com/en-us/library/ta31s3bc(v=vs.71).aspx)建议对预定义的对象实例使用公共静态只读字段。例如：

```
public struct Color
{
    // this is a predefined immutable instance of the containing Type
    public static readonly Color Red = new Color(0x0000FF);

    ...
} 
```

在你的情况下，我可能会使用一个属性：

```
public class MyClass
{
    // Not a predefined instance of the containing Type => property
    // It's constant today, but who knows, tomorrow its value may come from a 
    // configuration file.
    public static Color MyColor { get { return Color.Red; } }
} 
```

**更新**

> 当我看到您的答案时，这很清楚，但是在 System.Drawing 中使用 ILSpy 向我显示了以下代码： public static Color Red { get { return new Color(KnownColor.Red); } }

上面链接的指南（以 Color 为例）适用于 .NET 1.1，并且可能已经演变。就个人而言，我认为使用属性不会出错。 [.NET 4.0 Field Guidelines](http://msdn.microsoft.com/en-us/library/ms229057)类似，但使用`DateTime.MaxValue`和`DateTime.MinValue`作为预定义对象实例的示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-18T20:20:35.250

一些实际的考虑：

*   如果您打算在 switch 语句或表达式中使用该值，则它必须是 const，而不是只读字段或属性。
*   如果您打算使用其他程序集的值，您可能希望使用只读字段而不是常量。如果您在程序集 A 中有一个常量并在程序集 B 中使用该常量，则该常量值将编译到程序集 B 中。如果您随后更改该常量并仅重新编译程序集 A，则程序集 B 仍将包含原始值，并且必须是重新编译。这不是只读字段的情况，因为该值将在运行时从程序集 A 中检索。~~~~

# java - 在运行时确定应用服务器？

> ID：10899287
> 
> 赞同：0
> 
> 时间：2012-06-05T14:32:35.670
> 
> 标签：java, jboss, glassfish, weblogic

我能否在运行时确定我的应用程序部署在哪个应用程序服务器上：GlassFish、WebLogic 或 JBoss？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:52:47.713

你可以尝试使用

```
String serverInfo = application.getServerInfo(); 
```

在一个 JSP 中。在 Servlet 中，尝试使用

```
String serverInfo = getServletContext().getServerInfo(); 
```

# android - 附加外部 jar 文件的源

> ID：10899289
> 
> 赞同：0
> 
> 时间：2012-06-05T14:33:07.617
> 
> 标签：android

我想将源代码附加到`jar`我拥有的外部文件中。通常我只需要`configure build path`展开 jar 文件并编辑源附件。但由于 jar 文件是一个`Android Dependency`它并没有给我那个选项。

所以我有 2 个问题，如何将源附加到 android 依赖项，或者如何使 jar 文件不是 android 依赖项，以便像往常一样附加它？

# ios - iOS UIWebView 只显示黑色背景

> ID：10899291
> 
> 赞同：1
> 
> 时间：2012-06-05T14:33:08.843
> 
> 标签：ios, uiwebview

我使用 pushViewController 导航到我的 webview（在基于导航的应用程序中），并在我的 webview 中使用 NSLog 来检查 url。事实证明，url 已成功传递，但 webview 只显示黑色背景。

```
 WebViewController *webView = [[WebViewController alloc] init];
    [webView setUrl:finalURL];
    [self.navigationController pushViewController:webView animated:YES]; 
```

在 WebViewController.m----viewWillAppear 中：

```
 NSLog(@"%@", _url); // I got the url!!!!!!!!!
    [webView loadRequest:[NSURLRequest requestWithURL:_url]]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T06:41:55.870

您是否已将网络视图插座连接到`webView`? 在`.xib`文件中

# javascript - 页面重新加载和图像缓存

> ID：10899293
> 
> 赞同：1
> 
> 时间：2012-06-05T14:33:15.953
> 
> 标签：javascript, image, http, caching, reload

我发现每当我执行 window.location.reload() 时，对网页上图像的请求都会发送到服务器。图像缓存有到期日期，因此我认为它们应该从缓存中加载。因为我从服务器得到的只是未修改的 304，所以我在页面上有很多图像，所以我不希望在页面刷新时请求每个图像。

我的问题是为什么浏览器会尝试联系服务器而不是从缓存中加载它们？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T14:38:11.427

`304 Not Modified`向浏览器指示它应该从缓存中重新加载。如果您查看从缓存重新加载时发送的字节，它应该小于 1kb。

# jquery - 如何为我的 DIV 元素列表提供复选框功能？

> ID：10899302
> 
> 赞同：0
> 
> 时间：2012-06-05T14:34:07.207
> 
> 标签：jquery, css, spring-mvc

我有一个显示列表的简单 HTML 页面。列表中的每个项目都是一个 div 元素（圆角框），其中包含一些数据和一个复选框。
现在我正在尝试为 div 提供复选框的功能，这意味着当用户单击 div 我希望它更改颜色（或显示 V 的图像）以及当用户提交页面时我想要所有项目已检查要发送的 ID。
这是 HTML 的片段：

```
<!-- item only list -->     
<div class="container">
  <ul class="plainList">
    <c:forEach items="${itemsFrom.itemsOnly}" var="item" varStatus="status">            
      <li>
        <div class="inner">
          <img src="resources/images/${item.id}.png">           
          <ul class="plainList">             
            <li><h4>${item.title} &trade;</h4></li>              
            <li><h5>${item.description}</h5></li>            
          </ul>            
          <input style="float: right;" type="checkbox" name="itemIds" value="${item.id}" />           
          <div style="clear: both"></div>           
        </div>           
      </li>         
    </c:forEach>      
  </ul>     
</div> 
```

谁能帮我开始：JQuery？CSS?。有什么简单的例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T14:40:49.163

像这样的东西可能会帮助你。我不知道您希望哪些 div 具有此功能，但我建议将它们分组。

```
$(".inner").click(function(){
   $(this).css("background-color", "red");
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T14:51:00.533

你读过[jQuery API](http://api.jquery.com/)吗？
有多种方法可以实现您的目标，但对我来说，更有效的是使用 jQuery 和 event `click`。
在您的示例中，您必须`click`在每个具有 class 的 div 上绑定事件`inner`。
语法是：

```
$(document).ready(function(){
    $(".inner").click(function(){
        //Do some stuff
    });
}); 
```

在第二部分中，jQuery 包含`.css()`允许您设置匹配元素的 css-property 的功能。
例如，如果您想更改 div 的背景图像：

```
$(document).ready(function(){
    $(".inner").click(function(){
        $(this).css("background-image","url(path/to/your/image)");
    });
}); 
```

你会明白这段代码不会重现“复选框功能”，而只是改变你`div`曾经的背景。
您应该看一下 jQuery 事件`.toggle()`。

为了帮助您，这是执行您想要的操作的语法：

```
 $(document).ready(function(){

        $(".inner").toggle(
            function(){
                $(this).css("background-image","url(path/to/your/image1)");    
            },
            function(){
                $(this).css("background-image","url(path/to/your/image2)");
            }
        );

    }); 
```

# c# - .NET 库，例如 gephi

> ID：10899306
> 
> 赞同：1
> 
> 时间：2012-06-05T14:34:17.373
> 
> 标签：c#, graph, analysis

我想知道是否有像 gephi 这样的 .net 控件：http://gephi.org/[我](http://gephi.org/) 想展示生物学中某些物种之间的比较（可能是 10 000）。

# bash - 如何测试变量是否*不是*正整数？

> ID：10899308
> 
> 赞同：6
> 
> 时间：2012-06-05T14:34:20.347
> 
> 标签：bash

要测试一个变量是否是一个大于 0 的数字，你可以这样写：

```
((i > 0)) 
```

但是我将如何测试变量是否是`not`大于 0 的数字？

**编辑**

抱歉打错字了，意思是`not a number greater than 0`。

**编辑 2**

抱歉这个可怜的问题。变量的值作为命令行参数传递，因此它可能是一个数字，也可能不是。这也需要检查。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-05T14:36:38.787

```
i=15
if [[ ! $i -gt 10 ]]; then
        echo "lalala"
fi 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-05T14:56:41.173

要检查不是数字，您必须使用正则表达式进行测试。我使用`-5`它`0`只是为了演示更一般的情况（我的假设是您使用整数）：

```
#!/bin/bash

A=$1

if [[ $A =~ ^[\-0-9]+$ ]] && (( A > -5)); then
  echo "A is number and is greater then -5"
else
  echo "A is not a number or is <= -5"
fi 
```

如果你想测试非整数，你必须在你的问题中澄清什么被认为是数字。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-05T15:29:49.257

### 比较

[这在Shell Arithmetic](http://www.gnu.org/software/bash/manual/bashref.html#Shell-Arithmetic)和[Bash Conditional Expressions](http://www.gnu.org/software/bash/manual/bashref.html#Bash-Conditional-Expressions)的 Bash 手册部分中有明确的介绍。

```
# Shell arithmetic
$ (( -1 <= 0 )); echo $?
0

# Conditional expression
$ [[ -1 -le 0 ]]; echo $?
0

# Negated conditional. Confusing, but possible.
[[ ! -1 -gt 0 ]]; echo $?
0 
```

很简单，对吧？

### 验证

但是，如果您在执行比较之前尝试测试该数字是否实际上是整数，那么您可以使用这样的复合表达式来验证和比较名为*int*的变量：

```
[[ "$int" =~ ^[-+]?([1-9][[:digit:]]*|0)$ && "$int" -le 0 ]] 
```

请注意，比较确定验证的整数是否“小于或等于零”，而不是否定它是正整数的断言。因此，只有当正则表达式验证为（可能有符号的）整数*并且*该整数是有符号负整数时，整个表达式才会返回真（例如，退出状态为零）。

当然还有其他方法可以构造这个表达式，但这是一个相当易读（如果相当 Bash 特定）的解决方案。

### 相关链接

*   [Bash：测试变量是否为整数](https://stackoverflow.com/questions/3623662/bash-testing-if-a-variable-is-an-integer)
*   [如何判断变量是否包含有效数字？](http://mywiki.wooledge.org/BashFAQ/054)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-05T14:41:11.957

是的，我意识到这个问题被标记为 bash，但没有理由不这样做是一种可移植的方式：

```
if ! test "$i" -gt 0 2> /dev/null ; then
   echo $i is not a positive integer
fi 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-05T16:26:22.080

简单的正则表达式可以允许非数字，例如“11--22--99”（尽管它们确实在 内部进行数学计算`(())`）。

以下正则表达式仅允许 0 或负整数不带前导零，并拒绝负零。

```
for a in 0 -0 00 -1 -01 1 1-1 --1
do
    if [[ $a =~ ^(-[1-9][0-9]*|0)$ ]]
    then
        echo "[+] $a passes"
    else
        echo "[X] $a doesn't"
    fi
done 
```

输出：

```
[+] 0 passes
[X] -0 doesn't
[X] 00 doesn't
[+] -1 passes
[X] -01 doesn't
[X] 1 doesn't
[X] 1-1 doesn't
[X] --1 doesn't 
```

此时，您实际上不需要添加测试，`((a <= 0))`尽管您可以测试它是否小于或等于某个较小的数字。

**编辑：**

您可以将整数验证测试放在一个函数中，并单独进行比较以提高可读性，如下所示：

```
isint () {
    [[ $1 =~ ^(-?[1-9][0-9]*|0)$ ]] # use [+-]? instead of -? to allow "+"
}

if isint "$var" && ((var <= 0))
then
    echo "validated and compared: $var"
else
    echo "non-integer or out of range: $var"
fi 
```

# config - 如何让cherrypy服务像Apache这样的相对URL

> ID：10899309
> 
> 赞同：1
> 
> 时间：2012-06-05T14:34:23.780
> 
> 标签：config, cherrypy, relative-url

（这是在 Windows 文件系统上）

假设我有以下 htdocs 目录结构：

```
c:\abc\htdocs
   index.html
   picture.jpg
   \js
      somescript.js 
```

我的 index.html 看起来像这样：

```
<html>
   <head>
      <title>Apache vs Cherrypy Test</title>
      <script type="text/javascript" src="/js/somescript.js"></script>
   </head>
   <body>
      <img src='/picture.jpg' />
   </body>
</html> 
```

使用 Apache，我只需将 httpd.conf 的 DocumentRoot 指向 c:\abc\htdocs 并且我的 index.html 可以访问 /picture.jpg 和 /js/somescript.js 而无需特殊配置。
换句话说，我的 HTML 可以在没有自定义服务器配置的情况下引用相对 URL。

现在切换到樱桃地。
我能够让cherrypy为我的index.html提供服务，但在.jpg和.js文件上获得404
有什么方法可以让cherrypy简单地提供*任何*与htdocs相关的请求文件（例如/picture.jpg和/或 /js/somescript.js）而不需要为每个文件和/或 htdocs 子目录创建显式配置条目？

我希望能够创建一个像这样的简单配置：

```
[/]
tools.staticfile.root = "c:\abc\htdocs" 
```

这将允许访问 /picture.jpg 和 /js/somescript.js，但这*不起作用*。
有没有一种简单的方法来指示cherrypy提供“通配符”相对URL而无需在配置中提供特定于文件的条目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T18:52:52.770

staticfile 用于单个文件，一次一个。请尝试使用 staticdir。有关它可以采用的配置参数，请参阅[http://docs.cherrypy.org/dev/refman/lib/static.html#cherrypy.lib.static.staticdir](http://docs.cherrypy.org/dev/refman/lib/static.html#cherrypy.lib.static.staticdir)。我强烈建议您在闲逛时设置“tools.staticdir.debug = True”。有关使用它的一些散文，另请参见[http://docs.cherrypy.org/dev/progguide/files/static.html#serving-files-through-the-staticdir-tool](http://docs.cherrypy.org/dev/progguide/files/static.html#serving-files-through-the-staticdir-tool)。

# javascript - NowJS、SocketIO 和 Pusher.com

> ID：10899314
> 
> 赞同：-1
> 
> 时间：2012-06-05T14:34:33.383
> 
> 标签：javascript, node.js, nowjs-sockets, pusher

NowJS、SocketIO 和 PusherApp 的优缺点是什么？

最喜欢的客户端语言：**JS**

最喜欢的服务器语言：**NodeJS**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T01:07:27.180

## 套接字.io

临：

*   使用您喜欢的语言。
*   自己解决。也可能是骗局。

缺点：

*   缩放可能是个问题。例如，用户在使用 websocket 时会出现内存泄漏。如果您想扩展到多个 CPU/盒子，也没有适当的支持。

## 现在js

nowJS 使用 socket.io 提供 RPC-library。

临：

*   我猜有时使用起来更简单。
*   使用您喜欢的语言。

缺点：

*   socket.io 的一些缩放问题

## 推杆

临：

*   缩放更容易。

缺点：

*   做大了就要花钱。也许太多了？

# c++ - 子对象中存在 VPTR

> ID：10899319
> 
> 赞同：0
> 
> 时间：2012-06-05T14:35:10.960
> 
> 标签：c++, virtual, vptr

我有一个带有虚拟析构函数的类“基础”，因此有一个 VTable 和相应的 VTPR，以及一个从它派生的类：

```
class base {
public:
    virtual ~base() {}
};

class der : base {};

main()
{

    int a = sizeof(base); // = 4 , fine !

    int b = sizeof(der);  // = 4 too ?
} 
```

现在，由于派生类也是虚拟的，它会有自己的 VPTR，但由于它还有一个基类的子对象，其中有一个 VPTR，所以“der”类的大小不应该是 8 个字节，即'der' 类的 VPTR 的大小 + 'base' 类的子对象的 VPTR 的大小？（当 sizeof(void*) = 4 bytes 时）。

所以基本上我的问题是：当类 'base' 的子对象是在 'der' 中制作时，它有一个单独的新 VPTR 吗？如果是这样，那么为什么在计算“der”的大小时没有添加它的大小？

有人可以澄清一下吗。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T14:36:59.363

这都是特定于实现的。但实际上，派生类中只会有一个vptr；不需要两个。vptr 的全部意义在于它习惯于动态调用正确的虚函数覆盖；`der`对象将只是具有指向`base`对象的不同指针值。

*[注意：您的示例可能对您（无意中？）使用私有继承而不是更典型的公共继承这一事实感到困惑......]*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T14:45:09.337

我认为您混淆了 vtables 和 vptrs。每个类都有一个 vtable，每个对象都会存储一个指向其 vtable 的指针作为 vptr。vtable 就像一个静态全局变量，它在类的所有实例之间共享，因此不占用对象中的任何空间。

# c# - 使用 SFTP 从 FTP 站点上传下载文件

> ID：10899324
> 
> 赞同：1
> 
> 时间：2012-06-05T14:35:33.577
> 
> 标签：c#, ftp, sftp, sharpssh

我需要知道一种通过 SFTP 连接到 FTP 站点的方法。我正在使用`SharpSSH`，但找不到执行该程序的示例。

现在，我已经下载了`SharpSSH` `.DLL`文件并添加为参考。现在我需要编写可以连接的代码，并从 FTP 服务器上传/下载文件。

我怎样才能做到这一点 ？帮助。

**更新** ![在此处输入图像描述](../Images/ed134948ba8a70710eeb13cea452ac5c.png)

代码 ：

```
//ip of the local machine and the username and password along with the file to be uploaded via SFTP.
 FileUploadUsingSftp("http://Some-sftp-site.com", "username", "password", @"D:\", @"name.txt"); 
```

上面的代码在 Main 方法中。

然后 ;

```
private static void FileUploadUsingSftp(string FtpAddress, string FtpUserName, string FtpPassword, string FilePath, string FileName)
        {
            Sftp sftp = null;
            try
            {
                // Create instance for Sftp to upload given files using given credentials
                sftp = new Sftp(FtpAddress, FtpUserName, FtpPassword);

                // Connect Sftp
                sftp.Connect();

                // Upload a file
                sftp.Put(FilePath + FileName);

                // Close the Sftp connection
                sftp.Close();
            }
            finally
            {
                if (sftp != null)
                {
                    sftp.Close();
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T14:46:37.467

到现在为止你做了什么？

我们不能就“如何上传文件”给您一个直接的答案......

这是一个教程： [http ://saravanandorai.blogspot.com/2012/01/sftp-and-file-upload-in-sftp-using-c.html](http://saravanandorai.blogspot.com/2012/01/sftp-and-file-upload-in-sftp-using-c.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T12:37:28.010

我认为`FtpAddress`参数应该没有`ftp`or `http`，所以尝试以下操作：

```
 FileUploadUsingSftp("Some-sftp-site.com", "username", 
                     "password", @"D:\", @"name.txt"); 
```

# google-chrome - 本地主机网站在 Chrome 中运行缓慢

> ID：10899325
> 
> 赞同：0
> 
> 时间：2012-06-05T14:35:33.843
> 
> 标签：google-chrome, localhost, mamp, freeze

我已经在 localhost 项目上工作了一段时间，突然 Chrome 要么冻结、崩溃，要么永远加载页面。我认为这一切都是在我编写一些 javascript 输出时开始的，但我不知道这是否相关。

奇怪的是，localhost 中的其他项目在 Chrome 中正常工作。在这个特定项目中，似乎只是一些运行速度极慢的 php 文件。

如果有帮助，我正在通过 MAMP 运行 localhost。

该项目在 Safari 和 Firefox 中运行良好。有任何想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T14:41:31.533

[我最近遇到了一个可能相关的问题。](https://superuser.com/questions/418548/gmail-expands-now-i-cannot-access-it-over-my-satellite-internet-connection) 这似乎是由于一个或几个最近版本的 Chrome 中的一个暂时性错误。将 Chrome 升级到最新版本已经为我修复了它。如果你的 Chrome 不是最新的，那么你也可以试试这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-18T12:48:12.383

从 chrome 设置中删除 localhost 的 cookie 和站点数据对我有用。

# jquery - jQuery - 在 JSON 追加后更新 css

> ID：10899328
> 
> 赞同：3
> 
> 时间：2012-06-05T14:35:53.267
> 
> 标签：jquery, json, append

第一次发帖；长期读者。我遇到了这个问题，我现在知道原因，但我找不到最终结果/修复。如果之前已经回答过这个问题，请提前道歉。

我在 php 中有一些数据，这些数据通过 jQuery (JSON) 中的 ajax 命令附加。这会正确显示，采用分配的特定 CSS 等。

我显示的时间显示“10 分钟前”或发布的时间有多长，但我试图让它显示悬停时的实际日期/时间。这是最终产品，但为了达到这一点，我只是尝试分配一个 CSS 用于视觉测试，以确保它确实有效。

mouseover 命令可以在任何时候发生，因此一旦附加了 JSON 数据，我就无法执行此操作。

```
$("span.post-name").mouseover(function () {
    $(this).css("color","red");
}); 
```

此函数确实适用于直接放入 HTML 的相同跨度，但不适用于构建的数据。任何帮助将非常感激..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T14:41:16.090

向已动态添加的内容添加功能是否有问题？如果是这样，那么你会想要使用`.on()`它并让它看起来像这样：

```
 $("body").on("mouseenter", "span.post-name" function(event) {
   ("span.post-name").css("color", "red");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T14:40:41.820

```
$("span.post-name").live('mouseover',function () {
    $(this).css("color","red");
}); 
```

您需要使用**.live**，因为新的 html 是动态插入的。

# asp.net - 用一个 ASP.NET 应用程序替换 12 个 MS 应用程序

> ID：10899329
> 
> 赞同：0
> 
> 时间：2012-06-05T14:35:54.163
> 
> 标签：asp.net

我想知道您是否可以对我现在正在做的事情发表意见？我们有 12 个 MS Access 应用程序，它们在数据和功能方面看起来非常相似：每个应用程序允许 12 个实践来捕获他们为患者提供的服务的数据。实践内容涵盖物理治疗、矫形器、言语和语言、社会服务等。6个住院病人，6个门诊病人。

我构建了一个 MS SQL 数据库来替换 12 个应用程序和各自的 12 个数据库。该模型看起来不错，我认为它可以很好地扩展。

现在我正在设计一个 asp.net 网络表单应用程序来替换上面的 12 个应用程序。我的困境是：我应该如何应对这个挑战？

在当前版本的应用程序中，每个数据输入屏幕在实践中看起来几乎相同；有一些外观上的变化，字段的布局可能不同，但结果是一样的：允许用户输入服务代码来为他们的病人执行的工作。

因此，假设对于每个应用程序，我们都有一个名为 charge.aspx 的页面，每次练习看起来几乎相同。

我的问题是：我应该建立 12 个类似的页面，每个旧应用程序一个，因为数据输入非常相似？或者，也许，生成 UI，之前在 sql 中定义的每个实践都使用模板之类的东西？

欢迎大家提出意见！

问候，

万博

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T07:28:53.273

将安全和用户处理代码放在母版页中。

如果您有必须重复使用的字段或字段块（患者基本信息），请使用这些字段进行用户控件。

请查看 jQuery 以简化代码的客户端。jQuery.UI 可以提供开箱即用的有用控件！

# ios - 如何正确地多线程？UIAlertView 不显示，只有灰屏

> ID：10899330
> 
> 赞同：2
> 
> 时间：2012-06-05T14:35:58.403
> 
> 标签：ios, multithreading, uialertview, dispatch, performselector

我已经在我的项目中实现了 textToSpeech 并希望在说出文本时显示警报视图。这里我调用 textToSpeech 的方法：

```
//-----before TTS starts i try to display alertView with Cancelbutton  
//[self performSelectorOnMainThread:@selector(alertWhileTTS) withObject:nil waitUntilDone:YES]; //gray view and no alertview
//[self performSelector:@selector(alertWhileTTS)];  //gray view and no alertview
//[self alertWhileTTS];  //gray view and no alertview

//this part here is blocking, no gray screen, 
//after TTS is ready, the alertView is displayed
dispatch_async(dispatch_get_main_queue(), ^{
        //Update UI if you have to
        [self alertWhileTTS];
    });

[[self view] setNeedsDisplay];
[self synthesizeInBackground];
[queue waitUntilAllOperationsAreFinished];
[self setIsSpeaking: false];
[[self view] setNeedsDisplay]; 
```

这里的 synthesizeInBackground 方法（*in 方法* `synthesize` *启动 TTS*）：

```
- (void) synthesizeInBackground {
    queue = [[NSOperationQueue alloc] init];
    operation = [[NSInvocationOperation alloc] initWithTarget:self 
    selector:@selector(synthesize) object:nil];

    [queue addOperation: operation];
} 
```

虽然 TTS 我想显示一个带有`cancel`按钮的 alertView。但在我的情况下，我只得到一个没有 alertView 的灰屏。

**如何正确调用 alertWhileTTS**，以便显示 alertView？

这里是 alertWhileTTS 的内容：

```
- (void) alertWhileTTS {
UIAlertView *inboxRead = [[[UIAlertView alloc] initWithTitle:@"Inbox tts..."
                                                    message:nil
                                                   delegate:self
                                          cancelButtonTitle:@"Abbrechen"
                                          otherButtonTitles:nil] autorelease];
inboxRead.tag = 997;

[inboxRead show];
} 
```

**更新**查看我的解决方案，该解决方案有效：

```
[self performSelectorOnMainThread:@selector(alertWhileTTS) withObject:nil waitUntilDone:YES];

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, (unsigned long)NULL), ^(void) {
        [[self view] setNeedsDisplay];
        [self synthesizeInBackground];
        [queue waitUntilAllOperationsAreFinished];
        [self setIsSpeaking: false];
        [[self view] setNeedsDisplay];

    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:44:19.693

您应该使用自动引用计数 (ARC)，因为它会自动释放所有内容。正如 borrden 所说，您（大概）正在快速发布 UIAlertView。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T14:47:09.707

更改 alertWithTTsTo

```
UIAlertView *inboxRead = [[[UIAlertView alloc] initWithTitle:@"Inbox tts..."
                                                    message:nil
                                                   delegate:self
                                          cancelButtonTitle:@"Abbrechen"
                                          otherButtonTitles:nil] autoRelease];
inboxRead.tag = 997;

[inboxRead show]; 
```

`alertWhileTTS`也不要忘记从主ui线程调用函数通过做

```
 dispatch_async(dispatch_get_main_queue(), ^{
        //Update UI if you have to
        [self alertWhileTTS];
    }); 
```

# javascript - 如何用 fitBounds() 覆盖谷歌地图初始化的选项；

> ID：10899331
> 
> 赞同：0
> 
> 时间：2012-06-05T14:36:05.323
> 
> 标签：javascript, google-maps, fitbounds

我一直在寻找一种方法来覆盖谷歌地图的中心纬度并使用 fitBounds() 方法进行缩放。如您所见，我有一组 latlng 坐标，我希望以正确的缩放比例将它们全部放入地图中。

令人讨厌的是，地图在初始化时只使用中心属性的纬度坐标。请帮忙，我看不出我做错了什么。谢谢

```
 function initialize() {
    var centrelatlng = new google.maps.LatLng(52.474, -1.868);

    var myOptions = {
        zoom:11,
        center: centrelatlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

    var image = 'http://www.google.com/intl/en_us/mapfiles/ms/micons/blue-dot.png';

    var hotels = [
        ['ibis Birmingham Airport', 52.452656, -1.730548, 4],
        ['ETAP Birmingham Airport', 52.452527, -1.731644, 3],
        ['ibis Birmingham City Centre', 52.475162, -1.897208, 2]
    ];

    var latLngs = [];
    var hotel;
    for (var i = 0; i < hotels.length; i++) {
        hotel = hotels [i];
        var myLatLng = new google.maps.LatLng(hotel[1], hotel[2]);
        latLngs[i] = myLatLng;
        var marker = new google.maps.Marker({
            position: myLatLng,
            map: map,
            icon: image,
            title: hotel[0],
            zIndex: hotel[3]
        });
    }

    var latlngbounds = new google.maps.LatLngBounds();
    latLngs.each(function(n){
        latlngbounds.extend(n);
    });
    map.setCenter(latlngbounds.getCenter());
    map.fitBounds(latlngbounds); 

}; 
```

请注意，您必须向下滚动代码查看器才能查看所有代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T14:44:41.793

不要在 myOptions 中设置中心，同时删除 map.setCenter(latlngbounds.getCenter()); 你应该很高兴。

# html - 如何在一个页面中制作不同的部分（内部解释）

> ID：10899333
> 
> 赞同：0
> 
> 时间：2012-06-05T14:36:14.263
> 
> 标签：html, css

基本上我想要实现的是为我的网站制作一个寻呼机。基本上有一个索引页面，例如，如果有人点击“服务”，它会将他们发送到服务页面。此“服务”页面将显示 5 或 6 个服务，全部在一个页面中。所以基本上当用户点击导航项时，它会使用 jQuery 滚动到显示信息的 div。

现在我不希望用户看到他/她实际正在阅读的部分。例如，我有一个名为 Edition 的服务和另一个 Conception。如果我正在阅读“版本”部分，我不想现在就看到“概念”，除非我滚动到它。我的第一个想法是使用边距，但我的意思是，如果我在 1024x768 显示器上，边距将与 1920x1080 不同。

所以基本上，我正在寻找一种在一个页面上显示我的服务内容的方法，但是会显示每个不同的服务，除非访问者滚动，否则看不到它下面的下一部分。

希望这是有道理的，并感谢任何支持和帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-07-18T20:44:30.433

好吧，您需要定义一个导航栏类，以及一个用于存储页面每个部分的类。将部分的高度设置为 100% 将确保该部分占据用户屏幕的整个高度。请注意，这仅在 html 和 body 的高度也设置为 100% 时才有效。

设置导航，使位置固定在屏幕上，并使用链接调用 javascript 函数，该函数根据链接的 id 导航到正确的部分。

html:

```
<nav>
    <a class="nav" id="1" href="#">Section 1</a>
    <a class="nav" id="2" href="#">Section 2</a>
    <a class="nav" id="3" href="#">Section 3</a>
</nav>
<div class="section" id="1">
    Section 1
</div>
<div class="section" id="2">
    Section 2
</div>
<div class="section" id="3">
    Section 3
</div> 
```

CSS：

```
a {
    margin: 0 10px 0 10px;
    text-decoration: none;
    color: black;
}

html {
    height: 100%;
}

body {
    margin: 0;
    padding: 0;
    height: 100%;
}

nav {
    position: fixed;
    width: 100%;
    background-color: lightgrey;
    text-align: center;
    margin-bottom: 20px;
}

.section {
    height: 100%;
    padding-top: 20px;
} 
```

js：

```
$('.nav').click(function() {
    var id = $(this).attr('id');
    $('html, body').animate({
        scrollTop: ($('#' + id + '.section').offset().top)
    }, 1000);
}); 
```

演示：

[http://jsfiddle.net/dqcuN/2/](http://jsfiddle.net/dqcuN/2/)

希望这就是你要找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T10:17:18.083

I guess by image you uploaded that this is what you are looking for:

HTML

```
<article>
<h1>Edition</h1>
<div>Sed ut perspiciatis unde omnis iste natus error sit </div>
</article> 
```

CSS

```
html {height: 100%;}
body {margin: 0; padding: 0; height: 100%;}
article {width: 500px; height:100%; margin: 0 auto;}​ 
```

[http://jsfiddle.net/5HLNE/](http://jsfiddle.net/5HLNE/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-18T20:10:38.730

您需要在 HTML 页面中包含分页技术，因此您需要为每个部分提供一个 id 和一个超链接。

# android - 将编辑文本中的用户输入添加到列表视图中

> ID：10899335
> 
> 赞同：5
> 
> 时间：2012-06-05T14:36:15.033
> 
> 标签：android, arrays, listview, arraylist, android-arrayadapter

我正在尝试将用户输入从编辑文本获取到列表视图中，我已经看到了[这个](https://stackoverflow.com/questions/5295664/how-to-add-user-input-of-edittext-to-the-list-in-android)类似问题的答案，但我无法弄清楚

我试过这个，IDE没有收到任何错误，但它不起作用

```
public class ListtestActivity extends Activity {
/** Called when the activity is first created. */

Button bt;
EditText et;
TextView tv;
ListView lv;
ArrayAdapter<String> adapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    bt = (Button) findViewById(R.id.button1);
    et = (EditText) findViewById(R.id.editText1);
    tv = (TextView) findViewById(R.id.textView1);
    lv = (ListView) findViewById(R.id.listView1);
    String input = et.getText().toString();
    String[] values = new String[] {"", input};

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, values);
    lv.setAdapter(adapter); 
```

还尝试了以下

```
public class ListtestActivity extends Activity {
ArrayAdapter<String> m_adapter;
ArrayList<String> m_listItems = new ArrayList<String>();
/** Called when the activity is first created. */

Button bt;
EditText et;
TextView tv;
ListView lv;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    bt = (Button) findViewById(R.id.button1);
    et = (EditText) findViewById(R.id.editText1);
    tv = (TextView) findViewById(R.id.textView1);
    lv = (ListView) findViewById(R.id.listView1);
    m_adapter = new ArrayAdapter<String>(this, R.layout.main, m_listItems);
    lv.setAdapter(m_adapter);
    final String input = et.getText().toString();

    bt.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub

            m_listItems.add(new String(input));
            m_adapter.notifyDataSetChanged();
        }
    }); 
```

任何帮助将不胜感激

谢谢你

*对 Android/Java/SO 非常陌生

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T14:41:03.423

在第二个代码片段中，更改行`m_adapter`

```
 m_adapter = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, m_listItems); 
```

然后在字符串中添加`m_listItems`

```
bt.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {

        String input = et.getText().toString();
        if(null!=input&&input.length()>0){     

        m_listItems.add(input);

        m_adapter.notifyDataSetChanged();

      }
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T14:42:17.077

尝试将字符串添加到适配器而不是列表视图：

```
m_adapter = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, m_listItems);//you can delete your previous initialisation

bt.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {
        String strAddMe = et.getText().toString();
        if(strAddMe != null)
            m_listItems.add(strAddMe);

        m_adapter.notifyDataSetChanged();

      }
    }
}); 
```

由于列表视图知道适配器，适配器必须知道它“适应”到列表视图的内容。一旦您知道这意味着什么，您就可以毫无问题地使用适配器；）

此外，您应该在需要输入时才阅读editText。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T14:42:52.853

创建 Activity 时，您将获得 EditText 的值，但它是空的。将您声明“输入”的行放入您的 onClick 侦听器中。

```
bt.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {
        // TODO Auto-generated method stub
        final String input = et.getText().toString();

        m_listItems.add(new String(input));
        m_adapter.notifyDataSetChanged();
    }
}); 
```

# c# - Windows Phone SDK - 我可以使用什么来代替 System.Web？

> ID：10899337
> 
> 赞同：1
> 
> 时间：2012-06-05T14:36:20.690
> 
> 标签：c#, windows-phone-7, windows-phone-7.1

我对`Windows Phone`开发相当陌生，并且我有很多类，我认为通过在**`System.Web`**（即`HttpUtility.ParseQueryString`）中使用某些函数会很简单。但似乎**`System.Web`**不可用`Windows Phone`？

这个对吗？或者我可能只是错过了添加它的方法？

我真的很想不必手写像`ParseQueryString`.

关于如何**`System.Web`**在我的`Windows Phone`应用程序中获得参考的任何建议？

干杯! 布雷特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T14:51:18.723

widows phone sdk 中似乎没有这样的方法，您可以使用自己的代码，例如[http://code.google.com/p/google-gdata/source/browse/trunk/clients/cs/src/core /HttpUtility.cs?r=961](http://code.google.com/p/google-gdata/source/browse/trunk/clients/cs/src/core/HttpUtility.cs?r=961)

您可以在此讨论中获得更多信息， [Windows Phone 7 中的 HttpUtility.UrlEncode？](https://stackoverflow.com/questions/2573290/httputility-urlencode-in-windows-phone-7)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-26T04:41:07.223

现在它通过使用这个来解决：

```
Windows.Data.Html.HtmlUtilities.ConvertToText("your_html_string"); 
```

# sql-server - 用于 SSIS 的 Oracle Attunity 连接器返回 ORA-01843 不是有效月份

> ID：10899339
> 
> 赞同：2
> 
> 时间：2012-06-05T14:36:24.160
> 
> 标签：sql-server, ssis, oracle11g, odp.net

我正在尝试使用 Attunity 连接器访问我公司的企业数据库之一。该数据库可能基于并建立在美国，其货币格式为货币和日期时间。该数据库可能在 Oracle 10 或 11G 上。

我有一个带有 Microsoft SQL Server 2012 BI 版本的 Windows Server 2008 64 位。我还安装了 Oracle Instant Client 11G 32 和 64 位。Windows Server 2008 是加拿大法语，但我已将 Windows 中的货币和日期时间信息修改为美国格式。我还将 NLS_Lang 修改为 AMERICAN_AMERICA.AL32UTF8。我还安装了 Attunity Oracle Connector 2.0 for .NET。

我正在尝试使用 SSIS 收集数据以将它们推送到我的 SQL Server 数据库。

我已经使用 Oracle SQL Developper 验证了我与数据库的连接是否成功。在我在 sqldevelopper.conf 中添加以下行之前，我在 SQL Developper 中遇到了完全相同的错误 ORA-01843：AddVMOption -Duser.language=en

问题是当我使用任何 .NET oracle 连接器将我与 SSIS 的连接连接到包含日期的视图时，我总是遇到同样的错误，就像我在修改 SQL Developer 之前遇到的错误一样英语说这不是一个有效的月份。

我不知道是否有人遇到过这个错误并且知道解决方法，或者是否有人知道修改 .NET Dateformat。

感谢帮助 ！

![在此处输入图像描述](../Images/156e1ac3a5cb0729d32f91079d45013b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T15:13:09.557

**固定的 ：**

我做了：

1.  将我的区域设置更改为与我的远程服务器完全相同
2.  重新安装 32 位和 64 位的 Oracle Instant Client 11G

现在它正在工作。

道德 ：

Oracle + Microsoft 的不同语言和区域设置是问题的根源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T09:57:11.367

1）看到错误会有很大帮助

2）你的问题有很多“可能”。如果您不知道您是连接到 Oracle 10 还是 11G，您如何知道正确的驱动程序？

3）尽管如此，尝试使用您的 Oracle 驱动程序配置链接服务器，看看它是否至少可以工作

# linux - 在 linux 机器上运行 vb 脚本

> ID：10899341
> 
> 赞同：0
> 
> 时间：2012-06-05T14:36:31.053
> 
> 标签：linux

这对我来说是全新的，请多多包涵！

我有一种情况，我们在网站上有一个表单，它收集数据并将其发送到 Web 服务器上的 mySQL 表。该信息从网络服务器发送到 linux 机器上的 mySQL 表，我相信是通过 linux 机器上的某种导入脚本。

上周我们的 linux 服务器挂了，现在导入脚本无法正常工作。我有一个 import.txt 文件，我需要重新启动（我相信），但不知道该怎么做。

我在网上进行了研究，但我只看到有关 .sh 文件的信息。

谢谢！

如果有帮助，这是我需要运行的内容：

```
Public Sub ImportPubOrders()
Dim rsCopy1 As Recordset, rsCopy2 As Recordset, rsCopy3 As Recordset
Dim strSQL As String, strCriteria As String, strODBCdate As String
Dim lngFound As Long
On Error GoTo ErrorHandler

Set wrkODBC = CreateWorkspace("ODBCWorkSpace", "pubadmin", "Abo1prA5", dbUseODBC)
Set MySQLConn = wrkODBC.OpenConnection("ODBC;DSN=publications;DESC=MySQL ODBC 3.51 Driver DSN;DATABASE=publications;SERVER=10.116.11.2;UID=pubadmin;PASSWORD=Abo1prA5;PORT=3306;OPTION=3;STMT=;")
MySQLConn.QueryTimeout = 180

strODBCdate = Format(DateAdd("d", -1, Date), "yyyy-mm-dd")
'strODBCdate = "2009-03-11"

'Copy records from More.net PRO to DBSRVR
Set OAwrkODBC = CreateWorkspace("ODBCWorkSpace", "sslAGOmySQL", "k4-4js94nd", dbUseODBC)
Set OAMySQLConn = OAwrkODBC.OpenConnection("ODBC;DSN=OA_generalPRO;DESC=MySQL ODBC 3.51 Driver DSN;DATABASE=www_ago_mo_gov_ssl_data;SERVER=db.kinetic.more.net;UID=sslAGOmySQL;PASSWORD=k4-4js94nd;PORT=3306;OPTION=3;STMT=;")

strSQL = "LOCK TABLE orders_contacts READ, orders_ids READ, orders_items READ, orders_order READ"
OAMySQLConn.Execute (strSQL)

    'Check if there are orders to download
    strCriteria = "DATE_FORMAT(orders_order.order_date, '%Y-%m-%d') = " & Chr(34) & strODBCdate & Chr(34)
    strSQL = "SELECT form_id FROM orders_order WHERE " & strCriteria
    OAMySQLConn.Execute (strSQL)
    lngFound = OAMySQLConn.RecordsAffected

    'Orders have been submitted and need to be downloaded
    If lngFound >= 1 Then
        strSQL = "SELECT form_id, contact_id, DATE_FORMAT(order_date, '%Y-%m-%d %T') AS order_date FROM orders_order WHERE " & strCriteria
        Set rsCopy1 = OAMySQLConn.OpenRecordset(strSQL)
        Do While Not rsCopy1.EOF
            strSQL = "INSERT INTO orders_order (form_id, contact_id, order_date) " & _
                "VALUES (" & rsCopy1!form_id & ", " & rsCopy1!contact_id & ", " & Chr(34) & rsCopy1!order_date & Chr(34) & ")"
            MySQLConn.Execute (strSQL)
            rsCopy1.MoveNext
        Loop
        rsCopy1.Close

        strSQL = "SELECT item_id, orders_items.form_id, pub_name, quantity " & _
            "FROM orders_items INNER JOIN orders_order ON orders_items.form_id = orders_order.form_id " & _
            "WHERE " & strCriteria
        Set rsCopy2 = OAMySQLConn.OpenRecordset(strSQL)
        Do While Not rsCopy2.EOF
            strSQL = "INSERT INTO orders_items (item_id, form_id, pub_name, quantity) " & _
                "VALUES (" & rsCopy2!item_id & ", " & rsCopy2!form_id & ", " & Chr(34) & rsCopy2!pub_name & Chr(34) & ", " & rsCopy2!quantity & ")"
            MySQLConn.Execute (strSQL)
            rsCopy2.MoveNext
        Loop
        rsCopy2.Close

        strSQL = "SELECT orders_contacts.contact_id, orders_contacts.form_id, org_name, first_name, last_name, address1, address2, city, state, " & _
            "zip, email, phone, DATE_FORMAT(date_added, '%Y-%m-%d %T') AS date_added " & _
            "FROM orders_contacts INNER JOIN orders_order ON orders_contacts.contact_id = orders_order.contact_id " & _
            "WHERE " & strCriteria
        Set rsCopy3 = OAMySQLConn.OpenRecordset(strSQL)
        Do While Not rsCopy3.EOF
            strSQL = "INSERT INTO orders_contacts (contact_id, form_id, org_name, first_name, last_name, address1, " & _
                "address2, city, state, zip, email, phone, date_added) " & _
                "VALUES (" & rsCopy3!contact_id & ", " & rsCopy3!form_id & ", " & Chr(34) & rsCopy3!org_name & Chr(34) & _
                ", " & Chr(34) & rsCopy3!first_name & Chr(34) & ", " & Chr(34) & rsCopy3!last_name & Chr(34) & _
                ", " & Chr(34) & rsCopy3!address1 & Chr(34) & ", " & Chr(34) & rsCopy3!address2 & Chr(34) & _
                ", " & Chr(34) & rsCopy3!city & Chr(34) & ", " & Chr(34) & rsCopy3!state & Chr(34) & _
                ", " & Chr(34) & rsCopy3!zip & Chr(34) & ", " & Chr(34) & rsCopy3!email & Chr(34) & _
                ", " & Chr(34) & rsCopy3!phone & Chr(34) & ", " & Chr(34) & rsCopy3!date_added & Chr(34) & ")"
            MySQLConn.Execute (strSQL)
            rsCopy3.MoveNext
        Loop
        rsCopy3.Close

    Else
        DoCmd.Hourglass False
        Dim RS0 As Recordset
        Set RS0 = CurrentDb.OpenRecordset("log_Errors")
        RS0.AddNew
            RS0("error_loc") = "ZERO publication orders submitted online for " & strODBCdate
            RS0("error_time") = Now()
        RS0.Update
        RS0.Close
        Set RS0 = Nothing
    End If

strSQL = "UNLOCK TABLES"
OAMySQLConn.Execute (strSQL)

DoCmd.Hourglass False

Dim RS10 As Recordset
Set RS10 = CurrentDb.OpenRecordset("log_Errors")
RS10.AddNew
    RS10("error_loc") = "Import publications completed without error"
    RS10("error_time") = Now()
RS10.Update
RS10.Close
Set RS10 = Nothing

DoCmd.SetWarnings True
Exit Sub

ErrorHandler:
DoCmd.Hourglass False
    Dim RS2 As Recordset
    Set RS2 = CurrentDb.OpenRecordset("log_Errors")
    RS2.AddNew
        RS2("error_loc") = "procedure ImportPubOrders"
        RS2("error_num") = Err.Number
        RS2("error_desc") = Err.Description
        RS2("error_time") = Now()
    RS2.Update
    RS2.Close
    Set RS2 = Nothing

Set rsCopy1 = Nothing
Set rsCopy2 = Nothing
Set rsCopy3 = Nothing
DoCmd.SetWarnings True 
```

结束子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T14:41:04.123

您将不得不使用第三方库，因为 linux 不支持 VBScript。您确定它具有 .txt 扩展名吗？如果是这样，这与 VBScript 有什么关系？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-13T16:19:15.530

这是 Visual Basic。VBScript 不支持“On Error GoTo [label]”语句。

# netty - 将 ChannelBuffer 写入 Netty Channel 会引发 java.io.NotSerializableException

> ID：10899347
> 
> 赞同：0
> 
> 时间：2012-06-05T14:36:49.773
> 
> 标签：netty

我想将原始字节写入网络通道。我想我可以通过首先创建一个 ChannelBuffer，用字节填充它（例如，来自 Kryo 序列化程序），然后将该 ChannelBuffer 写入 netty Channel 来做到这一点。

这是相关代码，我只是将一些字节填充到 ctor 中的 ChannelBuffer 并尝试在连接时发送它：

```
/**
 * Handler implementation for the object echo client.  It initiates the
 * ping-pong traffic between the object echo client and server by sending the
 * first message to the server.
 */
public class ObjectEchoClientHandler extends SimpleChannelUpstreamHandler {

private final ChannelBuffer firstMessage;

/**
 * Creates a client-side handler.
 */
public ObjectEchoClientHandler(int firstMessageSize) {
    if (firstMessageSize <= 0) {
        throw new IllegalArgumentException(
                "firstMessageSize: " + firstMessageSize);
    }
    firstMessage = ChannelBuffers.buffer(8192);
    for (int i = 0; i < firstMessageSize; i++) {
        firstMessage.writeByte(i % 256);
    }
}

@Override
public void channelConnected(
        ChannelHandlerContext ctx, ChannelStateEvent e) {

    // Send the first message if this handler is a client-side handler.
    // e.getChannel().write(firstMessage);
    Channels.write(ctx, e.getFuture(), firstMessage);
}

} 
```

这似乎不起作用，因为它抛出了这个异常：

```
java.io.NotSerializableException: org.jboss.netty.buffer.BigEndianHeapChannelBuffer
at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1164)
at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:330)
at org.jboss.netty.handler.codec.serialization.ObjectEncoder.encode(ObjectEncoder.java:80)
at org.jboss.netty.handler.codec.oneone.OneToOneEncoder.handleDownstream(OneToOneEncoder.java:61)
at org.jboss.netty.channel.Channels.write(Channels.java:626)
at org.jboss.netty.channel.Channels.write(Channels.java:587)
at ca.gsimard.spacecraft.client.ObjectEchoClientHandler.channelConnected(ObjectEchoClientHandler.java:83)
at ca.gsimard.spacecraft.client.ObjectEchoClientHandler.handleUpstream(ObjectEchoClientHandler.java:75)
at org.jboss.netty.channel.Channels.fireChannelConnected(Channels.java:227)
at org.jboss.netty.channel.socket.nio.NioWorker$RegisterTask.run(NioWorker.java:784)
at org.jboss.netty.channel.socket.nio.NioWorker.processRegisterTaskQueue(NioWorker.java:250)
at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:192)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662) 
```

我确信这是微不足道的，而且可能是错误的做法，因为我似乎找不到与此相同错误的人。我现在正在使用 Netty 3.3.0。

我可以通过创建一个适当大小的 byte[] 并将 ChannelBuffer 的内容复制到它来使其工作，但我希望有一个更直接的解决方案来避免无用的字节复制。

```
 byte[] array = new byte[firstMessage.writerIndex()];
    firstMessage.readBytes(array);
    e.getChannel().write(array); 
```

感谢您的任何指点！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T17:10:43.387

查看您的堆栈跟踪，我观察到这两行：

```
at org.jboss.netty.handler.codec.serialization.ObjectEncoder.encode(ObjectEncoder.java:80)
at org.jboss.netty.handler.codec.oneone.OneToOneEncoder.handleDownstream(OneToOneEncoder.java:61 
```

这对我来说意味着你的管道包含一个试图序列化[ChannelBuffer的](http://netty.io/docs/stable/api/org/jboss/netty/buffer/ChannelBuffer.html)[ObjectEncoder](http://netty.io/docs/stable/api/org/jboss/netty/handler/codec/serialization/ObjectEncoder.html)。由于您的对象已经被 Kryo 编码，因此您不需要 ObjectEncoder。

或者换一种说法（没有 Kryo），ChannelBuffer 应该是 ObjectEncoder 的*输出*，而您的对象应该是输入。

最好的办法是编写一个使用 Kryo 对对象进行编码的新[ChannelHandler 。](http://netty.io/docs/stable/api/org/jboss/netty/channel/ChannelHandler.html)当 Kryo 作为 Netty 管道中的处理程序工作时，您可能会发现一些额外的效率。

# python - 递归函数将最后一个结果作为参数记住

> ID：10899349
> 
> 赞同：0
> 
> 时间：2012-06-05T14:36:54.657
> 
> 标签：python, list, recursion

> **可能的重复：**
> [Python 中的“Least Astonishment”：可变默认参数](https://stackoverflow.com/questions/1132941/least-astonishment-in-python-the-mutable-default-argument)

我试图将一个数字拆分为 2 的幂，但我的函数会记住我之前调用的结果。

```
from math import log

#split number in powers of 2
#n   :  number
#lst :  the current list of numbers
def spn(n, lst=list()):
    if n==1:
        lst.append(n)
        return lst
    else:
        #rdy  :  the ready-to-add number
        rdy=2**((log(n+1,2))-1)
        lst.append(rdy)
        #n-rdy:  the new number to evaluate
        return spn(n-rdy, lst) 
```

例如：

> spn(1) 应该返回 [ 1 ]
> 
> spn(3) 应该返回 [2.0, 1.0]
> 
> spn(7) 应该返回 [4.0, 2.0, 1.0]

但仅在我第一次调用该函数时才有效，然后在第一次调用后我之前的结果显示为参数。

![在此处输入图像描述](../Images/ac742c25395255338e24107e0f9a371a.png)

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T14:40:59.833

`lst`将您的参数默认值更改为`None`，如果它是 None 然后在您的函数中实例化它。

阅读有关为什么使用可变默认参数值不好的 Python[陷阱。](http://pythonconquerstheuniverse.wordpress.com/category/python-gotchas/)

# php - 在服务器中保存远程图像数组

> ID：10899354
> 
> 赞同：0
> 
> 时间：2012-06-05T14:37:05.853
> 
> 标签：php

所以，我有这个代码，但没有工作

```
<?
foreach($itemlist as $item) {
    $imagepic = $item['mainpictureurl'];
    for($k=0;$k<count($imagepic);$k++){
            echo $imagepic++;
            echo "<br>";
            $isok=copy($imagepic[$k] , $_SERVER . dirname(__FILE__).'/test/item_'.($k+1).'.jpg');
            if($isok==true){
                echo' success!';  
            }else{
                echo ' Fail';  
            }
        }
    }
?> 
```

我不断收到此错误

```
Warning: copy(h) [function.copy]: failed to open stream: No such file or directory in /home/decultur/public_html/shop/templatescustom/main/itemlist.html on line 111
Fail 
```

我错过了什么，请告诉我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T14:41:27.330

[`$_SERVER`](http://php.net/manual/en/reserved.variables.server.php)是一个数组，所以你的路径是从路径开始的`Array`。您需要找到您正在寻找的实际值并为此使用正确的索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T14:41:43.137

您将`$_SERVER`数组作为一个整体使用，这将导致（转换为字符串后）在`Array`. 您应该使用`$_SERVER['your_var']` 查看手册：[http ://www.php.net/manual/en/reserved.variables.server.php](http://www.php.net/manual/en/reserved.variables.server.php)

# iphone - 比较字符串中的时间并从 iphone 中减去 10 分钟？

> ID：10899355
> 
> 赞同：1
> 
> 时间：2012-06-05T14:37:07.400
> 
> 标签：iphone, nsdate, nsdateformatter

我有像“10:10:12”、“12:10:34”、“05:23:11”这样的时间字符串数组。我想计算该数组的更少（分钟）时间，即“05:23:11”并从中减去10分钟。并以相同的格式保存结果。如果有人知道该怎么做，请帮助我。我会感激他/她。预先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T15:06:38.497

首先，按升序排列字符串。如果您的字符串数组被调用`arrayOfTimeStrings`，那么您可以获得一个正确排序的数组，如下所示：

```
NSArray *array = [arrayOfTimeStrings sortedArrayUsingSelector:@selector(compare:)]; 
```

接下来，只需抓住第一项：

```
NSString *firstTimeString = (NSString *)[array objectAtIndex:0]; 
```

现在，您可以将其转换为`NSDate`这样的：

```
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"HH:mm:ss"];
NSDate *dateFromFirstString = [formatter dateFromString:firstTimeString]; 
```

最后，我们可以从该日期减去 600 秒并将其转换回`NSString`:

```
NSDate *tenMinutesBeforeDate = [NSDate dateWithTimeInterval:-600 sinceDate:dateFromFirstString];
NSString *tenMinutesBeforeString = [formatter stringFromDate:tenMinutesBeforeDate]; 
```

这将比其他解决方案简单得多，因为您不必提出自己的排序算法。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T15:11:59.340

如果您的日期数组很大，您可以这样做：

```
 NSArray * arrayWithTime = [NSArray array];
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
   [dateFormatter setDateFormat:@"HH:mm:ss"];

 NSSortDescriptor *d = [[NSSortDescriptor alloc] initWithKey:nil ascending:YES comparator:^NSComparisonResult(id obj1,id obj2){ 

NSDate *date1 = [dateFormatter dateFromString:obj1];
NSDate *date2 = [dateFormatter dateFromString:obj2];

return [date1 compare:date2];} ];

NSArray * comparators = [NSArray arrayWithObject:d];
NSArray * final = [arrayWithTime sortedArrayUsingDescriptors:comparators]; 
```

然后只取最终数组中的第一项并减去 10 分钟

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T15:01:35.923

有很多方法可以做到，首先想到的是：

```
NSString *strDate1 = @"10:10:12";
NSString *strDate2 = @"05:23:11";
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];

[dateFormatter setDateFormat:@"HH:mm:ss"];
NSDate *date1 = [dateFormatter dateFromString:strDate1];
NSDate *date2 = [dateFormatter dateFromString:strDate2];

//to compare dates
if([date1 compare:date2] == NSOrderedAscending)
{
    //do what you want
}

//to subtract 10 min form a date
NSDate *date3 = [date2 dateByAddingTimeInterval:-60*10]; 
```

我希望它有所帮助。

# css - 使用 css 自动调整大小

> ID：10899356
> 
> 赞同：0
> 
> 时间：2012-06-05T14:37:13.273
> 
> 标签：css, image, html, resize

我有以下问题：

我有一张通过幻灯片的图像，我需要它始终调整为窗口和显示器的大小，我想我会使用：

```
min-height: 100%; 
min-width: 1024px; 
width: 100%; 
height: auto; 
```

但是上图中没有解决我的问题显示了我当前的问题，我有一个标题 DIV 和一个 FOOTER DIV，它们叠加在图像上，并且图像在两个 div 的下方吃掉了它，我该如何解决这个问题？

要演示的图像：

![http://i46.tinypic.com/prqdl.jpg](../Images/f1eea2d31ea25d544f99d6b1ac1272e7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:46:14.703

```
img {
    min-height: 100%; 
    min-width: 1024px; 
    width: 100%; 
    height: auto; 

    position:relative;
    z-index:1000;
} 
```

这将确保图像出现在一切之上

**编辑：**

```
<div id="header"></div>
<div id="image">
    <img src="image_path">
</div>
<div id="footer"></div> 
```

如果那是您的来源，那么您的 css 应该如下所示。

```
#header,#footer{
height:150px; // You set the number
width:100%;
}

#image{ /* The code you were using */
     min-height: 100%; 
     min-width: 1024px; 
     width: 100%; 
     height: auto;
} 
```

# javascript - 我可以以更好的方式运行这个嵌套函数吗？

> ID：10899358
> 
> 赞同：5
> 
> 时间：2012-06-05T14:37:18.073
> 
> 标签：javascript, jquery

我只是想知道是否可以以更好的方式运行这些函数，我的意思是我不喜欢其中的函数集合：

```
setTimeout(function() {
        $(self.header_buttons_classes[0]).addClass(self.animations[15]);
        setTimeout(function() {
            $(self.header_buttons_classes[1]).addClass(self.animations[15]);
            setTimeout(function() {
                $(self.header_buttons_classes[2]).addClass(self.animations[15]);
                setTimeout(function() {
                    $(self.header_buttons_classes[3]).addClass(self.animations[15]);
                    setTimeout(function() {
                        $(self.header_buttons_classes[4]).addClass(self.animations[15]);
                        setTimeout(function() {
                            $(self.header_buttons_classes[5]).addClass(self.animations[15]);
                        }, 500);
                    }, 500);
                }, 500);
            }, 500);
        }, 500);
    }, 500); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T14:40:20.597

除了 setTimeout 之外，还有[setInterval](https://developer.mozilla.org/en/DOM/window.setInterval)函数，它允许您每 X 毫秒运行一次代码。您可以按如下方式简化代码：

```
var i = 0;
var total = self.header_buttons_classes.length;
var x = setInterval(function() {
    if(i == total) {
        clearInterval(x);
    } else {
        $(self.header_buttons_classes[i]).addClass(self.animations[15]);
        i++;
    }
}, 500); 
```

# c# - WebDriver 和 C# - NoSuchElement 异常

> ID：10899360
> 
> 赞同：5
> 
> 时间：2012-06-05T14:37:34.420
> 
> 标签：c#, selenium, webdriver

我有以下代码用于从给定列表中选择一个选项，它通常可以工作，但有时它会在第二个 if 上出现 NoSuchElement 异常而失败。我的印象是，如果它没有找到元素，它就会再次通过循环返回。我相信解释很简单......有人可以启发我吗？

```
 public static void selectFromList(String vList, String vText, IWebDriver driver)
    {
        for (int sec = 0; ; sec++)
        {
            System.Threading.Thread.Sleep(2500);
            if (sec >= 10) Debug.Fail("timeout : " + vList);
            if (driver.FindElement(By.Id(ConfigurationManager.AppSettings[vList])).Displayed) break;
        }
        new SelectElement(driver.FindElement(By.Id(ConfigurationManager.AppSettings[vList]))).SelectByText(vText);
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-05T15:15:02.557

与其尝试捕获每个实例，不如创建一个帮助程序/扩展方法来为您处理这些问题。在这里它返回元素，如果不存在则返回 null。然后，您可以简单地为 .exists() 使用另一种扩展方法。

**IWebElement element = driver.FindElmentSafe(By.Id("id"));**

```
 /// <summary>
    /// Same as FindElement only returns null when not found instead of an exception.
    /// </summary>
    /// <param name="driver">current browser instance</param>
    /// <param name="by">The search string for finding element</param>
    /// <returns>Returns element or null if not found</returns>
    public static IWebElement FindElementSafe(this IWebDriver driver, By by)
    {
        try
        {
            return driver.FindElement(by);
        }
        catch (NoSuchElementException)
        {
            return null;
        }
    } 
```

**布尔存在 = element.Exists();**

```
 /// <summary>
    /// Requires finding element by FindElementSafe(By).
    /// Returns T/F depending on if element is defined or null.
    /// </summary>
    /// <param name="element">Current element</param>
    /// <returns>Returns T/F depending on if element is defined or null.</returns>
    public static bool Exists(this IWebElement element)
    {
        if (element == null)
        { return false; }
        return true;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T15:02:45.707

您可以尝试[这个](https://stackoverflow.com/questions/6992993/selenium-c-sharp-webdriver-wait-until-element-is-present)SO question 的答案之一：

```
public static IWebElement FindElement(this IWebDriver driver, String vList, String vText, int timeoutInSeconds)
{

    By selector = By.Id(ConfigurationManager.AppSettings[vList])
    if (timeoutInSeconds > 0)
    {
        var wait = new WebDriverWait(driver, TimeSpan.FromSeconds(timeoutInSeconds));
        return wait.Until(drv => drv.FindElement(selector));
    }
    return driver.FindElement(selector);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T14:47:32.450

好吧，我是 Java 人，所以我不会提供代码，而是提供算法：

*   你的代码（我认为）应该检查，如果元素显示，如果没有，等待额外的 2,5 秒
*   它失败的原因是，有时显示元素需要超过前 2.5 秒。在这种情况下，检查元素是否显示会抛出异常

所以，基本上你应该在 for 循环中做一些异常处理并捕获这个异常并且什么都不做。在 Java 中，它由`try`和`catch`块完成。但是因为我不懂 C#，所以你必须了解它是如何用这种语言完成的

# c# - 简单的正则表达式

> ID：10899361
> 
> 赞同：0
> 
> 时间：2012-06-05T14:37:36.197
> 
> 标签：c#, regex

好的，我承认 RegEx 很糟糕，因为我很少需要它，但我发现自己处于一个简单的解析并没有削减它的情况。因此，在工作时试图自学整个 RegEx 后，我最终放弃并请教了专家。我只是在解析一个 sql 文件并将其拆分为`GO`语句。问题是我不能把**GO**从其他词中提取出来，比如`CREATE TABLE GOPHER`. 所以我认为当我有一行只有空格并且**GO**不区分大小写时说我拆分是很安全的。

这就是我所拥有的，我认为它非常接近，但我做错了，因为它目前不匹配任何东西。

```
^+\s*[GO]\s*\Z 
```

*note case 可以用忽略大小写标志来处理，所以我不担心

如果我简单地写

```
^+[GO]+\Z 
```

它主要工作，但它不会忽略 之前和之后的空格`GO`，我认为`\s*`会这样做，但它似乎没有返回任何匹配项。任何人都可以为我解决这个问题，并简要解释一下我在这里遇到的问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T14:41:52.303

将 Regex.Split 与模式一起使用，该模式`@"(?<=\bGO\b)"`与完整单词“GO”之后的零宽度边界匹配。

看

*   [零宽度正后向断言](http://msdn.microsoft.com/en-us/library/bs2twtah.aspx#zerowidth_positive_lookbehind_assertion)
*   [正则表达式中的锚点：单词边界](http://msdn.microsoft.com/en-us/library/h5181w5w#WordBoundary)

# tsql - 复杂的 SQL 聚合

> ID：10899363
> 
> 赞同：0
> 
> 时间：2012-06-05T14:37:53.970
> 
> 标签：tsql, aggregation

我有一个类似这样的数据集：

```
X | U | datetime
-------------
1 | 1 | 1/1/12
1 | 2 | 1/1/12
1 | 2 | 1/1/12
1 | 2 | 1/1/12
1 | 4 | 1/1/12
2 | 2 | 2/1/12
2 | 3 | 2/1/12
1 | 3 | 3/1/12
2 | 4 | 3/1/12
3 | 2 | 4/1/12 
```

这是访问日志。`X`是访问的东西的id，`U`是用户id

我需要计算两个统计数据。

给定 X (x) 的值：

1）“新访问者”：计算任何 X 到 的第一次访问的唯一用户数`x`。

用例：

*   用户只访问过`x`一次 -> 计为 1
*   用户只访问过`!x`一次 -> 计为 0
*   用户只访问过`x`两次 -> 计为 1
*   用户只访问过`!x`两次 -> 计为 0
*   一个用户访问过很多个 X，他们第一次访问任何一个 X 是`x`-> 计为 1
*   一个用户访问过很多个X，他们对任何一个X的第一次访问是`!x`->算0

以上数据的例子：

```
X | Count
---------
1 | 3
2 | 1
3 | 0 
```

`x`2）“回访者”：计算访问过一次以上或访问过一次但之前访问过另一个 X的唯一用户数`x`（即单次访问后的访问`x`不计算在内）

以上数据的例子：

```
X | Count
---------
1 | 3
2 | 2
3 | 1 
```

我正在使用 SQL Server 2008，非常感谢任何帮助。谢谢！

**更新**

这似乎回答了 Q1，虽然我不是很快:(

```
select x.X, COUNT(1)
from (
    select t1.X
    from @t t1
    group by t1.X, t1.U
    having (select COUNT (1) from @t t2 where t2.u= t1.U and t2.OccurredOn < MIN(t1.OccurredOn)) =0 
) x 
group by x.X 
```

**更新 2**

我*认为*这是（2）

```
select t.X, COUNT(1)
from @t t
left join (
    select t.U, MIN(t.OccurredOn) as O
    from @t t
    group by t.U
) x on t.U = x.U and t.OccurredOn <= x.O
where x.U is null
group by t.X 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T15:15:54.227

对于第一种情况，您需要一个子查询来加入，这将过滤掉所有不是第一次的用户访问。所以你会有类似的东西

```
select X, count(*) [First Visits]
from table t1
     join (select U, min(datetime) firstvisit 
           from table 
           group by U) t2 on t1.datetime = t2.firstvisit and t1.U = t2.U
group by X 
```

`<=`编辑：我认为你对第二个的解决方案很好，除了如果你用简单的替换加入会更快`=`。

# jsf - p:dataExporter 抛出 java.lang.NoClassDefFoundError: com/lowagie/text/phrase

> ID：10899368
> 
> 赞同：3
> 
> 时间：2012-06-05T14:38:08.537
> 
> 标签：jsf, primefaces, itext

我尝试使用 primefaces 3.2 的数据导出器控件。以下是代码：

```
<p:commandLink value="export" ajax="false">
        <p:dataExporter type="xls" target="dtable" fileName="myfile" />  
    </p:commandLink>
<p:datatable id="dtable" ........../> 
```

当我单击导出链接时，出现以下错误：

```
java.lang.NoClassDefFoundError: com/lowagie/text/phrase 
```

我下载了 itext jar 5.2.1 并将其包含在我的应用程序中，但仍然出现相同的错误。我该如何解决？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-05T14:44:22.033

尝试 iText 2.1.7 而不是 5.2.1。 [http://olex.openlogic.com/packages/itext/2.1.7](http://olex.openlogic.com/packages/itext/2.1.7)

我认为存在许可证冲突。所以 primefaces 使用 2.1.7

对于 Excel 导出，您需要 Apache POI。尝试 3.7： http: [//archive.apache.org/dist/poi/release/bin/](http://archive.apache.org/dist/poi/release/bin/)

**编辑**

（你只需要`poi-3.7*.jar`and `poi-ooxml-3.7*.jar`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-22T09:32:20.550

转到 netbeans，在您的项目依赖项上添加一个新的依赖项。键入查询类型 iText 2.1.7，然后选择 com.lowagie:itext。你应该可以用 dpf 下载：D

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-11-05T21:42:46.810

只需添加以下依赖项

```
 <dependency>
        <groupId>com.lowagie</groupId>
        <artifactId>itext</artifactId>
        <version>2.1.7</version>
    </dependency> 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2015-12-07T20:15:43.977

我遇到了同样的问题，但是当我下载jar时它不起作用。然后我注意到我在使用`<p:commandLink>`，正确的是`<h:commandLink>`由于某种原因使用`<p:commandLink>`不起作用。

不要使用：

`<p:commandLink > <p:graphicImage value="images/excel.png" width="48"/> <p:dataExporter type="xls" target="table" fileName="tablexls" encoding="UTF-8" /> </p:commandLink>`

改为使用：

`<h:commandLink > <p:graphicImage value="images/custom/excel.png" width="48"/> <p:dataExporter type="xls" target="table" fileName="tablexls" encoding="UTF-8" /> </h:commandLink>`

# c++ - MPI 中使用 MPI_Comm_spawn 生成进程的奇怪输出

> ID：10899369
> 
> 赞同：0
> 
> 时间：2012-06-05T14:38:11.457
> 
> 标签：c++, mpi, hpc

Amaey 帮我解决了这个问题。

我试图了解**MPI_Comm_spawn**函数来生成进程，因为我正在将项目从**PVM**迁移到**MPI**。[我在这里](http://mpi.deino.net/mpi_functions/MPI_Comm_spawn.html)找到了一个很好的示例程序。所以我决定稍微改一下，让父进程向两个子进程发送消息，然后让子进程输出消息。问题是等级为 0 的子进程没有正确接收到消息，它只是接收到其中的一部分，而等级为 1 的子进程接收到消息并正常输出。有人可以解释为什么会发生这种情况，我做错了什么或如何解决这个问题。非常感谢那些可以提供帮助的人！

```
#include "mpi.h"
#include <stdio.h>
#include <stdlib.h>
#include <iostream>

#define NUM_SPAWNS 2
// Based on the example from: http://mpi.deino.net/mpi_functions/MPI_Comm_spawn.html
int main( int argc, char *argv[] )
{
    int my_rank;
    int size;
    int np = NUM_SPAWNS;
    int errcodes[NUM_SPAWNS];
    MPI_Comm parentcomm, intercomm;
    char greeting[100];
    char greeting2[100];
    char greeting3[100];
    MPI_Init( &argc, &argv );
    MPI_Status stat;
    MPI_Comm_get_parent( &parentcomm );
    if (parentcomm == MPI_COMM_NULL)
    {
        /* Create 2 more processes - this example must be called spawn_example.exe for this to work. */
        MPI_Comm_spawn( "spawn_example", MPI_ARGV_NULL, np, MPI_INFO_NULL, 0, MPI_COMM_WORLD, &intercomm, errcodes );
        MPI_Comm_rank(MPI_COMM_WORLD, &my_rank);
        MPI_Comm_size(MPI_COMM_WORLD, &size);
        // Called this Jreeting because process 0 in the new MPI_COMM_WORLD was only receiving a part of this string.
        sprintf(greeting2, "Jreeting from master1 %d of %d\n", my_rank, size);
        sprintf(greeting3, "Greeting from master2 %d of %d\n", my_rank, size);
        for(int i = 0; i<np;i++)
        {
            if(i == 0)
            {
                MPI_Send(greeting2, strlen(greeting)+1, MPI_BYTE, i,1,intercomm);
            }
            if(i == 1)
            {
                MPI_Send(greeting3, strlen(greeting)+1, MPI_BYTE, i,1,intercomm);
            }
            MPI_Recv(greeting, sizeof(greeting), MPI_BYTE, i, 1, intercomm, &stat);
            fputs (greeting, stdout);
        }
    }
    else
    {
        MPI_Comm_rank(MPI_COMM_WORLD, &my_rank);
        MPI_Comm_size(MPI_COMM_WORLD, &size);
        if(my_rank == 0)
        {
            MPI_Recv(greeting2, sizeof(greeting2), MPI_BYTE, 0, 1, parentcomm, &stat);
            std::cout << greeting2 << "\n";
        }
        if(my_rank == 1)
        {
            MPI_Recv(greeting3, sizeof(greeting3), MPI_BYTE, 0, 1, parentcomm, &stat);
            std::cout << greeting3 << "\n";
        }
        sprintf(greeting, "Hello world: processor %d of %d\n", my_rank, size);
        MPI_Send(greeting, strlen(greeting)+1, MPI_BYTE, 0,1,parentcomm);
    }
    fflush(stdout);
    MPI_Finalize();
    return 0;
} 
```

当我编译时，我有警告......：

```
hrognkelsi:MPI_TUTORIAL gumundureinarsson$ mpic++ spawn_example.cc -o spawn_example
spawn_example.cc: In function ‘int main(int, char**)’:
spawn_example.cc:24: warning: deprecated conversion from string constant to ‘char*’ 
```

当我运行时：

```
hrognkelsi:MPI_TUTORIAL gumundureinarsson$ mpirun spawn_example
Jre
Hello world: processor 0 of 2
Greeting from master2 0 of 1
Hello world: processor 1 of 2 
```

如您所见，子进程仅输出**Jre**而不是**Jreeting from master1 0 of 1**应该的。这是怎么回事？为什么它适用于其他子进程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T15:31:37.540

看线： `MPI_Send(greeting2, strlen(greeting)+1, MPI_BYTE, i,1,intercomm);`

因此，除非我忽略了某些东西，否则'strlen(greeting)' 不是简单的 0。您在发送缓冲区中放入的东西肯定比 1 个元素多。我想你想把'strlen（greeting2）'放在那里。

我认为正在发生的是父进程发送一个截断的字符串并从进程 0 获得回复，该进程填充“问候”。因此，在第二个 MPI_Send 'sizeof(greeting)' 是非零的，因此您可以发送整个消息。

# php - Yii dropDownList 默认值

> ID：10899371
> 
> 赞同：5
> 
> 时间：2012-06-05T14:38:14.313
> 
> 标签：php, yii

我有这个代码：

```
echo $form->dropDownList($model, 
                 'defaultPrinterId', 
                  CHtml::listData(Printer::model()->findAll(), 'id', 'name'), 
                  array('prompt' => '-- None--')); 
```

这给了我一个这样的下拉列表：

```
<select id="LabelType_defaultPrinterId" name="LabelType[defaultPrinterId]">
    <option value="">-- None --</option>
</select> 
```

但是，当表单发布时，它会在我的表中添加一个值，其中 defaultPrinterId 为 0。相反，我如何将其设为空，因为它是一个可为空的字段？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-05T16:54:59.020

如果您想严格遵循 MVC，则应在模型中完成与模型相关的值的验证。

可以通过以下方式完成：

```
/**
 * @return array validation rules for model attributes.
 */
public function rules() {
    // NOTE: you should only define rules for those attributes that
    // will receive user inputs.
    return array(
        //rules rules rules...
        array('defaultPrinterId', 'default', 'setOnEmpty' => true, 'value' => NULL),
        //rest of the rules
    );
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-05T14:51:50.110

在您的控制器中，从加载属性后`$_POST`执行

`$model->defaultPrinterId = $model->defaultPrinterId ? $model->defaultPrinterId : null;`

这将更`0`改为`null`否则保持不变。

# javascript - 调整浏览器大小时调整 Unity WebPlayer 元素的大小

> ID：10899374
> 
> 赞同：2
> 
> 时间：2012-06-05T14:38:29.927
> 
> 标签：javascript, css, unity3d, resize, unityscript

我试图让 Unity WebPlayer 控件在调整浏览器大小时调整大小。这是我认为相关的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <script type="text/javascript">
        <!--
        function GetUnity() 
        {
            if (typeof unityObject != "undefined") 
            {
                return unityObject.getObjectById("unityPlayer");
            }
            return null;
        }

        function ResizeUnity()
        {
            //This function properly assigns innerWidth and Height to winWidth and winHeight
            GetWindowSize();

            var unity = GetUnity();
            if(unity != null)
            {
                //This does not properly resize anything at all
                unity.width = winWidth;
                unity.height = winHeight;
            }
        }
    }

    if (typeof unityObject != "undefined") 
    {
        GetWindowSize();
        //This replaces the unityPlayer div below with an actual WebPlayer object
        unityObject.embedUnity("unityPlayer", "WebPlayer.unity3d", winWidth, winHeight, params);            
    }
    -->
    </script>
    <style type="text/css">
    <!--
    div#unityPlayer {
        cursor: default;
        height: 100%;
        width: 100%;
    }
    -->
    </style>
    </head>
    <body margin="0" marginwidth="0" marginheight="0" scroll="no" onResize="ResizeUnity()">
        <div class="content">
            <div id="unityPlayer">
                <div class="missing">
                    <a href="http://unity3d.com/webplayer/" title="Unity Web Player. Install now!">
                    </a>
                </div>
            </div>
        </div>
    </body>
</html> 
```

从代码中的各种`alert()`s 中，我可以验证`ResizeUnity()`在更改窗口大小时正在调用它。我可以验证这一点，`winWidth`并`winHeight`在调整大小时为它们分配适当的值。但是，无论我对浏览器窗口做什么，Unity WebPlayer 对象都保持与加载时相同的大小。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T18:53:32.273

似乎该`GetUnity()`函数没有在其层次结构中抓取足够高的元素，`div`以便我调整正确元素的大小。用这个更新我的`ResizeUnity()`函数就可以了：

```
function ResizeUnity()
{
    //This function properly assigns innerWidth and Height to winWidth and winHeight
    GetWindowSize();

    var unity = document.getElementById('unityPlayer');
    if(unity != null)
        {                   
            unity.style.width = winWidth + "px";
            unity.style.height = winHeight + "px";
        }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-01T23:29:29.977

您需要调整`div`包含您的游戏的属性。大多数时候 CSS 就足以做到这一点，您不需要 JavaScript。

这是一个使用浏览器的全宽和全高显示游戏的工作示例：

```
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <script type="text/javascript" src="http://code.jquery.com/jquery-2.0.3.min.js"></script>
        <script type="text/javascript" src="http://webplayer.unity3d.com/download_webplayer-3.x/3.0/uo/UnityObject2.js"></script>
        <script type="text/javascript">
            var u = new UnityObject2();
            jQuery(function() {
                u.initPlugin(jQuery("#unityPlayer")[0], "http://unity3d.com/files/live-demos/angrybots/AngryBots.unity3d");
            });
        </script>
        <style type="text/css">
        html, body {
            height: 100%;
            margin: 0;
        }
        #unityPlayer {
            position:fixed;
            top:0px;
            left:0px;
            height: 100%;
            width: 100%;
        }
        </style>
    </head>
    <body>
        <p>Some text that will be hidden...</p>
        <div id="unityPlayer"></div>
        <p>Some more text that will also be hidden.</p>
    </body>
</html> 
```

# php - 更改模块的 uri 而无需在 PyroCMS 中重命名类

> ID：10899376
> 
> 赞同：2
> 
> 时间：2012-06-05T14:38:32.913
> 
> 标签：php, codeigniter, pyrocms

在不重命名类的情况下更改模块的 uri 的最佳方法是什么。例如，我希望博客模块显示：

/**博客**/post-title -> /**新闻**/post-title

路线.php？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T17:02:48.353

首先我添加到routes.php。

> $route['news/([0-9]+)/([0-9]+)/([a-zA-Z0-9_-]+)'] = 'blog/$1/$2/$3';

然后为了确保正确的链接，我将它添加到博客 plugin.php。

```
foreach ($posts as &$post)
{
    $post->url = str_replace('blog/', 'news/', $post->url);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T15:23:51.680

最好的方法是使用路由模块。

如果您不想使用它，请修改`routes.php`in`cms/config`而不是在您的模块中，因为它不会在不同的路径下运行。

# mysql - 如何仅为正时间设置默认值

> ID：10899379
> 
> 赞同：0
> 
> 时间：2012-06-05T14:38:41.363
> 
> 标签：mysql, time, default

我有`TIME`类型（`00:00:00`）的列。我只想允许正值。因此，`-05:30:00`例如，将是无效的。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T15:19:18.037

> *我想为该列设置一个默认值，因此如果它收到“-05:00:00”值，它将将该值设置为“00:00:00”。*

[`time_format( time, format )`](http://dev.mysql.com/doc/refman/5.6/en/date-and-time-functions.html#function_time-format)如果需要，[`date_format( date, format )`](http://dev.mysql.com/doc/refman/5.6/en/date-and-time-functions.html#function_date-format)您可以依赖`MySQL`. 您还需要`substring`和`locate`函数来解析。

要将时间字段设置为默认或 +ve 部分时间数据，以下示例可以帮助您：

```
mysql> set @time_value='-23:51:48';
Query OK, 0 rows affected (0.00 sec) 
```

***示例 1***：

```
mysql> insert
         into time_table( time_field )
         values ( if( locate( '-', @time_value ) = 1, '00:00:00', @time_value ) );
Query OK, 1 row affected (0.00 sec) 
```

让我们看看插入了什么：

```
mysql> select time_field from time_table;
+------------+
| time_field |
+------------+
| 00:00:00   |
+------------+
1 row in set (0.00 sec) 
```

***示例 2***：

```
mysql> insert
         into time_table( time_field )
         values ( substring( @time_value, ( locate( '-', @time_value ) + 1 ) ) );
Query OK, 1 row affected (0.00 sec) 
```

***示例 3***：

```
mysql> insert
         into time_table( time_field )
         values
          ( substring( time_format( @time_value, '%H %k:%i:%s' ),
                       ( locate( ' ', time_format( @time_value, '%H %k:%i:%s' ) ) + 1 )
                     ) 
          );
Query OK, 1 row affected (0.00 sec) 
```

在这：

1.  `H`: for Hour to return as `00`to`23`
2.  `k`: for Hour to return as `0`to`23`
3.  `i`：对于分钟，数字`00`到`59`
4.  `s`: 秒返回`00`至`59`

让我们看看插入了什么：

```
mysql> select time_field from time_table;
+------------+
| time_field |
+------------+
| 23:51:48   |
+------------+
1 row in set (0.00 sec) 
```

有关格式说明符字符的更多详细信息，`%k`请参阅[`date_format( date, format )`](http://dev.mysql.com/doc/refman/5.6/en/date-and-time-functions.html#function_date-format)

# umbraco5 - Umbraco 5.1 在模板中显示图像

> ID：10899380
> 
> 赞同：0
> 
> 时间：2012-06-05T14:38:42.690
> 
> 标签：umbraco5

有人可以给我一个关于如何在 Umbraco 5.1 模板中显示图像的分步描述。

它一定是简单得可笑，以至于没有人费心去描述它。如果你能一步一步地做到这一点，那就太好了。我现在已经阅读并尝试实现各种 xslt 和 razor 语句、partials 和 marcos，甚至还没有接近。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T06:50:53.880

我喜欢在 umbraco5

```
<img src="@umbraco.GetMediaUrl(Model,"propertyAlias")" alt="image"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T09:47:34.297

```
src="@Umbraco.GetMediaUrl(Model.Id, "image")" 
```

其中`Model.Id`是特定图像的 imageid。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T04:23:50.253

Umbraco 中一个常见的混淆点是实际上有两种不同的字段类型，一种用于“上传者”，一种用于“媒体选择器”。

使用上传器，您可以将图像直接上传到内容页面。

使用媒体，您可以将图像上传到媒体库，然后使用媒体选择器控件在整个站点中引用内容。

由于您说您的内容具有媒体 ID，因此我假设您正在尝试使用媒体选择器——这是您可以输出由媒体选择器字段选择的图像的最简单方法。

```
@Umbraco.GetMediaUrl(@CurrentPage.MyImageFieldAlias) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T10:07:17.800

我这样做。

首先创建一个 Umabraco 宏。给它一个相关的名称（TopLeftImage）现在在页面中使用它，如下所示：-

```
<img src= <umbraco:Item field="TopLeftImage" useIfEmpty="TopLeftImage"  runat="server"/>   /> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-10T14:38:44.870

按照这些步骤，你一定会摆脱这个问题：

`field`1.首先使用数据类型在umbraco Cms中创建图像`media picker`，然后将图像上传到该字段。

2.在页面中创建`asp:image`控件`visual studio`

```
<asp:image ID="imgLogo" runat="server"> 
```

3.`Code Behind`然后执行以下代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using umbraco.presentation.nodeFactory;
using Umbraco.Core;
using umbraco;
using umbraco.cms.businesslogic.media;
using umbraco.interfaces;

    public partial class UserControls_Header_Nav : System.Web.UI.UserControl
    {
        umbraco.NodeFactory.Node headerNode = uQuery.GetNode(1139);
        protected void Page_Load(object sender, EventArgs e)
        {
            if (!Page.IsPostBack) 
            {
            LoadData();
            }
        }

    private void LoadData()
    {

        if (headerNode != null)
        {

            if (headerNode.GetProperty("imgLogo") != null && !string.IsNullOrEmpty(headerNode.GetProperty("imgLogo").Value))
            {
                string url;
                Int32 PhotoId = Convert.ToInt32(headerNode.GetProperty("imgLogo").Value);
                var media = new umbraco.cms.businesslogic.media.Media(PhotoId);
                var file = media.getProperty("umbracoFile");
                url = (string)file.Value;
                imgLogo.ImageUrl = url;
            }
        }

    }
} 
```

这对你有用:-)

# windows - 以编程方式访问打印机属性（剩余纸张数）

> ID：10899381
> 
> 赞同：2
> 
> 时间：2012-06-05T14:38:43.663
> 
> 标签：windows, printing, autohotkey, printer-properties

我有一个可以拍照和打印的照相亭。自助服务终端在早上自动启动，晚上使用 Windows 的计划任务自动关闭。现在我正在尝试向信息亭系统添加电子邮件警报，以便当打印机的纸张不足时，将发送一封电子邮件通知支持人员放置新的纸卷。目前，我正在使用一个 hack，它通过使用 AutoHotKey 从打印机实用程序中获取文本来从打印机实用程序中检索剩余的纸张计数（参见打印机实用程序的图像，它是一个 500kb 的单个可执行文件）。我还与打印机供应商核实过，但他们没有任何我可以以编程方式调用的库。

![具有剩余纸张计数的打印机实用程序](../Images/91e327096c7d66bc1a022b3df9703c6a.png)

我想知道的是，是否有办法通过 Windows 下的通用打印 API 检索打印机属性，或者通过使用 USB Sniffer 复制从实用程序发送的命令的任何方式，我尝试嗅探连接打印机的 USB 端口使用[USBSnoop](http://sourceforge.net/projects/usbsnoop/)和[USBlyzer](http://www.usblyzer.com/download.htm)但还不知道如何调用该命令。有任何想法吗？

更新 1：这是我用来从窗口中获取文本的自动热键代码。

```
Run, "C:\Documents and Settings\Crescendo4\Desktop\HTools-3.9.3.exe",, Min
Sleep 400
ControlGetText, OutputVar, Static13, HTools  3.9.3
MsgBox, 4096,, %OutputVar%, 1
WinClose, HTools  3.9.3 
```

更新 2：尝试了[WinAPIOverride32](http://jacquelin.potier.free.fr/winapioverride32/)，但它没有显示任何 DLL 调用。

# python - Flask 和 Web.py 都挂在 atexit

> ID：10899382
> 
> 赞同：6
> 
> 时间：2012-06-05T14:38:46.120
> 
> 标签：python, flask, web.py, atexit

我有这个简单的 Flask 应用程序：

```
from flask import Flask
import prolog_handler as p

app = Flask(__name__)
app.debug = False

@app.route('/')
def hello():
    for rule in p.rules:
        print rule
    return 'hello'

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=8080) 
```

prolog_handler 模块使用三元存储启动会话并加载一些规则。它还有一个 atexit 函数，可以结束会话并打印类似“Closing...”的消息。我从 bash 提示符启动服务器`python myapp.py`。每当我按 CTRL-C 停止服务器时，什么都没有发生。我没有返回到 bash 提示符，也没有看到打印的“正在关闭...”消息。我也尝试使用 Web.py 来执行此操作，结果相同。

prolog_handler 所做的实际上就像这样简单：

```
tstore = openPrologSession()
rules = ...

def cleanUp():
    print "Closing..."
    tstore.endSession()

atexit.register(cleanUp) 
```

那么为什么只执行一个 atexit 任务这么困难呢？

PS：如果我注释掉有关打开 Prolog 会话并结束它的所有内容，只留下打印消息“Closing ...”的部分，那么当我按下 CTRL- 时，我确实看到了“Closing ...”消息C 和我确实返回到 bash 提示符。这按预期工作。但是，如果我不能用它做任何有用的事情，那么 atexit 有什么意义呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T15:50:41.197

这可能不是完美的答案，但我尝试将以下内容用于 Flask：

```
# These functions should be called when you tear down the application
app.teardown_functions = []

def teardown_applications(): 
    for func in app.teardown_functions:
       print('Calling teardown function %s' % func.__name__)
        func()

app.teardown_functions.append(function_tocall_at_exit) 
```

这似乎对我有用。我也倾向于将 gevent 用于所有烧瓶应用程序

```
if __name__ == '__main__':
    gevent.signal(signal.SIGINT, teardown_applications)
    http_server = WSGIServer(('', 5000), app)
    http_server.serve_forever() 
```

这通常对我有用。

一些模块导入：

```
from flask import Flask
from gevent.wsgi import WSGIServer
import gevent
import signal

from gevent import monkey
monkey.patch_all() 
```

# javascript - 使用 Ajax 以一种形式上传数据和文件？

> ID：10899384
> 
> 赞同：448
> 
> 时间：2012-06-05T14:38:56.153
> 
> 标签：javascript, jquery, ajax, forms

我正在为我的表单使用 jQuery 和 Ajax 来提交数据和文件，但我不确定如何在一个表单中同时发送数据和文件？

我目前对这两种方法几乎相同，但是将数据收集到数组中的方式不同，数据使用`.serialize();`但文件使用`= new FormData($(this)[0]);`

是否可以结合这两种方法通过 Ajax 以一种形式上传文件和数据？

**数据 jQuery、Ajax 和 html**

```
$("form#data").submit(function(){

    var formData = $(this).serialize();

    $.ajax({
        url: window.location.pathname,
        type: 'POST',
        data: formData,
        async: false,
        success: function (data) {
            alert(data)
        },
        cache: false,
        contentType: false,
        processData: false
    });

    return false;
});

<form id="data" method="post">
    <input type="text" name="first" value="Bob" />
    <input type="text" name="middle" value="James" />
    <input type="text" name="last" value="Smith" />
    <button>Submit</button>
</form> 
```

**文件 jQuery、Ajax 和 html**

```
$("form#files").submit(function(){

    var formData = new FormData($(this)[0]);

    $.ajax({
        url: window.location.pathname,
        type: 'POST',
        data: formData,
        async: false,
        success: function (data) {
            alert(data)
        },
        cache: false,
        contentType: false,
        processData: false
    });

    return false;
});

<form id="files" method="post" enctype="multipart/form-data">
    <input name="image" type="file" />
    <button>Submit</button>
</form> 
```

如何结合以上内容，以便通过 Ajax 以一种形式发送数据和文件？

我的目标是能够通过 Ajax 在一个帖子中发送所有这些表格，这可能吗？

```
<form id="datafiles" method="post" enctype="multipart/form-data">
    <input type="text" name="first" value="Bob" />
    <input type="text" name="middle" value="James" />
    <input type="text" name="last" value="Smith" />
    <input name="image" type="file" />
    <button>Submit</button>
</form> 
```

* * *

## 回答 #1

> 赞同：509
> 
> 时间：2012-06-05T15:03:17.157

我遇到的问题是使用了错误的 jQuery 标识符。

您可以**使用 ajax**以一种形式**上传数据和文件**。

 ****PHP + HTML**

```
<?php

print_r($_POST);
print_r($_FILES);
?>

<form id="data" method="post" enctype="multipart/form-data">
    <input type="text" name="first" value="Bob" />
    <input type="text" name="middle" value="James" />
    <input type="text" name="last" value="Smith" />
    <input name="image" type="file" />
    <button>Submit</button>
</form> 
```

**jQuery + Ajax**

```
$("form#data").submit(function(e) {
    e.preventDefault();    
    var formData = new FormData(this);

    $.ajax({
        url: window.location.pathname,
        type: 'POST',
        data: formData,
        success: function (data) {
            alert(data)
        },
        cache: false,
        contentType: false,
        processData: false
    });
}); 
```

**精简版**

```
$("form#data").submit(function(e) {
    e.preventDefault();
    var formData = new FormData(this);    

    $.post($(this).attr("action"), formData, function(data) {
        alert(data);
    });
}); 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2016-05-02T07:07:52.083

另一种选择是使用 iframe 并将表单的目标设置为它。

你可以试试这个（它使用 jQuery）：

```
function ajax_form($form, on_complete)
{
    var iframe;

    if (!$form.attr('target'))
    {
        //create a unique iframe for the form
        iframe = $("<iframe></iframe>").attr('name', 'ajax_form_' + Math.floor(Math.random() * 999999)).hide().appendTo($('body'));
        $form.attr('target', iframe.attr('name'));
    }

    if (on_complete)
    {
        iframe = iframe || $('iframe[name="' + $form.attr('target') + '"]');
        iframe.load(function ()
        {
            //get the server response
            var response = iframe.contents().find('body').text();
            on_complete(response);
        });
    }
} 
```

它适用于所有浏览器，您无需序列化或准备数据。不利的一面是您无法监控进度。

此外，至少对于 chrome，该请求不会出现在开发人员工具的“xhr”选项卡中，而是出现在“doc”下

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2018-01-04T16:20:53.547

我在带有 HttpPostedFilebase 的 ASP.Net MVC 中遇到了同样的问题，而不是在提交时使用表单，我需要在单击时使用按钮，我需要在需要做一些事情的地方点击按钮，然后如果一切正常，提交表单，这就是我如何让它工作

```
$(".submitbtn").on("click", function(e) {

    var form = $("#Form");

    // you can't pass Jquery form it has to be javascript form object
    var formData = new FormData(form[0]);

    //if you only need to upload files then 
    //Grab the File upload control and append each file manually to FormData
    //var files = form.find("#fileupload")[0].files;

    //$.each(files, function() {
    //  var file = $(this);
    //  formData.append(file[0].name, file[0]);
    //});

    if ($(form).valid()) {
        $.ajax({
            type: "POST",
            url: $(form).prop("action"),
            //dataType: 'json', //not sure but works for me without this
            data: formData,
            contentType: false, //this is requireded please see answers above
            processData: false, //this is requireded please see answers above
            //cache: false, //not sure but works for me without this
            error   : ErrorHandler,
            success : successHandler
        });
    }
}); 
```

这将比正确地填充您的 MVC 模型，请确保在您的模型中，HttpPostedFileBase[] 的属性与 html 中的输入控件的名称具有相同的**名称**，即

```
<input id="fileupload" type="file" name="UploadedFiles" multiple>

public class MyViewModel
{
    public HttpPostedFileBase[] UploadedFiles { get; set; }
} 
```

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2012-07-05T07:29:04.803

或更短：

```
$("form#data").submit(function() {
    var formData = new FormData(this);
    $.post($(this).attr("action"), formData, function() {
        // success    
    });
    return false;
}); 
```

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2019-02-06T01:29:48.643

对我来说，如果没有`enctype: 'multipart/form-data'`Ajax 请求中的字段，它就无法工作。我希望它可以帮助陷入类似问题的人。

尽管`enctype` **已经在表单属性中设置了**，但出于某种原因，Ajax 请求并没有自动识别`enctype`没有显式声明（jQuery 3.3.1）。

```
// Tested, this works for me (jQuery 3.3.1)

fileUploadForm.submit(function (e) {   
    e.preventDefault();
    $.ajax({
            type: 'POST',
            url: $(this).attr('action'),
            enctype: 'multipart/form-data',
            data: new FormData(this),
            processData: false,
            contentType: false,
            success: function (data) {
                console.log('Thank God it worked!');
            }
        }
    );
});

// enctype field was set in the form but Ajax request didn't set it by default.

<form action="process/file-upload" enctype="multipart/form-data" method="post" >

     <input type="file" name="input-file" accept="text/plain" required> 
     ...
</form> 
```

正如上面提到的其他人，也请特别注意`contentType`和`processData`字段。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2020-06-05T05:34:38.173

一个简单但更有效的方法：
`new FormData()`它本身就像一个容器（或一个袋子）。您可以将所有 attr 或 file 放入其中。您唯一需要附加`attribute, file, fileName`例如：

```
let formData = new FormData()
formData.append('input', input.files[0], input.files[0].name) 
```

并在 AJAX 请求中传递它。例如：

```
 let formData = new FormData()
    var d = $('#fileid')[0].files[0]

    formData.append('fileid', d);
    formData.append('inputname', value);

    $.ajax({
        url: '/yourroute',
        method: 'POST',
        contentType: false,
        processData: false,
        data: formData,
        success: function(res){
            console.log('successfully')
        },
        error: function(){
            console.log('error')
        }
    }) 
```

您可以使用 FormData 附加 n 个文件或数据。

如果您从 Script.js 文件向 Node.js 中的 Route 文件发出 AJAX 请求，请注意使用
`req.body`访问数据（即文本）
`req.files`来访问文件（即图像、视频等）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-05-10T10:59:26.673

下面的代码对我有用

```
$(function () {
    debugger;
    document.getElementById("FormId").addEventListener("submit", function (e) {
        debugger;
        if (ValidDateFrom()) { // Check Validation 
            var form = e.target;
            if (form.getAttribute("enctype") === "multipart/form-data") {
                debugger;
                if (form.dataset.ajax) {
                    e.preventDefault();
                    e.stopImmediatePropagation();
                    var xhr = new XMLHttpRequest();
                    xhr.open(form.method, form.action);
                    xhr.onreadystatechange = function (result) {
                        debugger;
                        if (xhr.readyState == 4 && xhr.status == 200) {
                            debugger;
                            var responseData = JSON.parse(xhr.responseText);
                            SuccessMethod(responseData); // Redirect to your Success method 
                        }
                    };
                    xhr.send(new FormData(form));
                }
            }
        }
    }, true);
}); 
```

在您的 Action Post 方法中，将参数作为 HttpPostedFileBase UploadFile 传递，并确保您的文件输入与您在 Action 方法的参数中提到的相同。它也应该与 AJAX Begin 形式一起使用。

请记住，您的 AJAX BEGIN 表单在这里不起作用，因为您在上面提到的代码中定义了您的 post call，并且您可以根据要求在代码中引用您的方法

我知道我回答迟了，但这对我有用

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-09-23T08:37:02.890

这是我实施的解决方案

```
var formData = new FormData();
var files = $('input[type=file]');
for (var i = 0; i < files.length; i++) {
if (files[i].value == "" || files[i].value == null) {
    return false;
}
else {
    formData.append(files[i].name, files[i].files[0]);
}
}
var formSerializeArray = $("#Form").serializeArray();
for (var i = 0; i < formSerializeArray.length; i++) {
  formData.append(formSerializeArray[i].name, formSerializeArray[i].value)
}
$.ajax({
 type: 'POST',
 data: formData,
 contentType: false,
 processData: false,
 cache: false,
 url: '/Controller/Action',
 success: function (response) {
    if (response.Success == true) {
        return true;
    }
    else {
        return false;
    }
 },
 error: function () {
    return false;
 },
 failure: function () {
    return false;
 }
 }); 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2019-04-01T11:05:42.047

在我的情况下，我必须发出一个 POST 请求，其中包含通过标头发送的信息，以及使用 FormData 对象发送的文件。

我在这里使用了一些答案的组合使其工作，所以基本上最终工作的是在我的 Ajax 请求中有这五行：

```
 contentType: "application/octet-stream",
 enctype: 'multipart/form-data',
 contentType: false,
 processData: false,
 data: formData, 
```

其中 formData 是这样创建的变量：

```
 var file = document.getElementById('uploadedFile').files[0];
 var form = $('form')[0];
 var formData = new FormData(form);
 formData.append("File", file); 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2020-08-12T13:44:31.917

您可以将它们附加到您的表单数据中，在其中添加您的文件和数据。您可以阅读此..

[https://developer.mozilla.org/en-US/docs/Web/API/FormData/append](https://developer.mozilla.org/en-US/docs/Web/API/FormData/append)

为了更好地理解。您可以分别为您的文件检索它们 $_FILES 和为您的数据检索 $_POST 。

* * *

## 回答 #11

> 赞同：-3
> 
> 时间：2018-09-27T05:37:01.340

```
<form id="form" method="post" action="otherpage.php" enctype="multipart/form-data">
    <input type="text" name="first" value="Bob" />
    <input type="text" name="middle" value="James" />
    <input type="text" name="last" value="Smith" />
    <input name="image" type="file" />
    <button type='button' id='submit_btn'>Submit</button>
</form>

<script>
$(document).on("click", "#submit_btn", function (e) {
    //Prevent Instant Click  
    e.preventDefault();
    // Create an FormData object 
    var formData = $("#form").submit(function (e) {
        return;
    });
    //formData[0] contain form data only 
    // You can directly make object via using form id but it require all ajax operation inside $("form").submit(<!-- Ajax Here   -->)
    var formData = new FormData(formData[0]);
    $.ajax({
        url: $('#form').attr('action'),
        type: 'POST',
        data: formData,
        success: function (response) {
            console.log(response);
        },
        contentType: false,
        processData: false,
        cache: false
    });
    return false;
});
</script> 
```

///// 其他页面.php

```
<?php
    print_r($_FILES);
?> 
```**

# ssl - 有人请求证书以便与我的 Web 服务通信

> ID：10899387
> 
> 赞同：0
> 
> 时间：2012-06-05T14:39:02.377
> 
> 标签：ssl, certificate

我有一个简单的网络服务。该服务器是具有有效 SSL 证书的常规、面向公众的 HTTPS 服务器。将使用该服务的合作伙伴告诉我“我需要为您获取证书”和“Oracle 要求我们安装在我们的证书钱包中。”。我到底应该寄给他们什么？我可以自己从网络浏览器访问网络服务，或者无需安装任何东西就可以访问网络服务。这是预言机的事情还是特定于他们访问服务的方法的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T15:00:00.527

他们有点傻；他们可以自己获取信息并与公共 CA 进行核对，假设您是这样设置的；他们可能只是没有检查此信息是否可验证。（如果它*没有*由公共 CA 签名，他们会问是对的，因为无法确定您没有被欺骗。）不过，通过其他渠道提供信息并没有什么害处也。

他们想要的是用于为 HTTPS 建立服务器身份的密钥对的公共部分（而不是私有部分！）。把它分发出去就好了；您也可以在当地报纸上打印一份副本，这完全不会降低您的安全性。您很有可能在设置服务器时仍然获得信息；它是证书颁发机构返回给您的信息（通常在 PEM 文件中）。如果没有，您可以使用以下命令从服务器的密钥对中提取信息`keytool`：

```
keytool -exportcert -rfc -file publickey.pem -keystore path/to/keystore -alias theAlias 
```

还有许多其他[选项`keytool`](http://docs.oracle.com/javase/6/docs/technotes/tools/solaris/keytool.html)（例如，对于不同格式的密钥库），您可能需要尝试获得正确的设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T14:43:21.567

您没有特别提到现有的身份验证机制。我的猜测是，他们希望使用证书与请求一起传递给服务来验证他们的请求。Oracle 又是一个广义的术语，不确定这是一个特定的系统还是 ERP。无论哪种方式，他们似乎都希望您向他们颁发一个可以在调用您的 Web 服务时使用的证书。

如果您使用带有基本身份验证的简单服务，那么您必须将其传达给他们。如果它没有身份验证，那将是完全不同的响应。在最坏的情况下，您可能必须更新您的服务以支持基于证书的身份验证，在这种情况下......玩得开心。

# android - 确切地说，“断管”异常对 Socket 意味着什么？

> ID：10899391
> 
> 赞同：32
> 
> 时间：2012-06-05T14:39:15.673
> 
> 标签：android, networking, network-programming

我有一个与 PC 上的程序对话的 android 应用程序。我正在使用 Android (Java) Socket 类。如果我下次从 Android 发送内容时停止并重新启动 PC 应用程序，我会收到 IO 异常“Broken Pipe”。我的问题与此无关。这是问题：

*如果我查询 Socket 的isClosed()*方法得到了损坏的管道异常，它返回 false（即，它没有关闭），如果我查询 Socket 的*isConnected()*方法，它返回 true，即它已连接。有人可以向我解释这些结果吗？提前致谢！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-05T14:49:02.300

断管的意思几乎就是你在这里所说的。您这边的程序仍然打开它的套接字，但是另一边的套接字不再通信，并且没有经过标准的“关闭管道”程序。如果对方突然断电、物理线路被切断或其他情况，就会发生这种情况。因此，套接字在本地注册为打开和连接 - 它只是连接到损坏的管道。您是否希望在这里获得一些实用的建议，或者只是理论？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T00:33:37.787

`Socket.isClosed()`并且`Socket.isConnected()`只告诉你*你*对*套接字做了什么。*他们不会告诉您有关*连接状态的任何信息。*你还没有关闭套接字：它是打开的。您连接了套接字：它已连接。

当您进行任何`IOException`操作`Socket`时，`SocketTimeoutException`您必须关闭套接字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-08-12T21:27:46.527

当我尝试将数据从我的 Android 应用程序发送到连接到 Arduino 的蓝牙模块时，我遇到了同样的问题，我花了很长时间才用新的蓝牙模块更换了蓝牙模块，一切都开始正常工作，所以它是也值得检查你的硬件，特别是如果你对你的代码有信心并且没有解决方案。

# node.js - 我可以在没有互联网访问的情况下安装 express 吗？

> ID：10899392
> 
> 赞同：1
> 
> 时间：2012-06-05T14:39:16.533
> 
> 标签：node.js, module

我的工作机器上安装了 node.js，我想尝试使用 express，但似乎控制台阻止了 Internet 访问（我正在使用 Windows BTW）。

有没有办法下载 express 包并使用 npm 命令从本地文件夹而不是互联网安装它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T14:48:44.957

正如[文档](http://npmjs.org/doc/install.html)所说，你可以。你需要`npm install <tarball file>`：

> 安装位于文件系统上的软件包。注意：如果您只想将 dev 目录链接到您的 npm 根目录，您可以使用`npm link`.
> 
> 例子：
> 
> `npm install ./package.tgz`

# php - 卷曲机器人不工作写

> ID：10899393
> 
> 赞同：0
> 
> 时间：2012-06-05T14:39:21.357
> 
> 标签：php, curl

我想编写一个脚本来解析我大学的时间表并将其保存到磁盘。我使用 curl 来做到这一点。[这里](http://cist.kture.kharkov.ua/ias/app/tt/f?p=778:201:641001457784406%3a%3a:201%3aP201_FIRST_DATE,P201_LAST_DATE,P201_GROUP,P201_POTOK:01.02.2012,30.07.2012,2423461,0%3a)是时间表的主要链接，如果在浏览器中打开它，我可以看到内容，但如果我尝试在 curl 中打开它，我会失败 =(

这是php脚本的源代码：

```
<?

    $url = "http://cist.kture.kharkov.ua/ias/app/tt/f?p=778:201:128623920522090:::201:P201_FIRST_DATE,P201_LAST_DATE,P201_GROUP,P201_POTOK:01.02.2012,30.07.2012,2423461,0:";

    $ch = curl_init();

    $cookieFile = tempnam ( dirname(__FILE__) . "/cookies/", 'cookie-' );

    curl_setopt($ch, CURLOPT_COOKIEJAR, $cookieFile );
    curl_setopt($ch, CURLOPT_COOKIEFILE, $cookieFile );

    curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE );

    $ua = "Mozilla/5.0 (X11; Linux i686) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.26 Safari/535.11";

    //$headers = array('HOST: cist.kture.kharkov.ua','CONNECTION: keep-alive','CACHE_CONTROL: max-age=0','USER_AGENT: Mozilla/5.0 (X11; Linux i686) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.26 Safari/535.11','ACCEPT: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8','REFERER: http://google.com.ua',  'ACCEPT_ENCODING: gzip,deflate,sdch','ACCEPT_LANGUAGE: ru-RU,ru;q=0.8,en-US;q=0.6,en;q=0.4','ACCEPT_CHARSET: windows-1251,utf-8;q=0.7,*;q=0.3');
    //curl_setopt($ch, CURLOPT_AUTOREFERER, 1);
    //curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);

    //curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
    curl_setopt($ch, CURLOPT_USERAGENT, $ua);

    curl_setopt($ch, CURLOPT_URL, $url);

    $data = curl_exec($ch);
    $info = curl_getinfo($ch);

    $counter = 0;
    while($info['redirect_url']!= "")
    {
        echo "url => ". $url."<br />\n";
        echo "redirect => ". $info['redirect_url']."<br /><br />\n";

        curl_setopt($ch, CURLOPT_REFERER, $url);
        curl_setopt($ch, CURLOPT_URL, $info['redirect_url']);
        $url = $info['redirect_url'];
        $data = curl_exec($ch);

        $info = curl_getinfo($ch);

        $counter++;

        if($counter>100)
            break;
    }

        foreach ($info as $key => $value) {
            echo $key . " -> ".$value."<br />\n";
        }           
    $html = htmlspecialchars($data);
    echo "<pre>$html</pre>";

    echo $cont;?> 
```

结果我有一个空页面:(请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:43:25.030

您提供的链接具有 302 重定向，因此您不会获得时间表，您必须遵循重定向才能获得它。

更具体地说，查看“位置”标题，并使用该位置。

# javascript - 遍历一个常见的 javascript 集合？

> ID：10899397
> 
> 赞同：0
> 
> 时间：2012-06-05T14:39:43.907
> 
> 标签：javascript, jquery, collections

所以我有一个通用的 javascript 集合，形式如下：

```
function populateCollection(){
    var Collection = new Array();
    Collection['A'] = 'Awesome';
    Collection['B'] = 'Better';
    Collection['C'] = 'Cool';
    return Collection;
} 
```

在一个文件中（假设它称为 CommonLib.js）。

现在说我想将此文件保留为一个公共库，以便由几个不同的 JS 文档访问（假设该库非常大）。

从名为 jsDoc1.js 的文档中迭代此集合的最佳方法是什么？

我试了一下：

```
<!DOCTYPE html>
<html lang="en">
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script>
<script>
function dropdown() { 
    for(var i in languageCollection){
        alert(i);
    }
}
<script>
<body>
<input type="text" name="example" id="color" onclick="dropdown()">
</body> 
```

但是我不断收到 languageCollection not defined 错误。我对 jscript 和 jquery 很陌生……对我有什么建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T14:46:31.867

您没有将文件包含在您的收藏中。插入以下语句：

```
 <script src="/path/to/CommonLib.js"></script> 
```

此外，您只定义了一个函数，该函数返回您的集合并且没有全局对象。所以你首先必须调用那个函数，例如，

```
var myCol = populateCollection(); 
```

然后你可以像下面这样访问它：

```
for ( var i in myCol ) {
  if( myCol.hasOwnProperty( i ) {
    // do your stuff
    alert( i );
  }
} 
```

或者，您可以更改您的函数以使用全局变量，该变量对每个范围都是可见的。

```
function populateCollection(){
    window.myNamespace = window.myNamespace  || {};
    window.myNamespace.Collection = {};
    window.myNamespace.Collection['A'] = 'Awesome';
    window.myNamespace.Collection['B'] = 'Better';
    window.myNamespace.Collection['C'] = 'Cool';
} 
```

* * *

顺便说一句，您正在使用数组，就好像它是一个对象一样。如果没有其他方面可以证明这一点，请将您的功能更改为以下内容：

```
function populateCollection(){
    return {
      'A': 'Awesome',
      'B': 'Better';
      'C': 'Cool'
    };
} 
```

# xcode - 区分 Apple 的 Mac App Store 证书

> ID：10899402
> 
> 赞同：1
> 
> 时间：2012-06-05T14:39:55.833
> 
> 标签：xcode, certificate, code-signing, mac-app-store

有人可以向我解释一下 Apple Developer 页面中我的个人资料中显示的这些证书类型之间的区别吗？

```
Developer ID Application
Mac Installer
Mac App
Mac Development 
```

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T19:09:52.533

“开发者 ID”证书用于对在 Mac App Store 之外（即来自您的网站）分发的 Mac 应用程序进行代码签名。它在导出应用程序的存档版本以进行分发时使用。

“Mac Installer”和“Mac App”证书用于对您的 Mac 应用程序进行代码签名，以便通过 Mac App Store 分发。

“Mac 开发”证书用于在针对 Mac App Store 的应用程序的开发阶段对您的 Mac 应用程序进行代码签名。

# eclipse - Eclipse Indigo 和 Tomcat 5.5 问题

> ID：10899405
> 
> 赞同：1
> 
> 时间：2012-06-05T14:40:23.260
> 
> 标签：eclipse, tomcat, eclipse-indigo, tomcat5.5

我已将使用 Tomcat 5.5 的 Eclipse Helios 升级到 Eclipse Indigo。现在每次我修改项目中的任何文件（JSP、JS）时，Tomcat 都会重新发布更改，重新部署完整的应用程序（这在以前没有发生过，JSP 更改立即可用，无需重新发布）。

重新发布时，我每次都会收到发布错误

无法删除 X:/work/ws-trunk/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/myApp/WEB-INF/lib。可能被另一个进程锁定。

# scala - 为什么 foreach 使用 toUpperCase 的字符串类型列表失败？

> ID：10899407
> 
> 赞同：2
> 
> 时间：2012-06-05T14:40:37.250
> 
> 标签：scala, foreach

从*Programming in Scala 中*，我们知道这`foreach`是一个高阶函数，它接受一个带有返回类型的过程`Unit`。所以我认为下面的切片可以工作：

```
val abcde = List("a","b","c","d","e")
abcde.foreach(print _.toUpperCase) 
```

但是它告诉我：

```
1: error: ')' expected but '.' found.
  abcde foreach (println _.toUpperCase)
                          ^ 
```

但是下面这两个都很好用：

```
println("abcde".toUpperCase)
abcde.foreach(print _) 
```

那么有什么区别呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T22:18:50.293

这两个`_`以不同的方式使用：

```
abcde.foreach(print _.toUpperCase)
abcde.foreach(print _) 
```

在第一种情况下，您有一个匿名函数，其中`_`表示参数的占位符。

在第二种情况下，`_`意味着您想要该方法的函数值`print`（一个*eta 扩展*）。

所以比较两者是无关紧要的。

更重要的是：

```
scala> print "abcde".toUpperCase
<console>:1: error: ';' expected but string literal found.
       print "abcde".toUpperCase
             ^ 
```

如您所见，这不起作用，因此替换`"abcde"`为`_`也不起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T14:44:37.200

你不能`_`在这种情况下使用，因为

```
abcde.foreach(print _.toUpperCase) 
```

不能解释为

```
abcde.foreach((print _).toUpperCase)
              ^       ^ 
```

（因为`print`返回`Unit`）并且它不能被解释为

```
abcde.foreach(print (_.toUpperCase))
                    ^             ^ 
```

因为`print`没有从字符串到字符串的函数。

你必须做的时间稍长一些

```
abcde.foreach(s => print(s.toUpperCase)) 
```

效果很好。

> ***[...]但是下面这两个都很好用：[...]***

两个都

```
println("abcde".toUpperCase) 
```

和

```
abcde.foreach(print _) 
```

是非常好的和标准的编写方式。不同之处在于，`_`不能在您的第一次尝试说明的参数中使用它。

# asp.net - WebImage和大内存消耗

> ID：10899411
> 
> 赞同：3
> 
> 时间：2012-06-05T14:40:56.287
> 
> 标签：asp.net, asp.net-mvc-3, memory-consumption, webimage

我们在 ASP.NET MVC3 中有图像上传的场景。

*   控制器

    ```
    public ActionResult Upload(IEnumerable<HttpPostedFileBase> images, SomeViewModel model)
    {
      foreach(var i in images)
      {
        ...

        byte[] fileBytes = i.InputStream.GetBytesArray();

        byte[] image = _imageManager.Resize(fileBytes, MaxImageWidth, MaxImageHeight, true); 

        ...
      }
    } 
    ```

*   图像管理器

    ```
    public byte[] Resize(byte[] content, int width, int height, bool preserveAR = true)
    {
      if (content == null)
        return null;

      WebImage wi = new WebImage(content);

      wi = wi.Resize(width, height, preserveAspectRatio);

      return wi.GetBytes();
    } 
    ```

所以我们从客户端接收图像作为 HttpPostedFileBase。我们将 byte[] fileBytes 传递给 imageManager 的 Resize 方法。图像管理器正在创建新的 WebImage 实例，然后调整图像大小并再次将其转换为 byte[]。

调试此代码时，当我通过 wi.GetBytes() 行时，我的内存使用量急剧增加（至少 500mb）。我正在上传 10mb 的图片。上传较小尺寸的照片（~1.5mb）时，内存消耗是正常的。

这可能是什么原因，可以通过某种方式解决吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T23:10:11.767

在引擎盖下，WebImage 用于`System.Drawing.Image.FromStream`获取原始图像流并将其转换为字节数组。我尝试使用 6.0MB JPG 并在其上调用该方法，我得到了一个包含 6.0MB 的流。如果我要一个 BMP，我会得到一个 172MB 字节的数组

我怀疑您正在上传压缩图像（例如 PNG / JPG），并且对 GetBytes 的调用导致图像的解压缩字节可用。当解压缩成原始形式时，图像实际上可能要大得多。您可以做的事情不多，无法从头到尾处理 Stream 对象，因此您永远不会一次将所有内容加载到内存中。

# mysql - 如何避免对从 MySQL 检索到的数据进行 HTML 转换

> ID：10899416
> 
> 赞同：1
> 
> 时间：2012-06-05T14:41:11.840
> 
> 标签：mysql, html, perl

我像这样在 MySQL 中存储数据-

```
5 fruits names are - 
Mango
Orange
Apple
Banana
Grapes 
```

我能够将数据存储在 MySQL 的新行中。但是在取回它（使用选择查询）时，它会以 HTML 形式显示在一行中。

如何避免这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T14:46:12.560

在 Perl 中使用它，它与[nl2br](http://php.net/nl2br)相同。

```
sub nl2br {
  my $t = shift or return;
  $t =~ s{([\r\n])}{<br />$1}g;
  return $t;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T14:43:12.667

HTML 不支持换行符。用于[`nl2br()`](http://php.net/nl2br)将纯文本转换为 HTML 标记，其中将包含“换行符”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T14:56:59.997

如果我是你，我会用昏迷存储它，当你显示时进行替换，如下所示：

```
mysql> create table fruits (fruit varchar(200));
Query OK, 0 rows affected (0.04 sec)

mysql> insert into fruits values ('banana, apple, orange, grapes');
Query OK, 1 row affected (0.03 sec)

mysql> select * from fruits;
+-------------------------------+
| fruit                         |
+-------------------------------+
| banana, apple, orange, grapes |
+-------------------------------+
1 row in set (0.00 sec)

mysql> select replace(fruit,',','<br />') from fruits;
+----------------------------------------------+
| replace(fruit,',','<br />')                  |
+----------------------------------------------+
| banana<br /> apple<br /> orange<br /> grapes |
+----------------------------------------------+
1 row in set (0.00 sec) 
```

并且您不必以您想要的方式显示列表，只需更改
您想要的任何标签的标签

或者如果你想要一个列表，你可以使用这个

```
mysql> select concat('<ol><li>',replace(fruit,',','</li><li>'),'</li></ol>') from fruits;
+-------------------------------------------------------------------------+
| concat('<ol><li>',replace(fruit,',','</li><li>'),'</li></ol>')          |
+-------------------------------------------------------------------------+
| <ol><li>banana</li><li> apple</li><li> orange</li><li> grapes</li></ol> |
+-------------------------------------------------------------------------+
1 row in set (0.00 sec) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T14:51:07.777

由于我对您的代码一无所知，我最好的猜测是您没有使用任何格式。如果您使用 php 或 scriptlet 来检索您的数据，您可以将所有数据放入可能是一个数组并以 html 格式在循环中打印该数组。您还可以使用 AJAX 并以您希望在 HTML 中显示的方式将其打印出来。如果您发布一些代码会很有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-05T14:44:13.033

在您的情况下，只需将所有替换`\n`为`<br />`.

# simulation - 如何模仿服务器（不损失算力）？

> ID：10899422
> 
> 赞同：0
> 
> 时间：2012-06-05T14:41:28.167
> 
> 标签：simulation

我有生产环境，它在一台服务器上运行。但我需要运行一个软件的 2 个实例，每个实例都在“另一个”服务器上。

是否可以在一台真实服务器上免费模仿更多服务器？不损失计算能力和网络流入/流出真实服务器？

编辑：换句话说：我想在一台机器上运行同一软件的两个实例。然后我需要使用一些函数将一些子实例从实例 1 传输到实例 2。但是这个函数只有在 instance1 位于 instance2 之外的另一台服务器上时才可以使用。所以我需要模仿在本地运行的两个实例之一在不同的服务器上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T14:46:16.590

我假设您使用的是 Windows，在这种情况下，您可以使用 Hyper-V 之类的 Hypervisor，但是如果您只购买了一个 Windows 许可证，您可以在生产能力中运行的内容可能相当有限。

如果您的意思是您需要运行的软件只有一个许可证，那么您通常也不允许虚拟化它，所以看起来答案是合法的，您将无法仅使用一个许可证做很多事情，但是我的假设可能都是错的，你的问题不够清楚。

# delphi - 表单中的消息“未找到工具 API”

> ID：10899427
> 
> 赞同：4
> 
> 时间：2012-06-05T14:41:42.533
> 
> 标签：delphi, delphi-2007, toolsapi

在一个包中，我有一个实现 ToolAPi *IOTAIDENotifier*接口的组件。该软件包可以设置、编译并显示在调色板上。该组件的一个方法被设计为在使用它的项目被编译（而不是执行）时做一些特定的事情......到目前为止一切正常。

当我在属于另一个项目的 TForm 上使用此组件时，问题稍后出现。当我尝试构建它时，我收到编译器消息**File not found: ToolsAPI.dcu**。

以下是该包的用途：

```
Uses
  {$IFDEF PACKAGESETUP} DesignIntf, DesignEditors,{$ENDIF}
  Classes, ToolsAPI; 
```

**PACKAGESETUP**仅在我编译 bpl 时定义

当我双击错误消息时，IDE 会打开文件，其中声明了对 ToolsAPI 的引用...我怎样才能摆脱这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T15:13:53.717

ToolsAPI 仅在设计时包中可用。它的存在是为了公开 IDE 以进行定制，因此仅在 IDE 下可用，即在设计时包中。您必须从桌面应用程序中删除对 ToolsAPI 的引用。

# java - 如何使用 BigDecimal 验证精度和规模？

> ID：10899429
> 
> 赞同：15
> 
> 时间：2012-06-05T14:41:48.670
> 
> 标签：java, bigdecimal

我正在尝试验证大小数的精度和比例。

我希望验证一个大小数不超过 10 的精度或 2 的小数位数。我尝试做一个 maxlength，这样该值就不会违反我的数据库长度限制，但也无法使其正常工作。有人可以指点我解决这个问题的方向吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-05T15:03:58.047

该类`BigDecimal`具有三种可能对此感兴趣的方法：

*   `precision()`，它返回未缩放值的位数（例如，对于数字 123.45，返回的精度为 5）
*   `scale()`, 正数时返回小数点分隔符后的位数 (`scale()`可以是负数, 在这种情况下, 数字的未缩放值乘以十的负数次方。例如，-3的小数位数表示未缩放的值乘以 1000），
*   `stripTrailingZeros()`，它返回`BigDecimal`从表示中删除所有尾随零的 a。

例如，要计算给定`BigDecimal`b 的精度和比例，我们可以这样写：

```
BigDecimal noZero = b.stripTrailingZeros();
int scale = noZero.scale();
int precision = noZero.precision();    
if (scale < 0) { // Adjust for negative scale
    precision -= scale;
    scale = 0;        
} 
```

# javascript - res://ieframe.dll/preview.js 中 IE 中的 Window.print() 错误

> ID：10899436
> 
> 赞同：3
> 
> 时间：2012-06-05T14:42:19.647
> 
> 标签：javascript, html, internet-explorer, window

`Onclick`我正在打电话给一个锚标签`window.print();`，我得到了打印弹出窗口。但是在单击打印时，我收到以下脚本错误。

```
An error occurred in the script on this page.
Line: 2115
Char: 1
Error: Your file waiting to be printed was deleted.
Code: 0
URL : res://ieframe.dll/preview.js 
```

*是否要继续页面上的脚本（是/否按钮）*

愿你点击是/否我没有得到打印或在 IE8 中我得到一个空白打印。

Firefox 打印正常。但是，在 IE9 中失败了。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-25T13:47:12.683

如果您在`window.close()`之后立即调用，也可能在 IE10 中出现此错误`window.print()`，尤其是当您的 DOM 很大时。我的猜测是 IE10 执行`window.print()`调用时页面还没有完成渲染。

因此，您可以通过以下方式解决此问题：

*   `window.close()`在页面上的悬停事件中调用。打印对话会窃取用户的焦点，因此在用户完成对话处理之前悬停事件不会触发。我们发现这是最好的解决方案。
*   根本不调用`window.close()`IE10 客户端
*   As`window.print()`没有回调，`window.close()`在任意延迟后调用。我不推荐这个，因为它不可靠
*   [用这个答案](https://stackoverflow.com/a/10026995/228770)去“核” ，它在打印之前将 html 加载到隐藏的 iFrame 中，回避调用的需要`window.close()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T15:12:32.840

关注这两篇 Microsoft 帮助文章：

*   [http://support.microsoft.com/kb/973479](http://support.microsoft.com/kb/973479)
*   [http://support.microsoft.com/kb/2652062](http://support.microsoft.com/kb/2652062)

至少它似乎是打印驱动程序的问题和/或安装在 IE 中的附加组件的问题。另一种解决方案是卸载 IE 9 并重新安装。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-08T21:45:56.280

我最终更换/升级了服务器端的打印机驱动程序，删除了桌面客户端上的打印机并通过方便的 UNC 路径（双 \，此处未显示）\server\printer“添加方法重新创建打印机。

# groovy - Groovy ASTNode 的源代码

> ID：10899439
> 
> 赞同：2
> 
> 时间：2012-06-05T14:42:49.100
> 
> 标签：groovy, abstract-syntax-tree

我实现了一些在编译时应用的 AST 转换，出于日志记录的目的，我想发出反映注入的 AST 节点的“源”代码。`toString()`/方法返回非常不可读的`getText()`结构，对于长表达式来说很快就会变得复杂。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T15:06:23.333

我能想到的最接近的是 AstNodeToScriptAdapter 可以在[这里找到](https://github.com/groovy/groovy-core/blob/master/subprojects/groovy-console/src/main/groovy/groovy/inspect/swingui/AstNodeToScriptAdapter.groovy)

# c# - ASP.NET 尝试在 Web 上创建包含总计和小计的报表

> ID：10899442
> 
> 赞同：0
> 
> 时间：2012-06-05T14:43:02.853
> 
> 标签：c#, asp.net, reporting

在 MS Access 中，我们有一个简单的报告：

```
Manufacture | Model | Wheels | Serial
Man1 | aaa | 4 | 111
Man1 | aaa | 4 | 112
Man1 | bbb |2 | 123
Total Models: 3  Total Wheels: 10
Man2 | asd| 8 | 1145
.......
And so on until the totals at the bottom:
Total models: 55   |Total Wheels: 245 
```

我想将其转换为在网络上工作。我在 gridview 上获得了数据，但无法获得小计或总计。有什么可以在列的属性中设置的吗？网格视图甚至是最好的选择，还是您会使用不同的控件？我在 Web Developer 2010 Express 中使用 c#，如果有影响，数据来自 SQL Server。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T14:48:58.650

出色地...

[http://tinyurl.com/7olot6v](http://tinyurl.com/7olot6v)

这是来自 MSDN 的示例：http: [//msdn.microsoft.com/en-us/library/ms972833.aspx](http://msdn.microsoft.com/en-us/library/ms972833.aspx)

它在 VB.NET 中，但转换这个想法应该不会太难。

# javascript - 浏览器是否支持 stopImmediatePropagation？

> ID：10899444
> 
> 赞同：6
> 
> 时间：2012-06-05T14:43:05.630
> 
> 标签：javascript, jquery

`stopPropagation()`缺少IE 支持，[需要解决方法](https://stackoverflow.com/a/387750/165673)，但我不知道是否同样适用`stopImmediatePropagation()`- 对所有浏览器都是安全的，还是需要自己的一套解决方法？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-08-06T11:05:10.053

我也想知道浏览器是否支持 JavaScript `event.stopImmediatePropagation`，所以我决定通过检查以下方法是否存在来测试它：

```
Event.prototype.stopImmediatePropagation 
```

以下桌面浏览器支持它：

*   互联网浏览器 9+
*   火狐 10+
*   铬 6+
*   Safari 5.0+
*   Opera 15+（Presto 不支持`stopImmediatePropagation`）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T14:50:03.857

另一个答案中提到的 stopPropagation 与浏览器上本机可用的`event`object 方法有关，而`stopPropagation()`jQuery 的方法在所有浏览器中都可以正常工作（因为它是同一任务的包装器，考虑到此方法所在的浏览器功能正在运行）

# asp.net - 警报会话结束，服务器发送事件

> ID：10899445
> 
> 赞同：0
> 
> 时间：2012-06-05T14:43:11.480
> 
> 标签：asp.net, html, session, signalr, server-sent-events

我想在 ASP.NET 会话结束时向客户端发送一条消息。我不想使用计时器，所以我尝试使用“服务器发送事件”从 global.asax 中的 session_end 事件调用客户端。有没有办法从 global.asax 调用特定客户端？我尝试为此提议使用“SignalR”库，但在从 Global.asax 调用特定客户端时遇到问题（我已设法调用一组客户端但不是特定客户端）此提议的最佳实践是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:55:59.520

我不确定这是否是您需要的，但这有[帮助](http://community.devexpress.com/blogs/aspnet/archive/2011/06/15/asp-net-how-to-show-a-popup-warning-before-session-timeout.aspx)吗？

（当然这个不需要使用DevExpress，可以实现自己的弹窗）

# javascript - JavaScript 中的“#”符号是什么意思？

> ID：10899448
> 
> 赞同：21
> 
> 时间：2012-06-05T14:43:17.600
> 
> 标签：javascript

我是 Javascript 新手，我正在尝试理解一些代码。我不明白，也找不到有关该`#`标志的任何文档。

```
$(function () {
      $("#searchTerm").autocomplete({ 
```

$("#searchTerm") 是什么意思？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2019-05-18T03:12:27.610

现在 # 将/可能表示私有实例字段：[https ://tc39.github.io/proposal-class-fields/](https://tc39.github.io/proposal-class-fields/)

**2021 年更新：**

> 默认情况下，类字段是公共的，但可以使用哈希 # 前缀创建私有类成员。这些类特性的隐私封装由 JavaScript 本身强制执行。

```
class ClassWithPrivateField {
  #privateField;
}

class ClassWithPrivateMethod {
  #privateMethod() {
    return 'hello world';
  }
}

class ClassWithPrivateStaticField {
  static #PRIVATE_STATIC_FIELD;
}

class ClassWithPrivateStaticMethod {
  static #privateStaticMethod() {
    return 'hello world';
  }
} 
```

来源：[https ://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes/Private_class_fields](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes/Private_class_fields)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-06-05T14:44:30.050

在 JavaScript 中？没什么特别的。它只是字符串的一部分。

函数可能会用`$`它做点什么，但[很难说`$`函数是](http://en.wikipedia.org/wiki/Self-documenting)什么。

有很多库提供了`$`充当该库的厨房水槽的功能。它们包括[原型](http://www.prototypejs.org/)、[Mootools](http://mootools.net/)和[jQuery](http://jquery.com/)。这个看起来最像 jQuery，在这种情况下，参数是一个包含[CSS 选择器](http://api.jquery.com/category/selectors/)的字符串，所以`#`表示[id 选择器](http://api.jquery.com/id-selector/)的开始。

这“选择具有给定 id 属性的单个元素”。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-06-05T14:44:36.867

那是 jQuery，井号 (#) 指的是元素的 ID。这是 jQuery 选择元素的一种方式。在您的示例中，它将选择 ID 为“searchTerm”的元素。

> 对于 id 选择器，jQuery 使用 JavaScript 函数 document.getElementById()，效率极高。当另一个选择器附加到 id 选择器时，例如 h2#pageTitle，jQuery 在将元素识别为匹配之前执行额外的检查。
> 
> 与往常一样，请记住，作为开发人员，您的时间通常是最宝贵的资源。不要专注于优化选择器速度，除非很明显需要提高性能。
> 
> 每个 id 值只能在文档中使用一次。如果为多个元素分配了相同的 ID，则使用该 ID 的查询将仅选择 DOM 中第一个匹配的元素。但是，不应依赖此行为；具有多个使用相同 ID 的元素的文档无效。
> 
> 如果 id 包含句点或冒号等字符，则必须使用反斜杠转义这些字符。

见：[http ://api.jquery.com/id-selector/](http://api.jquery.com/id-selector/)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-05T14:44:34.820

那只是一个字符串。`#`只是字符串的一部分。我假设`$`是jQuery。

这意味着，该字符串是一个 jQuery 选择器（或者更确切地说是一个 CSS 选择器）。意思是“`#`身份证”。它在 DOM 中搜索 ID 为“searchTerm”的元素。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-06-05T14:46:06.187

根据给定的信息，它很可能是 jQuery ID 选择器

[http://api.jquery.com/id-selector/](http://api.jquery.com/id-selector/)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-05T14:44:51.303

那是 HTML 中元素的 id 选择器（具体来说是在 DOM 中）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-02-16T17:37:06.393

这是一个元素 ID，例如：`...

当你需要用 JS 或 jQuery 访问这个 div 时，只需调用它。`$("#xyz")`做一些事情

上课`<div class="abc">....</div>`>>`$(".abc")`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-05T14:44:36.387

那不是普通的 Javascript！那是jQuery！

在 jQuery 中，您可以通过 CSS 样式选择器选择元素。在这种情况下，`#x`是一个 CSS 选择器，用于选择具有 id 的所有元素`x`。

# java - Hibernate 异常：没有 Hibernate Session 绑定到 Thread

> ID：10899453
> 
> 赞同：0
> 
> 时间：2012-06-05T14:43:40.393
> 
> 标签：java, hibernate, sessionfactory

当我尝试打开会话时，我正在尝试使用 Hibernate 我得到以下异常

```
org.springframework.web.util.NestedServletException: Request processing failed; nested 
exception is org.hibernate.HibernateException: No Hibernate Session bound to thread,        
and configuration does not allow creation of non-transactional one here
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:656)
    org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:560)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:368)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:97)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:100)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:78)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:35)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:187)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:79)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:169)
    org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
    org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    com.opensymphony.sitemesh.webapp.SiteMeshFilter.obtainContent(SiteMeshFilter.java:129)
    com.opensymphony.sitemesh.webapp.SiteMeshFilter.doFilter(SiteMeshFilter.java:77)

root cause

org.hibernate.HibernateException: No Hibernate Session bound to thread, and configuration does not allow creation of non-transactional one here
    org.springframework.orm.hibernate3.SpringSessionContext.currentSession(SpringSessionContext.java:63)
    org.hibernate.impl.SessionFactoryImpl.getCurrentSession(SessionFactoryImpl.java:622)
    com.dataart.masternoy.dao.imp.UserDAOImpl.existUserByLoginEmail(UserDAOImpl.java:35)
    com.dataart.masternoy.service.imp.UserServiceImpl.existUserByLoginMail(UserServiceImpl.java:47)
    com.dataart.masternoy.controller.FirstPageController.isValid(FirstPageController.java:46)
    com.dataart.masternoy.controller.FirstPageController.ConfirmRegister(FirstPageController.java:79)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    java.lang.reflect.Method.invoke(Method.java:597)
    org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176)
    org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:426)
    org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:414)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:790)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
    org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:560)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:368)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:97)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:100)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:78)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:35)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:187)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:79)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:169)
    org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
    org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    com.opensymphony.sitemesh.webapp.SiteMeshFilter.obtainContent(SiteMeshFilter.java:129)
    com.opensymphony.sitemesh.webapp.SiteMeshFilter.doFilter(SiteMeshFilter.java:77) 
```

这是我的配置

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:aop="http://www.springframework.org/schema/aop"        xmlns:mvc="http://www.springframework.org/schema/mvc" xmlns:tx="http://www.springframework.org/schema/tx" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context" xmlns:util="http://www.springframework.org/schema/util" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.1.xsd"        
    default-lazy-init="true">
    <import resource="applicationContext-services.xml" />
    <import resource="applicationContext-security.xml" />
    <import resource="applicationContext-email.xml" />
    <import resource="applicationContext-social.xml" />

    <mvc:resources mapping="/resources/**" location="/resources/" />

    <mvc:annotation-driven />
    <context:component-scan base-package="com.company.name." />
    <bean id="validator"
      class="org.springframework.validation.beanvalidation.LocalValidatorFactoryBean" />

    <bean id="viewResolver"
          class="org.springframework.web.servlet.view.InternalResourceViewResolver">
      <property name="prefix" value="/pages/" />
      <property name="suffix" value=".jsp" />
      <property name="contentType" value="text/html; charset=UTF-8" />
    </bean>

    <bean id="messageSource"
          class="org.springframework.context.support.ResourceBundleMessageSource">
      <property name="basename" value="messages" />
      <property name="useCodeAsDefaultMessage" value="true" />
    </bean>

    <bean id="jacksonMessageConverter"
          class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter">
    </bean>
    <bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter">
      <property name="messageConverters">
      <list>
        <ref bean="jacksonMessageConverter" />
      </list>
      </property>
    </bean>
</beans> 
```

调度程序 Servlet

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context" xmlns:mvc="http://www.springframework.org/schema/mvc" xmlns:util="http://www.springframework.org/schema/util"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.0.xsd">

    <mvc:annotation-driven />
    <context:component-scan base-package="com.company.name" />
    <mvc:resources mapping="/resources/**" location="/resources/" />
    <!-- 
     <mvc:view-controller path="/error/" view-name="errors/error" /> 
     <mvc:view-controller path="/403/" view-name="errors/403" /> 
     <mvc:view-controller path="/404/" view-name="errors/404" /> 
     <mvc:view-controller path="/405/" view-name="errors/405" /> 
    -->
</beans> 
```

服务

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:tx="http://www.springframework.org/schema/tx" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd"
    default-lazy-init="true">

    <!-- <tx:annotation-driven transaction-manager="txManager" /> -->
    <tx:annotation-driven transaction-manager="transactionManager" />
    <bean id="transactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager">
      <property name="sessionFactory" ref="sessionFactory" />
    </bean> 
    <bean id="configProperties" class="com.dataart.masternoy.utils.PropertiesUtil">
      <property name="ignoreUnresolvablePlaceholders" value="true" />
      <property name="locations">
        <list>
          <value>classpath:/config.properties</value>
          <value>classpath:/jdbc.properties</value>
        </list>
      </property>
    </bean>

    <bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
      <property name="driverClassName" value="com.mysql.jdbc.Driver" />
      <property name="url" value="jdbc:mysql://localhost:3306/shop" />
      <property name="username" value="root" />
      <property name="password" value="root" />
    </bean>
    <bean id="dataSourceNew"
        class="org.springframework.jdbc.datasource.DriverManagerDataSource">

        <!-- <property name="driverClassName" value="org.hsqldb.jdbcDriver" /> -->
        <property name="url" value="jdbc:mysql://localhost:3306/shop" />
        <property name="username" value="root" />
        <property name="password" value="root" />

    </bean>
    <bean class="org.springframework.jdbc.core.JdbcTemplate" id="jdbcTemplate">
        <constructor-arg ref="dataSource" />
    </bean>

    <bean id="txManager"
        class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
        <property name="dataSource" ref="dataSource" />
    </bean>
    <bean id="sessionFactory"
          class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean"
          lazy-init="true">
      <property name="dataSource" ref="dataSourceNew" />
      <property name="packagesToScan" value="com.company.name" />
      <property name="configLocation">
        <value>classpath:hibernateConfig.xml</value>
      </property>
      <property name="configurationClass">
        <value>org.hibernate.cfg.AnnotationConfiguration</value>
      </property>
      <property name="hibernateProperties">
        <props>
          <prop key="hibernate.connection.driver_class">org.hsqldb.jdbcDriver</prop>
          <prop key="hibernate.show_sql">true</prop>
          <prop key="hibernate.dialect">org.hibernate.dialect.MySQLInnoDBDialect</prop>
          <prop key="hibernate.connection.charSet">UTF-8</prop>
          <prop key="current_session_context_class">thread</prop>
          <prop key="format_sql">true</prop>
        </props>
      </property>
    </bean>
</beans> 
```

和 serviceImpl

```
@Service(value = "userService")
public class UserServiceImpl implements UserService {
@Autowired
@Qualifier("UserDAO")
UserDAO userDAO;

@Transactional
public void addNewUser(User user) {
    userDAO.insertNewUser(user);
}
@Transactional(readOnly = true)
public User getUserByLogin(String login) {
    return userDAO.selectUserByLogin(login);
}
@Transactional(readOnly = true)
public List<User> getUserList() {
    return userDAO.getUserList();
}
@Transactional
public void removeUserByLogin(String login) {
    userDAO.deleteUserByLogin(login);
}
@Transactional(readOnly = true)
public Boolean existUserByLoginMail(String login, String email) {
    return userDAO.existUserByLoginEmail(login, email);
}
@Transactional(readOnly = true)
public User getUserByID(Long ID) {
    return (User) userDAO.selectUserByID(ID);
}
@Transactional(readOnly = true)
public User getUserByLoginPass(String login, String pass) {
    return userDAO.getUserByLoginPass(login, pass);
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T15:04:52.900

这是我的猜测。在 Spring MVC 应用程序中，调度程序 servlet 使用的上下文是全局上下文的子级。因此，如果您在此子上下文中配置与在全局上下文中配置的相同的 bean，则子上下文 bean 将覆盖全局的。

这可能是您所做的，这意味着您获得对由子上下文实例化的 UserService 的引用，其中没有事务管理器，而不是获得对由全局上下文实例化的 UserService 的引用，其中定义了事务管理器.

确保只扫描 MVC 上下文中与 MVC 相关的 bean，方法是更改

```
<context:component-scan base-package="com.company.name" /> 
```

至

```
<context:component-scan base-package="com.company.name.web" /> 
```

或者

```
<context:component-scan base-package="com.company.name">
    <context:include-filter type="annotation" expression="org.springframework.stereotype.Controller"/>
</context:component-scan> 
```

例如。

# c# - ListView 在加载时返回异常

> ID：10899454
> 
> 赞同：0
> 
> 时间：2012-06-05T14:43:41.133
> 
> 标签：c#, xaml, exception

我有一个列表视图，我想从一个填充对象中格式化几个字段。最初，我创建了一个数据模板，它抛出了一个带有空白页的 InvalidOperationException，并且没有指示异常的原因。我在 CodeProject 上找到了一篇文章，现在我将数据模板嵌入到了 Setter 定义中：

```
<UserControl x:Class="Servpro.Framework.ViewerModule.Views.MenuView"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         d:DesignHeight="580" d:DesignWidth="210">
<UserControl.Resources>
    <Style TargetType="ListView">
        <Setter Property="ItemTemplate">
            <Setter.Value>
                <DataTemplate>
                    <StackPanel Orientation="Vertical">
                        <TextBlock 
                            Background="Transparent"
                            Foreground="Black" 
                            FontSize="12" 
                            Text="{Binding Path=CurrentEvent.EventTypeName, Mode=OneWay}" />
                        <TextBlock 
                            Background="Transparent"
                            Foreground="Black" 
                            FontSize="12" 
                            Text="{Binding Path=CurrentEvent.EventMessage, Mode=OneWay}" />
                        <StackPanel Orientation="Horizontal">
                            <TextBlock 
                                Background="Transparent" 
                                Foreground="Black" 
                                FontSize="8" 
                                Text="{Binding Path=CurrentEvent.EventLoggedOn, Mode=OneWay}"
                                Margin="0,0,10,0" />
                            <TextBlock
                                Background="Transparent" 
                                Foreground="Black" 
                                FontSize="8"
                                Text="{Binding Path=CurrentEvent.Program, Mode=OneWay}" />
                            <TextBlock 
                                Background="Transparent" 
                                Foreground="Black" 
                                FontSize="8"
                                Text=":" />
                            <TextBlock 
                                Background="Transparent" 
                                Foreground="Black" 
                                FontSize="8" 
                                Text="{Binding Path=CurrentEvent.Method, Mode=OneWay}" />
                        </StackPanel>
                    </StackPanel>
                </DataTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</UserControl.Resources>
<Grid Margin="4">
    <ListView 
        ItemsSource="{Binding Path=EventList, Mode=OneWay}" 
        Height="568" VerticalAlignment="Top" 
        Width="201" HorizontalAlignment="Left" 
        Margin="4" >
        <Border CornerRadius="11" />
        <ListView.BorderBrush >
            <SolidColorBrush Color="#99FFFFFF" Opacity="0" />
        </ListView.BorderBrush>
        <ListView.Background>
            <SolidColorBrush Color="#99FFFFFF" Opacity="0"/>
        </ListView.Background>
    </ListView>
</Grid> 
```

通过定义 ASIS，我现在得到一个运行时异常，它最终指向 XAML。但我仍然不明白为什么我得到它。例外：

'向'System.Windows.Controls.ItemCollection'类型的集合添加值引发了异常。' 行号“55”和行位置“13”。

它有内部异常：

{“使用 ItemsSource 时操作无效。请改用 ItemsControl.ItemsSource 访问和修改元素。”}

我显然在使用 ItemsSource 那么为什么会出现此异常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T17:38:02.837

事实证明，XAML 主线中边框和背景画笔的设置是问题所在。我删除了它们并在我的 DataTemplate 中使用 Setter.Property，应用程序现在运行。

所以对于未来的设计：当使用数据模板定义 ListView 的外观时，保持数据模板的样式很重要。我的最终页面设计最终与此大不相同，因为我在[此博客之后添加了一些格式](http://codingcontext.wordpress.com/2008/09/28/changing-the-data-template-for-the-currently-selected-item/)

# java - 用于显示时间表/日历/议程的 JSF 组件

> ID：10899456
> 
> 赞同：0
> 
> 时间：2012-06-05T14:43:45.183
> 
> 标签：java, jsf, calendar, primefaces, timetable

是否有 JSF/PrimeFaces 组件来实现时间表/议程/日历？它应该显示一个包含一周中的几天和一天中的小时的表格。这意味着用户可以选择总共 168 个方格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T15:08:48.750

你可能想试试

[http://www.primefaces.org/showcase/ui/schedule.jsf](http://www.primefaces.org/showcase/ui/schedule.jsf)

您*也可以*查看 tomahawk 项目，它带有这样的组件。但是，您似乎已经在使用 primefaces 。. . 无论如何[http://myfaces.apache.org/tomahawk/download.html](http://myfaces.apache.org/tomahawk/download.html)

编辑：我曾经是 myfaces/tomahawk 用户（并使用了他们的日程安排，但回到 jsf 1.1 天 :)。有一天，我切换到作为 glassfish 项目和 primefaces 的一部分提供的 jsf (2.0) 实现。从那里我再也没有回头，但是ymmv。

# wpf - WPF CellEditing 问题 - 重新加载数据网格行

> ID：10899461
> 
> 赞同：0
> 
> 时间：2012-06-05T14:44:12.140
> 
> 标签：wpf, celleditingtemplate

我有数据网格和一个面板。当我单击任何行时，所有数据都应显示在该面板上。当我编辑单元格并在编辑后单击同一行的另一个单元格时，面板应立即更新。我的数据网格是通过项目源（数据表）绑定的，所以如果我对网格进行任何更改（添加/删除/编辑），我的项目源就会更新，并根据项目源面板更新。

为了实现单元格编辑，我使用以下代码并且它正在工作。

```
void DataGrid_CellEditEnding(object sender, DataGridCellEditEndingEventArgs e)
    {
        if (!isManualEditCommit)
        {
            isManualEditCommit = true;
            DataGrid grid = (DataGrid)sender;
            grid.CommitEdit(DataGridEditingUnit.Row, true);
            isManualEditCommit = false;           
        }
    } 
```

问题：唯一的问题是当这条线被调用（grid.CommitEdit）时，它基本上会再次加载所有行。如果数据表真的很大，那么加载所有行需要几秒钟的时间。如果我不提交网格，那么在我单击另一行后，我对数据网格的更改会出现在面板上。当我单击同一行的另一个单元格而不再次加载行时，我想实现它。

这是图片

![在此处输入图像描述](../Images/34656cb020e999eb9aea54e7bd247af6.png)

请帮忙

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T16:43:57.800

这是 DataGrid 的一个常见缺陷：提交逻辑。我找到的解决方案（它是布尔值，而不是数字）是制作我​​自己的自定义 DataGridColumn，并在 PropertyChanged 上设置我的绑定触发器，以便立即更新内容，而不仅仅是在提交时更新。当然这是一项小工作，但 DataGrid 标准列不允许您更改该提交逻辑。

# javascript - Jquery 发送到电话单击链接以填充键盘表单中的文本字段

> ID：10899463
> 
> 赞同：1
> 
> 时间：2012-06-05T14:44:16.190
> 
> 标签：javascript, jquery, phone-number, keypad

我似乎无法弄清楚这一点。

我有一个模态键盘，它将提交到一个 php 表单，该表单将发送一封电子邮件，其中包含有关网站的信息。

我希望人们能够单击键盘将值插入文本字段区域。类似于喜欢使用手机。

我的 HTML：

```
<script src="http://www.busetopizza.com/demo/phone.js" type="text/javascript"></script>

<!-- Send To Phone -->
<form action="phpmailer.php" method="post" name="theform">

<input type="hidden" name="redirect" value="message_success.php">

<div class="send-to-phone-wrapper">
    <div class="send-to-phone">

        <div class="phone-top">

        <input type="text" id="phone" name="10digit" class="phone-enter-number" placeholder="Mobile Number"></div>

        <div class="buttons-wrapper">
            <div class="phone-button"><a href="#?stockAlert=1" class="coupon_link"><p>1<br /><span></span></p></a></div>
            <div class="phone-button"><a href="#?stockAlert=2" class="coupon_link"><p>2<br /><span>ABC</span></p></a></div>
            <div class="phone-button"><a href="#"><p>3<br /><span>DEF</span></p></a></div>
            <div class="phone-button"><a href="#"><p>4<br /><span>GHI</span></p></a></div>
            <div class="phone-button"><a href="#"><p>5<br /><span>JKL</span></p></a></div>
            <div class="phone-button"><a href="#"><p>6<br /><span>MNO</span></p></a></div>
            <div class="phone-button"><a href="#"><p>7<br /><span>PQR</span></p></a></div>
            <div class="phone-button"><a href="#"><p>8<br /><span>STU</span></p></a></div>
            <div class="phone-button"><a href="#"><p>9<br /><span>VXZ</span></p></a></div>
            <div class="phone-button-fix"><div class="phone-star"></div></div>
            <div class="phone-button"><a href="#"><p>0<br /><span style="font-size:23px; font-weight:100;">+</span></p></a></div>
            <div class="phone-button-fix"><div class="phone-pound"></div></div>
        </div>

        <div class="choose-carrier-wrapper">

            <div class="choose-carrier">
            <select name="carrier" class="choose-carrier-selections">
                <option value="none" class="choose-styled"></option>
                <option value="att" class="choose-styled">AT&amp;T</option>
                <option value="alltel" class="choose-styled">Alltel</option>
                <option value="cingular" class="choose-styled">Cingular</option>
                <option value="nextel" class="choose-styled">Nextel</option>
                <option value="sprint" class="choose-styled">Sprint</option>
                <option value="suncom" class="choose-styled">SunCom</option>
                <option value="tmobile" class="choose-styled">T-mobile</option>
                <option value="voicestream" class="choose-styled">VoiceStream</option>
                <option value="verizon" class="choose-styled">Verizon</option>
            </select>          
            </div>

               <div class="phone-submit"><input type="submit" value="" name="submit" class="submit-phone"></div>

        </div>

    </div>
</div>
</form>
<!-- End Send To Phone --> 
```

我的 CSS：

```
/* Send To Phone
---------------------------------------------------------------------------------*/
.send-to-phone-wrapper {
    width:319px;
    margin:0 auto;

}
.send-to-phone {
    width:322px;
    padding:15px;
    background-color:#000;
    -moz-border-radius: 10px;
    -webkit-border-radius: 10px;
    border-radius: 10px;
    box-shadow: 0px 10px 30px #000;
   -webkit-box-shadow: 0px 10px 30px #000;
   -moz-box-shadow: 0px 10px 30px #000;

}
.phone-top {
}
.buttons-wrapper {
    width:321px;
    height:268px;
    background-color:#fff;
    border-right:1px solid #2d3136;
}
.phone-button {
    float:left;
    text-align:center;
    border-bottom:1px solid #000;
    border-left:1px solid #2d3136;
    border-right:1px solid #151b22;
    position:relative;    
}
.phone-button-fix {
    float:left;
    text-align:center;
    border-bottom:1px solid #000;
    border-left:1px solid #2d3136;
    border-right:1px solid #151b22;
    position:relative;    
    height:66px;
    width:105px;
    background:url(http://www.busetopizza.com/demo/sendtophone/bg-keypad.gif) repeat-x;    
}
.phone-button p {
    color:#FFF;
    font-size:30px;
    padding-top:14px;
    font-family:Arial, Helvetica, sans-serif;
    font-weight:bold;
    line-height:23px;
}
.phone-button p span {
    color:#878b90;
    font-size:14px;
    text-shadow:0px -1px 0px #000;
}

.phone-button a:link, .phone-button a:visited {
    text-decoration:none;
    display:block;
    height:66px;
    width:105px;
    background:url(http://www.busetopizza.com/demo/sendtophone/bg-keypad.gif) repeat-x;
}
.phone-button a:hover {
    background:url(http://www.busetopizza.com/demo/sendtophone/bg-keypad2.gif) repeat-x;
    text-decoration:none;
}
.phone-button a:active {
    background-image:none;
    background-color:#3559c3;
}
.phone-button a:hover span  {color:#9ac2fa;}
.phone-button a:active p  {text-shadow:0px 0px 5px #000;}

.phone-star {
    height:24px;
    width:25px;
    background:url(http://www.busetopizza.com/demo/sendtophone/phone-star.gif) no-repeat;
    position:absolute;
    top:15px;
    left:39px;
}
.phone-pound {
    height:24px;
    width:25px;
    background:url(http://www.busetopizza.com/demo/sendtophone/phone-pound.gif) no-repeat;
    position:absolute;
    top:15px;
    left:40px;
}
.phone-enter-number {
    border:none;
    text-align:center;
    font-size:35px;
    font-weight:bold;
    text-shadow:0px 2px 0px #fff;
    font-family:Arial, Helvetica, sans-serif;
    height:73px;
    width:322px;
    background:url(http://www.busetopizza.com/demo/sendtophone/bg-top.gif) repeat-x;    
}
.choose-carrier-wrapper {
    height:64px;
    position:relative;
    width:322px;
    background:url(http://www.busetopizza.com/demo/sendtophone/bg-choose.gif) repeat-x;    
}
.choose-carrier {
    width:215px;
    overflow:hidden;
}
.choose-carrier-selections {
    background:url(http://www.busetopizza.com/demo/sendtophone/phone-carrier.gif) repeat-x;
    border:none;
    color:#FFF;    
    font-family:Arial, Helvetica, sans-serif;
    position:absolute;
    top:0;
    left:0;
    width:230px;
    height:63px;
    padding-top:42px;
    padding-left:27px;
    cursor:pointer;
    -webkit-appearance: none;
     -moz-appearance: none;
     appearance: none;
     font-size:14px;
     font-weight:bold;
     background-color:#000;
     color:#fff;

}
.choose-styled {
}

.submit-phone {
    height:64px;
    width:107px;
    background:url(http://www.busetopizza.com/demo/sendtophone/send.gif) repeat-x;
    border:none;
    position:absolute;
    top:0;
    right:0;
    cursor:pointer;    

} 
```

我创建了一个 jfiddle [http://jsfiddle.net/muhupower/nkmXe/1/](http://jsfiddle.net/muhupower/nkmXe/1/)

我已经尝试过很多次随机在线脚本。我能够从链接中获取输入表单的值，但是所有脚本随后将表单替换为我点击的其他值。因此，如果我输入 516，我的最终结果是 6.. 我需要它来继续填充表单。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T15:33:08.507

这是将数字放入输入中的代码：

```
 var i = 0;
        var num = [];
        $(".buttons-wrapper a").click(function(e) {
            e.preventDefault();
            if($(this).attr("href") == "clear") {
                num = [];
                $("#phone").val(num);
                i=0;
            }
            else if($(this).attr("href") == "delete") {
                i--;
                var str = $("#phone").val();
                console.log(str);
                if(num.length == 3) {
                    str = str.substring(0, str.length-3).substring(1, str.length);
                }
                else if(num.length == 6) {
                    str = str.substring(0, str.length-2);
                }
                else {
                    str = str.substring(0, str.length-1);
                }
                $("#phone").val(str);
                num.splice(i, 1);
            }
            else {
                if(num.length <= 9) {
                    num[i] = $(this).attr("href");
                    if(num.length == 3) {
                        $("#phone").val("("+$("#phone").val()+num[i]+")-");
                    }
                    else if(num.length == 6) {
                        $("#phone").val($("#phone").val()+num[i]+"-");

                    }
                    else {
                        $("#phone").val($("#phone").val()+num[i]);
                    }
                    i++;
                }
            }
        }); 
```

还有一个演示它的小提琴：http: [//jsfiddle.net/nkmXe/11/](http://jsfiddle.net/nkmXe/11/)

# sql - SQL Server 2008 解析时触发错误

> ID：10899464
> 
> 赞同：0
> 
> 时间：2012-06-05T14:44:18.683
> 
> 标签：sql, sql-server, triggers

我只是在学习触发器如何工作的基础知识/它们的最佳用途是什么，我在网上找到了一个教程来了解它们的外观和感觉。下面的触发器没有运行，给出的错误是`incorrect syntax was encountered while parsing go`

```
set nocount on
create table source1(sou_id int identity, sou_desc varchar(10))
go
create trigger tr_source1_insert
on source1
for insert as print getdate()
go insert source1 (sou_desc) values ('test 1') 
```

有人可以解释这里发生了什么，我应该期待看到什么？

编辑：小东西被修复了，仍然看到同样的错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:57:46.127

试试这个

```
set nocount on
    create table source1(sou_id int identity, sou_desc varchar(10))
    go
    create trigger tr_source1_insert
    on source1
    for insert as 
    print getdate()
    go 
    insert source1 values ('test 1') 
```

'Go' 语句需要在单独的行上。

# jquery - 有没有办法在溢出的父边界之外显示子元素：隐藏？

> ID：10899468
> 
> 赞同：1
> 
> 时间：2012-06-05T14:44:23.250
> 
> 标签：jquery, css, jquery-mobile, overflow

我正在开发一个允许在 Jquery Mobile 中弹出面板的插件。

面板将如下所示：

```
<div data-role="panel" data-panel="popover" data-id="my_name">
    // JQM pages
</div> 
```

并在 JQM 页面的内容部分之后。

样品（越野车）在这里：[样品](http://www.stokkers.mobi/jqm/multiview/test/fix_pop.html)

![弹出窗口示例](../Images/6b8c584daa452b8b6957e2871f3850d5.png)

面板的行为类似于视口或页面容器。JQM 默认只使用**body**作为 pageContainer。我的插件还允许面板，因此您可以将弹出框集成到正常导航中。

**我的问题**：
我在弹出窗口中添加了三角形，但我需要保持面板*CSS overflow-x: hidden*从而隐藏三角形。如果我注释掉溢出：隐藏，三角形是可见的，但是当我更改页面时，面板会“溢出”，如下所示：

![三角形可见，但面板流血](../Images/22c929125b93cfcfb2bed617039ad83a.png)

由于内容部分确定滚动条，我尝试改组*溢出：隐藏*，也将其设置在弹出框内的页面上，但没有任何效果。我不想将三角形​​移到面板之外，所以：

**问题：**
有没有办法用 overflow:hidden 显示父元素之外的子元素，或者为什么设置 overflow-x:hidden 隐藏我的三角形，它位于顶部/底部（y 多于 x）？

只是寻找一些想法或其他解决方法。

感谢帮助！

**编辑：** 这是三角形 CSS：

```
.popover_triangle { 
    position: absolute;
    line-height: 0%; 
    width: 0px; border-top: 16px solid rgba(0,0,0,0); 
    border-left: 16px solid rgba(0,0,0,0); 
    border-right: 16px solid rgba(0,0,0,0); 
    border-bottom: 16px solid black;  
    }
.ui-triangle-top .popover_triangle { 
    top: -32px;
    }
.ui-triangle-bottom .popover_triangle { 
    bottom: -34px;
    } 
```

弹出框有：

```
.ui-popover { 
    position:  absolute; 
    z-index:1005 !important; 
    border: 3px solid black;  
    border-radius: 4px; 
    left: auto; 
    }
.popover1 { 
    margin-top: 3.25em; 
    right: 5em;  
    height:25em; 
    width: 15em; 
    top: 0;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T02:43:12.257

不，使用overflow-x: hidden，你不能让那个三角形以绝对定位从弹出窗口中伸出来......我已经在各种浏览器上试过了！

您需要做的是*在*弹出框内创建另一个 div，然后应用并溢出-y：滚动或自动到该 div。（我假设您可能指的是overflow-y 而不是overflow-x，因为滚动条是垂直的？）将正常的溢出留给您的popover 元素。要让 div 内部的 overflow-y: auto 正常工作，您需要给它一个高度，例如 height: 100%。（如果您无法指定像素数量并且 100% 不会为弹出框中的其他元素腾出空间，则还有其他方法可以解决此问题）

例如：

```
<div data-role="panel" data-panel="popover" data-id="my_name">
    // JQM pages
    <!-- insert extra DIV here that contains content and hidden overflow -->
</div> 
```

# python - Django“找不到标签为 XYZ 的应用程序”

> ID：10899472
> 
> 赞同：2
> 
> 时间：2012-06-05T14:44:34.973
> 
> 标签：python, django, django-apps

我已经解决了所有关于此的各种问题，但没有一个解决了我的问题。我正在使用 Python 2.7 的 Windows 7 家用计算机上使用最新版本的 django、virtualenv 开发 django 项目。该项目旨在在 Heroku 上运行，但它也不能在本地运行。

基本上，当尝试运行时`manage.py sqlall appname`，它总是返回以下错误树：

```
Traceback (most recent call last):
  File "manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "C:\Users\JJ\Documents\Coding Fun\craigslist\venv\lib\site-packages\djang
o\core\management\__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "C:\Users\JJ\Documents\Coding Fun\craigslist\venv\lib\site-packages\djang
o\core\management\__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "C:\Users\JJ\Documents\Coding Fun\craigslist\venv\lib\site-packages\djang
o\core\management\commands\test.py", line 49, in run_from_argv
    super(Command, self).run_from_argv(argv)
  File "C:\Users\JJ\Documents\Coding Fun\craigslist\venv\lib\site-packages\djang
o\core\management\base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "C:\Users\JJ\Documents\Coding Fun\craigslist\venv\lib\site-packages\djang
o\core\management\base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "C:\Users\JJ\Documents\Coding Fun\craigslist\venv\lib\site-packages\djang
o\core\management\commands\test.py", line 72, in handle
    failures = test_runner.run_tests(test_labels)
  File "C:\Users\JJ\Documents\Coding Fun\craigslist\venv\lib\site-packages\djang
o\test\simple.py", line 380, in run_tests
    suite = self.build_suite(test_labels, extra_tests)
  File "C:\Users\JJ\Documents\Coding Fun\craigslist\venv\lib\site-packages\djang
o\test\simple.py", line 263, in build_suite
    app = get_app(label)
  File "C:\Users\JJ\Documents\Coding Fun\craigslist\venv\lib\site-packages\djang
o\db\models\loading.py", line 152, in get_app
    raise ImproperlyConfigured("App with label %s could not be found" % app_labe
l)
django.core.exceptions.ImproperlyConfigured: App with label tryagain could not b
e found 
```

它甚至无法识别一个全新的、未受影响的应用程序。例如，如果我运行`manage.py startapp tryagain`然后添加`'tryagain'`到`INSTALLED_APPS`，在尝试类似`manage.py test tryagain`. 我的文件与普通文件的唯一`settings.py`不同之处在于，对于 Heroku，我添加了以下两行：

```
import dj_database_url
DATABASES = {'default': dj_database_url.config(default='postgres://localhost')} 
```

任何帮助将不胜感激。我在这里让自己发疯。

编辑：

首先，我尝试使用一个全新的应用程序启动一个全新的 Django 项目，但它仍然无法正常工作，即使一切都完全没有受到影响。

由于我无法弄清楚哪些设置是相关的，因此我`settings.py`为我的麻烦项目提供了下面的整个模块：

```
# Django settings for <problem> project.

DEBUG = True
TEMPLATE_DEBUG = DEBUG

ADMINS = (
    # ('Your Name', 'your_email@example.com'),
)

MANAGERS = ADMINS

##DATABASES = {
##    'default': {
##        'ENGINE': 'django.db.backends.', # Add 'postgresql_psycopg2', 'postgresql', 'mysql', 'sqlite3' or 'oracle'.
##        'NAME': '',                      # Or path to database file if using sqlite3.
##        'USER': '',                      # Not used with sqlite3.
##        'PASSWORD': '',                  # Not used with sqlite3.
##        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
##        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
##    }
##}

# Local time zone for this installation. Choices can be found here:
# http://en.wikipedia.org/wiki/List_of_tz_zones_by_name
# although not all choices may be available on all operating systems.
# On Unix systems, a value of None will cause Django to use the same
# timezone as the operating system.
# If running in a Windows environment this must be set to the same as your
# system time zone.
TIME_ZONE = 'America/Chicago'

# Language code for this installation. All choices can be found here:
# http://www.i18nguy.com/unicode/language-identifiers.html
LANGUAGE_CODE = 'en-us'

SITE_ID = 1

# If you set this to False, Django will make some optimizations so as not
# to load the internationalization machinery.
USE_I18N = True

# If you set this to False, Django will not format dates, numbers and
# calendars according to the current locale
USE_L10N = True

# Absolute filesystem path to the directory that will hold user-uploaded files.
# Example: "/home/media/media.lawrence.com/media/"
MEDIA_ROOT = ''

# URL that handles the media served from MEDIA_ROOT. Make sure to use a
# trailing slash.
# Examples: "http://media.lawrence.com/media/", "http://example.com/media/"
MEDIA_URL = ''

# Absolute path to the directory static files should be collected to.
# Don't put anything in this directory yourself; store your static files
# in apps' "static/" subdirectories and in STATICFILES_DIRS.
# Example: "/home/media/media.lawrence.com/static/"
STATIC_ROOT = ''

# URL prefix for static files.
# Example: "http://media.lawrence.com/static/"
STATIC_URL = '/static/'

# URL prefix for admin static files -- CSS, JavaScript and images.
# Make sure to use a trailing slash.
# Examples: "http://foo.com/static/admin/", "/static/admin/".
ADMIN_MEDIA_PREFIX = '/static/admin/'

# Additional locations of static files
STATICFILES_DIRS = (
    # Put strings here, like "/home/html/static" or "C:/www/django/static".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
)

# List of finder classes that know how to find static files in
# various locations.
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
#    'django.contrib.staticfiles.finders.DefaultStorageFinder',
)

# Make this unique, and don't share it with anybody.
SECRET_KEY = ''

# List of callables that know how to import templates from various sources.
TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',
#     'django.template.loaders.eggs.Loader',
)

MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
)

ROOT_URLCONF = 'craigslist.urls'

TEMPLATE_DIRS = (
    # Put strings here, like "/home/html/django_templates" or "C:/www/django/templates".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
)

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    #'kombu.transport.django',
    #'djcelery',
    '<problemappname>',
    # Uncomment the next line to enable the admin:
    # 'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    # 'django.contrib.admindocs',
)

BROKER_BACKEND = 'django'

# A sample logging configuration. The only tangible logging
# performed by this configuration is to send an email to
# the site admins on every HTTP 500 error.
# See http://docs.djangoproject.com/en/dev/topics/logging for
# more details on how to customize your logging configuration.
LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'handlers': {
        'mail_admins': {
            'level': 'ERROR',
            'class': 'django.utils.log.AdminEmailHandler'
        }
    },
    'loggers': {
        'django.request': {
            'handlers': ['mail_admins'],
            'level': 'ERROR',
            'propagate': True,
        },
    }
}

import dj_database_url
DATABASES = {'default': dj_database_url.config(default='postgres://localhost')}

# note that this becomes the following:
# DATABASES = {'default': {'ENGINE': 'django.db.backends.postgresql_psycopg2', 
#                           'NAME': '',
#                           'HOST': 'localhost',
#                           'USER': None,
#                           'PASSWORD': None,
#                           'PORT':  None } } 
```

**附加编辑：** 目录结构如下所示，括号中的注释。

```
 - craigslist (project)
     - craigslist
         - __init__.py
         - settings.py
         - urls.py
         - wsgi.py
     - venv (virtualenv)
         - Include (directory)
         - Lib (directory)
         - Scripts (directory)
     - webpage (app)
         - __init__.py
         - models.py
         - tests.py
         - views.py
     - __init__.py
     - listings.py (custom module, not touched yet)
     - manage.py
     - requirements.txt
     - settings.py
     - urls.py 
```

**第三次编辑：** 认为当我运行时可能会有所帮助，但会`manage.py syncdb`收到以下错误：

```
Traceback (most recent call last):
  File "manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "C:\Users\JJ\Documents\Coding Fun\craigslist\venv\lib\site-packages\djang
o\core\management\__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "C:\Users\JJ\Documents\Coding Fun\craigslist\venv\lib\site-packages\djang
o\core\management\__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "C:\Users\JJ\Documents\Coding Fun\craigslist\venv\lib\site-packages\djang
o\core\management\base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "C:\Users\JJ\Documents\Coding Fun\craigslist\venv\lib\site-packages\djang
o\core\management\base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "C:\Users\JJ\Documents\Coding Fun\craigslist\venv\lib\site-packages\djang
o\core\management\base.py", line 371, in handle
    return self.handle_noargs(**options)
  File "C:\Users\JJ\Documents\Coding Fun\craigslist\venv\lib\site-packages\djang
o\core\management\commands\syncdb.py", line 57, in handle_noargs
    cursor = connection.cursor()
  File "C:\Users\JJ\Documents\Coding Fun\craigslist\venv\lib\site-packages\djang
o\db\backends\dummy\base.py", line 15, in complain
    raise ImproperlyConfigured("settings.DATABASES is improperly configured. "
django.core.exceptions.ImproperlyConfigured: settings.DATABASES is improperly co
nfigured. Please supply the ENGINE value. Check settings documentation for more
details. 
```

**另一个编辑：** 根据要求，这是我的`models.py`.

```
# models.py

from django.db import models

# Create your models here.

class listing(models.Model):
    body = models.CharField(max_length=10000)
    title = models.CharField(max_length=400)
    url = models.URLField(primary_key = True)
    scraping_time = models.DateTimeField()
    phone = models.CharField(max_length=20)
    posting_time = models.DateTimeField()
    email = models.EmailField()
    # imglist as separate model

    def __str__(self):
        return self.title

class imagelist(models.Model):
    listing = models.ForeignKey(listing)
    img_url = models.URLField()

    def __str__(self):
        return self.img_url 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T15:45:14.237

经过一番头疼后，我才想通了。

`settings.py`由于某种原因，整个项目目录有两个s-一个`craigslist`在子目录`craigslist\craigslist`中，我正在编辑顶级`settings.py`，而我应该一直在编辑较低的。我不知道为什么会这样，但是在将所有代码从顶层复制到子层之后，突然`manage.py sqlall webpage`起作用了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-17T14:02:20.917

就我而言，我的问题是我修改了我的 DJANGO_SETTINGS_MODULE，但只在我的 gunicord 设置文件 (/webapps/run/gunicorn_start) 中更改了它。所以'python mange.py'仍然指的是一个旧的settings.pyc文件（'py'文件已经被删除，但'pyc'仍然存在......）。

完成以下操作后，一切正常：export DJANGO_SETTINGS_MODULE=...

# javascript - 如何使用 javascript 在电子邮件正文中添加 html？

> ID：10899476
> 
> 赞同：1
> 
> 时间：2012-06-05T14:44:40.133
> 
> 标签：javascript, html-email

我必须向用户发送确认电子邮件。单击链接时，我想打开他们的默认电子邮件客户端并将 HTML 添加到正文标记中。

```
var subject = Your transaction No: +': ' + $('#confirmationNumber').text()+ ' is confirmed';
var emailBody = $('#confirmation').html();
$(this).attr('href','mailto:'+userEmail+'&subject=' + subject +'&body='+ emailBody); 
```

它希望“emailBody”中的 HTML 作为 HTML 附加到正文中。但它向我显示了整个 HTML 标签。

**有没有办法可以在正文中附加 HTML？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T15:58:35.413

答案很简短，但很不幸：

**不。**

使用`mailto:`-links 时，只能指定文本，不能指定 HTML。即使用户的邮件客户端使用 HTML 编写邮件消息，您的正文文本也只会作为文本插入。

您无法从网页中对此进行任何操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T14:47:03.253

采用

```
var emailBody = $('#confirmation').text(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T14:52:50.280

首先，对您的代码进行一些修复：

```
var subject = 'Your transaction No: ' + $('#confirmationNumber').text() + ' is confirmed',
    emailBody = $('#confirmation').html();
$(this).attr('href', 'mailto:' + userEmail + '&subject=' + subject + '&body=' + encodeURI(emailBody)); 
```

*   使用单个`var`关键字并用逗号分隔变量
*   `subject`被严重连接

接下来，如果您想在链接中传递 html 代码，您必须对特殊字符进行编码，这样`encodeURI()`就可以了。

* * *

糟糕，编码的正文在电子邮件客户端中不被视为 html。我用谷歌搜索了一段时间，似乎你无法正确传递它，你不能发送消息而不是打开客户端吗？

# git - 如何使用git找到分支号

> ID：10899486
> 
> 赞同：0
> 
> 时间：2012-06-05T14:45:25.753
> 
> 标签：git, github

在 Git 中，有一个命令`git checkout ***`，我想知道如何获取要结帐的号码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T15:03:21.210

`git log`将向您显示存储库的提交历史记录，其中将包括每个提交的 SHA1 标识符，如下所示：

```
commit 7fd1a60b01f91b314f59955a4e4d4e80d8edf11d
Merge: 553c207 7629413
Author: The Octocat <octocat@nowhere.com>
Date:   Tue Mar 6 15:06:50 2012 -0800

    Merge pull request #6 from Spaceghost/patch-1

    New line at end of file.

commit 762941318ee16e59dabbacb1b4049eec22f0d303
Author: Johnneylee Jack Rollins <Johnneylee.rollins@gmail.com>
Date:   Tue Sep 13 21:42:41 2011 -0700

    New line at end of file. --Signed off by Spaceghost 
```

你可以像这样检查一个特定的提交：

```
git checkout 762941318ee16e59dabbacb1b4049eec22f0d303 
```

...但这通常不是您想要做的，因为这会使您处于“分离的 HEAD”状态，在这种状态下，您所做的任何新提交都无法从任何分支访问，这意味着它们最终将被垃圾回收机制。这是丢失数据的好方法。

通常更有意义的是基于此提交创建一个新分支：

```
git checkout -b mybranch 762941318ee16e59dabbacb1b4049eec22f0d303 
```

现在您在一个名为的新分支上`mybranch`，您所做的任何新提交都将按预期工作。您可以像这样切换回您的`master`分支：

```
git checkout master 
```

此外，sinelaw 对[Pro Git](http://git-scm.com/book)的建议非常好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T15:10:16.497

```
git describe
git describe --tags 
```

没有 --tags 参数，它只考虑非注释标签。添加 --tags 参数以考虑非注释标签

可以根据之前的标签给出相对修订号，例如，有一个标签 v2.0.0。您当前的提交是提交标记为 v2.0.0 后的 12 次提交。那么输出是 v2.0.0-12-g1234abc，其中 12 是相对修订号

# php - 在 localhost 上使用 facebook connect 访问网站

> ID：10899489
> 
> 赞同：1
> 
> 时间：2012-06-05T14:45:56.033
> 
> 标签：php, facebook, codeigniter, facebook-graph-api, codeigniter-2

我正在为我的网站使用 Facebook 连接用户身份验证。我遵循了一些简单的教程，但我无法做到。因为我正在使用 codeigniter 并在 localhost 上对其进行测试。我需要知道 Facebook 是否允许重定向回 l​​ocalhost 或不是。如果确实如此，那么如何在本地机器上使用 Facebook 连接。如果您有任何解决方案，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T14:57:28.237

您必须将`localhost`您的应用程序设置放在它想知道登录 URL、网站等内容的所有地方——然后它应该可以正常工作。（除了那些实际上需要 Facebook 连接你的服务器的功能，比如取消 URL 授权——把纯重定向放在客户端，所以那里没有问题。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T00:25:31.013

我运行一个纯 PHP 项目（所以我不知道你是如何使用 CodeIgniter 做到这一点的），我让 Facebook Connect 工作在这 2 个中（我记得；如果不这样做，告诉我，我会修改 :)

*   编辑主机文件（c:\Windows\System32\drivers\etc\hosts 或 /etc/hosts）将 127.0.0.1 重定向到您使用的域名
*   将`<base href="..">`元设置为

    "http://{$_SERVER["HTTP_HOST"]}/"

然后使用您设置的域正确处理您传递给 Facebook Connect 的 URI。

正常测试，访问使用`http://<the-domain-name-set-in-hosts>`和测试。我想就是这样，它在这里工作。

# c# - 设置一个枚举等于另一个

> ID：10899491
> 
> 赞同：5
> 
> 时间：2012-06-05T14:46:05.813
> 
> 标签：c#, .net, enums

我在 2 个不同的对象中有 2 个枚举。我想将`enum`in 对象 #1 设置为等于`enum`in 对象 #2。

这是我的对象：

```
namespace MVC1 {

    public enum MyEnum {
        firstName,
        lastName
      }

   public class Obj1{
        public MyEnum enum1;
    }
   }

     namespace MVC2 {

    public enum MyEnum {
        firstName,
        lastName
      }

    public class Obj2{
        public MyEnum enum1;
      }
    } 
```

我想这样做，但这不会编译：

```
 MVC1.Obj1 obj1 = new MVC1.Obj1();
 MVC2.Obj2 obj2 = new MVC2.Obj2();
 obj1.enum1 = obj2.enum1; //I know this won't work. 
```

如何将 Obj1 中的枚举设置为 Obj2 中的枚举？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T14:47:59.290

假设您保持它们相同，您可以转换为/从 int：

```
obj1.enum1 = (MVC1.MyEnum)((int)obj2.enum1); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-05T14:49:47.947

枚举具有底层整数类型，默认为 int (System.Int32)，但您也可以使用“enum MyEnum : *type* ”显式指定它。

因为您在两个不同的命名空间中工作，所以 Enum 类型本质上是不同的，但是因为它们的基础类型是相同的，所以您可以将它们强制转换：

```
obj1.enum1 = (MVC1.MyEnum) obj2.enum1; 
```

注意：在 C# 中，即使没有任何参数，也必须使用括号进行函数调用。您应该将它们添加到构造函数调用中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-05T14:48:52.293

[最好的方法是使用Enum.IsDefined](http://msdn.microsoft.com/en-us/library/system.enum.isdefined.aspx)检查它是否在范围内：

```
int one = (int)obj2.enum1;
if (Enum.IsDefined(typeof(MVC1.MyEnum), one )) { 
  obj1.enum1 = (MVC1.MyEnum)one;
} 
```

* * *

```
 obj1.enum1 = (MVC1.MyEnum) Enum.Parse(typeof(MVC1.MyEnum),
                                 ((int)obj2.enum1).ToString()); 
```

或者

```
int one = (int)obj2.enum1;  
obj1.enum1 = (MVC1.MyEnum)one; 
```

# jquery - 动态 HTML 加 window.onload 在 IE 上不起作用

> ID：10899493
> 
> 赞同：0
> 
> 时间：2012-06-05T14:46:08.463
> 
> 标签：jquery, dom, dom-events, onload

我遇到了一些困难`window.onload`，就像这样：

我正在使用`jquery.magiclick.js`AJAX 调用填充具有一些 img 定义的 xml 并获取 div 的 innerHTML。调用此`magiclick`函数的函数驻留在 document.ready 中，如下所示：

```
$().ready(function () {
    loginBanner();
}); 
```

我`window.onload`在另一个js中定义了一个函数。这不是必需的，但我将包含代码以使自己更清楚。如果之前定义了一个函数，它只是调用该`window.onload`函数，然后将该函数作为参数传递。它是这样的：

```
 function addLoadEvent(func) {
      var oldonload = window.onload;
      if (typeof window.onload != 'function') {
        window.document.body.onload = function(){
            alert("onLoad-1");
            func();
        };
      } else {
            window.document.body.onload = function() {
                alert("onLoad-1");
                if (oldonload) {
                    oldonload();
                }
                func();
            };
      }
    } 
```

我在页面底部使用函数参数调用此函数。

我的期望是它会在文档准备好后获取 img 定义，并且由于定义包含 img 引用，它会获取图像数据然后执行我的`onload`函数。它适用于 Firefox，但不适用于 IE。

在 IE 中，它调用`magiclick`获取 xml 的函数，然后调用我的`onload`函数，但是在`onload`函数执行时，还没有获取 xml 文件。

我坚持这一点，任何帮助将不胜感激。

那么，有没有人知道我可能做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T15:42:04.623

AJAX 是异步的，无需完成即可触发窗口加载

在 ajax 成功回调中调用您的代码

以 jQuery AJAX 速记方法 $.get() 为例：

```
$.get( url, function(data){
  /* AJAX success, run  code here */
}) 
```

# tsql - T-SQL 插入 - 在表变量中选择非常慢

> ID：10899495
> 
> 赞同：8
> 
> 时间：2012-06-05T14:46:14.347
> 
> 标签：tsql, variables, select, insert

我有一个表变量，我正在使用“Insert Into - Select”语句在其中插入一些值。select是几个join的组合，单独执行时需要3秒。问题是整个代码需要 3-4 分钟才能执行。我想知道这有什么特别的原因。

这是我的表变量声明：

```
DECLARE @Result TABLE 
(
     ProductID NVARCHAR(25) PRIMARY KEY
    ,ProductName NVARCHAR(100)
    ,ProductCategoryID TINYINT
    ,ProductCategory  NVARCHAR(50)
    ,ProductSubCategoryID TINYINT
    ,ProductSubCategory  NVARCHAR(50)
    ,BrandID TINYINT
    ,Brand  NVARCHAR(50)
) 
```

我还有一个用一些数据初始化的表变量，这是它的结构：

```
DECLARE @TempTable TABLE
(
    ProtoSurveyID INT,
    ProductID NVARCHAR(25) PRIMARY KEY
) 
```

以下代码是我的问题陈述（插入-选择）：

```
INSERT INTO @Result (ProductID,ProductName,ProductCategoryID,ProductCategory,ProductSubCategoryID,ProductSubCategory,BrandID,Brand)
SELECT 
         Products.ProductID  AS ProductID
        ,Products.ProductName  AS ProductName
        ,ProductCategories.ProductCategoryID  AS ProductCategoryID
        ,ProductCategories.ProductCategory   AS ProductCategory
        ,ProductSubCategories.ProductSubCategoryID  AS ProductSubCategoryID
        ,ProductSubCategories.ProductSubCategory  AS ProductSubCategory
        ,Brands.BrandID AS BrandID
        ,Brands.Brand  AS Brand
FROM 
(
        SELECT     
               CAST(A.Col001 AS tinyint) AS ProductCategoryID
              ,CAST(A.Col002 AS tinyint) AS BrandID
              ,CAST(A.Col003 AS nvarchar(25)) AS ProductID
              ,CAST(A.Col004 AS nvarchar(100)) AS ProductName
              ,CAST(A.Col006 As tinyint) AS ProductSubCategoryID
              ,B.ProtoSurveyID
        FROM DataSetsMaterializedDataSqlvariant A 
        INNER JOIN @TempTable B 
        ON B.ProductID=CAST(A.Col003 AS nvarchar(25))
        WHERE DataSetsMaterializedInternalRowsetID = 3 
) Products      
INNER JOIN
(
         SELECT CAST(A.Col001 AS tinyint) AS BrandID
              , CAST(A.Col002 AS nvarchar(50)) AS Brand
         FROM DataSetsMaterializedDataSqlvariant A
         WHERE DataSetsMaterializedInternalRowsetID = 1
)Brands On Products.BrandID=Brands.BrandID
INNER JOIN
(
         SELECT CAST(A.Col001 AS tinyint) AS ProductCategoryID
                ,CAST(A.Col002 AS nvarchar(50)) AS ProductCategory
         FROM DataSetsMaterializedDataSqlvariant A
         WHERE DataSetsMaterializedInternalRowsetID = 2
) ProductCategories On Products.ProductCategoryID=ProductCategories.ProductCategoryID
INNER JOIN
(
         SELECT CAST(A.Col001 AS tinyint) AS ProductSubCategoryID
              , CAST(A.Col002 AS nvarchar(50)) AS ProductSubCategory
         FROM DataSetsMaterializedDataSqlvariant A
         WHERE DataSetsMaterializedInternalRowsetID = 11
) ProductSubCategories on Products.ProductSubCategoryID=ProductSubCategories.ProductSubCategoryID 
```

正如我之前所说，如果我评论插入行，查询需要 3 秒，否则 - 很长一段时间。

编辑：这是我的执行计划 - 大部分成本是表扫描，但为什么插入插入需要这么多时间，而没有它却很快？

![在此处输入图像描述](../Images/7b11c7f83a128b4d0881c3af1ec84bde.png)

以下是我的新内联函数：

```
CREATE FUNCTION [dbo].[fn_XxCustom_RetailAudits_GetProductsForFilter]
(
    @SecurityObjectUserID BIGINT
)
RETURNS TABLE
AS
RETURN

    WITH CTE(ProtoSurveyID,ProductID) AS
    (
        SELECT  DISTINCT  CAST(B.ProtoSurveyID AS INT)
                         ,CAST(A.Col002 AS NVARCHAR(25)) AS ProductID
        FROM DataSetsMaterializedDataSqlvariant A
        JOIN SurveyInstances B ON A.Col001=B.SurveyInstanceID AND CAST(B.ProtoSurveyID AS INT) IN (SELECT ProtoSurveyID FROM dbo.fn_Filter_GetProtoSurveysAllowedShort(@SecurityObjectUserID, 'CLIENTACCESS',NULL))
        WHERE DataSetsMaterializedInternalRowsetID = 5
    )
    SELECT 
             Products.ProductID  AS ProductID
            ,Products.ProductName  AS ProductName
            ,ProductCategories.ProductCategoryID  AS ProductCategoryID
            ,ProductCategories.ProductCategory   AS ProductCategory
            ,ProductSubCategories.ProductSubCategoryID  AS ProductSubCategoryID
            ,ProductSubCategories.ProductSubCategory  AS ProductSubCategory
            ,Brands.BrandID AS BrandID
            ,Brands.Brand  AS Brand
    FROM 
    (
            SELECT     
                   CAST(A.Col001 AS tinyint) AS ProductCategoryID
                  ,CAST(A.Col002 AS tinyint) AS BrandID
                  ,CAST(A.Col003 AS nvarchar(25)) AS ProductID
                  ,CAST(A.Col004 AS nvarchar(100)) AS ProductName
                  ,CAST(A.Col006 As tinyint) AS ProductSubCategoryID
                  ,B.ProtoSurveyID
            FROM CTE B
            INNER JOIN DataSetsMaterializedDataSqlvariant A 
            ON B.ProductID=CAST(A.Col003 AS nvarchar(25))
            WHERE DataSetsMaterializedInternalRowsetID = 3 
    ) Products      
    INNER JOIN
    (
             SELECT CAST(A.Col001 AS tinyint) AS BrandID
                   ,CAST(A.Col002 AS nvarchar(50)) AS Brand
             FROM DataSetsMaterializedDataSqlvariant A
             WHERE DataSetsMaterializedInternalRowsetID = 1
    )Brands On Products.BrandID=Brands.BrandID
    INNER JOIN
    (
             SELECT  CAST(A.Col001 AS tinyint) AS ProductCategoryID
                    ,CAST(A.Col002 AS nvarchar(50)) AS ProductCategory
             FROM DataSetsMaterializedDataSqlvariant A
             WHERE DataSetsMaterializedInternalRowsetID = 2
    ) ProductCategories On Products.ProductCategoryID=ProductCategories.ProductCategoryID
    INNER JOIN
    (
             SELECT  CAST(A.Col001 AS tinyint) AS ProductSubCategoryID
                    ,CAST(A.Col002 AS nvarchar(50)) AS ProductSubCategory
             FROM DataSetsMaterializedDataSqlvariant A
             WHERE DataSetsMaterializedInternalRowsetID = 11
    ) ProductSubCategories on Products.ProductSubCategoryID=ProductSubCategories.ProductSubCategoryID

GO 
```

我又慢慢地跑了。任何想法如何优化它？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-05T14:57:24.887

插入表变量的查询不能有并行计划。

尝试使用`#temp`表来允许`SELECT`并行化。

# class - LESS 中的动态类名

> ID：10899497
> 
> 赞同：10
> 
> 时间：2012-06-05T14:46:14.893
> 
> 标签：class, variables, dynamic, less, mixins

我有以下 LESS 代码工作

```
 @iterations: 940;
            @iterations: 940;
            @col:2.0833333333333333333333333333333%;
            // helper class, will never show up in resulting css
            // will be called as long the index is above 0
            .loopingClass (@index) when (@index > -20) {
                // create the actual css selector, example will result in
                // .myclass_30, .myclass_28, .... , .myclass_1
                (~".gs@{index}") {
                    // your resulting css
                    width: (@index/20+1)*@col;
                }
                // next iteration
                .loopingClass(@index - 60);
            }
            // end the loop when index is 0
            .loopingClass (-20) {}
            // "call" the loopingClass the first time with highest value
            .loopingClass (@iterations); 
```

它输出我们的网格系统，如下所示：

```
 .gs940 {
              width: 100%;
            }
            .gs880 {
              width: 93.75%;
            }
            .gs820 {
              width: 87.5%;
            }
            .gs760 {
              width: 81.25%;
            }
            .gs700 {
              width: 75%;
            } 
```

等等等等

现在我想做的是对类名进行一些数学运算以生成以下类

```
 .gs220-700
            .gs280-640
            .gs340-580
            .gs400-520
            .gs460-460
            .gs520-400
            .gs580-340
            .gs640-280
            .gs700-220 
```

等等等等

基本上这将是 .(@index) - (920px 减去 @index)

但我不知道这是否可能。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-01-03T21:23:14.250

这整个问题对我很有帮助。我只是想发布我的问题的解决方案，因为它的方式已经改变了`LESS v 1.4`。 [LESS 更新日志](http://lesscss.org/#changes)

而不是使用`~`符号，您只需写出您想要的名称部分以及围绕它的普通`@`和变量名称。`{}`所以：`#class@{variable}`。

例如，我使用同一种循环的解决方案变成了这样：

```
/*Total number of passport inserts*/
@numInserts: 5;
/*Total width of the passport foldouts*/
@passportWidth: 300px;
/*Change in passport insert width per iteration*/
@passportWidthDiff: (@passportWidth / @numInserts);
/*"Array" of colors to select from to apply to the id*/
@passportColors: 
blue orange green red yellow 
purple white teal violet indigo;

/*The faux loop the doesn't end up in the final css
@index is the counter
@numInserts is the total number of loops*/
.loopingClass (@index) when (@index <= @numInserts){
   /*This is the created ID with the index appended to it
   You can also do this with classes such as if 
   we had had ".insert@{index}"*/
   #insert@{index}{
      /*Here are our properties that get adjusted with the index*/
      width: (@passportWidth - (@passportWidthDiff * (@numInserts - @index)));
      height: 50px;
      background-color: extract(@passportColors, @index);
      z-index: (@numInserts - @index);
   }
   /*Here we increment our loop*/
   .loopingClass(@index + 1);
}
/*This calls the loop and starts it, I started from 1
since I didn't want to lead a className starting from 0,
But there is no real reason not to.  Just remember to
Change your conditional from "<=" to "<"*/
.loopingClass(1); 
```

并产生以下内容：

```
#insert1 {
  width: 60px;
  height: 50px;
  background-color: #0000ff;
  z-index: 4;
}
#insert2 {
  width: 120px;
  height: 50px;
  background-color: #ffa500;
  z-index: 3;
}
#insert3 {
  width: 180px;
  height: 50px;
  background-color: #008000;
  z-index: 2;
}
... 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-06T11:45:45.613

我不认为你离得很远。我所做的是在 mixin 中创建第二个变量，称为`@index2`. 所有这些都是找到您正在寻找的 '920px 减去 @index' 值：

```
@index2 = (920-@index); 
```

然后将其附加到类名：

```
(~".gs@{index}-@{index2}") { 
```

这是完整的循环：

```
.loopingClass (@index) when (@index > 160) {
    @index2 = (920-@index);
    // create the actual css selector, example will result in
    // .myclass_30, .myclass_28, .... , .myclass_1
    (~".gs@{index}-@{index2}") {
    // your resulting css
        width: (@index/20+1)*@col;
    }
    // next iteration
    .loopingClass(@index - 60);
}
// "call" the loopingClass the first time with highest value
.loopingClass (@iterations); 
```

为了获得您正在寻找的集合（gs220-700 到 gs700-220），只需更改`@iterations`为等于 700。

值得注意的是，目前，这将按照您在问题中指定它们的相反顺序创建类。

# qt - 仅显示 QPixmap 的一部分

> ID：10899501
> 
> 赞同：0
> 
> 时间：2012-06-05T14:46:30.650
> 
> 标签：qt, qt4

我想将像素图设置为我的 QLabel。问题是，标签中没有显示整个图像，即只显示图像的一小部分。这是代码：

```
QPixmap pix("c:\\images\\myimg.png"));
mLabel->setPixmap(pix); 
```

可能是什么问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T15:01:02.310

The Label was not added in layout. After adding it, it works.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T11:03:44.537

如果你想保持图像的纵横比，你必须这样做：

```
QPixmap pix("c:\\images\\myimg.png");
pix = pix.scaled(QSize(mLabel->width(),mLabel->height()), Qt::KeepAspectRatio);
mLabel->resize(pix.size());
mLabel->setPixmap(pix); 
```

如果您不想保持图像的纵横比，则必须这样做：

```
QPixmap pix("c:\\images\\myimg.png");
pix = pix.scaled(QSize(mLabel->width(),mLabel->height()), Qt::IgnoreAspectRatio);
mLabel->setPixmap(pix); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T14:52:18.440

尝试将像素图大小设置为标签大小

```
mLabel->setFixedSize(pix.size()); 
```

# nhibernate - 在 NHibernate 中的映射级别过滤实体

> ID：10899503
> 
> 赞同：3
> 
> 时间：2012-06-05T14:46:36.760
> 
> 标签：nhibernate

假设我有一个名为 People 的数据库表和实体 People。假设我需要一种快速的方法来从应用程序中随处显示的人中删除一部分人。所以我将 IsDeleted 列添加到 People 表中，并将该列中的值设置为 1。

在实体框架中，有一种机制指定不应获取列 IsDeleted 中的值设置为 1 的实体实例，并且映射框架会自动过滤数据。有可能用 NHibernate 实现吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T21:36:19.377

[您可以在类映射](http://www.nhforge.org/doc/nh/en/index.html#mapping-declaration-class)中定义`where`属性。

> ***where***（可选）指定检索此类的对象时要使用的任意 SQL WHERE 条件

```
<class ... where="IsDeleted = 0"> 
```

如果您使用的是 Fluent NHibernate，那么只需在映射类中定义它：

```
Where("IsDeleted = 0"); 
```

NH 的代码映射应该类似于 Fluent NHibernate 的映射。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:16:51.433

为了实现我想要的，我创建了基类 + 两个子类。这是配置：

*   具有**discriminator-value 的**子类：

    ```
    <subclass name="People" discriminator-value="null">
    </subclass>
    <subclass name="PeopleHistory" discriminator-value="not null">
        <property name="MasterRowId" />
    </subclass> 
    ```

*   **基类**中的鉴别器：

    ```
    <discriminator column="MasterRowId" /> 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T15:02:49.590

您可以创建抽象类，例如`PeopleBase`，您的`People`类将从该类派生并将您的实体映射到它。
之后，您可以像这样使用鉴别器（没有检查正确性，但它应该可以工作）：

```
 <class name="YourNamespace.PeopleBase,YourNamespace" table="People">
   // ...
   <discriminator column="IsDeleted" type="boolean" /> 
   // Properties...
   // ...
   <subclass name="YourNamespace.People, YourNamespace" discriminator-value="false">
   </subclass>
</class> 
```

# php - 将 CSV 结构化为对象/数组

> ID：10899505
> 
> 赞同：0
> 
> 时间：2012-06-05T14:46:38.123
> 
> 标签：php, json

我正在使用此代码导入基本 CSV，其中每一行代表一张发票。我希望这些发票按其中一列分组，并最终执行 json_encode 以生成具有父/子层次结构的 json。我该怎么做呢？

CSV

```
 ID      CardCode    sum            amount     
 165     BENV5271    100            100 
 026     BENV5635    509.85         287.33
 9025    BENV5635    509.85         222.52 
```

PHP

```
if (($handle = fopen('upload/BEN-new.csv', "r")) === FALSE) {
    die('Error opening file'); 
}
 $headers = fgetcsv($handle, 1024, ',');
 $cardCodes = array();

 while ($row = fgetcsv($handle, 1024, ",")) {
    $cardCodes[] = array_combine($headers, $row);
}
fclose($handle); 
```

JSON（目标）

```
 [ {
 "CardCode":"BENV5271", 
 "payment_sum": "100.00"
 "details": [ {
    "DocNum": "165",
    "InvPayAmnt": "100.00",
    "PmntDate": "2012-03-29"
  } ],

}, {
 "CardCode": "BENV5635",
 "payment_sum": "509.85"
 "details": [ {
     "DocNum": "026"  
     "InvPayAmnt": "287.33",
     "PmntDate": "2012-03-29"
   }, {
     "DocNum": "025",
     "InvPayAmnt": "222.52",
     "PmntDate": "2012-03-29"
   } ],
} ] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T15:09:41.207

对于每个`$row`,

```
@$cardCodes[$row[1]]['payment_sum'] += $row[3];
@$cardCodes[$row[1]]['details'][] = array(
    'DocNum' => $row[0],
    'InvPayAmnt' => $row[3],
    'PmntDate' => $row[4?],
); 
```

格式不完全相同，但已编入索引，适用`for x in y`于 js 中的循环。

# android - Logcat 问题（暂停、缓冲、输出重定向）

> ID：10899507
> 
> 赞同：0
> 
> 时间：2012-06-05T14:46:58.650
> 
> 标签：android, eclipse, debugging, logging, logcat

我四处寻找似乎能够影响 logcat 的所有内容，但我找不到这个问题的答案。我正在调试一个大型应用程序，它每秒将数百条 logcat 消息转储到屏幕上。在 Eclipse 中，我使用正则表达式按日志标记进行过滤，但这就是事情变得奇怪的地方。“暂停”按钮会无缘无故地持续激活，并且鉴于大量新消息，在我获得我正在调查的特定事件序列的日志之前，它们将被一次覆盖一点点. 我什至设置了断点并尝试使用“导出”按钮逐位捕获日志，但是该应用程序是多线程的，并且由于来自其他线程的消息，它们仍然消失得太快。以某种方式增加缓冲区或使旧消息保留会很好，尽管此时我愿意完全放弃它并将其输出到文件中，但我不确定如何按日志标签进行过滤从命令行使用我的正则表达式。我有哪些选择？

PS我一直在环顾四周，我希望这不是多余的——我还没有找到任何专门解决我的问题的东西，尽管我当然遇到过大量相关的线程，但这些线程并没有多大帮助。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T15:01:08.630

我有类似的问题。我正在开发与 Web 服务器通信并下载大量数据的应用程序。我几乎为每个变量都有日志，我必须测试它们以查看我从 JSON 收到的结果是否正确。所以我所做的就是将所有日志记录在我的 sd 卡上的一个文件中，我做了这样的事情：

```
public void log2File(String filename, String log, int type){

   switch(type){

     case 1: // debug

     case 2: //verbose

     case 3: //warning 

      //..and etc
   }
} 
```

我没有找到更好的解决方案，所以我就是这样做的。当然，您必须将日志添加到文件中并保存。

希望这个解决方案对你有好处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T17:42:43.523

我发现 eclipse logcat 窗口在高日志量的情况下相当有问题 - 如果您尝试将其关闭，它甚至不会保持禁用状态。

为了实际捕获所需的数据，我倾向于从命令行使用 adb logcat 命令。在 linux 上，或者可能是 cygwin 或 osx 上，你应该能够做到：

```
adb logcat | tee logfile 
```

两者都看到消息飞过，并将它们记录到文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-06T02:28:58.717

我知道这个问题很老，但我和你有完全相同的问题。我到处寻找一个好的解决方案，但没有找到适合我的解决方案，所以我开始创建自己的工具。如果你在 Mac 上，你可以使用 LogRabbit 来做你想做的事。它可以通过两种不同的方式帮助您解决问题。

1.  您可以`adb logcat -v threadtime`在命令行上使用并将日志写入磁盘并将其导入 LogRabbit。

2.  过滤机制应该足够快以处理您正在谈论的日志量。

看看[http://lograbbit.com](http://lograbbit.com)我希望这会有所帮助。

# java - 是否有任何有效的方法来查找文件中特定 4 字节块的所有实例的第一个字节？

> ID：10899509
> 
> 赞同：2
> 
> 时间：2012-06-05T14:47:03.980
> 
> 标签：java, file-io, binary-data

我有包含存档二进制消息的文件。一个小文件大约 600MB，包含近 9000 条消息。每条消息都以我知道的一个特定的四字节标志开头，它指示消息头的前四个字节（因此必须捕获）。消息头是所有消息的固定大小。消息头后跟一个大小在头中标识的有效负载。一旦我找到了特定消息头的开头，我就知道该头的末尾有多少字节，并且可以使用它来提取消息中我需要解析此存档文件并隔离每条消息以进行处理的字节数，确保我包含从四字节标志的第一个字节到指定消息长度结尾的所有字节。不同的消息之间有一些填充。

由于文件的大小，我不想（并且可能在所有情况下都不能）将文件作为单个数组使用。因此，我正在研究诸如 and 之类的`RandomAccessFile`东西`FileInputStream`。扫描文件以查找特定的字节序列，然后从该序列中的第一个字节开始通过已知长度获取每个字节，这似乎不是一项简单的任务。`RandomAccessFile`，尤其是`read(byte[])`和`seek()`方法似乎可以让我实现解决方案。

给出一个想法，我当前的实现涉及一个名为的方法，该方法`findFlag()`在`RandomAccessFile`. 它寻找那个位置并读取从那里开始的四个字节。如果找到标志，则返回`startPos`. 否则，它会递归调用自己，移动到`startPos + 1`并重复，直到找到标志。由于我知道作为数据消息的一部分读取的最后一个字节，因此我将开始在那里寻找：

```
file.seek(startPos);

byte[] possibleFlag = new byte[4];

file.read(possibleFlag, 0, possibleFlag.length);

if (Arrays.equals(ByteUtils.intToBytes(Message.FLAG), possibleFlag)) {
    return startPos;
}
else {
    return findFlag(startPos + 1);
} 
```

我是否忽略了 Java（Java 6 或更早版本）或经过良好测试的外部库（例如 Apache 库或类似库）中的某些内容？如果没有，是否有更好的解决方案来处理 Java 中的二进制数据或任何特别适合我的问题的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T14:58:24.557

使用 java.nio.channels.FileChannel 扫描文件，它使用较少的中间副本将文件映射到内存。 [替代品基准](http://nadeausoftware.com/articles/2008/02/java_tip_how_read_files_quickly "替代品基准")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T15:46:56.267

这整个方法似乎无效。你怎么知道魔法字节不会出现在其他地方？例如在有效载荷或填充中。我希望你考虑到这一点。

摆脱递归。Java 不进行尾调用消除。迭代版本应该更清晰，更快。

限制分配的数量。为文件中的每个字节分配两个数组是完全不可接受的。

如果您使用`FileChannel`. [您可以使用MappedByteBuffer.getInt(int)](http://docs.oracle.com/javase/1.4.2/docs/api/java/nio/ByteBuffer.html#getInt(int))遍历文件并将其与`Message.FLAG`. 这只是一个简单的 for 循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T21:28:20.647

在我看来，这非常低效。文件上最昂贵的操作是随机部分——来回移动内部指针。你对每一个字节都这样做。+4、-3、+4、-3 等...表演死亡华尔兹。只需向前移动，您就可以完美地做到这一点。开始只搜索签名的第一个字节而不是整个序列。如果匹配，则测试下一个字节。如果有任何失败，只需重新开始搜索第一个字节。连续 4 次成功意味着你有你的签名。一直以来，你只是继续前进。不惜一切代价避免寻找。

此外，除非您绝对不在乎您的处理需要多长时间，否则您不应该仅仅基于功能而关闭 FileChannel。引用的统计数据是每 100MB 分钟数，我可以支持这一观察。FileChannel 比具有小读取大小的 RandomAccessFile 快两个数量级 - 你需要最小的一个:)

虽然递归通常被认为是程序员无所畏惧的标志，但如果你向它提供数百 MB 不包含任何签名的数据，这种特殊用法很容易让你的 VM 崩溃。

# actionscript-3 - Flex Mobile webView.loadURL() 不工作

> ID：10899512
> 
> 赞同：0
> 
> 时间：2012-06-05T14:47:17.387
> 
> 标签：actionscript-3, apache-flex, flex-mobile

我的 flex 移动应用程序中有一个 stageWebView。我正在尝试调用传递一些参数的 javascript 函数。

```
protected function list1_changeHandler(event:IndexChangeEvent):void
            {
                var list:List = event.target as List;
                var selectedString:String = list.selectedItem.label;
                webView.loadURL("javascript:doIt("+selectedString+")");
            } 
```

然后我的 javascript 代码尝试使用我传递的 selectedString。它似乎没有被传递给javascript。但是，如果我传递如下所示的原始字符串，它确实可以工作。我在上面的代码中是否有引号错误或其他内容？或者你不能从 flex 传递对象吗？

```
protected function list1_changeHandler(event:IndexChangeEvent):void
            {
                var list:List = event.target as List;
                var selectedString:String = list.selectedItem.label;
                webView.loadURL("javascript:doIt('yeah')");
            } 
```

编辑我的引号错了。应该是：

```
webView.loadURL("javascript:doIt('"+selectedString+"')"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T14:56:54.427

尝试

```
protected function list1_changeHandler(event:IndexChangeEvent):void
        {
            var list:List = event.target as List;
            var selectedString:String = list.selectedItem;
            var url:String = "javascript:doIt('" + selectedString + "')";
            webView.loadURL(url);
        } 
```

# user-interface - 设置字段文本，Java

> ID：10899514
> 
> 赞同：0
> 
> 时间：2012-06-05T14:47:25.510
> 
> 标签：user-interface, jtextpane

我有两节课。元数据提取器（GUI）和元数据。

MetaData 具有从图像中提取元数据的方法。MetaDataExtractor 旨在在 JTextPane 中显示数据。（请原谅类名。我知道这有点令人困惑。我对 Java 还很陌生）。

元数据提取器：

```
LongitudeField.setText("" + MetaDataTags.getLongitude()); 
```

元数据：

```
public String getLongitude() {
    try {
        Metadata metadata = ImageMetadataReader.readMetadata(jpegFile);
        if (metadata.containsDirectory(GpsDirectory.class)) {
            GpsDirectory gpsDir = (GpsDirectory) metadata.getDirectory(GpsDirectory.class);
            GpsDescriptor gpsDesc = new GpsDescriptor(gpsDir);
            String Longitude = "" + gpsDesc.getGpsLongitudeDescription();

        }
    } catch (ImageProcessingException ex) {
        Logger.getLogger(MetaData.class.getName()).log(Level.SEVERE, null, ex);
        System.out.println("Error 1");
    } catch (IOException ex) {
        Logger.getLogger(MetaData.class.getName()).log(Level.SEVERE, null, ex);
        System.out.println("Error 2");
    }        
    return longitude;
} 
```

如果我设置要在 JTextPane 中显示的经度，它会返回“null”。但是，如果我将它设置为在命令行上打印，它会打印经度吗？

如果它是一个简单的解决方案，请原谅。我仍在掌握Java。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T14:54:27.023

Java 区分大小写，并首先在 try & catch 语句之外声明您的变量。

使用像 Eclipse 这样的 IDE 来减少这样的语法错误。

所以你应该有：

```
public String getLongitude() {
    String longitudeDesc ="";
    try {
        Metadata metadata = ImageMetadataReader.readMetadata(jpegFile);
        if (metadata.containsDirectory(GpsDirectory.class)) {
            GpsDirectory gpsDir = (GpsDirectory) metadata.getDirectory(GpsDirectory.class);
            GpsDescriptor gpsDesc = new GpsDescriptor(gpsDir);
            longitudeDesc = "" + gpsDesc.getGpsLongitudeDescription();

        }
    } catch (ImageProcessingException ex) {
        Logger.getLogger(MetaData.class.getName()).log(Level.SEVERE, null, ex);
        System.out.println("Error 1");
    } catch (IOException ex) {
        Logger.getLogger(MetaData.class.getName()).log(Level.SEVERE, null, ex);
        System.out.println("Error 2");
    }        
    return longitudeDesc ;
} 
```

# asp.net - 如何制作 AjaxControlToolkit.TabContainer 的自定义版本

> ID：10899518
> 
> 赞同：4
> 
> 时间：2012-06-05T14:47:35.217
> 
> 标签：asp.net, asp.net-ajax, custom-controls, custom-server-controls

我想这是很多问题都捆绑在一篇文章中。

我想构建一个类似于[TabContainer的类似向导的控件](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/Tabs/Tabs.aspx)

![在此处输入图像描述](../Images/a54c394fce94cbf084ba12cbfd2474e7.png)

但我需要某些定制。这就像我想将一些帮助文本与 TabPanel 相关联。所以我想我想为标签面板编写如下标记：

```
<cc1:MyTabPanel ID="mtp1" runat="server">
    <HelpTextTemplate>
        This is your step 1 which is about ...
    </HelpTextTemplate>
    <ContentTemplate>
        Content goes here...
    </ContentTemplate>
</cc1:MyTabPanel> 
```

那么你怎么做这样的标记......？以及我们如何从后面的代码中访问数据`HelpTextTemplate`- 其中可能包含服务器控件和所有内容？

此外，请注意上图中有一个名为“保存”的按钮。用户只需拖放到选项卡面板中。当用户双击它时，我们在后面的代码中生成了一个方法存根（属于 aspx 页面）。这一切是如何实现的？

为了关闭整个解决方案，我意识到我们必须连接一些 javascript 来模拟该选项卡功能。这里也有 css（注意选项卡后面的图像 - 渐变等）。我正在研究的方面是将它变成一个用户可以使用的控件，就像工具包的 tabcontainer 控件一样。因此，css/javascript 应该是捆绑在一起的。如何做到这一点？

编辑：

我也对制作控件设计器（设计时交互）部分感兴趣。我正在寻找与 asp.net 向导控件相同的功能。我已经找到了上面一些问题的答案，我会在找到时间时添加它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T18:27:39.740

您尝试构建的控件并不复杂，但它确实涉及许多不同的技术。

我建议从头开始创建自己的控件，而不是继承现有的控件。最好使用 CompositeControl 作为基础，因为它为您提供了很大的灵活性。

对于 HelpTextTemplate/ContentTemplate，您需要创建一些 ITemplate 容器，请查看这篇文章[http://msdn.microsoft.com/en-us/library/aa478964.aspx](http://msdn.microsoft.com/en-us/library/aa478964.aspx)，了解如何设置这些容器。由于您可能想要访问 HelpTextTemplate 中的内容/控件，请查看这篇文章以了解如何访问它们：[ASP.Net ITemplate - 声明的方式](https://stackoverflow.com/questions/2610625/asp-net-itemplate-ways-of-declaring)。

对于选项卡，由于这是自定义的，我可能会避免使用 AjaxControlToolkit。相反，我将包含对 jQuery UI 的引用并使用 jQuery UI 选项卡：http: [//jqueryui.com/demos/tabs/](http://jqueryui.com/demos/tabs/)。您的 CompositeControl 只需要输出一些 div、ul/li 元素，您就可以很好地制作选项卡了。

如果您专注于使用 AJAX 控件工具包选项卡，那么您仍然可以。您需要在自定义控件中实例化一个实例，将其添加到控件树中，然后使用如下技术：http: [//msdn.microsoft.com/en-us/library/0e39s2ck.aspx](http://msdn.microsoft.com/en-us/library/0e39s2ck.aspx)来传输模板的内容到标签页。

能够将控件从工具箱拖放到页面上很简单；如果您的服务器控件库已经是与您的网站相同的解决方案的一部分，那么它就会显示出来。在最坏的情况下，您可以使用“添加项目”选项并通过浏览来添加 DLL。至于双击按钮时如何创建 Click 事件，这是通过类上的属性完成的，请查看有关设置默认事件的本教程：http: [//msdn.microsoft.com/en-us /图书馆/43sxkdeb](http://msdn.microsoft.com/en-us/library/43sxkdeb)。

至于将 javascript 嵌入到库中，这两个问题涵盖了如何专门针对 jQuery UI 执行此操作，如果您选择走其他路线，它仍然应该是相关的：[How to embed jquery library in asp.net custom server control？](https://stackoverflow.com/questions/3666206/how-to-embed-jquery-library-in-asp-net-custom-server-control)，[http](http://forums.asp.net/t/1599621.aspx/1) ://forums.asp.net/t/1599621.aspx/1 。

至于设计时支持，请尝试查看 Microsoft 的文章（包括示例）：http: [//msdn.microsoft.com/en-us/library/aa478960.aspx](http://msdn.microsoft.com/en-us/library/aa478960.aspx)或有关它的 CodeProject 文章：[http://www。 codeproject.com/Articles/9227/ASP-NET-Server-Control-Design-Time-Support](http://www.codeproject.com/Articles/9227/ASP-NET-Server-Control-Design-Time-Support)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T11:22:53.637

我在这里的建议可能听起来太多了，但我想不出其他简单的方法来解决你的要求和你赢得它的方式。

获取 TabContainer 的源代码，克隆它，然后根据该源代码进行所有自定义设置。第一步是获取这个 asp.net 工具包的完整源代码并进行构建。第二步是使用新名称添加 TabControl 的克隆。然后，您在此克隆上工作以根据需要进行更改。如果可能的话，最后一步是尝试将您的自定义控件分离到一个独立的库中。

下载最新版完整的asp.net ajax 控制工具包

[http://ajaxcontroltoolkit.codeplex.com/SourceControl/list/changesets](http://ajaxcontroltoolkit.codeplex.com/SourceControl/list/changesets)

在这里您可以在线查看 TabContainer 的源代码

[http://ajaxcontroltoolkit.codeplex.com/SourceControl/changeset/view/2c482e5ad6c4#Server%2fAjaxControlToolkit%2fTabs%2fTabContainer.cs](http://ajaxcontroltoolkit.codeplex.com/SourceControl/changeset/view/2c482e5ad6c4#Server%2fAjaxControlToolkit%2fTabs%2fTabContainer.cs)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T11:49:16.447

为了将脚本或图像嵌入到 asp.net 自定义控件中，我找到了以下站点中提到的解决方案：

[使用自定义 asp.net 控件嵌入 js 资源](http://aspnet.4guysfromrolla.com/articles/080906-1.aspx "使用自定义 asp.net 控件嵌入 js 资源")

# javascript - 如何在jquery mobile中获取标题的确切高度

> ID：10899520
> 
> 赞同：1
> 
> 时间：2012-06-05T14:47:40.803
> 
> 标签：javascript, iphone, jquery-mobile, retina-display

我是 JQM 的新手，我想得到一个标题的确切高度，但我似乎无法准确地得到它。我需要一个 Iphone 应用程序，即使在带有 Retina 显示屏（甚至是 iPad）的 iphone 4 上也应该检测标题的高度。

我目前的测试是：

```
<div data-role="page" data-theme="m">
  <div id="hdr" data-role="header">
    <a id="bk" href="index.html" data-role="button">Back</a>
    <div style="margin:0 auto;text-align:center;"><img src="../images/lgo_iph.png" alt="" /></div>
    <a href="index.html" data-role="button">Cancel</a>
 </div>
</div> 
```

我得到高度：

```
$(document).live("pageshow", function(){
 alert($('#hdr').outerHeight(true));
 }); 
```

警报 22，这是不正确的，好像我用 $('#bk') 替换 $('#hdr') 我得到的高度为 28，应该更小。

有什么帮助吗？

谢谢你。

# cakephp - 当响应很大时（>4kB）在 CakePHP 中设置 Content-Type

> ID：10899521
> 
> 赞同：1
> 
> 时间：2012-06-05T14:47:41.330
> 
> 标签：cakephp, cakephp-2.1, content-encoding

很简单，我正在尝试从 CakePHP 控制器生成和下载 CSV 文件。生成 CSV 没有问题，一切正常，直到响应 >= 4096 字节。

下面的控制器说明了这个问题：

```
class TestTypeController extends Controller {
  public function csv($size = 100) {
    # set the content type
    Configure::write('debug', 0);
    $this->autoRender = false;
    $this->response->type('csv');
    # send the response
    for ($i = 0; $i < $size; $i++)
      echo 'x';
  }
} 
```

当我调用 时`http://baseurl/test_type/csv/4095`，系统会提示我保存文件，并且 Content-Type 标头是`text/csv`. 响应头是：

```
HTTP/1.1 200 OK
Date: Tue, 05 Jun 2012 14:28:56 GMT
Server: Apache/2.2.22 (Ubuntu)
X-Powered-By: PHP/5.3.10-1ubuntu3.1
Content-Length: 4095
Keep-Alive: timeout=5, max=98
Connection: Keep-Alive
Content-Type: text/csv; charset=UTF-8 
```

当我调用`http://baseurl/test_type/csv/4096`时，文件被打印到屏幕上，响应头是：

```
HTTP/1.1 200 OK
Date: Tue, 05 Jun 2012 14:28:53 GMT
Server: Apache/2.2.22 (Ubuntu)
X-Powered-By: PHP/5.3.10-1ubuntu3.1
Vary: Accept-Encoding
Content-Encoding: gzip
Content-Length: 38
Keep-Alive: timeout=5, max=100
Connection: Keep-Alive
Content-Type: text/html 
```

显然，4kB 是 Content-Encoding 开始压缩响应的限制。我不熟悉 Content-Type 的反应方式，但我显然更希望它保留**text/csv**。

`RequestHandlerComponent`使用管理响应的类型也会出现同样的问题。

我正在使用 CakePHP 2.2.0-RC1，但我已经验证了稳定的 2.1.3 存在问题。有任何想法吗？指向正确方向的指针？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T14:24:22.303

答案很简单——控制器应该返回 CSV 数据而不是回显它。

# java - 使用 HashMap 实现对 DFA 和 NFA 建模

> ID：10899522
> 
> 赞同：1
> 
> 时间：2012-06-05T14:47:55.077
> 
> 标签：java, dfa, nfa

我必须在 Java 中通过自动机实现以下操作：

*   级联
*   克莱恩之星
*   联盟
*   路口

如果自动机是 NFA，那么这些操作会更容易。我喜欢以下链接[Modeling a Finite Deterministic Automaton via this data](https://stackoverflow.com/q/1870519/657649)中给出的实现，但我认为这在建模 NFA 时不太合适，因为关键唯一性限制。你会给我推荐任何对 NFA 建模的解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T15:26:27.590

As someone who actually implemented these operations once (when building a scanner generator), I recommend building up the automaton as an NFA, then using an algorithm like the subset construction or Thompson's algorithm to convert it down to a DFA. This keeps the logic for combining automata together simple and elegant without sacrificing the speed of the resulting matching automaton.

Hope this helps!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T15:08:20.543

我建议使用 DFA。尽管在纸面上形成 NFA 可能更容易，但由于考虑到 epsilon-jump，检查一个有效字符串与一个 NFA 将比验证一个 DFA 更复杂。

至于对它们建模，您应该能够只用几个类编写自己的。想想 DFA/NFA 由什么组成：
- 开始状态
- 状态集（其中一些是“接受”状态）
- 转换集

# asp.net-mvc - 模型绑定器不会将 json 转换为 IEnumerable

> ID：10899530
> 
> 赞同：3
> 
> 时间：2012-06-05T14:48:24.110
> 
> 标签：asp.net-mvc, json, modelbinder

我通过 jquery ajax post 将 json 数据发送到我的控制器操作。我操作中的 IEnumerable 始终为空。

我的 json 是错误的，还是模型绑定器没有将 json 转换为 IEnumerable ？

```
public ActionResult Update(IEnumerable<Teststep> teststeps)
{
   //
}

$.ajax({
            url: '@Url.Action("Update", "Teststep")',
            type: 'POST',
            data: [{ "errortext": "oh something bad happended.", "unitid": "10" }, { "errortext": "you got it man.", "unitid": "20"}],
            success: function (response) {
                debugger;
                if (response.success) {
                    dlg.dialog("close");
                    // Update UI

                }
                else {
                    // Reload the dialog with the form to show model/validation errors 
                    dlg.html(response);
                }
            }
        });

public class Teststep
{

 [HiddenInput(DisplayValue = false)]
 public int UnitId { get; set; }    

 public string ErrorText { get; set; }  

 // some other props removed for readability   

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T16:43:05.943

现在它起作用了！我在 IEnumerable 中得到 1 个项目。问题是搞砸了 json ;-)

```
 var data = { teststeps: [{ ErrorText: 'bla', UnitId: 10}] };
        $.ajax({
            url: '@Url.Action("Update", "Teststep")',
            type: 'POST',
            data: JSON.stringify(data),
            dataType: 'json',
            contentType: 'application/json'            
        });

[HttpPost]
public ActionResult Update(IEnumerable<Teststep> teststeps)
{

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T16:26:05.590

为了让集合（数组、ienumerables 等）正确地通过 modelbinder 传递给 action 方法，我一直不得不在 ajax 调用上设置 traditional: true 选项：

```
$.ajax({
    url: '@Url.Action("Update", "Teststep")',
    type: 'POST',
    traditional: true,
    ... 
```

# php - 为什么使用cookie通过php安全风险输出html？

> ID：10899532
> 
> 赞同：4
> 
> 时间：2012-06-05T14:48:35.227
> 
> 标签：php, html

我对php比较陌生，希望你能帮助我理解为什么你应该在'echo'ing时清理html，特别是如果数据来自cookie..

即代替

```
<h3>Hello, <?php echo $_COOKIE['user']; ?>!</h3> 
```

你应该做

```
<h3>Hello, <?php echo htmlspecialchars($_COOKIE['user']); ?>!</h3> 
```

这就是我的理解。

cookie 存储在客户端，因此存在安全风险，因为其中的数据可以被邪恶的用户操纵/更改（lol @ evil）。

但是由于 cookie 存储在客户端，这意味着客户端只能更改自己的 cookie，这意味着如果他在 $_COOKIE['user'] 中添加某种恶意代码，当 cookie 运行时，恶意代码将只显示给一个用户（谁首先更改了 cookie）而不是其他任何人！？所以有什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T14:51:45.700

您假设用户更改了自己的 cookie。Cookie 可以由第三方更改（*编辑：使用附加软件。第三方网站**无法**直接更改 cookie*）。这将使某人能够将恶意代码注入用户的浏览器，从而改变他们的用户体验，并可能给您的代码带来额外的安全风险。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T14:57:14.077

不仅仅是看安全方面，还有用户体验方面。您提供的代码对安全性并没有真正有用，因为在这种情况下风险非常低但是如果用户名可以包含引号或 < > 符号，则用户将不明白为什么其登录名无法正确显示。

使用这样的代码保证您将正确显示用户名（并增加额外的安全性），无论您在注册过程中允许使用哪种字符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-05T14:52:56.897

在这种情况下，这并不是真正的风险——但这很少是实际情况。无论如何你都应该这样做。

*   **一致性**——现在不要放，当你把它改成别的东西时，你可能会打开一个安全漏洞。
*   **用户体验**——仅仅因为 cookie 包含 HTML 并不意味着它是 XSS 注入尝试。如果有人的名字是`&amp;`怎么办？我一直在想把我的名字改成`&amp;`.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-05T14:52:19.647

用户可以通过更改 cookie 将脚本注入您的页面。仅这一事实就足以让你停下来思考。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-05T14:58:37.710

想象一下，您正在创建一个真正的网站，其中许多数据存储在用户 cookie 中。

可能 cookie 中的某些数据被您的网站用来构建 SQL 语句，如果用户或其他网站以不良方式修改您的 cookie，这可能会导致错误。

如果您不检查 cookie 数据是否有注入，即使在 cookie 中写入的内容可能会损害您的数据一致性，例如，`varchar`列中的字符串只能插入十六进制数字。

处理该问题的最佳方法是在可能的情况下使用会话，并且尽可能只在 cookie 中存储最少数量的所需数据。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-06-05T14:52:43.157

> 但是由于 cookie 存储在客户端，这意味着客户端只能更改自己的 cookie，这意味着如果他在 $_COOKIE['user'] 中添加某种恶意代码，当 cookie 运行时，恶意代码将只显示给一个用户（谁首先更改了 cookie）而不是其他任何人！？所以有什么问题？

好吧，这取决于您的实施以及您使用 cookie 数据的目的。一个邪恶的用户可以通过你的 cookie 注入 SQL，改变他的权限，冒充另一个用户，等等。

这就是为什么您应该始终考虑最坏情况的编码

# asp.net-mvc - 密码 ModelState.IsValid 上的 ASP.NET MVC DataAnnotations StringLength 在散列时失败

> ID：10899541
> 
> 赞同：0
> 
> 时间：2012-06-05T14:49:12.287
> 
> 标签：asp.net-mvc, hash, data-annotations, modelstate

第一个问题是，使用 StringLength，是否可以只指定最小长度？更重要的是，这是我的密码。

```
private string password;
[Required]
[DataType(DataType.Password)]
[StringLength(15, MinimumLength = 6)]
public string Password { get { return password; } set { HashPassword(value); } } 
```

我想要的是当用户输入密码时，他们只能输入最少 6 个字符，最多 15 个字符的密码。问题在于我的控制器，因为 ModelState.IsValid 由于散列生成超过 15 个字符的巨大字符串而失败。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T14:52:22.750

我建议在其他地方（例如在控制器中）进行散列，而不是在属性的 set 访问器中进行。

# ios5 - 使用 DDMathParser 链接错误（iOS 5，Xcode 4.2）

> ID：10899543
> 
> 赞同：0
> 
> 时间：2012-06-05T14:49:20.633
> 
> 标签：ios5, xcode4.2, mathematical-expressions, linker-errors, ddmathparser

我尝试将 DDMathParser 库添加到我的项目中，但出现两个链接错误。我是 Objective-C 编程的新手，对我来说仍然很棘手。下面是我得到的错误的快照：![在此处输入图像描述](../Images/f07ed7e8f8967441541854ee4a726bbd.png)

我应该怎么办？

我也试过 CGMathParser 但我没有设法解决我得到的一些错误。

[我在这里问过，但我没有得到任何反馈](https://stackoverflow.com/questions/10850698/how-to-use-gcmathparser-in-ios-5-application-xcode-4-2-with-arc)

有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T21:51:59.200

看起来您已经复制了标头，但实际上并未将源文件链接到其中。换句话说，Xcode 并未将 DDMathParser 编译到您的项目中。

DDMathParser wiki 上的此页面包含有关您应该做什么的信息：[https ://github.com/davedelong/DDMathParser/wiki/Adding-DDMathParser-to-your-project](https://github.com/davedelong/DDMathParser/wiki/Adding-DDMathParser-to-your-project)

# ocaml - 从显式令牌列表中输入 ocamlyacc 解析器？

> ID：10899544
> 
> 赞同：6
> 
> 时间：2012-06-05T14:49:36.873
> 
> 标签：ocaml, ocamlyacc

是否可以为 OCamlYacc 生成的解析器提供显式令牌列表以进行分析？

我想使用 OCamlLex 显式生成一个令牌列表，然后我稍后使用 Yacc 生成的解析器对其进行分析。但是，标准用例会生成一个解析器，该解析器会为下一个标记隐式调用词法分析器。这里的令牌是在 yacc 分析期间而不是之前计算的。从概念上讲，解析器应该只处理标记，但 Yacc 生成的解析器提供了一个依赖于词法分析器的接口，在我的情况下我不需要。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T19:35:50.880

正如 Jeffrey 已经提到的，作为其运行时库的一部分，[Menhir](http://gallium.inria.fr/~fpottier/menhir/)特别为解析器提供了一个具有任何类型令牌流的模块（它只要求一个`unit -> token`函数）：[MenhirLib.Convert](http://gallium.inria.fr/~fpottier/menhir/convert.mli.html)。

（您甚至可以在不使用 Menhir 的情况下使用此代码，而使用 ocamlyacc。实际上，转换并不是非常复杂，因此您甚至可以自己重新实现它。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-05T17:28:23.377

如果您已经有一个标记列表，您可以采取丑陋的方式并完全忽略词法分析缓冲区。毕竟，解析器期望的 parse-from-lexbuf 函数是一个非纯函数：

```
let my_tokens = ref [ (* WHATEVER *) ]
let token lexbuf = 
  match !my_tokens with 
    | []     -> EOF 
    | h :: t -> my_tokens := t ; h 

let ast = Parser.parse token (Lexbuf.from_string "") 
```

另一方面，从您的评论中可以看出，您实际上有一个类型的函数`Lexing.lexbuf -> token list`，您正试图将其放入`Lexing.lexbuf -> token`解析器的签名中。如果是这种情况，您可以轻松地使用队列在两种类型之间编写转换器：

```
let deflate token = 
  let q = Queue.create () in
  fun lexbuf -> 
    if not (Queue.is_empty q) then Queue.pop q else   
      match token lexbuf with 
        | [   ] -> EOF 
        | [tok] -> tok
        | hd::t -> List.iter (fun tok -> Queue.add tok q) t ; hd 

let ast = Parser.parse (deflate my_lexer) lexbuf 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T15:12:43.953

OCamlYacc 界面看起来确实很复杂。它似乎需要一个`Lexing.lexbuf`. 也许您可以考虑使用`Lexing.from_string`固定的字符串而不是固定的标记序列。你也可以看看[Menhir](http://gallium.inria.fr/~fpottier/menhir/)。我没有用过它，但只要有人提到 OCaml 解析器生成器，它就会在这里得到很好的评价。它可能有一个更灵活的词法接口。

# text - 使用 sed 仅更改连续重复的字母

> ID：10899545
> 
> 赞同：1
> 
> 时间：2012-06-05T14:49:38.410
> 
> 标签：text, sed

使用 sed，如何将字母“a”更改为“A”，但前提是它作为两个或多个连续字母重复出现。示例，来自：

```
galaxy
ear
aardvak
Haaaaaaaaa 
```

进入

```
galaxy
ear
AArdvak
HAAAAAAAAA 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T16:13:47.410

您可以使用组来完成。如果你有这个文件：

```
$ cat a
galaxy
ear
aardvak
Haaaaaaaaa 
Ulaanbaatar 
```

你可以使用这个 sed 命令：

```
$ sed 's/\(.\)\1\{1,\}/\U&/g' a
galaxy
ear
AArdvak
HAAAAAAAAA 
UlAAnbAAtar 
```

这里会发生什么？如果我们有一个字符，“打包”在一个组 ( `\(.\)`) 中，并且该组 ( `\1`) 重复一次或多次 ( `\1\{1,\}`)，则将匹配的部分 ( `&`) 替换为其大写版本 ( `\U&`)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T15:07:19.340

**编辑**
您可以这样做：

```
sed 's/a\(a\+\)/A\U\1/;s/b\(b\+\)/B\U\1/;s/c\(c\+\)/C\U\1/;s/d\(d\+\)/D\U\1/;s/e\(e\+\)/E\U\1/;s/f\(f\+\)/F\U\1/;s/g\(g\+\)/G\U\1/;s/h\(h\+\)/H\U\1/;s/i\(i\+\)/I\U\1/;s/j\(j\+\)/J\U\1/;s/k\(k\+\)/K\U\1/;s/l\(l\+\)/L\U\1/;s/m\(m\+\)/M\U\1/;s/n\(n\+\)/N\U\1/;s/o\(o\+\)/O\U\1/;s/p\(p\+\)/P\U\1/;s/q\(q\+\)/Q\U\1/;s/r\(r\+\)/R\U\1/;s/s\(s\+\)/S\U\1/;s/t\(t\+\)/T\U\1/;s/u\(u\+\)/U\U\1/;s/v\(v\+\)/V\U\1/;s/w\(w\+\)/W\U\1/;s/x\(x\+\)/X\U\1/;s/y\(y\+\)/Y\U\1/;s/z\(z\+\)/Z\U\1/' 
```

（感谢*庇护所*）

或者使用 sed 管道：

```
function capitalize_consecutives () {
  sed 's/a\(a\+\)/A\U\1/' |
  sed 's/b\(b\+\)/B\U\1/' |
  sed 's/c\(c\+\)/C\U\1/' |
  sed 's/d\(d\+\)/D\U\1/' |
  sed 's/e\(e\+\)/E\U\1/' |
  sed 's/f\(f\+\)/F\U\1/' |
  sed 's/g\(g\+\)/G\U\1/' |
  sed 's/h\(h\+\)/H\U\1/' |
  sed 's/i\(i\+\)/I\U\1/' |
  sed 's/j\(j\+\)/J\U\1/' |
  sed 's/k\(k\+\)/K\U\1/' |
  sed 's/l\(l\+\)/L\U\1/' |
  sed 's/m\(m\+\)/M\U\1/' |
  sed 's/n\(n\+\)/N\U\1/' |
  sed 's/o\(o\+\)/O\U\1/' |
  sed 's/p\(p\+\)/P\U\1/' |
  sed 's/q\(q\+\)/Q\U\1/' |
  sed 's/r\(r\+\)/R\U\1/' |
  sed 's/s\(s\+\)/S\U\1/' |
  sed 's/t\(t\+\)/T\U\1/' |
  sed 's/u\(u\+\)/U\U\1/' |
  sed 's/v\(v\+\)/V\U\1/' |
  sed 's/w\(w\+\)/W\U\1/' |
  sed 's/x\(x\+\)/X\U\1/' |
  sed 's/y\(y\+\)/Y\U\1/' |
  sed 's/z\(z\+\)/Z\U\1/' 
} 
```

然后让它解析你的文件：

```
capitalize_consecutives < myfile 
```

`\U`是大写出现。我想这仅适用于 GNU sed。

# json - asp.net mvc 4 vs JavaScript 模板

> ID：10899546
> 
> 赞同：3
> 
> 时间：2012-06-05T14:49:41.617
> 
> 标签：json, asp.net-mvc-3, architecture, asp.net-mvc-4

我一直在努力决定向浏览器呈现内容的最佳方法的方向：使用剃刀的服务器端或使用 JSON 数据和某种形式的模板（jsRender、loadJson 等）的客户端

这是一篇关于在 asp.net mvc 中使用客户端模板的好文章： [ASP.NET MVC 中的 jQuery 模板/视图引擎](http://www.codeproject.com/Articles/188467/jQuery-Templates-View-Engines-in-ASP-NET-MVC)

ASP.Net MVC 4 有一些很棒的玩具（WebAPI）。我可以看到创建一套 WebAPI 功能来交付可用于传统网页甚至移动页面的 JSON 数据。真的很酷的东西。

然后，我看看您使用传统的 ASP.Net MVC 方法有哪些选择。您有布局，可以利用 JS/CSS 文件的自动捆绑/缩小（更多 ASP.Net MVC 4 的优点），以及触手可及的 ASP.Net MVC 的稳健性。真的很酷的东西。

所以，我的问题是你如何决定你应该在架构上走向哪个方向？我想您可以在您的站点中使用多种方法，但这成为维护问题。使用全部 JavaScript 模板并从服务中使用 JSON 数据是非常干净的关注点分离，但您似乎失去了 ASP.Net MVC 提供的许多优点，例如路由。

平衡我们可用的所有选项的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T15:49:38.263

这是一个普遍的问题，所以一般的答案是你应该坚持让你最有效率/完成工作的方法。两种方法都有效，但当然有权衡。但是，除非您达到真正的大规模（例如 Twitter 最近宣布出于性能原因它将移回服务器端渲染），否则这些通常并不重要。如果您已经熟悉 MVC 并且您正在赶上最后期限 - 请坚持下去。如果您有更多时间或想学习一项新技术 - 选择看起来有趣的东西。

# c# - ASP.NET 下载对话框

> ID：10899547
> 
> 赞同：0
> 
> 时间：2012-06-05T14:49:47.770
> 
> 标签：c#, asp.net

我有这个代码..

```
<li><a href="downloads/PDF_File.pdf">PDF</a></li> 
```

但它会打开 pdf 文件，现在我是 ASP.NET 的新手，如何打开下载对话框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:59:46.433

检查这个问题：

[从 ASP.Net 中的 URL 下载流文件](https://stackoverflow.com/questions/5596747/download-stream-file-from-url-asp-net)

以及这些文章：

[ASP.NET中的文件下载和跟踪下载成功/失败的状态](http://www.codeproject.com/Articles/74654/File-Download-in-ASP-NET-and-Tracking-the-Status-o)

[使用 C# 在 ASP.Net 中下载文件](http://www.venkateswarlu.co.in/articles/DotNet/Download_File.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T14:53:18.547

基本上，这里发生的是 pdf 文件的正常行为。默认情况下，IIS 为 Web 应用程序中的任何 pdf 文件提供“pdf”MIME 类型。当您在应用程序中访问 pdf 时，浏览器会读取 MIME 类型并了解您正在访问 pdf 文件。大多数浏览器都希望在其内置 PDF 阅读器中显示它，而不是提示您保存它。如果您确实需要显示 pdf 的下载对话框，您可以在 web.config 中更改 pdf 的 MIME 类型，以便 IIS 将 pdf 作为应用程序中的基本文件类型提供：

```
<configuration>
    <system.webServer>
        <staticContent>
            <remove fileExtension=".pdf" />
            <mimeMap fileExtension=".pdf" mimeType="application/octet-stream" />
        </staticContent>
    </system.webServer>
</configuration> 
```

注意：您应该首先删除您在 web.config 中手动设置的 MIME 类型，因为可能已经在应用程序级别设置了相同扩展名的 MIME 类型。

现在 IIS 将提供 pdf 文件作为基本/未知文件类型，并且它们可以下载。如果您只是将“.pdf”换成不同的扩展名，这适用于任何文件类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T14:31:16.473

我不知道如何对现有文件执行此操作，但不久前我编写了一段代码，结合了 iTextSharp 和 ASP.net（框架 4）MemoryStream 对象来创建然后下载 pdf 文件，我希望这会有所帮助：

```
MemoryStream msPDF = new MemoryStream();
// do some stuff with iTextSharp ...
Response.ContentType = "application/pdf";
Response.AppendHeader("Content-Disposition", "attachment; filename=myPdf.pdf"); // open/save dialog
Response.BinaryWrite(msPDF.ToArray()); 
```

# wpf - observableCollection：如何在运行时建立类型？

> ID：10899549
> 
> 赞同：0
> 
> 时间：2012-06-05T14:49:52.663
> 
> 标签：wpf, observablecollection

我有一个 dataGrid，它使用一个`observableCollection`来绑定`ItemsSource`属性（MVVM 模式）。因此，在我的视图模型中，我有一个`observableCollection` ( `myCollection`) 属性。但是，这个 dataGrid 可以显示两种不同类型的信息，它们是在运行时决定的。

通常，我在此使用 observableCollection：

```
ObservableCollection<myType> myCollection = new ObservableCollection<myType>(); 
```

但是现在，我有一个字符串作为参数，告诉我我需要什么类型，所以我想做这样的事情：

```
if(parameter == "TypeA")
{
    myCollection = new ObservableCollection<TypeA>();
}

if(parameter == "TypeB")
{
    myCollection = new ObservableCollection<TypeB>();
} 
```

可以这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:55:42.770

如果你让 TypeA 和 TypeB 从一个公共的基类或接口派生，你可以保持相同的集合。

但是如果你想要两个不同的集合，你可以提高集合属性来通知改变的类型。

```
IEnumerable MyCollection
{
    get
    {
        if(CurrentType == typeof(TypeB)
            return myTypeBCollection;
        else if(CurrentType == typeof(TypeA)
            return myTypeACollection;
    }
} 
```

因此，您将视图中的 MyCollection 绑定到 ItemsSource，并提出该属性已更改。

请记住，您可能需要不同的 DataTemplate，DataTemplateSelector 可能会派上用场。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-16T12:59:49.767

只需使用**动态**关键字而不是精确类型在运行时声明 ObservableCollection

```
private ObservableCollection<dynamic> DynamicObservable(IEnumerable source)
    {

        ObservableCollection<dynamic> SourceCollection = new ObservableCollection<dynamic>();

        SourceCollection.Add(new MobileModelInfo { Name = "iPhone 4", Catagory = "Smart Phone", Year = "2011" });

        SourceCollection.Add(new MobileModelInfo { Name = "S6", Catagory = "Ultra Smart Phone", Year = "2015" });

        return SourceCollection;

    }

public class MobileModelInfo
{
    public string Name { get; set; }
    public string Catagory { get; set; }
    public string Year { get; set; }
} 
```

# objective-c - 检索并更改 touchUpInside 更改为 touchUpOutside 的点

> ID：10899552
> 
> 赞同：1
> 
> 时间：2012-06-05T14:49:57.180
> 
> 标签：objective-c, ios, cocoa-touch, uibutton, uislider

我做了一个`UISlider`像“滑动解锁”滑块一样的作品。我需要做的是确定抬起手指被归类为`touchUpOUTSIDE`和不归类的点`touchUpINSIDE`。这是您将手指滑过滑块末端的位置。我想这与 a 相同`UIButton`，您可以按下按钮然后将手指从按钮上滑开，根据您走多远，它仍然可以归类为`touchUpInside`. 如果可能的话，我想用圆圈标记目标区域。

一旦我设法找到了这一点，是否可以改变它？所以我可以有更大的目标区域？

我真的不知道从哪里开始。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T21:17:16.657

我花了几个小时，但我已经设法解决了这个问题。我已经做了很多覆盖 touchesMoved、touchesEnded 和 sendAction:action:target:event 的测试，看起来框架类的 70px 内的任何触摸都是触摸 INSIDE。因此，对于 292x52 的 UISlider，从 x:-70 到 x:362 或 y:-70 到 122 的任何触摸都将被视为内部触摸，即使它在框架之外。

我想出了这段代码，它将覆盖一个自定义类，以允许框架周围更大的 100 像素区域算作内部触摸：

```
#import "UICustomSlider.h"

@implementation UICustomSlider {
    BOOL callTouchInside;
}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    callTouchInside = NO;
    [super touchesMoved:touches withEvent:event];
}

-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    CGPoint touchLocation = [[touches anyObject] locationInView:self];
    if (touchLocation.x > -100 && touchLocation.x < self.bounds.size.width +100 && touchLocation.y > -100 && touchLocation.y < self.bounds.size.height +100) callTouchInside = YES;

    [super touchesEnded:touches withEvent:event];
}

-(void)sendAction:(SEL)action to:(id)target forEvent:(UIEvent *)event
{
    if (action == @selector(sliderTouchOutside)) {                          // This is the selector used for UIControlEventTouchUpOutside
        if (callTouchInside == YES) {
            NSLog(@"Overriding an outside touch to be an inside touch");
            [self sendAction:@selector(UnLockIt) to:target forEvent:event]; // This is the selector used for UIControlEventTouchUpInside
        } else {
            [super sendAction:action to:target forEvent:event];
        }
    } else {
        [super sendAction:action to:target forEvent:event];
    }
} 
```

通过更多的调整，我应该也可以将它用于相反的情况。（使用更近的触摸作为外部触摸）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T15:12:35.523

根据文档，`UIControlEventTouchUpOutside`当手指超出控件范围时触发事件。如果您尝试更改该区域，滑块将随之缩放。为什么不将操作绑定`UIControlEventTouchUpOutside`到与 相同`UIControlEventTouchUpInside`？

# ant - Ant 添加尾随零

> ID：10899561
> 
> 赞同：2
> 
> 时间：2012-06-05T14:50:46.417
> 
> 标签：ant

您好，我在 Ant 中有一个变量：`${env.BUILD_NUMBER}`
而且我不想这个变量总是 6 个字符长。
如果不是 Ant 应该添加尾随零。

1 应该是 100000
39 应该是 390000
5656 应该是 565600

这怎么可能使用 Ant 构建脚本？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T17:14:56.243

有一个使用此处描述的[PropertyFile](http://ant.apache.org/manual/Tasks/propertyfile.html) Ant 任务的解决方案：[Re: Zero-Padding an Int Ant Property](http://mail-archives.apache.org/mod_mbox/ant-user/200608.mbox/%3C20060825000008.9390@gmx.net%3E)

您可能还想从[Ant Contrib签出](http://ant-contrib.sourceforge.net/)[propertyregex](http://ant-contrib.sourceforge.net/tasks/tasks/propertyregex.html)任务。请参阅[替换 Ant 属性中的字符](https://stackoverflow.com/questions/1176071/replacing-characters-in-ant-property/1176101#1176101)

# github - 从 GitHub 部署？

> ID：10899562
> 
> 赞同：0
> 
> 时间：2012-06-05T12:09:10.060
> 
> 标签：github

我可以直接从 GitHub 部署到我的（debian linux）服务器吗？有没有办法在每次提交后自动将代码从 GitHub 传输到我的服务器？还要操作配置文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T13:15:40.837

克隆服务器上的存储库，每 1 或 2 分钟（或任何间隔，取决于您的提交频率）在服务器上运行一次 cronjob 并更新存储库。这应该足够了。但这在生产服务器上是不可取的。不过，您可以在测试或登台服务器上执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-05T15:28:34.737

Bibhas 上面的回答是正确的，但如果您不是唯一在存储库上协作的人，您可能需要考虑使用**git 标签**来指示可发布代码并仅在出现新标签时触发更新。

为此，请在您的开发机器上标记您的最新提交并推送它：

```
git tag -a v1.0 -m"Initial tag"
git push origin --tags 
```

然后，在您的服务器上：

```
git remote update && git checkout v1.0 
```

然后，您的 cron 脚本应该执行以下操作：

1.  从 Github 获取最新信息：
    `cd $REPO && git remote update`
2.  获取当前的 ref `HEAD`（假设您只签出标签）：
    `current=$(git rev-parse HEAD)`
3.  获取最新标签的 ref：
    `latest=$(git rev-list --tags | head -1)`
4.  最后，如果`$current`不等于`$latest`，请查看最新标签：
    `git checkout $(git tag --points-at $latest)`

# css - 将恒定高度元素部分定位在页面底部的屏幕外

> ID：10899564
> 
> 赞同：0
> 
> 时间：2012-06-05T14:50:54.920
> 
> 标签：css

**我正在尝试使用:after**伪元素在页脚上添加一些装饰性装饰。

问题是，根据我的 css 代码，装饰华丽元素（固定大小，使用背景图像）要么被页脚剪裁，要么最终扩展页面高度并添加垂直滚动条。

我需要的是从页脚顶部边框开始的装饰元素（换句话说，页面内容结束的地方）并在页面底部进行剪辑（或者如果屏幕空间允许，则根本不要剪辑）。

如果我的问题不够清楚，我可以稍后提供代码链接。

**编辑**：换句话说，我想知道是否有任何理智的方法可以防止在*特定*绝对定位元素的底部边缘超出页面底部时出现垂直滚动条。

**EDIT2**：该网站目前在[http://www.ikimark.fi/ikimark_uusi/site](http://www.ikimark.fi/ikimark_uusi/site)可用。 有问题的装饰是右下角的华丽图像。我今天正在编辑该网站，因此代码可能会更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T15:13:47.113

请提供指向您的项目的链接并尝试使用`position:absolute;z-index:9999;`

编辑：

好吧，我仍然对您的要求感到困惑。如果您希望华丽图像不覆盖内容下方的太多空间并仅填充页脚的总高度，请`overflow: hidden;`在您的`wrap` `div`. 如果你不想要这个，那么请你解释一下吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T15:45:24.103

尝试使用 overflow-y: hidden 设置底部 div 的绝对高度，如下所示：

`<div id="footer" style="height: 4em; overflow-y: hidden"></div>`

# iphone - 你如何从远程 MySQL 数据库中获取数据到你的应用程序中？

> ID：10899566
> 
> 赞同：1
> 
> 时间：2012-06-05T14:51:03.143
> 
> 标签：iphone, titanium

刚刚完成了一些关于使用数据填充 SQLite 数据库然后在您的应用程序中使用这些数据的教程。然而，这些教程都没有展示如何连接到远程服务器以获取数据。

问题：

你如何从远程 MySQL 数据库中获取数据到你的应用程序中？你有什么选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T14:59:00.153

远程访问不是一个好主意，您必须允许所有人访问它，因为它是一个应用程序。解决此问题的最佳方法是在您的应用程序和数据库之间构建一个层。从应用程序中，您将访问执行数据库工作并响应您的应用程序的服务器端脚本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T14:54:05.460

那么有一些方法可以允许远程访问您服务器上的 mysql 数据库并能够远程查询数据库。我认为这是最干净的解决方案。查看此链接：[http ://www.cyberciti.biz/tips/how-do-i-enable-remote-access-to-mysql-database-server.html](http://www.cyberciti.biz/tips/how-do-i-enable-remote-access-to-mysql-database-server.html)

# c# - 使用 .NET 中的 linq 计算 dataGridView 中列的不同值

> ID：10899568
> 
> 赞同：5
> 
> 时间：2012-06-05T14:51:14.417
> 
> 标签：c#, .net, linq, datagridview, lambda

我需要在 dataGridView 中计算和呈现不同/唯一的值。我想像这样呈现它，并且这段代码适用于列表。

```
 List<string> aryIDs = new List<string>();
        aryIDs.Add("1234");
        aryIDs.Add("4321");
        aryIDs.Add("3214");
        aryIDs.Add("1234");
        aryIDs.Add("4321");
        aryIDs.Add("1234");

        var result= aryIDs.GroupBy(id => id).OrderByDescending(id => id.Count()).Select(g => new { Id = g.Key, Count = g.Count() }); 
```

但是，当我尝试对 dataGridView 中的列使用相同的方法时，我收到一条错误消息，指出不能在我的 dataGridView 上使用 groupBy。

```
 DataGridView dataGridView1= new DataGridView();
        dataGridView1.Columns.Add("nr", "nr");
        string[] row1 = new string[] { "1234" };
        string[] row2 = new string[] { "4321" };
        string[] row3 = new string[] { "3214" };
        string[] row4 = new string[] { "1234" };
        string[] row5 = new string[] { "4321" };
        string[] row6 = new string[] { "1234" };

        object[] rows = new object[] { row1, row2, row3, row4, row5, row6 };

        foreach (string[] rowArray in rows)
        {
            dataGridView1.Rows.Add(rowArray);
        }

        var result = dataGridView1.GroupBy(id => id).OrderByDescending(id => id.Count()).Select(g => new { Id = g.Key, Count = g.Count() }); 
```

所以我的问题是，如何调整这种 linq 语法以处理 dataGridView 中的列？如果可能的话，我根本不想使用列表。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-05T15:19:00.600

这将适用于您的示例：

```
var result = dataGridView1.Rows.Cast<DataGridViewRow>()
    .Where(r => r.Cells[0].Value != null)
    .Select (r => r.Cells[0].Value)
    .GroupBy(id => id)
        .OrderByDescending(id => id.Count()) 
        .Select(g => new { Id = g.Key, Count = g.Count() }); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-05T15:06:27.607

我认为这会做到，但我不是 100% 确定。试试看，如果有任何问题，请告诉我...

```
var distinctRows = (from GridViewRow row in dataGridView1.Rows 
                    select row.Cells[0]
                   ).Distinct().Count(); 
```

# go - 理解 Go 中 `interface{}` 用法的问题

> ID：10899571
> 
> 赞同：2
> 
> 时间：2012-06-05T14:51:27.310
> 
> 标签：go

我正在尝试将算法从 Python 移植到 Go。它的中心部分是使用 dicts 构建的树，它应该保持这种方式，因为每个节点可以有任意数量的子节点。所有叶子都在同一级别，因此最低级别的字典包含其他字典，而最低级别的包含浮点数。像这样：

```
tree = {}
insert(tree, ['a', 'b'], 1.0)
print tree['a']['b'] 
```

因此，在尝试将代码移植到 Go 并同时学习语言时，我开始测试基本思想：

```
func main() {
    tree := make(map[string]interface{})
    tree["a"] = make(map[string]float32)
    tree["a"].(map[string]float32)["b"] = 1.0
    fmt.Println(tree["a"].(map[string]float32)["b"])
} 
```

这按预期工作，因此下一步是将其变成一个例程，该例程将采用“树”、路径和值。我选择了递归方法并想出了这个：

```
func insert(tree map[string]interface{}, path []string, value float32) {
    node := path[0]
    l := len(path)
    switch {
    case l > 1:
        if _, ok := tree[node]; !ok {
            if l > 2 {
                tree[node] = make(map[string]interface{})
            } else {
                tree[node] = make(map[string]float32)
            }
        }
        insert(tree[node], path[1:], value) //recursion
    case l == 1:
        leaf := tree
        leaf[node] = value
    }
} 
```

这就是我想象的例程应该如何结构化，但我无法让标有“递归”的行工作。如果我尝试对`tree[node]`. 这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T15:22:42.410

对于像这样的通用数据结构，Go 可能不是理想的解决方案。类型断言使之成为可能，但操作其中的数据需要您在 python 和其他脚本语言中习惯的更多工作。

关于您的具体问题：您在`insert()`调用中缺少类型断言。的值在那个时候`tree[node]`是类型的。`interface{}`该函数需要 type `map[string]interface{}`。类型断言将解决这个问题。

这是一个工作示例：

```
package main

import "fmt"

type Tree map[string]interface{}

func main() {
    t := make(Tree)
    insert(t, []string{"a", "b"}, 1.0)

    v := t["a"].(Tree)["b"]
    fmt.Printf("%T %v\n", v, v)

    // This prints: float32 1
}

func insert(tree Tree, path []string, value float32) {
    node := path[0]
    len := len(path)

    switch {
    case len == 1:
        tree[node] = value

    case len > 1:
        if _, ok := tree[node]; !ok {
            tree[node] = make(Tree)
        }

        insert(tree[node].(Tree), path[1:], value) //recursion
    }
} 
```

请注意，我为地图创建了一个新类型。这使得代码更容易理解。我还对树节点和叶子使用相同的“map[string]interface{}”。如果你想从结果树中得到一个浮点数，则需要另一个类型断言：

```
leaf := t["a"].(Tree)["b"]  // leaf is of type 'interface{}`.
val := leaf.(float32) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-05T21:23:38.497

好吧...问题是您正在尝试使用 Python 习语编写 Go 代码，并且您正在使用...哈希表制作一棵树？嗯？然后你必须保持键是唯一的并做一堆其他的事情，如果你只是把一组孩子切成薄片，你就可以免费得到那种东西。

我不会让 Tree 成为一个明确的 map[string]interface{}。树和树上的节点实际上是一回事，因为它是递归数据类型。

```
type Tree struct {
    Children []*Tree
    Value    interface{}
}

func NewTree(v interface{}) *Tree {
    return &Tree{
        Children: []*Tree{},
        Value:    v,
    }
} 
```

所以要添加一个孩子...

```
func (t *Tree) AddChild(child interface{}) {
    switch c := child.(type) {
    case *Tree:
        t.Children = append(t.Children, c)
    default:
        t.Children = append(t.Children, NewTree(c))
    }
} 
```

如果你想实现一些递归函数......

```
func (t *Tree) String() string {
    return fmt.Sprint(t.Value)
}

func (t *Tree) PrettyPrint(w io.Writer, prefix string) {
    var inner func(int, *Tree)
    inner = func(depth int, child *Tree) {
        for i := 0; i < depth; i++ {
            io.WriteString(w, prefix)
        }
        io.WriteString(w, child.String()+"\n") // you should really observe the return value here.
        for _, grandchild := range child.Children {
            inner(depth+1, grandchild)
        }
    }
    inner(0, t)
} 
```

类似的东西。任何节点都可以成为某棵树的根，因为子树本身就是一棵树。有关工作示例，请参见此处：[http ://play.golang.org/p/rEx43vOnXN](http://play.golang.org/p/rEx43vOnXN)

那里有一些文章，例如“Python 不是 Java”（http://dirtsimple.org/2004/12/python-is-not-java.html），因此，Go 不是 Python。

# jquery - jQuery关闭加载的div

> ID：10899573
> 
> 赞同：1
> 
> 时间：2012-06-05T14:51:32.043
> 
> 标签：jquery, html, hide

当我单击表格中的表格行时，我在`<div>`调用中从外部 php 页面加载 POST 内容的 div，如下所示：`#ajaxContent``#tblStudents`

```
$("#tblStudents").on("click", "tr", function(e){
var row_id = $("td:first a.ajaxCall", this).attr("rel");
$("#ajaxContent").html("<div id='wait'></div>");
$.ajax({
    url: "/page/editstudent.php",
    data: { 'student_id':row_id },
    success: function(data){
        $("#ajaxContent").html(data);
    }
  });
 }); 
```

现在我想在加载的`#ajaxContent`div 中添加一个关闭按钮。当我在div
之外添加此代码时，它有点工作。`#ajaxContent`它隐藏了 div，但它也让我`$("#tblStudents").on("click", "tr", function(e)`停止工作，直到整个页面刷新......

```
<button id='hide'>Hide</button>

<script>
  $("#hide").click(function(){
  $("#ajaxContent").hide();
 });
</script> 
```

是否可以向我当前的 jQuery 脚本添加关闭函数？并且仍然能够在不刷新页面的情况下切换`#tblStudent`- 表行并加载？`#ajaxContent`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:57:44.897

似乎唯一的问题是，如果单击隐藏按钮，则在单击下一行时没有任何内容可以显示容器。

只需将 show() 方法添加到行单击中的元素即可解决问题

```
 $("#ajaxContent").show().html("<div id='wait'></div>"); 
```

如果它已经可见`show()`不会造成任何问题

# sql-server - 如何在 XCode 上连接/执行对 Microsoft SQL 的查询

> ID：10899574
> 
> 赞同：0
> 
> 时间：2012-06-05T14:51:33.250
> 
> 标签：sql-server, xcode

我是编程新手，对不起。我不是很熟悉一切是如何进行的。

我有这个 Iphone (Xcode) 项目：

他们已经设置了一个 Microsoft SQL 数据库。我需要做的是连接到数据库并通过xcode对其执行查询。

我看过关于 JSON、PHP、MySQL 和其他东西的文章，但我真的很难理解。

提前感谢您的帮助！^^

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T16:52:56.167

我使用以下内容：

```
NSString *querySQL = [NSString stringWithFormat:@"SELECT serialNumber, catalogNumber FROM inventory WHERE partName=\"%@\"", partName.text]; 
```

# php - 在 CodeIgniter 的控制器中管理 div 的最佳方法是什么？

> ID：10899576
> 
> 赞同：0
> 
> 时间：2012-06-05T14:51:37.810
> 
> 标签：php, html, codeigniter

在 codeigniter 中管理我的 /div 变得越来越烦人。

似乎有很多时候我想在一个更包含的 div 下加载多个视图。

我被迫在第一个视图中包含一个打开的 div，在最后一个视图中包含一个关闭的 div，或者，我也尝试创建一个仅用于打开和关闭 div 的视图，以便更容易跟踪。

```
function index($page = '1-home')
{
        /*if (!$this->tank_auth->is_logged_in()) {
                redirect('/auth/login/');
        } else { */
        $this->blurb_model->session_load();
        $data['user_id'] = $this->tank_auth->get_user_id();
        $data['username'] = $this->tank_auth->get_username();
        $data['title'] = ucfirst($page); // Capitalize the first letter
        $data['title'] = $this->page_model->make_title($data['title']);
        $data['page'] = $page;
        //top of page
        $this->load->view('templates/head', $data);
        /* div wrapper */ $this->load->view('templates/wrapper-start', $data);
        $this->load->view('templates/nav', $data);
        $this->load->view('templates/logo');
        $this->load->view('leftbar/create', $data);
        $this->load->view('leftbar/category', $data);
        $this->load->view('leftbar/addfilter', $data);
        $this->load->view('page/board', $data);
        /* div wrapper */ $this->load->view('templates/wrapper-end', $data);
        $this->load->view('templates/footer', $data);

} 
```

有什么我想念的吗？或者更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T15:43:45.533

如何使用以下部分制作通用模板并使用 CSS 设置样式：

1.  头
2.  导航
3.  左/右列
4.  主要内容
5.  页脚

    ```
    <div id="innerWrapper">
        <div id="header">
            <div id="logo"><!-- logo HTML -></div>
            <div id="navigation"><?php echo $navigation; // or navigation html and logic in here ?></div>
        </div>
        <div id="mainbody">
            <div id="leftmenu"><?php echo $leftmenu; ?></div>
            <div id="maincontent"><?php echo $content; ?></div>
        </div>
        <div id="footer">
            <div id="column1"><!-- HTML -></div>
            <div id="column2"><!-- HTML -></div>
        </div>
    </div> 
    ```

然后，您可以按以下方式分配 $leftmenu 和 $content（以及模板中的任何其他变量）：

```
// this assigns the returned HTML to the $content variable in your maintemplate
$data['content'] = $this->load->view('somtetemplate, NULL, TRUE);  

$this->load->view('innerpage', $data);  // this is your main template 
```

那有意义吗？这将有助于更好地组织 IMO。

# extjs - 将非数据绑定行添加到网格

> ID：10899577
> 
> 赞同：0
> 
> 时间：2012-06-05T14:51:38.837
> 
> 标签：extjs, extjs2

这是过去的一次爆炸，但无论如何......

我有一个从商店加载的网格，带有行选择模型和一些按钮等...

```
MyGrid = function(config){
    var config = Ext.apply({},config,{
    cm:'rowselection',
    store:new Ext.data.Store({
        ajax:true,
        url:'someUrl'
    })//thumbsucked config, this is prolly totally wrong
    });

    MyGrid.superclass.constructor.call(this, config);
}
Ext.extend(MyGrid,Extx.grid.GridPanel) 
```

现在我的问题是...

如何在不实际将其添加到商店的情况下向此网格添加一行？

我想这样做，这样我就可以违反列模型（例如，我想添加另一行，其中包含一些文本信息和一个超链接，它不适合我的 4 列宽网格）

我可以将它作为数据视图或其他东西访问吗？

```
this.store.on('load',function(store,records,e){
        doWhat()
        //debugger;
    },this);
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T21:44:41.690

Iamagonnasay no :) 网格有一个明确定义的列模型，并且视图绑定到存储 - 确切地说是存储中的数据。所以......不，您不能在不适合网格中定义的列的网格中插入行。您可以做的是展开单个行的 rowbody 并在行的展开部分插入一些随机 HTML。查找 RowBody 插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T07:59:02.267

Guess you can over write the view, inside the Dom.

```
this.store.on('load',function(store,records,e){
        rowTpl = new Ext.Template(
            '<div class="x-grid3-row x-grid3-row-last">',
                '<table class="x-grid3-row-table" border="0" cellspacing="0" cellpadding="0" style="{tstyle}">',
                    '<tbody><tr>{cellTpl}</tr></tbody>',
                '</table>',
            '</div>'
        );

        cellTpl = new Ext.Template(
            '<td class="x-grid3-col x-grid3-cell x-grid3-td-{id} {css}" style="{style}">',
            '<div class="x-grid3-cell-inner x-grid3-col-{id}"> Hello World</div>',
            "</td>"
        );
        cellTpl.compile();

        html=rowTpl.apply({
            tstyle: 'width:' + this.view.getTotalWidth() + ';',
            cellTpl: cellTpl.compile().html
        });
        Ext.DomHelper.insertHtml('beforeEnd', this.view.mainBody.dom, html);
    },this) 
```

# svn - 分支和标记 SVN

> ID：10899578
> 
> 赞同：0
> 
> 时间：2012-06-05T14:51:39.447
> 
> 标签：svn, tags, branch

我有这个学校维护课程，我们不得不与 SVN 打成一片。我最近为一些主要重构创建了一个分支（也切换到该分支）。当我完成并继续标记分支时，它会自动将我在分支中的内容提交到主干并标记这个最终结果（主干 + 分支的更改）。

我不明白出了什么问题，我想如果我标记了我的分支，我只会得到分支的副本或主干当前版本的副本。相反，我让我的分支与我的更改自动合并，然后为该修订创建了一个标签。

只是想知道是否有人可以解决可能是什么问题，我只是想弄清楚到底发生了什么，或者我是否以错误的方式使用了 SVN。

我已经使用 tortoiseSVN 这样做了，这里是我做的一些步骤：

*   将当前主干的一个分支创建到 /branches 并切换到该分支
*   更改我的分支中的代码
*   创建树干的标签（然后它将我的分支提交到树干中，然后标记）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T18:23:38.807

对于您实际告诉 TortoiseSVN 做什么，仍然存在一些混淆。

我发现您很可能将分支复制到 /trunk 目录而不是 /tags 目录->您的 /trunk 现在与您的分支相同。这可以通过该特定修订的反向合并来纠正，并提交。

通常，日志会告诉您发生了什么。你能从日志中发布一些东西吗？

# asp.net-mvc-3 - 使用图像为提交按钮添加价值

> ID：10899579
> 
> 赞同：1
> 
> 时间：2012-06-05T14:51:44.610
> 
> 标签：asp.net-mvc-3, razor

我有这个问题：
我有一个提交按钮定义如下：

```
 <input  type="submit" name="actionName" value="search" />
 <input  type="submit" name="actionName" value="New" /> 
```

两个提交按钮都包含在 Ajax beginForm 中：

```
@using (Ajax.BeginForm("PFSearch", "Payer", ajaxOptions)) 
```

在控制器中......基于提供的actionName字符串......我根据在我的Ajax befin表单中按下的按钮的值执行不同的操作：

```
if (actionName="search")
{
//do something
} 
```

一切都像一个魅力..直到我想添加我想将图像添加到我的提交按钮的类中：

```
 <input class="search" type="submit" name="actionName" value="search" />
  <input class="search" type="submit" name="actionName" value="New" /> 
```

我的搜索选项卡如下所示：![在此处输入图像描述](../Images/cf45b809d52d3ddc65a71e5eb5f4eda2.png)
您可以清楚地看到我的主要障碍是通过增加价值...文本出现在我的图像上。
**考虑到为按钮赋予价值不起作用，我如何使这些按钮在我的 ajax 开始表单中表现不同？**任何替代方案或解决方法都值得赞赏。谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T15:16:55.227

你能给我们一个你项目演示的链接吗？并尝试使用一些`margin`,`padding`和`background-position:center;`

# javascript - mvc 3 razor 无法使用验证类清除表单值

> ID：10899580
> 
> 赞同：1
> 
> 时间：2012-06-05T14:51:45.543
> 
> 标签：javascript, jquery, .net, asp.net-mvc-3, razor

我正在使用带有 Razor 的 MVC 3 并使用不显眼的客户端验证。一切都很好，但是如果用户决定要重新开始或取消他的操作，我希望能够重置表单。使用验证时，似乎每个表单元素都附加了很多元数据。

```
<input type="text" value="" name="User.FirstName" id="User_FirstName" data-val-required="The First Name field is required." data-val-length-max="50" data-val-length="The field FirstName must be a string with a maximum length of 50." data-val="true" class="text-box single-line"> 
```

这里的 jQuery 片段显示了我的问题。当您尝试手动重置文本字段的值时，在我清除该值并将其设置回原来的值后，其他一些 javascript 正在拦截执行：

```
 $("#btnReset").click(function () {
        alert($("#User_FirstName").val());
        $("#User_FirstName").val("");
        alert($("#User_FirstName").val());
       }); 
```

我在这里寻找有关如何在用户单击按钮时清除表单值的指针。这似乎是一项简单的任务，但我找不到如何完成此任务的文档，而且我在这里或其他地方也找不到任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T15:04:32.120

我使用的是重置类型的 html 输入，而不是按钮类型。在这种情况下不应该使用重置。

# objective-c - klazuka/Kal 或 EventKit 是否处理多个日历？

> ID：10899583
> 
> 赞同：0
> 
> 时间：2012-06-05T14:51:57.507
> 
> 标签：objective-c, ios

我有一个 iPad 应用程序，它需要有多个日历，每个员工一个，一个提供所有员工日历的合并视图。

Kai 或 EventKit 是否支持此要求？如果没有，是否有日历 API 可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T18:36:11.947

Event Kit 执行此操作...假设您有一个名为 myEventStore 的 EKEventStore，请像这样定义日历数组：

```
NSArray *calendarArray = myEventStore.calendars; 
```

并获取这样的事件

```
NSPredicate *fetchAllEvents = [self.myEventStore predicateForEventsWithStartDate:[NSDate distantPast] endDate:[NSDate distantFuture] calendars:calendarArray]; //you can modify this predicate, just keep calendar:calendarArray
NSArray *allEvents = [self.myEventStore eventsMatchingPredicate:fetchAllEvents]; 
```

# datatable - Richfaces dataTable 工作正常，但 ExtendedDataTable 不显示数据

> ID：10899585
> 
> 赞同：4
> 
> 时间：2012-06-05T14:52:09.007
> 
> 标签：datatable, richfaces

我们正在使用 Richfaces 4.1.0，我正在尝试使用扩展数据表。我从 dataTable 开始（为简单起见）。下面的代码工作正常，并按预期在表格中显示我的数据。

```
<rich:dataTable value="#{recipientBean.recipientList}" var="recipient" selectionMode="none" id="recipientTable">
    <rich:column sortable="false" id="col_1" label="Name">
        <f:facet name="header">
            <h:outputText value="Name" id="name" />
        </f:facet>
        <h:outputText value="#{recipient.name}" id="rec_name" />
    </rich:column>
    <!-- More columns below, removed for post brevity -->
</rich:dataTable> 
```

我们期望有大量的记录，所以我们希望表格是可滚动的。我以为我可以将数据表更改为扩展数据表，但是，当我这样做时，根本没有数据显示。

我刚开始检查 Chrome 中的元素，突然间数据出现了。因此，当我检查元素时，我会看到 html 中的值，但在页面加载时它们不会显示。

这可能是风格问题吗？缺少的属性（extendedDataTable 需要，但 dataTable 不需要）？

我还缺少什么？

编辑：我在 Rich:tabPanel 中有这个扩展数据表。当我删除 rich:tabPanel 时，它会正确显示（但我真的需要 tabPanel）。这是一个已知的问题？

EDIT2：如果它位于rich:tabPanel 的第一个选项卡上，它确实显示正确。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T16:47:50.380

我在 joss 网站上发现了一个错误报告。解决方法是在选项卡面板中使用 Ajax 的开关类型而不是客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T11:39:29.700

如果切换到 switchType 后仍然无法正常工作`ajax`，则当您导航到带有rich:extendedDataTable 的页面时，您可以尝试使用重定向而不是转发。为此，您可以例如添加`?redirect-faces=true`到页面 URL。

# c# - 将解析容器传递给已解析的类型

> ID：10899593
> 
> 赞同：2
> 
> 时间：2012-06-05T14:52:27.120
> 
> 标签：c#, .net, unity-container

我正在使用[Unity.MVC3](http://unitymvc3.codeplex.com/)和[Unity.WCF](http://unitywcf.codeplex.com/)。使用这些包，您向父容器注册类型，然后使用子容器创建控制器/服务。使用 a 注册的类型`HierarchicalLifetimeManager`仅限于每个请求一个实例。

我的类将 a`IUnityContainer`作为构造函数参数时遇到了问题。我像这样注册这些。

```
container.RegisterType<IFoo, Foo>(new InjectionConstructor(container)); 
```

这会导致创建 Foo 时引用父容器，而不是子容器。如果我随后解析了一个用 a 注册的类型`HierarchicalLifetimeManager`，我将获得第二个实例。此外，此实例不会与子容器一起处置。

有没有办法注册我的类型，以便它们接收用于解析它们的子容器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T16:35:46.140

如果一个对象具有 IUnityContainer 类型的依赖项，它将自动被解析容器注入。你不需要配置任何东西，它就可以工作。

# windows-phone-7 - 如何分离 Windowsphone 中每个 PanaramaItem 的应用程序栏按钮？

> ID：10899594
> 
> 赞同：1
> 
> 时间：2012-06-05T14:52:28.727
> 
> 标签：windows-phone-7, xaml

我的 Windows Phone 应用程序的 PanaramaPage 中总共有两个 PanaramaItems。我需要在第一个 Panrama 项目中显示两个 ApplicationBarItems，在第二个 PanaramaItem 中显示 3 个应用程序栏项目。有没有什么可以做这个 Xaml 页面...我不想通过后面的代码做任何事情...可以任何一个帮我 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T17:24:31.463

我很确定在这种情况下，您必须以编程方式操作每个 PanoramaItem 的工具栏。如果您不想在后面的代码中执行此操作，并且正在使用 mvvm 框架，那么有一些方法可以在不将 ViewModel 耦合到 View 的情况下执行此操作。您可以创建两个项目都可以访问以操作工具栏的服务。在 Caliburn Micro 中，每个 VM 都有一个对视图的引用，并且可以通过这种方式进行操作。此外，在 CM 中，可以为每个项目在 OnActivate 中创建和触发 IResult。

# function - 属性/字段是否应该始终具有 setter 和 getter 方法，或者您可以将它们组合起来吗？

> ID：10899595
> 
> 赞同：0
> 
> 时间：2012-06-05T14:52:39.727
> 
> 标签：function, object, architecture, methods

如果我有一个带有属性/字段“firstName”和“lastName”的用户对象。最好使用 firstName 和 lastName getter/setter 设置和获取每个字段，还是可以接受简单的“name”getter/setter？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T15:28:57.767

这在很大程度上取决于您计划在哪种语言中使用这些变量。在访问器 (gets) 和修改器 (sets) 是手工写出并且本身不存在的语言中，有许多方法可以处理这些函数.

**公共变量**通常不受欢迎，但可以直接访问使用和更改值。人们可以支持或反对公共和受保护的变量，但 OOP 中的普遍共识是您应该将数据留给自己。由于您已经提到了 get/set，我们假设您不会这样做。

访问变量的另一种方法是**返回引用**，但与第一个示例一样，您的里程可能会有所不同。提供直接访问有很多责任，其中很多责任直接落在了用户的肩上。如果您打算让除您自己以外的其他人使用该课程，那么授予他们这样的访问权限并不是特别安全。

标准**`getName()`**和**`setName()`函数**是处理它的最简单方法，并提供一种无需更改界面即可轻松更新的格式。一旦你的程序大小合适，重构界面更改可能会成为一场噩梦。这条路线允许您在不更改代码中任何其他内容的情况下执行功能。

在支持它的语言中，您可以编写**重载函数**，这些函数将根据语法决定是要检索数据还是更改数据。这遵循与标准 get/set 相同的基本思想，但是调用语法更类似于`user.name("Joebob Peoplesmith")`or `name = user.name()`。解决这个问题的方式因语言而异，能力也是如此。

最后，某些语言对以特定方式声明的变量具有**内置访问权限。**一个很好的例子是 Objective-C 的`property`，它可以与一个私有变量合成，以便作为一个 get/set 接口直接访问。在这种格式中，要访问`NSString *m_pFirstName`，您可以创建`@property NSString *firstName`然后`@synthesize firstName = m_pFirstName`. get/set 被隐式处理，`user.firstName`就好像它是一个局部变量一样。

至于结合您的名字和姓氏，这是个人选择，应该根据您是否想要/需要单独更改任何内容来决定。问你自己：

*   我是否只需要更改名字或姓氏？
*   我是否只需要访问名字或姓氏？
*   我如何计划返回 firstName + lastName？（一个数组？一个组合字符串？）
*   谁将使用这些功能？（其他开发人员？其他类？）
*   这对新手来说是不言自明的吗？（易于理解？易于使用？“万无一失”？）
*   有没有可以帮助我的数据结构？

总体而言，您需要根据语言限制研究您的选择，并在做出决定之前计划您将如何使用变量。尽可能避免重构中期开发。希望这可以帮助！

# regex - 正则表达式拆分和删除数据

> ID：10899596
> 
> 赞同：1
> 
> 时间：2012-06-05T14:52:41.723
> 
> 标签：regex

我不是正则表达式的专家，这个问题听起来很简单。我有一个包含数千列的制表符分隔文件，每列中的值就像 2345:0 或 123:1

我想删除“：”之前的所有内容，只保留 1 或 0

例如，谁能指出我可以使用的正确正则表达式？

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:54:59.333

类似以下内容将捕获冒号后的值（假设为单个数字）：

```
/\d+\:(\d)/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T14:55:14.480

听起来在您的情况下，只需简单地替换为`\d+:`空字符串即可。

如何完成取决于您的工具。使用 Perl，您可以：

```
perl -pe 's/\d+://g' file 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T15:00:43.607

这将处理您的选项卡并在冒号后捕获一个数字：

```
\s*\d+:(\d) 
```

# oracle - 如何修改sql plus中的约束？

> ID：10899598
> 
> 赞同：1
> 
> 时间：2012-06-05T14:52:44.580
> 
> 标签：oracle, oracle11g, sqlplus

我创建了一个表，如下所示：

```
create table emp( emp_id number(5) primary key
                , emp_name varchar(20) not null
                , dob date ); 
```

创建表后，如何将约束更改为`not null`SQL `unique`*Plus 中的任何其他约束？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T14:57:20.257

您不会将约束从一种类型更改为另一种类型。您可以向表中添加唯一约束

```
ALTER TABLE emp 
  ADD ( COSTRAINT uk_emp_name UNIQUE( emp_name ) ); 
```

这与是否`emp_name`允许具有`NULL`值无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T14:56:37.877

只需使用`ALTER TABLE`命令。详情请看这里：[http ://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_3001.htm#i2103817](http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_3001.htm#i2103817)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-17T06:19:12.107

我们无法修改已经添加的约束。只是我们必须删除约束并添加具有相同名称的新约束，但添加它并进行必要的更改。

```
ALTER TABLE  table_name drop constraint contraint_name;

alter table tablename add constraint containt_name CHECK (column_name IN (changes in the contraint)) ENABLE; 
```

# haskell - 导入单子状态

> ID：10899602
> 
> 赞同：2
> 
> 时间：2012-06-05T14:52:54.327
> 
> 标签：haskell, ghci

我正在尝试导入单子状态。我做了以下命令：

```
:m Control.Monad.State 
```

但是找不到该模块。我正在使用`GHCi, version 7.0.4:`.

你能给我一些提示来解决这个问题吗？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T14:55:42.617

你错过[了`mtl`包裹](http://hackage.haskell.org/package/mtl)。

您可以自己从 Hackage 安装它；或者安装[Haskell Platform](http://haskell.org/platform)，它带有必要的库。

# javascript - 具有功能分组的主干.js 中的高级路由

> ID：10899604
> 
> 赞同：1
> 
> 时间：2012-06-05T14:53:00.897
> 
> 标签：javascript, backbone.js, routes

这是我的路线结构的示例：

```
路线：{
 "*actions" : "defaultHandler", //一些默认处理程序
 //所有页面的处理程序
 “第 1 页”：“第 1 页”，
 . . . . . . . . . .
 "PageN" : "PageN",

 //现在我有一个模块，它有自己的页面，它的路由看起来很相似：
 “模块/Page01”：“Page01”，
 . . . . . . . . . .
 “模块/PageNN”：“PageNN”，

 /* 现在我必须为所有导航做一些任务
    到模块，我正在尝试这样做：*/

 “模块/*路径”：“模块处理程序”

  /* 并且它不起作用，因为在这种情况下导航，例如
     到页面“Module/Page01”只有 moduleHandler 响应，而不是 Page01 处理程序 */
}

```

像那样。我需要两个处理程序都做出响应。在文档中找不到任何技巧

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T16:31:59.477

你需要这样的东西：[https](https://github.com/FLOChip/backbone_router_filter) ://github.com/FLOChip/backbone_router_filter 但是，当然，这只是一个例子，你应该实现依赖于路由的过滤。如果您遇到困难，请随时询问。

**更新**：我刚刚发现：[https](https://github.com/angelo0000/backbone_filters) ://github.com/angelo0000/backbone_filters 。如果我明白这正是你想要的。

```
var R = Backbone.Router.extend({
    routes: {
        "page1": "page1",
        "pageN": "pageN",
        "module/page01": "page01",
        "module/pageNN": "pageNN",
        "*actions" : "defaultHandler"
    },

    before: {
        '^module/': 'moduleFilter'
    }
    //...
 }); 
```

# python - main.py 抛出“ImportError：没有名为 app 的模块”

> ID：10899611
> 
> 赞同：2
> 
> 时间：2012-06-05T14:53:26.370
> 
> 标签：python, google-app-engine

我的应用程序的根目录中有一个名为 main.py 的文件。此文件包含启动应用程序的代码：

```
app = webapp2.WSGIApplication(routes = routes, debug = True, config = config)

def main():
  app.run()

if __name__ == '__main__':
  main() 
```

除其他外，我在 app.yaml 中有这个：

```
- url: /.*
  script: main.app 
```

升级到 1.6.6 SDK 后，出现以下错误：

```
ERROR    2012-06-05 13:39:01,856 wsgi.py:189] 
Traceback (most recent call last):
File "/Users/jdoe/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/runtime/wsgi.py", line 187, in Handle
handler = _config_handle.add_wsgi_middleware(self._LoadHandler())
File "/Users/jdoe/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/runtime/wsgi.py", line 236, in _LoadHandler
__import__(cumulative_path)
ImportError: No module named app 
```

如果我将 main.py 重命名为 main.py 以外的任何其他内容并相应地更新 app.yaml，此错误就会消失，我可以运行该应用程序。

为什么我不能再将我的主要例程放在名为 main.py 的文件中？在 App Engine SDK 下载页面上，他们说他们现在在 SDK 中包含 Python 2.7 的实验版本，这可能与我遇到的问题有关吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-01T10:22:30.923

我的评论作为答案：

自己解决了这个问题。在 main.py 所在的同一目录中，我创建了一个也称为 main 的包。在 app.yaml 中，我指定查看 main.app。似乎如果一个名为 main 的包与 main.py 存在于同一目录中，Python 会在包内查找名为 app 的模块。但是如果不存在名为 main 的包，它会愉快地在 main.py 中查找。

# c# - 动态对象 - 如何判断属性是否已定义？

> ID：10899613
> 
> 赞同：6
> 
> 时间：2012-06-05T14:53:38.360
> 
> 标签：c#, dynamic

我有一个动态对象，如下所示：

```
this.ChartDetails.Chart 
```

“图表”是动态的。我想查看 Chart 上是否存在名为 LeftYAxis 的动态属性。在动态对象上执行此操作的最佳方法是什么？

我不认为这是[如何检测 ExpandoObject 上是否存在属性的副本？](https://stackoverflow.com/questions/2839598/how-to-detect-if-a-property-exists-on-a-dynamic-object-in-c)因为它没有讨论对动态对象执行此操作的最佳方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-03-03T20:50:29.833

出于各种原因，最好避免控制流的 try/catch 块。因此，虽然克里斯托弗的方法达到了预期的结果，但我发现这更可取：

```
this.ChartDetails.Chart.GetType().GetProperty("LeftYAxis") != null; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-05T15:08:09.150

```
bool isDefined = false;
object axis = null;
try
{
    axis = this.ChartDetails.Chart.LeftYAxis;
    isDefined = true;
}
catch(RuntimeBinderException)
{ } 
```

这首先是在运行时发生的。（当您访问一个属性时，“动态”部分仅在对象覆盖`DynamicObject`'s`TryGetMember`和`TrySetMember`

有些对象（如`ExpandoObject`）实际上是引擎盖下的字典，您可以按如下方式直接检查它们：

```
bool isDefined = ((IDictionary<string, object>)this.ChartDetails.Chart)
    .ContainsKey("LeftYAxis"); 
```

基本上：在不知道*实际*类型`ChartDetails.Chart`是什么的情况下（如果它是`ExpandoObject`一个普通的 ol' 子类`object`或 的子类`DynamicObject`），除了上面的 try/catch 之外别无他法。如果您为源代码编写了代码`ChartDetails`并且`Chart`/或者可以访问源代码，您可以确定对象存在哪些方法并使用这些方法进行检查。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-24T04:41:12.277

如果动态对象是 json/开放标准格式，则此方法有效。

我制作了两种不同的方法助手，一种用于开放标准格式，一种用于“标准对象”。

```
 // Checks if object typed json or xml has a specific property
    public static bool IsPropertyExistsOpenStandardFormat(dynamic dynamicObject, string propertyName)
    {
        try
        {
            var x = dynamicObject[propertyName];
            if (x != null)
                return true;
        }
        catch 
        {
            return false;
        }

    }

    // Checks if standard object has a specific property
    public static bool IsPropertyExistsStandard(dynamic dynamicObject, string propertyName)
    {
        return dynamicObject.GetType().GetProperty(propertyName) != null;
    } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-06-30T12:18:49.240

这个正在工作-：

```
public static bool IsPropertyExists(dynamic dynamicObj, string property)
       {
           try
           {
               var value=dynamicObj[property].Value;
               return true;
           }
           catch (RuntimeBinderException)
           {

               return false;
           }

       } 
```

# c - 在 64 位机器上编译 tcpsplice

> ID：10899616
> 
> 赞同：0
> 
> 时间：2012-06-05T14:53:44.077
> 
> 标签：c, linux, rhel

我正在尝试编译一个名为[tcpslice](ftp://ftp.ee.lbl.gov/tcpslice.tar.gz)的小实用程序。这是典型的 GNU C 应用程序。当我运行时`./configure`，这是输出：

```
检查构建系统类型...无效配置“x86_64-pc-linux-gnuoldld”：机器“x86_64-pc”无法识别
配置：错误：/bin/sh ./config.sub x86_64-pc-linux-gnuoldld 失败

```

它似乎不支持编译为 64 位 Linux 应用程序。所以我有几个问题：

1.  是否可以设置一些标志来将应用程序编译为 32 位并能够在我的 64 位操作系统上运行它？
2.  是否可以更新配置脚本以支持 64 位 Linux？如果是这样，我是否也会在 .c 文件中进行一些严重的代码更改？
3.  我注意到我网络上的一台 64 位 RHEL6 机器安装了该实用程序，并以相同的版本号 (1.2a3) 运行。我可以以某种方式下载用于构建它的源代码吗？如有必要，我可以访问 RHN。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T14:58:19.623

> 是否可以设置一些标志来将应用程序编译为 32 位并能够在我的 64 位操作系统上运行它？

是的。[-m32](http://www.cyberciti.biz/tips/compile-32bit-application-using-gcc-64-bit-linux.html)是选项。

> 是否可以更新配置脚本以支持 64 位 Linux？如果是这样，我是否也会在 .c 文件中进行一些严重的代码更改？

您必须进行一些代码更改才能使纯 32 位应用程序在 64 位上运行。这是一个讨论将代码从 32 位移植到 64 位的[链接。](http://www.softwarequalityconnection.com/2011/01/10-biggest-issues-for-developers-migrating-32-bit-applications-to-64-bits/)

对不起，我不知道你第三个问题的答案。

希望我提供的小信息能在某种程度上有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T12:11:03.367

您误解了`configure`脚本告诉您的内容。该解决方案与 CPU 位数无关。

错误归结为 的版本太旧`config.guess`，包创建者使用`libtoolize`. 要修复它，您需要`libtool`安装，然后说：

```
$ libtoolize --force 
```

您会发现它`configure`现在可以运行了，因为用适合您系统`libtoolize`的版本覆盖了 tarball 版本。`config.guess`

您可能会遇到另一个问题，即“丢失”`bpf.h`文件。只需编辑`tcpslice.c`和更改这一行：

```
#include <net/bpf.h> 
```

至：

```
#include <pcap-bpf.h> 
```

通过这两项更改，我必须`tcpslice`在我的 64 位 CentOS 5 机器上进行构建。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T15:09:00.257

安装以下软件包：

```
 $apt-get install ia32-libs. 
```

对于 rhel 它的不同：

看看这个问题的答案：

[CentOS 64 位坏 ELF 解释器](https://stackoverflow.com/questions/8328250/centos-64-bit-bad-elf-interpreter)

# php - 我需要帮助让 recaptcha 工作

> ID：10899620
> 
> 赞同：0
> 
> 时间：2012-06-05T14:53:54.310
> 
> 标签：php, security, captcha

我最近有一个为我设计的网站，但我的开发人员使用了一个非常糟糕的通用验证码，一半时间都失败了。我正在尝试使用 recaptcha 替换它，但我遇到了麻烦。我无法弄清楚哪个 *.php 用于“处理”，哪个用于“表单”。

我不想发布整个代码，所以这里是：

这是“表单”页面，因为它嵌入了表单字段等：http: [//dl.dropbox.com/u/45666699/formcode.txt](http://dl.dropbox.com/u/45666699/formcode.txt)

有人可以看看这段代码并告诉我应该将私人代码放在哪里进行recaptcha？另外，如何禁用已安装的“random_number”验证码？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T15:01:35.800

您现有验证码的代码已上线`295, 296 and 297`

```
require_once('recaptchalib.php');
$publickey = "6LfIUdISAAAAAKguxgdPCjZ6-OkVeu5tmcBaa7ug"; // you got this from the signup page
echo recaptcha_get_html($publickey); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T15:39:55.113

好吧，当您尝试验证是否输入了正确的验证码时（即在您处理表单提交时），您将需要私钥

通过查看您的代码应该立即开始`line 4`

使用我不久前做的一个项目，你会有类似的东西......

```
$recaptcha_error = NULL;
//set it to NULL initially
if(isset($_POST["btnsend"])){
    include_once(INCLUDES_FOLDER."recaptcha-php-1.11/recaptchalib.php");
    $resp = recaptcha_check_answer(RECAPTCHA_PRIVATE_KEY,$_SERVER["REMOTE_ADDR"],$_POST["recaptcha_challenge_field"],$_POST["recaptcha_response_field"]);
    if($resp->is_valid){
        //captch was gotten correctly
        //continue with your normal code processing here
    } else {
        //wrong input -- captch was invalid -- give the person the error response
        //mine is as below -- my usual way :)
        $response = array(array("Something seems to be wrong with the captcha!","Please check that you entered it correctly or check the returned error message"),false,"w");
        $recaptcha_error = $resp->error;
        //make sure to do the above so u can use it when generating the captcha display
    }
}

//You got the recaptch error (or left it as NULL above so you could do this)
//when generating your captch display as done on your lines 295, 296, 297
include_once(INCLUDES_FOLDER."recaptcha-php-1.11/recaptchalib.php");
echo recaptcha_get_html(RECAPTCHA_PUBLIC_KEY,$recaptcha_error); 
```

希望这会有所帮助（即使有点）:)
干杯

# perl - Perl while 循环和读取行

> ID：10899621
> 
> 赞同：-1
> 
> 时间：2012-06-05T14:54:02.200
> 
> 标签：perl, diff

每条记录有 4 行：

如下所示：

```
@NCYC361­11a03.q1k bases 1 to 1576
GCGTGCCCGAAAAAATGCTTTTGGAGCCGCGCGTGAAAT
+
!)))))****(((***%%((((*(((+,**(((+**+,­ 
```

有两个文件，其中一个文件对应另一个

有一个序列数组 A1 所以从文件 1 一次读取 1 条记录。从文件 2 中读取记录。如果记录 1 文件 1（第 2 行）中的序列与数组 A1 中的序列匹配，我从文件中打印记录2到一个输出文件等等......但重点是我需要一次读取一条记录......我将如何打破内部循环，以便我可以从文件1中读取下一条记录，然后将其与文件 2 中的下一条记录进行比较

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T15:02:45.413

如果您询问控制嵌套循环，您可以使用标签来做到这一点。

例子：

```
OUTER:
while(<>){
    for(@something){
        last OUTER;
    }
} 
```

[`last`](http://perldoc.perl.org/functions/last.html)例如参见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T15:05:29.373

如果只有相同编号的行可以匹配，您实际上不需要多个循环。您可以在任何地方调用读取操作 ( `<>`, `read`, `sysread`)。它通常只直接放在循环中，因为它方便地返回 undef 并在工作完成时中断它。

```
while(defined(my $first_line = <FIRST>)){
   my $second_line = <SECOND>;
   if($first_line eq $second_line){
      print "match\n";
   } else {
      print "no match\n";
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T15:08:01.413

从你的句子*中，我需要检查序列是否与*我收集到的第二个序列中的序列匹配，你想检查两个文件中的*任何*行是否匹配？

如果您需要多次阅读一个文件，那么您可以使用`seek`它倒退到它的开头，而无需重新打开它。

这个程序显示了这个想法。

```
use strict;
use warnings;

open my $fh1, '<', 'file1' or die $!;
open my $fh2, '<', 'file2' or die $!;

open my $out, '>', 'matches' or die $!;

while (my $line1 = <$fh1>) {

  seek $fh2, 0, 0;

  while (my $line2 = <$fh2>) {

    if ($line1 eq $line2) {
      print $out $line1;
      last;
    }
  }
} 
```

* * *

**编辑**

你的评论改变了问题。两个文件都有四行记录，您想比较两个文件对应记录中的第二行。

```
use strict;
use warnings;

open my $fh1, '<', 'file1' or die $!;
open my $fh2, '<', 'file2' or die $!;

open my $match, '>', 'matches' or die $!;
open my $nomatch, '>', 'nomatch' or die $!;

while (1) {

  my (@data1, @data2);

  for (1 .. 4) {
    my $line;
    $line = <$fh1>;
    push @data1, $line if defined $line;
    $line = <$fh2>;
    push @data2, $line if defined $line;
  }

  last unless @data1 == 4 and @data2 == 4;

  if ($data1[1] eq $data2[1]) {
    print $match @data2;
  }
  else {
    print $nomatch @data2;
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T15:04:08.950

一个完整的例子：

```
#!/usr/bin/env perl
use strict;
use warnings;

open F1, "<", "/path/1";
open F2, "<", "/path/2";

@a1 = <F1>;
@a2 = <F2>;

for (0..$#a1) {
    if ($a1[$_] eq $a2[$_]) {
        print "MATCH line [$_]\n";
    } else {
        print "DOESN'T MATCH line [$_]\n";
    }
} 
```

# c - opengl 渲染到纹理只看到一个黑色区域

> ID：10899623
> 
> 赞同：1
> 
> 时间：2012-06-05T14:54:07.907
> 
> 标签：c, opengl, glsl, shader

我在 OpenGL 中遇到了一些麻烦，使渲染到纹理示例工作。在初始化时，我生成一个带有随机绿色和黑色值的纹理“randtex”。如果我将此纹理直接渲染到窗口（映射到四边形），它工作得很好。像这样： ![直接显示纹理](../Images/fa85424848625278ce0732cdb038ddd6.png)

但是，如果我将“randtex”渲染到附加到帧缓冲区对象的另一个纹理“tex”中，那么在屏幕上渲染“tex”只会在 fbo 的蓝色背景上给我一个黑色图像，据我所知它应该给我蓝色背景上的原始纹理。换句话说，这就是我得到的 ![黑色区域应该是绿色和黑色纹理](../Images/83ce2257009921f7aa93f7808d6ba8da.png)

仅用于显示的顶点着色器 (display_shaderp)。

```
#version 420
in vec4 pos;
in vec2 tex_coord;
out vec2 vtex_coord;
uniform mat4 projection;
uniform mat4 modelview;
void main(){
gl_Position = projection * modelview * pos;
    vtex_coord = tex_coord;
} 
```

仅用于显示的片段着色器 (display_shaderp)

```
#version 420
in vec2 vtex_coord;
uniform sampler2D tex;
out vec4 color;
void main(){
    color = texture2D(tex, vtex_coord);
    //color = vec4(1.0f, 1.0f, 1.0f, 1.0f);
} 
```

着色器程序编译和链接正常，我没有得到 gl 错误，并且帧缓冲区也完整无错误。这是渲染代码：

```
glClearColor(0.5, 0.5, 0.5, 1.0);
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
glViewport(0, 0, win_width, win_height);
glMatrixMode(GL_PROJECTION);
glLoadIdentity();
gluPerspective(60.0f, (GLfloat)win_width / (GLfloat) win_height, 0.1f, 50.0f);
glMatrixMode(GL_MODELVIEW);
glLoadIdentity();
glTranslate3f(0.0f, 0.0f, -3.0f)

// render to texture
glBindFramebuffer(GL_FRAMEBUFFER, fbo);
glViewport(0,0, win_width, win_height);
glClearColor(0.0, 0.0, 0.5, 1.0);
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
glUseProgram(fbo_shaderp);
GLfloat m_matrix[16], p_matrix[16];
glGetFloatv(GL_MODELVIEW_MATRIX, m_matrix); 
glGetFloatv(GL_PROJECTION_MATRIX, p_matrix);
glUniformMatrix4fv(glGetUniformLocation(fbo_shaderp, "modelview"),1,GL_FALSE,m_matrix);
glUniformMatrix4fv(glGetUniformLocation(fbo_shaderp, "projection"),1,GL_FALSE,p_matrix);
glActiveTexture(GL_TEXTURE0);
glBindTexture(GL_TEXTURE_2D, randtex);
glUniform1i(glGetUniformLocation(fbo_shaderp, "tex"), randtex);
GLuint _p = glGetAttribLocation(fbo_shaderp, "pos");
GLuint _t = glGetAttribLocation(fbo_shaderp, "tex_coord");
glVertexAttribPointer(_p, 3, GL_FLOAT,  GL_FALSE, 5 * sizeof(GLfloat), 0);
glVertexAttribPointer(_t, 2, GL_FLOAT,  GL_FALSE, 5 * sizeof(GLfloat), (GLvoid*)(sizeof(float)*3));
glEnableVertexAttribArray(_p);
glEnableVertexAttribArray(_t);
glDrawElements(GL_TRIANGLES, 6, GL_UNSIGNED_BYTE, 0);
glUseProgram(0);    
glBindFramebuffer(GL_FRAMEBUFFER, 0);

    // render to the window
glBindFramebuffer(GL_FRAMEBUFFER, 0);
glViewport(0,0, win_width, win_height);
glClearColor(0.5, 0.5, 0.5, 1.0);
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
glUseProgram(display_shaderp);
glUniformMatrix4fv(glGetUniformLocation(display_shaderp,"modelview"),1,GL_FALSE,m_matrix);
glUniformMatrix4fv(glGetUniformLocation(display_shaderp,"projection"),1,GL_FALSE,p_matrix);
glActiveTexture(GL_TEXTURE0); 
glBindTexture(GL_TEXTURE_2D, tex); 
glUniform1i(glGetUniformLocation(display_shaderp, "tex"), 0);
GLuint _p = glGetAttribLocation(display_shaderp, "pos");
GLuint _t = glGetAttribLocation(display_shaderp, "tex_coord");
glVertexAttribPointer ( _p, 3, GL_FLOAT, GL_FALSE, 5 * sizeof(GLfloat), 0 );
glVertexAttribPointer ( _t, 2, GL_FLOAT, GL_FALSE, 5 * sizeof(GLfloat), (GLvoid*) (sizeof(float) * 3) );
glEnableVertexAttribArray(_p);
glEnableVertexAttribArray(_t);
glDrawElements(GL_TRIANGLES, 6, GL_UNSIGNED_BYTE, 0);
glUseProgram(0); 
```

以及创建纹理和帧缓冲区的代码

```
int i = 0;
// create a random texture 'randtex'
glGenTextures(1, &randtex);
glBindTexture(GL_TEXTURE_2D, randtex);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
// random data
GLubyte* data = (GLubyte *) malloc(width*height*4*sizeof(GLubyte));
GLubyte val;
for (i = 0; i < width * height * 4; i+=4){
    if ((double)rand()/(double)RAND_MAX > 0.8)
        val = 255;
    else
        val = 0;
    data[i]   = 0;
    data[i+1] = val;
    data[i+2] = 0;
    data[i+3] = 255;
}
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, width, height, 0, GL_RGBA,GL_UNSIGNED_BYTE, data);
// create an empty texture 'tex'
glGenTextures(1, &tex);
glBindTexture(GL_TEXTURE_2D, tex);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, width, height, 0, GL_RGBA,GL_UNSIGNED_BYTE, 0);
// create framebuffer and attach 'tex'
glGenFramebuffers(1, &fbo);
glBindFramebuffer(GL_FRAMEBUFFER, fbo);
glFramebufferTexture2D(GL_FRAMEBUFFER,GL_COLOR_ATTACHMENT0,GL_TEXTURE_2D, tex, 0);
GLenum status;
if ((status = glCheckFramebufferStatus(GL_FRAMEBUFFER)) != GL_FRAMEBUFFER_COMPLETE)
    fprintf(stderr, "glCheckFramebufferStatus: error %p", status); 
```

用于渲染到纹理的着色器 (fbo_shaderp)

渲染到纹理顶点着色器

```
in vec4 pos;
in vec2 tex_coord;
out vec2 vtex_coord;
uniform mat4 projection;
uniform mat4 modelview;
void main(){
    gl_Position = projection * modelview * pos;
    vtex_coord = tex_coord;
} 
```

渲染到纹理片段着色器

```
#version 420
in vec2 vtex_coord;
layout(location = 0) out vec4 color;
uniform sampler2D tex;

void main(){
color = texture2D(tex, vtex_coord);
//color = vec4(1.0f, 1.0f, 1.0f, 1.0f);
} 
```

在最后一个着色器中，如果我使用注释线将所有白色绘制并注释掉纹理之一，我会得到一个白色图像，但在渲染到纹理“OpenGL 错误：无效值”后立即出现 opengl 错误，所以这实际上让我感到困惑更多的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T16:40:56.843

```
glUniform1i(glGetUniformLocation(fbo_shaderp, "tex"), randtex); 
```

您不能提供纹理的 ID，而是将纹理绑定到的插槽。所以在你的情况下，那应该是

```
glUniform1i(glGetUniformLocation(fbo_shaderp, "tex"), 0); 
```

# javascript - 单击选择菜单时显示 div 而不显示下拉 Javascript

> ID：10899631
> 
> 赞同：0
> 
> 时间：2012-06-05T14:54:35.077
> 
> 标签：javascript, html, css, javascript-events

我必须使用 javascript 制作自定义下拉菜单。单击带有选项的选择框下拉菜单时，我需要自定义该菜单的外观。

我的方法是有一个 div，其中包含选项和所需的样式，当用户单击选择菜单时，div 应该出现而不是显示下拉菜单。

我尝试使用 onclick() 事件，但下拉菜单先出现，然后 div 出现。这无济于事。

请建议我如何达到这样的要求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T15:04:06.063

也许你可以隐藏选项？

```
option { display: none; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T15:07:31.313

为什么不完全用您自己的 DIV 完全替换？

# javascript - Jquery 让 div 总是滚动到底部

> ID：10899632
> 
> 赞同：2
> 
> 时间：2012-06-05T14:54:45.937
> 
> 标签：javascript, jquery, scroll

我有一个包含表格的 div。该表是动态更新的，并在用户使用我们的网站时填充数据。是否可以强制此 div 始终滚动到底部？这样用户将始终能够看到添加的最底部的表格行。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T15:10:42.533

那会是这样的

```
...onRowAdded = function() {
    $('#myTable').animate({scrollTop: $('#myTable').attr('scrollHeight')});
}; 
```

请注意，如果经常添加行，您可能希望在开始时使用 setTimeout 和阻塞变量检查，以防止向下滚动的频率超过每秒两次左右。例如[这里讨论了这种技术](https://stackoverflow.com/questions/9613594/scroll-event-firing-too-many-times-i-only-want-it-to-fire-a-maximum-of-say-on)

更新

从 jQuery 1.6 开始，最好使用 .prop() 而不是 .attr() （请参阅对此问题的评论）：

```
onRowAdded = function() {
    $('#myTable').animate({scrollTop: $('#myTable').prop('scrollHeight')});
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T15:13:56.510

将更新元素设置为绝对位置和底部：0

演示[http://jsfiddle.net/Mdzmx/](http://jsfiddle.net/Mdzmx/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-05T15:24:10.577

尝试类似的东西：

创建一个像这样的锚`<a id='bottomDiv'></a>`并插入一个像这样的javascript`document.getElementById('bottomOfDiv').scrollIntoView(true);`

我在这里做了一个例子 [http://jsfiddle.net/PTmpL/1/](http://jsfiddle.net/PTmpL/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T15:05:26.343

按照本教程

[http://jqueryfordesigners.com/fixed-floating-elements/](http://jqueryfordesigners.com/fixed-floating-elements/)

但使用`bottom`css 属性使最底部的元素在页面上可见

`element{ bottom:0; }`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-05T15:13:08.757

我建议使用[ScrollTo JQuery 插件](http://archive.plugins.jquery.com/project/ScrollTo)。只需使用

```
element.scrollTo('max', {axis: 'y'}); 
```

或者

```
element.scrollTo('max', duration, {axis: 'y'}); 
```

这个插件有一个很好的平滑滚动的额外好处。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-02T19:44:59.817

我认为这可能是一个简单的解决方案！

```
element.scrollTo(element.get(0).scrollHeight); 
```

# tinymce - TinyMCE 转义了一些特殊字符

> ID：10899633
> 
> 赞同：0
> 
> 时间：2012-06-05T14:54:46.357
> 
> 标签：tinymce

例如，当我使用 tinyMCE 编写此 HTML 时：

```
<p>asdasd</p>
<p class="relevant">asd</p>
<p>as</p> 
```

接收表单 post 的 php 打印下一个：

```
<p>asdasd</p>
<p class=\"relevant\">asd</p>
<p>as</p> 
```

如何关闭这种行为？

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T03:46:50.117

这很可能是由于 PHP 中的 MagicQuotes 功能造成的，[TinyMCE FAQ](http://www.tinymce.com/wiki.php/TinyMCE_FAQ#HTML_output_include_lots_of_.5C.22_like_.3Ca_href.3D.5C.22mylink.htm.5C.22.3Elink.3C.2Fa.3E.3F)中对此进行了介绍。

处理这个问题的最简单方法是禁用该功能，尤其是在 PHP 5.3.0 已弃用它时

另一种方法是使用清理结果

```
stripslashes($_POST['text']); 
```

# javascript - Javascript 在第一次点击时不起作用 - Openlayers

> ID：10899634
> 
> 赞同：1
> 
> 时间：2012-06-05T14:54:46.760
> 
> 标签：javascript, jquery, openlayers

我有这个 Javascript，它通过 Openlayers 显示地图并在地图上用文本绘制点。出于某种原因，文本图层在第一次单击时不起作用。[这](http://albedo.csrcdev.com/map)是该网站的链接。这也是我第一个使用 Javascript 的项目，如果有任何帮助，我将不胜感激。

谢谢！

代码：

```
//---------------------------------------------------------------------
// creates a filtered point vector layer, the base of the text layer 
// and also genetates a table
//
function createVector( ajaxUrl ) {

    console.log( ajaxUrl );

    //remove all the layers except the base (google) layers
    while( map.layers.length > 4 )
    map.removeLayer(map.layers[map.layers.length - 1]);

    var date = $('#datepicker').val();
    var filter = $('input:radio[name=filter]:checked').val();

    //json, ajax, and kml urls 
    var jsonUrl = "/map/desc/";
    var url = "/map/test-";
    url += date;
    jsonUrl += date;
    url += "/"+filter;
    jsonUrl += "/"+filter;
    url += ".kml"

    //create a new layer for the points
    points = new OpenLayers.Layer.Vector("Albedo Data Points", {
        strategies: [new OpenLayers.Strategy.Fixed()],
        protocol: new OpenLayers.Protocol.HTTP({
            url: url,
            format: new OpenLayers.Format.KML({
                extractStyles: true,
                extractAttributes: true
            })
    }),
    });

    //create a style map layer for the text. Empty at this point
    text = new OpenLayers.Layer.Vector("Text Layer", {
     styleMap: new OpenLayers.StyleMap({'default':{
                pointerEvents: "visiblePainted",

                label : "${val}",
                fontColor: "${color}",
                fontSize: "12px",
                fontFamily: "Courier New, monospace",
                fontWeight: "bold",
                labelAlign: "${align}",
                labelXOffset: "${xOffset}",
                labelYOffset: "${yOffset}",
                labelOutlineColor: "white",
                labelOutlineWidth: 3

    } }),
    });

    //get the json from the model
    $.getJSON(jsonUrl, function(json, textStatus, jqXHR) {
    data = json;
    });

    //load this function after the map has been processed
    points.events.register( 'loadend', points, function (e) {   
    addTextLayer( filter );
    });     

    //add all the layers to the map
    map.addLayers( [points, text] );

    //and the control
    selectControl = new OpenLayers.Control.SelectFeature(points);
    map.addControl(selectControl);
    selectControl.activate();
    points.events.on({
        'featureselected': onFeatureSelect,
        'featureunselected': onFeatureUnselect
    });

    //generate the table
    ajaxUrl += '?q=';
    $( '#results' ).html( '&nbsp;' ).load( ajaxUrl + date );
}

//---------------------------------------------------------------------
// loops through the points layer to grab the coordiantes, and
// adds features to the text layer 
//
function addTextLayer( filter ) {

    for( var i = 0; i < points.features.length; i++ ) {

    var value;

    if( filter == "albedo" )
        value = data[i].fields.albedo;
    else
        value = data[i].fields.snow_Density;

        var temp = new OpenLayers.Geometry.Point(
        points.features[i].geometry.x, 
        points.features[i].geometry.y 
    );

    var textFeature = new OpenLayers.Feature.Vector( temp );
        textFeature.attributes = {
        val: value,
        color: 'blue',
        align: "cm",
        xOffset: 20,
        yOffset: 10,        
    };

    text.addFeatures( textFeature );
    };     
} 
```

# spring - Spring MVC如何获得运行异步任务的进度

> ID：10899635
> 
> 赞同：10
> 
> 时间：2012-06-05T14:54:47.467
> 
> 标签：spring, spring-mvc, asynchronous

我想从控制器内部启动一个异步任务，就像 Spring docs 中的以下代码片段一样。

```
import org.springframework.core.task.TaskExecutor; 

public class TaskExecutorExample { 

  private class MessagePrinterTask implements Runnable { 

    private int cn; 

    public MessagePrinterTask() { 

    } 

    public void run() { 
//dummy code 
for (int i = 0; i < 10; i++) { 
cn = i; 
} 
} 

} 

private TaskExecutor taskExecutor; 

public TaskExecutorExample(TaskExecutor taskExecutor) { 
    this.taskExecutor = taskExecutor; 
  } 

  public void printMessages() { 

      taskExecutor.execute(new MessagePrinterTask()); 

  } 
} 
```

之后在另一个请求中（如果该任务正在运行）我需要检查任务的进度。基本上得到了cn的值。

Spring MVC 中最好的方法是如何避免同步问题。

谢谢

佩帕·普罗查兹卡

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-05T20:45:42.423

您是否查看过[Spring 参考文档](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/scheduling.html#scheduling-annotation-support-async)`@Async`中的注释？

首先，为您的异步任务创建一个 bean：

```
@Service
public class AsyncServiceBean implements ServiceBean {

    private AtomicInteger cn;

    @Async
    public void doSomething() { 
        // triggers the async task, which updates the cn status accordingly
    }

    public Integer getCn() {
        return cn.get();
    }
} 
```

接下来，从控制器调用它：

```
@Controller
public class YourController {

    private final ServiceBean bean;

    @Autowired
    YourController(ServiceBean bean) {
        this.bean = bean;
    }

    @RequestMapping(value = "/trigger")
    void triggerAsyncJob() {
        bean.doSomething();
    }

    @RequestMapping(value = "/status")
    @ResponseBody
    Map<String, Integer> fetchStatus() {
        return Collections.singletonMap("cn", bean.getCn());
    }        
} 
```

请记住相应地[配置](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/scheduling.html#scheduling-annotation-support-namespace)执行程序，例如

```
<task:annotation-driven executor="myExecutor"/>
<task:executor id="myExecutor" pool-size="5"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T20:14:31.007

一种解决方案可能是：在您的异步线程中，写入数据库，并让您的检查代码检查数据库表的进度。您可以获得持久性能数据以供以后评估的额外好处。

此外，只需使用`@Async`注释来启动异步线程 - 让生活更轻松，并且是一种 Spring 方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-04-25T15:43:55.247

检查这个 github 源，它提供了使用 Spring mvc 的 @Async 捕获后台作业状态的非常简单的方法。

[![在此处输入图像描述](../Images/452e0d9e2caa8df7761ec8df718c6561.png)](https://i.stack.imgur.com/Udt6M.png) [https://github.com/frenos/spring-mvc-async-progress/tree/master/src/main/java/de/codepotion/examples/asyncExample](https://github.com/frenos/spring-mvc-async-progress/tree/master/src/main/java/de/codepotion/examples/asyncExample)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-05T15:21:37.953

忽略同步问题，您可以执行以下操作：

```
 private class MessagePrinterTask implements Runnable { 
    private int cn; 

    public int getCN() {
      return cn;
    }

    ...
  }

  public class TaskExecutorExample { 
    MessagePrinterTask printerTask;

    public void printMessages() { 
      printerTask = new MessagePrinterTask();
      taskExecutor.execute(printerTask); 
    }
    ...
  } 
```

# tfsbuild - 如何将谷歌测试集成到 TFS 2010 Build 中？

> ID：10899638
> 
> 赞同：0
> 
> 时间：2012-06-05T14:55:01.670
> 
> 标签：tfsbuild, googletest

我们正在使用 googletest [http://code.google.com/p/googletest/](http://code.google.com/p/googletest/)进行 C++ 单元测试，我们需要将 googletest 集成到我们的 TFS 2010 构建服务器中。那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T10:06:54.757

如果 googletest 支持命令行执行，你可以这样做

# class - 提升msm课程？

> ID：10899641
> 
> 赞同：0
> 
> 时间：2012-06-05T14:55:05.850
> 
> 标签：class, boost, state-machine

我是新手来提升 msm 和提升一般。我想以某种方式封装所有：

*   事件结构
*   stateMahine 结构包含转换表结构和状态结构

一个类内。

我怎样才能做到这一点？

```
// events
struct event1 {};

// front-end: define the FSM structure 
struct my_machine_ : public msm::front::state_machine_def<my_machine_>
{
    // The list of FSM states
    struct State1 : public msm::front::state<> 
    {
        // every (optional) entry/exit methods get the event passed.
        template <class Event,class FSM>
        void on_entry(Event const&,FSM& ) {std::cout << "entering: State1" << std::endl;}
        template <class Event,class FSM>
        void on_exit(Event const&,FSM& ) {std::cout << "leaving: State1" << std::endl;}
    };

    struct State2 : public msm::front::state<> 
    { 
        template <class Event,class FSM>
        void on_entry(Event const& ,FSM&) {std::cout << "entering: State3" << std::endl;}
        template <class Event,class FSM>
        void on_exit(Event const&,FSM& ) {std::cout << "leaving: State3" << std::endl;}

    };

    // the initial state of the player SM. Must be defined
    typedef State1 initial_state;

    typedef my_machine_ p; // makes transition table cleaner

    // Transition table
    struct transition_table : mpl::vector<
        //    Start     Event         Next      Action               Guard
        //  +---------+-------------+---------+---------------------+----------------------+
        Row < State1  , event1      , State2                                               >,
        Row < State2  , event1      , State1                                           >
    > {};

}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T15:11:49.630

要实现嵌套使用的成员：

```
// header file
struct Foo {
  struct Nested {
    void mem();
  };
};
// cpp file
void Foo::Nested::mem() {
  // implementation goes here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T21:49:18.503

不久前我收到了这个问题。如果您在头文件中声明嵌套的 Fsm 结构，您将支付更高的编译时间，无论包含在哪里。另一种选择是：

```
// PublicClass.hpp
struct PublicClass
{
  // forward-declare nested type. This will inherit msm::back::state_machine<...>
  struct Fsm;
  // with shared_ptr, you don't need the complete type yet.
  boost::shared_ptr<Fsm> fsm_;
};

// PublicClass.cpp
// provide definition of Fsm.
struct PublicClass::Fsm : public msm::back::state_machine<my_machine_>{}; 
```

HTH，克里斯托夫

# java - 单个 listclick 不会执行，但 longclick 会执行

> ID：10899644
> 
> 赞同：0
> 
> 时间：2012-06-05T14:55:22.137
> 
> 标签：java, android, android-fragments

我有一个带有列表的 ListFragment，没有单击。但是可以识别长点击。

```
 ListView listView = getListView();

        listView.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                      int position, long id) {
                Log.i(null, "single click does NOT work.");
            }
        });

 // contextual action bar (CAB).
        listView.setOnItemLongClickListener(new OnItemLongClickListener() {
            @Override
            public boolean onItemLongClick(AdapterView<?> parent, View view,
                  int position, long id) {
                Log.i(null, "does work.");
            }
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T15:08:51.193

我有一个类似的问题，并通过在创建时和滚动后使列表视图的视图无效来解决

```
listView.setOnScrollListener(new OnScrollListener() {
    public void onScrollStateChanged(AbsListView view, int scrollState) {
        if ( scrollState == OnScrollListener.SCROLL_STATE_IDLE )
        {
          listView.invalidateViews();
        }

    }

    @Override
    public void onScroll(AbsListView arg0, int arg1, int arg2, int arg3) {}
}); 
```

我希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T14:59:28.140

使您的活动从**Activity**而不是 ListActivity 或类似的东西扩展；）

# javascript - javascript replace() 函数使用正则表达式的奇怪行为

> ID：10899645
> 
> 赞同：0
> 
> 时间：2012-06-05T14:55:31.627
> 
> 标签：javascript, regex, replace

我做错了什么还是JS替换有问题？

```
<input type="text" id="a" value="(55) 55-55-55" />​

document.write($("#a").val().replace(/()-/g,''));​

prints (55) 555555 
```

[http://jsfiddle.net/Yb2yV/](http://jsfiddle.net/Yb2yV/)

我怎样才能替换 () 和空格呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T14:58:13.927

在 JavaScript 正则表达式中，`(`和`)`字符具有特殊含义。如果您想按字面意思列出它们，请`\`在它们前面加上一个反斜杠 ( )。

如果您的目标是摆脱所有`(`, `)`,`-`和空格字符，则可以使用字符类和 on 上的交替（例如，非此即彼）组合来实现`\s`，它代表“白色**的**步伐”：

```
document.write($("#a").val().replace(/[()\-]|\s/g,''));​ 
```

（我没有在前面放反斜杠，`()`因为你不需要在字符类中。我确实在前面放了一个，`-`因为在字符类中，`-`具有特殊含义。）

或者，如果你想摆脱***任何***不是数字的东西，你可以使用`\D`：

```
document.write($("#a").val().replace(/\D/g,''));​ 
```

`\D`意思是“不是数字”（注意它是大写字母，`\d`小写是相反的[任何数字]）。

[有关正则表达式](https://developer.mozilla.org/en/JavaScript/Guide/Regular_Expressions)的 MDN 页面的更多信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T14:58:11.650

您需要使用字符类

```
/[-() ]/ 
```

使用`"-"`作为第一个字符解决了歧义，因为破折号通常用于范围（例如`[a-zA-Z0-9]`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T14:58:28.457

```
document.write($("#a").val().replace(/[\s()-]/g,''));​ 
```

这将删除所有空格 (\s)、括号和破折号

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T14:59:45.350

括号表示正则表达式中的[捕获组](http://www.regular-expressions.info/brackets.html)。您需要对它们进行转义 ( `/\(\)-/`) 以匹配序列“()-”。然而我猜你想使用一个[字符类](http://www.regular-expressions.info/charclass.html)，即匹配“（”，“）”或“-”的表达式；空格包括[`\s`简写](http://www.regular-expressions.info/shorthand.html)：

```
value.replace(/[()-\s]/g, ""); 
```

您可能想阅读一些[文档](https://developer.mozilla.org/en/JavaScript/Guide/Regular_Expressions)或[教程](http://www.regular-expressions.info/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-05T15:00:14.083

用这个

```
.replace(/\(|\)|-| /g,'') 
```

您必须转义括号（即`\(`，而不是`(`）。在您的正则表达式中，您要列出四个项目：`\(`, `\)`, '-' 和`(space) 并且要替换它们中的**任何**一个，而不仅仅是将它们四个一起替换，您必须`|`在它们之间使用 OR。`

 `* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-05T15:01:02.133

你想匹配集合中的任何字符，所以你应该使用方括号来创建一个字符集：

```
document.write($("#a").val().replace(/[()\- ]/g,'')); 
```

通常，括号在正则表达式中具有[特殊含义](https://developer.mozilla.org/en/JavaScript/Guide/Regular_Expressions#Using_Parentheses)，因此它们在您的正则表达式中被忽略，只留下破折号。通常，要获得文字括号，您需要使用`\`（但在方括号块中，如上所述，您不需要）转义它们。

上面的破折号被转义了，因为它通常指示字符集中的范围，例如`[a-z]`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-05T15:06:39.463

可能非常糟糕，但一个非常基本的方法是，

```
document.write($("#a").val().replace(/(\()|(\))|-| |/g,''));​​ 
```

`|`表示`OR`， `\`用于转义保留符号`

# android - 在 android 项目中添加和访问视频文件

> ID：10899652
> 
> 赞同：1
> 
> 时间：2012-06-05T14:55:58.750
> 
> 标签：android

我只想在单击按钮时运行预定义的视频文件。我已将此视频文件添加到 myVideApp 项目的 res/raw 文件夹中。现在我需要将此路径传递给 videoView.setVideoPath() 才能播放视频。

如何在android中访问存储的视频文件的实际路径。注意：我不想打开文件。只想将文件的实际位置传递给视频视图。

我试过“path = this.getResources().getString(R.raw.bbc);” 但它不起作用，因为它给出了相对于当前项目的路径。但 videoview 需要绝对路径。

谢谢你，问候，机器人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T15:07:38.500

关注 Snippet 将对您有所帮助。

```
 getWindow().setFormat(PixelFormat.TRANSLUCENT);
            videoView = new VideoView(this);
            videoView.setMediaController(new MediaController(this));
            videoView.setVideoURI(Uri.parse("android.resource://" + getPackageName() +"/" + R.raw.bbc);  //Don't put extension
            videoView.requestFocus();
            setContentView(videoView);
            videoView.start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-02T09:41:43.890

*   以下是访问视频文件和播放视频的步骤
    1.  获取视频控制
    2.  创建媒体控制器
    3.  从本地资源获取视频路径
    4.  将媒体控制器设置为视频
    5.  在视频控件中设置视频路径
    6.  设置焦点
    7.  开始视频

.

```
VideoView videoView = (VideoView)findViewById(R.id.videoViewGuide);
MediaController mediaController = new MediaController(this);
mediaController.setAnchorView(videoView);
Uri uri = Uri.parse("android.resource:// " + getPackageName() + "/" +         R.raw.Guide_Video_01);
videoView.setMediaController(mediaController);
videoView.setVideoURI(uri);
videoView.requestFocus();
videoView.start(); 
```

# iphone - CocoaAsyncSockets 在应用程序启动时创建连接但从视图中读取/写入

> ID：10899655
> 
> 赞同：0
> 
> 时间：2012-06-05T14:56:02.590
> 
> 标签：iphone, ios, sockets, cocoaasyncsocket

我正在使用 CocoaAsyncSockets 库来在我的应用程序中创建一个 tcp 套接字连接。目前，我已通过在 appDelegate.m 文件中的 didFinishLaunchingWithOptions 方法中打开套接字连接来成功创建连接。我的代码如下所示：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:  (NSDictionary *)launchOptions
{
    socket = [[AsyncSocket alloc] initWithDelegate:self];
    [self connect];

    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]]    autorelease];
    // Override point for customization after application launch.
    self.viewController = [[[tekMatrixViewController alloc]     initWithNibName:@"tekMatrixViewController" bundle:nil] autorelease];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

这是我的连接方法：

```
- (void)connect 
{
    [socket connectToHost:@"9.5.3.6" onPort:11005 error:nil];
} 
```

现在，我一直在苦苦挣扎的是如何在我的视图中使用读/写方法，而无需重新建立连接。

*   我在应用程序启动时建立了一个 tcp 套接字连接
*   我在 didFinishLaunchWithOptions 方法中打开套接字，以便我可以创建连接并在我的应用程序运行的整个过程中保持连接
*   我不知道如何从我的视图中读取/写入服务器
*   我对 socket/iOS 开发很陌生，所以我希望有最简单的解决方案

我会很感激我能得到的任何帮助。我对 iOS 还是很陌生，并且还在学习语法，所以任何人都可以提供的细节越多，我就会越好。

非常感谢你的帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T15:10:28.330

AsyncSocket 自带这种写法：

```
- (void)writeData:(NSData *)data withTimeout:(NSTimeInterval)timeout tag:(long)tag; 
```

还有几种read方法的变种，这里有一个：（更多来自库的头文件）

```
- (void)readDataWithTimeout:(NSTimeInterval)timeout tag:(long)tag; 
```

您应该从已下载 AsyncSocket 库的同一网站获取示例代码，以了解它们的使用方式。要记住的一件事是这些方法是异步操作。

# list - SharePoint 2010 - 一封电子邮件，用于合并多个列表的更改

> ID：10899656
> 
> 赞同：0
> 
> 时间：2012-06-05T14:56:08.477
> 
> 标签：list, sharepoint-2010, alert, document-library

当我网站上的多个列表发生任何变化时，我需要发送一封电子邮件。更复杂的是，这封电子邮件需要每周发送一次，并包含过去一周的所有更改。

用户目前设置了警报，但他们抱怨收到的电子邮件太多。我需要一种将这些合并到一封电子邮件中的方法。

这可能吗？

谢谢， 尼内尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T17:52:07.440

是的，TimerJob 是你的朋友：

创建一个存储列表，在该列表中保留您想要的其他列表的更改（在 itemupdated 或 itemcreated 上）。然后每周运行您的工作并发送包含累积更新的电子邮件。

-p

# .net - 如何使用 xpath 做 wcf 路由服务？

> ID：10899657
> 
> 赞同：0
> 
> 时间：2012-06-05T14:56:10.673
> 
> 标签：.net, wcf, c#-4.0, wcf-routing

我有一个需要做一些路由工作的 wcf 项目。一种情况是进行服务版本控制。因此，例如，如果发生更改或需要为正在中断的 wcf 服务上的新客户端实施新服务，我将创建一个不同的服务端点以供新客户端使用。但问题是旧客户端仍然应该能够与旧版本的服务通信（这就是服务版本控制应该如何工作的方式？）。为此，我决定通过 XPath 方法使用 wcf 路由服务。

我可以用 XPath 方法做两件事，要么使用内容过滤检查 Data Contract 上的版本，要么通过查看标题。现在我想做这两件事只是为了基准测试。我了解 XPath 将如何工作，但我不知道如何实现它。

非常感谢任何教程或示例。在网上找到了几个很好的例子，但他们没有给出完整的配置。

此致，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T16:43:17.300

在这里找到一篇好文章，一个解释一切的视频和一个可下载的源。这里：

文章：http: [//msdn.microsoft.com/en-us/vs2010trainingcourse_whatsnewinwcf4_topic19](http://msdn.microsoft.com/en-us/vs2010trainingcourse_whatsnewinwcf4_topic19)

视频教程：[http ://channel9.msdn.com/Shows/10-4/10-4-Episode-40-The-New-WCF-Routing-Service](http://channel9.msdn.com/Shows/10-4/10-4-Episode-40-The-New-WCF-Routing-Service)

下载来源：[http ://az12722.vo.msecnd.net/vs2010trainingcourse2-1/labs/whatsnewinwcf41-1-0/Source.zip](http://az12722.vo.msecnd.net/vs2010trainingcourse2-1/labs/whatsnewinwcf41-1-0/Source.zip)

# c - 查找从集合 A 中的点到集合 B 中的点的最短距离的算法

> ID：10899658
> 
> 赞同：1
> 
> 时间：2012-06-05T14:56:15.080
> 
> 标签：c, algorithm

有一个具有 n 个 3d 点 (x,y,z) 的集合 A 和具有 m 个 3d 点 (x,y,z) 的集合 B。对于集合 A 中的每个点 (Xi,Yi,Zi)，我们必须在集合 B 中找到一个与 (Xi,Yi,Zi) 距离最小的点。

我的代码已超出给定的时间限制。请帮忙。

```
#include<stdio.h>
#include<stdlib.h>
#include<math.h>
long long np[50000][3],qp[50000][3];
int main()
{
long long n,q,i,j,d,ans,min;
scanf("%lld",&n);
for(i=0;i<n;i++)
    scanf("%lld%lld%lld",&np[i][0],&np[i][0],&np[i][2]);
scanf("%lld",&q);
for(i=0;i<q;i++)
scanf("%lld%lld%lld",&qp[i][0],&qp[i][1],&qp[i][2]);
for(i=0;i<q;i++)
{
    ans=0;
    min=((qp[i][0]-np[0][0])*(qp[i][0]-np[0][0]))+((qp[i][1]-np[0][1])*(qp[i][1]-qp[0][1]))+((qp[i][2]-np[0][2])*(qp[i][2]-np[0][2]));
    for(j=0;j<n;j++)
    {
        d=((qp[i][0]-np[j][0])*(qp[i][0]-np[j][0]))+((qp[i][1]-np[j][1])*(qp[i][1]-qp[j][1]))+((qp[i][2]-np[j][2])*(qp[i][2]-np[j][2]));
        if(d<min)
        {
            ans=j;
            min=d;
        }
    }
    printf("%lld\n",ans);
}
return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T15:01:10.760

您正在使用 O(n^2) 算法。我怀疑这是否足够快。有关加快速度的一些方法，请查看[这篇文章](http://en.wikipedia.org/wiki/Closest_pair_of_points_problem)。

或者更具体地说，您可以使用该文章中描述的分而治之的方法，如果您对递归感到满意，这种方法相对简单。由于您正在处理 z 轴，因此您必须扩展那里描述的算法以使用 2 条分隔线（一条用于 x 轴，然后一条用于 y），所以它会有点复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T15:28:33.003

一种方法是从 O(n log n) 的任一集合创建[最近邻三角剖分](http://graphics.stanford.edu/courses/cs368-06-spring/handouts/Delaunay_1.pdf)，然后使用[接近搜索](http://users.cs.cf.ac.uk/C.B.Jones/JonesWareCJ98.pdf)之类的方法将每个点从另一个集合依次覆盖到三角剖分上以找到它的最近邻。为了在 C 中做这类事情，[Joseph O'Rourkes 的书](http://books.google.ie/books/about/Computational_Geometry_in_C.html?id=gsv7HALW2jYC&redir_esc=y)非常值得一读。

# sql - 仅当字符串长度 > 2 时才出现子字符串

> ID：10899661
> 
> 赞同：7
> 
> 时间：2012-06-05T14:56:25.003
> 
> 标签：sql, substring

我想知道如果字符串长度> 2，是否可以只使用子字符串？

这是我的示例语句：

`Select SUBSTRING(ABRESC, 1, 2) + '-' + SUBSTRING(ABRESC, 3, 5) AS ABRESC From TABLE`

但是，有些字段只有 2 个字符长，所以我想知道当它长于 2 个字符时是否可以只创建子字符串？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-05T14:59:17.967

你可以使用[`CASE`](http://msdn.microsoft.com/en-us/library/ms181765.aspx)

```
Select ABRESC =
    CASE WHEN LEN(ABRESC) > 2 
       THEN SUBSTRING(ABRESC, 1, 2) + '-' + SUBSTRING(ABRESC, 3, 5)
       ELSE  ABRESC END  
From TABLE 
```

# java - 为什么我的图像不会显示在我的 Java Applet 中？

> ID：10899663
> 
> 赞同：0
> 
> 时间：2012-06-05T14:56:36.757
> 
> 标签：java, image, applet

当我使用以下代码时：

```
 public void paint(Graphics g){

    //Displays version number and name.
    g.setFont(new Font("Courier", Font.PLAIN, 10));
    g.drawString("DCoder " + execute.Execute.version, 2, 10);

    //Displays logo in center.
    g.drawImage(logo, centerAlign(logo.getWidth(null)), 50, this);

}

private int width(){
    //Gets and returns width of applet.
    int width = getSize().width;
    return width;
}
private int height(){
    //Gets and returns height of applet.
    int height = getSize().height;
    return height;
}

private int centerAlign(int obWidth){
    int align = (width()-obWidth)/2;
    return align;
} 
```

在我的 Java Applet 中，直到我调用 repaint() （通过调整 Applet Viewer 窗口的大小），图像才会显示？为什么图片不显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T15:37:04.960

因此必须处理异步加载的图像。

```
logo.getWidth(this); // Indicate asynchronous ImageObserver 
```

...

```
@Override
public boolean imageUpdate(Image img,
              int infoflags,
              int x,
              int y,
              int width,
              int height) {
    if ((infoflags & ImageObserver.ALLBITS) == ImageObserver.ALLBITS) {
        // The image is entirely read.
        repaint();
    }
} 
```

异步读取图像时，`getWidth(null)`将返回 0 直到确定宽度等。因此，需要小心一点。

* * *

***解释***

加载图像被设计为异步完成。图像已经可用，但在被读取之前`getWidth`和/或`getHeight`为-1。您可以将 ImageObserver 传递给 getWidth/getHeight，然后在读取图像时通知它。现在 JApplet 已经是一个 ImageObserver，所以你可以通过`this`.

读取代码将通过/注册的 ImageObserver 的方法 imageUpdate 来表示更改；宽度是已知的，即 SOMEBITS（= 不是全部），所以人们已经可以绘制预览，就像在 JPEG 像素化预览中一样。

这种异步技术是在早期需要的慢速互联网。

如果您想更简单地阅读图像，请使用`ImageIO.read(...)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T15:27:32.947

> 为什么图片不显示？

很可能是因为它是使用异步方法加载的。

# jquery - 使用 JQuery 应用文本转换 css 属性

> ID：10899667
> 
> 赞同：1
> 
> 时间：2012-06-05T14:56:48.227
> 
> 标签：jquery

我的代码如下所示，我在文本框中输入一些内容，然后将下拉菜单更改为**大写**等，一切正常，但是当我从下拉菜单中选择**“小写**字母”时没有任何反应，我尝试将下拉属性更改为变体，但它仍然没有工作，不知道是什么问题

```
<!DOCTYPE html>
<html>
<head>
  <title> - test </title>

<script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js'></script>

<script type='text/javascript'>
$(window).load(function(){

         $('#ta1').keyup(function(){
                $('#float1').html("<p>"+$(this).val()+"</p>");
            });

            $("#size").change(function() {
                $('#float1').css("text-transform", $(this).val());
            });
});

</script>

</head>
<body>
  <form id="myform">

      <label>Font Style</label>
      <select id="size" >
<option value="0">[No Engraving]</option>
<option value="variant">Small Caps</option>
<option value="uppercase">All Caps</option>
<option value=" lowercase">No Caps</option>
<option value="capitalize">Normal</option>
</select>
    </p>

 </form> 
  <p>
      <label>Top Leg
      <input type="text" name="top_leg" id="ta1" class="changeMe" maxlength="10">(10 char, $1)
      </label>
</p>
<p>
     <label></label>
</p>
<!--Start top leg Div--> 

<div id="container" class="changeMe2" style=" left: 298px;
    position: absolute;
    top: 287px;
    z-index: 999;">
        <div id="float1">
            <p>

            </p>
        </div>
    </div>
<!--Stop top leg Div--> 

</html>

<div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:59:59.153

text-transform CSS 规则的唯一有效属性是： none | [ [大写 | 大写 | 小写] || 全角 || 全尺寸假名]

因此，小型股（和变体）不是可供选择的选项。相反，请查看 font-variant 规则 ( [https://developer.mozilla.org/en/CSS/font-variant](https://developer.mozilla.org/en/CSS/font-variant) )。Font-variant 的属性是： normal | **小型股**| 继承。

[https://developer.mozilla.org/en/CSS/text-transform](https://developer.mozilla.org/en/CSS/text-transform)

# ember.js - 将 underscore.js groupBy 与 Ember.js 一起使用

> ID：10899668
> 
> 赞同：10
> 
> 时间：2012-06-05T14:56:52.797
> 
> 标签：ember.js, underscore.js

是否可以将下划线的 groupBy 函数与 ember.js 一起使用？

我有以下尝试显然不起作用：

```
var activities = App.store.findMany(App.Activity, feed.mapProperty('id').uniq()) 
var grouped = _.groupBy(activities, function(activity){
  return activity.get('dateLabel;')
}); 
```

我收到以下错误：

> 对象 App.Activity 没有“get”方法

商店加载了正确的数据，因此 findMany 不会进行远程调用。

问题是 findMany 返回一个 DS.ManyArray 可能与 _.groupBy 正在寻找的有很大不同。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-05T16:23:38.277

`groupBy`您可以实现为 ember-data DS-ManyArray 对象量身定制的自己的函数并`_`使用它进行扩展：

```
_.emberArrayGroupBy = function(emberArray, val) {
  var result = {}, key, value, i, l = emberArray.get('length'),
      iterator = _.isFunction(val) ? val : function(obj) { return obj.get(val); };

  for (i = 0; i < l; i++) {
    value = emberArray.objectAt(i);
    key   = iterator(value, i);
    (result[key] || (result[key] = [])).push(value);
  }
  return result;
}; 
```

现在你可以打电话

```
var grouped = _.emberArrayGroupBy(activities, function(activity) {
  return activity.get('dateLabel');
}); 
```

或更简单地说

```
var grouped = _.emberArrayGroupBy(activities, 'dateLabel'); 
```

* * *

上面的函数是基于 underscore 的原始`groupBy()`实现，看起来非常相似：

```
_.groupBy = function(obj, val) {
  var result = {};
  var iterator = _.isFunction(val) ? val : function(obj) { return obj[val]; };
  each(obj, function(value, index) {
    var key = iterator(value, index);
    (result[key] || (result[key] = [])).push(value);
  });
  return result;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-03T22:26:56.637

试试这个代码：

```
var activities = App.store.findMany(App.Activity, feed.mapProperty('id').uniq()) 
var grouped = _.groupBy(activities, function(activity){
  return activity.get('dateLabel;')
}).bind(this); 
```

我没有运行这段代码来测试它是如何工作的，但我的想法是将外部作用域“绑定”到内部闭包函数作用域中。希望这可以帮助您获得一些想法...

# iis - IIS：添加功能

> ID：10899669
> 
> 赞同：2
> 
> 时间：2012-06-05T14:56:53.437
> 
> 标签：iis, installation, ip, restrictions, ip-restrictions

我需要使用 IIS 7.0 中的 IP 地址和域限制功能编辑 IP 规则，但在我的 Windows 7 机器上，我的 IIS 中不存在此功能。有人知道如何将此功能添加到 IIS 中吗？我无法在任何地方找到下载...或在 IIS 中添加功能的部分。谢谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T15:08:30.777

可能是客户端上IIS的限制。我能找到的最接近的是[Dynamic IP Module](http://www.iis.net/download/DynamicIPRestrictions)。我也没有[在网络上的任何地方看到该模块](http://www.iis.net/download/All)。

然而：

您可能只是没有启用该功能：

1.  打开控制面板
2.  搜索程序和功能
3.  选择打开或关闭 Windows 功能
4.  展开 IIS 节点
5.  查看安全部分，我认为它属于 IP 安全性，无论哪种方式都打开它并没有什么坏处，尤其是对于开发人员而言。环境。

[![在安全节点下选择的 IP 和域限制功能的屏幕截图](../Images/1734e4d21689ed337f8a5e9af52ccc9d.png)](https://i.stack.imgur.com/3EuC7.jpg)

# java - 调试 JNLP 启动的应用程序

> ID：10899675
> 
> 赞同：9
> 
> 时间：2012-06-05T14:56:59.547
> 
> 标签：java, swing, debugging, jnlp

我创建了一个 Java 桌面应用程序（使用 Swing），现在正试图通过使用 JNLP 从网络启动它来使其工作。当我从终端启动该应用程序时，它运行良好，但一旦我从 JNLP 启动它，它就不会关闭。我每次都必须手动终止该进程。

我读到如果我`JFrame`将`DISPOSE_ON_CLOSE`其用作默认关闭操作可能会出现问题，但事实并非如此。它使用`DO_NOTHING_ON_CLOSE`（隐式）。另外，我`System.exit(0)`在释放所有对象后明确调用：

```
f = new JFrame("Pacman");
f.addWindowListener(new WindowAdapter() {
    @Override
    public void windowClosing(WindowEvent e) {
        // Terminate the Game-loop:
        GameLoop.INSTANCE.stopLoop();
        // Close the application:
        System.exit(0);
    }
}); 
```

我想当我关闭应用程序时可能会引发异常，但我找不到一种方法来获取以 JNLP 启动的正在运行的应用程序的控制台输出（例如 Stack-Trace）。这是我尝试过的：

*   从调试参数开始`javaws`并连接`jconsole`（有效，但我找不到任何异常或控制台输出）。
*   从调试参数开始`javaws`并将 IntelliJ 调试器附加到它（也可以，但不给我任何输出）

那么，如何使用 JNLP 启动应用程序并获取输出（写入默认输出和错误流），就像使用普通桌面应用程序一样？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-06T13:12:09.030

### 解决方案 #1 - 启用 Java 控制台，并查找异常。

您可以通过*Java 控制面板*来完成。切换到*高级*选项卡，并在*Java 控制台*中确保选择了*显示控制台*。

然后，运行您的应用程序并监视控制台是否存在异常。修复异常。

### 解决方案 #2 - 调试您正在运行的应用程序（正确）。

像这样启动 Web Start 应用程序（对于 Java 1.6 和更高版本）：

```
javaws -verbose -J-Xdebug -J-Xnoagent -J-Xrunjdwp:transport=dt_socket,server=n,suspend=y,address=8123 http://myserver.com/path/to/myapp.jnlp 
```

如果使用较早的 java 版本（1.4.2、1.5），请设置环境变量，如下所示：

```
set JAVAWS_VM_ARGS="-Xdebug -Xnoagent -Xrunjdwp:transport=dt_socket,server=n,suspend=y,address=8123" 
```

并通过以下方式运行应用程序：

```
javaws http://myserver.com/path/to/myapp.jnlp 
```

当应用程序运行时：

1.  附加一个调试器（Eclipse 会这样做 - 使用*Run* => *Debug Configurations* => *Remote Java Application*，然后在*Connection Properties*面板中输入传递参数的端口`javaws`（在本例中为：） `8123`。
2.  在方法中设置断点`windowClosing`。
3.  尝试关闭您的应用程序 - Eclipse 应该在您的断点处中断执行
4.  ***进入***该`GameLoop.INSTANCE.stopLoop()`方法以查看它挂起的位置/时间。

不要期望在控制台中看到解决方案，只需使用调试器单步执行代码 - 如果应用程序挂起，它会告诉您在哪里。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-08-03T16:51:56.043

有时甚至控制台都没有显示任何内容，例如当 TLS/SSL 握手出现问题时（即 close_notify 或 handshake_failure）。在这些情况下，您需要执行以下操作：

1.  在 Java 控制面板 > 高级中启用 Java 日志和跟踪。 [![Java 控制面板：日志和跟踪](../Images/657b56365b9ff0ee8b8b1985e71508d1.png)](https://i.stack.imgur.com/ISYDd.jpg)

2.  启用调试 Java 和启动 JNLP 的参数，有两种方法可以做到：

    2.a. 下载 JNLP 文件并从命令行执行它（`SET`在这种特殊情况下不需要该命令）。

    ```
    set JAVA_TOOL_OPTIONS=-Djavax.net.debug=all
    javaws -wait jnlp.jnlp 
    ```

    2.b。在 Java Control Panel > Java > View 中为 JVM添加参数（即`-Djavax.net.debug=all`）（这在本例中不是必需的），并从浏览器启动 JNLP 文件：

    [![Java 控制面板：jvm 参数](../Images/0d6500b56da3d4db0d1dea196cd05ffd.png)](https://i.stack.imgur.com/B9stP.png)

3.  日志和跟踪位于[Java 部署主页](http://docs.oracle.com/javase/7/docs/webnotes/tsg/TSG-Desktop/html/plugin.html#gcexde)`log`的目录中，我将这些位置粘贴到该目录中：

    一种。视窗XP：`%HOME%\Application Data\Sun\Java\Deployment`

    湾。视窗 7/Vista：`%APPDATA%\..\LocalLow\Sun\Java\Deployment`

    C。Linux/Solaris：`%HOME%/.java/deployment`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-07T11:34:24.457

此答案是启用远程调试 (Windows) 的[npe 答案](https://stackoverflow.com/a/10914907/4353862)的替代方法。

*   进入控制面板；
*   点击Java，打开Java控制面板；
*   在 Java 控制面板中，转到 Java 选项卡，然后单击“查看”；
*   这将打开一个包含已安装 Java 版本的窗口。在运行时参数上放**“-Xdebug -Xrunjdwp:transport=dt_socket,address=8123,server=y,suspend=n”**（如果您想在应用程序启动时进行调试，请将“suspend”更改为“y”，这将使应用程序停止，直到编辑器远程连接）；

[![启用远程调试](../Images/91220788b28e7dac98638f305ce6509f.png)](https://i.stack.imgur.com/2wvN9.png)

之后，将您的编辑器配置为远程调试到配置的端口（在本例中为 localhost:8123）。

# javascript - 惯性拖动滚动

> ID：10899677
> 
> 赞同：5
> 
> 时间：2012-06-05T14:57:00.907
> 
> 标签：javascript, jquery, scroll

我正在尝试创建一种效果，例如带有惯性的 iphone 触摸屏拖动滚动，但适用于桌面浏览器。

这似乎是我所追求的代码：

```
smoothstep_eo(t) = 2*smoothstep((t+1)/2) - 1 
```

从这里 - [https://stackoverflow.com/a/196209/348174](https://stackoverflow.com/a/196209/348174)

但是我很难弄清楚如何实现它。

我想象使用该代码以某种方式计算单击、拖动和释放的移动，然后逐帧将值应用于 scrollToTop()。

关于如何解决这个问题的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T18:59:36.423

我建议你使用[Cubiq.org 的 iScroll 5](https://github.com/cubiq/iscroll)。

这是一个 jQuery 插件，非常好用，并且可以完美地模拟鼠标触摸。

# cassandra - PHP的缓存分发框架

> ID：10899682
> 
> 赞同：0
> 
> 时间：2012-06-05T14:57:28.653
> 
> 标签：cassandra, memcached

目前，正在为我的 php 实现寻找缓存分发框架。

主要用于本地或远程缓存存储。

我对“Memcache”和“Apache Cassandra”有一些想法。

有没有更好的框架？

感谢 javaamtho

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T14:21:15.433

您应该考虑[Couchbase](http://www.couchbase.com/)，因为它提供了一个高性能且超级易于使用的分布式持久缓存。Memcached 的问题在于它很难扩展到更多的机器上，如果一台机器出现故障，你会丢失所有这些键并且必须重建缓存。Cassandra 还具有出色的缓存支持，但要复杂得多。如果您不需要复杂性，Couchbase 可能是更好的选择。

# javascript - IE 8“访问被拒绝”

> ID：10899683
> 
> 赞同：1
> 
> 时间：2012-06-05T14:57:33.767
> 
> 标签：javascript, jquery, internet-explorer-8, shopify

我在 Internet Explorer 中收到“拒绝访问”错误，如下面的屏幕截图所示：

奇怪的是，如果我刷新几次，页面偶尔会加载而没有错误并且脚本运行良好，这让我相信 option_selections 脚本会在 core013 之前加载，但我尝试移动脚本并得到相同结果。

![Internet Explorer 访问被拒绝错误](../Images/3f0845079519ae9ca1b370e6df8d1250.png) ![在此处输入图像描述](../Images/798525dfcecdd9605eb8ffe7813a9a3b.png)

我在 Shopify 的一个网站上工作，并且在第一个错误中无法访问 core013.js。但是，我确实可以控制 option_selection.js。（我可以在 core013.js 代码之前或之后执行它。我将 option_selection.js 代码放在 core013 脚本的上方和下方，结果相同。

有问题的站点位于[此处](http://highbrowvapor.com/collections/frontpage/products/apricot-1)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T16:07:49.723

好的，我解决了这个问题。基本上我不仅需要将 option_selection.js 移到顶部，而且还需要将调用它的代码移到顶部。啊……简单的尴尬……

# javascript - 从网页启动可执行文件是否可行

> ID：10899685
> 
> 赞同：0
> 
> 时间：2012-06-05T14:57:34.413
> 
> 标签：javascript, web-applications, webpage, executable, anti-patterns

我有一个要求，我需要从网页启动一个应用程序（假设安装在用户的机器上）。

我发现有几种方法可以这样做，但我想知道这是否是一个可以接受的解决方案。从网页执行应用程序是否可以，或者这是某种反模式？

编辑：澄清一下，我并不是说可执行文件将在加载网页时启动，而是正如弗洛里安提到的，它将在用户点击时启动，因此用户知道将启动可执行文件。我的问题是这样可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T14:11:11.367

如果你能做到这一点，那很可能是一个安全漏洞。你能想象如果我仅仅因为你访问了我的网页就运行你所有的应用程序吗？

但是，您可以执行 Skype 类似的操作：添加您的桌面应用程序处理的协议。这意味着当用户单击链接时，它将启动处理协议的桌面应用程序。

Skype的链接是这样的：

```
<a href="skype://username">Skype me!</a> 
```

Skype 程序是`skype`您操作系统的协议的默认处理程序，因此它将运行它。

# animation - Firefox 和 IE 中的 css 关键帧动画

> ID：10899686
> 
> 赞同：0
> 
> 时间：2012-06-05T14:57:40.760
> 
> 标签：animation, css

[http://dev.viral-minds.com/miller/abc/abc.html](http://dev.viral-minds.com/miller/abc/abc.html)

关于这个的两个问题

1.  当页面加载时，如何防止绿色块在开始时“闪烁”？
2.  动画目前仅适用于 chrome...如何让它在 FF 和 IE 中工作？

谢谢。

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>main</title>

    <style type="text/css">
        body 
        {
            background-color:#FFFFF0; /*ivory*/
            overflow: hidden;
        }

        #box
        {
            position: absolute;
            width:495px;
            height:263px;
            background:#32331d;
            top: 20px;
            left: 20px;
        }

        #nav
        {
            position: absolute;
            margin-left:30px;
            width:100%;
            height:100px;
            top: 425px;
            z-index: 100;
            background-image:url('colors.png');
            background-repeat:no-repeat;
        }

        #stars,
        #stars-2,
        #small-stars,
        #small-stars-2 {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 800px;
            height: 800px;
            margin: -300px 0 0 -300px;
            background: url(stars-large.png) no-repeat center center;
            -webkit-animation-name: starsLarge;
            -webkit-animation-duration: 240s;
            -webkit-animation-iteration-count: infinite;
            -webkit-animation-timing-function: linear;
        }

        @-webkit-keyframes starsLarge {
            from {
                -webkit-transform: rotate(0deg) scale(3);
                opacity: .9;
            }
            to {
                -webkit-transform: rotate(360deg) scale(.5);
                opacity: .5;
            }
        }

        #stars-2 {
            -webkit-animation-name: starsLargeAlt;
            -webkit-animation-duration: 180s;
            -webkit-animation-iteration-count: infinite;
            -webkit-animation-timing-function: linear;
        }

        @-webkit-keyframes starsLargeAlt {
            from {
                -webkit-transform: rotate(180deg) scale(3);
                opacity: .9;
            }
            to {
                -webkit-transform: rotate(360deg) scale(.5);
                opacity: .5;
            }
        }

        #small-stars,
        #small-stars-2 {
            background: url(stars-small.png) no-repeat center center;
            -webkit-animation-duration: 60s;
            -webkit-animation-name: starsSmall;
        }

        #small-stars-2 {
            -webkit-animation-name: starsSmallAlt;
            -webkit-animation-duration: 120s;
        }

        @-webkit-keyframes starsSmall {
            from {
                -webkit-transform: rotate(360deg) scale(3);
                opacity: .9;
            }
            to {
                -webkit-transform: rotate(0deg) scale(.5);
                opacity: .5;
            }
        }

        @-webkit-keyframes starsSmallAlt {
            from {
                -webkit-transform: rotate(0deg) scale(3);
                opacity: .9;
            }
            to {
                -webkit-transform: rotate(360deg) scale(.5);
                opacity: .5;
            }
        }
    </style>
</head>
<body>
    <div id="box"><img src="actual.png"></img></div>
    <div id="nav"></div>
    <div id="stars"></div>
    <div id="stars-2"></div>
    <div id="small-stars"></div>
    <div id="small-stars-2"></div>
</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T15:08:06.363

第 1 项：绿色块闪烁，因为尚未从服务器检索到覆盖的图像。您可以添加`display: none;`到 CSS 中`#box`，然后在页面完全加载后以编程方式显示它。例如：

```
// jQuery:
$(document).ready(function(){
  $('#box').show();
}); 
```

第 2 项：动画仅适用于 Chrome，因为您使用的是`-webkit`特定的样式定义。您将需要研究替代方案，例如`-moz`并`-ms`查看它是否可以在这些浏览器中运行。您也可以尝试完全省略前缀。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T15:12:48.190

I. 您可以更改该 div 的背景颜色以匹配页面背景。稍后，当图像加载完毕后，您可以通过 jQuery 将其更改为深绿色：

```
$(function() {
    $('#box img').load(function() {
        $(this).parent().css('background-color', '#32331D');
    });
}); 
```

二、您必须添加浏览器特定的前缀，而不是`-webkit`.

*   对于 FF -`-moz`
*   对于 IE -`-ms`
*   对于歌剧 -`-o`

请记住，尽管有前缀，但这些动画在旧版本的 IE（8 及以下）中不起作用。那些傻逼不支持 CSS 动画。

# vb.net - 使困惑？如何在两个数字之间找到偶数？VB.NET

> ID：10899699
> 
> 赞同：-1
> 
> 时间：2012-06-05T14:58:21.547
> 
> 标签：vb.net, events, module, numbers

如何找到从 6 到 16 的偶数。

问题是我正在处理事件。我该怎么做？我做了很多研究，发现了一些可能有效的代码，但我不确定它是如何工作的。（我在 vb.net 方面并不先进——我只是想完成这门课程。）

我确实发现我必须使用MOD？我什至不确定如何在活动中使用它？任何代码都可以让我完成这项任务。

我将这段代码从一个必须找到偶数的程序中取出，它工作得很好，但唯一的缺点是它从 1 开始，然后是你希望它停止的任何数字。我只需要 6 到 16 ..

```
Imports System
Imports System.Collections.Generic
Imports System.Text
Imports System.Diagnostics

Module Module1
    Private Delegate Sub numManip()

    Sub Main()
        Dim evennumber As numManip
        Dim allNumbers As [Delegate]
        evennumber = New numManip(AddressOf Even)
        allNumbers = [Delegate].Combine(evennumber)
        allNumbers.DynamicInvoke()
    End Sub

    Sub Even()
        Console.Clear()
        Dim counter As Integer = 2
        Console.WriteLine("Even Numbers")
        Console.WriteLine("Please Enter the Number you Wish to End at: ")
        Dim number As Integer = Console.ReadLine()
        Console.Clear()
        Console.WriteLine("All Even Numbers From 6 to " & number)
        Do Until counter > number
            Console.WriteLine(counter)
            counter += 2
        Loop
        Console.WriteLine("Press Enter to Continue...")
        Console.ReadLine()
    End Sub

    Public Enum Numbers
        Unset
        Prime
        Composite
    End Enum
End Module 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T15:15:34.160

这段代码对你很有用。你只需要稍微改变一下逻辑。此代码从 2 开始，因为计数器是 2。您当然可以使用与输入最后一个数字相同的逻辑更改该数字以从任何您想要的开始（如果您可以输入最后一个，您当然可以输入第一个； ））。

您必须更改的另一件事是使用[mod 运算符](http://msdn.microsoft.com/en-us/library/se0w9esz%28v=vs.71%29.aspx)来获取除法的其余部分，因为当您从加号开始时，您会遇到问题是您总是假设您的第一个数字是偶数...

无论如何..如果您想从 6 开始，只需更改此行

```
Dim counter As Integer = 2 
```

至

```
Dim counter As Integer = 6 
```

如果你总是想在 16 点结束，那就改变这个

```
Console.WriteLine("Even Numbers")
Console.WriteLine("Please Enter the Number you Wish to End at: ")
Dim number As Integer = Console.ReadLine()
Console.Clear() 
```

对此：

```
Dim number As Integer = 16 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T15:17:34.103

你为什么说你正在使用事件？首先，您展示的代码都没有使用事件，但即使您计算数字的代码在事件处理程序中，它也不会改变任何东西。但是，如果您的代码每次找到偶数时都需要引发事件，或者在完成时引发事件，那么情况会有所改变。

`Main`您在该方法中所做的一切都是毫无意义的。它所完成的只是调用该`Even`方法，您可以像这样非常简单地执行此操作：

```
Sub Main()
    Even()
End Sub 
```

即使您出于某种原因需要使用委托，您似乎没有任何理由这样做，您所要做的就是这样：

```
Sub Main()
    Dim evenDelegate As numManip = New numManip(AddressOf Even)
    evenDelegate.Invoke()
End Sub 
```

在您的`Even`方法中，我会使用 For 循环，而不是 Do 循环。如果找到第一个偶数，可以按 2 递增，例如

```
For i As Integer = evenStartingNumber To endingNumber Step 2
Next 
```

否则，您需要遍历每个数字（步进 1），然后测试每个数字以查看它是偶数还是奇数。如：

```
For i As Integer = startingNumber To endingNumber
   If IsEven(i) Then
   End If
Next 
```

要确定一个数字是偶数还是奇数，这就是`Mod`运算符的作用。 `Mod`返回除法运算的余数（剩余的分数）。因此，例如，10 除以 4 是 2，余数为 2。当您将任何偶数除以 2 时，余数始终为零，因此如果`x Mod 2 = 0`，则 x 是偶数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T15:11:57.853

无需深入研究作业的其他部分，您可以使用“Mod 2”检查偶数

```
If (myNum Mod 2) = 0 Then
 'It's even!
Else 
 'It's not!
End If 
```

对于它的事件部分：我不想给你代码来剪切和粘贴，但考虑这个想法：你的主要子迭代数字 6..16。在每个数字上，您都会引发一个自定义事件。如果事件是偶数，则在您输出到控制台的事件中。

```
 Class NumEventArgs
      Inherits EventArgs
      Public Property Num() As String

      Public Sub New(num As Integer)
         Me.Num = num
      End Sub
   End Class
   Public Event NumCheckEvent(sender As Object, e As NumEventArgs)
   Sub Main()
      AddHandler NumCheckEvent, AddressOf NumCheckEventHandler
      For i = 6 To 16 Step 2
         RaiseEvent NumCheckEvent(Nothing, New NumEventArgs(i))
      Next
   End Sub
   Sub NumCheckEventHandler(sender As Object, e As NumEventArgs)
      If e.Num Mod 2 = 0 Then
         Console.WriteLine("Even!")
      End If
   End Sub 
```

# java - 将 NSString 移植到 NSData 到 Android

> ID：10899702
> 
> 赞同：3
> 
> 时间：2012-06-05T14:58:29.420
> 
> 标签：java, android, iphone, objective-c

我们目前正在将其中一个项目从 Objective-C 移植到 Java。

字节数据来自编码为字符串的服务器，我们将其转换为字节数组。

[目标-C]：

```
NSString * imageString = @"abcde......"; //quite a long string
NSData * imageData = [imageString dataUsingEncoding:NSUnicodeStringEncoding];
constant Byte * imageBytes = [imageData bytes]; 
```

现在，我正在尝试在 Android 上做同样的事情

[JAVA]：

```
String imageString = "abcde......"; //quite a long string
byte [] imageBytes = imageString.getData("UTF-16"); 
```

但是，如果我比较第一个和第二个片段中的 imageBytes 数组，它们是不同的。我认为这与我在 Java 案例中使用的 UTF-16 编码有关（我猜没有“Unicode”这样的选项）。

有什么解决办法吗？

# android - Android 扩展多种活动类型

> ID：10899707
> 
> 赞同：1
> 
> 时间：2012-06-05T14:58:41.183
> 
> 标签：android, multiple-inheritance

我想同时扩展 MapActivity 和 FragmentActivity。我知道 Java 不允许多重继承，那么我该怎么做呢？我读过一些关于“复合”类型的东西，但我从来没有实现过，所以我不知道该怎么做。

以前有人遇到过这个问题，你是怎么解决的？

**编辑：**我想要这个的原因是因为我在标签中有 3 个活动；地图、图片库和设置列表视图。所有这三个“活动”的代码都在一个名为“Main”的大 MapActivity 中。是的，我知道这很丑陋，也不是很好的编程习惯，而且我不记得我为什么要这样写。我认为这是因为我正在阅读大多数人建议不要为单独的选项卡设置单独的活动......如果我决定将它们分成单独的活动，我就不会再遇到这个问题了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T15:10:52.300

我不知道你为什么想要这样的东西，但我想最简单的解决方案是类似[ActivityGroup](http://developer.android.com/reference/android/app/ActivityGroup.html)的东西，类似于[TabbedActivity 的](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/app/TabActivity.java?av=f)工作方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T21:03:35.193

我最终通过进入并修改 Android 支持包的源并使用它部署我的应用程序来解决这个问题。[在这里](https://stackoverflow.com/questions/11829782/fragmentactivity-with-a-fragment-containing-a-mapview)概述，我所做的只是让 FragmentActivity (android.support.v4.app) 扩展 MapActivity。我不认为相反的工作......虽然可能，而且它需要你有你正在使用的映射库的来源（在谷歌地图的情况下 - 不行）

# testing - 完全依赖注入和测试对象创建

> ID：10899708
> 
> 赞同：1
> 
> 时间：2012-06-05T14:58:41.640
> 
> 标签：testing, dependency-injection, dependencies, factory

我最近看到了一个与 Guice 框架相关的 Google 视频，其中讨论了完整的依赖注入。我一直在努力编写可测试的代码，我的主要问题是在一个类中创建的对象使得该类的可测试性大大降低。

该视频主要将所有课程分为两类：

1.  负责对象创建逻辑的类（工厂等）
2.  负责使用注入对象的类（业务逻辑）

业务逻辑类现在变得完全可测试（使用类级别的 JUnit 测试），因为我将注入模拟对象。我对此感到非常高兴。

但是，我现在有几个问题无法回答，关于测试创建对象的类。

1.  你会测试什么？
2.  你会怎么做？

# c# - DateTime.Now 导致 IO 阻塞？

> ID：10899709
> 
> 赞同：3
> 
> 时间：2012-06-05T14:58:46.080
> 
> 标签：c#

在一次会议上，有人告诉我这`DateTime.Now`会导致 IO 阻塞，这是我从未停止考虑的事情。如果是这样，为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T15:31:09.193

好吧，考虑到

[在ILSpy](http://wiki.sharpdevelop.net/ILSpy.ashx)上使用`mscorelib`我们可以发现 ,`DateTime.Now`以这种方式出现：

```
public static DateTime Now
{
    get
    {
        DateTime utcNow = DateTime.UtcNow;
        bool isAmbiguousDst = false;
        long ticks = TimeZoneInfo.GetDateTimeNowUtcOffsetFromUtc(utcNow, out isAmbiguousDst).Ticks;
        long num = utcNow.Ticks + ticks;
        if (num > 3155378975999999999L)
        {
            return new DateTime(3155378975999999999L, DateTimeKind.Local);
        }
        if (num < 0L)
        {
            return new DateTime(0L, DateTimeKind.Local);
        }
        return new DateTime(num, DateTimeKind.Local, isAmbiguousDst);
    }
} 
```

该函数`GetDateTimeNowUtcOffsetFromUtc`如下所示：

```
internal static TimeSpan GetDateTimeNowUtcOffsetFromUtc(DateTime time, out bool isAmbiguousLocalDst)
{
    isAmbiguousLocalDst = false;
    TimeZoneInfo.OffsetAndRule oneYearLocalFromUtc = TimeZoneInfo.GetOneYearLocalFromUtc(time.Year);
    TimeSpan timeSpan = oneYearLocalFromUtc.offset;
    if (oneYearLocalFromUtc.rule != null)
    {
        bool isDaylightSavingsFromUtc = TimeZoneInfo.GetIsDaylightSavingsFromUtc(time, time.Year, oneYearLocalFromUtc.offset, oneYearLocalFromUtc.rule, out isAmbiguousLocalDst);
        timeSpan += (isDaylightSavingsFromUtc ? oneYearLocalFromUtc.rule.DaylightDelta : TimeSpan.Zero);
    }
    return timeSpan;
} 
```

`GetOneYearLocalFromUtc`而是看起来像：

```
private static TimeZoneInfo.OffsetAndRule GetOneYearLocalFromUtc(int year)
{
    if (TimeZoneInfo.s_oneYearLocalFromUtc == null || TimeZoneInfo.s_oneYearLocalFromUtc.year != year)
    {
        TimeZoneInfo currentOneYearLocal = TimeZoneInfo.GetCurrentOneYearLocal();
        TimeZoneInfo.AdjustmentRule rule = (currentOneYearLocal.m_adjustmentRules == null) ? null : currentOneYearLocal.m_adjustmentRules[0];
        TimeZoneInfo.s_oneYearLocalFromUtc = new TimeZoneInfo.OffsetAndRule(year, currentOneYearLocal.BaseUtcOffset, rule);
    }
    return TimeZoneInfo.s_oneYearLocalFromUtc;
} 
```

最终`GetCurrentOneYearLocal`看起来像：

```
private static TimeZoneInfo GetCurrentOneYearLocal()
{
    Win32Native.TimeZoneInformation timeZoneInformation = default(Win32Native.TimeZoneInformation);
    long num = (long)UnsafeNativeMethods.GetTimeZoneInformation(out timeZoneInformation);
    TimeZoneInfo result;
    if (num == -1L)
    {
        result = TimeZoneInfo.CreateCustomTimeZone("Local", TimeSpan.Zero, "Local", "Local");
    }
    else
    {
        result = TimeZoneInfo.GetLocalTimeZoneFromWin32Data(timeZoneInformation, false);
    }
    return result;
} 
```

有趣的功能是`GetTimeZoneInformation`，`kernel32.dll`在文档中描述如下：

> 检索当前时区设置。这些设置控制协调世界时 (UTC) 和本地时间之间的转换。

要访问该时间信息，Windows 实际使用了`IO`访问权限。不确定这是否*可以*定义为“阻塞”，但它肯定会访问保存在磁盘上的系统信息，至少是其中的一部分。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-05T17:51:30.810

到目前为止，没有人回答当前时间的真正来源。我不了解最新的 PC 架构。但几年前，[实时时钟](http://en.wikipedia.org/wiki/Real-time_clock)是 CPU（南桥）之外芯片的一部分。因此，为了获得时间，您必须对该芯片进行一些 I/O 操作。（这不是磁盘访问，但仍然是 I/O 操作。）

由于当前进程必须等待时钟的响应，因此它阻塞了 I/O。

所以会议上的那个人是对的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-05T15:22:25.743

如果您使用诸如工具 DateTime.Now 之类的反射器查看源代码，则调用 Win API [GetSystemTimeAsFileTime](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724397%28v=vs.85%29.aspx)，然后使用[构造函数](http://msdn.microsoft.com/en-us/library/z2xf7zzk.aspx)创建新的 DateTime 对象，该构造函数具有一个 int64 参数，自 0001 年 1 月 1 日 00:00:00.000 起带有刻度。在这里看不到任何可能导致 I/O 阻塞的东西，而且在 GetSystemTimeAsFileTime 文档中也没有提到这一点。

# google-maps - Google Maps v3 map.getBounds().containsLatLng 不是函数

> ID：10899711
> 
> 赞同：4
> 
> 时间：2012-06-05T14:58:48.130
> 
> 标签：google-maps, google-maps-api-3, google-api, google-maps-markers, google-maps-api-2

如何在此处设置“setMap”函数以将此代码移植到 v3？或者一般将其移植到 v3 ...

// 地图中心，如果元素在地图屏幕之外

```
while ((!map.getBounds().containsLatLng(marker.getPosition())) & (showAllCategoryElements == 0)) {
        var newCenterPointLng = (map.getBounds().getCenter().lng() + marker.getPosition().lng()) / 2;
        var newCenterPointLat = (map.getBounds().getCenter().lat() + marker.getPosition().lat()) / 2;
        map.panTo(new google.maps.LatLng(newCenterPointLat, newCenterPointLng));
        map.setCenter(new google.maps.LatLng(newCenterPointLat, newCenterPointLng));
        if (!map.getBounds().containsLatLng(marker.getPosition())){
            map.zoomOut();
        } 
```

这是一个示例[http://d.hatena.ne.jp/tsmsogn/20111216/1324026723](http://d.hatena.ne.jp/tsmsogn/20111216/1324026723) 一些提示：markus.tao.at/geo/google-maps-api-v3-is-in-town/

我还导入[https://github.com/tparkin/Google-Maps-Point-in-Polygon](https://github.com/tparkin/Google-Maps-Point-in-Polygon) js 以获得“containsLatLng”支持

感谢您的帮助或提示

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T15:52:23.843

根据 API 文档，.getbounds() 返回 google.maps.LatLngBounds 而不是 maps.Polygon。

您不需要额外的导入，因为 LatLngBounds 具有 contains 功能。

```
map.getBounds().contains(marker.getPosition()) .... 
```

[https://developers.google.com/maps/documentation/javascript/reference#LatLngBounds](https://developers.google.com/maps/documentation/javascript/reference#LatLngBounds)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-09T12:13:39.927

在 Google maps v3 中，我们有另一种方法。这是最适合您的例子。 [https://developers.google.com/maps/documentation/javascript/examples/poly-containsLocation](https://developers.google.com/maps/documentation/javascript/examples/poly-containsLocation)

# zabbix - zabbix在触发器上搜索字符串

> ID：10899713
> 
> 赞同：0
> 
> 时间：2012-06-05T14:58:48.360
> 
> 标签：zabbix

我在返回字符串的代理上有一个用户参数。该字符串包含一个带有 E:x 的行，如果没有发现错误，则 x==0，如果发现错误，则 x>0。我想在触发器上检查这个数字，但找不到怎么做。或者，如果可能的话，我可以使用我的命令的退出状态。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T00:30:20.260

Zabbix 触发器在一个值上运行一个表达式。

如果您的键返回一个字符串，则必须使用正则表达式匹配来执行您所描述的操作：

```
{my-template:system.hostname.regexp(IMPORTANT-SERVER)}#1 
```

如果主机名键返回的值与“IMPORTANT-SERVER”（区分大小写）不匹配，这将触发警报。

如果您的键返回无符号整数，则可以使用检查值的表达式。

```
{my-template:uptime.last(0)}<300 
```

如果从键“uptime”返回的值小于 300，这将返回警报，在这种情况下，这意味着机器的正常运行时间少于 5 分钟并且可能已重新启动。这仅在值返回无符号整数时才有效。

我的建议是将您的支票更改为仅以数字（或退出代码）响应。将数据收集为无符号整数。设置一个触发器说如果数字不是0，然后发送一个触发器。

否则，您将不得不将正则表达式与字符串进行匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-02T11:41:03.033

试试这个方法：

```
{HP LaserJet P2055dn:display.str(Load Paper)} 
```

它应该有效。

# android - 如何在横向模式下使其中一个片段全屏？

> ID：10899715
> 
> 赞同：2
> 
> 时间：2012-06-05T14:58:57.117
> 
> 标签：android, android-fragments, fullscreen, landscape, android-videoview

我的问题似乎有点令人困惑：

我正在开发一个应用程序，其中有一个主要活动和 4 个片段（4 页），我还需要表明我使用 ViewPagerIndicator 来进行滑动手势。

首先：在我的一个标签（片段）中，我需要以全屏模式播放视频，并且当我选择适当的标签（我称之为横向标签）时，我想强制它以横向模式传递。

我做了一些挖掘，我发现从片段中，我不能做这样的事情（强制窗口，视图，变成风景），或者我没有找到正确的答案，虽然我使用了下面的代码，但我得到了这是逻辑错误，因为我需要从主要活动中调用，因为我理解它：

```
getActivity().requestWindowFeature(Window.FEATURE_NO_TITLE);
getActivity().getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:20:42.547

这个答案解决了我和你一样的问题：

```
public class YourClassName extends FragmentActivity {

static boolean isTablet = false;
static ActionBar actionBar = null;

public void onCreate(Bundle savedInstanceState) {
actionBar = getActionBar();

if ((getResources().getConfiguration().screenLayout & Configuration.SCREENLAYOUT_SIZE_MASK) >= Configuration.SCREENLAYOUT_SIZE_LARGE) {     
    setContentView(R.layout.single_pane_fragment_layout);
    isTablet = true;
} else {
    setContentView(R.layout.viewpager_fragment_layout);
} 
```

[https://stackoverflow.com/a/13831134/104085](https://stackoverflow.com/a/13831134/104085)

# java - 如何处理 Java 方法中变量的类型泛型？

> ID：10899718
> 
> 赞同：1
> 
> 时间：2012-06-05T14:59:04.917
> 
> 标签：java, generics, methods

我是 Java 的新手，我正在尝试学习如何使用泛型。谁能向我解释这段代码有什么问题？

```
import java.util.Collection;
import java.util.Iterator;

public class Generics {

    /**
     * @param args
     */
    public static void main(String[] args) {
        Integer a = new Integer(28);

        Integer[] b = {2, 4, 8, 16, 20, 28, 34, 57, 98, 139}; 
            //I'd prefer int[], but understand native types don't go with generics

        int c = which(a, b); // <--- error here, see below

        System.out.println("int: "+ c);
    }

    static <T extends Number> int which( T a, Collection<T> b) {
        int match = -1;
        int j = 0;
        for (Iterator<T> itr = b.iterator(); itr.hasNext();) {
            T t = (T) itr.next();
             if (a == t) {
                 match = j; 
                 break; 
             }
             j++;
        }
        return match;
    }
} 
```

**错误：** `The method which(T, Collection<T>) in the type Generics is not applicable for the arguments (Integer, Integer[])`。

当然，我可以只`int c = Arrays.binarySearch(b, a)`在这种特殊情况下使用（排序的、可比较的元素）而不是自定义方法`which`，但这是一个学习练习。

谁能解释我在这里的误解？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T15:02:48.720

数组不是集合

尝试

```
static <T extends Number> int which( T a, T[] b) { 
```

而且，正如 Yanflea 所指出的，这种变化意味着（添加了其他优化）

```
int j = 0;
for(T t : b) {
  if (a.equals(t)) {
    return j;
  }
  j++;
}
return -1; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-05T15:07:34.283

代替

```
Integer[] b = {2, 4, 8, 16, 20, 28, 34, 57, 98, 139} 
```

经过

```
List<Integer> b = Arrays.asList(2, 4, 8, 16, 20, 28, 34, 57, 98, 139); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T19:09:58.587

You can simply replace `which(a, b)` in your code with `which(a, Arrays.asList(b))`. `Arrays.asList` is a simply adapter that gets an array (of reference types) to conform to be viewed as a `List`; which allows you to use any method that is written for `List`s easily on an array (excluding arrays of primitives).

# java - 在 Azure 上部署时应用程序启动任务失败，退出代码为 1

> ID：10899720
> 
> 赞同：1
> 
> 时间：2012-06-05T14:59:12.127
> 
> 标签：java, deployment, azure, azure-configuration

我是 azure 的新手。我尝试以下文章：http: [//msdn.microsoft.com/en-us/library/windowsazure/hh690944 (VS.103).aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh690944(VS.103).aspx)

首先作为初学者使用 JSP 创建 helloworld 应用程序

我已经使用 azure storage explorer 将这两个文件上传到 blob 存储：

*   服务配置.cscfg

*   WindowsAzurePackage.cspkg

然后我尝试创建新的托管服务并将这些文件包含在其中。

但是关于停止状态的进展：

```
Application startup task failed with exit code 1\. [2012-06-05T14:51:58Z] 
```

我等了很长时间，首先它说初始化，然后恢复角色，但仍然相同。进度停止。

那是什么错误？我的配置丢失了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T23:50:07.617

自 2012 年 6 月更新 Windows Azure Plugin for Eclipse with Java 以来，Java 应用程序服务器 + 一些应用程序的基本部署变得更加简单——现在它只是新的 Windows Azure 项目向导 UI 的一部分。复制启动脚本的“旧”方式仍然有效，尤其是更高级的用户可能会觉得这更可取，但如果您刚刚开始在 Windows Azure 上使用 Java，您会发现基于向导的方法更简单、更快捷并且出错的机会更少。

最容易从 5 分钟演示开始：[http ://channel9.msdn.com/Blogs/Interoperability/Java-Applications-in-Windows-Azure-Cloud-Services-using-Eclipse](http://channel9.msdn.com/Blogs/Interoperability/Java-Applications-in-Windows-Azure-Cloud-Services-using-Eclipse)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T15:07:07.073

只是好奇你是否让它在本地正确运行。

*如果您还没有，您必须*做的一件事是修改 startup.cmd 以正确匹配您使用应用程序部署的 Tomcat 版本。请注意，启动脚本附带的 tomcat 文件夹是 apache-tomcat-7.0.22。如果您今天拉出 Tomcat，您将获得更新的内部版本号，因此您需要在启动脚本中更新此名称。否则你会看到你的初始化失败。

# java - Paypal expressCheckout 集成 (DoExpressCheckout) 错误

> ID：10899721
> 
> 赞同：0
> 
> 时间：2012-06-05T14:59:12.437
> 
> 标签：java, google-app-engine, payment-gateway

我在 java google 应用程序引擎中有一个 ExpressCheckout 集成设置，它可以运行到 GetExpresschekout 。但在最终调用（DoExpressCheckout）中我无法授权付款。它返回一个错误

RESULT=1000&PNREF=E24P1FBB8FA4&RESPMSG=通用处理器错误：13116-此令牌的交易正在进行中。&AVSADDR=N&AVSZIP=N

但相同的代码在本地工作，但在部署后显示上述错误。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T20:15:56.773

我不知道为什么在本地测试时它会起作用，但该错误仅表示用户尚未实际付款。这可能是因为用户确实还没有付款，或者因为交易正在等待验证。PayPal 将某些交易标记为有风险的交易，并需要几个小时来验证它们。

`RETURNURL`您是否在执行之前等待用户返回`DoExpressCheckout()`？您是否验证了用户实际上并未返回`CANCELURL`？

您是否验证了`GetTransactionDetails()`is`PAYMENTSTATUS`和`"Completed"`not `"Pending"`？您可以查看“PendingReason”了解更多详情。有关待处理交易的更多信息，请参阅[付款审核。](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_ECOtherAPIOps)

# d3.js - D3 具有拖放支持的强制有向图，以使选定的节点位置在放置时固定

> ID：10899725
> 
> 赞同：26
> 
> 时间：2012-06-05T14:59:38.653
> 
> 标签：d3.js, drag-and-drop, force-layout

可以在此处找到有关力直接图的示例：http: [//bl.ocks.org/950642](http://bl.ocks.org/950642)

如何轻松添加对拖放的支持？它应该将节点设置为固定它放置它的当前位置。重要的是其余节点仍然使用“力定向模式”来自动定位图中的其余节点

[https://github.com/mbostock/d3/wiki/Force-Layout](https://github.com/mbostock/d3/wiki/Force-Layout)

我玩了一些但没有成功，想知道是否有人能够给我一个关于如何添加上述支持的快速示例。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-06T17:37:40.453

在发现与连接到节点的两个“拖动”监听器（您自己的和 force.drag）打架并不理想后，终于让它工作了！

最好只拥有自己的“拖动”侦听器并手动调用 tick()，这是让力图为您在拖动的节点上的每个新节点位置上为您定位节点的关键特征。

工作示例：[http ://bl.ocks.org/2883411](http://bl.ocks.org/2883411)

# dynamics-crm - 将字符串发送到 Dynamic CRM 并让它找出类型？

> ID：10899726
> 
> 赞同：1
> 
> 时间：2012-06-05T14:59:39.700
> 
> 标签：dynamics-crm, dynamics-crm-2011

我需要将更改从 SQL 服务器数据库推送到 CRM。SQL端有两张表：

**转移**

*   TransferID（顺序）
*   实体（字符串，SQL 表名）
*   PKOfEntity（int，也来自表）
*   操作（创建、更新、销毁）

**转移场**

*   字段 ID（顺序）
*   TransferID（外键）
*   字段名（字符串）
*   字段值（字符串）

现在，我需要将这些更改纳入 CRM。我有一个 SQL 表到 CRM 实体的映射，以及一个 SQL 列到 CRM 属性的映射。但是，我没有将 CRM 属性映射到手头的 CRM 类型。

我正在使用该`Microsoft.Xrm.Sdk.Client.OrganizationServiceContext`对象。它的`SetAttributeValue`方法接受一个对象，但它不做任何转换；一个 int 字段需要传入一个 int，依此类推。现在，我真的非常非常希望能够在一个简单的 foreach 中将字段名称和值作为字符串动态传递，而不是手动检查和设置数十个模型的数十个属性。有没有合理的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T20:15:55.960

我有它的工作。对于遇到的每种类型的实体，我从 CRM 中获取实体元数据，然后构建一个`Dictionary`从属性名称到`AttributeTypeCodes`. 我有一个函数可以打开类型代码并返回正确的对象类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T17:18:36.367

对于 csv/xml 数据导入项目，这听起来像是一个理想的情况，[`Import.ModeCode`](http://msdn.microsoft.com/en-us/library/gg334535.aspx "配置数据导入")其中`ImportModeCode.Update`. 查看以下链接了解更多详情。

*   [在 Microsoft Dynamics CRM 中导入数据](http://msdn.microsoft.com/en-us/library/gg328321.aspx "在 Microsoft Dynamics CRM 中导入数据")
*   [示例：使用复杂数据映射导入数据](http://msdn.microsoft.com/en-us/library/hh547396.aspx "示例：使用复杂数据映射导入数据")

# flyway - 一次执行多个语句

> ID：10899727
> 
> 赞同：1
> 
> 时间：2012-06-05T14:59:42.420
> 
> 标签：flyway

据我所见，Flyway 在给定带有一些语句的 SQL 文件时，会使用 ; 一个一个地执行它们。作为分隔符（这是我从 SqlScript.execute() 中理解的）。因此，在远程服务器上应用补丁需要大量时间，因为文件的每个语句都是单独发送的。

我想知道是否可以通过将整个文件一次性发送然后立即应用来进行“批量更新”。或者也许是我们在这里遇到的一些 JDBC 约束？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T20:34:16.910

你的观察是正确的。

Flyway 当前将文件拆分为单个语句，然后使用 JDBC 将其发送到 DBMS。

一些 DBMS 的 Jdbc 驱动程序，例如来自 H2 和 PostgreSQL 的驱动程序，实际上本机支持每个 jdbc 调用发送多个语句。

我选择不使用它的原因是你用错误报告质量换取潜在的性能提升。最重要的是，此解决方案仅适用于少数用户。

批量更新确实可以成为解决此问题的跨 DBMS 解决方案。由于潜在的大小爆炸和收益递减规律，批处理整个文件可能不是理想的选择。批量处理一些语句（比如 20、50 或任何最佳位置）可能会被证明是有价值的。这不应该对代码产生太大影响。如果错误报告质量（哪个语句失败）没有受到明显影响并且性能改进是可见的，那么添加它应该是不费吹灰之力。

如果您希望看到此支持，请在问题跟踪器中提出问题。

# css - 相对于父 div 定位颜色框

> ID：10899730
> 
> 赞同：1
> 
> 时间：2012-06-05T14:59:45.807
> 
> 标签：css, colorbox, css-position

有什么方法可以相对于父 div定位我的[颜色框？](http://www.jacklmoore.com/colorbox)我需要它出现在特定元素的右侧，而不是相对于整个页面的位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T13:53:25.320

加载完 dom 后，您可以移动 #colorbox 元素。例子：

```
$('#colorbox').appendTo('#newElement'); 
```

然后，当您将颜色框分配给一个元素时，您需要指定一个位置，而不是让它尝试在访问者视口中居中。

```
$('a.example').colorbox({top:0, right:0}); 
```

当然，您的父对象需要有定位，以便颜色框相对于它定位。

```
#newElement { position:relative; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T15:05:26.423

```
<div id="outer" style="position: relative">
   <div id="inner" style="positon: relative"></div>
</div> 
```

这里**#inner**元素相对于**#outer**元素定位。这意味着您可以将#outer 元素位置设为绝对或固定并将其放置在您想要的位置。#inner 总是相对于#outer。

# c++ - 比较两个字符串 C++

> ID：10899739
> 
> 赞同：1
> 
> 时间：2012-06-05T15:00:03.343
> 
> 标签：c++, string

您可以简单地通过 put 比较两个字符串`string1==string2`吗？

```
void ex_file_licensing::compare_license(const std::string &reference,
                                        const std::string &result)
{
    if (reference == result)
        cout << "It's the same" << endl;
    else 
        cout << "It's diffrent" << endl;
    return;
} 
```

如果是的话，这段代码会正常工作还是我应该做一些修改。

谢谢大家

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T15:01:57.850

这取决于您要测试的字符串相等性的概念。如果您想检查内容是否逐字节相同，那么是的，这是测试字符串是否相等的正确方法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-05T15:01:12.033

是的。是的。

只是尝试编译、运行并查看自己。

该类`std::string`已重载`operator==`，这就是它可以工作的原因。

# android - 可以在更改颜色中实现 OnScrollListener() 时更改颜色

> ID：10899740
> 
> 赞同：0
> 
> 时间：2012-06-05T15:00:05.490
> 
> 标签：android, colors, background, screen

我正在开发一个基本的手电筒应用程序，并希望在我滚动屏幕时改变屏幕的颜色。我一直在寻找一些关于如何做到这一点的例子，但没有运气。希望有人能指出我正确的方向。到目前为止我知道我必须使用`OnScrollListener()` 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T15:16:15.793

这是取自[MindTheRobot](http://mindtherobot.com/blog/272/android-custom-ui-making-a-vintage-thermometer/)

```
Paint paint = new Paint();
int color = 0x00000000;
float position = getRelativeTemperaturePosition();
if (position < 0) {
    color |= (int) ((0xf0) * -position); // blue
} else {
    color |= ((int) ((0xf0) * position)) << 16; // red          
}
//Log.d(TAG, "*** " + Integer.toHexString(color));
LightingColorFilter logoFilter = new LightingColorFilter(0xff338822, color);
paint.setColorFilter(logoFilter); 
```

# python - 我们可以在 webapp2 中使用 i18n 进行全局设置吗？

> ID：10899743
> 
> 赞同：1
> 
> 时间：2012-06-05T15:00:25.690
> 
> 标签：python, google-app-engine, webapp2

我有一个类别列表，我想将它与 i18n 一起使用，以便我可以按区域设置更改语言。

我的python代码如下：

```
from webapp2_extras import i18n

category_list = {}
category_list['bikes'] = {'value': i18n.gettext('CATEGORY_BIKES')}

class CategoriesHandler(BaseHandler):
    """List categories"""
    def get(self, **kwargs):
        """List all categories"""
        self.response.write(self.json_output(category_list)) 
```

它会导致错误：

```
 File "/Users/user/Developer/GAE/project/CategoriesHandler.py", line 11, in <module>
    category_list['bikes'] = {'value': i18n.gettext('CATEGORY_BIKES')}
  File "/Users/user/Developer/GAE/project/webapp2_extras/i18n.py", line 713, in gettext
    return get_i18n().gettext(string, **variables)
  File "/Users/user/Developer/GAE/project/webapp2_extras/i18n.py", line 894, in get_i18n
    request = request or webapp2.get_request()
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2/webapp2.py", line 1720, in get_request
    assert getattr(_local, 'request', None) is not None, _get_request_error
AssertionError: Request global variable is not set. 
```

但是，如果我将 category_list 移动到类 get 方法中，一切都很好。

```
class CategoriesHandler(BaseHandler):
    """List categories"""
    def get(self, **kwargs):
        """List all categories"""
        category_list = {}
        category_list['bikes'] = {'value': i18n.gettext('CATEGORY_BIKES')}
        self.response.write(self.json_output(category_list))
        pass 
```

问题是我需要将 category_list 分离到另一个配置文件中，以便我可以轻松地维护我的代码。有没有办法解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T16:22:42.047

改用 gettext_lazy ，它直到稍后才会进行实际的翻译查找（当您也知道要翻译成哪种语言时）。

一个非常常见的约定是

```
from webapp2_extras.i18n import _lazy as _
category_list['bikes'] = {'value': _('CATEGORY_BIKES')} 
```

# html - IE8 的 CSS3 盒子阴影效果？

> ID：10899745
> 
> 赞同：1
> 
> 时间：2012-06-05T15:00:29.533
> 
> 标签：html, css, internet-explorer-8

我有以下风格来获得这种效果：

它适用于 IE9 和 Chrome，但不适用于 IE8。我应该改变什么才能让它在 IE8 中工作。

请注意，我已将此样式应用于封装图像的标签。

![在此处输入图像描述](../Images/931ed3aa4b520594cce0120eb9268574.png)

```
 border-collapse: separate !important;
 box-shadow: 0px 0.5px 11px 4px #888888; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T15:02:14.680

IE8 本身不支持`box-shadow`. 您可以为此使用惊人的[CSS3 PIE](http://css3pie.com/)库。

* * *

但是请注意，这并不能完全复制`box-shadow`. 主要是，如果您的图像具有任何透明度，则元素后面的阴影会泄漏：

> 与其他浏览器不同，PIE 渲染的阴影形状在元素背景后面的区域是不透明的。这意味着如果您的元素具有透明或半透明的背景，则不透明的阴影将显示出来。为避免这种情况，您必须 [..] 给元素一个不透明的背景

请参阅：[http ://css3pie.com/documentation/supported-css3-features/#box-shadow](http://css3pie.com/documentation/supported-css3-features/#box-shadow)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T21:44:08.553

您可以使用 IE 特定`filter`的 css 规则来实现这一点并完全放弃 CSS3PIE。

这会给你一些接近你正在寻找的东西。

```
filter: 
  progid:DXImageTransform.Microsoft.Shadow(color=#aaaaaa,direction=0,strength=5), 
  progid:DXImageTransform.Microsoft.Shadow(color=#aaaaaa,direction=45,strength=2), 
  progid:DXImageTransform.Microsoft.Shadow(color=#aaaaaa,direction=90,strength=5), 
  progid:DXImageTransform.Microsoft.Shadow(color=#aaaaaa,direction=135,strength=5), 
  progid:DXImageTransform.Microsoft.Shadow(color=#aaaaaa,direction=180,strength=10), 
  progid:DXImageTransform.Microsoft.Shadow(color=#aaaaaa,direction=225,strength=5), 
  progid:DXImageTransform.Microsoft.Shadow(color=#aaaaaa,direction=270,strength=5), 
  progid:DXImageTransform.Microsoft.Shadow(color=#aaaaaa,direction=315,strength=2); 
```

可以在此处查看演示：http: [//hedgerwow.appspot.com/demo/shadow](http://hedgerwow.appspot.com/demo/shadow)

有关 IE 过滤器的更多信息，请参阅此 MSDN 文章： http: [//msdn.microsoft.com/en-us/library/ms532847 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ms532847(v=vs.85).aspx)

从 IE4 开始，就在 css2 之前，并且在没有浏览器完全支持 CSS1 的时候，这些过滤器中的许多已经被支持。因此，如果您认为辉光滤镜看起来很难看，请归咎于 1997，而不是微软。;)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T15:10:02.270

CSS3PIE 是你在这个问题上的朋友，去试试吧，但要小心在 IE8 上使用它

由于 PIE 与其他一些 JavaScript 的冲突，我现在正面临着 IE8 崩溃的问题

# python - Python中的dict变量和for循环令人费解的魔术行为

> ID：10899747
> 
> 赞同：0
> 
> 时间：2012-06-05T15:00:37.110
> 
> 标签：python

这里是初级 python 程序员，我一直在为意外的循环和字典行为撞墙。我正在遍历日志条目的 CSV 文件并将数据解析为类别字典。当我每次通过循环初始化类别字典时，它按预期工作..

像这样：

```
log_entries = AutoVivification()
# http://stackoverflow.com/questions/635483/what-is-the-best-way-to-implement-nested-dictionaries-in-python

def scrublooper(log_file):

    for ll in log_file:
    # Initialize  categories dict every round through the loop
    categories = {'requests': {'Content_Visual': 0, 'Content_ProgramsUpdates': 0, 'Content_Text': 0, 'Pages': 0, 'Content_Files': 0}, 'filter_action': {'re': 0, 'pl': 0, 'bs': 0}}
    lld = LogDomain(ll)
    domain, hostname, lan_host = lld.domain, lld.hostname, lld.lan_host

    mimetypes = url_searcher(Settings.mimetypes, lld.mime_type)

    if mimetypes:
        category = mimetypes[2]

        if not log_entries[lan_host].has_key(domain): 
            log_entries[lan_host][domain]= categories

        log_entries[lan_host][domain]['requests'][category] += 1 

print log_entries['192.168.5.210']['google.com']['requests']
print log_entries['192.168.5.210']['webtrendslive.com']['requests']
print log_entries['192.168.5.210']['osnews.com']['requests']
print log_entries['192.168.5.210']['question-defense.com']['requests']
print log_entries['192.168.5.210']['optimost.com']['requests'] 
```

这种外观的输出是我所期望的：

```
{'Content_Visual': 0, 'Content_ProgramsUpdates': 0, 'Content_Text': 95, 'Pages': 0, 'Content_Files': 0}
{'Content_Visual': 0, 'Content_ProgramsUpdates': 0, 'Content_Text': 1, 'Pages': 0, 'Content_Files': 0}
{'Content_Visual': 0, 'Content_ProgramsUpdates': 0, 'Content_Text': 2, 'Pages': 0, 'Content_Files': 0}
{'Content_Visual': 0, 'Content_ProgramsUpdates': 0, 'Content_Text': 18, 'Pages': 0, 'Content_Files': 0}
{'Content_Visual': 0, 'Content_ProgramsUpdates': 0, 'Content_Text': 3, 'Pages': 0, 'Content_Files': 0} 
```

然而！这是我的问题。我不想每次都通过循环初始化类别字典。在这个简化的示例案例中，这无关紧要，但在这个程序的道路上，它会导致显着的性能下降 (30%)。

我需要初始化类别字典一次：

```
log_entries = AutoVivification()
categories = {'requests': {'Content_Visual': 0, 'Content_ProgramsUpdates': 0, 'Content_Text': 0, 'Pages': 0, 'Content_Files': 0}, 'filter_action': {'re': 0, 'pl': 0, 'bs': 0}}

def scrublooper(log_file):

    for ll in log_file:
    lld = LogDomain(ll)
    # etc, etc, etc 
```

但是，当我在 for 循环之外初始化类别字典 ANYWHERE 时（无论是在scrublooper 函数中还是在log_entries 变量之后），输出为：

```
{'Content_Visual': 0, 'Content_ProgramsUpdates': 0, 'Content_Text': 685, 'Pages': 0, 'Content_Files': 0}
{'Content_Visual': 0, 'Content_ProgramsUpdates': 0, 'Content_Text': 685, 'Pages': 0, 'Content_Files': 0}
{'Content_Visual': 0, 'Content_ProgramsUpdates': 0, 'Content_Text': 685, 'Pages': 0, 'Content_Files': 0}
{'Content_Visual': 0, 'Content_ProgramsUpdates': 0, 'Content_Text': 685, 'Pages': 0, 'Content_Files': 0}
{'Content_Visual': 0, 'Content_ProgramsUpdates': 0, 'Content_Text': 685, 'Pages': 0, 'Content_Files': 0} 
```

所有 'Conent_Text' 值都相等地增加了！这里发生了什么？我确定我违反了一些 python 原则，但不知道如何找出答案。我花了几个小时才弄清楚问题与类别字典有关。

非常有义务做出任何解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T15:12:10.427

我不熟悉您使用的工具，但是当您在循环之外创建字典时，您只是在创建一个字典。

```
if not log_entries[lan_host].has_key(domain): 
        log_entries[lan_host][domain]= categories 
```

这段代码只是让 log_entries[lan_host][domain] 指向那个字典。Python 不会复制这些值或类似的东西。所以这些行指的是同一个字典。

```
log_entries['192.168.5.210']['google.com']
log_entries['192.168.5.210']['webtrendslive.com'] 
```

PS我不能肯定地说，但我的直觉说不想初始化一个新的字典来提高性能可能是过分的。

# php - 使用PHP上传较大文件的速度很慢

> ID：10899749
> 
> 赞同：1
> 
> 时间：2012-06-05T15:00:42.900
> 
> 标签：php, upload

我已经在 localhost 上对此进行了测试，因此带宽不是问题。我搜索了谷歌，我遇到最多的解决方案是使用 Flash/Ajax 工具来避免这个问题。

情况1：

```
file: test.jpg
size: 183kb
result: < 1 s 
```

案例二：

```
file: test.mp3
size: 2.4mb
result: > 10 min 
```

# php - 我可以在独立项目中使用树枝吗

> ID：10899751
> 
> 赞同：11
> 
> 时间：2012-06-05T15:00:51.243
> 
> 标签：php, twig

我可以在独立项目中使用twig模板引擎吗，例如在1000个html页面上设计更多，即站点充满静态页面，如果你有任何简单的例子，我会感谢你

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2019-02-04T19:07:44.453

我发现[这个 Sitepoint 教程](https://www.sitepoint.com/twig-popular-stand-alone-php-template-engine/)非常简单。我已经简化并总结了这些步骤：

它假定有基本的命令行和[Composer](https://getcomposer.org)知识。

*   安装 Twig - Composer 对大多数人来说*可能*是最简单的方法。`composer require twig/twig`在您的 docroot 中运行。这将创建一个`composer.json`and`composer.lock`如果你还没有它们，以及`vendor`Composer 将下载 Twig 和它使用的几个 Symfony 依赖项的目录。Composer 还会生成一些自动加载文件。

*   为你的 Twig 源文件创建一个`templates`目录（为了安全起见，我个人喜欢把它放在 docroot 之上）

*   在该目录中创建示例`index.html.twig`模板
*   创建一个`bootstrap.php`文件（几行 PHP 来加载和初始化 Twig（并告诉它在哪里可以找到模板）
*   创建一个`index.php`文件来演示加载和解析模板。这个：
    *   加载引导程序
    *   定义一些数据（在数组中）以填充模板中的标签
    *   使用 Twig 的[render()](https://twig.symfony.com/doc/2.x/api.html#rendering-templates)方法，指定模板和数据数组

在浏览器中访问第二个 PHP 文件，您应该会得到一个渲染的 Twig 模板。

**boostrap.php：**

```
<?php

// Load our autoloader
require_once __DIR__.'/vendor/autoload.php';

// Specify our Twig templates location
$loader = new Twig_Loader_Filesystem(__DIR__.'/../templates');

// Instantiate our Twig
$twig = new Twig_Environment($loader); 
```

**索引.php：**

```
<?php

require_once __DIR__.'/bootstrap.php';

// Sample data
$foo = [
  [ 'name'          => 'Alice' ],
  [ 'name'          => 'Bob' ],
  [ 'name'          => 'Eve' ],
];

// Render our view
echo $twig->render('index.html', ['foo' => $foo] ); 
```

**模板/index.html.twig：**

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Twig Example</title>
</head>
<body>

    <ul>
    {% for item in foo %}
        <li>{{ item.name }}</li>
    {% endfor %}
    </ul>

</body>
</html> 
```

下一阶段是将您的 index.php 修改为适当的“前端控制器”，以便它可以处理多个模板。

本教程还提到了缓存生成的模板等内容。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-30T02:02:42.630

是的，你可以使用它。查看有关如何使用您的项目进行设置的文档。

[http://twig.sensiolabs.org/doc/intro.html#installation](http://twig.sensiolabs.org/doc/intro.html#installation)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-05-11T21:20:40.100

我今天确实试图找出它是如何工作的，因为官方文档并不完美......所以我找到了解决方案。

简单的结构：

twig/app/app.php
twig/vendor （使用文档中的 composer 创建） twig/views/page.html.twig

* * *

应用程序.php：

```
<?php require_once '../vendor/autoload.php';

use Twig\Loader\FilesystemLoader;
use Twig\Environment;

$loader = new FilesystemLoader('../views/');

$twig = new Environment($loader);

echo $twig->render('page.html.twig', ['text' => 'Fabien']); 
```

* * *

page.html.twig：

```
<h1>Hello {{ text }}</h1> 
```

# direct3d - direct3d 是否初始化新 创建的纹理

> ID：10899752
> 
> 赞同：1
> 
> 时间：2012-06-05T15:00:57.237
> 
> 标签：direct3d, direct3d9

如果您创建一个新的空纹理，例如

IDirect3DDevice9::CreateTexture 或 D3DXCreateTexture

是否保证用零填充-通过测试在我看来？有人有微软关于此声明的链接吗？我什么也找不到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T20:55:51.200

不，没有明确的保证（我见过）。事实上，我已经看到了很多相反的行为：来自先前（解除分配）纹理的数据和看似随机的数据出现。

但是，纹理之间的行为会根据纹理在格式中的分配位置而有很大不同。如果 CPU 需要，在系统内存中分配或使用某些共享池可能会导致数据归零。通常，在视频内存中分配时，不会发生这种情况。`IDirect3DDevice9::CreateTexture`和之间也可能存在差异`D3DXCreateTexture`；D3DX 通常会进行更多的初始化或为此提供选项。

如果您看到纹理显示为零填充，那可能是由于调试版本或新系统造成的。运行其他一些图形应用程序，然后尝试运行发布版本（确保您的系统未设置为 D3D 调试模式）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T20:48:30.833

如果您查看 DXGI API 和 DX10+ DDI，驱动程序有很多机会将 DXGI/D3D 请求的内存填充为零。话虽这么说，因为没有 API 保证内存为零填充，我不会依赖它。

# facebook - Facebook API - 通过 Graph API 访问信息，无需访问令牌

> ID：10899753
> 
> 赞同：3
> 
> 时间：2012-06-05T15:00:57.973
> 
> 标签：facebook

我的问题是可行性问题，而不是编码问题。

我正在为一个以前只使用 Facebook 作为其唯一在线存在的组织开发一个网站。该组织现在希望开发一个带有新闻部分的网站，其中他们自己的新闻来自他们在 Facebook 帐户的注释部分中发布的注释（来自类似组织的其他相关新闻来自 RSS 提要） - 所以相同的信息出现在他们的 Facebook 页面和网站上，因此该组织可以继续以相同的方式发布他们的新闻。

在调查了这个问题后，我只能想出一个解决方案，即只能将笔记显示给当前登录到 Facebook 的用户（因此有一个有效的访问令牌可以通过 Graph API 访问它）。

是否可以在不登录 Facebook 的情况下查看笔记（因此没有访问令牌）？

我不打算开发一个访问用户个人信息或其他任何内容的 Web 应用程序，只是简单地显示发布在 Facebook 帐户（可公开访问）上的注释。

任何有关如何解决此问题的建议将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T15:05:34.333

您想获取页面访问令牌。[https://developers.facebook.com/docs/authentication/pages/](https://developers.facebook.com/docs/authentication/pages/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T15:09:22.613

如果您不想通过访问令牌和正确安装应用程序来执行此操作，您可以使用 curl 轻松访问这些笔记（如果这些笔记可供公众使用），您只需转到类似于 facebook.com 的笔记页面/USERNAME/notes 从那里你必须使用 regEx 获取笔记列表，然后浏览每个链接并通过网络抓取获取内容。

祝你好运 ！

# java - 播放框架，使用 JPA 和 Morphia，如果应用于相同的模型，会发生冲突

> ID：10899754
> 
> 赞同：0
> 
> 时间：2012-06-05T15:00:58.637
> 
> 标签：java, jpa, playframework, morphia

我有一个 Location 模型类。我有一个抽象类，Persister。我有两个抽象类的实现：MySQLPersister 和 MongoDBPersister。推理是为了让我可以在需要时在使用 MySQL 或 MongoDB 之间切换。请注意，我没有同时使用两者。只是为了更灵活。

问题是 Location 模型类扩展了**Model**，MySQL 必须导入 play.db.jpa.Model。MongoDB 将导入 play.modules.morphia.Model。这成为一个问题，因为每次我想切换时，不仅要更改 Location 模型类，而且由于两个库具有不同的模型方法，我还必须更改 Persister 的实现中的代码。

例如，如果我想从使用 JPA 更改为 Morphia，我必须将 MySQLPersister 中的代码注释掉。Model.find().fetch() 在 JPA 中返回 Iterable，当我导入 JPA 时，Morphia 中的 Model.find().filter().asList() 甚至都不存在。

我该如何克服这个问题？我不想创建一个通用模型类和另外两个导入每个数据库的相同模型类 - 这是太多的重复。

基本上我发现 play-morphia 和 play-jpa 的设计不灵活：

```
JPA                             PlayMorphia
play.db.jpa.Model           >   play.modules.morphia.Model
javax.persistence.Entity    >   com.google.code.morphia.annotations.Entity 
```

如果两者都从一个更通用的类中扩展出来`play.db.jpa.Model`，那就更好了。这样，如果我想实现两个数据库，我就不必更改模型。`play.modules.morphia.Model``Model`

谢谢！如果我的解释不清楚，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T19:20:04.583

我决定采用以下解决方案：

在 MySQLPersister 和 MongoDBPersister 中创建内部 Location 类，并使用它们来执行 ORM 和查询数据库。然后将由内部 Location 类键入的结果转换为通用的、面向前端的 LocationBean。本质上，我在两个 Persister 的内部类中复制了两次 Location 模型。

这样，如果我想在数据库之间切换，我只需要在初始化一个新的 MySQLPersister() 或一个新的 MongoDBPersister 之间进行切换。如果我需要实现一个新的数据库，我只需要再次扩展 LocationPersister ，使用它自己的 ORM 内部类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T16:44:28.833

I would try using another abstraction layer on top of your persistence layer. Your abstract layer should provide implementation-independent methods for your needs to your application and the layer should then delegate the calls to the actual, framework-dependent, persistence layer implementation (e.g. jpa.Model or Morphia.model).

This is not too much duplication, but a good use case for object oriented programming :)

# nfs - 用于检查 Microsoft 服务器上 NFS 共享可用性的脚本

> ID：10899757
> 
> 赞同：0
> 
> 时间：2012-06-05T15:01:08.017
> 
> 标签：nfs

我正在寻找一种方法来检查 Windows 服务器上的 NFS 共享，以查看共享本身是活动的还是非活动的。即使正在使用共享并且 NFS 服务器服务仍在运行，我也一直遇到共享变得不活动的问题。我无法在 Google 上找到我要查找的内容，而且我在这里看到的 NFS 共享检查脚本都在检查房子的 Unix 端。任何帮助将不胜感激 ：-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T14:21:06.030

您应该使用 showexport 和 rpcinfo 程序

```
$ rpcinfo -t netapp12 100003 3
 program 100003 version 3 ready and waiting
$ 
```

可能它们也可用于 Windows 客户端。

# c# - C# - 将匿名函数作为参数传递

> ID：10899761
> 
> 赞同：1
> 
> 时间：2012-06-05T15:01:17.610
> 
> 标签：c#, orm, delegates, fluentdata

我正在使用 FluentData 作为我的数据库的 orm，并且我正在尝试创建一个通用查询方法：

```
internal static T QueryObject<T>(string sql, object[] param, Func<dynamic, T> mapper)
{
    return MyDb.Sql(sql, param).QueryNoAutoMap<T>(mapper).FirstOrDefault();
} 
```

除了我班级的职能：

```
public class MyDbObject
{
    public int Id { get; set; }
}

public static MyDbObject mapper(dynamic row)
{
    return new MyDbObject {
    Id = row.Id
    };
}

public static MyDbObject GetDbObjectFromTable(int id)
{
    string sql = @"SELECT Id FROM MyTable WHERE Id=@Id";
    dynamic param = new {Id = id};
    return Query<MyDbObject>(sql, param, mapper); 
} 
```

在`Query<MyDbObject>(sql, param, mapper)`编译器说：

`An anonymous function or method group connot be used as a constituent value of a dynamically bound object.`

任何人都知道这意味着什么？

编辑：

当我将方法转换为委托时，编译器不会抱怨：

```
public static Func<dynamic, MyDbObject> TableToMyDbObject =
    (row) => new MyDbObject
                 {
                     Id = row.Id
                 } 
```

它仍然引出了为什么一种方式有效而另一种方式无效的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T08:27:54.937

问题与错误所说的完全一样...

> 匿名函数或方法组不能用作动态绑定操作的组成值。

它只是意味着您不能使用匿名函数，因为其中一个参数是动态类型，因此要修复您的方法，您可以简单地将参数转换为`object`

```
public static MyDbObject GetDbObjectFromTable(int id)
{
    string sql = @"SELECT Id FROM MyTable WHERE Id=@Id";

    dynamic param = new {Id = id}; // this Type dynamic is what causes the issue.

    // you could just fix with a cast to object
    return Query<MyDbObject>(sql, (object)param, mapper); 
} 
```

或者大概是通过查看您的代码......简单地说。

```
 return Query<MyDbObject>(sql, id, mapper); 
```

使用 Func 委托时它不会抱怨的原因是因为您从不使用动态类型调用 DLR，因此没有动态绑定操作。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-09-11T12:25:20.720

当我将方法转换为委托时，编译器不会抱怨：

```
public static Func<dynamic, MyDbObject> TableToMyDbObject =
    (row) => new MyDbObject
                 {
                     Id = row.Id
                 } 
```

# jquery - 带有 eq(index) 的 Jquery 克隆函数

> ID：10899762
> 
> 赞同：1
> 
> 时间：2012-06-05T15:01:17.583
> 
> 标签：jquery, indexing, clone

我有许多类似的 div，其 id 为 tictab ..我想让第一个 tictab 不可见并在最后添加它的克隆。我正在使用以下代码

```
$('#leftButton').click(function(){      
    $('#tictab').clone().insertBefore('#rightButton');

    $('#tickers').find('#tictab').eq(ind).css('display','none');

    ind++;  
}); 
```

ind 从 0 开始。但我在这里面临的问题是 jquery 使克隆的 tictabs 也由于某种原因不可见......我猜这是因为 eq() 函数的索引中的一些问题。谁能告诉我正确的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T15:04:14.847

您不能有多个具有相同 ID 的元素。如果您需要它们之间的这种类型的关系，请使用通用的类名，而不是通用的 id 名称。id 属性是在文档中的任何其他元素上找不到的唯一值。

听起来好像您要克隆最新的`.tictab`元素，将其隐藏，将其插入到 之前`#rightButton`，然后显示上一个隐藏的克隆。如果是这种情况，以下将起作用：

```
$("#leftButton").on("click", function(){
    $(".tictab:last").show().clone().hide().insertBefore("#rightButton");
});​ 
```

小提琴：http: [//jsfiddle.net/jonathansampson/dpze5/](http://jsfiddle.net/jonathansampson/dpze5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T15:05:23.460

使用`class`insted of`id`来识别不同的 div 但具有相同的类。

# css - Cross Browser Pure CSS3 Vertical Accordion - 保持窗口打开直到另一个窗口被点击

> ID：10899763
> 
> 赞同：0
> 
> 时间：2012-06-05T15:01:27.173
> 
> 标签：css, menu, accordion

如何编辑代码，以便即使鼠标不再悬停窗口也将保持打开状态，但在选择另一个窗口/类别时会关闭？

```
.verticalaccordion>ul {
    margin: 0;
    padding: 0;
    list-style:none;
    width: 500px;
}

.verticalaccordion>ul>li {
    display:block;
    overflow: hidden;
    margin: 0;
    padding: 0;
    list-style:none;
    height:40px;
    width: 500px;

    /* Decorative CSS */
    background-color:#f0f0f0;

    /* CSS3 Transition Effect */
    transition: height 0.3s ease-in-out;
    -moz-transition: height 0.3s ease-in-out;
    -webkit-transition: height 0.3s ease-in-out;
    -o-transition: height 0.3s ease-in-out;
}

.verticalaccordion>ul>li>h3 {
    display:block;
    margin: 0;
    padding:10px;
    height:19px;

    /* Decorative CSS */
    border-top:#f0f0f0 1px solid;
    font-family: Arial, Helvetica, sans-serif;
    text-decoration:none;
    text-transform:uppercase;
    color: #000;
    background: #cccccc;

    /* CSS3 Gradient Effect */
    background: -moz-linear-gradient( top, #999999, #cccccc);
    background: -webkit-gradient(linear, left top, left bottom, from(#999999), to(#cccccc));
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=#ff999999, endColorstr=#ffcccccc); /* IE 7 */
    -ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#ff999999, endColorstr=#ffcccccc)";   /* IE 8 */
}

.verticalaccordion>ul>li>div {
    margin:0;
    overflow: auto;
    padding:10px;
    height:220px;
}

.verticalaccordion>ul>li:hover {
    height: 280px;
}

.verticalaccordion:hover>ul>li:hover>h3 {
    /* Decorative CSS */
    color:#fff;
    background: #000000;

    /* CSS3 Gradient Effect */
    background: -moz-linear-gradient( top, #454545, #000000); /* FF, Flock */
    background: -webkit-gradient(linear, left top, left bottom, from(#454545), to(#000000)); /* Safari, Chrome */
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=#ff454545, endColorstr=#ff000000); /* IE 5.5 - IE 7 */
    -ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#ff454545, endColorstr=#ff000000)";   /* IE 8 */
}

.verticalaccordion>ul>li>h3:hover {
    cursor:pointer;
}

    <div class="verticalaccordion">
<ul>
    <li>
        <h3>Heading 1</h3>
        <div>Content For Panel 1.</div>
    </li>
    <li>
        <h3>Heading 2</h3>
        <div>Content For Panel 2</div>
    </li>
    <li>
        <h3>Heading 3</h3>
        <div>Content For Panel 3.</div>
    </li>
    <li>
        <h3>Heading 4</h3>
        <div>Content For Panel 4</div>
    </li>
</ul>
</div> 
```

以下是上述代码的来源：[Cross Browser Pure CSS3 Vertical Accordion](http://www.w3avenue.com/2010/04/02/cross-browser-pure-css3-vertical-accordion/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T15:22:17.187

您无法在纯 CSS 中知道放置在当前元素（或其子元素）之后的元素会发生什么。因此，即使使用`:target + li > a:hover`，`:focus ~ blah`或者您可以编造的任何内容，当第三个链接发生问题时，您也不知道如何处理第一个链接。

对复杂的菜单使用 jQuery（或 JS 或任何框架），它更实用，与不太旧的浏览器有更好的兼容性；）

# ruby - 在 ubuntu 12.04 LTS 上安装 rvm 的 bash 问题

> ID：10899768
> 
> 赞同：1
> 
> 时间：2012-06-05T15:01:43.453
> 
> 标签：ruby, bash, rvm, ubuntu-12.04

我对 Linux 完全陌生，在安装 rvm 时遇到了麻烦。从[https://rvm.io/rvm/install/](https://rvm.io/rvm/install/)，我运行

```
$ curl -L get.rvm.io | bash -s stable --ruby 
```

在终端。我收到以下错误：

```
bash: line 359: /usr/share/ruby-rvm/RELEASE: Permission denied 
```

我不知道第 359 行指的是哪个文件。这里发生了什么？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T18:45:34.537

您正在使用被 ubuntu 破坏的 rvm 设置，此软件包未维护，请使用此指令修复： [Installed Ruby 1.9.3 with RVM but command line doesn't show ruby​​ -v](https://stackoverflow.com/questions/9056008/installed-ruby-1-9-3-with-rvm-but-command-line-doesnt-show-ruby-v/9056395#9056395)

# validation - Mongoose 验证竞赛条件？

> ID：10899770
> 
> 赞同：2
> 
> 时间：2012-06-05T15:01:45.340
> 
> 标签：validation, node.js, mongoose, race-condition

我有一个名为应用程序的模型：

```
var ApplicationSchema = new mongoose.Schema({
name       : {type: String, validate: [uniqueName, 'Unique Name']},
dateCreated: Date,
containers : [ContainerSchema]
});
mongoose.model('Application', ApplicationSchema);
var Application = database.model('Application'); 
```

它在保存时调用一个名为 uniqueName 的验证函数：

```
function uniqueName(name)
{
console.log('In Unique Name function');
Application.find({}, function(error, documents) {
    for(var i = 0; i < documents.length; i++) {
        if(documents[i].name == name) {
            console.log('About to return false');
            return false;
        }
    }
});
return true;
} 
```

稍后在代码中，我将一些数据放入模型中并保存：

```
newApplication.name = request.body.name;
newApplication.save(function(error) {
    console.log('Callback for save');
    if(error) {
        console.log('error if statement');
        response.statusCode = 409;
        response.end();
    }
    console.log('Done with callback');
});
response.statusCode = 201;
response.end(); 
```

当我用一个不唯一的名称测试它时，我得到一个 201 响应和来自我的终端的以下输出：

```
In Unique Name function
Callback for save
Done with callback
About to return false 
```

我做错了什么，或者这真的是猫鼬的比赛条件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T00:04:51.873

当您的验证器是异步的（就像这里一样）时，它需要接受第二个参数，这是一个回调，您必须使用 true 或 false 调用它，具体取决于该验证是否通过。所以：

```
function uniqueName(name, callback)
{
    Application.find({}, function(error, documents) {
        for(var i = 0; i < documents.length; i++) {
            if(documents[i].name == name) {
                return callback(false);
            }
        }
        return callback(true);
    }
} 
```

但是，这不是很有效；你应该：

过滤您的`find`而不是获取所有文档并手动搜索它们。例如

```
Application.find({name: name} ... 
```

或者更好：

创建唯一索引`name`，让 mongo 为您确保唯一性。例如

```
var ApplicationSchema = new mongoose.Schema({
    name: {type: String, unique: true}, 
    ... 
```

# mysql - Mysql查询优化不佳

> ID：10899771
> 
> 赞同：0
> 
> 时间：2012-06-05T15:01:45.650
> 
> 标签：mysql, sql, optimization

我不是 sql 专家，我需要以下查询的帮助。它的优化很差，执行时间太长。是否可以替换`IN()`为`JOIN()`以加快查询速度？怎么做？

```
SELECT * 
FROM   shop_orders 
WHERE  id IN (SELECT orders_id 
              FROM   shop_orders_data 
              WHERE  closed = '1' /*AND backorder='0'*/) 
       AND id IN (SELECT orders_id 
                  FROM   shop_orders_products 
                  WHERE  products_id IN (SELECT id 
                                         FROM   shop_products 
                                         WHERE  artno = '120000' 
                                                 OR name LIKE '%120000%')) 
ORDER  BY created DESC 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T15:08:23.600

我会说 LIKE 在这里造成了最大的延迟...... artno 还不够吗？LIKE 通常是一个非常昂贵的过程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T15:08:19.733

我认为应该这样做：

```
SELECT 
  s.* 
FROM 
  shop_orders s 
INNER JOIN
  shop_orders_data od 
ON 
  s.id=od.orders_id 
INNER JOIN
  shop_orders_products sop 
ON 
  s.id=sop.orders_id 
INNER JOIN 
  shop_products sp 
ON 
  sop.products_id=sp.id 
WHERE
  od.closed=1
AND 
  ( sp.artno='120000' or sp.name LIKE '%120000%' ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T15:11:30.193

```
Select so.*
from shop_orders as so
     join shop_orders_data as sod on sod.orders_id = so.id
     join (select orders_id 
           from   shop_orders_products as sop
                  join shop_products as sp on sp.id = sop.products_id
           where  sp.artno = '120000' 
                  OR sp.name like '%120000%') as sop on sop.orders_id = so.id
where 
  sod.closed = '1'
order by so.created desc 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-05T15:07:56.287

是的，您走在正确的道路上——您可以在所有这些表之间进行内部连接，而不是在这些 IN 运算符之间进行连接。

```
SELECT
    so.* 
FROM 
    shop_orders so
    INNER JOIN shop_orders_data sod
       ON so.id = sod.orders_id
    INNER JOIN shop_orders_products sop
       ON sod.id = sop.orders_id
    INNER JOIN shop_products sp
       ON sop.products_id = sp.id
WHERE sod.closed = '1'
    AND (sp.artno = '120000' OR sp.name LIKE '%120000%') 
```

# python - 提高 python 正则表达式的性能

> ID：10899779
> 
> 赞同：3
> 
> 时间：2012-06-05T15:02:20.917
> 
> 标签：python, regex

试图改进下面的正则表达式：

```
urlpath=columns[4].strip()
                                urlpath=re.sub("(\?.*|\/[0-9a-f]{24})","",urlpath)
                                urlpath=re.sub("\/[0-9\/]*","/",urlpath)
                                urlpath=re.sub("\;.*","",urlpath)
                                urlpath=re.sub("\/",".",urlpath)
                                urlpath=re.sub("\.api","api",urlpath)
                                if urlpath in dlatency: 
```

这会像这样转换 URL：

```
/api/v4/path/apiCallTwo?host=wApp&trackId=1347158 
```

至

```
api.v4.path.apiCallTwo 
```

想尝试并在性能方面改进正则表达式，因为此脚本每 5 分钟运行一次大约 50,000 个文件，并且总共需要大约 40 秒才能运行。

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T15:23:35.103

带有[urlparse](http://docs.python.org/library/urlparse.html)的单行代码：

```
urlpath = urlparse.urlsplit(url).path.strip('/').replace('/', '.') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T19:15:25.433

这是我的 oneliner 解决方案（已编辑）。

```
urlpath.partition("?")[0].strip("/").replace("/", ".") 
```

正如其他一些人提到的那样，这里的速度改进可以忽略不计。除了使用 re.compile() 来预编译你的表达式，我会开始寻找其他地方。

```
import re

re1 = re.compile("(\?.*|\/[0-9a-f]{24})")
re2 = re.compile("\/[0-9\/]*")
re3 = re.compile("\;.*")
re4 = re.compile("\/")
re5 = re.compile("\.api")
def orig_regex(urlpath):
    urlpath=re1.sub("",urlpath)
    urlpath=re2.sub("/",urlpath)
    urlpath=re3.sub("",urlpath)
    urlpath=re4.sub(".",urlpath)
    urlpath=re5.sub("api",urlpath)
    return urlpath

myregex = re.compile(r"([^/]+)")
def my_regex(urlpath):
    return ".".join( x.group() for x in myregex.finditer(urlpath.partition('?')[0]))

def test_nonregex(urlpath)
    return urlpath.partition("?")[0].strip("/").replace("/", ".")

def test_func(func, iterations, *args, **kwargs):
    for i in xrange(iterations):
        func(*args, **kwargs)

if __name__ == "__main__":
    import cProfile as profile

    urlpath = u'/api/v4/path/apiCallTwo?host=wApp&trackId=1347158'
    profile.run("test_func(orig_regex, 10000, urlpath)")
    profile.run("test_func(my_regex, 10000, urlpath)")
    profile.run("test_func(non_regex, 10000, urlpath)") 
```

结果

```
Iterating orig_regex 10000 times
     60003 function calls in 0.108 CPU seconds

....

Iterating my_regex 10000 times
     130003 function calls in 0.087 CPU seconds

....

Iterating non_regex 10000 times
     40003 function calls in 0.019 CPU seconds 
```

不做 re.compile 你的 5 正则表达式结果

```
running <function orig_regex at 0x100532050> 10000 times
     210817 function calls (210794 primitive calls) in 0.208 CPU seconds 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-05T15:10:21.830

尝试这个：

```
s = '/api/v4/path/apiCallTwo?host=wApp&trackId=1347158'
re.sub(r'\?.+', '', s).replace('/', '.')[1:]
> 'api.v4.path.apiCallTwo' 
```

为了获得更好的性能，请编译一次正则表达式并重用它，如下所示：

```
regexp = re.compile(r'\?.+')
s = '/api/v4/path/apiCallTwo?host=wApp&trackId=1347158'

# `s` changes, but you can reuse `regexp` as many times as needed
regexp.sub('', s).replace('/', '.')[1:] 
```

一种更简单的方法，不使用正则表达式：

```
s[1:s.index('?')].replace('/', '.')
> 'api.v4.path.apiCallTwo' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T23:22:09.390

逐行遍历：

您没有捕获或分组，因此不需要 and ，并且 the`(`不是Python 正则表达式中的特殊字符，因此不需要转义：`)``/`

`urlpath = re.sub("\?.*|/[0-9a-f]{24}", "", urlpath)`

用 a 替换 a`/`后跟零重复`/`是没有意义的：

`urlpath = re.sub("/[0-9/]+", "/", urlpath)`

使用字符串方法更快地删除固定字符及其之后的所有内容：

`urlpath = urlpath.partition(";")[0]`

使用字符串方法用另一个固定字符串替换固定字符串也更快：

`urlpath = urlpath.replace("/", ".")`

`urlpath = urlpath.replace(".api", "api")`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-05T15:18:41.350

你确定你需要正则表达式吗？
IE，

```
urlpath = columns[4].strip()
urlpath = urlpath.split("?")[0]
urlpath = urlpath.replace("/", ".") 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-05T15:13:18.180

您还可以编译 re 语句以获得性能提升，

例如

```
compiled_re_for_words = re.compile("\w+")
compiled_re_for_words.match("test") 
```

# ruby - Twitter gem - 如何获取用户的国家？

> ID：10899780
> 
> 赞同：1
> 
> 时间：2012-06-05T15:02:21.557
> 
> 标签：ruby, twitter, gem

我知道 Twitter 上的用户名。如何使用 Twitter gem 获取用户所在的国家/地区？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T15:12:00.740

这是第一个[使用示例](https://github.com/sferik/twitter/blob/v2.5.0/README.md#usage-examples)：

```
Twitter.user("sferik").location 
```

然而，`location`只是一个字符串。用户的国家没有明确存储。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-15T02:13:43.660

用户对象持有国家信息

```
 "user":{"statuses_count":3080, "favourites_count":22, "protected":false,
 "profile_text_color":"437792", "profile_image_url":"...", "name":"Twitter API", 
"profile_sidebar_fill_color":"a9d9f1", "listed_count":9252, "following":true, 
"profile_background_tile":false, "utc_offset":-28800, "description":"The Real Twitter API. 
I tweet about API changes, service issues and happily answer questions about Twitter and 
our API. Don't get an answer? It's on my website.", "location":"San Francisco, CA", 
"contributors_enabled":true, "verified":true, "profile_link_color":"0094C2", 
"followers_count":665829, "url":"http:\/\/dev.twitter.com", "default_profile":false, 
"profile_sidebar_border_color":"0094C2", "screen_name":"twitterapi", 
"default_profile_image":false, "notifications":false, "display_url":null, 
"show_all_inline_media":false, "geo_enabled":true, "profile_use_background_image":true, 
"friends_count":32, "id_str":"6253282", "entities":{"hashtags":[], "urls":[], 
"user_mentions":[]}, "expanded_url":null, "is_translator":false, "lang":"en", 
"time_zone":"Pacific Time (US &amp; Canada)", "created_at":"Wed May 23 06:01:13 +0000 
2007", "profile_background_color":"e8f2f7", "id":6253282, "follow_request_sent":false, 
"profile_background_image_url_https":"...", "profile_background_image_url":"...", 
"profile_image_url_https":"..."} 
```

它也可以由 Coordinates 对象确定 - 如果您想使用地图服务来尝试确定纬度和经度线根据国家/地区放置推文的位置，或者您可以描绘一个国家的角落以尝试获取一般信息主意。例如，您可以使用

> 最北点西北角，明尼苏达州（49°23'4.1" N）
> 
> 佛罗里达州最南端 Ballast Key (24°31′15″ N)
> 
> 最东端的 Sail Rock，就在缅因州 West Quoddy Head 近海（66°57' W）
> 
> 华盛顿州阿拉瓦角近海的最西点 Bodelteh 群岛（124°46' W）

作为美国连续 48 个州，places 对象和 users 对象的位置在实践中经常为 null 或未指定：

```
"coordinates":
{
    "coordinates":
    [
        -75.14310264,
        40.05701649
    ],
    "type":"Point"
} 
```

或最后由地点对象

```
"place":
{
    "attributes":{},
     "bounding_box":
    {
        "coordinates":
        [[
                [-77.119759,38.791645],
                [-76.909393,38.791645],
                [-76.909393,38.995548],
                [-77.119759,38.995548]
        ]],
        "type":"Polygon"
    },
     "country":"United States",
     "country_code":"US",
     "full_name":"Washington, DC",
     "id":"01fbe706f872cb32",
     "name":"Washington",
     "place_type":"city",
     "url": "http://api.twitter.com/1/geo/id/01fbe706f872cb32.json"
} 
```

# node.js - nodejs / express：调用 next() 会自动返回调用它的函数吗？

> ID：10899784
> 
> 赞同：2
> 
> 时间：2012-06-05T15:02:29.980
> 
> 标签：node.js, express

只是想摆脱我的想法：

在处理 Express/Nodejs 中的路由时，我想知道调用是否`next()`总是返回调用它的函数？考虑：

```
app.get('/users/:id?', function(req, res, next){
   //just as as example
   var err = doValidation(req);
   if (err) {
       next(err);
   } 
   next(); //will this ever be called?
}); 
```

如果发生错误，是否会调用第二个 next() ，或者调用第一个`next(err)`（自动）返回调用它的函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-02T14:03:22.970

调用`next()` **不会停止执行**，但`return`会停止，因此**return next()**会返回。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T15:58:53.507

是的，如果出现错误，两者都会被调用。你想做：

```
if(err) {
  return next(err);  
} 
```

# java - 使用 jProfiler 生成调用图

> ID：10899785
> 
> 赞同：0
> 
> 时间：2012-06-05T15:02:30.217
> 
> 标签：java, profiling, jprofiler, call-graph

我想使用 jProfiler 生成调用图。我已收到评估版的许可密钥。我想使用 jprofiler 来分析一个简单的网络服务器（jibble miniwebserver）。我正在使用Linux。我从“http://www.ej-technologies.com/download/jprofiler/files.html”下载了 jprofiler_linux_7_1_2.sh 文件，并通过运行下载的 .sh 文件安装了 jprofiler。现在**谁能告诉我应该怎么做才能用 jprofiler 运行应用程序服务器？**我可以通过此命令（java -jar Simplewebserver.jar）运行应用程序服务器而不进行分析，以及**如何使用 jProfiler 运行我的简单 java 程序（有 5 个方法调用）？**

我真的很感激任何帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T15:25:45.750

I think the documentation should be clear on how it works: [jprofiler documentation](http://resources.ej-technologies.com/jprofiler/help/doc/offline/offline.html).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T11:31:45.563

如果您在 Linux 机器上有 GUI，请在启动中心创建一个新会话，将会话类型设置为“应用程序”并在“主类或可执行 jar 文件”文本字段中选择 JAR 文件。然后您可以简单地启动会话来分析您的应用程序。

# c# - Aspose.Email 程序集检查邮件服务器 ListMessages 方法失败

> ID：10899789
> 
> 赞同：0
> 
> 时间：2012-06-05T15:02:46.280
> 
> 标签：c#, winforms, .net-4.0, mail-server, aspose

我正在使用**Aspose.Email**程序集来检查邮件服务器的收件箱中是否有任何收到的邮件。但是下面代码中的**emailClient.ListMessages(emailClient.MailboxInfo.InboxUri)**方法返回如下错误，

## 错误：

```
The remote server returned an error: (405) Method Not Allowed. 
```

## 代码：

```
System.Net.NetworkCredential credential = new System.Net.NetworkCredential("username", "password", "domainname");

Aspose.Email.Exchange.ExchangeClient emailClient = new Aspose.Email.Exchange.ExchangeClient("MailserverUri", credential);

Aspose.Email.Exchange.ExchangeMessageInfoCollection messageInfoCollection = emailClient.ListMessages(emailClient.MailboxInfo.InboxUri); 
```

## 堆栈跟踪：

```
 at Aspose.Email.Exchange.ExchangeClient.GetMailboxInfo(String mailbox)
 at Aspose.Email.Exchange.ExchangeClient.GetMailboxInfo()
 at Aspose.Email.Exchange.ExchangeClient.get_MailboxInfo()
 at ACS.PMO.MainForm.ProcessAction() in D:\Projects\MainForm.cs:line 54
 at ACS.PMO.ClientService.MCPClient.ExecuteProcess() 
```

## **编辑**

```
Aspose.Email.Exchange.ExchangeClient emailClient = new Aspose.Email.Exchange.ExchangeClient("MailserverUri", credential); 
```

我针对的**MailserverUri**是 Exchange Web 服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T08:22:36.490

最后我把它改正了......

ExchangeWebServiceClient 应在 Exchange Web 服务的情况下使用。使用此类而不是 ExchangeClient。在 EWS 的情况下，服务器 url 也不同。我用来克服错误的代码如下，

```
 ExchangeWebServiceClient client = new ExchangeWebServiceClient("https://exchange-server-host/ews/Exchange.asmx", "username", "password", "domain"); 
```

有关更多详细信息，请查看以下链接，

[http://www.aspose.com/community/forums/thread/301094/405-method-not-allowed-while-connecting-to-exchange-web-service.aspx](http://www.aspose.com/community/forums/thread/301094/405-method-not-allowed-while-connecting-to-exchange-web-service.aspx)

# javascript - 带有重置变量的 JavaScript 对象

> ID：10899797
> 
> 赞同：0
> 
> 时间：2012-06-05T15:03:18.563
> 
> 标签：javascript, javascript-objects

我只是在学习 JavaScript 对象并且有一个问题/问题。我有以下代码/ js 对象：

**更改：这是完整的代码 - 这是一个 Appcelerator Titanium 项目！：**

```
spike.xhr = spike.xhr || {};

spike.xhr.init = function() {
    this.severResponse = '';
    this.xhrMethod = 'GET';
}

spike.xhr.isOnline = function() {
    if( Titanium.Network.online ) {
        return true;
    } else {
        return false;
    }
}

spike.xhr.notOnline = function() {
    var alertDialog = Titanium.UI.createAlertDialog({ 
        title: CONFIG.PROJECT_SHORT, 
        message: 'You do not have an online connect. Please connect...',
        buttonNames: ['Continue'],
        cancel: 0
    }); 
    alertDialog.show(); 
}

spike.xhr.connect = function( url ) {

    if( spike.xhr.isOnline() ) {
        spike.xhr.clients = Ti.Network.createHTTPClient();

        spike.xhr.clients.onload = function() {
            if (spike.xhr.clients.status != 200 && spike.xhr.clients.status != 201) {
                var alertDialog = Titanium.UI.createAlertDialog({ 
                    title: CONFIG.PROJECT_SHORT, 
                    message: 'We are sorry, but we have received an status error!',
                    buttonNames: ['Continue'],
                    cancel: 0
                }); 
                alertDialog.show(); 
                return false;
            }    
            this.serverResponse = this.responseText; 
        }

        spike.xhr.clients.onerror = function(e) {
            Ti.API.log( 'ERROR: ' + e.status + ': ' + e.statusText + ' - ' + e.error );
        }   

        spike.xhr.clients.open( this.xhrMethod, url );

        spike.xhr.clients.send();
    } else {
        spike.xhr.notOnline();
    }
}

spike.xhr.basicAuthentication = function( username, password ) {
    authstr = 'Basic ' +Titanium.Utils.base64encode( username+':'+ password);
    spike.xhr.client.setRequestHeader( 'Authorization', authstr );
}

spike.xhr.setMethod = function( type ) {
    this.xhrMethod = type;
}

spike.xhr.response = function() {
    return this.serverResponse;
} 
```

如果我现在运行：

```
spike.xhr.connect( 'http://mydomain' );
theResponse = spike.xhr.response(); 
```

我得到`<null>`回报！- 为什么我不`"This is a Test!"`回来或更好的问题：我必须改变什么才能`"This is a Test!"`回来？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T15:16:27.247

上面的代码不起作用的原因是因为你的`spike.xhr.connect`函数是*异步*的。这意味着您可以告诉浏览器发出请求，但在浏览器等待响应返回时继续执行其他操作。

JavaScript 在单个线程中运行，这意味着您一次只能执行一件事。某些操作（如“AJAX”调用）是*异步*的，因为浏览器知道如何发出请求，但不会阻止您当前运行的代码等待请求。通常，使用*回调函数调用异步代码，该函数**在请求返回时*运行：

```
// pseudo code.

spike.xhr.connect( 'http://google.com', function ( response ) {
    alert( 'google' );
});
alert( 'this will fire before spike.xhr.connects callback' ); 
```

*当来自服务器的响应返回并且*浏览器*没有做任何其他事情*时，将执行回调函数。

# android - 在 Google Play 商店之外分发 Android 应用程序

> ID：10899798
> 
> 赞同：1
> 
> 时间：2012-06-05T15:03:19.573
> 
> 标签：android, google-play, apk

有谁知道是否可以在 Google Play 商店之外分发 Android 应用程序？假设我想把它放在我的网站上供人们直接下载。这有什么技术问题吗？法律问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T15:07:21.337

这绝对没有问题。单击指向 apk 文件的链接将下载该文件，用户将能够安装它。更多：还有像亚马逊这样的替代市场！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T15:18:25.530

> 假设我想把它放在我的网站上供人们直接下载。

在您的网络服务器上上传 APK 文件。

> 这有什么技术问题吗？

用户需要在他们的手机上勾选 CheckBox => 允许安装非市场应用程序。

> 法律问题？

只要您不使用受版权保护/被黑的库

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T15:12:04.780

您希望如何执行[许可](https://stackoverflow.com/questions/4937961/license-verification-for-non-market-distribution-channels)（如果需要）是一个技术问题，例如 Android Market 和 Amazon Market 已经解决了。

# c# - C# 和继承。当对象为扩展类对象时，基类属性为空

> ID：10899800
> 
> 赞同：5
> 
> 时间：2012-06-05T15:03:30.933
> 
> 标签：c#, inheritance

我有以下课程：

```
public class BaseContainer
{
   public BaseItem item {get; set;}
}

public class ExtendedContainer : BaseContainer
{
   new public ExtendedItem item {get; set;}
}

public class BaseItem{
   public string Name { get; set; }
}

public class ExtendedItem : BaseItem
{
   public string Surname { get; set; }
} 
```

然后我有以下说明：

```
ExtendedItem ei = new ExtendedItem { Name = "MyName", Surname = "MySurname" };
ExtendedContainer ec = new ExtendedContainer { item = ei };
BaseContainer bc = ec;
string temp = bc.item.Name;  // bc.item is null, why? 
```

为什么 bc.item 为空？这不应该是因为 ExtendedItem 是 BaseItem 的子类，但是当我运行代码时它为空。谁能帮我解决这个问题？

我这样做的原因是我正在使用 MVC3 并且我正在传递给属于类似结构的部分视图对象/模型，并且我通常只需要基类中的属性。

提前致谢。

更新

乔恩是对的，我正在访问不同的对象。我所做的修复它是使用构造函数将项目属性设置为同一个对象。像这样：

```
public class BaseContainer
{
    public BaseItem item {get; set;}
    public BaseContainer(BaseItem item)
    {
        this.item = item;
    }
}

public class ExtendedContainer : BaseContainer
{
    public ExtendedItem item {get; set;}

    public ExtendedContainer(ExtendedItem item) : base(item)
    {
        this.item = item;
    }
}

public class BaseItem{
    public string Name { get; set; }
}

public class ExtendedItem : BaseItem
{
    public string Surname { get; set; }
} 
```

然后我只创建对象：

```
 ExtendedItem ei = new ExtendedItem { Name = "MyName", Surname = "MySurname" };
    ExtendedContainer ec = new ExtendedContainer(ei);
    BaseContainer bc = ec;
    string temp = bc.item.Name; 
```

现在可以了

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T15:05:33.527

您使用了 new 关键字，它隐藏了 BaseContainer 中的原始基本属性。

实例化 ExtendedContainer 时，是在子类上设置新属性，而不是在基类上设置原始属性。

只需从子类中删除该属性，一切都应该正常。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T15:05:43.247

这里有两个完全独立的属性，可以存储不同的值。

您已`ExtendedContainer.item`在对象上设置了属性，但尚未设置`BaseContainer.item`属性。

想象一下这两个属性有完全不同的名称——你不会期望设置一个来改变另一个，对吗？就 CLR 而言，这两个属性的名称只是巧合。

# haskell - 元组的 Haskell 类型类

> ID：10899804
> 
> 赞同：16
> 
> 时间：2012-06-05T15:03:38.597
> 
> 标签：haskell, typeclass

我在玩类型类并做了这个：

```
class Firstable f where
  fst :: f a -> a

class Secondable f where
  snd :: f a -> a 
```

然后我尝试添加一个实现`(,)`并意识到我可以这样做：

```
instance Secondable ((,) a) where
  snd (x,y) = y 
```

我很确定这是可行的，因为`Secondable`应该有那种类型`(* -> *)`，`((,) a)`但是，我不知道如何实现`Firstable`绑定变量的`((,) * a)`位置`*`，在我的解释中，我试图做相当于：

```
instance Firstable (flip (,) a) where ... 
```

有没有办法在 Haskell 中做到这一点？最好没有扩展？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-05T16:16:43.477

您可以像这样使用类型族（对 Edward 所写内容的不同看法）：

```
{-# LANGUAGE TypeFamilies #-}

class Firstable a where
  type First a :: *
  fst :: a -> First a

class Secondable a where
  type Second a :: *
  snd :: a -> Second a

instance Firstable (a,b) where
  type First (a, b) = a
  fst (x, _) = x

instance Secondable (a,b) where
  type Second (a, b) = b
  snd (_, y) = y 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T15:31:07.617

```
class Firstable f where
    fst :: f a b -> a

class Secondable f where
    snd :: f a b -> b 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T16:12:16.560

MPTCS 和 Fundeps 或 TypeFamilies 可以提供参数保证更差的版本。

```
type family Fst p
type instance Fst (a,b) = a
type instance Fst (a,b,c) = a 
```

...

```
class First p where
   fst :: p -> Fst p

instance Fst (a,b) where
   fst (a,_) = a

instance Fst (a,b,c) where
   fst (a,_,_) = a 
```

...

但最终，您需要使用一些扩展。

# php - php/mysql 搜索日期并发送电子邮件，如果日期是今天

> ID：10899805
> 
> 赞同：0
> 
> 时间：2012-06-05T15:03:45.583
> 
> 标签：php, mysql

我在我的表中存储了 2012 年 7 月 6 日这种格式的日期。如果日期是今天，我想遍历它们并向管理员发送电子邮件。我试过这个，但我认为我需要先协调日期格式。

```
SELECT email, name, phone_no FROM table WHERE TO_DAYS(date)=To_DAYS(NOW());
 If true then send email to admin.
 //eg. John's birthday is today. Pls call him on 00001332424; 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T15:06:28.793

是的，您应该首先转换为本机 mysql 日期/时间格式。如果您永远不必操纵该日期，那么将日期存储为字符串就可以了。但是一旦你这样做了，你就会陷入痛苦的世界——不能使用索引，每次运行查询时都必须转换每个字符串，等等......

一旦您将该字符串转换为本机日期字段，那么这很简单

```
SELECT .... WHERE datefield=CURDATE(); 
```

为了让您了解一旦您以“本机”格式获得日期后会发生什么，这里是 mysql 日期/时间操作函数：[http ://dev.mysql.com/doc/refman/5.5/en/date-and -time-functions.html](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)

它们有很多，但几乎所有都只适用于本机日期字段，而不适用于任意字符串（转换字符串<->本机的除外）。

# android - GPS定位只需发送一次短信

> ID：10899808
> 
> 赞同：1
> 
> 时间：2012-06-05T15:03:57.840
> 
> 标签：android, gps, coordinates

我正在制作一个在手机后台运行的应用程序。当我使用 HDPK GPS 发送短信时，应用程序应该以固定数字发送小区的 GPS 坐标。我收到了号码上的 GPS 坐标，但持续不断。我已经用 removeupdates 尝试了一切，但都是徒劳的！请帮我解决这个问题。此外，当应用程序在后台侦听 SMS 时，GPS 和应用程序在收到消息时也会崩溃，尽管我在崩溃前只得到了祝酒词。但如果应用程序在屏幕上运行，它不会崩溃并不断发送坐标消息。

```
public class RecActivity extends Activity {
double current_lat, current_lng;
boolean flag=true;
// String provider=LocationManager.GPS_PROVIDER;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

final String SMS_RECEIVED = "android.provider.Telephony.SMS_RECEIVED";
BroadcastReceiver SMSbr = new BroadcastReceiver() {

@Override
public void onReceive(Context context,Intent intent) {

Bundle bundle = intent.getExtras();
if (bundle != null) {

Object[] pdus = (Object[]) bundle.get("pdus");
final SmsMessage[] messages = new SmsMessage[pdus.length];
for (int i = 0; i < pdus.length; i++)
messages[i] = SmsMessage.createFromPdu((byte[]) pdus[i]);
if (messages.length > -1) {
String messagebody=messages[0].getMessageBody();
if(messagebody.toString().matches("HDPK GPS"))
{

LocationManager mlocManager = (LocationManager)getSystemService(RecActivity.LOCATION_SERVICE);
LocationListener mlocListener = new MyLocationListener();                   

Toast.makeText(RecActivity.this,"GPS STARTED", Toast.LENGTH_LONG)
                                        .show();
mlocManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000,1, mlocListener);                                 

}

                                                                                           }

}
}

};

IntentFilter SMSfilter = new IntentFilter(SMS_RECEIVED);
this.registerReceiver(SMSbr, SMSfilter);
}

public class MyLocationListener implements LocationListener
{

public void onLocationChanged(Location loc) {
Toast.makeText(RecActivity.this,"GPS WORKING", Toast.LENGTH_LONG).show();
current_lat=loc.getLatitude();
current_lng=loc.getLongitude();
String Text = "My location is: " +

"Latitude = " + current_lat +

"Longitude = " + current_lng;

SmsManager sender=SmsManager.getDefault();
sender.sendTextMessage("9762281814",null,Text , null, null);
Toast.makeText(RecActivity.this, "SMS SENT", Toast.LENGTH_LONG).show();

}

public void onProviderDisabled(String arg0) {
// TODO Auto-generated method stub
SmsManager sender=SmsManager.getDefault();
sender.sendTextMessage("9762281814",null,"GPS Disabled" , null, null);

}

public void onProviderEnabled(String arg0) {
// TODO Auto-generated method stub
SmsManager sender=SmsManager.getDefault();
sender.sendTextMessage("9762281814",null,"GPS Enabled" , null, null);

}

 public void onStatusChanged(String arg0, int arg1, Bundle arg2) {
// TODO Auto-generated method stub

}

}

} 
```

清单文件：

```
<uses-sdk android:minSdkVersion="10" />
<uses-permission android:name="android.permission.RECEIVE_SMS"/>
<uses-permission android:name="android.permission.READ_SMS"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.SEND_SMS"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>

<application
android:icon="@drawable/ic_launcher"
android:label="@string/app_name" >
<activity
android:name=".RecActivity"
android:label="@string/app_name" >
<intent-filter android:priority="100">
<action android:name="android.intent.action.MAIN" />

<category android:name="android.intent.category.LAUNCHER" />
</intent-filter>
</activity>
</application>

</manifest> 
```

* * *

这是我的代码：

```
package RecSM.Rec.receiveharsh;

import android.app.Activity;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.telephony.SmsManager;
import android.telephony.SmsMessage;
import android.widget.Toast;

public class RecActivity extends Activity {
double current_lat, current_lng;
boolean flag=true;
LocationManager mlocManager;
LocationListener mlocListener;
// String provider=LocationManager.GPS_PROVIDER;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

final String SMS_RECEIVED = "android.provider.Telephony.SMS_RECEIVED";
BroadcastReceiver SMSbr = new BroadcastReceiver() {

@Override
public void onReceive(Context context,Intent intent) {

Bundle bundle = intent.getExtras();
if (bundle != null) {

Object[] pdus = (Object[]) bundle.get("pdus");
final SmsMessage[] messages = new SmsMessage[pdus.length];
for (int i = 0; i < pdus.length; i++)
messages[i] = SmsMessage.createFromPdu((byte[]) pdus[i]);
if (messages.length > -1) {

String messagebody=messages[0].getMessageBody();

if(messagebody.toString().matches("HDPK GPS"))
{

LocationManager mlocManager = (LocationManager)getSystemService(RecActivity.LOCATION_SERVICE);
LocationListener mlocListener = new MyLocationListener();                   

Toast.makeText(RecActivity.this,"GPS STARTED", Toast.LENGTH_LONG)
                                        .show();
mlocManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000,1, mlocListener);                                 

}

}

}
}

};

IntentFilter SMSfilter = new IntentFilter(SMS_RECEIVED);
this.registerReceiver(SMSbr, SMSfilter);
}

public class MyLocationListener implements LocationListener
{

public void onLocationChanged(Location loc) {

Toast.makeText(RecActivity.this,"GPS WORKING", Toast.LENGTH_LONG)
.show();

current_lat=loc.getLatitude();
current_lng=loc.getLongitude();
String Text = "My location is: " +

"Latitude = " + current_lat +

"Longitude = " + current_lng;

SmsManager sender=SmsManager.getDefault();
sender.sendTextMessage("9762281814",null,Text , null, null);
Toast.makeText(RecActivity.this, "SMS SENT", Toast.LENGTH_LONG).show();
mlocManager.removeUpdates(mlocListener);

}

public void onProviderDisabled(String arg0) {
// TODO Auto-generated method stub
SmsManager sender=SmsManager.getDefault();
sender.sendTextMessage("9762281814",null,"GPS Disabled" , null, null);

}

public void onProviderEnabled(String arg0) {
// TODO Auto-generated method stub
SmsManager sender=SmsManager.getDefault();
sender.sendTextMessage("9762281814",null,"GPS Enabled" , null, null);

}

public void onStatusChanged(String arg0, int arg1, Bundle arg2) {
// TODO Auto-generated method stub

}

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T15:13:23.520

```
String Text = "My location is: " +

"Latitude = " + current_lat +

"Longitude = " + current_lng;

SmsManager sender=SmsManager.getDefault();
sender.sendTextMessage("9762281814",null,Text , null, null);
Toast.makeText(RecActivity.this, "SMS SENT", Toast.LENGTH_LONG).show();

mlocManager.removeUpdates(mlocListener); <<<<<<<<<<<< include this 
```

代码对我来说看起来不错。

**您的设备中是否有 GPS 硬件？？**

你为什么不尝试从网络提供商那里获取位置。在尝试此代码之前，请确保清单中有 android.permission.internet。

```
if (connectivityManager.getNetworkInfo(ConnectivityManager.TYPE_MOBILE)
                .isConnected()
                || connectivityManager.getNetworkInfo(
                        ConnectivityManager.TYPE_WIFI).isConnected())
        {
            /*Log.d("vipul", "WIFI or GPRS Connected");*/
            if (locationManager
                    .isProviderEnabled(LocationManager.NETWORK_PROVIDER))
            {
                Constants.CONNECTED = true;
                /*Log.v("tripSketch", "NETWORK Provider Enabled");*/
                locationManager.requestLocationUpdates(
                        LocationManager.NETWORK_PROVIDER, 5000, 1, this);
            } else
            {
                Constants.CONNECTED = false;
                /*Log.d("vipul",
                        "Please enable Wireless networks in Location Setting!!");*/
                Toast.makeText(
                        context,
                        "Please enable Wireless networks in Location Setting!!",
                        10000).show();
            }

        } else if (locationManager
                .isProviderEnabled(LocationManager.GPS_PROVIDER))
        {
            Constants.CONNECTED = true;
            /*Log.d("vipul", "GPS Provider Enabled!");*/
            locationManager.requestLocationUpdates(
                    LocationManager.GPS_PROVIDER, 120000, 100, this);

        } else
        {
            /*Log.d("vipul", "Neither GPS NOR EDGE/GPRS CONNECTED");*/
            Constants.CONNECTED = false;
            Toast.makeText(
                    context,
                    "Please connect EDGE/GPRS \nAlso Enable Wireless networks in Location Setting!!",
                    10000).show();
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-26T12:08:38.933

我不知道为什么，但它以某种方式起作用）））

```
package net.learn2develop.SMSMessaging;

import java.util.List;
import android.annotation.TargetApi;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.location.Criteria;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Build;
import android.os.Bundle;
import android.os.Looper;
import android.telephony.SmsMessage;
import android.telephony.SmsManager;
import android.util.Log;

public class SmsReceiver extends  BroadcastReceiver implements LocationListener {

String strPhone;
String strMessage;
String strGPS;

@TargetApi(Build.VERSION_CODES.DONUT)
@Override

public void onReceive(Context context, Intent intent) {

    Bundle bundle = intent.getExtras();

    SmsMessage[] msgs = null;
    strPhone = "";
    strMessage = "";
    strGPS="";

    if (bundle != null) {
        // ---retrieve the SMS message received---
        Object[] pdus = (Object[]) bundle.get("pdus");
        msgs = new SmsMessage[pdus.length];
        for (int i = 0; i < msgs.length; i++) {
            msgs[i] = SmsMessage.createFromPdu((byte[]) pdus[i]);

            strPhone+=msgs[i].getOriginatingAddress();
            strMessage+=msgs[i].getMessageBody().toString();

        }

        if (strMessage.contains(":)) ...")){

            LocationManager lm = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);  
            List<String> providers = lm.getProviders(true);
            /* Loop over the array backwards, and if you get an accurate location, then break out the loop*/
            Location l = null;

            final int updateTime = 2000; // ms
            final int updateDistance = 10; // meter
            final Criteria criteria = new Criteria();
            criteria.setCostAllowed(false);
            criteria.setAccuracy(Criteria.ACCURACY_FINE);
            final String p = lm.getBestProvider(criteria, true);
            lm.requestLocationUpdates(p, updateTime, updateDistance,
                    this);
            double[] gps = new double[2];

            for (int ii=providers.size()-1; ii>=0; ii--) {
                    l = lm.getLastKnownLocation(providers.get(ii));
                    if (l != null) break;
            }

            if (l != null) {
                    gps[0] = l.getLatitude();
                    gps[1] = l.getLongitude();
                    Log.d("gps[0]", "gps[1]");
            }

      strGPS= String.valueOf(gps[0]) + " " + String.valueOf(gps[1]);
      sendSMS(strPhone, strGPS);
        }
        }
}

@TargetApi(Build.VERSION_CODES.DONUT)
private void sendSMS(String phoneNumber, String message) {
    SmsManager sms = SmsManager.getDefault();
    sms.sendTextMessage(phoneNumber, null, message, null, null);
}

@Override
public void onLocationChanged(Location location) {
    // TODO Auto-generated method stub

}

@Override
public void onProviderDisabled(String provider) {
    // TODO Auto-generated method stub

}

@Override
public void onProviderEnabled(String provider) {
    // TODO Auto-generated method stub

}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) {
    // TODO Auto-generated method stub

}

} 
```

# java - 即使语句有效，也不输入 if 条件

> ID：10899810
> 
> 赞同：0
> 
> 时间：2012-06-05T15:04:00.433
> 
> 标签：java, arrays, if-statement, conditional-statements

我的代码中的错误是，即使数组中存在“A”、“B”、“C”，内部循环内的 if 条件也无法识别它们。请注意，ABC 来自已使用 String.split(""); 拆分的字符串；java的方法

```
public class Hexadecimal
{
    public static void main(String[] args)
    {
            String hex = "ABC";
            hToD(hex);
    }

    public static void hToD(String hexa)
    {
        String[] hexadecimal = {"0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"};
        String[] value = hexa.split("");

        int deci = 0;
        int bit =0;

        for(int i = 0; i<value.length;i++)
        {
            for(int j = 0; j<hexadecimal.length;j++)
            {
                if(value[i] == hexadecimal[j])
                {
                    deci = deci + compute(j,bit++);
                    System.out.println(deci);
                }
            }
        }
    }

    public static int compute(int digit,int bit)
    {
        int ans = 0;
        if(bit == 0)
        {
            ans = digit * (1);
        }else
        {
            ans = digit * (16 * bit);
        }
        return ans;
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-05T15:06:56.253

永远不要将字符串与`==`. 总是与`s1.equals(s2)`.

前者测试两个对象是否相同（即变量引用相同的 String 对象）。后者测试两个字符串的字符序列是否相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T15:10:27.513

尝试在该内部 if 语句中使用 .equals() 而不是 == 。

```
if(value[i].equals(hexadecimal[j])) 
```

# colorbox - 登录 iframe 颜色框时如何引用基本页面？

> ID：10899811
> 
> 赞同：1
> 
> 时间：2012-06-05T15:04:02.553
> 
> 标签：colorbox

我通过单击按钮调用带有 iframe 选项的颜色框来加载我的子域页面。当用户尝试访问我的子域页面时，我会检查用户是否使用我的 php 代码登录。

如果用户未登录，将他带到登录页面，然后将他重定向到我的子域页面。

**以下是挑战**

1.  登录将仅包含以下字段，“用户名”、“密码”和“提交”按钮。当用户登录时，子域页面是一个完整的站点。如何处理调整大小？（问题是登录后，当内容完全加载时，像 onComplete 一样调用哪个方法？像“onRefresh”这样的东西）

2.  当用户重定向到我的子域页面时，如何通过 iframe 后面可见的基础站点刷新**以显示“欢迎用户”**。

# c - AF_UNIX 套接字开销？

> ID：10899814
> 
> 赞同：21
> 
> 时间：2012-06-05T15:04:07.327
> 
> 标签：c, linux, sockets, networking

我看到一对由调用创建的 AF_UNIX 套接字有一些奇怪的事情，例如：

```
 socketpair(AF_UNIX, SOCK_STREAM, 0, sfd); 
```

其中 sfd 是文件描述符的 int[2] 数组。

首先，默认缓冲区大小似乎正好是 122K（124928 字节），而不是 /proc/sys/net 中的任何内容（例如设置为 128K 的 wmem_default）。有谁知道这个奇怪的缓冲区大小的原因？

其次，当通过套接字写入小消息时（8 个字节）。我只能在写入块之前写入其中的 423 个，即只有 8*423 = 3384 字节，又是一个奇怪的大小。这些消息的行为就好像它们每个占用 295 + 一个小字节。这种开销的来源是什么？

在 RHEL6（2.6.32，64 位）上运行

我编写了一个程序来尝试不同大小的数据来比较间接费用：

```
#include <errno.h>
#include <stdio.h>
#include <stdint.h>
#include <stdlib.h>
#include <unistd.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>

#define DATA_SIZE 4

void run(size_t size) {
    int sfd[2];
    if (socketpair(AF_UNIX, SOCK_STREAM, 0, sfd) == -1) {
        perror("error");
    }

    int sndbuf, sbsize = sizeof(sndbuf);
    getsockopt(sfd[0], SOL_SOCKET, SO_SNDBUF, &sndbuf, (socklen_t*)&sbsize);

    printf("Data Size: %zd\n", size);
    char buff[size];   
    size_t wrote=0;
    for (size_t ii=0; ii < 32768; ii++) {
        if ((send(sfd[0], buff, size, MSG_DONTWAIT) == -1) && (errno == EAGAIN)) {
            wrote = ii;
            break;
        }
    }

    printf("Wrote:     %zd\n", wrote);

    if (wrote != 0) { 
        int bpm = sndbuf/wrote;
        int oh  = bpm - size;

        printf("Bytes/msg: %i\n",  bpm);
        printf("Overhead:  %i\n",  oh);
        printf("\n");
    }

    close(sfd[0]); close(sfd[1]);
}

int main() {
    int sfd[2];
    socketpair(AF_UNIX, SOCK_STREAM, 0, sfd);

    int sndbuf, sbsize = sizeof(sndbuf);
    getsockopt(sfd[0], SOL_SOCKET, SO_SNDBUF, &sndbuf, (socklen_t*)&sbsize);

    printf("Buffer Size: %i\n\n", sndbuf);
    close(sfd[0]); close(sfd[1]);

    for (size_t ii=4; ii <= 4096; ii *= 2) {
        run(ii);
    }
} 
```

这使：

```
Buffer Size: 124928

Data Size: 4
Wrote:     423
Bytes/msg: 295
Overhead:  291

Data Size: 8
Wrote:     423
Bytes/msg: 295
Overhead:  287

Data Size: 16
Wrote:     423
Bytes/msg: 295
Overhead:  279

Data Size: 32
Wrote:     423
Bytes/msg: 295
Overhead:  263

Data Size: 64
Wrote:     423
Bytes/msg: 295
Overhead:  231

Data Size: 128
Wrote:     348
Bytes/msg: 358
Overhead:  230

Data Size: 256
Wrote:     256
Bytes/msg: 488
Overhead:  232

Data Size: 512
Wrote:     168
Bytes/msg: 743
Overhead:  231

Data Size: 1024
Wrote:     100
Bytes/msg: 1249
Overhead:  225

Data Size: 2048
Wrote:     55
Bytes/msg: 2271
Overhead:  223

Data Size: 4096
Wrote:     29
Bytes/msg: 4307
Overhead:  211 
```

与使用管道相比，肯定有很多开销：

```
Data Size: 4
Wrote:     16384
Bytes/msg: 4
Overhead:  0

Data Size: 8
Wrote:     8192
Bytes/msg: 8
Overhead:  0

Data Size: 16
Wrote:     4096
Bytes/msg: 16
Overhead:  0

Data Size: 32
Wrote:     2048
Bytes/msg: 32
Overhead:  0

Data Size: 64
Wrote:     1024
Bytes/msg: 64
Overhead:  0

Data Size: 128
Wrote:     512
Bytes/msg: 128
Overhead:  0

Data Size: 256
Wrote:     256
Bytes/msg: 256
Overhead:  0

Data Size: 512
Wrote:     128
Bytes/msg: 512
Overhead:  0

Data Size: 1024
Wrote:     64
Bytes/msg: 1024
Overhead:  0

Data Size: 2048
Wrote:     32
Bytes/msg: 2048
Overhead:  0

Data Size: 4096
Wrote:     16
Bytes/msg: 4096
Overhead:  0 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T23:25:50.540

查看 socket(7) 手册页。有一段是这样写的：

> SO_SNDBUF 设置或获取最大套接字发送缓冲区（以字节为单位）。当使用 setsockopt(2) 设置该值时，内核将该值加倍（以便为簿记开销留出空间），并且该加倍值由 getsockopt(2) 返回。默认值由 /proc/sys/net/core/wmem_default 文件设置，最大允许值由 /proc/sys/net/core/wmem_max 文件设置。此选项的最小（加倍）值为 2048。

因此，开销似乎只是为内核保存簿记信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T16:03:25.200

你看过`net.unix.max_dgram_qlen`sysctl 的值吗？

内核对飞行中 AF_UNIX 数据报的最大数量施加了限制。在我的系统上，限制实际上非常低：只有 10 个。

# php - Netsuite API - PHP 将自定义字段附加到新客户

> ID：10899816
> 
> 赞同：2
> 
> 时间：2012-06-05T15:04:09.387
> 
> 标签：php, soap, netsuite

我在使用 netsuite api 时遇到了麻烦。我正在尝试添加具有自定义字段类型的客户。netsuite 文档没有帮助。我很感激我能得到的任何帮助。谢谢你。

```
$customFields = array('internalId' => 'custentity_nso_f_donortype', 
                      'value' => new nsListOrRecordRef(array('internalId' => "1"))
                );
$customObject = new nsComplexObject("SelectCustomFieldRef");
$customObject->setFields($customFields);
$customerFields = array (
        'isPerson'          => true,
        'firstName'         => $firstName,
        'lastName'          => $lastName,
        'companyName'           => $companyName,
        'phone'             => $phone,
        'email'             => $email,
        'customFieldList'   => $customObject,
        'addressbookList'   => array (
                'addressbook'   => array(
                        'addr1'     => $addr1,
                        'city'      => $city,
                        'state'     => $state,
                        'zip'       => $zip
                )
        )
);

// create Customer record
$customer = new nsComplexObject('Customer');
// set fields
$customer->setFields($customerFields);

// perform add operation and store nsWriteResponse object in $addResponse variable
$addResponse = $myNSclient->add($customer);

// handle add response
if (!$addResponse->isSuccess) {

    echo "<font color='red'><b>" . $addResponse->statusDetail[0]->message . "</b></font>";

} else {

    echo "<font color='green'><b>SUCCESS!!!</b></font>";

} 
```

# hibernate - 在休眠中从视图更改为 sql 连接

> ID：10899817
> 
> 赞同：0
> 
> 时间：2012-06-05T15:04:12.243
> 
> 标签：hibernate, jakarta-ee, join, hibernate-mapping

我有一个域对象

```
@Entity
@Table (name = "vw_t_bucket")
public class TBucket {

....

@ManyToOne (cascade = { CascadeType.PERSIST, CascadeType.MERGE }, fetch = FetchType.EAGER, targetEntity = Prd.class)
      @JoinColumns({
          @JoinColumn(name = "key", referencedColumnName="key"),
          @JoinColumn(name = "cdate", referencedColumnName="cdate")
      })
      public IPrd getPrd() {
        return prd;
      }
....

      @ManyToOne (cascade = { CascadeType.PERSIST, CascadeType.MERGE }, fetch = FetchType.EAGER, targetEntity = Acct.class)
      @JoinColumn (name = "acct", nullable = false)
      public IAcct getAcct() {
            return acct;
      }

}

@Entity
@Table (name = "product")
public class Prd implements IPrd {
...
}

@Entity
@Table (name = "vw_acct")
public class Acct implements IAcct {
...
} 
```

如您所见，TBucket 是一个视图，并连接到表 (product) 和另一个视图 (vw_acct)

我的数据库告诉我，视图和表的连接性能很差，我需要将视图更改为表。

但是，视图本身是由来自多个表的连接组成的。

我的负责人想知道是否有一种解决方案，我们可以将连接 sql 直接放在注释中，我告诉他我们只能将表/视图用于与域对象的映射。

我想知道这个问题是否有任何可能的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T16:55:52.967

如果您不更新此实体，则可以使用 org.hibernate.annotations.Subselect 注释来命名要使用的确切 SQL。它实际上是很久以前开发的（在 HBM XML 映射方面），作为不支持视图的数据库上的视图的替身。但是，就像我提到的，它是只读的。

如果需要更新，则需要使用 org.hibernate.annotations.Loader、org.hibernate.annotations.SQLInsert、org.hibernate.annotations.SQLUpdate 和 org.hibernate.annotations.SQLDelete 注释来完全映射实体.

然而，另一种选择（取决于数据库视图的确切性质）是将连接映射为 SecondaryTables。

# php - 查找给定位置的记录总数

> ID：10899818
> 
> 赞同：1
> 
> 时间：2012-06-05T15:04:12.317
> 
> 标签：php, mysql, aggregate

我有以下mysql查询：

```
SELECT sku, quantity, inventory.isbn13, author, title, pub_date, binding, 
      defect.defect, source, location from inventory
      LEFT JOIN location ON inventory.location_id = location.location_id
      LEFT JOIN source ON inventory.source_id = source.source_id
      LEFT JOIN book ON inventory.isbn13 = book.isbn13
      LEFT JOIN defect ON inventory.defect_id = defect.defect_id
      LEFT JOIN book_condition ON book_condition.condition_id = defect.condition_id
      WHERE quantity > '0' and location.location_id >= '986' and location.location_id <= '989'
      ORDER BY inventory.location_id, sku 
```

效果很好，但现在我需要显示每个位置 ID 的图书总数。例如 location_id 986 有 17 本书，location_id 987 有 34 本书等。我需要运行第二个查询来获取此信息，还是有办法在我的查询中执行此操作？
谢谢吉姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T16:01:04.123

干得好：

```
SELECT
    sku, 
    quantity, 
    inventory.isbn13, 
    author, 
    title, 
    pub_date, 
    binding, 
    defect.defect, 
    source, 
    location,
    t.cnt
FROM 
    inventory i
        INNER JOIN 
            (
            SELECT
                inventory.location_id,
                COUNT(book.isbn13) as `cnt`
            FROM inventory
                  LEFT JOIN book ON inventory.isbn13 = book.isbn13
            GROUP BY inventory.location_id
            ) t ON t.location_id = i.location_id
        INNER JOIN location l       ON i.location_id = l.location_id
        LEFT JOIN source            ON i.source_id = source.source_id
        LEFT JOIN defect            ON i.defect_id = defect.defect_id
        LEFT JOIN book_condition    ON book_condition.condition_id = defect.condition_id
WHERE 
    i.quantity > '0' 
AND l.location_id >= '986' 
AND l.location_id <= '989' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T15:09:44.063

您可以使用 MySql 函数“Found_rows”，而不会影响或更改您的查询，请查看我的本地示例。

```
mysql> select * from actor where actor_id>190;
+----------+------------+-------------+---------------------+
| actor_id | first_name | last_name   | last_update         |
+----------+------------+-------------+---------------------+
|      191 | GREGORY    | GOODING     | 2012-05-22 15:12:26 |
|      192 | JOHN       | SUVARI      | 2012-05-22 15:12:26 |
|      193 | BURT       | TEMPLE      | 2012-05-22 15:12:26 |
|      194 | MERYL      | ALLEN       | 2012-05-22 15:12:26 |
|      195 | JAYNE      | SILVERSTONE | 2012-05-22 15:12:26 |
|      196 | BELA       | WALKEN      | 2012-05-22 15:12:26 |
|      197 | REESE      | WEST        | 2012-05-22 15:12:26 |
|      198 | MARY       | KEITEL      | 2012-05-22 15:12:26 |
|      199 | JULIA      | FAWCETT     | 2012-05-22 15:12:26 |
|      200 | THORA      | TEMPLE      | 2012-05-22 15:12:26 |
|      205 | 1          | 2           | 0000-00-00 00:00:00 |
|      206 | a          | b           | 0000-00-00 00:00:00 |
+----------+------------+-------------+---------------------+
12 rows in set (0.00 sec)

mysql> select FOUND_ROWS();
+--------------+
| FOUND_ROWS() |
+--------------+
|           12 |
+--------------+
1 row in set (0.00 sec) 
```

此函数将为您提供最后一个查询的行号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T15:06:33.707

听起来您需要使用 Group By 和 Count()

（当然，这将是一个不同的查询）

当您使用 Count() 和 Group by - 确保您没有包含在无法聚合的 Select 列中...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T15:07:25.797

它可能使用 SQL 查询来完成，但您也可以使用 PHP 代码来完成。循环遍历结果并计算总数，如下所示：

```
foreach ($results as $row) {
    $location_count [$row['location_id']]++;
}
echo $location_count [986]; // outputs 17 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-05T15:07:45.513

```
SELECT count(*), sku, quantity, inventory.isbn13, author, title, pub_date, binding, 
      defect.defect, source, location from inventory
      LEFT JOIN location ON inventory.location_id = location.location_id
      LEFT JOIN source ON inventory.source_id = source.source_id
      LEFT JOIN book ON inventory.isbn13 = book.isbn13
      LEFT JOIN defect ON inventory.defect_id = defect.defect_id
      LEFT JOIN book_condition ON book_condition.condition_id = defect.condition_id
      WHERE quantity > '0' and location.location_id >= '986' and location.location_id <= '989'
      ORDER BY inventory.location_id, sku
      GROUP BY location.location_id 
```

# celery - 为计划中的每个任务设置工作人员数量

> ID：10899820
> 
> 赞同：0
> 
> 时间：2012-06-05T15:04:16.033
> 
> 标签：celery

我在 Celery 中有 4 个计划任务，每 N 秒执行一次。现在，应用程序逻辑只为每个任务提供一个工作人员（它从数据库中写入读取数据，并且不允许并行执行）。

但是我只能使用 CELERYD_CONCURRENCY = 1 为所有任务设置 1 个工作人员

如何为每个任务设置单个工作人员？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T08:15:38.570

我认为您的意思是您不希望您的 4 个任务并行运行？如果是这种情况，您应该使用子任务的“链”之类的东西，请参阅：

[http://docs.celeryproject.org/en/latest/userguide/canvas.html#chains](http://docs.celeryproject.org/en/latest/userguide/canvas.html#chains)

只需使用 | 将您的任务添加到链中 运算符，然后使用 delay() 或 async_delay() 执行它。这样，您的下一个任务只会在前一个任务完成后开始。池中的一名工作人员将被分配给每个任务（可以是同一个工作人员或不同的工作人员）。

# ruby-on-rails-3 - 支持用户在 rails 3.0 应用程序中从移动设备发送个人资料图片的最佳方式？

> ID：10899822
> 
> 赞同：1
> 
> 时间：2012-06-05T15:04:36.080
> 
> 标签：ruby-on-rails-3, mobile-safari, carrierwave

我们在 Rails 3 应用程序中使用carrierwave，效果很好！但是，在我们的移动网站上，选择文件的按钮是灰色的。我读过 iPhone 不会授予从浏览器访问文件的权限。Picup是[iPhone](http://picupapp.com/)的唯一选择吗？如果有适用于 Android 和其他设备的解决方案，那就太好了。

更新：

我意识到许多（大多数？）移动设备无法访问文件。试图找到通过电子邮件发送图像的最有效方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T20:16:36.680

iPhone 不支持从 Mobile Safari 上传文件。

检查[用于移动 safari 的 html5 网络应用程序以从 Photos.app 上传图像？](https://stackoverflow.com/q/3891831)寻找可能的解决方案。

# r - 带有条件值的数据帧的 r 下标向量

> ID：10899823
> 
> 赞同：2
> 
> 时间：2012-06-05T15:04:41.913
> 
> 标签：r, dataframe, subscript

这似乎很容易，但它让我忙碌了一段时间。

我有一个包含 n 列的数据框 (df) 和一个具有相同数量 (n) 值的向量。

向量中的值是数据框中列中观察值的阈值。所以线索是，如何告诉 R 为每一列使用不同的阈值？

我想将所有观察结果保留在满足每列的各种阈值的数据框中（高于或低于，在示例中无关紧要）。不满足阈值标准的观测值应设置为 0。

我不想要数据框的子集。

任何人都可以帮忙吗？提前非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T15:17:19.080

给定一些示例数据和阈值

```
set.seed(42)
dat <- data.frame(matrix(runif(100), ncol = 10))

## thresholds
thresh <- seq(0.5, 0.95, length.out = 10)
thresh 
```

我们可以使用该`mapply()`函数来计算每列（在此）中哪些观察值大于或等于阈值。使用这些索引，我们可以将与索引对应的值替换为`0`via：

```
dat[mapply(">=", dat, thresh)] <- 0 
```

这是行动号召：

```
> dat
          X1        X2         X3          X4         X5
1  0.9148060 0.4577418 0.90403139 0.737595618 0.37955924
2  0.9370754 0.7191123 0.13871017 0.811055141 0.43577158
3  0.2861395 0.9346722 0.98889173 0.388108283 0.03743103
4  0.8304476 0.2554288 0.94666823 0.685169729 0.97353991
5  0.6417455 0.4622928 0.08243756 0.003948339 0.43175125
6  0.5190959 0.9400145 0.51421178 0.832916080 0.95757660
7  0.7365883 0.9782264 0.39020347 0.007334147 0.88775491
8  0.1346666 0.1174874 0.90573813 0.207658973 0.63997877
9  0.6569923 0.4749971 0.44696963 0.906601408 0.97096661
10 0.7050648 0.5603327 0.83600426 0.611778643 0.61883821
           X6        X7          X8         X9          X10
1  0.33342721 0.6756073 0.042988796 0.58160400 0.6674265147
2  0.34674825 0.9828172 0.140479094 0.15790521 0.0002388966
3  0.39848541 0.7595443 0.216385415 0.35902831 0.2085699569
4  0.78469278 0.5664884 0.479398564 0.64563188 0.9330341273
5  0.03893649 0.8496897 0.197410342 0.77582336 0.9256447486
6  0.74879539 0.1894739 0.719355838 0.56364684 0.7340943010
7  0.67727683 0.2712866 0.007884739 0.23370340 0.3330719834
8  0.17126433 0.8281585 0.375489965 0.08998052 0.5150633298
9  0.26108796 0.6932048 0.514407708 0.08561206 0.7439746463
10 0.51441293 0.2405447 0.001570554 0.30521837 0.6191592400
> dat[mapply(">=", dat, thresh)] <- 0
> dat
          X1        X2         X3          X4         X5
1  0.0000000 0.4577418 0.00000000 0.000000000 0.37955924
2  0.0000000 0.0000000 0.13871017 0.000000000 0.43577158
3  0.2861395 0.0000000 0.00000000 0.388108283 0.03743103
4  0.0000000 0.2554288 0.00000000 0.000000000 0.00000000
5  0.0000000 0.4622928 0.08243756 0.003948339 0.43175125
6  0.0000000 0.0000000 0.51421178 0.000000000 0.00000000
7  0.0000000 0.0000000 0.39020347 0.007334147 0.00000000
8  0.1346666 0.1174874 0.00000000 0.207658973 0.63997877
9  0.0000000 0.4749971 0.44696963 0.000000000 0.00000000
10 0.0000000 0.0000000 0.00000000 0.611778643 0.61883821
           X6        X7          X8         X9          X10
1  0.33342721 0.6756073 0.042988796 0.58160400 0.6674265147
2  0.34674825 0.0000000 0.140479094 0.15790521 0.0002388966
3  0.39848541 0.7595443 0.216385415 0.35902831 0.2085699569
4  0.00000000 0.5664884 0.479398564 0.64563188 0.9330341273
5  0.03893649 0.0000000 0.197410342 0.77582336 0.9256447486
6  0.74879539 0.1894739 0.719355838 0.56364684 0.7340943010
7  0.67727683 0.2712866 0.007884739 0.23370340 0.3330719834
8  0.17126433 0.0000000 0.375489965 0.08998052 0.5150633298
9  0.26108796 0.6932048 0.514407708 0.08561206 0.7439746463
10 0.51441293 0.2405447 0.001570554 0.30521837 0.6191592400 
```

注意`mapply()`在这种情况下返回的内容是有益的：

```
> mapply(">=", dat, thresh)
         X1    X2    X3    X4    X5    X6    X7    X8    X9   X10
 [1,]  TRUE FALSE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE
 [2,]  TRUE  TRUE FALSE  TRUE FALSE FALSE  TRUE FALSE FALSE FALSE
 [3,] FALSE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [4,]  TRUE FALSE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE
 [5,]  TRUE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE
 [6,]  TRUE  TRUE FALSE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE
 [7,]  TRUE  TRUE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE
 [8,] FALSE FALSE  TRUE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE
 [9,]  TRUE FALSE FALSE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE
[10,]  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE 
```

正是那些用于选择满足阈值的观察的逻辑值。您可以使用与我使用的不同的二元运算符；查看`?">"`各种选项。在编写`mapply()`调用时，请根据二元运算符的左侧和右侧来考虑它，这样`mapply()`调用将给出：

```
mapply(">", lhs, rhs) 
```

我们可以写的地方

```
lhs > rhs 
```

**更新：**由于@DWin 已经回答了关于两个阈值的评论，我将更新我的答案以匹配。

```
thresh1 <- seq(0.05, 0.5, length.out = 10)
thresh2 <- seq(0.55, 0.95, length.out = 10)
set.seed(42)
dat <- data.frame(matrix(runif(100), ncol = 10))

l1 <- mapply(">", dat, thresh1)
l2 <- mapply("<", dat, thresh2) 
```

我们可以看到哪些元素匹配两个约束：

```
> l1 & l2
         X1    X2    X3    X4    X5    X6    X7    X8    X9   X10
 [1,] FALSE  TRUE FALSE FALSE  TRUE  TRUE  TRUE FALSE  TRUE  TRUE
 [2,] FALSE FALSE FALSE FALSE  TRUE  TRUE FALSE FALSE FALSE FALSE
 [3,]  TRUE FALSE FALSE  TRUE FALSE  TRUE  TRUE FALSE FALSE FALSE
 [4,] FALSE  TRUE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE
 [5,] FALSE  TRUE FALSE FALSE  TRUE FALSE FALSE FALSE  TRUE  TRUE
 [6,]  TRUE FALSE  TRUE FALSE FALSE  TRUE FALSE  TRUE  TRUE  TRUE
 [7,] FALSE FALSE  TRUE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE
 [8,]  TRUE  TRUE FALSE  TRUE  TRUE FALSE FALSE FALSE FALSE  TRUE
 [9,] FALSE  TRUE  TRUE FALSE FALSE FALSE  TRUE  TRUE FALSE  TRUE
[10,] FALSE  TRUE FALSE  TRUE  TRUE  TRUE FALSE FALSE FALSE  TRUE 
```

并且可以使用相同的构造来选择那些匹配的元素：

```
dat[l1 & l2] <- 0
dat

> dat
          X1        X2         X3          X4         X5         X6        X7          X8
1  0.9148060 0.0000000 0.90403139 0.737595618 0.00000000 0.00000000 0.0000000 0.042988796
2  0.9370754 0.7191123 0.13871017 0.811055141 0.00000000 0.00000000 0.9828172 0.140479094
3  0.0000000 0.9346722 0.98889173 0.000000000 0.03743103 0.00000000 0.0000000 0.216385415
4  0.8304476 0.0000000 0.94666823 0.685169729 0.97353991 0.78469278 0.0000000 0.000000000
5  0.6417455 0.0000000 0.08243756 0.003948339 0.00000000 0.03893649 0.8496897 0.197410342
6  0.0000000 0.9400145 0.00000000 0.832916080 0.95757660 0.00000000 0.1894739 0.000000000
7  0.7365883 0.9782264 0.00000000 0.007334147 0.88775491 0.00000000 0.2712866 0.007884739
8  0.0000000 0.0000000 0.90573813 0.000000000 0.00000000 0.17126433 0.8281585 0.375489965
9  0.6569923 0.0000000 0.00000000 0.906601408 0.97096661 0.26108796 0.0000000 0.000000000
10 0.7050648 0.0000000 0.83600426 0.000000000 0.00000000 0.00000000 0.2405447 0.001570554
           X9          X10
1  0.00000000 0.0000000000
2  0.15790521 0.0002388966
3  0.35902831 0.2085699569
4  0.00000000 0.0000000000
5  0.00000000 0.0000000000
6  0.00000000 0.0000000000
7  0.23370340 0.3330719834
8  0.08998052 0.0000000000
9  0.08561206 0.0000000000
10 0.30521837 0.0000000000 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T15:25:39.040

我比我更喜欢 Gavin 的回答，但这里`mapply`使用他的数据的应用略有不同：

```
mapply(function(x,tt) ifelse(x >= tt, 0, x), dat, thresh) 
```

根据您的第二条评论：我的结构可能比 Gavin 的更普遍

两个阈值向量：

```
mapply(function(x, lt, ht) ifelse(x <= lt | x >= ht , 0, x), dat, lothresh, hithresh) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T15:15:19.023

不确定它将如何处理数据帧，但以下内容适用于矩阵：
您可以获得`df`给定条件下的布尔表示，然后将其用作`df`设置值的索引。或者，您可以获取具有匹配字段索引的向量并将其用作索引向量来设置值。希望有帮助。

# vb.net - Vb.Net检查图像是否存在于另一个图像中

> ID：10899828
> 
> 赞同：5
> 
> 时间：2012-06-05T15:04:58.060
> 
> 标签：vb.net, bitmap, pixel

我试图检查图像的一部分是否存在于另一个图像中

解释：

**完整图片：http:**
[//imageshack.us/photo/my-images/526/part1g.png/](http://imageshack.us/photo/my-images/526/part1g.png/)

**我想**检查他是否存在于完整图像中的图像的****第二**部分：http :
[//imageshack.us/photo/my-images/706/part2p.png/](http://imageshack.us/photo/my-images/706/part2p.png/)

如果第二部分存在，则函数返回
true一个可以检查它是否存在的函数？

（如果它只是单个像素那么它很容易，但我想检查图像的一部分是否存在于另一个图像中）
有一个有效的代码，但它**检查图像中是否存在单个像素**：**

 **```
 Dim bmp As Bitmap = PictureBox1.Image
    For x As Integer = 0 To bmp.Width - 1
        For y As Integer = 0 To bmp.Height - 1
            If bmp.GetPixel(x, y) = Color.FromArgb(48, 48, 48) Then
                msgbox("Pixel Exist In Image!!!")
            End If
        Next
    Next 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T16:26:28.680

我编写了这个扩展来在图像中查找图像。但是它有一些限制：1）图像必须在没有色彩空间的情况下保存（或无论如何都相同）和 2）它不适用于有损压缩图像（即 jpeg，因为你需要平均和容差执行）。

我已经优化了像素匹配例程。它没有完全调试，但似乎按预期工作。它忽略了 alpha 通道（故意，根据需要扩展），您需要尝试捕获您的调用者（即内存不足异常）。

用法：

```
Dim p As Point = yourBitmap.Contains(bmpYouLookFor)
If p <> Nothing Then
'...
End If 
```

代码：如果您不想将其作为扩展名（需要 .net 3.5+），只需删除扩展名属性并将其作为普通函数调用，并将源位图作为参数。

将以下内容复制并粘贴到模块中（许可证：CC-attribution）：

```
'*******************************************************************************
'*
'*      Epistemex
'*
'*      Bitmap extension: .Contains(bmp)
'*      KF
'*
'*      2012-09-26      Initial version
'*      2012-09-26      Minor optimization, exit for's impl.
'*
'*******************************************************************************

Imports System.Drawing
Imports System.Runtime.CompilerServices
Imports System.Drawing.Imaging
Imports System.Runtime.InteropServices

Module BitmapExtension

    <Extension()>
    Public Function Contains(src As Bitmap, ByRef bmp As Bitmap) As Point
        '
        '-- Some logic pre-checks
        '
        If src Is Nothing OrElse bmp Is Nothing Then Return Nothing

        If src.Width = bmp.Width AndAlso src.Height = bmp.Height Then
            If src.GetPixel(0, 0) = bmp.GetPixel(0, 0) Then
                Return New Point(0, 0)
            Else
                Return Nothing
            End If

        ElseIf src.Width < bmp.Width OrElse src.Height < bmp.Height Then
            Return Nothing

        End If
        '
        '-- Prepare optimizations
        '
        Dim sr As New Rectangle(0, 0, src.Width, src.Height)
        Dim br As New Rectangle(0, 0, bmp.Width, bmp.Height)

        Dim srcLock As BitmapData = src.LockBits(sr, Imaging.ImageLockMode.ReadOnly, PixelFormat.Format24bppRgb)
        Dim bmpLock As BitmapData = bmp.LockBits(br, Imaging.ImageLockMode.ReadOnly, PixelFormat.Format24bppRgb)

        Dim sStride As Integer = srcLock.Stride
        Dim bStride As Integer = bmpLock.Stride

        Dim srcSz As Integer = sStride * src.Height
        Dim bmpSz As Integer = bStride * bmp.Height

        Dim srcBuff(srcSz) As Byte
        Dim bmpBuff(bmpSz) As Byte

        Marshal.Copy(srcLock.Scan0, srcBuff, 0, srcSz)
        Marshal.Copy(bmpLock.Scan0, bmpBuff, 0, bmpSz)

        ' we don't need to lock the image anymore as we have a local copy
        bmp.UnlockBits(bmpLock)
        src.UnlockBits(srcLock)

        Dim x, y, x2, y2, sx, sy, bx, by, sw, sh, bw, bh As Integer
        Dim r, g, b As Byte

        Dim p As Point = Nothing

        bw = bmp.Width
        bh = bmp.Height

        sw = src.Width - bw      ' limit scan to only what we need. the extra corner
        sh = src.Height - bh     ' point we need is taken care of in the loop itself.

        bx = 0 : by = 0
        '
        '-- Scan source for bitmap
        '
        For y = 0 To sh
            sy = y * sStride
            For x = 0 To sw

                sx = sy + x * 3
                '
                '-- Find start point/pixel
                '
                r = srcBuff(sx + 2)
                g = srcBuff(sx + 1)
                b = srcBuff(sx)

                If r = bmpBuff(2) AndAlso g = bmpBuff(1) AndAlso b = bmpBuff(0) Then
                    p = New Point(x, y)
                    '
                    '-- We have a pixel match, check the region
                    '
                    For y2 = 0 To bh - 1
                        by = y2 * bStride
                        For x2 = 0 To bw - 1
                            bx = by + x2 * 3

                            sy = (y + y2) * sStride
                            sx = sy + (x + x2) * 3

                            r = srcBuff(sx + 2)
                            g = srcBuff(sx + 1)
                            b = srcBuff(sx)

                            If Not (r = bmpBuff(bx + 2) AndAlso
                                    g = bmpBuff(bx + 1) AndAlso
                                    b = bmpBuff(bx)) Then
                                '
                                '-- Not matching, continue checking
                                '
                                p = Nothing
                                sy = y * sStride
                                Exit For
                            End If

                        Next
                        If p = Nothing Then Exit For
                    Next
                End If 'end of region check

                If p <> Nothing Then Exit For
            Next
            If p <> Nothing Then Exit For
        Next

        bmpBuff = Nothing
        srcBuff = Nothing

        Return p

    End Function

End Module 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T09:32:31.573

您可以编写一个函数来遍历第二个图像的每个可能的左上角像素，然后将像素复制到另一个位图对象，然后将新的位图对象与您的第二个图像像素逐个像素进行比较。

所以首先你会遍历像素

*   x < mainImageWidth - subImageWidth
*   y < mainImageHeight - subImageHeight

如果主图像中 (x, y) 处的像素与子图像中 (0, 0) 处的像素具有相同的颜色值，则复制从 (x, y) 开始的区域，与您的尺寸相同使用类似这样的功能将主图像的子图像转换为新的位图对象 - [http://msdn.microsoft.com/en-us/library/aa457087.aspx](http://msdn.microsoft.com/en-us/library/aa457087.aspx)

然后只需遍历新对象和子图像中的像素，在相同坐标处比较颜色。如果遇到差异，请打破循环。如果你到了这个循环的结尾，你有一个匹配并且可以返回 True，否则继续循环遍历主图像的像素，直到你到达一个子图像不可能再适合的点，然后返回 False .**

# extjs4 - 如何设置组合的选项/动态存储

> ID：10899829
> 
> 赞同：2
> 
> 时间：2012-06-05T15:05:00.637
> 
> 标签：extjs4

我在我的网格中使用它的组件列。

我想为每个用户设置不同的商店。

如果在 Grid 中有 4 个用户，我想为每个用户设置不同的组合存储，以便当用户单击组合时，他将根据他的许可看到选项，或者我将设置的存储。

```
xtype: 'itscomponentcolumn',
            text : '<b>Permission</b>',
            width: 150,
            dataIndex: 'permission',
            items: function(value,record) {
            return { 
                xtype: 'combobox',
                store: [[0,'View Only'], [1,'View & Edit'], [2,'View,Edit & Delete'],[3,'No Access']],
                //store:Combo_Store,
                queryMode:'local',
                displayField: 'display',
                valueField: 'value',
                name:'permission',
                forceSelection:true,
                width: 145,
                listeners: { } 
```

我无法附加图像。想象一下 Grid 有 5 条记录。网格有 2 列，用户名，权限列中的权限我正在显示组合，我在上面给出了代码。

假设有 vivek 用户，如果他只有查看权限，那么我只想在 vivek 记录旁边的组合中显示视图。

其他用户也一样。

我尝试使用 bindStore 设置商店，但对我不起作用。

请建议我如何做到这一点？

根据您的建议，我的代码是这样的

```
xtype: 'itscomponentcolumn',
            text : '<b>Permission</b>',
            width: 250,
            sortable:false,
            dataIndex: 'permission',
            items: function(value,record) {
            return { 
                xtype: 'combobox',
                store: new Ext.data.Store({
                    proxy: {
                        type: 'ajax',
                        url: comboStoreURL+"&currenetUserId="+record.get("userId"),
                        reader: {
                            type: 'json',
                            root: 'jsonStore'
                        }
                    },
                    autoLoad: true
                }), 
```

但是我能知道为什么每次都给呼叫服务器吗？我的意思是每条记录。我想一定有其他方法可以做到这一点，因为我在我的 Grid 商店中获得了许可。

我的实际网格代码是这样的。

```
var store = Ext.create('Ext.data.Store', 
            {
                storeId: 'ShareComponentStoreId', 
                fields: ['userId','userName','permission','isProjectOwner'],
                 proxy: {
                    type: 'ajax',
                    url:strURL,
                    reader: 
                    {
                        root: 'rootShareGrid', 
                        totalProperty: 'totalCount'
                    },
                    writer: 
                    {
                        type: 'json', 
                        writeAllFields: false, 
                        allowSingle: false, 
                        encode: true, 
                        root: 'row'
                    } 
                }

            }); 

var shareGrid = Ext.create('Ext.grid.Panel', {
            id: 'ShareComponentGrId',
            enableColumnMove:false,
            store: store,
        columns: [
        {
            text: '<b>Name</b>',
            flex: 1,            
            sortable:false,
            width: 100,
            dataIndex: 'userName'
        },
        { 
            xtype: 'itscomponentcolumn',
            text : '<b>Permission</b>',
            width: 250,
            sortable:false,
            dataIndex: 'permission',
            items: function(value,record) {
            return { 
                xtype: 'combobox',
                store: new Ext.data.Store({
                    proxy: {
                        type: 'ajax',
                        url: comboStoreURL+"&currenetUserId="+record.get("userId"),
                        reader: {
                            type: 'json',
                            root: 'jsonStore'
                        }
                    },
                    autoLoad: true
                }),
                queryMode : 'local',
                displayField: 'display',
                valueField: 'value',
                name:'permission',
                forceSelection:true,
                width: 200, 
```

所以 record.get('permission') 具有该用户的权限。

我想将该权限添加到组合商店。

即默认的combostore + 用户的权限。

希望我能在这里很好地解释。

请尽快回复我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T18:23:32.577

当然，有几种方法可以做到这一点。我的建议是使用 autoLoad:true 进行权限存储。您立即获取用户权限，然后在网格加载时它对您的组合框可用。

# ios - iAd 合同到期？不是这样，iTunesConnect 说。iAd 模块不这么认为

> ID：10899830
> 
> 赞同：8
> 
> 时间：2012-06-05T15:05:01.557
> 
> 标签：ios, app-store-connect, iad

我最近更新了我的开发者会员资格。我的新合同于 5 月 19 日生效。上周我进去浏览了我的 iAd 收入，发现我所有的 iAd 应用程序都是“红色”并且没有收到广告。在展开详细信息找出原因后，iAd 模块告诉我我的 iAd 合同已过期。但是，合同、银行和税务模块报告一切正常，我的 iAd 合同将在 2013 年 5 月 19 日之前有效。

顺便说一句，我最后一天的收入是今年 5 月 19 日。

我打电话给 Apple 支持，接到了后续电话，要求我提交屏幕截图，但我没有收到任何回复。有没有其他人经历过这个？

![iAdContract 页面](../Images/a624960fc5da6bea29e9e4aed22db3e7.png)

![iAd 收入页面](../Images/802b9bb7e4e045aef79c5f0efc9094e8.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T14:34:31.897

所以这个问题的解决方案是，正如我和贾斯汀所经历的那样：

*   致电（而不是写信给）iOS 开发人员计划支持（不是技术支持：那没用）。您可以在这里找到号码：[https ://developer.apple.com/contact/phone.php](https://developer.apple.com/contact/phone.php)

*   没有等待时间。他们马上回复

*   解释问题，记住开发计划支持的人没有 iTunesConnect：他们只能看到你的合同是好的

*   他们会向您发送一封电子邮件，要求您提供屏幕截图

*   向他们发送屏幕截图和问题的详细描述

*   3/4 天后，您将收到一封电子邮件，说明您的问题已转给高级顾问

*   10 天后，您将收到一封电子邮件，说明您的问题正在解决

*   在 14 天内（我的情况），您的问题将得到解决，广告将重新开始。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-02T12:06:25.523

有完全相同的问题。主协议规定我的 iAd 合同有效期至 2013 年 10 月，而 iAd 模块确认我不会收到广告，因为“我的 iAd 合同已过期”（尚未提供续订选项）。我用详细的屏幕截图写信给 iAd 支持。作为第一个回复，他们说了一些与问题无关的内容（他们写道，当应用程序“准备出售”时，我无法启用 iAds - 太糟糕了已经启用的 iAds）。他们建议重新提交该应用程序。我回信指出问题在于 iAd 模块和合同模块之间的不一致。他们写道，他们会将问题转发给技术团队。两天后，我没有任何消息。这令人沮丧，

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-29T02:52:56.953

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-04-06T23:07:57.997

FYI: Apple is no longer renewing iAd accounts as they are shutting down the entire system at the end of June. Source: just got off the phone with Apple Dev Connect

# android - android:clearTaskOnLaunch 不工作

> ID：10899835
> 
> 赞同：2
> 
> 时间：2012-06-05T15:05:18.573
> 
> 标签：android, task

出于某种原因 android:clearTaskOnLaunch 似乎对我不起作用。

这就是我的清单中的内容：

```
 <activity 
        android:name=".MainActivity" 
        android:icon="@drawable/i" 
        android:label="@string/app_name"
        android:theme="@style/MeuhedetThemeNoTitle"  
        android:finishOnTaskLaunch="true" 
        android:clearTaskOnLaunch="true">
        <intent-filter>
            <action android:name="android.intent.action.MAIN"/>
            <category android:name="android.intent.category.LAUNCHER"/>  
        </intent-filter>
    </activity>
    <activity 
        android:name=".MainScreenActivity"
        android:screenOrientation="portrait" 
        android:label="" 
        android:finishOnTaskLaunch="true"  
        android:clearTaskOnLaunch="true"/> 
```

第一个是启动屏幕，它也做了一些工作，然后转到第二个活动。那是主菜单。

我设法通过在所有其他活动上使用 android:finishOnTaskLaunch="true" 让所有其他活动“死亡”。

但是，一旦应用程序运行，下次启动它时启动屏幕就不会再次出现，并且活动“MainScreenActivity”会立即启动。当我按下设备上的主屏幕时会发生这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T15:37:55.530

如果我的问题是正确的，那么当您按下主页按钮时，活动不会被破坏，它会暂停，当您尝试再次启动应用程序时，android 不会启动应用程序，它会恢复堆栈中的最后一个活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T14:41:27.687

> 该属性仅对启动新任务的活动（根活动）有意义；任务中的所有其他活动都会忽略它。[关联](http://developer.android.com/guide/topics/manifest/activity-element.html#clear)

根据您的清单文件，您只能在 MainActivity 上设置此标志。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-03-06T08:02:12.467

把我试着在应用程序部分设置 clearTaskOnLaunch="true" :) 我认为它会工作

# image - 别人点赞后自动贴在墙上的图片怎么改？

> ID：10899845
> 
> 赞同：0
> 
> 时间：2012-06-05T15:06:19.250
> 
> 标签：image, facebook-like, facebook-wall

如果我没有在我的代码中放置任何打开的图形标签。Facebook如何决定在用户​​点赞后在用户墙上发布什么图片？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T15:25:41.640

It scrapes your page and looks for the images with certain dimensions and width/height ratio to choose from. Have a look here: [How does Facebook Sharer select Images and other metadata when sharing my URL?](https://stackoverflow.com/questions/1138460/how-does-facebook-sharer-select-images)

# linux - LD_LIBRARY_PATH 副作用

> ID：10899861
> 
> 赞同：7
> 
> 时间：2012-06-05T15:06:58.217
> 
> 标签：linux, bash, unix, ld

我对改变有奇怪的副作用`LD_LIBRARY_PATH`。

当我附加包含库的路径时，例如：

```
LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/my_path/lib 
```

然后，一切都变得难以置信的缓慢。例如，一个简单的`ls`可以长达 10 秒。

`ldd`更改前后的输出完全相同`LD_LIBRARY_PATH`，我尝试使用以下命令调试慢速执行`ls`：`strace`我在两种情况下都得到完全相同的执行。执行期间甚至不会卡住`ls`（因为`strace`在 10 秒延迟期间没有输出任何内容，然后突然完美执行`ls`）。所以我认为它可能来自我的 shell，但这是相同的，`strace`在我的 bash 上运行并`ls`在两种情况下执行都会给我相同的`strace`输出：shell 执行`ls`并等待其执行结束（`strace`滞后前的最后一个输出`strace`是`waitpid(...)`）。所以我猜在发布之间发生了一些错误`ls`及其执行，就像它是内核级问题一样。它的作用就像`sleep`是在`ls`（0 cpu 使用）上进行的。

在延迟期间，我的 CPU 和网络活动完全正常...

`ls`请注意，新 LD 路径中的库不与任何“标准库”冲突，因此在我的示例中不会干扰。

`LD_LIBRARY_PATH`因此，我对有关副作用或如何深入调试我的示例的更深入解释很感兴趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-11T10:19:43.040

这篇文章已经过时了，所以我不知道你是否已经找到了解决方案。无论如何，我不知道这是否有帮助，但在大多数现代 GNU/Linux 系统中，**不推荐使用 LD_LIBRARY_PATH 并且不**鼓励使用。

因此，我有几个建议：

1.  如果您想继续使用它，请先尝试预先添加而不是将您的库路径附加到 LD_LIBRARY_PATH。如果在以前的库目录中扫描路径需要很长时间，这应该会有所帮助。

2.  使用 LDCONFIG 系统，这是当今使用 LD 目录的（新）*正确方法*。您只需在*/etc/ld.so.conf*文件中添加库的路径，或者更好的是，在 /etc/ld.so.conf.d/ 中添加一个包含库路径的文件（它将是如果*/etc/ld.so.conf*中有包含指令，则来源，默认情况下通常是这种情况）。然后运行`sudo ldconfig`更新系统LD搜索路径。

我希望这会有所帮助。干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T19:58:25.327

我不确定您`LD_LIBRARY_PATH`或您要添加的库上还有什么或者您正在运行什么程序，但您最好编写一个包装脚本来更改 LD_LIBRARY_PATH 仅用于需要额外库的程序以便您的系统之类的功能`ls`不受影响。

```
#!/bin/bash
export LD_LIBRARY_PATH=/my_path/lib
program_name 
```

创建文件和`chmod +x wrapper_name`

# objective-c - retaining an object that was added to a relationship property of an NSManagedObject

> ID：10899862
> 
> 赞同：0
> 
> 时间：2012-06-05T15:07:03.853
> 
> 标签：objective-c, ios, core-data, memory-management, nsmanagedobject

In have an NSManagedObject subclass:

```
 @interface ManagedActivityAmount : NSManagedObject

    @property (nonatomic, retain) NSNumber * distance;
    @property (nonatomic, retain) NSNumber * duration;
    @property (nonatomic, retain) NSSet *sets;

    @end

    @interface ManagedActivityAmount (CoreDataGeneratedAccessors)

    - (void)addSetsObject:(ManagedPowerSet *)value;
    - (void)removeSetsObject:(ManagedPowerSet *)value;
    - (void)addSets:(NSSet *)values;
    - (void)removeSets:(NSSet *)values;

    @end 
```

I encounter a problem in keeping a reference to an object that i added to the sets relationship using the:

```
 - (void)addSetsObject:(ManagedPowerSet *)value; 
```

the ManagedPowerSet object was successfully added to the ManagedActivityAmount sets property, and I'm assuming it's retain count is 1 due to this (the actual object was autoreleased before that so the retain count was 0 before adding it to the set). am I correct? am I missing something?

I'm assigning the ManagedPowerObject to another instance variable of the view controller (this is a private instance variable, not a retained property) but I can't seem to access it later. should I retain it? i'm just about to do so and check, but I really want to understand we it wasn't retained in the first place.

thanks :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T15:23:48.883

If you are not using ARC, you must claim ownership (retain) of anything you intend to use at a later time. And release it when you are done with it (for ivars this would generally be in the class's dealloc implementation). I suggest you use properties to do this as it generally results in less coding. This is due to the fact that you must always release old pointers before assigning new ones:

```
[_managedPowerObject release];
_managedPowerObject = [managedPO retain]; 
```

This would be used whenever assigning to an ivar (instance variable) directly. Or you could just use a property:

```
@property (nonatomic, retain) ManagedPowerObject *managedPowerObject; 
```

The default implementation of the property will handle the release/retain for you and now you can simply use:

```
self.managedPowerObject = managedPO; 
```

I would suggest reading through Apple's memory management guidelines: [https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html#//apple_ref/doc/uid/10000011-SW1](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html#//apple_ref/doc/uid/10000011-SW1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T15:43:51.540

So i wasn't missing anything, the retain count assumptions were correct, no retain was needed since the object outlives the controller, if it were a property it should have been assigned..

the problem was really stupid on my part, i didn't allocate something else that made it looked like the object was lost, though actually it wasn't.

as for the debugger and what seems as if the two pointers that were supposed to point to the same address but weren't - i have no clue why this happens, i guess the xcode debugger has some delays..

# php - 如何可靠地识别 PHP 中的特定错误？

> ID：10899863
> 
> 赞同：2
> 
> 时间：2012-06-05T15:07:04.163
> 
> 标签：php, exception-handling

由于 PHP`unlink()`本身不支持异常，我正在为它制作一个包装函数。它应该抛出一个`FileNotFoundException`如果给定的文件不能被删除，因为它不存在。

为此，我需要确定抛出的错误`unlink()`是由丢失的文件还是其他原因引起的。

这是我的自定义删除功能的测试版本：

```
public function deleteFile($path){
    set_error_handler(function($errLevel, $errString){
        debug($errLevel);
        debug($errString);
    });
    unlink($path);
    restore_error_handler();
} 
```

For `$errLevel`and `$errString`I get *2* (E_WARNING) and *unlink(/tmp/fooNonExisting): No such file or directory*

一个相当大胆的方法是这样的：

```
if( strpos($errString, 'No such file or directory') !== false ) {
    throw new FileNotFoundException();
}; 
```

问题 1：我可以在多大程度上依赖错误字符串在不同 PHP 版本中是相同的？问题2：有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T15:18:29.113

我会简化代码：

```
public function deleteFile($path){

    if (!file_exists($path) {
        throw new FileNotFoundException();
    }else{
        unlink($path);
    }

    if (file_exists($path) {
        throw new FileNotDeleted();
    }
} 
```

然后你不必捕捉`$errstr`并做复杂的错误捕捉。当引入异常时，它将工作到 PHP 4。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T18:27:02.950

在阅读我遇到的旧[问题](https://stackoverflow.com/questions/10607539/is-there-any-native-php-function-which-throws-an-built-in-exception)[`ErrorException`](http://php.net/class.errorexception.php)时，结合`set_error_handler()`这将是所有原生 PHP 错误的自动***错误到异常转换器：***

```
function exception_error_handler($errno, $errstr, $errfile, $errline ) {
    throw new ErrorException($errstr, 0, $errno, $errfile, $errline);
}
set_error_handler("exception_error_handler");

/* Trigger exception */
unlink('Does not exitsts'); 
```

任何人都可以教授这个吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T15:27:47.683

我相信它（即你的代码）应该是足够可移植的......关于实现同样事情的更好方法，我会做不同的事情（虽然代码很简单，但它也更具可读性......所以忍受与我一起）

```
function deleteFile($file_path){
    if(!is_file($file_path)){
        throw new Exception("The path does not seem to point to a valid file");
    }
    if(!file_exists($file_path)){
        throw new Exception("File not found!");
    }
    if(unlink($file_path)){
        return true;
    } else {
        throw new Exception("File deletion failed!");
    }
} 
```

当然，您始终可以压缩和改进代码……这有帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T15:37:36.267

多年来，我已经看到 php 错误消息发生了很大变化。也许，尝试在一段非常细化的代码上检测最后一个错误的变化，然后导致字符串解析非常松散。

```
$lastErr = error_get_last();
unlink($file);
if ($lastErr !== error_get_last()) {
    // do something
    //maybe string parsing and/or testing with file_exists, is_writable etc...
} 
```

# ios - testflight 应用程序在启动时关闭

> ID：10899867
> 
> 赞同：5
> 
> 时间：2012-06-05T15:07:20.980
> 
> 标签：ios, xcode, apple-push-notifications, testflight, adhoc

我正在尝试通过 testflight 安装一个 ad-hoc 应用程序，因此我从苹果门户创建了一个 ad-hoc 配置，我构建了 .ipa，然后将其提交给 testflight。

问题是我可以从 testflight 安装应用程序（我没有收到任何错误），但是当它启动应用程序时，它会在没有任何警报或消息的情况下关闭。

经过一些测试，我已将设备连接到 xcode，然后单击“配置开发”（或类似的东西，我记错了，因为我再也看不到那个选项了）。之后，应用程序在启动时没有关闭，并且运行良好。

问题是，如果我必须为任何设备启用 xcode 开发，我就无法通过 testflight 分发应用程序！

为什么我有这种行为？我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T16:40:26.010

如果您可以从 TestFlight 安装应用程序而没有错误，那么您的设备已正确列在配置文件中。你的问题是别的。

尝试查看设备的崩溃日志，看看出了什么问题。您可以提取它们并在 Xcode 中对它们进行符号化。

**对MusiGenesis 答案的更正：**临时构建不能与推送通知一起使用当然是不正常的！您只需正确设置和使用系统。

临时构建未收到推送通知时的常见错误来源：

*   为您的应用启用推送后，您没有生成新的配置文件。这会导致收到的推送令牌为零。
*   您正在使用开发证书连接到 APNS 服务器。临时构建被视为分发构建，因此您必须使用生产密钥。
*   您正在向 APNS 服务发送混合的开发令牌（来自开发构建）和生产令牌（来自临时构建）。这会导致整批推送通知被服务器静默丢弃。将您的开发、临时和生产令牌数据库完全分开以避免这种情况。无法确定哪些令牌正在毒害您的批次，因此您必须将它们全部清除并确保仅插入正确类型的令牌。

我总是为需要注册推送的应用程序运行 3 个后端实例。一种用于开发构建，一种用于临时构建，一种用于 App Store 构建。例如，您可以在 上保持单独的 API 端点在线`dev.mybackend.com`，`staging.mybackend.com`并由`production.mybackend.com`不同的数据库实例支持以隔离它们。

然后，在 Xcode 项目中，我为这些类型的构建提供了单独的构建配置，并在使用预处理器宏时交换了正确的后端。如果您想确保您的开发构建不会向生产帐户报告错误的分析，自动使用正确的配置文件等，单独的构建配置也很方便。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-02T22:54:16.447

这是 2012 年的一个老问题，但最近我遇到了完全相同的问题。我想出了我们的问题所在。我使用的是 OCMock 框架，当我将它更新到 3.0 版时，我开始遇到这个问题。我把它恢复了，它工作正常。我还不知道 OCMock 3.0 中的什么导致了这个问题。如果我弄明白了，我会在这里再写一次。

[http://ocmock.org/ocmock3/](http://ocmock.org/ocmock3/)

# mysql - 更新 MySQL 查询抛出语法错误

> ID：10899872
> 
> 赞同：0
> 
> 时间：2012-06-05T15:07:35.970
> 
> 标签：mysql

尝试更新 mysql 员工表，其中 Group 列如果包含单词员工，它将将该列的内容更改为 4。我做错了什么？

```
UPDATE employee SET Group = "4" WHERE Group LIKE "Staff"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T15:08:52.950

`GROUP`是一个[保留字](http://dev.mysql.com/doc/en/reserved-words.html)。用反引号引用它：

```
UPDATE employee SET `Group` = "4" WHERE `Group` LIKE "Staff"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T15:08:52.863

您需要引用保留字`GROUP`

> 如果它包含单词人员

和通配符运算符`%`来`LIKE`匹配任何实例，而不仅仅是整个字符串（`LIKE`没有通配符相当于`=`）。

```
UPDATE employee SET `Group` = "4" WHERE `Group` LIKE "%Staff%"; 
```

# sql-server - 在不使用 SQLCLR 的情况下使用 sql 脚本/查询检查 Internet 连接可用性

> ID：10899879
> 
> 赞同：-3
> 
> 时间：2012-06-05T15:08:03.617
> 
> 标签：sql-server, sql-server-2008, sql-server-2008-r2

我通过 sp_send_dbmail 存储过程发送邮件。从另一个 SP 执行 sp_send_dbmail SP。在执行 sp_send_dbmail SP 之前，我想检查互联网连接。是否有任何查询以查找互联网连接。请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T15:23:50.367

为什么要检查 Internet 连接？Internet 连接并不能指示 sp_send_dbmail 是否可以工作。

当我支持 SQL Server 时，SQL Server 框具有 Internet 连接，但该连接不用于发送电子邮件。相反，SQL Server 框将所有电子邮件转发到我们最终发送它们的邮件服务器。

[如果您查看有关 sp_send_dbmail](http://msdn.microsoft.com/en-us/library/ms190307.aspx)的文章的备注部分，您会发现成功发送电子邮件与配置邮件服务有关，而不是与 Internet 连接有关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T15:32:19.780

如果您在 中实施`Exception handling`，`Stored Proc`将获得以下详细信息。

**错误信息**

> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：命名管道提供者，错误：40 - 无法打开与 SQL Server 的连接）

**错误编号 - 53**

这不是一种理想的方式，但可以检查错误号/消息以查看请求是否能够到达目的地。请看下面的屏幕截图...

![在此处输入图像描述](../Images/955118bf9609300957de421adf76cad3.png)

# c - C 编程 - 位运算符和知道何时使用

> ID：10899881
> 
> 赞同：3
> 
> 时间：2012-06-05T15:08:07.887
> 
> 标签：c, udp, hex, packet, bit

我在 K&R II C Programming ANSI C 书中读到“>>”和“<<”运算符控制位，当然，作为菜鸟，我不明白何时使用它们。我对弄清楚如何手动构建数据包很感兴趣，我遇到了以下代码段：

```
unsigned short csum(unsigned short *buf, int nwords)
{       
        unsigned long sum;
        for(sum=0; nwords>0; nwords--)
                sum += *buf++;
        sum = (sum >> 16) + (sum &0xffff);
        sum += (sum >> 16);
        return (unsigned short)(~sum);
} 
```

我知道这会计算校验和，但我不明白这里发生了什么。XD

显然这超出了我的技能范围，但我想我可以使用这个片段作为替罪羊来找出一些悬而未决的问题。*您何时*知道何时使用按位运算符来实现某个值，为什么不直接加 (+) 或减 (-)？另外，如果两者没有运算符，为什么`&0xffff`旁边有一个十六进制？`sum`

PS是什么`~sum`意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T15:12:26.090

您所说的一切都与位级别的操作有关。例如，“var >> num”将 var 向右移动 num（这意味着它将 var 除以 2^num）。~var 也会在位级别反转 var（例如，如果 var = 5 in bit notation= 101 ----> ~var = 010）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T15:13:42.073

> 你什么时候知道什么时候使用按位运算符来实现某个值

当您需要对对象的各个位进行操作时，请使用按位运算符，而简单的整数算术要么不够用，要么不太清楚地描述代码的意图。

我知道这听起来很简单，但实际上就是这么简单。

> 为什么`&0xffff`旁边有一个十六进制`sum`

`&`是位与运算符。在这种情况下，它用于实现[位掩码](http://en.wikipedia.org/wiki/Mask_%28computing%29)。

> 是什么`~sum`意思？

`~`是按位逆运算；它反转每个位的值。

我希望在您用来学习 C 的任何书中都解释了这些运算符中的每一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T15:13:51.970

这不是*一个*问题，这是一大堆问题。:)

1.  当您想将数字视为位集合而不是整数时，可以使用位运算符。说“我想要这个位模式向左移动两位”比创建数学上等效的操作要容易得多。它们在概念上是不同的；如果您将数字视为位，则使用位运算符*更有*意义。
2.  通过`& 0xffff`屏蔽所有高位来确保该值为 16 位。这假设系统的`unsigned long`宽度至少为 16 位，这是一个非常安全的假设。( `&`bitwise `AND`) 通常用于此目的。查看逻辑合取的[真值表](http://en.wikipedia.org/wiki/Truth_table#Logical_conjunction)并认为“假为 0，真为 1”以了解其工作原理。
3.  十六进制常量之前是 C的`&`按位与运算符，用于进行我上面描述的屏​​蔽。基本上，对于一位变量`a & b`，结果是`1`当且仅当两者`a`和`b`都是1。运算符将此逻辑应用于其输入项中的每对位。
4.  运算符是 C的`~`按位反转，它“翻转”其参数的位。它通常用于创建蒙版。

# webgl - （重新）激活 3d 体积 WEBGL 切片

> ID：10899883
> 
> 赞同：0
> 
> 时间：2012-06-05T15:08:14.227
> 
> 标签：webgl, xtk

当我尝试在方向（x、y、z）之间切换时，我得到了一个不常见的结果。**当我重新激活在 (1) 之前设置为可见 = false**的方向的图层时，如果我将可见性更改为**true** (2) ，它看起来像这样。这个例子依赖于[xtk 第 10 课](http://lessons.goxtk.com/10/)[抱歉 jpg 质量低]

提前致谢

(1)

![1](../Images/52a312bcb5f1e62a81d5a789c0e9e096.png)

(2)

![2](../Images/eb6d265dcce5969edc653557b20f0884.png)

**编辑：**我尝试仅显示/激活一个方向并按 +/- 穿过图层。

不幸的是，目前缺少“avf.nrrd”。

我知道如何在激活所有 3 层的情况下执行此操作。它工作得很好，我可以通过切片并更改 keydown 上的轴。但现在我想做同样的事情，但这次我想停用*未*选中的 2 轴

**EDIT2：**好的，我一切正常。唯一的问题是将行*modified()*定位到正确的行。

[小提琴](http://jsfiddle.net/p0rter/HG955/)

# javascript - jQuery选择相同类的元素并从数组中附加相应的值

> ID：10899884
> 
> 赞同：0
> 
> 时间：2012-06-05T15:08:14.900
> 
> 标签：javascript, jquery

我是编程新手，所以不确定这是否可以在 jQuery 中完成。

我需要选择一组具有相同类的段落，然后从数组中为它们分配一个值（替换它们的内容或将其附加到段落），因此对于第一项，数组中的索引 0 为第二个段落的索引 1数组等等。

我猜我必须做一个循环一个each（）类型的函数所以这就是我想出的

```
$(document).ready(function(e) {
    writeValues('values','.mainPageMeters');
});

function writeValues ( a , b ) {
    var mCount = 0;
    var mValues = $('<p>');

    $("p.mainPageMeters" + a).each(function() {
        $(this).html('<p>' + mCount + '</p>' +    $(this).html());
        mValues.append($('<p>' + mCount++ + $(this).text() + '</p>')); 
    });

    $("" + b).append(mValues);
}

<p class="mainPageMeters">Loren Ipsum bla bla bla </p>
<p class="mainPageMeters">Loren Ipsum bla bla bla </p>
<p>Loren Ipsum bla bla bla </p>
<p class="mainPageMeters">Loren Ipsum bla bla bla </p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T15:14:48.147

我不确定我是否正确理解您打算做什么，但这可能会有所帮助：

```
$(document).ready(function() {
    array = ["first", "second", "third"];
    $("p.your-class").each(function(i, $p) {
        $p.html(array[i]);    // or
        $p.append(array[i]);
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T15:15:30.370

你走在正确的轨道上，看起来你只需要更多地练习 JS。这是我制作的一个快速示例，我认为这就是您想要做的。

```
​var arr, numOfWords, paragraphs;

​arr = ["newFoo", "newBar"]​​​;
paragraphs = $(".myClass")

    // here I'm using jQuery to loop over each paragraph
    paragraphs.each(function (i, elem) {
       // here I assign the paragraphs text to the array's current index
       $(elem).text( arr[i] );    
    }); 
```

[http://jsfiddle.net/n3GKf/](http://jsfiddle.net/n3GKf/)

# javascript - Javascript 图像滑块将文本发送到屏幕外并显示页脚

> ID：10899902
> 
> 赞同：0
> 
> 时间：2012-06-05T15:08:57.730
> 
> 标签：javascript, jquery, html, css

我在以下页面上有一个 javascript 滑块：[crothersenvironmental.com/crothers/index.html](http://crothersenvironmental.com/crothers/index.html)，它不断将其下方的相关段落文本发送到屏幕一侧。您可以在右侧的滑块下方看到它。单击滑块上方的相关数字后，每次单击数字时，您都会看到文本向右移动，直到它们从屏幕上移出并消失。此外，一旦您单击#1，页脚就会向上移动，然后在您单击任何其他数字后又向下移动。

任何帮助、想法或方向都会非常有帮助。首先十分感谢。

这是我正在使用的 js 脚本：

$('#recentprojects li a').click(function() {

```
var $this = $(this);

if ( !$this.parent('li').hasClass('selected') ) {

    var url = this.href,
        height = $('#recentworkimage img').css('height');

    $this
      .parents('ol')
      .find('li.selected')
        .removeClass('selected');

    $this.parent('li').addClass('selected');

    $('#recentworkimage')
      .css('height', height)
      .children('img')
        .fadeOut(1000, function() {
            $(this).attr('src', url).load(function() {
                $(this).fadeIn(1000);
            });

        $this.parents('#recentprojects')
          .find('p:last')
            .empty()
            .html('<p>' + $this.attr('title') + '</p>');
    });

}

return false; 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T15:15:51.357

我认为问题在于：

```
$this.parents('#recentprojects')
      .find('p:last')
        .empty()
        .html('<p>' + $this.attr('title') + '</p>'); 
```

您将文本添加到`p`导致一种递归行为的最后一个标签中。每次添加新`p`标签时，它都会成为最后一个`p`.

执行此操作的另一种方法可能是：

```
$this.parents('#recentprojects')
      .find('p:last')
        .remove()
        .html('<p>' + $this.attr('title') + '</p>'); 
```

remove 方法应该删除旧的并用新的替换它。

希望这可以帮助

编辑 -

其实你可以这样做`.find('p:last').html('yada yada yada');`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T15:18:01.077

首先，您不需要在设置新的 HTML 字符串之前清空元素，因为`.html()`已经替换了整个内容。您的字幕越来越向右移动的原因是因为您正在`<p>`递归地添加元素。

尝试以下操作：

```
$this.parents('#recentprojects')
    .find('p:last')
    .html($this.attr('title')); 
```

虽然在这种情况下（当您查找唯一 ID 时）您可以像这样简化：

```
$('#recentprojects')
    .find('p:last')
    .html($this.attr('title')); 
```

或者，如果这是`<p>`您在该元素中唯一拥有的，您可以进一步减少：

```
$('#recentprojects p')
    .html($this.attr('title')); 
```

如果您想在页面加载时使用 JavaScript 更新字幕，请添加以下内容：

```
$(document).ready(function () {
    var projects = $('#recentprojects');
    projects
        .find('p:last')
        .html(projects
            .find('a:first')
            .attr('title'));
}); 
```

# jquery-ui - UI 没有用 KnockoutJS 和 JqueryUI Sortable 完全更新

> ID：10899904
> 
> 赞同：0
> 
> 时间：2012-06-05T15:09:11.637
> 
> 标签：jquery-ui, knockout.js, jquery-ui-sortable, knockout-sortable

首先对不起我的英语不好！

无论如何，我正在尝试基于 Knockout JS 和 Jquery UI 制作一个简单的任务管理器。经过一番研究，我发现了一个小插件，可以帮助将 KO 与 JqueryUi 的 sortable 连接起来，你可以在这里阅读：[http ://www.knockmeout.net/2012/02/revisiting-dragging-dropping-and.html](http://www.knockmeout.net/2012/02/revisiting-dragging-dropping-and.html)

该插件可以很好地更新可观察数组的顺序，但我还需要根据元素在数组中的位置刷新元素的一些值。我尝试在每次排序后更新整个数组，但我注意到一个奇怪的行为：虽然 UI 保持不变，但如果我将数组发送到 JSON，它会使用正确的值进行更新！

你可以在这里找到我的代码片段：http: [//jsfiddle.net/ingro/mz3MK/](http://jsfiddle.net/ingro/mz3MK/)

尝试移动 Sortable 列表中的一些元素，然后查看 UI 与使用“打印”按钮显示的值之间的差异。

编辑：尝试将第一个元素（test#1）拉到可排序列表的底部。元素的属性“时间”保持不变（07:00）。现在将它带到可排序列表的第二个位置，您会注意到属性“时间”变成了“10:00”！实际上，UI 仅在您拖动某些东西时才会刷新，并且只有被拖动的元素才会刷新到拖动之前的状态。但是如果你打印数组的值，你可以看到它总是被刷新：\

感谢任何可以帮助我的人！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T19:06:45.953

据我了解这个问题，您需要让时间和标题可见。考虑更新[jsfiddle](http://jsfiddle.net/mz3MK/2/)

```
var Post = function( time, title) {
    this.time = ko.observable( time );
    this.title = ko.observable( title );
}; 
```

然后

```
self.posts = ko.observableArray( ko.utils.arrayMap( posts , function( post ) {
        return new Post( post.time, post.title);
})); 
```

然后您就可以使用可观察的更新语法：

```
post.time(self.times()[count]); 
```

您也可能会发现这个淘汰赛 todo 应用示例[TodoApp 很有帮助](http://addyosmani.github.com/todomvc/architecture-examples/knockoutjs/index.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T19:14:27.190

您需要使帖子中的时间属性可观察，并更改更新它的方式，如下面的[小提琴](http://jsfiddle.net/8eeTx/)：

前：

```
self.posts = ko.observableArray([
    {time: "07:00", title: "test#1"},
    {time: "08:00", title: "work#2"},     
    {time: "09:00", title: "task#3"},    
    {time: "10:00", title: "sleep#4"}
]); 
```

. .

```
post.time = self.times()[count]; 
```

后：

```
self.posts = ko.observableArray([
    {time: ko.observable("07:00"), title: "test#1"},
    {time: ko.observable("08:00"), title: "work#2"},     
    {time: ko.observable("09:00"), title: "task#3"},    
    {time: ko.observable("10:00"), title: "sleep#4"}
]); 
```

. .

```
post.time(self.times()[count]); 
```

这样做的原因是，在该跨度中显示的文本绑定只会评估一次，因为该属性是不可观察的。

# jquery - 如何从 jQuery 中最接近的表单获取属性操作？

> ID：10899905
> 
> 赞同：1
> 
> 时间：2012-06-05T15:09:14.127
> 
> 标签：jquery, ajax, forms

`action="/uri/"`我正在尝试解决一个问题，当用户单击提交按钮时，我需要从父表单中获取。如果我使用`$(form).live('submit')`它只有一半的时间。所以我`$('input[type=""]').live('click')`改用了。但是，正如您在下面的代码中看到的那样，我正在尝试获取 action 属性但它无法识别它，或者我似乎无法从中获取`.attr('action')`。

```
<script>
var get_pages_load_options = { 
    target:        '#content',
    beforeSubmit:  showRequest,
    success:       showResponse
};
$('input[type="submit"]').live('click',function(event){
    var url = $(this).closest("form").attr('action');
    var named = $(this).closest("form").attr('id')
    console.debug(url+"/"+named);
    $("#"+named).ajaxForm(get_pages_load_options);
    $.ajax({
        type: "POST",
        url: url,
        data: {ajaxtype: "side"},
        success: function(data) {
            $("#sidebar_menu").html(data);
        }
    });
    event.preventDefault();
    return false;
});
</script> 
```

我尝试使用的 html 看起来像这样（为了便于阅读，删除了 PHP）：

```
<tr>
    <td class="bold" colspan="2">
        <form id='defcon_form' name='defcon_form' action='/cityhall/' method='post'>
            <div class="left">
                Realm Hoarding 
                <select name='defcon_rate'>
                    <option value='0'>None</option>
                    <option value='10'>Low</option>
                    <option value='20'>Medium</option>
                    <option value='30'>High</option>
                    <option value='50'>Critical</option>
                </select><br />
                <font size='-4'>(Stashes Gold/Turn, Decreases Defense)</font>
            </div><div class="right">
                <input type='submit' name='defcon' value='Update Hoarding!' />
            </div>
        </form>
    </td>
</tr> 
```

我知道 HTML 不是最好的，我需要回去修改一下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T15:41:39.827

您的 HTML 无效。`<tr></tr>`元素只能包含`<td></td>`和`<th></th>`元素。无效的 html 将在不同的浏览器中产生不一致的结果，或者可能在任何浏览器中都不起作用。

[https://developer.mozilla.org/en/HTML/Element/tr](https://developer.mozilla.org/en/HTML/Element/tr)

将表单包裹在整个表格而不是每个 tr 周围，并为每个 tr 提供一个数据键以包含给定 tr 的 id。有了它，您可以捕获任何进入表单的提交，使用 获取当前行的 id `$(this).closest('tr').data("key")`，然后在所述 tr 中发布来自输入的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T15:28:43.237

而不是`.closest`尝试使用`.parent`如下：

```
var url = $(this).parent().attr('action'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T15:37:38.083

试试这个

```
<script>
$('input[type="submit"]').click(function(event){
    event.preventDefault();
    var url = $(this).parents("form").attr('action');
    console.debug(url);
    $(this).ajaxForm(get_pages_load_options);
    $.ajax({
        type: "POST",
        url: url,
        data: {ajaxtype: "side"},
        success: function(data) {
            $("#sidebar_menu").html(data);
        }
    });
    return false;
});
</script> 
```

# c++ - 如何创建一个宏（或其他工具）以字符串格式使用给定变量的文本？

> ID：10899908
> 
> 赞同：5
> 
> 时间：2012-06-05T15:09:32.090
> 
> 标签：c++, macros

在尝试调查代码中的问题时，我喜欢调试打印：

```
cout << "foo:" << foo << "bar:" << bar << "baz:" << baz; 
```

由于我经常编写这样的代码，如果我能使其通用且更易于键入，那就太棒了。也许是这样的：

```
DEBUG_MACRO(foo, bar, baz); 
```

即使`foo`,`bar`和`baz`解析为变量名，而不是字符串，是否可以使用它们的变量名来创建字符串`"foo:"`,`"bar:"`和`"baz:"`? 你能写一个函数或宏来接受未指定数量的参数吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T15:22:57.650

如果你有 C++11，你可以使用可变参数模板做一些类型安全且相当整洁的事情，例如：

```
#include <string>
#include <iostream>

template <typename T>
void debug(const T& v) {
  std::cout << v << "\n";
}

template <typename T, typename... Tail>
void debug(const T& v, const Tail& ...args) {
  std::cout << v << " ";
  debug(args...);
}

#define NVP(x) #x":", (x)

int main() {
  int foo=0;
  double bar=0.1;
  std::string f="str";
  debug(NVP(foo),NVP(bar),NVP(f));
} 
```

此处的 NVP 宏完全是可选的，仅当您还想在代码中打印引用它的名称时才需要。

如果您真的想跳过 NVP 位，您可以使用 Boost 预处理器库（或滚动您自己的库），例如：

```
#include <string>
#include <iostream>
#include <boost/preprocessor/seq/for_each_i.hpp>
#include <boost/preprocessor/punctuation/comma_if.hpp>

template <typename T>
void debug_impl(const T& v) {
  std::cout << v << "\n";
}

template <typename T, typename... Tail>
void debug_impl(const T& v, const Tail& ...args) {
  std::cout << v << " ";
  debug_impl(args...);
}

#define NVP(x) #x":", (x)
#define MEMBER( r, data, i, elem ) BOOST_PP_COMMA_IF( i ) NVP(elem)

#define debug( members )                                \
  debug_impl(                                           \
  BOOST_PP_SEQ_FOR_EACH_I( MEMBER,, members )           \
  )

int main() {
  int foo=0;
  double bar=0.1;
  std::string f="str";
  debug((foo)(bar)(f));
} 
```

以一些稍微奇怪的语法为代价。我的例子是基于[这个答案](https://stackoverflow.com/a/6194809/168175)。我尝试使用可变参数宏将其作为“纯”C++11 解决方案直接解决，但结果证明通过列表递归比您希望的要棘手。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T15:13:13.737

```
#define DEBUG_MACRO(name) std::cout << #name << " = " << name << std::endl; 
```

示例：http: [//ideone.com/agw4i](http://ideone.com/agw4i)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T15:17:33.260

> 你能写出一个接受未指定数量参数的函数吗？

是的，但通常你不应该这样做。

您可以通过在声明中使用省略号来声明一个接受未指定数量参数的函数：

```
int foo(string foo, ...) 
```

但这有很大的问题。最大的问题是它破坏了类型安全。考虑当您*错误地*使用带有未指定参数列表的另一个函数时会发生什么：

```
int n = 42;
char buf[256] = {};
sprintf(buf, "%s", n); 
```

这是一个错误——我指定了一个字符串，但传递了一个`int`. 最好的情况是这将在我第一次调试程序时执行并立即爆炸。然而，更有可能的是，代码永远不会运行，直到生产中第一次出现异常情况，然后它会在交易日中间让你的整个程序停机。客户会打电话对你大喊大叫，取消单位，等等……好吧，我有点夸张，但重点是**类型安全是你的朋友**，即使你和它有爱恨交织的关系。

# java - .properties 文件中的条件语句

> ID：10899910
> 
> 赞同：5
> 
> 时间：2012-06-05T15:09:37.963
> 
> 标签：java, properties

有没有办法我们可以在`.properties`文件中使用条件语句？

像：

```
if(condition1)
    xyz = abc
else if(condition2)
    xyz = efg 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T15:11:34.420

**没有**属性文件中没有这样的条件语句，可能你会写一个包装器`Properties`来封装你的逻辑

例子：

```
class MyProperties extends Properties {

    /**
     * 
     * 
     * 
     * @param key
     * @param conditionalMap
     * @return
     */
    public String getProperty(String key, List<Decision> decisionList) {
        if (decisionList == null) {
            return getProperty(key);
        }
        Long value = Long.parseLong(getProperty(key));
        for (Decision decision : decisionList) {
            if (Condition.EQUALS == decision.getCondition() && decision.getValue().equals(value)) {
                return getProperty(decision.getTargetKey());
            }
        }
        return super.getProperty(key);
    }
} 
```

和

```
enum Condition {
    EQUALS, GREATER, LESSER

} 
```

和

```
class Decision {
    Condition condition;
    String targetKey;
    Long value;
    //accessor

    public Condition getCondition() {
        return condition;
    }

    public void setCondition(Condition condition) {
        this.condition = condition;
    }

    public String getTargetKey() {
        return targetKey;
    }

    public void setTargetKey(String targetKey) {
        this.targetKey = targetKey;
    }

} 
```

所以现在例如如果你想读取属性文件，获取年龄类别，如果它大于 0 并且小于 10 读取`kid`

所以你可以通过这些条件的列表，

**注意**：这个设计可以有很大的改进（不是好的设计），它只是为了说明如何包装属性和添加 OP 想要的东西

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-05T15:13:42.823

不，这是不可能的。文件格式免费提供：[http](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html#load%28java.io.Reader%29) ://docs.oracle.com/javase/6/docs/api/java/util/Properties.html#load%28java.io.Reader%29 。

在 Java 代码中执行此操作：

```
if (condition1) {
    return properties.getProperty("xyz.1");
}
else if (condition2) {
    return properties.getProperty("xyz.2");
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-05T15:17:12.547

如果您的问题是针对不同环境（例如 devl、test、perf、prod）的不同属性，常见的解决方案是针对每个环境使用不同版本的属性文件。将环境信息传达给您的应用程序并查找附加到文件名的正确名称的文件。

春天是这样的：

[基于 Spring 的 Web 应用程序的环境特定配置？](https://stackoverflow.com/questions/6284745/environment-specific-configuration-for-a-spring-based-web-application)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-05T15:17:15.173

正如@Jigar 所说，属性文件中没有条件逻辑。但是你可以在那里有两行，例如：

```
xyz.condition1 = abs
xyz.condition2 = efg 
```

并且，在您访问该属性的代码中，将适当的条件附加到密钥。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-16T09:55:57.357

这是这样的：

```
xyz[condition1]=abs
xyz[condition2]=efg 
```

# javascript - 使用 javascript 显示 Facebook fql.query 结果

> ID：10899911
> 
> 赞同：0
> 
> 时间：2012-06-05T15:09:40.787
> 
> 标签：javascript, facebook, facebook-fql

我现在正在学习 javascript 和 Facebook API，我正在尝试显示用户新闻源。我知道我需要使用的查询，但我不知道如何使用 javascript 显示结果。这是我的查询

```
SELECT post_id, actor_id, target_id, message FROM stream WHERE filter_key in (SELECT filter_key FROM stream_filter WHERE uid=me() AND type='newsfeed') AND is_hidden = 0 
```

我很确定显示每个结果的 forEach 循环是我需要做的，但我将如何使用新闻源发布信息填充每个结果？

### 编辑

好的，这是我正确接收查询结果的新代码。不幸的是，结果只是没有显示出来。

```
<script>

function showPosts() {
    FB.api("/fql?q="+encodeURIComponent("SELECT post_id, actor_id, target_id, message FROM stream WHERE filter_key in (SELECT filter_key FROM stream_filter WHERE uid=me() AND type='newsfeed') AND is_hidden = 0"), function(response, post_id, actor_id, message) {

    console.log(response);

    var posts = response.data
    var postId = post_id.data;
    var message = message.data;

    for (var i=0; i < posts.length && i < 25; i++) {
      var post = posts[i];

     markup += '<div>' + post.postId + post.message + '<div/>';
  }

    document.getElementById('newsfeedposts').innerHTML = markup;

});

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T15:18:06.823

通过 FB.api 执行查询，并处理您将在回调函数中返回的数据。

```
FB.api("/fql?q="+encodeURIComponent("SELECT ..."), function(response) {
  console.log(response);
}) 
```

在 Firefox 中执行它，查看 Firebug 控制台，您应该了解响应是如何构建的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-07T05:00:48.820

```
FB.api(

     'fql',

     {'q' : "SELECT url, like_count FROM link_stat WHERE url='http://stackoverflow.com/';"},

     function (response){
          console.log(JSON.stringify(response));
     }

); 
```

# blackberry - 用于移动网络的 Blackberry ConnectionDescriptor null

> ID：10899919
> 
> 赞同：0
> 
> 时间：2012-06-05T15:10:10.653
> 
> 标签：blackberry, java-me, httpconnection

我需要在我的黑莓设备上建立 HTTP 连接。以下是我的代码::

```
ConnectionFactory connFact = new ConnectionFactory();
ConnectionDescriptor connDesc;
connDesc = connFact.getConnection(getUrl); 
```

此代码在移动网络和 wifi 开启时运行良好，或者即使只有 wifi 开启，但当我仅在移动网络上运行应用程序时，我得到 ConnectionDescriptor = null。

我正在使用 BIS-C 计划，当我可以在移动网络上访问我的应用程序之外的其他网页时，我不明白为什么我的 ConnectionDescriptor 为空。

我尝试将“;deviceside=false”附加到 url，但它也没有帮助。我需要接受推送并使用移动网络点击几个网址，请帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T14:33:45.670

您需要致电：

```
connFact.setTransportTypeOptions(TransportInfo.TRANSPORT_BIS_B, 
            new BisBOptions("<here is key to use BIS-B access on the device>")); 
```

# .htaccess - .htaccess rewriterule 准确

> ID：10899923
> 
> 赞同：0
> 
> 时间：2012-06-05T15:10:20.693
> 
> 标签：.htaccess, url, mod-rewrite

```
RewriteRule ^([^/]+).html /index.php?sezione=$1 
```

它应该可以正常工作。但是这个重写有一个问题：实际上它重写正确：

```
www.example.com/index.php?sezione=hello to www.example.com/hello.html 
```

但它也重写，它不应该与

```
www.example.com/hello.htmlll  www.example.com/hello.htmlfed 
```

以及 html 扩展名之后的任何其他字符串。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T15:13:22.890

我认为这就是你想要的：

```
RewriteRule ^([^/]+).html$ /index.php?sezione=$1 
```

# node.js - nodejs从服务器发出请求

> ID：10899930
> 
> 赞同：0
> 
> 时间：2012-06-05T15:10:37.823
> 
> 标签：node.js

我想知道是否可以从我的 nodejs 应用程序向 API 发布一些信息，因为我似乎找不到可以从 nodejs 服务器发出请求的示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T15:22:10.470

我一直在使用[请求](https://github.com/mikeal/request)而不是节点 http。IMO 它绝对更强大且更易于使用

# extjs4 - 自定义 ExtJS 小部件（皮肤）

> ID：10899934
> 
> 赞同：1
> 
> 时间：2012-06-05T15:10:47.097
> 
> 标签：extjs4, customization, skinning

我想知道如何自定义现有 ExtJS 小部件（包括网格等复杂小部件）的形状、边框、阴影、颜色、效果……等？我希望能够在不破坏新皮肤的情况下重复使用它们并调整它们的大小（类似于 Flex 皮肤）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T17:45:58.273

我自己没有做过，但是有一个 ExtJS 的主题指南。希望它对您有用： [http ://docs.sencha.com/ext-js/4-1/#!/guide/theming](http://docs.sencha.com/ext-js/4-1/#!/guide/theming)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T02:09:51.890

正如@DmitryB 指出的那样——ExtJs 确实支持主题。我个人喜欢`Slate` [http://www.siliconhill.com.au/extjs/index-slate.html](http://www.siliconhill.com.au/extjs/index-slate.html)，因为它比标准的“香草”主题更现代。

但到目前为止，我在 Internet 上看到的所有内容基本上都是关于更改调色板，仅此而已。

我一直在寻找更复杂的东西，例如使所有控件更大和更多 Web2.0 类型，但不幸的是没有找到任何东西。

# linux - Linux内核丢弃UDP数据包

> ID：10899937
> 
> 赞同：5
> 
> 时间：2012-06-05T15:11:13.377
> 
> 标签：linux, udp, multicast, packet-loss

我有一个通过多播发送 UDP 数据包的服务器和一些列出这些多播数据包的客户端。每个数据包的大小固定为 1040 Bytes，服务器发送的整个数据大小为 3GByte。

我的环境如下：

1 Gbit 以太网络

40 个节点、1 个发送节点和 39 个接收节点。所有节点具有相同的硬件配置：2 个 AMD CPU，每个 CPU 有 2 个核心 @2,6GHz

在客户端，一个线程读取套接字并将数据放入队列。一个额外的线程从队列中弹出数据并进行一些轻量级的处理。

在多播传输期间，我发现节点侧的丢包率为 30%。通过观察 netstat –su 统计数据，我可以说客户端应用程序丢失的数据包等于 netstat 输出中的 RcvbufErrors 值。

这意味着所有丢失的数据包都被操作系统丢弃，因为套接字缓冲区已满，但我不明白为什么捕获线程无法及时读取缓冲区。在传输过程中，4 个核心中的 2 个被 75% 使用，其余的处于休眠状态。我是唯一使用这些节点的人，我会假设这种机器处理 1Gbit 带宽没有问题。我已经做了一些优化，通过为amd cpus添加g++编译器标志，这将丢包率降低到10%，但在我看来仍然太高了。

我当然知道UDP不可靠，我有自己的修正协议。

我没有任何管理权限，因此我无法更改系统参数。

任何提示如何提高性能？

编辑：我通过使用 2 个正在读取套接字的线程解决了这个问题。recv 套接字缓冲区有时仍会变满。但平均跌幅在 1% 以下，因此处理起来不成问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-06-23T01:30:04.057

在 Linux 上追踪网络丢包可能有点困难，因为有许多组件可能会发生丢包。它们可以发生在硬件级别、网络设备子系统或协议层中。

我写了一篇非常[详细的博客文章](http://blog.packagecloud.io/eng/2016/06/22/monitoring-tuning-linux-networking-stack-receiving-data/)，解释了如何监控和调整每个组件。在这里总结为一个简洁的答案有点困难，因为需要监控和调整的组件太多了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T15:36:06.887

除了从套接字读取循环中明显删除所有不必要的内容之外：

*   增加套接字接收缓冲区[`setsockopt(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/getsockopt.2.html)，
*   如果您的内核支持，请使用[`recvmmsg(2)`](http://man7.org/linux/man-pages/man2/recvmmsg.2.html)来减少系统调用和内核用户态副本的数量，
*   考虑边缘触发的非阻塞方法[`epoll(7)`](http://www.kernel.org/doc/man-pages/online/pages/man4/epoll.4.html)，
*   看看你是否真的需要线程，锁定/同步非常昂贵。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-03-01T09:35:12.050

“在客户端，一个线程读取套接字并将数据放入队列中。”我猜问题出在这个线程上。它接收消息的速度不够快。太多时间花在其他事情上，例如在将数据放入队列时获取互斥锁。尝试优化队列上的操作，例如使用无锁队列。

# sencha-touch - 如何在 datepickerfield 上验证生日？

> ID：10899938
> 
> 赞同：0
> 
> 时间：2012-06-05T15:11:14.067
> 
> 标签：sencha-touch, extjs, sencha-touch-2, sencha-architect

我需要在 datepickerfield 上验证生日，但我不知道尝试。

我有这个代码：

**日期选择器字段**

```
{
    xtype: 'datepickerfield',
    id: 'dob',
    name: 'dates',
    useClearIcon: true,
    renderData: {
        placeHolder : 'dd/mm/YYYY'
    },
    label: '*Born of birthday',
    picker: {
        doneButton: 'Select',
        cancelButton: 'Cancel',
        slotOrder: ['day', 'month', 'year'],
        yearFrom: 1925,
        yearTo: 2012,
        hideOnMaskTap: true,
    }
} 
```

和我一样的验证

```
if(Ext.getCmp('dob').getValue().format('d/m/Y') < new Date().format('d/m/Y')) {
    Ext.Msg.alert('Adult')
} else {
    Ext.Msg.alert('Minor')
} 
```

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T17:07:38.423

将此侦听器添加到您的`datepickerfield`对象：

```
listeners:{
  change:function(picker, birthDate){
    var today = new Date(),
        age = today.getFullYear() - birthDate.getFullYear(),
        m = today.getMonth() - birthDate.getMonth();
    if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {
        age--;
    }
    if(age >= 18){
      console.log('Adult');
    }
    else{
      console.log('Minor');
    }
  }
} 
```

希望这可以帮助

# wpf - 将绑定数据传递给 DataGrid 中的用户控件

> ID：10899939
> 
> 赞同：2
> 
> 时间：2012-06-05T15:11:15.647
> 
> 标签：wpf, binding, datagrid, datacontext

我已经设置了一个绑定到 ObservableCollection 的数据网格。此网格中的一列由用户控件填充，该控件需要从父数据网格绑定到的 ObservableCollection 中获取数据。是否可以绑定子用户控件以使用 ObervableCollection 中的数据？我使用的 XAML 是：

```
<Window x:Class="Hotspots_Control.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:Hotspots_Control"
    Title="MainWindow" Height="350" Width="525">
<Window.DataContext>
    <local:viewModel/>
</Window.DataContext>
<DataGrid ItemsSource="{Binding areaList}" Name="hotspotsGrid" AutoGenerateColumns="False" CanUserAddRows="False">
    <DataGrid.Columns>
        <DataGridTextColumn Header="Area" Binding="{Binding Path=area}" IsReadOnly="True"/>
        <DataGridTemplateColumn Header="Alarms">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <local:AlarmView/>
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
    </DataGrid.Columns>
</DataGrid> 
```

网格绑定到“viewModel”对象内的“areaList”。我需要让 AlarmView 用户控件能够访问 ObservableCollection 中的每个对象。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T15:40:32.393

使用该`DataContext`属性设置绑定对象：

```
<DataTemplate>
  <local:AlarmView DataContext="{Binding}"/>
</DataTemplate> 
```

由于 DataTemplate 已经绑定到`areaList`，您可以使用直接绑定设置 DataContext。从这里，子视图将可以访问`areaList`对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T15:30:18.727

我会将列表传递给实体 vm 的构造函数，然后您可以从那里访问它，因为您可以将它存储在私有成员中。

也许还有另一种可能更适合的解决方案，但为此我没有足够的关于该问题的详细信息。

# matlab - matlab显示图形并更新uicontrol的文本

> ID：10899940
> 
> 赞同：0
> 
> 时间：2012-06-05T15:11:16.213
> 
> 标签：matlab, figure, matlab-figure

**6小时后，我解决了我的问题！:]**

> `this was my question:`

请帮助我：调用函数'GUI_400'时如何显示图形？

另外，我希望'S.ty'的文本被1到100之间的数字更新。为了做到这一点，我调用了'test'函数并更新了s.ty的uicontrol。

换句话说，显示该图并仅用“1”的数量更新“S.ty”的文本，然后以“2”的数量......直到100。

在我的代码中，该图在“测试”函数结束时显示，这就是为什么该图将仅显示数字“100”的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T11:38:33.563

```
function [] = GUI_400()

    hFig = figure('units','pixels',...
        'position',[300 300 424 430],...
        'menubar','none',...
        'name','GUI_3',...
        'numbertitle','off',...
        'resize','off');        

        Im = imread('0.png');
        hAxes = axes('Parent',hFig,'Units','pixels','Position',[0 72 424 359]);  %#   so the position is easy to define
        image(Im,'Parent',hAxes);  %# Plot the image
        set(hAxes,'Visible','off', 'handlevisibility', 'off');          %# Turn the axes visibility off

        S.tx = uicontrol('style','text',...
         'unit','pix',...
         'position',[0 32 424 40],...
         'string','מכין תמונה 1 מתוך 3',...
         'backgroundcolor','r',...
         'fontsize',23);
        mystr = 'alon';
         temp = uicontrol('style','text',...
         'unit','pix',...
         'position',[0 0 424 40],...
         'string',mystr,...
         'backgroundcolor','r',...
         'fontsize',23);

   for i = 1:1000
        set(temp,'string',num2str(i));
       drawnow;
   end
end 
```

# c# - C#中访问Web服务的标准

> ID：10899942
> 
> 赞同：1
> 
> 时间：2012-06-05T15:11:26.210
> 
> 标签：c#, wcf, web-services

我想知道一种在 C# 中访问 web 服务的标准方法，其中可以以编程方式定义 web 服务引用。

我有以下情况：

1.  可以以编程方式设置多个 Web 服务。因此我不能使用 Visual Studio 提供的“添加 Web 服务参考”（或者如果我错了，我想纠正我）。
2.  添加的 Web 服务具有相同的结构/操作/操作/请求/响应，但可能属于提供不同数据的不同域。

例如：

```
 webservice 01 :  http://abc.example.com/getData
  webservice 02 :  http://xyz.example.net/getData 
```

1.  我是否仍然可以使用从一项服务生成的代理并将其用于另一项服务，还是必须处理原始 XML 响应？

编辑 01：我想知道以下访问 web 服务的片段是否可以概括为用于所有 web 服务

```
 var binding = new BasicHttpBinding();
        var address = new EndpointAddress("http://www.abc.com/service.asmx");
        var factory = new ChannelFactory<IGeneralProxy>(binding, address);

        var obj = factory.CreateChannel();
        var responseString = obj.GetData("UserName", "Password");
        Assert.IsNotNull(responseString); 
```

`IGeneralProxy`客户端的接口在哪里

如果上述任何一点不清楚，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T15:21:39.127

是的，只要服务相同，您就可以为这两个服务使用相同的生成代理。我一直都这样做。

这是我的代码的片段。我使用 WSE 3.0，因为我正在处理的项目是 .net 2.0。

```
ServiceWse serivce = new ServiceWse();
CookieContainer cookieContainer = new CookieContainer();
serivce.Timeout = 1000 * 60 * CommonFunctions.GetConfigValue<int>(Consts.Common.WebServiceTimeout, 20);
serivce.Url = CommonFunctions.GetConfigValue(Consts.Urls.MyServiceSecuredURL, string.Empty);
serivce.CookieContainer = cookieContainer;
if (CommonFunctions.GetConfigValue(Consts.Security.UseSecuredServices, false))
    CommonFunctions.SetWSSecurity(_service.RequestSoapContext); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T15:17:51.353

查看之前对类似问题的回答：

[如何以编程方式将客户端连接到 WCF 服务？](https://stackoverflow.com/questions/2943148/how-to-programmatically-connect-a-client-to-a-wcf-service)

您可以为每个 Web 服务执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T15:18:01.773

我们做类似的事情。Web 服务引用是针对我们服务的开发版本创建的。我们还在 web.config 中为每个 Web 服务 URI 设置了一个设置，我们在实例化服务时使用该设置；这样，当我们部署到生产环境时，我们所要做的就是更改 web.config 中的 URI，而不是重新构建项目。

```
var myService= new myService(){Uri = [service uri from web.config]}; 
```

# jquery - 仅显示一个元素，该元素属于一个被许多元素使用的类

> ID：10899947
> 
> 赞同：0
> 
> 时间：2012-06-05T15:11:40.617
> 
> 标签：jquery, css

无法仅显示最接近用户悬停的类别的子菜单。当用户将鼠标悬停在任何类别上时，所有子菜单都会出现。

jQuery

```
<script type="text/javascript">
    $(document).ready(function(){
        $(".category").hover(function(){
            $(".submenu").show();
        });
    });

</script> 
```

HTML

```
<div id="sidebar">
    <ul style="list-style-type:none;">
        <li><a class="category" href="#">Cars </a>
            <ul class="submenu" style="position:absolute; display:none;">
                <li><a href="#">Ford</a></li>
                <li><a href="#">Chevy</a></li>
                <li><a href="#">VW</a></li>  
            </ul>      
        </li>   
        <li><a class="category" href="#">Food </a>
            <ul class="submenu" style="position:absolute; display:none;">      
                <li>Fruits</li>      
                <li>Burgers</li>         
                <li>Veggies</li>     
            </ul> 
        </li>
    </ul> 

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T15:16:09.217

`$(".submenu").show();`将找到与选择器匹配的所有元素。您需要找到与 CLICKED 项相关的元素，该元素将是`$(this)`.

尝试：

```
 $(".category").hover(function(){
      $(this).next('ul').show();
 }); 
```

或者

```
 $(".category").hover(function(){
      $(this).next('.submenu').show();
 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T15:16:51.453

close() 查找 html 树，您想使用 find() 查看悬停的元素内部，但您还想使用 hover() 的第二个回调再次隐藏它

编辑似乎您从代码中删除了最接近（）

```
$(".category").hover(function(){
        $(this).find(".submenu").show();
    },function(){
        $(this).find(".submenu").hide();
    } ); 
```

# jquery - jquery 显示/隐藏多个 div 切换

> ID：10899950
> 
> 赞同：0
> 
> 时间：2012-06-05T15:11:42.410
> 
> 标签：jquery, toggle, show-hide

首先感谢您抽出宝贵时间帮助我解决这个问题。

对不起我的英语不好 ;-）

好吧，我给您一个指向我的项目的链接，这样会更容易理解我的问题

[http://lix.in/-c20b94](http://lix.in/-c20b94)

正如您在右侧看到的，您有社交面板。

我想用 jquery 为每个面板打开一个面板（最后一个提要）。在这里阅读了一些帖子后，我能够使其正常工作（我不太擅长 jquery）。但我还是有问题。

正如您在单击另一个按钮（facebook、youtube...）时会注意到的那样，面板会关闭/打开等。但按钮本身仍处于活动位置。它不会回到他的正常位置。我认为这是由于切换问题

代码：

```
$(".link1").click(function(){
    $("#twittercontent, #youtubehome").hide();
    $("#pz_fbplugin").toggle("fast");
    $(this).toggleClass("active");
    return false;
    $(".link2, .link3").removeClass('active');
    $(".link1").addClass("active");
});

$(".link2").click(function(){
    $("#pz_fbplugin, #youtubehome").hide();
    $("#twittercontent").toggle("fast");
    $(this).toggleClass("active");
        return false;
    $(".link1, .link3").removeClass("active");
    $(".link2").addClass("active");
});

$(".link3").click(function(){
    $("#pz_fbplugin, #twittercontent").hide();
    $("#youtubehome").toggle("fast");
    $(this).toggleClass("active");
    return false;
    $(".link1, .link2").removeClass("active");
    $(".link3").addClass("active");
}); 
```

CSS：

```
a.facebook {width: 46px;position: fixed; right:0;  height: 130px; top: 175px; margin-right: 0; background: url("socialrudyfacebook.png")no-repeat; z-index:51}
a.facebook:hover{width: 129px}
a.active.facebook{width: 129px}

a.twitter{width: 46px; position: fixed; height: 130px;right: 0; top: 317px; margin-right: 0;z-index: 51;background: url("socialrudytwitter.png")no-repeat; a-index:51}
a.twitter:hover{ width: 129px}
a.active.twitter{ width: 129px}

a.youtube{width: 46px;position: fixed; height: 130px; right: 0; top: 457px ;z-index: 150; background: url("socialrudyyoutube")no-repeat; a-index:51}
a.youtube:hover{ width: 129px}
a.active.youtube{ width: 129px} 
```

希望你能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T15:18:45.327

当您`return false`不执行其余代码时。远程它，它会工作，或者只是为了让事情变得简单，请执行以下操作。

为每个链接添加相同的类。比如“标签”。

然后在每个 .click 上，您只需调用即可。

```
$('.tab').removeClass("active"); 
```

当您单击一个选项卡时，您将确保其余部分恢复到原始状态。

```
if ($(this).hasClass('active'))
    $(this).removeClass('active'); 
```

将该行添加到每个 .click 中，它应该可以工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T15:20:26.490

我认为你的问题是`return false`. 如果您将其删除或向下移动，它应该可以工作。除了 return 您还可以使用：

```
$(".link3").click(function(e){
    e.preventDefault();
    // your function and stuff
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T15:21:00.020

移动`return false`到函数的末尾。这是必须帮助的。

# php - 确定会话的替代方案以保持用户登录

> ID：10899952
> 
> 赞同：0
> 
> 时间：2012-06-05T15:11:52.267
> 
> 标签：php, session-cookies

我正在用 PHP 做一个练习项目（创建一个论坛），并尝试决定一种保持用户登录的机制。我创建了一个用户类，通过它对用户进行身份验证（登录时）和所有未来的用户帐户相关操作将通过该类进行（即用户相关信息检索，当用户发表/评论时等）。

为了让用户保持登录状态，最简单的方法似乎是使用会话并将用户对象存储在会话中（不是 cookie，因为这会带来安全风险），但是在做了一些研究之后，我发现会话可以加载到系统上，特别是在其中保存大量数据的情况下。

在试图找出解决方案后，我想出了两种选择：

1.  会话中只放用户ID，每次都通过用户ID重新制作用户对象。然而，这似乎是一个糟糕的实现，因为每次都必须重新查询数据库。

2.  将用户ID保存在会话中（一旦用户成功登录），并将整个对象保存在cookie中，每次使用cookie之前，通过将会话中的用户ID与用户ID匹配来验证cookie曲奇饼。我不太确定 cookie 是如何工作的，但由于一些关键的用户信息可能存储在用户对象中（因此是 cookie），这里是否存在某种安全风险？饼干会被偷吗？

还有其他更好的选择吗？无论是使用会话或cookie的不同方式，还是使用与会话和cookie完全不同的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T15:18:32.763

我会去：

> 1.  会话中只放用户ID，每次都通过用户ID重新制作用户对象。然而，这似乎是一个糟糕的实现，因为每次都必须重新查询数据库。

并打开[MySQL 查询缓存](http://www.howtogeek.com/howto/programming/speed-up-your-web-site-with-mysql-query-caching/)，这将使您的*频繁*查询更快。如果您的数据很大，我不建议您这样做`$_SESSION`（但这些数据实际上有多大？）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T15:23:41.737

一开始你应该忘记2.选项。将关键数据保存在 cookie 中是非常危险的。

第一个选项要好得多。您需要选择：$_SESSION 或数据库中的数据。如果它是大对象，您可以将它们序列化并发送到数据库中的 blob 字段。或者另一个想法：将序列化的数据保存在文件中，这样就可以避免额外的查询。但是当然还有另一个问题：很多IO文件操作。

考虑一下，测试一些选项，然后您应该能够为您选择最佳选项。

# windows-phone-7 - 键盘在表单中自动弹出

> ID：10899958
> 
> 赞同：1
> 
> 时间：2012-06-05T15:12:14.633
> 
> 标签：windows-phone-7

当用户转到带有文本框的某个表单页面时，如何在第一个文本框中自动弹出键盘？

我想以与在 People's Hub 中添加新联系人时相同的方式工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T15:21:57.663

在页面加载到文本框后设置页面的焦点应该弹出键盘。当前的 WP7 API 无法手动调出键盘。

[在加载 Windows Phone 7 应用程序时将焦点设置到文本框](https://stackoverflow.com/questions/4513222/setting-focus-to-a-textbox-on-load-of-windows-phone-7-app)

# gnu-make - 当该目录为./时，如何使用vpath将文件复制到不同的目录中修复gnu make规则？

> ID：10899960
> 
> 赞同：0
> 
> 时间：2012-06-05T15:12:24.633
> 
> 标签：gnu-make

根据 Beta 在[gnu make copy many files to a single location](https://stackoverflow.com/questions/3302546/gnu-make-copy-many-files-to-a-single-location)中的回答，我有一个工作规则，可以将不同路径中的图形复制到构建目录中的 ./figures/ 子目录中

```
ORIG_FILE_DIRS += ..
LOCAL_FILES += figures/myfig.png
DESTDIR := figures

all : $(LOCAL_FILES)

vpath %.png $(ORIG_FILE_DIRS)

$(DESTDIR)/%.png: %.png
  mkdir -p $(DESTDIR)
  cp $< $@ 
```

如果数字不是 ./，这很好用——例如，修改它以尝试从备用路径复制乳胶 .sty 文件（我需要在当前工作目录中），我试过：

```
ORIG_FILE_DIRS += ..
LOCAL_FILES += mycommon.sty
DESTDIR := ./

all : $(LOCAL_FILES)

vpath %.sty $(ORIG_FILE_DIRS)

$(filter %.sty,$(LOCAL_FILES)) : $(DESTDIR)/%.sty: %.sty
  mkdir -p $(DESTDIR)
  cp $< $@ 
```

（过滤器试图明确，因为我在 ./ 中有一些其他 .sty 文件）

这给了我

```
make: Circular mycommon.sty <- mycommon.sty dependency dropped.
make: Nothing to be done for `all'. 
```

我不确定如何解决这个问题。我尝试了依赖项的显式路径：

```
$(filter %.sty,$(LOCAL_FILES)) : $(DESTDIR)/%.sty: ../%.sty
  mkdir -p $(DESTDIR)
  cp $< $@ 
```

但这样做仍然会产生循环依赖（对于../mycommon.sty）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T23:52:06.967

我可以重命名原件：给它们一个不同的后缀，并使用一个普通的旧后缀规则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T14:31:25.143

我对另一个问题的回答有点骇人听闻，这个也是。

有几种方法可以做到这一点，没有一个是完美的。可能最不难看的是使用临时目录：

```
ORIG_FILE_DIRS += ...
DESTDIR := figures
TEMPDIR := tempdir
TEMP_FILES += $(TEMPDIR)/fig1.png

all : $(TEMP_FILES)
        mv $^ $(DESTDIR)

vpath %.png $(ORIG_FILE_DIRS)

$(TEMPDIR)/%.png: %.png
        mkdir -p $(TEMPDIR)
        cp $< $@ 
```

移动文件比复制文件快得多（O(1)），因此速度不会受到影响。只是不要做任何愚蠢的事情，比如将`tempdir`其用作您的目的地。

# ruby-on-rails - 如何在 ruby on rails 中正确渲染特殊字符？

> ID：10899963
> 
> 赞同：1
> 
> 时间：2012-06-05T15:12:30.853
> 
> 标签：ruby-on-rails, ruby

我从 DB 中得到像 â€™ â€¦ â€“ â€œ â€ â€˜ 这样的字符。我从中获取的表是 latin1 字符集。我需要正确显示这些字符。如何在 Ruby on rails 中做到这一点？是否有一个函数或一段代码可以用正确的字符替换这些字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T15:32:43.837

您可能需要设置数据库字符串的编码。尝试以下`encode`方法`String`：

```
dbstr.encode("iso-8859-1") 
```

如果 ISO 8859 1 不适合您，还有很多其他编码。如果用户浏览器不支持正确的编码，您可以传递一些选项`encode`来让它用`?`s 替换未知数等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-11T12:08:00.457

我已经尝试了所有编码，直到找到正确的编码

```
text.encode('windows-1250').force_encoding("UTF-8")
text.encode('utf-7').force_encoding("UTF-8")
text.encode('ibm852').force_encoding("UTF-8")
text.encode('shift_jis').force_encoding("UTF-8")
text.encode('iso-2022-jp').force_encoding("UTF-8")
text.encode("Windows-1252").force_encoding("UTF-8")
text.encode("latin1").force_encoding("UTF-8")
text.encode("ISO-8859-1").force_encoding("UTF-8")
text.encode("ISO-8859-2").force_encoding("UTF-8")
text.encode("ISO-8859-3").force_encoding("UTF-8")
text.encode("ISO-8859-4").force_encoding("UTF-8")
text.encode("ISO-8859-5").force_encoding("UTF-8")
text.encode("ISO-8859-6").force_encoding("UTF-8")
text.encode("ISO-8859-7").force_encoding("UTF-8")
text.encode("ISO-8859-8").force_encoding("UTF-8")
text.encode("ISO-8859-9").force_encoding("UTF-8")
text.encode("ISO-8859-10").force_encoding("UTF-8")
text.encode("ISO-8859-11").force_encoding("UTF-8")
text.encode("ISO-8859-12").force_encoding("UTF-8")
text.encode("ISO-8859-13").force_encoding("UTF-8")
text.encode("ISO-8859-14").force_encoding("UTF-8")
text.encode("ISO-8859-15").force_encoding("UTF-8") 
```

然后我创建了无效字符的映射并使用脚本替换它们（灵感来自[https://markmcb.com/2011/11/07/replacing-with-utf-8-characters-in-ruby-on-rails/](https://markmcb.com/2011/11/07/replacing-with-utf-8-characters-in-ruby-on-rails/)）

```
def fix(text)
  replacements = [
    ['â€“',           "—"],
    ["â€”",           "–"],
    ["â€˜",           "‘"],
    ['â€¦',           '…'],
    ['â€™',           '’'],
    ['â€œ',           '“'],
    [/â€[[:cntrl:]]/, '”'],
    ['â€?',           '”'],
    ['â€ť',           '”'],
    ['â€ś',           '“'],
    ['â€¨',           '—'], # not sure about this one
    ['â€ł',           '″'],
    ['â€Ž',           ''], # emtpy str
    ['â€‚',           ''], # emtpy str
    ['â€‰',           ''], # emtpy str
    ['â€‹',           ''], # emtpy str
    ['â€',           ''], # emtpy str
    ["â€s'",           ''], # emtpy str
  ]

  new_text = text
  replacements.each { |set| new_text = new_text.gsub(set[0], set[1]) }
  new_text
end

# rails automatically will check if publication was changed and won't save if it wasn't changed
Publication.where('content like ?', "%â€%").find_each do |publication|
  publication.title         = fix(publication.title)
  publication.content       = fix(publication.content)
  publication.short_content = fix(publication.short_content)
  publication.save!
end 
```

直到`Publication.where('content like ?', "%â€%").count`等于 0

# html - 重新流式传输 h.246 视频

> ID：10899965
> 
> 赞同：0
> 
> 时间：2012-06-05T15:12:33.810
> 
> 标签：html, video-streaming, html5-video, vlc

我有一个来自网络摄像头的视频，它通过网络传输 h.264 视频（根据 Wireshark，它在端口 9000 上使用 tcp）。

我试过在 VLC 播放器中打开它，但没有成功。也许我使用了错误的命令，或者 VLC 无法读取原始 h.264？

我该如何将原始 h.264 重新流式传输到...让我们说 mp4？

我看到有人提到使用 VLC（服务器）来转换它，但我找不到合适的文档。我认为它类似于

```
vlc -vvv tcp://my_ip:9000 --sout '#transcode{vcodec=h264,vb=100}:standard{access=http,mux=ts{use-key-frames},dst=:9090}' 
```

任何帮助将不胜感激。甚至是指向正确文档的链接...最终，我希望通过 html5 视频标签可以查看重新流式传输的视频。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T23:30:37.033

大多数 IP 摄像机使用 rtsp 来启动 mpeg 流。您需要所需流的完整 url。这都应该记录在相机制造商的网站上。您需要的信息通常位于开发人员部分。

例如，对于 Axis 207，它是：rtsp://192.168.1.1/mpeg4/media.amp

# perl - 在 perl 中，如何遍历文件、解析行然后比较行中的值？

> ID：10899966
> 
> 赞同：-1
> 
> 时间：2012-06-05T15:12:35.357
> 
> 标签：perl, parsing

我对 perl 非常陌生，并试图弄清楚如何解析制表符分隔文件中的行并将解析行中的值与某个值进行比较，然后打印该行。

例如：我想打印出所有数字都大于 3 的所有行。

> 5.4 6.9 3.1
> 
> B 10.2 3.4 7.6
> 
> C 1.9 2.6 2.3

我会输出

> 5.4 6.9 3.1
> 
> B 10.2 3.4 7.6

提前致谢

编辑：对不起，我的解释不清楚，测试用例也不好。我会找到所有数字都大于 3 的行。

例如：如果我将 A 行的 5.4 更改为 2.4，我不希望代码打印此行，因为它包含小于 3 的数字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T15:31:09.833

下面的程序将为您执行此操作。它通过从`DATA`文件句柄中读取数据来工作，以便将数据合并到程序本身中。要从其他地方读取数据，您将不得不`open`读取源并从该文件句柄中读取。

每行都被读入`$_`系统变量并划分为字段`split`，默认情况下，使用这些字段`$_`在空格上拆分。字段被放入数组`@data`中。

该`grep`函数返回通过给定测试的列表元素的数量。切片`@data[1..$#data]`是`@data`除第一个元素之外的所有数组（因为数组索引从零开始）。

如果大于 3 的元素计数不为零，则调用`print`打印。`$_`

```
use strict;
use warnings;

while (<DATA>) {
  my @data = split;
  print if grep $_ > 3, @data[1..$#data];
}

__DATA__
A 5.4 6.9 3.1

B 10.2 3.4 7.6

C 1.9 2.6 2.3 
```

**输出**

```
A 5.4 6.9 3.1
B 10.2 3.4 7.6 
```

# ruby-on-rails - 如何干燥两个不同类中使用的范围方法？

> ID：10899972
> 
> 赞同：5
> 
> 时间：2012-06-05T15:12:53.193
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, refactoring, dry

我正在使用 Ruby on Rails 3.2.2，我想通过“指定”/“过滤”这些关联对象的属性值来检索/限定关联对象。也就是说，此时我正在使用以下代码：

```
class Article < ActiveRecord::Base
  def self.search_by_title(search)
    where('articles.title LIKE ?', "%#{search}%")
  end
end

class ArticleAssociation < ActiveRecord::Base
  def self.search_by_article_title(search)
    joins(:article).where('articles.title LIKE ?', "%#{search}%")
  end
end 
```

在上面的代码中，`where('articles.title LIKE ?', "%#{search}%")`子句重复了两次，所以我认为可以通过 DRY 原则对其进行改进：*是否可以* `Article.search_by_title` *直接在方法中使用该* `ArticleAssociation.search_by_article_title` *方法？*

* * *

典型的用例是：

*   `ArticleAssociation.search_by_article_title("Sample string")`
*   `Article.search_by_title("Sample string")`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T15:27:03.620

除非您完全更改代码结构，否则不会。

您可以使用 lambdas 进行一些黑客攻击，但这将是比您正在干燥的代码更多的代码。有好的重构之类的东西，也有坏的重构之类的东西。除非在 2 个或更多地方使用了一段*非常*复杂或很长的代码，否则您可以担心重构。代码约定很重要，但是对于像这样的微小的单一方法调用的事情，它是一种浪费，并且可能会使您的代码更加神秘。

不过，我知道当人们不回答您的问题时会很烦人，所以在这里：

```
class Article < ActiveRecord::Base
  SEARCH_BY_TITLE=lambda {|obj, search| obj.where('articles.title LIKE ?', "%#{search}%")}
  def self.search_by_title(search)
    SEARCH_BY_TITLE.call(self, search)
  end
end

class ArticleAssociation < ActiveRecord::Base
  def self.search_by_article_title(search)
    Article::SEARCH_BY_TITLE.call(joins(:article),search)
  end
end 
```

这只是使 lambda 作为`where`对指定对象执行调用的常量。这两种方法都只是包装了那个 lambda。

注意：尽管这可能被认为更优雅，但它会大大降低性能，因为 lambda、闭包和额外调用在像 Ruby 这样的动态语言中是昂贵的。但我认为这对你来说不是问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T15:53:09.230

根据 OP 请求，我发布了我为使用模块的 3 模块搜索编写的代码：

```
module Listable
  extend ActiveSupport::Concern

  module ClassMethods
    # Search a listable module search in properties (or related) tables
    def search_from_properties(string)
      return where({}) if string.blank?
      associations = self.reflect_on_all_associations.map(&:name) &
        [:property, :properties, :supplier, :suppliers, :address]
      s = "%#{string}%"
      associations.inject(self, :includes).where(
        ((Address[:base] =~ s) | (Address[:city] =~ s)) |
        ((Property[:owner] =~ s) | (Property[:cif] =~ s)) | 
        ((Supplier[:cups] =~ s) | (Supplier[:contract] =~ s))
      )
    end
  end
end 
```

现在只需将此模块包含在相关类中：

```
class Property < ActiveRecord::Base
  include Listable
end 
```

注意：所有模型都定义了关联以到达其他模型（这就是`joins`工作的原因）。此外，它[在 AR 上使用此包装器](https://gist.github.com/1333253)。

# iphone - 在扫描时更改 Zxing 帧的颜色

> ID：10899973
> 
> 赞同：0
> 
> 时间：2012-06-05T15:12:56.480
> 
> 标签：iphone, objective-c, zxing

我正在使用 ZXing 开发 QR 码扫描仪，想知道是否有办法在成功扫描后更改框架的颜色轮廓，就像应用商店中的 Scan App 一样。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T18:28:53.447

当然，这是可能的，但需要定制/努力。颜色是硬编码的`OverlayView.m`。你需要让它不被硬编码，然后告诉覆盖视图在适当的时候重绘自己。

或者/FWIW，我所做的是“闪烁”屏幕：我添加一个全屏白色视图，然后将其淡出，有点像相机上的闪光灯。这不需要与较低级别的代码进行任何交互，并且就我个人而言，我更喜欢这种效果，至少在我的上下文中是这样。

# macos - 获取 iTunes'/Finder 的默认专辑封面图片

> ID：10899975
> 
> 赞同：4
> 
> 时间：2012-06-05T15:13:04.110
> 
> 标签：macos, cocoa, icons, itunes, scripting-bridge

我的应用程序的部分功能是它获取当前正在播放的 iTunes 曲目的专辑封面（使用 Scripting Bridge）。我能够很好地做到这一点。但是，当没有播放曲目时，我想获得 iTunes 和 Finder 都具有的默认专辑封面。这可能来自代码吗？（或者如果没有，还有什么办法？）

![带有蓝灰色音符的暗方块](../Images/573afefdda86cda46d37e828ea6fbaae.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T18:23:19.030

我不确定 iTunes 从哪里获得它，但我相信 Finder 是通过向 QuickLook 询问文件的缩略图间接获得的。

所以，正确的答案可能是做同样的事情。不是手动获取专辑封面，也不是在失败时作为后备，而是获取并显示 QuickLook 缩略图。

但是，如果您想要快速而肮脏的东西，您可以随时从 QuickLook.framework 包中读取名为“png”类型的名为“Generic Artwork 512”的资源。为了防止苹果在未来移动东西，你可以确保加载了 QuickLook，然后在任何打开的包中查找资源，但你仍然需要仔细观察每个新的操作系统版本。

您也可以绘制自己的非常相似的图像——这并不是真正的 UI 组件，因此你不会通过绘制非标准的 UI 组件来混淆用户——但这看起来并不理想。当然，您可能希望图像足够简单和通用，以便您可以合法地将其复制到您自己的应用程序中，但前提是您有优秀的律师向您保证这并不像听起来那样愚蠢。

# perl - 当 perl 中的键相同时连接哈希值

> ID：10899977
> 
> 赞同：2
> 
> 时间：2012-06-05T15:13:12.527
> 
> 标签：perl, hash

我有一个类似的哈希：

```
abc=>1
hello=>32
abc=>4
hello=>23
hello=>12
xyz=>18 
```

我们如何连接键相同的值。所以输出将是：

```
abc=>"1,4"
hello=>"23,12,32"
xyz=>"18". 
```

我尝试按键对哈希进行排序，然后检查每个键，如果它们相同，则连接值，但我不知道如何在同一个循环中比较两个键。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T15:22:40.357

确切的工作方式取决于数据的真实来源，但该程序显示了一种从`DATA`文件句柄中读取信息以构建和转储散列的方法。

散列值是匿名数组，包含对应于同一键的所有值。

```
use strict;
use warnings;

my %data;

while (<DATA>) {
  my ($k, $v) = /\w+/g;
  push @{ $data{$k} }, $v;
}

for my $k (sort keys %data) {
  printf "%s => %s\n", $k, join ',', @{ $data{$k} };
}

__DATA__
abc=>1
hello=>32
abc=>4
hello=>23
hello=>12
xyz=>18 
```

**输出**

```
abc => 1,4
hello => 32,23,12
xyz => 18 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T15:21:46.373

如果它是您正在谈论的带有键值对的列表，那么您可以执行以下操作：

```
my @kv = (
    abc=>1,
    hello=>32,
    abc=>4,
    hello=>23,
    hello=>12,
    xyz=>18,
);

my %hash;

while(@kv){
    my $k = shift @kv;
    my $v = shift @kv;

    $hash{$k} = defined $hash{$k} ? "$hash{$k},$v" : $v;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T15:25:43.107

```
my @pairs = (
    abc=>1,
    hello=>32,
    abc=>4,
    hello=>23,
    hello=>12,
    xyz=>18,
);

my %hash;

# collect
for(my $idx = 0; $idx < scalar @pairs; $idx += 2){
    my $key = $pairs[$idx];
    my $val = $pairs[$idx+1];
    push @{ $hash{$key} }, $val;
}

# print combined
while( my ($key, $val) = each %hash ){
    print "$key = ", join(',', @$val), "\n";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T18:23:29.173

由于不清楚您真正想要做什么，我猜您有一个需要更改的文件。在这种情况下，可能需要单线。

```
perl -lwne '
    ($k,$v) = split /=>/; 
    $data{$k} = join ",", $data{$k} // (), $v }{ 
    print "$_=>$data{$_}" for keys %data' input.txt > output.txt 
```

**输出：**

```
hello=>32,23,12
abc=>1,4
xyz=>18 
```

请注意，输出中的键与输入的顺序不同。您可以根据需要对键进行排序，但我选择不这样做。

解释：

*   `-l`将在阅读时删除行尾，并在打印时将它们放回去
*   `-n`将在程序周围放置一个`while(<>)`循环，逐行读取文件（或 STDIN）。
*   `//`是[`defined-or`运算符](http://perldoc.perl.org/perlop.html#Logical-Defined-Or)。如果 LHS 未定义，它将返回 RHS。
*   `}{`是仅适用于该选项的[爱斯基摩吻运算符。](https://stackoverflow.com/q/2897853/725418)`-n`它的作用与 END 块基本相同，它在输入的末尾执行以下代码。

# c - pthread_create 的 LD_PRELOAD 问题

> ID：10899980
> 
> 赞同：0
> 
> 时间：2012-06-05T15:13:15.460
> 
> 标签：c, linux, gcc, pthreads, ld-preload

我只是在玩弄 LD_PRELOAD 的概念。在我开始在我的代码中使用 pthread 库函数之前，它似乎工作正常。当我这样做时，我会遇到分段错误。LD_PRELOAD 是否对 pthread 库有某种反感？

这里显示的是程序和 LD_PRELOADed .so 代码。

## 程序代码

```
// main.c
#include <pthread.h>
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <sys/mman.h>
#include <sys/types.h>

#define USE_PTHREADS

#define NUM_THREADS     8

pthread_mutex_t m = PTHREAD_MUTEX_INITIALIZER;

int sum;
float total = 1;
extern int __did_libc_start_main;

void *PrintHello(void *threadid)
{
   long tid;
   tid = (long)threadid;
   pthread_mutex_lock( &m );
   sum++;
   total *= total + tid * 0.097891313423578;
   printf( "p%d, tid%d, total = %g, start = %d!\n", getpid(), tid, 
      total, 0 );
   pthread_mutex_unlock( &m );
   printf("Hello World! It's me, thread #%ld!\n", tid);
   pthread_exit(NULL);
}

int main (int argc, char *argv[])
{
   pthread_t threads[NUM_THREADS];
   int rc;
   long t;
   char * p;
   char * m;

   fork();

   p = (char*)mmap(0, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, 
     -1, 0);
   p[0] = 78;
   printf( "p = %p, p[0] = %d, pid = %d!\n", p, p[0], getpid() );
   m = (char*)malloc( 80 );
   printf( "m = %p!\n", m );
#ifdef USE_PTHREADS // If we disable this part of code, LD_PRELOAD works fine
   for(t=0; t<NUM_THREADS; t++)
   {
      printf("In main: creating thread %ld\n", t);
      rc = pthread_create(&threads[t], NULL, PrintHello, (void *)t);
      if (rc){
         printf("ERROR; return code from pthread_create() is %d\n", rc);
         exit(-1);
      }
   }
   for(t=0; t<NUM_THREADS; t++)
    pthread_join(threads[t], NULL);

   printf( "\n\nTotal = %g\n\n", total );

   /* Last thing that main() should do */
   pthread_exit(NULL);
#endif
   printf( "\n\n%d: Done without major problems\n\n", getpid() );
   return 0;
} 
```

## LD_PRELOADed .so 代码

```
// prelib.c
#define _GNU_SOURCE

//#include <sys/syscall.h>
//#include <sys/types.h>
#include <unistd.h>
#include <stdio.h>
#include <dlfcn.h>

typedef pid_t (*getpidType)(void);
typedef void* (*mmapType)(void *addr, size_t len, int prot, int flags,
       int fildes, off_t off);

pid_t getpid(void)
{
    static int first_time = 1;
    static getpidType f;

    printf("Hello, getpid!\n");

    if ( first_time )
    {
        f = (getpidType)dlsym(RTLD_NEXT, "getpid");
        first_time = 0;
    }

    return f();
}
void *mmap(void *addr, size_t len, int prot, int flags,
       int fildes, off_t off)
{
    static int first_time = 1;
    static mmapType f;

    printf( "My mmap!\n" );
    if ( first_time )
    {
        f = (mmapType)dlsym(RTLD_NEXT, "mmap" );
        first_time = 0;
    }

    return f( addr, len, prot, flags, fildes, off );
} 
```

定义 USE_PTHREADS 时出现这样的错误。

```
My mmap!
<< mutex_trylock >>
<< mutex_unlock >>
Hello, getpid!
p = 0x2ab9bc969000, p[0] = 78, pid = 9763!
m = 0x179d4010!
In main: creating thread 0
My mmap!
<< mutex_trylock >>
My mmap!
<< mutex_trylock >>
<< mutex_unlock >>
Hello, getpid!
p = 0x2ab9bc969000, p[0] = 78, pid = 9762!
m = 0x179d4010!
In main: creating thread 0
My mmap!
<< mutex_trylock >>
Segmentation fault 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T15:22:03.973

我怀疑这是你唯一的问题，但你的“first_time”黑客没有同步，因此不是线程安全的。您应该`pthread_once`为此目的使用该功能，或者使用互斥锁或信号量滚动您自己的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T17:21:58.180

我唯一能想象的是：

printf("p%d, tid%d, total = %g, start = %d!\n", getpid(), tid, total, 0);

应该是 tid% **ld**

也许您在 64 位上运行并且 long 不是 int 大小的。因此，当它打印浮点数时，它会看到废话，并且您正在崩溃 printf。

# asp.net - Obout 免费版和付费版的区别

> ID：10899982
> 
> 赞同：0
> 
> 时间：2012-06-05T15:13:18.487
> 
> 标签：asp.net, obout

我是asp.net的新手！. 任何人都可以告诉我 obout 付费套件和免费套件之间的确切区别是什么。我的意思是，如果我购买它，是否有任何额外的功能，或者它与免费版本相同，只是添加了支持......提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T10:52:11.783

Obout 已从免费版本中删除过期。他们在某些控件上实施了一些限制。例如，Grid 在免费版本中只能处理 100 条记录。

更多信息： [http ://www.obout.com/inc/ultimate.aspx](http://www.obout.com/inc/ultimate.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T09:25:19.097

我最近查询，发现obout.com提供的试用版从下载之日起的有效期为90天......之后所有控件停止工作，需要购买整个套件......这仅仅意味着根据他们的高要求它是免费的，它只是不是......

# python - Python套接字服务器：监听多个客户端

> ID：10899990
> 
> 赞同：-2
> 
> 时间：2012-06-05T15:13:43.437
> 
> 标签：python, sockets

我必须收听传入的连接，但同时我必须接收来自已连接客户端的消息。但是`listen(1)`让套接字等待，所以我无法接收它们。该怎么办？（我必须在客户端发送消息后立即获取消息）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T15:17:21.507

简而言之，您有 3 个主要选择：

1.  每个客户端打开一个线程，在你之后产生`accept()`，并在这个上下文中运行一个循环，这样做`read() => .... => write()`

2.  `select()`在 for each之后运行一个在客户端上使用的主循环`accept()`，并自己处理调度。

3.  最佳选择 - 使用异步网络框架，如,`tornado`或更多来透明地处理此问题。`gevent``twisted`

# android - Android：多窗格布局上的操作栏/选项菜单的设计模式

> ID：10899999
> 
> 赞同：3
> 
> 时间：2012-06-05T15:14:12.220
> 
> 标签：android, android-activity, menu, android-fragments, tablet

来自[Android 最佳实践 API 指南：支持平板电脑和手机](http://developer.android.com/guide/practices/tablets-and-handsets.html)：

> 在某些情况下，您可能有一个 APK 可以同时支持手机和平板电脑。假设在手机上，您有一个`ListFragment`在 Activity A 中显示联系人列表的片段，然后在用户选择联系人时在`Details`新的 Activity B 中打开一个片段。`Activity`
> 
> `Fragment`现在在平板电脑上，我们可以通过将两个s 组合成一个单一的、多窗格`Activity`的 Activity A来利用额外的空间。
> 
> ![平板/手机上的片段设计](../Images/2c911c2edae8d269010c8235f4e5448c.png)

再次考虑手机上的应用程序。在活动 A 中，选项菜单可能会提供“全选”或“同步联系人”操作。长按列表中的项目可能会提供“编辑”或“删除”等选项。在活动 B 中，选项菜单也可以提供“编辑”、“删除”或“收藏”等操作。

但是，我们如何在平板电脑上整合这些选项？我们是否只是将所有选项菜单项合并到一个巨大的菜单中（1）？还是我们只是放弃 Activity B 菜单，让用户依赖长按左侧的项目（2）？另一种选择是修改详细信息片段以将一些操作添加到详细信息片段本身 (3)。

根据 Android Design 网站，Contacts 应用程序似乎使用了 1 和 3 的组合。看看[http://developer.android.com/design/patterns/multi-pane-layouts.html](http://developer.android.com/design/patterns/multi-pane-layouts.html)

那么是否有推荐的方法，还是由开发人员决定？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T15:29:36.650

它们都可以进入选项菜单（或者，更好的是，操作栏），假设在 Fragment A 的列表中始终至少有一个项目被选中。如果存在 Fragment A 的列表为空或没有选择的场景，然后故事变得有点复杂，因为 B 的操作栏项目都假定存在选择。理想情况下，您不会在选择之前将 Fragment B 加载到活动中，在这种情况下，Fragment B 的操作栏项目在它们有效之前不会出现。

话虽如此，片段 B 的布局略有不同（您的选项 #3）也是合理的。我怀疑“最喜欢”的明星切换是否值得，但是，再一次，他们没有问我...... :-)

我绝对不同意的是你的选项#2。您使用选项＃1 或＃3（或混合）多少取决于您。