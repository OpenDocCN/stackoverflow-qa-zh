# StackOverflow 问答 11035000-11035999

# javascript - 如何通过 JavaScript 查看上次修改的 HTML 日期

> ID：11035009
> 
> 赞同：1
> 
> 时间：2012-06-14T14:15:43.940
> 
> 标签：javascript, html, last-modified

全部，

我有一个 JavaScript 问题，无法显示 .html 文件的最后修改日期。我试图将最后修改的日期代码放在我的页脚中，因此我不再需要编写这些代码了。它会显示每页的最后修改日期。

我尝试了网站上的代码：

```
<html>
<head>
<title>Last Modified</title>
<meta http-equiv="Content-Type" content="text/html;
charset=iso-8859-1">
<script type="text/javascript">

function showLastModified() {
var out = document.getElementById('lastModified');
var d = new Date();
if (d.toLocaleDateString) {
out.innerHTML = d.toLocaleDateString(document.lastModified);
}
else {
out.innerHTML = document.lastModified;
}
}

window.onload = showLastModified;
</script>
</head>
<body>
Last Modified on <span id="lastModified">&nbsp;</span>
</body>
</html> 
```

但是，它仍然显示今天的日期。我认为是因为 d.toLocaleDateString，但我想不通。谁能帮我解决我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:21:10.440

[toLocaleDateString](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/toLocaleDateString)没有参数。

```
var d = new Date( document.lastModified );
console.log( d.toLocaleDateString() ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T14:27:41.877

大多数浏览器都支持 document.lastModified。但你需要在调用 toLocaleString- 之前将字符串转换为 Date 对象

```
if(document.lastModified){
    document.getElementById('lastModified').innerHTML=
    new Date(document.lastModified).toLocaleString();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-08T04:15:46.070

我刚刚尝试`document.lastModified`在本地 html/js 文件和远程代码段文件上进行验证。在我看来，行为是不同的：在本地文件上，它返回的是**系统日期和时间，而不是 html 文件最后修改的日期和时间**正如预期的那样。这是非常奇怪的行为。我是如何检查的：我已将命令插入到 js 中，然后我在运行时使用 google chrome 开发工具在调试中断/断点模式下查看了文档属性：每次我将鼠标指向 document.lastmodified 属性时它都会改变相应地随着系统时间和每秒更新一次，无需退出 html 文档，无需将其保存在其他位置并重新加载到浏览器中，无需使用任何编辑器对其进行任何其他操作。然后我停用了断点，让代码自由执行，它也返回系统时间......在远程文件上，它按预期正常工作，并返回它自己的 html 文件的最后保存日期，它不是动态的。

这种双重检查让我认为如果文件是本地文件，则无法从浏览器正确解释该命令。该命令是否以 `document.lastModified`某种方式“破坏”了本地文件？

请问其他人可以检查这种奇怪的行为吗？

## 编辑：

奇怪的行为在 Opera 上是一样的，而 firefox 在本地和在线 html 文件中都按预期工作。

```
 document.write(document.lastModified);
```

# qt - Qt QByteArrays + 16 位无符号整数

> ID：11035010
> 
> 赞同：0
> 
> 时间：2012-06-14T14:15:47.187
> 
> 标签：qt, kinect

我正在使用来自 Kinect 传感器的深度数据，这是一个 16 位无符号整数数组。为了摆脱一些杂乱无章的信息，我需要将一个像素的内容向左移动三个。我收到的结果太小而且很奇怪（例如，打印出来的数字应该是 ~400，因为它是以毫米为单位的距离，但我得到的数字是 0-30）。

```
castedBuffer = (uchar*)internalFrameArray->constData();
std::cout << (int)((unsigned short int)castedBuffer[307000]>>3) << "\n"; 
```

我很挣扎，因为我以 (uchar*) 格式（8 位）输出数据，我的理论是位移仅应用于 16 位数字的一半。

我有点失落！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T16:20:13.430

根据 Mat 的评论，`castedBuffer[307000]`是一个`unsigned char`. 如果要从 中获取 16 位值，则`castedBuffer`需要同时访问`castedBuffer[306999]`和`castedBuffer[307000]`，假设该值是大端编码的（请参阅[http://en.wikipedia.org/wiki/Endianness](http://en.wikipedia.org/wiki/Endianness)）。

这是一个大端示例，说明如何从数组中提取 16 位值（假设您需要 3 位左移）：

```
castedBuffer = reinterpret_cast<unsigned char*>(internalFrameArray->data());
unsigned short int extractedValue = static_cast<unsigned short int>(
                                       ((castedBuffer[306999] << 5) & 0xff60) |
                                        (castedBuffer[307000] >> 3)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T17:27:21.743

Qt 有一个 QDataStream 类，它可以完全满足您的要求：字节序转换和从 QByteArray 中提取任意宽度的整数。这是如何做到的：

```
#include <QtCore/QByteArray>
#include <QtCore/QDataStream>
#include <QtCore/QDebug>

void test(QByteArray internalFrameArray)
{
  QDataStream str(&internalFrameArray);
  str.setByteOrder(QDataStream::LittleEndian);
  // the above must match endianness in the Kinect data stream
  str.skipRawData(306999);
  quint16 val;
  str >> val;
  qDebug() << val>>3;  
} 
```

# ruby-on-rails-3 - 当我尝试通过 ajax 进行身份验证时，Warden 策略中的参数为空

> ID：11035011
> 
> 赞同：2
> 
> 时间：2012-06-14T14:15:49.293
> 
> 标签：ruby-on-rails-3, authentication, warden, query-parameters

我正在尝试在我的 rails 应用程序中使用 Warden 进行身份验证。如果我通过 POST 请求以常规形式使用它，它工作正常。但是当我将它移到 Backbone.js 时，我发现验证了！方法总是调用我的失败应用程序。

我在身份验证中放置了一些日志记录！方法，发现params hash为空。像那样：

```
def authenticate!
    Rails.logger.debug "Parameters inside of Warden: #{params}"
    user = User.find_by_email(params['email'])
    if user && user.authenticate(params['password'])
      success! user
    else
      fail "Invalid email #{request.params['email']} or password #{request.params['password']}!"
    end
end 
```

它生成一个空输出： Warden 内部的参数：{}

同时我可以在 env['warden'].authenticate 之前看到控制器中的参数！叫做。我只能猜测我的参数去了哪里。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T22:17:41.733

我是 Rails 的新手，所以我的解决方案可能很简单。但由于我没有找到任何与之相关的东西，它可能对某人有用。

关键是 Warden 实例化 Rack::Request 以获得对 params 哈希的访问权。而且它只支持'application/x-www-form-urlencoded'和'multipart/form-data'。 [http://rack.rubyforge.org/doc/classes/Rack/Request.html#M000275](http://rack.rubyforge.org/doc/classes/Rack/Request.html#M000275)

控制器中可能使用了不同的解析器，这就是我感到困惑的原因。最后我用外部基于机架的解析器修复了它： [https ://github.com/achiu/rack-parser](https://github.com/achiu/rack-parser)

# java - 如何使用 Jackson 将 JSONArray 和 JSONObject 与 InputStream 区分开来？

> ID：11035016
> 
> 赞同：1
> 
> 时间：2012-06-14T14:15:59.167
> 
> 标签：java, json, jackson

在我的应用程序中，我将 JSON 内容作为 InputStream。取决于我想要执行不同操作的单个 JSONObject 还是 JSONArray。

如果它是单个对象或对象数组，我如何区分，使用杰克逊？

//欢呼

解决方案：

使用 JsonNote.isArray()：

```
JsonNode rootNode = mapper.readValue(contentStream, JsonNode.class);    
List<Map<String, Object>> dataList = new ArrayList<Map<String, Object>>();

    if(rootNode.isArray()){
        // do something with the array

    } else {
        // do something else with the object
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T15:20:20.327

只需绑定为任何一个`java.lang.Object`（看看你是否有一个`List`或`Map`）；or as `JsonNode`and call `isObject()`or `isArray()`on呢？

# android - 如何为 Gridview 中的每个图像添加背景？

> ID：11035018
> 
> 赞同：0
> 
> 时间：2012-06-14T14:16:15.553
> 
> 标签：android, gridview, background, imageview

我已经创建了 Gridview。我想为 Gridview 中的选定图像设置背景图像*（如背面发光）*。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T14:52:23.040

尝试这个。

```
myGridView.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
   @Override
   public void onItemSelected(AdapterView<?> arg0, View arg1,
                    int arg2, long arg3) {
     arg1.setBackgroundDrawable(d); //or arg1.setBackgroundResource(resid);
   }
}); 
```

# c# - EF 动态投影（映射到属性值对字典）

> ID：11035020
> 
> 赞同：1
> 
> 时间：2012-06-14T14:16:18.790
> 
> 标签：c#, entity-framework, dynamic, expression-trees, projection

我正在尝试为 Entity Framework 实现动态投影，以便能够指定要返回的属性列表 ang 得到一个值字典作为结果。

```
 public static IQueryable<Dictionary<string, object>> ProjectionMap<TSource>
        (IQueryable<TSource> sourceModel, IEnumerable<string> properties) 
    {
        var itemParam = Expression.Parameter(typeof (TSource), "item");

        var addMethod = typeof (Dictionary<string, object>).GetMethod("Add");

        var elements = properties.
            Select(
                property =>
                Expression.ElementInit(addMethod, Expression.Constant(property),
                                       GetPropertyExpression<TSource>(itemParam, property))).
            ToList();

        var newDictionaryExpression =
            Expression.New(typeof (Dictionary<string, object>));

        var dictionaryInit = Expression.ListInit(newDictionaryExpression, elements);

        var projection = Expression.Lambda<Func<TSource, Dictionary<string, object>>>(dictionaryInit, itemParam);

        return sourceModel.Select(projection);
    }

    public static Expression GetPropertyExpression<T>(ParameterExpression parameter, string propertyName) 
    {
        var properties = typeof (T).GetProperties();
        var property = properties.First(p => p.Name == propertyName);
        return Expression.Property(parameter, property);
    } 
```

在运行时运行以下代码引发异常

```
var query = ProjectionMap(db.Posts, new[]{"Subject"});
            var result = query.ToList(); 
```

**NotSupportedException** 在 LINQ to Entities 中仅支持具有单个元素的列表初始值设定项。

任何想法如何修复代码或建议如何正确实现它？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T21:40:26.457

我得到了同样的错误，但可能是出于不同的原因（我没有尝试过你的代码）。希望这对我刚刚在选择之前添加了 .ToList() 的人有所帮助。我正在选择一个哈希表，我认为问题是 sql 不知道如何做到这一点，尽管我习惯于看到不同的错误。无论如何，也许尝试

```
 return sourceModel.ToList().Select(projection); 
```

因为 sourceModel 是您的 IQueryable （起初我打算在属性上建议 ToList() ，但这已经是 IEnumerable 了。

# jpa - JPA 在插入操作之前执行两次 select 语句

> ID：11035024
> 
> 赞同：-2
> 
> 时间：2012-06-14T14:16:39.257
> 
> 标签：jpa

我正在尝试保留多个实体，同时这样做会触发一些选择命令进行插入。我在插入之前说过 3 个选择命令，然后所有这些选择命令在插入操作之前又被触发一次，任何人都可以回答这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T09:36:08.163

解决了问题，这是我的解决方案，将帮助其他人

要防止在 INSERT 之前进行第二次 SELECT，请使用`Session.load()`或`EntityManager.getReference()`

```
User u = new User();
u.setUserStatusType( session.load(UserStatusType.class, new Long(id));
session.persis(u); 
```

该`session.load()`方法最初不加载任何内容，它只是为对象创建一个代理并避免对数据库的影响。

这里传入的 id 参数`session.load()`来自我之前触发的 select sql，我担心的是我再次获得了 hibernate 正在执行的相同 sql 语句，现在我停止 hibernate 框架再次使用 load 方法触发相同的 select sql现在只有一个 select 语句被触发，而不是 hibernate 自动执行的额外语句。

# java - System.out.println("abc"+3+2); 为什么输出是 abc32 而不是 abc5？

> ID：11035026
> 
> 赞同：5
> 
> 时间：2012-06-14T14:16:39.527
> 
> 标签：java, core

> **可能重复：**
> [Java 中 ParseInt 接收的 int 和 int 之间的差异](https://stackoverflow.com/questions/11008538/difference-between-int-and-int-received-by-parseint-in-java)

> System.out.println("abc"+3+2); // 输出：**abc32**
> 
> System.out.println(3+2+"abc"); //输出：**5abc**

是什么原因 ？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-14T14:19:28.270

```
"abc"+3 
```

将 3 转换为字符串

```
"abc3" 
```

然后

```
"abc3" + 2 
```

也将 2 转换为字符串

```
"abc32" 
```

要获得数字结果，请执行

```
"abc" + (3 + 2) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-14T14:18:50.240

因为您编写的“+”运算符表示“字符串连接”，而不是“添加”，因为左上下文是字符串值。在这种情况下，您可以通过隐式 ToString 获得对正确值的自由强制。

你可能会通过写作得到你想要的

```
System.out.println("abc"+(3+2)) 
```

“3”没有左上下文，所以它只是一个整数；下面的“+”是用左上下文整数找到的，所以它被解释为一个真正的加法运算符，因此 (3+2) 给出 5。这个结果是用左上下文“+”找到的，所以它被强制为一个字符串并连接起来产生“abc5”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T14:21:16.233

表达式从左到右求值（在应用运算符优先顺序之后）。如果 operator + 的参数之一是字符串，则结果是将 int 解析为 String 的连接字符串

在第一种情况下：

```
"abc" + 3 -> "abc3" // String + int -> concatenate
"abc3" + 2 -> "abc32" // String + int -> concatenate 
```

在第二种情况下：

```
3 + 2 -> 5 // int + int -> add
5 + "abc" -> "5abc" // int + String -> concatenate 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T14:28:17.403

运算符具有相同优先级的表达式的评估是从左到右。在这种情况下，表达式中的不同顺序导致运算符 + 表示：

1.  字符串的串联（整数被隐式转换`toString()`）
2.  2个整数之间的总和

    "abc"+3+2 = (("abc" + 3) + 2) = ("abc3" + 2) = "abc32"

    3+2+"abc" = ((3 + 2) + "abc") = (5 + "abc") = "5abc"

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T14:19:26.793

在第一种情况下，3 和 2 被视为字符串，然后分别连接到`abc`.

在第二种情况下，`3+2`计算总和，然后将其连接到`abc`。

# asp.net-mvc - 动作方法参数不为空，虽然它应该是

> ID：11035029
> 
> 赞同：3
> 
> 时间：2012-06-14T14:16:51.130
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

我在路由表中有这个条目：

```
routes.MapRoute(null,
                "instructions/new",
                 new { controller = "Instructions", action = "NewInstructions" },
                 new { httpMethod = new HttpMethodConstraint("GET") }
               ); 
```

这种方法

```
 [HttpGet]
 public ActionResult NewInstructions(Client client)
 {
     var instructions = instructionService.Create(client);
     return RedirectToAction("Instructions", new { id = instructions.Id });
 } 
```

和这个方法的链接

```
<a href="/instructions/new">create a new one</a> 
```

在这种情况下，`client`调用操作方法时参数不为空。相反，它显然是通过调用`Client`的无参数构造函数来创建的。

但是，当我通过 POST 访问相同的操作方法时，该`client`参数被正确设置为`null`.

`DefaultModelBinder`如果请求未提供参数值以区分 GET 和 POST 并且每个参数的行为不同，这是一种标准行为吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T04:36:33.340

您的网站如何转移到“NewInstructions”操作？如果您来自 action return View("NewInstructions") 那么它可能带有上一篇文章的参数值。

但是，如果您使用 return RedirectToAction(...) 那么参数应该是设置的，如果是可选的，则为 null。

# actionscript-3 - Flex：如何重新使用现有的 TitleWindow 而不是打开另一个新的 TitleWindow？

> ID：11035032
> 
> 赞同：0
> 
> 时间：2012-06-14T14:16:52.817
> 
> 标签：actionscript-3, apache-flex

我的应用程序有一个书名列表，当用户单击特定书名时，会打开一个 TitleWindow 来汇总有关该书的详细信息。如果用户没有关闭 TitleWindow，而是选择了不同的书名，我希望已经打开的 TitleWindow 使用新选择的书名信息进行更新。因此，任何时候都只打开一个 TitleWindow，以便查看有关任何特定书名的更多信息。

我可以在网上找到的所有 spark TitleWindow 示例在每次使用 TitleWindow 时都会打开一个新的 TitleWindow。例如：

[http://help.adobe.com/en_US/flex/using/WS6c678f7b363d5da52e8f1ca1124a0430dcf-8000.html](http://help.adobe.com/en_US/flex/using/WS6c678f7b363d5da52e8f1ca1124a0430dcf-8000.html)

这也是我的情况。每次单击书名时，都会打开一个新的 TitleWindow。

如果已经打开一个现有的 TitleWindow，有什么方法可以重新使用它？当然，我们不是在谈论所有 TitleWindow，只是用于此目的的 TitleWindow 的专用实例。

目前，我在 TitleWindow 中使用的变量是`[Bindable]`，当单击新书名时，原始 TitleWindow 会更新相关信息。因此，另一种解决方案是在现有 TitleWindow 已经打开时阻止新 TitleWindows 打开。因此，另一种解决方案是查询 TitleWindow 的一个实例是否已经打开，如果是，则不要打开新的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T14:22:11.817

是的，这是可能的，只需在单击第一本书时创建一个标题窗口，然后在随后的单击中重复使用它。

```
private var _titleWindow:TitleWindow;

private function onBookClicked():void
{
   if(!_titleWindow)
      _titleWindow = PopUpManager.createPopUp(...) as TitleWindow;

   updateTitleWindowWithBookInfo(_titleWindow,bookData);

} 
```

当用户关闭标题窗口而不是删除它时，只需隐藏它。

# sql - 如何在 CASE 语句的 ELSE 部分使用 OR

> ID：11035041
> 
> 赞同：1
> 
> 时间：2012-06-14T14:17:12.440
> 
> 标签：sql, case, foxpro

这是我的要求..在sql CASE语句中，当满足WHEN条件时，将执行部分..如果不满足条件，那么我需要有两个选项可供选择（这意味着我需要有一个OR在其他部分）..

我被困在这里..

```
CASE WHEN 
   tablename.ID=0 
THEN 
   tablename.description 
ELSE 
   tablename.description2 OR tablename.description2 
END AS abcd 
```

我正在做一个 foxpro 到 sql 的迁移，所以在 foxpro 中遇到了一个语句，它在其 CASE 的 ELSE 部分（在 foxpro 中称为 IIF）语句中使用了“/”。

我假设 '/' 在 SQL 中是 OR

请问有什么解决方案可以满足这个要求吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:22:24.030

如果您有另一个条件要依赖，那么您可以在第一个 else 部分插入第二种情况：

```
CASE 
    WHEN tablename.ID=0 THEN tablename.description 
    ELSE 
        CASE
            WHEN condition2 THEN tablename.description2 
            ELSE tablename.description2 
        END
END AS abcd 
```

你想做类似的事情吗？

# algorithm - 使用遗传算法求解 TSP 时的参数

> ID：11035043
> 
> 赞同：3
> 
> 时间：2012-06-14T14:17:15.267
> 
> 标签：algorithm, genetic-algorithm

我刚开始对遗传算法有所了解，我正在用它来解决旅行商问题。但是，我对应该使用哪些参数感到困惑。让我解释一下参数的含义。

参数：

**人口规模**

**生产的儿童数量**

**突变数**

我确信上述参数取决于我的问题中的城市数量，以及我的**交叉**和**突变**规范的确切形式。但到底是什么关系？

关于应该使用哪些参数，是否有任何种类或经验法则？任何类型的提示或建议都会很棒。

以下是我为 5 个城市问题所做的详细说明：

1) 我生成了 20 条随机路径，**人口 = 20**

2) 选出 14 条最佳路径（扔掉 6 条最差路径）

3) 从 14 条最佳路径中随机选择的两条路径创建 2 个突变体

**突变数 = 2**

（对于突变，我只是随机交换了两个城市的顺序 Ex：`0,1,2,3,4,0`可能变成`0,1,3,2,4,0`

4) 我从 8 条最佳路径中创建了 4 个孩子。

**儿童人数 = 4**

（对于交叉，我保留了共同的子路径，其余的都是随机生成的）例如：父 1：，`0,1,2,3,4,0`父 2：`0,2,1,3,4,0`

`3,4`是共同的，因此子路径将从 开始 `3,4`，其余部分是随机的。子路径可以是： `0,3,4,1,2,0`或`0,2,3,4,1,0`

5) 现在我有 2 个突变体和 4 个孩子，我将它们添加到我的 14 条最佳路径中，我有 20 条路径。

6) 执行步骤 2)、3)、4)、5)，依此类推。

我纯粹是随意设置参数吗？他们还好吗？我应该用什么？对于 15 个城市的问题，我应该使用哪些参数？48个城市？500个城市？

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T14:38:12.590

你的问题非常有趣和困难，我很遗憾地说没有确切的答案。我写了一本关于遗传算法的书，在它将近 500 页的篇幅中，我一再坚持认为参数取决于你的问题。

关于您的具体示例，让我们分析您的参数。您有 20 个人口，每一代您将产生 6 个不同的孩子。假设您有 50 代，您将分析 314 个解决方案（20 个原始个体加上 49*6）。假设你有 5 个城市，你有 5!=120 个可能的解决方案，所以你使用 GA 比穷举搜索更耗时。

我知道这是一个象征性的问题，并且您关心更大的问题（使用您的示例，15、48 和 500）。尽管如此，经验法则是覆盖搜索空间的一小部分（在 48 和 500 的情况下，这是自动的），以便使用 GA 的良好特性来指导搜索，您可能会得到一个好结果。我建议将高达 0,001% 的搜索空间视为整个执行过程中产生的个体总数（在 500 个城市这样的巨大问题的情况下，它可能仍然太多）。

关于使用的运算符，有很多要说的（在我的书中，有50多页）。因此，我将向您[推荐 Larrañaga 等人](http://www.dcs.gla.ac.uk/~pat/jchoco/gatsp/papers/aiRev99.pdf)撰写的一篇不错的评论。尽管它有点旧，但它会为您更好地探索您的问题提供指导。如果您想要更快的参考，请考虑[这篇 Wikipedia 文章](http://en.wikipedia.org/wiki/Crossover_%28genetic_algorithm%29#Crossover_for_Ordered_Chromosomes)。

我很抱歉打广告，但它不是为了卖书（毕竟，我的书只有葡萄牙语和西班牙语，所以我认为这个列表中的大多数成员都不会购买）。我只是想指出，有很多关于这个主题的文献。如果您需要有趣的阅读（而且您不会说葡萄牙语），我建议您阅读[Michaewicz 的书](https://rads.stackoverflow.com/amzn/click/com/3642061346)，它提出的观点肯定会帮助您更深入地解决问题。

# python - 线程完成时退出的多线程 Python 服务器

> ID：11035044
> 
> 赞同：0
> 
> 时间：2012-06-14T14:17:15.227
> 
> 标签：python, multithreading, sockets, client

假设您有一个相当基本的客户端/服务器代码，其中每个客户端创建三个线程并且多个客户端可以同时连接。我希望服务器等待传入连接，一旦它开始获取连接，就运行直到没有更多线程在运行，然后退出。代码类似于下面。（即，而不是服务器“永远服务”，我希望它在所有线程完成后退出）。

编辑：我希望服务器等待传入连接。一旦连接开始，它应该继续接受连接，直到没有线程运行，然后退出。这些联系会有些零星。

```
import socket
import threading

# Our thread class:
class ClientThread ( threading.Thread ):

   # Override Thread's __init__ method to accept the parameters needed:
   def __init__ ( self, channel, details ):

      self.channel = channel
      self.details = details
      threading.Thread.__init__ ( self )

   def run ( self ):

      print 'Received connection:', self.details [ 0 ]
      self.channel.send ( 'hello from server' )
      for x in xrange ( 10 ):
         print self.channel.recv ( 1024 )
      self.channel.close()
      print 'Closed connection:', self.details [ 0 ]

# Set up the server:
server = socket.socket ( socket.AF_INET, socket.SOCK_STREAM )
server.bind ( ( '', 2727 ) )
server.listen ( 5 )

# Have the server serve "forever":
while True:
   channel, details = server.accept()
   ClientThread ( channel, details ).start() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T17:53:42.823

根据您的评论，您正在寻找的是在第一个连接到服务器后开始计算连接，并在没有更多现有连接时终止服务器。

当前无限 while 循环的一个直接问题是每个`accept()`. 所以无论如何，它总是在等待另一个连接。您将不得不从其他线程中断它以使其脱离该循环。但另一种解决方案是让你的事件循环更大，接受新连接的行为只是其中的一部分。循环还应该检查退出条件。

这个例子只是一种可能的方式。它使用[Queue.Queue](http://docs.python.org/library/queue.html)来协调工作计数器。

```
import socket
import threading
import select
from Queue import Queue

class ClientThread ( threading.Thread ):

   def __init__ ( self, channel, details, queue=None ):
      self.channel = channel
      self.details = details
      self.queue = queue
      threading.Thread.__init__ ( self )

   def run ( self ):

      if self.queue:
         self.queue.put(1)

      print 'Received connection:', self.details [ 0 ]
      self.channel.send ( 'hello from server' )
      for x in xrange ( 10 ):
         print self.channel.recv ( 1024 )
      self.channel.close()
      print 'Closed connection:', self.details [ 0 ]

      if self.queue:
         self.queue.get_nowait()

# Set up the server:
server = socket.socket ( socket.AF_INET, socket.SOCK_STREAM )
server.bind ( ( '', 2727 ) )
server.listen ( 5 )

rlist = [server]
work_queue = Queue()

def accept_client():
   channel, details = server.accept()
   ClientThread ( channel, details, work_queue ).start() 

accept_client()

while not work_queue.empty():
   server_ready, _, _ = select.select(rlist,[],[], .25)
   if server in server_ready:
      accept_client()

print "Shutting down"
server.close()
print "Exiting" 
```

我们使用[select.select](http://docs.python.org/library/select.html)作为一种简单的方法来检测服务器套接字上的活动，但也有超时。如果服务器准备好了，那么我们接受新的连接。如果它达到`.25`第二次超时，我们只需再次循环并等待。

您会看到我们创建了一个队列并不断检查它是否为空。队列被传递到每个线程。当一个线程启动时，它会将一些工作记录到队列中。数据是任意的。只是一面旗帜。当线程完成时，它将从队列中清除该项目。结果是收到第一个连接后，队列不再为空，循环会一直运行。如果在任何时候队列变为空（因为所有当前线程都已完成），则循环将中断并且服务器将关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T14:45:00.700

如果你`break`从`while`循环中退出，进程会一直等到全部`ClientThreads`退出，然后才会终止。

这将起作用，因为客户端线程是*non-daemon*。有关[`threading.Thread.daemon`](http://docs.python.org/library/threading.html#threading.Thread.daemon)这方面的更多详细信息，请参阅。

# c# - 在 WPF 测试中打开一个窗口

> ID：11035046
> 
> 赞同：1
> 
> 时间：2012-06-14T14:17:18.197
> 
> 标签：c#, wpf

我在 Winforms 中的典型 UI 测试形式如下：

```
 [TestMethod]
    public void SomeTest()
    {
        if(RunManualTests)
        {
          TestForm form = new TestForm();
          SomeControl control = new SomeControl();
          form.Controls.Add(control);
          form.ShowDialog();
        }
    } 
```

在 WPF 中，似乎需要 App.xaml。App.xaml 有一个`StartupUri="MainWindow.xaml"`属性。我需要添加这个文件吗？如果是，如何动态设置 StartupUri？

换句话说，如何将我的 Winform 测试转换为 WPF？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T14:18:50.580

对使用没有要求`StartupUri`，你可以使用

```
 Window w = new Window();
 w.Content = new TestControl();//replaces form.Controls.Add(...)
 w.ShowDialog(); 
```

而是在适当的 C# 代码中。但是，您需要注意此代码在调度程序线程中运行（即，前台 STA 线程，它有一个正在运行的`Dispatcher`- 通常是 WPF 应用程序的主线程）。

您通常不需要 的任何对应项`form.Controls.Add(...)`，因为这些控件通常在 XAML 文件中进行描述。（但是，如果您真的愿意，也可以手动添加它们。）

# php - 使用 PDO 在 2 个不同的数据库中复制行

> ID：11035051
> 
> 赞同：0
> 
> 时间：2012-06-14T14:17:33.250
> 
> 标签：php, mysql, database, pdo

我正在使用 PDO (mysql) 创建 2 个不同的数据库连接。我想将一行数据从一个表传输到另一个数据库中的另一个表。这不是行的重复，仅选择了某些行。

我无法让它工作，有什么想法吗？

```
 private function moveCallToProduction() {
    try {
        $sql = "SELECT * FROM `calls` WHERE `id`=':id'";
        $query = $this->staging->prepare($sql);
        $query->execute($array);
        $results = $query->fetchAll(PDO::FETCH_ASSOC);
        try {
            $sql = "INSERT INTO `calls` (`id`,`sip_id`,`extension`,`caller_id`,`stage`,`status`,`survey_id`,`start`,`answer`,`hangup`,`end`) VALUES ('?','?','?','?','?','?','?','?','?','?','?')";
            $query = $this->production->prepare($sql);
            $query->execute($results);
        }
        catch(PDOException $e) {
            $this->informer("FATAL","There was a problem");
        }

    }
    catch(PDOException $e) {
        $this->informer("FATAL","We're unable to transport the call from the staging to production server. Error: ".$e->getMessage());
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T14:49:02.067

`fetchAll()`返回一个包含所有结果集行的数组。您需要遍历每一行并单独插入。例如：

```
...
$sql = "SELECT * FROM `calls` WHERE `id`=':id'";
$query = $this->staging->prepare($sql);
$query->execute($array);
$results = $query->fetchAll(PDO::FETCH_ASSOC);
foreach($results as $row) {
    try {
        $sql = "INSERT INTO `calls` (`id`,`sip_id`,`extension`,`caller_id`,`stage`,`status`,`survey_id`,`start`,`answer`,`hangup`,`end`) VALUES ('?','?','?','?','?','?','?','?','?','?','?')";
        $query = $this->production->prepare($sql);
        $query->execute($row);
    }
    catch(PDOException $e) {
        $this->informer("FATAL","There was a problem");
    }
}
... 
```

您还可以使用语句：`while($result = $query->fetch(PDO::FETCH_ASSOC))`而不是`fetchAll()`迭代结果，而不必将它们存储在内存中。

要考虑的一件事是，如果遇到异常，您想要做什么。由于您要插入多次，因此您可以考虑`PDO::beginTransation()`在开始时使用，`PDO::commit()`如果没有发生异常，并在发生异常时`PDO::rollBack()`取消任何更改。通过这种方式，您可以确定一切都转移或什么都不转移。

# html - 如何将样式限制为html的一部分

> ID：11035053
> 
> 赞同：0
> 
> 时间：2012-06-14T14:17:38.447
> 
> 标签：html, css, stylesheet

```
<style type="text/css">
table
{
border-collapse:collapse;
}
table, td, th
{
border:1px solid green;
}
th
{
background-color:green;
color:white;
}
</style> 
```

我想将此应用于仅包含其他表的 html 页面中的单个表。我不想把这种风格放在那些桌子上。
我们真的可以按照我的要求做吗？
如果可以，请提供一些参考答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T14:19:09.770

```
<style type="text/css">
table.myTable
{
border-collapse:collapse;
}
table.myTable, table.myTable td, table.myTable th
{
border:1px solid green;
}
table.myTable th
{
background-color:green;
color:white;
}
</style> 
```

然后将该表更改为具有这样的类属性：

```
<table class="myTable"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T14:20:20.833

您可以创建一个类并将其用于您希望样式处理的表

```
table.myStyles
{
border-collapse:collapse;
}
table.myStyles, .myStyles td, .myStyles th
{
border:1px solid green;
}
.myStyles th
{
background-color:green;
color:white;
} 
```

然后为你的桌子

```
<table class="myStyles">....</table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T14:20:16.383

您将需要执行以下操作之一：

*   修改表格的 html 以提供`table`and`ID`或 a `class`，然后将您的 CSS 修改为`table.foo`
*   仅当该表是容器内的第一个或最后一个表时才使用`:first-child`,`:last-child`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T14:20:36.087

这很容易做到。只需给表格一个 id，并在您的 css 代码中使用“#”来引用该想法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T14:23:44.933

```
<style type="text/css">
  .green-table {
    border-collapse:collapse;
  }
  .green-table td, .green-table th {
    border:1px solid green;
  }
  .green-table th {
    background-color:green;
    color:white;
  }
</style>

<table class="green-table">
    ...
</table> 
```

# android - Android Galaxy Nexus：作为媒体设备 (MTP) 连接时看不到文件夹

> ID：11035057
> 
> 赞同：2
> 
> 时间：2012-06-14T14:17:56.607
> 
> 标签：android, galaxy-nexus

我在 Android Galaxy Nexus 上调试的应用程序创建了一个文件夹，我想在我的桌面上检查其内容。当我在设备上打开文件浏览器应用程序时，我可以看到该文件夹​​。但是，当我以 MTP 模式从桌面连接到它时，我看不到它。我也看不到我使用文件浏览器在设备上创建的该文件夹的副本。

我该怎么做才能使它在桌面上可见，以便我可以复制它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T16:23:48.640

如果这是您从代码创建的文件夹，您需要使用`MediaConnection.scanFile()`它来使其显示在 MTP 中。我有[一篇去年的博客文章](http://commonsware.com/blog/2011/08/31/mtp-external-storage.html)解释了更多。

# ios5 - Cordova (PhoneGap) 和 iFrame

> ID：11035059
> 
> 赞同：3
> 
> 时间：2012-06-14T14:17:57.920
> 
> 标签：ios5, cordova

似乎每个人都知道一些愚蠢的事情，但在 PhoneGap 中不允许您在应用程序中使用 iFrame。那里有许多修复程序，但它们要么适用于旧版 PhoneGap，要么不起作用，要么导致其他问题。这是我到目前为止所尝试的：

1.  [OpenAllWhitelistURLsInWebView](https://stackoverflow.com/questions/10838598/openallwhitelisturlsinwebview#comment14236350_10838598)

2.  [http://craigpfau.com/2012/02/phonegap-ios-uiwebview-and-safari-app-links/](http://craigpfau.com/2012/02/phonegap-ios-uiwebview-and-safari-app-links/)

3.  [如何在 Safari 中打开外部链接而不是应用程序的 UIWebView？](https://stackoverflow.com/questions/9746260/phonegap-open-an-external-link-in-safari-not-the-apps-uiwebview/9748173#9748173)

似乎没有任何效果。这是我要完成的工作：

1.  来自 vimeo (iframe) 的视频嵌入留在应用程序中，外部主机：vimeo.com a.vimeocdn.com b.vimeocdn.com
2.  所有其他链接都指向 safari

这是我的应用程序详细信息：

ios 5.1.1 | 科尔多瓦 1.7.0 | JqueryMobile | jQuery 1.7.1

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T19:22:41.720

我在[这里](https://github.com/dhavaln/cordova-examples/tree/master/ios-cordova-video)有一个示例应用程序，它确实在应用程序内打开了 Vimeo 视频，但在 Safari 中打开了其他 url。

我在 MainViewController.m 中更改了以下函数

```
- (BOOL) webView:(UIWebView*)theWebView shouldStartLoadWithRequest:(NSURLRequest*)request navigationType:(UIWebViewNavigationType)navigationType
{
    NSURL *url = [request URL];
    NSString *host = [request.URL host];

    if(host != NULL || host != nil){
        if ([host rangeOfString:@"vimeo.co"].location != NSNotFound) {
            return YES;
        }else{
            if ([[url scheme] isEqualToString:@"http"] || [[url scheme] isEqualToString:@"https"]) {
                [[UIApplication sharedApplication] openURL:url];
                return NO;
            }
            else {
                return [ super webView:theWebView shouldStartLoadWithRequest:request navigationType:navigationType ];
            }
        }
    }

    return [super webView:theWebView shouldStartLoadWithRequest:request navigationType:navigationType];
} 
```

# objective-c - 从模态显示的弹出视图重新加载 UIWebView

> ID：11035065
> 
> 赞同：0
> 
> 时间：2012-06-14T14:18:08.917
> 
> 标签：objective-c, uiviewcontroller, reload, popover, synthesize

我有一个名为 mainViewController 的 viewController，其中包含一个名为“myWebView”的 UIWebView。mainViewController 提供了一个名为 subViewController 的弹出视图控制器。在 subViewController 中，我有一个应该重新加载 myWebView 的按钮。做这样的事情：

```
 mainViewController *vc = [[mainViewController alloc] init]; 
```

不起作用，因为它创建了 mainViewController 的另一个实例。如何在当前显示弹出窗口的 mainViewController 中重新加载 myWebView。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:39:46.507

除非我误解了你的问题，否则这似乎很容易实现。我想你可以从 UIPopoverController 发送通知。首先在 viewWillAppear 的主视图控制器中添加 self 作为观察者：

```
 [[NSNotificationCenter defaultCenter]addObserver:self selector:@selector(reloadMyWebView:) name:@"reloadWebView" object:nil]; 
```

您必须在您的主视图控制器上实现将执行实际重新加载的方法，这将是

```
 - (void)realoadMyWebView:(NSNotification *)notification 
```

确保在 viewWillDisappear 中将自己移除为观察者

```
 [[NSNotificationCenter defaultCenter]removeObserver:self]; 
```

然后你可以从你的popover控制器发布一个通知

```
 [[NSNotificationCenter defaultCenter]postNotificationName:@"reloadWebView" object:nil userInfo:nil]; 
```

# facebook - 我网站的 Facebook Insights 不会更新？

> ID：11035070
> 
> 赞同：0
> 
> 时间：2012-06-14T14:18:22.393
> 
> 标签：facebook, facebook-graph-api, web, facebook-insights

我是[http://porkystuff.com](http://porkystuff.com)的所有者，最近将其添加到我的 Facebook Insights 中。一开始我真的很感动，但现在三天前就没有更新了。那是怎么回事？我尝试在我的页面上删除关于谁是管理员的元标记，然后再次添加它 - 不走运。有谁知道这是怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T14:23:40.367

facebook 的见解有时会滞后于更新。我的几个页面和网站的统计数据都落后了 2-3 天。您只需要等到 Facebook 赶上所有数据的处理速度。

# sql - 如何在单个 SQL 中获取用户特定的配置值或默认值（如果缺少）

> ID：11035073
> 
> 赞同：0
> 
> 时间：2012-06-14T14:18:45.047
> 
> 标签：sql

我有一个配置表，其中包含特定用户选择的值。如果没有输入任何值，则应返回默认值。但是有一个问题：用户属于一个特定的组，每个组都有自己的默认值。

我需要的是*一个返回用户值的单个查询*，或者如果没有找到数据，则返回他/她的组的默认值。

配置表结构非常简单：

```
CONFIGURATION: ConfigurationId (PK), GroupId (FK), UserId (FK), ConfigurationDetailId (FK);
CONFIGURATIONDETAIL: ConfigurationDetailId (PK), ConfigValue1, ConfigValue2 
```

一个用户可能属于多个组，并且每个组都有不同的配置。即使它们的值相同，这些配置也被认为是不同的（有自己的 ConfigurationDetailId）。当我查找数据时，我总是有 GroupId 和 UserId

这可行，但我想要更“优雅”的东西......我不喜欢的是 TOP 1 和 ORDER BY 当存在用户特定行时，我需要消除默认行：

```
SELECT TOP 1 
  FROM Config C
 WHERE C.GroupId = @GroupId
   AND (C.UserId = @UserId OR C.UserId IS NULL)
 ORDER BY C.UserId DESC 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T14:56:42.533

也许尝试自联接，具体取决于您的表结构。

```
create table config
 ( GroupID int, 
   UserID int, 
   ConfigId int, 
   ConfigValue varchar(50),
   IsDefault int );

insert into config (groupid, userid, configid, configvalue, isdefault)
values (1, NULL, 1, 'A', 1);
insert into config (groupid, userid, configid, configvalue, isdefault)
values (1, NULL, 2, 'B', 1);
insert into config (groupid, userid, configid, configvalue, isdefault)
values (1, NULL, 3, 'C', 1);
insert into config (groupid, userid, configid, configvalue, isdefault)
values (1, 1, 1, 'A1', 0);
insert into config (groupid, userid, configid, configvalue, isdefault)
values (1, 1, 2, 'B1', 0);
insert into config (groupid, userid, configid, configvalue, isdefault)
values (1, 1, 3, 'C1', 0);
insert into config (groupid, userid, configid, configvalue, isdefault)
values (1, 2, 1, 'A2', 0);

select 
   COALESCE(c1.configid, c2.configid) as configid,
   COALESCE(c1.configvalue, c2.configvalue) as configvalue
from config c1 right join config c2
 on (c1.groupid = c2.groupid 
     and c1.configid = c2.configid
     and c1.isdefault = 0 and c1.userid = 2)
where c2.isdefault = 1 and c2.groupid = 1;

select 
   COALESCE(c1.configid, c2.configid) as configid,
   COALESCE(c1.configvalue, c2.configvalue) as configvalue
from config c1 right join config c2
 on (c1.groupid = c2.groupid 
     and c1.configid = c2.configid
     and c1.isdefault = 0 and c1.userid = 1)
where c2.isdefault = 1 and c2.groupid = 1; 
```

用户 ID = 2 的结果

```
CONFIGID    CONFIGVALUE
1           A2
2           B
3           C 
```

用户 ID = 1 的结果

```
CONFIGID    CONFIGVALUE
1           A1
2           B1
3           C1 
```

我为此构建了一个[SQLFiddle](http://sqlfiddle.com/#!3/d519e/1)，因此您可以自己查看它。

# python - 如何在python中将用户输入从一个类传递到另一个类？

> ID：11035076
> 
> 赞同：1
> 
> 时间：2012-06-14T14:18:50.367
> 
> 标签：python, class, variables, webapp2

我是编程新手，所以很有可能我做错了，但这就是我想要做的。

我正在尝试编写一个程序，该程序具有一个表单，该表单在一个类中接受用户输入，然后将其传递给另一个类，但我不知道该怎么做。这是相关代码的片段（我将***放在用户名变量周围，我试图传递的那个）：

```
class MainHandler(webapp2.RequestHandler):
  #this is in a form
   def post(self):
    ***username*** = self.request.get('username')

  #if username and other info entered correctly, then it redirects user to a new page and the WelcomeHandler class, so how do I get the username into the "Welcome, " message below?:

class WelcomeHandler(webapp2.RequestHandler):
    def get(self):
        self.response.out.write("Welcome, " + ***username***) 
```

编辑：这是我的整个代码，如果有帮助的话：

```
import webapp2
import re
import cgi

form="""

<form method = "post">   
Signup
<br>

<table>
    <tbody>            
      <tr><td><label>Username</label></td><td><input type="text" name = "username" 
 value="%(username)s"><div style="color: red">%(error)s</div> </td></tr>

<br>
     <tr><td> <label>Password</label></td><td><input type="password" name = "password" 
value="%(password)s"><div>TK TK TK</div></td></tr>

<br>
    <tr><td> <label> Verify password</label></td><td><input type="password" name = 
"verify" value="%(verify)s"><div> TK TK TK</div></td></tr>

<br>
    <tr><td> <label> Email(optional)</label></td><td><input type = "text" name = "email"
 value ="%(email)s"><div> TK TK TK</div></td></tr>

 </tbody>
</table>
<br>
<br>
<input type = "submit">
</form>
"""

def escape_html(s):
    return cgi.escape(s, quote = True)

def valid_username(username):
    USER_RE = re.compile(r"^[a-zA-Z0-9_-]{3,20}$")
    return USER_RE.match(username)

def valid_password(password):
    USER_RE = re.compile(r"^.{3,20}$")
    return USER_RE.match(password)

def verify_password(password, verify):
    if verify == password:
        return True
    else:
        return False

def valid_email(email):
    USER_RE = re.compile(r"^[\S]+@[\S]+\.[\S]+$")
    return USER_RE.match(email)

class MainHandler(webapp2.RequestHandler):
    def write_form(self, error="", username="", password="", verify="", email=""):
        self.response.out.write(form % {'error': error, "username": 
escape_html(username), "password": escape_html(password), "verify": escape_html(verify),
 "email": escape_html(email)})

    def get(self):
        self.write_form()

    def post(self):
        username = self.request.get('username')
        password = self.request.get('password')
        verify = self.request.get('verify')
        email = self.request.get('email')

        username_check = valid_username(username)
        password_check = valid_password(password)
        verify_check = verify_password(password, verify)
        email_check = valid_email(email)

        if not (username_check and password_check and verify_check):
            self.write_form("That's not valid, you jive turkey", username, password, 
verify, email)
        else:
            self.redirect("/welcome")

class WelcomeHandler(webapp2.RequestHandler):
    def get(self):
        self.response.out.write("Welcome, " + username)

app = webapp2.WSGIApplication([
        ('/', MainHandler),
        ('/welcome', WelcomeHandler)], debug=True) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T14:59:08.463

你不想这样做。这不仅仅是普通的基于类的编程：这些类中的每一个都代表一个从浏览器到服务器的请求。在类之间传递这些数据意味着什么？

您真正想要做的是告诉浏览器重定向到您的 GET 处理程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T15:00:17.960

尝试在 webapp2 文档中查看[设置 cookie](http://webapp-improved.appspot.com/guide/response.html#setting-cookies "设置cookies")和[阅读 cookie 。](http://webapp-improved.appspot.com/guide/request.html#guide-request-cookies)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T17:28:27.093

正如 Daniel 所说 - 您需要了解 HTTP 请求/响应周期以及您的 RequestHandler**实例**是如何与之关联的。

这里通常的解决方案是使用“会话”——一种将数据从一个请求保存到另一个给定用户的机制，通常由存储为用户浏览器中的 cookie 的不透明密钥标识。FWIW，任何体面的 Web 框架都应该为会话提供支持，因此您可能需要在此处阅读框架的文档。

# logging - Web 服务器会记录 WGet 请求吗？

> ID：11035078
> 
> 赞同：0
> 
> 时间：2012-06-14T14:18:52.967
> 
> 标签：logging, web, request, wget

我是运行服务器的新手，但是 Wget 请求会记录在 Web 服务器中吗？例如，在 Apache 中将记录什么样的请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T15:38:09.753

从服务器的角度来看，wget 请求与任何其他 HTTP 请求没有什么不同。如果 apache 配置为记录 HTTP 请求，它将记录所有请求，包括 wget。如果它配置为记录用户代理字段，您应该在日志文件中看到哪些特定请求来自 wget。

# django - Django Howto 过滤掉属于特定国家的用户而不是所有用户

> ID：11035079
> 
> 赞同：0
> 
> 时间：2012-06-14T14:19:03.583
> 
> 标签：django, django-models

如果下面的代码不适合一个体面的程序员，请道歉，因为我根本与计算机无关，但我想自动化一个乏味的过程，我发现 Django 很有趣.. 对于我的生活，我不能只是只需找到答案。

拥有以下 models.py 我想过滤掉属于特定国家的用户而不是所有用户，并将此信息保存在 sqlite3 db

```
class Country(models.Model):
    name = models.CharField(max_length=50)  

    def __unicode__(self):
        return self.name

    class Meta:
        verbose_name = 'Countries Uploaded'

class Users(models.Model):
    name = models.CharField(max_length=50) 
    cUsers = models.ForeignKey(Country)

    def __unicode__(self):
       return self.name

    class Meta:
        verbose_name = 'Users on a country'

class GoalsinCountry(models.Model):
    Country = models.ForeignKey(VideoTopic)
    'HERE I WOULD LIKE TO SEE THE USERS IN EACH COUNTRY'
    name = models.CharField(max_length=50)  
    descr = models.TextField(blank=True, null=True)

    def __unicode__(self):
        return self.name
    class Meta:
        verbose_name = 'Goals Topic' 
```

这可能与Django有关吗？有什么可行的例子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T14:21:12.317

尝试：

```
Users.objects.exclude(cUsers__name='Some Country') 
```

请参阅：[https ://docs.djangoproject.com/en/dev/topics/db/queries/#lookups-that-span-relationships](https://docs.djangoproject.com/en/dev/topics/db/queries/#lookups-that-span-relationships)

# audio - 将语音从声卡解析为文本

> ID：11035081
> 
> 赞同：0
> 
> 时间：2012-06-14T14:19:12.460
> 
> 标签：audio, language-agnostic, speech-recognition, portaudio

我一直在对 PortAudio 和自然语言处理进行一些实验，我想知道是否有某种方法可以将两者结合起来。我想要的是一种服务，它可以从视频中获取音频（视频格式可以是最简单的），并在播放时将其解析为文本。我知道这对于 Android 来说相当简单，但我希望它可以在计算机或笔记本电脑上运行，如果可能的话，可以实时运行。一旦我在视频中通过声卡播放语音，我已经确定了我的映射，但是我对如何实现第一部分有点迷茫。我知道 Dragon，但我更愿意使用非专有的东西来进行实际的语音到文本解析。解析器不需要完美，我可以处理拼写错误和不规则的词形。有什么想法吗？

# sql-server - 跨多个脚本/选项卡的 SQL Server 临时表

> ID：11035085
> 
> 赞同：2
> 
> 时间：2012-06-14T14:19:17.397
> 
> 标签：sql-server, sql-server-2008

我曾经读过 Zed Shaw 的一句话，它说“如果软件开发人员多次编写相同的代码，他应该编写一个函数，这样他就不必重复自己”。

每天，我发现自己`SQL Server`每天不止一次制作临时表。我不需要这些表每天都活过午夜，这就是我选择使用临时表的原因。但是，我在不同的选项卡中有各种脚本`SQL Management Studio`- 我必须在每个脚本中重复这些临时表才能引用它，这似乎效率很低。我的最终目标是运行一个存储过程，该过程将填充多个临时表并让它们可用于运行我的分析。

有没有比我目前使用的更好的方法来引用表格？有没有办法在所有会话中引用临时表`SQL Server 2008`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T14:43:06.980

看来您想要的是[全局临时表](http://msdn.microsoft.com/en-us/library/ms177399%28v=sql.105%29.aspx)。使用它们的语法与普通临时表相同，但它们有两个`##`而不是一个 ( `##temptable`)。请先查看链接以了解它们的局限性。

# amazon-ec2 - 两个 AWS 区域之间的特殊连接？

> ID：11035090
> 
> 赞同：0
> 
> 时间：2012-06-14T14:19:32.083
> 
> 标签：amazon-ec2, amazon-web-services

AWS 的区域之间是否存在“特殊”连接（比正常速度更快）？

> 在不同区域的 AWS 服务之间传输的数据将按传输双方的 Internet 数据传输收费[http://aws.amazon.com/ec2/pricing/#dataXferPricing](http://aws.amazon.com/ec2/pricing/#dataXferPricing)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T23:36:37.210

所有亚马逊区域与各种公共互联网网络提供商的连接性都高得离谱，因此区域 A 和区域 B 之间的连接肯定比从区域 A 到您到区域 B 的连接要好得多。

Amazon 优化了 EC2 实例和 CloudFront 边缘节点之间的网络连接参数，因此它们也可能在 EC2 区域之间进行类似的工作。

请注意，EC2 区域之间的网络流量不是 Amazon 的“内部”流量，应被视为不受信任。确保对区域之间的任何敏感网络流量进行加密。事实上，亚马逊建议对 EC2 区域内的敏感网络流量进行加密，即使他们拥有整个流量并采取措施保护它并为您提供私密性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T15:28:36.190

每个区域都有一个专用网络，跨越所有可用区域，**因此没有“特殊/超快速方式”可以在两个（或更多）区域之间连接而无需支付 Transfer IN/OUT。**

如果您需要在不同区域之间进行更快的传输，您可能需要查看[CloudOpt](http://www.cloudopt.com/home)。

# php - Doctrine2：延迟加载不适用于反向关系

> ID：11035091
> 
> 赞同：2
> 
> 时间：2012-06-14T14:19:34.720
> 
> 标签：php, orm, symfony, doctrine-orm

我有 2 个表，比如 post 和 post_blacklist，它们的简化 yml 信息如下。post_record 表对 post 表有一个 FK。当 post_blacklist 表包含一条记录时，这意味着该帖子被列入黑名单。

我正在尝试检索所有未列入黑名单的帖子。

我可以看到 2 个解决方案：

*   big where in 子句（在性能方面可能不太好）

*   left join，下面实现

    ```
    $qb->select('p')
            ->from('MyBundle:Post', 'p')
            ->leftJoin('p.PostBlacklist', 'pbl')
           ->where('pbl.idPost IS NULL');
    ; 
    ```

上面的左连接有效，除了为了使它工作，我必须声明 post 和 post_blacklist 之间的反比关系（称为 PostBlacklist）。

由于这种反向关系，每次我检索 Post 实体时，我都会在 Doctrine 2 自动添加的 post_blacklist 表中添加一个额外的左连接。

我设法找到了文件doctrine\lib\Doctrine\ORM\Persisters\BasicEntityPersister.php：

```
$this->_selectJoinSql .= ' ' . $eagerEntity->table['name'] . ' ' . 
$this->_getSQLTableAlias($eagerEntity->name, $assocAlias) .' ON '; 
```

**我的问题**：为什么会这样，我可以在没有 Doctrine 添加额外连接的情况下完成我想要的吗？

**PostBlacklist 实体：**

```
 type: entity
  table: post_blacklist
  fields:
    idBlacklist:
      id: true
      type: integer
      unsigned: false
      nullable: false
      column: id_blacklist
      generator:
        strategy: IDENTITY
    idPost:
      type: integer
      unsigned: false
      nullable: false
      column: id_post    
  oneToOne:
    Post:
      targetEntity: Post
      cascade: {  }
      mappedBy: null
      inversedBy: PostBlacklist
      joinColumns:
        id_post:
          referencedColumnName: id_post
      orphanRemoval: false
  lifecycleCallbacks: {  } 
```

**发布实体**

```
 type: entity
  table: post
  fields:
    idPost
      id: true
      type: string
      length: 35
      fixed: false
      nullable: false
      column: id_post
      generator:
        strategy: IDENTITY
  oneToOne:
    PostBlacklist:
      targetEntity: PostBlacklist
      mappedBy: Post
  lifecycleCallbacks: {  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T14:48:10.167

您是否尝试将 fetchMode 设置为“lazy”或“extra_lazy”？它应该只在请求时检索实体。对于 PostBlacklist：

```
oneToOne:
  Post:
    # ...
    fetchMode: "lazy" 
```

对于邮政：

```
oneToOne:
  PostBlacklist:
    # ...
    fetchMode: "lazy" 
```

您可以查看[此演示文稿](http://www.slideshare.net/guilhermeblanco/orm-dont-kill-your-db-developers-do)以获取有关获取模式的更多信息。

# html - 拆分按钮是否必须具有 Em-Class，其属性为 unSelectable=On？

> ID：11035093
> 
> 赞同：0
> 
> 时间：2012-06-14T14:19:39.770
> 
> 标签：html, button, selenium, ria

我正在写这篇文章，并继续我以前的帖子......

[在哪里单击以下对象（按钮），以便在 Selenium（Webdriver）中显示值？](https://stackoverflow.com/questions/11027312/where-to-click-on-this-following-objectbutton-for-the-values-to-be-displayed/)

[如何使用 Selenium 在 Button 的特定部分单击以显示选项列表？](https://stackoverflow.com/questions/10994285/how-to-click-in-a-specific-part-of-a-button-using-selenium-for-the-list-of-opti)

由于我想自动化鼠标单击事件以使用 selenium 在拆分按钮上进行测试，因此在单击按钮的一个特定部分时，我发现“该特定部分”存在于 Em 类中，而后者又具有按钮/链接，但点击后什么也不做...

这个 Em 类有一个属性，unSelectable=On....这个属性是拆分按钮功能所必需的吗？可以给Off吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T05:00:39.827

首先，我不明白为什么 Em 类首先有一个属性`unClickable="On"`。

我建议你把这个值改成`**unselectable="Off"**`，然后看看会发生什么。

让我知道是否产生任何错误。

# html - css下拉菜单在错误的位置

> ID：11035094
> 
> 赞同：2
> 
> 时间：2012-06-14T14:19:40.743
> 
> 标签：html, css

我对纯 CSS 下拉菜单的定位有疑问。您可以在以下位置找到该网站： [链接到网站](http://knowledgeispower.kn.funpic.de/)

当您将鼠标悬停在“教程”（我并没有真正做任何事情，但它是为了学习）和“博客”时，您会看到下拉菜单位置不在选项卡的正下方，而是向右移动。

如何将下拉菜单放在选项卡下？我在这里先向您的帮助表示感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T15:38:34.183

尝试编辑文件“main.css”，更改：

```
ul#nav li ul{
position:absolute;
display:none;
} 
```

为了这：

```
ul#nav li ul{
position:absolute;
display:none;
padding:0;
margin:0;
} 
```

我认为它会解决你的位置问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T14:26:50.363

您需要在元素上重置`margin`'s、`padding`'s 等的浏览器默认值。

您可以在 CSS 顶部执行的最低操作是：

`html,body,ul,li,p { margin:0;padding:0 }`

查找[http://cssreset.com](http://cssreset.com)以获取更多选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T14:26:57.777

发生这种情况是因为您的浏览器会自动将自定义 CSS 添加到某些元素，例如本例中的“ul”标签。我正在使用 Chrome，我在所有子列表中都看到了这种风格：-webkit-padding-start: 40px; 所以只需添加这个css：

```
ul#nav li ul{
padding-left:0;
} 
```

# entity-framework - 为什么显式加载不起作用，并且导航属性始终为空？

> ID：11035096
> 
> 赞同：0
> 
> 时间：2012-06-14T14:19:53.343
> 
> 标签：entity-framework, ef-code-first

我所有的代码都在这里，很简单，我不知道哪里出错了。

Person 和 Task 具有多对多的关系。我想使用显式方式加载某人的任务。我按照[这篇文章](http://blogs.msdn.com/b/adonet/archive/2011/01/31/using-dbcontext-in-ef-feature-ctp5-part-6-loading-related-entities.aspx)显示的方式进行操作，但我无法使其工作。

```
public class Person
{
    public int Id { get; set; }
    public string Name { get; set; }
    public ICollection<Task> Tasks { get; set; }
}
public class Task
{
    public int Id { get; set; }
    public string Subject { get; set; }
    public ICollection<Person> Persons { get; set; }

}

public class Ctx : DbContext
{
    public Ctx()
        : base("test")
    {
        this.Configuration.LazyLoadingEnabled = false;
        this.Configuration.ProxyCreationEnabled = false;
    }
    public DbSet<Person> Persons { get; set; }
    public DbSet<Task> Task { get; set; }
}

class Program
{
    static void Main(string[] args)
    {
        //add some data as follows
        //using (var ctx = new Ctx())
        //{

            //ctx.Persons.Add(new Person { Name = "haha" });
            //ctx.Persons.Add(new Person { Name = "eeee" });

            //ctx.Task.Add(new Task { Subject = "t1" });
            //ctx.Task.Add(new Task { Subject = "t2" });
            //ctx.SaveChanges();

            //var p11 = ctx.Persons.FirstOrDefault();
            //ctx.Task.Include(p2 => p2.Persons).FirstOrDefault().Persons.Add(p11);
            //ctx.SaveChanges();
        //}

        var context = new Ctx();
        var p = context.Persons.FirstOrDefault();

        context.Entry(p)
        .Collection(p1 => p1.Tasks)
        .Query()
        //.Where(t => t.Subject.StartsWith("t"))
        .Load();

        //the tasks should have been loaded,isn't it?but no...
        Console.WriteLine(p.Tasks != null);//False

        Console.Read();
    }
} 
```

我的代码有什么问题吗？我对 EF 很陌生，所以请有人帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T15:30:37.983

问题是你的`.Query()`电话。您无需加载集合，而是获取`IQueryable`将用于加载的副本，然后执行查询。

删除您的`.Query()`线路，它将起作用。

* * *

如果您正在寻找的是收集元素的过滤列表，您可以这样做：

```
var filteredTasks = context.Entry(p)
                           .Collection(p1 => p1.Tasks)
                           .Query()
                           .Where(t => t.Subject.StartsWith("t"))
                           .ToList(); 
```

This will **not** set `p.Tasks`, nor is it a good idea to do so, because you'd be corrupting the domain model.

If you really, really want to do that... this might do the trick (untested):

```
var collectionEntry = context.Entry(p).Collection(p1 => p1.Tasks);
collectionEntry.CurrentValue =
    collectionEntry.Query()
                   .Where(t => t.Subject.StartsWith("t"))
                   .ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-09T07:07:28.330

This solution worked for me :

For some reasons EF requires virtual keyword on navigation property, so the entities should be like this :

```
public class Person
{
    //...
    public virtual ICollection<Task> Tasks { get; set; }
}

public class Task
{
    //...
    public virtual ICollection<Person> Persons { get; set; }

} 
```

# tomcat6 - 运行我的应用程序时出现 Tomcat 6.0.32 错误

> ID：11035098
> 
> 赞同：0
> 
> 时间：2012-06-14T14:19:55.703
> 
> 标签：tomcat6

我已经使用 maven 创建了我的应用程序的 war 文件。构建成功。现在我已经在我的 tomcat 服务器上部署了相同的构建。但是当我尝试访问我的应用程序时，我收到以下错误消息..

```
org.apache.jasper.JasperException: Mandatory TLD element tlib-version missing or empty in TLD /WEB-INF/struts-html.tld 
    org.apache.jasper.compiler.DefaultErrorHandler.jspError(DefaultErrorHandler.java:51)
    org.apache.jasper.compiler.ErrorDispatcher.dispatch(ErrorDispatcher.java:409)
    org.apache.jasper.compiler.ErrorDispatcher.jspError(ErrorDispatcher.java:164)
    org.apache.jasper.compiler.TagLibraryInfoImpl.parseTLD(TagLibraryInfoImpl.java:281)
    org.apache.jasper.compiler.TagLibraryInfoImpl.<init>(TagLibraryInfoImpl.java:164)
    org.apache.jasper.compiler.Parser.parseTaglibDirective(Parser.java:386)
    org.apache.jasper.compiler.Parser.parseDirective(Parser.java:450)
    org.apache.jasper.compiler.Parser.parseElements(Parser.java:1397)
    org.apache.jasper.compiler.Parser.parse(Parser.java:130)
    org.apache.jasper.compiler.ParserController.doParse(ParserController.java:255)
    org.apache.jasper.compiler.ParserController.parse(ParserController.java:103)
    org.apache.jasper.compiler.Compiler.generateJava(Compiler.java:185)
    org.apache.jasper.compiler.Compiler.compile(Compiler.java:347)
    org.apache.jasper.compiler.Compiler.compile(Compiler.java:327)
    org.apache.jasper.compiler.Compiler.compile(Compiler.java:314)
    org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:592)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:326)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 
```

任何有任何线索的人请更新提前谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T16:52:25.843

它告诉您它找不到有效的 tlib-version 元素。

打开/WEB-INF/struts-html.tld ...它可能有一个有效的`<taglib>`根元素，但它有一个`tlib-version`子元素，例如：

```
<taglib>
  <tlib-version>1.0</tlib-version>
....
....
</taglib> 
```

您可以在此处阅读有关标记库描述符的更多信息：http:
[//docs.oracle.com/javaee/1.4/tutorial/doc/JSPTags6.html](http://docs.oracle.com/javaee/1.4/tutorial/doc/JSPTags6.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-28T04:47:42.290

您需要确保您的 taglib 如下所示

`<taglib xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/jsee/web-jsptagLibrary_2_0.xsd" version="2.0">`

# paypal - 通过定制网站接受 Paypal 付款

> ID：11035099
> 
> 赞同：1
> 
> 时间：2012-06-14T14:19:59.207
> 
> 标签：paypal

我一直在制作一个酒店预订软件，它可以计算给定日期和规格的酒店住宿价格。我正在寻找使用 Paypal 接受付款，但浏览了他们的网站后，找不到似乎与此兼容的解决方案。

由于价格是动态的，它不像普通的单价产品，Paypal 似乎处理得最好。我需要一种方法，我可以将费用发送到 Paypal，让 Paypal 向客户收费，然后让 Paypal 向网站发送确认付款已正确处理，此时预订完成。

我认为 Paypal 能够处理这样的动态定价项目。谁能指出我应该看的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T22:50:59.557

我刚刚在我当前的网站 bpremium.com 中完成了这个过程，基本上我为支付过程构建了一个 webservice api，它可以通过 javascript 发送命令，直到它到达最后阶段，这是你构建发送到 paypal 的表单的地方.

为了记录付款，您为通知 url 设置了另一个 web 服务，这将捕获所有 $_POST 数据并将其处理到您的数据库中。

```
<form id="form-payment-paypal" action="https://www.paypal.com/cgi-bin/webscr">
<input type="hidden" name="cmd" value="_xclick" />
<input type="hidden" name="bn" value="PP-BuyNowBF" />
<input type="hidden" name="charset" value="utf-8" />
<input type="hidden" name="business" value="YOUR_ACCOUNT_EMAIL_ADDRESS" />
<input type="hidden" name="item_name" value="THE PRODUCT NAME" />
<input type="hidden" name="item_number" value="YOUR_RECOGNISABLE_SALE_ID?>" />
<input type="hidden" name="currency_code" value="EUR" />
<input type="hidden" name="lc" value="THE LANGUAGE CODE: es_ES, en_GB, etc" />
<input type="hidden" name="amount" value="<?=$amount+($amount*0.04)?>" />
<input type="hidden" name="return" value="/payment/complete/" />
<input type="hidden" name="notify_url" value="/webservice/payment/notify/paypal/" />

<p class="ac span300">
    <input  type="submit" class="form-style-bt" value="PAY" />
</p>
</form> 
```

这基本上是我们使用的，你可以看到我们把 $amount + $amount*0.04 因为你需要在我所在的西班牙加上 4% 的附加费。也许那是你的代码不同。

我认为其余部分是不言自明的。

在 /webservice/ url 上，您需要将所有内容记录到数据库中，它会向您发送成功或失败的信息，但这不是对您网站的调用，您不会看到此页面，这是一个“反向通道”调用你的网站，所以它不是你的登陆页面，很简单，url paypal 将所有原始数据发送到，你应该记录它，处理它，也许发送电子邮件等。

然后，如果用户返回您的网站，您将进入 /payment/complete 页面，因此该页面可以显示结果，无论一切正常还是失败。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T14:27:51.377

Paypal 的直接集成可以处理这样的定价。我想他们的一些涉及较少的解决方案也会如此，但我知道 DI 确实如此。

编辑：

ExpressCheckout 似乎也：

[https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_nvp_r_SetExpressCheckout](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_nvp_r_SetExpressCheckout)

# java - java.util.logging 如何覆盖特定包的处理程序日志级别？

> ID：11035103
> 
> 赞同：0
> 
> 时间：2012-06-14T14:20:07.383
> 
> 标签：java, logging

在`java.util.logging`日志配置中，我想专门为某些包覆盖控制台日志级别，我该怎么做？

例如，我尝试了配置

```
handlers= java.util.logging.ConsoleHandler

.level= INFO

java.util.logging.ConsoleHandler.level = INFO
java.util.logging.ConsoleHandler.formatter = java.util.logging.SimpleFormatter

com.mypackage.MyClass.level= ALL 
```

`MyClass`日志级别设置为`ALL`，但它似乎没有在控制台上记录任何低于信息的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:52:15.827

I think , you should give the log level at package level, not at the class level.

Try `com.mypackage.level= ALL` **instead of** `com.mypackage.MyClass.level= ALL`.

Also you can edit these settings by login to WAS admin console, under logs and traces.

# jquery - 如何使 html 网格的 jquery 轻？

> ID：11035104
> 
> 赞同：1
> 
> 时间：2012-06-14T14:20:09.960
> 
> 标签：jquery, html, delegates

我们动态地创建一个 html 网格。这有超过 5000 行和 10 列（这可以增长）。我们目前为每个添加一个“标题”属性以在悬停时显示工具提示。由于我们正在为所有 5000x10 单元格添加属性，因此添加所有这些属性并让 jQuery 变得不那么繁重需要一些时间。我想知道有没有更好更有效的方法来显示悬停工具提示并减少/减轻 jQuery？我不确定我们是否可以使用 delegates() 或其他选项？

```
function RenderGrid(colDefs,data){    
    .
    .
    var data='';
    for (var col in columnDefs) {
      data = d[colDefs[col].columnId] || '';
      rw[++i] = '<td title="' + data + '">';
      rw[++i] = data;
      rw[++i] = '</td>';
    }
    .
    .
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T14:23:27.840

```
$('.element-class').on('hover', function () {

//   create the tooltip element here;

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T14:30:12.483

无需在title属性中复制td文本或将其存储在数据中，只需在悬停时使用td文本设置title属性即可。

```
$('td').on('hover', function () {
    $(this).attr("title", $(this).text());
});​ 
```

这是一个[jsFiddle](http://jsfiddle.net/hJzLa/)。

# apache-pig - 通过 Pig 脚本处理 Json

> ID：11035105
> 
> 赞同：5
> 
> 时间：2012-06-14T14:20:11.703
> 
> 标签：apache-pig

我目前已经开始使用 PIG 脚本处理 JSON 文件和处理数据。我使用的是 Pig 版本 0.9.3。我遇到了 PiggyBank，我认为这对于在 PIG 脚本中加载和处理 json 文件很有用。

我已经通过 ANT 构建了 piggybank.jar。后来，我编译了[Java 文件](https://github.com/mmay/PigJsonLoader/blob/master/JsonLoader.java "JsonLoader.java")并更新了 piggybank.jar。试图运行给定的示例 json 文件。

我编写了一个简单的 PIGSCRIPT 和相应的 JSON，如下所示。

```
REGISTER piggybank.jar
a = LOAD 'file3.json' using org.apache.pig.piggybank.storage.JsonLoader() AS (json:map[]);
b = foreach a GENERATE flatten(json#'menu') AS menu;
c = foreach b generate flatten(menu#'popup') as popup;
d = foreach c generate flatten(popup#'menuitem') as menu;
e = foreach d generate flatten(menu#'value') as val;
DUMP e;

file3.json
{ "menu" : {
    "id" : "file",
    "value" : "File",
    "popup": {
      "menuitem" : [
        {"value" : "New", "onclick": "CreateNewDoc()"},
        {"value" : "Open", "onclick": "OpenDoc()"},
        {"value" : "Close", "onclick": "CloseDoc()"}
      ]
    }
 }} 
```

我在运行时收到以下异常：

```
org.apache.pig.backend.executionengine.ExecException: ERROR 6018: Error while reading input - Could not json-decode string: { "menu" : {
    at org.apache.pig.piggybank.storage.JsonLoader.parseStringToTuple(JsonLoader.java:127) 
```

猪日志文件：

```
Pig Stack Trace
---------------
ERROR 1066: Unable to open iterator for alias e

org.apache.pig.impl.logicalLayer.FrontendException: ERROR 1066: Unable to open iterator for alias e
        at org.apache.pig.PigServer.openIterator(PigServer.java:901)
        at org.apache.pig.tools.grunt.GruntParser.processDump(GruntParser.java:655)
        at org.apache.pig.tools.pigscript.parser.PigScriptParser.parse(PigScriptParser.java:303)
        at org.apache.pig.tools.grunt.GruntParser.parseStopOnError(GruntParser.java:188)
        at org.apache.pig.tools.grunt.GruntParser.parseStopOnError(GruntParser.java:164)
        at org.apache.pig.tools.grunt.Grunt.exec(Grunt.java:84)
        at org.apache.pig.Main.run(Main.java:561)
        at org.apache.pig.Main.main(Main.java:111)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:616)
        at org.apache.hadoop.util.RunJar.main(RunJar.java:156)
Caused by: java.io.IOException: Job terminated with anomalous status FAILED
        at org.apache.pig.PigServer.openIterator(PigServer.java:893)
        ... 12 more
================================================================================ 
```

如果我错了，请纠正我。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-11T20:43:27.793

您可以使用 Twitter 的 Elephant Bird 处理嵌套的 json 加载：[https ://github.com/kevinweil/elephant-bird](https://github.com/kevinweil/elephant-bird)

```
a = LOAD 'file3.json' USING com.twitter.elephantbird.pig.load.JsonLoader('-nestedLoad') 
```

这会将 JSON 解析为地图[http://pig.apache.org/docs/r0.11.1/basic.html#map-schema](http://pig.apache.org/docs/r0.11.1/basic.html#map-schema) JSONArray 被解析为地图的 DataBag。

# objective-c - 在预定时间播放带有回调的音频？

> ID：11035110
> 
> 赞同：0
> 
> 时间：2012-06-14T14:20:30.910
> 
> 标签：objective-c, ios

我有一个 30 秒的音频文件，我想在播放期间在 12 个不同的点获得回调，这样我就可以开始一些动画了。例如，在 1.3、3.2、4.8、9.8、12.3、15.5、18.1、20.4、22.5、24.5、27 和 29 秒。我将如何在 iOS 上执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T15:07:49.177

在 iOS/Objective-C 中有很多很多方法可以做到这一点。我假设您不希望来自实际音频播放器的回调来保证音频已播放。您用于播放音频的机制*可能会*在音频实际开始播放时进行回调（以帮助您更好地同步内容）。

一个很常见的就是

```
[self performSelector:@selector(myMethod:) withObject:someArgumentOrNil afterDelay:3.2]; 
```

或者您可以查找`NSTimer`以了解如何使用它，

或新的中央调度版本

```
double delayInSeconds = 3.2;
dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
  NSLog(@"later");
}); 
```

如果您使用较新的操作系统和多核设备，GCD 是一个不错的选择。

如果您使用的是动画包（例如 cocos2d），它们通常也有计时挂钩。

* * *

为扩展问题添加：

如果所有动画都不同，那么这就是您必须做的工作量。如果它们都相同（或某些相同），您可以让 NSTimer 每 0.1（例如）秒调用一次，然后测试经过的实际时间量，当您达到下一个阈值时触发操作. （不能保证按时运行 - 如果您的应用程序占用大量 CPU，它可能会运行迟到。）

```
if (currentTime >= thresholdTime) {
  [self doAnim]; 
  thresholdTime = nextOneInLine;
} 
```

是的，如果它变得更复杂，您可能想要构建一些类来处理它。按时间顺序构建一个数组，并将其视为一个队列。

# navigation - 使用按钮而不是使用钛的顶部栏从 DetailView 返回 MasterView

> ID：11035112
> 
> 赞同：0
> 
> 时间：2012-06-14T14:20:35.733
> 
> 标签：navigation, titanium, appcelerator

我有一个导航组，我有一个 Master 和一个 DetailView。当使用 MasterView 打开 detailView 时，navigationGroup 会自动在顶栏提供一个按钮，用于返回 MasterView。

我想要实现的是在 detailView 上有一个按钮。单击 detailView 上的按钮后，想要处理作业，然后返回 MasterView。

我可以在 detailView 上的按钮上添加一个侦听器并执行所需的工作，但是如何关闭 detailView 并返回到 MasterView？

下面发布的是3个文件的代码

*   应用程序窗口.js
*   MasterView.js
*   DetailView.js

应用程序窗口.js

```
var MasterView = require('ui/common/MasterView'), DetailView = require('ui/common/DetailView');
    var masterView = new MasterView(), detailView = new DetailView();

    //create master view container
    var masterContainerWindow = Ti.UI.createWindow({
        title : 'Product',
    });
    masterContainerWindow.add(masterView);

    //create detail view container
    var detailContainerWindow = Ti.UI.createWindow({
        title : 'Product Details'
    });
    detailContainerWindow.add(detailView);

    //create iOS specific NavGroup UI
    var navGroup = Ti.UI.iPhone.createNavigationGroup({
        window : masterContainerWindow
    });
    self.add(navGroup);

    //add behavior for master view
    masterView.addEventListener('itemSelected', function(e) {
        detailView.fireEvent('itemSelected', e);
        navGroup.open(detailContainerWindow);
    });

masterContainerWindow.open(); 
```

MasterView.js

```
//Master View Component Constructor
function MasterView() {
    //create object instance, parasitic subclass of Observable
    var self = Ti.UI.createView({
        backgroundColor:'white'
    });

    //some dummy data for our table view
    var tableData = [
        {title:'Apples', price:'1.25', hasChild:true, color: '#000'},
        {title:'Grapes', price:'1.50', hasChild:true, color: '#000'},
        {title:'Oranges', price:'2.50', hasChild:true, color: '#000'},
        {title:'Bananas', price:'1.50', hasChild:true, color: '#000'},
        {title:'Pears', price:'1.40', hasChild:true, color: '#000'},
        {title:'Kiwis', price:'1.00', hasChild:true, color: '#000'}
    ];

    var table = Ti.UI.createTableView({
        data:tableData
    });
    self.add(table);

    //add behavior
    table.addEventListener('click', function(e) {
        self.fireEvent('itemSelected', {
            name:e.rowData.title,
            price:e.rowData.price
        });
    });

    return self;
};

module.exports = MasterView; 
```

DetailView.js

```
function DetailView() {
    var self = Ti.UI.createView();

    var lbl = Ti.UI.createLabel({
        text : 'Please select an item',
        height : 'auto',
        width : 'auto',
        color : '#000'
    });
    self.add(lbl);

    self.addEventListener('itemSelected', function(e) {
        lbl.text = e.name + ': $' + e.price;
    });

    var btn = Ti.UI.createButton({
        text : 'Close Me'
    });

    btn.addEventListener('click',function(){
        //Do Opertation
        //Close Detail View
    });

    self.add(btn);
    return self;
};

module.exports = DetailView; 
```

在 detailView 上，我添加了一个名为“btn”的按钮，该按钮也有一个 eventListener。我想使用此按钮关闭详细视图。请指教。谢谢并恭祝安康

阿比舍克·斯里坎特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T08:45:07.620

我为 ApplicationWindow 上的 detailView 创建了一个自定义 EventListener，在单击按钮时触发了该事件。使用 navGroup 的 close 事件传递 detailContainerWindow。

应用程序窗口.js

```
detailView.addEventListener('closeItem', function(e) {
            Ti.API.info('event called');
            navGroup.close(detailContainerWindow);

        }); 
```

DetailView.js

```
btn.addEventListener('click', function(e) {
            self.fireEvent('closeItem', e);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T06:23:12.300

使用detailContainerWindow 的`android:back`事件或`close`事件。

```
btn.addEventlistner('click',function(e){
    // your code
    // window close for `close` event or manually fire `android:back`

}); 
```

这将打开您的 masterContainerWindow。

希望这可以解决您的问题。

# objective-c - cocos2d 在不同目标上按顺序运行序列

> ID：11035114
> 
> 赞同：2
> 
> 时间：2012-06-14T14:20:37.430
> 
> 标签：objective-c, cocos2d-iphone

所以，我有一个基本的游戏场景：

一些单位靠近敌方单位，发射弹丸，然后调整敌方单位的生命。我的问题是我不确定如何安排这三个事件一个接一个地运行。如果所有这些操作都在同一个目标上完成，那么这将非常容易，但是有两个不同的目标。

这样做的最佳方法是什么？

代码如下所示：

```
Unit* unit = [self getActiveUnit];
Unit* enemy = [self getEnemyInRange:unit];

CGpoint A = unit.sprite.position;
CGPoint B = [self getPositionClose:enemy for:unit];

CCSequence* unitMove = [self generateUnitMoveFrom:A to:B];

Projectile* proj = [self generateProjectile];
CCSequence* projMove = [self generateProjMoveFrom:A to:B];

CCSequence* attackDone = [self generateAttackDoneFor:unit enemy:enemy];

// This is the part that i don't know how to do
// Execute these in order and sequentially, not at the same time
[unit.sprite runAction:unitMove];
[proj.sprite runAction:projMove];
[proj.sprite runAction:removeSprite];
[self runAction:attackDone]; 
```

做到这一点的最佳方法是什么？即使使用 CCActionManager 它似乎仍然相当复杂，因为我认为我必须在所有这些操作之间添加一个额外的回调才能恢复下一个目标的预定操作。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T14:29:06.530

我会尝试使用`CCSequence`

```
[self runAction:[CCSequence actions:
  [CCCallFuncO actionWithTarget:unit.sprite selector:@selector(runAction:) object:unitMove],
  [CCCallFuncO actionWithTarget:proj.sprite selector:@selector(runAction:) object:projMove],
  [CCCallFuncO actionWithTarget:proj.sprite selector:@selector(runAction:) object:removeSprite],
  [CCCallFunc actionWithTarget:self selector:@selector(attackDone)],
                     nil]]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-13T07:25:26.090

您可能需要此代码来运行 Multiple `CCAction`（**每个操作针对不同的 CCNode/CCSprite/...**）；但是**按顺序**开始！

```
CCMoveBy *moveUpAction = CCMoveBy::create(0.5,ccp(0,400));
CCMoveBy *moveRightAction = CCMoveBy::create(1,ccp(300,0));
CCMoveBy *moveDownAction = CCMoveBy::create(1,ccp(0,-400));

CCTargetedAction *mm = CCTargetedAction::create(someNode_1,moveUpAction);
CCTargetedAction *rr = CCTargetedAction::create(someNode_2,moveRightAction);
CCTargetedAction *dd = CCTargetedAction::create(someNode_3,moveDownAction);

// Here we first run 'moveUpAction' on someNode_1.
// After finishing that Action we start 'moveRightAction' on someNode_2
// After finishing the Action, we start ...
CCSequence *targetedSeq = CCSequence::create(mm,rr,dd,NULL);
whateverNode->runAction(targetedSeq ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T15:37:58.940

you can create an array of your actions, then scedule some method to call them one by one. For example

```
- (void) playManyActionsOneByOne
{
    // create some actions and add them to the
    // mutable array m_actionsContainer

    [self runNextActionInArray];
}

- (void) runNexActionInArray
{
    if( [m_actionsContainer count > 0] )
    {
        id nextAction = [m_actionsContainer objectAtIndex:0];
        id callback = [CCCallFunc actionWithTarget: self selector: @selector(runNextActionInArray)];
        id sequence = [CCSequence actionOne: nextActon two: callback];
        [neededNode runAction: sequence];

        [m_actionsContainer removeObjectAtIndex:0];
    }    
} 
```

it will run actions one by one and you even can add actions to your array while other actions aren't done yet.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T14:35:37.510

同意詹姆斯。另外，如果您想在其他操作运行之前多花一点时间，您可以添加延迟...

> [CCDelayTime actionWithDuration:0.5];

# linux - 将参数传递给内核模块

> ID：11035119
> 
> 赞同：4
> 
> 时间：2012-06-14T14:20:45.530
> 
> 标签：linux, linux-kernel, parameter-passing, kernel-module

我有一些自定义硬件使用名为`foo.ko`. 这必须`insmod`来自Linux内核。

有没有办法在 insmod 期间将参数传递给内核模块，例如：

```
insmod foo.ko <parameter> 
```

?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T14:33:29.523

像这样命名参数：

```
insmod foo.ko mystring="bebop" mybyte=255 
```

[从将命令行参数传递到模块：Linux 内核模块编程指南](http://tldp.org/LDP/lkmpg/2.4/html/x354.htm)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-20T11:10:46.523

您可以通过这种方式在加载时设置任何需要的参数：

```
insmod param_name=param_value 
```

并以这种方式在您的源代码中设置它：

```
module_param(param_name, param_type, permission); 
```

支持的参数类型：

```
int -> integer value
charp -> character pointer
.... 
```

权限就像一个面具`S_IRUGO`，你可能需要检查`moduleparam.h`。

# asp.net - 字典在数据绑定期间表现异常

> ID：11035121
> 
> 赞同：0
> 
> 时间：2012-06-14T14:20:57.403
> 
> 标签：asp.net, multithreading, caching, data-binding, dictionary

我试图做一些数据访问优化，但我遇到了一个字典似乎以一种不可能的方式不同步的情况，除非我在不知不觉中进入了多线程情况。

一列 GridLabels 绑定到一个进行数据访问的属性——这有点贵。但是，多行最终会发出相同的调用，所以我应该能够通过做一些缓存来解决任何问题。

但是，在应用程序的其他地方，同样的代码以不适合缓存的方式调用，我需要一种方法来按需启用缓存。所以我的数据绑定代码如下所示：

```
 OrderLabelAPI.MultiSyringeCacheEnabled = True
    Me.GridLabels.DataBind()
    OrderLabelAPI.MultiSyringeCacheEnabled = False 
```

发生缓存的昂贵调用如下所示：

```
 Private Shared MultiSyringeCache As New Dictionary(Of Integer, Boolean)
    Private Shared m_MultiSyringeCacheEnabled As Boolean = False

    Public Shared Function IsMultiSyringe(orderLabelID As Integer) As Boolean
        If m_MultiSyringeCacheEnabled Then
            'Since this can get hit a lot, we cache the values into a dictionary. Obviously,
            'it goes away after each request. And the cache is disabled by default.
            If Not MultiSyringeCache.ContainsKey(orderLabelID) Then
                MultiSyringeCache.Add(orderLabelID, DoIsMultiSyringe(orderLabelID))
            End If

            Return MultiSyringeCache(orderLabelID)
        Else
            Return DoIsMultiSyringe(orderLabelID)
        End If
    End Function 
```

这是 MultiSyringeCacheEnabled 属性：

```
 Public Shared Property MultiSyringeCacheEnabled As Boolean
        Get
            Return m_MultiSyringeCacheEnabled
        End Get
        Set(value As Boolean)
            ClearMultiSyringeCache()
            m_MultiSyringeCacheEnabled = value
        End Set
    End Property 
```

非常非常罕见（不可重现的罕见......）我会得到以下异常：字典中不存在给定的键。

如果您仔细查看缓存代码，这是不可能的，因为它所做的第一件事就是确保密钥存在。如果 DoIsMultiSyringe 篡改了字典（明确地或通过设置 MultiSyringeCacheEnabled），这也可能导致问题，有一段时间我认为这一定是罪魁祸首。但事实并非如此。我已经非常仔细地检查过代码好几次了。我会把它贴在这里，但它会进入比合适的更深的对象图。

所以。我的问题是，datagridview 数据绑定实际上是否会陷入某种导致字典被占用的滑稽多线程情况？我是否缺少共享成员的某些方面？

我实际上已经从项目中删除了这段代码，但我想了解我缺少什么。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T15:04:21.220

由于这是 ASP.NET，因此您有一个隐式的多线程方案。您正在使用共享变量（请参阅[What is the use of a shared variable in VB.NET?](https://stackoverflow.com/questions/613998/what-is-the-use-of-shared-variable-in-vb-net)），它（正如关键字所暗示的）跨多个线程（来自访问该站点的不同人员）“共享”。

您可以很容易地遇到一个访问者的线程到达这里的场景：

```
'Since this can get hit a lot, we cache the values into a dictionary. Obviously,
'it goes away after each request. And the cache is disabled by default.
If Not MultiSyringeCache.ContainsKey(orderLabelID) Then
    MultiSyringeCache.Add(orderLabelID, DoIsMultiSyringe(orderLabelID))
End If

' My thread is right here, when you visit the site

Return MultiSyringeCache(orderLabelID) 
```

然后你的线程进来并取代我的线程：

```
Set(value As Boolean)
    ClearMultiSyringeCache()
    m_MultiSyringeCacheEnabled = value
End Set 
```

然后我的线程将在您清除字典后尝试从字典中读取一个值。

也就是说，我不确定您期望从每次请求中清除的“缓存”中获得什么性能优势。看起来你不应该简单地让这个变量共享——让它成为一个实例变量——并且任何访问它的用户请求都会有他们自己的副本。

# html - 为什么将移动设备从横向旋转到纵向后网页会放大？

> ID：11035122
> 
> 赞同：6
> 
> 时间：2012-06-14T14:21:06.230
> 
> 标签：html, mobile, viewport, device-orientation

我有一个针对在手机中查看而优化的网页。

我正在使用检测设备宽度并将视口宽度设置为该值的`viewport`元标记。`<meta name = "viewport" content = "width = device-width">`这意味着我的网页可以在移动浏览器中正确加载，而不是看起来可笑地缩小。

当我在我的手机（三星 Galaxy S2）上以纵向模式加载页面时，它看起来很好，我旋转到横向，它看起来很好，**但是如果我再次旋转回纵向，页面会稍微放大**。我要么必须缩小，要么水平滚动。

**为什么我的移动浏览器会这样做，我该如何阻止它发生？**

有关正在发生的事情的视觉帮助，请参见屏幕截图。

![在此处输入图像描述](../Images/2e4aa272280013e04124dc06a08b3739.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-07-11T18:03:59.930

似乎即使在方向更改后触发了 resizeEvent，设备在放大以填充更宽的横向视口后仍然无法重置缩放。

我必须执行以下两项操作才能使显示器在方向更改后正确调整大小：

(1) 设置 minimum-scale=1。

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, 
minimum-scale=1.0"> 
```

(2) 在 CSS 文件中：

```
body {
 height: 100vh; 
 height: -webkit-fill-available; 
 min-height: 100vh; /* Fallback for browsers that do not support Custom Properties */
 min-height: -webkit-fill-available; 
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-03T10:06:04.550

这就是你需要的

```
<meta content='width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;' name='viewport' />

<meta name="viewport" content="width=device-width" /> 
```

# asp.net - .net 日历控件中的错误

> ID：11035131
> 
> 赞同：0
> 
> 时间：2012-06-14T14:21:21.160
> 
> 标签：asp.net, calendar

我有以下代码在日历上显示事件

```
Private scheduleData As New Dictionary(Of DateTime, String)(5)

    Protected Sub Page_Load(sender As Object, e As System.EventArgs) Handles Me.Load

        scheduleData.Add(New DateTime(2011, 1, 9), "Vacation Day")
        scheduleData.Add(New DateTime(2011, 1, 18), "Budget planning meeting")
        scheduleData.Add(New DateTime(2011, 2, 5), "Conference call")
        scheduleData.Add(New DateTime(2011, 2, 10), "Meet with art director")
        scheduleData.Add(New DateTime(2011, 2, 15), "Vacation day")
        'scheduleData.Add(New DateTime(2011, 2, 15), "Go Shopping")
        Calendar1.Caption = "Personal Schedule"
        Calendar1.FirstDayOfWeek = System.Web.UI.WebControls.FirstDayOfWeek.Sunday
        Calendar1.NextPrevFormat = NextPrevFormat.ShortMonth
        Calendar1.TitleFormat = TitleFormat.MonthYear
        Calendar1.ShowGridLines = True
        Calendar1.DayStyle.HorizontalAlign = HorizontalAlign.Left
        Calendar1.DayStyle.VerticalAlign = VerticalAlign.Top
        Calendar1.DayStyle.Height = New Unit(75)
        Calendar1.DayStyle.Width = New Unit(100)
        Calendar1.OtherMonthDayStyle.BackColor = System.Drawing.Color.Cornsilk
        Calendar1.TodaysDate = New DateTime(2011, 1, 1)
        Calendar1.VisibleDate = Calendar1.TodaysDate
    End Sub 
```

和日期渲染处理程序

```
Protected Sub Calendar1_DayRender(sender As Object, e As System.Web.UI.WebControls.DayRenderEventArgs) Handles Calendar1.DayRender
        If scheduleData.ContainsKey(e.Day.[Date]) Then
            Dim lit As New Literal()
            lit.Text = "<br />"
            e.Cell.Controls.Add(lit)
            Dim lbl As New Label()
            lbl.Text = DirectCast(scheduleData(e.Day.[Date]), String)
            lbl.Font.Size = New FontUnit(FontSize.Small)
            e.Cell.Controls.Add(lbl)
        End If

    End Sub 
```

但是，如果我一天没有超过一个事件，但如果一天中有多个事件，我会收到下面的错误，即如果显示为 'scheduleData.Add(New DateTime(2011, 2, 15) 的行), "去购物") 未注释

```
An item with the same key has already been added.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.ArgumentException: An item with the same key has already been added. 
```

请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:31:50.497

使用字典，您不能有两个具有相同键的条目。字典基于具有唯一键的 [Key, Value] 概念。

把它想象成韦氏词典。您不会定义同一个词（键）的两个不同实例，而是在该词下有多个定义（值）。

我建议添加一个时间元素，或者您可能必须使用不同的数据结构。

# java - 在 Windows 和 Android 之间传递对象/哪个序列化程序可以做到这一点？

> ID：11035133
> 
> 赞同：0
> 
> 时间：2012-06-14T14:21:22.970
> 
> 标签：java, android, windows, serialization, xml-serialization

我正在生成几个大型哈希图并将它们放入 Windows 上的 1 个对象中（使用 Java）。现在我想通过将其作为资产将此对象转移到我的 Android 应用程序。

我曾尝试使用 Java 序列化，但是当我在我的应用程序中解压缩对象时，所有哈希图都有空值。

我的自定义类都实现了 Serialzable 并包含基本类型或其他自定义类。（包含基本类型或其他自定义类等，链确实结束，它不是一个圆圈）。

有谁知道可能是什么问题？

或者有谁知道支持扁平化私有字段而没有 getter 和 setter 的 XMLSerializer（或其他）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T16:27:49.683

[Google Protocol Buffers](http://code.google.com/p/protobuf/)可能是当今 Android 上最高效、最方便的序列化/反序列化解决方案，并且可以连接到多种语言平台。

由于这里提到的替代方案是 java 序列化和 XML，我建议您查看 FAQ 中回答[Why use protobuf](https://developers.google.com/protocol-buffers/docs/javatutorial?hl=fr)的章节。

[本文](http://www.4feets.com/2009/08/serializing-data-json-vs-protocol-buffers/)提供了一个在 android 上使用 protobuf 的小例子（以及一种可疑的基准比较）。

# c# - 使用 C# 在 Windows 开始菜单搜索中自定义搜索选项卡

> ID：11035139
> 
> 赞同：23
> 
> 时间：2012-06-14T14:21:41.127
> 
> 标签：c#, wpf, startmenu

我很想知道如何做与下面列出的应用程序相同的事情： [开始菜单计算器](http://robotification.com/start-menu-calculator/)

我想知道如何在开始菜单搜索中创建自定义选项卡，然后使用我的 WPF 应用程序处理它。它应该只在我的应用程序运行之前启用。（就像[计算器一样](http://robotification.com/start-menu-calculator/)）

我阅读了一些有关[**windows API 代码包**](http://archive.msdn.microsoft.com/WindowsAPICodePack/)的内容并下载了它，但我不知道如何使用它。我搜索了它，但没有找到任何东西。（如果您知道如何使用 Windows API 代码包执行此操作，请编写一个示例来解释如何在 C# 中执行此操作）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T13:17:38.667

*   主 exe“开始菜单 Calculator.exe”将 Windows 挂钩（使用[SetWindowsHookEx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644990%28v=vs.85%29.aspx)）安装到 explorer.exe。该钩子在 SBLib.dll 中像往常一样实现，然后注入到 Windows Explorer 的内存空间中。

*   这个钩子搜索属于搜索框的窗口句柄。在此处查看有关此问题的讨论： [如何在 Windows 搜索文本框中获得“句柄”？](http://social.msdn.microsoft.com/Forums/en-US/vbgeneral/thread/88584dfe-3bf2-4f00-a821-4301c470cf79/)并且可能是搜索框窗口的子类（如果你突然终止“开始菜单计算器.exe”进程，它也会使 Windows 资源管理器崩溃......这有点证实了这一点）

*   然后它对按键做出反应，我想它会破坏结果窗口。在Windows的层次结构中，我认为它是一个名为“桌面搜索打开视图”的窗口，您可以在“开始菜单”下使用SPY++访问它，除了上面msdn论坛中提到的窗口。

所以，这个漂亮的应用程序背后没有漂亮的 API。大量的黑客攻击 :-)

然而，我认为，使用记录在案的行为，与搜索框进行某种程度的集成是可能的。我没有进一步挖掘，但在 Windows 中存在联合搜索的概念（[Windows 7 Federated Search](http://windowsteamblog.com/windows/b/developers/archive/2010/04/18/windows-7-federated-search.aspx)）。我不知道这是否能够立即对用户输入的内容做出反应......

附带说明一下，如果您还在寻找一种从 C# 运行 javascript 代码的方法，那么这里有一个关于 SO 的问题说明了一切：[parse and execute JS by C#](https://stackoverflow.com/questions/4744105/parse-and-execute-js-by-c-sharp)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T03:46:46.477

在制作开始菜单计算器时，我最初尝试使用联合搜索和托管 (.NET) 代码，但是您不能集成到开始菜单中，只能集成到 shell 搜索（用于基于 Web 服务的搜索，它允许您根据搜索返回自定义结果细绳）。问题是联合搜索的结构使得所有搜索数据都被预先索引，所以为了让计算器工作，我必须预先索引每个可能的计算！这一切都以这种方式工作的原因是确保单击开始菜单始终快速且响应迅速（您不希望每次在 shell 中按 start 时都会调用 Web 服务）。

我最终雇用了一个人来编写一个本地 Windows 应用程序，该应用程序将一个 IE 控件放入开始菜单搜索区域并将搜索到的文本与源一起传递。所有的视觉内容都只是 css，看起来像开始菜单渲染和在 javascript 中处理的计算。

所以是的，有点破解，但它似乎有效，到目前为止我还没有/听说过任何崩溃问题。

# ruby-on-rails - RSpec Mocking Mailer - 第二次调用时失败

> ID：11035140
> 
> 赞同：0
> 
> 时间：2012-06-14T14:21:42.880
> 
> 标签：ruby-on-rails, rspec, mocking, actionmailer

我正在测试一些涉及电子邮件的方法，并尝试使用模拟邮件对象。我显然走错了路，因为测试第一次有效，但随后同样的测试失败了。如果有人能解释这里发生了什么，我将不胜感激。谢谢。

```
describe SentMessage do
  before(:each) do
    Notifier ||= mock('Notifier', :send_generic => true)
  end    
    it "Sends an email" do
      Notifier.should_receive(:send_generic).with(['a@contact.com'], 'test')
      Notifier.send_generic(['a@contact.com'], 'test').should_not be_nil
    end

    it "Sends an email" do
      Notifier.should_receive(:send_generic).with(['a@contact.com'], 'test')
      Notifier.send_generic(['a@contact.com'], 'test').should_not be_nil
    end
end 
```

结果：

```
Failures:
1) SentMessage Sends an email
   Failure/Error: Notifier.send_generic(['a@contact.com'], 'test').should_not be_nil
    expected: not nil
        got: nil
 # ./spec/models/test.rb:14:in `block (2 levels) in <top (required)>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T17:39:38.967

Rspec 为模拟和期望插入设置/拆卸的东西。这确实可以验证是否满足`should_receive`期望并清除对象中设置的模拟，这些模拟超出了单个规范。例如，如果您在一个规范中存根 User.find，您不会期望该存根存在于另一个规范中。

因此，在第一个规范结束时，rspec 正在删除每个之前的存根设置。因为您正在执行 ||=，所以不会重新创建通知程序，也不会重新创建存根。这反过来意味着当您在第二个规范中调用 should_receive 时，您正在设置一个新的存根。由于这个新存根没有指定的返回值，所以返回 nil。

# javascript - 如何删除具有唯一值的行，保留具有重复值的行？

> ID：11035142
> 
> 赞同：0
> 
> 时间：2012-06-14T14:21:45.323
> 
> 标签：javascript, excel, google-apps-script, google-sheets

我有一个调查电子表格，我需要在其中了解特定用户随时间的变化情况。因此，我需要忽略特定列中具有唯一值的所有行。数据如下所示：

```
Response Date           Response_ID Account_ID  Q.1
10/20/2011 12:03:43 PM  23655956    1168161     8
10/20/2011 03:52:57 PM  23660161    1168152     0
10/21/2011 10:55:54 AM  23672903    1166121     7
10/23/2011 04:28:16 PM  23694471    1144756     9
10/25/2011 06:30:52 AM  23732674    1167449     7
10/25/2011 07:52:28 AM  23734597    1087618     5 
```

我在 Excel VBA 中找到了一种方法：

```
Sub Del_Unique()
    Application.ScreenUpdating = False
    Columns("B:B").Insert Shift:=xlToRight
    Columns("A:A").Copy Destination:=Columns("B:B")
    i = Application.CountIf(Range("A:A"), "<>") + 50
    If i > 65536 Then i = 65536
    Do
        If Application.CountIf(Range("B:B"), Range("A" & i)) = 1 Then
            Rows(i).Delete
        End If
        i = i - 1
    Loop Until i = 0
    Columns("B:B").Delete
    Application.ScreenUpdating = True
End Sub 
```

我想在 Google 电子表格中使用无需更改的脚本来完成此操作。我能得到的最接近的是从该范围内检索所有重复的用户 ID，但不能将其与该行相关联。该代码如下：

```
function findDuplicatesInSelection() {
  var activeRange = SpreadsheetApp.getActiveRange();
  var values = activeRange.getValues();

  // values that appear at least once
  var once = {};

  // values that appear at least twice
  var twice = {};

  // values that appear at least twice, stored in a pretty fashion!
  var final = [];

  for (var i = 0; i < values.length; i++) {
     var inner = values[i];
    for (var j = 0; j < inner.length; j++) {
      var cell = inner[j];
      if (cell == "") continue;
      if (once.hasOwnProperty(cell)) {
        if (!twice.hasOwnProperty(cell)) {
          final.push(cell);
        }
        twice[cell] = 1;
      } else {
        once[cell] = 1;
      }
    }
  }

  if (final.length == 0) {
    Browser.msgBox("No duplicates found");
  } else {
    Browser.msgBox("Duplicates are: " + final);
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T21:14:23.910

我建议去做一些简单的事情。

1.  创建一个标记重复项的简短脚本
2.  将公式直接写入单元格“=flagDuplicate(C2,C$2:C$10)”
3.  将论坛复制到列下
4.  使用电子表格的内置查询公式提取您需要的信息
    "=QUERY(A1:E10; "SELECT * WHERE E = TRUE"; 1)"

这是一个标记重复项的简单函数

```
function flagDuplicate(value, array) {
  var duplicateCounter = 0;

   for (var i=0; i<array.length; i++){
     if (array[i] == value){           // I avoid === in Spreadsheet functions
       duplicateCounter++;
      }
   }

   if (duplicateCounter > 1){
     return true;
   }else{
     return false;
   }
} 
```

大桌子上的太多功能会减慢速度。如果出现问题，您始终可以复制并“仅粘贴值”——这将保留信息但删除功能。

祝你好运。

*注意：当我对此进行测试时，我注意到电子表格可能需要一段时间才能识别新的自定义函数（给出错误，例如找不到函数 FLAGDUPLICATE）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T23:14:52.210

您也可以使用数组一次处理整个工作表：

```
function removeUnique(){
  var col = 2 ; // choose the column you want to check for unique elements
  var sh = SpreadsheetApp.getActiveSheet();
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var data=ss.getDataRange().getValues();// get all data
    data.sort(function(x,y){
//  var xp = Number(x[col]);// use these to sort on numeric values
//  var yp = Number(y[col]);
  var xp = x[col];// use these for non-numeric values
  var yp = y[col];
  Logger.log(xp+'   '+yp); // just to check the sort is OK
  return xp == yp ? 0 : xp < yp ? -1 : 1;// sort on column col numeric ascending
});
  var cc=0;
  var newdata = new Array();
  for(nn=0;nn<data.length-1;++nn){
    if(data[nn+1][col]==data[nn][col]||cc>0){
    newdata.push(data[nn]);
    ++cc;
    if(cc>1){cc=0}}
    }
  ss.getDataRange().clearContent();  // clear the sheet
  sh.getRange(1,1,newdata.length,newdata[0].length).setValues(newdata);// paste new values sorted and without unique elements
  } 
```

编辑：这是保留所有重复项的版本（工作版本）

```
function removeUnique(){
  var col = 2 ; // choose the column you want to check for unique elements
  var sh = SpreadsheetApp.getActiveSheet();
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var data=ss.getDataRange().getValues();// get all data
    data.sort(function(x,y){
//  var xp = Number(x[col]);// use these to sort on numeric values
//  var yp = Number(y[col]);
  var xp = x[col];// use these for non-numeric values
  var yp = y[col];
  Logger.log(xp+'   '+yp); // just to check the sort is OK
  return xp == yp ? 0 : xp < yp ? -1 : 1;// sort on column col numeric ascending
});
  var newdata = new Array();
  for(nn=0;nn<data.length-1;++nn){
    if(data[nn+1][col]==data[nn][col]){
    newdata.push(data[nn]);
    }
    }
    if(data[nn-1][col]==data[nn][col]){newdata.push(data[nn])}
  ss.getDataRange().clearContent();  // clear the sheet
  sh.getRange(1,1,newdata.length,newdata[0].length).setValues(newdata);// paste new values sorted and without unique elements
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T17:35:10.380

这可能不是很有效，但我认为这是你想要的：

```
var ar=[1,3,3,5,6,8,6,6];

console.log("Before:");
display(ar);//1 3 3 5 6 8 6 6
var index=[];
var ar2=[];
for(var a=0;a<ar.length;a++)
{
    var duplicate=false;
    for(var b=0;b<ar.length;b++)
    {
        if(ar[a]==ar[b]&&a!=b)
        {
            duplicate=true;
        }
    }
    if(!duplicate)
    {
        index.push(a);
    }
}
for(var a=0;a<index.length;a++)
{
    ar[index[a]]=null;
}
for(var a=0;a<ar.length;a++)
{
    if(ar[a]!=null)ar2.push(ar[a]);
}
console.log("After:");
display(ar2);//3 3 6 6 6

function display(x)
{
    for(var a=0;a<x.length;a++)console.log(x[a]);
} 
```

小提琴：http: [//jsfiddle.net/mageek/6AGQ4/](http://jsfiddle.net/mageek/6AGQ4/)

以及一个作为函数的较短版本：

```
var ar=[1,3,3,5,6,8,6,6];

function removeUnique(x)
{
    var index=[];
    var ar2=[];
    for(var a=0;a<ar.length;a++)
    {
        var duplicate=0;
        for(var b=0;b<ar.length;b++)if(ar[a]==ar[b]&&a!=b)duplicate=1;
        if(!duplicate)index.push(a);
    }
    for(var a=0;a<index.length;a++)ar[index[a]]=null;
    for(var a=0;a<ar.length;a++)if(ar[a]!=null)ar2.push(ar[a]);
    return x;
}

ar=removeUnique(ar); 
```

小提琴：http: [//jsfiddle.net/mageek/6AGQ4/2](http://jsfiddle.net/mageek/6AGQ4/2)

# xamarin.ios - System.ExecutionEngineException：尝试 JIT 编译方法“System.Linq.Enumerable：

> ID：11035143
> 
> 赞同：1
> 
> 时间：2012-06-14T14:21:45.623
> 
> 标签：xamarin.ios

这是我的代码

```
public int GetUsersSqlCount()
{
    // Here i get the Error
    return this.GetUsersSql().Count();
}

public IEnumerable<CsUser> GetUsersSql()
{       
    return (from x in this._storage.CsUsers
           join y in this._storage.CeMitarbs on x.MitNr equals y.MitNr
           select x).OrderBy(x => x.KurzZch);
} 
```

我收到以下错误：

```
Unhandled Exception: System.ExecutionEngineException: Attempting to JIT compile method 'System.Linq.Enumerable:<ToLookup`2>m__5A<Genesis.DataAccess.Schema.Mobile.V1.Wrapper.CeMitarb, System.Nullable`1<int>> (Genesis.DataAccess.Schema.Mobile.V1.Wrapper.CeMitarb)' while running with --aot-only.

  at System.Linq.Enumerable.ToLookup[CeMitarb,Nullable`1,CeMitarb] (IEnumerable`1 source, System.Func`2 keySelector, System.Func`2 elementSelector, IEqualityComparer`1 comparer) [0x00079] in /Developer/MonoTouch/Source/mono/mcs/class/System.Core/System.Linq/Enumerable.cs:2966 
  at System.Linq.Enumerable.ToLookup[CeMitarb,Nullable`1] (IEnumerable`1 source, System.Func`2 keySelector, IEqualityComparer`1 comparer) [0x00000] in /Developer/MonoTouch/Source/mono/mcs/class/System.Core/System.Linq/Enumerable.cs:2934 
  at System.Linq.Enumerable+<CreateJoinIterator>c__Iterator18`4[Genesis.DataAccess.Schema.Mobile.V1.Wrapper.CsUser,Genesis.DataAccess.Schema.Mobile.V1.Wrapper.CeMitarb,System.Nullable`1[System.Int32],Genesis.DataAccess.Schema.Mobile.V1.Wrapper.CsUser].MoveNext () [0x00023] in /Developer/MonoTouch/Source/mono/mcs/class/System.Core/System.Linq/Enumerable.cs:1157 
  at System.Collections.Generic.List`1[Genesis.DataAccess.Schema.Mobile.V1.Wrapper.CsUser].AddEnumerable (IEnumerable`1 enumerable) [0x00000] in <filename unknown>:0 
  at System.Collections.Generic.List`1[Genesis.DataAccess.Schema.Mobile.V1.Wrapper.CsUser]..ctor (IEnumerable`1 collection) [0x00000] in <filename unknown>:0 
  at System.Linq.Enumerable.ToArray[CsUser] (IEnumerable`1 source) [0x00000] in <filename unknown>:0 
  at System.Linq.QuickSort`1[Genesis.DataAccess.Schema.Mobile.V1.Wrapper.CsUser]..ctor (IEnumerable`1 source, System.Linq.SortContext`1 context) [0x00000] in <filename unknown>:0 
  at System.Linq.QuickSort`1+<Sort>c__Iterator2F[Genesis.DataAccess.Schema.Mobile.V1.Wrapper.CsUser].MoveNext () [0x00000] in <filename unknown>:0 
  at System.Linq.Enumerable.Count[CsUser] (IEnumerable`1 source) [0x00000] in <filename unknown>:0 
  at CSMobile.Logic.Forms.Login_Dal.GetUsersSqlCount () [0x00000] in /Volumes/Mobile2011/Mobile 2011/trunk/WinCE/CSMobile/CSMobile.Logic/Forms/Login.Dal.cs:38 
  at CSMobile.Logic.Forms.Login_Logic.GetUsers () [0x0001f] in /Volumes/Mobile2011/Mobile 2011/trunk/WinCE/CSMobile/CSMobile.Logic/Forms/Login.Logic.cs:198 
  at CSMobile.Logic.Forms.Login_Logic.Anmelden2 (Int32 selectedProduct) [0x00050] in /Volumes/Mobile2011/Mobile 2011/trunk/WinCE/CSMobile/CSMobile.Logic/Forms/Login.Logic.cs:416 
  at CSMobile.UI.Login.Logic_LoginStepCompleted (Login_StepResult result) [0x0003e] in /Volumes/Mobile2011/Mobile 2011/trunk/IOS/CSMobile/CSMobile.UI/Forms/Login.cs:325 
  at CSMobile.Logic.Forms.Login_Logic.Anmelden1 () [0x00084] in /Volumes/Mobile2011/Mobile 2011/trunk/WinCE/CSMobile/CSMobile.Logic/Forms/Login.Logic.cs:364 
  at CSMobile.UI.Login.StartLogin () [0x00000] in /Volumes/Mobile2011/Mobile 2011/trunk/IOS/CSMobile/CSMobile.UI/Forms/Login.cs:75 
  at CSMobile.UI.Login.Pad_Start_TouchUpInside (MonoTouch.Foundation.NSObject sender) [0x00000] in /Volumes/Mobile2011/Mobile 2011/trunk/IOS/CSMobile/CSMobile.UI/Forms/Login.cs:235 
  at MonoTouch.UIKit.UIApplication.Main (System.String[] args, System.String principalClassName, System.String delegateClassName) [0x00042] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIApplication.cs:29 
  at MonoTouch.UIKit.UIApplication.Main (System.String[] args) [0x00000] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIApplication.cs:34 
  at CSMobile.UI.Application.Main (System.String[] args) [0x0000a] in /Volumes/Mobile2011/Mobile 2011/trunk/IOS/CSMobile/CSMobile.UI/Main.cs:18 
[ERROR] FATAL UNHANDLED EXCEPTION: System.ExecutionEngineException: Attempting to JIT compile method 'System.Linq.Enumerable:<ToLookup`2>m__5A<Genesis.DataAccess.Schema.Mobile.V1.Wrapper.CeMitarb, System.Nullable`1<int>> (Genesis.DataAccess.Schema.Mobile.V1.Wrapper.CeMitarb)' while running with --aot-only. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T17:26:21.963

我认为这里的限制实际上是由于通用虚拟方法 - [http://docs.xamarin.com/ios/about/limitations#Generic_Virtual_Methods](http://docs.xamarin.com/ios/about/limitations#Generic_Virtual_Methods)

邮件列表上有一个非常相似的问题的讨论：

*   [http://monotouch.2284126.n4.nabble.com/LINQ-JIT-error-again-td3800970.html;cid=1338984263803-35#a3800169](http://monotouch.2284126.n4.nabble.com/LINQ-JIT-error-again-td3800970.html;cid=1338984263803-35#a3800169)

听起来那个线程没有找到解决方案

可能值得直接联系 Xamarin 支持。[http://bugzilla.xamarin.com/](http://bugzilla.xamarin.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T14:30:14.843

由于 AOT 编译，MonoTouch 上的泛型有点奇怪。iOS 不允许真正的运行时/JIT，因此它必须提前编译所有内容。

在这种特殊情况下，您返回的方法`IEnumerable<CsUser>`很可能是罪魁祸首。[通用接口会导致问题](http://www.mono-project.com/AOT#Limitation%3a_Generic_Interface_Instantiation)。尝试将您的返回类型更改为一个`List<CsUser>`或任何其他实现的具体类`IEnumerable<CsUser>`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-15T10:52:31.677

目前我不知道 Xamarin 的便捷解决方案。然而，Unity 3D 有这样的解决方案。

您可以尝试[LINQ to iOS](http://linqtoios.pgames.guru/)。它是 LINQ to Objects 扩展方法的自定义实现，可在 iOS 上运行而不会出现 JIT 编译错误。如果您使用的是 Xamarin，您可以尝试将 .dll 从 LINQ 获取到 iOS 并在您的项目中使用它。毕竟，Xamarin 和 Unity 都使用 Mono 编译器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-24T23:43:51.600

已知 OrderBy 在这种情况下会失败。这似乎已在 MonoTouch 2.10 版中得到修复，但不幸的是，如果您使用的是 Unity 之类的引擎，那么目前仅附带 2.6（截至 4.3.x）。

[https://bugzilla.xamarin.com/show_bug.cgi?id=2155#c11](https://bugzilla.xamarin.com/show_bug.cgi?id=2155#c11)

# mercurial - 当 Mercurial/TortoiseHg 图形线尾随而没有点时，这意味着什么？

> ID：11035146
> 
> 赞同：6
> 
> 时间：2012-06-14T14:21:54.907
> 
> 标签：mercurial, tortoisehg, branching-and-merging

我与其他 3 名开发人员在一个团队中工作，大部分时间我们都在匿名分支中的同一个 Mercurial 存储库上工作，并定期与默认分支合并。昨天，其他开发人员之一决定更新到以前的版本并从那里继续工作。在提交他的更改然后拉取和合并之后，我们注意到 TortoiseHg 中的图表（见下图）出现了一些我们以前从未见过的奇怪行为。基本上，我们有一些图形线不以点结尾，但只是拖尾而不会合并回任何其他分支。这在简单的英语中是什么意思？

![Mercurial/TortoiseHg 图](../Images/286d07bc53b01d9a9b27b2c62475a989.png)

更新：我倾向于“错误”，但在最新的图表中，我有一条类似的线穿过整个图表，似乎根本没有任何用途。在这里，可以在图表最底部的变更集 0 左侧以浅蓝色看到它。

![在此处输入图像描述](../Images/c6e5d8956c1f0ad38e09bcd0816b2d6e.png)

更新： hg glog 的 ASCII 输出如下所示。TortoiseHg 图在 rev 281 附近有未连接的线，但在这里看起来很好。所以……虫子？

```
@    297 277f72eb6da3
|\
| o  296 eb2505095090
| |
o |  295 7f44b8354252
| |
| o  294 b4b7e3fa683a
| |
| o    293 e2e16967987f
| |\
+---o  292 e5d13c14417e
| |
| o  291 f12a6a3fa06a
| |
| o  290 ea93c6fe6244
| |
| o  289 fbc2e750a98d
| |
| | o  288 987fd06bad0d
| | |
o | |    287 b91bd794ca84
|\ \ \
| o | |  286 063968c4a406
| |\| |
| o | |  285 ed2b17250a34
| | | |
| +---o  284 6e4bee3dbe42
| | |
| | o  283 5ff74bb8925f
| | |
| | o  282 4371e9119ca4
| | |
| | o  281 74b9630e724a
| | |
o | |  280 843d53c8f5a3
| | |
o | |    279 7280384bafb5
|\ \ \
| o | |  278 f8c7d6448dd7
| | | |
| | | o  277 ab0defa17a42
| | | |
| | | o  276 b81b3f585b61
| | | |
| | | o  275 8181738fc128
| | |/|
| | o |    274 15d1edd01930
| | |\ \
| | | o |  273 20d28e88309e
| | | | |
| | | o |  272 638202667d79
| | | | |
| | | o |  271 f5b721732919
| | | | |
| | | o |  270 3ed4dc310ef9
| | | | |
| | | o |  269 8668b447d11a
| | | | |
| | | o |  268 5da2afe6c20f
| | | | |
| | | o |  267 a0035d7fbb0a
| | | | |
| | | o |  266 7f5cdd3785ef
| | | | |
| +---o |  265 6b33fb77d690
| | |  /
| | o |  264 85c4e24470bb
| | | |
| | o |  263 d27d32f55b9b
| | | |
| | o |  262 18ade431b8c7
| | | |
| | o |    261 11f790e11e14
| | |\ \
| | | o |  260 35f8e03564d1
| | | | |
| | | | o    259 1589883b30c7
| | | | |\
| | +-----o  258 16f7379774e6
| | | | | |
| | | | | o  257 38d632954f9f
| | | | | |
| | o | | |  256 291b3bdcc278
| | | | | |
| | o | | |  255 d2f250884ede
| | | | | |
| | o | | |  254 4fb369822248
| | | | | |
| | o-----+  253 545bf895343f
| |  / / /
| | | | o  252 c967b3b86ab4
| | | | |
| | | | o  251 0afc2bc4b457
| | | | |
+-------o  250 242c8aa8ef4c
| | | | |
| | | | o  249 aea5303af4fd
| | | | |
| | | | o  248 99c0e0e3d9f2
| | | | |
| | | o |  247 d7cd0925420d
| | |/ /
| | o |  246 cb666cc77c6a
| | | |
+---o |  245 3ea6105e3d23
| | | |
| | o |  244 b18ce1b772fa
| | | |
| | o |  243 dd9a955d89ae
| | | |
o | | |  242 da037c3ef808
| | | |
o | | |  241 a5a215bacf93
| | | |
o---+ |  240 aa4bcf158ebf
| | | |
o | | |  239 c5f3455d4bda
| | | |
| | o |  238 c5b10fd90a5a
| | | |
o---+ |  237 1434f54af390
| | | |
o | | |  236 6a80392e6889
| | | |
| | o |  235 9f427af5db3e
| | | |
o-----+  234 d364e47f38f7
| | | |
o---+ |  233 7736771453e4
 / / /
| | o  232 9355db64071a
| | |
| | o  231 8e9b6642e081
| | |
| | o  230 36c80dfbbc9b
| | |
| | o    229 4aa91fa61018
| | |\
| | | o  228 b5b061782d5d
| | | |
| | | o  227 95510065ff70
| | | |
| | | o  226 5dbbe83a797f
| | | |
| | o |  225 46fe0007cba7
| | |/
| o |    224 9d0aff36ebb1
| |\ \
| | o |  223 e0b8cd2064b6
| | | |
| | o |  222 8fdd474049a1
| | | |
+---o |  221 fb87da613f35
| | | |
| | o |  220 a1416803f165
| | | |
| | o |  219 99bb611b3c25
| | | |
| | o |  218 4251ccb7a50b
| | | |
| | o |  217 16c570465c7d
| | | |
| | o |  216 571af15a026b
| | | |
| | o |  215 7ce72afe55f8
| | | |
| | o |  214 b90ac62f3540
| | | |
| | o |  213 3644bd76aef6
| | | |
| | o |  212 a9c3f1bb1230
| | | |
| | o |  211 1110988cde8a
| | | |
| | o |  210 3ee58b526393
| | | |
| o | |  209 c386f0c3284d
|/ / /
o | |  208 82feb7ad6ac9
| | |
o | |  207 3d86176fed2f
| | |
o | |  206 a5d85dc7a37d
| | |
o | |  205 c507e4c0b02c
| | |
o | |  204 37f4277a8322
| | |
o | |  203 15e563293c07
| | |
o | |  202 b3994704a0d2
| | |
o | |  201 d618083c13be
| | |
o | |  200 2d2556ff4171
| | |
o | |    199 da90fbeddd3d
|\ \ \
| o | |  198 6f0a41ac629d
| | | |
| o | |    197 947cf457aec0
| |\ \ \
| | o | |  196 b17c092b8590
| | | | |
| | o | |    195 42af669cb779
| | |\ \ \
| | | o | |  194 c5464c4f2e06
| | | | | |
o | | | | |  193 507df365099a
|/ / / / /
o | | | |  192 a9fe0c0683f8
| | | | |
o | | | |  191 f082f83ac787
| | | | |
o-----+ |  190 d906303e387e
 / / / /
| | o |  189 4e73c2c778ae
| | | |
| | o |  188 1b1bed6cbd42
| | | |
| | o |    187 54a9d626a419
| | |\ \
| | | o |  186 c5c153dfc6af
| | | | |
| | | o |  185 664dac360636
| | | | |
| | o | |  184 cb3516daf65a
| | |\| |
| | | o |  183 be8618ea400f
| | | | |
+-----o |  182 ba3cf50882b8
| | | | |
| | | o |  181 174185b1ba35
| | | | |
| | | o |    180 9ac8a79d9e33
| | | |\ \
| | | | o |  179 e1f1aa639833
| | | | | |
| | | | o |  178 6a181fbfdfd1
| | | | | |
| | | | o |  177 f9dbe5b840e8
| | | | | |
| | | | o |  176 f8124c6d8f0d
| | | | | |
+---o | | |  175 ddadb145b45d
| |  / / /
o | | | |  174 e6a3a5be7dfb
| | | | |
o | | | |  173 6019de4fe022
|/ / / /
o | | |    172 69543cb61e07
|\ \ \ \
| o-----+  171 bb965fd8cc62
| | | | |
| | | | o  170 6f4a86f501b6
| | | | |
| o | | |  169 87049b28b2b3
| | | | |
| o-----+  168 8da5cb2b368b
| | | | |
| o | | |  167 152455050b5a
| | | | |
| | | | o    166 7ceb485c912c
| | | | |\
| | | | | o  165 a8b596b6de4c
| | | | | |
| | | | o |  164 a313f1547645
| | | | |/
| | | | o  163 a163a07da88d
| | | | |
| | | | o    162 87b0f153587f
| | | | |\
| | | | | o  161 2357d8eb4980
| | | | | |
| | | | o |  160 b1537d8a39bf
| | | | |/
| | | | o  159 8b27dae8df5d
| | | | |
| o | | |  158 de823bfc1989
| | | | |
| o | | |  157 2dd992a51584
| | | | |
| o-----+  156 60f95e4043f5
|  / / /
o | | |  155 51b8e3b4fd6a
| | | |
o | | |  154 b86455939248
|/ / /
o | |  153 e743a0f603b4
| | |
o | |  152 4b0cc0b34822
| | |
o | |  151 8d2cfa92c93c
| | |
o | |  150 06e798e33eb6
| | |
o | |  149 26e0f58a4d6c
| | |
o---+  148 65e44b7abc91
| | |
| | o    147 c63d37b9ae4c
| | |\
| | | o  146 ec2c8913a049
| | | |
| | o |  145 15329a633aee
| | | |
| | o |  144 c76ce1dbf93a
| | |\|
| | | o  143 ff84766aa577
| | | |
| | | o  142 9183686fdb8e
| | | |
| | o |  141 019500da31f1
| | |\|
| | | o  140 06a8ad379f5e
| | | |
| | o |  139 eb3c772f1001
| | |/
o | |  138 768bd3b7b6c3
| | |
o | |  137 35cf9e3d7a0c
| | |
o---+  136 f9c585b79ad9
| | |
| | o  135 b07cf920ff9c
| | |
| | o  134 6c8df987d7ea
| | |
| | o  133 30c8eef28701
| | |
o---+  132 39bc6332d845
| | |
| | o  131 8d66f4c7c74f
| | |
| | o  130 365fc4ca49e1
| | |
o | |    129 8c5cb2f4b19f
|\ \ \
| o \ \    128 467c0eff23ac
| |\ \ \
| | o | |  127 0668cb6e6242
| | | | |
o-------+  126 b7bbe1d3a2ec
|/ / / /
| | | o  125 c143bb4224ba
| | | |
o-----+  124 b42aa5b476fb
| | | |
| | | o  123 d82ef3f041c5
| | | |
o | | |  122 78c228ad9a5b
| | | |
o | | |  121 052788cf6433
| | | |
o-----+  120 244aeec899b7
| | | |
| | | o  119 6619c0e187ea
| | | |
| | | o  118 6606e146cd64
| | | |
| | | o  117 c4e618f32d28
| | | |
| | | o  116 883c8409769b
| | | |
| | | o  115 5a32e31270ec
| | | |
| | | o  114 11c11f414492
| | | |
| | | o  113 26e3ed4bb4e2
| | | |
| | | o  112 69d0491f07f2
| | | |
| | | o  111 a98e8743df92
| | | |
| | | o  110 51c87b196596
| | | |
o | | |  109 2bb83a7deb18
| | | |
o | | |  108 43024e54d940
| | | |
o---+ |  107 8572b030cf77
 / / /
| o |  106 bb4502305aca
| | |
| o |    105 d96d821b534d
| |\ \
| | o |  104 6df652a2a845
| | | |
| o | |  103 61e48dc0fc6c
| | | |
| o | |  102 4f2c74d7cb38
| | | |
| o | |  101 c091f79e3ee1
| | | |
| o | |  100 f679b65e1f40
| |\| |
| o---+  99 06d8b6c9d7da
|  / /
| o |    98 764f337b2d23
| |\ \
| | o |  97 5d8b6641c96a
| | | |
| +---o  96 3e495267e054
| | |
| o |  95 a6cdede98394
| |\|
| | o    94 e0236a8d6b13
| | |\
| | | o  93 87f48f3746c0
| | | |
| | | o    92 1d881d6a341e
| | | |\
| | | | o  91 0d9405042924
| | | | |
| o | | |  90 1fbb298ce546
| | | | |
| o | | |  89 d6c2355f6c0f
| | | | |
| o | | |  88 112eda049dba
| | | | |
| o | | |  87 b5d45823a972
| | | | |
| o | | |  86 52c5ad8063f8
| |\| | |
| | o | |  85 cc246f410aec
| | |\| |
| | o | |  84 f27b995bd9d9
| | | | |
| | o | |  83 03582181f1ec
| | | | |
| | o | |  82 ee517d8cde1f
| | | | |
| o | | |  81 665b6f344d6a
| | | | |
| o | | |  80 32ae89b79554
| | | | |
| o | | |  79 8b8273d4e5c0
| | | | |
| o | | |  78 ba7707b25625
| | | | |
| o | | |  77 4ea5979f0d9c
| | | | |
| o | | |  76 c611272c3d8f
| | | | |
| o | | |  75 d5b2ece5c63e
| | | | |
| o | | |  74 dc7696d61373
| | | | |
| o---+ |  73 ba8cfd6241ee
|  / / /
| | o |  72 63d6740cfca1
| | |\|
| | | o  71 10552c394128
| | | |
+-----o  70 ffe28df906ab
| | | |
| | | o  69 a019ddaf5c06
| | | |
o-----+  68 02a15134f0f0
 / / /
+---o  67 66ab16da1b2a
| | |
| | o  66 b142552eebfa
| | |
o | |  65 09e886012c7d
| | |
o | |    64 93e065498229
|\ \ \
| o | |  63 61eb3b218239
| | | |
| o | |  62 425e970e51af
| | | |
| o | |  61 363179609869
| | | |
| o | |  60 f5eb75689c2b
| | | |
+---o |  59 3c78ebd48f5c
| |  /
o | |  58 1de8ae72a17b
| | |
o---+  57 1860e0b3ddf7
| | |
| | o  56 09f986de06f3
| |/|
| | o  55 298378e863f7
| | |
o | |  54 c8845178c55a
| | |
o | |  53 a8607dca99af
|\| |
| o |  52 6847c83e2363
| |\|
| o |  51 a3dd42aa3e9a
| | |
o---+  50 d1b6240a07e9
 / /
| o  49 10be7348662e
| |
| o    48 5ff2ab9a49ee
| |\
| | o    47 77a3eadc61af
| | |\
| | | o  46 92df3efbff65
| | | |
| | | o    45 cca54c005934
| | | |\
| | | | o  44 103ea35092bd
| | | | |
| o | | |  43 abfcfd345f80
| |/ / /
| o | |    42 032d23dce3f2
| |\ \ \
| | o | |  41 8f703e23a4ee
| | | | |
| | o | |  40 4a8d9fadbfd6
| | |\| |
| | o | |  39 24e73033cb53
| | | | |
| o---+ |  38 9333c9cbac3b
|  / / /
| | o /  37 41b543af8a9b
| | |/
| | o    36 dc02ae1c67a9
| | |\
| | | o  35 1fe583f0ef45
| | | |
| | | o    34 d70bf0fe4f75
| | | |\
| | | | o  33 911970430832
| | | | |
| | | | o  32 9b7867c68866
| | | | |
| | | | o  31 bc70c0b86ea8
| | | | |
| | | | o    30 833ef7180cd3
| | | | |\
| | | | | o  29 7112cf0d3352
| | | | | |
| | o | | |  28 bde64f434ea4
| | |/ / /
| | o / /  27 f485e75cf5d4
| | |/ /
| | o |  26 9ee9ae5f2e88
| | | |
| | o |  25 d84755f11cbb
| | | |
| | o |  24 6b18f0bfd1ad
| |/| |
| o | |    23 a9e5b42c63f8
| |\ \ \
| | o | |  22 c418bc6aefd4
| | | | |
| +---o |  21 b18bee1030dd
| | |  /
| o---+  20 1f74cf1be5cb
| | | |
| | | o    19 aeb2ff3af383
| | | |\
+-------o  18 f5925021afc7
| | | |
| o---+  17 6537855915e4
|  / /
| | o  16 840f7a7e330f
| |/
| o  15 f7ef935faa2f
|/|
| o  14 764790125b62
| |
| o  13 d2dcd73d9969
| |
| o  12 7105b369799d
| |
o |    11 5899825e7281
|\ \
| o |  10 c44c5e16f610
| |/
o |  9 ce2bdb2e874f
| |
o |  8 5be3c02d3f6c
| |
o |  7 ccf737af4cf8
|/
o  6 bc52ab3333a6
|
o  5 0b7025c2ce5f
|
o  4 6b7507c691ac
|
o  3 dde8ba20c41a
|
o  2 b486cb6a5323
|
o  1 c25eb3375713
|
o  0 026059ab87d2 
```

# libreoffice - PDF-Express 错误：未嵌入字体符号

> ID：11035151
> 
> 赞同：1
> 
> 时间：2012-06-14T14:22:08.680
> 
> 标签：libreoffice, ieee

我不确定这是问这样一个问题的正确地方，对不起。

我有自由办公室和一篇使用 IEEE 格式编写的论文。

现在，当我尝试导出为 PDF 并尝试传递 pdf-express 时失败并出现错误

```
Font Symbol is not embedded 10x 
```

不知道问题出在哪里，只有1个字体：Times New Roman，当然大小不一样。

我尝试了“导出为 PDF ...”并检查了“嵌入字体”，但到目前为止还没有机会。

一个月前，我用 OpenOffice 尝试过同样的论文，但我不记得这样的错误，现在我不得不稍微改变一下纸张，然后用 LibreOffice 尝试同样的论文，我得到了这个错误。这是关于 LibreOffice 的错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-16T08:20:38.983

看看这个答案，真的很简单！

[如何修复 PDF 文件并嵌入丢失的字体](https://stackoverflow.com/questions/12857849/how-to-repair-a-pdf-file-and-embed-missing-fonts/13131101#13131101)

另外，我的评论如下：）

在 win32 上，如果您安装了 ghostScript，命令可能如下所示：

```
gswin32c -sFONTPATH=C:\Windows\Fonts -o output-pdf-with-embedded-fonts.pdf -sDEVICE=pdfwrite -dPDFSETTINGS=/prepress input-pdf-where-some-fonts-are-not-embedded.pdf 
```

（在您的系统上找到 exe 文件，如果需要，可以将其添加到 PATH -- 环境变量）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-15T07:54:31.870

用 Adob​​e acrobat 打开这个 PDF 文件，然后选择文件->打印。使用 adobe PDF 作为打印机打印文件并将其保存为 pdf 文件。所有字体都将被嵌入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-17T09:31:44.457

使用 pdftops 从 pdf 生成 ps，使用 Xpdf。

使用 Ghostscript 嵌入字体：

```
gsWin64 -dSAFER -dNOPAUSE -dBATCH -sDEVICE=pdfwrite -sPAPERSIZE=a4 -dPDFSETTINGS=/printer
    -dCompatibilityLevel=1.4 -dMaxSubsetPct=100 -dSubsetFonts=true 
    -dEmbedAllFonts=true -sOutputFile=d:\Output_filename.pdf Input_filename.ps 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-30T04:02:54.150

我也遇到了同样的问题，我认为简单地使用 PDF express 使用源文件创建 PDF 文件是最简单和最简单的解决方案。如果您使用最新版本，则只需压缩或 rar 源文件（dvi 文件、eps 等），然后使用 PDF Express 构建 pdf 文件。这将解决您的问题。我发现了一篇文章[IEEE PDF Express 错误消息 – 字体不是嵌入式解决方案](http://www.techntechie.com/ieee-pdf-express-error-message-font-is-not-embedded-solution.html)，可以在这方面为您提供帮助。

# html - 使用 css 的全屏网页布局问题

> ID：11035154
> 
> 赞同：0
> 
> 时间：2012-06-14T14:22:21.817
> 
> 标签：html, css

我有一个全屏网页布局，有两个“浮动”文本框，它们大约位于屏幕中间。这是盒子的css（除了页面上的垂直方向外，它们是相同的）：

```
#home-box-1
{
background-image:url('../images/px_trans_brown.png');
margin-top:16%;
margin-left:25%;
width:850px;
height:176px;
} 
```

在 1920 x 1080 的全屏下，它看起来非常好。盒子的尺寸设置为最小尺寸（1024 x 768），每边都有空间。但是，当屏幕调整大小时，左侧有很多死区，并且框会离开右侧的屏幕。

我不是 css 专家，但我的印象是“margin-left:25%”会与屏幕边缘保持 25% 的边距，无论浏览器窗口大小如何。

任何人都知道我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T14:34:10.643

这将使盒子保持居中，并在它们周围保持较小的边距。

```
body {
  margin-left: 75px;
  margin-right: 75px;
}
#home-box-1 {
  background: #aaa;
  margin-top:16%;
  margin-left:auto;
  margin-right: auto;
  max-width:850px;
  height:176px;
} 
```

# css - 将 CSS 应用于有序列表 - 数字下的背景颜色？

> ID：11035157
> 
> 赞同：8
> 
> 时间：2012-06-14T14:22:31.487
> 
> 标签：css, html-lists

我有一个有序列表，我以两种方式设置了样式：

1.  将数字着色为与列表文本不同
2.  为每个列表项应用背景颜色和边框

[请参阅本页右侧的列表](http://carolineelisa.com/indigo/2012/courses-prices/prices-booking/)

通过首先将橙色样式应用于`<li>`，然后仅使用 jQuery 将黑色样式应用于列表文本，将数字变为橙色：

`jQuery('#secondary ol li').wrapInner('<span class="notes"> </span>');`

我宁愿只使用 CSS，但是，嘿。

所以剩下的问题是如何在数字下扩展背景颜色/边框。

感谢您查看我的问题！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T04:29:04.780

**修改后的答案：** [**jsFiddle 纯 CSS 解决方案**](http://jsfiddle.net/arttronics/PcNLE/)

这是一个修改后的方法，它不使用 OP 的原始 jQuery 框架，这个请求在我之前的回答中没有得到满足。该方法使用现有的 jQuery 为`li`元素应用 span 包装器，因为无法直接修改 HTML。

这种新方法使用 CSS 伪选择器`:before`和`:after`CSS 2.1`counter`函数，可以将其数字列表风格化，因此不需要 jQuery 包装器。事实上，jsFiddle 修订版使用 Google @font-face 字体显示数字。

![在此处输入图像描述](../Images/fadc322c204acc26b71fecafc66804d8.png)

使用 CSS 计数器功能是通过在元素中声明要使用的变量名`ul`，然后在元素中递增计数器并将`:before`其用作实际内容来完成的。

**简单示例：** [**jsFiddle CSS 计数器**](http://jsfiddle.net/arttronics/WD5r3/)

![在此处输入图像描述](../Images/b6ca4b80bf9c128c260a22cbf9a16cc7.png)

**HTML：**

```
<ul>
    <li>A numbered list that's stylized!</li>
    <li>A numbered list that's stylized!</li>    
    <li>A numbered list that's stylized!</li>    
    <li>A numbered list that's stylized!</li>
    <li>A numbered list that's stylized!</li>
    <li>A numbered list that's stylized!</li>
    <li>A numbered list that's stylized!</li>
    <li>A numbered list that's stylized!</li>
    <li>A numbered list that's stylized!</li>
    <li>A numbered list that's stylized!</li>
    <li>A numbered list that's stylized!</li>
    <li>A numbered list that's stylized!</li>
    <li>A numbered list that's stylized!</li>
    <li>A numbered list that's stylized!</li>
    <li>A numbered list that's stylized!</li>
    <li>A numbered list that's stylized!</li>
    <li>A numbered list that's stylized!</li>
    <li>A numbered list that's stylized!</li>
    <li>A numbered list that's stylized!</li>
    <li>A numbered list that's stylized!</li>    
</ul> 
```

**CSS：**

```
ul{
    list-style-type: none;
    white-space: nowrap;
    margin: 0;
    padding: 0;
    width: 210px;
    height: 200px;
    overflow: auto;
    border: 3px solid royalblue;
    /* Setup the counter. */
    counter-reset: yourVariableName;
}
li:before{
    /* Advance the number. */
    counter-increment: yourVariableName;
    /* Use the counter number as content. */
    content: 'Item ' counter(yourVariableName) ': ';
    color: royalBlue;
    font-family: 'Impact';
} 
```

**更多关于 CSS 计数器的信息在[这里](https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Counters)。**

*我在 OP 的问题中使用现有框架的原始过时答案如下所示。*

* * *

我仔细查看了您的问题，然后查看了您的网页。

这是您需要的解决方案： [**jsFiddle**](http://jsfiddle.net/xjuwH/)

总而言之，这是使其工作的替换 CSS 规则：

```
#secondary ol {
    color:#F60;
    margin-bottom:0;
    margin-left: 0px;   /* Since 'ul,ol{}' setting in line 108 affects this selector, 'margin-left' is redefined. */
    list-style-position: inside;  /* This will place the number on top and inside of the current color of li */
}

.notes{
    color:#333;
    width: 230px;
    heigh: 50px;
    display: inline-block;
    vertical-align:text-top;
} 
```

**结果：**
![在此处输入图像描述](../Images/555ff6b20f3678d7dd5ef95132d6c84d.png)

* * *

**额外：**这个变体示例强调数字：[**jsFiddle**](http://jsfiddle.net/xjuwH/1/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-14T15:01:11.863

对于您的第二个问题，一种可能性是将标签更改`list-style-position`为内部：`li`

```
li { list-style-position: inside; } 
```

这会将数字与文本的其余部分内联，并允许您一起设置样式。但是，这确实会阻止文本单独对齐。

对于您的第一个问题，理论上可以使用伪元素单独设置数字样式，`marker`如下所示：

```
li::marker { color: orange; } 
```

但是，我认为目前任何浏览器都不支持此功能。您可以使用 mozilla 特定的`::-moz-list-number`，但这显然不适用于其他浏览器。

您可以在我的示例中看到所有这些位：http: [//jsfiddle.net/XmtxL/](http://jsfiddle.net/XmtxL/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T14:28:21.003

仅使用 css 很容易实现：

```
#secondary ol {
 color: <orange>;
}

#secondary li {
 color: <black>;
} 
```

用正确的颜色代码替换占位符！

您可能不得不根据您的 css 来摆弄它，但原则是：

*   将您希望“数字”显示的颜色应用于`<ol>`
*   将文本颜色应用于`<li>`标签

至于你的问题的其余部分，将其包装`<ol>`在一个容器 div 中并为其应用所需的背景。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T14:31:37.933

至于问题#1：您似乎已经为它们着色了不同的颜色？（如果您仍然需要解决方案，我可以编辑此答案）

对于＃2：

```
ul#idname li {
   background:#ddd;/*whatever colour*/
} 
```

那个`idname`的id在哪里`<ul>`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-07T19:00:14.393

对于那些像我一样只需要背景图像的人来说，有一个纯 CSS 解决方案：

```
ol
    margin: 0
    padding: 0
    margin-left: 30px
    position: relative
    z-index: 2
    > li
      padding-left: 16px
      margin-bottom: 20px
      font-style: normal
      font-weight: 700
      position: relative
      z-index: initial
      &:before
        position: absolute
        content: url(../images/ol-li-1.png)
        top: -8px
        left: -34px
        z-index: -1 
```

[见代码笔](http://codepen.io/johannesjo/full/pzrgq)

# python - 设置小于和大于值

> ID：11035161
> 
> 赞同：0
> 
> 时间：2012-06-14T14:22:42.630
> 
> 标签：python, hex

我正在尝试为变量设置某些值。这些变量用于确定十六进制颜色是绿色、红色、蓝色、或绿色和红色、蓝色和红色，还是绿色和蓝色。

我试图设置的值是绿色和红色与红色还是绿色是有一定的数字范围，其中某些东西将被限定为绿色和红色，等等......

例如：FF0000 = 红色。A1A100 = 红色和绿色，A1C124 = 红色和绿色。

我的 A1C124 代码在我的脚本中会有问题，因为很难说

```
if
Red > Green or \
Red = Green and \
Red > Blue
    print red and green. 
```

因为如果该代码要运行，任何明显是红色的东西也会变成绿色和红色。

因此，相反，我试图限制红色可以大于绿色，反之亦然。为此，我需要设置一个范围。

类似于以下内容：

```
redGreen = green +1
redGreen2 = green -1
redGreen3 = green + 2
redGreen4 = green - 2 
```

然后我会设置这样的代码：

```
if red > blue and \
   green > blue:
    redGreen = green +1
    redGreen2 = green -1
    redGreen3 = green + 2
    redGreen4 = green - 2
    print "This colour is red and green" 
```

但是有2个问题。

上面的代码不起作用，因为它只是将 +1 替换为 +2，对于负值也是如此，而且我一生都无法理解任何教我这一点的教程。

那么，有人知道如何设置范围吗？或者如果有更好的方法，你能解释一下它是什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T14:29:11.053

诚然，我没有设法完全关注你的帖子。但是，有可能将有问题的颜色转换为[HSV 空间](http://en.wikipedia.org/wiki/HSL_and_HSV)并仅查看色调值会简化您尝试做的事情。

Python 提供了[`colorsys.rgb_to_hsv()`](http://docs.python.org/library/colorsys.html#colorsys.rgb_to_hsv)执行这种转换的函数。

# php - cURL 返回垃圾数据

> ID：11035165
> 
> 赞同：10
> 
> 时间：2012-06-14T14:22:49.817
> 
> 标签：php, curl

我正在使用以下代码，它适用于其他网址，但是，对于网址“http://lisakifttherapy.com/”，我弄错了，显示了很多垃圾数据。有人知道为什么会发生这种情况以及如何克服这个问题吗？提前致谢。

```
 $curlObj = curl_init();
        curl_setopt($curlObj, CURLOPT_URL, "http://lisakifttherapy.com/");
        curl_setopt($curlObj, CURLOPT_RETURNTRANSFER, true);
        curl_setopt($curlObj, CURLOPT_FOLLOWLOCATION, true);
        $content = curl_exec($curlObj);
        echo $content; 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-14T14:28:05.233

标题显示它：

```
TTP/1.1 200 OK
Date: Thu, 14 Jun 2012 14:25:49 GMT
Server: Apache
Vary: Accept-Encoding,Cookie
Cache-Control: max-age=3, must-revalidate
WP-Super-Cache: Served supercache file from PHP
Content-Encoding: gzip
Content-Length: 16502
Connection: close
Content-Type: text/html; charset=UTF-8 
```

所以你会看到`gzip`'ed 数据，这不是人类可读的。

**编辑**

正如下面的评论：要克服这个问题，请使用 的标题`Accept-Encoding: identity`，您可以通过

```
curl_setopt($curlObj, CURLOPT_ENCODING, 'identity'); 
```

# arm - Modifying binary ARMv7 library to work with ARMv6

> ID：11035169
> 
> 赞同：2
> 
> 时间：2012-06-14T14:23:09.113
> 
> 标签：arm, cpu-architecture

Is it possible to programmatically alter a ARMv7-compiled binary to replace all the new opcodes and instructions with ARMv6 compatible ones?

I don't really care that much about performance at this point, I just want to use some ARMv7 only binaries on an ARMv6 (with vfp, if that matters).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T20:08:18.050

vfp will matter if using instructions not supported on ARMv6 unless those are the ones you are replacing.

If we are talking just arm instructions not armv6 it is probably a short list. It is probably reducing the number of instructions though so you would have to modify the code such that the armv7 instruction causes a branch somewhere, that somewhere is the replacment code using armv6 or older instructions, then branch back. not branch and link, unconditional branch or ldr pc,something, etc. if you are talking about thumb2 stuff that may still be possible but probably more work, some things you might not be able to do.

short answer: Yes in general this kind of thing can be done.

# jquery - jquery datepicker 输入值格式被忽略

> ID：11035170
> 
> 赞同：3
> 
> 时间：2012-06-14T14:23:10.613
> 
> 标签：jquery, datepicker

这本质上与**[Datepicker 不以值开头](https://stackoverflow.com/questions/7997484/datepicker-does-not-start-with-the-input-value)**但该解决方案不起作用相同。

我的输入如下：

```
<input type="text" name="start" id="start" value="2012-05-01" class="hasDatepicker"> 
```

我的电话是：

```
$("#start").datepicker({
    "dateFormat":"dd-mm-yy",
    "altFormat":"yy-mm-dd",
    "changeMonth":true,
    "changeYear":true
}); 
```

但是，altFormat 被忽略，并且在 datepicker 中选择的日期始终是今天的日期。

我需要显示日期为英国格式，`dd-mm-yy`实际值 SQL 日期为 yy-mm-dd。

我错过了哪个设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:46:15.440

您可以使用 jQuery 将值更改为`dd-mm-yy`doc 中的格式，如下所示

```
 $(function() {
    var parts = $('#start').val().split('-');
    $('#start').val(parts.reverse().join('-'))
    $("#start").datepicker({
       dateFormat:"dd-mm-yy",     
       changeMonth:true,     
       changeYear:true              
   });
 });​ 
```

[**工作演示**](http://jsfiddle.net/joycse06/pJ6vN/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T14:35:59.080

这样做： -

```
$("#start").datepicker({     
    dateFormat:"dd-mm-yy",     
    altFormat:"yy-mm-dd",     
    changeMonth:true,     
    changeYear:true 
}); 
```

# mysql - 用户 'root'@'localhost' 的访问被拒绝（使用密码：否）

> ID：11035171
> 
> 赞同：-10
> 
> 时间：2012-06-14T14:23:14.237
> 
> 标签：mysql, sql

我在我的 php 页面中创建了一个简单的数据库连接，它工作正常，因为它在执行此操作时没有显示任何错误

```
<?php
    $link = mysql_connect('www.ccccccccccccc.co.uk', 'cccccccccc', 'accccc');
    if (!$link) {
        die('Could not connect: ' . mysql_error());
    }

    /*echo 'Connected successfully';*/
    echo "DB : <font color='green'>ACTIVE</font>";

    mysql_close($link);
?>

The problem is the page is showing error Access denied for user 'root'@'localhost' (using password: NO) while executing 

<?php
    $q = mysql_query("SELECT slno, name, idno  FROM $memlist") or die(mysql_error());

    echo "<table><tr><th> NO</th><th> NAME</th>
            <th> ID NO</th></tr>";

    while($row = mysql_fetch_array($q)){
        extract($row);

        echo "<tr><td>$slno</td><td>$name</td>
            <td>$idno</td></tr>";
    }
    echo"</table>";
?> 
```

我直接在服务器上工作，而不是在本地主机上

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T14:28:27.523

您似乎没有在第二段代码中连接到数据库，因此它正在尝试使用默认设置进行连接（由于安全问题，这显然不正确）。

至于第一个代码块，您在打开连接后立即关闭连接，这有点毫无意义。

# caching - 需要缓存策略建议

> ID：11035172
> 
> 赞同：6
> 
> 时间：2012-06-14T14:23:16.527
> 
> 标签：caching, memcached

我们有一个梦幻足球应用程序，它使用 memcached 和经典的 memcached-object-read-with-sql-server-fallback。这工作得很好，但最近我一直在考虑所涉及的开销以及这是否是最好的方法。

举个例子——我们需要生成一个用户团队的下拉列表，所以我们遵循这个模式：

1.  从 memcached 获取用户团队列表
2.  如果不可用，则从 SQL 服务器获取列表并存储在 memcached 中。
3.  执行 multiget 以获取团队对象。
4.  回退到从 sql 加载对象存储这些。

这一切都很好 - 每条缓存的数据都相对容易缓存和失效，但这有两个主要缺点：

1) 因为我们正在对对象进行操作，所以会产生相当大的开销——单个团队在 memcached 中占用数百字节，而我们真正需要的是团队名称和 id 列表——而不是所有其他的东西团队对象。

2) 由于加载单个对象的回退，在空缓存上或项目过期时生成的 SQL 查询的数量可能很大：1 x Memcached multiget（未命中，哪个和原因）1 x SELECT ... FROM Team WHERE Id IN (...) 20 x Store in memcached 所以这是 21 个网络请求仅针对这个查询，而且 IN 查询比特定连接慢。

显然我们可以做一个简单的

```
SELECT Id, Name FROM Teams WHERE UserId = XYZ 
```

并缓存该结果，但这意味着每当用户创建新团队时，都需要专门使这些数据无效。在这种情况下，它可能看起来相对简单，但我们有许多此类查询，其中许多操作在不容易失效的轴上（例如您的朋友在特定游戏）。

Sooo ..我的问题是 - 你们中的任何人有解决上述缺点的想法吗，还是我应该接受存在开销并且缓存未命中是不好的，忍受它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-17T22:06:45.817

## 关于缓存：

您通常使用缓存来卸载较慢的基于磁盘的存储，在本例中为 mysql。内存缓存很容易扩展，mysql 扩展不太容易。

鉴于此，即使您将缓存的 cpu/网络工作/内存使用量加倍并再次将它们放在一起，它仍然会卸载 db。添加另一个 nodejs 实例或另一个 memcached 服务器很容易。

## 回到你的问题

1.  您说它是用户的团队，您可以在用户登录时去获取它，并在用户在整个会话期间更改它时将其更新在缓存中。

2.  我假设团队成员的名字不会改变，如果是这样，您可以通过 id、name 加载所有团队成员并将它们存储在缓存中，甚至在 nodejs 上本地，使用与现在相同的后备策略。然后只剩下第 1 步、第 2 步和第 4 步。

就我个人而言，我通常会尝试将 sql 结果拆分为较小的现成片段并缓存它们，并尽可能长时间地保持缓存更新，不合时宜地尝试将 mysql 仅用作存储而从不从中读取

通常，无论如何，您都会对从 mysql 返回的行运行一些逻辑，无需继续重复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T02:18:10.033

首先，缓存你需要的东西，也许那两个字段，不是一个完整的记录。

二、把需要的东西再缓存一次，把结果集打成记录，分别缓存

# objective-c - 双击主页按钮时与 CALayer 滞后

> ID：11035173
> 
> 赞同：0
> 
> 时间：2012-06-14T14:23:16.730
> 
> 标签：objective-c, ios, calayer, lag

当我使用 CALayer 放置阴影等时，当我双击主页按钮以查看正在运行的任务时，我的应用程序滞后。我没有任何其他滞后，就在我双击时。

我调用此方法 20 次以放置 20 张图像：

```
- (UIView *)createImage:(CGFloat)posX posY:(CGFloat)posY imgName:(NSString *)imgName
{   
    UIView *myView = [[UIView alloc] init];

    CALayer *sublayer = [CALayer layer];
    sublayer.backgroundColor = [UIColor blueColor].CGColor;
    sublayer.shadowOffset = CGSizeMake(0, 3);
    sublayer.shadowRadius = 5.0;
    sublayer.shadowColor = [UIColor blackColor].CGColor;
    sublayer.shadowOpacity = 0.8;
    sublayer.frame = CGRectMake(posX, posY, 65, 65);
    sublayer.borderColor = [UIColor blackColor].CGColor;
    sublayer.borderWidth = 2.0;
    sublayer.cornerRadius = 10.0;

    CALayer *imageLayer = [CALayer layer];
    imageLayer.frame = sublayer.bounds;
    imageLayer.cornerRadius = 10.0;
    imageLayer.contents = (id) [UIImage imageNamed:imgName].CGImage;
    imageLayer.masksToBounds = YES;
    [sublayer addSublayer:imageLayer];

    [myView.layer addSublayer:sublayer];

    return myView;
} 
```

我已经评论了除此之外的所有代码，所以我确信滞后来自这里。我还检查了分配工具，我的应用程序从未超过 1Mo。当我只是放置没有阴影的图像等时，一切正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:28:43.560

尝试`shadowPath`在图层上设置 a 。它需要是一个圆角矩形，因为您的图层上有圆角。

CALayer 必须计算它在哪里绘制，以及在哪里放置阴影，如果它没有阴影路径。这对动画性能有很大影响。

使用 CALayers 提高性能的另一种方法是将`shouldRasterize`属性设置为 YES。这会将图层内容存储为位图，并防止它必须重新渲染所有内容。

# facebook - facebook api get friends like 返回一些朋友的空数组

> ID：11035177
> 
> 赞同：0
> 
> 时间：2012-06-14T14:23:29.490
> 
> 标签：facebook, facebook-graph-api

我用 fql 和测试控制台试过这个

[https://developers.facebook.com/tools/explorer](https://developers.facebook.com/tools/explorer)

*   检查权限
*   检查两个帐户（没有隐私问题）
*   检查了 fb 错误报告

单击朋友，然后单击用户 ID，然后喜欢返回我的一些朋友的空数组。我不知道为什么会这样。

它似乎很随机，但也许我忽略了一些东西

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-30T14:22:55.953

如果有人表示您的应用程序适用于 facebook 开发人员帐户而其他帐户无法正常工作 - 请检查您的 facebook 开发人员帐户状态并查看您的应用程序是否公开且未阻止审核。

# bash - 计算linux中制表符的数量

> ID：11035180
> 
> 赞同：9
> 
> 时间：2012-06-14T14:23:42.677
> 
> 标签：bash, unix, csh, grep

我想`hard tab characters`在 unix shell 中计算我的文档中的数量。

我该怎么做？

我尝试了类似的东西

`grep -c \t foo`

但它给出了文件 foo 中 t 的计数。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-14T15:02:59.720

使用 tr 丢弃除制表符以外的所有内容，然后计数：

```
< input-file tr -dc \\t | wc -c 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-14T15:07:17.443

Bash 使用`$'...'`符号来指定特殊字符：

```
grep -c $'\t' foo 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-14T14:27:16.560

使用 perl 正则表达式（`-P`选项）来 grep 制表符。

因此，要计算文件中制表符的数量：

```
grep -o -P '\t' foo | wc -l 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-14T14:29:02.547

`Ctrl+V`您可以使用+在引号之间插入文字 TAB 字符`TAB`。

一般来说，您可以通过添加前缀来插入任何字符`Ctrl+V`；甚至控制字符，例如`Enter`或`Ctrl+C`shell 会以其他方式解释的字符。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-14T21:49:47.080

你可以用一个棘手的方式来使用 awk：使用制表符作为记录分隔符，那么制表符的个数就是记录总数减 1：

```
ntabs=$(awk 'BEGIN {RS="\t"} END {print NR-1}' foo) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-14T14:37:23.173

我的第一个想法是用来`sed`去掉所有非制表符，然后`wc`用来计算剩下的字符数。

```
< foo.txt sed 's/[^\t]//g' | wc -c 
```

但是，这也计算换行符，`sed`因为它是基于行的，所以不会触及。因此，让我们使用`tr`将所有换行符转换为空格，因此它是`sed`.

```
< foo.txt tr '\n' ' ' | sed 's/[^\t]//g' | wc -c 
```

根据您的 shell 和 的实现`sed`，您可能必须使用文字制表符而不是`\t`，但是，对于 Bash 和 GNU `sed`，上述方法有效。

# jquery - 在 div 内的图像中使用 jQuery 迭代并更改它们的 src 并添加一个新属性

> ID：11035181
> 
> 赞同：0
> 
> 时间：2012-06-14T14:23:43.970
> 
> 标签：jquery

每个 div 都有一个具有固定类别的图像。我需要使用 jquery 更改那些具有名为“.diagnostic_picture”的类的 div 内的所有图像 src，并**为该**div 内名为“.diagnostic_picture”的类的所有名为“ **delaySrc** ”的图像添加一个新属性。在这里以这种方式编写了代码但没有用....任何人都可以帮助我。谢谢

```
<div class="diagnostic_picture"><img src="test1.gif" /></div>
<div class="diagnostic_picture"><img src="test2.gif" /></div>
<div class="diagnostic_picture"><img src="test3.gif" /></div>

 $(document).ready(function () {
        $(".diagnostic_picture").each(function () {
            $(this).children("img")
            .attr("src", 'images/ajax-loader.gif')       // this way i change the src
            .attr('delaySrc', $this.attr("src")); ;      // this way i add new attribute
        });
    }); 
```

名为**delaySrc**的属性未添加到 div 内的 img 标记中，因此我更改了代码位，但仍未添加新属性....我通过 firebug 检查源。

## 更改代码

```
 $(".diagnostic_picture img").each(function () {
        var img = $(this);
        img.attr("delaySrc", function () { img.attr("src") })
        img.attr("src", 'images/ajax-loader.gif');
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:29:16.857

只需删除此块即可`$(document).ready(function () {})`真正预加载

```
$(".diagnostic_picture img")
        .attr('delaySrc', function(){return $(this).attr("src");})
        .attr("src", 'images/ajax-loader.gif'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T14:26:35.493

尝试这个

```
$(document).ready(function () {
        $(".diagnostic_picture").children()
            .attr("src", 'images/ajax-loader.gif')       // this way i change the src
            .attr('delaySrc', $this.attr("src")); ;      // this way i add new attribute
        });
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T14:31:16.260

从类名中删除点：

```
<div class="diagnostic_picture"><img src="test1.gif" ></div>
<div class="diagnostic_picture"><img src="test2.gif" ></div>
<div class="diagnostic_picture"><img src="test3.gif" ></div> 
```

并且您应该更改`$this`为`$(this)`，也可以`data-`用于具有有效属性：

```
 $(document).ready(function () {
        $(".diagnostic_picture img").each(function () {
            $(this).attr("src", 'images/ajax-loader.gif')       // changing src
            .attr('data-delaySrc', $(this).attr("src")); ;      // you can use 'data-' for having a valid attribute
        });
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T14:25:54.297

这是您的代码的正确版本（请注意 html makrup 中的更改 - 类值不需要前缀点，以及 javascipt 中的更改）

```
<div class="diagnostic_picture"><img src="test1.gif" ></div>
<div class="diagnostic_picture"><img src="test2.gif" ></div>
<div class="diagnostic_picture"><img src="test3.gif" ></div>

 $(document).ready(function () {
        $(".diagnostic_picture img").attr("src", 'images/ajax-loader.gif').attr('delaySrc', function() { $(this).attr("src") });
     });
 }); 
```

# tsql - 如何获取多个列以在游标循环中使用？

> ID：11035187
> 
> 赞同：100
> 
> 时间：2012-06-14T14:23:58.677
> 
> 标签：tsql, sql-server-2005

当我尝试在游标循环中运行以下 SQL 片段时，

```
set @cmd = N'exec sp_rename ' + @test + N',' +
           RIGHT(@test,LEN(@test)-3) + '_Pct' + N',''COLUMN''' 
```

我收到以下消息，

> 消息 15248，级别 11，状态 1，过程 sp_rename，第 213
> 行参数`@objname`不明确或声明的`@objtype`(COLUMN) 错误。

出了什么问题，我该如何解决？我尝试将列名括在括号中，并像一些搜索结果建议的那样使用`[]`双引号。`""`

编辑 1 -

这是整个脚本。如何将表名传递给 rename sp ？我不知道该怎么做，因为列名在许多表之一中。

```
BEGIN TRANSACTION

declare @cnt int
declare @test nvarchar(128)
declare @cmd nvarchar(500) 
declare Tests cursor for
SELECT COLUMN_NAME FROM INFORMATION_SCHEMA.COLUMNS WHERE COLUMN_NAME LIKE 'pct%' AND TABLE_NAME LIKE 'TestData%'

open Tests
fetch next from Tests into @test
while @@fetch_status = 0
BEGIN
  set @cmd = N'exec sp_rename ' + @test + N',' + RIGHT(@test,LEN(@test)-3) + '_Pct' + N', column' 

  print @cmd

  EXEC sp_executeSQL @cmd

  fetch next from Tests into @test
END

close Tests 
deallocate Tests

ROLLBACK TRANSACTION
--COMMIT TRANSACTION 
```

编辑 2 - 该脚本旨在重命名名称与模式匹配的列，在本例中使用“pct”前缀。这些列出现在数据库中的各种表中。所有表名都以“TestData”为前缀。

* * *

## 回答 #1

> 赞同：179
> 
> 时间：2012-06-14T19:35:16.003

这里是稍微修改的版本。更改被记录为代码注释。

```
BEGIN TRANSACTION

declare @cnt int
declare @test nvarchar(128)
-- variable to hold table name
declare @tableName nvarchar(255)
declare @cmd nvarchar(500) 
-- local means the cursor name is private to this code
-- fast_forward enables some speed optimizations
declare Tests cursor local fast_forward for
 SELECT COLUMN_NAME, TABLE_NAME
   FROM INFORMATION_SCHEMA.COLUMNS 
  WHERE COLUMN_NAME LIKE 'pct%' 
    AND TABLE_NAME LIKE 'TestData%'

open Tests
-- Instead of fetching twice, I rather set up no-exit loop
while 1 = 1
BEGIN
  -- And then fetch
  fetch next from Tests into @test, @tableName
  -- And then, if no row is fetched, exit the loop
  if @@fetch_status <> 0
  begin
     break
  end
  -- Quotename is needed if you ever use special characters
  -- in table/column names. Spaces, reserved words etc.
  -- Other changes add apostrophes at right places.
  set @cmd = N'exec sp_rename ''' 
           + quotename(@tableName) 
           + '.' 
           + quotename(@test) 
           + N''',''' 
           + RIGHT(@test,LEN(@test)-3) 
           + '_Pct''' 
           + N', ''column''' 

  print @cmd

  EXEC sp_executeSQL @cmd
END

close Tests 
deallocate Tests

ROLLBACK TRANSACTION
--COMMIT TRANSACTION 
```

# jquery - jQuery Mobile - 选择下拉问题

> ID：11035191
> 
> 赞同：1
> 
> 时间：2012-06-14T14:24:19.380
> 
> 标签：jquery, jquery-mobile

我在使用下拉列表的表单中有一些日期和时间选择器。

我可以使用以下方法预先选择当前日期、月份等：

```
var d = new Date();
var day = d.getDate();
var month = d.getMonth()+1;
var year = d.getYear();

$('#day option[value=' + day + ']').attr('selected',true);
$('#month option[value=' + month  + ']').attr('selected',true);
$('#year option[value=' + year  + ']').attr('selected',true); 
```

这是使用以下方法初始化的：

```
$('#page-id').bind('pageinit', function(event) {...}); 
```

当我查看页面源时，选择了正确的选项，但是，选择下拉列表仅显示第一个选项，例如今天的日期，即 14 日，被选中，但实际的下拉菜单显示第一个。

单击下拉列表并重新选择当前日期，选择仍然没有改变！

我必须选择不同的日期并重新选择当前日期才能获得更改视图的选项。

我运行了一个 jsFiddle，效果很好 - [http://jsfiddle.net/3aRgR/](http://jsfiddle.net/3aRgR/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:38:25.193

没关系，我在官方文档中找到的！你所要做的：

```
$('#day').selectmenu('refresh'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T14:35:59.727

您必须选择 2 个选项。尝试先取消选择或尝试更具可读性：

```
$('#day').val(day); 
```

# php - 谷歌浏览器“加载资源失败”

> ID：11035197
> 
> 赞同：0
> 
> 时间：2012-06-14T14:25:09.897
> 
> 标签：php, html, google-chrome, console, image

我正在使用水印系统来保护我页面上的所有照片：

```
<?php
$imagesource = $_SERVER['DOCUMENT_ROOT']."**path**".$_GET['path'];
if (!file_exists($imagesource)) die();
$filetype = strtolower(substr($imagesource,strlen($imagesource)-4,4));
if($filetype == ".gif") $image = @imagecreatefromgif($imagesource); 
if($filetype == ".jpg") $image = @imagecreatefromjpeg($imagesource); 
if($filetype == ".png") $image = @imagecreatefrompng($imagesource); 
if (empty($image)) die();
$watermark = @imagecreatefrompng('watermark_'.(imagesx($image) <= 1100 ? "port" : "lans").'.png');
$imagewidth = imagesx($image);
$imageheight = imagesy($image); 
$watermarkwidth = imagesx($watermark);
$watermarkheight = imagesy($watermark);
$startwidth = (($imagewidth - $watermarkwidth)/2);
$startheight = (($imageheight - $watermarkheight)/2);
imagecopy($image, $watermark,  $startwidth, $startheight, 0, 0, $watermarkwidth, $watermarkheight);
header("Content-type: image/jpeg");
imagejpeg($image);
imagedestroy($image);
imagedestroy($watermark);
?> 
```

这很好用，但是当我在 Google Chrome 中加载此页面时，图像会预先加载并显示，但一旦它们呈现 Chrome 就会显示“加载资源失败”。这很奇怪，因为如果您未能加载它，为什么要显示它呢？

无论如何，我无法在任何其他浏览器上复制此问题。这又很奇怪，这告诉我脚本没有问题。

我一直注意到图像越小，正确显示的越多，但是加载 19 个图像中有 2 个有什么好处！

现在，当我正常显示图像时不会发生这种情况（即没有水印脚本。通过“<”img"><“/img">”标签）

但是在另一个网站上我没有水印脚本，但它们仍然没有加载。

我的另一个问题是；

由于管理我的网站合同的法律，我必须对原始文件使用版权和 .htaccess 保护......无论如何，用户无法直接访问图像源文件。这些错误可能是由此造成的吗？但话又说回来，为什么有些会显示而有些不会，同样，为什么只有谷歌浏览器有这个问题？

你的想法会被理解的。

PS这是我的浏览器信息：

```
Google Chrome   19.0.1084.56 (Official Build 140965) m
OS  Windows
WebKit  536.5 (@119244)
JavaScript  V8 3.9.24.29
Flash   11,3,300,257
User Agent  Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.56 Safari/536.5 
```

视觉示例：

![正在加载](../Images/42294dc3f380c6bddb090377d25c70da.png)

![已加载](../Images/1e295c355ce25d80552fb4f31ace7181.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T01:39:19.263

似乎是chrome中的一个错误。一直让我发疯最终想出了一个使用 base64 的“修复”。保持您的水印脚本完全相同，然后进入输出图像的脚本。

```
function base64_encode_image ($imagefile) {
      $filename=htmlentities($imagefile);
      $filetype = pathinfo($filename, PATHINFO_EXTENSION);
      $imgbinary = file_get_contents($filename);
      return 'data:image/' . $filetype . ';base64,' . base64_encode($imgbinary);
}

$string=base64_encode_image("http://www.domain.com.au/watermark.php?imagesrc=image1.jpg");

$imgList.="<img src=\"$string\" title=\"\">"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T13:52:24.107

问题可能是由于您没有归还 Content-Lentgh。

您必须 `imagejpeg($image);`用以下代码替换该行：

```
 imagejpeg($image, 'php://memory/temp.jpeg'); 
    header("Content-Length: " . filesize('php://memory/temp.jpeg'));
    $fp = fopen("php://temp/temp.jpeg", 'r');
    echo stream_get_contents($fp); 
```

# javascript - 对象属性的javascript测试

> ID：11035201
> 
> 赞同：1
> 
> 时间：2012-06-14T14:25:28.867
> 
> 标签：javascript

我有一个这样的字符串：

```
var TheDate = "6.14.2012"; 
```

我有一个对象`MyObject`，它的属性可能与该字符串匹配。但是，当我写这个时：

```
if (MyObject[TheDate] === null || MyObject[TheDate] === 'undefined') { .... } 
```

即使我知道该属性不存在，这些条件似乎也永远不会评估为真。

我错过了什么？？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T14:28:43.857

***自有财产的存在***

如果要检查是否存在属性，请使用`.hasownProperty()`...

```
if (MyObject.hasOwnProperty(TheDate)) { 
```

* * *

***拥有或继承财产的存在***

如果属性可以被继承，要测试是否存在，请使用`in`运算符...

```
if (TheDate in MyObject) { 
```

* * *

***`null`或`undefined`对自有或继承财产的价值测试***

如果它不存在，而是一个值测试，并且你想测试`null`or `undefined`，那么使用这个......

```
if (MyObject[TheDate] == null) { 
```

这将检查`null`和`undefined`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T14:28:36.450

问题在于未定义的引号；）

改变

`if (MyObject[TheDate] === null || MyObject[TheDate] === 'undefined') { .... }`

至

`if (MyObject[TheDate] === null || MyObject[TheDate] === undefined) { .... }`

它应该工作:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T14:29:09.523

如果你想使用字符串`"undefined"`而不是`undefined`对象，方法是检查“typeof”，它返回一个字符串。在这种情况下，如果您要测试它是否设置为“未定义”：

```
if ( MyObject[TheDate] === null || typeof MyObject[TheDate] === 'undefined' ) { .... } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T14:29:51.960

尝试以下

```
if ( (MyObject[TheDate] === null) || (typeof MyObject[TheDate] === 'undefined') { 
 .... 
} 
```

您正在检查您的属性是否包含 String`'undefined'`而不是它的值是否为 current `undefined`。

# c# - WPF - 在循环期间打印

> ID：11035205
> 
> 赞同：1
> 
> 时间：2012-06-14T14:25:35.043
> 
> 标签：c#, wpf, binding

我有一个简单的问题，但解决方案似乎很棘手。我想在循环期间使用 WPF 控件画布进行打印；但是对于每次迭代，我都想更新画布控件。

如果我想在 WPF 中打印一个画布控件，我可以简单地调用

```
PrintDialog dialog = new PrintDialog();
dialog.PrintVisual(this.canvas, ""); 
```

它按预期打印到我的默认打印机。精彩的。

但是，如果我想在循环中多次执行此操作并在每次迭代期间对画布进行更新，则只会打印循环的最后一次迭代。

```
 private void methodName()
    {
        for (int i = 0; i < 2; i++)
        {
            updateTextBox(i.ToString());
            PrintDialog dialog = new PrintDialog();
            dialog.PrintVisual(this.canvas, "");
        }
    }

    private void updateTextBox(string text)
    {
        txtTextBox.Text = text;
    } 
```

知道我需要做什么来确保获得 2 个打印输出，第一个 txtTextBox.Text 值为 0，第二个值为 1？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T07:15:17.377

我即将在我的应用程序中实现类似的东西，发现我之前的答案不够好。我的问题是，虽然画布在每次迭代中都会更新，但在发送到`PrintVisual`. 令我惊讶的是，您打印了最后的迭代，我只得到了第一个。无论如何，这就是我让它工作的方式，基本上是在已经挂起的渲染操作之后排队打印命令：

```
for (int i = 0; i < 2; i++)
{
  updateTextBox(i.ToString());
  this.canvas.InvalidateVisual(); // Maybe not needed in your case

  PrintDialog dialog = new PrintDialog();

  this.Dispatcher.Invoke(System.Windows.Threading.DispatcherPriority.Render, (Action)delegate()
  {
     dialog.PrintVisual(this.canvas, "" + i);
  });
} 
```

是的，它与 SalGad 的答案和您所指的帖子有些相似（但不完全相同），但我无法评论该答案，所以请尝试一下，它对我有用。

当对打印作业使用空描述时，我也遇到了打印消失的问题，因此`+ i`. 不知道这是否是一般问题，或者只是我的打印机设置的问题。

我从[这篇文章](https://stackoverflow.com/questions/1080375/force-rendering-of-a-wpf-control-in-memory)中得到了这个想法，其中还提到了使用 ViewBox 的替代解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T16:27:27.640

好的

我解决了。

我删除了所有调度程序对象方法，因此它在单个线程上运行。

为了更新画布，我使用了 canvas.UpdateLayout() 方法。

我还确保在更新下一个画布（下一次迭代）之前打印已经完成。

```
private void methodName()
{
    for (int i = 0; i < 2; i++)
    {
        updateTextBox(i.ToString());

        this.canvas.UpdateLayout();

        PrintDialog dialog = new PrintDialog();
        dialog.PrintVisual(this.canvas, "ABC");

        dialog.PrintQueue.Refresh();

        while (dialog.PrintQueue.NumberOfJobs != 0)
        {
            bool isQueued = false;
            foreach (var job in dialog.PrintQueue.GetPrintJobInfoCollection())
            {
                if (job.Name == "ABC")
                    isQueued = true;
            }

            if (!isQueued)
                break;

            Thread.Sleep(500);
            dialog.PrintQueue.Refresh();
        }
    }
}

private void updateTextBox(string text)
{
    txtTextBox.Text = text;
} 
```

我也可以刚刚完成 thread.sleep(3000) - 这很有效，因为它有足够的时间来确保打印作业已经完成，但它也有点“希望”，我想要更安全的东西。

谢谢大家的建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T14:52:03.333

只是一个猜测，但可能值得尝试`RenderTargetBitmap`在每次迭代中强制渲染画布，然后使用该源创建一个图像，然后可以将其发送到`PrintVisual`. 有关代码示例，请参阅此帖子：

[打印视口](https://stackoverflow.com/questions/7318544/printing-viewport)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T15:01:57.133

只是在这里拍摄，但您可以尝试在每次 for 循环迭代开始时刷新 WPF 画布控件吗？这是代码片段：

```
// declare this
public static class ExtensionMethods
{
   private static Action EmptyDelegate = delegate() { };

   public static void Refresh(this UIElement uiElement)
   {
      uiElement.Dispatcher.Invoke(DispatcherPriority.Render, EmptyDelegate);
   }
}

// the loop
for (int i = 0; i < 2; i++)
    {
        updateTextBox(i.ToString());
        PrintDialog dialog = new PrintDialog();
        dialog.PrintVisual(this.canvas, "");
    }
}

// update this method
private void updateTextBox(string text)
{
    txtTextBox.Text = text;
    txtTextBox.Refresh();
    Thread.Sleep(500);
} 
```

我从[这里采购这个想法](http://geekswithblogs.net/NewThingsILearned/archive/2008/08/25/refresh--update-wpf-controls.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T14:41:56.527

如果要多次调用 PrintVisual，则必须查看 PrintDocument 和 DocumentPaginator。

# jquery - 用 jquery 更改 css，在 FireFox 中不起作用

> ID：11035207
> 
> 赞同：-1
> 
> 时间：2012-06-14T14:25:40.333
> 
> 标签：jquery

我的 html 页面中有一个 dd 元素，类名是从数据库 id 生成的，并且在我使用的 Java 脚本文件中

```
theHeight=200;
$("dd."+i).css({height: theHeight}); 
```

此代码在 Opera、chrome、IE 8 中运行良好，但在 FireFox 12.0 中不起作用我需要更改 css 中元素的高度，但在 jquery 的运行时。它有什么问题，有什么方法可以使它与 FireFox 一起使用

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:42:24.750

尝试这样设置：

```
theHeight=200
$("dd."+i).height(theHeight); 
```

或者尝试将 'px' 附加到高度值：

```
theHeight=200
$("dd."+i).css({height: theHeight + 'px'}); 
```

# symfony1 - 在 symfony 中，如何在 yaml 文件中将默认值定义为空数组？

> ID：11035208
> 
> 赞同：2
> 
> 时间：2012-06-14T14:25:46.230
> 
> 标签：symfony1, yaml

在 symfony1 中，在 yaml 文件中如何设置一个空数组？

```
# app.yml
all:
    test:
        example: // empty array here 
```

所以当我

```
<?php echo sfConfig::get('app_test_example');?> 
```

它返回`array();`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T14:27:38.257

尝试

```
# app.yml
all:
    test:
        example: [] 
```

# javascript - 如何使用 jQuery.inArray() 检查是否在另一个数组中找到了一个字符串元素数组？

> ID：11035214
> 
> 赞同：0
> 
> 时间：2012-06-14T14:26:08.120
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3

我有一个`<SELECT multiple="multiple">`选项框。

我将选定的选项存储在**JS**变量中 - `selectedFeatures`。

我想将`selectedFeatures`选项的数组变量传递给`jQuery.inArray()`- 但该函数旨在仅获取和检查一个值。

如果我实际上指定了一个元素的索引，我可以在我的地图上显示/隐藏（或过滤）标记，如下所示`selectedFeatures[0]`：`inArray()`

..但是由于我可以从选择框中选择多个选项，因此这种过滤方法不起作用。

*如何使用* ***JS/jQuery***检查是否在另一个数组中找到了一组项目？

```
// store selected options as an array of string elements inside the variable
var selectedFeatures = $("#features").val();
// for every element inside 'markers.houses' array...                   
$(markers.houses).each(function(index, elem){
    // check if any of the values inside the 'selectedFeatures' array are found
    // also inside a sub-array 'features' inside every element of 'markers.houses'
    // array. if 'true' show that particular marker, otherwise hide the marker
    if(jQuery.inArray(selectedFeatures, elem.features) !== -1 || jQuery.inArray(selectedFeatures, elem.features) > -1){
        markers.houseMarkers[index].setVisible(true);
    }else{
        markers.houseMarkers[index].setVisible(false);
    }
}); 
```

> **图 1.1** -*将选定的选项存储在一个数组变量中并与* `jQuery.inArray()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:40:21.590

您所要求的可以通过 PHP 的`array_diff`功能来解决。我知道您没有使用 PHP，但这就是[`array_diff`PHPJS](http://phpjs.org/functions/array_diff:309)的原因，这是一个致力于将 PHP 函数移植到 JavaScript 的项目。

无论如何，要解决这个问题，您基本上想调用`array_diff(selectedFeatures,elem.features).length == 0`. （您可能需要交换参数，我不确定您的问题中哪个数组是哪个）

`array_diff`返回第一个数组中不存在于其他数组中的元素。如果第一个数组中的所有元素也在第二个数组中（即array1 是array2 的子集），则返回的数组将为空，因此其长度为零。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T14:45:02.857

检查这个库：[underscore.js](http://documentcloud.github.com/underscore/#intersection)

你可以使用 _.difference(array, *others)。

或者您可以创建自己的函数来检查一个数组中的值是否在另一个数组中。

# assembly - 汇编条件跳转

> ID：11035220
> 
> 赞同：2
> 
> 时间：2012-06-14T14:26:34.313
> 
> 标签：assembly, conditional

我刚开始组装，一切都很好，但有一点我不明白。条件跳转是如何工作的？

我在这里有一个汇编代码示例。

```
TEST EAX, EAX
FCLEX
JGE SHORT 004022B1 
```

我看到当某个条件大于等于时，会跳转到004022B1。
但是那个条件是什么，在哪里检查呢？
我假设条件必须是 TEST EAX,EAX。但我不确定它的作用。

谁能向我解释条件跳转是如何工作的以及条件是在哪里检查/存储的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T14:36:22.433

条件跳转（和其他一些指令）使用标志。这些标志是 (E/R) [FLAGS](http://en.wikipedia.org/wiki/FLAGS_register_%28computing%29)寄存器中的位。`test a, b`根据 的结果设置标志`and a, b`，而不用结果进行更新`a`。`fclex`不会改变任何正常的标志（它当然会改变 FPU 标志）。

`jge`测试* 标志标志的值是否等于溢出标志。`test a, b`将溢出标志设置为零，将符号标志设置为 的结果的符号位`and a, b`。`eax`因此，如果为正，则将进行跳转。

*：请注意，它不测试“大于或等于”。`cmp`当在 a （和其他一些指令）之后检查标志时，这种解释是有效的。它真的只看旗帜。

# android - 从 Android 向 USB 端口发送 AT 命令

> ID：11035228
> 
> 赞同：2
> 
> 时间：2012-06-14T14:26:56.993
> 
> 标签：android, usb, at-command

各位程序员，您好，我有一个关于应用程序实现的问题，该应用程序应该能够通过 USB 将 AT 命令发送到连接的硬件。

是否可以在没有 root 的情况下通过 USB 发送这些命令？我不希望将手机作为目标市场，因为我希望该应用程序可用于普通 Android 平台。有没有你知道的解决方案，可以提供一些链接？

欢呼英雄

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T15:37:05.727

如果手机支持可选的 USB 主机 API，那么很可能是的。您可能需要一根 USB-OTG 型适配器电缆，将额外的引脚接地以帮助将手机置于主机模式。

如果不是，则不，除非您有一个可以通过内核修改成为 USB 主机的主机（需要 root，可能需要重新刷新内核，并且可能需要一根特殊的电缆来注入电源）

# c# - Windows 7 与 XP GetIsNetworkAvailable() 的区别？

> ID：11035230
> 
> 赞同：1
> 
> 时间：2012-06-14T14:27:08.317
> 
> 标签：c#, networking, network-programming

我编写了代码来使用机器上可用的 IPv4 NIC 卡填充菜单。它已经在 XP 机器上进行了测试，看起来一切都很好（它也是基于 XP 构建的）。

我在 Windows 7 上对其进行了测试，它总是填充 2 个 IP 地址，即使其中一个已断开连接。以下是 Win7 机器的结果：

**WLAN Connected
LAN Disconnected**
观察到：显示正确的 WLAN 地址，显示不正确的 LAN 地址（它甚至是连接到 192.168 的不同网络号，但在菜单中填充的 LAN 地址是 169.254）
预期：显示正确的 WLAN 地址，无 LAN显示（已断开连接）
ipconfig 读取 LAN 的“媒体已断开连接”

**WLAN Connected
LAN Connected**
Observed：显示正确的 WLAN 地址，显示正确的 LAN 地址
预期：显示正确的 WLAN 地址，显示正确的 LAN 地址

ipconfig 读取正确的地址

**WLAN Disconnected
LAN Connected**
Observed：显示正确的 WLAN 地址，显示正确的 LAN 地址
预期：未显示 WLAN 地址（已断开连接），正确的 LAN 显示
ipconfig 读取 WLAN 的“Media disconnected”

这是代码块：

```
_adapters.Clear();
if (NetworkInterface.GetIsNetworkAvailable())
{
    NetworkInterface[] networkInterfaces = NetworkInterface.GetAllNetworkInterfaces();

    foreach (NetworkInterface adapter in networkInterfaces)
    {
        foreach (UnicastIPAddressInformation addr in adapter.GetIPProperties().UnicastAddresses)
        {
            //This filters out IPv6 and Loopback NICs
            if (addr.Address.AddressFamily == AddressFamily.InterNetwork
                && adapter.NetworkInterfaceType != NetworkInterfaceType.Loopback) 
            {    //This formats something like: 192.168.1.0 - Ethernet adapter Local Network Connection
                _adapters.Add(addr.Address.ToString() + " - " + adapter.NetworkInterfaceType.ToString() + " adapter " + adapter.Name);
            }
        }
    }
} 
```

在 VS2010 上使用 4.0 .NET 物有所值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T14:37:37.073

要查看 NIC 是否已连接，您应该检查该`NetworkInterface.OperationalStatus`属性。

LAN断开时的“奇怪”IP地址来自APIPA（自动专用IP寻址）。Windows Vista 引入的“功能”：

> ...Windows Vista 中的一项功能，可在 DHCP 服务器不可用时自动为自己配置 IP 地址和子网掩码。IP 地址范围是 169.254.0.1 到 169.254.255.254，这是专门为 Microsoft 保留的范围。

# android - 如何使用 AsyncTask 获取 GPS 位置？

> ID：11035231
> 
> 赞同：1
> 
> 时间：2012-06-14T14:27:11.990
> 
> 标签：android, android-asynctask

我已经看到很多此类问题的答案，但与我的任务无关。我正在尝试在后台获取 gps 位置，但我遇到了异常，如`Cant Create Handler Inside Thread That Has Not Called Looper Prepare in Android`.`mlocManager.requestLocationUpdates( LocationManager.GPS_PROVIDER, 0, 0, mlocListener);`

```
public class GPSLocation extends AsyncTask<Void, Void, Void>
    {  
        @Override
        protected void onPreExecute()
        {  
            super.onPreExecute(); 
            progressDialog = new ProgressDialog(RoadMaintenanceActivity.this);
            progressDialog.setCancelable(true);
            progressDialog.setMessage("Getting GPS Location...");
            progressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
            progressDialog.setProgress(1);
            progressDialog.show();

        } 
        @Override 
        protected void onProgressUpdate(Void... values) {
            super.onProgressUpdate(values);
            // Things to be done while execution of long running operation is in progress. For example updating ProgessDialog
         }

        @Override 
        protected void onPostExecute(Void result)
        { 

                progressDialog.cancel(); 
        }
        @Override
        protected Void doInBackground(Void... params) { 

            boolean isGps = false;

            while(!isGps)
            { 
                LocationManager mlocManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE); 
                LocationListener mlocListener = new MyLocationListener();  
                mlocManager.requestLocationUpdates( LocationManager.GPS_PROVIDER, 0, 0, mlocListener);   
                if(longitude !=0 && latitude!=0)
                {
                    isGps = true; 
                    sendSMS();
                }  
            } 

            return null;  

        }

     } 
```

我不确定为什么我们不能在 doBackground() 方法中调用它。

谢谢你们的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T15:53:39.217

最后我找到了问题，我认为这会帮助像我这样的人

```
public class GPSLocation extends AsyncTask<Void, Void, Void>
    {  
        boolean running =true;
                @Override
                protected void onPreExecute()
                {  
                    super.onPreExecute(); 
                    progressDialog = new ProgressDialog(RoadMaintenanceActivity.this);
                    progressDialog.setOnCancelListener(new DialogInterface.OnCancelListener(){
                          public void onCancel(DialogInterface dialog) {
                              getgps.cancel(true);  
                          }
                    });
                    LocationManager mlocManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE); 
                    LocationListener mlocListener = new MyLocationListener();  
                    mlocManager.requestLocationUpdates( LocationManager.GPS_PROVIDER, 0, 0, mlocListener);    
                    progressDialog.setCancelable(true);
                    progressDialog.setMessage("Getting GPS Location...");
                    progressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
                    progressDialog.setProgress(1);
                    progressDialog.show();

                } 

                @Override 
                protected void onProgressUpdate(Void... values) {
                    super.onProgressUpdate(values);
                    // Things to be done while execution of long running operation is in progress. For example updating ProgessDialog
                 }

                @Override 
                protected void onPostExecute(Void result)
                {  
                        progressDialog.cancel(); 
                }

                @Override
                protected Void doInBackground(Void... params) {  
                    boolean isDataSubmitted = false;

                    while(!isDataSubmitted)
                    {  
                        if(longitude !=0 && latitude!=0)
                        { 
                            sendSMS();
                            isDataSubmitted = true;  
                        }  
                    } 

                    return null;    
                } 
     } 
```

通过让 Locationmanager 在`onPreExecute()`异常中摆脱我的应用程序。我们可以在 onpreexecute 而不是`doinbackground()`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T14:41:08.330

你不能那样做。mlocListener 需要一个 Looper 线程来操作。

在 doInBackground 调用中`Looper.prepare();`

所以你的代码会变成这样。

```
@Override
        protected Void doInBackground(Void... params) { 
            Looper.myLooper().prepare();
            boolean isGps = false;
            ----------------- 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T21:03:16.870

这似乎适合我目前正在尝试做的事情。你有机会告诉我完整的来源吗？我目前已将其用于我的代码，但我想看看您如何获取 GPS 坐标并启动异步

```
ProgressDialog progressDialog;
double longitude, latitude;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_confirm_screen);
    SharedPreferences sp = PreferenceManager.getDefaultSharedPreferences(this);
    Boolean locationCheck = sp.getBoolean("LOCATION", false);
   if(locationCheck){

    }
   else
   {
    sendEmail();
    playSound();
   }

}

public class GPSLocation extends AsyncTask<Void, Void, Void>
{  
    boolean running =true;
            @Override
            protected void onPreExecute()
            {  
                super.onPreExecute(); 
                progressDialog = new ProgressDialog(ConfirmScreen.this);
                progressDialog.setOnCancelListener(new DialogInterface.OnCancelListener(){
                      public void onCancel(DialogInterface dialog) {
                          getgps.cancel(true);  
                      }
                });

                LocationManager mlocManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE); 
                LocationListener mlocListener = new MyLocationListener();  
                mlocManager.requestLocationUpdates( LocationManager.GPS_PROVIDER, 0, 0, mlocListener);    
                progressDialog.setCancelable(true);
                progressDialog.setMessage("Getting GPS Location...");
                progressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
                progressDialog.setProgress(1);
                progressDialog.show();

            } 

            @Override 
            protected void onProgressUpdate(Void... values) {
                super.onProgressUpdate(values);
                // Things to be done while execution of long running operation is in progress. For example updating ProgessDialog
             }

            @Override 
            protected void onPostExecute(Void result)
            {  
                    progressDialog.cancel(); 
            }

            @Override
            protected Void doInBackground(Void... params) {  
                boolean isDataSubmitted = false;

                while(!isDataSubmitted)
                {  
                    if(longitude !=0 && latitude!=0)
                    { 
                        sendEmail();
                        isDataSubmitted = true;  
                    }  
                } 

                return null;    
            } 
 } 

public void backHome(View view) 
{
    Intent intent = new Intent (this, MainScreen.class);
    startActivity(intent);
}

// Method to start playing and looping a sound.

public void playSound()
{
    MediaPlayer clickSound = MediaPlayer.create(this, R.raw.warning);
    SharedPreferences sp = PreferenceManager.getDefaultSharedPreferences(this);
    Boolean soundCheck = sp.getBoolean("SOUND", false);
    if (soundCheck)
    {
        clickSound.start();
    }

}// method end

public void sendEmail()
{
    SharedPreferences sp = PreferenceManager.getDefaultSharedPreferences(this);
    String nameValue = sp.getString("NAME", "failed to get name");
    String emailValue = sp.getString("EMAIL", "failed to get email");
    Intent i = new Intent(Intent.ACTION_SEND);
    i.setType("message/rfc822");
    i.putExtra(Intent.EXTRA_EMAIL, new String[]{emailValue});
    i.putExtra(Intent.EXTRA_SUBJECT, "Email sent from DON'T PANIC - A Chris O'Brien Project");
    i.putExtra(Intent.EXTRA_TEXT, "Hi there\n" + nameValue + " is in mortal danger. They didn't include co-ords as they assume you know where they are..\nKind Regards\nDon't Panic! \n\n\n");

    try
    {   startActivity(Intent.createChooser(i, "Send mail...."));
    } 
    catch (android.content.ActivityNotFoundException ex){

        Toast.makeText(ConfirmScreen.this, "There are no email clients installed or set up", Toast.LENGTH_SHORT).show();
    }
}

public void sendEmail(String a, String b, String c)
{
    SharedPreferences sp = PreferenceManager.getDefaultSharedPreferences(this);
    String nameValue = sp.getString("NAME", "failed to get name");
    String emailValue = sp.getString("EMAIL", "failed to get email");
    Intent i = new Intent(Intent.ACTION_SEND);
    i.setType("message/rfc822");
    i.putExtra(Intent.EXTRA_EMAIL, new String[]{emailValue});
    i.putExtra(Intent.EXTRA_SUBJECT, "Email sent from DON'T PANIC - A Chris O'Brien Project");
    i.putExtra(Intent.EXTRA_TEXT, "Hi there\n" + nameValue + " is in mortal danger. Please see the co-ords attached and run to their rescue!" +
            " If you don't see any co-ords, they didn't check the box and assume you know where they are.\nKind Regards\nDon't Panic! \n\n\n" + 
            a + b + c);

    try
    {   startActivity(Intent.createChooser(i, "Send mail...."));
    } 
    catch (android.content.ActivityNotFoundException ex){

        Toast.makeText(ConfirmScreen.this, "There are no email clients installed or set up", Toast.LENGTH_SHORT).show();
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_confirm_screen, menu);
    return true;
}

} 
```

# html - 如何在不同的屏幕尺寸上调整边框半径

> ID：11035233
> 
> 赞同：1
> 
> 时间：2012-06-14T14:27:16.607
> 
> 标签：html, css

我正在尝试对特定的 div应用**边界半径效果。**我使用的代码是这样的：

```
/* Multiple compatibility with border radius */
/* CSS 3 */
border-radius: 50%;
/* Firefox versiones 3.x */
-moz-border-radius: 50%;
/* Safari desde 3.2 hasta la 4 */
-webkit-border-radius: 50%;
/* Khtml Conqueror */
-khtml-border-radius: 50%; 
```

有了这个，我模拟了一个圆圈：D！从那里开始，一切都很好。我写了几行以适应不同的分辨率，但今天我在使用父亲的电脑时发现了一些东西。

我使用的是 22 英寸的全高清屏幕。我父亲有一个 17 英寸的屏幕。我在我的 22 英寸屏幕上尝试了不同分辨率的设计，它们是正确的。但是当我走到我父亲的 17 英寸显示器并打开我的网站时，我的圈子看起来像个鸡蛋！我猜怎么可能！我用我的 22 英寸显示器确保了我的设计，并且所有这些显示器，从 800 x 600 到 1920 x 1080，设计看起来都是正确的。

当然，我立刻想到应该是显示器的宽度。当我使用 % 来定位我的网页时，它使圆圈看起来像鸡蛋。但我不确定改变这个 % 是否会解决这个问题并产生另一个问题，因为我改变了它。

那么，我怎样才能让我的圆圈看起来像不同屏幕英寸的圆圈呢？

谢谢！

编辑：

好的，我编辑了这篇文章，因为它并没有澄清一切。我父亲的分辨率：1024 x 768。我在我的 22 英寸屏幕上试了一下，它看起来很完美。但是当我走到17英寸的屏幕上时，它们又是鸡蛋了！>_<

在这里我粘贴鸡蛋的截图：

![鸡蛋！](../Images/ab3d29b65372deace5757b4986f26696.png) 抱歉，使用工具栏等...

我确保它们在 22 英寸屏幕上看起来像圆圈......

**编辑**

我将这两个属性都更改为 16%。现在看起来像这样：

![新鸡蛋！](../Images/c9a7484c2fefa17f36651b735ed05827.png)

现在......我有点迷路了。我想我可能会再次查看我的代码...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T15:01:04.627

**更新**

我从图片中抓取了您的[网站地址](http://smolinaperez.co.cc/)。

您将框的宽度和高度设置为百分比 - 这是包含元素宽度和高度的百分比，因此您只需将浏览器调整为不同的纵横比即可重现此问题。

如果宽度为 16%，并且您更改了浏览器的宽度，则圆圈会变宽但高度将保持不变（您没有将浏览器设置得更高）。

例如

高度：100 像素和宽度：100 像素

*   100px 的 16% 是 16px 宽
*   100px 的 8% 是 8px 宽

将浏览器压缩到 100px 高和 50px 宽，你会得到圆圈：

*   50px 的 16% 是 8px 宽
*   100px 的 8% 是 8px 高

**上一个答案**

可能是屏幕分辨率错误，导致屏幕本身被拉伸。

您可以通过查看屏幕上的圆圈图像来测试这一点。如果不是圆形，则问题出在计算机设置中，而不是在您的 CSS 中。

如果圆圈显示正确，您能否将我们指向页面演示或提供更多 HTML 和 CSS 以便我们对其进行测试？造成这种情况的另一个原因是在添加边框半径之前，您的框的大小不是“正方形”。

![圆圈](../Images/c2141d664d7f0c6308d815663cadcdea.png)

[圈子由维基百科提供](http://upload.wikimedia.org/wikipedia/commons/thumb/1/1d/CIRCLE_1.svg/220px-CIRCLE_1.svg.png)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T15:02:27.320

从您的评论来看，您 atm 发生的事情是这样的：http: [//jsfiddle.net/7AN3R/2/](http://jsfiddle.net/7AN3R/2/)

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
    <title>Untitled Page</title>
    <style type="text/css">

.mydiv {
    border:1px solid #000;
    width:8%;
    height:16%;
    -moz-border-radius: 50%;
    -webkit-border-radius: 50%;
    -khtml-border-radius: 50%;
    border-radius: 50%;
    }

    </style>
</head>
<body>
    <div style="width:800px;height:600px;">
    <div class="mydiv">

    </div>
    </div>
</body>
</html> 
```

尝试对圆形 div 的宽度和高度使用相同的百分比。

像

```
.circle{
border:1px solid #000;
width:8%;
height:8%;
-moz-border-radius: 50%;
-webkit-border-radius: 50%;
-khtml-border-radius: 50%;
border-radius: 50%;
} 
```

# asp.net - Listbox.SelectedIndex 没有改变，在一些 asp 属性更改后，有什么问题？

> ID：11035234
> 
> 赞同：0
> 
> 时间：2012-06-14T14:27:25.170
> 
> 标签：asp.net, vb.net, events

我有一个带有下拉框、两个列表框和两个按钮的表单。

我删除了一个“选择”按钮，因为我刚刚使用了`DropDownList1_SelectedIndexChanged`，但是在我使用以下建议之前，该事件不会触发： **[为什么 DropDownList.SelectedIndexChanged 事件不会触发？](https://stackoverflow.com/questions/4943836/why-dropdownlist-selectedindexchanged-event-does-not-fire)**

它涉及更改`AutoPostBack='true'`和`EnableViewState="true"`属性

所以现在 DropDownList 可以工作，但是对于两个列表框，SelectedIndex 保持为-1，即使被选中也不会改变。

列表框代码：

```
<asp:ListBox ID="ListBox1" runat="server" EnableViewState="true" 
    Height="207px" Width="168px"></asp:ListBox> 
```

下拉列表代码：

```
<asp:DropDownList ID="DropDownList1" runat="server" EnableViewState="true"
    AutoPostBack="true" style="font-weight: 700; margin-left: 26px"> 
```

按钮点击事件代码：

```
If (ListBox1.SelectedIndex < 0) Then 'No user selected
    MsgBox("Please select a user to add from the Listbox on the left.", vbCritical, "ListBox2 Validation Error")
Else 
```

MsgBox 现在总是说没有用户被选择，但是有一个用户选择，很奇怪。

有任何想法吗？我认为这与回发、page_load 或列表框的 selectedindex 更改事件有关，在我进行修改之前它工作得很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T08:07:57.950

问题在于回发，并且填充列表框的代码位于`dropbox_load`子例程中。这意味着每次页面上发生更改时列表框都会重新填充，因此选定项索引将恢复为 -1。

# php - 将货币符号'$''£'转换为html代码$ £？

> ID：11035237
> 
> 赞同：2
> 
> 时间：2012-06-14T14:27:35.793
> 
> 标签：php, mysql, html

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-14T14:29:42.440

Currency symbols are perfectly "HTML safe". What you have is an *encoding problem*. You are outputting these characters encoded in one encoding (likely Latin-1), but your browser is interpreting them in some other encoding (likely UTF-8). The actual encoding and the declared encoding need to match. Follow [Handling Unicode Front To Back In A Web App](http://kunststube.net/frontback/) to see where your problem is.

# c# - 从远程数据库打印 Crystal Reports - WPF

> ID：11035243
> 
> 赞同：0
> 
> 时间：2012-06-14T14:27:46.063
> 
> 标签：c#, wpf, crystal-reports

我有一个 WPF 应用程序，它通过 Internet 连接到远程数据库并使用 Crystal 报表打印记录。当我连接到本地数据库时，它打印得很好。但是当连接到远程数据库时，它只是挂起。有没有办法增加 CR 的超时时间？

```
 ReportDocument oReportDocument = new ReportDocument();
            oReportDocument.Load(GV.strExePath + "\\Reports\\Labeller.rpt");

            lstDockets.Clear();
            lstDockets.Add(oTblBagLabel);                
            oReportDocument.SetDataSource(lstDockets);                    
            oReportDocument.PrintToPrinter(1, false, 0, 0); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:58:13.970

尝试使用更大的水晶报表源缓存持续时间。

像这样

```
CrystalReportSource1.CacheDuration = 6000 
```

# javascript - 如何检查是否指定了推荐人

> ID：11035245
> 
> 赞同：1
> 
> 时间：2012-06-14T14:27:47.477
> 
> 标签：javascript

我已经坚持了一个多小时：

```
 if((document.referrer===undefined)){

  if(url_window_location=='http://www.lhttp://livecas.com/sandbox/andbox/'){
      event_google_analytics_referrer=document.referrer.toString(); 
         log("DOCUMENT REFERRER: cookie is set user_details: "+document.referrer);
        eraseCookie('user_details');
         setCookie('user_details',document.referrer,365); 
   }

    if(url_window_location=='hhttp://livecas.com/sandbox/e')
    {   
        eraseCookie('user_details');
        setCookie('landing_page_ref',"FBLND1",365);
        //   log("Cookie is set"); 
    }
 }

 else{

       if(url_window_location=='http://livecas.com/sandbox/'){
            eraseCookie('user_details');
         setCookie('user_details',"Direct",365); 
          log("Direct cookie is set");

          event_google_analytics_referrer="Direct";
      }
 } 
```

如果 document.referrer 已设置/存在或其他，我希望它在 if 条件下执行块，如果不是，我希望它在 else 条件下。现在无论如何它都会进入其他条件

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-14T14:29:48.273

`document.referrer`一直存在。只是有时它是空白的（空字符串）。

而不是`if( document.referrer === undefined)`，只需使用`if(!document.referrer)`。这将对所有虚假值运行。

# ms-access - 在 Access 中按子组对报表条目进行排序

> ID：11035249
> 
> 赞同：0
> 
> 时间：2012-06-14T14:27:59.257
> 
> 标签：ms-access, vba

这就是我的数据现在的样子

*   任务
    *   子任务
*   任务
    *   子任务
    *   子任务
*   任务

我想知道是否可以使用 vba 代码根据子组的数量进行排序（正常访问报告排序会分解分组），这样它最终会像

*   任务
    *   子任务
    *   子任务
*   任务
    *   子任务
*   任务

多谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T16:04:37.730

在报表使用的查询中，按任务分组并拥有一个字段： `SubTasks: Count(SubTaskID)` 然后您可以在报表中按此字段排序。

# c# - 删除动态控件：清除工作但不删除

> ID：11035251
> 
> 赞同：4
> 
> 时间：2012-06-14T14:28:00.957
> 
> 标签：c#, asp.net, postback, dynamic-controls, createchildcontrols

我最近遇到了一个问题，我正在生成对下拉选择的动态控制。When the selection changes, I have to generate another set of dynamic controls, removing the existing controls.

所以我在做以下不起作用：

```
 private void ClearDynamicControls()
    {
        if (adapter != null)
        {
            //This has all the controls saved in some dictionary, key as control ID
            var controls = adapter.GetAllControls().Keys;
            Control mainControl = (PlaceHolder)this.Form.FindControl("MainContent");

            foreach (String controlName in controls)
            {
                Control controlToRemove = this.Form.FindControl("MainContent").FindControl(controlName);
                mainControl.Controls.Remove(controlToRemove);

            }
            var controls2 = mainControl.Controls;
            //clearing the controls in the dictionary
            adapter.ClearAllControls();
        }

    } 

```

但是使用 Clear() 方法的类似代码工作正常。那我该怎么办呢？

```
 private void ClearDynamicControls()
    {
        if (adapter != null)
        {
            //This has all the controls saved in some dictionary, key as control ID
            var controls = adapter.GetAllControls().Keys;
            Control mainControl = (PlaceHolder)this.Form.FindControl("MainContent");
            mainControl.Controls.Clear();

            //clearing the controls in the dictionary
            adapter.ClearAllControls();
        }

    } 

```

通过此代码，所有控件（动态和静态）都被删除。那么该怎么办呢？

如果我做错了什么，请告诉我。

我在下拉选择更改事件触发时调用此方法。这些控件已添加到表中...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:36:50.703

如果您知道控件的名称，则可以使用：

```
foreach(Control control in Controls){
  if(control.Name == "yourControlName"){
    Controls.Remove(control);
  }
} 
```

或者，如果您想从面板中删除所有控件，例如，您可以使用：

```
foreach(Control control in panel.Controls){      
        panel.Controls.Remove(control);
    } 
```

希望能帮助到你！

# java - 基本增量

> ID：11035259
> 
> 赞同：1
> 
> 时间：2012-06-14T14:28:24.547
> 
> 标签：java, loops, for-loop, increment

我知道这是一个非常基本的问题，但是。

我理解背后的概念。n++、++n、n--、--n。然而

```
public static void main(String[] args){

    int count = 1;
    for(int i =1;i<=10;++i){

    count = count * i;
    System.out.print(count);
    }
} 
```

所以它会打印：1 2 3 4 5 6 7 8 9 10。

我的问题是。为什么如果 i 被递增为 ++i 不是 i 然后被视为 2，而不是 1。 Inst ++i 的点，在 i 被另一个操作操作之前递增它？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-14T14:30:40.970

> ++i 的意义是在 i 被另一个操作操作之前递增 i 吗？

`++i`和之间的区别`i++`仅在用作更大表达式的一部分时才重要，例如

```
int j = ++i; // Increment then use the new value for the assignment
int k = i++; // Increment, but use the old value for the assignment 
```

在这种情况下，操作发生在循环的每次迭代结束时，*它自己*。所以你的循环相当于：

```
int count = 1;
// Introduce a new scope for i, just like the for loop does
{
    // Declaration and initialization
    int i = 1;
    // Condition
    while (i <= 10) {
        count = count * i;
        System.out.print(count);

        // Now comes the final expression in the for loop "header"
        ++i;
    }
} 
```

现在更改`++i`为`i++`最后没有任何区别 - 表达式的值不用于任何事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T14:30:11.443

直到循环的第一次迭代之后才会调用增量`for`。

虽然这是真的

```
j = i++;
k = ++i; 
```

返回不同的结果，在此上下文中将其视为在每个循环`++i`结束时调用的独立行。`for`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T14:31:53.290

您编写的 for 循环与以下内容相同：

```
i = 1;
while(i<=10) {
  count = count * i;
  System.out.print(count);
  i = i + 1;
} 
```

所以这就是为什么！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T15:40:26.683

`for(int i=1;i<=10;++i)`作为其他答案的补充，优先考虑的历史原因`for(int i=1;i<=10;i++)`是`++i`不需要将旧值存储`i`在额外的变量中。因此，`++i`比 快`i++`，尽管速度提高可以忽略不计。在现代编译器上，这种速度改进是作为一种优化完成的，因此这两个部分产生相同的编译器输出。然而，由于`++i`总是和 一样快或更快（例如，在旧的 C++ 编译器上）`i++`，许多有经验的程序总是`++i`在循环中使用。

正如其他答案所述，两段代码在功能上是等效的（在 for 循环的情况下）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T14:39:17.910

对于 i = 0 且当 i < 1= 10 时，打印 i，然后预递增 i。（++i/i++ 在这里没有区别）。

这里试试这个：

 `````
int i=1;  
while(i <= 10)  
  System.out.print(++i);  

i = 1;  
while (i <= 10)  
  System.out.print(i++); 
````  `* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-14T14:30:17.847

您想使用 i++ ，这是一个后增量。++i 被称为预增量，差异正是您所指出的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-14T14:31:03.050

在这种情况下`++i`发生在循环结束时，它会递增，然后检查新值是否仍然满足终止条件。

另外，输出不会是：

```
count   i  
1   *   1 = 1
1   *   2 = 2  
2   *   3 = 6   
6   *   4 = 24 
```

等等``

# mootools - 在继续之前等待图像加载的非超时方法？

> ID：11035260
> 
> 赞同：1
> 
> 时间：2012-06-14T14:28:27.340
> 
> 标签：mootools, delay

我有一个 Fx.Slide 实例，它通过 ajax 加载内容，然后滑动打开元素。它在滑动打开之前正确等待 AJAX 调用返回（并填充其目标元素的内容），但是因为我没有传输图像数据，只有 url，当 Fx.Slide 实例时，用户的浏览器仍在下载图像被切换。

因此，在测量元素时，它没有考虑图像的大小，因此滑开的距离不够远。

A`.delay()`会起作用，但它是一种 hack-ish 解决方法。

[相关的jsFiddle](http://jsfiddle.net/6Lpeu/1/)

* * *

## 解决方案

感谢 lorenzo-s，以下解决方案非常有效：

```
var container = document.id('something');
new Request({
    url: '/path/to/listener',
    onSuccess: function(imageUrl) {
        Asset.image(imgSrc, {
            title: 'Something',
            onLoad: function() {
                // .. trigger the Fx.Slide instance here
            }
        }).inject(container);
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T19:06:11.220

您应该使用[**`Asset.image()`**](http://www.mootools.net/docs/more/Utilities/Assets#Asset%3aAsset-image)Mootools More 中的方法。

该方法*预加载图像并返回 img 元素。*您可以使用`onLoad`图像“准备好”后将调用的属性（在第二个参数对象上）。

```
Asset.image('http://url.to/your/image.jpg', {
    onLoad: function() {
        alert('Image ready.');
    }
}); 
```

此处更新示例：http: **[//jsfiddle.net/6Lpeu/3/](http://jsfiddle.net/6Lpeu/3/)**

# html - asp.NET IIS 和脚本

> ID：11035262
> 
> 赞同：-1
> 
> 时间：2012-06-14T14:28:30.547
> 
> 标签：html, asp.net, iis

我最近在我的 Windows Xp Proffesional 机器上安装了 IIS，使用以下语法创建了一个 .asp 文件：

```
 <!DOCTYPE html>
 <html>
 <body>
 <% Response.write("Hello World") %>
 </body>
 </html> 
```

我运行时的输出如下所示： `<% Response.write("Hello World") %>`

这是否意味着我的 IIS 没有正确安装？因为我很确定这应该只打印“Hello World”（但没有引号）

为了清楚起见，我是我机器的管理员，所以我不是管理员没有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T14:49:52.960

假设您已经准备好在您的计算机上安装 dot net，然后打开您的 Internet 信息服务窗口（从控制面板打开管理工具，有 IIS），选择您的站点（默认只有一个），右键单击它，转到选项卡“主目录”并在应用程序设置上，使其成为应用程序。

之后，您的页面必须运行。

# objective-c - Cocoa App Sandbox - 加载包时出错

> ID：11035263
> 
> 赞同：5
> 
> 时间：2012-06-14T14:28:35.780
> 
> 标签：objective-c, cocoa, testing

我将我的应用程序设置为使用沙盒，现在我无法运行我的单元测试。我收到此错误消息：

`objc[18812]: GC: forcing GC OFF because OBJC_DISABLE_GC is set 2012-06-14 09:19:42.689 Gitpilot[18812:603] Error loading /Users/corey/Library/Developer/Xcode/DerivedData/Gitpilot-bedgmtkbdheptpbpjfklegmqyipi/Build/Products/Debug/GitpilotTests.octest/Contents/MacOS/GitpilotTests: dlopen(/Users/corey/Library/Developer/Xcode/DerivedData/Gitpilot-bedgmtkbdheptpbpjfklegmqyipi/Build/Products/Debug/GitpilotTests.octest/Contents/MacOS/GitpilotTests, 262): no suitable image found. Did find: /Users/corey/Library/Developer/Xcode/DerivedData/Gitpilot-bedgmtkbdheptpbpjfklegmqyipi/Build/Products/Debug/GitpilotTests.octest/Contents/MacOS/GitpilotTests: open() failed with errno=1 IDEBundleInjection.c: Error loading bundle '/Users/corey/Library/Developer/Xcode/DerivedData/Gitpilot-bedgmtkbdheptpbpjfklegmqyipi/Build/Products/Debug/GitpilotTests.octest' 2012-06-14 09:19:42.733 Gitpilot[18812:603] ApplePersistenceIgnoreState: Existing state will not be touched. New state will be written to /var/folders/rs/63y00fxj7dj07g91vrswhk240000gn/T/com.gitpilot.Gitpilot/com.gitpilot.Gitpilot.savedState`

我正在使用带有 OCMock 的 SenTesting 框架。有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-11T20:59:01.483

如果您在项目设置编辑器中创建新的构建配置，您可以进入构建设置选项卡并禁用该配置的代码签名和权利。然后，在方案编辑器中，选择该配置进行单元测试，让您的发布和调试版本保持不变，同时仍然能够运行单元测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-28T12:00:00.127

我在 xcode 5 中遇到了同样的问题。原来我必须在正常目标中禁用沙箱才能正确加载测试目标。

# javascript - 文件中的行号与 HTML 表单的 textarea 字段中的行号之间的对应关系

> ID：11035270
> 
> 赞同：1
> 
> 时间：2012-06-14T14:29:05.200
> 
> 标签：javascript, python, html, forms, textarea

我有一个由文本区域组成的表单，感谢 Javascript 的行号。我使用这个表单来验证 JSON，就像 jsonlint.org 那样。用户输入一些 JSON，按下验证，然后得到答案。我自己没有解析文件，我使用 python 命令：

```
python -m json.tool input.json 
```

如您所见，此命令需要一个文件。所以我正在做的是以下内容：

*   将表单数据写入文件
*   运行此命令并获取输出
*   如果没有错误，则输出到屏幕“有效 JSON”，如 jsonlint.org 否则显示程序给出的错误消息：“错误 .... line x column y (char z)”

Python 程序给出的行号对应于文件中的行号，而不是来自 textarea 的行号...使我的 Javascript 行号无用。顺便说一句，找到 2 的对应关系让我很难，因为它取决于我的文本区域的宽度，以及我在其中使用的字体，以及了解文件中的行号是如何设置的（我不太明白）

我怎么能找到 2 的对应关系？

谢谢

刚刚意识到：我的 textarea 看起来与您在 SOF 上提问时输入的完全相同：D

----- 编辑作为对 Ben 的回应 ----- 非常有趣。我实现了我要求使用名为“wrap”的 textarea 选项的功能。我设置为“软”：

```
<form method='post' action='/exec' id="jsonform" >
       <textarea wrap="hard" name="json" id="json_input" rows="20" cols="150" placeholder="Enter JSON to validate.">{{ resp | safe }}</textarea>
       <div align="center">
       <input type='submit' value='Validate' id="button" >
       </div>
    </form> 
```

但是，这会使有效的 JSON 无效。因为 Python 模块希望在换行符之前有引号......所以我需要为验证器提供 textarea="soft" 表单中的数据，并显示 textarea="hard" 表单中的数据。但我有一个表格。我还尝试了您给我的帖子中给出的代码，但由于某种原因它不起作用。而且我不知道Javascript（需要改变它。）所以我无法调试或调整代码...... HELLLP

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T15:57:15.870

与其在事后尝试推导您的线条，不如在发送要测试的数据之前放入标记。 [在文本区域中找到“换行符”，它是自动换行的阿拉伯文本](https://stackoverflow.com/questions/4719777/finding-line-breaks-in-textarea-that-is-word-wrapping-arabic-text)看起来它有一种非常强大的技术，可以在所有换行处强制换行。如果 textarea 使用的换行符和文件使用的换行符不同，您应该仍然会发现在传输过程中从一种转换到另一种相对容易。如果您不想干扰它，因为您希望用户能够在没有额外换行符的情况下编辑它，如果/当它返回无效时，那么我建议将 textarea 克隆到“显示：无”内的空间" div 或等效设置。适当地对克隆进行修改和测试，然后将反馈放在未触及的可见原件上。如果文件具有自动换行宽度，那么您必须确保 textarea 的自动换行宽度更短，但这应该不难，如果这是一个问题，我会有点惊讶开始.

编辑：如果python模块必须在断线之前有引号，那么无论如何你都会遇到一些麻烦 - 任何人都可以随时手动输入硬断线，只需按Enter键即可。我的建议是在 Json 和文件之间有某种处理器功能，并在换行符之前放置适当的引号 - 尽管我可能在这里误解了一些事情。

但是，如果您想要使用表单的多个副本，那是完全可行的。您确实需要使用 jQuery，但无论如何 jQuery 都值得学习。（这有点令人沮丧，直到你弄清楚它，然后在你弄清楚它是 javascript 发生过的最好的事情之后，你永远不想没有它。）包括最新的 jQuery 副本（它是一个 javascript 插件）。该`clone()`功能将让您在克隆时创建现有文本区域（或表单，或任何其他 DOM 对象，实际上）的精确副本（即，它将所有文本写入其中）。和`insertBefore()`/或`insertAfter()`函数可以让你把它放在你想要的页面中的任何地方——也许放在 a`<div style="display:none"></div>`中，这样你就可以随心所欲地随意使用它，而无需在屏幕上做任何可见的事情。

# icloud - 为什么 startDownloadingUbiquitousItemAtURL:fileURL: 不开始下载项目？

> ID：11035276
> 
> 赞同：1
> 
> 时间：2012-06-14T14:29:14.557
> 
> 标签：icloud

我正在使用`NSMetadataQuery`来检查 iCloud 中的文件。在`NSMetadataQueryDidFinishGatheringNotification`处理程序内部，如果项目未下载或未下载，我开始使用下载它`startDownloadingUbiquitousItemAtURL:fileURL:`- 但最近，在两台设备上使用该应用程序后，文件似乎卡住了；`startDownloadingUbiquitousItemAtURL:fileURL:`不再开始下载。

这是代码的缩写形式：

```
 for (NSMetadataItem * result in query.results)
    {   
        NSURL *fileURL = [result valueForAttribute:NSMetadataItemURLKey];

        // snipped: checks that the item isn't hidden or already downloaded

        if (![fileURL getResourceValue:&isDownloading forKey:NSURLUbiquitousItemIsDownloadingKey error:&error] || !isDownloading)
        {
            NSLog(@"Error %@ getting downloading state for item at %@", error, fileURL);
            continue;
        }

        if ([isDownloading boolValue])
        {
            if (![fileURL getResourceValue:&downloadPercent forKey:NSURLUbiquitousItemPercentDownloadedKey error:&error] || !downloadPercent)
            {
                NSLog(@"Error %@ getting downloaded progress for item at %@", error, fileURL);
                continue;
            }

            NSLog(@"Item at %@ has is %@%% downloaded", fileURL, downloadPercent);
        }
        else
        {
            NSLog(@"Starting to download item at %@", fileURL);

            if ([[NSFileManager defaultManager] startDownloadingUbiquitousItemAtURL:fileURL error:&error])
            {
                isDownloading = nil;

                if ([fileURL getResourceValue:&isDownloading forKey:NSURLUbiquitousItemIsDownloadingKey error:&error] && isDownloading)
                {
                    if ([isDownloading boolValue])
                    {
                        NSLog(@"After starting to download, item at %@ is downloading.", fileURL);
                    }
                    else
                    {
                        NSLog(@"After starting to download, item at %@ is still not downloading!", fileURL);
                    }
                }
                else
                {
                    NSLog(@"Error %@ getting downloading state again for item at %@", error, fileURL);
                }
            }
            else
            {
                NSLog(@"Error %@ starting to download item at %@", error, fileURL);
            }
        }
    } 
```

我看到的是：

```
Starting to download item at XXXXXXXX
After starting to download, item at XXXXXXXX is still not downloading!
Starting to download item at YYYYYYYY
After starting to download, item at YYYYYYYY is still not downloading!
Starting to download item at ZZZZZZZZ
After starting to download, item at ZZZZZZZZ is still not downloading! 
```

为什么 startDownloadingUbiquitousItemAtURL:fileURL: 不开始下载项目？如果是由于某些冲突，我如何检测到该冲突？

* * *

更新：我查看了设备控制台，我看到了这个：

```
MyApp[NNNN] <Warning>: Starting to download item at XXXXXXXX
librariand[MMMM] <Error>: unable to download XXXXXXXX (0x8000000000000000)
MyApp[NNNN] <Warning>After starting to download, item at XXXXXXXX is still not downloading!
MyApp[NNNN] <Warning>Starting to download item at YYYYYYYY
librariand[MMMM] <Error>: unable to download YYYYYYYY (0x8000000000000000)
MyApp[NNNN] <Warning>After starting to download, item at YYYYYYYY is still not downloading!
MyApp[NNNN] <Warning>Starting to download item at ZZZZZZZZ
librariand[MMMM] <Error>: unable to download ZZZZZZZZ (0x8000000000000000)
MyApp[NNNN] <Warning>After starting to download, item at ZZZZZZZZ is still not downloading! 
```

所以看起来至少守护进程被告知下载文件，即使它不能。有没有关于图书馆员错误的文档？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T20:01:23.167

Take a closer look at `NSMetadataItem` in your `NSMetadataQuery` results. When you iterating through the results of your query request you can get values for the following attributes instead:

```
NSString * const NSMetadataUbiquitousItemIsDownloadedKey;
NSString * const NSMetadataUbiquitousItemIsDownloadingKey;
NSString * const NSMetadataUbiquitousItemIsUploadedKey;
NSString * const NSMetadataUbiquitousItemIsUploadingKey;
NSString * const NSMetadataUbiquitousItemPercentDownloadedKey;
NSString * const NSMetadataUbiquitousItemPercentUploadedKey; 
```

# java - 如何通过camel spring DSL将文件作为邮件附件发送

> ID：11035278
> 
> 赞同：3
> 
> 时间：2012-06-14T14:29:17.757
> 
> 标签：java, spring, apache-camel

我在当前项目中使用 Camel 2.9.x 进行集成。其中一个路由包含两个端点——文件轮询端点和 smtp 邮件端点。第一个端点生成的文件必须通过 smtp 端点作为附件发送。

对于 Camel 配置，我们使用 Spring DSL（这实际上是一个要求）。春季版本是 3.1.1。不幸的是，我只找到了在骆驼路线中将文件附加到电子邮件的 java dsl 示例和文档。

```
<endpoint uri="file:///path/to" id="file-source"/>
<endpoint uri="smtp://mail.example.com:25/?username=someuser@example.com&amp;password=secret&amp;to=recv@example.com" id="mail-dest"/>
<route id="simplified-for-readability">
  <from ref="file-source"/>
  <to ref="mail-dest"/>
</route> 
```

此配置将文件作为纯文本/文本正文发送，而不是作为附件（甚至是二进制文件）。有没有办法在不使用 Java dsl 的情况下将文件作为附件发送？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-14T22:36:24.303

这可以通过 Spring 配置完成，但您可能必须编写一个简单的 java bean 左右，尽管这与 spring 或 java DSL 无关。

首先创建一个类似于这个的类（你可能需要在这里修复一些东西）：

```
// Note: Content Type - might need treatment!
public class AttachmentAttacher{
   public void process(Exchange exchange){
      Message in = exchange.getIn();
      byte[] file = in.getBody(byte[].class);
      String fileId = in.getHeader("CamelFileName",String.class);
      in.addAttachment(fileId, new DataHandler(file,"plain/text"));
    }
} 
```

然后只需连接一个弹簧豆并在您的路线中使用它。应该做的伎俩。

```
<bean id="attacher" class="foo.bar.AttachmentAttacher"/>

<route>
  <from ref="file-source"/>
  <bean ref="attacher"/>
  <to ref="mail-dest"/>
</route> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-03-27T04:44:43.820

这对我有用，与上面的内容略有不同。

```
import javax.activation.DataHandler;
import javax.mail.util.ByteArrayDataSource;

import org.apache.camel.Exchange;
import org.apache.camel.Message;
import org.apache.camel.Processor;

public class AttachmentAttacher implements Processor {

  private final String mimetype;

  public AttachmentAttacher(String mimetype) {
    this.mimetype = mimetype;
  }

  @Override
  public void process(Exchange exchange){
    Message in = exchange.getIn();
    byte[] file = in.getBody(byte[].class);
    String fileId = in.getHeader("CamelFileName",String.class);
    in.addAttachment(fileId, new DataHandler(new     ByteArrayDataSource(file, mimetype)));
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-06T07:48:37.613

对我来说，以下代码片段无需设置 MIME 类型即可工作：

（当然，您可以根据需要对其进行调整）

```
public class MyProcesor implements org.apache.camel.Processor {
    @Override
    public void process(Exchange exchange) throws Exception {
        String tempDir = System.getProperty("java.io.tmpdir");
        File file = new File(tempDir + "/filename.ext" ); //or wherever you file is located
        exchange.getIn().addAttachment("id", new DataHandler(new FileDataSource(file))); //no explicit MIME-type needed
    }    
} 
```

但是，我没有这个 Spring DSL 的代码......

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-25T13:34:25.877

您可能可以使用诸如[simple](http://camel.apache.org/simple.html)之类的表达式来执行此操作。简单很好，因为它带有骆驼，但我认为它的功能不足以做你想做的事。我还没有尝试过，但我确信一个[时髦](http://camel.apache.org/groovy.html)的表达可以做到这一点。可以在 Spring 中指定一个 groovy 表达式。

# .net - 在图例部分显示数据点值。SSRS

> ID：11035281
> 
> 赞同：3
> 
> 时间：2012-06-14T14:29:24.533
> 
> 标签：.net, sql-server-2008, reporting-services

是否可以在 SSRS 的图表中显示图例部分中的值。

类似于图片

![在此处输入图像描述](../Images/7bfb50c6b0e038164b0ba3dbfd1f20e9.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T14:32:30.057

微软的罗伯特布鲁克纳写了一篇文章，在这里展示了类似的内容：http: [//msdn.microsoft.com/en-us/library/aa964128](http://msdn.microsoft.com/en-us/library/aa964128(v=sql.90).aspx) (v=sql.90).aspx 。向下滚动到标题为“添加图表数据标签”的部分。

# symfony - 如何查询在教义 odm 中嵌入了特定项目的所有项目

> ID：11035284
> 
> 赞同：2
> 
> 时间：2012-06-14T14:29:29.440
> 
> 标签：symfony, doctrine, doctrine-odm, doctrine-query

我对某事有评论，并且可以喜欢它们。喜欢的内容保存在`Comments`as 中`EmbedMany(targetDocument=User)`。

我想查询`Comments`特定用户喜欢的所有内容，我该怎么做？

我想到了类似的东西：

```
$dm->createQueryBuilder('Comment')
    ->field('likes.id')
    ->in(array($user->getId()))
    ->getQuery()
    ->execute(); 
```

但这似乎不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T16:13:33.587

您可以像查询普通字段一样查询嵌入的文档。但是，它的类型是 ObjectId，因此您必须手动创建要查询的 MongoId。

```
$dm->createQueryBuilder('Comment')
    ->field('likes.$id')->equals(new \MongoId($user->getId()))
    ->getQuery()
    ->execute(); 
```

请注意，作为参考，它将是：

```
$dm->createQueryBuilder('Comment')
    ->field('likes')->references($user)
    ->getQuery()
    ->execute(); 
```

# mysql - 使用 MySQL 将二进制转换为十进制

> ID：11035285
> 
> 赞同：4
> 
> 时间：2012-06-14T14:29:31.640
> 
> 标签：mysql, binary, decimal

我正在尝试在 MySQL 中构建一个查询，该查询连接一堆二进制字段，然后将结果作为 DECIMAL 给我。

例如：

```
SELECT CONCAT (setting1, setting2, setting3) AS settings; 
```

可能给了我：

```
101
111
110 
```

我想将此值传递给一个函数（convert？cast？），它将给我相应的 DECIMAL 值：

```
5
7
6 
```

我已经尝试了一些 and 的组合，`cast()`但`convert()`还没有破解它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T04:18:33.657

CONV(BINARY(CONCAT(setting1, setting2)), 2, 10)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T14:33:04.607

没试过，但是试试。

首先，您的输入假设是 6。

```
INSERT INTO Table (FieldTest) VALUES (UNHEX(CONV(6, 10, 16)))
SELECT CONV(HEX(UNHEX(6)), 16, 10) 
```

有一个字段

```
SELECT CONV(HEX(FieldTest), 16, 10)) 
```

UNHEX 将数据从十六进制转换为二进制。

CONV 会将数据从一个基础转换到另一个基础。

在这里将基数 10 转换为 16（dec 到 hex），然后我们将 hex 转换为 bin。

When come the select, we do BIN to HEX, HEX to BIN

实际上，您可以`CONV(6, 10, 2)`在阅读时做相反的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T19:51:17.677

你可以尝试用二进制做幂数学

`SELECT setting1 * 4 + setting2 * 2 + setting3 * 1 AS settings;`

但这意味着它在做什么

`SELECT setting1 * POW(2, 2) + setting2 * POW(2, 1) + setting3 * POW(2, 0) AS settings;`

2^0 代表最右边的位

2^1 是第二个，依此类推...

将来，如果您在 MySQL 中有二进制列，将它们组合成一个可能会更容易[在列上留下评论以记住顺序]

您可以将数据添加到数据库中，例如

`INSERT INTO settings (setting) VALUES (setting1 * 4 + setting2 * 2 + setting1 * 1);`

并拉出一个 `SELECT setting & 2 FROM settings;` 将返回设置2的值。

查看[按位函数](http://php.net/manual/en/language.operators.bitwise.php)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-30T23:50:04.080

这可能会迟到，但如果有人来了，我们可以结合几个函数来解决这个问题

我们可以使用的第一个函数 CONV 允许我们将输入从某个基数转换为另一个基数，以下示例将 101 从基数 2（二进制）转换为基数 10（十进制）：

```
SELECT CONV(101, 2, 10) 
```

如果源是字符串，我们可以先使用强制转换将其转换为二进制，例如：

```
SELECT CONV(CAST('11' AS BINARY), 2, 10) 
```

# java - 如何从返回两个不同值的 swingworker 更新 GUI

> ID：11035287
> 
> 赞同：6
> 
> 时间：2012-06-14T14:29:33.687
> 
> 标签：java, swing, user-interface, swingworker

我有一个 Java 应用程序，它使用 SwingWorker 来更新 GUI 中的标签和进度条，效果很好。但是，我想为此设置添加一个功能。

我的摇摆工人执行一项具有长度的任务`n`，并重复该任务`m`次数。现在，我的 GUI 只告诉我任务重复了多少次，但我希望它也告诉我我们正在进行的任务的长度。说`n=300`and `m=50`，我想要类似的东西：

```
Task 49 is at 248 ()
Task has been repeated 48 times 
```

我应该在我的 SwingWorker 中修改什么？

```
/**
 *
 * @author digitaldust
 */
public class Model extends SwingWorker<Integer, Integer> {

    private HashMap<String, Number> GUIparams;
    private int session;
    private int ticks;

    Model(HashMap<String, Number> KSMParams) {
        GUIparams = KSMParams;
        session = (Integer)GUIparams.get("experimentsInSession");
        ticks = (Integer)GUIparams.get("howManyTicks");
    }

    /**
     * Actual simulation
     */
    @Override
    protected Integer doInBackground() throws Exception {

        int i=0;
        while(!isCancelled() && i<session){
            i++;
            int ii=0;
            while(!isCancelled() && ii<ticks){
                // this is n, the task length and I'd like to update the GUI with this value
                ii++;
            }
            System.out.println(i);
            // this is m, how many time the task has been repeated, and now it is updated in the GUI
            publish(i);
            setProgress(i);
            Thread.sleep(1000);
        }
        return i;
    }  

    /**
     * Invoked when simulation exits
     */
    @Override
    protected void done() {
        if (isCancelled()) {
            Logger.getLogger(Model.class.getName()).log(Level.WARNING, "Experiment session cancelled by user. Closing Session...");
        } else {
            // do stuff

            Logger.getLogger(Model.class.getName()).log(Level.WARNING, "Experiment session ended.");
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T14:48:18.410

第二类参数V in`SwingWorker<T,V>`用于通过该SwingWorker的发布和处理方法进行中间结果。这可能是您的自定义类。这是基于发布的 SSCCE 的示例（为清楚起见而缩短）：

```
class Progress {
    private int task;
    private int element;

    public Progress(int task, int element) {
        super();
        this.task = task;
        this.element = element;
    }
        ...
}

public class Model extends SwingWorker<Integer, Progress> {
    ...
    @Override
    protected Integer doInBackground() throws Exception {
            ...
            publish(new Progress(i, ii));
        }
} 
```

***编辑：过程方法实现示例***

```
@Override
protected void process(List<Progress> progressList) {
    for (Progress p : progressList){
        System.out.println(p.getTask() + " : " + p.getElement());
    }
} 
```

***编辑：用户界面更新示例***

这是一个稍微修改过的 worker 实现版本，类似于[SwingWorker](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html)手册中演示的示例。唯一的变化是`textArea`成员的介绍和更新的`setProgress()`调用`doInBackground()`。`progress`属性用于更新进度条，`process()`用于更新文本区域。

```
public static class Model extends SwingWorker<Integer, Progress> {

    private HashMap<String, Number> GUIparams;
    private int session;
    private int ticks;
    private JTextArea textArea;

    Model(HashMap<String, Number> KSMParams, JTextArea textArea) {
        GUIparams = KSMParams;
        session = (Integer)GUIparams.get("experimentsInSession");
        ticks = (Integer)GUIparams.get("howManyTicks");

        this.textArea = textArea;
    }

    @Override
    protected void process(List<Progress> progressList) {
        for (Progress p : progressList){
            textArea.append(p.getTask() + " : " + p.getElement() + "\n");
            System.out.println(p.getTask() + " : " + p.getElement());
        }
    }

    /**
     * Actual simulation
     */
    @Override
    protected Integer doInBackground() throws Exception {

        int i=0;
        while(!isCancelled() && i<session){
            i++;
            int ii=0;
            while(!isCancelled() && ii<ticks){
                // this is n, the task length and I'd like to update the GUI with this value
                ii++;
            }
            //System.out.println(i);
            // this is m, how many time the task has been repeated, and now it is updated in the GUI
            publish(new Progress(i, ii));
            //setProgress(i);
            setProgress(100 * i / session);
            Thread.sleep(1000);
        }
        return i;
    }  

    /**
     * Invoked when simulation exits
     */
    @Override
    protected void done() {
        if (isCancelled()) {
            Logger.getLogger(Model.class.getName()).log(Level.WARNING, "Experiment session cancelled by user. Closing Session...");
        } else {
            // do stuff

            Logger.getLogger(Model.class.getName()).log(Level.WARNING, "Experiment session ended.");
        }
    }
} 
```

这是一个演示初始化：

```
final JProgressBar progressBar = new JProgressBar(0, 100);
final JTextArea textArea = new JTextArea();
final JButton button = new JButton("Start");

button.addActionListener(new ActionListener(){
    @Override
    public void actionPerformed(ActionEvent e) {
        HashMap<String, Number> map = Maps.newHashMap();
        map.put("experimentsInSession", 10);
        map.put("howManyTicks", 5);

        Model task = new Model(map, textArea);
        task.addPropertyChangeListener(
                 new PropertyChangeListener() {
                     public  void propertyChange(PropertyChangeEvent evt) {
                         if ("progress".equals(evt.getPropertyName())) {
                             progressBar.setValue((Integer)evt.getNewValue());
                         }
                     }
                 });
        task.execute();
    }
}); 
```

# sql - SQL Server Management Studio - 如何在不删除表的情况下更改字段类型

> ID：11035295
> 
> 赞同：26
> 
> 时间：2012-06-14T14:29:46.477
> 
> 标签：sql, sql-server, sql-server-2008, tsql

在 SQL Server Management Studio 中，当将设计视图中的现有字段从`DECIMAL (16,14)`更改为`DECIMAL (18,14)`它时，我将无法在不删除整个表及其所有数据的情况下进行保存。

一旦数据库填充了记录，是否可以更改字段类型？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-06-14T14:32:33.903

只需使用 T-SQL 脚本而不是可视化设计器即可实现您的目标：

```
ALTER TABLE dbo.YourTableNameHere
ALTER COLUMN YourColumnNameHere DECIMAL(18, 14) 
```

你应该没事。

视觉设计师采取了更加谨慎的方法，即使用新结构创建表，然后复制所有数据——它可以工作，但很乏味。通常，只要您不截断列（使其更短），您绝对可以使用 T-SQL 语句“就地”更改列的数据类型。

另外：默认情况下，SSMS 设计器会格外小心，不允许任何需要删除和重新创建表循环的更改。`Tools > Options`您可以在此对话框中禁用这种额外的谨慎：

![在此处输入图像描述](../Images/d31baac084d8abbe3b82f39df8e698a2.png)

如果取消选中该选项，您将能够在视觉设计器中进行“破坏性”更改

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-12T16:47:16.037

即使在 SSMS 中未选中该选项，Designer 仍会删除该表。下次它不会提示你。为了证明，启动 SQL 分析器并使用 SSMS 设计器更改列，您将看到在执行更改表命令之前发出了删除表命令。

# java - R 类未生成（API 错误？） - Android 项目

> ID：11035299
> 
> 赞同：0
> 
> 时间：2012-06-14T14:29:56.163
> 
> 标签：java, android, android-layout

自从我刚读完 Head First Java 书以来，我第一次尝试 Android 编程。我正在阅读[记事本教程](http://developer.android.com/resources/tutorials/notepad/index.html)当我为项目导入文件时，没有生成我的 R 类。我认为这是因为我在我的一个 xml 文件中遇到了错误。我正在使用 API 7

错误如下：错误：不允许字符串类型（在“layout_height”处，值为“match_parent”）。note_edit.xml /Notepadv2/res/layout 第 3 行 Android AAPT 问题

这是我的xml代码：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" android:layout_width="match_parent"
    android:layout_height="match_parent">

    <LinearLayout android:orientation="horizontal"
        android:layout_width="match_parent"
        android:layout_height="wrap_content">

        <TextView android:layout_width="wrap_content"
            android:layout_height="wrap_content" 
            android:text="@string/title" />
        <EditText android:id="@+id/title" 
          android:layout_width="wrap_content"
            android:layout_height="wrap_content" 
            android:layout_weight="1"/>
    </LinearLayout>

    <TextView android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:text="@string/body" />
    <EditText android:id="@+id/body" android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:scrollbars="vertical" />

    <Button android:id="@+id/confirm" 
      android:text="@string/confirm"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T14:36:25.687

你用的是什么版本？2.1 将不支持`match_parent`并且，如果您的项目`res`文件夹包含任何错误意味着，您的`R.java`文件将不会生成，直到您清除`xml`文件中的错误。

因此，只需将高度更改为`fill_parent`而不是`match_parent`将项目目标更改为 2.2

之后，做了这些事情。只需清理您的项目并运行。希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T14:33:08.067

尝试`fill_parent`代替`match_parent`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T14:39:09.710

从 API 级别 8 开始，它支持 match_parent 低于 8 的单词将不支持。因此，将 match_parent 替换为 fill_parent

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T14:40:04.483

在他们添加的 API`match_parent`的某个点上，您正在使用 api 7 无法“理解”的东西来代替`fill_parent`代码中的某个位置，因此它只将其视为一个字符串，fill_parent/match_parent 就是一个很好的例子

# css - 访问 HTML5 游戏应用程序精灵表的最快方法

> ID：11035301
> 
> 赞同：0
> 
> 时间：2012-06-14T14:30:01.170
> 
> 标签：css, database, html, sprite

我正在构建一个 HTML5 应用程序，可以访问来自精灵表的大约 1000 多个图像。

目前我正在从数据库访问图像，它有大约 200 毫秒的小时间延迟。我已经检查过了，这不是导致问题的 onlick 或 touch 事件。有没有比访问数据库更好的选择...比如说将图像保存在 Java 类中？

如果我在 XML 中执行此操作并通过 DOM 引用图像，则继续查找整个页面（甚至通过 ID）可能会非常复杂。

建设性的建议将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T08:48:57.157

一种选择可能是使用 CSS 图像精灵。

[http://www.w3schools.com/css/css_image_sprites.asp](http://www.w3schools.com/css/css_image_sprites.asp)

# html - 纵向缩放 div；保持纵横比

> ID：11035303
> 
> 赞同：1
> 
> 时间：2012-06-14T14:30:11.217
> 
> 标签：html, aspect-ratio

SO：我花了好几个小时来解决这个设计问题，但似乎找不到准确的答案。我正在尝试缩放 div 以适应指定的高度但限制其纵横比。见例子：http: [//jsfiddle.net/ks2jH/121/](http://jsfiddle.net/ks2jH/121/)

根据我的研究，讨论已经*遍布*各地，包括[这里](https://stackoverflow.com/questions/1311068/scale-a-div-to-fit-in-window-but-preserve-aspect-ratio)。麻烦的是，div 仅根据浏览器的宽度而不是其高度来调整大小和约束。

我发现两个最接近宽度的解决方案：(1) 使用 :after 伪类[http://jsfiddle.net/ks2jH/89/](http://jsfiddle.net/ks2jH/89/)，或 (2) 使用空白/透明 png [ [http://jsfiddle.净/ks2jH/94/]](http://jsfiddle.net/ks2jH/94/])。

*当然，这个想法是在不指定*宽度的情况下实现相同的目标，因为它会根据高度自动调整。

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T20:34:35.333

做到了，使用jQuery。

[http://jsfiddle.net/5TETn/210/](http://jsfiddle.net/5TETn/210/)

我能够[在 GitHub 上通过 Mottie](https://github.com/Mottie)修改纵横比脚本 [参见：http://jsfiddle.net/Mottie/5TETn/8]，以实现仅靠 CSS 无法实现的功能。非常感谢，善良的先生。

# activerecord - 在非 Rails 应用程序中测试与 Shoulda 的 ActiveRecord 关联

> ID：11035311
> 
> 赞同：2
> 
> 时间：2012-06-14T14:30:21.247
> 
> 标签：activerecord, rspec, sinatra, shoulda

应用程序：Sinatra + ActiveRecord
尝试使用最佳实践测试关联的存在。
我真的很喜欢应该的语法：

```
 describe Bar do
      it { should belong_to(:foo) }
    end 
```

但是，RSpec 似乎找不到该`belong_to`方法。

```
 1) ResOutcome 
       Failure/Error: it { should belong_to(:foo) }
       NoMethodError:
         undefined method `belong_to' for #<RSpec::Core::ExampleGroup::Nested_1:0x00000103ac6760>
       # ./spec/models/bar_spec.rb:48:in `block (2 levels) in <top (required)>' 
```

有什么提示吗？
Shoulda 关联测试是否仅适用于 Rails 应用程序（使用 rspec-rails）？
谢谢大家的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T08:51:06.330

您是否将`shoulda-matchers`gem 添加到您的 Gemfile 中？ [https://github.com/thoughtbot/should-matchers](https://github.com/thoughtbot/shoulda-matchers)

* * *

**更新：**

添加`require 'shoulda/matchers`到您的`spec_helper.rb`配置中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T17:14:42.040

我有一个类似的问题，虽然我没有使用 RSpec。不过仍然使用 Sinatra 和 ActiveRecord。

就我而言，我需要将测试类从继承自更改`ActiveSupport::TestCase`为继承自`Test::Unit::TestCase`。

反正我没有使用这个`ActiveSupport::TestCase`功能，所以它工作正常。我意识到这并不是您真正的用例，但也许它为您指明了正确的方向并帮助其他正在使用`Test::Unit`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-11T23:32:09.970

我们遇到了类似的问题，并且正在使用非 Rails 应用程序。

我们的问题原来是因为我们在实际需要我们的应用程序之前尝试需要“should-matchers”，这意味着 gem 正在寻找 ActiveRecord::Base 并且找不到它。

我们通过首先要求应用程序然后要求'shouda-matchers'来解决问题。愚蠢的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-21T15:47:38.397

正如其他答案所提到的，发生这种情况`shoulda-matchers`是因为在您的 ActiveRecord 连接建立之前包含在内，至少在 Sinatra 上是这样。

在您的 Gemfile 中，请务必添加`require: false`，如下所示：

```
gem "shoulda-matchers", "~> 2.4.0", require: false 
```

这可以防止应用程序在完成任何其他操作之前自动要求 gem。

然后在`spec/spec_helper.rb`您`active_record`的`shoulda-matchers`. 例如：

```
require File.dirname(__FILE__) + '/../the_app_itself'
require 'shoulda-matchers' 
```

现在您可以像往常一样在您的规范中使用匹配器：

```
describe LouieGeetoo do
  it { should have_many(:video_games) }
end 
```

耶！

# php - 如果已发送标头，如何使用 PHP 重定向？

> ID：11035312
> 
> 赞同：2
> 
> 时间：2012-06-14T14:30:23.150
> 
> 标签：php, http, redirect

在 PHP 中重定向到不同页面的规范方式（据我所知）是这样的：

```
header("Location: URL");
exit(); 
```

但是让我们假设我需要在部分页面呈现后重定向。我习惯于使用 ASP.NET，我可以在任何我想要的地方执行此操作

```
Response.Redirect("URL"); 
```

但我不知道如何在 PHP 中做一些等效的事情。是否可以？如果是，如何，如果不是，为什么不呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T14:39:55.397

使用标头函数是不可能的，因为它的目的是发送标头（不仅是为了重定向用户），而且当输出开始时你不能这样做，因为太晚了

一个快速的解决方法是为此使用 javascript，但这不是一个“优雅”的解决方案，更不用说如果访问者禁用了 javascript 或 javascript 代码中的某些错误导致问题，它就不起作用。

我认为确保您可以随时重定向的最佳方法是确保在脚本完成之前不呈现任何输出。为此，您应该至少使用一个模板引擎来确保您将 php 代码与 html 分开，并且在最后将内容发送给用户。

You could also use output buffering, because this way you can delay the moment when output is sterted (when the output buffer size is exceeded or you flush it yourself; see [php.net/ob_start](http://php.net/ob_start) for this; you would need to do something similar to this:[http://codepad.org/AomD4Sok](http://codepad.org/AomD4Sok) )

**PS:** don't forget about die/exit after the redirect, no mater how you will do it

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-08T05:12:21.770

or, you can use html redirect for redirecting page.

```
<meta http-equiv="refresh" content="0; url=xxx.php?page=2"> 
```

But, page is waiting aproximately 1 second on this line before redirecting page.

(I am sorry friends. My english is not fluency :(( )

I hope this information benefits to your business.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T14:35:19.190

理想情况下，您应该重新安排您的代码，以便重定向只能在发送任何标头之前发生。但如果你不能，你可以将所有内容存储在缓冲区中，并在所有内容完成后发送到浏览器：

```
ob_end_clean();
header('Location: xx'); 
```

不过，您可能需要`ob_start();`在脚本的顶部放置。

我本来不同意 JS 解决方案，但在这个时代，我希望它会很好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T14:35:52.670

我建议将 url 存储在一个变量中，并在最后重定向。在此过程中，您也不应该发送任何内容，而是将其存储并在最后发送，以确保您不会收到“标头已发送”错误。

```
$url = '/posts';

// code code code
// oops, we want to redirect elsewhere now
$url = '/tags';

// end of script, send *content* and headers
header("Location: $url"); 
```

显然这里有很大的改进空间，但你明白了。在您的请求完成之前，请勿发送标头或内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T14:35:09.850

在页面开头添加：ob_start(); 开始缓冲或在配置文件中启用缓冲。然后，您输出的所有内容都将“等待”脚本完成或刷新缓冲区：ob_flush。

所以：

```
ob_start();
//something
ob_end_clean(); //erase output
header('Location: '); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-14T14:38:45.030

您可以使用类似于您习惯的语义来实现您自己的`Response`类，并使用它的一个实例来累积要作为响应发送的输出，而不是依赖 PHP 的默认行为，即在您希望的任何地方打印任何内容。通过这种方式，您可以控制何时发送响应（以及标头）。这就是许多 PHP 框架实际上所做的事情——您可能想环顾四周，看看是否可以选择一个适合您的框架，而不是使用原始 PHP。

# c# - 在不运行应用程序的情况下调试 C# 代码

> ID：11035313
> 
> 赞同：8
> 
> 时间：2012-06-14T14:30:23.783
> 
> 标签：c#, visual-studio-2010, debugging

我经常需要调试/测试我的代码或其中的一小部分。

一种方法当然是运行我正在开发的应用程序，或者在开发类库时创建一个小型测试应用程序。

另一种方法是创建一个仅用于调试目的的单元测试并在 Visual Studio 中运行它。

但是，如果我不想编写额外的代码（如一次性单元测试）并且我不想启动整个应用程序（需要一些时间来启动并导航到我想要调试的代码）怎么办？

有没有办法在 Visual Stuio 中运行一小部分代码分别解释 C# 代码？

**编辑**

我知道[LINQPad](http://www.linqpad.net/)。

但有时我想知道例如`Form`运行时的外观或组件是否能够与数据库通信。所以 LINQPad 在这些情况下不适合我的需求......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T14:32:43.823

我使用 linqpad [http://www.linqpad.net/](http://www.linqpad.net/)来快速测试 c# 代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T14:33:42.820

另一种选择是下载最新的[Roslyn 社区预览版](http://msdn.microsoft.com/en-US/roslyn)，并使用[C# Interactive Window](http://blogs.msdn.com/b/csharpfaq/archive/2012/01/30/roslyn-ctp-introduces-interactive-code-for-c.aspx)进行操作。它是预发布软件，因此不支持整个 C# 功能集，但已经非常接近了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T14:33:41.813

看看[LINQPad](http://www.linqpad.net/ "LINQPad")。它非常适合尝试代码片段。不要被名字吓到，它支持 C#/F# 程序和表达式。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-14T14:34:39.180

快速测试的另一个选择是[Scratchpad.cs](http://kozmic.pl/2012/01/18/testing-framework-is-not-just-for-writing-tests/)。通常，这比仅仅为了尝试一个想法而创建命令行项目要好。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-14T14:35:17.170

看看[F# 解释器](http://msdn.microsoft.com/en-us/library/dd233175.aspx)。

我经常用它来测试小代码示例。

假设您有一些这样的代码：

```
namespace ConsoleApplication5
{
    public class Test
    {
        public Int32 Sum(int a, int b)
        {
            return a + b;
        }
    }
    ...
} 
```

启动 F# Interactive 窗口，为您的程序集添加一个引用，然后开始调试！

```
> #I @"C:\PathToYourProject\bin\debug";;
--> Added .... to library include path
> #r "ConsoleApplication5.exe";;
--> Referenced ...
> let t = ConsoleApplication5.Test();;
val t : ConsoleApplication5.Test
> t.Sum(9, 7);;
val it : int = 16
> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-22T21:55:22.837

不管你信不信，PowerShell 使用 .NET 框架。您可以从 PowerShell 调用任何内置 C# 类。

假设您正在尝试测试该`String.Substring`方法。

打开 PowerShell

然后调用函数类型：

```
"some string".Substring(2,1) # returns 'm' 
```

或者假设你想测试一个更复杂的内置类

```
foreach($line in [System.IO.File]::ReadLines("C:\path\to\file.txt"))
{
     $line
} 
```

`[System.IO.File]`和说是一样的`using System.IO.File;`

PowerShell 的美妙之处——*它是 C# 的控制台*……但没人知道。

# rest - 使用 RestSharp 的 SugarCrm REST 访问

> ID：11035316
> 
> 赞同：0
> 
> 时间：2012-06-14T14:30:24.450
> 
> 标签：rest, sugarcrm, restsharp

我正在尝试使用 REST 登录或 SugarCrm。我有这个代码，，

```
 //Login
        var data = new JObject();
        data["user_name"] = "admin";
        data["password"] = @"xxx";

        var client = new RestClient(@"http://ubuntu-server");

        var request = new RestRequest(@"service/v2/rest.php", Method.POST);

        request.AddParameter("method", "login");
        request.AddParameter("input_type", "json");
        request.AddParameter("response_type", "json");
        request.AddParameter("rest_data", data);

        var response = client.Execute(request);
        var content = response.Content; 
```

我得到的响应是“无效登录”

我在做什么错？？

//lasse

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T15:50:28.233

突出的两件事：

1.  密码需要MD5编码
2.  数据对象需要包装在附加的“user_auth”对象中。

# jquery - jquery if else 不能在 FF 中工作

> ID：11035317
> 
> 赞同：2
> 
> 时间：2012-06-14T14:30:24.343
> 
> 标签：jquery, firefox, if-statement

```
$("#button").click(function(){
     if($("#window").css('top') == '0%'){
       $("#window").stop().animate({top:'-100%'},1000);
     }
     else { 
        $("#window").stop().animate({top:'0%'},1000);
     }
 }); 
```

它在 Chrome 和 Safari 中运行良好，但在 Firefox 中它只能部分运行。

在 FF 中，它只适用于`else`这种情况。标识该位置不是`top: '0%'`并更改为`top: '0%'`，但不会更改为`top: '-100%'`if is`top: '0%'`

请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:33:10.333

删除百分比符号并使用`top: 0;`

# javascript - 在客户端访问 IE8 中文件输入的文件数据？

> ID：11035318
> 
> 赞同：2
> 
> 时间：2012-06-14T14:30:28.893
> 
> 标签：javascript, internet-explorer

是否可以获得在文件输入中选择的实际文件数据？

我正在尝试执行以下代码，并且 this.files 不包含我期望的文件数据（在 Chrome 中确实存在）。

```
document.getElementById('txtFileInput').onchange = function (event) {
                    //var files = event.target.files;
                    var files = this.files;
                    me.model.set('fileArray', files);
                };

<div class="fileInputContainer" style="display:none">
    <label for="txtFileInput">Edit file: </label>
    <input type="file" id="txtFileInput" class="txtFileInput"/>
</div> 
```

IE有什么我缺少的东西还是不可能的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T14:34:35.167

由于安全原因，IE*目前*不允许从 JavaScript 操作元素。`<input type="file">`设置文件名或调用单击事件以显示浏览器对话框将导致表单提交时出现“访问被拒绝”错误。（IE 很聪明地记住调用了哪些方法）

请看这个类似的问题：[http ://www.webdeveloper.com/forum/showthread.php?t=181272](http://www.webdeveloper.com/forum/showthread.php?t=181272)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T14:35:12.893

@lkaradashkov 解释说这是不可能的，所以我认为您正在寻找的是[HTML5 文件 API](https://developer.mozilla.org/en/DOM/FileReader)，但不幸的是，在即将发布的 IE10 之前，这在 IE中[不可用。](http://caniuse.com/#feat=fileapi)

# java - 制作UDP服务器的方法？

> ID：11035322
> 
> 赞同：0
> 
> 时间：2012-06-14T14:30:48.443
> 
> 标签：java, multithreading, udp, nio, netty

我是 Java NIO 的新手。

我有一个 java 程序，它在循环中迭代地查询服务器（不同的 IP/端口）。但是现在我想一次发送所有数据包而不是循环发送，然后将接收到的数据存储在回复数据包中。

查询仅包含 1 个回复数据包，无需进一步通信。

这是这样做的方法吗 - >制作一个数据报通道，通过 .send() 发送所有数据包，监听数据包并启动新线程来处理和存储数据包数据。

服务器数量可能 >400 。是做 400 个线程还是 400 个数据报通道更好？？？我也应该使用 async 包而不是 NIO 。

使用 Netty 等会更容易吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T14:34:56.793

我对 NIO 的建议还不够熟悉，但关于回复处理 - 最好使用线程池和通道池。

**编辑 - 更多解释**

您应该只有**一个**线程来侦听服务器回复的端口。收到回复后，将“处理任务”提交到任务队列。下一个可用线程将拉取该任务并处理它。

因此，如果您的回复（=任务）多于可用线程，则任务将在队列中等待。Java 在[java.util.concurrent](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/package-summary.html)包下有很好的线程池支持。这些限制当然是可配置的。

基本上，listner 线程正在执行创建句柄任务和放入队列的最小操作。如果您害怕在短时间内丢失回复，那么您应该配置更多的侦听器线程......但我怀疑那里存在真正的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T14:45:39.777

如果您打算使用 UDP，您可以为每个服务器使用一个线程，并为所有服务器使用一个端口。您可能希望为不同的消息类型使用几个端口。

如果您只使用一个多播和端口，则任何侦听器都会听到从任何应用程序到该 IP 和端口的所有数据包。

# android - 为什么调用 Process.killProcess(Process.myPid()) 是个坏主意？

> ID：11035328
> 
> 赞同：29
> 
> 时间：2012-06-14T14:31:18.137
> 
> 标签：android, unity3d, kill-process

我读过一些帖子，说使用这种方法“不好”，不应该使用，这不是“关闭”应用程序的正确方法，也不是 Android 的工作方式......

我理解并接受 Android 操作系统比我更清楚何时终止进程的正确时间这一事实，但我还没有听到关于为什么使用该`killProcess()`方法是错误的很好的解释。毕竟 - 它是 Android API 的一部分。

我所知道的是，在其他线程正在执行潜在的重要工作（文件操作、写入数据库、HTTP 请求、运行服务..）时调用此方法会导致线程被终止，这显然不好。另外，我知道我可以从“重新打开”应用程序会更快的事实中受益，因为系统从上次使用应用程序时仍然“保持”在内存状态，并`killProcess()`防止这种情况发生。

除了这个原因，假设我没有这样的操作，并且我不在乎我的应用程序是否每次打开它都会从头开始，还有其他原因我不应该使用该`killProcess()`方法吗？

我知道`finish()`关闭 an 的方法`Activity`，所以请不要在你的答案中包含它。

`finish()`仅适用于`Activity`，并非适用于所有应用程序，我想我确切地知道为什么以及何时使用它。

还有一件事——我正在使用 Unity3D 框架开发游戏并将项目导出到 Android。当我对生成的apk进行反编译时，我很惊讶地发现从unity-实现Unity的-`Application.quit()`方法创建的java源代码，带有`Process.killProcess(Process.myPid())`.

`Application.quit()`根据 Unity3D 文档，应该是关闭游戏的正确方法（真的吗？也许我错了，错过了什么），那么为什么 Unity 的框架开发人员要在原生 Android 中实现这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-23T19:11:39.307

`<rant>`

在一个完美的世界中，拥有完美的代码和库，您不需要调用`Process.killProcess(Process.myPid())`，操作系统会在适当的时候正确地终止您的应用程序。中东也将和平，猪会飞，[停顿问题](http://en.wikipedia.org/wiki/Halting_problem)将得到解决。

因为所有这些事情都还没有发生，所以有时你需要执行这样的“禁止”代码。

我最近制作的一款 Android 游戏，免费版本使用了一个广告库，它可以让应用程序保持活动状态并且还会泄漏内存。付费版本没有这个问题，因为没有链接广告库。我的解决方案是在执行此类代码的主菜单上添加一个退出按钮。我希望大多数人在完成后会点击这个按钮，我不必担心它会占用内存。`finish()`我刚刚执行并完成的付费版本。（这是在谷歌应用内购买可用之前，所以我必须制作一个付费和免费版本，他们现在可能已经解决了这个问题，我可以更新所说的游戏，但它确实做得不太好，我怀疑花在它上面的任何时间都是值得的）

有点像在小学/中学他们告诉你你不能取负数的平方根。然后在更高级别的代数课上，他们说......好吧，你可以取负数的平方根，但你会得到奇怪的结果，但它是一致的并解决了问题。

换句话说，除非您知道自己在做什么，否则不要执行“禁止”代码。

`</rant>`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-18T11:38:59.550

谁说调用 Process.killProcess(Process.myPid()) 是个坏主意？

是的，让操作系统管理自己的内存是您和使用您的应用程序的用户的最佳实践（更快地再次打开，更少的强制关闭机会等......）。

但是，假设您确定您没有中断线程或其他后台操作并且您使用此调用`onDestroy()`- 我认为您没有理由不使用它。尤其是当它是 API 调用而不是解决方法时，而且 Google 没有提到最好不要在 API 文档中使用它。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-06-15T06:05:22.080

好吧，Unit3d 很可能使用的是本机代码，他们将终止进程作为保险——他们不想泄漏内存。您可以争论这是否是一个好主意，但他们使用它的事实并不意味着您也应该这样做。

也许在某些极端情况下您会想要使用`killProcess()`，但通常操作系统会根据当前负载和使用情况为您执行此操作。不知道你在寻找什么样的答案——你知道使用`killProcess()`可能会破坏事情，除非你能证明它的使用是合理的，否则不要使用它。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-11-07T19:02:25.543

**以下是killProcess**会咬你而不按预期工作的两种情况：

1.  粘性服务 - 即使您终止了该进程，它们也会自动重新启动

2.  Timer - 如果您安排线程在 Timer 上运行，它们将在终止进程后继续执行

因此，如您所见，在某些情况下**killProcess**不是清理正在运行的应用程序的谨慎解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-06T04:42:19.743

在我看来，一些Android开发人员不推荐kill进程的原因是，如果你只是简单地杀死进程，很难确保所有的服务、活动都安全、正确地退出。对于一个APP开发者来说，他们的APP可能会与其他APP共享数据，一些Activity可能会导出给其他APP。如果您终止该进程，其他应用程序可能会出错。而且，在大多数情况下，您实际上不需要“杀死”应用程序，只需完成您正在做的和您不希望用户看到的工作，将其他工作留给Android系统。他们比我们更了解。好吧，如果你清楚你想做什么，不要关心打开速度快等等，比如你想在用户点击某个按钮时退出游戏，你的游戏当然不会导出到其他应用程序，也不会在外面分享数据你的游戏，可以这样做，只需小心确保没有其他服务或线程需要运行。在这种情况下，我建议在终止进程之前完成所有活动，以确保活动正确保存状态，我将调用类似：

```
 activity.finishAffinity();
    Process.killProcess(Process.myPid()); 
```

在当前活动中。这只是我的看法，欢迎指正。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-07-03T15:20:51.327

这是个坏主意。一方面，您的活动不值得使用检测，因为这些框架在所有生命周期方法上注册，并且只有在干净执行后它们才会报告测试成功状态。如果您从测试应用程序下方终止该进程，它将报告失败，并且不清楚这是否正在发生。

# eclipse - 如何让 Eclipse 将 .ejs 文件解释为 .html？

> ID：11035329
> 
> 赞同：16
> 
> 时间：2012-06-14T14:31:25.167
> 
> 标签：eclipse, node.js, ide, express, ejs

我最近开始了一个节点项目，我正在使用的两个模块是 express 和 EJS。但默认情况下，我通常使用 eclipse 作为我的 IDE，它适用于 java，适用于 html 和 javascript。但我遇到的一个问题是，对于 .ejs 文件，我没有标记颜色编码或任何形式的代码完成。它基本上只是一个普通文件。

有谁知道我如何让 Eclipse 将 .ejs 文件解释为 .html 文件？我认为它非常相似，除了偶尔的嵌入标签。或者推荐一个更适合 node.js/html/ejs 开发的 IDE。

谢谢！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-14T14:34:10.477

对于特定文件，请尝试右键单击，*打开方式 -> 其他... -> HTML 编辑器*。您还可以在*Window -> Preferences -> General -> Editors -> File Associations*下全局设置文件关联。

在 Mac 上，全局设置位于*Mac Option -> Preferences*和所有相同的选项下。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-08-24T14:55:37.567

作为 rlegendi 答案的附录，如果您还想要正确的 html 着色，则需要转到“内容类型”（在“首选项”中的“编辑器”上方）。从这里，选择*Text -> HTML*并点击“Add..”，包括 .ejs

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-07-05T10:39:59.110

对我来说，最好的方法是：

Windows > 首选项 > 常规 > 内容类型

在窗口**内容类型**中，我选择了 Text > HTML

和窗口**文件关联**单击**添加...**，我已经包括***.ejs**

# java - Eclipse 无法识别导入的 JAR 文件中的方法。为什么不？

> ID：11035332
> 
> 赞同：0
> 
> 时间：2012-06-14T14:31:39.957
> 
> 标签：java, eclipse, import, jar, buildpath

我正在使用 Eclipse 为我的工作更新一些 Java 代码。在这个项目中，有一个 JAR 文件，存储在项目文件夹内的“资源”文件夹中，由主类导入。这个 JAR 文件包含一个我们需要在另一个类中使用的类。因此，导入语句如下所示：

```
import pkg.Class.InnerClass; 
```

为了保密起见，我实际上不能把这些名字放到网上。这个 InnerClass 有一个方法，我们称之为 setState(boolean b)。在我们的主类中，我们需要使用这个方法......但是当我输入它时，调用下方出现了一条红线，并带有错误消息，

```
"The method setState(boolean) is undefined for the type Class.InnerClass." 
```

这显然是错误的！InnerClass 中的几乎所有其他方法都可以正常工作，而且似乎只是这个特定类的错误。我已经检查并仔细检查了构建路径配置，没有任何异常。我无法更改 JAR 文件，但我可以使用反编译器插件查看内容。有谁知道我不知道的事情，或者以前有人遇到过这个问题并且能够以某种方式解决它？

编辑：这是 Class.java 文件的草图：

```
package pkg;

import ...;

public class Class {

    public class InnerClass {

        public void setState( boolean paramBoolean ) {

            ...

        }

        public void setOtherState( boolean paramBoolean ) {

            ...

        }

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T15:06:06.850

这是一个测试，以确定问题是否真的与 Eclipse 或 JAR 文件有关。

*   退出 Eclipse 并启动您最喜欢的文本编辑器。
*   编写一个小测试类，使用内部类中的“缺失”方法。
*   使用该`javac`命令从命令行编译它，并将 JAR 放在编译类路径中。
*   然后将其复制到您的 Eclipse 工作区并尝试在那里编译它。

这应该会给你一些关于问题所在的线索。

# file - 文件中的 Bash 差异

> ID：11035334
> 
> 赞同：1
> 
> 时间：2012-06-14T14:31:47.993
> 
> 标签：file, bash, sum

我想编写一个 bash 代码，以便按以下方式比较两个不同的文件。当两个文件中前五列的值相等时，将两个不同文件中剩余列的值相加（例如colum6file1+colum6file2等）。当它们不同时，只需将两个不同的行都保留在新文件中。请注意，我无法逐行比较，因为第一个文件开头的一行可以与第二个文件末尾的一行具有相同的四列值。

希望这很清楚，

谢谢。

文件1：

```
 118    2   AA      4.25     30.25  1  
  119    2   AA      4.50     30.25  2  
  120    2   AA      4.75     30.25  3  
  121    2   AA      5.00     30.25  4  
  122    2   AA      5.25     30.25  5  
  123    2   AA      5.50     30.25  6    
  124    2   AA      5.75     30.25  7   
  125    2   AA      6.00     30.25  8    
  126    2   AA      6.25     30.25  9 
```

文件2：

```
 179    1   BB     19.75     30.00  1  
  180    1   BB     19.75     30.00  2  
  230    1   BB     32.25     30.00  3   
  231    1   BB     32.50     30.00  4      
  232    1   BB     32.75     30.00  5   
  118    2   AA      4.25     30.25  6   
  119    2   AA      4.50     30.25  7  
  120    2   AA      5.00     30.25  8   
  121    2   AA      5.00     30.25  9 
```

输出：

```
 118    2   AA      4.25     30.25  7    
  119    2   AA      4.50     30.25  9    
  120    2   AA      4.75     30.25  11    
  121    2   AA      5.00     30.25  13    
  122    2   AA      5.25     30.25  5  
  123    2   AA      5.50     30.25  6    
  124    2   AA      5.75     30.25  7   
  125    2   AA      6.00     30.25  8    
  126    2   AA      6.25     30.25  9  
  179    1   BB     19.50     30.00  1    
  180    1   BB     19.75     30.00  2  
  230    1   BB     32.25     30.00  3   
  231    1   BB     32.50     30.00  4      
  232    1   BB     32.75     30.00  5 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T14:52:58.123

这可能会被最小化，但这里有一个粗略的解决方案来解决我*认为*的问题：

```
sort file1 file2 |
  awk '{current = sprintf("%s %s %s %s %s", $1, $2, $3, $4, $5)

      if (current == previous) {
        total = total + $6
      } else if (previous) {
        printf("%s %d\n", previous, total)
        total = $6
      } else {
        total = $6
      }

      previous = current
    }
    END { printf("%s %d\n", previous, total) }' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T14:59:32.410

您可以使用该`sed`命令仅获取第一列，然后进行比较。

[sed 教程](http://www.grymoire.com/Unix/Sed.html#uh-8 "教程")

所以：`sed -e "s/([0-9]*\)\s.*/\1/"`

将获得第一个数字（由 - 空白字符与其他数字分隔`\s`）基本上看起来像`s/match pattern/replacement/`.

您用于`/( /)`标记某些文本或模式的出现并`\<number>`在替换字符串中使用它。作为替换字符串，我使用`\1`它是第一个（也是唯一一个）标记的片段。

正如我在这里使用的那样：我找到了第一个数字 ( `[0-9]*`) 并标记了它，用空格 ( `\s`) 分隔并替换了我输入的其余行`.*`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T18:21:37.027

这是一个解决方案。我不确定它是优雅的还是糟糕的。它利用`join`命令（因此也利用`sort`命令），加上`awk`.

```
file1=xx1
file2=xx2

join -t ' ' -j 1  -a 1 -a 2 -o 1.1,2.1,1.2,2.2 \
    <(sort -b $file1 | awk '{printf("%s\t%s\t%s\t%s\t%s %s\n",$1,$2,$3,$4,$5,$6)}') \
    <(sort -b $file2 | awk '{printf("%s\t%s\t%s\t%s\t%s %s\n",$1,$2,$3,$4,$5,$6)}') |
awk '{
    if (NF == 6) sum = $6;
    else         sum = $11 + $12;
    print $1, $2, $3, $4, $5, sum;
}' 
```

文件名是参数。`<(sort -b $fileN | awk '...')`是“过程替代”，这是`bash`. 这意味着'运行括号内的命令，并且管道的标准输出作为命名文件（通常`/dev/fd/NN`）提供给命令，在本例中为`join`. 管道是迂回的；他们对数据进行排序，然后`awk`格式化数据，以便关键字段（前 5 个字段）由制表符分隔，但第六个字段与它们之间用空格分隔。忽略字段中的`sort -b`前导空格；获得理智的结果至关重要。

该`join`命令将空白视为字段分隔符 ( `-t ' '`)，因此就所涉及的而言，每个输入文件都有两个字段`join`。连接发生在第一个字段相等时`-j 1`（记住第一个字段是 5 个制表符分隔值的集合）。输出包括文件 1 ( `-a 1`) 和文件 2 ( `-a 2`) 中不匹配的条目。输出格式为文件 1 中的字段 1、文件 2 中的字段 1、文件 1 中的字段 2 和文件 2 中的字段 2。

如果匹配，则输出将有十几个空格或制表符分隔的列。如果没有匹配，那么输出将有半打空白或制表符分隔的列。

中的后处理`awk`利用了空格和制表符都是字段分隔符的事实`awk`。如果输入行有 6 个字段，则该键不匹配，因此总和是 中的值`$6`。如果输入行有任何其他数量的字段（应该是 12），那么总和就是最后两个字段的值，`$11 + $12`. 然后脚本打印出前五个字段，加上总和。

这种将空格与制表符作为字段分隔符的诡计可能很奇怪，但在这种情况下它相当有效。

由于样本数据中每个文件中最多有一行具有给定键（每个文件中的前五列是唯一的），因此`join`将文件 1 中的 N 行与文件 2 中的 M 行配对以提供 NxM 输出行无关紧要，因为 N = 1 和 M = 1 根据需要。

### 示例输出

给定问题中显示的数据文件（以及文件中的脚本`jb.sh`）：

```
$ bash jb.sh
118 2 AA 4.25 30.25 7
119 2 AA 4.50 30.25 9
120 2 AA 4.75 30.25 3
120 2 AA 5.00 30.25 8
121 2 AA 5.00 30.25 13
122 2 AA 5.25 30.25 5
123 2 AA 5.50 30.25 6
124 2 AA 5.75 30.25 7
125 2 AA 6.00 30.25 8
126 2 AA 6.25 30.25 9
179 1 BB 19.75 30.00 1
180 1 BB 19.75 30.00 2
230 1 BB 32.25 30.00 3
231 1 BB 32.50 30.00 4
232 1 BB 32.75 30.00 5
$ 
```

我注意到这个输出与期望的输出不同，但那是因为期望的输出对于给定的输入是错误的（或者输入对于期望的输出是错误的）。样本数据有以下几行：

```
120 2   AA  4.75    30.25  3 
120 2   AA  5.00    30.25  8 
```

请注意，此处的第 4 列不一样（4.75 与 5.00），因此这些行无法合并，您会得到两个输出行“120”。

* * *

## 扩展到 16 列

该脚本进行了少量整理，否则将继续与以前相同的模式：

```
file1=xx1
file2=xx2

sort_print()
{
    sort -b "$@" |
    awk '{printf("%s\t%s\t%s\t%s\t%s %s\t%s\t%s\t%s\t%s\t%s\t%s\t%s\t%s\t%s\t%s\n",
                 $1,$2,$3,$4,$5, $6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16)}'
}

join -t ' ' -j 1  -a 1 -a 2 -o 1.1,2.1,1.2,2.2 \
    <(sort_print $file1) <(sort_print $file2) |
tee joined.data |
awk '{
    if (NF != 16)
    {
        for (i = 6; i <= 16; i++)
        {
            j = i + 16
            $i = $i + $j;
        }
    }
    printf "%s %s %s %s %s", $1, $2, $3, $4, $5;
    for (i = 6; i <= 16; i++)
        printf " %s", $i;
    printf "\n";
}' 
```

### 档案 xx1

```
118    2   AA      4.25     30.25  1  2 3 4 5 14 5 4 5 7 8
119    2   AA      4.50     30.25  2  2 3 4 5 4 15 4 5 7 8
120    2   AA      5.00     30.25  3  2 3 4 5 4 5 14 5 7 8
121    2   AA      5.00     30.25  4  2 3 4 5 4 5 4 15 7 8
122    2   AA      5.25     30.25  5  2 3 4 5 4 5 4 5 17 8
123    2   AA      5.50     30.25  6    2 13 4 5 4 5 4 5 7 18
124    2   AA      5.75     30.25  7   2 3 4 5 4 5 4 5 7 18
125    2   AA      6.00     30.25  8    12 3 4 5 4 5 4 5 7 18
126    2   AA      6.25     30.25  9  2 3 4 5 4 5 4 5 7 18 
```

### 档案 xx2

```
179    1   BB     19.75     30.00  1   8 21 2 4 12 2 3 1 9 1032
180    1   BB     19.75     30.00  2  29 1 22 4 12 2 3 1 9 1042
230    1   BB     32.25     30.00  3   9 8 2 44 12 2 3 1 9 1052
231    1   BB     32.50     30.00  4   9 17 2 44 12 2 3 1 9 1062
232    1   BB     32.75     30.00  5   9 8 1 4 122 2 3 1 9 1072
118    2   AA      4.25     30.25  6   9 8 1 2 4 22 3 1 9 1082
119    2   AA      4.50     30.25  7  29 8 1 2 4 12 23 1 9 1092
120    2   AA      5.00     30.25  8   9 8 1 2 4 12 2 21 9 1002
121    2   AA      5.00     30.25  9   9 8 1 2 4 12 2 3 29 1012 
```

### 输出

```
118 2 AA 4.25 30.25 124 11 8 5.25 32.25 5 24 6 5 14 1096
119 2 AA 4.50 30.25 126 31 8 5.5 32.25 6 14 26 5 14 1096
120 2 AA 5.00 30.25 128 11 8 6 32.25 7 14 5 25 14 1006
121 2 AA 5.00 30.25 130 11 8 6 32.25 8 14 5 7 34 1016
122 2 AA 5.25 30.25 5 2 3 4 5 4 5 4 5 17 8
123 2 AA 5.50 30.25 6 2 13 4 5 4 5 4 5 7 18
124 2 AA 5.75 30.25 7 2 3 4 5 4 5 4 5 7 18
125 2 AA 6.00 30.25 8 12 3 4 5 4 5 4 5 7 18
126 2 AA 6.25 30.25 9 2 3 4 5 4 5 4 5 7 18
179 1 BB 19.75 30.00 1 8 21 2 4 12 2 3 1 9 1032
180 1 BB 19.75 30.00 2 29 1 22 4 12 2 3 1 9 1042
230 1 BB 32.25 30.00 3 9 8 2 44 12 2 3 1 9 1052
231 1 BB 32.50 30.00 4 9 17 2 44 12 2 3 1 9 1062
232 1 BB 32.75 30.00 5 9 8 1 4 122 2 3 1 9 1072 
```

# video - 如何让视频在方向更改时自动播放？

> ID：11035338
> 
> 赞同：0
> 
> 时间：2012-06-14T14:31:52.753
> 
> 标签：video, orientation, landscape, portrait

我正在开发一个移动网站，但有一件事我不能做。我认为这很简单，但我对此很陌生。在纵向时，我可以完美地看到该站点（一切都很好），但我想做的是以下内容：我希望视频在方向变为横向时立即开始播放。任何帮助将不胜感激。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T21:12:30.850

这个问题似乎有两个主要问题：如何检测浏览器中的方向变化以及如何使视频播放以响应该事件。

这个 stackoverflow 答案似乎很好地解决了第一个问题： [https](https://stackoverflow.com/a/2307936/994464) ://stackoverflow.com/a/2307936/994464 虽然该问题专门针对 Android 浏览器，但该答案应该是所有浏览器最强大的解决方案。

其次，我假设是 html5 而不是嵌入的视频，可以从 dom 访问，只需使用以下来自 Mozilla 开发者网络的片段中显示的播放方法

```
var v = document.getElementsByTagName("video")[0];  
v.play(); 
```

把它们放在一起：

```
// Detect whether device supports orientationchange event, otherwise fall back to
// the resize event.
var supportsOrientationChange = "onorientationchange" in window,
orientationEvent = supportsOrientationChange ? "orientationchange" : "resize";

window.addEventListener(orientationEvent, function() {
     var v = document.getElementsByTagName("video")[0];  
     v.play();
}, false); 
```

# android - Admob“无法实例化以下类：- com.google.ads.AdView”，适用于运行 2.3.3 的 Admob 6.0.1

> ID：11035340
> 
> 赞同：3
> 
> 时间：2012-06-14T14:31:58.697
> 
> 标签：android, class, admob, android-4.0-ice-cream-sandwich, android-2.3-gingerbread

我有一个正在开发的 2.3.3 android 应用程序，我想在其中添加 Admob 广告。admob 广告版本是 6.0.1。我按照 googles 网站上的说明添加它，但它似乎不适用于 2.3.3，并假设适用于 4.0.3。我正在开发的目标是发布 2.3.3 版本以支持 Blackberry playbook 和大多数 android 设备。

当我将所有内容添加到 android 清单时，添加的是：

```
<activity android:name="com.google.ads.AdActivity"
            android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"/>

<uses-permission android:name="android.permission.INTERNET"/>   
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>

<uses-sdk android:minSdkVersion="10" /> 
```

将构建路径外部 jar 指向 google admob 的 android adk 路径，然后将 jar 放在那里，然后将其添加到 XML 文件中：

上顶：

```
xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads" 
```

在 XML 布局中：

```
<com.google.ads.AdView android:id="@+id/adView"
                             android:layout_width="wrap_content"
                             android:layout_height="wrap_content"
                             ads:adUnitId="I put my id here"
                             ads:adSize="BANNER"
                             ads:testDevices="TEST_EMULATOR"
                             ads:loadAdOnCreate="true"/> 
```

它在 2.3.3 gui 设计器的图形布局上出现错误，说明：

“无法实例化以下类：- com.google.ads.AdView（打开类，显示错误日志）有关详细信息，请参阅错误日志（窗口 > 显示视图）。”

当我打开课程时，它说它看不到源代码。

如果我将 GUI 设计器更改为 4.0.3（因为您显然需要将其作为目标进行编译），那么 admob 会显示在一个黑盒子中并且看起来还可以。我需要它在 2.3.3 上工作，当我在 2.3.3 模拟器中加载这个应用程序时，我现在似乎立即崩溃了。

有什么帮助吗？我读到这应该可以在 2.3.3 中使用，所以我不明白为什么。我有一个 libs 文件夹，但我把它拿出来，只是从外部引用了 JAR。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T00:30:05.497

弄清楚了。

一切都是正确的，但这是一个错误，为什么它没有显示在所见即所得的编辑器中。

在模拟器或设备上运行时，广告会显示。

# html - html5会话存储

> ID：11035343
> 
> 赞同：0
> 
> 时间：2012-06-14T14:32:03.940
> 
> 标签：html, session

我有 2 页，第 1 页包含一个 div，第 2 页包含一些图像。我有一个功能，如果用户单击第 2 页中的任何图像，页面将重定向到第 1 页，并且所选图像应该出现在第 1 页的 div 中.

这如何通过 HTML5 会话存储来实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:34:27.350

在将用户带到第一页之前，设置`sessionStorage.imageclicked = [whatever image was clicked here]`. 然后，获取该值并使用它来显示图像。

不过，我可以问一下，您为什么不使用普通链接？

```
http://example.com/firstpage.ext?image=[whatever image was clicked] 
```

即使是最古老的浏览器也支持这一点。

# actionscript-3 - 电影剪辑不停止总是循环

> ID：11035344
> 
> 赞同：1
> 
> 时间：2012-06-14T14:32:04.687
> 
> 标签：actionscript-3, flash, adobe, flash-builder

我有一个获取movieClip 的类，然后使用addChild 将其添加到显示中。问题是我根本无法播放或停止它。基本上我无法与movieClip 交互。

这是代码：

```
public function Avatar(movieClip:DisplayObject) //class constructor
{   ...
    avatarSprite = MovieClip(movieClip)
    addChild(avatarSprite);
    avatarSprite.gotoAndStop(1); //this is not working
    trace(avatarSprite.currentFrame) //always returns 1
    trace(avatarSprite.isPlaying) // returns false
    ...
    } 
```

当我运行代码时，movieClip 会循环播放，并且不会像我预期的那样停止。我不确定有什么问题。如您所见，我没有做任何太复杂的事情。知道我在这里缺少什么吗？

提前致谢

**编辑：**正如 miguelSantirso 指出的那样。问题在于movieClip 中的嵌套动画，而不是实际代码本身。有谁知道如何阻止嵌套动画播放？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T22:58:45.940

此函数将停止所有嵌套的movieClips（如果将false传递给useStop参数，则播放它们）

```
function recursiveStop(parentClip:DisplayObjectContainer, useStop:Boolean = true, gotoFrame:Object = null):void {
    var tmpClip:MovieClip = parentClip as MovieClip;
    if (tmpClip) {
        if (useStop) {
            (gotoFrame != null) ? tmpClip.gotoAndStop(gotoFrame) : tmpClip.stop();
        }else {
            (gotoFrame != null) ? tmpClip.gotoAndPlay(gotoFrame) : tmpClip.play();
        }
    }

    var i:int = parentClip.numChildren;
    while(i--){
        if(parentClip.getChildAt(i) is DisplayObjectContainer){
            recursiveStop(parentClip.getChildAt(i) as DisplayObjectContainer, useStop, gotoFrame);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T15:00:22.733

检查您的影片剪辑中是否没有嵌套动画。暂停影片剪辑不会停止内部动画。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-14T14:34:29.270

与其将其转换为影片剪辑，不如尝试将其作为影片剪辑处理。

```
avatarSprite = movieClip as MovieClip; 
```

（考虑到传入的movieclip 实际上是一个movieclip ofcourse...）

# c - 用 C 压缩 XML 数据

> ID：11035346
> 
> 赞同：-1
> 
> 时间：2012-06-14T14:32:17.933
> 
> 标签：c, xml, xml-parsing

用 C 压缩 XML 数据的最佳方法是什么？我可以为此目的使用任何 Linux 内部库吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T14:44:21.867

古老的[zlib](http://zlib.net/)库在 Linux 系统上广泛可用，通常作为基本安装的一部分，并且非常适合压缩 XML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T14:37:23.237

[mod_gzip](http://schroepl.net/projekte/mod_gzip/install.htm)在 linux 中可用....

# javascript - 用大量原型函数重构 javascript 对象

> ID：11035348
> 
> 赞同：1
> 
> 时间：2012-06-14T14:32:24.213
> 
> 标签：javascript, prototype

我有一个 javascript 对象，我向其中添加了许多原型函数，这些函数主要以某种方式依赖于对象的成员。

```
myForm() {
    this.property1 = "Prop1";
    this.property2 = "Prop2";
}

myForm.prototype.loadValues = function(){ /*...*/);

myForm.prototype.setValues = function(){ /*...*/);

myForm.prototype.doStuff = function(){ /*...*/); 
```

有足够多的函数/代码，目前大约有 4000 行，每次我必须使用开发工具/firebug 调试它时，它都让我发疯。我正在考虑这样拆分。

myForm.js -

```
myForm(){
    this.property1 = "Prop1";
    this.property2 = "Prop2";
    new myFormLoadActions();
    new myFormSetActions();
    new myFormDoStuffActions();
} 
```

myFormLoadActions.js

```
myFormLoadActions(){
    myForm.prototype.loadValues = function(){ /*...*/);
} 
```

myFormSetActions.js

```
myFormSetActions(){
    myForm.prototype.setValues = function(){ /*...*/);
} 
```

myFormDoStuffActions.js

```
myFormDoStuffActions(){
    myForm.prototype.doStuff = function(){ /*...*/);
} 
```

我已经尝试过了，它似乎可以正常工作。这是处理大量原型函数的推荐方法，还是有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T15:16:31.230

保留您的旧代码，但只需将原型分配分散到多个文件中：

文件 0

```
myForm() {
    this.property1 = "Prop1";
    this.property2 = "Prop2";
} 
```

文件 1

```
myForm.prototype.loadValues = function(){ /*...*/); 
```

文件 2

```
myForm.prototype.setValues = function(){ /*...*/); 
```

正如我在评论中指出的那样，这只是一个班级做得太多的问题，但你意识到这一点并且只想要更小的文件，所以你去:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T14:44:14.230

我会推荐这种方法，因为它对我来说看起来更整洁，而且调试起来也不难。

```
myForm() {
    this.property1 = "Prop1";
    this.property2 = "Prop2";
}

myForm.prototype = {
    loadValues: function(){ /*...*/),
    setValues: function(){ /*...*/),
    doStuff: function(){ /*...*/),
    .
    .
    .
} 
```

另一种方法：

```
myForm(){
    this.property1 = "Prop1";
    this.property2 = "Prop2";
    addFunctionsToPrototype();
}
addFunctionsToPrototype(){
    myForm.prototype.loadValues = function(){ /*...*/);
    myForm.prototype.setValues = function(){ /*...*/);
    myForm.prototype.doStuff = function(){ /*...*/);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T14:39:34.897

对我来说，这看起来有点奇怪。我的意思是，您正在为它们的“副作用”构造对象（将属性添加到不同对象的原型），然后立即将它们扔掉：

```
myForm(){
    ...
    new myFormLoadActions();
    ...
} 
```

您“新建”的对象在实例化后实际上并没有做任何事情，并且您没有持有对其实例的引用，因此最好是一个可调用函数：

```
myForm(){
    ...
    myFormLoadActions(this);
    ...
} 
```

这只是我的拙见，请随意争论！

# c# - 在模型对象中返回 NULL 的 MVC3 下拉列表

> ID：11035352
> 
> 赞同：0
> 
> 时间：2012-06-14T14:32:33.020
> 
> 标签：c#, asp.net-mvc-3, entity-framework, razor

我正在尝试获取一个下拉列表，以将其在 HTTP POST 上的选择连同其他相关数据一起发回。我可以看到表单集合中的值，但是当我查看其他发布的实体时，VS2010 告诉我该对象为 NULL。

该模型具有多对一关系：

```
[Key]
public int ProgramTypeId { get; set; }

public string ProgramType { get; set; }

public List<SurveyProgramModels> SurveyProgramModel { get; set; } 
```

该模型使用 ProgramTypeId 作为外键

```
public class SurveyProgramModels
    {
        [Key]
        public Guid ProgramId { get; set; }

        public virtual SurveyProgramTypeModels SurveyProgramTypeModels { get; set; }

        public int ProgramYear { get; set; }

        public int ProgramStatus { get; set; }

    } 
```

控制器 GET/POST

```
 //
        // GET: /SurveyProgram/Create

        public ActionResult Create()
        {

            SelectList typelist = new SelectList(db.SurveyProgramTypeModels.ToList(), "ProgramTypeId", "ProgramType", db.SurveyProgramTypeModels);
            ViewData["SurveyProgramTypeModels"] = typelist;

            return View();
        } 

        //
        // POST: /SurveyProgram/Create

        [HttpPost]
        public ActionResult Create(SurveyProgramModels surveyprogram, FormCollection collection)
        {

            SelectList typelist = new SelectList(db.SurveyProgramTypeModels.ToList(), "ProgramTypeId", "ProgramType", db.SurveyProgramTypeModels);
            ViewData["SurveyProgramTypeModels"] = typelist;

          //  int SelectedCollection = Int32.Parse(collection["ProgramTypeId"]);

            if (ModelState.IsValid)
            {
              surveyprogram.ProgramId = Guid.NewGuid();

                db.SurveyPrograms.Add(surveyprogram);
                db.SaveChanges();
                return RedirectToAction("Index");  
            }

            return View(surveyprogram);
        } 
```

在视图中选择列表：

```
<div class="editor-field">
            @Html.DropDownList("ProgramTypeTypeModels", (IEnumerable<SelectListItem>)ViewData["SurveyProgramTypeModels"])
            @Html.ValidationMessageFor(model => model.SurveyProgramTypeModels)
        </div> 
```

选择列表在视图中呈现时是正确的，并且我可以将所选值视为表单集合的一部分。我不确定为什么所选值没有与 SurveyProgramModels 的其他数据一起保存。

编辑：当我删除两个类之间的关系时，我还应该提到正确提交的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T14:36:55.867

表单元素被命名为“ProgramTypeTypeModels”，这将导致它无法正确绑定回来。您还应该创建一个`Model`返回到`View`.

然后将 the`SelectList`作为属性包含在`Model`for the`View`

现在您执行以下操作：

```
 @Html.DropDownListFor(model => model.SurveyProgramTypeModels) 
```

然后，`[HttpPost]`您可以将强类型`Model`作为参数，并且 aspnet 绑定将完成所有工作，没有理由将 DTO 排除在外`FormCollection`

# c# - 如何将gridview中的更改更新为我在代码中创建的数据表

> ID：11035354
> 
> 赞同：0
> 
> 时间：2012-06-14T14:32:33.987
> 
> 标签：c#, gridview, datatable, datasource, gridcontrol

我创建了一个`datatable`in 代码并将其设置为`gridcontrol`( `DevExpress component`) 以像此处的代码一样显示它（添加一行`datatable`并将其设置为`datasource`of `gridcontrol`）：

```
DataTable PersonFamiliesDataTable = new DataTable();

PersonFamiliesDataTable.Columns.Add("BirthDate", typeof(String));
PersonFamiliesDataTable.Columns.Add("Job", typeof(String));
PersonFamiliesDataTable.Columns.Add("NameFamily", typeof(String));

DataRow PersonFamilyRow = PersonFamiliesDataTable.NewRow();

PersonFamilyRow["BirthDate"] = DateTimePicker_FamilyInfo_BirthDate.Text;
PersonFamilyRow["Job"] = FamilyInfo_txt_job.Text;
PersonFamilyRow["NameFamily"] = FamilyInfo_txt_NameFamily.Text;
PersonFamiliesDataTable.Rows.Add(PersonFamilyRow);

grid_Family.DataSource = PersonFamiliesDataTable; 
```

用户可以更改我的`gridcontrol`. 我想将我的`gridcontrol`更新更改为我的`datatable`. 我该怎么做（行编辑，行删除）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T16:11:31.217

我找到了解决方案：在`Family_gridView_CellValueChanged`事件中，添加以下代码：

```
PersonFamiliesDataTable = (DataTable)grid_Family.DataSource; 
```

因此，在网格单元格发生任何更改后，我`datatable`正在更新。请注意，当用户更改单元格并焦点离开它时，会出现此事件。

# sql - 就项目生命周期的数据库设计提供建议

> ID：11035357
> 
> 赞同：1
> 
> 时间：2012-06-14T14:32:48.893
> 
> 标签：sql, database-design, relational-database

在我们公司，一个项目开始它的生命作为一个业务开发，它有它自己的 3 个阶段的生命周期。一旦业务开发结束其生命周期，它可能会成为一个成熟的项目，然后开始一个全新的 3 阶段生命周期。然而，有时业务发展在项目的初始阶段之后永远不会成熟。

考虑到这一切，我决定为业务发展 (BD) 设置一个表，为项目（将它们视为单独的实体）分别设置一个表，每个表都存储它在生命周期中的当前阶段。当 BD 成为项目时，它会被输入到项目表中。由于该项目仍然需要引用所有与 BD 相关的字段以及任何新的 Project-only 字段，因此它通过 FK 对 BD 表执行此操作（基本上继承了 BD 的所有特征并添加更多）。

所以我想检查一下这个设计中是否有我遗漏的东西……也许我应该把所有东西都放在一个 Projects 表中并完全删除 BD 表？关于如何最好地处理这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T14:53:21.453

由于您的项目有不同的阶段，您可以设计一个表格来包含该项目，并带有一个状态字段来显示它处于哪个阶段。然后根据状态字段的值，您可以知道它是否处于业务开发、项目阶段或已完成。

出于审计目的，您还可以跟踪它在不同阶段之间发生变化的时间。

# php - 外来字符和 LDAP。LDAP 期望什么编码/字符集？

> ID：11035359
> 
> 赞同：6
> 
> 时间：2012-06-14T14:32:56.030
> 
> 标签：php, encoding, active-directory, ldap

我正在使用 解析 XML，`simplexml_load_string()`并使用其中的数据通过 LDAP 更新 Active Directory (AD) 对象。

示例 XML（简化）：

```
<?xml version="1.0" encoding="UTF-8"?>
<users>
    <user>Bìlbö Bággįnš</user>
    <user>Gãńdåłf Thê Gręât</user>
    <user>Śām Wīšë</user>
</users> 
```

我首先运行 an`ldap_search()`来查找单个用户，然后继续更改他们的属性。使用 LDAP 将上述值直接输入 AD 会导致出现一些非常混乱的字符。

例如：`BÃ¬lbÃ¶ BÃ¡ggÄ¯nÅ¡`

**我尝试了以下功能，但无济于事：**

```
utf8_encode($str);
utf8_decode($str);
iconv("UTF-8", "ISO-8859-1//TRANSLIT", $str);
iconv("UTF-8", "ASCII//TRANSLIT", $str);
iconv("UTF-8", "T.61", $str); 
```

理想情况下，我不想进行任何这些字符串转换。UTF-8*应该*没问题吧？！

**我还注意到以下几点：** 我已经打印出这些值以查看它们是如何产生的。在 CLI 中卷曲脚本将显示正确的字符，但 Web 浏览器显示与 AD 相同。

**这是怎么回事？我应该看别的东西吗，例如。网址编码？** 我希望这归结为我的一个简单错误。

**编辑：** 我使用 AD 管理 GUI 输入了这些字符，看看它们会如何出现。我可以通过 LDAP 很好地阅读它们。在浏览器中显示正确的字符。通过 CLI 卷曲将显示问号而不是外来字符。将这些返回值之一传递给`mb_detect_encoding()`将返回 UTF-8。

我决定立即修改同一个对象，不写入新字符串，而只是反转现有值并保存对象。这很好用——我在 AD 中看到了正确的值（反转）。

*   在 Mac OS X 10.7 Lion 上开发 - PHP 5.4.3
*   运行生产：Red Hat 6 - PHP 5.4.3
*   广告服务器：Windows 2003

**更新：** 几个月后，我找不到这个问题的答案/解决方案。最后，我将字符替换为它们的非重音等价物（我知道，这并不理想）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T17:45:26.183

您使用的是 LDAP v3 吗？

```
ldap_set_option($ldap, LDAP_OPT_PROTOCOL_VERSION, 3); 
```

LDAPv3 默认支持 UTF-8，它希望请求和响应默认使用。见这里：[http ://technet.microsoft.com/en-us/library/cc961766.aspx](http://technet.microsoft.com/en-us/library/cc961766.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-09T12:50:07.550

这是对我有用的解决方案。做以下事情：

1.) 首先确保您使用的是默认使用“UTF-8”的 LDAP 协议版本 3：

```
ldap_set_option($ldap, LDAP_OPT_PROTOCOL_VERSION, 3); 
```

2.) 如果要更改用户密码，请确保“使用 TLS”选项设置为`true`并使用 SSL 为`false`.

```
ldap_start_tls($ldapConnection); 
```

3.) 我使用了端口号`389`。

4.) 使用 PHP 函数`ldap_mod_replace`替换用户密码。

5.) 使用以下函数对您的代码进行编码`$password`：

```
public function encodePassword($password)
{
    $password="\"".$password."\"";
    $encoded="";
    for ($i=0; $i <strlen($password); $i++){ 
        $encoded.="{$password{$i}}\000"; 
    }
    return $encoded;
} 
```

6.) 使用以下逻辑更改用户密码：

```
$password="test";
if(mb_detect_encoding($password) == 'UTF-8')
{
    $password = utf8_decode($password);
}

$add=array();
$add["unicodePwd"][0] = encodePassword($password);

$result = @ldap_mod_replace($ldapConnection, $userDn, $add);
if ($result === false){
    //your action
}
else{
    //Your action
} 
```

7.) 请注意，该函数`encodePassword`会将您编码 `$password`为 UTF-8 编码。如果您的密码是 UTF-8 编码的，那么您必须在将其发送到 `encodePassword`函数之前对其进行解码。这就是我写这行的原因：

```
if(mb_detect_encoding($password) == 'UTF-8')
{
    $password = utf8_decode($password);
} 
```

当我在密码中提供德语变音符号时，此代码对我有用：`äüößÄÜ`等等...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-24T13:43:13.087

我已经设法通过两个步骤在 LDAP 中添加外来字符：

*   仅使用 ASCII 字符添加用户 (iconv "ASCII//TRANSLIT")

*   用于使用`ldapmodify`UTF-8 字符更新字段

LDAPv3 是 UTF-8，但我使用的工具（来自`smbldap-tools`）没有正确处理它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-24T14:36:23.333

对于那些偶然发现这一点的人来说，还有一件事要提：

如果您的文本已经是 UTF-8，那么不要尝试重新编码它。[请注意utf8_encode](http://php.net/manual/en/function.utf8-encode.php)文档页面上的以下注释。重新编码已经编码的字符串会导致文本乱码。此外，该功能仅允许将一种特定编码转换为另一种。

您可以通过执行以下操作轻松测试是否需要对字符串进行 UTF-8 编码：

```
if (!preg_match('//u', $value)) {
    // do your encoding process...
} 
```

关于网页上未正确显示的字符，但它们在 CLI 上，请确保您在标题中设置了正确的字符集：

`header('Content-type: text/html; charset=utf-8');`

# iphone - iOS 从表格视图单元格拖放到图像视图

> ID：11035364
> 
> 赞同：0
> 
> 时间：2012-06-14T14:33:14.733
> 
> 标签：iphone, ios, ipad, drag-and-drop

我需要帮助实现拖放手势，我想知道您的意见以找到最佳方法。

我有一个视图控制器，右侧有一个 uitableview，左侧有一些图像视图。

我想允许用户在其中一个图像视图上拖动表格视图的每个单元格。基本上，如果未在其中一个图像视图上释放单元格，则拖放操作将失败，否则图像视图将根据拖放的单元格更改图像。

您认为实现这一目标的最佳方法是什么？

另外，当用户开始拖动时，我希望他拖动特定形状的子视图，带有图像和数据，而不是拖动半透明单元格。

非常感谢，马可

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:42:37.363

您可以`UILongPressGestureRecognizer`在 every 上实现 a `UITableViewCell`，当您识别出长按时，开始拖动，您可以在 tableviewcell 上添加一个图层以指示这是正在拖动的单元格，现在不是在单元格本身周围拖动，而是拖动一个包含特定形状图像的 UIImageView，您需要使用它`touchesBegan, touchesMoved and touchesEnded`来移动图像，当触摸结束时，您需要测试 UIImageView 是否在您想要放置的 UIImageView 内

这是一般概念，您将不得不稍微努力一下

# c# - 未知的服务器标签“CR:CrystalReportViewer”

> ID：11035365
> 
> 赞同：2
> 
> 时间：2012-06-14T14:33:15.037
> 
> 标签：c#, asp.net, .net-4.0, crystal-reports

我正在开发 VS2010，水晶报表。在编译我的代码时，我遇到以下错误：

```
Unknown server tag 'CR:CrystalReportViewer' 
```

我在 web.config 文件中添加了参考：

```
 <assemblies>
            <add assembly="CrystalDecisions.CrystalReports.Engine, Version=13.0.2000.0, Culture=neutral, PublicKeyToken=692fbea5521e1304"/>
            <add assembly="System.Windows.Forms, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
            <add assembly="System.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
            <add assembly="CrystalDecisions.Shared, Version=13.0.2000.0, Culture=neutral, PublicKeyToken=692fbea5521e1304"/>
            <add assembly="CrystalDecisions.ReportSource, Version=13.0.2000.0, Culture=neutral, PublicKeyToken=692fbea5521e1304"/>
            <add assembly="CrystalDecisions.Web, Version=13.0.2000.0, Culture=neutral, PublicKeyToken=692fbea5521e1304"/>
            <add assembly="CrystalDecisions.Enterprise.Viewing.ReportSource, Version=13.0.2000.0, Culture=neutral, PublicKeyToken=692FBEA5521E1304"/>
< /assemblies> 
```

在我的 aspx 页面中，我注册了以下内容：

```
< %@ Register Assembly="CrystalDecisions.CrystalReports.Engine, Version=13.0.2000.0, Culture=neutral, PublicKeyToken=692fbea5521e1304" Namespace="CrystalDecisions.CrystalReports.Engine" TagPrefix="CR" %>

< %@ Register Assembly="CrystalDecisions.ReportSource, Version=13.0.2000.0, Culture=neutral, PublicKeyToken=692fbea5521e1304" Namespace="CrystalDecisions.ReportSource" TagPrefix="CR" %> 
```

你能建议我缺少什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T15:05:50.157

我想你只需要注册这个人...

```
<%@ Register assembly="CrystalDecisions.Web, Version=13.0.2000.0, Culture=neutral, PublicKeyToken=692fbea5521e1304" namespace="CrystalDecisions.Web" tagprefix="CR" %> 
```

并确保您安装了[VS 2010 版本的 Crystal](http://www.sap.com/solutions/sap-crystal-solutions/query-reporting-analysis/sapcrystalreports-visualstudio/downloads/index.epx)。它不再与VS一起提供......

# android - Android：是否可以将 TIFF 图像转换为 JPG、PNG？

> ID：11035377
> 
> 赞同：0
> 
> 时间：2012-06-14T14:33:44.150
> 
> 标签：android, encoding, image, tiff, decoding

我知道 android 不支持 TIFF 格式，但我从 Web 服务获取 Base64 图像字符串，我需要显示它。

```
 byte[] decodedString = Base64.decode(serverResponse, Base64.DEFAULT);
   Bitmap imgMap = BitmapFactory.decodeByteArray(decodedString, 0, decodedString.length); 
```

我尝试使用 BitmapFactory 对其进行解码，但由于它无法将其识别为图片，因此它返回 null

是否有任何外部 jar 或我可以添加的东西来显示/转换图片？

在此先感谢您的帮助！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T14:52:24.723

如果您愿意通过 Android NDK 将一些 C++ 添加到您的项目中，那么[libtiff](http://libtiff.org/)应该可以满足您的需求。

请参阅[在 android OS 中将 JPEG/PNG 图像转换为 TIFF 图像格式的问题](https://stackoverflow.com/questions/1278087/convert-jpeg-png-image-to-tiff-image-format-in-android-os)

# php - php替换标签之间的内容并保留它们

> ID：11035378
> 
> 赞同：0
> 
> 时间：2012-06-14T14:33:48.110
> 
> 标签：php, preg-replace

我需要替换这些标签之间的内容并保留标签

```
$source="Original string <p>bal bla bla</p>**** <!--{date}-->REPLACE ME!!!<!--/{date}-->"
$replaceText = '2012-06-14';
$start = '<!--{date}-->';
$end = '<!--/{date}-->';

preg_replace('#('.preg_quote($start).')(.*)('.preg_quote($end).')#si', '$1'.$replaceText.'$3', $source); 
```

结果是：

```
"Original string <p>bal bla bla</p>**** 012-06-14<!--/{date}-->" 
```

缺少开始标签和 2\. 想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T14:39:15.257

那是因为这样做你会获得 : `'$12012-06-14$3'`作为替代品。所以我猜它正在服用`$12`而不是`$1`

您可能想测试文档中写的内容，`${1}`而不是`$1`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T14:42:19.570

在 var 和 replaceText 之间放置一个空格

像那样

```
preg_replace('#('.preg_quote($start).')(.*)('.preg_quote($end).')#si', '$1 '.$replaceText.' $3', $source); 
```

# api - 如果我尝试在还没有时间轴的用户上发布 Facebook 操作会发生什么？

> ID：11035379
> 
> 赞同：0
> 
> 时间：2012-06-14T14:33:50.890
> 
> 标签：api, facebook-graph-api, facebook-opengraph, facebook-timeline

作为发布 Facebook 打开图形操作而不是旧帖子墙的 Facebook 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T18:03:27.607

如果应用程序要求用户具有时间轴（发布打开图形操作），用户将自动切换到时间轴。

# trigonometry - 三角学 - 找到两条曲线相交的地方

> ID：11035380
> 
> 赞同：0
> 
> 时间：2012-06-14T14:33:56.397
> 
> 标签：trigonometry

[http://i.imgur.com/3OAAH.jpg](http://i.imgur.com/3OAAH.jpg)

我画了这个惊人的图表来展示我想要计算的东西。如果你看不出来，这些是城堡的城墙和塔楼。为了“关闭”城堡，我需要找出两条红线相交的点，这样就可以建造一座塔将两堵墙连接在一起。

为了解决这个问题，墙的大小是固定的，因此所有三个边长都是已知的。这意味着您可以使用余弦定律找出其中一个旋转墙与静态墙的角度。但是，我尝试实现它，但无法使其正常工作。

这是代码：

```
function FindIntersection(vector Tower1, vector Tower2, float Wall1, float Wall2, out vector Point)
{
    local float S1; // Length of side between the two towers.
    local float S2; // Length of the first wall.
    local float S3; // Length of the second wall.
    local float CosA, A; // Stores the angle between S1 and S2.
    local vector Vec, Vec2;

    Tower1.Z = 0; // Make sure the towers are level.
    Tower2.Z = 0;
    S1 = VSize(Tower2 - Tower1); // Get the first side length.
    S2 = Wall1; // Get the second side length.
    S3 = Wall2; // Get the third side length.

    `log("---------- S1: " $ S1 $ " S2: " $ S2 $ " S3: " $ S3 $ " -----------");

    // Perform cosine law to get angle between S1 and S2.
    CosA = (Sq(S2) + Sq(S1) - Sq(S3)) / (2 * S2 * S1);
    A = ACos(CosA);

    `log("--------------------- " $ A*57.2957795131 $ " ---------------------");

    // Get a vector angle between up and S1.
    Vec = Normal(Tower2-Tower1);

    // Get a vector angle between S1 and S2.
    Vec2.X = Cos(A);
    Vec2.Y = Sin(A);
    Vec2.Z = 0;
    Vec2 = Normal(Vec2);

    // Determine the location of the new tower.
    Point = Tower1 + Normal(Vec+Vec2) * S2;
} 
```

我几乎可以肯定输入是正确的。我知道我没有考虑超过 90 度的角度，这可能是一个问题，但我真的不知道如何从这里开始。感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T14:54:19.183

你想要的是`A`三角形边的角度`S1`，`S2`和`S3`。你可以使用[余弦定律](http://en.wikipedia.org/wiki/Law_of_cosines)得到

```
A = ACOS( (S1*S1+S2*S2-S3*S3)/(2*S1*S2) ) 
```

如果您知道底墙 (S1) 的方向，则可以找到顶点的坐标。

```
TH = ATAN( (Tower2.Y-Tower1.Y)/(Tower2.X-Tower1.X) )
Tower3.X = S2*COS(A+TH)
Tower3.Y = S2*SIN(A+TH) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T15:34:28.880

试一试：

```
function FindIntersection(vector Tower1, vector Tower2, float Wall1, float Wall2, out vector Point)
{
    local float S1; // Length of side between the two towers.
    local float S2; // Length of the first wall.
    local float S3; // Length of the second wall.
    local float CosA, A; // Stores the angle between S1 and S2.
    local vector Vec1;

    Tower1.Z = 0; // Make sure the towers are level.
    Tower2.Z = 0;
    S1 = VSize(Tower2 - Tower1); // Get the first side length.
    S2 = Wall1; // Get the second side length.
    S3 = Wall2; // Get the third side length.

    `log("---------- S1: " $ S1 $ " S2: " $ S2 $ " S3: " $ S3 $ " -----------");

    // Perform cosine law to get angle between S1 and S2.
    CosA = (Sq(S2) + Sq(S1) - Sq(S3)) / (2 * S2 * S1);
    A = ACos(CosA);

    `log("---------------------  Angle in degrees" $ (A* 180.f) / M_PI $ " ---------------------");

    // Get a vector angle between up and S1.
    Vec1 = Normal(Tower2-Tower1);

    // rotate the normalized vector around axis (0,1,0) (assuming Unreals co-ordinate system is x,y,z and Y is UP
    local quat quatRot =  QuatFromAxisAndAngle( Vect(0,0,1), -A ); //angle accepted in radians NOTE: Could just be A instead of -A, depends on which way the point will rotate

    local vector corectedS2Vector = Normal ( QuatRotateVector ( quatRot , Vec1 ));

     // Determine the location of the new tower.
    Point = Tower1 + corectedS2Vector * S2;
} 
```

# php - 如何更改每页的标题图像

> ID：11035383
> 
> 赞同：0
> 
> 时间：2012-06-14T14:34:05.297
> 
> 标签：php, jquery, image

我正在使用 Drupal 7。我有 page.tpl.php 文件和 5 个菜单项。我想要，更改每个菜单的标题图像。是 1 张图片。

İs 可以通过 jQuery 或其他方式实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T14:40:42.503

我假设您想更改每个页面请求的标题图像 - 比如旋转横幅。最简单的方法 - 将 HTML 中 img 的位置更改为 PHP 脚本，如下所示：

```
<img src="myheader.php"> 
```

然后创建 myheader.php 它将加载您想要的图像 - 每次都不同并提供它，如下所示：

```
<?php
header('Content-type: image/png');
$number = time() % 5;
readfile($number . '.png'); 
```

这将提供图像 0.png、1.png、2.png、3.png、4.png。如果您有更多图像 - 将 %5 更改为您的值。它是如何工作的？它将自 01.01.1970 以来的秒数除以 5 并返回提醒。所以提醒总是0-4。所以它提供图像 0-4 + '.png'。您的所有图像都必须是 PNG。如果不是 - 您需要更改“内容类型”标题。

# algorithm - 最短路径 A* f(n) = g(n) + h(n)

> ID：11035393
> 
> 赞同：1
> 
> 时间：2012-06-14T14:34:33.917
> 
> 标签：algorithm, distance, path-finding, shortest-path, a-star

当您使用 A* 时，它会选择最接近目标的最佳节点，对吧？（使用 f(n) = g(n) + h(n)) （使用曼哈顿距离作为 h(n) ）

但是，如果起点和目标之间有墙怎么办。我无法用语言解释，但我会展示一张图片。

![](../Images/8ea22a24925600fee26f52233e923608.png)

如果 A* 选择最接近目标的节点，为什么路径不是红色圈出的那条？但是那个被绿色包围了。我真的不明白 A* 尤其是当有无法通过的单元格/瓦片/节点/等时。（墙壁）。**此外，您可以在1:20**看到我在视频[http://www.youtube.com/watch?v=DINCL5cd_w0](http://www.youtube.com/watch?v=DINCL5cd_w0)（路径查找算法（A*、Dijkstra、双向 BFS））中制作的这张图片

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T14:42:53.733

A* 还考虑当前路径的长度以及到目标的距离。扩展了所有可能的路径，但优先考虑的是：

1.  最接近目标
2.  最短的

路径成本 f(n) 等于上一步的成本 g(n) 加上一个基于到目标距离的因子 h(n)。因此，对于路径通过的每一个额外的网格空间，路径的成本都会增加。这将有效地在短路径和直接到达目标的路径之间建立平衡。

因此，当您的示例路径再次连接时，紫色路径最短，因此这将是首先扩展的路径，最终将首先到达目标。

有一个 Udacity 课程：[编程机器人汽车](http://www.udacity.com/overview/Course/cs373)，其中有关于 A*（和类似）算法的好部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T14:51:16.250

正如您所说，A* 根据 f(n)=g(n)+h(n) 选择当前最佳路径，其中 g(n) 是当前计算的成本，h(n) 是对剩余成本的估计。只有目前最有希望的节点（具有最小 f(n) 的节点）才会被扩展。因此，当蓝色和紫色的路径分叉时（我们称其为 A 点），它会直奔墙壁，因为那里的 h(n) 更小，整个 f(n) 变得更小。

请记住， h 函数通常是问题的松弛 - 在您的情况下，它可能是到目标的直线距离。因此，整个 f 变得更小。如果当前 f 变得大于对未追踪路径的估计，则将考虑另一条路径。

因此，它没有通过紫色路径的可能原因是蓝色路径中每个点的 f 的当前值总是小于紫色路径中的值。

这对我来说很奇怪，因为你的 g 总是在增加，蓝色路径中有很多点比 A 点更远离目标。不过，如果你想确定，你应该做一些调试和验证每个值每个未追踪点的 f、g 和 h 与当前被追踪路径的值的比较。**

# android - java.lang.noclassdeffounderror 在同一个包中？

> ID：11035396
> 
> 赞同：0
> 
> 时间：2012-06-14T14:34:43.587
> 
> 标签：android, eclipse, android-2.2-froyo, android-sdk-2.3

我有一个非常简单的 android 项目——两个类。两者都在同一个包 com.testPackage 中。当我在两个不同的文件（classa.java 和 classb.java）中有两个类，并从 ClassA 调用 ClassB b = new ClassB() 时，在我的设备上运行时出现此错误；

```
java.lang.noclassdeffounderror 
```

如果我只是将相同的类定义（减去公共说明符）放到 classa.java 中，一切都会很好。我需要做些什么才能让 eclipse 正确打包吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T14:44:52.390

您的文件名是 classa.java 还是 ClassA.java ？

# ruby-on-rails-3 - 这是什么意思？struct Arel::Attributes::Attribute 不兼容（结构大小不同）

> ID：11035398
> 
> 赞同：0
> 
> 时间：2012-06-14T14:34:48.113
> 
> 标签：ruby-on-rails-3, arel

我刚刚将一个应用程序更新到 rails 3.0.15，我不确定这是否相关，但我现在`struct Arel::Attributes::Attribute not compatible (struct size differs)`在运行服务器后立即出错。

日志显示：

```
tarted GET "/" for 127.0.0.1 at 2012-06-14 10:34:09 -0400

TypeError (struct Arel::Attributes::Attribute not compatible (struct size differs)):

Rendered gems/ruby/1.9.1/gems/actionpack-3.0.15/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
  SQL (1.9ms)  describe `groups_users`
Rendered gems/ruby/1.9.1/gems/actionpack-3.0.15/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (239.8ms)
Rendered gems/ruby/1.9.1/gems/actionpack-3.0.15/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (244.9ms) 
```

## 更新

这个问题似乎只有在我使用某个循环回 localhost 的 url 时才会发生，即`live.dev:3000`say`localhost:3000`或另一个循环 url 都可以。

这是应用程序跟踪

```
gems/ruby/1.9.1/gems/activerecord-3.0.15/lib/active_record/session_store.rb:58:in `load'
gems/ruby/1.9.1/gems/activerecord-3.0.15/lib/active_record/session_store.rb:58:in `unmarshal'
gems/ruby/1.9.1/gems/activerecord-3.0.15/lib/active_record/session_store.rb:131:in `data'
gems/ruby/1.9.1/gems/activerecord-3.0.15/lib/active_record/session_store.rb:298:in `block in get_session'
gems/ruby/1.9.1/gems/activesupport-3.0.15/lib/active_support/benchmarkable.rb:55:in `silence'
gems/ruby/1.9.1/gems/activerecord-3.0.15/lib/active_record/session_store.rb:294:in `get_session'
gems/ruby/1.9.1/gems/actionpack-3.0.15/lib/action_dispatch/middleware/session/abstract_store.rb:195:in `block in load_session'
gems/ruby/1.9.1/gems/actionpack-3.0.15/lib/action_dispatch/middleware/session/abstract_store.rb:223:in `stale_session_check!'
gems/ruby/1.9.1/gems/actionpack-3.0.15/lib/action_dispatch/middleware/session/abstract_store.rb:193:in `load_session'
gems/ruby/1.9.1/gems/actionpack-3.0.15/lib/action_dispatch/middleware/session/abstract_store.rb:121:in `load!'
gems/ruby/1.9.1/gems/actionpack-3.0.15/lib/action_dispatch/middleware/session/abstract_store.rb:113:in `load_for_read!'
gems/ruby/1.9.1/gems/actionpack-3.0.15/lib/action_dispatch/middleware/session/abstract_store.rb:53:in `[]'
gems/ruby/1.9.1/gems/actionpack-3.0.15/lib/action_dispatch/middleware/flash.rb:178:in `call'
gems/ruby/1.9.1/gems/actionpack-3.0.15/lib/action_dispatch/middleware/session/abstract_store.rb:149:in `call'
gems/ruby/1.9.1/gems/actionpack-3.0.15/lib/action_dispatch/middleware/cookies.rb:302:in `call'
gems/ruby/1.9.1/gems/activerecord-3.0.15/lib/active_record/query_cache.rb:32:in `block in call'
gems/ruby/1.9.1/gems/activerecord-3.0.15/lib/active_record/connection_adapters/abstract/query_cache.rb:28:in `cache'
gems/ruby/1.9.1/gems/activerecord-3.0.15/lib/active_record/query_cache.rb:12:in `cache'
gems/ruby/1.9.1/gems/activerecord-3.0.15/lib/active_record/query_cache.rb:31:in `call'
gems/ruby/1.9.1/gems/activerecord-3.0.15/lib/active_record/connection_adapters/abstract/connection_pool.rb:354:in `call'
gems/ruby/1.9.1/gems/actionpack-3.0.15/lib/action_dispatch/middleware/callbacks.rb:46:in `block in call'
gems/ruby/1.9.1/gems/activesupport-3.0.15/lib/active_support/callbacks.rb:416:in `_run_call_callbacks'
gems/ruby/1.9.1/gems/actionpack-3.0.15/lib/action_dispatch/middleware/callbacks.rb:44:in `call'
gems/ruby/1.9.1/gems/rack-1.2.5/lib/rack/sendfile.rb:106:in `call'
gems/ruby/1.9.1/gems/actionpack-3.0.15/lib/action_dispatch/middleware/remote_ip.rb:48:in `call'
gems/ruby/1.9.1/gems/actionpack-3.0.15/lib/action_dispatch/middleware/show_exceptions.rb:47:in `call'
gems/ruby/1.9.1/gems/railties-3.0.15/lib/rails/rack/logger.rb:13:in `call'
gems/ruby/1.9.1/gems/rack-1.2.5/lib/rack/runtime.rb:17:in `call'
gems/ruby/1.9.1/gems/activesupport-3.0.15/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
gems/ruby/1.9.1/gems/rack-1.2.5/lib/rack/lock.rb:13:in `block in call'
<internal:prelude>:10:in `synchronize'
gems/ruby/1.9.1/gems/rack-1.2.5/lib/rack/lock.rb:13:in `call'
gems/ruby/1.9.1/gems/actionpack-3.0.15/lib/action_dispatch/middleware/static.rb:30:in `call'
gems/ruby/1.9.1/gems/railties-3.0.15/lib/rails/application.rb:168:in `call'
gems/ruby/1.9.1/gems/railties-3.0.15/lib/rails/application.rb:77:in `method_missing'
gems/ruby/1.9.1/gems/railties-3.0.15/lib/rails/rack/log_tailer.rb:14:in `call'
gems/ruby/1.9.1/gems/rack-1.2.5/lib/rack/content_length.rb:13:in `call'
gems/ruby/1.9.1/gems/rack-1.2.5/lib/rack/handler/webrick.rb:52:in `service'
/Users/victorstan/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `service'
/Users/victorstan/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/httpserver.rb:70:in `run'
/Users/victorstan/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread' 
```

# gwt - 在 GWT 中重新加载 iframe

> ID：11035401
> 
> 赞同：1
> 
> 时间：2012-06-14T14:34:59.457
> 
> 标签：gwt, iframe, refresh, frame, reload

我目前正在处理一个 GWT 项目，我在我的应用程序的 iframe 中显示一个 HTML 文件。这个 HTML 文件实际上是在显示时被写入的，我希望能够重新加载框架，以便对 HTML 文件所做的更改反映在屏幕上。我能够做到这两种不同的方式在开发模式下运行时都可以工作，但是在部署项目时似乎都不起作用。

我尝试的第一种方法是将框架的 URL 设置为自身：

```
frame.setUrl(frame.getUrl()); 
```

我尝试使用 JSNI 的第二种方法：

```
public native void refresh() /*-{
  if($doc.getElementById('__reportFrame') != null) {
    $doc.getElementById('__reportFrame').src =
       $doc.getElementById('__reportFrame').src;
  }
}-*/; 
```

部署后，框架会显示在窗口中，当文件写入完成时，会调用这些刷新方法中的任何一个，并且框架会刷新以包含完成的 HTML 文件。部署时，刷新调用不会重新加载框架的内容，但是如果我调出框架的上下文菜单（在 Firefox 中），然后进入“此框架”，然后单击“重新加载”，它会成功将框架重新加载到包含完成的 HTML 文件。我已经在多个版本的 Firefox 上对此进行了测试，但没有任何运气。

有没有人有什么建议？为什么行为会从一种模式到另一种模式不同？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T15:59:36.730

哇，谷歌的搜索速度真的很快^^

> 您可以使用一些 JSNI 来执行此操作。创建一个方法，例如
> 
> 受保护的本机 void reloadIFrame(Element iframeEl) / *-{ iframeEl.contentWindow.location.reload(true); }-* /;
> 
> ```
>  Then call it with your iFrame element 
> ```

所以你发布两次的问题已经在这里得到回答 [http://groups.google.com/group/google-web-toolkit/browse_thread/thread/64aa7712890652d3](http://groups.google.com/group/google-web-toolkit/browse_thread/thread/64aa7712890652d3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-04T05:21:31.740

我们有一个要求，其中一个 GWT 应用程序（父级）在 iframe 中加载了另一个 GWT 应用程序（子级）。子应用程序在执行某些 DB 操作后必须刷新 iframe。我们使用 JSNI 来完成同样的任务。

```
private native void refreshChild(String url)/*-{
 $wnd.location.href=url; 
}-*/ 
```

如果子框架需要重定向到另一个网页，可以相应地修改url。我们确实尝试使用 reload() 方法，但没有帮助。上面这段代码，当然需要写在子应用中。

# c++ - 将对象副本添加到容器的更好方法

> ID：11035403
> 
> 赞同：1
> 
> 时间：2012-06-14T14:35:03.467
> 
> 标签：c++, pointers, polymorphism, shared-ptr

我有一个类`Bar`，它存储派生自`BarItem`：

```
#include <list>
#include <memory>

class Bar {
public:
    typedef std::shared_ptr<BarItem> item_ptr;

    void add_item(item_ptr item) {
        items_.push_back(item);
    }

private:
    std::list<item_ptr> items_;
}; 
```

我有另一个类`Note`，它是`BarItem`. `Note`目前要添加我正在做的对象的副本：

```
Bar my_bar;
Note my_note;

my_bar.add_item(Bar::item_ptr(new Note(my_note))); 
```

这有点难看；我想知道是否有更好的方法或自动化方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:43:31.597

您实际上无法避免复制（在 C++11 中您可以将其变为移动），但您可以“自动化”它，以便通过重载`add_item`每种类型的函数（可能是 的子级`BarItem`）来节省一些击键。

```
template <class T>
typedef enable_if<is_base_of<BarItem, T>::value,void>::type add_item(const T& item) { /* or T&& */
    items_.push_back(item_ptr(new T(item)));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T14:38:57.310

您可以将函数本身中丑陋的部分移动为：

```
template<typename ItemType>
void add_item(ItemType item) //change the signature
{ 
    items_.push_back(new ItemType(item));  //add the copy!
} 
```

并将其称为：

```
my_bar.add_item(my_note); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T14:43:29.477

在容器中使用指针是减少对象复制的一种方法。但是您处理 Note 对象创建的方式涉及通过复制构造函数对其进行复制！

你能避免拥有一个对象，而是拥有一个指向该对象的指针吗？您可以通过将创建放在一个函数（工厂）中来做到这一点。该函数将接受构造函数的参数，新建对象并返回一个智能指针。

# c# - 无法投影 linq 查询

> ID：11035409
> 
> 赞同：0
> 
> 时间：2012-06-14T14:35:32.327
> 
> 标签：c#, linq, entity-framework, projection

我有以下实体模型：

![在此处输入图像描述](../Images/51b61b12e1137d2d03d0cb8deb9fd396.png)

从中我需要以下格式的数据：

```
Name, Picked, Packed, Complaints
ie Name=Muhammad Picked=6 Packed=9 Complaints=1 
```

在给定的时间段内（使用 ProcessedOn）。

我有以下看起来很复杂的查询（对我来说）。

```
 using(var db = new DbContainer())
        {
            var workers =
                db.Workers.Select(
                    x => new
                            {
                                x.Name,
                                Picked = x.PickedOrders.Where(a => a.ProcessedOn >= dtStart.Value && a.ProcessedOn <= dtEnd.Value).Sum(y => y.Units),
                                Packed = x.PackedOrders.Where(a => a.ProcessedOn >= dtStart.Value && a.ProcessedOn <= dtEnd.Value).Sum(y => y.Units),
                                Complaints = x.PickedOrders.Where(a => a.ProcessedOn >= dtStart.Value && a.ProcessedOn <= dtEnd.Value).Count(y => y.Complaint != null) 
                                    + x.PackedOrders.Where(a => a.ProcessedOn >= dtStart.Value && a.ProcessedOn <= dtEnd.Value).Count(y => y.Complaint != null)
                            }).ToList();
        } 
```

我收到此错误：

**转换为值类型“Int32”失败，因为具体化值为空。结果类型的泛型参数或查询必须使用可为空的类型。**

有任何想法吗？

# java - 搜索每条记录具有多个值的类数组

> ID：11035419
> 
> 赞同：0
> 
> 时间：2012-06-14T14:36:03.813
> 
> 标签：java, arrays, oop, search, methods

我需要在对象数组中搜索名称，然后打印出与该名称对应的所有信息。

我有

```
public class AccessFriendlyFile {
private Friendlies[] fr = new Friendlies[100];
private int size = 0;

public AccessFriendlyFile (){
try {
    Scanner scFile = new Scanner(new File("Friends.txt"));
    String line, name, surname, cell, mail, landline;

    while (scFile.hasNext()){
        line = scFile.nextLine();
        Scanner sc = new Scanner(line).useDelimiter("#");
        name = sc.next();
        surname = sc.next();
        cell = sc.next();

        if (sc.hasNext()){
            mail = sc.next();
            landline= sc.next();
            fr[size] = new ExtendFriendlies(name, surname, cell, mail, landline);

        }

        else {
            fr[size]= new Friendlies(name, surname, cell);
        }

        size++;
        sc.close();
    }

}catch (FileNotFoundException ex){
    System.out.println("File not found");
} 
```

我如何编写一个方法来搜索“fr”的名称并打印出所有相应的信息？

非常感谢杰西

编辑：这是我的搜索方法，目前不起作用。

```
public int Search(String name) {
    int loop = 0;
    int pos = -1;
    boolean found = false;
    while (found == false) {
        if (fr[loop] == name) {
            found = true;
            pos = loop;
        } else {
            loop++;
        }
    }

    return pos;
} 
```

if 语句中出现无法比较的类型错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:41:17.453

在您的`Friendlies`类中，有一个调用方法，该方法`getName()`将返回该友好的名称。遍历`fr`直到找到匹配的名称。找到该名称后，使用类似`get`的方法打印出`Friendly`您刚刚找到的匹配所需的所有信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T14:41:30.293

这应该有效：

```
public List<Friendlies> search(String name) {

    List<Friendlies> list = new ArrayList<Friendlies>();
    for(Friendlies friendlies : fr) {
        if(friendlies.getName().equals(name)) {
            list.add(friendlies);
        }
    }

    return list;

} 
```

然后，使用返回的列表，实现数据的漂亮显示:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T14:45:09.580

假设 AccessFriendlyFile 将数据加载到您的数组中，如果您想检索所有匹配的名称，您可以使用 for each 循环：

```
List<Friendlies> getByName(String searched){
   List<Friendlies> result = new Arraylist<Friendlies>();
   for (Friendlies currentFriendly : fr){
      if (searched.equalsIgnoreCase(currentFriendly.getName()){
        result.add(currentFriendly);
      }
   }
   return result;
} 
```

仅适用于第一个：

```
Friendlies getByName(String searched){
   for (Friendlies currentFriendly : fr){
      if (searched.equalsIgnoreCase(currentFriendly.getName()){
        return currentFriendly;
      }
   }
   return null;
} 
```

您应该使用列表而不是固定数组。如果文件包含超过 100 条记录，您将收到 indexoutofbounds 异常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T14:47:41.160

我建议你在这里重命名你的变量。我认为，Friendlies 类存储一个联系人，一个朋友。Friend 对象列表是一个数组，您最好将其命名为friendList 甚至friendlies。我还鼓励您不要将大小用作计数器变量。大小是您有多少朋友，您可以使用 i 或friendCounter 遍历它们，或者使用a for each 循环，如下所示，

```
public Friendlies find(String name) {
    for(Friendlies friend : fr) {
        if(friend.getName().equalsIgnoreCase(name))
            return fiend;
    }
    return null;

}

//now to print the info you can do this:
Friendlies findJoe = find("Joe");
if(findJoe==null)
    System.out.println("You have no friends namd Joe.");
else
    System.out.println(findJoe); 
```

我的代码假设您在友谊赛中实现了 toString()。如果您使用 netbeans，您可以自动生成此代码，然后对其进行调整以获得您想要的格式。（只需右键单击要编写方法的位置并选择插入代码）

# ssis - Eventhandler 中全局变量的 SSIS 范围

> ID：11035420
> 
> 赞同：0
> 
> 时间：2012-06-14T14:36:13.977
> 
> 标签：ssis

作为其中一个 SSIS 包的包错误处理机制的一部分，

我已在 SSIS 中将变量 V_ID(int32) 声明为全局变量，并且该变量的初始值为 0。现在我使用存储过程输出（在 SSIS 中使用执行 sql 任务）为该变量（例如 1987 年）分配了一个值）。

我必须将此值作为输入传递给第二个存储过程（它已使用 Eventhandlers 中的执行 sql 任务实现）。但是当我这样做时，我可以看到传递给第二个存储过程的值是 0，而不是我作为第一个存储过程的结果得到的值。

我是否必须更改变量表达式上的任何内容以关联变量值？

我需要知道的是，如果一个变量具有全局范围并且其值已作为包执行的一部分更改，我如何在事件处理程序中使用此更改的值。（我需要将此更改的值作为输入传递事件发生时的第二个存储过程）

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T15:55:27.683

在执行 SQL 任务上，您必须设置参数才能访问该值。你已经这样做了吗？当您说事件处理程序时，它是一种什么样的事件处理程序？

# local-storage - Extjs4 localstorage -- 如何删除所有记录？

> ID：11035422
> 
> 赞同：4
> 
> 时间：2012-06-14T14:36:16.810
> 
> 标签：local-storage, extjs4.1

本地存储代理似乎在 Extjs 4.1 中有相当多的错误。请告诉我我做错了什么。

我正在尝试（像其他人一样）从服务器加载数据，然后将其存储在本地以供离线使用。我的问题涉及刷新数据（在浏览器中点击重新加载）。 `removeAll()`不删除任何记录。我读过您可以通过调用`clear()`本地存储代理本身来清除本地存储。删除记录时，不会重置密钥生成器。我担心这最终会导致问题。

在我的代码中，我在做什么会导致 LocalStorage 行为不端？我知道在模型上正确设置 id 存在一些技巧，但我认为我做对了。

这是模型和商店：

```
 Ext.define('MAP.model.LookupData', {
                extend: 'Ext.data.Model',

                idProperty:'localId',

                fields: [
                    'localId', // used for storing data via a localstorage proxy. -jg
                    'name',
                    'value'
                ]
            });

            Ext.define('MAP.store.LocalCloudConditionStore', {
                extend: 'Ext.data.Store',
                model: 'MAP.model.LookupData',
                storeId: 'localCloudConditionStore',

                proxy: {
                    type: 'localstorage',
                    id  : 'cloud-conditions'
                }

            }); 
```

这是尝试用于`removeAll()`清除本地存储的代码：

```
 offlineStore.load();
    offlineStore.removeAll();
    offlineStore.sync();

    Ext.each(records,function(record){
        var added = offlineStore.add(record.getData())[0];
        console.log(added.get('id'));
    });

    offlineStore.sync(); 
```

本地存储代理写入我的浏览器的内容：

![首次加载](../Images/a94945582325a704723c048453e80f16.png)

第二次重新加载确实如此。它不会删除以前的：

![第二次加载。 第一次加载数据不会被删除。](../Images/7d3a5163c959fd83e94f07f0f2d84499.png)

如果我尝试使用`proxy.clear()`，记录会消失，但不会重置 idGenerator 种子：

```
 offline.getProxy().clear();

    Ext.data.StoreManager.register(offline);

    Ext.each(records,function(record){
        var added = offline.add(record.getData())[0];
        console.log(added.get('id'));
    });

    offline.sync(); 
```

![计数器未重置！](../Images/09c67f9c6b2d15a702bb4e6f11478373.png)

谢谢你的眼球。

**更新**

我已经能够通过在实例化我的本地存储之前直接重置值来重置本地存储的计数器。显然，这超出了预订范围，因此并不理想。

```
window.localStorage.setItem('cloud-conditions-counter',0);

var offline = Ext.create('MAP.store.LocalCloudConditionStore');

offline.getProxy().clear(); 
```

**更新 DEUX**

经过进一步思考，我认为不重置计数器是正确的。当 mysql 中的表被截断时，您不会重置序列号。如果使用已删除记录的某些缓存 id（假设 id 为 1）从表中提取数据，这可能会导致问题。将返回一条完全不同的记录，而不是被删除的记录。好吧，有道理。

仍然，为什么他妈的不起作用`store.removeAll(); store.sync()`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T23:59:41.057

我不确定这是一个错误，但我确信它`removeAll()`不会将记录标记为已删除并且不会影响远程或本地存储（即，后续同步不会做任何事情）。这与`remove()`- 实际上是这样做的。

您可以使用此方法删除所有记录：

```
Ext.override(Ext.data.Store), { 

    removeAllForReal: function() {
        records = this.data.items,
        i = records.length;

        while (i--) {
            this.remove( records[i] );
        }
    }
}); 
```

# trigger.io - 视频结束后的布局问题

> ID：11035425
> 
> 赞同：1
> 
> 时间：2012-06-14T14:36:24.043
> 
> 标签：trigger.io

视频结束后出现布局问题，正在使用 trigger.io。

基本上我的播放命令是，

```
forge.media.videoPlay(url,
                function () {
                },
                function (error) {                        
                }
            ); 
```

视频播放效果不错，但在结束并切换回页面视图后，它会在状态栏下重新加载。

这是正在发生的事情的一个例子。

[http://i.stack.imgur.com/uNL4K.jpg](http://i.stack.imgur.com/uNL4K.jpg)

此问题已在 iOS 4.2.1 上测试

**更新#1：**

正文 CSS：

```
body {
    overflow-x: hidden;
    width: 320px;
    min-height: 460px;
    font-family: museo, Arial, Helvetica, sans-serif;
    color:white;
    -webkit-font-smoothing:antialiased;
    -moz-font-smoothing:antialiased;
    -o-font-smoothing:antialiased;
    font-smooth:auto;
    font-size: 16px;
    background-color: black;
    margin: 0px;
} 
```

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T13:20:42.333

我们没有 4.2.1 的任何设备，也无法降级（感谢 Apple！）。不幸的是，我们无法在我们的任何设备或模拟器上重新创建它，所以我的直觉是这是 4.2.1 中的一个错误。

# c# - 检查值是否存在于多个表中

> ID：11035431
> 
> 赞同：0
> 
> 时间：2012-06-14T14:36:43.883
> 
> 标签：c#, performance, entity-framework, linq-to-entities

我的数据库中有这样的表，例如、 、`Customer`等`Member`。这些用户中的每一个都有他的电子邮件地址。我需要检查是否已经有给定电子邮件的用户。我在想：`Instructor``Employee`

*   检查每个表，如下所示：

```
 public bool IsEmailAddressExists(string email)
    {
        if (!Context.Customers.Any(c => string.Equals(c.Email, email, StringComparison.InvariantCultureIgnoreCase)))
            if (!Context.Members.Any(m => string.Equals(m.Email, email, StringComparison.InvariantCultureIgnoreCase)))
              ...
    } 
```

*   选择所有电子邮件并检查：

```
 public bool IsEmailAddressExists(string email)
    {
        var emails = Context.Customers.Select(c => c.Email).Union(Context.Members.Select(m => m.Email))...; //other unions
        return emails.Any(e => string.Equals(e, email, StringComparison.InvariantCultureIgnoreCase));
    } 
```

有更多的表和许多用户，所以我想知道实现这种检查的最有效方法是什么。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T14:47:27.297

听起来你有几个选择。

**创建视图。** 您可以在数据库中创建一个仅显示电子邮件地址的视图。假设您使用的是 MSSQL Server，例如：

```
CREATE VIEW EmailView AS
SELECT Email from Customers
UNION ALL
SELECT Email from Instructors
.... 
```

...然后使用绑定到该视图的实体，以便您可以检查电子邮件列表以查看该电子邮件是否已经存在。查看[文档](http://msdn.microsoft.com/en-us/library/aa214068%28v=sql.80%29.aspx)以获取更多信息。

**规范化您的数据库。** 这些表格中的每一个是否共享电子邮件以外的通用信息，例如名字和/或姓氏？您可能值得花时间重新组织您的数据模型以将该信息放在“Persons”表中，然后将您的其他表外键到它。（如果您的用户是两个不同的事物，例如客户和讲师，这也会有所帮助。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T17:31:40.510

在纯 SQL 中，这将是最有效的，因为它会在匹配时立即停止搜索：

...作为存储过程：

```
CREATE PROCEDURE EmailExists 
    @email varchar(254) = NULL
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;

    DECLARE @emailExists bit

    SET @emailExists = 0

    SELECT @emailExists = 1 WHERE EXISTS(SELECT 1 FROM Customer WHERE email = @email)
    IF @emailExists = 0
    BEGIN
        SELECT @emailExists = 1 WHERE EXISTS(SELECT 1 FROM Member WHERE email = @email)
        IF @emailExists = 0
        BEGIN
            SELECT @emailExists = 1 WHERE EXISTS(SELECT 1 FROM Instructor WHERE email = @email)
            IF @emailExists = 0
            BEGIN
                SELECT @emailExists = 1 WHERE EXISTS(SELECT 1 FROM Employee WHERE email = @email)
            END
        END
    END

    SELECT @emailExists
END 
```

...作为标量值函数：

```
CREATE FUNCTION EmailExists 
(
    @email varchar(254)
)
RETURNS bit
AS
BEGIN
    DECLARE @emailExists bit

    SET @emailExists = 0

    SELECT @emailExists = 1 WHERE EXISTS(SELECT 1 FROM Customer WHERE email = @email)
    IF @emailExists = 0
    BEGIN
        SELECT @emailExists = 1 WHERE EXISTS(SELECT 1 FROM Member WHERE email = @email)
        IF @emailExists = 0
        BEGIN
            SELECT @emailExists = 1 WHERE EXISTS(SELECT 1 FROM Instructor WHERE email = @email)
            IF @emailExists = 0
            BEGIN
                SELECT @emailExists = 1 WHERE EXISTS(SELECT 1 FROM Employee WHERE email = @email)
            END
        END
    END

    -- Return the result of the function
    RETURN @emailExists
END 
```

在带有 Linq 的 C# 中，您可以使用 Any 扩展名和 || 操作员。由于 Any 通常在 SQL 中被翻译为 EXISTS 并评估 || C# 中的运算符是惰性的，一旦到达电子邮件的第一次出现，评估就会停止。

```
bool emailExists = customerEmails.Any(e => string.Equals(e, email, StringComparison.InvariantCultureIgnoreCase))
                   || memberEmails.Any(e => string.Equals(e, email, StringComparison.InvariantCultureIgnoreCase))
                   || instructorEmails.Any(e => string.Equals(e, email, StringComparison.InvariantCultureIgnoreCase))
                   || employeeEmails.Any(e => string.Equals(e, email, StringComparison.InvariantCultureIgnoreCase)); 
```

# c# - 我需要跨域策略吗？

> ID：11035433
> 
> 赞同：0
> 
> 时间：2012-06-14T14:36:45.787
> 
> 标签：c#, apache-flex, security, permissions, cross-domain-policy

当我通过 Visual Studio 的 2008 和我自己机器上的 php 网页以调试模式运行我的项目时，我正在使用一个 flex (3.5) 应用程序，该应用程序具有嵌入在与 C# asp.net 网站通信的 php 页面中的 swf一切正常。然后我将所有内容都移到了网络服务器上，现在它只是间歇性地工作，当它不工作时会在闪存日志中产生以下错误：

“错误：由于缺少策略文件权限，请求者从 /php-webpage/swf-file 对 /c#website 的资源请求被拒绝。”

我已经阅读了很多关于策略文件的内容，并且确实了解了它们的目的，但我不明白的是，如果我的 php 网页和 C# 项目托管在同一台服务器上，那么我不需要策略文件，因为我'没有跨域通信 - 我使用的是同一台服务器？

我在这里遗漏了什么还是只是误解了政策文件？如果不需要，为什么闪存日志会抱怨策略文件权限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T17:12:51.173

@user1456312，我对 C# 服务器一无所知，但也许我可以给你一些想法来解决它。

在调试模式下，没有安全限制，所以没有问题。

在浏览器中输入url地址可以直接得到crossdomain.xml文件吗？

您将跨域文件放在哪里以及访问程序的 url 地址是什么？

您可以尝试以下跨域进行测试：

```
<?xml version="1.0"?> 
<!DOCTYPE cross-domain-policy SYSTEM “/xml/dtds/cross-domain-policy.dtd”&gt;
<cross-domain-policy> 
<site-control permitted-cross-domain-policies="all"/> 
<allow-access-from domain="*" to-ports="*" secure="false"/> 
<allow-http-request-headers-from domain="*" headers="*" secure="false"/> 
</cross-domain-policy> 
```

此文件不适用于生产，因为这意味着完全没有限制

`Security.loadPolicyFile(url)`必要时，您可以使用从服务器上的备用位置加载 crossdomain.xml 文件。

# jquery - 向 Form.SerializeArray() 添加一个项目

> ID：11035438
> 
> 赞同：1
> 
> 时间：2012-06-14T14:36:59.707
> 
> 标签：jquery, asp.net-mvc, visual-studio

我使用 jquery 获得如下表单输入元素以进行进一步处理。

```
var ctrls = $('#frmUserMst').serializeArray(); 
```

有时我需要在这个 ctrl 数组中添加一些额外的信息。我该怎么做

它不支持`push()`或`add()`方法。

这是 VS2008 MVC2 项目中的要求。

**更多信息：** 由于`serializeArray()`输出中未填充禁用的控件，我需要手动添加它们。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T14:47:00.697

`.serializeArray`输出一个对象数组。每个对象都有两个键：`name`和`value`。`name`表示输入名称，`value`表示输入值。因此，您可以通过将另一个对象添加到与其他对象匹配的数组中来将另一个项添加到数组中。

```
var ctrls = $("#frmUserMst").serializeArray();
ctrls.push({
    "name": "myinputname",
    "value": "myinputvalue"
}); 
```

输入不必存在，您就可以向该数组添加值。

# c++ - 如何将float转换为int保留位值

> ID：11035442
> 
> 赞同：4
> 
> 时间：2012-06-14T14:37:15.087
> 
> 标签：c++, hlsl, bits

我有一个 float4 进入计算着色器，其中 3 个浮点数确实是浮点数，但第四个是 2 个 uint 一起移位，我如何通过保留位序列而不是数值来将浮点数转换为 uint？

在 C++ 方面，我通过创建一个 uint 指针来解决它，用所需的数字填充它，然后将指针作为浮点指针传递。然而，在与 c/c++ 类似的 hlsl 中，没有指针，所以我卡在这里：|

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T16:07:25.467

在 HLSL 中，您应该能够执行以下操作（假设您所追求的值在 f4.w 中）

```
uint ui = asuint( f4.w );
uint ui1 = ui & 0xffff;
uint ui2 = ui >> 16; 
```

基本上它看起来像[asuint 内在](http://msdn.microsoft.com/en-us/library/windows/desktop/bb509573%28v=vs.85%29.aspx)是你的朋友:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T14:50:46.713

你可以使用工会。

```
float f;  // you float value is here

union X  
{  
    float f;  
    short int a[2];  
} x;  
x.f = f;

int i1 = x.a[0];  // these are your ints  
int i2 = x.a[1]; 
```

# ruby - 如何将 ruby 类视为方法？

> ID：11035447
> 
> 赞同：3
> 
> 时间：2012-06-14T14:37:26.217
> 
> 标签：ruby

我见过 Ruby 代码中的类称为类似方法：

```
FactoryGirl(:factory_name) # => returns a factory instance 
```

你怎么写那个“方法”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T15:05:00.017

您需要做的就是创建一个与类同名的函数，并将其参数转发给类的`new`方法。例如：

```
class Foo
  def initialize(x)
    @arg=x
  end

  def to_s
    @arg.to_s
  end
end

def Foo(x)
  Foo.new(x)
end

a = Foo.new(7)
a.class
=> Foo
puts a
=> 7
b = Foo(7)
b.class
=> Foo
puts b
=> 7 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T15:12:18.960

为了完整起见，它在底部[定义：`lib/factory_girl/syntax/vintage.rb`](https://github.com/thoughtbot/factory_girl/blob/master/lib/factory_girl/syntax/vintage.rb)

```
module FactoryGirl
  module Syntax
    module Vintage
      # [other stuff elided]

      # Shortcut for Factory.create.
      #
      # Example:
      #   Factory(:user, name: 'Joe')
      def Factory(name, attrs = {})
        ActiveSupport::Deprecation.warn 'Factory(:name) is deprecated; use FactoryGirl.create(:name) instead.', caller
        FactoryGirl.create(name, attrs)
      end
    end
  end
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T14:49:51.587

您可以将此工厂函数添加到对象类：

```
 class Object
    def FactoryGirl(symbol)
      ...
    end
  end 
```

# c++ - 未找到 lib-xerces

> ID：11035448
> 
> 赞同：0
> 
> 时间：2012-06-14T14:37:32.893
> 
> 标签：c++, xml, g++, xerces

我正在使用 xerces(http://xerces.apache.org) lib 解析 C++ 中的 XML 文件，所以我下载了源代码，运行了 ./configure、make、make install，所以当我执行 g++ -o parser parser.cpp 并执行 ./parser，我得到：./parser：加载共享库时出错：libxerces-c-3.1.so：无法打开共享对象文件。没有这样的文件或目录。

当我搜索 /usr/lib 或 /lib 时，我找不到 libxerces-c-3.1.so 的位置，也找不到 libxerces-c-3.1.so 的位置。有人知道我该如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T16:54:09.760

您是否尝试运行 ldconfig 命令？ [ldconfig 示例](http://linux.101hacks.com/unix/ldconfig/) 我唯一能想到的是符号链接的一些问题，如果它已成功交叉链接。

相关问题：[https ://stackoverflow.com/questions/480764/linux-error-while-loading-shared-libraries-cannot-open-shared-object-file-no-s](https://stackoverflow.com/questions/480764/linux-error-while-loading-shared-libraries-cannot-open-shared-object-file-no-s)

# tsql - 将 EXEC 的结果处理到 OUTER APPLY

> ID：11035453
> 
> 赞同：2
> 
> 时间：2012-06-14T14:37:53.627
> 
> 标签：tsql, join, insert, exec, apply

我有以下 TSQL，我试图在其中有意义地提供数据库中哪些表占用最多空间的详细信息。就其本身而言，我可以使用类似的东西；

```
INSERT INTO #Data
   EXEC sp_spaceused N'tableNameHere' 
```

这工作文件。但是，将其扩展为返回所有表的信息是有问题的。编码;

```
CREATE TABLE #Data
(
    tableName varchar(100),
    numberofRows varchar(100),
    reservedSize varchar(50),
    dataSize varchar(50),
    indexSize varchar(50),
    unusedSize varchar(50)
)
SELECT so.name, sp.*
    FROM dbo.sysobjects so
    OUTER APPLY (INSERT INTO #Data 
                    OUTPUT inserted.tableName, 
                           inserted.numberofRows,
                           inserted.reservedSize,
                           inserted.dataSize,
                           inserted.indexSize,
                           inserted.unusedSize
                    EXEC sp_spaceused name
                ) sp
    WHERE OBJECTPROPERTY(so.id, N'IsUserTable') = 1
    ORDER BY sp.dataSize DESC, sp.indexSize DESC

    DROP TABLE #Data 
```

但这会导致以下错误；

```
Msg 120, Level 15, State 1, Line 19
The select list for the INSERT statement contains fewer items than the insert list. The number of SELECT values must match the number of INSERT columns. 
```

我已经两次和三次检查插入列表是否与结果集匹配，即使按名称，但我仍然得到相同的错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T18:41:33.750

我会说这可能是一个误导性的错误信息。我从来没有想过使用 OUTPUT 做 INSERT...EXEC 作为子查询，使用结果并将它们用于以后。不幸的是，当我尝试这个时，稍作修改，例如：

```
CREATE TABLE #Data
(
    tableName varchar(100),
    numberofRows varchar(100),
    reservedSize varchar(50),
    dataSize varchar(50),
    indexSize varchar(50),
    unusedSize varchar(50)
)

INSERT #Data
OUTPUT inserted.tableName, 
       inserted.numberofRows,
       inserted.reservedSize,
       inserted.dataSize,
       inserted.indexSize,
       inserted.unusedSize
exec sp_spaceused N'tblLeave'

DROP TABLE #Data 
```

我收到了这个错误：

`Msg 483, Level 16, State 2, Line 20 The OUTPUT clause cannot be used in an INSERT...EXEC statement.`

我有一种感觉，这就是为什么这种语法不适合你的部分原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T18:59:57.440

我建议不要使用 OUTER APPLY：

```
CREATE TABLE #Data
(
    tableName varchar(100),
    numberofRows varchar(100),
    reservedSize varchar(50),
    dataSize varchar(50),
    indexSize varchar(50),
    unusedSize varchar(50)
)

INSERT #Data
EXEC sp_msforeachtable 'sp_spaceused ''?''' 
```

另一种选择是查看源代码`sp_spaceused`并编写自己的查询，该查询与表列表连接，而不是一次处理一个表。

# asp.net - 将文本文件插入数据库

> ID：11035457
> 
> 赞同：0
> 
> 时间：2012-06-14T14:38:11.060
> 
> 标签：asp.net, sql, visual-studio-2010

我有带有 sql express 的 Visual Studio 2010。我正在尝试创建一个将显示来自数据库的文件的 asp 网站，并且需要将文本文件或 pdf 插入数据库表中，这可以使用可视界面完成吗，我发现的所有指令都只使用 sql 插入命令？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T21:06:23.347

不，你不能这样做。基本的 UI 界面意味着你可以输入它，你不能输入一个字节数组。

所以这意味着代码，这并不难，但我建议您考虑将 url / 文件名存储在表中，然后将文件放在文件系统上，而不是作为表中的 blob。

数据库 blob 中的文件确实对本地部署有一些好处，因为您不必担心某些 muppet 会使它们无法访问。服务器端虽然这远没有那么担心。只要你备份数据库和文件系统，并提出一个合理的目录和文件命名结构，它的成本要比用大量你不能在查询中使用的东西来膨胀数据库要少得多，更不用说它往往使卷（mdb）文件变得一团糟。

哦，一直有传言说 MS 也将丢弃超过 8000 字节的 blob。

# javascript - 弹出窗口中的 Servlet 响应

> ID：11035460
> 
> 赞同：0
> 
> 时间：2012-06-14T14:38:17.447
> 
> 标签：javascript, html, jsp, popup

我有一个 JSP 页面，它使用 JS 打开一个弹出窗口。弹出窗口打开以下 JSP 页面。

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
    <%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<link href="/ArchiveSearch/resources/css/messageDetail.css" rel="stylesheet" type="text/css">

<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Message detail</title>
</head>
<body>
    <div class="wrapper">
            <h1>Message Details</h1>
            <div class="messageMeta1">
                    <div><span class="label">Sender:</span> <c:out value="${messageid}" /></div>
                    <div><span class="label">Receiver:</span></div>
                    <div><span class="label">Subject:</span></div>
                    <div><span class="label">Attachments:</span></div>
            </div>
            <div class="messageMeta2">
                    <div><span class="label">Case ID:</span></div>
                    <div><span class="label">Date:</span>${messagedate}</div>
            </div>
            <div class="messageContent">
            </div>
    </div>
</body>
</html> 
```

我的问题是，当 JS 打开网页时，从 servlet 传递的值不会显示在 JSP 页面上。但是当我在 Firebug 下检查 HTML 响应时，HTML 会正确呈现。我的问题是如何正确获取弹出窗口中的 Servlet？

JS：

```
$('#searchResults tbody tr').live('dblclick', function () {
    var aData = table.fnGetData( this,0 );
    $.ajax({
        url: "MessageDetail",
        type: "POST",
        data: "messageid=" + aData,
        succes: function(data) {
        }
    });
    window.open(myjsppage.jsp, "_blank", "width=600,height=600");
}); 
```

弹出窗口已经知道之前提出的请求，我该如何解决这个问题？

**编辑** 我尝试过这样的事情：

```
 succes: function(data) {
            gData = data;
        }
    });
    var popup = window.open("messageDetail.jsp", "_blank", "width=600,height=600");
    popup.document.write(gData);
}); 
```

我认为我走在正确的道路上，但我还没有完全做到。Undefined 现在在弹出窗口中打印，这意味着变量没有被填充。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-25T14:50:14.443

这不是一个好方法，但如果你想让你的代码工作，你必须像这样使用它：

```
success: function(data) {
            gData = data;
            var popup = window.open("messageDetail.jsp", "_blank", "width=600,height=600");
            popup.document.write(gData);
        }
    });

}); 
```

将您的开放代码放入成功方法中。

你也用一个's'写了**成功**，请修复它。

# java - 多维数组调试outofboundsexception

> ID：11035462
> 
> 赞同：0
> 
> 时间：2012-06-14T14:38:30.967
> 
> 标签：java, arrays, multidimensional-array

我正在尝试制作两个 3 x 3 数组（具有预定索引），它们将自行添加并显示输出，但我不断收到 OOBE（越界异常）错误

```
// The "Matrixsum" class.
import java.awt.*;
import hsa.Console;

public class Matrixsum
{
    static Console c;           // The output console

    public static void main (String[] args)
    {
        c = new Console ();

        int array[] [] = {{4, 5, 3}, {6, 8, 3}, {1, 2, 3}};
        int array1[] [] = {{5, 4, 3}, {5, 6, 3}{1, 2, 3}};

        c.println ("Number of Row= " + array.length);
        c.println ("Number of Column= " + array [1].length);

        int l = array.length;

        c.println ("\t\t\nMatrix 1 :\n ");
        for (int row = 0 ; row < l ; row++)
        {
            for (int col = 0 ; col <= l ; col++)
            {
                c.print (" " + array [row] [col]);
            }
            c.println ();
        }
        int L1 = array1.length;
        c.println ("Matrix 2 : ");
        for (int row = 0 ; row < L1 ; row++)
        {
            for (int col = 0 ; col <= L1 ; col++)
            {
                c.print (" " + array1 [row] [col]);
            }
            c.println ();
        }
        c.println ("Addition of both matrix : ");
        for (int row = 0 ; row < L1 ; row++)
        {
            for (int col = 0 ; col <= L1 ; col++)
            {
                c.print (" " + (array [row] [col] + array1 [row] [col]));
            }
            c.println ();
        }

        // Place your program here.  'c' is the output console
    } // main method
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T14:43:52.493

您正在做`col <= L1` 或`col <= l`需要更改的 任何地方`col < L1` 和`col < l`

数组的最大索引总是长度减一，因为数组索引从零开始。

# debugging - Cmake 忽略 CMAKE_BUILD_TYPE=Debug

> ID：11035464
> 
> 赞同：8
> 
> 时间：2012-06-14T14:38:36.317
> 
> 标签：debugging, cmake, version, release

我正在尝试包含调试/发布依赖的编译器标志，例如：

```
set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -std=gnu++0x -Wall -DUSE_BOOST")
set(CMAKE_CXX_FLAGS_DEBUG "${CMAKE_CXX_FLAGS_DEBUG} -Wall")
set(CMAKE_CSS_FLAGS_RELEASE "${CMAKE_CXX_FLAGS_RELEASE} -Wall -O3") 
```

我使用以下命令创建我的构建文件夹：

```
cmake -DCMAKE_BUILD_TYPE=Release -D UseFortran=True -D CMAKE_CXX_COMPILER=g++-4.6 ~/repos/cliques/cliques 
```

但是，对于 CMAKE 版本 2.8.7，CMAKE_BUILD_TYPE 似乎被忽略了。它似乎与 2.8.4 版（在另一台机器上）完美配合，所以这种方法是否已被弃用或者这里还有其他问题？

曾娜

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-07T01:25:49.987

你有一个错字。你的代码说`CMAKE_CSS_FLAGS_RELEASE`。注意`CSS`，应该是`CXX`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-14T15:45:26.273

`-D`问题是变量和变量之间必须有一个空格。也就是说，它应该是：

```
cmake -D CMAKE_BUILD_TYPE=Release -D UseFortran=True -D CMAKE_CXX_COMPILER=g++-4.6 ~/repos/cliques/cliques 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-16T18:26:02.940

我认为他们在以前的版本中制作了一个 Typo In CMAKE_BUILD_TYPE。我们遇到了这个问题，这里有一条行得通的线。

```
cmake -D CMAKE_BUILD_TYPE:STRING=Debug ../src 
```

您可以使用以下方法检查一切是否正常：

```
cmake -L ../src 
```

使用此命令可以为您提供命名变量 CMAKE_BUILD_TYPE 的正确方法。

祝你好运。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T01:50:03.623

`-DCMAKE_BUILD_TYPE=Debug`为什么在创建构建文件夹时不使用, ？Cmake 构建 Release 类型项目或 Debug 类型项目，不能同时使用。

# android - Activity 已销毁异常

> ID：11035465
> 
> 赞同：1
> 
> 时间：2012-06-14T14:38:43.127
> 
> 标签：android, android-layout, android-fragments, android-activity

我尝试从我的 FragmentActivity 开始一个新的 Fragment，但每次我尝试它时，它都会出现一个错误，告诉我：Activity 已被破坏。

我创建的 tabController 的源代码：

```
package com.crosscommunications.kvodeventer;

import java.io.File;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentTransaction;
import android.view.View;

public class TabControllerMeldingen extends FragmentActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.tabcontroller);

        final File f = new File("/data/data/com.crosscommunications.kvodeventer/files/data.txt");

        if (f.exists()) {
            System.out.println("File existed");
            addFragment(new KVOCards(), false, FragmentTransaction.TRANSIT_NONE);

        } else {
            System.out.println("File not found!");
            addFragment(new KVOMeldingen(), false, FragmentTransaction.TRANSIT_NONE);
        }

    }

    public void addFragment(Fragment fragment, boolean addToBackStack, int transition) {
        FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
        ft.replace(R.id.simple_fragment, fragment);
        ft.setTransition(transition);
        if (addToBackStack)
            ft.addToBackStack(null);
        ft.commit();
    }

    public void finishFragmentOrActivity(View v) {
        FragmentManager manager = getSupportFragmentManager();
        if (manager.getBackStackEntryCount() > 0)
            getSupportFragmentManager().popBackStack();
        else
            finish();
    }

    public void launchNewFragment(View v) {
        addFragment(new KVOOver(), true, FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
    }
} 
```

在大多数情况下，此代码会打开**KVOMeldingen类。**所以 KVOMeldingen 的来源是：

```
package com.crosscommunications.kvodeventer;

import java.io.FileOutputStream;
import java.io.IOException;
import java.io.OutputStreamWriter;

import org.json.JSONObject;

import android.app.AlertDialog;
import android.app.ProgressDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.os.AsyncTask;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentTransaction;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;

public class KVOMeldingen extends Fragment {

    static String Username;
    static String Password;
    static String LoginResult;
    static String LoginOk = "vet";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View fragmentView = inflater.inflate(R.layout.kvomeldingen, container, false);
        final EditText etUsername = (EditText) fragmentView.findViewById(R.id.etUsername);
        final EditText etPassword = (EditText) fragmentView.findViewById(R.id.etPassword);
        Button bLogin = (Button) fragmentView.findViewById(R.id.bLogin);
        Button bCreateAccount = (Button) fragmentView.findViewById(R.id.bCreateAccount);
        Button bResetPassword = (Button) fragmentView.findViewById(R.id.bResetPassword);

        bLogin.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                if (etUsername.length() <= 0) {
                    etUsername.setError("Veld mag niet leeg zijn");
                } else if (etPassword.length() <= 0) {
                    etPassword.setError("Veld mag niet leeg zijn");
                } else {
                    Username = etUsername.getText().toString();
                    Password = etPassword.getText().toString();
                }
                LoginTask NDLT = new LoginTask();
                NDLT.execute();
            }
        });

        bCreateAccount.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                if (etUsername.length() <= 0) {
                    etUsername.setError("Veld mag niet leeg zijn");
                } else if (etPassword.length() <= 0) {
                    etPassword.setError("Veld mag niet leeg zijn");
                } else {
                    Username = etUsername.getText().toString();
                    Password = etPassword.getText().toString();
                }
                RegisterTask RegTask = new RegisterTask();
                RegTask.execute();
            }

        });

        bResetPassword.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                if (etUsername.length() <= 0) {
                    etUsername.setError("Veld mag niet leeg zijn");
                } else if (etPassword.length() <= 0) {
                    etPassword.setError("Veld mag niet leeg zijn");
                } else {
                    Username = etUsername.getText().toString();
                    Password = etPassword.getText().toString();
                }
                ForgotTask forgTask = new ForgotTask();
                forgTask.execute();

            }

        });

        return fragmentView;
    }

    class LoginTask extends AsyncTask<Void, Void, JSONObject> {

        ProgressDialog waitingDialog;

        @Override
        protected void onPreExecute() {
            waitingDialog = new ProgressDialog(getActivity());
            waitingDialog.setMessage("Laden...");
            waitingDialog.show();
            super.onPreExecute();
        }

        @Override
        protected JSONObject doInBackground(Void... params) {

            JSONObject json = JsonFunctions
                    .getJsonLoginResult("http://api.crossalertdeventer.nl/login.json");
            return json;

        }

        @Override
        protected void onPostExecute(JSONObject json) {
            super.onPostExecute(json);
            if (waitingDialog.isShowing()) {
                waitingDialog.dismiss();
            }
            try {

                LoginResult = json.getString("login");

                Log.d("LoginResult", LoginResult);

                if (LoginResult.equals("success")) {

                    WriteSettings(getActivity(), Username, Password,
                            "data.txt");

                    TabControllerMeldingen newFragment = new TabControllerMeldingen();
                    newFragment.addFragment(new KVOCards(), false, FragmentTransaction.TRANSIT_NONE);

                } else if (LoginResult.equals("failed")) {
                    final AlertDialog alertDialog = new AlertDialog.Builder(
                            getActivity()).create();
                    alertDialog.setTitle("Fout");
                    alertDialog
                            .setMessage("Gebruikersnaam of wachtwoord incorrect");
                    alertDialog.setButton("Ok",
                            new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog,
                                        int which) {
                                    alertDialog.dismiss();
                                }

                            });
                    alertDialog.show();
                }

            } catch (Exception e) {
                Log.e("KVOMeldingen", "error" + e.getMessage());

            }

        }
} 
```

这个来源实际上比这个大（我把它切成了两半）。

但是您在 AsyncTask 中看到，我尝试从 TabControllerMeldingen 类中调用该方法来添加新片段。调用此方法时，应用程序崩溃

我在 stackoverflow 上的另一个线程上读到它必须使用 Super Oncreate 方法做一些事情，但我无法弄清楚到底出了什么问题。

任何人都可以帮我解决这个问题..？理解这一点对我来说真的很重要，因为我相信片段是这些天基本上要走的路。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T15:03:05.853

你不能这样做：

```
 TabControllerMeldingen newFragment = new TabControllerMeldingen(); 
```

所有活动都必须通过框架创建。但是，您已经在其中一个（您使用该`getActivity()`方法），因此在这种情况下您需要执行相同的操作。获取活动并在其上添加片段。

# persistence - GM_setValue 未定义

> ID：11035472
> 
> 赞同：1
> 
> 时间：2012-06-14T14:39:01.963
> 
> 标签：persistence, greasemonkey, scriptish

我正在尝试获取一个相当简单的脚本，该脚本可以保留一个值并在 GreaseMonkey 的继任者中检索它：Scriptish。

浏览器：Firefox 9.0
Scriptish：0.1.7
在 Windows 7 Ultimate 64 位上

```
// ==UserScript==
// @id             testSerialization
// @name           Test Serialization
// @version        1.0
// @namespace      com.mobilvox.com
// @author         
// @description    
// @include        http://www.google.com/
// @run-at         document-end
// ==/UserScript==

GM_setValue("isCurrent", true);
GM_log("Is this script current? " + GM_getValue("isCurrent", false)); 
```

当我运行它时，我得到：

```
[10:29:59.074] GM_setValue is not defined
@Scratchpad:29
 @ Scratchpad:29 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-03T01:27:40.233

我有一个完整的带有 jQ​​uery 和 GM_ 代码的工作代码。试试这个：

```
// ==UserScript==
// @name           GM_ debug script
// @description    checking GM_setValue and GM_getValue with jQuery
// @namespace      eaposztrof
// @include        *
// @require     http://code.jquery.com/jquery-1.9.1.js
// @grant       GM_getValue // [grants][1]
// @grant       GM_setValue
// ==/UserScript==

function GM_getValueUTF8(key) { // UTF8 safe
    var value = GM_getValue(key);
    return (value && value.length) ? decodeURI(value) : '';
}

function GM_setValueUTF8(key, value) {
    GM_setValue(key, encodeURI(value));
}

    GM_setValueUTF8('asd','GM_setValue, GM_getValue working! press [Alt+X] to check with jQuery');
    alert(GM_getValueUTF8('asd'));

(function (){
    this.$ = this.jQuery = jQuery.noConflict(true);

    $(document).ready(function () {

        $ (document).keydown (function (e) {
            switch (e.keyCode) {
                case 88:    // "x"
                    if (e.altKey) {
                        setTimeout(function() { // [workaround][2]
                            GM_setValueUTF8('asd','GM_setValue, GM_getValue working inside jQuery');
                            alert(GM_getValueUTF8('asd'));
                        }, 0);
                    }
            }
        });
    });
}
//
) (); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T20:52:18.620

这看起来像是一个可能的错误，请参阅[“GM_setValue not working”](https://scriptish.lighthouseapp.com/projects/83146/tickets/543-gm_setvalue-not-working)等相关错误。

可能的行动：

1.  Firefox 9 即将过时。升级到 FF 12 或 FF 13 并查看问题是否仍然存在。
2.  [为 Scriptish 提交错误](https://scriptish.lighthouseapp.com/projects/83146-firefox-extension/tickets)报告。

# c# - 为什么传递新创建的 DataRow 时 DataTable.Rows.ImportRow 不起作用？

> ID：11035479
> 
> 赞同：2
> 
> 时间：2012-06-14T14:39:31.333
> 
> 标签：c#, datatable, datarow

我需要添加`newRow`，`MyHandler`它应该将该行添加到从传递给 MyHandler 的“方案”内部构建的表中。问题是当我使用`dt.ImportRow(row);`它时不会添加任何行。如果我添加`newRow`到`t`表格然后这样`handler.Add(t.row[t.Rows.Count - 1]);`做它可以工作，但我不想添加到`t`表格中。这`t`就是我可以创建新行的原因。

为什么`dt.ImportRow(row);`不起作用？如何解决？

```
{
   var t = new DataTable();
   t.Columns.Add(new DataColumn("Col1", typeof(string)));
   t.Columns.Add(new DataColumn("Col2", typeof(byte)));
   t.Columns.Add(new DataColumn("Col3", typeof(byte)));
   t.Rows.Add("a", 1, 1);
   t.Rows.Add("b", 2, 2);

   // MyHandler build internal table from the scheme
   var handler = new MyHandler(t.Clone());

   var newRow = t.NewRow();
   row["Col1"] = "c";
   row["Col2"] = 3;
   row["Col3"] = 3;

   handler.Add(row);
}

public class MyHandler
{
    DataTable dt;
    public class MyHandler(DataTable scheme)
    {
        dt = scheme;
    }
    public void Add(DataRow row)
    {
       dt.ImportRow(row);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T14:43:29.187

您应该只使用`ImportRow`从另一个 DataTable 添加行。根据[MSDN](http://msdn.microsoft.com/en-us/library/system.data.datatable.newrow.aspx)，使用 创建的行`DataTable.NewRow`应该添加`DataTable.Rows.Add`.

# c++ - Cocos2d-x 动画错误

> ID：11035481
> 
> 赞同：2
> 
> 时间：2012-06-14T14:39:37.847
> 
> 标签：c++, animation, cocos2d-x

我正在尝试将动画从转换`cocos2d`为`cocos2d-x`但无济于事。我没有收到任何明显的错误消息，只是它出现在倒数第二行。

```
CCSpriteFrameCache::sharedSpriteFrameCache()->addSpriteFramesWithFile("swim_male.plist");
CCSpriteBatchNode *sceneSpriteBatchNode = CCSpriteBatchNode::batchNodeWithFile("swim_male.png");

this->addChild(sceneSpriteBatchNode);

CCAnimation* animation = CCAnimation::animation();
animation->setDelayPerUnit(.05f);    
char* fn = new char;

for (int i = 1; i <= 10; i++) {
    sprintf(fn, "character_Male00%02d.png", i);
    CCSpriteFrame* pFrame = CCSpriteFrameCache::sharedSpriteFrameCache()->spriteFrameByName(fn);
    animation->addSpriteFrame(pFrame);
}

CCSprite *spriteAnim = CCSprite::spriteWithSpriteFrameName("character_Male0001.png");
spriteAnim->setPosition( ccp(100, 200) );
CCAnimate *animate = CCAnimate::actionWithAnimation(animation);
CCAction *act = CCRepeatForever::actionWithAction(animate);
spriteAnim->runAction(act);

sceneSpriteBatchNode->addChild(spriteAnim, 2); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T15:01:27.133

您正在将单个字符分配给 sprintf 。然后 sprintf 将字符串写入 fn 指向的内存之外的内存，因为它比 1 个字符长。

代替

```
char* fn = new char;

for (int i = 1; i <= 10; i++) {
    sprintf(fn, "character_Male00%02d.png", i);
    CCSpriteFrame* pFrame = CCSpriteFrameCache::sharedSpriteFrameCache()->spriteFrameByName(fn);
    animation->addSpriteFrame(pFrame);
} 
```

做这个

```
char fn[128];

for (int i = 1; i <= 10; i++) {
    sprintf(fn, "character_Male00%02d.png", i);
    CCSpriteFrame* pFrame = CCSpriteFrameCache::sharedSpriteFrameCache()->spriteFrameByName(fn);
    animation->addSpriteFrame(pFrame);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-29T12:07:10.007

使用 C++，

```
char* fn = new char --> bad;
char* fn = new char[128];

...

delete []fn; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-23T11:49:38.793

你可以这样

```
CCSpriteBatchNode* spritebatch = CCSpriteBatchNode::create("horse.png");
CCSpriteFrameCache* cache = CCSpriteFrameCache::sharedSpriteFrameCache();
cache->addSpriteFramesWithFile("horse.plist");

hero = CCSprite::createWithSpriteFrameName("horse_1.png");
addChild(spritebatch);
spritebatch->addChild(hero);

CCArray* animFrames = CCArray::createWithCapacity(16);
char str[100] = {0};
for(int i = 1; i < 16; i++)
{
    sprintf(str, "horse_%i.png", i);
    CCSpriteFrame* frame = cache->spriteFrameByName( str );
    animFrames->addObject(frame);
}
CCAnimation* animation = CCAnimation::createWithSpriteFrames(animFrames, .1f);
animation->setRestoreOriginalFrame(true);
hero->runAction( CCRepeatForever::create( CCAnimate::create(animation) ) ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T06:56:14.300

char* fn = 新字符；没有指定分配给 fn 的大小。

你应该这样写

```
 for (int i = 1; i <= 10; i++)
  {
     char* fn = new char[strlen("character_Male0002d.png")+sizeof(i)+1];
     sprintf(fn, "character_Male00%02d.png", i);
     CCSpriteFrame* pFrame = CCSpriteFrameCache::sharedSpriteFrameCache()->spriteFrameByName(fn);
        animation->addSpriteFrame(pFrame);
  delete fn;
  fn = NULL ;
  } 
```

# c# - 如何在 C# 中使用 MODI (Microsoft Office Document Imaging) 进行连续 OCR

> ID：11035483
> 
> 赞同：5
> 
> 时间：2012-06-14T14:39:45.523
> 
> 标签：c#, error-handling, ms-office, ocr, modi

我将文档扫描为文件夹中的 .jpg 图片，我想在 C# 中为该文件夹中的每个文档连续执行 OCR。到目前为止，我已经这样做了：

```
public string CheckFilesAndDoOCR(string directoryPath)
{
    directoryPath = Environment.SpecialFolder.MyPictures + "\\OCRTempPictures\\";
    IEnumerator files = Directory.GetFiles(directoryPath).GetEnumerator();
    string TheTxt = "";

    while (files.MoveNext())
    {
        // FileInfo
        FileInfo nfo = new FileInfo(Convert.ToString(files.Current));

        // Get new file name
        string fileName = AlltoJPG(nfo);

        // FileInfo (New File)
        FileInfo foo = new FileInfo(fileName);

        // Check for JPG File Format
        if (foo.Extension == ".jpg" || foo.Extension == ".JPG")
        // or // ImageFormat.Jpeg.ToString()
        {
            try
            {
                // OCR Operations...
                MODI.Document md = new MODI.Document();
                md.Create(foo.FullName);
                md.OCR(MODI.MiLANGUAGES.miLANG_ENGLISH, false, false); // OCR();
                MODI.Image image = (MODI.Image)md.Images[0];
                TheTxt = image.Layout.Text;
                md.Close(false);

                // Create text file with the same Image file name
                FileStream createFile = new FileStream(foo.DirectoryName + "\\" + foo.Name.Replace(foo.Extension,string.Empty) + ".txt", FileMode.CreateNew);

                // Save the image text in the text file
                StreamWriter writeFile = new StreamWriter(createFile);
                writeFile.Write(TheTxt);
                writeFile.Close();
            }
            catch (Exception ex)
            {
                // Expected errors
                string LogPath = System.Environment.SpecialFolder.MyPictures + "\\OCRTempPictures\\OCRInfo.txt";
                Logger(LogPath, "| Exception: Source[" + ex.Source + "] Message[" + ex.Message + "] InnerException[" + ex.InnerException + "] StackTrace[" + ex.StackTrace + "] | ");
                // MessageBox.Show(ex.Message, "OCR Exception", MessageBoxButtons.OK, MessageBoxIcon.Information);
            }
        }
    }
    return TheTxt;
} 
```

但是 MODI 给出了`OCR running!`or`Cant reach file.File is in use.`错误..

**视情况而定：**

*   我怎样才能避免这些错误？

*   有没有办法停止 OCR 操作并耗尽所有正在使用的对象？

如果有人可以回答上述任何问题，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T15:06:38.877

这是完整的工作代码！感谢@Ramhound

下面的代码只是指定了一个充满图片的文件夹，然后对它们进行 OCR 扫描。

```
 /// <summary>
    /// Gets all images inside a Folder
    /// and triggers OCR on each..
    /// </summary>
    /// <param name="directoryPath"> Path to Folder </param>
    /// <returns> Text </returns>        
    public string CheckFileAndDoOCR(string directoryPath)
    {
        string TheTxt = "";
        IEnumerator files = Directory.GetFiles(directoryPath).GetEnumerator();

        while (files.MoveNext())
        {
            // FileInfo
            FileInfo foo = new FileInfo(Convert.ToString(files.Current));

            // Check for JPG File Format
            if (foo.Extension == ".jpg" || foo.Extension == ".JPG")
            // or // ImageFormat.Jpeg.ToString()
            {
                // Start OCR Procedure
                TheTxt = DoOCR(foo.FullName);
                // Create TXT file next to ImageFile
                string txtFileName = foo.DirectoryName + "\\" + foo.Name.Replace(foo.Extension,"") + ".txt";
                FileStream createFile = new FileStream(txtFileName, FileMode.OpenOrCreate);
                // Save the text in to TXT file
                StreamWriter writeFile = new StreamWriter(createFile);
                writeFile.Write(TheTxt);
                // Close
                writeFile.Close();
                createFile.Close();
            }

            // Delete used pictures (Optional)
            /*--------------------------------------------------------------------*/
            try 
            { foo.Delete(); }
            catch (Exception ex)
            { Logger(LogPath, "| Exception: Source[" + ex.Source + "] Message[" + ex.Message + 
                "] InnerException[" + ex.InnerException + "] StackTrace[" + ex.StackTrace + "] | "); }
            /*--------------------------------------------------------------------*/
        }
        return TheTxt;
    }
    // DoOCR
    // 
    /// <summary>
    /// Start an OCR scan on given ImageFile
    /// </summary>
    /// <param name="FullPath"> Path to ImageFile </param>
    /// <returns> Text </returns>
    public string DoOCR(string FullPath)
    {
        string txt;

        // OCR Operations...
        MODI.Document md = new MODI.Document(); // Create MODI.Document
        md.Create(FullPath); // Fill MODI.Document with my file
        // Showprogress of OCR
        md.OnOCRProgress += new MODI._IDocumentEvents_OnOCRProgressEventHandler(this.ShowProgress);
        // Begin OCR
        md.OCR(MODI.MiLANGUAGES.miLANG_ENGLISH, false, false); // OCR();
        // Image from file
        MODI.Image image = (MODI.Image)md.Images[0];
        txt = image.Layout.Text;
        // Optionally you can get only first word by using word.Text
        /// Words from Image :
        // MODI.Word word = image.Layout.Words[0];
        /// Text from first Word :
        // txt = word.Text;

        // Close OCR
        word = null;
        image = null;
        md.Close(false);
        md = null;

        // Finalize
        GC.Collect();
        GC.WaitForPendingFinalizers();

        // Return Text
        return txt;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-21T10:16:57.330

这是因为如果您只插入单页文件，Doc1.OCR() 会检查多页 tiff 文件，然后它会显示错误尝试使用多页 tiff 文件

# html - 尝试使用 CSS3 动画进行 div 移动，但不起作用

> ID：11035484
> 
> 赞同：3
> 
> 时间：2012-06-14T14:39:50.403
> 
> 标签：html, animation, css

```
.car {
    background: url('cartemplate orange 1.png');
    width: 444px;
    height: 150px;
}
    .carleft {
        -webkit-animation: moveLeft 3s;
        -webkit-animation-delay:2s;
        -webkit-animation-iteration-count: infinite;

        -moz-animation: moveLeft 3s;
        -moz-animation-iteration-count: infinite;

        -ms-animation: moveLeft 3s;
        -ms-animation-iteration-count: infinite;

        -o-animation: moveLeft 3s;
        -o-animation-iteration-count: infinite;

        animation: moveLeft 3s;
        animation-iteration-count: infinite;
    }

    @-webkit-keyframes moveLeft
    {
        0%   { right: -500px; }
        50%  { right: 700px; }
        100% { right: 2000px; }

    }

    @-moz-keyframes moveLeft
    {
        0%   { right: -500px; }
        50%  { right: 700px; }
        100% { right: 2000px; }

    }

    @-ms-keyframes moveLeft
    {
        0%   { right: -500px; }
        50%  { right: 700px; }
        100% { right: 2000px; }

    }

    @keyframes moveLeft
    {
        0%   { right: -500px; }
        50%  { right: 700px; }
        100% { right: 2000px; }

    }

    .carright {
        -webkit-animation: moveRight 3s;
        -webkit-animation-delay:2s;
        -webkit-animation-iteration-count: infinite;

        -moz-animation: moveRight 3s;
        -moz-animation-iteration-count: infinite;

        -ms-animation: moveRight 3s;
        -ms-animation-iteration-count: infinite;

        -o-animation: moveRight 3s;
        -o-animation-iteration-count: infinite;

        animation: moveRight 3s;
        animation-iteration-count: infinite;
    }

    @-webkit-keyframes moveRight
    {
        0%   { left: -500px; }
        50%  { left: 700px; }
        100% { left: 2000px; }

    }

    @-moz-keyframes moveRight
    {
        0%   { left: -500px; }
        50%  { left: 700px; }
        100% { left: 2000px; }

    }

    @-ms-keyframes moveRight
    {
        0%   { left: -500px; }
        50%  { left: 700px; }
        100% { left: 2000px; }

    }

    @keyframes moveRight
    {
        0%   { left: -500px; }
        50%  { left: 700px; }
        100% { left: 2000px; }

    }

    .wheel {
        width: 50px !important;
        height: 50px !important;
        position: relative;
    }

        .wheel1 {    
            width: 100%;
            height: 100%;
            background-color: #3D3D3D;
            border-radius: 50% / 50%;
            position: absolute;    
        }

        .wheel2 {
            width: 70%;
            height: 70%;
            background-color: #B8B8B8;
            margin: 10%;    
            border-radius: 50% / 50%;
            position: absolute;

            -webkit-animation: wheelActive 800ms;
            -webkit-animation-iteration-count: infinite;

            -moz-animation: wheelActive 800ms;
            -moz-animation-iteration-count: infinite;

            -ms-animation: wheelActive 800ms;
            -ms-animation-iteration-count: infinite;

            -o-animation: wheelActive 800ms;
            -o-animation-iteration-count: infinite;

            animation: wheelActive 800ms;
            animation-iteration-count: infinite;
        }

        @-webkit-keyframes wheelActive
        {
            0%   { margin: 15%; height: 70%; width: 70%; }
            50%  { margin: 5%; height: 90%; width: 90%; }
            100% { margin: 15%; height: 70%; width: 70%; }

        }

        @-moz-keyframes wheelActive
        {
            0%   { margin: 15%; height: 70%; width: 70%; }
            50%  { margin: 5%; height: 90%; width: 90%; }
            100% { margin: 15%; height: 70%; width: 70%; }

        }

        @-ms-keyframes wheelActive
        {
            0%   { margin: 15%; height: 70%; width: 70%; }
            50%  { margin: 5%; height: 90%; width: 90%; }
            100% { margin: 15%; height: 70%; width: 70%; }

        }

        @keyframes wheelActive
        {
            0%   { margin: 15%; height: 70%; width: 70%; }
            50%  { margin: 5%; height: 90%; width: 90%; }
            100% { margin: 15%; height: 70%; width: 70%; }

        }

    .wheelleft, .wheelright {
        position: absolute;
    }

    .carleft .wheelleft {
        top: 135px;
        left: 53px;
    }

    .carleft .wheelright {
        top: 135px;
        left: 348px;
    }

    .carright .wheelleft {
        top: 135px;
        left: 64px;
    }

    .carright .wheelright {
        top: 135px;
        left: 358px;
    } 
```

```
<div class="car carleft">
    <div class="wheel wheelleft">
        <div class="wheel1"></div>
        <div class="wheel2"></div>
    </div>

    <div class="wheel wheelright">
        <div class="wheel1"></div>
        <div class="wheel2"></div>
    </div>
</div> 
```

**jsFiddle：http:** [//jsfiddle.net/c6kBj/](http://jsfiddle.net/c6kBj/)

我正在尝试用 CSS3 制作一辆从左到右行驶的汽车，以及一些从右到左行驶的汽车，颜色不同，一切都花哨。但它不起作用。车轮工作正常，但汽车没有从左向右移动。为什么不？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T15:34:36.480

您缺少div - 没有它，`position: absolute;`因为所有元素都默认为;`.car``.right``position: static`

```
.car {
    background: url('cartemplate orange 1.png');
    width: 444px;
    height: 150px;
    position: absolute;
} 
```

[http://jsfiddle.net/c6kBj/1/](http://jsfiddle.net/c6kBj/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T16:08:19.193

您实际上应该使用 translate(0,0) 来移动东西（比动画位置值表现更好）

# c# - 更改放置在 GridTemplateColumn 中的图像的 ImageURL

> ID：11035490
> 
> 赞同：0
> 
> 时间：2012-06-14T14:40:06.300
> 
> 标签：c#, asp.net, image, gridview, telerik

我正在尝试在 gridview 中显示图像，但是，gridview 中显示的列都是动态显示的（未生成）。

我已经看过这篇文章，但在我的情况下似乎不起作用： [如何访问放置在 GridView 中的 ItemTemplate 内的图像控件的 ImageUrl 属性](https://stackoverflow.com/questions/7371687/how-to-access-imageurl-property-of-the-image-control-placed-inside-a-itemtemplat)

我拥有的是一个带有这些列的gridview：

```
 <Columns> 
        <telerik:GridBoundColumn  HeaderText="Custom1"   HeaderStyle-VerticalAlign="Bottom" DataField="Custom1" SortExpression="Custom1"/>
        <telerik:GridDateTimeColumn HeaderText="Custom2"   HeaderStyle-VerticalAlign="Bottom" DataField="Custom2" SortExpression="Custom2"/>
        <telerik:GridCheckBoxColumn  HeaderText="Custom3"   HeaderStyle-VerticalAlign="Bottom" DataField="Custom3" SortExpression="Custom3"/>
        <telerik:GridTemplateColumn HeaderText="Custom4" HeaderStyle-VerticalAlign="Bottom" DataField="Custom4"><itemtemplate><asp:Image runat="server" ID="Custom4_pic"/></itemtemplate></telerik:GridTemplateColumn> 
```

这四列重复更改 Custom# 值，直到达到 48。

然后我继续隐藏所有不必要的列，只显示我需要的列。（这是因为用户可以定义列的显示顺序，并且硬编码是我可以快速实现它的最简单方法）。

一切都正确显示，但是，我似乎无法弄清楚如何为图像控件设置 ImageURL。对于其余的列，这就是我的做法：

```
dt = new DataTable();
// Do some stuff...
if (aProperty.WebControlType == EntityPropertyWebControlType.CheckboxYN || aProperty.WebControlType == EntityPropertyWebControlType.OptionYN)
{
    dt.Columns.Add("Custom" + ((i * 4) - 1).ToString(), typeof(bool));
    break;
}
else if (aProperty.WebControlType == EntityPropertyWebControlType.Date)
{
    dt.Columns.Add("Custom" + ((i * 4) - 2).ToString(), typeof(DateTime));
    break;
}
else if (aProperty.WebControlType == EntityPropertyWebControlType.Image)
{
    // Not sure what to do here...
    break;
}
else
{
    dt.Columns.Add("Custom" + ((i*4) - 3).ToString(), typeof(string));
    break;
}

// Do more stuff...

// Based on type I will set the values to equal something.. so for example
dr["Custom" + aProperty.LabelColumnNo.ToString()] = "Text" or bool or DateTime
// However I'm not sure what to do for Image...

// and then I return the datatable to be binded to the gridview 
```

任何提示都会很棒，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T18:03:29.637

我已经解决了这个问题。

我用 GridImageColumns 替换了模板列，然后在我的代码隐藏中，我将 Columns 添加到我的字符串类型的数据表中，然后我使用了图像处理程序，并将字符串设置为图像处理程序页面。

# task - 最终 ContinueWith 完成后如何从 ConcurrentDictionary 中删除项目

> ID：11035494
> 
> 赞同：0
> 
> 时间：2012-06-14T14:40:11.003
> 
> 标签：task, concurrentdictionary

首先，有 1500 多个“声誉”的人可以为“ContinueWith”创建一个标签（并用它标记这个问题）吗？谢谢！

很抱歉这篇文章的长度，但我不想浪费任何人试图帮助我的时间，因为我遗漏了相关细节。也就是说，它仍然可能发生。:)

现在是细节。我正在开发一个订阅几个 ActiveMQ 队列主题的服务。其中两个主题有些相关。一种是“公司更新”，一种是“产品更新”。两者的“ID”都是 CompanyID。**公司主题**包括**产品主题**中的**数据**。必需，因为其他订阅者需要产品**数据**但不想/不需要订阅产品**主题**。由于我的服务是多线程的（超出我们判断的要求），当消息到达时，我添加了一个**任务**以使用 AddOrUpdate处理**ConcurrentDictionary**中的每一个，其中更新参数只是一个**ContinueWith**************（见下文）。这样做是为了防止可能发生的同时更新，因为这些主题和订阅者是“持久的”，因此如果我的侦听器服务离线（无论出于何种原因），我们可能会以同一 CompanyID 的多条消息（公司和/或产品）结束。************

 ******现在，我的实际问题（终于！）在任务（无论是一个任务，还是 ConcurrentWith 任务链中的**最后**一个）完成后，我想将它从 ConcurrentDictionary 中删除（显然）。如何？我已经想到并从同事那里得到了一些想法，但我并不真正喜欢其中任何一个。我不会列出这些想法，因为您的答案可能是我有但不喜欢的想法之一，但它最终可能是最好的。

与我的描述不同，我试图压缩代码片段以防止您不得不上下滚动太多。:)

nrtq = 与问题无关

```
public interface IMessage
{
  long CompantId { get; set; }
  void Process();
}
public class CompanyMessage : IMessage
{ //implementation, nrtq }
public class ProductMessage : IMessage
{ //implementation, nrtq }

public class Controller
{
  private static ConcurrentDictionary<long, Task> _workers = new ConcurrentDictionary<long, Task>();
  //other needed declarations, nrtq

  public Controller(){//constructor stuff, nrtq }

  public StartSubscribers()
  {
    //other code, nrtq
    _companySubscriber.OnMessageReceived += HandleCompanyMsg;
    _productSubscriber.OnMessageReceived += HandleProductMsg;
  }

  private void HandleCompanyMsg(string msg)
  {
    try {
      //other code, nrtq
      QueueItUp(new CompanyMessage(message));
    } catch (Exception ex) { //other code, nrtq }
  }

  private void HandleProductMsg(string msg)
  {
    try {
      //other code, nrtq
      QueueItUp(new ProductMessage(message));
    } catch (Exception ex) { //other code, nrtq }
  }

  private static void QueueItUp(IMessage message)
  {
    _workers.AddOrUpdate(message.CompanyId,
      x => {
        var task = new Task(message.Process);
        task.Start();
        return task;
      },
      (x, y) => y.ContinueWith((z) => message.Process())
    );
  } 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T19:34:32.123

我暂时不会“接受”这个答案，因为我很想看看其他人是否能提出更好的解决方案。

一位同事想出了一个解决方案，我稍微调整了一下。是的，我知道将`lock`语句与`ConcurrentDictionary`. 我现在真的没有时间看看是否有更好的集合类型可以使用。基本上，我们不只是`ContinueWith()`对现有任务执行 a ，而是将任务替换为自身加上另一个任务，最后使用`ContinueWith()`.

这有什么区别？很高兴你问！:) 如果我们刚刚做了 a`ContinueWith()`那么一旦链中的第一个任务完成`!worker.Value.IsCompleted`就会返回。`true`但是，通过将任务替换为两个（或更多）链式任务，那么就集合而言，只有**一个**任务并且在链中的所有任务完成之前`!worker.Value.IsCompleted`不会返回。`true`

我承认我有点担心用它自己+（新任务）替换任务，因为如果任务在被替换时恰好正在运行怎么办。好吧，我对此进行了测试，并没有遇到任何问题。我相信正在发生的事情是，由于任务在自己的线程中运行并且集合只是持有指向它的指针，因此正在运行的任务不受影响。通过将其替换为自身+（新任务），我们维护了指向执行线程的指针，并在它完成时获得“通知”，以便下一个任务可以“继续”或`IsCompleted`返回`true`。

此外，“清理”循环的工作方式以及它的位置，意味着我们将“完成”任务在集合中徘徊，但直到下一次“清理”运行，也就是下一次收到消息。同样，我做了很多测试，看看是否会因此导致内存问题，但我的服务从未使用超过 20 MB 的 RAM，即使每秒处理数百条消息也是如此。我们将不得不收到一些相当大的消息并且有很多长时间运行的任务才能导致问题，但请记住这一点，因为您的情况可能会有所不同。

如上，在下面的代码中，nrtq = 与问题无关。

```
public interface IMessage
{
  long CompantId { get; set; }
  void Process();
}
public class CompanyMessage : IMessage
{ //implementation, nrtq }
public class ProductMessage : IMessage
{ //implementation, nrtq }

public class Controller
{
  private static ConcurrentDictionary<long, Task> _workers = new ConcurrentDictionary<long, Task>();
  //other needed declarations, nrtq

  public Controller(){//constructor stuff, nrtq }

  public StartSubscribers()
  {
    //other code, nrtq
    _companySubscriber.OnMessageReceived += HandleCompanyMsg;
    _productSubscriber.OnMessageReceived += HandleProductMsg;
  }

  private void HandleCompanyMsg(string msg)
  {
    //other code, nrtq
    QueueItUp(new CompanyMessage(message));
  }

  private void HandleProductMsg(string msg)
  {
    //other code, nrtq
    QueueItUp(new ProductMessage(message));
  }

  private static void QueueItUp(IMessage message)
  {
    lock(_workers)
    {
      foreach (var worker in Workers)
      {
        if (!worker.Value.IsCompleted) continue;
        Task task;
        Workers.TryRemove(worker.Key, out task);
      }
      var id = message.CompanyId;
      if (_workers.ContainsKey(id))
        _workers[id] = _workers[id].ContinueWith(x => message.Process());
      else
      {
        var task = new Task(y => message.Process(), id);
        _workers.TryAdd(id, task);
        task.Start();
      }
    }
  } 
```******

# android - 重用 Android 布局

> ID：11035498
> 
> 赞同：0
> 
> 时间：2012-06-14T14:40:23.680
> 
> 标签：android, android-layout

我有一个 root_layout ：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
android:background="@drawable/background"
android:weightSum="10">

    <FrameLayout
        android:id="@+id/parentViewHolder"
        android:layout_width="match_parent"
        android:layout_height="fill_parent"
        android:layout_weight="8"
        android:background="@android:color/transparent"
        android:cacheColorHint="@android:color/transparent" >
    </FrameLayout>

    <TextView
        android:id="@+id/spaceHolder"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="2"
        android:text="TEXT">
    </TextView> 
```

现在我希望，每次我想更改屏幕时，使用这些布局并填充另一个声明的 layout.xml

我试着用

```
 protected void Setup(int _layoutResourceId) 
{ 
    layoutResourceId = _layoutResourceId;
    FrameLayout holder = (FrameLayout) activity.findViewById(R.id.parentViewHolder);

    LayoutInflater layoutInflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);    
    holder.addView(layoutInflater.inflate(layoutResourceId, null, false)); 
    activity.screen = this;
} 
```

但这并没有正常工作。有人知道更好的实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:52:21.910

您可以像这样重用布局：

首先，实现问题中描述的布局。例如，它的文件名为 root_layout.xml。

然后，如果您想在另一个视图中使用它，只需将其添加到您的 xml 文件中：

```
<include layout="@layout/root_layout"></include> 
```

而 root_layout 将被膨胀到另一个布局中。

请注意，root_layout 的每个属性都被保留。所以要注意他们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T14:53:48.467

你没有说它是如何不工作的，所以我假设你在屏幕上留下了两个视图......你应该使用`removeAllViews()`.

试试这个：

```
protected void Setup(int _layoutResourceId)  
{  
    layoutResourceId = _layoutResourceId; 
    FrameLayout holder = (FrameLayout) activity.findViewById(R.id.parentViewHolder); 
    holder.removeAllViews();  
    LayoutInflater layoutInflater = (LayoutInflater)activity.getSystemService (Context.LAYOUT_INFLATER_SERVICE);     
    holder.addView(layoutInflater.inflate(layoutResourceId, null, false));  
    activity.screen = this; 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T14:56:30.337

如果您想`FrameLayout`从您发布的布局中添加不同的布局，您应该这样做：

```
protected void Setup(int _layoutResourceId) { 
    layoutResourceId = _layoutResourceId;
    FrameLayout holder = (FrameLayout) activity.findViewById(R.id.parentViewHolder);
    holder.removeAllViews();
    LayoutInflater layoutInflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);    
    layoutInflater.inflate(layoutResourceId, holder, true)); 
    activity.screen = this;
} 
```

# opengl - 尝试构建具有 OpenGL 支持的 OpenCV 2.4.1

> ID：11035500
> 
> 赞同：11
> 
> 时间：2012-06-14T14:40:34.610
> 
> 标签：opengl, opencv, compilation, cmake

我正在尝试构建具有 OpenGL 支持的 OpenCV 2.4.1，但它一直在失败。我在我的 Ubuntu 11.04 中安装了 OpenGL，库像往常一样位于 /usr/lib/libGL.so 下。我知道我的 OpenGL 安装是正确的，因为我有编译、链接和运行正常的 C++ OpenGL 项目。

我按如下方式运行 cmake 命令，因为我需要 CUDA 和 OpenGL 支持。

```
/data/OpenCV-2.4.1/build $ cmake -D WITH_OPENGL=ON -D CMAKE_BUILD_TYPE=RELEASE -D WITH_CUDA=ON -D CUDA_TOOLKIT_ROOT_DIR=/usr/local/cuda/ -D BUILD_EXAMPLES=ON -D WITH_TBB=ON .. 
```

这是我从中得到的输出，告诉我 CUDA 被正确检测到，但 OpenGL 没有

```
-- General configuration for OpenCV 2.4.1 =====================================
-- 
--   Platform:
--     Host:                        Linux 2.6.35-32-generic x86_64
--     CMake:                       2.8.8
--     CMake generator:             Unix Makefiles
--     CMake build tool:            /usr/bin/make
--     Configuration:               RELEASE
-- 
--   C/C++:
--     Built as dynamic libs?:      YES
--     C++ Compiler:                /usr/bin/c++ (ver 4.4.4)
--     C++ flags (Release):         -Wall -Wno-long-long -pthread -fomit-frame-pointer -msse -msse2 -ffunction-sections -O3 -DNDEBUG   -DNDEBUG
--     C++ flags (Debug):           -Wall -Wno-long-long -pthread -fomit-frame-pointer -msse -msse2 -ffunction-sections -g  -O0 -DDEBUG -D_DEBUG -ggdb3
--     C Compiler:                  /usr/bin/gcc
--     C flags (Release):           -Wall -Wno-long-long -pthread -fomit-frame-pointer -msse -msse2 -ffunction-sections -O3 -DNDEBUG  -DNDEBUG
--     C flags (Debug):             -Wall -Wno-long-long -pthread -fomit-frame-pointer -msse -msse2 -ffunction-sections -g  -O0 -DDEBUG -D_DEBUG -ggdb3
--     Linker flags (Release):      
--     Linker flags (Debug):        
-- 
--   OpenCV modules:
--     To be built:                 calib3d contrib core features2d flann gpu highgui imgproc legacy ml nonfree objdetect photo python stitching ts video videostab
--     Disabled:                    -
--     Disabled by dependency:      -
--     Unavailable:                 androidcamera java
-- 
--   GUI: 
--     QT 4.x:                      NO
--     GTK+ 2.x:                    YES (ver 2.22.0)
--     GThread :                    YES (ver 2.26.1)
--     GtkGlExt:                    NO
--     OpenGL support:              NO
-- 
--   Media I/O: 
--     ZLib:                        /usr/lib64/libz.so (ver 1.2.3.4)
--     JPEG:                        /usr/lib64/libjpeg.so (ver 62)
--     PNG:                         /usr/lib64/libpng.so (ver 1.2.44)
--     TIFF:                        /usr/lib64/libtiff.so (ver 42 - 3.9.4)
--     JPEG 2000:                   /usr/lib64/libjasper.so (ver 1.900.1)
--     OpenEXR:                     /usr/lib64/libImath.so /usr/lib64/libIlmImf.so /usr/lib64/libIex.so /usr/lib64/libHalf.so /usr/lib64/libIlmThread.so (ver 1.6.1)
-- 
--   Video I/O:
--     DC1394 1.x:                  NO
--     DC1394 2.x:                  NO
--     FFMPEG:                      YES
--       codec:                     YES (ver 54.23.100)
--       format:                    YES (ver 54.6.100)
--       util:                      YES (ver 51.54.100)
--       swscale:                   YES (ver 2.1.100)
--       gentoo-style:              YES
--     GStreamer:                   
--       base:                      YES (ver 0.10.30)
--       app:                       YES (ver 0.10.30)
--       video:                     YES (ver 0.10.30)
--     OpenNI:                      NO
--     OpenNI PrimeSensor Modules:  NO
--     PvAPI:                       NO
--     UniCap:                      NO
--     UniCap ucil:                 NO
--     V4L/V4L2:                    Using libv4l (ver 0.8.8)
--     Xine:                        NO
-- 
--   Other third-party libraries:
--     Use IPP:                     NO
--     Use TBB:                     YES (ver 3.0 interface 5000)
--     Use Cuda:                    YES (ver 4.2)
--     Use Eigen:                   YES (ver 2.0.15)
-- 
--   NVIDIA CUDA:                   (ver 4.2)
--     Use CUFFT:                   YES
--     Use CUBLAS:                  NO
--     NVIDIA GPU arch:             11 12 13 20 21 30
--     NVIDIA PTX archs:            11 12 13 20 21 30
--     NVIDIA GPU features:         11 12 13 20 20 30 20
-- 
--   Python:
--     Interpreter:                 /usr/bin/python (ver 2.6.6)
--     Libraries:                   /usr/lib64/libpython2.6.so (ver 2.6.6)
--     numpy:                       /usr/local/lib/python2.6/dist-packages/numpy/core/include (ver 2.0.0.dev-27befc8)
--     packages path:               lib/python2.6/dist-packages
-- 
--   Documentation:
--     Build Documentation:         NO
--     Sphinx:                      NO
--     PdfLaTeX compiler:           /usr/local/texlive/2011/bin/x86_64-linux/pdflatex
-- 
--   Tests and samples:
--     Tests:                       YES
--     Performance tests:           YES
--     Examples:                    YES
-- 
--   Install path:                  /usr/local
-- 
--   cvconfig.h is in:              /data/OpenCV-2.4.1/build
-- -----------------------------------------------------------------
-- 
-- Configuring done
-- Generating done
-- Build files have been written to: /data/OpenCV-2.4.1/build 
```

猜猜缺少了什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-16T21:48:51.593

您可能忘记安装[GTK+ OpenGL 扩展](http://projects.gnome.org/gtkglext/)及其头文件

```
sudo apt-get install libgtkglext1 libgtkglext1-dev 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-10-17T05:34:48.403

我有同样的问题，我通过添加一个额外的命令（WITH_QT=ON）来资助一个解决方案。我不知道为什么，但我在互联网上发现，如果不启用 QT 而不是 GTK，则无法启用 OPENGL。我希望这对我们有所帮助，我对我的英语感到抱歉（我不太了解，因为我说西班牙语）。

向同志们致敬！！德斯德墨西哥：D

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-13T00:13:51.330

我无法让 WITH_OPENGL 标志显示在我的 openCV 2.4.3 CMake 选项中（我在 Mac 上运行 - Snow Leopard 10.6.8）...我终于通过打开 CMakeLists.txt 并编辑来让它工作第 128 行至：

`OCV_OPTION(WITH_OPENGL "Include OpenGL support" ON)`

然后运行您的 CMake 配置器/生成器，它应该会构建。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-26T00:56:37.967

如果安装了 OpenGL：

```
apt-get install libgl1-mesa-dev libglu1-mesa-dev libqt4-opengl-dev 
```

而且CMake仍然找不到OpenGL，那么这意味着/usr/lib/x86_64-linux-gnu/中没有**libGl.so**。如果 /usr/lib/x86_64-linux-gnu/mesa/ 中有 libGl.so，那么这是缺少软链接的情况。只需重新安装软件包即可重新建立该链接。

```
apt-get install --reinstall libgl1-mesa-dev libglu1-mesa-dev libqt4-opengl-dev 
```

请注意，`libqt4-opengl-dev`即使我不关心 OpenCV 中的 Qt 支持或其他任何地方的 Qt 支持，我也必须安装。我试图弄清楚为什么需要大量的 80MB 或下载和安装才能使常规 OpenGL 工作，但这种方法在 Ubuntu 13.10 中肯定有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-06T18:48:52.403

```
cmake -D:WITH_OPENGL=ON 
```

丹的评论。在 openCV 2.4.6

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-06-14T14:52:20.540

使用以下选项运行 cmake：

```
cmake -DWITH_OPENGL=ON <your CMakeLists.txt directory> 
```

或者

```
cmake -DUSE_OPENGL=ON <your CMakeLists.txt directory> 
```

# html - css没有一致地加载

> ID：11035505
> 
> 赞同：0
> 
> 时间：2012-06-14T14:40:58.877
> 
> 标签：html, css

我正在为我们的应用程序构建登录页面，在 google chrome 上打开我的页面时发现了一些不一致的地方。我将页面设计为使文本位于图片的右侧。但是有时当我刷新页面时，文字会落在图片下方。这不会一直发生，但如果我一直按刷新，文本最终会下降。

我假设这是因为我可能将 div 的宽度设置得太窄了。但我不明白为什么它有时有效，有时无效。

该网站位于：[https ://www.thedashapp.com/about.html](https://www.thedashapp.com/about.html)

（免责声明：该网站还没有上线，所以链接还没有正确连接，应用程序还没有启动）

看图片：

它应该是什么样子：![在此处输入图像描述](../Images/1dadd22cbe1c8f6a038615522085314c.png) ![在此处输入图像描述](../Images/27ece47f04d784c4e6bf2ac6ebfcc053.png)

当我点击刷新几次时会发生什么： ![在此处输入图像描述](../Images/4cb3b8f7c1f61a60e5170b4985954595.png) ![在此处输入图像描述](../Images/8d73b49c3e5c16e238c0cddcdebe8cc5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:47:17.590

您最好将文本放在单独的 div 中，也许图像也可以。然后应用于`float:left;`包含文本的 div 和包含图像的图像或 div。我很确定这会解决它。

# css - 什么是文本的顶部阴影？

> ID：11035509
> 
> 赞同：1
> 
> 时间：2012-06-14T14:41:14.437
> 
> 标签：css

我有一个看起来像这样的文本的要求：

> 顶部阴影：2px，#000，75%

这意味着什么？那只是一个`text-shadow`？75%是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T14:46:15.373

**顶部阴影**，如本文所述[，](http://css-tricks.com/snippets/css/top-shadow/)使用 CSS3`box-shadow`和`:before`伪选择器通过定位`body`元素在浏览器栏下添加阴影。

`top-shadow`CSS中没有关于`Top shadow: 2px, #000, 75%`位的属性。但是有`text-shadow`& `box-shadow`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T14:45:12.503

它无效`text-shadow`。

可能你需要这样的例子（使用正确的语法）：

```
text-shadow: 0 0 2px rgba(0, 0, 0, .75); 
```

或者

```
text-shadow: 0 2px 2px rgba(0, 0, 0, .75); /* down shadow */ 
```

*注意：*
`rgba(0, 0, 0, .75)` = `#000`75% 不透明度

**更新：** @Xander发现了您被问及的技术[。](https://stackoverflow.com/a/11035609/1057730)在其中`box-shadow`使用 css 生成的内容正在使用：

```
body:before {
    content: '';
    position: fixed;
    top: -1px;
    left: 0;
    width: 100%;
    height: 1px
    -webkit-box-shadow: 0 2px 2px rgba(0, 0, 0, .75);
            box-shadow: 0 2px 2px rgba(0, 0, 0, .75);
    z-index: 100;
} 
```

# jasper-reports - iReport 子报表重叠

> ID：11035515
> 
> 赞同：1
> 
> 时间：2012-06-14T14:41:25.233
> 
> 标签：jasper-reports, ireport, subreport

我有以下问题：在详细信息部分的主报告中，我有三个子报告。我将它们的**位置类型**设置为**浮动**，将**拉伸类型**设置为**相对于带高**，但结果不是预期的。该报告有 500 页长，只是打印了第一个子报告的内容。可能有什么问题？

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="Relatorio_Ivan_Master" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20">
<property name="ireport.zoom" value="1.0"/>
<property name="ireport.x" value="0"/>
<property name="ireport.y" value="96"/>
<parameter name="ID_FUNCIONARIO" class="java.lang.Integer">
    <defaultValueExpression><![CDATA[1]]></defaultValueExpression>
</parameter>
<parameter name="DTA_INICIO" class="java.util.Date"/>
<parameter name="DTA_TERMINO" class="java.util.Date"/>
<parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
    <defaultValueExpression><![CDATA["/Users/marcosnatanpacheco/Desktop/"]]></defaultValueExpression>
</parameter>
<queryString>
    <![CDATA[SELECT idt_funcionario, nme_funcionario, dta_alocacao_local, dta_alocacao_recurso, dta_alocacao_servico FROM tb_funcionario AS t1
INNER JOIN ta_alocacao_local AS t2 ON t2.cod_funcionario = t1.idt_funcionario
INNER JOIN ta_alocacao_recurso AS t3 ON t3.cod_funcionario = t1.idt_funcionario
INNER JOIN ta_alocacao_servico AS t4 ON t4.cod_funcionario = t1.idt_funcionario
WHERE idt_funcionario = $P{ID_FUNCIONARIO};]]>
</queryString>
<field name="idt_funcionario" class="java.lang.Integer"/>
<field name="nme_funcionario" class="java.lang.String"/>
<field name="dta_alocacao_local" class="java.sql.Timestamp"/>
<field name="dta_alocacao_recurso" class="java.sql.Timestamp"/>
<field name="dta_alocacao_servico" class="java.sql.Timestamp"/>
<background>
    <band splitType="Stretch"/>
</background>
<title>
    <band height="79" splitType="Stretch"/>
</title>
<pageHeader>
    <band height="35" splitType="Stretch"/>
</pageHeader>
<columnHeader>
    <band height="37" splitType="Stretch">
        <staticText>
            <reportElement x="0" y="12" width="100" height="20"/>
            <textElement>
                <font size="14" isBold="true"/>
            </textElement>
            <text><![CDATA[Funcionário:]]></text>
        </staticText>
        <textField>
            <reportElement x="100" y="12" width="440" height="20"/>
            <textElement>
                <font size="14"/>
            </textElement>
            <textFieldExpression><![CDATA[$F{nme_funcionario}]]></textFieldExpression>
        </textField>
    </band>
</columnHeader>
<detail>
    <band height="312" splitType="Stretch">
        <subreport>
            <reportElement positionType="Float" stretchType="RelativeToBandHeight" x="0" y="0" width="555" height="100"/>
            <subreportParameter name="ID_FUNCIONARIO">
                <subreportParameterExpression><![CDATA[$P{ID_FUNCIONARIO}]]></subreportParameterExpression>
            </subreportParameter>
            <subreportParameter name="DTA_INICIO">
                <subreportParameterExpression><![CDATA[$P{DTA_INICIO}]]></subreportParameterExpression>
            </subreportParameter>
            <subreportParameter name="DTA_TERMINO">
                <subreportParameterExpression><![CDATA[$P{DTA_TERMINO}]]></subreportParameterExpression>
            </subreportParameter>
            <connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
            <subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "Relatorio_Ivan_Detail_Local.jasper"]]></subreportExpression>
        </subreport>
        <subreport>
            <reportElement positionType="Float" stretchType="RelativeToBandHeight" x="0" y="104" width="555" height="100"/>
            <subreportParameter name="ID_FUNCIONARIO">
                <subreportParameterExpression><![CDATA[$P{ID_FUNCIONARIO}]]></subreportParameterExpression>
            </subreportParameter>
            <subreportParameter name="DTA_INICIO">
                <subreportParameterExpression><![CDATA[$P{DTA_INICIO}]]></subreportParameterExpression>
            </subreportParameter>
            <subreportParameter name="DTA_TERMINO">
                <subreportParameterExpression><![CDATA[$P{DTA_TERMINO}]]></subreportParameterExpression>
            </subreportParameter>
            <connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
            <subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "Relatorio_Ivan_Detail_Recurso.jasper"]]></subreportExpression>
        </subreport>
        <subreport>
            <reportElement positionType="Float" stretchType="RelativeToBandHeight" x="0" y="209" width="555" height="100"/>
            <subreportParameter name="ID_FUNCIONARIO">
                <subreportParameterExpression><![CDATA[$P{ID_FUNCIONARIO}]]></subreportParameterExpression>
            </subreportParameter>
            <subreportParameter name="DTA_INICIO">
                <subreportParameterExpression><![CDATA[$P{DTA_INICIO}]]></subreportParameterExpression>
            </subreportParameter>
            <subreportParameter name="DTA_TERMINO">
                <subreportParameterExpression><![CDATA[$P{DTA_TERMINO}]]></subreportParameterExpression>
            </subreportParameter>
            <connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
            <subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "Relatorio_Ivan_Detail_Servico.jasper"]]></subreportExpression>
        </subreport>
    </band>
</detail>
<pageFooter>
    <band height="54" splitType="Stretch"/>
</pageFooter>
<summary>
    <band height="42" splitType="Stretch"/>
</summary>
</jasperReport> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-15T15:44:13.070

我找到了解决方案。我创建了**3 个细节带**，并为每个细节带放置**一个子报表**！效果很好！

# java - 从文本中提取标签或相关关键字

> ID：11035518
> 
> 赞同：2
> 
> 时间：2012-06-14T14:41:46.060
> 
> 标签：java, text-mining, gate

我需要提取类似于[AlchemyAPI 的概念标记](http://www.alchemyapi.com/api/concept/)方法的相关关键字或概念。

我想知道是否有任何工具可以提供类似于文本或分类的“概念标记”的东西，而不仅仅是词或正则表达式。

就我而言，最好使用独立的解决方案，因为我有大量数据，并且它很快达到 Yahoo Term Extraction 和 AlchemyAPI 的速率限制。

例如输入：

> 话虽如此，它的民主公众决定他们是否同意或不同意

输出：

> 做决定

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T18:54:07.593

这称为文本分类

这是一个由 5 部分组成的视频系列，介绍如何使用名为 RapidMiner 的工具做您需要的事情

[http://vancouverdata.blogspot.ca/2010/11/text-analytics-with-rapidminer-loading.html](http://vancouverdata.blogspot.ca/2010/11/text-analytics-with-rapidminer-loading.html)

# c# - 如何将 WinForms TextBox 的前几个字符设置为只读？

> ID：11035532
> 
> 赞同：52
> 
> 时间：2012-06-14T14:42:32.937
> 
> 标签：c#, .net, winforms

我有一个带有文本框的表单，用于输入 URL。我需要将 (http://) 作为预定义值添加到此文本框，并希望它是只读的，这样用户将无法删除 http://，但他可以在其后写入。

![在此处输入图像描述](../Images/7c06c0df7bbfa1f1cd8b6b17afbb12c0.png)

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-06-14T14:44:33.010

这里有几个选项：

1.  最简单的方法是使用这些字符在文本框外（左侧）创建一个[标签。](http://msdn.microsoft.com/en-us/library/system.windows.forms.label%28v=vs.80%29.aspx)（简单易懂的用户）

2.  创建第二个只读文本框以在开始时使用，设置其样式以匹配输入文本框并将它们彼此相邻对齐。是的，你会得到一条像素线来分割它们，但我认为这会增加用户体验，使其明显不是为了搞乱（我个人会选择这个选项）

3.  如果您需要样式，您可以[滚动您自己的用户控件](http://msdn.microsoft.com/en-us/library/a6h7e207%28v=vs.71%29.aspx)，该控件使用面板、标签和文本框，并根据需要设置适当的边框样式。（获得您需要的确切样式的最佳方法）

4.  第四种更烦人的方法是处理文本框本身的一个关键事件（例如[KeyDown](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.keydown.aspx)）。有了这个，您可以进行大量检查并更改插入符号的位置以使其正常工作，但相信我，这会让您努力使其完美工作！（太多的努力才能做到正确）

总而言之，我认为**选项 2**是最好的。当然，如果您使用的是 WPF，您无疑会在样式方面拥有更多的灵活性。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-06-14T14:44:31.480

您是否考虑在其旁边放置一个带有“http://”作为文本的标签？然后在接受用户输入时，您只需在 textbox.Text 中附加“http://”即可。

这是另一个想法：

每次按退格键时，计算文本框中的字符数。如果是 == 7，则忽略退格。如果更大，则检查退格后的字符数。如果字符数少于 7，清除文本框并重置文本。

```
private void a_keyPress(object sender, KeyPressEventArgs e)
{
    if (e.KeyChar == (char)8)
    {
        if (myTextbox.Text.Length == 7)
        // do stuff..
    }
    else if //do stuff...
} 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-06-14T14:46:36.143

您甚至可以不显示 http:// 并将其附加到 Textbox.Text 代码。首先检查它是否也不是以此开头。

为了澄清我的最后一句话：

```
string sURL = txtURL.Text.StartsWith("http://") ? txtURL.Text : "http://" + txtURL.Text; 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-06-14T14:49:15.663

像这样的东西？

```
private void textBox1_TextChanged(object sender, TextChangedEventArgs e)
{
    var textBox = sender as TextBox;

    if (!textBox.Text.StartsWith("http://"))
    {
        textBox.Text = "http://";
        textBox.Select(textBox.Text.Length, 0);

    }
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-06-15T04:02:57.457

您可以改用 RichTextBox，它允许保护文本：

```
 public Form1() {
        InitializeComponent();
        richTextBox1.Text = "http://";
        richTextBox1.SelectAll();
        richTextBox1.SelectionProtected = true;
        richTextBox1.SelectionStart = richTextBox1.Text.Length;
        richTextBox1.DetectUrls = false;  // optional
    } 
```

但不幸的是，如果将它的 Multiline 属性设置为 False，它就不能很好地工作。

使用 TextBox 执行此操作的一种实用方法是将其设置为您想要的方式。也适用于粘贴和选择删除：

```
 string protect = "http://";

    private void textBox1_TextChanged(object sender, EventArgs e) {
        if (!textBox1.Text.StartsWith(protect)) {
            textBox1.Text = protect;
            textBox1.SelectionStart = textBox1.Text.Length;
        }
    } 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-06-14T14:54:01.837

**注意：我误读了这个问题，因为不知何故我是从“HTML”标签来到这里的。但是如果你想用 HTML/CSS 做这样的事情，这可能是一种解决方案。**

你可以这样做：

```
<style>
    label.mylabel, input.myinput {
        display:        block;
        float:          left;
        height:         20px;
        margin:         0;
        padding:        10px 5px 0px 5px;
        border:         1px solid #ccc;
        font-size:      11px;
        line-height:    11px;
    }

    label.mylabel {
        border-right:   0;
    }

    input.myinput {
        border-left:    0;
    }
</style>

<label class="mylabel" for="myinput">http://</label>
<input id="myinput" class="myinput" name="myinput" value=""> 
```

所以这有两个好处：

*   看起来像一个输入框
*   当用户点击“http”时，实际的表单字段将被聚焦

当然，您必须在发送表单后手动添加“http://”。

整件事有一个缺点。什么是，如果您的用户想要插入“https://”？:)

干杯，菲利普

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-06-14T14:54:03.080

如果你想要一个 CSS 方法（加上背景图片），你可以尝试[这样](http://jsfiddle.net/bradchristie/S9yyJ/)的事情：

```
Enter URL: <input type="text" size="50" class="url" value="www.google.com" />

<style>
  input[type="text"].url {
    background: url(http://s18.postimage.org/4wkjdpidh/http.png) no-repeat left top transparent;
    text-indent: 34px;
  }
</style> 
```

然后，只需`http://`在处理输入值时将其添加到后面即可。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2019-02-13T12:02:21.053

作为一个选项，您可以添加一个自动大小的标签来`TextBox`控制。同样要在标签之后强制文本开始，您需要发送`EM_SETMARGINS`以将左填充应用于文本框：

```
using System;
using System.Runtime.InteropServices;
using System.Windows.Forms;
public class SampleTextBox : TextBox
{
    [DllImport("user32.dll")]
    private static extern IntPtr SendMessage(IntPtr hwnd, int msg, int wParam, int lParam);
    private const int EM_SETMARGINS = 0xd3;
    private const int EC_LEFTMARGIN = 1;
    private Label label;
    public SampleTextBox() : base()
    {
        label = new Label() { Text = "http://", Dock = DockStyle.Left, AutoSize = true };
        this.Controls.Add(label);
    }
    public string Label
    {
        get { return label.Text; }
        set { label.Text = value; if (IsHandleCreated) SetMargin(); }
    }
    protected override void OnHandleCreated(EventArgs e)
    {
        base.OnHandleCreated(e);
        SetMargin();
    }
    private void SetMargin()
    {
        SendMessage(this.Handle, EM_SETMARGINS, EC_LEFTMARGIN, label.Width);
    }
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-06-14T14:45:36.507

您可以在文本框左侧放置一个标签并将其文本属性设置为“http://”。或者您可以附加 2 个文本框，一个是只读的，另一个不是只读的。并在只读的地方写 http:// 。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-06-14T14:46:47.497

为事件（可能还有其他，例如剪贴板）创建一个委托`keyup`并检查值的开始。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-06-14T14:47:36.563

```
$('#myField').bind('keypress', function(event)
{
    if (event.charCode == 0 && event.currentTarget.value.length <= 7)
{
     return false;
}
}); 
```

# c++ - 工会为当前正在使用的成员进行测试

> ID：11035534
> 
> 赞同：10
> 
> 时间：2012-06-14T14:42:34.717
> 
> 标签：c++, variables, comparison, unions, members

工会是否有控制结构来测试当前正在使用哪个成员（或者是否有任何成员）？我问这个是因为未定义的行为在你的程序中从来都不是一件好事。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-14T14:43:10.730

不，不存在现成的这种机制。你必须自己处理。通常的方法是将`union`a包装起来`struct`：

```
struct MyUnion
{
   int whichMember;
   union {
      //whatever
   } actualUnion;
}; 
```

因此，您拥有`MyUnion x;`并`x.whichMember`告诉您`x.actualUnion`正在使用哪个字段（尽管您必须实现该功能）。

# css - 堆积的水平图表

> ID：11035536
> 
> 赞同：-2
> 
> 时间：2012-06-14T14:42:44.507
> 
> 标签：css, html

我想要一个类似这样的图表：

[http://jcharts.sourceforge.net/samples/stackedBar.html#Horizo​​ntal+Stacked+Bar+Chart](http://jcharts.sourceforge.net/samples/stackedBar.html#Horizontal+Stacked+Bar+Chart)

我在如何在表格和或与 div 等中执行此操作方面受到挑战。制作一个不超过一个部分的简单图表似乎更容易。我不确定从哪里开始，采取什么方法，或者在网上看哪里。我想保持简单。

似乎我找到了一些插件等，但如果可能的话，我想自己编写 html/css。我也使用 Ruby，有些插件是错误的语言..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T15:13:27.700

这些图表是图像。用纯 HTML/CSS 重现它们将是一个挑战，而且可能不值得。

如果您找到适合您的插件（可能是 JavaScript），请使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T15:22:01.197

水平图表非常简单。您始终可以在 div 中使用 div 来表示堆叠的条形图，因此第一个 div 的背景颜色为蓝色，而在该 div 中您的背景颜色为黄色。

3d 图表您可以为每个条形图提供背景图像，并使用不同背景图像颜色的不同内部 div 为您提供堆叠的颜色变体图表

这个布局应该全部用DIVS和绝对定位完成

# internet-explorer - 试图找出 HTTP 请求的来源

> ID：11035547
> 
> 赞同：6
> 
> 时间：2012-06-14T14:43:29.117
> 
> 标签：internet-explorer, firebug, google-chrome-devtools

Web 应用程序正在发出 HTTP 请求，但我无法理解它是如何发出请求的。它只是在绘制一页后完成。之前的请求中没有 302，也没有任何明显的信息可以告诉我这个请求是如何提出的。

如果我可以设置一个断点，它将在下一个 HTTP 请求即将发送之前停止，这会有所帮助。然后就在页面绘制之后，我会启用它并找出是谁在发送它 Firebug 让我对 XHR (Ajax) 请求执行此操作，但不适用于普通请求。这是一个普通的 HTTP 请求——不是 AJAX 请求。

是否可以使用 chrome 或 IE 中的调试工具来执行此操作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T11:22:32.087

首先我是怎么得到的。

1.  在浏览器上禁用 javascript - 问题仍然发生，这意味着我可以控制 javascript 发送它。
2.  将 firefox 上的最大连接数设置为 1，这意味着请求是按顺序发生的，因此我可以缩小我无法解释的请求何时/何地被发送。
3.  终于找到了这样的HTML视频标签

：

```
<video id="my_video" class="video-js" width="313" height="240" controls="controls"        preload="none" poster="#"> 
```

这部分`poster="#"`是罪魁祸首。如果没有要显示的视频，这会向包含页面发送请求。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-22T14:17:14.627

在 Chrome DevTools 中，转到`Network`面板。在最左边的列中按名称查找相应的资源，然后查看**Initiator**列。它将指定发起资源加载的对象。它可以是*Script*，在这种情况下，它还将包含指向相应脚本行的超链接，该脚本行加载了资源。*解析器*启动器也是如此 - 如果它是加载您的资源的那个，它会给您一个指向相应 HTML 行的超链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T14:48:28.793

Chrome 有一个版本的萤火虫。[http://getfirebug.com/firebuglite](http://getfirebug.com/firebuglite)

Fiddler 支持 HTTPS。它仅适用于 Windows，但您没有指定平台。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T18:11:02.887

*   从你说的看，如果不是 XHR，那肯定是从上一页跳转过来的 JavaScript 重定向。
*   禁用 JavaScript 并查看代码，搜索类似的代码
    *   `location = ...`
    *   `location.href = ...`
    *   `window.location = ...`
    *   `window.location.href = ...`等等
*   或类似于HTML`<meta http-equiv="refresh" content="0;URL='http://example.com/'">`中的内容。`<head>`
*   使用[Tamper Data](https://addons.mozilla.org/pl/firefox/addon/tamper-data/)，启用篡改后，您可以逐个发送请求，并在每个请求之前暂停。
*   此外，您可以使用 Fiddler 查看浏览器发起的所有 HTTP 请求，并进行[高级调试（请参阅 bp* 命令）](http://www.fiddler2.com/fiddler/help/quickexec.asp)
*   您也可以转到 Firebug`Net panel`并单击“Persist”以观察所有请求，即使在重定向之后也是如此。

# php - 单元测试仅断言模拟调用

> ID：11035551
> 
> 赞同：2
> 
> 时间：2012-06-14T14:43:33.570
> 
> 标签：php, oop, unit-testing, mocking, phpunit

在重构我的代码库时，我发现了一段代码，我想将其提取到一个单独的类中。

它将为用户个人资料图片提供缩略图。该类（我们将其命名为`UserImageManager`）将包含 的实例`UserMapper`和 的实例 `ImageRenderer`。

现在我确实有一种方法可以检索用户个人资料图片的缓存 url。该方法从 中检索一个`User`对象，并使用存储在该对象中的图像路径`UserMapper`触发该`render`方法 。`ImageRenderer``User`

我为这个小函数编写了一个测试，模拟了这个测试用例`ImageRenderer`，现在我没有一个断言。断言函数的返回值没有任何意义，因为它返回缓存文件路径，该路径由模拟的`ImageRenderer`.

现在我的问题是：即使没有断言，它仍然是有效的单元测试吗？或者我应该如何重写我的测试，而不仅仅是检查对模拟对象的调用？

```
// The unit test
public function renderImageWillReturnCacheImagePath() {
  $this->_userImageManager->setImage(
    // Returns the ImageRenderer mock
    $this->_getImageMock(BASE_PATH . 'uploads/2012-06-06-wegmeister-91792.png', false, false)
  );

  // Invokes the function
  $image = $this->_userImageManager->render('wegmeister');
}

// The method to be tested
public function render($username, $width = false, $height = false) {
  $user = $this->_userMapper->getUserByUsername($username);

  if($user !== false && trim($user->getImage()) !== '') {
    $srcImage = $this->_folderUserImages . $user->getImage();
  }
  else {
    $srcImage = $this->_placeholderUserImage;
  }

  $dstImage = $this->_image->render($srcImage, 'jpg', $width, $height);
  if ($dstImage === false || empty($dstImage)) {
    throw new UnexpectedValueException('ImageRenderingFailed');
  }

  return $dstImage;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T16:28:11.637

没有断言的测试是不完整的测试。

如果您无法想象断言什么以及如何断言，我会说这意味着您要测试的方法（单元）的结果是未定义的。

由于您没有显示任何规范，也没有告诉该函数返回哪种类型，所以我可以想象您可以测试的唯一一件事是是否在需要时抛出异常。

此外，看起来该方法做得太多而且太复杂。所以我不会把时间花在创建测试上，而是把时间花在重构类上。

将来您应该在编写代码之前编写测试，这样您就不会遇到这种情况。

# objective-c - Objective-c/iOS - 用 Safari 打开本地 html 文件

> ID：11035564
> 
> 赞同：3
> 
> 时间：2012-06-14T14:44:13.577
> 
> 标签：objective-c, ios, cocoa-touch, safari

我有一个 HTML 文件保存在这样的临时目录中：

```
NSFileManager *fileManager = [NSFileManager defaultManager];
NSString *documentDirectory = NSTemporaryDirectory();
NSString *documentPath = [documentDirectory stringByAppendingPathComponent:@"mydocument.html"];
[fileManager createFileAtPath:documentPath contents:myHTMLDocumentData attributes:nil]; 
```

该文档是在我的临时文件中创建的。之后，我想在 Safari 中打开此文档，但它不起作用：

```
NSURL *url = [NSURL fileURLWithPath:documentPath];
[[UIApplication sharedApplication] openURL:url]; 
```

屏幕上什么都没有发生，没有错误......但是，如果我将“url”替换为@“http://google.fr”，Safari 将使用 google.fr 启动，我可以通过键入 url 访问我的临时文件“文件：//localhost ..../myHtmlDocument.html”在 Safari 中。

希望你能帮我

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T14:46:57.780

您无法通过 Safari 打开包含驻留在应用程序包中的文档（请参阅[iOS 安全模型](http://developer.apple.com/library/ios/DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/TheiOSEnvironment/TheiOSEnvironment.html#//apple_ref/doc/uid/TP40007072-CH9-SW7)）。

您需要的是使用 ;`UIWebView`在您的应用程序中显示您的文档内容`– loadHTMLString:baseURL:`；例如：

```
UIWebView* webView = [[[UIWebView alloc] initWithFrame:rect] autorelease];
[webView loadHTMLString:myHTMLSource baseURL:nil];
[self.view addSubview:webView]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T14:47:17.983

我认为您无法做到这一点，因为两者`UIApplication openURL`:`UIDocumentInteractionController`都不会在您的捆绑包中打开本地文件

请改为执行以下操作，在您的`viewDidLoad`

```
UIWebView *webView = [[UIWebView alloc] initWithFrame:self.view.bounds];
[self addSubview:webView];
NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL fileURLWithPath: documentPath]];
[webView loadRequest:request]; 
```

# javascript - Javascript函数返回'[object Object]'而不是hash

> ID：11035567
> 
> 赞同：0
> 
> 时间：2012-06-14T14:44:14.723
> 
> 标签：javascript, function, hash

我有一个功能可以挑选出输入名称的各个部分：

```
 function getNameParts(list) {
    first_name = list[0];
    middle_name = "";
    last_name = list[1];
    if(list.length > 2) {
      middle_name = list[1];
      last_name = list[2];
    }
    names = {"first": first_name, "middle": middle_name, "last": last_name};
    console.log("names", names)
    return names
  } 
```

控制台声明这`names`是此函数内部的哈希。

但是当我像这样使用这个功能时：

```
name = getNameParts($("#person_name").val().split(' '));
console.log("name", name) 
```

`name`是一个字符串“[object Object]”

这是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:47:51.663

它真的是一个字符串吗？你从你的函数返回一个对象。

尝试以下示例：

```
name = getNameParts($("#person_name").val().split(' '));
console.log("first", name.first);
console.log("middle", name.middle);
console.log("last", name.last); 
```

您可以访问每个属性值。当您尝试将整个对象解析为字符串时，它按预期返回“[object Object]”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T14:53:05.280

试试这个；

```
function getNameParts(list) {
    var first_name = list[0];
   var middle_name = "";
    var last_name = list[1];
    if(list.length > 2) {
      middle_name = list[1];
      last_name = list[2];
    }
    var names = {"first": first_name, "middle": middle_name, "last": last_name};
    console.log("names", names)
    return names
  } 
```

/// 声明名称变量

```
var name = getNameParts($("#person_name").val().split(' '));
console.log("name", name) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-10T22:35:13.130

使用 JSON.stringify()

```
console.log('names', JSON.stringify(names)); 
```

[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T14:49:44.710

`name`不是字符串。它是一个对象，因此当您在控制台中记录此值而不是理想地显示对象的内容时，它显示的是它的类型，即控制台。

要验证这一点，您可以登录`names.first`或其中的任何其他属性

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T14:56:00.770

`name`是一个对象，但是当您使用特定于供应商的`console.log`函数时，它可能会尝试将其参数强制转换为字符串，具体取决于此特定环境程序员如何实现它。`Object`的默认[字符串化方法](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/toString)是 return `[object Object]`，这正是你得到的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-14T15:02:28.053

看看这个，它似乎工作得很好：

```
 $(document).ready(function() {
      function getNameParts(list) {
            var first_name = list[0],
                middle_name = "",
                last_name = list[1],
                names;

            if(list.length > 2) {
                middle_name = list[1];
                last_name = list[2];
            }
            names = {"first": first_name, "middle": middle_name, "last": last_name};
            console.log(names)
            return names;
        }

        var testString = "aaa bbb ccc";
        var name = getNameParts(testString.split(' '));
        console.log(name);

        console.log(name.first + " " + name.middle + " " + name.last);

   }); 
```

当您执行console.log 时，如果您执行console.log("name" + names) 并且names 是一个对象，它将显示为[object Object] 而不是其内容的名称类型。对于字符串和数字，这样做是可以的。

# php - 在 PHP 中获取基于上周二过去的周列表

> ID：11035579
> 
> 赞同：0
> 
> 时间：2012-06-14T14:44:54.333
> 
> 标签：php, date, strtotime

我试图根据过去的上周二列出几个日期范围。我所期待的是...

```
June 6 - June 12
May 30 - June5 
```

但我得到的是

```
June 6 - June 12
- December 24 
```

我的代码如下

```
$lastWensE1 = date('F j', strtotime("last tuesday"));
$lastWensS1 = strtotime ( '-6 day' , strtotime ( $lastWensE1 ) ) ;

$lastWensE2 = strtotime ( '-7 day' , strtotime ( $lastWensE1 ) ) ;
$lastWensS2 = strtotime ( '-7 day' , strtotime ( $lastWensS1 ) ) ;

echo date('F j', $lastWensS1)." - ".$lastWensE1;
echo "<br/>";
echo date('F j', $lastWensS2)." - ".date('F j', $lastWensE2); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:57:57.807

因为您在这里指定了日期是代码，

```
$lastWensE1 = date('F j', strtotime("last tuesday"));
$lastWensS1 = strtotime ( '-6 day' , strtotime ( $lastWensE1 ) ) ;

$lastWensE2 = strtotime ( '-7 day' , strtotime ( $lastWensE1 ) ) ;
$lastWensS2 = strtotime ( '-7 day' , strtotime ( date('F j',$lastWensS1 )) ) ;

echo date('F j', $lastWensS1)." - ".$lastWensE1;
echo "<br/>";
echo date('F j', $lastWensS2)." - ".date('F j', $lastWensE2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T14:58:05.247

过去 3 个星期二的所有计算都应该先完成，然后再尝试格式化结果，这样可以提供更清晰的代码：

```
$lastTue1 = strtotime('last tuesday');
$lastTue2 = strtotime('-7 day' , $lastTue1 );
$lastTue3 = strtotime('-7 day' , $lastTue2 );

echo date('F j', strtotime('+1 day', $lastTue2))." - ".date('F j', $lastTue1);
echo "<br/>";
echo date('F j', strtotime('+1 day', $lastTue3))." - ".date('F j', $lastTue2); 
```

这给出了：

```
June 6 - June 12
May 30 - June 5 
```

# android - 通用 Android 垃圾收集

> ID：11035593
> 
> 赞同：1
> 
> 时间：2012-06-14T14:45:28.000
> 
> 标签：android, garbage-collection

我不想提出一个模糊的问题，所以我会尽量让这个问题尽可能清楚（我会尽力而为）。

我知道垃圾收集长期以来一直是编程中的灰色地带。我不确定android或其他手机的情况。

我对 android 垃圾收集的了解：

1.  它收集类系统类ojbects（由答案更正而成）。
2.  编辑*“GC 仅在活动被销毁后收集活动项目。活动生命周期由清单中的属性驱动，也由启动它的意图标志驱动。” ——塞瓦·阿列克谢耶夫。正如评论者所说。
3.  您可以使用“System.gc()”强制进行垃圾收集，但不建议这样做，因为它可能会删除一些重要的类项。

现在我从stackoverflow获得了这些信息（现在知道它不再是垃圾收集的灰色区域）

转到我的问题：

1.  您如何获得有关垃圾收集的过程或一般信息（书籍、互联网文章等）的信息？
2.  如果问题 1 没有答案，那么在开发需要持续使用内存的应用程序时，还应提醒开发人员的其他方式或方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T15:47:10.953

我不确定你的信息是否正确。

> 它收集类系统类。

不会。它会收集无法从任何系统根目录访问的对象实例。系统根包括任何静态引用、来自线程的活动堆栈帧的任何引用、任何活动同步监视器以及本机代码段（全局或本地）持有的任何内容。如果从对象到根的路径向后跟踪参考图，则该对象被认为是活动的（因此无法回收）。任何没有根路径的对象都可以被垃圾收集器回收。类由 ClassLoader 引用，并且永远不会重新加载，因此不会被系统回收，除非收集了 ClassLoader 并且收集了这些类的所有实例。所以 Android 永远不会收集类系统类，因为 ClassLoader 永远不会被收集。

> 如果 android 清单文件指出活动是 hasNoHistory 或 singleTop，它“仅”从活动中收集项目

不，活动只不过是对象的一个​​实例。当对活动的引用消失时，它指向的所有引用都会消失，除非其他一些根指向该对象。通过设置 singleTop="true" 您只是告诉 Android 实例化此活动的单个实例，并且发送的所有意图都将由该*单个实例*处理。 *它对 GC 没有任何影响*。当一个活动失去它到根的路径时，无论该活动的设置是什么，它都会被回收。

> 您可以使用“System.gc()”强制进行垃圾收集，但不建议这样做，因为它可能会删除一些重要的类项。

无垃圾收集算法不会删除任何活动对象。根据您上面的定义，这意味着 GC 可以收集您正在使用的不正确的对象。如果是这样，那就是一个大错误。这也是垃圾收集算法的美妙之处，因为它们可以保证完美地清理垃圾。如果您的内存不足，程序员忘记删除引用，或者您对内存的使用不小心。您不应该调用 System.gc() 的原因是您/您的程序不知道何时是回收内存的最佳时间。垃圾收集器试图最大化（程序运行的时间）与（它花费在收集垃圾上的时间）的比率。它保留了非常详细的统计数据，并估计何时是运行垃圾收集的好时机，而不是简单地分配更多内存。

这就像打扫你的房子。你不能一直打扫，因为它会让做事花费更长的时间，有时你不得不让它变脏（比如做饭）。但是，如果您从不打扫房屋，则可能需要一整天的时间才能打扫干净。因此，在清理它比执行任务需要更长的时间之前，你必须在它变得多脏之间取得平衡。

这就是为什么你不应该在你的程序中计算/猜测/强制 GC 的原因，因为 Android 已经为你实现了它，并且会做得比你希望的更好。

这对开发人员意味着什么？

1.  让 Android 处理 GC 应该运行的时间。
2.  清理引用以帮助 GC 知道什么时候可以回收。对静态引用要非常小心，永远不要让静态引用对活动、服务等的引用。
3.  Don't allocate lots of small amounts of short lived memory. This will force more GC time to clean up. By allocating memory conservatively you are by definition helping that ratio.

Most of the time GC is very hands off. The only problems developers get into is not establishing boundaries for long living objects vs. UI objects. If a long living objects has a reference back to the UI that's a place you'll have to unregister or else you'll leak memory. It's ok for the UI to hold references to long living objects, but not the other way around.

The real issue with Android is how much you make the garbage collector work. If you keep the amount of memory you are using small then the garbage collector doesn't have big jobs it has to do. That doesn't mean you should reuse objects or create object pools, etc. But, you should be aware of what statements are creating memory, and how long those objects live for.

There are volumes of information on Garbage collection in general and particularly Java's Concurrent Mark and Sweep garbage collector. Android's garbage collector is not as performant, but it's pretty darn good. Most of the time I don't worry about GC unless there is a problem so it's mostly hands off.

And garbage collection isn't a grey area. It's very much well understood, and the industry has expanded the field quite a bit since Java was introduced in 1994.

# sql - 我可以将oracle语句放在sql的if else语句中吗

> ID：11035595
> 
> 赞同：0
> 
> 时间：2012-06-14T14:45:32.970
> 
> 标签：sql

将 oracle 查询放在 oracle if else 语句中时出现问题

```
select workgroupid, maxchats, 
      case
        when a.maxchats ='-1' then 
  (select propvalue  from ofproperty where name = 'xmpp.live.defaults.maxchats') 
       else 
          null (1)
        end as aaaa
from fpworkgroup a; 
```

当我将 maxchats 放在 1 个位置时，我得到了错误，，

我该如何解决这个......？

帮帮我..提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T15:01:19.620

很难理解您的问题，但听起来您正在尝试`maxchats`代替`null (1)`它并给您一个错误？

如果这是正确的，我猜错误就是那个错误`fpworkgroup.maxchats`并且`ofproperty.propvalue`有不同的列类型没有排列。a 的所有分支都`CASE`必须返回相同的列类型。例如，您不能`int`从一个分支返回一个并`varchar`从另一个分支返回一个。

您必须转换一个或另一个，以便它们返回相同的类型。

# actionscript-3 - 将一个movieclip作为另一个movieclip的孩子

> ID：11035596
> 
> 赞同：0
> 
> 时间：2012-06-14T14:45:33.723
> 
> 标签：actionscript-3, flash

所以我将`MovieClip` `mc1`添加到舞台（`addChild`）的哪个放在所有图层的顶部。实际上，我需要另一个影片剪辑位于所有场景之上，因此我创建了一个具有实例名称的空影片剪辑，该影片剪辑`fbp`设置在适当的图层上，我想在其中放置我的 mc1 影片剪辑。如何获取该`fbp`影片剪辑，然后将 mc1 添加为子项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T14:52:46.527

`fbp.addChild(mc1)`. 但是，您可能需要为`fbp`. 不确定它是否适用于电影剪辑。

# jquery - 使用 jquery ui 像这样 swf 拖放

> ID：11035599
> 
> 赞同：0
> 
> 时间：2012-06-14T14:45:39.997
> 
> 标签：jquery, jquery-ui, drag-and-drop

这是我需要克隆到 html5 和 jquery [http://www.gdlab.it/mappa/的 swf](http://www.gdlab.it/mappa/)

我可以保留 SWF 中的功能吗？

标签总是可以在数量和文本上有所不同，将标签放在另一个切换位置，最后（仅当所有标签都插入时）检查答案是否正确，如果不正确则将正确答案留在正确的位置并重置错误顶楼的答案。

提前 Tnx

**编辑**

> html

```
 <h1>This is a jQuery UI draggable TEST!</h1>
    <h2>Sposta questi oggetti nell'ordine esatto</h2>
    <p class="labels">
        <span class="dragme">ipsum</span> <span class="dragme">sit</span> <span class="dragme">dolor</span> <span class="dragme">amet</span> <span class="dragme">lorem</span>
    </p>
    <h2>Posti destinazione</h2>
    <p class="labels">
        <span class="dropme"></span>
    </p> 
```

> jQuery

```
 $(function() {
            $(".dragme").draggable({
                revert: true,
                revertDuration: 600
            });

            $(".dropme").droppable({
                accept: ".dragme",
                hoverClass: "ui-state-hover",
                activeClass: "ui-state-hover",
                drop: function(event, ui) {
                    $(this).addClass('ui-state-highlight').html(ui.draggable);
                }
            });
        }); 
```

我不能完全适合可拖动到相同尺寸的 span.dropme 并且如果我在其上放置另一个标签（切换位置）并返回到默认顶部位置，我不知道如何更改放置的标签，例如：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T13:07:05.990

是的你可以

您必须将所有标签设为 as`dragable`并将所有空格（可能是固定宽度的 div）设为`dropable`.

见 [http://jqueryui.com/demos/draggable/](http://jqueryui.com/demos/draggable/) 和 [http://jqueryui.com/demos/droppable/](http://jqueryui.com/demos/droppable/)

# php - 从 MySQL Fetch Assoc & Fetch Array 编码 JSON

> ID：11035600
> 
> 赞同：0
> 
> 时间：2012-06-14T14:45:40.230
> 
> 标签：php, ajax, json

我有这种 PHP 语法并且可以按预期工作：

```
$sqldata = mysql_query("
SELECT FirstName, LastName, NumberOfChildren, SchoolTuition FROM User WHERE User.Username = '$Username' LIMIT 1;
");

$rows = array();
while($r = mysql_fetch_assoc($sqldata)) {
  $rows[] = $r;
}

echo json_encode($rows); 
```

现在，问题是我想计算总学费（NumberOfChildren * SchoolTuition），它必须在 json_encode() 函数之前完成。我的客户不想在他们的数据库中添加一列额外的列。

所以我必须使用 PHP 计算这个 TOTAL School Tuition 并将其放回 $rows 数组作为 json_encode 之前数组的最新值。

我尝试先使用 mysql_fetch_array 计算得到 $rows[2] 和 $rows[3]，但由​​于我之前已经使用过 mysql_fetch_assoc，所以这个 mysql_fetch_array 将不起作用。

最后一件事，我 mysql_fetch_assoc 生成二维数组。因为当我使用 print_r($rows) 时，我看到了：

```
Array ( [0] => Array ( [FirstName] => Mary [LastName] => Smith [NumberOfChildren] => 3 [SchoolTuition] => 2000 ) ) 
```

而 array_push 函数只用于推送一维数组，对吧？

请给我解决这个问题。非常感谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T14:48:44.333

您可以只在 SQL 中进行计算，而无需添加列。

```
SELECT FirstName, LastName, NumberOfChildren, SchoolTuition, 
    (NumberOfChildren * SchoolTuiton) AS TotalSchoolTuiton 
FROM User WHERE User.Username = '$Username' LIMIT 1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T14:49:05.467

```
SELECT FirstName, LastName, NumberOfChildren, SchoolTuition, NumberOfChildren*SchoolTuition AS TotalTuition FROM User WHERE User.Username = '$Username' LIMIT 1; 
```

# ios - 如何将 iOS 应用 IPA 交付给客户以使用他们自己的企业配置文件进行签名

> ID：11035601
> 
> 赞同：8
> 
> 时间：2012-06-14T14:45:48.080
> 
> 标签：ios, code-signing, ios-provisioning, provisioning-profile

我们开发了一个 iOS 应用程序，该应用程序已作为 IPA 交付给客户，该应用程序具有临时分发配置文件，允许他们的一组员工将其安装在他们的设备上。客户现在希望使用他们的 iOS 企业开发人员计划凭据在内部将该应用程序分发给所有员工。

我曾希望客户可以简单地用他们自己的企业身份重新设计临时 IPA。但是，他们说他们不能这样做。他们说他们“需要一个 IPA 文件，取消对某些设备的限制”。

那么，我该怎么办？

*   我是否需要以某种方式为他们创建一个“未签名”的 IPA？（如果是这样，我该怎么做？）
*   我是否需要他们为我生成企业分发配置文件，以便我可以使用该配置文件构建应用程序？
*   我需要将源或构建输出发送给他们并让他们构建包吗？

我查看了以下文件，但它们并没有启发我：

*   [TN2250：iOS 代码签名设置、过程和故障排除](https://developer.apple.com/legacy/library/technotes/tn2250/_index.html)
*   [为 iOS 设备分发企业应用程序](http://help.apple.com/iosdeployment-apps/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T14:53:10.150

完全可以使用任何 IPA 并使用您自己的详细信息将其退出，在此过程中修改 Info.plist、捆绑 ID 等。我一直使用其他开发人员使用他们自己的配置文件和签名身份签名的 IPA 来执行此操作。

如果他们不熟悉`codesign`命令行工具以及替换embedded.mobileprovision 文件和权利的所有细节，他们最简单的方法是让您通过Xcode“存档”应用程序，并将生成的存档发送给他们文件 (*.xcarchive)。

他们可以将其导入 Xcode，使其在 Organizer 中可见，然后他们可以从那里选择“分发”并使用他们的企业身份对其进行签名。

要将 .xcarchive 文件导入 Xcode，他们只需将文件复制到`~/Library/Developer/Xcode/Archives`目录中，它就会出现在 Xcode 管理器中。然后他们单击“分发”并按照说明进行操作：

![在此处输入图像描述](../Images/e80f2a3aa4fcf8fbb7bdca5241d14d88.png)

# java - 有没有办法在java中更改csv文件中特定单元格的值？

> ID：11035602
> 
> 赞同：0
> 
> 时间：2012-06-14T14:45:48.907
> 
> 标签：java, csv, opencsv, supercsv

我已经在 StackOverflow 上解决了有关此问题的其他问题，但那里提到的库只允许读取或写入。其中一些确实允许像 SuperCSV 那样进行部分读取或写入，但没有库可用于更新特定单元格的值。是否有其他可以使用的库或者我需要手动完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:46:48.287

读取 CSV，修改所需的单元格，然后将其写回文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T14:53:43.517

不，无法直接更新 CSV 文件中的单元格。您可以逐行读取 CSV，然后逐列读取，更新单元格（内容）并写入新文件。

如果您知道模式（正则表达式），那么您可以使用 String.replace() 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-21T05:05:20.903

没有用于编辑 csv 文件的构建功能。这是编辑 csv 文件的一种方法。

包maven.selenium；

```
import java.io.BufferedReader;
import java.io.FileReader;
import java.io.FileWriter;
import java.io.IOException;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

import au.com.bytecode.opencsv.CSVReader;
import au.com.bytecode.opencsv.CSVWriter;
import jxl.read.biff.BiffException;
import jxl.read.biff.File;

public class App {
    public static void main(String[] args) throws BiffException, IOException {

        String csv = "C:/Users/shubham.mahajan/Desktop/data.csv";

        CSVReader reader = new CSVReader(new FileReader(csv), ',');
        List<String[]> csvBody = reader.readAll();
        String[] First_Row = csvBody.get(0);
        CSVWriter writer = new CSVWriter(new FileWriter(csv), ',');
        writer.writeNext(First_Row);
        for (int k = 0; k < First_Row.length; k++) {

            if (First_Row[k].equals("value")) {

                for (int j = 1; j < csvBody.size(); j++) {
                    String[] Temp = csvBody.get(j);

                    Temp[k] = "replacing value";

                    writer.writeNext(Temp);
                }
            }
        }
        reader.close();
        writer.flush();
        writer.close();
    }
} 
```

# mongodb - 应用程序错误后清理内容

> ID：11035604
> 
> 赞同：0
> 
> 时间：2012-06-14T14:45:54.433
> 
> 标签：mongodb, join

我是 mongoDB 的新手，关键是，我们新意识到我们的应用程序中的一个错误会导致多个 mongoDB 条目，而不是更新（编辑的）文档。现在，应用程序上线了，我们意识到了这个错误并试图解决随之而来的问题。

以下情况：@mongoDB 有很多包含此结构的文档：

```
"_id" : ObjectId("4fd9ede5a6b9579f5b000003"),
"USER" : "my_username",
"matchID" : 18809,
"data1" : 2,
"data2" : 1,
"tippDate" : ISODate("2012-06-14T13:57:57Z"),
"data3" : 0 
```

如果用户在应用程序中更改数据，应用程序将插入一个新文档而不是更新现有文档。

像那样

```
{
"_id" : ObjectId("4fd9ede5a6b9579f5b000003"),
"USER" : "my_username",
"matchID" : 18809,
"data1" : 2,
"data2" : 1,
"tippDate" : ISODate("2012-06-14T13:57:57Z"),
"data3" : 0
}
{
"_id" : ObjectId("4fd9ede5a6b9579f5b000002"),
"USER" : "my_username",
"matchID" : 18809,
"data1" : 4,
"data2" : 2,
"tippDate" : ISODate("2012-06-14T12:45:33Z"),
"data3" : 0
} 
```

现在，应用端的bug已经解决了，但是现在我们必须清理数据库。监狱只保留每个用户的最新记录/文档。一种方法是在应用程序端处理此问题：从一个用户加载所有数据，按日期排序，从一个用户删除所有数据并将最新条目写回 mongoDB。

但是：难道不能像在 MySQL 上使用关节删除那样处理 mongoDB 吗？

感谢您提供任何帮助或提示！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T18:19:21.173

> 是否有可能处理一个 mongoDB，比如在 MySQL 上使用关节删除？

不，MongoDB 根本不支持连接。

但是，MongoDB 确实有排序功能。所以你可以运行一个脚本来获取每个用户，按日期对他们进行排序，然后删除旧的。

另外，请不要让您覆盖该`_id`字段。它不必*是*. `ObjectId()`根据您的描述，您有一个独特的`user_name`，那么为什么不简单地将其用作`_id`？

# javascript - 使用 javascript 和 jquery 从 JSON 向 HTML5 音频播放器添加下一个和上一个按钮

> ID：11035612
> 
> 赞同：2
> 
> 时间：2012-06-14T14:46:20.323
> 
> 标签：javascript, jquery, json, html

我正在构建一个需要下一个和上一个按钮的音乐播放器。我的播放列表作为 JSON 对象从我的数据库返回。我遇到的问题是让下一个和上一个按钮工作。我[用代码创建了一个 jsFiddle](http://jsfiddle.net/jsledervenson/YTKWL/6/)。有人知道如何使下一个和上一个按钮起作用吗？

更新：

这个问题更多地涉及如何获取 JSON 数组中的下一个先前值。我真的只需要在 JSON 数组中显示下一首和上一首歌曲的名称。

标记：

```
<a id="prev-bt" href="#">
<div class="player-musicnav-rw-column1">
    <ul class="musicnav-rw">
        <li class="rw"></li>
    </ul>
</div></a>

<audio id="audio-player" name="audio-player" src="" ></audio>

<a id="next-bt" href="#">
<div class="player-musicnav-ff-column3">
    <ul class="musicnav-ff">
        <li class="ff">NEXT</li>
    </ul>
</div>
</a>

<a id="prev-bt" href="#">
<div class="player-musicnav-ff-column3">
    <ul class="musicnav-ff">
        <li class="ff">PREV</li>
    </ul>
</div>
</a>

<br/>
<br/>
<div id="player-digital-title">
</div>
<br/>
<br/>
<a href="#" id='player-handwriting-title'></a>​ 
```

代码：

```
var whichsong = 0;
$(document).ready(function() {
    $("#play-bt").click(function() {
        $("#audio-player")[0].play();
    })

    $("#pause-bt").click(function() {
        $("#audio-player")[0].pause();
        $("#message").text("Music paused");
    })

    $("#stop-bt").click(function() {
        $("#audio-player")[0].pause();
        $("#audio-player")[0].currentTime = 0;
    })

    $('#player-handwriting-title').click(function() {
        $('#player-digital-title').html($(this).html());
    });
    $("#next-bt").click(function() {
        $("#audio-player")[0].pause();
        $("#audio-player")[0].src = '';
        whichsong++;
        if (whichsong == treeObj.root.length) {
            whichsong = 0;
        }
        $("#audio-player")[0].src = treeObj.root[whichsong];
        if (playing) {
            $("#audio-player")[0].play();
        }
    })
    $("#prev-bt").click(function() {
        $("#audio-player")[0].pause();
        $("#audio-player")[0].src = '';
        whichsong++;
        if (whichsong == treeObj.root.length) {
            whichsong = 0;
        }
        $("#audio-player")[0].src = treeObj.root[whichsong];
        if (playing) {
            $("#audio-player")[0].play();
        }
    })
});

$(document).ready(function() {

    var treeObj = {
        "root": [{
            "id": "1",
            "trackName": "Whippin Post"},
        {
            "id": "2",
            "trackName": "Sweet Caroline"},
        {
            "id": "3",
            "trackName": "Tears in Heaven"},
        {
            "id": "4",
            "trackName": "Ain't She Sweet"},
        {
            "id": "5",
            "trackName": "Octopus' Garden"},
        {
            "id": "6",
            "trackName": "Teen Spirit"},
        {
            "id": "7",
            "trackName": "Knockin on Heaven's Door"}]
    };

    var $ul = $("<ul></ul > ");
    $.each(treeObj.root, function(i, v) {
        $ul.append(
        $(" < li > < /li>").append($("<a></a > ").attr({
            "
href ": v.id,
            "
data - file ": v.trackFile
        }).html(v.trackName)));
    });
    $("#player - handwriting - title ").empty().append($ul);

    $("#player - handwriting - title a ").click(function() {
        var name = $(this).html(),
            filename = $(this).attr("
data - file ");
        filename2 = "
upload - form / upload / " + filename;
        $('#player-digital-title').html($(this).html());

        document.getElementById('audio-player').src = filename2;
        $("#audio - player ")[0].play();
        return false;
    });
});​ 
```

我想我已经很接近了，但我似乎无法让它发挥作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T15:26:29.427

在交换 src 之后和执行 .play() 之前，您需要对音频元素执行 .load()。但除此之外，代码似乎被破坏了（你不需要 jsfiddle 上的 javascript 字段上的脚本标签，当删除它们时，一切都会中断）:(

也许您可以尝试使用 jPlayer 来完成这项工作：http: [//jplayer.org/](http://jplayer.org/)

另外，请看这里：[http](http://www.longtailvideo.com/html5/loading/) ://www.longtailvideo.com/html5/loading/ 查看源代码并查看 setSrc 函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-24T17:00:42.570

似乎有人已经弄清楚它是如何在[这里](http://jonhall.info/examples/html5_audio_playlist_example.html)完成的。

他们也很友好地对用于完成此操作的方法进行了详尽的审查：http: [//jonhall.info/how_to/create_a_playlist_for_html5_audio](http://jonhall.info/how_to/create_a_playlist_for_html5_audio)

他的方法首先将所有轨道加载到一个数组中：

```
tracks = [
    {"track":1,"name":"Happy Birthday Variation: In the style of Beethoven","length":"00:55","file":"01_Happy_Birthday_Variation_In_The"},
    {"track":2,"name":"Wedding March Variation 1","length":"00:37","file":"02_Wedding_March_1"},
    {"track":3,"name":"Happy Birthday Variation: In the style of Tango","length":"01:05","file":"03_Happy_Birthday_Variation_In_The"},
    {"track":4,"name":"Wedding March Variation 2","length":"00:40","file":"04_Wedding_March_2"},
    {"track":5,"name":"Random Classical","length":"00:59","file":"05_AFI_com"}
] 
```

“下一个”按钮使用当前曲目在数组中的索引前进曲目以供参考：

```
btnNext = $('#btnNext').click(function() {
    if((index + 1) < trackCount) {
        index++;
        loadTrack(index);
        if(playing) {
            audio.play();
        }
    } else {
        audio.pause();
        index = 0;
        loadTrack(index);
    }
}) 
```

使用一个函数将音频元素的源属性替换为新轨道：

```
loadTrack = function(id) {
    $('.plSel').removeClass('plSel');
    $('#plUL li:eq(' + id + ')').addClass('plSel');
    npTitle.text(tracks[id].name);
    index = id;
    audio.src = mediaPath + tracks[id].file + extension;
} 
```

# javascript - 在javascript中为几个页面设置cookie

> ID：11035613
> 
> 赞同：0
> 
> 时间：2012-06-14T14:46:22.103
> 
> 标签：javascript

我有两页。example.com/php.com 和 example.com。

我使用这个函数来设置一个页面：

```
function setCookie(c_name,value,exdays)
{
                var exdate=new Date();
                exdate.setDate(exdate.getDate() + exdays);
                var c_value=escape(value) + ((exdays==null) ? "" : "; expires="+exdate.toUTCString());
                document.cookie=c_name + "=" + c_value +" path=/";
  } 
```

但是，我想做的是在设置之前删除所有 cookie...所以我使用这个：...

```
function deleteAllCookies() {
var cookies = document.cookie.split(";");

for (var i = 0; i < cookies.length; i++) {
    var cookie = cookies[i];
    var eqPos = cookie.indexOf("=");
    var name = eqPos > -1 ? cookie.substr(0, eqPos) : cookie;
    document.cookie = name + "=;expires=Thu, 01 Jan 1970 00:00:00 GMT";
}
} 
```

然后每当我在某个页面上......我执行这两个功能，一个接一个。

```
 eraseCookie('user_details');
         setCookie('user_details',document.referrer,365); 
```

问题是 cookie 从未设置过..我想知道为什么..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T15:19:36.633

尝试使用这个：[https ://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)

简单而优雅，总能完成工作。

# c# - Asp.net c# sql server 读取块中的二进制sql字段数据

> ID：11035614
> 
> 赞同：2
> 
> 时间：2012-06-14T14:46:29.777
> 
> 标签：c#, asp.net, sql-server, sql-server-2008

在我的数据库中，我们有一个 varbinary 字段，它以字节为单位存储文件内容。

由于文件很大并且一次读取所有内容会导致超时，所以我想读取块中的数据，就像我们在 sql 中具有写入函数来使用块写入数据一样。

请提出任何想法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T06:48:52.897

要通过一个简单的 . 来做到这一点`SELECT ...`，您可以拖放到 ADO.NET，即`ExecuteReader`，指定`CommandBehaviour.SequentialAccess`标志。现在您可以*重复*调用该[`GetBytes`](http://msdn.microsoft.com/en-us/library/system.data.idatarecord.getbytes.aspx)方法将**顺序**块读入缓冲区。例如：

```
byte[] buffer = new byte[8040];
int bytes;
long offset = 0;
while((bytes = (int)reader.GetBytes(col, offset, buffer, 0, buffer.Length)) >0) {
    // TODO: do something with `bytes` bytes from `buffer`
    offset += bytes;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T14:54:07.123

你看过`FILESTREAM`数据类型吗？

有关如何操作的更多信息[http://weblogs.asp.net/aghausman/archive/2009/03/16/saving-and-retrieving-file-using-filestream-sql-server-2008.aspx](http://weblogs.asp.net/aghausman/archive/2009/03/16/saving-and-retrieving-file-using-filestream-sql-server-2008.aspx)

# git - 忽略目录下的所有文件类型 .gitignore

> ID：11035618
> 
> 赞同：4
> 
> 时间：2012-06-14T14:46:43.517
> 
> 标签：git

我试图以递归方式忽略目录中的所有某种类型的文件。例如，如果我有文件夹 build 并且它下面是其他文件夹，请说：

```
-建造
\-文件夹 1
|-文件夹2
|-文件夹3

```

我将如何删除构建下每个目录中的所有 .class 文件？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T14:49:36.963

`.gitignore`在构建目录中创建一个文件并放入`*.class`其中。[您可以在此处](https://help.github.com/articles/ignoring-files)阅读有关 Git Ignore 文件的更多信息。

如果`.class`文件已经被跟踪，那么您需要删除这些文件，以便 git 不会跟踪它们。`git rm --cached '*.class'`将导致文件停止被跟踪，但将它们保留在本地文件系统中。

# javascript - 使用 javascript 验证公共 Google 日历 url

> ID：11035619
> 
> 赞同：1
> 
> 时间：2012-06-14T14:46:43.870
> 
> 标签：javascript, google-calendar-api

我有一个运行 FullCalender 的多个用户访问的应用程序。我让用户可以选择将他们的 FullCalender 与他们的 Google 日历同步。如果他们选择与 Google 同步，我会要求用户输入他们的公共 Google 日历网址。用户提交表单后，我想使用 javascipt 验证 google 日历 Url。如果用户输入的 url 不存在或 url 不公开，我想提醒用户他们提供的 url 无效或私有。验证功能的 javascript 代码是什么？

谢谢..

# reporting-services - SSRS：仅显示与矩阵行组关联的列

> ID：11035622
> 
> 赞同：1
> 
> 时间：2012-06-14T14:46:47.870
> 
> 标签：reporting-services, ssrs-tablix

我正在尝试使用矩阵创建一个报告，该报告仅显示相关行组的列。

例如，我有一个软件，它允许系统用户定期“取样”，这些样本存储在数据库中。此数据的存储方式是按人名分组。

报告的格式是这样的。

```
Person  Item    TimeStamp1 TimeStamp2 
John    Item1   Value1-1   Value1-2   
John    Item1   Value2-1   Value2-2   
John    Item1   Value3-1   Value3-2   
--PageBreak--
Person  Item    TimeStamp1 TimeStamp2 
Steve   Item1   Value1-1   Value1-2   
Steve   Item1   Value2-1   Value2-2   
Steve   Item1   Value3-1   Value3-2 
```

发生的情况是我得到了换行符，但史蒂夫的列出现在约翰和史蒂夫的约翰，就像这样。

```
Person  Item    TimeStamp1 TimeStamp2 SteveTime1 SteveTime2
John    Item1   Value1-1   Value1-2   
John    Item1   Value2-1   Value2-2   
John    Item1   Value3-1   Value3-2   
--PageBreak--
Person  Item    JohnTime1  JohnTime1 TimeStamp1 TimeStamp2 
Steve   Item1                        Value1-1   Value1-2   
Steve   Item1                        Value2-1   Value2-2   
Steve   Item1                        Value3-1   Value3-2 
```

我认为添加基于用户组的分页符会奏效，但会保留额外的列。

有没有办法只为页面上的关联组显示列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T09:22:16.353

我假设在您的问题中，您的意思是第一个“ `TimeStamp1`”实际上与“ `JohnTime1`”相同，对吗？

不要认为你可以在矩阵中轻松做到这一点，如果有的话。它可能涉及对时间戳的排名进行分组，并在行组中显示该排名的时间戳。

不过有一个更简单的解决方案。我的建议是执行以下操作：

*   将矩阵嵌套在列表中
*   该列表将迭代不同的人/项目组合（或只是人，取决于您的需要）
*   将矩阵的`PageBreak`属性设置为`Start`
*   矩阵在人员/项目上有行组
*   矩阵在时间戳上有列组
*   值（`Value1-1`等）作为数据

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-29T14:35:53.890

有几种方法可以做到这一点——我个人会在查询中引入一个联合，所以 JohnTime 和 SteveTime 都映射到 TimeStamp。

有时这是不可能的，或者证明很困难（名称数量的增加使这不切实际），在这种情况下，您可以在列可见性上放置一个公式，该公式仅在列名称正确时才显示列，即 TimeStamp1 和 TimeStamp2。我不确定这是否会减慢报告速度，如果它在关闭可见性之前计算内容。

无论如何，希望这会有所帮助！

# apache - .htaccess 规则顺序

> ID：11035624
> 
> 赞同：0
> 
> 时间：2012-06-14T14:46:50.200
> 
> 标签：apache, .htaccess, mod-rewrite

我有一个让我困惑的问题。我的 .htaccess 文件中有两条规则，一条应处理对一个 url 路径的请求，另一条应处理另一条路径的请求。第二条规则比第一条更普遍。我期待第一个捕获它的实例并且 [L] 停止规则处理，但是一切都落入第二个规则并被定向到错误的页面。不应该在适用的情况下应用第一条规则，然后停止规则处理吗？

以下是它们出现的两条规则：

```
## Path 1 ##
RewriteCond %{REQUEST_URI} ^directory/.*-([0-9]+)/?$
RewriteRule ^directory/.*-([0-9]+)/?$ directory/page.php?id=$1 [L]

## Path 2 ##
RewriteCond %{REQUEST_URI} ^.*-([0-9]+)/?$
RewriteRule ^.*-([0-9]+)/$ page.php?id=$1 [L] 
```

也许我遗漏了一些明显的东西，但据我所知，第一条规则（如果满足条件）将被应用，然后规则处理将停止。

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T14:48:52.003

您实际上不需要`RewriteCond`指令，因为`RewriteRule`模式已经暗示了它们。这在我的测试中有效：

```
## Path 1 ##
RewriteRule ^directory/.*-([0-9]+)/?$ /directory/page.php?id=$1 [L]

## Path 2 ##
RewriteRule ^.*-([0-9]+)/$ /page.php?id=$1 [L] 
```

如果由于某种原因您仍然需要`RewriteCond`指令，请记住`%{REQUEST_URI}`实际上以斜杠开头，并且您必须匹配它。

# javascript - 为什么我不能 appendChild 到指定的 DIV？

> ID：11035632
> 
> 赞同：0
> 
> 时间：2012-06-14T14:47:09.820
> 
> 标签：javascript

在某些情况下，我可以使用 appendChild() 添加到 div，但在其他情况下它不起作用，我试图了解原因：

**作品：**我有其他代码示例，其中类似以下代码的内容可以正常工作：

```
function fnAppend(){
   var oNewNode = document.createElement("LI");
   oList.appendChild(oNewNode);
   oNewNode.innerText="List node 5";
} 
```

**不起作用：**我知道这是一个完全不同的例子，但我认为差异是微妙的。我正在从我正在从事的现有项目中提取此代码，因此无论如何我都无法更改**FieldSet 函数**，而是试图了解如何使其工作。

```
<html>
    <head>
        <script type="text/javascript">     
        function Fieldset() {

            this.id = "";
            this.content = document.createElement("DIV");
            this.content.id = "content";
            this.title = "Title";

            this.getFieldset = function() {
                var div = document.createElement("DIV");
                div.id = this.id;
                var span = document.createElement("SPAN");
                //var fieldset = document.createElement("DIV");
                //fieldset.id = "fieldset";
                var header = document.createElement("DIV");
                header.id = "header";
                span.appendChild(document.createTextNode(this.title));
                header.appendChild(span);
                div.appendChild(header);
                div.appendChild(this.content);
                //div.appendChild(fieldset);

                return div;
            }
        }

        var fieldset = new Fieldset();
        fieldset.id = "newid";
        fieldset.title = "new title";

        org_div1.appendChild(fieldset.getFieldset());

        </script>
    </head>
    <body onload="fieldset()">
        <div id='org_div1'> The text above has been created dynamically.</div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T02:21:28.700

问题出在包含`onload="fieldset()"`. `fieldset`是对象，不是函数，所以不能直接执行。

您可以通过将要运行的代码包装在函数中来获得目标，如下所示：

```
function createFieldset () {
    var fieldset = new Fieldset();
    fieldset.id = "newid";
    fieldset.title = "new title";

    org_div1.appendChild(fieldset.getFieldset());
} 
```

然后，从 body 标签执行这个函数，如下所示：

```
<body onload="createFieldset()"> 
```

需要提到两点：

1.  正如 Steve H. 所提到的，您应该在使用 org_div1 之前对其进行初始化。在所有浏览器中，依赖通过具有该 ID 的全局变量可访问的元素并不是 100% 可靠的
2.  您的代码在静态内容之前插入新内容，而不是之后。你想使用[insertBefore](https://developer.mozilla.org/En/DOM/Node.insertBefore)

鉴于这两点，我会将脚本的最后一行替换为：

```
var org_div1 = document.getElementById("org_div1");
org_div1.parentNode.insertBefore(fieldset.getFieldset(), org_div1); 
```

# mysql - 我的 sql 查询有什么问题？

> ID：11035636
> 
> 赞同：0
> 
> 时间：2012-06-14T14:47:21.663
> 
> 标签：mysql

> **可能重复：**
> [警告：mysql_fetch_array()：提供的参数不是有效的 MySQL 结果](https://stackoverflow.com/questions/795746/warning-mysql-fetch-array-supplied-argument-is-not-a-valid-mysql-result)

```
<?
 $result ="select SQL_CALC_FOUND_ROWS a.*, b.name as brandname ,(case when max(length(d.pcode)) >0  then 1  else 0 end) as eventflag,  min(d.price) as eventprice 
from brand b , product a left join event_product d on a.pcode = d.pcode where a.status != 0 and a.hotflag = 0 and a.bcode = b.code and  a.bcode = '$bcode'
group by a.pcode, a.bcode, a.ocode, a.ccode, a.pname, a.copy, a.etc, a.company, a.origin, a.status, a.opt1name, a.opt1value, a.opt2name, a.opt2value, a.opt3name, a.opt3value, a.gift_name, a.gift_file, a.gift_s_file, a.saleprice, a.saleflag, a.hotflag, a.hotcode, a.hotprice, a.price, a.term, a.point, a.pointflag, a.pointorder, a.content, a.html_check, a.couple1, a.couple2, a.couple3, a.regdate, a.cnt, a.sort, a.delflag, b.name   
order by a.regdate desc limit 12"; 

  $row_object = mysql_query("Select Found_Rows() as rowcount");
  $row_object = mysql_fetch_object($row_object);
  $actual_row_count = $row_object->rowcount;

?>

 SOME HTML 

 <? while ($row = mysql_fetch_array($result)) { ?>

 HTML OUTPUT

 <? } ?> 
```

这表明.. 警告：mysql_fetch_array()：提供的参数不是附近的有效 MySQL 结果资源

```
 <? while ($row = mysql_fetch_array($result)) { ?> 
```

MYSQL 版本是 5.2.3-falcon-alpha。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T14:54:57.197

您将字符串传递给`mysql_fetch_array`而不是 MySQL 资源。你需要做：

```
$res = mysql_query($result); 
```

前

```
<? while ($row = mysql_fetch_array($res)) { ?> 
```

然后，如果`$result`查询正确，您应该得到结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T14:54:56.680

您正在做`mysql_fetch_array($result)`，但`$result`实际上包含您的查询*文本*：

```
$result ="select SQL_CALC_FOUND_ROWS a.*, b.name as brandname ,(case when max(length(d.pcode)) >0  then 1  else 0 end) as eventflag,  min(d.price) as eventprice 
from brand b , product a left join event_product d on a.pcode = d.pcode where a.status != 0 and a.hotflag = 0 and a.bcode = b.code and  a.bcode = '$bcode'
group by a.pcode, a.bcode, a.ocode, a.ccode, a.pname, a.copy, a.etc, a.company, a.origin, a.status, a.opt1name, a.opt1value, a.opt2name, a.opt2value, a.opt3name, a.opt3value, a.gift_name, a.gift_file, a.gift_s_file, a.saleprice, a.saleflag, a.hotflag, a.hotcode, a.hotprice, a.price, a.term, a.point, a.pointflag, a.pointorder, a.content, a.html_check, a.couple1, a.couple2, a.couple3, a.regdate, a.cnt, a.sort, a.delflag, b.name   
order by a.regdate desc limit 12"; 
```

你的实际结果丢失了，因为你已经将它存储在`$row_object`其中，然后你用`mysql_fetch_object()`.

# forms - 复选框在选中时具有一个值，在未选中时具有另一个值

> ID：11035637
> 
> 赞同：0
> 
> 时间：2012-06-14T14:47:22.757
> 
> 标签：forms, post, checkbox, send

我有一个表格：

```
Check this if you Want to receive our newsletter: <input type="checkbox" id="newsletter " name="newsletter"> 
```

我通过 javascript/jquery 函数提交它。

在 js 文件中，在提交函数中，我得到了值：

```
var newsletter = $("#newsletter").val(); 
```

其余的 fom 值与 $.ajax 一起通过 POST 发送到我的 php 文件。

问题是：时事通讯的价值始终处于“开启”状态。

如果选中复选框，如何获取一个值，如果未选中，如何获取另一个值？

非常感谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T14:57:11.770

要探测复选框是打开还是关闭，请使用`.attr('checked')`：

```
var newsletter = $("#newsletter").attr('checked') ? "on" : "off"; 
```

这会给你`'on'`检查和`'off'`未检查。

# c - 从文件中读取多个字符串

> ID：11035645
> 
> 赞同：0
> 
> 时间：2012-06-14T14:47:43.887
> 
> 标签：c, c-strings

无法弄清楚这一点，试图将两个名称 fscanf 成两个 char[]

```
if (numpairs == 2){
            fscanf("%s %s", malename1[MAX], malename2[MAX]); //read in names 
            printf("%s %s", malename1[MAX], malename2[MAX]); //print out names 
```

这是它崩溃并给我“警告：警告：从不兼容的指针类型传递'fscanf'的参数1

编辑： MAX 定义为 20，而 malename1[MAX+1] malename2[MAX+1] （+1 表示 null）

编辑：我已经读到了一些工作，怎么能占一个空间来结束malename1的读入？我正在阅读 Chris 的 malename1 和 Ryan 的 malename2 但对于 malename1 它扫描 ChrisRyan

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:49:57.790

的第一个参数`fscanf()`是 a `FILE*`，而不是 a `char*`。

假设您打算使用`scanf()`，代码试图将 a`char`视为 a `char[]`（假设`malename1`并`malename2`具有 type `char[]`，如前所述）。改成：

```
scanf("%s %s", malename1, malename2);
printf("%s %s", malename1, malename2); 
```

或者如果`fscanf()`：

```
fscanf(fp, "%s %s", malename1, malename2); /* where 'fp' is a valid 'FILE*'. */ 
```

请注意，您还可以添加要读取的最大长度以防止缓冲区溢出：

```
fscanf(fp, "%20s %20s", malename1, malename2); /* Read max of 20 chars. */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T16:28:08.540

如果`malename1`和`malename2`是类型的字符串`char *`。那么所需的语句应该是：

```
fscanf(fp, "%s %s", malename1, malename2); //fp is file pointer 
```

[http://www.cplusplus.com/reference/clibrary/cstdio/fscanf/](http://www.cplusplus.com/reference/clibrary/cstdio/fscanf/)

# ruby-on-rails - 在保存和验证之前添加成形而不妨碍“验证？”

> ID：11035646
> 
> 赞同：1
> 
> 时间：2012-06-14T14:47:43.833
> 
> 标签：ruby-on-rails, ruby-on-rails-3, validation, activerecord, callback

我有一个`before_validation`重新格式化其中一个条目的回调。我需要它在验证之前运行，以确保格式化的输出被正确解析。但据我了解，每次我打电话`valid?`检查数据是否正常时，都会重新格式化该条目。我可以用另一种方式做到这一点，因为`valid?`我只想检查所有字段是否有效并且不更改某些内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T15:04:34.480

这看起来和这个很相似：[Rails model validation on create and update only](https://stackoverflow.com/questions/1393698/rails-model-validation-on-create-and-update-only)

你可以做

```
before_validation(:on => :create) do
  reformat #method call, not a symbol
end
before_validation(:on => :update) do
  reformat #method call, not a symbol
end 
```

但是当我打电话时它仍然为我运行`valid?`。不知道为什么，因为那不是在创建或更新的上下文中，所以我觉得 Rails 在这种情况下对我们撒谎。

如果你能把它变成 a `before_save`，那么它应该可以工作，因为它在验证之后运行。你说你需要验证重新格式化时它仍然可以，所以也许添加一个新方法来验证重新格式化，然后做

```
before_save :reformat, :validate_reformatting 
```

或在用于重新格式化的方法末尾添加完整性检查。

# codeigniter - 重定向不起作用

> ID：11035647
> 
> 赞同：-1
> 
> 时间：2012-06-14T14:47:50.433
> 
> 标签：codeigniter, jquery-mobile

我正在使用 CodeIgniter 构建我的网站的 jquery 移动版本。但是我的重定向有问题。

例如：我在页面«listComment»上，我想添加评论。当我添加它时，函数« AddComment » 被启动并且在这个函数中我被重定向到« listComment »。但我不知道为什么我在页面上：www.mysite.com/mycontroller/AddComment 而不是 www.mysite.com/mycontroller/listComment。我看不到添加的评论，如果我刷新我有很多错误，因为我不在好页面上。

我真的希望有人可以帮助我，我不明白为什么重定向在我的 Iphone 上不起作用，当我在我的电脑上尝试移动版本时它起作用。

这是我使用的代码，但我不知道问题出在哪里，因为代码在我的计算机上运行良好：

```
<?php     function add_comment_unite()
{
    $data['users_online'] = $this->get_users_online();
    $data['uniteName'] = $this->uniteName();
    $data['numberInvit'] = $this->numberInvit();
    $data['friends'] = $this->get_friends_unite();

    $this->form_validation->set_rules('texte_comment_unite','Commentaire','trim|required|xss_clean');

    if($this->form_validation->run())
    {
        $texte_comment_unite = $this->input->post('texte_comment_unite');
        $id_space_unite = $this->input->post('id_news_u');
        $id_membre = $this->session->userdata('id_membre');
        $id_unite = $this->session->userdata('id_unite');

        $data = array(
            'texte_comment_unite'=>$this->input->post('texte_comment_unite'),
            'id_space_unite'=>$this->input->post('id_news_u'),
            'id_membre'=>$this->session->userdata('id_membre'),
            'id_unite'=>$this->session->userdata('id_unite'),
        );

        $this->unite_model->add_comment_unite_model($data);

        redirect('unite/get_news_unite');
    }
    else
    {
        $data['friends'] = $this->get_friends_unite();
        $data['users_online'] = $this->get_users_online();
        $data['uniteName'] = $this->uniteName();
        $data['numberInvit'] = $this->numberInvit();

        $layout_network['contenu'] = $this->load->view('espace_unite', $data, TRUE);
        $this->load->view('layout_network',$layout_network);
    }   
} ?> 
```

在我看来，当我提交表单时，我调用了这个函数。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T22:20:31.093

你试过这个吗？

```
 redirect('unite/get_news_unite', 'refresh'); 
```

# cakephp - CakePHP htmlhelper 链接方法省略了请求 URL 的 id 参数

> ID：11035649
> 
> 赞同：0
> 
> 时间：2012-06-14T14:47:56.877
> 
> 标签：cakephp, html-helper

我的视图包含一个用于更改页面语言的链接。索引，添加页面都很好。但是当涉及到单个文章的“编辑”或“查看”页面时，在 URL 的末尾有一个 ID 号，这个数字在这个链接上以某种方式被省略了。链接变成

```
http://www.xxxxxx.com/index.php/categories/view/lang:chi 
```

很明显，身份证号码不见了。链接应该是这样的

```
http://www.xxxxxx.com/index.php/categories/view/5/lang:chi 
```

在视图文件中生成链接的代码是这样的

```
$this->Html->link($language, array('lang' => $code)); 
```

我不知道为什么只有最后一个 ID 号的 URL 有这样的问题。我使用了 bake 所以控制器视图操作是这样的：

```
 public function view($id = null) {
            $this->Category->id = $id;
            if (!$this->Category->exists()) {
                    throw new NotFoundException(__('Invalid category'));
            }
            $this->set('category', $this->Category->read(null, $id));
    } 
```

有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T15:14:20.777

如果你没有在链接数组中指定 id，它将不会被使用。如果省略它们，则添加的唯一“魔术”是控制器和动作。

创建链接时需要传递 id：

```
$this->Html->link($language, array('lang' => $code, $id)); 
```

# javascript - 如何使用 jQuery 使 div 的左边距 = 宽度的一半？

> ID：11035652
> 
> 赞同：1
> 
> 时间：2012-06-14T14:48:02.913
> 
> 标签：javascript, jquery, css

我想找到一个 div 标签的宽度

然后将它的 margin-left 设置为该宽度的一半

使用jQuery。

谢谢！！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-14T14:53:01.413

尝试如下，

```
$('#divID').css('marginLeft', function() { 
    return $(this).width()/2;
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T14:50:01.800

```
$('div').css({'marginLeft' : $('div').width()/2}); 
```

**[现场演示](http://jsfiddle.net/loktar/HM4K4/)**

**纯JS**

```
var div = document.getElementsByTagName('div')[0];
div.style.marginLeft = div.offsetWidth/2 +'px'; 
```

**[纯 JS 演示](http://jsfiddle.net/loktar/L5JZa/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T14:58:22.563

```
$('div.foo').css('margin-left', $('div.foo').width()/2 ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T14:49:48.683

```
var elem = $('#divID');
elem.css('margin-left',elem.width() / 2); 
```

# java - 从 Java 中的 ArrayList 中获取唯一的元素对

> ID：11035653
> 
> 赞同：4
> 
> 时间：2012-06-14T14:48:04.847
> 
> 标签：java, arraylist

我有一个 ArrayList，其中包含一系列整数（表示另一个 ArrayList 中的索引）。

我需要提取每个唯一对，例如...

```
ArrayList = 1,4,5,7 
```

我需要：

```
1:4
1:5
1:7
4:5
4:7
5:7 
```

实现这一目标的最简单方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T14:50:03.930

将列表转换为`Set`和返回以`List`进行唯一过滤

```
for(int i = 0 ; i < list.size(); i ++){
  for(int j = i+1 ; j < list.size(); j ++){
    System.out.println(list.get(i) + "," + .list.get(j))    
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T14:50:12.213

循环遍历第一个元素的所有可能选择。对于其中的每一个，循环遍历第二个的所有可能选择。

我将把发现的重复部分留给你（提示：使用 a `Set`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T14:50:27.383

您可以有两个索引：一个用于第一部分，另一个用于第二部分。然后用第一种形式从开始到最后一个元素进行迭代，并在内部循环中从第一个到最后一个与第二个形式迭代。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T14:54:06.640

我想知道使用具有单向关系的图结构是否适合这个问题。

这比简单的排列要多得多，但实现起来可能更有趣。特别适用于大量成对。

# windows - 透明 speedbutton 鼠标悬停

> ID：11035654
> 
> 赞同：1
> 
> 时间：2012-06-14T14:48:06.090
> 
> 标签：windows, delphi, background

我有一个很烦人的问题，当form的transparent属性为true时，当我将鼠标移到SpeedButton平面上时，出现屏幕背景，好像按钮会更新慢，如果你不明白，我可以制作一段视频。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T18:26:34.337

Flat SpeedButton 是棘手的野兽。除了它们的标题和/或字形之外，它们应该是透明的，直到它们被鼠标悬停或单击“激活”。

现在，如果您将表单变为透明，因为它们获得了表单背景颜色，它们也变得“窗口透明”并且不响应其透明部分上的鼠标事件（就像表单一样）：如果您单击，您真的单击后面是什么。

您的问题是，现在它们不再被鼠标悬停激活，除非您将鼠标正好放在标题或字形上。

一种解决方法是让您的 SpeedButtons 几乎被字形和标题覆盖。

注意：如果 SpeedButtons 本身是透明的，则与“Flat”相关的透明度会有所不同。在这种情况下，它们会显示背景中的任何内容（形状、图像），而常规的仅显示父背景颜色......

# php - 使用 TinyMCE 时未获取 textarea 的 post 值

> ID：11035657
> 
> 赞同：5
> 
> 时间：2012-06-14T14:48:14.863
> 
> 标签：php, jquery, html, tinymce

我在这里使用 TinyMCE 是我的代码：-

```
 tinyMCE.init({
    // General options
    mode : "textareas",
    theme : "advanced"
}); 
```

这是我的html代码：-

```
<textarea name="terms" id="elm1"  rows="15" cols="30" width="100%" ></textarea> 
```

问题是当我做这样的事情时我没有得到这个文本区域的帖子值： -

```
print_r($_POST['terms']); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-15T06:31:51.500

看起来您需要`tinymce.triggerSave()`在提交表单之前立即致电。

# java - 找到移动成本最小化点的算法

> ID：11035659
> 
> 赞同：3
> 
> 时间：2012-06-14T14:48:26.357
> 
> 标签：java, algorithm

有一些 n 个点位于 2d 网格中。要求是将一个项目从所有这些点（n-1 个点）移动到一个点（在 n 个点的集合中），以便将所有项目移动到该点的成本将是最小的。如果有多个这样的点，那么我们可以随机选择任何点。搬家费用计算如下。

**成本计算公式**

> 如果有一个点，则将对象从所有 8 个相邻点`(x,y)`移动所需的成本为 1 个单位`(x,y)``{(x+1,y),(x+1,y+1),(x,y+1),(x-1,y+1),(x,y-1),(x-1,y-1),(x,y-1),(x+1,y-1)}`

有人可以为此建议任何 O(N) 算法吗？我已经尝试过 O(N2) 算法（比如取每一对并计算成本）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T15:04:50.987

听起来您想将所有点移动到“中心”，其中中心被定义为总成本值最小的点。对于三点，我认为答案在三角形的质心附近。质心是我们通过简单地平均所有 3 个 x 值和所有三个 y 值得到的点。

扩大到三分以上，我认为平均分要么是正确答案，要么接近正确答案。如果您使用的是点之间的欧几里得距离公式，那么我相当肯定您所寻求的点只是平均值。但是您正在使用一些修改后的出租车几何形状，这使得 45 度角的计数“少于”应有的值。根据您的定义，从 (0,0) 到 (5,5) 的成本是 5，而不是使用标准几何图形的 5 sqrt(5)（大约多 40%）。但是对于水平或垂直移动，指标是相同的。那么，我的快速猜测与正确答案相差多远？如果您可以对半径进行一些估计，那么我建议使用此算法：

*   计算机平均点（在 O(n) 时间内运行）

    ```
    C = 新点（平均（xVals），平均（yVals））
    ```

*   计算机半径 - 对真实答案与快速欧几里得答案的距离的一些估计。
*   考虑该半径内的所有点，看看它们产生的总成本是否低于 C。

最后一项在 O(r^2) 中运行，只要你能证明 r 远小于 n，你就有一个很好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T16:50:24.243

我的猜测是 O(n) 解决方案是不可能的。如果输入数据集的所有点都近似于一个圆，那么算法似乎必须检查每个点以查看它是否是最佳解决方案。

现在，可能有很好的算法可以及时处理与 n 成比例的“正常”情况。
AO(N log N) 启发式排序点以进行最佳优先搜索似乎很可能。A-star 甚至可能是可能的，但似乎更难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T14:59:36.857

我认为您可以在线性时间内计算 n 个点的质心，然后在线性时间内计算最接近该质心的点。

获得质心：

```
center = points[0];
for (int i=1; i<points.length; ++i) {
  center = massCenter(center, i+1, points[i]);
}

Point massCenter(Point currCent, int weight, Point p) {
  double x = (currCent.x * weight + p.x)/(weight+1);
  double y = (currCent.y * weight + p.y)/(weight+1);
  return new Point(x, y);
} 
```

为了正确计算中心，我为该点假设了一个双坐标。

# cocoa-touch - 如何使核心数据实体不可变？

> ID：11035662
> 
> 赞同：0
> 
> 时间：2012-06-14T14:48:38.923
> 
> 标签：cocoa-touch, cocoa, core-data

是否有使实体不可变的最佳实践？用户在我的应用程序中创建练习，有些人想要一种在文件完成后“锁定”文件的方法。添加“锁定”属性并检查是否设置了属性似乎很荒谬，但这是“方法”吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T16:19:13.763

实际上，添加锁定/不可变属性是一个非常合适的解决方案。我最近使用了这样的方案，使用锁定的 NSDate 属性。所以我知道实体何时被锁定。

据我所知，Core Data 本身并没有这样的东西。

顺便说一句，Core Data 本身的锁定方案会非常复杂，因为涉及到关系。如果删除了锁定实体的关系中的实体部分怎么办？删除被拒绝？或者即使实体不是，关系也是可变的？我认为没有普遍的答案。

# c# - DelegatingHandler 应该如何进行异步调用（ASP.NET MVC Web API）？

> ID：11035663
> 
> 赞同：13
> 
> 时间：2012-06-14T14:48:43.367
> 
> 标签：c#, asp.net, asp.net-web-api

我很乐意在调用内部处理程序的 SendAsync() 之前执行同步工作，并在内部处理程序通过完成完成后执行同步工作。例如：

```
protected override Task<HttpResponseMessage> SendAsync( 
    HttpRequestMessage request, CancellationToken cancellationToken) 
{ 
    // do some sync work before inner handler here 

    var sendTask = base.SendAsync(request, cancellationToken); 
    return sendTask.ContinueWith( 
        task => { // do some sync work afterwards here }); 
} 
```

但是，我现在需要从委托处理程序中调用 IO 绑定操作。IO 绑定操作已经封装为`Task<bool>`. 我需要使用结果来确定是否继续到内部处理程序。

一个示例是进行网络调用以授权请求。我必须这样做才能与现有系统集成。总的来说，我认为这个问题有有效的场景，它应该有一个可行的解决方案。

在这种情况下实现SendAsync的正确方法是什么，以便我异步执行IO绑定的Task，然后继续异步执行内部处理程序？

关键是我想确定请求线程在任何时候都不会被阻塞。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-18T10:13:23.723

好的，我想我已经破解了。我用一个身份验证场景来说明这一点：我想异步地对用户进行身份验证，并使用结果来决定是返回 401 还是继续使用消息处理程序链。

中心问题是，在获得异步身份验证的结果之前，您不能调用内部处理程序 SendAsync()。

对我来说，关键的见解是使用 TaskCompletionSource (TCS) 来控制执行流程。这使我能够从 TCS 返回任务并在我喜欢的时候在其上设置结果 - 最重要的是延迟调用 SendAsync() 直到我知道我需要它。

因此，我设置了 TCS，然后启动了一项任务来进行授权。在继续这个，我看看结果。如果获得授权，我将调用内部处理程序链并附加一个继续*（避免任何线程阻塞）*以完成 TCS。如果身份验证失败，我只需在那里完成 TCS，然后使用 401。

这样做的结果是两个异步任务轮流执行，没有任何线程阻塞。我对此进行了负载测试，它似乎工作得很好。

不过，在 .NET 4.5 中，使用 async/await 语法的情况要好得多……虽然 TCS 的方法仍然基本上是在幕后进行的，但代码要简单得多。

享受！

第一个片段基于 .NET 4.0 和 Web API Beta - 第二个片段基于 .NET 4.5/Web API RC。

```
protected override Task<HttpResponseMessage> SendAsync(
    HttpRequestMessage request, CancellationToken cancellationToken)
{
    var taskCompletionSource = new TaskCompletionSource<HttpResponseMessage>();

    // Authorize() returns a started
    // task that authenticates the user
    // if the result is false we should
    // return a 401 immediately
    // otherwise we can invoke the inner handler
    Task<bool> authenticationTask = Authorize(request);

    // attach a continuation...
    authenticationTask.ContinueWith(_ =>
    {
        if (authenticationTask.Result)
        {
            // authentication succeeded
            // so start the inner handler chain
            // and write the result to the
            // task completion source when done
            base.SendAsync(request, cancellationToken)
                .ContinueWith(t => taskCompletionSource.SetResult(t.Result));
        }
        else
        {
            // authentication failed
            // so complete the TCS immediately
            taskCompletionSource.SetResult(
                new HttpResponseMessage(HttpStatusCode.Unauthorized));
        }
    });

    return taskCompletionSource.Task;
} 
```

这是一个 .NET 4.5 / Web API Release Candidate 版本，它使用新的 async/await 语法更加性感：

```
protected override async Task<HttpResponseMessage> SendAsync(
    HttpRequestMessage request, CancellationToken cancellationToken)
{
    // Authorize still has a Task<bool> return type
    // but await allows this nicer inline syntax
    var authorized = await Authorize(request);

    if (!authorized)
    {
        return new HttpResponseMessage(HttpStatusCode.Unauthorized)
        {
            Content = new StringContent("Unauthorized.")
        };
    }

    return await base.SendAsync(request, cancellationToken);
} 
```

# php - 变量不存在

> ID：11035666
> 
> 赞同：1
> 
> 时间：2012-06-14T14:48:49.837
> 
> 标签：php, variables

我有以下问题。我有声明变量的文件 variable.php：

```
<?php
  $animal = "cat";
?> 
```

和文件 b.php，我想在函数中使用这个变量

```
<?php
  include_once 'a.php';

  function section()
  {
     $html = "<b>" . $animal "</b>";
     return $html;
  }
?> 
```

和文件 c.php 我正在使用我的函数`section()`

```
<?php
  require_once 'b.php';
  echo section();
?> 
```

我有一条错误消息，即`variable $animal does not exist in file b.php`. 为什么以及我可以在这里做什么？

最好的问候， 达格纳

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T14:52:08.217

变量具有**函数作用域**。您没有在函数`$animal` *内*`section`声明变量，因此它在函数内不可用`section`。

将其传递给函数以使值在那里可用：

```
function section($animal) {
   $html = "<b>" . $animal "</b>";
   return $html;
} 
```

* * *

```
require_once 'a.php';
require_once 'b.php';
echo section($animal); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T14:50:37.887

发送`$animal;`到函数：

```
function section($animal)
  {
     $html = "<b>" . $animal "</b>";
     return $html;
  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T14:52:19.697

```
include_once 'a.php'; 
```

应该

```
include_once 'variable.php'; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T14:56:44.017

另一种选择是使用类，例如：

```
class vars{
  public static $sAnimal = 'cat';
} 
```

然后在你的函数中，使用该变量：

```
public function section()
{
  return "<B>".vars::$sAnimal."</b>";
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T14:59:51.523

如果它是一个常量，你可以使用 PHP 的[定义](http://php.net/manual/en/function.define.php)函数。

一个.php：

```
 <?php
    define("ANIMAL", "cat");
 ?> 
```

b.php：

```
 <?php
    include_once 'a.php';
    function section() {
      $html = "<b>" . ANIMAL . "</b>";
      return $html;
    }
 ?> 
```

# eclipse - 与 Eclipse 不同的行为

> ID：11035668
> 
> 赞同：0
> 
> 时间：2012-06-14T14:48:52.287
> 
> 标签：eclipse, maven, maven-3

目前我正在开发一个包含一些子项目的构建脚本。问题是使用 eclipse 的构建总是失败。在这句话下面，您可以阅读 Eclipse 的注销：

```
[INFO] Reactor Summary:
[INFO] 
[INFO] CQ5 deployment Plugin ............................. SUCCESS [2.031s]
[INFO] Set up enviroment ................................. SUCCESS [0.000s]
[INFO] Hotfix packages for Communiqué .................... SUCCESS [0.406s]
[INFO] Archiva servlet ................................... SUCCESS [0.375s]
[INFO] Ldap Client ....................................... SUCCESS [0.422s]
[INFO] Hibernate ......................................... SUCCESS [7.719s]
[INFO] Main .............................................. SUCCESS [0.015s]
[INFO] Base .............................................. SUCCESS [0.000s]
[INFO] Core .............................................. FAILURE [1.578s]
[INFO] UI ................................................ SKIPPED
[INFO] Commons ........................................... SKIPPED
[INFO] Core .............................................. SKIPPED
[INFO] UI ................................................ SKIPPED
[INFO] Internet .......................................... SKIPPED
[INFO] Core .............................................. SKIPPED
[INFO] UI ................................................ SKIPPED
[INFO] Infothek .......................................... SKIPPED
[INFO] Core .............................................. SKIPPED
[INFO] UI ................................................ SKIPPED
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 13.390s
[INFO] Finished at: Thu Jun 14 16:37:31 CEST 2012
[INFO] Final Memory: 17M/59M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.felix:maven-scr-plugin:1.7.2:scr (generate-scr-scrdescriptor) on project core: Execution generate-scr-scrdescriptor of goal org.apache.felix:maven-scr-plugin:1.7.2:scr failed: An API incompatibility was encountered while executing org.apache.felix:maven-scr-plugin:1.7.2:scr: java.lang.UnsupportedClassVersionError: Bad version number in .class file
[ERROR] -----------------------------------------------------
[ERROR] realm =    plugin>org.apache.felix:maven-scr-plugin:1.7.2
[ERROR] strategy = org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy
[ERROR] urls[0] = file:/c:/Dokumente%20und%20Einstellungen/reporter/.m2/repository/org/apache/felix/maven-scr-plugin/1.7.2/maven-scr-plugin-1.7.2.jar
[ERROR] urls[1] = file:/c:/Dokumente%20und%20Einstellungen/reporter/.m2/repository/org/apache/maven/maven-archiver/2.2/maven-archiver-2.2.jar
[ERROR] urls[2] = file:/c:/Dokumente%20und%20Einstellungen/reporter/.m2/repository/org/codehaus/plexus/plexus-utils/1.0.4/plexus-utils-1.0.4.jar
[ERROR] urls[3] = file:/c:/Dokumente%20und%20Einstellungen/reporter/.m2/repository/junit/junit/3.8.1/junit-3.8.1.jar
[ERROR] urls[4] = file:/c:/Dokumente%20und%20Einstellungen/reporter/.m2/repository/org/codehaus/plexus/plexus-archiver/1.0-alpha-7/plexus-archiver-1.0-alpha-7.jar
[ERROR] urls[5] = file:/c:/Dokumente%20und%20Einstellungen/reporter/.m2/repository/org/apache/felix/org.apache.felix.scr.generator/1.1.2/org.apache.felix.scr.generator-1.1.2.jar
[ERROR] urls[6] = file:/c:/Dokumente%20und%20Einstellungen/reporter/.m2/repository/com/thoughtworks/qdox/qdox/1.12/qdox-1.12.jar
[ERROR] urls[7] = file:/c:/Dokumente%20und%20Einstellungen/reporter/.m2/repository/asm/asm-all/3.1/asm-all-3.1.jar
[ERROR] Number of foreign imports: 1
[ERROR] import: Entry[import  from realm ClassRealm[project>de.xxx.cq5.ldap:Ldap:1.0.0, parent: ClassRealm[maven.api, parent: null]]]
[ERROR] 
[ERROR] -----------------------------------------------------
[ERROR] -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/PluginContainerException 
```

如果我在 dos 提示符下运行构建脚本，它将运行成功。

我正在使用 Eclipse 3.7.1 (Indigeo)。我确保所有子项目都连接到相同的 Java 版本。即使清理工作区并运行`mvn clean`也无济于事。我真的卡住了，所以我希望有人能帮助我吗？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T13:58:39.233

一位外部顾问向我展示了解决方案。

解决方案：标记目标项目并选择“属性”。然后选择“Java Build Path”，然后选择“库”选项卡。在那里我可以看到 Eclipse 使用了 JRE 1.5.0_12。我选择了它并按下了“编辑”按钮，所以确实出现了另一个菜单。有三个单选按钮（'执行环境'，'Alternate JRE'和'Workspace default JRE (jdk1.6.0_16)'。默认是启用第一个选项。启用第三个选项后，我的问题已经消失了。

外部顾问认为这是安装 Eclipse 的时间点的问题。然后将上述 jre 1.5 定义为默认运行时环境。显然 Eclipse 将其视为“默认”版本。很奇怪...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T15:11:13.280

我假设你使用 m2eclipse。如果是这样，也许您使用嵌入式 Maven 实例（请参阅 m2eclipse 首选项），这是您在 Eclipse 之外使用的 Maven 实例之外的另一个版本？

# javascript - Nicescroll 在可拖动的 div 中

> ID：11035671
> 
> 赞同：1
> 
> 时间：2012-06-14T14:49:02.537
> 
> 标签：javascript, jquery, scroll

我用滚动创建了一个可拖动的 div（为了创建滚动，我使用了名为：nicescroll ver. 2.9.2 的 jquery 插件），但是滚动不能正常工作。

一切都很好，直到我将 div 移动到不同的位置。当我移动 div 时，滚动保持在旧位置。

一开始我使用自定义滚动，没有问题。问题是当我使用 nicescroll 插件时。

```
 $(document).ready(function()
  {
    $('#title').hover(function() // when mouse is on the #title do:
      { 
        $('#window').draggable({ disabled: false }); // make window "draggable"
      }, function() // when mouse is out of the #title do:
      { 
        $('#window').draggable({ disabled: true }); // make window "un-draggable" 
      }
    ); // endhover
    $("#window_content").niceScroll({boxzoom:false}); // adding the scroll
  }); // end ready 
```

我的 div 结构是：

```
 <div id="window">
    <div id="title"> </div> <!-- When mouse is on the div window is draggable -->
    <div id="window_content"> 
      This div have a scroll...
    </div> 
  </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T23:03:15.927

我找到了一个结果......在移动 div 之后我必须重新加载滚动，为此我可以使用函数：getNiceScroll().resize()（我没有找到像这样的函数：reload() 或 sth）

最好在移动过程中隐藏滚动，这样您就不会看到移动 div 和重新加载滚动之间的延迟。为了隐藏和显示滚动，我使用了：getNiceScroll().hide() 和 getNiceScroll().show()

代码是：

```
$(document).ready(function()
{
  $('#title').hover(function() // when mouse is on the #title do:
    {
      $('#window_content').getNiceScroll().hide(); //hide scroll
      $('#window').draggable({ disabled: false }); // make window "draggable"
    }, function() // when mouse is out of the #title do:
    { 
  $("#window_content").getNiceScroll().resize();  // preload scroll
      $('#window_content').getNiceScroll().show();  // show scroll
      $('#window').draggable({ disabled: true }); // make window "un-draggable" (turn off the draggable)
  }); // endhover
  $("#window_content").niceScroll({boxzoom:false}); // adding the scroll
}); // end ready 
```

这不是完美的分辨率，因为如果您快速移动 div，您可以在不同的位置看到滚动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T17:21:10.530

摆脱 Nicescroll 并使用 CSS`overflow`属性怎么样？[根据您在http://jsfiddle.net/Hfc6q/1/](http://jsfiddle.net/Hfc6q/1/)上的代码查看此示例。

**jQuery：**

```
 $(document).ready(function()
  {
    $('#title').hover(function() // when mouse is on the #title do:
      { 
        $('#window').draggable({ disabled: false }); // make window "draggable"
      }, function() // when mouse is out of the #title do:
      { 
        $('#window').draggable({ disabled: true }); // make window "un-draggable" 
      }
    ); // endhover
  }); // end ready​ 
```

**CSS：**

```
#window_content
{
   overflow: scroll;
   width: 100px;
   height: 100px;
}

#title { width: 100px; } 
```

您可能还需要设置标题的宽度`div`以匹配 window_content `div`。

# haskell - 是否可以“隐藏”语言扩展？

> ID：11035676
> 
> 赞同：13
> 
> 时间：2012-06-14T14:49:20.307
> 
> 标签：haskell

我已经编写了一个模块，并且为了运行导入模块的主要代码，需要具有语言扩展名`{-# LANGUAGE OverloadedStrings #-}`，或者在编译时需要提供选项。

如果我`{-# LANGUAGE OverloadedStrings #-}`在模块中包含 ，这是无法治愈的，用户仍然需要在她的代码中或编译时执行相同的操作。

有什么办法可以在实际模块中做“某事”，以便从最终用户那里解决这个问题，从而说“隐藏”所需的语言扩展？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-14T14:52:02.597

不，您的库公开了需要使用语言扩展的功能。这是您应该在文档和示例中说明的内容。没有办法在用户代码上打开它。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-14T20:41:30.963

请注意，这`-XOverloadedStrings`不是*必需*的。粗略地说，该扩展所做的只是转换`"I'm a string"`为`fromString "I'm a string"`. 如果没有扩展，用户总是可以自己做同样的事情。

# php - Google MAP Api - 存储地理位置

> ID：11035679
> 
> 赞同：1
> 
> 时间：2012-06-14T14:49:25.767
> 
> 标签：php, google-maps, google-maps-api-3, google-maps-api-2, google-geocoding-api

我可以将来自 Google 地图的地点、业务的地理位置（纬度、经度）存储在数据库中吗？用例是用户应该能够在地图中选择一个位置并将评论添加到我想要存储在数据库中的位置。因此，每次用户搜索位置时，我都可以从本地数据库中获取评论。

谷歌条款说我们不应该存储来自 API 的任何信息，但是如果我们想创建一个基于位置的系统，我们应该使用什么 API？

谷歌的这个教程说关于将信息存储到数据库中，但这会违反谷歌不存储信息的条款。 [https://developers.google.com/maps/articles/phpsqlinfo_v3](https://developers.google.com/maps/articles/phpsqlinfo_v3)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T15:03:43.077

（我不是律师，我没有写或决定他们的使用条款，只有谷歌及其法律管辖区是这方面的最终权威。这个答案是从合理推断的角度来论证的。）

你当然可以这样做。否则，您将无法保留任何东西的位置，这会破坏这种应用程序的想法。

这有两个部分：您是否可以对特定位置进行地理编码和存储，以及您是否可以将特定位置存储到您通过搜索找到的企业或其他地方。

谷歌的条款是你不应该将他们的服务用作万能的地理编码器。只要您将其与他们的地图一起使用，您就可以自由使用地理编码器。

来自[Geocoding API 的文档](https://developers.google.com/maps/documentation/geocoding/)：

> 注意：Geocoding API 只能与谷歌地图一起使用；禁止在未在地图上显示的情况下对结果进行地理编码。有关允许使用的完整详细信息，请参阅[Maps API 服务许可限制条款](https://developers.google.com/maps/terms#section_10_12)。

并来自[Maps API FAQ](https://developers.google.com/maps/faq#geocoder_exists)：

> 请注意适用于地理编码器请求的使用限制，并注意将地理编码器用于获取将使用 Google 地图 API 显示的位置以外的任何目的均违反了服务条款。您可以使用 HTTP 地理编码器对您的 Google Maps API 应用程序之外的地址进行地理编码，以便它们可以被缓存并稍后使用 Google Maps API 之一显示，但使用地理编码网络服务获得的位置可能不会被任何其他应用程序使用，通过其他方式分发或转售。

关于存储例如企业的位置，您必须能够至少暂时存储该位置，以便您可以实现您的应用程序。否则，您的每个搜索查询都必须搜索每个企业的位置，才能从 Google 获取一个新的、未存储在您的数据库中的位置。既然这不可能奏效，那可能不是他们的本意。

我不认为你会越过任何界限，直到谷歌可以争辩说你在他们的数据库中直接出售大量商业地点的信息。在那之前，您更有可能遇到他们的使用限制。

# java - Java 浏览器命令和下载

> ID：11035694
> 
> 赞同：0
> 
> 时间：2012-06-14T14:50:00.023
> 
> 标签：java, browser, download, cloud

因此，我正在开发一个 Java 应用程序，该应用程序必须使用来自基于云的服务器的数据库信息。我认为与其让用户手动下载数据库，不如让这个应用程序能够自动检索这个数据库。问题是我不知道如何或者是否可以在 Java 中做到这一点。我们正在为此进行多种实现，因此我们为每个实现使用不同的服务（iFormBuilder、epicollect 等）。这些服务中的每一个在其 Web 界面上都有一个“下载”按钮，但我不相信除此之外还有任何简单的命令可以检索它们。你会建议什么来解决这个问题？

更新：*叹息*，所以有其他人（我在一个 3 人的团队中）正在研究的那些 api。但是，他们需要购买比我们更高的许可证（5000 美元用于 api 访问？不，谢谢）。所以大多数情况下，我们正在寻找更便宜的解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T11:52:13.130

我当然可以帮助 IFormBuilder。在 IForm 界面中，您可以按住 shift 来显示 XML 提要的 URL。这将返回表中的所有数据以及子表单作为子元素。每条记录都是一个元素，所以 xml 是这样的：

```
<?xml version="1.0" encoding="UTF-8"?>
<_data12345_my_table_name>
<record>
  <ID>12345</ID>
  <PARENT_RECORD_ID>0</PARENT_RECORD_ID>
  <field>value</field>
  <field2>value2</field>
  ...etc...
</record> 
```

每个元素都有一个元素。

不过有一件事 - 注意最后的 <b> ，这仅用于显示目的，在导入数据时应忽略。

据我所知，这不是企业 API 的一部分。

# python - 有人知道 Python 中的 Akando 模块和 Dancer 模块吗？

> ID：11035695
> 
> 赞同：-1
> 
> 时间：2012-06-14T14:50:01.480
> 
> 标签：python, scipy, bioinformatics

我是 Python 新手，得到了**Akando** Module 和**Dancer** Module的任务

我想知道这两个模块是如何工作的，有人知道关于这两个模块的任何参考站点吗？他们似乎在 scipy 之下并且与 Bioinfomatics 相关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T15:01:20.987

基于[本章](http://bit.ly/LbLqAA)，我相信`Akando`并且`Dancer`不是 scipy 的一部分；相反，它们是组合在一起的模块，以支持[Python For Bioinformatics](http://www.amazon.co.uk/Python-Bioinformatics-Bartlett-Biomedical-Informatics/dp/0763751863)一书的示例和帮助读者。

看来您可以从[本书的网站下载](http://www.jblearning.com/catalog/9780763751869/)[示例存档](http://www.jbpub.com/samples/0763751863/Kinser_Applications.zip)。相关文件是和。`pysrc/akando.py``pysrc/dancer.py`

* * *

*`akando`PS我对or一无所知`dancer`。[上面的信息是从谷歌快速搜索](https://www.google.com/search?q=akando%20dancer)中收集到的。*

# ruby - 是否可以在不先获取远程 git repo 的信息的情况下获取它？

> ID：11035703
> 
> 赞同：3
> 
> 时间：2012-06-14T14:50:31.083
> 
> 标签：ruby, git

我正在尝试使用 Ruby 从远程 git 存储库列表中获取各种信息（例如作者、最后提交者、最后提交消息等）。到目前为止，我可以为该任务找到两个 gem，Grit 和 Ruby-git，而 Ruby-git 似乎更擅长处理远程存储库。

但是，我想知道是否可以在不先获取每个 repo 的情况下获取此类信息？我正在处理的列表可能会很长，因此获取所有列表似乎不是一个可行的选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T13:32:39.040

这不是一个完美的解决方案；但如果您只对最新历史感兴趣，它至少会减少传输的数据量。

```
git clone --no-checkout --depth=1 <repository> 
```

（根据需要适配 Ruby）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T15:14:44.830

对于任意存储库，不，但编写将报告维护在专用标签上的钩子很容易——示例钩子发送电子邮件，这是一个简单的更改。

# flash - 攻击者如何绕过 crossdomain.xml

> ID：11035705
> 
> 赞同：4
> 
> 时间：2012-06-14T14:50:43.880
> 
> 标签：flash, cross-domain, uploadify

我不确定我是否理解`crossdomain.xml`正确的用法。我正在使用 Uploadify (2.1.4) — 基于 Flash 的文件上传器。我需要将文件`Domain A`从`Domain B`. Uploadify 由`Domain A`. 要允许 Uploadify flash 插件通信和上传到`Domain B`，我必须`crossdomain.xml`在`Domain B`. 因此，如果 Uploadify 在其白名单中找到一个`crossdomain.xml`文件`Domain B`，则将处理`Domain A`上传到的文件`Domain B`。到目前为止，一切听起来都很好。

但是，我不明白是什么阻止了攻击者在他的计算机上安装的本地网站上构建克隆上传器，然后修改它`etc/hosts`以使本地安装`Domain A`用作域名。现在，攻击者可以将文件上传到`Domain B`，假装`Domain A`并`Domain B`坦率地接受上传，因为它已`Domain A`在 内的白名单中列出`crossdomain.xml`。

的目的是什么`crossdomain.xml`，如果可以像上面那样轻松绕过它？我对此的理解可能完全错误。洞察力会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T15:12:23.010

`crossdomain.xml`无法替代登录系统。它只是告诉 Flash：“嘿，你可以从我的服务器读取（和使用）数据”。

crossdomain.xml**确实很**容易绕过，因此不能将其视为网站的适当安全功能。

因此，总而言之，如果您想确保安全，只需在“DomainB”上实现登录功能。

# jquery - JQuery动态表单——提交同名输入框

> ID：11035710
> 
> 赞同：0
> 
> 时间：2012-06-14T14:50:50.397
> 
> 标签：jquery, post, dynamic, submit, dynamicform

我需要帮助。我正在使用 JQuery 的动态表单插件，每次单击“+”按钮时它都会复制我的输入框但是，当我点击提交按钮时出现问题，我无法通过 $_POST 检索输入框的值，因为它们都是同一个“名字”。

输入框重复时如何更改它们的名称？

HTML：

```
<div id="duplicate3">
        <input id="description" type="text" name = "description"size="40">
        <input id="amount" type="text" name="amount" size="14">
   </div>
        <a href="create.php?state=1" id="plus3" class="ui-state-default ui-corner-all" title="Add">[+]</a>
        <a href="create.php?state=0" id="minus3" class="ui-state-default ui-corner-all"  title="Remove">[-]</a> 
```

这是我的javascript：

```
$(document).ready(function(){

$("#duplicate3").dynamicForm("#plus3", "#minus3",{
limit:10,
createColor: 'yellow',
removeColor: 'red'
}
);

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T15:22:31.320

几个快速循环可以为每个输入添加一个数字：

```
$("input[name^='description']").each(function(index){   
    var id = "description" + (index+1); 
    $(this).attr("id", id);
    $(this).attr("name", id);
});
$("input[name^='amount']").each(function(index){   
    var id = "amount" + (index+1); 
    $(this).attr("id", id);
    $(this).attr("name", id);
}); 
```

这会让你：

```
<div id="duplicate3">
<input id="description1" type="text" name="description1" size="40">
    <input id="amount1" type="text" name="amount1" size="14">
<input id="description2" type="text" name="description2" size="40">
    <input id="amount2" type="text" name="amount2" size="14">
<input id="description3" type="text" name="description3" size="40">
    <input id="amount3" type="text" name="amount3" size="14">
...
</div> 
```

您可以在添加/删除操作之后运行循环，或者您可以在提交表单之前等待并运行它们，如果您出于任何其他原因不需要引用输入。

# android - HTC Desire S 上的 Android Camera PictureCallback 数据似乎已损坏

> ID：11035711
> 
> 赞同：0
> 
> 时间：2012-06-14T14:50:52.897
> 
> 标签：android

我正在使用 PictureCallback 来捕获图像。它工作正常。但在 HTC Desire S 中，它没有返回正确的数据。它返回一个损坏的图像，如下所示

![在此处输入图像描述](../Images/8fb2290443fc5f2f222f8ab5bbbb6718.png)

这是我使用的代码

```
 PictureCallback cameraPictureCallbackJpeg = new PictureCallback() {
            @Override
            public void onPictureTaken(byte[] data, Camera camera) {

                          FileOutputStream outStream = null;
                  try {
                // write to local sandbox file system
                // outStream =
                // CameraDemo.this.openFileOutput(String.format("%d.jpg",
                // System.currentTimeMillis()), 0);
                // Or write to sdcard
                outStream = new FileOutputStream(String.format(
                        "/sdcard/%d.jpg", System.currentTimeMillis()));
                outStream.write(data);
                outStream.close();
                Log.e("error", "onPictureTaken - wrote bytes: " + data.length);
            } catch (FileNotFoundException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            } finally {
            }
    } 
```

我必须告诉你，我已经使用其他方法将数据转换为位图。提前致谢。我被困在这里。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:55:47.853

没有人向你保证图片格式在不同的设备上是相同的。您必须注意相机设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T14:59:24.527

这是因为您没有使用受支持的图像尺寸之一。以下是如何获得这些。

```
Parameters params = camera.getParameters();
List<size> sizes = params.getSupportedPictureSizes(); 
```

编辑：这是您设置图片大小的方式：

```
Camera.Parameters params = camera.getParameters();
params.setPictureSize(int width, int height);
try {
camera.setParameters(params);
} catch (Exception e) {
Log.e(TAG, "set parameters failed");
} 
```

# ruby-on-rails-3 - Rails 3：适应现有 sqlite db 后未定义的方法

> ID：11035713
> 
> 赞同：0
> 
> 时间：2012-06-14T14:50:58.570
> 
> 标签：ruby-on-rails-3, sqlite, methods, undefined, rails-console

在 Rails 控制台中执行 User.first 和 Post.first 工作正常。Post.first.user 工作正常，但 User.first.posts 给了我一个未定义的方法错误

型号：

```
class User < ActiveRecord::Base
    attr_accessible :role :user_email, :user_name

    has_many :posts
end 
```

和

```
class Post < ActiveRecord::Base
    attr_accessible :content, :status, :title, :user_id

    belongs_to :user
    has_many :comments
end 
```

当我创建一个新项目时，一切正常，但在这种情况下，我做了一些不同的事情。我将现有数据库（sqlite）从另一个 Web 应用程序（非 Rails）改编为 Rails。我所做的是重命名列以适应 Rails 约定，以前我使用用户名作为唯一键并使用它来链接到帖子所有者我将列名更改为 user_id 并将所有值更新为相关的用户 ID。我也将列类型和值更改为 int 值。

评论也是如此： Comment.first.post 有效，但 Post.commments 给出了未定义的方法错误。

执行 User.joins(:post(s)) 时，我收到错误“未找到名为‘posts’的关联”，但 Post.joins(:user) 工作正常。

> 编辑：对我感到羞耻 - 我遗漏了我认为不相关的相关信息。
> 
> 无论如何 - 我有一个名为角色的列，所以用户模型有 attr_accessible :role --- 一次 > 我删除了一切都按预期工作。
> 
> 但是，我不明白为什么这会有所作为。这：> [https://github.com/ryanb/cancan/wiki/Role-Based-Authorization](https://github.com/ryanb/cancan/wiki/Role-Based-Authorization)用户模型具有 :role 并且我 > 会假设任何基于用户的应用程序都具有 has_many 依赖项，因此会像我的那样失败。
> 
> ...还是我还缺少其他东西？

# image-processing - 如何根据文件大小限制确定 png 尺寸？

> ID：11035715
> 
> 赞同：3
> 
> 时间：2012-06-14T14:51:09.383
> 
> 标签：image-processing, compression, png

如果应用程序的业务逻辑表明 24 位 PNG 永远不会超过 250KB，是否可以预测图像的最大宽度和高度仍然符合 250KB 的要求？

由于颜色深度、alpha 通道等有很多变量......有可能知道这一点吗？或者更接近？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T19:25:24.273

这是可能的，但它可能没有用。PNG的zlib压缩最大压缩比为1032:1（对于相同字节值的长序列）。所以 250 KB 压缩将是（忽略包装器和诸如此类）大约 250 MB 未压缩。对于方形图像，这将是几乎 10,000 x 10,000 像素，每个像素三个字节。

请注意，这里的另一个答案莫名其妙地假设了*最小*压缩，它给出了*最小*数量的像素，例如 500 x 333。由于问题要求“图像可能的最大宽度和高度”，因此该答案没有用。显然 10,000 x 10,000 大于 500 x 333。

*更新：*

基于最小 PNG 文件的精确计算会产生最大 24 位像素数（压缩数据中存储的每个像素三个字节）作为文件`n`字节大小的函数：

```
floor(((n - 77) * 8 - 1) / 2) * 86 + 1 
```

所以对于 250*1024 = 256,000 字节，我们得到 88,037,427 像素。对于方形图像，大约为 9383 x 9383 像素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-15T00:30:27.653

在处理了同样的问题后，我创建了一个可行的解决方案。

假设压缩在最坏的情况下完全无效，每个像素将存储 8 个字节的数据，每个 R、G、B 和 A 2 个字节。所以 100x100 像素的图像最大大小为 80,000 字节，加上一些可忽略的元数据。

在进行了这些简单的计算之后，我对斑驳的多色照片进行了多次实验，但我得到的尺寸从未超过该尺寸的三分之一，即每 10k 像素约 30kb。

有了这些知识，我编写了一个递归函数，将输入 png 缩小 10% 直到大小低于限制，并在生成的图像中保留正确的尺寸，然后在目标对象上恢复它。这导致了最好的，虽然可变的质量，正确的大小，并且 CPU 上的额外负载可以忽略不计（因为在实践中从未发生过缩减）。

这个 png 规范是我做出假设的依据： [http ://www.libpng.org/pub/png/spec/1.2/PNG-Chunks.html](http://www.libpng.org/pub/png/spec/1.2/PNG-Chunks.html)

您可能还想看看维基百科的文章： [https ://en.wikipedia.org/wiki/Portable_Network_Graphics](https://en.wikipedia.org/wiki/Portable_Network_Graphics)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T15:07:27.027

这是不可能的，如果您将一个巨大的空白文件保存为 png，由于 png 压缩，它的大小会非常小。

如果您想为您的用户提供尺寸，您应该更改您的业务逻辑以接受基于其尺寸而不是文件大小的图像。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T15:19:37.573

您可以通过假设 PNG 文件未压缩来预测它的最大值。乘以 width*height*3 并添加一些标题开销。

为了做得更好，请为您的应用程序测量大量典型的 PNG 文件，并找到实际文件大小与上述预测的比率最大的那个。使用此比率或稍大的数字来估计任何其他图像的大小。

这仍然不能保证结果足够小，您只能通过实际尝试写出编码图像来确定。然而，除了最退化的情况外，它应该足够好。

编辑：如果不清楚，您可以向后工作并从最大文件大小获取图像尺寸。假设`w`和`h`是最大可接受的宽度和高度，`a`是 的纵横比`w/h`，`r`是 上面发现的文件大小/图像大小的比率：

```
w = sqrt((250K * a) / (r * 3))
h = w / a 
```

例如，如果`a`是 1.5 和`r`0.5，那么您的尺寸将为 500 x 333。

# multithreading - 使用线程以并发方式访问结构字段

> ID：11035716
> 
> 赞同：2
> 
> 时间：2012-06-14T14:51:15.547
> 
> 标签：multithreading, data-structures, concurrency, mutex

假设我有一个包含很多字段的数据结构。我想使用线程以并发方式访问它。无论如何，我不想锁定整个结构（例如，使用大互斥锁对其进行完全独占访问），但我希望一个线程可以访问一个字段，即使其他线程正在访问其他字段。可能吗？如果是，如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T20:32:13.107

Java 有[ConcurrentSkipListMap](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentSkipListMap.html)和 ConcurrenSkipListSet 非常非常适合这种情况。它还有一个 ConcurrentHashMap，它在多线程环境中不是那么快，但它是线程安全的。我认为大多数语言都可以使用类似的东西。跳过列表的想法（一个像字典/映射并使用比较和交换而不是锁定的单链表）是相当新的，但是自己锁定的哈希表已经存在了很久。（如果你不使用 Java 并且找不到东西，Java 是开源的，所以你*可以*翻译代码并自己制作。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T14:52:30.040

那么直接的方法是有一个单独的互斥锁来保护每个字段，假设您可以承受内存开销。

**编辑**：由于您在谈论哈希表，因此锁定每个插槽会产生过多的开销，而单个锁的效率会太低。

最可接受的方式是锁分条技术，这意味着维护 K 个锁，每个保护`M/K`槽（M 是槽的总数）。然后，您可以运行一些基准测试并调整 K 以获得最佳性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T15:16:36.690

您可以只为整个哈希表使用一个锁，而不是拥有一大堆锁，但为表中的每个元素使用一个标志。Flag 表示该元素当前已被其他人使用，想要使用它的人必须稍等片刻。因此，要从表中获取元素，您需要通过单个锁，但一旦获取元素，您就会释放它。之后，您检查是否允许使用该元素。如果没有，请稍等并再次检查。

如果可以从哈希表中删除元素，则必须为每个元素设置一个引用计数，以便只有在引用计数降至零时才能删除元素并将其从表中删除。

当新元素被添加到表中时，它是在表的锁内完成的。锁也用于删除元素。希望访问现有元素比创建新元素和删除现有元素更频繁。

# java - 在桌面 GUI 中调整组件的大小

> ID：11035722
> 
> 赞同：0
> 
> 时间：2012-06-14T14:51:23.190
> 
> 标签：java, swing, user-interface, awt, layout-manager

我正在为 Java 中的数据结构制作一个 GUI。我想要一个功能，每当用户单击表单顶部的最大化按钮时，组件和表单中的所有内容也应该随着窗口的展开而调整大小，反之亦然。我搜索了很多，但找不到解决方案。

如何缩放 GUI？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T15:38:35.493

> 你能帮我一些简短的代码吗，比如当按下最大化按钮时如何调整工具栏的大小..

我会做得更好。这是一个简短的代码示例，其中显示了其中***5***个具有不同的调整大小行为，具体取决于它们在`BorderLayout`.

![可调整大小的工具栏](../Images/88825b5a188b052b5e20a00b7d9c07f3.png)

```
import java.awt.BorderLayout;
import javax.swing.*;

public class ResizableToolBars {

    public static void showFrameWithToolBar(String toolBarPosition) {
        // the layout is important..
        JPanel gui = new JPanel(new BorderLayout());

        JToolBar tb = new JToolBar();
        // ..the constraint is also important
        gui.add(tb, toolBarPosition);
        tb.add(new JButton("Button 1"));
        tb.add(new JButton("Button 2"));
        tb.addSeparator();
        tb.add(new JButton("Button 3"));
        tb.add(new JCheckBox("Check 1", true));

        JFrame f = new JFrame(toolBarPosition + " Sreeeetchable Tool Bar");
        f.setContentPane(gui);
        f.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        f.setLocationByPlatform(true);
        f.pack();

        // we don't normally set a size, this is to show where 
        // extra space is assigned.
        f.setSize(400,120);
        f.setVisible(true);
    }
    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable(){
            @Override
            public void run() {
                showFrameWithToolBar(BorderLayout.PAGE_START);
                showFrameWithToolBar(BorderLayout.PAGE_END);
                showFrameWithToolBar(BorderLayout.LINE_START);
                showFrameWithToolBar(BorderLayout.LINE_END);
                showFrameWithToolBar(BorderLayout.CENTER);
            }
        });
    }
} 
```

*   调整大小时仔细查看每个效果。
*   查看 JavaDocs 的[`BorderLayout`](http://docs.oracle.com/javase/7/docs/api/java/awt/BorderLayout.html).
*   **完成Java 教程的[在容器内布局组件课程。](http://docs.oracle.com/javase/tutorial/uiswing/layout/index.html)**

如果您在那之后回到[嵌套布局示例](https://stackoverflow.com/a/5630271/418556)，您应该能够弄清楚我是如何将较小的组件组​​组合在一起的，每个组件在父容器的一个区域中都有自己的布局（在面板中）。

![](../Images/f9e492eec81701d836e83834a893afb0.png)

# statistics - lmFit 模型数据集要求

> ID：11035726
> 
> 赞同：0
> 
> 时间：2012-06-14T14:51:42.850
> 
> 标签：statistics, linear-regression, datetime-comparison

我对 R 非常陌生，并尝试分析一些表达式数组数据。

对于基因表达分析，我们使用线性拟合和eBayes来计算数据。但是，如果我每个条件只有一个样本（例如，1 个对照，1 个实验），我是否仍然可以使用 lmFit/eBayes 函数或者只是对 MA 结果进行排序以找出最重要的基因。是因为计算协同效率需要每个条件至少两个样本吗？

我阅读了 limma 包装手册。它列出了一些例子。我注意到在时间课程实验（第50页）中，案例有两个0hr wt，两个0hr mu，一个6hr wt，一个6hr mu，一个24hr wt和一个24hr mu。它完成了 lmFit/eBayes 流程。是因为它是一个时间课程案例吗？如果我有一个时间课程数据，其中每个条件仍然包含一个样本（例如，1 个对照和 1 个实验，0 小时、6 小时、12 小时和 24 小时），计算与 lmFit/eBays 的协同效率是否合理？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-14T14:35:22.283

是的，时间进程是一个特例。假设表达式随时间平滑变化，并使用回归拟合时间趋势。在所有其他设计中，您需要复制来检测差异表达。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T17:10:17.617

由于方差为 0，您将在经验贝叶斯平滑（标准误差）方面遇到问题。我尝试了一个玩具示例，这是它给出的错误：

```
> efit<-eBayes(fit) 
```

`Error in ebayes(fit = fit, proportion = proportion, stdev.coef.lim = stdev.coef.lim) : No residual degrees of freedom in linear model fits`

# php - 如何在生产服务器中安装 php memcache？

> ID：11035738
> 
> 赞同：0
> 
> 时间：2012-06-14T14:52:19.960
> 
> 标签：php, linux

有没有办法在没有 pecl/phpize 的情况下安装 memcache ？

[http://in2.php.net/manual/en/memcache.installation.php](http://in2.php.net/manual/en/memcache.installation.php)

它是一个生产服务器，将 pecl/phpize 安装到其中是一个好习惯吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T14:56:25.313

如果您完全控制服务器，那么安装一点也不难——而且在生产服务器上安装 pecl 也没什么大不了的，这是安装 php 包的标准方法——你的服务器应该足够安全，以至于无关紧要.

至于是否有办法在没有 pecl 的情况下做到这一点——如果你正在运行像 Ubuntu 这样的发行版，那么有一个专门为你制作的包：php5-memcache

**参考：**

[安装-memcached-on-ubuntu-for-php](http://trentrichardson.com/2010/02/08/installing-memcached-on-ubuntu-for-php/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T14:58:26.107

> 有没有办法在没有 pecl/phpize 的情况下安装 memcache ？

是的，您可以使用预制的二进制文件。

> 它是一个生产服务器，将 pecl/phpize 安装到其中是一个好习惯吗？

最佳实践是使用一个经过测试的系统，该系统是受管理的，并且有一个存储库，可以从中检出经过测试的二进制文件。

# php - 在 Skype 按钮上创建透明背景

> ID：11035748
> 
> 赞同：0
> 
> 时间：2012-06-14T14:52:49.117
> 
> 标签：php, html, fopen, skype

我正在关注本教程[http://www.jek2k.com/wp/2008/02/08/building-a-custom-skype-me-button-with-status-icon/](http://www.jek2k.com/wp/2008/02/08/building-a-custom-skype-me-button-with-status-icon/)在我的网站上获取透明的 Skype 按钮所以人们可以通过点击一个按钮给我打电话。Skype 有自己的但是背景是白色的，[http://www.skype.com/intl/en-us/tell-a-friend/get-a-skype-button/](http://www.skype.com/intl/en-us/tell-a-friend/get-a-skype-button/)

我的代码是：

```
 <?php
function getSkypeStatus($username) {
    /*
    returns:
    0 - unknown
    1 - offline
    2 - online
    3 - away
    4 - not available
    5 - do not disturb
    6 - invisible
    7 - skype me
    */
    $remote_status = fopen ('http://mystatus.skype.com/'.$username.'.num', 'r');
    if (!$remote_status) {
        return '0';
        exit;
    }
    while (!feof ($remote_status)) {
        $value = fgets ($remote_status, 1024);
        return trim($value);
    }
    fclose($remote_status);
}

function getSkypeStatusIcon($username) {
    $status = getSkypeStatus($username);
    // change the path of the icons folder to match your site
    echo '<img src="/skype/'.$status.'.png" alt="call '.$username.'" />';
}

// retrieves the numeric status code
//getSkypeStatus('nicolovolpato');

// displays the status icon, change to match your Skype username
getSkypeStatusIcon('myusernamehere');
?> 
```

当我在我的网站上进行测试时，它就会出现：'call myusernamehere'。没有图像，我无法单击此处呼叫 myusername 以打开 Skype 和呼叫。

我已将图像 0-7 插入到我的根文件夹中名为 skype 的文件夹中。

谁能帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T15:17:40.550

要添加点击通话功能，请使用以下`<a>`标签：

```
<a href="skype:{username}?call">...</a> 
```

所以这个脚本的修改版本看起来像这样：

```
<?php
function getSkypeStatus($username) {
    $remote_status = file_get_contents('http://mystatus.skype.com/'. $username .'.num');
    return ($remote_status === false) ? '0' : trim($remote_status);
}

function showSkypeButton($username) {
    $status = getSkypeStatus($username);

    echo '<a href="skype:'. $username .'?call">';
    echo '<img src="/skype/'. $status .'.png" alt="Call '. $username .'">';
    echo '</a>';
}

showSkypeButton('whatever'); 
```

图片未显示的问题与此代码无关。Zuul 的回答在这个问题上给了你一些很好的提示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T15:13:45.063

## 1)

该问题与可能未正确构建的图像路径有关，或者它本身的图像不存在于指定位置，因为浏览器正在呈现该`alt`属性。

**在此处指定 Skype 图像路径：**

```
echo '<img src="/skype/'.$status.'.png" alt="call '.$username.'" />'; 
```

找不到图像时的输出是`call '.$username.'`为`alt`属性提供的内容。

> 当我在我的网站上进行测试时，它就会出现：'call myusernamehere'。

您可以使用 DOM 检查器工具（例如 Firebug）来确认属性中指定的图像路径`src`是否正确构建。

## 2)

如果您通过浏览器访问图像`http://www.mysite.com/skype/1.png`，并且您能够看到它，则问题与`$status`没有给出预期的 0 到 7 值有关。

# django - 在 Django 表单显示中没有得到错误显示

> ID：11035750
> 
> 赞同：0
> 
> 时间：2012-06-14T14:52:55.827
> 
> 标签：django, django-forms, django-templates, django-views

无法弄清楚我做错了什么。当我发布我的表格时，有很多缺失的字段。它重新显示但不打印错误。下面是表单、视图和模板

我有一个模型形式：

```
class HotelOfferForm(forms.ModelForm):
    """
    form for Ensemble personel to complete to make offer live
    """
    class Meta:
        model = Hoteloffer
        widgets = {
            'standard_Service':  forms.CheckboxSelectMultiple(),
            'leisure_Service':  forms.CheckboxSelectMultiple(),
            'dining_Service':  forms.CheckboxSelectMultiple(),
            'lto_start_date': SelectDateWidget(),
            'lto_end_date': SelectDateWidget(),
        } 
```

还有一个观点：

```
def edit_hotel(request, hotel_id):
    print 'in edit_hotel'
    if request.method == 'POST':
        print "in POST"
        print hotel_id, type(hotel_id)
        if int(hotel_id) != 0:
            print 'got hotel_id', hotel_id
            hotel = Hoteloffer.objects.get(pk=hotel_id)
            f = HotelOfferForm(request.POST, instance=hotel)
        else:
            print 'no hotel id available'
            f = HotelOfferForm(request.POST)
        print "Is it valid?", f.is_valid()
        if f.is_valid():
            hotel = f.save()
            return redirect("/hotels/list_hotels/", context_instance=RequestContext(request))

    try:
        hotel = Hoteloffer.objects.get(pk=hotel_id)
        f = HotelOfferForm(instance=hotel)
    except:
        f = HotelOfferForm()
    print "about to render", f.errors # ******* prints nothing???
    return render_to_response('hotels/hotel_form.html', {'f': f, 'title': hotel.title}, context_instance=RequestContext(request)) 
```

模板：

```
{% extends 'base.html' %}
{% block title %}Ensemble Travel Group Offer Entry System: Hotel {{title}}{% endblock %}
{% block content %}
<!--{{ f.name }} {{f.errors}}-->
<!-- am i here? -->
<h2>{{ title }}</h2>
{% if f.errors %}
    <p style="color: red;">
        Please correct the error{{ f.errors|pluralize }} below.
        {{ f.errors }}
    </p>
{% endif %}

<form action="" method="post">{% csrf_token %}
  <table>
  {{ f.as_table }}
  </table>
<input type='submit' id='submit' name='submit' value='Submit' />
</form>
{% endblock %} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T14:58:16.090

当您的表单未通过 is_valid 时，您将回退到此代码：

```
try:
    hotel = Hoteloffer.objects.get(pk=hotel_id)
    f = HotelOfferForm(instance=hotel)
except:
    f = HotelOfferForm() 
```

如果您想显示带有错误的表单，则应该将表单`request.POST`作为参数返回

我还建议查看 Django 的基于类的视图，尤其是 UpdateView 可以很好地与这种编辑视图配合使用

# scala - 安装了 scala 的网络主机

> ID：11035754
> 
> 赞同：0
> 
> 时间：2012-06-14T14:53:02.193
> 
> 标签：scala, content-management-system, hosting, blogs

我想开发一个基于 scala 的 CMS 和博客引擎作为一个项目。我当前的网络主机没有安装 scala。有谁知道运行 scala 的网络主机（它不一定是免费的，但相对基本 - 这将是低流量和低存储量）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T14:57:23.050

你不需要安装 scala。您只需要一个 JVM。不过，您需要在解决方案（战争）中包含 scala 库。

# linux - 在 git init 上自动添加遥控器

> ID：11035760
> 
> 赞同：1
> 
> 时间：2012-06-14T14:53:21.350
> 
> 标签：linux, git, git-bash

有没有办法自动设置你的遥控器在 git 存储库上之后是`git init`什么？
我知道我可以有一个 git/config 模板，但我需要一种方法来引用新的 repo 名称/目录来设置远程。

例子：

```
cd newProject
git init 
```

并且`.git/config`已经有：

```
[remote "origin"]
    url = git@myserver:newProject
    fetch = +refs/heads/*:refs/remotes/origin/* 
```

在文件的末尾。

我想我可以通过创建一个 bash 脚本来执行此操作`git init`，然后附加到配置文件，并运行该文件而不是使用`git init`，但我希望有一种方法可以作为`git init`命令的一部分来执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T15:07:20.250

使用上面的模板，

```
git init .
sed -si s/newProject/itsrealname/ .git/config 
```

完毕。为什么要为这样的琐碎事情制作一个特殊的命令，这样做比记住它得到的任何名称要容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T15:14:54.547

**您可以在~/.gitconfig**中创建别名。例如，要在 example.com 上使用当前目录的基本名称作为项目名称创建远程：

```
myinit = ! "git init; git remote add origin \"git@example.com:${PWD##*/}.git\"" 
```

如果您的项目名为“foo”，当您`git myinit`在 /path/to/foo 中运行时，它将初始化存储库并将*源*设置为“git@example.com:foo.git”。

# javascript - 在回调中访问对象变量

> ID：11035763
> 
> 赞同：0
> 
> 时间：2012-06-14T14:53:33.207
> 
> 标签：javascript, callback, scope

我有以下设计

```
function crudDataTable()
{
    this.addEditFormContainerSelector = ''; 
    this.paginationType = "full_numbers";  // Provide Pagination Type
    this.processing = true; 
    this.serverSide = true;  //I want this this to be accessible in fnRowCallback below:

    this.create = function(){

        this.tableInstance = $(this.tableLocationSelector).DataTable({
            "sPaginationType": this.paginationType
            fnRowCallback:function(nRow, aData) {
                // "this" from crudDataTable should be accessible here
            }  
        })
    }
} 
```

我希望**`this`**from`crudDataTable`可以在`fnRowCallback`.

我怎样才能做到这一点？，也是`fnRowCallback`由`datatable`组件触发的，所以这不在我的控制范围内。如何**`this`**在`fnRowCallback`.

或者，如果这是不可能的，那么实现它的其他方法是什么？

我正在尝试编写一个组件，这些组件的用户可以简单地设置其变量并调用 create 函数。我正面临着**`this`**在`fnRowCallback`函数中访问的挑战。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T14:59:43.297

您可以存储`this`对回调外部的引用：

```
var table = this;
this.tableInstance = $(this.tableLocationSelector).DataTable({
     "sPaginationType": this.paginationType,
     fnRowCallback: function(nRow, aData) {
         //Use `table` to refer to the instance of `crudDataTable`
     }  
}); 
```

或者，您可以使用 ES5[`bind`方法](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind)（但请注意，旧浏览器不支持它）：

```
this.tableInstance = $(this.tableLocationSelector).DataTable({
     "sPaginationType": this.paginationType,
     fnRowCallback: function(nRow, aData) {
         //Use `this` to refer to the instance of `crudDataTable`
     }.bind(this);
}); 
```

# c - 在 Microsoft C 中工作时对“获取和清除”感到困惑

> ID：11035766
> 
> 赞同：1
> 
> 时间：2012-06-14T14:53:43.150
> 
> 标签：c, functional-programming

*在 Microsoft C 中工作时，我对“获取和清除”*感到困惑。比如何时或如何获取单词设置的当前状态，以及使用什么功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T15:16:52.913

研究以下内容；匹配函数，浮点数学包。和异常处理。这将极大地帮助您理解“获取和清除功能。

以下是获取和清除功能的示例：

要获取当前状态字设置，请使用以下`_status87()`函数：

```
unsigned sw_setting;
sw_setting = _status87(): 
```

要在执行可疑浮点运算之前清除 (0x0000) 状态字设置，请使用以下`_clear87()`函数：

```
unsigned sw-setting;
old_sw_setting = _clear87(); 
```

`_fpreset()`每当调用该函数以初始化浮点数学包时，状态字也会被清除 (0x0000) 。

# python - python中的sumifs函数

> ID：11035767
> 
> 赞同：-1
> 
> 时间：2012-06-14T14:53:43.487
> 
> 标签：python, function, sumifs

我有一个列表，如下所示：

```
[['chr1', '3088', '1', 744, 'L1MCc_dup1']
['chr1', '3089', '1', 744, 'L1MCc_dup1']
['chr1', '3090', '1', 744, 'L1MCc_dup1']
['chr1', '15037', '1', 96, 'MER63B']
['chr1', '15038', '1', 96, 'MER63B']
['chr1', '15039', '1', 96, 'MER63B']
['chr1', '15040', '1', 96, 'MER63B']
['chr1', '19465', '1', 418, 'MLT2B4_dup1']
['chr1', '19466', '1', 418, 'MLT2B4_dup1']
['chr1', '19467', '1', 418, 'MLT2B4_dup1']] 
```

我需要`sumifs`在python中制作一个等效的函数（因为文件对于excel来说太大了）以根据第5列中的标识符对第3列的内容求和（输出可以是某些版本的`L1MCc_dup1`is 3、`MER63B`is 4和`MLT2B4_dup1`is 3 ）。

有什么建议/帮助来实现这个功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:56:23.667

使用字典：

```
d = {}
for row in my_list:
    key = row[4]
    value = int(row[2])
    d[key] = d.get(key, 0) + value 
```

在此循环之后，`d`会将最后一列中的键值映射到所需的总和。

您也可以使用`collections.defaultdict`而不是普通字典。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T14:58:54.340

```
>>> d =[['chr1', '3088', '1', 744, 'L1MCc_dup1'],
['chr1', '3089', '1', 744, 'L1MCc_dup1'],
['chr1', '3090', '1', 744, 'L1MCc_dup1'],
['chr1', '15037', '1', 96, 'MER63B'],
['chr1', '15038', '1', 96, 'MER63B'],
['chr1', '15039', '1', 96, 'MER63B'],
['chr1', '15040', '1', 96, 'MER63B'],
['chr1', '19465', '1', 418, 'MLT2B4_dup1'],
['chr1', '19466', '1', 418, 'MLT2B4_dup1'],
['chr1', '19467', '1', 418, 'MLT2B4_dup1']]
>>> sum(map(lambda x: x[3], filter(lambda x: x[4] == 'MLT2B4_dup1', d)))
1254 
```

所有第 4 列值的总和（我假设您的意思是因为它是唯一的 int 列），其中最后一列等于`'MLT2B4_dup1'`. 当然，您可以将其更改为任何其他条件。

# javascript - 在javascript mvc3中嵌入代码隐藏结果

> ID：11035772
> 
> 赞同：0
> 
> 时间：2012-06-14T14:53:49.220
> 
> 标签：javascript, asp.net-mvc-3

我有一个 mvc3 视图（map.cshtml），其中有一个 javascript 部分。

我有一个控制器（MapController.cs），它有一个返回字符串的函数。

我需要从 cshtml 页面的 javascript 区域中调用该函数，

并让它在处理和显示之前将结果直接呈现到 javascript 块中。

整个任务是为谷歌地图创建一个系列或信息窗口，并且由于数据分散在系统中，代码隐藏函数收集这些数据，并将其放入 html 代码中，我需要将此 html 代码注入到显示之前的 javascript 块。

呼...

谢谢

这是我目前正在使用的实际代码块...

@functions { 私有字符串 getContent() { 返回“测试”；} }

变量映射；

函数初始化（）{ var myLatlng1 =新google.maps.LatLng（29.64032，-82.363129）；var myLatlng2 = 新 google.maps.LatLng(29.64032, -81.363129);

```
var myOptions = {
  zoom: 10,
  center: myLatlng1,
  mapTypeId: google.maps.MapTypeId.ROADMAP
};
map = new google.maps.Map(document.getElementById('map_canvas'), myOptions);

var test = 'X@{getContent();}'; 
```

所以 - 在 var 测试中......我希望它阅读...... Xtesting

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T15:02:52.860

您可以在 javascript 代码中使用 jQuery`ajax`从控制器操作中获取数据。

在您的视图（或布局视图）中包含 jQuery 库，并在您的视图中包含以下脚本（map.cshtml）。

```
<script type="text/javascript">

 $(function(){

    $.get("@Url.Action("GetName","Map")",function(data){
      alert("The value from server is : "+ data);
    });

 });

</script> 
```

您需要`GetName`在`MapController`now 中调用一个 Action 方法来处理这个 ajax 请求。

```
public ActionResult GetName()
{
   return Content("mvc is awesome");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T15:46:50.367

这是你想要的吗？

```
var test = 'X@(getContent())'; 
```

# ios - 当全局变量的值发生变化时如何启动方法？

> ID：11035778
> 
> 赞同：0
> 
> 时间：2012-06-14T14:54:03.380
> 
> 标签：ios, xcode, methods

抱歉，我的问题中没有任何代码！我想实现一个程序，当加速度计 x 轴读数超过某个阈值时，我想启动陀螺仪更新。当陀螺仪被激活时，我也需要停止加速度计更新。我计划的方法是将加速度计数据带到全局变量，然后将其与 if 条件进行比较。如果它满足条件我需要发送信号来启动陀螺仪更新并停止加速更新？

我可以实现有关加速度和陀螺仪更新的代码，但问题是我不知道如何在全局变量的值超过阈值时启动陀螺仪数据 n 停止加速度数据？请帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:59:36.743

您可以使用 getter 和 setter 来更改变量。在 setter 中，您可以检查所需的任何条件。那么您就可以，例如，发布有关达到所需阈值的通知。

```
- (void) setNeededValue:(valueType)newValue;
{
    neededValue = newValue;

    if( neededValue > threshold )
    {
        [[NSNotificationCenter defaultCenter] postNotificationName: someConstStringAsNotificationName object: self];
    }
} 
```

要接收通知，请在您希望通过调用接收它的任何类中使用此代码

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(notificationHandler) name:someConstStringAsNotificationName object:nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T14:59:24.280

对我来说听起来不错，你只需要尝试一下。伪：

```
if ( globalVariable > thresholdValue ) {
    stopAccelData();
    startGyroData();
} 
```

# c# - 如何在不同的页面和项目中共享 ASP.NET SQLDataSource？

> ID：11035782
> 
> 赞同：0
> 
> 时间：2012-06-14T14:54:11.443
> 
> 标签：c#

我知道您可以轻松地与母版页共享控制。但是如果我需要与不同master下甚至不同项目中的页面共享我的控件怎么办？具体来说，我有 SQLDataSource，我希望不必在我拥有的每个 masterPage 的整个解决方案中复制它。

我需要嵌套母版页来实现这一点吗？

一种可能的解决方案是将我的 SQL DataSource 控件放在单独的页面中。并让每个不同的母版页始终将该页面加载到 ContentPlaceHolder 中。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T15:00:31.207

您需要创建一个`Data Access Layer (DAL)`. 因此，您可以在所有页面之间共享数据调用，而不是使用不灵活的`SqlDataSource`控件。

下面的例子*很基础*。我使用`Entity Framework`来访问数据库和`Web Forms`.

```
public class DataAccess
{

   public List<Record> GetAllRecordsByUserName(string credentials)
   {
      List<Record> recordList;
      using (CustomEntities context = new CustomEntities())
      {

        IQueryable<Section> recordQuery = from records in context.Records
                                              where records.UserName == credentials
                                              select records; 
        recordList = recordQuery.ToList<Record>();
      }
      return recordList;
   }

} 
```

* * *

**在你的代码后面**

```
DataAccess access = new DataAccess();
List<Record> records = access.GetAllRecordsByUserName("user.name");
DropDownList1.DataSource = records;
DropDownList1.DataBind(); 
```

* * *

**教程**

有一个`asp.net`关于创建`DAL`. 我强烈建议你去。它比我的小代码片段更具启发性和教育意义。

[http://www.asp.net/web-forms/tutorials/data-access/introduction/creating-a-data-access-layer-cs](http://www.asp.net/web-forms/tutorials/data-access/introduction/creating-a-data-access-layer-cs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T15:22:11.117

`IEnumerable<TEntity>`使用而不是`List<TEntity>`返回类型更灵活。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T15:52:17.127

最后，我做了嵌套的 Master 并将我的 SQL 数据源放在最顶层，这样每个 sub-master 都可以访问它。

# windows - 在 WinDbg 中定义自定义错误检查代码

> ID：11035784
> 
> 赞同：2
> 
> 时间：2012-06-14T14:54:13.817
> 
> 标签：windows, windbg, device-driver, kernel

有没有办法定义自定义代码（带有消息/描述等），以便在 Windows 的内核模式驱动程序中调用`KeBugCheckEx`发布自定义 BugCheck 代码时，WinDbg 显示该自定义错误检查代码附带的相关消息?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T13:03:25.317

有关已知错误检查代码的文本被编译成扩展 DLL 之一。据我所知，这不是可以以任何简单方式扩展的东西（即，您不能只是在某个地方将文本添加到文件中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T18:45:59.483

也许这可以帮助你：

[KeRegisterBugCheckCallback](http://msdn.microsoft.com/en-us/library/windows/hardware/ff553105%28v=vs.85%29.aspx "KeRegisterBugCheckCallback")

并阅读：

[http://www.osronline.com/custom.cfm?name=articlePrint.cfm&id=82](http://www.osronline.com/custom.cfm?name=articlePrint.cfm&id=82)

我只测试了自定义 BSOD，而不是整个 Bugcheck。:-)

# google-chrome - Chrome扩展程序如何在浏览器启动时获得回调？

> ID：11035788
> 
> 赞同：15
> 
> 时间：2012-06-14T14:54:29.913
> 
> 标签：google-chrome, google-chrome-extension

我需要在我的 Chrome 扩展程序中知道浏览器何时启动，以便它可以自动打开一个 html 页面。Chrome 扩展 API 中是否有一种机制可以让我使用这个工具？

我需要此功能用于我的个人扩展，我只在我的计算机上使用。因此，如果这可以通过 hack 来完成，那就没问题了。我的扩展想知道浏览器何时启动。

有任何想法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-14T23:02:30.510

如果您希望在 Chrome 启动时打开选项卡，您可以只包含以下代码：`chrome.tabs.create({url:"someUrl"});`在您的 background.js 文件中，或者如果您希望每次打开新窗口时都打开它，您可以包含以前的代码和一个额外的事件侦听器像这样的新窗口事件：

```
chrome.windows.onCreated.addListener(function() {
chrome.tabs.create({url:"someUrl"});
}) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-14T16:04:06.917

[每次浏览器启动时，后台页面](https://developer.chrome.com/extensions/background_pages)中的脚本仅启动一次，因此您只需将后台页面添加到您的扩展程序中即可处理浏览器启动。

# java - 从父类访问

> ID：11035792
> 
> 赞同：0
> 
> 时间：2012-06-14T14:54:45.080
> 
> 标签：java, inheritance, object

我有一个问题，我似乎暂时无法编写出我的出路。

我有 2 个类，一个是子类继承的抽象类，子类扩展该类。

所以它是这样的：

```
abstract class foo implements Runnable{
    int whatever;
    int whatever2;

    public void doStuff(){

        //need value from child class here -- should be 100
}

public class bar extends foo{
    private int ID = 100;

    //getter here
} 
```

使用父类的原因是为了统一我的构造函数/序列化方法来接受大量不同的类，这些类都具有相似的数据但具有截然不同的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T14:56:19.133

使用方法：

```
public abstract class Foo {

    public void doStuff(){
        int id = getID(); // <==== get the ID
    }

    public abstract int getID();
}

public class Bar extends Foo {

    private int ID = 100;

    public int getID() {
      return ID;
    }
} 
```

`getID()`（根据您的用例调整可见性。）

# xslt - 需要帮助来使用 XSLT 转换我的 XML

> ID：11035793
> 
> 赞同：1
> 
> 时间：2012-06-14T14:54:52.850
> 
> 标签：xslt

我正在尝试使用身份/复制模式来仅转换下面的 Segments/Segment 部分并保留结构的其余部分。模板会是什么样子？我尝试了论坛中的一些示例以在 xslt:for-each SegmentFares/Segments/Segment 中应用模板，但我不知道如何将基本票价放在第一个 SegmentFare 中，并将其设置为零在剩余的后续部分中段。

输入 XML：

```
 <FareQuoteRS>
      <PaxFareQuotes>
        <item>
          <PTC>ADT</PTC>
          <TotalFare>
            <Currency>INR</Currency>
            <Fare>8403</Fare>
            <TotalBaseFare>3620</TotalBaseFare>
          </TotalFare>
          <SegmentFares>
            <SegmentFare>
              <Currency>INR</Currency>
              <BaseFare>3620</BaseFare>
              <Segments>
                <Segment>
                  <Origin>DEL</Origin>
                  <Destination>BOM</Destination>
                  <DeptrDate>2012-06-23</DeptrDate>
                  <DeptrTime>10:10</DeptrTime>
                  <ArrDate>2012-06-23</ArrDate>
                  <ArrTime>12:15</ArrTime>
                  <FareBasis>J</FareBasis>
                  <PromoCode></PromoCode>
                  <FltNum>109</FltNum>
                  <Airline>YY</Airline>
                  <BagAllow>20K</BagAllow>
                </Segment>
                <Segment>
                  <Origin>BOM</Origin>
                  <Destination>GOI</Destination>
                  <DeptrDate>2012-06-23</DeptrDate>
                  <DeptrTime>15:15</DeptrTime>
                  <ArrDate>2012-06-23</ArrDate>
                  <ArrTime>16:20</ArrTime>
                  <FareBasis>J</FareBasis>
                  <PromoCode></PromoCode>
                  <FltNum>248</FltNum>
                  <Airline>YY</Airline>
                  <BagAllow>20K</BagAllow>
                </Segment>
              </Segments>
            </SegmentFare>
          </SegmentFares>
          <Taxes>
            <Currency>INR</Currency>
            <TotalTaxes>4783</TotalTaxes>
            <item>
              <TaxCode>YQ</TaxCode>
              <TaxName>Fuel Surcharge</TaxName>
              <Currency>INR</Currency>
              <TaxAmount>3150</TaxAmount>
            </item>
            <item>
              <TaxCode>WO</TaxCode>
              <TaxName>PSF</TaxName>
              <Currency>INR</Currency>
              <TaxAmount>146</TaxAmount>
            </item>
            <item>
              <TaxCode>IN</TaxCode>
              <TaxName>UDF</TaxName>
              <Currency>INR</Currency>
              <TaxAmount>745</TaxAmount>
            </item>
            <item>
              <TaxCode>JN</TaxCode>
              <TaxName>Service Tax</TaxName>
              <Currency>INR</Currency>
              <TaxAmount>335</TaxAmount>
            </item>
            <item>
              <TaxCode>TF</TaxCode>
              <TaxName>Transaction Fee</TaxName>
              <Currency>INR</Currency>
              <TaxAmount>407</TaxAmount>
            </item>
          </Taxes>
        </item>
      </PaxFareQuotes>
      <Status>Success</Status>
      <StatusRemark/>
    </FareQuoteRS> 
```

输出 XML：

```
 <FareQuoteRS>
      <PaxFareQuotes>
        <item>
          <PTC>ADT</PTC>
          <TotalFare>
            <Currency>INR</Currency>
            <Fare>8403</Fare>
            <TotalBaseFare>3620</TotalBaseFare>
          </TotalFare>
          <SegmentFares>
          <!-- There is now one SegmentFare for each Segment in the input -->
          <!-- while the BaseFare is set to zero for the subsequent segments -->
            <SegmentFare>
              <Currency>INR</Currency>
              <BaseFare>3620</BaseFare>
              <Segments>
                <Segment>
                  <Origin>DEL</Origin>
                  <Destination>BOM</Destination>
                  <DeptrDate>2012-06-23</DeptrDate>
                  <DeptrTime>10:10</DeptrTime>
                  <ArrDate>2012-06-23</ArrDate>
                  <ArrTime>12:15</ArrTime>
                  <FareBasis>J</FareBasis>
                  <PromoCode></PromoCode>
                  <FltNum>109</FltNum>
                  <Airline>YY</Airline>
                  <BagAllow>20K</BagAllow>
                </Segment>
              </Segments>
            </SegmentFare>
            <SegmentFare>
              <Currency>INR</Currency>
              <BaseFare>0</BaseFare>
              <Segments>
                <Segment>
                  <Origin>BOM</Origin>
                  <Destination>GOI</Destination>
                  <DeptrDate>2012-06-23</DeptrDate>
                  <DeptrTime>15:15</DeptrTime>
                  <ArrDate>2012-06-23</ArrDate>
                  <ArrTime>16:20</ArrTime>
                  <FareBasis>J</FareBasis>
                  <PromoCode></PromoCode>
                  <FltNum>248</FltNum>
                  <Airline>YY</Airline>
                  <BagAllow>20K</BagAllow>
                </Segment>
              </Segments>
            </SegmentFare>
          </SegmentFares>
          <Taxes>
            <Currency>INR</Currency>
            <TotalTaxes>4783</TotalTaxes>
            <item>
              <TaxCode>YQ</TaxCode>
              <TaxName>Fuel Surcharge</TaxName>
              <Currency>INR</Currency>
              <TaxAmount>3150</TaxAmount>
            </item>
            <item>
              <TaxCode>WO</TaxCode>
              <TaxName>PSF</TaxName>
              <Currency>INR</Currency>
              <TaxAmount>146</TaxAmount>
            </item>
            <item>
              <TaxCode>IN</TaxCode>
              <TaxName>UDF</TaxName>
              <Currency>INR</Currency>
              <TaxAmount>745</TaxAmount>
            </item>
            <item>
              <TaxCode>JN</TaxCode>
              <TaxName>Service Tax</TaxName>
              <Currency>INR</Currency>
              <TaxAmount>335</TaxAmount>
            </item>
            <item>
              <TaxCode>TF</TaxCode>
              <TaxName>Transaction Fee</TaxName>
              <Currency>INR</Currency>
              <TaxAmount>407</TaxAmount>
            </item>
          </Taxes>
        </item>
      </PaxFareQuotes>
      <Status>Success</Status>
      <StatusRemark/>
    </FareQuoteRS> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T15:18:41.463

你的想法`<xsl:for-each>`很好；它可以如下所示完成。

关键部分是`<xsl:choose>`元素：当前上下文节点是一个`<Segment>`元素（来自`<xsl:for-each>`循环迭代）。因此，如果在当前元素之前，同一父元素中没有其他元素，则条件`<xsl:when>`元素的计算结果为*真。*`<Segment>`如果为*true*，则复制原始`<BaseFare>`值，否则`<BaseFare>`插入零值。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>

    <xsl:template match="node()|@*">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="/FareQuoteRS/PaxFareQuotes/item/SegmentFares">
        <xsl:copy>
            <xsl:for-each select="SegmentFare/Segments/Segment">
                <SegmentFare>
                    <xsl:copy-of select="../../Currency"/>
                    <xsl:choose>
                        <xsl:when test="not(preceding-sibling::Segment)">
                            <xsl:copy-of select="../../BaseFare"/>
                        </xsl:when>
                        <xsl:otherwise>
                            <BaseFare>0</BaseFare>
                        </xsl:otherwise>
                    </xsl:choose>
                    <Segments>
                        <xsl:copy>
                            <xsl:apply-templates select="node()|@*"/>
                        </xsl:copy>
                    </Segments>
                </SegmentFare>
            </xsl:for-each>
        </xsl:copy>
    </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T21:05:07.730

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/><xsl:strip-space elements="*"/>

    <!-- identity template -->
    <xsl:template match="node()|@*">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
    </xsl:template>

    <!-- build first SegmentFare -->
    <xsl:template match="SegmentFares/SegmentFare">
        <xsl:copy>
            <xsl:apply-templates select="Currency|BaseFare"/>
            <Segments>
                <!-- leave first Segment as is -->
                <xsl:apply-templates select="Segments/Segment[1]"/>
            </Segments>
        </xsl:copy>
        <!-- apply templates to any next Segment -->
        <xsl:apply-templates select="Segments/Segment[position()&gt;1]" mode="BaseFare0"/>
    </xsl:template>

    <!-- wrap single Segment with BaseFare 0 -->
    <xsl:template match="Segment" mode="BaseFare0">
        <SegmentFare>
            <xsl:copy-of select="ancestor::SegmentFare/Currency"/>
            <BaseFare>0</BaseFare>
            <Segments>
                <xsl:apply-templates select="."/>
            </Segments>
        </SegmentFare>
    </xsl:template>

</xsl:stylesheet> 
```

# android - Android - 将展位固定尺寸和动态尺寸视图排成一行

> ID：11035794
> 
> 赞同：3
> 
> 时间：2012-06-14T14:54:56.340
> 
> 标签：android

我有一个动态大小的 RelativeLayout，其中包含带有任意文本的 TextView。我也有固定大小的带有时间戳的 TextView。我想将带有时间戳的 RelativeLayout 和 TextView 并排放置在一行中。

像这样：

![我想得到什么](../Images/c917814a5483c533698c0d23286f7c40.png)

我真正得到的是：

![我真正得到的](../Images/c3031895451f4df76fc279cdc7140037.png)

如您所见，带有文本的布局仅占整个宽度。

XML:

```
 <RelativeLayout android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:id="@+id/news_list_element"
                android:layout_marginRight="5dip"
                android:layout_alignParentLeft="true"
                android:focusable="false"
                android:paddingRight="8dip"
                android:paddingLeft="17dip"
                android:paddingTop="4dip"
                android:paddingBottom="4dip">
    <TextView android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:id="@+id/news_list_text"
              android:background="@android:color/transparent"
              android:textColor="#000000"
              android:focusable="false"
              android:padding="3dip"
            />
</RelativeLayout>
<TextView android:id="@+id/messages_dialog_timestamp_in"
          android:background="#000000"
          android:text="12:05"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:layout_alignParentBottom="true"
          android:layout_toRightOf="@id/news_list_element"
          android:paddingBottom="9dip"
          android:paddingLeft="0dip"
          android:textColor="#8f9eac"
        /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T15:25:12.650

试试这个：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >
    <TextView 
        android:layout_width="0dp" 
        android:layout_height="wrap_content" 
        android:id="@+id/news_list_text" 
        android:background="@android:color/transparent" 
        android:textColor="#000000" 
        android:focusable="false" 
        android:padding="3dip" 
        android:layout_weight="1"
        android:layout_gravity="left"
    /> 
    <TextView android:id="@+id/messages_dialog_timestamp_in" 
        android:background="#000000" 
        android:text="12:05" 
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content" 
        android:paddingBottom="9dip" 
        android:paddingLeft="0dip" 
        android:textColor="#8f9eac" 
        android:layout_gravity="right"
    /> 
```

这`android:layout_gravity="left"`将使消息 TextView 从父级的左边缘开始。

`android:layout_gravity="right"`会将时间戳 Textview 放在父级的右边缘。

与消息 TextView 中的`android:layout_width="0dp"`结合`android:layout_weight="1"`将导致它在所有其他小部件就位**后**扩展以填充所有剩余空间并留出所需的空间（因此它不会将时间戳从屏幕上推出）。

此布局将与您显示的内容略有不同，因为即使有短消息，Textview 区域也会扩展以填充可用空间并使时间戳全部显示在右边缘的垂直线上（这看起来更整洁 IMO）。

# visual-studio - 默认显示 Visual Studio 扩展工具栏

> ID：11035795
> 
> 赞同：2
> 
> 时间：2012-06-14T14:54:56.500
> 
> 标签：visual-studio, visual-studio-addins, vsx, visual-studio-extensions

在 Visual Studio 扩展中，我在 .vsct 文件中定义了一个工具栏：

```
 <Menu guid="guidVsCmdSet" id="MyToolbar" type="Toolbar" >
        <CommandFlag>TextChanges</CommandFlag>
        <CommandFlag>DefaultDocked</CommandFlag>      
        <Strings>
          <ButtonText>My Tools/ButtonText>
        </Strings>
      </Menu> 
```

当我在 Visual Studio Experimental hive 中启动我的扩展时，我可以通过右键单击命令栏区域来手动打开我的工具栏。

当我第一次运行扩展程序时，有什么方法可以让工具栏默认显示？

我尝试了其他几个 CommandFlags，但它们似乎没有执行此行为：

```
 <CommandFlag>AlwaysCreate</CommandFlag>
    <CommandFlag>DontCache</CommandFlag> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T10:46:26.447

您要查看的是可见性约束。下面的示例使用 GUID_TextEditorFactory 使其在文本编辑器处于活动状态时可见（并在例如设计器处于活动状态时隐藏）。

我不是 100% 确定正确的上下文是什么让它始终可见，但我的猜测是 UICONTEXT_NoSolution（或者可能是 GUID_VSStandardCommandSet97）。

```
<CommandTable>
    <Commands.../>
    <VisibilityConstraints>
        <VisibilityItem guid="guidVsCmdSet" id="MyToolbar" context="GUID_TextEditorFactory" />
    </VisibilityConstraints>
</CommandTable> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T20:22:30.863

在此解决方法中了解如何执行此操作：[LVN！边栏 #7 - 在 Visual Studio 启动时显示工具栏](http://dotneteers.net/blogs/divedeeper/archive/2009/02/03/LVNSideBar7.aspx)

# java - 在 hbase 中批量加载时出错

> ID：11035798
> 
> 赞同：3
> 
> 时间：2012-06-14T14:54:58.340
> 
> 标签：java, hadoop, mapreduce, hbase, bulk-load

我正在通过 Java MapReduce 程序尝试 Hbase - bulkLoad。我在 Eclipse 中运行我的程序。

但我收到以下错误：

```
12/06/14 20:04:28 INFO jvm.JvmMetrics: Initializing JVM Metrics with processName=JobTracker, sessionId=
12/06/14 20:04:28 WARN util.NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable
12/06/14 20:04:29 WARN mapred.JobClient: Use GenericOptionsParser for parsing the arguments. Applications should implement Tool for the same.
12/06/14 20:04:29 WARN mapred.JobClient: No job jar file set.  User classes may not be found. See JobConf(Class) or JobConf#setJar(String).
12/06/14 20:04:29 INFO input.FileInputFormat: Total input paths to process : 1
12/06/14 20:04:29 WARN snappy.LoadSnappy: Snappy native library not loaded
12/06/14 20:04:29 INFO mapred.JobClient: Running job: job_local_0001
12/06/14 20:04:29 INFO mapred.MapTask: io.sort.mb = 100
12/06/14 20:04:29 INFO mapred.MapTask: data buffer = 79691776/99614720
12/06/14 20:04:29 INFO mapred.MapTask: record buffer = 262144/327680
12/06/14 20:04:29 WARN mapred.LocalJobRunner: job_local_0001
java.lang.IllegalArgumentException: Can't read partitions file
    at org.apache.hadoop.hbase.mapreduce.hadoopbackport.TotalOrderPartitioner.setConf(TotalOrderPartitioner.java:111)
    at org.apache.hadoop.util.ReflectionUtils.setConf(ReflectionUtils.java:62)
    at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:117)
    at org.apache.hadoop.mapred.MapTask$NewOutputCollector.<init>(MapTask.java:560)
    at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:639)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:323)
    at org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:210)
Caused by: java.io.FileNotFoundException: File _partition.lst does not exist.
    at org.apache.hadoop.fs.RawLocalFileSystem.getFileStatus(RawLocalFileSystem.java:383)
    at org.apache.hadoop.fs.FilterFileSystem.getFileStatus(FilterFileSystem.java:251)
    at org.apache.hadoop.fs.FileSystem.getLength(FileSystem.java:776)
    at org.apache.hadoop.io.SequenceFile$Reader.<init>(SequenceFile.java:1424)
    at org.apache.hadoop.io.SequenceFile$Reader.<init>(SequenceFile.java:1419)
    at org.apache.hadoop.hbase.mapreduce.hadoopbackport.TotalOrderPartitioner.readPartitions(TotalOrderPartitioner.java:296)
    at org.apache.hadoop.hbase.mapreduce.hadoopbackport.TotalOrderPartitioner.setConf(TotalOrderPartitioner.java:82)
    ... 6 more
12/06/14 20:04:30 INFO mapred.JobClient:  map 0% reduce 0%
12/06/14 20:04:30 INFO mapred.JobClient: Job complete: job_local_0001
12/06/14 20:04:30 INFO mapred.JobClient: Counters: 0 
```

我google了很多，但没有找到任何解决方案。

我尝试从控制台运行相同的程序，但出现以下错误：

```
 hadoop jar /home/user/hbase-0.90.4-cdh3u2/lib/zookeeper-3.3.3-cdh3u2.jar /home/user/hadoop-0.20.2-cdh3u2/Test.jar BulkLoadHBase_1 /bulkLoad.txt /out
Exception in thread "main" java.lang.NoSuchMethodException: org.apache.zookeeper.server.quorum.QuorumPeer.main([Ljava.lang.String;)
    at java.lang.Class.getMethod(Class.java:1605)
    at org.apache.hadoop.util.RunJar.main(RunJar.java:180) 
```

我的代码：

```
import java.io.IOException;
import org.apache.hadoop.conf.Configuration;
import org.apache.hadoop.fs.Path;
import org.apache.hadoop.hbase.HBaseConfiguration;
import org.apache.hadoop.hbase.client.Put;
import org.apache.hadoop.hbase.io.ImmutableBytesWritable;
import org.apache.hadoop.hbase.mapreduce.HFileOutputFormat;
import org.apache.hadoop.hbase.mapreduce.PutSortReducer;
import org.apache.hadoop.hbase.mapreduce.hadoopbackport.TotalOrderPartitioner;
import org.apache.hadoop.hbase.util.Bytes;
import org.apache.hadoop.io.*;
import org.apache.hadoop.mapreduce.Job;
import org.apache.hadoop.mapreduce.Mapper;
import org.apache.hadoop.mapreduce.lib.input.FileInputFormat;
import org.apache.hadoop.mapreduce.lib.input.KeyValueTextInputFormat;

public class BulkLoadHBase_1 {

    public static class BulkLoadHBase_1Mapper 
            extends Mapper<Text, Text, ImmutableBytesWritable, Put>{

        public void map(Text key, Text value, Context context
                        ) throws IOException, InterruptedException {

            System.out.println("KEY  "+key.toString());
            System.out.println("VALUES : "+value);
            System.out.println("Context : "+context);

            ImmutableBytesWritable ibw =
                    new ImmutableBytesWritable(Bytes.toBytes(key.toString()));

            String val = value.toString();
            byte[] b = Bytes.toBytes(val);
            Put p = new Put(Bytes.toBytes(key.toString()));

            p.add(Bytes.toBytes("cf"),Bytes.toBytes("c"),Bytes.toBytes(val));

            context.write(ibw, p);
        }
    }

    public static void main(String[] args) throws Exception {
        Configuration conf = new Configuration();

        Job job = new Job(conf, "bulk-load");

        job.setJarByClass(BulkLoadHBase_1.class);
        job.setMapperClass(BulkLoadHBase_1Mapper.class);

        job.setReducerClass(PutSortReducer.class);
        job.setOutputKeyClass(ImmutableBytesWritable.class);
        job.setOutputValueClass(Put.class);
        job.setPartitionerClass(TotalOrderPartitioner.class);
        job.setInputFormatClass(KeyValueTextInputFormat.class);

        FileInputFormat.addInputPath(job,
                     new Path("/home/user/Desktop/bulkLoad.txt"));
        HFileOutputFormat.setOutputPath(job,
                     new Path("/home/user/Desktop/HBASE_BulkOutput/"));     

       System.exit(job.waitForCompletion(true) ? 0 : 1);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T08:25:04.587

你是在分布式模式下启动 HBase 的吗？！如果是这样，这一行：

`org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:210)`

在您的堆栈跟踪中显示您的 map reduce 作业正在本地模式而不是分布式模式下运行。

另请注意，如果您想在控制台中运行命令，您的输入文件必须驻留在您的 hadoop 文件系统上，而不是在您的常规（例如 NTFS 或 EXT3）文件系统上。

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T10:27:55.313

问题是：这个程序需要在分布式模式下运行。并且应该运送所需的 JAR...

# ruby-on-rails - heroku Errno::ENOENT（没有这样的文件或目录 - /assets/）

> ID：11035799
> 
> 赞同：3
> 
> 时间：2012-06-14T14:54:58.993
> 
> 标签：ruby-on-rails, heroku

我有一个**仅**在生产环境中发生的问题，部署在 heroku 上。

Heroku 日志说：

```
[...]
Parameters: {"utf8"=>"✓",
             "authenticity_token"=>"...", 
             "users"=>{"name"=>"name", "email"=>"example@example.com", 
             "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"},
             "commit"=>"Join Us!"}

Processing by UsersController#create as HTML
Rendered notifier/new_user_creation.html.erb (0.7ms)
heroku[router]: POST stark-blabla-345.herokuapp.com/users dyno=web.1 queue=0 wait=0ms
service=333ms status=500 bytes=643
Completed 500 Internal Server Error in 284ms
app[web.1]: Errno::ENOENT (No such file or directory - /assets/):***   
app[web.1]: app/controllers/users_controller.rb:13:in `create 
```

添加具有以下特征的 Mailer 组件后发生此错误：

```
class Notifier < ActionMailer::Base
  default from: "..."

  def new_user_creation(user)
    @user = user
    @url= "http://stark-blabla-345.herokuapp.com/users/
                  #{user.create_digitally_signed_remember_token}/confirm"
    mail to:user.email, subject: 'bla bla, complete the registration process'   

  end

end 
```

使用以下模板 new_user_creation.html.erb ：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <title><%=t("confirm_account_creation")%></title>
      <style type="text/css">
          body{ background:#f1f1ee; }
         .title{font-size: 300%; font-family: Georgia, serif; font-weight:bold;}  
         .indented{margin-left:5%; padding:1%;}
      </style>
  </head>

<body>
  <table width="100%" id="background" border="0" cellpadding="0" cellspacing="0">
    <tr>
      <td>
        <img src="http://stark-blabla-345.herokuapp.com/assets/
          red_flower-a4105a7cc626711e8789b1c2b21777b6.png"
          align="middle">
        <span class="title"><%=t("base_title")%></span>
      </td>
   </tr>  

   <tr>
     <td>
       <p class="indented"><%=t("confirm_account_creation")%><p>
       <p class="indented"><a href="<%=@url%>">COMPLETE ACCOUNT CREATION PROCESS</a></p>
     </td>
   </tr>

  </table>  

</body>

</html> 
```

用户控制器#create():

```
def create
  @user = User.new(params[:users])
  if @user.save 
    Notifier.new_user_creation(@user).deliver
    flash.now[:block] = t("users.create.created")
    render "confirm_registration"    
  else
    render 'new'
  end     
end 
```

我的宝石文件：

```
source 'https://rubygems.org'
ruby '1.9.3'
gem 'rails', '3.2.6'
gem "heroku"
# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'
gem 'bootstrap-sass'
gem 'jquery-rails'
gem "paperclip", "2.7.0" # :git => "git://github.com/thoughtbot/paperclip.git"
gem 'bcrypt-ruby', '3.0.1'
gem 'nokogiri'
gem 'premailer-rails3'  

group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
end

group :test,:development do
  gem 'sqlite3'
  gem 'rspec-rails','2.9.0'
  gem 'execjs'
  gem 'annotate', '~> 2.4.1.beta'
end

group :test do
  gem 'spork' 
  gem 'cucumber-rails', require:false;
  gem 'capybara'
  gem 'database_cleaner'
  gem 'factory_girl'
  gem "launchy"
end

group :production do
  gem 'pg'
  gem 'thin'
end 
```

production.rb 中有趣的部分：

```
MyApp::Application.configure do
  config.action_mailer.default_url_options = 
     { host: "stark-blabla-345.herokuapp.com" }
  config.action_mailer.raise_delivery_errors = false # the same with true 
  config.action_mailer.delivery_method = :smtp
  config.action_mailer.default :charset => "utf-8"

  config.action_mailer.smtp_settings = {
    address: "smtp.gmail.com",
    port: 587,
    domain: "stark-blabla-345.herokuapp.com",
    authentication: "plain",
    enable_starttls_auto: true,
    user_name: ENV["GMAIL_USERNAME"],
    password:  ENV["GMAIL_PASSWORD"]
  }

end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T18:07:07.047

这不是 Heroku 独有的问题。`email.css`当不存在或（从 premailer-rails 1.3.x 开始）内联`style`标记[不存在](https://github.com/fphilipe/premailer-rails3/commit/4410d4ab4b3fe83de27d05b52e916b98afb94f15)时会引发此异常。

解决方案是添加到您的资产文件夹或在您的电子邮件 HTML 中`email.css`添加一个空白。`<style type="text/css"> </style>`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T13:22:05.200

已经为此苦苦挣扎了几个小时，并认为我会为您的利益添加我的解决方案。

使用 premailer-rails3 (1.3.1)

我希望我的电子邮件 CSS 与引导程序样式匹配，所以我认为一种懒惰的方法是简单地使用`<%= stylesheet_link_tag "application", :media => "all" %>`，但这会导致找不到 /assets/ 问题。

所以我最终做了以下事情：

1.  需要`*= require_tree`从我的 中删除`application.css`，这无论如何都是很好的做法，并且是主 css 文件所必需的

> ```
> *= require_self
> *= require <MyMainSiteCSS>
> */ 
> ```

1.  `app/stylesheets/email.css`使用以下内容创建

> ```
> @import "bootstrap";
> @import "bootstrap-responsive"; 
> ```

1.  将我的电子邮件视图的标题更改为：

> ```
> <head>
>   <link href="email.css" media="all" rel="stylesheet" type="text/css">
> </head> 
> ```

所以，现在一切正常，我的电子邮件中有很好的引导程序样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T20:53:24.870

你在用`premailer-rails3`宝石吗？我发现版本 1.2.0 导致了同样的问题。降级到 1.1.0 修复了它。希望有帮助！

# webdriver - 设置了节点的 Selenium Grid Hub。下一步是什么？（包括图片）

> ID：11035802
> 
> 赞同：0
> 
> 时间：2012-06-14T14:55:18.103
> 
> 标签：webdriver, selenium-grid, automated-tests

我正在使用 Selenium 2，并且当前设置了网格集线器。我有一个本地节点。

![我的集线器是什么样的](../Images/241fe3f96c276436eb7ea1af119ebdd7.png)

这就是我的集线器的样子。

我想在这些浏览器中加载相同的网页。

我是时候开始编写 webdriver 代码了吗？（在 VS 上使用 c#？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T11:54:44.283

我只能为您提供一些 java 代码，但 C# 应该非常相似。

```
String gridconfig = "your grid url";    
DesiredCapabilities capabilities = DesiredCapabilities.firefox();
RemoteWebDriver driver = new RemoteWebDriver(new URL(this.gridconfig), capabilities);

//Do your test stuff with driver 
```

# python - Python 使用 Matplotlib 将总计添加到绘图中

> ID：11035805
> 
> 赞同：2
> 
> 时间：2012-06-14T14:55:27.307
> 
> 标签：python, csv, matplotlib

有没有办法将每日总数添加到使用 matplotlib 制作的图表中。这是我目前创建的：

![当前情节](../Images/aa7cf75109bb3071b8f47f8b0852ab8c.png)

我想要做的是为每一天插入总计，例如：“每日总计是当天所有小时值的总和。

![在此处输入图像描述](../Images/9a07238939c6591c4219a89b68454721.png)

目前我的数据在 csv 中，这是一天的价值：

```
2012-02-13 05:00:00,65217
2012-02-13 06:00:00,82418
2012-02-13 07:00:00,71316
2012-02-13 08:00:00,66833
2012-02-13 09:00:00,69406
2012-02-13 10:00:00,76422
2012-02-13 11:00:00,94188
2012-02-13 12:00:00,111817
2012-02-13 13:00:00,127002
2012-02-13 14:00:00,141099
2012-02-13 15:00:00,147830
2012-02-13 16:00:00,136330
2012-02-13 17:00:00,122252
2012-02-13 18:00:00,118619
2012-02-13 19:00:00,115763
2012-02-13 20:00:00,121393
2012-02-13 21:00:00,130022
2012-02-13 22:00:00,137658
2012-02-13 23:00:00,139363 
```

我正在绘制它：

```
data = csv2rec('temp.csv', names=['time', 'values'])

rcParams['figure.figsize'] = 12, 6
rcParams['font.size'] = 8

fig = plt.figure()

plt.plot(data['time'], data['value'])

ax = fig.add_subplot(111)
ax.plot(data['time'], data['value'])
days = mdates.DayLocator()
fmt = mdates.DateFormatter('%D')
ax.xaxis.set_major_locator(days)
ax.xaxis.set_major_formatter(fmt)

fig.autofmt_xdate(bottom=0.2, rotation=90, ha='left')

ax.grid()

plt.savefig(output_name) 
```

可能有更好的方法来做到这一点，但我的想法是将 csv 中的每日值求和并将它们存储在一个数组中，使用带有某种小函数的“图例”来确定位置并将这些值从阵列进去。?? 这听起来对还是有人有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T15:10:53.213

当然 matplotlib 是一个类似 matlab 的库。它提供了为注释编写文本的能力。如下图所示（比你想要的还要复杂）： ![在此处输入图像描述](../Images/d9ed532de89c6efdd926211f1659746b.png)

可以在此处找到包含源代码的文档页面：

[http://matplotlib.sourceforge.net/api/pyplot_api.html](http://matplotlib.sourceforge.net/api/pyplot_api.html)

[http://matplotlib.sourceforge.net/users/annotations.html](http://matplotlib.sourceforge.net/users/annotations.html)

和

[http://matplotlib.sourceforge.net/users/text_props.html](http://matplotlib.sourceforge.net/users/text_props.html)

# ios - 在 iOS 5 上使用 Segues/Storyboard 弹出当前视图

> ID：11035809
> 
> 赞同：19
> 
> 时间：2012-06-14T14:55:46.063
> 
> 标签：ios, ios5, uistoryboard, segue

我正在使用 iOS 5 SDK 创建一个应用程序。我设法使用 Storyboard 的 Segues 推送视图，但我找不到弹出当前视图并返回前一个视图的正确方法。

我没有使用任何导航控制器（该应用程序没有任何顶部或底部栏）。

我不认为使用模态或以其他方式推送 segue 将是解决方案，因为它实例化了一个新控制器。

我是否必须使用带有相反动画的自定义 Segue 并在最后删除视图？或者，还有更好的方法 ？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-06-14T15:09:37.117

iOS 5 中的情节提要不提供从 segue 返回的“无代码”方式——这是您需要自己实现的东西。

如果您使用“push”segue（需要导航控制器），请使用导航控制器的`popViewControllerAnimated:`方法撤消最后一个 push segue。（或其他撤消更多操作的方法；请参阅`UINavigationController`文档。）

如果您使用“模态”segues，请调用`dismissViewControllerAnimated:completion:`呈现当前视图控制器的视图控制器（您可以从其`presentingViewController`属性中获取）。

* * *

*更新：*在 iOS 6 及更高版本中，在情节提要中“返回”有展开转场。它仍然不是无代码解决方案——也不应该是这样，因为您需要能够从模态视图控制器中区分“完成”和“取消”退出。但它确实可以让您将应用程序的更多语义流放入情节提要中。Apple 有一份[技术说明对它们进行了详细描述](https://developer.apple.com/library/ios/technotes/tn2298/_index.html)，它们也包含在[WWDC 2012 Session 407 的视频中](https://developer.apple.com/videos/wwdc/2012/?id=407)。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-06-14T15:06:13.297

您可以尝试`[self dismissViewControllerAnimated:YES completion:nil];`从要关闭的控制器调用（无论控制器已被推送，还是模态显示）。

这是相关文档：[UIViewController 类参考](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/dismissViewControllerAnimated:completion:)

> 呈现视图控制器负责关闭它呈现的视图控制器。如果您在呈现的视图控制器本身上调用此方法，它会自动将消息转发到呈现的视图控制器。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-10-08T03:57:38.517

只是为了澄清。

在被推的班级里。只需连接以下内容，控制器和视图就会弹出。

```
[self.navigationController popViewControllerAnimated:YES]; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-07-28T21:15:47.547

在您的 stroyboard 上创建 Segue 类型“自定义”。这可以来自一个按钮。创建一个名为“popSegue”的新 UIStoryboardSegue 类在 popSegue.m 文件中添加以下内容；

```
-(void)perform{
    UIViewController *sourceViewContreoller = [self sourceViewController];
    [sourceViewContreoller.navigationController popViewControllerAnimated:YES];
} 
```

- 在故事板编辑器中。

-选择segue并将Segue Class更改为“popSegue”

- 将标识符设置为“popSegue”

完毕！

您可以在整个项目中使用相同的“popSegue”类。

希望这可以帮助

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-10-11T07:30:23.777

我也在使用 Xcode 5，这就是它的完成方式。首先，在推送对方的视图代码文件中，在.h文件中创建一个IBAction方法，如下所示：

```
- (IBAction)exitToHere:(UIStoryboardPopoverSegue *)segue sender:(id)sender;

Then in the .m file add this:

- (IBAction)exitToHere:(UIStoryboardPopoverSegue *)segue sender:(id)sender {

} 
```

您可以在此方法中添加要执行的任何清理代码。接下来转到您的故事板并选择推送的视图。我假设您在视图上有某种按钮，用户点击以表示他已完成。单击该按钮，按住键并拖动到视图下方的绿色框，即出口。释放鼠标按钮但继续按住键。将出现一个弹出窗口，您的方法将显示在列表中。选择该方法。现在，当用户单击按钮时，视图将弹出，您将返回到启动方法。

# javascript - 从外部锚点/链接激活手风琴面板

> ID：11035811
> 
> 赞同：0
> 
> 时间：2012-06-14T14:55:50.507
> 
> 标签：javascript, jquery-ui, jquery-ui-accordion

我一直在尝试从外部链接激活 jQuery UI 手风琴面板。

我在页面中有一个手风琴小部件的链接，我想用这些链接来激活手风琴的面板。这些链接不在手风琴小部件的标记内。

这些链接正在操纵选项卡交互性并用于弹出 AJAX 内容。在应用程序的某些状态下，我的手风琴选项对象的 { navigation: true } 部分被遗忘了。我相信这是因为我正在启动 window.reload.location() 以返回应用程序的某些状态。

下面的函数显示了这一点。我认为我需要的是一个基于散列的自定义导航过滤器，或者可以在此函数中工作的位置，以根据用户所在的 URL 激活手风琴面板。我在脚本的开头确实将导航设置为 true，稍后会出现以下脚本...

```
// "Back to xxxtabTitle" button used to revert tabs to their default state after    
// photoNav pop-in AJAX content has been loaded
$('#mainContent').on('click', '.backToInitTab', function(event) {
    event.preventDefault();
    window.location.reload();

  // accordion navigation filter to open correct accordion panel on click event
    // Can you help with this? I'd greatly appreciate it.
  // /accordion navigation filter
    });

// /"Back to xxxtabTitle" button 
```

任何有关此问题的帮助或见解将不胜感激！提前致谢。此致 迪克·柯克兰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T18:25:57.690

答案排序：我不得不放弃使用带有 jQ​​uery UI 手风琴的导航选项，因为我在网站上使用的设计包含在页面和/或 UI 选项卡面板上执行重新加载的按钮 window.location.reload(); . 如果您在站点中重新加载内容，您可能会看到导航通过打开所需的手风琴面板开始生效，但随后看到面板收缩。我相信这是因为通常情况下，手风琴面板本身的点击会指示 UI 手风琴组件如何对哈希历史做出反应。我们关闭了导航并手动实例化了哪些面板应该在最少的页面上打开。这允许 AJAX 功能（选项卡式内容）仍然打开手风琴面板，并且看到的唯一动画是总页面重新加载时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T12:10:54.120

写

$( "#accordion" ).accordion({ active: 2 });

参考[这个网站](https://stackoverflow.com/questions/5140938/jquery-accordion-activate-from-external-links)

# sql-server-2008 - 将字符串与 SmallDateTime 用于工作

> ID：11035814
> 
> 赞同：2
> 
> 时间：2012-06-14T14:56:02.160
> 
> 标签：sql-server-2008, sql-server-2005, vb6, type-conversion

我正在尝试`VB6`在我的工作中调试一个旧程序。它充满了错误和硬编码的东西。

该程序正在连接 SQL Server 2005 数据库以使用存储过程读取和写入信息。

由于该程序在我工作时仍在使用，因此我备份了数据库以测试一些东西并在我的 SQL Server 2008 版本中恢复它。一切正常。

当我第二天早上进来时，我得到了一个错误，我没有在晚上使用该程序。

问题 ：

```
"exec dbo.sp_Get_Wait_Data '" & DateEx & "'" 
```

`DateEx`是一个字符串，包含`"2012/06/14"`

存储过程：

```
[sp_Get_Wait_Data] @Datest as char(10)  
AS 
    SELECT
        (A lot of column names here) 
    FROM
        Fiche
    LEFT JOIN 
        voyage ON fcid = vofiche
    LEFT JOIN 
        client on fcaccount = cusnov
    WHERE
        fcdate = @Datest 
        AND (void is null or (void > 0 and (void <> 999 and               void <> 1000 and void <> 998))) 
        AND ((fcremarques NOT LIKE '%SYSANNULATION%' OR
              fcremarques IS NULL)  
        AND fcrettime IS NOT NULL)
    ORDER BY 
        FcTime, FcOrgSite, fcdessite 
```

错误信息：

> 将 varchar 数据类型转换为 smalldatetime 数据类型导致值超出范围

所以错误出现`fcdate=@Datest`在存储过程中。我尝试在存储过程中添加这一行

```
SELECT convert(datetime, @Datest, 120) 
```

这对于查询中的转换来说就像一个魅力，但是当其他查询试图访问这个变量时，它会在程序中导致数百个其他错误，所以它不是一个选项。

知道为什么这个查询昨天工作得很好，现在它给了我这个错误吗？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T15:20:20.730

您可能在连接到数据库副本时[设置了 dateformat dmy 。](http://msdn.microsoft.com/en-us/library/ms189491.aspx)日期格式由使用的语言隐式设置。[设置语言](http://msdn.microsoft.com/en-us/library/ms174398.aspx)。

您可以将参数的格式更改为`YYYYMMDD`安全的格式，`set dateformat`甚至更好，将您的参数更改为`datetime`.

如果这不是一个选项，您可以使用重写您的查询 `where fcdate=convert(datetime, @Datest, 111)`

# javascript - SenchaTouch2：如何确定是否因为实际显示了视图而触发了show事件

> ID：11035815
> 
> 赞同：1
> 
> 时间：2012-06-14T14:56:04.580
> 
> 标签：javascript, sencha-touch-2

在 sencha touch 2中，`Ext.navigation.View`可以进出其他视图。那些其他视图触发事件，如和。可悲的是，这些事件在推送时按此顺序触发：（注意粗体）`push()``pop()``hide``show`

1.  初始化
2.  **隐藏**
3.  启用
4.  节目

弹出时像这样：

1.  停用
2.  隐藏
3.  **节目**
4.  消除
5.  破坏

因此，依赖任何一个`show`或`hide`事件并不是最好的主意，因为在这两种情况下都会被解雇。
我认为这是一个错误，并且已经[讨论过](http://www.sencha.com/forum/showthread.php?180885-BETA2-Show-and-Hide-events-when-pushing-and-popping-views-fire-unexpectedly)类似的事情。尽管如此，这种行为仍然存在于我使用的版本（ST 2.0.1.1）中，并且根据论坛中@rdougan 的解释：

> 这背后的原因是，当一个项目从卡片布局中移除时，它实际上可能会显示在其他地方 - 或者它可能正在变为可浮动的。所以我们必须将项目恢复到原来的可见状态。

它也不会改变。所以我试图找出**真正**发生的事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:56:05.297

这个问题有一个解决方案。假设一个监听视图内的事件，而不是控制器，你可以使用这个小片段：

```
Ext.Array.contains(this.up('navigationview').getActiveItem().getXTypes().split('/'), this.xtype) 
```

检查您的视图是实际显示 ( `true`) 还是隐藏 ( `false`)。当然，您必须在[`xtype`](http://docs.sencha.com/touch/2-0/#!/api/Ext.Panel-cfg-xtype)您使用的视图上定义自己的配置属性才能使其工作。就我而言，它是一个`Ext.Panel`.

# javascript - 表单值在 IE8 中丢失，但 Firefox、IE9 有效

> ID：11035818
> 
> 赞同：0
> 
> 时间：2012-06-14T14:56:14.813
> 
> 标签：javascript, spring, internet-explorer-8, double-click

我遇到了一个场景，我只在 IE8 浏览器中被抛出了一个意外的行为。IE9 和 Firefox 浏览器工作正常。行为如下：

1.  用户填写了一个表单
2.  故意 - 用户将必填字段留空
3.  用户单击“提交按钮”，浏览器发送 POST 请求
4.  预期行为 - 错误消息与已提供的数据一起抛出。只有必填字段应该留空，因为我们在第 2 步中没有提供任何内容。但相反，我收到一条错误消息，之前的数据丢失，即表单为空。

请注意，这只发生在 IE8 中。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T14:56:15.123

我将自己回答这些问题。所以，这就是我的场景中发生的事情。这是一个双击问题。但我只点击了一次按钮。那么这是怎么发生的呢？一些从事此项目的程序员正在处理表单提交，他使用 JavaScript 进行了另一次提交。但是，这在 Firefox 或 IE9+ 中是如何工作的呢？

我使用 Fiddler 进行了深入研究——我注意到在 IE8 浏览器中向服务器发送了两个请求。但是 IE9 和 Firefox 正确处理了这种情况（即了解双击）并且只发送 1 个 POST 请求而不是 2 个。

使用的技术：Spring Framework 2.0、JSP、HTML、JavaScript

数据丢失的原因也与服务器有关 - Spring 在处理请求时修改了会话属性（具体来说，它是一个临时删除并重新添加的 formObject）。当同时有另一个请求时，它会通过另一个管道（handleInvalidSubmit），最终创建一个新的 formObject 并因此破坏旧数据。

希望这对其他人有帮助:)

# javascript - 使用 javascript/jquery/json/etc 获取国际时间

> ID：11035825
> 
> 赞同：0
> 
> 时间：2012-06-14T14:56:36.167
> 
> 标签：javascript, jquery

我试图找出一些通过 JavaScript、jQuery、JSON 等获取实际时间的方法......

我有这两个网站正是为了这个目的而托管时间

*   [http://www.timeapi.org/utc/now](http://www.timeapi.org/utc/now)
*   [http://json-time.appspot.com/time.json](http://json-time.appspot.com/time.json)

这个网站实际上解释了如何获得时间，但我似乎无法弄清楚，因为我真的不知道 json，只知道 javascript。

*   [http://james.padolsey.com/javascript/getting-the-real-time-in-javascript/](http://james.padolsey.com/javascript/getting-the-real-time-in-javascript/)

我进行了很多搜索，但不知道如何使用 JavaScript 从另一个网站提取数据。

如果有人可以帮助我将其中一个站点的时间转换为 JavaScript 中的变量，那就太好了。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T15:06:58.720

如果您使用的是 chrome 或 firefox，则可以在控制台中运行它：

```
jQuery.ajax({dataType:'jsonp',
             url:'http://json-time.appspot.com/time.json?tz=Europe/London',
             success:function(data){x=data;console.log(x);}}) 
```

您会看到 x 现在包含 json 时间对象。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T15:25:19.383

如果您使用 Jquery 库，我只是查看了该教程，并进行了非常小的修改，这很有效：

```
<html>
<head>
<script src="js/jquery-1.2.6.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript">
$.getTime = function(zone, success) {
    var url = 'http://json-time.appspot.com/time.json?tz='
            + zone + '&callback=?';
    $.getJSON(url, function(o){
        success && success(o.datetime);
    });
};

// Usage:
function doit(){
    $.getTime('America/Detroit', function(time){
    alert(time);
});
}

$(document).ready(function(){ $('#summat').click(doit); });
</script>
</head>
<body>
<div id="summat">CLICK ME</div>
</body>
</html> 
```

其中变量“时间”是给定时区（即美国/底特律）的本地时间和日期字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T15:19:00.917

您是否只是想获取您当前位置的“现在”时间？如果是这样，您可以像这样使用标准的javascript `new Date()`：

```
var xx = new Date();
hour = xx.getHours();
min = xx.getMinutes();
time = hour + ':' + min;
console.log(time); 
```

请参阅此处的示例：http: [//jsbin.com/esaxel/2/edit](http://jsbin.com/esaxel/2/edit)

这只是将其记录到控制台，但您可以轻松地将其应用于 div 或其他一些元素。

编辑：这是将其放入 div 的示例，我还修复了变量声明：http: [//jsbin.com/esaxel/3/edit](http://jsbin.com/esaxel/3/edit)

# oracle - Oracle 触发器更新现有行

> ID：11035828
> 
> 赞同：1
> 
> 时间：2012-06-14T14:56:44.670
> 
> 标签：oracle, plsql, triggers, oracle11g

我有一个看起来像这样的触发器：

```
create or replace
TRIGGER cluster_check
before insert on my_table
FOR EACH ROW

when (passive_server = new.server)

begin
ROLLBACK;
UPDATE my_table
set (server,passive_server) = (passive_server,server) where passive_server = new.server;
end; 
```

我`Error: ORA-04076: invalid NEW or OLD specification` 在编译时遇到错误。

基本上我要做的是检查插入以查看传入服务器是否与另一条记录中的被动服务器匹配，如果是，则取消插入并交换现有记录的被动和主动服务器。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T15:02:15.683

表上的触发器不能像这样更改操作。

您可以在 之上定义一个视图`my_table`，`INSERT`对视图执行操作，然后使用`instead of insert`触发器将`INSERT`操作更改为`UPDATE`. 但是，您的所有 DML 都必须与视图而不是表背道而驰。您可能会重命名表，然后创建一个名为的视图以`my_table`使转换更容易。

然而，在你走这条路之前，你确定你首先需要一个触发器吗？您确定您的应用程序不能执行诸如调用存储过程来确定要做什么或者它不能执行 a`MERGE`而不是a 的事情`INSERT`吗？

# java - 创建一个可供整个应用程序访问的类

> ID：11035830
> 
> 赞同：0
> 
> 时间：2012-06-14T14:56:47.103
> 
> 标签：java, servlets, jboss

在 android 中，有一种机制可以确保整个应用程序只能使用一个类的一个实例。这可以通过从 Application 派生该类来完成。

可以在 servlet 中做一些类似的事情吗？我想在部署应用程序时初始化一个类。这个类应该只有一个实例。这样所有的 servlet 都可以访问它。
我知道您可以将数据存储在 servlet 上下文的哈希图中。但我不想那样做。我想用它的功能编写我自己的类。这应该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T14:58:53.570

我认为你所追求的只是一个[单例](http://en.wikipedia.org/wiki/Singleton_pattern)。

这最好通过定义具有单个实例的枚举来实现。（请注意，枚举允许您像类一样拥有成员函数。）

```
public enum YourSingleton {

    INSTANCE;

    // Your methods...

} 
```

然后你访问它

```
YourSingleton.INSTANCE 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-14T14:59:33.767

所以，用它自己的函数或你喜欢的任何东西创建你想要的任何类，然后把它放在`ServletContext`启动时。您可以使用 a`ServletContextListener`来初始化和删除它。这有什么限制？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T15:01:01.783

使用`singleton pattern`这样对实例方法（例如）的第一次调用`YourClass.getInstance()`将创建实例，并将在整个应用程序中重用。

# sed - 通过从其他文件中获取相应数据来创建文件？

> ID：11035831
> 
> 赞同：0
> 
> 时间：2012-06-14T14:56:56.420
> 
> 标签：sed, awk

例如，我有一个 SNP 列表（我们称之为`file1`）：

```
SNP_ID      chr position   
rs9999847   4   182120631
rs999985    11  107192257
rs9999853   4   148436871
rs999986    14  95803856
rs9999883   4   870669
rs9999929   4   73470754
rs9999931   4   31676985
rs9999944   4   148376995
rs999995    10  78735498
rs9999963   4   84072737
rs9999966   4   5927355
rs9999979   4   135733891 
```

对于不同的表型，我有另一个具有相应 P 值 (P) 和 BETA（如下所示）的 SNP 列表，这里我只显示了一个（我们称之为`file2`）：

```
CHR SNP         BP      A1 TEST NMISS   BETA    SE      L95     U95     STAT    P
1   rs3094315   742429  G   ADD 1123    0.1783  0.2441  -0.3    0.6566  0.7306  0.4652
1   rs12562034  758311  A   ADD 1119    -0.2096 0.2128  -0.6267 0.2075  -0.9848 0.3249
1   rs4475691   836671  A   ADD 1111    -0.006033 0.2314 -0.4595 0.4474 -0.02608 0.9792
1   rs9999847   878522  A   ADD 1109    -0.2784 0.4048  -1.072  0.5149  -0.6879 0.4916
1   rs999985    890368  C   ADD 1111    0.179   0.2166  -0.2455 0.6034  0.8265  0.4087
1   rs9999853   908247  C   ADD 1110    -0.02015 0.2073 -0.4265 0.3862  -0.09718 0.9226
1   rs999986    918699  G   ADD 1111    -1.248  0.7892  -2.795  0.2984  -1.582  0.114 
```

现在我想制作两个名为的文件`file3`，`file4`这样：

`file3`应包含：

```
SNPID    Pvalue_for_phenotype1   Pvalue_for_phenotype2   Pvalue_for_phenotype3 and so on....
rs9999847 0.9263                 0.00005                 0.002                .............. 
```

第一列（SNPID）`file3`将被修复（我的芯片中的所有snp都将在此处列出），我想编写一个程序，以便它匹配snp id`file3`并`file2`获取相应snp的P值id 并将其从`file2`.

`file4`应包含：

```
SNPID    BETAvale_for_phenotype1     BETAvale_for_phenotype2     BETAvale_for_phenotype3 .........
rs9999847 0.01812                       -0.011                            0.22 
```

中的第一列（SNPID）`file4`将被固定（我的芯片中的所有 SNP 都将在此处列出），我想编写一个程序，以便它匹配 SNP ID`file4`并`file2`获取相应 SNP ID 的 BETA 和把它`file4`从`file2`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T21:08:27.920

[这是一个关于如何将列的数据传输到行（使用 awk）](https://stackoverflow.com/questions/9534744/how-to-transfer-the-data-of-columns-to-rows-with-awk)的简单练习？

**文件 2 到文件 3。**

我假设您的机器具有大 RAM，因为我认为您在 file2 中有数百万行。

您可以将此代码保存到 column2row.awk 文件中：

```
#!/usr/bin/awk -f                                                        

BEGIN {
    snp=2
    val=12
}

{
    if ( vector[$snp] )
        vector[$snp] = vector[$snp]","$val
    else
        vector[$snp] = $val
}

END {
    for (snp in vector)
        print snp","vector[snp]
} 
```

其中 snp 是第 2 列，val 是第 12 列（pvalue）。现在你可以运行脚本：

```
/usr/bin/awk -f column2row.awk file2 > file3 
```

如果您的 RAM 较小，则可以划分负载：

```
cat file1 | while read l; do s=$(echo $l|awk '{print $1}'); grep -w $s file2 > $s.snp; /usr/bin/awk -f column2row.awk $s.snp >> file3; done 
```

它从 $l（行）第一个参数（$s，snp 名称）中恢复，在 file2 中搜索 $s 并创建有关每个 snp 名称的小文件。然后它使用 awk 脚本生成 file3。

**文件 2 到文件 4。**

您可以将关于 val 的值从第 12 列修改为 awk 脚本到第 7 列。

# c# - 在 C# 中设置 com 控件的 TYPEATTR

> ID：11035833
> 
> 赞同：0
> 
> 时间：2012-06-14T14:57:00.707
> 
> 标签：c#, com, interop

我已将 vb6 ocx 转换为 C# com 控件。此 com 控件由以下内容设置：

```
[Guid("986067DA-F6C4-4C19-82ED-5D4DF1F54DB1")]
[ClassInterface(ClassInterfaceType.AutoDual)]
//Implementing interface that will be visible from PowerBuilder
[ProgId("Cmnd90.ACmnd")]
[ComVisible(true)] 
```

在 vb6 应用程序中加载此 com 控件时，它显示正确。但客户正在使用 powerbuilder 并没有显示在那里。客户说，为了让 com 控件在他的应用程序中显示，我们需要将控件的 TYPEFLAGS 设置为 TYPEFLAG_FCONTROL。这怎么能在.NET中完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T15:14:42.603

也添加以下装饰：

```
[System.Runtime.InteropServices.TypeLibType(TypeLibTypeFlags.FControl)] 
```

请参阅：http: [//msdn.microsoft.com/en-us/library/system.runtime.interopservices.typelibtypeattribute.aspx](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.typelibtypeattribute.aspx)

# c# - 如何从 C# 执行 DOS SET 命令并在 exe 关闭后使变量保持不变？

> ID：11035834
> 
> 赞同：4
> 
> 时间：2012-06-14T14:57:01.023
> 
> 标签：c#, set, dos, process.start

我在 DOS 命令进程中启动了一个 C# 控制台可执行文件。

我需要能够从 C# 可执行文件执行 DOS 命令（特别是我需要能够设置变量）并使变量保持不变，以便 DOS 进程的其余部分可以引用它们。

IE：

启动 DOS 进程 -> C# 执行 SET 命令设置 UserVariable -> DOS 进程可以 ECHO %UserVariable%

由于性能原因，我无法将 set 命令写入 dos 脚本。事实上，我根本没有任何文件 I/O。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T14:59:30.693

SETX 保留环境变量。检查这个：[http ://technet.microsoft.com/es-es/library/cc755104(v=ws.10).aspx](http://technet.microsoft.com/es-es/library/cc755104%28v=ws.10%29.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T15:01:04.530

The problem isn't with the fact that you are calling SET from within a C# application. Even if you open a windows prompt and call SET to set a user variable, it will not persist through sessions.

> Display, set, or remove CMD environment variables. Changes made with SET will remain only for the duration of the current CMD session.

[Source](http://ss64.com/nt/set.html).

I advise you to set variables directly through .Net, anyway. You can use [Environment.SetEnvironmentVariable](http://msdn.microsoft.com/en-us/library/z46c489x.aspx) to do this.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T14:37:32.650

If you are running a C# app from a dos script and wishing to use variables set in the app afterwards from the script, I don't know how to do that for just the context of that script from within C#, the other answers here show you for the machine itself but I appreciate you need something with a less permanent scope.

A meta-programming workaround this could be to:

*   Call the C# app from a DOS FOR loop
*   From the C# app, output to the console SET commands
*   Use the for loop to execute the app output

The calling DOS script would look like this:

```
FOR /F "tokens=* delims=" %%A IN ('MyApp.exe') DO ( 
   %%A
) 
```

The Console output from MyApp.exe would need to be in the form:

```
SET UserVariable1=UserValue1
SET UserVariable2=UserValue2 
```

And then each of the output lines would be executed by the calling FOR loop and the variables would then exist in the context of the calling script.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T15:00:47.320

Use the following .NET method instead:

[Environment.SetEnvironmentVariable](http://msdn.microsoft.com/en-us/library/96xafkes)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T13:54:13.827

这绝不是一个答案，但从问题的性质来看，这种“妥协”是我们暂时选择的路径。

我们将使用由 C# 应用程序创建的批处理脚本，该脚本将包含所需的所有简单设置命令，然后由调用 C# 应用程序的 CMD 进程执行。

请随时添加任何进一步的想法和评论，因为这不是理想的解决方案。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-24T01:25:03.240

Unfortunately, so far as I can tell, this is the "solution" that is available, through at least Windows 7\. I've been experimenting with various ways to set and subsequently use environment variables, and the bottom line of my research is that, if you want to use a variable, it must either be set in advance into the USER or MACHINE key, or it must be a local variable, set by script command, then tested further along in the same script.

So far as I am concerned, the third element in that enumeration, Process, is essentially useless. The only way that I can see that it *might* be useful is if a process spawns another process, passing its environment to the child process. That's overkill for most run-of-the-mill administrative scripts.

# iphone - If else if 语句中缺少预期的表达式

> ID：11035835
> 
> 赞同：0
> 
> 时间：2012-06-14T14:57:01.347
> 
> 标签：iphone

我正在**尝试解决我的[另一个问题](https://stackoverflow.com/questions/11034544/pause-button-when-pressed-again-to-resume-reloading-view-controllers)**。所以我想也许用 if else if else 语句可以解决我的问题。

但我认为我在下面的 if else else if 语句中缺少预期的表达式。

```
-(void)playpauseAction:(id)sender 
{
    if ([audioPlayer isPlaying]){       
            [sender setImage:[UIImage imageNamed:@"Play Icon.png"] forState:UIControlStateSelected];
        [audioPlayer pause];
        [self pauseTimer];
    } else {
        [sender setImage:[UIImage imageNamed:@"pause.png"] forState:UIControlStateNormal];
        [audioPlayer play];
        [self resumeTimer];
    }  
    else if
    {
        [audioPlayer play];
        self.timer = [NSTimer scheduledTimerWithTimeInterval:11.0
                                        target:self
                                        selector:@selector(displayviewsAction:)
                                        userInfo:nil
                                        repeats:NO];
    }    
} 
```

知道我在这里做错了什么。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:59:27.853

你需要`else if`在`else`块之前。并且`else if`是次要条件，它需要某种布尔语句，就像正常的一样`if`，例如`![audioPlayer isPlaying]`. 我不确定你想用你的代码实现什么，所以我不能提供更多的建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T15:30:00.930

以这种方式使用它

```
-(void)playpauseAction:(id)sender 
{
     if([audioPlayer isPlaying]){       
       [sender setImage:[UIImage imageNamed:@"Play Icon.png"]          forState:UIControlStateSelected];
      [audioPlayer pause];
      [self pauseTimer];
} 
else if(put your condition here)
{
    [audioPlayer play];
    self.timer = [NSTimer scheduledTimerWithTimeInterval:11.0
                                    target:self
                                    selector:@selector(displayviewsAction:)
                                    userInfo:nil
                                    repeats:NO];
}   
else {
    [sender setImage:[UIImage imageNamed:@"pause.png"] forState:UIControlStateNormal];
    [audioPlayer play];
    [self resumeTimer];
    }   
} 
```

希望对你有帮助..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T14:59:45.453

你怎么能有if ... else ... elseif？

您的代码不只是顺序错误吗？很确定你不能拥有 else 的 elseif。

if elseif else?

# jquery-mobile - 如何清理 jquery_mobile.css 文件？

> ID：11035836
> 
> 赞同：0
> 
> 时间：2012-06-14T14:57:04.000
> 
> 标签：jquery-mobile

谷歌浏览器审计报告 jquery_mobile.css 占用 904 KB（缩小），其中 87% 没有在当前页面中使用，我的网络应用程序中的大多数页面都是相似的。我想知道是否有一种简单的方法来清理该文件并删除所有不用于保存数据传输的样式。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T15:06:09.850

由于 jquery 带有大量控件，因此没有简单的方法。您将是唯一一个知道您正在使用哪些以及您没有使用哪些的人。

我认为减小 CSS 大小的唯一方法是使用 github存储库[https://github.com/jquery/jquery-mobile/tree/master/css](https://github.com/jquery/jquery-mobile/tree/master/css)并为您正在使用的组件选择 CSS 文件。

这意味着当有新版本时必须手动获取更新，而不是仅仅从最新版本中删除 CSS 文件。

# ios - 使用 EXC_BAD_ACCESS 进行属性崩溃的 getter 方法

> ID：11035840
> 
> 赞同：5
> 
> 时间：2012-06-14T14:57:25.280
> 
> 标签：ios, objective-c, exc-bad-access, getter-setter

我已经声明了一个属性 someProperty 并合成了它：

@synthesize someProperty = _someProperty;

但是当我在代码中调用它时，我会在我的 getter 覆盖方法中得到 EXC_BAD_ACCESS。为什么？？

```
- (NSString *) someProperty {  <---EXC_BAD_ACCESS HERE
    if(!self.someProperty)
        return self.someOtherProperty;
    return self.someProperty;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-14T15:07:56.757

我想你可能会得到一个**堆栈溢出！**因为线

```
if(!self.someProperty) 
```

会打电话

```
- (NSString *) someProperty 
```

递归直到递归堆栈溢出。

同样，如果它可以到达返回线，它也会做同样的事情。

# css - CSS - 如何影响除一个特定图像之外的所有图像

> ID：11035841
> 
> 赞同：0
> 
> 时间：2012-06-14T14:57:36.073
> 
> 标签：css, image

我如何设置条件以影响我网页中的所有图像（通过 CSS） ，**除了**我已经专门设置条件的一张特定图像？

例如：

```
#rightMain img{
    width: 100%;
    height: 100%;
    border: 1px solid #000;
} 
```

这会影响`#rightMain`ID 中的任何图像。

然而，

```
img{
    height: 100%;
} 
```

这也会影响`#rightMain`ID 中的图像，因为它会扭曲图像的整体分辨率，使其看起来不自然。

我想知道如何影响除 in 之外的所有图像，`#rightMain`因为我已对该图像应用了特定格式并且不希望更改它；它必须存在于一种状态中，并且仅存在于一种状态中，在`#rightMain`div 中。

我知道声明一个 div 类/ID 来影响子/父/兄弟元素等，但我似乎无法弄清楚这一点。

我的主要目标是保持图像`#rightMain`与声明的完全一致，但也能够影响页面/站点的其余部分中的所有图像（不包括上述图像）。

任何帮助将不胜感激。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T15:04:19.613

您正在使用两个选择器设置 height: 100% - 我看不出导致您出现问题的差异在哪里？

在你澄清你的问题之前，我唯一想到的是：

```
#rightMain img {
    width: 100%;
    height: auto; /*override height: 100%; */
    border: 1px solid #000;
}

img{
    height: 100%;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T15:13:13.410

优先级转到更具体的 CSS 规则，如果是相同的 CSS 规则，优先级转到最后一个解析的规则。

在你的情况下

```
#rightMain img{
    width: 100%;
    height: 100%;
    border: 1px solid #000;
} 
```

比更具体

```
img{
    height: 100%;
} 
```

因此#rightMain img { ... } 可以重写指定到 img { ... } 规则中的属性。

您也可以使用 :not() CSS3 选择器，但有风险，因为并非所有浏览器都支持，您可以在此处阅读更多信息：http: [//kilianvalkhof.com/2008/css-xhtml/the-css3-not-选择器/](http://kilianvalkhof.com/2008/css-xhtml/the-css3-not-selector/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T15:04:18.070

html:

`<img id="myid" src="somepic.png" />`

CSS：

```
img#myid {
   /*apply some props to it*/
} 
```

确保在声明适用于所有图像的任何代码*之后*放置此 img#myid 选择器。

# c# - SP 在 EF 5 CF 中有多个结果

> ID：11035846
> 
> 赞同：3
> 
> 时间：2012-06-14T14:57:56.667
> 
> 标签：c#, entity-framework, ef-code-first, asp.net-mvc-4, entity-framework-5

我将 Code First 与 EF 5 一起使用。目前，我的 SP 只返回单个结果以将它们与 EF 绑定。我想知道是否可以使用 Code First 返回多个结果？我虽然阅读了使用 DB First 的文章。但是CF什么都没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T07:42:36.707

目前仅在 EDMX（数据库优先方案）中支持具有多个结果集的存储过程。此外，目前[没有设计器支持](http://data.uservoice.com/forums/72025-entity-framework-feature-suggestions/suggestions/1051207-design-time-support-for-multiple-results-in-stored)，因此您必须在 XML 中手动映射它们。

# eclipse - Eclipse PyDev 断点显示不同的图标并且不起作用

> ID：11035850
> 
> 赞同：2
> 
> 时间：2012-06-14T14:58:05.187
> 
> 标签：eclipse, pydev

断点已经为我工作了好几个星期，但昨天他​​们停止了工作。当我创建断点图标时，显示的不是通常的放大镜，而是带有一条线的放大镜。

我尝试了[pydev 断点中的建议不起作用](https://stackoverflow.com/questions/9486871/pydev-breakpoints-not-working)

例如

```
import sys
print 'current trace function', sys.gettrace() 
```

报告“当前跟踪函数 main.PyDB 对象位于 0x101416090>>”

我尝试在另一个 Python 项目中访问断点，那里的断点也有同样的问题。重新启动 Eclipse、Mac 和重新安装 PyDev 没有效果。

我尝试在我的 Mac 上的另一个 Eclipse 安装中安装 PyDev，并在那里找到 Python 工作中的断点。

任何想法，任何人？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-31T10:00:45.963

截图应该是这样的：

![在此处输入图像描述](../Images/7b2b107fe580602eca64a24613cdb129.png)

那是因为您在 Eclipse 中启用了“跳过所有断点”，在此处显示： ![在此处输入图像描述](../Images/4a43a9255eb6df8646da681b40a3abaf.png)

还有有用的信息：

[跳过eclipse中的所有断点](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Freference%2Fviews%2Fbreakpoints%2Fref-skipall_viewaction.htm)

[eclipse中不同的断点注释含义](https://stackoverflow.com/questions/4079000/what-different-breakpoint-annotations-mean-in-eclipse)

另一个别名问题：[eclipse-pydev-breakpoint-does-not-stop-and-show-a-different-icon](https://stackoverflow.com/questions/16851290/eclipse-pydev-breakpoint-does-not-stop-and-show-a-different-icon)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T15:34:07.393

如果它显示一条穿过它的线，您可能在断点视图中单击了“跳过所有断点”......在这种情况下，再次单击该选项是一个问题？

如果不是这样，请发布屏幕截图并查看您的错误日志以了解相关内容...

# javascript - 非常奇怪的Javascript范围问题

> ID：11035855
> 
> 赞同：0
> 
> 时间：2012-06-14T14:58:17.323
> 
> 标签：javascript, variables, scope

以下变量 my_cords 在进入谷歌地图功能时未定义，任何人都可以理解为什么并可能给我一个解决方法吗？我已经在顶部定义了它并将它设置在一个回调函数中，我之前已经看到它在全局变量上工作..

```
$(document).ready(function () {

var my_cords;
var map;

function getCareHome() {

    geocoder = new google.maps.Geocoder();

    //var address = document.getElementById("address").value;

    var address = "address here";

    geocoder.geocode( { 'address': address}, function(results, status) {

        if (status == google.maps.GeocoderStatus.OK) {

            my_cords = results[0].geometry.location;

        } else {

            alert("Sorry we couldn't locate the carehome on the map: " + status);
            return false;

        }

    });

    var myOptions = {
        zoom: 7,
        center: my_cords,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    }

    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

}

getCareHome();

}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T15:00:25.857

geocoder.geocode 是一个异步函数。在某些事件（可能是 HTTP 响应的到达）触发之前，设置的匿名函数`my_cords`不会运行。

将依赖于它运行的代码移动到该函数内部。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T15:00:24.373

`.geocode`是一个异步调用。

尝试在函数中使用回调。

例如：

```
geocoder.geocode( { 'address': address}, function(results, status) {

    if (status == google.maps.GeocoderStatus.OK) {

        createMap(results[0].geometry.location);

    } else {

        alert("Sorry we couldn't locate the carehome on the map: " + status);
        return false;

    }

});

var createMap = function(my_cords)  {
     var myOptions = {
        zoom: 7,
        center: my_cords,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    }

    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T15:02:29.503

因为*异步*`geocode`运行，您的代码使用later（设置）将在运行的完成回调*之前*看到 的值- 也是如此。*`my_cords``myOptions``my_cords` *`geocode``myOptions.center``undefined`**

 **如果您`my_cords`在设置 时需要`myOptions`，您必须将该代码*移到*`geocode`.**

# eclipse - Egit：一步完成添加、提交和推送？

> ID：11035857
> 
> 赞同：4
> 
> 时间：2012-06-14T14:58:21.523
> 
> 标签：eclipse, egit

大多数情况下，当我在 eclipse 中使用 git 修改受版本控制的文件时，我会执行以下 3 个步骤：

```
1) Add to index
2) Commit
3) Push 
```

使用 EGit 在 Eclipse 中一步执行上述 3 个步骤时是否有可能？我知道前两个步骤可以结合起来：

[http://www.vogella.com/blog/2010/12/25/git-alias-add-commit/](http://www.vogella.com/blog/2010/12/25/git-alias-add-commit/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T20:32:23.317

这在新的 EGit 版本 2.1 中成为可能。在提交对话框的底部，您现在可以选中“将更改推送到上游”选项。

另见：[EGit 2.1：新的和值得注意的](http://wiki.eclipse.org/EGit/New_and_Noteworthy/2.1)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-01-12T17:29:14.553

这会将修改后的文件添加到暂存区，然后确认，这一切都在一个步骤中完成。

`git commit -am "message for commit"`

`git add file1 file2 file3 && git commit -m "message for commit"`

# pdf-generation - 如何将 Orbeon Forms 与不支持 JavaScript 的 PD4ML 集成？

> ID：11035863
> 
> 赞同：1
> 
> 时间：2012-06-14T14:58:46.653
> 
> 标签：pdf-generation, orbeon, pd4ml

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T18:37:10.730

如果您使用 Form Builder 创建表单，[Form Runner](http://www.orbeon.com/forms/orbeon-form-runner)将能够自动为您生成 PDF。为此，Form Runner 为此使用了[Flying Saucer](http://code.google.com/p/flying-saucer/)，看起来类似于 pd4ml。

如果您正在“手动”创作 XForms，并且想要使用 pd4ml，那么您需要在将 HTML 提供给 pd4ml 之前对其进行一些后处理。您可以看到 Form Runner 在[`print-pdf-notemplate.xpl`](https://github.com/orbeon/orbeon-forms/blob/master/src/resources/apps/fr/print/print-pdf-notemplate.xpl); 特别是，查找嵌入在该管道中的 XSLT 样式表，您很可能希望对 pd4ml 执行类似的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T14:08:04.340

好吧，我发现我所有表单的**pageflow.xml**都引用了属性**epilogue url="oxf:/config/epilogue.xpl**

然后我进入**config/property.xml**并看到它链接到 /config/theme-plain.xsl

```
And I add a stylesheet there on theme-plain.xsl 
```

（请参阅 theme-examples.xsl 以了解如何操作）

```
xhtml:link rel="stylesheet" href="/mystyle.css" type="text/css" media="all"/> 
```

我的风格包含以下内容：

```
    .xforms-noscript-panel {
        边框：4px 实心#FF6600；
        保证金：1em；
        填充：0.5em；
        宽度：自动；
        显示：无！重要；
    }

```

然后 pd4ml 将打印带有警告消息隐藏的 html。

# heroku - 您如何在 Heroku 上运行实用程序服务？

> ID：11035865
> 
> 赞同：8
> 
> 时间：2012-06-14T14:58:50.053
> 
> 标签：heroku, jenkins, graphite, statsd

Heroku 非常适合用于原型设计和运行简单的 Web 服务，我经常使用它来运行 Python Web 服务，如 Flask 和 Django 并尝试想法。然而，我一直在努力理解如何使用基础设施来运行每个初创公司在其堆栈中需要的那些非常强大的支持或实用服务。4 个我不能没有的服务示例，我会推荐给任何初创公司。

*   詹金斯
*   统计数据
*   石墨
*   格雷洛格

你将如何在 Heroku 上运行这些？最好只安装这些支持服务的专用盒子（Rackspace 等）。

有没有人在 Heroku 上运行实用程序守护程序（服务）？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-25T17:59:32.353

有两个基本选项。首先是找到或创建[一个 Heroku 插件](https://addons.heroku.com/)来完成任务。例如，您可以使用许多托管日志记录解决方案来代替 Graylog；可以使用[Rails on Fire](http://www.railsonfire.com/)或[Travis代替 Jenkins。](http://travis-ci.org/)如果不存在适当的插件，您可以通过在 AWS EC2 实例上运行服务来有效地制作自己的插件。

另一种选择是将服务推送为[12factor](http://www.12factor.net/)应用程序，以便它也可以在 Heroku 上运行。例如，您可以将`whisper`的文件系统调用存根，以便将它们存储在支持服务中。然而，这通常是非常痛苦和脆弱的，除非你能让上游维护者接受你的更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T02:34:38.793

您还可以结合使用其他免费服务。OpenShift 有很多可以添加的 Java 相关的构建服务和工具。

我正在混合使用 heroku、openshift、mongolab 和我自己的虚拟主机。放入保管箱和盒子以获得一些空间......

# ruby-on-rails - ruby on rails：基于另一个模型（帖子）的模型（主题）的订单索引页面

> ID：11035869
> 
> 赞同：3
> 
> 时间：2012-06-14T14:59:00.003
> 
> 标签：ruby-on-rails, sqlite, associations

我有一个主题模型和一个帖子模型。一个Topic有很多Post，一个Post属于Topic。

我想`index`根据每个主题的最新帖子显示主题页面。最近的最后一个帖子是针对一个主题的，它将更多地显示在顶部。我基本上希望模拟常规论坛所做的事情。如果您回复一个主题，该主题会在索引页面中上升。

因此，我需要根据每个主题的最后一篇文章的 *created_at* 以某种方式对主题进行排序。如何才能做到这一点？

主题控制器.rb

```
def index
  @forum = Forum.find(params[:forum_id])
  @topics = @forum.topics.find(:all, :order => "last_post_id DESC")
  # last_post_id is a column of Topic that stores ID of the last post
end 
```

post.rb

```
class Post < ActiveRecord::Base
  belongs_to :topic
  attr_accessible :content
end 
```

主题.rb

```
class Topic < ActiveRecord::Base
  has_many :posts, :dependent => :destroy
  belongs_to :forum
  accepts_nested_attributes_for :posts, :allow_destroy => true
  attr_accessible :name, :last_post_id, :posts_attributes
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T15:21:18.403

那么 Topic.includes(:posts).order('posts.created_at DESC')

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T15:24:20.790

我同意 Oscar 但对于您的情况，请务必考虑变量：

```
:updated_at 
```

如果某些东西是在 2 年前创建的，然后在五分钟前进行了更新，那并没有真正帮助解决这种情况。

```
Topic.include(:posts).order('posts.updated_at DESC') 
```

# asp.net - 更改 SessionId

> ID：11035870
> 
> 赞同：1
> 
> 时间：2012-06-14T14:59:01.677
> 
> 标签：asp.net

我有一个问题，我必须更改由 asp.net 生成的现有会话 ID。

我需要分配我自己的会话 ID。

我尝试仅覆盖会话 ID 管理器（`createsession`和`validate`）的方法。但会话中仍保留现有的会话 ID。之后，我看到了一些使用反射处理一些内部字段的代码。

但仍然存在相同的结果旧 sessionid 吗？

我采用了以下代码

```
 HttpSessionState ss = HttpContext.Current.Session;
    HttpContext.Current.Session["test"] = "test";
    HttpContext.Current.Response.Write(ss.SessionID);     
    SessionIDManager manager = new SessionIDManager();
    manager.RemoveSessionID(System.Web.HttpContext.Current);
    ss.Clear();
    Response.Cookies.Add(new HttpCookie("ASP.NET_SessionId", ""));
    MysessionId myId = new MysessionId();
    bool redirected = false;
    bool IsAdded = false;
    string newid = myId.CreateSessionID(System.Web.HttpContext.Current); 
    myId.SaveSessionID(System.Web.HttpContext.Current, newid, out redirected, out IsAdded);
    HttpApplication ctx = (HttpApplication)HttpContext.Current.ApplicationInstance;
    HttpModuleCollection mods = ctx.Modules;
    System.Web.SessionState.SessionStateModule ssm = (SessionStateModule)mods.Get("Session");
    System.Reflection.FieldInfo[] fields = ssm.GetType().GetFields( BindingFlags.NonPublic|BindingFlags.Instance);
    SessionStateStoreProviderBase store = null; 
    System.Reflection.FieldInfo rqIdField = null, rqLockIdField = null, rqStateNotFoundField = null; 
    foreach (System.Reflection.FieldInfo field in fields)
    { 
        if (field.Name.Equals("_store")) store = (SessionStateStoreProviderBase)field.GetValue(ssm); 
        if (field.Name.Equals("_rqId")) rqIdField = field;
        if (field.Name.Equals("_rqLockId")) rqLockIdField = field; 
        if (field.Name.Equals("_rqSessionStateNotFound")) rqStateNotFoundField = field; 
    }
    object lockId = rqLockIdField.GetValue(ssm);
    if ((lockId != null) && (ss.SessionID != null)) store.ReleaseItemExclusive(Context, ss.SessionID, lockId);
    rqStateNotFoundField.SetValue(ssm, true); rqIdField.SetValue(ssm, newid); 
    HttpSessionState s2 = HttpContext.Current.Session;
    lblMessage.Text = "changed session id is     :" + s2.SessionID; 
```

这里 MysessionId 是我在其中覆盖了 create 和 validate{return true} 方法的类

# javascript - 在 webkit 浏览器的 xsl 文件中使用多个 xml 文件（客户端转换）

> ID：11035872
> 
> 赞同：2
> 
> 时间：2012-06-14T14:59:09.740
> 
> 标签：javascript, xml, xslt, webkit, client-side

我目前正在尝试将多个 xml 文件放入我的 xsl 文件中，然后将它们处理成有用的 html。这适用于非 webkit 浏览器，但不适用于 webkit 浏览器。

我正在使用 JavaScript 执行转换，除了我想要多个 xml 文件之外，它在所有浏览器中都可以正常工作。

我尝试了各种方法来尝试将额外的 xml 文件放入 xsl，这些文件都在同一台服务器上，但在不同的文件夹中。

1）我尝试将 xml 文件直接添加为变量。例如：

```
<xsl:variable name="structure" select="document('../structure.xml')"/> 
```

从那以后，我发现 webkit 浏览器不允许这样做，因为它被认为是安全风险。但是，如果有人知道任何解决方法或不同的方法来实现相同的结果，那就太好了

2) 我尝试将 xml 文件作为参数传递给处理器。例如：

```
xml=loadXMLDoc("structure.xml);
xsl=loadXMLDoc("xsl/head.xsl");
structurexml =loadXMLDoc("/extranet/structure.xml");
xsltProcessor =new XSLTProcessor();
xsltProcessor.importStylesheet(xsl);
xsltProcessor.setParameter(null, "structure", structurexml);
process.transform(); 
```

loadXMLDoc 是一段简单的代码，用于加载 xml 和 xsl 文件

```
function loadXMLDoc(fname) {
var isIE = (navigator.appName=="Microsoft Internet Explorer");
if (window.XMLHttpRequest) {
    xhttp = new XMLHttpRequest();
}
else {
  xhttp = new ActiveXObject('Microsoft.XMLHTTP');
}
xhttp.open('GET', fname, false);
if (xhttp.overrideMimeType){
  xhttp.overrideMimeType('text/xml');   
}
xhttp.send(null);
if (isIE) {
  xmlDoc = new ActiveXObject('Microsoft.XMLDOM');
  xmlDoc.async = false;
  xmlDoc.load(fname);
}
else {
  xmlDoc = xhttp.responseXML;
  if (!xmlDoc) {
    xmlDoc = (new DOMParser()).parseFromString(xhttp.responseText, 'text/xml');
  }
}
return xmlDoc;
} 
```

这不起作用，因为 webkit 不允许节点集作为参数。再次，任何类型的工作都会很棒

3）我已经尝试了上述方法，但在添加为参数之前将 xml 转换为字符串。这允许我获取要传递的参数，但我无法将字符串转换回 xml 以进行处理。

如果有人对此有任何想法，那也很棒。

我想到的另一种选择是使用 JavaScript 将 xml 文件合并为一个巨大的文件并进行处理，但我不知道该怎么做。

此外，我无法进行服务器端处理，因为我无法控制服务器，所以我只剩下客户端。

正如我之前所说，我可以解决非 webkit 浏览器的问题。我一直在尝试解决这个问题一段时间，但找不到任何解决方法。我看不出我是唯一一个遇到这个问题的人，我真的希望有人遇到过类似的问题并找到解决方法或解决这个问题。

提前致谢！

马特

* * *

**更新：**

我还考虑过在 JavaScript 中将 xml 文件一起添加。

```
xml=loadXMLDoc("structure.xml);
xsl=loadXMLDoc("xsl/head.xsl");
structurexml =loadXMLDoc("/extranet/structure.xml");
newxml = xml;
newxml.appendChild(sessionxml); 
```

但是收到 Uncaught Error: HIERARCHY_REQUEST_ERR: DOM Exception 3 的错误，我认为这是因为新 xml 中没有根节点？有谁知道我如何能够成功添加它们？这两个文件是

```
<?xml version="1.0" encoding="utf-8"?>
<structure>
  <product>
    <id>1</id>
    <unit>
        <id>1</id>
        <name>Blah</name>
        <code>Blah</code>
    </unit>
  </product>
</structure> 
```

和

```
<?xml version="1.0" encoding="utf-8"?>
<user>
  <emp>true</emp>
  <first>Test</first>
  <last>User</last>
</user> 
```

理想情况下，我希望文件格式为

```
<?xml version="1.0" encoding="utf-8"?>
<root>
  <structure>
    <product>
      <id>1</id>
      <unit>
          <id>1</id>
          <name>Blah</name>
          <code>Blah</code>
      </unit>
    </product>
  </structure>
  <user>
    <emp>true</emp>
    <first>Test</first>
    <last>User</last>
  </user>
</root> 
```

有没有一种简单的方法可以在 JavaScript 或 JQuery 中实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T07:26:22.087

[Saxon-CE](http://www.saxonica.com/ce/doc/contents.html)是一个 XSLT 2.0 处理器（编译为 JavaScript），将在 webkit 和所有主要浏览器中运行，并且（自然）支持 document() 函数。除了原子值，它还支持将文档、节点、数组甚至 JavaScript 对象作为参数传递。

您可以使用与您自己的代码非常相似的代码运行转换，但使用：

```
 xsltProcessor = Saxon.createXSLT20Processor(); 
```

但是也可以使用以下 JavaScript

```
Saxon.run({
   stylesheet: "xsl/head.xsl",
   source:     "structure.xml",
   parameters: {
                    structure: Saxon.requestXML("/extranet/structure.xml");
               }

}); 
```

'structure' 参数仅用于说明目的，在您的情况下，您只需要在 XSLT 中正常使用 document() 函数。

我还应该提到，使用 Saxon-CE 可以使用标准 XSLT 2.0 xsl:result-document 指令对 HTML 文档进行更新。因此，如果您想通过添加一个段落来更新 id 为“head”的 DIV 元素，您可以使用：

```
<xsl:result-document href="#head" method="append-content">
   <p>Book Title: <xsl:value-of select="$title"/></p>
</xsl:result-document> 
```

# xml - 用于接收自定义 HTTP 标头的 IIS 设置

> ID：11035873
> 
> 赞同：0
> 
> 时间：2012-06-14T14:59:11.847
> 
> 标签：xml, http, iis, asp-classic, upload

我有一个问题，
我必须从软件接收一个 xml 文件（多部分表单数据）到我的网站，但问题是他们向我发送了一个自定义 HTTP HEADER（HTTP_X_AUTHORIZATION）并且当我收到文件时不正确但是这是结果：

```
ntent-Transfer-Encoding: binary

<?xml version="1.0" encoding="UTF-8"?> 
```

我不能使用这个 xml 文件，我读到我需要设置我的 IIS 来接收这种类型的自定义标头。
有人知道怎么做？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T15:19:57.197

假设 IIS 6.0

打开 IIS 管理器并向下浏览左侧的树，直到看到您的 Web 应用程序。

*   打开控制面板
*   打开管理工具
*   开放互联网信息服务
*   在左侧面板中，展开 <*您的服务器*>
*   展开网站

右键单击以打开此上下文菜单，然后单击属性。打开的对话框顶部有一系列选项卡，选择第四个“HTTP Headers”。您可以在此处添加自定义标题。从您的 HTTP 标头中，您的标头名称应为“HTTP_X_AUTHORIZATION”，其值应为“c2Npcm9jY286Y29udHJvbGxv”。单击确定两次以保存您的设置。

IIS 7.0

在这个版本中，您可以在您的 Web.config 文件中添加一个设置来实现相同的目的。

```
 <!-- 
        Other stuff found here -->

  <httpProtocol>
     <customHeaders>
        <add name="HTTP_X_AUTHORIZATION" value="c2Npcm9jY286Y29udHJvbGxv" />
     </customHeaders>
  </httpProtocol> 
```

有关详细信息，请参阅[http://www.iis.net/ConfigReference/system.webServer/httpProtocol/customHeaders](http://www.iis.net/ConfigReference/system.webServer/httpProtocol/customHeaders)。吉姆麦戈德里克，cablesafe.co.uk

# dojox.charting - Dojo Charting 无法添加轴

> ID：11035874
> 
> 赞同：1
> 
> 时间：2012-06-14T14:59:13.033
> 
> 标签：dojox.charting, dojo

[http://jsfiddle.net/Jn4tT/](http://jsfiddle.net/Jn4tT/)

```
var data= [ {"a":2, "b":5,"c":3 },
            {"a":5, "b":15,"c":7 },
            {"a":1, "b":5,"c":7 } ];

chart1.addAxis("a");
chart1.addAxis("b");      
chart1.addAxis("c");

chart1.addSeries("min", {data: data[0]}, { fill: "blue" });
chart1.addSeries("max", {data: data[1] }, { fill: "blue" });
chart1.addSeries("Answered", {data: data[2]}, { fill: "blue" });

var tip = new Tooltip(chart1, "default", {
    text: function(o){                                
        console.log(o); //no axis to the current data point
    }
});

chart1.render(); 
```

如果我删除上面的 addAxis，我可以渲染图表，但无论我如何添加轴，在蜘蛛类型图表上，它都会引发“找不到轴”错误。

没有轴，看起来我无法设置自定义工具提示（只想显示数据点，而不是系列和轴标题）。而且看起来我无法控制轴标签、字体、maxlabelsize 等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T18:49:57.283

这可能会在未来版本的 dojo 中添加为一项功能，但目前经过大量的努力。我破解了库并添加了自定义代码来处理这个和很多其他事情。基本上，只需打开用于生成蜘蛛图的 spider.js 和 common.js 文件。能够将标签包装在我自己的班级中。并且还为每个带有所需标签的标题属性插入了一个标题属性。使用外部工具提示库，我现在可以对蜘蛛图中的工具提示进行大量控制。

# javascript - 带有动态编码的 JSON

> ID：11035876
> 
> 赞同：0
> 
> 时间：2012-06-14T14:59:17.433
> 
> 标签：javascript, json, forms, dynamic, knockout.js

使用它来加载 json

```
var jsonParsed = JSON.parse(localStorage.getItem('test')); 
```

用这个来保存

```
var jsonData = ko.toJSON(viewModel); 
```

现在，当我准备好它时，我知道我可以像这样得到我的价值观......

```
jsonParsed.AOfficer 
```

（如果 A 官员是一个有值的字段）我知道上面的代码将返回 json 字段 AOfficer 的值，但我如何让它返回 json 中所有字段的名称，例如返回它持有 Aofficer 而不是比它的价值。

我想知道这一点，因为我使用 json 字段名称作为表单 ID 和值作为表单值动态创建表单。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T15:06:29.553

假设 jsonParsed 类似于：

```
var field = {
    "field1": "Test data",
    "field2": "Test data"
}; 
```

你可以这样做：

```
for(var field in fields){
    if(fields.hasOwnProperty(field)){
        console.log(field, fields[field]);
    }
 }; 
```

它遍历所有顶级对象道具并返回其名称和值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T15:02:20.263

使用`for in`带有可选`.hasOwnProperty`检查的循环来循环对象的属性。

# svn - USB pin驱动器上的SVN颠覆？

> ID：11035879
> 
> 赞同：1
> 
> 时间：2012-06-14T14:59:24.170
> 
> 标签：svn

不确定是否可以完成，但是否可以使用 USB 引脚驱动器来托管我的项目源代码控制的颠覆？还是必须在远程服务器上设置？我有一台 Linux 专用服务器，在上面设置一台服务器有多难？

我自己从来没有设置过这样的东西……对整个概念有点模糊。

任何信息都会非常有帮助。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T15:18:22.913

是的，您可以将存储库放在拇指驱动器上。您可能会使用文件协议；但是，驱动器上的存储库通常不会与其他开发人员共享，因此它是一种单人解决方案。源代码控制系统的大部分价值来自于在开发团队之间共享存储库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T15:12:27.523

我在云中使用免费的 SVN：[https](https://www.assembla.com/) ://www.assembla.com/ 。您可以拥有一个公开或私有的存储库。它非常有用！

我希望对你有所帮助。

问候

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T15:14:50.257

好吧，您可以将 subversion 存储库放在 USB 引脚驱动器上，但我不确定这样做会带来什么好处，因为如果您卸下 USB 并将其放在另一台计算机上，则需要再次安装服务器软件并配置它。只需在您的 Linux 服务器上设置它。要设置服务器，这取决于您的 linux 发行版，所以只需 google 一下：如何在 LINUX_DISTRO 上安装 svn 服务器

# jsf - 在 JSF2 中使用 bean 验证 (JSR 303) - Primefaces 应用程序

> ID：11035882
> 
> 赞同：1
> 
> 时间：2012-06-14T14:59:26.433
> 
> 标签：jsf, netbeans, annotations, primefaces, bean-validation

我正在尝试将使用休眠验证器的 bean 验证集成到我的 Web 应用程序中：
- 在 tomcat 7 上的 Hibernate-spring-jsf2-primefaces3
我添加了以下 jar 文件： hibernate-validator.jar 和 validation-api.jar 到我在 Netbeans 中的类路径中。

在 pojo 类中，我为 Size 添加了注释：

```
@Size(min=4, message="Min 4 chars!")
private String name; 
```

在我写的 .xhtml 页面中：

```
<p:inputText title="name" id="name" value="#{myBean.user.name}"></p:inputText>
<p:message for="name" /> 
```

运行我的应用程序并在名称字段中输入少于 4 个字符后，我看不到任何消息，处理继续并将数据保存到数据库。在我看到的日志输出中：

```
14 juin 2012 14:55:03 org.apache.myfaces.view.facelets.tag.jsf.ComponentTagHandlerDelegate shouldAddEnclosingValidator
ATTENTION: Bean validation is not available on the classpath, thus the BeanValidator will not be added for the component org.primefaces.component.inputtext.InputText@1f3fd22
14 juin 2012 14:55:04 javax.faces.component._ExternalSpecifications isBeanValidationAvailable
INFO: MyFaces Bean Validation support disabled 
```

我想知道是否有任何我必须设置的配置，或者我必须添加的任何 jar 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T10:24:19.657

解决了，
我必须添加所需的 jar 文件：**jboss-logging-3.1.0.CR2.jar**从 hibernate-validator zip 文件到 lib 目录。
我认为 log4j 足以记录日志，但我错了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T07:25:51.223

这个问题之前已经回答过了。

如果要使用 bean 验证，则需要 Java EE 容器。Tomcat 只是一个 servlet 容器，因此您需要额外的库。

[没有让 JSR303 注释与 Tomcat 7 一起使用](https://stackoverflow.com/questions/5731773/not-getting-jsr303-annotations-to-work-with-tomcat-7)

# c# - 我在 C# 中有一个类，但不知道如何将它添加/执行到项目 C#

> ID：11035883
> 
> 赞同：0
> 
> 时间：2012-06-14T14:59:26.837
> 
> 标签：c#, watin

我终于找到了让 WatiN 正常工作的解决方案。想法是我在一个类中有 WatiN 函数，我不能从那里执行它。我有一堂课，里面有一个函数。像这样：

```
 public void SearchForWatiNOnGoogle()
   {
       using (var browser = new IE("http://www.google.com"))
       {
           browser.TextField(Find.ByName("q")).TypeText("WatiN");
           browser.Button(Find.ByName("btnG")).Click();

           Assert.IsTrue(browser.ContainsText("WatiN"));
       }
   } 
```

我想用一个按钮创建一个新项目（表单）。我希望在单击按钮时执行 SearchForWatiNOnGoogle() 函数。

我知道这很简单，在谷歌上搜索过，但没有找到正确的答案。

再次感谢大家:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T15:06:51.237

唔？新项目 => “Windows 窗体应用程序” => 你会看到一个小对话框

解决方案资源管理器 => WindowsFormsApplication1 => 添加 => 现有项目 => 选择您的文件

工具箱 => 按钮 => 放在那个小对话框上

该按钮=>双击

代码窗口打开：

```
private void button1_Click(object sender, EventArgs e)
{
    // Place the call to your function right here!
    SearchForWatiNOnGoogle();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T15:03:43.937

创建一个类库项目，添加您的类，编译并在您想要作为参考的任何项目中添加结果 dll，然后像 namespace.ClassName 一样调用它，并使用您的实例调用您的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T15:04:05.837

在 Visual Studio 中创建一个新的 C# WinForms 项目，然后右键单击您的项目并选择“添加现有项目”，然后将对话框指向该文件。

# php - PHP - 前端控制器模式。一个巨大的 switch 语句

> ID：11035884
> 
> 赞同：0
> 
> 时间：2012-06-14T14:59:27.603
> 
> 标签：php, design-patterns

我将前端控制器模式与命令解析器类结合使用，它的唯一功能是将请求从视图映射到命令对象。

一切正常，但我开始怀疑我的实现（基本上由 switch 语句组成）实际上是不好的做法。

用 XML 文件替换此 switch 语句，或者将请求物理映射到命令类中的文件（即请求名称将是文件名），或者为此目的使用 switch 语句是否更好？

编辑：我正在使用 MVC，前端控制器存在于控制器中。这更像是设计模式问题中的设计模式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T15:03:08.133

Front Controller 需要一个**路由器类**，通常与 MVC 设计模式一起使用。

要了解如何避免`switch`，请参阅 phpro.org 上的这个不错的教程：

*   [http://www.phpro.org/tutorials/Model-View-Controller-MVC.html](http://www.phpro.org/tutorials/Model-View-Controller-MVC.html)

[这是上面教程中路由器的构造方式。](http://www.phpro.org/tutorials/Model-View-Controller-MVC.html#7)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T15:02:19.117

通过使用 switch，您可以进行很多硬编码。如何编写命令函数来检查可能的文件数组（可能来自缓存，通过读取文件目录填充一次），如果可以的话加载文件。？

# javascript - HTML5 音频行为

> ID：11035890
> 
> 赞同：23
> 
> 时间：2012-06-14T14:59:35.857
> 
> 标签：javascript, android, html, webkit, html5-audio

我在 HTML5 页面中有一个音频元素。我开始播放音频，然后暂停。之后，我通过按主页按钮返回主屏幕并拨打电话。通话结束时，音频元素会自动恢复。这发生在 Android 4.0.3

问题是，这不是预期和期望的行为。不幸的是，当浏览器在后台运行时，不会引发 javascript 事件，我无法使用 Javascript 捕捉和阻止这种行为。

任何帮助表示赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T19:33:14.783

我没有 ICS 手机可以试用，但我会这样做：

`pause`显然跟踪音频时间位置。4.0 似乎会自动恢复您暂停音频文件的位置

`stop`因此，您可以使用音频文件而不是暂停。不幸的是，`stop`HTML5 不支持。

你有一个棘手的解决方案：

*   `pause`声音的
*   存储位置：`trackPos = myTrack.currentTime;`
*   存储量：`trackVol = myTrack.volume;`
*   静音：`myTrack.volume = 0;`

然后当用户回来并再次点击播放时：

**如果 trackPos 存在**

*   将起始位置设置为 trackPos：`myTrack.currentTime = trackPos;`
*   `play`
*   `mytrack.volume = trackVol;`
*   `delete window.trackPos;`

这很棘手，但如果您使用 JavaScript 控件，它应该可以工作。

如果您使用本机控件，则播放和暂停将由浏览器界面管理。然后你应该只存储位置并开始变得非常脏：

*   删除来源：

    myTrack.removeChid(yourSRCs)

*   恢复您的 SRC 和焦点位置

*   等待用户播放

这是一个快速而肮脏的草稿，未经测试。但它应该工作

**///编辑///**

一个有效的 Javascript 演示，至少在我的桌面上。在你的 ICS 上试试： [JSFiddle](http://jsfiddle.net/SCfeG/)

（保存文件，我猜你无法在手机上正确启动 jsfiddle）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T01:31:25.027

在脚本块中尝试以下操作。它应该工作。

```
var ppAudio = function(event){
    var ppMethod = (event.type == "blur")? "pause" : "play",
        audio = document.getElementsByTagName("audio"),
        l = audio.length;
    for (;l--;) audio[l][ppMethod]();
};

// window.onfocus = ppAudio;
window.onblur = ppAudio; 
```

我想你不需要 onfocus 事件。但是，这里是一个切换的例子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T16:17:06.437

我将使用布尔开关附加一个“onFocus”事件以确定音频播放器的先前状态，如果您以先前的“暂停”状态获得焦点，则停止播放器，否则播放它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T16:29:53.237

也许你可以声明一个布尔值来跟踪你是否手动暂停，这样你就可以在焦点或其他适当的事件上评估它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T01:57:27.553

您是否尝试过从 DOM 中删除音频对象并在播放时恢复它？

# jquery - jquery UI：如何在不使用 Ctrl+单击的情况下取消选择可选元素

> ID：11035891
> 
> 赞同：0
> 
> 时间：2012-06-14T14:59:36.263
> 
> 标签：jquery

我想知道我是否可以得到一些帮助。（首先，我想道歉..请原谅我的英语不好...） 我正在尝试制作一款游戏，让玩家可以从中选择几个选项。总是有两个正确的选择。我想知道如何让玩家有机会通过单击鼠标（不是 Ctrl+单击）来选择第二个（或第三个）选项，并通过单击它来取消选择其中一个选项（再次不是 Ctrl+单击）我尝试了一些我读过的东西，比如`e.metakey = false`，但恐怕我不明白它的全部意义，所以可能是我用错了方法：S

```
$('.option').bind("mousedown", function (e){
    e.metaKey = false;
});
$('.option').selectable({
    selecting:function(event, ui){
        $(this).attr('isSelected','True');
    },
    selected: function(event, ui){
        $(this).animate({
            opacity: 0.50,
            backgroundColor: "red"
        }, 500);
    },
    unselecting: function(event, ui){
        if ($(this).attr('isSelected') == 'True'{
            $(this).attr('isSelected','False');
        };
    },
    unselected: function(event, ui){
        $(this).animate( {
            opacity:1,
            backgroundColor: 'orange'
        }, 500);
    }
}); 
```

有谁知道我可以做到这一点的正确方法？（如果我找到更好的解释，我会很高兴`e.metaKey`）任何信息都会非常有帮助！:)

谢谢！

HTML：

```
<div id="choices">
<div class="option_holder_big option ui-selectable masonry-brick" number="8">
    <div class="draggable ui-selectee" number="8">
        <div class="option_square ui-selectee">...</div>
        //...
    </div>
</div>
<div class="option_holder option ui-selectable" number="2">
    <div class="option_square draggable ui-selectee" number="2">...</div>
</div>
<div class="option_holder option ui-selectable" number="3">
    <div class="option_square draggable ui-selected" number="3">...</div>//selected one
</div>
<div class="option_holder_big option ui-selectable" number="6">
    <div class="draggable ui-selectee" number="6">
        <div class="option_square ui-selectee">...</div>
        <div class="option_square ui-selectee">...</div>
    </div>
</div> 
```

在选择了 number=3 的选项之后，我添加了 html 代码的一部分。（例如）这是你需要的吗，@AndrewPeacock？PS/我注意到不是“选项” div，而是内部有“ui-selected”类 - 我想这很正常......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T08:22:03.287

我找到了解决我的问题的方法。首先，我应该让我的外部（'#choices'）div 可选，以便允许选择内部 div（'.option'）。其次，e.metakey 可以解决 Ctrl 问题，但不是这样我用过。我可能也没有很好地解释这个问题 - 对此感到抱歉。所以，我真的很感谢那些发布答案并试图帮助我的人。非常感谢！:)

我给你我的代码的工作副本，以防它对某人有用......

```
$("#choices").bind("mousedown", function( e ) {
    e.metaKey = true;
}).selectable({
    filter: "div.option",
    selected:function(event, ui){
        ...
    },
    unselected:function(event, ui){
        ...
    } 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T16:03:45.683

# android - Android：使用兼容包时，应该选择什么版本的SDK？

> ID：11035903
> 
> 赞同：0
> 
> 时间：2012-06-14T15:00:00.223
> 
> 标签：android

我记得谷歌说我们应该始终使用最新的 API 并将 min sdk 设置为较低版本。

我的问题是，如果我使用兼容包，我应该使用哪个 Android SDK 版本？如果我用4.0，会不会有冲突？谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T15:03:18.380

您仍然应该以最新的 SDK 为目标。确保您使用的是兼容性包导入，而不是 SDK 导入。

# powershell - 在 PowerShell 中显示当前时间和时区

> ID：11035905
> 
> 赞同：14
> 
> 时间：2012-06-14T15:00:05.450
> 
> 标签：powershell, time, timezone

我正在尝试使用 TimeZone 在我的系统上显示本地时间。如何在任何系统上以这种最简单的方式显示时间？：

时间：美国东部标准时间上午 8:00:34

我目前正在使用以下脚本：

```
$localtz = [System.TimeZoneInfo]::Local | Select-Object -expandproperty Id
if ($localtz -match "Eastern") {$x = " EST"}
if ($localtz -match "Pacific") {$x = " PST"}
if ($localtz -match "Central") {$x = " CST"}
"Time: " + (Get-Date).Hour + ":" + (Get-Date).Minute + ":" + (Get-Date).Second + $x 
```

我希望能够在不依赖简单逻辑的情况下显示时间，但能够在任何系统上提供本地时区。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-14T19:48:46.467

虽然这有点......也许很天真，但这是在没有 switch 语句的情况下获得缩写的一种*方法*：

```
[Regex]::Replace([System.TimeZoneInfo]::Local.StandardName, '([A-Z])\w+\s*', '$1') 
```

我的正则表达式可能还有一些不足之处。

我的时区的上述输出是`EST`. 我做了一些查看，因为我想看看其他 GMT 偏移设置的值是多少，但是 .NET 似乎在`DateTime`和之间没有很好的链接`TimeZoneInfo`，所以我不能只是以编程方式运行它们来检查。对于某些返回的字符串，这可能无法正常工作`StandardName`。

**编辑：**我做了更多调查，手动更改计算机上的时区以检查这一点，`TimeZoneInfo`for`GMT+12`看起来像这样：

```
PS> [TimeZoneInfo]::Local

Id                         : UTC+12
DisplayName                : (GMT+12:00) Coordinated Universal Time+12
StandardName               : UTC+12
DaylightName               : UTC+12
BaseUtcOffset              : 12:00:00
SupportsDaylightSavingTime : False 
```

这为我的代码产生了这个结果：

```
PS> [Regex]::Replace([System.TimeZoneInfo]::Local.StandardName, '([A-Z])\w+\s*', '$1')
U+12 
```

所以，我想你必须检测`StandardName`它是一组单词还是只是偏移指定，因为它没有标准名称。

美国以外的问题较少的似乎遵循三字格式：

```
PS> [TimeZoneInfo]::Local

Id                         : Tokyo Standard Time
DisplayName                : (GMT+09:00) Osaka, Sapporo, Tokyo
StandardName               : Tokyo Standard Time
DaylightName               : Tokyo Daylight Time
BaseUtcOffset              : 09:00:00
SupportsDaylightSavingTime : False

PS> [Regex]::Replace([System.TimeZoneInfo]::Local.StandardName, '([A-Z])\w+\s*', '$1')
TST 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-14T15:34:52.563

您应该查看[`DateTime`格式字符串](http://msdn.microsoft.com/en-us/library/97x6twsz%28VS.90%29.aspx)。虽然我不确定他们是否可以返回时区短名称，但您可以轻松获得与 UTC 的偏移量。

```
$formatteddate = "{0:h:mm:ss tt zzz}" -f (get-date) 
```

这将返回：

```
8:00:34 AM -04:00 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-14T15:45:32.463

不愿定义另一种日期时间格式！使用现有的，例如[RFC 1123](http://www.ietf.org/rfc/rfc1123.txt)。甚至还有一个 PowerShell 快捷方式！

```
Get-Date -format r 
```

> 格林威治标准时间 2012 年 6 月 14 日星期四 16:44:18

参考：*[获取日期](https://docs.microsoft.com/en-us/powershell/module/Microsoft.PowerShell.Utility/Get-Date)*

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-03-21T04:46:17.883

这是一个更好的答案：

```
$A = Get-Date                    #Returns local date/time
$B = $A.ToUniversalTime()        #Convert it to UTC

# Figure out your current offset from UTC
$Offset = [TimeZoneInfo]::Local | Select BaseUtcOffset   

#Add the Offset
$C = $B + $Offset.BaseUtcOffset
$C.ToString() 
```

输出：2017 年 3 月 20 日晚上 11:55:55

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-14T15:26:05.220

我不知道有任何对象可以为您完成这项工作。您可以将逻辑包装在一个函数中：

```
function Get-MyDate{

    $tz = switch -regex ([System.TimeZoneInfo]::Local.Id){
        Eastern    {'EST'; break}
        Pacific    {'PST'; break}
        Central    {'CST'; break}
    }

    "Time: {0:T} $tz" -f (Get-Date)
}

Get-MyDate 
```

甚至可以使用时区 id 的首字母：

```
$tz = -join ([System.TimeZoneInfo]::Local.Id.Split() | Foreach-Object {$_[0]})
"Time: {0:T} $tz" -f (Get-Date) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-08T12:17:45.787

我只是结合了几个脚本，最后能够在我的域控制器中运行脚本。

该脚本为域下连接的所有机器提供时间和时区的输出。我们的应用程序服务器出现了一个重大问题，并使用此脚本来交叉检查时间和时区。

```
# The below scripts provides the time and time zone for the connected machines in a domain
# Appends the output to a text file with the time stamp
# Checks if the host is reachable or not via a ping command

Start-Transcript -path C:\output.txt -append
$ldapSearcher = New-Object directoryservices.directorysearcher;
$ldapSearcher.filter = "(objectclass=computer)";
$computers = $ldapSearcher.findall();

foreach ($computer in $computers)
{
    $compname = $computer.properties["name"]
    $ping = gwmi win32_pingstatus -f "Address = '$compname'"
    $compname
    if ($ping.statuscode -eq 0)
    {
        try
        {
            $ErrorActionPreference = "Stop"
            Write-Host “Attempting to determine timezone information for $compname…”
            $Timezone = Get-WMIObject -class Win32_TimeZone -ComputerName $compname

            $remoteOSInfo = gwmi win32_OperatingSystem -computername $compname
            [datetime]$remoteDateTime = $remoteOSInfo.convertToDatetime($remoteOSInfo.LocalDateTime)

            if ($Timezone)
            {
                foreach ($item in $Timezone)
                {
                    $TZDescription  = $Timezone.Description
                    $TZDaylightTime = $Timezone.DaylightName
                    $TZStandardTime = $Timezone.StandardName
                    $TZStandardTime = $Timezone.StandardTime
                }
                Write-Host "Timezone is set to $TZDescription`nTime and Date is $remoteDateTime`n**********************`n"
            }
            else
            {
                Write-Host ("Something went wrong")
            }
         }
         catch
         {
             Write-Host ("You have insufficient rights to query the computer or the RPC server is not available.")
         }
         finally
         {
             $ErrorActionPreference = "Continue"
         }
    }
    else
    {
        Write-Host ("Host $compname is not reachable from ping `n")
    }
}

Stop-Transcript 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-11-21T19:45:42.680

俄罗斯、法国、挪威、德国：

```
get-date -format "HH:mm:ss ddd dd'.'MM'.'yy' г.' zzz" 
```

俄罗斯时区的输出：22:47:27 Чт 21.11.19 г。+03:00

其他 - 只需更改代码。

# python - Twisted web - 在finish（）之后调用write（）？

> ID：11035907
> 
> 赞同：0
> 
> 时间：2012-06-14T15:00:08.930
> 
> 标签：python, twisted, twisted.web

我有以下资源来处理带有扭曲网络的 http POST 请求：

```
class RootResource(Resource):
    isLeaf = True

    def errback(self, failure):
        print "Request finished with error: %s"%str(failure.value)
        return failure

    def write_response_happy(self, result):
        self.request.write('HAPPY!')
        self.request.finish()

    def write_response_unhappy(self, result):
        self.request.write('UNHAPPY!')
        self.request.finish()

    @defer.inlineCallbacks
    def method_1(self):
        #IRL I have many more queries to mySQL, cassandra and memcache to get final result, this is why I use inlineCallbacks to keep the code clean.        
        res = yield dbpool.runQuery('SELECT something FROM table')

        #Now I make a decision based on result of the queries:
        if res: #Doesn't make much sense but that's only an example
            self.d.addCallback(self.write_response_happy) #self.d is already available after yield, so this looks OK? 
        else:
            self.d.addCallback(self.write_response_unhappy)
        returnValue(None)

    def render_POST(self, request):
        self.request = request 
        self.d = self.method_1() 
        self.d.addErrback(self.errback)
        return server.NOT_DONE_YET

root = RootResource()
site = server.Site(root)
reactor.listenTCP(8002, site)
dbpool = adbapi.ConnectionPool('MySQLdb', host='localhost', db='mydb', user='myuser', passwd='mypass', cp_reconnect=True)
print "Serving on 8002"
reactor.run() 
```

我使用 ab 工具（来自 apache utils）一个接一个地测试 5 个 POST 请求：

```
ab -n 5 -p sample_post.txt http://127.0.0.1:8002/ 
```

工作正常！

然后我尝试同时运行相同的 5 个 POST 请求：

```
ab -n 5 -c 5 -p sample_post.txt http://127.0.0.1:8002/ 
```

在这里我收到错误： exceptions.RuntimeError: Request.write 在调用 Request.finish 后调用请求。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T13:09:31.700

正如 Mualig 在他的评论中所建议的那样，您只有一个`RootResource`. 当您分配给`self.request`和`self.d`时`render_POST`，您会覆盖这些属性已经拥有的任何值。如果两个请求大约同时到达，那么这是一个问题。第一个`Request`和`Deferred`被丢弃并被与第二个到达的请求相关联的新的替换。稍后，当您的数据库操作完成时，第二个请求会同时获得结果，而第一个请求则根本没有结果。

这是并发编程中普遍错误的一个例子。您的每个请求状态保存在多个请求之间共享的位置。当同时处理多个请求时，共享就会变成一场战斗，并且（至少）一个请求必须失败。

尝试保持您的每个请求状态不会在多个请求之间共享。例如，尝试将其保留在 Deferred 上：

```
class RootResource(Resource):
    isLeaf = True

    def errback(self, failure):
        print "Request finished with error: %s"%str(failure.value)
        # You just handled the error, don't return the failure.
        # Nothing later in the callback chain is doing anything with it.
        # return failure

    def write_response(self, result, request):
        # No "self.request" anymore, just use the argument
        request.write(result)
        request.finish()

    @defer.inlineCallbacks
    def method_1(self):
        #IRL I have many more queries to mySQL, cassandra and memcache to get final result, this is why I use inlineCallbacks to keep the code clean.        
        res = yield dbpool.runQuery('SELECT something FROM table')

        #Now I make a decision based on result of the queries:
        if res: #Doesn't make much sense but that's only an example
            # No "self.d" anymore, just produce a result.  No shared state to confuse.
            returnValue("HAPPY!")
        else:
            returnValue("UNHAPPY!")

    def render_POST(self, request):
        # No more attributes on self.  Just start the operation.
        d = self.method_1() 
        # Push the request object into the Deferred.  It'll be passed to response,
        # which is what needs it.  Each call to method_1 returns a new Deferred,
        # so no shared state here.
        d.addCallback(self.write_response, request)
        d.addErrback(self.errback)
        return server.NOT_DONE_YET 
```

# iphone - 重新排序导致 subview 的背景颜色清除

> ID：11035915
> 
> 赞同：4
> 
> 时间：2012-06-14T15:00:34.903
> 
> 标签：iphone, ios, uitableview

我遇到了表格单元格重新排序的问题。我在单元格内容视图中有一些背景颜色的视图。当我们拖动单元格进行重新排序时，它会使所有视图的颜色都变为清除颜色。据我所知，这是一种标准行为。

有什么方法可以在重新排序时不影响子视图颜色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T01:08:36.883

默认行为是允许用户查看单元格以最好地确定将其删除的位置，因此在实现其他内容之前强烈考虑该用例。

您可以尝试覆盖`setHighlighted:`或`setSelected:`在单元格（或任何适用的子视图，如`UILabel`s）上忽略控制器重新排序时的任何更改。

# c# - 数据 [,] 到列表中 或列出 in c# I have a array of two dimensions object[,] data;. I want to convert the first column of my object into a list <string>or a list. here you hav 问问题 问问题 2012-06-14T15:00:39.507 243 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I have a array of two dimensions object[,] data;. I want to convert the first column of my object into a list <string>or a list. here you have my code : List <string>resultsFields = new List<string>(); object tmp = oRtx.get_ListFields(this.Instrument.ElementAt(i).Key.ToString(), RT_FieldRowView.RT_FRV_EXISTING, RT_FieldColumnView.RT_FCV_VALUE); if (tmp != null) { object[,] data = (object[,])Convert.ChangeType(tmp, typeof(object[,])); for (int j = 0; j < numItems; j++) resultsFields.Add(data[j, 0].ToString()); } in this code, I add each items on data[j, 0] into my list. I would like to know if there is a faster method to convert the first column of my object ([0]) into a list IVideoWindow::put_WindowStyle throwing "No such interface supported" I've got a C# control wrapped around the DirectShow libraries. Though I'm not certain it's relevant, I'm running on Windows CE 6.0R3\. When trying to play a WMA audio file using the control, the following code throws an exception of "No such interface supported": m_graph = new DShowGraph(mediaFile); m_graphBuilder = m_graph.Open(); m_videoWindow = (IVideoWindow)m_graph.GetVideoWindow(); if (m_videoWindow == null) { // this is not hit } try { m_videoWindow.put_WindowStyle((int)(WS.CHILD | WS.VISIBLE | WS.CLIPSIBLINGS)); } catch (Exception ex) { // I end up here } The Open call looks like this (error handling, etc. trimmed): private IGraphBuilder _graphBuilder; internal IGraphBuilder Open() { object filterGraph = ClassId.CoCreateInstance(ClassId.FilterGraph); _graphBuilder = (IGraphBuilder)filterGraph; _graphBuilder.RenderFile(_input, null); return _graphBuilder; } The GetVideoWindow call simply looks like this: public IVideoWindow GetVideoWindow() { if (_graphBuilder == null) return null; return (IVideoWindow)(_graphBuilder); } Strangely, this all works just fine with the same control DLL, same application and same media file when run under Windows CE 5.0. My suspicion is that it might have something to do with the fact we're playing an audio-only file (checking to see if the same problem occurs with a video file now), but I'm not overly versed in Direct Show, so I'd like to understand exactly what's going on here. One of the large challenges in debugging this is that I don't have the failing hardware in my office - it's at a customer's site, so I have to make changes, send them and wait for a reply. While that doesn't affect the question, it does affect my ability to quickly follow up with suggestions or follow on questions anyone might have. EDIT1 Playing a WMV file works fine, so it is related to the file being audio-only. We can't test MP3 to see if it's a WMA codec issue becasu the device OEM does not include the MP3 codec in the OS due to their concerns over licensing. c#arrayslistobjectcasting 4 1 回答 1 This answer is useful 2 我能看到的唯一性能改进是创建具有指定容量的 List<>： List <string>resultsFields = new List<string>(data.GetLength(0)); 于 2012-06-14T15:02:29.287 回答 Related 1 java - index out of bounds: 1 (java) 当通过方法传递字符串参数时 2 angularjs - 指令在 IE8 中不起作用 1 c# - 为什么在 NopCommerce 中使用@T，它的好处/用途是什么？ 1 python - 出现错误：TypeError：'Phone' 类型的对象没有 len() 3 java - 超类中的按钮仍在子类中 5 facebook-graph-api - 我的应用程序的 Facebook 故事：无法生成故事 1 java - Android 加速度计读数 2 ruby - OS 10.9 上的 rvm 存在一些问题：.bash_profile 的第二个导出路径、缺少 2.0 路径和缺少文件 1 jquery - 从数据库中获取数据到 5 星评级 1 c# - 基于小数位的非确定性（随机）舍入 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：11035917
> 
> 赞同：0
> 
> 时间：
> 
> 标签：c#, arrays, list, object, casting

I have a array of two dimensions `object[,] data;`. I want to convert the first column of my object into a `list<string>` or a `list<object>`. here you have my code :

```
List<string> resultsFields = new List<string>();

object tmp = oRtx.get_ListFields(this.Instrument.ElementAt(i).Key.ToString(), RT_FieldRowView.RT_FRV_EXISTING, RT_FieldColumnView.RT_FCV_VALUE);
if (tmp != null)
{
    object[,] data = (object[,])Convert.ChangeType(tmp, typeof(object[,]));
    for (int j = 0; j < numItems; j++)
         resultsFields.Add(data[j, 0].ToString());
} 
```

in this code, I add each items on `data[j, 0]` into my list. I would like to know if there is a faster method to convert the first column of my object (`[0]`) into a list

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T15:02:29.287

我能看到的唯一性能改进是创建具有指定容量的 List<>：

```
List<string> resultsFields = new List<string>(data.GetLength(0)); 
```</string></string></string></string></string></string>

# c# - IVideoWindow::put_WindowStyle 抛出“不支持此类接口”

> ID：11035918
> 
> 赞同：1
> 
> 时间：2012-06-14T15:00:41.363
> 
> 标签：c#, windows-ce, directshow

我有一个围绕 DirectShow 库的 C# 控件。虽然我不确定它是否相关，但我在 Windows CE 6.0R3 上运行。尝试使用控件播放 WMA 音频文件时，以下代码会引发异常`"No such interface supported"`：

```
m_graph = new DShowGraph(mediaFile);
m_graphBuilder = m_graph.Open();
m_videoWindow = (IVideoWindow)m_graph.GetVideoWindow();

if (m_videoWindow == null)
{
    // this is not hit
}

try
{
    m_videoWindow.put_WindowStyle((int)(WS.CHILD | WS.VISIBLE | WS.CLIPSIBLINGS));
}
catch (Exception ex)
{
    // I end up here
} 
```

调用看起来像这样`Open`（错误处理等）：

```
private IGraphBuilder _graphBuilder;

internal IGraphBuilder Open()
{
    object filterGraph = ClassId.CoCreateInstance(ClassId.FilterGraph);
    _graphBuilder = (IGraphBuilder)filterGraph;
    _graphBuilder.RenderFile(_input, null);
    return _graphBuilder;
} 
```

GetVideoWindow 调用看起来像这样：

```
public IVideoWindow GetVideoWindow()
{
    if (_graphBuilder == null)
        return null;
    return (IVideoWindow)(_graphBuilder);
} 
```

奇怪的是，当在 Windows CE 5.0 下运行时，这一切都适用于相同的控制 DLL、相同的应用程序和相同的媒体文件。

我的怀疑是这可能与我们正在播放仅音频文件的事实有关（检查视频文件是否出现相同的问题），但我并不太精通 Direct Show，所以我想确切地了解这里发生了什么。

调试的最大挑战之一是我的办公室没有故障硬件 - 它在客户的站点，所以我必须进行更改，发送它们并等待回复。虽然这不会影响问题，但它确实会影响我快速跟进建议或跟进任何人可能遇到的问题的能力。

**编辑1**

播放 WMV 文件可以正常工作，因此它与仅音频文件有关。我们无法测试 MP3 是否是 WMA 编解码器问题，因为设备 OEM 出于对许可的担忧而未在操作系统中包含 MP3 编解码器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T16:26:17.827

该图`IVideoWindow`只是转发到`IVideoWindow`视频渲染过滤器的底层。使用仅音频管道，您没有视频渲染器（显然）并且`IVideoWindow`没有多大意义。该接口仍然可用，但是一旦您尝试调用方法，就没有任何东西可以转发，因此会出现错误。

# python - "keyword can't be an expression" Form Post Data to Datastore

> ID：11035920
> 
> 赞同：0
> 
> 时间：2012-06-14T15:00:43.153
> 
> 标签：python, google-app-engine

syntax error:

```
msg = "keyword can't be an expression"
      offset = None
      print_file_and_line = None
      text = 'data = data(name and mood=self.request.POST)\n' 
```

I'm posting much of the code here as even though my Datastore has a "Visitor" Entity with name, mood, date properties (the index.yaml file is working apparently), form data is not being submitted to Datastore as evident in Console query:

```
SELECT name FROM Visitor
              ^ SyntaxError: invalid syntax 
```

The last section of the following is me guessing what to do from modified Google tutorial. I know it's wrong but hope you see what I'm trying to do:

```
class Visitor(db.Model):

    name = db.StringProperty(required=1)
    mood = db.StringProperty(choices=["Good","Bad","Fair"]) # this is Radio button
    date = db.DateTimeProperty(auto_now_add=True)

class MainPage(webapp.RequestHandler):
    def get(self):
        self.response.out.write("""<html><body>
        <form action="/" method="post">
            <p>First Name: <input type="text" name="name"/></p>   # text
            <p><input type="radio" name="mood" value="good">Good</p>  # radio button v 
            <p><input type="radio" name="mood" value="bad">Bad</p>
            <p><input type="radio" name="mood" value="fair">Fair</p>
            <p><input type="submit"value="Process"></p>
        </form></body></html>""")  
    def post(self):
        name = self.request.get("name")
        mood = self.request.get("mood")
        data = data(name and mood=self.request.POST) # < < ^ ^ PROBLEM(S)
        if data.is_valid():
            Visitor = data.save(commit=False)
            Visitor.put() 
```

thanks in advance for help to attain desired goal.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T15:02:44.043

正如您所指出的，您的问题出在这一行

```
data = data(name and mood=self.request.POST) 
```

语法错误是因为您试图在表达式中进行赋值。

```
mood=self.request.POST
#"name and mood" is a logical expression which will return 
#"mood" if bool(name) is True and bool(mood) is True
#Otherwise it returns the first False value.
data=data(name and mood) 
```

当然，这也很有趣，因为 data 可能是一个可调用的，您将用它的结果替换它......

此外，数据没有在任何地方定义（我们可以看到）......因此，虽然我们已经摆脱了一个语法错误，但（可能）还有其他问题潜伏在您的脚本中。

# jquery - jQuery PUT 请求和浏览器支持

> ID：11035927
> 
> 赞同：2
> 
> 时间：2012-06-14T15:01:17.477
> 
> 标签：jquery, ajax, cross-browser

从参数的`jQuery.ajax`文档中`type`：

> 要发出的请求类型（“POST”或“GET”），默认为“GET”。注意：这里也可以使用其他 HTTP 请求方法，例如 PUT 和 DELETE，但并非所有浏览器都支持。

当他们说并非所有浏览器都支持 PUT 时，他们具体指的是什么？也就是说，是否有任何具体或值得注意的例子？

# makefile - 我可以在 makefile 目标中登录超过 1% 吗？

> ID：11035930
> 
> 赞同：12
> 
> 时间：2012-06-14T15:01:26.353
> 
> 标签：makefile, gnu-make

所以我有一个像这样的目标依赖的makefile：

```
all: $(foreach lang, $(LANGS), $(foreach models,$(MODELS),targetName$(model).xml$(lang))) 
```

targetName 目标如下所示：

```
targetName%.xml%: MODEL\=% targetName.xml* 
```

但它不起作用。我收到此错误：

```
make[1]: *** No rule to make target `targetNameMYMODEL.xmlen', needed by `all'.  Stop. 
```

但是，在 targetName 目标中使用硬编码语言调用“all”，如下所示：

```
all: $(foreach lang, $(LANGS), $(foreach models,$(MODELS),targetName$(model).xmlen)) 
```

并且在 all 或 targetName 中没有语言的情况下调用“all”也可以正常工作。我在想也许 Makefile 不喜欢在目标名称中有两个百分号。

另外，由于我继承了这个makefile，有人可以告诉我那个 MODEL\=% 是什么意思吗？还有另一个目标看起来像这样：`MODEL%: ;`但我不确定 \=% 是什么意思。

编辑：所以根据这个回复进一步澄清：

我有一个列表，比如 5 个模型和一个说 5 种语言的列表，目标是生成 25 个文件，每个文件用于语言和模型的每种组合。

targetName%.xml 目标最初会构建一个名为 targetName.xml 的文件，但现在我需要它来构建类似 targetName.xml 这就是我需要两个 % 符号的原因。

如上所示，我正在使用嵌套的 foreach 循环浏览这两个列表，但是我很难将这些变量传递给目标。我尝试从 foreach 语句中导出语言变量，我尝试将 targetName%.xml 的内容放在 for 循环中以循环遍历那里的语言。后者不起作用，因为循环的“do”部分中有 Makefile 命令（例如 eval）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T17:06:19.167

没错，Make 不喜欢`%`目标名称中的两个符号。这只是 Make 的通配符处理并不是人们所希望的方式之一。有一种方法可以自动生成迭代一个变量的值（并`%`用于另一个变量）的所有模式规则；它有点难看，但如果这是您想要的，我们可以向您展示。

但是这条线是一团糟：

```
targetName%.xml%: MODEL\=% targetName.xml* 
```

除了目标中两个通配符的问题之外，最后一个 preq`targetName.xml*`将完全意味着：一个目标（或文件）名为`targetName.xml*`. 星号不会扩展，也不会扩展为以 开头的所有现有文件的列表`targetName.xml`或其他任何文件。

然后是`MODEL\=%`，表示这个makefile的作者有点糊涂（不相信测试）。如果通配符的值为`foo`，那么这将指示一个先决条件，即名为 的目标（或文件）`MODEL=foo`。“`\`转义” `=`，因此 Make 不会中止，但这只是对健康错误消息的抑制。我认为作者的想法是这样的：

```
targetName%.xml: MODEL=%

targetName%.xml: $(wildcard targetName.xml*)
    do some things 
```

第一条规则不是*指定先决条件*，而是*设置特定于目标的变量*。因此，当 Make 尝试构建`targetNamefoo.xml`时`doing some things`，该变量`MODEL`将具有该`foo`命令上下文中的值。第二条规则有一个 preq 列表，由`wildcard`;生成。您不能在一行中混合使用特定于目标的变量和 preqs。

我们可以提供进一步的建议，但如果我们能更清楚地看到您正在尝试做什么，这将有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-05-22T01:02:52.747

值得注意的是有关此事的[官方文档：](https://www.gnu.org/software/make/manual/html_node/Pattern-Rules.html)

> **10.5 定义和重新定义模式规则**
> 
> *您可以通过编写模式规则*来定义隐式规则。模式规则看起来像一个普通规则，除了它的目标包含字符`%`（**恰好是其中一个**）。目标被认为是匹配文件名的模式；可以`%`匹配任何非空子字符串，而其他字符只匹配它们自己。先决条件同样用于`%`显示它们的名称与目标名称的关系。
> 
> 因此，模式规则`%.o : %.c`说明了如何从另一个文件*stem.c制作任何文件**stem.o*。
> 
>  *请注意，使用`%`模式规则的扩展发生**在**任何变量或函数扩展之后，这发生在读取 makefile 时。请参阅[如何使用变量](https://www.gnu.org/software/make/manual/html_node/Using-Variables.html#Using-Variables)和[函数来转换文本](https://www.gnu.org/software/make/manual/html_node/Functions.html#Functions)。*

 *来源：[https ://www.gnu.org/software/make/manual/html_node/Pattern-Rules.html](https://www.gnu.org/software/make/manual/html_node/Pattern-Rules.html)*

# c# - 为 wp7 创建一个 pdf 阅读器

> ID：11035932
> 
> 赞同：1
> 
> 时间：2012-06-14T15:01:29.130
> 
> 标签：c#, windows-phone-7

我想为 wp7 使用 C# 制作一个 PDF 阅读器。问题是我没有找到太多的先机，所以如果有人从事过类似的项目，请指导我，一些网络链接会很棒！谁能帮我这个？提前感谢您的辛勤工作！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T15:06:22.013

您可以从[http://silverpdf.codeplex.com/开始](http://silverpdf.codeplex.com/)

1) 但是这个库不会自动渲染 PDF，它只是解析 PDF 文档，所以你可以实现自己的渲染器。

2）这个库不再更新 - 我可以告诉它，因为我是作者，我很懒惰:)

目前，它是 Microsoft Silverlight 的唯一解决方案。我目前正在从事其他项目，但不会很快。

无论如何，我现在可以告诉你 - 自定义 PDF 渲染器 - 不是一件容易的事。

# vim - 忽略 vimrc 中的“未知选项”错误

> ID：11035933
> 
> 赞同：18
> 
> 时间：2012-06-14T15:01:30.020
> 
> 标签：vim

我在同时安装了 Vim 7.2 和 7.3 的机器之间使用相同的 .vimrc。每次打开文件时，装有 Vim 7.2 的机器都会抱怨我的 7.3 特定选项：

```
Error detected while processing /home/spiffytech/.vimrc:
line   72:
E518: Unknown option: rnu
line   73:
E518: Unknown option: undofile
line   74:
E518: Unknown option: undodir=/tmp
line   75:
E518: Unknown option: cryptmethod=blowfish
Press ENTER or type command to continue 
```

如何让 Vim 忽略这些错误，并且在我打开文件时不提示我按 Enter 键？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-24T04:44:17.873

可能值得对实际支持的功能而不是版本进行更细粒度的检查。

例如：

```
if has('persistent_undo')
  set undofile
  set undodir=/tmp
endif

" Some options can only be checked with exists('+option'); I'm not sure why
if exists('+relativenumber')
  set rnu
endif

if has('cryptv')
  set cryptmethod=blowfish
end 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-14T15:10:57.410

将新选项包装在：

```
if version >= 703
  set rnu ...
endif 
```

查看帮助以`v:version`获取有关要使用的版本号的更多信息：

```
 *v:version* *version-variable*
v:version       Version number of Vim: Major version number times 100 plus
                minor version number.  Version 5.0 is 500\.  Version 5.1 (5.01)
                is 501\.  Read-only.  "version" also works, for backwards
                compatibility.
                Use |has()| to check if a certain patch was included, e.g.: >
                        if has("patch123")
<               Note that patch numbers are specific to the version, thus both
                version 5.0 and 5.1 may have a patch 123, but these are
                completely different. 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-04-11T14:25:31.050

有时一个选项是合法的，但在当前环境中不可用。例如：

```
$ vi
Error detected while processing /home/username/.vimrc:
line    9:
Unknown option: indentexpr= 
```

测试选项是否存在，如果不可用则避免错误：

```
if exists("&indentexpr")
  :set indentexpr=
endif 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-12-21T09:12:39.513

您可以忽略任何错误`silent! ...`，例如`silent! set undofile`

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-14T15:10:49.047

在您的 .vimrc 中，您可以针对您正在执行的 Vim 版本进行测试。

看`help v:version`

```
if v:version >= 703
    "do something
    set rnu
    set undofile
    ...
endif 
```

**703**对应于 Vim 7.3（这不是很直观......）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-17T14:25:29.300

我会说这个问题没有答案。考虑在计算机 A 上创建的具有更高 vim 版本的 Session.vim。在源代码控制中，当另一台计算机 B 尝试打开 Session.vim 时，会触发错误。必须为应该是自动化的过程手动包装版本号是没有意义的。有了这种行为，新版本在保存会话时必须自动将新命令包装在版本号中——7.3 没有这样做。

# php - 查询返回 null

> ID：11035935
> 
> 赞同：2
> 
> 时间：2012-06-14T15:01:38.897
> 
> 标签：php, mysql, pdo

您好，我有这个查询来通过电子邮件获取用户，这是数据库中的一个唯一字段。

但是，当我想获取上面的数据时，它只是返回 null。

这是代码

```
 public function getUserByEmail($email)
    {

            $statement = "SELECT id_user,nome,email,permissao,activo FROM sys_users 
                          WHERE email=$email";

            try
            {

             $sth = $this->db->query($statement);
             $sth->setFetchMode(PDO::FETCH_OBJ);
             $rcs_users = $sth->fetchAll();
             return $rcs_users;

            }
            catch(PDOException $e)
            {
                "DB Error".$e->getMessage();
            }

    } 
```

以及各自的函数调用

```
$user_rcs = $user->getUserByEmail($email);

    var_dump($user_rcs); //returns null

    $_SESSION['email'] = $email;
    $_SESSION['user'] = $user_rcs->nome;
    $_SESSION['permissao'] = $user_rcs->permissao; 
```

然后我得到这个错误

```
Notice: Trying to get property of non-object in C:\xampp\htdocs\inacesso\admin\modules\auth\authhandler.php on line 24 
```

很高兴你能帮助我！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T15:03:42.093

SQL 中的字符串必须用引号引起来，因此除非`$email`在函数中包含`'`并`'`围绕它到达，否则 SQL 将出错。

但是无论如何，您不应该通过将 PHP 字符串混搭来构建 SQL。将 PDO 或 mysqli_* 与[绑定参数（和准备好的语句）](https://stackoverflow.com/a/60496/19068)一起使用，这将为您处理引用（和转义）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T15:04:22.980

首先，认真看看[PDO](http://php.net/manual/en/book.pdo.php)。

其次，我会想象该`email`列是一个字符串。因此，您需要在查询中用引号括起来（当然，在*大力*`$email`清理它之后......）

 *```
WHERE email='$email' 
```

### PDO 版本：

```
$pdo = new PDO(...);
$query = $pdo->prepare('SELECT id_user,nome,email,permissao,activo '.
                       'FROM   sys_users '.
                       'WHERE  email = ?');
$result = $query->execute(array($email)); 
```*

# javascript - 在 Chrome 中使用目标“_blank”打开 window.open

> ID：11035937
> 
> 赞同：19
> 
> 时间：2012-06-14T15:01:48.373
> 
> 标签：javascript, google-chrome, asp.net-ajax

我有一个小的 javascript 函数，它在新选项卡中打开一个 url：

```
function RedirectToPage(status) {
   var url = 'ObjectEditor.aspx?Status=' + status;
   window.open(url , '_blank');
} 
```

这在通过单击按钮调用客户端时始终有效，即使在 chrome 中也是如此。但是在 Chrome 中，当它通过使用从服务器端（！）调用它时它将不起作用

```
ScriptManager.RegisterClientScriptBlock() 
```

在 Firefox 和 IE 中，它在新选项卡中打开 url，但 chrome 在新窗口中打开 url。有什么办法可以强制 Chrome 在新标签页中打开它？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-14T15:05:05.663

这是chrome中的设置。您无法控制浏览器如何解释 target `_blank`。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-06-14T15:05:57.303

"_blank" 不保证是新的选项卡或窗口。每个浏览器的实现方式不同。

但是，您可以将任何东西放入目标中。我通常只说“_tab”，而我所知道的每个浏览器都只是在新标签页中打开它。

请注意，这意味着它是一个命名目标，因此如果您尝试打开 2 个 URL，它们将使用相同的选项卡。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-21T21:08:29.267

```
window.open(skey, "_blank", "toolbar=1, scrollbars=1, resizable=1, width=" + 1015 + ", height=" + 800); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T15:05:45.223

您不能这样做，因为您无法控制 Chrome 打开其窗口的方式

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T12:44:21.467

正如 Dennis 所说，您无法控制浏览器选择如何处理 target=_blank。

如果您想知道不一致的行为，可能是弹出窗口阻止。许多浏览器会禁止在任何情况下打开新窗口，但会允许在鼠标单击事件的最终结果中生成新窗口。

# javascript - 在页面的 ajax 加载部分初始化 Video.js 播放器

> ID：11035946
> 
> 赞同：16
> 
> 时间：2012-06-14T15:02:26.107
> 
> 标签：javascript, html, html5-video, video.js

视频播放器实际上加载正常。我的实际问题是，当我使用 AJAX 刷新页面的某些部分并且这些部分包含视频播放器时，HTML5 播放器加载正常，但不是自定义它的[Video.js部分。](http://videojs.com/)

video.js 文件加载到页面的标题中。我已阅读文档，但找不到如何在已加载的页面上初始化视频播放器。`myPlayer.initialize()`加载包含视频的页面部分以使视频播放器使用 Video.js 正确加载时，难道没有一种函数可以调用吗？

我认为 video.js 文件仅在页面加载时自动执行。

感谢您的宝贵帮助！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-02-20T16:20:45.853

我有同样的问题。我的场景：

通过 ajax 加载带有视频标签的 html 代码，它第一次工作，但是当我用 ajax 重新加载内容（不刷新页面）它不起作用。

我所做的是切换到通过课程查找视频，因为 ID 会被 videojs 更改。

所以这是我现在的电话：

```
videojs(document.getElementsByClassName("video-js")[0], {}, function(){
          // Player (this) is initialized and ready.
}); 
```

[希望这可以帮助遇到布鲁诺](https://stackoverflow.com/users/479618/bruno)解决方案不起作用的相同问题的人。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-06-14T15:33:50.720

是的，根据您可以执行的文档：

```
videojs("example_video_1", {}, function(){
  // Player (this) is initialized and ready.
}); 
```

它专门用于动态内容:)

来源：[http](http://docs.videojs.com/docs/guides/setup.html) ://docs.videojs.com/docs/guides/setup.html （在底部）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-10-16T11:44:24.493

我做了一个循环

```
var massVideo = $('.video-js');
for(var i = 0; i < massVideo.length; i++){
  videojs(massVideo[i]).ready(function(){});
} 
```

# asp.net - ASP.NET (MVC3) - HttpRuntime.Cache - 键间歇性存在

> ID：11035949
> 
> 赞同：1
> 
> 时间：2012-06-14T15:02:28.990
> 
> 标签：asp.net, asp.net-mvc-3, caching, httpruntime.cache

我有一个非常奇怪的问题，我完全感到困惑。

我有一段代码可以解析一些数据并使用 Insert 方法将结果存储在我们的网络服务器的 HttpRuntime.Cache 中。这将存储 10 秒。似乎有一些问题，所以我创建了一个测试页面，它从缓存中检索一个简单的对象并显示它是否为空。要将对象添加到缓存中，我使用：

`HttpRuntime.Cache.Insert(CHECK_KEY, new object(), null, DateTime.Now.AddSeconds(10), System.Web.Caching.Cache.NoSlidingExpiration);`

在测试页面中，我尝试检索对象：

`var isInCache = this.cacheService.Get<object>(CHECK_KEY) != null;`

cacheService 的方法是：

```
public T Get<T>(string key)
{
  return (T)HttpRuntime.Cache.Get(key);
} 
```

现在奇怪的部分。如果我调用一个调用“Insert”方法的 URL，并转到我的测试页面来检索它，那么大约 99% 的时间`isInCache`是的值。`false`有时它在整个 10 秒内都能正常工作（例如，我每秒刷新我的测试页面，我得到`true`10 次）但同样，大部分时间它只是返回`false`。现在，当我按住 F5 时，**有时**我会在输出中看到`true`，眨眼间，这意味着可以找到密钥！这不是一些浏览器缓存，因为它只会`true`在 10 秒的缓存持续时间内间歇性闪烁，之后它只会显示 false（这是合乎逻辑的，因为密钥已过期）。所以我的问题是：

*   为什么大多数时候从缓存中检索一个简单的对象会失败？
*   缓存中的其他项目（在同一测试页面上）确实会被检索到，而不是那个对象。

更糟糕的是，这（当然！）在我的本地机器上完美运行，在测试机器上，而不是生产。我很无知。请帮忙 ：-）

**编辑：** 好的，所以我现在在两种不同的浏览器中进行测试，IE9 和 Chrome ......并且 IE9 正确显示了 HttpRuntime.Cache 中的项目，但 Chrome 不是。它总是显示 false 并且没有其他缓存数据，除非按住 F5 时偶尔会显示它。从什么时候开始依赖 HttpRuntime.Cache 浏览器？？？额外编辑：IE9 不再显示缓存数据。因此，虽然它可能因浏览器而异，但这并不是说 IE 总是可以工作，而 chrome 不能……它不同。

**EDIT2：** 所以我使用 ViewData 将变量传递给我的视图：

```
ViewData["machineName"] = machineName;
ViewData["isInCache"] = isInCache;
ViewData["A"] = A;
ViewData["B"] = B; 
```

Machinename 来自 Server.MachineName，isInCache 是对象，变量 A 不是来自 HttpRuntime.Cache，变量 B 是，它也间歇性地不存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T13:44:13.023

经过大量调试和思考，托管服务提供商似乎将 IIS 7 应用程序池设置中的“最大工作进程”设置为大于 1 的值。 HttpRuntime.Cache 未在网络场中共享，因此很可能是我点击了没有缓存对象的“错误”实例。连续按 F5 会让我偶尔点击确实缓存了值的实例。

# mysql - MySql 查询语法错误 DATE_SUB

> ID：11035953
> 
> 赞同：0
> 
> 时间：2012-06-14T15:02:32.063
> 
> 标签：mysql, sql, date-format

这个查询有什么问题？

```
SELECT * 
FROM containmentTracker 
WHERE reviewDate < NOW() 
  AND reviewDate > DATE_SUB(NOW(), INTERVAL 10 YEARS) 
```

我已经尝试了几种方式，但每次我使用 DATE_SUB 我都会得到

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“YEARS)”附近使用正确的语法

或类似的错误。

我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T15:04:57.637

to 的单位`INTERVAL`总是*单数*，这使得大声朗读查询时听起来有点奇怪：

```
DATE_SUB(NOW(), INTERVAL 10 YEAR) 
```

请参阅[`DATE_ADD()`参考手册](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-add)。

# asp.net - 谷歌分析代码没有触发

> ID：11035954
> 
> 赞同：0
> 
> 时间：2012-06-14T15:02:32.657
> 
> 标签：asp.net, google-analytics, umbraco

我有一个使用 Umbraco 的电子商务网站。谷歌分析代码在大多数页面上都可以正常工作，但由于某种原因不能在“安全页面”（用户必须登录才能查看的页面）上工作。

我尝试将代码移动到 HTML 中的不同位置，但并不快乐。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T11:09:57.107

解决此问题的最佳方法是尝试自己跟踪，如果在应该是目标 URL 的页面上调用了 __utm.gif。您可以使用 Firebug、Live HTTP Headers 或 Fiddler（如果您使用 Firefox 以外的其他浏览器）中的 Net 选项卡来跟踪页面上的所有请求。

看看这个 [http://productforums.google.com/forum/#!category-topic/analytics/discuss-tracking-and-implementation-issues/pjKZ1pou7Sg](http://productforums.google.com/forum/#!category-topic/analytics/discuss-tracking-and-implementation-issues/pjKZ1pou7Sg)

来自谷歌

# maven - 如何从被 maven 依赖项覆盖的战争中删除 .jar 文件

> ID：11035961
> 
> 赞同：5
> 
> 时间：2012-06-14T15:03:00.800
> 
> 标签：maven, war, ehcache, dependency-management

我有一个 maven3 webapp (war) 项目，它有 2 个依赖项。一个是 jar (ehcache)，另一个是战争依赖项（我无法控制的第 3 方库）。

第 3 方战争依赖项依赖于更早版本的 ehcache，这与我需要使用的更高版本发生冲突。

以下步骤在我的应用程序包期间发生。

1.  我的 ehcache jar 被复制到 /WEB-INF/lib/
2.  还包括 ehcache 的 .war 依赖项构建并覆盖在我的目标之上
3.  最终的 .war 文件是从目标创建的

不管我做什么，战争总是包括早期版本的ehcache。我什至尝试编写一个我通过 maven-antrun-plugin 执行的 ant 脚本，该脚本从目标目录中删除 .jar 文件。但是，这总是在覆盖 .war 依赖项之前完成。

有谁知道我可以如何排除/删除早期版本的 ehcache？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T16:03:46.193

您可能需要按文件名从覆盖中排除 ehcache jar。如果你还没有为你的依赖战争声明一个明确的覆盖，你也必须在战争插件配置中这样做：

```
<build>
  <plugins>
    <plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-war-plugin</artifactId>
      <version>2.2</version>
      <configuration>
        <overlays>
          <overlay>
            <groupId>your.thirdparty.war.groupId</groupId>
            <artifactId>your.thirdparty.war.artifactId</artifactId>
            <excludes>
              <exclude>WEB-INF/lib/ehcache*.jar</exclude>
            </excludes>
          </overlay>
        </overlays>
      </configuration>
    </plugin>
  </plugins>
</build> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-14T20:43:17.857

有关排除传递依赖的更多信息：

在 stackoverflow 上：[排除单个依赖项的所有传递依赖项](https://stackoverflow.com/questions/547805/how-to-exclude-all-transitive-dependencies-of-a-maven-dependency)

在网络上（参考）[http://www.sonatype.com/books/mvnref-book/reference/pom-relationships-sect-project-dependencies.html#pom-relationships-sect-transitive](http://www.sonatype.com/books/mvnref-book/reference/pom-relationships-sect-project-dependencies.html#pom-relationships-sect-transitive)

# java - 使用 Android 套接字时，为什么会“主动拒绝”连接？

> ID：11035970
> 
> 赞同：1
> 
> 时间：2012-06-14T15:03:29.707
> 
> 标签：java, android, sockets

我已经复制/粘贴了本[教程中关于 Android 上的套接字](http://thinkandroid.wordpress.com/2010/03/27/incorporating-socket-programming-into-your-applications/)的代码。

它构建良好并按预期运行，直到尝试连接。

我已经将它与 USB 连接，并且我使用 ADB 来打开端口转发。

我用 C# 编写了测试应用程序（我比 Java 更舒服），我不断收到[错误 10061](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740668%28v=vs.85%29.aspx#WSAETIMEDOUT)：

> 由于目标计算机主动拒绝，无法建立连接。这通常是由于尝试连接到在外部主机上处于非活动状态的服务（即没有服务器应用程序运行的服务）造成的。

当我使用[SocketTest](http://sockettest.sourceforge.net/)时，我收到以下（相当神秘的）消息：

> 连接错误：连接

我试过禁用我的防火墙，但这没有帮助。有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T15:10:08.063

“主动拒绝”意味着目标已经发回一个数据包，表明没有进程在监听端口（“没有服务器应用程序正在运行”）。一些防火墙甚至会过滤这些数据包，导致在尝试连接时超时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T16:30:14.317

事实证明这与亚行有关。我在会话开始时就开始了端口转发，但是 ADB 进程必须在某个时候重新启动，因为当我重新发出端口转发命令时，我的应用程序开始运行。

真可惜没有办法查看 ADB 当前正在转发的端口。我想底线是“如果有疑问，请再做一次”。

# android - 在android中创建倾斜的edittext

> ID：11035976
> 
> 赞同：0
> 
> 时间：2012-06-14T15:03:49.363
> 
> 标签：android, android-edittext

我需要以与水平轴成 45 度角的方式显示 EditText。所以我使用此代码来执行此操作

```
EditText editText = (EditText) findViewById(R.id.edit_text);
editText.setText("Hello");
Animation anim = new RotateAnimation(0.0f, -45.0f, 190, 90);
anim.setFillAfter(true);
editText.setAnimation(anim); 
```

它还根据我的要求显示 EditText。但是当我开始在其中输入一些文本时出现了问题。

![截屏](../Images/86007f6a237ff10df6aee937a121a0fb.png)

正如您在屏幕截图中看到的那样，edittext 的某些地方没有显示文本，而在edittext 的中间部分仅显示了文本。

编辑文本左角的Hello**只是因为，我使用****setText()设置**

请帮助我如何倾斜地创建编辑文本，以便我可以正确输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T06:37:49.223

经过长时间的研发，我成功解决了这个问题，

```
public class CustomEditText extends EditText {

private Animation rotateAnim;
public CustomEditText(Context context) {
        super(context);
}

public CustomEditText(Context context, AttributeSet attrs){
    super(context, attrs);
}

private void createAnim(Canvas canvas) {
        rotateAnim = new RotateAnimation(0, -45, 250, 50);
        rotateAnim.setRepeatCount(Animation.INFINITE);
        startAnimation(rotateAnim);
}

@Override
protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        // creates the animation the first time
        if (rotateAnim == null) {
                createAnim(canvas);
        }

}
} 
```

![我的新工作屏幕截图](../Images/8386cdd485a3f9c8149cf2031b5d1da5.png)

# c# - 无法从关闭的 TextReader 中读取

> ID：11035977
> 
> 赞同：0
> 
> 时间：2012-06-14T15:03:55.807
> 
> 标签：c#, .net-2.0

我有一个处理一些大型 CSV 文件的系统。

现在出现的情况是，这些文件可能在实际逗号分隔的内容之前有许多非分隔的、毫无价值的行。

我采用的方法是创建一个临时阅读器来确定多余行的数量，然后将正在工作的 TextReader 移动到准备处理的行数上。

我的代码如下：

```
private static TextReader PrepareReader(TextReader reader)
    {
        // Variables
        TextReader tmpReader = reader;
        Int32 superfluousLineCount = 0;

        // Determine how many useless lines we have
        using (tmpReader)
        {
            string line;
            string headerIdentifier = "&1,";
            while ((line = tmpReader.ReadLine()) != null)
            {
                // Check if the line starts with the header row identifier
                if (line.Substring(0, 3) != headerIdentifier)
                {
                    // Increment the superfluous line counter
                    superfluousLineCount++;
                }
                else
                {
                    break;
                }
            }
        }

        // Move the source reader through how many lines we want to ignore
        using (reader)
        {
            for (int i = superfluousLineCount; i > 0; i--)
            {
                reader.ReadLine();
            }
        }

        // Return
        return reader;
    } 
```

但是，`reader.ReadLine();`在这部分代码中：

```
for (int i = superfluousLineCount; i > 0; i--)
{
reader.ReadLine();
} 
```

...引发以下异常

> 无法从关闭的 TextReader 中读取。mscorlib 方法中的 ObjectDisposedException：Void ReaderClosed()
> 
> 堆栈跟踪：在 System.IO.__Error.ReaderClosed() 在 System.IO.StreamReader.ReadLine() 在 CsvReader.PrepareReader(TextReader reader) 在 CsvReader.cs:line 93

非常感谢任何建议。另外，这是应对挑战的最佳方式吗？

注释：框架 2.0

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T15:06:49.577

当你使用`using (tmpReader)`它时它会关闭`tmpReader`（它引用相同的对象`reader`），所以当你尝试从`reader`循环中读取时，它会关闭。

你最好的选择是结合这两个循环。因为你只想跳过行，我认为第一个循环的逻辑就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T15:14:20.350

我认为你只需要这样做（规范化/纠正它，我做了一些简化而没有任何编译或测试）：

```
 // edit
    private static TextReader PrepareReader(TextReader reader, out string outLine)
    {

            string line;
            string headerIdentifier = "&1,";
            while ((line = reader.ReadLine()) != null)
            {
                // Check if the line starts with the header row identifier
                if (line.Substring(0, 3) != headerIdentifier)
                {
                    // ... do nothing
                }
                else
                {
                    // edit
                    outLine = line;
                    break;
                }
            }

    } 
```

IOW 使用输入参考，并将阅读器移动到您想要的位置。

**请注意**在此方法之外关闭您的阅读器

# java - 如何在运行时更改 log4j jdbc 适配器数据库位置

> ID：11035979
> 
> 赞同：0
> 
> 时间：2012-06-14T15:04:01.907
> 
> 标签：java, log4j

以下是我用于 log4j 的 jdbc 适配器，如何在运行时更改 dblocation

```
log4j.appender.DB=org.apache.log4j.jdbc.JDBCAppender
log4j.appender.DB.driver=org.sqlite.JDBC
log4j.appender.DB.URL=jdbc:sqlite:{To change}
log4j.appender.DB.user=
log4j.appender.JDBC.commit=true
log4j.appender.DB.threshold=trace
log4j.appender.DB.sql=INSERT INTO sfLog(UserID,UserName,IPAddress,Port,UserAgent,Type,Status,Message,Date) VALUES('%X{UserID}','%X{UserName}','%X{IP}','%X{Port}','%X{Agent}','%X{Type}','%X{Status}','%m','%d{dd-MM-yyyy HH:mm:ss}')
log4j.appender.DB.layout=org.apache.log4j.PatternLayout 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T15:41:25.073

您可以在 JVM 命令行上使用属性占位符和 -D：

例如

```
log4j.appender.DB.URL=${myDbUrl} 
```

然后在您的 JVM 命令行上，您将包含以下内容：

```
-DmyDbUrl=blahblahblah 
```

或者您可以使用 System.setProperty，但您必须在 log4j 初始化之前这样做。

# java - 提取字符串——如果不是正则表达式，那又是什么呢？

> ID：11035997
> 
> 赞同：2
> 
> 时间：2012-06-14T15:04:57.723
> 
> 标签：java, string

> **可能重复：**
> [正则表达式匹配打开的标签，XHTML 自包含标签除外](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)

我有一个包含大约 2000 行的文件，例如：

```
<nobr>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../Carbon_Monoxide_Poisoning_Prevention.htm"><b>poisoning - prevention</b></a></nobr><br>
<nobr>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../Carbon_Monoxide_Symptoms.htm"><b>symptoms</b></a></nobr><br> 
```

1.) URL 始终采用以下形式`../foo.html`

2.) 显示名称有时会用`<b> ... </b>`标签括起来，有时则不会。

3.）文件中的每一行最多包含四个`&nbsp;`我需要计算和标记为空格的行。这些最终将用于格式化缩进，所以我需要以某种方式捕获信息。

我需要在分隔的平面文件中包含超链接、显示名称和空格数名称，如下所示（基于上述数据）：

```
../Carbon_Monoxide_Poisoning_Prevention.htm,poisoning - prevention,4
../Carbon_Monoxide_Symptoms.htm,symptoms,4 
```

. 虽然我可以通过一堆乱七八糟的字符串、子字符串和 if 语句来解析它，但这似乎比它需要的更麻烦。我正在研究正则表达式（我第一次这样做），但对某些语法有点不清楚；我最好看到与我的应用程序类似的代码示例，但无法找到任何非常适合的示例。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T15:09:10.250

如果需要对事物进行计数作为输出，则不应（并且可能不能）使用正则表达式。通常，如果您尝试做的事情由算法描述，您应该对其进行编程。如果您尝试做的事情被描述为“我正在寻找一个看起来像...的字符串/子字符串”，则正则表达式可能是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T15:12:48.127

我不会说正则表达式，但您可以通过使用脚本语言来避免编写整个程序。Bash/Perl/Powershell/等中有一些工具。看起来它们会更好地满足您的目的。然后，您仍然可以使用 grep 之类的工具来利用正则表达式与其他工具、数据结构、条件等混合的强大功能。此外，如果您要处理繁重的 HTML，那么您可以使用管道工具或致电，让您的生活更轻松。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T15:37:10.193

[正则表达式解析 HTML 是不合适的，因为它不是正则语言。这个要问多少次？](https://stackoverflow.com/a/1732454/177800)除了正则表达式不是一种编程语言，你不能做你想做的计数和记账，它们是为了匹配[正则语言](http://en.wikipedia.org/wiki/Regular_language)中的模式。

> 有些人在遇到问题时会想“我知道，我会使用正则表达式”。现在他们有两个问题。——杰米·扎温斯基

正则表达式是专门的工具，它们不是敲击每一个看起来像`String`需要模式匹配、搜索或以其他方式操作的钉子的锤子。

[Jeff Atwood 对正则表达式的优缺点进行了很好的讨论](http://www.codinghorror.com/blog/2008/06/regular-expressions-now-you-have-two-problems.html)，如果您对它们不太了解，请在尝试使用它们之前阅读他所说的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T16:02:34.200

您一次只能抓取一件事，一次抓取所有 URL、显示名称或空格。我不会使用每个说的正则表达式来做到这一点，但如果我绝对必须使用正则表达式，我会这样做：

要在一行中获取 url：`\.\./.*\.html?`

要获取显示名称：`(?<=("|b)>)[a-ZA-Z].+?(?=(</(a|b)))`

要抓住空间（简单）：`&nbsp;`

* * *

我会首先按`<br>`标签拆分文件以获取各个行。然后运行上面的正则表达式来提取 url、显示名称和空格，并将它们组合在一个分隔的输出中。我确信 Java 有一个[`preg_match_all`](http://php.net/manual/en/function.preg-match-all.php)等价物来匹配找到的所有模式（对空格和计数很有用）

请注意，这些模式是在 Sublime Text 中测试的，如果不进行一些调整，可能无法在 Java 中工作。如果需要，我可以稍后修改我的答案以包含 Java，但是对于这样的一次性事情，您最好使用 Python 或其他一些脚本语言。

祝你好运！

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-14T15:19:13.723

正则表达式将是解决此问题的正确方法。以及一个字符串标记器（用于计算空格）。您将不得不使用子字符串作为在原始字符串中移动的一种方式。

[以下是有关模式](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/Pattern.html)和[标记](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/StringTokenizer.html)器的一些链接（包含示例）