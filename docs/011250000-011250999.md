# StackOverflow 问答 11250000-11250999

# ruby-on-rails - 仅在定义参数时如何更新属性？

> ID：11250002
> 
> 赞同：0
> 
> 时间：2012-06-28T17:36:21.627
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, activemodel

目前在我的更新控制器方法中，我有：

```
@group.attributes = {
  :title => params[:group][:title],
  :description => params[:group][:description],
  :password_required => params[:group][:password_required],
  :password => params[:group][:password],
  :archived => params[:group][:archived]
} 
```

问题是这种方法在多个地方使用，并且所有这些参数并不总是传递，这导致“nil”导致数据库提交回滚。

仅当定义了属性而无需使用 if 块时，如何才能设置它们？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T17:40:04.887

可能会做一些像这样糟糕的事情：

```
@group.attributes = {
  :title => params[:group][:title] || @group.title,
  :description => params[:group][:description] || @group.description,
  :password_required => params[:group][:password_required] || @group.password_required,
  :password => params[:group][:password] || @group.password,
  :archived => params[:group][:archived] || @group.archived
} 
```

不推荐这种丑陋的代码，但它回答了如何在没有显式`if`块的情况下执行此操作的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T17:43:50.903

为什么不简化它

```
@group.update_attributes(params[:group]) 
```

这样，如果我们的值为零，它将不会被更新

# python - 我的 Pygame 蛇游戏陷入无限循环？

> ID：11250003
> 
> 赞同：2
> 
> 时间：2012-06-28T17:36:26.680
> 
> 标签：python, pygame

在过去的几个月里，我一直在尝试学习 python，我决定尝试制作一个蛇游戏来进一步提高我的知识。我不知道出了什么问题，但它卡在了我的输出 for 循环中。我尝试了多种方法，但都没有成功。这是我的代码：

```
import pygame, sys
from pygame.locals import *
from collections import deque

pygame.init()

clock = pygame.time.Clock()

background = [
    ['++++++++++++++++++++++++++++++'],
    ['+                            +'],
    ['+                            +'],
    ['+                            +'],
    ['+                            +'],
    ['+                            +'],
    ['+                            +'],
    ['+                            +'],
    ['+                            +'],
    ['+                            +'],
    ['+                            +'],
    ['+                            +'],
    ['+                            +'],
    ['+                            +'],
    ['++++++++++++++++++++++++++++++']]

screen_surface = background
y, x = 7, 14
location = (y, x)

snake_head = '@'
snake_body = 'x'
direction = 'left'
past_moves = deque([(7, 15), (7, 16), (7, 17), (7, 18)])

def Clear_ScreenSurface():
    screen_surface = background

def Draw_ScreenSurface():
    for i in range(15):
         a = screen_surface[i][:]
         if i == 14:
             return
         print a

def Update_Past_Moves():
    past_moves.popleft()

def Print_Snake_Body():
    for i in range(len(past_moves)):
        a1 = past_moves[i][0] - 1
        a2 = past_moves[i][1] - 1
        screen_surface[a1][a2:(a2 + 1)] = snake_body

def Print_Snake_Head():
    screen_surface[location[0]][location[1]:(location[1] + 1)] = snake_head

def Check_Collision():
    if location[1] == 0 or location[1] == 29:
        pass
    if location[0] == 0 or location[0] == 14:
        pass
    for a in range(len(past_moves)):
        a = a - 1
        if location[0] == past_moves[a][0] and location[1] == past_moves[a][1]:
        pass

def main():

    direction = 'left'
    y, x = 7, 14
    location = (y, x)
    while 1:
        Print_Snake_Head()
        Print_Snake_Body()
        Draw_ScreenSurface()
        Clear_ScreenSurface()
        past_moves.append(location)

        for event in pygame.event.get():
            if event.type == pygame.KEYDOWN:
                if event.key == pygame.K_UP:
                    direction = 'up'
                elif event.key == pygame.K_LEFT:
                    direction = 'left'
                elif event.key == pygame.K_DOWN:
                    direction = 'down'
                elif event.key == pygame.K_RIGHT:
                    direction = 'right'

        if direction == 'up':
            location = (y - 1, x)
            y, x = location[0], location[1]
        if direction == 'left':
            location = (y, x - 1)
            y, x = location[0], location[1]
        if direction == 'down':
            location = (y + 1, x)
            y, x = location[0], location[1]
        if direction == 'right':
            location = (y, x + 1)
            y, x = location[0], location[1]

        if location != 'O':
            Update_Past_Moves()

        Check_Collision()
        clock.tick(30)

main() 
```

这是输出：

```
['x', 'x', 'x', 'x', 'x', 'x', 'x', 'x', 'x', 'x', 'x', 'x', 'x', 'x', 'x', 'x', 'x',     'x', 'x', 'x', 'x', 'x', 'x', 'x', 'x', 'x', 'x', 'x', 'x', 'x', 'x', 'x', 'x',     'x', 'x', 'x', 'x', 'x', 'x', 'x', 'x', 'x', 'x', 'x', 'x', 'x', 'x', 'x', 'x',     'x', 'x', 'x', 'x', 'x', 'x', 'x', 'x']
['+                            +', '@', '@', '@', '@', '@', '@', '@', '@', '@', '@',     '@', '@', '@', '@']
['+                            +']
['+                            +']
['+                            +']
['+                            +']
['+                            +']
['+                            +']
['++++++++++++++++++++++++++++++']
['+                            +']
['+                            +']
['+                            +']
['+                            +']

Traceback (most recent call last):
  File "C:\Users\Coding\Python Programming\Snake Game\snake_game.py", line 112, in <module>
    main()
  File "C:\Users\Coding\Python Programming\Snake Game\snake_game.py", line 78, in main
    Draw_ScreenSurface()
  File "C:\Users\Coding\Python Programming\Snake Game\snake_game.py", line 45, in Draw_ScreenSurface
    print a
KeyboardInterrupt 
```

我必须按 CTRL-c (windows) 来结束它，并且重复此输出，我不想用不必要的代码向我的问题发送垃圾邮件。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T17:42:59.520

以下内容减少了“移动列表”的大小

```
def Update_Past_Moves():
    past_moves.popleft() 
```

因此，当您尝试打印蛇时，最终将没有任何东西可以绘制：

```
def Print_Snake_Body():
    for i in range(len(past_moves)):
        # No moves left 
```

这就是为什么，你看到的只是蛇的“头”，@ 字符

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T20:59:37.913

无限循环似乎没问题，因为您正在使用`while 1:`

您总是在该位置的一个单元格下方打印头部，这就是您在第二行中获得 @ 的原因：

```
def Print_Snake_Head():
    screen_surface[location[0]][location[1]:(location[1] + 1)] = snake_head 
```

该行`if location != 'O':`没有意义，因为位置是一对坐标而不是字符。

# html - 多个选项卡中的一个表单操作

> ID：11250008
> 
> 赞同：0
> 
> 时间：2012-06-28T17:37:00.903
> 
> 标签：html, forms

我很难处理表单操作。我想知道是否可以在多个选项卡上进行一个表单操作。在最后一个选项卡中，用户单击提交按钮。这可以做到吗？

**Html/表单动作**

```
<div id="tabs">
    <ul>
        <li><a href="#tabs-1">Nunc tincidunt</a></li>
        <li><a href="#tabs-2">Proin dolor</a></li>
        <li><a href="#tabs-3">Aenean lacinia</a></li>
    </ul>

    <div id ="tabs-1">
        <div id=panel>
            <br>
            <form action="xx.php" method="post" name="post">
             Form Content
        </div>
    </div>
    <div id ="tabs-2">
        <div id=panel>
            <br>
            Form Content

        </div>
    </div>
    <div id ="tabs-3">
        <div id=panel>
            <br>
            Form Content

                 <input type="submit" name="submit" value="Post "/>
             </form>
        </div>
    </div>

</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T18:11:05.320

由于标签不能跨越未闭合的标签，您需要将 <form> 移到 div id="tabs" 之外。就像是：

```
<form action="xx.php" method="post" name="post">
    <div id="tabs">
        <ul>
            <li><a href="#tabs-1">Nunc tincidunt</a></li>
            <li><a href="#tabs-2">Proin dolor</a></li>
            <li><a href="#tabs-3">Aenean lacinia</a></li>
        </ul>

        <div id ="tabs-1">

        </div>

        <div id ="tabs-2">

        </div>

        <div id ="tabs-3">

        </div>
    </div>
</form> 
```

这样，选项卡中的任何提交或重置按钮都将针对表单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T17:49:50.513

将表单打开/关闭标签移到 div 之外，并将 div 更改为字段集：

```
<form action="xx.php" method="post" name="post">

    <fieldset id ="tabs-1">
    ...
    </fieldset>
    <fieldset id ="tabs-2">
    ...
    </fieldset>
    ...etc

</form> 
```

# c# - 启动 WinForm 应用程序 Aerosnaped 右对齐

> ID：11250010
> 
> 赞同：5
> 
> 时间：2012-06-28T17:37:04.973
> 
> 标签：c#, winforms, aero-snap

这应该是一个简单的问题，但是 search-foo 让我失望了。我的目标是检测我在 Aero（Vista 或 Windows 7）下运行，并默认使用我的应用程序 Aerosnap。（事实证明，我写的一个公司应用程序是由几乎每个人在空中拍摄的，他们的 Outlook 是向左拍摄的。）

该应用程序是 WinForms，我目前正在做

```
Width = Screen.PrimaryScreen.WorkingArea.Size.Width / 2;
Height = Screen.PrimaryScreen.WorkingArea.Size.Height;
Top = Screen.PrimaryScreen.WorkingArea.Top;
Left = Screen.PrimaryScreen.WorkingArea.Left + 
       Screen.PrimaryScreen.WorkingArea.Size.Width / 2; 
```

在我表单的加载事件中。这很好用，除了如果他们使用 WindowKey+Arrow，它就好像它只是一个正常定位的表单。这意味着 WindowKey+Right 在第一次按下时什么都不做，而 WindowKey+Left 向左对齐。这不是一个主要问题，但如果我可以指定一个窗口大小，然后将应用程序对齐到右侧，那么我希望这些键可以像任何其他应用程序一样起作用。

我不确定这是否可能，以下是我确实找到的东西：

*   [在 Windows 7 上保存和恢复 Aero Snap 位置](https://stackoverflow.com/questions/8368540/save-and-restore-aero-snap-position-on-windows-7)
*   [在 WndProc 中处理 AeroSnap 消息](https://stackoverflow.com/questions/9321549/handling-aerosnap-message-in-wndproc)

这些似乎表明没有可用的特殊 AeroSnap 消息。其他人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T20:59:34.933

不知道为什么检查版本不会让你大部分时间。如何使用 Visual C# 确定 Windows 版本 [http://support.microsoft.com/kb/304283](http://support.microsoft.com/kb/304283)

这可能会让你走完剩下的路。[http://social.msdn.microsoft.com/Forums/en/vbgeneral/thread/1a82ec8d-afc3-4eba-8189-6ee105aa6249](http://social.msdn.microsoft.com/Forums/en/vbgeneral/thread/1a82ec8d-afc3-4eba-8189-6ee105aa6249)

# java - JAR 中资源的 URL

> ID：11250011
> 
> 赞同：0
> 
> 时间：2012-06-28T17:37:09.233
> 
> 标签：java, url, wsdl

我需要获取 jar 文件中资源的 URL。我将此 URL 用作我的服务调用的参数。我的以下代码因“没有这样的文件或目录”错误而失败。

```
File file = new File(classLoader.getResource("AXLAPI.wsdl").getFile());
final URL wsdlURL = new URL(this.getClass().getResource(this.getClass().getSimpleName() +".class"),file.toString());
String endpoint = "https://<machine>:8443/axl/";
AXLAPIService ss = new AXLAPIService( wsdlURL ); 
```

以下是执行此操作时看到的错误 -

```
Failed to access the WSDL at: file:/blah/blah/blah.jar!/AXLAPI.wsdl. It failed with: 
/blah/blah/blah.jar!/AXLAPI.wsdl (No such file or directory). 
```

我真的很感激任何处理这个问题的建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-07-27T01:43:39.983

我相信正确的网址应该是

`jar:file:/blah/blah/blah.jar!/AXLAPI.wsdl`

# php - 工厂模式和多态使用

> ID：11250018
> 
> 赞同：0
> 
> 时间：2012-06-28T17:37:32.960
> 
> 标签：oop, php, oop, design-patterns

我正在使用工厂 ( `BillFactory`) 来确定`Bill`要实例化哪个。每个`Bill`s (`AClassBill`等`BClassBill`) 都可以判断提供的数据是否是范围。在因子中，我遍历每个账单并检查当前数据是否在当前账单范围内。如果它在范围内，我实例化该类的一个对象并返回它。

这是代码。

```
interface IBillable {
    function calculate_bill();
}

class Bill implements IBillable {

    protected $from;
    protected $to;
    protected $rate;
    protected $unit_amount;

    public function get_from() {
        return $this->from;
    }

    public function get_to() {
        return $this->to;
    }

    public function get_rate() {
        return $this->rate;
    }

    public function in_range($unit_amount) {
        $_from = $this->get_from();
        $_to = $this->get_to();
        return ($_from <= $unit_amount && $_to >= $unit_amount);
    }

    public function calculate_bill() {
        return ($this->get_rate() * $this->unit_amount);
    }

}

class AClassBill extends Bill {

    protected $from = 0;
    protected $to = 100;
    protected $rate = 3.05;

    public function __construct($amount) {
        $this->unit_amount = $amount;
    }

}

class BClassBill extends Bill {

    protected $from = 101;
    protected $to = 400;
    protected $rate = 4.29;

    public function __construct($amount) {
        $this->unit_amount = $amount;
    }

    public function calculate_bill() {
        if ($this->unit_amount >= 301) {
            return $this->get_rate() * $this->unit_amount;
        } else {
            $bill1 = $this->get_rate() * ($this->unit_amount - $this->get_from() + 1);
            $bill2 = new AClassBill($this->get_from() - 1);
            return $bill1 + $bill2->calculate_bill();
        }
    }

}

class CClassBill extends Bill {

    protected $from = 401;
    protected $to = -1; // not used
    protected $rate = 7.89;

    public function __construct($amount) {
        $this->unit_amount = $amount;
    }

    public function in_range($unit_amount) {
        $_from = $this->get_from();
        return ($_from <= $unit_amount);
    }

}

class BillFactory {

    private static $s1 = null;
    private static $s2 = null;
    private static $s3 = null;

    public static function instance($units) {
        if (is_null(self::$s1))
            self::$s1 = new AClassBill(0);
        if (is_null(self::$s2))
            self::$s2 = new BClassBill(0);
        if (is_null(self::$s3))
            self::$s3 = new CClassBill(0);

        if (self::$s1->in_range($units)) {
            $b = new AClassBill($units);
        } else if (self::$s2->in_range($units)) {
            $b = new BClassBill($units);
        } else if (self::$s3->in_range($units)) {
            $b = new CClassBill($units);
        } else {
            $b = false;
        }
        return $b;
    }

}

for ($i = 1; $i <= 500; $i++) {
    $b = BillFactory::instance($i);
    if ($b !== false) {
        printf("%10s\t%04d\t%04.2f\t%04d\t%06.2f\n", get_class($b), $i, $b->get_rate(), $i, $b->calculate_bill());
    }
} 
```

问题出在工厂类 ( `BillFactory`) 中。您会注意到我创建了 3 种`Bill`s 类型（单例模式）的 3 个虚拟实例。这就是我解决问题的方法。我的问题是我应该使用这个虚拟实例吗？他们是否违反了任何[oop](/questions/tagged/oop "显示标记为“oop”的问题")原则？

`in_range`另一种方法是通过将方法转换为静态方法来做到这一点。然后我不必创建实例。此外，由于此`in_range`方法是特定于类的属性（意味着它不会在不同的实例上改变），它应该是有意义的。在这种情况下，我必须在`in_range`方法中对这些值进行硬编码，或者将所有`from`,`to`和`range`属性设为静态。

我应该使用什么方法？你知道更好的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T07:07:27.620

尝试重新审视设计。看起来应该只有 1 个 Bill 类（并创建 3 个不同的实例而不是 3 个不同的类），并且可能将 calculate_bill 委托给一个策略（策略模式）。

# delphi - Delphi XE2 中的 TDataModule.ClassGroup 伪属性究竟做了什么？

> ID：11250019
> 
> 赞同：4
> 
> 时间：2012-06-28T17:37:33.893
> 
> 标签：delphi, delphi-xe2, datamodule

我试图将一个组件从一个数据模块复制并粘贴到 Delphi XE2 中的另一个数据模块中。该组件是一个快速报告数据源链接组件。数据模块是全新的，刚刚在 XE2 中创建。

其他人也有同样的问题，并在[质量中心报告为 106369](http://qc.embarcadero.com/wc/qcmain.aspx?d=106369)，同样的错误消息将我引导到这个[神秘的 DocWiki 条目。](http://docwiki.embarcadero.com/RADStudio/en/ClassGroup_pseudo-property_of_TDataModule)

因此，数据模块现在具有框架亲和性，以及仅设计时的伪属性，根据文档：

“因为 ClassGroup 伪属性仅由 IDE 使用，而不是编译器生成的属性（因此，'伪属性'），ClassGroup 没有记录在编译器生成的库参考中。您正在阅读的页面是ClassGroup 的文档。”

因此，我什至第一次知道它的存在是当它阻止我从一组现有的设计时构建块中复制和粘贴组件到我的数据模块中时，我不想从头开始重建。

一旦我更改了数据模块的关联性，我就可以将内容粘贴到数据模块中而不会打扰我。谢天谢地，谷歌那个错误，否则我会被卡住。

如果它旨在帮助我们编写跨平台数据模块，但它只影响 IDE，根据文档，这与您在设计时使用它时收到的警告不一致，这是您在更改时收到的错误它：

```
 EInvalidType : The following component(s) are not available in the specified 
 class group. This is likely to cause compile or runtime errors. 
 frxDBSet.TfrxDBDataset. 
```

我看不到该错误消息如何正确，文档也可以正确。

如果设置不正确，警告似乎暗示编译、链接和运行时错误。好奇的人想知道到底发生了什么，想知道：这是什么东西，为什么它会被添加到 XE2 的数据模块中。我预计其他人会偶然发现这个奇怪的功能，感觉他们踩到了恐龙粪便之类的东西，并想知道这个功能是怎么回事。

在这一点上，我最好的答案是数据模块对 TPersistent 的亲和性，这意味着，用 XE2 术语来说，这个数据模块不希望其中包含 VCL 特定的非可视控件。在 Delphi 的未来版本中，也许一个类似的标记也可以让我们将表单标记为“对 VCL 或 Windows 的依赖项”？

更新 1：数据模块的 .PAS 源代码以一种看起来有点像编译器指令的方式存储此伪属性，如下所示：

```
implementation

{%CLASSGROUP 'Vcl.Controls.TControl'} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-28T21:10:28.237

我认为这很明显是它的预期用途，并且您链接到的文档对此目的非常广泛。

它旨在防止仅 VCL 的组件被放置在 FireMonkey 可访问的 DataModule 上，反之亦然。

由于 TDataModule 最初是框架中立的，因此只能在其上放置框架中立的组件。

很明显，您的源 DataModule 与您的新 DataModule 具有不同的亲和性，这就是为什么在您更改新 DataModule 的亲和性以匹配源 DataModule 的亲和性之前复制/粘贴不起作用的原因。

# linux - 将数据从一个文件添加到另一个文件

> ID：11250023
> 
> 赞同：12
> 
> 时间：2012-06-28T17:37:46.400
> 
> 标签：linux, file, shell, prepend

如何将 file1.txt 中的数据添加到 file2.txt？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-28T17:42:38.540

以下命令将获取这两个文件并将它们合并为一个

```
cat file1.txt file2.txt > file3.txt; mv file3.txt file2.txt 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-10-11T05:00:10.623

`sponge`您可以使用from在管道中执行此操作`moreutils`：

```
cat file1.txt file2.txt | sponge file2.txt 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-10-11T05:30:49.330

使用 GNU sed 的另一种方法：

```
sed -i -e '1rfile1.txt' -e '1{h;d}' -e '2{x;G}' file2.txt 
```

那是：

*   在第 1 行，附加文件的内容`file1.txt`
*   在第 1 行，复制模式空间以保留空间，并删除模式空间
*   在第 2 行，交换保持空间和模式空间的内容，并将保持空间附加到模式空间

有点棘手的原因是`r`命令追加内容，而第 0 行不可寻址，所以我们必须在第 1 行进行，将原行的内容移开，然后在该文件已附加。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-15T13:11:00.803

如果它在您的系统上可用，那么moreutils 的[海绵就是为此而设计的。](http://manpages.ubuntu.com/manpages/xenial/man1/sponge.1.html)这是一个例子：

```
cat file1.txt file2.txt | sponge file2.txt 
```

如果您没有`sponge`，则以下脚本使用临时文件执行相同的工作。它确保其他用户无法访问临时文件，并在最后清理它。

如果您的系统或脚本崩溃，您可能需要手动清理临时文件。在 Bash 4.4.23 和 Debian 10 (Buster) Gnu/Linux 上测试。

```
#!/bin/bash
#
# ---------------------------------------------------------------------------------------------------------------------- 
# usage [ from, to ]
#       [ from, to ]
# ---------------------------------------------------------------------------------------------------------------------- 
# Purpose:
# Prepend the contents of file [from], to file [to], leaving the result in file [to].
# ---------------------------------------------------------------------------------------------------------------------- 

# check 
[[ $# -ne 2 ]] && echo "[exit]: two filenames are required" >&2 && exit 1

# init
from="$1"
to="$2"
tmp_fn=$( mktemp -t TEMP_FILE_prepend.XXXXXXXX )
chmod 600 "$tmp_fn"

# prepend
cat "$from" "$to" > "$tmp_fn"
mv "$tmp_fn" "$to"

# cleanup
rm -f "$tmp_fn"

# [End] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T17:43:36.417

写入文件的方式就像1）。附加在文件末尾或 2). 重写那个文件。

如果你想把file1.txt中的内容放在file2.txt之前，恐怕你需要重写合并后的罚款。

# jquery - jQuery Flot：在 x 轴上重复标签

> ID：11250027
> 
> 赞同：4
> 
> 时间：2012-06-28T17:37:59.677
> 
> 标签：jquery, flot

我试图在我的图表中显示月/年，但是 x 轴上有一个带有标签的错误：

![在此处输入图像描述](../Images/dae1d72374283441be4b236cdbe4d842.png)

**2012 年 4 月有 3 次**（以及 5 月和 6 月）。

这是代码

```
function showGraph() {
        var data = [
            { label : "Odmeny", data: [ [(new Date('2012/04/01')).getTime(), 10], [(new Date('2012/05/01')).getTime(), 10], [(new Date('2012/06/01')).getTime(), 10] ] },
            { label : "Koeficienty", data: [ [(new Date('2012/04/01')).getTime(), 11], [(new Date('2012/05/01')).getTime(), 13], [(new Date('2012/06/01')).getTime(), 16], [(new Date('2012/07/01')).getTime(), 12] ] }
        ];
        var options = {
                xaxes: [{
                           mode: "time",
                           timeformat: "%b&nbsp;%y",
                           monthNames: ["jan", "feb", "mar", "apr", "máj", "jún", "júl", "aug", "sep", "okt", "nov", "dec"]
                       }],
                       yaxes: [ {
                                  min: 0
                                } ],
                       series: {
                           lines: { 
                               show: true,
                               fill: null
                           },
                           points: {
                                show: true,
                                radius: 3,
                                lineWidth: 2,
                                fill: true,
                                fillColor: "#ffffff",
                                symbol: "circle"
                            }
                       },
                       grid: { hoverable: true, clickable: true }
        };

        $.plot($("#placeholder"), data, options);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T12:06:30.710

在 xaxis 选项下，设置：

```
minTickSize = [1, "month"] 
```

现在发生的情况是，Flot 自然会尝试每月多次生成刻度，然后由于您的格式字符串而显示为同一月份。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T23:29:59.513

```
var options = {
    lines: { show: true },
    points: { show: true },
    xaxis: { mode: "time", 
    timeformat: "%m/%y",   
    minTickSize: [1, "day"], 
    tickSize: [1, "month"]}
    }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T14:37:50.237

工作代码（无 minThickSize）：

```
var options = {
            xaxes: [{
                       mode: "time",
                       timeformat: "%b&nbsp;%y",
                       monthNames: ["jan", "feb", "mar", "apr", "máj", "jún", "júl", "aug", "sep", "okt", "nov", "dec"]
                   }],
                   yaxes: [ {
                              min: 0
                            } ],
                   series: {
                       lines: { 
                           show: true,
                           fill: null
                       },
                       points: {
                            show: true,
                            radius: 3,
                            lineWidth: 2,
                            fill: true,
                            fillColor: "#ffffff",
                            symbol: "circle"
                        }
                   },
                   grid: { hoverable: true, clickable: true }
    }; 
```

# hadoop - Apache Storm 与 Hadoop 的比较

> ID：11250028
> 
> 赞同：29
> 
> 时间：2012-06-28T17:38:00.530
> 
> 标签：hadoop, streaming, apache-storm

Storm 与 Hadoop 相比如何？Hadoop 似乎是开源大规模批处理的事实标准，Storm 比 hadoop 有什么优势吗？还是它们完全不同？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-28T22:41:13.367

你为什么不说你的意见。

*   [http://www.infoq.com/news/2011/09/twitter-storm-real-time-hadoop/](http://www.infoq.com/news/2011/09/twitter-storm-real-time-hadoop/)
*   [http://engineering.twitter.com/2011/08/storm-is-coming-more-details-and-plans.html](http://engineering.twitter.com/2011/08/storm-is-coming-more-details-and-plans.html)

Twitter Storm 被吹捧为实时 Hadoop。这更像是一种易于消费的营销方式。

它们表面上很相似，因为它们都是分布式应用程序解决方案。除了典型的分布式架构元素，如主/从、基于 Zookeeper 的协调之外，对我来说，比较掉下来了。

Twitter 更像是一个处理数据的管道。管道连接各种计算节点，这些节点接收数据、计算和传递输出。（术语是 spouts 和 bolts）将此类比扩展为一个复杂的管道布线，可以在需要时重新设计，你就会得到 Twitter Storm。

简而言之，它处理数据。没有延迟。

Hadoop 在这方面的不同主要是由于 HDFS。它是面向分布式存储和容忍许多规模（磁盘、机器、机架等）中断的解决方案

M/R 旨在利用 HDFS 上的数据本地化来分发计算作业。它们一起不提供实时数据处理的设施。但是，当您查看大数据时，这并不总是需要。（大海捞针的比喻）

简而言之，Twitter Storm 是一个分布式实时数据处理解决方案。我认为我们不应该比较它们。Twitter 之所以构建它，是因为它需要一个工具来实时处理小推文，但数量巨大。

请参阅：[HStreaming](http://www.hstreaming.com/)如果您不得不将其与某些事物进行比较

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-18T21:04:41.763

基本上，它们都用于分析大数据，但 Storm 用于实时处理，而 Hadoop 用于批处理。

这是我发现的一个非常好的Storm介绍： [点击这里](http://www.infoq.com/presentations/Storm)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-04T11:59:06.160

与其进行比较，不如说它们现在通过批处理 + 实时（伪实时）处理相互补充。有一个相应的视频演示[——Ted Dunning 在 Twitter 的 Storm 上](http://www.youtube.com/watch?v=7PcmbI5aC20)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-05-06T14:41:17.073

我使用 Storm 已经有一段时间了，现在我已经放弃了这项非常好的技术，而是为了一个令人惊叹的技术：Spark ( [http://spark.apache.org](http://spark.apache.org) )，它为开发人员提供了一个用于批处理或流处理的统一 API（微-batch）以及机器学习和图形处理。

值得一试。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-04T16:40:32.730

Storm 用于快速数据（实时），而 Hadoop 用于大数据（预先存在的大量数据）。Storm 无法处理大数据，但它可以生成大数据作为输出。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-09T16:13:39.573

> Apache Storm 是一个免费的开源分布式实时计算系统。Storm 可以轻松可靠地处理无限制的数据流，实时处理就像 Hadoop 进行批处理一样。

由于Hadoop生态系统中存在许多子系统，我们必须根据业务需求和特定系统的可行性来选择合适的子系统。

Hadoop MapReduce 对于一次处理一项作业非常有效。这就是为什么 Hadoop 被广泛用作数据仓库工具而不是数据分析工具的原因。

由于该问题仅与“ **Storm** ”与“ **Hadoop** ”有关，请查看[Storm 用例](http://hortonworks.com/hadoop/storm/)- 金融服务、电信、零售、制造、运输。

1.  Hadoop MapReduce 最适合批处理。
2.  Storm 是一个完整的流处理引擎，可用于亚秒级延迟的实时数据分析。

查看这篇[dezyre 文章](https://www.dezyre.com/article/spark-vs-hadoop-vs-storm/145)，比较 Hadoop、Storm 和 Spark。它解释了相同点和不同点。

可以用下图概括（来自`dezyre`文章）

[![在此处输入图像描述](../Images/65e7c71926d13fa5c3a792a8b7cef1d1.png)](https://i.stack.imgur.com/eihkk.png)

# linq - LINQ Lambda 选择中断包括

> ID：11250030
> 
> 赞同：0
> 
> 时间：2012-06-28T17:38:07.350
> 
> 标签：linq, entity-framework, lambda, sql-order-by

假设我有一个包含三个实体“Item”、“ItemType”和“ItemPart”的实体模型。我正在尝试编写一个查询，该查询将为每个项目类型提取最新项目（按 item.date），并将这些部分包含在查询中，以便在获得结果后使用它们。我写了一个如下所示的查询：

```
IQueryable<Item> results = context.Items
    .Include("ItemTypes")
    .Include("ItemParts")
    .Where(x => x.CurrentItem == true)
    .GroupBy(x => x.ItemType).Select(group => group.OrderByDescending(item => item.date).FirstOrDefault()); 
```

如果我在没有 GroupBy 行的情况下运行它，一切正常，我可以获得包含的项目。如果我添加 GroupBy 行，则包含的对象为空。我究竟做错了什么？

编辑：做了一些更多的测试。似乎实际上是选择破坏了包含。我猜他们没有通过选择。现在找到一种方法来构建有效的查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T05:17:44.197

我仍然不确定发生了什么，但不知何故，选择或小组打破了我所拥有的。无论如何，我只是按组手动选择并获得最新的，然后将其选择到新列表中。

# haskell - xmonad 自动切换到应用程序

> ID：11250034
> 
> 赞同：10
> 
> 时间：2012-06-28T17:38:18.340
> 
> 标签：haskell, xmonad

我非常喜欢 xmonad，但有一件事会很棒：

如果我打开一个文件`gvim -p --remote-tab-silent my-file`并且它在始终打开的 vim 中打开`workspace 1`，我想自动切换到`workspace 1`.

我刚刚发现了[`viewShift`-trick](http://www.haskell.org/haskellwiki/Xmonad/General_xmonad.hs_config_tips#Shift_an_app_to_a_workspace_and_view_it)，但这只会在`gvim`产生新的工作空间时改变工作空间，因此只能部分解决我的问题。

## 编辑：

感谢丹尼尔瓦格纳的评论，我能够做一些研究：

我找到了一个设置和取消设置紧急提示的小程序：[seturgency](http://www.codemadness.nl/blog/2010/10/31/seturgent-set-urgency-hints-for-x-applications/)。我`xwininifo`可以得到 gvim 的窗口 id。经过反复试验，我`xprop`向我展示了实际上设置了提示标志。

```
GVIMWINID=`xwininfo -tree -root | grep GVIM | cut -d ' ' -f6`
seturgent $GVIMWINID 1
xprop -id $GVIMWINID | grep urgency 
```

现在我添加了

```
import XMonad.Hooks.UrgencyHook
..
 myKeys conf@(XConfig {XMonad.modMask = modm}) = M.fromList $
[..
, ((mod4Mask             , xK_x      ), focusUrgent)
..]
..
main = do¬                                                                       
        xmproc <- spawnPipe "/usr/bin/xmobar"¬                                   
        xmonad $ withUrgencyHook NoUrgencyHook $ defaultConfig {..} 
```

到我的[`.xmonad.hs`](https://gist.github.com/3014423)，并且`xmonad --recompile && xmonad --restart`没有错误但没有击中什么也没`mod4 + x`做，尽管`xprop`确实报告了紧急提示已设置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T12:33:39.540

感谢 Daniel Wagner 和 Joachim Breitner 的评论，我至少可以部分解决问题。

*   如果尚未打开，则自动切换到 gvim，只需添加到 `myManageHooks

    ```
    myManageHook = composeAll [.., className =? "Gvim"--> viewShift "^ vim",..] 
    ```

*   如果 gvim 已经打开，情况就有点棘手了，我制作了一个 shell 脚本来获取 gvim 的窗口 id 并查看是否传递了参数。

    ```
    #! /usr/bin/zsh

    GVIMWINID=`xwininfo -tree -root |grep GVIM | cut -d ' ' -f6`

    if [[ -n $GVIMWINID ]]; then
        #echo gvim is running
        #echo $GVIMWINID
        if [[ -n $@ ]]; then
            #echo there are args
            gvim -p --remote-tab-silent $@
        else
            #echo no args
            gvim --remote-send ":tabnew<cr>"
        fi
    else
        #echo gvim is not yet running
        #echo $GVIMWINID
        gvim -p $@
    fi
    seturgent $GVIMWINID 1 
    ```

现在，如果我生成一个新的 gv，则窗口设置了紧急提示，我可以切换到它。但我想自动切换到窗口 - 所以至少如果我通过键盘生成 gvim 我想自动切换。所以我添加`myKeys`到`xmonad.hs`

```
myKeys conf@(XConfig {XMonad.modMask = modm}) = M.fromList $
[.., ((mod4Mask, xK_F1),
        spawn "gv" >>
        spawn "notify-send -t 500 -i /usr/share/pixmaps/vim-32.xpm gVim" >>
        focusUrgent),..] 
```

该`spawn "notify-send .."`行充当时间缓冲区的地方，因为产卵+设置紧急提示似乎需要一些时间并且`focusUrgent`被调用得太早。

唯一未解决的事情是，如果我从终端调用我的`gv`-script 以切换到 gvim 的工作区。

# apache-flex - Adobe Flex / Flash Builder StageWebView 未缩放到网页宽度。

> ID：11250035
> 
> 赞同：0
> 
> 时间：2012-06-28T17:38:20.710
> 
> 标签：apache-flex, flash-builder

我一直在尝试使用 Adob​​e Flex / Flash 构建器 StageWebView 呈现网页，但它没有缩放网页以适应手机屏幕尺寸，并且基本上切断了网页的右侧。我试过使用

```
<meta name="viewPort" content="width=device-width; initial-scale=1.0;
            maximum-scale=1.0; user-scalable=no;" /> 
```

这没有奏效。下面是我目前正在使用的 Flex 代码。

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<fx:Script>
    <![CDATA[
        import flash.media.StageWebView;
        import flash.net.URLRequest;
        import spark.events.ViewNavigatorEvent;

        protected var webView:StageWebView = new StageWebView();
        protected var openBrowser:Boolean = false; 

        protected function view1_viewActivateHandler(event:ViewNavigatorEvent):void
        {
            if (StageWebView.isSupported)
            {
                currentState = "normal";
                webView.stage = stage;
                webView.viewPort = new Rectangle(0,75,stage.stageWidth,stage.stageHeight);
                webView.addEventListener(LocationChangeEvent.LOCATION_CHANGE,onURLChange);    
                webView.loadURL("http://nealdrake.com/mls.html");    
                addEventListener(ViewNavigatorEvent.REMOVING,onRemove);
            }
            else {
                currentState = "unsupported";
                lblSupport.text = "StageWebView feature not supported";
            }    
        }

        protected function onURLChange(event:LocationChangeEvent):void
        {
            trace("URL change");
            // Uncomment the following line to load in the default browser instead... 
            //navigateToURL(new URLRequest(event.location));
        }

        protected function onRemove(event:ViewNavigatorEvent):void
        {
            this.webView.dispose();
        }
    ]]>
</fx:Script>

<s:states>
    <s:State name="normal"/>
    <s:State name="unsupported"/>
</s:states>

<s:Label id="lblSupport" includeIn="unsupported" width="95%" horizontalCenter="0" verticalCenter="0"/> 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T03:48:34.317

我很惊讶它切断了右侧而不是底部，因为这是我所期望的：

`webView.viewPort = new Rectangle(0,75,stage.stageWidth,stage.stageHeight);`

您需要计算宽度和高度中的任何 X 或 Y 偏移量，如下所示：

`webView.viewPort = new Rectangle(0,75,stage.stageWidth,stage.stageHeight - 75);`

可能是您的 StageWebView 在您的应用程序大小正确之前被初始化。尝试添加一个重新设置视口的调整大小处理程序（在上面的代码取自的任何组件上侦听 Event.RESIZE 事件）。

# javascript - 带有媒体查询默认值的 jQuery CSS 切换

> ID：11250036
> 
> 赞同：-1
> 
> 时间：2012-06-28T17:38:32.083
> 
> 标签：javascript, jquery, css, media

我有一个我正在尝试使用移动版本构建的网站，使用 CSS 媒体查询以在 HTML 中建立这两个：

```
<link id="fullcss" title="desktop version" rel='stylesheet' type='text/css' media="only screen and (min-device-width:481px)" href='desktopstyle.css' />

<link id="mobicss" title="mobile version" rel='alternate stylesheet' type='text/css'  media="only screen and (-webkit-min-device-pixel-ratio: 1.5),
only screen and (-o-min-device-pixel-ratio: 3/2),
only screen and (min--moz-device-pixel-ratio: 1.5),
only screen and (min-device-pixel-ratio: 1.5),
only screen and (max-device-width: 480px)" href='mobistyle.css' /> 
```

移动媒体查询之所以如此之大，是因为我已经对所有高分辨率手机以及典型的 iPhone 进行了射击。

在我的身体里，我有两个链接：

```
<a id="css-full" href="#desktop">Desktop View</a>
<a id="css-mobi" href="#mobile">Mobile View</a> 
```

我想根据当前工作表显示/隐藏（它在 CSS 中）。

我正在尝试使用 jQuery 或 Javascript 为用户提供在移动设备上切换到桌面样式表的选项，反之亦然。目前，它看起来像这样：

```
jQuery(document).ready(function($){
/* CSS switch */
$("#css-full").click(function(){
    $("#fullcss").attr(href, "desktopstyle.css");
    $("#mobicss").attr(href, "desktopstyle.css");
});
$("#css-mobi").click(function(){
    $("#mobicss").attr(href, "mobistyle.css");
    $("#fullcss").attr(href, "mobistyle.css");
});
}); 
```

我对 jQuery 不是很熟悉，所以显然这对我不起作用。解决这个问题的最佳方法是什么？遗憾的是，我不能使用 PHP。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T17:50:10.107

尝试在代码中引用“href”属性

```
$("#fullcss").attr('href', "desktopstyle.css");
$("#mobicss").attr('href', "desktopstyle.css"); 
```

# c# - 尝试创建文件夹时 FtpWebRequest 服务器错误 550

> ID：11250044
> 
> 赞同：0
> 
> 时间：2012-06-28T17:38:59.067
> 
> 标签：c#, ftpwebrequest

我一直在尝试为我的网站完成一个网络爬虫，并在创建用于图像存储的文件夹时遇到了一个绊脚石

我的代码如下所示：

```
//ftpUser and ftpPass are set at the head of the class

FtpWebRequest lrgRequest = (FtpWebRequest) FtpWebRequest.Create("ftp://ftp.mysite.com/httpdocs/images/large/imgFolder");
lrgRequest.Credentials = new NetworkCredential(ftpUser, ftpPass);
lrgRequest.KeepAlive = false;
lrgRequest.Method = WebRequestMethods.Ftp.MakeDirectory;
FtpWebResponse response = (FtpWebResponse) lrgRequest.GetResponse();
Console.WriteLine(response); 
```

当我运行此代码时，它会得到响应并抛出错误 550 说找不到文件夹

我已经将我的方法与一些示例进行了比较，并且通过标准方法它应该可以工作。ftp 地址是有效的并且已经过检查，我想知道我的服务器是否有问题正在停止这个问题，或者是我的 C# 导致了问题如果有人需要更多信息，请说

一如既往，非常感谢任何帮助

问候
巴里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T17:41:43.607

[**FTP 550**](http://en.wikipedia.org/wiki/List_of_FTP_server_return_codes)的定义：

> 未采取请求的操作。文件不可用（例如，文件未找到，无法访问）。

我会检查你是否有适当的权限（或者你的应用程序有）并验证该文件确实存在。

由于您收到响应代码，我怀疑您上面的代码是问题的原因。但是，您始终可以检查[AuthenticationLevel](http://msdn.microsoft.com/en-us/library/system.net.webrequest.authenticationlevel.aspx)和[ImpersonationLevel](http://msdn.microsoft.com/en-us/library/system.net.webrequest.impersonationlevel.aspx)以查看它们是否提供了任何有用的信息。

# canvas - Three.js 画布粒子不使用 OrthographicCamera 渲染

> ID：11250053
> 
> 赞同：2
> 
> 时间：2012-06-28T17:39:38.193
> 
> 标签：canvas, three.js, particles, orthographic

如果我使用 Three.js [canvas_lines 演示](http://mrdoob.github.com/three.js/examples/canvas_lines.html)并将透视相机替换为正交相机：

```
-    camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 1, 10000 );
+    camera = new THREE.OrthographicCamera(-window.innerWidth/2, window.innerWidth/2, -window.innerHeight/2, window.innerHeight/2, -100, 10000); 
```

尽管出现了线条，但它会导致粒子不再渲染。这是 Three.js 中的错误还是我对正交投影的理解？

更改前的粒子图像： ![在此处输入图像描述](../Images/c1a4a5355748ae83735f48e99cebfc33.png)

切换到`OrthographicCamera`: ![在此处输入图像描述](../Images/551fb6179a340d628cd681596249425e.png) (注意粒子丢失和线条在空白处终止)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-16T15:37:01.617

“丢失”的粒​​子只是被剔除，因为它们不在相机的近端和远端 zPlanes 之间。

首先，OrthographicCamera 上的 nearPlane 设置不正确。这有点棘手，但投影矩阵的 z 值必须 > 0。这是因为它们被指定为“相机前面的距离”。所以，首先改变：

```
 camera = new THREE.OrthographicCamera(-window.innerWidth/2, window.innerWidth/2, -window.innerHeight/2, window.innerHeight/2, 1, 10000); 
```

更重要的是，相机的位置应使其不在粒子云的中间。我只是像这样把它移回来：

```
camera.position.z = 1000; 
```

在正交投影中，z 位置实际上只决定了剔除行为。场景看起来还是一样的。这是输出：

![在此处输入图像描述](../Images/ab8fcf3df9f3618cdafe8b9db4ee060f.png)

# iphone - 相互协调之间的距离（以英里/公里为单位）

> ID：11250056
> 
> 赞同：0
> 
> 时间：2012-06-28T17:39:44.637
> 
> 标签：iphone, gps, coordinates

我有两个协调。第一个是`32.910009, 35.423763`，第二个是`32.076829, 34.775333`。我如何获得协调之间的英里/公里距离？

我需要它来搜索我附近的旅馆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T17:44:17.133

```
 CLLocationDistance meters = [aPlaceLocation distanceFromLocation:bPlaceLocation]; 
```

`aPlaceLocation`和`bPlaceLocation`都是`CLLocation`对象_

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T17:44:05.740

这不是那么简单，但这应该让你开始...... [http://www.movable-type.co.uk/scripts/latlong.html](http://www.movable-type.co.uk/scripts/latlong.html)

# android - android（谷歌播放）应用内购买的间歇性错误

> ID：11250059
> 
> 赞同：1
> 
> 时间：2012-06-28T17:40:05.650
> 
> 标签：android, in-app-purchase, google-play, intermittent

一些尝试在我的 Android 游戏中进行应用内购买的人报告说他们永远无法完成购买——他们总是收到错误消息。（即，市场应用程序向我的应用程序报告错误，我向用户显示此错误。）

不幸的是，我没有任何真实的日志数据，因为它只发生在我游戏的某些客户身上，而不是我身上。

奇怪的是，在更新到新版本的应用程序后，对于一些用户来说问题消失了，而对于一些用户来说问题开始了。所以用户 A 可能在应用程序的版本 1 中存在问题，但是当他们更新到版本 2 时它会清除。用户 B 在版本 1 中可能没有问题，但是当他们更新到版本 2 时会出现问题。

我在上面说“间歇性”，但我的意思是它似乎只影响少数用户。但是对于任何给定的用户，一旦他们进入这种状态，他们似乎一直在收到消息。但是，在*某些*情况下，问题确实会突然消失，而无需更新应用程序。我不确定，例如，重启电源，或者说，在另一个应用程序中进行应用程序内购买是否会“突破”这种状态。

我意识到，如果没有特定的错误消息或 API 调用来命名/责备，这个问题很难回答。我只是想了解这种模式——一些用户神秘地陷入无法在给定应用程序中进行任何应用程序内购买的状态——对于 Google Play 应用程序内的任何人来说是否听起来很熟悉-购买。

此外，我在 Marmalade 之上构建了我的应用程序，因此问题可能出在 Marmalade 层，而不是我的应用程序或 Google Play 市场本身。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-05T13:57:09.220

同样的问题：很多用户可以在我的应用程序中购买商品，但有些用户向我发送电子邮件，抱怨他们为什么不能购买，因为他们可以在其他应用程序中成功购买商品。我认为这是因为 Google Play 服务器上的临时问题或与 Android 上的服务有关。我仍在寻找这个奇怪问题的答案......

# ios - 将代码从基于页面的应用程序传输到基于选项卡的应用程序 (iOS) 时应用程序崩溃

> ID：11250060
> 
> 赞同：0
> 
> 时间：2012-06-28T17:40:05.790
> 
> 标签：ios, xcode, crash

我已将所有类别文件和标头包含复制到新的 Xcode 项目中，并将 DataViewControler 中的一段代码粘贴到 Tab 的视图控制器之一（SecondViewController）；都在 viewDidLoad() 部分内。

这是复制和粘贴代码的片段：

第二视图控制器.m

```
#import "SystemStatusReportSecondViewController.h"
#import "memAndProcesses1.h"
#include <stddef.h>
#import "NSObject+BatteryStats.h"
#import "NSObject+DeviceInfo.h"
#import "IPAddress.h"

@interface SystemStatusReportSecondViewController ()

@end

@implementation SystemStatusReportSecondViewController
@synthesize batteryTextView;

- (void)viewDidLoad
{
    [super viewDidLoad];

NSObject *myObject = [[NSObject alloc] init];
[myObject autorelease];
UIDevice *device = [UIDevice currentDevice];

//...

NSString *batteryStatus = [myObject simpleBatteryStatus]; 
```

}

BatteryStats.m

```
#import "NSObject+BatteryStats.h"

 @implementation NSObject (BatteryStats) 

- (float)batteryLevel {
    UIDevice *myDevice = [UIDevice currentDevice];
    [myDevice setBatteryMonitoringEnabled:YES];
    float batteryLevel = [myDevice batteryLevel]; 

    return batteryLevel;
}

- (NSString*)simpleBatteryStatus {

    NSArray *batteryStatus = [NSArray arrayWithObjects: 
                              @"Battery status is unknown.", 
                              @"Battery is in use (discharging).", 
                              @"Battery is charging.", 
                              @"Battery is fully charged.", nil];
    int batteryState = [[UIDevice currentDevice] batteryState];
    NSString *batteryChargeStr = [batteryStatus objectAtIndex:batteryState];

    return batteryChargeStr;
} 
```

@结尾

每当我尝试使用 myObject 调用类别函数时，应用程序就会在包含该代码的页面上崩溃（在这种情况下，当我切换到包含电池信息的选项卡时）。

否则没有警告或错误，它只是崩溃。

下面是日志。有没有人经历过这样的事情？可能我在影响这些东西的过程的早期更新了原始设置中的一些设置，然后我就忘记了它。

```
2012-06-28 13:31:53.965 SystemStatusReport[8269:f803] -[NSObject simpleBatteryStatus]: unrecognized selector sent to instance 0x6840440
2012-06-28 13:31:54.025 SystemStatusReport[8269:f803] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[NSObject simpleBatteryStatus]: unrecognized selector sent to instance 0x6840440'
*** First throw call stack:
(0x13c8022 0x1559cd6 0x13c9cbd 0x132eed0 0x132ecb2 0x301b 0xd9a1e 0xf50a9 0xf4edd 0xf34aa 0xf334f 0xf4e14 0x13c9e99 0x1514e 0x150e6 0x23d4bd 0x13c9e99 0x1514e 0x150e6 0xbbade 0xbbfa7 0xbbb13 0x23fc48 0x13c9e99 0x1514e 0x150e6 0xbbade 0xbbfa7 0xbb266 0x3a3c0 0x3a5e6 0x20dc4 0x14634 0x12b2ef5 0x139c195 0x1300ff2 0x12ff8da 0x12fed84 0x12fec9b 0x12b17d8 0x12b188a 0x12626 0x2a12 0x2985 0x1)
terminate called throwing an exception(lldb) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T17:58:28.280

有2种可能：

1.  你没有`#include BatteryStats.h`在你的`SecondViewController.m`, 或
2.  您`-simpleBatteryStatus`的类别中没有方法，您发布的代码中只有一种方法，即`-batteryLevel`

* * *

提示：如果您希望自动加载类别，请将**`-ObjC`**标志添加到您的目标                             *（在 Target > Build Settings > Other Linker Flags 中）*。

> -ObjC 加载实现 Objective-C 类或类别的静态归档库的所有成员。

# regex - WWW::Perl 中的正则表达式

> ID：11250062
> 
> 赞同：0
> 
> 时间：2012-06-28T17:40:21.173
> 
> 标签：regex, www-mechanize

我不确定 WWW::Mechanize 中使用的 url_regex 的正确语法是什么。

我正在收集以 http:// 开头的网页中的所有链接，它们的格式如下：

```
http://google.com 
```

并不是，

```
http://google.com/dir/
http://google.com/dir/dir2/ 
```

所以，我使用以下内容：

```
@links=$mech->find_all_links(url_regex=>qr/^http:\/\/.*?\//) 
```

这仍然会捕获其中包含子路径的 URL。

我在 regexpal.com 上测试了我的正则表达式，效果很好。但由于某种原因， url_regex 需要不同的语法。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T17:41:57.050

*你应该使用：*

```
@links=$mech->find_all_links(url_regex=>qr/^http:\/\/[^\/]*\/?$/) 
```

*内容如下：*

字符串必须以除斜杠以外的任意字符组合（甚至没有/空）`^`开头，最后是可选的斜杠。`http://``[^\/]*``\/?``$`

# wsdl - TIBCO 设计器中的正则表达式错误？

> ID：11250064
> 
> 赞同：1
> 
> 时间：2012-06-28T17:40:35.813
> 
> 标签：wsdl, tibco

我正在尝试在 TIBCO Desginer 中使用 WSDL 文件，但它为 WSDL 中为日期属性定义的正则表达式模式抛出错误

# WSDL 文件

```
> <xsd:element maxOccurs="1" minOccurs="0" name="contractStartDate_line"

    > nillable="true">
    >       <xsd:simpleType>
    >           <xsd:restriction base="xsd:string">
    >               <xsd:pattern value="([0-9][0-9][0-9][0-9])-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])
    > ([0-1]?[0-9]|2[0-3]):([0-5]?[0-9]):([0-5]?[0-9])|"/>
    >           </xsd:restriction>
    >       </xsd:simpleType>

>     </xsd:element> 
```

# TIBCO 中的错误

```
#dt-regex Pattern "([0-9][0-9][0-9][0-9])-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01]) ([0-1]?[0-9]|2[0-3]):([0-5]?[0-9]):([0-5]?[0-9])|"/>" is an invalid regular expression: invalid atom: empty 
```

有什么想法吗？

尼泰什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T12:10:06.493

我不确定这是错误还是故意的，但 Designer 不会接受带有交替 (|) 的空字符串。Designer 接受以下正则表达式，并且可能适合您的要求：

^([0-9][0-9][0-9][0-9])-(0[1-9]|1[0-2])-(0[1-9]|[12 ][0-9]|3[01])([0-1]?[0-9]|2[0-3]):([0-5]?[0-9]):([0 -5]?[0-9])$|^$

另一方面，当您可以省略整个元素（minOccurs="0"）时，是否希望允许一个空值？空元素和省略元素之间有什么功能区别吗？

# xslt - xslt如何生成无类型原子序列？

> ID：11250069
> 
> 赞同：0
> 
> 时间：2012-06-28T17:40:57.663
> 
> 标签：xslt

我在模板中有一个这样的循环：

```
 <xsl:variable name="seq">
        <xsl:sequence select="1"/>
        <xsl:sequence select="2"/>
        <xsl:sequence select="3"/>
        <xsl:sequence select="4"/>
        <xsl:sequence select="5"/>
    </xsl:variable>

    <xsl:for-each select="$seq">
        <xsl:text>(</xsl:text>
        <xsl:value-of select="."/>
        <xsl:text>)</xsl:text>
    </xsl:for-each> 
```

我想在 $seq 的每个元素上迭代一次，产生： (1) (2) (3) (4) (5)

相反，此代码产生 (1 2 3 4 5)

如何创建正确的序列？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T20:22:18.393

包含指令且没有 as 属性的变量，如下所示：

```
<xsl:variable name="seq">
    <xsl:sequence select="1"/>
    <xsl:sequence select="2"/>
    <xsl:sequence select="3"/>
    <xsl:sequence select="4"/>
    <xsl:sequence select="5"/>
</xsl:variable> 
```

表示一个文档节点，在本例中是一个包含单个文本节点的文档节点，其字符串内容为“1 2 3 4 5”。如果你想要一个由五个整数组成的序列，要么使用 select 属性，要么写

```
<xsl:variable name="seq" as="xs:integer*">
    <xsl:sequence select="1"/>
    <xsl:sequence select="2"/>
    <xsl:sequence select="3"/>
    <xsl:sequence select="4"/>
    <xsl:sequence select="5"/>
</xsl:variable> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T18:00:40.467

出色地

```
<xsl:variable name="seq" select="1,2,3,4,5"/>

<xsl:value-of select="for $i in $seq return concat('(', $i, ')')" separator=" "/> 
```

应该做。或者你想达到什么目的？对于你的做法

```
<xsl:variable name="seq" as="item()*">
        <xsl:sequence select="1"/>
        <xsl:sequence select="2"/>
        <xsl:sequence select="3"/>
        <xsl:sequence select="4"/>
        <xsl:sequence select="5"/>
    </xsl:variable> 
```

可能会改善事情，但如果你想要的只是一个序列，看起来相当复杂。

# java - Amazon DynamoDB NoSuchMethodError 异常

> ID：11250070
> 
> 赞同：0
> 
> 时间：2012-06-28T17:40:58.090
> 
> 标签：java, amazon-web-services, amazon-dynamodb, credentials

尝试向 Amazon DynamoDB 插入一些条目时，我在以下代码行中收到错误：

```
AWSCredentials credentials = new PropertiesCredentials(SimpleDBLoadData.class
    .getResourceAsStream("AwsCredentials.properties"));

dynamoDB = new AmazonDynamoDBClient(credentials); 
```

这是`Exception`：

```
Exception in thread "main" java.lang.NoSuchMethodError: com.amazonaws.auth.QueryStringSigner: method <init>()V not found 
```

有任何想法吗？谢谢，丹尼尔

# ember.js - 使用 isVisible ember 逻辑或在 CSS 级别移动此逻辑

> ID：11250072
> 
> 赞同：2
> 
> 时间：2012-06-28T17:40:59.240
> 
> 标签：ember.js

有人能指出哪些特定用例正在使用 becomeVisible 和 becomeHidden 事件吗？

我有一个案例，我想根据特定状态隐藏/显示视图，并且想知道我是否应该通过 classNames 在 CSS 级别移动此逻辑或使用 isVisible Ember Logic。

下面的示例试图显示当前场景。

```
Em.ContainerView.extend({

  childViews: ['image','spinner'],
  isLoading: true,

  image: Em.View.extend({
    classNames: ['product_image'],
    classNameBindings: ['isLoading'],
    isLoadingBinding: Em.Binding.oneWay('parentView.isLoading')

  }),

  spinner: Em.View.extend({
    classNames: ['spinner'],
    classNameBindings: ['isLoading'],
    isLoadingBinding: Em.Binding.oneWay('parentView.isLoading')
  })

}) 
```

CSS 会是这样的：

```
 > .product_image {
      display:block;
    }

    > .product_image.is-loading {
      display:none;
    }

    > .spinner {
      display:none;
    }

    > .spinner.is-loading {
      display:block;
    } 
```

任何关于这两种情况的优点/缺点的建议/评论都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T19:20:22.737

我会在视图模板中这样做：

```
{{#unless content.isLoaded }}
  <div class='product_image is-loading'>....</div>
{{/unless }}
{{#if content.isLoaded }}
  <div class='product_image'>...</div>
{{/if }} 
```

# magento - 在单个网站上设置多个 Magento 设计

> ID：11250074
> 
> 赞同：1
> 
> 时间：2012-06-28T17:41:02.310
> 
> 标签：magento

我正在建立一个 Magento 站点，并且有一些我们无法完全正确的设计要求。设置网站、商店、商店视图以及满足以下需求的类别的最佳方式是什么？

**概述：**

1.  一个域名，一组客户
2.  3 条相似的产品线，吸引不同的行业

**具体要求：**

1.  主页应显示有关公司的静态内容以及所有三个主要产品类别的特色产品

2.  每个主要类别的产品都应该有一个独特的视觉设计，在查看这些类别中的任何产品时都会体现出来

3.  客户应该无缝地从一种产品转移到另一种产品并进行设计更改，而无需从下拉列表等中选择商店。

> 主页：设计 A，任何和所有产品都可以展示。
> 
> > 类别 1：设计 1，仅来自 cat 1 的产品展示
> > 
> > 类别 2：设计 2，仅来自 cat 2 的产品展示
> > 
> > 类别 3：设计 3，仅来自 cat 3 的产品展示

我们尝试过的网站和商店以及商店视图的每种组合都会导致奇怪的行为，例如更改商店并获得“没有配置或找到主页 CMS 页面”。而不是看到它应该展示的独特设计和类别。到目前为止，我们只能通过制作新的 CMS 页面来使设计有所不同，这似乎并不实用。

这似乎是 Magento 要做的事情，我必须遗漏一些东西。

感谢您的任何帮助。

-谢恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T13:34:31.600

您的设计需求意味着来自多个配置领域的工作和考虑。我会依次解决它们。**tl;博士**是可能有不止一种方法可以完成您想要的，您可以根据需要使用多种选项。

**1）一个域名，一组客户**

域名 (URL) 可针对所有配置范围进行配置：**全局**（又名“默认”）、**网站**和**商店**（又名“商店视图”）。最终，Magento 配置归结为最精细/具体的范围，即商店（“商店视图”）范围。如果未在商店范围内指定配置值，则其值是从网站或全局范围派生（继承）的。

客户被配置为“属于”所有网站或单个网站 ( `System > Configuration > Customer Configuration: Account Sharing Options`)。没有开箱即用的功能将客户限制到特定商店。

**2) 3 条相似的产品线，吸引不同的行业**

取决于下面讨论的事情。

* * *

**1) 主页应显示公司的静态内容和所有三个主要产品类别的特色产品**

假设您使用的是让 Mage_Cms 模块提供主页 ( `System > Web > Default Pages`) 的标准配置，则该 CMS 页面应该对所有商店视图都是可见的。CMS 块和页面基于商店受到限制。现在，稍后在您的帖子中您提到您在主页中看到不同的行为“*而不是看到它应该显示的独特设计和类别*”，这表明您希望每个商店的主页具有不同但相似的内容. 您*可以*使用一个主页来执行此操作，但不是在内容区域中指定内容，而是需要通过在 Layout XML Update 中指定一个块来包含您的内容 - 此块将加载基于商店的特定类别。

**2) 每个主要类别的产品都应具有独特的视觉设计，在查看这些类别中的任何产品时都应体现出来**

可以在网站范围和商店范围内从全局范围建立主题变体。还可以为每个 CMS 页面、产品和类别指定主题变体 [每个实体在其管理面板中都有一个选项卡以实现此更改]，后者可以选择将其自定义主题设置“瀑布”到“子”类别和产品。您采用哪种方法取决于您的目录层次结构以及主题中存在的变体。

需要注意的是，如果您需要呈现不同的类别结构，或者如果您需要根据上下文不同地启用/禁用产品，那么您将处理多个*网站*。这是因为类别结构依赖于根类别，只有网站与根类别相关联。提醒一下，Magento 中的“网站”与不同的 URL 没有隐式连接，这只是范围级别的不幸命名约定。

**3) 客户应该无缝地从一种产品转移到另一种产品并进行设计更改，而无需从下拉列表等中选择商店。**

基于这个最终规定的要求，并假设您依赖于 Magento 的原生导航，您被锁定在一个类别结构中，并且将使用瀑布类别设计的方法，您将为您下的每个顶级主类别设置使用“自定义设计”选项卡的单根：

![类别设计变更的管理面板屏幕截图](../Images/44f790d08cde4697d6e2cbe5e7f0f889.png)

另一种方法是创建三个具有不同根类别的不同网站，然后手动构建一个链接到三个商店中的每一个的菜单，但我认为根据您声明的需求，这不太理想。您还可以使用一个根类别，然后按网站隐藏类别。同样，这不太可能适合您。

根据上述信息，您最终可能会澄清或添加您的问题。如有必要，我会更新我的答案。

# javascript - 带有 Knockout.js 的 MVVM

> ID：11250075
> 
> 赞同：5
> 
> 时间：2012-06-28T17:41:08.037
> 
> 标签：javascript, mvvm, knockout.js

我正在尝试实现基于 MVVM 的单页应用程序，目前正在使用框架 Knockout.js 来处理 MVVM 的视图模型/视图部分。不过我很困惑，因为我为实现 Knockout 而查看的每个示例都涉及将整个视图模型保存到数据库中。这些示例是否缺少“模型”步骤，其中视图模型与数据层模型同步，模型进行验证/服务器同步。

我想在单个页面上有多个不同的模板/视图，每个都有不同的视图模型。我发现 knockout.js 缺少的另一件事是在不同视图之间同步单个模型（不是视图模型）。我认为让每个视图共享一个巨大的视图模型是没有意义的，所以我认为每个视图都有自己的视图模型，但每个视图模型将与几个应用程序范围模型所需的字段同步每个视图。

我正在处理的页面获取一个巨大的模型（30 多个字段，多层父/子关系），我认为让我的所有视图模型与这个模型同步是有意义的。我研究了 Knockback.js（它结合了 knockout.js 和骨干网），但是我最终重写了大多数函数，例如 fetch、set、save，因为页面正在从 API 获取数据（我可以'不只是与服务器来回同步整个模型）所以我决定反对它。

*我的应用程序的视觉示例：*

（模型层） M | 米

（视图模型/视图层）VM-V | 虚拟机-V | 虚拟机-V | 虚拟机-V

*另一个例子*

一个示例模型是 User = {firstName: "first", lastName: "last", ... }

一个视图模型只需要名字，另一个视图模型只需要姓氏
ViewModelA={firstName: app.User.firstName()}
ViewModelB={firstName: app.User.lastName()}

这样做是为模型和视图模型更改定义发布/订阅系统的唯一方法吗？这甚至是好的/可维护的架构吗？我在这里错过了一个基本概念吗？欢迎所有建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T20:10:12.360

如果我没看错的话，这里有很多问题都集中在如何使用 Knockout 构建 MVVM / SPA。正如您所指出的，有一些事情需要解决。一是如何在视图模型/视图对之间进行通信。

**主视图模型** 一种方法是让主视图模型作为@Tyrsius 的答案。你的 shell 可以有一个绑定更多可用数据的视图模型。主视图模型也可以编排子视图模型。如果你走这条路，那么你必须小心将外壳绑定到主视图模型，将内部绑定到 DOM 中的特定 HTML 元素。如果需要，主视图模型可以促进它们之间的通信。

**解耦视图/视图模型对** 另一种选择是使用视图模型/视图对而不使用主视图模型。每个视图都被加载到 DOM 的一个区域中并自行绑定。它们作为独立的单元，彼此分离。您可以使用 pub/sub 在两者之间进行对话，但如果您只需要一种通过 observables 同步数据的方法，Knockout 提供了许多选项。我喜欢的一个是让每个 viewmodel 表面模型对象。因此，视图有一个视图模型，它显示特定于视图的数据（来自模型）。如此多的视图模型可能以不同的方式显示相同的模型。因此，当视图更新视图模型属性（即在模型中）时，它会波及任何其他加载的也使用相同模型的视图模型。

**DataContext** 更进一步，您可以创建一个数据上下文模块来管理模型中的数据。您向 datacontext 询问模型（例如：客户列表），datacontext 检查是否已经将它们 cahced，如果没有，它会从 ajax 调用中获取它们。无论哪种方式都是从视图模型和模型中抽象出来的。datacontext 获取数据并将模型返回给视图模型。这样您就可以非常解耦，但您可以通过数据上下文共享数据（您的模型）。

我可以继续……但请告诉我这是否回答了你的问题。如果没有，很乐意回答任何其他细节。

** 免责声明：我正在建立一个关于 SPA 的 Pluralsight 课程（使用 Knockout 和这个策略）:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T18:50:36.967

这是一个现在很受欢迎的领域，所以我希望你会得到一些更好的答案，但这里就是这样。

**该模型**

是的，您绝对应该拥有数据的服务器端表示，这就是您的模型。这取决于您的服务器和数据库。对于 MVC3，这是您的实体模型。对于 Django 或 Ruby，您将定义数据库模型作为数据库设置的一部分。这部分取决于您的具体技术。但是再次，**是**的，您应该有一个模型，并且服务器*绝对*应该执行数据验证。

**应用程序（视图模型）**

建议您的每个视图都有自己的视图模型。然后你的页面也可以有一个视图模型，如果你愿意的话，一个应用程序视图模型，它可以跟踪所有这些。如果你走这条路，应用程序视图模型应该负责在视图之间切换，并实现任何其他应用程序级别的逻辑（如哈希导航，另一种流行的单页工具）。这种层次结构非常重要，但并不总是那么简单。这将取决于您的应用程序的具体要求。您不仅限于一个平面视图模型。这不是唯一可能的方法。

特设示例：

```
​var ThingViewModel = function(name, data){
    this.name = ko.observable(name);
    //Additional viewmodel stuffs
};

var AppViewModel = function(initialData){
    //Process initial data    
    this.thing = new ThingViewModel(someName, someData); 

}; 
```

我现在正在做一个类似的项目，纯粹是为了学习（不是真实世界的应用程序），它托管[在 GitHub 上](https://github.com/tyrsius/Recall/tree/dev)，如果你想看看一些真实的例子。请注意，该`dev`分支目前领先于该`master`分支。我确信它包含一些不好的模式（请随时指出它们，我也在学习），但无论如何你也许可以从中学到一些东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T04:46:17.520

我有一个同样复杂的解决方案，我正在将 WPF 应用程序改造成 Web 版本。WPF 版本处理复杂的域对象，它通过演示者模型绑定到视图。

在 web 版本中，我实现了简化且有些扁平化的服务器端视图模型，这些模型使用 Automapper 在域对象之间来回转换。然后，这些服务器端视图模型作为 JSON 来回发送到客户端，并使用映射插件映射到/映射到相应的 Knockout 视图模型（每个负责创建具有子映射选项的子代的可实例化函数）。

当我需要保存/验证我的 UI 时，我将全部或部分 Knockout 视图模型映射回纯 Javascript 对象，将其发布为 JSON，MVC 框架将其绑定回服务器端视图模型，这些会自动映射回域对象，由我们的域层验证并可能更新，然后返回并重新映射修改后的完整或部分图。

目前我只有一个主页，其中发生 Knockout 操作，但我预计像你一样，我最终会得到多个上下文，这些上下文需要处理相同的模型（我的域对象），根据我的不同视图模型拉取为不同的视图模型正在和他们一起做。

对此，我已经构建了服务器端视图模型目录等，以及我的 Knockout 视图模型的结构。到目前为止，这种方法运行良好。希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-13T14:40:48.063

在一个项目期间，我开发了一个框架（它使用 KnockoutJS），它提供解耦的 View/ViewModel 对并允许在视图中实例化子视图。视图和子视图实例化的整个处理由框架提供。它的工作方式类似于 MVVM 和 WPF 中的 XAML。

看看[http://visto.codeplex.com](http://visto.codeplex.com)

# c# - 添加到列表后修改项目不会更新列表

> ID：11250081
> 
> 赞同：3
> 
> 时间：2012-06-28T17:41:32.730
> 
> 标签：c#

我有一个成员变量，它是引用类型的列表。在我创建和项目的方法中，将其添加到列表中。然后将该项目更新为指向另一个实例，但列表中的实例没有更新（他在某些单元测试代码中）。示例看起来像

```
Item localItem = new Item(arg1, arg2);
this.itemList.Add(localItem);

// Do some testing and assertions

localItem = new Item(arg3, arg4);  // This does not update the instance of
                                   // localItem in this.ItemList

// Do some more testing and assertions 
```

我可以更新我的测试来解决这个问题，但它仍然让我感到惊讶。我假设 List 想要保留通过该`Add`方法传递的原始实例，并且不在乎用于传递它的局部变量现在是否指向其他东西。任何人都可以确认这种理解或更清楚地解释它吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T17:44:34.087

当然不是。这`localItem`是对实际对象（而不是对象本身）的引用。该列表还包含对同一对象的引用。如果您将另一个项目分配给`localItem`它现在指向另一个对象，但该列表仍然具有对旧对象的引用。

如果您希望列表中的对象自动更新，您必须引入一个包含对该项目的引用的新对象并将其添加到列表中

```
public class ItemReference
{
    public Item Item { get; set; }
} 
```

现在您可以像这样创建本地项目

```
ItemReference itemRef = new ItemReference();
itemRef.Item = new Item(arg1, arg2);

this.itemReferenceList.Add(itemRef);
itemRef.Item = new Item(arg3, arg4); 
```

因为列表现在具有对相同（未更改）的引用，所以`itemRef`它也“看到”了新项目。

该列表必须声明为

```
List<ItemReference> itemReferenceList; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T17:43:55.103

当您添加`localItem`到列表时，您添加对对象实例的*引用*（假设`Item`是引用类型又名 a `class`） - 当您随后创建新`Item`实例时，结果是*新引用*（类似于指针） - 如果您想更新列出您必须删除旧项目并添加新项目 - 这是两个完全不同的实例。或者，您可以修改任何属性`localItem`，这些将在您通过列表访问项目时反映出来。

# android - Bash 找不到 adb，即使它确实存在

> ID：11250085
> 
> 赞同：9
> 
> 时间：2012-06-28T17:41:57.587
> 
> 标签：android, linux, adb

我正在运行 ArchLinux，内核 3.4.4，bash 版本 4.2.29。我从这里下载了 android sdk：http: [//developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html)

解压后，我做了、`~/android-sdk-linux/tools/android`安装并安装了 SDK 平台工具包。

从那里我尝试了以下方法：

```
> ls -l ~/android-sdk-linux/platform-tools/adb 
-rwxr-xr-x 1 mediocregopher mediocregopher 204436 Jun 28 13:20 /home/mediocregopher/android-sdk-linux/platform-tools/adb

> file ~/android-sdk-linux/platform-tools/adb 
/home/mediocregopher/android-sdk-linux/platform-tools/adb: ELF 32-bit LSB executable, Intel 80386, version 1 (SYSV), dynamically linked (uses shared libs), for GNU/Linux 2.6.8, stripped

> ~/android-sdk-linux/platform-tools/adb 
bash: /home/mediocregopher/android-sdk-linux/platform-tools/adb: No such file or directory 
```

显然该文件在那里并且至少是可执行文件，为什么 bash 似乎找不到它？我已经尝试将 platform-tools 文件夹以及 sudo 和 su-ing 添加到我的路径中，但是无论看起来如何，都找不到该文件。有谁知道会发生什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-28T17:47:34.793

您在 64 位系统上运行，并且没有安装 32 位兼容性库。

该错误实际上来自它找不到 32bit 的事实`ld.so`。

如果您使用的是 ubuntu/debian，我认为您只需要`sudo apt-get install ia32-libs`并且它应该可以工作。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-05-09T21:08:10.960

对于 Ubuntu 的“现代”版本（13.10 及更高版本），已接受的答案不再起作用：他们删除了“32 位兼容性库”，而您需要使用彼此愉快共存的多架构软件包。请参阅[ia32-libs 包发生了什么？](https://askubuntu.com/questions/107230/what-happened-to-the-ia32-libs-package)在 AskUbuntu 上。

相反，您需要安装 32 位版本`libc`：

```
sudo apt-get install libc6:i386 
```

接下来，我遇到了 32 位版本`libstdc++`也需要`adb`：

```
sudo apt-get install libstdc++6:i386 
```

现在`adb`应该（再次）工作。

[64 位 linux 机器上的 Android SDK](https://stackoverflow.com/questions/2710499/android-sdk-on-a-64-bit-linux-machine)显示还需要一些其他库。我似乎也不需要它们，但可能已经安装了它们。

# jquery - Javascript错误被标签推到右侧

> ID：11250094
> 
> 赞同：0
> 
> 时间：2012-06-28T17:42:44.280
> 
> 标签：jquery, asp.net, css

在我正在处理的网站中，如果您在文本字段中输入了不正确的输入，则会出现一个 javascript 弹出窗口 (jquery)。但是，如果该文本字段的左侧有一个标签，它将被推到右侧。

有没有人知道这可能发生在哪里，或者原因是什么？

![正在发生的事情的图片](../Images/75700829e77cf85114d35c1cb8331b6c.png)

[http://i.imgur.com/6m7vW.png](https://i.imgur.com/6m7vW.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T17:50:57.237

这大概就是正在发生的事情……![在此处输入图像描述](../Images/2ca8eb4c8b4fa11462b1882c33c22fa2.png)

因此，随着标签向下延伸，左边距将图像推出。您可以尝试将其向右浮动，然后有一个右边距将其推过。如果没有看到其余部分，很难提出一个好的建议。

# javascript - 使用 Javascript 设置供应商特定的 Css

> ID：11250096
> 
> 赞同：0
> 
> 时间：2012-06-28T17:42:45.600
> 
> 标签：javascript, css

我想使用 javascript 将转换规则应用于元素，到目前为止这适用于 webkit：

```
this.self.style.webkitTransform = 'translate3D('+(d+this.position)+'px,0px,0)' 
```

其他供应商特定的属性名称是什么？'webkitTransform' 对于 Mozilla 特定的、Opera 等。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T17:46:33.310

Firefox 使用区分大小写`MozTransform`，Opera 是`OTransform`，而 IE9 使用`msTransform`. 我认为其他 IE 浏览器不会使用它，但它们可能会被一般的`transform`.

另请参阅[此页面](http://www.zachstronaut.com/posts/2009/02/17/animate-css-transforms-firefox-webkit.html)。

# ffmpeg - OSX错误上的Ffmpeg和png水印

> ID：11250097
> 
> 赞同：2
> 
> 时间：2012-06-28T17:42:50.503
> 
> 标签：ffmpeg, png, codec

我正在尝试使用 ffmpeg 在 OSX 上添加具有透明背景的水印。

我正在使用这个命令：

```
ffmpeg -i test.mpg -vf "movie=stuff.png, scale=100:100 [watermark]; [in][watermark] overlay=main_w-overlay_w:main_h-overlay_h-10 [out]"  out.mpg 
```

我得到了这个：

```
ffmpeg version 0.11.1 Copyright (c) 2000-2012 the FFmpeg developers
  built on Jun 12 2012 21:37:10 with clang 3.1 (tags/Apple/clang-318.0.54)
  configuration: --prefix=/usr/local/Cellar/ffmpeg/0.11.1 --enable-shared --enable-gpl --enable-version3 --enable-nonfree --enable-hardcoded-tables --enable-libfreetype --cc=/usr/bin/clang --enable-libx264 --enable-libfaac --enable-libmp3lame --enable-librtmp --enable-libtheora --enable-libvorbis --enable-libvpx --enable-libxvid --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libass --enable-libvo-aacenc --disable-ffplay
  libavutil      51\. 54.100 / 51\. 54.100
  libavcodec     54\. 23.100 / 54\. 23.100
  libavformat    54\.  6.100 / 54\.  6.100
  libavdevice    54\.  0.100 / 54\.  0.100
  libavfilter     2\. 77.100 /  2\. 77.100
  libswscale      2\.  1.100 /  2\.  1.100
  libswresample   0\. 15.100 /  0\. 15.100
  libpostproc    52\.  0.100 / 52\.  0.100
Input #0, mpeg, from 'test.mpg':
  Duration: 00:00:01.04, start: 1.000000, bitrate: 9106 kb/s
    Stream #0:0[0x1e0]: Video: mpeg1video, yuv420p, 640x480 [SAR 1:1 DAR 4:3], 104857 kb/s, 24 fps, 24 tbr, 90k tbn, 24 tbc
    Stream #0:1[0x1c0]: Audio: mp2, 44100 Hz, stereo, s16, 128 kb/s
File 'out.mpg' already exists. Overwrite ? [y/N] y
w:640 h:480 pixfmt:yuv420p tb:1/90000 sar:1/1 sws_param:flags=2
[buffersink @ 0x7ff50bc1c3e0] No opaque field provided
[png @ 0x7ff50c038400] unsupported bit depth 16 and color type 4
[image2 @ 0x7ff50c044800] decoding for stream 0 failed
[image2 @ 0x7ff50c044800] Could not find codec parameters (Video: png, 640x480)
[movie @ 0x7ff50bc17200] Failed to find stream info
[movie @ 0x7ff50bc17200] seek_point:0 format_name:(null) file_name:stuff.png stream_index:0
[scale @ 0x7ff50bc178c0] auto-inserting filter 'auto-inserted scaler 0' between the filter 'Parsed_movie_0' and the filter 'Parsed_scale_1'
Impossible to convert between the formats supported by the filter 'Parsed_movie_0' and the filter 'auto-inserted scaler 0'
Error opening filters! 
```

我以为我缺少 png 支持，我检查了 libpng 安装的自制软件，但结果表明 Apple 已经在 OSX 中包含了 png 支持。

我也做过

```
ffmpeg -codecs list | grep -i png 
```

我在 ffmpeg 中确实有 PNG 支持：

```
DEV D  png             PNG (Portable Network Graphics) image 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T17:51:46.337

你的文件是带 alpha 的 16 位灰度吗？看起来`ffmpeg`不支持这种组合。尝试将其转换为 8 位和/或 RGBA。

# mongodb - 如何在 MongoDB 中结合正则表达式和 DISTINCT？

> ID：11250099
> 
> 赞同：0
> 
> 时间：2012-06-28T17:42:59.550
> 
> 标签：mongodb, distinct

我有 2+ 百万个项目的列表。

它包含一个我想查询并获得计数的列表。

db.serverset1.plugins.HTTPServer.string 包含服务器名称列表。

我将如何在 MongoDB 中使用 distinct 函数（连同正则表达式）来计算所有 /Apache*/i 服务器的数量？

我对 MongoDB 很陌生，所以请原谅我的无知。

* * *

因此，我可以轻松检索不同的 plugins.HTTPServer.strings 列表，我将如何获得每次出现的计数，即

Apache/2.2.1 => 15 IIS => 372

不同项目的数量有数千个，但我如何计算每个不同项目在列表中出现的次数？

# java - Java SocketChannel 读取未知长度的消息

> ID：11250104
> 
> 赞同：0
> 
> 时间：2012-06-28T17:43:03.370
> 
> 标签：java, messages, socketchannel

```
 SocketChannel channel = (SocketChannel) key.channel();

    ByteBuffer buffer = ByteBuffer.allocate(1024);
    int numRead = -1;
    try {
        numRead = channel.read(buffer);
        System.out.println("numRead: " + numRead);
    }
    catch (IOException e) { e.printStackTrace();}
    if (numRead == -1) {
        this.dataMap.remove(channel);
        Socket socket = channel.socket();
        SocketAddress remoteAddr = socket.getRemoteSocketAddress();
        System.out.println("Connection closed by client: " + remoteAddr);
        channel.close();
        key.cancel();
        return;
    }
    System.out.println("Got: " + new String(buffer.array(), "windows-1251")); 
```

从套接字读取 1024 字节的数据。在这种情况下，所有消息都被合并，最后一条消息没有完全到达。如何在消息分隔符“|”之前将数据读入缓冲区 ? 我想单独接收每条消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T22:07:16.950

TCP 中没有消息之类的东西。它是一个字节流 API。如果你想要消息，你必须自己实现它们，通过分隔符、STX/ETX 对、长度词前缀、自描述协议等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T17:47:21.767

取决于协议，但如果协议基于消息分隔符，您唯一的选择是在不阻塞的情况下尽可能多地阅读，然后扫描您阅读的内容以找到分隔符。您需要循环执行此操作，直到连接关闭（或直到您的一方决定关闭连接）。

当然，您可以一次阅读多条消息，甚至是部分消息，因此您必须确保充分处理这些情况。

# wpf - WPF 控件模板高度

> ID：11250107
> 
> 赞同：2
> 
> 时间：2012-06-28T17:43:18.823
> 
> 标签：wpf, errortemplate

我有以下样式来验证我的控件中的输入：

```
<Style x:Key="MyErrorTemplate" TargetType="Control">
    <Style.Setters>
        <Setter Property="Validation.ErrorTemplate">
            <Setter.Value>
                <ControlTemplate x:Name="ControlErrorTemplate">
                    <StackPanel Orientation="Vertical" Height="Auto">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Foreground="Red" FontSize="20">!</TextBlock>
                            <AdornedElementPlaceholder x:Name="Holder"/>
                        </StackPanel>
                        <Label Foreground="Red" Content="{Binding ElementName=Holder, 
                            Path=AdornedElement.(Validation.Errors)[0].ErrorContent}"/>
                    </StackPanel>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style.Setters>
</Style> 
```

如果发生错误，标签中的错误消息会出现在控件下方（例如文本框）并与下方控件重叠。我制作了 StackPanel 的 Height="Auto"，但没有帮助。每个控件都在一个 Grid 单元格中，并且 Grid 的行高也是 Auto。你能告诉我我错过了什么吗？我希望错误消息将下面的内容向下推。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T19:12:58.167

[Validation.ErrorTemplate](http://msdn.microsoft.com/en-us/library/system.windows.controls.validation.errortemplate.aspx)在装饰层上显示错误反馈。这意味着当布局系统在装饰元素层上测量和排列控件时，不会考虑此模板中的所有控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T07:04:04.673

我找到了这个并感谢 LPL，我不知道装饰层。

我的解决方案是保证金“黑客”。我刚刚使用了触发器：

```
 <Style.Triggers>
        <Trigger Property="Validation.HasError" Value="true">
            <Setter Property="ToolTip" Value="{Binding RelativeSource={x:Static RelativeSource.Self}, Path=(Validation.Errors).CurrentItem.ErrorContent}"/>
            <Setter Property="BorderBrush" Value="Red"/>
            <Setter Property="Margin" Value="0,0,0,28"/>
        </Trigger>
    </Style.Triggers> 
```

增加装饰文本框的下边距。我将边距设置得足够大，以便为单个字符串文本块/标签腾出空间，然后将下面的内容向下移动

# c# - REST WCF 服务在 ASP.Net 站点中使用 AJAX 调用时锁定线程

> ID：11250109
> 
> 赞同：5
> 
> 时间：2012-06-28T17:43:24.793
> 
> 标签：c#, asp.net, ajax, multithreading, wcf

我有一个 WCF REST 服务在一个 ASP.Net 站点中使用，从一个页面，使用 AJAX。

我希望能够从我的服务异步调用方法，这意味着我的 javascript 代码中有回调处理程序，当方法完成时，输出将被更新。这些方法应该在不同的线程中运行，因为每个方法将花费不同的时间来完成它们的任务

我的代码半工作，但是发生了一些奇怪的事情，因为我**在编译后第一次执行代码时，它可以工作**，*在不同的线程中运行每个调用，*但后续调用会阻塞服务，这样每个方法调用都有等到最后一个调用结束才能执行下一个调用。他们在同一个线程上运行。我之前在使用*Page Methods*时遇到过同样的问题，我通过禁用页面中的会话来解决它，但我还没有弄清楚在使用 WCF REST 服务时如何做同样的事情

注意：方法完成时间（异步运行它们应该只需要**7 秒**，结果应该是：**Execute1 - Execute3 - Execute2**）

*   `Execute1`--> 2 秒
*   `Execute2`--> 7 秒
*   `Execute3`--> 4 秒

### 编译后输出

![编译后](../Images/f871a16af52a3b03251a5e2e5bd27685.png)

### 输出后续调用（这就是问题所在）

![随后的电话](../Images/09ce9c7f8e0aa2225185af2a707f8964.png)

我会发布代码......我会尽量简化它

### 服务合同

```
[ServiceContract(
    SessionMode = SessionMode.NotAllowed
)]
public interface IMyService
{
    // I have other 3 methods like these: Execute2 and Execute3
    [OperationContract]
    [WebInvoke(
        RequestFormat = WebMessageFormat.Json,
        ResponseFormat = WebMessageFormat.Json,
        UriTemplate = "/Execute1",
        Method = "POST")]
    string Execute1(string param);
}
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
[ServiceBehavior(
    InstanceContextMode = InstanceContextMode.PerCall
)]
public class MyService : IMyService
{
    // I have other 3 methods like these: Execute2 (7 sec) and Execute3(4 sec)
    public string Execute1(string param)
    {
        var t = Observable.Start(() => Thread.Sleep(2000), Scheduler.NewThread);
        t.First();

        return string.Format("Execute1 on: {0} count: {1} at: {2} thread: {3}", param, "0", DateTime.Now.ToString(), Thread.CurrentThread.ManagedThreadId.ToString());
    }
 } 
```

### ASPX 页面

```
<%@ Page EnableSessionState="False" Title="Home Page" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true"
    CodeBehind="Default.aspx.cs" Inherits="RestService._Default" %>
<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
    <script type="text/javascript">
        function callMethodAsync(url, data) {
            $("#message").append("<br/>" + new Date());
            $.ajax({
                cache: false,
                type: "POST",
                async: true,
                url: url,
                data: '"de"',
                contentType: "application/json",
                dataType: "json",
                success: function (msg) {
                    $("#message").append("<br/>&nbsp;&nbsp;&nbsp;" + msg);
                },
                error: function (xhr) {
                    alert(xhr.responseText);
                }
            });
        }
        $(function () {
            $("#callMany").click(function () {
                $("#message").html("");
                callMethodAsync("/Execute1", "hello");
                callMethodAsync("/Execute2", "crazy");
                callMethodAsync("/Execute3", "world");
            });
        });
    </script>
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
    <input type="button" id="callMany" value="Post Many" />
    <div id="message">
    </div>
</asp:Content> 
```

### Web.config（相关）

```
<system.webServer>
  <modules runAllManagedModulesForAllRequests="true" />
</system.webServer>
  <system.serviceModel>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />
    <standardEndpoints>
      <webHttpEndpoint>
        <standardEndpoint name="" helpEnabled="true" automaticFormatSelectionEnabled="true" />
      </webHttpEndpoint>
    </standardEndpoints>
  </system.serviceModel> 
```

### 全球.asax

```
 void Application_Start(object sender, EventArgs e)
    {
        RouteTable.Routes.Ignore("{resource}.axd/{*pathInfo}");
        RouteTable.Routes.Add(new ServiceRoute("", 
          new WebServiceHostFactory(), 
          typeof(MyService)));
    } 
```

## 编辑 1

我尝试了几种组合，但结果相同，我使用 Visual Studio 进行测试，但现在我在 IIS 7 上进行测试，结果相同

我尝试了以下属性的组合：

```
[ServiceBehavior(
    InstanceContextMode = InstanceContextMode.PerCall,
    ConcurrencyMode = ConcurrencyMode.Multiple
)] 
```

我还删除了 Rx 的使用，现在我只是在模拟这样的长流程操作：

```
Thread.Sleep(2000); 
```

但结果是一样的......**在编译和部署之后，（第一次调用）服务正常工作，它在不同的线程上执行，给出了所需的结果，但后续调用在同一个线程上运行......我不明白**

我只是注意到一些事情，编译后第一次工作，并且**最后使用**的线程始终是后续调用中使用的线程，并且该线程被阻塞，就像其他线程没有被释放或其他东西一样，或者如果最后一个线程被由于某种原因被阻止

## 编辑 2

这是这个项目的完整代码（RestWCF.zip）

[http://sdrv.ms/P9wW6D](http://sdrv.ms/P9wW6D)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-04T07:55:57.457

我下载了你的源代码自己做一些测试。我设法通过将它添加到 web.config 来让它工作：

```
<sessionState mode="Off"></sessionState> 
```

该问题似乎与 Asp.Net 会话处理有关（似乎与 WCF 会话不同）。

如果没有这个，Fiddler 会显示 WCF 服务响应正在发送一个`ASP.NET_SessionId`cookie。您的`Page`等级`EnableSessionState="False"`不影响服务。

**编辑**：我做了一些更多的测试，看看我是否可以让它工作而不必关闭整个应用程序的会话状态。我现在开始工作了。我所做的是：

*   在应用程序的根目录下创建一个新文件夹“ServiceFolder”
*   将服务接口和实现移至该文件夹

然后在`Global.asax`我更改了`ServiceRoute`注册：

```
RouteTable.Routes.Add(new ServiceRoute("ServiceFolder/",
    new WebServiceHostFactory(),
    typeof(MyService))); 
```

在 Default.aspx 我改变了：

```
$(function () {
    $("#callMany").click(function () {
        $("#message").html("");
        callMethodAsync('<%=this.ResolveUrl("~/ServiceFolder/Execute1") %>', "hello");
        callMethodAsync('<%=this.ResolveUrl("~/ServiceFolder/Execute2") %>', "crazy");
        callMethodAsync('<%=this.ResolveUrl("~/ServiceFolder/Execute3") %>', "world");
    });
}); 
```

然后，为了控制 cookie 处理，我创建了一个`HttpModule`：

```
using System;
using System.Web;

namespace RestService
{
    public class TestPreventCookie : IHttpModule
    {
        public void Dispose()
        {
        }
        public void Init(HttpApplication application)
        {
            application.BeginRequest +=
                (new EventHandler(this.Application_BeginRequest));
            application.PostAcquireRequestState +=
                (new EventHandler(this.Application_PostAcquireRequestState));

        }
        private void Application_BeginRequest(Object source, EventArgs e)
        {
            //prevent session cookie from reaching the service
            HttpApplication application = (HttpApplication)source;
            HttpContext context = application.Context;
            if (context.Request.Path.StartsWith("/ServiceFolder"))
            {
                context.Request.Cookies.Remove("ASP.NET_SessionId");
            }
        }
        private void Application_PostAcquireRequestState(Object source, EventArgs e)
        {
            HttpApplication application = (HttpApplication)source;
            HttpContext context = application.Context;
            if (context.Request.Path.StartsWith("/ServiceFolder"))
            {
                var s = context.Session;
                if (s != null)
                    s.Abandon();
            }
        }
    }
} 
```

然后我在 web.config 中注册了模块：

```
<httpModules>
    <add name="TestPreventCookie" type="RestService.TestPreventCookie" />
</httpModules> 
```

最后，我更改 Default.aspx 以允许会话：

```
EnableSessionState="True" 
```

在这些更改之后，服务调用的并行执行工作。强制性免责声明：

> 它适用于我的机器

这个想法是，当对服务的调用进入时，HttpModule 会检查 URL，并在必要时删除`ASP.NET_SessionId`cookie，这样它就不会到达服务。然后在`Application_PostAcquireRequestState`我们立即放弃创建的会话，这样我们就不会为大量空会话不必要地消耗服务器内存。

使用此解决方案，您将获得：

*   并行执行服务调用
*   您仍然可以在应用程序的其他部分使用 Session

代价是：

*   但是必须在不需要会话 cookie 的可识别 URL 上调用您的服务
*   服务器会创建和放弃很多会话

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-11T12:17:36.277

如果您不需要 Session 或需要它 ReadOnly，您可以更改 Global.asax.cs 中特定 svc 的 SessionStateBehavior。顺序阻塞将停止。

```
protected void Application_BeginRequest(object sender, EventArgs e) {
   if (Request.Path.Contains("AjaxTestWCFService.svc")) {
      HttpContext.Current.SetSessionStateBehavior(SessionStateBehavior.ReadOnly);
   }
} 
```

但是请注意， SessionStateBehavior.ReadOnly 将阻止写入会话而不会引发异常。写入的值将作为 null 返回。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-03T14:02:22.463

我对 Reactive 只是略知一二，但有些东西看起来不太对劲。

```
public string Execute1(string param)
{
    var t = Observable.Start(() => Thread.Sleep(2000), Scheduler.NewThread);
    t.First();

    return string.Format("Execute1 on: {0} count: {1} at: {2} thread: {3}", param, "0", DateTime.Now.ToString(), Thread.CurrentThread.ManagedThreadId.ToString());
} 
```

在这段代码中，您正在`Thread.Sleep`一个新线程中执行 a，然后是 First()。First() 方法阻塞了当前线程，所以这两行与`Thread.Sleep(2000)`. 这让 Reactive 不受影响。如果您使用此代码运行，您会得到相同的结果，这表明您没有获得多线程。

造成这种情况的第一个合乎逻辑的原因是 missing `ConcurrencyMode=ConcurrencyMode.Multiple`，我知道您已经尝试过了。下一个可能性是您在内置的 ASP.Net 开发服务器上运行它，除非我弄错了，否则它不支持多线程。您是否在 IIS 实例上运行它？

我不确定您要实现什么，但 t.Take(1) 是非阻塞的。

**更新**罪魁祸首`aspNetCompatibilityEnabled="true"`在 web.config 中。如果包含它，您会得到提到的行为。如果不包含（默认=false），您将获得多线程。我还不知道这背后的逻辑。[将其设置为 false，您将失去此处](http://blogs.msdn.com/b/wenlong/archive/2006/01/23/516041.aspx)所述的一些功能，包括 HttpContext 和 ASP.NET 会话。

** 进一步更新 ** 如果关闭`aspNetCompatibilityEnabled`，则无法使用路由。我已经尝试了许多组合，包括不同的绑定和 transferMode 设置，它们通过似乎工作了一段时间来欺骗你，然后又回到使用同一个线程。我还检查了工作线程并且已经没有想法了。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-28T21:13:29.593

我认为将您的 ConcurrencyMode 更改为 Multiple 如下所示将解决您的线程阻塞问题：

```
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
[ServiceBehavior(
    InstanceContextMode = InstanceContextMode.PerCall,
    ConcurrencyMode = ConcurrencyMode.Multiple
)]
public class MyService : IMyService
{ 
```

}

# pyqt - 在 PyQt 中将滑块连接到图形视图

> ID：11250110
> 
> 赞同：2
> 
> 时间：2012-06-28T17:43:25.263
> 
> 标签：pyqt, qimage, custom-widgets

我正在尝试显示从二进制文件中读取的图像数据（我编写了用于从文件中检索此数据并将其存储为图像以供 QImage() 使用的代码）。我想做的是将滑块连接到图形视图小部件，这样当您移动滑块时，它会在帧中移动并显示该帧中的图像（这些是长度范围为 1-500 帧的回声图）。我对 PyQt 很陌生，很好奇一个人是如何开始这样做的？

```
from PyQt4.QtCore import *
from PyQt4.QtGui import *
import numpy as np

class FileHeader(object):

    fileheader_fields=      ("filetype","fileversion","numframes","framerate","resolution","numbeams","samplerate","samplesperchannel","receivergain","windowstart","winlengthsindex","reverse","serialnumber","date","idstring","ID1","ID2","ID3","ID4","framestart","frameend","timelapse","recordInterval","radioseconds","frameinterval","userassigned")
   fileheader_formats=('S3','B','i4','i4','i4','i4','f','i4','i4','i4','i4','i4','i4','S32','S256','i4','i4','i4','i4','i4','i4','i4','i4','i4','i4','S136')

    def __init__(self,filename,parent=None):
        a=QApplication([])
        filename=str(QFileDialog.getOpenFileName(None,"open file","C:/vprice/DIDSON/DIDSON Data","*.ddf"))
        self.infile=open(filename, 'rb')
        dtype=dict(names=self.fileheader_fields, formats=self.fileheader_formats)
        self.fileheader=np.fromfile(self.infile, dtype=dtype, count=1)
        self.fileheader_length=self.infile.tell()

    for field in self.fileheader_fields:
        setattr(self,field,self.fileheader[field])

    def get_frame_first(self):
        frame=Frame(self.infile)
        print self.fileheader
        self.infile.seek(self.fileheader_length)
        print frame.frameheader
        print frame.data

    def __iter__(self):
        self.infile.seek(self.fileheader_length)

    for _ in range(self.numframes):
        yield Frame(self.infile)

    #def close(self):
        #self.infile.close()
    def display(self):
        print self.fileheader

class Frame(object):
    frameheader_fields=("framenumber","frametime","version","status","year","month","day","hour","minute","second","hsecond","transmit","windowstart","index","threshold","intensity","receivergain","degc1","degc2","humidity","focus","battery","status1","status2","velocity","depth","altitude","pitch","pitchrate","roll","rollrate","heading","headingrate","sonarpan","sonartilt","sonarroll","latitude","longitude","sonarposition","configflags","userassigned")
    frameheader_formats=("i4","2i4","S4","i4","i4","i4","i4","i4","i4","i4","i4","i4","i4","i4","i4","i4","i4","i4","i4","i4","i4","i4","S16","S16","f","f","f","f","f","f","f","f","f","f","f","f","f8","f8","f","i4","S60")
    data_format="uint8"

    def __init__(self,infile):

        dtype=dict(names=self.frameheader_fields,formats=self.frameheader_formats)
        self.frameheader=np.fromfile(infile,dtype=dtype,count=1)

        for field in self.frameheader_fields:
            setattr(self,field,self.frameheader[field])

        ncols,nrows=96,512

        self.data=np.fromfile(infile,self.data_format,count=ncols*nrows)

        self.data=self.data.reshape((nrows,ncols))

class QEchogram():
    def __init__(self):
        self.__colorTable=[]
        self.colorTable=None
        self.threshold=[50,255]
        self.painter=None
        self.image=None

    def echogram(self):
        fileheader=FileHeader(self)
        frame=Frame(fileheader.infile)
        echoData=frame.data

        #fileName = fileName

        self.size=[echoData.shape[0],echoData.shape[1]]

        #  define the size of the data (and resulting image)
        #size = [96, 512]

        #  create a color table for our image
        #  first define the colors as RGB triplets
        colorTable =  [(255,255,255),
                       (159,159,159),
                       (95,95,95),
                       (0,0,255),
                       (0,0,127),
                       (0,191,0),
                       (0,127,0),
                       (255,255,0),
                       (255,127,0),
                       (255,0,191),
                       (255,0,0),
                       (166,83,60),
                       (120,60,40),
                       (200,200,200)]

    #  then create a color table for Qt - this encodes the color table
    #  into a list of 32bit integers (4 bytes) where each byte is the
    #  red, green, blue and alpha 8 bit values. In this case we don't
    #  set alpha so it defaults to 255 (opaque)
        ctLength = len(colorTable)
        self.__ctLength=ctLength
        __colorTable = []
        for c in colorTable:
            __colorTable.append(QColor(c[0],c[1],c[2]).rgb())

        echoData = np.round((echoData - self.threshold[0])*(float(self.__ctLength)/(self.threshold[1]-self.threshold[0])))
        echoData[echoData < 0] = 0
        echoData[echoData > self.__ctLength-1] = self.__ctLength-1
        echoData = echoData.astype(np.uint8)
        self.data=echoData

    #  create an image from our numpy data
        image = QImage(echoData.data, echoData.shape[1], echoData.shape[0], echoData.shape[1],
                   QImage.Format_Indexed8)
        image.setColorTable(__colorTable)

    #  convert to ARGB
        image = image.convertToFormat(QImage.Format_ARGB32)

    #  save the image to file
        image.save(fileName)
        self.image=QImage(self.size[0],self.size[1],QImage.Format_ARGB32)
        self.painter=QPainter(self.image)
        self.painter.drawImage(QRect(0.0,0.0,self.size[0],self.size[1]),image)

    def getImage(self):
        self.painter.end()
        return self.image
    def getPixmap(self):
        self.painter.end()
        return QPixmap.fromImage(self.image)

if __name__=="__main__":

    data=QEchogram()
    fileName="horizontal.png"
    data.echogram()
    dataH=data.data
    print "Horizontal data", dataH 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T05:37:54.967

如果您展示了到目前为止您正在尝试的内容，我可以给您一个更具体的答案，但现在我只会做出假设并举一个例子。

首先，您要做的是创建一个[QSlider](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qslider.html)。您将 QSlider 最小值/最大值设置为您可用的图像范围。当您滑动它时，[`sliderMoved`信号](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qabstractslider.html#sliderMoved)会触发并告诉您新值是什么。

接下来，您可以提前创建一个包含所有[QPixmap图像的列表。](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qpixmap.html)如果这些图像很大并且您担心内存，您可能必须使用您已经编码的方法按需创建它们。但是我们假设您现在可以将它们放在一个列表中，以使示例更容易。

然后使用单个[QGraphicsPixmapItem](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qgraphicspixmapitem.html)创建 QGraphics 设置。该项目可以根据需要替换其像素图。

把它们放在一起，你会得到这样的东西：

```
from PyQt4 import QtCore, QtGui

class Widget(QtGui.QWidget):

    def __init__(self, parent=None):
        super(Widget, self).__init__(parent)
        self.resize(640,480)
        self.layout = QtGui.QVBoxLayout(self)

        self.scene = QtGui.QGraphicsScene(self)
        self.view = QtGui.QGraphicsView(self.scene)
        self.layout.addWidget(self.view)

        self.image = QtGui.QGraphicsPixmapItem()
        self.scene.addItem(self.image)
        self.view.centerOn(self.image)

        self._images = [
            QtGui.QPixmap('Smiley.png'),
            QtGui.QPixmap('Smiley2.png')
        ]

        self.slider = QtGui.QSlider(self)
        self.slider.setOrientation(QtCore.Qt.Horizontal)
        self.slider.setMinimum(0)
        # max is the last index of the image list
        self.slider.setMaximum(len(self._images)-1)
        self.layout.addWidget(self.slider)

        # set it to the first image, if you want.
        self.sliderMoved(0)

        self.slider.sliderMoved.connect(self.sliderMoved)

    def sliderMoved(self, val):
        print "Slider moved to:", val
        try:
            self.image.setPixmap(self._images[val])
        except IndexError:
            print "Error: No image at index", val

if __name__ == "__main__":
    app = QtGui.QApplication([])
    w = Widget()
    w.show()
    w.raise_()
    app.exec_() 
```

您可以看到我们设置了滑块的范围以匹配您的图像列表。如果图像列表的内容发生变化，您可以随时更改此范围。当`sliderMoved`触发时，它将使用该值作为图像列表的索引并设置像素图。

我还在我们的 SLOT 中添加了一个检查`sliderMoved()`，以防您的滑块范围与您的图像列表不同步。如果您滑动到图像列表中不存在的索引，它将优雅地失败并离开现有图像。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T20:54:09.930

您正在做的很多工作——将图像数据转换为 QImage，使用滑块显示帧——可能会使用为此目的编写的库更好地解决。我可以想到几个库可以与 PyQt 一起使用，并提供您需要的一切：

*   [guiqwt](http://code.google.com/p/guiqwt/ "guiqwt")
*   [pyqtgraph](http://luke.campagnola.me/code/pyqtgraph/ "pyqtgraph")

（免责声明：无耻插件）

如果您可以将所有图像数据收集到一个 3D numpy 数组中，那么在 pyqtgraph 中显示它的代码如下所示：

```
import pyqtgraph as pg
pg.image(imageData) 
```

这将为您提供带有框架滑块和颜色查找表控件的可缩放图像显示。

# javascript - 如何访问 RequireJS 从 PartialView 传回的现有 javascript 对象

> ID：11250114
> 
> 赞同：0
> 
> 时间：2012-06-28T17:43:31.017
> 
> 标签：javascript, asp.net-mvc, knockout.js, requirejs

使用 ASP.NET MVC、KnockoutJS，我正在使用 Require JS。

我认为我正在传回一个保留 2 个 Knockout 视图模型的对象。为了简单起见，父视图是一个项目列表。您可以通过单击相应的按钮来创建新产品或编辑列表中的产品。任何一个按钮都会初始化一个 jQuery 对话框，该对话框是通过从我的控制器获取返回的 PartialView 来填充的。

在检索局部视图时，我将一个 Knockout View 模型（原始返回的 RequireJS 对象上的属性）绑定到该局部视图。创建新产品、采用 KO 视图模型并将其保存回控制器操作时，我没有任何问题。

**问题**

尝试将现有产品加载到 PartialView 时会出现问题。我需要能够用初始值填充 KO viewModel。一个可能的解决方案是，如果我可以将 MVC 视图**模型**从控制器传递到我现有的 RequireJS 对象中，我可以使用现有属性值初始化 KO 视图模型。但是，我无法弄清楚如何在部分视图视图中访问产品列表视图中**现有的返回 javascript 对象。**

我可以在传入的局部视图上获取 MVC 模型的唯一**错误**方法是，如果我在局部视图上连接 Require JS 并传回对象的**新**实例并传入 MVC 模型，但这只会破坏当前jQuery 对话框回调到原始对象。

**例子：**

**父产品列表视图**

```
 ......bunch of html
     </li>
   </ul>
 </div>

 @{
   <script type="text/javascript">
      require(['jquery', 'items/adminItemsList', 'jquery-validate-unobtrusive' ],    function ($, viewModel) {
        $(function () {
             viewModel.initialize({
              addUrl: '@Url.Action("Add")',
              listUrl: '@Url.Action("List")',
              editUrl: '@Url.Action("Edit")',
              deleteUrl: '@Url.Action("Delete")'
          });
      });
  }); 
```

}

**jQuery 对话框部分视图**

```
 ....bunch of Html
   </div>
  </div>

 <script type="text/javascript">
    viewModel.Model(@Html.Json(Model))   //I need to be able to do something like this
 </script> 
```

Json 方法只是一个 HtmlHelper 扩展。

如何将返回的 RequireJS 对象设置为可访问，或者有什么更好的设计方法。

我有并且需要：

1.  我有产品列表视图
2.  创建/编辑产品的视图
3.  产品列表视图 javascript 拥有生成创建/编辑产品视图的 jQuery 对话框，因此它不需要破坏回调函数（即 onSuccessfulSubmit...）

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T12:10:39.880

我最终做的是拆分我的 ViewModel（因为确实有两个不同的视图），并且在我需要传递渲染的 MVC Model 对象的一个​​ ViewModel 上，我将它设置为 ViewModel 的可访问公共属性，以便可以访问它并由其他 ViewModel 的共享组件序列化。

# javascript - InDesign CS5 脚本：椭圆形“transformReferencePoint”

> ID：11250115
> 
> 赞同：0
> 
> 时间：2012-06-28T17:43:32.917
> 
> 标签：javascript, object, methods, adobe-indesign

我正在尝试为 InDesign CS5 脚本更改 javascript 中椭圆的参考点。这是我一直在尝试的：

```
function addFid(top, left, bottom, right) {
  var circle = myDoc.ovals.add();
  circle.geometricBounds = [top, left, bottom, right];
  circle.fillColor = myDoc.swatches.item("Black");
  circle.strokeWeight = 0;
  // Apparently, this Object does not support this property or method
  circle.transformReferencePoint = AnchorPoint.CENTER_ANCHOR;
} 
```

但是由于某种原因，当我运行它时，我得到“对象不支持属性或方法'transformReferencePoint'”

我在任何地方都找不到正确的属性或方法（至少不是椭圆）

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T17:48:05.213

transformReferencePoint 是一个 LayoutWindow 属性。

```
app.activeWindow.transformReferencePoint = AnchorPoint.CENTER_ANCHOR; 
```

那应该可以解决您的问题。

洛伊克

# visual-studio-2010 - 当我已经有 Microsoft Sql Server Developer 时，为什么还要在 Visual Studio 中安装 Sql Express？

> ID：11250116
> 
> 赞同：5
> 
> 时间：2012-06-28T17:43:35.320
> 
> 标签：visual-studio-2010, sql-server-express

当我已经拥有 Microsoft Sql Server Developer (2008) 时，使用 Visual Studio (2010) 安装 Sql Express 有什么好处？

我能想象的唯一好处是我可以为任何一个平台开发，而不必担心我安装了哪个平台。*从我的开发机器中删除*Sql Server Express（特别是 SqlExpress 实例）是否有实际的负面损害？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T17:49:57.660

我能想到的拥有 Express 的唯一优势是：

*   如果您想开发专门针对 Express 的应用程序，使用 Express 可以帮助您避免使用在 Developer 中有效但在您的目标上无效的功能（例如压缩、分区）。
*   如果您已经有使用 Express 实例的应用程序，它们显然会停止工作，直到您将这些数据库移动到另一个实例并更新应用程序以指向另一个实例。

如果这两种情况都不相关，我想不出删除 Express 实例的一个缺点。为安全起见，您可能需要先停止并禁用 Express 服务一周，以确保您所拥有的一切都不依赖它。

请注意，从程序和功能中卸载 Express 将删除引擎，但它会使您的任何用户数据库完好无损。因此，只要在卸载 SQL Server 服务之前优雅地停止它，就不必担心数据丢失。

要删除 SQL Server Express，您可以右键单击“添加/删除程序”/“程序和功能”中出现的任何一项：

```
Microsoft SQL Server 2008
Microsoft SQL Server 2008 (64-bit) 
```

（除非你在 x64 机器上有一组非常混乱的实例，否则应该只有其中一个。）

*   右键单击时，选择“卸载/更改”
*   如果您要添加、修复或删除，您会看到一个添加对话框；选择删除
*   接下来，您将看到“设置支持规则”对话框 - 如果确定可用，请单击它，否则您可能需要重新启动计算机才能继续
*   然后您将进入“选择实例”屏幕。有一个名为“Instance to remove features from:”的下拉菜单 - 选择 SQLEXPRESS 并单击 Next
*   然后您将看到一个名为“选择功能”的屏幕 - 在这里您只想选择“数据库引擎服务”（我认为您不想删除任何共享功能）。点击下一步
*   剩下的路应该一帆风顺，但如前所述，您必须清理文件夹，这可能是：

```
C:\Program Files\Microsoft SQL Server\MSSQL10.SQLEXPRESS\ 
```

除非您想保存任何用户数据库，否则删除那里的所有内容应该是安全的。您还可以搜索要删除或保存的 .mdf 文件，这些文件可能由于在应用程序中或开发过程中使用而被复制到系统的各个部分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T17:37:38.993

SQL Server Developer 版本不包括仅在 SQL Server Express 版本中可用的用户实例功能（又名 RANU）。Visual Studio 2010 及更早版本使用用户实例打开嵌入在您的项目中的 MDF 文件。使用 Developer 版本，但如果没有 Express 版本，如果您尝试打开这些文件，您会看到一个错误。

现在，Visual Studio 2012 包括用于此目的的 SQL Server 2012 Express 的 LocalDB 版本。

# php - 从 mysql 的字段中排除某些项目

> ID：11250132
> 
> 赞同：0
> 
> 时间：2012-06-28T17:44:38.990
> 
> 标签：php, dynamic, selection, field

假设您想要获取表的所有列，但排除名称中包含例如 _images 的列，而无需执行

```
mysql_query("SHOW COLUMNS FROM " . $table. " WHERE Field NOT IN ('project_images_1' .etc)") 
```

这可能吗？

字段示例：

```
header
bodytext
project_images_1 (exclude)
project_images_2 (exclude) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T18:06:50.987

是的，这是可能的。我可以用`LIKE`操作员来做：

```
SHOW COLUMNS FROM $table WHERE NOT Field LIKE '%_images%'; 
```

或者，如果您需要更多控制，这可能会有所帮助：

```
$query = <<<SQL
SHOW COLUMNS FROM $table WHERE Field NOT IN (
    SELECT column_name FROM INFORMATION_SCHEMA.COLUMNS
    WHERE table_name = $table
    AND column_name LIKE 'project_images_%'
);
SQL; 
```

这通过在[所谓的 subquery中使用](http://dev.mysql.com/doc/refman/5.1/en/any-in-some-subqueries.html)[信息模式表](http://dev.mysql.com/doc/refman/5.1/en/tables-table.html)（也许这就是您要查找的内容）来工作。

有关的：

*   [如何`SHOW COLUMNS`用作有效的数据源](https://stackoverflow.com/q/6345870/367456)

# android - android活动中断时该怎么办？

> ID：11250133
> 
> 赞同：3
> 
> 时间：2012-06-28T17:44:40.733
> 
> 标签：android

我目前有一个程序，用户填写信息并将其发送到服务器。然后它将一到两 MB 的文件下载到设备。我进行了设置，因此手机在下载文件时不会进入睡眠状态，但是当用户手动按下睡眠按钮或文本进入手机时，它会被中断。什么是最好的解决方案？我应该创建一个服务还是以某种方式告诉活动在 onPause 方法中继续下载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T17:52:28.467

使用android服务在后台下载并在完成时发布android通知不是更好吗？

# c# - 不能在 C# 中的同一方法上使用虚拟和覆盖

> ID：11250134
> 
> 赞同：22
> 
> 时间：2012-06-28T17:44:46.943
> 
> 标签：c#, polymorphism

所以显然你不能将`virtual`修饰符与修饰符一起使用`override`。

`virtual`- 一种可以被覆盖的方法

`override`- 覆盖其父类中同名方法的方法

这让我相信，如果我在子类中重写了一个方法，如果那个孩子有一个孩子，你就不能再重写那个方法了。

可以肯定地说，如果你在方法声明中放入`override`and ，你会在 C# 中得到一个编译错误。`virtual`

但是我不明白为什么我在下面制作的代码会以它的方式工作

```
using System;
public class DrawingObject
{
public virtual void Draw()
{
    Console.WriteLine("Drawing Object");
}
}
public class DrawDemo
{
     public static int Main()
     {
          DrawingObject[] dObj = new DrawingObject[3];

          dObj[0] = new DrawingObject();
           dObj[1] = new Line();
           dObj[2] = new LittleLine();

           foreach (DrawingObject drawObj in dObj)
           {
                drawObj.Draw();
           }
            Console.Read();
           return 0;
       }
  }
 public class Line : DrawingObject
 {
       public override void Draw()
       {// the method above me is in fact virtual because LittleLine overid it?
               Console.WriteLine("I'm a Line.");
       }
  }
  public class LittleLine : Line
  {
       public override void Draw()
       {
              Console.WriteLine("I'm a Little Line.");
         }
    } 
```

这是输出：

> 绘图对象
> 
> 我是一条线。
> 
> 我是小线

所以中的 draw 方法`Line`看起来好像被`LittleLine`. 这段代码实际上并没有覆盖它，还是编译器做了其他一些技巧？还是我不理解`virtual`and的上下文`override`？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-28T17:50:04.620

您可以将某个方法声明为`virtual`仅一次，但您可以`override`根据需要多次声明 - 覆盖不是最终的，并且它不限制从第一个覆盖类继承的类。最终将执行的方法是最后一个覆盖虚拟方法的方法。因此，您的代码确实按预期运行。

C# 在覆盖方面非常冗长——你有比 C++ 或 Java 更多的说明符。让程序员指定确切的意图是这样的：

*   你`virtual`用来指定一个方法可以被子类覆盖。
*   你`override`用来指定你正在重写一个你知道是虚拟的方法（如果不是，编译器会报告一个错误）。
*   您用于`sealed`防止进一步覆盖。
*   而且您使用`new`隐藏而不是覆盖。

这可能会令人困惑，有时也很烦人，但它可以确保您真正知道自己在做什么，并且可以让您的意图自我记录。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-28T17:52:53.880

> 因此，显然您不能将 virtual 修饰符与 override 修饰符一起使用。

确实。*该方法保持虚拟，除非您使用也*声明为的方法覆盖它`sealed`。（当您覆盖某些内容时，您*只能*在方法上使用修改。）从 C# 4 规范的第 10.6.5 节：`sealed`

> 当实例方法声明包含密封修饰符时，该方法称为密封方法。如果实例方法声明包含sealed 修饰符，它还必须包含override 修饰符。使用sealed 修饰符可防止派生类进一步覆盖该方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T17:53:19.687

我认为您只是误解了它`virtual`的工作原理。它不限于一级继承，如此[处所述，例如](http://msdn.microsoft.com/en-us/library/aa645767%28v=vs.71%29.aspx)：

> 对于在类中声明或由类继承的每个虚拟方法，都存在该方法相对于该类的最派生实现。虚拟方法 M 相对于类 R 的最派生实现如下确定：
> • 如果 R 包含 M 的引入虚声明，则这是 M 的最派生实现。
> • 否则，如果 R 包含M，那么这是 M 的最派生实现。
> • 否则，M 相对于 R 的最派生实现与 M 相对于 R 的直接基类的最派生实现相同。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-28T17:54:13.000

这种行为是对的。如果您不希望继承的类覆盖您的虚拟方法，则可以将其标记为“密封”，如下所示：

```
public class Line : DrawingObject
 {
       public sealed override void Draw()
       {
               Console.WriteLine("I'm a Line.");
       }
  } 
```

之后 LittleLine 类将无法覆盖 Draw 方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-28T17:52:32.430

`virtual`表示您的方法是通过虚拟方法表调度的。如果方法是虚拟的，则派生类上对该方法的任何引用都必须通过 vtable。您不能仅仅因为派生类覆盖它而对其进行非虚拟化 - 如果`LittleLine`强制转换为会发生什么`DrawingObject`？您仍然需要找到正确的实现，而不是`DrawingObject`'s

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-28T17:53:54.570

看起来它按预期工作。

dObj[0] = new DrawingObject();
dObj[1] = new Line();
dObj[2] = new LittleLine();

您正在调用 Draw() 并在循环中

> 继承人输出绘图对象我是一条线。我是小线

dObj[0].Draw() -> "绘图对象" dObj[1].Draw() -> "我是一条线。" dObj[2].Draw() -> "我是一条小线"

> 所以 Line 中的 draw 方法看起来好像被 LittleLine 覆盖了

是的，这不正是你所期望的吗？该方法在基类中被标记为 Virtual 并且您已经覆盖了它。如果您想“添加”，则需要使用其他模式。也许是一个装饰师。

# android - android中带有R的gen文件夹中缺少包

> ID：11250135
> 
> 赞同：0
> 
> 时间：2012-06-28T17:44:48.473
> 
> 标签：android

我在 android 中遇到了 R 的问题。我有一个带有一些包的项目。我更改了一个包的名称。我看到同名的包在“gen”文件夹中。当我更改名称时，我清理了项目，这个包从“gen”文件夹中消失了。现在我有错误

> R无法解决

在所有课程中，我都遇到了 R 错误。我该如何解决我的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T17:47:44.307

所以我认为这是答案

> Eclipse 有时喜欢在使用资源的文件顶部添加“import android.R”语句，尤其是当您要求 eclipse 对导入进行排序或以其他方式管理时。这将导致您的制造中断。留意这些错误的导入语句并删除它们。

[参考](http://source.android.com/source/using-eclipse.html)。

并尝试清理您的项目，如果您有

```
import android.R; 
```

删除这条线并再次清理它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T17:53:46.050

消除

```
import android.R; 
```

并做项目>清洁...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T17:50:33.747

如果存在，请从您的代码中删除此导入。

```
import android.R; 
```

清理您的项目并再次重建解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T17:53:26.677

如果不是其他两个答案，那么我遇到了一个类似的问题，与我的一个 XML 文件中的错误有关。由于 XML 文件有错误，eclipse 无法构建您的项目。失败的构建以某种方式弄乱了 R.java 文件的路径。因此，如果您清理 XML 文件并构建项目，它应该会自行修复。

# iphone - 我什么时候应该关闭计时器？

> ID：11250138
> 
> 赞同：0
> 
> 时间：2012-06-28T17:44:52.097
> 
> 标签：iphone, ios

我有一个计时器，它将在 viewDidLoad 上初始化，并在 viewDidUnload 上释放，但我发现 viewDidUnload 神经被调用，每次将视图呈现给用户时都会调用 viewDidLoad，所以我有很多计时器同时运行......不是我想要的。

我只想在用户离开此视图时停止并释放计时器，我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T17:47:50.467

不要在视图加载时初始化它，而是在视图中初始化它会出现并在视图中停止它会消失，这样当您导航离开时它将停止并在您返回该视图时重新启动。

我遇到了与您完全相同的问题。这是以防万一您需要的代码：

```
- (void)viewWillAppear:(BOOL)animated{
[super viewWillAppear:animated];
NSLog(@"View will appear");
myTimer = [NSTimer timerWithTimeInterval:5.0 target:self selector:@selector(pageCycler) userInfo:nil repeats:YES];
[[NSRunLoop mainRunLoop] addTimer: myTimer forMode: NSDefaultRunLoopMode];
}

- (void)viewWillDisappear:(BOOL)animated {
[super viewWillDisappear:animated];
NSLog(@"View will dissapear");
[myTimer invalidate];
myTimer=nil;
} 
```

# c# - C# COM 互操作：写入 Excel 工作表中的单元格

> ID：11250142
> 
> 赞同：4
> 
> 时间：2012-06-28T17:45:13.447
> 
> 标签：c#, winforms, excel, com-interop, winforms-interop

我在 Winform 中使用 Microsoft.Office.Interop.Excel，我正在读取一个 excel 文件、处理数据并输出一个新的 excel 文件。但是，我无法写入单元格——特别是添加列标题。这是代码：

```
Microsoft.Office.Interop.Excel.Application xlApp = new Microsoft.Office.Interop.Excel.Application();
Workbook wb = xlApp.Workbooks.Add(XlWBATemplate.xlWBATWorksheet);
Worksheet ws = (Worksheet)wb.Worksheets[1];
for (int i = 0; i < dt.Columns.Count; i++)
{
    for (int j = 0; j < dt.Rows.Count; j++)
    {
        ws.Cells[j + 1, i] = dt.Rows[j][i].ToString();
    }
}
ws.Cells[0, 0] = "Ticket Number";
ws.Cells[0, 1] = "Transit";
ws.Cells[0, 2] = "Outage Start Date";
ws.Cells[0, 3] = "Outage End Date";
ws.Cells[0, 4] = "Business Impact";
wb.Worksheets.Add(ws); 
```

其中“dt”是我的数据表。嵌套的 for 循环不会引发运行时错误，但它后面的代码会。错误只是说：COM Exception is unhandled, Exception from HRESULT: 0x800A03EC.

任何建议表示赞赏。

问候。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-28T18:08:52.260

`Cells[]`是从 1 开始的，而不是从零开始的。

# javascript - 如何从其 OnBegin 函数中引用单击的 ActionLink `a` 元素？

> ID：11250143
> 
> 赞同：1
> 
> 时间：2012-06-28T17:45:22.747
> 
> 标签：javascript, asp.net, asp.net-mvc, asp.net-mvc-3, actionlink

如何`Ajax.ActionLink`从其`OnBegin`功能中引用单击？

**cshtml**

```
@Ajax.ActionLink(
    typeName,
    "OrderQueueRows",
    new 
    {
        typeNames = Model.Name,
        includeDerivedTypes = ViewBag.IncludeDerivedTypes,
        excludeCompletedOrders = ViewBag.ExcludeCompletedOrders
    },
    new AjaxOptions {
        LoadingElementId="ajax-loading",
        OnBegin = "highlightFilter",
        UpdateTargetId = "order-queue-body"
    },
    new { @class = "show-exclusively" }) 
```

**javascript**

```
function highlightFilter() {
    $link = $(this);
    $link.css('color', 'red');
    $link.siblings().not($link).css('color', '');
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T18:02:03.383

您无法使用开箱即用的`Ajax.*`助手实现此目的，因为它们不会将元素传递给`onBeforeSend`回调。微软实现它的方式，他们传递`xhr`对象而不是`element`被点击的对象。因此，一种可能性是修改`jquery.unobtrusive-ajax.js`脚本以便将此信息传递给回调。`beforeSend`在第 85 行，您将在回调中看到以下内容：

```
result = getFunction(element.getAttribute("data-ajax-begin"), ["xhr"]).apply(this, arguments); 
```

您所要做的就是像这样修改它：

```
result = getFunction(element.getAttribute("data-ajax-begin"), ["xhr"]).apply(element, arguments); 
```

如果您需要在`OnBegin`回调中同时包含元素和 xhr 对象：

```
result = getFunction(element.getAttribute("data-ajax-begin"), ["xhr"]).apply({ xhr: this, element: element }, arguments); 
```

现在，您的代码将开始工作`this`并将代表元素：

```
function highlightFilter() {
    $link = $(this);
    $link.css('color', 'red');
    $link.siblings().not($link).css('color', '');
} 
```

另一种可能性是简单地将 Ajax.ActionLink 替换为标准的 Html.ActionLink，然后编写相应的 jQuery 代码来订阅 .click 事件并触发 AJAX 请求。就个人而言，这可能是我会做的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-21T13:50:49.760

这现在在 ASP.NET MVC 5.1 中得到修复，使用来自另一个 stackoverflow 问题的方法：[How to use $(this) inside MVC3 Ajax.ActionLink OnBegin,OnComplete Events](https://stackoverflow.com/questions/6630189/how-to-use-this-inside-mvc3-ajax-actionlink-onbegin-oncomplete-events/14611314#14611314)

# boost - g++ 未定义引用`boost::system::system_category()'

> ID：11250144
> 
> 赞同：16
> 
> 时间：2012-06-28T17:45:23.867
> 
> 标签：boost, linker, compiler-errors, g++

我一直在寻找这个问题的答案。我正在使用 boost 1.48 并且程序非常简单，因为我已将其分解为最简单的形式以解决此问题。

```
#include <boost/filesystem.hpp>

int main(int argc, char **argv) {
    return 0;
} 
```

从我的 Makefile 执行的 g++ 命令如下：

```
g++ -m32 -Wall -o mapnik-test -L/usr/lib -I/usr/include -I/usr/include/freetype2 -lpthread -lboost_system mapnik-test.cpp 
```

链接过程中的完整错误列表如下：

```
/tmp/ccIbmuee.o: In function `__static_initialization_and_destruction_0(int, int)':
mapnik-test.cpp:(.text+0x49): undefined reference to `boost::system::generic_category()'
mapnik-test.cpp:(.text+0x53): undefined reference to `boost::system::generic_category()'
mapnik-test.cpp:(.text+0x5d): undefined reference to `boost::system::system_category()'
collect2: ld returned 1 exit status
make: *** [mapnik-test] Error 1 
```

我发现很多人都遇到了同样的问题，但在大多数情况下，解决方案是在 LDFLAGS 中提供 boost_system 库。从 g++ 命令行中可以看到，我已经指定了这个。我什至尝试显式链接 libboost_system.a 库但无济于事。我是唯一有此投诉的人吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-28T18:43:43.783

将源文件放在命令行的开头。

尝试

```
g++ -m32 -Wall mapnik-test.cpp -o mapnik-test -L/usr/lib -I/usr/include -I/usr/include/freetype2 -lpthread -lboost_system 
```

仅应在源文件之后指定库，以便链接器可以解析源文件中未定义的引用。

# rest - MongoLab 数据库是否存在 ReadOnly REST API 密钥，还是始终为 ReadWrite

> ID：11250145
> 
> 赞同：7
> 
> 时间：2012-06-28T17:45:24.103
> 
> 标签：rest, mlab

在 MongoLab 中，您生成一个 API 密钥，然后任何人都可以使用 REST API 访问您的数据库。

通常的情况是直接从 Ajax 客户端使用 REST api。

但这给了任何人对您的数据库的完全写入权限，这是一个安全漏洞。

有没有办法生成一个 API 密钥，它可以只读访问数据库

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T04:54:37.220

目前，所有 API 密钥都具有对与用户帐户关联的数据库的读写访问权限。如果您需要公开只读 API，我们建议您使用 Express 或 Sinatra 等众多可用框架之一构建您自己的 API。

# c++ - 使用 Objective-C 和 mxflib 读取 DNxHD MXF 文件

> ID：11250146
> 
> 赞同：0
> 
> 时间：2012-06-28T17:45:28.550
> 
> 标签：c++, objective-c, macos

我正在尝试将 MXF 文件（来自 Avid）读入 Objective-C 项目并分析视频中的一些帧。最好将它们放入 CGImage 或 NSImage 中。

我一直在探索 mxflib，但发现自己有点停滞不前。我已经习惯了 Obj-c 中标准视频方法的机制，但这个包是 C++ 的，并不完全是我熟悉的东西。

有没有人有使用这个库或其他类似库的经验？关于该主题的可用信息不多（至少不是我能理解的）。我不太确定从哪里开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T11:55:59.307

实际上，我会说你从一个不太好的方式来看它，因为 mxflib 准备处理标准 MXF 文件，而不是真正的 Avid 文件。

简而言之，要使其工作，您需要根据 Avid 规范扩展库（可以完成！）或使用 AMT，我知道您需要与 Avid 合作才能拥有它。

最后，我认为你被 C++ 困住了！;-)

# ios - 如何将 JSON 地图注释中的字符串传递给 iOS 中的按钮调用？

> ID：11250147
> 
> 赞同：0
> 
> 时间：2012-06-28T17:45:31.467
> 
> 标签：ios, json

如何从我的数组中获取电话对象到我的地图注释调用上的按钮？

我从 JSON 数组中加载引脚就好了，我正在从电话号码中解析出地址。按下呼叫时，如何在按钮上获取正确的电话号码？

```
 for(id key in json) {
            id value = [json objectForKey:key];
            NSString *titlePin = [value valueForKey:@"address"];
            NSString *addressPhone = [value valueForKey:@"title"];
            NSString *latitude = [value valueForKey:@"latitude"];
            NSString *longitude = [value valueForKey:@"longitude"];

            NSArray* foo = [addressPhone componentsSeparatedByString: @":"];
            NSString* justAddress = [foo objectAtIndex: 0];
            NSString* phone = [foo objectAtIndex: 1];

            double myLatitude = [latitude doubleValue];
            double myLongitude = [longitude doubleValue];

            MKCoordinateRegion location1;
            location1.center.latitude =myLatitude;
            location1.center.longitude= myLongitude;
            location1.span.longitudeDelta=0.1;
            location1.span.latitudeDelta =0.1;

            MapAnnotation *ann1 =[[[MapAnnotation alloc] init] autorelease];
            ann1.title=[NSString stringWithFormat:@"%@",titlePin];
            ann1.subtitle=[NSString stringWithFormat:@"%@",justAddress];
//EDIT added this line for part of sollution
     ann1.phone=[NSString stringWithFormat:@"%@",phone];
            ann1.coordinate= location1.center;
            [mapView addAnnotation:ann1];
        }
    }
}

-(MKAnnotationView *) mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation {
    MKPinAnnotationView *MyPin=[[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"current"];
    MyPin.pinColor = MKPinAnnotationColorPurple;

    UIButton *advertButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
    [advertButton addTarget:self action:@selector(button:) forControlEvents:UIControlEventTouchUpInside];

    MyPin.rightCalloutAccessoryView = advertButton;
    MyPin.draggable = NO;
    MyPin.highlighted = YES;
    MyPin.animatesDrop=TRUE;
    MyPin.canShowCallout = YES;

    return MyPin;
}

-(void)button:(id)sender {

    // Call the phone number here!!!!!!!
    //NSLog(@"Button action: %@",phone);

} 
```

地图注释.h

```
#import <Foundation/Foundation.h>
#import <MapKit/MKAnnotation.h>

@interface MapAnnotation : NSObject <MKAnnotation>
{    
    CLLocationCoordinate2D coordinate;
    NSString *title;
    NSString *subtitle;
    NSString *phone;

}

@property (nonatomic, assign) CLLocationCoordinate2D coordinate;
@property (nonatomic, copy) NSString *title;
@property (nonatomic, copy) NSString *subtitle;
@property (nonatomic, copy) NSString *phone;

@end 
```

地图注释.m

```
#import "MapAnnotation.h"

@implementation MapAnnotation

@synthesize coordinate, title, subtitle, phone;

-(void)dealloc
{
    [title release];
    [subtitle release];
    [phone release];
    [super release];
    [super dealloc];
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T17:55:59.733

苹果示例代码的部分代码：MapCallouts

**SFAnnotation.h**

```
#import <MapKit/MapKit.h>

@interface SFAnnotation : NSObject <MKAnnotation>
{
    UIImage *image;
    NSNumber *latitude;
    NSNumber *longitude;
}

@property (nonatomic, retain) UIImage *image;
@property (nonatomic, retain) NSNumber *latitude;
@property (nonatomic, retain) NSNumber *longitude;

@end 
```

**SFAnnotation.m**

```
#import "SFAnnotation.h"

@implementation SFAnnotation 

@synthesize image;
@synthesize latitude;
@synthesize longitude;

- (CLLocationCoordinate2D)coordinate;
{
    CLLocationCoordinate2D theCoordinate;
    theCoordinate.latitude = 37.786996;
    theCoordinate.longitude = -122.419281;
    return theCoordinate; 
}

- (void)dealloc
{
    [image release];
    [super dealloc];
}

- (NSString *)title
{
    return @"San Francisco";
}

// optional
- (NSString *)subtitle
{
    return @"Founded: June 29, 1776";
}

@end 
```

其中标题是调用标题中显示的字符串

编辑 1

```
-(void)button:(id)sender {

UIButton *button = (UIButton *)sender;

MKAnnotationView *annotationView = button.superview.superview;

MapAnnotaion *mapAnnotaion = annotationView.annotation;

NSLog(@"%@", mapAnnotation.phone);

// Call the phone number here!!!!!!!
//NSLog(@"Button action: %@",phone); 
```

}

# google-app-engine - 应用引擎查询

> ID：11250148
> 
> 赞同：0
> 
> 时间：2012-06-28T17:45:32.923
> 
> 标签：google-app-engine, google-cloud-datastore, bigtable

我是 app-engine Datastore 和 NoSQL 世界的新手。我正在开发一个简单的应用程序，用户可以在其中每天申报他/她的费用。每个用户（帐户）都有自己的申报费用。仪表板包含一个简单的 GWT 单元树，其中包含使用声明费用的所有年份，当他/她单击年份时，他会得到所有年份的月份，然后他点击月份并得到所有的日子月，最后点击一天，他得到了当天申报的所有费用。有点像

*2010 年

```
|_ jan
 |_1
 |_2
  |_Food 12d 
  |_Dress 200d 
  |_Fun 150d
  |_ ...

|_ feb 
|_ ... 
```

*2011

|_ 一月

|_ 二月 |_...

我将每个用户（帐户）的费用实体保存在数据存储中，作为所有费用的父帐户。我的费用如下： public class Expense implements Serializable, Comparable {

```
 private String name;
  private double price;
  private Date date;

  public Expense(String name, double price, Date date) {

    this.name = name;
    this.price = price;
    this.date = date;
  }

  public Expense() {
  }

  public String getName() {
    return name;
  }

  public double getPrice() {
    return price;
  }

  public boolean isPriceValid() {
    return price > 0;
  }

  public void setName(String name) {
    this.name = name;
  }

  public void setPrice(double price) {
    this.price = price;
  }

  public Date getDate() {
    return date;
  }

  public void setDate(Date date) {
    this.date = date;
  }

  @Override
  public int compareTo(Expense expense) {
    if (name.equals(expense.getName())) {
      if (date.equals(expense.getDate())) {
        return new Double(price).compareTo(expense.getPrice());
      }
      return date.compareTo(expense.getDate());
    }
    return name.compareTo(expense.getName());
  } 
```

我的问题是：如何查询数据存储中的费用并返回与指定帐户相关的所有不同年份并将它们放入列表或集合或其他任何我可以列出它们的地方？我是否需要获取所有费用实体并对其进行迭代并获得所有不同的年份。听起来不合理。欢迎任何建议，并提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T06:30:10.737

与您的帖子相关的几条评论：

--> 我不会将财务金额存储为 Double。走这条路会导致你遇到舍入错误的大问题。有很多关于这个的帖子。我建议您将其存储为“DollarCent”并将其声明为整数。存储时只需将金额乘以 100，显示时除以 100。

--> 为什么你在 Datastore 中声明你的实体实现了 Serializable ？我会在没有可序列化的情况下存储。

--> 与按年显示数据的具体问题有关，阅读您的问题，我认为除了获取数据之外别无他法。我要做的是让 GAE 订购数据以避免事后订购。使用 Objectify，它只是 q.filter(...).order(-date).order(amount)。

希望这可以帮助 ！

雨果

# java - 通过 Java IO 生成输出的文本文件

> ID：11250150
> 
> 赞同：-1
> 
> 时间：2012-06-28T17:45:44.960
> 
> 标签：java, io

> **可能重复：**
> [从文件夹中读取 java 文件](https://stackoverflow.com/questions/11248847/reading-the-java-files-from-the-folder)

我开发了一个 java 代码，可以从用户选择的文件夹中读取文件。它显示每个文件中有多少行代码，它只读取 .java 文件，最终结果显示在控制台上，我在想输出要显示在控制台上，但连同包含相同信息的文本文件一起获取也存储在桌面上，请告知如何做到这一点，并且生成的文件的名称将基于时间戳假设输出文件的名称为“output06282012”并且该文本文件应包含相同的信息显示在控制台上，这是我的一段代码...

```
 public static void main(String[] args) throws FileNotFoundException {

        JFileChooser chooser = new JFileChooser();
        chooser.setCurrentDirectory(new java.io.File("C:" + File.separator));
        chooser.setDialogTitle("FILES ALONG WITH LINE NUMBERS");
        chooser.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);
        chooser.setAcceptAllFileFilterUsed(false);
                if (chooser.showOpenDialog(null) == JFileChooser.APPROVE_OPTION)
        {      Map<String, Integer> result = new HashMap<String, Integer>();
             File directory = new File(chooser.getSelectedFile().getAbsolutePath()); 
             int totalLineCount = 0;
             File[] files = directory.listFiles(new FilenameFilter(){
                  @Override
                  public boolean accept(File directory, String name) {
                      if(name.endsWith(".java"))
                      return true;
                    else
                      return false;              
                  }
                }
   );
              for (File file : files)
            {
                if (file.isFile())
                {    Scanner scanner = new Scanner(new FileReader(file));
                    int lineCount = 0;
                     try
                    { for (lineCount = 0; scanner.nextLine() != null; lineCount++) ;
                          } catch (NoSuchElementException e)
                    {   result.put(file.getName(), lineCount);
                    totalLineCount += lineCount;  
                                    }

                } }
              System.out.println("*****************************************");
              System.out.println("FILE NAME FOLLOWED BY LOC");
              System.out.println("*****************************************");

            for (Map.Entry<String, Integer> entry : result.entrySet())
            {   System.out.println(entry.getKey() + " ==> " + entry.getValue());
            }
            System.out.println("*****************************************");
            System.out.println("SUM OF FILES SCANNED ==>"+"\t"+result.size()); 
            System.out.println("SUM OF ALL THE LINES ==>"+"\t"+ totalLineCount);

             }     

    } 
```

控制台上显示的输出也将存储在桌面上的文本文件中，请告知如何存储，并且生成的文件的名称将基于时间戳假设输出文件的名称为'output06282012' 并且该文本文件应包含与控制台上显示的相同信息

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T18:05:42.377

我建议您更准确地提出问题。根据我从您的问题中了解到的情况，您想将一些信息写入文本文件。要做到这一点，你所要做的就是——

```
try{

 java.util.Date date= new java.util.Date();
 System.out.println(new Timestamp(date.getTime())); 

BufferedWriter out = new BufferedWriter(new FileWriter("C://Desktop//output"+new Timestamp(date.getTime())+".txt"));

out.write("some information");

out.close; 

}catch(IOException e){
  e.printStackTrace();
 } 
```

因此，在您的代码代替`System.out.println();`语句中，您可以使用`out.write()` 语句写入文本文件。

希望这对您有所帮助。

# python - Python 定位文件路径

> ID：11250152
> 
> 赞同：0
> 
> 时间：2012-06-28T17:45:46.803
> 
> 标签：python

如何告诉python例如，我做了一个程序，它打开一个特定的.scv

在示例中`csv=open('c:\Users\Luka\Desktop\prvi.csv','r')`

但是当我制作一个 .exe 文件时，它需要在所有 PC 上运行。我怎样才能交换那个“Luka”，使它适用于任何在桌面上有 prvi.csv 文件的 PC。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T17:48:48.880

```
import os    
os.path.expanduser(path) 
```

[资源](http://docs.python.org/library/os.path.html#os.path.expanduser)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T18:22:39.543

```
import os 
```

1.  要获取用户名，请使用`os.environ['username']`

2.  要构造文件的路径，如果文件在每台机器的桌面上，请使用

    `csv=open(os.environ['homedrive'] + os.environ['homepath'] + '\\Desktop\\prvi.csv','r')`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T17:51:25.353

查看 `http://docs.python.org/library/getpass.html`

应该

```
>>> import getpass
>>> getpass.getuser() 
```

将用户名存储在变量中并替换为您的路径名。

# java - 从每个元素具有特定概率的数组中随机选择一个元素

> ID：11250154
> 
> 赞同：1
> 
> 时间：2012-06-28T17:46:10.363
> 
> 标签：java

我希望从数组中随机选择元素，其中每个元素都有特定的被选择概率。有没有一种有效的方法来做到这一点，或者可能已经内置在 Java 中的东西可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T17:52:50.310

一种方法是使用这样的加权概率：

```
MyClass getRandomElement(MyClass[] elements)
{
    int totalWeight = 0;
    for (MyClass element : elements)
    {
       totalWeight += element.weight;
    }

    int position = new Random().nextInt(totalWeight);

    for (MyClass element : elements)
    {
       if (position < element.weight)
       {
           return element;
       }
       position -= element.weight;
    }
    throw new IllegalStateException("Should never get here");
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-28T20:54:28.107

一种 O(log(n)) 方法（这是直接从[一个非常相似的问题的答案中](https://stackoverflow.com/a/16490300/1133481)提取的）：

通常的技术是将数组转换为累积和数组：

```
 [10 60 5 25]  --> [10 70 75 100] 
```

在从零到累计总数的范围内选择一个随机数（在示例中：`0 <= x < 100`）。然后，在累积数组上使用[二分法](http://en.wikipedia.org/wiki/Binary_search_algorithm)将索引定位到原始数组中：

```
Random variable x      Index in the Cumulative Array      Value in Original Array
-----------------      -----------------------------      ----------------------
 0 <= x < 10                      0                            10
10 <= x < 70                      1                            60
70 <= x < 75                      2                             5
75 <= x < 100                     3                            25 
```

例如，如果随机变量*x*为 4，则将累积数组二等分给出位置索引 0，对应于原始数组中的 10。

并且，如果随机变量*x*为 72，则将累积数组二等分给出位置索引 2，对应于原始数组中的 5。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T17:51:31.843

一种方法是构建一个数组，其中包含根据需要重复的项目以表示它们的概率。因此，如果数组中的项目 A 的概率为 0.3，项目 B 的概率为 0.7，您可以将它们放入一个包含 10 个项目的数组中，其中 A 重复 3 次，B 重复 7 次。

然后您可以使用随机数生成器从数组中选择一个索引。

另一种解决方案是将每个项目及其概率加载到数据结构中，将每个概率表示为一个范围（即项目 A 可以表示范围 .5-.8），然后从 0-1 生成一个随机值并获取随机数落入的任何范围的值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T17:56:14.290

如果您对选择数组中的元素的概率权重进行编码（可能通过数组中对象的成员变量），您可以执行以下操作：

1.  假设您有权重为整数的元素。
2.  将所有元素的权重相加。
3.  创建一个介于 1 和该权重之间的随机值。
4.  遍历数组，计数直到匹配随机值。

例子：

[1, 3, 2, 5, 2] 总和 = 13 随机掷骰 = 5

element[0] ..（我们数到了1）

element[1] ..（我们数到了 4）

element[2] .. (我们已经数到 6) 6 > 5 因此我们选择 2。

现在，这需要 O(n) 时间，其中 n 是数组中值的数量。为了提高效率，更好的方法是将值放置在值指示的位置。这有点像：

[a，b，b，b，c，c，d，d，d，d，d，e，e]。

查找[计数排序](http://en.wikipedia.org/wiki/Counting_sort)以获取更多详细信息；它允许 O(1) 访问。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-13T11:15:28.763

我个人喜欢使用 NavigableMap 的方法。这种方法看起来像这样

```
interface Weighted {
    public double getWeight();
}

class UnbalancedRandomizer <E extends Weighted> {
    private NavigableMap<Double, E> container = new TreeMap<>();

    UnbalancedRandomizer(E... elements) {
        for (E element : elements) {
            add(element);
        }
    }

    public void add(E element) {
        double offset = container.isEmpty() ? 0.0 : container.lastEntry().getKey();
        container.put(offset + element.getWeight(), element);
    }

    public E getRandom() {
        double rolled = container.lastEntry().getKey() * Math.random();
        return container.ceilingEntry(rolled).getValue();
    }
} 
```

但是，当您想要删除元素或更改元素的权重时，这可能会变得有点棘手。毕竟我相信在大多数用例中，只有 add 才是真正相关的。这些主要是发生事件的查找表（例如老虎机符号机会）或用于对重量/大小/年龄等属性进行分组的匹配器。

示例用法

```
class Foo implements Weighted {
    private double weight;
    private String name;

    public Foo(double weight, String name) {
        this.weight = weight;
        this.name = name;
    }

    @Override
    public double getWeight() {
        return weight;
    }

    @Override
    public String toString() {
        return "Symbol{" +
                "weight=" + weight +
                ", name='" + name + '\'' +
                '}';
    }

    public static void main(String... args) {
        UnbalancedRandomizer<Foo> randomizer = new UnbalancedRandomizer(
                new Foo(10, "A"),
                new Foo(30, "B"),
                new Foo(50, "C"),
                new Foo(50, "D")
        );

        Stream.generate(randomizer::getRandom).limit(50).forEach(System.out::println);
    }
} 
```

示例输出

```
Symbol{weight=50.0, name='C'}
Symbol{weight=50.0, name='C'}
Symbol{weight=50.0, name='D'}
Symbol{weight=50.0, name='C'}
Symbol{weight=30.0, name='B'}
Symbol{weight=50.0, name='C'}
Symbol{weight=50.0, name='C'}
Symbol{weight=50.0, name='C'}
Symbol{weight=50.0, name='D'}
Symbol{weight=50.0, name='D'}
Symbol{weight=50.0, name='D'}
Symbol{weight=50.0, name='D'}
Symbol{weight=50.0, name='C'}
Symbol{weight=50.0, name='C'}
Symbol{weight=50.0, name='D'}
Symbol{weight=50.0, name='C'}
Symbol{weight=50.0, name='C'}
Symbol{weight=50.0, name='D'}
Symbol{weight=50.0, name='C'}
Symbol{weight=50.0, name='C'}
Symbol{weight=50.0, name='C'}
Symbol{weight=50.0, name='C'}
Symbol{weight=30.0, name='B'}
Symbol{weight=50.0, name='C'}
Symbol{weight=50.0, name='C'}
Symbol{weight=50.0, name='C'}
Symbol{weight=30.0, name='B'}
Symbol{weight=50.0, name='D'}
Symbol{weight=30.0, name='B'}
Symbol{weight=50.0, name='C'}
Symbol{weight=50.0, name='C'}
Symbol{weight=30.0, name='B'}
Symbol{weight=50.0, name='C'}
Symbol{weight=10.0, name='A'}
Symbol{weight=30.0, name='B'}
Symbol{weight=30.0, name='B'}
Symbol{weight=50.0, name='D'}
Symbol{weight=50.0, name='C'}
Symbol{weight=30.0, name='B'}
Symbol{weight=10.0, name='A'}
Symbol{weight=50.0, name='C'}
Symbol{weight=50.0, name='C'}
Symbol{weight=50.0, name='D'}
Symbol{weight=50.0, name='D'}
Symbol{weight=30.0, name='B'}
Symbol{weight=50.0, name='D'}
Symbol{weight=50.0, name='C'}
Symbol{weight=50.0, name='D'}
Symbol{weight=10.0, name='A'}
Symbol{weight=50.0, name='D'} 
```

# apache-flex - Flex SWFObject 嵌入

> ID：11250156
> 
> 赞同：0
> 
> 时间：2012-06-28T17:46:16.243
> 
> 标签：apache-flex, swfobject

我正在使用 swfobject.js 脚本文件将 SWF 动态嵌入到我的 aspx 页面中。

从这个[站点](http://code.google.com/p/swfobject/wiki/documentation)，我按照代码显示为：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
  <head>
    <title>SWFObject dynamic embed - step 3</title>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
    <script type="text/javascript" src="swfobject.js"></script>

    <script type="text/javascript">
    swfobject.embedSWF("myContent.swf", "myContent", "100%", "95%", "9.0.0");
    </script>

  </head>
  <body>
    <div id="myContent">
      <p>Alternative content</p>
    </div>
  </body>
</html> 
```

如果我在 IE 中浏览页面，会显示整个 flash swf，而在 Chrome 上，它只显示部分（似乎没有使用 95% 的高度）。

我查看了 IE 和 Chrome 实现的源代码，它们完全相同。有什么建议吗？

# c# - Windows 服务中的方法调用顺序

> ID：11250159
> 
> 赞同：10
> 
> 时间：2012-06-28T17:46:24.810
> 
> 标签：c#, windows-services

Windows 服务中方法调用的顺序是什么？我们遇到了时间问题，我认为这是由于构造函数完成处理所需的时间太长。

这是一个类似的问题，我认为我们遇到 [错误 1053 服务没有响应启动或控制请求](https://stackoverflow.com/questions/1673545/c-sharp-windows-service-error-1053-the-service-did-not-respond-to-the-start-or)

但是，我们想知道调用 Main、OnStart、InitializeComponent 等方法的顺序和时间和/或何时调用它们。

同样， OnStart 方法是否是放置所有处理的最佳位置？

**解决方案

花了一些时间做一个测试服务并测试了下面的响应，发现超时来自 Main 方法处理以及 Main 方法中调用的构造函数导致它超时。将所有内容移至 OnStart 以及仅关闭一个线程似乎可行。详情在这里。[http://www.adamthings.com/post/2012/06/28/error-1053-the-service-did-not-respond-to-the-start-or-control-request-in-a-timely-时尚/](http://www.adamthings.com/post/2012/06/28/error-1053-the-service-did-not-respond-to-the-start-or-control-request-in-a-timely-fashion/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T17:55:04.163

不要阻塞在`OnStart()`方法中。听起来你正在这样做。

在方法中创建一个单独的线程`OnStart()`并离开那里。

我没有对此进行测试，但类似于：

```
protected override void OnStart(string[] args)
{
    var worker = new Thread(DoWork);
    worker.IsBackground = false;
    worker.Start();

    base.OnStart(args);
}

private void DoWork()
{
    while (!_stopRequested)  // (set this flag in the OnStop() method)
    {
        // processing goes here
    }
} 
```

要回答有关事件顺序的问题，只需在每个方法中设置 Trace 语句。我不确定这会有多大帮助。您收到的消息（服务未响应启动请求......）表明在一个应该相对快速执行的方法中阻塞（或花费太长时间）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-28T17:50:28.100

我相信订单是

*   `Main`（[`Main`几乎是 Windows 中每个应用程序的入口点，不排除服务](http://msdn.microsoft.com/en-us/library/windows/desktop/ms685477%28v=vs.85%29.aspx)）
*   （`Main`应该打电话）`InitializeComponent`
*   `OnStart`（这真的是按需调用......基本上是在调用 Start 时......因此为什么`Main`会`InitializeComponent`提前发生）

至于将代码放在哪里，我建议将任何可以缓存的`Main`代码放在`OnStart`. 但是，您不应该在 中进行任何实际处理`OnStart`，而只是初始化。使用单独的线程来完成大部分逻辑。

此外，[MSDN 对此很有帮助](http://msdn.microsoft.com/en-us/library/5xh5cfw0)

# css - Jquery Navigation - 折叠/展开

> ID：11250160
> 
> 赞同：1
> 
> 时间：2012-06-28T17:46:28.037
> 
> 标签：css, jquery

我试图让我的 jquery 在加载时显示一个折叠的菜单。现在它正在扩展它。改变它的最佳方法是什么？

下面的代码是 magento 的分层导航。

```
 <?php if($this->canShowBlock()): ?>
            <div class="block block-layered-nav">
                <div class="block-title">
                    <strong><span class="catalog-layer-view-heading"><?php echo $this->__('BROWSE BY') ?></span></strong>
                </div>
                <div class="block-content">
                    <?php echo $this->getStateHtml() ?>
                    <?php if($this->canShowOptions()): ?>
                        <dl id="narrow-by-list">
                            <?php $_filters = $this->getFilters() ?>
                            <?php $i=0; foreach ($_filters as $_filter): $i++; ?>
                            <?php if($_filter->getItemsCount()): ?>
                                <dt id="filterlabel<?php echo $i;?>"><?php echo $this->__($_filter->getName()) ?> <span class="openthis openthis<?php echo $i;?>">(open)</span></dt>
                                <dd><?php echo $_filter->getHtml() ?></dd>

                                <script type="text/javascript" >        
                                    jQuery('#filterlabel<?php echo $i;?>').each(function(){

                                        jQuery('.openthis<?php echo $i;?>').css({'display':'block'});

                                        jQuery(this).toggle(function(){
                                            jQuery(this).addClass('hided').next().slideUp(200);
                                            jQuery('.openthis<?php echo $i;?>').css({'display':'none'});
                                        },function(){
                                            jQuery(this).removeClass('hided').next().slideDown(200);
                                            jQuery('.openthis<?php echo $i;?>').css({'display':'block'});
                                        })
                                    });
                                </script>                     
                            <?php endif; ?>
                            <?php endforeach; ?>
                        </dl>
                        <script type="text/javascript">decorateDataList('narrow-by-list')</script>
                    <?php endif; ?>
                </div>
            </div>
            <?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T17:50:25.273

您可以使用内置的 slideToggle 功能：

```
$('#clickme').click(function() {
  $('#element').slideToggle('fast', function() {
    // Animation complete.
  });
}); 
```

高温高压

# matlab - MATLAB玫瑰图：增加径向增量？

> ID：11250166
> 
> 赞同：3
> 
> 时间：2012-06-28T17:47:00.280
> 
> 标签：matlab, graphics, plot, histogram, polar-coordinates

我正在使用rose2.m 制作许多角度直方图。我希望显示每个箱中元素数量的比例范围在 0-50 之间，以 10 为增量递增，对于所有地块，即使特定地块上的最大元素数小于 50。有谁知道如何请问我可以这样做吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T18:55:58.983

[此问题与此](https://stackoverflow.com/questions/226315/fixing-the-radial-axis-on-matlab-polar-plots)问题相同，但您正在查看`rose2`.

我能够使用以下代码将最大值锁定为 50。首先，我在 50 处绘制一个空点，然后`hold on`锁定该图。`rose2`然后使用这些界限。

编码：

```
x = (rand(100,1)*pi);

maxHistogramValue = 50;

figure(44);
clf
% Set the max value to maxHistogramValue:
polar(0, maxHistogramValue,'-k')
hold on;

% Now use rose2:
rose2(x); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T02:24:30.600

这是另一个示例（基于[@Steve](https://stackoverflow.com/a/11251140/97160)的想法）：

```
%# data and angular histogram
x = rand(400,1) .* 2*pi;
[t,r] = rose(x);                %# this does not generate a plot

%# set plot's max radial ticks
figure
rMax = 50;
h = polar(0, rMax);
delete(h)
set(gca, 'Nextplot','add')

%# draw patches instead of lines: polar(t,r)
[x,y] = pol2cart(t,r);
h = patch(reshape(x,4,[]), reshape(y,4,[]), 'b');
alpha(h, 0.5)       %# note: this switches to OpenGL renderer 
```

![截屏](../Images/ac09f34eb57bb29ede1d1050e721d9d2.png)

这样你就可以控制最大半径，尽管你不能真正控制步数（POLAR 函数总是喜欢大约 5 个径向刻度；请参阅源代码）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T18:57:16.680

我不完全清楚rose2.m 是什么，但我想如果你有必要的数据，你可以设置自己的比例/图例。

听起来您有一个角度数组/向量，范围在 0 到 50 之间。我们现在称它为angleArray。

要获取落入每个 bin 的元素数量（10 个单位增量中的 0-50），您可以使用以下代码行：

```
binCounts = histc(angleArray, 0:10:50); 
```

binCounts 将是 1 x n，其中 n 是长度（0:10:50），并且具有每个 bin 的值的数量的计数。然后可以使用该数据来填充您的规模。

# c# - 如何调试 SessionStateModule/REQUEST_AQUIRE_STATE 对我的一半请求花费 > 100 秒？

> ID：11250167
> 
> 赞同：6
> 
> 时间：2012-06-28T17:47:03.057
> 
> 标签：c#, asp.net, .net, iis, iis-7.5

这在最近几天开始发生；可能是因为我安装了 Visual Studio 2012。它目前只发生在我的机器上（我的同事都还在 VS 2010 上），但我希望卸载 VS 2012 看看是否有影响。

大约 50% 的 Web 请求在 SessionStateModule/REQUEST_AQUIRE_STATE 中挂起大约 100 秒（然后页面成功完成）。

ANTS Profiler 一直报告为“等待同步”，并在一些 IIS 线程回调中提供堆栈跟踪（我们的代码都没有；遗憾的是我手头没有信息）。

我为所有请求启用了 IIS Failed Request Tracing，并重新加载了我们应用程序的同一页面 10 次。请求 3、5、7、9 都花费了 > 100 秒，而其他请求花费了 < 5 秒。

我们正在使用 In Process 会话，因此没有任何内容通过网络或被序列化。据我所知，在发生这种情况之前，我们的代码都没有运行过。

如何获得有关调试问题的更多信息？

[![IIS 失败的请求跟踪屏幕截图](../Images/e0160a1b9accbfe4165bb2db12da1f58.png)](https://i.imgur.com/dCs28.png)

可能相关：

[即使在调用 abort (jQuery) 之后，浏览器也会等待 ajax 调用完成](https://stackoverflow.com/questions/941889/browser-waits-for-ajax-call-to-complete-even-after-abort-has-been-called-jquery)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T13:52:24.633

这是 .NET 4.5 中的一个错误；请参阅此页面上的“问题 6”：

[http://support.microsoft.com/kb/2828841/en-us](http://support.microsoft.com/kb/2828841/en-us)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T12:44:42.807

听起来 RC .NET 4.5 中可能存在错误。首先我会尝试卸载。否则，出于故障排除的目的，您可以使用以下文章创建自己的会话状态模块处理程序，也许您将能够看到是什么在您的应用程序中触发了会话模块。

[http://msdn.microsoft.com/en-us/library/system.web.sessionstate.sessionstateutility.aspx#Y969](http://msdn.microsoft.com/en-us/library/system.web.sessionstate.sessionstateutility.aspx#Y969)

# eclipse - 如何将 Maven 依赖项（jar 文件）从一个 Java 项目复制到另一个动态 Web 项目的 WEB-INF/lib 文件夹？

> ID：11250183
> 
> 赞同：1
> 
> 时间：2012-06-28T17:48:08.907
> 
> 标签：eclipse, maven, jakarta-ee, jar, dependency-management

我正在尝试在我的另一个 Web 项目中使用名为“Search”的 Java 项目。我将 Search 项目导出为 jar 并添加到我的 Web 项目的 WEB-INF/lib 文件夹中。问题是 Search 项目对 Accumulo、Hadoop、Zookeeper 等有许多依赖项。那么如何将这些 maven 依赖项/jar 文件从 Search 项目复制到我的 Web 应用程序的 WEB-INF/lib 文件夹中，这样我才能让一切正常工作?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T17:51:07.583

我会简单地将 Accumulo、Hadoop 等用作项目中的常规依赖项。所以它们会自动打包到你的war项目中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T18:02:52.743

由于您使用的是 Maven，因此您需要做的就是将“搜索”项目作为[依赖](http://maven.apache.org/pom.html#Dependencies)项添加到您的 Web 项目中。Maven 将自动为您解决任何[传递](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Transitive_Dependencies)依赖关系，如 Accumolo、Hadoop、Zookeper 等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-06-29T15:09:33.510

可能还有其他方法，但我的方法是。

1.  在您的项目中单击 Maven 依赖项以展开。
2.  选择你需要的 Jar 文件并复制(Cntrl+C)
3.  将其粘贴到 Notepad++ 或 Eclipse 中（任何类型的文件）

[现在你会得到这样的东西](https://i.stack.imgur.com/82MLn.png)

4.  清除文件系统中的下载文件夹。因为您是从浏览器下载所有 jar 文件，而不是导航到文件系统中的每个文件夹。

5.  只需逐行复制到您的浏览器 URL 选项卡。它将被下载到下载中，您可以从中轻松复制到 WEB-INF/lib 文件夹。

注意：您可以通过以下方式自动执行此过程

*   编写 Java 代码(java.io)
*   创建字符串数组或逐行读取文本文件
*   通过迭代创建文件复制到文件夹的数组。

希望它会有所帮助。

[手动下载](https://i.stack.imgur.com/8FwUf.png)

# c# - 我想在代码后面的 UL 标记内添加图表控件

> ID：11250185
> 
> 赞同：0
> 
> 时间：2012-06-28T17:48:10.310
> 
> 标签：c#, asp.net

我想通过代码在我的 ul 标签中动态添加图表控件。我怎样才能做到这一点？这是我对anythingslider javascript 的声明

```
<script type="text/javascript">
     var slider2 = ['Machines', 'Trend','test','test2','test3'];
     function formatText(index, panel) {
         return slider2[index - 1];
     }

     $(function () {
         $('#slider2').anythingSlider({
             width: 800,       // if resizeContent is false, this is the default width if panel size is not defined
             height: 400,       // if resizeContent is false, this is the default height if panel size is not defined
             buildArrows: true,
             resizeContents: false,     // If true, solitary images/objects in the panel will expand to fit the viewport
             autoPlay: true,     // This turns off the entire slideshow FUNCTIONALY, not just if it starts running or not
             navigationFormatter: formatText, // Format navigation labels with text
             forwardText: "&raquo;",
             backText: "&laquo;"
         })
     });
</script> 
```

编辑：这是带有新添加代码的页面的源代码：

```
<ul id="MainContent_slider2">
<img id="MainContent_PlantMachineChart" src="/ChartImg.axd?i=chart_93717cef16e84387b35d83bdd04da217_0.png&amp;g=898a170672b0476ca6f6d49173c231b1" alt="" usemap="#MainContent_PlantMachineChartImageMap"    style="height:400px;width:868px;border-width:0px;" />

<map name="MainContent_PlantMachineChartImageMap"  id="MainContent_PlantMachineChartImageMap">
 </map>

 <li><img id="MainContent_ctl01" src="/ChartImg.axd?    i=chart_93717cef16e84387b35d83bdd04da217_1.png&amp;g=23020f9898ab40898782de3234fae6e4"    alt="" style="height:400px;width:868px;border-width:0px;" /></li'><li'><img    id="MainContent_ctl03" src="/ChartImg.axd?   i=chart_93717cef16e84387b35d83bdd04da217_2.png&amp;g=aa749f6279484859a7892f1f117fbd1c"    alt="" style="height:400px;width:868px;border-width:0px;" /></li></ul> 
```

它列出了第一个图表（我在这里省略）的所有数据点，这些数据点不是动态添加的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T17:50:53.107

我真的不知道你为什么要这样做，但你可以制作 ul`runat="server"`并向其中添加控件，如下所示：

**HTML**：

```
<ul runat="server" ID="ul_Charts"></ul> 
```

**服务器端**：

```
ul_Charts.Controls.Add(yourControl); 
```

**编辑**：您需要以编程方式创建图表并将图表控件插入到您的元素中，如下所示：

```
// Create a pie chart
Chart chart = new Chart();

// Choose chart type and add series info
Series series = new Series("Default");
series.ChartType = SeriesChartType.Pie;
chart.Series.Add(series);

// Create chart legend
Legend legend = new Legend();
chart.Legends.Add(legend);

// Define the chart area
ChartArea chartArea = new ChartArea();
ChartArea3DStyle areaStyle = new ChartArea3DStyle(chartArea);
areaStyle.Rotation = 0;
chart.ChartAreas.Add(chartArea);

Axis yAxis = new Axis(chartArea, AxisName.Y);
Axis xAxis = new Axis(chartArea, AxisName.X);

// Bind the data to the chart
chart.Series["Default"].Points.DataBindXY(xValues, yValues);

// Add chart
HtmlGenericControl li = new HtmlGenericControl("li");
li.Controls.Add(chart);
ul_Charts.Controls.Add(li); 
```

这个例子是在[asp.net 论坛上](http://forums.asp.net/t/1354675.aspx/1)找到的，并做了一些调整以适应您的场景。还有其他选项，但这应该在列表中给出您需要做什么的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T17:50:43.057

您可以在 aspx 中使用占位符，然后在运行时将控件加载到其中。

# php - 对数千个页面进行最快的 PHP 网页缓存的建议？

> ID：11250190
> 
> 赞同：2
> 
> 时间：2012-06-28T17:48:31.550
> 
> 标签：php, caching, mongodb, redis, flat-file

我正在寻找缓存数千个网页的最佳解决方案。现在我正在使用平面文件，在有数千个平面文件之前效果很好，然后在访问文件缓存时整个文件系统会变慢（很多）（在 OpenVZ 下使用 EXT3 在 CentOS 上运行）。我想探索其他选项，例如 Redis 或 MongoDB，但它们会更快吗？如果没有，最好的建议是什么？

我的系统会为每个网站动态创建超过 40K 的页面，因此做内存缓存也不可行。

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T17:56:39.047

文件缓存很好，你只需要聪明一点。我的目标是将目录保持在 500 个或更少的条目。有 40k 个条目，只需对 url 进行哈希处理并使用哈希的前 2 个字节，就可以得到 255 个文件夹，每个文件夹平均应包含约 150 个文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T17:52:01.047

好吧，我知道 StackExchange 在 CentOS 上使用 Redis，所以从 LAMP 堆栈中它应该会更好。Redis 似乎针对这类事情进行了优化，而 MongoDB 更像是一个实际的数据库。您也可以使用 memcached。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T17:54:27.940

我建议将文件分散在子目录中，可能按缓存文件名称的 md5 散列的前两个或三个字符（或文件名的前两个或五个字符）分组。这减轻了文件系统的负担。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-30T00:45:19.663

您是否考虑过使用 Varnish 之类的东西？根据您缓存的内容以及失效的复杂程度，它可能对您有用。您将动态创建页面并让代理层处理任何重复的请求。

[https://www.varnish-cache.org/](https://www.varnish-cache.org/)

# c# - 即使我单击 C# 中的另一个控件，也使表单始终获得焦点

> ID：11250194
> 
> 赞同：2
> 
> 时间：2012-06-28T17:49:17.133
> 
> 标签：c#, forms, button, focus, picturebox

我用 C# 制作了一个具有多种形式的游戏

游戏使用图片框和按钮我使用带有箭头键的表单中的按键事件来使图片框移动...

当我单击显示隐藏组框的按钮时会出现此问题。按钮获得焦点，当我按下按键移动图片框时，图片框不会移动。但是当我按下按键时，按钮中的对焦环会移动到另一个按钮。

我尝试单击我的表单，在按钮单击中设置 this.focus() 和 this.select 但以上没有任何效果..

请帮帮我，这个游戏必须在这个星期六完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T17:58:10.043

听起来像家庭作业:)

```
Try setting Form.KeyPreview = true; 
```

这将捕获您所有的按键，无论哪个控件具有焦点。

# wpf - 如何更新在 wpf 中动态创建的文本框中的文本

> ID：11250201
> 
> 赞同：0
> 
> 时间：2012-06-28T17:49:42.640
> 
> 标签：wpf, textbox

在 WPF 中，我`TextBoxes`动态创建了几个，然后，我去查找`Canvas`我在其中创建它们的所有子对象。当我搜索时，我可以获得文本框的名称，但是如何更改文本框中的文本？

我试过了：

```
// oText is the visual object I found when searching for the textbox
oText.Text = "Software" // doesnt work.
oText.SetValue(control.Text) // doesnt work, because there is no .text property 
```

即使我可以调试它，并将鼠标悬停在`oText`对象上，向下滚动并发现该`Text`属性设置为`"Software"`，但我无法像我一样阅读它

```
oText.GetValue(control.width) 
```

我们如何读取这个动态创建的文本框的 WPF 中的文本值？

这是代码：

我在 XAML 中创建了一个画布：

```
 <Canvas x:Name="Can1" Height="700" Width="874">

        </Canvas> 
```

然后，我制作文本框并将它们放在画布上......

```
 For i As Integer = 0 To VisualTreeHelper.GetChildrenCount(Can1) - 1
        ' Retrieve child visual at specified index value.
        Dim childVisual As Visual = CType(VisualTreeHelper.GetChild(Can1, i), Visual)
        ' Return the offset vector for the TextBlock object.
        Dim vector As Vector = VisualTreeHelper.GetOffset(childVisual)
        ' Convert the vector to a point value.
        Dim currentPoint As New Point(VisualOffset.X, VisualOffset.Y)
        x = Canvas.GetLeft(childVisual)
        y = Canvas.GetTop(childVisual)

        A = childVisual.GetValue(Control.ActualHeightProperty)
        B = childVisual.GetValue(Control.ActualWidthProperty)     

        Dim myTextbox As New TextBox
        Dim c As Int16
        myTextbox.Width = B
        myTextbox.Text = "Software"
        myTextbox.Name = "TextB" & i.ToString
        Can1.Children.Add(myTextbox)
        Canvas.SetTop(myTextbox, y + A)
        Canvas.SetLeft(myTextbox, x)
        Canvas.SetZIndex(myTextbox, 0)
next i 
```

然后，我使用主窗口上的按钮调用 GetData...

```
Private Sub GetData(ByVal sender As System.Object, ByVal e As System.Windows.RoutedEventArgs)
    Dim iCount As Int16
    Dim oText As Visual
    Dim sTemp As String
    Dim cs = My.Settings.ConnectionString
    Dim oConn = New SqlConnection(cs)
    Dim cmd As New SqlCommand()
    Text1.text = ""
    cmd.Connection = oConn
    Try
        oConn.Open()
        cmd.CommandText = "select top 5 finumber from fiheading "
        Dim myReader As SqlDataReader = cmd.ExecuteReader(CommandBehavior.CloseConnection)
        While myReader.Read()
            iCount += 1
            oText = FindChild(Can1, "TextB" & iCount.ToString)
            'sTemp = oText.GetValue(Control.NameProperty)
            'oText.text = (myReader.GetString(0))
            'oText.SetValue(Control.text)

        End While
        myReader.Close()
    Catch ex As Exception
        MsgBox(ex.Message)

    End Try

    Try
        oConn.Close()
    Catch ex As Exception
        MsgBox(ex.Message)

    End Try

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T19:55:30.467

`oText`被定义为 a `Visual`，它没有`Text`属性

将其更改为 a`TextBox`并将结果`FindChild`转换为 a `TextBox`，它应该可以正常工作

```
Dim oText As TextBox
...

oText = CType(FindChild(Can1, "TextB" & iCount.ToString), TextBox) 
```

# svn - 需要在 HeartInternet.co.uk 虚拟主机上安装 SVN

> ID：11250203
> 
> 赞同：0
> 
> 时间：2012-06-28T17:49:43.013
> 
> 标签：svn, ssh, backup

我是一家小型网页设计机构的所有者，我想通过使用 Subversion 来保护我们的备份。我的想法是在线备份所有内容，并能够恢复我们已经完成的旧版本网站等。

我在 HeartInternet.co.uk 有一个经销商计划，它具有 SSH 访问权限。我怎样才能在上面安装SVN？

总的来说，我对 Linux 和服务器知之甚少，这让我的生活更加艰难。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T13:18:49.353

[这](http://wiki.paskvil.com/index.php/Setup_a_SVN_Server_on_a_Shared_Hosting)是一篇非常简短直接的文章，我建议您从那里开始，如果您遇到困难再回来 :)

注意：我没有写链接的文章，但过去对我有帮助。

# ios - 键盘出现后选定的 tableviewCell 未完全显示

> ID：11250204
> 
> 赞同：0
> 
> 时间：2012-06-28T17:49:43.887
> 
> 标签：ios, uitableview, uitextview

我在自定义 UITableViewCell 中有一个 UiTextView。当我选择一个文本视图时出现键盘。

![在此处输入图像描述](../Images/bf324155259cdff4e086e8607cad9fd3.png)

但有时会出现奇怪的行为：

![在此处输入图像描述](../Images/053afd12b213ac051bbe08d552f9e390.png)

键盘出现后，选定的 tableviewCell 未完全显示。有任何想法吗？我花了2天时间解决了这个问题，请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T18:03:08.007

您可以在显示键盘时向上移动视图

```
//Add to viewDidLoad
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardDidShow:) name:UIKeyboardWillShowNotification object:nil];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardDidHide:) name:UIKeyboardWillHideNotification object:nil];

//Add to View Controller

//Pushes the view up if one of the table forms is selected for editing
- (void) keyboardDidShow:(NSNotification *)aNotification
{
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.25];
    self.view.center = CGPointMake(self.view.center.x, self.view.center.y-moveAmount);
    [UIView commitAnimations];
    isRaised = [NSNumber numberWithBool:YES];
}

//Pushes view back down
- (void) keyboardDidHide:(NSNotification *)aNotification
{
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.25];
    self.view.center = CGPointMake(self.view.center.x, self.view.center.y+moveAmount);
    [UIView commitAnimations];
    isRaised = [NSNumber numberWithBool:NO];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T15:55:39.647

总之，我通过观察 tableView.ContentOffset 值解决了这个问题。

```
- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context
{
    if (_isScrollingDownLocked) {
        CGPoint newPoint = (CGPoint)[[change valueForKey:NSKeyValueChangeNewKey ] CGPointValue];
        CGPoint oldPoint = (CGPoint)[[change objectForKey:NSKeyValueChangeOldKey] CGPointValue];
        if (newPoint.y<oldPoint.y) {
            CGPoint point = CGPointMake(oldPoint.x, oldPoint.y);
            [self removeObserver:self forKeyPath:@"self.tableView.contentOffset"];
            self.tableView.contentOffset = point;
            [self addObserver:self forKeyPath:@"self.tableView.contentOffset"    options:NSKeyValueObservingOptionNew|NSKeyValueObservingOptionOld context:nil];
        }
    }
} 
```

# objective-c - 如何创建一个具有“拉动刷新”的泛型类以由 UITableView（组件）扩展

> ID：11250206
> 
> 赞同：1
> 
> 时间：2012-06-28T17:49:49.047
> 
> 标签：objective-c, ios, xcode

我有一个带有 UITableView 组件的 UIView，我想用“拉动刷新”方法创建一个类，然后将它用于我拥有的所有表视图。我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T17:53:05.083

周围有一些项目实现了拉动刷新机制。你应该看看他们。

例子：

[https://github.com/leah/PullToRefresh](https://github.com/leah/PullToRefresh)

[https://github.com/enormego/EGOTableViewPullRefresh/](https://github.com/enormego/EGOTableViewPullRefresh/)

# mysql - MySQL：查询不返回正确的结果

> ID：11250209
> 
> 赞同：2
> 
> 时间：2012-06-28T17:49:56.320
> 
> 标签：mysql

我有两个表**services**和**member_services**

![服务](../Images/7af284869f9607b3812df4c0c03d0491.png)

![在此处输入图像描述](../Images/bcb1590571e15472a8f0f03ecbc80496.png)

从**member_services** where **member_type_id = 1**我写的获取记录

```
SELECT s.* FROM member_services ms 
LEFT JOIN services s 
ON s.ser_id = ms.ser_id 
WHERE ms.mem_id = 1 && ms.pro_id = 9 && ms.member_type_id = 1 
```

但它返回

![在此处输入图像描述](../Images/c7617bd64abc0719c5f4d2d6fbc3ce4c.png)

为什么它返回带有**member_type_id 2**的记录？

我在查询中犯了什么错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T18:00:10.460

试试这个：

```
SELECT s.* FROM member_services ms LEFT JOIN services s 
ON ms.ser_id = s.ser_id AND ms.member_type_id = s.member_type_id
WHERE ms.mem_id = 1 AND ms.pro_id = 9 AND ms.member_type_id = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T18:04:17.650

你的查询没问题。它返回**member_type_id = 2**的原因是因为您在名为 member_type_id 的**服务中有一行，它与****member_services**中的 member_type_id 不对应。

这里真正的问题是两个表之间的数据冲突。如果它们应该是相同的数据，最好使用外键链接两者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T18:11:13.460

试试这个查询：

```
SELECT s.* FROM member_services ms 
LEFT JOIN services s 
USING(ser_id,member_type_id) 
WHERE ms.mem_id = 1 && ms.pro_id = 9 && s.member_type_id = 1 
```

我为**USING()**更改了 ON，因为这些字段的名称相同，这是一种快捷方式。

另一个区别是使用两个字段进行连接（如做`ON s.ser_id = ms.ser_id AND s.member_type_id = ms.member_type_id`）。这样过滤器就可以正确应用。

最后一个更改是在`WHERE`子句上，过滤`member_type_id = 1`服务表而不是在`member_services`表上进行。我的意思是将 ms 别名更改为 s)。

我希望它有所帮助。如果您需要进一步的帮助，请告诉我。

# excel - 如何将范围设置为 UsedRange WITHOUT 第一行 + 另一列的交集？

> ID：11250216
> 
> 赞同：0
> 
> 时间：2012-06-28T17:50:11.807
> 
> 标签：excel, vba, set, intersect, header-row

我有一个范围变量“rng”。我需要将 rng 设置为：（1）工作表上的 usedrange 不包括第一列，以及（2）列号 6，例如

目前，我有：

```
Set rng = Intersect(.UsedRange, .Columns(6)).SpecialCells(xlCellTypeVisible)
' Because the range is filtered and i only need to select visible cells 
```

但这会返回一列，其中也有标题行。我只需要列中的数字。

（1）任何快速的功能/方法/属性来做到这一点？(2) 我如何找到这个范围的大小？rng.rows.count 总是返回 ONE，即使 rng 中有多个单元格。我应该使用 rng.count 吗？有什么不同？

非常感谢你，

铝

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T19:38:39.877

我看到您已经接受了一个答案，但我看不出它如何满足您的要求，即它不包括标题行。这是我的解决方案。它还回答了您关于如何获取行数的问题 2：

```
Sub GetRangeAndCountRows()
Dim rng As Excel.Range
Dim rngArea As Excel.Range
Dim RowCount As Long

With ActiveSheet
    Set rng = Intersect(.UsedRange.Resize(.UsedRange.Rows.Count - 1, .UsedRange.Columns.Count).Offset(1, 0), .Columns(6)).SpecialCells(xlCellTypeVisible)
    Debug.Print rng.Address
    For Each rngArea In rng.Areas
        RowCount = RowCount + rngArea.Rows.Count
    Next rngArea
    Debug.Print RowCount
End With
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T18:25:47.597

当然，蒂姆上面的评论效果很好。

这个答案是为了与上面的代码保持一致，也可能更容易阅读。

添加**.UsedRange.Offset(,1)**而不是**.UsedRange**以忽略 Interesect 公式中 UsedRange 中的第一列。：

```
Set rng = Intersect(.UsedRange.Offset(,1), .Columns(6)).SpecialCells(xlCellTypeVisible) 
```

# vb.net - 如何使用VB点击网页中的按钮？

> ID：11250218
> 
> 赞同：0
> 
> 时间：2012-06-28T17:50:14.777
> 
> 标签：vb.net, gwt, vbscript

我正在创建一个单击网页上的按钮的 VB 脚本。我在他们提交表单的地方看到了诸如此类的[答案。](https://stackoverflow.com/questions/8637899/open-a-web-page-and-click-a-button-in-vb-script)我不希望这样，因为我需要使用脚本单击按钮，以便使用通常的单击按钮工作流程。

顺便说一句，我正在使用 GWT 和 SmartClient，这使得它变得更加复杂，因为 ID 被混淆了。为了克服这个问题，我使用 GWT DEBUG_ID_PREFIX

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T00:15:53.487

如果您提供一个 GWT 按钮示例，以便像我这样不熟悉 GWT 的人获得帮助，那就太好了。我找到了一个包含 GWT 按钮（希望）的页面，并在此基础上写了一些东西。
考虑以下代码。

```
Sub WaitUntil(varObj)
    On Error Resume Next
    Do
        WScript.Sleep 100
    Loop Until Not varObj Is Nothing
    WScript.Sleep 500
End Sub

Dim IE
Set IE = CreateObject("InternetExplorer.Application")
    IE.Visible = True
    IE.Navigate "http://gwt.google.com/samples/Showcase/Showcase.html#!CwBasicButton"
    WScript.Sleep 500
    WaitUntil IE.Document 'wait until the document is ready
    WaitUntil IE.Document.getElementById("gwt-debug-cwBasicButton-normal") 'wait until the button is initialized
    Dim theButton
    Set theButton = IE.Document.getElementById("gwt-debug-cwBasicButton-normal")
        theButton.Click
        'theButton.fireEvent "onclick" 'another way
Set IE = Nothing 
```

# php - str_replace 不起作用 - 为什么会发生这种情况？

> ID：11250219
> 
> 赞同：0
> 
> 时间：2012-06-28T17:50:20.457
> 
> 标签：php, string

所以这是我的代码：

```
function csq($string) 
{ 
    $search = array(chr(145), 
                    chr(146), 
                    chr(147), 
                    chr(148), 
                    chr(151),
                    chr(149),
                    "â€¢"); 

    $replace = array("'", 
                     "'", 
                     '"', 
                     '"', 
                     '-',
                     '&bull;',
                     '&bull;'); 

    return str_replace($search, $replace, $string); 
}
$username = csq($_POST["username"]);
$titletag = csq($_POST["titletag"]);
$keywordtag = csq($_POST["keywordtag"]);
$desctag = csq($_POST["desctag"]);
$content = csq($_POST["content"]); 
```

据我所知，每个变量都应采用指定名称的 post 变量，然后将其传递给 csq() 函数，该函数将替换特殊字符。

这没有发生。我写错了吗？

这是一个字符串：

```
•   Went over key word list that was generated
o   Ant1 highlighted approved words
o   We should add a column to calculate the ratio between the number of queries vs. the number of results “in parenthesis” 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T17:59:32.077

1.  每次运行函数时都会重新定义列表，这可以避免使用静态
2.  为了更好地了解什么转化为我更喜欢只使用一个数组并使用 array_keys 来获取 $search
3.  您确定要替换完整的字符串“â€¢”而不是单独替换每个字符串吗？

我应该像这样写我的函数：

```
function csq($string)
{
    static $translation_table;

    if(!$translation_table)
    {
        $translation_table = array();
        $translation_table[chr(145)] = "'";
        $translation_table[chr(146)] = "'";
        $translation_table[chr(147)] = '"';
        $translation_table[chr(148)] = '"';
        $translation_table[chr(151)] = "_";
        $translation_table[chr(149)] = "&bull;";
        $translation_table["â"] = "&bull;";
        $translation_table["€"] = "&bull;";
        $translation_table["¢"] = "&bull;";
    }

    return str_replace(array_keys($translation_table), $translation_table, $string);
} 
```

# php - 在以前通过 AJAX 加载的文件中运行 AJAX 时出现问题

> ID：11250223
> 
> 赞同：0
> 
> 时间：2012-06-28T17:50:31.423
> 
> 标签：php, javascript, html, ajax

我一直在使用这段代码

```
<script>
    $(document).ready(function() {
        $.ajaxSetup({ cache: false });  //stops it caching the values so form can be change and the result updated without need for refreshing the page
    });
    $(function() {
        $('#select_user').live('submit', function(e) {      
            e.preventDefault(); // stops form from submitting naturally
            $.ajax({
                data: $(this).serialize(),
                url: $(this).attr('action') ,  //gets the form url from the atribute 'action' on the form.
                success: function(response) {
                    $('#result').html(response); 
                }
            });
        });
    }); 
</script> 
```

也产生一个 ajax 请求并将变量从一个表单传递到另一个文件，这工作正常。输出到 div 'result' 的文件有另一种形式，我希望它传递给加载到 'result' 的文件中的另一个 div。我希望只复制更改输出的不同表单名称和 div 的代码，但这从来没有奏效。关于我如何做到这一点的任何想法。

尽力解释它，我知道它有点混乱！

谢谢！

# php - 使用准备好的语句或其他优化 PHP PDO 中的表创建

> ID：11250232
> 
> 赞同：0
> 
> 时间：2012-06-28T17:51:17.487
> 
> 标签：php, mysql, pdo

我正在尝试找到一种方法来加速 PHP PDO 中的 MySQL 表创建。我正在使用 PHP 5.3 和 MySQL 5。

每个表都是使用类似于下面的代码创建的：

```
CREATE TABLE `moxedo`.`mox_config_8423` (`id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT , `group_id` INT(3) UNSIGNED NOT NULL , `is_enabled` INT(1) UNSIGNED NOT NULL , `tag` VARCHAR(255) NOT NULL , `name` VARCHAR(80) NOT NULL , `value` VARCHAR(255) NOT NULL , `description` TEXT NOT NULL , `init_params` TEXT NOT NULL , `datetime_added` DATETIME NOT NULL , `datetime_lastmodified` DATETIME NOT NULL , `timestamp_univ` BIGINT(14) NOT NULL , PRIMARY KEY ( `id` ) )
ENGINE = InnoDB; 
ALTER TABLE `moxedo`.`mox_config_8423` ADD UNIQUE `ix_u_tag_ad` ( `tag` ); 
```

我有大约 120 个这样的双行查询要执行（总共 240 个查询）。根据我的基准测试，钻头需要 0.12 秒，`CREATE TABLE`钻头需要 0.07 秒`ALTER TABLE`。因此，如果我单独运行每个查询，大约需要 24 秒才能完成。

有没有一种方法可以在 PDO 中使用准备好的语句来一次执行所有 240 个查询，即`PDO::prepare`用于 PHP。我只是在寻找一种方法来显着加快速度。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T22:12:41.380

准备好的语句允许您基本上将语句视为存储函数或过程。

这意味着您定义准备好的语句并使用不同的参数多次调用它。

它不允许您对表名或列名或关键字进行参数化，仅对值进行参数化（用于过滤、排序、插入、更新等）。

因此，准备好的语句可以精确地为性能而蹲下。相反，您必须执行 2 次操作`PREPARE`，`EXEC`这实际上可能最终会减慢速度（只有一点）。

任何数据库系统中的事务对提高速度都没有任何作用。相反，它们会降低速度。这是您必须为他们所做的事情付出的代价，即确保所有数据都正确或根本没有，没有`halfway there`状态。如果某些事情失败了，它会清理一切，就好像它甚至没有尝试过任何事情一样。

MySQL 中的事务也对 DDL（数据定义语言）没有影响，这意味着`CREATE`语句`ALTER`不是以事务模式保存，而是立即执行。

现在我们清除了所有的迷雾，我们可以回答这个问题：

*   将所有查询连接成一个大查询；
*   避免每次查询重复连接数据库；每次沟通都需要时间；
*   不要在SQL代码中直接使用`$pdo->startTransaction();`/`$pdo->commit();`使用`START TRANSACTION`/ ；`COMMIT`
*   一次性运行所有查询；
*   如果可能，不要使用 PHP 生成查询；
*   将其写入文件可能使用 PHP 作为表前缀和其他小文本片段；
*   不要期望通过检查 ORM 的结构或对类的反射生成的 SQL 代码与大多数应用程序安装程序一样快，因为大多数应用程序安装程序的文件包含安装所需的所有结构；

作为代码示例，**您**可能会在打包应用程序以进行部署之前运行（建议 1、6）：

```
$table_queries = '';
foreach($table_names AS $table_name) {
    $table_queries .= function_that_generates_table_query($table_name);
}
file_put_contents('all_table_creates_qeries.sql', $table_queries); 
```

作为代码示例，您的**部署者**/**用户**可能会在应用程序自行安装时运行（建议 2、4、5）：

```
$table_queries = file_get_contents('all_table_creates_qeries.sql');
$pdo->exec($table_queries); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T03:27:08.363

在尝试了包括连接 SQL 查询在内的多种方法后，我仍然没有得到我想要的性能改进。

然而，通过从 PDO 切换到 MySQLi，我注意到我获得了显着的性能提升，尽管是“纸上谈兵”。

当我使用 PDO 时，SQL 查询必须在将控制权交还给页面之前执行整个脚本。然而，对于 MySQLi，它以某种方式将 SQL 查询交给（到后台），然后将控制权发送回页面。

因此，我没有等待 24 秒来执行 120 个表，而是使用 MySQLi 等待 0.1 秒。理论上它需要大约相同的时间（因为如果您使用 PHPMyAdmin 或 MySQL Workbench，您会注意到在使用 列出所有表之前需要几秒钟`SHOW TABLES`），但是因为我的脚本不会等待在我的页面返回之前执行整个 SQL 查询，用户体验更好。

此外，因为无论如何我需要使用这些表来做任何事情可能需要 30 多秒，所以我没有看到任何主要的缺点，而且您的脚本似乎要快得多。

因此，如果您需要使用安装脚本创建大量表，我建议您不要使用 PDO，而是使用 MySQLi。如果您一次创建一个表或执行其他数据库任务，您仍应使用 PDO。

感谢所有的贡献。

# visual-studio-2010 - 如何从 Team Foundation Server 中删除测试用例

> ID：11250248
> 
> 赞同：1
> 
> 时间：2012-06-28T17:52:26.757
> 
> 标签：visual-studio-2010, tfs

您如何从 Team Foundation Server 中删除测试用例？我采取了以下步骤：

*   [首先，我从这个网站](http://visualstudiogallery.msdn.microsoft.com/c255a1e4-04ba-4f68-8f4e-cd473d6b971f)安装了 Team Foundation Server Power Tools 。

*   其次，我在 VS 命令窗口中输入以下内容： witadmin destroywi /collection: server name /id: test case id

我从 VS 命令提示符收到以下错误消息：命令“witadmin”无效。

我什至尝试以普通用户身份从 Windows 命令提示符运行此命令，并选择“以管理员身份运行”，但是在每种情况下，我都会收到相同的错误消息，指出“命令“witadmin”无效”...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T19:55:32.327

witadmin 不是 TFS Power Tools 的一部分，应该在 Visual Studio 和 Team Explorer 的默认安装上的 Visual Studio 命令提示符中可用。

如果由于某种原因它不可用，您应该能够在“c:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE”或等效路径中找到它，以防 Visual Studio 安装在其他地方。

参数名称和参数本身之间不应有任何空格，并且可以通过用逗号分隔来指定多个 ID：

```
witadmin destroywi /collection:host\collection /id:3,5,7 
```

* * *

**编辑以包括来自 OP 的新要求**

如果您在确定要销毁哪些工作项时需要更大的灵活性，您应该求助于 Team Foundation 的客户端 API。在下面的示例中，我创建了一个控制台应用程序，它接收两个参数：团队项目的名称和 WIQL 查询：

```
using System;
using System.Linq;
using Microsoft.TeamFoundation.WorkItemTracking.Client;

namespace DelWi {
    class Program {
        static void Main(string[] args) {
            var store = new WorkItemStore(args[0]);
            WorkItemCollection workItems = store.Query(args[1]);
            if (workItems.Count == 0) {
                Console.WriteLine("No work items with the specified criteria.");
            }
            var query = from workItem in workItems.Cast<WorkItem>()
                        select workItem.Id;
            foreach (var item in store.DestroyWorkItems(query)) {
                Console.WriteLine("{0}\t{1}", item.Id, item.Exception.Message);
            }
            Console.WriteLine("Press any key to continue...");
            Console.Read();
        }
    }
} 
```

编译后，您可以调用它并传递参数，例如：

```
DelWi.exe "host\defaultcollection" "SELECT * FROM WorkItems WHERE [System.TeamProject] = 'The Best Team Project Ever'  AND  [System.WorkItemType] = 'Test Case'  AND  [System.Id] > 34  AND  [System.Id] < 37" 
```

不过要小心，因为如果您没有正确指定查询，您最终可能会删除比您想要的更多的工作项。

# java - n 个元素中 r 个元素的排列

> ID：11250250
> 
> 赞同：0
> 
> 时间：2012-06-28T17:52:30.853
> 
> 标签：java, permutation, indexoutofboundsexception

我有以下排列代码。但它抛出了以下错误。

```
11111
21111
31111
41111
51111
61111
71111
81111
91111
01111
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 10
    at Permutation.main(nPr_3.java:22) 
```

代码是

```
HashSet<Integer[]> set = new HashSet<Integer[]>();
    int[] values = {1, 2, 3, 4, 5, 6, 7, 8, 9, 0};
    int n = values.length;
    int r = 5; 
    int i[] = new int[r];
    int rc = 0;
    for(int j=0; j<Math.pow(n,r); j++)
    {
        Integer[] e = new Integer[r];
        while(rc<r)
        {
            e[rc] = values[i[rc]];
            System.out.print(values[i[rc]]);
            rc++;
        }
        System.out.println();
        rc = 0;
        set.add(e);
        while(rc<r)
        {
            if(i[rc]<n)
            {
                i[rc]++;
                break;
            }
            rc++;
        }
    } 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T18:18:48.597

当抛出异常时， i[rc]( ==i[ 0 ] ) 已在 i[rc]++ 行中递增，直到值 10。但 values 仅包含 indecees 0..9 的元素。

# performance - postgresql COUNT(DISTINCT ...) 非常慢

> ID：11250253
> 
> 赞同：207
> 
> 时间：2012-06-28T17:52:45.320
> 
> 标签：performance, postgresql, count, distinct

我有一个非常简单的 SQL 查询：

```
SELECT COUNT(DISTINCT x) FROM table; 
```

我的表有大约 150 万行。这个查询运行得很慢；大约需要 7.5 秒，相比之下

```
 SELECT COUNT(x) FROM table; 
```

这大约需要 435 毫秒。有什么方法可以更改我的查询以提高性能？我尝试分组并定期计数，以及在 x 上放置索引；两者都有相同的 7.5 秒执行时间。

* * *

## 回答 #1

> 赞同：407
> 
> 时间：2013-02-06T15:17:09.610

你可以使用这个：

```
SELECT COUNT(*) FROM (SELECT DISTINCT column_name FROM table_name) AS temp; 
```

这比：

```
COUNT(DISTINCT column_name) 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-28T18:32:27.500

```
-- My default settings (this is basically a single-session machine, so work_mem is pretty high)
SET effective_cache_size='2048MB';
SET work_mem='16MB';

\echo original
EXPLAIN ANALYZE
SELECT
        COUNT (distinct val) as aantal
FROM one
        ;

\echo group by+count(*)
EXPLAIN ANALYZE
SELECT
        distinct val
       -- , COUNT(*)
FROM one
GROUP BY val;

\echo with CTE
EXPLAIN ANALYZE
WITH agg AS (
    SELECT distinct val
    FROM one
    GROUP BY val
    )
SELECT COUNT (*) as aantal
FROM agg
        ; 
```

结果：

```
original                                                      QUERY PLAN                                                      
----------------------------------------------------------------------------------------------------------------------
 Aggregate  (cost=36448.06..36448.07 rows=1 width=4) (actual time=1766.472..1766.472 rows=1 loops=1)
   ->  Seq Scan on one  (cost=0.00..32698.45 rows=1499845 width=4) (actual time=31.371..185.914 rows=1499845 loops=1)
 Total runtime: 1766.642 ms
(3 rows)

group by+count(*)
                                                         QUERY PLAN                                                         
----------------------------------------------------------------------------------------------------------------------------
 HashAggregate  (cost=36464.31..36477.31 rows=1300 width=4) (actual time=412.470..412.598 rows=1300 loops=1)
   ->  HashAggregate  (cost=36448.06..36461.06 rows=1300 width=4) (actual time=412.066..412.203 rows=1300 loops=1)
         ->  Seq Scan on one  (cost=0.00..32698.45 rows=1499845 width=4) (actual time=26.134..166.846 rows=1499845 loops=1)
 Total runtime: 412.686 ms
(4 rows)

with CTE
                                                             QUERY PLAN                                                             
------------------------------------------------------------------------------------------------------------------------------------
 Aggregate  (cost=36506.56..36506.57 rows=1 width=0) (actual time=408.239..408.239 rows=1 loops=1)
   CTE agg
     ->  HashAggregate  (cost=36464.31..36477.31 rows=1300 width=4) (actual time=407.704..407.847 rows=1300 loops=1)
           ->  HashAggregate  (cost=36448.06..36461.06 rows=1300 width=4) (actual time=407.320..407.467 rows=1300 loops=1)
                 ->  Seq Scan on one  (cost=0.00..32698.45 rows=1499845 width=4) (actual time=24.321..165.256 rows=1499845 loops=1)
       ->  CTE Scan on agg  (cost=0.00..26.00 rows=1300 width=0) (actual time=407.707..408.154 rows=1300 loops=1)
     Total runtime: 408.300 ms
    (7 rows) 
```

与 CTE 相同的计划可能也可以通过其他方法（窗口函数）生成

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-30T18:21:16.243

如果您`count(distinct(x))`的速度明显慢于`count(x)`那么您可以通过在不同的表中维护 x 值计数来加速此查询，例如`table_name_x_counts (x integer not null, x_count int not null)`，使用触发器。但是您的写入性能会受到影响，如果您`x`在单个事务中更新多个值，那么您需要以某种明确的顺序执行此操作以避免可能的死锁。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-14T13:03:51.027

我也在寻找相同的答案，因为在某些时候我需要**具有不同值的 total_count 以及 limit/offset**。

因为它有点棘手 - 获得具有不同值的总计数以及限制/偏移量。通常很难通过限制/偏移来获得总计数。终于我有办法了-

`SELECT DISTINCT COUNT(*) OVER() as total_count, * FROM table_name limit 2 offset 0;`

查询性能也很高。

# html - 为什么 HTML 表单字段不继承 CSS 样式？

> ID：11250259
> 
> 赞同：7
> 
> 时间：2012-06-28T17:53:03.030
> 
> 标签：html, css, forms, inheritance, styles

我想在我的 HTML 文档中设置文本的字体样式和字体大小。

```
<html>
<head>
    <title>Style inheritance</title>
    <style type="text/css">
    <!--
    body    {
            background-color: #000000;
            font-family: sans-serif;
            color: #EEEEEE;
            margin: 0;
            font-size: 22pt;
    }
    -->
    </style>

</head>
<body>
    test text
    <form>
        <input type="text">
    </form>
</body>
</html> 
```

我曾经了解到，每个 HTML 元素都会继承其父元素的样式属性。在我的例子中，所有的子元素都`body`应该有 size `22pt`。

`input`但是为什么这对, `select`,`textarea`等不起作用？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-28T17:54:47.390

`input`, `select`, `textarea` `button`- 它们默认不继承，但您可以将其设置为使用 css 继承

```
input, select, textarea, button {font-family: inherit;} 
```

现场演示：http: [//jsfiddle.net/rvjKE/](http://jsfiddle.net/rvjKE/)

```
body {
  font-family: courier;
}

input {
  width: 250px;
}

input.inherit {
  font-family: inherit;
}
```

```
<div>simple text should be courier</div>
<input type="text" value="input text - does not inherit" /><br/>
<input type="text" class="inherit" value="input text - inherit from css" />
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T19:02:32.037

仅当没有样式表在元素上设置该属性时（或`inherit`已设置值），元素才继承该属性。表单域通常在浏览器样式表中有它们的设置。

因此，您需要显式设置它们的属性以覆盖浏览器默认值。`*`如果您希望*所有*元素都具有某些属性，则可以使用通用选择器执行此操作，例如

```
* { font: 100% Calibri, sans-serif; } 
```

您可以在需要时轻松地为特定元素覆盖它，因为通用选择器的特异性非常低。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T17:56:40.103

这是因为它们是用户界面元素，默认情况下采用用户操作系统的外观和感觉。至少，他们曾经如此。现在不同的浏览器使用不同的默认样式，但它们通常往往非常相似。

无论如何，这个想法是允许网站所有者修改界面元素*周围*的外观，同时仍然保持用户输入元素的默认外观。强迫您单独更改样式是唯一的方法。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-06-28T17:56:17.280

您可以使用`form`CSS 选择器来设置输入样式

```
form{
    font-family: sans-serif;
    color: #EEEEEE;
    font-size: 22pt;
} 
```

# haskell - 如何在 WinGHCi 中查看当前工作目录

> ID：11250262
> 
> 赞同：35
> 
> 时间：2012-06-28T17:53:10.527
> 
> 标签：haskell, ghci, working-directory, winghci

我已经开始自学 Haskell，为此我安装了适用于 Windows[的 Haskell 平台](http://hackage.haskell.org/platform/)。我现在正在使用`WinGHCi`。我了解到它具有`:cd`用于更改目录的命令。但问题是，我怎么知道我目前在哪个目录？首先不知道为什么我要更改目录。我搜索了很多，但找不到答案。

请告诉我是否有办法知道当前工作目录。最好我想配置命令提示符本身以显示当前目录，就像 Linux 的控制台一样。

* * *

按照@Daniel 的建议，我做了这些：

*   由于我在 Windows 7 上工作，因此没有`.ghci`文件（我认为它适用于类 Unix 操作系统），所以我在文件夹中创建了一个文件，`ghci.conf`如此`C:\Users\Apelles\AppData\Roaming\ghc`处[所示](http://www.haskell.org/ghc/docs/7.0.2/html/users_guide/ghci-dot-files.html)。
*   将 Daniel 回答中的脚本复制粘贴到`ghci.conf`.
*   然后我开始`ghci.exe`了类似控制台的窗口。我注意到它加载的模块比以前通常加载的模块多。这是快照：

![在此处输入图像描述](../Images/29ffa65aa24c4be725f23328864518c1.png)

如您所见，它加载了更多模块，最后一行说，

> 无法解析提示字符串。使用 Haskell 语法。

这是什么意思？哪一行导致问题（来自以下脚本）？

```
let cur fill = do { cwd <- System.Directory.getCurrentDirectory; return (":set prompt \"" ++ cwd ++ fill ++ " \""); }
:def doprompt (\_ -> cur ">")
:def mycd (\dir -> System.Directory.setCurrentDirectory dir >> cur ">")
:doprompt 
```

此外，如果我将`ghci.conf`文件重命名为某个随机名称，然后 start `ghci.exe`，它会加载这些模块： ![在此处输入图像描述](../Images/1933c0405838fa0eef13b295b467ce53.png)

正如我之前所说，它加载的模块数量更少，这意味着使用*ghci.conf*`ghci.exe`可以成功执行某些操作，但有时会失败。如何解决？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2014-02-27T16:50:15.750

`System.Directory.getCurrentDirectory`从[`directory`](https://hackage.haskell.org/package/directory)包中。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-05-30T16:26:00.010

我不确定这是否是“正确”的方法，但由于允许使用 shell 命令，您还可以使用适当的 shell 命令（您的`:!`操作系统）来读取目录或内容（so`cd`和`ls`喜欢）。例如，您可以编写：

```
:! cd 
```

这取决于您需要该目录的用途。如果您只想在控制台中将其打印出来，那么这会有所帮助。

一切顺利！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-29T13:55:37.763

穷人将 ghci 提示设置为当前工作目录的解决方案是

```
let cur fill = do { cwd <- System.Directory.getCurrentDirectory; return (":set prompt \"" ++ cwd ++ fill ++ " \""); }
:def doprompt (\_ -> cur ">")
:def mycd (\dir -> System.Directory.setCurrentDirectory dir >> cur ">")
:doprompt 
```

在`.ghci`文件中。

在第一行中，我们定义`cur :: String -> IO String`获取当前目录并返回 ghci 命令以相应地设置提示。然后我们定义一个执行该操作的 ghci 命令`doprompt`和一个更改目录和设置提示的命令。最后一行执行`:doprompt`在启动时执行。

不幸的是，这并不能`:cd dir`反映目录的变化，之后必须做一个手册`:doprompt`，或者使用`:mycd`用来改变目录。

为了避免提示太长，可以操纵结果`getCurrentDirectory`通过删除文件路径的初始部分来操纵结果。

这种简单方法的另一个缺点是提示不再包含有关已加载模块的信息。我相信所有这些都可以克服，但我现在没有足够的动力去挖掘。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-03-14T10:45:43.690

在 ghci 命令提示符类型`:! cd`中，它将为您提供当前目录的输出。通常，使用`:!`后跟 shell 命令在 ghci 命令提示符下运行任何 shell 命令。Windows 和 Mac/Linux 上的 shell 不同，因此您可以使用的命令会有所不同。

# xml - 如何在 Inno Setup 中读取和写入 XML 文档节点值？

> ID：11250266
> 
> 赞同：14
> 
> 时间：2012-06-28T17:53:21.167
> 
> 标签：xml, inno-setup

我想读取 XML 文件的一些节点并在一些自定义输入字段中显示它们的值。然后，用户可以根据需要更改这些值，并通过单击`Next`按钮将这些值保存回 XML。

如何在 Inno Setup 脚本中执行此操作？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-28T23:18:55.033

使用该[`CreateOleObject`](https://jrsoftware.org/ishelp/index.php?topic=isxfunc_createoleobject)函数来实例化标准[`MSXML2.DOMDocument`](https://docs.microsoft.com/en-us/previous-versions/windows/desktop/ms756987(v=vs.85))COM 对象。以下脚本显示了如何从下面发布的 XML 文件中加载和保存单个节点的文本值（脚本本身的灵感来自 MSDN 中的示例）：

```
[Code]
var
  CustomEdit: TEdit;
  CustomPageID: Integer;

function LoadValueFromXML(const AFileName, APath: string): string;
var
  XMLNode: Variant;
  XMLDocument: Variant;  
begin
  Result := '';
  XMLDocument := CreateOleObject('Msxml2.DOMDocument.6.0');
  try
    XMLDocument.async := False;
    XMLDocument.load(AFileName);
    if (XMLDocument.parseError.errorCode <> 0) then
      MsgBox('The XML file could not be parsed. ' + 
        XMLDocument.parseError.reason, mbError, MB_OK)
    else
    begin
      XMLDocument.setProperty('SelectionLanguage', 'XPath');
      XMLNode := XMLDocument.selectSingleNode(APath);
      Result := XMLNode.text;
    end;
  except
    MsgBox('An error occured!' + #13#10 + GetExceptionMessage, mbError, MB_OK);
  end;
end;

procedure SaveValueToXML(const AFileName, APath, AValue: string);
var
  XMLNode: Variant;
  XMLDocument: Variant;  
begin
  XMLDocument := CreateOleObject('Msxml2.DOMDocument.6.0');
  try
    XMLDocument.async := False;
    XMLDocument.load(AFileName);
    if (XMLDocument.parseError.errorCode <> 0) then
      MsgBox('The XML file could not be parsed. ' + 
        XMLDocument.parseError.reason, mbError, MB_OK)
    else
    begin
      XMLDocument.setProperty('SelectionLanguage', 'XPath');
      XMLNode := XMLDocument.selectSingleNode(APath);
      XMLNode.text := AValue;
      XMLDocument.save(AFileName);
    end;
  except
    MsgBox('An error occured!' + #13#10 + GetExceptionMessage, mbError, MB_OK);
  end;
end;

procedure InitializeWizard;
var  
  CustomPage: TWizardPage;
begin
  CustomPage := CreateCustomPage(wpWelcome, 'Custom Page', 
    'Enter the new value that will be saved into the XML file');
  CustomPageID := CustomPage.ID;
  CustomEdit := TEdit.Create(WizardForm);
  CustomEdit.Parent := CustomPage.Surface;
end;

procedure CurPageChanged(CurPageID: Integer);
begin
  if CurPageID = CustomPageID then
    CustomEdit.Text := LoadValueFromXML('C:\Setup.xml', '//Setup/FirstNode');
end;

function NextButtonClick(CurPageID: Integer): Boolean;
begin
  Result := True;
  if CurPageID = CustomPageID then
    SaveValueToXML('C:\Setup.xml', '//Setup/FirstNode', CustomEdit.Text);
end; 
```

这是脚本中使用的 XML 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<Setup>
    <FirstNode>First node value!</FirstNode>
    <SecondNode>Second node value!</SecondNode>
</Setup> 
```

# iphone - iOS 5：UITableView 单元格滚动不流畅

> ID：11250270
> 
> 赞同：2
> 
> 时间：2012-06-28T17:53:41.617
> 
> 标签：iphone, ios, uitableview

使用：

*   iOS 5、ARC、故事板。

每个单元格上都有 1 个图像和文本。滚动时图像不会调整大小。有两个版本的图像 image.png 和 image@2x.png。

自定义单元格是通过在情节提要中使用 UIImageView 和 UILabel 来管理的。

代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";
Continent *continent=[self.items objectAtIndex:[indexPath row]];
ContinentCell *cell = (ContinentCell*)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    cell.continentName.text=continent.continentName;
    cell.textView.text=continent.countriesHash;
    cell.imageView.image=[UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:continent.continentImage ofType:@"png"]];
 return cell;
} 
```

邪恶在哪里？先感谢您。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-28T18:04:28.560

```
[UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:continent.continentImage ofType:@"png"]]; 
```

太贵了。您想在后台异步加载图像，然后在准备好时将其呈现在主线程上。

这是一个非常粗略的解决方案

```
 cell.imageView.image = nil;
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
      UIImage * img = [UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:continent.continentImage ofType:@"png"]];
      dispatch_sync(dispatch_get_main_queue(), ^{
        cell.imageView.image = img;
      });
    }); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-29T03:34:21.797

查看**26:48** WWDC 2011的[抛光您的应用程序：提高响应性和性能的提示和技巧视频](https://developer.apple.com/videos/wwdc/2011/?id=105)。他们已经准确地讨论了您所面临的问题。不要错过，这将是非常有帮助的..！

 *** * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T18:10:50.857

确保您的图像不大，然后：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"Cell";
    Continent *continent=[self.items objectAtIndex:[indexPath row]];
    ContinentCell *cell = (ContinentCell*)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if(cell == nil) cell = [[ContinentCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier]
    cell.continentName.text = continent.continentName;
    cell.textView.text = continent.countriesHash;
    cell.imageView.image = [UIImage imageNamed:continent.continentImage];
    return cell;
} 
```

我做了两个重大的改变：

1.  补充`if(cell == nil) [[ContinentCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier]`，因为我没有找到初始化单元格的代码（除非你使用`-registerNib`或其他超级sectet函数，我不能说，因为它在NDA下）

2.  替换`imageWithContentsOfFile:...`为 simple `imageNamed`，因为您从主包中加载图像，并且如果图像不大，`-imageNamed`则将其缓存，因此加载速度更快。（并且 -imageNamed 不需要文件扩展名）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-28T18:16:10.677

```
- (UITableViewCell *)tableView:(UITableView *)tableView 
                                 cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    Continent *continent=[self.items objectAtIndex:[indexPath row]];
    ContinentCell *cell = (ContinentCell*)[tableView 
                               dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[ContinentCell alloc] 
                               initWithStyle:UITableViewCellStyleDefault 
                               reuseIdentifier:CellIdentifier];
     }
    cell.continentName.text=continent.continentName;
    cell.textView.text=continent.countriesHash;
    //cell.imageView.image=[UIImage imageWithContentsOfFile:[[NSBundle mainBundle] 
                        pathForResource:continent.continentImage ofType:@"png"]];
    cell.imageView.image = [UIImage cachedImage:continent.continentImage];
    return cell;
} 
```

我会推荐你​​使用 imageNamed 而不是 imageWithContentsOfFile。

**imageNamed**方法将图像加载到**缓存**中，下次它将从缓存中加载，其中 imageWithContentsOfFile 方法从您指定的路径加载图像而不进行`NO`缓存，它将在内存中创建多个副本。

您可以创建自己的图像缓存方法。只需声明 NSMutableDictionary *imagedCacheDict

**如果内存不足，可以通过** [imagedCacheDict removeAllObjects]删除所有对象

```
 - (UIImage*)cachedImage:(NSString*)fileName
{
   UIImage *cacheImage = [imagedCacheDict objectForKey:fileName];

   if (nil == cacheImage)
   {
      NSString *cacheImageFile = [NSString stringWithFormat:@"%@.png", 
                                   [[NSBundle mainBundle] resourcePath], fileName];
      cacheImage = [UIImage imageWithContentsOfFile:cacheImageFile];
      [imagedCacheDict setObject:cacheImage forKey:fileName];
   }
   return cacheImage;
} 
```

所以，永远不要使用 imageNamed 方法，它会消耗大量内存来带出你的应用程序。**

# asp.net-mvc-3 - Asp.net mvc 3 在验证错误消息附近添加错误图标

> ID：11250274
> 
> 赞同：0
> 
> 时间：2012-06-28T17:53:51.790
> 
> 标签：asp.net-mvc-3

我想在每条验证错误消息前添加一个图标。我正在尝试这个：

```
 public static IHtmlString BogusValidationMessageFor<TModel, TProperty>(this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, TProperty>> expr)
        {
            ModelMetadata metadata = ModelMetadata.FromLambdaExpression<TModel, TProperty>(expr, htmlHelper.ViewData);
            MvcHtmlString validationError = htmlHelper.ValidationMessageFor<TModel, TProperty>(expr);
            var imgErr = new TagBuilder("img");
            imgErr.Attributes.Add("src", "../../Content/images/error.png");
            return new HtmlString(imgErr.ToString() + validationError.ToString());           
        } 
```

我明白了：

```
<label for="Email">Email address</label>
<input id="Email" type="text" value="" name="Email" data-val-required="The Email address field is required." data-val="true">
<img src="../../Content/images/error.png">
<span class="field-validation-valid" data-valmsg-replace="true" data-valmsg-for="Email"></span 
```

我从一开始就看到了那个错误图标。我怎样才能把那个 img 放在跨度内？如何访问其 InnerHtml 属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T18:06:07.930

我认为您可以更轻松地使用 css 将背景图像应用到带有`field-validation-error`.

```
.field-validation-error {
    background:url(../../Content/images/error.png) no-repeat left center;
    padding-left:20px; /* or whatever you image size is */
} 
```

# java - 使用 Weka API 访问 MySql 数据库

> ID：11250275
> 
> 赞同：0
> 
> 时间：2012-06-28T17:53:53.437
> 
> 标签：java, mysql, weka

我正在尝试在 Java 应用程序中使用 Weka API，但遇到了一些问题。

我可以访问 MySql 数据库更改 RunWeka.ini 最后一行：

```
cp=%CLASSPATH%;C:/Program Files/Weka-3-6/mysql-connector-java-5.0.8-bin.jar 
```

它适用于 Weka Explorer，但是我需要在我正在开发的 java 应用程序中使用 Weka API。我更改了 DatabaseUtils.props：

```
jdbcDriver=mysql-connector-java-5.0.8-bin
jdbcURL=jdbc:mysql://127.0.0.1:3306/DBNAME 
```

我的 CLASSPATH var 内容是：

```
C:\Program Files\Weka-3-6\mysql-connector-java-5.0.8-bin.jar;C:\Program Files\Java\jdk1.6.0_25 
```

当我尝试运行我的 Java 应用程序时，我收到下一个错误，并且 Weka Explorer 数据库的连接不再工作。

```
Trying to add database driver (JDBC): mysql-connector-java-5.0.8-bin - Error, not in CLASSPATH? 
```

什么可能是错的？我知道“DatabaseUtils.props”正在被识别，因为错误消息发生了变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T09:28:06.307

问题出在以下行：

> jdbcDriver=mysql-connector-java-5.0.8-bin

它应该有其他价值：

> jdbcDriver=com.mysql.jdbc.Driver

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T16:45:11.553

甚至原始 DatabaseUtils.props 文件中提供的值也有效：

`jdbcDriver=org.gjt.mm.mysql.Driver`

# java - Gson 反序列化为 Java 树

> ID：11250278
> 
> 赞同：2
> 
> 时间：2012-06-28T17:54:01.030
> 
> 标签：java, json, tree, deserialization, gson

我需要将一些 JSON 反序列化为包含 TreeNodes 和 NodeData 的 Java 树结构。TreeNodes 是围绕 NodeData 的瘦包装器。我将提供 JSON 和下面的类。我查看了通常的 Gson 帮助资源，包括[这里](https://sites.google.com/site/gson/gson-user-guide#TOC-Serializing-and-Deserializing-Collection-with-Objects-of-Arbitrary-Types)，但我似乎无法提出解决方案。

序列化适用于 Gson。下面的 JSON 由 Gson 生成。但是反序列化是我需要帮助的问题。有人可以告诉我如何编写反序列化器（或建议使用 Gson 最佳实践的替代方法）吗？

这是我的 JSON。“data”元素对应于类 NodeData，“subList”JSON 元素对应于 Java 类 TreeNode。

```
{
  "data": {
    "version": "032",
    "name": "root",
    "path": "/",
    "id": "1",
    "parentId": "0",
    "toolTipText": "rootNode"
  },
  "subList": [
    {
      "data": {
        "version": "032",
        "name": "level1",
        "labelText": "Some Label Text at Level1",
        "path": "/root",
        "id": "2",
        "parentId": "1",
        "toolTipText": "a tool tip for level1"
      },
      "subList": [
        {
          "data": {
            "version": "032",
            "name": "level1_1",
            "labelText": "Label level1_1",
            "path": "/root/level1",
            "id": "3",
            "parentId": "2",
            "toolTipText": "ToolTipText for level1_1"
          }
        },
        {
          "data": {
            "version": "032",
            "name": "level1_2",
            "labelText": "Label level1_2",
            "path": "/root/level1",
            "id": "4",
            "parentId": "2",
            "toolTipText": "ToolTipText for level1_2"
          }
        }
      ]
    },
    {
      "data": {
        "version": "032",
        "name": "level2",
        "path": "/root",
        "id": "5",
        "parentId": "1",
        "toolTipText": "ToolTipText for level2"
      },
      "subList": [
        {
          "data": {
            "version": "032",
            "name": "level2_1",
            "labelText": "Label level2_1",
            "path": "/root/level2",
            "id": "6",
            "parentId": "5",
            "toolTipText": "ToolTipText for level2_1"
          },
          "subList": [
            {
              "data": {
                "version": "032",
                "name": "level2_1_1",
                "labelText": "Label level2_1_1",
                "path": "/root/level2/level2_1",
                "id": "7",
                "parentId": "6",
                "toolTipText": "ToolTipText for level2_1_1"
              }
            }
          ]
        }
      ]
    }
  ]
} 
```

以下是 Java 类：

```
public class Tree {

    private TreeNode rootElement;
    private HashMap<String, TreeNode> indexById;
    private HashMap<String, TreeNode> indexByKey;
    private long nextAvailableID = 0;

    public Tree() {
        indexById = new HashMap<String, TreeNode>();
        indexByKey = new HashMap<String, TreeNode>();
    }

    public long getNextAvailableID()
    {
        return this.nextAvailableID;
    }
    ...
    [snip]
    ...
}

public class TreeNode {

    private Tree tree;
    private NodeData data;
    public List<TreeNode> subList;
    private HashMap<String, TreeNode> indexById;
    private HashMap<String, TreeNode> indexByKey;

    //this default ctor is used only for Gson deserialization
    public TreeNode() {
        this.tree = new Tree();
        indexById = tree.getIdIndex();
        indexByKey = tree.getKeyIndex();
        this.makeRoot();
        tree.setRootElement(this);
    }

    //makes this node the root node. Calling this obviously has side effects.
    public NodeData makeRoot() {
        NodeData rootProp = new NodeData(TreeFactory.version, "example", "rootNode");

        String nextAvailableID = getNextAvailableID();
        if (!nextAvailableID.equals("1")) {
            throw new IllegalStateException();
        }

        rootProp.setId(nextAvailableID);
        rootProp.setParentId("0");
        rootProp.setKeyPathOnly("/");
        rootProp.setSchema(tree);
        this.data = rootProp;
        rootProp.setNode(this);
        indexById.put(rootProp.getId(), this);
        indexByKey.put(rootProp.getKeyFullName(), this);
        return rootProp;
    }

    ...
    [snip]
    ...
}

public class NodeData {

    protected static Tree tree;
    private LinkedHashMap<String, String> keyValMap;

    protected String version;
    protected String name;
    protected String labelText;
    protected String path;
    protected String id;
    protected String parentId;
    protected TreeNode node;
    protected String toolTipText;//tool tip or help string
    protected String imagePath;//for things like images; not persisted to properties
    protected static final String delimiter = "/";

    //this default ctor is used only for Gson deserialization
    public NodeData() {
        this("NOT_SET", "NOT_SET", "NOT_SET");
    }

    ...
    [snip]
    ...
} 
```

旁注：树数据结构有点奇怪，因为它包含索引。显然，这不是典型的搜索树。实际上，树主要用于在每个 NodeData 元素中创建分层路径元素（String）。（例如：“path”：“/root/level2/level2_1”。）索引实际上用于 NodeData 检索。

# git - Git 分支推送到不同的仓库

> ID：11250279
> 
> 赞同：1
> 
> 时间：2012-06-28T17:54:12.730
> 
> 标签：git, branch

我为这个愚蠢的问题道歉，但我觉得我对这个问题真的很熟悉。

目前，我在 PHPFog 托管我的应用程序，据我所知，他们不允许推送除主分支之外的任何其他分支。我的解决方案是简单地创建另一个应用程序/存储库进行开发。

我的问题是如何在我的开发分支上专门更改我的来源以推送到单独的仓库？还是有更好的方法来完全做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T17:58:20.327

```
$ git remote add dev-origin <dev_repo_url>

$ git push --set-upstream dev-origin dev 
```

`dev`您的开发分支的名称在哪里。

# c# - 如何在代码后面（未设置）中读取（获取）服务器端 div 的 css 样式值？

> ID：11250281
> 
> 赞同：3
> 
> 时间：2012-06-28T17:54:24.393
> 
> 标签：c#, asp.net, css

我想获得服务器端 div 的“显示”css 值！
下面的代码不起作用：

```
 if (div.Style["display"] == "none")
    {
        div.Style.Add("display", "table-row");
    } 
```

我如何在 c# 中获得该值？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T18:05:08.507

你不能这样做，但我猜你正在应用一些逻辑来做某事，如果你的 div 是否可见（显示：无）。如果是这种情况，为什么不使用 html 输入元素并根据需要切换其值？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-17T18:55:35.727

~~div.Attributes["style"].Add("display", "table-row")~~

用这个：

```
if (div.Attributes["style"].ToString().Contains("display:none;")) 
{ div.Attributes.Add("style", "display:table-row"); } 
```

或尝试

```
div.Attributes["CLASS"].ToString().Contains("CLASS_NAME") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-06T07:18:00.800

更好的解决方案：

**HTML**

```
<div id="divID" runat="server" style="display:none;"></div> 
```

**C＃**

```
if(divID.Style.Value.ToLower() == "display:none;")
{
   divID.Style.Add("display", "table-row");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T18:00:07.907

你不能在服务器端做你想做的事情。Style 属性仅适用于内联样式。考虑客户端 JavaScript。

`<div id="div" runat="server" style="display: none;">Foo</div>`

# javascript - 如何实现平滑滚动

> ID：11250283
> 
> 赞同：0
> 
> 时间：2012-06-28T17:54:33.863
> 
> 标签：javascript, jquery

这是我的 js 代码：

```
$(document).ready(function(){ 
    $(".smooth").click(function(){
        var href = $(this).attr("href");
        var pos = $(href).offset().top;
        $("html,body").animate({scrollTop: pos}, 1000); 
        return false;
    });
}); 
```

它适用于 html 文件......但它不适用于 php 文件。如何修改代码以使用 php 文件？

完整的html代码在这里：

```
<html><head><title>---anchor jump</title><meta content="text/html; charset=UTF-8"http-equiv="Content-Type"><meta name="Generator"content="EditPlus"><meta name="Author"content="lugu"><meta name="Keywords"content="lugu的个人网站"><meta name="Description"content="http://www.zhegu.org"><script src="jquery.js"type="text/javascript"></script><style>body{margin:0;padding:0;background:#0c1210;font-family:arial}p,div,h1,h2,h3,h4,h5,h6{margin:0;padding:0}.fixed{width:29px;height:35px;position:fixed;top:200px;left:900px;*position:fixed;_position:absolute;_top:200px;_left:900px;_top:expression(eval(document.compatMode&&document.compatMode=='CSS1Compat')?documentElement.scrollTop+200:document.body.scrollTop+(document.body.clientHeight-this.clientHeight))}.fixed li{list-style:none}.fixed li a{text-decoration:none;display:block;margin-bottom:2px;background-color:#738C65;color:#fff;padding:8px 10px}.fixed li a:hover{background-color:#ACD098;color:#fff;text-decoration:underline}.box{margin-bottom:50px}h1{color:#fff;font-size:25px;padding-left:20px}.box h2{color:#fff;font-size:20px;padding-left:20px;margin-bottom:10px}.box p{padding:15px 20px;background-color:#738C65;color:#fff;height:300px;width:50%}</style></head><body><h1>anchor jump test page</h1><div class="fixed"><ul><li><a href="#lugu1"class="smooth">1</a></li><li><a href="#lugu2"class="smooth">2</a></li><li><a href="#lugu3"class="smooth">3</a></li><li><a href="#lugu4"class="smooth">4</a></li></ul></div><div id="lugu1"class="box"><h2>lugu1-title-1</h2><p>this is text about lugu..this is NO.1</p></div><div id="lugu2"class="box"><h2>lugu1-title-2</h2><p>this is text about lugu..this is NO.2</p></div><div id="lugu3"class="box"><h2>lugu1-title-3</h2><p>this is text about lugu..this is NO.3</p></div><a name="lugu4"></a><div id="lugu5"class="box"><h2>lugu1-title-5</h2><p>this is text about lugu..this is NO.5</p></div><script type="text/javascript">$(document).ready(function(){$(".smooth").click(function(){var href=$(this).attr("href");var pos=$(href).offset().top;$("html,body").animate({scrollTop:pos},1000);return false})});</script></body></html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T17:58:50.773

在 PHP 标记之外包含：

```
<?php 

 // code here

?>

<script> 
 // your javascript
</script>

<?php

 // code here

?> 
```

# css - CSS媒体查询不适用于隐藏/显示div

> ID：11250284
> 
> 赞同：1
> 
> 时间：2012-06-28T17:54:37.643
> 
> 标签：css, dynamic, media-queries

嗨，我是 css 媒体查询的新手，所以请多多包涵，但本质上，如果屏幕尺寸小于 940px 宽，我会尝试使用 css 而不是 javascript 隐藏一个元素。

出于某种原因，这隐藏了所有尺寸的元素，我似乎找不到错字或任何东西，它不适用于 display none 吗？

```
@media all and (min-width: 940px) {
#smallDistrictMap
{
    display:none;
}
} 
```

我注意到如果屏幕尺寸开始小于 940 像素，但如果屏幕开始尺寸更大，它就不会工作......

还尝试添加最大宽度

```
@media all and (max-width: 2000) and (min-width: 940px) {
#smallDistrictMap
{
    display:none;
}
} 
```

但这由于某种原因没有效果。啊啊啊

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T18:08:43.727

如果屏幕小于 940 像素，则隐藏元素 - 意味着 940 像素是 MAX，而不是 MIN：

```
@media all and (max-width: 940px) {
#smallDistrictMap
    {
        display:none;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T18:10:53.663

好的，这是逻辑错误..按照 Zoltan 的建议将代码更改为 max-width 就可以了。

```
@media all and (max-width: 940px) {
    #smallDistrictMap
    {
        display:none;
    }
} 
```

# node.js - 在 node.js 中使用 express.logger 记录错误

> ID：11250289
> 
> 赞同：1
> 
> 时间：2012-06-28T17:55:04.330
> 
> 标签：node.js, express, error-logging

我正在尝试使用自定义函数通过 express.logger(...) 仅将某些事件记录到文件中，并且当响应和请求不符合我设置的标准时它会挂起。

```
var express = require('express'),
 app = express.createServer(
  express.logger(function(req, res) {
   var status = res.statusCode,
   color = 32;

   if (status >= 500) color = 31;
   else if (status >= 400) color = 33;
   else if (status >= 300) color = 36;

   if (req.method==='POST' && req.originalUrl!=='/plankton') {
    return '\033[90m' + req.method
     + ' ' + req.originalUrl + ' '
     + '\033[' + color + 'm' + res.statusCode
     + ' \033[90m'
     + (new Date - req._startTime)
     + 'ms\033[0m';
   }
   else if (res.statusCode>=400) {
    return '\033[90m' + req.method
     + ' ' + req.originalUrl + ' '
     + ' ' + req.body + ' '
     + '\033[' + color + 'm' + res.statusCode
     + ' \033[90m'
     + (new Date - req._startTime)
     + 'ms\033[0m';
   } else {
// what should be inserted here?
// I only want to log the above events...
   }
  });
 ) 
```

在 else 中返回 '' 不起作用。它挂起，我的猜测是它不允许响应完成/发送。

也许我应该使用不同的方法来记录，但我喜欢 express 中间件的简单性，因为它允许我不必在任何地方都包含日志消息 - 或者我也可以绕过它并为某些事件设置一个监听器。

关于我应该在其他方面有什么想法？或者对更好的方法的建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T17:59:53.597

您需要了解中间件 API 基于异步回调，而不是同步返回值。中间件函数的返回值将被完全忽略。你需要遵循这个模式：

```
function (req, res, next) {
    //look at req
    //do whatever logging you decide you want to do
    //Tell express that you are done and it can move along the middleware chain
    next();
} 
```

# jquery - jquery 动画数字

> ID：11250293
> 
> 赞同：0
> 
> 时间：2012-06-28T17:55:18.747
> 
> 标签：jquery, numbers, jquery-animate, easing

我正在尝试为数字值设置动画，此场景来自 actionscript 3：

```
import caurina.transitions.*;

var p1:Point = new Point();
var t:Number =1;
var xv:int=500;
var yv:int=300;

Tweener.addTween(p1, {time: t, x: xv, y: yv, transition: "easeOutElastic", onUpdate:reportPosition });

function reportPosition(){trace(p1);} 
```

我找到了这个主题，它的效果很好：

[用于动画数字的 Jquery 插件](https://stackoverflow.com/questions/5034819/jquery-plugin-for-animating-numbers)

但是它没有缓动属性，这会极大地改变场景。

当值被动画化时，使用“easeOut”，它会越过顶部并返回。

这有可能达到这个效果吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T08:55:35.183

我创建了一个 jquery 插件，您可以使用它为数字设置动画并使用任何 jqueryui 缓动（您需要自己从 jqueryui.com 获取缓动）：

[https://github.com/kajic/jquery-animateNumber](https://github.com/kajic/jquery-animateNumber)

# java - .class 文件没有 LineNumberTable

> ID：11250295
> 
> 赞同：1
> 
> 时间：2012-06-28T17:55:33.850
> 
> 标签：java, javac, jdk1.6, javap

在我们的产品中有一些 jdk 1.6.0._17 编译的 java 源文件。每当其中任何一个出现异常时，他们都不会给出行号。

我使用 javap 来了解更多关于 jdk 1.6.0._17 编译类的信息。javap 输出没有任何 LineNumberTable，这就是为什么行号未显示在异常堆栈跟踪中的原因。

我的问题：我的 javac 命令不使用任何与调试相关的标志（如 -g:lines,vars,source）。因此，默认情况下，类文件至少应包含源代码和行号信息。我也没有使用 -g:none 来禁用调试信息的生成。

那么在 .class 文件中没有生成 LineNumberTable 的其他原因可能是什么？

非常感谢您对此的任何帮助。

问候， VK

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T08:49:44.747

“javap 输出没有任何 LineNumberTable，这就是为什么行号未显示在异常堆栈跟踪中的原因。”

尝试：

```
javap -verbose -l -c JavaApplication2 
```

# mysql - 忽略备份脚本中的 mysql 表

> ID：11250296
> 
> 赞同：0
> 
> 时间：2012-06-28T17:55:39.347
> 
> 标签：mysql, shell, command, backup

我正在遵循[此](http://www.howtoforge.com/creating-mysql-backups-with-automysqlbackup-on-ubuntu-9.10)站点上的指南并尝试排除其中包含名称`turnkey`的数据库。

```
find /var/lib/mysql -mindepth 1 -maxdepth 1 -type d | cut -d'/' -f5 | grep -v ^mysql\$ | tr \\\r\\\n ,\ ` 
```

此命令返回所有数据库名称，如何删除统包名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T18:05:21.767

您显示的命令是 Linux / unix shell 命令。如果您添加另一个步骤

```
 grep -v turnkey 
```

您将省略其中包含“交钥匙”一词的任何行。

像这样：

```
find /var/lib/mysql -mindepth 1 -maxdepth 1 -type d | 
cut -d'/' -f5 | 
grep -v ^mysql\$ |
grep -v turnkey 
tr \\\r\\\n ,\ ` 
```

你没有问这是否是个好主意。我不认为是这样，因为它依赖于 MySQL 服务器守护程序软件的特定磁盘结构，这不是系统正式规范的一部分。换句话说，它可能会改变。

你可以这样做：

```
SELECT SCHEMA_NAME FROM `information_schema`.`SCHEMATA` 
 WHERE SCHEMA_NAME NOT LIKE '%turnkey%'
 ORDER BY SCHEMA_NAME 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T18:05:19.670

您可以使用一些改进的脚本而无需任何额外的实用程序，只需纯查找：

```
find /var/lib/mysql -mindepth 1 -maxdepth 1 -type d ! \( -name turnkey -or -name mysql \) -printf "%f " 
```

或者只是修改您的变体以添加语句以将其从列表中排除`turnkey`：`grep -v`

```
find /var/lib/mysql -mindepth 1 -maxdepth 1 -type d | cut -d'/' -f5 | grep -v "^mysql\$\|^turnkey$" | tr \\\r\\\n ,\ ` 
```

# c - _Bool 的 printf 转换说明符？

> ID：11250297
> 
> 赞同：14
> 
> 时间：2012-06-28T17:55:42.457
> 
> 标签：c, standards, printf, c99

有了`printf()`，我可以使用`%hhu`for `unsigned char`、`%hi`for a `short int`、`%zu`for a `size_t`、`%tx`for a`ptrdiff_t`等。

我对 a 使用什么转换格式说明符`_Bool`？标准中是否存在一个？

还是我必须像这样投射它：

```
_Bool foo = 1;
printf("foo: %i\n", (int)foo); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-28T19:12:51.800

类型没有特定的转换长度修饰符`_Bool`。

`_Bool`是一个*无符号*整数类型，足以存储值`0`和`1`. 你可以这样打印`_Bool`：

```
_Bool b = 1;
printf("%d\n", b); 
```

由于整数提升规则，`_Bool`保证提升到`int`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-28T18:07:23.633

在 C99 之前，bool 不是标准 C 的一部分，因此不作为 printf 修饰符存在。C99，将 _Bool （您正在使用的）定义为整数，因此您应该可以将其转换为整数来显示（至少从机器的角度来看）。或者，您可以执行以下操作：

```
printf("%d",foo?1:0); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T19:01:30.810

正如您在对@Jack 的评论中所说，“6.3.1.1p1 表示 的转换等级`_Bool`低于所有其他标准整数类型的等级”。

在对 的调用中`printf`，一个`char`or将被提升并作为一个（或一个）`short`在堆栈上传递，所以我认为使用作为格式说明符会很好。这也意味着您不需要显式强制转换为，因为这会自动发生。`int``unsigned int``%d``int`

~~唯一可能的问题是编译器如何表示 a `_Bool`，它可能是实现定义的，并且可能因一个编译器而异。我看到了两种可能的实现——0 和 1 或 0 和 -1。~~

为了最终的可移植性，请按照@user325181 的回答并使用三元组在两个选项之间进行选择。整数（编译器可能会优化掉）或字符串。

编辑：正如其他答案中所报告的，a被定义为可以存储 0 或 1 的无符号整数类型。正因为如此，而且当它传递给时`_Bool`它会被提升为 a 的事实，我会说这是最合适的说明符。~~`unsigned`~~`int``printf()`~~`%u`~~`%d`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T19:41:45.073

没有。只需像`int`使用`%d`或`%i`说明符一样处理它。

[`_Bool`](http://en.wikipedia.org/wiki/Compatibility_of_C_and_C++)

> 在 C99 中，引入了一个新关键字 _Bool 作为新的布尔类型。在许多方面，它的行为很像 unsigned int，但从其他整数类型或指针的转换总是被限制为 0 和 1。除了其他无符号类型，正如人们对布尔类型所期望的那样，这样的转换为 0，如果并且仅当相关表达式的计算结果为 0 并且在所有其他情况下为 1 时。头文件 stdbool.h 提供了分别定义为 _Bool、1 和 0 的宏 bool、true 和 false。

想到的第一种实现方法是使用`char`or( `int8_t`)`enum`和 with [`bit fields`](http://en.wikipedia.org/wiki/Bit_field)。但实际上，这取决于。它可以是一个`typedef`for an `int`（正如我所提到的，它已被使用，但不推荐，受错误影响）或`char`或`unsigned int`或一个枚举，`#define`这是常用的。

例如，[Apple 的实现](http://www.opensource.apple.com/source/xnu/xnu-1456.1.26/EXTERNAL_HEADERS/stdbool.h)使用`int`，如您所见：

```
#ifndef _STDBOOL_H_
#define _STDBOOL_H_ 

#define __bool_true_false_are_defined   1

#ifndef __cplusplus

#define false   0
#define true    1

#define bool    _Bool
#if __STDC_VERSION__ < 199901L && __GNUC__ < 3
typedef int _Bool;
#endif

#endif /* !__cplusplus */

#endif /* !_STDBOOL_H_ */ 
```

其他实现：

[`typedef int8_t _Bool;`](https://stackoverflow.com/questions/25461/interfacing-with-stdbool-h-c)

[`typedef enum { false = 0, true = 1 } bool;`](http://read.pudn.com/downloads33/sourcecode/hack/firewall/105210/CDROM/lib/gcc-lib/i386-mingw32/2.95.2/include/stdbool.h__.htm)

[`typedef unsigned char Boolean; typedef _Bool Boolean;`](http://www.opensource.apple.com/source/xnu/xnu-1456.1.26/libkern/libkern/OSTypes.h)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-22T03:35:30.827

我`%b`用于 Java`printf()`转换说明符。我最近尝试了它，令我惊讶的是它起作用了。

这是代码行：

```
System.out.printf("firstRobot == secondRobot: %b",firstRobot == secondRobot); 
```

这是输出：

```
firstRobot == secondRobot: false 
```

# android - 为什么这个变量“无法解析”？

> ID：11250300
> 
> 赞同：0
> 
> 时间：2012-06-28T17:55:57.800
> 
> 标签：android, dialog, android-alertdialog

我有两个单选按钮作为单选组，还有一个“执行”按钮 - 因此您选择单选按钮，点击“执行”，它会根据单选选项显示备用对话框。我在倒数第二行（创建警报对话框生成器）中收到以下错误：

```
private OnClickListener myClickcalcHandler = new OnClickListener() {
    public void myClickcalcHandler(View view) {
        switch (view.getId()) {
        case R.id.calcbutton:
            RadioButton insideButton = (RadioButton) findViewById(R.id.radioButton1);
            RadioButton outsideButton = (RadioButton) findViewById(R.id.radioButton1);
            }
        if
        (outsideButton.isChecked()){
            //do what you want
            AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(
                        context);
                // set title
                alertDialogBuilder.setTitle("some outside activity");
                button = (Button) findViewById(R.id.emailbutton);
                // set dialog message
                alertDialogBuilder
                    .setMessage(R.string.email_long)
                    .setCancelable(false)
                    .setNegativeButton("Close",new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog,int id) {
                            // if this button is clicked, just close
                            // the dialog box and do nothing
                            dialog.cancel();
                        }
                    });
        }
        else if
        (insideButton.isChecked()){
            //do what you want 
            AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(
                    context);
            // set title
            alertDialogBuilder.setTitle("some inside activity");
            button = (Button) findViewById(R.id.emailbutton);
            // set dialog message
            alertDialogBuilder
                    .setMessage(R.string.email_long)
                    .setCancelable(false)
                    .setNegativeButton("Close",new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog,int id) {
                            // if this button is clicked, just close
                            // the dialog box and do nothing
                            dialog.cancel();
                        }
                    });
        }
            // create alert dialog
            AlertDialog alertDialog = alertDialogBuilder.create();
            // show it
        alertDialog.show();

            } 
```

所以eclipse编辑器只是说“alertDialogBu​​ilder无法解决”，我不知道为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T17:59:44.897

decalare AlertDialog 全局表示外部 if/else 块：

```
private OnClickListener myClickcalcHandler = new OnClickListener() {
    public void myClickcalcHandler(View view) {
AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(
                        context);

        switch (view.getId()) {
        case R.id.calcbutton:
            RadioButton insideButton = (RadioButton) findViewById(R.id.radioButton1);
            RadioButton outsideButton = (RadioButton) findViewById(R.id.radioButton1);
            }
         //YOUR CODE HERE..... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T18:00:05.890

您需要`AlertDialog.Builder alertDialogBuilder`在构造外部声明`if/else`，然后在内部定义。

像这样：

```
 AlertDialog.Builder alertDialogBuilder;
    if
    (outsideButton.isChecked()){
        //do what you want
        alertDialogBuilder = new AlertDialog.Builder(
                    context);
        // ...
    }
    else if
    (insideButton.isChecked()){
        //do what you want 
        alertDialogBuilder = new AlertDialog.Builder(
                context);
        // ...
    }
        // create alert dialog
        AlertDialog alertDialog = alertDialogBuilder.create();
        // show it
    alertDialog.show(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T18:01:19.410

在 if else 之前执行此操作。

```
AlertDialog.Builder alertDialogBuilder = null; 
```

并更换你的

```
AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(context); 
```

和

```
alertDialogBuilder = new AlertDialog.Builder(context); 
```

# java - 如何绕过浏览器给我的 403 响应代码？

> ID：11250308
> 
> 赞同：-4
> 
> 时间：2012-06-28T17:56:11.773
> 
> 标签：java, web-scraping, http-status-code-403

我正在编写一个 webcrawer 类型的程序，连同 html，我需要下载图像、swf 等以使其离线可用。

之前有人提供了一些非常有用的信息，关于下载文件：

```
import static org.apache.commons.io.FileUtils.copyURLToFile;
public static void Download() {

    URL dl = null;
    File fl = null;
    try {
        fl = new File(System.getProperty("user.home").replace("\\", "/") + "/Desktop/Screenshots.zip");
        dl = new URL("http://example.com/uploads/Screenshots.zip");
        copyURLToFile(dl, fl);
    } catch (Exception e) {
        System.out.println(e);
    }
} 
```

效果很好，但是，有些网站给了我一个 403 块。在做了一些研究之后，我发现这在很大程度上是网站限制机器人下载的尝试。Java中有解决方法吗？显然，您需要将其作为 HTTP 请求发送，而不是使用我拥有的代码。

例如，对我不起作用的链接是：http: [//images.4chan.org/v/src/1340901798824.jpg](http://images.4chan.org/v/src/1340901798824.jpg)

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T22:30:44.997

HTTP 代码 403 表示`FORBIDDEN`.

如果不提供您没有的身份验证凭据，您将无法绕过此限制。

跳过这些页面并继续前进。

# ruby-on-rails - 我如何让 Rails 为 PDFKit 呈现 PDF 特定的 HTML？

> ID：11250313
> 
> 赞同：4
> 
> 时间：2012-06-28T17:56:33.573
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rendering

我正在使用 PDFKit 中间件来呈现 PDF。这是它的作用：

*   检查对应用程序的传入请求。如果它们用于 PDF，请从应用程序中隐藏该事实，但准备修改响应。
*   让应用呈现为 HTML
*   在发送之前取回响应并将 HTML 转换为 PDF

一般来说，我想要那种行为。但是我有一种情况，我实际上需要我的应用程序根据请求 PDF 的事实来呈现不同的内容。

PDFKit 为我提供了一个标记来检测它是否计划呈现我的响应：它设置`env["Rack-Middleware-PDFKit"]`为 true。

但我需要告诉 Rails，基于那个标志，我希望它渲染`show.pdf.haml`. 我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T18:18:26.103

# 设置 request.format 和响应标头

弄清楚了。根据[Rails 源码](https://github.com/rails/rails/blob/fda24312d39a2c4b88d6c184faafaebfba5eb244/actionpack/lib/action_controller/metal/mime_responds.rb#L212)，`request.format = 'pdf'`将手动设置响应格式为 PDF。这意味着 Rails 将呈现例如`show.pdf.haml`.

但是，现在 PDFKit 不会将响应转换为实际的 PDF，因为`Content-Type`标题表明它已经是 PDF，而我们实际上只生成 HTML。所以我们还需要覆盖 Rails 的响应标头，让它仍然是 HTML。

这个控制器方法处理它：

```
# By default, when PDF format is requested, PDFKit's middleware asks the app
# to respond with HTML. If we actually need to generate different HTML based
# on the fact that a PDF was requested, this method reverts us back to the
# normal Rails `respond_to` for PDF.
def use_pdf_specific_template
  return unless env['Rack-Middleware-PDFKit']

  # Tell the controller that the request is for PDF so it 
  # will use a PDF-specific template
  request.format = 'pdf'
  # Tell PDFKit that the response is HTML so it will convert to PDF
  response.headers['Content-Type'] = 'text/html'
end 
```

这意味着控制器操作如下所示：

```
def show
  @invoice = Finance::Invoice.get!(params[:id])

  # Only call this if PDF responses should not use the same templates as HTML
  use_pdf_specific_template

  respond_to do |format|
    format.html
    format.pdf
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T21:57:09.597

您也可以在没有中间件的情况下使用 PDFKit。

# arrays - 有效过滤 MATLAB 结构数组？

> ID：11250317
> 
> 赞同：2
> 
> 时间：2012-06-28T17:56:55.227
> 
> 标签：arrays, matlab, struct, vectorization, slice

假设我在 MATLAB 中有一个结构数组：

```
a= struct('a1',{1,2,3},'a2',{4,5,6}) 
```

我怎样才能有效地（即使用矢量化代码）过滤结构的元素，使它们满足一些布尔属性？

例如：

1.  我将如何创建一个新的结构数组`b`，其元素是`a`其中**两个** `a1`都是 3 的倍数和 3 的倍数**的** `a2`子集？预期的结果是一个大小为 1 的结构数组，其元素为`struct('a1', 3, 'a2', 6)`。
2.  如何创建一个新的结构数组，其`b`元素是奇数**或**3 的倍数的子集？预期的结果是以下大小为 2 的结构数组：。`a``a1` **`a2``struct('a1', {1,3}, 'a2', {4,6})`**

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T18:20:02.793

您可以通过 mod(...) 函数和正确使用括号和引用来解决这个问题。考虑

1.  `Mod(x,3)`如果您的数字是 3 的倍数，则返回零`mod(x,2)`。如果 x 为奇数，则返回 1。
2.  您可以通过键入来获取向量中的所有`a1`或值。只需键入 a.a1 就会一团糟。`a2``[a.a1]`
3.  您可以通过写作或写作来从您的`a`结构中过滤我们以获得相同的结果。`a = a([1 3]);``a = a(logical([1 0 1]))`
4.  您可以使用`&`for *logical and* 和`|`for 逻辑或（[请参阅此处](http://www.mathworks.com/help/techdoc/ref/logicaloperatorselementwise.html)）。

总之，以下代码可以解决您的问题：

```
%% Part 1:
a= struct('a1',{1,2,3},'a2',{4,5,6});
logForA1isMod3 = (mod([a.a1], 3) == 0);
logForA2isMod3 = (mod([a.a2], 3) == 0);

a = a(logForA1isMod3  & logForA2isMod3);

%% Part 2:
a= struct('a1',{1,2,3},'a2',{4,5,6});
logForA1isOdd = (mod([a.a1], 2) == 1);

a = a(logForA1isOdd | logForA2isMod3); 
```**

# facebook - Linter 错误：无关属性：此类型的对象不允许名为“视频：类型”的属性

> ID：11250318
> 
> 赞同：0
> 
> 时间：2012-06-28T17:56:55.760
> 
> 标签：facebook, video, facebook-opengraph

我希望此页面在 facebook 上显示视频播放器而不是缩略图。目前，facebook 会在某些情况下显示播放器，有时则不会。

这是链接： [https ://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.plant4thegospel.com%2Fresources%2Fvideo%2F78-why-gospel-grace](https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.plant4thegospel.com%2Fresources%2Fvideo%2F78-why-gospel-grace)

我收到这些错误。

```
Extraneous Property:    Objects of this type do not allow properties named 'video:type'.
Extraneous Property:    Objects of this type do not allow properties named 'video:secure_url'.
Extraneous Property:    Objects of this type do not allow properties named 'video:width'.
Extraneous Property:    Objects of this type do not allow properties named 'video:height'.
Parser Mismatched Metadata: The parser's result for this metadata did not match the input metadata. Likely, this was caused by the data being ordered in an unexpected way, multiple values being given for a property only expecting a single value, or property values for a given property being mismatched. Here are the input property =>content pairs that were not seen in the parsed result: 'og:video:type => application/x-shockwave-flash, og:video:secure_url => https://vimeo.com/moogaloop.swf?clip_id=44753220, og:video:width => 640, og:video:height => 360' 
```

有任何想法吗？？

这是我的 OG 标签……按顺序排列。

```
<meta property="og:title" content="Why Gospel Grace Church? - Videos"/>
<meta property="og:type" content="video.movie"/>
<meta property="video:type" content="application/x-shockwave-flash"/>
<meta property="og:video" content="http://vimeo.com/moogaloop.swf?clip_id=44753220"/>
<meta property="video:secure_url" content="https://vimeo.com/moogaloop.swf?clip_id=44753220"/>
<meta property="video:width" content="640"/>
<meta property="video:height" content="360"/>
<meta property="og:url" content="http://www.plant4thegospel.com/resources/video/78-why-gospel-grace"/>
<meta property="og:image" content="http://b.vimeocdn.com/ts/311/086/311086152_960.jpg"/>
<meta property="og:description" content="Salt Lake City needs churches like Gospel Grace Church. Salt Lake City is a major metropolitan area packed with one million people--prosperous and needy, religious and irreligious, young and old, international and domestic--searching for hope apart from Jesus. Over the next few weeks, we'll be posting four videos that describe our hopes for Gospel Grace Church and the city."/>
<meta property="fb:admins" content="512988036"/>
<meta property="fb:app_id" content="122489644534138"/>
<meta property="og:locale" content="en_gb" />
<meta property="og:site_name" content="Plant For the Gospel" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:23:18.313

尝试更改

```
<meta property="og:type" content="video.movie"/> 
```

至

```
<meta property="og:type" content="video.other"/> 
```

# kml - 如何在 Google 地球中显示自定义 collada 模型？

> ID：11250321
> 
> 赞同：1
> 
> 时间：2012-06-28T17:57:20.973
> 
> 标签：kml, google-earth, collada

我有一组覆盖大面积地面的重建点云数据（位置+颜色），我想在 Google Earth 中显示它。

最初数据是 .ply 格式，但我已使用[MeshLab](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CFQQFjAA&url=http://meshlab.sourceforge.net/&ei=XpnsT5jXLcj30gGIx_i1BQ&usg=AFQjCNE7qGOhi_Zv3qdOTAChyun27nRNVQ)将其转换为 Collada并尝试通过修改[此处](https://developers.google.com/kml/documentation/models)找到的 KML 文件来导入它。Google 地球给出了一个关于无法加载 .dae 文件的错误。我还尝试从点云数据重建网格并加载它，但也没有运气。

有没有人有任何将自定义模型加载到谷歌地球的经验/建议？MeshLab 导出的 .dae 文件是否不符合标准，Google Earth 是否仅支持 Collada 功能的子集，还是完全存在其他问题？

[我在此处](http://pastebin.com/yFb23B7E)发布了示例 .dae 文件的精简版本。

编辑：[完整版](https://docs.google.com/open?id=0B28_1J26fE1bTGdXWnN2Ynh2X28)[15M]。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T05:59:03.933

我过去曾与 MeshLab 合作过，但对于我的数据集来说，这有点矫枉过正，而且获得 .dae 并不是最简单的

我有更好的脚本编写草图来处理点数据以创建将显示在谷歌地球中的模型。不过，我只处理每个模型几千分。

有很多插件示例，一个很好的起点 [http://forums.sketchucation.com/](http://forums.sketchucation.com/)

# javascript - Javascript 效率：新的局部变量 vs 全局 vs 属性

> ID：11250323
> 
> 赞同：1
> 
> 时间：2012-06-28T17:57:25.037
> 
> 标签：javascript, browser, processor

我正在制作一个非常沉重的画布效果，并且需要从用户系统中挤出每一点速度。

这是一个场景：

```
function ImCalledEveryMouseMove(blah,blah)
{
    var imgData = myctx.getImageData(0,0,canvas.width,canvas.height)
    var somevar1 = (some maths process);
    var somevar2 = (some maths process);
    var somevar3 = (some maths process);
    var somevar4 = (some maths process);
    var somevar5 = (some maths process);
    for(every pixel channel etc){do some stuff...
    // and so on
} 
```

这些变量中的每一个都是在函数范围内重新创建的。

我的问题是：

这样做以降低开销的最有效方法是什么？

也许：

```
var imgData,somevar1,somevar2,somevar3... an so on
function ImCalledEveryMouseMove(blah,blah)
{
    imgData = myctx.getImageData(0,0,canvas.width,canvas.height)
    somevar1 = (some maths process);
    somevar2 = (some maths process); 
```

因为没有新的内存分配？

也许：

```
var cache = {};
function ImCalledEveryMouseMove(blah,blah)
{
    cache.imgData = myctx.getImageData(0,0,canvas.width,canvas.height)
    cache.somevar1 = (some maths process);
    cache.somevar2 = (some maths process); 
```

不知道为什么，但我读到一些关于这是因为动态记忆或其他东西而有利的东西，但不记得为什么..

有人可以建议吗？

# haskell - 在 Haskell 中与 State monad 一起工作

> ID：11250328
> 
> 赞同：6
> 
> 时间：2012-06-28T17:57:58.443
> 
> 标签：haskell, monads

我一直在一点一点地学习一些 Haskell，并且正在（慢慢地）致力于理解 State monad，尝试编写一个重复状态计算的函数，直到状态满足一些布尔测试，并将返回的值收集到一个列表中以获得整体结果. 我终于成功了：

```
collectUntil :: (s -> Bool) -> State s a -> State s [a]
collectUntil f s = do s0 <- get
                      let (a,s') = runState s s0
                      put s'
                      if (f s') then return [a] else liftM (a:) $ collectUntil f s 
```

以便

```
simpleState = state (\x -> (x,x+1))

*Main> evalState (collectUntil (>10) simpleState) 0
[0,1,2,3,4,5,6,7,8,9,10] 
```

这是该任务的合理功能，还是有更惯用的方法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-28T19:01:34.040

您犯的错误与我第一次开始编写 monadic 代码时所犯的错误完全相同——使它变得过于复杂、过度使用`liftM`和未充分使用`>>=`（相当于，未充分使用`<-`符号）。

理想情况下，您根本不必提及`runState`或`evalState`在 state monad 中提及。您想要的功能如下：

*   读取当前状态
*   如果满足谓词`f`，则返回
*   如果不是，则运行计算`s`并将其结果添加到输出中

您可以直接这样做：

```
collectUntil f comp = do
    s <- get                              -- Get the current state
    if f s then return []                 -- If it satisfies predicate, return
           else do                        -- Otherwise...
               x  <- comp                 -- Perform the computation s
               xs <- collectUntil f comp  -- Perform the rest of the computation
               return (x:xs)              -- Collect the results and return them 
```

请注意，如果它们是同一个 monad 的一部分，您可以嵌套 do 语句！这非常有用——它允许您在一个 do 块内进行分支，只要 if 语句的两个分支都指向相同的单子类型。

此函数的推断类型为：

```
collectUntil :: MonadState t m => (t -> Bool) -> m a -> m [a] 
```

如果您愿意，您可以将其专门用于该`State s`类型，尽管您不必：

```
collectUntil :: (s -> Bool) -> State s a -> State s [a] 
```

甚至可能最好保留更一般的状态，以防您以后想使用不同的 monad。

### 直觉是什么？

每当`s`有状态计算并且您在状态单子中时，您都可以

```
x <- s 
```

并且`x`现在将得到计算的结果（就像您`evalState`在初始状态下调用并输入一样）。如果你需要检查状态，你可以做

```
s' <- get 
```

并将`s'`具有当前状态的值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-28T18:41:37.607

大多数 monad 都带有一些原始的“运行”操作，例如`runState`,`execState`等等。如果你经常在 state monad`runState` *内部*调用，这意味着你并没有真正使用 monad 提供的功能。你写

```
s0 <- get                    -- Read state
let (a,s') = runState s s0   -- Pass state to 's', get new state
put s'                       -- Save new state 
```

您不必明确地传递状态。这就是状态单子所做的！你可以写

```
a <- s 
```

否则，该功能看起来是合理的。由于`a`是“if”两个分支中结果的一部分，为了清楚起见，我建议将其考虑在内。

```
collectUntil f s = step
  where
    step = do a <- s
              liftM (a:) continue
    continue = do s' <- get
                  if f s' then return [] else step 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T20:17:12.250

对于这样一个简单的任务，我不会使用`State`monad。其他人已经阐明了您实际上应该如何编写 monadic 版本，但我想添加我的个人（更简单）解决方案，因为您要求以最惯用的方式来编写它。

```
collectWhile, collectUntil :: (a -> a) -> (a -> Bool) -> a -> [a]
collectWhile f cond z = takeWhile cond $ iterate f z
collectUntil f cond z = collectWhile f (not . cond) z 
```

或者，如果您只想要以下行就足够了`collectUntil`

```
collectUntil f cond z = takeWhile (not.cond) $ iterate f z 
```

这里[的 takeWhile](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v%3atakeWhile)和[iterate](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v%3aiterate)来自[Prelude](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html)。为了完整起见，因为它是实现的核心，以下是迭代的（非常简单的）代码：

```
iterate f x =  x : iterate f (f x) 
```

**警告**：我的回答可能不够清楚，但这个解决方案并不完全相同，因为我通过在外面工作将状态和结果融合在一起`State`。当然，人们可以通过使用`f :: (s, a) -> (s, a)`然后投影`map fst`或`map snd`分别获得中间状态或结果列表来做非常相似的事情。不过，为了便于记号，将解决方案与 一起使用可能会更简单`State`。

# java - 保存 ServletHttpRequests (Java)

> ID：11250329
> 
> 赞同：0
> 
> 时间：2012-06-28T17:57:58.793
> 
> 标签：java, http, servlets, httprequest

无论如何要`HttpRequest`在Java中保存a？基本上我有一个调度 servlet，我想做的是保存`post`请求并将其交给作业，以便他们决定如何处理它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T18:19:51.593

我认为最好只将您需要的部分提取到自定义对象中。如果你想要所有的请求参数，你总是可以使用获取参数映射的全部内容`getParameterMap()`。这样您就不能随身携带任何不需要的字段，并且能够使用您想要的任何存储技术进行保存。

# javascript - 在 HTML 中跟随鼠标的动画图像掩码

> ID：11250331
> 
> 赞同：5
> 
> 时间：2012-06-28T17:58:17.013
> 
> 标签：javascript, html, canvas

如果我将页面的光标更改为“手电筒”（例如，一个圆圈），并且我只想在将光（圆圈）通过它时才显示图像，那么最好的方法是什么？使用css剪辑？但是它只能做矩形，所以我必须使用画布？也许有一种简单的方法可以使这两个图像相交？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-29T14:14:10.760

您可以使用画布轻松完成此操作。

这是一个例子：

[http://jsfiddle.net/gfZ5C/](http://jsfiddle.net/gfZ5C/)

在每次鼠标移动时，我们清除画布，重新绘制图像，从矩形中切出一个圆形的剪辑区域，并在整个画布上绘制黑色（仅在剪辑区域上绘制）

有道理？

有*很多*方法可以实现这种效果和类似的效果。您还可以使用一些帆布魔法制作更精美的光源。例如，请参阅我的答案：[画布 - 在所有区域中填充一个矩形，这些区域完全透明](https://stackoverflow.com/questions/7909865/canvas-fill-a-rectangle-in-all-areas-that-are-fully-transparent/7916842#7916842)

# mysql - mysql选择过去一小时的记录，没有日期

> ID：11250338
> 
> 赞同：2
> 
> 时间：2012-06-28T17:58:43.657
> 
> 标签：mysql, datetime, comparison

我有一张要发送的每日电子邮件表。所以我将一天中的时间存储为时间字段（00:00:00，没有日期）。几个示例行可能是：

```
mike, timeOfDay = 07:03 meaning "send mike an email daily at 7:03AM"
corey, timeOfDay = 23:30 meaning "send corey an email daily at 11:30PM" 
```

在任何给定时间，我都想查找过去一小时内要发送的电子邮件。例如，如果我在早上 7:55 运行它，它应该会在早上 6:55 到早上 7:55 之间获取所有记录。这将包括迈克的电子邮件。如果脚本在上午 12:15 (00:15) 运行，它应该获取 11:15PM (23:15) 和 12:15AM (00:15) 之间的所有记录。这将包括 corey 的电子邮件。

我查看了[SO](https://stackoverflow.com/questions/2999416/find-records-produced-in-the-last-hour)和网络上的[每个](https://stackoverflow.com/questions/6276110/mysql-select-records-1-hour-or-younger-on-datetime-column) [示例](https://stackoverflow.com/questions/2999416/find-records-produced-in-the-last-hour)，除了小时之外，它们似乎都需要日期。

尽可能接近：

```
SELECT
  `notification`. *,
  now() as now,
  DATE_SUB( NOW( ) , INTERVAL 1 HOUR ) as 1hourAgo
FROM `notification`
WHERE (
  `notification`.`timeofday` > DATE_SUB( NOW( ) , INTERVAL 1 HOUR )
)
AND (
  `notification`.`timeofday` < NOW( )
) 
```

我想出了一个 hack 来匹配这个小时和最后一个小时，在现在之前，但它看起来，嗯，hackish。必须有正确的方法来做到这一点！

这是我的黑客。

```
SELECT
  `notification`. * ,
  HOUR( NOW( ) ) AS HOUR ,
  HOUR( DATE_SUB( NOW( ) ,
  INTERVAL 1 HOUR ) ) AS 1hourago,
  time( now( ) ) AS now
FROM `notification`
WHERE (
     HOUR( `notification`.`timeofday` ) = HOUR( NOW( ) )
  OR HOUR( `notification`.`timeofday` ) = HOUR( DATE_SUB( NOW( ) , INTERVAL 1 HOUR ) )
)
AND (
  `notification`.`timeofday` < TIME( NOW( ) )
) 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T18:23:34.683

假设您将`timeofday`字段保存为`TIME`，您可以使用：

```
SELECT
  `notification`.*,
  TIME(NOW()) AS right_now,
  TIME(DATE_SUB(NOW(), INTERVAL 1 HOUR)) AS one_hour_ago
FROM `notification`
WHERE (
  HOUR(NOW()) != 0
  AND `notification`.`timeofday` BETWEEN TIME(DATE_SUB(NOW(), INTERVAL 1 HOUR)) AND TIME(NOW())
) OR (
  HOUR(NOW()) = 0
  AND (
       `notification`.`timeofday` BETWEEN TIME(DATE_SUB(NOW(), INTERVAL 1 HOUR)) AND '24:00'
    OR `notification`.`timeofday` BETWEEN '0:00' AND TIME(NOW())
  )
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T18:19:31.537

你没有说你的 timeofday 字段存储在什么数据类型中。我假设它是一个`TIME`字段。

当您说“从最后一小时开始”时，大概是指“从前一小时开始到刚刚结束的一小时结束之前的时间”。也就是说，例如，如果您在 10:03 运行此程序，您希望时间在 9:00（含）到 10:00（不含）的范围内。

这就是你要做的。

```
SELECT TIME(TIME_FORMAT(n.timeofday,'%H:00:00')) as hour, n.whatever, n.whatelse
  FROM `notification` as n
 WHERE n.timeofday >= TIME(DATE_FORMAT(NOW() - INTERVAL 1 HOUR, '%H:00:00'))
   AND n.timeofday <  TIME(DATE_FORMAT(NOW(), '%H:00:00')) 
```

如果您在 timeofday 表上放置索引，即使您的通知表中有很多行，这也将具有良好的性能。

如果您要投入生产，那么任何对当前时刻的依赖都是一个坏主意：各种批处理作业、事件和 cronjobs 不会真正地、永远地在您告诉它们的那一刻运行。如果您在运行每小时工作时遵循依赖当前时刻的策略，您有时会发送额外的消息或错过一些消息。这就是为什么您应该考虑使用`TIME(DATE_FORMAT(NOW(),'%H:00:00'))`将当前时间截断为当前时间的原因。它还可以很好地应对午夜翻转。

# java - 读/写到 XML

> ID：11250339
> 
> 赞同：1
> 
> 时间：2012-06-28T17:58:45.267
> 
> 标签：java, android, xml, file-io

我想将字符串写入 xml 文件中的键，然后再调用它。我该怎么做？

例如，如果用户要在 EditText 视图中输入一串字符，我希望能够将其存储并与存储的字符串等内容进行比较。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T23:15:21.767

在 Android 中，做 XML 时推荐使用 XmlPullParser。这是一个关于如何使用它的非常简单的示例。

```
 import java.io.IOException;
 import java.io.StringReader;

 import org.xmlpull.v1.XmlPullParser;
 import org.xmlpull.v1.XmlPullParserException.html;
 import org.xmlpull.v1.XmlPullParserFactory;

 public class SimpleXmlPullApp
 {

     public static void main (String args[])
         throws XmlPullParserException, IOException
     {
         XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
         factory.setNamespaceAware(true);
         XmlPullParser xpp = factory.newPullParser();

         xpp.setInput(new StringReader ("<foo>Hello World!</foo>"));
         int eventType = xpp.getEventType();
         while (eventType != XmlPullParser.END_DOCUMENT) {
          if(eventType == XmlPullParser.START_DOCUMENT) {
              System.out.println("Start document");
          } else if(eventType == XmlPullParser.END_DOCUMENT) {
              System.out.println("End document");
          } else if(eventType == XmlPullParser.START_TAG) {
              System.out.println("Start tag "+xpp.getName());
          } else if(eventType == XmlPullParser.END_TAG) {
              System.out.println("End tag "+xpp.getName());
          } else if(eventType == XmlPullParser.TEXT) {
              System.out.println("Text "+xpp.getText());
          }
          eventType = xpp.next();
         }
     }
 } 
```

以下是一些可能有帮助的链接：

*   几种方法 - [http://www.ibm.com/developerworks/opensource/library/x-android/](http://www.ibm.com/developerworks/opensource/library/x-android/)
*   我从这里得到了这个例子 - [http://www.vogella.com/articles/AndroidXML/article.html](http://www.vogella.com/articles/AndroidXML/article.html)
*   很好，更完整的例子 - [http://www.androidhive.info/2011/11/android-xml-parsing-tutorial/](http://www.androidhive.info/2011/11/android-xml-parsing-tutorial/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T18:00:51.147

此博客显示了您正在寻找的内容的示例。其他 30 天也很有帮助。

[http://chrisrisner.com/31-Days-of-Android--Day-4%E2%80%93Our-First-App](http://chrisrisner.com/31-Days-of-Android--Day-4%E2%80%93Our-First-App)

```
<EditText
    android:id="@+id/editText1" /> 
```

然后在 .java 文件中...

```
EditText editText1 = (EditText) findViewById( R.id.editText1 );
String textEntered = editText1.getText(); 
```

除了将视图的文本设置为该字符串之外，我想不出将字符串存储在 XML 文件中的原因，这可以通过调用 .setText(enteredText) 在 .java 文件中完成

不过，您应该查看博客以获取更好的文档...

# java - Hibernate - 在持久化超类时创建子类

> ID：11250341
> 
> 赞同：0
> 
> 时间：2012-06-28T17:58:53.150
> 
> 标签：java, hibernate, orm, hibernate-mapping

我在为我的 Web 应用程序创建正确的休眠映射时遇到问题。

我有一个表用户（主键是`id`）。用户表中的数据对于用户来说不会经常更改。我有另一个表 user_editable_data 具有用户可编辑的数据。表结构如下

用户名|用户名|密码

user_editable_data id|info1|info2

user_editable_data 中的 id 与 User.id 相同

我有两个与表对应的实体（User 和 UserEditableData）。我的要求是，每当创建用户时，我都需要在 user_editable_data 表中创建一个条目。

[按照这里](http://www.mkyong.com/hibernate/hibernate-one-to-one-relationship-example/)的教程，我可以通过使用休眠映射成功地做到这一点。但是，我应该在我不想使用的 UserEditableData 类中有一个 User 对象。

我尝试使用映射。但是，当我坚持用户对象时，只有用户对象才会被创建。

有人可以建议我一种映射 User 和 UserEditableData 的方法，这样当我们持久化/创建 User 时，UserEditableMapping 也应该使用与 User 中相同的 id 创建。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T18:58:59.817

摆脱 UserEditableData 并将两个表映射到同一个类，如此[处](http://www.coderanch.com/t/218948/ORM/java/Hibernate-Hibernate-Mapping-Multiple-Table)或[此处](https://stackoverflow.com/questions/1667918/hibernate-mapping-two-tables-to-one-class)所述。[您可以在Hibernate Manual](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/mapping.html)的第 5.1.20 节中找到 <join> 标签的官方文档

# php - Yii 基本概念：$this 定义在哪里？

> ID：11250342
> 
> 赞同：3
> 
> 时间：2012-06-28T17:58:57.933
> 
> 标签：php, yii

我正在看 Yii Framework 关于博客应用程序的教程。我正在理解，但我不理解一个主要组件：这是在特定 .php**视图**文件的开头找到的。

```
<?php
$this->breadcrumbs=array(
    'Manage Posts',
);
?> 
```

我只是想知道它`$this`来自哪里。据我了解，`$this`只有在类的范围内才能使用。但是，我看到这里没有实现任何类，所以任何人都可以告诉我 Yii 是如何为我做这件事的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T18:29:04.707

`$this`这里指的是当前的控制器类。如果您在*components/Controller.php*中看到控制器，您还会看到一个`$breadCrumbs=array();`. 请参阅[视图的权威指南](http://www.yiiframework.com/doc/guide/1.1/en/basics.view "http://www.yiiframework.com/doc/guide/1.1/en/basics.view")：

> 在视图脚本中，我们可以使用**$this**访问控制器实例。因此，我们可以通过在视图中评估*$this->propertyName来获取控制器的任何属性。*

控制器最终使用[renderInternal](http://www.yiiframework.com/doc/api/1.1/CBaseController#renderInternal-detail "http://www.yiiframework.com/doc/api/1.1/CBaseController#renderInternal-detail")渲染视图。如果你看到那个函数的源代码，你会看到[php 的`require()`](http://php.net/manual/en/function.require.php "http://php.net/manual/en/function.require.php")：

```
public function renderInternal($_viewFile_,$_data_=null,$_return_=false)
{
    // we use special variable names here to avoid conflict when extracting data
    if(is_array($_data_))
        extract($_data_,EXTR_PREFIX_SAME,'data');
    else
        $data=$_data_;
    if($_return_)
    {
        ob_start();
        ob_implicit_flush(false);
        require($_viewFile_);
        return ob_get_clean();
    }
    else
        require($_viewFile_);
} 
```

由于使用了 require ，因此 $this 可用于包含的代码：

> 当一个文件被包含时，它包含的代码继承了包含发生的行的变量范围。从那时起，调用文件中该行的任何可用变量都将在被调用文件中可用。但是，包含文件中定义的所有函数和类都具有全局范围。

因此，当我们这样做时`$this->render('view');`，`view`将可以访问 $ `this`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T18:01:00.027

我很确定 Yii 会将模板编译成类，所以在运行时你确实有一个类。检查`__FILE__`和`get_class($this)`了解详情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T18:02:51.520

如果这个模板只是`require`一个方法中的 d，它实际上进入了对象范围。So`this`代表一些呈现模板的 View 对象。

# angularjs - AngularJS 如何与服务器端 Java EE 代码对话？

> ID：11250343
> 
> 赞同：1
> 
> 时间：2012-06-28T17:59:03.953
> 
> 标签：angularjs

刚找到 AngularJS，想在 GAE 上试用一个简单的示例 CRUD 应用程序。

想法是将记录保存在mysql db上。

在传统的 webapp 中，我的分层应该是`client->controller->service->dao->db`.

任何对简单教程或文章的引用都会很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T09:08:26.167

最简单的方法是将应用程序的服务器端构建为 REST 服务器，将 AngularJS 应用程序作为静态页面提供服务，然后让 AngularJS 应用程序通过`$http`服务调用服务器。

我对 Google App Engine 不是特别熟悉，但似乎有一些对 REST 有用的资源：

*   [http://code.google.com/p/appengine-rest-server/](http://code.google.com/p/appengine-rest-server/)
*   [http://code.google.com/p/gae-json-rest/](http://code.google.com/p/gae-json-rest/)
*   [http://answers.oreilly.com/topic/2727-deploy-java-restful-application-on-the-google-app-engine/](http://answers.oreilly.com/topic/2727-deploy-java-restful-application-on-the-google-app-engine/)

# php - 如何从特定 MongoDB 文档中的对象数组中获取特定对象？

> ID：11250346
> 
> 赞同：3
> 
> 时间：2012-06-28T17:59:15.123
> 
> 标签：php, mongodb

我的 MongoDB 文档有结构：

```
{
    _id : "12345",
    name : "foo",
    object : {
        array_of_objects : [{
            id : 507,
            name : "some name",
            dt : "2012-06-27 16:35:50"
        },{
            id : 506
            name : "some other name",
            dt : "2012-06-21 16:09:05"
        },
        …
        ]
    }
} 
```

我需要从**array_of_objects中获取一个具有指定****名称**的文档的特定 id 的对象。我使用 php 并尝试执行下一个代码：

```
$collection->find(array('name' => 'foo', 'object.array_of_objects.id' => 507)); 
```

它返回**array_of_objects**的所有元素，而不是**id**为507 的元素。之后我尝试使用 $elemMatch 进行查询：

```
$collection->find(array('name' => 'foo', 'object.array_of_objects' => array('$elemMatch' => array('id' => 507)))); 
```

但它的回报是一样的。:( 我的 MongoDB 版本 2.0.6。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T19:27:31.637

此问题已解决，将在 MongoDB 版本 2.2 中提供，下一个稳定版本：[https ://jira.mongodb.org/browse/SERVER-828](https://jira.mongodb.org/browse/SERVER-828)

我刚刚尝试使用 MongoDB 2.1.2（不稳定，开发版本）：

样本文件：

```
{ "_id" : 1, "object" : { "array" : [ { "id" : 507, "name" : "Jenna" }, { "id" : 506, "name" : "Matt" } ] } } 
```

询问：

```
db.food.find({_id:1, "object.array.id":506},{_id:0, "object.array.$":1}) 
```

结果：

```
{ "object" : { "array" : [ { "id" : 506, "name" : "Matt" } ] } } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T18:03:53.710

MongoDB 无法做到这一点：例如，MongoDB 不会深入到特定文档以从数组中提取项目，您必须自己执行此操作。

现在 PHP 驱动程序可能会做更多的工作，我不知道——我说的是 MongoDB 核心查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T01:01:39.593

所以，我用 MapReduce 做到了。希望这能节省一些人的时间和精力。

```
$name = 'foo';
$id = 507;

$mongo = new Mongo('…');

$db = $mongo->my_db;

$map = new MongoCode('function(){'.
    'this.object.array_of_objects.forEach(function(obj){'.
        'if (obj.id == '.$id.')'.
            'emit(1, obj);'.
    '});}'
);

$reduce = new MongoCode('function(k,v){ return [k,v]; }');

$response = $db->command(array(
    'mapreduce' => 'my_collection', 
    'map' => $map,
    'reduce' => $reduce,
    'query' => array('name' => $name),
    'out' => array('inline' => 1)
));

var_dump($response['result']); 
```

# generics - 在 F# 方法签名中，通用能指 ' 和符号 ^ 有什么区别

> ID：11250347
> 
> 赞同：5
> 
> 时间：2012-06-28T17:59:19.820
> 
> 标签：generics, f#, method-signature

我理解勾号表示通用参数，如：

```
Seq.append : seq<'T> -> seq<'T> -> seq<'T> 
```

但是插入符号表示什么，如：

```
Seq.average : seq<^T> -> ^T 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T18:14:59.697

插入符号表示必须静态解析类型参数，这通常是因为对必须满足的类型有特定的约束，而这些约束不能在正常的 .NET 元数据中表示。例如，`Seq.average "test"`即使`"test"`is a也不能调用`seq<char>`，因为`char`s 不支持必要的算术运算。

这些静态解析的类型变量仅来自`inline`定义，当使用这样的函数时，它的主体是内联的，以便编译器可以插入正确的特定于类型的指令。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-28T18:16:35.997

详细签名如下：

> Seq.average : seq<^T> -> ^T（需要 ^T 和静态成员 (+) 和 ^T 和静态成员 DivideByInt 和 ^T 和静态成员零）

与 不同`Seq.append`，[Seq.average](http://msdn.microsoft.com/en-us/library/ee340240.aspx)需要对元素类型进行更多限制。特别：

```
 _ DivideByInt (s1 + s2 + ... + sn) n where n <> 0
Seq.average {s1; s2;...; sn} = /
                               \_ ^T.Zero where n = 0 
```

如您所见，`(+)`和`DivideByInt`都是`Zero`必需的，这样`Seq.average<^T>`才有意义。

关于泛型的有用信息可以在[这里^(MSDN)](http://msdn.microsoft.com/en-us/library/dd233215)找到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T18:25:05.757

尽管正如其他人所指出的那样，按照惯例`^T`，使用 with`inline`和`'T`is not，两者是~~可以互换的~~ ^(（有时？）)。

~~因此，从技术上讲，您的问题的答案是“没有区别”。~~

kvb指出：有*区别*。但这并不像其他答案所表明的那样明确。在某些情况下，两者*可以*互换，例如，

```
let inline add (x:^T) (y:^T) = x + y
let inline add (x:'T) (y:'T) = x + y 
```

或者

```
let f (x:^T) = !x
let f (x:'T) = !x 
```

约定*是*明确的，而实施不是。

# android - 在 maven android 构建期间，基本 java 类仍在类路径中

> ID：11250352
> 
> 赞同：0
> 
> 时间：2012-06-28T17:59:38.043
> 
> 标签：android, maven, classpath

我遇到了一个相当奇怪的问题，原因是 android java 实现与 sun java 实现不同，并且在 maven 构建期间，基本 java 类仍然包含在类路径中（一直到最后）安卓项目。我认为解决方案是在类路径上没有 java 类，但我似乎无法找到一种方法来做到这一点。

基本上，在 java.util.concurrent 中有一个名为 AbstractExecutorService 的类（在 android 和 java 中）。java 类包含几个名为 newTaskFor 的方法，我想在 android 中使用它们，但 android 实现没有它们。没问题，我将实现它们（进行一些更改，例如使用 Future 而不是 RunnableFuture）。这在 ant（我们正在迁移的构建工具）中运行良好。

问题是，当 maven 尝试编译我的类（它扩展了 AbstractExecutorService），而不是在找不到它们时将我的方法添加到 android 实现中，它继续沿着类路径，找到 java 方法并抱怨返回类型不匹配。理想情况下，我认为 java 类甚至不应该在 android 构建期间可用，因为它们所能做的就是让你认为你可以运行你真的不能运行的方法，但目前你可以运行各种 java 方法而不是在 android 中可用，它会编译得很好（在 maven 中）。

有没有人对此有任何建议或解决方案？有人遇到类似的事情吗？

**编辑：这是 pom 的相关部分（省略了存储库等）：**

```
<dependencies>
    <dependency>
        <groupId>org.beanshell</groupId>
        <artifactId>bsh</artifactId>
        <version>2.0b5</version>
        <optional>true</optional>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.14</version>
        <optional>true</optional>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
        <version>1.6.4</version>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>com.google.android</groupId>
        <artifactId>android-with-java</artifactId>
        <version>2.2.1</version>
    </dependency>
    <dependency>
        <groupId>org.testng</groupId>
        <artifactId>testng</artifactId>
        <version>6.1.1</version>
    </dependency>
    <dependency>
        <groupId>org.jboss.byteman</groupId>
        <artifactId>byteman-bmunit</artifactId>
        <version>2.0.0</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>bouncycastle</groupId>
        <artifactId>bcprov-jdk15</artifactId>
        <version>140</version>
        <scope>test</scope>
    </dependency>
</dependencies>
<build>
    <sourceDirectory>src</sourceDirectory>
    <resources>
        <resource>
            <directory>conf</directory>
            <includes>
                <include>*.xml</include>
            </includes>
            <excludes>
                <exclude>*-service.xml</exclude>
            </excludes>
        </resource>
        <resource>
            <directory>${project.build.directory}/schema</directory>
        </resource>
        <resource>
           <directory>${project.basedir}</directory>
           <includes>
              <include>INSTALL.html</include>
              <include>LICENSE</include>
              <include>README</include>
           </includes>
        </resource>
        <resource>
          <directory>${project.basedir}/lib</directory>
          <includes>
             <include>licenses/thirdparty*</include>
          </includes>
        </resource>
    </resources>
    <plugins>
        <plugin>
            <artifactId>maven-compiler-plugin</artifactId>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
                <excludes>
                    <exclude>stuff/stuff/util/JUnitXMLReporter.java</exclude>
                </excludes>
            </configuration>
        </plugin>
       <plugin>
          <groupId>org.codehaus.mojo</groupId>
          <artifactId>build-helper-maven-plugin</artifactId>
          <version>1.7</version>
          <executions>
             <execution>
                <id>add-source</id>
                <phase>validate</phase>
                <goals>
                   <goal>add-source</goal>
                </goals>
                <configuration>
                   <sources>
                      <source>target/generated-sources</source>
                   </sources>
                </configuration>
             </execution>
             <execution>
                <id>add-test-source</id>
                <phase>validate</phase>
                <goals>
                   <goal>add-test-source</goal>
                </goals>
             </execution>
          </executions>
       </plugin>
       <plugin>
            <artifactId>maven-antrun-plugin</artifactId>
            <version>1.7</version>
            <executions>
                <execution>
                    <goals>
                        <goal>run</goal>
                    </goals>
                    <phase>process-resources</phase>
                  <configuration>
                    <tasks>
                        <echo>Precompiling magic ids and protocol ids</echo>    
                        <xslt in="conf/stuff.xml" out="target/generated-sources/stuff/stuff/ClassMagicEncoding.java"
                            style="conf/stuff.xslt">
                            <param name="type" expression="Magic"/>
                        </xslt>
                        <xslt in="conf/stuff.xml" out="target/generated-sources/stuff/stuff/ClassProtocolEncoding.java"
                            style="conf/stuff.xslt">
                            <param name="type" expression="Protocol"/>
                        </xslt>
                    </tasks>
                  </configuration>
                </execution>
                <execution>
                    <id>compile</id>
                    <phase>compile</phase>
                    <goals>
                        <goal>run</goal>
                    </goals>
                    <configuration>
                        <tasks>
                            <property name="compile_classpath" refid="maven.compile.classpath"/>
                            <property name="plugin_classpath" refid="maven.plugin.classpath"/>
                            <delete dir="${project.build.directory}/schema" failonerror="false"/>
                            <mkdir dir="${project.build.directory}/schema"/>
                            <java classname="stuff.stuff.util.XMLSchemaGenerator">
                                <classpath>
                                    <pathelement path="${compile_classpath}"/>
                                    <pathelement path="${plugin_classpath}"/>
                                </classpath>
                                <arg line="-o ${project.build.directory}/schema"/>
                            </java>
                        </tasks>
                    </configuration>
                </execution>
            </executions>

            <configuration>
                <!-- prints the classpath to ensure correct jars are available -->
                <tasks>
                            <property name="compile_classpath" refid="maven.compile.classpath"/>
                    <echo>rawr=${compile_classpath}</echo>
                    <echo>java.class.path=${java.class.path}</echo>
                    <echo>CLASSPATH=${env.CLASSPATH}</echo>
                </tasks>
            </configuration>

            <dependencies>
                <dependency>
                    <groupId>xalan</groupId>
                    <artifactId>xalan</artifactId>
                    <version>2.7.1</version>
                </dependency>
                <dependency>
                    <groupId>xalan</groupId>
                    <artifactId>serializer</artifactId>
                    <version>2.7.1</version>
                </dependency>
                <dependency>
                    <groupId>ant</groupId>
                    <artifactId>ant-antlr</artifactId>
                    <version>1.6.5</version>
                </dependency>
                <dependency>
                    <groupId>org.apache.ant</groupId>
                    <artifactId>ant-nodeps</artifactId>
                    <version>1.8.1</version>
                </dependency>
            </dependencies>
        </plugin>
        <plugin>
            <groupId>org.apache.felix</groupId>
            <artifactId>maven-bundle-plugin</artifactId>
            <extensions>true</extensions>
            <configuration>
                <instructions>
                    <Main-Class>stuff.stuff.Version</Main-Class>
                    <Implementation-Version>${project.version}</Implementation-Version>
                    <Export-Package>
                        schema;version=${project.version},
                        ${project.groupId}.*;version=${project.version}
                    </Export-Package>
                    <Bundle-RequiredExecutionEnvironment>J2SE-1.6</Bundle-RequiredExecutionEnvironment>
                </instructions>
            </configuration>
        </plugin>
        <plugin>
            <groupId>com.jayway.maven.plugins.android.generation2</groupId>
            <artifactId>android-maven-plugin</artifactId>
            <version>3.2.0</version>
            <extensions>true</extensions>
                <configuration>
                    <sdk>
                         <platform>8</platform>
                    </sdk>
                    <undeployBeforeDeploy>true</undeployBeforeDeploy>
                </configuration>
        </plugin>
    </plugins>
</build> 
```

**Edit2：这是我得到的编译错误。**

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.3.2:compile (default-compile) on project mystuff: Compilation failure: Compilation failure:
[ERROR] /home/stuff/stuff/ExecutionService.java:[775,28] <T>newTaskFor(java.lang.Runnable,T) in stuff.ExecutionService cannot override <T>newTaskFor(java.lang.Runnable,T) in java.util.concurrent.AbstractExecutorService; attempting to use incompatible return type
[ERROR] found   : java.util.concurrent.Future<T>
[ERROR] required: java.util.concurrent.RunnableFuture<T>
[ERROR] /home/stuff/ExecutionService.java:[791,28] <T>newTaskFor(java.util.concurrent.Callable<T>) in stuff.ExecutionService cannot override <T>newTaskFor(java.util.concurrent.Callable<T>) in java.util.concurrent.AbstractExecutorService; attempting to use incompatible return type
[ERROR] found   : java.util.concurrent.Future<T>
[ERROR] required: java.util.concurrent.RunnableFuture<T>
[ERROR] -> [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.3.2:compile (default-compile) on project mystuff: Compilation failure 
```

注意：ExecutionService 是扩展 AbstractExecutorService 的类。但是，我希望它只扩展 android 版本而不是基本 java 版本。我什至尝试将newTaskFor的存根方法插入到AbstractExecutorService的android版本中（认为编译器应该假设我正在覆盖这些方法而不是基本的java方法 - 尽管我应该注意到代码中没有@Override ) 但它仍然没有工作。

没有人要求他们，但这是我的方法声明：

```
protected <T> Future<T> newTaskFor(Runnable runnable, T value) 
{
//stuff
}

protected <T> Future<T> newTaskFor(Callable<T> callable) 
{
//stuff
{ 
```

我目前的理论是它与模板类型有关，但我不确定如何去证明或修复它。

**编辑 6/30：**我还应该注意这*不是*新代码。它已有一年多的历史，从那时起一直使用 ant 完美编译。它已成为众多稳定版本的一部分。我们现在正在将我们的构建过程迁移到 maven，因此我正在尝试设置这个包以正确构建。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T16:59:13.143

问题是 Maven 自动在类路径中包含 Oracle JDK，而 Android jar 提供了这些的替代实现，它们有时会有所不同。在这个阶段，我不知道是否可以告诉 Maven 编译器插件从其类路径中删除 JDK 并仅使用类路径上的依赖项。那将解决问题。

请在 Android Maven 插件问题跟踪器中创建一个问题，并可能通过询问 Maven 用户或开发人员列表进行调查。

# nhibernate - 需要将选择多个值的子查询转换为 nhibernate 查询（条件或 hql）

> ID：11250353
> 
> 赞同：0
> 
> 时间：2012-06-28T17:59:38.267
> 
> 标签：nhibernate, subquery, hql, criteria

我有以下需要转换为 nhibernate 的查询：

```
SELECT  o.* 
FROM orders o
INNER JOIN 
(
        -- get the most recent orders based on end_date (this implies the same order can exist in the orders table more than once)
        SELECT o2.order_id, MAX(o2.end_date) AS max_end_date 
        FROM orders o2
        GROUP BY o2.order_id
) most_recent_orders 
                ON o.order_id=most_recent_orders.order_id
                AND o.end_date=most_recent_orders.max_end_date
-- of the most recent orders, get the ones that are complete                
WHERE o.is_complete=1 
```

我知道 hql 不支持加入子查询，这就是为什么这不起作用。我不能使用“in”语句，因为子查询选择了 2 个值。我尝试使用休眠文档中的建议：

[http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html#queryhql-tuple](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html#queryhql-tuple)

```
from Cat as cat
where not ( cat.name, cat.color ) in (
    select cat.name, cat.color from DomesticCat cat
) 
```

但这引发了一个错误，因为 Sql Server 不喜欢“in”语句中的多个值。

任何帮助，将不胜感激！我对使用 Criteria 或 Hql 的解决方案持开放态度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T07:11:31.167

这是使用子查询来实现相同的

```
var maxDateQuery = DetachedCriteria.For<Order>()
    .Add(Restrictions.PropertyEq("OrderId", "order.OrderId"))
    .SetProjection(Projections.Property("EndDate"));

var results = session.CreateCriteria<Order>("order")
    .Add(Subqueries.Eq("EndDate",maxDateQuery))
    .Add(Restrictions.Eq("IsComplete", true))
    .List<Order>(); 
```

# java - 在struts 1.3中设置arraylist时出现空指针异常

> ID：11250354
> 
> 赞同：0
> 
> 时间：2012-06-28T17:59:40.540
> 
> 标签：java, struts-1

虽然我想将数组列表值设置为数组列表 bean，但它正在返回空指针异常。请检查动作类：

```
public ActionForward execute(ActionMapping mapping, ActionForm form,
        HttpServletRequest request, HttpServletResponse response)
        throws Exception {

    ArrayList dailysheetdata;
    DailysheetForm dailyform = (DailysheetForm) form;
    Class.forName("com.mysql.jdbc.Driver");
    Connection connect = DriverManager.getConnection("jdbc:mysql://localhost/Stonecrusher?"
                        + "user=Stonecrusher&password=xxxxxx");
    System.out.println("Connection"+connect);
    dailysheetdata = StoneCrusherData.getDailysheetData(connect);
    if(dailysheetdata==null)
        System.out.println("dailysheetdata null");
    else if(dailyform==null)
    System.out.println("dailyform null");
    else
    dailyform.setArraylist(dailysheetdata) ;//iam getting exception here
    return mapping.findForward(SUCCESS);
     } 
```

我的行动形式是

```
public class DailysheetForm extends ActionForm {
    // some getter and setter methods i used

    protected ArrayList arraylist;
    public ArrayList getArraylist() {
        return arraylist;
    }

    public void setArraylist(ArrayList arraylist) {

        this.arraylist = arraylist;

    } 
```

当我运行它时，出现以下异常，并且在 Tomcat 日志中显示**“dailyform 为空”**

类型异常报告

信息

描述 服务器遇到一个内部错误 () 阻止它完成这个请求。

例外

```
javax.servlet.ServletException: java.lang.NullPointerException
    org.apache.struts.action.RequestProcessor.processException(RequestProcessor.java:520)
    org.apache.struts.action.RequestProcessor.processActionPerform(RequestProcessor.java:427)
    org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:228)
    org.apache.struts.action.ActionServlet.process(ActionServlet.java:1913)
    org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:449)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)

root cause

java.lang.NullPointerException
    com.myapp.struts.DialysheetListAction.execute(DialysheetListAction.java:59)
    org.apache.struts.action.RequestProcessor.processActionPerform(RequestProcessor.java:425)
    org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:228)
    org.apache.struts.action.ActionServlet.process(ActionServlet.java:1913)
    org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:449)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
note The full stack trace of the root cause is available in the Apache Tomcat/7.0.27 logs. 
```

我无法找到原因。请帮忙解决，并说明原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T11:07:26.143

问题是`DailysheetForm`类对象不是由框架创建的。

原因是你没有配置`FormBean`类和`Action`类是正确的`struts-config.xml`

首先你应该检查哪个页面（哪些数据？）提交给动作类，即

```
DailysheetForm dailyform = (DailysheetForm) form; 
```

检查这一行，您正在将类型转换`form`为`DailysheetForm`类型对象，然后框架会自动调用`DailysheetForm`操作表单的 setter 方法，所以也许在这里您得到了`NullPointerException`我想所以检查它..

还有一件事你必须签入`struts-config.xml`条目，即 in`<action> tab name attribute value`必须与`<form-beans>`映射匹配，还要检查包名称......

# sql - SQL - 基于某些条件动态生成的插入或选择语句

> ID：11250358
> 
> 赞同：0
> 
> 时间：2012-06-28T17:59:49.730
> 
> 标签：sql, sql-server, oracle, sql-server-2008

假设我有一张包含以下数据的表格

客户表：

```
Name      amount    date_created    invoice_number
--------------------------------------------------
John     50         11April2012          12
Bob      150        15April2012          32
David    506        10May2012            52
Paul     80         12Aug2012            12
Mark     10         11Jan2012            52 
```

汇总表：

```
Name        amount  
---------------------
Sally       250 
Darren-32   150 
```

我想选择 date_created 在 current_quarter 的 start_date 和 end_date 之间的所有行。如果 date_created 在当前季度内，我想在执行插入语句之前将 invoice_number 附加到名称（参见上面汇总表中的示例）。

```
INSERT summary(name, amount)
SELECT name|| '-' || invoice_number, date_created, invoice_number
From Customer; 
```

*   我如何修改上述内容以使用“解码”函数或“案例”函数（或任何其他“IF 语句”类型函数）来检查 date_created 的值，如果 date_created 在当前季度内，则附加 invoice_number。

*   显然，我需要知道当前季度的开始和结束日期，并且需要在进行比较之前将它们存储在某个地方。纯 SQL 有可能吗？PL/SQL 不是一个选项。

假设我们在第一季度（4 月 - 6 月），最终结果应该是：

```
Name        amount  
---------------------
Sally       250 
Darren-32   150
John-12     50
Bob-32      150
David-52    506
Paul        80
Mark        10 
```

我正在从 Oracle 10G 数据库中读取客户表并将摘要填充到驻留在 SQL 服务器数据库中的“摘要”表中。我插入 SQL Server 数据库的事实并不重要。我正在从 Oracle 数据库中读取数据，因此语法应该与 Oracle 兼容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T18:02:00.383

```
declare @CurrentQtr int
set @CurrentQty = CASE
  WHEN datepart(month, getdate()) in (1,2,3) THEN 1
  WHEN datepart(month, getdate()) in (4,5,6) THEN 2
  WHEN datepart(month, getdate()) in (7,8,9) THEN 3
  ELSE 4 END

SELECT name + case 
  WHEN datepart(month, date_created) in (1,2,3) AND @CurrentQtr = 1 THEN '-' + invoice_number 
  WHEN datepart(month, date_created) in (4,5,6) AND @CurrentQtr = 2 THEN '-' + invoice_number 
  WHEN datepart(month, date_created) in (7,8,9) AND @CurrentQtr = 3 THEN '-' + invoice_number 
  WHEN datepart(month, date_created) in (10,11,12) AND @CurrentQtr = 4 THEN '-' + invoice_number 
  ELSE '' end as Name, amount
From Customer; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T18:06:04.307

执行您在两个要点中描述的 Oracle 语法将是

```
SELECT (CASE WHEN     date_created >= trunc(sysdate,'Q') 
                  AND date_created < trunc(add_months(sysdate,3),'Q')
             THEN name || '-' || invoice_number
             ELSE name
         END),
       date_created, 
       invoice_number
  FROM Customer; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T18:12:35.390

像这样的东西？

```
 insert summary
 Select 
     Name || case 
         when datepart(dp_quarter, sysdate)=datepart(dp_quarter, date_Created)
   and extract(year from sysdate) = extract(year from date_Created) 
         then '-' || invoice_number
         else '' end,
 amount from Customer 
```

# php - 返回的变量的时间戳

> ID：11250363
> 
> 赞同：0
> 
> 时间：2012-06-28T18:00:18.330
> 
> 标签：php, javascript, jquery

当谈到 jQuery 时，我有点慢，因为我正试图在这种语言中站稳脚跟。我目前正在使用 FaceAPI，并且它运行良好。在识别阶段，我有一个返回信息数组的 Ajax 调用。

```
$.ajax({
                 url: 'http://api.face.com/faces/recognize.json?&uids=all&namespace=camera_app&detector=Aggressive&',
                 data: formdata,
                 cache: false,
                 contentType: false,
                 processData: false,
                 dataType:"json",
                 type: 'POST',
                 success: function (data) {
                     photo = data.photos[0];
                     handleResult(photo)
                 }, 
```

但我最感兴趣的是被称为 API 的“UID”将人的脸与他们的 UID 相匹配。我想知道的是，一旦返回 UID，可以放置时间戳并将其保存到我设置的数据库中吗？[旁注：用户照片仅提交给 API，我不会将它们保存在我的数据库中。我唯一要保存的是用户的名字/姓氏和 UID。] 我只是不知道时间戳函数如何与返回变量一起工作。

我希望以后能够在返回该信息时提取 UID 和时间戳匹配。

更新：

这是向用户显示 UID 和准确性（置信度）的位置：

```
function handleResult(photo) {
    console.log(photo)
    var s = "<h2 class='results'>Account Information:</h2>";
    if(photo.tags.length) {
      var tag = photo.tags[0].uids[0];
      s += "<p>";
     //$('#result') .html ('Welcome Back:' + photo.uid + ',' + 'Confidence:' + photo.confidence);
     if(tag.uid) s += "<li> User:" + tag.uid + "</li>";
     if(tag.uid) s += "<li> Accuracy:" + tag.confidence + "%" + "</li>";
     if(tag.uid == 0) s += "I got something, but the data wasn't clear. Sorry.";
      } else {
        s += "<p>Sorry, I didn't find any faces.</p>";
      }
      $("#result").html(s); 
```

在这个阶段，我想创建一个时间戳。

解决了：

```
function handleResult(photo) {
    console.log(photo)
    var s = "<h2 class='results'>Account Information:</h2>";
    var month = new Date().getMonth() + 1;
    var day = new Date().getDate();
    var hours = new Date().getHours();
    var min = new Date().getMinutes();
    var suffix = "AM";
    if (hours >= 12) {
    suffix = "PM";
    hours = hours - 12;
    }
    if (hours == 0) {
    hours = 12;
    }
    if (min < 10)
    min = "0" + min

    if(photo.tags.length) {
      var tag = photo.tags[0].uids[0];
      s += "<p>";
     //$('#result') .html ('Welcome Back:' + photo.uid + ',' + 'Confidence:' + photo.confidence);
     if(tag.uid) s += "<li> User:" + tag.uid + "</li>";
     if(tag.uid) s += "<li> Accuracy:" + tag.confidence + "%" + "</li>";
     if(tag.uid) s += "<li> Timestamp:" + month + "/" + day + "&nbsp;" +  hours + ":" + min + suffix + "</li>";
     if(tag.uid == 0) s += "I got something, but the data wasn't clear. Sorry.";

      } else {
        s += "<p>Sorry, I didn't find any faces.</p>";
      }
      $("#result").html(s); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T18:38:50.820

`handleResult`您可以使用 Date 函数在回调中创建时间戳。

```
var timestamp = Math.round( new Date().getTime() / 1000 ) 
```

# regex - 正则表达式 - 表达式必须以“*”开头。

> ID：11250364
> 
> 赞同：-1
> 
> 时间：2012-06-28T18:00:19.733
> 
> 标签：regex

有人可以帮助我的正则表达式挑战自我吗？匹配必须以两个字符开头`*.`并且长度必须超过两个字符。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T18:09:25.767

如 * 和 . 都是需要转义的元字符，加上行锚的开始，给我们留下 -

```
/^\*\./ 
```

在 www.regextester.com 上对此进行了测试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T18:04:53.163

问题是什么？星号告诉引擎匹配前面的字符零次或多次，在这种情况下你没有前面的字符。句点几乎匹配任何字符。

我不知道这是否有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T18:04:58.080

您应该可以使用正则表达式`\*\..+`或`(?=\*\.).{3}.*`

# android - Android OnlocationChanged storage

> ID：11250365
> 
> 赞同：0
> 
> 时间：2012-06-28T18:00:21.700
> 
> 标签：android, android-intent, android-maps, android-location

我想知道从该`onLocationChanged()`方法中保存纬度和经度的最佳方法是什么。

是使用**SharedPreferences**还是 I* *ntent/BroadcastReceiver* *？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T08:30:34.550

我只是将它存储在一个`public static`（类）变量中，以便您的所有活动都可以访问它。我认为 SharedPreferences 是矫枉过正（除非这个值需要在你的应用程序被杀死然后重新启动时仍然存在）。

# javascript - crm 2011 中的 getControl.setDefaultView 导致错误

> ID：11250366
> 
> 赞同：-1
> 
> 时间：2012-06-28T18:00:25.270
> 
> 标签：javascript, dynamics-crm, dynamics-crm-2011

我用了

```
document.getElementById("customerid").setAttribute("defaulttype", "2");
document.getElementById("customerid").setAttribute("lookuptype", "2");
Xrm.Page.getControl("customerid").setDefaultView("{A9AF0AB8-xxxx-xxxx-xxxx-C6281FED7FAB}"); 
```

在`Form_onchange()`，它给了我这个错误：

> 对象不支持此属性或方法”。

如果我关闭弹出窗口，程序实际上工作正常。

可能是什么问题？

PS 我正在运行 IE9 并且错误消息没有指定不支持哪种方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T23:03:03.673

“{A9AF0AB8-xxxx-xxxx-xxxx-C6281FED7FAB}”不是有效的 GUID。确保使用视图的确切 GUID。

好吧，我从来没有见过任何人 X 出 GUID ......

无论如何，取出第2行，看看是否有效。我检查了我的一些代码，我有第 1 行和第 3 行。

此外，您的查找需要已经能够在界面中从帐户切换到联系人（类型代码 1 -> 2）（作为不通过 javascript 的用户）。

# c# - 通过 C# 读取 SQL Server 中存储过程设置的值

> ID：11250370
> 
> 赞同：2
> 
> 时间：2012-06-28T18:00:44.083
> 
> 标签：c#, sql-server-2008, tsql, c#-4.0

我在读取 C# 中的存储过程设置的值时遇到了问题。

1.  我有一个存储过程，它将变量设置`@errorCode` `@errorStr`为 0 并在存储过程失败时“失败”。

2.  `@errorCode`我有一个调用存储过程的 C# 函数，并且值设置正确，但我无法`@errorStr`通过我的 C# 代码读取值。

3.  我的代码如下

* * *

```
string op = null;

cmd.CommandText = "PopulateAnswers";
cmd.CommandType = CommandType.StoredProcedure;
SqlParameter param = new SqlParameter("@i_xmlreq", SqlDbType.Xml);
param.Value = xmltext;
param.Direction = ParameterDirection.Input;
cmd.Parameters.Add(param);     
cmd.Connection = Conn1;   
SqlDataReader dataReader = cmd.ExecuteReader();

if (dataReader.HasRows)
{
    op = dataReader.GetValue(1).ToString();

    if (op.CompareTo("Failed To set Answers") == 0)
    {
        WriteErrorLog("Failed to execute the stored Procedure");
        return "1:Failed to execute stored procedure ";
    }
    else
    {
        return "0:success";
    }
} 
```

我在尝试读取数据时遇到错误。它表示您正在尝试读取一个不存在的值。但是当我将鼠标悬停在变量数据读取器上时，我能够正确地看到这些值。它位于 Datareader -> Results view -> [0] -> Non-static 下。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T18:08:59.600

您需要先调用 dataReader.Read() 才能获取值。

# sql-server - SQL Server 查询内部联接查询不起作用

> ID：11250372
> 
> 赞同：0
> 
> 时间：2012-06-28T18:00:48.797
> 
> 标签：sql-server

我在 sql server 2005 中有一个类似于下面的表

```
date_column | field1 | field2 
1 June 2012 | xyz    | 53
1 June 2012 | abc    | 87
2 June 2012 | xyz    | 81
3 June 2012 | xyz    | 54
3 June 2012 | abc    | 53
3 June 2012 | abc    | 54
4 June 2012 | mmn    | 53
4 June 2012 | xyz    | 54
4 June 2012 | mmn    | 54
4 June 2012 | mmn    | 55
3 June 2012 | abc    | 55
3 June 2012 | adf    | 86
3 June 2012 | asd    | 33 
```

我想找到具有相应字段 2 值“53”、“54”和“55”的所有字段 1 值。在同一日期内，因此输出应如下所示：

```
date_column | field1 | field2
3 June 2012 | abc    | 53
3 June 2012 | abc    | 54
3 June 2012 | abc    | 55
4 June 2012 | mmn    | 53
4 June 2012 | mmn    | 54
4 June 2012 | mmn    | 55 
```

我用内部连接尝试了下面的 sql 代码，但它不起作用

```
select date_column, field1, field2 from table1
inner join (select date_column, field1, field2 from table1 where field2
in ('54',  '55')) as table2
on table1.date_column = table2.date_column and
table1.field1 = table2.field1
where field1 in ('53', '54', '55')
group by date_column, field1, field2
order by date_column, field1, field2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T18:07:24.080

我相信这应该工作？你可能过于复杂了，或者我误解了这个问题

```
SELECT field1, date_column FROM table1
WHERE field2 in ('53', '54', '55')
GROUP BY field1, date_column
HAVING COUNT(DISTINCT field2) = 3 
```

[这是 SQLFiddle](http://sqlfiddle.com/#!3/bec9e/1)

你说你只需要找到field1，所以这应该可以工作，但如果你需要所有列，那么你可以这样做：

```
SELECT Table1.*
FROM Table1
JOIN
(
SELECT field1, date_column FROM table1
WHERE field2 in ('53', '54', '55')
GROUP BY field1, date_column
HAVING COUNT(DISTINCT field2) = 3
) AS MoreThan1
 ON Table1.field1 = MoreThan1.field1 and Table1.date_column = MoreThan1.date_column 
```

[这是 SQLFiddle](http://sqlfiddle.com/#!3/bec9e/3)

或者，如果您只想要 53-55 中的所有列，只需添加一个 WHERE：

```
WHERE Table1.field2 in ('53', '54', '55') 
```

[另一个小提琴](http://sqlfiddle.com/#!3/df08e/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T19:39:18.917

```
select table1.date_column, table1.field1, table1.field2 
from table1 
inner join (select date_column, field1, field2 
            from table1 
            where field2 in ('54',  '55')) as table2 
    on table1.date_column = table2.date_column and table1.field1 = table2.field1 
where table1.field1 in ('53', '54', '55') 
group by table1.date_column, table1.field1, table1.field2 
order by table1.date_column, table1.field1, table1.field2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T18:04:13.047

我认为以下内容可以满足您的要求：

```
select *
from t
where field1 in (select field1
                 from t
                 where field2 in ('53', '54', '55')
                 group by field1
                 having max(date) = min(date)
                ) 
```

子查询查找与您的条件匹配的 field1 id。外部查询只选择这些 id 的所有数据。

我想我最初误读了要求。你想要任何日期，这是真的。这个版本应该这样做：

```
select *
from t join
     (select field1, date
      from t
      where field2 in ('53', '54', '55')
      group by field1
      having count(distinct field2) = 3
    ) a
    on t.field1 = a.field1 and t.date = a.date 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T18:04:37.750

你只有一张桌子（table1），对吗？如果是这样，则不需要加入：

```
SELECT * FROM table1
WHERE field2 in ('53', '54', '55'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T18:18:22.423

```
SELECT DISTINCT t1.date_column, t1.field1, t1.field2
FROM table1 t1
WHERE EXISTS 
    (SELECT t2.date_column, t2.field1
    FROM table1 t2
    WHERE t2.field2 IN ('53', '54', '55')
        AND t2.date_column = t1.date_column
        AND t2.field1 = t1.field1
    GROUP BY t2.date_column, t2.field1
    HAVING COUNT(DISTINCT field2) = 3)
ORDER BY t1.date_column, t1.field1, t1.field2 
```

# mysql - 删除重复的行

> ID：11250375
> 
> 赞同：1
> 
> 时间：2012-06-28T18:01:03.933
> 
> 标签：mysql, duplicates, rows

我需要将字段 a 和 b UNIQUE 组合在一起。现在有一些重复的行。我打算做的是留下另一个字段c的**最低非零值的行。**

1) 查找重复项 2) 删除所有行，但字段 c**的非零值最低的行除外。**

性能也很重要，因为该表已经有相当多的记录......

我自己无法弄清楚，我已经很困惑了：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T18:20:55.730

[http://sqlfiddle.com/#!2/a81e6/14/0](http://sqlfiddle.com/#!2/a81e6/14/0)

看看小提琴，您只需将 SELECT 更改为 DELETE，它就会删除它选择的两条记录（即具有较高 C 列的两个重复项）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T18:15:47.613

您可以创建一个临时表，您可以在其中存储不同的记录，然后截断原始表并从临时表中插入数据。

```
CREATE TEMPORARY TABLE temp_table (a INT,b INT,c INT) 

INSERT INTO temp_table (a,b,c) SELECT * FROM table1 where c in (select min(c) from table1 group by a,b);

TRUNCATE table1;

INSERT INTO table1 (a,b,c) SELECT * FROM temp_table ; 
```

尝试这个。可能对你有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T19:46:04.610

您没有提供表的名称和列，这很容易提供正确的解决方案，但无论如何您可以使用以下命令

```
delete from highscores where id = (select * from (select id from highscores order by score desc limit 10,1) as t) 
```

希望这会删除除最低值之外的所有行，但不能执行具有非零值或小于零值的行。它将保留最低值并删除所有其他值。您不能在单个命令中拥有橙子和苹果，您必须运行两个命令。首先用于删除小于 0 的值，然后是最低记录。

# c# - 二维数组 C#

> ID：11250377
> 
> 赞同：3
> 
> 时间：2012-06-28T18:01:06.933
> 
> 标签：c#, arraylist, indexing

我想要两个数组：

1.  SupplierList - 包含我在图表中拥有的每个供应商元素的 int ID，然后对于我在此列表中拥有的每个供应商，都有一个单独的列表
2.  clientList - 包含该确定供应商的客户列表。

所以我想例如拥有：

`[12,13,53,165,76]`即供应商的 ID 和 `supplierList[12]`供应商 12 的 clientList。

我试过了：

```
 public void calculateMetrics (MDG graph)
    {
        ArrayList supplierList = new ArrayList();
        ArrayList clientList = new ArrayList();

        foreach (EA.Package package in modelRepository.Models)
        {
            foreach (EA.Package pack in package.Packages)
            {
                foreach (EA.Connector link in pack.Connectors)
                {
                    int supplier = link.SupplierID;
                    int client = link.ClientID;

                    for(int i=0; i<supplierList.Count; i++)
                    { 
                        if (supplier.Equals(supplierList[i]))
                        {
                            **((ArrayList)clientList((ArrayList)supplierList[i]).Add(client);**

                    supplierList.Add(clientList); 
```

但毫无疑问，它不起作用，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T18:03:11.060

为什么不创建一个包含客户 ID 列表作为成员变量的供应商对象？这样你只需要一个 List 来直接迭代，它会清理你的代码。

进一步来说：

供应商对象（类） - 具有 ID（整数）、客户（对象）

客户端对象（类）- 具有 ID，也许还有其他属性。

查找对象创建的语法；你会发现在面向对象的环境中，创建对象真的很有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T18:18:52.653

您可以设计如下，

```
Class Supplier
{
    int supplierID;
    List<Client> clientListObj;
    //Additional Details
}

Class Client
{
    int clientID;
    //Additional details
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T18:19:45.003

如果您熟悉字典，那我会使用。它将允许您轻松地遍历供应商或客户或特定供应商客户。要清理您的代码，您可以创建一个供应商类和一个客户类。

这是一个简单的例子

```
Dictionary<int, List<Client>> SuplierClients = new Dictionary<int, List<string>>();

        foreach (KeyValuePair<int, List<Client>> suplierClient in SuplierClients)
        {
            // your supplier id, could even replace it with a Supplier Object.
            Console.WriteLine(suplierClient.Key);
            Console.WriteLine(suplierClient.Value.ToString());
        } 
```

# jquery - 如何使用 jQuery 将上一个、当前和下一个单词包装在标签内？

> ID：11250378
> 
> 赞同：9
> 
> 时间：2012-06-28T18:01:10.940
> 
> 标签：jquery, text-parsing, word-wrap

不知道标题选得好不好……

我正在尝试在 HTML/JS/CSS 中模拟文本选择，以在真正选择文本时摆脱移动设备上的动作气泡。

更具体地说，我试图避免这种情况： ![在此处输入图像描述](../Images/af0c26d13c21b4a96c424a97a716e9e3.png)

视觉：

![在此处输入图像描述](../Images/26032ae1fb02066d6e9345ea753c4b9d.png)

我构建它的方式可能会改变，因为这无关紧要，选择的文本包含在 a`span.selection`和该标记内，还有两个插入符号用作处理程序：

```
Lorem ipsum dolor                            <!-- Unselected Text -->

<span class="selection">                     <!-- Start selection wrapper -->

  <span rel="previous" class="caret"></span> <!-- The left-side caret -->

  sit amet, consectetur                      <!-- The selected texts -->

  <span rel="next" class="caret"></span>     <!-- The right-side caret -->

</span>                                      <!-- End selection wrapper -->

adipiscing elit.                             <!-- Unselected Text --> 
```

理想情况下，使用拖放来选择更多或更少的文本会很有趣，但我相信这将很难做到，在这种情况下，可能使用单击插入符号来选择上一个或下一个单词并将它包裹在里面`.selection`不会那么糟糕。

这是jsfiddle：http: [//jsfiddle.net/m6Qx4/](http://jsfiddle.net/m6Qx4/)

周围的文本也可能包含 HTML 标记，例如：`<i>`、、和`<b>`，`<span>`并且`<ul>/<li>`可能存在使解析更加困难。

任何想法如何做到这一点？

**状态更新：**

`.click();`我实际上已经设法使用我的自定义 jQuery 方法使其与事件侦听器一起工作。

最终，只要它可用于移动设备，我将用可拖动的 jQuery UI 替换点击事件以选择周围的单词。

我当前的错误包括红色插入符号的重新定位。我已经尝试销毁它们并将它们添加/添加回来，但它仍然无法正常工作。更改文本节点后无法正确重新加载 DOM 可能是 Firefox 的错误？

**参考：** [**jsFiddle**](http://jsfiddle.net/RmrGQ/2/)

要检查**jsFiddle.net**由于最近中断而导致的运行状况，请访问他们的[**Tweets**](https://twitter.com/js_fiddle/)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T00:09:49.847

一些想法：

我看不出将所有内容包装在 a`<span>`中是一个可行的解决方案。当你有这样的事情时会发生什么？

```
<p>The <b>important terms</b> will be bolded in this text</p> 
```

当您选择 时`The important`，您将遇到一些标签混乱，其中`<span>`标签的主体想要与`<b>`标签的主体重叠。

我认为更好的解决方案是`<span>`在同一个类中使用多个选择标签。每次遇到 HTML 标记时，您都会跳过该标记并创建一个新的选择`<span>`。然后，当您重新定位插入符号时，您只需执行以下操作：

```
$(".selection:first").prepend(startCaret);
$(".selection:last").append(endCaret); 
```

我玩弄了这个想法，它对我来说效果很好。如果您想变得非常花哨，可以`<span>`在遇到相应的开始标签后找到结束标签时尝试合并 selection ，但这会做很多工作。

* * *

您的插入符号没有正确移动，因为您指定了一种绝对定位样式。将其更改为 relative 并为每个插入符号提供`&nbsp;`. 您必须使用其他一些定位 CSS 设置才能使其看起来恰到好处，但随着这些更改，它会按照您的预期移动（例如[此处](http://jsfiddle.net/RustyTheBoyRobot/RmrGQ/3/)）。

* * *

当我为此提出一些想法时，我尝试在插入符号上进行绝对定位，这样它们就不必在 selection 内移动`<span>`。那是个错误。我遇到了段落溢出到没有任何标记的新行的问题。坚持在您的选择中包含插入符号的想法`<span>`。

* * *

最后，提出几个思考问题：

*   你会限制范围吗？（即，如果您开始在`<p>`标签内选择，请不要让选择溢出该标签之外的下一个`<p>`或任何后续内容）
*   某些标签将无法选择吗？（即 , `<table>`,`<script>`等`<select>`）

我认为这个想法很酷，但它可能是一个非常庞大的项目。我会发布一些我尝试过的原型，当我让它们更加完善时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T01:20:32.663

为了解决 Rusty 的问题：

首先拆分标签：

```
var textBlock = textContainer.html(),
taglessArray = textBlock.split(/<[^>]*>/),
arrayOfTags = textBlock.match(/<[^>]*>/g),
tagsFirst = (textBlock[0] === '<') ? true : false, //parens for legibility only
//tagsFirst is a switch that tells us which to start splicing back in later 
```

现在让我们将所有非空白字符包装在我们可以使用的 span 标签中

```
var i = taglessArray.length;
while(i--){
    taglessArray[i].replace(/([^\s]*)/g,'<span class="selectableWord">$1</span>');
}
//not 100% sure I got that right - haven't tested - but the idea is , wrap all non
//whitespace/word boundary blocks in 'selectableWord' classed span tags 
```

现在把它们粘在一起。原始文本格式标记应保留位置。显然，“selectableWord”分类跨度应该避免布局/格式影响

```
var addToArray, adderArray;
if(tagsFirst){ addToArray = arrayOfTags; adderArray = taglessArray; }
else { addToArray = taglessArray; adderArray = arrayOfTags; }

var oLen, //used to retain 'original length'
i2 = oLen = (tagsFirst.length + arrayOfTags.length),
rejoinArray = [];

while(i2--){ //not 100% sure I got this right - hope you get the general idea
    var currentKey = oLen - 1 - i2;
    //if first or alternating from first 0,2,4,etc...
    if(currentKey === 0 || ( currentKey % 2 === 0) {
        rejoinArray[currentKey] = addToArray.shift(); //remove first element and return
    }
    //should be keys 1,3,5,etc...
    else {
        rejoinArray[currentKey] = adderArray.shift();
    }
} 
```

当然，以上所有内容都未经测试，可能存在错误/错误，但我认为基本想法非常酷。撕掉标签。将未标记的单词数组包装在您可以使用的跨度中。然后将所有愚蠢的标签拼接回去。它们仍然应该包含所有相同的单词。这假定了基本的 HTML 完整性。您的文本块仅包含围绕单词或单词集的内联显示标签。除非存在不正确的嵌套跨度，否则不正确的嵌套可能不是问题。

# javascript - 分离 pipe() 和 $.Deferred.resolve()

> ID：11250380
> 
> 赞同：0
> 
> 时间：2012-06-28T18:01:13.100
> 
> 标签：javascript, jquery, jquery-animate, jquery-chaining

```
$.Deferred(function(dfr) {
    $("#container > div").each(function() {
        var $div = $(this);
        dfr = dfr.pipe(function() {
            return $div.fadeIn();
        });
    });
}).resolve(); 
```

有没有办法在上面的代码中单独加载 dfr，然后将其传递给 $.Deferred() 之类的......

```
$("#container > div").each(function() {
            var $div = $(this);
            dfr = dfr.pipe(function() {
                return $div.fadeIn();
            });
        });

 $.Deferred(function(dfr) { }).resolve(); 
```

[http://jsfiddle.net/realwork007/KgY33/25/](http://jsfiddle.net/realwork007/KgY33/25/)类似于这个例子，但唯一的事情是我将单独填充 dfr。

编辑：我正在写作以可视化选择排序算法，并且我有 3 到 4 个辅助函数，例如更改 backgroundOfBlock()、blink(index) 和 swap(from,to)

所以我的选择排序可视化就像：

```
function selectionSort(items){

    var len = items.length, min;

    for (i=0; i < len; i++){

     blink(blocks[i]);// to show It is selected

        //set minimum to this position
        min = i;
        changebackground(blocks[i]);//show it is min
        //check the rest of the array to see if anything is smaller
        for (j=i+1; j < len; j++){
            if (items[j] < items[min]){
                min = j;
                swap(blocks[min], blocks[j]);//swap animation function
            }
        }

       .
       .
       .
       . 
```

如果我运行此方法，所有动画同时运行，但我需要它们按顺序运行...

使用任何技术...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T18:13:28.630

只是一个猜测：

```
var dfr;
$("#container > div").each(function() {
    var $div = $(this);
    dfr = dfr
      ? dfr.pipe(function() {
           return $div.fadeIn().promise();
        })
      : $div.fadeIn().promise();
});

dfr.done(alert.bind(window, "All divs faded In")); 
```

`Deferred`如果您只想立即解决它，您似乎不需要新构造的 。只需使用您获得的第一个[承诺。](http://api.jquery.com/promise/)如果你不想这样，你也可以这样做：

```
var first = new $.Deferred,
    curDfr = first;
function blink($el) {
    curDfr = curDfr.pipe(function() {
        return $el.animate("background-color", "red").animate("background-color", "transparent").promise();
    });
}

// now you can use blink() in your algorithm
// and the animation will be executed when all piped deferreds before
// have been resolved

first.resolve(); // you can move this where you want
curDfr.done(/* when everything happened */); 
```

所以，你会得到一个持有 deferred 的全局变量，并且在任何时候你想添加一个动画用新的管道 Promise 替换它。这不仅适用于`fadeIn`我们所演示的，而且适用于`changeBackground`, `blink`or `swap`。

你也[可以看看](https://stackoverflow.com/q/1058158/1048572).queue [()](http://api.jquery.com/queue/)，它可能比延迟更适合动画。

# objective-c - NSURLCache - 它可以在 OSX 上使用磁盘缓存吗？

> ID：11250382
> 
> 赞同：2
> 
> 时间：2012-06-28T18:01:26.080
> 
> 标签：objective-c, macos, cocoa, nsurlconnection, nsurlcache

我无法`NSURLCache`在 OSX (10.7) 上获得成功：

```
NSURLCache *cache = [[NSURLCache alloc] initWithMemoryCapacity:1024*1024*20
                                                  diskCapacity:1024*1024*5
                                                      diskPath:NSHomeDirectory()];

[NSURLCache setSharedURLCache:cache];

NSMutableURLRequest *req=[NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"http://wikipedia.org/"]
                                                 cachePolicy:NSURLRequestReturnCacheDataElseLoad 
                                             timeoutInterval:60];

NSData *data = [NSURLConnection sendSynchronousRequest:req returningResponse:nil error:nil];
NSLog(@"Received %lu bytes", [data length]);

sleep(10);

[req setCachePolicy:NSURLRequestReturnCacheDataDontLoad];
data = [NSURLConnection sendSynchronousRequest:req returningResponse:nil error:nil];
NSLog(@"Received %lu bytes", [data length]); 
```

1.  第一个问题是如果我用 SDK10.6 构建这个第二个请求接收 0 字节..
2.  如果我使用 SDK10.7 构建它，它似乎可以工作，但我不能使用缓存进行持久存储 - 在我重新启动程序后，第一个响应不是从缓存中加载的，而是从服务器加载的。如果我使用缓存策略初始化请求，`NSURLRequestReturnCacheDataDontLoad`我将得到 0 个字节作为响应。
3.  如果我将内存限制设置为例如 5 个字节，则第二个请求会收到 0 个字节。

文件 Cache.db 在这两种情况下都是创建的，并且似乎具有有效的数据，但磁盘缓存不起作用。

怎么了`NSURLCache`？或者我做错了什么？

# ajax - Rails 和 Ajax 入门

> ID：11250384
> 
> 赞同：0
> 
> 时间：2012-06-28T18:01:31.480
> 
> 标签：ajax, ruby-on-rails-3, jquery, actionmailer

我正在构建一个应用程序，它有一个“分页”界面，它有一个简单的文本区域框，一个选择来确定我应该“分页”（向谁发送消息）和一个提交按钮。

我想用 Ajax 功能构建它，这样当我提交页面时，一个小 div 会显示消息和结果（成功、失败等）。

我的控制器很简单，因为它将有一个索引、新建、创建操作。创建操作应在页面上发布消息，并触发 actionmailer 根据表单选择中选择的个人发送页面。

我想我遇到的问题是视图代码和 jquery。因为我是新手，所以试图理解它是如何工作的让我有点困惑。

有人可以为我提供一个可以执行此类操作的单页帖子界面示例吗？到目前为止，我的代码看起来是正确的，但我缺少 jquery 的东西和其余的魔法。

这是我到目前为止所拥有的：

```
paging_controller
class PagingController < ApplicationController

  def index
    @pages = Paging.all
  end

  def new
     @page = Paging.new
  end

  def show
    @page = Paging.find(params[:id])

    respond_with @page
  end

  def create
      @page = Paging.new(params[:page])

        if @page.valid?
          PagingMailer.new_message(@page).deliver
          redirect_to calls_path, notice: "Call was successfully created."
        else
          flash.now.alert = "Please fill all fields."
          render :new
        end
      end

end

index.html.erb
<h2>Paging Interface</h2>

    <div class="form">
    <%= render 'form' %>
    </div>
    <div class="page">
    <%= render 'page'%>
    </div>

_form.html.erb
<%= form_for(@page, :remote => true) do |f| %>

  <% end %>

  <div class="field">
    <%= f.text_area :message %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %>

_page.html.erb

<%= content_tag_for(:li, page) do %>
  <p><%= page.body %></p>
  <span class="age">Posted at <%= time_ago_in_words(page.created_at) %> ago.
 </span>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T18:31:35.427

[Ryan Bates 的一些截屏视频](http://railscasts.com/episodes?utf8=%E2%9C%93&search=ajax)

[Railstutorial：使用 Ajax 的工作跟随按钮](http://ruby.railstutorial.org/chapters/following-users#sec%3aa_working_follow_button_with_ajax)

# ios - 通过导航控制器时丢失指向委托的指针

> ID：11250385
> 
> 赞同：2
> 
> 时间：2012-06-28T18:01:37.760
> 
> 标签：ios, delegates, uinavigationcontroller, segue, popover

我不完全确定如何解释我的问题，但我会尝试。

所以我一直在尝试学习如何使用委托和协议并遇到了问题。我有一个协议：ButtonInPopOverWasPressed，有一种方法：

```
 - (void)buttonWasPressed:(NSString *)buttonValue; 
```

我还有一个主视图控制器和一个具有以下属性的自定义弹出框类：

```
 @property (retain, nonatomic) id <ButtonInPopoverWasPressed> delegate; 
```

在我的主视图控制器中，我有一个按钮和一个文本标签。当按下按钮时，它会转到正常的弹出窗口。然后我将 segue.destinationViewController 的委托分配为主视图控制器，如下所示：

```
 [segue.destinationViewController setDelegate:self]; 
```

Then when a button from the popover is selected it is displayed in the main view's text label by calling a protocol method that the main view listens for:

```
 [self.delegate buttonWasPressed:sender.currentTitle]; // sends the title of the button pressed to the delegate 
```

这一切都很好。当我想在按下按钮而不是将信息发送回主视图时将弹出框转换到不同的视图时，我的问题就开始了。但是当我创建一个导航控制器作为弹出框并将关系设置为旧弹出框时，一切都崩溃了。

当我分配 segue 的代表（如上所示）时，它在另一侧显示为 null，因此我完全失去了将其传递给其他子视图并将信息返回到主视图的能力。导航控制器会吸收委托吗？如何让代表通过 NC 获得实际视图？

我知道这是协议和委托的基础知识，但我环顾四周，似乎永远找不到对我有用的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T18:07:51.977

试试下面的代码。

```
 NSArray *temp = [[segue destinationViewController] childViewControllers];
    PopoverViewController *popoverViewController = (PopoverViewController)[temp objectAtIndex:0];
    popoverViewController.delegate = self; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T18:09:04.167

不要使用导航控制器，而是在主视图中创建一个委托方法，该方法打开一个不同的弹出窗口并关闭现有的弹出窗口。您将得到相同的结果，但没有在弹出窗口中使用导航控制器的可疑想法。

# php - 如何远程将视频直接上传到我的 FTP 服务器？

> ID：11250386
> 
> 赞同：0
> 
> 时间：2012-06-28T18:01:39.327
> 
> 标签：php, upload, ftp, youtube

我认为自己是一个熟练的谷歌人，但是，我在查找有关此问题的*任何信息时遇到了很多麻烦。*所以，我想做的是创建一个 PHP 脚本，它将从他们的服务器直接获取视频（在本例中来自 YouTube）到我的 FTP 服务器。不幸的是，我对 PHP 不是很好。

到目前为止，我发现的所有内容都只是从 YouTube 检索下载链接，并为您提供将其直接下载到计算机的选项。这不是我想要的。

我的 Apache 服务器上安装了 PHP 5.3.14。安全模式已关闭，open basedir 已打开。我愿意接受任何和所有建议。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T18:07:52.610

这听起来不像是一个答案，但是你给我们的东西太少了：

在您的 FTP 服务器上，您将运行一个 PHP 脚本，该脚本每隔 1 分钟轮询一次 Youtube 搜索结果并将 URL 抓取到他们的服务器（如果您以这种方式进行热链接，我认为 Youtube 实际上会把您搞砸）。使用此脚本，您基本上可以将分块 cURL 下载到您的一个目录和宾果游戏！完毕...

像馅饼一样简单。

好吧，实际上馅饼更难做……但你明白了

事实上，让你从这里开始是如何卷曲文件：

```
function cURL_file($url){
    set_time_limit(0);
    $fp = fopen (dirname(__FILE__)."/input_file", 'w+');
    $ch = curl_init($url);
    curl_setopt($ch, CURLOPT_TIMEOUT, 75);
    curl_setopt($ch, CURLOPT_FILE, $fp);
    curl_exec($ch);
    curl_close($ch);
    fclose($fp);
} 
```

发送 URL，它将在您的 PHP 脚本目录中创建一个名为 input_file 的文件，其中包含数据。

当然，这实际上会在您的 ftp 服务器上作为 cronjob 运行，大约每分钟一次。

### 编辑

好的，对于一个表格。

我会制作一个表单（ofc），其中包含一个名为 url 的字段。提交后，它将转到名为 youtube_url_grabber.php 的脚本：

```
cURL_file($_POST['url']); // This calls the function with the url the user entered.

function cURL_file($url){
    set_time_limit(0);
    $fp = fopen (dirname(__FILE__)."/input_file", 'w+');
    $ch = curl_init($url);
    curl_setopt($ch, CURLOPT_TIMEOUT, 75);
    curl_setopt($ch, CURLOPT_FILE, $fp);
    curl_exec($ch);
    curl_close($ch);
    fclose($fp);
} 
```

因此表单`action`将指向此此处的脚本。

当然不要实际使用这个脚本，否则你的服务器几乎会立即被滥用和黑客攻击，但这应该告诉你如何将某人输入的文件下载到你自己的服务器上。

现在我想您的 FTP 服务器与您运行的服务器不同，因此在将文件卷曲到您的服务器后，您将希望将其移动到您的 FTP 服务器上。为了节省我编写所有代码的时间，我将在 google 上链接第一个搜索结果：http: [//www.jonasjohn.de/snippets/php/ftp-example.htm](http://www.jonasjohn.de/snippets/php/ftp-example.htm)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T05:17:36.543

实际上，我正在使用 rapidleech [http://www.rapidleech.com](http://www.rapidleech.com) 将视频从您的管中获取到我的服务器，我可以修改它们并将它们远程上传到我的 youtube 频道，因此我将视频传输到我的服务器并上传它们它再次允许您选择我用它来将我的频道备份到我的服务器（2000 个视频）的下载格式，因为我的连接速度很慢

# json - 为什么我对 Cloudant 的多键 GET 查询会返回所有文档？

> ID：11250387
> 
> 赞同：1
> 
> 时间：2012-06-28T18:01:46.560
> 
> 标签：json, couchdb, cloudant

刚开始。

我有一个关于 cloudant 的视图，bywords，它提供了所有文档及其关键字的视图。它看起来像这样：

```
bywords = function(doc) {
    var tokens, re1,
        uniq = function(a) {
            var o = {}, i = 0, L = a.length, r = [];
            for (; i < L; i++) {
                if (a[i] !== '' && a[i] !== ' ') {
                    o[a[i]] = a[i];
                }
            }
            for (i in o) { r.push(o[i]); }
            return r;
        };

    if ( doc.observation && doc.observation !== '') {
        tokens = uniq(doc.observation.split(/( +)|\./));
        if (tokens && tokens.length > 0) {
             tokens.map(function(token) {
                 emit(token, null);
             });
         }
    }
}; 
```

（我认为`unique`设计文档中没有可供我使用的 fn，因此视图 fn 定义了它自己的。）

视图的结果如下所示：

```
....
{
 "id": "doc-095141",
 "key": "Vivamus",
 "value": null
},
{
 "id": "doc-102754",
 "key": "Vivamus",
 "value": null
},
{
 "id": "doc-094047",
 "key": "volutpat",
 "value": null
},
{
 "id": "doc-092332",
 "key": "vulputate",
 "value": null
},
.... 
```

对于每个文档，视图中有一个项目，用于文档特定字段中的每个单词。

行...

按键查询效果很好。我的意思是，这个：

`https://myserver.cloudant.com/fop/_design/baseViews/_view/bywords?key=%22amet%22`

...从视图中返回预期的项目子集。这是少数几件，不到10件。

另一方面，多键查询返回视图中的所有项目。如果我这样做：

`https://.../_design/baseViews/_view/bywords?keys=%5B%22amet%22%5D`

...然后我得到每一个项目。许多许多项目。不是我想要的。

**如何在 GET 中指定多个键？**

我不相信我想要`startkey`和`endkey`。我想要我指定的集合中存在带有键的项目。

* * *

ps：我知道[POST 一个 JSON 键数组的选项](http://wiki.apache.org/couchdb/HTTP_view_API#Access.2BAC8-Query)。我还没有尝试过。通过阅读文档，我应该能够执行 GET 并在查询字符串中指定多个键。

* * *

**编辑**

我刚刚尝试了 POST 选项。它按预期工作。换句话说，这个 HTTP 请求：

```
POST https://myserver.cloudant.com/fop/_design/baseViews/_view/bywords 
...headers here...

{"keys":["amet"]} 
```

..返回我期望它返回的内容：一些匹配的文档。

因此，我不再被阻止，但我仍然感到困惑的是，用于指定键的 GET / URI 编码形式在 Cloudant 上不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T20:08:16.327

我记得有这个问题，我认为这是 CouchDB 中的一个老错误。您正在运行哪个版本的沙发？`GET`带有参数的 A`keys`现在在 1.2.0 中为我工作。IIRC 该错误在 1.0.x 中

# file-upload - 上传图片脚本 (.asp) 有效...但不在此服务器上

> ID：11250392
> 
> 赞同：0
> 
> 时间：2012-06-28T18:02:03.650
> 
> 标签：file-upload, asp-classic

嗨，

两年前，我在 .asp 2.0 中为一家餐馆制作了一个网页，其中包含新闻功能和众所周知的 _upload.asp 脚本来上传图像。

直到几个月前它一直运行良好 - 我确信这是托管公司的问题，但他们说所有特权都在。

（这是我得到的错误：SaveBinaryData 错误 800a0bbc）

现在我尝试从我在其他公司托管的其他网页制作的同一个 CMS 系统复制/粘贴相同的文件 - 我将它们粘贴到餐厅的 FTP 区域 - 这会引发该错误（但其他网页与相同的功能完美运行）

这不是 100% 证明问题出在托管公司的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T00:12:05.190

听起来像是权限问题。确保 IUser 和 Network 直接对上传内容具有完全写入权限。也可以是他们在 IIS 上为最大 http 大小设置的限制。

# java - Java/Android 从字符串 WITH 值调用方法

> ID：11250396
> 
> 赞同：4
> 
> 时间：2012-06-28T18:02:26.867
> 
> 标签：java, android, reflection, dynamic

假设我有一个我想调用的方法，它有一个字符串的参数

要打电话，我会做这样的事情.. myFunction(stringValue);

现在，如果我有一个值为“myFunction”的字符串，我将如何进行相同的调用，但动态调用..

就像是

```
method = [convert "myFunction" string to method];
method.invoke(stringValue); 
```

* * *

我目前正在尝试类似

java.lang.reflect.Method 方法；

```
method = Class.forName("com.blah.MyActivity").getMethod('myFunction',String.class);
method.invoke (stringValue); 
```

但收到错误 *IllegalArgumentException Message expected receiver of type com.blah.MyActivity, but got java.lang.String*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T18:08:48.183

指令：

```
method.invoke (stringValue); 
```

需要将在其中`method`调用的对象。

因此，如果您尝试以下操作：

```
method = Class.forName("com.blah.MyActivity").getMethod('myFunction',String.class);
method.invoke(someInstanceOfMyActivity, stringValue); 
```

它会起作用的。

文档： [http ://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Method.html](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Method.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T22:45:09.757

跟进我上面的评论：

这样做来调用`com.blah.MyActivity::myFunction`：

```
com.blah.MyActivity activity = new com.blah.MyActivity() ;

method = Class.forName("com.blah.MyActivity").getMethod('myFunction',String.class);
method.invoke (activity, stringValue); 
```

（原谅 C++ 语法）

我将尝试解释为什么它会这样工作：

方法实际上只是一种特殊类型的函数..它是为了让人们处理类和对象而创造的便利..

如您所知，在一个方法中，您总是有一个`this`变量.. 在此幕后，这是作为参数传入的，而是写成这样：

```
com.blah.MyActivity activity = new com.blah.MyActivity() ;
com.blah.MyActivity::myFunction( activity, stringValue ) 
```

你可以方便地写这个：

```
com.blah.MyActivity activity = new com.blah.MyActivity() ;
activity.myFunction(stringValue) 
```

当您使用反射获得方法时，它只是一个“普通函数”。直接调用需要传入`this`参数。

这就是您遇到类型错误的原因...... myFunction 期望第一个隐藏参数是它包含的类的实例，您省略了它。

高温高压

# java - TransformerFactory.setAttribute 的 javax.xml 属性

> ID：11250397
> 
> 赞同：3
> 
> 时间：2012-06-28T18:02:28.977
> 
> 标签：java, xml

在哪里可以找到作为 javax.xml.TranformerFactory.setAttribute(String,String) 的合法输入的属性列表？输入非法字符串会产生令人讨厌的运行时异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T20:18:55.647

您可以使用的属性特定于特定的 XSLT 实现。例如，您可以用于 Saxon 的属性如下所示：

[http://www.saxonica.com/documentation/configuration/config-features.xml](http://www.saxonica.com/documentation/configuration/config-features.xml)

而那些 XSLTC 在这里：

[http://xml.apache.org/xalan-j/xsltc_usage.html#api-attributes](http://xml.apache.org/xalan-j/xsltc_usage.html#api-attributes)

# .net - Regasm 找不到嵌入式程序集

> ID：11250429
> 
> 赞同：1
> 
> 时间：2012-06-28T18:04:49.573
> 
> 标签：.net, com-interop, regasm

我正在开发一个 .Net 组件，它将作为插件存在于 Windows 应用程序中。这个插件将使用 regasm 在客户端机器上注册。我的组件嵌入了它的大部分依赖项，并在请求时将程序集返回给 AppDomain。如果我尝试在我的单个 dll 上运行 regasm，它会失败，因为它无法在文件夹中找到依赖项。在客户端机器上安装组件时，这将是一个问题。

有没有办法告诉 regasm 从哪里获取嵌入式 dll？

到目前为止我已经尝试过：

1.  使用附近的 dll 注册组件，然后将单个 dll 复制到运行时文件夹。我的组件工作正常，并且在运行时发现了 dll，但这不是部署的选项。

2.  使用 ComRegisterFunctionAttribute 挂钩。只有当 dll 在附近时才会调用它，所以它并不比 #1 好。

我无法控制 regasm 会被调用的事实。*我*不必使我的组件成为单个 dll，但如果我能解决这个问题，它会使部署变得相当容易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T20:45:31.610

**新答案：**

我猜你`[ComRegisterFunction]`是在一个类中引用来自其他程序集之一的类型的方法。您的代码可能没有运行，因为它无法 JIT 编译 ComRegister 方法，因为它找不到您的类或方法中的一种类型的程序集。

尝试创建一个没有外部依赖项（.net 框架除外）的类，并将 ComRegisterFunction 属性放在该类中。在那里进行安装工作，但仅从其他类型动态加载程序集，以便您可以使用自定义代码来定位外部程序集。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-03-27T14:27:25.340

Ld00d，我有同样的问题。你是怎么做到的：“我删除了 COM 注册 dll 中的引用”？对我来说这听起来很神奇。你用了 il​​dasm 然后是 ilasm 吗？

我认为 regasm.exe 的这个严重问题没有解决方案。

regasm.exe`[ComRegisterFunction]`仅当程序集的先前验证`GetReferencedAssemblies`以成功结束时才调用方法。您可以尝试 ildasm 然后 ilasm 您的 dll 删除这些引用，但我认为它可能会带来混乱。我也不知道如果你滥用代码会发生什么。

我的解决方法：

1.  在安装过程中，将 regasm.exe 询问的那些 DLL 复制到 DLL 的文件夹中。

2.  在 regasm.exe 完成 DLL 注册后删除它们。

不太好（安装软件会占用大量磁盘空间），但可以。

# php - 使用 JSON 从 Facebook Graph API 获取数据

> ID：11250435
> 
> 赞同：0
> 
> 时间：2012-06-28T18:05:15.490
> 
> 标签：php, facebook-graph-api, json

我想从此[页面](https://graph.facebook.com/comments/?ids=http://gallery.erik-edgren.nu/photo/P1220672)`10151828637085391_33268745`打印评论的 ID（例如），但我不知道如何传递 URL。在我用 JSON 解码数据并打印出来后，它看起来像这样：`var_dump()`

```
array
  'http://gallery.erik-edgren.nu/photo/P1220672' => 
    array
      'comments' => 
        array
          'data' => 
            array
              ...
          'paging' => 
            array
              ... 
```

到现在为止还挺好。我试图写`$array->http://gallery.erik-edgren.nu/photo/P1220672->comments->data->id`，但`//`将整个字符串制作成网站上的评论。我什至尝试`\`在打印`/`( `$array->http:\/\/galle...`) 之前添加，但我收到以下错误消息：

`Parse error: syntax error, unexpected ':' in ...`

我该如何解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T18:08:02.827

我相信你需要这样做`$array['http://gallery.erik-edgren.nu/photo/P1220672']['comments']['data']['id']`，因为它是一个数组而不是一个对象。

# git - Git rebase --merge 仅包含一些提交

> ID：11250437
> 
> 赞同：6
> 
> 时间：2012-06-28T18:05:19.220
> 
> 标签：git

我做了一些提交，比如提交 A、B、C 现在我只想将提交 A 和 B 推送到远程仓库。（并保持提交 C 稍后被合并和推送）在我推送之前，我需要运行：

```
git fetch origin master
git rebase --merge FETCH_HEAD 
```

问题是上述命令也会要求我解决提交 C 的冲突，我现在不打算推送。

是否可以在不必处理提交 C 的情况下进行变基。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-28T18:13:04.910

### 在变基之前保存

保存提交以便您可以推迟处理冲突的最简单方法是标记它，以便您稍后可以参考提交：

```
$ git tag save-commitC <sha1> 
```

### 无提交的变基 C

保存参考后，在没有提交的情况下重新设置：

```
$ git rebase --interactive --merge FETCH_HEAD 
```

它应该会打开您的编辑器以显示如下所示的文件：

```
pick <sha1> <message>
pick <sha1> <message>
pick <sha1> <message>
... 
```

要从此分支的历史记录中**删除**提交 C，只需删除或注释掉提交的`pick <sha1> <message>`行。

请注意，提交以相反的顺序列出，最旧的提交排在*最前面*，最近的提交排在*最后*。列表中的第一个提交应该是第一个不是`FETCH_HEAD`.

一旦你在没有 C 的情况下重新定位，继续推进：

```
$ git push origin master 
```

### 重新应用提交

当你准备好将它应用到 rebased 分支时：

```
$ git cherry-pick save-commitC
   # resolve merge conflicts
$ git commit
$ git tag -d save-commitC 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T18:46:25.993

您可以重置为提交 b，然后存储您的更改，推送，然后重新应用您的存储。

```
git reset HEAD~1
git stash
(rebasing or whatever other intermediate steps required go here)
git push
git stash pop 
```

# mobile - Sencha Touch 2 和 PhoneGap 用于应用内购买

> ID：11250444
> 
> 赞同：0
> 
> 时间：2012-06-28T18:05:56.520
> 
> 标签：mobile, cordova, sencha-touch-2

我对使用 Sencha Touch 2 很感兴趣，但需要应用内购买……我看到有人说他们正在使用 PhoneGap 和 Sencha Touch 2 来做到这一点，但没有人明确说明他们是如何结合这些技术的。我已经搜索了几个小时来查找过去 3 个月的教程或其他信息。

我正在使用 DreamWeaver CS5.5。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T18:48:53.097

我认为你会得到最接近的东西是这样的：

[http://www.sencha.com/learn/a-sencha-touch-mvc-application-with-phonegap](http://www.sencha.com/learn/a-sencha-touch-mvc-application-with-phonegap)

这是 Sencha（使用 Sencha Touch v1.1 =），至少会解释您所询问的技术等。

玩得开心快乐的编码！

# actionscript-3 - flex - 故障事件后重新调用操作

> ID：11250445
> 
> 赞同：0
> 
> 时间：2012-06-28T18:05:58.500
> 
> 标签：actionscript-3, apache-flex, remoteobject

调用 RemoteObject 后，有时我们需要重新调用相同的操作，直到它成功。

```
private var myserviceRO:RemoteObject = new RemoteObject("myService");
[...]
myserviceRO.operationName.addEventListener(ResultEvent.RESULT, myResultHandler);
myserviceRO.operationName.addEventListener(FaultEvent.FAULT, myFaultHandler);
myserviceRO.operationName(arg1, arg2, arg3);
[...]

 protected function myFaultHandler(faultEvent:FaultEvent):void {
        //under some condition, resend the operation that failed
        (faultEvent.currentTarget as Operation).send();

        //under some condition, resend the operation that failed
        (faultEvent.currentTarget as Operation).send((faultEvent.currentTarget as Operation).arguments);
 } 
```

现在因为我的操作需要 3 个参数，我不知道如何将参数传递给*send()*方法：

*   当我调用 send() 时，我得到一个错误：“0 参数传递，3 预期”
*   当我调用 send(operation.arguments) 时，我得到“1 个参数通过，3 个预期”

send() 文档指定：

> *   执行方法。传入的任何参数都作为
> *   方法调用。如果没有传递参数，则参数对象
> *   用作参数的来源。

因此，如果我不发送任何参数，则应该使用原始参数，但显然不是。

调试我的应用程序显示 **(faultEvent.currentTarget as Operation).argumentNames**总是一个**空数组**，而**arguments**总是一个**空 Object**。

你能告诉我如何传递参数吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T12:34:37.457

这是解决方案：

```
protected function myFaultHandler(faultEvent:FaultEvent):void {
    //Parameters should be set beforehand from the async token
    ((Operation)faultEvent.currentTarget).arguments = faultEvent.token.message.body;

    //Now the parameters are ok
    ((Operation)faultEvent.currentTarget).send();

 } 
```

感谢@AmyBlankenship 博客： [http ://flexdiary.blogspot.com/2010/02/debugging-responder-result-functions.html](http://flexdiary.blogspot.com/2010/02/debugging-responder-result-functions.html)

# javascript - 您可以在变量声明中添加条件吗？

> ID：11250449
> 
> 赞同：10
> 
> 时间：2012-06-28T18:06:19.410
> 
> 标签：javascript, variables, declaration

这对我来说没有意义，但我感觉我看到了一个使用这个的代码：

```
var abc = def || ghi; 
```

我的问题是，这有效吗？我们可以在变量声明中添加条件吗？我想答案是否定的，但我有一个想法，我曾经在代码中看到过类似的东西。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-28T18:07:48.827

这给出了if 它不是 falsy`abc`的值（即 not 、、或空字符串），或者 if not 的值。`def``false``null``undefined``0``ghi`

这相当于：

```
var abc;
if (def) abc = def;
else abc = ghi; 
```

这通常用于选项：

```
function myfunc (opts) {
    var mything = opts.mything || "aaa";
} 
```

如果您调用`myfunc({mything:"bbb"})`它，则使用您给出的值。如果你什么都不提供，它就会使用`"aaa"`。

在这种情况下，为了让调用者完全跳过参数，我们也可以用

```
opts = opts || {}; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-28T18:11:24.453

代码变量`abc = def || ghi;`

是一样的

```
if (def) { //where def is a truthy value
   var abc = def;
} else {
   abc = ghi;
} 
```

你想要一个像 if 语句这样的条件吗？

```
if (xxx==="apple") { 
    var abc = def;
} else {
    abc = ghi;
} 
```

写成三元运算符是：

```
var abc = (xxx==="apple") ? def : ghi; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-28T18:07:40.967

**是**的，您可以在变量声明中添加条件

可以这样使用

```
function greet(person) {
    var name = person || 'anonymouse';
    alert('Hello ' + name);
}
greet('jashwant');
greet();​ 
```

[jsfiddle 演示](http://jsfiddle.net/G9pzZ/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T18:10:01.370

好的，看，就像，你要么检查一个是否为真。真实的将被退回。:)

```
var abc = def || ghi; 
```

相当于：

```
var abc = return (def == true) or (ghi == true) 
```

# iphone - 从 default@2x.png 过渡到 MainView

> ID：11250455
> 
> 赞同：1
> 
> 时间：2012-06-28T18:07:02.007
> 
> 标签：iphone, objective-c, ios

总的来说，我对 Objective-C 和 iOS 开发相对较新，如果我的问题有任何帮助和指导，我将不胜感激。

我已经编写了我的第一个应用程序，它是一个带有主视图和翻转视图的“实用程序”应用程序。该应用程序在模拟器和我的 iPhone 上都按预期工作。但是，从 Default.png 图像到我的主视图有一个明显而突然的变化。

我遵循了来自[https://stackoverflow.com/a/9918650/1324822](https://stackoverflow.com/a/9918650/1324822)的 n13 建议代码，但是，我得到的只是主视图，然后是淡入黑色。

我在 AppDelegate.m 文件中的代码如下：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{   
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

// set up your root view and stuff....
//.....(do whatever else you need to do)...

// show the main window, overlay with splash screen + alpha dissolve...
UIImageView *splashScreen = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"Default.png"]];
[self.window addSubview:splashScreen];        
[self.window makeKeyAndVisible];

[UIView animateWithDuration:0.3 animations:^{splashScreen.alpha = 0.0;}
                 completion:(void (^)(BOOL)) ^{
                     [splashScreen removeFromSuperview];
                 }
 ];
return YES;
 } 
```

我承认我正在“尝试”我项目的这一部分，尽管我非常想了解导致问题的原因以及如何解决它。我希望我需要在上面的某个地方指定我的 mainView，也许按照评论对其进行初始化，但我不确定如何做到这一点，因为没有过渡，唯一的要求是设置`return YES;`.

如果有帮助，这是一个故事板项目。我正在运行 Xcode 4.3.3。

再次感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T18:16:32.673

这就是我做启动画面的方式：

我没有将其放入 App Delegate 中，而是放在查看的第一个屏幕上。你只需要在你的 rootViewController 中有两个实例变量，第一个是 UIView *black，第二个是 UIImageView *splash。然后 ：

```
-(void) viewWillAppear:(BOOL)animated {

static dispatch_once_t onceToken;
dispatch_once(&onceToken, ^{

    self.view.userInteractionEnabled = NO;
    black = [[UIView alloc] initWithFrame:[UIScreen mainScreen].bounds];
    black.backgroundColor = [UIColor blackColor];

    splash = [[UIImageView alloc] initWithFrame:[UIScreen mainScreen].bounds];

    UIActivityIndicatorView *indicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
    [splash addSubview:indicator];
    indicator.center = CGPointMake([UIScreen mainScreen].bounds.size.width/2, 455);

    [indicator startAnimating];
    //the indicator part is arbitrary, of course

    splash.image = [UIImage imageNamed:@"Default.png"];

    [self.view addSubview:black];
    [self.view addSubview:splash];

});

} 
```

然后：

```
-(void) viewDidAppear:(BOOL)animated {

static dispatch_once_t onceToken;
dispatch_once(&onceToken, ^{

    [UIView animateWithDuration:0.4 delay:2 options:UIViewAnimationCurveEaseInOut animations:^{
        splash.alpha=0;
    } completion:^(BOOL finished) {
        [splash removeFromSuperview];

        [UIView animateWithDuration:0.45 delay:0.2 options:UIViewAnimationCurveEaseInOut animations:^{
            black.alpha = 0; 
        } completion:^(BOOL finished) {
            [black removeFromSuperview];
            black = nil;
            splash = nil;
            self.view.userInteractionEnabled = YES;

        }];
    }];

});

} 
```

我没有使用具有导航控制器或选项卡视图控制器的应用程序测试此代码，但它的工作原理与常规视图控制器的魅力一样。

# php - CodeIgniter PHP从同一类中的函数访问类中声明的变量

> ID：11250457
> 
> 赞同：1
> 
> 时间：2012-06-28T18:07:20.503
> 
> 标签：php, codeigniter

我正在尝试从同一类中的函数访问在类中声明的数组。我尝试了几种不同的方法来让它工作，但我对 PHP 比较陌生。这是我的代码片段

```
class Site extends CI_Controller {

    var $dates = array(
        "Task" => NULL,
        "Date1" => NULL,
        "Date2" => NULL,
        "TimeDiff" => NULL
    );

function index() 
{   
    if($this->$dates['Date1'] != NULL && $this->$dates['Date2'] != NULL)
    {
        $this->$dates['TimeDiff'] = $this->$dates['Date2']->getTimestamp() - $this->$dates['Date1']->getTimestamp();            
    }

    $this->load->view('usability_test', $this->$dates);
} 
```

我也尝试使用 global 关键字

```
global $dates; 
```

无论如何，我仍然收到“未定义的变量”错误。谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-28T18:09:35.460

你想要`$this->dates['Date1']`而不是`$this->$dates['Date1']`. 注意没有`$`before `dates`。

作为旁注，请确保您`CI_Controller`通过如下定义正确扩展`__construct()`：

```
class Site extends CI_Controller {

    // class properties, etc.

    function __construct(){
        parent::__construct();
    }

    // class methods, etc.

} 
```

另一件需要注意的事情，`var`自 PHP5 起已弃用。根据您的需要，您将希望使用`public`、`private`或`protected`（编辑：当然，假设您使用*的是*PHP5）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T18:21:09.663

为自己创建一个帮助类来满足您的需要：

```
class MyTask
{
    private $task;

    /**
     * @var DateTime
     */
    private $date1, $date2;

    ...

    public function getTimeDiff() {
        $hasDiff = $this->date1 && $this->date2;
        if ($hasDiff) {
            return $this->date2->getTimestamp() - $this->date1->getTimestamp();
        } else {
            return NULL;
        }
    }
    public function __toString() {
        return (string) $this->getTimeDiff();
    }

    /**
     * @return \DateTime
     */
    public function getDate1()
    {
        return $this->date1;
    }

    /**
     * @param \DateTime $date1
     */
    public function setDate1(DateTime $date1)
    {
        $this->date1 = $date1;
    }

    /**
     * @return \DateTime
     */
    public function getDate2()
    {
        return $this->date2;
    }

    /**
     * @param \DateTime $date2
     */
    public function setDate2(DateTime $date2)
    {
        $this->date2 = $date2;
    }
} 
```

这里的关键点是该范围和内容的所有细节都在类中。所以你不需要在其他地方关心。

作为额外的奖励，该`__toString`方法可以帮助您轻松地将这个对象集成到您的视图中，因为您可以只使用`echo`对象。

```
class Site extends CI_Controller
{
    /**
     * @var MyTask
     */
    private $dates;

    public function __construct() {
        $this->dates = new MyTask();
        parent::__construct();
    }

    function index() 
    {
        $this->load->view('usability_test', $this->$dates);
    }

    ... 
```

更好的？

# android - 在 Action Bar Sherlock 的折叠动作中隐藏键盘自动完成不起作用

> ID：11250462
> 
> 赞同：3
> 
> 时间：2012-06-28T18:07:38.220
> 
> 标签：android

我有一个在操作栏中实现自动完成文本视图的应用程序。我正在使用 Action Bar Sherlock，此自动完成功能由标签显示

```
android:actionLayout="@layout/field_search" 
```

xml 菜单中的项目，如下所示。

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
    <item
        android:id="@+id/autocomplete_menu_item"
        android:showAsAction="always|collapseActionView"
        android:actionLayout="@layout/field_search"
        android:icon="@drawable/ic_search"
    />
</menu> 
```

单击搜索图标时，将为用户显示键盘。当用户选择和项目时，自动完成文本视图内容被修改为所选项目名称，并且键盘被隐藏。嗯，这部分工作正常。

不起作用的是键盘仅在自动完成点击事件时被隐藏。因此，如果我单击搜索项而不选择自动完成文本视图的项，然后单击操作栏的主页按钮（关闭当前活动），则键盘不会关闭。它保持打开状态。

我正在通过以下方法设置主页按钮（操作栏的）单击：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        // Action bar back button.
        case android.R.id.home:
            onBackPressed();
            return true;
        case R.id.autocomplete_menu_item:
            initializeAutoComplete();
            return true;
        // Default.
        default:
            return super.onOptionsItemSelected(item);
    }
} 
```

因此，调用了 onBackPressed() 方法。但是键盘没有关闭。

然后，我尝试在 onPause() 方法处关闭键盘，如下图：

```
@Override
protected void onPause() {
    super.onPause();

    // Closes keyboard before exit.
    if (mKeyboardShown)
        hideKeyboard(mAutoComplete);
} 
```

再一次，键盘没有被关闭。

打开和关闭键盘的方法如下所示：

```
/**
 * Shows the keyboard.
 * 
 * @param view
 */
public void showKeyboard(View view) {
    Context context = view.getContext();
    InputMethodManager imm = (InputMethodManager)context.getSystemService(Context.INPUT_METHOD_SERVICE);
    imm.toggleSoftInput(InputMethodManager.SHOW_FORCED, InputMethodManager.HIDE_IMPLICIT_ONLY);
}

/**
 * Hides the keyboard.
 * 
 * @param view
 */
public void hideKeyboard(View view) {
    Context context = view.getContext();
    InputMethodManager imm = (InputMethodManager)context.getSystemService(Context.INPUT_METHOD_SERVICE);
    imm.hideSoftInputFromWindow(view.getWindowToken(), 0);
} 
```

管理自动完成的方法如下所示。

```
/**
 * Calls the auto complete text view.
 */
public boolean initializeAutoComplete() {
    if (mAutoComplete == null) return false;

    // Cleans text.
    mAutoComplete.setText("");

    // Invoke virtual keyboard.
    mAutoComplete.requestFocus();
    showKeyboard(mAutoComplete);
    mKeyboardShown = true;

    // Creates an array adapter to display the school units from the auto complete text view.
    final AutoCompleteAdapter adapter = new AutoCompleteAdapter(this, mList);

    // Sets the click listener of the auto complete text view, to show the keyboard when the auto complete
    // text view has shown the keyboard and this keyboard was closed (so the auto complete text view is been
    // shown, but the keyboard don't, so we need to show it).
    mAutoComplete.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            showKeyboard(mAutoComplete);
            mKeyboardShown = true;
        }
    });

    // Sets the click listener of the auto complete text view, to set the adapter. 
    mAutoComplete.setOnKeyListener(new OnKeyListener() {
        @Override
        public boolean onKey(View v, int keyCode, KeyEvent event) {
            // Populate list with our static array of titles.
            mAutoComplete.setAdapter(adapter);

            return false;
        }
    });

    // Sets the item click listener of the auto complete text view, to set the auto complete text view name,
    // hide the keyboard, and hide the auto complete drop down.
    mAutoComplete.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
            // Get id of the unit from the adapter tag.
            Integer nameId = (Integer)view.getTag();

            // Get clicked id of the auto complete text view.
            Data data = getDataById(nameId);
            if (data != null) mAutoComplete.setText(data.getName());
            else mAutoComplete.setText("Data not found.");

            // Hide keyboard and hide auto complete drop down.
            hideKeyboard(mAutoComplete);
            mKeyboardShown = false;
            mAutoComplete.setDropDownHeight(0);
        }
    });

    return true;
} 
```

因此，每次我调用 showKeyboard() 时都会显示键盘，但只有在自动完成文本视图的单击事件中调用 hideKeyboard() 时才会隐藏。

似乎 hideKeyboard() 仅在调用单击事件时获取“窗口令牌”。但是我需要在需要时关闭键盘，而不仅仅是在单击事件时。

在这个应用程序中有两个活动：MainActivity 和 AutoCompleteActivity。下面我展示了 1 张图片，分为 6 帧（从左到右/从上到下），显示了以下操作：

[图片链接](http://i50.tinypic.com/wuqq0l.png)

1.  之后进入AutoCompleteActivity。
2.  单击搜索图标后（此处称为键盘）。
3.  输入一些文本后，自动完成显示适配器找到的内容。
4.  单击自动完成显示的项目后，自动完成文本内容将更新为所选项目的名称（在这种情况下，“Apple”为白色）。
5.  单击操作栏后退按钮后，自动完成文本视图被隐藏，但不是键盘，甚至调用 onBackPressed() （当调用 onOptionsItemSelected() 时）。
6.  再次按下操作栏的返回按钮，我们回到了 MainActivity。但即使调用了 AutoCompleteActivity 的 onPaused()，键盘仍保留在屏幕上。这怎么可能发生？

我如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T12:08:27.900

所以当我按下操作栏的后退按钮时关闭键盘

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {

    System.out.println("itemid: " + item.getItemId());
    switch (item.getItemId()) {
    case MENU_SEARCH:

        item.setActionView(R.layout.searchedittext);
        filterEdit = (EditText) item.getActionView().findViewById(
                R.id.filtrar2);

        //Listener que se encarga de registrar los eventos de cuando se expande y se contrae la barra de busqueda en la actionbar
        item.setOnActionExpandListener(new OnActionExpandListener() {

            @Override
            public boolean onMenuItemActionExpand(MenuItem item) {
                // TODO Auto-generated method stub
                return true;
            }

            //Cerramos el teclado al contraer la barra de busqueda
            @Override
            public boolean onMenuItemActionCollapse(MenuItem item) {
                // TODO Auto-generated method stub
                InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
                imm.hideSoftInputFromWindow(
                        filterEdit.getWindowToken(), 0);

                return true;
            }
        });

        break;
    case android.R.id.home:

        break;

    default:
        break;
    }
    return super.onOptionsItemSelected(item);
} 
```

# linux - 如何在 LinuxPPC 上对 power7 或更高版本进行运行时检查？

> ID：11250464
> 
> 赞同：1
> 
> 时间：2012-06-28T18:07:46.280
> 
> 标签：linux, powerpc

我可以通过以下方式检查 AIX 上的 power7+：

```
inline bool ossPower7orLater( )
{
   #if defined _AIX
      if ( !__power_set( POWER_6 | POWER_5 | POWER_4 ) )
      {
         return true ;
      }
      else
   #endif
         return false ;
} 
```

使用 systemcfg.h 中的宏。这里使用`__power_set()`宏而不是`__power_7()`避免对 power7 的检查进行编码，该检查会在 power8 出现时中断。

这将如何扩展以包括对 LinuxPPC 的支持？我可以想象可能有一些指令可以使用，所以如果没有更好的方法可以指点我（即：如果我知道要使用什么，我可以编写一个**asm块）。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T14:02:18.947

asm 指令可`mfpvr`用于获取处理器版本。当然，除非 IBM 遵循其处理器版本控制的固定模式，否则这可能会在以后的处理器上中断，但这是一个简单的解决方案。

注意：mfpvr 是仅主管，但 LinuxPPC 模拟它。

另一种解决方案是检查`/proc/cpuinfo`（虽然非常乏味）。这将为您提供 CPU 和 PVR 的字符串表示形式。

我在网上找到的一个例子：

```
processor : 0
cpu             : POWER7 (architected), altivec supported
clock           : 3550.000000MHz
revision        : 2.0 (pvr 003f 0200) 
```

我希望这有帮助

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-29T16:23:11.337

可以通过检查 ELF AUX 标头来做到这一点，如下所述：

[在共享库代码中查找 ELF aux 标头（或 envp）的编程方式？](https://stackoverflow.com/questions/11593890/programatic-way-to-find-elf-aux-header-or-envp-in-shared-library-code)

# maven - 使用 Jenkins 进行发布管理的选项有哪些

> ID：11250474
> 
> 赞同：5
> 
> 时间：2012-06-28T18:08:10.190
> 
> 标签：maven, jenkins, release-management, jenkins-plugins, continuum

我正在评估像 Jenkins 和 Apache Continuum 这样的构建引擎。我们的大部分构建都是使用 Maven。Jenkins 中有哪些用于发布管理的选项？

发布管理是指从源代码控制中的分支创建发布，然后在 Maven 中更新版本标记的过程。例如，如果我的 Maven 项目（父 + 子子项目）当前版本为 5.5-SNAPSHOT，我想告诉 Jenkins 签出、构建和测试此分支的最新版本，并将 POM 更新到版本 5.5 . 然后，它应该在版本 5.6-SNAPSHOT 的源代码控制中创建一个新分支，并相应地更新这个新分支上的所有 POM。

Apache Continuum，我相信它是由 Maven 背后的同一个团队 Sonatype 开发的，它具有这个发布管理功能。我见过一个名为 Artifactory Plugin 的 Jenkins 插件，它似乎要求存储库管理器是 Artifactory。Jenkins 还有哪些其他发布管理选项？最佳做法是什么？

谢谢，

史蒂夫·所罗门 stev.solomon@gmail.com

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T21:42:44.337

Jenkins 支持发布：[https ://wiki.jenkins-ci.org/display/JENKINS/Release+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Release+Plugin)

Maven 和自由风格的项目都支持它。不需要人工制品。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T17:43:11.583

我建议看一下 Jenkins 的[M2 Release Plugin](https://wiki.jenkins-ci.org/display/JENKINS/M2+Release+Plugin)。[这是mvn-release-plugin](http://maven.apache.org/maven-release/maven-release-plugin/)的 Jenkins 前端。

# asp.net - 无法从用户控件中的代码块 (<%= %>) 加载 Viewstate 错误

> ID：11250479
> 
> 赞同：1
> 
> 时间：2012-06-28T18:08:36.593
> 
> 标签：asp.net, user-controls, webforms, viewstate

很奇怪的问题。我有一个用户控件，可以根据条件动态加载到页面中。我在 .ascx 中向设计器添加代码块的那一刻，例如：

```
 <%= "hello" %> 
```

我得到错误：

无法加载视图状态。正在加载视图状态的控制树必须与在先前请求期间用于保存视图状态的控制树匹配。例如，当动态添加控件时，回发期间添加的控件必须与初始请求期间添加的控件的类型和位置相匹配。

有谁知道为什么会发生这种情况以及我该如何解决？

非常感谢你的帮忙！

# wcf - 当服务驻留在网站根目录中时，如何在 AppFabric 中将 WCF 服务配置为自动启动

> ID：11250482
> 
> 赞同：2
> 
> 时间：2012-06-28T18:08:39.613
> 
> 标签：wcf, iis, appfabric

我正在尝试在 WIndows Server 2008 R2 的 IIS 和 AppFabric 下配置我的 WCF 服务以自动启动，但 MSDN 中列出的步骤（此处：http: [//msdn.microsoft.com/en-us/library/ee677285 (v =azure.10).aspx](http://msdn.microsoft.com/en-us/library/ee677285(v=azure.10).aspx) ) 只有当服务驻留在应用程序中时才有可能，但在我的情况下，.svc 文件直接驻留在站点根目录中。

这样，“配置 WCF 和 WF...”显示为“...用于站点”并且不显示自动启动选项，就像应用程序托管在应用程序子文件夹下一样。

有人知道我在做什么错吗？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T09:00:04.073

您必须编辑位于 C:\windows\system32\inetsrv\config\applicationHost.config 的 IIS 配置文件 ![示例配置](../Images/26c3aaca5a1e0662fbd8347b46bac01a.png)

或使用配置编辑器作为**根级别**(!) ![示例配置编辑器](../Images/ae91b6a58acbb2318b9491db62b39545.png)

或者最后使用 appcmd 脚本

```
appcmd.exe set config  -section:system.applicationHost/sites /[name='YourSite'].[path='/'].serviceAutoStartEnabled:"True" /[name='YourSite'].[path='/'].serviceAutoStartProvider:"Service" /[name='YourSite'].[path='/'].serviceAutoStartMode:"Custom"  /commit:apphost 
```

这仅用于将 Web 应用程序配置为自动启动。对于每项服务，您将有其他步骤。

# javascript - 添加针对 IE 浏览器的 CSS 类：JavaScript 还是条件注释？

> ID：11250483
> 
> 赞同：0
> 
> 时间：2012-06-28T18:08:39.950
> 
> 标签：javascript, jquery, internet-explorer, modernizr, conditional-comments

我的目标是从我的文档中删除 IE 条件注释`<head>`，但我认识到我仍然需要使用特定于 ie6、7、8 的样式表（如果我错了，请纠正我）。

例如，这些 IE 条件由[HTML5Boilerplate 3.0](http://html5boilerplate.com/)使用：

```
<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"><![endif]-->
<!--[if IE 7]>   <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>   <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]--> 
```

所以相反，我想我想使用 JavaScript 将类添加到我的 html 标记中，从而导致这个（[如图所示](http://www.tvidesign.co.uk/blog/CSS-Browser-detection-using-jQuery-instead-of-hacks.aspx)）：

`<html lang="en" class="ie6 ie7 ie8">`

**所以我的问题是：**与使用 IE 条件注释相比，使用 JavaScript 将 CSS 类添加到文档的 html 元素有哪些缺点（后果）？

我现在能想到的一种效果：

1.  IE 客户端可能禁用了 JavaScript。对我来说这不是问题。访问我网站的客户需要启用 JS。

**编辑：**我将继续并承认添加这些类的最可靠方法是（可悲地）使用 IE 条件注释。谢谢大家的对话。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T18:11:51.913

另一件事是，仅 JavaScript 并不是完美检测浏览器的好主意。你听说过**用户代理欺骗**吗？JavaScript 通过用户代理检测浏览器。但是，如果浏览器带有欺骗性的用户代理，那么 Firefox 就可以像 Chrome 一样运行。希望你得到它！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T18:40:43.417

从您提供的同一个[链接](http://www.tvidesign.co.uk/blog/CSS-Browser-detection-using-jQuery-instead-of-hacks.aspx)，

> 1.  您不会加载不会应用的规则，因为它们不适用于此浏览器。
> 2.  您不依赖于可以独立于 CSS 关闭的技术。
> 3.  您不依赖于语法错误可能会暂时破坏浏览器检测的技术。
> 4.  浪费浏览器时间设置相关类并在各处重新计算样式是没有意义的。是的，这一次基本上是不明显的，但从“脏与干净”的角度来看，我认为这让它更脏。

我个人认为，你不应该依赖嗅探`userAgent`，也不应该只加载不必要的 css 规则`ie`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T18:21:35.977

为什么不能为所需的类添加具有 IE 特定设计的单独样式表，而不是向 html 元素添加更多类。您还可以参考[http://paulirish.com/2009/browser-specific-css-hacks/](http://paulirish.com/2009/browser-specific-css-hacks/)在一个 css 文件中，您可以使用 css hack 定位所有浏览器。这也将解决您从 html 头标记中删除 IE 特定条件的初始目的

# c++ - 在 Windows 7 上编译 libjingle 时出错

> ID：11250488
> 
> 赞同：1
> 
> 时间：2012-06-28T18:08:58.310
> 
> 标签：c++, google-talk, libjingle, hole-punching

我遵循了 libjingle 下载中包含的自述文件。安装所有 3rd 方包并运行以下命令：

锤子.bat --jobs=6 --verbose --mode=all all_programs

我收到此错误：

```
cl /Fobuild\dbg\obj\session\phone\videoadapter.obj /c session\phone\videoadapter.cc /TP /ZI /Od /MTd /RTC1 /nologo /W3 /Fdbuild\dbg\obj\session\phone\
videoadapter.obj.pdb /WX /Zc:forScope /EHs-c- /GR- /Gy /wd4996 /w14701 /w14702 /w14706 /w14709 /w14063 /w14064 /w14057 /w14263 /w14266 /w14296 /w14355
 /DLOGGING=1 /DFEATURE_ENABLE_SSL /DFEATURE_ENABLE_VOICEMAIL /DFEATURE_ENABLE_PSTN /DHAVE_SRTP /D_ATL_CSTRING_EXPLICIT_CONSTRUCTORS /D_CRT_SECURE_NO_W
ARNINGS /D_SCL_SECURE_NO_WARNINGS /D_USE_32BIT_TIME_T /D_UNICODE /DUNICODE /D_HAS_EXCEPTIONS=0 /DWIN32 /DWINVER=0x0500 /D_WIN32_WINNT=0x0501 /D_WIN32_
IE=0x0501 /DNTDDI_VERSION=NTDDI_WINXP /D_WINDOWS /D_DEBUG /DFEATURE_ENABLE_VOICEMAIL /DEXPAT_RELATIVE_PATH /DGTEST_RELATIVE_PATH /DSRTP_RELATIVE_PATH
/DXML_STATIC /D_LIB /Ibuild\dbg\obj /I. /IC:\code /IC:\wtl_71\include /IC:\include /Ibuild\dbg\obj\third_party\libudev /Ithird_party\libudev /Ibuild\d
bg\obj\third_party\expat-2.0.1\lib /Ithird_party\expat-2.0.1\lib /Ibuild\dbg\obj\third_party\gtest\include /Ithird_party\gtest\include /Ibuild\dbg\obj
\third_party\srtp\include /Ithird_party\srtp\include /Ibuild\dbg\obj\third_party\srtp\crypto\include /Ithird_party\srtp\crypto\include /Ibuild\dbg\obj
\third_party\openssl\include /Ithird_party\openssl\include
videoadapter.cc
c:\code\talk\third_party\srtp\crypto\include\config.h(188) : error C2371: 'int8_t' : redefinition; different basic types
        c:\program files (x86)\microsoft visual studio 10.0\vc\include\stdint.h(17) : see declaration of 'int8_t'
c:\code\talk\third_party\srtp\crypto\include\config.h(188) : error C2371: 'int8_t' : redefinition; different basic types
        c:\program files (x86)\microsoft visual studio 10.0\vc\include\stdint.h(17) : see declaration of 'int8_t'
scons: *** [build\dbg\obj\session\phone\srtpfilter.obj] Error 2

scons: building terminated because of errors. 
```

环境细节：

Windows 7的

蟒蛇2.7.3

scons 2.1.0

Visual C++ 2010 速成版

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T09:08:39.980

**通过以下链接**成功编译 libjingle 0.6.14：** [http](http://code.google.com/p/libjingle/issues/detail?id=242) ://code.google.com/p/libjingle/issues/detail?id=242 [Used Visual Studio 2010 Professional]。**

 ***   提到的链接提供了mylibjingle.rar，并提供了解决方案文件。

如果遇到任何问题：

*   打开单独的解决方案文件，例如 mylibjingle.sln、login.vcxproj、jingle.vcxproj 并参考源文件列表。

*   将此列表与 libjingle.scons 文件进行比较，例如，要构建 jingle 库，它需要 libjingle.scons 文件中提到的一组文件，并且要在 windows 上构建它需要准备类似的 Visual Studio 项目文件。

    例如：在构建 pcp_main.cc 时，它会引发与以下相关的链接器问题：InternetQueryOption

    *   解决方案：在 pcp_main.h 之上添加 wininet.h 并且它起作用了。**

# html - 将长 HTML 表格包装到下一行

> ID：11250501
> 
> 赞同：9
> 
> 时间：2012-06-28T18:09:46.080
> 
> 标签：html, css, html-table

（我发现[了这个](https://stackoverflow.com/questions/1258416/word-wrap-in-a-html-table)和[这个](https://stackoverflow.com/questions/1057574/html-td-wrap-text)，但它们是关于包装长词的）

我有一张这样的桌子：

```
<table id="myTable" width="100%" border="5" style="table-layout:fixed">
<tr>
<td><img src="photo1"></td>
<td><img src="photo2"></td>
<td><img src="photo3"></td>
<td><img src="photo4"></td>
<td><img src="photo5"></td>
<td><img src="photo6"></td>
</tr>
</table> 
```

如果用户的屏幕宽度很小，我需要换行。我需要包装列并获得这样的表格结果：

我添加了**style="table-layout:fixed"**但这使得表格宽度正好为 100%，但图像会自动拉伸到一半以适应屏幕宽度。

如何将列发送到下一行？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-28T18:30:57.997

您需要决定的是下一行在向下流动时会发生什么行为。它是否添加了一个新的孤立行，即：

```
#container {
    width: 95%;
    max-width: 646px;
    margin: 10px auto;
    border: 5px solid black;
    padding: 5px;
}
#container .row {
    border: 1px solid green;
    border-left: 0;
    border-top: none;
    margin: 0;
    padding: 0;
}
#container br {
    clear: both;
}
#container .block {
    border: 1px solid blue;
    border-bottom: 0;
    border-right: 0;
    float: left;
    width: 128px;
}

<div class="row">
    <div class="block">
        <img src="http://goo.gl/UohAz"/>
    </div>
    <div class="block">
        <img src="http://goo.gl/UohAz"/>
    </div>
    <div class="block">
        <img src="http://goo.gl/UohAz"/>
    </div>
    <div class="block">
        <img src="http://goo.gl/UohAz"/>
    </div>
    <div class="block">
        <img src="http://goo.gl/UohAz"/>
    </div>
     <br/>
</div> 
```

[http://jsfiddle.net/userdude/KFFgf/](http://jsfiddle.net/userdude/KFFgf/)

您会看到溢出变成了一个新行，右侧有剩余和空白区域。

如果您只想要一个“滚动”块，您可以：

[http://jsfiddle.net/userdude/KFFgf/1/](http://jsfiddle.net/userdude/KFFgf/1/)

行只是在流动中阻塞的地方。如有必要，您可以`<br/>`在其中放置标签以创建硬换行符。不确定这是否有帮助并且尚未跨浏览器进行测试，但这就是我认为您的想法。

# dotcloud - 我有一个指向 DotCloud 的 CNAME 和一个指向 wwwizer 的 A 记录。我应该在 PTR 记录中添加什么以进行反向 DNS 查找？

> ID：11250508
> 
> 赞同：1
> 
> 时间：2012-06-28T18:10:11.463
> 
> 标签：dotcloud

我将 PTR 指向 wwwizer 的 IP 地址还是指向 DotCloud？如果我将它指向 DotCloud，这是否意味着我需要获得一个专用 IP？谢谢。

# c# - 将内容控制文档合并到其他内容控制文档中而不丢失数据

> ID：11250516
> 
> 赞同：1
> 
> 时间：2012-06-28T18:10:54.777
> 
> 标签：c#, openxml, office-2010

好的，我认为这是一个相对简单的问题，这就是为什么我很惊讶，经过三天的搜索，我还没有找到解决方案。

我要做的是从多个子文档创建一个庞大的 docx 文档——所有这些子文档都将数据输入到各自模板文档的内容控件中。目前我已经正确创建了子文档，并且它们的所有数据都按原样输入。然后，将完成的子文档分别输入到“主”模板文档上的特定内容控件中。子文档正确填充了主文档，但是以前在子文档的内容控件中的数据现在消失了。

如何将文档与添加到绑定到内容控件的自定义 XML 部件中的数据合并到另一个文档中，而不会丢失该绑定数据？

我正在使用 OpenXML 2 和 C#。

注意：这是使用 altChunk 方法，虽然我也尝试过 DocumentBuilder 并得到了相同的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T18:52:24.763

我认为在合并文档时 CustomXml 部分数据并未反映最终文档中的数据绑定控件。我遇到了类似的问题，我的方法是

1.  在合并之前找到数据绑定控件
2.  从 CustomXml 部分将数据分配给这些控件
3.  使用 AltChunk 方法并合并

您可以在 OpenXmlHelper 类的方法 AssignContentFromCustomXmlPartForDataboundControl 中找到它。代码可以从[Word 文档生成器下载](http://worddocgenerator.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T22:21:25.587

原则上，您只需将自定义 xml 部分（及其 itemProps 相关部分）复制到您的海量 docx 文档中。

从您的帖子中，听起来 altChunk 和 DocumentBuilder 不这样做，但后者的源代码是可用的......

# javascript - 如何按顺序将类添加到元素集合中？

> ID：11250518
> 
> 赞同：0
> 
> 时间：2012-06-28T18:11:01.057
> 
> 标签：javascript, jquery

我试图向集合中的每个元素添加一个类。我想向元素添加一个类，然后等待一两秒，然后将该类添加到集合中的下一个。

但是当我使用这段代码时，它只是一次将类添加到每个类中。

```
for (var i = 0; i < article.length; i++) {
    setTimeout(function () {
        $(article[i]).addClass('something';
        }, 10000);
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T18:15:22.227

尝试这样的事情：

```
 (function step(i){         
     if( i < article.length ){
          $(article[i]).addClass('some_class');
          setTimeout(function(){ step(i+1) },10000);
     }         
 })(0); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T18:14:55.477

问题是您从同一时刻开始设置一堆超时 10 秒，因此它们都将在 10 秒后立即执行。您需要将它们链接在一起，以便每个超时处理程序调用下一个超时：

```
var i = 0;
var callback;

callback = function () {
    if (i < article.length) {
        $(article[i]).addClass('something');

        ++i;
        setTimeout(callback, 10000);
    }
};

setTimeout(callback, 10000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T18:16:08.800

您可以使用

```
var x = setInterval("javascript",ms); 
```

它会每隔“毫秒”一次又一次地调用代码部分中的任何内容，直到您调用

```
clearInterval(x); 
```

功能

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T18:39:41.577

一种无需链接调用的方法：

```
for (var i = 0; i < article.length; i++) {
    (function(_i) {
    setTimeout(function () {
        $(article[_i]).addClass('something');
    }, 10000+_i*1000);
    })(i);
} 
```

添加 CSS 类的开销不大可能足以使其无法按预期运行。

# c# - 将带有图像的 GridView 从数据库导出为 Word Excel 和 PDF 格式

> ID：11250523
> 
> 赞同：0
> 
> 时间：2012-06-28T18:11:08.950
> 
> 标签：c#, javascript, asp.net, ajax, componentone

代码 ：

```
protected void btnExportPDF_Click(object sender, EventArgs e)
{
    Response.ContentType = "application/pdf";
    Response.AddHeader("content-disposition", "attachment;filename=GridViewExport.pdf");
    Response.Cache.SetCacheability(HttpCacheability.NoCache);
    StringWriter sw = new StringWriter();
    HtmlTextWriter hw = new HtmlTextWriter(sw);
    C1GridView1_listview.AllowPaging = false;
    C1GridView1_listview.DataBind();
    C1GridView1_listview.RenderControl(hw);
    C1GridView1_listview.HeaderRow.Style.Add("width", "15%");
    C1GridView1_listview.HeaderRow.Style.Add("font-size", "10px");
    C1GridView1_listview.Style.Add("text-decoration", "none");
    C1GridView1_listview.Style.Add("font-family", "Arial, Helvetica, sans-serif;");
    C1GridView1_listview.Style.Add("font-size", "8px");
    StringReader sr = new StringReader(sw.ToString());
    Document pdfDoc = new Document(PageSize.A2, 7f, 7f, 7f, 0f);
    HTMLWorker htmlparser = new HTMLWorker(pdfDoc);
    PdfWriter.GetInstance(pdfDoc, Response.OutputStream);
    pdfDoc.Open();
    htmlparser.Parse(sr);//this is error line
    pdfDoc.Close();
    Response.Write(pdfDoc);
    Response.End();
} 
```

错误：

> 无法将“iTextSharp.text.html.simpleparser.CellWrapper”类型的对象转换为“iTextSharp.text.Paragraph”类型。

我该如何解决这个错误？

# c++ - 从另一个 .vcproj 链接/包含文件到现有 .vcproj

> ID：11250528
> 
> 赞同：0
> 
> 时间：2012-06-28T18:11:31.930
> 
> 标签：c++, visual-studio-2008, visual-c++, linker, header-files

我正在使用 Visual Studio 2008。我有一个 Visual C 项目“new.vcproj”。需要进行一些更改，以便它利用来自另一个 Visual C 项目“old.vcproj”的类方法。该类在 class.hpp 中定义，并在项目“old.vcproj”的 class.cpp 中实现 如何在项目“new”中包含“old”中的类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T18:16:27.953

您可以将`class.hpp`和`class.cpp`作为现有项目添加到`new.vcproj`.

如果`old.vcproj`编译到库，更好的方法是`class.hpp`在`new.vcproj`源文件中包含头文件，然后链接到`old.vcproj`库。

# android - 当仅列出一项时捕获微调项单击

> ID：11250529
> 
> 赞同：0
> 
> 时间：2012-06-28T18:11:34.307
> 
> 标签：android, spinner

我正在尝试做一些不是特制的微调器。我得到了动态变化的列表。当用户选择项目时，我需要捕捉 onSelectedItemClick。当微调器适配器中只有一项时会出现问题。选择它（或者更确切地说是重新选择，因为它已经被选中）不会触发 OnSelectedItemListener。

否则我怎么能抓住它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T18:18:55.923

如果您只有一件物品，则无需从微调器中进行选择，您可以进入`onSeletedItem method.`

*   如果您只有一项，则还会调用 onItemSelected。

`String str = (String)parent.getSeletedItem();`

# apache-camel - Servicemix/Camel：如何利用 OSGI 创建“可插拔”包？

> ID：11250532
> 
> 赞同：1
> 
> 时间：2012-06-28T18:11:38.660
> 
> 标签：apache-camel, apache-servicemix

场景：我将尝试与 EIP 书中的贷款经纪人示例进行类比

1.  客户发送报价请求
2.  （贷款经纪人向征信机构索取客户信用评分）
3.  贷款经纪人向每家银行发送报价请求。

问题

*   在我的情况下，第 1 点和第 2 点在同一个骆驼上下文中（或 osgi 包）
*   每家银行都有一个单独的捆绑包，通过 NMR 将端点暴露给贷款经纪人捆绑包
*   贷款经纪人捆绑事先不了解银行，因为我们不时与新银行合作

我做了什么

*   在loan-broker-bundle 中创建了一个注册类和一个bankDescriptor 接口
*   每个银行捆绑包在启动时都会调用 registery 以添加其 bankDescriptor (spring init)，它告诉贷款经纪人调用哪个端点来获取报价。
*   贷款经纪人捆绑主路由使用收件人列表（处理器通过询问注册表设置目标端点）来路由报价请求

问题

希望我的描述足够清楚，您可以看到这是一个非常简单的实现。它的极限是什么？我怎样才能把这个注册表变成一个 osgi 服务？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T15:51:29.083

我为客户开发了一个基于 SpringDM 的解决方案。[在http://www.jakubkorab.net/2012/05/system-integrations-as-plugins-using-camel-and-servicemix.html](http://www.jakubkorab.net/2012/05/system-integrations-as-plugins-using-camel-and-servicemix.html)上有完整的关于如何做到这一点的文章，完整的源代码在[https： //github.com/FuseByExample/smx-application-plugins](https://github.com/FuseByExample/smx-application-plugins)

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T14:53:19.017

在 OSGi 中有一个很棒的注册表供您使用：OSGi 服务注册表。所以我的建议是稍微不同地做这件事。为报价请求定义服务接口并将其存储在 api 包中。然后让每个银行实现这个接口，并将实现发布为 OSGi 服务。

然后，贷款经纪人包可以列出 OSGi 服务注册表中的所有 OSGi 服务并调用每个服务以获取报价。在蓝图中有一个不错的标签，您可以使用它来将列表注入到 List 的 bean 属性中。Spring DM 可能有类似的东西。

Camel 目前没有办法调用一个类型的所有 OSGi 服务。我们讨论了一个能够做到这一点的新 osgi 服务组件。所以可能我们很快就会有一个解决方案。

# javascript - 你在提交之前清理你的 map/reduce 函数吗？如何？

> ID：11250534
> 
> 赞同：1
> 
> 时间：2012-06-28T18:11:39.907
> 
> 标签：javascript, couchdb

在couchdb 中，可以在Javascript 中定义map 和reduce 函数，并通过HTTP POST 将它们提交到服务器以定义视图。凉爽的。

应用程序指定相应函数的字符串表示。

我正在使用文本编辑器 emacs 构建一个连接到 couchdb 的 JS 应用程序。这让我可以像这样定义 map 和 reduce 函数：

```
var byname = function(doc) { 
   emit(doc.name,null);
}; 
```

这给了我 emacs 语法高亮、jslint 检查等等。

在运行时，我可以得到这样定义的一组视图函数中的每一个的字符串表示，并将其发送到 CouchDB，方法是：

```
doc = { views: { empty:   { map:stringRep(empty) },
                 byname:  { map:stringRep(byname) },
                 invalid: { map:stringRep(invalid) }}};

// PUT that doc to couchdb here, to define the design_doc . 
```

但字符串表示包括换行符、回车符等。

我可以用正则表达式替换过滤掉那些，这适用于简单的情况。但函数中还有更复杂的注释行情况。例如：

```
var byname = function(doc) { 
   // a comment here
   emit(doc.name,null);
}; 
```

在这种情况下，stringRep 将包含注释，但如果我消除了换行符和虚拟空格，注释仍然存在。我也可以更换这些，但可能还有其他问题（不确定）。

**人们是否有一种典型或推荐的方式来清理他们的 javascript 函数，然后再将它们发送到 couchdb？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T08:21:26.590

不，没有什么特别的。它们由常规 JavaScript 引擎 (SpiderMonkey) 解释/编译，不需要任何预处理或清理等。像编写任何其他脚本一样编写它们。

Web 上使用的大多数做法具有完全相同的含义或效果 - 如果您设法以某种方式将数千个不同的功能发送到 DB 并希望节省带宽，您可以缩小发送的所有内容；您可以将其他语言的代码编译为 JS 等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T07:59:35.767

这就是我最终使用的：

```
CouchDB.stringRep = function(fn) {
    return fn.toString()
        .replace(/[\s\t]*\/\/.*$/gm, '') // comments
        .replace(/\n */gm, ' ')
        .replace(/\r */gm, ' ')
        .replace(/\{ +/gm, '{')
        .replace(/ +\}/gm, '}');
}; 
```

然后我用这种 HTTP 消息上传以这种方式序列化的函数：

```
PUT https://foo.cloudant.com/fop/_design/baseViews HTTP/1.1
Accept: text/plain,application/json
Accept-Language: en-us
User-Agent: Mozilla/4.0 (compatible; Win32; WinHttp.WinHttpRequest.5)
Content-Length: ...
Host: foo.cloudant.com

{"views":{"empty":{"map":"function(doc) {if ( ! doc.observation || doc.observation === '') {emit(doc.id, 1);}}"},...}} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T19:56:39.643

不。

我们不仅不清理它们，而且将它们放在 cofeescript 中的设计文件中，该文件由`cake`自动将它们转换为 JS 的任务插入。

# objective-c - h.file 中的属性定义

> ID：11250539
> 
> 赞同：0
> 
> 时间：2012-06-28T18:12:02.837
> 
> 标签：objective-c, ios

> **可能重复：**
> [iOS：每个 iVar 都必须真的是财产吗？](https://stackoverflow.com/questions/5031230/ios-must-every-ivar-really-be-property)

如果有人能向我解释为什么在接口语句中定义了一些属性而将一些属性定义为 @property ，我将不胜感激。

```
@interface PlacesParser : NSObject
{
    NSMutableArray *arrPlaces;   

    TBXML *tbxml;
}

@property(nonatomic,retain) NSMutableArray *arrPlaces;

-(void)loadRecords:(NSString *)records;
-(void)traverseElement:(TBXMLElement *)element;

@end 
```

在我的示例中，我们将“arrPlaces”作为@property

和界面中的“arrPlaces”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T18:31:56.827

接口中的东西实际上并不是一个属性，它只是一个普通的旧实例变量。该`@property`声明是使其成为属性的原因（为您提供 setter 和 getter）。你曾经需要两者，但现在不再需要了。如果您希望您的字段成为具有这些生成方法的属性，您可以省略初始字段声明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T19:10:32.210

[Objective-C中的ivars和属性有什么区别](https://stackoverflow.com/questions/4172810/what-is-the-difference-between-ivars-and-properties-in-objective-c)

这个话题真的让我大开眼界。很好地解释了我的问题。

# c++ - C++中'and'、'or'等关键字的作用是什么？

> ID：11250540
> 
> 赞同：5
> 
> 时间：2012-06-28T18:12:13.043
> 
> 标签：c++, operators, operator-keyword, keyword

以下关键字的目的是什么？

```
and      bitand   compl   not_eq   or_eq   xor_eq
and_eq   bitor    not     or       xor 
```

如果它们都是直接等价于：

```
&&       &        ~       !=       |=      ^=
&=       |        !       ||       ^ 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-28T18:15:30.270

[http://en.wikipedia.org/wiki/Iso646.h](http://en.wikipedia.org/wiki/Iso646.h)

iso646.h *"...定义了许多宏，允许程序员使用 C 语言按位和逻辑运算符，如果没有头文件，这些宏在某些国际和非 QWERTY 键盘上无法快速或轻松地键入。*

*文件名指的是 ISO646 标准，这是一个 7 位字符集，具有许多区域变体，其中一些使用重音字符代替 C 运算符使用的标点符号。”*

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-28T18:49:08.160

这样您就可以编写疯狂的代码诗，例如：

```
class jack
{
   jack();
   jack( jack & jill );
   jack& came_tumbling( int after );
   jack& fell( jack & jill ); 
   jack& operator &= ( jack & jill );
   jack& operator & ( jack & jill );
}

void to_fetch( int pail );

int a_pail;
int after;
jack broke_his_crown;
jack went_up_the_hill;
jack down;

jack and jill = went_up_the_hill;
to_fetch( a_pail ); // of water
jack fell( down and broke_his_crown 
and jill.came_tumbling( after )); 
```

# c# - 如何使用 jquery 启用禁用的自定义验证器

> ID：11250541
> 
> 赞同：1
> 
> 时间：2012-06-28T18:12:16.953
> 
> 标签：c#, jquery, asp.net, customvalidator

我有一个禁用的自定义验证器，我想使用 jquery 启用它。
我怎样才能做到这一点？
下面的代码适用于 RequiredFieldValidators 但不适用于 CustomValidators ：

```
 ValidatorEnable($('#cvPass'), true); 
```

解决办法是什么？
**编辑：**
我正在使用服务器端验证，而不是客户端。
当我们使用客户端验证时，启用和禁用自定义验证器没有问题。
感谢@Josh Mein 的简单代码

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T18:42:10.773

我对你的尝试没有任何问题。这是一个对我有用的简单示例：

**HTML**：

```
<asp:TextBox runat="server" ID="txt_Test" />
<asp:CustomValidator runat="server" ID="val_Test" ValidateEmptyText="true" ClientValidationFunction="MyValidation" ControlToValidate="txt_Test" ErrorMessage="Test"></asp:CustomValidator>
<asp:Button runat="server" ID="btn_Test" Text="Test" onclick="btn_Test_Click" />
<input type="button" value="disable validator" onclick="disableValidator()" />
<input type="button" value="enable validator" onclick="enableValidator()" /> 
```

**Javascript**：

```
function enableValidator() {
    ValidatorEnable($('[id$=val_Test]')[0], true);
}

function disableValidator() {
    ValidatorEnable($('[id$=val_Test]')[0], false);
}

function MyValidation(sender, args) {
    if ($('[id$=txt_Test]').val() == "")
        args.IsValid = false;
} 
```

**编辑**：有了你的新信息，我相信我知道问题出在哪里。在服务器验证开始之前，页面会重新加载，这会导致验证器被设置为禁用，因为根据服务器是其最后一个已知状态。这是因为验证器不是将其值回发到服务器的控件。您可以使用可以告诉服务器验证控件的值设置 hiddenField。

# maven - 我可以在运行时检测到缺少必须根据 pom 提供的依赖项吗？

> ID：11250544
> 
> 赞同：1
> 
> 时间：2012-06-28T18:12:34.713
> 
> 标签：maven, dependency-management

我在一个有很多模块（它们是 portlet）的大项目中工作，并且依赖项管理变得越来越难。我们遇到的问题是，所有 portlet 都使用了一些 jar，但仍然没有为服务器提供，所以我们将它们包含在每个 WEB-INF/lib 中，或者声明了依赖项但根本不使用，等等。
我正在努力收拾那些烂摊子，但我害怕犯错误而无法发现它，直到为时已晚。
假设我将依赖项标记为“已提供”，并且在我忘记测试的奇怪业务案例中需要它，并且服务器不提供这样的依赖项。
组织是官僚主义的，我无法访问服务器来检查给定 jar 的实际存在。一旦安装了战争，我有什么办法可以检查依赖关系，看看是否一切都在那里并且可以访问？
War 文件在 META-INF 中包含 pom.xml 的副本，因此至少有部分信息存在。
我很想看到类似的东西

```
INFO: Checking provided dependency org.drools-drools-core-4.0.7........done  
ERROR: Checking provided dependency org.drools-drools-compiler-4.0.7........FAIL 
```

在日志中...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T06:58:07.237

没有这样的工具，因为您谈论的所有事情都发生在运行时。您必须跟踪所有`ClassNotFoundException`日志并找到包含给定类的工件，例如使用[GrepCode](http://grepcode.com/)。这是我前段时间想到的最好的类似案例。更容易的是通过做来检查你是否有一些已声明和未使用的依赖项或未声明和使用（作为传递）`mvn dependency:analyze`。它通常工作得很好，但要注意它使用 Maven 2 依赖解析，所以在使用 Maven 3 时有时会撒谎。根据我的经验，它不会经常发生，但有时会发生并且会导致一些问题。

# c# - 从实体获取实体列表的通用函数

> ID：11250546
> 
> 赞同：0
> 
> 时间：2012-06-28T18:12:40.480
> 
> 标签：c#, asp.net, entity-framework, linq-to-entities

我想创建一个通用函数，我将实体名称传递给它，它返回该实体类型的列表，如下所示：

```
private List<Entity> GetEntityList(Entity entity)
{
    return context.entity.ToList();
} 
```

其中上下文是对象上下文。

请提出解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T19:00:10.297

这可能会有所帮助：

```
public static class ObjectContextExtensions
    {
        public static ObjectQuery<TEntity> GetEntities<TEntity>(this ObjectContext context) where TEntity : class {
            var query = from pd in context.GetType().GetProperties()
                        where pd.PropertyType.IsSubclassOf(typeof(ObjectQuery<TEntity>))
                        select (ObjectQuery<TEntity>)pd.GetValue(context, null);
            return query.FirstOrDefault();
        }
    } 
```

用法：

```
using (var objectContext = new ObjectContext())
            {
                var entities = objectContext.GetEntities<Entity>().ToList();
            } 
```

# iphone - 设置后对象保持为空

> ID：11250547
> 
> 赞同：0
> 
> 时间：2012-06-28T18:12:43.077
> 
> 标签：iphone, objective-c, ios

我正在尝试设置对象的属性，但它仍然为空。谁能告诉我为什么？

宣言：

```
@property (nonatomic, strong) ListItem *listItem 
```

这是代码：

```
NSLog(@"Selected: %@", [self.fetchedResultsController objectAtIndexPath:indexPath]);
[listItem setCategory:[self.fetchedResultsController objectAtIndexPath:indexPath]];
NSLog(@"set %@", listItem); 
```

和输出：

```
2012-06-28 14:47:43.037 MarketList[10508:fb03] Selected: <Category: 0xb72a9e0> (entity: Category; id: 0xb7252e0 <x-coredata://F9BFC1DF-1D80-477E-9BC6-3C0949AD922F/Category/p2> ; data: {
listItem = "<relationship fault: 0x6d29930 'listItem'>";
name = "Teste 2";})
2012-06-28 14:47:43.038 MarketList[10508:fb03] set (null) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T18:28:17.890

1.  您的属性声明中缺少分号（假设这只是一个错字）。

2.  你真的初始化过 ListItem 吗？（即`listItem = [[ListItem alloc] init];` ，如果你不这样做，指向它的指针将为 nil，并且会导致这种行为（带有 nil 指针的调用将被忽略）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T18:38:17.653

您的变量`listItem`包含`nil`，而不是 ListItem 的实例。你从来没有真正将它指向一个 ListItem 的实例，所以它仍然`nil`在你的方法的末尾。发送消息`nil`不会导致对象神奇地出现以接收消息 -`nil`只是默默地吞下它。您必须先创建您的 ListItem，*然后再*设置它的属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-26T13:17:13.563

在使用它之前分配对象。在 viewDidLoad 中分配它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T18:42:39.953

```
NSLog(@"Selected: %@", [self.fetchedResultsController objectAtIndexPath:indexPath]);
listItem = [self.fetchedResultsController objectAtIndexPath:indexPath];
[listItem setCategory:[self.fetchedResultsController objectAtIndexPath:indexPath]];
NSLog(@"set %@", listItem); 
```

# java - 我可以使用 URL 路径设置 Keystore 属性吗？

> ID：11250548
> 
> 赞同：1
> 
> 时间：2012-06-28T18:12:55.520
> 
> 标签：java, google-app-engine, ssl, jax-ws, pki

我正在尝试为 Google App Engine 上的 JAX-WS Web 服务客户端提供 2 路 SSL 身份验证。

`javax.net.ssl.keystore`我相对确定我可以通过强制转换为 BindingProvider 并设置属性来设置客户端的私钥，如下所示：

```
WebServicePortType service = new WebService().getWebServicePort();
((BindingProvider) service).getRequestContext().put("javax.net.ssl.keyStore", "client_cert.p12" 
```

我能找到的所有示例都假定`client_cert.p12`是本地文件系统上的文件。

由于我们在 Google App Engine 上，因此禁止我们直接访问文件系统。

此上下文是否会接受密钥库位置的 URL？如果没有，有什么方法可以在不需要文件系统访问的 Web 服务上设置密钥库？

谢谢

**编辑：**

`SSLSocketFactory`, `SSLContext`, `KeyManager`, 和`KeyManagerFactory`所有在 GAE 上都是不允许的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T18:52:49.027

我用谷歌搜索并从[这里](http://www.coderanch.com/t/372437/java/java/javax-net-ssl-keyStore-system)得到了以下解决方法。

1.  将密钥库文件作为资源流读取：MyClass.class.getClassLoader().getResourceAsStream(jarCertFile);
2.  将其写入本地文件
3.  将 keystore 属性设置为本地文件，System.setProperty("javax.net.ssl.keyStore",trustStore);

但它需要您应该能够在 GAE 中创建一个本地文件，这在阅读您提到的链接后似乎是可能的。`ServletContextListener`您可以在应用程序启动时创建此文件的代码中配置此代码。

编辑：

此解决方法假定密钥库文件捆绑在您的应用程序存档中。

# xcode - 有没有办法在没有 Ctrl-Drag 的情况下在 Interface Builder 中设置引用出口

> ID：11250552
> 
> 赞同：5
> 
> 时间：2012-06-28T18:13:19.660
> 
> 标签：xcode, interface-builder, xcode4.3

所以我只是想在这里创建一个非常简单的应用程序用于演示目的：

*   使用情节提要创建了单视图应用程序
*   向情节提要添加了 UIView
*   将以下代码添加到我的控制器的头文件中：

    ```
    @property (weak, nonatomic) IBOutlet UIView *myView; 
    ```

现在，我知道我可以通过以下方式将 UIView 链接到控制器：

*   安排我的代码，使头文件位于情节提要旁边
*   按住Ctrl键拖拽到头文件中的属性

我的问题是：我可以在**没有**Ctrl-drag 的情况下执行此操作吗？如果是这样，怎么办？

更具体地说 - 必须同时将我的头文件和情节提要放在屏幕上很烦人，而且似乎应该有一种方法可以在不这样做的情况下建立这种连接。

我也知道我可以通过在控制器的 viewDidLoad 函数中创建视图来手动放置视图，但我真的很想使用界面构建器来简化/可视化事物。

**编辑：**无论我使用情节提要还是 xib/nib 文件，我的问题的答案是否会受到影响？（我会改用它工作的那个）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T18:25:22.947

您应该能够右键单击该元素，然后将“引用插座”项拖到界面构建器中视图的“文件所有者”。在那里，它将为您提供所有可用 IBOutlets 的列表（匹配对象的类型）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-28T18:31:19.143

除了 Dima 的回答，您还可以使用 Utilities 窗格中的 Connection 检查器

![连接检查器](../Images/e258d3d4abf1777b07b4ad10f1a369cd.png)

# python - 使用python获取文本文件中的特定单词

> ID：11250553
> 
> 赞同：-3
> 
> 时间：2012-06-28T18:13:25.793
> 
> 标签：python, python-2.7

我有一个文本文件包含这种格式的“A 0001 1212 00 @@ word”，我想在访问 word 时打印然后只有 0001 1212 部分必须显示，00 也必须动态显示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T18:15:58.103

你试过什么？我并没有真正遵循您的格式。

```
f=open(filepath, 'r')
hold = f.read()
#hold now = 'A 0001 1212 00 @@ word'
holdout = hold.replace( '@@ word','')
#holdout now = 'A 0001 1212 00 '
#the replace call uses this format 
#string.replace('what it is looking for', 'what it is going to be') 
```

这是你想要的吗？这个文件只有一行吗？

# rest - 如何使用 JMeter 将 application/x-www-form-urlencoded 参数发送到 RestServer？

> ID：11250555
> 
> 赞同：12
> 
> 时间：2012-06-28T18:13:32.330
> 
> 标签：rest, mime-types, jmeter, form-data

我开发了一个休息服务器，我把它放在本地主机上运行，​​我正在尝试用 JMeter 执行测试，发送请求帖子和获取（取决于被调用的方法）。

我已经发送到 Rest 服务器并使用 JMeter 在简单的 post 请求、get 请求、使用 post 发送文件以及使用 post 发送 Json 中获得了结果。

但我不知道如何将`Form-UrlEncoded`对象发送到服务器。我的 Rest 服务器消耗`application/x-www-form-urlencoded`，我需要发送 3 个字符串参数。

有一些方法可以设置`MimeType`每个参数并执行测试？

我正在使用 Jmeter 2.7

*   **[更新]**

我通过禁用该选项解决了这个问题：

```
use multipart/form-data for post 
```

并启用：

```
redirect automatically 
```

代替：

```
follow redirect 
```

我通常将参数放在“使用请求发送参数”表中，每个参数都有各自的名称。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2015-07-22T08:57:24.147

要将表单参数作为 application/x-www-form-urlencoded 发送，请添加一个标头参数 Content-Type，其值为 application/x-www-form-urlencoded。

以下步骤适用于 Jmeter 2.3.4

1.  在您的 http 请求下添加一个 HTTP 标头管理器。
2.  将新参数添加到 HTTP 标头管理器，名称为 Content-Type，值为 application/x-www-form-urlencoded。
3.  取消选中 HTTP 请求的“Use multipart/form-data for HTTP POST”。
4.  取消选中“编码？” 每个请求参数（不是必需的）。
5.  将 HTTP 请求的“内容编码：”文本框保持为空。

    **这不适用于 PUT 请求。** 对于 put 请求添加参数作为路径参数并设置 Content-Type 标头，然后 Jmeter 将自行完成。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-10-30T08:53:58.010

这是使用 jmeter 进行 x-www-form-urlencoded 测试的 HTTP POST 的解决方案。你就跟着这些。 [![在此处输入图像描述](../Images/52803b4b66565137349c46c5d331da52.png)](https://i.stack.imgur.com/DkbUe.png)

[![在此处输入图像描述](../Images/2bfccaf1e995a7b974154782662890b2.png)](https://i.stack.imgur.com/zFcxe.png)

[![在此处输入图像描述](../Images/83e92483bc43fef3295d4187402ea715.png)](https://i.stack.imgur.com/LfGyt.png)

转到线程组-> 添加侦听器-> 在表中查看结果，查看结果树。查看响应的过程。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T21:59:55.937

您是否尝试过使用[BadBoy](http://www.badboy.com.au/)或[JMeter Proxy](http://jmeter.apache.org/usermanual/jmeter_proxy_step_by_step.pdf)保存测试以查看您的应用程序实际发送的内容？

`FireBug`如果您使用的是 FireFox 或使用`Ctrl+Shift+i`的是 Chrome，您也可以查看引擎盖下发生的情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-01T15:48:57.977

只有在 HTTP 标头管理器中为 HTTP 请求添加所需的内容类型后，IllegalCharsetNameException 才会立即发生。

希望这可以帮助。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2017-07-17T16:13:41.610

遵循提到的确切步骤，我仍然看到抛出异常

响应代码：非 HTTP 响应代码：java.nio.charset.IllegalCharsetNameException 响应消息：非 HTTP 响应消息：application/x-www-form-urlencoded

```
java.nio.charset.IllegalCharsetNameException: application/x-www-form-urlencoded
    at java.nio.charset.Charset.checkName(Charset.java:315)
    at java.nio.charset.Charset.lookup2(Charset.java:484)
    at java.nio.charset.Charset.lookup(Charset.java:464)
    at java.nio.charset.Charset.forName(Charset.java:528)
    at org.apache.http.entity.ContentType.create(ContentType.java:210)
    at org.apache.http.entity.StringEntity.<init>(StringEntity.java:116)
    at org.apache.jmeter.protocol.http.sampler.HTTPHC4Impl.sendPostData(HTTPHC4Impl.java:1340)
    at org.apache.jmeter.protocol.http.sampler.HTTPHC4Impl.handleMethod(HTTPHC4Impl.java:592)
    at org.apache.jmeter.protocol.http.sampler.HTTPHC4Impl.sample(HTTPHC4Impl.java:409)
    at org.apache.jmeter.protocol.http.sampler.HTTPSamplerProxy.sample(HTTPSamplerProxy.java:74)
    at org.apache.jmeter.protocol.http.sampler.HTTPSamplerBase.sample(HTTPSamplerBase.java:1166)
    at org.apache.jmeter.protocol.http.sampler.HTTPSamplerBase.sample(HTTPSamplerBase.java:1155)
    at org.apache.jmeter.threads.JMeterThread.executeSamplePackage(JMeterThread.java:475)
    at org.apache.jmeter.threads.JMeterThread.processSampler(JMeterThread.java:418)
    at org.apache.jmeter.threads.JMeterThread.run(JMeterThread.java:249)
    at java.lang.Thread.run(Thread.java:745) 
```

# clojure - 从循环中返回一个值

> ID：11250557
> 
> 赞同：3
> 
> 时间：2012-06-28T18:13:44.527
> 
> 标签：clojure

我是 Clojure 的新手，希望 SO 可以帮助我：

```
;; a loop to collect data
(defn read-multiple []
  (def inputs (list))

  (loop [ins inputs]
    (def input (read-val ">"))
    (if (not= input "0")
      (recur (conj ins input)))
    (i-would-like-to-return-something-when-the-loop-terminates))) 
```

收集输入后，我如何获取迄今为止收集的所有输入的列表？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T18:20:54.103

循环的返回值将是 if 语句的返回值

```
 (loop [ins inputs]
   (def input (read-val ">"))
   (if (not= input "0")
     (recur (conj ins input))
     return-value-goes-here)) 
```

并替换`def`为`let`绑定本地人

```
(loop [ins inputs]
 (let [input (read-val ">")]
  (if (not= input "0")
    (recur (conj ins input))
    return-value-goes-here))) 
```

# r - 检查 R 中已安装的软件包

> ID：11250559
> 
> 赞同：7
> 
> 时间：2012-06-28T18:13:46.810
> 
> 标签：r, r-package

基于对这个问题的回答：[Elegant way to check for missing packages and install them?](https://stackoverflow.com/questions/4090169/elegant-way-to-check-for-missing-packages-and-install-them)

我正在使用以下代码来确保在升级 R 或设置其他用户时安装了所有软件包：

```
list.of.packages <- c("RODBC", "reshape2", "plyr")
new.packages <- list.of.packages[!(list.of.packages %in% installed.packages()[,"Package"])]
if(length(new.packages)) install.packages(new.packages) 
```

我已将它放在 .Rprofile 中的 .First 函数中，但是当我启动 R 时，它会出现以下错误并继续启动：

```
Error in match(x, table, nomatch = 0L) : 
  could not find function "installed.packages" 
```

如果我在收到提示后运行代码，它可以正常工作。任何想法为什么？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-28T18:20:15.260

从阅读`?Startup`中可以看出：

> 接下来，如果在搜索路径中找到函数 .First，则将其作为 .First() 执行。最后，运行基础包中的函数 .First.sys()。此调用需要附加选项（“defaultPackages”）指定的默认包。

现在，`installed.packages`在**utils**包中，它通常是默认包之一。所以它在当时是不可用的`.First`。

也许尝试替换`installed.packages`为`utils::installed.packages`?

正如 Josh 在下方指出的那样，我的视线掠过直接解决这个问题的文章，即：

> 请注意，当站点和用户配置文件获取源时，仅加载基本包，因此其他包中的对象需要通过例如 utils::dump.frames 或在显式加载相关包后引用。

# ruby-on-rails - 设计身份验证：注销并重定向

> ID：11250560
> 
> 赞同：0
> 
> 时间：2012-06-28T18:13:55.510
> 
> 标签：ruby-on-rails, redirect, devise, logout

有没有办法编写将注销并重定向到自定义页面的 Rails 方法？我正在使用设计身份验证 gem。

我不希望在所有注销之后都进行此重定向，但仅在调用此方法的地方。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T19:08:56.217

这取决于您重定向到一个地方或另一个地方的条件，但这是我在应用程序中所做的，根据我的用户角色进行不同的重定向：

将此作为私有方法添加到您的**ApplicationController**中：

```
 private 

  def after_sign_out_path_for(resource_or_scope)
    # If it's admin 
     if is_admin?(current_user)
        admin_path
    # Otherwise
     else
        root_path
     end
  end 
```

基本上，您需要在[after_sign_out_path](http://rubydoc.info/github/plataformatec/devise/master/Devise/Controllers/Helpers#after_sign_out_path_for-instance_method)中找到需要应用的条件，并根据该条件返回路径。请注意，您会得到一个带有作用域的符号，因此您可以使用它来选择返回的重定向路径。

# linux - 如何使用 Expect 自动化 telnet 会话？

> ID：11250564
> 
> 赞同：8
> 
> 时间：2012-06-28T18:14:24.957
> 
> 标签：linux, telnet, expect

我正在尝试编写一个期望脚本来自动化 telnet。这就是我到目前为止所拥有的。

```
#!/usr/bin/expect
# Test expect script to telnet.

spawn telnet 10.62.136.252
expect "foobox login:"
send "foo1\r"
expect "Password:"
send "foo2\r"
send "echo HELLO WORLD\r"
# end of expect script. 
```

基本上，我想做的是telnet到以下IP地址，然后回显HELLO WORLD。但是，似乎脚本在尝试远程登录后失败了......我不确定它是否能够接受登录名和密码输入，但它没有回显 HELLO WORLD。相反，我只是得到这个输出：

```
cheungj@sfgpws30:~/justin> ./hpuxrama 
spawn telnet 10.62.136.252
Trying 10.62.136.252...
Connected to 10.62.136.252.
Escape character is '^]'.
Welcome to openSUSE 11.1 - Kernel 2.6.27.7-9-pae (7).

foobox login: foo1
Password: foo2~/justin> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T22:20:23.657

很难说，但从您粘贴的输出来看，它看起来像：

1.  在发送下一个命令之前，您的脚本不会等待登录完成。
2.  在您看到任何输出之前，您的脚本正在退出并关闭该进程。

生活中没有任何保证，但我会尝试这是第一步：

```
#!/usr/bin/expect -f

spawn telnet 10.62.136.252
expect "foobox login:"
send "foo1\r"
expect "Password:"
send "foo2\r"

# Wait for a prompt. Adjust as needed to match the expected prompt.
expect "justin>"
send "echo HELLO WORLD\r"

# Wait 5 seconds before exiting script and closing all processes.
sleep 5 
```

### 备择方案

如果您无法通过手动编程来使您的脚本工作，请尝试使用 Expect 附带的 autoexpect 脚本。您可以手动执行命令，autoexpect 将根据这些命令生成 Expect 打字稿，然后您可以根据需要对其进行编辑。

这是了解 Expect 实际看到的内容的好方法，尤其是在问题难以确定的情况下。多年来，它为我节省了很多调试时间，如果上述解决方案不适合您，绝对值得一试。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-28T22:18:46.433

您正在发送`echo`命令而没有先期待提示。尝试：

```
# after sending the password
expect -re "> ?$"
send "echo HELLO WORLD\r"
expect eof 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T18:22:38.287

你看过[这个 StackOverflow 问题](https://stackoverflow.com/questions/7789710/expect-script-to-automate-telnet-login)吗？

他似乎通过使用花括号让事情变得有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-14T22:06:23.943

这是一个简化版本

```
#!/usr/bin/expect
# just do a chmod 755 one the script
# ./YOUR_SCRIPT_NAME.sh $YOUHOST $PORT
# if you get "Escape character is '^]'" as the output it means got connected otherwise it has failed

set ip [lindex $argv 0]
set port [lindex $argv 1]

set timeout 5
spawn telnet $ip $port
expect "'^]'." 
```

# java - Android App Widget broadcast doesn't work

> ID：11250572
> 
> 赞同：3
> 
> 时间：2012-06-28T18:15:14.457
> 
> 标签：java, android, android-widget

I have a widget with 1 image view and 1 text view.

![on](../Images/c8f423701aabf12182bc26b9653cf7ef.png)![off](../Images/7da3f62690b8c641fe59b302f896e6a0.png)

I want to change image on click. Consider following code doesn't catch touch event

```
package com.sigrlami.rixvpn.widget;

import java.util.Random;

import android.app.PendingIntent;
import android.appwidget.AppWidgetManager;
import android.appwidget.AppWidgetProvider;
import android.content.ComponentName;
import android.content.Context;
import android.content.Intent;
import android.util.Log;
import android.widget.RemoteViews;

import com.sigrlami.rixvpn.R;

public class VpnWidgetProvider extends AppWidgetProvider {

private boolean currentStatus = false;
// log tag
private static final String LOG = "com.sigrlami.rixvpn.widget.VpnWidgetProvider";

//public static final String CLICK = "com.sigrlami.rixvpn.CLICK";

@Override
public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {

    // Get all ids
    ComponentName thisWidget = new ComponentName(context, VpnWidgetProvider.class);
    int[] allWidgetIds = appWidgetManager.getAppWidgetIds(thisWidget);

    for (int widgetId : allWidgetIds) {

        // Create some random data
        int number = (new Random().nextInt(100));

        RemoteViews remoteViews = new RemoteViews(context.getPackageName(), R.layout.vpn_widget);
        Log.w("WidgetExample", String.valueOf(number));

        // Set the text
        remoteViews.setTextViewText(R.id.layout_vpn_widget_tv_Check, String.valueOf(number));

        // Register an onClickListener
        Intent intent = new Intent(context, VpnWidgetProvider.class);

        intent.setAction(appWidgetManager.ACTION_APPWIDGET_UPDATE);

        PendingIntent pendingIntent = PendingIntent.getBroadcast(context, 0, intent, 0);

        remoteViews.setOnClickPendingIntent(R.id.layout_vpn_widget_iv_Check, pendingIntent);

        if (currentStatus = false) {
            remoteViews.setImageViewResource(R.id.layout_vpn_widget_iv_Check, R.drawable.on);

        } else {
            remoteViews.setImageViewResource(R.id.layout_vpn_widget_iv_Check, R.drawable.off);
        }

        appWidgetManager.updateAppWidget(widgetId, remoteViews);
    }

}

@Override
public void onReceive(Context context, Intent intent) {

    final String action = intent.getAction();
    if (AppWidgetManager.ACTION_APPWIDGET_UPDATE.equals(action)) {
        if (currentStatus == false) {

            currentStatus = true;

        } else {
            currentStatus = false;
        }

    }
    super.onReceive(context, intent);
} 
```

}

Looking to this part through debugger shows nothing strange, but when I change to getActivity() it shows that I'm trying to start a activity that does not exist. I see that something is going on, but this is useless to me.

```
// Register an onClickListener
Intent intent = new Intent(context, VpnWidgetProvider.class);

intent.setAction(appWidgetManager.ACTION_APPWIDGET_UPDATE);

PendingIntent pendingIntent = PendingIntent.getBroadcast(context, 0, intent, 0);

remoteViews.setOnClickPendingIntent(R.id.layout_vpn_widget_iv_Check, pendingIntent); 
```

But it works 1 time when app deployed to device. Any suggestions what I have done wrong?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T18:30:36.457

For handling click in AppWidgetProvider you need to use custom broadcast reciver as:

```
<receiver android:name="VpnWidgetProvider"
            android:label="@string/widget_title" android:exported="false" android:icon="@drawable/volume">
            <intent-filter>
                <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
                <action android:name="com.xxxx.xxxx.VpnWidgetProvider.ACTION_WIDGET_REFRESH"/>
                <action android:name="android.appwidget.action.APPWIDGET_DELETED"/>
                <action android:name="android.media.RINGER_MODE_CHANGED"/>
            </intent-filter>
            <meta-data android:name="android.appwidget.provider"
                android:resource="@xml/widget_info" /> 
```

and in AppWidgetProvider class:

```
public class VpnWidgetProvider extends AppWidgetProvider {
public static String ACTION_WIDGET_REFRESH = "ActionReceiverRefresh";
//your code here...
@Override
public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {
//you code here...

Intent intent = new Intent(context, VpnWidgetProvider.class);
intent.setAction(appWidgetManager.ACTION_WIDGET_REFRESH);//get action here
//you code here... 
```

see this full working example for handling onclick on home Screen AppWidget:

[Silenttoggle Home Screen Widget](https://sites.google.com/site/imrankhanandroid/Silenttoggle.rar?attredirects=0&d=1)

# django - 在 Django Admin 中添加指向另一个模型的超链接

> ID：11250575
> 
> 赞同：2
> 
> 时间：2012-06-28T18:15:31.680
> 
> 标签：django, django-admin

我有一些听起来微不足道的东西，但我找不到在 django admin 中实现的方法。

我有一个模型，我在我的管理员中显示。我正在使用 TabularInline 来显示另一个模型，它指的是第一个模型。

*我想要的只是一个链接来单击我当前的视图，所以我将只*进入 TabularInline 视图。

我需要它的原因很简单。我的第二个模型管理员注册还包含另一个 TabularInline 到第三个模型。所以我看不到第一个模型的内联。

模型非常简单。我正在对几个 cretirias 实施投票系统。所以我希望我的项目模型管理员向所有用户显示投票和最终得分。但是投票模型分解了用户投票的条件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T18:26:54.710

该答案对此进行了详细讨论：

[Django InlineModelAdmin：部分显示内联模型并链接到完整模型](https://stackoverflow.com/questions/2120813/django-inlinemodeladmin-show-partially-an-inline-model-and-link-to-the-complete)

但这就是我使用的：

[https://gist.github.com/3013072](https://gist.github.com/3013072)

# linux - twm 和 startx 的区别

> ID：11250577
> 
> 赞同：0
> 
> 时间：2012-06-28T18:15:44.583
> 
> 标签：linux

twm 启动 X 桌面的 Tab 窗口管理器。而 startx 启动 X 桌面。

那么这两个linux命令之间有区别吗？

`twm`和`startx`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T18:35:27.760

您可能将不同的窗口管理器设置为以`X`. `startx`将运行它，而`twm`将始终启动，嗯，`twm`.

# python - os.path python模块在heroku中不起作用

> ID：11250580
> 
> 赞同：0
> 
> 时间：2012-06-28T18:15:53.720
> 
> 标签：python, django, heroku, django-templates

我正在 heroku 上构建一个 django 应用程序，并且在`os.path`模块方面遇到了很多麻烦。我的项目在本地主机上完美运行时无法`templates`在 heroku 上找到它。

这是我的项目层次结构（简而言之）：

```
project/
        project/
               settings.py
               urls.py
               views.py
               ..
        manage.py
        templates/
                 css/
                 media/
                 Templates/
                          home.html 
```

所以，我曾经`os.path`在settings.py中添加模板目录。

```
currDir = os.path.dirname(__file__)
templateDir = os.path.join(os.path.join(os.path.split(currDir)[0], "templates"), "templates")
TEMPLATE_DIRS = (
    templateDir,

) 
```

这在我的本地主机上运行良好，但在 Heroku 上运行不正常。

以下是在heroku上提到的（在heroku上运行）

> **Django 尝试按以下顺序加载这些模板：**
> 
> *使用加载器 django.template.loaders.filesystem.Loader：*
> 
> ```
> /app/templates/templates/home.html (File does not exist) 
> ```
> 
> *使用加载器 django.template.loaders.app_directories.Loader:*
> 
> ```
> /app/.heroku/venv/lib/python2.7/site-packages/django/contrib/auth/templates/home.html(File does not exist) 
> ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T16:33:27.683

从技术上讲，os.path 将指向“项目/项目”，因为这是 settings.py 所在的位置。尝试将您的“模板”目录移动到那里。它对我有用！

只需确保将 templateDir 更改为以下内容：

```
 templateDir = os.path.dirname(__file__) 
    TEMPLATE_DIRS = (
    os.path.join(templateDir, "templates"), 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T20:32:30.923

在类似的 Heroku/MEDIA_ROOT 问题上，以下内容对我有用。

```
TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',
)

BASE_PATH = os.path.dirname(__file__)
TEMPLATE_DIRS = (
    os.path.join(BASE_PATH, "project/templates/templates"), 
) 
```

但是，如果您坚持使用 Django 的默认目录结构，则根本不必设置 TEMPLATE_DIRS。即，`home.html`应该在`project/project/templates`. 通常 css/javascript[位于该目录之外](https://docs.djangoproject.com/en/dev/howto/static-files/)。我可以验证这适用于 Heroku。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T03:26:53.587

Windows 和 *inx 系统之间的小区别之一是文件命名。 `Windows, winDows, windows, windowS`表示windows下的同一个文件，Linux下不行。

这是我在使用 Heroku 时遇到的问题（可能是在 *inx 上）。所以，我不得不在 TEMPLATE_DIRS 中使用准确的文件夹名称。

这是正确的。

```
templateDir = os.path.join(os.path.join(os.path.split(currDir)[0], "templates"), "Templates") 
```

上一个是：

```
templateDir = os.path.join(os.path.join(os.path.split(currDir)[0], "templates"), "templates") 
```

# asp.net - 查看我的网站的人可以看到 ASP.Net 中的代码隐藏吗？

> ID：11250582
> 
> 赞同：2
> 
> 时间：2012-06-28T18:15:56.203
> 
> 标签：asp.net

任何查看者都可以看到哪些文件（而不是拥有我的控制面板密码的人）？

他可以下载由 .cs 文件制作的 dll 吗？

那么 web.config 呢，他能看到吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T18:17:42.747

Web.config 和 bin 目录通常不会被查看，除非您自己打开它们。此外，无法再次看到 *.cs 或 *.vb 等代码文件，除非您允许它们被看到。默认情况下，任何请求 .aspx 页面的客户端都会看到呈现的版本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T18:18:11.193

不...查看您网站的用户无权访问您的后端代码。

他们只能访问您实际输出到浏览器的内容（IE.HTML 文件、Javascript、CSS 等）

# visual-studio-2010 - 在 Visual Studio 2010 文件夹差异窗口中，当我右键单击文件时，“协调”菜单被禁用

> ID：11250584
> 
> 赞同：0
> 
> 时间：2012-06-28T18:16:06.073
> 
> 标签：visual-studio-2010, tfs, directory, file-comparison, filecompare

我正在尝试比较 2 个本地文件夹。在源代码管理资源管理器中，我右键单击文件夹，单击“比较”菜单并选择目标文件夹。显示文件夹差异文件夹。我右键单击发现差异的文件，但“协调”菜单被禁用。我对源文件夹和目标文件夹都有“读取”和“签出”权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T21:20:38.790

Reconcile 不适用于两个本地路径。相反，它用于使用服务器上的更改更新本地所做的更改。它将允许您根据本地映射路径的内容挂起服务器更改。这是协调对话框：

![在此处输入图像描述](../Images/6f8704c03611f040656a499164dc48ca.png)

因此，您可以在“比较”窗口中将本地树（或其中的一部分）与服务器同步，这使您可以细粒度地控制要下载的文件或要挂起更改的文件。如果您只想获取服务器上已更新的某些文件的最新信息，这将非常有用。

# ios - iOS深度缓冲区写入可能吗？

> ID：11250586
> 
> 赞同：1
> 
> 时间：2012-06-28T18:16:07.510
> 
> 标签：ios, opengl-es-2.0

我有一个复杂的预渲染场景，我想在使用静态相机的 3D iPad 游戏中将其用作背景。

对于每帧重绘，屏幕将被擦除到此背景。我不知道该怎么做的部分是将深度缓冲区设置为存储在此预渲染图像中的深度缓冲区，以便动态 3D 对象将尊重所述图像中的深度信息。

有什么方法可以在 iPad 上使用 opengl es 2.0 实现这一点？

我研究了几种方法，但到目前为止找不到任何合适的方法。

# java - 视图是否应该负责在 MVC 中停止和开始监听模型？

> ID：11250589
> 
> 赞同：4
> 
> 时间：2012-06-28T18:16:14.707
> 
> 标签：java, model-view-controller

我在我的项目中使用 MVC 模式。`btnAdd`创建新客户并添加`MyJPanel1`为侦听器。当客户更改其状态时，它会触发事件并被`customerChanged`调用。当 `MyJPanel1`'s`customerChanged`被调用时，它会执行一些操作并且

1.  它必须停止倾听该客户
2.  其他视图必须开始听取该客户的意见

其他一些视图将具有相同的行为。`MyJPanel1`我在's`customerChanged`方法本身中实现的那两个要求。

**已更新**

我的问题和问题是：

1.  从 MVC 的角度来看这是正确的，还是我应该有一些其他实体（控制器？）应该以某种方式处理它？
2.  当客户触发`fireEvent`方法时，它会从侦听器`c.removeListener(this);`中`MyJPanel1`删除自己，并因此导致`fireEvent' because`侦听`in`器 for` 循环中的错误被更改。

我会很感激一些帮助。

```
class Customer {
    // ...

    private void fireEvent(CustomerEvent event) {
        for (IListener listener : listeners) {
            listener.customerChanged(event);
        }
    }
}

class MyJPanel1 extends JPanel implements IListener {
    MyJPanel2 otherPanel;

    MyJPanel1(MyJPanel2 panel) {
        this.otherPanel = panel;
        createGui();
    }

    private void createGui() {
        JButton btnAdd = new JButton("Add");
        btnAdd.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent arg0) {
                Customer c = new Customer();
                c.addListener(this);
            }
        });
        // ...
    }

    @Override
    public void customerChanged(CustomerEvent event) {
        if (event instanceof AddedCustomerEvent) {
            Customer c = event.getCustomer();
            // do something
            c.removeListener(this);
            c.addListener(otherPanel);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T20:19:11.557

视图只显示数据；他们自己从来没有任何功能。

更改事物（例如添加/删除侦听器）是控制器的目的。它将模型连接到视图并确保一切正常。使视图尽可能地愚蠢。

关于你的第二个问题：正如你所注意到的，你不能有自杀的听众。有几种解决方案：

1.  从听者那里返回一个布尔值，说“我完成了，移除我”。然后循环将是：

    ```
    for (Iterator<IListener> iter = listeners.iterator(); iter.hasNext(); ) {
        if (!listener.customerChanged(event)) {
            iter.remove();
        }
    } 
    ```

2.  创建一个永远不会被移除的新监听器。而是让此侦听器将事件转发到感兴趣的视图。这意味着它将发送事件，`MyJPanel1`直到该视图完成为止。从现在开始，该事件将转到其他视图。

    一个好的解决方案是让新的监听器监听两个事件： The`CustomerEvent`和由`IAmDoneEvent`发布`MyJPanel1`。

    它有两个听众列表。直到`IAmDoneEvent`收到，都`CustomerEvent`转到第一个列表。此事件结束后，全部`CustomerEvent`进入第二个列表。添加`MyJPanel1`到第一个列表，将所有其他视图添加到第二个列表。

    使用您的控制器来构建此侦听器网络。

# postgresql - cron 作业从 debian 上的 postgres 中删除旧数据

> ID：11250590
> 
> 赞同：1
> 
> 时间：2012-06-28T18:16:14.900
> 
> 标签：postgresql, debian, crontab

我需要创建一个每天晚上运行的 cron 并从我的数据库中删除一些数据（较旧的数据）。我在 debian 上运行 postgres。我怎么做？我的服务器是tomcat6。有没有人有一步一步的指导，包括脚本来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T18:57:46.007

在大多数情况下，我更喜欢带有 here-document 的 shell 脚本。（shell 变量在这里文档中很好地扩展）：

```
#!/bin/sh
PSQL=/local/postgres/bin/psql
SOME_VALUE=123

$PSQL my_database <<THE_END
DELETE FROM my_table
WHERE my_column <= $SOME_VALUE
    ;
THE_END 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T18:35:05.207

几个好办法。
您可能想做的不仅仅是一个`DELETE`。跑`ANALYZE tbl`？处理多个表？
我会将工作包装在 aa plpgsql 函数中：

```
CREATE OR REPLACE FUNCTION myschema.f_maintain()
  RETURNS text AS
$BODY$
DECLARE
    _msg    text := 'Report';
    _min_ts timestamp := now()::timestamp - interval '5y'; -- max. age 5 years
    _count  int;
BEGIN

DELETE FROM tbl
WHERE  my_ts < _min_ts
AND    <some condition>;

GET DIAGNOSTICS _count = ROW_COUNT;

IF _count > 0 THEN
    _msg := _msg || E'\nDeleted rows in tbl: ' || _count;
END IF;

ANALYZE tbl;

-- more ?

RAISE LOG '%', _msg;

END;
$BODY$
  LANGUAGE plpgsql; 
```

...并像这样从外壳调用它：

```
psql -p 5432 event -c 'SELECT myschema.f_maintain()' 
```

为系统用户 postgres 安排一个 cron 作业：

```
crontab -e 
```

要在每天 02:06 运行它，请添加如下行：

```
06 02 * * * psql -p 5432 event -c 'SELECT myschema.f_maintain()' >/dev/null 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T18:34:54.000

您可以直接在 /etc/crontab 中直接调用 psql。调用将遵循以下模式：

```
psql -c 'DELETE FROM my_table WHERE ...' 
```

您需要为“psql”提供适当的附加参数来创建数据库连接。有关详细信息，请参阅[psql 的文档。](http://www.postgresql.org/docs/current/static/app-psql.html)

# jquery - jquery 打开窗口，但仅当窗口尚未打开时；然后在其他窗口前显示它？

> ID：11250591
> 
> 赞同：0
> 
> 时间：2012-06-28T18:16:16.173
> 
> 标签：jquery, popup

是否可以在单击 div 时打开一个窗口，但前提是该窗口之前没有打开过？不是模态的，而只是具有一定大小的常规窗口，例如 300x300。

我有这个 Jsfiddle 但还没有完全工作。这个想法是有 1 个弹出窗口，如果它已经打开，只需将其推到前面。

[http://jsfiddle.net/BC9Rd/](http://jsfiddle.net/BC9Rd/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T18:25:01.657

你可以使用这样的东西：

```
$("#element_id").click(function(){
  window.open ("http://your-domain.com/your-url.html","my_window","menubar=1,resizable=1,width=350,height=250");
}); 
```

基本上每次执行此 window.open 命令时，都会使用相同的窗口，因为窗口名称相同（在本例中为“my_window”）...

我希望这有帮助 ：）

# django - 选择集混淆（Django 教程）

> ID：11250596
> 
> 赞同：1
> 
> 时间：2012-06-28T18:16:30.827
> 
> 标签：django

我已经到了[Django 教程](https://docs.djangoproject.com/en/1.4/intro/tutorial01/)第一页的末尾。我尝试了一个快速实验，但由于它没有奏效，我很困惑。按照教程，我有一个变量`p`：

```
p = Poll.objects.get(pk=1) 
```

`p.choice_set.create(choice='Not much', votes=0)`我没有按照教程的说明创建投票，而是尝试了：

```
x = Choice(choice='Not much', votes=0, poll=p) 
```

完成此操作后，我会认为`p.choice_set.all()`返回的不仅仅是一个空列表。但它*确实*返回一个空列表。

（但是，如果我尝试，`x.poll`那么我`<Poll: What's up?>`会得到预期的结果，所以这种关系似乎只是一种方式。）

我敢肯定这不起作用是有充分理由的，即使它看起来应该起作用！（请记住我没有数据库经验）

欢迎任何想法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T15:21:03.000

`x = Choice(choice='Not much', votes=0, poll=p)`创建`Choice`模型的实例，但尚未保存到数据库中。`p.choice_set.all()`在数据库中查询与给定投票相关的选项。由于`x`未保存到数据库中，因此将找不到。

# visual-studio-2010 - 创建本地化的 WIX 3.6 引导程序。

> ID：11250597
> 
> 赞同：15
> 
> 时间：2012-06-28T18:16:32.317
> 
> 标签：visual-studio-2010, localization, wix, wix3.6, burn

一年多前，我在 Visual Studio 2010 中创建了一个 WIX 项目。它会创建一个 MSI 文件和一个引导程序 setup.exe。实际上，它为两种语言（英语和法语）创建了这对文件。我刚刚将此项目集成到我们的 TFS CI 构建中。我无法让 CI 构建生成引导程序 setup.exe 文件。

我们最近将所有构建服务器上的 Wix 升级到了 Wix 3.6 RC。所以，我想我会尝试一下 Burn，而不是使用旧风格的引导程序。我在我的解决方案中添加了一个新的 Bootstrapper 项目。引导程序项目包括一个简单的 bundle.wxs，它只加载我的旧 MSI 项目生成的 MSI。但是，当我尝试构建时，出现以下错误：

> 错误 LGHT0103：系统找不到文件 'C:\Tf\Advantage\Dev\Solution\Configuration\LaunchPad.Wix\bin\Release\fr-fr\LaunchPad.msi;C:\Tf\Advantage\Dev\Solution\配置\LaunchPad.Wix\bin\Release\en-us\LaunchPad.msi'。

我在捆绑包中的包参考如下所示：

```
<MsiPackage Id="MyApplication" SourceFile="$(var.LaunchPad.Wix.TargetPath)" /> 
```

LaunchPad.Wix 是 Wix MSI 项目的名称。如果我将 LaunchPad.Wix 项目更改为仅构建一种语言，那么它可以正常工作。在我看来，引导程序项目类型只是不支持为多种语言构建设置文件。这是真的？任何解决方法的建议？

**编辑**

经过进一步调查，我想知道引导程序项目是否甚至支持本地化。我尝试将我的 Wix MSI 项目设置为仅创建 fr-fr。我的引导程序项目用英语创建的 setup.exe。当我编辑引导程序项目的项目属性时，“要构建的文化”字段被锁定并留空。我将如何构建一个非英语引导程序？这可能吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-09T20:04:49.597

这里有几件事：

1.  如果您使用多个区域性，则不能在 MSBuild 之外需要单个文件名的内容中使用 TargetPath。如您所见，TargetPath 是已构建的本地化文件的列表。但是，如果您限定 .msi 包的输出语言，则可以使用 TargetPath：`<MsiPackage SourceFile="$(var.TestMsi.en-US.TargetPath)" Id="MsiEnUs" />`

2.  如果您想创建一个可以安装 en-US 和 fr-FR 中的一个/两个的引导程序，则需要在其自己的 MsiPackage 元素中分别列出每个 .msi 包。

3.  如果要创建两个引导程序，一个 en-US 和一个 fr-FR，则需要调用引导程序 .wixproj 两次，每种语言一次。引导程序不支持文化“技巧”——从一次 MSBuild 调用产生两个输出是有问题的（见证 TargetPath 问题）。

如果您使用的是 WixStandardBootstrapperApplication，它会自动尝试根据用户 UI 语言对 UI 进行本地化，然后回退到系统 UI 语言，最后回退到英语。它在以 LCID 命名的目录中查找本地化字符串，因此您将拥有如下有效负载：

```
<Payload Name="1033\thm.wxl" SourceFile="..." />
<Payload Name="1036\thm.wxl" SourceFile="..." /> 
```

不幸的是，WixStandardBootstrapperApplication 字符串目前仅适用于 en-US。这就是为什么 fr-FR 引导程序以英文显示 UI。您需要本地化 WiX 源文件 HyperlinkTheme.wxl 或 RtfTheme.wxl（取决于您使用的主题）。这两个文件都在 src\ext\BalExtension\wixstdba\Resources 中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-11T15:27:11.990

好的。正如鲍勃·阿恩森所说的那样。

但必须注意payload的名称和SourceFile。

```
<BootstrapperApplicationRef Id="WixStandardBootstrapperApplication.RtfLicense">
      <Payload Name="2052\thm.wxl" SourceFile="2052\thm.wxl" />
</BootstrapperApplicationRef> 
```

如果您将名称更改为另一个名称。引导程序不会被本地化。

# objective-c - AVFoundation 视频捕获不会保存

> ID：11250599
> 
> 赞同：1
> 
> 时间：2012-06-28T18:16:34.513
> 
> 标签：objective-c, ios, avfoundation

我正在使用 AVFoundation 来捕获视频。在我到达这里之前，我的应用程序似乎一切都很好：

```
- (void)captureOutput:(AVCaptureFileOutput *)captureOutput
didFinishRecordingToOutputFileAtURL:(NSURL *)outputFileURL
  fromConnections:(NSArray *)connections
            error:(NSError *)error
{

NSLog(@"didFinishRecordingToOutputFileAtURL - enter");

BOOL RecordedSuccessfully = YES;
if ([error code] != noErr)
{
    // A problem occurred: Find out if the recording was successful.
    id value = [[error userInfo] objectForKey:AVErrorRecordingSuccessfullyFinishedKey];
    if (value)
    {
        RecordedSuccessfully = [value boolValue];
    }
}
if (RecordedSuccessfully)
{
    //----- RECORDED SUCESSFULLY -----
    NSLog(@"didFinishRecordingToOutputFileAtURL - success");
    ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];
    if ([library videoAtPathIsCompatibleWithSavedPhotosAlbum:outputFileURL])
    {
        [library writeVideoAtPathToSavedPhotosAlbum:outputFileURL
                                    completionBlock:^(NSURL *assetURL, NSError *error)
         {
             if (error)
             {

             }
         }];
    }

    [library release];      

} 
```

}

在设备上运行它时，我收到“didFinishRecordingToOutputFileAtURL - 成功”消息，然后它崩溃并出现此错误：

视频 /private/var/mobile/Applications/EDC62CED-3710-45B2-A658-A2FE9238F517/tmp/output.mov 无法保存到已保存的相册：错误域=NSOSStatusErrorDomain Code=-12950“无法播放电影。” UserInfo=0xe6749b0 {NSLocalizedDescription=电影无法播放。}

我无法在任何地方找到有关此的大量信息，并且不确定发生了什么。

这是带有临时输出 URL 的代码：

```
NSString *outputPath = [[NSString alloc] initWithFormat:@"%@%@", NSTemporaryDirectory(), @"output.mov"];
NSURL *outputURL = [[NSURL alloc] initFileURLWithPath:outputPath];
NSFileManager *fileManager = [NSFileManager defaultManager];
if ([fileManager fileExistsAtPath:outputPath])
{
    NSError *error;
    if ([fileManager removeItemAtPath:outputPath error:&error] == NO)
    {
        //Error - handle if requried
    }
}
[outputPath release];
//Start recording
[movieFileOutput startRecordingToOutputFileURL:outputURL recordingDelegate:self];

[outputURL release]; 
```

我已经尝试在保存后将 outputURL 发布到其他地方，但这并没有帮助，所以我认为不是这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T21:48:53.557

我想通了。我是个白痴，一直忽略我实际上没有将视频输入连接到捕获会话的事实。哎呀。

# php - 正则表达式 MongoDB PHP 查询

> ID：11250600
> 
> 赞同：4
> 
> 时间：2012-06-28T18:16:35.447
> 
> 标签：php, mongodb

我希望在 MongoDB 查找查询上执行 REGEX，该查询仅在字符串中找到带有图像的任何内容，它的搜索是文件类型标头，因此它通常看起来像 image/png 或 text/html。

我正在为正则表达式运行此代码：

```
array('fileType'=>array('$regex'=>'^image')) 
```

和这段代码一起：

```
foreach ($this->grid->find(array('fileType'=>array('$regex'=>'^image'))) as $file) {
                        $id = (string) $file->file['_id'];
                        $filename = htmlspecialchars($file->file["filename"]);
                        $filetype = isset($file->file["filetype"]) ? $file->file["filetype"] : 'application/octet-stream';

                        if($filetype == 'image/'.$chosenfile.''){
                            $links[] = sprintf('<img src="lib/download.php?id=%s" height="200px" width="200px">', $id);
                        }elseif($chosenfile == ''){
                             $links[] = sprintf('<img src="lib/download.php?id=%s" height="200px" width="200px">', $id);
                        }
                    } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-28T21:43:24.223

这是你的问题：

```
array('$regex'=>'^image') 
```

它应该使用 MongoRegex 对象：

```
array('fileType' => new MongoRegex('/^image/i')) 
```

文档在这里定义：[http ://www.php.net/manual/en/class.mongoregex.php](http://www.php.net/manual/en/class.mongoregex.php)

它现在有效吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-18T08:42:46.660

使用php检查下面的mongodb实例查询它的工作原理..

```
$pipeline = array(
                array('$match' => array(
                                    '$and' => array(array('data_UTC' => array('$gte' => new MongoDate(strtotime('2017-01-20T00:00:00-02:00')),
                                                                                '$lt' => new MongoDate(strtotime('2017-01-29T00:00:00-02:00'))
                                                                        ),
                                                            'carga' => array('regex' => new MongoRegex('/^soja/i'))
                                                        )
                                                )
                                )
                ),
                array('$group' => array('_id' => array('$dataToString' => array('format' => '%Y-%m-%d', 'date' => array('$subtract' => array('$data_UTC', 1000 * 60 * 60 * 2)))), 'qtd_acessos' => array('$sum' => 1 ))),
                array('$sort' => array('_id' => -1)),
                array('$limit' => 50)
            );
$results = $this->mongodb->aggregate($pipeline); 
```

# .net - 为什么我的变量在操作方法中对调试器不可见？

> ID：11250605
> 
> 赞同：0
> 
> 时间：2012-06-28T18:16:48.783
> 
> 标签：.net, visual-studio, visual-studio-2012

我有最奇怪的问题。为了快速测试实例化我的角色提供者，我运行以下修改后的操作方法：

```
public ActionResult Login()
{
    Educ8RoleProvider p = new Educ8RoleProvider();
    var model = new LoginModel();
    return View(model);
} 
```

角色提供者或多或少看起来像这样：

```
public class Educ8RoleProvider : RoleProvider, IDisposable
{
    private readonly IMemberRoleRepository _memberRoleRepository = new MemberRoleRepository();

    public Educ8RoleProvider()
    {
    }
} 
```

中的代码`Login`执行没有任何异常，但是当我在 line 上放置一个断点时`var model = new LoginModel();`，变量`p`已经消失了。`p`尝试在即时窗口中检查它时，尝试放置快速手表时遇到相同的错误：

```
The name 'p' does not exist in the current context 
```

今天早上我从 VS11 Beta 顶级 VS2012 RC 升级。我不知道这是否可能是由于某处的新设置或其他原因。

**补充：**我发现我不知何故偏离了我的调试配置到一个基于版本的配置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T18:19:29.770

我的猜测是它已经被优化掉了——毕竟，你没有*将*它用于任何事情。

我希望它在调试版本上没问题，但在优化版本上已经不行了。（当然，仍应调用构造函数。）

如果你不打算使用它，我怀疑你是否应该拥有它，请注意 - 这*至少*是一种代码味道。

如果这真的是为了“实例化 [你的] 角色提供者的快速测试”，我可以推荐单元测试吗？:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T18:20:40.233

奇怪的。唯一想到的是，也许 VS2012 上次引用变量时会将变量从范围中剔除。您是否尝试过插入一条线以访问 p 并查看它是否可以让您观看它？

# hibernate - Uninteded method invcation while logging out of service

> ID：11250607
> 
> 赞同：1
> 
> 时间：2012-06-28T18:17:00.540
> 
> 标签：hibernate, jsf, jboss

I have a little problem: when logging out of my cms, SOMEHOW the setter of one of my parameters is called and action performed. It results in http500.

To be specific: I pass the parameter from jsf page to backing (@RequestScoped) bean using:

```
<f:metadata>
<f:viewParam name="activate" value="#{myManagedBean.activate}" /> 
```

it uses setter, which makes changes in database:

```
public void setActivate(int num) {
    ab.changeActiveState("myString", num);
    return;
} 
```

logout method is used on completely different bean, and calls simple method:

```
public String logout() {
    Object request = FacesContext.getCurrentInstance().getExternalContext().getRequest();
    HttpServletRequest a = (HttpServletRequest) request;                
    try {
        a.logout();
    } catch(Exception e) {
        logger.info("Error while logout: " + e);
    }
    return "advert-list.xhtml?faces-redirect=true";
} 
```

Logging out throws errors:

```
javax.servlet.ServletException: javax.el.ELException: /secure/my-list.xhtml @12,81 value="#{myManagedBean.activate}": javax.ejb.EJBException: javax.persistence.NoResultException: No entity found for query
javax.faces.webapp.FacesServlet.service(FacesServlet.java:321)  org.apache.myfaces.webapp.filter.ExtensionsFilter.doFilter(ExtensionsFilter.java:349) 
root cause
javax.faces.component.UpdateModelException: javax.el.ELException: /secure/advert-list.xhtml @12,81 value="#{myManagedBean.activate}": javax.ejb.EJBException:
javax.persistence.NoResultException: No entity found for query
javax.faces.component.UIInput.updateModel(UIInput.java:848)
javax.faces.component.UIViewParameter.updateModel(UIViewParameter.java:284)
javax.faces.component.UIInput.processUpdates(UIInput.java:730)
javax.faces.component.UIComponentBase.processUpdates(UIComponentBase.java:1109)
javax.faces.component.UIComponentBase.processUpdates(UIComponentBase.java:1109)
javax.faces.component.UIViewRoot.processUpdates(UIViewRoot.java:1218)   com.sun.faces.lifecycle.UpdateModelValuesPhase.execute(UpdateModelValuesPhase.java:74)
com.sun.faces.lifecycle.Phase.doPhase(Phase.java:97)
com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:114)
javax.faces.webapp.FacesServlet.service(FacesServlet.java:308)  org.apache.myfaces.webapp.filter.ExtensionsFilter.doFilter(ExtensionsFilter.java:349) 
```

I have no idea what is going on and why. About that setter - it works as it should. And about logging out - from any other page in my project it doesn't throw anything and logs out current user.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T18:54:15.850

Like as with [getter](https://stackoverflow.com/questions/2090033/why-jsf-calls-getters-multiple-times/2090062#2090062) methods, you shouldn't be doing business logic in setter methods at all.

If you intend to perform actions on an initial request after the `<f:viewParam>` has done its job, then you should be using a `<f:event type="preRenderView">` listener method.

```
<f:metadata>
    <f:viewParam name="activate" value="#{myManagedBean.activate}" />
    <f:event type="preRenderView" listener="#{myManagedBean.init}" />
</f:metadata> 
```

with

```
private int num;

public void init() {
    if (!FacesContext.getCurrentInstance().isPostback()) {
        ab.changeActiveState("myString", num);
    }
}

public void setActivate(int num) {
    this.num = num;
} 
```

Note that this is in the upcoming JSF 2.2 to be replaced by `<f:viewAction onPostback="false">`.

### See also:

*   [What can <f:metadata>, <f:viewParam> and <f:viewAction> be used for?](https://stackoverflow.com/questions/6377798/what-can-fmetadata-and-fviewparam-be-used-for)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T19:26:24.533

Maybe not the best, but working way to deal with this problem, is to add the if-statement in setter:

```
if (!FacesContext.getCurrentInstance().isPostback()) {
    ab.changeActiveState("myString", num);
} 
```

If You know any other, more politically-correct way to do it, please, let me know.

By the way - I was trying to pass the parameter in some other way, but none of them works. read something on Mykong page ([1](http://www.mkyong.com/jsf2/4-ways-to-pass-parameter-from-jsf-page-to-backing-bean/)) and in comments I found that some of those ways don't work with request scoped beans...

[Mykong Page](http://www.mkyong.com/jsf2/4-ways-to-pass-parameter-from-jsf-page-to-backing-bean/)

# python - 如何找出一个 lambda 函数需要多少个参数

> ID：11250610
> 
> 赞同：5
> 
> 时间：2012-06-28T18:17:10.433
> 
> 标签：python, numpy, scipy, least-squares

我正在尝试创建一个函数，该函数将根据传入的 lambda 函数进行最小二乘拟合。我想创建一个长度为零的数组，该数组的长度等于 lambda 函数为初始猜测 lambda 函数所采用的参数数量。所以如果它是线性的，我想要[0,0]，而对于二次我想要[0,0,0]。

```
#polynomial functions
linear = lambda p, x: p[0] * x + p[1]
quadratic = lambda p, x: p[0] * x**2 + p[1] * x + p[2]
cubic = lambda p, x: p[0] * x**3 + p[1] * x**2 + p[2] * x + p[3]

#polynomial functions forced through 0
linear_zero = lambda p, x: p[0] * x 
quadratic_zero = lambda p, x: p[0] * x**2 + p[1] * x 
cubic_zero = lambda p, x: p[0] * x**3 + p[1] * x**2 + p[2] * x

def linFit(x, y,fitfunc):
    errfunc = lambda p, x, y: fitfunc(p, x) - y 
```

在这里，我想创建一个零数组。但此时 p 尚未定义。所以 len(p) 不起作用。

```
 init_p = np.array(zeros(len(p)))  #bundle initial values in initial parameters

    p1, success = optimize.leastsq(errfunc, init_p.copy(), args = (x, y))
    return p1 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T18:20:56.587

在 python >= 2.7 下：

```
>>> l = lambda a, b: None
>>> l.func_code.co_argcount
2 
```

或低于 2.6：

```
>>> l.__code__.co_argcount
2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T18:20:26.360

通过查看它的代码对象`__code__`：

```
>>> p=lambda x,y:x+y
>>> len(p.__code__.co_varnames)
2
>>> p.__code__.co_varnames
('x', 'y') 
```

# java - 关于在java中捕获异常

> ID：11250615
> 
> 赞同：0
> 
> 时间：2012-06-28T18:17:37.083
> 
> 标签：java, exception-handling

我开发了一个 java 代码，它从用户选择的文件夹中读取 java 文件。它显示每个文件中有多少行代码，它只读取 .java 文件，最终结果显示在控制台上，但我在想一种情况，假设我有一个文件夹，其中根本没有文件或有在这种情况下没有 .java 文件的文件夹我想通过捕获异常来显示自定义消息并显示文件夹内没有 .java 文件的消息，请告知如何实现..下面是我的作品代码..

```
public static void main(String[] args) throws FileNotFoundException {

        JFileChooser chooser = new JFileChooser();
        chooser.setCurrentDirectory(new java.io.File("C:" + File.separator));
        chooser.setDialogTitle("FILES ALONG WITH LINE NUMBERS");
        chooser.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);
        chooser.setAcceptAllFileFilterUsed(false);
                if (chooser.showOpenDialog(null) == JFileChooser.APPROVE_OPTION)
        {      Map<String, Integer> result = new HashMap<String, Integer>();
             File directory = new File(chooser.getSelectedFile().getAbsolutePath()); 
             int totalLineCount = 0;
             File[] files = directory.listFiles(new FilenameFilter(){
                  @Override
                  public boolean accept(File directory, String name) {
                      if(name.endsWith(".java"))
                      return true;
                    else
                      return false;              
                  }
                }
   );
              for (File file : files)
            {
                if (file.isFile())
                {    Scanner scanner = new Scanner(new FileReader(file));
                    int lineCount = 0;
                     try
                    { for (lineCount = 0; scanner.nextLine() != null; lineCount++) ;
                          } catch (NoSuchElementException e)
                    {   result.put(file.getName(), lineCount);
                    totalLineCount += lineCount;  
                                    }

                } }
              System.out.println("*****************************************");
              System.out.println("FILE NAME FOLLOWED BY LOC");
              System.out.println("*****************************************");

            for (Map.Entry<String, Integer> entry : result.entrySet())
            {   System.out.println(entry.getKey() + " ==> " + entry.getValue());
            }
            System.out.println("*****************************************");
            System.out.println("SUM OF FILES SCANNED ==>"+"\t"+result.size()); 
            System.out.println("SUM OF ALL THE LINES ==>"+"\t"+ totalLineCount);

             }     

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T18:22:54.207

您不需要使用异常，数组文件中有文件，您只需要一个检查其大小的条件语句。

```
if(files.length == 0) {
    //Do whatever you like to inform the user there are no java files in the directory.
} 
```

# php - 文件上传错误

> ID：11250622
> 
> 赞同：0
> 
> 时间：2012-06-28T18:17:59.980
> 
> 标签：php, file-upload

我正在尝试在 php 中上传视频文件。但 .avi,mpg,mp4 工作正常，其余部分未上传。

```
<?php 
        include '../includes/include.php';
        $title          =    $_POST['txtTitlen'];
        $description    =    $_POST['txtDescriptionn'];
        $product    =    $_POST['selProductn'];
        $speciality =    $_POST['selSpecialityn'];
        $type       =        $_POST['selMedTypen'];
        $temp_img       =        $_FILES["file"]["tmp_name"];
        $date           =   date("Y-m-d  H:i:s", time());

        $img=$_FILES["file"]["name"];
   if (($_FILES["file"]["type"] == "video/avg") || ($_FILES["file"]["type"] == "video/dat") || ($_FILES["file"]["type"] == "video/mp4") || ($_FILES["file"]["type"] == "video/avi")|| ($_FILES["file"]["type"] == "video/mov") || ($_FILES["file"]["type"] == "video/avi") || ($_FILES["file"]["type"] == "video/wmv") || ($_FILES["file"]["type"] == "video/mkv") || ($_FILES["file"]["type"] == "video/wmx")|| ($_FILES["file"]["type"] == "video/mpeg")|| ($_FILES["file"]["type"] == "video/mpg") && ($_FILES["file"]["size"] < 150000)) 
        {
        echo move_uploaded_file($temp_img, "video/$img");
        }
        else
        {
        echo "File Loading Error...";
        }
            $sql="INSERT INTO tblmedia(medTitle,medDesc,medType,medSpeciality,medProduct,medIsActive,insDate,modDate,medPath) VALUES('".$title."','".$description."','".$type."','".$speciality."','".$product."','0','".$date."','".$date."','".$img."');";
            mysql_query($sql) or die(mysql_error()); 
        header('Location:../media/');
        ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T18:27:05.837

尝试使用 TamperData Addon for Firefox 并检查您发送的 MIME 类型。然后，您可以为不工作的文件添加正确的类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T18:28:31.903

前置“video/”并不总是为您提供正确的视频格式的 mime 类型。

请参阅以下链接：

[http://en.wikipedia.org/wiki/Internet_media_type#Type_video](http://en.wikipedia.org/wiki/Internet_media_type#Type_video)

[http://wiki.whatwg.org/wiki/Video_type_parameters#MIME_types_used_in_the_wild_.28in_type.3D.22.22.29](http://wiki.whatwg.org/wiki/Video_type_parameters#MIME_types_used_in_the_wild_.28in_type.3D.22.22.29)

# ruby - 为什么将数据导出到 CSV 只给出数字？

> ID：11250623
> 
> 赞同：0
> 
> 时间：2012-06-28T18:18:02.057
> 
> 标签：ruby

我正在尝试使用以下代码将 mongo 结构导出到 CSV：

```
file = Tempfile.new(['genreport','.csv'],file_path)
file_name = file.path()
CSV.open(file_name,"w") do |csv|
result_cursor.each do |eachdoc|
    eachdoc.each do |key,value|
        csv<<key.to_s
        csv<<value.to_s
    end
    csv<<"\n"
end
end 
```

CSV 文件按预期创建，但仅包含数字。我究竟做错了什么？

以下是类型：

`result_cursor`是一个 mongo 游标，`eachdoc`将是一个哈希，`key`并且`value`将是一个字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T21:09:21.357

我不确定您的代码有何不同或更改了所发布内容的上下文，但是当我尝试按原样运行代码时，出现异常（未定义的方法“键值”的“映射”）。但是，当我这样做时，它工作正常。

```
file = Tempfile.new(['genreport','.csv'],file_path)
file_name = file.path()
CSV.open(file_name,"w") do |csv|
  result_cursor.each do |eachdoc|
    eachdoc.each do |key,value|
      csv << [key, value]
    end
  end
end 
```

不过，这确实无助于解释您所看到的数字。也许其他东西正在覆盖临时文件的内容。

# wpf - 除了使用 IsFocused 之外，如何知道 UserControl 是否处于活动状态

> ID：11250625
> 
> 赞同：5
> 
> 时间：2012-06-28T18:18:04.630
> 
> 标签：wpf, user-controls, focus

我正在开发一个 WPF 项目，并且每次某些 userControl 处于活动状态或不活动状态时，我都会尝试触发一个事件。

这些用户控件内部还有许多其他控件。

我尝试使用 userControl 事件`GotFocus`和来实现这一点`LostFocus`，但是这些事件没有按我需要的方式工作，因为当我使用其中的控件时，userControl 失去了焦点。

所以，我的问题是：**有没有办法在用户使用其中的控件时维护 userControl `Active`，并且，当用户转到另一个 userControl 时，第一个得到`Inactive`???**

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T17:20:58.523

感谢@LPL 和@Rachel 的评论，我可以解决我的问题。

我不得不使用该事件`UIElement.IsKeyboardFocusWithinChanged`，并且效果很好。

起初我遇到的问题是回调方法被无限引发，但实际问题是`MessageBox`每次`IsKeyboardFocusWithinChanged`引发事件时我都显示一个，所以，这导致`IsKeyboardFocusWithin`属性更改并创建了一个无限循环。但多亏了瑞秋的建议，我才能弄清楚如何解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T18:48:50.383

我不确定，但一种解决方法可能是控制失去焦点检查获得焦点的控件是否是您的控件的子控件，如果它是写入，则返回，如果不是，那么只需编写您想要失去焦点的逻辑控制。我希望这个能帮上忙

# java - 如何使 Java-rdfa api 与 Jena Api 一起工作？

> ID：11250632
> 
> 赞同：2
> 
> 时间：2012-06-28T18:18:35.863
> 
> 标签：java, maven, jena, rdfa

我正在尝试编写小型应用程序，它将响应 xhtml+xml 格式的 web 服务（实际上我是在谈论 dbpedia 聚光灯）并使用 rdf 蒸馏器（这里是 Java-rdfa api）来提取 rdf 三元组. 我已经设法安装了 jena api（我同时使用 Netbeans 和 Eclipse IDE）并且可以正常工作。为了安装 java-rdfa api，我在 java-rdfa-0.4.1.jar 中创建了一个用户库“放置”并为我的项目设置了一个类路径（因为它是我的项目依赖于 3 个库 java-rdfa、jena -api-2.7.1\. 和默认的 java JDK 1.7)。不幸的是，当我运行我的应用程序时，我遇到了以下异常

```
 java.lang.NoClassDefFoundError: com/hp/hpl/jena/iri/IRIFactory 
```

我确信在jena api中有一个iri-0.9.1 jar。问题是因为我不使用maven引起的吗？（我知道是一个java包管理器，但我对此一无所知）。它甚至可以在没有maven的情况下以简单的方式使用这两个api吗？或者可能是因为我的代码？如果这个问题看起来微不足道或格式不正确，我深表歉意，但由于我是编程新手，任何建议都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T19:16:57.913

好吧，查看 java-rdfa 的[maven pom.xml](https://github.com/shellac/java-rdfa/blob/386875fe16999f4be0f0dc8af97c87fa9b08f8ed/jena/pom.xml)文件，看起来它使用的是相当旧的 Jena 版本 - 2.6.3，而您可能为您的 IDE 下载的版本将是（猜测) 2.7.0 或 2.7.1。

一种做法是在 github 上fork[项目](https://github.com/shellac/java-rdfa/tree)`pom.xml`并将其更新为指向最新的 Jena 版本。但是，如果您是编程新手，这可能是一个过分的问题。碰巧，我认识 java-rdfa 的维护者，我会问他是否有时间做一个适用于现代 Jena 版本的新版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-08T00:43:59.113

让我提供一个替代方案。如果您正在寻找来自 DBpedia Spotlight 的 RDF，为什么不在您最喜欢的序列化中要求它呢？您只需要相应地设置您的 Accept 标头。

这里有一个 cURL 的例子。

```
curl -H "Accept: text/turtle" http://spotlight.dbpedia.org/rest/annotate -d "text=Berlin capital of Germany" 
```

对于 Java，搜索“设置 http 接受标头 java”。

对该请求的响应将是[NIF中的 RDF](http://aksw.org/Projects/NIF)

```
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix itsrdf: <http://www.w3.org/2005/11/its/rdf#> .
@prefix str: <http://nlp2rdf.lod2.eu/schema/string/> .

<http://spotlight.dbpedia.org/rest/document/?text=Berlin%20capital%20of%20Germany#offset_0_25> str:sourceString "Berlin capital of Germany" ;
    str:subString <http://spotlight.dbpedia.org/rest/document/?text=Berlin%20capital%20of%20Germany#offset_0_6> ;
    a str:OffsetBasedString , str:Document .

<http://spotlight.dbpedia.org/rest/document/?text=Berlin%20capital%20of%20Germany#offset_0_6> itsrdf:disambigIdentRef <http://dbpedia.org/resource/West_Berlin> ;
    a str:OffsetBasedString . 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T20:58:20.933

您是否检查[过](http://github.com/niklasl/clj-rdfa-jena)使用符合 RDFa 1.1 的库[clj-rdfa](https://github.com/niklasl/clj-rdfa)的 clj-rdfa-jena ？看一个[例子](https://github.com/niklasl/clj-rdfa-jena/blob/master/examples/rdfa_jena.groovy)。

# ruby - 如何写没有前导零或前导空格的时间？

> ID：11250633
> 
> 赞同：19
> 
> 时间：2012-06-28T18:18:44.097
> 
> 标签：ruby, time, ruby-1.9, strftime, time-format

在 Ruby 1.9 程序中，我想将当前时间格式化为`Thu 1:51 PM`. 我应该在一天中的某个时间使用什么格式代码（`1`在本例中）？

```
Time.now.strftime '%a %I:%M %p' #=> "Thu 01:51 PM"
Time.now.strftime '%a %l:%M %p' #=> "Thu  1:51 PM" 
```

`%I`有一个前导零 ( `01`)。`%l`有一个前导空格 ( ` 1`)。我在[strftime 文档](http://www.ruby-doc.org/core-1.9.3/Time.html#method-i-strftime)中看不到任何其他格式的代码。我不能使用`.lstrip`，因为空格在字符串的中间。我可以使用`.gsub(/ +/, " ")`，但我想知道是否有更简单、更简单的方法。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-06-28T18:18:44.923

```
Time.now.strftime '%a %-l:%M %p' #=> "Thu 1:51 PM" 
```

写`%-l`而不是`%l`. 带前导`-`空格和零。

您也可以使用`-`其他格式代码。Ruby strftime 文档甚至提到`%-m`and `%-d`，尽管它没有提到您可以`-`与任何代码一起使用。因此，`%-I`将给出与 相同的结果`%-l`。但我推荐`%-l`，因为使用`l`而不是`I`对我来说，一开始就不需要任何东西——它写的空间看起来更意外。

您还可以看到[一份详尽的 Ruby **1.8** `strftime`格式代码](http://lostincode.net/blog/strtime-ruby-osx)列表，包括具有`-`和类似语法`_`的代码`0`。它说 Mac OS X 上的 Ruby 1.8 不支持这些扩展语法，但不要担心：它们在我的 OS X 机器上的 Ruby 1.9 中工作。

# jquery - Flex 与 HTML/jQuery

> ID：11250639
> 
> 赞同：0
> 
> 时间：2012-06-28T18:19:00.750
> 
> 标签：jquery, html, flash, apache-flex

很多时候，我会从业务/客户那里获得快速的页面设计输入，这些输入最终将被开发并与应用程序集成。
在得到他们的批准之前，我让他们给他们线框来感受新的 UI。
我的应用程序 UI 在 Flex 中。但我发现 HTML/jQuery 可以轻松快速地开发线框。
如果我在 HTML/jQuery 中创建一个线框，那么我也可以在 Flex 中重新创建它，这是一个公平的假设吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T03:40:30.907

是的，这是一个公平的假设。一般来说，Flash/Flex 比 HTML/JS 更强大。尽管随着 HTML5 的出现和 JQuery 等 JavaScript 库的改进，HTML/JS 越来越接近您在 Flex 中可以实现的功能，但额外的复杂性（支持各种浏览器、优雅降级、假 OOP 和一百万个翻转 DIV），这意味着任何时候您需要在客户端上做一些相当复杂的事情，您都可以在 Flex 中以更易于管理和可扩展的方式来做。

一个值得注意的例外是您不能在 Flex Web 应用程序中嵌入来自其他网站的页面（与 HTML 不同，也与 AIR 不同）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T18:22:26.323

是的，用 jQuery 制作网站原型很容易。特别是如果您使用像 Knockout.js 这样的框架。

Knockout 将允许您快速开发功能性 UI，而无需编写大量 JavaScript。

[http://knockoutjs.com/](http://knockoutjs.com/)

# jquery - Salesforce - 使用 jQuery 更改（和更新）标准布局

> ID：11250641
> 
> 赞同：1
> 
> 时间：2012-06-28T18:19:06.097
> 
> 标签：jquery, salesforce, apex-code

我们的机会布局上有一个彩色评级字段作为成功可能性指标。现在它由一个选项列表驱动（也在布局上，就在它的下方）。请参阅此屏幕截图以供参考：http: [//i.imgur.com/rvSGe.png](http://i.imgur.com/rvSGe.png)

我宁愿能够点击颜色并让它改变，并坚持下去。

这是一些 jQuery 概念验证的尝试……它确实有效，例如，将颜色从绿色变为红色。然而，我一无所知的部分是让它坚持下去（即让记录更新）。

在下面的代码中，为了用户的利益，图像被替换，并且选择列表被改变，理论上，系统的..但这是我很确定的部分：

```
j$ = jQuery.noConflict();

j$('document').ready(function() {
  j$('#00NR0000001APo7_ileinner').click(function() {
    j$('#00NR0000001APo7_ileinner').replaceWith('<img src="/img/samples/color_red.gif" height="15" width="70" border="0">');
    j$('#00NR0000001AKPR_ileinner').replaceWith('Red')
  });
}); 
```

该脚本位于 HTML 主页组件中，我通过 chrome 获得了元素 ID。我刚刚开始学习 jQuery，所以 A) 是一种可持续的方式 - 还是它们不是静态的？B）是否可以保存像这种颜色变化这样的任何客户端更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T16:02:00.700

A）这是一种可持续的方式吗？或者它们不会是静态的？

> Salesforce 可以随时更改其页面结构或命名约定，因此像这样对 ID 进行硬编码并不是一个好主意。话虽如此，有时这是完成您在 Salesforce 中尝试做的事情的唯一方法（也是我一直必须做的事情）

B）是否可以保存像这种颜色变化这样的任何客户端更改？

> Cookie 将是客户端解决方案的一种方式，但它对于正在使用的浏览器来说是唯一的，并且会受到过期/cookie 删除的影响。
> 
> [Hraefn](https://stackoverflow.com/questions/11250641/salesforce-using-jquery-to-change-and-update-on-a-standard-layout#comment14865912_11250641)关于[AJAX 工具包](http://www.salesforce.com/us/developer/docs/ajax/index.htm)的评论将是一个更好的起点。您需要一个自定义字段或对象来保存 Salesforce 中的更改。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-28T18:29:22.667

听起来您想要做的是将 ui 元素状态的状态保存在服务器上。查看将设置保存在 MySQL 或文本文件等中。然后您可以通过 PHP 将 MySQL 变量传递给 jQuery，并使用 if 语句根据变量的值更改颜色。

仅在 jQuery 中您能做的最多的事情就是设置一个 cookie 以保持更改（直到 cookie 过期），但它只适用于已设置 cookie 的一台机器。

# c++ - 向量 push_back 错误

> ID：11250644
> 
> 赞同：1
> 
> 时间：2012-06-28T18:19:16.100
> 
> 标签：c++, class, vector

所以就是这种情况。

我有一堂课

```
Class L_FullQuote
{
    private:
    vector<int> time;
    ..
} 
```

和

```
Class B
{

    L_FullQuote *Symbols[100];

    void handle message()

} 
```

里面句柄味精我有这个声明

```
Symbols[i]->time.push_back(2); 
```

代码构建良好..但是当我使用生成的 dll 时。应用程序只是崩溃了..有时它会让我在向量中出现一个 nxt 指针错误..但大多数情况下整个应用程序只是崩溃了。没有那条线它工作正常。

请帮忙

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T18:24:16.897

您已经在使用`vector`，为什么不更进一步呢？使用`std::vector`将使您专注于编写功能，而不是担心内存管理。

此示例与您最初发布的示例略有不同。您的原始问题类`B`有一个包含 100 个指针的数组，每个指针都必须初始化。在下面的示例中，我们在构造函数中创建了一个初始大小为 100`std::vector`个`L_FullQuote`对象的对象。

```
class L_FullQuote
{
public:
    vector<int> time;
};

class B
{
public:
    // Initialize Symbols with 100 L_FullQuote objects
    B() : Symbols(100)
    {
    }

    std::vector<L_FullQuote> Symbols;

    void handle_message()
    {
       Symbols[i].time.push_back(2);
       // other stuff...
    }

}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T18:22:21.277

```
L_FullQuote *Symbols[100]; 
```

在这里，您*声明*了一个指向 的指针数组`L_FullQuote`，但您从未初始化任何指针，因此当您调用时：

```
Symbols[i]->... 
```

您正在取消引用无效的指针。另请注意，您已声明`time`为私有（尽管您的代码甚至不会以这种方式编译，s B 作为 AI 的朋友假设？）

简单地声明一个指针数组并不会初始化每个元素以指向一个有效对象。您需要初始化每一个，例如：

```
for(int i = 0; i < 100; ++i) {
    Symbols[i] = new L_FullQuote();
} 
```

只有这样你才有一个充满有效指针的数组。不要忘记释放它们！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-28T18:24:33.227

time 是 L_FullQuote 类的私有成员，来自 B 类，您无权访问该字段

# javascript - three.js：geometry.verticesNeedUpdate 保持为假，尽管设置为真

> ID：11250646
> 
> 赞同：3
> 
> 时间：2012-06-28T18:19:21.717
> 
> 标签：javascript, three.js

我正在尝试更新当前位于画布上的网格。初始化网格时，我将几何体设置为动态的，就像这样

```
mesh.geometry.dynamic = true; 
```

我可以将网格打印到控制台并检查该动态是否属实。

然后更新网格，我在 for 循环中使用 set() 函数

```
 for(i=0; i<6449; i++){
    x = this.model.geometry.vertices[i].x * parseFloat(eigen[count]);
    count++;
    y = this.model.geometry.vertices[i].y * parseFloat(eigen[count]);
    count++;
    z = this.model.geometry.vertices[i].z * parseFloat(eigen[count]);
    count++;
    this.model.geometry.vertices[i].set(x, y, z);
  } 
```

在他的阶段，我可以在控制台中检查顶点是否已更新为新值。

最后我像这样将 verticesNeedUpdate 设置为 true

```
this.model.geometry.verticesNeedUpdate = true; 
```

当我运行这个函数时，网格会从屏幕上移除。然后我检查 verticesNeedUpdate 它仍然设置为 false。

如果我删除 verticesNeedUpdate = true; 网格留在场景中。

如果有人能指出我正确的方向，那将不胜感激。

谢谢。

# dojo - DOJO ContentPane.set("href", "..." ) 未加载内容

> ID：11250653
> 
> 赞同：0
> 
> 时间：2012-06-28T18:19:56.570
> 
> 标签：dojo, contentpane

我有一个 ContentPane 定义如下：

```
<div id="searchResultsContentPane" data-dojo-type="dijit.layout.ContentPane" data-dojo-props='splitter:false, region:"center"'></div> 
```

当按下另一个 ContentPane 中的按钮时，我试图动态设置 href：

```
var searchResultsContentPane = dijit.byId("searchResultsContentPane");
searchResultsContentPane.set("href", "modules/content_panes/callrecords.php"); 
```

由于某种原因，这似乎不起作用。内容窗格闪烁加载然后变回白色，FireBug 没有给我可用的信息。这就是它所显示的全部内容：

![在此处输入图像描述](../Images/79133faa8726bf486af1fec8cd44540f.png)

如果您看不懂它以红色显示：

> 获取[http://cdr.homelinux.net:10001/Mike/modules/content_panes/callrecords.php](http://cdr.homelinux.net:10001/Mike/modules/content_panes/callrecords.php)

如果我将其设置为 html 作为 data-dojo-props 属性， callrecords.php 加载就很好。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T20:53:19.747

页面令人耳目一新。使用以下代码正确加载内容窗格。

```
function sendSearchForm() {
            // format taken from http://dojotoolkit.org/reference-guide/1.7/dojo/xhrPost.html
            var form = dojo.byId("search_form");

            dojo.connect(form, "onsubmit", function(event) {
                dojo.stopEvent(event);

            var xhrArgs = {
                form: dojo.byId("search_form"),
                handleAs: "text",
                load: function(data){
                    loadAdvancedSearchResultsTable();
                    //var searchResultsContentPane = dijit.byId("searchResultsContentPane");
                    //searchResultsContentPane.set("href", "modules/content_panes/test_module.html");
                },
                error: function(error){
                    // TODO Handle errors
                }
              }
              // Call the asynchronous xhrPost
              //dojo.byId("response").innerHTML = "Form being sent..."
              var deferred = dojo.xhrPost(xhrArgs);
            });
        }
        dojo.ready(sendSearchForm); 
```

# ruby-on-rails - 如何使用 Twitter Bootstrap 在 Rails 3.2 中实现切换药丸？

> ID：11250655
> 
> 赞同：1
> 
> 时间：2012-06-28T18:20:06.367
> 
> 标签：ruby-on-rails, twitter-bootstrap, ruby-on-rails-3.2

我拿出这个片段来解释我的问题。

```
<ul class="nav nav-pills nav-stacked red"> 
    <li><%= link_to "Home",   'http://localhost:3000/home' %></li>
    <li><%= link_to "About",   'http://localhost:3000/about', :data => {:toggle=>"pill"} %></li>
</ul> 
```

如果我点击“主页”，链接会将我带到“http://localhost:3000/home”。如果我点击关于，药丸会切换，但链接不起作用。这是生成的html：

```
<ul class="nav nav-pills nav-stacked red">
    <li><a href="http://localhost:3000/home">Home</a></li>
    <li><a href="http://localhost:3000/about" data-toggle="pill">About</a></li>
</ul> 
```

我的目标是能够单击链接，转到地址并突出显示相应的药丸。

我在这里看到了关于 data-toggle="pill" 的提示：http: [//twitter.github.com/bootstrap/javascript.html#tabs](http://twitter.github.com/bootstrap/javascript.html#tabs)

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T18:23:57.253

我认为那行不通……您提供的示例中的数据切换具有锚链接（#about），而您的则重定向到另一个页面。您应该在服务器端执行或使用锚链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T20:34:15.457

遇到同样的问题，并做了更多的实验。从我的结果来看，要使用外部链接，您需要删除“data-toggle”属性，如下所示：

```
<ul class="nav nav-pills nav-stacked red"> 
    <li><%= link_to "Home",   'http://localhost:3000/home' %></li>
    <li><%= link_to "About",   'http://localhost:3000/about' %></li>
</ul>

<ul class="nav nav-pills nav-stacked red">
    <li><a href="http://localhost:3000/home">Home</a></li>
    <li><a href="http://localhost:3000/about">About</a></li>
</ul> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T19:52:58.010

我最后检查了当前页面是否处于活动状态

```
<li class="<%= 'active' if current_page?(root_path) %>">
    <%=link_to root_path do %>
        <i class="icon-white icon-home"></i>
        Home
    <% end %>
</li> 
```

# matlab - Fortran 未定义的引用

> ID：11250656
> 
> 赞同：0
> 
> 时间：2012-06-28T18:20:08.380
> 
> 标签：matlab, fortran, undefined-reference, matlab-engine

我正在尝试编译实验室伙伴给我的 fortran 代码以运行一些分析。该程序涉及调用 MATLAB 脚本来计算某些事情。他给我的文件被设置为在另一台计算机上运行，​​我正试图让它们在我的计算机上运行。我已将 ACML 和 MATLAB 库路径更改为我计算机上的相应路径。

我得到的错误是：

```
gfortran -v   -O2 -Wl,-rpath-link,/usr/local/MATLAB/R2012a/bin/glnxa64 -L/opt/acml4.3.0/gfortran64/lib -lacml -lacml_mv -lgfortran -L/usr/local/MATLAB/R2012a/bin/glnxa64 -leng -lmx obj/gctad.mod.o obj/glrkn_functions.mod.o obj/glrkn.mod.o obj/tfe.mod.o obj/glrkn_ext.mod.o obj/tfe_readfile.mod.o obj/glrkn_readfile.mod.o obj/matlab.mod.o obj/partitions.mod.o obj/glrkn_preproc.o obj/glrkn_thrml_props.o obj/glrkn_init_logs.o obj/glrkn_press_init.o obj/glrkn_press_updt.o obj/glrkn_tmpr_init.o obj/glrkn_tmpr_updt.o obj/glrkn_ext_press_init.o obj/glrkn_ext_press_updt.o obj/glrkn_ext_tmpr_init.o obj/glrkn_ext_tmpr_updt.o obj/glrkn_dynamic.o obj/glrkn_el_log.o obj/glrkn_rk4.o obj/glrkn_nwmrk.o obj/glrkn_init_accel.o obj/sorti.o obj/tfe_preproc.o obj/tfe_reorder.o obj/tfe_mtxmk.o obj/tfe_ext_out_init.o obj/tfe_ext_flx_init.o obj/tfe_ext_out_updt.o obj/tfe_ext_flx_updt.o obj/tfe_flx_init.o obj/tfe_flx_updt.o obj/tfe_dynamic.o obj/tfe_tmpr_rate_init.o obj/panel_main.o -o main.out 
Driving: gfortran -v -O2 -Wl,-rpath-link,/usr/local/MATLAB/R2012a/bin/glnxa64 -L/opt/acml4.3.0/gfortran64/lib -lacml -lacml_mv -l gfortran -l m -L/usr/local/MATLAB/R2012a/bin/glnxa64 -leng -lmx obj/gctad.mod.o obj/glrkn_functions.mod.o obj/glrkn.mod.o obj/tfe.mod.o obj/glrkn_ext.mod.o obj/tfe_readfile.mod.o obj/glrkn_readfile.mod.o obj/matlab.mod.o obj/partitions.mod.o obj/glrkn_preproc.o obj/glrkn_thrml_props.o obj/glrkn_init_logs.o obj/glrkn_press_init.o obj/glrkn_press_updt.o obj/glrkn_tmpr_init.o obj/glrkn_tmpr_updt.o obj/glrkn_ext_press_init.o obj/glrkn_ext_press_updt.o obj/glrkn_ext_tmpr_init.o obj/glrkn_ext_tmpr_updt.o obj/glrkn_dynamic.o obj/glrkn_el_log.o obj/glrkn_rk4.o obj/glrkn_nwmrk.o obj/glrkn_init_accel.o obj/sorti.o obj/tfe_preproc.o obj/tfe_reorder.o obj/tfe_mtxmk.o obj/tfe_ext_out_init.o obj/tfe_ext_flx_init.o obj/tfe_ext_out_updt.o obj/tfe_ext_flx_updt.o obj/tfe_flx_init.o obj/tfe_flx_updt.o obj/tfe_dynamic.o obj/tfe_tmpr_rate_init.o obj/panel_main.o -o main.out -l gfortran -l m -shared-libgcc
Using built-in specs.
COLLECT_GCC=gfortran
COLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-linux-gnu/4.6/lto-wrapper
Target: x86_64-linux-gnu
Configured with: ../src/configure -v --with-pkgversion='Ubuntu/Linaro 4.6.3-1ubuntu5' --with-bugurl=file:///usr/share/doc/gcc-4.6/README.Bugs --enable-languages=c,c++,fortran,objc,obj-c++ --prefix=/usr --program-suffix=-4.6 --enable-shared --enable-linker-build-id --with-system-zlib --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --with-gxx-include-dir=/usr/include/c++/4.6 --libdir=/usr/lib --enable-nls --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --enable-gnu-unique-object --enable-plugin --enable-objc-gc --disable-werror --with-arch-32=i686 --with-tune=generic --enable-checking=release --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=x86_64-linux-gnu
Thread model: posix
gcc version 4.6.3 (Ubuntu/Linaro 4.6.3-1ubuntu5) 
Reading specs from /usr/lib/gcc/x86_64-linux-gnu/4.6/libgfortran.spec
rename spec lib to liborig
COLLECT_GCC_OPTIONS='-v' '-O2' '-L/opt/acml4.3.0/gfortran64/lib' '-L/usr/local/MATLAB/R2012a/bin/glnxa64' '-o' 'main.out' '-shared-libgcc' '-mtune=generic' '-march=x86-64'
COMPILER_PATH=/usr/lib/gcc/x86_64-linux-gnu/4.6/:/usr/lib/gcc/x86_64-linux-gnu/4.6/:/usr/lib/gcc/x86_64-linux-gnu/:/usr/lib/gcc/x86_64-linux-gnu/4.6/:/usr/lib/gcc/x86_64-linux-gnu/
LIBRARY_PATH=/usr/lib/gcc/x86_64-linux-gnu/4.6/:/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu/:/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../../lib/:/lib/x86_64-linux-gnu/:/lib/../lib/:/usr/lib/x86_64-linux-gnu/:/usr/lib/../lib/:/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../:/lib/:/usr/lib/
COLLECT_GCC_OPTIONS='-v' '-O2' '-L/opt/acml4.3.0/gfortran64/lib' '-L/usr/local/MATLAB/R2012a/bin/glnxa64' '-o' 'main.out' '-shared-libgcc' '-mtune=generic' '-march=x86-64'
 /usr/lib/gcc/x86_64-linux-gnu/4.6/collect2 --sysroot=/ --build-id --no-add-needed --as-needed --eh-frame-hdr -m elf_x86_64 --hash-style=gnu -dynamic-linker /lib64/ld-linux-x86-64.so.2 -z relro -o main.out /usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu/crt1.o /usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu/crti.o /usr/lib/gcc/x86_64-linux-gnu/4.6/crtbegin.o -L/opt/acml4.3.0/gfortran64/lib -L/usr/local/MATLAB/R2012a/bin/glnxa64 -L/usr/lib/gcc/x86_64-linux-gnu/4.6 -L/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu -L/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../../lib -L/lib/x86_64-linux-gnu -L/lib/../lib -L/usr/lib/x86_64-linux-gnu -L/usr/lib/../lib -L/usr/lib/gcc/x86_64-linux-gnu/4.6/../../.. -rpath-link /usr/local/MATLAB/R2012a/bin/glnxa64 -lacml -lacml_mv -lgfortran -lm -leng -lmx obj/gctad.mod.o obj/glrkn_functions.mod.o obj/glrkn.mod.o obj/tfe.mod.o obj/glrkn_ext.mod.o obj/tfe_readfile.mod.o obj/glrkn_readfile.mod.o obj/matlab.mod.o obj/partitions.mod.o obj/glrkn_preproc.o obj/glrkn_thrml_props.o obj/glrkn_init_logs.o obj/glrkn_press_init.o obj/glrkn_press_updt.o obj/glrkn_tmpr_init.o obj/glrkn_tmpr_updt.o obj/glrkn_ext_press_init.o obj/glrkn_ext_press_updt.o obj/glrkn_ext_tmpr_init.o obj/glrkn_ext_tmpr_updt.o obj/glrkn_dynamic.o obj/glrkn_el_log.o obj/glrkn_rk4.o obj/glrkn_nwmrk.o obj/glrkn_init_accel.o obj/sorti.o obj/tfe_preproc.o obj/tfe_reorder.o obj/tfe_mtxmk.o obj/tfe_ext_out_init.o obj/tfe_ext_flx_init.o obj/tfe_ext_out_updt.o obj/tfe_ext_flx_updt.o obj/tfe_flx_init.o obj/tfe_flx_updt.o obj/tfe_dynamic.o obj/tfe_tmpr_rate_init.o obj/panel_main.o -lgfortran -lm -lgcc_s -lgcc -lquadmath -lm -lgcc_s -lgcc -lc -lgcc_s -lgcc /usr/lib/gcc/x86_64-linux-gnu/4.6/crtend.o /usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu/crtn.o
obj/panel_main.o: In function `MAIN__':
panel_main.f90:(.text+0x280): undefined reference to `engopen_'
panel_main.f90:(.text+0x2a6): undefined reference to `engevalstring_'
panel_main.f90:(.text+0x419): undefined reference to `engevalstring_'
panel_main.f90:(.text+0x42e): undefined reference to `engclose_'
obj/glrkn_ext_press_init.o: In function `glrkn_ext_press_init_':
glrkn_ext_press_init.f90:(.text+0x25): undefined reference to `enggetvariable_'
glrkn_ext_press_init.f90:(.text+0x41): undefined reference to `mxgetnumberofelements_'
glrkn_ext_press_init.f90:(.text+0x54): undefined reference to `mxgetm_'
glrkn_ext_press_init.f90:(.text+0x67): undefined reference to `mxgetn_'
glrkn_ext_press_init.f90:(.text+0x92): undefined reference to `mxcreatedoublematrix_'
glrkn_ext_press_init.f90:(.text+0xb8): undefined reference to `mxcreatedoublematrix_'
glrkn_ext_press_init.f90:(.text+0xd6): undefined reference to `mxcreatedoublescalar_'
glrkn_ext_press_init.f90:(.text+0x1d8): undefined reference to `mxgetpr_'
glrkn_ext_press_init.f90:(.text+0x1fb): undefined reference to `mxcopyptrtoreal8_'
glrkn_ext_press_init.f90:(.text+0x22a): undefined reference to `enggetvariable_'
glrkn_ext_press_init.f90:(.text+0x246): undefined reference to `mxgetnumberofelements_'
glrkn_ext_press_init.f90:(.text+0x259): undefined reference to `mxgetm_'
glrkn_ext_press_init.f90:(.text+0x26c): undefined reference to `mxgetn_'
glrkn_ext_press_init.f90:(.text+0x36e): undefined reference to `mxgetpr_'
glrkn_ext_press_init.f90:(.text+0x391): undefined reference to `mxcopyptrtoreal8_'
obj/glrkn_ext_press_updt.o: In function `glrkn_ext_press_updt_':
glrkn_ext_press_updt.f90:(.text+0x563): undefined reference to `mxgetpr_'
glrkn_ext_press_updt.f90:(.text+0x587): undefined reference to `mxcopyreal8toptr_'
glrkn_ext_press_updt.f90:(.text+0x5a2): undefined reference to `engputvariable_'
glrkn_ext_press_updt.f90:(.text+0x5b7): undefined reference to `mxgetpr_'
glrkn_ext_press_updt.f90:(.text+0x5da): undefined reference to `mxcopyreal8toptr_'
glrkn_ext_press_updt.f90:(.text+0x5f5): undefined reference to `engputvariable_'
glrkn_ext_press_updt.f90:(.text+0x60a): undefined reference to `mxgetpr_'
glrkn_ext_press_updt.f90:(.text+0x62d): undefined reference to `mxcopyreal8toptr_'
glrkn_ext_press_updt.f90:(.text+0x648): undefined reference to `engputvariable_'
glrkn_ext_press_updt.f90:(.text+0x65d): undefined reference to `mxgetpr_'
glrkn_ext_press_updt.f90:(.text+0x680): undefined reference to `mxcopyreal8toptr_'
glrkn_ext_press_updt.f90:(.text+0x69b): undefined reference to `engputvariable_'
glrkn_ext_press_updt.f90:(.text+0x6ba): undefined reference to `engevalstring_'
glrkn_ext_press_updt.f90:(.text+0x6d9): undefined reference to `enggetvariable_'
glrkn_ext_press_updt.f90:(.text+0x6f5): undefined reference to `mxgetpr_'
glrkn_ext_press_updt.f90:(.text+0x718): undefined reference to `mxcopyptrtoreal8_'
glrkn_ext_press_updt.f90:(.text+0x724): undefined reference to `mxdestroyarray_'
glrkn_ext_press_updt.f90:(.text+0xc8a): undefined reference to `enggetvariable_'
glrkn_ext_press_updt.f90:(.text+0xca6): undefined reference to `mxgetpr_'
glrkn_ext_press_updt.f90:(.text+0xcc9): undefined reference to `mxcopyptrtoreal8_'
glrkn_ext_press_updt.f90:(.text+0xcd5): undefined reference to `mxdestroyarray_'
obj/tfe_ext_flx_init.o: In function `tfe_ext_flx_init_':
tfe_ext_flx_init.f90:(.text+0x1b): undefined reference to `enggetvariable_'
tfe_ext_flx_init.f90:(.text+0x37): undefined reference to `mxgetnumberofelements_'
tfe_ext_flx_init.f90:(.text+0x4a): undefined reference to `mxgetm_'
tfe_ext_flx_init.f90:(.text+0x5d): undefined reference to `mxgetn_'
tfe_ext_flx_init.f90:(.text+0x7a): undefined reference to `mxcreatedoublematrix_'
tfe_ext_flx_init.f90:(.text+0x99): undefined reference to `mxcreatedoublescalar_'
tfe_ext_flx_init.f90:(.text+0x19b): undefined reference to `mxgetpr_'
tfe_ext_flx_init.f90:(.text+0x1be): undefined reference to `mxcopyptrtoreal8_'
obj/tfe_ext_flx_updt.o: In function `tfe_ext_flx_updt_':
tfe_ext_flx_updt.f90:(.text+0x629): undefined reference to `mxgetpr_'
tfe_ext_flx_updt.f90:(.text+0x64d): undefined reference to `mxcopyreal8toptr_'
tfe_ext_flx_updt.f90:(.text+0x668): undefined reference to `engputvariable_'
tfe_ext_flx_updt.f90:(.text+0x67d): undefined reference to `mxgetpr_'
tfe_ext_flx_updt.f90:(.text+0x6a0): undefined reference to `mxcopyreal8toptr_'
tfe_ext_flx_updt.f90:(.text+0x6bb): undefined reference to `engputvariable_'
tfe_ext_flx_updt.f90:(.text+0x6d0): undefined reference to `mxgetpr_'
tfe_ext_flx_updt.f90:(.text+0x6f3): undefined reference to `mxcopyreal8toptr_'
tfe_ext_flx_updt.f90:(.text+0x70e): undefined reference to `engputvariable_'
tfe_ext_flx_updt.f90:(.text+0x723): undefined reference to `mxgetpr_'
tfe_ext_flx_updt.f90:(.text+0x746): undefined reference to `mxcopyreal8toptr_'
tfe_ext_flx_updt.f90:(.text+0x761): undefined reference to `engputvariable_'
tfe_ext_flx_updt.f90:(.text+0x780): undefined reference to `engevalstring_'
tfe_ext_flx_updt.f90:(.text+0x79f): undefined reference to `enggetvariable_'
tfe_ext_flx_updt.f90:(.text+0x7bb): undefined reference to `mxgetpr_'
tfe_ext_flx_updt.f90:(.text+0x7de): undefined reference to `mxcopyptrtoreal8_'
tfe_ext_flx_updt.f90:(.text+0x7ea): undefined reference to `mxdestroyarray_'
obj/tfe_dynamic.o: In function `tfe_dynamic_':
tfe_dynamic.f90:(.text+0x9c1): undefined reference to `dpbsv_'
obj/tfe_tmpr_rate_init.o: In function `tfe_tmpr_rate_init_':
tfe_tmpr_rate_init.f90:(.text+0x631): undefined reference to `dpbsv_'
collect2: ld returned 1 exit status
make: *** [run/panel_main.out] Error 1 
```

我正在使用的makefile是：

```
# object directory
obj_dir = obj/
# source directory
src_dir = src/
# Run directory
run_dir = run/
# Library directory

# library options
OPTLB = -L/opt/acml4.3.0/gfortran64/lib -lacml -lacml_mv -lgfortran \
-L/usr/local/MATLAB/R2012a/bin/glnxa64 -leng -lmx

# Linker options
OPTLN = -Wl,-rpath-link,/usr/local/MATLAB/R2012a/bin/glnxa64
# Preprocessing options
OPTPP = -cpp -D__linux -D__x86_64__
# Include options
OPTIN = -J$(obj_dir) -I/usr/local/MATLAB/R2012a/extern/include
# Optimization options
OPTOP = -O2
# Debuggion options
OPTDB = 

# Main file
main = panel_main

# module files (in proper order!)
modf = gctad glrkn_functions \
glrkn tfe glrkn_ext \
tfe_readfile glrkn_readfile \
matlab partitions

# Module names
mod = gctad glrkn_functions \
glrkn_ext_tmpr glrkn_ext_press \
glrkn_files glrkn_chk glrkn_amp glrkn_props \
glrkn_params glrkn_sol glrkn_dyn \
tfe_chk tfe_mat tfe_coord tfe_size tfe_prop \
tfe_time tfe_sol tfe_files tfe_amp tfe_ext_flx \
tfe_flx tfe_ext_out tfe_dyn \
tfe_readfile glrkn_readfile \
matlab partitions

# tfe files
tfe = sorti tfe_preproc tfe_reorder tfe_mtxmk \
tfe_ext_out_init tfe_ext_flx_init \
tfe_ext_out_updt tfe_ext_flx_updt \
tfe_flx_init tfe_flx_updt \
tfe_dynamic tfe_tmpr_rate_init 

# glrkn files
glrkn = glrkn_preproc glrkn_thrml_props glrkn_init_logs \
glrkn_press_init glrkn_press_updt \
glrkn_tmpr_init glrkn_tmpr_updt \
glrkn_ext_press_init glrkn_ext_press_updt \
glrkn_ext_tmpr_init glrkn_ext_tmpr_updt \
glrkn_dynamic glrkn_el_log glrkn_rk4 \
glrkn_nwmrk glrkn_init_accel

# MATLAB library location
matlib_dir = /usr/local/MATLAB/R2012a/bin/glnxa64/
matinc_dir = /usr/local/MATLAB/R2012a/extern/include/
matlibs = eng mx

# Sources and objects
glrkn_src = $(addprefix $(src_dir), $(addsuffix .f90, $(glrkn)))
glrkn_obj = $(addprefix $(obj_dir), $(addsuffix .o, $(glrkn)))
tfe_src = $(addprefix $(src_dir), $(addsuffix .f90, $(tfe)))
tfe_obj = $(addprefix $(obj_dir), $(addsuffix .o, $(tfe)))
mod_src = $(addprefix $(src_dir), $(addsuffix .mod.f90, $(modf)))
mod_obj = $(addprefix $(obj_dir), $(addsuffix .mod.o, $(modf)))
mod_mod = $(addprefix $(obj_dir), $(addsuffix .mod, $(mod)))
main_src = $(addprefix $(src_dir), $(addsuffix .f90, $(main)))
main_obj = $(addprefix $(obj_dir), $(addsuffix .o, $(main)))
main_out = $(addprefix $(run_dir), $(addsuffix .out, $(main)))
lib_opt = $(addprefix -l, $(libs))

# Concatenate
all_obj = $(mod_obj) $(glrkn_obj) $(tfe_obj) $(main_obj)

# Main executable
$(main_out) : $(all_obj)
    gfortran -v  $(OPTDB) $(OPTOP) $(OPTLN) $(OPTLB) $(all_obj) -o main.out 
    mv main.out $(main_out)

#   gfortran $(debug) -J$(obj_dir) $(all_obj) -L$(lib_dir) -L$(matlib_dir) -Wl,-rpath-link,$(matlib_dir) $(lib_opt)  $(addprefix -l, $(matlibs)) -o main.out
# Main object
$(main_obj) : $(main_src) $(mod_obj)
    gfortran -v $(OPTPP) $(OPTDB) $(OPTOP) $(OPTIN) $< -c
    mv $(notdir $@) $@

# TFE objects
$(tfe_obj) : $(obj_dir)%.o : $(src_dir)%.f90 $(mod_obj)
    gfortran -v $(OPTPP) $(OPTDB) $(OPTOP) $(OPTIN) $< -c
    mv $(notdir $@) $@

# Structure objects
$(glrkn_obj) : $(obj_dir)%.o : $(src_dir)%.f90 $(mod_obj)
    gfortran -v $(OPTPP) $(OPTDB) $(OPTOP) $(OPTIN) $< -c
    mv $(notdir $@) $@

# Module objects
$(mod_obj) : $(obj_dir)%.mod.o : $(src_dir)%.mod.f90 
    gfortran -v $(OPTPP) $(OPTOP) $(OPTDB) $(OPTIN) $< -c 
    mv $(notdir $@) $@

# Clean objects folder
.PHONY : clean
clean :
    rm -f -v $(obj_dir)* 
```

我已经用谷歌搜索了这个废话并且没有任何运气来修复它。如果有人有任何想法让我尝试，我将不胜感激。

谢谢，扎克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T13:49:45.250

与最初制作它的人交谈。这是使用的 gfortran 版本的问题。我使用的是 gfortran 4.6.3。他说他上次成功使用时使用的是4.4.5。我安装了 gfortran 4.4 并且编译没有问题。关于我遇到的下一个问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T11:28:51.033

为什么不将fortran转换为matlab？如果这可能有效，请在文件交换处查看 f2matlab。

# apache-flex - 通过 Flex-Actionscript 在 Internet Explorer 中更改窗口标题

> ID：11250660
> 
> 赞同：2
> 
> 时间：2012-06-28T18:20:27.660
> 
> 标签：apache-flex, internet-explorer, actionscript

我正在寻找一种在 Internet Explorer 中为 flex 应用程序动态设置窗口标题的方法。最好的方法是从 actionscript 调用 javascript，通过“ExternalInterface”设置窗口标题。

ExternalInterface.call("eval(window.document.title = 'New Title')"); ExternalInterface.call("alert", "Hello ExternalInterface");

这在 IE 以外的浏览器中运行良好，甚至在通过 html 包装器访问 flex 应用程序的 swf 文件时也可以在 IE 中运行。

ttp://localhost:8080/ChangeTitle/ **ChangeTitle.html**

但是，我需要直接从浏览器访问.swf.. ttp://localhost:8080/ChangeTitle/ **ChangeTitle.swf**

这会导致外部接口调用将窗口标题更改为不起作用，但仍会显示警报。

所以问题是……我为什么不直接使用 html 包装器？...答案：因为该项目是专门为避免使用 html 包装器而设置的。

这与一个已知的 IE 错误有关 - [http://bugs.adobe.com/jira/browse/FP-240](http://bugs.adobe.com/jira/browse/FP-240)

如果有人可以建议解决此问题的方法，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T18:33:43.367

不要为此使用 ExternalInterface；使用[BrowserManager](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/managers/BrowserManager.html)类。你可以先用一个标题来初始化它：

```
var browser:IBrowserManager = BrowserManager.getInstance();
browser.init("", "my title"); 
```

稍后您可以稍后调整标题：

```
browser.setTitle("my new title"); 
```

我有几个应用程序使用它并在 IE 中完美运行（尽管我没有测试过 IE6）。
有关此主题的更多信息：http: [//help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf64e50-7ff4.html](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf64e50-7ff4.html)

# asp.net-mvc - ViewBag 分配

> ID：11250661
> 
> 赞同：3
> 
> 时间：2012-06-28T18:20:31.613
> 
> 标签：asp.net-mvc, asp.net-mvc-3, viewbag

我正在尝试将一个值从我的数据库传递到 asp.net mvc 中的视图，非常简单的东西

```
 public ActionResult SettingsList() {

        using (podio_doc_db db = new podio_doc_db() ) {

            string app_id = db.Configs.Where(r => r.Key == "app.id").Select(r => r.Value).First();
            ViewBag["app_id"] = app_id;

        }

        return View();
    } 
```

但是我不断收到此错误

```
Cannot apply indexing with [] to an expression of type 'System.Dynamic.DynamicObject' 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-28T18:21:42.340

应该是这样的：

```
ViewBag.app_id = app_id; 
```

ViewBag 是一种动态类型，这意味着您可以在运行时添加参数，例如 app_id。

# google-app-engine - Google App Engine 上的 SSL 受信任的证书

> ID：11250664
> 
> 赞同：2
> 
> 时间：2012-06-28T18:20:41.773
> 
> 标签：google-app-engine, ssl, certificate

我创建了一个自签名证书，当然我的网站使用 https 但不受信任。

我需要做什么才能为 Google App Engine 创建证书？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T22:07:15.093

您需要从受信任的证书提供商处购买证书。您可能想阅读以下内容：[http ://en.wikipedia.org/wiki/Certificate_authority#Providers](http://en.wikipedia.org/wiki/Certificate_authority#Providers)

或在您最喜欢的搜索引擎上搜索“证书提供者”之类的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T06:36:47.930

我做到了，但是如何做到的：首先，您需要一个受信任的证书。

> 您将在浏览器中收到警告......如果您组织了一个便宜的证书，您最终会购买更昂贵的证书，因为您会发现在例如 android 设备上它是不受信任的。并且 Google 将帮助解决机器人警告：*Googlebot 注意到您的网站 [https://www.abc.com/](https://www.abc.com/)使用了可能被网络浏览器视为无效的 SSL 证书...要解决此问题，请获取新的 SSL来自 Web 浏览器信任的证书颁发机构 (CA) 的证书。*

我以 19 欧元的价格试了一个，最后以 android 上的不受信任消息和上面的 Googlebot 消息结束。如果在 Google Apps SSL 选项卡中实现一个证书程序，从而获得一个真正受信任且不太昂贵的证书，那就太好了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-02T03:12:55.327

如果您使用 SNI，您域上的 SSL 将不适用于预蜂窝 android： [https ://developers.google.com/appengine/docs/ssl](https://developers.google.com/appengine/docs/ssl)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-10-04T10:41:52.020

免责声明：我拥有这个网站

我发现为 App Engine 设置 SSL 比应有的难度更大，因此我专门为 App Engine 设计了一项服务以使其更好：[https ://www.volcanicpixels.com/ssl/](https://www.volcanicpixels.com/ssl/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-02T05:18:22.450

在 App Engine 上安装 SSL 非常难以弄清楚。

对我来说这很困难，因为谷歌向我询问了两条信息，而我不知道如何将其与我的 SSL 提供商给我的信息相协调。

对我来说，关键信息是：

*   **PEM 编码**的X.509 证书是您的证书颁发者可能通过电子邮件发送给您的（我刚刚将文本发送给我，甚至没有文件扩展名，我认为这通常是 .csr 文件，但我'不确定）
*   未**加密的 PEM 编码的 RSA 私钥**是您`.key`在其上运行此命令后的文件：`openssl rsa -in domain.key -out domain.pem

# c# - 获取当前的 webbrowser url 或 webbrowser 内容

> ID：11250669
> 
> 赞同：0
> 
> 时间：2012-06-28T18:21:08.803
> 
> 标签：c#, winforms, browser

我做了一个登录按钮，想检查用户是否登录。我虽然有两种方法可以做到这一点。

1.  检查浏览器 url 是否与 url 相等（如果用户登录成功，则 url 为 url1，否则 url 为 url2）
2.  检查当前浏览器内容是否包含单词（例如，如果用户登录成功，则在重定向页面中应该有“谢谢”消息）

我想提一下，一切正常，我唯一的问题是检查他是否登录

```
public void Login()
{
    webBrowser1.Document.GetElementById("username").SetAttribute("value", txtUsername.Text);
    webBrowser1.Document.GetElementById("password").SetAttribute("value", txtPassword.Text);
    foreach (HtmlElement item in webBrowser1.Document.GetElementsByTagName("input"))
    {
        if (item.OuterHtml.Contains("input_submit"))
        {
            item.InvokeMember("Click");
            break; // Here the webbrowser redirect right?
        }
    }
    if (webBrowser1.Document.Body.InnerText.Contains("Thank you"))
        con = true;
    else
        con = false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T19:29:49.143

我建议你使用**HttpRequest** 来模拟登录进度，使用**HttpResponse**来获取网络服务器响应和内容，并使用全局**CookieContainer**来存储 cookie。

当您收到登录成功消息时，您可以使用其他带有 globval CookieContainer 的 HttpRequest 来获取您想要下载或访问的任何网页。

我希望这可以帮助你。

您可以使用 Httpwatch(www.httpwatch.com) 观看 Internet Explorer 如何与 WebServer 交换数据。您也可以使用 IE9 开发工具来执行此操作（在 IE9 中按 F12）。

# eclipse - 一次在 Eclipse 上使用 EGit 拉取多个 Git 存储库

> ID：11250671
> 
> 赞同：0
> 
> 时间：2012-06-28T18:21:09.800
> 
> 标签：eclipse, git, pull, repository

我已经克隆了大约 60 个 git 存储库，我想`git pull`通过 EGit 更新其中的大部分。并非全部，因为其中一些具有未提交或未分阶段的更改。

我的第一次尝试是在 EGit（Git 存储库探索视图）中选择两个存储库，但不幸的是，这似乎是不可能的，因为影响按钮被禁用（上下文菜单）。

andbody 是否知道通过 Eclipse 更新某些存储库的好解决方案？

我正在使用 Ubuntu 12.04 和 Eclipse Juno。当然，shell 脚本可以解决这个问题，但我更喜欢 Eclipse。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-23T05:31:19.327

我刚刚使用开普勒发现了答案。这对我来说是一场噩梦，有 15 个回购。 `Eclipse->Windows->Preferences->General->Keys`. 现在滚动到 Pull （确保它是 egit 的） 将其设置为类似`Ctl-Shift-P` 现在在包资源管理器中选择您想要的并按`Ctl-Shift-P`，完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T21:44:20.770

有时解决方案过于简单：我的一个克隆存储库没有 HEAD，因此我无法从中提取。所有其他 repos 都进行了 HEAD 修订，并且从它们中提取可以按预期工作。

# php - php soapclient 返回 null 但 getPreviousResults 有正确的结果

> ID：11250672
> 
> 赞同：1
> 
> 时间：2012-06-28T18:21:16.083
> 
> 标签：php, soap

我在使用 SOAP 时遇到了麻烦，我以前从未遇到过这个问题，并且在网上找不到任何可以帮助我解决它的信息。

以下代码

```
$wsdl = "path/to/my/wsdl";
$client = new SoapClient($wsdl, array('trace' => true));
//$$textinput is passed in and is a very large string with rows in <item></item> tags
$soapInput = new SoapVar($textinput, XSD_ANYXML);
$res = $client->dataprofilingservice(array("contents" => $soapInput));
$response = $client->__getLastResponse();

var_dump($res);//outputs null
var_dump($response);//provides the proper response as I would expect. 
```

我尝试将参数传递给 SoapClient 构造函数来定义肥皂版本，但这没有帮助。我也尝试过将跟踪参数设置为 false 并且不存在，这正如预期的那样使 $response 为空，但 $res 仍然为空。我已经在运行 Apache 的 linux 和 windows 安装上尝试了代码。

WSDL中的函数定义是（xxxx是出于安全原因）

```
<portType name="xxxxServiceSoap">
 <operation name="dataprofilingservice">
  <input   message="tns:dataprofilingserviceSoapIn"/>
  <output message="tns:dataprofilingserviceSoapOut"/>
 </operation>
</portType> 
```

我使用 __getLastResponse() 让它工作，但它让我很恼火，它不能正常工作。

我已经整理了一个小测试脚本，有没有人在这里看到任何问题。我需要返回类型的结构吗？

```
//very simplifed dataset that would normally be 
//read in from a CSV file of about 1mb
$soapInput = getSoapInput("asdf,qwer\r\nzzxvc,ewrwe\r\n23424,2113");
$wsdl = "path to wsdl";

try {
  $client = new SoapClient($wsdl,array('trace' => true,'exceptions' => true));

} catch (SoapFault $fault) {
  $error = 1;
  var_dump($fault);
} 

try {
    $res = $client->dataprofilingservice(array("contents" => $soapInput));
    $response = $client->__getLastResponse();
    echo htmlentities($client->__getLastRequest());//proper request echoed
    echo '<hr>';
    var_dump($res);//null

    echo "<hr>";
    echo(htmlentities($response));//proper response echoed
} catch (SoapFault $fault) {
    $error = 1;
    var_dump($fault);

}         
function getSoapInput($input){
$rows = array();
    $userInputs = explode("\r\n", $input);

    $userInputs = array_filter($userInputs);
    //
    $inputTemplate = " <contents>%s</contents>";
    $rowTemplate = "<Item>%s</Item>";
    //
    $soapString = "";
    foreach ($userInputs as $row) {
        // sanitize
        $row = htmlspecialchars(addslashes($row));
        $xmlStr = sprintf($rowTemplate, $row);
        $rows[] = $xmlStr;
    }
    $textinput = sprintf($inputTemplate, implode(PHP_EOL, $rows));
    $soapInput = new SoapVar($textinput, XSD_ANYXML);

   return $soapInput;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T19:45:47.387

好吧，经过大量挖掘，它与相对名称空间有关，看来 PHP 在 WSDL 或 SOAP Envelope 中不能很好地处理它们。因此，由于我无法控制 SOAP 服务器，我将继续通过 __getLastResponse(); 获得响应。

希望这会为一些人节省一些很难找到的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T18:27:47.770

你在这里混合东西。`__getLastResponse()`如果您使用该`'trace' => true`选项，则返回来自服务器的纯 XML 字符串响应。那仅用于调试。

因此，无论是否`'trace' => true`，您要调用的方法最初返回的结果都是相同的，这是完全正常的。将跟踪设置为 on 不会改变行为，它只是提供了一个附加功能，即`__getLastResponse()`.

由于`SoapClient`不会引发任何异常，我会说您的调用正常并且`NULL`是有效的返回值。

您*可能*希望提供实际的 XML 字符串和/或 WSDL 定义，以便可以检查是否是这种情况。

# seo - HTTP 307 重定向——自 IE6 以来大多数浏览器都支持？

> ID：11250676
> 
> 赞同：4
> 
> 时间：2012-06-28T18:21:49.207
> 
> 标签：seo, http-status-code-301, http-status-code-302, http-status-code-307

很明显，在 2010 年，Google 的 Matt Cutts 在[一次采访](http://www.demacmedia.com/ecommerce/google%E2%80%99s-matt-cutts-confirms-301-redirect-problem%E2%80%A6sort-of/)中以及采访后的后续电子邮件交流中透露，如果您使用域到域 HTTP 状态 301 重定向，Google 会降低页面排名。换句话说，如果您有example.com 和购买example.com 并使用HTTP 状态301 重定向到examples.com，Google 已经承认他们通常会为此扣除PR。

好的，剩下的就是 HTTP 状态 302 和 HTTP 状态 307 重定向。他们[在 wikipedia 上](http://en.wikipedia.org/wiki/HTTP_302)说 307 是新方法，并且 HTTP 状态 302 是“混蛋”，并不是真正正确的重定向方法。问题是——自 IE6 以来的大多数浏览器都支持 HTTP 状态 307 吗？看，我没有 IE6 浏览器来测试了。

所以问题是——如果我们需要开始使用 HTTP 状态 307 重定向，它会在 IE6 之后发布的浏览器以及 IE6 浏览器中工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T08:43:54.283

我决定使用 302 重定向，原因如下：

*   谷歌当然不能因为不使用 307 重定向而惩罚整个网络，因为几乎没有人知道它。您可以下载和安装的大多数产品仍然使用 301 或 302 重定向。或者，如果他们只是使用 header('Location: x') 调用，则无论如何默认为 302 重定向。
*   Google 已经承认（在我在原始帖子中提供的来源中）如果您将 301 重定向用于域到域重定向，则会受到惩罚。
*   如果我想在浏览器中获得最大的接受度，至少现在 HTTP 302 状态代码将比 HTTP 307 更可取。但是，根据我所读到的内容，HTTP 307 是未来。然而，HTML5 仍然是未来，截至 2012 年它还没有准备好。

# ios - 以编程方式将新电话号码添加到通讯录中的联系人 (iPhone)

> ID：11250678
> 
> 赞同：3
> 
> 时间：2012-06-28T18:21:59.207
> 
> 标签：ios, iphone, contact, phone-number, addressbook

我不想在我的地址簿中创建新联系人，我只想为现有联系人添加一个新电话号码。

例子：

联系XYZ有

1.  手机：12435656
2.  手机：2413545
3.  主页：9849528

我想添加其他这样的：

联系XYZ有

1.  手机：12435656
2.  手机：2413545
3.  主页：9849528
4.  **新电话：0901903910**

我怎样才能做到？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T18:37:26.840

Apple 有一个您可以阅读的[地址簿编程指南](http://developer.apple.com/library/ios/#DOCUMENTATION/ContactData/Conceptual/AddressBookProgrammingGuideforiPhone/Introduction.html#//apple_ref/doc/uid/TP40007744-CH1-SW1)。您正在寻找的是在[属性部分](http://developer.apple.com/library/ios/#DOCUMENTATION/ContactData/Conceptual/AddressBookProgrammingGuideforiPhone/Chapters/BasicObjects.html#//apple_ref/doc/uid/TP40007744-CH3-SW9)。阅读有关单值和多值属性的信息，这可能是您需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T18:33:16.163

阅读并遵循 Apple 的[iOS 地址簿编程指南](http://developer.apple.com/library/ios/#documentation/ContactData/Conceptual/AddressBookProgrammingGuideforiPhone/Introduction.html)

希望有帮助

# ruby-on-rails - 是否有任何模型分析宝石？

> ID：11250686
> 
> 赞同：2
> 
> 时间：2012-06-28T18:22:49.593
> 
> 标签：ruby-on-rails, gem

我正在努力让客户查看每天、每周、每月、一段时间内的分析，按小时、天或月等分组……所有这些都基于`created_at`属性。

有没有任何宝石已经做到了这一点？就像是：

```
Posts.analytics(:by => :day, :period => :this_week, :column => :created_at) 
```

将返回：

```
{
'2012-06-19' => 14,
'2012-06-20' => 0, // Empty rows padding support*
'2012-06-21' => 3
} 
```

我正在尝试从头开始，但是如果已经有宝石可以完成这项工作，那似乎是很多不必要的工作。

## **更新**

我试图制作一个分析模块，该模块包含在所有模型中以便于生成分析，但这真的不可靠，有时我得到的天数比我需要的要多，而且真的很乱，任何人都可以合作并重写/改进这个：

```
# Usage:
# include Analytics::Timeline
# Model.timeline(:period => :last_24_hours, :time_by => :hour)

module Analytics
  module Timeline
    def self.included(base)
      base.class_eval {

        def self.timeline(*filters)
          filters = filters[0]
          period  = filters[:period] || :this_week
          time_by = filters[:time_by] || :days
          date_column = filters[:date_column] || :created_at

          # Named periods conventions
          period_range = case period
            when :last_12_hours
              [Time.now-12.hours, Time.now]
            when :last_24_hours
              [Time.now-24.hours, Time.now]
            when :last_7_days
              [Time.now-7.days, Time.now]
            when :last_30_days
              [Time.now-30.days, Time.now]
            when :this_week
              [Time.now.beginning_of_week, Time.now.end_of_week]
            when :past_week
              [(Time.now - 1.week).beginning_of_week, (Time.now - 1.week).end_of_week]
            when :this_month
              [Time.now.beginning_of_month, Time.now.end_of_month]
            when :past_month
              [(Time.now-1.month).beginning_of_month, (Time.now - 1.month).end_of_month]
            when :this_year
              [Time.now.beginning_of_year, Time.now.end_of_year]
            end
          period_range = period if period.kind_of?(Array)
          period_range = [period, Time.now] if period.is_a?(String)

          # determine the SQL group method
          group_column = case time_by
            when :months
              time_suffix = "-01 00:00:00"
              records = where("#{table_name}.#{date_column} > ? AND #{table_name}.#{date_column} <= ?", period_range[0].to_date, period_range[1].to_date)
              "DATE_FORMAT(#{table_name}.#{date_column.to_s}, '%Y-%m')"
            when :days
              time_suffix = " 00:00:00"
              records = where("#{table_name}.#{date_column} > ? AND #{table_name}.#{date_column} <= ?", period_range[0].to_date, period_range[1].to_date)
              "DATE(#{table_name}.#{date_column.to_s})"
            when :hours
              time_suffix = ":00:00"
              records = where("#{table_name}.#{date_column} > ? AND #{table_name}.#{date_column} <= ?", period_range[0], period_range[1])
              "DATE_FORMAT(#{table_name}.#{date_column.to_s}, '%Y-%m-%d %H')"
            when :minutes
              time_suffix = ":00"
              records = where("#{table_name}.#{date_column} > ? AND #{table_name}.#{date_column} <= ?", period_range[0], period_range[1])
              "DATE_FORMAT(#{table_name}.#{date_column.to_s}, '%Y-%m-%d %H:%M')"
            end

          # Get counts per cycle
          records = records.group(group_column).select("*, count(*) AS series_count, #{group_column} AS series_time")
          series = {}

          # Generate placeholder series
          time_table = { :days => 60*60*24, :hours => 60*60, :minutes => 60, :seconds => 0 }

          if time_by == :months
            ticks = 12 * (period_range[1].year - period_range[0].year) + (period_range[1].month + 1) - period_range[0].month
          else
            ticks = (period_range[1] - period_range[0] + 1) / time_table[time_by]
          end

          ticks.to_i.times do |i|
            time = period_range[1]-i.send(time_by)
            time = case time_by
            when :minutes
              time.change(:sec => 0)
            when :hours
              time.change(:min => 0)
            when :days
              time.change(:hour => 0)
            when :months
              time.change(:day => 1, :hour => 0)
            end

            series[time.to_s(:db)] = 0
          end

          # Merge real counts with placeholder series
          to_merge = {}
          records.each do |r|
            to_merge[r.series_time.to_s+time_suffix] = r.series_count
          end

          series.merge!(to_merge)
        end

      }
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T00:59:01.527

ActiveRecord[统计 gem](https://github.com/acatighera/statistics)似乎对您非常有用。

如果统计 gem 没有帮助，[admin_data gem](https://github.com/bigbinary/admin_data)内置了一些分析。查看[演示](http://admin-data-demo.heroku.com/admin_data/analytics/daily/phone_number)。使用整个管理系统可能有点矫枉过正，但您至少可以尝试浏览源代码以模仿分析功能。

# jquery - 在 Rails 中使用 select2 gem

> ID：11250687
> 
> 赞同：4
> 
> 时间：2012-06-28T18:22:53.367
> 
> 标签：jquery, ruby-on-rails-3, jquery-select2

我正在尝试将 select2 gem 集成到我的应用程序中，以使我的选择使用 jquery 并且看起来更好。我已经安装了 gem 并将适当的行添加到我的资产中，但我不确定如何在选择时调用它。

这是我没有它的选择示例。

有人可以为我指出正确的方向如何调用 select2 以使其正常工作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T17:02:20.083

select2-rails gem 只为您提供了一种包含 Select2 资产的简单方法，但它不包含任何用于调用它的 rails 助手。

换句话说，您必须从您的 javascript 中自己调用它。

例如，在 application.js 中：

```
$(document).ready(function(){
  $('select').select2();
}); 
```

这将在您的应用程序中的每个选择上调用 select2。

希望能帮助到你。

# c++ - 在 C++ 中，只有默认参数的构造函数是默认构造函数吗？

> ID：11250690
> 
> 赞同：12
> 
> 时间：2012-06-28T18:23:05.570
> 
> 标签：c++, constructor, default-constructor, default-arguments

在以下代码中：

```
struct Foo
{
    Foo(int x=0);
}; 
```

构造函数算作默认构造函数吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-28T18:25:01.820

C++98 §12.1/5 *（强调我的）*：

> 类 X 的默认构造函数是**可以在没有参数的情况下调用的 X 的构造函数。**如果类 X 没有用户声明的构造函数，则隐式声明默认构造函数。

所以是的，它确实算作默认构造函数。 [另请参阅](http://www.parashift.com/c++-faq-lite/ctors.html#faq-10.4)。

# php - AWS SQS 实用代码 PHP

> ID：11250691
> 
> 赞同：4
> 
> 时间：2012-06-28T18:23:13.890
> 
> 标签：php, amazon-web-services, amazon-sqs

我在这里有一个[问题，](https://stackoverflow.com/questions/11085573/aws-upload-to-s3-with-sqs-php-syntax)
但我仍然没有理解如何使用 SQS，任何人都可以帮忙提供一些代码。

**问题：** SQS 中的一个地方是什么？
我已经阅读了亚马逊的教程，这个概念看起来很可爱，但我错过了实用的一面。
例如，这张图很棒：[http](http://awsmedia.s3.amazonaws.com/catalog/images/159-for-madhu.png)
: //awsmedia.s3.amazonaws.com/catalog/images/159-for-madhu.png SQS 里面会有什么？我了解如何上传到 S3，但对于 SQS 部分仍然是灰色的

```
require_once('sdk-1.5.6.2/sdk.class.php');
//random strings
$AWS_KEY = "MY_ACCESS_KEY";
$AWS_SECRET_KEY = "MY_SECRET_KEY";

//create a new SQS queue and grab the queue URL
$sqs = new AmazonSQS(array( "key" => $AWS_KEY, "secret" => $AWS_SECRET_KEY ));
$response = $sqs->create_queue('test-topic-queue');
$queue_url = (string) $response->body->CreateQueueResult->QueueUrl;

$queue_arn = 'arn:aws:sqs:us-east-1:ENCQ8gqrAcXv:test-topic-queue';
$topic_arn = 'arn:aws:sns:us-east-1:ENCQ8gqrAcXv:test-topic';
$response = $sns->subscribe($topic_arn, 'sqs', $queue_arn);
$subscription_arn = (string) $response->body->SubscribeResult->SubscriptionArn;

/*  *   * * * * * * * * * * * * * * * *     

THIS IS THE BIG GREY AREA, WHAT HAPPENS HERE ??? 

*   * * * * * * * * * * * * * * * * */

// delete SQS queue
$queue_url = 'https://sqs.us-east-1.amazonaws.com/ENCQ8gqrAcXv/test-topic-queue'; 
$response = $sqs->delete_queue($queue_url); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-04-17T19:25:20.033

您应该有两个进程，一个将消息插入队列和您的工作线程。一个典型的工作线程看起来像这样：

```
while(true) {
    $res = $client->receiveMessage(array(
        'QueueUrl'          => $url,
        'WaitTimeSeconds'   => 1
    ));
    if ($res->getPath('Messages')) {

        foreach ($res->getPath('Messages') as $msg) {
            echo "Received Msg: ".$msg['Body'];

            // Do something useful with $msg['Body'] here

            $res = $client->deleteMessage(array(
                'QueueUrl'      => $url,
                'ReceiptHandle' => $msg['ReceiptHandle']
            ));
        }
    }
} 
```

WaitTimeSeconds 参数意味着进行“长轮询”并具有各种好处（请参阅[http://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/sqs-long-polling.html](http://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/sqs-long-polling.html)）。

您应该使用 supervise 或 monit 来确保您的工作线程保持运行。

更新：对于 api v3 使用 get() 而不是 getPath() - getPath 现在已弃用

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-28T19:09:42.033

没有代码..但是一个例子（基本上解释了图表）。

你有一个人们可以上传视频的网站。您想将每个视频转换为 .mp4（或者 .flv，如果您是那种人）。

转码（为了争论）每个视频需要 1 分钟。您不想在与上传相同的 HTTP / PHP 请求中执行此操作，因为视频返回需要 1 分钟，这意味着许多视频可能在任何给定时刻都在网络服务器上进行转码。

相反，您需要的是 100% 负责转码的独立机器/实例。他们获得“工作”并按顺序处理它们（队列）。我们称他们为工人。

那么，您将如何从您的网络服务器传达工作人员应该开始转码的信息。一种方法是设置工作人员每 x 秒检查一次的数据库记录。

这不是一个伟大的设计。通常，每当您必须求助于轮询时，您都在为更有效的方法开发解决方法。

在 PHP 世界中，一种方法是使用 Gearman。或者，ZeroMQ、RabbitMQ，但 Gearman 是相当流行的 PHP 解决方案。在 AWS 世界中，他们提供 SQS。负责一件事：

在 1 端推送消息。在此示例中，这些是来自网络服务器的作业。在另一端等待新消息。在这个例子中，这些是等待工作的工人。

SQS 的好处是您可以在一端添加工作人员，在另一端添加网络服务器。SQS 确保只有 1 个工作人员收到消息。所以它符合水平缩放范式（假设 SQS 本身水平缩放）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-28T13:57:31.060

问题是，根据给定图像使用 SQS 的目的是什么。我将根据您在问题中提到的如何使用 SQS 给出一个高层次的想法[。](http://awsmedia.s3.amazonaws.com/catalog/images/159-for-madhu.png)

SQS 只是进程使用的缓冲区，用于处理它们获得的负载，因为当多个请求同时出现时，某些进程可能会不堪重负。我将根据给定的图像逐步解释图像。它看起来像一个照片处理服务器，用户上传照片，用户将返回处理后的照片。

**第 1 步**：用户将照片上传到`web-server`，并将其存储在 S3 中。同时，请求被发送到`Request Queue`（可能包含队列的位置）。这个过程发生在所有用户请求上。

**第 2 步**：`Photo processing server`将轮询 SQS 并检查是否有任何传入请求。接受一个请求（其中包含图像在 S3 上的位置）并从 S3 获取图像并对其进行处理。

**第三步**：处理后的图片会被存储在S3中`Photo Processing Server`，并将其url发送到`Response Queue`。将`Web Server`轮询`Response Queue`并将下载 URL 提供给用户。因此用户可以从 S3 下载处理后的图像。

这是图像中 SQS 的一种可能用例。根据您的代码，您确实不需要 SNS。Web Server 可以简单的上传到 S3，S3 可以在 SQS 中发布上传事件。（[读这个](https://docs.aws.amazon.com/AmazonS3/latest/dev/NotificationHowTo.html)）。这也可以通过响应队列来完成。

这就是在 SQS 用于此任务的灰色区域中发生的情况。

# c# - 如何解析这个 HTML 以获得我想要的内容？

> ID：11250692
> 
> 赞同：4
> 
> 时间：2012-06-28T18:23:14.473
> 
> 标签：c#, html, parsing

我目前正在尝试解析 HTML 文档以检索其中的所有脚注；该文件包含几十个。我真的不知道用来提取我想要的所有内容的表达式。问题是，类（例如“calibre34”）在每个文档中都是随机的。查看脚注所在位置的唯一方法是搜索“隐藏”，然后它总是文本，并用 < /td> 标记关闭。下面是 HTML 文档中脚注之一的示例，我想要的只是文本。有任何想法吗？多谢你们！

```
<td class="calibre33">1.<span><a class="x-xref" href="javascript:void(0);">
[hide]</a></span></td>
<td class="calibre34">
Among the other factors on which the premium would be based are the
average size of the losses experienced, a margin for contingencies,
a loading to cover the insurer's expenses, a margin for profit or
addition to the insurer's surplus, and perhaps the investment
earnings the insurer could realize from the time the premiums are
collected until the losses must be paid.</td> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T19:13:10.353

使用[HTMLAgilityPack](http://htmlagilitypack.codeplex.com)加载 HTML 文档，然后使用此 XPath 提取脚注：

> //td[text()='[hide]']/following-sibling::td

基本上，它所做的是首先选择所有`td`包含的节点，`[hide]`然后最后选择它们的下一个兄弟节点。所以接下来`td`。一旦你有了这个节点集合，你就可以提取它们的内部文本（在 C# 中，在 HtmlAgilityPack 中提供支持）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T19:44:16.033

使用 MSHTML 解析 HTML 源代码怎么样？这是演示代码。享受吧。

```
public class CHtmlPraseDemo
{
    private string strHtmlSource;
    public mshtml.IHTMLDocument2 oHtmlDoc;
    public CHtmlPraseDemo(string url)
    {
        GetWebContent(url);
        oHtmlDoc = (IHTMLDocument2)new HTMLDocument();
        oHtmlDoc.write(strHtmlSource);
    }
    public List<String> GetTdNodes(string TdClassName)
    {
        List<String> listOut = new List<string>();
        IHTMLElement2 ie = (IHTMLElement2)oHtmlDoc.body;
        IHTMLElementCollection iec = (IHTMLElementCollection)ie.getElementsByTagName("td");
        foreach (IHTMLElement item in iec)
        {
            if (item.className == TdClassName)
            {
                listOut.Add(item.innerHTML);
            }
        }
        return listOut;
    }
    void GetWebContent(string strUrl)
    {
        WebClient wc = new WebClient();
        strHtmlSource = wc.DownloadString(strUrl);
    }

}

class Program
{
 static void Main(string[] args)
    {
        CHtmlPraseDemo oH = new CHtmlPraseDemo("http://stackoverflow.com/faq");

        Console.Write(oH.oHtmlDoc.title);
        List<string> l = oH.GetTdNodes("x");
        foreach (string n in l)
        {
            Console.WriteLine("new td");
            Console.WriteLine(n.ToString());

        }

        Console.Read();
    }
} 
```

# java - Java 的 System.getRuntime().exec 的行为不像 shell 用户调用它

> ID：11250696
> 
> 赞同：1
> 
> 时间：2012-06-28T18:23:35.243
> 
> 标签：java, sendmail, runtime.exec

我正在 HP-UX 机器上从控制台运行 java 应用程序。在其中，我生成一些报告，压缩它们，然后通过电子邮件发送它们。一切正常，除了电子邮件。

我正在使用邮件二进制文件从命令行发送邮件。由于它是 HP-UX，它与标准的 GNU sendmail 有点不同。

这是我用来发送邮件的代码：

```
 public static void EmailReports(String[] recipients, String reportArchive, String subject){
        SimpleDateFormat dateFormat = new SimpleDateFormat("MM-dd-yyyy");
        String today = dateFormat.format(new Date());

        File tempEmailFile;
        BufferedWriter emailWriter;
        try {
            tempEmailFile = File.createTempFile("report_email_" + today, "msg");
            emailWriter = new BufferedWriter(new FileWriter(tempEmailFile));
        } catch (IOException e) {
            e.printStackTrace();
            System.out.println("Failed to send email. Could not create temporary file.");
            return;
        }

        try {
            emailWriter.write("SUBJECT: " + subject + "\n");
            emailWriter.write("FROM: " + FROM + "\n");
            emailWriter.write(BODY + "\n"); 
            emailWriter.close();
        } catch (IOException e) {
            e.printStackTrace();
            System.out.println("Failed to send email. Could not write to temporary file.");
        }

        //read the archive in
        try {
            FileInputStream archiveIS = new FileInputStream(new File(reportArchive));
            OutputStream archiveEncoder = MimeUtility.encode(new FileOutputStream(tempEmailFile, true), "uuencode", Zipper.getArchiveName(reportArchive));

            //read archive
            byte[] buffer = new byte[archiveIS.available()];    //these should never be more than a megabyte or two, so storing it in memory is no big deal.
            archiveIS.read(buffer);

            //encode archive
            archiveEncoder.write(buffer);

            //close both
            archiveIS.close();
            archiveEncoder.close();

        } catch (FileNotFoundException e) {
            System.out.println("Failed to send email. Could not find archive to email.");
            e.printStackTrace();
        } catch (MessagingException e) {
            System.out.println("Failed to send email. Could not encode archive.");
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
            System.out.println("Failed to send email. Could not encode archive.");
        }
        System.out.println("Sending '" + subject + "' email.");     

        try {
            Process p = Runtime.getRuntime().exec("mail me@example.com < " + tempEmailFile.getAbsolutePath());
            System.out.println("mail me@example.com < " + tempEmailFile.getAbsolutePath());

            StringBuffer buffer = new StringBuffer();
            while(p.getErrorStream().available() > 0){
                buffer.append((char) p.getErrorStream().read());
            }

            System.out.println("STDERR: " + buffer.toString());

            buffer = new StringBuffer();
            while(p.getInputStream().available() > 0){
                buffer.append((char) p.getInputStream().read());
            }

            System.out.println("STDOUT: " + buffer.toString());
        } catch (IOException e) {
            e.printStackTrace();
            System.out.println("Failed to send email. Could not get access to the shell.");
        }
    } 
```

当我运行程序并发送电子邮件时，我收到一封空白电子邮件，没有主题、没有正文、没有附件，它来自 HP-UX 框中的 user@hostname，而不是来自`FROM`.

但是，当我运行它运行的同一行时（请参阅我调用 exec 后打印出的命令），我会从正确的用户那里收到正确的电子邮件，其中包含主题、正文和附件。

STDOUT 和 STDERR 都是空的。就好像我正在向邮件发送一个空白文件，但是当我在调用 exec 之前打印文件时，它就在那里。

这里发生了什么？

编辑：尝试：

使用 Ksh：

```
 try {
        String cmd = "mail me@example.com.com < " + tempEmailFile.getAbsolutePath();            
        Runtime.getRuntime().exec(new String[] {"/usr/bin/ksh", cmd});

    } catch (IOException e) {
        e.printStackTrace();
        System.out.println("Failed to send email. Could not get access to the shell.");
    } 
```

使用标准输入：

```
 try {
        System.out.println("mail me@example.com < " + tempEmailFile.getAbsolutePath());

        Process p = Runtime.getRuntime().exec("mail me@example.com ");

        FileInputStream inFile = new FileInputStream(tempEmailFile);
        byte[] byteBuffer = new byte[inFile.available()];
        inFile.read(byteBuffer);
        p.getOutputStream().write(byteBuffer);

        inFile.close();
        p.getOutputStream().close();

        StringBuffer buffer = new StringBuffer();
        while(p.getErrorStream().available() > 0){
            buffer.append((char) p.getErrorStream().read());
        }

        System.out.println("STDERR: " + buffer.toString());

        buffer = new StringBuffer();
        while(p.getInputStream().available() > 0){
            buffer.append((char) p.getInputStream().read());
        }

        System.out.println("STDOUT: " + buffer.toString());
    } catch (IOException e) {
        e.printStackTrace();
        System.out.println("Failed to send email. Could not get access to the shell.");
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T18:30:05.877

我强烈怀疑问题是重定向。这通常由外壳处理 - 这里没有外壳。

*您需要正常执行该进程，然后获取该进程的标准输入流并从 Java 写入，*或者**（*可能更简单）运行`/bin/sh`（或其他）以让 shell 进行重定向。*

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T19:42:47.460

尝试执行`{ "ksh", "-c", "mail me@example.com < " + etc }`。该`-c`选项专门告诉外壳程序将下一个参数解析为带有可能重定向等的外壳程序命令。如果没有`-c`, ksh 会遵循启发式方法来决定如何处理其命令行，并且它可能不会以您希望的方式运行命令。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T18:44:54.220

分成两行，以获得更好的可读性：

```
 String cmd = "mail me@example.com < " + tempEmailFile.getAbsolutePath () ;
        Process p = Runtime.getRuntime().exec (cmd); 
```

这将寻找一个名为`"mail me@example.com < " + tempEmailFile.getAbsolutePath ()`. 它不会进行重定向 - 为此，您必须自己阅读该过程的输出。

此外，它不会查找路径，因此您可能必须指定整个路径 /usr/bin/mail 或其他任何路径。

你必须拆分命令和参数；改用字符串数组： ("/path/to/prg", "param1", "param2", "foo=bar");

如果您将脚本作为程序调用，则可以使用重定向，例如

```
String cmd = "/usr/bin/mail me@example.com < " + tempEmailFile.getAbsolutePath () ;
String cmdarr = new String [] {"/bin/bash", "-c", cmd}; 
Process p = Runtime.getRuntime().exec (cmdarr); 
```

它比自己从 Java 调用文件重定向更短，更简单，但是您失去了对不同错误做出明智反应的能力。*

# makefile - 为什么我的 make 文件没有留下目标文件？

> ID：11250700
> 
> 赞同：1
> 
> 时间：2012-06-28T18:23:41.327
> 
> 标签：makefile

我是制作文件的新手，我通过一些试验和错误把它放在一起。此代码用于编译我的 c++ 程序。

我的 main.cpp 文件与 makefile 位于同一文件夹中。我有一个 lib/ 文件夹，其中包含主要依赖的标题。

下面的 makefile 可以正确且完整地编译我的代码。但我期待我会找到留下的 *.o 对象。（请注意，我尝试使用和不使用“干净”规则，并且两次都得到相同的结果。）

```
#
# Makefile
#

CXX = g++
CCFLAGS = -O3 -I/sw/include -L/sw/lib
      ## /sw/include and /sw/lib contain dependencies for files in my lib/
LDFLAGS = -lpng
OPTS = $(CCFLAGS) $(LDFLAGS)

SOURCES = $(wildcard lib/*.cpp) main.cpp
OBJECTS = $(SOURCES: .cpp = .o)
TARGET = spirals

$(TARGET): $(OBJECTS)
    $(CXX) $(OPTS) $^ -o $@

.PHONY: depend
depend:
    g++ -MM $(SOURCES) > depend
      ## generate dependencies list
include depend

.PHONY: clean
clean:
    rm -f *.o lib/*.o $(TARGET) 
```

另外，如果重要的话，我在 MacOSX 上，我的程序是用 xcode 设计的。（我知道 xcode 有自己的构建流程，但我正在为 linux 系统设计一个命令行程序，我想在 bash 环境中测试编译和链接，而不仅仅是通过 xcode。）

问题：

1.  一旦创建了主要目标，我期望 makefile 生成 *.o 文件是否正确？

2.  如果是这样，为什么我的 makefile 不这样做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T21:22:16.990

如果您观察您的`$(TARGET)`规则导致运行的命令：

```
g++ -O3 -I/sw/include -L/sw/lib -lpng lib/bar.cpp lib/foo.cpp main.cpp -o spirals 
```

您会看到它`$(OBJECTS)`实际上包含 *.cpp 文件，并且没有 *.o 文件存在，因为您没有要求任何文件。

问题在这里：

```
OBJECTS = $(SOURCES:.cpp=.o) 
```

在您编写的 GNU makefile 中，此替换引用是用多余的空格编写的，因此永远不会匹配任何内容并且`$(OBJECTS)`最终与`$(SOURCES)`. 像上面那样重写它，它会做你所期望的。

（其他注意事项：`-lpng`通常需要在链接命令的末尾才能工作，所以你应该引入另一个 make 变量（传统上称为`$(LDLIBS)`）以便安排它。特别是作为 makefile 的新手，你最好拼出您的依赖项明确而不是使用`$(wildcard)`和计算`$(OBJECTS)`. `-I`选项在编译期间需要，而`-L`在链接期间使用选项，因此最好安排单独的`$(CXXFLAGS)`/`$(LDFLAGS)`变量在单独的规则中使用，以便仅在需要时添加它们。）

# javascript - 为什么 typeof 不是方法？

> ID：11250702
> 
> 赞同：2
> 
> 时间：2012-06-28T18:23:55.477
> 
> 标签：javascript

出于好奇， typeof 不是常规方法或函数，而是将其放在变量或数据前面的原因是什么。

他们这样做： `var something = typeof somethingElse;`

而不是： `var something = somethingElse.typeof();`

此外，引用 typeof 和 var 关键字的正确术语是什么？他们是运营商吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-28T18:28:57.360

是的，是一元运算符，`typeof`如`+`、`-`、`~`和。另一方面，它是变量声明语句的一部分，并且没有花哨的名称。`!``void``var`

我猜它没有成为一种方法的原因是双重的：

1.  您可以在`null`和上使用它`undefined`。
2.  您可以在未声明的变量上使用它而不会出错。

如果它是一个常规方法，那么它们都不会起作用，并且为特定方法看起来的东西添加特殊例外是混乱的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T18:26:44.707

Mozilla 文档将 typeof 称为运算符。根据他们的[文档](https://developer.mozilla.org/en/JavaScript/Reference/Operators/typeof)：

> typeof 运算符返回一个字符串，指示未计算的操作数的类型。

请注意，他们称之为什么并不重要，它是 ECMA 规范所称的。

根据 Mozilla 的文档，运算符的类型在 JavaScript 1.1 和 ECMA 版本中定义：ECMA-262（以及 E4X 对象的 ECMA-357）

如果您有兴趣，请参阅[5.1 版的 ECMA 262 规范](http://www.ecma-international.org/ecma-262/5.1/Ecma-262.pdf)（警告 - pdf 链接）在第 71 页的第 11.4.3 节中查看 typeof 运算符。

# javascript - 如何在不循环的情况下选择 Jquery/Javascript 中预定义选择的第一个和最后一个元素？

> ID：11250704
> 
> 赞同：0
> 
> 时间：2012-06-28T18:24:08.677
> 
> 标签：javascript, jquery, jquery-mobile, jquery-selectors, filter

我有一个 Jquery Mobile[可折叠集](http://jquerymobile.com/demos/1.1.0/docs/content/content-collapsible-set.html)，它可以有任意数量的“抽屉”。JQM 像这样分配角点：

```
 collapsibleHeading.find("a").first()
      ...
      .add( ".ui-btn-inner", $el )
         .addClass( "ui-corner-top ui-corner-bottom" ) 
```

我想为可折叠添加一个水平选项，因此它也可以像标签框一样工作。我已经准备好了 CSS，但是**单个语句**中的角落很难......

我需要检查方向，我正在这样做：

```
 (o.directon) == true/false 
```

这就是我所拥有的：

```
// predefine classes for HORIZONTAL(first,last,rest) and VERTICAL
baseCorners = o.direction == "horizontal" ? [ "ui-corner-tl", "ui-corner-tr", "" ] : ["ui-corner-top", "ui-corner-top", "ui-corner-top"],
toggleCorners = o.direction == "horizontal" ? [ "ui-corner-bl", "ui-corner-br", "" ] : ["ui-corner-bottom","ui-corner-bottom","ui-corner-bottom" ], 
```

所以现在我可以分配**baseCorners**和**toggleCorners**而不必担心方向。

我的问题：如何为第一个/最后一个/剩余的可折叠项添加检查/过滤器，以便我可以在一个语句中运行它，如下所示：

```
 collapsibleHeading.find("a").first()
      ...
      .add( ".ui-btn-inner", $el )
         .addClass( "if-first" ? baseCorners[0] : "elseif-last" ? baseCorners[1] "else" baseCorners[2] + "same for toggleCorners" ) 
```

**问题**：
我迷路了……知道这是否可能吗？感谢帮助。

**编辑：**
这就是我现在所拥有的：

```
.filter(":first")
    .add( ".ui-btn-inner", $el )
        .addClass( baseCorners[0] + toggleCorners[0] ).end()
.filter(":last")
    .add( ".ui-btn-inner", $el )
        .addClass( baseCorners[1] + toggleCorners[1] ).end()
.not(':first').not(':last')
        .add( ".ui-btn-inner", $el )
            .addClass( baseCorners[2] + toggleCorners[2] ); 
```

虽然不确定这是最可行的解决方案

**解决方案：**
感谢大家的帮助。这就是我最后的做法。一旦我设置了建议的解决方案，我发现 JQM 为每个元素运行脚本，所以我不能使用循环，因为每次运行时，只有 1 个元素需要循环。

这样它的工作原理：

```
 // if not horizontal, I always assign the same class
 baseCorners = o.direction == "horizontal" ? [ "A", "B", "C" ] : ["D", "D", "D"],
 toggleCorners = o.direction == "horizontal" ? [ "E", "F", "G" ] : ["H","H","H" ],
 // get position of current element and calculate trigger
 collIndex = $('div:jqmData(role="collapsible-set") div:jqmData(role="collapsible") h3').index(collapsibleHeading),
 collTrigg = collIndex == 0 ? 0 : collIndex == $('div:jqmData(role="collapsible-set") div:jqmData(role="collapsible")').length-1 ? 1 : 2; 
```

使用这种设置，第一个元素总是得到索引 0，最后一个总是索引 1 以及索引 2 之间的所有内容，所以我对两者之间的元素数量保持灵活。

那么它只是：

```
 $el.add( ".ui-btn-inner", $el )
      .addClass( baseCorners[collTrigg] + toggleCorners[collTrigg] ); 
```

好的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T18:46:17.663

这应该是一样的。这并不是说它的代码少了很多，但它避免了重复，因此应该更容易维护。

```
selection.each(function(i,e) {

    var el = $(e),
        index = i===0 ? 0 :
            i===selection.length-1 ? 1 : 
            2;

    el.add( ".ui-btn-inner", $el )
        .addClass( baseCorners[index] + toggleCorners[index] );

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T19:18:53.000

我正要使用“i”变量发布对频繁回答的更改，但他们只是更新了他们的答案来做到这一点。所以我想我会根据频繁的原始答案发布一个答案：

[http://jsfiddle.net/8gYcL/1/](http://jsfiddle.net/8gYcL/1/)

它绝对不如检查“i”变量那么有效，但我想向您展示如何使用它:)

# c++ - 多态命令解析器设计

> ID：11250710
> 
> 赞同：4
> 
> 时间：2012-06-28T18:24:30.417
> 
> 标签：c++

希望对我正在尝试锻炼的这个问题提出一些意见。我正在尝试改善我的 OO 体验并充分利用 C++ 的多态功能。我正在尝试为基本命令解析器编写一些代码。他们的命令结构是这样的：

[命令名称] [参数]

命令名称将仅限于一个单词字符串。参数可以是 0 到 N 的字符串列表。

每个命令和参数列表都可以指向我系统中的任何种类的软件对象。因此，例如，我可以将 rtp statistics 命令映射到我的 rtp 模块，将用户统计信息映射到我的用户模块。类似的东西。

现在，我的 CLI 的入口点将整个命令字符串作为标准字符串提供。它提供了一个标准的输出流，用于向用户显示结果。

我真的想避免使用解析器函数，然后执行 if then else 之类的交易。所以我在想这样的事情：

1.  我会有一个名为命令的基类。它的构造函数将采用字符串命令、标准输出和需要与之交互的对象的接口。
2.  我将创建一个命令工厂，它将命令名称与处理它的对象相匹配。这将为正确的命令实例化正确的命令对象。
3.  每个单独的命令对象都会解析给定的参数并为此命令做出正确的选择。

我正在努力解决的是如何将正确的模块提供给正确的命令。这是我应该使用模板参数的地方吗？这样每个命令都可以采用任何接口，我会让工厂决定将哪个模块传递给命令对象？

我也对其他意见持开放态度。我只是在努力学习，希望社区能给我一些提示:-)。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T19:24:34.297

您正在寻找的是 OOP 中的常见模式。 [*设计模式*](http://en.wikipedia.org/wiki/Design_Patterns) （四人合一书）将此称为[命令模式](http://en.wikipedia.org/wiki/Command_pattern)。

通常不需要模板。一切都在运行时解析和分派，因此动态多态性（虚拟函数）可能是更好的选择。

在另一个答案中，Rafael Baptista 提出了基本设计。以下是我将如何修改他的设计以使其更完整：

## 命令对象和 CommandDispatcher

命令由类的子类处理`Command`。`CommandDispatcher`命令由处理命令字符串的基本解析（基本上，在空格处拆分，可能处理带引号的字符串等）的对象调度。

系统使用 注册一个实例`Command`，`CommandDispatcher`并将每个实例`Command`与一个命令名称 ( `std::string`) 相关联。关联由一个`std::map`对象处理，尽管它可以被一个哈希表（或类似的结构来关联键值对）替换。

```
class Command
{
  public:
    virtual ~Command(void);
    virtual void execute(FILE* in, const std::vector<std::string>& args) = 0;
};

class CommandDispatcher
{
  public:
    typedef std::map<std::string, Command*> CommandMap;

    void registerCommand(const std::string& commandName, Command* command)
    {
      CommandMap::const_iterator cmdPair = registeredCommands.find(commandName);
      if (cmdPair != registeredCommands.end())
      {
        // handle error: command already registered
      }
      else
      {
        registeredCommands[commandName] = command;
      }
    }

    // possibly include isRegistered, unregisterCommand, etc.

    void run(FILE* in, const std::string& unparsedCommandLine); // parse arguments, call command
    void dispatch(FILE* in, const std::vector<std::string>& args)
    {
      if (! args.empty())
      {
        CommandMap::const_iterator cmdPair = registeredCommands.find(args[0]);
        if (cmdPair == registeredCommands.end())
        {
          // handle error: command not found
        }
        else
        {
          Command* cmd = cmdPair->second;
          cmd->execute(in, args);
        }
      }
    }

  private:
    CommandMap registeredCommands;
}; 
```

我已经省略了解析和其他细节，但这是命令模式的一种非常常见的结构。请注意`std::map`句柄如何将命令名称与命令对象相关联。

## 注册命令

要使用这种设计，您需要在系统中注册命令。您需要在或另一个中心位置`CommandDispatcher`使用[单例](http://en.wikipedia.org/wiki/Singleton_pattern)模式实例化 。`main`

然后，您需要注册命令对象。有几种方法可以做到这一点。我更喜欢的方式是让每个模块（相关命令集）提供自己的注册功能，因为您拥有更多控制权。例如，如果您有一个“文件 IO”模块，那么您可能有一个函数`fileio_register_commands`：

```
void fileio_register_commands(CommandDispatcher* dispatcher)
{
  dispatcher->registerCommand( "readfile", new ReadFileCommand );
  dispatcher->registerCommand( "writefile", new WriteFileCommand );
  // etc.
} 
```

这里`ReadFileCommand`和是实现所需行为`WriteFileCommand`的子类。`Command`

您必须确保`fileio_register_commands`在命令可用之前调用。

这种方法可以用于动态加载的库（DLL 或共享库）。确保注册命令的函数具有基于模块名称的常规模式：`XXX_register_commands`，`XXX`例如，小写的模块名称。加载共享库或 DLL 后，您的代码可以确定是否存在这样的函数，然后调用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T18:38:03.063

模板是多余的。我想您想要命令解释器仅从可用对象中找出可能的命令的东西。

对于每个想要支持这个 CLI 的类，我会给它一个注册类的函数，以及触发该类的命令名称。

```
class CLIObject
{
   virtual void registerCli( Cli& cli ) = 0;
   virtual bool doCommand( FILE* file, char** args ) = 0;
}

class HelloWorld : public ClIObject 
{
   void registerCli( Cli& cli ) { cli.register( this, "helloworld" ); }
   bool doCommand( FILE* file, char** args ) 
   { 
       if ( !args[0] ) return false;     
       fprintf( file, "hello world! %s", args[0] ); 
       return true; 
   }
} 
```

现在您的 cli 可以支持从 CLIObject 派生的任何类。

# android - Android：ADB 安装问题，无法在内存中分配

> ID：11250716
> 
> 赞同：0
> 
> 时间：2012-06-28T18:24:58.847
> 
> 标签：android, installation, adb, assets, ram

嗨，我正在尝试将 2 GB 大小的 APK 安装到具有 1 GB RAM 的设备上。我猜那是因为您不能在 1 GB 内分配 2 GB。我只想确认这是否正确，因为我不知道 adb install 是如何工作的，但常识告诉我我是对的……我是第一次处理这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T18:28:29.890

RAM 是程序运行的地方。APK 驻留在手机内存（或）SD 卡中。可能是那个尺寸还不够。如果是 RAM 问题，您将看到运行时错误。

# linux - 如何在shell脚本中找到已安装目录的nfs文件夹

> ID：11250721
> 
> 赞同：0
> 
> 时间：2012-06-28T18:25:08.270
> 
> 标签：linux, nfs

我正在尝试找到 linux 命令的解决方案。

我有一个文件夹，它安装到一个 nfs 共享。

文件夹名称是 /root/user1 （可以说）

如果我这样做 $ df /root/users1 Filesystem 1K-blocks Used Available Use% Mounted on server-1:/root/master_folder 22222 456324 3167 2% /root/users1

从这个命令我只对 nfs 服务器名称感兴趣，nfs 位置在这种情况下是 server-1:/root/master_folder

我如何在 bash 脚本中实现这一点？任何指针表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T18:32:25.053

尝试

`df /root/user1 | sed '1d' - | cut -d" " -f1`

# django - 通过多个表单域进行搜索？

> ID：11250727
> 
> 赞同：1
> 
> 时间：2012-06-28T18:25:25.807
> 
> 标签：django, django-models

我正在显示一个带有 4 个文本框的页面，每个文本框都将用户输入的值存储到一个单独的变量中。我的数据库有 4 列，每列对应一个文本框的变量。

我想这样做：用户可以在 1、2、3 或所有 4 个文本框中输入值，我想根据他们输入的每个值修剪搜索结果。每个文本框都是可选的。

我该怎么做呢？我是 Django 的新手，我只知道如何使用一个搜索词进行搜索。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T18:32:07.170

我认为你需要 Q 对象。请参阅：[https ://docs.djangoproject.com/en/dev/topics/db/queries/#complex-lookups-with-q-objects](https://docs.djangoproject.com/en/dev/topics/db/queries/#complex-lookups-with-q-objects)

从文档：

```
Poll.objects.get(
    Q(question__startswith='Who'),
    Q(pub_date=date(2005, 5, 2)) | Q(pub_date=date(2005, 5, 6))
) 
```

转换为：

```
SELECT * from polls WHERE question LIKE 'Who%'
     AND (pub_date = '2005-05-02' OR pub_date = '2005-05-06') 
```

您可以从清理后的表单中填充 Q 查询 - 您甚至可能想要覆盖 clean() 并以这种方式返回查询集，以便您可以从经过验证的表单中访问查询集。

# python - 为每个用户 python 创建唯一的个人资料页面

> ID：11250728
> 
> 赞同：1
> 
> 时间：2012-06-28T18:25:27.317
> 
> 标签：python, html, google-app-engine, jinja2, user-profile

我在 python 中使用带有 Jinja2 模板引擎的谷歌应用引擎。

这可能是一个愚蠢的解决方案，但我有一个几千名用户的列表，现在他们只能访问自己的个人资料页面，并且必须登录才能这样做。我想为每个用户的个人资料页面提供一个唯一的 URL，我想知道该怎么做。我不确定这是否可行，但这样的事情是否可行？

```
class ProfilePage
    userlist = GQL query to return all users in the system
    user = users.get_by_id()
    for user in userlist:
        id = user.federated_id

        posts = GQL query to return all posts by that user

        self.render('/profile/id', posts=posts)

app = webapp2.WSGIApplication([('/', MainPage),
                               ('/profile/([0-9]+)', ProfilePage),]) 
```

我的个人资料页面的 HTML 只显示用户的姓名，然后显示他们最近发布的所有帖子。

更新：

所以这是我当前的代码，但我只是收到 404 错误：

```
class ProfilePage(webapp2.RequestHandler):
  def get(self, profile_id):
    user = User.get_by_id(profile_id)
    #profile_id = some unique field
    if user:
       #Get all posts for that user and render....
       theid = user.theid
       personalposts = db.GqlQuery("select * from Post where theid =:1 order by created desc limit 30", theid)
    else:
        personalposts = None
    global visits
    logout = users.create_logout_url(self.request.uri)
    currentuser = users.get_current_user()
    self.render('profile.html', user = currentuser, visits = visits, logout=logout, personalposts=personalposts) 
```

我该如何测试它我尝试输入 www.url.com/profile/https://www.google.com/accounts/o8/id?id=AItOawlILoSKGNwU5RuTiRtXug1l8raLEv5-mZg

更新：我检索的 ID 不是他们的 OpenID URL，而是为每个用户提供的特定于应用程序的 ID，因此使用正确

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T19:16:55.587

一个简单的方法是为每个用户分配一个唯一的 URL 标识符（或使用他们的键名），这样您就可以通过他们的 ID 查询用户或基于唯一的 URL 标识符属性进行查询。如果需要，您也可以使用他们的 federated_id。

例子：

```
class User(ndb.Model):
  unique_identifier = ndb.StringProperty()
  ...

class ProfilePage(webapp2.RequestHandler):
  def get(self, profile_id):
    #profile_id = key name of user
    user = User.get_by_id(profile_id)
    #profile_id = some unique field
    #user = User.query(User.unique_identifier == profile_id).get()
    if user:
       #Get all posts for that user and render....

app = webapp2.WSGIApplication([('/', MainPage),
                               ('/profile/<profile_id>', ProfilePage),]) 
```

# php - Yii CGridView 按 id 排序

> ID：11250729
> 
> 赞同：0
> 
> 时间：2012-06-28T18:25:32.480
> 
> 标签：php, yii

您好，我需要按 id DESC 对 cgridview 数据表进行排序，我该怎么做？

我的错误代码：

```
public function search()
    {
        // Warning: Please modify the following code to remove attributes that
        // should not be searched.

        $criteria=new CDbCriteria;

        $criteria->compare('ID',$this->ID);
        $criteria->compare('name',$this->name,true);

        return new CActiveDataProvider($this, array(
            'criteria'=>$criteria,
            'sort'=>array(
                    'ID'=>array(
                        'desc'=>'ID DESC',
                    ),
            ),
        ));
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T18:31:17.857

尝试更接近：

```
$criteria=new CDbCriteria;

$criteria->compare('ID',$this->ID);
$criteria->compare('name',$this->name,true);
$criteria->order = 'ID DESC';

$dataProvider=new CActiveDataProvider('Nameofclass', array(
    'criteria'=>$criteria
)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-02T14:52:09.973

在您的类中在您的 search() 下添加此行，以按 id 降序显示记录。

$criteria->order = 'ID DESC';

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T22:52:45.347

也可以使用[defaultSort](http://www.yiiframework.com/doc/api/1.1/CSort#defaultOrder-detail)来设置默认

```
$criteria=new CDbCriteria;

$criteria->compare('ID',$this->ID);
$criteria->compare('name',$this->name,true);   

$dataProvider=new CActiveDataProvider('Nameofclass', array(
    'criteria'=>$criteria,
    'sort'=>array(
        'defaultOrder'=>'ID DESC',
    ),
)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-20T20:44:59.227

```
 $criteria = new CDbCriteria;
    $criteria->compare('id', $this->id);
    $criteria->compare('date', $this->date, true);
    $criteria->compare('last', $this->last, true);
    $criteria->compare('first', $this->first, true);
    //$criteria->order = 'id DESC'; // thats not works, if you use CSORT

    return new CActiveDataProvider($this, array(
        'criteria' => $criteria,
        'pagination' => array(
            'pageSize' => 20
        ),
        'sort' => array(
                'attributes' => array(
                     'id' => array("asc" => 'id', "desc" => 'id desc'),
                     'last' => array("asc" => 'last', "desc" => 'last desc'),
                     'first' => array("asc" => 'first', "desc" => 'first desc'),
                     'date' => array("asc" => 'date', "desc" => 'date desc'),
                ),//attributes array
               'defaultOrder' => 'id DESC',//thats the clue, defaultOrder is on the sort array
        ),//sort array
      )); 
```

# asp.net-mvc - 按成员资格输出缓存？

> ID：11250734
> 
> 赞同：1
> 
> 时间：2012-06-28T18:26:06.850
> 
> 标签：asp.net-mvc, caching, outputcache

我只是在阅读`OutputCache`，我看到了如何`VaryByParam`根据发送到视图的参数申请更改缓存，但我想根据参数和当前登录的用户（使用 Asp.Nets默认成员）。我一直在环顾四周，但我似乎无法找到一种方法来让它工作。

关于我应该尝试什么的任何建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T18:29:56.623

使用 VaryByCustom。我实现了这样的东西：

```
[OutputCache(VaryByCustom="user")]
public ActionResult SomeAction()
{
    return View();
} 
```

在 Global.asax.cs 中

```
public override string GetVaryByCustomString(HttpContext context, string arg)
{
    if (arg == "user")
    {
        return context.Request.User.Identity.IsAuthenticated ? context.Request.User.Identity.Name : string.Empty;
    }

    return base.GetVaryByCustomString(context, arg);
} 
```

# ruby-on-rails - 这是通过控制器进行批量分配的安全方法吗？

> ID：11250735
> 
> 赞同：1
> 
> 时间：2012-06-28T18:26:13.857
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

出于安全原因，我决定采用不同的方法进行批量分配，并想知道这是否是在控制器内部进行的安全方法？

```
QuestionsController

def new
  @survey = Survey.find(params[:survey_id])
  @question = Question.new
end

def create
  @survey = Survey.find(params[:survey_id])
  @question = @survey.questions.new
  @question.title = params[:question][:title]
  @question.description = params[:question][:description]

  if @question.save
    redirect_to new_survey_question_path
  else
    render :new
  end
end 
```

他们可以更改`survey_id`或任何其他列`question`吗？除了使用之外，他们是更好的方法`attr_accessible`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T18:48:45.580

好的，你可以做类似的事情..

```
enabled_attributes = [:title, :description]
params[:question].delete_if {|k, v| !enabled_attributes.include?(k) }
@question = @survey.questions.new(params[:question]) 
```

这将从 params[:question] 散列中删除所有不在启用数组中的属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T19:09:19.150

```
@question.title, @question.description = 
  params[:question].values_at(:title, :description) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T19:20:16.620

使用 Ruby 1.9，您可以使用 select 方法稍微简化 iwiznia 的解决方案。

```
enabled_attributes = [:title, :description] 
@question = @survey.questions.new(params[:question].
              select {|k, v| enabled_attributes.include?(k)}) 
```

# ruby-on-rails - Rails ActiveMerchant - Paypal Express 结帐错误

> ID：11250738
> 
> 赞同：1
> 
> 时间：2012-06-28T18:26:29.797
> 
> 标签：ruby-on-rails, ruby-on-rails-3, paypal, activemerchant

调用此代码时出现此错误。

```
response = EXPRESS_GATEWAY.setup_purchase(order.price_in_cents,
  :ip                => request.remote_ip,
  :return_url        => url_for(:action => :create, :only_path => false),
  :cancel_return_url => root_path
)

redirect_to EXPRESS_GATEWAY.redirect_url_for(response.token) 
```

错误：

```
This transaction is invalid. Please return to the recipient's website to complete your transaction using their regular checkout flow. 
```

为了显示我正确设置了 EXPRESS_GATEWAY。代码 development.rb 文件。

```
config.after_initialize do
  ActiveMerchant::Billing::Base.mode = :test
  paypal_options = {
    :login => '*****************************',
    :password => '*************',
    :signature => '*******************************************************'
  }
  ::EXPRESS_GATEWAY = ActiveMerchant::Billing::PaypalExpressGateway.new(paypal_options)
end 
```

宝石文件

```
gem 'activemerchant', :require => 'active_merchant' 
```

所以登录名，密码和签名。在沙箱中创建的都是贝宝。所以他们应该工作。

我应该怎么做才能修复这个错误。或者这是 Paypal 的一方？ActiveMerchant gem 有什么问题吗？

**更新 1**

检查响应变量后，这就是我得到的。

```
#<ActiveMerchant::Billing::PaypalExpressResponse:0x00000102402790 @params={"timestamp"=>"2012-06-29T01:30:18Z", "ack"=>"Failure", "correlation_id"=>"d1cb5dbb30425", "version"=>"72", "build"=>"3067390", "message"=>"CancelURL is invalid.", "error_codes"=>"10472", "Timestamp"=>"2012-06-29T01:30:18Z", "Ack"=>"Failure", "CorrelationID"=>"d1cb5dbb30425", "Errors"=>{"ShortMessage"=>"Transaction refused because of an invalid argument. See additional error messages for details.", "LongMessage"=>"CancelURL is invalid.", "ErrorCode"=>"10472", "SeverityCode"=>"Error"}, "Version"=>"72", "Build"=>"3067390"}, @message="CancelURL is invalid.", @success=false, @test=true, @authorization=nil, @fraud_review=false, @avs_result={"code"=>nil, "message"=>nil, "street_match"=>nil, "postal_match"=>nil}, @cvv_result={"code"=>nil, "message"=>nil}> 
```

任何反馈表示赞赏。

**UDPATE 2**

看了上面的那条消息后发现，cancelURL 是无效的，所以我修复了它并立即修复！

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T19:57:47.337

当您未正确登录到贝宝网站上的沙盒帐户时，会显示此错误。

1.  登录[http://sandbox.paypal.com/](http://sandbox.paypal.com/)
2.  打开您的网站并结帐
3.  发送到贝宝时，作为您的买家测试帐户之一登录

# linux - Linux 设备驱动程序允许 FPGA 直接 DMA 到 CPU RAM

> ID：11250739
> 
> 赞同：7
> 
> 时间：2012-06-28T18:26:30.073
> 
> 标签：linux, driver, mmap, dma, pci-e

我正在编写一个 linux 设备驱动程序，以允许 FPGA（当前通过 PCI express 连接到 PC）将 DMA 数据直接发送到 CPU RAM。这需要在没有任何交互的情况下发生，并且用户空间需要访问数据。一些细节： - 运行 64 位 Fedora 14 - 系统有 8GB 的​​ RAM - FPGA (Cyclone IV) 在 PCIe 卡上

为了实现这一点，我执行了以下操作： - 使用 memmap 6GB$2GB 在 grub 中保留上层 2GB RAM（如果我添加 mem=2GB，则不会启动）。我可以看到 /proc/meminfo 中保留了上层 2GB 的 RAM - 映射 BAR0 以允许读取和写入 FPGA 寄存器（这非常有效） - 在我的驱动程序中使用 remap_pfn_range() 实现了一个 mmap 函数 - 使用 ioremap 来获取缓冲区的虚拟地址 - 添加 ioctl 调用（用于测试）以将数据写入缓冲区 - 通过调用 ioctl 将数据写入缓冲区来测试 mmap，并验证数据是否在来自用户空间的缓冲区中

我面临的问题是当 FPGA 开始将数据 DMA 到我提供的缓冲区地址时。我经常收到 PTE 错误（来自 DMAR :) 或使用下面的代码我收到以下错误： DMAR：[DMA 写入] 请求设备 [01：00.0] 故障地址 186dc5000
DMAR：[故障原因 01] 根条目中的当前位是清除 DRHD：处理故障状态 reg 3

根据来自 FPGA 的 DMA，第一行中的地址每次递增 0x1000

这是我的 init() 代码：

```
#define IMG_BUF_OFFSET     0x180000000UL // Location in RAM (6GB)
#define IMG_BUF_SIZE       0x80000000UL  // Size of the Buffer (2GB)

#define pci_dma_h(addr) ((addr >> 16) >> 16)
#define pci_dma_l(addr) (addr & 0xffffffffUL)

if((pdev = pci_get_device(FPGA_VEN_ID, FPGA_DEV_ID, NULL)))
{
    printk("FPGA Found on the PCIe Bus\n");

    //  Enable the device 
    if(pci_enable_device(pdev))
    {
        printk("Failed to enable PCI device\n");
        return(-1);
    }
    //  Enable bus master
    pci_set_master(pdev);

    pci_read_config_word(pdev, PCI_VENDOR_ID, &id);
    printk("Vendor id: %x\n", id);
    pci_read_config_word(pdev, PCI_DEVICE_ID, &id);
    printk("Device id: %x\n", id);
    pci_read_config_word(pdev, PCI_STATUS, &id);
    printk("Device Status: %x\n", id);
    pci_read_config_dword(pdev, PCI_COMMAND, &temp);
    printk("Command Register : : %x\n", temp);
    printk("Resources Allocated :\n");
    pci_read_config_dword(pdev, PCI_BASE_ADDRESS_0, &temp);
    printk("BAR0 : %x\n", temp);

  // Get the starting address of BAR0
  bar0_ptr = (unsigned int*)pcim_iomap(pdev, 0, FPGA_CONFIG_SIZE);
  if(!bar0_ptr)
  {
     printk("Error mapping Bar0\n");
     return -1;
  }
  printk("Remapped BAR0\n");

  // Set DMA Masking
  if(!pci_set_dma_mask(pdev, DMA_BIT_MASK(64))) 
  {
     pci_set_consistent_dma_mask(pdev, DMA_BIT_MASK(64));
     printk("Device setup for 64bit DMA\n");
  }
  else if(!pci_set_dma_mask(pdev, DMA_BIT_MASK(32)))
  {
     pci_set_consistent_dma_mask(pdev, DMA_BIT_MASK(32));
     printk("Device setup for 32bit DMA\n");
  }
  else
  {
     printk(KERN_WARNING"No suitable DMA available.\n");
     return -1;
  }

  // Get a pointer to reserved lower RAM in kernel address space (virtual address)
  virt_addr = ioremap(IMG_BUF_OFFSET, IMG_BUF_SIZE);
  kernel_image_buffer_ptr = (unsigned char*)virt_addr;
  memset(kernel_image_buffer_ptr, 0, IMG_BUF_SIZE);
  printk("Remapped image buffer: 0x%p\n", (void*)virt_addr); 
```

}

这是我的 mmap 代码：

```
unsigned long image_buffer;
unsigned int  low;
unsigned int  high;

if(remap_pfn_range(vma, vma->vm_start, vma->vm_pgoff,
                   vma->vm_end - vma->vm_start,
                   vma->vm_page_prot))
{
   return(-EAGAIN);
}

image_buffer = (vma->vm_pgoff << PAGE_SHIFT);

if(0 > check_mem_region(IMG_BUF_OFFSET, IMG_BUF_SIZE))
{
   printk("Failed to check region...memory in use\n");
   return -1;
}

request_mem_region(IMG_BUF_OFFSET, IMG_BUF_SIZE, DRV_NAME);

// Get the bus address from the virtual address above
//dma_page   = virt_to_page(addr);
//dma_offset = ((unsigned long)addr & ~PAGE_MASK);
//dma_addr   = pci_map_page(pdev, dma_page, dma_offset, IMG_BUF_SIZE, PCI_DMA_FROMDEVICE);    
//dma_addr = pci_map_single(pdev, image_buffer, IMG_BUF_SIZE, PCI_DMA_FROMDEVICE);   
//dma_addr = IMG_BUF_OFFSET;
//printk("DMA Address: 0x%p\n", (void*)dma_addr);

// Write start or image buffer address to the FPGA
low  = pci_dma_l(image_buffer);
low &= 0xfffffffc;
high = pci_dma_h(image_buffer);
if(high != 0)
   low |= 0x00000001;

*(bar0_ptr + (17024/4)) = 0;

//printk("DMA Address LOW : 0x%x\n", cpu_to_le32(low));
//printk("DMA Address HIGH: 0x%x\n", cpu_to_le32(high));
*(bar0_ptr + (4096/4))  = cpu_to_le32(low); //2147483649; 
*(bar0_ptr + (4100/4))  = cpu_to_le32(high); 
*(bar0_ptr + (17052/4)) = cpu_to_le32(low & 0xfffffffe);//2147483648;

printk("Process Read Command: Addr:0x%x Ret:0x%x\n", 4096, *(bar0_ptr + (4096/4)));
printk("Process Read Command: Addr:0x%x Ret:0x%x\n", 4100, *(bar0_ptr + (4100/4)));
printk("Process Read Command: Addr:0x%x Ret:0x%x\n", 17052, *(bar0_ptr + (17052/4)));
return(0); 
```

感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T09:53:31.600

您是否控制自己编写 TLP 数据包的 RTL 代码，或者您能否命名您正在使用的 DMA 引擎和 PCIe BFM（总线功能模型）？你的数据包在模拟器中是什么样子的？大多数体面的 BFM 应该捕获它，而不是让您在部署后使用 PCIe 硬件捕获系统找到它。

要针对上 2GB RAM，您需要从设备发送 2DW（64 位）地址。您的 Fmt/Type 中的位是否设置为执行此操作？错误地址看起来像一个被屏蔽的 32 位总线地址，所以这个级别的某些东西可能是不正确的。还要记住，因为 PCIe 是大端的，所以在将目标地址写入 PCIe 设备端点时要小心。如果 Fmt 不正确，您可能会将目标地址的较低字节放入有效负载中——同样，一个不错的 BFM 应该会发现由此产生的数据包长度不匹配。

如果你有一个最近的主板/现代 CPU，PCIe 端点应该执行 PCIe AER（高级错误报告），所以如果运行最近的 Centos/RHEL 6.3，你应该得到一个`dmesg`端点故障报告。这非常有用，因为报告将数据包的前几个 DW 捕获到特殊捕获寄存器，因此您可以查看收到的 TLP。

在您的内核驱动程序中，我看到您设置了 DMA 掩码，这还不够，因为您尚未对 mmu 进行编程以允许从设备写入页面。查看的实现，`pci_alloc_consistent()`看看你应该调用什么来实现这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T13:13:48.443

如果您仍在寻找原因，那么它是这样的：您的内核默认启用了 DMA_REMAPPING 标志，因此 IOMMU 抛出上述错误，因为 IOMMU 上下文/域条目没有为您的设备编程。

您可以尝试在内核命令行中使用 intel_iommu=off 或将 IOMMU 置于设备的旁路模式。问候，萨米尔

# delphi - multibar 属性给出访问冲突

> ID：11250743
> 
> 赞同：1
> 
> 时间：2012-06-28T18:26:44.973
> 
> 标签：delphi, delphi-2007, teechart

我正在以编程方式创建一个酒吧系列（Delphi2007，TeeChar 7 免费版）。我想在我的图表中有相邻的条形图，所以我尝试创建多个条形图并使用 multibar 属性。

在 main_unit 中设置 multibar 属性时，我遇到访问冲突（调试时，如果我检查 barseries 对象，我可以看到 multibar 属性为“超出范围”）。仅当我在创建 bareries 的单元中设置属性时，我才得到错误。我如何在外部操纵barseries？我是否必须在 unit1 中为此目的设置一个属性？

这是我的代码片段：

```
unit unit1 
type TMyChart = Class
fchart: TChart;
procedure addSinglebarSeries(var X, Y: integer)    
....
implementation
function TSignalchart.addSinglebarSeries(var X, Y: integer): TBarSeries;
j, n : integer;   
begin
   result := TBarSeries.Create(fChart);
   result.AddXY(x,Y,inttostr(x), clRed);
   barseries.MultiBar := mbStacked;  //here no access violation
end;

---- 
unit main-unit

implementation
uses TeEngine, TeeProcs, unit1;
procedure myprocedure;
var 
 newChart : TMyChart;
 X, Y := array of integer;
 barseries : TBarSeries;
 aX, aY, i: integer;

begin
 //I create the newchart object, I create X, Y

  for i := 0 to length(X) - 1 do
    begin
      aX := X[i];
      aY := Y[i];
      barseries := newChart.addsinglebarSeries(aX,aY);
    end;
   //barseries.MultiBar := mbStacked; //access violation!!
  end; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T19:07:13.383

`TeeChart`这是在(D2007)中添加 5 个多条堆叠系列的示例。`Chart1`是`TChart`从组件调色板中删除的组件，并且是以相同方式放置的`Button1`标准：`TButton`

```
// D2007+ way to easily initialize dynamic arrays
type
  TIntArray=array of Integer;

procedure TForm1.Button1Click(Sender: TObject);
var
  BarSeries: TBarSeries;
  X, Y: TIntArray;
  i: Integer;
begin
  X := TIntArray.Create(1, 2, 3, 4, 5);       // SetLength and initialize rolled into one
  Y := TIntArray.Create(10, 20, 30, 40, 50);  // Nonsense values, of course.
  Chart1.SeriesList.Clear;
  for i := Low(X) to High(X) do
  begin
    BarSeries := TBarSeries.Create(Chart1);
    BarSeries.AddXY(X[i], Y[i]);
    BarSeries.MultiBar := mbStacked;
    Chart1.AddSeries(BarSeries);
  end;
end; 
```

这是点击后的表格`Button1`：

![在此处输入图像描述](../Images/e5ecf659e72bf82a5af63b26432ccefe.png)

# php - 无法将句子插入数据库

> ID：11250744
> 
> 赞同：3
> 
> 时间：2012-06-28T18:26:46.477
> 
> 标签：php, mysql

我有一些句子。我必须选择包含超过 6 个单词的句子。然后它们将被插入到数据库中。

```
<?php
    require_once 'conf/conf.php';
    $text = " Poetry. Do you read poetry while flying? Many people find it relaxing to read on long flights. Poetry can be divided into several genres, or categories. ";
    $sentences = explode(".", $text);
    foreach ($sentences as $sentence) {
       if (count(preg_split('/\s+/', $sentence)) > 6) {
           $save = $sentence. ".";
           $sql = mysql_query("INSERT INTO tb_name VALUES('','$save')");
       }
    }
?> 
```

结果只有插入数据库的第二句话 => '你在飞行时读诗吗？许多人发现在长途飞行中阅读很放松。” 而第三句也应插入。请帮助我，谢谢：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T18:52:02.343

这是您正在寻找的解决方案。您不能添加多行，因为您的 ID 值未指定，并且它是表中的键。由于要将句子添加到同一行，因此需要执行一个查询。

```
$text = " Poetry. Do you read poetry while flying? Many people find it relaxing to read on long flights. Poetry can be divided into several genres, or categories. ";
$sentences = explode(".", $text); $save = array();
foreach ($sentences as $sentence) {
   if (count(preg_split('/\s+/', $sentence)) > 6) {
       $save[] = $sentence. ".";
   }
}
if( count( $save) > 0) {
    $sql = mysql_query("INSERT INTO tb_name VALUES('','" . implode( ' ', $save) . "')");
} 
```

现在，这两个句子将被插入到数据库中的同一行中，用空格分隔。如果将第一个参数修改为 ，则可以更改它们的分隔符`implode()`。

生成的查询是这样的：

```
INSERT INTO tb_name VALUES('',' Do you read poetry while flying? Many people find it relaxing to read on long flights. Poetry can be divided into several genres, or categories.') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T18:52:31.077

代替：

`$sentences = explode(".", $text);`

有了这个：

```
$newSentences = array();
$sentences = preg_split("/(\.|\?|\!)/", $text, -1, PREG_SPLIT_DELIM_CAPTURE);

$odd = false;
foreach($sentences as $sentence) {
    $sentence = trim($sentence);
    if($sentence != '') {
        if(!$odd) {
            $newSentences[] = $sentence;
        } else {
            $newSentences[count($newSentences) - 1] .= $sentence;
        }
        $odd = !$odd;
    }
} 
```

`.`它分隔以or `?`or结尾的句子`!`。foreach 只是重新组合句子。

此处示例：http: [//codepad.org/kk3PsVGP](http://codepad.org/kk3PsVGP)

# python - Python while循环测试两个真/假元素

> ID：11250745
> 
> 赞同：1
> 
> 时间：2012-06-28T18:26:54.133
> 
> 标签：python, while-loop

我正在为我的孩子们制作一个单词混乱游戏。我希望他们能够在猜测中输入“提示”以获得提示。第一个“提示”应该给出单词的第一个和最后一个字母。下次他们键入“提示”时，应提供单词的前两个和后两个字母.. 等等。

我在他们第一次输入“提示”时让它工作，但随后 while 循环被破坏，他们无法猜错或再次输入“提示”。

我知道问题出在这一行：

```
while guess != correct and guess != 'hint': 
```

我似乎无法修复它，以便用户可以多次输入提示。

这是我的代码：

```
# The computer picks a random word, and then "jumbles" it
# the player has to guess the original word

import random

replay = "y"
while replay == "y":

    print("\n"* 100)
    word = input("Choose a word for your opponent to de-code: ")
    print("\n"* 100)
    # provide a hint if the user wants one
    hint_count = 1

    # create a variable to use later to see if the guess is correct
    correct = word

    # create a empty jumble word
    jumble = ""
    # while the chosen word has letters in it
    while word:
        position = random.randrange(len(word))
    #   add the random letter to the jumble word
        jumble += word[position]
    #   extract a random letter from the chosen word
        word = word[:position] + word[position +1:]

    # start the game
    print(
    """

                Welcome to the Word Jumble!

        Unscramble the letters to make a word.
    (Press the enter key at the prompt to quit.)
    """
    )
    score = 10
    print("The jumble is: ",jumble)

    guess = input("\nType 'hint' for help but lose 3 points. \
                  \nYOUR GUESS: ")

    while guess != correct and guess != 'hint':
        print("Sorry that's not it.")
        score -= 1
        guess = input("Your guess: ")

    if guess == 'hint':
        print("The word starts with '"+ correct[0:hint_count]+"' and ends with '"+correct[len(correct)-hint_count:len(correct)]+"'")
        score -= 3
        hint_count += 1
        guess = input("Your guess: ")

    if guess == correct:
        print("That's it! You guessed it!\n")
        print("Your score is ",score)

    print("Thanks for playing.")

    replay = input("\n\nWould you like to play again (y/n).") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T18:36:26.110

在第一个“提示”之后，程序应该要求猜测，然后继续 print("Thanks for playing.") 因为检查提示的条件在 while 循环之外。将其放入while循环中：

```
while guess != correct:
    if guess == 'hint':
        print("The word starts with '"+ correct[0:hint_count]+"' and ends with '"+correct[len(correct)-hint_count:len(correct)]+"'")
        score -= 3
        hint_count += 1
        guess = input("Your guess: ")

     else:
        print("Sorry that's not it.")
        score -= 1
        guess = input("Your guess: ") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T18:34:30.917

问题是您`guess == 'hint'`在 while 循环之外进行检查。尝试类似的东西

```
while True:
    guess = input(...)
    if guess == correct:
        # correct
        break
    elif guess == 'hint':
        # show hint
    else:
        # not it, decrement score 
```

# android - android 需要与 PC 的 MTP 连接，但它是否独立于设备？

> ID：11250749
> 
> 赞同：2
> 
> 时间：2012-06-28T18:27:13.917
> 
> 标签：android, windows

我想在 Windows 上编写一个程序，通过 MTP 将音乐传输到 android。我拥有的真实设备是 HTC 渴望（froyo），当我通过 USB 电缆将其连接到 PC 时，它显示为可移动存储而不是 Windows 便携式设备..

只有 ICS 似乎支持 MTP，但我没有。我正在寻找是否可以通过某种模拟 USB 连接将带有 ICS 的 Android Emulator 连接到我的主机。但这在 android 模拟器中不支持。

我需要一些关于如何设置环境来为其编程的提示或建议。

我有另一个显示为 Windows 便携式设备的设备（创意媒体播放器）。如果此协议与设备无关，我可以为我的“创意媒体播放器”编写程序并期望它理论上可以与 android 一起使用吗？

谢谢，

# android - 在 Android 中检索主屏幕大小（单元格数）

> ID：11250752
> 
> 赞同：2
> 
> 时间：2012-06-28T18:27:29.713
> 
> 标签：android, android-widget, homescreen

您是否知道是否有办法以编程方式或通过读取一些 pref 文件来检索 Android 中的主屏幕尺寸（例如大多数手机上的 4x4 或大多数平板电脑上的 7x8）。

必须有一个 xml 文件或 db 存储它，但我无法找到哪个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T18:44:56.967

网格尺寸由启动器应用程序处理，它可能是 AOSP、制造商（Sense、Blur、TouchWiz）或完全第三方（Nova、Launcher Pro 等）。这些应用程序中的任何一个都可以以他们选择的任何方式（db、`SharedPreferences`等）存储维度，因此您将无法找到存储该信息的特定位置。对不起！

那就是如果您正在寻找通用解决方案。如果您在此处遇到特殊情况，使用 root 手机运行特定的启动器应用程序，则可能可以通过应用程序私有数据目录中的文件访问该信息。

# file-upload - CakePHP 2.0 + 通知（8）：未定义索引：上传[APP/Controller/UploadsController.php，第32行]

> ID：11250753
> 
> 赞同：0
> 
> 时间：2012-06-28T18:27:30.790
> 
> 标签：file-upload, cakephp-2.0

我使用 000webhost 作为托管我的网站组合的一种方式。但是，我收到了这个错误，但在本地主机上并没有发生在我身上。

```
 Notice (8): Undefined index:  Upload [APP/Controller/UploadsController.php, line 32] 
```

这似乎是它所指的代码，

```
 public function add() {
            $this->render();

        if($this->request->is('post')){

            $file = $this->request->data['Upload']['file'];
                    if($this->Upload->save($this->data) && move_uploaded_file($file['tmp_name'],APP.'webroot/files/uploads'.DS.$this->Upload->id.'.mp4')) 
                        {
                                $this->Session->setFlash('<p class="uploadflash">The upload has been saved</p>', true);

                                $this->redirect(array('controller'=>'Uploads', 'action' => 'watch', $this->Upload->id));
                            }   else {
                        $this->Session->setFlash('<p class="loginerror">The upload could not be saved, mp4 files can be saved only.</p>', true);    

                                }

                                }
                    } 
```

关于为什么会发生这种情况的任何想法？此外，我的 Elements 也没有出现在这个在线主机上？我在页面上抛出了这个错误

```
 Element Not Found: Elements/uploads/recentuploads.ctp 
```

其他人好像有这个问题？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T15:57:20.113

经过进一步检查，我发现服务器不允许文件上传大小超过 2mb，在这种情况下 PHP 会抛出上述错误。

# c# - 当字段名称是保留关键字时，从 F# 访问 .Net 字段

> ID：11250760
> 
> 赞同：8
> 
> 时间：2012-06-28T18:28:04.603
> 
> 标签：c#, .net, f#

我有一个结构，它有一个名为`type`

我如何在 F# 中访问它？

C＃

```
struct A {
   int type;
} 
```

F＃

```
let a = A()
let myThing = a.type  //error because type is a reserved keyword 
```

我如何访问的`type`领域`A`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-28T18:29:41.743

您正在`type`像静态字段一样访问。首先，您需要一个实例`A`：

```
let a = A()
let x = a.``type`` 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-28T18:30:03.227

您可以使用双反引号来限定它`A.``type```。

# java - 如何在 Webview 和 Android 应用程序中使用 HTML 按钮？

> ID：11250761
> 
> 赞同：0
> 
> 时间：2012-06-28T18:28:11.133
> 
> 标签：java, android, html, eclipse, webview

我有一个用 Java(Eclipse) 编写的应用程序的外壳，它只返回一个 Webview。在 Webview 返回的这个 html 中，我有一个按钮可以将您带到下一页。

当您单击该按钮时，它只会突出显示橙色并且什么都不做。如果我将其设为链接（），它将转到下一页。

在我下面的代码中，它们是以不同方式生成的两个按钮。它们都在应用程序上显示一个按钮，但单击时不执行任何操作。

```
<!DOCTYPE html>
<html>
    <head>

    </head>
    <body>
        Welcome to this page blah blah blah
        <br />
        <input type="button" value="Click Me!" onClick="parent.location='fred.htm'"/>
        <button onClick="parent.location='fred.htm'">Click Me!</button>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T19:14:51.393

我想到了。我不知道为什么以前没有想到它...

但我只是在我的链接中放了一个按钮。所以我最终得到：

```
<a href="fred.htm"><button>Click Me!</button></a> 
```

不确定这是否是正确的方法，但它看起来像一个按钮，它像一个按钮一样工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T14:20:18.827

我认为问题在于您在 onclick 处理程序中执行的 JavaScript。

尝试

location.href = 'fred.htm';

而不是使用 parent.href。

# jquery - jquery Date Range Picker - 在选择时获取预设文本

> ID：11250764
> 
> 赞同：0
> 
> 时间：2012-06-28T18:28:29.073
> 
> 标签：jquery, jquery-ui, jquery-plugins, datepicker

我正在使用日期范围选择器 (http://www.filamentgroup.com/lab/date_range_picker_using_jquery_ui_16_and_jquery_ui_css_framework/) 插件，需要获取选定的预设范围文本。获取所选预设范围文本的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T19:11:58.497

好吧，我搜索了那个代码，但我能找到的最好的就是简单地使用

```
$(".ui-daterangepicker .ui-state-active a").text(); 
```

抱歉，我帮不上忙，但似乎作者决定忽略为各种属性制作吸气剂。:\

# scorm - SCORM 2004 第 3 版中的 mapInfo

> ID：11250771
> 
> 赞同：1
> 
> 时间：2012-06-28T18:29:08.813
> 
> 标签：scorm, scorm2004

请阅读以下场景并告诉我问题所在：

1.  我有两个内容包（CP1 和 CP2）。
2.  CP2 的 targetsGlobalToSystem = true。
3.  CP2 有一个全局目标，readSatisfiedStatus = true 和 targetObjectiveID = g-obj。
4.  CP1 有一个本地目标，writeSatisfiedStatus = true 和 targetObjectiveID = g-obj。
5.  CP1 局部目标的客观进展状态和目标满足状态为真。
6.  CP1 启动，本地目标的目标满足状态在退出所有导航请求后写入 CP2 的全局目标。
7.  控制返回到 LMS。
8.  CP1 再次启动。CP1 局部目标的 Objective Progress Status 和 Objective Satisfied Status 的值是多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T20:03:45.850

CP1 不会受到影响，因为它不读取全局目标值。只有 CP2 可以访问全局目标值，因为它已将“readSatisfiedStatus”设置为 true。“writeSatisfiedStatus”与为变量赋值相同，而“readSatisfiedStatus”读取赋值给该变量的值。

# google-app-engine - 如何仅将一个 python 脚本（不是所有项目文件夹）上传到谷歌应用引擎？

> ID：11250772
> 
> 赞同：1
> 
> 时间：2012-06-28T18:29:14.783
> 
> 标签：google-app-engine

我是 Google App Engine 的新手。

我找不到有关 appcfg.py 的信息，它解释了如何指定一些要上传的文件。当我执行

```
appcfg.py update . 
```

它正在上传所有项目文件夹，这需要很多时间。

例如，如何仅上传到服务器`main.py`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T18:38:14.773

您不仅可以上传部分应用程序，还可以一次上传整个应用程序。

# objective-c - 您可以使用拆分视图控制器为不同的视图分配不同的按钮吗？

> ID：11250775
> 
> 赞同：0
> 
> 时间：2012-06-28T18:29:22.603
> 
> 标签：objective-c, xcode, cocoa, uisplitviewcontroller

我正在创建一个拆分视图 ipad 应用程序。我在主视图中有四个按钮，它们连接到四个不同的视图。但是，当我在某些视图中时，我不需要所有这些按钮都显示在工具栏中。所以基本上，是否可以在拆分视图控制器中更改不同视图的按钮？任何建议、教程或源代码都会很有趣

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T18:54:45.257

补充陆远的话。您可以在应用程序委托中放置一个指向主视图实例的指针，以便当您的子视图之一加载时，它可以获得主视图实例。然后你可以隐藏你想要的主视图按钮。

# html - JSP 标记库中没有结束标记

> ID：11250776
> 
> 赞同：0
> 
> 时间：2012-06-28T18:29:24.150
> 
> 标签：html, jsp, tags

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<td colspan="1" width="100">
<c:choose>
  <c:when>
    <c:choose>
       <c:when></c:when><c:otherwise>
    <c:when test="<%=\"F\".equals(result[1]) %>">
     <c:set var="checked"><%=result[0].equals("Y")%></c:set>
     <input type="checkbox" id="<%="ABC"+"$"+rows%>" name="<%="ABC"+"$"+rows%>" value="<%=String.valueOf(rows)%>" ${checked ? 'checked' : ''} onclick="someFunction(this)"/>
    </c:when></c:otherwise>
    </c:choose>
  </c:when>    
  <c:otherwise>
  </c:otherwise>
</c:choose>
</td> 
```

出于某种原因，JSP 编译器抱怨嵌套输入 type="checkbox" 的没有结束标记`<c:when>`...我可以知道我做错了什么吗？我尝试使用`<c:if>`它也不起作用，编译器也抱怨没有结束标签。

编辑：如果我没有像下面那样嵌套输入类型和 set var，那么它可以工作......但它无法完成我原来的逻辑..

```
 <c:otherwise>
            <c:when test="<%=\"F\".equals(result[1]) %>">
            </c:when>
            <c:set var="checked"><%=result[0].equals("Y")%></c:set>
             <input type="checkbox" id="<%="ABC"+"$"+rows%>" name="<%="ABC"+"$"+rows%>" value="<%=String.valueOf(rows)%>" ${checked ? 'checked' : ''} onclick="someFunction(this)"/>
    </c:otherwise> 
```

编辑 2：我必须以这种方式编写 jsp 代码，以免我的建筑师死亡之痛，哈哈。任何建议都会很乐意接受以保留我提出的逻辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T18:40:11.190

只需摆脱所有这些小*脚本*（老式的`<% %>`东西）。它们不能与标签库很好地混合。JSTL 属性仅采用 EL 表达式。

例如，假设您`request.setAttribute("results", results)`事先已经完成了一个设计，从技术上讲需要在 servlet 中完成，但也可以在JSP 顶部的某个*scriptlet中完成。*

```
<c:forEach items="${results}" var="result">
  ...
  <td colspan="1" width="100">
    <c:choose>
      <c:when>
        <c:choose>
          <c:when></c:when>
          <c:otherwise>
            <c:when test="${result[1] == 'F'}">
              <c:set var="checked">${result[0] == 'Y'}</c:set>
              <input type="checkbox" id="ABC$${rows}" name="ABC$${rows}" value="${rows}" ${checked ? 'checked' : ''} onclick="someFunction(this)" />
            </c:when>
          </c:otherwise>
        </c:choose>
      </c:when>    
      <c:otherwise>
      </c:otherwise>
    </c:choose>
  </td>
  ...
</c:forEach> 
```

通过这种方式，它的可读性也更好。

### 也可以看看：

*   [使用 MVC 和 DAO 模式在 JSP 页面的 HTML 中显示 JDBC ResultSet](https://stackoverflow.com/questions/5003142/jsp-using-mvc-and-jdbc/5003701#5003701)

# jquery - 使用jquery打开/关闭按钮

> ID：11250779
> 
> 赞同：0
> 
> 时间：2012-06-28T18:29:37.047
> 
> 标签：jquery, adobe-edge

我在 Adob​​e Edge 中工作。我在舞台上有 3 个按钮：v1、v2、v3。单击按钮时，它们会在时间轴上移动。

单击按钮 1 时，它会在时间线上移动并显示按钮 2 已启用，按钮 1 和 3 已禁用。

单击按钮 2 时，它会在时间线上移动并显示按钮 3 已启用，按钮 1 和 2 已禁用。

单击按钮 3 时，它会在时间线上移动并显示按钮 1 已启用，按钮 2 和 3 已禁用。

我尝试使用 bind() 和 unbind() 并且它适用于第一个按钮。但是，由于它取消绑定第三个按钮，所以当我到达时间轴上应该启用按钮 3 的位置时，它被禁用。我尝试在按钮 2 的单击事件中再次绑定该按钮，但不起作用。我该如何处理？

```
sym.$("v1").click(function() {
sym.play("p1"); 
sym.$("v1").unbind("click");
sym.$("v3").unbind("click");

});

sym.$("v2").click(function() {
sym.play("p2");
sym.$("v1").unbind("click");
sym.$("v2").unbind("click");
sym.$("v3").bind("click");

});

sym.$("v3").click(function() {
sym.play("p3"); 
sym.$("v1").bind("click");
sym.$("v2").unbind("click");
sym.$("v3").unbind("click");

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T20:03:54.077

它应该工作。祝你好运

```
sym.$("v1").click(function() {
    func(1, 2);    
});    
sym.$("v2").click(function() {
    func(2, 3);    
});
sym.$("v3").click(function() {
    func(3, 1);    
});    

function func(i, next) {
    var nextnext = ((next+1)%3 == 0) ? 3 : (next+1)%3;

    sym.play("p"+i);

    sym.$("v1").unbind("click");
    sym.$("v2").unbind("click");
    sym.$("v3").unbind("click");
    sym.$("v"+ next).bind("click", function() { func(next, nextnext); }); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T19:00:04.307

只是例子

```
sym.$("#v1, #v2, #v3").bind("click", myFunction);

function myFunction() {
    var id = sym.$(this).attr("id");
    var i  = id.substr(1,3);
    var next = ((i+1)%3 == 0) ? 3 : (i+1)%3;

    sym.play("p"+i);

    sym.$("#v1, #v2, #v3").unbind("click");
    sym.$("#v"+ next).bind("click", myFunction);   
} 
```

它已经过验证

# ios - 使用 AVFoundation 裁剪视频

> ID：11250783
> 
> 赞同：0
> 
> 时间：2012-06-28T18:29:52.773
> 
> 标签：ios, video, avfoundation

> **可能重复：**
> [如何使用 AVFoundation 裁剪视频](https://stackoverflow.com/questions/5198245/how-do-i-use-avfoundation-to-crop-a-video)

最终目标是将我的 480x640 .mov 视频裁剪为精确分辨率 480x360 的 4:3 比例横向视频。

我知道此链接提出的近乎确切的问题： [如何使用 AVFoundation 裁剪视频](https://stackoverflow.com/questions/5198245/how-do-i-use-avfoundation-to-crop-a-video)

我相信显示已经裁剪的预览图层会更容易，然后在最后裁剪最终（未裁剪的纵向 480x640）视频。我一直在玩下面的代码。目前，我只是想让它转换任何东西 - 那里有多余的代码，我稍后会修剪。下面的代码尝试将视频缩放到 70%：

```
-(void) convertVideoToSize{
AVURLAsset *videoToConvert = [AVURLAsset URLAssetWithURL:[NSURL fileURLWithPath:tempURL] options:nil];
AVMutableComposition *mixComposition = [[AVMutableComposition alloc] init];
AVMutableCompositionTrack *firstTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeVideo preferredTrackID:kCMPersistentTrackID_Invalid];

[firstTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, videoToConvert.duration) ofTrack:[[videoToConvert tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0] atTime:kCMTimeZero error:nil];
AVMutableVideoCompositionInstruction *mainInstruction = [AVMutableVideoCompositionInstruction videoCompositionInstruction];
mainInstruction.timeRange = CMTimeRangeMake(kCMTimeZero,videoToConvert.duration);
AVMutableVideoCompositionLayerInstruction *firstLayerInstruction = [AVMutableVideoCompositionLayerInstruction videoCompositionLayerInstructionWithAssetTrack:firstTrack];
//WE PERFORM VIDEO EDITING OPERATIONS HERE

CGAffineTransform translateToCenter = CGAffineTransformMakeTranslation( 0,-420); 

CGAffineTransform Rotate = CGAffineTransformMakeRotation(M_PI_2);
CGAffineTransform Scale = CGAffineTransformMakeScale(1.0f,1.0f);
CGAffineTransform shrinkWidth = CGAffineTransformMakeScale(1, 1);
CGAffineTransform finalTransform = CGAffineTransformConcat(shrinkWidth, CGAffineTransformConcat(translateToCenter, Rotate) );
[firstLayerInstruction setTransform:finalTransform atTime:kCMTimeZero];
//[firstLayerInstruction setTransform:CGAffineTransformConcat(Rotate,Scale) atTime:kCMTimeZero];
//[firstLayerInstruction setTransform:Scale atTime:kCMTimeZero];
mainInstruction.layerInstructions = [NSArray arrayWithObject:firstLayerInstruction];

AVMutableVideoComposition *mainCompositionInst = [AVMutableVideoComposition videoComposition];
mainCompositionInst.instructions = [NSArray arrayWithObject:mainInstruction];
mainCompositionInst.frameDuration = CMTimeMake(1,30);
mainCompositionInst.renderSize = CGSizeMake(480, 360);

//AVPlayerItem *newPlayerItem = [AVPlayerItem playerItemWithAsset:mixComposition];
//newPlayerItem.videoComposition = mainCompositionInst;

AVAssetExportSession *exportSession = [[AVAssetExportSession alloc] initWithAsset:mixComposition presetName:AVAssetExportPresetMediumQuality];
exportSession.outputURL = [NSURL fileURLWithPath:tempURL3];
exportSession.videoComposition = mainCompositionInst;
exportSession.outputFileType = AVFileTypeQuickTimeMovie;
[exportSession exportAsynchronouslyWithCompletionHandler:^
 {
     switch (exportSession.status)
     {
         case AVAssetExportSessionStatusFailed:
         {
             NSLog (@"FAIL");

             break;
         }
         case AVAssetExportSessionStatusCompleted:
         {
             NSLog (@"SUCCESS");

             break;
         }
         case AVAssetExportSessionStatusCancelled:
         {
             NSLog (@"CANCELED");

             break;
         }
     };
 }]; 
```

}

它不起作用，并输出一个不可读的 .mov 文件。我想知道是否有人可以为我指出一个更简单的方向，或者让我了解更改/缩放视频的最佳方法。

更新：将视频保存到文件 transform.mov 后，我尝试播放它，但在 QuickTime 中收到“无法识别电影的文件格式”错误。任何可能的腐败来源？

更新 2：我已成功设置导出会话和组合以编写转换。现在我只需要特定的转换，将我的 480x640 转换为 480x360。那里有什么帮助吗？

# jquery - .css() 会改变 HTML 或外部样式表中的属性吗？

> ID：11250785
> 
> 赞同：0
> 
> 时间：2012-06-28T18:29:58.387
> 
> 标签：jquery

新手 jquery：`.css()`如果属性包含在 HTML 中，该函数是否会更改元素的 css 属性，或者它是否从外部样式表中定位并随后更改元素（如果有的话）？

例如

```
$('#main').css('background-color', '#eee'); 
```

由于我的 HTML 中没有内联标签，该函数是否在链接的外部样式表中`<style>`查找类？`#main`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T18:32:59.930

该代码修改元素的内联样式属性。它根本不会触及您的 css 文件。

您的选择器将查找带有`id = main`和 set的元素`style.backgroundColor = '#eee'`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T18:34:31.617

JavaScript 在计算的 DOM 元素上进行操作，而不是无论如何修改样式表本身。据我所知，jQuery 函数会将 CSS 置于与将其设置在元素本身上的等效级别，即：

```
<div id="main" style="background-color: #eee;"></div> 
```

这是 CSS 中最高级别的定位，将覆盖任何其他定位该元素的内容（例如外部样式表）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T18:32:34.910

> 当使用 .css() 作为 setter 时，jQuery 会修改元素的 style 属性。例如，$('#mydiv').css('color', 'green') 等价于 document.getElementById('mydiv').style.color = 'green'。

它设置元素的样式属性并且不触及外部样式表。

来源：[http ://api.jquery.com/css/#css2](http://api.jquery.com/css/#css2)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T18:50:40.873

jQuery 在客户端工作，因此它不能在服务器端更改或更改外部链接样式表。首先它将根据您的选择器选择元素，然后将 css 样式内联。您可以使用 Firefox 中的 Firebug 检查这些内联样式。我们通常`.css()`用于 css 样式的运行时更改。如果您想在运行时应用链接的 CSS 样式表中的样式，您可以创建一个类并使用`addClass().`

# linux - procps 导致堆栈粉碎

> ID：11250786
> 
> 赞同：-1
> 
> 时间：2012-06-28T18:29:58.347
> 
> 标签：linux, proc, procps

我一直在编写一个程序，试图使用 procps 库找到自己。但由于某种原因，它破坏了堆栈。这是我的代码：

```
int main(){
    PROCTAB *ptp;
    proc_t task;
    pid_t mypid[1];
    mypid[0] = getpid();
    printf("My id: %d\n", mypid[0]);
    ptp = openproc(PROC_PID, mypid, 1);
    if(readproc(ptp, &task)){
        printf("Task id:%d\n",task.XXXID);
    }
    else{
        printf("Error: could not find currect task\n");
    }
    closeproc(ptp);
    printf("Done\n");
    return 0;
} 
```

我运行程序时得到的输出是：

```
$ ./test 
My id is: 8514
Task id is:8514
Done
*** stack smashing detected ***: ./test terminated
======= Backtrace: =========
/lib/i386-linux-gnu/libc.so.6(__fortify_fail+0x45)[0xb7688dd5]
/lib/i386-linux-gnu/libc.so.6(+0xffd8a)[0xb7688d8a]
./test[0x804863e]
/lib/i386-linux-gnu/libc.so.6(__libc_start_main+0xf3)[0xb75a24d3]
./test[0x80484f1]
======= Memory map: ========
...
Aborted (core dumped) 
```

任何人都知道它为什么会发生？难道我做错了什么？谢谢。

编辑：我查看了头文件并注意到我错误地使用了 openproc 函数，正确的使用方法是（对于 pid）是让 mypid 数组为空终止，所以我改变了我的代码：

```
int main(){
    PROCTAB *ptp;
    proc_t task;
    pid_t mypid[2];
    mypid[0] = getpid();
    memset(&mypid[1], 0, sizeof(pid_t));
    printf("My id: %d\n", mypid[0]);
    ptp = openproc(PROC_PID, mypid);
    if(readproc(ptp, &task)){
        printf("Task id:%d\n",task.XXXID);
    }
    else{
        printf("Error: could not find currect task\n");
    }
    closeproc(ptp);
    printf("Done\n");
    return 0;
} 
```

它仍然会压碎堆栈。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T09:54:39.907

它在这里对我有用。获得该版本的 procps 后，它编译并运行良好：

```
$ gcc -Wall -Werror -o rp -L. -lproc-3.2.8 rp.c
$ ./rp
My id: 11468
Task id:11468
Done 
```

**更新**

尝试修改版本：

```
proc_t *result;
...
if((result = readproc(ptp, NULL))){
    printf("Task id:%d\n",result->XXXID);
    free(result);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-21T21:33:22.173

崩溃的一个可能原因是 readproc() 返回的 proc_t 结构具有其他动态分配的元素，例如环境变量或命令行参数。更安全的方法是让 readproc() 分配整个结构，然后使用 freeproc() 释放它：

```
while ((proc_info = readproc(proc, nullptr)) != NULL) {
    // do something with proc_info
    freeproc(proc_info);
} 
```

# sql-server - where 子句中可能的不同日期？

> ID：11250787
> 
> 赞同：0
> 
> 时间：2012-06-28T18:30:02.777
> 
> 标签：sql-server

是否可以在 SQl Server 2005 中获取每个不同日期的记录？

例子：

```
Select sum(AmountSold), Date from tableA where Distinct(Date) 
```

这样的事情可能吗？提前致谢！！

拉穆！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T18:32:40.683

```
SELECT SUM(AmountSold), Date 
FROM tableA
GROUP BY Date 
```

# django - **finally:* 子句的语法错误在哪里？

> ID：11250790
> 
> 赞同：0
> 
> 时间：2012-06-28T18:30:06.767
> 
> 标签：django, testing, try-catch-finally

我正在尝试在生产服务器上为 Django 应用程序运行 Selenium 测试。

我在**finally:**子句上遇到语法错误。

我看不出错误在哪里，并且所有测试在开发中都运行良好。

这是代码：

```
 def activate_revision(self, user, revision):  
    self.title = revision.title  
    self.tagnames = revision.tagnames  

    self.body = self.rendered(revision.body)  

    self.active_revision = revision  

    # Try getting the previous revision  
    try:  
        prev_revision = NodeRevision.objects.get(node=self, revision=revision.revision-1)  

        update_activity = True  

        # Do not update the activity if only the tags are changed  
        if prev_revision.title == revision.title and prev_revision.body == revision.body \  
        and prev_revision.tagnames != revision.tagnames and not settings.UPDATE_LATEST_ACTIVITY_ON_TAG_EDIT:  
            update_activity = False  
    except NodeRevision.DoesNotExist:  
        update_activity = True  
    finally:  
        if update_activity:  
            self.update_last_activity(user)  
    self.save() 
```

这是回溯：

```
$ python manage.py test forum  
Traceback (most recent call last):  
  File "/usr/lib/python2.4/logging/__init__.py", line 731, in emit  
    msg = self.format(record)  
  File "/usr/lib/python2.4/logging/__init__.py", line 617, in format  
    return fmt.format(record)  
  File "/usr/lib/python2.4/logging/__init__.py", line 408, in format  
    s = self._fmt % record.__dict__  
KeyError: 'funcName'  
/home/spirituality/lib/python2.7/Django-1.3.1-py2.7.egg/django/db/models/fields/subclassing.py:80: DeprecationWarning: A Field class whose get_db_prep_lookup method hasn't been updated to take `connection` and `prepared` arguments.  
  new_class = super(SubfieldBase, cls).__new__(cls, name, bases, attrs)  
/home/spirituality/lib/python2.7/Django-1.3.1-py2.7.egg/django/db/models/fields/subclassing.py:80: DeprecationWarning: A Field class whose get_db_prep_value method hasn't been updated to take `connection` and `prepared` arguments.  
  new_class = super(SubfieldBase, cls).__new__(cls, name, bases, attrs)  
Traceback (most recent call last):  
  File "manage.py", line 13, in ?  
    execute_manager(settings)  
  File "/home/spirituality/lib/python2.7/Django-1.3.1-py2.7.egg/django/core/management/__init__.py", line 438, in execute_manager  
    utility.execute()  
  File "/home/spirituality/lib/python2.7/Django-1.3.1-py2.7.egg/django/core/management/__init__.py", line 379, in execute  
    self.fetch_command(subcommand).run_from_argv(self.argv)  
  File "/home/spirituality/lib/python2.7/Django-1.3.1-py2.7.egg/django/core/management/base.py", line 191, in run_from_argv  
    self.execute(*args, **options.__dict__)  
  File "/home/spirituality/lib/python2.7/Django-1.3.1-py2.7.egg/django/core/management/base.py", line 220, in execute  
    output = self.handle(*args, **options)  
  File "/home/spirituality/lib/python2.7/South-0.7.3-py2.7.egg/south/management/commands/test.py", line 8, in handle  
    super(Command, self).handle(*args, **kwargs)  
  File "/home/spirituality/lib/python2.7/Django-1.3.1-py2.7.egg/django/core/management/commands/test.py", line 37, in handle  
    failures = test_runner.run_tests(test_labels)  
  File "/home/spirituality/lib/python2.7/Django-1.3.1-py2.7.egg/django/test/simple.py", line 358, in run_tests  
    suite = self.build_suite(test_labels, extra_tests)  
  File "/home/spirituality/lib/python2.7/Django-1.3.1-py2.7.egg/django/test/simple.py", line 247, in build_suite  
    app = get_app(label)  
  File "/home/spirituality/lib/python2.7/Django-1.3.1-py2.7.egg/django/db/models/loading.py", line 129, in get_app  
    self._populate()  
  File "/home/spirituality/lib/python2.7/Django-1.3.1-py2.7.egg/django/db/models/loading.py", line 61, in _populate  
    self.load_app(app_name, True)  
  File "/home/spirituality/lib/python2.7/Django-1.3.1-py2.7.egg/django/db/models/loading.py", line 78, in load_app  
    models = import_module('.models', app_name)  
  File "/home/spirituality/lib/python2.7/Django-1.3.1-py2.7.egg/django/utils/importlib.py", line 35, in import_module  
    __import__(name)  
  File "/home/spirituality/webapps/spirituality/spirit_app/forum/models/__init__.py", line 2, in ?  
    from question import Question ,QuestionRevision, QuestionSubscription  
  File "/home/spirituality/webapps/spirituality/spirit_app/forum/models/question.py", line 1, in ?  
    from base import *  
  File "/home/spirituality/webapps/spirituality/spirit_app/forum/models/base.py", line 349, in ?  
    from node import Node, NodeRevision, NodeManager  
  File "/home/spirituality/webapps/spirituality/spirit_app/forum/models/node.py", line 383  
    finally:  
          ^  
SyntaxError: invalid syntax 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T19:38:31.920

回溯的第一部分表明它是生产中的 Python 2.4。根据我上面的评论，问题在于`try..except..finally`仅适用于 Python 2.5 及更高版本。升级生产或重写代码以嵌套`try..except`在外部`try..finally`.

# asp.net-mvc - Telerik Grid 客户端排序

> ID：11250791
> 
> 赞同：0
> 
> 时间：2012-06-28T18:30:12.647
> 
> 标签：asp.net-mvc, telerik, telerik-grid

Telerik MVC 网格中有没有办法告诉客户端排序按比绑定值的替代值排序

```
columns.Bound(p => p.Icon).Template(p => p.Icon).ClientTemplate("<#=Icon#>") 
```

我不想将排序基于作为图像标签的图标，而是基于隐藏字段中的某个 Id 列。这可能吗？另外，如果我将网格绑定到格式化的日期，而不是数据库的原始 DateTime，我认为在对日期进行客户端排序时会遇到类似的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T18:36:58.603

我自己解决了。

```
columns.Bound(p => p.Id).Template(p => p.Icon).ClientTemplate("<#=Icon#>"); 
```

这样我可以在客户端排序期间维护图像，但仍然按 Id 排序

# c++ - C++ 中的 BFS 实现

> ID：11250793
> 
> 赞同：0
> 
> 时间：2012-06-28T18:30:28.967
> 
> 标签：c++, breadth-first-search

我试图用一个用向量数组实现的邻接表来实现 BFS 算法。我从 1 开始存储输入，而不是从 0 开始。

编辑：我已经更新了代码： http: [//ideone.com/GZwPP](http://ideone.com/GZwPP)现在它可以编译并运行，但是当我尝试搜索不在图中的节点时，我得到了这个错误：

```
terminate called after throwing an instance of 'std::out_of_range'
  what():  vector::_M_range_check
Aborted 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T20:50:55.513

这个bug真的很微妙。您的代码中有：

```
for(i = 1; i <= adj[front].size() - 1 && adj[front].at(0) != 0; i++) 
```

什么类型`size()`？它是无符号类型。所以当`size() == 0`那时`size() - 1 > 0`因为[算术溢出](http://en.wikipedia.org/wiki/Arithmetic_overflow)。您应该将行更改为：

```
for(i = 1; i < adj[front].size() && adj[front].at(0) != 0; i++) 
```

# java - 带有 Jar 文件的 Android java.lang.OutOfMemoryError

> ID：11250794
> 
> 赞同：0
> 
> 时间：2012-06-28T18:30:35.143
> 
> 标签：java, android, heap-memory

我的 Android 应用程序出现 OutofMemory 错误。让我解释一下背景。

我有一个对调制解调器端的函数调用，所以必须导入框架 Jar。当我尝试导出我的 Apk 时，eclipse 给出了堆错误。但是，我增加了 JVM 堆大小并导出了 Apk。现在，我已经在设备上部署了应用程序，并且在 50 次试验中，我遇到了 OutofMemory 崩溃，并在如下代码中记录了 -error：

字节[] arr = 新字节[字节]；

或创建新对象。

我对如何防止应用程序崩溃感到困惑。这是因为 Jar 文件还是因为任何非 GC 收集的引用而发生这种情况。我有几个地方的清单。如何取消引用它们？

请教育我，任何指导表示赞赏。

# javascript - 初始值不正确

> ID：11250796
> 
> 赞同：0
> 
> 时间：2012-06-28T18:30:36.827
> 
> 标签：javascript, html

我有一个用户界面，用户在文本框中输入一个数字，在小数点后每三位数字后添加逗号。（例如：1000 会变成 1,000 等等......）

最初，当用户输入数字 1,200 时。框内的值被视为 1 而不是 1200。但是当我在同一个框内重新输入 1200 时。该数字变为正确的值 1200。

我该如何解决这个问题，以便无论如何该值都是 1200。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T18:35:31.993

最初检索值时，请使用 JavaScript 的替换功能删除所有逗号。例如，

```
var num = parseInt( myInput.value.replace(',','') ) 
```

# hadoop - 用 grunt shell 编写的 shell 脚本？

> ID：11250797
> 
> 赞同：1
> 
> 时间：2012-06-28T18:30:37.013
> 
> 标签：hadoop, apache-pig

我正在尝试编写一个打开 grunt shell 的 shell 脚本，在其中运行一个 pig 文件，然后将输出文件复制到本地机器。这可能吗？任何链接都会有所帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T19:25:54.593

您可以从命令行运行 pig 脚本：

```
#> pig -f script.txt 
```

脚本的尾部可以执行 fs 命令以将数据“获取”回本地文件系统

```
grunt> fs -get /path/in/hdfs /local/path 
```

# linux - 使用 nginx 提供 1GB 文件的最佳文件系统，在中等写入下，读取性能方面？

> ID：11250798
> 
> 赞同：9
> 
> 时间：2012-06-28T18:30:37.393
> 
> 标签：linux, nginx, filesystems

我将构建大型文件服务器，并且需要有关文件系统选择（linux）的堆栈溢出社区建议。

文件服务器将通过 Nginx 提供 1-2GB 大小的静态文件（每个请求都不同），持续适度写入磁盘（RAID5 SATA/7200 磁盘大量）。读写比约为 1:5-10，每秒每写入 1 个字节，读取 5-10 个。对我来说最重要的是读取性能，我可以忍受较慢的写入。

哪种 Linux 文件系统是该任务的最佳解决方案？为什么:) 谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T07:36:05.343

每个“真实”磁盘（主轴）实现了 80MB/s 的“随机读取”性能。这是我的发现。

因此，首先要确定需要向用户推送多少流量以及每台服务器需要多少存储空间。

您可以跳过下面给出的磁盘设置建议，因为您已经进行了 RAID5 设置。

> 让我们以具有 3 * 2TB 磁盘的专用 1Gbps 带宽服务器为例。保留第一个磁盘专用于操作系统和 tmp。对于其他 2 个磁盘，您可以创建一个软件 RAID（对我来说，它比板载硬件 RAID 工作得更好）。否则，您需要在独立磁盘上平均划分文件。想法是保持两个磁盘共享读/写负载相等。软件 raid-0 是最佳选择。

**Nginx Conf** 有两种方法可以使用 nginx 实现高性能。

1.  使用方向

    开启；
    方向 512; output_buffers 1 8m;

    “此选项将要求您拥有大量内存” 需要大约 12-16GB 的内存。

2.  用户态 io

    output_buffers 1 2m；

    “确保您已将预读设置为 4-6MB 以进行软件 RAID 挂载” blockdev --setra 4096 /dev/md0 （或独立磁盘挂载）

    此设置将优化使用系统文件缓存，并且需要更少的内存。需要大约 8GB 的​​内存。

常见注释：

*   保持“发送文件关闭；”

> 您可能还想使用带宽限制在可用带宽上启用 100 个连接。每个下载连接将使用 4MB 的活动内存。

```
 limit_rate_after 2m;
        limit_rate 100k; 
```

上述两种解决方案都可以轻松扩展到 3 磁盘服务器上的 1k+ 并发用户。假设您有 1Gbps 的带宽，并且每个连接都被限制在 1Mb/ps 需要额外的设置来优化磁盘写入而不影响读取。

将所有上传到挂载上的主操作系统磁盘说 /tmpuploads。这将确保在进行大量读取时不会出现间歇性干扰。然后使用带有 oflag=direct 的“dd”命令从 /tmpuploads 移动文件。就像是

```
dd if=/tmpuploads/<myfile> of=/raidmount/uploads/<myfile> oflag=direct bs=8196k 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-29T05:48:34.893

为了通过提供大量内容提供最佳结果，还有其他需要调整的内容。请看下面[Nginx 核心开发者的评论](http://mailman.nginx.org/pipermail/nginx/2012-May/033761.html)：

1.  关闭**sendfile**，由于无法控制预读（因此阻止从磁盘读取），它在 linux 下的此类工作负载上效果不佳。

    发送文件关闭；

2.  使用大**输出缓冲区**

    输出缓冲区 1 512k

3.  尝试使用**aio**来确保更好的磁盘并发性（并注意在 linux 下它也需要directio），即类似这样的东西

    开启；方向 512;

其他建议：

1.  检查文件系统交换未使用

2.  文件系统 - ext4、xfs。很好地启用 data_writeback 和 noatime 挂载选项

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T21:41:00.763

非常大的文件往往不太依赖于您使用的文件系统，现代文件系统（即不是 FAT！）在将它们分配到大的连续存储块中做得很好，从而最大限度地减少了查找延迟。您倾向于看到它们之间的差异在于小文件性能、空间不足情况下的抗碎片性、并发性等......存储大文件是一个相对容易的问题，我怀疑您会看到可测量的差异。

但与往常一样：如果您真的关心，请进行基准测试。关于文件系统性能没有简单的答案。

# php - PHP执行命令并记录输出，无需等待

> ID：11250799
> 
> 赞同：8
> 
> 时间：2012-06-28T18:30:40.200
> 
> 标签：php, windows, linux, cmd

我使用 exec() 来执行命令，无论是 linux 还是 windows。

你如何执行命令，linux和windows，并在不等待的情况下记录输出？

我知道对于 linux，不要等待输出：`command* > /dev/null 2>/dev/null &`

并记录 linux 的输出： `command* > /path/to/log.txt 2>/path/to/error.txt`

您将如何在一个命令中进行记录并将其设置为后台？窗户也会是什么样子？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-28T18:32:20.327

在 Linux 上，您可以执行以下操作：

```
exec('command* > /dev/null 2>/dev/null &'); 
```

在 Windows 上，您可以执行以下操作：

```
pclose(popen('start /B cmd /C "command* >NUL 2>NUL"', 'r')); 
```

这两个示例都禁用了输出和错误，它们转到`/dev/null`（linux）或`NUL`（windows），这意味着它们“无处”存储。

您可以将这些替换为系统上的有效路径。

在 Linux 上，`&`最后的 a 将其置于后台。在 Windows 上，这更复杂，需要[`start`](http://ss64.com/nt/start.html)调用进程并[`cmd`](http://ss64.com/nt/cmd.html)允许重定向流。

# joomla - joomfish 在哪里存储翻译内容？

> ID：11250801
> 
> 赞同：0
> 
> 时间：2012-06-28T18:30:54.860
> 
> 标签：joomla, phpmyadmin, joomla1.5, joomfish

这看起来很简单，但是...我正在尝试查找翻译内容，但是在 phpmyadmin 的哪个表中？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T18:36:37.920

在 J1.5 中，表格的名称中包含“jf” - jos_jf_content。

如果您可以确定正确的表，则此 SQL 应该可以帮助您入门：

```
SELECT
    j.`introtext`,j.`fulltext`      
    jf.`introtext`,jf.`fulltext`      
FROM jos_content AS j
INNER JOIN jmo_jfcontent AS jf ON (j.id = jf.id)
WHERE (j.alias ='branchen') 
```

它不会按原样运行，因为我不知道表结构或列名，但是当您识别表和主键时，它应该相对容易适应。

# javascript - 使用 jQuery mobile，想要完全禁用导航

> ID：11250803
> 
> 赞同：1
> 
> 时间：2012-06-28T18:31:17.003
> 
> 标签：javascript, jquery, jquery-mobile

我们希望将 jquery mobile 用于我们网站的所有方面，但完全禁用页面转换，因为我们需要自己处理导航。到目前为止，我们添加了以下内容但无济于事：

```
$(document).on("mobileinit", function () {
                $.mobile.ajaxLinksEnabled = false;
                $.mobile.ajaxFormsEnabled = false;
            }); 
```

我们的主要问题是，所有的“href”属性值都被一个井号标签（只是一个#）替换，并且丢失了我们原来的href值，导致我们的导航明显失败。

如何防止 jQuery mobile 完全替换我的 href 属性？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T21:15:48.260

```
<script src="jquery-1.7.1.js"></script>
<script>
$(document).on("mobileinit", function () {
    $.mobile.ajaxEnabled = false;
});
</script>
<script src="jquery-mobile-1.1.0.js"></script> 
```

我不确定你在哪里得到了`ajaxLinksEnabled`这些`ajaxFormsEnabled`选项，但它们没有在“配置默认”文档页面上列出：http: [//jquerymobile.com/demos/1.1.0/docs/api/globalconfig.html](http://jquerymobile.com/demos/1.1.0/docs/api/globalconfig.html)。尝试使用上述选项，`ajaxEnabled`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T13:38:51.387

谢谢！事实证明，我需要将 linkBindingEnabled 设置为 false。这是我的脚本：

```
<script type="text/javascript">
            $(document).on("mobileinit", function () {
                // Reference: http://jquerymobile.com/demos/1.1.0/docs/api/globalconfig.html
                $.extend($.mobile, {
                    linkBindingEnabled: false,
                    ajaxEnabled: false
                });
            });
        </script> 
```

# xml - 一个非常基本的 XPath 错误

> ID：11250813
> 
> 赞同：0
> 
> 时间：2012-06-28T18:31:48.890
> 
> 标签：xml, xpath

我使用[http://xpath.online-toolz.com/tools/xpath-editor.php](http://xpath.online-toolz.com/tools/xpath-editor.php) 作为在线 XPath 评估器。我尝试了其他几个，但都是一样的

我的 xml 中有以下内容：-

```
<?xml version="1.0"?>
<test xmlns="abc">
</test> 
```

现在 XPath 查询

```
/
. 
```

给我输出：-

```
<test xmlns="abc">
</test> 
```

但是，查询

```
test
/test
//test 
```

根本不要给我任何输出。我犯了一个非常基本的错误，但我不知道是什么。我认为这与命名空间有关，但将查询更改为

```
abc:test 
```

也无济于事，因为它给出了 Invalid Expression 错误。

我正在使用[http://www.w3schools.com/xpath](http://www.w3schools.com/xpath) http://www.tizag.com/xmlTutorial/xpathtutorial.php & [http://oreilly.com/perl/excerpts/system-admin-with-perl /十分钟-xpath-utorial.html](http://oreilly.com/perl/excerpts/system-admin-with-perl/ten-minute-xpath-utorial.html)

作为我的 XPath 教程的来源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T18:34:24.193

您的目标文件中没有明确的命名空间前缀，但您仍然需要满足它们。你可以写

```
/*[local-name()='test' and namespace-uri()='abc'] 
```

您的“abc”是一个命名空间URI，而不是命名空间前缀。它可能是无效的，因为大多数工具会针对 URI 形式对其进行测试，例如

```
http://www.abc.com/ 
```

更好的文件是：

```
<test xmlns="http://www.abc.com">
</test> 
```

当您的查询是：

```
/*[local-name()='test' and namespace-uri()='http://www.abc.com/'] 
```

我已经在您的网站上对此进行了测试，并且可以正常工作。

表格

```
abc:test 
```

将取决于将前缀设置`abc`为`'http://www.abc.com/'`的机制，并且站点上似乎没有机制

# spring - 弹簧控制器未处理请求

> ID：11250817
> 
> 赞同：0
> 
> 时间：2012-06-28T18:32:20.027
> 
> 标签：spring, spring-mvc

我已经按照以下方式配置了使用**Spring 3.1.1.RELEASE的 Spring MVC 应用程序**

**web.xml**

```
<servlet>
    <servlet-name>springmvc</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/context/*-context.xml</param-value>
    </init-param>   
    <load-on-startup>1</load-on-startup>
  </servlet>

  <servlet-mapping>
    <servlet-name>springmvc</servlet-name>
    <url-pattern>/cgi/*</url-pattern>
  </servlet-mapping> 
```

**springmvc-servlet.xml**

```
<context:component-scan base-package="com.pokuri.mvc.controllers"/> 
```

**用户控制器.java**

```
package com.pokuri.mvc.controllers;

@Controller
@RequestMapping("/user")
public class UserController {

    @RequestMapping(method=RequestMethod.GET)
    @ResponseBody
    public String defaultRequest(){
        return "It's a default handler method";
    }   

} 
```

**索引.jsp**

```
<a class="action" href="cgi/user">Default Action</a> 
```

**服务器登录初始化springmvc应用程序：**

```
23:53:04,406 INFO  [DispatcherServlet] FrameworkServlet 'springmvc': initialization started
23:53:04,468 INFO  [XmlWebApplicationContext] Refreshing WebApplicationContext for namespace 'springmvc-servlet': startup date [Thu Jun 28 23:53:04 IST 2012]; root of context hierarchy
23:53:04,609 INFO  [XmlBeanDefinitionReader] Loading XML bean definitions from ServletContext resource [/WEB-INF/context/services-context.xml]
23:53:04,890 INFO  [DefaultListableBeanFactory] Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@6c4fe: defining beans [dummyService]; root of factory hierarchy
23:53:05,156 INFO  [DispatcherServlet] FrameworkServlet 'springmvc': initialization completed in 750 ms
.....
.....
23:56:17,875 WARN  [PageNotFound] No mapping found for HTTP request with URI [/springmvc/cgi/user] in DispatcherServlet with name 'springmvc' 
```

当我单击 index.jsp 中的该链接时，我收到 404 错误。我觉得我可能犯了一个愚蠢的错误。但是，无法跟踪它。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T01:08:24.810

看起来您的 DispatcherServlet 正在寻找以`-context.xml`. 但是你的 Spring 配置文件被称为`springmvc-servlet.xml`.

# android-layout - 模拟器上的Jquery mobile + phonegap布局在设备上不一样

> ID：11250823
> 
> 赞同：1
> 
> 时间：2012-06-28T18:32:32.820
> 
> 标签：android-layout, jquery-mobile, cordova, emulation

我有一个简单的应用程序，我尝试使用 jquery 显示一些文本、滑块和黄色按钮，并使用 phonegap 将其变成本机应用程序。在我的模拟器上看起来不错

但在我的设备上，它看起来真的很伤心。没有黄色按钮，没有滑块，只有纯白色背景和蓝色链接代替了应该是滑块和按钮的位置。

我使用的是三星 Galaxy S。有人能告诉我为什么会这样吗？

# backbone.js - 使用 Backbone Marionette 从弹出模式添加到集合

> ID：11250825
> 
> 赞同：2
> 
> 时间：2012-06-28T18:32:35.177
> 
> 标签：backbone.js, marionette

我对 Backbone 和 Marionette 还很陌生，很难让我的观点交流。

我有一个显示项目列表的复合视图。要将新项目添加到列表中，我有一个弹出模式，它在与复合视图分开的新项目视图中打开。

我不确定这是不是最好的方法，但在模式中，我创建了一个包含所有项目的集合的新实例，并将新项目添加到该集合中。这个新项目显示在原始复合视图中，但仅在我刷新页面之后。

我似乎无法弄清楚如何让复合视图监听添加事件并在添加新模型后渲染它。

我在正确的轨道上吗？如果没有，我应该怎么做才能从模式中添加到集合中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T19:10:37.267

我想我已经弄清楚了。在创建模态视图时，我没有在模态视图中创建新集合，而是将组合视图中的集合作为参数传入。现在，当我在模式中添加新模型时，会在两个版本的集合上自动触发“添加”事件，并且视图会自动呈现新模型。无需像我想的那样绑定任何额外的事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T07:37:59.380

您的解决方案将起作用，但意味着您的视图非常紧密耦合。您可能想考虑改用事件（请参阅[如何将在 ItemView 中单击的模型发送到同一页面上的另一个 ItemView？](https://stackoverflow.com/questions/16470569/how-do-i-send-a-model-that-was-clicked-on-within-a-itemview-to-another-itemview/16483654#16483654)）

您的功能如何处理事件：

1.  在模态中，您输入要创建的模型的数据
2.  当您按下“保存”按钮时，
    1.  您验证并保存模型`var myNewModel = ...`
    2.  你触发一个事件：`MyApp.MySubApp.trigger("item:add", myNewModel)`
3.  在列表视图的控制器中，您侦听该事件，并将新模型添加到集合中。

控制器中的处理程序代码如下所示：

```
MyApp.MySubApp.on("item:add", function(model){
  this.myCollection.add(model);
}); 
```

如果您想了解有关使用事件的更多信息，请查看我编写的 2 个 Marionette 教程：

*   [http://davidsulc.com/blog/2012/04/15/a-simple-backbone-marionette-tutorial/](http://davidsulc.com/blog/2012/04/15/a-simple-backbone-marionette-tutorial/)
*   [http://davidsulc.com/blog/2012/05/06/tutorial-a-full-backbone-marionette-application-part-1/](http://davidsulc.com/blog/2012/05/06/tutorial-a-full-backbone-marionette-application-part-1/)

两者都使用事件在应用程序内传递信息。

此外，这里还解释了基本事件：http: [//samples.leanpub.com/marionette-gentle-introduction-sample.pdf](http://samples.leanpub.com/marionette-gentle-introduction-sample.pdf)

# javascript - 如何从此 Web 链接到 C# 获取时间计数器

> ID：11250827
> 
> 赞同：0
> 
> 时间：2012-06-28T18:32:43.633
> 
> 标签：javascript, c#-3.0, webbrowser-control

[http://www.tumangobajito.com/auctions/Blackberry-9360-Blanco-484](http://www.tumangobajito.com/auctions/Blackberry-9360-Blanco-484)

我已经使用 WebBrowser 控件来导航此链接，但是有 javascript 错误，所以我看不到计时器工作。无论如何，我是否可以将此计时器添加到 C# 形式的文本框中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T19:06:23.333

计时器正在与内部结束时间字段进行比较。您可以尝试对脚本进行逆向工程，并查看该数据是否是您可以访问的（有 8 个 Javascript 文件处于活动状态，所以我让您看一下）。

另一种方法是使用 C# 下载页面。然后解析数据以仅查找所需的内容。

```
<div id="timer_484" class="timer countdown" title="1341363012">
CAPTURE THE DATA HERE
</div> 
```

如果您需要来自不同页面的时间，则必须相应地修改解析器以适应。但是，一旦有了这些数据，您就可以编写自己的倒数计时器（如果这是您使用的路线）。

# php - PHPMailer 如何引用 HTML 表单中发布的数据？

> ID：11250828
> 
> 赞同：-1
> 
> 时间：2012-06-28T18:32:44.237
> 
> 标签：php, phpmailer

我有一个 HTML 表单，当用户提交时，它会调用一个 php 文件将表单内容邮寄给我。我想使用 PHPMailer，但我想知道 PHPMailer 如何引用表单数据。是否与普通 PHP 相同，我只是使用`$_POST['inputName']`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T18:37:25.047

是的，你可以使用它，它是一样的，因为*PHPMailer 也是用 PHP 制作的*

# cocos2d-iphone - Cocos2d-Things 在模拟器中显得更大

> ID：11250829
> 
> 赞同：0
> 
> 时间：2012-06-28T18:32:46.530
> 
> 标签：cocos2d-iphone, screen

我最近注意到，在使用 Cocos2d 时，模拟器和真实设备上的情况有所不同。为了确保我做了以下事情： 1\. 我创建了一个空白的 Cocos2d 项目。在 init 方法中，我从 Icon-72.png（可在 Cocos2d 模板的资源文件夹中找到）创建了 7 个精灵并将它们添加到屏幕上。在模拟器中只有 6.5 个精灵可以并排容纳，而在iPod touch 的所有七个精灵都可以轻松容纳，几乎一半的屏幕宽度仍未使用。2.然后我从单一视图应用程序模板创建了一个项目。我在项目中添加了相同的 Icon-72.png。然后在故事板上我添加了 6 个图像视图并将它们的图像属性设置为 Icon-72.png。这次我在模拟器和设备上得到了完全相同的结果。

我想应该对如何使用 Cocos2d 解决这个问题进行一些调整，因为这不是 Apple 的错。你知道如何处理这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T22:53:47.160

iPod Touch 将是一个视网膜显示器。Cocos2d 不会自动将图像大小加倍。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T12:05:48.657

iPod Touch 可以有视网膜显示器，而模拟器不会有它。如果您需要与 iPod Touch 相同的显示屏 您可以使用带有 Retina 显示屏的 iPhone 模拟器，您将获得相同的屏幕。您可以使用的另一个选项是复制并粘贴带有 -hd 前缀的相同文件 ex:(Icon-72-hd.png) 大小为 72x72，您可以获得相同的结果。

对于您面临的问题，cocos2d 的版本或 Apple 的版本都没有问题。

我想我的解释确实很糟糕，但你会理解我的解释。

# class - VBA byref 参数不匹配

> ID：11250832
> 
> 赞同：1
> 
> 时间：2012-06-28T18:33:04.563
> 
> 标签：class, vba, byref

我创建了一个名为 Class1 的类，在另一个模块中，我想像这样使用该类：

```
Dim budgeunit As Class1

Sub Creattree()
    Dim lvl1p, lvl1m, lvl1dm As Class1

    Set lvl1p = New Class1
    lvl1p.setName ("pear")
    Set lvl1m = New Class1
    lvl1m.setName ("Mango")

    Set budgeunit = New Class1

    budgeunit.addtochildren (lvl1p), budgeunit.addtochildren(lvl1m)
End Sub 
```

但是当我编译它时，它突出显示了 budgeunit.addtochildren(lvl1m) 并说 Byref 参数不匹配。我已经声明了所有论点，我不知道为什么会这样。班级代码：

```
Dim Children() As Class1
Dim Parent() As Class1
Public level As Integer
Public name As String
Function setName(nm As String)
    name = nm
End Function

Function addtochildren(node As Class1)
    num = Children.Count
    ReDim Children(num + 1) As String
    Children(num) = node
    node.addParent (Me)
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T18:54:49.530

Stefan 的回答是正确的，但也存在其他问题。

这应该是什么意思？

```
budgeunit.addtochildren (lvl1p), budgeunit.addtochildren(lvl1m) 
```

你不能用这样的逗号分隔两个语句。你是这个意思吗？

```
budgeunit.addtochildren lvl1p
budgeunit.addtochildren lvl1m 
```

此外，您应该修改您对函数的使用，并可能用 Subs 替换它们。你不期望他们有任何输出，所以......

另一件事是您使用括号。subs 的参数（以及没有预期返回值的函数）不应被括号括起来；在某些情况下，有括号会使事情出错。（如果您使用`Call`符号，则有一些限制，但您不使用。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T18:41:19.540

您对变量的声明可能与您预期的有所不同。尝试：

```
Sub Creattree() 
    Dim lvl1p as Class1, lvl1m as Class1, lvl1dm As Class1 
```

在您的声明中，您创建了两个 Variant 类型和 Class1 类型的变量。

# java - 如何在运行时将 JSR-045 SMAP 信息添加到 Java 堆栈跟踪？

> ID：11250834
> 
> 赞同：6
> 
> 时间：2012-06-28T18:33:08.703
> 
> 标签：java, jsp, bytecode

当使用 JSP 或其他转换为 Java 源代码（或存根）的语言时，通常会生成一个 SMAP 文件，稍后可以将其嵌入到 Class 文件中，以便调试器显示更好的堆栈跟踪（或者在 Jasper 的情况下）它会自动嵌入）。

有一个[旧的 JVM 错误（或 RFE）](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4972961)来添加支持以在堆栈跟踪中包含 SMAP 信息，但由于缺乏活动，Sun/Oracle 的家伙似乎更喜欢每个人都自己后处理他的堆栈跟踪。

所以这是我的问题：如何做到这一点？周围是否有图书馆可以为您完成艰苦的工作，还是您必须自己实现所有内容？

我已经找到了一个可以访问异常对象和加载“启用 SMAP”类的类加载器的好地方。现在我不得不

*   迭代堆栈跟踪
*   如果我能找到课程，请检查每个条目
*   使用例如[ASM](http://asm.ow2.org/)分析类以提取 SMAP 信息
*   编写一个 SMAP 解析器，从 SMAP 信息中解析出反向行映射和文件名
*   根据映射将堆栈跟踪元素替换为新元素（或者添加一个新元素？哪个更好？）
*   缓存一些信息，这样如果完全相同（或类似）的堆栈跟踪在几秒钟后重新出现，我就不必再次执行相同的操作。

而且由于这似乎是一项乏味且容易出错的任务，我希望有人已经这样做了，我只需要在我的依赖项中添加一个库并`makeStacktraceFancy`为我的异常调用一个方法，以便在我记录它们之前使堆栈跟踪变得漂亮.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T19:12:04.663

由于似乎没有人知道现有的解决方案，我推出了自己的快速和肮脏的解决方案。

它不支持所有 SMAP 功能（它仅解析第一层，并忽略供应商部分和默认状态信息），但足以满足我的需求。

由于从类中提取 SMAP 属性的代码只有大约 50 行，因此我决定重新实现它，而不是添加 ASM 作为依赖项。如何在 ASM 中使用它的代码在评论中。

由于它只进行了很少的测试（在几个测试用例中），如果遇到任何严重错误，我会编辑帖子。

代码如下：

```
/* 
 * SMAPSourceDebugExtension.java - Parse source debug extensions and
 * enhance stack traces.
 * 
 * Copyright (c) 2012 Michael Schierl
 * 
 * All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 * 
 * - Redistributions of source code must retain the above copyright notice,
 *   this list of conditions and the following disclaimer.
 *   
 * - Redistributions in binary form must reproduce the above copyright
 *   notice, this list of conditions and the following disclaimer in the
 *   documentation and/or other materials provided with the distribution.
 *   
 * - Neither name of the copyright holders nor the names of its
 *   contributors may be used to endorse or promote products derived from
 *   this software without specific prior written permission.
 *   
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND THE CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 * HOLDERS OR THE CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,
 * INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS
 * OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR
 * TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE
 * USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
package smap;

import java.io.*;
import java.util.*;
import java.util.regex.*;

/**
 * Utility class to parse Source Debug Extensions and enhance stack traces.
 * 
 * Note that only the first stratum is parsed and used.
 * 
 * @author Michael Schierl
 */
public class SMAPSourceDebugExtension {

    /**
     * Enhance a stack trace with information from source debug extensions.
     * 
     * @param t
     *            Throwable whose stack trace should be enhanced
     * @param cl
     *            Class loader to load source debug extensions from
     * @param keepOriginalFrames
     *            Whether to keep the original frames referring to Java source
     *            or drop them
     * @param packageNames
     *            Names of packages that should be scanned for source debug
     *            extensions, or empty to scan all packages
     * @throws IOException
     *             if an I/O error occurs
     */
    public static void enhanceStackTrace(Throwable t, ClassLoader cl, boolean keepOriginalFrames, String... packageNames) throws IOException {
        enhanceStackTrace(t, new HashMap<String, SMAPSourceDebugExtension>(), cl, keepOriginalFrames, packageNames);
    }

    /**
     * Enhance a stack trace with information from source debug extensions.
     * Provide a custom cache of already resolved and parsed source debug
     * extensions, to avoid parsing them for every new exception.
     * 
     * @param t
     *            Throwable whose stack trace should be enhanced
     * @param cache
     *            Cache to be used and filled
     * @param cl
     *            Class loader to load source debug extensions from
     * @param keepOriginalFrames
     *            Whether to keep the original frames referring to Java source
     *            or drop them
     * @param packageNames
     *            Names of packages that should be scanned for source debug
     *            extensions, or empty to scan all packages
     * @throws IOException
     *             if an I/O error occurs
     */
    public static void enhanceStackTrace(Throwable t, Map<String, SMAPSourceDebugExtension> cache, ClassLoader cl, boolean keepOriginalFrames, String... packageNames) throws IOException {
        StackTraceElement[] elements = t.getStackTrace();
        List<StackTraceElement> newElements = null;
        for (int i = 0; i < elements.length; i++) {
            String className = elements[i].getClassName();
            SMAPSourceDebugExtension smap = cache.get(className);
            if (smap == null) {
                boolean found = false;
                for (String packageName : packageNames) {
                    if (className.startsWith(packageName + ".")) {
                        found = true;
                        break;
                    }
                }
                if (found || packageNames.length == 0) {
                    InputStream in = cl.getResourceAsStream(className.replace('.', '/') + ".class");
                    if (in != null) {
                        String value = extractSourceDebugExtension(in);
                        in.close();
                        if (value != null) {
                            value = value.replaceAll("\r\n?", "\n");
                            if (value.startsWith("SMAP\n")) {
                                smap = new SMAPSourceDebugExtension(value);
                                cache.put(className, smap);
                            }
                        }
                    }
                }
            }
            StackTraceElement newFrame = null;
            if (smap != null) {
                int[] inputLineInfo = smap.reverseLineMapping.get(elements[i].getLineNumber());
                if (inputLineInfo != null && elements[i].getFileName().equals(smap.generatedFileName)) {
                    FileInfo inputFileInfo = smap.fileinfo.get(inputLineInfo[0]);
                    if (inputFileInfo != null) {
                        newFrame = new StackTraceElement("[" + smap.firstStratum + "]", inputFileInfo.path, inputFileInfo.name, inputLineInfo[1]);
                    }
                }
            }
            if (newFrame != null) {
                if (newElements == null) {
                    newElements = new ArrayList<StackTraceElement>(Arrays.asList(elements).subList(0, i));
                }
                if (keepOriginalFrames)
                    newElements.add(elements[i]);
                newElements.add(newFrame);
            } else if (newElements != null) {
                newElements.add(elements[i]);
            }
        }
        if (newElements != null) {
            t.setStackTrace(newElements.toArray(new StackTraceElement[newElements.size()]));
        }
        if (t.getCause() != null)
            enhanceStackTrace(t.getCause(), cache, cl, keepOriginalFrames, packageNames);
    }

    /**
     * Extract source debug extension from a class file, provided as an input
     * stream
     * 
     * @param in
     *            Input stream to read the class file
     * @return Source debug extension as a String, or <code>null</code> if none
     *         was found.
     * @throws IOException
     *             if an I/O error occurs
     */
//    // ASM version of the same method:
//    private static String extractSourceDebugExtension0(InputStream in) throws IOException {
//        ClassReader cr = new ClassReader(in);
//        final String[] result = new String[1];
//        cr.accept(new ClassVisitor(Opcodes.ASM4) {
//            @Override
//            public void visitSource(String source, String debug) {
//                result[0] = debug;
//            }
//        }, 0);
//        return result[0];
//    }
    private static String extractSourceDebugExtension(InputStream in) throws IOException {
        DataInputStream dis = new DataInputStream(in);
        boolean[] isSourceDebugExtension;
        dis.skipBytes(8);

        // read constant pool
        isSourceDebugExtension = new boolean[dis.readUnsignedShort()];
        int[] skipSizes = new int[] { 0, 0, 2, 4, 4, 0, 0, 2, 2, 4, 4, 4, 4, 2, 2, 3, 2, 2, 4 };
        for (int i = 1; i < isSourceDebugExtension.length; i++) {
            byte type = dis.readByte();
            int skipSize;
            if (type == 1) {
                String value = dis.readUTF();
                isSourceDebugExtension[i] = value.equals("SourceDebugExtension");
                skipSize = 0;
            } else if (type == 5 || type == 6) {
                skipSize = 8;
                i++;
            } else if (type > 1 && type < 19) {
                skipSize = skipSizes[type];
            } else {
                skipSize = 2;
            }
            dis.skipBytes(skipSize);
        }
        dis.skipBytes(6);
        int ifaces = dis.readUnsignedShort();
        dis.skipBytes(2 * ifaces);

        // skip fields and methods
        for (int k = 0; k < 2; k++) {
            int count = dis.readUnsignedShort();
            for (int i = 0; i < count; i++) {
                dis.skipBytes(6);
                int attrCount = dis.readUnsignedShort();
                for (int j = 0; j < attrCount; j++) {
                    dis.skipBytes(2);
                    int skip = dis.readInt();
                    dis.skipBytes(skip);
                }
            }
        }

        // read attributes and find SourceDebugExtension
        int attrCount = dis.readUnsignedShort();
        for (int i = 0; i < attrCount; i++) {
            int idx = dis.readUnsignedShort();
            int len = dis.readInt();
            if (isSourceDebugExtension[idx]) {
                byte[] buf = new byte[len];
                dis.readFully(buf);
                return new String(buf, "UTF-8");
            } else {
                dis.skipBytes(len);
            }
        }
        return null;
    }

    private final String generatedFileName, firstStratum;
    private final Map<Integer, FileInfo> fileinfo = new HashMap<Integer, FileInfo>();
    private final Map<Integer, int[]> reverseLineMapping = new HashMap<Integer, int[]>();

    private static final Pattern LINE_INFO_PATTERN = Pattern.compile("([0-9]+)(?:#([0-9]+))?(?:,([0-9]+))?:([0-9]+)(?:,([0-9]+))?");

    private SMAPSourceDebugExtension(String value) {
        String[] lines = value.split("\n");
        if (!lines[0].equals("SMAP") || !lines[3].startsWith("*S ") || !lines[4].equals("*F"))
            throw new IllegalArgumentException(value);
        generatedFileName = lines[1];
        firstStratum = lines[3].substring(3);
        int idx = 5;
        while (!lines[idx].startsWith("*")) {
            String infoline = lines[idx++], path = null;
            if (infoline.startsWith("+ ")) {
                path = lines[idx++];
                infoline = infoline.substring(2);
            }
            int pos = infoline.indexOf(" ");
            int filenum = Integer.parseInt(infoline.substring(0, pos));
            String name = infoline.substring(pos + 1);
            fileinfo.put(filenum, new FileInfo(name, path == null ? name : path));
        }
        if (lines[idx].equals("*L")) {
            idx++;
            int lastLFI = 0;
            while (!lines[idx].startsWith("*")) {
                Matcher m = LINE_INFO_PATTERN.matcher(lines[idx++]);
                if (!m.matches())
                    throw new IllegalArgumentException(lines[idx - 1]);
                int inputStartLine = Integer.parseInt(m.group(1));
                int lineFileID = m.group(2) == null ? lastLFI : Integer.parseInt(m.group(2));
                int repeatCount = m.group(3) == null ? 1 : Integer.parseInt(m.group(3));
                int outputStartLine = Integer.parseInt(m.group(4));
                int outputLineIncrement = m.group(5) == null ? 1 : Integer.parseInt(m.group(5));
                for (int i = 0; i < repeatCount; i++) {
                    int[] inputMapping = new int[] { lineFileID, inputStartLine + i };
                    int baseOL = outputStartLine + i * outputLineIncrement;
                    for (int ol = baseOL; ol < baseOL + outputLineIncrement; ol++) {
                        if (!reverseLineMapping.containsKey(ol))
                            reverseLineMapping.put(ol, inputMapping);
                    }
                }
                lastLFI = lineFileID;
            }
        }
    }

    private static class FileInfo {
        public final String name, path;

        public FileInfo(String name, String path) {
            this.name = name;
            this.path = path;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T19:01:53.980

不确定您要在这里实现什么。如果您只需要在记录时在堆栈跟踪中显示 jsp 和行号，那么最简单的方法是替换 logger 并在打印的堆栈跟踪中从 smap 显示 jsp 行号。这是[log4j 的一个补丁，它对](https://issues.apache.org/bugzilla/show_bug.cgi?id=45721)堆栈跟踪做了一些类似的更改。

但是，在当前的 IDE 中，您不会自动从类名导航到 jsp...

PS：顺便说一句，如果您要实现 SMAP 解析器，最好将其贡献回 ASM 项目...

# iphone - cocos2d 的声音滑块？

> ID：11250839
> 
> 赞同：2
> 
> 时间：2012-06-28T18:33:33.943
> 
> 标签：iphone, xcode4, cocos2d-iphone

任何关于如何为 cocos2d 制作一个控制声音的滑块的教程，你们推荐吗？有些教程看起来有点阴暗。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-29T13:18:08.827

您可以使用[CCControlExtension](https://github.com/YannickL/CCControlExtension)提供的滑块并使用回调方法来更改声音的音量，如此[处](https://stackoverflow.com/questions/8344845/is-it-possible-to-adjust-the-sound-volume-cocos2d)所述。

这里有一个“伪”代码向您展示如何实现这一点：

```
// Create your audio engine
[[SimpleAudioEngine sharedEngine] playBackgroundMusic:@"music.mp3"];

// Create the slider
CCControlSlider *slider = [CCControlSlider sliderWithBackgroundFile:@"sliderTrack.png" progressFile:@"sliderProgress.png" thumbFile:@"sliderThumb.png"];
slider.minimumValue = 0.0f; // Sets the min value of range
slider.maximumValue = 1.0f; // Sets the max value of range

// When the value of the slider will change, the given selector will be call
[slider addTarget:self action:@selector(valueChanged:) forControlEvents:CCControlEventValueChanged];

[self addChild:slider]; 

//...

- (void)valueChanged:(CCControlSlider *)sender
{
   // Change volume of your sounds
   [[SimpleAudioEngine sharedEngine] setEffectsVolume:sender.value];
   [[SimpleAudioEngine sharedEngine] setBackgroundMusicVolume:sender.value];
} 
```

我希望它会帮助你。

# php - 应该如何在内容页面选项卡中实现 Hashbang (AJAX)？

> ID：11250840
> 
> 赞同：0
> 
> 时间：2012-06-28T18:33:34.563
> 
> 标签：php, jquery, ajax, web-crawler, hashbang

你们有些人可能知道，Google 现在正在抓取 AJAX。到目前为止，该实现很优雅，但至少它仍然适用于 Yahoo 和 Bing AFAIK。

**背景：**我的网站由 Wordpress 和 HTML5 驱动。自定义帖子类型具有内容树类型，这些内容由 AJAX 驱动。在完全理解如何实现它们之前，我不使用 hashbangs (#!) 的解决方案是相当“有风险的”。每个链接作为 HREF 链接到 *site.com/article-one/?tab=first_tab*，**仅**显示所选选项卡 ( `<div>Content...</div>`) 的内容。像这样：

```
<a href="http://site.com/article-one/?tab=first_tab" data-tab="first_tab">This First Tab</a> 
```

您可能会注意到，data-tab 是 JavaScript 通过 AJAX Get 发送的值，它获取相关内容并在容器内呈现。另一方面，服务器获取变量并执行 a`<?php get_template_part('tab-first-tab'); ?>`来传递内容。

关于风险，好吧，我可以看到谷歌和其他搜索引擎将获取 *http://site.com/article-one/?tab=first_tab* 而不是*http://site.com/article-one/*，使用户访问该 URL，而不是显示带有自动选择的选项卡内容的主页。

现在的问题是避免这种情况的实施。

**Hashbang：**根据我所学到的，我应该这样做。

1.  HREF 应该成为`site.com/article-one/#!first-tab`
2.  JS 应该提取 href 的“first-tab”并将其传递给 $_GET（只是为了不使用“data-tab”）。
3.  JS 应该将 URL 更改为`site.com/article-one/#!first-tab`
4.  JS 应该检测 URL 是否有`#!first-tab`，并显示选定的选项卡而不是默认选项卡。

现在，对于服务器端的实现，我有点迷失在树林里。

1.  Wordpress 将如何处理`site.com/article-one/?_escaped_fragment_=first-tab`？
2.  我是否必须更改 .htaccess 中的某些内容？
3.  HTML 快照应该有什么？我的猜测是所有站点，但显示了请求的选项卡，而不是仅显示内容。

我认为我可以将 Wordpress 检测到 _escaped_fragment_ 时将处理的内容分开。如果被请求，就像谷歌一样，它将显示所有内容以及所选内容，如果不是，那是因为 AJAX 正在请求它并且只会显示内容。那应该是对的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T22:49:21.603

*我要说第三人称了。*

既然这没有回应，我有一个很好的理由，为什么你不应该这样做。是的，这与 Twitter 抨击他们的原因相同：

[http://danwebb.net/2011/5/28/it-is-about-the-hashbangs](http://danwebb.net/2011/5/28/it-is-about-the-hashbangs)

您应该制作普通的 URI，而不是做 hashbangs。例如，带有摘要选项卡的文章应该是“site.com/article/summary”，如果它是弹出的默认文章（或者它已经被请求），它也应该使用 pushState() 更改为该 URI。

如果用户选择“练习”选项卡，则 URL 应使用 pushState() 更改为“site.com/article/exercises”，同时站点通过 AJAX 加载内容，而您仍保持原来的 href 为“site.com /文章/练习”。如果没有 JavaScript，用户仍然应该看到内容 - 不仅是内容，还有选中选项卡的整个页面。

为此，应该对 .htaccess 进行一些编辑以处理 URL 中的 /[tab]。

# selenium-webdriver - Selenium2 WebDriver 发行说明

> ID：11250841
> 
> 赞同：0
> 
> 时间：2012-06-28T18:33:35.053
> 
> 标签：selenium-webdriver, webdriver, release-notes

我一直在四处寻找最新版本的发行说明，但找不到。谁有链接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T18:41:04.767

项目的不同部分对版本之间的更改有不同的日志。该项目最全面的变更日志是 Java 语言绑定的变更日志，可以在[此处](http://selenium.googlecode.com/git/java/CHANGELOG)找到。项目的其他部分可能有自己的变更日志，但它们通常仅限于项目该部分内的变更。示例包括[.NET 语言绑定](http://selenium.googlecode.com/git/dotnet/CHANGELOG)和[IE 驱动程序独立服务器](http://selenium.googlecode.com/git/cpp/iedriverserver/CHANGELOG)的更改日志。

# ruby-on-rails - CanCan - 检查模型内的权限

> ID：11250843
> 
> 赞同：0
> 
> 时间：2012-06-28T18:33:58.590
> 
> 标签：ruby-on-rails

我从cancan开始，我想知道如何检查模型内的权限或实现我想要的最佳方法是：

在我的用户表单中，我有用于角色分配的复选框，但只有管理员可以这样做。如果可以，我已经用 <% 隐藏了 html 中的复选框？:assign_roles, @user %> 但恶意用户可能会编辑 html 并添加复选框并选择他想要的角色。

所以我决定使用 before_save 方法来检查 current_user 是否可以分配角色但我无权访问 can？模型内部的方法。

有没有更好的方法来进行此验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:58:20.960

你可以试试[这个](https://github.com/ryanb/cancan/wiki/ability-for-other-users)来归档你的目标。因此，您将能够在模型上下文中的模型中使用`can?`和方法。`cannot?`

# java - 如何保留 ImageIcon 的文件名以供以后参考？

> ID：11250845
> 
> 赞同：0
> 
> 时间：2012-06-28T18:34:13.767
> 
> 标签：java, string, swing, jbutton, imageicon

鉴于此代码，

```
tableButton = new JButton(new ImageIcon("80F_FG2015.GIF")); 
```

我怎样`String`才能把它还给我，这样我就可以把它和另一个比较`String`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T18:49:06.870

解决问题的一种方法是创建

```
tableButton = new JButton(new ImageIcon("80F_FG2015.GIF", "80F_FG2015.GIF")); 
```

第二个参数是描述。ImageIcon.toString() 方法返回描述。因此，您可以很好地将此描述与另一个图像图标的描述进行比较

您可以按如下方式获取描述：

```
System.out.println(((ImageIcon)tableButton.getIcon()).getDescription()); 
//or
System.out.println(((ImageIcon)tableButton.getIcon()).toString()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T19:20:57.483

您可以使用 Reflection 来实现：

```
 ImageIcon icon = new ImageIcon(pathImg);
    JButton jButton1 = new JButton(icon);
    Field field = null;
    try {
        Class<? extends ImageIcon> clazz = ((ImageIcon) jButton1.getIcon()).getClass();
        //Get the field "filename" where the Image path is stored. 
        field = clazz.getDeclaredField("filename");
        field.setAccessible(true);
        String path = (String) field.get(icon);
    } catch (NoSuchFieldException ex) {
        Logger.getLogger(AAMainWindow.class.getName()).log(Level.SEVERE, null, ex);
    } catch (SecurityException ex) {
        Logger.getLogger(AAMainWindow.class.getName()).log(Level.SEVERE, null, ex);
    } catch (IllegalArgumentException ex) {
        Logger.getLogger(AAMainWindow.class.getName()).log(Level.SEVERE, null, ex);
    } catch (IllegalAccessException ex) {
        Logger.getLogger(AAMainWindow.class.getName()).log(Level.SEVERE, null, ex);
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T18:40:18.183

您可以创建一个扩展 JButton 的新类。将字符串存储在类中。

```
class MyButton extends JButton
{
    private String filename;

    public MyButton(String filename)
    {
        super(new ImageIcon(filename));
        this.filename = filename;
    }

    public String getFilename()
    {
        return filename;
    }
} 
```

# biztalk - 映射错误：函数 userCShare:xxxx() 失败

> ID：11250852
> 
> 赞同：0
> 
> 时间：2012-06-28T18:34:40.897
> 
> 标签：biztalk, biztalk-2010, biztalk-mapper, biztalk-deployment

我有一个接收端口，一个带有地图的发送端口。该地图有一个脚本functoid。当我将文件放到目录中时，biztalk 应用程序会拾取文件，将其映射到新消息并删除文件。

我已经部署，它正在拾取文件，结束时出错说：

“函数'userCSharp：DetermineMessageID（）'失败。”

我的地图不再包含此方法，也不再引用它。我可以在开发时使用地图上的测试、验证和调试功能，它们都可以正常工作。我已删除该应用程序，取消部署包含地图和架构的程序集并重新部署，但仍然出现错误。是否需要刷新其他内容？

# forms - 玩2.0密码字段构造函数：没有值属性？

> ID：11250853
> 
> 赞同：1
> 
> 时间：2012-06-28T18:34:43.210
> 
> 标签：forms, security, scala, playframework-2.0

不确定这是安全功能，疏忽还是我错过了海浪，但想知道为什么[密码字段构造函数没有 value 属性](https://github.com/playframework/Play20/blob/master/framework/src/play/src/main/scala/views/helper/inputPassword.scala.html)

这对于用户注册和其他表单创建事件来说不是问题，但是当例如用户续订表单没有填写密码字段时（因此验证失败，这很讽刺，因为他们刚刚登录）为了能够在第一时间更新;-))

我的解决方法是通过将值属性作为额外参数提供来手动设置它：

```
@inputPassword(
  _form("password"), '_label-> "Password*", 'class-> "required", 
  'value-> _form("password").value map{Some(_)} getOrElse Some("")
) 
```

但是，与其他输入元素一样，会更喜欢默认包含的 value 属性。是的，我可以覆盖它，但想知道delay-O是什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T19:27:38.270

对我来说，您不应该以任何方式检索用户密码，因为在将密码存储在某个地方之前应该对其进行加密。

# javascript - jqgrid自定义删除消息

> ID：11250855
> 
> 赞同：0
> 
> 时间：2012-06-28T18:34:55.903
> 
> 标签：javascript, jquery, jqgrid

我正在使用 jqgrid，我喜欢在删除一行时显示自定义消息。像如果我删除 column1 包含“value1”的行，那么我的消息应该是“你想删除这个配置吗？”，或者如果删除行的 column1 有“value2”，那么消息应该是“删除这将影响正常的流程。你真的要删除吗？“这样的东西。是否可以使用 jqgrid 来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T21:24:00.310

我建议您在[答案](https://stackoverflow.com/a/10050428/315935)`beforeShowForm`中更改喜欢它的删除消息的文本。

# javascript - 根据Javascript中的日期查找日期

> ID：11250859
> 
> 赞同：0
> 
> 时间：2012-06-28T18:35:15.140
> 
> 标签：javascript

这里唯一的新东西是使用`eval()`：

```
myDate=new Date(eval('"'+aText.value+'"')) 
```

我们需要带有引号的日期，但是，当它出现在框中时，它没有任何引号。所以我们添加引号。但这只是一个字符串，我们想要一个`Date`对象。因此，我们使用`eval()`来进行更改。

它没有给出正确的答案

```
function getTheDay(aText)
{

    myDays = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"]
    console.log(eval('"' + aText.value + '"'));
    myDate = new Date(eval('"' + aText.value + '"'))
    console.log(myDate)
    document.write(myDays[myDate.getDay()], "day");

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T18:38:12.853

尝试：

```
function getTheDay(dateText) {
    myDays = [
        "Sunday",
        "Monday",
        "Tuesday",
        "Wednesday",
        "Thursday",
        "Friday",
        "Saturday",
        "Sunday"];

    return myDays[new Date(dateText).getDay()];
}

document.write(getTheDay(aText.value)); 
```

您使用`eval()`. 绝对没有理由必须使用`eval()`它来完成这项工作。

请注意，JavaScript 要求日期采用[特定格式](https://www.rfc-editor.org/rfc/rfc2822#page-14)。如果用户在控件中键入的值`aText`与此格式不匹配，那么您将获得运行时异常，或者构造的 Date 对象将不具有您期望的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T18:39:20.443

你为什么要这样做`eval('"'+aText.value+'"')`？

`aText.value`是一个字符串。你可以这样做`new Date(aText.value)`。

```
var myDays = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"];
var myDate = new Date(aText.value);
console.log(myDays[myDate.getDay()]); 
```

**注意**：您不需要在变量中“添加引号”来生成字符串，这不是变量的工作方式。

```
var a = 'hello world';
var b = a;  // a is a string variable.  no need to add quotes or "eval" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T18:37:59.887

你不需要`eval`那个......几乎任何正常格式化的日期都应该工作。

`new Date('June 28, 2006')` 2006 年 6 月 28 日星期三 00:00:00 GMT-0400（东部夏令时间）

# iphone - 当设备方向改变时如何旋转视图保持正确的窗口大小

> ID：11250861
> 
> 赞同：1
> 
> 时间：2012-06-28T18:35:28.377
> 
> 标签：iphone, objective-c, xcode, ipad, cocos2d-iphone

我想在使用 cocos2d 的 iPad 应用程序中支持完整的设备方向。为了实现这一点，我想我会像以前在没有 cocos2d 的应用程序上工作时一样为 shouldAutorotateToInterfaceOrientation 返回 YES，但在这种情况下，我的视图无法正确调整大小。为了向您展示我最终的结果，这是示例图片。 ![未调整大小的视图](../Images/b433447a54274d2b4e8fa47d39a42871.png)

您可以看到方向是横向的，但视图仍然是纵向的。谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T04:09:33.167

添加以下函数并执行相应的更改

```
-(void) willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {
    switch (toInterfaceOrientation) {
        case UIInterfaceOrientationPortrait:
            break;
        case UIInterfaceOrientationLandscapeLeft:
            break;
        case UIInterfaceOrientationLandscapeRight:
            break;
        case UIInterfaceOrientationPortraitUpsideDown:
            break;
        default:
            break;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T18:40:57.670

您必须设置视图的 autosize 属性。快速的方法是在“尺寸检查器”中设置它![尺寸检查员](../Images/b13a5d649c883b47918d84f09d62b3e3.png)

# html - 正则表达式查找内容，然后回溯到初始 HTML 标记

> ID：11250869
> 
> 赞同：1
> 
> 时间：2012-06-28T18:36:11.570
> 
> 标签：html, regex, editor

我正在尝试使用正则表达式来匹配以`<p>`标签开头并具有`some specific content`. 然后，我想替换从特定段落标签到页面末尾的所有内容。

我试过使用表达式`<p.*?some content.*</html>`，但它会抓住`<p>`它看到的第一个标签，然后一直到最后。我希望它只识别内容之前的段落标记，允许段落标记和内容之间的其他内容和标记。

我怎样才能`some specific content`使用正则表达式，然后回溯到它在内容之前看到的第一个段落标签，然后从那里选择所有内容到最后？

如果有帮助，我正在使用 EditPad Pro 的“搜索和替换”功能（尽管这可能适用于任何使用正则表达式的东西）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T18:39:48.137

对于简单的输入，使用正则表达式

`<p[^<]*some content.*<\/html>`

但更安全的是使用正则表达式

`<p(?:[^<]*|<(?!p\b))*some content.*<\/html>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T18:47:28.497

首先，这是 Java 代码，但我想它可以很容易地适应其他正则表达式引擎/编程语言。

因此，据我了解，您需要一种情况，即给定输入的一部分`<p>`以某些目标内容/短语开头并紧随其后。然后，您想`<p>`用其他内容替换初始标记之后的所有内容吗？

如果这是正确的，你可以这样做：

```
String input; // holds your input text/html
String targetPhrase = "some specific content"; // some target content/phrase
String replacement; // holds the replacement value

Pattern p = Pattern.compile("<p[^>]*>(" + targetPhrase + ".*)$", Pattern.CASE_INSENSITIVE);
Matcher m = p.matcher(input);
m.replaceFirst(replacement); 
```

当然，正如上面评论中提到的，你真的不想对 HTML 使用正则表达式。

或者，如果您知道`<p>`标签就是这样，没有属性或任何东西，您可以尝试使用子字符串。

因此，例如，如果您正在寻找`"<p>some specific content"`，您可以尝试以下操作：

```
String input; // your input text/html
String replacement; // the replacement value(s)

int index = input.indexOf("<p>some specific content");
if (index > -1) {
    String output = input.substring(0, index);
    output += "<p>" + replacement;

    // now output holds your modified text/html
} 
```

# c - sqlite3_open：“无法打开数据库文件”

> ID：11250870
> 
> 赞同：3
> 
> 时间：2012-06-28T18:36:16.250
> 
> 标签：c, cocoa-touch, sqlite

执行 rc = sqlite3_open("test.db", &db); 时出现“无法打开数据库文件”；??

```
sqlite3 *db; // sqlite3 db struct
char *zErrMsg = 0;
int rc;

// Open the test.db file
rc = sqlite3_open("test.db", &db); // <-- creates DB if not found ??

if( rc ){
    // failed
    fprintf(stderr, "ERROR: Can't open database: %s\n", sqlite3_errmsg(db));
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-28T18:41:17.633

`sqlite3_open`如果数据库尚不存在，则返回错误。如果数据库尚不存在，要创建数据库，请使用`sqlite3_open_v2`and`SQLITE_OPEN_CREATE` 标志`SQLITE_OPEN_READWRITE`（**两者都是必需的**）：

```
rc = sqlite3_open_v2(/* DB Path */, &db, SQLITE_OPEN_CREATE | SQLITE_OPEN_READWRITE, NULL); 
```

[参考](http://www.sqlite.org/c3ref/open.html)

* * *

要查找`/* DB PATH */`，您需要基于文档目录的文件名：

```
- (NSString *) applicationDocumentsDirectory 
{    
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *basePath = ([paths count] > 0) ? [paths objectAtIndex:0] : nil;
    return basePath;
} 
```

您可以使用这种方便的方法将文档路径与数据库名称结合起来：

```
NSString *documents = [self applicationDocumentsDirectory];
NSString *dbPath = [documents stringByAppendingPathComponent:@"test.db"];

rc = sqlite3_open_v2([dbPath UTF8String], &db, SQLITE_OPEN_CREATE | SQLITE_OPEN_READWRITE, NULL); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-09-14T06:47:54.430

```
#define SQLITE_OK 0
sqlite3 *db;
char *zErrMsg=0;
if(sqlite3_open("demo.db", &db) == SQLITE_OK)
{
    if(sqlite3_exec(db, "select * from Users", callback, 0, &zErrMsg) == SQLITE_OK)
            msgbox1("success");
    sqlite3_close(db);
}
else
    msgbox1("failure"); 
```

这是我使用的示例代码；

# drupal - Drupal 分部

> ID：11250871
> 
> 赞同：0
> 
> 时间：2012-06-28T18:36:18.780
> 
> 标签：drupal, drupal-theming

我正在为一家内部有多个项目的公司做一个内部网。

这个想法是每个项目只有 3 个独特的东西：它的主页、一个小的主题变体和它的帖子。其他所有内容都是共享的：每个用户都可以发布到每个部分，这只是一种视觉划分信息的方式。

每个项目都会有一个路径：

[...].com/projects/project1 [...].com/projects/project2 [...].com/projects/project3 我最初的想法是只有两种内容类型有额外的（选择类型）字段，即 SECTION。然后，我为每个主页创建一个 .tpl，其中包含变体，并调用按此 SECTION 字段过滤帖子的视图。

这会起作用，但我缺少两个方面：我可以在路径自动模块中使用部分字段值吗？假设我发布了一个带有“公司”作为 SECTION 值的节点。我能到 [...].com/projects/corporate/post-title 吗？

第二个问题是我不知道如何使 [...].com/projects/corporate/post-title 加载“企业”部分的主题

我的 SECTION 字段方法正确还是有更好的解决方案？如果有人知道此处的答案或某处解决此情况的文章，请指出我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T05:01:32.107

有机团体可能有点矫枉过正，但它可以工作[http://drupal.org/project/og](http://drupal.org/project/og)

# c++ - 如何设置和使用 std::map

> ID：11250873
> 
> 赞同：0
> 
> 时间：2012-06-28T18:36:31.287
> 
> 标签：c++, stdmap

我有一个带有一组输入和一组输出变量的程序，我使用 XML 与 Apache/PHP 网页进行交换。该网页是用户可以查看配置/正在进行的内容并可以更改设置的地方。

当我将 XML 传递给 PHP 程序（我们使用 Unix_domain Sockets）时，我添加了很多关于我传递给他的设置和指标的元信息。数据类型、最小值、最大值、默认值、读/写权限等。

```
<temperature datatype="INT32" min=-"40" max="150" permissions="R/O">25</temperature> 
```

在构建出站 xml 时，我需要了解有关每个变量的元数据。我虽然这样做的一个好方法是创建一个类 VarInfo ，我将其与每个变量相关联。将变量名存储为映射中的键（不确定我是否总是可以知道变量名）我想将键作为指向变量的指针，将值作为指向该变量的 VarInfo 对象的指针。我知道存储混合指针类型的唯一方法是将它们全部转换为 void*。所以，像：

```
bool cmpr( void* a, void*b) { return (long)a < (long)b;};
std::map<void*,VarInfo*,cmpr>   VarMap;

int        temperature;
VarInfo    vi_temperature;

VarMap[(void*)&temperature] = &vi_temperature; 
```

这样做会产生一堆关于声明地图的错误。

```
expected a type, got ‘cmpr’ ACT_iod.cpp
Invalid template arguments  ACT_iod.cpp line 40 Semantic Error
invalid type in declaration before ‘;’ token
type/value mismatch at argument 3 in template parameter list for 
    ‘template<class _Key, class _Tp, class _Compare, class _Alloc> class std::map’ 
```

那么，有人可以建议我如何让这个工作，并且可能还建议一种更好的方式来存储元信息？还在考虑改用std::string's作为key。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T18:53:09.780

第三个参数`std::map`应该是比较器的类型。作为一种解决方法，您可以制作`cmpr`一个仿函数（由于它的不可复制性，这通常是首选方法）：

```
struct cmpr {
  bool operator()(void* a, void* b) {...}
}
std::map<void*,VarInfo*,cmpr>   VarMap; 
```

另一种选择是使用函数指针（`bool(*)(void*, void*)`iirc）的类型并将指向实际使用的函数的指针作为构造函数的参数：

```
bool cmpr( void* a, void*b) { return (intptr_t)a < (intptr_t)b;}
std::map<void*,VarInfo*,bool(*)(void*, void*)>   VarMap(&cmpr); 
```

编辑：现在我考虑了一下：`<`无论如何，指针的默认比较是，所以你可以使用`std::map<void*, VarInfo*>`它具有更便携的好处。通常，您应该避免将指针转换为`long`. 尽可能避免指向整数转换的指针，否则使用`intptr_t`, `uintptr_t`or`size_t`是一个更好的主意，因为`long`不能保证足够大以容纳指针（并且 long 在某些 64 位平台上确实是 32 位）。

# c++ - 当我们不关心返回值时，更好的方法是在 C++ 的代码片段中只调用一次函数？

> ID：11250876
> 
> 赞同：3
> 
> 时间：2012-06-28T18:37:02.223
> 
> 标签：c++

只是好奇在语法上是否可以做这样的事情：

```
static (void) someFunc(); 
```

而不是，说，

```
static bla = someFunc(); 
```

以便`someFunc`在我们通过那段代码时只调用一次？顺便说一下， (void) 代码段无法编译。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T18:41:17.067

不，`static`仅用于值初始化。

要记录您对返回值不感兴趣，您可以编写：

```
static int unused = (someFunc(), void(), 0); 
```

这`void()`是为了防止逗号运算符被调用；您也可以`(void(someFunc()), 0)`使用函数转换来编写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T18:44:14.407

总是有的`pthread_once`。[http://pubs.opengroup.org/onlinepubs/7908799/xsh/pthread_once.html](http://pubs.opengroup.org/onlinepubs/7908799/xsh/pthread_once.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T18:41:27.680

除了在函数*内部*移动警卫之外，我不知道这怎么可能。

# java - Java/Android 获取调用方法的父实例

> ID：11250879
> 
> 赞同：1
> 
> 时间：2012-06-28T18:37:23.620
> 
> 标签：java, android, invoke

我有一个我试图动态调用的方法。该方法有一个参数“stringValue”。我试图调用的方法是在父（接收者？？）类中。我不知道如何将引用返回给父级

```
java.lang.reflect.Method method;
method = Class.forName("com.blah.MyActivity").getMethod("myFunction", String.class);
method.invoke(this,stringValue); 
```

给出错误：
'com.blah.MyActivity 类型的消息预期接收者，但得到 com.blah.MyActivity$SubTask'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T18:39:35.837

我怀疑你想要：

```
method.invoke(MyActivity.this, stringValue); 
```

这`MyActivity.this`部分是到达封闭实例的方式`MyActivity`。

有关详细信息，请参阅[JLS 的第 15.8.4 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.8.4)。

# php - 孙子的WordPress导航

> ID：11250880
> 
> 赞同：0
> 
> 时间：2012-06-28T18:37:24.037
> 
> 标签：php, wordpress, templates, wordpress-theming

我目前正在使用此代码（根据法典）在父页面上显示子页面，并在其子页面上显示父页面的子页面：

```
<?php if($post->post_parent)
    $children = wp_list_pages("title_li=&child_of=".$post->post_parent."&echo=0");
  else
    $children = wp_list_pages("title_li=&child_of=".$post->ID."&echo=0");
  if ($children) { ?>
    <ul>
    <?php echo $children; ?>
    </ul>
<?php } ?> 
```

我想补充一点，如果在次要子页面（孩子的孩子）上显示它是父母和父母的兄弟姐妹。

感谢您的帮助！:D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T20:56:00.047

```
<?php
if($post->post_parent)
{
    //get the parent post
    $parent = get_post($post->post_parent);
    //check to see if we have a grandparent
    if($parent->post_parent)
    {
        $page_list = wp_list_pages( array( 'child_of' => $parent->post_parent, 'echo' => false, 'depth' => 1 ) );   
    }
    else
    {
        $page_list = wp_list_pages( array( 'child_of' => $post->post_parent, 'echo' => false, 'depth' => 1 ) );
    }
}
else
     $page_list = wp_list_pages( array( 'child_of' => $post->ID, 'echo' => false, 'depth' => 1 ) );
if ($page_list) { 
?>
<ul>
<?php echo $page_list; ?>
</ul>
<?php } ?> 
```

这将检查帖子是否有父级，然后检查该帖子是否有父级。`$page_list`应该是父页面及其兄弟页面的列表。告诉 WordPress 只获取`'depth' => 1`一级页面。这将阻止它获取这些页面的孩子

# objective-c - 将字符串 var 传递给函数

> ID：11250882
> 
> 赞同：0
> 
> 时间：2012-06-28T18:37:26.490
> 
> 标签：objective-c, ios, xcode

当我运行下面的代码时

```
NSString *chemin;
    chemin = [NSString stringWithFormat:@"chapitre0%d", [sender tag]];
    NSLog(@"chemin : %@",chemin);

    [detailChapitre loadRequest:[NSURLRequest requestWithURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:chemin ofType:@"html"]isDirectory:NO]]]; 
```

我得到：'NSInvalidArgumentException'，原因：' *** -[NSURL initFileURLWithPath:isDirectory:]: nil string parameter'

但是 *chemin 在日志中被初始化为正确的值。

当然是一个菜鸟问题，谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T18:42:40.067

尝试初始化`chemin`然后释放它。像这样：

```
NSString *chemin;
chemin = [[NSString alloc] initWithFormat:@"chapitre0%d", [sender tag]];
NSLog(@"chemin : %@",chemin);

[detailChapitre loadRequest:[NSURLRequest requestWithURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:chemin ofType:@"html"]isDirectory:NO]]];
[chemin release]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T18:42:59.017

可能是这样，`chemin`变量可能有正确的章节，但路径可能是错误的。因此，当您将错误的文件路径传递给它时，`NSURL`它会返回`null`哪个反过来会导致崩溃。

首先得到这样的绝对路径 -

```
NSString *path   = [[NSBundle mainBundle] pathForResource:@"chapter1" ofType:@"html"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T18:48:25.453

这似乎表明文件“chapitre0[whatever].html”不在您期望的位置。这可能是因为正在构建不正确的字符串，但这也可能只是意味着您的构建过程没有将文件粘贴在正确的位置或类似的地方。查看您的 NSLog 中指示的字符串，然后查看您构建的应用程序的 Resources 目录以确认该文件确实存在并且命名正确。

# oop - 我应该使用异常来检查构造函数中的无效参数吗？

> ID：11250885
> 
> 赞同：2
> 
> 时间：2012-06-28T18:37:41.287
> 
> 标签：oop, exception, exception-handling

我刚刚在 Code Complete 中读到你不应该使用异常来进行流控制。我也知道常见的建议是使用异常来处理“异常情况”。但我不确定如何应用这个建议。使用异常检查构造函数中的无效参数是个好主意吗？例如，我有一个 ExcelInputConverter，它将电子表格中的行转换为 Record 对象（用于操作）。构造函数将 excel 文件的名称作为输入。我应该使用异常来检查传入的字符串是有效的 excel 文件吗？excel文件存在吗？似乎我应该在这里使用异常，因为如果发生这种情况，该类基本上无法运行。

检查类内或类外的无效数据是个好主意吗？

```
Public Sub New(filename as string) 'new excel input converter
      If Not (Path.GetExtension(fileName) = ".xls" Or Path.GetExtension(fileName) = ".xlsx") Then Throw New Exception("Can't make an Excel input converter from a non-Excel file like " & inputFileName)
      If Not (File.Exists(fileName)) Then Throw New Exception("This file does not exist. Can't make an Excel converter") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T18:41:47.537

如果由于构造函数的参数无效而无法构造对象，则适合使用异常。大多数语言没有提供不同的方法来告诉对象创建者出了问题（除了可能在对象上设置“无效”标志，我不建议这样做）。

.NET为这种情况定义了一个[ArgumentException 。](http://msdn.microsoft.com/en-us/library/system.argumentexception.aspx)

> 检查类内或类外的无效数据是个好主意吗？

该类处于了解哪些数据对其有效的最佳位置。如果类随着时间的推移而演变并且有效数据的规则发生变化，那么您不希望必须更改使用该类的所有代码来反映这种变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T18:46:47.753

我倾向于使用异常作为最后的手段。对于文件检查之类的东西，我会这样做：（PsuedoCode）

```
try
{
    fileToCheck = getUserInput();
    while(!fileToCheck.Exists() && quit==false)
    {
        Console.WriteLine("File does not exist. Make sure the path and filename are correct.");
        quit = getQuitInput();
        fileToCheck = getUserInput();
    }
    // fopen(fileToCheck) and other processes. Include other sub-try/catch blocks as needed.
}
catch (Exception e)
{
    Console.WriteLine("Fatal Error Occurred. Check Log files for information.");
    logError(e);
} 
```

这样，用户可以尝试修复他们自己可能发生的用户错误问题，并且只有在他们无法修复的更复杂的情况下（excel文件损坏或其他原因）程序才会终止

# html - ASP.NET 表格奇怪的高度行为

> ID：11250889
> 
> 赞同：0
> 
> 时间：2012-06-28T18:38:02.440
> 
> 标签：html, css-tables

我正在使用 VS2010，C# 开发一个 ASP.NET Web 应用程序。我为我的菜单创建了一个表格，它的行为很奇怪！我将表格高度设置为 X px，行和单元格高度也都设置为 X px。但是从下面的地址可以看到，当鼠标悬停在单元格上时，单元格高度比表格高度小一点，实际上单元格高度是X px，而表格高度是X+4 px！！！我的菜单是页面顶部的红色条，这里出了什么问题？

```
http://46.4.132.149/nikyar/ 
```

我希望我悬停的单元格与我的桌子高度完全相同，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T18:42:51.577

要解决它，请添加到您的 css 表中`border-spacing:0`

# iphone - 带有来自 URL 的数组的 iPhone 选择器

> ID：11250892
> 
> 赞同：1
> 
> 时间：2012-06-28T18:38:06.853
> 
> 标签：iphone, objective-c, url, uiactionsheet, picker

```
-(void)dismissActionSheet:(id)sender {
[actionSheet dismissWithClickedButtonIndex:0 animated:YES];
}

-(IBAction) pressButton:(id)sender{

actionSheet = [[UIActionSheet alloc] initWithTitle:nil 
                                                         delegate:nil
                                                cancelButtonTitle:nil
                                           destructiveButtonTitle:nil
                                                otherButtonTitles:nil];

[actionSheet setActionSheetStyle:UIActionSheetStyleBlackTranslucent];

CGRect pickerFrame = CGRectMake(0, 40, 0, 0);

UIPickerView *pickerView = [[UIPickerView alloc] initWithFrame:pickerFrame];
pickerView.showsSelectionIndicator = YES;
pickerView.dataSource = pickerArray;
pickerView.delegate = self;

[actionSheet addSubview:pickerView];
[pickerView release];

UISegmentedControl *closeButton = [[UISegmentedControl alloc] initWithItems:[NSArray arrayWithObject:@"OK"]];
closeButton.momentary = YES; 
closeButton.frame = CGRectMake(260, 7.0f, 50.0f, 30.0f);
closeButton.segmentedControlStyle = UISegmentedControlStyleBar;
closeButton.tintColor = [UIColor blackColor];
[closeButton addTarget:self action:@selector(dismissActionSheet:) forControlEvents:UIControlEventValueChanged];
[actionSheet addSubview:closeButton];

[closeButton release];

[actionSheet showInView:[[UIApplication sharedApplication] keyWindow]];

[actionSheet setBounds:CGRectMake(0, 0, 320, 485)];

[actionSheet release];
} 
```

我制作了一个选择器，只需按一下按钮，它就会像键盘一样弹出。现在我只是想用我网站上的一个数组来填充它。即[http://www.mywebsite.com/app/array.txt](http://www.mywebsite.com/app/array.txt)

这是我到目前为止所拥有的：

```
- (void)viewDidLoad{
NSURL *url = [NSURL URLWithString:@"http://www.tntmax.com/app/gQL420pt.txt"];
NSString *x = [NSString stringWithContentsOfURL:url encoding:NSUTF8StringEncoding error:nil];
self.pickerArray = x;

[x release]; 
```

它似乎不起作用。我尝试了许多不同的方法，这只是最近的尝试。

我网站上的页面如下所示：

```
@"object1", @"thing2", @"person3", @"stuff4", nil 
```

我可以将文本的格式更改为最适合代码的格式。让我知道。

我能做些什么来完成这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T19:13:26.607

您应该阅读[UIPickerView 文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPickerView_Class/Reference/UIPickerView.html)。您不能使用 an`NSString`作为数据源，而是需要一个符合`UIPickerViewDataSource`协议的对象。

此外，如果您尝试`NSArray`从您的网站加载一个，您可以将数据格式化为 plist，然后使用`[NSArray arrayWithContentsOfURL:url]`. 这将为您提供更适合`UIPickerViewDataSource`

```
// plist header here (look it up...)
<plist>
<array>
    <string>object1</string>
    <string>thing1</string>
    // more strings
</array>
</plist> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T19:30:53.320

用这个：

```
 - (void)viewDidLoad
 {
   NSURL *url = [NSURL URLWithString:@"http://www.tntmax.com/app/gQL420pt.txt"];
   NSString *reply= [NSString stringWithContentsOfURL:url encoding:NSUTF8StringEncoding error:nil];
   NSArray *txtItems= [reply componentsSeparatedByString:@","];
   //if u want remove @"" from all values then replace items in array withReplacingocurrenceOfString with @ and "
   self.pickerArray = txtItems; // as pickerArray is nsarray if not(nsmutableArray) then use [txtItems mutableCopy];
 } 
```

# c++ - tr1::function 和 tr1::bind

> ID：11250900
> 
> 赞同：3
> 
> 时间：2012-06-28T18:38:53.973
> 
> 标签：c++, tr1

我将以下内容放入 Ideone.com（和 codepad.org）：

```
#include <iostream>
#include <string>
#include <tr1/functional>

struct A {
    A(const std::string& n) : name_(n) {}
    void printit(const std::string& s) 
    {
        std::cout << name_ << " says " << s << std::endl;
    }
private:
    const std::string name_;
};

int main()
{
    A a("Joe");
    std::tr1::function<void(const std::string&)> f = std::tr1::bind(&A::printit, &a, _1);
    a("Hi");
} 
```

并得到这些错误：

> prog.cpp：在函数'int main（）'中：
> 
> prog.cpp:18: 错误: '_1' 未在此范围内声明
> 
> prog.cpp:19: 错误：不匹配调用 '(A)(const char [3])'</p>
> 
> prog.cpp:18：警告：未使用的变量“f”</p>

我一生都无法弄清楚第 18 行出了什么问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T18:42:53.650

两个错误：

1.  `_1`在命名空间中定义`std::tr1::placeholders`。您需要在`using namespace std::tr1::placeholders;` **内`main()`**或使用`std::tr1::placeholders::_1`.

2.  第 19 行应该是`f("Hi")`，不是`a("Hi")`。

```
#include <iostream>
#include <string>
#include <tr1/functional>

struct A {
    A(const std::string& n) : name_(n) {}
    void printit(const std::string& s) 
    {
        std::cout << name_ << " says " << s << std::endl;
    }
private:
    const std::string name_;
};

int main()
{
    using namespace std::tr1::placeholders;  // <-------

    A a("Joe");
    std::tr1::function<void(const std::string&)> f = std::tr1::bind(&A::printit, &a, _1);
    f("Hi");    // <---------
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-28T18:43:18.537

# c# - 在 .NET App 中获取 IIS 应用程序名称

> ID：11250901
> 
> 赞同：5
> 
> 时间：2012-06-28T18:39:08.260
> 
> 标签：c#, .net, iis

我目前正在使用以下代码：

```
<center>Application Name: <%=HostingEnvironment.ApplicationID %></center> 
```

哪个输出：

```
Application Name: /LM/W3SVC/1/Root/AppName 
```

“AppName”是我想要的值，我想知道是否有另一种方法可以简单地返回它而无需执行字符串魔术来删除路径的其余部分。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-12-13T09:36:46.003

重申一下，基于评论线程 -**`ApplicationHost.GetSiteName()`不打算在代码中使用**（请参阅[msdn.microsoft.com](https://msdn.microsoft.com/en-us/library/system.web.hosting.iapplicationhost.getsitename(v=vs.110).aspx)）：

> ## IApplicationHost.GetSiteName 方法 ()
> 
> 此 API 支持产品基础架构，不打算直接从您的代码中使用。

而是使用

```
System.Web.Hosting.HostingEnvironment.SiteName; 
```

[MSDN 上的文档](https://msdn.microsoft.com/en-us/library/system.web.hosting.hostingenvironment.sitename(v=vs.110).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T18:45:02.147

您可以使用此例程获取完全限定的应用程序路径，context.Request.ApplicationPath 将包含应用程序名称

```
 /// <summary>
    /// Return full path of the IIS application
    /// </summary>
    public string FullyQualifiedApplicationPath
    {
        get
        {
            //Getting the current context of HTTP request
            var context = HttpContext.Current;

            //Checking the current context content
            if (context == null) return null;

            //Formatting the fully qualified website url/name
            var appPath = string.Format("{0}://{1}{2}{3}",
                                        context.Request.Url.Scheme,
                                        context.Request.Url.Host,
                                        context.Request.Url.Port == 80
                                            ? string.Empty
                                            : ":" + context.Request.Url.Port,
                                        context.Request.ApplicationPath);

            if (!appPath.EndsWith("/"))
                appPath += "/";

            return appPath;
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-18T03:26:48.253

其中之一应该根据您的 IIS 应用程序/站点结构来完成工作

```
HostingEnvironment.ApplicationHost.GetSiteName()

HostingEnvironment.ApplicationVirtualPath

new ServerManager().Sites;  //This is a List so you can iterate and match with a eliminating hint 
```

# sql - 设置日期时间变量

> ID：11250906
> 
> 赞同：0
> 
> 时间：2012-06-28T18:39:23.303
> 
> 标签：sql, datetime, printing

在 SQL 中，我执行以下代码。当打印部分运行时，它会返回“2050 年 12 月 31 日晚上 11:59”。我在代码的后面部分（未显示）中使用了该变量，但它不起作用，并且出现“将字符串转换为 smalldatetime 数据类型时转换失败”错误。

我混淆了我的格式吗？我认为日期时间是 'yyyy-mm-dd hh:mm:ss' 但显然我一定是错的。我查看 datetim 格式的每个地方都说这应该有效，所以我不知道我做错了什么。

```
 declare @date int

--@date is yyyymm format

declare @sql_v_fx as varchar(max), @sql_dim_for_exc as varchar(max)
declare @maxEndDate as smalldatetime

set @date = 201202
set @maxEndDate = Convert(smalldatetime, '2050-12-31 23:59', 101)

print @maxenddate

--remove prior date in [zstbl_fx_rollback]
truncate table zstbl_fx_rollback 

--insert the user entered month
--specify in the VS report whether it's Balance Sheet or Income Statement date
insert into [zstbl_fx_rollback] (yyyymm) select @date

--alter the v_fx view to into account the date in the [zstbl_fx_rollback] table
select @sql_v_fx = 
'
    Alter view [dbo].[v_fx] as
    select 
          [foreign exchange key],[currency key], [to usd], [from usd], [effective date], 
          [expiration date] = 
                case when [effective date] = 
                      convert(datetime,cast((select isnull(max(yyyymm),205012) from zstbl_fx_rollback) * 100 + 1 as char(8))) then ' + @maxEndDate + ' else [expiration date] end
          ,[is current] 
          ,[effective date key] = year([effective date]) * 10000 + month([effective date])*100

    from crs..[dim foreign exchange]
    where [effective date] <= convert(datetime,cast((select isnull(max(yyyymm),205012) from zstbl_fx_rollback) * 100 + 1 as char(8))) 
'

exec(@sql_v_fx) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T18:48:31.003

如果这是`Sql-Server` 尝试

```
set @maxEndDate = Convert(smalldatetime, '2050-12-31 23:59', 101) 
```

如果您需要其他格式的日期，请查看此链接 [http://msdn.microsoft.com/es-es/library/ms187928.aspx](http://msdn.microsoft.com/es-es/library/ms187928.aspx)

# javascript - Chrome中的jQuery淡出/淡入滚动问题

> ID：11250909
> 
> 赞同：0
> 
> 时间：2012-06-28T18:39:38.320
> 
> 标签：javascript, jquery

我正在使用 jQuery 淡出和淡入来动态更改页面上的内容，在 div 内。除 Mac 版 Chrome 外，所有浏览器都运行良好。在 Mac 版 Chrome 中，在第一页上，如果您向下滚动，fadeOut 然后fadeIn 新淡入的内容是“屏幕外” - 换句话说，丢失。如果第一页不向下滚动，转到第二页，内容显示就好了。

我在我的网站上创建了一个简单的演示。同样，这适用于除 Chrome for Mac 之外的所有浏览器。请帮忙！适用于 Windows 的 Chrome 运行良好。

演示：[http ://dev.corecoding.com/problem.php](http://dev.corecoding.com/problem.php)

在 Mac 上，我看到使用 AppleWebKit/534.57.2 的用户代理，而在 Windows 中，它使用 AppleWebKit/536.5。有趣的是，它在 Mac 版 Safari 中运行良好，它使用相同的（较旧的）WebKit。

有没有办法让它与另一个 jQuery / javascript 命令一起工作？还是我应该忘记它并等待 Chrome 的 WebKit 更新？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T18:55:49.257

我没有 Mac，但您可以通过以下方式解决问题：

```
$("#content").scrollTop(0) 
```

替换div的内容后。

# c# - c#找不到入口点

> ID：11250912
> 
> 赞同：0
> 
> 时间：2012-06-28T18:39:49.433
> 
> 标签：c#, winforms, syncfusion

我正在使用同步融合网格控件。将网格转换为单词会给我一个未找到入口点异常。

这是我到目前为止的代码

```
 private void cmdSaveData_Click(object sender, EventArgs e)
    {
            ////CEC: this btn is labeled to Define a new group
            //cmdDefineGroup_Click(sender, e);
        GridWordConverter converter = new GridWordConverter(true, true);
        converter.DrawHeader += new GridWordConverterBase.DrawDocHeaderFooterEventHandler(converter_DrawHeader);
        converter.DrawFooter += new GridWordConverterBase.DrawDocHeaderFooterEventHandler(converter_DrawFooter);
        converter.GridToWord("Sample.doc", theGrid);
        System.Diagnostics.Process.Start("Sample.doc");
    }

    void converter_DrawFooter(object sender, DocHeaderFooterEventArgs e)
    {
        e.Footer.AddParagraph().AppendText("Copyright 2001-2008");
    }

    void converter_DrawHeader(object sender, DocHeaderFooterEventArgs e)
    {
        e.Header.AddParagraph().AppendText("Syncfusion Inc.");
    } 
```

这是堆栈跟踪

```
 at Syncfusion.Windows.Forms.Grid.IGridVolatileData.get_HasColCount()
   at Syncfusion.Windows.Forms.Grid.GridModel.get_ColCount()
   at Syncfusion.GridHelperClasses.GridWordConverter.GridToWord(String filename, GridControlBase grid)
   at FP.frmData.cmdSaveData_Click(Object sender, EventArgs e) in C:\FP\frmData.cs:line 365 
```

![在此处输入图像描述](../Images/45a5a6390e1dbf87280b715f8e1edb6a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T19:11:40.460

您只是发布堆栈跟踪，我在帖子中没有看到任何异常。

显然“找不到入口点”可能是指您的应用程序启动，您`Main()`在项目中定义了吗？

**更新**：现在我可以看到堆栈跟踪，您似乎缺少一些依赖程序集，您使用的词引擎是什么？

# php - PHP DOM 和 HTML 实体

> ID：11250913
> 
> 赞同：2
> 
> 时间：2012-06-28T18:39:51.870
> 
> 标签：php, xml, dom, html-entities

我正在使用由 DOM 解析的 xml 模板编写 php cms，并且遇到了将 html 实体替换为符号的错误。这是一个例子：

```
<CMS_STRING type="link" name="home" title="{enUS:&quot;Home Link&quot;}" /> 
```

保存文档 ( `$doc->saveXML()`) 后，它会转换为：

```
<CMS_STRING type="link" name="home" title="{enUS:"Home Link"}" /> 
```

它会导致进一步的模板处理错误，因为我需要多次加载和保存（缓存）。

我也尝试了十六进制实体，`$doc->substituteEntities = false`但它们仍然被转换。

编辑：问题实际上是`DOMNode::attributes->getNamedItem()->nodeValue`我用来处理属性的问题。它返回带有替换的 html 实体的代码。

# c - 使用 GCC 时，OpenMP 没有进行实际的并行处理

> ID：11250916
> 
> 赞同：1
> 
> 时间：2012-06-28T18:40:15.927
> 
> 标签：c, gcc, ubuntu, openmp

我在 Virtual box 上运行 Ubuntu 12，我正在使用 GCC 编译这个具有简单 OpenMp pragmas 的简单 C 程序：

```
#include <stdio.h>
#include <omp.h>
#define MAX 10000000000
void main()
{
    unsigned long long i,j,k,l;
    int threadnumber;
    #pragma omp parallel shared(i,j,k,l)
    {
        threadnumber = omp_get_thread_num();
        if(threadnumber == 0)
        {
            for(i = 0; i < (MAX / 4); i++)
                ;
        }
        else if(threadnumber == 1)
        {
            for(j = (MAX / 4); j < (MAX / 2); j++)
                ;
        }
        else if(threadnumber == 2)
        {
            for(k = (MAX / 2); k < (3 * (MAX / 4));k++)
                ;
        }
        else
        {
            for(l = (3 * (MAX / 4)); l < MAX; l++)
                ;
        }
    }
} 
```

我的处理器是 Intel Core i5 处理器。该程序确实在并行工作（通过添加一些 printf()s 进行验证），我已将环境变量（OMP_NUM_THREADS）设置为 4。问题是代码花费的时间比这个非并行的要多：

```
#include <stdio.h>
#define MAX 10000000000
void main()
{
    unsigned long long i;
    for(i = 0; i < MAX; i++)
        ;
} 
```

我还尝试`clock()`在两个版本的循环之前和之后添加调用，并且我在并行版本中获得了更长的时间。我还尝试使用 : time 来测量时间`./a.out`，并且我得到的（仅在并行版本中）与返回的“实际”时间不同`clock()`！

我已经在 Visual Studio 上编译了这两个代码，结果如下：

1.  在调试模式下：两个代码的时间几乎相等，并且时间接近 GCC 给出的时间。
2.  在发布模式下：两种代码都更快，并行代码在时间上显示出很大的改进。问题简而言之：
3.  我想以与 Visual Studio 编译器的发布版本相同的效率并行运行该程序。2）是否有一个参数或选项我应该传递给 GCC，而不是`"-fopenmp"`让它构建一个与 Visual Studio 完全一样的发布版本。3) 我想知道这是 Ubuntu 问题还是 GCC 问题或什么？

PS：我尝试在安装了 wubi 的 Ubuntu 上以及作为独立操作系统（在 ext4 文件系统上）和相同平台上的 Ubuntu 上运行相同的程序，我得到了相同的结果。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-29T11:14:14.850

我真的不明白为什么这里关于 SO 的每个新的 OpenMP 相关问题都包含`clock()`用于（错误地）测量挂钟执行时间的代码，前提是 OpenMP 有一个便携式高分辨率计时器，可以通过调用`omp_get_wtime()`?

首先，在并行区域内使用共享变量作为循环计数器是一个非常**糟糕的想法**。[这](https://stackoverflow.com/a/11259286/1374437)就是为什么，尽管你有一个 Nehalem 或更高版本的基于微架构的 CPU，这使得这个问题不那么严重。

其次，Visual Studio 在调试和发布配置中应用了不同的优化级别。在调试模式下禁用优化 ( `/Od`)，而在发布模式下启用速度优化 ( `/O2`)。您说在调试模式下 VS 代码运行速度与 GCC 代码一样快。这可能意味着您运行 GCC 时默认优化级别为无优化。编译`-O2`或什`-O3`至与 VS 在发布模式下生成的代码相同。

第三，您在虚拟机中运行 Ubuntu。虚拟机可以访问多少个 CPU？

第四，您为什么要重新实现 OpenMP 并行`for`工作共享指令？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T19:00:11.893

小心从这些简单的测量中得出结论。您在这里拥有的空循环应该是大多数现代编译器完全优化的。`OMP`这种优化在这里可能会受到您的编译指示的阻碍。但这真的与并行与否无关。

# css - 如何正确编写完整的 css3 选择器到 querySelectorAll

> ID：11250919
> 
> 赞同：0
> 
> 时间：2012-06-28T18:40:25.617
> 
> 标签：css, css-selectors, selectors-api

如何正确编写这个 css3 选择器查询？

```
var elements = document.querySelectorAll("[data-datasource='ds1']:not(input[type='button']):not(input[type='submit']):not(input[type='submit']):not(input[type='hidden']):not(input[type='reset']):not(input[type='file']):not(input[type='image']):not(input[type='search'])"); 
```

上面的查询会引发语法错误。

我想选择所有具有 data-datasource='ds1' 的元素，但类型按钮、提交、提交、隐藏、重置、文件、图像和搜索的输入除外。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T18:45:11.467

不幸的是，[CSS3 的`:not()`选择器](http://www.w3.org/TR/css3-selectors/#negation)一次只允许一个简单的选择器。你得到了一个例外，因为你所有的`:not(input[...])`选择器都是无效的 CSS3，因为它们包含两个简单的选择器：`input`和一个属性选择器。

试试这个：

```
var elements = document.querySelectorAll("[data-datasource='ds1']:not(input), input[data-datasource='ds1']:not([type='button']):not([type='submit']):not([type='hidden']):not([type='reset']):not([type='file']):not([type='image']):not([type='search'])"); 
```

因为它仍然是一个很长的选择器字符串，所以这里有一个细分：

```
/* Any elements except input that have this attribute value */
[data-datasource='ds1']:not(input), 

/* Only inputs that have this attribute value, but not any of these types */
input[data-datasource='ds1']:not([type='button']):not([type='submit']):not([type='hidden']):not([type='reset']):not([type='file']):not([type='image']):not([type='search']) 
```

# java - 兔子 MQ 连接限制？

> ID：11250920
> 
> 赞同：5
> 
> 时间：2012-06-28T18:40:34.067
> 
> 标签：java, rabbitmq

我正在研究在java中列出并发布到Rabbitmqserver的消息传递框架，下面是代码

```
 ConnectionFactory factory = new ConnectionFactory();
     factory.setHost(hostName);
     factory.setPort(portNumber);
     factory.setVirtualHost(virtualHost);
     factory.setUsername(username);
     factory.setPassword(password);
     return factory.newConnection(); 
```

我可以建立多少个连接有任何限制吗？我无法在兔子文档中找到我们的任何限制。当我尝试建立超过 137 个连接时，它看起来不起作用。我无法在 Rabbitmq 日志或应用程序日志中找到任何错误。当我尝试调试时，它看起来就像最后一行只是等待。我下一步要弄清楚 RABBITMQ java 客户端代码中发生了什么。

任何帮助或方向都会有所帮助并非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T22:21:09.583

好的，看起来我的 Rabbitmq 服务器 ras 用完了套接字，它不会抛出错误，只是等待另一个连接空闲。我使用的是默认 ulimit 为 256 的 Mac OS，它最终提供了 156 个文件处理程序和 138 个连接。我所做的只是将ulimit更改为1024。

# javascript - 为什么每次点击都会多次运行这段代码？

> ID：11250924
> 
> 赞同：1
> 
> 时间：2012-06-28T18:40:56.807
> 
> 标签：javascript, jquery, recursion

很难弄清楚为什么这个警报代码在第一次点击时被调用一次，在第二次点击时被调用两次，在第三次点击时被调用四次，在第四次点击时被调用八次，等等......

```
$(document).ready(function() {
    $('#preventClickDiv a[href]').click(function(e){ 
        e.preventDefault();
        alert('Prevented');
        newClick();
    });
});
function newClick(){
    $('#preventClickDiv a[href]').click(function(e){ 
        e.preventDefault();
        alert('Prevented');
        newClick();
    });
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T18:42:09.500

第一个块创建一个调用的单击事件，`newClick`该事件创建一个调用自身的单击事件......创建另一个事件......我想你明白了。取出函数中的点击事件绑定代码。

它应该是这样的：

```
function newClick(){
    alert("in new click");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T18:43:44.533

您在单击事件中绑定了单击事件，因此每次单击时，都会绑定另一个单击事件，从而导致每次单击时都会将大量单击事件多次绑定到相同的元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T18:44:08.733

你所做的是每次调用时注册一个*额外*`newClick()`的点击处理程序，而不是替换旧的——它不会因为事件被触发而消失。只需这样做：

```
$(document).ready(function() {
    $('#preventClickDiv a[href]').click(function(e){ 
        e.preventDefault();
        alert('Prevented');
    });
}); 
```

（此外，阻止用户点击链接是产生仇恨的好方法。）

# visual-studio-2010 - 在 Visual Studio 2010 中扩展 TFS 工作项编辑器

> ID：11250928
> 
> 赞同：3
> 
> 时间：2012-06-28T18:41:13.450
> 
> 标签：visual-studio-2010, tfs, tfs-sdk, tfs-workitem

我想扩展团队资源管理器工作项编辑器，并在导出到 Excel、Outlook 等的同时使用自定义功能按钮，从当前工作项中获取信息。

我知道有一种方法可以修改项目本身，如[witcustomcontrols.codeplex.com](http://witcustomcontrols.codeplex.com/)所述，但我宁愿不修改它们。

编辑器是否可以以这种方式扩展，或者有更好的方法来做到这一点？

最好的问候，汤米

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T21:28:46.650

创建工作项自定义控件是完成您想要做的事情的方法。

您已经找到的项目 ( [witcustomcontrols.codeplex.com](http://witcustomcontrols.codeplex.com/) ) 是了解创建工作项自定义控件的机制的一个很好的起点，因此我将限制自己描述实现自定义按钮的基础知识的细节。

创建一个派生自 System.Windows.Button 的控件并从 OnClick 方法访问 WorkItemDatasource 属性。

这应该让你开始：

```
using System;
using System.Collections.Specialized;
using System.Windows.Forms;
using Microsoft.TeamFoundation.WorkItemTracking.Client;
using Microsoft.TeamFoundation.WorkItemTracking.Controls;

namespace Wicc {
    public class ButtonControl: Button, IWorkItemControl {
        public ButtonControl() {

        }
        protected override void OnClick(EventArgs e) {
            WorkItem workItem = this.WorkItemDatasource as WorkItem;

            // the rest of your code
        }

        #region IWorkItemControl Members

        public event EventHandler AfterUpdateDatasource;

        public event EventHandler BeforeUpdateDatasource;

        public void Clear() {
        }

        public void FlushToDatasource() {
        }

        public void InvalidateDatasource() {
        }

        public StringDictionary Properties {get; set;}

        public bool ReadOnly {get; set;}

        public void SetSite(IServiceProvider serviceProvider) {
        }

        public object WorkItemDatasource { get; set; }

        public string WorkItemFieldName { get; set; }

        #endregion
    }
} 
```

如果您还有其他问题，请告诉我。

# ruby-on-rails - 在 Rails 中，如何根据第一个属性自动分配项目的所有属性

> ID：11250930
> 
> 赞同：0
> 
> 时间：2012-06-28T18:41:17.187
> 
> 标签：ruby-on-rails, ruby, activerecord, model

基本上，我想生成一个项目，在这种情况下是一个戒指。我有不同类型的戒指：

```
class Ring < ActiveRecord::Base

  DISPLAY_NAMES [ 'Silver', 'Gold', 'Diamond' ]

  attr_accessible :description, :display_name, :roll, :bonus, :total, :image, :gold

end 
```

有没有办法随机化环的 DISPLAY_NAMES？

我猜是这样的`@ring.display_name = rand(Ring::DISPLAY_NAMES)`？

有一个更好的方法吗？

一旦找到，有没有办法设置环的所有其他属性，比如`@ring.roll`and`@ring.bonus`等。

例如，如果一个戒指是银的，我可以在模型中声明某种 if 语句来说明戒指是否是银，而其他属性是 bla bla bla？

提前致谢。学习缓慢但肯定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T19:02:59.293

要从 DISPLAY_NAMES 数组中获取随机条目，请执行

```
@ring.display_name = DISPLAY_NAMES.sample 
```

检查[http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-sample](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-sample)

对于第二部分，如果其余的值是静态的并且不会改变，那么我会在 seed.rb 中播种

用每个名称的所有值填充数据库`[ 'Silver', 'Gold', 'Diamond' ]` 因此，数据库中每个名称都有 3 条记录。

之后，你可以做

```
@ring = Ring.find_by_display_name(DISPLAY_NAMES.sample) 
```

# python - ElementTree iterparse 需要多长时间？

> ID：11250934
> 
> 赞同：3
> 
> 时间：2012-06-28T18:41:27.383
> 
> 标签：python, xml, iterparse, celementtree

在回答另一个问题时，有人向我展示了以下教程，其中作者声称已使用 iterparse 在 3 秒内解析约 100 MB 的 XML 文件：

[http://eli.thegreenplace.net/2012/03/15/processing-xml-in-python-with-elementtree/](http://eli.thegreenplace.net/2012/03/15/processing-xml-in-python-with-elementtree/)

我正在尝试解析一个 ~90 MB XML 文件，并且我有以下代码：

```
from xml.etree.cElementTree import *
count = 0

for event, elem in iterparse('foo.xml'):        
    if elem.tag == 'identifier' and elem.text == 'bar':
        count += 1
    elem.clear() # discard the element

print count 
```

这大约需要 30 秒……甚至与我使用类似大小的文件、类似的算法和相同的包阅读的教程中报告的数量级不同。

有人可以告诉我我的代码可能有什么问题，或者我的情况和本教程之间可能没有注意到哪些差异？

我正在使用 Python 2.7.3。

**附录：**

我也在使用一台相当强大的机器，以防有人认为可能是它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T19:38:31.220

正如 TJD 所提到的，仅比较 XML 的大小可能不会提供很多信息。但是，我碰巧有相同结构但大小不同的文件：

**使用 79M 文件：**

```
$ python -m timeit -n 1 -c 'from xml.etree.cElementTree import iterparse
count = 0
for event, elem in iterparse("..../QT20060217_S_18mix23-2500_01.mzML"):
    if elem.tag.endswith("spectrum"): count += 1
    elem.clear()
print count'
6126
6126
6126
1 loops, best of 3: 950 msec per loop 
```

**使用 3.8G 文件**，`timeit`输出为：

```
1 loops, best of 3: 22.3 sec per loop 
```

此外，与[`lxml`](http://lxml.de/):`xml.etree.cElementTree`在第一行更改为`lxml.etree`我得到：

对于第一个文件：`730 msec per loop`

对于第二个文件：`11.4 sec per loop`

# xcode - 适用于 Mac OS 的 Internet 过滤器

> ID：11250942
> 
> 赞同：1
> 
> 时间：2012-06-28T18:41:50.373
> 
> 标签：xcode, macos, cocoa

我正在尝试为 Mac OS (10.6) 制作一个互联网过滤器。我已经弄清楚了整个过程（我是一位经验丰富的 Xcode 开发人员），但我似乎找不到任何有关如何捕获传出 HTTP 请求的信息。

基本上，我需要某种签名看起来像这样的方法：

```
-(BOOL)MacOSAppWillMakeHTTPRequest:(NSDictionary*(or something???))requestInfo 
```

它将接收有关正在发送的 HTTP 请求的信息（特别是 URL），并且可以允许或阻止该请求被处理。

我一直在搜索 Apple 的文档，但没有找到任何感兴趣的东西，除了内核扩展，这对于这个项目来说似乎有点太极端了。

欢迎任何想法、建议等。谢谢。

# xml - 如何让相同的属性名称引用同一命名空间中的两种不同类型？

> ID：11250946
> 
> 赞同：1
> 
> 时间：2012-06-28T18:42:05.397
> 
> 标签：xml, xsd, schema

我所有的 XML 属性都在不同的命名空间中，所以我的 XSD 从另一个 XSD 引用它们。我有两个不同的元素，它们的属性名称相同，但类型不同。

```
<integer ons:name="10" />
<string ons:name="string"/> 
```

所以`integer`元素有一个`ons:name`属性是 an`integer`而`string`元素有一个`ons:name`属性是 a `string`。

如何在 XSD 中定义它？目前我有：

```
<xs:element name="integer">
    <xs:complexType>
        <xs:attribute ref="ons:name" use="required"/>
    </xs:complexType>
</xs:element> 
```

然后在`ons`命名空间的第二个 XSD 中，我有以下内容：

那么问题是对于第二个元素的属性，没有办法用 来指定`type`，`ref`如果`ref`引用不同的属性，那么它会得到不同的名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T20:10:17.240

在 namespace 的架构文档中`ons`，定义两个单例属性组：

```
<xs:attributeGroup name="name-int">
  <xs:attribute name="name" type="xs:integer" use="required" form="qualified"/>
</xs:attribute-group>

<xs:attributeGroup name="name-str">
  <xs:attribute name="name" type="xs:string" form="qualified"/>
</xs:attribute-group> 
```

然后从复杂类型中引用属性组：

```
<xs:complexType>
    <xs:attributeGroup ref="ons:name-int"/>
</xs:complexType> 
```

# c# - 协助 UI Dispatcher 处理大量的方法调用

> ID：11250947
> 
> 赞同：3
> 
> 时间：2012-06-28T18:42:08.750
> 
> 标签：c#, wpf, multithreading, dispatcher, method-invocation

下面的帖子比预期的要长*一点**我为此道歉，但也许你会觉得它读起来很有趣，也许你有一个想法可以帮助我:)

我正在开发一个小型应用程序，它的 GUI 由许多列表控件组成。每个 List 控件都有一个与之关联的*线程，该线程***永久地生成**要添加到列表中的字符串。

*为了允许不同线程更新*List 控件，我构建了一个*扩展的 ObservableCollection*，它*异步调用**UI 调度*程序的所有操作，效果很好。这是该类的代码片段，用于示例插入操作：

```
public class ThreadSaveObservableCollection<T> : ObservableCollection<T> {

    private int _index;

    private Dispatcher _uiDispatcher;
    private ReaderWriterLock _rwLock;

    // ...

    private bool _insertRegFlag;

    new public void Insert (int index, T item) {

        if (Thread.CurrentThread == _uiDispatcher.Thread) {

            insert_(index, item);
        } else {

            if (_insertRegFlag) { }
            else {

                BufferedInvoker.RegisterMethod(_index + "." + (int)Methods.Insert);
                _insertRegFlag = true;
            }

            BufferedInvoker.AddInvocation(new Invocation<int, T> { Ident = _index + "." + (int)Methods.Insert, Dispatcher = _uiDispatcher, Priority = DispatcherPriority.Normal, Param1 = index, Param2 = item, Method = new Action<int, T>(insert_) });
        }
    }

    private void insert_ (int index, T item) {

        _rwLock.AcquireWriterLock(Timeout.Infinite);

        DateTime timeStampA = DateTime.Now;

        base.Insert(index, item);

        DateTime timeStampB = DateTime.Now;

        BufferedInvoker.Returned(_index + "." + (int)Methods.Insert, timeStampB.Subtract(timeStampA).TotalMilliseconds);

        _rwLock.ReleaseWriterLock();
    }

    // ...
} 
```

为了以一种挂起的调用任务的形式对调用进行建模，我构建了以下内容：

```
public interface IInvocation {

    string Ident { get; set; }
    void Invoke ();
}

public struct Invocation : IInvocation {

    public string Ident { get; set; }
    public Dispatcher Dispatcher { get; set; }
    public DispatcherPriority Priority { get; set; }
    public Delegate Method { get; set; }

    public void Invoke () {

        Dispatcher.BeginInvoke(Method, Priority, new object[] { });
    }
} 
```

我现在的问题是，由于我在 UI Dispatcher 上调用**了大量**的方法调用（我有大约 8 到 10 个线程，它们正在永久生成它们添加到列表中的字符串），我的*UI 失去了响应用户的能力大约之后的I/O*（例如使用鼠标）。大约一分钟后，它完全不接受任何用户交互 30 秒。

为了解决这个问题，我编写了某种**缓冲调用**程序，它负责缓冲我想要调用到 UI 调度程序上的所有方法调用，然后以**受控方式**调用它们，例如在调用之间有一些延迟以**避免淹没**UI 调度程序。

这是一些代码来说明我在做什么（请参阅代码段后的描述）：

```
public static class BufferedInvoker {

    private static long _invoked;
    private static long _returned;
    private static long _pending;
    private static bool _isInbalanced;

    private static List<IInvocation> _workLoad;
    private static Queue<IInvocation> _queue;

    private static Thread _enqueuingThread;
    private static Thread _dequeuingThread;
    private static ManualResetEvent _terminateSignal;
    private static ManualResetEvent _enqueuSignal;
    private static ManualResetEvent _dequeueSignal;

    public static void AddInvocation (IInvocation invocation) {

        lock (_workLoad) {

            _workLoad.Add(invocation);
            _enqueuSignal.Set();
        }
    }

    private static void _enqueuing () {

        while (!_terminateSignal.WaitOne(0, false)) {

            if (_enqueuSignal.WaitOne()) {

                lock (_workLoad) {

                    lock (_queue) {

                        if (_workLoad.Count == 0 || _queue.Count == 20) {

                            _enqueuSignal.Reset();
                            continue;
                        }

                        IInvocation item = _workLoad[0];
                        _workLoad.RemoveAt(0);
                        _queue.Enqueue(item);

                        if (_queue.Count == 1) _dequeueSignal.Set();
                    }
                }
            }
        }
    }

    private static void _dequeuing () {

        while (!_terminateSignal.WaitOne(0, false)) {

            if (_dequeueSignal.WaitOne()) {

                lock (_queue) {

                    if (_queue.Count == 0) {

                        _dequeueSignal.Reset();
                        continue;
                    }

                    Thread.Sleep(delay);

                    IInvocation i = _queue.Dequeue();
                    i.Invoke();

                    _invoked++;
                    _waiting = _triggered - _invoked;
                }
            }
        }
    }

    public static void Returned (string ident, double duration) {

        _returned++;

        // ...
    }
} 
```

这个**BufferedInvoker**背后的想法是**ObservableCollections**不会自己调用操作，而是调用**BufferedInvoker的****AddInvocation**方法，该方法将*调用任务*放入其**_workload**列表中。然后，**BufferedInvoker维护两个在****_queue**上运行的“内部”线程——一个线程从**_workload**列表中获取调用并将它们放入**_queue**，另一个线程将调用从**_queue**中取出，最后一个接一个地调用它们。

 *******所以这只不过是两个缓冲区来存储*挂起的调用任务*以*延迟*它们的实际调用。我进一步计算了**_dequeuing**线程（即 long **_invoked** ）实际调用的*调用任务的数量以及从它们的执行中返回的方法的数量（* **ObservableCollection**中的每个方法都调用了**Returned()**方法**BufferedInvoker**完成执行时 - 一个存储在**_returned**变量中的数字。

 ******我的想法是使用 ( **_invoked** - **_returned** ) 获取挂起调用的数量，以了解 UI 调度程序的*工作量*- 但令人惊讶的是**_pending**总是低于 1 或 2。

所以我现在的问题是，虽然我延迟了对 UI 调度程序的方法调用（使用 Thread.Sleep(delay)），但应用程序在一段时间后开始滞后，这反映了 UI 有太多事情要做来处理用户 I/O。

但是 - 这就是我真正想知道的 - **_pending**计数器永远不会达到很高的值，即使 UI 已经被冻结，大多数时候它也是 0。

所以我现在必须找到

**(1)**一种衡量 UI 调度器工作量的方法，以确定 UI 调度器过度工作的点和

**(2)**做一些反对它的事情。

所以现在非常感谢您阅读到此为止，我希望您有任何想法如何在 UI 调度程序上调用任意数量的方法而不会压倒它..

提前谢谢...*强调文字**强调文字*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T00:06:14.133

快速看了一下，我注意到你睡觉时是拿着锁的。这意味着在睡觉时没有人可以入队，从而使队列变得无用。

应用程序延迟不是因为队列很忙，而是因为几乎总是持有锁。

我认为你最好删除所有手动实现的队列、锁和监视器，只使用内置的 ConcurrentQueue。每个 UI 控件和线程一个队列，每个队列一个计时器。

无论如何，这是我的建议：

```
ConcurrentQueue<Item> queue = new ...;

//timer pulls every 100ms or so
var timer = new Timer(_ => {
 var localItems = new List<Item>();
 while(queue.TryDequeue(...)) { localItems.Add(...); }
 if(localItems.Count != 0) { pushToUI(localItems); }
});

//producer pushes unlimited amounts
new Thread(() => { while(true) queue.Enqueue(...); }); 
```

简单的。*************

# uitableview - 使用 uitextview 在 uitableview 中滚动

> ID：11250950
> 
> 赞同：1
> 
> 时间：2012-06-28T18:42:13.673
> 
> 标签：uitableview, uitextview

我有一个带有自定义 uitableviewcell 的 uitableview。要隐藏键盘用户应该向上或向下滚动。我通过实现这个方法来达到这个目的

```
- (void)scrollViewWillBeginDragging:(UIScrollView *)scrollView
{
    if (_isEnableHide) {
        [self resignFirstResponderForVisibleCells];
    }
} 
```

但

选择单元格并打开键盘时，我尝试滚动，但奇怪的行为开始。它在键盘消失并且任何滚动停止后开始滚动。

![在此处输入图像描述](../Images/13a01f20ddad939c7e50b51fc6ba519d.png)

我想用键盘向下查看。

我尝试通过这样的动画手动执行此操作

```
....
 tableView.contentInset = UIEdgeInsetsZero;
 tableView.scrollIndicatorInsets = UIEdgeInsetsZero;
..... 
```

但是在tableview 上滚动后停止tableview 并且tableview 的插图是负KEYBOARHEIGHT。如何在滚动停止后一起向下滚动表格视图和键盘或取消自动向下移动以手动进行。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-30T16:08:38.597

我通过将 self.tableView.scrollEnabled 设置为 No 并在键盘消失后将其更改为 YES 解决了这个问题。但是在那之后不会发生正确的滚动。为了解决这个问题，我们手动滚动 tableView

```
CGRect rect = self.frame;
if (isDown) {
  rect.origin.y +=someDistance;
}else{
  rect.origin.y -= someDistance;
}
[tableView scrollRectToVisible:rect animated:YES]; 
```

# html - 旧代码中的 Safari 特定滚动条问题

> ID：11250951
> 
> 赞同：0
> 
> 时间：2012-06-28T18:42:16.260
> 
> 标签：html, debugging, iframe, safari, scroll

我正在尝试调试专门在 Safari 中发生的问题。在 Web 应用程序的一些页面上，内容大于框架并且右侧出现滚动条，但是当滚动条向上或向下移动时，内容不会随之滚动。因此，您可以“滚动”滚动条，但即使滚动条是移动的，内容本身也无法访问。

该问题仅出现在“多进程 Windows”调试模式选项中，而不出现在“单进程 Windows”选项中。滚动条在 Firefox、IE 和 Chrome 中运行良好，只是在 Safari 中不行。因为有很多遗留代码，我不太确定实际内容是什么以及哪些特定的 html 元素是相关的。据我所知，有一个 iframe 元素、html 元素、body 元素、div 元素、iframe 元素 html 元素、body 元素，最后还有一些 div。

*编辑*中的某些元素是否`<iframe>`具有属性是否重要`scrolling="no"`？我在 iframe 中的一些元素上看到了这一点，但我的同事向我保证它们并不重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T18:52:40.803

您是否尝试过添加溢出-y：滚动；到身体CSS？

# java - JavaFx 2.0 在 Web 应用程序客户端的可移植性如何（并且效率高）？

> ID：11250953
> 
> 赞同：2
> 
> 时间：2012-06-28T18:42:23.630
> 
> 标签：java, web-applications, applet, client-side, javafx-2

如果我从我所读的内容中得到它，JavaFX 2.0 允许您使用 Java 编写所有逻辑并使用 FXML 设计屏幕。然后，Web 应用程序作为小程序在客户端运行。

但：

1.  所有浏览器和移动设备都能够运行小程序吗？
2.  它是否有效（即，良好的用户体验）？

换句话说，JavaFx 2.0 Web 应用程序在客户端的可移植性如何？有人有经验可以分享吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T18:59:40.320

JavaFX 生成 Java 小程序。所以我在这里所说的适用于 Java 小程序。

1.  大多数台式机浏览器都与 Java 兼容：IE、Firefox、Chrome、Safari、Windows 上的 Opera、Mac、Linux 和 Solaris。对于智能手机来说，这似乎要复杂得多。我认为这对 iOS、Blackberry 和 Android 来说肯定是绝对的拒绝。对于 Windows Phone，这可能是可能的，但对于主流用户来说可能太复杂了。

2.  高效是一个广义的概念。它有优点（启动后的性能、对丰富的 Java 生态系统的开放性）和缺点（启动时间、大小、所有小程序在同一个 JVM 实例中运行）。Java 7 改进了体验，您可以在此处阅读：[http ://www.oracle.com/technetwork/articles/java/javaclient-484666.html](http://www.oracle.com/technetwork/articles/java/javaclient-484666.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T19:36:46.573

从[如何在 Android 上运行小程序？](https://stackoverflow.com/questions/5126192/running-applets-on-android)，似乎android无法运行小程序。

因此，JavaFX 2.0 似乎在大多数浏览器上都可以，但不适用于智能手机等便携式设备。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-08T16:08:18.007

JavaFX 应用程序可以以多种方式打包。它们可以在网页中作为小程序运行，可以通过 java web start 启动，甚至可以作为 os 原生应用程序分发。所以是的，JavaFX 是可移植的。该线程中的其他人已经讨论过 JavaFX 小程序，这就是您的问题所在。所以我不会详细说明这一点。但是，我觉得您可能错过了这样一个事实，即 JavaFX 客户端不仅必须作为小程序在浏览器中分发，以便与后端通信。事实上，我什至不会考虑将其作为替代方案，根据我自己过去的小程序经验以及它们在网页上下文中的丑陋程度来判断。

作为小程序的替代方案，您可以编写一个 JavaFX 独立应用程序，该应用程序使用基于 SOAP 或 REST 的 Web 服务与后端通信。互联网上到处都是这些例子。此外，您可以通过 Java Web Start 启动应用程序并进行依赖注入，以获取服务器上资源的代理对象。**博客海报和 Oracle 文章没有**提到这最后一部分。事实上，我还没有找到一种标准化的方法来做到这一点。但是，如果您将常规 Java SE 应用程序打包到 EAR 包中，您可以在该应用程序的`Main`类中注入资源，并让线程启动新的 JavaFX 应用程序并转发这些资源。这是我编写的教程，带您完成整个过程：

[http://blog.martinandersson.com/the-enterprise-side-of-javafx-the-missing-part/](http://blog.martinandersson.com/the-enterprise-side-of-javafx-the-missing-part/)

# c# - 通过单击应用程序的窗口获取进程 ID

> ID：11250954
> 
> 赞同：0
> 
> 时间：2012-06-28T18:42:35.327
> 
> 标签：c#, jquery, asp.net-mvc-3, model-view-controller

我正在使用 MVC 3 开发一个项目，并且正在尝试使用一些流程选择功能。我已经有一个选择，它以一种不错的下拉格式列出所有正在运行的进程，但我想更进一步。

就目前而言，用户使用下拉菜单从所有正在运行的进程列表中选择一个进程，并将该信息传递给视图。我试图弄清楚如何允许用户单击视图中的图标，然后单击当前打开的窗口以将该窗口的进程 ID 传递给视图。

到目前为止，我所拥有的只是为`<img>`. 关于下一步该做什么，我遇到了一个完全的障碍。关于获取所有进程列表的信息很多，但关于通过鼠标单击获取特定进程的信息并不多。任何想法都会有所帮助。

据我所知，我必须在 jQuery 中连接一个触发 C# 动作的点击事件。然后，此操作等待用户单击窗口，获取该窗口的进程 ID，然后将其发送回视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T02:36:36.223

我一头雾水，网页如何获取用户电脑得处理呢？浏览器有自己的安全行为，能直接操纵用户的电脑不安全吗？

可以使用浏览器插件功能获取用户的电脑进程

另外，我看到你你说你在客户端电脑上有一个客户端所以你可以通过客户端获取用户点击的过程是什么，然后由客户端与服务器通信，然后将表单显示给浏览器使用服务器推送

# ios - 从本地 plist (null) 安装 iOS 应用程序想要安装

> ID：11250957
> 
> 赞同：5
> 
> 时间：2012-06-28T18:42:43.523
> 
> 标签：ios, null, ipa, adhoc

我正在尝试从设备文件系统上的 plist 安装 iOS 应用程序。

```
NSString *launchNewPlistURL = [NSString stringWithFormat:@"itms-services://?action=download-manifest&url=file://%@",[self saveFilePath]];
[[UIApplication sharedApplication]openURL:[NSURL URLWithString:launchNewPlistURL]]; 
```

我被提示“（null）想要安装{myappname}”。通常 (null) 是 plist 来自的域名，但在这种情况下它为 null，因为它是本地文件。

无论如何要在 plist 中指定标题或在 url 中传递假域名？

谢谢，丹

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T07:01:16.277

您可以使用[MongooseDaemon](https://github.com/face/MongooseDaemon)项目来创建 HTTP 本地服务器。

使用类似于：http: [//192.168.xxx.xxx/yourplist.plist](http://192.168.xxx.xxx/yourplist.plist)的域来安装它。

无论如何，我认为您不能将它与大型 IPA 一起使用。我尝试过使用大于 15MB 的 IPA，但启动安装非常非常慢。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T16:07:16.913

我也遇到了类似的情况，本来也是走猫鼬的路线，今天偶然发现了[CocoaHttpServer](https://github.com/robbiehanson/CocoaHTTPServer)。

使用 Mongoose，我只获得了大约 20% 的成功率来提供本地 plist/IPA 文件。有时`localhost would like to install`对话框从未出现，有时安装开始并在中途失败，有时它确实有效。更糟糕的是，一旦某个应用程序出现故障，我必须完全卸载并重新安装它，因此所有数据都丢失了。我永远无法成功“修复”失败的安装。

到目前为止，只需大约 10-15 分钟的测试，CocoaHttpServer 还没有失败。我知道这是一个非常小的样本量，但我的 Mongoose 成功率约为 10%。

```
self.httpServer = [[HTTPServer alloc] init];
[self.httpServer setType:@"_http._tcp."];
[self.httpServer setPort:8080];
//This is just a path where I save my IPA and Plist file locally.  
//In my case it's /{NSDocumentDirectory}/install/
[self.httpServer setDocumentRoot:[self pathForLocalInstallFiles]]; 
```

然后是磁盘上 plist 的 URL：

```
NSURL *plistUrl = [NSURL URLWithString:@"itms-services://?action=download-manifest&url=http://localhost:8080/appname.plist"];
[[UIApplication sharedApplication] openURL:plistUrl]; 
```

在 plist 中，您的 URL 指向本地 IPA 文件，我使用`file://`or 或`http://localhost/`.

# asp.net-mvc - Sammy.js 和 Knockout.js => 没有模板的模板？

> ID：11250958
> 
> 赞同：7
> 
> 时间：2012-06-28T18:42:50.690
> 
> 标签：asp.net-mvc, knockout.js, sammy.js

我对javascript客户端开发的概念相当陌生。我遇到了一个问题，尽管我可能只是不明白如何使用框架的混搭来完成某些事情。

我知道我想使用 Knockout 来获得丰富的客户端优势。我还想使用 Sammy.js 来允许将数据路由和传递到淘汰视图（我来自 MVC 背景，我用数据填充模型，然后返回视图（模型），MVC 将它绑定得很好，对我有好处） .

所以现在我正在尝试做一些类似的客户端......

这是我的 Index.html ：

```
<!DOCTYPE html>

<html>
  <head>
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, maximum-scale=1.0, user-scalable=no;" />
    <meta http-equiv="Content-type" content="text/html; charset=utf-8"/>

    <title>The EClassifieds Mobile</title>

      <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.js"></script>
      <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1/jquery-ui.min.js"></script>
<!--      <script type="text/javascript" src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>-->
      <script type="text/javascript" charset="utf-8" src="./scripts/cordova-1.8.1.js"></script>
      <script type="text/javascript" charset="utf-8" src="./scripts/knockout.js"></script>
      <script type="text/javascript" charset="utf-8" src="./scripts/templ.js"></script>
      <script type="text/javascript" charset="utf-8" src="./scripts/sammy.js"></script>      
      <script type="text/javascript" charset="utf-8" src="./scripts/sammy.tmpl.js"></script>
      <script type="text/javascript" charset="utf-8" src="./services/RouteManager.js"></script>
      <script type="text/javascript" charset="utf-8" src="./services/ApplicationManager.js"></script>

       <link rel="stylesheet" href="./style/site.css" type="text/css" media="screen" title="no title" charset="utf-8"/>       
 <!--      <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />-->

  </head>
  <body>

  <div id="main">
  <h1>HELLO WORLD!</h1>
    <!--Sammy should update the content of this div dynamically, creating a SPA (single page application)-->
  </div>

  </body>
</html> 
```

这是我的 Sammy 配置。

```
(function ($) {

    alert('Building Routes');
    var app = $.sammy('#main', function () {
        this.use('Tmpl', 'html'); 
        this.get('#/', function (context) {
            alert('Rendering Partial for Login page');
            context.app.swap('Loading...');
            this.render("/views/Login.html");
        });

    });

    $(function () {
        app.run('#/');
    });

})(jQuery); 
```

这是我的 Login.html

```
 <!--Model File Goes Here -->
    <script type="text/javascript" charset="utf-8" src="../models/Login.js"></script>

     <fieldset title="Please Login to Begin :">

            <div data-role="content" style="padding: 15px">
                <div data-role="fieldcontain">
                    <fieldset data-role="controlgroup" data-mini="true">
                        <label for="txtUsername">
                            Username
                        </label>
                        <input id="txtUsername" data-bind="value: username" placeholder="Stevie" value="" type="text" />
                    </fieldset>
                </div>
                <div data-role="fieldcontain">
                    <fieldset data-role="controlgroup" data-mini="true">
                        <label for="txtPassword">
                            Password
                        </label>
                        <input id="txtPassword" data-bind="value: password" placeholder="yep!" value="" type="password" />
                    </fieldset>
                </div>
                <a id="btnLogin" data-role="button" data-transition="fade" href="#page1" >
                    Login
                </a>
            </div>

            <div id="errorText">
                <h1></h1>            
            </div>

          <p id="deviceProperties">Loading device properties...</p>

    </fieldset>

 <script type="text/javascript">
      $(document).ready(function () {
              ko.applyBindings(new LoginDataModel(0, "Stevie", "theTV", true));

          });

</script> 
```

我还需要一些方法将数据从 sammy get 处理程序传递到淘汰页面。有没有办法做到这一点，还是我在尝试不可能的事情？

* * *

更新1：我真的很想能够做类似的事情：

```
 var app = $.sammy('#main', function () {
            this.use('Tmpl', 'html'); 
            this.get('#/', function (context) {
                alert('Rendering Partial for Login page');
                context.app.swap('Loading...');
                var data = getLoginData();
                this.render("/views/Login.html", data);
            }); 
```

Sammy 使用其他模板框架做同样的事情，但是，我看不到如何将 Knockout 视图中的 $data 绑定到从 Sammy 传递的数据。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-29T13:19:10.307

不确定你是否看到了这个，但是 knockoutjs 网站上的 webmail 教程使用 sammy.js 进行路由：

[http://learn.knockoutjs.com/#/?tutorial=webmail](http://learn.knockoutjs.com/#/?tutorial=webmail)

这是成品的链接（如果您不想遵循整个教程，可以查看源代码） [http://learn.knockoutjs.com/WebmailExampleStandalone.html](http://learn.knockoutjs.com/WebmailExampleStandalone.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-06T13:28:52.397

Knockout.js-External-Templates 插件将帮助您实现此行为。一个好的起点将从~~这里~~ 编辑：“起点”链接现在指向恶意软件。

甚至约翰爸爸[也在这里认可它](http://visualstudiomagazine.com/articles/2012/04/01/code-reuse-with-external-templates-and-knockoutjs.aspx)

仅当您经常重用模板时，上述解决方案才有用。尽可能使用内联模板。内联模板——使用 foreach 绑定，执行速度比从单独的 DOM 元素应用模板快 1/3，即所谓的命名模板绑定。更多信息在[这里](http://www.strathweb.com/2012/08/knockout-js-pro-tips-working-with-templates/)

# facebook-fql - 必须要求“列表”而不是“链接”。FQL API 中的错字还是我误解了？

> ID：11250963
> 
> 赞同：1
> 
> 时间：2012-06-28T18:43:09.220
> 
> 标签：facebook-fql

首先，**这不是错误报告！**在提交错误报告（在适当的位置）之前，我想确保这不是误解。

```
SELECT post_id FROM like WHERE user_id = me() AND object_type = "link" 
```

不起作用，但是

```
SELECT post_id FROM like WHERE user_id = me() AND object_type = "list" 
```

返回我喜欢的链接。

是我误解了什么还是 Facebook 犯了一个可怕的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T21:29:17.443

Facebook 很可能在此日期出现错误（错误），电话`list`不再有效

`SELECT object_id, post_id FROM like WHERE user_id = me() AND object_type = "link"`

是正确的电话

# objective-c - 从数组的索引查看图像

> ID：11250964
> 
> 赞同：0
> 
> 时间：2012-06-28T18:43:10.420
> 
> 标签：objective-c, xcode, animation, uiimageview, nsarray

我创建了一个包含图像的数组，我通过animationImages 为它们设置动画。但是现在我想从数组索引中查看图像（我想创建一个带有计数的 for 循环，如果我的计数等于 1，那么它将查看数组中索引 1 处的图像）并对它们进行动画处理。我需要它，因为我想查看从 1 到 100 的数字，如果我的数字等于 11，那么我将显示数字 1 twich（以避免创建 100 个数字图像）。我该怎么做？这是我的正确代码：

```
//Numbers images
UIImage *numberZero = [UIImage imageNamed:@"numberZero.png"];
UIImage *numberOne = [UIImage imageNamed:@"numberOne.png"];
UIImage *numberTwo = [UIImage imageNamed:@"numberTwo.png"];
UIImage *numberThree = [UIImage imageNamed:@"numberThree.png"];
UIImage *numberFour = [UIImage imageNamed:@"numberFour.png"];
UIImage *numberFive = [UIImage imageNamed:@"numberFive.png"];
UIImage *numberSix = [UIImage imageNamed:@"numberSix.png"];
UIImage *numberSeven = [UIImage imageNamed:@"numberSeven.png"];
UIImage *numberEight = [UIImage imageNamed:@"numberEight.png"];
UIImage *numberNine = [UIImage imageNamed:@"numberNine.png"];

//add numbers uiimage to numbersArray
numbersArray = [NSArray arrayWithObjects:numberZero, numberOne, numberTwo, numberThree, numberFour, numberFive, numberSix, numberSeven, numberEight, numberNine, nil];

UIImageView *imgview1 = [[UIImageView alloc] initWithFrame:CGRectMake(40, 90, 240, 240)];
imgview1.animationImages = numbersArray;
imgview1.animationDuration = 2;
imgview1.animationRepeatCount=1;
[imgview1 startAnimating];
[self.view addSubview:imgview1]; 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T19:02:38.037

我有点不确定你的问题，但我猜你正在尝试使用你的图像作为数字来动画计数到 100（？）。因此，`UIImageView`为每个数字使用一个，都具有相同的动画图像，并以相对的持续时间为不同的位置设置动画：

```
float onesDurations = 2;
UIImageView *onesPlace = [[UIImageView alloc] init...]; 
onesPlace.animationImages = numbersArray;
onesPlace.animationDuration = onesDurations;

UIImageView *tensPlace = [[UIImageView alloc] init...]; 
tensPlace.animationImages = numbersArray;
tensPlace.animationDuration = 10*onesDurations; // ten times as slow as ones animation

UIImageView *hundredsPlace = [[UIImageView alloc] init...]; 
hundredsPlace.animationImages = numbersArray;
hundredsPlace.animationDuration = 100*onesDurations; // 100 times as slow animation

// add them all to the view
// start their animations 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T18:58:46.480

您可以使用自定义字体显示文本而不是图像。如果要添加边框或轮廓，则需要做更多的工作。[这个问题](https://stackoverflow.com/questions/1103148/how-do-i-make-uilabel-display-outlined-text)解释了如何在文本中添加大纲。

希望这可以帮助

# jquery - 如何在 Dreamweaver 中添加 jQuery 后退按钮？

> ID：11250965
> 
> 赞同：1
> 
> 时间：2012-06-28T18:43:12.153
> 
> 标签：jquery, cordova, dreamweaver

我正在学习 jQuery，我正在遵循的教程使用 Dreamweaver CS5.5 和 Phonegap 示例应用程序。示例应用程序中的每个视图都有一个后退按钮，但 Dreamweaver CS6 中的 jQuery 移动示例应用程序没有任何后退按钮，因此我试图弄清楚如何手动添加它们。我可以使用 Go back 来做到这一点，但我如何使用其中一个 jQuery 按钮来做到这一点？

我试过`<button data-rel="back" data-theme="e">Button</button>`了，但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T18:51:48.787

请先参考文档：http: [//jquerymobile.com/demos/1.1.0/docs/toolbars/docs-headers.html](http://jquerymobile.com/demos/1.1.0/docs/toolbars/docs-headers.html)

它应该像这样简单`<a href="#" data-rel="back">Back</a>`

但是，不建议使用`#`它，因为它在 C 级浏览器中无用，如文档中所述。

# javascript - Javascript 正则表达式：交替和嵌套

> ID：11250968
> 
> 赞同：4
> 
> 时间：2012-06-28T18:43:21.383
> 
> 标签：javascript, regex

这是我到目前为止所得到的：

```
/(netscape)|(navigator)\/(\d+)(\.(\d+))?/.test(UserAgentString.toLowerCase()) ? ' netscape'+RegExp.$3+RegExp.$4 : '' 
```

我在这里尝试做几件不同的事情。

(1)。我想匹配or ，它后面必须跟一个斜杠和一个或多个数字*。* `netscape``navigator`

(2)。它可以选择跟随这些数字，最多可以是以下之一：一个句点和一个或多个数字。

如果 (1) 不为真，则表达式应计算为空字符串。

表达式应该返回`' netscape8'`if `UserAgentString`is `Netscape/8`or `Navigator/8`。

表达式应该返回`' netscape8.4'`if `UserAgentString`is `Navigator/8.4.2`。

正则表达式不起作用。特别是（这是我测试的一个经过编辑的版本，它仍然不起作用）：

```
// in Chrome this produces ["netscape", "netscape", undefined, undefined]
(/(netscape)|(navigator)\/(\d+)/.exec("Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US; rv:1.7.5) Gecko/20060912 Netscape/8.1.2".toLowerCase())) 
```

为什么不`8`匹配？它应该出现在第三个条目还是第四个条目中？

有几件事我想弄清楚它们是否受支持。请注意我有 5 组捕获父组。组 #5`\d+`包含*在*组 #4:`\.(\d+)`中。是否可以检索匹配的组？

另外，如果我指定这样的组会发生什么？`/(\.\d+)*/`这匹配任何数量的“点号”字符串连接在一起（如版本号）。这里`RegExp.$1`应该匹配什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T18:59:09.403

您的“或”表达式没有按照您的想法进行。

简化，你这样做：

`(a)|(b)cde`

哪个匹配`a`或`bcde`。

在“或”表达式周围`((a)|(b))cde`加上括号：这将匹配`acde`or `bcde`。

我发现[http://regexpal.com/](http://regexpal.com/)是一个非常有用的工具，可以快速检查我的正则表达式语法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T18:54:20.663

*正则表达式* `(netscape|navigator)\/(\d+(?:\.\d+)?)` *将返回 2 个组（如果找到匹配项）：*

1.  网景或导航器
2.  名字后面的数字

    ```
    var m = /(netscape|navigator)\/(\d+(?:\.\d+)?)/.exec(text); 
    if (m != null) { 
      var r = m[1] + m[2]; 
    } 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T19:13:40.493

`(....)` 创建一个组。该组内的所有内容都与该组的变量一起返回。

以下将匹配`netscape`or`navigator`和版本的前两个数字，由句点分隔。

```
 $1                       $2
 |------------------|        |------------|
/(netscape|navigator)[^\/]*\/((\d+)\.(\d+))/ 
```

最终代码如下所示：

```
/(netscape|navigator)[^\/]*\/((\d+)\.(\d+))/.test(
     navigator.userAgent.toLowerCase()
) ? 'netscape'+RegExp.$2 : '' 
```

哪个会给你

`netscape5.0`

看看这些很棒的 tuts（还有更多）：

*   [http://perldoc.perl.org/perlrequick.html](http://perldoc.perl.org/perlrequick.html)
*   [http://perldoc.perl.org/perlre.html](http://perldoc.perl.org/perlre.html)
*   [http://perldoc.perl.org/perlretut.html](http://perldoc.perl.org/perlretut.html)

# c# - 调用 OrganizationService.Associate() 和在 Dynamics CRM 中显式设置实体的外键字段有什么区别？

> ID：11250973
> 
> 赞同：4
> 
> 时间：2012-06-28T18:43:33.223
> 
> 标签：c#, dynamics-crm, dynamics-crm-2011

**Associate()**操作是否执行了一些额外的逻辑？我想以编程方式将大量数据从一个 Dynamics CRM 实例复制到另一个实例。而且我认为制作行的普通副本会更简单（从根对象开始以避免破坏约束）。

此外，是否也可以克隆**systemuser**和**业务单位**实例（行）？

先感谢您！

PS：通过克隆一行（使用**OrganizationServiceProxy**），我的意思是：

*   获取行的所有属性（来自 Dynamics CRM 1）
*   e = new entity()，设置所有属性（包括 id），然后 service.create(e)（在 Dynamics CRM 2 上）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T08:08:28.257

您是否考虑过备份并恢复到您的 CRM 数据库的另一台服务器？也许它可以帮助你。在任何情况下，您都可以将新记录添加到 CRM 数据库内的任何表中，但风险自负。使用 SQL 修改任何数据在Microsoft[不支持的技术列表中。](http://msdn.microsoft.com/en-us/library/gg328350.aspx)尤其是当您谈论系统用户和业务单位时。
您还可以编写简单的应用程序，使用 CRM SDK 插入数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T22:49:34.083

Associate 可用于清理到底，但您的实体顺序将是您想要的第一个布局。

例如，您需要在联系人之前复制帐户。但是，在帐户上，您可能有一个主要联系人，您需要返回并关联。这与返回并使用查找值更新帐户记录（插入的帖子联系人）没有什么不同。

我还建议查看以编程方式导出基本非托管解决方案，然后在需要时将其导入。

# sybase - 如何更改 Sybase 中表的现有列类型？

> ID：11250974
> 
> 赞同：5
> 
> 时间：2012-06-28T18:43:36.493
> 
> 标签：sybase, alter-table

我搜索了一段时间，无法得到答案。

为什么这不起作用？ALTER TABLE mytable ALTER COLUMN 价格 DOUBLE

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-29T08:34:33.320

语法不正确，Sybase 中没有 DOUBLE 数据类型。

所以，你可以这样尝试：

```
ALTER TABLE mytable MODIFY price float 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-07T08:51:03.807

要更改任何表以更改某些字段的数据类型：
`ALTER TABLE <table_name> MODIFY <column_name> <new_datatype>`
例如：
为了将任何列“emp_id”的数据类型从*int*更改为*varchar*，您需要：
`ALTER TABLE employee MODIFY emp_id varchar(10)`
不是很简单吗？

# shell - cront 不能在 shell 脚本中使用 hadoop 命令

> ID：11250978
> 
> 赞同：1
> 
> 时间：2012-06-28T18:43:56.787
> 
> 标签：shell, hadoop, crontab, cron-task

我正在尝试使用 crontab 安排一个 cronjob 来执行一个 shell 脚本，该脚本按顺序执行一系列 hadoop 命令，但是当我查看 hadoop 文件夹时，这些文件夹不会被创建或删除。我们集群上的 hadoop 连接非常慢。因此，由于重试次数，这些 hadoop 命令可能需要一些时间才能执行。

cron 表达式

```
*/5 * * * * sh /test1/a/bin/ice.sh >> /test1/a/run.log 
```

外壳脚本

```
#!/bin/sh

if [ $# == 1 ]
then
        TODAY=$1
else
        TODAY=`/bin/date +%m%d%Y%H%M%S`
fi

# define seed folder here
#filelist = "ls /test1/a/seeds/"

#for file in $filelist
for file in `/bin/ls /test1/a/seeds/`
do
        echo $file
        echo $TODAY
        INBOUND="hadoop fs -put /test1/a/seeds/$file /apps/hdmi-set/inbound/$file.$TODAY/$file"
        echo $INBOUND
        $INBOUND
        SEEDDONE="hadoop fs -put /test1/a/seedDone /apps/hdmi-set/inbound/$file.$TODAY/seedDone"
        echo $SEEDDONE
        $SEEDDONE
done

echo "hadoop Inbound folders created for job1 ..." 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T20:09:20.813

由于没有捕获到可用于调试输出的输出，我只能推测。

但根据我过去的经验，hadoop 作业通过脚本生成时失败的常见原因之一是执行这些命令时 HADOOP_HOME 不可用。

直接从终端工作时，通常情况并非如此。尝试将以下内容添加到“.bashrc”和“.bash_profile”或“.profile”：

```
export HADOOP_HOME=/usr/lib/hadoop 
```

您可能必须根据您的特定安装更改路径。

是的，正如评论所说，不仅重定向标准输出，而且在文件中也出现错误。

# php - 同时用于多个模型的 YII 验证器

> ID：11250983
> 
> 赞同：0
> 
> 时间：2012-06-28T18:44:12.530
> 
> 标签：php, validation, yii

我怎样才能拥有一个同时查看 2 个模型的验证器？

我有以下情况：一个 ActiveRecord foo 和一个 ActiveRecord 栏。

如果 foo 的属性是 X，我希望 bar 的字段 A 是必需的，如果是 Y，我希望 bar 的字段 B 是必需的。

# css - jQuery colorbox 在 IE8 中不起作用（但在 IE7 中起作用？）

> ID：11250990
> 
> 赞同：0
> 
> 时间：2012-06-28T18:44:55.210
> 
> 标签：css, wordpress, colorbox, nextgen-gallery

我在一个客户网站上工作，由于某种原因，jQuery colorbox 插件在这个网站的 IE8 中无法正常工作，它正在打开颜色框并且没有宽度。画廊正在运行 NextGEN 画廊。

[http://bwosoyoos.lexcorp.ca/photo-gallery/](http://bwosoyoos.lexcorp.ca/photo-gallery/)

我不明白这一点的主要原因是因为我在另一个站点上运行了完全相同的东西并且它工作正常（也为颜色框使用相同的主题/css）

如果有人能对此有所启发，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T18:06:09.220

我无法找出直接原因，我也尝试切换到 Lightbox Plus 而不是 jQuery Colorbox .. 但它仍然是同一个问题。

我添加了一条警告消息，当人们在 IE 8 或更低版本上查看该页面时会弹出一条警告消息，表示它无法正常运行并提供更新 IE 的链接，或通过 BrowseHappy.com 下载另一个浏览器 .. 这是最好的我暂时可以做。：/

# c# - 将 XML 字符串反序列化为对象错误：xml 文档中存在错误 (1,2)

> ID：11250992
> 
> 赞同：7
> 
> 时间：2012-06-28T18:44:56.160
> 
> 标签：c#, .net, windows, xml-serialization, xmlserializer

从 windows 事件查看器中，我可以获得以下 xml 结构：

```
<Event xmlns="http://schemas.microsoft.com/win/2004/08/events/event">
<System>
  <Provider Name="XXXXXXXXXX" Guid="{YYYYYYYY}" /> 
  <EventID>XYZ</EventID> 
  <Version>0</Version> 
  <Level>L</Level> 
  <Task>A</Task> 
  <Opcode>0</Opcode> 
  <Keywords>0x000xyzh</Keywords> 
  <TimeCreated SystemTime="2012-06-28T15:44:04.997837000Z" /> 
  <EventRecordID>153</EventRecordID> 
  <Correlation ActivityID="{DDDDDDDDD}" /> 
  <Execution ProcessID="199999" ThreadID="90990" /> 
  <Channel>Microsoft-Windows-ABCDEFG/Admin</Channel> 
  <Computer>myPC</Computer> 
  <Security UserID="ABCABC" /> 
  </System>
<EventData>
  <Data Name="name1">data1</Data> 
  <Data Name="name2">data2</Data> 
  <Data Name="name3">data3</Data> 
</EventData>
<RenderingInfo Culture="en-US">
  <Message>some message </Message> 
  <Level>Information</Level> 
  <Task>XYZ</Task> 
  <Opcode>Info</Opcode> 
  <Channel /> 
  <Provider /> 
  <Keywords>
  <Keyword>XYZ</Keyword> 
  </Keywords>
</RenderingInfo>
</Event> 
```

我只对 xml 的 EventData 部分感兴趣。我创建了以下非常简单的类：

```
 public class Event
    {
        public EventData EventData;

    }

    public class EventData
    {
        public String[] Data;
    } 
```

然后我使用以下代码：

```
XmlSerializer serializer = new XmlSerializer(typeof(Event));
StringReader reader = new StringReader(evtXml);
evt = (Event)serializer.Deserialize(reader); 
```

但在第一行代码，我收到以下错误：

**`There is an error in XML document (1, 2).`**

这个错误对我来说没有信息。问题是我没有类中的所有字段，还是我需要其他类（XmlSerializer 除外）来从中获取数据。我希望 EventData 下的数据的方式是按名称和数据值（例如 name1 和 data1）...等

***重要编辑***：我得到的 xml 是由[EventRecord](http://msdn.microsoft.com/en-us/library/system.diagnostics.eventing.reader.eventrecord_methods)类[的ToXML()](http://msdn.microsoft.com/en-us/library/system.diagnostics.eventing.reader.eventrecord.toxml.aspx)方法

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T19:35:45.147

```
XmlSerializer serializer = new XmlSerializer(typeof(Event),
        "http://schemas.microsoft.com/win/2004/08/events/event");

StringReader reader = new StringReader(evtXml);
var evt = (Event)serializer.Deserialize(reader); 
```

```
public class Event
{
    public Data[] EventData;
}

public class Data
{
    [XmlAttribute]
    public string Name;

    [XmlText]
    public string Value;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T19:44:11.517

XmlSerializer 经常告诉你遮罩是什么；添加一些错误处理，特别是：

```
try {
   // your code
} catch(Exception ex) {
    while(ex != null) {
        Console.WriteLine(ex.Message);
        ex = ex.InnerException;
    }
} 
```

我*猜*这是一个命名空间问题；尝试：

```
[XmlRoot("Event",
    Namespace="http://schemas.microsoft.com/win/2004/08/events/event")]
public class Event {...} 
```

# android - 不要在 largelayout 的 Fragment 中调用 onCreateOptionsMenu

> ID：11250994
> 
> 赞同：0
> 
> 时间：2012-06-28T18:44:59.650
> 
> 标签：android, fragment, options-menu

我有 3 个`Fragment`，在正常（小）布局中都在单独的活动中。他们应该在小布局中提供选项菜单。

在大布局中，我在一个 Activity 中有 3 个片段，导致菜单充满了由所有三个片段膨胀的按钮。我怎样才能防止这种情况，只让活动膨胀选项菜单，同时仍然在较小的设备上保留功能？

-编辑-

所以每个 Fragment 使用以下代码：

```
@Override
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    /* Some code */
    setHasOptionsMenu(true);
    /* Some code */
}

@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater){
    inflater.inflate(R.menu.mymenu, menu);
} 
```

当所有三个 Fragment 都显示时，所有 Fragment 都会执行`onCreateOptionsMenu()`并且所有项目都会出现 3 次。我想要的是让父母`Activity`负责创建选项菜单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T21:02:49.827

在每个片段中，我都会构建整个菜单。我所做的是，只在 Fragments 中添加它们的特定菜单项，并在父 Activity 中构建一般项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T20:55:32.150

您可以使用`isVisible()`每个方法`Fragment`来动态检查正在显示的内容，然后在 Activity 中适当地添加。

# javascript - 检查光标下元素是否存在

> ID：11250997
> 
> 赞同：2
> 
> 时间：2012-06-28T18:45:12.920
> 
> 标签：javascript, jquery, html

我想用它`javascript`来检测鼠标光标下是否存在元素，这意味着例如我想检查我是否在“img”上或是否在“p”元素上。

我不想添加悬停方法，应用程序会拖放元素，并且在拖动时，我想拒绝将该元素拖放到另一个元素存在的区域中。

是否可以使用`javascript/jQuery`and `html`？什么是正确的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T18:49:00.987

你可以试试看：

```
window.onmousemove = function(e){
    var e = e || event;
    var all = document.all;
    for(var i=0;i<all.length;i++)
        if(e.x>=all[i].offsetLeft && e.x<=(all[i].offsetLeft+all[i].offsetWidth) && e.y>=all[i].offsetTop && e.y<=(all[i].offsetTop+all[i].offsetHeight)){
            //Do something
            break;
        }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T19:56:30.083

您所要求的一切都可以在 jQueryUI 可拖放交互方法的选项中进行设置。如果当前的可拖动系统没有为简单的用户选项编码设置，请查看这些。

有一些内置的事件，比如你提到的“结束”。您可以使用简单的 jQuery 选择器或回调将 droppables 设置为仅接受某些元素。API 是健壮的，并且有很好的支持

[http://jqueryui.com/demos/draggable/](http://jqueryui.com/demos/draggable/)

# .htaccess - 将所有请求转发到 .htaccess 中的子目录

> ID：11250999
> 
> 赞同：0
> 
> 时间：2012-06-28T18:45:30.060
> 
> 标签：.htaccess, mod-rewrite

我意识到这个问题已经被问过很多次了，但我已经尝试了一段时间，并且无法让任何以前发布的解决方案为我工作。

我在我的网站上托管了一个 webapp 应用程序：www.example.com/app/

该应用程序的核心是一个位于 www.example.com/app/www/ 中的 index.php 文件

我需要将站点上的所有请求转发到此 /www/ 子目录。

例如，www.example.com/app/ 将转发到 www.example.com/app/www/

并且 www.example.com/app/view/ 将转发到 www.example.com/app/www/view/

感谢您在此问题上提供的任何帮助。这让我快疯了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T03:38:33.890

将此添加到文档根目录（“app”所在的目录）中的 htaccess 文件不起作用？

```
RewriteEngine On
RewriteCond %{REQUEST_URI} !^/app/www/
RewriteRule ^app/(.*)$ /app/www/$1 [L] 
```