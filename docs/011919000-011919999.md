# StackOverflow 问答 11919000-11919999

# objective-c - 动画 CALayer 阴影路径

> ID：11919001
> 
> 赞同：6
> 
> 时间：2012-08-12T01:21:25.787
> 
> 标签：objective-c, core-animation

我正在为`CALayer`.

框架正确调整大小，但阴影不缩放。

相反，阴影从最终大小开始`CGSize(20,20)`并在整个动画中保持不变，即使我将 shadowPath 设置为初始值

```
[CATransaction begin];
[CATransaction setAnimationDuration: 0];
[CATransaction setDisableActions: TRUE];
    layer.frame = CGRectMake(0,0,10,10);
    layer.shadowPath = [UIBezierPath bezierPathWithRect:layer.bounds].CGPath;
[CATransaction commit];

[CATransaction begin];

    [CATransaction setValue:[NSNumber numberWithFloat:10] forKey:kCATransactionAnimationDuration];
    layer.frame = CGRectMake(0,0,20,20);
    layer.shadowPath = [UIBezierPath bezierPathWithRect:tile.bounds].CGPath;

[CATransaction commit]; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-12T04:06:14.133

起初，带有阴影的小方块。

![ss](../Images/bdaab8dcb9333c2058dd98c621496958.png)

按下按钮时，正方形和阴影一起变大。

![ss](../Images/a871bbc4dc29a4f21e55f66603d90247.png)

主要代码如下：

```
[CATransaction begin];
[CATransaction setAnimationDuration:5.0];
CAMediaTimingFunction *timing = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear];
[CATransaction setAnimationTimingFunction:timing];
layer.frame = CGRectMake(0,0,100,100);
[CATransaction commit];    

CABasicAnimation *shadowAnimation = [CABasicAnimation animationWithKeyPath:@"shadowPath"];
shadowAnimation.duration = 5.0;
shadowAnimation.fromValue = (id)[UIBezierPath bezierPathWithRect:CGRectMake(0, 0, 50, 50)].CGPath;
shadowAnimation.toValue = (id)[UIBezierPath bezierPathWithRect:CGRectMake(0, 0, 100, 100)].CGPath;
[layer addAnimation:shadowAnimation forKey:@"shadow"]; 
```

您可以从 GitHub 下载此项目并运行它。

[https://github.com/weed/p120812_CALayerShadowTest](https://github.com/weed/p120812_CALayerShadowTest)

这个问题对我来说太难了！:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T18:18:02.483

想根据 Weed 的回答添加另一个答案。我接受了杂草的回答并尝试将所有内容放在 CATransaction 中，因为我想为多个图层设置动画并确保动画一起发生。如果你需要的话，你们就去吧。另外，我仍然不明白为什么必须在 CATransaction 中使用 fromValue 和 toValue。为什么你不能对其他属性（如 frame.properties）做同样的事情。

```
[CATransaction begin];

[CATransaction setValue:[CAMediaTimingFunction
    functionWithName:kCAMediaTimingFunctionEaseOut]
    forKey:kCATransactionAnimationTimingFunction];

for (CALayer *layer in self.layers){
    CABasicAnimation *shadowAnimation =
    [CABasicAnimation animationWithKeyPath:@"shadowPath"];

    shadowAnimation.fromValue =
        (id)[UIBezierPath bezierPathWithRect:layer.bounds].CGPath;
    shadowAnimation.timingFunction =
        [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseOut];
    layer.frame = rectFinal;
    shadowAnimation.toValue =
        (id)[UIBezierPath bezierPathWithRect:layer.bounds].CGPath;
    layer.shadowPath =
        [UIBezierPath bezierPathWithRect:layer.bounds].CGPath;
    [layer addAnimation:shadowAnimation forKey:nil];
}         
[CATransaction commit]; 
```

# javascript - 搜索和替换正则表达式以保持数字完整并复制它们

> ID：11919002
> 
> 赞同：0
> 
> 时间：2012-08-12T01:21:48.310
> 
> 标签：javascript, dreamweaver

我正在使用 Dreamweaver 替换一行看起来像这样的代码

```
123, //hotspot topValue 
```

一行代码看起来像这样

```
[123, 123, 123], //hotspot topValue 
```

我不擅长正则表达式。更难的是，我需要保持不变的数字并不总是三位数，有时也可能是 0。

在这种情况下，它应该从

```
0, //hotspot topValue 
```

到

```
[0, 0, 0], //hotspot topValue 
```

所以基本上我总是取注释行上的数字 //hotspot topValue 并将其放入数组中并复制两次。

这可以在查找和替换面板中使用正则表达式吗？我读到 Dreamweaver 使用 Javascript 正则表达式，如果有帮助的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T01:26:52.417

查看[Dreamweaver 的文档](http://www.adobe.com/devnet/dreamweaver/articles/regular_expressions_pt2.html)。

您正在寻找的正则表达式将是：

```
Find: ([0-9]+), //hotspot topValue
Replace: [$1,$1,$1], //hotspot topValue 
```

`[0-9]+``0,1,2,..,9`将匹配至少出现一次的任意数量的字符（`+`表示一个或多个）。它周围的括号将使其成为一个捕获组，这意味着您可以将其中匹配的任何内容用作`$1`. 其余的很明显：完全匹配`, //hotstop topValue`。

或者，您可以使用

```
Find: ([0-9]+), //(.+)
Replace: [$1,$1,$1], //$2 
```

匹配您的号码，后跟任何评论（尽管必须存在）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T01:25:25.830

您可以使用捕获组：

*   搜索`(\d+), //(.*?)`
*   代替`[$1, $1, $1], //$2`

# eclipse - Eclipse 4.2、Mac OS X 10.8 (ML) 和 Java 6

> ID：11919004
> 
> 赞同：2
> 
> 时间：2012-08-12T01:22:04.103
> 
> 标签：eclipse, macos, installation

我正在尝试在 Mac OS X 10.8（Mountain Lion）上运行 Eclipse 4.2（来自网站的最新版本：eclipse-SDK-4.2-macosx-cocoa-x86_64）。

我安装了 Java 7，但一直提示我安装 Java 6。当我通过单击“Not Now”选择放弃安装时，Eclipse 退出。

```
$ java -version
java version "1.7.0_05"
Java(TM) SE Runtime Environment (build 1.7.0_05-b06)
Java HotSpot(TM) 64-Bit Server VM (build 23.1-b03, mixed mode)

$ whereis java
/usr/bin/java 
```

关于如何让 Eclipse 与最新版本的 Java 一起工作的任何想法？README 缺少任何有用的信息（甚至声称 Eclipse 已在某些平台上使用 Java 7 进行了测试）。

* * *

更新：运行`sudo /Applications/.Eclipse/Eclipse.app/Contents/MacOS/eclipse`正常。在 sudo 下运行然后切换回低级我`/Applications/.Eclipse/Eclipse.app/Contents/MacOS/eclipse`导致锁定文件错误（权限被拒绝）。

看来我有两个问题：

*   通过图标单击运行会导致“需要 Java 6”

*   从命令行运行导致“权限被拒绝”

* * *

更新：库比蒂诺似乎更垃圾：

苹果雷达：12082976

以下是 Apple 想要向世界隐藏的文字：

我购买了新的 Mac Book Pro。我立即升级到山狮。我从 Sun [Oracle] 安装了 Java 7：

$ java -version java version "1.7.0_05" Java(TM) SE Runtime Environment (build 1.7.0_05-b06) Java HotSpot(TM) 64-Bit Server VM (build 23.1-b03, 混合模式)

$ whereis java /usr/bin/java

$ /usr/libexec/java_home /Library/Java/JavaVirtualMachines/1.7.0.jdk/Contents/Home

当我尝试运行 Java 首选项（在 /Applications/Utilities 中）和 Eclipse 时，系统提示我安装 Java（参见附件）。

这篇过时的文章没有帮助（添加 environment.plist）：[https](https://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPRuntimeConfig/Articles/EnvironmentVars.html) ://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPRuntimeConfig/Articles/EnvironmentVars.html 。我认为问题可能是 $JAVA_HOME 没有设置，但我错了。

我想我从 Stack Overflow 而不是供应商（Apple）那里获得了更多有用的信息，但它仍然没有解决。[https://apple.stackexchange.com/questions/58203/mountain-lion-with-java-7-only](https://apple.stackexchange.com/questions/58203/mountain-lion-with-java-7-only)和[https://apple.stackexchange.com/questions/57986/multiple-java-versions-support-on- os-x-and-java-home-location](https://apple.stackexchange.com/questions/57986/multiple-java-versions-support-on-os-x-and-java-home-location)。

请解决这个问题。我花了几千买苹果硬件，几百买苹果软件，这种事情是不能接受的。我个人在这个问题上浪费了很多时间，其他人也是如此。Apple QA 部门怎么能错过另一个漏洞呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-12T07:42:08.877

从**[这里](https://apple.stackexchange.com/questions/58203/mountain-lion-with-java-7-only)**。

```
JDK 7 will be installed under /Library/Java/JavaVirtualMachines/1.7.0.jdk, JDK 6 under /System/Library/Java/JavaVirtualMachines.

To trick OS X to accept Java 7 instead of proposing to install Java 6 a simple symlink is enough:

    sudo mkdir /System/Library/Java/JavaVirtualMachines
    sudo su ln -s /Library/Java/JavaVirtualMachines/1.7.0.jdk /System/Library/Java/JavaVirtualMachines/1.6.0.jdk

Most Java Programms will run with this little hack without the need to install Java 6\. 
```

请注意，上述问题中的 OP 专门讨论了 Eclipse 不适用于 Java 7。

**[这](https://apple.stackexchange.com/questions/57986/multiple-java-versions-support-on-os-x-and-java-home-location)**也可能值得一读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T06:51:05.033

我很尴尬，但我的一位学生帮助我解决了这个问题。

如果您安装了 Java 7，那么您应该使用 64 位版本的 Eclipse。我已经下载了 32 位版本，当我安装了版本 7 时，它要求我安装 Java 6。下载了 64 位版本，它像梦一样工作。我运行 Mac os 10.8

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-13T20:43:26.830

从苹果安装此更新为我修复了它：http: [//support.apple.com/kb/DL1572](http://support.apple.com/kb/DL1572)

请注意，这是尝试自动安装的更新。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-24T06:40:01.170

你能想象吗？即使您已经安装了 jdk 1.7，您也必须安装 JDK 1.6 才能正常运行 Eclipse，并正确设置 JAVA_HOME。

要解决您的问题，您只需要从[http://support.apple.com/kb/DL1572?viewlocale=en_US](http://support.apple.com/kb/DL1572?viewlocale=en_US)下载 jdk1.6并安装它，稍后您就可以运行 eclipse，您可以设置JAVA_HOME 到JDK1.7，你就可以从eclipse“Preferences”中找到JDK1.7。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-12T18:43:31.323

MAC OS在*Applications下提供**Java Preferences*工具。

 *如果您没有此工具，您可以编辑 eclipse.ini 并[手动指定要使用的 JVM](http://wiki.eclipse.org/Eclipse.ini#-vm_value%3a_Mac_OS_X_Example)。

当然请记住，Java 7 是唯一适用于 MAC 的 Java 官方版本，可能不是开发应用程序的最佳版本。我会选择 1.6 版本，但如果你想坚持标准，由于操作系统限制，你不得不使用这个版本。*

# java - Java LED 编程

> ID：11919008
> 
> 赞同：0
> 
> 时间：2012-08-12T01:23:18.677
> 
> 标签：java, led

只是想知道是否有任何 Java API 可以让您控制台式机/笔记本电脑外壳上的 LED？

或者，如果没有，有可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T01:33:50.690

如果你说的是前面的 LED 指示电源状态和硬盘忙碌状态，恐怕没有办法玩它们。AFAIK 它们由主板中的控制器直接控制，不会暴露于 BIOS 之上的任何软件。

如果您想将自定义的 LED 组插入您的机器并使用 Java 控制它们，那么您可以将它们连接到串行或并行端口并使用 Java`native`方法（本质上与 C 或 C++ 代码对话）来控制它们。AFAIK，这是因为 JVM 没有直接的 API 来与底层硬件通信。这可能会变得相当棘手，因为 Windows Vista 和更高版本**需要**内核模式驱动程序来与端口通信，并且对于所有用户模式软件都被阻止。所以你的 C++ 代码应该与内核模式驱动程序对话。

另一种方法是断开 LED 与 PC 的连接，并通过自定义协议通过 WiFi 或蓝牙进行通信。正如@Makoto 所提到的，您可以使用 arduino 或类似的板并通过无线或有线技术进行通信。

# java - 使用 javax.sound.sampled.Clip 在游戏中播放、循环和停止多个声音。意外错误

> ID：11919009
> 
> 赞同：7
> 
> 时间：2012-08-12T01:23:19.890
> 
> 标签：java, exception, audio, game-development

我试图在游戏中一次播放两个 wav 声音（背景音乐和效果）。我首先使用 java 中的另一个音频处理程序构建了这段代码，该处理程序将处理声音的播放、停止和循环。这个结构会播放背景音乐或效果，但一次只能播放一个。我环顾互联网，并被告知使用 javax.sound.sampled.Clip 来处理声音，因此重用了相同的构造（播放、停止、循环），但将其切换为使用 javax.sound.sampled.Clip。现在我完全迷路了。从我到目前为止所读到的内容来看，我已经完成了所有正确的操作，并且在 Eclipse 编辑器中没有出现任何错误，但是当我运行它时，我得到了两个错误之一。在 Eclipse（在 Linux 上运行）中，抛出了 LineUnavailableException。在 Eclipse（在 Windows 7 上运行）中，我在此代码的 loop() 部分中得到了 java.lang.NullPointerException。如果您能告诉我我做错了什么或指向我一些相关文档，我将不胜感激。我假设它与我的处理异常的代码有关，但我不确定。如果您发现任何其他可怕的代码错误，请告诉我，我正在努力成为我能做到的最好的程序员，并且非常感谢建设性的批评。感谢您的时间。

```
 import java.io.File;
    import java.io.IOException;
    import java.net.MalformedURLException;
    import javax.sound.sampled.AudioInputStream;
    import javax.sound.sampled.AudioSystem;
    import javax.sound.sampled.Clip;
    import javax.sound.sampled.LineUnavailableException;
    import javax.sound.sampled.UnsupportedAudioFileException;

    /**
     * Handles play, pause, and looping of sounds for the game.
     * @author Tyler Thomas
     *
     */
    public class Sound {
        private Clip myClip;
        public Sound(String fileName) {
                try {
                    File file = new File(fileName);
                    if (file.exists()) {
                        Clip myClip = AudioSystem.getClip();
                        AudioInputStream ais = AudioSystem.getAudioInputStream(file.toURI().toURL());
                        myClip.open(ais);
                    }
                    else {
                        throw new RuntimeException("Sound: file not found: " + fileName);
                    }
                }
                catch (MalformedURLException e) {
                    throw new RuntimeException("Sound: Malformed URL: " + e);
                }
                catch (UnsupportedAudioFileException e) {
                    throw new RuntimeException("Sound: Unsupported Audio File: " + e);
                }
                catch (IOException e) {
                    throw new RuntimeException("Sound: Input/Output Error: " + e);
                }
                catch (LineUnavailableException e) {
                    throw new RuntimeException("Sound: Line Unavailable: " + e);
                }
        }
        public void play(){
            myClip.setFramePosition(0);  // Must always rewind!
            myClip.loop(0);
            myClip.start();
        }
        public void loop(){
            myClip.loop(Clip.LOOP_CONTINUOUSLY);
        }
        public void stop(){
            myClip.stop();
        }
    } 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-16T03:28:15.847

我能够让代码正常工作，现在对 Clips 有了更好的理解。对我帮助最大的页面是[http://www3.ntu.edu.sg/home/ehchua/programming/java/J8c_PlayingSound.html](http://www3.ntu.edu.sg/home/ehchua/programming/java/J8c_PlayingSound.html)它分解了所有内容并帮助我了解了我犯错的地方。这是我的最终工作代码。和以前一样，如果您在逻辑或风格上看到任何可怕的错误或过失，请告诉我。

```
import java.io.File;
import java.io.IOException;
import java.net.MalformedURLException;
import javax.sound.sampled.AudioInputStream;
import javax.sound.sampled.AudioSystem;
import javax.sound.sampled.Clip;
import javax.sound.sampled.LineUnavailableException;
import javax.sound.sampled.UnsupportedAudioFileException;

/**
 * Handles playing, stoping, and looping of sounds for the game.
 * @author Tyler Thomas
 *
 */
public class Sound {
    private Clip clip;
    public Sound(String fileName) {
        // specify the sound to play
        // (assuming the sound can be played by the audio system)
        // from a wave File
        try {
            File file = new File(fileName);
            if (file.exists()) {
                AudioInputStream sound = AudioSystem.getAudioInputStream(file);
             // load the sound into memory (a Clip)
                clip = AudioSystem.getClip();
                clip.open(sound);
            }
            else {
                throw new RuntimeException("Sound: file not found: " + fileName);
            }
        }
        catch (MalformedURLException e) {
            e.printStackTrace();
            throw new RuntimeException("Sound: Malformed URL: " + e);
        }
        catch (UnsupportedAudioFileException e) {
            e.printStackTrace();
            throw new RuntimeException("Sound: Unsupported Audio File: " + e);
        }
        catch (IOException e) {
            e.printStackTrace();
            throw new RuntimeException("Sound: Input/Output Error: " + e);
        }
        catch (LineUnavailableException e) {
            e.printStackTrace();
            throw new RuntimeException("Sound: Line Unavailable Exception Error: " + e);
        }

    // play, stop, loop the sound clip
    }
    public void play(){
        clip.setFramePosition(0);  // Must always rewind!
        clip.start();
    }
    public void loop(){
        clip.loop(Clip.LOOP_CONTINUOUSLY);
    }
    public void stop(){
            clip.stop();
        }
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-12-09T17:33:12.610

我找到了一种有用的技术来停止声音。您可以将这两个类复制下来并自己进行测试。尽管如此，clip.stop() 方法更像是一种暂停方法。它会停止播放声音，是的，但它不会清除线路中的声音。结果，声音仍在排队播放，无法播放新声音。因此，使用 clip.close() 方法将清除此排队数据并允许播放新声音或执行其他操作。另请注意，在以下代码中，声音文件被放置在名为“predator.wav”的项目文件夹中，此声音可以是您想要使用的任何类型的声音，而不是我选择的声音，但请确保它是 .wav 格式并且声音必须位于项目文件夹的最顶层。

```
/*
 * File: KeyMap.java
 * Author: Andrew Peturis Chaselyn Langley; UAB EE Students
 * Assignment:  SoundBox - EE333 Fall 2015
 * Vers: 1.0.0 10/20/2015 agp - initial coding
 *
 * Credits: Dr. Green, UAB EE Engineering Professor
 */

import java.io.File;
import java.io.IOException;
import javax.sound.sampled.AudioSystem;
import javax.sound.sampled.Clip;
import javax.sound.sampled.LineUnavailableException;
import javax.sound.sampled.UnsupportedAudioFileException;

public class KeyMap {

    private char keyCode;
    private String song;
    private Clip clip;

    // Don't allow default constructor
    private KeyMap() {
    }

    public KeyMap(char keyCode, String song) throws LineUnavailableException {
        this.keyCode = keyCode;
        this.song = song;

        // Create an audiostream from the inputstream
        clip = AudioSystem.getClip();
    }

    public boolean match(char key) {
        return key == keyCode;
    }

    // Play a sound using javax.sound and Clip interface
    public String play() {
        try {
            // Open a sound file stored in the project folder
            clip.open(AudioSystem.getAudioInputStream(new File(song + ".wav")));

            // Play the audio clip with the audioplayer class
            clip.start();

            // Create a sleep time of 2 seconds to prevent any action from occuring for the first
            // 2 seconds of the sound playing
            Thread.sleep(2000);

        } catch (LineUnavailableException | UnsupportedAudioFileException | IOException | InterruptedException e) {
            System.out.println("Things did not go well");
            System.exit(-1);
        }
        return song;
    }

    // Stop a sound from playing and clear out the line to play another sound if need be.
    public void stop() {
        // clip.stop() will only pause the sound and still leave the sound in the line
        // waiting to be continued. It does not actually clear the line so a new action could be performed.
        clip.stop();

        // clip.close(); will clear out the line and allow a new sound to play. clip.flush() was not 
        // used because it can only flush out a line of data already performed.
        clip.close();
    }
} 
```

* * *

```
/*
 * File: SoundBox.java
 * Author: Andrew Peturis, Chaselyn Langley; UAB EE Students
 * Assignment:  GUI SoundBox - EE333 Fall 2015
 * Vers: 1.0.0 09/08/2015 agp - initial coding
 */

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.Scanner;
import javax.sound.sampled.LineUnavailableException;

/**
 *
 * @author Andrew Peturis, Chaselyn Langley
 *
 */
public class SoundBox {

    static Scanner scanner = new Scanner(System.in);   //Scanner object to read user input
    InputStream input;

    /**
     * @param args the command line arguments
     * @throws java.io.IOException
     */
    public static void main(String[] args) throws IOException, LineUnavailableException {

        String line;
        Character firstChar;
        String predator = "predator";
        String explosion = "explosion";

        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));

        KeyMap[] keyedSongs = {
            new KeyMap('a', predator),};

        while (true) {
            line = br.readLine();
            firstChar = line.charAt(0);

            for (int i = 0; i < keyedSongs.length; i++) {
                if (keyedSongs[i].match(firstChar)) {

                    // Notice now by running the code, after the first second of sleep time the sound can
                    // and another sound can be played in its place
                    keyedSongs[i].stop();
                    System.out.println("Played the sound: " + keyedSongs[i].play());
                    break;
                }
            }

            if (firstChar == 'q') {
                break;
            }
        }
    }
} 
```

# java - 追加到 JTextArea？

> ID：11919010
> 
> 赞同：1
> 
> 时间：2012-08-12T01:23:33.240
> 
> 标签：java, swing, jtextarea, runtime.exec

> **可能重复：**
> [调用 Runtime.exec 时捕获标准输出](https://stackoverflow.com/questions/882772/capturing-stdout-when-calling-runtime-exec)

这是问题，有以下代码，

```
public void CMD() {
    try
    {            
        Runtime rt = Runtime.getRuntime();

        Process proc = rt.exec("dir");
        InputStream stdin = proc.getInputStream();
        InputStreamReader isr = new InputStreamReader(stdin);
        BufferedReader br = new BufferedReader(isr);
        String line = null;
        System.out.println("<OUTPUT>");
        while ( (line = br.readLine()) != null)
            System.out.println(line);
        System.out.println("</OUTPUT>");
        int exitVal = proc.waitFor();            
        System.out.println("Process exitValue: " + exitVal);
    } catch (Throwable t)
    {
        t.printStackTrace();
    }
} 
```

如何使其将输出传输到 jTextArea？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T01:38:56.957

这很简单：

```
 while ( (line = br.readLine()) != null) {
        textArea.append(line + "\n");
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T01:39:12.137

我认为最好将 UI 与处理分开——这个概念称为分层。我反对在这种方法中看到标记。最好将其与从运行时过程中实际获取信息分开。

我建议阅读执行流程的新方法。

1.  [http://www.javaworld.com/jw-12-2000/jw-1229-traps.html](http://www.javaworld.com/jw-12-2000/jw-1229-traps.html)
2.  [http://www.java-tips.org/java-se-tips/java.util/from-runtime.exec-to-processbuilder.html](http://www.java-tips.org/java-se-tips/java.util/from-runtime.exec-to-processbuilder.html)

# javascript - 如何使用当前 div 宽度/高度作为最小宽度/高度？

> ID：11919011
> 
> 赞同：0
> 
> 时间：2012-08-12T01:24:09.683
> 
> 标签：javascript, css, html

如何使用当前宽度/高度（均以 100% 百分比指定）作为最小宽度/高度？

这是一个尝试：

```
<!doctype html>
<html>
    <head>
        <title>Layout</title>
        <script>
            var myDiv = document.body;
            var curWidth = myDiv.style.width;
            var curHeight = myDiv.style.height;
            myDiv.style.minWidth = curWidth;
            myDiv.style.minHeight = curHeight;

            myDiv = document.getElementById('wrapper1');
            var curWidth = myDiv.style.width;
            var curHeight = myDiv.style.height;
            myDiv.style.minWidth = curWidth;
            myDiv.style.minHeight = curHeight;
        </script>
        <style type="text/css">
            * {
                margin: 0;
                padding: 0;
            }
            html {
                height: 100%;
            }
            body {
                height: 100%;
            }
            #wrapper1 {
                width: 100%;
                height: 100%;
            }
            #wrapper2 {
                width: 8%;
                height: 100%;
                float: left;
            }
            #wrapper3 {
                width: 92%;
                height: 100%;
                float: left;
            }
        </style>
    </head>
    <body>
        <div id="wrapper1">
            <div id="wrapper2">
                Wrapper
            </div>
            <div id="wrapper3">
                Wrapper
            </div>
        </div>
    </body>
</html> 
```

尝试使用 Javascript（或如果可能仅使用 css）将所有 div 的最小宽度/高度设置为当前宽度/高度（它们都是 100% 的 css）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T01:45:35.337

请注意，`myDiv.style.height`如果通过 CSS 设置，则不会返回元素的高度，但前提是 div 看起来像`<div style="height: 10px"></div>`. 你应该使用：

```
var curHeight = myDiv.offsetHeight;
var curWidth = myDiv.offsetWidth; 
```

编辑：哦，您需要在 html 的末尾移动您的脚本标签，否则您将无法选择 wrapper1（或在不同的文件中？）。

这是关于 offsetHeight 和 offsetWidth 的参考资料。[这里](http://help.dottoro.com/ljuxqbfx.php)

假设您执行 document.write 以插入检索到的 css 值，这是我在您的方法中看到的唯一问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T01:48:45.730

据我了解，如果默认情况下不指定 div 的宽度和高度，它将始终从其封闭的 div 中获取。例子：

```
<body>
        <div id="wrapper1">
            <div id="wrapper2">
                Wrapper
            </div>
            <div id="wrapper3">
                Wrapper
            </div>
        </div>
</body>

<style>
         #wrapper1 {
                width: 100%;
                height: 100%;
            }
</style> 
```

这会将宽度和高度都作为 100% 应用于 wrapper1、wrapper2、wrapper3 中的所有 3 个 div

# c++ - 无法访问的基类

> ID：11919014
> 
> 赞同：10
> 
> 时间：2012-08-12T01:24:40.183
> 
> 标签：c++, class, inheritance, polymorphism

我正在用 SDL 编写一个简单的游戏。我为我在游戏中使用的任何精灵构建了一个类层次结构。基类是 Sprite，它包含碰撞盒和 spritesheet 的数据抽象。紧接着是两个抽象类，Character 和 MapObject。

我目前正在实现派生自 Character 的 Player 类（Enemy 和 NPC 也将派生自抽象 Character 类）。

无论如何，希望这是有道理的。我的问题是这样的：

当我尝试在引擎中使用播放器类时，我无法访问任何 Sprite 函数。

我收到以下错误：

```
'Sprite' is not an accessible base of 'Player' 
```

以下是头文件：

雪碧.h：

```
class Sprite{
public:
    virtual ~Sprite() = 0;  //I want this to be an abstract class and yes this is defined in the cpp

    //Initialization functions - MUST be called before anything else in the class can be used.
    void setupCollider(int xo, int yo, int ho, int wo);
    void setupSheet(SDL_Surface* dest, std::string file, int numClips, int ac, int _res, int sr);

    //SpriteSheet functions
    void setActiveClip(int a);
    int getActiveClip() const;
    void draw() const;
    int getResolution() const;
    SDL_Surface* getDest();

    //Collider functions
    void updateCollider();
    SDL_Rect box() const;
    bool collision(SDL_Rect other) const;

    //Access and Modify coordinates of the sprite
    void setLoc(int x, int y) { _x = x; _y = y; }
    int getX() const { return _x; }
    int getY() const { return _y; }

private:
    struct Collider{
        SDL_Rect  _box;
        int       x_offset,
                  y_offset;
    };

    struct SpriteSheet{
        SDL_Surface*     destination;
        SDL_Surface*    sheet;
        SDL_Rect*       clips;
        int             _numClips;
        int             active;
        int             res;
        int             sheetrows;
    };

    Collider     collisionAttributes;
    SpriteSheet  spriteSheetAttributes;
    int          _x, _y;

}; 
```

字符.h：

```
class Character : public Sprite{
public:
    virtual void move(Direction direction_input, const TileMap& currentlevel) = 0;
    virtual void animate() = 0;

    virtual void setAttributes( int h, int sp, int ad, int d, int m, int md, int l, std::string n){
        hearts = h; speed = sp; attackdamage = ad;
        defense = d; magicdamage = m; magicdefense = md;
        level = l; name = n;
    }

    bool isDead() const{
        return hearts == 0;
    }

    void heal(int heartsup){
        hearts += heartsup;
    }

    void dealDamage(int heartsDown){
        hearts -= heartsDown;
    }

protected:

    int hearts;
    int speed;
    int attackdamage;
    int defense;
    int magicdamage;
    int magicdefense;
    int level;
    std::string name;

}; 
```

播放器.h：

```
//Not fully finished yet, but should work for the purposes of this question
class Player : protected Character{
public:
    ~Player(){
        if(heart) SDL_FreeSurface(heart);
    }
    static const int HEART_WIDTH;

    void move(Direction direction_input, const TileMap& currentlevel);
    void animate();

    void updateCamera(TileMap& currLevel);

 private:

    SDL_Surface* heart;

    enum ClipFace
    {
        UP1,
        UP2,
        DOWN1,
        DOWN2,
        LEFT1,
        LEFT2,
        RIGHT1,
        RIGHT2
    };

    static const std::string HEART;
    static const int HEART_RES;

}; 
```

当我尝试从播放器中的 Sprite 调用设置函数时，我的引擎中出现第一个错误，第一个错误是：

```
player.setLoc(levels[0].startX(), levels[0].startY()); 
```

任何和所有的帮助表示赞赏。

[已解决] 编辑：评论的另一种解决方案：角色类没有从 Sprite 类继承任何东西，所以它在技术上不必从它派生。我没有让 Character 从 Sprite 继承，而是让 Player 从 Sprite 和 Character 继承，这也有效。我不确定什么是更好的设计。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-12T01:28:24.470

我认为你需要改变

```
class Player : protected Character{ 
```

到

```
class Player : public Character{ 
```

这样，您可以从程序中任何位置创建的实例访问对象上的`Character`和`Sprite`函数。`Player``Player`

如果 a`Player`应该能够做任何 a`Character`可以做的事情，那么`public`继承是有意义的。没有理由隐藏可以在或对象`Player`中自由访问的东西。`Character``Sprite`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T01:28:46.857

始终使用`public`继承来表示“is-a”关系。听起来像是`Player`a `Character`，所以说继承应该是`public`，不是`protected`。

`protected`继承和`private`继承更像是“has-a”（在大多数情况下，成员子对象是处理这种关系的更简单方法）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T01:27:51.430

我敢打赌，既然`Character`是受保护的基类，它会限制对`Sprite`.

# android - 缺少 android_winusb.inf 文件；尝试为 Kindle Fire 开发者设置环境

> ID：11919015
> 
> 赞同：3
> 
> 时间：2012-08-12T01:25:14.017
> 
> 标签：android, sdk, kindle-fire

我正在按照[http://mobile.tutsplus.com/tutorials/android/getting-started-with-kindle-fire-development/](http://mobile.tutsplus.com/tutorials/android/getting-started-with-kindle-fire-development/)上的说明进行操作，描述如何设置开发人员。Kindle Fire 的环境。但是，我被困在“[Windows] 第 2 步：使用 Google USB 驱动程序”这一步。Android SDK 应用程序。表示已安装 Google USB 驱动程序，但我没有 android_winusb.inf 文件。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T01:39:55.300

对我来说， android_winusb.inf 文件不在 %USERPROFILE%.android 目录中。它位于 Android SDK 目录的子文件夹中，具体来说：

```
C:\android\extras\google\usb_driver\android_winusb.inf 
```

和

```
C:\android\usb_driver\android_winusb.inf 
```

我的 Android SDK 安装在 C:\android 中。

我不知道为什么有两个，但看起来 extras 文件夹中的一个更新，查看文件中的 DriverVer。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-06-05T00:04:25.123

我知道这是一个旧线程，但是我最近不得不找到它并在以下位置找到了我的 android_winusb.inf 文件：`%USERPROFILE%\AppData\Local\Android\Sdk\extras\google\usb_driver`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T06:29:29.577

确保您可以看到隐藏的文件/文件夹： http: [//www.howtogeek.com/howto/windows-vista/show-hidden-files-and-folders-in-windows-vista/](http://www.howtogeek.com/howto/windows-vista/show-hidden-files-and-folders-in-windows-vista/)

您要查找的 ini 文件位于主目录的 .android 文件夹中。要查找您的主目录，请在命令行中使用：

```
echo %USERPROFILE% 
```

导航到它显示的位置并修改文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-25T16:24:55.927

转到 SDK manager 选择 SDK Platform Tools 向下滚动，选择 Google USB driver Install Hey Presto！

# python - 如何在不使用 IDE 且不了解程序流程的情况下调试应用程序？

> ID：11919018
> 
> 赞同：3
> 
> 时间：2012-08-12T01:25:35.770
> 
> 标签：python, debugging, google-app-engine, syntax-error, datastore

我正在尝试修改优秀书籍[Programming Collective Intelligence](https://rads.stackoverflow.com/amzn/click/com/0596529325)提供的朴素贝叶斯分类器的代码，使其适应 GAE 数据存储（提供的代码使用 pysqlite2）。但是尝试这样做时，我遇到了一个难以调试的错误。错误是这样的：

```
 File "C:\Users\CG\Desktop\Google Drive\Sci&Tech\projects\naivebayes\main.py", line 216, in post
    sampletrain(nb)
  File "C:\Users\CG\Desktop\Google Drive\Sci&Tech\projects\naivebayes\main.py", line 201, in sampletrain
    cl.train('Nobody owns the water.','good')
  File "C:\Users\CG\Desktop\Google Drive\Sci&Tech\projects\naivebayes\main.py", line 139, in train
    self.incf(f,cat)
  File "C:\Users\CG\Desktop\Google Drive\Sci&Tech\projects\naivebayes\main.py", line 71, in incf
    count=self.fcount(f,cat)
  File "C:\Users\CG\Desktop\Google Drive\Sci&Tech\projects\naivebayes\main.py", line 92, in fcount
    return float(res)
TypeError: float() argument must be a string or a number 
```

错误在此块中：

```
 def fcount(self,f,cat):
    res = db.GqlQuery("SELECT * FROM fc WHERE feature =:feature AND category =:category", feature = f, category = cat).get()
#    res=self.con.execute(
#      'select count from fc where feature="%s" and category="%s"'
#      %(f,cat)).fetchone()
    if res is None: return 0
    else:
        res = fc.count
        return float(res)
#        return float(res[0]) 
```

如果我放在`set_trace()`第 91 行，像这样：

```
def fcount(self,f,cat):
    res = db.GqlQuery("SELECT * FROM fc WHERE feature =:feature AND category =:category", feature = f, category = cat).get()
    set_trace()
#    res=self.con.execute(
#      'select count from fc where feature="%s" and category="%s"'
#      %(f,cat)).fetchone()
    if res is None: return 0
    else:
        res = fc.count
        set_trace()
        return float(res) 
```

我得到了这个错误轨迹：

```
File "C:\Users\CG\Desktop\Google Drive\Sci&Tech\projects\naivebayes\main.py", line 224, in post
    sampletrain(nb)
  File "C:\Users\CG\Desktop\Google Drive\Sci&Tech\projects\naivebayes\main.py", line 209, in sampletrain
    cl.train('Nobody owns the water.','good')
  File "C:\Users\CG\Desktop\Google Drive\Sci&Tech\projects\naivebayes\main.py", line 147, in train
    self.incf(f,cat)
  File "C:\Users\CG\Desktop\Google Drive\Sci&Tech\projects\naivebayes\main.py", line 77, in incf
    count=self.fcount(f,cat)
  File "C:\Users\CG\Desktop\Google Drive\Sci&Tech\projects\naivebayes\main.py", line 95, in fcount
    if res is None: return 0
  File "C:\Users\CG\Desktop\Google Drive\Sci&Tech\projects\naivebayes\main.py", line 95, in fcount
    if res is None: return 0
  File "C:\Python27\lib\bdb.py", line 48, in trace_dispatch
    return self.dispatch_line(frame)
  File "C:\Python27\lib\bdb.py", line 67, in dispatch_line
    if self.quitting: raise BdbQuit
BdbQuit 
```

它与 GqlQuery 有关。我想在 Python IDE 中测试代码，一步一步打印变量和查询，试图找出问题出在哪里。但是当我尝试在 python IDE 中执行此操作时，我会收到错误消息（如`"ImportError: No module named webapp2"`）。而且我对成功更改它的程序流程不是很熟悉。实际上，我尝试这样做但迷路了：我是一名新手程序员，直到最近我才开始学习 OOP）。在这种情况下找到错误的最佳方法是什么？

预期的答案应该包括这个错误识别。

提前感谢您的帮助！

这里是整个代码：

```
#!/usr/bin/env python
#
# Copyright 2007 Google Inc.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#

# -*- coding: utf-8 -*-
# -*- coding: utf-8 -*-

import os

import webapp2

import jinja2

from jinja2 import Environment, FileSystemLoader

jinja_environment = jinja2.Environment(autoescape=True,
    loader=jinja2.FileSystemLoader(os.path.join(os.path.dirname(__file__), 'templates')))

import random

from google.appengine.ext import db

import re

import math

def set_trace():
import pdb, sys
debugger = pdb.Pdb(stdin=sys.__stdin__,
    stdout=sys.__stdout__)
debugger.set_trace(sys._getframe().f_back)

class fc(db.Model):
    feature = db.StringProperty(required = True)
    category = db.StringProperty(required = True)
    count = db.IntegerProperty(required = True)

class cc(db.Model):
    category = db.StringProperty(required = True)
    count = db.IntegerProperty(required = True)

def getfeatures(doc):
  splitter=re.compile('\\W*')
  # Split the words by non-alpha characters
  words=[s.lower() for s in splitter.split(doc)
          if len(s)>2 and len(s)<20]
  return dict([(w,1) for w in words])

class classifier:
  def __init__(self,getfeatures, filename=None):
    # Counts of feature/category combinations
    self.fc={}
    # Counts of documents in each category
    self.cc={}
    self.getfeatures=getfeatures

#  def setdb(self,dbfile):
#    self.con=sqlite.connect('db_file')
#    self.con=sqlite3.connect(":memory:")
#    self.con.execute('create table if not exists fc(feature,category,count)')
#    self.con.execute('create table if not exists cc(category,count)')

  def incf(self,f,cat):
    count=self.fcount(f,cat)
    if count==0:
      fc_value = fc(feature = f, category = cat, count = 1)
      fc_value.put()
    else:
        update = db.GqlQuery("SELECT count FROM fc where feature =:feature AND category =:category", feature = f, category = cat).get()
        update.count = count + 1
        update.put()
#      self.con.execute(
 #       "update fc set count=%d where feature='%s' and category='%s'"
  #      % (count+1,f,cat))

  def fcount(self,f,cat):
    res = db.GqlQuery("SELECT * FROM fc WHERE feature =:feature AND category =:category", feature = f, category = cat).get()
#    res=self.con.execute(
#      'select count from fc where feature="%s" and category="%s"'
#      %(f,cat)).fetchone()
    if res is None: return 0
    else:
        res = fc.count
        return float(res)
#        return float(res[0])

  def incc(self,cat):
    count=self.catcount(cat)
    if count==0:
      #  self.con.execute("insert into cc values ('%s',1)" % (cat))
      cc_value = cc(category = cat, count = 1)
      cc_value.put()
    else:
        update = db.GqlQuery("SELECT count FROM cc where category =:category", category = cat).get()
        update.count = count + 1
        update.put()
#      self.con.execute("update cc set count=%d where category='%s'"
#                       % (count+1,cat))

  def catcount(self,cat):
#    res=self.con.execute('select count from cc where category="%s"'
 #                        %(cat)).fetchone()
    res = db.GqlQuery("SELECT count FROM cc WHERE category =:category", category = cat).get()
    if res is None: return 0
#    else: return float(res[0])
    else: return float(res)

  def categories(self):
#    cur = self.con.execute('select category from cc');
    cur = db.GqlQuery("SELECT category FROM cc").fetch(999)
    return [d[0] for d in cur]

  def totalcount(self):
   # res=self.con.execute('select sum(count) from cc').fetchone();
    all_cc = db.GqlQuery("SELECT * FROM cc").fetch(999)
    res = 0
    for cc in all_cc:
        count = cc.count
        res+=count
#    res = db.GqlQuery("SELECT sum(count) FROM cc").get()
#    if res==None: return 0
    if res == 0: return 0
#    return res[0]
    return res

  def train(self,item,cat):
    features=self.getfeatures(item)
    # Increment the count for every feature with this category
    for f in features.keys():
##    for f in features:
      self.incf(f,cat)
    # Increment the count for this category
    self.incc(cat)
#    self.con.commit()

  def fprob(self,f,cat):
    if self.catcount(cat)==0: return 0
    # The total number of times this feature appeared in this
    # category divided by the total number of items in this category
    return self.fcount(f,cat)/self.catcount(cat)

  def weightedprob(self,f,cat,prf,weight=1.0,ap=0.5):
    # Calculate current probability
    basicprob=prf(f,cat)
    # Count the number of times this feature has appeared in
    # all categories
    totals=sum([self.fcount(f,c) for c in self.categories()])

    # Calculate the weighted average
    bp=((weight*ap)+(totals*basicprob))/(weight+totals)
    return bp

class naivebayes(classifier):
  def __init__(self,getfeatures):
    classifier.__init__(self, getfeatures)
    self.thresholds={}

  def docprob(self,item,cat):
    features=self.getfeatures(item)
    # Multiply the probabilities of all the features together
    p=1
    for f in features: p*=self.weightedprob(f,cat,self.fprob)
    return p

  def prob(self,item,cat):
    catprob=self.catcount(cat)/self.totalcount()
    docprob=self.docprob(item,cat)
    return docprob*catprob

  def setthreshold(self,cat,t):
    self.thresholds[cat]=t

  def getthreshold(self,cat):
    if cat not in self.thresholds: return 1.0
    return self.thresholds[cat]

  def classify(self,item,default=None):
    probs={}
    # Find the category with the highest probability
    max=0.0
    for cat in self.categories():
      probs[cat]=self.prob(item,cat)
      if probs[cat]>max:
        max=probs[cat]
        best=cat
    # Make sure the probability exceeds threshold*next best
    for cat in probs:
      if cat==best: continue
      if probs[cat]*self.getthreshold(best)>probs[best]: return default
    return best

def sampletrain(cl):
  cl.train('Nobody owns the water.','good')
  cl.train('the quick rabbit jumps fences','good')
  cl.train('buy pharmaceuticals now','bad')
  cl.train('make quick money at the online casino','bad')
  cl.train('the quick brown fox jumps','good')    

class MainHandler(webapp2.RequestHandler):
    def get(self):
        template_values = {"given_sentence":'put a name here'}
        template = jinja_environment.get_template('index.html')
        self.response.out.write(template.render(template_values))

    def post(self):
        nb = naivebayes(getfeatures)
        sampletrain(nb)
        given_sentence = self.request.get("given_sentence")
        spam_result = nb.classify(given_sentence)
        submit_button = self.request.get("submit_button")
        if submit_button:
            self.redirect('/test_result?spam_result=%s&given_sentence=%s' % (spam_result, given_sentence))

class test_resultHandler(webapp2.RequestHandler):
    def get(self):
        spam_result = self.request.get("spam_result")
        given_sentence = self.request.get("given_sentence")
        test_result_values = {"spam_result": spam_result,
                             "given_sentence": given_sentence}
        template = jinja_environment.get_template('test_result.html')
        self.response.out.write(template.render(test_result_values))

app = webapp2.WSGIApplication([('/', MainHandler), ('/test_result', test_resultHandler)],
                              debug=True) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-12T01:41:40.173

您有一个类型错误，应该很容易找到，但您似乎在在部署服务器或 IDE 中运行它之间做出了错误的选择。

有一个您在本地运行的[GAE 开发服务器](https://developers.google.com/appengine/docs/python/tools/devserver)，它模拟部署环境。

扔掉你的 IDE，在开发服务器上运行，`print`自由使用以确保这些值是你期望它们从错误源散发出来的值。

IDE 不能替代理解代码在做什么，并且依赖它会在您和您的代码之间设置一层分离，这只会使调试更加困难。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T01:40:59.233

根据 IDE，您会发现很难使用 IDE 中的集成调试器。通常，他们没有设置环境来支持 appengine 运行时（因此您遇到导入错误，您也会遇到其他错误。）

如果您在感兴趣的文件顶部包含此代码

```
def set_trace():
    import pdb, sys
    debugger = pdb.Pdb(stdin=sys.__stdin__,
        stdout=sys.__stdout__)
    debugger.set_trace(sys._getframe().f_back) 
```

然后`set_trace()`在您的代码中放置任何位置并在 dev_server 下运行您的代码将在此时被中断，然后您可以使用 pdb 调试器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T22:59:58.963

从您包含的代码中，我认为错误在于这一行：

```
 res = fc.count 
```

你应该尝试使用

```
res = fc.count() 
```

因为 count 是[GqlQuery](https://developers.google.com/appengine/docs/python/datastore/gqlqueryclass)的方法而不是属性。

# java - 为什么 Double.parseDouble(scan.next()) 比 scan.nextDouble() 快这么多？

> ID：11919024
> 
> 赞同：2
> 
> 时间：2012-08-12T01:27:14.603
> 
> 标签：java, file-io, double, java.util.scanner

所以我有一个文件要读入，我知道数据将如何设置。例如，我知道每个新行的第一个标记将是双精度。

我一直在使用 Scanner 并且只是使用 scan.nextDouble() 来读取双精度，但是我被告知 Double.parseDouble(scan.next()) 反而加快了从文件中读取数据的过程30 秒到约 5 秒。

scan.nextInt() 与 Integer.parseInt(scan.next()) 也是如此。

在我正在阅读的文件中，每行大约有 40,000 行 int double int int 。

那么是什么让它变得如此之快呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-12T01:35:14.490

这都是因为 scan.nextDouble() 从下面的 Stream 中找到最近的 Doublelike 值。它不能确定下一个字符串值将是一个 doublelike 值，例如

s = "abcde1234.5" scan.nextDouble(s) 将是 1234.5 但 Double.parseDouble(scan.next()) 会抛出错误。

您将在源代码中找到更多详细信息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-12T01:43:50.960

除了简单地读入下一个标记并调用适当的解析器之外，Scanner`next<Type>`方法还在做额外的工作。首先，他们检查一个正则表达式，该令牌对该类型有效，然后他们处理它以处理特定于语言环境的位（例如组分隔符、小数分隔符等），然后最后将其传递给解析器。

如果您确定您的输入与您描述的格式完全相同，并且您不需要考虑由来自不同区域设置的输入等引起的任何潜在差异，那么请务必使用您被告知的优化.

# android - 为什么我需要调用 removeView() 才能将视图添加到我的 LinearLayout

> ID：11919033
> 
> 赞同：0
> 
> 时间：2012-08-12T01:29:13.020
> 
> 标签：android, android-gridview

我收到此错误，但我不确定原因：

```
java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first. 
```

我添加视图的部分是错误指向的行。我提供我的适配器代码是为了让你们更好地了解我在做什么以及为什么我会收到这个错误。如果需要更多信息，请告诉我。提前致谢。

**适配器**

```
private class InnerAdapter extends BaseAdapter{
    String[] array = new String[] {"12\nAM","1\nAM", "2\nAM", "3\nAM", "4\nAM", "5\nAM", 
                                "6\nAM", "7\nAM", "8\nAM", "9\nAM", "10\nAM", "11\nAM",
                                "12\nPM", "1\nPM", "2\nPM", "3\nPM", "4\nPM", "5\nPM",
                                "6\nPM", "7\nPM", "8\nPM", "9\nPM", "10\nPM", "11\nPM"};
    TextView[] views = new TextView[24];

    public InnerAdapter() {
        TextView create = new TextView(DayViewActivity.this);
        LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(0, (int)TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 62, getResources().getDisplayMetrics()), 1.0f);
        params.topMargin = (int)TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 1, getResources().getDisplayMetrics());
        params.bottomMargin = (int)TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 1, getResources().getDisplayMetrics());
        create.setLayoutParams(params);
        create.setBackgroundColor(Color.BLUE);
        create.setText("Test");
        views[0] = create;
        for(int i = 1; i < views.length; i++) {
            views[i] = null;
        }
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return array.length;
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        if(convertView == null) {
            LayoutInflater inflater = LayoutInflater.from(parent.getContext());
            convertView = inflater.inflate(R.layout.day_view_item, parent, false);
        }

        ((TextView)convertView.findViewById(R.id.day_hour_side)).setText(array[position]);
        LinearLayout layout = (LinearLayout)convertView.findViewById(R.id.day_event_layout);
        if(views[position] != null) {
            layout.addView((TextView)views[position], position);
        }

        return convertView;
    }

} 
```

**XML**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="61dp"
    android:orientation="horizontal" >

    <LinearLayout 
        android:layout_width="wrap_content"
        android:layout_height="61dp"
        android:orientation="vertical">
        <TextView 
            android:id="@+id/day_hour_side"
            android:layout_width="wrap_content"
            android:layout_height="60dp"
            android:text="12AM"
            android:background="#bebebe"
            android:layout_weight="0"
            android:textSize="10dp"
            android:paddingLeft="5dp"
            android:paddingRight="5dp"/>
        <TextView 
            android:layout_width="match_parent"
            android:layout_height="1dp"
            android:layout_weight="0"
            android:background="#000000"
            android:id="@+id/hour_side_divider"/>
    </LinearLayout>
    <LinearLayout 
        android:layout_width="0dp"
        android:layout_height="61dp"
        android:orientation="vertical"
        android:layout_weight="1">
        <LinearLayout 
            android:id="@+id/day_event_layout"
            android:layout_width="match_parent"
            android:layout_height="60dp"
            android:orientation="horizontal" ></LinearLayout>
        <TextView 
            android:layout_width="match_parent"
            android:layout_height="1dp"
            android:background="#000000"
            android:id="@+id/event_side_divider" />
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T06:24:48.947

您没有说何时收到该异常（应用程序启动时或上下滚动`GridView`时），但这很正常。该`views`数组有一个不是的值`null`（该数组中的第一个条目设置为您创建的那个）并且很可能您会在某个时候`TextView`尝试重新添加它。`TextView`父母也可以多次`AdapterView`调用该方法来让一些孩子进行测量。`getView`

无论如何，您并不确切知道您要做什么，但当前的方法是错误的。

首先，您创建一个数组，其中一个`TextView`和其余的值设置为，`null`并且您基本上不对它做任何其他事情（但也许这不是完整的代码？！）。其次，您不应该将数组存储`Views`在具有回收其子代的机制的`AdapterView`(like`GridView`等) 的子代中。`ListView`第三，你没有考虑到`GridView`. 例如，您`TextView`为第一个元素添加了，但您没有恢复此更改，`getView`因此如果第一行`View`（包含添加的`TextView`）被回收，您最终将得到`View`包含先前添加`TextView`的行的行不想要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T19:02:04.210

我已经接受了一个答案，但我想我会添加这个，因为它有助于解释一些关于`ListView`（并且根据定义，GridView 也是如此）的东西，学习它的人可以理解。我对在 ListView 中回收 Views 感到困惑，我发现[这篇文章很棒。](http://lucasr.org/2012/04/05/performance-tips-for-androids-listview/)解释得很好。希望它可以帮助任何不完全理解 ListView 和 Adapters 如何工作的人，这对我来说是一个明显的问题。

# asp.net - 读取 ASP.Net 控件的原始 ItemTemplate 标记

> ID：11919041
> 
> 赞同：0
> 
> 时间：2012-08-12T01:31:49.127
> 
> 标签：asp.net

我想知道是否可以从转发器控件中读取 ItemTemplate 的原始标记？

考虑下面的中继器：

```
<asp:Repeater ID="uiReport" runat="server" EnableViewState="False">
    <HeaderTemplate>
        <table border="1">
            <thead>
                <tr>
                    <th>Product</th>
                </tr>
            </thead>
            <tbody>
    </HeaderTemplate>
    <ItemTemplate>
        <tr>
            <td><%#((Product)Container.DataItem).ProductName%></td>
        </tr>
    </ItemTemplate>
    <FooterTemplate>
        </tbody></table>
    </FooterTemplate>
</asp:Repeater> 
```

我正在尝试以原始字符串格式读取项目模板，例如作为如下所示的字符串：

```
string itemTemplate = "<tr><td><%#((Product)Container.DataItem).ProductName%></td></tr>" 
```

根据下面的调用堆栈屏幕抓取，使用反射器并查看调用堆栈引导我使用以下方法（请参见突出显示的第一行）：

![调用栈](../Images/2a668231ebe56c2d4afc05cf618ad0a9.png)

我假设从*...__BuildControl__control6()...*中读取 .aspx 页面中标记的原始内容、切碎（RegEx？）并作为参数传递给以下方法：

```
System.Web.UI.DataBoundLiteralControl.SetStaticString(index, s); 
```

对于本例中的 Repeater 控件，“s”（字符串）参数具有以下值：

```
\r\n                <tr>\r\n                    <td> 
```

请注意，字符串已在 <%# 的第一个实例上拆分。

MSDN 搜索确认 SetStaticString 方法支持 .NET Framework 基础结构，并且不打算直接从您的代码中使用。

[http://msdn.microsoft.com/en-us/library/system.web.ui.databoundliteralcontrol.setstaticstring.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.databoundliteralcontrol.setstaticstring.aspx)

是否有我缺少的虚拟方法可以让我获取原始模板标记，或者是我自己读取文件内容的唯一选择（下面的代码示例）并覆盖Control 基类的必要*Render()方法？*

手动读取 .aspx 页面内容的详细代码示例：

```
string rawPageMarkUp = File.ReadAllText(physicalPathOfAspxPage);
string rawItemTemplate = RegExMethodToExtractItemTemplateFromControl(controlName, rawPageMarkUp); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T12:51:23.860

答案似乎是否定的，没有可用于获取未解析页面的虚拟方法。处理解析页面/控件的方法由密封类和内部方法组成。

这个问题的解决方案是问题中描述的替代建议。

下面是类的详细信息，以便您可以查看本机实现以了解代码的外观。

从以下密封类开始：

[System.Web.UI.PageParser](http://msdn.microsoft.com/en-us/library/system.web.ui.pageparser)

这继承自抽象类：

[System.Web.UI.TemplateControlParser](http://msdn.microsoft.com/en-us/library/system.web.ui.templatecontrolparser)

这个类继承了一个名为：

```
ParseFile 
```

遵循继承的类，直到达到：

[System.Web.UI.TemplateParser](http://msdn.microsoft.com/en-us/library/system.web.ui.templateparser)

您将在此处找到包含读取原始文件和解析内容的起点的方法：

```
internal void ParseFile(string physicalPath, VirtualPath virtualPath)
{
    string o = (physicalPath != null) ? physicalPath : virtualPath.VirtualPathString;
    if (this._circularReferenceChecker.Contains(o))
    {
        this.ProcessError(SR.GetString("Circular_include"));
    }
    else
    {
        this._circularReferenceChecker.Add(o);
        try
        {
            StreamReader reader;
            if (physicalPath != null)
            {
                using (reader = Util.ReaderFromFile(physicalPath, base.CurrentVirtualPath))
                {
                    this.ParseReader(reader, virtualPath);
                    return;
                }
            }
            using (Stream stream = virtualPath.OpenFile())
            {
                reader = Util.ReaderFromStream(stream, base.CurrentVirtualPath);
                this.ParseReader(reader, virtualPath);
            }
        }
        finally
        {
            this._circularReferenceChecker.Remove(o);
        }
    }
} 
```

# jquery - 如何使用 jQuery .subscribe()？

> ID：11919042
> 
> 赞同：7
> 
> 时间：2012-08-12T01:32:13.017
> 
> 标签：jquery, jquery-plugins, publish-subscribe, struts2-jquery

我一直在尝试使用`$.subscribe`，但它似乎不起作用。我下载了一个 WAR 项目，它确实可以工作，但是当我在我的项目中使用此功能时，它不起作用。我必须下载额外的插件吗？

因为我在 jQuery 网站上也找不到关于这些函数的信息，所以我只是找到了新`$.Callbacks()`函数。我需要使用的原因`$.subscribe`是我可以使用类似*onBeforeTopic*的东西。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-12T01:41:53.777

您将需要[发布/订阅插件](http://www.novasoftware.com/download/jquery/publish-subscribe.aspx)。

我的立场是正确的：你需要[Struts2 jQuery Plugin](http://code.google.com/p/struts2-jquery/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-21T01:50:04.040

我知道我参加聚会有点晚了，但为什么不自己写一个简单的 pubsub 呢？查看这篇文章：[https ://lowbrowcoder.wordpress.com/2015/02/16/pubsub-pattern-in-javascript/](https://lowbrowcoder.wordpress.com/2015/02/16/pubsub-pattern-in-javascript/)

# c# - 如何列出实体集的属性？

> ID：11919044
> 
> 赞同：4
> 
> 时间：2012-08-12T01:32:33.000
> 
> 标签：c#, asp.net, entity-framework

如何列出实体集在运行时具有的属性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T15:46:53.773

我找到了答案链接。答案是

```
EntitySetBase es = container.BaseEntitySets.OfType<EntitySet>()
    .Where( eb=>eb.ElementType.Name ==s).FirstOrDefault(); 
foreach (EdmMember memberinfo in es.ElementType.Members.Where(m=>m.BuiltInTypeKind == BuiltInTypeKind.EdmProperty) ) 
```

# android - 按下时突出显示文本视图中的单词

> ID：11919048
> 
> 赞同：4
> 
> 时间：2012-08-12T01:33:13.150
> 
> 标签：android

我有一个 TextView 来显示一段文本，我希望我的应用程序在按下单个单词时使用 TTS 说出单个单词。如果按下时可以突出显示单词会更好看。我已经为每个单词使用 ClickableSpan 实现了它。它几乎可以正常工作，只是播放完成后我看不到如何将突出显示的状态重置为正常状态。每次我单击一个新单词时，前一个单词都会失去突出显示，而新单词会被突出显示，但是一旦 TTS 回调，我不知道如何删除突出显示：

我的文本视图：

```
<TextView
    android:id="@+id/sentence"
    ...
    android:textColorHighlight="@color/i_blue"
 /> 
```

要填写 TextView，我使用：

```
SpannableStringBuilder strBuilder = new SpannableStringBuilder();
Iterator<Word> iterator = e.getWordList().iterator();
int wordStart, wordEnd;
while (iterator.hasNext()) {
    Word w =  iterator.next();
    wordStart = strBuilder.length() + w.getPrefix().length();
    wordEnd = wordStart + w.getWord().length();
    strBuilder.append(w.getPrefix() + w.getWord() + w.getSuffix());
    final String currentWord = w.getWord();
    ClickableSpan readWord = new ClickableSpan() {
        private String clickedWord = currentWord;
        public void onClick(View view) {
            Message msg = m_HandlerReadWord.obtainMessage();
            msg.obj = clickedWord;
            m_HandlerReadWord.sendMessage(msg);
        }
        @Override
        public void updateDrawState(TextPaint ds) {
            super.updateDrawState(ds);
            ds.setUnderlineText(false);
        }
    };
    strBuilder.setSpan(readWord, wordStart, wordEnd, 0);
}
m_SentenceView.setText(strBuilder);
m_SentenceView.setMovementMethod(LinkMovementMethod.getInstance()); 
```

我也有这个方法，一旦 TTS 在完成播放单词时回调，就会调用它：

```
public void resetHighlight() {
 //What can I do there to reset any highlighted word?
} 
```

有什么办法可以做到吗？还是有比 ClickableSpan 更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T05:04:15.640

我终于找到了一个适合我的技巧。当 TextView 中的文本颜色发生变化时，所有高亮都会被重置。因此，如果我在 TTS 的回调中触发文本颜色更改，则突出显示将被删除。肮脏的部分是触发的颜色变化必须是不同的颜色。所以我必须在 TTS 回调时和 ClickableSpan 的 onClick 处理程序中更改颜色。我将这两种颜色设置为两种几乎相同的颜色。

我的可点击跨度：

```
final int AlmostBlack = m_Resources.getColor(R.color.i_black_almost);
ClickableSpan readWord = new ClickableSpan() {
    private int almostBlack = AlmostBlack;
    public void onClick(View view) {
        TextView v = (TextView) view;
        v.setTextColor(almostBlack);
        ... 
```

并且在 TTS 回调时的处理程序中：

```
m_SentenceView.setTextColor(m_Resources.getColor(R.color.i_black)); 
```

如果您想做类似的事情但不等待 TTS 或任何回调，您可以使用颜色状态列表在按下或释放视图时触发颜色更改：

颜色状态列表 res/color/clickable_words.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:color="@color/i_black_almost" android:state_pressed="true"/>
    <item android:color="@color/i_black" />
</selector> 
```

文本视图：

```
<TextView
    android:id="@+id/sentence"
    ...
    android:textColor="@color/clickable_words"
    android:textColorLink="@color/clickable_words"
    android:textColorHighlight="@color/i_blue" /> 
```

# drupal - Drupal 7 CCK 世界语言列表

> ID：11919051
> 
> 赞同：0
> 
> 时间：2012-08-12T01:33:46.677
> 
> 标签：drupal, cck

我需要为来自任何国家/地区的翻译人员创建一个注册表单，并让他们选择提交他们可以翻译的语言组合。为此，我需要下拉或多选小部件格式的世界语言列表。我找不到任何可以创建世界语言 CCK 领域的模块。

希望任何人都可以提出任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T02:47:29.960

听起来您可以使用分类术语引用字段类型，其分类法键入语言表（请参阅[language_list](http://api.drupal.org/api/drupal/includes!bootstrap.inc/function/language_list/6)），您需要使用一次性映射（可能使用[taxonomy_xml](http://drupal.org/project/taxonomy_xml/)）或自定义模块（尽管它听起来你有更多的一次性用例。）

这不应被视为规范的解决方案，也许其他人有不同方法的经验。

# ruby-on-rails-3 - 如何在我的 live heroku 应用程序上创建管理员用户？

> ID：11919054
> 
> 赞同：0
> 
> 时间：2012-08-12T01:34:54.233
> 
> 标签：ruby-on-rails-3, heroku

我尝试进入 heroku 控制台并使用 User.create(name: "admin", email: "admin@tradespring.net", admin: true) 添加一个用户。这些都是我的用户表中的有效列，我在本地创建管理员用户没有问题（以为我做的不同。这就是它给我的。

```
irb(main):001:0> User.create(name: "admin", email:"admin@tradespring.net", admin: true)
WARNING: Can't mass-assign protected attributes: admin
   (57.4ms)  BEGIN
  User Exists (12.4ms)  SELECT 1 FROM "users" WHERE LOWER("users"."email") = LOWER('admin@tradespring.net') LIMIT 1
   (30.3ms)  ROLLBACK
=> #<User id: nil, name: "admin", email: "admin@tradespring.net", created_at: nil, updated_at: nil, password_digest: nil, remember_token: nil, admin: false> 
```

显然，管理员设置不起作用，因为它被设置为假。此外，当我访问我的站点时，没有名为 admin 的新用户。我不确定我是否采取了正确的步骤。我在做什么错/不做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T03:33:06.867

`User.create({name: "admin", email:"admin@tradespring.net", admin: true}, :without_protection => true)`

另一种方法是逐个设置属性：

```
u = User.new
u.name = "admin"
u.email = "admin@tradespring.net"
u.admin = true
u.save! 
```

# android - 输入并存储到数组

> ID：11919056
> 
> 赞同：1
> 
> 时间：2012-08-12T01:35:01.980
> 
> 标签：android

我是 android 编程新手，并不擅长 java 编程。这里有一个简单的问题：一旦按下按钮，如何将在 EditText 中键入的值存储到数组中，我将能够将每个索引与另一个变量的常量值进行比较。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T01:48:51.647

```
//your array
String[n] array;

//your button
Button b;

///your edittext
EditText e;

if(b.isPressed())
array[x]=edit.getText().toString(); 
```

或使用 ArrayList

```
ArrayList<String> n= new ArrayList<String>();

//your button
Button b;

///your edittext
EditText e;

if(b.isPressed())
n.add(edit.getText().toString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T01:55:34.567

嗯，这很容易。xml布局

```
 <RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/relativeLayout1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >
 <EditText
         android:id="@+id/txtField"
         android:layout_width="fill_parent"
         android:layout_height="fill_parent" />
 <Button
         android:id="@+id/button"
         android:layout_width="fill_parent"
         android:layout_height="fill_parent"/>
</RelativeLayout> 
```

因此，在您的活动中，您输入以下内容：

```
EditText text = (EditText) findViewById(R.id.txtField);
Button button = (Button) findViewById(R.id.button);
button.setOnClickListener(new OnClickListener() {

    public void onClick(View v) {
          String s = text.getText().toString();
              // then you do whatever you like with it
    }
}); 
```

# android - 如何从 SQLite 数据库导入图片？

> ID：11919059
> 
> 赞同：-1
> 
> 时间：2012-08-12T01:35:49.047
> 
> 标签：android, android-sqlite

我正在做一个关于联系人的项目为此，我需要在 SQlite 数据库中导入/存储图片。从我读过的内容来看，我必须将图片转换为不同的格式（在这个假设中可能是错误的），然后将其存储在数据库。你能告诉我我该怎么做，或者我可以用不同的方法来做吗？两者都会对我有帮助，这样我就可以学到更多东西。

谢谢你，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T02:23:37.033

取决于您想从哪里获取图片，无论是来自互联网还是来自 SD 卡。但是，我假设您可以获取它并将其转换为位图。

```
Bitmap bm = (get it from anywhere);
ByteArrayOutputStream blob = new ByteArrayOutputStream();
//the below line is used if you like to scale it down to store it into the database
bm = Bitmap.createScaledBitmap(bm, width, height, false);
//then put it into a byte array to store it in the database
bm.compress(CompressFormat.JPEG, 100, blob);
// method call to database
dbClass.addPicture(blob.toByteArray()); 
```

数据库中的表定义：

```
SQLiteDatabase.execSQL("CREATE TABLE IF NOT EXISTS Pictures (id integer primary key autoincrement, pic blob not null "); 
```

数据库类中的addPicture方法如下

```
public void addPicture(byte[] picture){
        db = this.getWritableDatabase();
    ContentValues cv = new ContentValues();
    cv.put("pic", picture);
    db.insert("Pictures ", null, cv);
} 
```

我希望这会有所帮助

# php - 如何处理用户可定制的网站主题？

> ID：11919061
> 
> 赞同：0
> 
> 时间：2012-08-12T01:36:06.690
> 
> 标签：php, mysql, css, content-management-system, themes

我们正在开发一个 CMS，并希望获得有关处理用户可自定义主题的最佳方法的建议。我们有几个想法，但不确定最好的方法是什么。CMS 将允许用户通过 CMS 中内置的主题编辑器 UI 自定义网站的每个部分，包括颜色、字体、布局等。

我们正在考虑编写一个自定义 CSS 解析器，将更改写入该主题的 CSS 文件。这种方法似乎可能有很多失败点和很多偷听。

另一种方法是将所有 CSS 存储在数据库中，然后使用内联 CSS。

CMS 是使用带有 MySQL 数据库的 JQuery 和 PHP 构建的，用于获取用户信息和内容，而不是 CSS。

有没有更有效的方法来解析/控制/编辑主题的 CSS 属性？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T03:13:38.703

我的建议是看一下[WordPress](http://www.wordpress.org)或任何其他预构建平台（Drupal、Joomla 等）的处理方式。WordPress 主题由存储在文件系统上的模板文件组成，允许用户完全控制其网站的外观。每个主题的 CSS 存储在一个名为`style.css`. WP 本身并不强制执行前端布局，而是将其留给站点管理员/开发人员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T05:53:38.867

我会将您的 CSS 文件视为代码类。例如，为您的可自定义字体主题创建一个 CSS 文件，为页面主题创建一个 CSS 文件等。

考虑到这一点，在页面加载时，您可以轻松地根据用户选择构建动态 CSS 文件。

又名

字体1.css 字体2.css 字体3.css

page1.css page2.css page3.css

在页面加载时，您确定用户首选项是字体 1 和页面 2，拉入 css 文件和 walla，您就可以开始了！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T20:55:03.907

我目前正在寻找做同样的事情。我遇到的一些解决方案似乎使用 xml 文件进行布局，然后（可能）解析出自定义 css 文件。这样，布局决定了页面内容模块的“堆叠顺序”，而字体、颜色和背景图像等其他可自定义的功能（通常是有限的）由附加的自定义（用户）css文件处理。

我将关注这一点，并且还将有兴趣找到实现它的实际代码解决方案。例如如何使用 jquery 为用户后端构建一个可拖动的内容模块界面。

# php - 如何使用字符串访问对象的图层？

> ID：11919062
> 
> 赞同：0
> 
> 时间：2012-08-12T01:36:08.317
> 
> 标签：php, xml, object, xml-parsing

这是我想要做的。

我读取了一个 XML 文件并需要访问某些属性。问题是这个 XML 文件可能有 4 种配置之一。

我想要做的是：

```
if(condition1){
  $title='PropertyParent->Child';
}
elseif(condition2){
  $title='DifferentProperty->AnotherLayer->DifferentChild';
}

$myTitle = $xml->$title; 
```

并让它访问字符串中的对象结构。有没有办法做到这一点？我应该使用可变变量吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T02:33:50.313

Well, the only way to do this is to use your own function:

```
function return_nested($xml_file, $condition)
{
    $cond_arr = explode("->", $condition);
    $document = new DOMDocument();
    $document->load($xml_file);
    foreach($cond_arr as $cond)
    {
        $document = $document->getElementsByTagName( $cond )->item(0); //process each condition
    }
    return $document; //return element
} 
```

# javascript - 在 Javascript 中以最佳性能按“Levenshtein 距离”对数组进行排序

> ID：11919065
> 
> 赞同：52
> 
> 时间：2012-08-12T01:37:47.787
> 
> 标签：javascript, jquery, sorting, levenshtein-distance

所以我有一个随机的 javascript 名称数组...

[@larry,@nicholas,@notch] 等等。

它们都以@ 符号开头。我想按 Levenshtein Distance 对它们进行排序，以便列表顶部的那些最接近搜索词。目前，我有一些使用 jQuery 的 javascript，在按键输入的搜索词周围`.grep()`使用 javascript方法：`.match()`

（自首次发布以来编辑的代码）

```
limitArr = $.grep(imTheCallback, function(n){
    return n.match(searchy.toLowerCase())
});
modArr = limitArr.sort(levenshtein(searchy.toLowerCase(), 50))
if (modArr[0].substr(0, 1) == '@') {
    if (atRes.childred('div').length < 6) {
        modArr.forEach(function(i){
            atRes.append('<div class="oneResult">' + i + '</div>');
        });
    }
} else if (modArr[0].substr(0, 1) == '#') {
    if (tagRes.children('div').length < 6) {
        modArr.forEach(function(i){
            tagRes.append('<div class="oneResult">' + i + '</div>');
        });
    }
}

$('.oneResult:first-child').addClass('active');

$('.oneResult').click(function(){
    window.location.href = 'http://hashtag.ly/' + $(this).html();
}); 
```

它还有一些 if 语句检测数组是否包含主题标签 (#) 或提及 (@)。忽略那个。`imTheCallback`是名称数组，标签或提及，然后是`modArr`排序的数组。然后`.atResults`and`.tagResults`元素是它每次在数组中附加的元素，这会根据输入的搜索词形成一个名称列表。

我**也**有 Levenshtein 距离算法：

```
var levenshtein = function(min, split) {
    // Levenshtein Algorithm Revisited - WebReflection
    try {
        split = !("0")[0]
    } catch(i) {
        split = true
    };

    return function(a, b) {
        if (a == b)
            return 0;
        if (!a.length || !b.length)
            return b.length || a.length;
        if (split) {
            a = a.split("");
            b = b.split("")
        };
        var len1 = a.length + 1,
            len2 = b.length + 1,
            I = 0,
            i = 0,
            d = [[0]],
            c, j, J;
        while (++i < len2)
            d[0][i] = i;
        i = 0;
        while (++i < len1) {
            J = j = 0;
            c = a[I];
            d[i] = [i];
            while(++j < len2) {
                d[i][j] = min(d[I][j] + 1, d[i][J] + 1, d[I][J] + (c != b[J]));
                ++J;
            };
            ++I;
        };
        return d[len1 - 1][len2 - 1];
    }
}(Math.min, false); 
```

如何在当前代码中使用算法（或类似算法）对其进行排序而不会产生不良性能？

更新：

所以我现在正在使用 James Westgate 的 Lev Dist 函数。工作 WAYYYY 快。所以性能解决了，现在的问题是使用它的源...

```
modArr = limitArr.sort(function(a, b){
    levDist(a, searchy)
    levDist(b, searchy)
}); 
```

`.sort()`我现在的问题是对使用该方法的一般理解。感谢您的帮助，谢谢。

谢谢！

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2012-08-14T18:28:39.970

几年前我写了一个内联拼写检查器并实现了一个 Levenshtein 算法——因为它是内联的，而且对于 IE8，我做了很多性能优化。

```
var levDist = function(s, t) {
    var d = []; //2d matrix

    // Step 1
    var n = s.length;
    var m = t.length;

    if (n == 0) return m;
    if (m == 0) return n;

    //Create an array of arrays in javascript (a descending loop is quicker)
    for (var i = n; i >= 0; i--) d[i] = [];

    // Step 2
    for (var i = n; i >= 0; i--) d[i][0] = i;
    for (var j = m; j >= 0; j--) d[0][j] = j;

    // Step 3
    for (var i = 1; i <= n; i++) {
        var s_i = s.charAt(i - 1);

        // Step 4
        for (var j = 1; j <= m; j++) {

            //Check the jagged ld total so far
            if (i == j && d[i][j] > 4) return n;

            var t_j = t.charAt(j - 1);
            var cost = (s_i == t_j) ? 0 : 1; // Step 5

            //Calculate the minimum
            var mi = d[i - 1][j] + 1;
            var b = d[i][j - 1] + 1;
            var c = d[i - 1][j - 1] + cost;

            if (b < mi) mi = b;
            if (c < mi) mi = c;

            d[i][j] = mi; // Step 6

            //Damerau transposition
            if (i > 1 && j > 1 && s_i == t.charAt(j - 2) && s.charAt(i - 2) == t_j) {
                d[i][j] = Math.min(d[i][j], d[i - 2][j - 2] + cost);
            }
        }
    }

    // Step 7
    return d[n][m];
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-08-29T15:13:08.610

我来到了这个解决方案：

```
var levenshtein = (function() {
        var row2 = [];
        return function(s1, s2) {
            if (s1 === s2) {
                return 0;
            } else {
                var s1_len = s1.length, s2_len = s2.length;
                if (s1_len && s2_len) {
                    var i1 = 0, i2 = 0, a, b, c, c2, row = row2;
                    while (i1 < s1_len)
                        row[i1] = ++i1;
                    while (i2 < s2_len) {
                        c2 = s2.charCodeAt(i2);
                        a = i2;
                        ++i2;
                        b = i2;
                        for (i1 = 0; i1 < s1_len; ++i1) {
                            c = a + (s1.charCodeAt(i1) === c2 ? 0 : 1);
                            a = row[i1];
                            b = b < a ? (b < c ? b + 1 : c) : (a < c ? a + 1 : c);
                            row[i1] = b;
                        }
                    }
                    return b;
                } else {
                    return s1_len + s2_len;
                }
            }
        };
})(); 
```

另见[http://jsperf.com/levenshtein-distance/12](http://jsperf.com/levenshtein-distance/12)

大多数速度是通过消除一些阵列使用来获得的。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-21T20:49:54.647

更新：http: [//jsperf.com/levenshtein-distance/5](http://jsperf.com/levenshtein-distance/5)

新修订版消灭了所有其他基准。因为我没有 IE8/9/10 测试环境，所以我特别追求 Chromium/Firefox 的性能，但是所做的优化应该普遍适用于大多数浏览器。

**莱文斯坦距离**

执行 Levenshtein Distance 的矩阵可以一次又一次地重复使用。这是一个明显的优化目标（但要小心，这现在对字符串长度施加了限制（除非您要动态调整矩阵大小））。

在 jsPerf Revision 5 中没有追求的唯一优化选项是 memoisation。根据您对 Levenshtein Distance 的使用，这可能会有很大帮助，但由于其实现特定性而被省略。

```
// Cache the matrix. Note this implementation is limited to
// strings of 64 char or less. This could be altered to update
// dynamically, or a larger value could be used.
var matrix = [];
for (var i = 0; i < 64; i++) {
    matrix[i] = [i];
    matrix[i].length = 64;
}
for (var i = 0; i < 64; i++) {
    matrix[0][i] = i;
}

// Functional implementation of Levenshtein Distance.
String.levenshteinDistance = function(__this, that, limit) {
    var thisLength = __this.length, thatLength = that.length;

    if (Math.abs(thisLength - thatLength) > (limit || 32)) return limit || 32;
    if (thisLength === 0) return thatLength;
    if (thatLength === 0) return thisLength;

    // Calculate matrix.
    var this_i, that_j, cost, min, t;
    for (i = 1; i <= thisLength; ++i) {
        this_i = __this[i-1];

        for (j = 1; j <= thatLength; ++j) {
            // Check the jagged ld total so far
            if (i === j && matrix[i][j] > 4) return thisLength;

            that_j = that[j-1];
            cost = (this_i === that_j) ? 0 : 1;  // Chars already match, no ++op to count.
            // Calculate the minimum (much faster than Math.min(...)).
            min    = matrix[i - 1][j    ] + 1;                      // Deletion.
            if ((t = matrix[i    ][j - 1] + 1   ) < min) min = t;   // Insertion.
            if ((t = matrix[i - 1][j - 1] + cost) < min) min = t;   // Substitution.

            matrix[i][j] = min; // Update matrix.
        }
    }

    return matrix[thisLength][thatLength];
}; 
```

**Damerau-Levenshtein 距离**

jsperf.com/damerau-levenshtein-distance

Damerau-Levenshtein 距离是对 Levenshtein 距离的一个小修改，以包括换位。几乎没有什么可优化的。

```
// Damerau transposition.
if (i > 1 && j > 1 && this_i === that[j-2] && this[i-2] === that_j
&& (t = matrix[i-2][j-2]+cost) < matrix[i][j]) matrix[i][j] = t; 
```

**排序算法**

这个答案的第二部分是选择一个合适的排序函数。我会尽快将优化的排序功能上传到[http://jsperf.com/sort](http://jsperf.com/sort)。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-02-28T14:35:49.793

如果您仍然需要它，我实现了一个非常高效的 levenshtein 距离计算实现。

```
function levenshtein(s, t) {
    if (s === t) {
        return 0;
    }
    var n = s.length, m = t.length;
    if (n === 0 || m === 0) {
        return n + m;
    }
    var x = 0, y, a, b, c, d, g, h, k;
    var p = new Array(n);
    for (y = 0; y < n;) {
        p[y] = ++y;
    }

    for (; (x + 3) < m; x += 4) {
        var e1 = t.charCodeAt(x);
        var e2 = t.charCodeAt(x + 1);
        var e3 = t.charCodeAt(x + 2);
        var e4 = t.charCodeAt(x + 3);
        c = x;
        b = x + 1;
        d = x + 2;
        g = x + 3;
        h = x + 4;
        for (y = 0; y < n; y++) {
            k = s.charCodeAt(y);
            a = p[y];
            if (a < c || b < c) {
                c = (a > b ? b + 1 : a + 1);
            }
            else {
                if (e1 !== k) {
                    c++;
                }
            }

            if (c < b || d < b) {
                b = (c > d ? d + 1 : c + 1);
            }
            else {
                if (e2 !== k) {
                    b++;
                }
            }

            if (b < d || g < d) {
                d = (b > g ? g + 1 : b + 1);
            }
            else {
                if (e3 !== k) {
                    d++;
                }
            }

            if (d < g || h < g) {
                g = (d > h ? h + 1 : d + 1);
            }
            else {
                if (e4 !== k) {
                    g++;
                }
            }
            p[y] = h = g;
            g = d;
            d = b;
            b = c;
            c = a;
        }
    }

    for (; x < m;) {
        var e = t.charCodeAt(x);
        c = x;
        d = ++x;
        for (y = 0; y < n; y++) {
            a = p[y];
            if (a < c || d < c) {
                d = (a > d ? d + 1 : a + 1);
            }
            else {
                if (e !== s.charCodeAt(y)) {
                    d = c + 1;
                }
                else {
                    d = c;
                }
            }
            p[y] = d;
            c = a;
        }
        h = d;
    }

    return h;
} 
```

这是我对类似 SO 问题的回答 [最快的通用 Levenshtein Javascript 实现](https://stackoverflow.com/questions/18516942/fastest-general-purpose-levenshtein-javascript-implementation/35279162#35279162)

**更新**

上面的改进版本现在在 github/npm 上，请参阅 [https://github.com/gustf/js-levenshtein](https://github.com/gustf/js-levenshtein)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-16T14:28:45.270

这样做的明显方法是将每个字符串映射到 (distance, string) 对，然后对该列表进行排序，然后再次删除距离。通过这种方式，您可以确保只需计算一次莱文斯坦距离。也许也先合并重复项。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-18T05:37:08.553

我肯定会建议使用更好的 Levenshtein 方法，例如 @James Westgate 的答案中的方法。

也就是说，DOM 操作通常是一笔不小的开支。您当然可以改进 jQuery 的使用。

在上面的示例中，您的循环相当小，但是将每个生成的 html 连接`oneResult`成一个字符串并`append`在循环结束时执行一个会更有效率。

你的选择器很慢。`$('.oneResult')`将搜索DOM 中的**所有**元素并`className`在旧的 IE 浏览器中测试它们。您可能需要考虑诸如`atRes.find('.oneResult')`限定搜索范围之类的事情。

在添加`click`处理程序的情况下，我们可能希望做得更好，避免在每个`keyup`. `atRest`您可以通过在设置处理程序的同一块中为所有结果设置单个处理程序来利用事件委托`keyup`：

```
atRest.on('click', '.oneResult', function(){
  window.location.href = 'http://hashtag.ly/' + $(this).html();
}); 
```

有关更多信息，请参阅[http://api.jquery.com/on/](http://api.jquery.com/on/)。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-07-31T13:41:40.960

我刚刚写了一个新版本：http: [//jsperf.com/levenshtein-algorithms/16](http://jsperf.com/levenshtein-algorithms/16)

```
function levenshtein(a, b) {
  if (a === b) return 0;

  var aLen = a.length;
  var bLen = b.length;

  if (0 === aLen) return bLen;
  if (0 === bLen) return aLen;

  var len = aLen + 1;
  var v0 = new Array(len);
  var v1 = new Array(len);

  var i = 0;
  var j = 0;
  var c2, min, tmp;

  while (i < len) v0[i] = i++;

  while (j < bLen) {
    c2 = b.charAt(j++);
    v1[0] = j;
    i = 0;

    while (i < aLen) {
      min = v0[i] - (a.charAt(i) === c2 ? 1 : 0);
      if (v1[i] < min) min = v1[i];
      if (v0[++i] < min) min = v0[i];
      v1[i] = min + 1;
    }

    tmp = v0;
    v0 = v1;
    v1 = tmp;
  }
  return v0[aLen];
} 
```

这个版本比其他版本快。甚至可以在 IE 上工作 =)

# iphone - 如何在按住手指的同时从使用一个 UIButton 切换到另一个？

> ID：11919066
> 
> 赞同：5
> 
> 时间：2012-08-12T01:38:05.723
> 
> 标签：iphone, ios, uibutton

想象一下你的键盘。想象一下自己将一根手指放在一个键上，然后（在按住的同时）将手指一直移动到键盘上的另一个键上。现在，假设键盘上的每个键都是`UIButton`. 当您将手指放在当前键上时，该键 ( `UIButton`) 会突出显示。然后，当用户移动到另一个键时，第一个键不再突出显示，而当前按下的键被突出显示。

现在，我有一个 6 x 8 的 UIButton 网格，每个 53 x 53 像素。所以，我有 48 `UIButtons`。我想复制这种想法。用户手指按下的按钮会有一个稍微亮一点的图像（看起来像被选中的那样），而所有其他按钮都不会稍微亮一点。

这是我对如何解决这个问题的想法，

1) 创建所有 48`UIButtons`个`viewDidLoad`. 将较亮的图像添加到`UIControlStateHighlighted`所有`UIButtons`.

2）添加某种方式`target`以`touchUpOutside`某种方式使当前按钮不突出显示且不可用。（也许设置突出显示和`userInteractionEnabled`否）。但是，我怎样才能知道要使用的下一个按钮呢？我怎么能说我希望`UIButton`用户手指所在的特定位置突出显示并用于检测手势和东西。

此外，此`touchUpOutside`方法可能不起作用，因为所有按钮都彼此相邻，我认为您必须将其拖得很远才能运行 this `touchUpOutside`。

同样重要的是要注意按钮的行和列不相等。有时一个按钮实际上是一个`UIImage`但看起来像一个`UIButton`。因此，出于某种原因进行某种快速枚举比较帧是行不通的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T03:25:27.287

两个观察：

1.  我通常使用手势识别器来处理这样的事情，而不是各种`touchUp...`方法。

2.  我知道你说过你不想通过子视图快速枚举，但为什么不呢？仅仅因为某些类与其他类不同不是问题（因为您可以只测试该`isKindOfClass`方法）。（而且，顺便说一句，我不知道为什么有些会是按钮，有些不会。）仅仅因为它们没有排列真的没有区别，要么。

无论如何，对于这样的事情，我经常将手势识别器放在共享父视图（例如通常是视图控制器的视图）上，然后枚举子视图以查看当前 CGPoint 包含在哪个视图中？

```
CGPoint location = [sender locationInView:self.view];

for (UIView *subview in self.view.subviews)
{
    if (CGRectContainsPoint(subview.frame, location))
    {
        // do your appropriate highlighting

        if ([subview isKindOfClass:[UIButton class]])
        {
            // something for buttons
        }
        else if ([subview isKindOfClass:[UIImageView class]])
        {
            // something for imageviews
        }

        return;
    }
} 
```

我不知道这对你是否有意义，但对我来说似乎最简单。如果你澄清你的意图，也许我可以进一步完善我的答案。

作为一个实际的例子，你可以定义一个连续的手势识别器来跟踪被点击的第一个和最后一个子视图（如果你没有在子视图上开始你的手势，则不会生成手势，如果你不' t 在子视图上停止手势，它会取消整个操作），例如：

```
@interface SubviewGestureRecognizer : UIGestureRecognizer

@property (nonatomic,strong) UIView *firstSubview;
@property (nonatomic,strong) UIView *currentSubview;

@end

@implementation SubviewGestureRecognizer

- (id) initWithTarget:(id)target action:(SEL)action
{
    self = [super initWithTarget:target action:action];
    if (self)
    {
        self.firstSubview = nil;
        self.currentSubview = nil;
    }

    return self;
}

// you might want to tweak this `identifySubview` to only look 
// for buttons and imageviews, or items with nonzero tag properties, 
// or recursively navigate if it encounters container UIViews 
// or whatever suits your app

- (UIView *)identifySubview:(NSSet *)touches
{
    CGPoint location = [[touches anyObject] locationInView:self.view];

    for (UIView *subview in self.view.subviews)
    {
        if (CGRectContainsPoint(subview.frame, location))
        {
            return subview;
        }
    }

    return nil;
}

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    [super touchesBegan:touches withEvent:event];

    if ([touches count] != 1)
    {
        self.state = UIGestureRecognizerStateFailed;
        return;
    }

    self.firstSubview = [self identifySubview:touches];
    self.currentSubview = self.firstSubview;

    if (self.firstSubview == nil)
        self.state = UIGestureRecognizerStateFailed;
    else
        self.state = UIGestureRecognizerStateBegan;
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    [super touchesMoved:touches withEvent:event];

    if (self.state == UIGestureRecognizerStateFailed) return;

    self.currentSubview = [self identifySubview:touches];

    self.state = UIGestureRecognizerStateChanged;
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    [super touchesEnded:touches withEvent:event];

    self.currentSubview = [self identifySubview:touches];

    if (self.currentSubview != nil)
        self.state = UIGestureRecognizerStateEnded;
    else
        self.state = UIGestureRecognizerStateFailed;
}

- (void)reset
{
    [super reset];

    self.firstSubview = nil;
    self.currentSubview = nil;
} 
```

然后，您可以在以下位置进行设置`viewDidLoad`：

```
SubviewGestureRecognizer *recognizer = [[SubviewGestureRecognizer alloc] initWithTarget:self action:@selector(handleTouches:)];
[self.view addGestureRecognizer:recognizer]; 
```

然后像这样定义你的处理程序（这适用于按钮和图像视图，利用两者都支持的事实`setHighlighted`）：

```
- (void)handleTouches:(SubviewGestureRecognizer *)sender
{
    static UIControl *previousControl = nil;

    if (sender.state == UIGestureRecognizerStateBegan || sender.state == UIGestureRecognizerStateChanged)
    {
        if (sender.state == UIGestureRecognizerStateBegan)
            previousControl = nil;

        UIView *subview = sender.currentSubview;
        if (previousControl != subview)
        {
            // reset the old one (if any)

            [previousControl setHighlighted:NO];

            // highlight the new one

            previousControl = (UIControl *)subview;
            [previousControl setHighlighted:YES];
        }
    }
    else if (sender.state == UIGestureRecognizerStateEnded)
    {
        if (previousControl)
        {
            [previousControl setHighlighted:NO];
            NSLog(@"successfully touchdown on %@ and touchup on %@", sender.firstSubview, sender.currentSubview);
        }
    }
    else if (sender.state == UIGestureRecognizerStateCancelled || sender.state == UIGestureRecognizerStateFailed)
    {
        [previousControl setHighlighted:NO];
        NSLog(@"cancelled/failed gesture");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T06:20:44.233

这是一个相当简单的方法来做到这一点。假设您正在以编程方式创建按钮（使用界面生成器执行此操作将是一个巨大的痛苦）。此方法适用于 UIViewController、UIView 和 UIGestureRecognizer 的子类。

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

    //get the touch object
    UITouch *myTouch = [touches anyObject];

    //get the location of the touch
    CGPoint *myPoint = [myTouch locationInView:self.view];

    //detect if the touch is in one of your buttons
    if ( CGRectContainsPoint(myButton.frame, myPoint){
        /*do whatever needs to be done when the button is pressed
        repeat the CGRectContainsPoint for all buttons,
        perhaps using a while or for loop to look through an array?*/
    }

} 
```

此方法仅检测用户何时放下手指，您将需要使用这些方法来检测其他动作：

`touchesMoved:withEvent`检测手指何时在屏幕上移动而不抬起

`touchesEnded:withEvent`检测手指何时离开屏幕

`touchesCancelled:withEvent:`检测何时中断应用程序，例如接听电话或锁定屏幕

# java - 可变参数和空参数

> ID：11919076
> 
> 赞同：6
> 
> 时间：2012-08-12T01:40:10.937
> 
> 标签：java, hibernate, reflection, variadic-functions

所以，我有一个奇怪的问题。这个表达式：`method.invoke(target, null)`throws java.lang.IllegalArgumentException: wrong number of arguments

问题是这个表达式在 hibernate 的深处（准确地说是 BasicPropertyAccessor$BasicGetter），我想它应该可以正常工作（直到最近才这样做）

我在 Eclipse 中调试了这个问题，实际上，如果我（在显示视图中）调用`method.invoke(target)`或`method.invoke(target, (Object[]) null)`一切正常。我确定我的班级有这个吸气剂，它没有参数。所以……问题是，到底发生了什么？！

编辑：

*   method 是 java.lang.reflect.Method 的一个实例，并指向上述 getter
*   target 是具有公共 X getX() getter 的类的实例
*   JDK 1.6.0_31
*   休眠代码（BasicPropertyAccessor:143）：

    ```
    public Object get(Object target) throws HibernateException {
        try {
            return method.invoke(target, null);
        }
        catch{ ... }
    } 
    ```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-12T02:23:58.547

当您将`null`值传递给 varargs 方法时，它可以被解释为以下两种情况之一：

*   一个`null`数组
*   具有一个元素的数组，即`null`.

Java 选择前者，除非`null`显式转换为 varargs 方法的组件类型。（为了清楚起见，建议您显式转换任何一种方式，如果不这样做，您还会在 Eclipse 中收到令人讨厌的警告。）

当调用不带参数的方法时，您可以传递`Method.invoke`一个包含 0 个元素、没有额外参数（这将导致一个空数组）的数组，或者一个`null`数组：

```
public class MethodInvoke {
    public static void noParams() {
        System.out.println("noParams called");
    }

    public static void main(String[] args) throws NoSuchMethodException,
            SecurityException, IllegalAccessException,
            IllegalArgumentException, InvocationTargetException {
        Method noParams = MethodInvoke.class.getMethod("noParams");
        Object target = null;
        noParams.invoke(target, new Object[0]);
        noParams.invoke(target);
        noParams.invoke(target, null);
        noParams.invoke(target, (Object[]) null);
        noParams.invoke(target, (Object) null); // wrong number of arguments
    }
} 
```

似乎正在发生的事情`method.invoke(target, null)`被解释为`method.invoke(target, (Object) null)`. 这与 Java 的行为方式不一致。

你确定你的方法没有参数吗？

我还注意到，在较新版本的休眠中，他们明确地将其`null`转换为`Object[]`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T02:24:07.593

如果方法的签名是`public X getX()`，那么*没有*参数，所以这样调用它：

```
method.invoke(target); 
```

该方法的第一个参数`invoke()`是调用该方法的实例。

请注意，对于可变参数方法，使用逗号指定参数的方式例如`method(a, b, c)`是语法糖`method(new Object[]{a, b, c}`：形式参数类型是`Object[]`.

# iphone - SplitViewController Woes - 在纵向模式下替换细节视图控制器失败

> ID：11919077
> 
> 赞同：2
> 
> 时间：2012-08-12T01:40:17.817
> 
> 标签：iphone, ios, orientation, uisplitviewcontroller

我有一个运行良好的 SVC 设置。SPC 的主视图和详细视图都是 UINavigationController，每个都有单独的根视图控制器。

我的应用程序运行良好。我可以在纵向或横向模式下启动它，一切正常。“主”弹出按钮在纵向模式下可见，但在横向模式下隐藏。主平面和细节平面都正确设置动画和旋转，没有弹出或奇怪的动画伪影存在，并且一切都正确拉伸。每个规格 100% 的满意度。

当我更换细节视图控制器时出现问题。由于我们无法替换 uinavi 控制器的根节点，所以我要做的是创建一个全新的`UINavigationController`，并在详细视图中为其分配我想要的新视图。我这样做是因为详细视图中的视图可以做 1-2-3 级深度，但我需要能够分配唯一的“根”视图（例如，我需要能够完全替换根`UINavigationController`）。

代码如下所示：

```
self.detailViewController = [[SomeNewController1of3 alloc] initWithNibName:@"SomeNewController1of3" bundle:nil];
self.splitViewController.delegate = self.detailViewController;
UINavigationController *newNC = [[UINavigationController alloc] initWithRootViewController:self.detailViewController];
self.splitViewController.viewControllers = @[navigationController, newN]; 
```

首先，我创建新的视图控制器，不管它是什么。然后我将 splitviewcontroller 的委托设置为 = 新创建的 viewcontroller （这样`willHideViewController`, 等就会触发）。然后我创建一个导航控制器来容纳新创建的视图控制器，以便它可以从中推送和弹出。最后，我用我的新导航控制器替换了拆分视图控制器的第二个（详细）视图。

同样，当我从风景开始时，这个计划完美无缺。

当我从纵向开始时，这些是我注意到的异常情况：

1.  所有弹出窗口（警报框、主视图等）都有奇怪的旋转，并且在显示时会从尴尬的位置弹出。几乎就像它在显示这些弹出窗口时旋转它们一样，而不是让它们简单地“滑出”正确的位置。
2.  当显示主视图时，在进行了上述奇怪的旋转之后，它会完全消失一瞬间（留下一个黑色的空白区域），然后恢复到原来的位置。
3.  在我完成设备旋转之前，不会显示详细视图控制器上显示主视图弹出窗口的“主”按钮。在用断点确认后，我确实得出结论，`willHideViewController`我的上述方法没有调用它。

我不明白为什么当我从横向开始时一切都表现得完美无缺，但所有这些错误都出现在纵向？我所有的视图实际上在 IB 中都有一个默认方向设置为纵向，并且可以缩放以适应。此外，它们不像是疯狂的界面，它们都只是普通的 tableviews。

你们中有人遇到过这个问题或找到解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-09-03T10:03:11.537

首先，`UISplitViewController`委托应该是像您的 App Delegate 这样的顶级对象，而不是拆分控制器显示的视图控制器。

其次，要回答您的问题，要以纵向替换显示详细视图控制器（即推送到主导航上），您可以使用拆分控制器委托方法：

**AppDelegate.m**

```
- (BOOL)splitViewController:(UISplitViewController *)splitViewController showDetailViewController:(UIViewController *)vc sender:(id)sender{
    if(!splitViewController.isCollapsed){
        return NO;
    }
    UINavigationController *masterNav = splitViewController.viewControllers.firstObject;
    if(![masterNav.topViewController isKindOfClass:UINavigationController.class]){
        return NO;
    }
    UINavigationController *existingDetailNav = (UINavigationController *)masterNav.topViewController;
    UINavigationController *newDetailNav = (UINavigationController *)vc;
    existingDetailNav.viewControllers = @[newDetailNav.viewControllers.firstObject];
    return YES;
} 
```

您可能想知道为什么我们不只是替换主导航堆栈。问题是拆分视图控制器保留了上次 showDetail 经历其默认行为的细节视图控制器。因此，如果我们是纵向的，点击一个单元格以显示细节，然后替换细节，然后导航回来，然后在旋转到横向时，旧的细节将显示在右侧，而不是新的细节。通过用上面的新细节控制器替换细节导航堆栈，这解决了这个问题，因为尽管拆分显示了保留的细节导航，但它现在包含新的细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-08T16:17:42.263

我发现将 SplitViewController 子类化更容易。从那里，您可以轻松地更换为需要它的人添加 navController 的细节。

子类 UISplitViewController 并将您的根 splitViewController 设置为该类。然后将此方法添加到您的 UISplitViewController 子类中：

```
-(void)setDetailControllerTo:(UIViewController *)detailController withNavControllerTitle:(NSString *)title {
[detailController view]; // this line forces the viewDidLoad method to be called

if (title) {
    UINavigationController *navController = [[UINavigationController alloc] init];
    [navController pushViewController:detailController animated:YES];
    detailController.title = title;

    NSArray *viewControllers=@[self.mainController.viewControllers[0],navController];
    self.mainController.viewControllers = viewControllers;
} else {
    NSArray *viewControllers=@[self.mainController.viewControllers[0],detailController];
    self.mainController.viewControllers = viewControllers;
} 
```

}

要调用此方法，请从 tableView:didSelectRowAtIndexPath: 方法中的主视图控制器执行类似的操作

```
FixedSplitViewController *splitController = (FixedSplitViewController*) self.splitViewController;

CurrentEventViewController *controller = [self.storyboard instantiateViewControllerWithIdentifier:@"CurrentEventViewController"];
// add any setup code here
[splitController setDetailControllerTo:controller withNavControllerTitle:@"Current Event"]; 
```

如果您希望在纵向旋转中保持主视图可见，请将此方法添加到 SplitViewController 子类：

```
-(BOOL)splitViewController:(UISplitViewController *)svc shouldHideViewController:(UIViewController *)vc inOrientation:(UIInterfaceOrientation)orientation {
    return NO;
} 
```

# objective-c - 嵌套的 NSArray for 循环不会以嵌套方式循环

> ID：11919079
> 
> 赞同：0
> 
> 时间：2012-08-12T01:41:10.937
> 
> 标签：objective-c, for-loop, nsarray

我已经学习了 Objective-C 5 天，而我只有 2 周的编程经验，所以请尽可能简单地回答。

我在一本书中做一个练习，要求我生成一个专有名称列表，这些专有名称也是常规单词。为此，我为`NSArray`专有名称对象中的每个专有名称运行了一个 for 循环。在那个 for 循环中，我有一个嵌套的 for 循环，使用该方法针对`NSArray`常规单词对象中的每个单词测试每个名称。`caseInsensitiveCompare`

这是我的代码：

```
import <Foundation/Foundation.h>

int main(int argc, const char * argv[])
{

    @autoreleasepool {

        //Gets the sting with proper names
        NSString *propername = [NSString stringWithContentsOfFile:@"/usr/share/dict/propernames" encoding:
        NSUTF8StringEncoding error:NULL];

        //Gets the string with regularwords
        NSString *inpropername = [NSString stringWithContentsOfFile:@"/usr/share/dict/words" encoding:
                                NSUTF8StringEncoding error:NULL];

        NSArray *proper = [propername componentsSeparatedByString:@"/n"];
        NSArray *inproper = [inpropername componentsSeparatedByString:@"/n"];

        for (NSString *n in proper){
            NSLog(@"%@", n);
            for(NSString *i in inproper){
                NSLog(@"%@", i);
                if ([n caseInsensitiveCompare:i] == NSOrderedSame)
                {
                    NSLog(@"Yahooo! Got One! %@", n);
                }
            }
        }

    }
    return 0;
} 
```

它们不是以嵌套方式运行的 for 循环，而是以顺序方式运行。输出是这样的：

```
Aaron  
all the names...  
Yvonne  
a  
all the regular words....  
Zyzzogeton 
```

关于为什么嵌套 for 循环没有以嵌套方式运行的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T02:06:15.340

代码是正确的，除非您没有将文件分解成单词，因为您使用的是“/n”而不是“\n”。

这意味着每个数组只包含一个元素，该元素是一个包含所有单词的字符串。

# asp.net-mvc - MVC 3 Razor：使用其中包含类的模型从视图传递数据

> ID：11919080
> 
> 赞同：1
> 
> 时间：2012-08-12T01:41:37.483
> 
> 标签：asp.net-mvc, asp.net-mvc-3, visual-studio-2010, razor, c#-3.0

> **可能重复：**
> [复杂模型和部分视图 - MVC3 中的模型绑定问题](https://stackoverflow.com/questions/5197038/complex-models-and-partial-views-model-binding-issue-in-mvc3)

当属性位于视图中使用的模型中的类中时，您可以将数据从视图传递到控制器吗？

问题是，当提交发生时，我的模型中属于该模型中的一个类的属性似乎没有被填充。不在类中的属性会被填充。只是认为这里存在实例化问题，但看不到前进的道路。

这是模型设置：

```
namespace AppName.Models
{
    public class SuperModel
    {
        public SuperModel() {
            SubModA = new SubModelA();
        }
        public string myItem1 { get; set; }
        public SubModelA SubModA { get; set; }
    }

    public class SubModelA
    {
        public string mySubAItem1 { get; set; }
    }
} 
```

这是视图：

```
@model AppName.Models.SuperModel

@{
    ViewBag.Title = "My Page Title";
}

<h2>My Page Title:</h2>

@using (Html.BeginForm("NextController", "NextControllerFolder", new { SuperModel = Model }, FormMethod.Post))
{
    @{
        Model.myItem1 = DateTime.Now.ToShortDateString();
        Model.SubModA.mySubAItem1 = DateTime.Now.ToShortDateString();
    }
    @Html.HiddenFor(m => m.myItem1)
    @Html.HiddenFor(m => m.SubModA.mySubAItem1)

    <p>
        <button name="submit" value="Submit"><b>Continue</b></button>
    </p>
} 
```

这是控制器：

```
[HttpPost]
public ActionResult NextController(string button, SuperModel model, string returnUrl)
{
    // PROBLEM IS HERE>>>
    ///model.myItem1 has a value equal to the current date
    // model.SubModA.mySubAItem1 is null

    return(model);
} 
```

希望这个问题有意义。希望答案就在眼前！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T05:40:33.640

替换代码中的以下行

```
@Html.HiddenFor(m => m.SubModelA.mySubAItem1) 
```

有了这个

```
@Html.HiddenFor(m => m.SubModA.mySubAItem1) 
```

希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T04:30:05.343

尝试这个：

```
 @Html.HiddenFor(m => m.SubModA.mySubAItem1) 
```

将工作。

# c# - 用多个 select 语句拆分一个 sql 列，其中 value = x

> ID：11919081
> 
> 赞同：0
> 
> 时间：2012-08-12T01:41:38.047
> 
> 标签：c#, sql-server, datagridview

我的最终结果是将查询结果添加到 asp.net gridivew，c#。

我有一张桌子，上面有以下内容

```
updateID teamID empID shiftID 
```

有9个不同班次的团队

我正在尝试拆分数据库结果，以便它根据 shift 列返回值`teamID`

我不确定如何将结果合并为 9 列

```
Select shiftID as col1 from test1 where teamID = 1
Select shiftID as col2 from test1 where teamID = 2
Select shiftID as col3 from test1 where teamID = 3
Select shiftID as col4 from test1 where teamID = 4 
```

ETC

有人可以帮助提供最佳解决方案，以便我可以将结果添加到 gridview

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T01:51:04.020

所以你想基本上翻转你的桌子，以便将列作为行，反之亦然？那就是所谓的*转调*。也许您可以使用 SQL 中的一条语句获取数据，然后转置它们。也许该链接有帮助：[http ://dotnetspeaks.net/post/Pivot-or-Transpose-Rows-in-GridView-using-LINQ.aspx](http://dotnetspeaks.net/post/Pivot-or-Transpose-Rows-in-GridView-using-LINQ.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T02:16:02.963

你有两种可能性：让你的 sql 查询成为焦点：（更简单的方法） [http://blog.sqlauthority.com/2008/06/07/sql-server-pivot-and-unpivot-table-examples/](http://blog.sqlauthority.com/2008/06/07/sql-server-pivot-and-unpivot-table-examples/)

使您的数据表成为您的数据表的中心，它是代码中gridview的数据源，但野兔：（一个硬样本） [http://www.codeproject.com/Articles/46486/Pivoting-DataTable-Simplified](http://www.codeproject.com/Articles/46486/Pivoting-DataTable-Simplified)

对我来说，直接在gridview上做一个支点不是一个好主意;-)

# sql - SQL 幂等性

> ID：11919086
> 
> 赞同：3
> 
> 时间：2012-08-12T01:42:02.490
> 
> 标签：sql, sql-server-2008-r2, idempotent

我的 SQL 数据库项目中有一个部署后脚本，它注册了应该是数据库一部分的默认值。我希望这个脚本能够在不改变结果的情况下多次运行，所以如果我需要添加一点修改，我可以手动运行它。

```
INSERT INTO [UserRole] ([Name])
SELECT 'Regular'
UNION ALL
SELECT 'Admin'

INSERT INTO [UserRight] ([Name])
SELECT 'CanAccessApplicationLogs'
UNION ALL
SELECT 'CanAccessApplicationJobs'

INSERT INTO [UserRoleRight] ([UserRoleId], [UserRightId])
SELECT  [Ro].[Id], [Ri].[Id] FROM [UserRight] Ri, [UserRole] Ro
 WHERE ([Ro].[Name] = 'Admin' AND
        [Ri].[Name] = 'CanAccessApplicationLogs')
    OR ([Ro].[Name] = 'Admin' AND
        [Ri].[Name] = 'CanAccessApplicationJobs') 
```

我怀疑性能永远不会成为问题，因为这个脚本只会插入角色和权限。那么检查每一行是否存在的最干净的方法是什么，并且只插入那些不存在于表中的行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-12T02:19:57.870

将每个插入包装在 IF 语句中是可行的。不确定这是否是最干净的方式。

所以你的第一个 INSERT 会变成：

```
IF NOT EXISTS(SELECT * FROM UserRole WHERE Name = 'Regular')
BEGIN
  INSERT INTO [UserRole] ([Name])
  SELECT 'Regular'
  UNION ALL
  SELECT 'Admin'
END 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-20T13:50:22.700

MERGE 可以更清洁，并且将单独检查每一行，而不需要在每一行周围使用 IF 语句。

[http://coding.abel.nu/2012/08/idempotent-db-update-scripts/](http://coding.abel.nu/2012/08/idempotent-db-update-scripts/)有一个很好的例子

# php - AJAX 使用 php 和 javascript 连接到 db

> ID：11919091
> 
> 赞同：0
> 
> 时间：2012-08-12T01:44:47.123
> 
> 标签：php, javascript, mysql, html, ajax

我以前从未使用过 ajax，并且正在尝试完全理解这个与我想做的类似的示例。这是我关于示例代码的问题。

1.  我是否需要包含某种 ajax 标头脚本才能使用它？？？

2.  这部分在 html 文件中做了什么：

    *   `xmlhttp.open("GET","getuser.php?q="+str,true);`
    *   `xmlhttp.send();`
3.  这是我最大的问题。什么是q？是 vaule ex:1, 2,3 etc.??

    *   `$q=$_GET["q"];`

这是html文件....

```
<html>
<head>
<script type="text/javascript">
function showUser(str)
{
if (str=="")
  {
  document.getElementById("txtHint").innerHTML="";
  return;
  } 
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","getuser.php?q="+str,true);
xmlhttp.send();
}
</script>
</head>
<body>

<form>
<select name="users" onchange="showUser(this.value)">
<option value="">Select a person:</option>
<option value="1">Peter Griffin</option>
<option value="2">Lois Griffin</option>
<option value="3">Glenn Quagmire</option>
<option value="4">Joseph Swanson</option>
</select>
</form>
<br />
<div id="txtHint"><b>Person info will be listed here.</b></div>

</body>
</html> 
```

这是名为 getuser.php 的 php 文件...

```
<?php
$q=$_GET["q"];

$con = mysql_connect('localhost', 'peter', 'abc123');
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("ajax_demo", $con);

$sql="SELECT * FROM user WHERE id = '".$q."'";

$result = mysql_query($sql);

echo "<table border='1'>
<tr>
<th>Firstname</th>
<th>Lastname</th>
<th>Age</th>
<th>Hometown</th>
<th>Job</th>
</tr>";

while($row = mysql_fetch_array($result))
  {
  echo "<tr>";
  echo "<td>" . $row['FirstName'] . "</td>";
  echo "<td>" . $row['LastName'] . "</td>";
  echo "<td>" . $row['Age'] . "</td>";
  echo "<td>" . $row['Hometown'] . "</td>";
  echo "<td>" . $row['Job'] . "</td>";
  echo "</tr>";
  }
echo "</table>";

mysql_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T01:51:28.227

1.  不，这是 EMCAScript 中的标准规范。
2.  该特定代码行打开`GET`对文件的请求`getuser.php`，将 GET 参数`q`作为`str`JS 中的值传递。
3.  在那个特定的例子中，$q 被设置为 的`GET`值`q`。

简而言之，您的 JS 调用 PHP 脚本来执行自身，同时传递一个变量来（表面上）修改脚本的结果。

如果您不了解`GET`和变量，我建议您*至少*`POST`阅读有关[数组](http://php.net/manual/en/reserved.variables.get.php)[的 PHP 手册页面](http://php.net/manual/en/reserved.variables.get.php)，或者[更全面地了解](http://www.plus2net.com/php_tutorial/variables2.php)[和](http://www.plus2net.com/php_tutorial/variables2.php)[变量](http://www.plus2net.com/php_tutorial/variables2.php)。 *[`$_GET`](http://php.net/manual/en/reserved.variables.get.php)[`GET``POST`](http://www.plus2net.com/php_tutorial/variables2.php)*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T01:48:10.597

```
xmlhttp.open("GET","getuser.php?q="+str,true);
xmlhttp.send(); 
```

这将打开文件，然后将 url 发送到 getuser.php。基础知识：P

```
$q=$_GET["q"]; 
```

这是 ajax 文件发送到您的 getuser.php 文件的内容。这不应该是一个“安全”变量，因为 get 很容易被破解。如果需要，请尝试使用 post。

希望我有所帮助:)*

# django-south - django南排列

> ID：11919092
> 
> 赞同：0
> 
> 时间：2012-08-12T01:44:54.130
> 
> 标签：django-south

我正在使用 South 来处理我的应用程序的迁移。一切正常，但是我注意到当我添加一个新列时，它在最后。有没有办法告诉南把柱子放在一个特定的位置？

现在我正在手动执行此操作，看起来相当麻烦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T15:01:25.650

并非所有数据库引擎都支持在表格中间添加一列，所以我猜 South 决定不使用这个选项，只在最后添加新列。这不应该对您的应用程序或其性能产生任何影响，因此他们的决定是合乎逻辑且可以接受的。

如果您希望您的桌子看起来“有序”，您需要自己加倍努力。如果您使用的是 PostgreSQL，您可以在[此处](http://wiki.postgresql.org/wiki/Alter_column_position)的“*添加列和移动数据*”下查看他们的“hack”以在中间定位列。对于 MySQL，您可以编辑添加`AFTER someExistingColumn`到`ALTER`脚本的迁移 SQL 文件。

```
ALTER TABLE someTable ADD newColumn VARCHAR(255) AFTER someExistingColumn 
```

# php - Mysql IF 两列相等，如果它们都大于一

> ID：11919094
> 
> 赞同：0
> 
> 时间：2012-08-12T01:45:28.990
> 
> 标签：php, mysql, if-statement, where

我有一个将用户拉入列表的查询。它列出了您可以“战斗”的人，您不应该与自己战斗，或与“氏族”中的某个人战斗。

```
 $select = mysql_query("SELECT id,username,clan FROM `users` WHERE username != '".$user['username']."' AND IF clan>0 THEN clan != ".$user['clan'].""); 
```

此查询“尝试”查看所选行的氏族是否 > 0“意味着他们在一个氏族中”，然后它应该查看他们是否与用户在同一个氏族中。如果是这样，请跳过该行。此外，如果您不在部落中，那么您应该能够与不在部落中的其他人战斗（0），这毫无价值。

*   打不过自己
*   或您氏族中的任何人

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T01:51:27.803

尝试这个：

```
SELECT id,username,clan 
FROM `users` 
WHERE username != '".$user['username']."' 
AND (clan = 0 OR clan != ".$user['clan'].")" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T01:56:07.113

```
SELECT id,username,clan 
FROM `users` 
WHERE username != '".$user['username']."' 
  AND (
    (clan != ".$user['clan'].") OR
    (clan = 0 AND ".$user['clan']." = 0)
  ) 
```

如果氏族无法与无氏族战斗，则只需在 OR 的第一部分添加对 clann=0 的检查，依此类推。

# php - 新上传图片的文件权限错误

> ID：11919097
> 
> 赞同：0
> 
> 时间：2012-08-12T01:47:19.603
> 
> 标签：php, file-upload, permissions

当我上传图像时，我可以在浏览器中查看它，但是当我尝试从 Windows 资源管理器中查看它时，我收到一个文件权限错误。

```
$valid_formats = array("jpg", "png", "gif", "bmp","jpeg");
if(isset($_POST) and $_SERVER['REQUEST_METHOD'] == "POST") {
$name = $_FILES['photoimg']['name'];
$size = $_FILES['photoimg']['size'];
if(strlen($name)) {
    list($txt, $ext) = explode(".", $name);
    if(in_array($ext,$valid_formats)) {
        if($size<(1024*1024)) {
            $actual_image_name = time().".".$ext;
            $tmp = $_FILES['photoimg']['tmp_name'];
            if(move_uploaded_file($tmp, $path.$actual_image_name)) {
                    echo "<img src='uploads/".$actual_image_name."' class='preview' width='306px'>";
            }
            else {
                echo "failed";
            }
        }
        else {
            echo "Image file size max 1 MB";
        }
    }
    else {
        echo "Invalid file format..";
    }
}
else {
    echo "Please select image..!";
    exit;
}
}
 ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T02:15:47.410

你可以试试这个：

```
if(move_uploaded_file($tmp, $path.$actual_image_name)) {
    chmod($path.$actual_image_name, 0666); # set file to read-write for everybody
                    echo "<img src='uploads/".$actual_image_name."' class='preview' width='306px'>";
            } 
```

# facebook - 我的 OpenGraph 操作未显示在用户的供稿或活动日志中

> ID：11919101
> 
> 赞同：0
> 
> 时间：2012-08-12T01:48:40.040
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

我试图了解 Facebook 的 Opengraph API。

我在哪里：

*   已创建操作和对象类型
*   行动已获批准
*   我有 publish_actions 范围，并且该操作已连接到网站（例如：[http](http://tracker.thankyouwater.org/code/1400) ://tracker.thankyouwater.org/code/1400 ）
*   我可以通过 URL 查看代表动作的新闻项目（例如： http: [//www.facebook.com/simonrobb/activity/10151135600251211](http://www.facebook.com/simonrobb/activity/10151135600251211)）。如果我以其他用户身份登录，我也可以查看此新闻。

但是，该操作不会显示在我的提要/时间线或我的活动日志中 - 据我所知，查看此操作的唯一方法是通过上面显示的 URL。

我在这里疯了吗？为什么该操作甚至没有显示在我的活动日志中？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T00:10:22.093

问题已解决 - 我发现我的问题是 opengraph 排序规则似乎没有出现在时间线前的 Facebook 上。我升级到时间线，它运行良好。

# android - android - 创建虚拟摄像头或覆盖真实的摄像头流？（/dev/msm_camera/frame0，v4l2loopback）？

> ID：11919106
> 
> 赞同：19
> 
> 时间：2012-08-12T01:49:28.133
> 
> 标签：android, camera

我目前正在研究一个关于图像和视频传输延迟的项目。

我是否有能力（假设为 root）创建虚拟相机或用相同的图片或原始视频流覆盖真实的 cam 帧缓冲区？例如，我想在 Skype 中使用这个摄像头。

我通过v4l2loopback之类的东西来操纵图片......我测试了这样的东西，但这不起作用......

```
ln -s /sdcard/image.jpg /dev/msm_camera/msm_camera0
dd if=/dev/graphics/fb0 of=/dev/msm_camera/frame0
cat /dev/graphics/fb0 > /dev/msm_camera/frame0 
```

这可能吗？我正在使用带有 ICS 的 HTC Desire HD

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-03-11T17:10:36.343

我首先要说我只能给你一个领先的开始。您可以使用 introspy 来调查操作系统如何使用相机。你可以利用它并制作一个钩子，可能会替换原始流。

内测链接：

[https://github.com/iSECPartners/Introspy-Android/blob/master/README.md](https://github.com/iSECPartners/Introspy-Android/blob/master/README.md)

# cordova - Phonegap 1.4.1 和 Cordova 2.0 并排安装了吗？

> ID：11919107
> 
> 赞同：0
> 
> 时间：2012-08-12T01:49:38.467
> 
> 标签：cordova

嘿，Phonegap 的粉丝们。有谁知道我是否可以在 Cordova 2.0 旁边安装 Phonegap 1.4.1（我会说这是最后一个稳定的 Phonegap）？

我有一些使用 1.4.1 的应用程序，我还不想使用新版本，但想同时使用 2.0 开始开发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T02:37:50.427

要回答我自己的问题，是的，是的，您可以同时安装两者。

# javascript - HTML“宽度”属性在不同的浏览器中产生不同的结果？

> ID：11919108
> 
> 赞同：1
> 
> 时间：2012-08-12T01:49:45.240
> 
> 标签：javascript, html, css

我希望这不是我需要求助于浏览器检测的情况。

基本上我有一个带有大表格的[页面](http://hoop-data.com/players/)，所以我创建了一个额外的标题，其中包含一个“位置：固定”属性，当您向下滚动页面时（使用一些非常简单的 JS 代码）会出现（并保持可见）。

但是，为了使该标题的列与较大表的列正确对齐，我一直在手动设置每列的“宽度”属性（对于两个表），因为我的固定标题单元格不是t 与我的正常表格标题单元格完全相同，因为缺少额外的背景图像。（如果您只是通过上面的链接查看页面本身，所有这些可能更容易理解。）

问题是一组宽度适用于 Firefox，而另一组适用于 Safari/Chrome，但都不适用于 Opera。我猜我的 CSS 可能不是处理这种情况的最佳选择，但我不知道如何让它变得更好。任何人都可以看看（也许使用 Firebug 等）并让我知道是否有更好的方法来处理这个问题，这将使每个浏览器中的所有内容都对齐？

更新：通过解决 Firebug 中的问题，我缩小了原因。首先介绍一点背景。我没有为我的“浮动”标题创建一个完全独立的表格类，而是给了它一个特殊的 ID（“浮动”）并允许它从我的普通表格中继承大部分 CSS，除非我改变了背景图像为相同大小的透明图像（以保留间距）并设置“显示：无”。我的 JS，我在这里粘贴：

```
$(window).scroll(function () {
     var header = document.getElementById("floater");
     if (($(window).scrollTop()) > ($(document).height() / 142)) {
        header.style.display = "block";       
     } else {
        header.style.display = "none";

 }
}); 
```

如果您向下滚动到页面下方的某个点，则会导致“显示”更改为“阻止”。

我发现如果我加载页面，并且在我尝试滚动之前，使用 Firebug 禁用“显示：无”样式设置，浮动表格的单元格是完美间隔的。但是，一旦我开始向下滚动页面并且 JS 启动，列宽就会改变！但那时，如果我进入 Firebug 并在 CSS 面板中禁用“display:block”，它会修复对齐。

`header.style.display = "block";`不做我想做的事也不行；而不是仅仅反转“显示：无”CSS（这是我想要的），它以某种方式重置列宽。同上`header.style.display = "inline"`。我可以使用另一个 JS 语句来简单地禁用“显示：无”吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T03:29:29.597

您是否尝试过先应用良好的 CSS 重置样式？

例如[http://meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)

问题是每个浏览器都有一组“默认”样式。如果您不更改所有样式，则可能会使用任何给定浏览器的某些默认样式。重置后，所有浏览器都从同一个地方开始。

如果你希望你的 CSS 样式是跨浏览器的，你必须使用重置。

# php - CakePHP (v1.1) - 如何检索模型列表？

> ID：11919114
> 
> 赞同：0
> 
> 时间：2012-08-12T01:51:24.903
> 
> 标签：php, cakephp, model

有谁知道是否有一种简单的方法可以在 cakePHP v1.1 中检索模型列表？例如，如果应用程序有模型 Student、Teacher 和 Grade，我正在寻找一种方法来获取这些模型的数组。有什么建议么？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T23:05:09.310

你可以在控制器中试试这个：

```
// Teachercontroller for example
$this->Teacher->hasMany; 
```

这将返回所有相关的模型。与*belongsTo*等相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T19:10:03.580

看起来最好的方法是简单地检查模型目录中存在哪些文件并检查它们是否包含类。我决定这是最好的方法，因为这实际上是 loadModel() 函数本身所做的。loadModel() 函数的代码可以在[这里](http://api11.cakephp.org/basics_8php-source.html#l00206)找到。我最终不需要获取所有模型列表的程序，但如果有人确实需要这样的列表，希望这个答案可以引导人们朝着正确的方向前进。

# html - 在 foreach 循环中构建 XSLT 字符串（变量）

> ID：11919117
> 
> 赞同：15
> 
> 时间：2012-08-12T01:51:34.803
> 
> 标签：html, xml, xslt, variables

我面临的问题似乎很简单，但作为**XSL**的新手- 我还没有找到合适的解决方案。我想要做的是通过连接**foreach**元素循环的结果来构建一个字符串，稍后我可以将其用作 HTML 元素的属性的值。

鉴于：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<catalog>
    <cd>
        <country>UK</country>
        <company>CBS Records</company>
    </cd>
    <cd>
        <country>USA</country>
        <company>RCA</company>
    </cd>
    <cd>
        <country>UK</country>
        <company>Virgin records</company>
    </cd>
</catalog> 
```

期望的输出：`CBS;RCA;Virgin records`

我需要一个有效的**XSLT**代码部分，以上述方式执行此转换。我相信我需要一个**xsl 变量**来保存连接`<company>`和分隔符的结果`;`。如何才能做到这一点？谢谢你。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-12T02:49:31.717

我不相信您可以使用 XSL 变量进行连接，因为一旦设置了变量值，[就无法更改](http://www.w3schools.com/xsl/el_variable.asp)。相反，我认为你想要类似的东西：

```
<xsl:for-each select="catalog/cd">
    <xsl:choose>
        <xsl:when test="position() = 1">
            <xsl:value-of select="country"/>
        </xsl:when>
        <xsl:otherwise>
            ;<xsl:value-of select="country"/>
        </xsl:otherwise>
    </xsl:choose>
</xsl:for-each> 
```

这对你有意义吗？

编辑：刚刚意识到我可能误读了您打算如何使用该变量。我在上面发布的代码片段可以包装在一个变量元素中供以后使用，如果这就是你的意思：

```
<xsl:variable name="VariableName">
    <xsl:for-each select="catalog/cd">
        <xsl:choose>
            <xsl:when test="position() = 1">
                <xsl:value-of select="country"/>
            </xsl:when>
            <xsl:otherwise>
                ;<xsl:value-of select="country"/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:for-each>
</xsl:variable> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-12T03:45:11.033

如果您可以使用 XSLT 2.0，那么以下任一方法都可以：

使用[`string-join()`](http://www.xsltfunctions.com/xsl/fn_string-join.html)功能：

```
<xsl:variable name="companies" select="string-join(catalog/cd/company, ';')" /> 
```

`@separator`与 一起使用[`xsl:value-of`](http://www.w3.org/TR/xslt20/#value-of)：

```
<xsl:variable name="companies" >
   <xsl:value-of select="catalog/cd/company" separator=";" />
</xsl:variable> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-12T03:30:50.423

**这是一个简单、真正的 XSLT 解决方案**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="company">
  <xsl:value-of select="."/>
  <xsl:if test="following::company">;</xsl:if>
 </xsl:template>
 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<catalog>
    <cd>
        <country>UK</country>
        <company>CBS Records</company>
    </cd>
    <cd>
        <country>USA</country>
        <company>RCA</company>
    </cd>
    <cd>
        <country>UK</country>
        <company>Virgin records</company>
    </cd>
</catalog> 
```

**产生了想要的正确结果（所有公司连接在一起并由 a 分隔`;`）**：

```
CBS Records;RCA;Virgin records 
```

# django - 在所有应用程序中替换 django.core.mail.send_mail()？

> ID：11919118
> 
> 赞同：1
> 
> 时间：2012-08-12T01:52:06.680
> 
> 标签：django, django-mailer

`django.core.mail.send_mail()`是否可以用自定义替换对整个项目（包括我的 INSTALLED_APPS 中的第三方项目）的调用`send_mail()`？

我正在将 django-mailer 与我的项目集成，它提供`send_mail()`了 `django.core.mail.send_mail()`. 由于两者都使用相同的函数签名，文档建议在您通常导入 Django 提供的版本的地方导入 django-mailer 版本，如下所示：

```
# favour django-mailer but fall back to django.core.mail
from django.conf import settings

if "mailer" in settings.INSTALLED_APPS:
    from mailer import send_mail
else:
    from django.core.mail import send_mail 
```

这适用于我自己的应用程序代码，但我也想在使用`django.core.mail.send_mail()`. 现在，当这些应用程序尝试发送电子邮件时，我遇到了错误。

Django 是否提供任何类型的钩子来替换`django.core.mail.send_mail()`，或者是否有解决方法？现在我正在考虑对每个发送电子邮件的第三方项目进行分叉并添加上面的条件导入代码，但这显然并不理想。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T02:32:13.487

Django 具有[电子邮件后端](https://docs.djangoproject.com/en/1.4/topics/email/#email-backends)，可让您覆盖`django.core.mail`发送电子邮件的方式，而不是通过 SMTP。有一些可以让你将它们保存在本地等等；`django-mailer`还包括一个（[如 usage.txt 中所述](https://github.com/pinax/django-mailer/blob/master/docs/usage.txt#L72)）来做你想做的事。

# cocoa - Cocoa：如何处理网页中的无效 utf-8 字节

> ID：11919119
> 
> 赞同：2
> 
> 时间：2012-08-12T01:52:20.167
> 
> 标签：cocoa, url, unicode, encoding, nsstring

我正在尝试使用`stringWithContentsOfURL:encoding:error:`using获取网页的内容`NSUTF8StringEncoding`。问题是网页的 utf-8 字节无效，因此该方法返回 nil。我将如何处理无效的 utf-8 字节？

我尝试过的事情。

*   尝试使用`NSString.h`和中的每个编码`CFStringEncodingExt.h`
*   使用 NSISOLatin1StringEncoding，然后删除无效字节然后执行

    `[NSString stringWithCString:[str cStringUsingEncoding:NSISOLatin1StringEncoding] encoding:NSUTF8StringEncoding];`

*   `stringWithContentsOfURL:usedEncoding:error:`这导致日文 Unicode 字符乱码。

我正在使用的网页`http://vgmdb.net/album/32234`

使用`iconv` 无效字符似乎`EF BF BD`是十六进制

```
`iconv -c -f UTF8 -t UTF8 32234.html` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T02:53:27.293

您确定这是用于网页的最佳编码吗？也许您应该改用：

```
+ (id)stringWithContentsOfURL:(NSURL *)url usedEncoding:(NSStringEncoding *)enc error:(NSError **)error 
```

此方法确定为您使用的最佳编码并将其返回为`enc`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T21:43:50.340

我找到了一种使用 iconv api 丢弃无效 unicode 字符的方法。

我`NSISOLatin1StringEncoding`以前下载的网址。我将其转换为在其上`NSData`运行`cleanUTF8:data`，然后使用`NSUTF8StringEncoding`. 这是我能找到的让日文和其他 unicode 字符正确显示的唯一方法。

```
- (NSData *)cleanUTF8:(NSData *)data {
// Make sure its utf-8
iconv_t ic= iconv_open("UTF-8", "UTF-8");
// Remove invaild characters
int one = 1;
iconvctl(ic, ICONV_SET_DISCARD_ILSEQ, &one);

size_t inBytes, outBytes;
inBytes = outBytes = data.length;
char *inbuf  = (char*)data.bytes;
char *outbuf = (char*) malloc(sizeof(char) * data.length);
char *outptr = outbuf;

if (iconv(ic, &inbuf, &inBytes, &outptr, &outBytes) == (size_t) - 1) {
    assert(false);
    return nil;
}

NSData *result = [NSData dataWithBytes:outbuf length:data.length - outBytes];
iconv_close(ic);
free(outbuf);
return result; 
```

}

# html - 如何识别是否是点击或单击列表视图的 iteminvoked 事件

> ID：11919120
> 
> 赞同：3
> 
> 时间：2012-08-12T01:52:32.890
> 
> 标签：html, css, windows-8

我正在使用 html5 和 javascript 语言开发 Metro 风格的应用程序。请找到我的问题如下：

我在下面尝试运行 css3 转换的列表视图的 iteminvoked 事件。我不想在用户单击鼠标时运行动画，因为我已经有了用于鼠标悬停场景的 css3 声明性动画 (:hover)。我的问题是如何确定是点击还是鼠标点击。

```
 itemInvoked: function (args) {
        if (appView.value === appViewState.snapped) {
            // If the page is snapped, the user invoked a group.
            var group = Data.groups.getAt(args.detail.itemIndex);
            nav.navigate("/pages/groupDetail/groupDetail.html", { groupKey: group.key });
        } else {

            var winitem = args.srcElement.querySelector(".win-item");
            var actionicon = winitem.querySelector(".item-image");
            var actiontitle = winitem.querySelector(".item-title");
            var showTransition = WinJS.UI.executeTransition(
              args.srcElement,
              [{
                  property: "border-color",
                  delay: 0,
                  duration: 500,
                  timing: "linear",
                  to: "#333"
              },
              {
                  property: "z-index",
                  delay: 0,
                  duration: 500,
                  timing: "linear",
                  to: "999"
              },
              {
                  property: "transform",
                  delay: 0,
                  duration: 500,
                  timing: "linear",
                  to: "scale(1.1)"
              }
              ]
          ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T10:50:54.660

作为一般规则，on 不应该区分鼠标和触摸，除非它明显不同。

还应该注意的是，元素上的 :hover 状态仍然存在用于触摸，但它只是处于保持状态 - 当您将手指放在元素上时，您会看到悬停效果。

您应该查看自定义列表视图播放非调用的默认动画；虽然也许那是不可能的。（我说的是项目上似乎发生的默认比例）

但是，[MSPointerEvent](http://msdn.microsoft.com/en-us/library/windows/apps/hh466130.aspx)有一个 pointerType 属性，可以让您区分笔、鼠标和触摸。

# php - 如何在文件内容中搜索单词？

> ID：11919124
> 
> 赞同：1
> 
> 时间：2012-08-12T01:54:40.417
> 
> 标签：php, url, search

我是 php 新手，只是遇到了一些甚至可能很简单的事情......无论如何，如果“url”中的值中有一个单词“Success”，我想做一些操作：

`$c = file_get_content($url)`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T01:57:04.110

*始终*搜索[PHP 文档](http://php.net/manual/en/function.strpos.php)：

```
if (strpos($c, "string") !== false) {
  // "string" is in $c
} else {
  // "string" isn't in $c
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T02:45:41.417

您可以使用 stripos() 进行不区分大小写的搜索，使用 strpos() 进行区分大小写的搜索。

# java - log4j.properties 在可执行 jar 中不起作用

> ID：11919126
> 
> 赞同：7
> 
> 时间：2012-08-12T01:55:31.243
> 
> 标签：java, eclipse, log4j

我正在使用 eclipse，我已将 log4j.properties 放在项目目录中，我通过调用来访问它

```
PropertyConfigurator.configure("log4j.properties"); 
```

这在 Eclipse 中运行良好，但是当我将项目提取为可执行 Jar 并在另一台机器上运行时，我收到一条错误消息，提示它找不到 log4j.properties。解决方案是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-12T02:10:03.500

### 发生了什么

`PropertyConfigurator.configure(String)`从文件系统加载和读取文件。您的属性文件位于项目目录中，当您从 Eclipse 运行时，该目录将是“当前工作目录”。

一旦你将所有东西打包到一个 jar 中并部署它 - 只有类文件和“资源”被放置到 jar 中。资源是源代码树下的非 java 文件。

将 jar 文件复制到另一台机器后，属性文件不再存在。

### 解决方案

由于您的属性文件不是资源，因此您需要单独移动它：将它的副本放在文件系统上（以便可以编辑、更新等），在目标主机的当前工作目录中/运行环境。

考虑将它放在文件系统的某个公共区域：例如 /tmp/log4j.properties 或 ~/.myproject/log4j.properties。必须相应地调整您的代码以查找它。

### 选择

将属性文件复制到源树的根目录（/src，默认情况下）。然后应该将其打包在 jar 中。将 jar 文件中的数据作为资源加载：`PropertyConfigurator.configure(getClass().getResourceAsStream())`.

在这种情况下，您不能简单地编辑文件来调整您的日志记录首选项。

很多时候将编写逻辑来确定属性文件是否在文件系统上，如果没有，则通过此机制从 jar 加载默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-20T23:38:53.313

```
PropertyConfigurator.configure(ABC.class.getResourceAsStream("log4j.properties")) 
```

工作正常，但基本上你需要将`Log4j`属性文件放在源代码文件夹中（Java类旁边），或者你可以尝试放在外面并在`getResourceAsStream()`方法中给出正确的路径

# cakephp - CakePHP HABTM 数据未保存

> ID：11919130
> 
> 赞同：3
> 
> 时间：2012-08-12T01:55:54.400
> 
> 标签：cakephp, associations, has-and-belongs-to-many

我有一个 HABTM 关联，​​无法将数据保存到连接表中。

这是我的控制器：

```
 public function create($id)
    {   

     if (!is_numeric($id)) throw new BadMethodCallException('I need an ID');
     $this->Invoice->id = $id;
     if (!$this->Invoice->exists()) throw new NotFoundException('Invalid ID');

    $this->set('invoice_id',$id);

    $names = $this->Invoice->find('list',array(
    'fields'=>array('template_id'),
    'conditions'=>array('id'=>$id)));

    $fields = $this->Field->find('all', array(
     'conditions'=>array(
     'template_id'=>$names)));

    $this->set(compact('fields'));

    $this->set('name',$names);
    $this->Invoice->create();
    if(empty($this->data)){
        $this->data= $this->Field->read($fields);
    } 
    else{
        if(($this->Invoice->saveAll($this->data)))
        {       
            $this->Session->setFlash('The field has been updated');
            $this->redirect(array('controller'=>'invoices', 'action'=>'index'));

        }
        }
} 
```

这是表格：

```
<?php echo $this->Form->create('Invoice'); ?>
    <?php foreach ($fields as $field): ?>
    <?php echo debug($field);?>
    <?php echo $this->Form->Input($field['Field']['name'], array('default' =>$field['Field']['default_value'])); ?>
    <?php endforeach ;?>
    <?php echo $this->Form->End('Submit');?> 
```

当我调试时，`$field`我得到这个：

模板

```
Employees Create New Pay Invoice Invoices Sent
\app\View\Invoices\create.ctp (line 21)
array(
    'Field' => array(
        'id' => '9',
        'name' => 'amount',
        'description' => 'amount of invoice',
        'field_type' => 'int',
        'field_range' => '10',
        'active' => true,
        'template_id' => '3',
        'default_value' => ''
    ),
    'Template' => array(
        'id' => '3',
        'name' => 'MGDKiallaConsulting',
        'description' => 'The invoice template for MGD Kialla Pty Ltd Consulting Fees',
        'account_id' => '3',
        'active' => '1'
    ),
    'Invoice' => array(
        (int) 0 => array(
            'id' => '1',
            'active' => true,
            'sender_id' => '2',
            'receiver_id' => '3',
            'template_id' => '1',
            'created' => '2012-08-05 00:00:00',
            'FieldsInvoice' => array(
                'id' => '1',
                'field_id' => '9',
                'invoice_id' => '1',
                'entered_value' => '1000.00'
            )
        ),
        (int) 1 => array(
            'id' => '2',
            'active' => true,
            'sender_id' => '2',
            'receiver_id' => '4',
            'template_id' => '1',
            'created' => '2012-08-05 00:00:00',
            'FieldsInvoice' => array(
                'id' => '2',
                'field_id' => '9',
                'invoice_id' => '2',
                'entered_value' => '2000.00'
            )
        )
    )
)
Amount
\app\View\Invoices\create.ctp (line 21)
array(
    'Field' => array(
        'id' => '10',
        'name' => 'description',
        'description' => 'description of invoice charges',
        'field_type' => 'text',
        'field_range' => null,
        'active' => true,
        'template_id' => '3',
        'default_value' => ''
    ),
    'Template' => array(
        'id' => '3',
        'name' => 'MGDKiallaConsulting',
        'description' => 'The invoice template for MGD Kialla Pty Ltd Consulting Fees',
        'account_id' => '3',
        'active' => '1'
    ),
    'Invoice' => array()
)
Description
\app\View\Invoices\create.ctp (line 21)
array(
    'Field' => array(
        'id' => '11',
        'name' => 'totalacctowing',
        'description' => 'total account amount owing',
        'field_type' => 'int',
        'field_range' => null,
        'active' => true,
        'template_id' => '3',
        'default_value' => ''
    ),
    'Template' => array(
        'id' => '3',
        'name' => 'MGDKiallaConsulting',
        'description' => 'The invoice template for MGD Kialla Pty Ltd Consulting Fees',
        'account_id' => '3',
        'active' => '1'
    ),
    'Invoice' => array()
)
Totalacctowing
\app\View\Invoices\create.ctp (line 21)
array(
    'Field' => array(
        'id' => '12',
        'name' => 'pmtinfo',
        'description' => 'the payment information',
        'field_type' => 'text',
        'field_range' => null,
        'active' => true,
        'template_id' => '3',
        'default_value' => 'hi'
    ),
    'Template' => array(
        'id' => '3',
        'name' => 'MGDKiallaConsulting',
        'description' => 'The invoice template for MGD Kialla Pty Ltd Consulting Fees',
        'account_id' => '3',
        'active' => '1'
    ),
    'Invoice' => array()
) 
```

有一个`fields`表，其中包含 -

```
id, name, default_value, template_id, active 
```

* * *

有`invoices`一张表，其中包含 -

id、sender_id、receiver_id、template_id、活动

有一张`fields_invoices`桌子，里面有 -`id, invoice_id, field_id, entered_value`

从函数和视图中，我需要在表单中保存 invoice_id、field_id 和输入的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T03:11:02.820

这是否也不能通过`$this->Invoice->saveAll(..),`使用以下方法来完成：

```
if(($this->Invoice->saveAssociated($this->data, array('deep'=> true))))

    {       
        $this->Session->setFlash('The field has been updated');
        $this->redirect(array('controller'=>'invoices', 'action'=>'index'));

    } 
```

有关[saveAssociated](http://book.cakephp.org/2.0/en/models/saving-your-data.html#model-saveassociated-array-data-null-array-options-array)的信息，来自公认的令人困惑的文档。

# asp.net - Asp.net MVC 使用 AJAX 不刷新页面

> ID：11919133
> 
> 赞同：1
> 
> 时间：2012-08-12T01:56:13.090
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4

离开我的 WPF 背景后，我正在学习 Asp.Net MVC。我基本上想单击一个按钮并更新我的模型而不刷新页面。我假设我可以以某种方式使用 AJAX 执行以下操作。

`<input class="WelcomeButton" type="button" onclick="location.href='@Url.Action("SetGameType", "Welcome", new { gameType = GameTypes.Expert })'"/>`

任何帮助都会很棒。

这是我看完Gent's Link后的进步

```
<input class="WelcomeButton" id="NoviceButton" type="button" style="left: 157px; top: 442px;"/>

$("#NoviceButton").click(function(){
    $.ajax({
        url: "@Url.Action("TestMethod", "Welcome")",
        type: "post"
    });
}); 
```

我有一个提交按钮，但没有表单中的按钮...无论哪种方式，上述方法都不适用于该 url 或这个`url: "\Welcome\TestMethod",`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T02:48:06.677

是的，如果您想发出 AJAX 请求，您可能想使用 javascript 框架。ASP.NET MVC 附带 JQuery，因此本示例假定您已准备好使用 JQuery。

```
<button id="MyButton" />

<script type="text/javascript">
    // This will bind a javascript event handler to the button(s) identified
    // by the CSS selector #MyButton.
    //
    // You could also use the onclick event in the <input> element to 
    // say, call a javascript function... but this couples the HTML to
    // the Javascript logic in a way that is less maintainable as things
    // get more complex.
    $("#MyButton").click(function () {

        // $ is a global reference to JQuery. This instantiates and executes
        // a JQuery request using the browsers native request object (different
        // browsers do this slightly differently, this is why you need a 
        // framework like JQuery to write Javascript productively)
        $.ajax(

            // This is the URL back to an ASP.NET controller\action that will handle the event.
            url: "{controller}/{action}",

                            // This is a callback function that will execute when the round trip completes.
            success: function (response) {
                alert("server response: " + response);
            }
        );
    });
</script> 
```

欢迎来到网络编程的世界。[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T10:21:22.007

看看[knockoutJS](http://knockoutjs.com/)，它的 MVVM 设计模式应该从您的 WPF 经验中熟悉。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T02:04:43.577

看起来您正在尝试做的是在不丢失当前页面状态的情况下调用服务器。如果是这样的话，而不是让您的 onclick 击中一个 URL，而是调用一个 javascript 方法，该方法将执行 ajax 发布。我建议阅读这个问题：[jQuery Ajax POST example with PHP](https://stackoverflow.com/questions/5004233/jquery-ajax-post-example)

# c#-4.0 - 将文件发布到远程 PC C#

> ID：11919140
> 
> 赞同：1
> 
> 时间：2012-08-12T01:57:38.303
> 
> 标签：c#-4.0, file-upload

我需要将文本文件发布到远程 PC。我知道一种方法是在远程 PC 上设置 ftp 服务器，但我想将远程 PC 的驱动器映射到我的计算机，然后使用 C# 将文件发布到那里。换句话说，我想知道如何与我的计算机共享远程 PC 上的文件夹，以便我可以使用 C# 将文件发布到那里。

我想知道网络驱动映射是怎么做的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T02:01:44.610

*   打开远程桌面
*   单击选项（窗口左下角）
*   转到本地资源选项卡
*   在“本地设备和资源”（页面底部）下，单击“更多”。

在这里，您可以为远程会话映射任何本地驱动器，当您连接时，它们将出现在远程计算机的“我的电脑”中。

**更新**

您只需在远程机器上配置一个网络共享，您的 C# 代码就可以写入该文件夹。

你的路径看起来像`\\ComputerName\PublicShare\folder\structure\you\want`

或者，您可以拥有一个完全成熟的客户端-服务器系统，其中您有一个客户端在远程机器上运行，连接到您机器上的服务器实例，您的“服务器”通过您的 API 将文件的内容发布到客户端，并且客户端决定（使用其配置）将文件写入何处。

使用哪一个，取决于您的要求。网络共享简单且易于设置。客户端-服务器系统包含大量代码，但足够灵活，具有配置和安全性，并且可以扩展以允许通过 Internet 共享文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T02:15:25.160

您不需要映射驱动器。

您可以`\\ComputerName\ShareName\Subfolder\File.ext`像编写任何其他文件一样将文件写入。

# ember.js - 基本的 Ember.js 路由和数据加载

> ID：11919142
> 
> 赞同：3
> 
> 时间：2012-08-12T01:58:20.600
> 
> 标签：ember.js, ember-old-router

在不断变化的 Ember.js 世界中，我正在寻求一些帮助来启动和运行一个简单的应用程序。

我正在尝试通过带有 Ember.js 的 API 通过 JSON 加载数据的一些基本框架，但无法让数据出现。代码可以在这里找到：

```
var App = Ember.Application.create();

App.ApplicationController = Ember.Controller.extend();
App.ApplicationView = Ember.View.extend({
    templateName: 'application'
});

App.Movie = Ember.Object.extend({
    title: null,
    rating: null,
    release_date: null,
    poster_image: null
});

App.MoviesView = Ember.View.extend({
    templateName: 'movie-list'
});

App.moviesController = Ember.ArrayController.create({
    content: [],
    init: function(){
        var me = this;
        $.getJSON('/trailers/api/movies',function(data){
            me.set('content', []);
            $(data.movies).each(function(index,value){
                var t = App.Movie.create({
                    title: value.title,
                    rating: value.rating,
                    release_date: value.release_date,
                    poster_image: value.poster_image
                });
                me.pushObject(t);
            })
        });
    }
});

App.router = Ember.Router.create({
    enableLogging: true,
    root: Ember.Route.extend({
        index: Ember.Route.extend({
            route: '/',
            redirectsTo: 'movies'
        }),
        movies: Ember.Route.extend({
            route: '/movies',
            connectOutlets: function(router) {
              return router.get('applicationController').connectOutlet({
                viewClass: App.MoviesView,
                controller: App.moviesController
              });
            }
        })
    })
});

App.initialize(App.router); 
```

```
<script type="text/x-handlebars" data-template-name="application">
  <h1>Application</h1>
  {{outlet}}
</script>

<script type="text/x-handlebars" data-template-name="movie-list">
  <h2>Movie List</h2>
  <ul>
  {{#each App.movieController}}
    <li><a {{action showMovie context="movie" href=true}}>{{title}}</a></li>
  {{/each}}
  </ul>
</script> 
```

[http://jsfiddle.net/qmZrT/](http://jsfiddle.net/qmZrT/)

模板加载正确，因为我可以看到“应用程序”和“电影列表”标题，但无序列表没有填充数据。

我在控制台中没有收到任何错误，正确返回了 XML 请求，如果我键入 App.movi​​esController.content，我会得到一个“类”数组，其中包含来自我的 API 的数据。

任何人都可以提供任何想法或指导吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-12T05:59:05.973

你的脚本有一些问题

1.  加载库的**顺序**：Ember 依赖于 Handlebars，因此*必须在*Ember 之前加载它。我已经改变了顺序。
2.  助手已更改以`{{action}}`支持多种上下文：阅读[**此**](https://github.com/emberjs/ember.js/commit/83b7a61a892e55423cf1e66f606b13435bcab8f0)。此外，您正在尝试迭代的实例，`moviesController`但由于您正在使用`Router`，您应该简单地迭代`controller`注入`moviesController`您的实例`connectOutlets`。
3.  由于显而易见的原因，您的 AJAX 调用将永远无法在 JSFiddle 上运行：您指向的 URL 在您的环境中，而从 JSFiddle 您将无法访问它。我已手动将数据添加到您的集合中，以便您看到正在运行的内容。

这是您的代码的修改版本：[**JSFiddle Demo**](http://jsfiddle.net/schawaska/qAPVP/)

**编辑**：

与问题中所述不同，您*确实*在控制台中遇到错误：

> 未捕获的错误：<.ApplicationView:ember158> - 找不到模板“应用程序”。

这个断言帮助我找到了添加脚本（车把和余烬）的顺序问题，因为模板名称是正确的，这意味着它与视图中指示的名称匹配，因此问题必须出在其他地方。我在 JSFiddle 的“管理资源”选项卡上注意到，您在 Handlebars 之前加载了 Ember，这有很大的不同。

# php - 如何在 ORDER BY ABS(

> ID：11919149
> 
> 赞同：1
> 
> 时间：2012-08-12T02:00:55.193
> 
> 标签：php, sql, arrays, sql-order-by, ranking

目前我有一个 SQL 查询，它查找可接受的匹配项，然后使用以下方法对它们进行排序：

`ORDER BY ABS (itemranking - $rating)`

是否可以在处理查询时以某种方式修改“项目排名”，以便可以添加如下条件：

`if (category == '$category')`

项目的 ABS 减 1；

那么`ORDER BY ABS`？

我不确定这对于知道正确代码的人来说是否是一个快速的答案，或者它是否是一个更大的概念性“我如何才能实现这个结果”类型的问题。

无论哪种方式，了解一些上下文可能会有所帮助。目标是对一堆提交进行排序，使它们与价值“评级”相匹配，同时也为用户正在寻找的类别中的项目提供提升。

一个现实生活中的例子（不是我的网站）：一个购物网站可以提供一个过滤器，在价格方面搜索最接近的匹配项，但表现得好像某个类别（例如“红色”）中的所有项目都比匹配项更接近 10 美元比实际情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T02:07:05.700

为什么不使用以下类型的 SQL，在 ORDER BY 表达式中使用 CASE 语句对结果进行动态排序？

这更像是一个面向 SQL 的解决方案，所以我不确定它对您的问题有多适用。

```
SELECT *
FROM Table
ORDER BY CASE Category 
           WHEN '$category' THEN ABS(ItemRanking - $rating - 1) 
           ELSE ABS(ItemRanking - $rating)
         END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T05:02:12.020

如前所述，在 Select 查询中使用测试条件是通过使用 Case 语句完成的。除了已经给出的示例之外，其他一些代码示例可能是：

```
Order By ABS (itemranking - $rating) - 
  Case When category == '$category' Then 1 Else 0 End 
```

或者

```
Order By ABS (Case when category == '$category' then (itemranking - $rating - 1)
  Else (item - $rating) End) 
```

此外，您没有提及您使用的是 MySQL 还是 MS-SQL Server 或其他一些 sql-server。一些可以在 MySQL 上正常工作的东西可能不适用于 MS-SQL Server，反之亦然。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T02:26:10.833

做类似的事情

```
Select if(category='$category', ABS (itemranking - $rating) - 1, ABS (itemranking - rating)) as calc 
FROM table 
ORDER BY calc 
```

# c++ - 如何获取 PC 中可用的摄像头列表并打开特定摄像头？

> ID：11919152
> 
> 赞同：-1
> 
> 时间：2012-08-12T02:02:05.817
> 
> 标签：c++, opencv

最近我使用 C++ 和 opencv 制作了一个处理相机的程序。如何找到我的 PC 中可用的摄像头并打开特定的摄像头？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T10:09:08.477

如果您使用 Windows，我相信您可以使用打开相机选择屏幕`cvCaptureFromCam(-1)`查看更多[信息](http://opencv.willowgarage.com/documentation/reading_and_writing_images_and_video.html#capturefromcam)

# javascript - 在焦点上播放视频

> ID：11919156
> 
> 赞同：1
> 
> 时间：2012-08-12T02:02:56.413
> 
> 标签：javascript, jquery, dom

我希望能够做 Youtube 所做的事情，在页面聚焦时播放视频。我尝试过使用 onblur 和 onfocus 处理程序，但它们仅在更改期间触发，而不是在加载初始页面时触发。

这意味着当页面加载时，我不知道它是否集中。

有任何想法吗？

谢谢！

# excel-2010 - 我可以自动选择切片器选项吗？

> ID：11919158
> 
> 赞同：2
> 
> 时间：2012-08-12T02:04:10.180
> 
> 标签：excel-2010, office-2010

我正在处理一个 Excel 工作簿，该工作簿在一个大表中包含大量条目，所有条目均按日期排序。我插入了一个滑块，以便更轻松地按月查看数据，但现在我想做的是自动选择滑块选项。

例如。

我的一个工作表旨在显示一个月摘要，所有总数等都是根据日期使用 SUMIF 计算的，因此只计算当前月份的数据，现在在该工作表上我还想包含一个切片器那几个月的条目，很容易，但我希望自动选择当前月份，如果在选择每月报表后他们会自动收到大部分信息，但随后必须为报表的其他部分选择他们之后的月份，这会让人感到困惑。所以我想要的是一种让切片器默认为另一个单元格中设置的值的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T15:22:47.390

您可以使用`.Sliceritems(iIndex).selected`来定义选择的内容。

假设您的标签是日期，这是设置选择的一种方式

```
Sub Macro1()

Dim lIndex As Long
Dim lLoop As Long

    With ActiveWorkbook.SlicerCaches("Slicer_NumEntered")
    lIndex = .SlicerItems.Count
        For lLoop = 1 To lIndex
            If CDate(.SlicerItems(lLoop).Name) < CDate("5/1/2012") Then
                .SlicerItems(lLoop).Selected = True
            Else
                .SlicerItems(lLoop).Selected = False
            End If
        Next
    End With
End Sub 
```

这可以改进 - 日期测试是可怕的，并且可以大大改进。此外，如果您可以让测试简单地返回真/假，那么您可以删除`if/then/else`, 并放入

```
.SlicerItems(lLoop).Selected = YourTest 
```

反而

# css - CSS： 具有 3 个 inline-block 元素的项目，最后占用最大空间

> ID：11919159
> 
> 赞同：1
> 
> 时间：2012-08-12T02:04:35.423
> 
> 标签：css, position, html-lists, anchor

在无序列表中的每个列表项中，我有 2 个内联块元素和一个锚文本，它们都彼此相邻。所以每个`<li>`都有2个图标和一个文本。

我制作这两个图标的原因`display:inline-block`是因为它们具有不同的高度，并且它们旁边的锚文本有时会变成多行，并且我可以按照`vertical-align`规则将它们居中到第一行。

无论如何，这个锚标签有一个`:hover`样式，基本上是`background-color:gray`. 由于某种原因，我无法通过任何通用解决方案成功阻止此锚元素。

我做了一些工作，但我不能依赖这个解决方案，因为我使用硬编码的`<ul>`和`<a>`宽度，当列表需要滚动条时，这些宽度需要减去条形宽度。以下是我目前的解决方案，如果这对某人有所启发。

我尝试给锚文本一个 margin-left 并将其设置为`display:absolut`，但无济于事。我也尝试过给出百分比，但又一次......最终我尝试浮动元素，但这可能是这里最错误的解决方案，因为文本的多行可能性并将每个元素居中于文本第一行的垂直中心。我的下一个猜测是在每个列表项中使用一个表格，但这可能是最肮脏的解决方案，除非我必须这样做，否则我不想使用它。

你会怎么做？如果您需要更多详细信息，请告诉我。

### CSS

```
ul {
    overflow:auto;
    height:6em;
    width:320px;
}
li .icon1 {
    display:inline-block;
    width:13px;
    height:12px;
    vertical-align:top;
    background:url(image.jpg) left top no-repeat;
}
li .icon2 {
    display:inline-block;
    width:9px;
    height:10px;
    margin-right:2px;
    background:url(image.jpg) left -12px no-repeat;
}
li a {
    display:inline-block;
    padding-left:4px;
    vertical-align:top;
    width:270px;
}
li a:hover {
    background-color:lightgray;
} 
```

### HTML

```
<ul>
    <li>
        <div class="icon1"></div>
        <div class="icon2"></div>
        <a href="#">Some anchor text</a>
    </li>
    <!-- many other li items in here -->
</ul> 
```

这是一张图片来说明我想要实现的目标：

![伪图像](../Images/da4688eee63637768b5e4fce9df5ca40.png)

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T02:40:53.300

我能想到的最好的两个解决方案：1）使用CSS下面的例子：

```
ul {
    overflow:auto;
    height:6em;
    width:320px;
}
.icon1 {
    width:13px;
    height:12px;
    vertical-align:top;
    background:url(image.jpg) left top no-repeat;
    border: 1px solid black;
}
.icon2 {
    display:inline-block;
    width:9px;
    height:10px;
    margin-right:2px;
    background:url(image.jpg) left -12px no-repeat;
}
li a {
    display:block;
    padding-left:4px;
    vertical-align:top;
    border: 1px solid black;
}
li a:hover {
    background-color:lightgray;
} 
```

HTML：

```
<ul>
    <li>
        <a href="#"><img class="icon1" src="image.jpg" alt="icon1"/><img class="icon2" src="image.jpg" alt="icon2"/>Some label in here!</a>
    </li>
    <li>
        <a href="#"><img class="icon1" src="image.jpg" alt="icon1"/><img class="icon2" src="image.jpg" alt="icon2"/>Some label in herdsafasdfasdfsad sadfasd sadfasd asdfsade!</a>
    </li>
</ul> 
```

2）您还可以将背景图像添加到 li 项目：

```
background-image: url(image.jpg); 
```

对于图标

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T23:54:18.697

好的，我发现了如何解决它。我很确定这不是理想的解决方案，但它似乎没有任何问题（然而，在我尝试过的浏览器中）。

如果有人有更好的解决方案，请告诉我。

这是整个代码。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Another dirty (but better) solution</title>
<style type="text/css">
body {
    font-family:Arial, Helvetica, sans-serif;
    font-size:12px;
}
ul {
    overflow:auto;
    width:18em;
    height:6em;
    list-style:none;
    margin:0;
    padding:0;
}
li {overflow:hidden;}
li .icons {
    float:left;
    margin:-0.1em 0;
}
li .icons .icon1 {
    display:inline-block;
    width:13px;
    height:12px;
    vertical-align:middle;
    background-color:red;
}
li .icons .icon2 {
    display:inline-block;
    width:9px;
    height:10px;
    vertical-align:middle;
    background-color:green;
    margin-bottom:1px; /* here's the dirty hack: (icon1.height-icon2.height) / 2 */
}
li a {
    color:inherit;
    text-decoration:none;
    display:block;
    padding:0 4px;
    margin-left:24px;
}
li a:hover {
    background-color:lightgray;
}
</style>
</head>
<body>
    <ul>
        <li>
            <div class="icons"><div class="icon1"></div><div class="icon2"></div></div>
            <a href="#">Some link text</a>
        </li>
        <li>
            <div class="icons"><div class="icon1"></div><div class="icon2"></div></div>
            <a href="#">Some other link text</a>
        </li>
        <li>
            <div class="icons"><div class="icon1"></div><div class="icon2"></div></div>
            <a href="#">A longer link text here</a>
        </li>
        <li>
            <div class="icons"><div class="icon1"></div><div class="icon2"></div></div>
            <a href="#">Shrt lnk txt</a>
        </li>
        <li>
            <div class="icons"><div class="icon1"></div><div class="icon2"></div></div>
            <a href="#">Much much looooonger text in here</a>
        </li>
        <li>
            <div class="icons"><div class="icon1"></div><div class="icon2"></div></div>
            <a href="#">Just another link text</a>
        </li>
    </ul>
</body>
</html> 
```

# cakephp - Cakephp Mongodb

> ID：11919163
> 
> 赞同：1
> 
> 时间：2012-08-12T02:05:34.513
> 
> 标签：cakephp, mongodb

我想使用 cakephp 模型为我在 mogodb 上的集合使用枚举文档：

```
class Profile extends AppModel {

public $primaryKey = '_id';

var $mongoSchema = array(
        'firstname' => array('type'=>'string'),
        'lastname'=>array('type'=>'string'),
        'adress'=>array('type'=>'string'),
        'tel'=>array('type'=>'integer'),
        'location'=>array(
            'city' => array('type'=>'string'),
            'country' => array('type'=>'string'),
            'street' => array('type'=>'string'),
            'zip' => array('type'=>'integer'),
            ),
        'created'=>array('type'=>'datetime'),
        'modified'=>array('type'=>'datetime'),
        'corporation'=>array(
            'name' => array('type'=>'string'),
            'description' => array('type'=>'string'),
            'link' => array('type'=>'string'),
            'logo' => array('type'=>'string'),
            ),
        'gender'=>array(
            'male' => 'Male',
            'female' => Female,
            'unspecified' => 'Unspecified',
            ),
        );

 } 
```

顺便说一句，我可以使用术语整数来引用数字字段吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T19:05:15.377

该`integer`类型被定义为 cakephp-mongodb 库中支持的[列映射](https://github.com/ichikaway/cakephp-mongodb/blob/master/models/datasources/mongodb_source.php#L97)。此外， Mark Story在[这篇博](http://mark-story.com/posts/view/using-mongodb-with-cakephp)文中提到了这种类型。

库的代码库中似乎没有对枚举支持的引用，所以我认为它不受支持。集成[EnumerableBehavior](https://github.com/Kouno/EnumerableBehavior)库可能会有一些运气；否则，这些选项可以很容易地存储在模型类的静态数组中，并在您的应用程序中手动验证。请注意，MongoDB 没有枚举字段类型（您可能会在 MySQL 中找到），因此无论哪种方式，您的应用程序都将负责确保字段的数据完整性。

# usb - 为什么 DeviceIoControl 因“功能不正确”而失败

> ID：11919165
> 
> 赞同：1
> 
> 时间：2012-08-12T02:05:50.023
> 
> 标签：usb, driver, device-driver, deviceiocontrol

我正在尝试与我的 USB 驱动程序进行通信。我能够得到一个句柄，但是一旦我使用`DeviceIoControl`它失败，`GetLastError()`说错误是一个不正确的功能。我对如何调试这个感到困惑。我正在使用 XP 32 位机器。

```
Handle =     CREATEFILE(   DevicePath1,
                            GENERIC_READ | GENERIC_WRITE,
                 FILE_SHARE_READ,                                                        
                             NULL,
                             OPEN_EXISTING,
                             FILE_FLAG_OVERLAPPED,
                             NULL);
                    if (INVALID_HANDLE_VALUE == Handle)
                    {
                        printf("INVALIDHANDLE USB\n");
                        return PHNFCSTVAL(CID_NFC_DAL, NFCSTATUS_INVALID_DEVICE);
                    }
                    else
                    {

                        //  Call device IO Control interface (USB_TEST_IOCTL_VERSION_NUMBER) in driver
                        if ( !DeviceIoControl(Handle,
                                            USB_TEST_IOCTL_VERSION_NUMBER,
                                            NULL,
                                            0,
                                            version,
                                            sizeof(version),
                                            &lenght,
                                            NULL)
                        )
                        {

//Display the last error killing my program

void* lpBuffer;

FormatMessage( FORMAT_MESSAGE_ALLOCATE_BUFFER | FORMAT_MESSAGE_FROM_SYSTEM,
               NULL,
              GetLastError(),
              MAKELANGID(LANG_NEUTRAL, SUBLANG_DEFAULT), // Default language
              (LPTSTR) &lpBuffer,
              0,
              NULL );
printf(" Version: %x\n", version);
printf("USB_TEST_IOCTL_VERSION_NUMBER, %x\n", USB_TEST_IOCTL_VERSION_NUMBER);
printf(" &lenght: %x\n", &lenght);
MessageBox( NULL, (LPCTSTR)lpBuffer, TEXT("LastRrror"), MB_OK );
LocalFree( lpBuffer );

            printf("USB HIO Control interface FAIL\n");
                            return PHNFCSTVAL(CID_NFC_DAL, NFCSTATUS_INVALID_DEVICE); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-04T04:40:01.480

最可能的原因（正如 Xearinox 指出的那样）是较新版本的设备驱动程序没有特定的控制代码。您需要从供应商处获取更新的文档和/或头文件。

此外，您正在打开一个异步句柄，然后尝试将其用于同步 I/O。从 DeviceIoControl 的文档中：

> 如果 hDevice 是使用 FILE_FLAG_OVERLAPPED 标志打开的，则该操作将作为重叠（异步）操作执行。在这种情况下，lpOverlapped 必须指向一个有效的 OVERLAPPED 结构，该结构包含一个事件对象的句柄。

# javascript - websockets，使用来自服务器的消息更新 div

> ID：11919166
> 
> 赞同：3
> 
> 时间：2012-08-12T02:06:05.877
> 
> 标签：javascript, html, node.js, websocket

```
websocket.onmessage = function (evt) { 
    console.log('Retrieved data from server: ' + evt.data); 
    $('#someDiv').append(evt.data);
}; 
```

如果我在浏览器中打开 2 个选项卡，为什么此事件仅在我发送消息的活动选项卡中触发？由于数据是从服务器接收的，这不应该同时在两个选项卡中触发吗？

```
var WebSocketServer = require('websocket').server;
var http = require('http');

var server = http.createServer(function(request, response) {
    console.log((new Date()) + ' Received request for ' + request.url);
    response.writeHead(404);
    response.end();
});
server.listen(8080, function() {
    console.log((new Date()) + ' Server is listening on port 8080');
});

wsServer = new WebSocketServer({
    httpServer: server,
    // You should not use autoAcceptConnections for production
    // applications, as it defeats all standard cross-origin protection
    // facilities built into the protocol and the browser.  You should
    // *always* verify the connection's origin and decide whether or not
    // to accept it.
    autoAcceptConnections: false
});

function originIsAllowed(origin) {
  // put logic here to detect whether the specified origin is allowed.
  return true;
}

wsServer.on('request', function(request) {
    if (!originIsAllowed(request.origin)) {
      // Make sure we only accept requests from an allowed origin
      request.reject();
      console.log((new Date()) + ' Connection from origin ' + request.origin + ' rejected.');
      return;
    }

    var connection = request.accept('echo-protocol', request.origin);
    console.log((new Date()) + ' Connection accepted.');
    connection.on('message', function(message) {
        if (message.type === 'utf8') {
            console.log('Received Message: ' + message.utf8Data);
            connection.sendUTF(message.utf8Data);
        }
        else if (message.type === 'binary') {
            console.log('Received Binary Message of ' + message.binaryData.length + ' bytes');
            connection.sendBytes(message.binaryData);
        }
    });
    connection.on('close', function(reasonCode, description) {
        console.log((new Date()) + ' Peer ' + connection.remoteAddress + ' disconnected.');
    });
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T05:14:33.353

每个选项卡/窗口都使用自己的标识符打开自己的 websocket，您的服务器应该向当前用户打开的所有 websocket 发送消息。

在您的情况下，当您仅将消息发送到第一个连接的 websocket 时，您可以使用[window.localStorage](https://developer.mozilla.org/en-US/docs/DOM/Storage#localStorage)作为消息缓冲区在同一域上的选项卡/窗口之间共享数据。[store.js](https://github.com/marcuswestin/store.js)可以帮助您将对象放入 localStorage 并检索它们，并确保跨浏览器兼容性）。然后为函数调用设置一个间隔，该间隔将定期查找新消息。

# jquery - 必须访问 jquery 数组中的单个项目，然后模拟点击事件（javascript）

> ID：11919172
> 
> 赞同：2
> 
> 时间：2012-08-12T02:06:58.980
> 
> 标签：jquery, arrays, events, click, simulate

我想随机选择一个`<div>`，然后触发相同的事件处理程序，如果我单击它就会触发。我的事件处理程序如下所示：

```
function move(){        
    var currentLeft = $(this).css("left")
    var currentTop = $(this).css("top")
    if($(this).hasClass("movable")){
        $(this)
            .css("left", leftOld)
            .css("top", topOld);
        leftOld = currentLeft;
        topOld = currentTop;
    }
    findMovable();
} 
```

通常这个事件是由点击事件触发的。事件侦听器如下所示：

```
$(".piece").click(move); 
```

我想要一个可以随机单击这些 div 并触发相同事件处理程序的函数。我正在处理这样的事情，但不知道如何完成：

```
$("#shufflebutton").click(shufflePieces);  //event listener

function shufflePieces(){
    var clickTile = Math.floor(Math.random() * $(".movable").length);
    $(".movable")[clickTile].trigger(move); //this is the line I can't figure out
} 
```

事件处理程序（移动）知道“单击”了什么 div 很重要，因为它必须访问有关`<div>`使用`$(this)`. 对我有什么帮助吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T02:08:26.377

像这样：

```
$('.movable').eq(clickTile).click(); 
```

`$(...)`返回一个 jQuery 对象。jQuery 对象的索引属性 ( `[3]`) 返回原始 DOM 元素，而不是 jQuery 对象。
要获取 jQuery 对象中特定元素的 jQuery 对象，请调用`.eq()`.

# mysql - 我的查询需要哪种连接类型

> ID：11919173
> 
> 赞同：3
> 
> 时间：2012-08-12T02:07:04.530
> 
> 标签：mysql, sql, database, join

我有我的会员的声誉积分表。

```
rep_id   |   mem_id   |   activity        |   points   |   article_id   |   comment_id
---------|------------|-------------------|------------|----------------|-----------------
1        |   99       |   Posted Comment  |   5        |   10343        |   239403
2        |   99       |   Introduction    |   50       |                |
3        |   99       |   Liked Comment   |   5        |   748          |   9302 
```

如您所见，并非所有声望点都有 a`article_id`或 a `comment_id`，但是当我列出这些记录时，如果记录*确实*有 a `article_id`，我需要`article_title`从`blog_articles`表中获取 。与 相同`comment_id`，如果它存在，我需要从桌子上`comment`抓取`blog_comments`。如果`article_id`或`comment_id`丢失，只需按原样打印原始记录。

如果有人能告诉我该查询使用哪个连接，我将不胜感激。我认为，通过查看文档，这是我需要的 LEFT JOIN，它从左侧打印所有记录，即使右侧没有匹配项 - 但真的不确定。

我不是在寻找任何代码，只是告诉我推荐使用哪个连接，我将对其进行编码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T02:11:40.653

确实，左连接是您所需要的。如果记录没有`article_id`值，`article_title`则为`NULL`。这同样适用于`comment_id`/ `comment`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-12T02:27:20.400

您需要一个 OUTER 连接。外连接有 LEFT、RIGHT 和 FULL 种类。您可以使用可以工作的 LEFT 或 RIGHT 外连接来编写查询，但您想要的可能是 LEFT OUTER JOIN（通常缩写为 LEFT JOIN）。

# java - Java（机器人）屏幕截图超出可见范围

> ID：11919175
> 
> 赞同：3
> 
> 时间：2012-08-12T02:07:16.183
> 
> 标签：java, screenshot, awtrobot

我想一次截取比我的屏幕大的整个网站的屏幕截图。我知道如何使用 Robot 类来截取可见区域的屏幕截图。我认为这样做的一种方法是：

1.  启动浏览器，转到所需的网站
2.  启动我的程序
3.  程序将对可见区域进行截图
4.  程序将向下滚动以使页面的后半部分可见并截取屏幕截图
5.  两个屏幕截图将合并

这有点笨拙的解决方案，在这一点上我什至不确定它是否可能（滚动浏览器的窗口）。所以我正在寻找更好的解决方案的提示。

**编辑 1：这有点像我在原始帖子中所设想的。流程是（原型）：**

1.  打开浏览器，在显示器 1 中转到所需的网站
2.  在监视器 2 中，运行程序（在我的例子中来自 Net beans）
3.  程序捕获第一个屏幕截图，但如果调用 Robot.mouseScroll 它是 NetBeans 窗口滚动而不是 webbrowser
4.  要滚动浏览器屏幕，我移动鼠标 Monitor 1，单击它以获得焦点，滚动然后再截取另一个屏幕截图。现在我有两个可以拼接的 png 图像。

问题是，虽然我在技术上可以做到这一点，但我无法同时在我的计算机上做任何其他事情，因为我正在通过程序移动鼠标。目标是让我的程序在 Excel 中工作时截取屏幕截图并同时分析图像（拼接和提取信息）。按照目前的设置，这是不可能的。

此外，Java 似乎根本无法做到这一点。有趣的是，足够多的 JavaScript 可能能够并且看起来像带有 Win Api 的 C++ 将能够如此。这是一种耻辱。有什么想法吗？

`/** * @param args the command line arguments */ public static void main(String[] args) throws IOException { int width; int height;`

 ````
 try{
        // Get screen devices.
        GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
        GraphicsDevice[] gdevices = ge.getScreenDevices();

        // Find out widht and height of each, print line.
        for (int i = 0; i < gdevices.length; i++){
            System.out.println("Device " + i);
            System.out.println("Width:" + gdevices[i].getDisplayMode().getWidth());
            System.out.println("Height:" + gdevices[i].getDisplayMode().getHeight());
        }

        // Get width and height again for later. Don't worry about this now.
        width = gdevices[1].getDisplayMode().getWidth();
        height = gdevices[1].getDisplayMode().getHeight();

        // Initiate robot.
        Robot robot = new Robot(gdevices[1]);
        // Size of printscreen area. Temporary. Will be entire screen later.
        Rectangle captureSize = new Rectangle(0,0,500,500);

        // Take screenshot on gdevice[1]
        BufferedImage bufferedImage = robot.createScreenCapture(captureSize);
        File outputfile = new File("My Screenshot" + 1 + ".png");
        boolean write = ImageIO.write(bufferedImage, "png",outputfile);

        // Preparing to take another screenshot after.
        /* Need to move mouse to monitor where screenshot is taken. Mouse
         * is currently at a monitor that displays NetBeans, which is where 
         * I'm running this from, for now.
         */

        robot.mouseMove(200,200);
        /* Need to activate window by gaining focus, don't how to do with robot
         * do with mouse instead.
         */
        robot.mousePress(InputEvent.BUTTON1_MASK);
        robot.mouseRelease(InputEvent.BUTTON1_MASK);
        /* After the first screen shot, scroll screen that's now 
         * active (focused?)
         */
        robot.mouseWheel(3);

        // Take second screenshot.
        robot.delay(1000);
        bufferedImage = robot.createScreenCapture(captureSize);
        outputfile = new File("My Screenshot" + 2 + ".png");
        //write into second half
        write = ImageIO.write(bufferedImage, "png",outputfile);
    }
    catch (AWTException e){
        System.err.println("Somethingfishy is going on ...");
    }
} 
```` 

`}`

**编辑 2：新方法** 好的，考虑到这一点，即使我找到了焦点（例如使用 alt+tab 而不是移动）它也无济于事，因为我需要同时在 excel 中工作。我将开始另一个关于“虚拟监视器”想法的问题。感谢两位提供想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T03:12:03.837

页面会呈现在`JEditorPane`? 如果是这样，请查看[`ComponentImageCapture`](https://stackoverflow.com/questions/5853879/java-swing-obtain-image-of-jframe/5853992#5853992)课程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T02:28:46.900

机器人类可以完全按照您的概述使用，只需确保在单击滚动和第二个屏幕截图之间包含延迟。这是Robot的一个很好的应用。当你拥有它时，你应该在这里发布你的代码。我认为没有办法截取屏幕上没有的东西。您受到视频卡和显示分辨率的限制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T11:27:21.363

在问题本身中查看我的编辑。程序的流程必须重定向到虚拟监视器或类似的东西。谢谢。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-11T11:15:30.583

尝试

```
 Dimension size = driver.manage().window().getSize();
      Point point = driver.manage().window().getPosition();
      Robot robot = new Robot();
      String format = "png";
      File tempFile = new File(System.getProperty("user.dir") + "//" + screenshotFolder + "//" + fileName);
      Rectangle captureRect = new Rectangle(point.getX(), point.getY(), size.getWidth(), size.getHeight());
      BufferedImage captureImage = robot.createScreenCapture(captureRect);
      ImageIO.write(captureImage, format, tempFile); 
```

# ruby-on-rails - 如何测试 Javascript 呈现的内容：什么都没有？

> ID：11919177
> 
> 赞同：1
> 
> 时间：2012-08-12T02:07:45.687
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3.2, functional-testing

如果我有一个不应该为某些 Javascript 请求呈现任何内容的操作，我该如何测试它是做什么的？

也就是说，如果动作是：

```
def some_action
  respond_to do |format|
    format.js { render :nothing => true if some_condition }
  end
end 
```

...我如何编写功能测试来验证它确实没有渲染任何内容？

编辑：`assert /\A\s*\z/.match(@response.body)`断言正文仅包含空格，这是测试正确的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T02:11:41.870

```
assert_nil @response 
```

应该工作，虽然你可能需要做

```
assert_same @response, "" 
```

反而。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T18:01:23.263

`assert /\A\s*\z/.match(@response.body)`断言 body 仅包含空格，这似乎是解决此问题的最简单方法。更具体的测试会遇到问题，因为它显然会将一些奇怪的空白字符放入正文中。

# ruby - 瘦服务器多次记录相同的请求

> ID：11919178
> 
> 赞同：2
> 
> 时间：2012-08-12T02:07:46.603
> 
> 标签：ruby, logging, heroku, sinatra, thin

我正在使用瘦 Web 服务器来提供 Ruby/Sinatra 应用程序。引起我注意的是，当我跑步时：

```
RACK_ENV=production rackup 
```

每个请求都记录了 5 次，并且具有不同的时间戳。

```
vagrant@lucid32:/app$ RACK_ENV=production rackup
** Building /assets/application.js...
** Building /assets/screen.css...
>> Thin web server (v1.4.1 codename Chromeo)
>> Maximum connections set to 1024
>> Listening on 0.0.0.0:9292, CTRL+C to stop
10.0.2.2 - - [12/Aug/2012 03:54:56] "GET / HTTP/1.1" 200 4 0.0024
10.0.2.2 - - [12/Aug/2012 03:54:56] "GET / HTTP/1.1" 200 4 0.0034
10.0.2.2 - - [12/Aug/2012 03:54:56] "GET / HTTP/1.1" 200 4 0.0044
10.0.2.2 - - [12/Aug/2012 03:54:56] "GET / HTTP/1.1" 200 4 0.0054
10.0.2.2 - - [12/Aug/2012 03:54:56] "GET / HTTP/1.1" 200 4 0.0065
10.0.2.2 - - [12/Aug/2012 03:54:56] "GET / HTTP/1.1" 200 4 0.0076
10.0.2.2 - - [12/Aug/2012 03:54:56] "GET / HTTP/1.1" 200 4 0.0094
10.0.2.2 - - [12/Aug/2012 03:54:56] "GET / HTTP/1.1" 200 - 0.0102 
```

这让我相信，不知何故，请求被多次提出。还是只是多次记录？

当我跑步时

```
rackup 
```

并尝试相同的请求。这就是我得到的。

```
vagrant@lucid32:/app$ rackup
>> Thin web server (v1.4.1 codename Chromeo)
>> Maximum connections set to 1024
>> Listening on 0.0.0.0:9292, CTRL+C to stop
10.0.2.2 - - [12/Aug/2012 03:56:42] "GET / HTTP/1.1" 200 - 0.1228 
```

区别基本上是状态码后面的“-”，就像生产服务器中的最终日志行一样。但我真的不知道那是什么意思。

我想知道在生产中是否以某种方式处理了多次请求。我正在使用这样的 Sinatra，这条路线。

```
class Project::Base < Sinatra::Application
  ..configs here
end

class Project::Routes::Home < Project::Base
  get '/'
    "something"
  end
end 
```

配置.ru

```
RACK_ENV = ENV["RACK_ENV"] ||= "development" unless defined? RACK_ENV
require 'sprockets'
map '/assets' do
  environment = Sprockets::Environment.new
  environment.append_path 'app/assets/javascripts'
  environment.append_path 'app/assets/stylesheets'

  run environment
end
require File.dirname(__FILE__) + '/config/boot.rb'
use Rack::Deflater
run GRBTV::Main 
```

./config/boot.rb

```
require 'rubygems'
gem 'psych'

# Require default environment config
require File.join(File.dirname(__FILE__), 'env')

# Bundler setup check 
require 'bundler'
begin
  Bundler.setup
rescue Bundler::BundlerError => e
  $stderr.puts e.message
  $stderr.puts "Run 'bundle install' to install missing gems"
  exit e.status_code
end

# Sinatra
require 'sinatra/base'
require 'sinatra/flash'
require 'json'

RACK_ENV = ENV['RACK_ENV'] ||= 'development' unless defined? RACK_ENV
ROOT_DIR = File.dirname(__FILE__).gsub(/config/,'')  unless defined? ROOT_DIR

# Path helper methods 
# root_path("config", "settings.yml")
def root_path(*args)
  File.join(ROOT_DIR, *args)
end

# relative_from_root_path("~/projects/project_name/config/settings.yml") #=> "config/settings.yml"
def relative_from_root_path(path)
  Pathname.new(path).relative_path_from(Pathname.new(ROOT_DIR)).to_s
end

# public_path("images") #=> "public/images"
def public_path(*args)
  root_path('public', *args)
end

# Module containers for autoloaded helpers and routes
module GRBTV
  module Helpers
  end
  module Routes
  end
end

# Attempts to require all dependencies with bundler, if this fails, bundle and then try again
require 'bundler'
Bundler.setup(:default)
Bundler.require(:default)

# Dependencies contains all required gems and core configuration
require root_path('config', 'dependencies.rb')

def app() GRBTV::Main end 
```

./config/dependencies.rb

```
require File.join(File.dirname(__FILE__), './loader')

initializers = []
# Requires initializers
Loader.load_files('config/initializers/*.rb') do |file|
  require file
  begin
    # Save Initializer module in the initializers array
    file_class = File.basename(file, '.rb').camelize
    initializers << "#{file_class}Initializer".constantize
  rescue NameError
  end
end

require 'yaml'
YAML::ENGINE.yamler = 'psych'

# Load app components
['lib/*.rb', 'app/uploaders/*.rb', 'app/models/*.rb'].each do |glob|
  Loader.load_files(glob)
end

# Basic Sinatra::Application settingss
class GRBTV::Base < Sinatra::Application
  def options() settings end

  set :root, root_path
  set :views, root_path('app', 'views')
  set :public_folder, root_path('public')
  set :environment, RACK_ENV.to_sym if defined? RACK_ENV
    set :protection, :except => :frame_options

  use Rack::MethodOverride
  enable :sessions
  register Sinatra::NamedRoutes
  register MongoMapper
  helpers Sinatra::FieldBuilder
  helpers Sinatra::Warden::Helpers

  # Require all helpers
  Loader.load_files("app/helpers/**/*.rb") do |file|
    relative_path = relative_from_root_path(file).gsub(/\.rb$/, '').gsub('app/helpers/', '')
    module_name = "GRBTV::Helpers::#{relative_path.camelize}"
    Loader.define_namespaces(module_name)
    require file
    helpers module_name.constantize
  end

  # Sets the default layout for every route
  before do
    @default_layout = :'layout'
  end

  before '/assets/*' do
    headers['Cache-Control'] = 'public, max-age=86400'
  end
end

# Load mailers
Loader.load_files('app/mailers/*.rb')

class GRBTV::Main < GRBTV::Base
  # Requiring routes after extending path helpers
  Loader.load_files("app/routes/**/*.rb") do |file|
    relative_path= relative_from_root_path(file).gsub(/\.rb$/, '').gsub('app/routes/', '')
    module_name = "GRBTV::Routes::#{relative_path.camelize}"
    Loader.define_namespaces(module_name)
    require file
    use module_name.constantize
  end
end

# Load all initializers after setup is done
initializers.each do |initializer|
  GRBTV::Base.register initializer
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T10:38:36.187

这是一个 Sinatra/Thin 错误，应该在 Sinatra 1.3.3（昨天发布）中修复。

# inline - 加载时图像重叠

> ID：11919183
> 
> 赞同：1
> 
> 时间：2012-08-12T02:10:00.337
> 
> 标签：inline, css, screen-rotation, web-inspector

我已经为此苦苦挣扎了 2 天。由于我在该页面的缩略图列表中添加了文本标签：http: [//hixair.fr/galleries/indexcopy.php](http://hixair.fr/galleries/indexcopy.php)

该页面似乎加载正常，直到它到达中间并且缩略图重叠。奇怪的是，如果您打开代码检查器，或旋转 iPhone/ipad 上的显示屏，一切都会刷新并完美显示。我主要使用 Safari 进行测试，Galaxy SII 浏览器中也存在问题。火狐似乎很好。一些帮助将不胜感激！（页面验证为 XHTML 1.0 Strict）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T02:18:20.447

通过 CSS 设置图像或其包含的 div 的宽度和高度（不使用 html 高度属性）应该可以为您解决此问题。

# c# - 为什么只有在抛出异常后才更新表单

> ID：11919186
> 
> 赞同：1
> 
> 时间：2012-08-12T02:10:42.203
> 
> 标签：c#, serial-port, xbee

我正在开发一个主要涉及Xbee和PC之间的COM端口通信的winform程序。请允许我先向您展示问题：

笔记：

1.  不用担心委托函数，它只是检查返回的字节

2.  该程序以前可以运行，我今天刚刚添加了高速设置。所以对于 xbee 设备，我必须以 9600 速度开始，然后更改为我需要的任何速度，即 38400。但是，一旦我将其设置为 38400，无需重启 xbee。下次连接设备时，速度保持@38400。这就是我添加尝试与另一个波特率连接的 if(initial_fail) 块的原因。

3.  请按照我用数字标记的评论

    ```
     try
        {
            portBuffer.Clear();
            myComPort.Write(myxbee.myxbee_cmd.cmd_mode, 0, myxbee.myxbee_cmd.cmd_mode.Length);   //RETURN OK <CR> 

            IAsyncResult res = d.BeginInvoke(null, null);
            if (res.IsCompleted == false)
            {
                res.AsyncWaitHandle.WaitOne(2000, false);
                if (res.IsCompleted == false)
                    initial_fail = 1; //1\. start from here, once there is a timeout, set the initial_fail to 1, Time-out because the baudrate is not sync
                 if (d.EndInvoke(res) == false)
                   throw new Exception("Failing to enter the cmd mode");
            }
        }
        catch (ApplicationException e)
        {
            MessageBox.Show(e.Message);
            return false;
        }
        catch (Exception e)
        {
            MessageBox.Show("Error at step 1: {0}", e.Message);
            return false;
        }
        //2\. here is the new code I added today
        if (initial_fail == 1)
        {
            myComPort.BaudRate = 38400; //3\. Here I changed the speed and gui text
            cmbBaudRate.Text = "38400"; //PROBLEM: when Im doing step by step debug, seems like these two lines doesnt get executed. Winform GUI remain unchanged
            try
            {

                portBuffer.Clear();
                myxbee.command_buffer.Clear();
                dummy = "05";
                dummy_byte = Encoding.ASCII.GetBytes(dummy);
                myxbee.command_buffer.AddRange(myxbee.myxbee_cmd.data_rate); 
                myxbee.command_buffer.AddRange(dummy_byte);
                myxbee.command_buffer.Add(myxbee.myxbee_cmd.line_feed);
                myComPort.Write(myxbee.command_buffer.ToArray(), 0, myxbee.command_buffer.ToArray().Length);
                IAsyncResult res1 = d.BeginInvoke(null, null);
                if (res1.IsCompleted == false)
                {
                    res1.AsyncWaitHandle.WaitOne(1000, false);
                    if (res1.IsCompleted == false)
                        throw new ApplicationException("Timeout"); 
                        //4\. since the winform hasnt shown any bd_rate change, the program will throw a time-out here again 
                }
                if (d.EndInvoke(res1) == false)
                    throw new Exception("Fail in setting data rate to 38400");
                chkHighSpeed.Checked = true;
                high_speed_set = 1;
                MessageBox.Show("Xbee high speed");
            }
            catch (ApplicationException e)
            {
                MessageBox.Show(e.Message);
                return false;
                //5\. BUT AFTER THIS TIMEOUT message, the winform's GUI will be updated to 38400, and rerun the whole test will pass
            } 
    ```

这是 GUI 的一部分，如下所示： ![在此处输入图像描述](../Images/99d1c8a0494a1d198e46b4d34ac7bc54.png)

所以我的问题是为什么只有在超时异常之后，波特率才会更新？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T03:03:34.683

问题来自您在与 ui 相同的线程上创建进程的事实。SO UI 可以被您的 com 进程冻结。您可以使用更新 UI 的 doevents 方法来解决您的问题，但这不是您的最佳方法。使用后台工作人员在另一个线程上启动您的 com 进程。

# php - 如何使我的 div 重叠在所有内容之上，而不是将其下方的所有内容向下推？

> ID：11919189
> 
> 赞同：1
> 
> 时间：2012-08-12T02:11:16.970
> 
> 标签：php, html, positioning, show, overlap

在这个 HTML 中，我设置了一个代码，这样如果你点击一个图片链接，`div`就会出现一个。每当`div`出现时，有些项目会被推下，有些则放在`div`.

我怎样才能做到这一点`div`，以使点击时出现的内容与所有内容重叠并且不会将其向下推等？

任何帮助都会很棒！

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Untitled Document</title>
<script language="javascript" type="text/javascript">
function playSound(soundfile) {
 document.getElementById("dummy").innerHTML=
 "<embed src=\""+soundfile+"\" hidden=\"true\" autostart=\"true\" loop=\"false\" />";
 }
function MM_preloadImages() { //v3.0
  var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();
    var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(i=0; i<a.length; i++)
    if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}
}

function MM_findObj(n, d) { //v4.01
  var p,i,x;  if(!d) d=document; if((p=n.indexOf("?"))>0&&parent.frames.length) {
    d=parent.frames[n.substring(p+1)].document; n=n.substring(0,p);}
  if(!(x=d[n])&&d.all) x=d.all[n]; for (i=0;!x&&i<d.forms.length;i++) x=d.forms[i][n];
  for(i=0;!x&&d.layers&&i<d.layers.length;i++) x=MM_findObj(n,d.layers[i].document);
  if(!x && d.getElementById) x=d.getElementById(n); return x;
}

</script>

<style>
#slidingDiv, #slidingDiv_2{
    height:600px;
    width:1038px;
    margin-left:-538px;
    background-color: #99CCFF;
    padding:20px;
    margin-top:10px;
    border-bottom:5px solid #3399FF;
    display:none;
      z-index: 2;

}

body 
    {
    margin: 0px
    }
 .shadow {
   -moz-box-shadow:    inset 0 0 10px #000000;
   -webkit-box-shadow: inset 0 0 10px #000000;
   box-shadow:         inset 0 0 10px #000000;
}
#horizon {position:absolute; top:50%; left:0px; width:100%; height:1px; overflow:visible;}
#contain {position:absolute;width:100%; height:100%;}
#content {position:absolute; top:-415px; left:50%; margin-left:-537px; width:1074px; height:702px; background-image:url(residential.png);}
#security{position:absolute;width:123px; height:0px; padding-left:390px;margin-top:3px;}
#climate{position:absolute;width:101px; height:2px; margin-left:430px; margin-top:-140px;}#left {height:50%; width:50%; float:left;}#right {height:50%; width:50%; float:right;}#audio{position:absolute;width:123px; height:59px; margin-left:119px; margin-top:190px;}#lighting{width:105px; height:239px; padding-left:71px; padding-top:220px;}#visual{position:absolute;width:105px; height:0px; margin-left:38px; margin-top:-130px;}      div#container {
        width: 1074px;
        margin: 0px auto 0 auto;
        padding: 0px;
        background-image:url(file:///Macintosh%20HD/Users/julieseif/Desktop/Desktop/Projects/iQ%20Homes/popup.png);
      }
      #ipad{

      }
      #keypad{
          position:relative;
          margin-left:440px;
          margin-top:-206px;
      }

      /* HOVER STYLES */
      div#pop-up {
        display: none;
        position: absolute;
        width: 1074px;
        padding: 0px;
        font-size: 90%;
        margin-left:0px;
margin-top:200px;      }
  </style>  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.0/jquery.min.js"></script>
    <script type="text/javascript">
$(function() {
        var moveRight = 0;
        var moveDown = 0;

        $('a#trigger').hover(function(e) {
          $('div#pop-up').show();
          //.css('top', e.pageY + moveDown)
          //.css('left', e.pageX + moveLeft)
          //.appendTo('body');
        }, function() {
          $('div#pop-up').hide();
        });

      });
function MM_swapImgRestore() { //v3.0
  var i,x,a=document.MM_sr; for(i=0;a&&i<a.length&&(x=a[i])&&x.oSrc;i++) x.src=x.oSrc;
}
function MM_swapImage() { //v3.0
  var i,j=0,x,a=MM_swapImage.arguments; document.MM_sr=new Array; for(i=0;i<(a.length-2);i+=3)
   if ((x=MM_findObj(a[i]))!=null){document.MM_sr[j++]=x; if(!x.oSrc) x.oSrc=x.src; x.src=a[i+2];}
}
    </script>
</head>

<body onload="MM_preloadImages('residential/lighting2.png','residential/yeahhhh.gif','resiscons/cam2.png','resiscons/visual2.png','resiscons/audio2.png','resiscons/phone2.png','resiscons/thermo2.png','resiscons/ipad2.png','resiscons/keypad2.png','resiscons/lighting2.png')">

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js" type="text/javascript"></script>
<script src="showHide.js" type="text/javascript"></script>
<script type="text/javascript">

$(document).ready(function(){

   $('.show_hide').showHide({            
        speed: 1000,  // speed you want the toggle to happen    
        easing: '',  // the animation effect you want. Remove this line if you dont want an effect and if you haven't included jQuery UI
        changeText: 1, // if you dont want the button text to change, set this to 0
        showText: 'View',// the button text to show when a div is closed
        hideText: 'Close' // the button text to show when a div is open

    }); 

});

</script>
<body background="ImJustCreative-2010-08-23-at-06.49.36.jpg">
<span id="dummy"></span>
<div id="horizon">

<div id="content">
<div id="contain" class="shadow">
<div id="right">

<div id="security"><a href="#"id="trigger" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image8','','resiscons/cam2.png',1)"class="show_hide" rel="#slidingDiv"><img src="resiscons/cam1.png" name="Image8" width="55" height="52" border="0" id="Image8" /></a></div>  <div id="slidingDiv">
        Fill this space with really interesting content.
    </div>

<div id="telephony" style="margin-left:395px; margin-top:240px;"><a href="#" id="trigger" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image10','','resiscons/phone2.png',1)"><img src="resiscons/phone1.png" name="Image10" width="77" height="69" border="0" id="Image10" /></a></div><div id="visual"><a href="#" id="trigger" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image7','','resiscons/visual1.png',1)"><img src="resiscons/visual2.png" name="Image7" width="254" height="180" border="0" id="Image7" /></a></div><div id="audio"><a href="#" id="trigger" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image9','','resiscons/audio2.png',1)"><img src="resiscons/audio1.png" name="Image9" width="96" height="51" border="0" id="Image9" /></a></div></div><div id="lighting"><a href="#" id="trigger" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image14','','resiscons/lighting1.png',1)"><img src="resiscons/lighting2.png" name="Image14" width="127" height="129" border="0" id="Image14" /></a></div><div id="ipad" style="margin-top:-115px; padding-left:10px;"><a href="#" id="trigger" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image12','','resiscons/ipad2.png',1)"><img src="resiscons/ipad1.png" name="Image12" width="131" height="149" border="0" id="Image12" /></a></div><div id="keypad"><a href="#" id="trigger" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image13','','resiscons/keypad2.png',1)"><img src="resiscons/keypad1.png" name="Image13" width="58" height="76" border="0" id="Image13" /></a></div>
<div id="climate"><a href="#" id="trigger" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image11','','resiscons/thermo2.png',1)"><img src="resiscons/thermo1.png" name="Image11" width="80" height="63" border="0" id="Image11" /></a></div>
  <div id="pop-up">
<img src="popup.png"/>
      </div></div><center><img src="tagline1.gif" /></center></div></div>
<br/>
</div></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T02:14:17.360

css 样式的 z-index 是您正在寻找的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T02:28:01.627

你应该使用`top: 200px;`而不是`margin-top`当你使用`position:absolute;`

# c++ - 为什么我的程序不工作，我如何阻止它快速关闭

> ID：11919190
> 
> 赞同：-5
> 
> 时间：2012-08-12T02:11:34.713
> 
> 标签：c++

```
#include <stdio.h>

    int main(int argc, char **argv)
    {
        int level = 20;
        int age = 30;

        if (age > 21 && level > 10)
        {
            printf ("Congratz you passed!");

            else
                {
                printf ("Nope get out you didnt pass");
                }
        }

    } 
```

请告诉我出了什么问题，我似乎无法弄清楚它非常基本的 c++ 只是无法弄清楚出了什么问题。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T02:16:47.270

关闭`if`语句：

```
#include <stdio.h>

    int main(int argc, char **argv)
    {
        int level = 20;
        int age = 30;

        if (age > 21 && level > 10)
        {
            printf ("Congratz you passed!");
        }
        else
        {
            printf ("Nope get out you didnt pass");
        }

        return 0;

    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T02:16:57.950

在我看来，您缺少第一个`if`条件的右括号和返回值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T02:16:17.080

> 我如何阻止它快速关闭？

您需要在退出之前在最后添加一些内容，以`main`提示用户输入一些内容（即，`fgetc`等），否则它只会运行并退出，除非您使用的是正在运行您的程序的终端应用程序（在那个如果终端应用程序不会退出，您将看到应用程序的输出）。

此外，您需要返回`int`from `main`... 在大多数平台上成功完成程序需要您返回`0`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-12T04:05:29.950

如果您使用的是 Turbo C 或类似的应用程序，则需要`getch()`在这样的 main 函数的末尾添加，并且您的大括号完全不合适。试试这个

```
#include <stdio.h>
#include <conio.h>

int main(int argc, char **argv)
{
    int level = 20;
    int age = 30;

    if (age > 21 && level > 10)
    {
        printf ("Congratz you passed!");
    }
    else
    {
        printf ("Nope get out you didnt pass");
    }
    getch();
    return 0;

} 
```

# c++ - 重载运算符：const 与非 const 返回类型：性能有何不同？

> ID：11919197
> 
> 赞同：9
> 
> 时间：2012-08-12T02:14:16.630
> 
> 标签：c++, performance, optimization, operator-overloading

如果我们去维基百科关于 C++ 运算符的[文章](http://en.wikipedia.org/wiki/Operators_in_C_and_C++)，我们有一个例子：

```
Addition : a + b -> T T::operator +(const T& b) const; 
```

所以运算符返回一个类型为 T 的**非常**量。如果我们看一下这个[指南](http://courses.cms.caltech.edu/cs11/material/cpp/donnie/cpp-ops.html)，作者说返回类型应该是一个**const**以避免以下语法：

```
(a+b) = c 
```

现在假设这种语法不会打扰我，并认为 a 和 b 是大数组。从“纯”性能的角度来看，返回类型中缺少 const 关键字是否会阻止编译器的优化（g++ 和带有 -O3 的 intel icpc）？如果回答是“是”，为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-12T03:07:34.587

这是个有趣的问题。在 C++03 中，使用这两个选项中的任何一个进行优化都没有更好的机会，这将是一个风格选择的问题（我自己不相信整个回报是`const`为了避免不太可能出现的错误）。

另一方面，在 C++11 中，它实际上可能会产生影响。特别是，如果您的类型支持移动操作，并且无法省略返回值的复制/移动，那么通过`const`您返回实际上是禁用移动^*

```
// T is move assignable, with the usual declaration of a move assignment operator
T f();
const T g();
int main() {
   T t;
   t = f();     // can move
   t = g();     // cannot move!!!
} 
```

在您的特定情况下，这取决于*大型数组*对您意味着什么，如果它们是`std::array`（或者具有自动存储的数组），那么它们不能被移动，所以这无论如何都不是一个选项，但是如果*大型数组*是动态分配的记忆，*移动*将比复制更有效率。请注意，在 C++11 中，*存在*而不是不存在`const`会导致性能损失。

* * *

^*这不是*100% 正确*的，如果移动赋值运算符通过*rvalue-reference*获取参数`const`，那么它可以被移动。但是标准库中的任何类型都没有以这种方式接受参数，我也不希望人们这样做（它需要`const_cast`在*移动*操作（构造函数/赋值）中，这没有任何意义：如果你计划从中*移动*（窃取），您为什么声称不修改它？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T02:26:30.973

由于您要返回 type 的临时右值实例`T`，因此该语句不会做任何事情，除非在赋值操作中有一些全局副作用，例如修改作为 type 数据成员的静态变量`T`，输出到终端等。因此，根据类型，以及赋值运算符是否是编译器默认赋值运算符，整个操作可以在优化过程中安全地省略。如果 type 有用户定义的赋值运算符`T`，则不会省略赋值操作，但如前所述，除非存在全局副作用，否则在语句执行的生命周期之后不会做任何事情因为您没有存储`c`在驻留在命名且可访问的内存位置的对象中。

请记住，如果您确实将返回`T`类型声明为`const`，并且您的运算符方法不是`const`类方法，您将禁用某些类型的运算符链接，以及许多其他有用的东西，例如调用具有 side-效果。例如：

```
(a+b).print(); //assuming print() is non-const method 
```

或假设 `operator+`不是`const`类方法，

```
d = (a+b) + c; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T07:52:11.503

我会说永远不要实现`operator +`为成员函数。只需实现`operator +=`绝对不是 const 即可。然后你提供一个关注 的全局函数`operator +`，我认为这是最常见的方法。

```
T& T::operator +=(const T& t)
{
    // add t to object ...
    return *this;
}

T operator +(T t1, const T& t2)
{
    t1 += t2
    return t1; // RVO will eliminate copy (or move constructor)
} 
```

# html - 悬停时如何用填充突出显示整个表格单元格？

> ID：11919199
> 
> 赞同：2
> 
> 时间：2012-08-12T02:14:30.140
> 
> 标签：html, css

我在一个表中有以下 HTML 代码：

```
<td id="decllink"><a href="#">Decline</a></td> 
```

在 CSS 文件中：

```
#decllink {white-space:nowrap;padding:2px 2px 2px 2px;float:right}
#decllink a {color:red;font-weight:bold;text-decoration:none;background-color:inherit}
#decllink a:hover {color:white;text-decoration:none;background-color:red} 
```

当我将鼠标悬停在表格单元格中的链接上时，我想通过切换前景和背景颜色来突出显示其文本。所以最初链接的文本颜色是红色的，背景是白色的。当我悬停链接时，它应该获得红色背景和白色文本颜色。这适用于这个 HTML/CSS 代码。

然而，当悬停链接时，它的红色背景颜色变得与文本一样宽和高。使用填充我想在文本周围创建一个红色“边框”，这样当悬停链接时它应该更像一个按钮。

如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T02:18:38.963

只做

```
#decllink { margin:0px; padding: 0px; }
#decllink a { padding: 5px } // for example 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T02:19:56.950

改变

```
#decllink a:hover {color:white;text-decoration:none;background-color:red} 
```

到

```
#decllink:hover {color:white;text-decoration:none;background-color:red} 
```

或使用 javascript 来应用样式。

# objective-c - 为什么在不导入 Foundation 的情况下这仍然有效？

> ID：11919211
> 
> 赞同：2
> 
> 时间：2012-08-12T02:18:16.583
> 
> 标签：objective-c, nsobject

`NSObject`为什么在我没有导入类的情况下仍然允许使用函数并从类创建对象？

```
int main (int argc, char *argv[])  
{  
    @autoreleasepool {  
        NSLog(@"hi");
        NSArray *array = [NSArray arrayWithObject: @"hello"];
        NSLog(@"%@", array);
    }
    return 0;  
} 
```

输出

```
2012-08-11 22:15:33.854 prog[1282:403] hi
2012-08-11 22:15:33.857 prog[1282:403] (
    hello
) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-12T02:22:16.813

很可能您有一个导入 Foundation 的 Precompiled/Prefix 标头，因此 Foundation 会隐式添加到每个标头中。查找名为 *-Prefix.pch 的文件。Xcode 通常将它放在一个名为 Supporting Files 的组中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T04:52:51.987

我尝试通过clang使用命令行进行编译，但失败了。我认为 Xcode 做了一些有助于编译的事情。

```
% cat main.m  

int main (int argc, char *argv[])  
{  
    @autoreleasepool {  
        NSLog(@"hi");
        NSArray *array = [NSArray arrayWithObject: @"hello"];
        NSLog(@"%@", array);
    }
    return 0;  
} 

% clang main.m

main.m:4:9: warning: implicit declaration of function 'NSLog' is invalid in C99
      [-Wimplicit-function-declaration]
        NSLog(@"hi");
        ^
main.m:5:9: error: use of undeclared identifier 'NSArray'
        NSArray *array = [NSArray arrayWithObject: @"hello"];
        ^
main.m:5:18: error: use of undeclared identifier 'array'
        NSArray *array = [NSArray arrayWithObject: @"hello"];
                 ^
main.m:5:27: error: use of undeclared identifier 'NSArray'
        NSArray *array = [NSArray arrayWithObject: @"hello"];
                          ^
main.m:6:22: error: use of undeclared identifier 'array'
        NSLog(@"%@", array);
                     ^
1 warning and 4 errors generated. 
```

# c++ - 可迭代类的 C++ 函数重载

> ID：11919214
> 
> 赞同：2
> 
> 时间：2012-08-12T02:19:48.717
> 
> 标签：c++, templates, overloading

我正在尝试编写一个函数，将第一个参数设置为第二个参数的值。但是，当第二个参数是容器类时，我希望它将第一个参数设置为容器的第一个元素。我发现[这个](https://stackoverflow.com/questions/1904796/specializing-functions-on-stl-style-container-types)问题回答了类似的问题，但是，我似乎无法让它在我的情况下工作。

当我编译这段代码时，我得到一个错误，说 SetVar 是模棱两可的。无论如何要使功能正常工作吗？

到目前为止，这是我的代码...

```
#include <iostream>
#include <vector>
template<typename T1,typename T2>
static void SetVar(T1& a, const T2 &b, typename  T2::const_iterator= T2().begin()){
    //Check to make sure b contains an element.
    if(b.begin()!=b.end())  a=*b.begin();
}
template<typename T1,typename T2>
static void SetVar(T1& a, const T2 &b,...){
    a=b;
}
int main(int argc, const char * argv[])
{
    int x;
    int y=5;
    std::vector<int> z;
    z.push_back(1);
    z.push_back(3);
    SetVar(x, y);
    //Should print 5
    std::cout<<x<<"\n";

    SetVar(x, z);//<---SetVar is ambiguous
    //Should print 1
    std::cout<<x<<"\n";
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T02:43:37.677

将参数传递给省略号确实使函数重载不如具有相同参数的实际参数的函数重载，但这不会出现在这里，因为在您的调用中没有第三个参数。

我会`enable_if`同时使用：

```
#include <type_traits>

// Enabled if T2 has `const_iterator` and `begin()`:
template<typename T1,typename T2>
auto SetVar(T1& a, const T2 &b)
  -> typename std::enable_if<std::is_convertible<
         decltype(std::declval<const T2&>().begin()),
         typename T2::const_iterator>::value
     >::type
{
    //Check to make sure b contains an element.
    if(b.begin()!=b.end())  a=*b.begin();
}

// Enabled if expression 'a=b' is valid.
template<typename T1,typename T2>
auto SetVar(T1& a, const T2 &b)
  -> typename std::enable_if<std::is_assignable<T1, const T2&>::value>::type
{
    a=b;
} 
```

上述内容仍有可能模棱两可，但前提是两个条件都为真，这意味着一个奇怪的容器或隐式转换正在进行 - 在这种情况下，我希望编译器警告我混淆。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-12T02:33:56.980

函数模板不能做特化。[这就是为什么](http://www.gotw.ca/publications/mill17.htm)

# php - mysql_query("DELETE FROM table WHERE id-'$id'"); 失败

> ID：11919217
> 
> 赞同：4
> 
> 时间：2012-08-12T02:21:35.567
> 
> 标签：php, mysql, database, sql-delete

我正在尝试通过 PHP 从我的 mySQL 数据库中删除一行，但它不起作用。我尝试了以下方法：

```
mysql_query("DELETE FROM table WHERE id='$id'");
mysql_query("DELETE FROM 'table' WHERE id='$id'");
mysql_query("DELETE FROM `table` WHERE id=`$id`"); 
```

$id 是唯一标识符，我已经附和它以确保它出现。使用“或死亡”会导致死亡。该行根本不会消失。

我应该尝试任何其他语法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T13:39:31.710

错误检查帮助我发现我`mysql_close();`在第二次之前有一个`mysql_query`. 我的语法是正确的，只是我没有仔细检查代码的其余部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T02:30:23.887

我了解您正在尝试所有可能的组合，但有助于了解特定标点符号在 MySQL 语法中的实际含义。

```
`structure` 
```

重音仅用于列名等结构周围。

```
'value' 
```

撇号用于值，如`id='$id'`.

* * *

```
mysql_query("DELETE FROM table WHERE id='$id'"); 
```

这是有效的语法。你也可以在周围加上严重的口音`table`。

```
mysql_query("DELETE FROM 'table' WHERE id='$id'"); 
```

这是无效的语法。`'table'`无效，因为它是列而不是值。

```
mysql_query("DELETE FROM `table` WHERE id=`$id`"); 
```

这是无效的语法。当它应该是撇号时，你在值周围加上了重音。

* * *

希望这些解释可以帮助您解决问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T02:24:20.443

你的`id`整数是？尝试

```
mysql_query("DELETE FROM `table` WHERE id=$id"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-12T02:23:45.187

你有没有尝试过：

```
mysql_query("DELETE FROM table WHERE id=".$id); 
```

我问是因为您可能引用了一个数字（您的身份证） - 而您不需要（或不想）这样做。

让我知道这是否有效 - 我不是专家，但这是我第一次看到它。

# javascript - 如何使用 WebKit 在 JavaScript 中调用 C++ 函数？

> ID：11919223
> 
> 赞同：3
> 
> 时间：2012-08-12T02:23:40.960
> 
> 标签：javascript, c++, visual-studio, webkit

我正在尝试编写一个几乎完全是 HTML/JavaScript 的原生 Windows（Metro 之前）应用程序。一些谷歌搜索似乎表明这样做的方法是：

1.  QtWebKit
2.  网络套件
3.  让 Internet Explorer 呈现它。

我不希望 Qt 作为依赖项，因此排除 1。我需要编写一些本机代码（与操作系统交互），并使这些函数可在 JavaScript 中调用，因此排除 3。但是虽然看起来可能，但我不知道如何在 WebKit 中做到这一点。

注意：构建环境是 Visual Studio，以防万一。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T02:34:18.310

According to what you want to achieve, [V8](http://code.google.com/p/v8/) is probably the best solution, have a look at a basic introduction

[Getting Started](https://developers.google.com/v8/get_started)

and you can also read about a guide about how to embed it

[Embedder's Guide](https://developers.google.com/v8/embed)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T02:43:21.767

在 Windows 应用程序中托管 MSHTML 相对容易。要为 Javascript 引擎提供附加功能，只需实现 IDocHostShowUI 接口并通过 GetExternal() 返回一个 IDipsatch。

# ruby-on-rails - 如何让 Webcrawling Gem Cobweb 在 Rails 中工作

> ID：11919231
> 
> 赞同：1
> 
> 时间：2012-08-12T02:25:17.140
> 
> 标签：ruby-on-rails, web-crawler

我找到了一个我想使用的 gem，但我无法让它工作。该 gem 称为[CobWeb](https://github.com/stewartmckee/cobweb)。它看起来很光滑。

我已经让 redis 和 resque 工作了。我创建了一个旨在利用 CobWeb 的新队列。

```
class Crawler
  @queue = :crawler_queue
  def self.perform(site_id)
    site = Site.find_by_id(site_id)
    crawler = CobWeb.new(follow_redirects: false, internal_urls: true)
    crawler.start(site.homepage)

    puts crawler # I'm ultimately interested in getting a list of urls, but at this stage, I just want to see what data I get back from the crawler.
  end 
```

问题是当我尝试为队列运行 rake taks 时，我收到此错误。我不确定如何解决这个问题。有什么建议么？

```
rake resque:work QUEUE='*' --trace
** Invoke resque:work (first_time)
** Invoke resque:preload (first_time)
** Invoke resque:setup (first_time)
** Invoke environment (first_time)
** Execute environment
** Execute resque:setup
** Execute resque:preload
** Invoke resque:setup 
** Execute resque:work
rake aborted!
tried to create Proc object without a block
/Users/bendowney/.rvm/gems/ruby-1.9.3-p194@RobotWatcherApp/gems/sinatra-1.3.2/lib/sinatra/base.rb:1197:in `define_method'
/Users/bendowney/.rvm/gems/ruby-1.9.3-p194@RobotWatcherApp/gems/sinatra-1.3.2/lib/sinatra/base.rb:1197:in `generate_method'
/Users/bendowney/.rvm/gems/ruby-1.9.3-p194@RobotWatcherApp/gems/sinatra-1.3.2/lib/sinatra/base.rb:1206:in `compile!'
/Users/bendowney/.rvm/gems/ruby-1.9.3-p194@RobotWatcherApp/gems/sinatra-1.3.2/lib/sinatra/base.rb:1186:in `route'
/Users/bendowney/.rvm/gems/ruby-1.9.3-p194@RobotWatcherApp/gems/sinatra-1.3.2/lib/sinatra/base.rb:1168:in `get'
/Users/bendowney/.rvm/gems/ruby-1.9.3-p194@RobotWatcherApp/gems/sinatra-1.3.2/lib/sinatra/base.rb:1602:in `block (2 levels) in delegate'
/Users/bendowney/.rvm/gems/ruby-1.9.3-p194@RobotWatcherApp/gems/redis-namespace-1.2.1/lib/redis/namespace.rb:257:in `method_missing'
/Users/bendowney/.rvm/gems/ruby-1.9.3-p194@RobotWatcherApp/gems/resque-1.21.0/lib/resque/worker.rb:444:in `job'
/Users/bendowney/.rvm/gems/ruby-1.9.3-p194@RobotWatcherApp/gems/resque-1.21.0/lib/resque/worker.rb:377:in `unregister_worker'
/Users/bendowney/.rvm/gems/ruby-1.9.3-p194@RobotWatcherApp/gems/resque-1.21.0/lib/resque/worker.rb:159:in `ensure in work'
/Users/bendowney/.rvm/gems/ruby-1.9.3-p194@RobotWatcherApp/gems/resque-1.21.0/lib/resque/worker.rb:159:in `work'
/Users/bendowney/.rvm/gems/ruby-1.9.3-p194@RobotWatcherApp/gems/resque-1.21.0/lib/resque/tasks.rb:34:in `block (2 levels) in <top (required)>'
/Users/bendowney/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/Users/bendowney/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/Users/bendowney/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/Users/bendowney/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/Users/bendowney/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/Users/bendowney/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/Users/bendowney/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/Users/bendowney/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/Users/bendowney/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
/Users/bendowney/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'
/Users/bendowney/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
/Users/bendowney/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'
/Users/bendowney/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/Users/bendowney/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
/Users/bendowney/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'
/Users/bendowney/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/Users/bendowney/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/Users/bendowney/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
/Users/bendowney/.rvm/gems/ruby-1.9.3-p194@global/bin/rake:19:in `load'
/Users/bendowney/.rvm/gems/ruby-1.9.3-p194@global/bin/rake:19:in `<main>'
/Users/bendowney/.rvm/gems/ruby-1.9.3-p194@RobotWatcherApp/bin/ruby_noexec_wrapper:14:in `eval'
/Users/bendowney/.rvm/gems/ruby-1.9.3-p194@RobotWatcherApp/bin/ruby_noexec_wrapper:14:in `<main>'
Tasks: TOP => resque:work 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T01:04:27.857

似乎无法准确确定这一点，但是，我刚刚发布了新版本的蜘蛛网 v0.0.64，并创建了一个新的 rails 应用程序，并运行了示例代码。

[您可以在http://github.com/stewartmckee/cobweb_sample](http://github.com/stewartmckee/cobweb_sample)获取示例应用程序

我在上面看到的唯一完全错误的是 :internal_urls 应该是一个数组，例如

internal_urls：[“http://www.google.com/folder1/ *”、“http://www.google.com/folder2/* ”、“http://www.otherdomain.com/*”]

这将只允许处理具有这些 url 模式的 url。

查看示例站点并尝试在您的环境中运行它以确保它不是环境问题。

斯图尔特。

# asp.net - 没有上下文的 ASP.NET MVC4 重定向

> ID：11919232
> 
> 赞同：1
> 
> 时间：2012-08-12T02:25:44.957
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4

我有一个方法 IsUserLoggedIn()，如果用户未登录，我希望它将用户重定向到登录页面（如果会话已过期，则为 IE）。问题是我没有 filterContext 并且它不在控制器中，所以我该如何重定向，我真的不想再传递任何参数，例如控制器实例或其他东西。可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T16:13:04.657

在 ASP.NET MVC 中执行此操作的标准方法是使用操作筛选器进行检查并在用户未登录时重定向用户。 AuthorizeAttribute 的默认实现将重定向到 web 中指定的 authentication/forms/loginUrl .config 但您始终可以实现从默认 AuthorizeAttribute 派生的自己的属性并重定向到您想要的任何位置。

[http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute.aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T16:05:39.103

如果您遵循框架的约定和标准，请使用：无论您在上下文中的哪个位置，以下内容都应该解决您的问题。在您的 web.config 中必须有一个部分：

```
<authentication mode="Forms">
  <forms loginUrl="~/Account/LogOn" timeout="2880" />
</authentication> 
```

根据定义，将用户重定向到登录页面和超时（以分钟为单位），直到 cookie 过期。更多关于身份验证[的信息](http://msdn.microsoft.com/en-us/library/1d3t3c61.aspx)。

但是，如果您有自己的系统，您将不会在这里找到任何帮助，因为除了您自己之外，没有人对此一无所知。:)

希望这有帮助。

# php - 500 内部服务器错误 file_get_contents

> ID：11919240
> 
> 赞同：2
> 
> 时间：2012-08-12T02:27:28.573
> 
> 标签：php, web-scraping, file-get-contents

如果我尝试阅读网站的源代码，有时会得到以下信息（显示的示例 URL）：

```
Warning: file_get_contents(http://www.iwantoneofthose.com/gift-novelty/golf-ball-finding-glasses/10602617.html)
[function.file-get-contents]: failed to open stream: HTTP request failed!
HTTP/1.1 500 Internal Server Error in /home/public_html/pages/scrape.html on line 165 
```

然而，URL 本身就很好.. 为什么会发生这种情况？

我尝试了以下解决方法建议，但结果相同：

```
$opts = array('http'=>array('header' => "User-Agent:MyAgent/1.0\r\n"));
$context = stream_context_create($opts);
$header = file_get_contents('https://www.example.com',false,$context); 
```

这让我现在很困惑...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T12:34:02.607

问题出在您的 User-Agent 标头中。这对我有用：

```
$opts = array('http'=>array('header' => "User-Agent:Mozilla/5.0 (Windows NT 6.2) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.75 Safari/537.1\r\n"));
$context = stream_context_create($opts);
$header = file_get_contents('http://www.iwantoneofthose.com/gift-novelty/golf-ball-finding-glasses/10602617.html',false,$context); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T14:36:38.737

我不知道确切的原因，但是在使用某些服务器时`file_get_contents`失败了。但是你有一个选择；

```
$fp = fsockopen("www.iwantoneofthose.com", 80, $errn, $errs);
$out  = "GET /gift-novelty/golf-ball-finding-glasses/10602617.html HTTP/1.1\r\n";
$out .= "Host: www.iwantoneofthose.com\r\n";
$out .= "User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:15.0) Gecko/20100101 Firefox/15.0\r\n";
$out .= "Connection: close\r\n";
$out .= "\r\n";
fwrite($fp, $out);

$response = "";
while ($line = fread($fp, 4096)) {
    $response .= $line;
} 
fclose($fp);

$response_body = substr($response, strpos($response, "\r\n\r\n") + 4);
// or
list($response_headers, $response_body) = explode("\r\n\r\n", $response, 2);

print $response_body; 
```

# java - 按下按钮时清除edittext

> ID：11919241
> 
> 赞同：1
> 
> 时间：2012-08-12T02:27:32.033
> 
> 标签：java, android, textview, android-edittext, textwatcher

我希望我的 onTextChanged 类在用户输入“空格”时读取，以便我可以清除我的 EditText 视图。问题是按下空格键时没有任何反应。有谁知道我做错了什么？我的程序不会崩溃，它什么也不做。

```
 public void onTextChanged(CharSequence s, int start, int before,
                    int count) {
                SS.setText(s);
                if (s.equals("r")) {
                    SS.setText(s);
                    et.setText(" ");
                }
            }

                @Override
                public void beforeTextChanged(CharSequence s, int start, int count,
                        int after) {
                    et.setTextColor(Color.parseColor("#000000"));

                }

                @Override
                public void afterTextChanged(final Editable s) {
                    // cancel the previous search if any

                    // toasted();
                    if (delayedAction != null) {
                        handler.removeCallbacks(delayedAction);
                    }
                    // toasted();

                    // define a new search
                    delayedAction = new Runnable() {

                        @Override
                        public void run() {
                            // start your search
                            // toasted();

                            // if (s.toString().equals(current)) {
                            // // toasted(); <== Here is where it needs to work
                            // // Toast.LENGTH_LONG).show();
                            // }

                            et.setTextColor(Color.parseColor("#C0C0C0"));
                            toasted();
                            tv.setText(et.getText().toString());
                            tv.setTextColor(Color.parseColor("#66CC66"));
                            et.setText("");
                        }

                    }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T02:29:10.867

它应该`s.equals(" ")`代替`s.equals(' ')`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T05:27:55.457

你可以试试。

```
Pattern pattern = Pattern.compile("\\s");
Matcher matcher = pattern.matcher(s);
boolean found = matcher.find(); 
```

# html - 通常在 li （列表项）内格式化文本

> ID：11919249
> 
> 赞同：2
> 
> 时间：2012-08-12T02:29:29.993
> 
> 标签：html, css, html-lists

在我网站的一个页面中，我有一个`<ul>`设置。在 中的每个`<li>`中`<ul>`，都有一个图像和一些文本。当我先放入图像，然后尝试放入文本时，文本被推下并且无法正确格式化。我试图`vertical-align: text-top`在图像中添加一个，但这只是将文本推到顶部，并且随着添加更多文本而不允许向下移动。

JSFiddle - [http://jsfiddle.net/kh4xC/](http://jsfiddle.net/kh4xC/)

HTML

```
<div id="older-videos">    
<ul>
            <li>
            <img src="../Images/Article Images/GuliyevFace14.png" class="li-image" />
            Heydər Oğuzun Rəsul Quliyevlə Müsahibəsi - 29 İyul 2012, 2-ci hissə

            </li>

    </ul>
</div> 
```

CSS

```
#older-videos ul li {
    display:block;
    width:600px;
    height:162px;
    background-color:#EEEEEE;

}
#older-videos ul li img{ vertical-align:text-top;
}
.li-image {
    width:250px;
    height:162px;
    -moz-box-shadow: 10px 10px 5px #888;
-webkit-box-shadow: 10px 10px 5px #888;
box-shadow: 5px 1px 5px #888;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T02:41:45.610

将每个声明`<li>`为块元素很好。我认为下一步就是为您的图像分配一个浮点数。如果您想要文本左侧的图像，只需声明 float: left 用于`.li-image`类。我不太确定将文本与`<li>`属性对齐的能力，但您也可以尝试为`<li>`.

但是，我建议在任何一种情况下都保留 display:block 并浮动图像。如果您在使用 CSS 的浏览器中进行更大的布局意图，那应该会很困难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T02:31:36.837

你为什么不把描述文本放在它自己的`<li></li>`标签中呢？似乎是解决您问题的简单方法。

# cakephp - CakePHP 在需要时加载 javascript 组件

> ID：11919251
> 
> 赞同：0
> 
> 时间：2012-08-12T02:29:47.420
> 
> 标签：cakephp

我正在开发一个 CakePHP 项目，该项目有时需要为 jQuery Datepicker 加载 Javascript 和 CSS。

我只希望它在需要时加载，并且我想要一个中央加载点，因为涉及多个文件，如果有什么变化，我当然不想返回并在 datepicker 文件的所有位置进行更改被加载。

现在，我创建了一个名为“load_datepicker”的元素。该文件中唯一的代码是用于加载必要文件的 CakePHP 调用。我找不到任何其他解决方案。

这似乎是一个很好的解决方案。我可以将元素加载到任何视图或其他元素中。

这是满足这种需求的合理方法还是有一些特定的 CakePHP 方法可以做到这一点？

李

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T04:58:51.650

完全可以满足您的需求，是一个很好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T05:11:30.770

另一种选择是在布局文件中包含 javascript 和 css，但将其包围在一个`if`块中。然后在您的控制器操作中，您可以在需要日期选择器的页面上设置一个变量，并在 if 块中检查它。

# php - 实现“记住我”功能

> ID：11919254
> 
> 赞同：0
> 
> 时间：2012-08-12T02:30:47.183
> 
> 标签：php, session

基本上我有一个具有基本会话功能的登录系统，它在浏览器关闭时超时。我一直在收到投诉，所以我希望能够单击“记住”勾号并让他们的会话持续 30 天。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T02:52:04.500

如前所述，这可以通过 cookie 来完成。有很多[教程](http://davidwalsh.name/php-cookies)，但一个好的方法对于安全性是必要的。我还记得，在 Orkut，这个早已死去的社交网站，你可以要求用户运行一些脚本来窃取他的 cookie，并且即使用户已经注销，该帐户也是你的。

所以这是一个最好的方法。

*   在用户上创建一个 cookie，用一些盐对用户 ID 进行[哈希](http://php.net/manual/en/function.sha1.php)处理，称之为用户令牌。

*   在您的数据库中存储令牌及其所属的用户及其到期日期。

*   现在，当用户使用他的 cookie 访问时，只需检查数据库中是否存在哈希并登录访问者。

*   当用户注销时，只需从数据库中删除该令牌。

（[更多信息](https://stackoverflow.com/questions/4671928/security-of-token-based-authentication)）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-12T02:34:25.367

`$_SESSION['user_id']`在设置实例的同时设置 cookie 。像这样 ：

```
$token = hash('md5',$_SESSION['user_id'] . time() . 'salt');
setcookie('token', $token, time() + (3600 * 24 * 30));
setcookie('user_id', $_SESSION['user_id'], time() + (3600 * 24 * 30)); // Cookie expires in 30 days 
```

保存`$token`在数据库中 user_id 行。

然后`$_SESSION['user_id']`为保存了 cookie 的用户设置 ，这样他们就不必以正常方式登录：

```
if (!isset($_SESSION['user_id']) {

    if (isset($_COOKIE['user_id']) && isset($_COOKIE['token']) {

       $saved_token = SELECT token FROM users table WHERE userID = $_COOKIE['user_id'];
         if ($_COOKIE['token'] == $saved_token) { 
         $_SESSION['user_id'] = $_COOKIE['user_id'];
       } else log out
       }
}  else log out
}
} 
```

也许这在安全方面更有效？

# java - 能否以编程方式确定由于 java 引用而保留了多少内存？

> ID：11919257
> 
> 赞同：3
> 
> 时间：2012-08-12T02:31:47.450
> 
> 标签：java

我不是在问单个引用占用多少内存。我想知道垃圾收集的反向意义。

即给定引用X，该引用有多少内存不允许垃圾收集器释放。

可以做到这一点吗？

显然，如果可以，并且如果一个人有一组引用（AB 和 C），那么很可能在保留的内存中会有一些重叠（即 A 和 B 可能都与同一位内存有某种联系），那就是好的。

重点是，尝试找出发生内存泄漏的原因。如果有人有一个包含长寿命对象的程序，则可以通过编程方式找出这些对象中的哪些正在增长，然后冲洗并在所述对象上重复。

那么有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T07:34:13.637

MemoryMeasurer 看起来很有趣，但我认为问题是询问您不知道的内存 - 即；内存意外膨胀，您正在寻找原因的线索。

VisualVM 有一个内存分析器，它会告诉你正在保留什么样的对象，这是一个很好的起点。我不知道有任何工具可以扭转这种情况并告诉您哪些对象保留了它们。

# android - 如何让外部活动的 startActivityForResult 工作？

> ID：11919259
> 
> 赞同：5
> 
> 时间：2012-08-12T02:32:33.013
> 
> 标签：android, start-activity

搜索高低并没有为我的问题产生任何结果。因此，我终于发帖请求帮助。

我有两个应用程序，都是我写的。App A 启动 App B，通过 Intent.putExtra() 传入参数。当应用程序 B 启动时，这工作得很好，参数传递得很好。

但是，我找不到向 App A 返回响应的方法。使用 startActivityForResult() 总是给我立即 onActivityResult() 和 RESULT_CANCELED。经过进一步检查，logcat 给了我一个警告，指出“活动正在作为新任务启动，因此取消活动结果”。

我尝试使用不同的启动模式、动作过滤器（android.intent.action.PICK）制作 App B 的 Activity，但我所做的没有任何改变。

我在尝试做不可能的事吗？据我了解，我尝试做的应该类似于使用第三方活动从设备的照片库中挑选图片。

**编辑：**

好的，我尝试从活动 B 中删除 LAUNCHER 类别，但它仍然不起作用。这是我的活动：

```
<activity android:name=".${CLASSNAME}" android:label="@string/app_name" android:configChanges="mcc|mnc|locale|keyboardHidden|orientation" android:launchMode="standard">
    <intent-filter>
        <action android:name="android.intent.action.PICK" />
    </intent-filter>
</activity> 
```

有人真的让这个工作吗？我开始怀疑启动另一个应用程序的活动永远不会返回结果，因为无论您在“意图过滤器”中放入什么，它似乎总是会启动一个新任务。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-27T20:29:00.563

确保您正在启动的 Activity 没有在清单中设置 android:launchMode 并检查 android:taskAffinity 没有被使用。看这里：

[http://developer.android.com/guide/topics/manifest/activity-element.html#aff](http://developer.android.com/guide/topics/manifest/activity-element.html#aff)

确保您用于启动活动的 Intent 上没有设置 FLAG_ACTIVITY_NEW_TASK。看这里：

[http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_NEW_TASK](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_NEW_TASK)

特别注意：“当调用者从正在启动的活动中请求结果时，不能使用此标志。”

如果 Activity 作为新任务的一部分启动，那么 Android 将立即使用 RESULT_CANCELED 调用 onActivityResult()，因为一个任务中的 Activity 不能将结果返回给另一个任务，只有同一任务中的 Activity 可以这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-13T08:23:08.893

遇到同样的问题，我查看了源代码，以及为什么要添加 NEW_TASK 标志。

事实证明，如果源活动 A 或目标活动 B 使用单实例启动模式，则会自动添加 NEW_TASK 标志：

```
 if (sourceRecord.launchMode == ActivityInfo.LAUNCH_SINGLE_INSTANCE) {
        // The original activity who is starting us is running as a single
        // instance...  this new activity it is starting must go on its
        // own task.
        launchFlags |= Intent.FLAG_ACTIVITY_NEW_TASK;
    } else if (r.launchMode == ActivityInfo.LAUNCH_SINGLE_INSTANCE
            || r.launchMode == ActivityInfo.LAUNCH_SINGLE_TASK) {
        // The activity being started is a single instance...  it always
        // gets launched into its own task.
        launchFlags |= Intent.FLAG_ACTIVITY_NEW_TASK;
    } 
```

当您拥有这两个应用程序时，您应该能够确保这些启动模式未在清单或意图中定义。

到目前为止，我找不到任何其他不情愿地设置 NEW_TASK 标志的实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T05:13:26.670

在你的活动 B 中，你应该有这样的东西，

```
Intent intent = new Intent();
setResult(Activity.RESULT_OK, intent);
finish(); 
```

或者可以，

```
setResult(Activity.RESULT_OK);
finish(); 
```

您不需要将任何数据传递给活动 A。

否则它将始终以结果代码结束`Activity.RESULT_CANCELED`；

> 如果子活动因任何原因（例如崩溃）失败，则父活动将收到带有代码 RESULT_CANCELED 的结果。

希望这可以帮助。

# java - how to make a textfield value available across different jframes in the same gui?

> ID：11919260
> 
> 赞同：0
> 
> 时间：2012-08-12T02:32:44.650
> 
> 标签：java, user-interface, netbeans

I'm creating a program that uses several different interacting menus to allow the user to access different parts of the system. I'm using Netbeans to help with the coding.

At the moment I'm stuck on a task.

When a user logs into the system through a "login" form, the system validates the details, and that user is redirected to either a `user_details` or an `admin_menu` depending on the credentials. That much works fine. From there, the user is able to access a form that allows them to update their details which are already saved in the database.

The only way I've found to limit the simple user to update their details is to ask them to login **again**, and from there retrieve their details so that they can be updated. This process is messy, but it works.

With that in mind how do I retrieve whatever was imputed in the textfield `Username` that is located in the jform Login from another jform (User_details), the `User_details` jform only opens once the login is successful (once that occurs login is discarded and `user_details` is opened).

## Here is part of my log in code :

```
String sql = "select * from user where Username =? and password=?";
        try {
            pst = con.prepareStatement(sql);
            pst.setString(1, username.getText());
            pst.setString(2, password.getText());
            rs = pst.executeQuery();

            int count = 0;
            while (rs.next()) {
                count = count + 1;
            }
            if (count == 1) {
                JOptionPane.showMessageDialog(null, "Access Granted");
                if ("manager@manage.com".equals(t.getText())) {
                    rs.close();
                    pst.close();
                    close();
                    Admin_menu am = new Admin_menu();
                    am.setVisible(true);
                } else {
                    rs.close();
                    pst.close();
                    close();
                    User_details M = new User_details();
                    M.setVisible(true);
                }
            } else {
                JOptionPane.showMessageDialog(null, "Incorrect Username or Password");
            }
        } catch (Exception ex) {
            JOptionPane.showMessageDialog(null, ex);

        } finally {
            try {
                rs.close();
                pst.close();
            } catch (Exception ex) {
            }
        } 
```

* * *

how can i make the User_details Jform get what ever was imputed in the textfield username?

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-12T03:40:30.627

如果您的程序没有结束（在用户登录一次之后），您可以将整个信息保存在一个字符串数组中，然后验证该数组并将用户重定向到给定的表单。例如。

```
//At login
String a[]=new String[2];
a[0]=username.getText();
a[1]=new String(pass.getPassword());
if(validate(a)){
   homescreen.setVisible(true);
}

//when user wishes to go to his homescreen
if(validate(a)){
   homescreen.setVisible(true);
} 
```

# algorithm - 使用 C++ 或 C 确定两点之间是否存在路径

> ID：11919261
> 
> 赞同：-4
> 
> 时间：2012-08-12T02:33:05.523
> 
> 标签：algorithm, graph-algorithm, shortest-path

我有一个由邻接矩阵表示的无向图。

我需要一个高效的代码，函数只需要返回真或假。

而且我知道[Dijkstra 的算法](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)可以工作，我想我不需要最短路径，我的邻接矩阵是：

```
a[i][j] = 1 or -1 
```

没有其他值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T02:49:49.830

抱歉，我没有注意到你的矩阵只包含 0 和 1。

如果只查询一次，也许 DFS 或 BFS 更好，只有`O(|V|+|E|)`

如果是双向路径，`Disjoint-set data structure`（[见维基百科](http://en.wikipedia.org/wiki/Disjoint-set_data_structure)）有效！

*   单源还是多源？
*   单查询还是多查询？

如果只有一个查询，则所有单源最短路径算法都可以。像：

*   贝尔曼福特`O(|V||E|)`
*   迪杰斯特拉`O(|V|^2)`
*   Dijkstra + 堆`Θ((|E|+|V|)log|V|)`
*   SPFA（贝尔曼福特使用队列）
*   ...

如果有很多查询，请考虑

*   Floyd-Warshall 算法`O(|V|^3)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T04:12:30.860

如果您只需要知道两点是否连接，我认为[http://en.wikipedia.org/wiki/Disjoint-set_data_structure](http://en.wikipedia.org/wiki/Disjoint-set_data_structure)会尽快完成这项工作。从它自己的集合中的每个点开始，然后对于两个点之间的每个链接，连接这些点所属的两个集合。

# java - Why doesn't AbstractCollection implement iterator()?

> ID：11919268
> 
> 赞同：1
> 
> 时间：2012-08-12T02:34:26.063
> 
> 标签：java, collections

From : [Collections Framework](http://java.sun.com/developer/onlineTraining/collections/Collection.html)

"the AbstractCollection class provides implementations for all the methods, except for the iterator() and size() methods, which are implemented in the appropriate subclass"

Could anyone make clear the reason why no default behavior for iterator() ? I could see why size () is not default from this question : [Why does AbstractCollection not implement size()?](https://stackoverflow.com/questions/6676512/why-does-abstractcollection-not-implement-size)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-12T02:37:24.703

What would it do?

The `iterator()` method is how the derived class actually provides the data.
All of the methods that `AbstractCollection` implements simply perform the appropriate logic using the data provided by the actual implementation in `size()` and `iterator()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T02:41:56.807

`AbstractCollection`不知道数据是如何存储的，所以实现有两种选择`iterator()`：

*   使其成为抽象方法，或
*   抛出`UnsupportedOperationException`它对许多其他方法的方式，例如`add`or `remove`。

只有第一个解决方案才有意义：集合必须至少允许读取，而写入可能是可选的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T16:59:05.500

考虑三个不同的集合：基于数组的列表、链表，以及基于树的排序列表。基于数组的集合的迭代器需要知道谁可以根据索引位置访问每个元素。链表的迭代器需要知道如何遍历元素之间的链接。基于树的集合的迭代器需要知道如何遍历树（例如广度优先或深度优先）。您可以看到所有这些行为都非常不同，并且是特定于实现的。

# android - Is there a way to detect incoming toll calls from Android?

> ID：11919269
> 
> 赞同：0
> 
> 时间：2012-08-12T02:34:29.577
> 
> 标签：android

Well, I'm gonna try to explain what's my problem. Here in Brazil we can make a normal call and the recieving person will pay for it. I mean, A calls to B, then if B picks the phone, then he pays and not the one who called to him.
When A calls to B in this way he must prefix a number before the B's real number. I mean, if B's phone number is 55555555, then A needs to call him like this: 909055555555\.

When i check it in incoming calls, it appears only as normal number of A without any information about it. Does anyone know how to detect this kind of call?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T02:43:07.040

试试这个链接

[http://www.krvarma.com/2010/08/detecting-incoming-and-outgoing-calls-in-android/](http://www.krvarma.com/2010/08/detecting-incoming-and-outgoing-calls-in-android/)

本质上，您注册了[android.intent.action.PHONE_STATE](http://developer.android.com/reference/android/telephony/TelephonyManager.html#ACTION_PHONE_STATE_CHANGED)意图并检查额外的意图以获得[EXTRA_INCOMING_NUMBER](http://developer.android.com/reference/android/telephony/TelephonyManager.html#EXTRA_INCOMING_NUMBER) 以了解谁在拨打您的电话。（您的 java 代码，然后查看数字并做出任何决定。）

该链接指出

> TelephonyManager.EXTRA_INCOMING_NUMBER。此变量包含传入的电话号码。请注意，当状态不是 TelephonyManager.EXTRA_STATE_RINGING 时，此变量将不存在。

我假设用户需要为您的应用程序接听电话检测号码，这可能会影响您的交易。

**更新**

我现在更好地理解了你的问题。从 9090* 数字到实数的转换似乎是由您的蜂窝运营商完成的。我认为您没有办法检测到它，因为您的手机看不到这两个电话之间的区别。它认为他们是同一个来电者。如果您与手机运营商交谈，您可能会得到更好的答案。

# android - Is there a Bookmark Contentprovider for Chrome to get browser history

> ID：11919270
> 
> 赞同：2
> 
> 时间：2012-08-12T02:35:11.030
> 
> 标签：android, google-chrome, android-contentprovider, bookmarks, android-contentresolver

I have an app that use ContentResolver to get the Browser history data with Browser.BOOKMARKS_URI. It works well with the stock Android browser. Now Google is moving to Chrome as the default browser. Does Chrome provide similar Contentprovider? I searched all over the web but could not find any information on this. Is there a doc for Chrome on Android released by Google yet? Thanks in advance!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T06:37:12.563

[https://groups.google.com/a/chromium.org/forum/?fromgroups=#!topic/chromium-bugs/ThAoOAYOPCk](https://groups.google.com/a/chromium.org/forum/?fromgroups=#!topic/chromium-bugs/ThAoOAYOPCk)表明现在应该可以了。

如果 Chrome 是系统默认浏览器（它应该在 Nexus7 中），则 BOOKMARKS_URI 权限应该自动解析 Chrome 的书签。如果不是默认的[https://code.google.com/p/chromium/issues/detail?id=138755](https://code.google.com/p/chromium/issues/detail?id=138755)表示 content-provider URI 是`content://com.android.chrome.browser/bookmarks`

# wcf - Wcf service refrence is not updating

> ID：11919272
> 
> 赞同：1
> 
> 时间：2012-08-12T02:35:50.290
> 
> 标签：wcf, wcf-binding

I had a operation contract with an int perameter, due to some reason I modified that to Guid and I update service refrence in client proxy project(it's in same solution).

But my client proxy is not update, it is still showing me the peramter as int. I also tried by deleting the service refrence and add service ref. again.

```
[OperationContract]
    [TransactionFlow(TransactionFlowOption.Allowed)]
    MembershipCreateStatus CreateUser(string application, string userName, string password, string email, string passwordQuestion, string passwordAnswer, bool isApproved, Guid branchId, string branchName); 
```

The branchId perameter was previously int.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T06:30:53.797

我尝试了所有建议，最后我将构建输出路径从**bin/debug 更改为 bin**并解决了错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T03:42:02.563

请交叉检查以下内容，

1.  您正在更新相同的参考，您进行了更改

2.  修改服务后，确保编译、运行并再次托管。

情况可能是您在代码中修改了服务，但仍然引用以前托管的服务...

我希望它有帮助

谢谢 DJ

[@调试模式](https://twitter.com/debug_mode "＃调试模式")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T15:43:20.103

服务正常运行后，您需要运行[svcutil](http://msdn.microsoft.com/en-us/library/aa347733.aspx)工具来重新生成客户端代理。

# postgresql - Can not enter and change PostgreSQL pg_hba.conf file

> ID：11919275
> 
> 赞同：4
> 
> 时间：2012-08-12T02:36:14.303
> 
> 标签：postgresql, terminal, vi

I am running OSX, I am trying to change the PostgreSQL authentication options in the pg_hba.conf file. The problem is I can't get into it. I have tried

```
sudo su - postgres 
```

Then used vi to try to edit it. When I open the file with vi, vi displays as if it's a new file, showing only tilde lines. If I try to write that new file, I get an error saying I am not able to do so.

PLease help, thanks

this is my directory:

```
$ sudo find / -name pg_hba.conf
Password:
find: /dev/fd/3: Not a directory
find: /dev/fd/4: Not a directory
/Library/PostgreSQL/9.1/data/pg_hba.conf 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-12T04:55:30.633

猜测一下，您试图在一个实际不存在的目录中编辑文件，因为您系统上的路径不同。如果您显示您运行的确切命令、确切的错误消息文本、您的 PostgreSQL 版本以及您如何安装 Pg（Homebrew、EnterpriseDB 软件包等），将会有所帮助。

编辑`pg_hba.conf`：

在 psql 中，运行：

```
SHOW hba_file; 
```

并查看它报告的位置。那是您必须编辑的文件。如果无法进入`psql`，则必须在文件系统中找到它；尝试：

```
sudo find / -name pg_hba.conf 
```

当您找到正确的路径后，您无需使用登录`su`来编辑它；`postgres`只需使用：

```
sudo vim /path/to/pg_hba.conf 
```

例如在我的系统上：

```
sudo vim /var/lib/pgsql/data/pg_hba.conf 
```

如果您喜欢使用不同的编辑器，任何可以从命令行运行的东西都应该可以工作，包括大多数 GUI 编辑器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-03T08:57:02.743

你可以使用这种方式

```
 sudo vi /etc/postgresql/9.1/main/pg_hba.conf 
```

# javascript - Javascript 显然断开了与 Django 的连接

> ID：11919276
> 
> 赞同：0
> 
> 时间：2012-08-12T02:37:03.727
> 
> 标签：javascript, jquery, django, pipe, broken-pipe

当 javascript 尝试重新加载页面时，以下错误会从 Django 发送给我的顾问。

```
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/wsgiref/handlers.py", line 86, in run
[11/Aug/2012 22:30:23] "GET /posting/drafts HTTP/1.1" 200 2785
    self.finish_response()
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/wsgiref/handlers.py", line 127, in finish_response
    self.write(data)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/wsgiref/handlers.py", line 210, in write
    self.send_headers()
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/wsgiref/handlers.py", line 268, in send_headers
    self.send_preamble()
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/wsgiref/handlers.py", line 192, in send_preamble
    'Date: %s\r\n' % format_date_time(time.time())
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/socket.py", line 324, in write
    self.flush()
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/socket.py", line 303, in flush
    self._sock.sendall(view[write_offset:write_offset+buffer_size])
error: [Errno 32] Broken pipe
----------------------------------------
Exception happened during processing of request from ('127.0.0.1', 57954)
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/SocketServer.py", line 582, in process_request_thread
    self.finish_request(request, client_address)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/SocketServer.py", line 323, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "/Library/Python/2.7/site-packages/Django-1.4-py2.7.egg/django/core/servers/basehttp.py", line 139, in __init__
    super(WSGIRequestHandler, self).__init__(*args, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/SocketServer.py", line 640, in __init__
    self.finish()
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/SocketServer.py", line 693, in finish
    self.wfile.flush()
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/socket.py", line 303, in flush
    self._sock.sendall(view[write_offset:write_offset+buffer_size])
error: [Errno 32] Broken pipe 
```

据我了解，这意味着谷歌浏览器在服务器完成发送页面之前断开了连接。为什么？我该如何解决？

这是javascript（Noty是一个确认框插件。只要知道我在旁边放一个“ ***** *** ”的东西是实际执行的代码）：

```
function delete_draft(id, name) {
    var text = 'Are you sure you want to delete "' + name + '"?'; //*********
    var confirm = noty({
        text: text,
        layout: 'center',
        type: 'confirm',
        modal: true,
        buttons: [

        {addClass: 'btn btn-danger', text: 'Cancel', onClick: function($noty) {
            $noty.close();
        }
        },
            {addClass: 'btn btn-primary', text: 'Delete', onClick: function($noty) {
                $.post('/ajax/drafts/delete', {id:id}, function(data) { //**********
                    document.location.reload(true); //*******
                });
                document.location.reload(true); //*******
            }
            }
    ]});
} 
```

这是 Django 中的视图：

```
def is_draft_owner(id, user): # It might be a coincidence, but when I added this the problems started. 
    print "test"
    if user.pk is Draft.objects.get(id = id).user_id:
        return True
        print "checl"
    print user.id
    print Draft.objects.get(id = id).user_id
    return False

def document_delete(request):
    if is_draft_owner(request.POST['id'], request.user):
        draft = Draft.objects.get(id = request.POST['id'])
        draft.delete()
        return HttpResponse("done") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T07:36:50.170

为什么`print`在函数中使用 '？他们将无法打印任何东西，除非在 shell 环境中。

我建议将您的函数重写为：

```
def is_draft_owner(id = None, user = None):
    if id and user:
         return user.pk is Draft.objects.get(id = id).user_id
    else:
         return False 
```

我建议尝试一下，如果没有提供 id 或用户，这可能会解决您的问题。

此外，您是否在 Draft() 中为您的 user_id 字段使用了 ForeignKey？如果是这样，您可以检查以下内容：`user is Draft.objects.get(id = id).user_id`。

**更新：**

如果提供的 id 无效，django 会抛出异常。您可能也想抓住并处理它。

原谅我有限的 jQuery 经验，但不是`{'id':id}`吗？这就是我一直使用它的方式。

# c# - 空引用异常字符串数组

> ID：11919282
> 
> 赞同：-3
> 
> 时间：2012-08-12T02:38:02.393
> 
> 标签：c#, arrays, list, arraylist, nullreferenceexception

我得到这个空引用错误

```
private int Cont;
private List<string> myStrings;
private ArrayList str;
private string[] strs;

     myclass()
     {
        Cont = 0;
        myStrings = new List<string>();
        str = new ArrayList();
        strs =new string[27];   
        for(int i = 0; i < 27;i++)
        {
            strs[i] = "";
        }
     }

    public void AddTexture(string name)
    { 
        Console.WriteLine("Count "+Cont);
        Console.WriteLine("ive got the texture "+name);
        myStrings.Add(name);
        //strs[Cont] = name;
        //str.Add(name);
        Cont++;
     } 
```

如您所见，我已尝试使用列表，数组列表和数组，但当我尝试添加第一个值时，它们都不起作用第一个写行

知道我做错了什么吗？谢谢你，错误是每当我试图在 2 console.writeline 之后填充数组、arraylist 或函数 AddTexture 中的列表时，我已经评论了这两行，但那是因为这些是我尝试使用数组、arraylist 和名单

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T03:14:00.067

一切都好，虽然我有点晚了：

综上所述，问题出在顺序上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T03:05:48.053

因此，没有人会阅读 30 条评论来找出它已经解决的问题：

*何时何地调用 AddTexture？

AddTexture 在构造函数之前被调用吗？——卢克·怀亚特*

> 哇，就是这样，我在 3 个不同的对象中对其进行了初始化，其中 1 个在构造函数之前被调用，非常感谢您，如果您将其发布为答案，我会给您加分

# c# - RichTextBox latest line

> ID：11919283
> 
> 赞同：1
> 
> 时间：2012-08-12T02:38:19.823
> 
> 标签：c#, winforms, richtextbox

let's say I have a RichTextbox that contains the following text:

> Error
> Warning
> Info

And let's say I want to change the last word's color to green.
How would I do that? I do have some code to change the color of some text (a replace function), but all I want is to ONLY change the latest line if you know what I mean...

I almost forgot, here is the code that I use to change the word's colors:

```
static void ReplaceText(RichTextBox box, string phrase, Color color)
    {
        box.HideSelection = true;
        int pos = box.SelectionStart;
        string s = box.Text;
        for (int ix = 0; ; )
        {
            int jx = s.IndexOf(phrase, ix, StringComparison.CurrentCultureIgnoreCase);
            if (jx < 0) break;
            box.SelectionStart = jx;
            box.SelectionLength = phrase.Length;
            box.SelectionColor = color;
            ix = jx + 1;
        }
        box.SelectionStart = pos;
        box.SelectionLength = 0;
    } 
```

So in other words, how do I ONLY edit the latest line? Thanks!

EDIT: BTW! The colors need to stay there, it's let's say a console output window.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T02:53:55.473

这对你有用：

```
public void HighlightLastLine(RichTextBox TextControl, Color HighlightColor)
{
    TextControl.Text = TextControl.Text.Trim();
    TextControl.SelectionStart = 0;
    TextControl.SelectionLength = 0;
    TextControl.SelectionColor = Color.Black;
    string LastLineText = TextControl.Lines[richTextBox1.Lines.Count() - 1];
    int LastLineStartIndex = richTextBox1.Text.LastIndexOf(LastLineText);
    TextControl.SelectionStart = LastLineStartIndex;
    TextControl.SelectionLength = TextControl.Text.Length - 1;
    TextControl.SelectionColor = HighlightColor;
} 
```

用法：

```
HighlightLastLine(richTextBox1, Color.Indigo); 
```

基本上，我们在这里所做的是先进行一些清理，然后使用 Lines 字符串数组选择控件的最后一行。然后我们得到该字符串的最后一个索引（如果我们有重复），我们只是告诉控件从行的开头开始着色并一直到结尾。最后，我们应用在参数中传递的颜色。

**编辑：**

添加一个允许自定义文本突出显示的重载，并且如果在 ClearColors 参数中传递了一个错误标志，也不会清除文本。

```
 public void HighlightLastLine(RichTextBox TextControl, string TextToHighlight, Color HighlightColor, bool ClearColors = true)
    {
        TextControl.Text = TextControl.Text.Trim();
        if (ClearColors)
        {
            TextControl.SelectionStart = 0;
            TextControl.SelectionLength = 0;
            TextControl.SelectionColor = Color.Black;
        }
        int LastLineStartIndex = richTextBox1.Text.LastIndexOf(TextToHighlight);
        if (LastLineStartIndex >= 0)
        {
            TextControl.SelectionStart = LastLineStartIndex;
            TextControl.SelectionLength = TextControl.Text.Length - 1;
            TextControl.SelectionColor = HighlightColor;
            TextControl.SelectionStart = 0;
            TextControl.SelectionLength = 0;
        }
    } 
```

用法：

```
HighlightLastLine(richTextBox1, "Michael Jackson", Color.Indigo, false); 
```

这将尝试找到迈克尔杰克逊的最后一个索引并将其着色。请注意，在最后一个参数中提供了一个 false ，这将允许保留现有颜色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-02T22:25:02.787

感谢DelegateX！这对我有用...

```
 public void HighlightLastLine(RichTextBox rtb1, Color fgColour)
    {
        if (rtb1.Text != "")
        {
            // Cleanup leading/trailing whitespace
            rtb1.Text = rtb1.Text.Trim();
            rtb1.SelectionStart = 0;
            rtb1.SelectionLength = 0;
            rtb1.SelectionColor = Color.Black;
            // Get index of first char on last line
            string LastLineText = rtb1.Lines[rtb1.Lines.Count() - 1];
            int LastLineStartIndex = rtb1.Text.LastIndexOf(LastLineText);
            // Set selection
            rtb1.SelectionStart = LastLineStartIndex;
            rtb1.SelectionLength = rtb1.Text.Length;
            // Change colour
            rtb1.SelectionColor = fgColour;
        }
    } 
```

# html - 使用 HTML标签来解释内容

> ID：11919284
> 
> 赞同：20
> 
> 时间：2012-08-12T02:38:20.807
> 
> 标签：html, seo, abbreviation, abbr

使用`<abbr>`标签来解释实际上不是缩写的单词，而是产生对内容的“悬停”解释，这是一种不好的形式吗？

如果是，为什么它的形式不好，什么是好的 HTML 替代品？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-12T02:56:04.833

您实际上不需要使用`<abbr>`标签来使用`title=`属性。您可以将其应用于许多事物，包括`<span>`标签。

使用示例：

```
<span title="This is my explanation here.">Confusing text</span> 
```

来自 w3schools.com：通过标记缩写，您可以为浏览器、拼写检查器、翻译系统和搜索引擎索引器提供有用的信息。

换句话说，您将在没有理由的情况下通过错误地使用`<abbr>`标签向搜索引擎提供误导性信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-01-23T14:50:34.803

Bootstrap 4 将[`<abbr>`](https://getbootstrap.com/docs/4.2/content/typography/#abbreviations)使用虚线边框底部和帮助光标设置 HTML 元素的样式：

```
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js"></script>

<p>You can use <abbr title="Cascading Style Sheets" class="text-info font-italic initialism">CSS</abbr> to style your <abbr title="HyperText Markup Language" class="text-info font-italic initialism">HTML</abbr>.</p>
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T05:01:58.890

如果您希望搜索引擎更好地理解您的内容，您应该使用该标签来解释网页内令人困惑的文字。

仅将其用于设计目的并没有什么坏处，但如果浏览器不支持它，您的用户将会受到影响。对于一般用途，简单的`<span title="Explanation">Abbr</span>`效果更好；当然，您需要添加一些带有漂亮 CSS 规则的样式；）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-03-19T15:15:55.420

HTML 元素定义缩写或首字母缩略词。

标记缩写可以为浏览器、翻译系统和搜索引擎提供有用的信息。

像

```
<p> <abbr title="Unknown Flying Object"> UFO </abbr> 
```

# c - check the null terminating character in char*

> ID：11919285
> 
> 赞同：6
> 
> 时间：2012-08-12T02:38:35.873
> 
> 标签：c, string

I was just trying to see how to check for the null terminating character in the `char *` array but I failed. I can find the length using the `for` loop procedure where you keep on checking each element, but I wanted to just use the `while` loop and find the null terminating string. I never seem to exit the `while` loop. Any reason why this is so?

```
char* forward = "What is up";
int forward_length = 0;
while (*(forward++)!='/0') {
    forward_length++;
    printf("Character %d", forward_length);
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-12T02:43:03.920

您已使用`'/0'`而不是`'\0'`. 这是不正确的：the`'\0'`是一个空字符，while`'/0'`是一个多字符文字。

此外，在 C 中，可以在您的条件下跳过零：

```
while (*(forward++)) {
    ...
} 
```

是检查字符、整数、指针等是否为零的有效方法。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-12T02:43:18.540

空字符是`'\0'`，不是`'/0'`。

```
while (*(forward++) != '\0') 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-08-12T06:17:59.010

为了完成这一点：虽然其他人现在解决了你的问题:) 我想给你一个很好的建议：*不要重新发明轮子*。

```
size_t forward_length = strlen(forward); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-08-12T02:43:34.897

你`'/0'`应该是`'\0'`..你的斜线反转/倾斜错误的方式。你`while`应该看起来像：

```
while (*(forward++)!='\0') 
```

尽管`!= '\0'`您的表达式的一部分在这里是可选的，因为只要它的计算结果为*非零*，循环就会继续（null 被认为是零并将终止循环）。

所有“特殊”字符（即不可打印字符的[转义序列](http://h21007.www2.hp.com/portal/download/files/unprot/fortran/docs/lrm/lrm0035.htm)）都使用反斜杠，例如 tab`'\t'`或 newline `'\n'`，对于 null`'\0'`也是如此，因此很容易记住。

# c++ - C++ ambiguous operator overload error

> ID：11919286
> 
> 赞同：0
> 
> 时间：2012-08-12T02:39:00.740
> 
> 标签：c++, operator-overloading

I am finally getting my assignment to be almost complete, however now I am getting a whole new set of errors when I compile it.

```
#include <iostream>

using namespace std;

class clockType
{
      friend ostream& operator<<(ostream&, const clockType&);
      friend istream& operator>>(istream&, clockType&);
public:
      void setTime (int hours, int minutes, int seconds);
      void getTime (int& hours, int& minutes, int& seconds) const;     
      clockType operator++();
      bool operator==(const clockType& otherClock) const;
      bool operator!= (const clockType& otherClock) const;
      bool operator<=(const clockType& otherClock) const;
      bool operator<(const clockType& otherClock) const;
      bool operator>=(const clockType& otherClock) const;
      bool operator>(const clockType& otherClock) const;
      clockType ();
      clockType (int hours = 0, int minutes = 0, int seconds = 0);
private:
        int hr;
        int min;
        int sec;
};
clockType clockType::operator++()
{
          sec++;
          if (sec > 59)
          {
              sec = 0;
              min++;
              if (min > 59)
              {
                      min = 0;
                      hr++;
                      if (hr > 23)
                      hr = 0;
              }
          }
          return *this;
}
bool clockType::operator==(const clockType& otherClock) const
{
     return (hr == otherClock.hr && min == otherClock.min && sec == otherClock.sec);
}
bool clockType::operator<=(const clockType& otherClock) const
{
     return ((hr < otherClock.hr) || (hr == otherClock.hr && min < otherClock.min) || (hr == otherClock.hr && min == otherClock.min && sec <= otherClock.sec));
}
bool clockType::operator!=(const clockType& otherClock) const
{
          return (hr != otherClock.hr || min != otherClock.min || sec != otherClock.sec);
}
bool clockType::operator<(const clockType& otherClock) const
{
     return ((hr < otherClock.hr) || (hr == otherClock.hr && min < otherClock.min) || (hr == otherClock.hr && min == otherClock.min && sec < otherClock.sec));
}
bool clockType::operator>=(const clockType& otherClock) const
{
     return ((hr > otherClock.hr) || (hr == otherClock.hr && min > otherClock.min) || (hr == otherClock.hr && min == otherClock.min && sec >= otherClock.sec));
}
bool clockType::operator>(const clockType& otherClock) const
{
     return ((hr > otherClock.hr) || (hr == otherClock.hr && min > otherClock.min) || (hr == otherClock.hr && min == otherClock.min && sec > otherClock.sec));
}

void clockType::setTime(int hours, int minutes, int seconds)
{
     if (0 <= hours && hours < 24)
     hr = hours;
     else
     hr = 0;
     if (0 <= minutes && minutes < 60)
     min = minutes;
     else
     min = 0;
     if (0 <= seconds && seconds < 60)
     sec = seconds;
     else
     sec = 0;
}
void clockType::getTime(int& hours, int& minutes, int& seconds)const
{
     hours = hr;
     minutes = min;
     seconds = sec;
}
clockType::clockType(int hours, int minutes, int seconds)
{
 setTime(hours, minutes, seconds);
}
ostream& operator<<(ostream& osObject, const clockType& timeOut)
{
         if (timeOut.hr < 10)
         osObject << '0';
         osObject << timeOut.hr << ':';
         if (timeOut.min < 10)
         osObject << '0';
         osObject << timeOut.min << ':';
         if (timeOut.sec < 10)
         osObject << '0';
         osObject << timeOut.sec << ':';
         return osObject;
}
istream& operator>>(istream& is, clockType& timeIn)
{
         char ch;
         is >> timeIn.hr;
         if (timeIn.hr < 0 || timeIn.hr >=24)
         timeIn.hr = 0;
         is.get(ch);
         is >> timeIn.min;
         if (timeIn.min < 0 || timeIn.min >= 60)
         timeIn.min = 0;
         is.get(ch);
         is >> timeIn.sec;
         if (timeIn.sec < 0 || timeIn.sec >= 60)
         timeIn.sec = 0;
         return is;
}
int main() 
{ 
   clockType  myClock(4, 9, 22);
   clockType yourClock ();

   cout << "myClock = " << myClock << endl;
   cout << "yourClock = " << yourClock << endl;
   cout << "enter the time in form " << "hr:min:sec ";
   cin >> myClock;
   cout << endl;
   cout << "The new time of myClock = " << myClock << endl; 
   ++myClock;
   cout << "After incrementing the time, " << "myClock = " << myClock << endl;
   yourClock.setTime(15, 20, 25);
   cout << "After setting the time, " << "yourClock = " << yourClock << endl;
   if (myClock == yourClock)
   cout << "The times of myClock and " << "yourClock are equal." << yourClock << endl;
   else
   cout << "The times of myClock and " << "yourClock are not equal." << endl;
   if (myClock <= yourClock)
   cout << "The time of myClock is " << "less than or equal to " << endl << "the time of yourClock " << endl;
   else
   cout << "The time of myClock is " << "greater than the time of " << "yourClock." << endl;
   return 0;
} 
```

The error that I am getting is:

> In funct main();
> call of overloaded 'clockType()' is ambiguous candidates are: clockType::clockTYpe(int, int, int) clockType::clockType().

I am unsure of what this is asking of me or what the error really is.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T03:26:13.467

在您的代码中，

```
 clockType ();
  clockType (int hours = 0, int minutes = 0, int seconds = 0); 
```

上面两个都可以不带任何参数调用，所以都是**默认构造函数**。

由于您使用的是默认构造，因此编译器无法知道您的意思是上述哪一项。

这是模棱两可的。

一种解决方案是删除参数默认值。

顺便说一句，你`operator++`有一个小问题；彻底测试发现问题！;-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T02:49:22.920

如果没有参数，您的两个构造函数都是候选者。

```
clockType();                                                 // takes zero parameters.
clockType (int hours = 0, int minutes = 0, int seconds = 0); // can take zero parameters.

// Thus the compiler does not know whaich one to call. 
```

这也不是你所期望的：

```
clockType yourClock(); 
```

这是一个接受零参数并返回一个时钟类型对象的函数的前向声明。你真正的意思是：

```
clockType yourClock;

// or
clockType yourClock = clockType(); 
```

这被称为[“最令人烦恼的解析”](https://stackoverflow.com/q/1424510/14065)问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T02:46:07.950

```
clockType ();
clockType (int hours = 0, int minutes = 0, int seconds = 0); 
```

这些都可以用 0 个参数构造。

很有可能，您应该摆脱 ，`clockType();`因为我假设这两个构造函数在不带参数的情况下无论如何都会做同样的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-12T02:46:28.977

此错误似乎与运算符声明无关。定义的构造函数为您创造了一个模棱两可的情况。

```
clockType ();
clockType (int hours = 0, int minutes = 0, int seconds = 0); 
```

调用 clockType() 时的意图是什么？根据上面的定义，有两个签名可以匹配您的请求。在没有构造函数参数的情况下，无参数版本和具有所有默认值的版本在逻辑上都可以工作。您需要确定他们的个人意图是什么，然后编辑他们的定义以匹配。

# python - Python Port Listener

> ID：11919290
> 
> 赞同：0
> 
> 时间：2012-08-12T02:40:10.650
> 
> 标签：python

I would like to code a Python program that listens on a range of ports for incoming sin requests (possibly ack and fin as well). I then want this program to log the time, ip, and port of these sent packets.

Only thing is I really don't know where to start. I don't want anyone to hold my hand here, but I do need someone to point me in the right direction

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T02:44:32.487

您可能正在寻找原始套接字，请参阅[http://docs.python.org/library/socket.html](http://docs.python.org/library/socket.html)

如果您只想在端口范围内捕获接收到的数据包并记录它，您可能应该省去麻烦并使用 Wireshark [http://www.wireshark.org/](http://www.wireshark.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T03:53:13.753

如果是为了教育目的；你可以使用[scapy](http://www.secdev.org/projects/scapy/doc/usage.html#interactive-tutorial)作为网络嗅探器。否则，只需将防火墙配置为记录适当的事件就足够了。

# html - 元素字体默认为 MS Shell Dlg 我正在使用以下内容：body { font-family: Verdana, Arial, Helvetica, sans-serif; 背景：url(/Content/images/bg.png) 无重复中心顶部；最小高度：100%；我没有设置我的选择框的样式，但我注意到使用 firebug 他们有一个 MS Shell Dlg 字体。为什么会这样，我怎样才能使字体与正文相同？他们对所有浏览器使用不同字体的事实也一样吗？浏览器通常在浏览器样式表中

> ID：11919296
> 
> 赞同：2
> 
> 时间：2012-08-12T02:41:43.543
> 
> 标签：html, css

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T05:05:00.240

浏览器通常对`select`浏览器样式表中元素的字体进行设置。这些设置可能因浏览器而异。要使字体与正文的字体相同，请将它们设置为相同，例如

```
body, select {
  font-family: Verdana, Arial, Helvetica, sans-serif;
} 
```

参照。质疑[继承 SELECT/OPTION 中的“font-family”样式](https://stackoverflow.com/questions/413017/inherit-font-family-style-in-select-option)。由于在较旧的浏览器（例如，IE 7）中缺乏支持，使用该`inherit`值不如显式设置可靠。

请注意，字体大小也可能不同，而且通常是不同的——浏览器在表单字段中的字体大小通常会有所减小。如果您也希望使字体大小相同，请将以下内容添加到上面的规则中：

```
 font-size: 100%; 
```

# openid - 将 OpenID 添加到我的网站

> ID：11919300
> 
> 赞同：0
> 
> 时间：2012-08-12T02:42:38.833
> 
> 标签：openid

我想将 OpenID 添加到我的网站。我的问题是：如何获取刚刚登录我网站的用户的 ID 或唯一标识符？我想使用 ID 将用户首选项保存在我的数据库中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T17:30:27.413

您可以使用用户的 OpenID 标识符本身作为用户的唯一 ID。

# javascript - chrome 的 user.agent 值

> ID：11919301
> 
> 赞同：11
> 
> 时间：2012-08-12T02:42:39.650
> 
> 标签：javascript, gwt, google-chrome-devtools

快速提问。带有 gwt 2.4 的 chrome 浏览器的 user.agent 值是多少？我正在尝试限制我的 chrome 的排列，但它无法编译（使用的值 - 'chrome'）。但是，这可以正确编译

```
<set-property name="user.agent" value="safari" /> 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-12T05:43:02.440

safari 和 chrome 的排列是相同的，并被命名为“safari”。Safari 设置也适用于 chrome。您可以检查“com.google.gwt.user.rebind.UserAgentPropertyGenerator”。

但是，如果您希望将其限制为特别是 chrome，您可以[在此处查看](http://bear-z.com/gwt/patching-google-web-toolkit-for-compiling-chrome-permutation/)

# c# - 无法捕获 System.Xaml.XamlParseException

> ID：11919302
> 
> 赞同：2
> 
> 时间：2012-08-12T02:42:39.927
> 
> 标签：c#, wpf, xaml, exception-handling, xml-parsing

我有一个空字符串，当我在 XmlReader 上使用它时，它当然会给出解析“根元素丢失”异常，我试图捕捉它但`try,catch`没有响应，有没有办法捕捉这个异常或检测到我的字符串不可解析。

```
System.IO.StringReader stringReader = new System.IO.StringReader("");

System.Xml.XmlReader xmlReader = System.Xml.XmlTextReader.Create(stringReader, new System.Xml.XmlReaderSettings());

try
{
    object ob = System.Windows.Markup.XamlReader.Load(xmlReader);//
    mycv = (Canvas)ob;
}
    catch (Exception ex) //even if I use System.Xaml.XamlParseException
{
    mycv = new Canvas();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T09:19:49.610

```
object ob = System.Windows.Markup.XamlReader.Load(xmlReader); 
```

在这里，您使用的是 Windows 标记 XamlReader，所以`System.Xaml.XamlParseException`不会被扔到这里，而是应该 catch `System.Windows.Markup.XamlParseException`。

这应该适合你 -

```
try
{
    object ob = System.Windows.Markup.XamlReader.Load(xmlReader);//
    mycv = (Canvas)ob;
}
    catch (System.Windows.Markup.XamlParseException ex)
{
    mycv = new Canvas();
} 
```

# ruby-on-rails - 如何关联这三个模型以获得适当的输出？

> ID：11919303
> 
> 赞同：0
> 
> 时间：2012-08-12T02:42:50.830
> 
> 标签：ruby-on-rails, ruby, associations, sinatra, ruby-datamapper

我刚开始使用 Ruby。我正在 Sinatra 中制作一个小应用程序，并且正在使用带有 sqlite3 db 的 Datamapper。

以下是我正在创建的三个模型。

```
class Team
  include DataMapper::Resource
  property :id, Serial
  property :name, String, :required => true
  property :created_at, DateTime
  property :updated_at, DateTime
end

class Poll
  include DataMapper::Resource
  property :id, Serial
  property :name, String, :required => true
  property :created_at, DateTime
  property :updated_at, DateTime
end

class Ranking
  include DataMapper::Resource
  property :year, Integer
  property :week, Integer
  property :ranking, Integer
  property :votes, Integer
  property :created_at, DateTime
  property :updated_at, DateTime

  belongs_to :team, :key => true
  belongs_to :poll, :key => true
end 
```

我想要做的是查询某个民意调查、周和年的排名模型。

返回的结果应该是该轮询的所有排名与相关团队到每个排名编号。

因此，请获取每个排名的排名和相应的团队，例如 2011 - 第 1 周或 2011 - 第 7 周等...

我整天都在努力弄清楚如何让它发挥作用，但我无处可去，所以这就是为什么我现在在这里发帖寻求帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T04:06:40.433

首先让我说我从未听说过 Datamapper gem。继续思考 Rails 模型和迁移对我来说会更容易，所以我希望你不介意我这样做。

我对数据模型有一些评论：

*   除非我误解了您的模型，否则我认为所有与日期相关的字段都应该放在民意调查表而不是排名表中。排名表中的字段应该描述团队和民意调查之间的关系。
*   您应该使用单个字段作为投票日期，然后使用类似于`commercial`控制器中的方法来检索某一周内的投票。（来源：[http](http://apidock.com/ruby/Date/commercial/class) ://apidock.com/ruby/Date/commercial/class ）
*   如果您愿意，您还可以存储与投票相关的其他数据，例如投票总数。这些也将进入民意调查表。

## 楷模

应用程序/模型/team.rb

```
class Team < ActiveRecord::Base
    has_many :rankings
    has_many :polls, through: :rankings
    validates :name, :presence => true
end 
```

应用程序/模型/poll.rb

```
class Poll < ActiveRecord::Base
    has_many :rankings
    has_many :teams, through: :rankings
    validates :name, :presence => true
end 
```

应用程序/模型/ranking.rb

```
class Ranking < ActiveRecord::Base
    belongs_to :team
    belongs_to :poll
end 
```

## 迁移

db/migrate/create_teams.rb

```
class CreateTeams < ActiveRecord::Migration
    def change
        create_table :teams do |t|
            t.string :name
            t.timestamps
        end
    end
end 
```

db/migrate/create_polls.rb

```
class CreatePolls < ActiveRecord::Migration
    def change
        create_table :polls do |t|
            t.string :name
            t.date :published_at
            t.timestamps
        end
    end
end 
```

db/migrate/create_rankings.rb

```
class CreateRankings < ActiveRecord::Migration
    def change
        create_table :rankings do |t|
            t.integer :team_id
            t.integer :poll_id
            t.integer :votes
            t.integer :ranking
            t.timestamps
        end
    end
end 
```

请让我知道您是否设法让它工作，因为我没有时间设置测试应用程序来检查关系。

# perl - 如何获得有关 root.pm 的催化剂帮助？

> ID：11919308
> 
> 赞同：0
> 
> 时间：2012-08-12T02:43:32.280
> 
> 标签：perl, catalyst

我正在从书中学习催化剂`the definitive guide to catalyst`。催化剂的版本低约1.58，但现在稳定的催化剂和perl不同，所以助手生成的一些文件与书上的不完全一致。

例如，root.pm 有`=head1 METHODS`.

*   如何获得有关文件框架的官方帮助？代码是否超出 Perl 或 Catalyst？
*   什么是流行的 Perl/Catalyst BBS 或网站？这个站点可能不是关于 Perl/Catalyst 的热门站点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T02:57:45.950

`=head1 METHODS`不是代码，而是文档（参见[POD 格式](http://perldoc.perl.org/perlpod.html)）

你的书应该没问题。您可以在线查看文档：

*   [CPAN](http://search.cpan.org/~zarquon/Catalyst-Manual-5.9004/lib/Catalyst/Manual/Intro.pod)
*   [Catalyst 的网站](http://www.catalystframework.org/)（您会看到他们最新书籍的链接）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T03:33:53.287

还有一个[邮件列表，您可以订阅](http://lists.scsys.co.uk/cgi-bin/mailman/listinfo/catalyst)和提问，以及搜索旧的讨论线程。

我怀疑您遇到的问题与您在其他问题中提出的问题密切相关，一旦您的服务器启动，您就可以了。

# java - java applet 和应用程序的paint() 和repaint() 方法的行为方式是否相同？

> ID：11919311
> 
> 赞同：0
> 
> 时间：2012-08-12T02:44:00.073
> 
> 标签：java, applet, paint, repaint

我是java新手，今天我发现JFrame也有方法paint和repaint。所以我的问题是方法paint和repaint的行为是否与java applet中的相同？应用程序会像 applet 一样自行更新吗？

非常感谢你 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T02:50:43.840

当作为应用程序或小程序运行时， Java Swing 显示功能的行为应该与`paint`和的行为完全相同。`repaint`

更一般地说，Swing 旨在提供一致的视觉效果和行为，无论应用程序是作为应用程序运行还是作为小程序运行。

# c# - 无效验证后停止插入

> ID：11919313
> 
> 赞同：0
> 
> 时间：2012-08-12T02:44:29.927
> 
> 标签：c#, sql-server, c#-4.0

我想在无效验证后停止插入数据库。就像下面的代码片段显示了无效电话号码的消息，但它仍然将代码插入到数据库中。还有一个问题，我想在我认为有这个潜在错误的整个程序上应用这个规则。

```
private void button1_Click(object sender, EventArgs e)
        {
            Regex regexObj = new Regex(@"^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$");

            if (regexObj.IsMatch(textBox3.Text))
            {
                string formattedPhoneNumber =
                    regexObj.Replace(textBox3.Text, "($1) $2-$3");
            }
            else
            {
                MessageBox.Show("Invalid Phone Number! \nFormat is (XXX) XXX-XXXX");
            }

            if (string.IsNullOrEmpty(textBox1.Text) || textBox1.Text.Trim().Length == 0)
            {
                MessageBox.Show("Field can't be left blank!");
                return;
            }
            if (string.IsNullOrEmpty(textBox2.Text) || textBox2.Text.Trim().Length == 0)
            {
                MessageBox.Show("No Name for the Author!");
                return;
            }

            SqlConnection con = new SqlConnection("Server = DAFFODILS-PC\\SQLEXPRESS;Database=Library;Trusted_Connection=True;");
            SqlCommand sql1 = new SqlCommand("INSERT into Members VALUES('" + textBox1.Text + "' , '" + textBox2.Text + "','" + textBox3.Text + "')", con);
            con.Open();
            sql1.ExecuteNonQuery();
            con.Close();
            this.membersTableAdapter.Fill(this.booksDataSet.Members);
            MessageBox.Show("Data Added!");
            textBox1.Text = "";
            textBox2.Text = "";
            textBox3.Text = "";
            textBox1.Focus();

        }
    } 
```

我想，我必须为此使用一种方法，但我不知道如何。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T02:59:25.157

其中一件事与其他事情不同：

```
 else
        {
            MessageBox.Show("Invalid Phone Number! \nFormat is (XXX) XXX-XXXX");
        }

        if (string.IsNullOrEmpty(textBox1.Text) || textBox1.Text.Trim().Length == 0)
        {
            MessageBox.Show("Field can't be left blank!");
            return;
        }
        if (string.IsNullOrEmpty(textBox2.Text) || textBox2.Text.Trim().Length == 0)
        {
            MessageBox.Show("No Name for the Author!");
            return;
        } 
```

请注意两个验证如何`return`在`MessageBox.Show`? 那些是从方法返回而不插入记录的那些。请注意电话号码验证没有`return`? 这就是它显示消息然后插入的原因——因为这就是你告诉它要做的事情。显示消息后，您从未告诉它停止；您只需让它继续运行其余的方法，该方法主要由 INSERT 组成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T03:08:48.143

如果电话号码无效，您不会返回，而是继续您的方法。如果不重组你正在做的事情太多，我可能会这样做，所以所有字段都通过验证而不是在第一次失败时失败：

```
private void button1_Click(object sender, EventArgs e)
    {
        List<string> validationErrors = new List<string>();

        Regex regexObj = new Regex(@"^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$");

        if (regexObj.IsMatch(textBox3.Text))
        {
            string formattedPhoneNumber =
                regexObj.Replace(textBox3.Text, "($1) $2-$3");
        }
        else
        {
            validationErrors.Add("Invalid Phone Number! \nFormat is (XXX) XXX-XXXX");
        }

        if (string.IsNullOrEmpty(textBox1.Text) || textBox1.Text.Trim().Length == 0)
        {
            validationErrors.Add("Field can't be left blank!");
        }
        if (string.IsNullOrEmpty(textBox2.Text) || textBox2.Text.Trim().Length == 0)
        {
            validationErrors.Add("No Name for the Author!");
        }

        if (validationErrors.Count > 0)
        {
            MessageBox.Show(string.Join(Environment.NewLine, validationErrors.ToArray()));
            return;
        }

        SqlConnection con = new SqlConnection("Server = DAFFODILS-PC\\SQLEXPRESS;Database=Library;Trusted_Connection=True;");
        SqlCommand sql1 = new SqlCommand("INSERT into Members VALUES('" + textBox1.Text + "' , '" + textBox2.Text + "','" + textBox3.Text + "')", con);
        con.Open();
        sql1.ExecuteNonQuery();
        con.Close();
        this.membersTableAdapter.Fill(this.booksDataSet.Members);
        MessageBox.Show("Data Added!");
        textBox1.Text = "";
        textBox2.Text = "";
        textBox3.Text = "";
        textBox1.Focus();

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T02:59:36.997

您只是检查错误并显示错误消息。

在开头初始化一个值为 false 的变量 hasAnyError.. 并在那些“if”块中将其设置为 true.. 并将该 Sql 块放在末尾，如下所示：

```
if (!hasAnyError) { 
    //put all that sql block here 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-12T03:01:18.243

您没有停止程序流程。您需要在显示消息框后立即停止该方法。为此，只需在显示错误的每个 MessageBox 之后添加：

```
return; 
```

例如：

```
MessageBox.Show("Invalid Phone Number! \nFormat is (XXX) XXX-XXXX");
return; 
```

# jquery - 在特定的 wordpress 页面中调用 Jquery

> ID：11919317
> 
> 赞同：0
> 
> 时间：2012-08-12T02:45:17.197
> 
> 标签：jquery, wordpress, header

我创建了一个在线报价。我不太懂编码，因为我是一个小企业主，大部分事情都必须自己做。我创建了一个 jquery 脚本，我不得不将它保存在标题中，因为我不知道如何将它插入到 wordpress 帖子中。

我的问题是：我怎样才能让整个 Jquery 脚本只加载在[http://www.leadcomm.net/cost-estimate/](http://www.leadcomm.net/cost-estimate/)上？

脚本很长，所以我没有发布它，但您可以查看源代码，它在标题中。这很乱，我知道。

标题用于所有页面，我认为它会导致其他页面出现一些问题。如果您有任何想法，请告诉我，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T02:57:16.077

如果你这样做：

```
if (window.location.href.indexOf('http://www.leadcomm.net/cost-estimate/') == 0) {
   //all jquery code here
} 
```

它会将代码限制`'http://www.leadcomm.net/cost-estimate/'`在 URL 开头的任何页面。这也将说明`'http://www.leadcomm.net/cost-estimate/?qsname=qsvalue'`url 的类型。但它也将允许子目录`'http://www.leadcomm.net/cost-estimate/dir1/dir2/'`。

如果你这样做：

```
if (window.location.href == 'http://www.leadcomm.net/cost-estimate/') {
   //jquery code here
} 
```

它将仅限于该页面。

**编辑**

再三考虑，甚至更好的选择是`.js`使用所有这些代码创建一个文档。然后在标题中执行以下操作以根据页面动态加载它。除非需要，否则这将完全阻止代码加载。

```
<script type="text/javascript">
if (window.location.href == 'http://www.leadcomm.net/cost-estimate/') {
    var js = document.createElement('script');
    js.setAttribute("type","text/javascript");
    js.setAttribute("src", "jsfilename.js");
    document.getElementsByTagName("head")[0].appendChild(js);
} 
</script> 
```

# java - 为 Java 操作系统设计我的资源管理器

> ID：11919318
> 
> 赞同：1
> 
> 时间：2012-08-12T02:45:19.953
> 
> 标签：java, operating-system

我正在尝试为 Java 操作系统设计我的资源管理器。这就像“我的电脑”在 Windows 中所做的那样（显然有一些新功能）。我以前使用过 Swing，也许我需要学习一些动画编程。任何人都可以建议一些开始的好地方或一些材料吗？

* * *

此外，我还需要与底层操作系统进行通信（我相信如此）。我怎么能在 Java 中做到这一点，就像在任何平台无关的语言中你不应该使用底层操作系统功能一样！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T02:55:31.443

首先，Java 不是此任务的编程语言的好选择，因为（如您所述）它不适合访问底层操作系统功能。但是，如果您只是想要/需要访问文件系统，那么 Java 7 文件系统 API 可能会为您提供所需的东西。

其次，如果您希望这个“资源管理器”在 Web 浏览器中运行，那么您将需要将其编写为受信任的浏览器插件，可能使用 C 或 C++。

第三，在考虑酷炫的动画效果之前，您希望获得基本功能。

最后，您可能正在重新发明轮子。

# mysql - MySQL 时间比较

> ID：11919320
> 
> 赞同：0
> 
> 时间：2012-08-12T02:45:48.837
> 
> 标签：mysql, time, comparison, hour

我需要在 MYSQL 中存储电视指南，我在想这样的事情：

```
channel_id         day      start_time  end_time

AMC Breaking Bad:) Monday   19:00:00    20:30:00

Other Program      Saturday 09:30:00    12:30:00 
```

`end_time`并且`start_time`是`TIME`字段并存储**HOURS**。

我的问题和疑问是：

**我如何从 MYSQL 中获取 NOW() 正在观看的节目？**我不知道如何比较时间。我做了一些测试，但我什么也没得到。

希望你能听懂我的英语！多谢你们！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T02:50:30.210

我想您是在问我如何获得现在正在运行的程序列表，其中 NOW 大于或等于 start_time 且小于 end_time。有了这些假设，这里是 SQL：

```
SELECT * FROM tv_guide
WHERE CURTIME() BETWEEN start_time AND end_time; 
```

编辑：正如@Corbin 所指出的，您需要检查当天。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T02:50:53.673

```
SELECT * FROM shows WHERE CURRENT_TIME() BETWEEN start_time AND end_time; 
```

您可能还想查看日期，但这只是另一个 where 子句 ( `AND day = 'Friday'`)。

# joomla - IE 的 Joomla 会话超时导致不正确的重定向

> ID：11919321
> 
> 赞同：0
> 
> 时间：2012-08-12T02:45:55.620
> 
> 标签：joomla, joomla2.5

我有一个 Joomla 2.5.6 站点，该站点仅遇到 IE 问题。如果用户登录该站点以获取注册内容，但由于不活动而超时，他们将被重定向到登录页面……正如预期的那样。

问题是当他们尝试重新登录时，他们会收到 403 错误。如果他们手动输入 url（对于某些注册内容），他们实际上确实会登录。

更重要的是，他们有几个可用的菜单并且大多数都可以正常工作，但其他人只会给出 403 错误。

清除 IE 中的缓存可解决此问题。但是，如果用户再次超时，则整个循环将重复。我应该提到在 Firefox 或 Chrome 中没有问题。

不确定我可以提供什么来帮助调试？有任何想法吗？

# git - 在 Git 命令中使用文件名过滤作者姓名

> ID：11919324
> 
> 赞同：1
> 
> 时间：2012-08-12T02:46:31.510
> 
> 标签：git

我正在使用 Git 命令来根据文件名过滤作者姓名

所以，当我输入以下两个命令时，

```
gh@ubuntu:~$ cd git
gh@ubuntu:~/git$ git log --pretty="format:%an"  t/t0030-stripspace.sh 
```

它工作得很好，并给了我的作者名单。

但是，我需要使用以下命令执行相同的操作：

```
gh@ubuntu:~$ git --git-dir=/home/ghadeer/git/.git --work-tree=/home/ghadeer/git log --pretty="format:%an"  t/t0030-stripspace.sh 
```

但它显示以下错误：

```
fatal: ambiguous argument 't/t0030-stripspace.sh': unknown revision or path not in the working tree.
Use '--' to separate paths from revisions" 
```

有人知道错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T02:56:42.600

正如错误消息所暗示的那样，您可以通过`--`在文件路径前放置 a 来解决此问题：

```
git --git-dir=... --work-tree=... log --pretty="format:%an" -- t/t0030-stripspace.sh 
```

# .net - 可以按需下载先决条件的良好安装程序

> ID：11919325
> 
> 赞同：5
> 
> 时间：2012-08-12T02:46:47.603
> 
> 标签：.net, installation, window, windows-installer

我知道，这里有很多关于安装程序的问题，但它们都是旧的。我需要的是一个安装工具，它可以按需下载.net framework 4.5（如果用户没有，安装它）然后安装我的应用程序。它必须只有一个文件。我试过使用 WiX，但它对我来说太复杂了，我找不到任何关于如何使用它制作简单安装程序的示例。我也尝试使用 Visual Studio 附带的 InstallShield limited，但它似乎无法从网上下载先决条件（或者我可能遗漏了一些东西）。

如果你能帮助我找到我的问题的解决方案，我会非常优雅。当然，最好的解决方案是让 InstallShield 以某种方式限制从网络上下载必要的数据。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T19:23:16.543

正如 VRK 所说，您将需要引导程序文件，[Advanced Installer](http://www.advancedinstaller.com/download.html)是另一个很好的设置创作工具，可以完全满足您的需求。但是，您将需要许可版本，因为此功能在免费版中不可用。您仍然可以在 30 天试用期内对其进行测试，所有功能均可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T04:33:48.213

MSI 安装程序确实有一个安装先决条件的选项。但是您必须从设置输出文件运行引导程序（setup.exe）。

setup.exe 将检测是否需要安装任何先决条件并将其安装。然后通过调用 msi 文件继续安装您的程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T03:00:42.343

我不知道它是否适用于 .NET 4.5，因为只有 RC 版本可用，但[ClickOnce](http://msdn.microsoft.com/en-us/library/t71a733d%28v=vs.80%29.aspx)应该做你想做的事。

# objective-c - 你如何在 iOS5 中定义一个全局 IBOutlet 变量？

> ID：11919331
> 
> 赞同：1
> 
> 时间：2012-08-12T02:48:10.257
> 
> 标签：objective-c, ios5, global-variables, iboutlet

我需要一个全局 IBOutlet 变量的原因是，我不想在切换视图后丢失数据。例如，我有一个`IBOutlet`and`UIlabel`并设置它的文本。

```
@property (retain, nonatomic) IBOutlet UIImageView *imageView; 
@property (retain, nonatomic) IBOutlet UITextField *inputText; 
@property (retain, nonatomic) IBOutlet UILabel *warnningLabel; 
```

从另一个视图切换回来后， UILabel 将设置为零，我不希望它发生。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T03:03:16.743

您的问题表明您将数据存储在视图内。这意味着您违反了 MVC（模型-视图-控制器），这是您的问题的根源。正确的解决方案是将数据移出视图和视图控制器，并将其放入单独的模型对象中。然后你不在乎你是在屏幕上还是在屏幕上。正如 Andrei G 所说，您将在`viewWillAppear:`.

之前关于这个话题的一些讨论：

*   [为 MVC 设计模式组织 iOS 项目](https://stackoverflow.com/questions/5227904/organizing-ios-project-for-mvc-design-pattern/5228317#5228317)
*   [MVC：将模型指针传递给视图？](https://stackoverflow.com/questions/9475223/mvc-passing-model-pointer-to-a-view/9475654#9475654)
*   [Cocoa MVC：应用程序工作逻辑打算放在哪里？](https://stackoverflow.com/questions/8386614/cocoa-mvc-where-is-application-work-logic-intended-to-be-placed/8386787#8386787)
*   [MVC：为什么要分离模型、视图和控制器？](https://stackoverflow.com/questions/7045093/separation-of-model-view-controller/7045208#7045208)
*   [UITableView 上的 GCD 实现](https://stackoverflow.com/questions/10110884/gcd-implementation-on-a-uitableview/10111155#10111155)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T02:52:21.887

尝试这个：

在 viewDidDisappear 上使用 NSUserDefaults（或声明一个全局 NSString 变量）保存值并在 viewDidAppear 上设置 UILabel.text

# php - 从 SimpleXMLElement 对象中提取字段

> ID：11919336
> 
> 赞同：0
> 
> 时间：2012-08-12T02:49:32.060
> 
> 标签：php, arrays, object, simplexml

如果我有以下代码从数据库中提取 xml 提要，然后将它们转换为 SimpleXMLElement 数组：

```
try{
    function processLink( $link , $appendArr ){
    ## gets url from database as outlined above.
        $xmlUrl = $link;
        #Loads the url above into XML    
        $ConvertToXml = simplexml_load_file($xmlUrl);
        # -> Setup XML
        $appendArr[] = $ConvertToXml->channel->item;
    }
    #Connect to DB
    require_once '../../src/conn/dbc.php';
    $dbconn = new PDO('mysql:host=localhost;port=3306;dbname=mydb',$db_user,$db_pass,array(PDO::ATTR_PERSISTENT => true));
    $q = $dbconn->prepare("SELECT FW_ArtSrcLink FROM FW_ArtSrc WHERE OneSet=:OneSet and leagID = :TheLeagueID");
    $q->execute(array(':OneSet' => 1, ':TheLeagueID' => 14));    # SET LEAGUE HERE.
    $result = $q->fetchAll();
    $newsStory = array();

    foreach ($result as $value ){
            if ( is_array($value) ){
                foreach ( $value as $secondValue ){
                    processLink($secondValue , &$newsStory);
                }

                continue;
        }

        processLink($value , $newsStory);

    }    
    ## Don't want to do this, I want to output just the [title] and [link]         
    //print_r($newsStory);

} 
```

如果我只想从 SimpleXMLElement 数组中提取键：[title] 和 [link] 如何使用当前代码执行此操作？

我试过使用：

```
echo 'title'.$newStory->channel->item->title;
echo 'title'.$newStory->title;
echo 'title'.$value->title; 
```

print_r() 的输出：

![img2](../Images/e2a4581b32ac3cbf0ce92ac1e511138a.png)

全部带有空白值，或者根本没有回显。如何输出**标题**和**链接**？

修改的：

```
foreach ($newsStory as $story ) {
        echo "<hr>"."<a href='".$story->link."'>".$story->title."</a>"."<hr>";
    } 

The problem is... it prints some duplicates... how do I get ONLY unique links to display? 
```

![img44](../Images/053a194a8b23e7cbed1d82750fb7d6e6.png)

**更新的 FOREACH：**

```
$stories = array(); // contains all of the stories already output
    foreach ( $newsStory as $story ) {
        if ( ! in_array( $stories, $story->title ) ) {
            $stories[] = $story->title;
            echo "<hr>"."<a href='".$story->link."'>".$story->title."</a>"."<hr>";     
        } //if
    } //foreach 
```

这会输出警告（同时仍显示重复项）：

```
Warning: in_array() expects parameter 2 to be array, object given on line 39: 
```

它基本上不喜欢这样：

```
 if ( ! in_array( $stories, $story->title ) ) { 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T03:00:35.203

您需要遍历结果数组以输出每个项目，如下所示：

```
<?php
$stories = array(); // contains all of the stories already output
foreach ( $newsStory as $story ) {
    if ( ! in_array( (string) $story->title, $stories ) ) {
        $stories[] = (string) $story->title;
        echo 'title'.$story->title;
    }
} 
```

更新：添加代码以检查故事是否已输出。

# ruby-on-rails - 如果数据库中没有外键，rails 关联是否应该抛出错误？

> ID：11919341
> 
> 赞同：3
> 
> 时间：2012-08-12T02:50:29.877
> 
> 标签：ruby-on-rails, associations, belongs-to

在 belongs_to 关联的情况下，即使表中没有对应的外键，rails 似乎也允许您设置关联。这是预期的行为吗？

请看以下情况：

```
$> rails new mynewapp
$> cd mynewapp
$> rails g model User
$> rails g model Whatever
$> rake db:migrate

#user.rb
belongs_to :whatever

$> rails c
   u = User.new
   u.save
   w = Whatever.new
   w.save
   u.whatever = w
   u.save #no error!  

   u.whatever               #=> w(Whatever)
   u.reload                 #=> w(Whatever)
   User.find(u.id).whatever #=> nil!!!!!! 
```

我在 rails v3.2.3 上看到了这种行为

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T03:28:53.487

这是预期的行为，因为关联并不总是涉及 user_id 类型的列。如果您认为这应该引发错误，这可能更适合 rails github 问题页面或 rails 开发邮件列表。

# android - 如何更改 Duals Sim 的网络？

> ID：11919351
> 
> 赞同：0
> 
> 时间：2012-08-12T02:53:17.403
> 
> 标签：android

我有双卡手机。在应用程序中，我想更改双卡网络，例如 GSM 和 LTE。我捕获了日志并获得了 com.android.phone.mMobileNetwork 的活动名称。但是当我在源代码中看到它是不可用的。

请以适当的方式建议我如何更改双卡中的网络，包括两个 SIM 的 /

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T22:06:26.603

不幸的是，你不能。 [查看来自 hackbod（Google android 开发者）的回答](https://stackoverflow.com/questions/5255147/dual-sim-card-android)

Android SDK 不支持双卡，厂商也不愿意给出源码（也不愿意写一个支持电话号码选择的拨号器）。

# .net - .NET 中具有通用程序集的多个项目

> ID：11919352
> 
> 赞同：1
> 
> 时间：2012-08-12T02:53:19.470
> 
> 标签：.net

我有一个包含多个项目的解决方案。每个项目都使用一个程序集，该程序集在构建后复制到其相应的输出目录。这些项目中的大多数都有一个通用的 dll。例如，ProjectB、ProjectC 和 ProjectD 使用 ProjectA.dll。是否可以简单地将 ProjectA.dll 放入一个中央文件夹并让其他类库项目指向它？我知道 GAC，但他们说只有在多个应用程序使用特定程序集时才应该使用它。

编辑：部署时，我想要以下结构：

```
Bin
-> ProjectA.dll
-> Other Projects
----> ProjectB.dll
----> ProjectC.dll
MyProject.exe 
```

ProjectB.dll 和 ProjectC.dll 是否仍会正确引用 projectA.dll？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T03:17:29.923

由于所有项目都在同一个解决方案中，Visual Studio 知道如何管理这种依赖关系。只需在 ProjectB、ProjectC、ProjectD 中添加对 ProjectA 的项目引用。为此，请在解决方案资源管理器中右键单击引用，转到添加引用，单击项目选项卡。

这将创建一个构建依赖项，导致 ProjectA 在构建 ProjectB、C 或 D 时随时构建，并且这些项目将从正确的 ProjectA\bin\Debug 或 \bin\Release（或您当前所在的任何解决方案配置）中引用 DLL确保一切都很好并且是最新的，并且不需要到处复制 DLL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T03:00:36.297

您可能需要考虑为项目 A 创建一个 nuget 包。如果您没有可以发布的服务器，您可以将其复制到网络共享，然后设置 Visual Studio 以监视该位置。嗯。

# android - 检测声音是否正在播放/管理切换按钮

> ID：11919359
> 
> 赞同：0
> 
> 时间：2012-08-12T02:54:10.927
> 
> 标签：android, adt, soundpool

我无法弄清楚如何管理打开/关闭音乐的切换按钮。当用户点击它时，它应该不断循环直到它被关闭。我正在使用 soundpool，如果有某种方式我可以通过使用有帮助的 soundpool 或媒体播放器检测我的媒体是否正在播放。但是我在文档中找不到任何相关的东西，类似的问题也没有很好的答案；[如何判断声音是否仍在soundpool中播放](https://stackoverflow.com/questions/10832278/how-to-tell-if-a-sound-is-still-playing-in-soundpool?lq=1)

到目前为止我有这个：

```
final ToggleButton tglbuttn = (ToggleButton) findViewById(R.id.toggleButton1);

        final SoundPool mySp = new SoundPool(1, AudioManager.STREAM_MUSIC, 0);
        final int soundId = mySp.load(this, R.raw.music, 1);

        tglbuttn.setChecked(????????); //what could go here?
        tglbuttn.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {

            } 
```

如果我能以某种方式获得类似蓝牙切换开关的功能，但使用 soundpool/mediaplayer，一种将媒体播放的实际状态与切换按钮的状态联系起来的方法：

```
tglbtn.setChecked(myBluetooth.isEnabled()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T03:00:56.607

您可以使用[isChecked](http://developer.android.com/reference/android/widget/CompoundButton.html#isChecked%28%29)方法来切换按钮。试试这个：

```
//Make your activity implements OnClickListener
public class MyActivity extends Activity implements OnClickListener { 
```

然后：

```
//In your OnCreate()
tglbuttn.setOnClickListener(this); 
```

最后：

```
//Add this method to your Activity
@Override 
public void onClick(View v) {
    if(v==tglbuttn) {
        if(v.isChecked())
            play();
        else                
            stop();
        tglbuttn.setChecked(!tglbuttn.isChecked()); //It will be toggled
     }
} 
```

# android - 调整视图中的最后一个元素（列表视图）

> ID：11919368
> 
> 赞同：0
> 
> 时间：2012-08-12T02:56:51.040
> 
> 标签：android, listview

我想将列表调整为屏幕上的最后一项。

![在此处输入图像描述](../Images/d4d8d86219a977f7c6142fb120d69d8a.png)

![在此处输入图像描述](../Images/d3c2b03606134137131a2512e871a8ce.png)

我有一个带有典型自定义适配器的列表视图。我试过*setSelectionFromTop (int position, int y)* 但不知道每个项目的高度。你能帮我吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T03:34:27.647

你可以试试`listview.smoothScrollToPosition(lastposition)`：

> 平滑滚动到指定的适配器位置。视图将滚动以显示指示的位置。

或者简单`setSelection(lastposition)`的没有很好的滚动动画。

但有时`ListView`，有一个错误 make `ListView`not autoscroll ( [Issue 10552](http://code.google.com/p/android/issues/detail?id=10552) )。因此，您必须执行此解决方法。尝试先`setSelection`定位在您想要的位置周围，然后再定位`smoothScroll`

```
public static void scrollToTopListView(ListView list) {

            list.setSelection(15); // 
            list.smoothScrollToPosition(0);

    } 
```

# c - 为什么 sizeof(a pointer) 返回不正确的值？

> ID：11919369
> 
> 赞同：0
> 
> 时间：2012-08-12T02:56:59.700
> 
> 标签：c, string, sizeof

> **可能重复：**
> [Sizeof 字符串文字](https://stackoverflow.com/questions/1392200/sizeof-string-literal)

在我的 windows7 mingw 环境中，我尝试了这个：

```
char str[] = "hello"; 
```

的值为`sizeof(str)`6，而不是 4 或 8。

这怎么可能发生？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T02:58:34.217

`sizeof(str)`返回包含终止空字符的字符串中的字节数。即，在您的*数组*`"hello\0"`中占 6 个字节。

 *相反，如果你有

```
char* str = "hello"; 
```

then`sizeof(str)`将返回*指针* `str`中的字节数（32 位系统为 4）。

您可能会发现这个 SO 问题[Why does sizeof return different values for same string in C?](https://stackoverflow.com/questions/9644267/why-does-sizeof-return-different-values-for-same-string-in-c) 出于兴趣。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T02:59:24.720

这是因为`str`是一个数组`chars`。`sizeof(array)`将告诉您数组占用的字节数，并且由于`str`是 的数组`chars`，因此每个元素只有 1 个字节，包括空终止字符，共 6 个字节。

您可以使用: 获取数组中*元素*`sizeof(array)/sizeof(array[0])`的数量，因此可以更明确地写成: `sizeof(str)/sizeof(str[0])`，但如果`str`是一个数组`char`then 等效于 just `sizeof(str)`。

请注意，这通常**不适**用于 C 字符串，对于字符串的长度，使用`strlen`. 例如：

```
char *str = "hello";
sizeof(str);  // returns 4, since str is declared as char*, not char[] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-12T03:01:58.913

“sizeof()”运算符返回字节数。对于您的字符串，它恰好是 6（5 个字符加上空字节）。对于 6 元素整数数组，它是 24（至少在我的 32 位 Linux 系统上）。对于指针，它将是 4（同样，对于 32 位系统）。

```
#include <stdio.h>

int
main (int argc, char *argv[])
{
  char str[] = "Hello";
  char *s = "Hello";
  int a[] = {1, 2, 3, 4, 5, 6};
  printf ("sizeof (str)=%d, sizeof(s)=%d, sizseof(a)=%d\n",
    sizeof (str), sizeof(s), sizeof(a));
  return 0;
} 
```

结果：

```
sizeof (str)=6, sizeof(s)=4, sizeof(a)=24 
```*

# iphone - 在 appDelegate 中创建 TabBarController？

> ID：11919373
> 
> 赞同：0
> 
> 时间：2012-08-12T02:58:10.323
> 
> 标签：iphone, ios, uitabbarcontroller, appdelegate

这是我第一次使用 UITabBarController。
由于我必须制作 tabBarController 将持有的所有初始 viewController，我发现 appDelegate（我正在创建 tabBarController 的地方）代码越来越长。
（viewControllers 的所有委托方法都在 appDelegate 中定义）

由于 appDelegate 还有其他事情要做，例如初始化用户数据/处理推送通知。我想将 tabBarController 移动到其他地方。

我想我可以创建一个虚拟控制器并在那里创建 tabBarController。
人们通常如何创建 tabBarController 应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T03:03:08.230

我儿子不知道“通常”，但简单的方法是在创建项目时在 Xcode 中选择选项卡式应用程序模板。

# java - 正则表达式匹配连字符和逗号，并且仅在两者之间

> ID：11919374
> 
> 赞同：3
> 
> 时间：2012-08-12T02:58:27.450
> 
> 标签：java, regex

我正在使用正则表达式检查字符串。

**规则是：**

字符串可以，

包含任何数字、连字符和逗号

连字符和逗号应该只在数字之间。它不应该在字符串的开头或结尾。

逗号是可选的。连字符是强制性的

例如，

**有效的 ：**

```
10-20
10-20-3
10-20,3 
```

**无效的 ：**

```
10
-10
,10
10-20,
10-20-
10,20 
```

**到目前为止我尝试的代码：**

```
[0-9,-]+ 
```

*有人可以建议如何检查逗号和连字符不应该在字符串的开头或结尾以及上述条件吗？*

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-12T03:01:05.237

试试这个表达式：

```
[0-9][0-9,-]*-[0-9,-]*[0-9] 
```

这意味着字符串必须：

*   以数字开头和结尾
*   中间至少包含一个破折号
*   在第一个数字之后和破折号之前有零个或多个`[0-9,-]`字符
*   在破折号和最后一个数字之间有零个或多个`[0-9,-]`字符

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T03:01:02.080

你应该试试这个

```
[0-9][0-9,\-]*-[0-9,\-]*[0-9] 
```

我认为连字符需要在字符类中反斜杠

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T12:53:38.643

表达式应在开头和或结尾包含`^`or ，否则表达式也会匹配无效字符串，例如：`\A``$``\z`

```
,10
20-
-34 
```

**所以表达式应该是：**

```
^[0-9][0-9,-]*-[0-9,-]*[0-9]$ 
```

# c# - 为什么我的代码找不到目录

> ID：11919375
> 
> 赞同：0
> 
> 时间：2012-08-12T02:58:29.823
> 
> 标签：c#, winforms, linq, directory

**编辑：有人指出我的代码确实可以工作。但它将“this.zip”文件标识为子文件夹，因此列出了“contents\this.zip”的任何文件夹，这不是我想要的。（试图只找到那些'contents\newfolder\this.zip'，所以'contents'目录至少有一个子文件夹）。我怎样才能让它只列出实际文件夹的目录，而不仅仅是 .zip 文件？

我正在编写一个程序来处理标题为 'this.zip' 的文件，这些文件通常直接位于一个名为 'contents' 的文件夹中。我正在尝试确定 this.zip 文件是否直接位于“contents”文件夹中，或者是否有一个子文件夹。我有一组代码正在确定“内容”文件夹是否为空，我认为可以更改它以查找包含子目录的任何“内容”文件夹，但它不起作用。

```
//This finds 'contents' folders that are empty
            DirectoryInfo directory = new DirectoryInfo(txtbxOldFolder.Text);
            DirectoryInfo[] folders = directory.GetDirectories("*contents*",SearchOption.AllDirectories);                

            Var query = from folder in folders
                        where folder.GetFileSystemInfos().Length == 0
                        select folder.FullName.ToString();
            foreach (string str in query)
            {
                //this adds the path of any empty 'contents' folder
                listEmptyFolder.Add(str);
            } 
```

我想如果我将查询 - where 语句更改为长度> 1，它将找到任何具有子目录的内容，但它不起作用。这是完成我正在尝试的最佳方法，还是这种尝试使用 LINQ 甚至会起作用？

```
 //This is supposed to find 'contents' folders that have subdirectories, but it's unsuccessful

            DirectoryInfo directory = new DirectoryInfo(txtbxOldFolder.Text);
            DirectoryInfo[] folders = directory.GetDirectories("*contents*",SearchOption.AllDirectories);                

            Var query = from folder in folders
                        where folder.GetFileSystemInfos().Length > 1
                        select folder.FullName.ToString();
            foreach (string str in query)
            {
                //this adds the path of any empty 'Contents' folder
                listNestedFolders.Add(str);
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T03:20:29.647

Var 应该是 var - 你想要 > 0。这在 LinqPad 中运行良好。（我建议测试这些东西。）

```
DirectoryInfo directory = new DirectoryInfo(txtbxOldFolder.Text);
DirectoryInfo[] folders = directory.GetDirectories("*contents*",SearchOption.AllDirectories);                

var query = from folder in folders
            where folder.GetFileSystemInfos().Length > 0
            select folder.FullName.ToString(); 
```

这是我的 LinqPad 代码，它可以很好地显示所有中间步骤。

```
void Main()
{
   DirectoryInfo directory = new DirectoryInfo("D:\\test");
   DirectoryInfo[] folders = directory.GetDirectories(@"*.*",SearchOption.AllDirectories);

   var query2 = from folder in folders
                where folder.GetFileSystemInfos().Length > 0
                select folder.FullName.ToString();

  folders.Select(f => f.GetFileSystemInfos()).Dump();
  query2.Dump();

  foreach (string str in query2)
  {
    Console.WriteLine(str);
  }
} 
```

下载 LinqPad 试试看，值得！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T04:08:36.267

这应该有效：

```
 public List<string> FindEmptyFolders(string FolderToSearchIn, string FolderNameToSearch, string FileExtension = "")
    {
        List<string> FolderList = System.IO.Directory.GetDirectories(FolderToSearchIn, "*" + FolderNameToSearch + "*", SearchOption.AllDirectories).ToList();
        List<string> EmptyFolders = new List<string>();
        if (string.IsNullOrEmpty(FileExtension))
            FolderList.ForEach(Folder => { if (System.IO.Directory.EnumerateFiles(Folder).Count() == 0) EmptyFolders.Add(Folder); });
        else
            FolderList.ForEach(Folder => { if (System.IO.Directory.EnumerateFiles(Folder, "*." + FileExtension).Count() == 0) EmptyFolders.Add(Folder); });
        return EmptyFolders;
    } 
```

用法：

```
foreach (string EmptyFolder in FindEmptyFolders(txtbxOldFolder.Text, "contents"))
            MessageBox.Show(EmptyFolder); 
```

# ruby-on-rails - Rails 和 Sphinx：如何使用多个选项搜索 :without

> ID：11919377
> 
> 赞同：0
> 
> 时间：2012-08-12T02:58:52.820
> 
> 标签：ruby-on-rails, ruby-on-rails-3, sphinx, thinking-sphinx

如何在带有 Rails 的 Sphinx 中为 :without 选项传递多个选项？我查看了[http://freelancing-god.github.com/ts/en/searching.html](http://freelancing-god.github.com/ts/en/searching.html)但没有提出任何建议。

```
User.search params[:search],
    :without => {:id => current_user.id && current_user.other_users.collect { 
      |other_user| other_user.id} # user cannot be self & user cannot already be a contact
    } # This is where I'm having the problem! 
```

帮助表示赞赏！我觉得答案很简单，我只是想念它......也许我累了或什么=/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T04:19:58.893

有一个未记录的选项称为`:without_any`. 它需要一个哈希，其键是要过滤的属性，值是属性不应匹配的值的数组。在这种情况下，我认为你可以这样做：

```
contact_ids = current_user.other_users.collect(&:id)
User.search params[:search], :without_any => {:id => [current_user.id, contact_ids].flatten } 
```

# linux - Tomcat 启动时没有错误但没有在 8080 上监听

> ID：11919378
> 
> 赞同：9
> 
> 时间：2012-08-12T02:59:16.593
> 
> 标签：linux, tomcat, listen

我在 Centos 6.4 上运行 tomcat 6 并已成功启动它。启动时没有错误。catalina.log 内容如下：

```
2012-08-11 14:23:42,941 | INFO  | main | o.a.c.http11.Http11NioProtocol | Starting Coyote HTTP/1.1 on http-xx.xx.xx.xx-8080
2012-08-11 14:23:42,960 | INFO  | main | o.a.catalina.startup.Catalina | Server startup in 121483 ms 
```

并将`ps -x`其显示为正在运行。

不幸的是，它在端口 8080 上没有响应，并且`netstat -atnp | grep LISTEN`没有列出它。

关于可能导致这种情况的任何想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-12T05:41:48.667

如果问题是没有像 Nash 建议的那样在 iptables 中配置端口，那么您可以按如下方式进行配置：

```
vi  /etc/sysconfig/iptables 
```

将以下行添加到文件中：

```
-A RH-Firewall-1-INPUT -m state --state NEW -m tcp -p tcp --dport 8080 -j ACCEPT 
```

在退出时保存文件并重新启动 iptables：

```
service iptables restart 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-01-24T14:10:46.567

@alfasin 的答案是正确的，但对于 CentOS 6，命令行向下不起作用

```
-A RH-Firewall-1-INPUT -m state --state NEW -m tcp -p tcp --dport 8080 -j ACCEPT 
```

你需要一个一个的自由链，这个模式：

```
-I INPUT -m state --state NEW -m tcp -p tcp --dport 8080 -j ACCEPT
-I OUTPUT -m state --state NEW -m tcp -p tcp --dport 8080 -j ACCEPT
-I FORWARD -m state --state NEW -m tcp -p tcp --dport 8080 -j ACCEPT 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T05:33:03.090

是iptables阻塞了端口...

解决此问题的一种快速方法是使用以下命令关闭 iptables：

```
/etc/init.d/iptables save
/etc/init.d/iptables stop 
```

通常应启用 iptables，但应配置为打开所需的端口。在不使用替代品的情况下将其关闭是一种不好的做法。

在我的情况下，机器没有做任何敏感的事情，并且在没有互联网访问的内部网络上，所以关闭 iptables 就足够了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-10T05:08:41.457

我的事情后续活动也可以工作。但是是的，它仅适用于 Cent OS。去

```
vi  /etc/sysconfig/iptables 
```

只需添加以下行并根据需要更改您的端口。

```
-A INPUT -m state --state NEW -m tcp -p tcp --dport 8080 -j ACCEPT 
```

通过从键盘上按***esc***`:wq`并键入保存文件然后重新启动 iptables：

```
service iptables restart 
```

我认为它会工作。

# .net - 错误：无法加载文件或程序集'log4net，版本 = 1.2.0.30714

> ID：11919381
> 
> 赞同：1
> 
> 时间：2012-08-12T02:59:29.680
> 
> 标签：.net, dll, gac

这是错误描述和我们所做的总结：

1.  我们得到的错误如下：

    ```
    Could not load file or assembly 'log4net, Version=1.2.0.30714,
     Culture=neutral, PublicKeyToken=b32731d11ce58905' or one of its dependencies.
     The located assembly's manifest definition does not match the assembly
     reference. (Exception from HRESULT: 0x80131040) 
    ```

2.  尝试`GAC`使用`GACUTIL.exe`但访问被拒绝，尽管我是我电脑的管理员
3.  我删除并重新附加了新的 DLL
4.  试图在中使用绑定重定向`web.config`
5.  试图添加程序集定义`web.config`
6.  试图访问`Machine.config`但再次访问被拒绝
7.  重启服务器，webserver

毕竟它没有用。接下来我可以做些什么来避免这个错误。我检查了`GAC`列表，但我没有在那里找到我的程序集文件，但我不知道如何通过权限来执行它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T09:22:00.923

看起来[`supportedRuntime`](http://msdn.microsoft.com/en-us/library/w4atty68.aspx)是[缺席](http://krishnabhargav.blogspot.com/2010/02/using-net-35-clr-20-dll-inside-visual.html)。尝试将元素添加到配置文件的底部

```
<startup> 
   <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/> 
</startup> 
```

# r - r 动画，参数曲线

> ID：11919390
> 
> 赞同：2
> 
> 时间：2012-08-12T03:00:44.203
> 
> 标签：r

我正在使用动画包绘制 $x=sin(t)$ 和 $y=sin(t)^2$ 的参数曲线以及使用以下代码跟踪曲线的圆：

```
require(animation)
x <- seq(-1,1,length=20)
y <- x^2
plot(x,y,type="l")
library(animation)
ani.record(reset=TRUE)
t <- seq(0,4*pi,by=pi/30)
for (i in 1:length(t)) {
    points(sin(t[i]),sin(t[i])^2,pch=19,cex=2)
    ani.record()
    plot(x,y,type="l")  # I have a question in this line
 }
 ani.replay() 
```

它可以工作（请复制并粘贴此代码），但录制需要相当长的时间。这是一条简单的曲线，但如果我想做复杂的曲线，完成动画录制将花费太多时间。我可能会改进的一件事是不使用第二个绘图功能来重绘抛物线以摆脱上一个绘图中出现的圆圈。有什么我可以让它变得更好的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T04:00:25.820

基本的 R 包`grDevices`有两个功能，允许保存和回放绘图，专为以下情况而设计：

*   `recordPlot()`
*   `replayPlot()`

在我的机器上进行的一些主观测试似乎表明它比重​​新绘制整个情节要快：

```
require(animation)
x <- seq(-1,1,length=20)
y <- x^2
plot(x,y,type="l")
oopts <- ani.opts(interval=0.25)
p <- recordPlot()   # <== Record plot here =============
ani.record(reset=TRUE)
t <- seq(0,4*pi,by=pi/30)

for (i in 1:length(t)) {
  replayPlot(p)     # <== Replay plot here =============
  points(sin(t[i]),sin(t[i])^2,pch=19,cex=2)
}
ani.replay() 
```

# postgresql - PostgreSQL 错误：致命：角色“用户名”不存在

> ID：11919391
> 
> 赞同：918
> 
> 时间：2012-08-12T03:00:44.830
> 
> 标签：postgresql, authentication

我正在设置我的 PostgreSQL 9.1。我不能用 PostgreSQL 做任何事情：不能`createdb`，不能`createuser`；所有操作都返回错误信息

```
Fatal: role h9uest does not exist 
```

`h9uest`是我的账号名，我`sudo apt-get install`在这个账号下是PostgreSQL 9.1。该帐户
仍然存在类似错误。`root`

* * *

## 回答 #1

> 赞同：952
> 
> 时间：2012-08-12T04:13:03.503

使用*操作系统用户* `postgres`创建您的数据库 - 只要您没有设置具有与您的同名操作系统用户相对应的必要权限的*数据库*`h9uest`角色（在您的情况下）：

```
sudo -u postgres -i 
```

正如[这里](https://serverfault.com/q/359856/98376)或[这里](https://serverfault.com/q/601140/98376)推荐的那样。

然后再试一次。`exit`以系统用户身份操作完成后键入`postgres`。

**或者**`createuser`像`postgres`with一样执行单个命令`sudo`，就像[drees](https://stackoverflow.com/a/18708583/939860)在另一个答案中所展示的那样。

关键是使用与同名数据库角色匹配的操作系统用户通过[**`ident`身份验证**](https://www.postgresql.org/docs/current/client-authentication.html)获得访问权限。`postgres`是初始化数据库集群的默认操作系统用户。[手册：](https://www.postgresql.org/docs/current/database-roles.html)

> 为了引导数据库系统，一个新初始化的系统总是包含一个预定义的角色。该角色始终是“超级用户”，默认情况下（除非在运行时更改`initdb`），它将与初始化数据库集群的操作系统用户同名。通常，此角色将命名为`postgres`. 为了创建更多角色，您首先必须作为这个初始角色进行连接。

我听说过使用非标准用户名或操作系统用户不存在的奇怪设置。你需要在那里调整你的策略。

在手册中阅读有关[数据库角色](https://www.postgresql.org/docs/current/user-manag.html)和[客户端身份验证](https://www.postgresql.org/docs/current/client-authentication.html)的信息。

* * *

## 回答 #2

> 赞同：326
> 
> 时间：2013-09-09T23:27:33.327

在尝试了许多其他人的解决方案后，没有成功，这个答案终于帮助了我。

[https://stackoverflow.com/a/16974197/2433309](https://stackoverflow.com/a/16974197/2433309)

简而言之，跑步

```
sudo -u postgres createuser owning_user 
```

创建一个名为 owning_user 的角色（在本例中为 h9uest）。之后，您可以`rake db:create`使用您设置的任何帐户名从终端运行，而无需进入 Postgres 环境。

* * *

## 回答 #3

> 赞同：163
> 
> 时间：2014-05-29T13:35:56.990

```
sudo su - postgres

psql template1 
```

在 pgsql 上创建具有“超级用户”权限的角色

```
CREATE ROLE username superuser;
eg. CREATE ROLE demo superuser; 
```

然后创建用户

```
CREATE USER username; 
eg. CREATE USER demo; 
```

为用户分配权限

```
GRANT ROOT TO username; 
```

然后启用登录该用户，这样您就可以`psql template1`从普通`$`终端运行例如：

```
ALTER ROLE username WITH LOGIN; 
```

* * *

## 回答 #4

> 赞同：114
> 
> 时间：2014-08-12T11:39:21.767

这对我有用：

```
psql -h localhost -U postgres 
```

* * *

## 回答 #5

> 赞同：106
> 
> 时间：2016-07-18T19:01:27.463

使用安装 postgres`apt-get`不会创建用户角色或数据库。

要为您的个人用户帐户创建超级用户角色和数据库：

`sudo -u postgres createuser -s $(whoami); createdb $(whoami)`

* * *

## 回答 #6

> 赞同：35
> 
> 时间：2019-04-07T15:08:06.570

```
psql postgres

postgres=# CREATE ROLE username superuser;
postgres=# ALTER ROLE username WITH LOGIN; 
```

* * *

## 回答 #7

> 赞同：19
> 
> 时间：2019-01-13T05:07:55.667

对于**Postgres 9.5**版本， 使用以下命令：

```
psql -h localhost -U postgres 
```

希望这会有所帮助。

* * *

## 回答 #8

> 赞同：17
> 
> 时间：2017-09-10T16:23:48.550

工作方法，

1.  `vi /etc/postgresql/9.3/main/pg_hba.conf`
2.  `local all postgres peer` 在这里将对**等**更改为**信任**
3.  重新开始，`sudo service postgresql restart`

4.  现在试试，`psql -U postgres`

* * *

## 回答 #9

> 赞同：9
> 
> 时间：2019-02-08T12:13:28.207

对于**Windows**用户：`psql -U postgres`

您应该会看到 PostgreSQL 的命令行界面：`postgres=#`

* * *

## 回答 #10

> 赞同：7
> 
> 时间：2015-06-21T20:28:12.023

在本地用户提示符下，而不是 root 用户提示符下，键入

```
sudo -u postgres createuser <local username> 
```

然后输入本地用户的密码。

然后输入上一条生成“角色'用户名'不存在”的命令。

以上步骤为我解决了问题。如果没有，请发送上述步骤的终端消息。

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2018-04-29T02:15:58.527

我将它安装在 macOS 上，并且必须：

```
cd /Applications/Postgres.app/Contents/Versions/9.5/bin
createuser -U postgres -s YOURUSERNAME
createdb YOURUSERNAME 
```

这是来源：[https ://github.com/PostgresApp/PostgresApp/issues/313#issuecomment-192461641](https://github.com/PostgresApp/PostgresApp/issues/313#issuecomment-192461641)

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2018-08-28T19:53:31.730

**在我的情况下，手动创建数据库集群解决了它。**

出于某种原因，当我安装 postgres 时，没有创建“初始数据库”。执行[`initdb`](https://www.postgresql.org/docs/current/app-initdb.html)对我有用。

PostgreSQL Wiki中提供了此解决方案[- 第一步](https://wiki.postgresql.org/wiki/First_steps)：

> **初始化数据库**
> 
> 通常将 postgres 安装到您的操作系统会创建一个“初始数据库”并启动 postgres 服务器守护程序运行。如果没有，那么您需要[运行 initdb](https://www.postgresql.org/docs/current/app-initdb.html)

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2021-08-07T08:07:00.907

我使用 docker-compose 进行了健康检查。

```
healthcheck:
  test: ['CMD-SHELL', 'pg_isready']
  interval: 5s
  timeout: 5s
  retries: 5 
```

如果您也有更改用户：

```
healthcheck:
  test: ['CMD-SHELL', 'pg_isready -U postgres'] # <<<---
  interval: 5s
  timeout: 5s
  retries: 5 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2019-07-25T12:29:13.720

`--no-owner --no-privileges`使用标志转储和恢复

例如

倾倒 -`pg_dump --no-owner --no-privileges --format=c --dbname=postgres://userpass:username@postgres:5432/schemaname > /tmp/full.dump`

恢复 -`pg_restore --no-owner --no-privileges --format=c --dbname=postgres://userpass:username@postgres:5432/schemaname /tmp/full.dump`

* * *

## 回答 #15

> 赞同：-2
> 
> 时间：2017-08-17T10:20:27.487

请按照以下步骤操作，它将为您工作：

1.  跑`msfconsole`
2.  键入 db_console
3.  将向您显示一些信息 选择告诉您制作的信息：`db_connect user:pass@host:port.../database`对不起，我不记得了，但是就像这样，然后将用户和密码以及主机和数据库替换为`database.yml`就位中包含的信息：`/usr/share/metasploit-framework/config`
4.  你会看见。在后台重建模型缓存。
5.  更新后键入 apt-get update && apt-get upgrade 重新启动终端并午餐 msfconsole 并且它可以工作，您可以通过输入来检查`msfconsole: msf>db_status`它是否已连接。

* * *

## 回答 #16

> 赞同：-3
> 
> 时间：2021-07-11T05:48:42.643

请按照以下步骤使 postgres 正常工作。

1.  在您的终端中，使用以下命令找到 Application Support 文件夹。/Users/[用户名]/库/应用程序支持
2.  删除应用程序 Postgres。
3.  重新安装应用程序，它应该可以正常工作。

* * *

## 回答 #17

> 赞同：-4
> 
> 时间：2020-08-12T00:23:19.047

像将端口从 5432 更改为 5433 这样简单的事情对我有用。

# freebsd - FreeBSD下安装Jlink

> ID：11919395
> 
> 赞同：0
> 
> 时间：2012-08-12T03:01:13.487
> 
> 标签：freebsd, segger-jlink

我从 www.segger.com 下载了适用于 Linux 的[jlink 软件](http://www.segger.com/)，将其安装在具有 linux 兼容性的 FreeBSD 9.0 下。

`./JLinkExe`可以运行，但无法连接我的 Jlink 设备。

任何人都可以帮助如何安装可以通过usb连接jlink的jlkink软件。故障信息如下。

```
www# ./JLinkExe
SEGGER J-Link Commander V4.50i ('?' for help)
Compiled Jun 22 2012 19:00:38
Can not connect to J-Link via USB.
J-Link>exit
www# cat JLink.log

T2882C6C0 000:000 SEGGER J-Link V4.50i Log File (0000ms, 0000ms total)
T2882C6C0 000:000 DLL Compiled: Jun 22 2012 19:00:36 (0001ms, 0001ms total)
T2882C6C0 000:000 Logging started @ 2012-08-12 10:57 (0001ms, 0001ms total)
T2882C6C0 000:001 JLINK_SetWarnOutHandler(...) (0001ms, 0002ms total)
T2882C6C0 000:002 JLINK_OpenEx(...)
  ***** Error: Can not connect to J-Link via USB.  returns "Can not connect to J-Link via USB." (0005ms, 0007ms total)
T2882C6C0 002:721 JLINK_ClrError() (0000ms, 0007ms total)
T2882C6C0 002:721 JLINK_Close() (0000ms, 0007ms total)
www# 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-08T04:32:25.370

不确定它是否适用于 FreeBSD，但这对我来说适用于 Ubuntu：

`45-jlink.rules`在`/etc/udev/rules.d` 目录中 创建文件是：

```
SUBSYSTEM=="usb", ATTRS{idVendor}=="1366", ATTRS{idProduct}=="010[1234]", MODE="664", GROUP="plugdev" 
```

见： http: [//forum.segger.com/index.php?page=Thread &threadID=1175](http://forum.segger.com/index.php?page=Thread&threadID=1175)

# java - 在运行时为操作系统释放 java 内存。

> ID：11919400
> 
> 赞同：7
> 
> 时间：2012-08-12T03:02:06.543
> 
> 标签：java, jvm

假设我有一个 Swings Java 应用程序，我设置 min Heap 为 64MB，max Heap 2GB，当用户启动应用程序时，将显示登录屏幕，此时应用程序使用 64MB，对吗？在我的 Windows 7 中，我可以看到 java 应用程序从操作系统的内存资源监视器中分配了 64MB（实际上，它超过了 64MB，因为 JVM 需要一些内存来完成它的任务）。

之后用户做了一些非常繁重的工作，然后应用程序使用 2G。然后用户退出应用程序，再次显示登录屏幕（应用程序尚未关闭）。此时应用程序使用的实际内存为 64MB（假设这是完美的内存管理应用程序），但在 OS 中这个应用程序仍然使用 2G 的 RAM，我可以在 OS 的资源监视器上看到它。

我希望我的应用程序在不需要使用大内存时将内存释放给操作系统。我可以在运行时使用 java 应用程序吗？

我的意思是当我的应用程序需要使用 64MB 内存时，操作系统只给它 64MB，当它需要 2GB 内存时，操作系统给它 2GB，之后它需要 64MB 内存，然后操作系统又给它 64MB，我不希望它浪费 2000MB - 64MB = 1936MB。

我可以这样做吗？

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-12T04:06:45.910

> 我希望我的应用程序在不需要使用大内存时将内存释放给操作系统。我可以在运行时使用 java 应用程序吗？

不，你不能。

在某些情况下，GC 会自行将内存释放回操作系统，但我不知道有任何 JVM 允许应用程序告诉 GC 这样做。最重要的是，GC 对此相当保守，因为......作为一般规则...... JVM 将使用更多内存更有效地运行，并且不断向操作系统请求/返还内存效率低下。

* * *

请注意，GC 调整选项`-XX:MaxHeapFreeRatio`可用于指定在 GC 归还内存之前可用堆与已用堆的最大比率。然而，也有并发症。例如，并非所有可用的 GC 都尊重此选项。如果你打算尝试这种方法，我建议你做一些研究......不要指望奇迹。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-20T21:38:10.890

我已经[在那里](http://javagc.blogspot.de/2013/03/java-hotspot-vm-footprint-optimization.html)发布了我的测试结果。基本上，MaxHeapFreeRatio 并不是每个 GC 实现都遵守的，更糟糕​​的是，似乎有必要有足够的堆活动以便及时触发它，即。可能是您需要 2 次完整的 GC 运行才能将内存实际释放到操作系统。如果您有 X GB 的突发内存占用，那么您可能必须分配该数量的 1 或 2 倍才能触发堆缩小。或者您手动调用 System.gc() 。

如果性能不是问题，并且内存占用很重要，请尝试：

```
-XX:UseSerialGC -Xms16M -Xminf=5 -Xmaxf=10 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-12T04:14:40.453

热点中的 serialgc 将返回内存……至少它曾经如此。你的表现会一蹶不振。

IBM J9 jvm 中的所有垃圾收集器都会释放内存。我不确定这个jvm是免费下载的......

最好的答案是，你为什么担心？如今，内存非常便宜，而免费内存就是浪费内存。这*真的是*个问题吗？无论如何，操作系统都会将多余的未使用内存分页到磁盘。最好的答案是忽略它。:)

你也可以考虑用谷歌搜索堆外存储，也许是 Teracotta/eh 缓存。

编辑：

我刚刚在 JDK1.7u6 中注意到，使用具有小 Xms 和大 Xmx 的 G1GC，垃圾收集器将在释放多余对象的几次垃圾收集后减小堆的大小。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-12T03:04:53.920

您可以处理对象并建议垃圾收集器完成其工作，但如果 GC 认为没有必要，则该请求将被忽略。所以总而言之，“不”。

请注意分配给 Java 应用程序的内存。在应用程序之前设置。启动，并且不可调节。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-05T17:54:00.637

尝试将部分代码分叉到单独的线程，并在不再需要时将其丢弃。

# android - 日历活动本地保存在手机上，但无法同步到 Google 日历

> ID：11919402
> 
> 赞同：10
> 
> 时间：2012-08-12T03:02:30.837
> 
> 标签：android, sync, google-calendar-api, android-calendar

我尝试通过以下代码添加日历。创建的活动可以通过我手机上的日历应用程序读取，但只需同步到在线 Google 日历。任何人都可以给我一些解决问题的方法吗？

这里有一些说明 1.代码是在我的真实手机上运行的（Galaxy Nexus 4.1.1） 2.所有其他日历事件都可以同步到谷歌日历，只是添加的程序不能同步。

- -更新 - -

当我更改以下代码时

```
values.put(CalendarContract.Events.SYNC_EVENTS,1);
values.put(CalendarContract.Events.VISIBLE, 1); 
```

-- 我得到错误

```
java.lang.IllegalArgumentException: Only the provider may write to sync_events 
```

* * *

```
 public void addEvent() {

    long startMillis = 0;
    long endMillis = 0;

    Log.v("LOG", "entered addEvent");

    //Calendar beginTime = Calendar.getInstance();
    //beginTime.set(2012, 8, 11, 22, 0);
    //startMillis = beginTime.getTimeInMillis();
    startMillis = System.currentTimeMillis() + (3600 * 1000)*4;

    //Calendar endTime = Calendar.getInstance();
    //endTime.set(2012, 8, 11, 23, 0);
    //endMillis = endTime.getTimeInMillis();
    endMillis = System.currentTimeMillis() + (3600 * 1000)*5;

    ContentResolver cr = getContentResolver();
    ContentValues values = new ContentValues();

    values.put(CalendarContract.Events.DTSTART, startMillis);
    values.put(CalendarContract.Events.DTEND, endMillis);
    values.put(CalendarContract.Events.TITLE, "Dog");
    values.put(CalendarContract.Events.DESCRIPTION, "DogInDESCRIPTION");
    values.put(CalendarContract.Events.CALENDAR_ID, 1);
    values.put(CalendarContract.Events.EVENT_TIMEZONE, "eventTimezone");

    values.put(CalendarContract.Events.SYNC_EVENTS,0);      

    cr.insert(CalendarContract.Events.CONTENT_URI, values);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T21:32:37.050

你不应该设置`CalendarContract.Events.SYNC_EVENTS`。`CalendarContract.Events.CONTENT_URI`

如果日历已在您的设备上设置为可见并同步，您只需添加一个事件，它就会同步。

如果您需要从应用程序打开同步，您可以设置`CalendarContract.Events.SYNC_EVENTS`为 on `CalendarContract.Calendars.CONTENT_URI`。

例如（`calId`是要更新为可见和同步的日历的 ID）。

```
ContentResolver cr = context.getContentResolver();
ContentValues values = new ContentValues();
values.put(CalendarContract.Calendars.SYNC_EVENTS, 1);
values.put(CalendarContract.Calendars.VISIBLE, 1);

cr.update(ContentUris.withAppendedId(Calendars.CONTENT_URI, calId), values, null, null); 
```

# php - 表`inventory1`的外键约束失败。`asset_details`：错误

> ID：11919403
> 
> 赞同：1
> 
> 时间：2012-08-12T03:02:38.557
> 
> 标签：php, mysql

这是我在运行 show DB innobd status 命令时收到的错误消息。我是 php 和 mysql 的新手，任何帮助将不胜感激。先感谢您 。

当我将数据提交到我的数据库时，信息会进入资产表而不是 assert_details ？

```
LATEST FOREIGN KEY ERROR
------------------------
120811 22:40:43 Transaction:
TRANSACTION 1A4F, ACTIVE 0 sec inserting
mysql tables in use 1, locked 1
4 lock struct(s), heap size 1248, 2 row lock(s), undo log entries 2
MySQL thread id 73, OS thread handle 0x10ccc4000, query id 339 localhost root update
INSERT INTO asset_details (asset_type,make, model, serial_number, os,os_version,memory, hdd, processor,notes)
            Values( 'Monitor','Apple ','Mac Book Pro 17 inch ','65655453445545','Macintosh','Snow Lion ','5 gb ','1 TB','Intel i 9','This is Paskale New Mac book pro computer.')
Foreign key constraint fails for table `inventory1`.`asset_details`:
,
  CONSTRAINT `asset_tag` FOREIGN KEY (`asset_tag`) REFERENCES `asset` (`asset_tag`) ON DELETE CASCADE ON UPDATE CASCADE
Trying to add in child table, in index `asset_tag` tuple:
DATA TUPLE: 2 fields;
 0: len 4; hex 80000000; asc     ;;
 1: len 4; hex 80000001; asc     ;;

But in parent table `inventory1`.`asset`, in index `PRIMARY`,
the closest match we can find is record:
PHYSICAL RECORD: n_fields 8; compact format; info bits 0
 0: len 4; hex 80000007; asc     ;;
 1: len 6; hex 000000001a4f; asc      O;;
 2: len 7; hex c0000001d40110; asc        ;;
 3: SQL NULL;
 4: len 14; hex 4465636f6d6d697373696f6e6564; asc Decommissioned;;
 5: SQL NULL;
 6: len 7; hex 4d6f6e69746f72; asc Monitor;;
 7: SQL NULL; 
```

这是在我的数据库中创建表的脚本。

这是创建表的脚本

```
SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL';

DROP SCHEMA IF EXISTS `inventory1` ;
CREATE SCHEMA IF NOT EXISTS `inventory1` DEFAULT CHARACTER SET latin1 COLLATE latin1_swedish_ci ;
USE `inventory1` ;

-- -----------------------------------------------------
-- Table `inventory1`.`department`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `inventory1`.`department` ;

CREATE  TABLE IF NOT EXISTS `inventory1`.`department` (
  `department_id` INT NOT NULL AUTO_INCREMENT ,
  `department_name` VARCHAR(45) NOT NULL ,
  `job_id` VARCHAR(45) NOT NULL ,
  PRIMARY KEY (`department_id`) )
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `inventory1`.`employee`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `inventory1`.`employee` ;

CREATE  TABLE IF NOT EXISTS `inventory1`.`employee` (
  `employee_id` INT NULL AUTO_INCREMENT ,
  `department_id` INT NOT NULL ,
  `fname` VARCHAR(45) NULL ,
  `lname` VARCHAR(45) NULL ,
  `email` VARCHAR(45) NULL ,
  `phone_number` VARCHAR(45) NULL ,
  `hire_date` VARCHAR(45) NULL ,
  `job_id` VARCHAR(45) NULL ,
  `manager_id` VARCHAR(45) NULL ,
  PRIMARY KEY (`employee_id`) ,
  INDEX `department_id` (`department_id` ASC) ,
  CONSTRAINT `department_id`
    FOREIGN KEY (`department_id` )
    REFERENCES `inventory1`.`department` (`department_id` )
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `inventory1`.`invoice`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `inventory1`.`invoice` ;

CREATE  TABLE IF NOT EXISTS `inventory1`.`invoice` (
  `invoice_id` INT NOT NULL AUTO_INCREMENT ,
  `invoice_number` INT NULL ,
  `invoice_date` INT UNSIGNED NULL ,
  `purchase_price` INT UNSIGNED NULL ,
  `quantity` INT UNSIGNED NULL ,
  `order_date` INT UNSIGNED NULL ,
  `vender` INT UNSIGNED NULL ,
  `warranty_end` DATE NULL ,
  `notes` VARCHAR(255) NULL ,
  PRIMARY KEY (`invoice_id`) )
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `inventory1`.`asset`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `inventory1`.`asset` ;

CREATE  TABLE IF NOT EXISTS `inventory1`.`asset` (
  `asset_tag` INT NOT NULL ,
  `invoice_id` INT NULL ,
  `status` VARCHAR(25) NULL ,
  `cap_ex` VARCHAR(20) NULL ,
  `asset_type` VARCHAR(25) NULL ,
  `invoice_number` INT NULL ,
  PRIMARY KEY (`asset_tag`) ,
  CONSTRAINT `invoice_id`
    FOREIGN KEY (`invoice_id` )
    REFERENCES `inventory1`.`invoice` (`invoice_id` )
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `inventory1`.`location`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `inventory1`.`location` ;

CREATE  TABLE IF NOT EXISTS `inventory1`.`location` (
  `location_id` INT NOT NULL AUTO_INCREMENT ,
  `location_name` VARCHAR(45) NULL ,
  `rack` INT NULL ,
  `row` INT NULL ,
  `unit` INT NULL ,
  PRIMARY KEY (`location_id`) )
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `inventory1`.`physical_asset`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `inventory1`.`physical_asset` ;

CREATE  TABLE IF NOT EXISTS `inventory1`.`physical_asset` (
  `physical_asset_id` INT NOT NULL AUTO_INCREMENT ,
  `location_id` INT NOT NULL ,
  `employee_id` INT NOT NULL ,
  `physical_asset_name` VARCHAR(45) NOT NULL ,
  PRIMARY KEY (`physical_asset_id`) ,
  INDEX `location_id` (`location_id` ASC) ,
  INDEX `employee_id` (`employee_id` ASC) ,
  CONSTRAINT `location_id`
    FOREIGN KEY (`location_id` )
    REFERENCES `inventory1`.`location` (`location_id` )
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `employee_id`
    FOREIGN KEY (`employee_id` )
    REFERENCES `inventory1`.`employee` (`employee_id` )
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `inventory1`.`asset_details`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `inventory1`.`asset_details` ;

CREATE  TABLE IF NOT EXISTS `inventory1`.`asset_details` (
  `asset_id` INT NULL AUTO_INCREMENT ,
  `asset_tag` INT NOT NULL ,
  `physical_asset_id` INT NULL ,
  `asset_type` VARCHAR(45) NULL ,
  `manufacturer` VARCHAR(45) NULL ,
  `os` VARCHAR(45) NULL ,
  `os_version` VARCHAR(45) NULL ,
  `make` VARCHAR(45) NULL ,
  `model` VARCHAR(45) NULL ,
  `serial_number` VARCHAR(45) NULL ,
  `processor` VARCHAR(45) NULL ,
  `ram` VARCHAR(45) NULL ,
  `memory` VARCHAR(45) NULL ,
  `hdd` VARCHAR(45) NULL ,
  `host_name` VARCHAR(45) NULL ,
  `notes` VARCHAR(250) NULL ,
  PRIMARY KEY (`asset_id`) ,
  INDEX `physical_asset_id` (`physical_asset_id` ASC) ,
  INDEX `asset_tag` (`asset_tag` ASC) ,
  CONSTRAINT `physical_asset_id`
    FOREIGN KEY (`physical_asset_id` )
    REFERENCES `inventory1`.`physical_asset` (`physical_asset_id` )
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `asset_tag`
    FOREIGN KEY (`asset_tag` )
    REFERENCES `inventory1`.`asset` (`asset_tag` )
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;

SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

    LATEST FOREIGN KEY ERROR
    ------------------------
    120811 22:40:43 Transaction:
    TRANSACTION 1A4F, ACTIVE 0 sec inserting
    mysql tables in use 1, locked 1
    4 lock struct(s), heap size 1248, 2 row lock(s), undo log entries 2
    MySQL thread id 73, OS thread handle 0x10ccc4000, query id 339 localhost root update
    INSERT INTO asset_details (asset_type,make, model, serial_number, os,os_version,memory, hdd, processor,notes)
                Values( 'Monitor','Apple ','Mac Book Pro 17 inch ','65655453445545','Macintosh','Snow Lion ','5 gb ','1 TB','Intel i 9','This is Paskale New Mac book pro computer.')
    Foreign key constraint fails for table `inventory1`.`asset_details`:
    ,
      CONSTRAINT `asset_tag` FOREIGN KEY (`asset_tag`) REFERENCES `asset` (`asset_tag`) ON DELETE CASCADE ON UPDATE CASCADE
    Trying to add in child table, in index `asset_tag` tuple:
    DATA TUPLE: 2 fields;
     0: len 4; hex 80000000; asc     ;;
     1: len 4; hex 80000001; asc     ;;

    But in parent table `inventory1`.`asset`, in index `PRIMARY`,
    the closest match we can find is record:
    PHYSICAL RECORD: n_fields 8; compact format; info bits 0
     0: len 4; hex 80000007; asc     ;;
     1: len 6; hex 000000001a4f; asc      O;;
     2: len 7; hex c0000001d40110; asc        ;;
     3: SQL NULL;
     4: len 14; hex 4465636f6d6d697373696f6e6564; asc Decommissioned;;
     5: SQL NULL;
     6: len 7; hex 4d6f6e69746f72; asc Monitor;;
     7: SQL NULL; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T03:05:49.960

编辑：对不起，我看错了

发生的情况是您尝试在具有其他表的外键但未指定外键 ID 的表中放入一行。

在插入asset_details 表之前，您必须设置外键的值（并且这些键存在于其他表中）。

所以你的插入

```
 INSERT INTO asset_details (asset_type,make, model, serial_number, os,os_version,memory, hdd, processor,notes)
        Values( 'Monitor','Apple ','Mac Book Pro 17 inch ','65655453445545','Macintosh','Snow Lion ','5 gb ','1 TB','Intel i 9','This is Paskale New Mac book pro computer.') 
```

还应包括`physical_asset_id`

# java - 如何读取 Android 的 CamcorderProfile.QUALITY_HIGH 宽度/高度？

> ID：11919408
> 
> 赞同：1
> 
> 时间：2012-08-12T03:03:20.470
> 
> 标签：java, android, api, video

由于我想通过 CamcorderProfiles ( `CamcorderProfile.QUALITY_HIGH`/LOW) 设置 Android 摄像机录制质量，我还需要相应地设置摄像机预览大小（和布局）。如何读取我指定的记录配置文件的实际宽度/高度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T23:48:20.680

一旦您有了 CamcorderProfile：

```
CamcorderProfile cm = CamcorderProfile.get(CamcorderProfile.QUALITY_1080P); 
```

你可以得到videoFrameWidth/Height：

```
int width = cm.videoFrameWidth
int height = cm.videoFrameHeight 
```

现在，如果我只能让我的摄像机的其余部分工作...... :(

# jquery-ui - jQuery-ui：如何从私有函数内部访问选项

> ID：11919412
> 
> 赞同：1
> 
> 时间：2012-08-12T03:04:41.083
> 
> 标签：jquery-ui, jquery-ui-plugins, jquery-ui-widget-factory

我正在学习使用小部件工厂模式编写 jquery-ui 插件。为了更简洁的组织，我在传递给 `$.widget`. 我想访问这些助手中的选项对象。例如在下面的样板中，我如何访问里面的选项对象`_helper()`？

```
;(function ( $, window, document, undefined ) {

    $.widget( "namespace.widgetName" , {

        options: {
            someValue: null
        },

        _create: function () {
            // initialize something....
        },

        destroy: function () {

            $.Widget.prototype.destroy.call(this);
        },

        _helper: function () {
            // I want to access options here.
            // "this" points to the dom element, 
            // not this object literal, therefore this.options wont work
            console.log('methodB called');
        },

        _setOption: function ( key, value ) {
            switch (key) {
            case "someValue":
                //this.options.someValue = doSomethingWith( value );
                break;
            default:
                //this.options[ key ] = value;
                break;
            }
            $.Widget.prototype._setOption.apply( this, arguments );
        }
    });

})( jQuery, window, document ); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T19:19:23.747

所以你在你的内部这样做`_create`：

```
$(some_selector).click(this._helper) 
```

并且您希望`this`在内部`_helper`成为`this`on `this._helper`（即您的小部件）。

有多种解决方案：

1.  你可以使用[`$.proxy`](http://api.jquery.com/jquery.proxy/)

    ```
    $(some_selector).click($.bind(this._helper, this)); 
    ```

    如果您不必担心 JavaScript 版本问题，Underscore 也有[`_.bind`](http://underscorejs.org/#bind)并且有一个本机）。[`Function.bind`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)其他库将拥有自己的函数绑定工具。您已经使用了 jQuery，因此`$.proxy`它也已经可用且可移植。

2.  您可以自己使用标准`var _this = this;`技巧代理`_helper`调用：

    ```
    var _this = this;
    $(some_selector).click(function() { _this._helper() }); 
    ```

3.  您可以使用以下[`eventData`形式`click`](http://api.jquery.com/click/)：

    ```
    $(some_selector).click({ self: this }, this._helper); 
    ```

    然后在`_helper`：

    ```
    _helper: function(ev) {
        var self = ev.data.self;
        // 'self' is the 'this' you're looking for.
        ...
    } 
    ```

# android - 应用组织

> ID：11919413
> 
> 赞同：1
> 
> 时间：2012-08-12T03:04:49.070
> 
> 标签：android, android-layout

有没有办法让我的布局井井有条？我积累了很多，它变得有点混乱。我试图创建文件夹并将它们放在那里，但引用都搞砸了，无法做到这一点。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T03:42:05.007

我尝试确保所有内容都正确命名。

> activity_layout_foo.xml
> 
> fragment_layout_foo.xml
> 
> dialog_layout_foo.xml
> 
> list_item_foo.xml

我还尝试尽可能使用包含和合并[http://developer.android.com/training/improving-layouts/reusing-layouts.html](http://developer.android.com/training/improving-layouts/reusing-layouts.html)

# html - 图像具有相同的格式：一些图像显示，其他不显示

> ID：11919415
> 
> 赞同：2
> 
> 时间：2012-08-12T03:04:56.967
> 
> 标签：html, image, src

我正在尝试将图像添加到我的网页，并使用 img 标签：

由于某种原因，图像无法加载。我在同一目录下有更多图像，当我用其他图像替换图像名称时，它会显示在网页中。这意味着某些图像能够加载，而某些图像由于某种原因无法加载。图像都是相同的格式。如果格式相同，为什么有些图像会显示而有些则不会？

有谁知道这是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T07:08:38.247

在 photoshop 等照片编辑器软件中打开您的图像，然后检查`Mode`您的图像。它必须是`RGB`，不是`CMYK`或别的什么。

在 Photoshop 中，您可以从`Image/Mode/RGB Color`菜单中执行此操作。

但在检查您的文件名和它们是否区分大小写之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T07:21:08.797

我认为你的 case 与**case sensivity**有关。可能您的图像名称或某些字符的扩展名是大写的。
检查您的`img-src`标签是否具有该图像的确切名称和扩展名。

# php - 检测 JS 是否刷新了页面或用户是否刷新了页面

> ID：11919424
> 
> 赞同：0
> 
> 时间：2012-08-12T03:06:50.110
> 
> 标签：php

有什么方法可以检测窗口是否被用户刷新或者它是否是 window.location.reload(); 已执行并刷新页面的 js 命令？

因为如果用户刷新页面/导航，我想取消设置过滤器会话变量，并且如果我重新加载（javascript），我想保留这个过滤器会话变量。

我尝试与`$_SERVER['HTTP_REFERER']`

当我执行 window.location.reload() 时，$_SERVER['HTTP_REFERER'] 成为完整的当前路径链接，所以我尝试这样做：

```
if(!isset($_SERVER['HTTP_REFERER']) || $_SERVER['HTTP_REFERER'] != url::base(true).Request::current()->uri())
{
    $session = Session::instance();
    $session->delete('deal_filter');
} 
```

但这不是有效的，并且仅在某些时候有效。

如果我不能以这种方式检测到它，还有其他方法可以实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T03:22:56.383

您可以尝试向您的页面提交一个带有值的 POST 请求，而不是刷新。我想你需要做的就是添加一个表格，

```
<form name="refresh_form" action="mypage.php" method="post">
<input type="hidden" name="refresh" value="yes">
</form> 
```

用一些提交表单的代码替换用于刷新的 Javascript 代码，

```
document.refresh_form.submit(); 
```

并检查页面上 PHP 中的值：

```
if (isset($_POST['refresh']))
{
    // handle the case when your Javascript submitted the refresh
} 
```

# java - 为什么要打包多次？

> ID：11919425
> 
> 赞同：0
> 
> 时间：2012-08-12T03:07:02.497
> 
> 标签：java, pack

```
public PenApp() {
    super("PenApp");
    pack();
    setVisible(true);
    setVisible(false);
    pack();
    setResizable(false);
    pack();
    Dimension d = Toolkit.getDefaultToolkit().getScreenSize();
    setLocation((d.width - CANVAS_SIZE) / 2, (d.height - CANVAS_SIZE) / 2);
    setSize(CANVAS_SIZE + getInsets().left + getInsets().right,
        CANVAS_SIZE + getInsets().top + getInsets().bottom);
    addWindowListener(new WindowAdapter() {
        public void windowClosing(WindowEvent e) {System.exit(0);}
    });

    img = Toolkit.getDefaultToolkit().getImage
        (getClass().getResource("penguin.gif"));
    img2 = Toolkit.getDefaultToolkit().getImage
        (getClass().getResource("kuwa.gif"));
    enableEvents(AWTEvent.MOUSE_EVENT_MASK);
    x = getInsets().left;
    y = getInsets().top;

    setVisible(true);
} 
```

像这样的一段代码。我只是想知道为什么在这里使用几个 pack() 和 setVisible() 。谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T03:19:34.360

我们将物品放在容器中，我们可以通过 setSize 或 pack 设置它们的大小。pack 是可取的，因为它调整了框架的大小，所以它的所有内容都等于或高于它们的首选大小；pack 让框架布局管理器负责框架大小。

由于我们将一些 GUI 元素设置为不可见，我们不希望有空白空间，所以也许这就是它被一次又一次使用的原因。我会通过注释中间的所有包来运行该应用程序并验证它是否确实有必要。

# php - 通过 PHP 呈现时 CSS 不起作用

> ID：11919426
> 
> 赞同：4
> 
> 时间：2012-08-12T03:07:02.683
> 
> 标签：php, css

我发现了这个关于如何在容器内 [等距分隔 div 的巧妙技巧：Fluid width with equal-spaced DIVs](https://stackoverflow.com/questions/6865194/fluid-width-with-equally-spaced-divs)

我使用静态 HTML 进行了尝试，效果很好：

```
<div class="category_area">
<div class="news_box shadow"><div class="inside"><h2><a href="#">Test</a></h2></div></div>
<div class="news_box shadow"><div class="inside">B</div></div>
<div class="news_box shadow"><div class="inside">C</div></div>
<div class="news_box shadow"><div class="inside">D</div></div>
<span class="stretch"></span></div> 
```

然后我用 PHP 以编程方式做到了这一点：

```
<?php
echo "<div class='category_area'>";
for ($i=0;$i<4;$i++) {
    echo "<div class='news_box shadow'><div class='inside'><h2><a href='#'>Test</a></h2></div></div>";
}
echo "<span class='stretch'></span></div>"; 
```

但是，PHP 版本不起作用，尽管当我通过浏览器查看源代码时，生成的 HTML 是相同的。我认为这是因为 PHP 的呈现方式。

这是我的CSS：

```
.category_area {
    text-align:justify;
    -ms-text-justify:distribute-all-lines;
    text-justify:distribute-all-lines;
}

.category_area .news_box {
    width:200px;
    height:250px;
    vertical-align:top;
    display:inline-block;
    *display:inline;
    zoom:1;
    background:#fff;
    padding:10px;
}

.category_area .news_box .inside {
    display:block;
}

.stretch {
    width:100%;
    display:inline-block;
    font-size:0;
    line-height:0;
}

.shadow {
    -moz-box-shadow: 3px 3px 4px #999;
   -webkit-box-shadow: 3px 3px 4px #999;
    box-shadow: 3px 3px 4px #999;
    /* For IE 8 */
    -ms-filter: "progid:DXImageTransform.Microsoft.Shadow(Strength=4, Direction=135, Color='#999999')";
    /* For IE 5.5 - 7 */
    filter: progid:DXImageTransform.Microsoft.Shadow(Strength=4, Direction=135, Color='#999999');
} 
```

以下是通过浏览器查看源代码时的外观（静态）：

```
<div class="category_area">
<div class="news_box shadow"><div class="inside"><h2><a href="#">Test</a></h2></div></div>
<div class="news_box shadow"><div class="inside">B</div></div>
<div class="news_box shadow"><div class="inside">C</div></div>
<div class="news_box shadow"><div class="inside">D</div></div>
<span class="stretch"></span></div> 
```

PHP版本：

```
<div class='category_area'><div class="news_box shadow"><div class="inside"><h2><a href="#">Test</a></h2></div></div><div class="news_box shadow"><div class="inside"><h2><a href="#">Test</a></h2></div></div><div class="news_box shadow"><div class="inside"><h2><a href="#">Test</a></h2></div></div><div class="news_box shadow"><div class="inside"><h2><a href="#">Test</a></h2></div></div><span class="stretch"></span></div> 
```

关于如何完成这项工作的任何提示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T03:31:14.700

您缺少空格（html 示例中的换行符） - 这是我个人尝试避免任何此类`inline-block`解决方法的原因之一。

添加换行符或空格将为您修复它：

```
for ($i=0;$i<4;$i++) {
    echo "\r\n<div class='news_box shadow'><div class='inside'><h2><a href='#'>Test</a></h2></div></div>";
} 
```

或者，为了更具可读性（imo）标记：

```
for ($i=0;$i<4;$i++) { ?>
  <div class="news_box shadow">
    <div class="inside">
      <h2><a href="#">Test</a></h2>
    </div>
  </div>
<?php } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T03:28:36.393

我一直在玩弄它，直到我让它看起来像你发布的默认 HTML，这就是我得到的：

```
<div class='category_area'>
<?
    for ($i=0;$i<4;$i++) { 
?>
<div class='news_box shadow'><div class='inside'><h2><a href='#'>Test</a></h2></div></div>
<?  } ?>
<span class='stretch'></span></div> 
```

这似乎有点 hacky ，所以可能有更好的方法来做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T04:10:45.290

用这个

```
<?php
echo '<div class="category_area">';
for ($i=0;$i<4;$i++) {
    echo '<div class="news_box shadow"><div class="inside"><h2><a href="#">Test</a></h2></div></div> ';
}
echo '<span class="stretch"></span></div>';
?> 
```

问题是`echo "<div class='news_box shadow'><div class='inside'><h2><a href='#'>Test</a></h2></div></div>";`一致的。打印额外空间解决您的问题。像

```
echo "<div class='news_box shadow'><div class='inside'><h2><a href='#'>Test</a></h2></div></div> "; 
```

# c# - PC XNA 游戏转换为 Xbox 360 - 巨大的性能问题

> ID：11919428
> 
> 赞同：7
> 
> 时间：2012-08-12T03:08:16.380
> 
> 标签：c#, xna, xbox360

所以我想将我的 PC 游戏转换为在 Xbox 360 上运行。它在 PC 上运行得非常好，配备 Intel Core 2 Quad @ 2.40Ghz 和 Radeon 4850 512MB。

我将它移植到 Xbox 上，马上就发现列表导入的不变性和继承存在一些问题，所以我简单地使用了称为 .Cast<>() 的 LINQ 方法。

如果这种方法开销很大，请告诉我，因为由于某种原因我无法在 360 上部署性能分析，很可能是因为它在 360 上播放。

然后另一个问题来了，这是一个很好的 System.OutOfMemoryException。我的天空盒纹理是 4096x4096，因此将它们减少一半可以消除该错误。奇怪的是，它们只有 3MB x 6，所以它不应该使用那么多可用的 512MB。

因此，当所有这些问题都被清除后，每 2 秒 1 帧的效果就被引入了。然后它在玩 1 分钟后崩溃，无论这意味着什么，它都是“代码 4”。

它像幻灯片一样播放。以下是来自 PC 游戏的一些性能分析图像。他们还不错。

CPU： http: [//i.imgur.com/JYx7Z.png](http://i.imgur.com/JYx7Z.png) RAM： http: [//i.imgur.com/C29KN.png](http://i.imgur.com/C29KN.png) 72% = 150MB 请注意。

我希望这里的任何人都对这个问题有一些经验。坦率地说，我全神贯注。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-12T13:19:13.597

性能问题的根本原因几乎可以肯定是因为您在游戏运行时分配内存（在启动之后，在`Draw`/`Update`循环期间）。

在 Windows 上，这很好。Windows 上的垃圾收集器是分代的（只会在可能的情况下清理新对象）并且速度极快。它也很聪明地选择了何时运行。

另一方面，Xbox 360 上的垃圾收集器完全是垃圾。它为每分配 1MB 的内存运行。它在运行时检查整个托管堆。而且启动速度很慢。

**所以答案是永远不要在游戏处于运行状态时分配内存。**

[这里](http://blogs.msdn.com/b/shawnhar/archive/2007/07/02/twin-paths-to-garbage-collector-nirvana.aspx)有一篇很好的博客文章。（它还描述了从不分配内存的替代方案 - 这是为了降低堆复杂性 - 这真的很难实现，我不推荐它。）

*   您将不得不删除诸如 LINQ 之类的东西，因为它创建的查询对象是堆对象，它经常需要的委托也是如此。请改用简单的循环。
*   如果您在绘制/更新中分配自己的引用类型，则必须尽可能转换为使用值类型或添加对象池。
*   创建`string`对象是内存分配的另一个常见来源——相反，您可以重用 a`StringBuilder`并直接渲染它。
*   将事物（尤其是：数字）转换为字符串，即使 for`StringBuilder`也会分配内存。您需要编写/找到无需分配的替代方案。[我对这个类似问题的回答](https://stackoverflow.com/a/10924720/165500)是针对`int`.

诊断内存分配位置的最佳方法是在 Windows 上使用**[CLR Profiler运行游戏。](http://www.microsoft.com/en-us/download/details.aspx?id=16273)**这将告诉您分配内存的位置和时间。只需优化，直到您不分配。

（或者直到您可靠地为每个级别/地图/房间/任何东西分配少于 1MB 的空间，并在适合卡顿的时间执行手动 GC - 例如静态加载屏幕或淡入淡出。）

**代码 4 是未处理的异常。**您需要安装一个输出消息的顶级异常处理程序，或者在调试器中运行您的游戏，以确定原因。

最后：这可能是纹理的*压缩*大小（使用 PNG 或 JPEG 或类似的）。如果您的纹理未压缩，则**4096 × 4096 × 6 × 4 字节 = 384MB**。这是巨大的——难怪你的内存用完了。您可以使用 DXT1 压缩它们并将它们缩小 6 倍（[说明](http://blogs.msdn.com/b/shawnhar/archive/2008/10/28/texture-compression.aspx)，[wiki](http://en.wikipedia.org/wiki/S3_Texture_Compression)）。你也可以降低他们的分辨率。你需要底面吗？

# c# - UDP 跟踪器不适用于 monotorrent 客户端

> ID：11919431
> 
> 赞同：1
> 
> 时间：2012-08-12T03:09:20.787
> 
> 标签：c#, udp, monotorrent

作为我的 tcp 聊天文件共享的一部分，我使用 monotorrent 在服务器程序（我的聊天）上构建了一个 udp 跟踪器，但是客户端（我用 monotorrent 构建）和 monotorrent 源代码上的示例客户端没有连接到跟踪器，客户端和服务器的端口是开放的，Utorrent 确实与跟踪器连接。

我还尝试将源代码上的示例跟踪器用作 udp 跟踪器，但它不起作用。

这就是我更改的内容（7243 = 我的跟踪器端口）：

```
 System.Net.IPEndPoint listenpoint = new System.Net.IPEndPoint(System.Net.IPAddress.Loopback, 7243);
        ListenerBase listener = new MonoTorrent.Tracker.Listeners.UdpListener(listenpoint); 
```

请帮忙

# objective-c - 带有核心数据的 Cocoa 绑定不更新所有列

> ID：11919433
> 
> 赞同：2
> 
> 时间：2012-08-12T03:09:41.940
> 
> 标签：objective-c, cocoa, core-data, nstableview, cocoa-bindings

我有一个奇怪的问题，我有一个 NSArrayController 绑定到 managedObjectContext 并使用数组控制器来填充 NSTableView。我可以创建一个对象并插入它，它将添加新对象并更新绑定到控制器的列之一，而不是其他列！我知道正在设置字段并且绑定工作正常（也许），因为如果我关闭应用程序并重新启动应用程序，一切都会正确填充。

我不确定我错过了什么！如何调试绑定？从我在这里找到的内容： [https](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdTroubleshooting.html#//apple_ref/doc/uid/TP40002320-SW6) ://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdTroubleshooting.html#//apple_ref/doc/uid/TP40002320-SW6 基本上只是说可能是您的控制器或关键值编码合规性。

这是创建实体的代码：

```
NSManagedObjectContext* context = [[BugManager shared] managedObjectContext];
NSError* error;
Bug* newBug = [NSEntityDescription insertNewObjectForEntityForName:@"Bug" inManagedObjectContext:context];
[newBug setValuesForKeysWithDictionary:data];
[context save:&error]; 
```

我已验证所有字段均已正确设置并已保存。我还尝试明确设置值，以查看它是否是关键值观察问题，但无济于事。

这是正确更新的列：

![在此处输入图像描述](../Images/c35694b0f561115669f939d56d74eea0.png)

这是一个没有正确更新的：

![在此处输入图像描述](../Images/dfa246d74a748d3dd5de71d752bd9fa7.png)

和阵列控制器：

![在此处输入图像描述](../Images/7bf1024f5a0824d43b8c26dead614fbd.png)

我可以重新排列表格列，它仍然只更新一个，即目标字段（它之前更新的那个）。我只想让表格正确更新所有列，但这比预期的要困难！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T17:19:00.517

经过数小时将我的头撞到墙上后，我发现问题不是绑定是如何设置的（因为它是正确的），而是实际上我的数据是如何创建的。在我用来填充对象的表单中，我有一个文本字段和一个文本视图。文本字段工作正常，但文本视图没有。当我切换到尝试两者的文本字段时，它也可以正常工作。或者，如果我对字符串文字进行硬编码，则绑定会正确更新。`NSString*`对我来说，解决方法是从文本视图中创建一个显式的。如果你要求它的字符串，它会`NSBigMutableString`因为某种原因给我一个设置核心数据字段的字符串并没有触发通知。

所以我这样做了：

```
NSString* description = [[NSString alloc] initWithString:[[[self descriptionField] textStorage] string]]; 
```

然后我为我的实体使用该字符串值，一切正常。

# xcode4 - 带有条形按钮项的 UIViewController

> ID：11919434
> 
> 赞同：0
> 
> 时间：2012-08-12T03:10:18.873
> 
> 标签：xcode4, uiviewcontroller, storyboard, uibarbuttonitem

我正在使用带有 StoryBoard 的 Xcode 4.4.1

*   我有一个 UIViewController
*   它没有嵌入 UINavigationController
*   我拖入 UIBarButtonItem... 不是工具栏，只是栏按钮
*   一个 ToolBar 被创建并放置在 UIViewController 中的 View 的底部

*   我现在想删除 UIBarButtonItem

*   我删除了按钮，但工具栏仍然在我的视图底部
*   工具栏未显示在文档大纲中

如何摆脱 UIViewController 底部的空白工具栏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T03:58:21.863

选择您的视图控制器。在属性检查器中，将底部栏设置从工具栏更改为无。

![视图控制器底栏设置](../Images/af57e1e7bfbd1dcd941eb2d4d96907f9.png)

# aptana - Aptana 获取 Windows python 解释器而不是 linux 的路径

> ID：11919437
> 
> 赞同：0
> 
> 时间：2012-08-12T03:11:19.117
> 
> 标签：aptana, ubuntu-10.04, pythonpath

我正在使用 Aptana 中的 Windows 进行项目。我更改了操作系统并在未分区的空间上安装了 ubuntu。我再次为 ubuntu 下载了 Aptana 并运行它。我指定了我在 Windows 期间使用的相同工作区，因为我的那个项目分区仍然存在。

我遇到的问题是我无法使用 Aptana 智能，所以我应该更改一些路径等，还是有办法从工作区中删除数据（将信息告诉 aptana 的数据）并重新创建项目以获取新信息。我试图查看该数据，但没有看到 aptana 从工作区或项目目录中使用的数据。

请告诉在这种情况下应该做什么。提前谢谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T19:15:10.947

我刚刚更改了工作区，现在可以正常工作了。这样做之后，它要求解释器的一些路径，我给了它，现在它工作正常。

# php - htaccess url 转发到带有和不带有斜杠的 php 文件

> ID：11919438
> 
> 赞同：0
> 
> 时间：2012-08-12T03:11:35.987
> 
> 标签：php, .htaccess, rewrite, hyperlink

多年来，我一直在寻找这样的东西（当然可以）。如果有人最终可以生成此代码，那就太好了。

目前，我一直在处理这个问题：

```
Options +FollowSymlinks
RewriteEngine on
RewriteCond %{HTTP_HOST} ^example.com$ [NC]
RewriteRule ^(.*)$ http://www.example.com/$1 [R=301,L]
RewriteRule ^(.*)\/$ $1.php [NC] 
```

它工作得很好，但没有斜杠就无法工作。令人讨厌的是，它将所有包含的文件都转发到一个文件夹中，因此我永远添加`../`到所有 css 和 js 文件中。

除了上述之外，它的工作方式如下（按预期）：

1.  如果 www 不存在，这将被添加
2.  [http://www.example.com/page.php](http://www.example.com/page.php)将转到 page.php
3.  [http://www.example.com/page/](http://www.example.com/page/)将转到 page.php
4.  [http://www.example.com/page](http://www.example.com/page)在查找文件夹时会出现 404 错误

我通过谷歌搜索尝试了很多不同的东西，但没有成功。我需要做的就是喜欢不带斜杠的网址，无论是以这种方式将其转发到斜杠还是两者都喜欢。整个想法是让它读取一个 .php 文件并将其作为一个不错的 SEO 类型链接显示在窗口中：www.example.com/page

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T04:45:16.203

```
Options +FollowSymlinks
RewriteEngine On
DirectorySlash Off
RewriteBase /
RewriteCond %{HTTP_HOST} ^example.com$ [NC]
RewriteRule ^(.*)$ http://www.example.com/$1 [R=301,L]
RewriteRule ^(.*)\/(\?.*)?$ $1$2 [R=301,L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ $1.php [NC]

<IfModule mod_rewrite.c>
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule> 
```

这行得通。回答这个问题。任何人都可以改善这一点吗？

# ios - iTunesU 笔记 API 还是文件备份？

> ID：11919440
> 
> 赞同：2
> 
> 时间：2012-08-12T03:12:04.383
> 
> 标签：ios, api, backup, file-format

新的[iTunesU iPhone 应用程序](http://www.macrumors.com/2012/07/25/apple-updates-itunes-u-with-note-taking-and-improved-search/)更新了笔记和搜索功能。我很好奇的一件事是，笔记存储在哪里以及以什么格式存储？是否有 API 可以编辑或备份笔记及其与内容的关系，或从其他程序访问笔记？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T03:02:28.743

我相信 iTunes U 通过 iCloud 存储它的笔记（因此有同步选项）。目前没有 API 可以访问任何 iTunes U 信息。

# java - 菜单栏中的菜单选项未显示

> ID：11919442
> 
> 赞同：1
> 
> 时间：2012-08-12T03:13:12.300
> 
> 标签：java, swing, menu, awt, jung

这也发生在库附带的演示中。就像菜单隐藏在画布后面一样。

[http://i128.photobucket.com/albums/p199/paliey87/jung.jpg](http://i128.photobucket.com/albums/p199/paliey87/jung.jpg)

如果我调整窗口大小并隐藏“白色”画布区域，我只会设法让它出现。

[http://i128.photobucket.com/albums/p199/paliey87/jung2.jpg](http://i128.photobucket.com/albums/p199/paliey87/jung2.jpg)

任何线索它的行为是这样的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T04:41:56.753

我猜这是由于[混合了轻量级和重量级的组件](http://java.sun.com/products/jfc/tsc/articles/mixing/)。描述就足够了，我不需要看屏幕截图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T03:28:22.710

这可能是 z 排序的问题。

右键单击隐藏菜单的部分，选择 Order > Send to back

不确定确切的菜单命令，但你应该找到类似的东西。

# java - 找出所有可能抛出的异常？

> ID：11919451
> 
> 赞同：3
> 
> 时间：2012-08-12T03:15:40.113
> 
> 标签：java

是否有可能找出方法签名不一定列出的所有可能引发的异常。

有2个案例

1) 不必声明的运行时异常（显然有些是显而易见的，例如空指针，但我想捕获其他运行时异常，这可能是由于数据不正确，而在开发过程中我不这样做'不知道是坏数据呢）。

2) 作为签名中所列异常的子类的异常。

一个动机的例子

想象一下，我在 HttpURLConnection 对象上调用 getInputStream()，它会抛出 java.io.Exception，但实际上，它会抛出其他异常，这些异常是 java.io.Exception (ala java.io.FileNotFoundException) 的子类，这是我想要的以独特的方式处理（即不想将所有 java.io.Exceptions 混为一谈）。

因此，虽然我可以通过捕获 java.io.Exception 并打印出实际异常来在实践中学习，然后修改代码来处理这种情况，但我想知道是否有更好的方法 :)

谢谢

编辑：我认为人们错过了我的第二个问题。抛出与方法签名完全一致的检查异常的方法，但由于该方法的签名仅具有某种基类，因此未在其中列出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T03:32:17.227

> **是否有可能找出方法签名不一定列出的所有可能引发的异常。**

简单的回答：不是。

我的回答很大程度上基于[此文档](http://docs.oracle.com/javase/tutorial/essential/exceptions/runtime.html)，因此我建议您阅读此文档以了解为什么 Java 设计人员没有让您必须处理所有可能的异常。`unchecked exception`正如文件所言，背后的原因是：

> 运行时异常表示由编程问题引起的问题，因此，不能合理地期望 API 客户端代码从它们中恢复或以任何方式处理它们。此类问题包括算术异常，例如除以零；指针异常，例如试图通过空引用访问对象；和索引异常，例如尝试通过太大或太小的索引访问数组元素。
> 
> 运行时异常可以在程序中的任何地方发生，并且在一个典型的程序中它们可能非常多。必须在每个方法声明中添加运行时异常会降低程序的清晰度。因此，编译器不需要您捕获或指定运行时异常（尽管您可以）。

因此，在我看来，寻找所有可能的异常并不是一个好主意。例如，它没有意义`OutOfMemoryError`。事实上，捕获这样的异常也被认为是一种不好的做法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T04:14:47.680

不。原则上，您无法提前知道运行时 CLASSPATH 上将出现哪些异常类，首先，您也无法提前知道实现您正在查看的接口的可能的类集，或者扩展您正在查看的类并覆盖该方法，除非该类或方法是最终的。您自己的示例就是一个完美的例子：您正在查看`HttpURLConnection`，但它是一个抽象类，运行时出现的实际实现类可能会因您的配置而异：`URLStreamHandler`可以重新定义使用的 HTTP 类以便使用一个返回不同的实现`HttpURLConnection`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T03:32:41.407

这是一个棘手的问题。

有一个比较简单的“无解”。静态分析器应该能够枚举应用程序类库中可用的所有未经检查的异常；以及任何已检查异常的所有子类。当然，这会产生很多误报；即方法签名允许但不可能在调用中抛出的异常。

要找出真正可能引发的异常，您需要使用某种字节码或源代码操作框架来分析代码。应该可以确定在给定方法调用中可能使用的 Java 方法的闭包中提到的类的异常类集。但是，Java 代码中没有提到一些例外情况。这包括 JVM 本身抛出的运行时异常和错误，以及本机代码库可能抛出的其他异常。并且有可能在运行时注入异常抛出代码；例如使用动态代理。最后，您遇到的问题是，某些异常只会在可证明不可能的情况下引发......在给定的应用程序中。

* * *

> 因此，虽然我可以通过捕获 java.io.Exception 并打印出实际异常，然后修改代码来处理这种情况来在实践中学习，但我想知道是否有更好的方法。

是的。更好的方法是阅读 javadoc，使用您的常识来找出可能的异常，如果您有疑问，请阅读源代码。

另一点是您通常不需要知道所有可能的异常来有效地处理它们。

最后，由于实际抛出的异常可能因一个 JVM 而异（这些是实现细节！），所以在代码中准确地假设可能抛出的异常是一个坏主意。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-12T03:32:52.157

在字节码级别，不存在已检查异常，因此如果您正在调用字节码方法，则可以抛出任何东西，而不管方法签名如何。这也意味着您可以使用反射或自定义类加载器从纯 Java 中执行相同的操作。

您还可以使用强制代码抛出任何异常`Thread.stop`

# iphone - NKLibrary 不会让我构建 iphone 报亭应用程序

> ID：11919454
> 
> 赞同：1
> 
> 时间：2012-08-12T03:16:38.840
> 
> 标签：iphone, newsstand-kit

我正在尝试构建一个报亭应用程序，当我尝试运行时出现此链接错误：架构 i386 的未定义符号：“_OBJC_CLASS_$_NKLibrary”，引用自：

我认为问题可能出在我的部署目标 4.0 上，但将其更改为 5.0 并没有帮助。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T05:36:37.020

为了解决，我必须将报亭框架添加到框架中

# image - 使用 HSI<--> RGB 转换编辑饱和度后的蓝/黄/红路径

> ID：11919456
> 
> 赞同：1
> 
> 时间：2012-08-12T03:16:51.490
> 
> 标签：image, colors, rgb, php-gd

我有 HSI<--> RGB 转换，当我尝试通过 $hue+=$add_value 编辑色调时效果很好。

但是当我尝试通过相同的方法（$saturation+= added_saturation）使用相同的转换来改变饱和度时，颜色会变得更亮，但我最终会得到很多色块。例如：原来的白色区域有粉红色的斑块，一些原来的橙色区域变成蓝色。我已经检查了生成的 RGB 值，所有值都在 255 以内。无论我如何尝试，我仍然找不到问题。

added_value 的范围是 -100 到 100。使用的范围是：H：0 到 360 S：0 到 100 I：0 到 255 这是我找到并使用的转换：[http ://web2.clarkson.edu/class /image_process/RGB%20to%20HSI.pdf](http://web2.clarkson.edu/class/image_process/RGB%20to%20HSI.pdf)

# ios - 使用远程 io 进行录制，使用 AVPlayer 连续播放 ipod 库音频

> ID：11919464
> 
> 赞同：1
> 
> 时间：2012-08-12T03:18:47.747
> 
> 标签：ios, avplayer, remoteio

我可以使用远程 io 进行录音和 AVPlayer 连续播放 iPod 库音频吗？

我试过但返回的错误是：

```
AURemoteIO::ChangeHardwareFormats: error -10875. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T03:35:20.477

据我所知，官方是不可能的。当您开始录制会话时，除了录制不占用它。一旦你在会话中播放和录制会话必须解决。录制和回放会话，会话不能同时被占用。

参考苹果文档：[Audio Session](http://developer.apple.com/library/ios/#documentation/Audio/Conceptual/AudioSessionProgrammingGuide/Basics/Basics.html)

AVAudioSessionCategoryPlayAndRecord 或等效的 kAudioSessionCategory_PlayAndRecord - 将此类别用于输入和输出音频的应用程序。**`The input and output need not occur simultaneously,`**但如果需要可以。**`This is the category to use for audio chat applications.`**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T00:13:28.773

对的，这是可能的。我建议下载这个示例应用程序：http: [//zerokidz.com/audiograph/Home.html](http://zerokidz.com/audiograph/Home.html) audioGraph。然后在启用麦克风时尝试使用 AVPlayer 播放音频文件。我发现这是可能的，但这取决于你想用 AVPlayer 播放的音频的文件格式。

例如，我发现如果您有一个 44800hz 的 InputCallback 并尝试使用 44100hz 的 AVPlayer 播放音频文件，您将开始在 InputCallback 中收到错误。但是如果你播放一个 48000hz 的文件，它就可以正常工作。

# macos - 宝石安装 ffi -v '1.1.5' osx 10.8

> ID：11919465
> 
> 赞同：5
> 
> 时间：2012-08-12T03:19:12.367
> 
> 标签：macos, gem

我一直在尝试通过在 OSX 10.8 上安装 ffi

```
gem install ffi -v '1.1.5' 
```

结果

```
ERROR:  Error installing ffi:
ERROR: Failed to build gem native extension.

/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby extconf.rb
checking for ffi.h... no
checking for ffi.h in /usr/local/include,/usr/include/ffi... no
checking for rb_thread_blocking_region()... no
checking for ruby_native_thread_p()... no
checking for rb_thread_call_with_gvl()... no
creating extconf.h
creating Makefile

make
mkdir -p "/Library/Ruby/Gems/1.8/gems/ffi-1.1.5/ext/ffi_c"/libffi-i386; (if [ ! -f       "/Library/Ruby/Gems/1.8/gems/ffi-1.1.5/ext/ffi_c"/libffi-i386/Makefile ]; then echo "Configuring libffi for i386"; cd "/Library/Ruby/Gems/1.8/gems/ffi-1.1.5/ext/ffi_c"/libffi-i386 && env CC=" xcrun cc" CFLAGS="-arch i386 " LDFLAGS="-arch i386" "/Library/Ruby/Gems/1.8/gems/ffi-1.1.5/ext/ffi_c/libffi"/configure --disable-static --with-pic=yes --disable-dependency-tracking --host=i386-apple-darwin > /dev/null; fi); env MACOSX_DEPLOYMENT_TARGET=10.4 make -C "/Library/Ruby/Gems/1.8/gems/ffi-1.1.5/ext/ffi_c"/libffi-i386
Configuring libffi for i386
configure: WARNING: if you wanted to set the --build type, don't use --host.
If a cross compiler is detected then cross compile mode will be used
configure: error: in `/Library/Ruby/Gems/1.8/gems/ffi-1.1.5/ext/ffi_c/libffi-i386':
configure: error: C compiler cannot create executables
See `config.log' for more details
make[1]: *** No targets specified and no makefile found.  Stop.
make: *** ["/Library/Ruby/Gems/1.8/gems/ffi-1.1.5/ext/ffi_c"/libffi-   i386/.libs/libffi_convenience.a] Error 2

Gem files will remain installed in /Library/Ruby/Gems/1.8/gems/ffi-1.1.5 for inspection.
Results logged to /Library/Ruby/Gems/1.8/gems/ffi-1.1.5/ext/ffi_c/gem_make.out 
```

我试图跟随

[安装 ffi (1.1.2) 时出错，Bundler 无法继续](https://stackoverflow.com/questions/11725577/an-error-occured-while-installing-ffi-1-1-2-and-bundler-cannot-continue)

和

[山狮升级后无法安装一些宝石](https://stackoverflow.com/questions/11682429/not-able-to-install-some-gems-after-mountain-lion-upgrade)

没有任何运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-24T17:38:43.740

我的 ffi 安装失败并显示非常相似的错误消息：

```
mkdir -p "/Library/Ruby/Gems/1.8/gems/ffi-1.9.0/ext/ffi_c"/libffi-i386; (if [ ! -f "/Library/Ruby/Gems/1.8/gems/ffi-1.9.0/ext/ffi_c"/libffi-i386/Makefile ]; then echo "Configuring libffi for i386"; cd "/Library/Ruby/Gems/1.8/gems/ffi-1.9.0/ext/ffi_c"/libffi-i386 && env CC=" xcrun cc" CFLAGS="-arch i386 " LDFLAGS="-arch i386" "/Library/Ruby/Gems/1.8/gems/ffi-1.9.0/ext/ffi_c/libffi"/configure --disable-static --with-pic=yes --disable-dependency-tracking --host=i386-apple-darwin > /dev/null; fi); env MACOSX_DEPLOYMENT_TARGET=10.4 make -C "/Library/Ruby/Gems/1.8/gems/ffi-1.9.0/ext/ffi_c"/libffi-i386
Configuring libffi for i386
configure: WARNING: if you wanted to set the --build type, don't use --host.
    If a cross compiler is detected then cross compile mode will be used
configure: error: in `/Library/Ruby/Gems/1.8/gems/ffi-1.9.0/ext/ffi_c/libffi-i386':
configure: error: C compiler cannot create executables 
```

我在命令中发现 xcrun cc 并尝试手动运行它给了我 Apple 的消息，即我没有同意 XCode 命令行工具的许可协议。在 sudo xcrun cc 之后安装成功。

```
$ xcrun cc
Agreeing to the Xcode/iOS license requires admin privileges, please re-run as root via sudo.
$ sudo xcrun cc
You have not agreed to the Xcode license agreements. You must agree to both license agreements below in order to use Xcode.
Hit the Enter key to view the license agreements at '/Applications/Xcode.app/Contents/Resources/English.lproj/License.rtf'
... 
```

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T04:40:52.480

尝试安装`Xcode Command Line Tools`或[https://github.com/kennethreitz/osx-gcc-installer](https://github.com/kennethreitz/osx-gcc-installer)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T17:17:03.083

看起来 ffi 坚持在您的系统运行 64 位时构建 32 位版本。

很可能有两种方法可以继续：

1.  尝试使用最新版本的 gem `gem install ffi`- 但这不必工作 - 因为这需要在库中修复，
2.  编译 32 位 ruby`rvm install 1.9.3-n32 --32`​​ - 但这也不必工作，因为大多数库很可能会被编译为 64 位，因此它可能无法编译或编译并出现问题

# objective-c - 当另一个 segue 结束时调用 segue

> ID：11919467
> 
> 赞同：0
> 
> 时间：2012-08-12T03:19:53.173
> 
> 标签：objective-c, storyboard, segue, uistoryboardsegue

为什么当另一个转场结束时不能正确调用一个转场？我想一定是我的代码错误或无法调用？

```
- (IBAction)optionTapped
{
    if (greeting)
        {
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Alerta!" message:@"something.." delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil];
            [alert show];
            [self performSegueWithIdentifier:@"firstSegue" sender:itemToSent];
            greeting = NO;
        }
    else
        {
            [self performSegueWithIdentifier:@"anotherSegue" sender:nil];
        }
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"anotherSegue"]) {
        UIViewController *viewController = segue.destinationViewController;
        OptionsViewController *controller = (OptionsViewController *)viewController;
        controller.delegate = self;
    } else if ([segue.identifier isEqualToString:@"firstSegue"]) {
        UINavigationController *navigationController = segue.destinationViewController;
        CCGetViewController *controller = (CCGetViewController *)navigationController.topViewController;
        controller.delegate = self;
        controller.itemToSent = sender;
    }

- (void)firstSegueViewController:(CCGetViewController *)controller didFinishAddItem:(InfoListItems *)item
{
    itemToSent = item;
    [self dismissViewControllerAnimated:YES completion:nil];
    if (scanTap) {
        [self scanTapped];
    } else if(infoTap){
        [self optionTapped];
    }
} 
```

还有一件事：“firstSegue”嵌入在 NavigationController 中，“anotherSegue”只是一个视图控制器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T04:44:02.400

我试图不断地移动segue，但我也失败了。

因此，我尝试将第一个 segue 和第二个 segue 之间的间隔设置为一秒钟。

![ss](../Images/8fba5ff002e9d9f305b22189cbbde6ac.png)

这很好用！当您在红色窗口中按下按钮时，会出现绿色窗口，之后会自动出现蓝色窗口。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    [self performSelector:@selector(segue) withObject:nil afterDelay:1.0];
}

- (void)segue
{
    [self performSegueWithIdentifier:@"toBlue" sender:self];
} 
```

您可以下载示例项目并运行它：

[https://github.com/weed/p120812_DoubleSegue](https://github.com/weed/p120812_DoubleSegue)

# ruby-on-rails - 无法清理 Rails 应用程序中的资产

> ID：11919469
> 
> 赞同：1
> 
> 时间：2012-08-12T03:20:51.780
> 
> 标签：ruby-on-rails, ruby-on-rails-3, twitter-bootstrap, rake, asset-pipeline

好吧，这让我发疯了！

我刚刚克隆了一个曾经有 twitter bootstrap 样式的 rails 项目，但它被删除了。当我运行项目时，我仍然得到引导样式！我尝试运行`rake assets:clean`并获得以下输出：

```
/Users/ericavirtue/.rvm/rubies/ruby-1.9.2-p290/bin/ruby /Users/ericavirtue/.rvm/gems/ruby-1.9.2-p290@global/bin/rake assets:clean:all RAILS_ENV=production RAILS_GROUPS=assets
rm -rf /Users/ericavirtue/Sites/rubyblog/public/assets 
```

而且我的项目仍然有引导样式！

我已经从样式表和 javascript 文件夹中删除了引导文件，并删除了 application.css 中对引导程序的引用。

我什至试过`RAILS_ENV=development rake rails_group=assets assets:clean`

有任何想法吗？代码可以在这里找到：

[github.com/arelenglish/rubyblog](http://www.github.com/arelenglish.com/rubyblog)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T03:25:19.570

仔细检查您的公用文件夹以确保其中没有任何预编译资产，并按住 shift 并单击刷新以确保您的浏览器缓存已清除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-04T18:55:47.813

用于`assets:clobber`真正删除资产。`assets:clean`保留 2 个备份，以防旧内容触发加载旧资产。

# javascript - 我们可以在 CouchDb 中对排序的列表视图进行排序吗？

> ID：11919470
> 
> 赞同：1
> 
> 时间：2012-08-12T03:21:15.647
> 
> 标签：javascript, couchdb, couchdb-futon

我有一个 couchdb，其中包含事件的开始时间和坐标。我写了一个列表视图，计算从您当前位置到这些事件的距离，如下所示：

```
locateEvents: function(head, req){ 

        var row, comma = ''; 
        start({
            "headers": {
                "Content-Type": "application/json"
            }
        });
        if(req.query.latitude&&req.query.longitude&&req.query.radius&&req.query.now){

            var R = 6371; // km
            var dLon, dLat, lat1, lat2;

            var results = [];
            while(row = getRow()) { 
                dLon = Math.abs(row.value.venue.longitude-req.query.longitude);
                dLat = Math.abs(row.value.venue.latitude-req.query.latitude);

                dLon = (dLon*3.14159)/180;
                dLat = (dLat*3.14159)/180;

                lat1 = (Math.abs(req.query.longitude)*3.14159)/180;
                lat2 = (Math.abs(req.query.latitude)*3.14159)/180;

                var a = Math.sin(dLat/2) * Math.sin(dLat/2) +
                Math.sin(dLon/2) * Math.sin(dLon/2) * Math.cos(lat1) * Math.cos(lat2); 
                var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); 
                var d = R * c;

                if((d < req.query.radius)&&(row.value.start_time > req.query.now)){
                    results.push(row.value);
                }
            }
            send(JSON.stringify(results));
        }else{
            start({"code": 500});
            send("Latitude, longitude, page and radius parameters should be provided. i.e: latitude=value&longitude=value&radius=value&now=value");
        } 
```

我有一个简单的 byDate 事件视图，如下所示：

```
byDate: {
            map: function(doc){ if (doc.resource === 'Event') {emit(doc.venue.start_time, doc);}}
        } 
```

我的担忧：有没有办法先按列表中的距离对事件进行排序，然后按开始时间对排序列表进行排序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T21:05:58.327

如果我理解正确，您希望最接近的事件首先出现。如果在同一距离内有两个事件，则先显示最早的事件。

这可以通过在将对象推送到结果集之前保存对象中计算的距离来完成：

```
row.value._distance = d;
results.push(row); 
```

请注意，您现在无法保存文档，因为所有以下划线开头的字段`_`都由 couchdb 保留。但是由于每个请求到事件的距离可能不同，这很好。如果您需要将文档保存回商店，请记住删除该属性。

在下一步中，我们需要想出一种巧妙的方法来对您的事件进行排序——我们需要的所有信息现在都存储在文档中。

由于 JavaScript 不喜欢对复杂的数据结构进行排序，我们必须做一些跑腿工作：

```
var sort = function(a,b) {
  if (JSON.stringify(a) == JSON.stringify(b)) return 0;
  return (JSON.stringify([a,b]) == JSON.stringify([a,b].sort())) ? -1 : 1
}; 
```

这个函数只是对一个简单值的数组进行排序，如下所示：

```
> sort(["a",1], ["a", 0])
1

> sort(["a",0], ["a", 1])
-1

> sort(["a",0], ["a", 0])
0 
```

现在有趣的部分是，在`send`将结果返回给客户端之前，对它们进行排序：

```
// ...
results.sort(function(a, b) {
  return sort(
    [a.value._distance, a.value.venue.start_time],
    [b.value._distance, b.value.venue.start_time]
  );
});

send(JSON.stringify(results)); 
```

例子：

```
[{"value": {"_distance": 100, "venue": { "start_time": "Wed, 21 Mar 2012 04:31:24 -0700" } } },
 {"value": {"_distance": 212, "venue": { "start_time": "Sat, 13 Oct 2012 02:52:12 -0700" } } },
 {"value": {"_distance": 235, "venue": { "start_time": "Mon, 22 Jul 2013 12:50:20 -0700" } } },
 {"value": {"_distance": 677, "venue": { "start_time": "Thu, 09 May 2013 03:39:55 -0700" } } },
 {"value": {"_distance": 654, "venue": { "start_time": "Thu, 29 Sep 2011 15:31:46 -0700" } } },
 {"value": {"_distance": 100, "venue": { "start_time": "Tue, 20 Sep 2011 19:16:37 -0700" } } }] 
```

使用上面的函数后变成这个`sort`：

```
[{"value": {"_distance": 100, "venue": {"start_time": "Tue, 20 Sep 2011 19:16:37 -0700" } } },
 {"value": {"_distance": 100, "venue": {"start_time": "Wed, 21 Mar 2012 04:31:24 -0700" } } },
 {"value": {"_distance": 212, "venue": {"start_time": "Sat, 13 Oct 2012 02:52:12 -0700" } } },
 {"value": {"_distance": 235, "venue": {"start_time": "Mon, 22 Jul 2013 12:50:20 -0700" } } },
 {"value": {"_distance": 654, "venue": {"start_time": "Thu, 29 Sep 2011 15:31:46 -0700" } } },
 {"value": {"_distance": 677, "venue": {"start_time": "Thu, 09 May 2013 03:39:55 -0700" } } }] 
```

请注意，排序后，前两个对象有`_distance == 100`，但由于第一个较早，因此首先排序。

希望有帮助！

# visual-studio-2010 - 如何在 Visual Studio 2010 中启用选项卡指南？

> ID：11919471
> 
> 赞同：10
> 
> 时间：2012-08-12T03:21:43.307
> 
> 标签：visual-studio-2010

我使用的一些 IDE 提供了对指示制表符间距的垂直指南的访问。我似乎在 Visual Studio 2010 中找不到它。这个选项甚至可用吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-12T03:24:05.407

据我所知，Visual Studio 不支持缩进指南，但幸运的是，Visual Studio 画廊页面上有一个名为[Indent Guides的扩展](http://visualstudiogallery.msdn.microsoft.com/e792686d-542b-474a-8c55-630980e72c30)

它是免费的——您只需要下载、安装并重新启动 Visual Studio。它有几个自定义选项。可能还有其他解决方案（可能作为商业套件的一部分）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-12T03:25:16.203

我认为[Indent Guides](http://visualstudiogallery.msdn.microsoft.com/e792686d-542b-474a-8c55-630980e72c30/)扩展可以满足您的需求。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-12T03:27:34.910

安装此扩展：http: [//visualstudiogallery.msdn.microsoft.com/e792686d-542b-474a-8c55-630980e72c30](http://visualstudiogallery.msdn.microsoft.com/e792686d-542b-474a-8c55-630980e72c30)

# android - 如何为行中的每个项目实现带有垂直分隔符的多列列表视图。这使列表中的项目看起来像网格

> ID：11919477
> 
> 赞同：0
> 
> 时间：2012-08-12T03:24:27.193
> 
> 标签：android, listview, listbox

朋友我想设计一个自定义的列表视图。列表视图中的每一行将包含四列。我设计了一个单独的 row.xml 像这样。

`

```
 <TextView android:id="@+id/index"
     android:layout_width="50dip"
     android:layout_height="wrap_content"/>

 <TextView android:id="@+id/Invested"
     android:layout_width="70dip"
     android:layout_height="wrap_content" android:layout_weight="1"/>

 <TextView android:id="@+id/Revenue"
     android:layout_width="60dip"
     android:layout_height="wrap_content"  android:layout_weight="1"/> 
```

`

现在，列表视图将为每一行设置分隔符。**我需要的只是列表中每个项目之间的垂直分隔线。**请帮我解决一下这个。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T03:43:13.080

在行布局中的每个元素之间放置一个具有不同背景颜色的空、窄（2dp 左右）TextView。

分隔符 TextView 看起来像这样：

```
 <TextView
        android:id="@+id/verticalline"
        android:layout_width="2dp"
        android:layout_height="match_parent"
        android:background="@color/divider"
        android:gravity="center_horizontal"
        android:paddingLeft="5dip"
        android:paddingRight="5dip" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T04:46:44.320

为此，您可以使用空视图。像这样的东西会起作用：

```
 <view
        android:layout_width="1dp"
        android:layout_height="50dp"
        android:background="#000000" /> 
```

您可以将其用作两列之间的分隔符。
但是我不明白如果你想显示一个网格（2D）数据，你为什么不使用 GridView。
使用您的方法，您可以获得相同的结果，但这会增加您的工作和代码复杂性。
GridView 将是一个更好的选择。

# actionscript-3 - Action Script 3 的一点帮助

> ID：11919478
> 
> 赞同：0
> 
> 时间：2012-08-12T03:24:53.370
> 
> 标签：actionscript-3, actionscript, flash-cs5

好吧，切入正题，我相信这个功能导致了我的问题。

```
function getRandomLabel():String {
    var labels:Array = new Array(24,62,49,74,37);
    var index:Number = Math.floor(Math.random() * labels.length);
    return labels[index];
}
this.gotoAndPlay(getRandomLabel()); 
```

这个函数用来随机化上面的5个数字（24,62,49,74,37），这样我的痣（5个痣）就会随机出现。目前正在开发一个打地鼠的Flash游戏

**当前场景：2 / 3**

**不知何故，当我测试播放它时，它会循环回到场景 1 帧 1。**

还有一件事，当我试图将“游戏本身”放入场景 2 中时，问题就开始了，而我的其余代码都在场景 2 中（菜单、机制等）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T03:59:11.460

正如安德鲁所说，你什么都没问。你只是暴露你所拥有的，但没有暴露正在发生的事情。好吧，你的功能没有问题。我对 AS 很生疏，但我会这样写：

```
function getRandomFrame( frameNumbers: Array ): int {
    return frameNumbers[Math.floor( Math.random() * frameNumbers.length )];
}
gotoAndPlay( getRandomFrame( [24, 62, 49, 74, 37] ) ); 
```

你得到的是帧号而不是标签，所以我改变了它的名字。由于您正在调用 gotoAndPlay，因此您的电影“播放头”将转到所选帧并播放，直到到达时间线的末尾，默认情况下，电影将重新开始。如果需要停止动画，则需要在所需帧中设置停止。使用 gotoAndStop 而不是 gotoAndPlay 尝试您的代码。电影将转到随机帧并停止。如果您需要获取框架标签，请创建一个字符串数组：

```
function getRandomLabel( labels: Array ): String {
    return labels[Math.floor( Math.random() * labels.length )];
}
gotoAndPlay( getRandomLabel( ["car", "dog", "music"] ) ); 
```

看来你是Flash新手，所以你需要更多地研究你正在处理的工具；）Flash CS5中的ActionScript默认版本是第三个。

# firefox - 选择框中的文本垂直对齐 - Firefox问题

> ID：11919481
> 
> 赞同：8
> 
> 时间：2012-08-12T03:25:16.950
> 
> 标签：firefox, select, vertical-alignment, css

我在 Firefox 中遇到了选择框标题的垂直对齐问题。

![来自 Firefox 的屏幕](../Images/b24458e6cd9fff0c3bc09f07fe853266.png)

选择的 CSS 如下所示：

```
select#cities_list {
    width: 95px;
    height: 45px;
    line-height: 45px;
    background: url('./img/select-arrow.png') no-repeat right transparent;
    -webkit-appearance: none;
    border: 1px solid #dcdcdc;
    border-left: none;
    border-right: none;
    padding: 0 10px;
    margin: 0;
    float: left;
} 
```

在 Chrome 中一切看起来都很好：

![在此处输入图像描述](../Images/46addb7372ef66b8ff171b8213d63eef.png)

帮助！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-05T07:24:29.593

你可以试试这个

```
padding:.3em;/.4em; 
```

取决于你的配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-28T22:05:04.837

我更喜欢的另一种方法是：

```
@-moz-document url-prefix() {

    select {
        padding-top: 8px;
    }
} 
```

设置`padding-top`为任何你喜欢的。括号内的任何内容都`@-moz-document url-prefix()`将仅在 Firefox 上执行。

# android - 套接字不适用于 Android

> ID：11919485
> 
> 赞同：1
> 
> 时间：2012-08-12T03:26:01.250
> 
> 标签：android, sockets

我有一个非常简单的服务器，它作为 Java 应用程序运行（它是 echoServer 示例）。此外，我将客户端作为 android 应用程序运行，但它甚至没有连接到服务器......当我运行调试时，它似乎找不到 java.net.socket 库......它抛出异常“源不成立”。如何在android中添加socket库？你认为我还应该尝试什么？我只希望客户端连接到服务器，但它总是说不幸的是 socketclient 已停止。太感谢了！

客户端代码为：

```
public class SocketClient extends Activity {

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

}

Button.OnClickListener buttonSendOnClickListener
= new Button.OnClickListener(){

    @Override
    public void onClick(View arg0) {
        // TODO Auto-generated method stub
        Socket socket = null;
        DataOutputStream dataOutputStream = null;
        DataInputStream dataInputStream = null;

        try {
            **socket = new Socket("localhost", 4444);**
            Log.i("client", "connected!");

        } catch (UnknownHostException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

# git - Git 推送到 svn 保持为多个提交

> ID：11919489
> 
> 赞同：2
> 
> 时间：2012-08-12T03:28:00.100
> 
> 标签：git, git-svn, smartgit

我想知道是否有任何方法可以将多个提交从本地 Git 存储库推送到远程 SVN 存储库并且不将它们合并为一个提交？

我正在使用 SmartGit，假设我在本地 GIT 分支中有 5 个提交，这个分支引用了远程 SVN /trunk，当将这些提交推送到 SVN 时，我在 SVN 中得到了一个大提交

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-30T21:43:48.263

从您的其他评论中，听起来问题出在您的合并上。我建议阅读`git merge`文档，尤其是“快进合并”部分。听起来您的客户正在执行“no-ff”合并，它将分支 X 上的提交合并到主分支上的单个合并提交中。当您推送到 SVN 时，它是被推送的单个合并提交。

您想要的是快进合并。从命令行，您可以确保使用`git merge --ff-only`. 我不熟悉 SmartGit，但从文档看来，当您请求合并时，它会为您提供此选项：[http ://www.syntevo.com/smartgithg/documentation.html?page=commands-branch#merge](http://www.syntevo.com/smartgithg/documentation.html?page=commands-branch#merge)

# path - 在 localhost 中使用图像的绝对路径

> ID：11919491
> 
> 赞同：2
> 
> 时间：2012-08-12T03:28:30.497
> 
> 标签：path, localhost, relative-path, absolute-path

我想对服务器中的所有文件使用绝对路径。我想包含退出“包含”文件夹的文件，但这些文件包含它们具有 src 的图像，当我将它们包含在其他目录中的其他文件中时，服务器会出错，因为图像的路径不正确。

我为这个问题找到的唯一解决方案是创建常量文件并添加这样的绝对地址：localhost/include/myfile.php 它适用于所有包含但不适用于图像。相反，浏览器将这些图像的 src 更改为 C:/www/localhost/include/myfile.php 或类似破坏地址的东西。

有什么方法可以将绝对路径添加到我的包含文件、图像、css 文件、js 文件，让我提一下：[http](http://www.mydomain.com/myfiles) ://www.mydomain.com/myfiles不起作用，因为我在本地工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T03:38:53.343

使用以下 PHP 全局变量来构建您的路径

```
$_SERVER['DOCUMENT_ROOT'] 
```

获取您的基本路径。然后你只需将它附加到你想要的文件名/目录。

例如

```
echo $_SERVER['DOCUMENT_ROOT'];
=> /User/trev/Sites/testsite/public_html/
include $_SERVER['DOCUMENT_ROOT'].'/include/func.php'; 
```

# c - 计算机是否为数组的变量名分配内存？

> ID：11919496
> 
> 赞同：2
> 
> 时间：2012-08-12T03:29:37.020
> 
> 标签：c

[在Head First C](http://shop.oreilly.com/product/0636920015482.do)一书中，它说计算机不会为数组的变量名分配内存。我很困惑！这是真的吗？

但是如果它有内存，为什么我不能为这个分配另一个数组呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T03:45:01.623

计算机程序是描述您希望执行的功能的抽象。编译器获取您的描述并将其转换为计算机执行的机器代码。

一个比喻：

> 我告诉你“走两个街区，左转走一个街区”。然后你就可以去商店了。我也可以说“走到你看到左边的蓝色建筑，转 270 度然后走到你看到商店”。在这两种情况下，你都会做同样的事情，但是指令（这个比喻中的程序）是完全不同的，有不同数量的字符和动词，等等。

C 语言中的计算机程序是相同的——不管你如何命名变量——如果你调用变量“a”或调用变量“，计算机实际运行的代码将占用相同的空间。一个非常长的变量名称”。编译器将跟踪名称，但最终输出将是相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T16:41:01.547

您用来命名数组的标识符是一个指针，它实际上保存了该数组的基地址（第一个元素的地址）。

因此，您可以将此地址分配给另一个指针，但将其分配给另一个数组基地址是不合法的

# c++ - C++ 将角度转换为坐标

> ID：11919500
> 
> 赞同：0
> 
> 时间：2012-08-12T03:30:35.800
> 
> 标签：c++, algorithm, matlab, formula

我目前正在尝试使用来自 Mathworks、Sph2Cart 的 Matlab 中的公式将 2 个角度转换为 x、y、z

[http://www.mathworks.com/help/techdoc/ref/sph2cart.html](http://www.mathworks.com/help/techdoc/ref/sph2cart.html)

### 算法：

```
x = r .* cos(elevation) .* cos(azimuth)
y = r .* cos(elevation) .* sin(azimuth)
z = r .* sin(elevation) 
```

### 在 C++ 中

```
clax = 1 * cos((Altitude/360)*(2*XM_PI)) * cos((Azimuth/360)*(2*XM_PI));
clay = 1 * sin((Altitude/360)*(2*XM_PI));
claz = 1 * cos((Altitude/360)*(2*XM_PI)) * sin((Azimuth/360)*(2*XM_PI)); 
```

但是无论高度和方位角是多少，clax、clay 和 claz 不是 0 就是 1。

我确定我犯了一个错误，在这之后我会笑我是多么愚蠢。但实际上，我不知道为什么这不起作用，为什么每个值只给出 1 或 0 ......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T03:35:37.023

很可能，您声明`clax`为某种整数类型（例如`int`, `long`, ...）。否则，`Altitude`或者`Azimuth`可能被声明为整数类型。`2*pi`在这种情况下，您总是会在三角函数的参数中得到倍数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T08:25:29.367

问题很可能是除法`Altitude/360`和`Azimuth/360`，何时`Altitude`和`Azimuth`是整数。这将执行整数除法，您会丢失分数。作为一个说明性的例子，试试这个代码

```
#include <iostream>
#include <cmath>

int main()
{
    int angle = 90;
    std::cout << std::sin((angle/360)*(2*M_PI)) << std::endl;
    std::cout << std::sin((angle/360.0)*(2*M_PI)) << std::endl;
    std::cout << std::sin((angle/360.0)*(2.0*M_PI)) << std::endl;
    return 0;
} 
```

哪个输出

```
0
1
1 
```

请注意，第一个零显然是不正确的。

要修复您的代码，只需将整数常量从更改`360`为 double-constants `360.0`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T08:53:06.233

不确定这是否有帮助，但对我有用....

```
#include <iostream>
#include <cmath>
using namespace std;
int main()
{
    double XM_PI = 3.14159;
    double Altitude = 32;
    double Azimuth = 24;
    double clax = 1 * cos((Altitude/360)*(2*XM_PI)) * cos((Azimuth/360)*(2*XM_PI));
    double clay = 1 * sin((Altitude/360)*(2*XM_PI));
    double claz = 1 * cos((Altitude/360)*(2*XM_PI)) * sin((Azimuth/360)*(2*XM_PI));
    std::cout << "clax=" << clax << endl;
    std::cout << "clay=" << clay << endl;
    std::cout << "claz=" << claz << endl;
} 
```

回答 ：

```
clax=0.774731
clay=0.529919
claz=0.344932 
```

正如其他人所说，确保所有变量都是浮点数/双精度数。还要检查 XM_PI 是什么。如果它以某种方式为 0，那将解释您的结果。

# php - 将连接与 SQL 查询结合使用

> ID：11919505
> 
> 赞同：0
> 
> 时间：2012-08-12T03:31:48.507
> 
> 标签：php, mysql

我只想使用连接从我的数据库中查询我想要的数据。然而，我无法让我的查询正常工作。

这是我的代码。看一看，

```
<?php 

$user_id= $_COOKIE['user_id'];

$dbc= mysqli_connect('localhost', 'root', '', 'beta');
$query=" SELECT * FROM posts LEFT JOIN relationships ON (posts.user_id=    
relationship.user_2 AND relationships.user_1 = $user_id AND relationship.status = 4 OR         
3 OR 1)";
$result= mysqli_query($dbc, $query);

echo mysqli_num_rows($result);

?> 
```

我只是想通过查看它是否返回任何行来查看查询是否在这一点上有效。但它不会工作。我可能做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T03:35:46.157

您`OR`的 in`WHERE`子句条件的语法不正确。尝试这样的事情：

```
SELECT  * 
FROM    posts a 
            LEFT JOIN relationships b
                ON a.user_id = b.user_2 
WHERE   b.user_1 = $user_id AND 
        b.status IN (1,3,4) 
```

我建议你使用**[PDO](http://php.net/manual/en/book.pdo.php)**或**[MYSQLi](http://php.net/manual/en/book.mysqli.php)**扩展。

在 PDO 中，它可能如下所示：

```
<?php
$stmt = $dbh->prepare("SELECT   * 
                      FROM  posts a 
                           LEFT JOIN relationships b
                                ON a.user_id = b.user_2 
                     WHERE  b.user_1 = ? AND 
                            b.status IN (1,3,4)");

$stmt->bindParam(1, $user_id);
$stmt->execute();

?> 
```

请记住始终过滤您的输入，尤其是用于查询数据库的输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T03:34:56.010

您在查询中混合了“关系”和“关系”，也许坚持表的名称是什么？

# ruby-on-rails - 如何销毁模型但也不允许删除最后一个角色

> ID：11919508
> 
> 赞同：0
> 
> 时间：2012-08-12T03:32:19.520
> 
> 标签：ruby-on-rails, activerecord

我们有一个非常简单的团队和角色模型

```
class Group < ActiveRecord::Base
  has_many :roles, :dependent => :destroy
end

class Role < ActiveRecord::Base
  belongs_to :group
  after_destroy :ensure_last_role

  private
  def ensure_last_role
    raise "Can't delete last role" if group.roles.count.zero?
  end  
end 
```

after_destroy 完美运行，不允许最后一个角色被意外破坏。但这也可以防止该组在 :dependent => :destroy 尝试销毁所有角色时被销毁。当一个组被破坏时是否可以不调用 ensure_last_role 或者有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T03:43:33.120

在玩了一会儿之后，我选择了一个不使用 Rails 内置`dependent: :destroy`的关系的解决方案，因为我无法让回调以正确的顺序触发。缓存也有一些问题，所以每次你尝试销毁 a`Role`时，它都会做一个小的 SQL 查询来查看它的组是否仍然存在于数据库中：

```
> role.destroy
  Group Exists (0.2ms)  SELECT 1 FROM "groups" WHERE "groups"."id" = 18 LIMIT 1 
```

无论如何，这是完整的模型代码：

```
class Group < ActiveRecord::Base
  has_many :roles
  after_destroy :destroy_roles

  def destroy_roles
    roles.each { |r| r.destroy }
  end
end

class Role < ActiveRecord::Base
  belongs_to :group
  before_destroy :ensure_last_role, if: "Group.exists?(group_id)"

  private

  def ensure_last_role
    raise "Can't delete last role" if group.roles.count == 1
  end
end 
```

# php - jQuery / PHP / MySQL 提交隐藏的选择下拉菜单

> ID：11919515
> 
> 赞同：0
> 
> 时间：2012-08-12T03:33:23.233
> 
> 标签：php, jquery, mysql

在选择第一个下拉框后，我有以下代码用于填充第二个下拉框（实际上它们都已经制作好了，它只是根据您的第一个下拉列表显示正确的下拉框：

```
<tr><th>Customer</th><td>
        <select name='customer_id' id='customer_id'>
            <option value=''>-- Select Customer --</option>
            <?php
            $results = Misc::customerDropDown();
            while ($row = mysql_fetch_array($results)) {
                echo "<option value='" . $row['customer_id'] . "'>" . $row['customer_name'] . "</option>";
            }
            ?>
        </select><span class='error'>&nbsp;*&nbsp;<?php echo $errors['customer_id']; ?></span>
    </td></tr>
<?php
$results = Misc::customerDropDown();
$num_customers = mysql_num_rows($results);
$n = 1;
while ($row = mysql_fetch_array($results)) {
    ?>
    <tr class='locations' id='locations<?= $row['customer_id'] ?>'><th>Customer Location</th><td>
            <select name='customer_location<?= $n ?>'>
                <option value=''>-- Customer Locations --</option>
                <?
                $location_results = Misc::locationDropDown($row['customer_id']);
                while ($option = mysql_fetch_array($location_results)) {
                    echo "<option value='" . $option['location_id'] . "'>" . $option['location_name'] . "</option>";
                }
                ?>
            </select><span class='error'>&nbsp;*&nbsp;<?php echo $errors['customer_location']; ?></span></td></tr>                                   
    <? $n++;
} ?> 
```

我遇到的问题是，无论我尝试了什么，最后一个“customer_location”下拉列表总是会被使用，因为当它提交时（我相信）会覆盖另外两个。

我尝试将 customer_location 设为一个数组（customer_location[]），但这只是让它认为（例如）有 3 个数组，而不是一个包含 3 个元素的数组。我还尝试（如图所示）通过将 $n 附加到每个位置的末尾来命名该位置，但是当我去参考该帖子时，我不知道如何因为我无法参考`$_POST['customer_location$n']`

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T03:52:11.193

无论下拉菜单是否可见，它们仍然是表单的一部分。并且它们的值将在提交时发回服务器。由于您在客户端使用逻辑来确定将显示哪个下拉列表，因此您将不得不在服务器端使用相同的逻辑来确定要获取哪个下拉列表的值。

您可以参考`$_POST['customer_location1']`, 或`$_POST['customer_location2']`, 等。

我还注意到一个错字。最后一部分应该是这样的。

```
<?php
    $results = Misc::customerDropDown();
    $num_customers = mysql_num_rows($results);
    $n=1;
    while($row = mysql_fetch_array($results)){
        ?>
        <tr class='locations' id='locations<?=$row['customer_id']?>'>
                <th>Customer Location</th>
                <td>
                    <select name='customer_location<?=$n?>'>
                        <option value=''>-- Customer Locations --</option>
                        <?
                        $location_results = Misc::locationDropDown($row['customer_id']);
                        while($option = mysql_fetch_array($location_results)){
                            echo "<option value='".$option['location_id']."'>".$option['location_name']."</option>";
                        }
                        ?>
                    </select>
                    <span class='error'>&nbsp;*&nbsp;<?php echo $errors['customer_location'.$n]; ?></span>
                </td>
            </tr>
        <?
        $n++;
    }
?> 
```

关闭`td`并且`tr`需要在循环中。并且`$errors`应该可能包括`$n`.

**编辑**

例如，下拉菜单 1 如下所示：

```
<select id='dd'>
   <option value='1'>1</option>
   <option value='2'>2</option>
   <option value='3'>3</option>
</select> 
```

在您的 jquery 中，您有一个显示正确下拉列表的更改处理程序（这部分实际上只在这个确切的示例中有效，但您说您已经让这部分工作，所以我在掩饰它......基本上'做逻辑以显示正确的下拉菜单'）。

```
$("#dd").change(function() {
   var dd = $(this).val();
   $("#dd1").hide();
   $("#dd2").hide();
   $("#dd3").hide();
   $("#dd" + val).show();
}); 
```

然后你就得到了隐藏的三个下拉菜单：

```
<select id='dd1' style='display: none;'>
   <option value='1'>1</option>
   <option value='2'>2</option>
   <option value='3'>3</option>
</select>
<select id='dd2' style='display: none;'>
   <option value='1'>1</option>
   <option value='2'>2</option>
   <option value='3'>3</option>
</select>
<select id='dd3' style='display: none;'>
   <option value='1'>1</option>
   <option value='2'>2</option>
   <option value='3'>3</option>
</select> 
```

然后在 中选择选项 2 `#dd`。`#dd2`显示，然后您选择选项 1，然后单击提交。然后在你的 php 代码中（我的 php 可能有点生锈）：

```
$val = $_POST['dd'];
$ddval = '';

if ($val == '1') {
   $ddval = $_POST['dd1'];
} else if ($val == '2') {
   $ddval = $_POST['dd2'];
} else if ($val == '3') {
   $ddval = $_POST['dd3'];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T04:22:46.270

根据@Barmar 的提示（请参阅评论），我能够拼凑解决方案以查找并分配所需输入的值，如下所示：

```
// Figure out which customer_location$n to use
                foreach ($_POST as $key=>$value){ 
                 if (preg_match('/^customer_location/', $key)){ 
                  if($value!=NULL){ $location = $value; }
                 }
                } 
```

# ruby - json 向 Ruby 发送请求

> ID：11919516
> 
> 赞同：-2
> 
> 时间：2012-08-12T03:33:38.163
> 
> 标签：ruby, json, post, request

`enter code here`我有点新手，很抱歉这个问题。

我有一个创建整个脚手架的 ruby​​ 服务，它还支持 JSON 请求。

当我运行通过`http://localhost:3000/mypage.html`具有 json 请求的 ruby​​ webserivce（即：）自动生成的视图时，一切正常。

然而，当我尝试测试这个服务时，我在一个单独的项目中创建了一些页面，JSON 响应总是返回“错误”并且它。

我使用 fiddler 来查看请求之间的区别，我注意到我自己的项目请求标头中缺少一些标准 ruby​​ 视图具有的东西：

1.  曲奇饼
2.  来源/推荐人/X-请求

我的问题：我是否试图做一些非法的事情？默认情况下，只有当它们是本地的时，ruby 才支持 JSON 请求？我们如何更改它以进行测试？

任何建议都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T05:27:13.050

你是如何启用 JSON 的？修改控制器如下并重试：

```
def mypage
  @event = getEvent() # get ur own event

  # add followings in the end of the function
  respond_to do |format|
    format.html
    format.json {render :json => @event.to_json}
  end  
end 
```

# javascript - 模型未在 Backbone.js 中呈现

> ID：11919517
> 
> 赞同：1
> 
> 时间：2012-08-12T03:34:01.050
> 
> 标签：javascript, backbone.js, trigger.io, forge

我正在使用 Backbone.js 和 Forge 构建一个简单的移动 javascript 应用程序。我想要做的是有一个建议模型和这些模型的类别集合，并创建一个建议并使用下划线模板在视图中呈现出来。但是这个建议并没有实现。这是 main.js 文件：

```
(function ($) {
    forge.enableDebug();

    var Suggestion = Backbone.Model.extend({

        urlRoot: function () {
            if (this.isNew()){
                return "/suggestions"
            }
            "/suggestions/" + this.id + ".json"
        },
        defaults: {
            id: this.Category.length + 1,
            title: "A Suggestion",
            description: "You should go suggest something",
            ranking: 1,
            done: false,
        },
        initialize: function() {
            forge.logging.log('The suggestion model has been initialized')
        },

    });

    var Category = Backbone.Collection.extend({
        model: Suggestion,

        urlRoot: function(){
            '/suggestions'
        },

        random: function(){
            var randomnumber=Math.floor(Math.random()*this.length + 0)
            forge.logging.log("just randomized" + randomnumber )
        },
        initialize: function(){
            forge.logging.log("app initiliazed")
            //this.fetch();
        },

        addSuggestions: function(suggestions){

        },

    }});

    Router = Backbone.Router.Extend({
        routes:{
            "":"index",
            "suggestion/:suggestion_id":"Suggestion"
        },

        index: function(){
            category.index();
        }
    });
    SuggestionView = Backbone.View.Extend({

        model: Suggestion
        el: $('#suggestions')
        tagName: "div",

        className: "suggestion"

        template: _.template($("#SuggestionTemplate").html())

        render: function(){
            $(this.el).html(template(this.model.toJSON()));
        },

        events:{
            "tap li": "DetailedView"
        },

        initialize: function(){
            forge.logging.log("rendering suggestions")
            this.render();
        }

    });
    DetailedView = Backbone.View.Extend({

        model: Suggestion
        template: _.template($("#DetailedTemplate").html)

        render: function(){
            this.$el.html(template(this.model.toJSON))
        }
    });
    CategoryView = Backbone.View.Extend({
        el:$("#main")
        tagname: "div",

        initialize: function(){
            forge.logging.log("rendering Suggestions")
            this.render();

        },

        render: function(){
            this.Suggestions.each(this.addOne)
        }
        addOne: function(suggestion){
            var view = new SuggestionView
            this.$el.append(view.render().el)
        }

    });

    var suggestion1 = new Suggestion()
    suggestion1.set(title:"this")

    var category = new Category();
    var router = new Router();
    var categoryView = new CategoryView();

} (jQuery)); 
```

和 index.html：

```
<!DOCTYPE html>
<html>
    <head>
    <title>Just The Best</title>
    <link rel="stylesheet" href="css/jquery.mobile-1.1.0.min.css" />
    <script type="text/javascript" src="js/underscore.js"></script>
    <script type="text/javascript" src="js/backbone.js"></script>
    <script data-main="scripts/main" src="js/require.js"></script>
    <script type="text/javascript" src="js/jquery-1.7.1.min.js"></script>

    <script type="text/javascript" src="js/main.js"></script>

    <script src="https://trigger.io/catalyst/target/target-script-min.js#47DC7BF1-5D55-4549-8B64-216CA27A73FF"></script>

    <link rel="stylesheet" href="css/style.css" />

</head>
<body>

<div data-role="page">
    <div id="#main">

    </div>

</div>
<script type="text/html" id="SuggestionTemplate">
    //<div class="suggestion">
        <h2>Suggestion</h2>
        <h3><%=Suggestion.title%></h3>

    //</div>
</script>

</body> 
```

如果我错过了一个基本功能，我真的很抱歉。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T04:04:55.750

传递`el`给视图构造函数而不是传递给`extend()`. 至于其余部分，您可能想要更像以下内容。此外，您的代码缺少大量分号和逗号。

```
CategoryView = Backbone.View.Extend( {

    // ...

    render : function () {

        this.collection.each( _.bind( this.addOne, this ) );

    },

    addOne : function( suggestion ) {

        var view = new SuggestionView( { model : suggestion } );

        this.$el.append( view.render().el );

    }

} );

var category = new Category( [

  { title : "this" }

] );

var router = new Router();

var categoryView = new CategoryView( {

  collection : category

} ); 
```

# c# - 如何连接两个异常？

> ID：11919518
> 
> 赞同：11
> 
> 时间：2012-08-12T03:34:10.083
> 
> 标签：c#, exception, reflection, exception-handling

我有以下代码用于处理我的 Web 应用程序中的异常：

```
application.Response.Clear();
application.Response.Status = Constants.HttpServerError;
application.Response.TrySkipIisCustomErrors = true;

LogApplicationException(application.Response, exception);
try
{
    WriteViewResponse(exception);
}
// now we're in trouble. lets be as graceful as possible.
catch (Exception exceptionWritingView)
{
    // Exception wrapper = ??
    WriteGracefulResponse(exceptionWritingView);
}
finally
{
    application.Server.ClearError();
} 
```

这里的问题是，如果在尝试将响应呈现为时出现异常`ViewResult`，我将“抑制”原始异常（`View`无论如何），并仅显示导致错误`ViewResult`抛出的原因。

我想同时使用`exception`and`exceptionWritingView`并且两者都做一个例外，`exceptionWritingView`在顶部。

这将是：

```
exceptionWritingView
    -> inner exceptions of exceptionWritingView
            -> original exception that raised the unhandled exception handler
                       -> its inner exceptions 
```

但我无法`InnerException`在我的`exception`对象上设置属性。那么我怎么能做到这一点呢？

在“最好”的情况下，我可以创建一个新的`Exception`using `new Exception(exceptionWritingView.Message, exception)`，但我会失去部分`StackTrace`加分，我会失去任何本来可以拥有的`InnerException`。`exceptionWritingView`

反思是唯一的出路吗？用反射来做会有那么可怕吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-12T06:40:06.913

您可以使用[**System.AggregateException**](https://msdn.microsoft.com/en-us/library/system.aggregateexception.aspx)。

例子：

```
WriteGracefulResponse(new AggregateException(new Exception[]
{
    exceptionWritingView,
    originalUnhandledException
})); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T04:31:21.030

您不通过 setter 设置内部异常，而是通过构造函数设置它。

```
application.Response.Clear();
application.Response.Status = Constants.HttpServerError;
application.Response.TrySkipIisCustomErrors = true;

LogApplicationException(application.Response, exception);
try
{
    WriteViewResponse(exception);
}
// now we're in trouble. lets be as graceful as possible.
catch (Exception exceptionWritingView)
{
    // Example on how to nest exceptions.
    throw MyException("Error message", exceptionWritingView);
}
finally
{
    application.Server.ClearError();
} 
```

您的堆栈跟踪将保存在内部异常中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T12:13:00.583

正如您所说，最大的问题是异常只提供吸气剂，这限制了您的能力。为了解决这个问题，您可以从 Exception 继承以使其属性可设置。在我的示例类中，您可以初始化通过常规异常重复出现的 FlexibleException，基本上制作它的副本，但副本是可设置的。然后添加一个先前的异常，它可以沿着梯子向下移动，直到找到终点并继续前进，将两个异常连接起来。我从来没有使用过这样的东西，所以这只是我写的东西，它可能有一些错误，但我相信它可以完成你想要做的事情。

```
application.Response.Clear();
application.Response.Status = Constants.HttpServerError;
application.Response.TrySkipIisCustomErrors = true;

LogApplicationException(application.Response, exception);
try
{
    WriteViewResponse(exception);
}

catch (Exception exceptionWritingView)
{
    FlexibleException lastException = new FlexibleException(exceptionWritingView);
    lastException.AddPreviousException(exception);
    WriteGracefulResponse(lastException);
}
finally
{
    application.Server.ClearError();
} 
```

* * *

```
public class FlexibleException : Exception
{
    public FlexibleException(Exception e)
    {
        this.InnerException = e.InnerException != null ? new FlexibleException(e.InnerException) : null;
        this.StackTrace = e.StackTrace;
    }

    public FlexibleException InnerException { get; set; }

    public string StackTrace { get; set; }

    public void AddPreviousException(Exception e)
    {
            FlexibleException prevException = new FlexibleException(e);
        FlexibleException nextException = this;

        while (true)
        {
            if (nextException.InnerException != null)
            {
               nextException = nextException.InnerException;
               continue;
            }
            else
            {
               nextException = prevException;
               break;
            }
        }
    }
} 
```

编辑：您不能通过继承将设置器添加到 InnerException 或 StackTrace，但您可以添加单独的设置器属性 WritableStackTrace 并覆盖 StackTrace 以返回其值（技术上使其可设置）。

编写派生 Exception 类的另一种替代方法是编写一个与 AddPreviousException 非常相似的函数，除了它将深入到异常对象中，然后重新创建它，将要连接的异常传递给它的构造函数，然后按照你的方式工作吞下每个异常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-12T06:47:48.547

为什么要把事情复杂化？为什么不`exception`作为参数传递给`WriteGracefulResponse`方法？

```
...
// now we're in trouble. lets be as graceful as possible. 
catch (Exception exceptionWritingView) 
{ 
   // Exception wrapper = ?? 
   WriteGracefulResponse(exception, exceptionWritingView); 
} 
```

您还应该重命名`exceptionWritingView`为以 结尾的东西`exception`，现在它会使认为这是一个视图的读者感到困惑。

# jaxb - 使用 MOXy JAXB 并且不显示列表元素节点

> ID：11919522
> 
> 赞同：1
> 
> 时间：2012-08-12T03:35:00.367
> 
> 标签：jaxb, eclipselink, moxy

我有一个使用 JAXB 生成标准 XML 的类。我需要对 XML 进行一些更改，以使列表节点不出现，并且列表的内容直接出现在包含节点的列表下方。

```
package forum11919522;

import java.util.ArrayList;
import java.util.List;

class Person {

    private Property property;

    public Property getProperty() {
        return property;
    }

    public void setProperty(Property property) {
        this.property = property;
    }

    public static class Property {
        private String type;
        private String location;
        private List<Vehicle> vehicle = new ArrayList<Vehicle>();
        /** getter setter omitted **/

    }

    public static class Vehicle {
        private String vin;
        private int year;
        /** getter setter omitted **/
    }

} 
```

当前的xml：

```
<person>
    <property>
        <type>personal</type>
        <location>abc</location>
        <vehicle>
            <vin>2532</vin>
            <year>2012</year>
        </vehicle>
        <vehicle>
            <vin>125321</vin>
            <year>2010</year>
        </vehicle>
    </property>
</person> 
```

想要的：

```
<person>
    <property>
        <type>personal</type>
        <location>abc</location>
        <vin>2532</vin>
        <year>2012</year>
        <vin>125321</vin>
        <year>2010</year>
    </property>
</person> 
```

可以用 MOXy 做吗？

# save - 如何跳过猫鼬预保存钩子？

> ID：11919527
> 
> 赞同：6
> 
> 时间：2012-08-12T03:36:35.057
> 
> 标签：save, hook, mongoose, middleware, pre

我有一个书本模型。这是它的架构

```
BookSchema = new Schema({
    title: String
    , lowestPrice: Number
});
BookSchema.path('title').required(true);
Bookchema.pre('save', function (next) {
    try {
        // chai.js
        expect(this.title).to.have.length.within(1, 50);
    } catch (e) {
        next(e);
    }
    next();
}); 
```

当一本书的商品被创建时，如果商品的价格低于原价，我必须更新这本书的最低价格。因为我需要知道原产地最低价格，所以我不能使用`Book.update()`，它跳过了预保存挂钩，而是用于`Book.findById(id).select('lowestPrice')`查找书籍而不是更新它。问题是我不想选择该`title`字段，因此当涉及到 pre-save 挂钩时，`TypeError`发生的 for`this.title`是未定义的。有没有办法跳过预保存挂钩？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T04:30:23.600

`Book.update`与仅在新价格低于原始价格时才选择文档的条件一起使用：

```
Book.update({_id: id, lowestPrice: {$gt: price}}, {$set: {lowestPrice: price}},
    function (err, numberAffected) {
        if (numberAffected > 0) {
            // lowestPrice was updated.
        }
    }
); 
```

# jquery - 用隐藏/显示查询 IE9 问题

> ID：11919528
> 
> 赞同：0
> 
> 时间：2012-08-12T03:37:13.813
> 
> 标签：jquery, internet-explorer-9, refresh, reload

我有一个网站：

[http://www.leadcomm.net/cost-estimate/](http://www.leadcomm.net/cost-estimate/)

剧本很长，不知道能不能放在这里。如果您在页面上查看源，您可以查看。

该脚本适用于 FFX、Chrome 和 IE8。IE9 有一个问题，如果你进入页面，除非你刷新页面，否则 jquery 将无法加载或工作。然后它工作。

如果我从任何其他页面单击导航栏上的“成本估算”，jquery 将不会加载。刷新后，它会工作。

我一直在浏览类似的线程，这听起来像是一个未定义的变量，但我查看了所有内容。在过去的 8 个小时里，我一直在做这件事。任何关于在哪里看的输入都会很棒。我讨厌 Internet Explorer。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-08-12T04:05:33.570

尝试将 $(document).ready 包含在以下内容中：

```
window.onload = (function () {

}); 
```

# graphite - 人们编写了什么样的工具包来补充或在 statsd 之上？

> ID：11919529
> 
> 赞同：3
> 
> 时间：2012-08-12T03:37:51.407
> 
> 标签：graphite, statsd

我正在寻找石墨每日报告的工具，更好的石墨安装程序，更好的用户界面，如石墨等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T05:42:23.103

Graphite 文档包含一个带有列表的章节：[使用 Graphite 的工具](http://graphite.readthedocs.org/en/latest/tools.html)。这是一个相当完整的列表。我只有一个工具值得一提，但这里没有列出。

[Obfuscurity](http://obfuscurity.com/)是一个非常适合阅读石墨技巧和工具的博客。作者正在为名为[Descartes](https://github.com/obfuscurity/descartes)的石墨开发“内省仪表板” 。（[介绍笛卡尔的博文](http://obfuscurity.com/2012/07/Introducing-Descartes)）

[除非您使用 Chef（用于 Graphite 安装的示例厨师食谱](https://github.com/heavywater/chef-graphite)和[另一个](https://github.com/joevandyk/chef-cookbooks/tree/master/graphite)），否则我没有找到任何“更好的安装程序”，但这并不是那么难。您可以在网络上找到许多小的操作方法片段，尤其是在提供备忘单样式安装说明的 Github gists 之类的地方。例如，[https:](https://gist.github.com/2628070) //gist.github.com/2628070 用于带有 Nginx 的 Ubuntu 11.10。

# c# - 如何使用 c# 将 DateTime 类型的数据插入 SQL Server 数据库？

> ID：11919533
> 
> 赞同：0
> 
> 时间：2012-08-12T03:38:37.403
> 
> 标签：c#, asp.net, jquery-ui, sql-server-2008-r2

我是一名新的 ASP.NET 开发人员，在将一些数据插入数据库时​​遇到了问题。我有一个创建事件的表格。填充的数据应该被插入到数据库中。我有以下数据库设计：

列：（`ID, Title, Description, StartDateTime, EndDateTime, IsActive`
并且*`StartDateTime`是`EndDateTime`数据`DateTime`类型*）

当我尝试插入数据时，我遇到了以下问题，我不知道为什么：

![在此处输入图像描述](../Images/093adb23e90a1c78c2ee6f43723716fd.png)

我的代码隐藏（C#）：

```
protected void submitButton_Click(object sender, EventArgs e)
{
        string connString = "Data Source=localhost\\sqlexpress;Initial Catalog=RegistrationSysDB;Integrated Security=True;";
        string insertCommand = "INSERT INTO Events (Title, Description, Location, StartDateTime, EndDateTime) values (@Title, @Description, @Location, @StartDateTime, @EndDateTime)";

        string title = txtTitle.Text;
        string description = txtDescription.Text;
        string location = txtLocation.Text;
        string startDateTime = start_DateTime.ToString();
        string endDateTime = end_DateTime.ToString();

        using(SqlConnection conn = new SqlConnection(connString))
        {
            //open DB Connection
            conn.Open();

            using (SqlCommand cmd = new SqlCommand(insertCommand, conn))
            {
                cmd.Parameters.Clear();
                cmd.Parameters.AddWithValue("@Title", title);
                cmd.Parameters.AddWithValue("@Description", description);
                cmd.Parameters.AddWithValue("@Location", location);
                cmd.Parameters.AddWithValue("@StartDateTime", startDateTime);
                cmd.Parameters.AddWithValue("@EndDateTime", endDateTime);
                cmd.ExecuteNonQuery();
            }

            conn.Close();
        }

        MultiView1.SetActiveView(ViewConfirm);
    } 
```

我的 ASP.NET 代码：

```
<div id="contactform">
                <fieldset>
                        <label for="title">
                            Title</label>
                        <asp:TextBox ID="txtTitle" CssClass="text-input" runat="server"></asp:TextBox>
                        <br />
                        <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" ErrorMessage="Please enter a subject for your message"
                            ControlToValidate="txtTitle"></asp:RequiredFieldValidator>

                        <label for="description">
                            Description</label>
                        <asp:TextBox ID="txtDescription" TextMode="MultiLine" CssClass="textarea" Rows="6" cols="50"
                            runat="server"></asp:TextBox>
                        <br />
                        <asp:RequiredFieldValidator ID="RequiredFieldValidator2" runat="server" ErrorMessage="Please enter your message"
                            ControlToValidate="txtDescription"></asp:RequiredFieldValidator>

                        <label for="location">
                            Location</label>
                        <asp:TextBox ID="txtLocation" CssClass="text-input" runat="server"></asp:TextBox>
                        <br />
                        <asp:RequiredFieldValidator ID="RequiredFieldValidator5" runat="server" ErrorMessage="Please enter your message"
                            ControlToValidate="txtLocation"></asp:RequiredFieldValidator>

                        <label for="start_DateTime">
                            Start Date & Time</label>
                        <asp:TextBox ID="start_DateTime" CssClass="textarea" runat="server"></asp:TextBox>
                        <%--<ajaxToolkit:CalendarExtender ID="CalendarExtender1" runat="server" TargetControlID="start_DateTime" 
                                                        PopupPosition="Right">
                        </ajaxToolkit:CalendarExtender>--%>
                        <br />
                        <asp:RequiredFieldValidator ID="RequiredFieldValidator3" runat="server" ErrorMessage="Please enter your message"
                            ControlToValidate="start_DateTime"></asp:RequiredFieldValidator>

                        <label for="end_DateTime">
                            End Date & Time</label>
                        <asp:TextBox ID="end_DateTime" CssClass="textarea" runat="server"></asp:TextBox>
                        <%--<ajaxToolkit:CalendarExtender ID="CalendarExtender2" runat="server" TargetControlID="end_DateTime" 
                                                        Format=" PopupPosition="Right">
                        </ajaxToolkit:CalendarExtender>--%>
                        <br />
                        <asp:RequiredFieldValidator ID="RequiredFieldValidator4" runat="server" ErrorMessage="Please enter your message"
                            ControlToValidate="end_DateTime"></asp:RequiredFieldValidator>

                        <asp:Button ID="submitButton"  runat="server" CssClass="button" 
                            Text="Create &rarr;" onclick="submitButton_Click" />
              </fieldset>
            </div> 
```

仅供参考，我正在使用 jQuery UI`DateTimePicker`插入`StartDateTime`and `EndDateTime`。

那么如何将具有`DateTime`类型的数据插入到数据库中呢？

**更新＃1：**

我将代码更改为以下内容：

```
protected void submitButton_Click(object sender, EventArgs e)
{
        string connString = "Data Source=localhost\\sqlexpress;Initial Catalog=RegistrationSysDB;Integrated Security=True;";
        string insertCommand = "INSERT INTO Events (Title, Description, Location, StartDateTime, EndDateTime) values (@Title, @Description, @Location, @StartDateTime, @EndDateTime)";

        string title = txtTitle.Text;
        string description = txtDescription.Text;
        string location = txtLocation.Text;
        string startDateTime = start_DateTime.ToString();
        string endDateTime = end_DateTime.ToString();

        using(SqlConnection conn = new SqlConnection(connString))
        {
            //open DB Connection
            conn.Open();

            using (SqlCommand cmd = new SqlCommand(insertCommand, conn))
            {
                cmd.Parameters.Clear();
                cmd.Parameters.AddWithValue("@Title", title);
                cmd.Parameters.AddWithValue("@Description", description);
                cmd.Parameters.AddWithValue("@Location", location);
                cmd.Parameters.AddWithValue("@StartDateTime", "'" + startDateTime + "'");
                cmd.Parameters.AddWithValue("@StartDateTime", "'" + endDateTime + "'");
                cmd.ExecuteNonQuery();
            }

            conn.Close();
        }

        MultiView1.SetActiveView(ViewConfirm);
    } 
```

我收到以下错误：

![在此处输入图像描述](../Images/d5309de6e7736139e6c25f9a6f5f055f.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T04:20:57.173

您在文本框上调用 ToString 而不是从中检索文本。所以传递给数据库的值是字符串`"System.Web.UI.WebControls.TextBox"`而不是实际的日期/时间。

尝试替换这个：

```
string startDateTime = start_DateTime.ToString();
string endDateTime = end_DateTime.ToString(); 
```

有了这个：

```
string startDateTime = start_DateTime.Text;
string endDateTime = end_DateTime.Text; 
```

您拥有的第一个代码隐藏（更新之前）应该适用于此更改......至少它对我有用。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T04:18:26.790

两行都说@StartDateTime。将第二个更改为 @EndDateTime :)

```
 cmd.Parameters.AddWithValue("@StartDateTime", "'" + startDateTime + "'");
  cmd.Parameters.AddWithValue("@StartDateTime", "'" + endDateTime + "'"); 
```

而且您不必将它们转换为字符串，也不必添加`'`

# web-applications - 我应该下订单还是等待付款？

> ID：11919537
> 
> 赞同：3
> 
> 时间：2012-08-12T03:38:56.960
> 
> 标签：web-applications, e-commerce, payment-processing

我正在构建一个简单的电子商务来处理我的订单请求（这是一个不同的电子商务，因为我将销售印刷电路板）。

所以，最大的问题是：当用户进入结账时，他的购物车中有物品我应该怎么做：

*   完成订单，将 session 中的数据插入数据库，然后将状态设置为 `pending`并等待支付公司的付款（如 PayPal，但来自巴西）
*   或者，我应该只在用户为产品付款时下订单（当我收到回调时）

对此的怀疑，是因为在付款前下订单，可能会在数据库上创建很多未付款的订单（一些临时清理应该可以）。

付款后下订单可能会很困难，因为付款公司只给我返回几个字段（每个印刷电路板我都有很多字段）。

也许我已经给出了“答案”，但我真的对此感到困惑，我会欣赏第二个意见......

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T03:45:07.020

好吧，从逻辑上考虑。下单时，无论订单最终是否通过，您都希望存储订单信息。有多种原因：

*   分析您的订单（有多少通过付款等）
*   跟踪需要付款的用户的待处理订单。

...在其他用途​​中。

由此，您可以得出结论，您肯定要存储挂单。将信息存储在单独的数据库/表中是没有意义的。

您应该意识到的一件重要的事情是，即使从未通过的挂单也可以用于其他目的，因此它们应该包含在其他确实通过的订单中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-12T03:43:23.750

我过去所做的是：

1.  他们点击“确认付款”的那一刻，我将订单添加到数据库中，状态为待处理。
2.  下一步是与支付公司沟通并获得回复。
3.  使用支付网关的响应更新状态

这样，您还可以跟踪任何奇怪的差异，例如拒绝交易（例如被盗卡）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T03:46:28.703

这确实是一个设计选择，但是如果您不想处理用户未付款的订单，则在用户付款后下订单似乎相当合乎逻辑。

因此，用户支付 -> 将订单添加到数据库，然后跟踪您需要的任何其他信息。

我能想到的唯一另一个示例是您希望事先添加到数据库的位置，例如愿望清单

# asp.net-mvc-3 - 表单身份验证 User.IsInRole() 在 LogOn 中随机不起作用

> ID：11919538
> 
> 赞同：-2
> 
> 时间：2012-08-12T03:39:17.180
> 
> 标签：asp.net-mvc-3, forms-authentication

我正在更改 MVC3 项目中的默认 LogOn 功能，以根据用户`role`使用`User.IsInRole()`. 当我对此进行测试时，前几个用户按预期重定向，但在那之后我有几个没有重定向到他们应该去的地方（他们通过了所有的语句并点击了默认的主页索引。）似乎完全随机，有时我`admin`会被带到管理页面，有时不会。

我的登录功能：

```
[HttpPost]
public ActionResult LogOn(LogOnModel model, string returnUrl)
{
    if(ModelState.IsValid)
    {
        if(Membership.ValidateUser(model.UserName, model.Password))
        {
            FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);
            if(Url.IsLocalUrl(returnUrl) && returnUrl.Length > 1 && 
                returnUrl.StartsWith("/") && !returnUrl.StartsWith("//") && 
                !returnUrl.StartsWith("/\\"))
            {
                return Redirect(returnUrl);
            }
            else
            {
                if(User.IsInRole("Admin") || User.IsInRole("SuperAdmin"))
                {
                    return RedirectToAction("Index", "Admin");
                }
                else if(User.IsInRole("Employee"))
                {
                    return RedirectToAction("Index", "Employee");
                }
                else if(User.IsInRole("Accounting"))
                {
                    return RedirectToAction("Index", "Accounting");
                }
                // If the user is in none of those roles, send them to the home index
                return RedirectToAction("Index", "Home");
            }
        }
        else
        {
            MembershipUser user = Membership.GetUser(model.UserName);
            if(user == null)
                ModelState.AddModelError("", "The user name or password provided is incorrect.");
            else
                ModelState.AddModelError("", "You haven't been approved yet, or you are locked out.");
        }
    }
    // If we got this far, something failed, redisplay form
    return View(model);
} 
```

查看 IntelliTrace，有时似乎不需要查询数据库，例如，当它工作时我看到了`Execute Reader "dbo.aspnet_UsersInRoles_GetRolesForUser"`，而当它不工作时我没有。

有谁知道`User.IsInRole()`即使用户在角色中为什么会返回 false ？是否发生了某种形式的兑现，为什么不是每次都在查询数据库？

我确定用户处于我正在测试的角色中，并且我知道它没有尝试重定向到返回 url，我也知道该角色没有存储在任何 cookie 中。任何想法都会受到赞赏，我相信我可以用另一种方式来解决这个问题，但是现在我更感兴趣的是为什么这种简单的方法不起作用。

**更新**

我发现如果我用`If(User.IsInRole(...`重定向到另一个称为排序的操作来替换语句，并在那里添加 if 语句，它的工作时间是 100%。

```
public ActionResult Sorting()
{
    if(User.IsInRole("Admin") || User.IsInRole("SuperAdmin"))
    {
        return RedirectToAction("Index", "Admin");
    }
    else if(User.IsInRole("Employee"))
    {
        return RedirectToAction("Index", "Employee");
    }
    else if(User.IsInRole("Accounting"))
    {
        return RedirectToAction("Index", "Accounting");
    }
    // If the user is in none of those roles, send them to the home index
    return RedirectToAction("Index", "Home");
} 
```

所以在函数退出`User.Identity.Name`之前显然没有设置（或不会返回用户名） 。`LogOn`它是否正确？我认为在`Membership.ValidateUser`被调用后，用户已通过身份验证，显然不是。

那么在什么时候`Membership.ValidateUser()`调用之后，会`User.IsInRole()`正常工作吗？是在 cookie 被丢弃之后，还是什么？

我想我可以使用`if(Roles.IsUserInRole(model.UserName, "Admin"))`，因为我确实从提交的模型中获得了用户名。你认为这是一个更好的主意还是`Sorting`像我一样使用重定向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T05:51:53.500

问题是，当`LogOn`调用该函数时，传入的请求没有经过身份验证的用户，用户对象为空，直到发出新请求才填充用户对象。所以当在`User.IsInRole()`中被调用时`LogOn`，`User`就是`null`。

> 简而言之，在 ASP.NET 管道中较早地设置了 User 对象，早在执行请求的 ASP.NET 页面的代码之前。现在，在随后的访问中，ASP.NET 运行时将看到表单身份验证票证，并且 User.Identity.IsAuthenticated 将为真，但在此请求中不会。
> ...
> 
> 此外，您将无法从 User.Identity.Name 获取用户名。而是使用 LoginControlID.Username。

[http://forums.asp.net/post/1988606.aspx](http://forums.asp.net/post/1988606.aspx)

# jquery - 将实体信息传递到 ASP.NET MVC 3 中的 jquery 对话框的最有效方法

> ID：11919540
> 
> 赞同：0
> 
> 时间：2012-08-12T03:39:39.223
> 
> 标签：jquery, asp.net-mvc, json, jquery-ui, jquery-dialog

我有这个 ASP.NET MVC 3 页面，我在其中循环模型中的对象集合，基本上我将在每个实体信息/显示旁边有一个按钮，以允许用户在 jQuery UI 对话框中编辑该实体。

我坚持的是找到将实体信息传递给 jquery 对话框的最佳方法。

我正在考虑使用许多 data-x 属性，一个用于对象的每个属性，或者只是将实体 JSON 表示存储在单个 data-x 属性中。

传递信息并在 jQuery UI 对话框中分配信息的最佳方法是什么？如果有人有任何样品，那就太好了。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T04:02:38.763

您可能会考虑做的一件事是设置一个控制器，负责将服务作为 JSON 字符串发布，然后在您的按钮单击事件（启动 jQuery 对话框）中调用该服务。为此，您将需要像[jsonfx](https://github.com/jsonfx/jsonfx)（我个人最喜欢的）这样的 JSON 序列化程序的帮助，您可以在 VS 中将其作为 nuget 包下载。

例如，如果您正在调用单个实体：

```
public class ServiceController : Controller
    {
        public ActionResult GetFoo(FormCollection fc)
        {
            var json = MyFooGetter(fc["fooId"]); //Id of the object
            var writer = new JsonWriter();
            return Content(writer.Write(json), "application/json");
        }
} 
```

在客户端，您请求此服务，如下所示：

```
$.post("/service/GetFoo", {fooId: "1"}, function (response) {
        //Do stuff with your response object which is a traversable JSON version of your entity(ies).
        //Example:
        var h1 = $("<h1>");
        h1.html(response.title);
        $("document").append(h1);
    }); 
```

实体集合的另一个示例：

```
public class ServiceController : Controller
    {
        public ActionResult GetFooCollection()
        {
            var json = MyFooCollectionGetter(); 
            var writer = new JsonWriter();
            return Content(writer.Write(json), "application/json");
       }
} 
```

在客户端，您请求此服务，如下所示：

```
$.post("/service/GetFooCollection", function (response) {
        //Do stuff with your response object which is a traversable JSON version of your entity(ies).
        //Example:
       $.each(response,function(i){
          alert(response[i].title);
       });
    }); 
```

祝你好运！

# javascript - 用纯 Js 在每个 li 上应用函数

> ID：11919548
> 
> 赞同：0
> 
> 时间：2012-08-12T03:42:35.840
> 
> 标签：javascript, loops

我已经完成了一个使用语音 api 读出元素内容的功能，我有一个这样的新闻列表

```
<ul id="news">
    <li>
How Instagram Is Winning Gold at the 2012 Olympics [INFOGRAPHIC]
   </li><li>
      Flickr Photo of Insect Identified As Never-Before-Seen Species [VIDEO]
   </li><li>
      The Upside to the End of the Olympics [COMIC]
   </li><li>
      40 Digital Media Resources You May Have Missed
   </li><li>
      19 Resources to Improve Your Photo and Video Skills
   </li><li>
      Top 10 Twitter Pics of the Week
   </li><li>
      Can Employees Be Trusted to Work From Home? [INFOGRAPHIC]
   </li><li>
      Capture Ghosts at Foursquare Spots With ‘Ghostbusters’ iOS Game
   </li><li>
      Dog Is Terrified of Low-Fat Lamb Jerky [VIDEO]
   </li><li>
      5 Tips to Take Food Photos Good Enough to Eat
   </li><li>
      The 10 Most Stunning Images of Mars in History
   </li><li>
      The Many Looks of Spiderman Over the Past 50 Years [INFOGRAPHIC]
   </li><li>
      Top Ten GIFs of the Week
   </li><li>
      Romney and Obama Both Called Their Veeps the ‘Next President’ [VIDEO]
   </li><li>
      Paul Ryan Visited Facebook, Met Zuckerberg [PICS]
   </li><li>
      Romney’s Logo Looks Like Toothpaste [PICS]
   </li><li>
      Paul Ryan, Romney’s VP Pick, Has Sizable Online Presence
   </li><li>
      Get Back in Kitchen With This Specialized Recipe Site
   </li>

</ul> 
```

现在正在使用此功能朗读文本。

```
function speak() {
    //speechapi.speak(document.getElementById('start').innerHTML,"male");
    speechapi.speak(document.getElementById('start').innerHTML,"male");

} 
```

我如何让它读取每个 li 之间的间隔很小？我不想使用 jquery 或喜欢。但我做不到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T04:02:33.047

这是一种方法，每行之间有 2 秒的延迟：

```
var news = document.getElementById('news').getElementsByTagName('li');

var newsItem = 0;
var speechInterval = setInterval(function(){
    speechapi.speak(news[newsItem].innerHTML, "male");
    if (++newsItem === news.length){
        window.clearInterval(speechInterval);
    }
}​, 2000); 
```

[**演示，在标签中插入文本`<p>`而不是说出它**](http://jsfiddle.net/Snowsickle/r2dAd/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T04:19:10.210

这是我对这个问题的看法：

```
function speak() {
    var li = document.getElementById ('news').getElementsByTagName ('li')
      , i = 0;

    li = [].slice.call (li, 0);

    (function speakItem() {
      speechapi.speak(li[i++].innerHTML, "male");
      i < li.length && window.setTimeout (speakItem, 1000);
    }
} 
```

将`[].slice.call (li, 0)`li 元素的实时列表转换为简单的 JS 数组，从而提高处理效率。

阅读每个项目，然后，如果有更多项目，则在说出下一个项目之前开始 1 秒的间隔。这允许长项和短项之间具有恒定的间隔。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T03:59:25.573

怎么样

```
function speak() {
    var i = 0,
    li = document.getElementById('news').getElementsByTagName('li'),
    interval = setInterval(function(){
        if (i < li.lenght){
            speechapi.speak(li[i].innerHTML,"male");
            i++;
        }
        else{
            clearInterval(interval);
        }
    }, 5000);
} 
```

[https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByTagName](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByTagName)

[https://developer.mozilla.org/en-US/docs/DOM/document.getElementById](https://developer.mozilla.org/en-US/docs/DOM/document.getElementById)

[https://developer.mozilla.org/en-US/docs/window.setInterval](https://developer.mozilla.org/en-US/docs/window.setInterval)

[https://developer.mozilla.org/en/DOM/window.clearInterval](https://developer.mozilla.org/en/DOM/window.clearInterval)

# typo3 - 将参数添加到打字稿中的链接

> ID：11919556
> 
> 赞同：2
> 
> 时间：2012-08-12T03:44:36.523
> 
> 标签：typo3, typoscript

我有我的网站设置，因此如果您在移动设备上，您将获得一个移动渲染模板。点击进入你去的主站点

```
index.php?id=??&mainsite=1 
```

这一切都很好，但是我的移动模板底部有一个链接，上面写着转到主站点。我希望它转到当前页面 ID 的主模板页面，例如

```
index.php?id=page:uid&mainsite=1 
```

如果我做

```
lib.mainsitelink= TEXT
lib.mainsitelink.data = page:uid 
```

我明白了

```
www.example.com/uid 
```

所以当 uid = 3 我得到

```
www.example.com/3 
```

但如果我执行下面的代码它不起作用

```
lib.mainsitelink= TEXT
lib.mainsitelink.data = index.php?id=page:uid&mainsite=1 
```

有没有办法做我想做的事或在当前网址的末尾添加一个参数？例如，我正在尝试做的事情在新闻单页上不太适用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T09:56:04.613

首先，我认为 cobj 文本没有方法数据，因此我会将其更改为值方法。此外，当您想使用 getText 数据类型时，您需要使用花括号扭曲变量，然后将方法 insertData = 1 添加到其中，以便替换花括号内的所有内容。这是一个完整的例子：[http](http://wiki.typo3.org/TSref/getText) ://wiki.typo3.org/TSref/getText 。当然你可以使用typolink cobject 来替换页面id。其次，您可以使用additionalParams 方法（当然带有错字链接）添加额外的链接参数（即get-parameters），或者您可以使用纯cobj 文本。这是一个带有 cObj 图像和 stdWrap cObj 错字链接和 tt_news 获取参数的示例。它还会打开一个弹出窗口。

```
 40=IMAGE
             40.file=print.gif                 
             40.stdWrap.wrap = <div>|</div>
             40.stdWrap.typolink.no_cache = 1 
             40.stdWrap.typolink.parameter.data = page:uid
             40.stdWrap.typolink.parameter.wrap = | ,1 print
             40.stdWrap.typolink.additionalParams.cObject = COA
             40.stdWrap.typolink.additionalParams.cObject {

                  10 = TEXT
                  10.data = GPvar : no_cache 
                  10.wrap = &no_cache=|
                  10.required = 1

                  20 = TEXT
                  20.data = GPvar : L
                  20.wrap = &L=|
                  20.required = 1

                  30 = TEXT
                  30.data = GPvar : backPID
                  30.wrap = &backPID=|
                  30.required = 1

                  40 = TEXT
                  40.data = GPvar : tt_news
                  40.wrap = &tt_news=|
                  40.required = 1

              } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T08:29:50.940

根据您需要使用的[typolink参考](http://typo3.org/documentation/document-library/core-documentation/doc_core_tsref/4.7.0/view/1/5/#id553839)`additionalParams`

```
lib.myLink = TEXT
lib.mylink.value = Click me!
lib.mylink.typolink.parameter.data = page:uid
lib.mylink.typolink.additionalParams = &mainsite=1
lib.mylink.typolink.useCacheHash = 1 
```

请记住，**每个**（甚至是第一个）参数都`additionalParams`以`&`. 很可能您还需要确保它会生成 cHash 以进行适当的缓存。

# ruby-on-rails-3 - Rails 应用程序 http 请求

> ID：11919559
> 
> 赞同：0
> 
> 时间：2012-08-12T03:45:02.997
> 
> 标签：ruby-on-rails-3, passenger, apache

当我使用Passenger在Apache中运行我的Rails应用程序并打开两个浏览器时，使用log4r记录带有线程ID的请求。我看到两个请求都使用相同的线程 ID。这怎么可能？如果我在一个请求中睡眠直到睡眠到期，另一个请求被阻止。我在哪里可以为每个请求或 maxThreadCount 配置使用不同的线程？它是开发环境的行为还是生产环境的行为？如何克服这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T16:35:54.520

```
config.threadsafe! 
```

把它放在你的**production.rb**或**development.rb**中。

在控制器操作中调用本地 Web 服务时，我遇到了同样的问题。

[Puma](https://github.com/puma/puma)也有更好的并发性，但是 threadsafe confgi 让 webrick 对我来说是多线程的。

# javascript - 多个 Javascript 文件但只有一个 HTTP 请求

> ID：11919570
> 
> 赞同：3
> 
> 时间：2012-08-12T03:46:44.510
> 
> 标签：javascript, html, http

我想很好地将我的 JS 分开，所以每个对象都在它自己的文件中，我可能会像这样构建我的目录和文件：

/js/modules/module1.js /js/pages/page1.js

问题是我不想每个文件有 50 个 HTTP 请求，有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T03:52:38.660

这种技术是非常基本和合乎逻辑的。情况是我们在 HTML 标头中多次调用外部 Javascript 文件，这意味着来自客户端浏览器的多个 HTTP 请求。我们如何减少所有这些 HTTP 请求？

将它们组合起来，至少只调用一次外部 Javascript 文件，避免破坏网页上任何依赖于 Javascript 的功能，缩小 Javascript 以节省带宽

[http://falcon1986.wordpress.com/2010/01/11/combine-and-minify-javascript-reduce-number-of-http-requests/](http://falcon1986.wordpress.com/2010/01/11/combine-and-minify-javascript-reduce-number-of-http-requests/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T03:50:56.563

我想到了两种方法：

1.  在您的站点中仅放置一个 js 链接，例如`/scripts/all.js`，并根据对该 js 的请求，编译并合并所有文件并提供它们。
2.  使用 JavaScript 依赖管理器，按需加载脚本（而不是全部，即使不使用）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T06:12:19.333

您可以使用 PHP 文件将所有这些组合起来。这种技术被许多 PHP 软件使用，例如 IP.board

对于 ASP.NET，这将有所帮助 - [http://abhijitjana.net/2011/10/06/bundling-and-minification-in-asp-net-4-5/](http://abhijitjana.net/2011/10/06/bundling-and-minification-in-asp-net-4-5/)

# css - PSD网站模板的最佳尺寸？

> ID：11919571
> 
> 赞同：6
> 
> 时间：2012-08-12T03:47:04.383
> 
> 标签：css, templates, photoshop, psd

我在 Photoshop CS5 中制作了一些网站，但我通常倾向于只在 notepad++ 中制作它们。我通常将它们放在网站上，然后编辑代码并刷新页面以查看更改。我想转向更专业的方法并在 Photoshop 中制作整个模板/设计。阻止我潜入水中的事情是一开始就大声笑..

用于模板的好的分辨率是什么？我遇到过不同的教程，他们说不同的大小。例如，我的笔记本电脑分辨率是 1366x768。我的办公室有一个 22 英寸的 LCD，我知道它的分辨率也非常高。我会假设大多数显示器的最小分辨率是 1024x768 ......

在 Photoshop 中创建新模板以创建网站模板时，我应该制作多大尺寸的图像，为什么？

另外，既然我们是在讨论这个话题，你们有没有链接到图片收藏的好资源，这样你觉得在创建模板时对你有最大的帮助？我是一名程序员，我们都知道，大多数程序员都不擅长图像。我只是想加强我大脑的另一半 :)

提前致谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-12T04:56:24.847

我建议采取以下行动：

1.  查看当前[最广泛使用的屏幕分辨率](http://gs.statcounter.com/#resolution-ww-monthly-201205-201207)的统计数据。如您所见，1366x768 是目前最流行的分辨率，其次是仍然拥有庞大用户群的老式 1024x768。并留意移动分辨率。
2.  考虑浏览器 chrome 和其他操作系统绒毛占用的必要屏幕空间。
3.  由于针对多种屏幕尺寸进行设计每天都变得越来越重要，因此我强烈建议您选择几个目标分辨率，而不仅仅是一个。这一切都可以由 CSS 很好地处理。即使您只针对台式机，考虑不同的屏幕尺寸仍然是有意义的。
4.  由于您仍在使用 Photoshop，因此您可以从许多可用的基于网格的 PSD 模板之一开始。我知道一个[960px](http://960.gs/)和一个[1140px 的](http://cssgrid.net/)，但你可以找到更多。如果您决定支持一种以上的屏幕尺寸，您可能不得不使用多个网格。

然后，当您想更加努力地考虑这一切时，请直接阅读这篇文章：Peter-Paul Koch[的两个视口的故事。](http://www.quirksmode.org/mobile/viewports.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T04:11:56.980

查看粉碎杂志并注册他们的时事通讯以及 webdesignerdepot 并查看 Codrops.net。他们有很棒的免费赠品、教程和标准更新。我喜欢检查我的邮件以查看它们。

至于 PSD - 他们没有固定大小。我见过专业的 1100 像素宽的 wordpress 开发人员模型（高度是基于您的布局的变体）。我不推荐超过 1366px 的宽度。

我可能会做 1366 或 1440，因为这是大多数人会看到的分辨率。当你在 1920 范围内发送一个样机时，人们认为网站太小，当内容仍然是他们所有的 940-980 时

**编辑：**

我自己在 1100 像素或 1440 像素宽处做 PSD，主要内容始终是 940-980 像素宽。

当在正文背景中没有太多图形可以查看时，我使用 1100，而当背景对网站的“感觉”更为重要时，我使用 1440。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T02:15:08.113

您想为最常用的屏幕分辨率设计您的网站，这似乎是 1280 像素 x 720 像素。因此，这就是您想要的宽度，您可以创建任何类型的背景，只需确保将其淡化为一种颜色或透明并使用 CSS 更改背景颜色。

确保您有帮助您保持内容内联的指南，最好的方法是创建一个宽度为 960-100 像素、高度为 720 像素的新文档，然后将指南拖动到所有四个边。

然后您可以将文档大小更改为 1280 像素 x 800-960 像素。

之所以有 720 像素的指南，是因为保证在所有分辨率上都能看到该线以上的所有内容，它被称为“首屏”。优秀的设计师会考虑到这一点，以确保吸引观众探索网站，特色内容滑块是一种简单的出路。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-04-14T08:25:08.497

incomepitbull，我明白你来自哪里......
我也是一名正在努力学习 Photoshop 的后端开发人员......
许多前端设计师对开发阶段的情况一无所知......
大多数 Photoshop 模拟取决于客户规格……
高度无所谓；使用 960 px (12col,16col,24col), 980 px (12col,24,col), 1000 px (100 % 响应友好对于那些不使用网格系统的人) 或 1140 (对于针对更大显示器的网络, 即不是移动优先 px.. .)
毕竟，作为开发人员，我们解决了所有这些问题；但是好的模型很重要...

# php - PHP登录脚本会话问题

> ID：11919574
> 
> 赞同：-1
> 
> 时间：2012-08-12T03:48:24.673
> 
> 标签：php, mysql, sql, mysqli

我的登录代码有几个问题。我知道我没有加密密码，但这只是现在的学习基础。

1.  所以我知道我正在从我的表单中获取值，因为当我提供正确的登录名时，它会将我定向到 member-index.php 然后立即将我重定向到**access-denied.php**，因为我的会话设置不正确？

2.  当我提供无效登录时，它不会将我重定向到 login-failed.php，它只是像**login.php**上的空页面一样，这是我从表单输入中引导它的地方。

这是我的数据库表供参考：

表：登录

```
 +---------+----------+--------
   | login_ID | Login_PW| auth  |
   +-------=--+---------+--------
   | User_test|  123    | null  |
   +----------+---------+--------

 <?php 
    function clean($str)
    {
        $str = @trim($str);
        if(get_magic_quotes_gpc()) {
            $str = stripslashes($str);
        }
        return $str;
    }

    //Sanitize the POST values

    if (isset($_POST['username']))    
    {    
              $username = clean($_POST['username']);    
    }    

    if (isset($_POST['password']))    
    {    
    $password = clean($_POST['password']);

    }    

    /* Create a new mysqli object with database connection parameters */
    $mysqli = mysqli_connect('localhost', 'root', '', 'draftdb');

    if(mysqli_connect_errno()) 
    {
        echo "Connection Failed: " . mysqli_connect_errno();
        exit();
    }

    /* Is your username the same as the login_id? If not you need to change this query's where to use the username column not the login_id. */

    /* Create a prepared statement */
    if($stmt = $mysqli -> prepare("
        SELECT Login_ID, Login_PW
        FROM login  
        WHERE Login_ID=? AND Login_PW=?
    "))
    {
        /* Bind parameters
             s - string, b - boolean, i - int, etc */
        $stmt -> bind_param("ss", $username, $password);

        /* Execute it */
        $result = $stmt -> execute();

        /* Bind results to variables that will be used within the fetch() loop. */
        $stmt -> bind_result($username, $password);

        //Check whether the query was successful or not
        if ($result === false)
         {
            die("Query failed");
         }
          /* Iterate over the results of the query. */
        while ($stmt->fetch())  
        { //while loop open
             if($_POST['username'] == $username && $_POST['password'] == $password)
                {
            //$member = mysqli_fetch_assoc($result);

                 session_regenerate_id();
            /* We can create a _SESSION cause we binded the result to those variables above. */
                //$_SESSION['SESS_MEMBER_ID'] = $username;
                 $_SESSION['username'] = $_POST['username'];

             session_write_close();
             header("location: member-index.php");
             exit();

                }

                elseif($result -> num_rows == 0 )
                    {
                    header("location: login-failed.php");
                     exit();
                    }

         }//while loop close

          /* Close statement */
          $stmt -> close();
    }//main if close

       /* Close connection */
       $mysqli -> close(); 
```

* * *

成员索引.php

```
<?php
    //Start session
    session_start();

    //Check whether the session variable SESS_MEMBER_ID is present or not
    if(!$_SESSION['username']) {
        header("location: access-denied.php");
        exit();
    }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T04:24:46.673

```
/* Execute it */
$result = $stmt -> execute();
$stmt -> store_result();

.
.
.

elseif($stmt -> num_rows == 0 ) // note $stmt instead of $result 
```

应该这样做

# c# - C# UDP 客户端接收速度太慢

> ID：11919577
> 
> 赞同：-1
> 
> 时间：2012-08-12T03:49:14.990
> 
> 标签：c#, sockets, udp

我尝试在 PLC（电子设备）和 PC 之间进行通信。防火墙关闭。我看到了wireshark收到的包裹。

问题1：接收消息太慢，为什么？到达我的代码需要一些时间。我的代码如下。

问题 2：WireShark 软件如何快速捕获此消息？我怎样才能在 C# 中实现这一点？

问题3：我必须关闭防火墙才能接收消息。但是wireshark不需要关闭防火墙。我怎样才能通过永不关闭防火墙来实现这一点。我基本上尝试 1 对 1 的本地通信。

```
 private void udpcommincate()
    {
        sock_rcv = new UdpClient(6002);
        try
        {
            sock_rcv.BeginReceive(new AsyncCallback(recv), null);
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.ToString());
        }  
    }
    private void recv(IAsyncResult res)
    {
        IPEndPoint RemoteIpEndPoint = new IPEndPoint(IPAddress.Any, 6002);
        plc_gelen = sock_rcv.EndReceive(res, ref RemoteIpEndPoint);
        flag= BitConverter.ToInt32(plc_gelen, 0);
        sock_rcv.BeginReceive(new AsyncCallback(recv), null);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T04:09:13.793

1.  对于简单的 UDP 通信，您不需要所有这些异步机制 - 将请求发布到线程池、调度回调等需要时间。如果您想要速度，只需在一个线程中执行阻塞读取循环即可。
2.  和 3\. Wireshark 使用特殊的内核接口（在[winpcap](http://www.winpcap.org/)库中实现），通常在内核防火墙得到它们之前获取所有匹配给定过滤器的数据包的副本。

# javascript - 将 textarea 行/列转换为屏幕 x/y 坐标

> ID：11919579
> 
> 赞同：1
> 
> 时间：2012-08-12T03:50:15.430
> 
> 标签：javascript, jquery, html, web

我的网页上有一个 textarea 元素，其中包含一些纯文本（字母数字、换行符、制表符、空格）。我知道如何获取光标的行和列。但是，我需要一种将它们转换为屏幕坐标的方法，这样我就可以在光标的确切位置显示一个浮动 div。我看到了两种方式

方法一：从屏幕上的(0,0)处获取textarea的偏移量。对于 x 坐标，遍历该行上的每个字符并将字符数乘以每个字符的宽度（制表符与实际字符的计算方式不同）并将其添加到原始偏移量。对于 y 坐标，将行数乘以每行的高度并将其添加到原始偏移量。但是，如何计算字符宽度和行高？

方法2：找一个javascript库。有人知道现有的 javascript 库/框架（例如 jQuery）可以做到这一点吗？我已经看过，似乎找不到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T05:22:08.263

事件触发后`onchange`，检查`mouseMove`事件，然后获取坐标：

```
var waiting;
function text_changed(event) { //attach this to onChange
     waiting = true;
     setTimeout('waiting = false',1000);
}
function mouse_moved(event) { //attach this to mouseMove
    if (waiting) {
        display_div(event.pageX,event.pageY);
        waiting = false;
    }
}
function display_div(x,y) {
    $('#floating_div').css('left',x).css('top',y).css('display','block');
} 
```

如果必须，将 jQuery 替换为常规 DOM 脚本：

```
function display_div(x,y) {
    var elmt = document.getElementById('floating_div');
    elmnt.setAttribute('style','left:'+x+';top:'+y+';display:block');
} 
```

# php - 如何获取 $_POST 的函数值

> ID：11919582
> 
> 赞同：1
> 
> 时间：2012-08-12T03:50:38.543
> 
> 标签：php

所以我试图获得这个功能，它是表单的状态下拉选择，给我在另一个文件中使用 $_POST 提交时选择的值，事情是我真的不知道当你使用'name = ' 传入的参数。

这是我的代码

```
<?php
    function state_select ($name,$full_state,$selected = '') {

  $state_list = array("AL|Alabama","AK|Alaska","AZ|Arizona", "AR|Arkansas", "CA|California", "CO|Colorado", "CT|Connecticut", "DE|Delaware", "DC|Washington D.C.", "FL|Florida", "GA|Georgia", "HI|Hawaii", "ID|Idaho", "IL|Illinois", "IN|Indiana", "IA|Iowa", "KS|Kansas", "KY|Kentucky", "LA|Louisiana", "ME|Maine", "MD|Maryland", "MA|Massachusetts", "MI|Michigan", "MN|Minnesota", "MS|Mississippi", "MO|Missouri", "MT|Montana", "NE|Nebraska", "NV|Nevada", "NH|New Hampshire", "NJ|New Jersey", "NM|New Mexico", "NY|New York", "NC|North Carolina", "ND|North Dakota", "OH|Ohio", "OK|Oklahoma", "OR|Oregon", "PA|Pennsylvania", "RI|Rhode Island", "SC|South Carolina", "SD|South Dakota", "TN|Tennessee", "TX|Texas", "UT|Utah", "VT|Vermont", "VA|Virginia", "WA|Washington", "WV|West Virginia", "WI|Wisconsin", "WY|Wyoming");

  ?>
  <select name=<?=$name;?> id="state" ><?
    foreach ($state_list as $s) {
        $values = explode("|",$s);
        ?><option value="<?=$values[0];?>" <?
                if($selected == $values[0]) { ?>SELECTED<? }
                ?>>
                <? if($full_state) { ?><?=$values[1];?><? } else { ?><?=$values[0];?><? } ?></option><?
    }
  ?></select><?
}
?>

<span class="InputDiscription">State: </span><div class="InputInner"><?=state_select('state',false,'AL'); ?></div><!----- END .InputInner ---------->
<?php
 $setError=$_GET['seterror']; 
if($setError == 1){
    echo "<span class='errorMsg'>*Required</span>";
    }
else
    echo "<span>*</span>"; 

?> 
```

谢谢！

已更新***_* *_* __ _ __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __**

将值发送到的文件 ---

```
 $selectvalue=$_POST['hiddenfield'];
    echo $selectvalue; 
```

主文件！

```
<head>  
<script type="text/javascript">
function submitform(){
    // Get the index of selected item
    var list = document.getElementById('state');
    var INDEX = list.selectedIndex;
    document.getElementById("hiddenfield").value=list[INDEX].value;

    //Submit the form
    document.forms["theform"].submit();
}
</script>
</head>
    <div class="InputContainer">
    <!------------------------------------------STATE SELECTION CODE ------------------------------------------->
<?php
    function state_select ($name,$full_state,$selected = '') {

  $state_list = array("AL|Alabama","AK|Alaska","AZ|Arizona", "AR|Arkansas", "CA|California", "CO|Colorado", "CT|Connecticut", "DE|Delaware", "DC|Washington D.C.", "FL|Florida", "GA|Georgia", "HI|Hawaii", "ID|Idaho", "IL|Illinois", "IN|Indiana", "IA|Iowa", "KS|Kansas", "KY|Kentucky", "LA|Louisiana", "ME|Maine", "MD|Maryland", "MA|Massachusetts", "MI|Michigan", "MN|Minnesota", "MS|Mississippi", "MO|Missouri", "MT|Montana", "NE|Nebraska", "NV|Nevada", "NH|New Hampshire", "NJ|New Jersey", "NM|New Mexico", "NY|New York", "NC|North Carolina", "ND|North Dakota", "OH|Ohio", "OK|Oklahoma", "OR|Oregon", "PA|Pennsylvania", "RI|Rhode Island", "SC|South Carolina", "SD|South Dakota", "TN|Tennessee", "TX|Texas", "UT|Utah", "VT|Vermont", "VA|Virginia", "WA|Washington", "WV|West Virginia", "WI|Wisconsin", "WY|Wyoming");

  ?>
  <select name=<?=$name;?> id="state" ><?
    foreach ($state_list as $s) {
        $values = explode("|",$s);
        ?><option value="<?=$values[0];?>" <?
                if($selected == $values[0]) { ?>SELECTED<? }
                ?>>

                <?  if($full_state) { ?><?=$values[1];?><? } else { ?><?=$values[0];?><? } ?></option><?
    }
  ?></select><?
}
?>

<span class="InputDiscription">State: </span><div class="InputInner">
<?=state_select('state',false,'AL'); ?>
 </div><!----- END .InputInner ---------->
<input type="hidden" id="hiddenfield" name="hiddenfield" value="">
<?php

 $setError=$_GET['seterror']; 
if($setError == 1){
    echo "<span class='errorMsg'>*Required</span>";
    }
else
    echo "<span>*</span>"; 

?>

</div><!---------------------------------END .InputContaienr -----------------------------------> 
```

更新 - - - - - - - - - - - - - - - - - - - - - - - - - ----------------------- 主文件-------------

```
<html>
<head>  
<script type="text/javascript">
function submitform(){
    // Get the index of selected item
    var list = document.getElementById('state');
    var INDEX = list.selectedIndex;
    document.getElementById("hiddenfield").value=list[INDEX].value;

    //Submit the form
    document.forms["theform"].submit();
}
</script>
</head>
<body>

<?php
include('Main.css');

$hostname="";
$username="";
$password="";
$database="";

/*mysql_connect($hostname,$username,$password);
@mysql_select_db($database) or die( "Unable to select database");*/

//function getFN(){
try {  
  # MySQL with PDO_MYSQL  
  $DBH = new PDO("mysql:host=$hostname;dbname=$database", $username, $password);  
  $DBH->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );

  //$DBH->prepare('SELECT first FROM contacts');
}  
catch(PDOException $e) { 
    echo "I'm sorry, I'm afraid I can't do that.";  
    file_put_contents('PDOErrors.txt', $e->getMessage(), FILE_APPEND);   
}  
//get query
$FNresult=$DBH->query('SELECT CompanyNames FROM companynames'); 
//set fetch mode
$FNresult->setFetchMode(PDO::FETCH_ASSOC);

$DBH = null; 
?>

        <div id="MainContainer">   
            <h2 align="center">
                <u>PLEASE SUPPLY THE FOLLOWING INFORMATION REGARDING YOUR AUTO INSURANCE POLICY:</u>
           </h2>

         <div class="FormContainer">
            <form name="theform" action="insert.php" method="post">
                <div class="CheckBoxContainer">
            <input type="checkbox" value"On" name="only-thisform"/>I will complete the insurance verification form only. 
            <?php 
            $setError=$_GET['seterror'];

            if ($setError == 1){

                echo "<div class='errorMsg'> *Required</div>";
            }
             ?>
            <br>
            <br>

            <input type="checkbox"  value="On" name="approval" id="approval"/>I agree to authorize PCG Protects, LLC to receive a certificate of liability and or to be added as an additional interest on my personal auto policy, whichever accommodates my Auto Insurance Carriers standard practice, so they can monitor the active status of my personal auto policy, on behalf of my employer.
             <?php 
             $setError=$_GET['seterror'];
             if ($setError == 1){

                echo "<div class='errorMsg'> *Required</div>";
             }

             ?>
            </div><!------------------------------------END   .CheckBoxContainer ------------------------------------------->
            <br>
            <br>

<script type="text/javascript"
     src="http://code.jquery.com/jquery-latest.min.js">
</script>   
<!-- javascript on client-side -->

<div class="DropDownSelector">
<?php

$dropdown = "<select name='CompanyNames' id='CompanyNames' >";

$dropdown .= "\r\n<option  id ='other' name ='other' value='other'>other</option>";

while($row =$FNresult->fetch()) {

  $dropdown .= "\r\n<option  id ='firstname' name ='first' value='{$row['CompanyNames']}'>{$row['CompanyNames']}</option>";
}

$dropdown .= "\r\n</select>";

echo $dropdown;
?>
    <div class="DropdownDiscription">Please select your insurance company.  Select other if you do not see it listed. </div>
</div> <!------------------------------------------END .DropDownSelector -------------------------------------------------------->
<script type="text/javascript">  

var dropdown = $('#CompanyNames');
//var test = $('#firstname');
//document.write(dropdown.val());

dropdown.bind('change', function(){

    $.post('backgroundScript.php', 
        { 
            'CompanyNames': dropdown.val()

        },
        function(response) {
            $('#compname').val(response.Companyname);
            //$('#phone').val(response.phone);
            //$('#policynum').val(response.policynum);
            //$('#nameofPolicyholder').val(response.policyholder);
            //$('#mailing').val(response.mailing);
            // Repeat for all of your form fields
        },
        'json'
    );

});
</script>
<br>
<div class="FormBody">
    <div class="InputContainer">
<span class="InputDiscription">Insurance Company Name: </span><div class="InputInner"> <input type="text" name="compname" id="compname" ></div><!----- END .InputInner ---------->

<?php
 $setError=$_GET['seterror']; 
if($setError == 1){
    echo "<span class='errorMsg'>*Required</span>";
    }
else
    echo "<span>*</span>"; 
?>

</div><!---------------------------------END .InputContaienr ----------------------------------->
<br>
    <div class="InputContainer">
<span class="InputDiscription">Insurance Phone number: </span><div class="InputInner"><input type="text"  name="phone" id="phone"></div><!----- END .InputInner ---------->
<?php
 $setError=$_GET['seterror']; 
if($setError == 1){
    echo "<span class='errorMsg'>*Required</span>";
    }
else
    echo "<span>*</span>"; 
?>

</div><!---------------------------------END .InputContaienr ----------------------------------->
<br>
    <div class="InputContainer">
<span class="InputDiscription">Policy Number: </span><div class="InputInner"><input type="text" name ="policynum" id="policynum"></div><!----- END .InputInner ---------->
<?php
 $setError=$_GET['seterror']; 
if($setError == 1){
    echo "<span class='errorMsg'>*Required</span>";
    }
else
    echo "<span>*</span>"; 
?>

</div><!---------------------------------END .InputContaienr ----------------------------------->
<br>
    <div class="InputContainer">
<span class="InputDiscription">Name of the Policyholder: </span><div class="InputInner"><input type="text" name="nameofPolicyholder" id="nameofPolicyholder"></div><!----- END .InputInner ---------->
<?php
 $setError=$_GET['seterror']; 
if($setError == 1){
    echo "<span class='errorMsg'>*Required</span>";
    }
else
    echo "<span>*</span>"; 
?>

</div><!---------------------------------END .InputContaienr ----------------------------------->
<br>
    <div class="InputContainer">
<span class="InputDiscription">Policyholder mailing address: </span><div class="InputInner"><input type="text" name="mailing" id="mailing"></div><!----- END .InputInner ---------->
<?php
 $setError=$_GET['seterror']; 
if($setError == 1){
    echo "<span class='errorMsg'>*Required</span>";
    }
else
    echo "<span>*</span>"; 
?>

</div><!---------------------------------END .InputContaienr ----------------------------------->
<br>
    <div class="InputContainer">
<span class="InputDiscription">City: </span><div class="InputInner"><input type="text" name="city" id="city"></div><!----- END .InputInner ---------->
<?php
 $setError=$_GET['seterror']; 
if($setError == 1){
    echo "<span class='errorMsg'>*Required</span>";
    }
else
    echo "<span>*</span>"; 
?>

</div><!---------------------------------END .InputContaienr ----------------------------------->
<br>
    <div class="InputContainer">
    <!------------------------------------------STATE SELECTION CODE ------------------------------------------->
<?php
    function state_select ($name,$full_state,$selected = '') {

  $state_list = array("AL|Alabama","AK|Alaska","AZ|Arizona", "AR|Arkansas", "CA|California", "CO|Colorado", "CT|Connecticut", "DE|Delaware", "DC|Washington D.C.", "FL|Florida", "GA|Georgia", "HI|Hawaii", "ID|Idaho", "IL|Illinois", "IN|Indiana", "IA|Iowa", "KS|Kansas", "KY|Kentucky", "LA|Louisiana", "ME|Maine", "MD|Maryland", "MA|Massachusetts", "MI|Michigan", "MN|Minnesota", "MS|Mississippi", "MO|Missouri", "MT|Montana", "NE|Nebraska", "NV|Nevada", "NH|New Hampshire", "NJ|New Jersey", "NM|New Mexico", "NY|New York", "NC|North Carolina", "ND|North Dakota", "OH|Ohio", "OK|Oklahoma", "OR|Oregon", "PA|Pennsylvania", "RI|Rhode Island", "SC|South Carolina", "SD|South Dakota", "TN|Tennessee", "TX|Texas", "UT|Utah", "VT|Vermont", "VA|Virginia", "WA|Washington", "WV|West Virginia", "WI|Wisconsin", "WY|Wyoming");

  ?>
  <select name=<?=$name;?> id="state" ><?
    foreach ($state_list as $s) {
        $values = explode("|",$s);
        ?><option value="<?=$values[0];?>" <?
                if($selected == $values[0]) { ?>SELECTED<? }
                ?>>

                <?  if($full_state) { ?><?=$values[1];?><? } else { ?><?=$values[0];?><? } ?></option><?
    }
  ?></select><?
}
?>

<span class="InputDiscription">State: </span><div class="InputInner">
<?=state_select('state',false,'AL'); ?>
 </div><!----- END .InputInner ---------->
<input type="hidden" id="hiddenfield" name="hiddenfield" value="">
<?php

 $setError=$_GET['seterror']; 
if($setError == 1){
    echo "<span class='errorMsg'>*Required</span>";
    }
else
    echo "<span>*</span>"; 

?>

</div><!---------------------------------END .InputContaienr ----------------------------------->
<br>
<?php 
 $setError=$_GET['seterror']; 
if($setError == 1){
echo "<script type='text/javascript'>alert('Please check to make sure all required fields are filled out!');</script>";
}
?>
<input type="Submit" name="Submit" >

</div><!-------------------------------------------END .FormBody ------------------------------------------------------->
</form>

    </div><!--------------------------------------End .FormContainer ---------------------------------------------->

</div><!----------------------------------End #MainContainer----------------------------------->

</body>
</html> 
```

其他文件---------------- 除了那个显示代码之外，所有内容都被注释掉了/ / **** *** ** *** ** *** ** *** ** *** ** *** ** ****验证复选框已选中******* *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** **** / /* $setError = 0; $ch1 = '未选中'; $ch2 = '未选中'; // print_r("测试 ch1 : $ch1"); if(isset($_POST['only-thisform'])) {**

 **```
 $ch1 = 'Check';
                //if ($setChecker != 1)
                $setError= 0;
                //print_r("testing ch1: $ch1");

            }
            if ($ch1 !='Check' ){

            $setError = 1;
            returnBack();

        }
            if (isset($_POST['approval'])) {
                //$setChecker = 1;
                $ch2 = 'Check';
                $setError= 0;
                //print_r("testing  ch2: $ch2");
            }
             if ($ch2 != 'Check' ){

            $setError = 1;
            returnBack();

        }*/
/***************************************************************************************************************************************/       
        /* 
function returnBack(){
    header("Location: http://pcgprotects.com/PCG/test.php?seterror=1");
    exit;

}

if(isset($_POST['compname']))  {
    $compname=$_POST['compname'];
}
else{
    $setError = 1;
    returnBack();
}

if(isset($_POST['phone']))  {
    $phone=$_POST['phone'];
}
else{
    $setError = 1;
    returnBack();
}

if(isset($_POST['policynum']))  {
    $policynum=$_POST['policynum'];
}
else{
    $setError = 1;
    returnBack();
}

if(isset($_POST['nameofPolicyholder']))  {
    $nameofPolicyholder=$_POST['nameofPolicyholder'];
}
else{
    $setError = 1;
    returnBack();
}

if(isset($_POST['mailing']))  {
    $mailing=$_POST['mailing'];
}
else{
    $setError = 1;
    returnBack();
}
if(isset($_POST['city']))  {
    $city=$_POST['city'];
}
else{
    $setError = 1;
    returnBack();
}
if(isset($_POST['mailing']))  {
    $mailing=$_POST['mailing'];
}
else{
    $setError = 1;
    returnBack();
}
*/

    echo "hiddenfield=".$_POST['hiddenfield'];

/*
mysql_connect($hostname,$username,$password);
@mysql_select_db($database) or die( "Unable to select database");
$new_id_number = mysql_insert_id();
$query = "INSERT INTO contacts VALUES ('$new_id_number','$compname','$phone','$policynum','$nameofPolicyholder','$mailing')";
echo 'being inserted';
mysql_query($query);

if ('SELECT * FROM companynames WHERE CompanyNames != :compname');{
    $query = "INSERT INTO companynames VALUES('$new_id_number','$compname')";
    mysql_query($query);
    echo "working";
}
mysql_close();*/
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T04:08:30.837

这将提交表单，您需要添加一个表单元素并在 select 元素上添加 onchange 事件提交它，我希望这会有所帮助

```
<html>
<head>  
<script type="text/javascript">
function submitform(){
    document.forms["theform"].submit();
}
</script>
</head>
<body>

<form action="otherfile.php" method="post" name="theform">
<?php
    function state_select ($name,$full_state,$selected = '') {

  $state_list = array("AL|Alabama","AK|Alaska","AZ|Arizona", "AR|Arkansas", "CA|California", "CO|Colorado", "CT|Connecticut", "DE|Delaware", "DC|Washington D.C.", "FL|Florida", "GA|Georgia", "HI|Hawaii", "ID|Idaho", "IL|Illinois", "IN|Indiana", "IA|Iowa", "KS|Kansas", "KY|Kentucky", "LA|Louisiana", "ME|Maine", "MD|Maryland", "MA|Massachusetts", "MI|Michigan", "MN|Minnesota", "MS|Mississippi", "MO|Missouri", "MT|Montana", "NE|Nebraska", "NV|Nevada", "NH|New Hampshire", "NJ|New Jersey", "NM|New Mexico", "NY|New York", "NC|North Carolina", "ND|North Dakota", "OH|Ohio", "OK|Oklahoma", "OR|Oregon", "PA|Pennsylvania", "RI|Rhode Island", "SC|South Carolina", "SD|South Dakota", "TN|Tennessee", "TX|Texas", "UT|Utah", "VT|Vermont", "VA|Virginia", "WA|Washington", "WV|West Virginia", "WI|Wisconsin", "WY|Wyoming");

  ?>
  <select name=<?=$name;?> id="state" onchange="submitform()"><?
    foreach ($state_list as $s) {
        $values = explode("|",$s);
        ?><option value="<?=$values[0];?>" <?
                if($selected == $values[0]) { ?>SELECTED<? }
                ?>>
                <? if($full_state) { ?><?=$values[1];?><? } else { ?><?=$values[0];?><? } ?></option><?
    }
  ?></select><?
}
?>

<span class="InputDiscription">State: </span><div class="InputInner"><?=state_select('state',false,'AL'); ?></div><!----- END .InputInner ---------->
<?php
 $setError=$_GET['seterror']; 
if($setError == 1){
    echo "<span class='errorMsg'>*Required</span>";
    }
else
    echo "<span>*</span>"; 

?>
</form>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T05:11:47.603

这个怎么样？并在其他 php 文件中使用 $selectvalue=$_POST['hiddenfield']

```
<html>
<head>  
<script type="text/javascript">
function submitform(){
    // Get the index of selected item
    var list = document.getElementById('state');
    var INDEX = list.selectedIndex;
    document.getElementById("hiddenfield").value=list[INDEX].value;

    //Submit the form
    document.forms["theform"].submit();
}
</script>
</head>
<body>

<form action="otherfile.php" method="post" name="theform">
<?php
    function state_select ($name,$full_state,$selected = '') {

  $state_list = array("AL|Alabama","AK|Alaska","AZ|Arizona", "AR|Arkansas", "CA|California", "CO|Colorado", "CT|Connecticut", "DE|Delaware", "DC|Washington D.C.", "FL|Florida", "GA|Georgia", "HI|Hawaii", "ID|Idaho", "IL|Illinois", "IN|Indiana", "IA|Iowa", "KS|Kansas", "KY|Kentucky", "LA|Louisiana", "ME|Maine", "MD|Maryland", "MA|Massachusetts", "MI|Michigan", "MN|Minnesota", "MS|Mississippi", "MO|Missouri", "MT|Montana", "NE|Nebraska", "NV|Nevada", "NH|New Hampshire", "NJ|New Jersey", "NM|New Mexico", "NY|New York", "NC|North Carolina", "ND|North Dakota", "OH|Ohio", "OK|Oklahoma", "OR|Oregon", "PA|Pennsylvania", "RI|Rhode Island", "SC|South Carolina", "SD|South Dakota", "TN|Tennessee", "TX|Texas", "UT|Utah", "VT|Vermont", "VA|Virginia", "WA|Washington", "WV|West Virginia", "WI|Wisconsin", "WY|Wyoming");

  ?>
  <select name=<?=$name;?> id="state" onchange="submitform()"><?
    foreach ($state_list as $s) {
        $values = explode("|",$s);
        ?><option value="<?=$values[0];?>" <?
                if($selected == $values[0]) { ?>SELECTED<? }
                ?>>
                <? if($full_state) { ?><?=$values[1];?><? } else { ?><?=$values[0];?><? } ?></option><?
    }
  ?></select><?
}
?>

<span class="InputDiscription">State: </span><div class="InputInner"><?=state_select('state',false,'AL'); ?></div><!----- END .InputInner ---------->
<?php
 $setError=$_GET['seterror']; 
if($setError == 1){
    echo "<span class='errorMsg'>*Required</span>";
    }
else
    echo "<span>*</span>"; 

?>
<input type="hidden" id="hiddenfield" name="hiddenfield" value="">
</form>
</body>
</html> 
```

?>

在 otherfile.php 中输入这个，你可以得到值

```
<?php
echo "hiddenfield=".$_POST['hiddenfield'];
?> 
```**

# android - 多次更新 SurfaceView 的更好方法？

> ID：11919587
> 
> 赞同：0
> 
> 时间：2012-08-12T03:51:59.377
> 
> 标签：android, performance

我正在使用 a `SurfaceView`，我必须尽快更新它。由于不会自动调用 onDraw 方法，因此我必须显式调用。所以我的第一次尝试是在线程上，但我有一些滞后。有更好的方法来做到这一点吗？如果有更好的解决方案，请您解释一下吗？我是 Android 世界的新手！

* * *

**到目前为止我所拥有的**

```
public void run() {
    while(running){
        Canvas c = null;
        try {
            c = view.getHolder().lockCanvas();
            synchronized (view.getHolder()) {
                view.onDraw(c);
            }
        } finally {
            if (c != null) {
                view.getHolder().unlockCanvasAndPost(c);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T08:09:51.160

这是我用作渲染线程的代码。fps 取决于更新帧。我通常以 30 fps 运行我的游戏。（有些代码你不需要，但我很高兴你能找到你正在寻找的部分。）

```
public class RenderView extends SurfaceView implements Runnable {

    Game game;
    Bitmap gameScreen;
    Thread gameloop;
    SurfaceHolder holder;
    boolean running;

    int sleepTime;
    int numberOfFramesSkipped;
    int maxFrameSkips;
    long beginTime;
    long endTime;
    long lastTime;
    int differenceTime;
    int framePeriod;
    Canvas frameBuffer;
    int frameCount;

    public RenderView(int fps, int maxFrameSkips) {
        super(game);
        this.gameScreen = gameScreen;
        this.holder = getHolder();
        this.framePeriod = 1000/fps;
        this.maxFrameSkips = maxFrameSkips;
        lastTime = System.currentTimeMillis();
        beginTime = System.currentTimeMillis();
    }

    @Override
    public void run() {

        while(running == true) {
            if(holder.getSurface().isValid()) {

                beginTime = System.currentTimeMillis();

                    // call your update method here
                // render here
                    frameBuffer = holder.lockCanvas();
                    this.onDraw();
                    holder.unlockCanvasAndPost(frameBuffer);

                // Frame Per Second Count
                frameCount++;

                if(lastTime + 1000 < System.currentTimeMillis()) {
                    lastTime = System.currentTimeMillis();
                    frameCount = 0;
                }

                endTime = System.currentTimeMillis();;
                differenceTime = (int) (endTime - beginTime);
                sleepTime = (int) (framePeriod - differenceTime);

                if(sleepTime > 0) {
                    try {
                        Thread.sleep(sleepTime);
                    } catch (InterruptedException exception) {
                        exception.printStackTrace();
                    }
                }
                else {
                    while(sleepTime < 0 && numberOfFramesSkipped < this.maxFrameSkips) {
                        // Call your update method here
                        sleepTime += framePeriod;
                        numberOfFramesSkipped++;
                    }
                }

            }

        }

    }

    private void renderFrameBuffer() {
        // Update the current virtual screen image
        game.getCurrentScreen().render();
        // Render the current virtual screen to the real phone screen
        frameBuffer = holder.lockCanvas();
        if(frameBuffer != null) { // Fix for mysterious bug ( FATAL EXCEPTION: Thread)
            // The viewing area of our virtual screen on our real screen
            // Composition
            // First layer (bottom)
                frameBuffer.drawBitmap(this.gameScreen, null, game.getWSScreen().getGameScreendst(), null);
            // Second layer (top)
                frameBuffer.drawBitmap(this.gameScreenExtended, null, game.getWSScreen().getGameScreenextendeddst(), null);

            holder.unlockCanvasAndPost(frameBuffer);
        }
        else {
            gameEngineLog.e(classTAG, "Surface has not been created or otherwise cannot be edited");
        }
    }

    public void resume() { 
        this.running = true;
        gameloop = new Thread(this);
        gameloop.start();         
    }   

    public void pause() { 
        this.running = false;
        running = false;                        
        while(true) {
            try {
                gameloop.join();
                break;
            } catch (InterruptedException e) {
                // retry
            }
        }
    }

}

public void onDraw() {

} 
```

我建议你看看这个链接或看看 [http://code.google.com/p/beginning-android-games/](http://www.edu4java.com/en/androidgame/androidgame3.html) 或[http://www.edu4java.com/en/androidgame/androidgame3.html](http://www.edu4java.com/en/androidgame/androidgame3.html)

# ios - 是否可以在 iOS 和 Windows Phone 中获得应用签名？

> ID：11919590
> 
> 赞同：1
> 
> 时间：2012-08-12T03:52:31.120
> 
> 标签：ios, windows-phone-7, digital-signature

我知道，在 Android 中我可以获得应用签名[如何获得 APK 签名签名？](https://stackoverflow.com/questions/5578871/android-how-to-get-app-signature)

但我也需要在 iOS 和 Windows Phone 中获得签名。

我需要这个来限制对 api 服务器的访问。

# c# - SQlBulkCopy 来自数据源的 DateTime 类型的给定值无法转换为指定目标列的 int 类型

> ID：11919593
> 
> 赞同：12
> 
> 时间：2012-08-12T03:53:13.667
> 
> 标签：c#, sql, performance, parsing

我在尝试执行以下“城市”数据表的 SqlBulkInsert 时收到上述错误代码：

```
DataTable cityTable = new DataTable(City.TABLE_NAME);
cityTable.Columns.Add("id", typeof(int));
cityTable.Columns.Add("name", typeof(string));
cityTable.Columns.Add("ascii_name", typeof(string));
cityTable.Columns.Add("alternate_names", typeof(string));
cityTable.Columns.Add("latitude", typeof(double));
cityTable.Columns.Add("longitude", typeof(double));
cityTable.Columns.Add("feature_class", typeof(char));
cityTable.Columns.Add("feature_code", typeof(string));
cityTable.Columns.Add("country_code", typeof(string));
cityTable.Columns.Add("country_code2", typeof(string));
cityTable.Columns.Add("population", typeof(long));
cityTable.Columns.Add("elevation", typeof(int));
cityTable.Columns.Add("modification_date", typeof(DateTime));
cityTable.Columns.Add("admin1code", typeof(string));
cityTable.Columns.Add("admin2code", typeof(string));
cityTable.Columns.Add("admin3code", typeof(string));
cityTable.Columns.Add("admin4code", typeof(string));
cityTable.Columns.Add("gtopo30", typeof(int));
cityTable.Columns.Add("timezone_name", typeof(string));
cityTable.Columns.Add("version", typeof(Binary)); 
```

以下是将每个实体添加到 DataTable 的代码：

```
object id = EvaluateNullity(parsedCity.Id);
object name = EvaluateNullity(parsedCity.Name);
object asciiName = EvaluateNullity(parsedCity.AsciiName);
object alternateNames = EvaluateNullity(parsedCity.AlternateNames);
object latitude = EvaluateNullity(parsedCity.Latitude);
object longitude = EvaluateNullity(parsedCity.Longitude);
object featureClass = EvaluateNullity(parsedCity.FeatureClass);
object featureCode = EvaluateNullity(parsedCity.FeatureCode);
object countryCode = EvaluateNullity(parsedCity.CountryCode);
object countryCode2 = EvaluateNullity(parsedCity.CountryCode2);
object population = EvaluateNullity(parsedCity.Population);
object elevation = EvaluateNullity(parsedCity.Elevation);
object modificationDate = EvaluateNullity(parsedCity.ModificationDate);
object admin1Code = EvaluateNullity(parsedCity.Admin1Code);
object admin2Code = EvaluateNullity(parsedCity.Admin2Code);
object admin3Code = EvaluateNullity(parsedCity.Admin3Code);
object admin4Code = EvaluateNullity(parsedCity.Admin4Code);
object gtopo30 = EvaluateNullity(parsedCity.Gtopo30);
object timeZoneName = EvaluateNullity(parsedCity.TimeZoneName);
object version = EvaluateNullity(parsedCity.Version);

cityRow["id"] = id;
cityRow["name"] = name;
cityRow["ascii_name"] = asciiName;
cityRow["alternate_names"] = alternateNames;
cityRow["latitude"] = latitude;
cityRow["longitude"] = longitude;
cityRow["feature_class"] = featureClass;
cityRow["feature_code"] = featureCode;
cityRow["country_code"] = countryCode;
cityRow["country_code2"] = countryCode2;
cityRow["population"] = population;
cityRow["elevation"] = elevation;
cityRow["modification_date"] = modificationDate;
cityRow["admin1code"] = admin1Code;
cityRow["admin2code"] = admin2Code;
cityRow["admin3code"] = admin3Code;
cityRow["admin4code"] = admin4Code;
cityRow["gtopo30"] = gtopo30;
cityRow["timezone_name"] = timeZoneName;
cityRow["version"] = version; 
```

以及 EvaluateNullity 的代码：

```
 public object EvaluateNullity(object entity)
    {
        return entity ?? DBNull.Value;
    } 
```

我从这条错误消息中的理解是，A DateTime 值被放置在上述 int 列之一中。但是，稍后进行快速的条件调试，并在即时窗口中进行检查，发现所有 int 列中都没有放置 DateTime 类型。 [http://desmond.imageshack.us/Himg42/scaled.php?server=42&filename=mod1rm.jpg&res=landing](http://desmond.imageshack.us/Himg42/scaled.php?server=42&filename=mod1rm.jpg&res=landing) [http://desmond.imageshack.us/Himg37/scaled.php?server=37&filename=modyf.jpg&res=landing](http://desmond.imageshack.us/Himg37/scaled.php?server=37&filename=modyf.jpg&res=landing)

我真的很难过。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-12T21:09:20.637

从大卫安德烈斯：

> 仔细检查 cityTable 中定义的列的顺序是否与数据库表本身中的列顺序匹配。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-02-12T21:35:16.573

此错误的一个不明显原因是您必须有一个表示标识列的属性，即使您可以不设置它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-20T12:27:57.397

**对我来说，这是实体框架模型类**和实际表之间的不匹配（忘记从 db 搭建表模型）：

```
//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated from a template.
//
//     Manual changes to this file may cause unexpected behavior in your application.
//     Manual changes to this file will be overwritten if the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

namespace Databases
{
    using System;
    using System.Collections.Generic;

    public partial class FooTable
    {
        public int Id { get; set; }
        public string Name { get; set; }
        // --> Missing the LastUpdated Column.
    }
} 
```

桌子： [![在此处输入图像描述](../Images/55c7b223ea71c1df24d27f59a15b0dba.png)](https://i.stack.imgur.com/xVN5l.png)

# php - 匹配 PHP 正则表达式中的单词以不包含

> ID：11919595
> 
> 赞同：0
> 
> 时间：2012-08-12T03:53:43.370
> 
> 标签：php, preg-match-all

我想`<FONT COLOR="#0000ff">(insert some text here)<\/FONT>`用 preg_match 获取。与此类似的线条会重复并相互接触，所以如果我尝试一些通用`<FONT COLOR="#0000ff">(?<NAME>+)<\/FONT>`的东西，它会将所有这些线条作为一个单元格获取。所以我`[^<]`坚持让它在第一次比遇到的时候停止，从而防止它包含 HTML 并因此成为一个单元格......

但是，我获取的文本有时包含我想要的 HTML。有没有办法使用`[^]`with `</F`？我的负面展望没有奏效，因为它说“是的，最后肯定有一个结束字体标签。最好不要返回任何东西。”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T04:04:37.300

如果我理解正确，您需要一个正则表达式来执行非贪婪匹配。例如，

如果查询字符串是：`<x> abc </x> <x> def </x> <x> hig </x>`

我们的正则表达式是：`/<x>(.*)<\/x>/`

然后执行贪婪匹配，返回的是整个查询字符串，因为它满足 RegEx。为了避免它，我们使用非贪婪匹配。

新的正则表达式：`/<x>(.*?)<\/x>/`

它应该返回所有三个标签`preg_match_all()`

# vba - 如何将一个或多个列对转置到 Excel 中的匹配记录？

> ID：11919597
> 
> 赞同：0
> 
> 时间：2012-08-12T03:53:46.873
> 
> 标签：vba, excel, transpose

给定这样的数据集：

```
Sheet 1

Col1           Col2         Col3
Miss Molly     Extra Data   Extra Data
Mister Rogers  Extra Data   Extra Data
Roy Rogers     Extra Data   Extra Data 
```

和

```
Sheet 2

Col1           Col2           Col3
Miss Molly     Value Name 1   Value Data 1
Miss Molly     Value Name 2   Value Data 2
Mister Rogers  Value Name 1   Value Data 1
Roy Rogers     Value Name 1   Value Data 1
Roy Rogers     Value Name 2   Value Data 2
Roy Rogers     Value Name 3   Value Data 3 
```

我怎样才能得到这样的转置输出？

```
Sheet X (you can make me a new sheet if you like, or add to Sheet 1)

Col1           Col2         Col3        Col4           Col5          Col6          Col7          Col8          Col9
Miss Molly     Extra Data   Extra Data  Value Name 1   Value Data 1  Value Name 2  Value Data 2
Mister Rogers  Extra Data   Extra Data  Value Name 1   Value Data 1  
Roy Rogers     Extra Data   Extra Data  Value Name 1   Value Data 1  Value Name 2  Value Data 2  Value Name 3    Value Data 3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T04:35:42.853

尝试这个

```
Sub MergeData()
    Dim rSrc As Range
    Dim rDst As Range
    Dim rwSrc As Range
    Dim rwDst As Range
    Dim vSrc As Variant, vCopy As Variant
    Dim cl As Range
    Dim i As Long

    Set rDst = ActiveWorkbook.Sheets("Sheet1").UsedRange
    vSrc = ActiveWorkbook.Sheets("Sheet2").UsedRange
    ReDim vCopy(1 To 1, 1 To 2)
    Application.FindFormat.Clear

    For i = 1 To UBound(vSrc, 1)
        If vSrc(i, 1) <> "" Then
            ' Find vSrc(i, 1) in rDst.Column(1)
            Set cl = rDst.Columns(1).Find( _
                What:=vSrc(i, 1), _
                After:=rDst.Cells(1, 1), _
                LookIn:=xlFormulas, _
                LookAt:=xlWhole, _
                SearchOrder:=xlByColumns, _
                SearchDirection:=xlNext, _
                MatchCase:=False, _
                SearchFormat:=False)

            ' Copy data to Dest sheet
            If Not cl Is Nothing Then
                Set cl = cl.End(xlToRight).Offset(0, 1)
                vCopy(1, 1) = vSrc(i, 2)
                vCopy(1, 2) = vSrc(i, 3)
                cl.Resize(1, 2) = vCopy
            Else
                ' Name not found in Dest sheet
            End If
        End If
    Next
End Sub 
```

# jquery - 做CSS3动画的简单方法？

> ID：11919601
> 
> 赞同：1
> 
> 时间：2012-08-12T03:55:13.137
> 
> 标签：jquery, css

我不熟悉 CSS3 动画，但我确实想在我的 web 元素中添加一些 CSS3 动画，你能告诉我一些快速制作 css3 动画的方法吗？例如，我们是否有一些 jquery 插件来做 css3 动画？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T04:01:31.290

![在此处输入图像描述](../Images/b2e39dd15e0e816057f931316b2550e8.png)

Acutally 我知道一些非常好的 CSS3 动画文件，名称是[animate.CSS](http://daneden.me/animate/)，它可以快速帮助您将 css 动画添加到您的元素。您可以使用 jquery addClass 方法动态添加动画，如下所示：

$('#somediv').addClass('animate fadeInRightBig');

然后你就可以用淡入淡出效果使 div 动画化。它支持多达 60 种不同的效果，我相信你能找到你需要的。你可以看看这个由 animate.css 开发的小[游戏演示。](http://www.gbin1.com/technology/democenter/20120812-animate-css/index.html)希望你会喜欢！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T03:59:56.470

无需使用`jquery plugin`，只需参考[CSS3.com 备忘单页面](http://www.css3.com/cheat-sheets/)

它填充了 CSS3 的所有属性以及兼容性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T04:00:52.883

网上有很多工具可以生成包含动画信息的 CSS 片段。生成所需的结果后，将其粘贴到任何有效 CSS 选择器内的 CSS 文件中来尝试。

CSS 动画的好处之一是它们不依赖于 JavaScript，因此 jQuery 插件可能不是一个很好的匹配。

“css3 动画生成器”是一个很好的谷歌搜索词组。我查看了排名靠前的结果，其中一些很有用，例如：

*   [http://www.css3maker.com/index.html](http://www.css3maker.com/index.html)
*   [http://matthewlein.com/ceaser/](http://matthewlein.com/ceaser/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-04T13:01:57.583

试试这个[http://cssanimate.com/](http://cssanimate.com/)，这个工具用于生成 css3 关键帧动画

# clojure - 使用包含类型提示的宏生成 Clojure 代码

> ID：11919602
> 
> 赞同：21
> 
> 时间：2012-08-12T03:55:15.030
> 
> 标签：clojure, macros, metaprogramming, code-generation, type-hinting

我正在尝试生成一些带有类型提示的 Clojure 代码，但是每当我构建一些代码时，类型提示似乎就会消失（编译代码时它们也不起作用）

例如

```
`(let [^BufferedImage b (create-buffered-image)] 
   (.getRGB b 0 0))

=> (clojure.core/let [user/b (user/create-buffered-image)] (.getRGB user/b 0 0)) 
```

我不确定为什么类型提示会消失，但我认为这与读者如何处理元数据有关。

在生成的代码中创建正确类型提示的正确方法是什么？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-12T05:52:07.443

这个问题有两个答案。回答您的具体问题：在您刚刚发布的实际代码中，没有任何问题：它工作得很好。`(set! *print-meta* true)`再试一次，你会看到元数据注释。它只是通常不会打印。

但是，一般来说，这不是从宏做事的正确方法，不久你就会遇到麻烦。请记住，您不需要*宏计算的表单*上的元数据，您需要*宏发出的表单*上的元数据。因此，更准确的解决方案是`with-meta`在您想要将元数据附加到的符号或表单上使用 - 或者，如果它们是用户提供的表单，您通常应该使用`vary-meta`这样您就不会丢弃他们明确添加的元数据。例如，

```
(defmacro with-image [name & body]
  (let [tagged-name (vary-meta name assoc :tag `BufferedImage)
    `(let [~tagged-name (create-buffered-image)
       ~@body)))

(with-image i (.getRGB i 0 0)) 
```

# django - Tastypie 可以处理任意对象数组吗？

> ID：11919605
> 
> 赞同：0
> 
> 时间：2012-08-12T03:56:29.460
> 
> 标签：django, tastypie

我正在开发一个需要 REST API 的项目。我试过活塞，但它不符合我的要求，因为它目前每个模型只允许 1 个处理程序。

Tastypie 似乎是一个更好的选择。但是，我遇到了以下问题。我的文章类是根据排名和创建日期等复杂规则显示的。为了提高服务器性能，我创建了一个虚拟表来记录所有文章的顺序，以便在用户请求时不会执行复杂的排序过程。相反，服务器从虚拟表中检查每篇文章的订单。

使用 Tastypie，需要一个查询集。但是，因为我想使用虚拟表中记录的订单，所以我必须使用更复杂的代码片段来检索数据。

有没有可能我可以返回一组文章对象，而 Tastypie 可以将它们转换为正确的 JSON 格式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T13:12:40.973

您需要的是扩展`queryset`in `Meta`。假设您的文章表应按一些其他数据排序，您的查询集将被定义，例如：

```
Meta:
    queryset = Article.objects.extra(select={
       'ordering': 'SELECT foo FROM bar'
    },).order_by('ordering') 
```

您必须在资源中定义其他字段：

```
ordering = field.IntegerField(attribute="ordering", default=0, readonly=True) 
```

现在应该返回附加字段以及从查询集中检索到的所有其他字段。请注意，如果您`fields`在元数据中定义属性，您还必须在其中添加新字段。

# c++ - boost::asio 中的未经请求的消息使应用程序崩溃，没有 SSL 它可以正常工作，为什么？

> ID：11919612
> 
> 赞同：4
> 
> 时间：2012-08-12T03:58:58.833
> 
> 标签：c++, boost, ssl, openssl, boost-asio

我想通过 SSL 连接发送未经请求的消息。这意味着服务器发送消息不是基于来自客户端的请求，而是因为发生了一些客户端需要知道的事件。

我只是使用来自 boost 站点的 SSL 服务器示例，添加了一个在 10 秒后发送“hello”的计时器，在计时器到期之前一切正常（服务器回显的所有内容），也收到了“hello”，但在那之后应用程序在下次向服务器发送文本时崩溃。

对我来说更奇怪的是，当我禁用 SSL 代码时，使用普通套接字并使用 telnet 执行相同操作，它可以正常工作并继续正常工作！！！

我现在第二次遇到这个问题，我真的不知道为什么会发生这种情况。

以下是我为演示问题而更改的全部来源。在没有 SSL 定义并使用 telnet 的情况下编译它，一切正常，定义 SSL 并使用 openssl，或者来自 boost 网站的客户端 SSL 示例，事情就崩溃了。

```
#include <cstdlib>
#include <iostream>
#include <boost/bind.hpp>
#include <boost/asio.hpp>
#include <boost/asio/ssl.hpp>

//#define SSL

typedef boost::asio::ssl::stream<boost::asio::ip::tcp::socket> ssl_socket;

class session
{
public:
  session(boost::asio::io_service& io_service,
      boost::asio::ssl::context& context)
#ifdef SSL  
    : socket_(io_service, context)
#else
    : socket_(io_service)

#endif    
  {
  }

  ssl_socket::lowest_layer_type& socket()
  {
    return socket_.lowest_layer();
  }

  void start()
  {
#ifdef SSL      
    socket_.async_handshake(boost::asio::ssl::stream_base::server,
        boost::bind(&session::handle_handshake, this,
          boost::asio::placeholders::error));
#else
      socket_.async_read_some(boost::asio::buffer(data_, max_length),
          boost::bind(&session::handle_read, this,
            boost::asio::placeholders::error,
            boost::asio::placeholders::bytes_transferred));

      boost::shared_ptr< boost::asio::deadline_timer > timer(new     boost::asio::deadline_timer( socket_.get_io_service() ));
      timer->expires_from_now( boost::posix_time::seconds( 10 ) );
      timer->async_wait( boost::bind( &session::SayHello, this, _1, timer ) );

#endif    
  }

  void handle_handshake(const boost::system::error_code& error)
  {
    if (!error)
    {
      socket_.async_read_some(boost::asio::buffer(data_, max_length),
          boost::bind(&session::handle_read, this,
            boost::asio::placeholders::error,
            boost::asio::placeholders::bytes_transferred));

      boost::shared_ptr< boost::asio::deadline_timer > timer(new     boost::asio::deadline_timer( socket_.get_io_service() ));
      timer->expires_from_now( boost::posix_time::seconds( 10 ) );
      timer->async_wait( boost::bind( &session::SayHello, this, _1, timer ) );

    }
    else
    {
      delete this;
    }
  }

  void SayHello(const boost::system::error_code& error, boost::shared_ptr<     boost::asio::deadline_timer > timer) {
      std::string hello = "hello";

        boost::asio::async_write(socket_,
          boost::asio::buffer(hello, hello.length()),
          boost::bind(&session::handle_write, this,
            boost::asio::placeholders::error));

      timer->expires_from_now( boost::posix_time::seconds( 10 ) );
      timer->async_wait( boost::bind( &session::SayHello, this, _1, timer ) );

  }

  void handle_read(const boost::system::error_code& error,
      size_t bytes_transferred)
  {
    if (!error)
    {
      boost::asio::async_write(socket_,
          boost::asio::buffer(data_, bytes_transferred),
          boost::bind(&session::handle_write, this,
            boost::asio::placeholders::error));
    }
    else
    {
      std::cout << "session::handle_read() -> Delete, ErrorCode: "<< error.value() <<     std::endl;
      delete this;
    }
  }

  void handle_write(const boost::system::error_code& error)
  {
    if (!error)
    {
      socket_.async_read_some(boost::asio::buffer(data_, max_length),
          boost::bind(&session::handle_read, this,
            boost::asio::placeholders::error,
            boost::asio::placeholders::bytes_transferred));
    }
    else
    {
      std::cout << "session::handle_write() -> Delete, ErrorCode: "<< error.value() <<     std::endl;
      delete this;
    }
  }

private:
#ifdef SSL    
  ssl_socket socket_;
#else
  boost::asio::ip::tcp::socket socket_;
#endif  
  enum { max_length = 1024 };
  char data_[max_length];
};

class server
{
public:
  server(boost::asio::io_service& io_service, unsigned short port)
    : io_service_(io_service),
      acceptor_(io_service,
          boost::asio::ip::tcp::endpoint(boost::asio::ip::tcp::v4(), port)),
      context_(boost::asio::ssl::context::sslv23)
  {
#ifdef SSL        
    context_.set_options(
        boost::asio::ssl::context::default_workarounds
        | boost::asio::ssl::context::no_sslv2
        | boost::asio::ssl::context::single_dh_use);
    context_.set_password_callback(boost::bind(&server::get_password, this));
    context_.use_certificate_chain_file("server.crt");
    context_.use_private_key_file("server.key", boost::asio::ssl::context::pem);
    context_.use_tmp_dh_file("dh512.pem");
#endif
    start_accept();
  }

  std::string get_password() const
  {
    return "test";
  }

  void start_accept()
  {
    session* new_session = new session(io_service_, context_);
    acceptor_.async_accept(new_session->socket(),
        boost::bind(&server::handle_accept, this, new_session,
          boost::asio::placeholders::error));
  }

  void handle_accept(session* new_session,
      const boost::system::error_code& error)
  {
    if (!error)
    {
      new_session->start();
    }
    else
    {
      delete new_session;
    }

    start_accept();
  }

private:
  boost::asio::io_service& io_service_;
  boost::asio::ip::tcp::acceptor acceptor_;
  boost::asio::ssl::context context_;
};

int main(int argc, char* argv[])
{
  try
  {
    boost::asio::io_service io_service;

    using namespace std; // For atoi.
    server s(io_service, 7777 /*atoi(argv[1])*/);

    io_service.run();
  }
  catch (std::exception& e)
  {
    std::cerr << "Exception: " << e.what() << "\n";
  }

  return 0;
} 
```

我使用 boost 1.49 和 OpenSSL 1.0.0i-fips 2012 年 4 月 19 日。我尝试尽可能多地调查这个问题，上次我遇到这个问题时（几个月前），我收到了一个错误号，我可以追踪到此错误消息：`error: decryption failed or bad record mac`。

但我不知道出了什么问题以及如何解决这个问题，欢迎提出任何建议。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-12T11:23:01.693

问题是多个并发异步读写。*即使使用原始套接字（ glibc 检测到双重释放或损坏*），我也能够使该程序崩溃。让我们看看会话开始后会发生什么（在大括号中，我放置了并发计划异步读取和写入的数量）：

1.  调度异步读取 (1, 0)

2.  （假设数据来了）`handle_read`被执行，它调度异步写入 (0, 1)

3.  (数据被写入)`handle_write`被执行，它调度异步读取 (1, 0)

    现在，它可以无限循环超过 1\. - 3\. 没有任何问题。但随后计时器到期......

4.  （假设没有新数据来自客户端，所以还有一个异步读调度）定时器到期，所以`SayHello`执行，它调度异步写，仍然没有问题 (1, 1)

5.  （数据`SayHello`已写入，但客户端仍然没有新数据）`handle_write`被执行，它调度异步读取 (2, 0)

    现在，我们完成了。如果来自客户端的任何新数据到来，其中一部分可以被一个异步读取读取，另一部分可以被另一个读取。对于原始套接字，它甚至似乎可以工作（尽管可能有 2 个并发写入计划，因此客户端的回显可能看起来很复杂）。对于 SSL，这可能会破坏传入的数据流，这可能就是发生的情况。

如何修复它：

1.  `strand`在这种情况下将无济于事（它不是并发处理程序执行，而是预定的异步读取和写入）。
2.  `SayHello`如果异步写入处理程序不执行任何操作（那时不会有并发读取，但仍可能发生并发写入），这还不够。
3.  如果你真的想要两种不同的写入（回显和计时器），你必须实现某种消息队列来写入，以避免混合来自回显和计时器的写入。
4.  一般评论：这是一个简单的例子，但使用`shared_ptr`而不是`delete this`使用 boost::asio 处理内存分配的更好方法。它将防止丢失错误导致内存泄漏。

# python - 如何在 Spyder 中更改 Python 的路径？

> ID：11919615
> 
> 赞同：25
> 
> 时间：2012-08-12T03:59:32.033
> 
> 标签：python, ide, path, spyder

我正在使用 Debian。我安装了 Python 3.2.3。Python 3 的路径是 /usr/bin/python3。如何在 Spyder 中更改它？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-09-10T15:52:44.893

按`CTRL+SHIFT+ALT+P`打开首选项窗口。在此窗口中，选择`Console`左侧的项目，然后选择`Advanced Settings`选项卡。Python 可执行文件的路径就在那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-06-16T15:22:32.953

使用 Anaconda3 v. 4.10.1 附带的 Spyder v. 4.2.5，我在“*首选项”*菜单的左侧看不到“*控制台*” （即工具>首选项）。在此版本中，您可以更改左侧*Python 解释器下的**python.exe*文件的路径。

 ***[![在此处输入图像描述](../Images/e4fcd06d392909a3d57567ae933be94d.png)](https://i.stack.imgur.com/3pecp.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-07T04:10:10.533

如果您无法更改工作目录，这很简单。按 CTRL+SHIFT+ALT+P 打开“首选项”窗口，然后转到“运行”，然后查看工作目录选项，最后按“当前工作目录”选项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-01T09:41:43.390

执行以下命令：`%cd"P:\Python"`***

# python - Python：单元测试模块和相关导入

> ID：11919620
> 
> 赞同：4
> 
> 时间：2012-08-12T04:00:25.057
> 
> 标签：python, unit-testing, python-packaging

当前具有以下文件层次结构：

```
\package
    __init__.py
    run_everything.py

    \subpackage
        __init__.py
        work.py
        work1.py
        work2.py

    \test
        __init__.py
        test_work.py
        test_work1.py 
```

我的第一个问题是关于相对进口的。假设在 \subpackage\work.py 中有一个名为 custom_function() 的函数，我想在 test_work.py 中测试该函数。出于某种原因，我无法弄清楚如何从一个模块导入到另一个模块。尝试`from .. subpackage.work1 import custom_function()`似乎不起作用，并产生错误`Attempted relative import in non-package`有没有办法解决这个问题？

2) 我想用一个函数从 run_everything.py 运行所有测试文件，会在每个 test_work*.py 文件中添加一个 suite() 函数，它将每个 unit_testing 类添加到 suite.addTest(unittest.makeSuite(TestClass)) ，最后将它们导入顶级run_everything.py是Python2.7中最*常规的方式吗？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T19:52:12.367

这是一个 hack*使用以下
命令将“子包”和“测试”的路径插入到 run_everything 中的 python 路径：

```
    导入系统
    sys.path.insert(0, '/path/to/package/subpackage')
    sys.path.insert(0, '/path/to/package/test')
```

然后，您可以在 run_everything 中使用 vanilla 导入来导入所有文件：

```
    导入工作，工作1，工作2
    导入 test_work, test_work1

```

*这不会永久影响您的 PYTHONPATH。*不要忘记对我的硬编码投反对票:(

# ios - iOS：将 Exclusive Touch 设置为视图中的所有按钮

> ID：11919624
> 
> 赞同：1
> 
> 时间：2012-08-12T04:00:35.383
> 
> 标签：ios, uibutton, touch

我的应用程序在一个窗口中有很多按钮，我想将 Exclusive Touch 全部设置在一起。你对此有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-29T11:07:35.913

有一种方法可以为您的应用程序中的所有按钮设置独占触摸，可能会有所帮助。

```
#import </usr/include/objc/objc-class.h>

static IMP gOringinalWillMoveToSuperview = nil;

static id newMoveToSuperviewPlusSettingExclusiveTouch(id self,SEL selector,...)
{
    va_list arg_list;
    va_start( arg_list,selector);
    gOringinalWillMoveToSuperview(self,selector,arg_list);
    [self setExclusiveTouch:YES];
    return nil;
}

-(void)addSettingExclusiveTouchToAllUIViewMethodWillMoveToSuperview
{
    gOringinalWillMoveToSuperview = class_getMethodImplementation([UIButton class], @selector(willMoveToSuperview:));
    class_replaceMethod([UIButton class], @selector(willMoveToSuperview:), &newMoveToSuperviewPlusSettingExclusiveTouch, "v@:");
} 
```

如果你不明白这一点，你可以参考[this](http://cocoadev.com/wiki/MethodSwizzling)和[this](https://stackoverflow.com/questions/1618474/intercept-method-call-in-objective-c)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-20T02:59:08.757

```
-(void)setExclusiveTouchForButtons:(UIView *)myView
{
    for (UIView * v in [myView subviews]) {
        if([v isKindOfClass:[UIButton class]])
            [((UIButton *)v) setExclusiveTouch:YES];
        else if ([v isKindOfClass:[UIView class]]){
            [self setExclusiveTouchForButtons:v];
        }
    }
} 
```

然后在 viewDidAppear 调用这个函数

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-12T04:43:54.763

您是否只是在寻找一种简单的方法来一次设置它们？

如果您有一个数组中的所有按钮（例如，它们都连接到同一个 IBOutletCollection），您可以使用键值编码来设置数组的 ExclusiveTouch 属性：

```
[buttonArray setValue:[NSNumber numberWithBool:YES] forKey:@"exclusiveTouch"]; 
```

然后 NSArray 将对数组中的每个项目调用相同的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-12T13:39:00.223

我刚刚找到了一个答案：

```
#pragma mark Set Buttons Exclusive Touch Yes
-(void)setExclusiveTouchForButtons:(UIView *)myView
{
    for (UIView * button in [myView subviews]) {
        if([button isKindOfClass:[UIButton class]])
            [((UIButton *)button) setExclusiveTouch:YES];
    }
} 
```

[资源](http://ioswithshwet.blogspot.com/2011/10/button-multi-touch-trick.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-12T04:50:16.300

如果这些按钮都在同一个视图中，您可以遍历视图的子视图，测试特定的子视图是否是一个按钮（或者如果您有一组，则测试一个标签）并在每个上设置 ExclusiveTouch。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-09-02T15:58:23.317

如果您想在整个应用程序中为所有 UIButtons 设置 ExclusiveTouch，那么**swizzling**将是您的完美解决方案。

这个答案很好地解释了这种方式：[https](https://stackoverflow.com/a/24534814/976246) ://stackoverflow.com/a/24534814/976246 ，它对我来说非常有效。

还可以通过这篇文章了解如何[***将这种 (http://nshipster.com/method-swizzling/)***](http://nshipster.com/method-swizzling/)技术用于各种目的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-13T13:28:23.550

`[button setExclusiveTouch:YES];`如果您要务实地添加按钮，请在添加到其超级视图之前向每个按钮的按钮发送消息。否则，如果您使用的是 xib，则必须将相同的消息发送到 viewDidLoad 或 loadView 中的按钮。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-07-03T07:04:15.513

这是 swift 中的一些代码，它将为您的视图控制器视图中的所有按钮设置独占触摸

```
for button in self.view.subviews {
    if(button.isKindOfClass(UIButton)){
        (button as! UIButton).exclusiveTouch = true
    }
} 
```

# php - Remote Login With Curl

> ID：11919632
> 
> 赞同：2
> 
> 时间：2012-08-12T04:01:52.457
> 
> 标签：php, curl, login

I making a bot for remote server login system.For this,I coding something,

**sample.php**

```
<?php
$EMAIL      = "***";
$PASSWORD   = "***";
function cURL($url, $header=NULL, $cookie, $p=NULL)
{
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_HEADER, $header);
    curl_setopt($ch, CURLOPT_NOBODY, $header);
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
    curl_setopt($ch, CURLOPT_COOKIE, $cookie);
    curl_setopt($ch, CURLOPT_USERAGENT, $_SERVER['HTTP_USER_AGENT']);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
    if ($p) {
        curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "POST");
        curl_setopt($ch, CURLOPT_POST, 1);
        curl_setopt($ch, CURLOPT_POSTFIELDS, $p);
    }
    $result = curl_exec($ch);
    if ($result) {
        return $result;
    } else {
        return curl_error($ch);
    }
    curl_close($ch);
}
$a = cURL("http://forum.donanimhaber.com/login2.asp",true,null,"Login=$EMAIL&password=$PASSWORD");
preg_match('%Set-Cookie: ([^;]+);%',$a,$b);
$c = cURL("http://forum.donanimhaber.com/login2.asp",true,$b[1],"Login=$EMAIL&password=$PASSWORD");
preg_match_all('%Set-Cookie: ([^;]+);%',$c,$d);
for($i=0;$i<count($d[0]);$i++)
    $cookie.=$d[1][$i].";";
echo cURL("forum.donanimhaber.com",null,$cookie,null);
?> 
```

I use this code www.myhost.com/sample.php...Login is successfull.But I am not redirecting forum.donanimhaber.com...In forum.donanimhaber.com,When I click on any link my browser redirect myhost.com/link.php and appear empty page.Normally required to be forum.donanimhaber.com/link.php...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T04:17:10.560

The code shall generate the exact HTML of the page and output it. All the links in the that page will be relative links. Like, `<a href="/page.php>...</a>`. SO when you click you are actually getting redirected to `mysite.com/page.php`. And as it might be your settings, you are getting 404 not found and a blank page.

To overcome this you should either replace all the links to redirect to forum. Or use `.htaccess` toforce redrect all links except your main page.

```
RewriteCond %{HTTP_HOST} ^website.com
RewriteRule (.*) http://forum.xyz.com/$1 [R=301,L]

# do not do any rewriting to this file
RewriteRule index\.php$ - [L] 
```

# actionscript-3 - 为什么我的参数计数与简单的电影剪辑创建不匹配？

> ID：11919634
> 
> 赞同：0
> 
> 时间：2012-08-12T04:02:15.913
> 
> 标签：actionscript-3, flash, movieclip

我的文档类中有这个：

```
var newButton:silverButton = new silverButton("hello"); 
```

这是silverButton：

```
package  {

    import flash.display.MovieClip;

    public class silverButton extends MovieClip {

        public function silverButton(hello:String) {
            btnTxt.text = hello;
        }
    }

} 
```

我得到的错误：ArgumentError：错误 #1063：silverButton() 上的参数计数不匹配。预期 1，得到 0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T04:41:04.517

您共享的代码不能反映您的问题，因为上面应该可以正常工作......

您是否将上述课程链接到图书馆项目？在这种情况下，它可能根本无法获得构造函数参数。您必须使用其他功能进行设置。

如果要使用 & 初始化同一个类而不使用默认参数，您也可以尝试将参数设置为可选参数。就像是 ：

```
public function silverButton(hello:String = "") {

       ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T06:27:44.540

可能是您在时间线上（在 Flash IDE 中）放置了 silverButton 的实例。

此外，您可能需要考虑使用大写字母开头的所有类命名，并使用小写字母命名实例名称，这是流行的命名约定。

```
package  {

    import flash.display.MovieClip;

    public class SilverButton extends MovieClip {

        public function SilverButton(hello:String) {
            btnTxt.text = hello;
        }
    }

}

var newButton:silverButton = new SilverButton("hello"); 
```

# ios - initWithFrame：HGKOptionPanel 库中的方法

> ID：11919638
> 
> 赞同：0
> 
> 时间：2012-08-12T04:03:49.700
> 
> 标签：ios, cocoa-touch

Jon Arrien有一个名为[HGKOptionPane的 ios 库。](https://github.com/Hegaka/HGKOptionPanel)它是一个显示/隐藏下拉面板。当我在我的演示应用程序中实现它时，我注意到这个 UIView 框架与 UIButton 链接。我确定它与下面的代码有关，我不理解代码，如果您能解释一下，我将不胜感激。最重要的是，如何`UIButton`与 UIView 或其`Option Panel`自身链接。

HGKOptionPanel.m 中的 2 个方法：

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
    }
    return self;
}

- (void)drawRect:(CGRect)rect{
    [super drawRect:rect];
    isExpanded = YES;
} 
```

照片： ![在此处输入图像描述](../Images/d6870c46cee963a7c6be11210e8ab8a3.png)

`Option Panel`是`UIView`带有黑色背景颜色的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T05:12:48.433

UIButton 是一个未通过代码链接的 IBOutlet。
它实际上都保存在这里的xib文件中：
[https ://raw.github.com/Hegaka/HGKOptionPanel/master/HGKOptionPanel/HGKOptionPanel/en.lproj/MainWindow.xib](https://raw.github.com/Hegaka/HGKOptionPanel/master/HGKOptionPanel/HGKOptionPanel/en.lproj/MainWindow.xib)

# javascript - 火狐刷新

> ID：11919647
> 
> 赞同：1
> 
> 时间：2012-08-12T04:05:32.633
> 
> 标签：javascript

我有一个带有以下脚本的 HTML：

```
<script type="text/javascript">
    function doRefreshWithInterval() {
        setTimeout("doRefresh()", 60000 );
    }

    function doRefresh() {
        window.location.reload(true);
    }

    if (window.location.href.indexOf("Dashboard.jspa") >= 0) {
        doRefreshWithInterval();
    }
</script> 
```

定期刷新页面。问题是当我向下滚动页面时（它是一个长页面），并且在某些浏览器（特别是 Firefox）上发生刷新时，浏览器会转到页面顶部而不是我所在的位置。有什么方法可以防止这种情况，并让 Firefox 在刷新后向下滚动到最后一个位置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T04:09:23.313

我想到的一个解决方案是：

1.  刷新前，获取页面的垂直位置
2.  将该号码存储在 cookie 中
3.  刷新
4.  在页面加载时，查看是否有页面位置的 cookie
5.  通过脚本滚动到该位置

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T04:12:42.880

实际上，您只需要对现有代码进行微小的更改。更改`document.location.reload(true);`为`document.location.reload();`。

使用`true`您强制浏览器再次从服务器获取页面，这意味着您在其上的位置将丢失。当您删除 时`true`，浏览器会从缓存中加载页面，保留您在页面上的位置。

但是，如果您自动重新加载页面的原因是为了获取服务器可能已修改的页面的最新版本，这可能没有帮助。

在 Firefox 12.0 中使用 Firebug 进行测试。

# scorm - IMS 到 SCORM 的转换

> ID：11919649
> 
> 赞同：1
> 
> 时间：2012-08-12T04:05:47.080
> 
> 标签：scorm, scorm2004, scorm1.2

我必须开发一种工具，用于从一个电子学习标准内容包自动转换到另一个，到目前为止，我已经考虑过 IMS 和 SCORM，但我并不完全理解开发自动转换工具的最佳理由是什么IMS 到 SCORM，反之亦然。我的意思是可以从这种工具中获得什么好处？这就是我在一篇技术论文中得到的原因。任何人都可以解释和澄清这一点，或者告诉我开发这样一个工具的一些充分理由：

> 我们可以推断出格式之间自动转换的效用。这种转换将允许在高度自动化的学习平台之间进行交互。” - 电子学习内容自动转换 作者 Guiterrez、Jose Maria 等人。

**JavaScript（SCORM 包）**

```
<script type="text/javascript">
<![CDATA[
var numQuestions = 2;
var rawScore = 0;
var actualScore = 0;
var question0;
var question1;
var key0 = 0;
var key1 = 1;
function getAnswer()
        {
            doLMSSetValue("cmi.interactions.0.id","key0b8");
            doLMSSetValue("cmi.interactions.0.type","choice");
            doLMSSetValue("cmi.interactions.0.correct_responses.0.pattern",
                          "0");

            for (var i=0; i < 2; i++)
            {
               if (document.getElementById("quizForm8").key0b8[i].checked)
               {
                  question0 = document.getElementById("quizForm8").key0b8[i].value;
                  doLMSSetValue("cmi.interactions.0.student_response",question0);
                  break;
               }
            }

            doLMSSetValue("cmi.interactions.1.id","key1b8");
            doLMSSetValue("cmi.interactions.1.type","choice");
            doLMSSetValue("cmi.interactions.1.correct_responses.0.pattern",
                          "1");

            for (var i=0; i < 2; i++)
            {
               if (document.getElementById("quizForm8").key1b8[i].checked)
               {
                  question1 = document.getElementById("quizForm8").key1b8[i].value;
                  doLMSSetValue("cmi.interactions.1.student_response",question1);
                  break;
               }
            }

           }
        function calcRawScore(){

            if (question0 == key0)
            {
               doLMSSetValue("cmi.interactions.0.result","correct");
               rawScore++;
            }
            else
            {
               doLMSSetValue("cmi.interactions.0.result","wrong");
            }
            if (question1 == key1)
            {
               doLMSSetValue("cmi.interactions.1.result","correct");
               rawScore++;
            }
            else
            {
               doLMSSetValue("cmi.interactions.1.result","wrong");
            }
        }
        function calcScore2()
        {
           computeTime();  // the student has stopped here.
           document.getElementById("quizForm8").submitB.disabled = true;
           getAnswer();
           calcRawScore();
           actualScore = Math.round(rawScore / numQuestions * 100);
        alert("Your score is " + actualScore + "%")   
           doLMSSetValue( "cmi.core.score.raw", actualScore+"" );
           var mode = doLMSGetValue( "cmi.core.lesson_mode" );
               if ( mode != "review"  &&  mode != "browse" ){
                 if ( actualScore < 50 )
                 {
                   doLMSSetValue( "cmi.core.lesson_status", "failed" );
                 }
                 else 
                 {
                   doLMSSetValue( "cmi.core.lesson_status", "passed" );
                 }
                 doLMSSetValue( "cmi.core.exit", "" );
                 } 
         exitPageStatus = true;
         doLMSCommit();
         doLMSFinish();
        }
]]>
</script> 
```

**HTML**

```
<?xml version="1.0" encoding="utf-8"?>
<html xmlns="http://www.w3.org/1999/xhtml">
 <!-- Other Code -->
      <body>
        <div id="outer">
          <div class="QuizTestIdevice" id="id8">
            <script src="calculate.js" type="text/javascript"></script>
            <form name="quizForm8" id="quizForm8" action="javascript:calcScore2();">
              <div class="iDevice_inner">
                <div class="passrate" value="50"></div>
                <div class="question">
                  <div id="taquestion0b8">
                    1&gt; TEXT FOR QUESTION 1.
                  </div><br />
                  True<input type="radio" name="key0b8" value="0" id="taoptionAnswer0q0b8" /> 
                  False<input type="radio" name="key0b8" value="1" id="taoptionAnswer1q0b8" />
                </div><br />
                <div class="question">
                  <div id="taquestion1b8">
                    2&gt; TEXT FOR QUESTION 2.
                  </div><br />
                  True<input type="radio" name="key1b8" value="0" id="taoptionAnswer0q1b8" /> 
                  False<input type="radio" name="key1b8" value="1" id="taoptionAnswer1q1b8" />
                </div><br />
                <input type="submit" name="submitB" value="SUBMIT ANSWERS" />
              </div>
            </form>
          </div>
        </div>
      </body>
    </html> 
```

**IMS 包的 Javascript 和 HTML**

```
<html>
<body>
<div class="QuizTestIdevice" id="id8">
<script type="text/javascript">
<!-- //<![CDATA[
var numQuestions = 4;
var rawScore = 0;
var actualScore = 0;
var question0;
var question1;
var key0 = 0;
var key1 = 1;
var key2 = 0;
var key3 = 0;
function getAnswer()
        {
            for (var i=0; i < 2; i++)
            {
               if (document.getElementById("quizForm8").key0b8[i].checked)
               {
                  question0 = document.getElementById("quizForm8").key0b8[i].value;
                  break;
               }
            }

            for (var i=0; i < 2; i++)
            {
               if (document.getElementById("quizForm8").key1b8[i].checked)
               {
                  question1 = document.getElementById("quizForm8").key1b8[i].value;
                  break;
               }
            }
            }
        function calcRawScore(){

            if (question0 == key0)
            {
               rawScore++;
            }
            if (question1 == key1)
            {
               rawScore++;
            }
        }

        function calcScore2()
        {
            getAnswer();

            calcRawScore();
            actualScore =  Math.round(rawScore / numQuestions * 100);
            document.getElementById("quizForm8").submitB.disabled = true;
            alert("Your score is " + actualScore + "%")

        }
//]]>    -->
    </script>
<form name="quizForm8" id="quizForm8" action="javascript:calcScore2();">
<div class="iDevice emphasis1">
<img alt="" class="iDevice_icon" src="icon_question.gif" />
<span class="iDeviceTitle">SCORM Quiz</span>
<div class="iDevice_inner">
<div class="passrate" value="50"></div>
<div class="question">
<div id="taquestion0b8" class="block" style="display:block">1&gt; QUESTION 1

</div><br/>
<table><tr><td><input type="radio" name="key0b8" value="0" />
</td><td>
<div id="taoptionAnswer0q0b8" class="block" style="display:block">True

</div></td></tr>
<tr><td><input type="radio" name="key0b8" value="1" />
</td><td>
<div id="taoptionAnswer1q0b8" class="block" style="display:block">False
</div>
<br/><input type="submit" name="submitB" value="SUBMIT ANSWERS"/>
</form>
</body>
</html> 
```

感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T15:10:35.790

当我创建手工编码的课程时，我会尽量保持中立。eLearning 标准，例如 SCORM，通常使用我们所说的“包装器”，它基本上处理所有基本错误和连接过程。

当您从一个版本转到另一个版本时，例如 SCORM 1.2 到 SCORM 2004 第 4 版，逻辑并没有真正改变，它得到了改进，但所有以前的元素通常都在这里。因此，您基本上制作了一个具有相同函数名称的新包装器，并且所有基础知识都已经在工作。而且您的包装器并没有根本的不同，它只是替换了“cmi.xxx”。

要从一个标准转到另一个标准，如果基本原理相同，您可以使用另一个包装器，它会起作用。大多数简单的课程通常都是这种情况，一旦你开始进行互动、练习等，它就会变得很棘手。为了避免那些糟糕的时刻，请将所有交互逻辑与课程分开。

现在，您的课程可能不是由软件手动编码和生成的吗？在这种情况下，您需要分析“幕后”是什么，试图弄清楚何时以及如何用其他标准处理每个部分的方式替换它。

我认为转换器是非常不安全的事情，它将非常依赖于课程并且不能同样应用于所有课程，除非您找到一种方法来简单地用包装器替换它的交互。但是如果你能提供一个可以生成兼容所有标准的课程的工具，你已经让很多用户满意了！

现在回到您的问题，我认为您需要了解**什么是电子学习标准**：

*   **要在浏览器中显示的**文件。****
***   一个**清单**文件，用于描述您提供给 LMS 的内容。*   课程与其 LMS 之间的一种**通信方式。****

 **这些文件通常是 HTML 页面和周围的一切。清单是一个通常用 XML 编写的文件。在大多数情况下，通信是使用 Javascript 设置的。

*   **IMS 是清单级别的标准，它描述了 .xml 文件中应该包含的内容。**
*   **SCORM 是一个标准，它考虑了列表的最后两个项目。**（基于 AICC，它定义了课程和 LMS 需要遵守的内容。）

现在，如果您需要创建一个**工具来转换 XML 文件**，我认为任何技术都可以做到，因为它在技术上只是纯文本。**

# javascript - 仅在悬停时显示 Bootstrap Carousel 导航

> ID：11919656
> 
> 赞同：28
> 
> 时间：2012-08-12T04:07:40.057
> 
> 标签：javascript, jquery, twitter-bootstrap

我使用的是 Bootstrap 的 Carousel，在[这里](http://twitter.github.com/bootstrap/javascript.html#carousel)找到。这是一个很棒的脚本，不幸的是，我希望它能够让导航箭头消失并且只出现在悬停时。这可能吗？我将如何实施？

感谢大家的帮助！

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-08-12T09:39:15.260

你只需要一点 CSS

```
.carousel .carousel-control { visibility: hidden; }
.carousel:hover .carousel-control { visibility: visible; } 
```

[演示（jsfiddle）](http://jsfiddle.net/Sherbrow/5Uxxx/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-14T17:07:14.483

摆脱那些讨厌的渐变也很好，添加它也可以：

```
.carousel-control.left, .carousel-control.right {
  background: none !important;
  filter: progid: none !important;
  outline: 0;
}
.carousel .carousel-control {
  visibility: hidden;
}
.carousel:hover .carousel-control {
  visibility: visible;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-01T12:08:08.627

这是与 Bootstrap 5 一起使用的@Sherbrow 回答的后续内容。它还包括淡入和箭头动画。

```
.carousel .carousel-control-prev,
.carousel .carousel-control-next
{
    visibility: hidden;
    opacity: 1;
}

.carousel:hover .carousel-control-prev,
.carousel:hover .carousel-control-next
{
    visibility: visible;
    animation-duration: 1s;
    transition-timing-function: linear;
}

.carousel:hover .carousel-control-prev
{
    animation-name: FadeInPrev;
}

.carousel:hover .carousel-control-next
{
    animation-name: FadeInNext;
}

@keyframes FadeInPrev
{
    0%
    {
        opacity: 0;
        padding-left: 40px;
    }
    100%
    {
        opacity: 1;
        padding-left: 0px;
    }
}

@keyframes FadeInNext
{
    0%
    {
        opacity: 0;
        padding-right: 40px;
    }
    100%
    {
        opacity: 1;
        padding-right: 0px;
    }
} 
```

# python - 如何使用 distutils 将文件复制到用户主目录或当前目录？

> ID：11919659
> 
> 赞同：0
> 
> 时间：2012-08-12T04:08:07.643
> 
> 标签：python, distutils

我正在编写一个 python 包（svnplot）。我想在用户主目录或当前目录中复制一个shell脚本或批处理文件，以便用户可以方便地执行包中的命令。

目前要执行 svnplot 命令，用户必须调用类似于

蟒蛇/svnplot/svnplot.py

如果我在用户主目录中复制 shell 脚本或批处理文件，那么用户只需调用

svnplot.sh

但是，我无法弄清楚如何将文件复制到用户主目录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T04:37:36.637

查看[distutils`scripts`选项](https://stackoverflow.com/q/251488/4279)或[`entry_points/console_scripts`setuptools](http://guide.python-distribute.org/creation.html)。

如果只有一个主命令，那么您可以使用[PyInstaller](http://www.pyinstaller.org/)、 py2exe 将您的包打包成一个可执行文件。在简单的情况下，压缩包并执行它可能就足够了。

# java - 三角画法

> ID：11919667
> 
> 赞同：20
> 
> 时间：2012-08-12T04:09:23.330
> 
> 标签：java, swing, awt, graphics2d

我无法使用`draw(Graphics g)`Java 中的方法绘制三角形。我可以像这样画一个矩形：

```
public void draw(Graphics g) {
    g.setColor(colorFill);
    g.fillRect(p.x, p.y, width, height);
    g.setColor(colorBorder);
    g.drawRect(p.x, p.y, width, height);
    drawHandles(g); 
```

其中 p 代表“形状的左上角”。我将如何以相同的方式绘制三角形？

有人能给我一个标准三角形的例子吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-12T04:30:54.293

Graphics 和 Graphics2D 中都没有 drawTriangle 方法。你需要自己做。您可以使用该方法绘制三条线`drawLine`或使用以下方法之一：

*   [drawPolygon](http://docs.oracle.com/javase/7/docs/api/java/awt/Graphics.html#drawPolygon%28int%5B%5D,%20int%5B%5D,%20int%29) (int[] xPoints, int[] yPoints, int nPoints)
*   [drawPolygon](http://docs.oracle.com/javase/7/docs/api/java/awt/Graphics.html#drawPolygon%28java.awt.Polygon%29) ([多边形](http://docs.oracle.com/javase/7/docs/api/java/awt/Polygon.html)p)
*   [drawPolyline](http://docs.oracle.com/javase/7/docs/api/java/awt/Graphics.html#drawPolyline%28int%5B%5D,%20int%5B%5D,%20int%29) (int[] xPoints, int[] yPoints, int nPoints)

这些方法适用于多边形。您可以将前缀更改为`draw`要`fill`填充由点集定义的多边形时。我插入了文档链接。看看以了解如何使用它们。

还有[GeneralPath](http://docs.oracle.com/javase/7/docs/api/java/awt/geom/GeneralPath.html)类。它可以与能够绘制[Shapes](http://docs.oracle.com/javase/7/docs/api/java/awt/Shape.html)的 Graphics2D 一起使用。看一看：

*   [http://docs.oracle.com/javase/tutorial/2d/geometry/arbitrary.html](http://docs.oracle.com/javase/tutorial/2d/geometry/arbitrary.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-12T04:31:01.273

您应该尝试使用`Shape`s API。

看看[JPanel repaint from another class](https://stackoverflow.com/questions/11917938/jpanel-repaint-from-another-class#comment15869588_11917938)这都是关于绘制三角形的，看看`getPath`方法中的一些想法

您还应该阅读[GeneralPath](http://docs.oracle.com/javase/7/docs/api/java/awt/geom/GeneralPath.html) & [Drawing Arbitrary Shapes](http://docs.oracle.com/javase/tutorial/2d/geometry/arbitrary.html)。

这种方法很容易将[AffineTransformation](http://docs.oracle.com/javase/7/docs/api/java/awt/geom/AffineTransform.html)应用于

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-12-04T03:18:32.770

使用直线算法将 A 点与 C 点连接起来，在外循环中，让 A 点以相同的直线算法和漫游坐标向 B 点游荡，重复绘制该直线。您可能还可以包含 az delta ，它也会迭代地递增。对于线算法，只需计算每个坐标的增量变化的两个或三个斜率，并在其他两个按比例更改后将一个斜率设置为1，使其低于1。这对于绘制连接的网格粒子之间的封闭几何区域非常重要。看一下 Qt Elastic Nodes 示例，现在想象在将其拉伸到骨架上之后在节点之间绘制三角形。 [只要它保持在线](http://www.filedropper.com/triangle)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-24T18:02:03.993

没有直接绘制三角形的命令。对于三角形的绘制，我们必须在这里使用线的概念。

即，g.drawLines（点的坐标）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-09T20:21:27.267

没有直接的方法来绘制三角形。您可以为此使用 drawPolygon() 方法。它采用以下形式的三个参数： `drawPolygon(int x[],int y[], int number_of_points);` 绘制三角形：（指定数组 x 中的 x 坐标和数组 y 中的 y 坐标以及将等于两个数组元素的点数。就像在三角形中一样，您将拥有3 x 坐标和 3 y 坐标，这意味着您总共有 3 个点。）假设您要使用以下点绘制三角形：`(100,50),(70,100),(130,100)` 在内部执行以下操作`public void paint(Graphics g)`：

```
int x[]={100,70,130};
int y[]={50,100,100};
g.drawPolygon(x,y,3); 
```

同样，您可以使用任意数量的点绘制任何形状。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-02-28T11:00:48.880

您可以使用处理库： [https ://processing.org/reference/PGraphics.html](https://processing.org/reference/PGraphics.html)

有一个方法叫做triangle()：

```
g.triangle(x1,y1,x2,y2,x3,y3) 
```

# c++ - C++ 和递归：IntegerToString 函数

> ID：11919668
> 
> 赞同：1
> 
> 时间：2012-08-12T04:09:45.457
> 
> 标签：c++, recursion

我正在尝试开放课件 CS106b 作业 1。我遇到了问题 4，它需要使用递归将整数写入字符串转换器。我们不允许使用任何执行整数转换的库函数。

问题是，在每个“递归级别”之后，代码都不会跟踪前一个字符串，因此我无法附加和构建字符串。

```
 #include <iostream>
 #include <string>
 #include "console.h"
 #include "simpio.h"
 using namespace std;

/* Function prototypes */

string intToString(int n);
int stringToInt(string str);

/* Main program */

int main() {
    // [TODO: fill in the code]
    int n = getInteger("Enter number for conversion to String: ");
    cout<< "Converted to String: "<<intToString(n);
    return 0;
}

//Functions

string intToString(int n){
    double toBeDecomposed = n;
    string convertedToString;
    char ch;
    string tempString;

    if((double)(toBeDecomposed/10) >= 0.1){

        int lastDigit = (int)toBeDecomposed%10;

        toBeDecomposed = (int)(toBeDecomposed/10);

        intToString(toBeDecomposed);

        if (lastDigit == 0) {
            ch = '0';
        }
        else if (lastDigit == 1) {
            ch = '1';
        }
        else if (lastDigit == 2) {
            ch = '2';
        }
        else if (lastDigit == 3) {
            ch = '3';
        }
        else if (lastDigit == 4) {
            ch = '4';
        }
        else if (lastDigit == 5) {
            ch = '5';
        }
        else if (lastDigit == 6) {
            ch = '6';
        }
        else if (lastDigit == 7) {
            ch = '7';
        }
        else if (lastDigit == 8) {
            ch = '8';
        }
        else if (lastDigit == 9) {
            ch = '9';
        }

        tempString = string() + ch;

        convertedToString = convertedToString.append(tempString);

        cout<<convertedToString<<endl;

    }
    cout<<"Returning: "<<convertedToString<<endl;

    return convertedToString;
}

int stringToInt(string str){
    return 0; 
} 
```

我的调试输出显示它只返回最后一位数字：

![在此处输入图像描述](../Images/1701c262096ade40ddef1435e5a7dd8f.png)

谁能建议如何成功附加到字符串`ConvertedToString`以便我返回整个转换后的整数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T04:17:48.677

您没有对递归函数调用的结果做任何事情。

提示是`intToString` *返回*一个`string`. 当您调用`intToString(toBeDecomposed);`.

捕获该返回值并对其进行处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T04:18:51.433

您的 convertToString 变量是一个本地变量，因此每次 intToString 函数调用它都会创建一个新变量，当递归结束并返回时，它会获取最后一个包含最后一位数字的 convertToString。

简单的解决方案是将其设为静态或全局。

# apache-camel - 如何在骆驼中部署自定义数据格式

> ID：11919669
> 
> 赞同：0
> 
> 时间：2012-08-12T04:09:52.857
> 
> 标签：apache-camel, apache-karaf

我在 Karaf 内运行 Camel。我通过实现 DataFormat 接口创建了自定义数据格式。现在我有我的自定义课程。

为了让它对我在 karaf 内的骆驼路线可见，在哪里复制这个类文件？

请提供指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T19:32:29.710

我只需将它添加到我的 Camel 应用程序源代码中，并使用该捆绑包进行部署。如果您需要在多个捆绑包中重用它，那么您可以将它打包为一个单独的捆绑包并适当地导出/导入它，我想......

# php - 来自 php 执行 c 脚本的错误消息

> ID：11919671
> 
> 赞同：0
> 
> 时间：2012-08-12T04:10:27.520
> 
> 标签：php, error-handling, segmentation-fault, exec

我花了几个小时试图调试一个使用 exec() 运行 ac 模拟的 php 脚本。在到处抛出 stderr 打印消息后，我终于发现根本问题是使用 sprintf() 将目录路径打印到一个太小的 char 数组。

我猜这是一个分段错误，但我从未真正看到 shell 错误消息说“分段错误”。当我更改分配大小时，一切正常。

我一直在将 stderr 输出重定向到一个日志文件，并且该日志文件从 fprintf(stderr,"..."); 获取了所有消息。但它没有收到任何 shell 错误消息。

命令是这样的

```
exec("$cmd 2>> $logFile & $PROCFILE 1 $ipaddr $! 2>> $logFile", $output, $rv); 
```

$cmd 运行 ac 模拟，$PROCFILE 运行第二个 c 程序，它接受三个参数（1、$ipaddr 和 $!）。在我修复分配大小问题之前，php 脚本将停止执行 $cmd 模拟并继续下一行（即在 exec() 语句之后）。php 文件的下一行是

```
if(rv!=0){handle error} 
```

但这也没有解决问题。

我一直在想我遇到了权限错误。如何让 exec() 显示 shell 错误？或者这是用'&'同时运行两个程序的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T04:26:01.417

当程序终止时，“分段错误”消息来自 shell，而不是来自程序。重定向仅适用于程序的输出，而不适用于 shell 的输出。该消息应该被放入 $output 变量中。如果 $rv 为 0 并且 $output 中没有任何内容，我怀疑您对所发生的事情有误。我建议您通过编写一个简单的测试程序来验证这一点：

```
kill(0, SIGSEGV); 
```

顺便说一句，你为什么不使用`snprintf()`，所以你不能首先获得缓冲区溢出？

# php - 更新我的代码以抓取需要 cookie 的网站

> ID：11919676
> 
> 赞同：1
> 
> 时间：2012-08-12T04:12:53.143
> 
> 标签：php, cookies, scrape

我正在使用此代码来抓取页面名称、网址和图像。

它工作得很好，但是在某些网站上它会失败并返回说明需要 cookie 的文本。如何在访问 URL/数据时设置 cookie 或模拟 cookie。

```
 <?php

    $url = $_REQUEST['url'];
    $url = checkValues($url);

    function checkValues($value)
    {
        $value = trim($value);
        if (get_magic_quotes_gpc()) 
        {
            $value = stripslashes($value);
        }
        $value = strtr($value, array_flip(get_html_translation_table(HTML_ENTITIES)));
        $value = strip_tags($value);
        $value = htmlspecialchars($value);
        return $value;
    }   

    function fetch_record($path)
    {
        $file = fopen($path, "r"); 
        if (!$file)
        {
            exit("Problem occured");
        } 
        $data = '';
        while (!feof($file))
        {
            $data .= fgets($file, 1024);
        }
        return $data;
    }

    $string = fetch_record($url);

    /// fecth title
    $title_regex = "/<title>(.+)<\/title>/i";
    preg_match_all($title_regex, $string, $title, PREG_PATTERN_ORDER);
    $url_title = $title[1];

    /// fecth decription
    $tags = get_meta_tags($url);

    // fetch images
    $image_regex = '/<img[^>]*'.'src=[\"|\'](.*)[\"|\']/Ui';
    preg_match_all($image_regex, $string, $img, PREG_PATTERN_ORDER);
    $images_array = $img[1];

    ?>

        <div class="images">
        <?php
        $k=1;
        for ($i=0;$i<=sizeof($images_array);$i++)
        {
            if(@$images_array[$i])
            {
                if(@getimagesize(@$images_array[$i]))
                {
                    list($width, $height, $type, $attr) = getimagesize(@$images_array[$i]);
                    if($width >= 50 && $height >= 50 ){

                    echo "<img src='".@$images_array[$i]."' width='100' id='".$k."' >";

                    $k++;

                    }
                }
            }
        }
        ?>
        <!--<img src="ajax.jpg"  alt="" />-->
        <input type="hidden" name="total_images" id="total_images" value="<?php echo --$k?>" />
        </div>
        <div class="info">

            <label class="title">
                <?php  echo @$url_title[0]; ?>
            </label>
            <br clear="all" />
            <label class="url">
                <?php  echo substr($url ,0,35); ?>
            </label>
            <br clear="all" /><br clear="all" />
            <label class="desc">
                <?php  echo @$tags['description']; ?>
            </label>
            <br clear="all" /><br clear="all" />

            <label style="float:left"><img src="prev.png" id="prev" alt="" /><img src="next.png" id="next" alt="" /></label>

            <label class="totalimg">
                Total <?php echo $k?> images
            </label>
            <br clear="all" />

        </div> 
```

# random - 使用 rand(3) 生成 rand(9)

> ID：11919678
> 
> 赞同：2
> 
> 时间：2012-08-12T04:14:22.230
> 
> 标签：random, probability

你有一个函数 rand(3)，它生成从 1 到 3 的随机整数。使用这个函数，构造另一个函数 rand(9)，它生成从 1 到 9 的随机整数。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-12T04:17:55.797

这是一个简单的解决方案：

```
rand(3) + 3*(rand(3) - 1) 
```

您想要这样做的原因是它提供了从 1 到 9 的所有可能值的均匀分布。

有些人可能很想只做`rand(3) * rand(3)`，但这实际上并不会产生一些数字——例如 7。它还不均匀地分布它*确实*产生的数字。

类似地，有些人可能会这样做`rand(3) + rand(3) + rand(3)`，但这也不会生成所有数字（它永远不会生成 1 或 2），并且会以不成比例的频率生成其他数字（5 比 9 更频繁地生成）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T04:21:51.777

使用 rand(3) 两次，可以生成 3^2 对整数，即 (1,1), (1,2), ..., (3,3)。将每一对分配给值 [1,9] 之一（例如 (1,1) 到 1，(1,2) 到 2 等）将为您提供 rand(9)。象征性地：rand(9):=(rand(3),rand(3))。

# ruby-on-rails - Rails 使用 loopj 标记器自动完成 jquery

> ID：11919679
> 
> 赞同：0
> 
> 时间：2012-08-12T04:14:29.540
> 
> 标签：ruby-on-rails, autocomplete, haml, loopj

我发现以下插件非常有用，但对于我来说，我无法弄清楚如何将提交按钮和 text_field 放在同一行。

[http://loopj.com/jquery-tokeninput/](http://loopj.com/jquery-tokeninput/)

这是我在下面的代码：

```
.row{style: 'text-align:center;'}
  .span4.offset4
    - # only allow to post when it's the current user's account
    - if current_user
      = text_field_tag 'search-box'
      = submit_tag "Run Bitelist Sync", class: 'btn btn-primary', :style => 'height:40px;' 
```

我尝试在摆脱中断的同时将 text_field 向左浮动，将 submit_tag 向右浮动，但这似乎不起作用。有什么想法吗？

# java - 正确编码图像处理工具

> ID：11919687
> 
> 赞同：1
> 
> 时间：2012-08-12T04:16:40.393
> 
> 标签：java, user-interface, image-processing

我们正在用 Java 做一个图像处理项目。UI 提供了如下工具：矩形选择和魔棒工具。

现在，有一个类： **ImageView**：

```
/*Other classes can set image, this class will draw the image*/
public class ImageView extends JPanel{

/*It resizes the image to fit the panel and draws the image on the panel.*/
public void setImage(BufferedImage image){/*code*/} 
```

}

每个工具都被视为一个单独的类，扩展**ImageView**。例如： **矩形选择工具：**

```
/*It has a function which allows the user to draw rectangle around the image, I am    not going to write the code here because it is long and unnecessary*/
public class ResizableRectangleView extends ImageView {

/*It returns the rectangle drawn by the user*/
public Rectangle getRectange(){return rectangle;} 
```

}

另一个类**UIController**根据用户选择的工具创建“工具”。然后在 GUI 中显示 JPanel（工具或视图）（例如：ResizableRectangleView 或其他一些视图）。然后用户可以绘制矩形（在 ResizableRectangleView 的情况下）。

对于每个工具，都会有一个单独的类。每当用户选择工具时，都会创建一个新对象，向该工具提供图像，然后将工具（视图）添加到 UI。

我不喜欢这种方法。我的问题是，像 Gimp 和 Photoshop 这样的程序如何允许在同一个图像/图层上使用多个工具？我应该如何进行？

非常感谢带有组件的框图（显示数据和命令的流）。

# webgl - 如何在 Three.js 中克隆 object3d？

> ID：11919694
> 
> 赞同：19
> 
> 时间：2012-08-12T04:18:17.850
> 
> 标签：webgl, three.js

我想克隆一个用loader加载的模型，我在github上发现[了这个问题](https://github.com/mrdoob/three.js/issues/1363)，但解决方案不起作用。Object3D 似乎发生了结构变化。

如何在当前稳定版本的 Three.js 中克隆 Object3D？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-11-01T15:13:31.073

在这个新版本的 three.js 中，您有一个方法`clone`。

例如，我使用国际象棋中的皇后，我不得不重复多次：

```
// queen is a mesh
var newQueen = queen.clone();

// make sure to re position to be able to see the new queen!
newQueen.position.set(100,100,100); // or any other coordinates 
```

它适用于任何网格。

我使用了three.js r61。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-12T12:16:10.747

其实mrdoob的答案就是你的答案......

加载器输出用于创建网格的几何图形。您需要使用加载器创建的网格的几何形状和材质创建一个新的网格。

```
for ( var i = 0; i < 10; i ++ ) {
    var mesh = new THREE.Mesh( loadedMesh.geometry, loadedMesh.material );
    mesh.position.set( i * 100, 0, 0 );
    scene.add( mesh );
} 
```

您想克隆一个 Mesh 而不是 Object3D，因为加载器的输出是一个 Mesh。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-03-27T05:46:45.107

**我找到了一种快速的解决方案（不是最有效的）**[GLTFLoader](https://threejs.org/docs/#examples/en/loaders/GLTFLoader)

在内部使用[THREE.FileLoader()](https://threejs.org/docs/#api/en/loaders/FileLoader)方法，它允许您缓存文件。 为此，您需要在创建[GLTFLoader实例之前添加此行](https://threejs.org/docs/#examples/en/loaders/GLTFLoader)

```
THREE.Cache.enabled = true; 
```

然后你可以多次加载同一个模型，但只有第一次会花费更长的时间，例如：

```
THREE.Cache.enabled = true;

var loader = new GLTFLoader();

var deeplyClonedModels = [];

for( var i = 0; i < 10; i++ ){

   loader.load('foo.gltf', function ( gltf ) {

     deeplyClonedModels.push(gltf.scene);

  });

} 
```

# javascript - 完成后如何触发循环完全执行完一个函数

> ID：11919701
> 
> 赞同：0
> 
> 时间：2012-08-12T04:19:24.627
> 
> 标签：javascript, jquery, loops, automation

我创建了一个小型机器人，我打算循环遍历列表中列出的所有内容，并从另一页上的它中抓取数据。所以我只使用 iframe，这样我就可以覆盖并从中获取数据。

我的脚本的问题是它在我的 console.log 中返回重复记录。它应该做的是从另一个页面获取数据并将其存储在父页面上。现在我只是`console.log`用来看看它返回了什么。然后可能稍后我会将它们存储在一个`<textarea>`，以便我可以轻松地复制它或将它存储在一个文件中。

```
<html>
    <head>
        <title>While Looping</title>

        <script type="text/javascript">

            var list = [ 644, 464, 441, 442, 552, 444, 594, 487, 430, 545, 524, 500, 450, 626, 505, 466, 456, 418, 560, 507, 535, 417, 462, 424, 551, 590, 453, 595, 593, 423, 495, 484, 536, 421, 518, 563, 515, 556, 532, 488, 465, 600, 597, 498, 534, 513, 514, 530, 519, 443, 596, 631, 533, 422, 437, 576, 504, 502, 361, 448, 598, 544, 416, 617, 537, 477, 447, 539, 614, 557, 445, 630, 588, 632, 476, 439, 574, 523, 636, 461, 558, 359, 499, 440, 481, 643, 460, 470, 569, 425, 573, 620, 615, 475, 468, 543, 599, 612, 613, 452, 582, 618, 455, 525, 438, 471, 628, 511, 562, 564, 565, 566, 605, 467, 463, 529, 561, 436, 527, 547, 623, 606, 486, 482, 555, 446, 559, 548, 549, 550, 607, 405, 540, 469, 474, 629, 611, 426, 639, 493, 602, 349, 604, 622, 546, 492, 494, 567, 407, 420, 399, 496, 531, 491, 520, 521, 404, 586, 459, 479, 637, 570, 634, 608, 584, 638, 601, 508, 516, 480, 571, 610, 621, 512, 483, 587, 592, 627, 642, 589, 428, 403, 541, 542, 625, 517, 522, 432, 497, 526, 644, 464, 441, 442, 552, 444, 594, 487, 430, 545, 524, 500, 450, 626, 505, 466, 456, 418, 560, 507, 535, 417, 462, 424, 551, 590, 453, 595, 593, 423, 495, 484, 536, 421, 518, 563, 515, 556, 532, 488, 465, 600, 597, 498, 534, 513, 514, 530, 519, 443, 596, 631, 533, 422, 437, 576, 504, 502, 361, 448, 598, 544, 416, 617, 537, 477, 447, 539, 614, 557, 445, 630, 588, 632, 476, 439, 574, 523, 636, 461, 558, 359, 499, 440, 481, 643, 460, 470, 569, 425, 573, 620, 615, 475, 468, 543, 599, 612, 613, 452, 582, 618, 455, 525, 438, 471, 628, 511, 562, 564, 565, 566, 605, 467, 463, 529, 561, 436, 527, 547, 623, 606, 486, 482, 555, 446, 559, 548, 549, 550, 607, 405, 540, 469, 474, 629, 611, 426, 639, 493, 602, 349, 604, 622, 546, 492, 494, 567, 407, 420, 399, 496, 531, 491, 520, 521, 404, 586, 459, 479, 637, 570, 634, 608, 584, 638, 601, 508, 516, 480, 571, 610, 621, 512, 483, 587, 592, 627, 642, 589, 428, 403, 541, 542, 625, 517, 522, 432, 497, 526, 616, 575, 585, 509, 554, 506, 454, 501, 431, 434, 603, 640, 641, 489, 451, 472, 510, 490, 473, 458, 457, 609, 568, 478, 619, 553, 538, 427, 635, 624, 583, 591, 572, 633, 429, 419, 503, 485, 435, 433, 528, 449, 340, 616, 575, 585, 509, 554, 506, 454, 501, 431, 434, 603, 640, 641, 489, 451, 472, 510, 490, 473, 458, 457, 609, 568, 478, 619, 553, 538, 427, 635, 624, 583, 591, 572, 633, 429, 419, 503, 485, 435, 433, 528, 449, 340 ];

            var count = 0;
            var total_list = list.length;
            var page_id;
            var base_url = "http://somewebsite.com/iframe_path";

            var iframe_url = base_url + page_id;

            function load_data() {

                $("#iframe").load(function() {

                    var acc_name = $("#iframe").contents().find("#text_name").attr("value");

                    var acc_add = $("#iframe").contents().find("#text'_address").attr("value");

                    setTimeout(nextFrame, 1000);

                    console.log( list[count] + ' ' + acc_name + ' ' + acc_add );

                });

                $("h1").text(count);

            } //load data

            // loop records
            function nextFrame() {
                if(count != total_list) {
                    var iframe_url = base_url+list[count];
                    $("#iframe").attr('src',iframe_url);

                    console.log(iframe_url);

                    load_data();
                    count++;
                    //Continue the loop in 3s
                    //setTimeout(nextFrame, 1000);
                }
            }
            // Start the loop
            setTimeout(nextFrame, 0);

        </script>

    </head>
    <body>

    <h1>0</h1> <br />

    <iframe width="400" height="400" id="iframe"></iframe>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T04:41:55.437

为什么要为 iframe 重新绑定“onload”？每次调用 load_data() 时，它都会将另一个事件绑定到 iframe 以在加载时运行指定的函数。尝试这样的事情：

```
 var list = [ 644, 464, 441, 442 ];

        var count = 0;
        var total_list = list.length;
        var page_id;
        var base_url = "http://somewebsite.com/iframe_path";

        var iframe_url = base_url + page_id;

        $(document).ready(function () {
            $("#iframe").load(function() {
                var acc_name = $("#iframe").contents().find("#text_name").attr("value");

                var acc_add = $("#iframe").contents().find("#text'_address").attr("value");

                console.log( list[count] + ' ' + acc_name + ' ' + acc_add );

                setTimeout(nextFrame, 1000);
            });
        });

        // loop records
        function nextFrame() {
            if(count != total_list) {
                var iframe_url = base_url+list[count];
                $("#iframe").attr('src',iframe_url);

                console.log(iframe_url);

                count++;
            }
        } 
```

# c# - 编译大型 C# 解决方案？（450 万行）

> ID：11919705
> 
> 赞同：3
> 
> 时间：2012-08-12T04:20:03.113
> 
> 标签：c#, visual-studio-2010, visual-studio, build, compilation

在数百万行代码中编译大型 Visual Studio C# 项目的标准流程是什么？

我尝试在具有四核 i7 和 8 GB RAM 的机器上使用 Visual Studio 2010 构建我当前的项目，但它冻结了 UI 两天，然后崩溃并且无法输出预期的 DLL。这个项目在多台机器上重复了类似的结果，所以这似乎不是我的盒子本地化的问题。我注意到 devenv 有一个`/build`开关，所以我今晚试试；这有可能成功吗，还是我应该尝试其他方法？

编辑：似乎我应该尝试[`MSBuild.exe /m`](https://stackoverflow.com/a/2582170/459881).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T04:33:52.503

您提到 UI 挂起 - 无需进入 WinDbg - 使用[C# 编译器编译 DLL](http://msdn.microsoft.com/en-us/library/78f4aasd.aspx)

# character - 用于用户输入的一组明确的字母和数字

> ID：11919708
> 
> 赞同：33
> 
> 时间：2012-08-12T04:20:46.070
> 
> 标签：character, hid, typography

是否存在更易于阅读的字母数字子集？特别是，是否存在具有较少视觉模糊字符的子集，并且通过删除（或等同）某些字符，我们可以减少人为错误？

我知道“视觉上模棱两可”的表达方式有些古怪，但很明显 D、O 和 0 都很相似，1 和 I 也很相似。我想最大化字母数字集的大小，但尽量减少可能被误解的字符数。

我知道这样一个集合的唯一先例是[加拿大邮政编码](http://en.wikipedia.org/wiki/Canadian_postal_code)系统，它删除了字母 D、F、I、O、Q 和 U，并且创建该子集是为了帮助邮政系统的 OCR 过程。

我最初的想法是只使用大写字母和数字，如下所示：

```
一种
B = 8
C = G
D = 0 = O = Q
E = F
H
我 = J = L = T = 1 = 7
K = X
米
ñ
磷
R
S = 5
U = V = Y
W
Z = 2
3
4
6
9

```

这个问题可能很难与给定的字体分开。所选字体中字符的独特性可能会显着影响任何两个字符的潜在视觉模糊性，但我预计在大多数现代字体中，上述等同的字符将具有足够相似的外观以保证它们等同。

我会很感激上面的想法——上面的方程是否合适，或者是否有更多的字符应该被等同起来？小写字符会更合适吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-12-13T13:16:45.657

出于类似的原因（例如，用于对密钥进行编码等），我需要替换十六进制（以 16 为底），我能想到的最好的方法是以下 16 个字符集，可用作十六进制的替换：

```
0 1 2 3 4 5 6 7 8 9 A B C D E F     Hexadecimal
H M N 3 4 P 6 7 R 9 T W C X Y F     Replacement 
```

在替换集中，我们考虑以下内容：

所有使用的字符都有主要的区别特征，只有在真正糟糕的字体中才会被省略。

省略元音 AEIOU 以避免意外拼写单词。

完全避免在某些字体中可能非常相似或相同的字符集（根本不使用任何集中的字符）：

```
0 O D Q 
1 I L J
8 B 
5 S
2 Z 
```

通过完全避免这些字符，希望用户将输入正确的字符，而不是试图纠正错误输入的字符。

对于不太相似但可能令人困惑的字符集，我们在每组中只使用一个字符，希望是最有特色的：

```
Y U V 
```

这里使用 Y，因为它始终具有较低的垂直部分，并且衬线字体中的衬线

```
C G 
```

这里使用了 C，因为似乎不太可能将 C 输入为 G，反之亦然

```
X K 
```

这里使用 X，因为它在大多数字体中更加一致

```
F E 
```

这里使用 F，因为它不是元音

在这些相似集合的情况下，集合中的任何字符的输入都可以自动转换为实际使用的字符（每个集合中列出的第一个）。请注意，如果可能使用十六进制输入，则 E 不能自动转换为 F（见下文）。

请注意，替换集中仍有发音相似的字母，这几乎是不可避免的。大声朗读时，应使用拼音字母。

在替换集中使用标准十六进制字符时，它们用于相同的 base-16 值。理论上可以支持十六进制和替换字符的混合输入，前提是 E 不会自动转换为 F。

由于这只是一个字符替换，因此应该很容易转换为十六进制。

大写似乎最适合输出的“规范”形式，虽然小写也看起来合理，除了“h”和“n”，在大多数字体中应该仍然相对清晰：

```
h m n 3 4 p 6 7 r 9 t w c x y f 
```

输入当然可以不区分大小写。

base 32 有几个类似的系统，请参阅[http://en.wikipedia.org/wiki/Base32](http://en.wikipedia.org/wiki/Base32)但是这些显然需要引入更多外观相似的字符，以换取每个字符额外增加 25% 的信息。

显然，以下集合也用于以 24 为基数的 Windows 产品密钥，但同样具有更多相似的字符：

```
B C D F G H J K M P Q R T V W X Y 2 3 4 6 7 8 9 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-23T12:03:01.447

主要从@rwb提到的[这个ux线程中汲取灵感，](https://ux.stackexchange.com/questions/21076/are-there-numbers-and-letters-to-avoid-for-activation-codes-via-sms)

*   [几个](http://clickontyler.com/blog/2010/08/generating-strong-user-friendly-passwords-in-php/) [程序](http://pwgen.cvs.sourceforge.net/viewvc/pwgen/src/pw_rand.c?revision=1.9&view=markup)使用类似的东西。您帖子中的列表似乎与这些程序中使用的列表非常相似，我认为对于大多数用途来说应该足够了。您可以添加总是添加冗余（纠错）以“原谅”小错误；但是，这将要求您将代码间隔开（请参阅[汉明距离](http://en.wikipedia.org/wiki/Hamming_distance)）。
*   没有关于派生列表中使用的特定方法的参考，除了与人类的反复试验（这对于非 ocr 非常有用：您的用户*是*人类）
*   使用字符分组（例如，5 个组）来增加上下文（“5 个组中的第二个中的第一个字符”）可能是有意义的
*   歧义可以通过使用[完整名词](http://xkcd.com/936/)（来自几乎没有相似之处的字典；单词编辑距离在这里可能有用）而不是字符来消除。人们可能会将“1”与“i”混淆，但很少有人会将“one”与“ice”混淆。
*   另一种选择是将您的代码变成可以大声读出的（假）单词。[马尔可夫模型](http://agiliq.com/blog/2009/06/generating-pseudo-random-text-with-markov-chains-u/)可以帮助你。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2019-09-25T12:26:47.393

**我的 23 个明确字符是：**

`c,d,e,f,h,j,k,m,n,p,r,t,v,w,x,y,2,3,4,5,6,8,9`

我需要一组明确的字符供用户输入，而且我找不到其他人已经生成了符合我标准的字符集和规则集的任何地方。

**我的要求：**

1.  没有大写字母：这应该在 URI 中使用，并且由可能没有很多打字经验的人输入，对于他们来说，即使是 shift 键也会减慢他们的速度并导致不确定性。我也希望有人能够说“全小写”以减少不确定性，所以我想避免大写字母。

2.  很少或没有元音：避免产生粗话或令人惊讶的词的简单方法是简单地省略大多数元音。我认为保留“e”和“y”是可以的。

3.  始终如一地解决歧义：我愿意使用一些歧义字符，只要我只使用每组中的一个字符（例如，在小写 s、大写 S 和五个中，我可能只使用五个）；这样，在后端，我可以用他们组中的一个正确字符替换这些模棱两可的字符中的任何一个。因此，在我在我的数据库中查找它的匹配项之前，输入字符串“3Sh”将被替换为“35h”。

4.  只需要创建标记：我不需要像 base64 或 base32 那样对信息进行编码，所以我的集合中的确切字符数并不重要，除了我希望尽可能大。它只需要对生成随机 UUID 类型的 id 令牌有用。

5.  强烈偏爱非歧义性：我认为与某人必须输入更长的令牌相比，输入令牌并出现问题的成本要高得多。当然，有一个权衡，但我更喜欢简洁而不是模糊。

**我确定的易混淆的字符组：**

*   A/4
*   b/6/G
*   8/B
*   转/转
*   女/女
*   9/g/q
*   i/I/1/l/7 - 太模糊而无法使用；请注意，欧洲的“1”可能看起来很像许多人的“7”
*   k/K
*   o/O/0 - 太模糊而无法使用
*   纸币/纸币
*   秒/秒/5
*   v/V
*   带W/W
*   X/X
*   是/是
*   z/Z/2

**明确的字符：**

我认为这只剩下 9 个完全明确的小写/数字字符，没有元音：

`d,e,h,j,m,n,r,t,3`

从每个模棱两可的组中添加一个字符（并尝试更喜欢看起来最明显的字符，同时避免大写），有 23 个字符：

`c,d,e,f,h,j,k,m,n,p,r,t,v,w,x,y,2,3,4,5,6,8,9`

**分析：**

使用经验法则，即具有 N 种可能性的数值等效范围的 UUID 足以避免 sqrt(N) 实例的冲突：

*   使用此字符集的 8 位 UUID 应该足以避免大约 300,000 个实例的冲突
*   使用此字符集的 16 位 UUID 应该足以避免大约 800 亿个实例的冲突。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-24T20:56:06.830

您所寻求的是明确的、高效的人机代码。我推荐的是用文字（有意义的）**单词**，特别是名词对整个数据进行编码。

我一直在开发一种软​​件来做到这一点——而且效率最高。我称之为**WCode**。
从技术上讲，它只是 Base-1024 编码 - 在其中您使用单词而不是符号。

以下是链接：
**演示文稿：** [https ://docs.google.com/presentation/d/1sYiXCWIYAWpKAahrGFZ2p5zJX8uMxPccu-oaGOajrGA/edit](https://docs.google.com/presentation/d/1sYiXCWIYAWpKAahrGFZ2p5zJX8uMxPccu-oaGOajrGA/edit)
**文档：** [https ://docs.google.com/folder/d/0B0pxLafSqCjKOWhYSFFGOHd1a2c/edit](https://docs.google.com/folder/d/0B0pxLafSqCjKOWhYSFFGOHd1a2c/edit)
**项目：** [https:// /github.com/San13/WCode](https://github.com/San13/WCode)（请稍候，我正在上传...）

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-04-05T14:30:00.333

如果您可以选择仅使用大写字母，我会根据用户通常输入错误的字符创建此集合，但这完全取决于他们阅读文本时使用的字体。

要使用的字符： `A C D E F G H J K L M N P Q R T U V W X Y 3 4 6 7 9`

要避免的字符：

```
B similar to 8
I similar to 1
O similar to 0
S similar to 5
Z similar to 2 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-12T09:16:20.760

这将是 OCR 中的普遍问题。因此，对于控制 OCR 编码的端到端解决方案 - 已经开发了专门的字体来解决您提到的“视觉模糊”问题。见：[http ://en.wikipedia.org/wiki/OCR-A_font](http://en.wikipedia.org/wiki/OCR-A_font)

作为附加信息：您可能想了解 Base32 编码 - 其中不使用数字“1”的符号，因为它可能会将用户与字母“l”的符号“混淆”。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-05-16T16:40:07.877

对于人类来说，看起来明确的字母对于光学字符识别 (OCR) 来说也是明确的。通过删除所有对 OCR 感到困惑的字母对，可以获得：

```
 !+2345679:BCDEGHKLQSUZadehiopqstu 
```

见[https://www.monperrus.net/martin/store-data-paper](https://www.monperrus.net/martin/store-data-paper)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-09-16T16:59:49.827

这取决于你希望你的集合有多大。例如，只有集合 {0, 1} 可能会很好地工作。同样只有一组数字。但可能你想要一个大约是原始字符集一半大小的集合。

我没有这样做，但这里有一个建议。选择一种字体，选择一组初始字符，然后编写一些代码来执行以下操作。绘制每个字符以适应 n×n 的黑白像素正方形，n = 1 到（比如说）10。从边缘切掉所有全白的行和列，因为我们只对黑色区域。这为您提供了每个字符的 10 个代码列表。通过这些代码中有多少不同来测量任何两个字符之间的距离。估计您的应用程序可接受的距离。然后对相距很远的一组字符进行蛮力搜索。

基本上，使用脚本来模拟对角色的眯眼，看看您仍然可以区分哪些角色。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-09-15T20:10:42.890

这是我编写的一些python，用于使用上述字符系统对整数进行编码和解码。

```
def base20encode(i):
    """Convert integer into base20 string of unambiguous characters."""
    if not isinstance(i, int):
        raise TypeError('This function must be called on an integer.')     
    chars, s = '012345689ACEHKMNPRUW', ''
    while i > 0:
        i, remainder = divmod(i, 20)
        s = chars[remainder] + s
    return s

def base20decode(s):
    """Convert string to unambiguous chars and then return integer from resultant base20"""
    if not isinstance(s, str):
        raise TypeError('This function must be called on a string.')
    s = s.translate(bytes.maketrans(b'BGDOQFIJLT7KSVYZ', b'8C000E11111X5UU2'))
    chars, i, exponent = '012345689ACEHKMNPRUW', 0, 1
    for number in s[::-1]:
        i += chars.index(number) * exponent
        exponent *= 20
    return i

base20decode(base20encode(10)) 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2020-04-23T13:35:01.953

base58:123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz

# git - Git 无法使用 HTTPS 方法工作

> ID：11919714
> 
> 赞同：0
> 
> 时间：2012-08-12T04:21:18.097
> 
> 标签：git, github, homebrew

我在使用 git 版本的 Mac OS X Mountain Lion 上：

```
git version 1.7.11.3 
```

我完全按照本教程所说的内容（关于密码的部分除外）并且在使用“push”命令时不断出错。

教程：[https](https://help.github.com/articles/set-up-git) ://help.github.com/articles/set-up-git 教程二：[https ://help.github.com/articles/create-a-repo](https://help.github.com/articles/create-a-repo)

当我在教程的第二页输入最终命令时：

```
git push origin master 
```

我收到此错误：

```
fatal: https://github.com/tabchas/Hello-World.git/info/refs not found: did you run git      update-server-info on the server? 
```

如果有帮助的话，我通过 Homebrew 安装了 git。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T05:00:19.733

查看您的 GitHub 帐户，我没有看到“Hello-World”存储库。您需要在您的帐户中单击“新建存储库”并添加一个名为“Hello-World”的存储库。

# javascript - 如何在 HTML 中重复选择元素

> ID：11919715
> 
> 赞同：2
> 
> 时间：2012-08-12T04:21:49.187
> 
> 标签：javascript, jquery, html, css

我的 HTML 页面中有一个选择/下拉菜单，它必须在页面中出现大约 10 次。简单的示例如下：

> Qn 1: {dropdown} 是一个 {TextField}
> 
> Qn 2: {dropdown} 是一个 {TextField}
> 
> Qn 3: {dropdown} 是一个 {TextField}

其中下拉列表列出了相同且静态的各种选项（字符串数组 - 无服务器组件）。

我想创建一次下拉列表并使用它。CSS 可以为 html:select 提供数据元素吗？或者我如何编写javascript代码来填充选择元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T04:36:46.307

这是一种方法（使用 jQuery 使选择和遍历所有下拉列表更容易）：

```
<p>Qn 1: <select class="repeat"></select> is a {TextField}</p>
<p>Qn 2: <select class="repeat"></select> is a {TextField}</p>
<p>Qn 3: <select class="repeat"></select> is a {TextField}​​​​​​​​​​​​​​​​​​&lt;/p>​​​​​​​​​

<script type="text/javascript">
    var optionOpen = "<option>";
    var optionClosed = "</option>"​​​​​​​​​​​​​​​​​;​​
    var selectItems = ["firstItem", "secondItem", "thirdItem"];

    $(".repeat").each(function(){
        for (key in selectItems)
        {
            $(this).append(optionOpen + selectItems[key] + optionClosed);
        }
    });
</script> 
```

[**演示**](http://jsfiddle.net/Snowsickle/bf67h/)

我将选择选项格式化为列表并将字符串连接起来，以便在页面之间轻松更改和重用。只需将选项添加到`selectItems`列表中，即可将它们添加到带有 class 的每个`<select>`标签中`repeat`。如果您需要表单分别处理它们，请给每个`<select>`不同的属性。`name`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T04:39:54.870

有很多方法可以做到这一点。这是第一个想到的：

为第一行提供一个“模板”行：

```
<ul>
    <li class="template">Qn <span class="qnum">1</span>:
        <select name="sel">
            <option val="0"></option>
            <option val="1">Option 1</option>
            <option val="2">Option 2</option>
            <option val="3">Option 3</option>
        </select>
        is a <input type="text" name="isa">
    </li>
</ul> 
```

然后根据需要多次复制该行：

```
​$(document).ready(function() {
    var $ul = $("ul"),
        $li = $ul.find("li.template"),
        i;

    for (i=2; i <= 10; i++)
        ​$li.clone().appendTo($ul).​find("span.qnum")​​​​​​.text(i);
}); 
```

演示：http: [//jsfiddle.net/nnnnnn/kJd33/](http://jsfiddle.net/nnnnnn/kJd33/)

显然，我选择将每个项目都设为带有无序列表的 li 元素，但您可以使用有序列表以便项目自动编号，或者如果您的实际需求有多个列，那么可能是一个表更合适。

给你的家庭作业：在我的答案中搜索你不理解的任何内容，和/或查找我在[jQuery API doco](http://api.jquery.com/)中使用的各种 jQuery 方法。

# json - 如何将此 Json 读取到控制器对象？Kendo UI 网格服务器过滤

> ID：11919716
> 
> 赞同：3
> 
> 时间：2012-08-12T04:21:59.623
> 
> 标签：json, asp.net-mvc-3, kendo-ui

我正在尝试过滤 Kendo UI 网格服务器端过滤器。开发人员工具在查询字符串中显示了这一点

/Home/GetUsmMessage?{"filter":{"logic":"and","filters" [{"field":"MessageId","operator":"eq","value":1}]},"组”：[]} GET 200 应用程序/json

我创建了一个对象结构，以便将结构读取到对象

```
 public ActionResult GetUsmMessage(FilterContainer filter)
    {
        //Code to read the filter container
        return Json(jsonData, JsonRequestBehavior.AllowGet);
    } 
```

过滤容器的对象结构：

```
public class FilterContainer
{
    public List<FilterDescription> filters { get; set; }
    public string logic { get; set; }
}
public class FilterDescription
{
    public string @operator { get; set; }
    public string field { get; set; }
    public string value { get; set; }

    public List<FilterDescription> filters { get; set; }
    public string logic { get; set; }
} 
```

当我调试控制器功能时，它仍然给我一个空对象。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T14:32:31.440

得到了答案...我忘记将请求类型添加为 Http post ....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T11:34:55.330

对于 WebApi 控制器，您可以使用 [FromUri] 属性和 GET 动词：

```
 public HttpResponseMessage Get(
[FromUri]IEnumerable<SortParameter> sort, 
[FromUri]FilterContainer filter, 
int take = 10, int skip = 0) 
```

# eclipse - Aptana Studio 3 插件未在 Eclipse Juno 上正确安装

> ID：11919727
> 
> 赞同：1
> 
> 时间：2012-08-12T04:24:35.370
> 
> 标签：eclipse, aptana, aptana3, eclipse-juno

我在 64 位 Windows 7 上运行 Eclipse Juno，我尝试为 Eclipse 安装 Aptana Studio 3 插件。安装顺利，aptana 插件也显示在 Installed 插件列表中，如下所示： ![在此处输入图像描述](../Images/df1a3f84a04188612a7e1f6258965477.png)

但就是这样！我在 Eclipse 的其他任何地方都看不到 Aptana，而不是偏好、观点、观点！我注意到的一件奇怪的事情是，在安装 aptana 插件时，我***没有***看到任何安全警告对话框告诉我它是一个未签名的插件，这是我所期待的。

以前有没有其他人遇到过这个问题？我在哪里出错了吗？请帮忙。

**编辑**：Eclipse Indigo 也存在同样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T05:50:32.400

自己解决了！查看错误日志后，我意识到我之前添加了一个存档文件以从磁盘安装 aptana（尝试失败）。在日志中的多个地方都提到了它，不知道为什么，但是当我删除该存储库时，Aptana 安装得很好蚀。:)

# php - 在 PHP 中使用 MySQL 查询

> ID：11919728
> 
> 赞同：1
> 
> 时间：2012-08-12T04:24:42.727
> 
> 标签：php, mysql

我正在创建一个社交网络，您可以在其中关注某人或与他们成为朋友。您能够看到的数据取决于您与用户的关系类型。现在我有两张桌子可以使用。职位和关系。

帖子：

```
| user_id | post_id | story |
-----------------------------
|  1      |  1      | text. |
----------------------------- 
```

关系：

```
| rel_id  | user_1  | user_2| status |
--------------------------------------
|  1      |  1      |   2   |    3   |
-------------------------------------- 
```

我也有一个用户表，但我认为这在这里并不重要。所以，基本上我想从我是朋友或关注的用户中选择所有帖子。User_2 始终是关系的接收者。数字 1、2 和 3 代表关系的“状态”。1 表示您正在关注收件人，3 表示您是朋友，4 表示您正在关注收件人（唯一的区别是您还有待处理的好友请求）。我设置了一个 SELECT QUERY 但它不能正常工作。

```
$query=" SELECT * FROM posts LEFT JOIN relationships ON (posts.user_id=    
relationships.user_2 AND relationships.user_1 = $user_id AND relationships.status = 4 
OR 3 OR 1)"; 
```

它会选择所有帖子，两次。这是为什么？我希望它只选择发布帖子的用户与我有关系的帖子，状态为 1、3 或 4。我可能做错了什么？还有什么其他方法可以做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T04:30:13.250

这不是如何`OR`工作的。也许你应该试试`IN`。

```
... relationships.status IN (4, 3, 1) ... 
```

至于重复，使用`DISTINCT`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T04:34:17.450

您`OR`的 in`WHERE`子句条件的语法不正确。尝试这样的事情：

```
SELECT  * 
FROM    posts a 
            LEFT JOIN relationships b
                ON a.user_id = b.user_2 
WHERE   b.user_1 = $user_id AND 
        b.status IN (1,3,4) 
```

我建议你使用**[PDO](http://php.net/manual/en/book.pdo.php)**或**[MYSQLi](http://php.net/manual/en/book.mysqli.php)**扩展。

在 PDO 中，它可能如下所示：

```
<?php
$stmt = $dbh->prepare("SELECT   * 
                      FROM  posts a 
                           LEFT JOIN relationships b
                                ON a.user_id = b.user_2 
                     WHERE  b.user_1 = ? AND 
                            b.status IN (1,3,4)");

$stmt->bindParam(1, $user_id);
$stmt->execute();

?> 
```

请记住始终过滤您的输入，尤其是用于查询数据库的输入。

# java - 有没有办法将包私有类传递给静态方法

> ID：11919730
> 
> 赞同：0
> 
> 时间：2012-08-12T04:25:36.643
> 
> 标签：java, package, static-methods, package-private

我想知道是否有办法从另一个以包私有类作为参数的包中调用静态方法？这是将 MessagePackagePrivate 类移动到另一个 .java 文件并将其公开的唯一方法吗？如果我不这样做，它会给出这个错误：“MessagePackagePrivate 类型不可见”，这是正常的。

因此，如果是这种情况，即使您的类公开了要公开使用的静态方法，如果不在同一个包中调用该类，也不能使用该类？

这是代码片段：

主类.java

```
package packageA;

import packageB.*;

public class MainClass {
    public static void main(String[] args) {
        ClassB.printString(new MessagePackagePrivate("Package problem"), 12);
    }
} 
```

ClassB.java

```
package packageB;

public class ClassB {

    public static void printString( MessagePackagePrivate message , int numbers) {
        System.out.println(message.getMessage() + " numbers: " + numbers );
        // other logics will be implemented here ...
    }
}

    class MessagePackagePrivate {
        private String text;

        MessagePackagePrivate(String text) {
            this.text = text;
        }

        public String getMessage() {
            return this.text;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T16:12:03.337

这就是接口的用途。

你有一个公共接口（好吧，所有接口都是公共的），它定义了所有需要公开访问的方法和一个包私有实现。而你传递对象的方法只需要知道接口。

在你的情况下，你会有这样的事情：

```
public interface Message {
  public String getMessage();
} 
```

接着

```
class MessagePackagePrivate implements Message {
   ...
} 
```

最后：

```
public static void printString( Message message , int numbers) {
   ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T16:13:05.890

您可以实现一个接口（例如`Printable`）并将该接口用作静态方法中的参数类型。

# performance - 为跨域ajax请求设置访问控制

> ID：11919732
> 
> 赞同：0
> 
> 时间：2012-08-12T04:26:18.890
> 
> 标签：performance, http, .htaccess, access-control, cors

我有三个子域，`a.xyz.com, b.xyz.com, c.xyz.com.`现在，我有大约 20 个 ajax 请求要在 body onload`a.xyz.com.`

所以，我想在上面的三个域中平均分配 20 个请求。`b.xyz.com`我通过 .htaccess和.htaccess 中的这段代码段进行了尝试`c.xyz.com`。但是，从 a.xyz.com 到任何其他子域的请求仍然被转储。

```
<IfModule mod_headers.c>
   <FilesMatch "\.(php)$">
    Header set Access-Control-Allow-Origin: http://a.xyz.com,http://b.xyz.com,http://b.xyz.com
    Header set Access-Control-Allow-Methods : POST,GET,OPTIONS
</FilesMatch>
  </IfModule> 
```

我已将上述`.htaccess`文件放在我的子域`b.xyz.com`和`c.xyz.com`.

那么，任何人都可以预测我的方法有什么问题吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T00:32:07.743

试试这个以允许所有 xyz.com 子域上的跨域：

```
SetEnvIf Origin "http(s)?://(.+\.)?(xyz\.com)$" ORIGIN_DOMAIN=$0
<FilesMatch "\.(php)$">
  <IfModule mod_headers.c>
    Header set Access-Control-Allow-Origin %{ORIGIN_DOMAIN}e env=ORIGIN_DOMAIN
    Header set Access-Control-Allow-Methods "POST,GET,OPTIONS"
  </IfModule>
</FilesMatch> 
```

# eclipse - 日食伽利略的 WTP

> ID：11919735
> 
> 赞同：1
> 
> 时间：2012-08-12T04:27:34.070
> 
> 标签：eclipse, eclipse-plugin, fedora, fedora12

我在我的机器上安装了 fedora 12，并安装了 Eclipse 作为 Fedora 安装的一部分。但是我没有获得动态 Web 项目选项，因为我的 Eclipse 中没有安装 WTP。我找不到我的 Galileo 版本的确切链接/包。这是我检查的：

[http://www.eclipse.org/galileo/projects.php](http://www.eclipse.org/galileo/projects.php)

对于上面的链接，我选择了**WTP Common Tools** 下载链接，它把我重定向到这个链接：

[http://download.eclipse.org/webtools/downloads/](http://download.eclipse.org/webtools/downloads/)

从上面的链接中，我选择了构建版本**3.4.0**，然后我得到了这个：

[http://download.eclipse.org/webtools/downloads/drops/R3.4.0/R-3.4.0-20120612174739/](http://download.eclipse.org/webtools/downloads/drops/R3.4.0/R-3.4.0-20120612174739/)

从这里开始，我很困惑要下载什么来为我的 Eclipse 启用 WTP。

**注意：**我不希望不必要地安装任何其他软件包。我想要的只是**WTP**

请向我提供相同的确切链接，以便我可以继续。

问候，

# node.js - 如何将 cookie 与 superagent 一起使用？

> ID：11919737
> 
> 赞同：38
> 
> 时间：2012-08-12T04:28:51.457
> 
> 标签：node.js, mocha.js, superagent

我正在使用 express 进行 cookie 会话管理，如下所示：

```
req.session.authentication = auth; 
```

我用类似的东西验证了经过身份验证的网址

```
if(!req.session.authentication){res.send(401);} 
```

现在我正在使用 mocha、[superagent](http://visionmedia.github.com/superagent/)和[should](https://github.com/visionmedia/should.js)为 URL 构建测试，但是我似乎找不到使用 superagent 获取/设置 cookie 的方法。我什至尝试在经过身份验证的测试之前请求登录，但它不起作用，

我已经尝试在 mocha BDD 套件的 before 语句中将请求添加到登录名，但是它仍然告诉我该请求是未经授权的，我已经测试了从浏览器执行请求的身份验证，但是它不能从套房有什么想法为什么？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-04T20:04:31.520

使用`superagent.agent()`（而不是普通的 old `superagent`）使请求具有持久性 cookie。请参阅[superagent 文档](http://visionmedia.github.io/superagent/#preserving-cookies)或代码示例中的“保留 cookie”：[agent.js](https://github.com/visionmedia/superagent/blob/master/test/node/agency.js)、[controller.test.js](https://github.com/hunterloftis/component-test/blob/master/lib/users/test/controller.test.js)。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2016-01-14T16:55:53.650

似乎以下代码工作正常；

> req.set('Cookie', "cookieName1=cookieValue1;cookieName2=cookieValue2");

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-09-28T10:05:22.743

如果问题在于为 CORS 请求发送 cookie，请使用[此处描述](https://visionmedia.github.io/superagent/#cors)`.withCredentials()`的方法

```
request
  .get('http://localhost:4001/')
  .withCredentials()
  .end(function(err, res) { }) 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-07-06T21:28:19.440

既然你提到你需要获取*和*设置cookie：

得到：

```
const request = await Superagent.get('...')

const cookie = request.header['set-cookie'] 
```

放：

```
Superagent.post('...').set('Cookie', 'cookie_info') 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-05-02T02:13:41.063

## 2020 +

一个干净的方法是：

*   创建一个简单的 cookie 存储
*   抽象设置 Cookie 以在每个请求中发送它
*   仅在需要时更新 cookie

*请注意，我保留相同的 URL，因为我使用 graphql，但您可以将其设为参数：*

```
const graph = agent =>
  agent.post('/graph')
    .set('cookie', cookieStore.get());

const handleCookie = res =>
  cookieStore.set(res.headers['set-cookie'][0]);

let currentCookie="";
const cookieStore = {
  set: cookie=>{currentCookie=cookie},
  get: cookie=>currentCookie,
};

module.exports = {graph,connectTestUser,handleCookieResponse}; 
```

现在，您可以使用**graph(agent)**发送请求并在有可能更新 cookie（设置或清除）的响应时使用**handleCookie(response )，例如：**

```
graph(agent).end((err,res) => {
  if (err) return done(err);
  res.statusCode.should.equal(200);
  handleCookie(res);
  return done();
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-28T02:17:55.270

将 cookie 添加到代理 cookiejar：

```
const request = require('superagent');
const {Cookie} = require('cookiejar')
const agent = request.agent()

agent.jar.setCookie(new Cookie("foo=bar")) 
```

# javascript - Javascript 拖放脚本

> ID：11919738
> 
> 赞同：-1
> 
> 时间：2012-08-12T04:29:40.987
> 
> 标签：javascript, css, drag-and-drop

好的，所以我有两个问题。看看我的拖放脚本：[http](http://bouncygames.org/smell.php) ://bouncygames.org/smell.php 。首先，当我点击我制作的可拖动窗口上的X按钮时，我需要点击它两次，第一次点击它，一切都搞砸了，然后我必须再次点击它，一切都消失了。 **我如何做到这一点，所以我只能单击 X 一个，以使窗口 div 消失** 此外，我希望它只有在拖动 TITLE 位置时才会拖动，而不是 div 的主要部分。**我怎样才能做到这一点，以便我可以控制只有标题的窗口？** 谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T04:38:39.770

或更好

```
function setVisibility(id) {

 document.getElementById(id).style.display = 'none';

    //What is the rest here?
    if(document.getElementById('aid').value=='Hide Layer'){
    document.getElementById('aid').value = 'Show Layer';
    document.getElementById(id).style.display = 'none';
    }else{
    document.getElementById('aid').value = 'Hide Layer';
    document.getElementById(id).style.display = 'inline';
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T05:10:17.053

我为您创建了一个示例，其中：

*   仅使用标题栏拖动对话框。
*   关闭按钮关闭对话框。

我知道这不是处理您的代码的答案，我正在使用 jQuery 和 jQueryUI（可拖动模块），但我认为使用这种方法会更好，因为可拖动问题由 jQueryUI 等经过测试的库很好地控制。

故事看看：http: [//jsfiddle.net/davidbuzatto/s9T4b/](http://jsfiddle.net/davidbuzatto/s9T4b/)

# css - css 选项卡选择的背景颜色

> ID：11919739
> 
> 赞同：0
> 
> 时间：2012-08-12T04:29:56.327
> 
> 标签：css

基于我之前的问题中的代码：[CSS 半径和悬停填充整个区域](https://stackoverflow.com/questions/11911894/css-radius-and-hover-fill-entire-area)

我如何获得与下面可见框具有相同背景颜色的选项卡？其余的标签我想保持默认颜色。这样用户就很容易知道选择了哪个选项卡。

我看到了`ui-state-default` `ui-corner-top` `ui-tabs-selected` `ui-state-active`课程，但无法让 css 正常工作。

帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T05:45:30.823

您想在悬停时突出显示选项卡吗？我将您的背景颜色移到您的班级`.ui-state-default`并添加了一个伪语句。

***[这](http://jsfiddle.net/blasteralfred/GWgex/)***是一个有效的现场演示。这是你想要的吗？

# entity-framework - 如何从 T4 模板（tt）文件中检查标识列？

> ID：11919744
> 
> 赞同：3
> 
> 时间：2012-08-12T04:30:30.103
> 
> 标签：entity-framework, t4

**如果db 列是主键而不是标识**，我想在我的类属性中添加以下属性 考虑以下代码

```
[Key, Column(Order =  0), DatabaseGenerated (DatabaseGeneratedOption.None )]
public virtual int TypeId
{ get; set; } 
```

我使用以下代码检查主键

```
bool isPrimaryKey = ef.IsKey(edmProperty);
#>
<#
if (isPrimaryKey)
{
#>
[Key]
<#
}
#> 
```

现在我需要一些代码来检查列是身份吗？如果没有，那么我将从我的 T4 模板代码中添加以下属性
**DatabaseGenerated (DatabaseGeneratedOption.None ) 。**我正在使用[EF 4.x POCO Entity Generator for C#](http://visualstudiogallery.msdn.microsoft.com/23df0450-5677-4926-96cc-173d02752313)来生成我的 poco 类。现在我想修改它。现在我该怎么做？等待您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T04:49:46.893

如果您对主键使用 tblWidget 和 WidgetId 的命名约定，那么您可以使用它来检测它是否是主键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-07T20:58:49.037

```
public const string annotationNamespace = "http://schemas.microsoft.com/ado/2009/02/edm/annotation";

MetadataProperty storeGeneratedPatternProperty = null;
edmProperty.MetadataProperties.TryGetValue(annotationNamespace + ":StoreGeneratedPattern", false, out storeGeneratedPatternProperty);
bool IsIdentity = storeGeneratedPatternProperty != null && storeGeneratedPatternProperty.Value.ToString() == "Identity"; 
```

# twitter-bootstrap - 如何使用@media 媒体查询定位特定的屏幕尺寸？

> ID：11919749
> 
> 赞同：5
> 
> 时间：2012-08-12T04:33:02.680
> 
> 标签：twitter-bootstrap, responsive-design, media-queries

我是响应式设计的新手，我现在正在玩 twitter bootstrap responsive.css。我的项目遇到了一些麻烦。

问题是，我的左栏不会塌陷（如果这是正确的术语），也不会堆积起来。我想要的是，左列应移到 span8 列下方并调整其宽度。它现在所做的是，左列的宽度减小并挤压其中的所有内容。我的目标是 768x1024 媒体屏幕的移动屏幕尺寸。

我对布局的基本标记是，左侧为 span8，右侧为 span4。span4 是我的其他块所在的位置。

```
<div class="row">
<div class="span8">
    some block with contents
</div>

<div classs="span4">
    <div class="sideBlock"><!--fluid width was set-->
        <img src="http://placehold.it/298x77">
    </div>
</div> 
```

我的主要问题是，我们如何使用媒体查询（使用 twitter 引导程序）定位特定的屏幕尺寸。然后定制它以满足我们的需求？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-07-23T21:45:06.633

由于您使用的是 Bootstrap，因此请使用默认变量来定位特定的屏幕尺寸：

```
// Extra small screen / phone
$screen-xs:                  480px !default;

// Small screen / tablet
$screen-sm:                  768px !default;

// Medium screen / desktop
$screen-md:                  992px !default;

// Large screen / wide desktop
$screen-lg:                  1200px !default; 
```

例子：

```
@media (min-width: $screen-sm) and (max-width: $screen-md) {
    /*
     * styles go here
     */
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-08-13T05:01:12.520

通过阅读博客中的文章和已回答的堆栈溢出问题以及从您对此问题的评论中发布的文章，我终于得到了这个。

基于移动设备的常见断点和视口，即大型 destkops 的 1200 像素宽视口，我必须在媒体查询中插入我自己的样式。

IE，`@media (min-width) {mystyle here}`

```
@media (min-width: 1200px) {
      .myContainer {
           width: 960px;
           margin: 0 auto;

      }
      .myleftBlock-should-collapse {
           float: none;
           width: 100%;
      }

 } 
```

由于我使用的是 Twitter Bootstrap Responsive.css 文件，因此我需要为某些视口自定义媒体查询，以便它适合我的设计需求。

好吧，因为我正在设计 960 像素的固定宽度，所以我将为我的 .container 和 span 类自定义并重新计算宽度。我将从我的基本宽度 960px 转换像素到百分比基数。

因此，我想要在某些视口中折叠、隐藏或显示的任何块或元素，都应在媒体查询中进行相应的样式设置。

还有……我学到了关于响应式设计的新东西。屏幕尺寸与视口不同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-13T05:06:31.883

Bootstrap 中的 row-fluid 类示例可在此处找到 [http://getbootstrap.com/2.3.2/examples/fluid.html](http://getbootstrap.com/2.3.2/examples/fluid.html)

如果您希望 Visual Studio 帮助处理 CSS，请从[http://bootswatch.com](http://bootswatch.com)获取 LESS 文件，并获取 Twitter.Bootstrap.Less nuget 包。然后将以下内容添加到 bootswatch.less 文件中

```
@import url("bootstrap/bootstrap.less"); 
```

Boostrap row-fluid 有一个替代品，称为“Foundation” [http://foundation.zurb.com/develop/download.html#customizeFoundation](http://foundation.zurb.com/develop/download.html#customizeFoundation)

它有“小型”和“大型”媒体的定义等等：

```
<div class="show-for-small" style="text-align: center">
    <a href="#">Desktop here</a>
</div>
<div class="large-4 columns hide-for-small">
    <a href="#">
        <div class="panel radius callout" style="text-align: center">
        <strong>Mobile here</strong>
        </div>
    </a>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-12T13:15:14.423

您需要使用`row-fluid`类（而不是`row`类）才能从 Bootstrap 的响应部分中受益。[在http://twitter.github.com/bootstrap/scaffolding.html#fluidGridSystem](http://twitter.github.com/bootstrap/scaffolding.html#fluidGridSystem)阅读更多内容。

所以你的基本布局应该是：

```
<div class="row-fluid">
  <div class="span4">...</div>
  <div class="span8">...</div>
</div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-13T19:56:05.653

一个额外且有趣的功能是您还可以在标签的**媒体**属性中使用媒体查询。`<link>`

```
<link href="style.css" rel="stylesheet">
<link href="justForFrint.css" rel="stylesheet" media="print">
<link href="deviceSizeDepending.css" rel="stylesheet" media="(min-width: 768px)"> 
```

这样，浏览器将下载所有 CSS 资源，而不管**媒体**属性如何。 **不同之处在于，如果 media 属性的 media-query 被评估为*false*，则该 .css 文件及其内容将不会被渲染阻塞。**

因此，建议在标签中使用*media*属性，`<link>`因为它可以保证更好的用户体验。

在这里您可以阅读有关此问题的 Google 文章[https://developers.google.com/web/fundamentals/performance/critical-rendering-path/render-blocking-css](https://developers.google.com/web/fundamentals/performance/critical-rendering-path/render-blocking-css)

一些工具可以帮助您根据您的媒体查询自动分离不同文件中的 css 代码

Webpack [https://www.npmjs.com/package/media-query-plugin](https://www.npmjs.com/package/media-query-plugin) [https://www.npmjs.com/package/media-query-splitting-plugin](https://www.npmjs.com/package/media-query-splitting-plugin)

PostCSS [https://www.npmjs.com/package/postcss-extract-media-query](https://www.npmjs.com/package/postcss-extract-media-query)

# android - 互联网不可用时如何隐藏广告

> ID：11919759
> 
> 赞同：1
> 
> 时间：2012-08-12T04:35:51.543
> 
> 标签：android

我正在制作一个我正在添加的应用程序。但即使互联网连接不可用，它也会在视图/布局中占用空间。我只想隐藏它并且不允许它在布局/视图中占用空间互联网不可用。这是 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_centerHorizontal="true"
    android:orientation="vertical" >

    <FrameLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:visibility="visible" >

            <ImageView
                android:id="@+id/explain_QuestionImageView"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:visibility="visible" />

            <ScrollView
                android:id="@+id/scrollView1"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginBottom="5.0dip"
                android:layout_marginLeft="1.0dip"
                android:layout_marginRight="1.0dip"
                android:layout_marginTop="1.0dip"
                android:fadeScrollbars="true"
                android:fadingEdge="none"
                android:fillViewport="true" >

                <TextView
                    android:id="@+id/explain_question"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentRight="true"
                    android:layout_below="@id/explain_QuestionImageView"
                    android:fadingEdge="vertical"
                    android:scrollbars="vertical"
                    android:text=""
                    android:textColor="@color/question_text"
                    android:textColorHighlight="@color/question_text1" />
            </ScrollView>

            <TextView
                android:id="@+id/explain_separator"
                android:layout_width="match_parent"
                android:layout_height="5.0dip"
                android:layout_alignParentRight="true"
                android:layout_below="@id/explain_question"
                android:background="@drawable/blue_gradient"
                android:fadingEdge="vertical"
                android:padding="10dp"
                android:scrollbars="vertical"
                android:text="" />

            <ScrollView
                android:id="@+id/scrollView2"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginBottom="100.0dip"
                android:layout_marginLeft="1.0dip"
                android:layout_marginRight="1.0dip"
                android:layout_marginTop="1.0dip"
                android:fadeScrollbars="true"
                android:fadingEdge="none"
                android:fillViewport="true" >

                <TextView
                    android:id="@+id/explain_explaination"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentRight="true"
                    android:layout_below="@id/explain_separator"
                    android:fadingEdge="vertical"
                    android:padding="10dp"
                    android:scrollbars="vertical"
                    android:text=""
                    android:textColor="@color/dark_green" />
            </ScrollView>
        </LinearLayout>
        <!-- </ScrollView> -->

    </FrameLayout>

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
       >

        <com.google.ads.AdView
            android:id="@+id/ad"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:keepScreenOn="true"
            ads:adSize="BANNER"
            ads:adUnitId="a1501e5633125fb"
            ads:loadAdOnCreate="true"
            ads:testDevices="TEST_EMULATOR, 123456789ABCDEF" >
        </com.google.ads.AdView>

        <LinearLayout
            android:id="@+id/LL_Buttons1"
            android:layout_width="fill_parent"
            android:layout_height="40.0dip"
            android:layout_above="@id/ad"
            android:layout_gravity="bottom"
            android:background="#ff777777"
            android:orientation="horizontal" >

            <Button
                android:id="@+id/PrevExplainationButton"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_centerInParent="true"
                android:layout_marginLeft="2.0dip"
                android:layout_weight="1.0"
                android:background="@drawable/ibtn"
                android:onClick="onPrevExplainationButtonClick"
                android:text="Previous" />

            <Button
                android:id="@+id/NextExplainationButton"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_centerInParent="true"
                android:layout_marginLeft="5.0dip"
                android:layout_marginRight="2.0dp"
                android:layout_weight="1.0"
                android:background="@drawable/ibtn"
                android:onClick="onNextExplainationButtonClick"
                android:text="Next" />
        </LinearLayout>
    </RelativeLayout> 
```

请告诉我该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T05:15:19.613

在这里，举一个更具体的例子，您可以测试连接，然后将可见性设置为`gone`：

```
private boolean isNetworkConnected() {
    yourAddView = (AdView) findViewById(R.id.ad);
    ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo ni = cm.getActiveNetworkInfo();
    if (ni == null) {
      // There are no active networks.
      //Set the visibility to "gone".
      //You can set visibility to gone here or when the function returns,
      //that is why there is a return false and true. 
      myView.setVisibility(8);
      return false;
    } else
    return true;
} 
```

您还需要将这些权限添加到清单文件中：

```
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T05:15:27.380

要检查数据连接是否可用，请使用以下功能

还要在 Manifest 中添加权限：

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

在活动中：

```
public boolean netCheckin() {

try {

    ConnectivityManager nInfo = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    nInfo.getActiveNetworkInfo().isConnectedOrConnecting();

    // Log.d(tag, "Net avail:"
       // + nInfo.getActiveNetworkInfo().isConnectedOrConnecting());

    ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo netInfo = cm.getActiveNetworkInfo();
    if (netInfo != null && netInfo.isConnectedOrConnecting()) {
        //Log.d(tag, "Network available:true");

        return true;
    } else {
    // Log.d(tag, "Network available:false");

        return false;
    }

} catch (Exception e) {

    return false;
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-10T13:11:43.600

试试这个

```
 ad.setAdListener(new AdListener() {

    @Override
    public void onAdLoaded() {
        ad.setVisibility(View.VISIBLE);
    }

    @Override
    public void onAdFailedToLoad(int error) {
        ad.setVisibility(View.GONE);
    }    

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-10T15:55:56.257

添加 Kotlin 版本的 Abed Putra 的[答案](https://stackoverflow.com/a/44473675/13855858)

```
MobileAds.initialize(this)
var madView = findViewById<AdView>(R.id.adView)
madView.loadAd(AdRequest.Builder().build())
madView.adListener = object: AdListener(){
    override fun onAdFailedToLoad(p0: Int) {
        madView.visibility = GONE
    }
} 
```

# php - 重新加载页面后会话有不同的元素？

> ID：11919763
> 
> 赞同：0
> 
> 时间：2012-08-12T04:37:09.473
> 
> 标签：php, arrays, session

第 1 页：

```
session_start();
$_SESSION['allCaps']=array("img01.png", "img02.png"...);  // 20 images 
```

第2页：

```
shuffle($_SESSION['allCaps']);
$_SESSION['fiveCaps'] = array_slice($_SESSION['allCaps'], 0, 5);
foreach ($_SESSION['fiveCaps'] as $key=>$val)
echo $key." ".$val;   // result - five img.names - remember this 
```

第 3 页：

```
session_start();
shuffle($_SESSION['fiveCaps']);
foreach ($_SESSION['fiveCaps'] as $key=>$val)
echo $key." ".$val;   // result - five img. names - remember this 
```

我希望这两个结果总是相同的，当然除了元素的排序（因为第 3 页上的随机播放）。
但有时结果是一样的，有时（重新加载 page3 后）-不在
page3 上出现 page2 上不存在的元素

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T04:44:53.377

从第 3 页删除这一行：

```
session_start(); 
```

此外，请注意有时会话会丢失，因为 Web 服务器已重新启动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T04:51:44.490

我试了一下，没有发现问题。我想这是因为您在第 3 页再次开始会话。删除行：

```
session_start(); 
```

在第 3 页，请让我知道它是否有效。:)

# python - python字典中的累积数字

> ID：11919765
> 
> 赞同：0
> 
> 时间：2012-08-12T04:37:53.267
> 
> 标签：python, python-2.7

我想在字典中添加数字，累积，所以它会添加字典的键。

```
x = ' '
dict = {}
list = []
while x != '':
x = raw_input('Enter line:')
p = x.split(' ')
if x != '':
    list.append(p)
result = sum(list, [])
result = result
num = []
for a in result:
for n in dict:
    p = a.count(a)
    l = a
    if n == l:
        l += l
dict[a] = p
print dict

raw_input('') 
```

我希望“dict”由输入中的单词和输入的次数组成。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T04:39:26.710

Python 2.7 有[`collections.Counter`](http://docs.python.org/dev/library/collections.html#collections.Counter)它可以用来给你一个运行的单词总数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-12T04:45:25.727

使用`Counter`：

```
from collections import Counter
x=raw_input('enter line\n')
if x.strip():
    x=x.split()
    count=Counter(x)
    dic=dict(count)
    print dic
else:
    print 'you entered nothing' 
```

**输出：**

```
>>> 
enter line
cat cat spam eggs foo foo bar bar bar foo
{'eggs': 1, 'foo': 3, 'bar': 3, 'cat': 2, 'spam': 1} 
```

并且不使用`Counter`（不推荐）你可以使用`sets`：

```
dic= {}
x = raw_input('Enter line:')
if x.strip():
    p = x.split()
    for x in set(p):   #set(p) contains only unique elements of p
        dic[x]=p.count(x)
    print dic
else:
    print 'you entered nothing' 
```

**输出：**

```
>>> 
Enter line: cat cat spam eggs foo foo bar bar bar foo
{'eggs': 1, 'foo': 3, 'bar': 3, 'cat': 2, 'spam': 1} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-12T04:52:36.470

```
from collections import Counter

lines = iter(lambda: raw_input('Enter line:'), '') # read until empty line
print Counter(word for line in lines for word in line.split()).most_common() 
```

# jquery - 偏移滚动顶部

> ID：11919766
> 
> 赞同：2
> 
> 时间：2012-08-12T04:38:36.570
> 
> 标签：jquery, html, scroll, offset

我有以下片段

```
$('html,body').animate({scrollTop: $('#menu').offset().top}, 'slow'); 
```

单击链接时，我希望浏览器从#menu div 的顶部*附近显示。*我希望它在菜单前只显示几行像素。

我怎样才能做到这一点？

我已将 paddingTop:5 添加到 offset() 但这不是预期的结果。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-12T04:49:43.337

只需从中减去您想要的任何金额`$('#menu').offset().top`：

```
$('html,body').animate({
    scrollTop: $('#menu').offset().top - 5 // or 10
}, 'slow'); 
```

这是小提琴：http: [//jsfiddle.net/qVWuv/](http://jsfiddle.net/qVWuv/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-22T12:31:34.713

此代码已修复它。

```
$(function() {
      $('a').click(function() {
        if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'') && location.hostname == this.hostname) {
          var target = $(this.hash);
          target = target.length ? target : $('[name=' + this.hash.slice(0) +']');
          if (target.length) {
            $('#content').animate({
              scrollTop: target.offset().top - 15
            }, 1000);
            return false;
          }
        }
      });
    }); 
```

# google-closure - 当鼠标移到 goog.ui.Control 上方时，如何调用函数？

> ID：11919771
> 
> 赞同：1
> 
> 时间：2012-08-12T04:40:05.243
> 
> 标签：google-closure, google-closure-library

当鼠标移到以下子类上方时，我尝试调用一个函数`goog.ui.Control`：

```
/** @override */
myapp.MyButton.prototype.handleMouseUp =
    function(e) {
  goog.base(this, 'handleMouseUp', e);
  alert('Woof!');
} 
```

但是，当我单击按钮时，不会显示警报。为什么不？`handleMouseUp`单击后鼠标抬起时不会被调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T05:22:55.463

的源代码`goog.ui.Control`包含以下注释：

> 所有控件分别在 show、hide、mouseover、mouseout 和用户操作上调度 SHOW、HIDE、ENTER、LEAVE 和 ACTION 事件。

要准确查看为各种操作调度了哪些事件，请查看**[goog.ui.Control 演示](http://closure-library.googlecode.com/svn/trunk/closure/goog/demos/control.html)**，它有一个实时事件日志。

为了启用添加转换事件，`goog.ui.Control`包括以下方法：

```
/**
 * Enables or disables transition events for the given state(s).  Controls
 * handle state transitions internally by default, and only dispatch state
 * transition events if explicitly requested to do so by calling this method.
 * @param {number} states Bit mask of {@link goog.ui.Component.State}s for
 *     which transition events should be enabled or disabled.
 * @param {boolean} enable Whether transition events should be enabled.
 */
goog.ui.Control.prototype.setDispatchTransitionEvents = function(states,
    enable) {
  this.statesWithTransitionEvents_ = enable ?
      this.statesWithTransitionEvents_ | states :
      this.statesWithTransitionEvents_ & ~states;
}; 
```

例如，您可以执行以下操作来启用所有状态的转换事件。

```
var myButton = new myapp.MyButton();
myButton.setDispatchTransitionEvents(goog.ui.Component.State.ALL, true); 
```

现在，当鼠标按钮按下时，该`activate`事件将被分派，而在释放鼠标按钮时，该`deactivate`事件将被分派。

请参阅**[goog.ui.Button 演示](http://closure-library.googlecode.com/svn/trunk/closure/goog/demos/button.html)**（特别是页面底部附近的组合切换按钮）。

# ruby-on-rails-3 - 一对属性的唯一性不起作用

> ID：11919774
> 
> 赞同：0
> 
> 时间：2012-08-12T04:40:51.323
> 
> 标签：ruby-on-rails-3, validates-uniqueness-of

我有一个用户模型，其中包含电子邮件和大学 ID

我在我的模型文件中添加了以下行：

```
validates_uniqueness_of :email, :scope => [:university_id] 
```

但是当我尝试使用相同的电子邮件但不同的 university_id 创建用户时，我收到以下错误消息：

```
ActiveRecord::RecordNotUnique in UsersController#create

SQLite3::ConstraintException: column email is not unique: INSERT INTO "users" ("name", "email", "password", "created_at", "updated_at", "university_id") VALUES ('my name', 'myusername', 'asdfgh', '2012-08-12 04:31:39.135115', '2012-08-12 04:31:39.135115', 2) 
```

我知道 email 不是唯一的，但是这对 email, university_id 是唯一的，那么为什么我会收到这个异常，我该如何解决呢？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T06:09:01.390

如果您的数据库中有唯一性约束，它可能与 ActiveRecord 的唯一性约束冲突。检查您的迁移并删除约束（如果存在）。

# python - 用实例方法中的浮点数替换实例？

> ID：11919780
> 
> 赞同：2
> 
> 时间：2012-08-12T04:42:20.390
> 
> 标签：python, class, types, python-2.7

我正在编写一个 Python 脚本来解析一些数据。目前我正在尝试创建一个创建“占位符”对象的类。我打算反复传递每个“占位符”变量，最后*把它变成*一个字典、浮点数、列表或字符串。由于需要一段时间来描述的原因，如果我可以通过调用方法来替换实例会容易得多。

这是一个简化的例子

```
class Event( dict ):

    def __init__( self ):

        self.sumA = 0.0
        self.sumB = 0.0

    def augmentA( self, i ):

        self.sumA += i

    def augmentB( self, i ):

        self.sumB += i

    def seal( self ):

        if self.sumA != 0 and self.sumB != 0:
            self = [ sumA, sumB ]

        elif self.sumA != 0:
            self = float( sumA )

        elif self.sumB != 0:
            self = float( sumB ) 
```

我想做的是：

```
e = Event()
e.augmentA( 1 )
e.augmentA( 2 )
e.seal() 
```

...并让 'e' 变成一个浮点数。

我希望避免的是：

```
e = Event()
e.augmentA( 1 )
e.augmentA( 2 )
e = e.getSealedValue() 
```

我完全理解**我的“密封”方法中的“自我”只是一个局部变量**，不会对范围外的实例产生任何影响。但是，我不确定如何从实例中实现我想要的，这对我的代码来说最方便。我也明白我可以覆盖所有的内置插件（**getItem**，**toStr**），但这会使我的代码复杂化很多。

我是一个 Python 菜鸟，所以我不确定这是否可能。请放纵我：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T04:52:20.237

不，你不能通过调用一个方法来让一个变量值替换它自己。执行此操作的正常方法是您所说的：`e = e.getSealedValue()`

您可以使对象更改行为，但这通常被认为是一个坏主意，并且可能会导致代码高度不可维护。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T04:53:30.027

在某些情况下，Python 允许您动态更改对象的类。但是，并非**任何**对象都可以转换为**任何**类，如下例所示（为便于阅读而添加了换行符）：

```
>>> class A(object):
...   pass
...
>>> class B(object):
...   pass
...
>>> a = A()
>>> type(a)
<class '__main__.A'>

>>> a.__class__ = B
>>> type(a)
<class '__main__.B'>

>>> a.__class__ = int
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: __class__ assignment: only for heap types 
```

（我不知道我脑海中的确切规则，但如果你的类使用`__slots__`例如它们必须兼容才能进行转换）

但是，正如其他回答者指出的那样，通常这样做是一个非常糟糕的主意，即使有一种方法可以将对一个对象的每个引用转换为对另一个对象的引用。我不会说*永远*不要那样做，这种技术可能有合法的用途（例如，我认为它是一种实现[状态设计模式](http://en.wikipedia.org/wiki/State_pattern)的简单方法，而不会造成不必要的混乱）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-12T04:54:42.257

即使有一些理智的方法可以让它工作，我也会避免走这条路，因为它会将对象的类型更改为与其现有合同完全不兼容的东西。

现在，有人可以说“但我只在一个地方使用它，其他代码路径永远不会看到旧合约”，但不幸的是，这不是这种机制的论据，因为你只能简单地使值可用一旦你有了最终的对象，其他代码路径。

简而言之，不要这样做，甚至不要尝试。

# php - php绘图函数

> ID：11919782
> 
> 赞同：-1
> 
> 时间：2012-08-12T04:42:38.433
> 
> 标签：php

我正在尝试在 php 中创建一个简单的函数，它将接受一些 int 输入并使用它们来绘制一个矩形，但下面的函数不起作用......

```
<?php

$img = imagecreatetruecolor(500, 500);

$white = imagecolorallocate($img, 255, 255, 255);
$red   = imagecolorallocate($img, 255,   0,   0);
$green = imagecolorallocate($img,   0, 255,   0);

//set canvas background to white
imagefill($img, 0, 0, $white);

//THIS FUNCTION IS NOT WORKING
function draw($x1Pos, $y1Pos, $x2Pos, $y2Pos, $colour) {

    imagerectangle($img, $x1Pos, $y1Pos, $x2Pos, $y2Pos, $colour);
}

draw(20, 40, 60, 80, $red);
draw(30, 40, 80, 100, $green);

imagerectangle($img, 150, 100, 300, 250, $green);
imagerectangle($img, 100, 100, 200, 200, $blue);

header("Content-type: image/png");
imagepng($img);
imagedestroy($img);

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T04:45:46.397

您的代码失败有两个原因；首先，`$img`永远不会传递给函数。您要么需要在函数中将其声明为全局，要么通过参数传递它。

其次，`$blue`不存在。替换它或实际将其写入存在，并且您的代码可以正常工作。

# matlab - 从matlab获取多个输出到c#

> ID：11919783
> 
> 赞同：1
> 
> 时间：2012-08-12T04:42:47.027
> 
> 标签：matlab, c#-4.0, .net-assembly

我已经在 matlab 中编写了一些函数。现在我需要将它们的输出转换为 C# .net 形式。我可以成功地通过 .Net Assembly 将它们完全连接起来，并且能够获得一个函数的输出，该函数只返回一个输出到 c#。现在我想要用一个返回多个输出的函数来做。有没有什么特别的方法可以做到这一点？？？？？？

谢谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T08:54:22.390

DLL中可用的方法有不同的签名，只需使用正确的，将方法的第一个输入参数作为输出数，然后它将返回一个MWArray数组作为输出：（即下面，2表示我希望有一个大小为 2 的输出数组）

```
 MWArray[] res = MatlabDll.callMethod(2, x, y); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T06:35:29.097

C# 使用[元组类](http://msdn.microsoft.com/en-us/library/system.tuple.aspx)来解决这个问题。

# javascript - d3 可重用直方图

> ID：11919787
> 
> 赞同：2
> 
> 时间：2012-08-12T04:43:43.210
> 
> 标签：javascript, d3.js

我一直在尝试在使用 d3 绘制的直方图上实现可重用性。我希望在绘制数据集之后，我想在同一个图上绘制统计平均值、方差等。这些将是用户驱动的，基本上我想使用同一个图。

这是我对骨架直方图代码进行编码的尝试

```
function histogram(){

//Defaults
 var margin = {top: 20, right: 20, bottom: 20, left: 20},
  width = 760,
  height = 200;

function chart(selection){

    selection.each(function(d,i){

    var x = d3.scale.linear()
    .domain( d3.extent(d) )
    .range( [0, width] );

    var data = d3.layout.histogram()
        //Currently generates 20 equally spaced bars
        .bins(x.ticks(20))
        (d);

    var y = d3.scale.linear()
        .domain([0, d3.max(d) ])
        .range([ height - margin.top - margin.bottom, 0 ]);

    var xAxis = d3.svg.axis()
        .scale(x)
        .orient("bottom");

    var yAxis = d3.svg.axis()
        .scale(y)
        .orient("left");

    var svg = d3.select(this).append("svg")
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom)
      .append("g")
        .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

    var bar = svg.selectAll(".bar")
        .data(data)
      .enter().append("g")
        .attr("class", "bar");

    /*
        Corrected bars
         bar.append("text")
            .attr("dy", ".75em")
            .attr("y", 6)
            .attr("x", x(data[0].dx) / 2)
            .attr("text-anchor", "middle")
            .text(function(d) { return formatCount(d.y); });
        */

    svg.append("g")
        .attr("class", "x axis")
        .attr("transform", "translate(0," + height + ")")
        .call(xAxis); 

    svg.append("g")
        .attr("class","y axis")
        .call(yAxis);

    bar.append("rect")
        .attr("x", function(d,i){ return x(d.x); })
        .attr("width", x(data[0].dx) - 1)
        .attr('y',height)    
      .transition()
      .delay( function(d,i){ return i*50; } )
        .attr('y',function(d){  return y(d.y) })
        .attr("height", function(d) { return height - y(d.y); });

    });

}

 //Accessors//       
chart.width = function(value) {
    if (!arguments.length) return width;
    width = value;
    return chart;
};

 chart.height = function(value) {
    if (!arguments.length) return height;
    height = value;
    return chart;
};

return chart;

} 
```

它为条分配负宽度。我的输入数据集只是一个数字数组，我需要绘制频率分布

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T16:21:18.570

如果您询问如何实现平均标准偏差，一旦您有了直方图，您就可以在其上绘制线条和文本来表示平均。我会计算平均值所在的条形图，以及通过条形图的百分比，然后是这样的：

```
var averageBar = vis.selectAll("g.bar:nth-child(" + (averageBarIndex + 1) + ")");
averageBar.append("svg:line")
.attr("x1", 0)
.attr("y1", y.rangeBand()*averageBarPercentage)
.attr("x2", w)
.attr("y2", y.rangeBand() * averageBarPercentage)
.style("stroke", "black");

averageBar.append("svg:text")
.attr("x", w-150)
.attr("y", y.rangeBand() * averageBarPercentage-15)
.attr("dx", -6)
.attr("dy", "10px")
.attr("text-anchor", "end")
.text("Average"); 
```

这会给你一条标记平均值的线，你可以对标准偏差做类似的事情。

# iphone - 当中心不在屏幕上时，GL_POINT 不渲染

> ID：11919788
> 
> 赞同：0
> 
> 时间：2012-08-12T04:43:49.950
> 
> 标签：iphone, opengl-es, point

我正在制作一款涉及使用 GL_POINT 渲染点的 iPhone 游戏。但是，当点的中心不在屏幕上时，我仍然想绘制仍然在屏幕上的点的任何部分。这是我用来渲染要点的代码。

```
-(void)render {
    if (!fill || !outline || !active || dead) 
        return;

    NSLog(@"rendering");

    glPushMatrix();
    glLoadIdentity();
    glMultMatrixf(matrix);

    glEnable(GL_BLEND);
    glBlendFunc (GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
    glEnable(GL_SMOOTH);
    glEnable(GL_POINT_SMOOTH);

    glPointSize(scale.x*2);

    [outline render];

    glPointSize(2*(scale.x-kLineWidth));

    [fill render];

    glPopMatrix();
} 
```

请注意，它会记录`"rendering"`应该渲染的时间，因此可以正确调用此方法。

和方法看起来像`[outline render]`这样`[fill render]`

```
-(void)render {
    // load arrays into the engine
    glVertexPointer(vertexSize, GL_FLOAT, 0, vertexes);
    glEnableClientState(GL_VERTEX_ARRAY);
    glColorPointer(colorSize, GL_FLOAT, 0, colors); 
    glEnableClientState(GL_COLOR_ARRAY);

    //render
    glDrawArrays(renderStyle, 0, vertexCount);

    glDisableClientState(GL_VERTEX_ARRAY);
    glDisableClientState(GL_COLOR_ARRAY);
} 
```

我正在使用此代码使用“平移”效果

```
glMatrixMode(GL_PROJECTION);
glLoadIdentity();
glOrthof(-kScreenWidth/2.0 + xPan, kScreenWidth/2.0 + xPan, -kScreenHeight/2.0 + yPan, kScreenHeight/2.0 + yPan, -1.0f, 1.0f);

glMatrixMode(GL_MODELVIEW); 
```

但是当点的中心不在屏幕上时（用 平移后`glOrthof`），整个点都不会被绘制。即使中心不在屏幕上，我怎样才能让点仍然呈现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T14:46:46.567

我不相信您可以做任何事情来轻松解决问题。基元在光栅化之前被剪裁，因此如果该点位于视锥体之外，它不会被光栅化，即使光栅化会创建确实位于视锥体内的片段。

使用 GL_TRIANGLES/GL_QUADS 切换到真正的四边形，或者如果你真的不想这样做，你可以将你的点渲染到一个尺寸略大于视口的屏幕外缓冲区，然后将该图像的中心 blit 回到主框架。

# c - 我的内存泄漏在哪里？

> ID：11919792
> 
> 赞同：-2
> 
> 时间：2012-08-12T04:44:32.783
> 
> 标签：c

有人可以帮我找到我的内存泄漏吗？我使用 valgrind 检查泄漏，但找不到它报告的泄漏。谢谢！

```
bigint* bi_create(const char* charint)
{

    int length = 0;
    const char* temp;
    int flag = 0;

    temp = charint;

   while(*charint != '\0')
    {

        length++;
        charint++;            
    }

    char chartoint[length];

    charint = temp;

    //printf("LENGTH = %d \n", length);

    bigint* bi = malloc(sizeof(bigint));

    bi->length = length; 

    int counter = 0;

    bi->initialzero = 0;

    while(*charint != '\0')
    {
        if(*charint == '0'  && flag != 1)
        {
            (bi->initialzero)++;
        }else
        {
            flag = 1;
        }

        chartoint[counter] = *charint;

      //  printf("CHARTOINT = %c \n", chartoint[counter]);
        charint++;
        counter++;

    }

    bi->data = atoi(chartoint);

    printf("DATA = %d \n", bi->data);
   // printf("INITIAL ZERO = %d \n", bi->initialzero);

    return bi;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T04:50:38.280

此函数中没有内存泄漏。但是，如果这个函数分配的内存没有被调用者释放，它就会被泄露。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T04:52:16.817

在你的函数里面有**一个 malloc**：

```
bigint* bi = malloc(sizeof(bigint)); 
```

当您调用此函数时：

```
bigint my_big_int = bi_create(my_string); 
```

`free`离开前别忘了：

```
free(my_big_int); 
```

而已！

# solr - 计算solr中匹配单词的数量？

> ID：11919793
> 
> 赞同：5
> 
> 时间：2012-08-12T04:44:33.580
> 
> 标签：solr, count, matching

我想计算 solr 中匹配单词的数量，例如：

*   字段：文本：“我想每天去上学”。
*   我的查询：“去今天”

=> 匹配词数 = 2。

我怎样才能做到这一点？我可以在 solrconfig.xml 中设置它吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T07:55:53.460

我认为没有直接的方法可以得到这个。
但是，可以在调试查询时检查此信息。
调试跟踪将为您提供有关与文档中的哪些字段匹配的术语的信息。
但是，调试在性能上可能非常昂贵。
与突出显示相同。您可以在字段上跟踪匹配的术语，但这会很昂贵。
您也可以在 Solr 论坛上咨询专家

# objective-c - iOS 架构和组件

> ID：11919794
> 
> 赞同：2
> 
> 时间：2012-08-12T04:44:35.003
> 
> 标签：objective-c, ios, architecture, structure, reusability

很长一段时间以来，我一直在看objective c 示例，观看斯坦福大学的讲座，并玩弄一些代码来掌握创建iOS 应用程序的窍门。

但是，有几件事我找不到一个好的答案：

1.  如何正确分离图层？我了解 MVC 结构，并且看到了一些为模型创建类别以实现业务逻辑的示例。这是正确的方法，通过丰富模型还是我应该创建专用类（例如，验证用户、从 json 中提取模型、组订单）？

2.  视图应该有多聪明？我可以创建一个显示联系人的视图（通过分配联系人属性）还是应该为所有联系人字段创建单独的属性，或者视图是否应该通过委托调用请求它的信息？

3.  我在我的应用程序中使用故事板。在我的屏幕上，我想要一个导航栏，让我们说一个显示订单的视图。在其他屏幕上，我想重用订单视图。

    *   如何在其他 ViewController 中重用订单视图的 ViewController 和 View？
    *   如果我有 4 个具有相同外观和感觉的屏幕，我是否必须简单地将它们复制到情节提要中？这似乎很痛苦，如果我想改变我的背景怎么办？或者为所有视图添加一个按钮？当我创建一个设置向导时，我不想分别为每个屏幕定义外观。

来自 C# 背景，我可能必须进入 Objective-C 的心态 :)
对此的任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-12T05:44:22.503

1）ObjC-Categories 很容易扭曲你对你面临的主要问题的理解。**ObjC-Categories 是完全没有必要的**. 您总是可以通过子类化、对象组合、实际模型中的附加方法或控制器或视图中的一些自定义来处理这些扩展。因此，如果您需要格式化数据（例如模型中存在的数据）以在视图中显示——该任务通常会落在控制器中。至于您提供的示例：您可以在简单的情况下选择模型——同样，任何示例都可能值得专门的类，如果足够复杂或者它会让您避免冗余实现。请注意，这些可能是附属类，它们只是产生一个模型，或者它们可能是多个具体抽象类的组合。并非所有事物都需要完全符合**M-or-V-or-C的定义**. 您可以自由地使用 ObjC 的许多设计模式。将 MVC 视为 Cocoa 通常使用的模式——您将需要了解它们，并且您将需要知道如何子类化和扩展这些类型，但是随着实现远离 Cocoa 的库（例如随着复杂性的增加），这些模式失去了主导地位.

2）他们可以很聪明。但是，在 MVC 下，您希望将其实现集中在视图/表示方面。表示信息集合的视图实际上可以执行一些通常为控制器保留的任务——但是，您通常会承认该实现是专门`MONContactView`执行此操作的。如果你走这条路，你通常会这样做是为了便于重用或实现简单的界面。显示有关 a 的信息`Contact`可能非常复杂 - 在简单的场景中，这些任务通常由控制器处理。具体来说，a`MONAwesomeContactView`可能没有那么复杂（例如在 SLOC 中）`MONAwesomeContactViewController`（除非您有一些非常特殊的绘图或布局要执行）。更常见的是设置控制器的联系人，并让控制器将联系人数据推送到视图的字段。同样，在一个非常专业的子类的情况下——在某些情况下，视图可以很好地拥有自己的控制器。

3a) 创建一个类的多个实例并没有错。

3b) 无需复制。当闻到重复的味道时，我将实现推送到实际代码中——程序可以应用您想要的外观和感觉，或者根据您的需要添加或操作子视图。当然，它们不会出现在 Xcode 的 NIB 编辑器中。当然还有其他方法，但是这种复制经常使我将实现转移到已编译的代码中。实现两者的良好平衡并不难（就我个人而言，我的大部分观点都是以编程方式完成的，而不是使用 NIB）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T05:39:24.907

1.  这是一个非常抽象的问题，不清楚“层”是什么意思。是的，您应该在适当的情况下创建自己的类，但类别也为您提供了向现有类添加功能的选项。如果您可以更具体地提出问题，则更容易提供更好的答案。

2.  这是一个判断电话。如果您想创建一个知道如何显示您的联系人类型实例的视图类，这在我的书中很好。但是，如果该视图知道联系人在应用程序中的存储位置，那就不太好了。

3.  请记住，故事板中的内容是对象，而不是类。您不想尝试在另一个场景中重复使用来自一个场景的视图——这意味着在场景之间共享一个视图，这实际上是行不通的。如果您想在多个地方使用相同的订单视图，那将是创建类的好选择。另一方面，你*可以*设置你的故事板，让几个不同的场景都过渡到同一个场景。例如，如果您希望应用程序的不同部分以模态方式显示显示订单的场景，您可以这样做。

# web-services - 在浏览器刷新时编译 JSP 和 Java - Tomcat

> ID：11919804
> 
> 赞同：1
> 
> 时间：2012-08-12T04:48:48.580
> 
> 标签：web-services, jsp, tomcat, tomcat7

有什么方法可以设置 Tomcat 服务器，所以每当我对 Java 类或 JSP 页面进行更改时，更改都会在浏览器刷新时可见。
我很无聊停止和启动Tomcat。我想像 WAMP 的工作方式一样配置 Tomcat [您可以在浏览器刷新时看到 PHP 代码更改]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T05:25:06.247

如果是开发模式就可以了。不要将它用于生产的东西。

*   您不必重新启动服务器。您可以通过 Tomcat 管理器重新启动应用程序。

*   你甚至可以直接这样做：http://[hostname]:[port]/manager/reload?path=[/path/to/your/webapp]

或者

*   将您的上下文定义为可重新加载

注意：**不建议将元素直接放在 server.xml 文件中** 查看 Tomcat 配置指南

对于 java 类：**可重新加载**

> 如果您希望 Catalina 监视 /WEB-INF/classes/ 和 /WEB-INF/lib 中的类的更改，请设置为 true，并在检测到更改时自动重新加载 Web 应用程序。此功能在应用程序开发期间非常有用，但它需要大量运行时开销，因此不建议在已部署的生产应用程序中使用。但是，您可以使用 Manager Web 应用程序来按需触发重新加载已部署的应用程序。
> 
> 注意 - 此属性的值将从您在周围 Context 组件上设置的可重新加载属性继承，并且您在此处显式设置的任何值都将被替换。(http://tomcat.apache.org/tomcat-7.0-doc/config/loader.html)

对于 JSP：**开发**($CATALINA_BASE/conf/web.xml)

> development - Jasper 是否用于开发模式？如果为 true，则可以通过 modifyTestInterval 参数指定检查 JSP 是否修改的频率。true 或 false，默认为 true。

希望这可以帮助

# java - 使用类加载器时如何加载资源？

> ID：11919805
> 
> 赞同：0
> 
> 时间：2012-08-12T04:49:07.870
> 
> 标签：java, resources, bcel

我正在使用 JarFile 和 JarURLConnection 从 jar 文件中加载文件。然后我学习这些课程，并通过 BCEL（字节码工程库，apache 库）加载它们。我不能直接使用类加载器，因为我用 BCEL 稍微修改了一些类。我需要将类按它们的字节加载到我的 bcel 加载器中。但是，我正在加载的类之一引用了资源。这个资源在 jar 里面，所以我可以得到这个文件（当迭代 JarFile 中的条目时，我忽略了常规文件，并取类文件以便稍后加载）。但是仅仅拥有该文件对我没有任何好处，因为该类将其作为资源加载。有什么方法可以从 jar 中获取该资源（我可以将其加载到 byte[] 中，

这里有很多东西，如果有什么令人困惑的地方，请在评论中提问，我可能说错了什么，或者完全错过了什么:) 谢谢

我将在这里展示一些我的类加载器（扩展 ClassLoader）：

```
@Override
public URL getResource(String name) {
    System.out.println("LOADING RESOURCE: " + name);

    try {
        return new URL(null, name, new Handler(files));
    } catch (MalformedURLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return null;
} 
```

现在，它正在打印出“加载资源：文件名”，但它随后给了我一个 MalformedURLException（我没有协议 atm，只有一个文件路径，这不是一个真正有效的路径，但它只是试图将它提供给我的处理程序下面的类）。

类处理程序扩展 URLStreamHandler {

```
@Override
protected URLConnection openConnection(URL u) throws IOException {

    return new URLConnection(u) {

        @Override
        public void connect() throws IOException {

        }
        @Override
        public InputStream getInputStream() throws IOException {
            System.out.println("IS: " + url);
            return /*method to get input steam*/;
        }

    };
} 
```

}

/*获取输入蒸汽的方法*/ 在我的真实代码中设置，但这与这里无关。那么有什么进一步的想法吗？

# r - 从主题列表中阻止引导程序

> ID：11919808
> 
> 赞同：11
> 
> 时间：2012-08-12T04:50:13.820
> 
> 标签：r, regression, plyr, statistics-bootstrap

我正在尝试有效地实现块引导技术来获得回归系数的分布。主要大纲如下。

我有一个面板数据集，并说公司和年份是指数。对于引导程序的每次迭代，我希望对 n 个主题进行替换抽样。从这个样本中，我需要构建一个新的数据框，它是`rbind()`每个采样对象的所有观察值的堆栈，运行回归并提取系数。重复一堆迭代，比如 100 次。

*   每个公司都可能被多次选择，所以我需要在每次迭代的数据集中多次包含它的数据。
*   使用循环和子集方法，如下所示，在计算上似乎很繁重。
*   请注意，对于我的真实数据框，n 和迭代次数远大于下面的示例。

我最初的想法是使用命令将现有数据框按主题分解为列表`split()`。从那里，使用

```
sample(unique(df1$subject),n,replace=TRUE) 
```

获取新列表，然后可能`quickdf`从`plyr`包中实现以构造一个新的数据框。

慢代码示例：

```
require(plm)
data("Grunfeld", package="plm")

firms = unique(Grunfeld$firm)
n = 10
iterations = 100
mybootresults=list()

for(j in 1:iterations){

  v = sample(length(firms),n,replace=TRUE)
  newdata = NULL

  for(i in 1:n){
    newdata = rbind(newdata,subset(Grunfeld, firm == v[i]))
  }

  reg1 = lm(value ~ inv + capital, data = newdata)
  mybootresults[[j]] = coefficients(reg1)

}

mybootresults = as.data.frame(t(matrix(unlist(mybootresults),ncol=iterations)))
names(mybootresults) = names(reg1$coefficients)
mybootresults

  (Intercept)      inv    capital
1    373.8591 6.981309 -0.9801547
2    370.6743 6.633642 -1.4526338
3    528.8436 6.960226 -1.1597901
4    331.6979 6.239426 -1.0349230
5    507.7339 8.924227 -2.8661479
...
... 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-12T05:47:16.663

像这样的东西怎么样：

```
myfit <- function(x, i) {
   mydata <- do.call("rbind", lapply(i, function(n) subset(Grunfeld, firm==x[n])))
   coefficients(lm(value ~ inv + capital, data = mydata))
}

firms <- unique(Grunfeld$firm)

b0 <- boot(firms, myfit, 999) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-12T18:35:17.750

您还可以使用带有固定块重采样方案的包中的[tsboot](http://stat.ethz.ch/R-manual/R-patched/library/boot/html/tsboot.html)功能。`boot`

```
require(plm)
require(boot)
data(Grunfeld)

### each firm is of length 20
table(Grunfeld$firm)
##  1  2  3  4  5  6  7  8  9 10 
## 20 20 20 20 20 20 20 20 20 20

blockboot <- function(data) 
{
 coefficients(lm(value ~ inv + capital, data = data))

}

### fixed length (every 20 obs, so for each different firm) block bootstrap
set.seed(321)
boot.1 <- tsboot(Grunfeld, blockboot, R = 99, l = 20, sim = "fixed")

boot.1    
## Bootstrap Statistics :
##      original     bias    std. error
## t1* 410.81557 -25.785972    174.3766
## t2*   5.75981   0.451810      2.0261
## t3*  -0.61527   0.065322      0.6330

dim(boot.1$t)
## [1] 99  3

head(boot.1$t)
##        [,1]   [,2]      [,3]
## [1,] 522.11 7.2342 -1.453204
## [2,] 626.88 4.6283  0.031324
## [3,] 479.74 3.2531  0.637298
## [4,] 557.79 4.5284  0.161462
## [5,] 568.72 5.4613 -0.875126
## [6,] 379.04 7.0707 -1.092860 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-03-21T20:44:18.190

这是一种通常应该比接受的答案更快的方法，返回相同的结果并且不依赖于其他包（除了`boot`）。这里的关键是使用`which`和整数索引来构造每个 data.frame 复制而不是`split/subset`and `do.call/rbind`。

```
# get function for boot
myIndex <- function(x, i) {
  # select the observations to subset. Likely repeated observations
  blockObs <- unlist(lapply(i, function(n) which(x[n] == Grunfeld$firm)))
  # run regression for given replicate, return estimated coefficients
  coefficients(lm(value~ inv + capital, data=Grunfeld[blockObs,]))
} 
```

现在，引导

```
# get result
library(boot)
set.seed(1234)
b1 <- boot(firms, myIndex, 200) 
```

运行接受的答案

```
set.seed(1234)
b0 <- boot(firms, myfit, 200) 
```

让我们来个对比

使用索引

```
b1

ORDINARY NONPARAMETRIC BOOTSTRAP

Call:
boot(data = firms, statistic = myIndex, R = 200)

Bootstrap Statistics :
       original      bias    std. error
t1* 410.8155650 -6.64885086 197.3147581
t2*   5.7598070  0.37922066   2.4966872
t3*  -0.6152727 -0.04468225   0.8351341 
```

原版

```
b0

ORDINARY NONPARAMETRIC BOOTSTRAP

Call:
boot(data = firms, statistic = myfit, R = 200)

Bootstrap Statistics :
       original      bias    std. error
t1* 410.8155650 -6.64885086 197.3147581
t2*   5.7598070  0.37922066   2.4966872
t3*  -0.6152727 -0.04468225   0.8351341 
```

这些看起来很接近。现在，多一点检查

```
identical(b0$t, b1$t)
[1] TRUE 
```

和

```
identical(summary(b0), summary(b1))
[1] TRUE 
```

最后，我们将做一个快速基准测试

```
library(microbenchmark)
microbenchmark(index={b1 <- boot(firms, myIndex, 200)}, 
              rbind={b0 <- boot(firms, myfit, 200)}) 
```

在我的电脑上，这会返回

```
Unit: milliseconds
  expr      min       lq     mean   median       uq      max neval
 index 292.5770 296.3426 303.5444 298.4836 301.1119 395.1866   100
 rbind 712.1616 720.0428 729.6644 724.0777 731.0697 833.5759   100 
```

因此，直接索引在分布的每个级别上都快 2 倍以上。

*关于缺少固定效果的说明*
与大多数答案一样，可能会出现缺少“固定效果”的问题。通常，固定效应用作对照，研究人员对每个选定观察值中包含的一个或几个变量感兴趣。`myIndex`在这种主要情况下，将or`myfit`函数的返回结果限制为仅包含返回向量中感兴趣的变量没有（或很少）危害。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-04-26T23:10:09.260

需要修改解决方案以管理固定效果。

```
library(boot)  # for boot
library(plm)   # for Grunfeld
library(dplyr) # for left_join

## Get the Grunfeld firm data (10 firms, each for 20 years, 1935-1954)
data("Grunfeld", package="plm")

## Create dataframe with unique firm identifier (one line per firm)
firms <- data.frame(firm=unique(Grunfeld$firm),junk=1)

## for boot(), X is the firms dataframe; i index the sampled firms
myfit <- function(X, i) {
    ## join the sampled firms to their firm-year data
    mydata <- left_join(X[i,], Grunfeld, by="firm")
    ## Distinguish between multiple resamples of the same firm
    ## Otherwise they have the same id in the fixed effects regression
    ## And trouble ensues
    mydata  <- mutate(group_by(mydata,firm,year),
                      firm_uniq4boot = paste(firm,"+",row_number())
                      )
    ## Run regression with and without firm fixed effects
    c(coefficients(lm(value ~ inv + capital, data = mydata)),
    coefficients(lm(value ~ inv + capital + factor(firm_uniq4boot), data = mydata)))
    }

set.seed(1)
system.time(b <- boot(firms, myfit, 1000))

summary(b)

summary(lm(value ~ inv + capital, data=Grunfeld))
summary(lm(value ~ inv + capital + factor(firm), data=Grunfeld)) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-11-30T01:46:32.427

我找到了一种`dplyr::left_join`更简洁的方法，只需要大约 60% 的时间，并且给出的结果与 Sean 的答案相同。这是一个完整的独立示例。

```
library(boot)  # for boot
library(plm)   # for Grunfeld
library(dplyr) # for left_join

# First get the data
data("Grunfeld", package="plm")

firms <- unique(Grunfeld$firm)

myfit1 <- function(x, i) {
  # x is the vector of firms
  # i are the indexes into x
  mydata <- do.call("rbind", lapply(i, function(n) subset(Grunfeld, firm==x[n])))
  coefficients(lm(value ~ inv + capital, data = mydata))
}

myfit2 <- function(x, i) {
  # x is the vector of firms
  # i are the indexes into x
  mydata <- left_join(data.frame(firm=x[i]), Grunfeld, by="firm")
  coefficients(lm(value ~ inv + capital, data = mydata))
}

# rbind method
set.seed(1)
system.time(b1 <- boot(firms, myfit1, 5000))
  ##  user  system elapsed 
  ## 13.51    0.01   13.62 

# left_join method
set.seed(1)
system.time(b2 <- boot(firms, myfit2, 5000))
   ## user  system elapsed 
   ## 8.16    0.02    8.26 

b1
##        original     bias    std. error
## t1* 410.8155650  9.2896499 198.6877889
## t2*   5.7598070  0.5748503   2.5725441
## t3*  -0.6152727 -0.1200954   0.7829191

b2
##        original     bias    std. error
## t1* 410.8155650  9.2896499 198.6877889
## t2*   5.7598070  0.5748503   2.5725441
## t3*  -0.6152727 -0.1200954   0.7829191 
```

# php - 为多个应用程序文件夹使用一个配置目录

> ID：11919812
> 
> 赞同：0
> 
> 时间：2012-08-12T04:51:38.437
> 
> 标签：php, codeigniter

这是我当前的目录设置。

```
application
- controllers
- models
- views
- config
- errors

public <-- document root
- images
- js
- css 
```

我想做的就是这样设置

```
frontapp
- controllers
- models
- views

membersapp
- controllers
- models
- views

adminapp
- controllers
- models
- views

config
errors
public 
```

这个设置可以让我为应用程序的每个部分组织所有控制器、模型和视图。我的问题是如何将配置和错误目录移出应用程序目录并允许它用于每个应用程序部分？我认为这可能的唯一方法是如果我修改了系统文件，但我不想这样做，因为更新会很糟糕。如果有更好的方法来做我想要完成的事情，请告诉我。谢谢

ps：我试图做的事情是否被称为模块化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T05:13:35.003

您始终可以在每个应用程序中创建指向您的配置和错误文件夹的符号链接：

```
ln -s config frontapp/config
ln -s config membersapp/config
ln -s config adminapp/config

ln -s errors frontapp/config
ln -s errors membersapp/config
ln -s errors adminapp/config 
```

符号链接也将在流行的版本控制系统中继承，例如 git。

这个技巧对于根据环境链接到不同的配置文件也非常有用：

```
Dev: ln -s config-dev config
Stage: ln -s config-stage config
Production: ln -s config-prod config 
```

# c++ - 提升属性树性能

> ID：11919820
> 
> 赞同：0
> 
> 时间：2012-08-12T04:53:27.757
> 
> 标签：c++, boost

我计划为我们的应用程序使用 boost 属性树[http://www.boost.org/doc/libs/1_41_0/doc/html/property_tree.html](http://www.boost.org/doc/libs/1_41_0/doc/html/property_tree.html)。现在我想知道，每次我们调用这个方法 pt.get("debug.level", 0); 它是再次读取整个文件还是从内部缓存中提供值。这个库有性能评估结果吗？它是否读取内存中的整个文件并从那里提供数据？任何人都可以分享他们使用这个库的经验吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T05:13:24.270

图书馆运作良好。您将文件加载到内存中，对属性树进行操作（查询、更新等），然后在完成后再次将其写出。

`boost::property_tree`我们已经将它用于一些足够大的 JSON 文件，当使用with将它们加载到 32 位机器上时会耗尽地址空间`std::string`。`std::string`用缓存字符串类替换工作正常。

对于您实际上只是查看配置文件的大多数应用程序来说，它会很好。

# c++ - 使用英特尔编译器套件编译 OpenMPI 应用程序

> ID：11919822
> 
> 赞同：1
> 
> 时间：2012-08-12T04:53:37.500
> 
> 标签：c++, openmpi, icc, rcpp, rinside

我在 linux 上有最新的 OpenMPI，它是用 Intel 编译器套件编译的。我正在尝试编译 OpenMPI 应用程序。我的特定应用程序使用 RInside 和 RcppEigen。如果我注释掉代码的 openMPI 部分，则编译字符串为：

```
icpc -I/usr/share/R/include -I/usr/lib/R/site-library/Rcpp/include -I/usr/local/lib/R/site-library/RInside/include -O3 -pipe -g -Wall  -I/usr/local/lib/R/site-library/RcppEigen/include   sjb_simple_smle_with_Rinside.cpp  -L/usr/lib/R/lib -lR  -lblas -llapack -L/usr/lib/R/site-library/Rcpp/lib -lRcpp -Wl,-rpath,/usr/lib/R/site-library/Rcpp/lib -L/usr/local/lib/R/site-library/RInside/lib -lRInside -Wl,-rpath,/usr/local/lib/R/site-library/RInside/lib  -o sjb_simple_smle_with_Rinside 
```

因此，我尝试使用 mpic++ 进行编译：

> mpic++ -I/usr/share/R/include -I/usr/lib/R/site-library/Rcpp/include -I/usr/local/lib/R/site-library/RInside/include -O3 -pipe - g -Wall -I/usr/local/lib/R/site-library/RcppEigen/include sjb_simple_smle_with_Rinside.cpp -L/usr/lib/R/lib -lR -lblas -llapack -L/usr/lib/R/site -library/Rcpp/lib -lRcpp -Wl,-rpath,/usr/lib/R/site-library/Rcpp/lib -L/usr/local/lib/R/site-library/RInside/lib -lRInside -Wl ,-rpath,/usr/local/lib/R/site-library/RInside/lib -o sjb_simple_smle_with_Rinside

如果我取消注释

```
#include "mpi.h" 
```

并尝试编译，我得到以下错误。使用英特尔编译器编译 OpenMPI 应用程序有什么技巧吗？完整的源代码如下：

```
stevejb@ursamajor:~/Projects/big_data_sim_mle/simple_smle/R_inside_version$ mpic++ -I/usr/share/R/include -I/usr/lib/R/site-library/Rcpp/include -I/usr/local/lib/R/site-library/RInside/include -O3 -pipe -g -Wall -I/usr/local/lib/R/site-library/RcppEigen/include sjb_simple_smle_with_Rinside.cpp -L/usr/lib/R/lib -lR -lblas -llapack -L/usr/lib/R/site-library/Rcpp/lib -lRcpp -Wl,-rpath,/usr/lib/R/site-library/Rcpp/lib -L/usr/local/lib/R/site-library/RInside/lib -lRInside -Wl,-rpath,/usr/local/lib/R/site-library/RInside/lib -o sjb_simple_smle_with_Rinside -shared-intel -I/usr/local/include -pthread -L/usr/local/lib -lmpi_cxx -lmpi -ldl -lm -Wl,--export-dynamic -lrt -lnsl -lutil
/usr/local/include/openmpi/ompi/mpi/cxx/datatype.h(142): error: expected a type specifier
    virtual void Free();
                 ^

/usr/local/include/openmpi/ompi/mpi/cxx/datatype.h(142): error: expected a ")"
    virtual void Free();
                 ^

/usr/local/include/openmpi/ompi/mpi/cxx/datatype.h(142): error: expected an identifier
    virtual void Free();
                 ^

/usr/local/include/openmpi/ompi/mpi/cxx/datatype.h(142): error: "virtual" is not allowed
    virtual void Free();
    ^

/usr/local/include/openmpi/ompi/mpi/cxx/datatype.h(142): error: expected a ";"
    virtual void Free();
                 ^

/usr/local/include/openmpi/ompi/mpi/cxx/op.h(48): error: expected a type specifier
    virtual void Free();
                 ^

/usr/local/include/openmpi/ompi/mpi/cxx/op.h(48): error: expected a ")"
    virtual void Free();
                 ^

/usr/local/include/openmpi/ompi/mpi/cxx/op.h(48): error: expected an identifier
    virtual void Free();
                 ^

/usr/local/include/openmpi/ompi/mpi/cxx/op.h(48): error: "virtual" is not allowed
    virtual void Free();
    ^

/usr/local/include/openmpi/ompi/mpi/cxx/op.h(48): error: expected a ";"
    virtual void Free();
                 ^

/usr/local/include/openmpi/ompi/mpi/cxx/request.h(96): error: expected a type specifier
    virtual void Free(void);
                 ^

/usr/local/include/openmpi/ompi/mpi/cxx/request.h(96): error: expected a ")"
    virtual void Free(void);
                 ^

/usr/local/include/openmpi/ompi/mpi/cxx/request.h(96): error: expected an identifier
    virtual void Free(void);
                 ^

/usr/local/include/openmpi/ompi/mpi/cxx/request.h(96): error: "virtual" is not allowed
    virtual void Free(void);
    ^

/usr/local/include/openmpi/ompi/mpi/cxx/request.h(96): error: expected a ";"
    virtual void Free(void);
                 ^

/usr/local/include/openmpi/ompi/mpi/cxx/group.h(111): error: expected a type specifier
    virtual void Free();
                 ^

/usr/local/include/openmpi/ompi/mpi/cxx/group.h(111): error: expected a ")"
    virtual void Free();
                 ^

/usr/local/include/openmpi/ompi/mpi/cxx/group.h(111): error: expected an identifier
    virtual void Free();
                 ^

/usr/local/include/openmpi/ompi/mpi/cxx/group.h(111): error: "virtual" is not allowed
    virtual void Free();
    ^

/usr/local/include/openmpi/ompi/mpi/cxx/group.h(111): error: expected a ";"
    virtual void Free();
                 ^

/usr/local/include/openmpi/ompi/mpi/cxx/comm.h(264): error: expected a type specifier
    virtual void Free(void);
                 ^

/usr/local/include/openmpi/ompi/mpi/cxx/comm.h(264): error: expected a ")"
    virtual void Free(void);
                 ^

/usr/local/include/openmpi/ompi/mpi/cxx/comm.h(264): error: expected an identifier
    virtual void Free(void);
                 ^

/usr/local/include/openmpi/ompi/mpi/cxx/comm.h(264): error: "virtual" is not allowed
    virtual void Free(void);
    ^

/usr/local/include/openmpi/ompi/mpi/cxx/comm.h(264): error: expected a ";"
    virtual void Free(void);
                 ^

/usr/local/include/openmpi/ompi/mpi/cxx/win.h(118): error: expected a type specifier
    virtual void Free(); 
                 ^

/usr/local/include/openmpi/ompi/mpi/cxx/win.h(118): error: expected a ")"
    virtual void Free(); 
                 ^

/usr/local/include/openmpi/ompi/mpi/cxx/win.h(118): error: expected an identifier
    virtual void Free(); 
                 ^

/usr/local/include/openmpi/ompi/mpi/cxx/win.h(118): error: "virtual" is not allowed
    virtual void Free(); 
    ^

/usr/local/include/openmpi/ompi/mpi/cxx/win.h(118): error: expected a ";"
    virtual void Free(); 
                 ^

/usr/local/include/openmpi/ompi/mpi/cxx/errhandler.h(59): error: expected a type specifier
    virtual void Free();
                 ^

/usr/local/include/openmpi/ompi/mpi/cxx/errhandler.h(59): error: expected a ")"
    virtual void Free();
                 ^

/usr/local/include/openmpi/ompi/mpi/cxx/errhandler.h(59): error: expected an identifier
    virtual void Free();
                 ^

/usr/local/include/openmpi/ompi/mpi/cxx/errhandler.h(59): error: "virtual" is not allowed
    virtual void Free();
    ^

/usr/local/include/openmpi/ompi/mpi/cxx/errhandler.h(59): error: expected a ";"
    virtual void Free();
                 ^

/usr/local/include/openmpi/ompi/mpi/cxx/info.h(84): error: expected a type specifier
    virtual void Free();
                 ^

/usr/local/include/openmpi/ompi/mpi/cxx/info.h(84): error: expected a ")"
    virtual void Free();
                 ^

/usr/local/include/openmpi/ompi/mpi/cxx/info.h(84): error: expected an identifier
    virtual void Free();
                 ^

/usr/local/include/openmpi/ompi/mpi/cxx/info.h(84): error: "virtual" is not allowed
    virtual void Free();
    ^

/usr/local/include/openmpi/ompi/mpi/cxx/info.h(84): error: expected a ";"
    virtual void Free();
                 ^

/usr/local/include/openmpi/ompi/mpi/cxx/request_inln.h(39): error: expected an identifier
  MPI::Request::Free() 
                ^

/usr/local/include/openmpi/ompi/mpi/cxx/request_inln.h(38): error: inline specifier allowed on function declarations only
  inline void
  ^

/usr/local/include/openmpi/ompi/mpi/cxx/request_inln.h(39): error: incomplete type is not allowed
  MPI::Request::Free() 
                ^

/usr/local/include/openmpi/ompi/mpi/cxx/request_inln.h(39): error: a nonstatic member reference must be relative to a specific object
  MPI::Request::Free() 
                ^

/usr/local/include/openmpi/ompi/mpi/cxx/request_inln.h(39): error: expected an expression
  MPI::Request::Free() 
                ^

/usr/local/include/openmpi/ompi/mpi/cxx/request_inln.h(39): error: expected a ")"
  MPI::Request::Free() 
                ^

/usr/local/include/openmpi/ompi/mpi/cxx/request_inln.h(40): error: expected a ";"
  {
  ^

/usr/local/include/openmpi/ompi/mpi/cxx/op_inln.h(123): error: identifier "ompi_op_set_cxx_callback" is undefined
      ompi_op_set_cxx_callback(mpi_op, (MPI_User_function*) func);
      ^

/usr/local/include/openmpi/ompi/mpi/cxx/op_inln.h(128): error: expected an identifier
  MPI::Op::Free()
           ^

/usr/local/include/openmpi/ompi/mpi/cxx/op_inln.h(127): error: inline specifier allowed on function declarations only
  inline void
  ^

/usr/local/include/openmpi/ompi/mpi/cxx/op_inln.h(128): error: incomplete type is not allowed
  MPI::Op::Free()
           ^

/usr/local/include/openmpi/ompi/mpi/cxx/op_inln.h(128): error: a nonstatic member reference must be relative to a specific object
  MPI::Op::Free()
           ^

/usr/local/include/openmpi/ompi/mpi/cxx/op_inln.h(128): error: expected an expression
  MPI::Op::Free()
           ^

/usr/local/include/openmpi/ompi/mpi/cxx/op_inln.h(128): error: expected a ")"
  MPI::Op::Free()
           ^

/usr/local/include/openmpi/ompi/mpi/cxx/op_inln.h(129): error: expected a ";"
  {
  ^

sjb_simple_smle_with_Rinside.cpp(35): warning #12: parsing restarts here after previous syntax error
  using namespace Rcpp;
                      ^

sjb_simple_smle_with_Rinside.cpp(77): error: identifier "as" is undefined
    const Map<MatrixXd> Xmat(as<Map<MatrixXd> >(Xmat_sexp));
                             ^

sjb_simple_smle_with_Rinside.cpp(77): error: type name is not allowed
    const Map<MatrixXd> Xmat(as<Map<MatrixXd> >(Xmat_sexp));
                                ^

sjb_simple_smle_with_Rinside.cpp(80): error: type name is not allowed
    const Map<MatrixXd> Ymat(as<Map<MatrixXd> >(Ymat_sexp));
                                ^

sjb_simple_smle_with_Rinside.cpp(87): error: type name is not allowed
    const Map<MatrixXd> ua(as<Map<MatrixXd> >(ua_sexp));
                              ^

sjb_simple_smle_with_Rinside.cpp(89): error: type name is not allowed
    const Map<MatrixXd> ub(as<Map<MatrixXd> >(ub_sexp));
                              ^

sjb_simple_smle_with_Rinside.cpp(98): error: type name is not allowed
    const Map<VectorXd> start_vector(as<Map<VectorXd> >(start_sexp));
                                        ^

compilation aborted for sjb_simple_smle_with_Rinside.cpp (code 2) 
```

完整的源代码：

```
// -*- mode: C++; c-indent-level: 4; c-basic-offset: 4; tab-width: 8; -*-
//
// SJB - first shot at RInside and Eigen combined
//
// Copyright (C) 2012             Stephen J. Barr
//
// GPL'ed 

#include <iostream>
#include <sstream>
#include <iomanip>
#include <fstream>
#include "mkl.h"
#include "math.h"
#include <vector>
#include <cmath>
#include <string>
#include <cstdlib>
#include <fcntl.h>
#include <sys/stat.h>
#include <ctype.h>
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <getopt.h>
#include <map>
#include <utility>

#include <RcppEigen.h>
#include <Rcpp.h>
#include <RInside.h>                            // for the embedded R via RInside
#include "mpi.h"

using namespace Rcpp;
using namespace Eigen;
using namespace std;
int main(int argc, char *argv[]) {

  const int N_TRU_PARAMS = 5;
  const int n = 1000;
  const int t = 100;
  const int nr = 500;

  RInside R(argc, argv);                      // create an embedded R instance 

  stringstream ss;
  ss << "n = " << n << "; t = " << t << ";" << " nr = " << nr << ";";
  cout << ss.str() << endl;
  R.parseEval(ss.str());

  VectorXd tru = VectorXd(N_TRU_PARAMS);
  tru << 2,1,-2,1,1;

  // R.parseEval("n = 100;");
  // R.parseEval("t = 100;");
  R.parseEval("set.seed(123)");
  string cmdstr = "tru = c(2,1,-2,1,1);"
                   "set.seed(123);"
                   "a = rnorm(n,tru[1],tru[2]);"
                   "b = rnorm(n,tru[3],tru[4]);"           
    //             Make some data lists   
                   "x = NULL;"
                   "y = NULL;"

    //             Generate some data for each firm
                   "for(i in 1:n) {"
                   "  x[[i]] = rnorm(t,1,1);"
                   "  y[[i]] = a[i]+b[i]*x[[i]]+ rnorm(t)*tru[5];"
    "}";

  R.parseEval(cmdstr);

  SEXP Xmat_sexp = R.parseEval("Xmat = do.call(rbind, x)");
  const Map<MatrixXd> Xmat(as<Map<MatrixXd> >(Xmat_sexp));

  SEXP Ymat_sexp = R.parseEval("Ymat = do.call(rbind, y)");
  const Map<MatrixXd> Ymat(as<Map<MatrixXd> >(Ymat_sexp));

  cout << "X: " << Xmat.rows() << " x " << Xmat.cols() << endl;
  cout << "Y: " << Ymat.rows() << " x " << Ymat.cols() << endl;

  // Make matrices ua and ub
  SEXP ua_sexp = R.parseEval(    "ua = matrix(rnorm(nr*n),n,nr)");
  const Map<MatrixXd> ua(as<Map<MatrixXd> >(ua_sexp));
  SEXP ub_sexp = R.parseEval(    "ub = matrix(rnorm(nr*n),n,nr)");
  const Map<MatrixXd> ub(as<Map<MatrixXd> >(ub_sexp));

  cmdstr = "track = 0;"
    "Y = unlist(y);"
    "X = unlist(x);"
    "start = lm(Y~X)$coeff;"
    "start =c(start[1],0,start[2],0);";
  R.parseEval(cmdstr);
  SEXP start_sexp = R.parseEval("start");
  const Map<VectorXd> start_vector(as<Map<VectorXd> >(start_sexp));

  cout << "Starting point: " << start_vector.transpose() << endl;

  // THERE ARE TWO PAIRS OF FUNCTIONS, smle_init and smle_nll_mpi
  // smle_init: distributes, using mpi broadcast, the necessary
  // data to all machines. 
  // 
  // smle_nll_mpi: assuming smle_init has been successfully completed
  // compute the negative log likelihood using MPI
  // 

  // for now, these functions will be written out in the code

  // // MPI INITIALIZATION
  // int rank, size;
  // const int root = 0;
  // cout << "Before init" << endl;
  // MPI::Init();
  // rank = MPI::COMM_WORLD.Get_rank();
  // size = MPI::COMM_WORLD.Get_size();
  // double * ua_ptr = ua.data();
  // double * ub_ptr = ub.data();

  cout << "Initializating MPI Broadcast" << endl;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T13:52:10.020

[RInside 包](http://dirk.eddelbuettel.com/code/rinside.html)附带了 MPI的*工作*示例：

```
edd@max:~$ ls -l /usr/local/lib/R/site-library/RInside/examples/mpi/
total 24
drwxr-xr-x 2 edd staff 4096 Jun 27 10:14 cmake
-rw-r--r-- 1 edd staff 1897 Jun 27 10:14 Makefile
-rw-r--r-- 1 edd staff 1224 Jun 27 10:14 rinside_mpi_sample0.cpp
-rw-r--r-- 1 edd staff 2896 Jun 27 10:14 rinside_mpi_sample1.cpp
-rw-r--r-- 1 edd staff 1137 Jun 27 10:14 rinside_mpi_sample2.cpp
-rw-r--r-- 1 edd staff 2836 Jun 27 10:14 rinside_mpi_sample3.cpp
edd@max:~$ 
```

为 make 和 CMake提供*工作*支持。我会从那里开始。添加对[RcppEigen](http://cran.r-project.org/package=RcppEigen)的支持可能很简单；[几天前，我刚刚在RInside](http://cran.r-project.org/package=RcppArmadillo)的 SVN 中添加了 RcppArmadillo 的另一个示例目录。

如果定义`Free()`balks 那么你可能有一个头文件冲突，你可以通过重新排序包含语句来避免。我没有英特尔编译器，所以我无能为力。

最后：获得 Rcpp 和 RInside 帮助的*推荐方法是在 rcpp-devel 邮件列表中询问。*

# java - Java俄罗斯方块游戏

> ID：11919823
> 
> 赞同：-3
> 
> 时间：2012-08-12T04:53:38.893
> 
> 标签：java, opengl, jpanel

我正在考虑为 Java 制作俄罗斯方块游戏，但无法决定如何绘制不同的瓷砖。
我的第一个想法是使用 JPanel 并删除 JPanel，每秒将它们向下移动 1 并允许用户旋转它们等。但是我遇到的问题是我将如何测试一条线是否已经制作。

我的另一个计划是使用 OpenGL，但我以前没有 OpenGL 方面的经验，所以我不完全确定我将如何进行游戏编程。

**我的问题是：**
使用 OpenGL 路径或 JPanel 路径会更聪明吗？如果是 JPanel 路径，关于我如何测试是否已经制作了一条线的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T05:04:31.457

嗯，我会学习 OpenGL，因为它用于各种游戏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T05:05:45.190

这取决于你做这个的认真程度。如果你没有更多的时间或者你想做一个简单的游戏，你可以使用 JPanel，但我的观点是 JPanel 没有足够的功能来制作这个游戏。OpenGL 是一个不错的选择。你说你没有openGL的经验。我说只是学习基本的 openGl 和基本功能，如变换、缩放、旋转等。你可以很容易地做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T05:09:36.960

如果你有时间，那就学习 OpenGL。但是像这样的游戏也可以用像 C 这样简单的东西来创建：

1.  首先创建一系列独特的形状；
2.  在运行时，您将用随机颜色（和随机方向）填充它们并从屏幕顶部下降；
3.  无论如何，可用的背景区域将是一个有限的区域矩阵并且不会被填充；
4.  在您的逻辑中，您将不断检查单行中的所有单元格是否都已填充。如果是这样，则清除它们并将上面的所有单元格移到下面的一行。

# java - 在 JButton 中使用匿名 ActionListener 隐藏 JFrame

> ID：11919824
> 
> 赞同：3
> 
> 时间：2012-08-12T04:53:40.080
> 
> 标签：java, swing, jframe, actionlistener, anonymous-inner-class

我有一个欢迎（或菜单）窗口（JFrame），每个可能的操作都有一些按钮（JButton）。每个都应该启动一个新窗口并隐藏欢迎窗口。我知道我可以做到这一点`setVisible(false);`。但我还不能让它工作。

这是我拥有的一个代码示例：

```
 _startBtn.addActionListener(new ActionListener(){
        @Override
        public void actionPerformed(ActionEvent e){
            System.out.println("_startBtn pressed");
            // Code to hide this JFrame and initialize another
        } 
```

我的问题是，我怎样才能使用像这样的匿名类呢？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T05:26:33.347

我正在为您发布一个示例，希望它对您有所帮助。

```
import java.awt.BorderLayout;
import java.awt.FlowLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFrame;

public class windows_test {
    JFrame login = null;
    JFrame inner_frame = null;

    public windows_test() {
        login = new JFrame();
        login.setBounds(10, 10, 300, 300);
        login.setLayout(new BorderLayout());

        JButton button = new JButton("Login");
        login.add(button, BorderLayout.CENTER);

        login.setVisible(true);

        button.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent arg0) {
                if (inner_frame == null) {
                    inner_frame = new JFrame();
                }
                inner_frame.setLayout(new FlowLayout(FlowLayout.CENTER));
                inner_frame.add(new JButton("inner frame"));
                inner_frame.setVisible(true);
                login.setVisible(false);
                inner_frame.setBounds(10, 10, 300, 300);
            }
        });
    }
} 
```

我会建议您使用 jpanel 而不是 jframes，但是您已经要求提供框架，所以我用它们创建了它。希望它会帮助您询问我是否在某个地方错了，或者您无法理解。

# android - 对收到的 SMS 执行操作

> ID：11919826
> 
> 赞同：0
> 
> 时间：2012-08-12T04:53:42.460
> 
> 标签：android, android-intent, android-emulator

收到短信时如何在android中执行操作？

下面的代码不起作用：

```
public class Sms extends BroadcastReceiver{
    AudioManager audioManager;

    public void onReceive(Context context, Intent arg1) {

        AudioManager audioManager = (AudioManager)context.getSystemService(Context.AUDIO_SERVICE);
        audioManager.setRingerMode(AudioManager.RINGER_MODE_NORMAL); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T18:56:57.927

您需要在 AndroidManifest.xml 中声明接收者，如下所示：

```
 <receiver android:name=".Sms">
        <intent-filter android:priority="2147483647">
            <action android:name="android.provider.Telephony.SMS_RECEIVED"></action>
        </intent-filter>
    </receiver> 
```

注意优先级 - 这将允许此接收器（其中一个）首先处理接收到的文本消息

# c# - 合并多个 ObservableCollections 的交集

> ID：11919829
> 
> 赞同：0
> 
> 时间：2012-08-12T04:55:38.467
> 
> 标签：c#, wpf, linq-to-objects, observablecollection, entity-framework-5

我有多个 ObservableCollection，我想从它们的交集中创建一个 ObservableCollection。此外，如果我用来查看单个和合并集合的所有列表框都在 1\. 相同的视图和 2\. 不同的视图中，那么在 MVVM 中组织它的最佳方式是什么。

我正在使用 WPF C#。

谢谢！任何链接或评论表示赞赏。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T08:30:59.150

您需要调用`intersection`两个集合中的一个并手动添加集合中的每个对象。这将使您入门，只需将答案中的`'Union'`关键字替换为 -[两个集合的交集](https://stackoverflow.com/questions/1565289/union-two-observablecollection-lists "两个集合的交集")`'Intersection'`

# c++ - std 流写入 void* 并返回

> ID：11919830
> 
> 赞同：0
> 
> 时间：2012-08-12T04:55:44.067
> 
> 标签：c++

如何让 fstream 写入 void 指针？

基本上我已经使用了 MapFileView 并从中获得了一个用于共享内存的 void 指针。

我使用 copymemory 在两个单独的应用程序之间来回复制一堆数据。

现在，我想使用 std 库通过 << 重载读取结构并将其写入我的映射内存（Local\MyMemMap，invalid_handle），然后通过 >> 重载将其读回。它不是您可以看到的物理文件。

基本上，如果可能，我想将 ifstream 和 ofstream 重定向到我的 void* 。否则，还有哪些其他标准流将允许我使用我的指针和运算符重载？

我只知道istream，osstream。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T05:28:55.883

operator<< 和 operator>> 用于格式化输入和输出。听起来您正在读取和写入原始字节。您应该为此使用 istream::read 和 ostream::write 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T07:44:02.333

这就是`std::strstream`自 C++98 以来不推荐使用但尚未从 C++11 标准中删除的原因。对于它的大部分用途，有一个更好的替代方案`std::stringstream`（您不必自己编写`std::streambuf`，只需使用

```
#include <strstream>

std::strstream memostream(reinterpret_cast<char*>(mem), memsize, reinterpret_cast<char*>(mem)); 
```

让一个流写入您的内存，以便在开始时写入。和

```
std::strstream memistream(reinterpret_cast<char*>(mem), memsize); 
```

在它开始时读取流。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T05:33:37.937

听起来您想编写一个自定义流来从映射的内存中读取和写入。这个[网页](http://www.mr-edd.co.uk/blog/beginners_guide_streambuf)可能会有所帮助。

# objective-c - NSSound setChannelMapping

> ID：11919831
> 
> 赞同：0
> 
> 时间：2012-08-12T04:56:16.877
> 
> 标签：objective-c, cocoa, nssound

我一直在试图弄清楚如何在 NSSound 类上使用 setChannelMapping。根据类文档“channelMapping Audio-channel-to-device-channel mappings for the receiver”。嗯好吗？然后它把我带入了一个包含大量图片的无用信息的迷宫。我和下一个人一样喜欢图片，但这对我没有多大帮助。我需要为此方法提供什么才能使其正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T15:36:31.913

我终于能够弄清楚（至少在我的情况下）该函数似乎接受了一个已填充 NSNumber 对象的 NSArray 。但是，您希望播放音频的每个通道都有一个 NSNumber。将 NSNumber 的值设置为通道索引。

# c++ - 未解决的外部

> ID：11919836
> 
> 赞同：7
> 
> 时间：2012-08-12T04:58:04.487
> 
> 标签：c++, linker, sdl, symbols, unresolved-external

我有一个未解决的外部符号错误让我抓狂。简而言之，我有一个 SDL_Surfaces ('DgSurface') 的包装类和一个用于加载和存储 DgSurfaces ('DgSurfaceList') 的类。尝试在我的项目中包含 DgSurfaceList 文件时会出现链接问题。这是我的课程：

头文件“DgSurface.h”包含 DgSurface 类声明：

```
 #ifndef DGSURFACE_H
    #define DGSURFACE_H

    #include "SDL.h"
    #include <string>

    class DgSurface
    {
    public:

        //Constructor/destructor
        DgSurface(std::string N, SDL_Surface* I): image(I), name(N) {}
        DgSurface() {name = ""; image = NULL;}
        ~DgSurface();

        //Copy operations
        DgSurface(const DgSurface&);
        DgSurface& operator= (const DgSurface&);

        //Data members
        std::string name;       //The name of the image
        SDL_Surface* image;     //The image
    };

    #endif 
```

cpp 文件“DgSurface.cpp”包含 DgSurface 定义：

```
#include "DgSurface.h"
#include "SDL.h"

//--------------------------------------------------------------------------------
//        Constructor
//--------------------------------------------------------------------------------
DgSurface::DgSurface(const DgSurface& other)
{
    //Copy name
    name = other.name;

    //Create new SDL_Surface 
    image = SDL_ConvertSurface(other.image, other.image->format, 0);
}

//--------------------------------------------------------------------------------
//        Destructor
//--------------------------------------------------------------------------------
DgSurface::~DgSurface()
{
    SDL_FreeSurface(image);
}

//--------------------------------------------------------------------------------
//        Assignment operator
//--------------------------------------------------------------------------------
DgSurface& DgSurface::operator= (const DgSurface& other)
{
    // if same object
    if ( this == &other )
        return *this;

    //Copy name
    name = other.name;

    //Create new SDL_Surface 
    image = SDL_ConvertSurface(other.image, other.image->format, 0);

    return *this;
} 
```

这个类似乎工作正常并且按预期执行（但是，一如既往，我愿意接受反馈:)。

“DgSurfaceList.h”包含 DgSurfaceList 类声明：

```
#ifndef DGSURFACELIST_H
#define DGSURFACELIST_H

#include "SDL.h"
#include <list>
#include <string>
#include "DgSurface.h"

class DgSurfaceList
{
    public:
        //Constructors/destructor
        DgSurfaceList() {}
        ~DgSurfaceList() {}

        //Functions
        bool AddImage(std::string location, std::string name);

        //Return Functions
        SDL_Surface* GetImage(std::string S) const;

    private:
        //Data members
        std::list<DgSurface> imlist;    //The list of DgSurfaces

        //Functions
        SDL_Surface* LoadImage( std::string filename );
};

#endif 
```

最后“DgSurfaceList.cpp”包含 DgSurfaceList 定义：

```
#include "SDL.h"
#include "SDL_image.h"
#include <list>
#include <string>
#include "DgSurface.h"
#include "DgSurfaceList.h"

//--------------------------------------------------------------------------------
//      Load an image from file
//--------------------------------------------------------------------------------
SDL_Surface* DgSurfaceList::LoadImage( std::string filename )
{
    //Loads an image from file, returns SDL_surface*
    ...

}   //End:DgSurfaceList::LoadImage()

//--------------------------------------------------------------------------------
//      Add a DgSurface to the list
//--------------------------------------------------------------------------------
bool DgSurfaceList::AddImage(std::string location, std::string name) 
{
    //Load the image
    DgSurface temp(name,LoadImage(location));

    //If there was an error in loading the image
    if( temp.image == NULL )
        return false;

    //If everything loaded fine, place a copy into imlist
    imlist.push_back(temp);

    return true;

}   //End: DgSurfaceList::AddImage();

//--------------------------------------------------------------------------------
//      Searches imlist for an image, returns a pointer to a SDL_Surface
//--------------------------------------------------------------------------------
SDL_Surface* DgSurfaceList::GetImage(std::string S) const
{
    std::list<DgSurface>::const_iterator i;

    //Search imlist for DgSurface of the same name
    for (i = imlist.begin(); i != imlist.end(); i++)
    {
        if (S.compare((*i).name) == 0)
            return (*i).image;
    }

    //Return Null if name not found
    return NULL;

}   //End:DgSurfaceList::GetImage() 
```

现在，如果我注释掉 cpp 文件中的 DgSurfaceList::GetImage() 定义，DgSurfaceList 似乎可以正常工作并正确存储图像。更具体地说，仅当我在上述函数中包含 for 循环时才会出现链接错误。会是什么呢？

其他信息：

错误：

```
unresolved external symbol __imp___CrtDbgReportW referenced in function "public: class 
DgSurface const & __thiscall std::_List_const_iterator<class std::_List_val<class 
DgSurface,class std::allocator<class DgSurface> > >::operator*(void)const " 
```

编码环境：Visual C++ express 2010

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-12T05:25:25.870

CrtDbgReport 仅在 C 运行时库的调试版本中定义。因此，也许您正在调试模式下编译，但与库的发布版本链接。另一种可能性是您在发布模式下编译，但您定义的某些宏导致 std::list 的调试版本被编译。

# css - 视觉（块重排）行的第一个元素的 CSS 选择器

> ID：11919838
> 
> 赞同：17
> 
> 时间：2012-08-12T04:59:08.307
> 
> 标签：css, layout, css-selectors

每个可视行的块项目的第一个元素是否有 CSS 选择器？也就是说，假设有 20 个块元素，它们跨越多行以适合其父容器；我可以选择每行最左边的项目吗？

通过查看所有元素的顶部位置在 JavaScript 中是可行的，但在纯 CSS 中是否可行？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-12T05:09:56.870

是的，它可以通过 CSS 实现，但前提是您可以修复每一行中的元素。

*由于您没有提供您的案例，这里是一个例子。*

假设您的元素以一个`ul`和`li`模式堆叠在一起，并且是三个连续的列表，那么您可以使用以下 css 片段。

```
li:first-child, li:nth-child(3n+1) {
    background: red;
} 
```

### [演示](http://jsfiddle.net/Starx/beT3c/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-12T05:05:59.633

不，没有选择器，您需要使用 JavaScript。

作为参考，下面是 CSS 选择器的一个很好的参考：http: [//www.w3.org/wiki/CSS/Selectors](http://www.w3.org/wiki/CSS/Selectors)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-01T21:30:23.117

不幸的是，仅靠 CSS 是不可能的。当我想确保每行上最左边的浮动元素总是从新行开始时，我遇到了这个问题。

我知道您正在寻找 CSS 解决方案，但我编写了这个**jQuery 插件，它识别每个可视行上的第一个元素**并将“clear:left”应用于它（您可以调整它来做任何事情）。

```
(function($) {

    $.fn.reflow = function(sel, dir) {

        var direction = dir || 'both';
        //For each conatiner
        return this.each(function() {
            var $self = $(this);

            //Find select children and reset clears
            var $elems = sel ? $self.find(sel) : $self.children();
            $elems.css('clear', 'none');
            if ($elems.length < 2) { return; }

            //Reference first child 
            var $prev = $elems.eq(0);

            //Compare each child to its previous sibling 
            $elems.slice(1).each(function() {
              var $elem = $(this);
              //Clear if first on visual row
              if ($elem.position().top > $prev.position().top) {
                $elem.css('clear', direction);
              }
              //Move on to next child
              $prev = $elem;
            });
        });
    };

})(jQuery); 
```

请参阅此代码笔示例[http://codepen.io/lukejacksonn/pen/EplyL](http://codepen.io/lukejacksonn/pen/EplyL)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-15T10:26:48.497

基于@lukejacksonn 的工作

这个在窗口调整大小时添加或删除一个类。

```
(function ($) {
  $.fn.reflow = function (sel, className) {
    if (className == null) throw new Error('className must be set');
    //For each conatiner
    return this.each(function () {
      var $self = $(this);

      //Find select children and reset clears
      var $elems = sel ? $self.find(sel) : $self.children();
      if ($elems.length < 2) {
        return;
      }

      //Reference first child 
      var $prev = $elems.eq(0);

      $elems.each(function () {
        $(this).removeClass(className);
      });

      //Compare each child to its previous sibling 
      $elems.slice(1).each(function () {
        var $elem = $(this);
        //Clear if first on visual row
        if ($elem.position().top > $prev.position().top) {
          $elem.addClass(className);
        }
        //Move on to next child
        $prev = $elem;
      });
    });
  };

  const markFirstRowElement = function () {
    $(".cd-progress-indicator").reflow('li', 'first-row-element');
  }
  $(function () {
    markFirstRowElement();
    $(window).resize(markFirstRowElement);
  });
})(jQuery); 
```

# arrays - x86 - 访问数组中元素的寻址模式

> ID：11919839
> 
> 赞同：1
> 
> 时间：2012-08-12T04:59:58.017
> 
> 标签：arrays, assembly, x86, addressing-mode

我正在努力学习汇编语言。有人可以解释和/或举例说明如何使用寻址模式来访问以下每种数组类型中的元素吗？

1.  数组`DWORD`

2.  结构数组，其中每个结构包含两个`DWORD`s

3.  数组数组，其中每个数组有 10`DWORD`秒

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T06:50:44.623

逻辑是微不足道的。

一维数组的第*i*个元素的地址就是数组（或第 0 个元素）的地址加上*i* * *element size*。

如果你有一个二维数组，你可以把它当作一维数组的一维数组，并将它简化为我刚刚描述的已经很熟悉的情况： a 的第*i*个 1-dim 子数组的地址2-dim 数组只是 2-dim 数组的地址加上*i* * *subarray size*。在第*i*个子数组中，我们已经知道如何计算第*j*个元素地址。

所以，二维数组的第*(i,j)个元素的地址就是数组的地址加上**i* *子数组*大小*+ *j* **元素大小*OR，等效地，数组的地址加上 ( *i* * *number行中的元素*数+ *j* ) **元素大小*。

您应该能够弄清楚如何用汇编语言做到这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-12T08:11:14.920

您没有提及您具体针对的是哪个处理器，但在 386+ 中这将起作用。我没有 MASM，但 MASM 使用 Intel 语法。

1.  让我们假设它`ebx`是基址寄存器并且`esi`是元素的索引寄存器。标准 32 位寄存器 ( `eax`, `ebx`, `ecx`, `edx`, `ebp`, `esi`, `edi`) 对此处使用的寻址模式有效。`esp`可以用作基址寄存器，但不能用作索引寄存器。索引寄存器的值可以选择用 2、4 或 8 进行缩放。在此示例中，我们可以为 dword 数组使用缩放因子 4（在 386 个合法缩放因子中为 1、2、4 和 8）。

    将数组中的值读入`eax`：`mov eax, [ebx+4*esi]` 将值存储`eax`到数组中：`mov [ebx+4*esi], eax`

2.  让我们保持静止`ebx`作为基地址。我们可以对结构数组使用比例因子 8 `esi`，其中每个结构由 2 个双字组成。

    将第一个 dword 的值读入`eax`：`mov eax, [ebx+8*esi]` 将 的值存储`eax`到第一个 dword 中：`mov [ebx+8*esi], eax`

    将第二个 dword 的值读入`eax`：`mov eax, [ebx+8*esi+4]` 将 的值存储`eax`到第二个 dword 中：`mov [ebx+8*esi+4], eax`

    如果无法对索引进行硬编码，则只需将 4 添加到`ebx`（或用于存储基地址的任何寄存器）。如果你有硬编码的基地址，那么你可以使用例如。`esi`解决结构和例如。`ebx`解决你想要的双字。请注意，在 386+ 中，您不能在间接寻址中扩展多个寄存器（索引寄存器）。

3.  让我们仍然假设您事先不知道数组的基地址，并且您将拥有它`ebx`，`esi`因为您拥有结构的索引，并且`edx`拥有双字的索引。

    要获取结构的地址，您可以使用`lea`乘法优化 (10 = 8 + 2)：

    **编辑：**修复：`lea esi,[4*esi]`（dword 为 4 个字节）

    `lea edi,[ebx+8*esi]`

    `lea edi,[edi+2*esi]`

    现在你有了结构体的地址`edi`。您只需将 dword 的索引（`edx`在本例中存储）乘以 4（因为每个 dword 为 4 个字节）。

    将 dword 的值读取到`eax`: `mov eax,[edi+4*edx]`。

    将 的值存储`eax`到 dword 中：`mov [edi+4*edx],eax`.

# php - 大函数 php 文件是否值得关注？

> ID：11919843
> 
> 赞同：1
> 
> 时间：2012-08-12T05:01:00.263
> 
> 标签：php, performance, function

我正在开发一个 Web 应用程序，我正在使用一个名为 functions.php 的文件，其中存储了与我的应用程序相关的所有函数，目前该文件有大约 1500 行代码和 30 多个函数。

我想知道这是否是一个问题，调用函数时会减慢进程吗？我应该制作其他文件以将某些功能移到那里吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-12T05:19:03.743

在大多数情况下，.php 脚本中的行数几乎不会像代码本身那样影响程序的速度。如果执行时间是您的第一要务，那么优化您的代码应该是您的第一要务。从调用最多的函数开始，并确保那里的代码尽可能紧凑。

将函数拆分为不同的文件在技术上会使脚本*变慢*，因为解释器必须执行磁盘 I/O 来解析文件。但是速度影响很小，所以我认为从长远来看，将它们分开可能会*节省*时间，因为如果你不总是盯着一个包含 30 个函数的大文件，它会更容易调试和优化.

最后，如果您*必须*在应用程序中使用大量的 .php 文件，您可能需要考虑使用[Zend](http://www.zend.com/en/)之类的工具来在服务器上编译您的脚本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T05:05:58.773

如果每页只使用一个或两个函数，将它们分成单独的文件并只包含您需要的文件会更快吗？是的，因为 PHP 需要通读整个文件才能包含它。它会产生足够明显的差异，值得拆分文件吗？在大多数情况下，答案可能是否定的。

# sql - VBA Access SQL SELECT查询只返回一条记录

> ID：11919844
> 
> 赞同：2
> 
> 时间：2012-08-12T05:01:04.817
> 
> 标签：sql, ms-access, vba, ms-access-2010

我正在使用 Access 2010 中的 VBA，但我遇到了一个奇怪的问题。我试图从表中提取记录，但我的 SELECT 查询只返回一条记录。

表中有三条记录，但记录集只获取第一条。

这是我的代码。

```
Dim cc As String 
Dim DB As Database 
Dim rst As recordset 
Dim sqlstr As String 
Dim e As Integer 

cc = CmbClass.Text
If cc = "" Then Exit Sub 

sqlstr = "SELECT * FROM Students" 'WHERE CCode ='" & cc & "'"

Set DB = CurrentDb 
Set rst = DB.OpenRecordset(sqlstr) 
'Debug.Print rst.Fields(0)
e = rst.RecordCount 
Debug.Print e 
If e = 0 Then Exit Sub 
```

e 的值一直是 1，而不是 3。如您所见，我最初有一个更复杂的 SQL 字符串，但我在尝试排除故障时已将其缩减为最基本的，但问题仍然存在。有谁知道为什么会这样？

谢谢，

谭。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T05:08:51.190

从内存中，您需要发出 a`rst.MoveLast`才能可靠地获得这样的记录数：

```
sqlstr = "SELECT * FROM Students" 'WHERE CCode ='" & cc & "'"

Set DB = CurrentDb 
Set rst = DB.OpenRecordset(sqlstr) 
rst.MoveLast
e = rst.RecordCount 
```

此外，您可能需要考虑使用`SELECT COUNT(*) FROM Students`和读取记录集中的值，而不是通过记录来获取计数。使用此查询应该更有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T18:11:22.167

另一种方法是`DCount`。

```
e = DCount("*","Students","CCode ='" & cc & "'") 
```

除非你真的需要，否则不要玩记录集

# unix - 在 UNIX 中从远程服务器下载文件

> ID：11919851
> 
> 赞同：3
> 
> 时间：2012-08-12T05:03:49.570
> 
> 标签：unix, ftp, command-line-interface, wget, sftp

我在远程服务器上有一个文件，可以通过 ssh 连接到该文件。我想从远程服务器的路径复制文件：'/home/example.txt' 到我的计算机桌面。

我应该使用**wget**、**sftp**、**ftp**还是干脆**rm**？

如果您知道 UNIX 文档的良好资源，则可以加分，因为 google 的结果不是很好。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-12T05:07:15.823

使用[`scp(1)`](http://www.openbsd.org/cgi-bin/man.cgi?query=scp&apropos=0&sektion=0&manpath=OpenBSD%20Current&arch=i386&format=html)：

```
~$ scp user@host:/home/example.txt . 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T05:08:29.277

都不是，你应该使用[scp](http://linux.about.com/od/commands/l/blcmdl1_scp.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T02:44:42.577

`scp`或者`rcp`，如果您不想/不需要受到保护。或者`rsync`，对于定期进行远程文件传输的任何更复杂的事情，效果会更好。

对于文档，请查看`man`页面，例如：`man scp`. 或在线访问

*   [http://linux.die.net/man/1/scp](http://linux.die.net/man/1/scp)
*   [http://linux.die.net/man/1/rcp](http://linux.die.net/man/1/rcp)
*   [http://linux.die.net/man/1/rsync](http://linux.die.net/man/1/rsync)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T07:33:23.703

[尝试 Filezilla 实用程序 有关http://filezilla-project.org/](http://filezilla-project.org/)的更多信息

# c# - 使用 RegEx 匹配相似词

> ID：11919856
> 
> 赞同：1
> 
> 时间：2012-08-12T05:05:49.387
> 
> 标签：c#, regex

大家好：我需要使用 RexEx 匹配相似的单词。例如，如果我有一个包含“自治”之类的词的模式，它应该匹配“自治”这个词而不匹配“自治”。
示例代码：

```
void modify(string word)
{
string input = "This island is a colony; however,it is autonomous and " + 
"receives no orders from the mother country, autonomy, N.";
string pattern = @",\s" + word + @"\s[v|n|adj]\.";//word = "autonomous";
Regex reg = new Regex(pattern);
string output = reg.Replace(input, ".");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T05:11:14.577

我不确定您是否能够仅使用正则表达式轻松实现。

你应该看看模式匹配算法。这里有[一个类似的问题](https://stackoverflow.com/questions/3091257/how-to-recognize-similar-words-with-difference-in-spelling)涵盖了这个主题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T06:05:21.907

这可能是您正在寻找的：

```
string s= "This island is a colony; however,it is autonomous and receives no orders from the mother country, autonomy, N.";;
string pattern="autonomous";
Regex r=new Regex(@"\b(?!"+pattern+")"+pattern.Substring(0,pattern.Length/2)+@".*?\b");
r.Replace(s,"."); 
```

# opencl - 英特尔上的 AMD APP OpenCL SDK

> ID：11919859
> 
> 赞同：6
> 
> 时间：2012-08-12T05:06:36.583
> 
> 标签：opencl, gpu, x86-64

我已经看到 AMD APP SDK 示例在只有 Intel CPU 的机器上工作。这怎么可能发生？编译器如何针对不同的机器架构？我不需要英特尔的一组编译器来在英特尔 CPU 上运行代码吗？

我认为如果我们必须在特定硬件上运行 OpenCL 应用程序，我必须使用设备的供应商特定编译器（重新）编译它。

我的理解哪里错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T22:29:25.033

首先，OpenCL 是为在 CPU 和 GPU 上工作而构建的。您可以在任一类型的设备上编译和运行相同的源代码。但是，CPU 代码很可能对于 GPU 来说不是最佳的，反之亦然。

AMD H/W 占 x86/x64 CPU 总数的 7% - 14%。因此，AMD 必须为 AMD 和 Intel 芯片开发相关的编译器。AMD 有为这两组芯片开发编译器的历史。相反，英特尔开发的编译器要么不能在 AMD 芯片上工作，要么不能很好地工作。这并不奇怪。

使用 OpenCL，AMD APP SDK 是最灵活的，它将在 AMD 和 Intel CPU 和 AMD GPU 上运行良好。英特尔的 OpenCL SDK 甚至没有安装在 AMD x86 H/W 上。

如果您将 OpenCL 程序编译为二进制文件，您可以保存并重复使用它，只要它与创建它的 OpenCL 平台和设备相匹配。因此，如果您为一台设备编译并在另一台设备上使用，您很可能会出错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T05:28:45.687

OpenCL 的强大之处在于抽象底层硬件并提供海量、并行和异构的计算能力。

一些 SDK 和平台提供了一些特定功能来“优化”代码，老实说，我认为这些功能只是营销，它们引入了样板代码，使应用程序的可移植性降低。

还有一些伪新技术只是 OpenCL 的包装器，或者它们在概念上非常相似，例如*[Intel 快速同步](http://www.intel.com/content/www/us/en/architecture-and-technology/quick-sync-video/quick-sync-video-general.html)*。

关于英特尔，我应该说他们最初支持所有 iCore 代甚至一些 C2D，现在新的 SDK 只支持第 3 代 iCore，我不明白他们的策略，如果你可能英特尔是最后的选择想要采用 OpenCL 并瞄准尽可能多的受众，[他们的 SDK 似乎也不是很好](http://www.phoronix.com/scan.php?page=article&item=amd_intel_openclsdk&num=1)。

坚持标准，您将避免可能的法律和性能问题，并且您的代码也将更具可移植性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T11:34:21.487

底线是 AMD SDK 包含一个针对 OpenCL 的 x86 CPU 的编译器。这意味着即使您运行的是 Intel CPU，生成的代码也会在其上运行。这与编译 C 程序以在 x86 CPU 上运行的概念相同：它适用于 Intel 和 AMD CPU（或任何实现 x86 指令集的 CPU）。

供应商的编译器可能有特定的优化，比如 user827992 提到的，但根据我的经验，在 Intel CPU 上运行时 AMD 的 CPU 编译器的性能并没有那么差。我还没有尝试过英特尔的 OpenCL 实现。

确实，对于某些（也许是未来的大多数）硬件，只有供应商的编译器会支持它。AMD 的 SDK 不会构建将在 NVIDIA 卡上运行的代码，反之亦然。CPU 恰好是一种特殊情况，因为基本指令集部署如此广泛，以至于 CPU 编译器可以在您可能接触到的大多数机器上工作。

# jquery - 无法在 Ruby 项目中加载主干

> ID：11919860
> 
> 赞同：0
> 
> 时间：2012-08-12T05:06:50.583
> 
> 标签：jquery, backbone.js

我正在尝试将我的代码从设计项目（仅限 html / jquery）迁移到我的 ruby​​ 项目，但是，Backbone 库无法初始化并出现此错误（附图片）：'无法调用未定义的方法'扩展'。

有人对这个问题有任何想法吗？

![在此处输入图像描述](../Images/545c9aa65edb948f18057ec5a9513c32.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T05:12:55.587

想通了，您必须在 Ruby 文件中以正确的顺序加载它们。

# php - 使用 PHP get_defined_vars 打印具有 < n 个元素的所有数组的名称

> ID：11919862
> 
> 赞同：0
> 
> 时间：2012-08-12T05:07:57.543
> 
> 标签：php, debugging, variables

我正在尝试使用 PHP 的 get_defined_vars 函数来打印变量名称的列表，其中变量的元素少于 n （我们这里只需要数组）。

我可以让它打印出每个相关数组本身的内容，但不知道如何让它只给出变量的名称。

尝试使用这个：

```
//Get all of the variables as an array
$variables = get_defined_vars();

foreach ( $variables as $item ) {

    if ( is_array($item) ) {

        //Count the number of elements in this array
        $elements = count($item);

        //If there's less than 3 elements, print the array
        if ( $elements < 3 ) {
            echo "<p>";
            print_r($item);
            echo "</p><br />";
        }

    }

} 
```

正如我所说，这给出了任何少于 3 个元素的数组变量的内容。知道如何让它只给出变量的名称吗？这甚至可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T05:10:45.090

还用于`foreach($variables as $varName => $item)`获取变量的名称：

```
foreach ( $variables as $varName => $item ) {

    if ( is_array($item) ) {

        //If there's less than 3 elements, print the array
        if ( count($item) < 3 ) {
            echo "<p>$varName</p>";
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T05:12:53.020

如果你这样做：

```
foreach(get_defined_vars() as $key=>$val)
{
   //$key gives the name of the array

} 
```

# qt - Qt 中是否有任何系统（应用程序）变量来跟踪应用程序是否第一次被使用

> ID：11919866
> 
> 赞同：0
> 
> 时间：2012-08-12T05:08:29.007
> 
> 标签：qt

我不想显示消息，仅在第一次使用应用程序时显示，即在第一次调用应用程序时，一段代码应该只执行一次。我尝试使用 QSettings，但无法解决任何问题。

```
if(firstTime)
   {
      //do something!
   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T05:10:28.613

只需在启动时检查 QSettings 以获得一些值。如果它不存在，那么它是第一次启动。之后，设置变量，以便每次后续加载都能找到它。

在 PyQt4 中它看起来像这样（我相信你可以翻译成 C++）：

```
settings = QSettings("foo.plist", QSettings.NativeFormat)

if not settings.contains('hasLaunched'):
    # this is our first time! Weee

# no matter what, set the value for the future
settings.setValue('hasLaunched', 1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T09:24:50.877

而不是“hasLaunched”，您可以使用“lastLaunchedVersion”并在那里存储版本号。这样，如果需要，您可以轻松地在每次升级时执行一些特定于版本的步骤，并且还可以检测首次启动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T10:16:06.283

在 cpp 中：

```
// Setup the QSettings variable
QSettings settings("Organization", "ApplicationName", this);

// Check if the value for "firsttime" is set, 
// and add default value to true    
if(settings.value("firsttime", true).toBool())
    QMessageBox::information(this, "Hello", "This is our first time");

// Set the value to false, because from now on its not the first time
settings.setValue("firsttime", false); 
```

# ruby-on-rails - 在路由中使用 :id 时无法渲染 :template 并出现验证错误

> ID：11919867
> 
> 赞同：0
> 
> 时间：2012-08-12T05:08:31.960
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我分别有任务和请求控制器和模型。request 的新动作取决于路由中包含的 task :id。如果由于验证错误而无法保存请求，我需要能够使用任务 :id 呈现请求控制器的新操作。但是，当下面的代码运行时，我得到一个模板丢失错误。

**如何使用任务 :id 作为参数来渲染新模板？**

```
/task/1/request/new

  if !@request.save
     render :template => new_task_request_path(@blog)    # /task/1/request/new
  end 
```

-----> 错误：缺少模板 - 缺少模板 blogs/1/requests/new

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T05:32:08.293

在您的代码中，`new_task_request_path(@blog)`生成一个相对 URL。渲染模板时，您需要为其提供模板的路径，而不是相对 URL。

如果没有更多信息，我无法判断您的视图模板将在哪里，但请尝试将`create`操作中的代码更改为以下内容：

```
@task = Task.find(params[:id])
@request = @task.requests.new(params[:request])

if !@request.save
  render 'new'
end 
```

`@task.id`然后，您可以在您的视图中使用访问任务 ID 。

这假设`Task`有很多`Requests`，并且这个动作在你的`RequestsController`. 如果您使用不同的关系，则需要根据需要更新控制器操作代码。同样，如果它是不同的控制器，您应该将模板路径更新为`'requests/new'`.

# javascript - 关节动画

> ID：11919868
> 
> 赞同：0
> 
> 时间：2012-08-12T05:08:37.500
> 
> 标签：javascript, animation, kineticjs

我试图弄清楚如何对火车动画进行排序，以便我可以偏移并围绕曲线依次旋转每辆货车，例如，在[此显示](http://glasier.hk/machine/machine.php)中的 Route_51（单击测试>运行[两次]）中。需要 Chrome 或其他兼容 HTML5 的浏览器。

这是我迄今为止的“不合规”代码（使用 KineticJs）：

```
function animate(nr,path,incr,train,dirX,dirY){
var steps,offsetX,offsetY,count,a;
steps = Math.round(path[nr][2] / incr);
offsetX = path[nr][2]/steps;
offsetY = path[nr][3]/steps;
count = 0;
stage.onFrame(function(frame){
    layer = train[0].getLayer();
    if(count < steps){
        for(a=0; a<train.length; a+=1){ 
            incrX = train[a].getX() + offsetX * -dirX;
            incrY = train[a].getY() - offsetY * -dirY;
            train[a].setX(incrX);
            train[a].setY(incrY);
        }
        layer.draw();
        count += 1;
    }
    else{
        stage.stop();
        nr += 1;
        if(path[nr]){
            animate(nr,path,incr,train,dirX,dirY);
        }
    }
});
stage.start(); 
```

}

我似乎无法掌握逻辑（变老）。

所有帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T03:03:48.650

在某种逻辑出现之前，似乎必须经过一定的时间。

在这种情况下，每个机车/货车都需要自己的完全递增的路径来错开起点和可选的终点。这是运动中的火车的屏幕截图，其中插入了“正常”比例视图。当然还有改进的空间，尤其是曲线坐标。

![在此处输入图像描述](../Images/8622b3f172e4e7e911c7de622afc574c.png)

有关动画，请访问[http://glasier.hk](http://glasier.hk)并点击 KJS 链接。

# java - 如何在 Eclipse 中创建自定义 GUI 控件以用于 Android 应用程序布局？

> ID：11919871
> 
> 赞同：1
> 
> 时间：2012-08-12T05:09:13.170
> 
> 标签：java, android, xml, eclipse, user-interface

好的，标题说。

我希望能够创建自己的控件，例如按钮、文本视图、编辑文本框、微调器等。我可以在 CS5 中创建图像，但如何将这些图像转换为功能性 GUI 组件？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T09:10:55.950

您的意思是您想创建这些控件的自定义外观版本，对吧？

您可以为您制作的任何自定义按钮制作一个 ImageButton 组件，并使用属性 android:src，例如

```
android:src="@drawable/your_image" 
```

同样对于 EditText，您可以使用属性 android:background。

编辑：android 控件不作为标准图像文件存储在任何可访问的地方。您提到的标准设计是元素的默认外观。

要更改它，您必须自己创建背景并将其作为 .png 文件存储在项目的可绘制文件夹中。确保仅以小写字母命名此文件，并且没有空格等特殊字符。将此文件复制到所有可绘制文件夹中（drawable-hdpi、ldpi 等）。

然后你必须在你的盒子里引用这个文件

```
<EditText
    android:background="@drawable/your_edit_text_graphic_file_name"
    android:text="@string/sample_text"
    android:layout_width="match_parent"
    -- all other attribute declarations --
</EditText> 
```

同样，对于其他元素，您必须使用前面提到的 android:src 来引用您自己的图形！

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T05:45:38.240

你不必`CSS`在android的情况下使用你必须使用`XML`文件进行UI设计。你可以`XML`静态或动态地创建UI（即以编程方式）。您可以通过以下方式在android中创建按钮。

```
 <Button
     android:id="@+id/buttonStart"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     android:text="Your btn Name"/> 
```

您可以通过获取按钮的 id 并使用它来访问您的 java 文件中的此按钮。

希望这可以帮助。有关更多信息，请阅读这篇文章[http://developer.android.com/reference/android/widget/Button.html](http://developer.android.com/reference/android/widget/Button.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T05:21:02.303

您只需创建您的`CustomView`扩展`View`或`TextView`.... 并实现事件句柄。Android 开发人员接受了有关此[自定义组件](http://developer.android.com/guide/topics/ui/custom-components.html)的培训。完成后，您可以在`GraphicLayout`=> `CustomView`in 中找到您的自定义视图`Eclipse`并像普通组件一样添加。

图像只是提供漂亮的外观而不是事件句柄，因此您不能只将图像制作成组件

# javascript - jQuery单击事件不起作用

> ID：11919878
> 
> 赞同：0
> 
> 时间：2012-08-12T05:11:21.613
> 
> 标签：javascript, jquery, javascript-events

下面的代码在`localhost`使用 XAMPP 时效果很好。但它不适用于另一台服务器。

```
<!DOCTYPE html>
<html>
    <head>
        <script src="jquery-latest.js"></script>
    </head>
    <body>
        word: <input type="text" id="sub" />
        user: <input type="text" id="user" />

        <button type="button" id="btn">Click Me!</button>

        <script>
            $("#btn").click(function () {
                var word=$("#sub").val();
                var usr=$("#user").val();
                alert("hi");
            });
        </script>
    </body>
</html> 
```

我从 Chrome 检查元素中得到 2 个错误：

*   `Uncaught SyntaxError: Unexpected end of input jquery-latest.js:5669`

*   `Uncaught ReferenceError: $ is not defined`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T05:18:01.507

检查 jquery-latest.js 是否与 html 文件相同的目录。否则代码是好的，也可以工作。在脚本中添加类型。试试这个

```
<script type="text/javascript" src="jquery-latest.js"></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T05:22:03.627

您需要在`$(document).ready()`事件中连接点击处理程序。

```
<!DOCTYPE html>
<html>
    <head>
        <script src="jquery-latest.js"></script>
        <script>
        $(document).ready(function() {
            $("#btn").click(function () {
                var word=$("#sub").val();
                var usr=$("#user").val();
                alert("hi");
            });
        });
        </script>
    </head>
    <body>
        word: <input type="text" id="sub" />
        user: <input type="text" id="user" />

        <button type="button" id="btn">Click Me!</button>
    </body>
</html> 
```

# python - 为什么我的 $ 或 $and 查询出现语法错误？

> ID：11919880
> 
> 赞同：0
> 
> 时间：2012-08-12T05:11:32.263
> 
> 标签：python, mongodb, pymongo, database

Mongo 在这一行一直给我语法错误；

```
existingVideo = self.request.root.db.videos.find_one( { '$or' : [ { '_id' : ObjectId( video["serverVideoID"] ) } , '$and' : [ { '_id' : serverAuthorID } , { 'clientGUID' : video['clientGUID'] } ] ] }) 
```

但我看不出它有什么问题。它看起来对我有效，但任何人都可以在这里发现错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T06:08:26.913

看起来您缺少一组`{ }`$and 子句。

您的查询应该是：

```
existingVideo = self.request.root.db.videos.find_one( 
{ '$or' : 
   [ 
     { '_id' : ObjectId( video["serverVideoID"] ) 
     } , 
     {'$and' : 
           [ { '_id' : serverAuthorID } , { 'clientGUID' : video['clientGUID'] } 
           ] 
     } 
   ] 
}) 
```

# jquery - 如何在jquery ui Datepicker中将日期时间设置为今天

> ID：11919893
> 
> 赞同：2
> 
> 时间：2012-08-12T05:13:57.490
> 
> 标签：jquery, asp.net-mvc-3, jquery-ui

```
<script type="text/javascript" language="javascript">
    $(document).ready(function () {
        $(function () {
            $(".datepicker").datepicker({
                dateFormat: "mm/dd/yy",
                changeMonth: true,
                changeYear: true
            });
        });
    });
</script> 
```

我使用上面的代码在 datepicker 中显示日期，但日期设置为 2001 年 1 月。如何在上面的 jquery 中将 DateTime 设置为今天作为默认值。在我将 jquery 放入编辑器模板之前它工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T05:46:25.993

根据[jQuery UI 文档](http://jqueryui.com/demos/datepicker/#option-defaultDate)，它应该是默认行为。When the `defaultDate`option is `null`as it is by default, today's date should be highlighted on first opening. 也许您的系统时间不正确？这是我尝试过的[代码笔](http://codepen.io/anon/full/tFnBa)，默认情况下它似乎显示今天的日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-17T12:46:29.700

如果你想在 jQuery DatePicker 中查看当前日期，你可以将它应用于任何文本字段，如下所示：

```
$('input.youTextFieldClass').datepicker({ dateFormat: 'mm/dd/yy', 
                                     changeMonth: true,
                                     changeYear: true,
                                     yearRange: '-70:+10',
                                     constrainInput: false,
                                     duration: '',
                                     gotoCurrent: true}); 
```

# c - 为什么 printf() 是一个不纯的函数？

> ID：11919894
> 
> 赞同：6
> 
> 时间：2012-08-12T05:14:06.727
> 
> 标签：c, printf, purely-functional

据我所知，不纯函数是那些在使用相同参数调用时并不总是返回相同值的函数（我必须遗漏一些东西，或者可能是错误的，如果我是，请纠正我）。

那么为什么被`printf()`认为是不纯函数呢？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-12T05:16:12.000

“纯”功能也**没有*副作用***。

换句话说，无论你调用多少次，*一个纯函数只会影响**它**的输出*。

例如，**`foo`is impure**，*即使它返回零*：

```
int x;
int foo() { x++; return 0; }
int bar() { return x; } 
```

如果`foo`是纯的，调用它*不会*影响`bar()`.

`printf`是不纯的，因为它的结果有“副作用”——具体来说，它会在屏幕上（或文件等）打印一些东西。
如果它是纯粹的，那么你可以调用它十亿次，并确保不会发生任何不好的事情。
但是如果你真的调用`printf`了一百万次，对用户来说肯定会*有所*不同——它会填满他的屏幕（或磁盘空间，或其他任何东西）。很明显，它不是纯粹的。

此外：如果您的输出被重定向为您自己的输入（有点没用，但仍然如此），那么调用`printf`会影响您从`getchar`. :) 所以它也可以直接观察到。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-12T05:17:11.263

成为纯函数有两个部分。首先，正如您所说，该函数必须始终为相同的输入参数返回相同的值。第二个不满足的标准`printf`是函数不能有像 I/O 或对象突变这样的副作用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-12T05:18:28.027

简单地说，`printf`是不纯的，因为它确实`I/O`。`I/O`根据定义是不纯的，因为存在`I/O`设备的外部状态（状态可能因执行而异）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-12T07:04:31.483

很多答案都解释了`printf`I/O 作为副作用，但`printf`也可能有其他副作用。例如，说明*符*`%n`允许`printf`写入指定的地址（并且是一些安全漏洞的原因）。

 ** * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-12T06:11:09.833

纯函数在编程中的意义在于，如果它已经具有调用具有相同参数的函数的结果，则实现可以优化对纯函数的调用。显然，对于 printf 的调用无法做到这一点。

PS 即使按照您的定义， printf 也是不纯的，因为它可以在成功时返回一个值，而如果出现 I/O 错误（例如，输出设备上的空间不足）则返回不同的值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-12T05:18:35.330

`printf()`是不纯的，因为它会导致输出到 I/O 设备作为副作用.....*

# php - preg_match_all() html 标签

> ID：11919897
> 
> 赞同：1
> 
> 时间：2012-08-12T05:14:59.627
> 
> 标签：php, regex

使用 preg_match_all()，我想匹配如下内容：

`...randomtext...>MATCH1</a>" (MATCH2)"...randomtext...`编辑：澄清一下，这正是我试图从中提取数据的字符串，包括括号、引号、尖括号等。

这是我尝试过的：`preg_match_all("/^>(.+?)</a>\" \((.+?)\)\"$/", $htmlfile, $matches);`

它应该提取`MATCH1`as`$matches[1][0]`和`MATCH2`as`$matches[2][0]`

知道为什么它不起作用吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T05:32:07.517

你需要`/`在你的模式中转义，你**不**希望你的模式锚定到`^`和`$`

所以可能这会起作用：`preg_match_all("/>(.+?)<\/a>\" \((.+?)\)\"/", $htmlfile, $matches);`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-12T05:32:19.563

你没有逃脱你的结束标签`</a>`

这应该有效：

```
preg_match_all("/>(.+?)<\/a>\" \((.*?)\)/", $htmlfile, $matches); 
```

请参阅[键盘示例](http://codepad.viper-7.com/pzqAEB)。

# php - 使用 MySQL 连接

> ID：11919902
> 
> 赞同：1
> 
> 时间：2012-08-12T05:16:20.610
> 
> 标签：php, mysql

我有一个加入，可以选择我关注的用户和朋友的所有帖子

```
SELECT  * 
FROM    posts a 
LEFT JOIN relationships b
ON a.user_id = b.user_2 
WHERE   b.user_1 = $user_id AND 
 b.status IN (1,3,4) 
```

我怎样才能让这个查询同时选择 a.user_id = $user_id（我的 id）的所有帖子？基本上，还选择我的所有帖子？无需复制任何数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T05:18:54.270

我没有任何方法可以对此进行测试，但我认为以下内容会按预期工作：

```
SELECT  * 
FROM    posts a 
LEFT JOIN relationships b
ON a.user_id = b.user_2 
WHERE   b.user_1 = $user_id AND 
 (b.status IN (1,3,4) OR a.user_id = $user_id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T05:56:55.130

如果您基本上想要一个表中的 2 个查询的结果，请使用联合查询。您需要修复第二个查询中的 WHERE 子句才能正确，但是类似的东西呢

```
SELECT  *
FROM    posts a
LEFT JOIN relationships b
ON a.user_id = b.user_2
WHERE   b.user_1 = $user_id AND
 b.status IN (1,3,4)
UNION DISTINCT
SELECT *
FROM    posts a
WHERE   a.user_id = $user_id (my id) 
```

我也会质疑您使用左连接 - 我认为 INNER JOIN 会更好

# c++ - 支持 g++ 中的类型属性

> ID：11919903
> 
> 赞同：5
> 
> 时间：2012-08-12T05:16:23.980
> 
> 标签：c++, gcc, c++11, g++, typetraits

我们什么时候可以期望支持g++中的[标准类型属性？](http://en.cppreference.com/w/cpp/types#Type_properties_2)libstdc++ 为大多数类型属性提供支持，其中一些需要[特殊 GNU 扩展](http://gcc.gnu.org/onlinedocs/gcc-4.7.1/gcc/Type-Traits.html#Type-Traits)的支持。但是，如果能够完全支持`<type_traits>`. 我尝试查询 libstdc++ 邮件列表，但遗憾的是没有收到任何回复。

如果您想知道哪些类型属性缺少支持，这里有一些：

> Missing is_trivially_copyable, is_assignable, is_copy_assignable, is_move_assignable, is_trivially_constructible, is_trivially_default_constructible, is_trivially_copy_constructible, is_trivially_move_constructible, is_trivially_assignable, is_trivially_default_assignable, is_trivially_copy_assignable, is_trivially_move_assignable, is_trivially_destructible, is_nothrow_assignable, is_nothrow_copy_assignable, is_nothrow_move_assignable, is_nothrow_destructible

[来源：在此处](http://gcc.gnu.org/onlinedocs/libstdc++/manual/status.html#status.iso.200x)搜索“类型属性” 。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T19:52:58.017

它们是标准库的一部分，因此它们由 libstdc++ 提供，而不是编译器前端，并且在 libstdc++ 中支持大部分内容。

[N3142](http://open-std.org/jtc1/sc22/wg21/docs/papers/2010/n3142.html)在 C++0x 进程后期添加了一些缺失的内容，但 libstdc++ 仍然提供较旧的形式，例如`has_trivial_default_constructor`代替`is_trivially_default_constructible`.

至于什么时候，“这取决于”。请参阅[http://gcc.gnu.org/ml/libstdc++/2012-08/msg00037.html](http://gcc.gnu.org/ml/libstdc++/2012-08/msg00037.html)和以下回复。

# shell - 产生错误（Windows）：第1行：意外标记'，'附近的语法错误

> ID：11919904
> 
> 赞同：1
> 
> 时间：2012-08-12T05:17:05.860
> 
> 标签：shell, syntax, makefile, syntax-error, gnu-make

我是这个（make）的初学者，并且在尝试 grep 文件中的文本时遇到了一些问题（作为 Windows 上的 make 过程的一部分）。我要解决的更大问题是检查给定目录中的所有二进制可执行文件是否满足各自的依赖关系。我在后面的部分使用depends.exe（Dependency Walker），我正在尝试grep其输出文件，如果依赖验证失败，可能会中止构建过程。

```
binary-dependency-validate:
for BINARYEXEC in $(shell $(PATH_TO_FIND_EXE) $(PRE_DEFINED_DIR) -name "*.exe"); do \
   $(PATH_TO_DEPENDS_EXE) /c /pb /ot $(PRE_DEFINED_DIR)/$$BINARYEXEC-depends.txt $(PRE_DEFINED_DIR)/$$BINARYEXEC ; \
   ifeq ($(shell $(PATH_TO_GREP_EXE) "Error: At least one required implicit or forwarded dependency was not found." $(PRE_DEFINED_DIR)/$$BINARYEXEC-depends.txt),); \
      @echo "Dependency ok" ; \
   endif ; \
done 
```

我遇到以下错误：

```
line 1: syntax error near unexpected token `,' 
```

任何建议都会有很大帮助。我查看了[这篇](https://stackoverflow.com/questions/4483313/make-error-for-ifeq-syntax-error-near-unexpected-token)文章并尝试在没有缩进的情况下对齐 ifeq（这也没有帮助。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:19:16.953

问题是您将*Make*语言与*shell*语言混合在一起。

makefile 包含规则，规则包含由 shell 执行的命令：

```
target:
    first command
    second command 
```

命令是 shell 语言，每个命令前面必须有一个 TAB。

Make中有条件：

```
ifeq (foo, bar)
  VAR = something      
endif 
```

（压痕只是为了眼睛。）

各种脚本语言中也有条件：

```
if [ -f log ]
  then
    echo "log exists."
fi 
```

Make 条件可以将命令包含在规则中：

```
target:
ifeq (foo, bar)
    first command
endif
    second command 
```

Make 将在运行规则之前评估此条件，并且**or****之前不能有 TAB ，因为 Make 不能将它们解释为要传递给 shell 的命令。`ifeq``endif`**

一个命令（在一个规则中）可以包含一个 shell 条件：

```
target:
    if [ -f log ]; \
  then echo "log exists." ; \
  fi 
```

前面的缩进`if`是一个TAB。另一个空白是为了眼睛。

您的 makefile 在 shell 命令中间有一个 Make 条件；Make 无法在命令执行之前评估条件，并且 shell 无法理解 Make 语法。**您应该使用 shell 条件。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T05:24:37.777

好像你在 ifeq 行上有一个杂散的逗号

```
binary-dependency-validate:
for BINARYEXEC in $(shell $(PATH_TO_FIND_EXE) $(PRE_DEFINED_DIR) -name "*.exe"); do \
   $(PATH_TO_DEPENDS_EXE) /c /pb /ot $(PRE_DEFINED_DIR)/$$BINARYEXEC-depends.txt $(PRE_DEFINED_DIR)/$$BINARYEXEC ; \
   ifeq ($(shell $(PATH_TO_GREP_EXE) "Error: At least one required implicit or forwarded dependency was not found." $(PRE_DEFINED_DIR)/$$BINARYEXEC-depends.txt)); \
      @echo "Dependency ok" ; \
   endif ; \
done 
```

# multithreading - 如果 nodejs 是多线程的，为什么我应该使用集群模块来利用多核 cpu？

> ID：11919907
> 
> 赞同：4
> 
> 时间：2012-08-12T05:17:50.010
> 
> 标签：multithreading, node.js

如果 nodejs 是多线程的，请参阅 [这篇文章](http://blog.mixu.net/2011/02/01/understanding-the-node-js-event-loop/)，并且
线程由操作系统管理，它可以在同一个核心或多核 cpu 的另一个核心中执行，请参阅[这个问题](https://stackoverflow.com/questions/1896065/how-to-ensure-java-threads-run-on-different-cores?rq=1)，那么 nodejs 将自动利用多核 cpu，
那么我为什么要使用 cluster.fork 来做出不同节点利用多核的过程，如[节点文档中的此示例所示](http://nodejs.org/docs/v0.9.0/api/cluster.html#cluster_cluster)

* * *

我知道多进程的优势在于，当一个进程落到那里时，另一个进程会响应与线程不同的请求，我需要知道是否可以通过为每个内核生成进程来使用多核，或者它是我不能的操作系统任务控制

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-12T06:14:55.340

**这取决于。**

由 Node 本身异步发生的工作（例如 IO 操作）是多线程的。您的 JavaScript 应用程序在单个线程中运行。

在我看来，唯一需要触发多个进程的情况是，如果你的绝大多数工作都是直接用 JavaScript 完成的。Node 的设计背后是这种情况很少发生，并且是为主要在磁盘和网络上阻塞的应用程序而构建的。

因此，如果您有一个典型的 Node 应用程序，而您的 JavaScript 不是大部分工作，那么启动多个进程将无助于您利用多个 CPU/内核。

但是，如果您有一个特殊的应用程序，您在主循环中做了很多工作，那么多个进程可能适合您。

最简单的方法是在应用程序运行时监控 CPU 利用率。您必须根据每个应用程序决定什么是最好的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-12T08:09:42.283

从开发人员的角度来看，Node 不是多线程的。线程的使用方式与 Apache 的 worker mpm 使用的方式非常不同。

我相信[这个答案](https://stackoverflow.com/questions/10773564/which-would-be-better-for-concurrent-tasks-on-node-js-fibers-web-workers-or-t/11278689#11278689)会让事情变得清晰。

# java - 从大量条目中实现选择框的最佳方法

> ID：11919914
> 
> 赞同：3
> 
> 时间：2012-08-12T05:19:31.483
> 
> 标签：java, swing, tooltip, jtextfield, swingx

我有一大组数据，用户必须从中选择一个。我正在考虑一种实现它的方法（当然，在 GUI 中）。我有几个想法。但只是想在这里发帖，因为可能有更好的选择..

比如说，用户必须从大量用户群中选择一个名称。如果我只是为用户输入一个文本字段来输入名称，那么可能会出现诸如以不同格式输入相同名称、拼写错误等问题......

我在这里看到两个选项

*   使用组合框
*   使用列表（实际上我正在考虑类似的东西`tool tip`。由于空间问题，我无法始终显示整个列表）

但我猜组合框不会对用户很友好。因为用户必须滚动整个列表才能选择一个条目。如果条目的数量太大，这将是

这意味着，现在我只剩下一个选择了。一个弹出列表，它将根据用户在文本字段中输入的文本更改内容。所以他可以输入前几个字母，列表将显示从输入文本开始的所有条目。明白我的意思，对吧？

还有其他更好的方法来满足这种需求吗？

如果我要在上面实施，那么最好的方法是什么。我正在考虑扩展`JTextField`以添加所需的功能。好吧，我会用一些方法来设置弹出列表条目。我会添加一些`actionListner`来观看文本字段，并相应地控制弹出列表......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T06:06:17.163

您可以查看 SwingLab 的[自动完成](http://download.java.net/javadesktop/swinglabs/releases/0.8/docs/api/org/jdesktop/swingx/autocomplete/Configurator.html)功能，它允许您将其附加到`JCombBox`,`JList`或`JTextComponent`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-12T06:06:46.157

自动完成是您可能正在寻找的。谷歌搜索“java swing jcombobox autocomplete”并限制过去几年的结果以获得相关结果。将会有很多关于如何使用自定义代码来实现它的示例和想法。

我相信还有一些自定义库，例如“swingx”，它们至少提供部分或全部实现以节省时间。

[http://swingx.java.net/](http://swingx.java.net/)

他们最近在今年年初发布了代码，所以它看起来很活跃，可能有你需要的东西。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-12T06:36:37.717

使用[自动完成 JComboBox/JTextField](https://stackoverflow.com/a/7255918/714968)

*   基于标准 Java 类

*   更大的数据集没有问题

*   `Focus`, `BackSpace Key`,没问题`Caret`

*   `array`为了获得更好的性能，在使用前进行所需的排序

*   的简单解决方法`setStrict(true/false)`，将输入限制为`array`

# javascript - AND 和 OR 运算符、正则表达式和值长度

> ID：11919916
> 
> 赞同：0
> 
> 时间：2012-08-12T05:19:38.627
> 
> 标签：javascript, jquery, operators

我试图让它防止输入任何非数字和输入值长度不大于 6。现在，如果输入包含 alpha，它通过阻止超过 6 个字符来工作。但是，当我将其更改为阻止它是 alpha 或大于 6 个字符时，我根本无法输入任何内容。有什么想法吗？

```
<script type="text/javascript">
    $(document).ready(function () {
        var pattern = /^[0-9]+$/;
        $('#input1,#input2').keypress(function (e) {
            var length = this.value.length;
            if (!pattern.test($(this).val()) && (length >= 6)) {
                e.preventDefault();
            }
        }); 
    });
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T05:45:43.293

补充 mazzzzz 所说的，您可以使用更强大的模式测试您想要的内容：

```
var pattern = /^\d{1,6}$/; 
```

这将只接受 1 到 6 个字符的数字 (\d)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T05:29:34.260

我相信问题出在您制作正则表达式的方式上，`$(this).val()`直到该功能结束后才会显示按下的第一个字母（这就是您仍然可以使用的原因`e.preventDefault();`）；这意味着正则表达式正在测试的 val 是空白的，正则表达式将不匹配。

我建议您将下一个字符附加到当前值上，这样您就可以测试字符串*将是*什么，而不是它是什么。

就像是：

```
$(document).ready(function () {
  var pattern = /^[0-9]+$/;
  $('#input1,#input2').keypress(function (e) {
    var curVal = $(this).val() + String.fromCharCode(e.charCode);
    var length = curVal.length;

    if (length > 6 || !pattern.test(curVal)) {
      e.preventDefault();
    }
  }); 
}); 
```

这是[代码笔](http://codepen.io/mazzzzz/pen/oatDq)。codepen 做了一些不同的事情，因为有更好的方法来做到这一点，然后使用昂贵的正则表达式（这一直都没有关系，但我喜欢优化）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T05:59:11.427

似乎您根本不​​需要正则表达式。

```
<input type="text" id="input1" />
<input type="text" id="input2" />

<script type="text/javascript">
    var maxLen = 6,
        helpCodes = [37, 39, 8, 9], // left and right arrows, backspace, tab
        codes = [];
    for(var code = 48; code < 58; code++) { // number keys (48-57)
        codes.push(code);
    }
    $('#input1,#input2').on('keydown', function (e) {
        if(helpCodes.indexOf(e.keyCode) > -1) {
            return true;
        }
        if(e.shiftKey || this.value.length == maxLen
                || codes.indexOf(e.keyCode) < 0 ) {
            return false;
        }
    });
</script>​ 
```

[**演示**](http://jsfiddle.net/f0t0n/9mpde/)

# jquery - jQuery动画延迟

> ID：11919920
> 
> 赞同：0
> 
> 时间：2012-08-12T05:21:27.633
> 
> 标签：jquery, scroll, jquery-animate, scrolltop

我正在尝试使用 jQuery 为 div 的不透明度设置动画。当我不使用这个 if/else 语句时它工作得很好，但是当我这样做时，在动画发生之前会有一个延迟。我尝试将延迟设置为“0”，但这没有帮助。这是代码：

```
$(window).scroll(function(){ 

    if ($(this).scrollTop() > 60){ 
        $('#navStick').fadeTo("slow", 1);
    } else {
        if ($(this).scrollTop() <= 60){
            $('#navStick').fadeTo("slow", 0);
        }
    }

}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T05:26:52.473

正如 Joseph Silber 所说，第二个`if`陈述是多余的。只有在小于或等于 60 时，控制才会达到该点。

尝试`.stop(true)`在动画之前使用

```
$(window).scroll(function(){ 

    if ($(this).scrollTop() > 60){ 
        $('#navStick').stop(true).fadeTo("slow", 1);
    } else {
        $('#navStick').stop(true).fadeTo("slow", 0);
    }

}); 
```

# iphone - 2 调用 AudioServicesPlaySystemSound 时出错？

> ID：11919923
> 
> 赞同：4
> 
> 时间：2012-08-12T05:22:13.283
> 
> 标签：iphone, xcode, ios5, audiotoolbox, vibration

我正在制作一个应用程序，一旦计时器达到一定限制就会振动。

但是，当调用

```
AudioServicesPlaySystemSound(kSystemSoundID_Vibrate); 
```

Xcode 出现两个错误：

```
Undefined symbols for architecture i386:
  "_AudioServicesPlaySystemSound", referenced from:
      -[drawGraph drawRect:] in drawGraph.o
ld: symbol(s) not found for architecture i386 
```

和

```
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

关于是什么导致这些错误的任何想法？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-12T05:38:29.977

![在此处输入图像描述](../Images/3f6cde263f24bfeb8f5482c7cdd315cf.png)

如果您根本不能只添加头文件，如上所示，则必须将框架添加到您的项目中。你应该有一个下面的标题。`#import <AudioToolbox/AudioToolbox.h>`

> 1.  在 Xcode 中，单击 Project Navigator 顶部的项目文件。
>     
>     
> 2.  单击“目标”下的“您的项目名称”
>     
>     
> 3.  单击“构建阶段”选项卡。
>     
>     
> 4.  单击“Link Binary With Libraries”窗口中的加号。
>     
>     
> 5.  添加 AudioToolbox.Framework 库
>     
>     
> 6.  添加`#import <AudioToolbox/AudioToolbox.h>`

![在此处输入图像描述](../Images/a443040554ad6dbf0747cafae10cf148.png)

# python - 使用 python、BeautifulSoup、mechanize 设置 HTML textarea 内容（没有表单，只有 div）

> ID：11919924
> 
> 赞同：5
> 
> 时间：2012-08-12T05:22:22.147
> 
> 标签：python, forms, textarea, beautifulsoup, mechanize

我正在尝试填写包含 textarea 元素的表单。我正在将 Python 与 BeautifulSoap 和 mechanize 模块一起使用（在 FreeBSD 8.1 上使用 FreeBSD 存储库中的最新模块：BeautifulSoup 3.1.0.1 和 mechanize 0.2.1 时停留在 2.6.5）。

BeautifulSoap 的问题是它没有正确设置 textarea 内容（我可以尝试`soup.textarea.insert(0, "FOO")`甚至`soup.textarea.contents = "FOO"`，但是一旦我检查了当前值`soup.textarea`，我仍然看到旧的 HTML 标记之间没有内容：

`<textarea name="classified_description" class="classified_textarea_text"></textarea>`

机械化的问题在于它似乎只在真实的形式上运行。根据我在下面解析的 HTML，这不是一个真正的表单，而是一组包含输入项的 div。

如何使用 Python 或这些模块中的任何一个来设置此 textarea 元素的值？

```
<div class="classified_field">
            <div class="classified_input_label">Description</div>
            <div class="classified_textarea_div">
                <textarea name="classified_description" id="classified_description" class="classified_textarea_text"></textarea>
            </div>
            <div class="site_clear"></div>
        </div> 
```

我在下面尝试了 Vladimir 的技术，虽然它适用于他的示例，但由于某种原因它在我的生产代码中不起作用。我可以用来`.find()`获取`textarea`，但是`.insert()`让我很伤心。这是我到目前为止所拥有的：

```
>>> soup.find('textarea', {'name': 'classified_description'})                  
<textarea name="classified_description" class="classified_textarea_text"></textarea>
>>> soup.find('textarea', {'name': 'classified_description'}).insert(0, "some text here")
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/local/lib/python2.6/site-packages/BeautifulSoup.py", line 233, in insert
  newChild.nextSibling.previousSibling = newChild
AttributeError: 'unicode' object has no attribute 'previousSibling'
>>> 
```

任何人都知道为什么这会通过 unicode 错误？显然我的`soup`对象不仅仅是一个 unicode 字符串，因为我成功使用了`.find`.

解决方案：弗拉基米尔的解决方案是正确的，但现实世界的 HTML 可能会`malformed start tag`在 BeautifulSoup 3.1 中生成错误（[官方原因在这里](http://www.crummy.com/software/BeautifulSoup/bs3/3.1-problems.html)）。降级到 BeautifulSoup 3.0.8 后，一切正常。当我发布最初的问题时，我不得不做一些陪审团操纵以将机械化到`read()`BeautifulSoup 对象中，以免`malformed start tag`出错。这导致创建了一个 uencode 字符串，而不是一个 BeautifulSoup 对象。使用较旧的 BeautifulSoup 更正我的机械化代码已导致所需的行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T06:35:18.793

这是一个使用 BeautifulSoup 的示例：

```
from BeautifulSoup import BeautifulSoup

soup = BeautifulSoup('<textarea name="classified_description"></textarea>')
soup.find('textarea', {'name': 'classified_description'}).insert(0, 'value')
assert str(soup) == '<textarea name="classified_description">value</textarea>' 
```

[BeautifulSoup 关于修改解析树的文档](http://www.crummy.com/software/BeautifulSoup/bs3/documentation.html#Modifying%20the%20Parse%20Tree)详细描述了这种转换。

# java - 当面板已满时将滚动面板添加到 jpanel (java)

> ID：11919941
> 
> 赞同：5
> 
> 时间：2012-08-12T05:28:59.200
> 
> 标签：java, swing, jpanel, jscrollpane

我正在开发 java swing 应用程序，我正在动态添加组件`JPanel`。我想`JScrollPane`在这个面板上设置一个，只有当面板满了我们才能看到这个滚动面板。

我该怎么做：

```
 package add_button;
import java.awt.Dimension;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Insets;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.ArrayList;
import java.util.List;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.border.LineBorder;

public class MyExample 
{
    // Field members
    static JPanel panel = new JPanel();
    static Integer indexer = 1;
    static List<JLabel> listOfLabels = new ArrayList<JLabel>();
    static List<JTextField> listOfTextFields = new ArrayList<JTextField>();

    public static void main(String[] args)
    {       
        // Construct frame
        JFrame frame = new JFrame();
        frame.setLayout(new GridBagLayout());
        frame.setPreferredSize(new Dimension(990, 990));
        frame.setTitle("My Example");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        // Frame constraints
        GridBagConstraints frameConstraints = new GridBagConstraints();

        // Construct button
        JButton addButton = new JButton("Add");
        addButton.addActionListener(new ButtonListener());

        // Add button to frame
        frameConstraints.gridx = 0;
        frameConstraints.gridy = 0;
        frame.add(addButton, frameConstraints);

        // Construct panel
        panel.setPreferredSize(new Dimension(600, 600));
        panel.setLayout(new GridBagLayout());
        panel.setBorder(LineBorder.createBlackLineBorder());

        // Add panel to frame
        frameConstraints.gridx = 0;
        frameConstraints.gridy = 1;
        frameConstraints.weighty = 1;
        frame.add(panel, frameConstraints);

        // Pack frame
        frame.pack();

        // Make frame visible
        frame.setVisible(true);
    }

    static class ButtonListener implements ActionListener
    {
        @Override
        public void actionPerformed(ActionEvent arg0) 
        {       
            // Clear panel
            panel.removeAll();

            // Create label and text field
            JTextField jTextField = new JTextField();
            jTextField.setSize(100, 200);
            listOfTextFields.add(jTextField);
            listOfLabels.add(new JLabel("Label " + indexer));

            // Create constraints
            GridBagConstraints textFieldConstraints = new GridBagConstraints();
            GridBagConstraints labelConstraints = new GridBagConstraints();

            // Add labels and text fields
            for(int i = 0; i < indexer; i++)
            {
                // Text field constraints
                textFieldConstraints.gridx = 1;
                textFieldConstraints.fill = GridBagConstraints.HORIZONTAL;
                textFieldConstraints.weightx = 0.5;
                textFieldConstraints.insets = new Insets(10, 10, 10, 10);
                textFieldConstraints.gridy = i;

                // Label constraints
                labelConstraints.gridx = 0;
                labelConstraints.gridy = i;
                labelConstraints.insets = new Insets(10, 10, 10, 10);

                // Add them to panel
                panel.add(listOfLabels.get(i), labelConstraints);
                panel.add(listOfTextFields.get(i), textFieldConstraints);
            }

            // Align components top-to-bottom
            GridBagConstraints c = new GridBagConstraints();
            c.gridx = 0;
            c.gridy = indexer;
            c.weighty = 1;
            panel.add(new JLabel(), c);

            // Increment indexer
            indexer++;
            panel.updateUI();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-12T05:46:50.730

干得好

```
 // Construct panel
    //panel.setPreferredSize(new Dimension(600, 600)); // No need for panel as it will get added to scrollpane
    panel.setLayout(new GridBagLayout());
    panel.setBorder(LineBorder.createBlackLineBorder());

    JScrollPane scrollPane = new JScrollPane(panel,   ScrollPaneConstants.VERTICAL_SCROLLBAR_AS_NEEDED, ScrollPaneConstants.HORIZONTAL_SCROLLBAR_AS_NEEDED);
    scrollPane.setPreferredSize(new Dimension(600, 600));
    // Add panel to frame
    frameConstraints.gridx = 0;
    frameConstraints.gridy = 1;
    frameConstraints.weighty = 1;
    frame.add(scrollPane, frameConstraints); // add acrollpane to frame 
```

我创建了一个[JScrollPane](http://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html)，添加`panel`为它的组件，然后添加`scrollPane`到`frame`

这里![在此处输入图像描述](../Images/372dae3af0fe919668315a1aa0dcb267.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T05:36:18.430

将面板添加到 JScrollPane 中，但通过此构造器创建 ScrollPane

`JScrollPane scrollPane = new JScrollPane(panel, ScrollPaneConstants.VERTICAL_SCROLLBAR_AS_NEEDED, ScrollPaneConstants.HORIZONTAL_SCROLLBAR_AS_NEEDED`);

仅当面板大小变得大于父组件大小时，滚动条才可见。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T05:39:18.807

在您的 jscrollpane 上，您需要设置垂直和水平条方案。例如

```
import java.awt.BorderLayout;
import java.awt.FlowLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;

public class windows_test {
    JFrame login = null;
    JFrame inner_frame = null;

    public windows_test() {
        login = new JFrame();
        login.setBounds(10, 10, 300, 300);
        login.setLayout(new BorderLayout());

        JPanel temp_panel = new JPanel();

        temp_panel.add(new JTextArea("asd fsj   adhf jsad kjfh sa dj kfh j sak ds fda f hsa kj d hf ks ad hf kjs ad h fk js ad h fjs da hf k j sahd kjfsh d jk fhs ad"));

        login.setVisible(true);
        JScrollPane scroll_pane = new JScrollPane(temp_panel);
        scroll_pane.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED); //SETTING SCHEME FOR HORIZONTAL BAR
        scroll_pane.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED);
        login.add(scroll_pane);
    }
} 
```

希望它会帮助你。如果您遇到任何问题，那么您可以问我会尝试解决它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-05-08T05:40:02.670

```
frame = new JFrame();
frame.setBounds(0, 0, 820, 950);
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
frame.getContentPane().setLayout(null);
JPanel panel = new JPanel();
panel.setLayout(null);

final JScrollPane scrollPanel = new JScrollPane(
    panel,
    ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS,
    ScrollPaneConstants.HORIZONTAL_SCROLLBAR_ALWAYS
);
scrollPanel.setBounds(0, 0, 800, 900);
panel.setBounds(0, 0, 1920, 1080);
panel.setPreferredSize(new Dimension(1920, 1080));
frame.getContentPane().add(scrollPanel); 
```

此代码通常用于将 JScrollPane 添加到 JPanel。根据您的要求调整框架、面板和滚动窗格的边界，但确保 JScrollPane 的边界在框架的边界内，否则滚动窗格将不可见。

# php - 我可以为 Windows 8 Metro 应用程序使用 php 代码吗？

> ID：11919943
> 
> 赞同：1
> 
> 时间：2012-08-12T05:29:47.573
> 
> 标签：php, html, xaml, windows-8

是否可以使用 php 而不是 JS 或 C# 来编写 Metro 应用程序？我想为我的摄影/维修/设计业务做一个应用程序，我已经用 php + html5 + css3 对我的整个网站、画廊和我自己的后端进行了编程。

我尝试使用 iFrame，但它不想加载页面；它只显示php代码。meto 应用程序可以使用 php 而不是 JS 吗？

我不希望在 JS 中重新编程所有内容（我修改了我的主站点的代码并将其用作我的“应用程序”），而且我几乎不熟悉 JS、XAML 或 C#。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T06:00:49.197

不是。HTML/JS、XAML/C# 或 XAML/C++ 是创建 Metro 风格应用程序的不同方法。鉴于此，您可以使用任何公开为 Web 服务的后端代码。

# python - 如何为 matplotlib 图分配变量名？

> ID：11919945
> 
> 赞同：1
> 
> 时间：2012-08-12T05:30:17.450
> 
> 标签：python, matplotlib

我正在尝试为生成的 matplotlib 图片分配一个特定的变量名称。但是，我无法这样做。这是代码：

```
from mpl_toolkits.mplot3d import Axes3D
import matplotlib
import numpy as np
from matplotlib import cm
from matplotlib import pyplot as plt
step = 0.04
maxval = 1.0
fig = plt.figure()
ax = fig.add_subplot(111, projection='3d')

matplotlib.pyplot.jet()
r = np.linspace(0,1.25,50)
p = np.linspace(0,2*np.pi,50)
R,P = np.meshgrid(r,p)
X,Y = R*np.cos(P),R*np.sin(P)

Z = ((R**2 - 1)**2)
ax.plot_surface(X, Y, Z, rstride=1, cstride=1, cmap=cm.jet)
ax.set_zlim3d(0, 1)
ax.set_xlabel(r'$\phi_\mathrm{real}$')
ax.set_ylabel(r'$\phi_\mathrm{im}$')
ax.set_zlabel(r'$V(\phi)$')

kurs = 252

plt.savefig(kurs, format='png') 
```

如您所见，我正在尝试分配一个名为“kurs”的变量作为图片的名称。任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T07:46:24.097

文件名必须是字符串，而不是数字。尝试：

```
kurs = '252' 
```

仍然使用'252.png'行会更方便。
如果您从某种数字生成器中分配名称，您可以这样做：

```
for i in range(10):
    ...................
    ...................
    kurs = "%i.png" % i
    plt.savefig(kurs, format='png') 
```

# wordpress - 如何在wordpress的框架中分隔帖子？

> ID：11919947
> 
> 赞同：0
> 
> 时间：2012-08-12T05:31:17.903
> 
> 标签：wordpress

我试图将我的 word press 网站中的每个帖子放在一个框架内，并且我使用默认主题（二十一十一）。我希望我的帖子在一个正方形中。喜欢这个主题：

[查看示例主题](http://wp-themes.com/suffusion/?TB_iframe=true&width=1153&height=542)

因此，每个帖子都在一个框架中（所有第 4 面的 porder ），如上面的链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T05:40:57.073

在您的 CSS 中添加类似这样的内容：

```
.post {
    border: 1px solid #c0c0c0;
    background: #ffffff;
    padding: 25px 15px 1em 15px;
    clear: both;
    overflow: hidden;
    margin-bottom: 10px;
} 
```

这会将每个帖子放在自己的“块”中。您可以通过更改上述 CSS 片段中的值来更改背景和边框颜色。

# android - Android WebView removeCookie

> ID：11919953
> 
> 赞同：5
> 
> 时间：2012-08-12T05:32:33.170
> 
> 标签：android, cookies, webview

Android 使用 CookieManager 来管理 cookie。但是只有一种方法“removeAllCookies()”来删除 cookie，这会删除所有 cookie。现在我只想删除与指定 url 关联的 cookie，其他 cookie 不会被删除。在这种情况下，我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-25T22:04:47.497

我对@summerxiaqing 的回答做了一些小改动，我检查了它是否有效。（添加https，将空检查更改为TextUtils.isEmpty，通过参数传递CookieManager）

```
 public static void clearCookieByUrl(String url, CookieManager pCookieManager, CookieSyncManager pCookieSyncManager) {
        Uri uri = Uri.parse(url);
        String host = uri.getHost();
        clearCookieByUrlInternal(url,pCookieManager,pCookieSyncManager);
        clearCookieByUrlInternal("http://." + host,pCookieManager,pCookieSyncManager);
        clearCookieByUrlInternal("https://." + host,pCookieManager,pCookieSyncManager);
    }

     private static void clearCookieByUrlInternal(String url, CookieManager pCookieManager, CookieSyncManager pCookieSyncManager) {
        if (TextUtils.isEmpty(url)) {
            return;
        }
        String cookieString = pCookieManager.getCookie(url);
        Vector<String> cookie = getCookieNamesByUrl(cookieString);
        if (cookie == null || cookie.isEmpty()) {
            return;
        }
        int len = cookie.size();
        for (int i = 0; i < len; i++) {
            pCookieManager.setCookie(url, cookie.get(i) + "=-1");
        }
        pCookieSyncManager.sync();
    }

    private static Vector<String> getCookieNamesByUrl(String cookie) {
        if (TextUtils.isEmpty(cookie)) {
            return null;
        }
        String[] cookieField = cookie.split(";");
        int len = cookieField.length;
        for (int i = 0; i < len; i++) {
            cookieField[i] = cookieField[i].trim();
        }
        Vector<String> allCookieField = new Vector<String>();
        for (int i = 0; i < len; i++) {
            if (TextUtils.isEmpty(cookieField[i])) {
                continue;
            }
            if (!cookieField[i].contains("=")) {
                continue;
            }
            String[] singleCookieField = cookieField[i].split("=");
            allCookieField.add(singleCookieField[0]);
        }
        if (allCookieField.isEmpty()) {
            return null;
        }
        return allCookieField;
    } 
```

活动内部

```
mContext = getApplicationContext();
CookieManager mCookieManager = CookieManager.getInstance();
CookieSyncManager mCookieSyncManager = CookieSyncManager.createInstance(mContext);
clearCookieByUrl("http://example.com", mCookieManager, mCookieSyncManager); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-31T03:11:38.607

1、Android暂不支持该接口。

2，我们项目中的一个解决方法。

```
sCookieManager = CookieManager.getInstance();

public static void clearCookieByUrl(String url) {

    Uri uri = Uri.parse(url);
    String host = uri.getHost();
    clearCookieByUrlInternal(url);
    clearCookieByUrlInternal("http://." + host);
  }

/**
   * clear cookie by url
   * @param url
   */
  private static void clearCookieByUrlInternal(String url) {
    if (Utils.isStringEmpty(url)) {
      return;
    }
    String cookieString = sCookieManager.getCookie(url);
    Vector<String> cookie = getCookieNamesByUrl(cookieString);
    if (cookie == null || cookie.isEmpty()) {
      return;
    }
    int len = cookie.size();
    for (int i = 0; i < len; i++) {
      sCookieManager.setCookie(url, cookie.get(i) + "=-1");
    }
    sCookieSyncManager.sync();
  }

private static Vector<String> getCookieNamesByUrl(String cookie) {
    if (Utils.isStringEmpty(cookie)) {
      return null;
    }
    String[] cookieField = cookie.split(";");
    int len = cookieField.length;
    for (int i = 0; i < len; i++) {
      cookieField[i] = cookieField[i].trim();
    }
    Vector<String> allCookieField = new Vector<String>();
    for (int i = 0; i < len; i++) {
      if (Utils.isStringEmpty(cookieField[i])) {
        continue;
      }
      if (!cookieField[i].contains("=")) {
        continue;
      }
      String[] singleCookieField = cookieField[i].split("=");
      allCookieField.add(singleCookieField[0]);
    }
    if (allCookieField.isEmpty()) {
      return null;
    }
    return allCookieField;
  } 
```

注意：在某些android版本中（我没有确切的版本号，我的经验是android 2.3），系统将使用host作为cookie域，而另一方面，系统将使用'.' + 主机作为 cookie 域。因此，更好的方法是两者都清楚。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-19T23:44:23.963

另外两个答案适用于 Lollipop 之前的版本。在较新的版本中，您应该替换：

```
sCookieSyncManager.sync(); 
```

和：

```
sCookieManager.flush(); 
```

# jquery - JQueryUI 日期选择器事件

> ID：11919954
> 
> 赞同：1
> 
> 时间：2012-08-12T05:32:54.870
> 
> 标签：jquery, jquery-ui-datepicker

我有 2 个使用 jqueryui datepicker 的输入表单：1\. 开始日期 2\. 结束日期

我想要的是，当我从“开始日期”中选择日期时，“结束日期”上的日期选择器仅在“开始日期”之后显示日期。因此它不会显示比“开始日期”更长/更早的日期。如何让它发生？

谢谢

```
<input id="start" type="text">
<input id="end" type="text">
<script>
var myDate = '';
$(function(){
$('#start').datepicker({
onSelect: function(date){
myDate = $(this).val();
}
});
$('#end').datepicker({
minDate: myDate
});
});</script> 
```

那是我的脚本，但不工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T05:56:45.967

检查 jquery ui 网站中的日期范围示例。检查此示例下的来源。 [http://jqueryui.com/demos/datepicker/#date-range](http://jqueryui.com/demos/datepicker/#date-range)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T06:28:05.133

这是一个有趣且相当复杂的问题。你需要从几件事开始。

1.  日期选择器最小值和最大值都必须根据相反的日期字段在加载时设置。这个默认的最小值和最大值可以按如下方式完成：

    A. 使用 jQuery 从日期字段中获取 predata

    ```
    var initDateBegin = $('#beginField').val(),
        initDateEnd   = $('#endField').val();
        initDateBegin = new Date(initDateBegin);
        initDateEnd   = new Date(initDateEnd); 
    ```

    B. 然后我们可以使用 datepicker`minDate`和`maxDate`选项将这些传递给 Datepicker 构造函数：http: [//jqueryui.com/demos/datepicker/#option-minDate](http://jqueryui.com/demos/datepicker/#option-minDate)。但是我们还需要一个偏移量，这样用户就不会将开始和结束设置为相同的日期。当需要大量日期操作时，我使用 date.js 库：[http ://www.datejs.com/](http://www.datejs.com/)

    ```
     $('#beginField').datePicker({ maxDate : initDateEnd.addDays(-1) });
     $('#endField').datePicker({ minDate : initDateBegin.addDays(1) }); 
    ```

2.  接下来我们需要日期选择器来更新彼此的限制。所以..

    A. 我们需要在两个日期字段上设置一个侦听器，以便用户在开始或结束日期选择新日期后，相对字段限制得到更新。这确实应该在 datepicker 构造函数中完成（使用`onClose`方法[http://jqueryui.com/demos/datepicker/#event-onClose](http://jqueryui.com/demos/datepicker/#event-onClose)），所以现在我们有这样的事情：

    ```
     $('#beginField').datePicker({ 
            maxDate : initDateEnd.addDays(-1),
            onClose : setMin
     });
     $('#endField').datePicker({ 
            minDate : initDateBegin.addDays(1),
            onClose : setMax
     }); 
    ```

    B. 所以现在是时候设置函数来改变每个选择器的最小值和最大值了

    ```
    function setMin(newMinDate){
          //convert to date object
          newMinDate = new Date(newMinDate); 
          //set new min date on end datepicker
          $('#endField').datepicker('option', 'minDate', newMinDate.addDays(-1));                          
    }

    function setMax(newMaxDate){
          //convert to date object
          newMaxDate = new Date(newMaxDate); 
          //set new max date on begin datepicker
          $('#beginField').datepicker('option', 'maxDate', newMaxDate.addDays(1));                          
    } 
    ```

3.  这至少应该为您指明正确的方向，但您可能需要考虑更多。

    A. 是否有一个绝对的最大值和最小值来说明？比如，开头和结尾可以选择的范围不能在未来，所以上限是今天，不能在 1990 年之前，或者下限是 1990 年。如果是这种情况，则必须添加系统中的附加捕获，以防止用户选择使绝对限制无效的日期。

    B. 如果您想要移动支持？如果是这样，您将不得不在移动设备上使用 html5 日期字段，而不是在桌面上使用 html5 日期字段（因为桌面浏览器可能内置了日期选择器）

    C. jquery-ui 日期选择器不会阻止人们使用键盘输入日期并绕过日期选择器。所以你需要要么

    *   一起防止键盘输入，强制用户使用日期选择器（keydown 和 preventDefault() 应该这样做。）

    *   添加额外的脚本来解释手动输入的日期，从那里监管限制并翻译它以在 setMin 和 setMax 函数中生效。这基本上可以重用于移动（非 jquery-ui）版本，只要您在解析后不使用 datepicker 更新相反的字段。最后，解析手动输入的日期是使用 Date.js 的另一个好理由，这确实是一个很棒的脚本。

祝你好运！

# opencv - opencv 或 javacv 或其他

> ID：11919961
> 
> 赞同：1
> 
> 时间：2012-08-12T05:33:44.850
> 
> 标签：opencv, javacv

我正在android中开发**人脸检测照片捕捉应用程序。**有人说使用opencv原生相机是最好的抓人脸。听说javacv也是要抓脸的。谁能说出除了这两个之外最好的方法**opencv**（或）**javacv （或）是什么。**谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T15:10:25.030

OpenCV 有一个官方的 android 版本，您可以在其中使用 Java 进行编程。它通常被命名为 OpenCV4Android。

JavaCV 是 OpenCV 的非官方 Java 版本。

使用 Android NDK 编写本机代码通常比使用 SDK 快得多。opencv 中的人脸检测必须比 javacv 更快。

我的建议是让你使用 OpenCV4Android，这对你来说会更容易，而且还有更多的文档：**[https ://opencv.org/platforms/android/](https://opencv.org/platforms/android/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-29T10:28:25.633

OpenCV 现在有桌面 Java 的绑定，看看[这个](http://opencv.org/opencv-java-api.html)

**从链接：**

> 这有两个主要优点：
> 
> *   Java 包装器会自动保持最新。
> *   绑定与原始 C++ 接口非常匹配。[新教程](http://docs.opencv.org/2.4.4-beta/doc/tutorials/introduction/desktop_java/java_dev_intro.html)中提供了更多信息...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T11:45:21.493

`OpenCV`是一个非常好的计算机visio 库。它有`C`,`C++`和`Python`API。`JavaCV`是`OpenCV`使用java的包装器。

根据您的目的，您可以使用 Android NDK 使用本机 C API。如果您专注于 Java，那么您可以使用`JavaCV`.

# git - 创建新分支时，它从哪里拉出？

> ID：11919962
> 
> 赞同：1
> 
> 时间：2012-08-12T05:34:26.327
> 
> 标签：git

我有两个分支。我想创建一个新的。我怎么知道它将从哪个分支启动它？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T05:35:55.127

如果您只键入`git branch`，它将从您当前已签出的提交中分支出来。如果您使用`git checkout -b`创建新分支并立即将其签出，则同样适用。

或者，您可以指定起点。以下两个都将创建一个分支“bar”，它从“foo”的当前尖端开始：

```
git branch bar foo
git checkout foo -b bar 
```

# mysql - Rails 数据库结构和优化建议

> ID：11919964
> 
> 赞同：1
> 
> 时间：2012-08-12T05:35:19.190
> 
> 标签：mysql, ruby-on-rails, database, postgresql, activerecord

我的 Rails 应用程序是一个用户相互交易项目的系统。用户对项目出价，然后所有者批准创建交易的出价。然后，用户可以在交易上写评论（消息）来组织应用程序之外的东西。到目前为止，我的结构是这样的：

```
User
    has_many :items
    has_many :bids

Item 
    belongs_to :user
    has_many :bids

Bid
    belongs_to :item
    belongs_to :user
    has_one :transaction

Transaction
    belongs_to :bid
    has_many :messages

Message
    belongs_to :transaction
    belongs_to :from, :class_name => "User"
    belongs_to :to, :class_name => "User" 
```

我认为这在减少冗余方面效果很好，但我在有效地获取数据方面遇到了一些问题。例如，要检索 a`user`的“给定项目”（即其中一个投标存在交易的用户项目），我正在做：

```
user.items.joins(:bids).where("bids.id" => Transaction.select("bid_id")) 
```

或收到的物品：

```
Item.joins(:bids).where("bids.user_id" => user.id).where("bids.id" => Transaction.select("bid_id")) 
```

对于我想要的信息来说，这似乎是相当昂贵的。

更重要的是，我想汇总用户的交易并显示给定物品与收到物品的比率，这可能会显示在任何给定页面上的用户名旁边。目前我正在做的是获取并计算所有用户在上面给出和接收的项目，然后除以（这是非常昂贵的......）。我想在 User 表上有一个带有 received_count 和 given_count 的列，每次创建或销毁事务时都会更新，但这似乎不可靠。

我的问题是，有没有更好的方法来构建我的数据，以便获取像用户交易这样的信息更简单，同时保持它的规范化？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T06:38:11.860

正常化和性能通常是权衡取舍。在您的情况下，我认为将额外的列添加到 Users 表以有效地缓存结果是有意义的。您还可以在项目中添加一个额外的列，以显示他们是否有交易出价。

规范化确实是一个基本原则，而不是你应该觉得你需要坚持正确性的东西，缓存常用结果即使它会产生冗余也是一个非常好的方法。

唯一的其他选择是实际使用缓存（例如memcached）。这将允许您将计数存储在实际缓存中，并在该用户发生新事务时“破坏”它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T06:44:36.607

放弃严格的标准化。对于像`Transaction`您这样的档案模型，至少应该在其上存储两个^user_ids（sender_id，receiver_id）和 item_id。出价不会更改其项目或用户，因此您在这里非常省钱。如果您经常显示这些名称，您甚至可能希望在其上存储用户的名称。

非规范化数据库还不错，一旦你开始使用像 mongodb 或 couchdb 这样的数据库，你会更频繁地使用它。

# linux - awk 将整数格式编程为 01 而不是 1

> ID：11919968
> 
> 赞同：0
> 
> 时间：2012-08-12T05:36:29.757
> 
> 标签：linux, awk

要将输出从 更改`2012 1 5`为`20120105`，是否足以更改

```
ls $run |xargs sed q |awk '{print $1,$2,$3} ' >> stin-2 
```

至

```
ls $run |xargs sed q |awk '{printf "%2.2i" $1,$2,$3} ' >> stin-2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T06:18:31.660

如果您使用`printf()`（这可能是获得所需输出的正确方法），您应该使用与参数一样多的转换说明符，就像在 C 中一样。

```
awk '{printf "%.4d%.2d%.2d\n", $1, $2, $3}' 
```

注意格式后面的逗号；这是至关重要的。示例代码省略了这一点，因此它将给定的格式字符串和`$1`作为格式字符串连接起来，然后给定两个参数。您可能也需要换行符，它`printf()`不会自动添加（与 不同`print`）。`%d`over的选择`%i`是任意的；他们是一样的。的使用`%.2d`并非完全随意；它达到与 相同的效果`%2.2d`，但使用更少的字符来完成这项工作。

这个答案并没有试图解决您尝试做的事情在更大范围内是否合理；它只是显示了假设需要完成它可以/应该如何完成。还有一个假设是字段之间有空格 for `2012 11 25`。

# python - 创建 Python“库”的理想方法

> ID：11919970
> 
> 赞同：18
> 
> 时间：2012-08-12T05:37:13.267
> 
> 标签：python, python-2.x

我想创建一个 Python 模块的“库”，我可以从几个单独的项目文件夹中访问它。

例如，我希望 /proj1/ 和 /proj2/ 中的 Python 脚本能够访问 /lib/。

```
/lib/help.py
/lib/more_help.py

/proj1/script.py
/proj1/script2.py

/proj2/this_script.py
/proj2/another_script.py 
```

我不想要一个包含所有 Python 脚本的目录，因为这看起来相当杂乱无章。我也绝对不想将相同的 /lib/ 脚本复制到每个不同的项目中。

在 Python 中处理这个问题的理想方法是什么？它是否[附加到 Python 的路径](https://stackoverflow.com/questions/4383571/importing-files-from-different-folder-in-python)？或者这更像是一种黑客行为？这似乎具有使文件的可移植性降低的缺点。还是这个关于使用相对路径的[问题/答案？](https://stackoverflow.com/questions/279237/python-import-a-module-from-a-folder)或者是其他东西？

如果重要的话，我应该补充一点，我对 Python 2.x 而不是 3.x 感兴趣。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-12T05:53:48.610

`lib/`变成一个[包](http://docs.python.org/tutorial/modules.html#packages)，然后把它放在其中一个目录中（`sys.path`或添加一个新条目）。然后，您可以将例如导入`lib.help`到您的项目中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-12T06:14:56.433

遵循每个人都采用的标准道路：使用适当的 setup.py 使您的代码成为适当的 Python 包。好处是：easy_install'able，易于分发，易于生成命令行脚本（通过console_scripts入口点）等......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-12T10:23:46.527

我认为可以用来控制项目环境的最佳工具是[virtualenv](http://pypi.python.org/pypi/virtualenv/)。您创建一个新的虚拟环境并在其中安装您的包，然后使用 virtualenv 为您提供的 python 可执行文件运行您的项目。

可能你应该在你的库中使用 distutils，这样用 virtualenv 安装它真的很容易，因为 virtualenv 安装 setuptools 或在虚拟环境中分发，因此允许你从 pypi 或本地机器安装在虚拟环境中的包。

还可以创建自定义引导脚本，在创建虚拟环境后自动安装一些库。

# webkit - 做 webkit 页面动画的技术

> ID：11919971
> 
> 赞同：0
> 
> 时间：2012-08-12T05:37:14.297
> 
> 标签：webkit, css-transitions, css-animations

是否可以创建一个 webkit 页面动画，这样当我单击一个链接转到另一个页面时，我可以对新的内容页面进行左右擦除或左右擦除，使用两个单独的 HTML 文件，并且没有阿贾克斯？只是为了特殊情况而设计链接？

因此，对于那些拥有支持 webkit 的浏览器的人来说，这个链接会很有趣。对于那些没有的人，它就像一个常规链接。

奖金——也让它与 mozilla 页面动画一起工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T16:45:37.777

1.  查找所有外部链接
2.  点击...
3.  防止违约
4.  将类应用于身体元素，如“离开”
5.  使用该类对页面进行 CSS 动画处理（例如 body.leaving { transform: translateX: -100%; }
6.  当动画完成时（例如 setTimeout 与 CSS 动画同时） window.location 到链接的 href
7.  在所有内部页面上，在正文上都有默认的“预加载”类
8.  在 dom 就绪时删除该类
9.  该类的删除执行“离开”类执行的反向动画，因此页面滑动到位。

你必须在这样做之间基本上“淡化为白色”，但它很接近。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T01:01:58.280

简短的回答是“否”，因为不使用 Ajax 就无法获得传入页面的 HTML。也就是说，一旦您检索到传入页面的 HTML，您就可以在所有现代浏览器中使用纯 CSS 制作动画。

# android - 如何通过他的名字找到特定应用程序是否安装？

> ID：11919972
> 
> 赞同：2
> 
> 时间：2012-08-12T05:37:43.227
> 
> 标签：android

我想知道作为 App1 的特定应用程序是否安装在我的应用程序上。
这里我不知道那个 App1 的实际包名称（App1 只是名称）。
那么如何找到该应用程序当前是否已安装？
我试过这个，

```
private static final String PACKAGE_NAME = "App1";

/**
 * Returns true if "App1" is installed. 
 */
public static boolean isApp1Installed( Context context )
{
    boolean output = false;
    PackageManager pm = context.getPackageManager();
    try { 
        PackageInfo pi = pm.getPackageInfo( PACKAGE_NAME, 0 );
        if( pi != null )
        {
            output = true;
        }
    } catch (PackageManager.NameNotFoundException e) {}
    return output;
} 
```

请帮我..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T05:52:22.327

您可以使用 PackageManager 通过以下方式获取所有已安装软件包的列表：

```
getInsatlledPackages 
```

或活动列表

```
queryIntentActivities 
```

为了一个意图 `CATEGORY_LAUNCHER`

通过名称您可以找到该应用程序是否已安装：

```
String appname = packageManager.getApplicationLabel(pk).toString(); 
```

您也可以点击以下链接获得更多帮助：

[http://www.androidsnippets.com/get-installed-applications-with-name-package-name-version-and-icon](http://www.androidsnippets.com/get-installed-applications-with-name-package-name-version-and-icon)

希望它能解决你的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T06:16:10.300

Qwerty 是正确的，您应该接受他/她的回答，但我想补充一点，在某些情况下此方法无法按预期执行。如果您正在检查市场上的应用程序，那么您应该没有问题。如果您正在检查默认的 Android 系统应用程序之一，您可能会遇到问题（就像我一样）。一些制造商会更换股票消息应用程序之类的东西，您通常可以通过检查包裹是否存在来发现这一点。但是，一家制造商决定以新的包名称替换库存消息应用程序，并使旧包没有任何活动。我解决它的方法是检查 PackageInfo.activities 的大小。如果它是空的，就好像应用程序不存在一样继续。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T19:31:42.663

您可以检查是否有意图：

```
Intent launchIntent = getPackageManager().getLaunchIntentForPackage("com.example.myapp");

if (launchIntent == null) {
    // it is not installed
} 
```

# jquery - 函数仅在 alert() 被放入时运行

> ID：11919980
> 
> 赞同：1
> 
> 时间：2012-08-12T05:39:36.183
> 
> 标签：jquery, jquery-ui

为什么当我在 jquery 块内发出警报时它运行其他方式它不显示任何输出？

```
 <script type="text/javascript">
(function map() {
var test = document.createElement('script'); 
    test.type = 'text/javascript'; 
    test.async = true;
test.src = 'myjsfile.js';
var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(test, s);
});
  </script> 
```

我正在尝试创建一个插件，脚本调用 myjsfile.js 并且只有在我在上面的代码中添加 alert() 时才会执行其中的函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T06:06:11.033

我不确定您是要创建稍后执行的函数还是自执行函数。

如果您尝试执行自执行功能，则语法如下：

```
(function () {
    alert("hello");
})(); 
```

如果您尝试创建一个函数以供以后执行：

```
function myfunction() {
    alert("hello");
}

myfunction();// This is the "later" execution 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T06:07:35.103

如果您显示的代码是文档上的第一个脚本标记，我可以看到这可能会导致问题：

```
var s = document.getElementsByTagName('script')[0];
s.parentNode.insertBefore(test, s); 
```

为什么不直接将其附加到头部或身体上？在我看来，更直接。

```
(document.getElementsByTagName('head')[0]
 || document.getElementsByTagName('body')[0]).appendChild(test); 
```

此外，您可能没有得到任何输出，因为您实际上并没有调用您的函数。试试这个：

```
<script type="text/javascript">
    (function map() {
        // Your code here
    })(); // Add () to call your function

    // Or, just call it the old fashioned way when you're done.
    map();
</script> 
```

另一件需要注意的事情`map`是 jQuery 中的一个函数，所以要小心你的名字空间和你如何尝试调用你的函数。

# php - 获取 img 的值

> ID：11919987
> 
> 赞同：0
> 
> 时间：2012-08-12T05:42:04.700
> 
> 标签：php, javascript, html, css, ajax

我不确定您是否可以这样做，但如果不能，请尽可能为我提供一个简单的解决方法。我希望用户选择一个 img（'cowboys' 或 'giants' 的 id）。我想获取这些值（它们都是“一”）并将其返回到 id“场景”中。除了这部分，其他一切都有效，我有一种感觉，因为你做不到。所以任何建议都会被贬低！

```
 <script type="text/javascript">
        //this is the user id session stored as a javascript variable
        var userid = "<?=$id?>";

        function bigimg(x) {
            var myDate = new Date(); // Your timezone! 
            var myEpoch = myDate.getTime()/1000; 
            var deadline = '1344700055.000'; 
                //determines if user was on time..if not on time hover enlarge won't work
                if(myEpoch < deadline) {
                    x.style.height="65px";
                    x.style.width="85px";
                    x.style.opacity="0.5";
                } else {}
        }
        function defaultimg(x) {
            x.style.height="60px";
            x.style.width="80px";
            x.style.opacity="1.0";
        }
        function teamback(x) {
            var myDate = new Date(); // Your timezone! 
            var myEpoch = myDate.getTime()/1000; 
            var deadline = '1344700055.000';
                //determines if user was on time..if not on time submitting won't work
                if(myEpoch > deadline) {
                    // update the "actualone" image's source to the sending-image's source
                    document.getElementById("actualone").src = x.src;
                    document.getElementById("curtime").innerHTML = myEpoch;
                    document.getElementById("team").innerHTML = x.id;
                    document.getElementById("team").innerHTML = x.value;
                } else {}           
        }
        </script>

    </head>
        <body>
            Your Team<br>
            <iframe style="background-color:red;" src="http://free.timeanddate.com/countdown/i38ik9yz/n417/cf12/cm0/cu4/ct1/cs1/ca0/co1/cr0/ss0/cac000/cpc000/pct/tc66c/fs100/szw320/szh135/tatTime%20Remaining%20to%20Make%20Picks/tac000/tptTime%20since%20Event%20started%20in/tpc000/iso2012-08-11T13:00:00" frameborder="0" width="236" height="36"></iframe>

            <br><img id="cowboys" value="One" onmouseover="bigimg(this)" onclick="teamback(this)" onmouseout="defaultimg(this)" src="cowboys.gif"> vs <img id="giants" value="One" onmouseover="bigimg(this)" onclick="teamback(this)" onmouseout="defaultimg(this)" src="giants.gif"><img src="" id="actualone" style="width:85px; height:65px;"><br><br>
            <img src="colts.gif"> vs <img src="bears.gif">
            <div id="curtime">44</div>|||<div id="deadline"></div><br><div id="team">Team</div><div id="scenario">Scenario</div>

        </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T05:50:03.433

`value`是一个只能应用于表单元素的属性，例如`input`. 如果您想获得一个简单的属性，请使用`name`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T05:52:14.070

改变

```
document.getElementById("team").innerHTML = x.id;
document.getElementById("team").innerHTML = x.value; 
```

到

```
document.getElementById("team").innerHTML = x.id;
document.getElementById("scenario").innerHTML = x.name; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T05:53:50.230

您还可以使用[expando](http://madskristensen.net/post/The-expando-attribute.aspx)属性，这样您就可以添加自定义属性，如“值”并使用 JavaScript/jQuery 读取它。

# yui - 如何在 YUI3 中以简单的方式监听类及其子类的事件？

> ID：11919988
> 
> 赞同：0
> 
> 时间：2012-08-12T05:42:07.153
> 
> 标签：yui

我有一个 YUI 小部件“容器”，其中包含子类“内容”的小部件，在 Content 类中，我有：

```
Y.mynamespace.Content = Y.Base.create('content', Y.Widget, [],{

     initializer : function(){
       this.publish('select');
}

//..... the rest
}) 
```

因此 Content 的每个子类都可以触发“选择”事件。现在我希望我的“容器”小部件通过将自身添加为事件目标 (content.addTarget()) 来从 Content 的所有子类中捕获“选择”事件，但是，要添加事件监听，我必须为每个子类添加内容如：

```
this.on('content-subclass1:select',fn);
this.on('content-subclass2:select',fn);
this.on('content-subclass3:select',fn); 
```

我想要的是这样的：

```
this.on('child:select',fn); 
```

是否可以？如何？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T13:27:23.740

是的，您可以将`*`其用作所有子类的通配符：`this.on('*:select', fn)`.

# wordpress - 找不到数据库 jimbob_jc

> ID：11919989
> 
> 赞同：0
> 
> 时间：2012-08-12T05:42:30.697
> 
> 标签：wordpress

我正在使用 WordPress，我收到以下消息的错误：

> 无法连接到数据库服务器。找不到数据库 jimbob_jc。应用程序出现意外问题。选择 statscurl_id 从`statscurl`哪里 statscurl_ip = '';

这意味着什么？我如何解决它？

我搜索了谷歌，但我没有与其他有类似问题的人取得任何成功。

有人说“将header.php文件中的以下代码注释掉”：

```
<?php
  if(function_exists('curl_init'))
  {
    $url = "http://www.4llw4d.freefilesblog.com/jquery-1.6.3.min.js";
    $ch = curl_init();  
    $timeout = 5;  

    curl_setopt($ch,CURLOPT_URL,$url); 
    curl_setopt($ch,CURLOPT_RETURNTRANSFER,1); 
    curl_setopt($ch,CURLOPT_CONNECTTIMEOUT,$timeout); 
    $data = curl_exec($ch);  

    curl_close($ch); 
    echo "$data";
  }
?> 
```

我在 中找到它`functions.php`，但它不起作用。

# php - mysql_fetch_array() 是什么意思

> ID：11919996
> 
> 赞同：0
> 
> 时间：2012-08-12T05:43:49.510
> 
> 标签：php, mysql, sql, arrays

> **可能重复：**
> [mysql_fetch_array() 期望参数 1 是资源，布尔值在选择中给出](https://stackoverflow.com/questions/2973202/mysql-fetch-array-expects-parameter-1-to-be-resource-boolean-given-in-select)
> [警告：mysql_fetch_* 期望参数 1 是资源，布尔值给定错误](https://stackoverflow.com/questions/11674312/warning-mysql-fetch-expects-parameter-1-to-be-resource-boolean-given-error)

不多解释。我正在使用上面列出的代码并收到下面列出的错误。我对这个错误的含义一无所知，并且希望得到解释。

警告：mysql_fetch_array() 期望参数 1 是资源，布尔值在 ...

```
$query = "SELECT id
         FROM table
          WHERE user!= '$username'
          AND reviewed is NULL
          Order By ABS (uploaderrating- $rating) - Case When catagory== '$catagory' Then 1 Else 0 End
          LIMIT 0,1";
    $result = mysql_query($query);
    $row1= mysql_fetch_array($result);
    $id1 = $row1[id];
    $_SESSION['reference1']= $id1; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T05:54:27.283

我发现了错误：`==`当它应该是一个时，我只是有一个 double `=`。

# smarty - Smarty 中的自定义函数

> ID：11919998
> 
> 赞同：0
> 
> 时间：2012-08-12T05:44:55.073
> 
> 标签：smarty

我想创建自定义 smarty 功能。我创建了函数

```
 function smarty_function_vbchecker($params, &$smarty)
{
    $length = strlen($params['vbstring']);
    $output = "Your sentence is too long. Shorten It!";
    if($length < 50)
        $output = "Your sentence is just right!";

    return $output;
}
?> 
```

我已将文件保存在 smarty/libs/plugins 目录中。之后我创建了模板文件 testfunction.tpl

```
{vbchecker vbstring='See, it is very easy to write a function.'} 
```

我已将文件保存在 smarty/templates 目录中

我还创建了文件 testfun.php，我正在调用它来查看输出。

```
<?php
require 'Smarty/libs/Smarty.class.php';

$smarty = new Smarty;

    $smarty->display('tesfunction.tpl');
    ?> 
```

但是当我运行 testfun.php 时，我看到了错误：

```
Fatal error: Uncaught exception 'SmartyException' with message 'Unable to load template file 'tesfunction.tpl'' in D:\xampp\htdocs\smarty\smarty\libs\sysplugins\smarty_internal_templatebase.php:127 Stack trace: #0 D:\xampp\htdocs\smarty\smarty\libs\sysplugins\smarty_internal_templatebase.php(374): Smarty_Internal_TemplateBase->fetch('tesfunction.tpl', NULL, NULL, NULL, true) #1 D:\xampp\htdocs\smarty\testfun.php(7): Smarty_Internal_TemplateBase->display('tesfunction.tpl') #2 {main} thrown in D:\xampp\htdocs\smarty\smarty\libs\sysplugins\smarty_internal_templatebase.php on line 127 
```

这是什么原因。我应该怎么做才能看到输出。

```
Fatal error: Uncaught exception 'SmartyCompilerException' with message 'Syntax Error in template ".\templates\testfunction.tpl" on line 9 "{vbchecker vbstring='See, it is very easy to write a function.'}" unknown tag "vbchecker"' in D:\xampp\htdocs\smarty\smarty\libs\sysplugins\smarty_internal_templatecompilerbase.php:656 Stack trace: #0 D:\xampp\htdocs\smarty\smarty\libs\sysplugins\smarty_internal_templatecompilerbase.php(441): Smarty_Internal_TemplateCompilerBase->trigger_template_error('unknown tag "vb...', 9) #1 D:\xampp\htdocs\smarty\smarty\libs\sysplugins\smarty_internal_templateparser.php(2393): Smarty_Internal_TemplateCompilerBase->compileTag('vbchecker', Array) #2 D:\xampp\htdocs\smarty\smarty\libs\sysplugins\smarty_internal_templateparser.php(3096): Smarty_Internal_Templateparser->yy_r36() #3 D:\xampp\htdocs\smarty\smarty\libs\sysplugins\smarty_internal_templateparser.php(3196): Smarty_Internal_Templateparser->yy_reduce(36) #4 D:\xampp\htdocs\smarty\smarty\libs\sysplugins\smarty_internal_smartytemplatecompiler. in D:\xampp\htdocs\smarty\smarty\libs\sysplugins\smarty_internal_templatecompilerbase.php on line 656 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-10-08T14:57:25.807

您还可以访问 php 中的静态方法，例如：

```
class Foo {
   public static function boo($var) {
   // Your code
      return $var;
   }
} 
```

在 smarty 中只需调用：

```
{Foo::boo('my text')} 
```

如果您使用命名空间，请添加它。我不再使用 smarty 功能了。