# StackOverflow 问答 12438000-12438999

# javascript - 使用 jquery 创建导航页面

> ID：12438000
> 
> 赞同：1
> 
> 时间：2012-09-15T13:58:47.540
> 
> 标签：javascript, jquery, html

我实际上并不知道如何表达问题标题，但这里是描述。假设我正在使用 jQuery 来显示/隐藏`ul`堆叠在一起的 s（绝对定位）。例如：

```
<ul id="one">
  <li>blah</li>
  <li>blah2</li>
</ul>

<ul id="two">
  <li>blah</li>
  <li>blah2</li>
</ul> 
```

我有一个控制器按钮，当按下它时，只需更改这些`ul`s 的 z-index。控制器按钮实际上就是：

```
<a href="#" id="mybutton">My button</a> 
```

使用 jQuery 代码：（我正在使用 jQuery 循环插件）

```
$('#mybutton').click(function() { 
  // check which ul is currently shown
  // change z-index, so that the next ul is to be shown
}); 
```

**问题：**

在我的站点中，我有几个要指向*第二个* `ul`的页面，这样当单击时，它会将它们带到包含所有`ul`s 的页面，但只会显示*第二*个。如果该人进入该页面，首先`ul`显示默认值，然后单击“下一步”继续到下一个，这将是相同的`ul`。我只是想知道是否可以避免按“下一步”，而只是将用户直接带到页面并显示第二个`ul`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T14:05:17.933

如果我对您的理解正确，也许您可​​以通过每页具有唯一 ID 的页面换行来完成此操作？您可以使用 JS 或服务器端逻辑交换 id，具体取决于您要执行的操作。

```
<div id="page-one">
    <ul id="one">
      <li>blah</li>
      <li>blah2</li>
    </ul>

    <ul id="two">
      <li>blah</li>
      <li>blah2</li>
    </ul>
</div> 
```

那么你的CSS将是`#page-one #one { display:block }; #page-two #one { display : none };`等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T14:21:11.337

我认为您可以使用 URL 中的井号标签。然后，您可以编写这样的 if 语句：

```
 if(location.hash === "#2"){
     $("#one").hide();
 }else{
     $("#two").hide();
 } 
```

或者直接作为复制粘贴示例：

```
<html>
<script src="http:////ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
<script>
$(function(){
    if(location.hash === "#2"){
        $("#one").hide();
    }else{
        $("#two").hide();
    }
    $('#mybutton').click(function(e) { 
        $("ul").toggle(); //quick n dirty! only works with 2 lists :)
        e.preventDefault();
    });
});
</script>
<body>
<a href="#" id="mybutton">My button</a>

<ul id="one">
  <li>First Item!</li>
  <li>blah</li>
  <li>blah2</li>
</ul>

<ul id="two">
  <li>Second Item!</li>
  <li>blah</li>
  <li>blah2</li>
</ul>

<a href="#2">To second page (you might have to refresh, notice the #2 at the end of the url!)</a>
​&lt;/body>
</html> 
```

另请注意，我插入了一个`e.preventDefault();`at`#mybutton`的单击侦听器，以防止 URL 在单击时变回。

# image - 如何在 GUI matlab 中显示到轴之前浏览图像并对其进行处理

> ID：12438007
> 
> 赞同：0
> 
> 时间：2012-09-15T13:59:47.563
> 
> 标签：image, matlab, user-interface, processing, axes

我想用 matlab 创建一个 GUI，浏览图像并在将其显示到某些轴之前对其进行处理。

我当前的程序无法浏览图像，我想显示的图像与上一个过程有关。是否可以通过一个按钮浏览所有处理过的图像并将其显示到轴上？有人可以帮我为这个示例程序创建 GUI 吗？

```
folder = 'D:\wildlife';
   baseFileName = 'page-6.png';
   fullFileName = fullfile(folder, baseFileName);
   % Get the full filename, with path prepended.
   fullFileName = fullfile(folder, baseFileName);
   if ~exist(fullFileName, 'file')
    % Didn't find it there.  Check the search path for it.
    fullFileName = baseFileName; % No path this time.
    if ~exist(fullFileName, 'file')
        % Still didn't find it.  Alert user.
        errorMessage = sprintf('Error: %Gambar tidak ditemukan.', fullFileName);
        uiwait(warndlg(errorMessage));
        return;
    end
end
rgbImage = imread(fullFileName);

% Get the dimensions of the image.  numberOfColorBands should be = .
[rows columns numberOfColorBands] = size(rgbImage);

% Display the original color image.
subplot(2, 3,  1);
imshow(rgbImage);
title('Gambar Asli', 'FontSize', fontSize);

% Enlarge figure to full screen.
set(gcf, 'units','normalized','outerposition',[0 0 1 1]);

%set the morphology
SE = strel ('square', 3);
 j=imerode (rgbImage, SE);
subplot(2, 3,  2);
imshow(j);
title('Penebalan Citra', 'FontSize', fontSize);

% Binarize to find black pixels
% Find where either red, green, or blue channel is dark.
thresholdValue = 55;
binaryImage = j(:,:, 1) < thresholdValue | j(:,:, 2) < thresholdValue | j(:,:, 3) < thresholdValue;

% Display the image.
subplot(2, 3,  3);
imshow(binaryImage);
title('Citra Biner', 'FontSize', fontSize);

% Fill the image
filledImage = imfill(binaryImage, 'holes');
% Display the image.
subplot(2, 3,  4);
imshow(filledImage);
title('Pengisian Citra Biner', 'FontSize', fontSize);
drawnow; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T21:59:40.703

要创建 GUI，Matlab 的 GUIDE 功能有很好的文档记录，并且相对易于使用和学习 ( [http://www.mathworks.com/help/matlab/gui-building-basics.html](http://www.mathworks.com/help/matlab/gui-building-basics.html) )。只需在 Matlab 提示符下键入“指南”即可调出快速启动菜单。

创建新的空白 GUI 后，您可以添加一个按钮和尽可能多的轴来显示各种图像（上面的示例代码为 4 个）。然后可以将浏览、处理和显示图像的代码放在按钮的回调中。要打开回调代码，请右键单击按钮并从菜单中选择“查看回调 -> 回调”。

然后您可以使用类似以下的内容来浏览所需的图像：

```
[baseFileName, folder, FilterIndex] = uigetfile('*.png'); 
```

要在所需的轴上显示图像，请在调用“imshow”时指定适当的轴句柄作为“父”参数，而不是使用“子图”：

```
% Display the original color image.
fullFileName = [folder baseFileName];
rgbImage = imread(fullFileName);
imshow(rgbImage, 'Parent', handles.axes1); 
```

# android - 使用带有内置 SQLite 的数据库管理器

> ID：12438008
> 
> 赞同：0
> 
> 时间：2012-09-15T13:59:50.830
> 
> 标签：android

我想知道如何在 Android 中使用 A DB MANAGER（GUI 工具）作为内置 SQLite db。我的意思是，我想通过 DB MANAGER 创建、编辑、删除、插入表/数据，而不是对其进行硬编码，然后我只想从数据库中读取数据。我可以将数据库导出/导入到/从android内置数据库吗？为什么我不能/不应该在我的应用程序中使用任何独立的、预加载的数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T14:19:16.117

您可以在应用程序之外构建数据库，然后将其加载。没有理由不这样做。您只需要确保对其进行设置，使其符合 Android 所需的某些要求。这些要求是：

*   每个表的主键需要是“_id”。*   数据库必须包含一个名为“android_metadata”的表*   “android_metadata”表必须包含一个名为“locale”的字段*   “locale”字段必须有一个条目（对于美国，它需要是“en_US”）

设置数据库后，您可以选择。要么把它放在你的应用程序的资产文件夹中，这样它就会被编译到应用程序中，或者你可以设置代码来通过一些网络服务来获取它。无论哪种情况，它都需要在您的应用程序数据/数据库目录中结束，以便它可以被 android 系统使用（如果您希望它保持私有/其他应用程序无法使用）。

[可以在这里](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)找到一篇涵盖我上面所说的内容的好文章（以及深入研究将数据库从资产文件夹复制到数据库目录的代码）。

**编辑**

您不能将数据库直接放入您的应用程序数据目录中，因为除了您的应用程序之外的任何东西都无法访问它（除非您根设备），因此您必须将它放在您的资产文件夹中，然后将其从那里复制到您的应用程序数据目录（或其他可以使用它的地方......它不能从您的应用程序资产中使用）。

每个应用程序的数据库存储标准目录都不同，没有一个目录适用于所有应用程序。安卓使用`/data/data/your.package.name/databases/`.

有很多方法可以从您的数据库中获取数据......从将其复制到文本文件并通过电子邮件发送到将数据库批发复制到/从您的 SD 卡中，任何其他应用程序都可以访问它，或者您可以使用数据库管理器访问它。

# ios - 未找到 RestKit/RestKit.h 文件。

> ID：12438013
> 
> 赞同：4
> 
> 时间：2012-09-15T14:00:46.807
> 
> 标签：ios, xcode, restkit

我完全按照此处找到的这些步骤进行操作：

[http://www.raywenderlich.com/13097/intro-to-restkit-tutorial](http://www.raywenderlich.com/13097/intro-to-restkit-tutorial)

但是....我收到错误：

![在此处输入图像描述](../Images/ca6846cf203d597bac559e5bc4bf63fb.png)

这可能是什么原因造成的？我应该更改标题搜索路径吗？我不确定从哪里开始。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T15:34:24.320

我对该教程也有同样的错误。

但是后来我使用了本教程并且它起作用了：[https ://github.com/RestKit/RestKit/wiki/Installing-RestKit-in-Xcode-4.x](https://github.com/RestKit/RestKit/wiki/Installing-RestKit-in-Xcode-4.x)

虽然不知道有什么不同..

何塞·罗德里格斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T22:13:48.820

按照上面链接的restkit github页面上的安装，它仍然无法正常工作。仍然说“找不到文件”。

我注意到 libRestKit.a 文件是/是红色的，所以我不得不从 DerivedData 文件夹中的其他一些项目中搜索并找到并复制到它应该在我当前项目中的位置。现在红色的 libRestKit.a 文本是白色的。所以我清理并尝试再次构建。仍然得到“找不到文件”。

# javascript - 如何将两个类样式添加到锚标记

> ID：12438020
> 
> 赞同：1
> 
> 时间：2012-09-15T14:02:13.353
> 
> 标签：javascript, html, css

我的 html 页面中有这些类。

```
 <div class="linkFunctions">
                        <a class="openLink"></a>
                        <a class="newLink"></a>
                        <a class="deleteLink"></a>
                        <a class="duplicateLink"></a>
                        <a class="viewLinkCode"></a>
                        <a class="linkTags"></a>
                    </div> 
```

标签中的每个类都`<div>`代表一个可点击的图标。我需要为这些图标添加一个 javascript 工具提示。

```
<a title="Dashboard" class="simpleTooltip" href="#"> 
```

我在锚标记中使用这个类来实现文本中的工具提示。那么如何在上面提到的图标中使用这个工具提示呢？

CSS 代码

```
.tooltip {
    display:none;
    position:absolute;
    opacity: 0.80;
    font-size:14px;
    width: auto;
    background-color:#000;
    padding:10px;
    color:#fff;
    -webkit-border-radius:2px;
    -moz-border-radius:2px;
    border-radius:2px;
} 
```

Javascript

```
 <script type="text/javascript">
        $(document).ready(function() {
            $('.simpleTooltip').hover(function() {
                var title = $(this).attr('title');
                $(this).data('tipText', title).removeAttr('title');
                $('<p class="tooltip"></p>')
                .text(title)
               .appendTo('body')
               .fadeIn('slow');
            }, function() {
                $(this).attr('title', $(this).data('tipText'));
                $('.tooltip').remove();
            }).mousemove(function(e) {
                var mousex = e.pageX + 2;
                var mousey = e.pageY - 60;
                $('.tooltip')
                .css({ top: mousey, left: mousex })
            });
        });
    </script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T14:09:22.793

一个 HTML 元素可以有两个类。像这样：

```
<a class="openLink simpleTooltip" title="put tooltip text like this"></a>
<a class="newLink simpleTolltip" title="some more tooltip text"></a> 
```

在 JS 代码中，simpleTooltip 仅用作标记类。

当鼠标指针悬停在具有类 simpleTooltip 的元素之一上时，将显示一个工具提示。该代码也不要求 Element 是锚元素。工具提示的文本取自元素的“title”属性。

CSS 代码定义了类“工具提示”，当 Jquery 在悬停时动态显示实际工具提示时使用该类。希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T14:09:33.323

用空格分隔两个类：

```
<div class="linkFunctions">
    <a class="openLink simpleTooltip"></a>
    <a class="newLink simpleTooltip"></a>
    ....
</div> 
```

通常，`class = "a b"`意味着元素同时具有 class`a`和 class `b`。换句话说，如果你有这个：

```
<div class = "class1 class2">Glee is awesome!</div> 
```

然后所有的: `$(".class1")`, `$(".class2")`, 和`$(".class1.class2")`将选择上面的元素。

# python - 使用 Python Dropbox API 的 UnboundLocalError 问题

> ID：12438022
> 
> 赞同：4
> 
> 时间：2012-09-15T14:02:39.027
> 
> 标签：python, dropbox-api

我正在尝试在 python 中创建一个类，该类读取保管箱的访问密钥/秘密，然后下载文件。密钥/秘密部分工作正常，但我似乎在识别客户端对象时遇到问题，可能是由于全局变量与局部变量的问题。我在其他任何地方都找不到我的答案。

这是我的代码的一部分：

```
from dropbox import client, rest, session

class GetFile(object):

    def __init__(self, file1):
        self.auth_user()

    def auth_user(self):
        APP_KEY = 'xxxxxxxxxxxxxx'
        APP_SECRET = 'xxxxxxxxxxxxxx'
        ACCESS_TYPE = 'dropbox'
        TOKENS = 'dropbox_token.txt'

        token_file = open(TOKENS)
        token_key,token_secret = token_file.read().split('|')
        token_file.close()

        sess = session.DropboxSession(APP_KEY,APP_SECRET, ACCESS_TYPE)
        sess.set_token(token_key,token_secret)
        client = client.DropboxClient(sess)

        base, ext = file1.split('.')

        f, metadata = client.get_file_and_metadata(file1)
        out = open('/%s_COPY.%s' %(base, ext), 'w')
        out.write(f.read()) 
```

这是错误：

```
Traceback (most recent call last):
File "access_db.py", line 30, in <module>
start = GetFile(file_name)
File "access_db.py", line 6, in __init__
self.auth_user()
File "access_db.py", line 20, in auth_user
client = client.DropboxClient(sess)
UnboundLocalError: local variable 'client' referenced before assignment 
```

我是 python 的新手，所以如果有其他明显的事情我可能做错了，请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T14:21:56.953

您将`dropbox.client`模块导入到您的模块范围中`client`，但您的方法中*也*有一个局部变量。`client``.auth_user()`

当python在编译时在函数中看到一个赋值（例如`client =`）时，它会将这个名称标记为一个局部变量。此时，您的`client` *模块*导入注定要失败，它不再以该名称在您的函数中可见。

接下来，在 python 的眼中，您正在尝试访问`client`函数中的该局部变量；您正在尝试从中获取属性`DropboxClient`，但此时您尚未为该变量分配*任何*内容`client`。所以`UnboundLocal`抛出异常。

解决方法是要么不用`client`作局部变量，而是导入顶级`dropbox`模块而不是它的子模块，然后使用完整的等路径引用它的子模块`dropbox.client`，或者第三，给`client`模块一个新名称：

1.  不要`client`用作本地：

    ```
    dbclient = client.DropboxClient(sess)
    # ...
    f, metadata = dbclient.get_file_and_metadata(file1) 
    ```

2.  直接导入`dropbox`模块：

    ```
    import dropbox
    # ...

        sess = dropbox.session.DropboxSession(APP_KEY,APP_SECRET, ACCESS_TYPE)
        # ...
        client = dropbox.client.DropboxClient(sess) 
    ```

3.  为`client`模块提供别名：

    ```
    from dropbox import session, rest
    from dropbox import client as dbclient
    # ...

        client = dbclient.DropboxClient(sess) 
    ```

# c# - 如何对列表进行排序 有时相等的条目？

> ID：12438023
> 
> 赞同：2
> 
> 时间：2012-09-15T14:02:42.537
> 
> 标签：c#, wpf, list, sorting

我有一个关于在 C# 中排序的问题。

让我们假设有`List<Person> personList`50 个项目。
每个`Person`都有`string forename, surname`。

现在我想对这个人名单进行排序。
首先，列表应按`Forename`.
因此我会使用这个：
`personList.Sort((p1, p2)=>string.Compare(p1.Forename, p2.Forname, true));`

在此之后，我想`Forname`通过它们对所有具有相同的条目进行排序`Surname`。

我怎样才能做到这一点？

编辑：@Russ Cam：这是一个示例列表。

未分类：

```
David Johnson
William Black
David Smith
Matthew Edwards
Jayden Anderson
Andrew Connor
Adam Johnson
Daniel Armstrong
Steve Anderson
Daniel Black 
```

排序：

```
Adam Johnson
Andrew Connor
Daniel Armstrong
Daniel Black
David Johnson
David Smith
Jayden Anderson
Matthew Edwards
Steve Anderson
William Black 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-15T14:04:26.437

您可以使用 LINQ 的[`OrderBy`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.orderby.aspx)方法来执行此操作

```
var sortedPersonList = personList.OrderBy(p => p.Forename).ThenBy(p => p.Surname); 
```

**编辑：**

这是一个完整的控制台应用程序，用于验证它是否按照您期望的顺序返回结果

```
static void Main()
{
    var personList = new List<Person>{
        new Person("David Johnson"),
        new Person("William Black"),
        new Person("David Smith"),
        new Person("Matthew Edwards"),
        new Person("Jayden Anderson"),
        new Person("Andrew Connor"),
        new Person("Adam Johnson"),
        new Person("Daniel Armstrong"),
        new Person("Steve Anderson"),
        new Person("Daniel Black")  
    };

    var sortedPersonList = personList.OrderBy(p => p.Forename).ThenBy(p => p.Surname);

    foreach (var person in sortedPersonList)
    {
        Console.WriteLine(person);
    }

    Console.Read();
}

public class Person
{
    public Person(string name)
    {
        var names = name.Split(' ');
        Forename = names[0];
        Surname = names[1];
    }

    public string Forename { get; set; }
    public string Surname { get; set; }

public override string ToString()
{
    return Forename + " " + Surname;
}
} 
```

写出

```
Adam Johnson
Andrew Connor
Daniel Armstrong
Daniel Black
David Johnson
David Smith
Jayden Anderson
Matthew Edwards
Steve Anderson
William Black 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T14:10:37.817

这完美地工作

```
personList.Sort((p1, p2)=>string.Compare(p1.Forename+p1.Surname, p2.Forname+ p2.Surname, true)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-15T14:53:47.173

你可以让`Person`实施`System.IComparable<Person>`。

```
public class Person : IComparable<Person>
{
    public string Forename { get; set; }
    public string Surname { get; set; }

    public int CompareTo(Person other)
    {
        int comp = Forename.CompareTo(other.Forename);
        if (comp != 0) {
            return comp;
        }
        return Surname.CompareTo(other.Surname);
    }
} 
```

使用此定义，您可以直接使用

```
personList.Sort(); 
```

* * *

您也可以将 an 传递`IComparer<T>`给该`Sort`方法。这允许您为人员定义不同的排序（按姓名、按年龄、按薪水等）。

```
public class ComparePersonsByName : IComparer<Peron>
{
    public static readonly ComparePersonsByName Instance = 
        new ComparePersonsByName();

    private ComparePersonsByName()
    {
    }

    public int Compare(Person x, Person y)
    {
        int comp = x.Forename.CompareTo(y.Forename);
        if (comp != 0) {
            return comp;
        }
        return x.Surname.CompareTo(y.Surname);
    }
} 
```

现在你可以排序

```
personList.Sort(ComparePersonsByName.Instance); 
```

注意：我在这里使用单例模式的变体。

* * *

您可能必须为`null`现实生活场景中的引用添加测试。

# file - 查找和替换文件中的多行文件内容

> ID：12438025
> 
> 赞同：1
> 
> 时间：2012-09-15T14:02:52.663
> 
> 标签：file, replace, sed, newline, multiline

我想做的是：

```
find some_files -name '*.html' -exec sed -i "s/`cat old`/`cat new`/g" {} \; 
```

*old*和*new*包含换行符和斜杠以及其他特殊字符，这会阻止 sed 正确解析。

*我已阅读有关如何使用 sed 和命令tr*、命令*printf '%q'*转义换行符的信息，但我无法使它们正常工作，可能是因为我不完全了解它们的功能。此外，我不知道我还必须转义哪些特殊字符才能使 sed 正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T16:59:03.513

我不确定你到底想做什么，但如果旧文件包含换行符，你可能会遇到麻烦。这是因为 sed 通过在每一行上应用命令来工作，因此除非您显式加载更多行，否则尝试将一行与表示多行的模式匹配是行不通的。

我的建议是在应用替代命令之前将整个文件加载到 sed 的“缓冲区”中。然后，您必须确保正确转义旧的和新的。此外，更令人困惑的是，旧文件（模式）的转义必须与新文件（替换）不同。

让我们首先将新文件转义为“new.tmp”文件。为清楚起见，我们将创建一个名为“escape_new.sed”的 sed 脚本：

```
#!/bin/sed -f

# Commas used as separators
s,\\,\\\\,g
s,$,\\,g
s,[/&],\\&,g
$ a/ 
```

然后运行它：`sed -f escape_new.sed new > new.tmp`

我们使用三个命令来转义：

1.  反斜杠前面应该有另一个反斜杠
2.  换行符之前应该有一个反斜杠（我们通过在行尾之前添加一个反斜杠来做到这一点）。
3.  & 符号和斜杠前面应该有一个反斜杠（请注意，替换文本中的 & 实际上是一个包含匹配项的运算符，因此如果它与斜杠匹配，则包含斜杠，如果与＆符号匹配，则包含＆符号） .
4.  在最后一行（用“$”符号表示），我们（通过“a”命令）附加一个斜杠。这是我们稍后将使用的替换命令的结束斜线。我们必须把它放在这里，因为反引号将删除输入末尾的任何额外换行符，这可能会导致问题（例如，用于引用换行符的反斜杠实际上引用了终止斜杠）。

现在让我们转义旧文件。如上所述，我们将创建一个“escape_old.sed”脚本。不过，在我们这样做之前，我们需要将整个文件加载到模式空间（sed 的内部缓冲区）中，以便我们可以替换换行符。我们可以使用以下命令来做到这一点：

```
: a
$! {
    N
    b a
} 
```

第一个命令创建一个名为“a”的标签。第二个命令（“{”）实际上启动了一组命令。这里的魔力是“$！” 地址前缀。该前缀告诉它只有在读取的最后一个输入行不是输入的最后一行时才运行命令（“$”表示输入的最后一行，“！”表示不是）。该组中的第一个命令将输入​​中的下一行附加到模式空间中。如果这个“N”命令在最后一行执行，它会终止脚本，所以我们必须小心不要在最后一行执行它。该组中的第二个命令是分支命令“b”，它将“跳转”回“a”标签。神奇的是“$！” 我们在命令之前的地址前缀。右括号关闭组。该组具有各自的地址前缀，允许我们遍历所有行，将它们连接在一起，并在最后一行之后停止，允许执行任何进一步的命令。然后我们有最终的脚本：

```
#!/bin/sed -f

: a
$! {
    N
    b a
}

s,\\,\\\\,g
s,\n,\\n,g
s,[][/^$.],\\&,g 
```

如上所述，我们需要对特殊字符进行转义。在这种情况下，实际的换行符现在被转义为反斜杠，后跟字母 n。在最后一个命令中，还有更多的字符需要以反斜杠作为前缀。请注意，要匹配右方括号，它必须是方括号内的第一个字符，以防止 sed 将其解释为我们要匹配的字符列表的关闭字符。因此，方括号之间按顺序列出的字符是`][/^$.`.

再次，我们执行它：`sed -f escape_new.sed old > old.tmp`

现在我们可以在 sed 命令中使用这些转义文件，但是我们必须再次将所有行加载到模式空间中。使用与以前相同的命令，但将它们放在一行中，我们得到了紧凑的形式: `:a;$!{N;ba}`: 我们现在可以在最终表达式中使用它（没有现在 new.tmp 文件中的右斜杠字符）：

```
find some_files -name '*.html' -exec sed -e ":a;\$!{N;ba};s/`cat old.tmp`/`cat new.tmp`g" -i {} \; 
```

希望它会起作用=)

请注意，我们已经`$`用反斜杠转义了符号，否则 shell 会认为我们正在尝试访问 `$!`变量（执行最后一个异步命令的结果）。

# ruby-on-rails - 在 Rails 中渲染不同的模板

> ID：12438032
> 
> 赞同：0
> 
> 时间：2012-09-15T14:03:26.567
> 
> 标签：ruby-on-rails, templates, rendering, ruby-on-rails-3.2

我有一个看法

```
<%= render :partial => @list.items%> 
```

显示这个命令叫做_item.html.erb。对？

```
<div class="well">
  <%= image_tag item.photo.url(:small) %><br>
  <b>Title</b> <%= item.title %><br />
  <b>Description</b> <%= item.description %>
</div> 
```

这工作正常。现在我有另一个模板，称为`_ilist.html.erb`我需要这些数据的地方。我尝试通过添加模板选项来呈现它。但不会使用其他模板。第一个模板将随时调用。

```
<%= render :partial => @list.items, :template => 'items/ilist' %> 
```

是否有任何选项可以调用另一个 _ilist-template？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T14:52:32.553

我相信你需要：

```
<%= render :partial => 'items/ilist', :collection => @list.items, :as => :item %> 
```

# git - Windows 中的 git 克隆文件在资源管理器中不可见。cygwin中也没有创建文件夹

> ID：12438034
> 
> 赞同：1
> 
> 时间：2012-09-15T14:03:44.620
> 
> 标签：git, windows-7, cygwin, explorer

我无法在资源管理器中查看使用 git 克隆的文件。

有关更多详细信息，请参见下图..这也让我发疯了..

![在此处输入图像描述](../Images/5f8576f68051e4cf895ddef01244420a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T14:05:08.443

`ls`默认情况下不显示隐藏文件和文件夹。尝试`ls -al`

[http://en.wikipedia.org/wiki/Ls](http://en.wikipedia.org/wiki/Ls)

# objective-c - 使用 HessianKit 序列化 JSON 有效负载中的 Base64 字符串（Objective-C/Cocoa）

> ID：12438035
> 
> 赞同：1
> 
> 时间：2012-09-15T14:03:55.820
> 
> 标签：objective-c, grails, base64, hessian

我正在尝试将我的 iOS 应用程序连接到现有的 Grails 后端服务器。后端通过使用 grails 远程处理插件（1.3 版）公开了一个 hessian 网络服务。我的 Android 应用程序成功调用了所有 web 服务方法。

我的目标是将 jpeg 图像从手机传输到服务器（适用于 Android 应用程序）。我的方法是使用 JSONKit 创建一个 JSON 对象，并将图像作为 base64 编码字符串包含在内。我在 XCode 4 项目中使用 HessianKit，ARC 针对 iOS 4.2 和 Nick Lockwood 的 NSData+Base64 类别用于 Base64 编码 (https://github.com/nicklockwood/Base64)。

这是我的代码：

```
NSMutableDictionary *jsonPayload = [NSMutableDictionary dictionary];
[jsonPayload setObject:[theImage base64EncodedString] forKey:@"photo"];
NSString* jsonString = [jsonPayload JSONString];

NSURL* url = server_URL;
id<BasicAPI> proxy = (id<BasicAPI>)[CWHessianConnection proxyWithURL:url protocol:@protocol(BasicAPI)];
[proxy addImage:jsonString]; 
```

问题是服务器在被应用调用时会抛出一个期望：

```
threw exception [Hessian skeleton invocation failed; nested exception is com.caucho.hessian.io.HessianProtocolException: addImage__1: expected string at 0x7b ({)] with root cause
Message: addImage__1: expected string at 0x7b ({)
    Line | Method
->> 1695 | error      in com.caucho.hessian.io.HessianInput
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|   1681 | expect     in     ''
|   1473 | parseChar  in     ''
|    792 | readString in     ''
|    181 | readObject in com.caucho.hessian.io.BasicDeserializer
|   1078 | readObject in com.caucho.hessian.io.HessianInput
|    300 | invoke . . in com.caucho.hessian.server.HessianSkeleton
|    221 | invoke     in     ''
|    886 | runTask .  in java.util.concurrent.ThreadPoolExecutor$Worker
|    908 | run        in     ''
^    680 | run . . .  in java.lang.Thread 
```

我的应用程序中的所有其他 JSON 有效负载（字符串、日期、数字等）都可以由服务器反序列化而没有任何问题，反之亦然，即将 base64 编码图像作为 json 有效负载从服务器作为响应发送到应用程序也有效。

在花了几个小时阅读错误报告和邮件列表之后，我怀疑问题可能是 HessianKit 仅支持 Hessian 1 协议，但远程处理 1.3 附带的 hessian 版本是 4.0.7。4.0.7 可能使用 Hessian 2 协议并且不向后兼容。但这只是猜测。

编辑：实际上，这个问题与 JSON 无关。当我将字符串作为普通字符串（而不是嵌入在 JSON 中）传递给 Web 服务时，也会引发相同的异常。

有人遇到过类似的问题并知道解决方案吗？

# javascript - 如何以不同的方式声明 javascript 变量

> ID：12438037
> 
> 赞同：0
> 
> 时间：2012-09-15T14:04:21.100
> 
> 标签：javascript, jquery, variables

如何以这种方式声明变量：

```
var sarr = $("#crop_vals").find("input");
$(sarr).each(function() { 
    var $(this).attr("id") = $(this).val();
}); 
```

我想要的是让 var 命名为 id 等效于该值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T14:07:43.377

您不能以这种方式设置元素的属性，您将获得一个值。

```
var $sarr = $("#crop_vals").find("input");

$sarr.each(function() { 
    this.id = this.value;
}) 
```

请注意，由于您已经缓存了对象，因此无需`$()`再次使用。

设置属性：

```
$(selector).attr('id', 'newValue'); 
```

获取属性：

```
var id = $(selector).attr('id'); 
```

您还可以使用`attr`回调函数：

```
$sarr.attr('id', function() { 
    return this.value;
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T14:05:37.463

你必须`wrong syntax for assigning value`属性，你需要使用`attr('attributeName', 'value');`

**改变**

```
var $(this).attr("id") = $(this).val(); 
```

**到**

```
$(this).attr("id", $(this).val()); 
```

你的代码将是

```
var sarr=$("#crop_vals").find("input");
$(sarr).each(function(){ 
     $(this).attr("id",$(this).val());
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T14:20:27.140

全局设置“变量”（尽管您不应该这样做，因为它会自找麻烦）

```
var sarr = $("#crop_vals").find("input");
$(sarr).each(function() { 
    window[ this.id ] = this.value;
}); 
```

为了以更安全的方式设置它们，您可以这样做

```
var sarr = $("#crop_vals").find("input"),
    myVars = {};
$(sarr).each(function() { 
    myVars[ this.id ] = this.value;
}); 
```

并使用`myVars[ id ]`.

# android - 填充后重新加载布局

> ID：12438053
> 
> 赞同：0
> 
> 时间：2012-09-15T14:06:24.973
> 
> 标签：android, android-layout, android-fragments, android-button

我有一个片段，我在其中（以编程方式）创建布局和按钮以获得这种视图：

```
<LayoutMaster>
    <Layout1>
        <Button 1>
        <Button 2>
        ...
    </Layout1>
    <Layout2>
        <Button 1>
        <Button 2>
        ...
    </Layout2>
    ...
</LayoutMaster> 
```

我需要我的按钮填满屏幕并且大小相同。因此，当我使用 XML 文件时，我将这些属性添加到布局和按钮中并且它起作用了：

```
android:layout_width="fill_parent"
android:layout_height="fill_parent" 
```

但是当我在我的 java 文件中执行此操作时（所以我不使用 xml 布局），当片段渲染时，我只有一个大按钮占据所有屏幕。所以我猜我必须刷新视图并添加一个 LayoutMaster.invalidate() 但没有奏效。

我在片段的 onCreateView 中执行此操作。

像往常一样，再次感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T17:51:04.507

您设置了错误的属性。您正在使用将一个视图堆叠在另一个视图上的线性布局，然后将按钮的 layout_height 设置为 fill_parent 这就是第一个按钮将占据整个空间的原因。
相反，您应该使用 layout_wight 属性来帮助确定视图将占用多少空间百分比。如果您希望所有视图的大小相同，则对所有视图使用 layout_weight = 1。

```
android:layout_width="fill_parent"
android:layout_height="0dp"
android:layout_weight="1" 
```

您应该将这些属性用于所有需要具有相同大小的视图。

# php - 使用 php 阻止主机名和 IP

> ID：12438058
> 
> 赞同：2
> 
> 时间：2012-09-15T14:07:09.627
> 
> 标签：php, geolocation, geotargetting

我想阻止某些主机名和 ips 访问我的网站，我使用此代码 = 仅阻止一个主机名或 ip：

```
<?php
$hostname = gethostbyaddr($_SERVER['REMOTE_ADDR']);
$ipz = $_SERVER['REMOTE_ADDR'];
if ($hostname === "blocked hostname" || $ipz == "blokced ip" ){
echo "redirect to some url";
}
else {
echo "show site content";
}
?> 
```

但是我有一长串要阻止的主机名和 IP，我想将我拥有的所有错误 IP 和主机名添加到一个单独的文件中，然后检查访问者主机名或 IP 是否在该列表中。我怎样才能做到这一点并保持网站快速加载？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T14:27:01.937

第一种方式，将所有 ip 放在一个文件中，用换行符分隔。然后，您将执行以下操作：

```
$ips = file("ips.txt", FILE_SKIP_EMPTY_LINES | FILE_IGNORE_NEW_LINES);
if (in_array($hostname, $ips) || (in_array($ipz, $ips)) {
  // redirect to some content for banned guyz
  die();
}
// real things 
```

如果您需要有关 file() 标志的更多信息，可以阅读[此](http://php.net/manual/en/function.file.php).

出于安全原因，您可以将“ips.txt”文件放在外部无法访问的文件夹中。

第二种方式，你有一个存储所有 ips 的 sql 表：

```
require_once("config.php");
$dbh = new PDO("mysql:host={$host};dbname={$base}", $user, $password);
$hostname = gethostbyaddr($_SERVER['REMOTE_ADDR']);
$ipz = $_SERVER['REMOTE_ADDR'];
$sth = $dbh->prepare("select count(*) from banned_ips where ip IN (?, ?)");
$sth->execute(array($hostname, $ipz));
$count = $sth->fetchColumn();
if ($count > 0) {
    // do some stuffs with banned user
    die();
}
// do some stuffs with normal users 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-15T14:09:56.400

实际上，我上周刚刚在我的一个网站中实现了这个功能。我有一个带有 IP 列的 MySQL 表和一个原因列，因此用户可以看到他们的 IP 被禁止的原因，以及能够编辑/查看列表的人。

```
$query = 'SELECT * FROM banned_ips';
$result = mysql_query($query);
while ($row = mysql_fetch_array($result)) {
$bannedips = array($row['ip']);
};
$ip=$_SERVER['REMOTE_ADDR'];

if (in_array($ip, $bannedips))
{
header('Location: some url');
}; 
```

# objective-c - ModalViewController 触发太晚了

> ID：12438059
> 
> 赞同：0
> 
> 时间：2012-09-15T14:07:20.960
> 
> 标签：objective-c, modalviewcontroller

我正在打开一个通过 XML 加载更新的 ModelViewController

在 ViewController.m 中

```
LoadUpdatesView *luv = [[LoadUpdatesView alloc]  initWithNibName:@"LoadUpdatesView" bundle:nil];
luv.modalPresentationStyle = UIModalPresentationFormSheet;
[self presentModalViewController:luv animated:YES]; 
```

在 LoadUpdatesView.m

```
- (void)viewDidLoad {
  [self xmlloadUpdates];
} 
```

xmlloadUpdates

```
- (void) xmlloadUpdates {

   statusmessage.text = @"Start loading Updates"; 
    NSString * path = @"xxx.xml";
    [self parseXMLFileAtURL:path];

    for(int iX = 0; iX < [stories count]; iX++) {   
        statusmessage.text = @"Loading %@ of %@ entries",iX,[stories count];
    }

} 
```

但是，模式窗口仅在 xmlloadUpdates 完成通过 xml 加载更新后显示。但是我想先显示模态窗口，然后开始做 XML 的东西（xmlloadupdates 在模态窗口上显示状态消息）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T14:11:48.753

尝试线程。在此处阅读并发编程指南：调度队列：http: [//developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationQueues/OperationQueues.html](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationQueues/OperationQueues.html)

# git - 如何在 Git 中更改 $HOME 目录

> ID：12438064
> 
> 赞同：2
> 
> 时间：2012-09-15T14:07:54.380
> 
> 标签：git, unix, osx-lion, home-directory

我想知道，因为我一直在寻找如何做到这一点，至少在这个社区中。想知道如何在 Git 中更改 Mac OS X Lion 中的 $HOME 目录。

换句话说，我如何才能让我的全局用户设置保存在 git 之类的文件夹中，而不是在主用户文件夹中？还是已经这样了？我基本上想为我在 Git 中使用的所有文件和东西保留一个集中的位置（例如，一个*.gitmessage.txt*文件，如果我没记错的话，它不应该被隐藏，因为它是一个 TXT 文件）。

如果您需要更多信息，请随时询问。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T15:00:53.500

阅读[git config](http://www.kernel.org/pub/software/scm/git/docs/git-config.html)手册，它说的是`GIT_CONFIG`环境变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-26T17:28:53.790

如果您想使用替代`.gitconfig`文件，您只能通过更改`$HOME`当前 shell 及其子 shell 的变量来实现。

与其他回复所表明的相反 - Git 将始终读取位于的文件`$HOME/.gitconfig`- 无论您如何设置`GIT_CONFIG`。

该文档自 2011 年以来一直不正确，并且仍然不正确，`GIT_CONFIG`因此被忽略。

更多关于它为什么被忽略的细节可以在这个[git 邮件列表线程](http://git.661346.n2.nabble.com/Overriding-gitconfig-using-GIT-CONFIG-td6680977.html)中找到。

*可以*通过重新定义变量来更改主目录的位置`HOME`，您可以使用以下 (Bash) 片段来实现：

```
export HOME=<directory containing your alternate .gitconfig file) 
```

这样做不会完全无痛，各种事情都会搞砸，比如shell初始化文件、编辑器配置和历史文件、shell历史文件等等。

如果您可以应对上述限制，那可能是一个可以接受的解决方案。

截至 2016 年 9 月 29 日 - Junio C Hamano（Git 维护者）[提交了一个补丁](http://www.spinics.net/lists/git/msg287241.html)`/etc/gitconfig`，该补丁将允许通过一个新变量覆盖全局文件： `GIT_CONFIG_SYSTEM_PATH`- 此补丁尚未集成到 git 版本中，预计它将进入主流 Linux 发行版如果被接受，大约在 2018/2019 年左右。

我发现在 docker 容器中构建软件并提供`.gitconfig`文件是一种运行良好的方法（在没有更好的解决方案的情况下），但这可能不符合每个人的口味，并且可能比必要的复杂。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-20T21:26:44.847

好的，这就是我如何做到这一点......这很简单。

**首先，**在 git 首次加载时 键入**“cd ~” （这会将您带到根目录）**

**其次，** 键入**“cd path/path/path”**（您想要作为主目录的目录的路径）

**第三，** 一旦你在你想要的目录中......
输入**“alias home="path/path/path"**（你想要的目录）

现在，每次 Git 加载时，您所要做的就是输入“ **home** ”，因为这是别名“ **home** ”，它将输入您想要使用的目录的路径。您必须记住在 Git 首次加载时键入“cd ~”以将您带到根目录...然后此别名将起作用，否则它将无法识别来自另一个目录的路径。

无论代码问题是否存在，这是最简单且最可靠的方法。只需创建别名，然后在 Git 加载时“cd ~”以确保您位于根目录中。每次 Git 加载时，您将输入“cd ~”，然后输入“home”。这是我发现的最简单的方法......希望有帮助。

如果您要在多个目录中工作，这也很好，因为您可以为每个路径/路径/路径/路径创建不同的别名，这样可以节省时间，您只需要“cd ~ " 进入根目录，然后键入您选择的别名。

# bash - 使用 bash 读取数据，“for i in”结合 while

> ID：12438067
> 
> 赞同：1
> 
> 时间：2012-09-15T14:08:25.813
> 
> 标签：bash

我有以下挑战。我正在尝试使用 WebIF 从 Datalogger 读取一些数据，该脚本基本上按预期运行。但我想使用 while 循环添加检查。现在我被困在“for i in & while”组合中......

```
 #!/bin/bash
    PASSWD=blah
    OUTFILE=$(date +%d).csv
    OUTPATH=$(date +%Y/%m/)
    LOGPATH="./test/log/"
    BASEPATH="./test/"
    DEVICENAME=wc-s0
    NETWORK=somewhere.lan
    CURLPARA="-silent --connect-timeout 5"
    TRYS=3

    for i in {0..5};
    do
        TIME="$(date +"%Y-%m-%d %H:%M:%S")";
        while [[ $TRYS -ne 0 ]] ; do
             VALUE=$(curl $CURLPARA "http://"$DEVICENAME"."$NETWORK"/counter?PW="$PASSWD"&"|grep counter|cut -sd ";" -f $(( i+2 ))|sed 's#kWh##g'|sed 's#kVARh##g'|sed 's#,#.#g');
        rc=$?
        if [[ $rc -eq 0 ]] ; then
            TRYS=1
        fi
        ((TRYS = TRYS - 1))
        done

        if [[ $rc -eq 0 ]] ; then
        echo "Read $DEVICENAME input"$i"."
        else
        echo "Timeout while reading $DEVICENAME input"$i"."
        fi
        echo "$VALUE"
        echo -n "$DEVICENAME input"$i"; "
        echo "$TIME; "
done 
```

输出如下：

```
Read wc-s0 input0\. 
wc-s0 input0; 2012-09-15 16:58:34;  
Read wc-s0 input1\. 
wc-s0 input1; 2012-09-15 16:58:38;
Read wc-s0 input2\. 
wc-s0 input2; 2012-09-15 16:58:38;
Read wc-s0 input3.
wc-s0 input3; 2012-09-15 16:58:38;
Read wc-s0 input4.
wc-s0 input4; 2012-09-15 16:58:38;
Read wc-s0 input5.
wc-s0 input5; 2012-09-15 16:58:38; 
```

“0.560”是一个 $VALUE 但我希望它是这样的：

```
Read wc-s0 input0.
wc-s0 input0; 2012-09-15 15:58:36; 0.560  
Read wc-s0 input1.
wc-s0 input1; 2012-09-15 15:58:37; "$VALUE2" 
```

但我不能让它以这种方式打印数据......

希望你们中的一个有提示！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T14:16:24.003

尝试以这种方式回显该行：

```
 echo "$DEVICENAME input"$i"; $TIME; $VALUE" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T14:23:06.397

嗯。没有测试自己，只是在眼睛上

1) 您可以在大括号中使用语法 {1..100} 或 {m...q} 代替 seq，而无需外部引号，尤其是 FOR 循环。我刚试过， seq 每一步输出都会生成换行符。

2) 始终将 () 与 "if" 放在一起

3) TRYS 变量用于什么？无论如何，在检查表达式中使用它，始终使用引号，因为如果由于某种原因 TRYS 值将为空，这将生成错误的表达式，因此 [[ "$TRYS" -ne 0 ]] 比 [[ $TRYS -ne 0 ]]

4) 在我看来，curl 调用会生成数字输出之间的换行符，或者在 VALUE 内容中添加换行符，我不会感到惊讶。考虑使用 2>&1 或 2>/dev/null 等流重定向，或从 curl 输出中清除非字母数字字符

5）关于换行符，而不是重复回声，尝试类似 echo -en "aaa\nbbb\n"

6) 对于 bash 中的递增/递减变量，请尝试 $((TRYS++)) 或 $((--TRYS)) 语法

让我知道它是否有帮助:)

```
dtpwmbp:~ pwadas$ seq 0 5
0
1
2
3
4
5
dtpwmbp:~ pwadas$ for i in {0..5} ; do echo -n $i; done ; echo
012345
dtpwmbp:~ pwadas$ for i in {0..5} ; do echo -n "$i "; done ; echo ;
0 1 2 3 4 5 
dtpwmbp:~ pwadas$ echo {1..10}
1 2 3 4 5 6 7 8 9 10
dtpwmbp:~ pwadas$ 
```

# assembly - 将寄存器值发送到 RAM 汇编语言

> ID：12438068
> 
> 赞同：1
> 
> 时间：2012-09-15T14:08:32.113
> 
> 标签：assembly, dos, interrupt

我正在制作一个 DOS 图片查看器。对于下一部分，我必须对其进行设置，以便它找到每个像素的值，然后将其发送到我`AH=40 INT 21`用来将其发送到文件的文件，但数据必须在程序中，但我`AH=0D INT 10`用来查找像素的颜色并将其保存在寄存器中。我需要使文件中的一个字节成为寄存器的值。我可能需要做一些类似数据库“reister value”的事情。换句话说，我需要将地址 0250 设为 AL 的值，或者将寄存器值发送到 RAM。我在 'AH=0 AL=13 INT 10' 64000 像素 256 色中运行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T02:05:19.087

无需处理任何内容，hb800 是基于文本的模式 0 - 屏幕 0 的位置。它是二进制的，因此您只需引用它来加载您需要的地方。

# java - 如何获得等效的本地化数字字符串？

> ID：12438069
> 
> 赞同：0
> 
> 时间：2012-09-15T14:08:36.780
> 
> 标签：java, android, text, locale

我正在尝试将数字转换为本地化的等效字符串（对于 android 应用程序）。

例如，如果语言环境是，我想转换`25`为.`twenty five``US`

如果语言环境是`FR`我想`237`转换成`deux cent trente sept`.

我在 Android 文档中搜索了很多，但没有找到任何东西。（[语言环境](http://developer.android.com/reference/java/util/Locale.html)，[TextUtils](https://developer.android.com/reference/android/text/TextUtils.html)，...）

我还查看了其他库，例如 Apache Commons [LocaleUtils](http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/LocaleUtils.html)，但没有成功。

我想知道这样的图书馆是否存在。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T14:12:32.723

我认为您在这里将本地化与*翻译*混为一谈。Java 中的语言环境通常用于格式化。

你可以看看[google-api-translate-java](http://code.google.com/p/google-api-translate-java/)。

# mysql - SQL 结果的顺序不同

> ID：12438070
> 
> 赞同：0
> 
> 时间：2012-09-15T14:08:52.910
> 
> 标签：mysql, sql

我有一个 sql 命令是：

```
SELECT * 
FROM  `tattoos` 
ORDER BY id DESC
LIMIT 176 ,5 
```

我想订购结果 asc。

所以起初我得到

```
176 177 178 179 180 
```

但我希望它是

```
180 179 178 176 175 
```

我不希望所有结果都以不同的顺序排列，所以

```
SELECT * 
FROM  `tattoos` 
ORDER BY id ASC
LIMIT 176 ,5 
```

将不起作用，因为我将从查询中获得其他结果。

我已经试过了

```
SELECT * 
FROM  `tattoos` 
ORDER BY id DESC, id asc
LIMIT 176 , 8 
```

但这不会改变我的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T14:13:52.243

```
SELECT * FROM (
 SELECT * 
 FROM  `tattoos` 
 ORDER BY id ASC
 LIMIT 176 ,5
) AS t
ORDER BY id DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T14:13:55.877

尝试：

```
SELECT * FROM (
   SELECT * 
   FROM  `tattoos` 
   LIMIT 176 ,5
   ORDER BY id
) 
ORDER BY id DESC 
```

# android - 为 Android 平台构建最新的夜间 webkit 版本

> ID：12438071
> 
> 赞同：3
> 
> 时间：2012-09-15T14:08:57.680
> 
> 标签：android, webkit

我们正在开发一个 Android 应用程序，它需要最新的 webkit 中的一些新功能。

由于大多数安卓手机仍然有旧的 webkit 版本，我们想在我们的应用程序中捆绑最新的每晚 webkit 版本。

但是我们找不到适用于 android 平台的 webkit nightly 版本。看来我们必须从夜间 webkit 源代码构建。

如果您知道我们可以在哪里下载适用于 Android 平台的 nightly webkit 构建，请告诉我们。或者，如果您知道如何从每晚发布的源代码构建它，请指出正确的方向。谢谢！！

# ios - ios模拟器代理设置

> ID：12438075
> 
> 赞同：3
> 
> 时间：2012-09-15T14:09:43.933
> 
> 标签：ios, proxy, settings, simulator

我正在编写使用google api的代码，因此通过应用程序我可以通过google api搜索一些单词，不幸的是，由于以下错误，ios代理模拟器总是阻止我完成该任务：

> 无法验证凭据

当我在 Mac 上使用 safari 时，我可以访问互联网，当我在 ios 模拟器本身上使用 safari 时，我也可以访问互联网，但我无法从代码本身访问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-02T10:20:27.353

无法使用需要通过 iOS 模拟器进行身份验证的代理服务器。

# qt - 无法为“QModelIndex”获取“QWidget* 编辑器”

> ID：12438077
> 
> 赞同：0
> 
> 时间：2012-09-15T14:09:57.180
> 
> 标签：qt, qt4, qtableview, model-view

我无法增加[`QTableView`](http://qt-project.org/doc/qt-4.8/qtableview.html). 当按下 Enter 键时，我想要以下行为：

1.  如果尚未编辑当前单元格，则开始编辑当前单元格。
2.  如果正在编辑单元格，
    *   2a。提交数据并关闭编辑器。然后，
    *   2b。使下面的单元格（如果存在）成为当前单元格。

2a 是默认行为，而 2b 很可能通过[`QAbstractItemView::setCurrentIndex()`](http://qt-project.org/doc/qt-4.8/qabstractitemview.html#setCurrentIndex)在重新实现中使用来实现（[如此](http://qt-project.org/faq/answer/how_can_i_make_the_focus_go_from_one_cell_to_the_next_when_hitting_enter)处在类似上下文[`QItemDelegate::eventFilter()`](http://qt-project.org/doc/qt-4.8/qitemdelegate.html#eventFilter)中建议的那样）。

问题在于实现1。我在下面列出了我迄今为止尝试过的方法。

*   **重新配置“平台编辑键”**默认情况下，“当平台编辑键在项目上按下时开始编辑。” ( [`QAbstractItemView::EditKeyPressed`](http://qt-project.org/doc/qt-4.8/qabstractitemview.html#EditTrigger-enum)) 这个键在我的平台（Ubuntu 12.04）上是 F2。我可以将平台编辑键重新配置为 Enter 但是
    *   更改平台默认设置似乎是个坏主意。
    *   我不知道该怎么做。
*   **捕获我用来执行此操作**的 Enter 键**[`QShortCut`](http://qt-project.org/doc/qt-4.8/qshortcut.html)，如下所示：**

     **```
    class CourseTable : public QTableView {
    /* ... */
    };
    /* ... */
    CourseTable::CourseTable(/* ... */) {
      /* ... */
      QShortcut* shortcut = new QShortcut(QKeySequence(Qt::Key_Return), this);
      connect(shortcut, SIGNAL(activated()), this, SLOT(handleEnter_()));
      /* ... */
    }
    /* ... */
    void CourseTable::handleEnter_() {
      QModelIndex idx = this->currentIndex();
      if (this->state() != QAbstractItemView::EditingState)
        this->edit(idx);
      /* else  // see below */
    } 
    ```

    这确实捕获了 Enter 按键并完成 1（从上方），但现在 2 已损坏。所以，我需要查看上面的`else`子句，`CourseTable::handleEnter_()`可能会调用它。问题是这两个函数都需要一个我无法弄清楚如何获得的参数。我可以子类化，向派生类添加方法，并修改现有代码以将派生委托类的实例传递给函数。但这听起来工作量太大了。[`QAbstractItemView::commitData()`](http://qt-project.org/doc/qt-4.8/qabstractitemview.html#commitData)[`QAbstractItemView::closeEditor`](http://qt-project.org/doc/qt-4.8/qabstractitemview.html#closeEditor)`QWidget *editor`[`QAbstractItemDelegate`](http://qt-project.org/doc/qt-4.8/qabstractitemdelegate.html)`getEditor()``CourseTable::setItemDelegate*()`** 

 **那么，有什么想法可以在不重写代码的情况下干净地完成 1 和 2 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T15:35:14.103

为什么你不能只过滤事件来开始编辑？

如果状态为 != QAbstractItemView::EditingState 则处理事件

在此函数中返回 true 会使事件停止传播到过滤的对象。

如果状态是 Editing 你可以只返回 false 并允许表和编辑器继续处理事件。

像这样的东西：

```
 bool FilterObject::eventFilter(QObject *object, QEvent *event)
 {
   if (object == tableView && event->type() == QEvent::KeyPress) {
       QKeyEvent *keyEvent = static_cast<QKeyEvent *>(event);
       if (keyEvent->key() == Qt::Key_Return && tableView->state() != QAbstractItemView::EditingState) {
           // set current cell to edit
         return true;
       } else
         return false;
   }
   return false;
 } 
```**

# c#-4.0 - 大查询查询统计

> ID：12438083
> 
> 赞同：1
> 
> 时间：2012-09-15T14:11:41.647
> 
> 标签：c#-4.0, google-bigquery

如何使用 C# 在 Bigquery 中获取查询统计信息，例如执行时间和其他参数。

```
 QueryRequest _r = new QueryRequest();
            _r.Query = "SELECT Id, Name FROM [Sample.Test] LIMIT 1000";
            QueryResponse _qr = _service.Jobs.Query(_r, "samplequery").Fetch();

            List<string> _fieldNames = _qr.Schema.Fields.ToList().Select(x => x.Name).ToList() ;

            List<Google.Apis.Bigquery.v2.Data.TableRow> _rows = _qr.Rows.ToList(); 
```

有 JobStatistics 类，但我没有从上面的查询执行中获取作业统计信息。否则，如果有任何其他方法可以获取统计信息，请提出建议。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T14:39:59.547

我得到了它。

```
 Job _j = _service.Jobs.Get(_qr.JobReference.ProjectId, _qr.JobReference.JobId).Fetch();

            JobStatistics _js = _j.Statistics;

            this.StartTime =  _js.StartTime;
            this.EndTime = _js.EndTime;
            this.BytesProcessed = _js.TotalBytesProcessed; 
```

# java - 在 NetBeans 中看不到包 javax.sound.sampled

> ID：12438085
> 
> 赞同：0
> 
> 时间：2012-09-15T14:12:12.890
> 
> 标签：java, audio, netbeans, package

我是Java新手。我正在使用 NetBeans IDE 编辑和编译测试应用程序。一切看起来都不错，但我无法在我的应用程序中添加和编译包 javax.sound.sampled。NetBeans 强调它并写下“包 javax.sound.sampled 不存在”。

我已经安装了最新版本的 JDK (v.1.6_35)，但没有任何反应。我还读到 javax.sound.sampled 嵌入到 JDK 中，因此它不需要下载任何插件，但我什至无法在已安装的 JDK 包中找到任何文件，如“javax”（我的意思是 C:/Program Files/ Java 文件夹）。

我做错了什么？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T15:53:37.227

在您的代码中替换

```
import javax.sound.sampled; 
```

至

```
import javax.sound.sampled.*; 
```

# javascript - 动画这个标志

> ID：12438089
> 
> 赞同：0
> 
> 时间：2012-09-15T14:12:38.083
> 
> 标签：javascript, html, animation, svg

我想为这个标志制作动画。需要做的就是让线条平稳地移动到不同的位置。我有一个 SVG 版本的徽标。最简单的方法是什么？分别编辑每一帧，然后将它们制作成动画 GIF 需要太长时间，使动画不连贯，并且太大而无法加载。

我不想使用 Flash 等已弃用的技术。

最好的方法是什么？

这是我想要实现的未完成版本；[http://heuvel-folie-serres.com/v2/img/logo_moving.gif](http://heuvel-folie-serres.com/v2/img/logo_moving.gif)

* * *

巴布亚新几内亚；[http://heuvel-folie-serres.com/v2/img/logo.png](http://heuvel-folie-serres.com/v2/img/logo.png)
SVG；[http://heuvel-folie-serres.com/v2/img/logo.svg](http://heuvel-folie-serres.com/v2/img/logo.svg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T02:56:31.117

没有简单的方法可以按原样为 SVG 设置动画。这是一条复合路径，找到正确的节点不仅麻烦而且制作动画也很昂贵。

您需要修改原始 SVG 以删除您打算制作动画的线条，然后您可以添加线条，例如...

```
 <line x1="23" y1="32" x2="40" y2="32" class="animated" />
 <line x1="93" y1="32" x2="75" y2="32" class="animated" />
 <line x1="125" y1="32" x2="143" y2="32" class="animated" />
 <line x1="195" y1="32" x2="177" y2="32" class="animated" /> 
```

你可以使用动画，`SMIL`但不幸的是 IE9 不支持它，所以这里有一个非常幼稚的动画实现：

```
var lines = document.getElementsByClassName('animated');
var y = parseInt(lines[0].getAttribute("y2"));
var increment = .1;
var moveLines = function(){

    if (y < 32) increment = .1
    if (y > 41.5) increment = -.1
    y+=increment;
    lines[0].setAttribute('y1', y)
    lines[1].setAttribute('y1', y)
    lines[2].setAttribute('y1', y)
    lines[3].setAttribute('y1', y)
}

var t = window.setInterval(moveLines, 30); 
```

将使用更强大的解决方案`requestAnimationFrame`，它可以轻松添加缓动功能，并且在当前选项卡未处于活动状态时不会消耗资源。

这是一个演示（您必须删除矢量编辑软件中的现有线条）。 [http://jsfiddle.net/6WPEb/](http://jsfiddle.net/6WPEb/)

​</p>

# regex - 将 24 小时格式的时间与正则表达式匹配

> ID：12438092
> 
> 赞同：4
> 
> 时间：2012-09-15T14:12:43.053
> 
> 标签：regex

我正在尝试使用 egrep 将 24 小时时间与正则表达式匹配。

这是我的测试文件 test.txt：

```
32:23:31
24:30:31
23:70:31
23:61:31
23:10:70
23:10:61
22:17:16
01:17:15
24:15:22
0:17:16
00:17:17
24:30:31 
```

这是我的正则表达式：

```
egrep '(2[0-3]|1[0-9]|0[0-9]|[^0-9][0-9]):([0-5][0-9]|[0-9]):([0-5][0-9]|[0-9])' test.txt 
```

结果匹配：

```
23:10:70
23:10:61
22:17:16
01:17:15
00:17:17 
```

知道为什么它匹配 23:10:70 和 23:10:61 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T14:16:13.150

它实际上*匹配* `23:10:7`and `23:10:6`，但由于您没有在字符串*末尾使用行尾*元字符`$`，因此它将处理后面的*任何*内容。

```
egrep '^(2[0-3]|1[0-9]|0[0-9]|[^0-9][0-9]):([0-5][0-9]|[0-9]):([0-5][0-9]|[0-9])$' test.txt 
```

换句话说，您应该只允许`[0-9]`在字符串的末尾，如果匹配的数字是该行的最后一位，也就是说，如果它后面跟着`$`.

另一种选择是，如果最后一个数字小于 10，则强制用 0 填充，即，而不是`[0-9]`use `0[0-9]`。这将匹配`23:10:07`，但不是`23:10:7`。这与你已经拥有的小时部分相同。

# javascript - 显示位于文件夹中的文件并将它们显示在下拉列表中，以便使用 javascript html 进行选择以用于 Metro 应用程序

> ID：12438093
> 
> 赞同：2
> 
> 时间：2012-09-15T14:12:57.973
> 
> 标签：javascript, html, microsoft-metro, windows-runtime

我正在尝试创建一个下拉选择，它将显示文件夹中的文件以供选择。我正在 Windows 8 中使用 javascript 和 html 为 Metro 应用程序开发它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T00:28:13.450

是的，我想列出目录中的文件并使用 javascript 和 html 在下拉列表中显示它们。Windows 8 应用程序

# hibernate - 继承和 JPA2/Hibernate 的数据库建模问题

> ID：12438094
> 
> 赞同：0
> 
> 时间：2012-09-15T14:13:09.450
> 
> 标签：hibernate, database-design, inheritance, jpa, spring-roo

我使用 JPA/Hibernate、MySQL 和 Spring Roo，并且正在对一个具有两种不同类型成员的应用程序进行建模：

*   男性成员
*   女性成员

截至目前，我为男性和女性成员提供了一张桌子/实体。

但是，我现在意识到根据成员是男性还是女性，某些字段/属性会有所不同。

例如，我可以为男性设置一个“**胡须风格**”属性，该属性将包含以下可能的值：“*修剪*、*长*、*剃*”。

我想到了几个选项来在我的域模型中表示这一点：

1.  寻求某种 JPA 继承。但是，我不确定选择哪种策略以及 Hibernate 支持哪种策略。
2.  在我的成员表/实体中有两个字段 maleSpecificInfo 和 femaleSpecificInfo。如果成员是女性，则 maleSpecificInfo 将为空，反之亦然。

任何人都可以就我的哪些选项（如果有的话）可以接受提供建议。还是提供更好的选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T16:18:35.713

我不喜欢第二种方法。一个男性对象可能包含与 FemaleSpecificInfo 的关系，这对我来说很难闻。我不认为“组合继承”的实现是正确的。

我会尝试休眠继承。你应该检查[策略](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/inheritance.html)。如果男性和女性共享大部分数据，我会使用*Table per class hierarchy*。

# qt - Qt 垂直滚动条样式表

> ID：12438095
> 
> 赞同：7
> 
> 时间：2012-09-15T14:13:12.467
> 
> 标签：qt

![您能否给我样式滚动条的代码片段，如附图所示。]](../Images/daac0b7778ea52657127a22c301e2399.png)

您能否给我样式滚动条的代码片段，如附图中所示，谢谢

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-09-28T11:43:42.280

```
setStyleSheet(QString::fromUtf8("QScrollBar:vertical {"              
    "    border: 1px solid #999999;"
    "    background:white;"
    "    width:10px;    "
    "    margin: 0px 0px 0px 0px;"
    "}"
    "QScrollBar::handle:vertical {"
    "    background: qlineargradient(x1:0, y1:0, x2:1, y2:0,"
    "    stop: 0 rgb(32, 47, 130), stop: 0.5 rgb(32, 47, 130), stop:1 rgb(32, 47, 130));"
    "    min-height: 0px;"
    "}"
    "QScrollBar::add-line:vertical {"
    "    background: qlineargradient(x1:0, y1:0, x2:1, y2:0,"
    "    stop: 0 rgb(32, 47, 130), stop: 0.5 rgb(32, 47, 130),  stop:1 rgb(32, 47, 130));"
    "    height: 0px;"
    "    subcontrol-position: bottom;"
    "    subcontrol-origin: margin;"
    "}"
    "QScrollBar::sub-line:vertical {"
    "    background: qlineargradient(x1:0, y1:0, x2:1, y2:0,"
    "    stop: 0  rgb(32, 47, 130), stop: 0.5 rgb(32, 47, 130),  stop:1 rgb(32, 47, 130));"
    "    height: 0 px;"
    "    subcontrol-position: top;"
    "    subcontrol-origin: margin;"
    "}"
    )); 
```

# ruby-on-rails-3 - 做 gem rdoc railties --ri 的警告

> ID：12438097
> 
> 赞同：0
> 
> 时间：2012-09-15T14:13:23.147
> 
> 标签：ruby-on-rails-3, rubygems

我安装了 Rails 3.2.8， gem update --system 说的是最新的 ruby​​ gem，在 Mac 上运行 ruby​​ 1.9.3-p194。

当我做

```
gem rdoc railties --ri --overwrite 
```

我收到很多警告。（ --overwrite 没有区别）。我发现各种各样的人在抱怨，但没有解决办法。

通过 sort -u 传递错误，唯一的行是：

```
Gem::SourceIndex#add_spec called from /usr/local/prvm/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/source_index.rb:127.
Gem::SourceIndex#initialize called from /usr/local/prvm/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/source_index.rb:67.
Gem::SourceIndex#load_gems_in called from /usr/local/prvm/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/source_index.rb:322.
Gem::SourceIndex#refresh! called from /usr/local/prvm/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/source_index.rb:95.
Gem::SourceIndex#search called from /usr/local/prvm/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/commands/rdoc_command.rb:64.
Gem::SourceIndex#spec_dirs= called from /usr/local/prvm/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/source_index.rb:94.
Gem::SourceIndex.from_gems_in called from /usr/local/prvm/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/source_index.rb:47.
Gem::SourceIndex.from_installed_gems called from /usr/local/prvm/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/commands/rdoc_command.rb:64.
Gem::SourceIndex.installed_spec_directories called from /usr/local/prvm/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/source_index.rb:47.
NOTE: Gem::SourceIndex#add_spec is deprecated, use Specification.add_spec. It will be removed on or after 2011-11-01.
NOTE: Gem::SourceIndex#initialize is deprecated with no replacement. It will be removed on or after 2011-11-01.
NOTE: Gem::SourceIndex#load_gems_in is deprecated with no replacement. It will be removed on or after 2011-11-01.
NOTE: Gem::SourceIndex#refresh! is deprecated with no replacement. It will be removed on or after 2011-11-01.
NOTE: Gem::SourceIndex#search is deprecated with no replacement. It will be removed on or after 2011-11-01.
NOTE: Gem::SourceIndex#spec_dirs= is deprecated, use Specification.dirs=. It will be removed on or after 2011-11-01.
NOTE: Gem::SourceIndex.from_gems_in is deprecated with no replacement. It will be removed on or after 2011-10-01.
NOTE: Gem::SourceIndex.from_installed_gems is deprecated with no replacement. It will be removed on or after 2011-10-01.
NOTE: Gem::SourceIndex.installed_spec_directories is deprecated, use Specification.dirs. It will be removed on or after 2011-11-01. 
```

这是我的宝石清单：

```
*** LOCAL GEMS ***

actionmailer (3.2.8)
actionpack (3.2.8)
activemodel (3.2.8)
activerecord (3.2.8)
activerecord_constraints (0.1.1)
activeresource (3.2.8)
activesupport (3.2.8)
arel (3.0.2)
bigdecimal (1.1.0)
builder (3.0.3)
bundler (1.1.3)
capistrano (2.13.3)
coffee-rails (3.2.2)
coffee-script (2.2.0)
coffee-script-source (1.3.3)
daemons (1.1.8)
dalli (2.2.1)
erubis (2.7.0)
eventmachine (0.12.10)
execjs (1.4.0)
highline (1.6.14)
hike (1.2.1)
i18n (0.6.1)
io-console (0.3)
journey (1.0.4)
jquery-rails (2.1.2)
jquery-ui-rails (2.0.0)
jruby-pageant (1.0.2)
json (1.7.5)
mail (2.4.4)
mime-types (1.19)
minitest (2.5.1)
multi_json (1.3.6)
net-scp (1.0.4)
net-sftp (2.0.5)
net-ssh (2.5.2)
net-ssh-gateway (1.1.0)
pg (0.14.1)
polyglot (0.3.3)
rack (1.4.1)
rack-cache (1.2)
rack-ssl (1.3.2)
rack-test (0.6.1)
rails (3.2.8)
rails-footnotes (3.7.8)
railties (3.2.8)
rake (0.9.2.2)
rdoc (3.12)
rubygems-update (1.8.24)
sass (3.1.19)
sass-rails (3.2.5)
sprockets (2.1.3)
sqlite3 (1.3.6)
thin (1.4.1)
thor (0.16.0)
tilt (1.3.3)
treetop (1.4.10)
tzinfo (0.3.33)
uglifier (1.2.5) 
```

“ick”是“ri Rails::Engine”，实际上它有大量非常漂亮的文档时不会产生任何输出。我经常在我的 Mac 上遇到这个问题，并希望在我的 Mac 上获得一整套文档。

命令可能是一个单独的问题

```
gem rdoc bigdecimal --ri 
```

产生相同的警告，但以：

```
ERROR:  While executing gem ... (Errno::ENOENT)
    No such file or directory - /usr/local/prvm/ruby-1.9.3-p194/lib/ruby/gems/1.9.1/gems/bigdecimal-1.1.0 
```

这是 railties 或 ruby​​gems 或我的本地设置的问题吗？

有什么办法绕过它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T16:07:38.293

如果出现错误，RubyGems 会明确说明并以非零错误代码退出。正如您所注意到的，对于第一种情况，您只会看到警告。

这些警告已在 RubyGems 中修复，但将修复移植到 RubyGems 1.8 并不容易。

对于第二种情况，我们的目标是使用 Ruby 2.0 中的“默认 gems”特性来解决这个问题。bigdecimal 文档作为 ruby​​ 的一部分提供，因此无需重新生成它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T13:47:00.630

这个问题措辞非常糟糕。我错误地将警告与“gem rdoc railties”没有生成内部文档的事实相关联。我终于找到了那个特定的问题。出于某种原因，gem 规范排除了所有文件。只需删除该行，您就会获得良好的文档。

```
diff -c /tmp/railties-3.2.8.gemspec ./railties-3.2.8.gemspec 
*** /tmp/railties-3.2.8.gemspec 2012-09-19 08:40:57.000000000 -0500
--- ./railties-3.2.8.gemspec    2012-09-19 08:39:32.000000000 -0500
***************
*** 12,18 ****
s.executables = ["rails"]
s.files = ["bin/rails"]
s.homepage = "http://www.rubyonrails.org"
!   s.rdoc_options = ["--exclude", "."]
s.require_paths = ["lib"]
s.required_ruby_version = Gem::Requirement.new(">= 1.8.7")
s.rubygems_version = "1.8.24"
--- 12,18 ----
s.executables = ["rails"]
s.files = ["bin/rails"]
s.homepage = "http://www.rubyonrails.org"
!   # s.rdoc_options = ["--exclude", "."]
s.require_paths = ["lib"]
s.required_ruby_version = Gem::Requirement.new(">= 1.8.7")
s.rubygems_version = "1.8.24" 
```

# c# - AddObject 之后的实体框架查询

> ID：12438098
> 
> 赞同：0
> 
> 时间：2012-09-15T14:13:33.633
> 
> 标签：c#, orm, entity-framework-4

上周我有一个错误，我试图重新创建。一段现有代码在数据库上进行了大规模插入。虽然，一个值不允许在数据库中重复旧代码在每个 AddObject 之后使用 SaveChanges 将更改持久化到数据库中。这表现得不是很好。因此，不是每次我在每 1000 条记录后保存它时都保存它（并在事务中执行此操作，但这与此示例无关）。

下面的代码概述了我所做的事情。

```
 TestEntities test = new TestEntities();

        for (int i = 0; i < 10; i++)
        {
            for (int j = 0; j < 10; j++)
            {
                string q = j.ToString();
                if (!test.warehouses.Any(x => x.combi == q))
                {
                    warehouse wh = new warehouse();
                    wh.combi = j.ToString();
                    wh.ean = j.ToString();
                    test.warehouses.AddObject(wh);
                }
            }

        }
        test.SaveChanges(); 
```

我不知道的是实体框架只查询数据库中的数据而不是待处理的数据，因此任何查询都不会在数据库上给出任何结果（我假设会有结果。）因此，这会导致不需要的在上面的代码中重复。

现在我解决了它将所有即将添加的对象存储在内存中，然后将它们存储在数据库中。这可行，但会在代码中产生很多开销。有没有办法解决这个问题？你能告诉 EF 处理数据库和未决的更改吗？所有的 ORM 都是这样工作的吗？

谢谢，帕特里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T14:21:28.510

面对类似的问题，我决定像你一样检查数据库并检查本地数据：

```
 if( !test.warehouses.Local.Any(x => x.combi == q ) 
        && !test.warehouses.Any(x => x.combi == q ) ) 
```

这应该有效。

**编辑：** 但事实并非如此。但是，这样做：

```
var isLocal = ( test as System.Data.Objects.ObjectContext ).ObjectStateManager
    .GetObjectStateEntries( System.Data.EntityState.Added )
    .Any( x => (x.Entity as warehouse).combi == q );
if( !isLocal && !test.warehouses.Any( x => x.combi == q ) ) {
    // ...
} 
```

我必须注意`IDbSet<>`（由我的代码首先使用而不是`ObjectSet<>`由模型设计器创建）具有`.Local`属性，因此无需查询 ObjectStateManager。我知道代码优先是完全不同的事情，但您也可以非常高效地使用它：使用 Microsoft SQL Server Management Studio 设计数据库，并使用默认或自定义（如果需要）T4 模板从[Entity Framework Power Tools运行优秀的](http://visualstudiogallery.msdn.microsoft.com/72a60b14-1581-4b9b-89f2-846072eff19d)**逆向工程师代码优先**几乎得到任何东西。[http://en.wiktionary.org/wiki/your_mileage_may_vary](http://en.wiktionary.org/wiki/your_mileage_may_vary)

# assembly - 是什么让有符号整数表现不同？

> ID：12438100
> 
> 赞同：1
> 
> 时间：2012-09-14T16:59:27.443
> 
> 标签：assembly

在这个 x86_64 十六进制/反汇编代码示例中，我看到：

```
48B80000000000000000 mov rax, 0x0

    Signed Byte 52
    Unsigned Byte   52
    Signed Short    14388
    Unsigned Short  14388
    Signed Int  943863860
    Unsigned Int    943863860
    Signed Int64    3472328296363079732
    Unsigned Int64  3472328296363079732
    Float   4.630555e-05
    Double  1.39804332763832e-76
    String  48B80000000000000000 
```

在我看来，这似乎具有与以下相同的功能：

```
48C7C000000000 mov rax, 0x0

    48C7C000000000

    Signed Byte 52
    Unsigned Byte   52
    Signed Short    14388
    Unsigned Short  14388
    Signed Int  927152180
    Unsigned Int    927152180
    Signed Int64    3472328377950746676
    Unsigned Int64  3472328377950746676
    Float   1.163599e-05
    Double  1.39806836023098e-76
    String  48C7C000000000 
```

第一个示例与第二个示例的处理方式有何不同？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T17:13:04.133

C7 操作码将带符号的 32 位数字移动到 64 位寄存器中。它将对其进行符号扩展，这意味着它将用源的符号位填充高位，以便在解释为有符号数时具有相同的值。

由于它是一个立即数，您将看到的唯一区别是顶部的立即数将支持最多 64 位长的立即数，但底部的将仅支持最多 32 位。

以下是英特尔参考手册中的相关行。

```
REX.W + B8+ rd    MOV r64, imm64     OI     Valid     N.E.     Move imm64 to r64.
REX.W + C7 /0     MOV r/m64, imm32   MI     Valid     N.E.     Move imm32 sign extended to 64-bits to r/m64. 
```

# xcode - XCode 4.5 应用程序文件启动安装程序，而不是程序？

> ID：12438102
> 
> 赞同：2
> 
> 时间：2012-09-15T14:13:48.147
> 
> 标签：xcode, installation

我正在尝试让 Xcode 4.5 与我当前的 XCode 版本一起运行。

我可以看到很多帖子说您只需将 .app 文件从 dmg 拖到 HD 上的某个位置，但是当我这样做并尝试从该文件启动 XCode 4.5 时，它会启动一个安装程序。

根据我的阅读，它应该立即启动程序。有人可以告诉我我做错了什么吗？

从 iOS 开发中心下载 dmg 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T14:20:16.980

你做得很好。首次启动的安装程序安装了新版本所需的一些东西（例如，用于与新支持的硬件通信的库），但它不会干扰先前版本 Xcode 的工作。Xcode 4.4 和 4.3 也发生了同样的事情。

# oop - DTO和Domain Object、WCF以及DB层交互

> ID：12438104
> 
> 赞同：3
> 
> 时间：2012-09-15T14:13:52.453
> 
> 标签：oop, architecture

我有 asp.net mvc 2 应用程序。我在创建 DTO 和域实体时感到困惑。

MVC控制器集成点：1）第三方WCF 2）DB层

WCF 正在返回特定公司的人员信息和有关公司的一些信息。

我已经生成了 WCF 代理并在代理上编写了一个服务包装器。服务包装器正在与 WCF 对话，并将结果映射到 DTO 类 ContactsDTO 服务层位于不同的项目中。

以下是我的域类

```
Company
Person

DTO class
//it contains
class ContactsDTO
{
Person person, Company[] company
} 
```

控制器动作调用带有 companyID 的包装器并获取 DTO 类的对象。并从 dto 更新公司信息。它更新 Session 中的公司信息，并将 Company[]array 传递给其他一些操作。

数据库交互：

现在根据一些业务逻辑，我必须在数据库中插入人员 ID 和公司 ID 以及其他一些信息。

为此我创造了另一个

```
class DBDTO
{
Person person, Company[] company, OtherInfo otherInfo[]

} 
```

此 DBDTO 已准备好并传递给 DB 层（使用 Linq to sql）。

> > 问题
> 
> 是写方式吗。DTO交互有什么改进吗？我可以做些什么来改进整体架构

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T23:29:14.060

将数据库绑定对象转换为 DTO（这需要时间）的另一种替代方法是使用 POCO（普通旧 CLR 对象）并将它们直接用作您的域模型、可以存储在数据库中的对象以及与控制器通信的对象用于可视化。这可以帮助您入门：[使用 POCO 实体](http://msdn.microsoft.com/en-us/library/vstudio/dd456853%28v=vs.100%29.aspx "使用 POCO 实体")

这种方法有几个优点

*   您的 POCO 实体独立于底层数据库实现
*   您的 POCO 实体可以在不存在数据库的情况下进行单元测试
*   [您可以使用DataContractSerializer](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datacontractserializer.aspx)或[DataContractJsonSerializer](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.json.datacontractjsonserializer.aspx)轻松地将它们序列化为服务响应（如果您正在构建 API）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-13T13:41:52.947

由于职责不同，我同意 Algirdas 区分模型。

顺便说一句：MVC 不是层概念。这是三个责任及其协作的概念。虽然它经常（误）用于分层，但如果您只使用“MVC”分离应用程序层，您将遇到 SRP 问题。如果你每层都有 MVC，那么你做得很好。

毕竟，如果它是一个小型应用程序，您可能永远不会达到临界质量，从而遇到架构问题。

# jquery - 是否可以同时使用水平和垂直微小的滚动条

> ID：12438110
> 
> 赞同：2
> 
> 时间：2012-09-15T14:14:22.013
> 
> 标签：jquery, tinyscrollbar

我需要对大表进行水平和垂直滚动，我想使用 jquery tiny scrollbar 进行明智滚动。有没有人尝试过同时使用水平和垂直小滚动条？如果是，请提供样品..

提前致谢

# html - 固定标题到 1140 网格系统

> ID：12438112
> 
> 赞同：0
> 
> 时间：2012-09-15T14:14:31.867
> 
> 标签：html, css, layout, web, fixed

我正在用[1140 网格系统](http://cssgrid.net/)构建网站。我需要有关固定标题的帮助。我的标题带有“ `onecol`”标志，“ `elevencol last`”表示菜单向右对齐。

当我添加行时

```
header{position:fixed;top:0;} 
```

标题不占用页面的全宽

然后我添加

```
header{width:100%;} 
```

右侧的菜单太靠右了。

如果我添加`max-width:1140px;`到标题页看起来不错，直到您将其缩小到 1140 像素以下并且菜单不适合视图。

如果有人愿意帮助我，我将不胜感激。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T14:36:15.460

之后`top: 0;`还添加`left: 0; right: 0;`

# android - 如何在不降低分辨率的情况下避免位图上的 outOfMemory 错误

> ID：12438113
> 
> 赞同：2
> 
> 时间：2012-09-15T14:14:32.343
> 
> 标签：android, bitmap, out-of-memory

我正在为 android 制作这款 2d TD 游戏。在这个游戏中我的。需要怪物、塔楼等的纹理/图形。我决定保留所有图片，包括在一张图片中的所有单位攻击周期中，以及所有图片，包括在单位步行循环在另一个。

问题是我有很多不同的单位。这导致如果我希望每个怪物纹理具有 100x100px 的分辨率，则行走位图最终将成为 7000x15000px 的图片。这个ofc。使我的应用程序崩溃，但同时我需要该图片中的所有内容，并且我不想降低分辨率。如何在不耗尽内存的情况下使用这些图片？或者我是否需要以另一种方式组织我的图形 - 如果是这样，如果你能告诉我如何，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T14:41:29.297

稍微计算一下：您的位图有 7000x15000 像素，即 105000000 像素。对于每个像素，您需要 3 或 4 个字节（取决于您是否具有透明度）。假设您使用透明度，这是每个像素 4 个字节，所以总共是 420000000 个字节。**400 MB**。

所以，你肯定要重新组织你的设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T16:56:59.643

您确定要使用全部 10000 张图像吗？大多数游戏的完整精灵表通常在数百或数千以下范围内。在 640x480 的屏幕中，您只能放置 24 个不同的字符而不会重叠，在一个屏幕上放置太多相同大小的不同字符可能会让人感到困惑。

您可以采取一些措施来减小 spritesheet 的大小，即降低 sprite 的帧速率，以便使用相同的 sprite 图像渲染多个连续的游戏帧。许多较旧的游戏使用[6-8 帧](http://www.yarrninja.com/pixeltutorial/chapter15.htm)的运行周期，它们看起来很棒。更简单的小兵甚至可以削减更多，并且只使用 3-4 个图像。

您可以做的另一件事是更智能的角色和关卡设计，这样您实际上就不需要同时需要所有角色。将每个不同的角色放在他们自己的文件中，您可以根据特定级别的需要加载它们。您还可以重用具有不同颜色的精灵来指示另一个精灵的更强版本，重新着色的精灵实际上并不作为单独的字符存在于精灵表中，而是在运行时组合而成。如果你的角色有可见的装备，你也不需要每个组合都有一个精灵，而是在运行时将装备精灵组合成角色图像。

您还可以降低精灵的颜色深度，大多数手机支持渲染 RGB565 像素格式，并且在许多情况下，使用完整的 RGB888 可能比您实际需要的颜色更多。

此外，对于 DPI 较低的手机（通常也功率较低），您应该使用较低分辨率的图像。在这些手机中，您的 100x100 精灵看起来会非常大。

此外，您可能不需要所有对象的 100x100 像素大小的精灵。许多对象可能会比这小得多，您可以为它们使用更小的精灵单元大小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T17:34:39.223

正如 Lie 建议的那样，您应该正确地构建游戏，这样您就不需要一次使用所有资源。您当前的内存要求太多了。您可以对位图使用 RGB565 配置，也可以对图像进行二次采样。仅仅降低帧速率是行不通的，因为当前每帧的内存需求非常大。
对于图像资源的子采样，您可以使用以下代码示例：

```
 BitmapFactory.Options boundsOp = new BitmapFactory.Options();
        boundsOp.inJustDecodeBounds = true;
        BitmapFactory.decodeFile(pathToFile, boundsOp);
        if(boundsOp.outWidth == -1) 
        {
            Log.i("Error", "error");   
        }

        int width = boundsOp.outWidth;
        int height = boundsOp.outHeight;
        int inSampleSize = 1;

        int temp = Math.max(width, height);
        while(temp > MAX_WIDTH)
        {
            inSampleSize *= 2;
            temp /= 2;
        }

        BitmapFactory.Options resample = new BitmapFactory.Options();
        // RGB 565 configuration
        resample.inPreferredConfig = Config.RGB_565;
        resample.inSampleSize = inSampleSize;

        //bmp = BitmapFactory.decodeFile(pathToFile, resample);
        bmp = BitmapFactory.decodeFile(pathToFile);
        bmp = Bitmap.createScaledBitmap(bmp, MAX_WIDTH, MAX_HEIGHT, true); 
```

*   Besides all these things you also need to recycle the bitmaps when you are not using them.

# c - 如何将内存中的音频数据保存为 wav 文件？

> ID：12438115
> 
> 赞同：0
> 
> 时间：2012-09-15T14:14:53.880
> 
> 标签：c, winapi, save, wav

当应用程序`waveOutWrite(HWAVEOUT hwo, LPWAVEHDR pwh, UINT cbwh)`在 Windows 上调用时，我将发送到音频卡的音频数据（由 pwh->lpData 指向）的副本保存在内存中。

现在我想将音频数据保存为WAV格式的文件在磁盘上，我该怎么做呢？

我有指向音频数据块的指针和音频数据的大小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T14:26:52.593

wav 格式[非常简单](https://ccrma.stanford.edu/courses/422/projects/WaveFormat/)，很容易编写自己的实现。或者，您可以使用[libsndfile 之](http://www.mega-nerd.com/libsndfile/)类的库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T14:40:44.003

使用旧版多媒体 API，您将使用`mmioOpen`, `mmioCreateChunk`,[`mmioWrite`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd757341%28v=vs.85%29.aspx)系列函数。这是一个代码片段：[WAV 保存？](http://us.generation-nt.com/answer/wav-saving-help-24573212.html). API 允许您编写这些 RIFF 文件，但结构并不复杂，您可以直接写入二进制文件。

仍然是 WinAPI，虽然与您的匹配不太好`waveOutWrite`：

*   使用 DirectShow API，您需要[WavDest Sample](http://msdn.microsoft.com/en-us/subscriptions/ms788110%28v=vs.85%29.aspx)和一个过滤器图，使用它来将传入数据写入文件。
*   使用最新的 Media Foundation API [WavSink Sample](http://msdn.microsoft.com/en-us/library/windows/desktop/bb970469%28v=vs.85%29.aspx)将会很有帮助。

# c++ - 在 VS 2010 上使用 boost::interprocess 构建代码问题

> ID：12438125
> 
> 赞同：0
> 
> 时间：2012-09-15T14:16:54.110
> 
> 标签：c++, boost, map, shared-memory, boost-interprocess

我正在尝试在 VS 2010 中构建一段代码，该代码通常在网上找到，作为在共享内存中拥有地图的示例。

```
#include <boost\interprocess\managed_shared_memory.hpp>
#include <boost\interprocess\containers\map.hpp>

typedef boost::interprocess::map<long,long,
            std::less<long>,
            boost::interprocess::allocator<std::pair<long,long>,
                boost::interprocess::managed_shared_memory::segment_manager> >
        shmap;

boost::interprocess::managed_shared_memory segment1(
    boost::interprocess::create_only, 
    "MySharedMemory", 655360); //segment name and size in bytes

shmap *rp = segment1.construct<shmap>("SharedMap")(
    std::less<long>(), segment1.get_segment_manager()); 
```

我得到了这个让我大吃一惊的错误。有任何想法吗？

```
error C2338: (container_detail::is_same<std::pair<const Key, T>, typename A::value_type>::value) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T14:21:50.630

应该

```
typedef boost::interprocess::map
<long,long,std::less<long>,
boost::interprocess::allocator<std::pair<const long,long>, 
boost::interprocess::managed_shared_memory::segment_manager> > shmap; 
```

由于内部检查是`is_same<std::pair<const Key, T>, Allocator::value_type>`

# wordpress - 如何通过 git 从 openshift 中提取所有数据

> ID：12438127
> 
> 赞同：2
> 
> 时间：2012-09-15T14:16:56.093
> 
> 标签：wordpress, git, openshift

我在 openshift.com 上创建了一个 wordpress 应用程序，安装后我从管理面板下载并安装了插件和主题。
现在，当我尝试在本地计算机上克隆应用程序时，它只会获取默认的 wordpress 站点。
插件和主题不会被克隆。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-12T23:17:38.783

对齿轮本身的更改绕过了 git。理想情况下，您会将主题和插件上传到存储库的本地副本，然后将其推送到您的 openshift 应用程序。或者，您可以保持常规工作流程，只需执行以下操作：

1.  确保网站上的内容是您想要保留/备份的内容。
2.  打开命令行并通过输入以下内容拍摄您的应用程序的快照：

    ```
    rhc snapshot save -a {appName} 
    ```

3.  您现在应该有一个名为的文件`appName.tar.gz`（这将被导出到一个位置，具体取决于您在命令行中的位置）
4.  解压缩此文件并在下面`app-root/repo/php/wp-content`查看您的主题和插件。您的上传（媒体）将在`app-root/data/uploads`.
5.  将这些主题和插件文件放在您的本地存储库中。Git 添加、提交和推送它们以保持同步。

**注意：**如果您使用了 openshift wordpress 应用程序，那么您会注意到 uploads 文件夹完全从 git 中排除。这意味着您可以像往常一样从 wordpress 仪表板添加媒体，但将您的代码保持在 git 版本控制之下。

来源：[https ://openshift.redhat.com/community/kb/kb-e1065-what-is-application-crud-and-how-should-i-handle-it-in-openshift](https://openshift.redhat.com/community/kb/kb-e1065-what-is-application-crud-and-how-should-i-handle-it-in-openshift)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T23:44:52.553

那是因为插件和主题没有存储在你的 git repo 中。如果您想将它们放在您的 git 存储库中，您需要将源代码放在那里。我认为默认情况下，下拉插件和主题会将它们放在您的 ~//data 目录中。您可以 scp 或 sftp 这些文件，然后将它们放入您的 git 存储库中。

简而言之，在 git 之外所做的更改不会被 git 跟踪。

# css - 在外部 DIV 中居中 2 DIV，文本居中对齐 + 显示内联块

> ID：12438131
> 
> 赞同：0
> 
> 时间：2012-09-15T14:17:41.073
> 
> 标签：css, html

我按照其他线程的 Q&A 到中心 2 DIV，它位于 div 内但没有解决。我将文本对齐中心添加到外部 DIV 并在左右 DIV 中显示内联块。请尝试让我知道缺少什么...... [这是jsfiddle](http://jsfiddle.net/MZrym/106/)

HTML：

```
<div class="indexDiv" id="noPad">
<div class="results">
<div id="topResults">Top</div>
<div id="refineResults">Left</div>
<div id="listingsResults">Right</div>
</div>    
</div> 
```

CSS：

```
.indexDiv {
overflow: hidden;
width: 993px;
background: #ffffff;
margin: 0 auto;
padding: 10px;
}

.Results {
color: #D5241B;
font-size: 20px; font-weight: bold;
/*    margin: 4px 0 8px;*/
border: 1px solid #D9D9D9;
}

.Results {
/*  padding: 10px;*/
text-align: center;
width: 930px;
margin:0 auto;
}

#topResults {
float: right;
width: 100%;
margin: 0 0 10px 0;
border: 1px solid #D9D9D9;
}

#refineResults {
/*  float: left;*/
width: 200px;     
display: inline-block;    
/*  padding: 5px; */
border: 1px solid #D9D9D9;
}

#listingsResults {
/*  float: right;*/
width: 715px;
/*  margin-left:18px;*/
border: 1px solid #D9D9D9;
display: inline-block;    
/*   padding: 5px; */
} 
```

​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T14:21:52.220

CSS 类选择器区分大小写。你有`.Results`，它不会选择你的元素`class = "results"`。将其替换为`.results`; 这是一个固定的演示：[小链接](http://jsfiddle.net/glee/MZrym/107)。

# java - Android 应用程序停止工作

> ID：12438135
> 
> 赞同：0
> 
> 时间：2012-09-15T14:18:22.710
> 
> 标签：java, android

我目前正在开发一个可以通过网络向 AV 接收器发送命令的 android 应用程序。我已经制作了一个按钮并对其进行了编码，以便在单击该按钮时它将命令 PWON\r 发送到指定的 IP 和端口。我还在清单文件中给予了完全的互联网许可。问题是一旦按下按钮，应用程序就会停止工作。我不确定问题是什么。

代码：

```
package av.control.test;  
import java.io.IOException;  
import java.io.OutputStream;  
import java.net.Socket;  
import java.net.UnknownHostException;  
import android.app.Activity;  
import android.os.Bundle;
import android.view.View;  
import android.widget.Button;

public class AVControlActivity extends Activity {

Button mbutt;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    mbutt = (Button)findViewById(R.id.Button);
}
public void onClick(View view) throws UnknownHostException, IOException
{
    new Thread() {
        public void run() {
            Socket socket = null;
            try {
                socket = new Socket("192.168.1.74", 23);
            } catch (UnknownHostException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            } catch (IOException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }
            try{
                dataOutputStream.Object BUFFER = null;
                write(BUFFER);
                String buffer="PWON\r";
                OutputStream os=socket.getOutputStream();
                os.write(buffer.getBytes()); 
            } catch(IOException e)
            {
                //error code
            }
          }
        }.start();
}
private void write(Object BUFFER) {
    // TODO Auto-generated method stub

}
} 
```

如果有任何用处，这里也是 main.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/hello" />

<Button
    android:id="@+id/Button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Power On"
    android:onClick="onClick" />

</LinearLayout> 
```

我将不胜感激任何帮助。

编辑：

日志猫

```
09-15 14:31:30.742: I/dalvikvm(1209): threadid=3: reacting to signal 3
09-15 14:31:31.301: E/dalvikvm(1209): Unable to open stack trace file    '/data/anr/traces.txt': Permission denied
09-15 14:31:31.322: I/dalvikvm(1209): threadid=3: reacting to signal 3
09-15 14:31:31.421: I/dalvikvm(1209): Wrote stack traces to '/data/anr/traces.txt'
09-15 14:31:31.801: I/dalvikvm(1209): threadid=3: reacting to signal 3
09-15 14:31:31.901: I/dalvikvm(1209): Wrote stack traces to '/data/anr/traces.txt'
09-15 14:31:32.381: I/dalvikvm(1209): threadid=3: reacting to signal 3
09-15 14:31:32.451: I/dalvikvm(1209): Wrote stack traces to '/data/anr/traces.txt'
09-15 14:31:32.711: D/gralloc_goldfish(1209): Emulator without GPU emulation detected.
09-15 14:31:32.843: I/dalvikvm(1209): threadid=3: reacting to signal 3
09-15 14:31:32.901: I/dalvikvm(1209): Wrote stack traces to '/data/anr/traces.txt'
09-15 14:34:53.081: W/System.err(1209): java.net.ConnectException: failed to connect to     /192.168.1.74 (port 23): connect failed: ETIMEDOUT (Connection timed out)
09-15 14:34:53.091: W/System.err(1209):     at   libcore.io.IoBridge.connect(IoBridge.java:114)
09-15 14:34:53.091: W/System.err(1209):     at     java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
09-15 14:34:53.101: W/System.err(1209):     at  java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
09-15 14:34:53.121: W/System.err(1209):     at  java.net.Socket.startupSocket(Socket.java:566)
09-15 14:34:53.121: W/System.err(1209):     at java.net.Socket.tryAllAddresses(Socket.java:127)
09-15 14:34:53.132: W/System.err(1209):     at java.net.Socket.<init>(Socket.java:177)
09-15 14:34:53.132: W/System.err(1209):     at java.net.Socket.<init>(Socket.java:149)
09-15 14:34:53.161: W/System.err(1209):     at   av.control.test.AVControlActivity$1.run(AVControlActivity.java:27)
09-15 14:34:53.161: W/System.err(1209): Caused by: libcore.io.ErrnoException: connect failed: ETIMEDOUT (Connection timed out)
09-15 14:34:53.182: W/System.err(1209):     at libcore.io.Posix.connect(Native Method)
09-15 14:34:53.182: W/System.err(1209):     at libcore.io.BlockGuardOs.connect(BlockGuardOs.java:85)
09-15 14:34:53.191: W/System.err(1209):     at  libcore.io.IoBridge.connectErrno(IoBridge.java:127)
09-15 14:34:53.211: W/System.err(1209):     at libcore.io.IoBridge.connect(IoBridge.java:112)
09-15 14:34:53.211: W/System.err(1209):     ... 7 more
09-15 14:34:53.222: W/dalvikvm(1209): threadid=12: thread exiting with uncaught  exception (group=0x409c01f8)
09-15 14:34:53.241: E/AndroidRuntime(1209): FATAL EXCEPTION: Thread-121
09-15 14:34:53.241: E/AndroidRuntime(1209): java.lang.NullPointerException
09-15 14:34:53.241: E/AndroidRuntime(1209):     at   av.control.test.AVControlActivity$1.run(AVControlActivity.java:39) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T15:15:35.300

你有一个空指针异常

```
OutputStream os=socket.getOutputStream(); 
```

这是因为由于超时，下面的行给出了异常。

```
socket = new Socket("192.168.1.74", 23); 
```

所以套接字仍然为空。如果未创建套接字，我认为您不应该继续操作。因此，如下所示更改您的代码。

```
 try {
            socket = new Socket("192.168.1.74", 23);
            dataOutputStream.Object BUFFER = null;
            write(BUFFER);
            String buffer="PWON\r";
            OutputStream os=socket.getOutputStream();
            os.write(buffer.getBytes()); 
        } catch (UnknownHostException e1) {
            e1.printStackTrace();
        } catch (IOException e1) {
            e1.printStackTrace();
        } 
```

进一步检查为什么你会超时。这可能是由于设备不在同一网络上，或者端口未打开

# jquery - 使用 .profile-link 类获取标签的所有内容并将其打印出来

> ID：12438136
> 
> 赞同：1
> 
> 时间：2012-09-15T14:18:25.910
> 
> 标签：jquery, class

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T14:20:06.330

`$('.profile-link').html();`如果您需要重用链接的内容（非转义 HTML，视为 HTML），请尝试。

`$('.profile-link').text();`如果你只是抓住一根绳子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T14:24:42.063

如果你想要一个带有类的标签的所有内容。

```
$('a.profile-link').map(function() {
    return $(this).text();  // use .html() if you want the html content.
}).get().join("\n"); // joined by newline, you could change to other else. 
```

# sas - 从欧洲社会调查导入数据

> ID：12438142
> 
> 赞同：2
> 
> 时间：2012-09-15T14:19:34.707
> 
> 标签：sas

我需要将数据从[欧洲社会调查数据库](http://ess.nsd.uib.no/downloadwizard/)导入SAS。我不太擅长使用 SAS，所以我只是天真地尝试导入一个得到的文本文件，但它把它全部存储在一个变量中。

有人可以帮我做什么吗？由于他们的网页上似乎没有指南，我认为它必须非常简单。

注册是免费的（需要 5 秒），我需要丹麦的所有可能数据。

编辑：当下载他们所谓的 SAS 文件时，我得到的是一个巨大的 proc 格式和与通过选择文本获得的相同的文本文件。文本文件中的数据不是逗号分隔的，第一行不包含变量名。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T15:38:49.313

但是网站说yu可以下载SAS格式，你为什么不呢？

如果所有内容都进入一列，则需要一个分隔符。

```
data temp;
length ...;
infile 'file.csv' dlm=',';
input ...;
run; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-16T11:32:58.650

以 SAS 格式下载。将文本文件保存在您可以记住的位置，然后打开 SAS 文件。这不仅仅是一种大的 proc 格式；这是一个大的 proc 格式，后跟一个带有输入代码的数据步。它可能是由 SPSS 创建的（无论如何它都符合 SPSS 保存的 .sas 文件的模式）。寻找：

```
DATA  OUT.ESS1_4e01_0_F1; 
```

或类似的东西（这就是我下载它时的样子）。它可能大约是页面下方的 3/4。您只需要更改代码：

```
INFILE 'ESS1_4e01_0_F1.txt'; 
```

或类似的，作为您放置文本文件的目录。为 OUT 创建一个 LIBNAME，将其转到您要永久保存的任何位置，并在 .sas 文件的开头执行此操作，像这样替换前 3 行。

起初：

```
LIBNAME LIBRARY '';
LIBNAME OUT '';
PROC FORMAT LIBRARY=LIBRARY ; 
```

将这些更改为：

```
libname out "c:\mystuff\"; *but probably not c:\mystuff :);
options fmtsearch=(out);
proc format lib=out; 
```

然后运行整个事情。

如果您想要格式化的值（值标签）和变量标签，这是最好的解决方案。如果您不关心这一点，那么像 Bob 展示的那样处理 CSV 可能会更容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T15:49:19.917

正如 Dirk 所说，该网站说您可以直接下载 SAS 数据集。但是，如果出于某种原因您不想这样做，请选择逗号分隔文件 (CSV) 并使用`PROC IMPORT`. 这是一个例子：

```
proc import out=some_data
     datafile='c:\path\somedata.csv'
     dbms=csv replace;
     getnames=yes;
run; 
```

当然，这假设第一行包含列名。

# java - 3d 寻路映射

> ID：12438144
> 
> 赞同：1
> 
> 时间：2012-09-15T14:19:57.573
> 
> 标签：java, mapping, java-3d

你好，伙计们

我对使用 java 编程语言创建简单的查找方法有点困惑？或者在java中有可能吗？我想创建一种简单的查找方式，就像[这些](http://vimeo.com/20201532)

你对这个特殊的问题有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T17:27:52.967

您需要从地图的航点使用最短路径算法和矩阵构建器。Java 3D 具有内置的原始形状，例如圆柱体、球体和立方体。但是您可以从点、三角形和四边形创建自己的几何图形。请参阅 SO 中的一些 java3D 标记问题。

在 java3D 中，鼠标和键盘的交互非常容易实现。碰撞检测也是 java3D 的一个很好的优点，而没有影子库是一个缺点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-06T08:05:53.220

你可以试试[3D Wayfinder](http://3dwayfinder.com)。他们有一个公共 API 和功能齐全的 3d 寻路。它不是用 Java 编写的，而是使用 HTML5、WebGL 和 JavaScript。姚只需要上传一个平面图模型就可以了。

# javascript - 漂亮照片图库中的 Facebook 赞按钮

> ID：12438146
> 
> 赞同：5
> 
> 时间：2012-09-15T14:20:01.787
> 
> 标签：javascript, jquery, jquery-plugins, facebook-like, prettyphoto

在这个网站上，我使用了漂亮的图片库。问题是 - 当用户点击 facebook like 按钮时 - 在他的新闻上只显示网站名称。我想要的是 - 当用户单击特定图像上的 fb LIKE 按钮时，该图像会显示在他的新闻提要中。你能帮我做这个吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T14:25:25.697

使用 Facebook 时，始终使用[Facebook 调试器](https://developers.facebook.com/tools/debug)检查您的网站 url 。

看起来问题是 Facebook 可能无法获取图像，因此您需要添加一个元标记，以便 Facebook 可以知道 prvded URL 所需的图像。

```
Ex: <meta property="og:image" content="YOUR_IMAGE_PATH"/> 
```

**更新1：**

为了在用户更改图库图像时修改 Meta 标签值，您可以使用以下代码来执行此操作：

```
$("meta[property=og\\:image]").attr("content", YOUR_IMAGE_PATH); 
```

请注意，我们需要转义[文档](http://api.jquery.com/category/selectors/)`:`中提到的字符

**更新 2：**

您需要更改这些功能才能使其正常工作：

```
 $pp_gallery.find('.pp_arrow_next').click(function(){
            $.prettyPhoto.changeGalleryPage('next');
        // here you will need to read the current image url, then assign it to our facebook line.
    $("meta[property=og\\:image]").attr("content", YOUR_IMAGE_PATH);
            $.prettyPhoto.stopSlideshow();
            return false;
        });

    $pp_gallery.find('.pp_arrow_previous').click(function(){
            $.prettyPhoto.changeGalleryPage('previous');
        // here you will need to read the current image url, then assign it to our facebook line.
$("meta[property=og\\:image]").attr("content", YOUR_IMAGE_PATH);
            $.prettyPhoto.stopSlideshow();
            return false;
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T14:23:24.873

使用 Facebook 的 OG 元标签

例如图像：

```
<meta property="og:image" content="http://yourwebsite.com/img/img.png"/> 
```

有关更多信息，请查看：[http ://davidwalsh.name/facebook-meta-tags](http://davidwalsh.name/facebook-meta-tags)

# perl - 从模块获取散列到主 Perl 代码

> ID：12438148
> 
> 赞同：1
> 
> 时间：2012-09-15T14:20:09.540
> 
> 标签：perl, hash, module

这是我第一次使用模块。我正在尝试将模块中存在的哈希内容检索到主 perl 代码中。

下面是模块 DRUG.pm

```
package DRUG;
require Exporter;

our @ISA = qw(Exporter);
our @EXPORT = qw(%DRUG);

%DRUG = (
    'warfarin ' => 1,
    'midazolam ' => 1,
    'acebutolol ' => 1,
); 
```

这是主程序，试图访问模块中存在的哈希

```
use warnings;
use strict;
use DRUG;

foreach my $nme (keys %DRUG){
print "$nme\n";
} 
```

我无法从模块中获取哈希信息，也无法在主 perl 代码中打印该哈希。

有人可以帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T14:26:09.867

不应该

```
use DrugNames; 
```

是

```
use DRUG; 
```

你需要`1;`在 DRUGS.pm 结尾

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T00:22:08.010

虽然使用 Exporter 使 DRUG 的内容可用很简单，但通常首选使用“访问器”方法。

这样做的好处是您当前的名称空间不会被包中的变量“污染”。

此外，如果您不希望更改内容，请考虑将变量设为只读。

# 文件 main.pl

`

```
use warnings;
use strict;
use DRUG;

my $drug = DRUG->get_drug();
foreach my $nme (keys %$drug){
    print "$nme\n";
} 
```

`

# 文件药物.pm

`

```
package DRUG;
use strict;
use Readonly;

Readonly my $DRUG => {
    'warfarin ' => 1,
    'midazolam ' => 1,
    'acebutolol ' => 1,
};

sub get_drug{
    return $DRUG;
}

1; 
```

`

# c# - C# vs Python 参数传递

> ID：12438153
> 
> 赞同：4
> 
> 时间：2012-09-15T14:20:59.550
> 
> 标签：c#, python, parameter-passing

Python 的参数传递规则与 C# 的参数传递规则的主要区别是什么？

我对 Python 非常熟悉，只是开始学习 C#。我想知道我是否可以考虑关于何时通过引用或值传递对象的规则集，对于 C# 来说，它与 Python 中相同，或者是否有一些我需要牢记的关键差异。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-15T14:32:59.580

C# 按值传递参数，除非您指定不同的方式。如果参数类型是结构，则复制其值，否则复制对对象的引用。返回值也是如此。

`ref`您可以使用or修饰符修改此行为`out`，该修饰符必须在方法声明和方法调用中都指定。两者都将该参数的行为更改为按引用传递。这意味着您不能再传递更复杂的表达式。`ref`和之间的区别在于`out`，将变量传递给`ref`参数时，它必须已经初始化，而传递给`out`参数的变量不必初始化。在该方法中，`out`参数被视为未初始化的变量，必须在返回前赋值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-15T14:45:42.100

Python 总是使用按引用传递的值。也不例外。任何变量赋值都意味着赋值参考值。没有例外。任何变量都是绑定到引用值的名称。总是。

您可以将引用视为目标对象的地址，该地址在使用时会自动取消引用。这样，您似乎可以直接使用目标对象。但中间总有一个参考，多一步跳转到目标。

**更新**——这是一个证明通过引用传递的通缉示例：

![传递参数的图解示例](../Images/77fc84a945b5b3438e9755b13359e5ed.png)

如果参数是按值传递的，则`lst`无法修改外部。绿色是目标对象（黑色是里面存储的值，红色是对象类型），黄色是里面有引用值的内存——如箭头所示。蓝色实心箭头是传递给函数的参考值（通过蓝色虚线箭头路径）。丑陋的深黄色是内部字典。（它实际上也可以画成一个绿色的椭圆。颜色和形状只是说它是内部的。）

**更新**- 与 fgb 对通过引用传递示例`swap(a, b)`的评论和 delnan 对不可能编写`swap`.

在编译语言中，变量是能够捕获类型值的内存空间。在 Python 中，变量是绑定到引用变量的名称（内部捕获为字符串），该引用变量保存对目标对象的引用值。变量的名称是内部字典中的键，该字典项的值部分存储对目标的引用值。

在其他语言中的目的`swap`是交换传递变量的内容，即交换内存空间的内容。这也适用于 Python，但仅限于可以修改的变量——这意味着可以修改其内存空间的内容。这仅适用于可修改的容器类型。从这个意义上说，一个简单的变量总是不变的，即使它的名字可以用于其他目的。

如果函数应该创建一些新对象，那么将其获取到外部的唯一方法是或通过容器类型参数，或通过 Python`return`命令。但是，Python 在`return`语法上看起来好像可以传递多个参数。实际上，传递到外部的多个值形成一个元组，但元组可以在语法上分配给更多外部 Python 变量。

**与变量模拟相关的更新**，因为它们在其他语言中被感知。内存空间由单元素列表模拟——即多了一层间接性。然后`swap(a, b)`可以像用其他语言一样编写。唯一奇怪的是，我们必须使用列表的元素作为对模拟变量值的引用。必须以这种方式模拟其他语言变量的原因是只有容器（它们的一个子集）是 Python 中唯一可以修改的对象：

```
>>> def swap(a, b):
...   x = a[0]
...   a[0] = b[0]
...   b[0] = x
...
>>> var1 = ['content1']
>>> var2 = ['content2']
>>> var1
['content1']
>>> var2
['content2']
>>> id(var1)
35956296L
>>> id(var2)
35957064L
>>> swap(var1, var2)
>>> var1
['content2']
>>> var2
['content1']
>>> id(var1)
35956296L
>>> id(var2)
35957064L 
```

请注意，现在`var1`和`var2`模拟经典语言中“正常”变量的外观。更改了它们的`swap`内容，但地址保持不变。

对于可修改的对象（例如列表），您可以编写与`swap(a, b)`其他语言完全相同的内容：

```
>>> def swap(a, b):
...   x = a[:]
...   a[:] = b[:]
...   b[:] = x[:]
...
>>> lst1 = ['a1', 'b1', 'c1']
>>> lst2 = ['a2', 'b2', 'c2']
>>> lst1
['a1', 'b1', 'c1']
>>> lst2
['a2', 'b2', 'c2']
>>> id(lst1)
35957320L
>>> id(lst2)
35873160L
>>> swap(lst1, lst2)
>>> lst1
['a2', 'b2', 'c2']
>>> lst2
['a1', 'b1', 'c1']
>>> id(lst1)
35957320L
>>> id(lst2)
35873160L 
```

请注意，必须使用*多重赋值*like来表达列表*内容的复制。*`a[:] = b[:]`

 ** * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-15T19:25:32.490

将 Python 称为“按值传递”或“按引用传递”语言并与 C、C# 等进行比较的问题在于，Python 对数据的引用方式有不同的概念。Python 不容易适应传统的按值或按引用二分法，导致混淆和“它是按值调用！” “不，是引用式调用，我可以证明！” “不，你栗色，这显然是价值调用！” 上面见证了无限循环。

事实是，两者都不是。Python 使用共享调用（也称为对象调用）。有时这似乎是一种按值策略（例如，在处理像`int`、`float`和等标量值时`str`），有时像按引用策略（例如在处理像`list`、`dict`、`set`和等结构化值时`object`）。David Goodger 的[Code like a Pythonista 将这](http://python.net/~goodger/projects/pycon/2007/idiomatic/handout.html#other-languages-have-variables)一点完美地总结为“其他语言有*变量*；Python 有*名称*”。作为奖励，他提供了清晰的图形来说明差异。

在幕后，call-by-sharing 的实现更像是 call-by-reference（正如[Noctis Skytower](https://stackoverflow.com/users/216356/noctis-skytower)提到的[mutate`float`示例](http://code.activestate.com/recipes/578132/)所展示的那样。）但是如果你认为它是 call-by-reference，你就会偏离轨道很快，因为虽然引用是实现，但它们不是暴露的语义。

相比之下，C#[使用按值调用或按引用调用——](http://msdn.microsoft.com/en-us/library/0f66670z(v=vs.71).aspx)尽管有人可能会争辩说，该`out`选项代表了一种超越纯按引用调用的调整，如在 C、Pascal 等中所见。

因此，Python 和 C# 确实非常不同——至少在架构级别上。在实践中，按值和按引用的组合将允许您创建操作非常类似于按共享调用的程序——尽管有一个棘手的小恶魔生活在细节和极端情况中。

如果您有兴趣在比较上下文中了解不同语言的参数传递策略， [维基百科的表达式评估策略页面](http://en.wikipedia.org/wiki/Evaluation_strategy#Call_by_sharing)值得一读。虽然它并不详尽（有*很多*方法可以给这只特殊的猫剥皮！），但它巧妙地涵盖了一系列最重要的方法，以及一些有趣的不常见变化。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-15T14:24:30.190

Python 总是按值传递：

```
def is_python_pass_by_value(foo):
    foo[0] = 'More precisely, for reference types it is call-by-object-sharing, which is a special case of pass-by-value.'
    foo = ['Python is not pass-by-reference.']

quux = ['Yes, of course, Python *is* pass-by-value!']

is_python_pass_by_value(quux)

print(quux[0])
# More precisely, for reference types it is call-by-object-sharing, which is a special case of pass-by-value. 
```

C# 默认是按值传递的，但如果在方法声明站点和调用站点`ref`都使用关键字，则也支持按引用传递：

```
struct MutableCell
{
    public string value;
}

class Program
{
    static void IsCSharpPassByValue(string[] foo, MutableCell bar, ref string baz, ref MutableCell qux)
    {
        foo[0] = "More precisely, for reference types it is call-by-object-sharing, which is a special case of pass-by-value.";
        foo = new string[] { "C# is not pass-by-reference." };

        bar.value = "For value types, it is *not* call-by-sharing.";
        bar = new MutableCell { value = "And also not pass-by-reference." };

        baz = "It also supports pass-by-reference if explicitly requested.";

        qux = new MutableCell { value = "Pass-by-reference is supported for value types as well." };
    }

    static void Main(string[] args)
    {
        var quux = new string[] { "Yes, of course, C# *is* pass-by-value!" };

        var corge = new MutableCell { value = "For value types it is pure pass-by-value." };

        var grault = "This string will vanish because of pass-by-reference.";

        var garply = new MutableCell { value = "This string will vanish because of pass-by-reference." };

        IsCSharpPassByValue(quux, corge, ref grault, ref garply);

        Console.WriteLine(quux[0]);
        // More precisely, for reference types it is call-by-object-sharing, which is a special case of pass-by-value.

        Console.WriteLine(corge.value);
        // For value types it is pure pass-by-value.

        Console.WriteLine(grault);
        // It also supports pass-by-reference if explicitly requested.

        Console.WriteLine(garply.value);
        // Pass-by-reference is supported for value types as well.
    }
} 
```

如您所见，如果没有使用`ref`关键字显式注释，C# 的行为与 Python*完全相同。*值类型是按值传递，其中传递的值是对象本身，引用类型是按值传递，其中传递的值是指向对象的指针（也称为按对象共享）。

Python 不支持可变值类型（可能是件好事），因此无法观察到 pass-value-by-value 和 pass-pointer-by-value 之间的区别，因此您可以将*所有内容都*视为 pass-pointer-通过价值并大大简化您的心理模型。

C# 也支持`out`参数。它们也是按引用传递的，但保证被调用者永远不会从它们中读取，只会写入，因此调用者不需要事先初始化它们。当您在 Python 中使用元组时，它们用于模拟多个返回值。它们有点像单向传递引用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-15T14:27:48.893

不太一样

```
def func(a,b):
    a[0]=5 #Python
    b=30 
```

* * *

```
public int func( ref int a,out int b,int d)
{
  a++;b--;  //C#
} 
```

* * *

```
x=[10]
y=20
func(20,30) #python 
print x,y   #Outputs x=[5],y=20 Note:I have used mutable objects.Not possible with int. 
```

* * *

```
int x=10,y=20;
func(ref x,out y,18); //C# 
Console.Writeline("x={0} y={1}",x,y);//Outputs x=11,y=19 
```*

# haskell - 如何从以下 Haskell 代码片段中消除重复？

> ID：12438160
> 
> 赞同：2
> 
> 时间：2012-09-15T14:21:32.353
> 
> 标签：haskell

下面的函数显然在两个列表推导之间存在重复，但是如何在不增加代码总长度的情况下消除它呢？我有一种鬼鬼祟祟的感觉，这里潜伏着一个很好的抽象，但我就是看不到它......

```
letterAt :: [Word] -> Int -> Int -> Maybe Char 
letterAt wrds x y = listToMaybe $ 
  [wtext !! (x - wx) | 
    Word wx wy wtext Across <- wrds, 
    wy == y && x >= wx && x < wx + length wtext] ++ 
  [wtext !! (y - wy) | 
    Word wx wy wtext Down <- wrds, 
    wx == x && y >= wy && y < wy + length wtext] 
```

一些背景：

该功能取自填字游戏。填字游戏表示为 [Word]，其中

```
data Word = Word { startX :: Int, 
                   startY :: Int, 
                   text :: String, 
                   sense :: Sense } 

data Sense = Across | Down 
```

sense == Across 从位置 (startX, startY) 开始并沿 x 正方向继续，而 sense == Down 则沿 y 正方向继续。该函数的目的是在 Just 中获取位置 (x, y) 处的字符，如果那里没有字符，则为 Nothing。

随意指出我在这里对 Haskell 犯下的任何其他罪行，我刚刚开始使用该语言，但仍在努力掌握它！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T14:38:31.530

以下是有关您的代码的一些要点：

*   `filter`当要根据谓词选择列表的某些元素时，最好使用它。
*   由于您只想要满足某些谓词的第一个元素，因此您可以使用`Data.List.find`

您的条件看起来是对称的，因此您可以将`transform`函数定义为

```
transform f x y (Word wx wy wtext Across) = f wtext wy wx y x
transform f x y (Word wx wy wtext Down) = f wtext wx wy x y 
```

现在编写代码只需要编写一次条件

```
letterAt :: [Word] -> Int -> Int -> Maybe Char
letterAt wrds x y = (transform charValue x y) <$> find (transform condition x y)  wrds
    where
        condition wtext wx wy x y = wx == x && y >= wy && y < wy + length wtext
        charValue wtext wx wy x y = wtext !! (y-wy) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T04:41:43.547

Satvik，感谢您的回答，这让我沿着正确的思路思考。我按照您的建议分离了条件和转换函数，然后意识到转换数据而不是函数会更简单，并将所有内容放回列表理解中以提高可读性：

```
letterAt :: [Word] -> Int -> Int -> Maybe Char 
letterAt wrds x y = listToMaybe 
  [wtext !! x' | Word wx wy wtext sens <- wrds,   
                 let (x', y') = case sens of 
                       Across -> (x - wx, y - wy) 
                       Down   -> (y - wy, x - wx), 
                 y' == 0, x' >= 0, x' < length wtext ] 
```

您指出在这种情况下最好使用 Data.find .. 这是为了可读性还是效率？我猜是因为列表在 Haskell 中是惰性的，所以上面的代码会在列表理解中的第一项被评估后停止，对吗？

# vim - vim：无法点击超过 90 列

> ID：12438166
> 
> 赞同：0
> 
> 时间：2012-09-15T14:22:42.197
> 
> 标签：vim, mouse

由于我对 vim 很陌生，我（仍然）发现鼠标在单击某处（快速移动）和选择文本块时非常有用。

在我的 vimrc 中： `set mouse=a`

并且 `set textwidth=80` `set colorcolumn=80`

我可以点击移动光标，**但不能在 91 列之后**。我真的不明白为什么会出现这种行为以及为什么会出现这种任意限制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T16:02:02.283

您将文档的有效宽度限制为 80 列。难怪在这个任意限制之外点击——你选择——什么都不做。

为了能够单击任意位置，您必须

```
:set virtualedit=all 
```

但是，如果您对内容设置严格的物理限制，则没有多大意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-31T05:39:42.790

您可以尝试将vim的fileencoding和encoding设置为相同的值，

```
set fileencoding=utf-8
set encoding=utf-8 
```

并确保您的语言环境也具有相同的值。

您可以使用“locale”命令在终端中获取您自己的语言环境。

# objective-c - 有没有办法为许多 UIimageViews 设置相同的图像？

> ID：12438169
> 
> 赞同：0
> 
> 时间：2012-09-15T14:23:14.063
> 
> 标签：objective-c, uiimageview

我正在使用一个图像重的 iOS 应用程序，我发现自己一次又一次地输入几乎相同的行：

```
...
A016.image = [UIImage imageNamed:img21];
A017.image = [UIImage imageNamed:img21];
A018.image = [UIImage imageNamed:img21];
... 
```

现在我问你：有没有办法可以将 UIImageViews 名称存储在数组或其他东西中？只是为了美化我非常丑陋的代码。/约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T14:37:44.263

当然，您可以简化类似的事情。但目前还不完全清楚上下文到底是什么。

如果你有一个数组中的所有图像视图，你可以做这样的事情。

```
// Assume an NSArray called imageViews exists with all the UIImageView instances in it.
for (UIImageView *imageView in imageViews) {
    imageView.image = [UIImage imageNamed:img21];
} 
```

如果您的图像视图尚未在数组中并且实际上称为 A016、A017 等，那么我建议您更改代码设计。这样的事情从来都不是一个好主意。它导致糟糕的、难以维护的代码。如果这是某种图像表，请首先尝试将图像视图放在一个数组中。

话虽如此，有一些方法可以将这样的变量放入数组中。如果它们被声明为 @properties 或 ivars，你可以做这样的事情。

```
NSMutableArray *imageViews = [NSMutableArray arrayWithCapacity:20];
for (int i = 0; i < 20; i++) {
    NSString *variableName = [NSString stringWithFormat:@"A0%d", i];
    UIImageView *imageView = [self valueForKey:variableName];
    [imageViews addObject:imageView];
} 
```

之后，您可以将数组保存为 ivar 并执行与上述相同的操作。

一个更硬编码的版本是自己简单地将图像视图放入一个数组中：

```
NSArray *imageViews = [NSArray arrayWithObjects:..., A016, A017, A018,..., nil]; 
```

但**我真的建议不要使用这样的索引变量名。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T14:36:48.477

是的，您可以将 UIImageViews 放在一个数组中，然后将它放在一个 for 中。

```
UIImageView * imageView1;
UIImageView * imageView2;
UIImageView * imageView3;
NSArray * imageViewsArray = [NSArray arrayWithObjects:imageView1,imageView2,imageView3,nil];

for (UIImageView * currentImageView in imageViewsArray) {

     currentImageView.image = [UIImage imageNamed:img21];

} 
```

# javascript - 在全局范围内查找 JavaScript 函数

> ID：12438175
> 
> 赞同：2
> 
> 时间：2012-09-15T14:24:32.643
> 
> 标签：javascript, dom, firebug, google-chrome-devtools

有没有办法在当前活动的对象模型中搜索 JavaScript 属性（例如命名函数）（Firebug 在“DOM”选项卡上显示的内容，我在 Chrome 开发人员工具中找不到直接等效项）加载页面，使用主要浏览器的通用开发工具？

一个例子是，我搜索“beta”，开发人员工具向我显示了类似的`window.alpha.beta`内容，这意味着某个脚本文件在窗口对象上创建了一个名为“alpha”的对象，该对象具有属性 beta。

我明确*不想*在所有脚本文件中搜索字符串（例如`Ctrl-Shift-F`在**Chrome 开发者工具**中）。

用例是我想从扩展/用户脚本调用页面的功能。我知道该函数存在，但它是使用复杂的框架创建的，我不知道它在页面的对象模型中的哪个位置结束。

PS：欢迎对该问题进行与术语相关的编辑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T14:44:17.253

加载[https://github.com/angus-c/waldo](https://github.com/angus-c/waldo)并从控制台使用它看起来应该可以解决问题。稍微复杂一点，但也与工具无关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T15:58:16.963

我把评论中提到的递归类型函数写成了匿名函数

```
(function(searchTerm, parent, parentStr, depthLeft, parentsArr){
    var p = parent || window,
        child, cObj = null,
        s = parentStr || '',
        r = [],
        d = (depthLeft > 0 ? depthLeft-1 : 5),
        pArr = parentsArr || [p];
    for( child in p ){
        cObj = p[child];
        if ( child === searchTerm ) r[ r.length ] = (s+'.'+child).slice(1);
        if( d > 0 && cObj !== null && p.hasOwnProperty(child) && typeof cObj === 'object' && cObj !== p && pArr.indexOf(cObj) === -1 )
            r = r.concat( arguments.callee( searchTerm, cObj, s+'.'+child, d, pArr.concat([cObj]) ) );
    }
    return r;
})('createElement'); 
```

`.createElement`最后一行表示将从开始搜索`window`。你走得越深，需要的时间就越长。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-24T00:06:55.697

如果该函数是全局的，您可以使用**[此构造函数](http://userscripts.org/scripts/show/424006)**从用户脚本调用它：

```
var global = new Global(); // Initialize the Global constructor
// Some code
var globalVar = global.get('variableName'); // Assign the global variable 'variableName' to the local variable 'globalVar' 
```

因为不能从全局范围调用闭包，所以您必须使用字符串搜索来获取其中的任何一个（据我所知）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-15T14:35:21.590

我能想到的唯一方法是**解析你的脚本**并使用**正则表达式**来避免字符串和其他你可能不想要的情况。

# php - 构建 REST API 时如何在 CakePHP 中管理会话启动？

> ID：12438178
> 
> 赞同：5
> 
> 时间：2012-09-15T14:24:47.397
> 
> 标签：php, cakephp

我之前读过这篇文章： [一般将管理员和网络应用程序分成两个实体](https://stackoverflow.com/questions/8274867/generally-splitting-admin-and-web-app-into-two-entities)

基本上它的要点是我们可以将事物的 api 端和事物的 Web 前端结合在一个 cakephp 应用程序中。但是，正如您所知，REST 是无状态的，没有理由期望客户端保留 cookie 或类似的东西。你们知道CakePHP 中session_start 函数究竟是什么时候触发的吗？当我的 API 端点被命中时，我真的想避免运行 session_start。但是，当我的常规网络前沿受到打击时，我需要开始会话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:16:11.710

对于 cake v2+，一般不要**执行**以下任何操作：

*   调用 CakeSession
*   加载会话组件或使用会话助手
*   从布局中删除 $this->session->flash()
*   不要使用身份验证组件

如果您仍在启动会话（可以通过在响应标头中获取 cookie 来判断），那么很容易追踪谁正在启动会话。只需`lib/Cake/Model/Datasource/CakeSession.php`在`start()`方法中添加以下行：

```
public static function start() {
  debug_print_backtrace();
  exit();
  ...
} 
```

提出请求，您将看到谁是罪魁祸首的调用堆栈:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T08:09:09.970

`session_start()`被触发`CORE\Cake\Model\Datasource\CakeSession.php`。如果您不想触发 session_start()，请确保不要在控制器中包含会话组件或助手。另外，请务必不要调用 session 或使用 Auth 组件，因为它`session_start()`在某些情况下也会自动触发。

# ios - App Store截图自动滚动效果

> ID：12438181
> 
> 赞同：-2
> 
> 时间：2012-09-15T14:25:34.733
> 
> 标签：ios

在 Appstore 屏幕截图部分，只是想知道当用户开始水平分页屏幕截图时，Apple 如何实现自动在屏幕截图边缘向下滚动的方式？

他们用动画了吗？你会怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T14:31:52.217

他们可能使用 UIScrollView 方法：

```
- (void)scrollRectToVisible:(CGRect)rect animated:(BOOL)animated 
```

或 UIScrollView 方法：

```
- (void)setContentOffset:(CGPoint)contentOffset animated:(BOOL)animated 
```

当水平滚动视图的委托方法

```
- (void)scrollViewWillBeginDragging:(UIScrollView *)scrollView 
```

被调用，找出你想要的矩形或点，然后执行：

```
[theVerticalScrollView scrollRectToVisible:theRectYouWant animated:YES]; 
```

或者

```
[theVerticalScrollView setContentOffset:thePointYouWant animated:YES]; 
```

# c# - WCF 客户端包装器

> ID：12438182
> 
> 赞同：2
> 
> 时间：2012-09-15T14:25:35.920
> 
> 标签：c#, wcf, client, wrapper

我有一个服务，我需要与它通信，所以我开始调查 WCF。我将服务设置为侦听并创建了一个客户端。所有的通信工作正常。

该服务将被多个客户使用。与其让他们设置客户端并通过 WCF 学习曲线，我想我只是包装客户端并隐藏所有 WCF 实现。我发现为了让它工作，他们仍然必须在他们的 app.config 文件中包含带有端点信息的服务模型。

有没有办法完全隐藏服务模型信息？我希望他们简单地引用我的 dll 并开始调用。除了我的客户之外，图书馆似乎没有必要了解端点信息。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T15:20:25.190

您可以以编程方式而不是通过配置创建端点，如此 SO 问题的答案中所示的示例：[如何以编程方式添加 WCF 客户端端点？](https://stackoverflow.com/questions/6118221/how-do-i-add-wcf-client-endpoints-programmatically)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T15:22:56.270

如果您不想在 Web 配置中包含 wcf 客户端设置，则需要使用代码创建设置。以下是如何在没有 web.config 的情况下为 wcf 客户端（在本例中使用 BasicHttpBinding）创建实例的示例代码：

```
 BasicHttpBinding binding = new BasicHttpBinding(); 
    EndpointAddress address = new EndpointAddress("http://someServer/DemoWcfService");         
    TestServiceClient client = new TestServiceClient(binding, address) 
```

但我建议您继续使用 web.config wcf 客户端配置，因为它很容易重新配置。

# c# - 网址 asp.net 中的用户名

> ID：12438184
> 
> 赞同：1
> 
> 时间：2012-09-15T14:25:38.303
> 
> 标签：c#, asp.net, sql, sql-server-2008

我即将开始我的新项目，但遇到了架构问题。我希望每个用户都有自己的个人资料链接。

像这样：本地主机/用户/MyRandomUserName

所以当我要点击链接时，我必须在数据库中找到 MyRandomUser，并用用户的实际 Guid 替换字符串。

网站将有可能使用 facebook 和 gmail 帐户登录（以便更容易访问网页），因此可能会出现相同名称的重复。

问题是，将用户名作为“id”放在 url 中有多聪明？

我可以在 youtube 上看到类似的东西，但它是如何工作的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T14:29:00.210

```
Website will have possibility to log on with facebook and gmail accounts 
```

您将拥有 gmail 的 id，用于登录的 facebook 应该是唯一的，并且您将要求用户为您的网站提供一个唯一的名称，该名称用作 url，如果他没有，那么您可以显示 GUID 而不是名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T14:28:27.940

您可以使用asp.net 路由。阅读这篇文章了解更多详情：

[http://msdn.microsoft.com/en-us/library/cc668201(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/cc668201(v=vs.100).aspx)

您可以使用不是 userId 的唯一 id 扩展用户配置文件，然后使用它。

# java - 在 ubuntu 中使用 Eclipse 的 Java 的 JNI

> ID：12438189
> 
> 赞同：1
> 
> 时间：2012-09-15T14:26:46.620
> 
> 标签：java, ubuntu, java-native-interface

谁能帮我找到在 ubuntu 平台上使用 eclipse 创建 JNI 应用程序的教程？

我正在寻找适用于 windows 平台的教程，但不适用于 Ubuntu 或 Linux 系统。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T14:55:46.970

看[JNA](http://today.java.net/article/2009/12/20/simplify-native-code-access-jna)。这更容易。不需要样板或生成的胶水代码。

# asp.net-mvc - SubmitChanges 并不总是更新数据库

> ID：12438194
> 
> 赞同：1
> 
> 时间：2012-09-15T14:27:21.237
> 
> 标签：asp.net-mvc, linq-to-sql, sql-server-2008-r2

我正在使用带有 LINQ-to-SQL 和 SQL Server 2008 R2 的 ASP.NET MVC 4 (.NET framework 4.5)

如果我通过调试模式运行这个函数，它总是返回 true，但是当我在没有调试的情况下运行它时，它返回 false。我曾经遇到过这个错误：http: [//i.imgur.com/HydhT.png](http://i.imgur.com/HydhT.png)

我试着用谷歌搜索，出现了一些类似的问题，但我都检查了：

*   UserProfiles 表有一个主键
*   数据上下文与数据库同步
*   我尝试将**ConflictMode.ContinueOnConflict**作为参数放入 SubmitChanges()
*   我试图将 LINQ 设计器中的 facebookID 放在上面：**UpdateCheck=UpdateCheck.Never**

没有任何效果。我以前从未经历过这样的事情。有谁有想法吗？

**代码：**

*SQL Server 中的 facebookID 字段为 varchar(50) NULL，默认值为 NULL*

```
public static bool changeFacebookIDByEmail(string email, string facebookID)
{
    UserProfile profile = (from s in _dc.Users
                           join u in _dc.Memberships on s.UserId equals u.UserId
                           join i in _dc.UserProfiles on u.UserId equals i.userID
                           where u.Email == email
                           select i).SingleOrDefault();

    profile.facebookID = facebookID;

    ChangeSet cs = _dc.GetChangeSet();

    _dc.SubmitChanges();

    if (cs.Updates.Count <= 0)
        return false;
    else
        return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T11:37:16.017

您似乎正在执行手动 SQL 语句：

```
UPDATE UserProfiles SET facebookID = NULL WHERE userID = '85A6D951-15C8-4892-B17D-BD93F3D0ACBB' 
```

这会将 设置`facebookID`为空。但是，实体框架不知道这一点。它无法解释原始 SQL。所以它仍然认为`facebookID`设置为某个值。`changeFacebookIDByEmail`当您稍后在EF中将其设置为该值时，认为没有任何改变。

所以你可能不应该执行原始 SQL 字符串。使用 EF 将值更改为 null。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T22:23:14.713

将 .singleordefault 更改为 .single 我认为您的问题很快就会被发现。

基本上，您的查询找到的任何内容都在数据上下文中。任何新的东西（例如默认值）都不会。

您需要重写您的例程以在未找到新用户的情况下插入新用户。

**编辑**

这是我一直在做的一个项目的一些代码。我已经剪掉了一堆东西来演示它应该如何工作。

```
// add the identity as necessary
var found = dB.Identities.SingleOrDefault(q => q.UserName == userName);

if (found == null)
{
    found = new Identity
    {
        Domain = domain,
        Password = User.Identity.AuthenticationType,
        Salt = "",
        UserName = userName,
        LastUpdatedDateTime = DateTime.Now
    };

    dB.Identities.InsertOnSubmit(found);
}

dB.SubmitChanges(null); 
```

# emacs - 在 emacs 上，我无法跳转到 GTAGS SELECT 缓冲区中的标签

> ID：12438202
> 
> 赞同：3
> 
> 时间：2012-09-15T14:28:46.483
> 
> 标签：emacs, gnu-global

在 emacs 上，我无法跳转到 GTAGS SELECT 缓冲区中的标签。`"Buffer is read-only: <buffer *GTAGS SELECT*>"`按回车时出现错误。

*   Mac OS X 10.8.1
*   Emacs 24.2
*   gtags GNU GLOBAL 6.2.4（由自制软件安装）
*   gtags.el 3.3（由 package.el 安装）

`"C-h k <return>"`在 GTAGS SELECT 缓冲区中显示以下消息：

```
RET (translated from <return>) runs the command newline, which is an
interactive compiled Lisp function in `simple.el'.

It is bound to RET.

(newline &optional ARG)

Insert a newline, and move to left margin of the new line if it's blank.
If `use-hard-newlines' is non-nil, the newline is marked with the
text-property `hard'.
With ARG, insert that many newlines.
Call `auto-fill-function' if the current column number is greater
than the value of `fill-column' and ARG is nil. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T06:10:16.527

我不使用 GNU global，但是快速的谷歌搜索提示将 gtags.el 降级到旧版本可能会有所帮助： [http ://lists.gnu.org/archive/html/help-global/2011-12/msg00003 .html](http://lists.gnu.org/archive/html/help-global/2011-12/msg00003.html)

* * *

编辑：（不能在第一篇文章中添加评论，所以在这里编辑）

正如 Arne 所说，由于某种原因，RET 键没有正确绑定。对于 gtags-select-mode RET 应该绑定到 (gtags-select-tag) 。

# php - 从 CakePHP 2 为 Ext-JS 4 改进/编辑 JSON

> ID：12438205
> 
> 赞同：1
> 
> 时间：2012-09-15T14:29:06.587
> 
> 标签：php, json, cakephp, extjs

好的，伙计们，我从 CakePHP 得到了这个：

```
array(
    (int) 0 => array(
        'Worker' => array(
            'id' => '1',
            'username' => 'davorlozic',
            'first_name' => 'Davor',
            'last_name' => 'Lozic',
            'active' => true,
            'created' => '2012-05-12 10:39:05',
            'modified' => '2012-05-12 10:39:05'
        )
    ),
    (int) 1 => array(
        'Worker' => array(
            'id' => '2',
            'username' => 'markomarkovic',
            'first_name' => 'Marko',
            'last_name' => 'Markovic',
            'active' => true,
            'created' => '2012-05-12 10:39:20',
            'modified' => '2012-05-12 10:39:20'
        ) 
```

所以，当我用 JSON_ENCODE 对其进行编码时，我得到了这个：

![在此处输入图像描述](../Images/57205bf252f3078e5ea72844b5cd0a50.png)

但我需要得到这个：如何？（这个形状，不是这些数据）

```
{
    "success": true,
    "Workers": [
        {"id": 1, "name": 'Ed',    "email": "ed@sencha.com"},
        {"id": 2, "name": 'Tommy', "email": "tommy@sencha.com"}
    ]
} 
```

我可以用 FIRST 数组做点什么吗？有什么变态还是什么？谢谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T08:11:27.173

您当前的问题是**CakePHP**和**ExtJS**对读取请求使用不同的数据结构。稍后您可能会发现还有更多问题，而且可能会变得非常棘手。我有很多**CakePHP**和**ExtJS**项目总是面临这些问题，必须为每个请求类型和控制器创建自定义**json**视图也很烦人。

这就是为什么我开始与一些大学**Bancha**一起开始，它为你自动化所有这些事情。最好的地方是从[banchaproject.org](http://banchaproject.org)开始并查看示例和文档。

如有任何问题，请随时写信至**support@banchaproject.org**

最好的问候罗兰

# c# - 自签名 Win32 DLL 验证来自 C# 的签名

> ID：12438206
> 
> 赞同：2
> 
> 时间：2012-09-15T14:29:16.647
> 
> 标签：c#, winapi, dll, verify, self-signed

我有一个合作伙伴，他有一个使用 linux openssl 工具生成的私钥+公钥。他使用 windows signtool.exe 实用程序对他的 win32 dll 进行数字（自我）签名。在我的 C# 程序中，我必须检查给定的 win32 dll 是否由他签名。我拥有的是 DLL，他的公钥是一个字符串（也许我可以得到他的证书文件）。我不太擅长它在现实中的工作方式。我是否应该将此 .cert 文件添加到受信任的证书存储中，并像[如何检查文件是否在 C# 中签名一样正常检查？](https://stackoverflow.com/questions/6596327/how-to-check-if-a-file-is-signed-in-c)或者我应该改变什么？我无法真正理解“wintrust_action_generic_verify_v2”guid 的用途，以及无论如何存在哪些不同的检查。我应该编写一个新的验证链，还是使用其他策略？请帮我一些建议...

# android - 如何将项目与列标题同等对齐

> ID：12438207
> 
> 赞同：1
> 
> 时间：2012-09-15T14:29:22.880
> 
> 标签：android

如何将内容与其列标题对齐，我这里有下面的示例

姓名-----------------号码-----------------年龄

严 1232312 25

这是我查看 sqlite 数据库的 xml 代码

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <TableLayout
       android:id="@+id/table"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <TableRow>

            <TextView
                android:layout_width="fill_parent"
                android:layout_weight="1"
                android:layout_height="fill_parent"
                android:text="Name" >
            </TextView>

            <TextView
           android:id="@+id/Hot"
                android:layout_width="fill_parent"
                   android:layout_weight="1"
                android:layout_height="fill_parent"
                android:text="Number" >
            </TextView>
        </TableRow>

          </TableLayout>
  <TextView
                android:id="@+id/tvSqlInfo"
                android:layout_width="fill_parent"
                android:layout_weight="1"
                android:layout_height="fill_parent"
                android:text="Name" >
            </TextView>

        />

</LinearLayout> 
```

这个是我的Activityclass来查看xml，你能教我把tablelayout参数放在哪里吗谢谢

```
 `public class SQLView extends Activity {
    TextView tv;
        @Override
        protected void onCreate(Bundle savedInstanceState) {
            // TODO Auto-generated method stub
            super.onCreate(savedInstanceState);
            setContentView(R.layout.sqlview);
    TableLayout table = (TableLayout) findViewById(R.id.table);
    TableRow row= new TableRow(this);
    TextView text = new TextView(this);
    row.addView(text);
    table.addView(row);

            TableLayout.LayoutParams l = 
                new TableLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);
    l.weight = 1;

         tv= (TextView)findViewById(R.id.tvSqlInfo);
            HotorNot info = new HotorNot(this);
            info.open();
            String data = info.getData();
            info.close();
            tv.setText(data);

here is my database class

    public class HotorNot {

        public static final String KEY_ROWID= "_id";
        public static final String KEY_NAME= "Person_Names";
        public static final String KEY_HOT= "personHOT";

        private static final String DATABASE_name= "HotorNotdb";
        private static final String DATABASE_TABLE= "PeopleTable";
        private static final int DATABASE_VERSION= 1;

        private DbHelper ourHelper;
        private final Context ourContext;
        private SQLiteDatabase ourDatabase;

        public static class DbHelper extends SQLiteOpenHelper{

            public DbHelper(Context context) {
                super(context, DATABASE_name, null, DATABASE_VERSION);
                // TODO Auto-generated constructor stub
            }

            @Override
            public void onCreate(SQLiteDatabase db) {
                // TODO Auto-generated method stub

                db.execSQL("CREATE TABLE " + DATABASE_TABLE + " (" + 
                        KEY_ROWID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +    
                        KEY_NAME + " TEXT NOT NULL, " +
                        KEY_HOT + " TEXT NOT NULL);"

                );
            }

            @Override
            public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
                // TODO Auto-generated method stub
                db.execSQL("DROP TABLES IF EXIST" + DATABASE_TABLE);
                onCreate(db);
            }

        }
        public HotorNot(Context c){
            ourContext = c;

        }
        public HotorNot open() throws SQLException {
            ourHelper = new DbHelper(ourContext);
            ourDatabase = ourHelper.getWritableDatabase();
            return this;
        }

        public void close(){
            ourHelper.close();
        }
        public long createEntry(String name, String hotness) {
            // TODO Auto-generated method stub
            ContentValues cv = new ContentValues();
            cv.put(KEY_NAME, name);
            cv.put(KEY_HOT, hotness);
        return  ourDatabase.insert(DATABASE_TABLE, null, cv);

        }
        public String getData() {
            // TODO Auto-generated method stub
            String[] columns = new String []{ KEY_ROWID, KEY_NAME, KEY_HOT};
            Cursor c = ourDatabase.query(DATABASE_TABLE, columns, null, null, null, null, null);
            String results = "";

            int iRow = c.getColumnIndex(KEY_ROWID);
            int iName = c.getColumnIndex(KEY_NAME);
            int iHotness = c.getColumnIndex(KEY_HOT);

            for (c.moveToFirst(); !c.isAfterLast();c.moveToNext()){
                results = results  + c.getString(iRow) + " " + c.getString(iHotness) + " " + c.getString(iName)+"\n";

            }

            return results;

        }
        public String getName(long l) {
            // TODO Auto-generated method stub
            String[] columns= new String []{KEY_ROWID, KEY_NAME,KEY_HOT};
            Cursor c = ourDatabase.query(DATABASE_TABLE, columns, KEY_ROWID + "_" + l, null, null, null, null);
            if (c != null ){

                c.moveToFirst();
                String name = c.getString(1);
                return name;
            }

            return null;
        }
        public String getHotness(long l) {
            // TODO Auto-generated method stub
            String[] columns= new String []{KEY_ROWID, KEY_NAME,KEY_HOT};
            Cursor c = ourDatabase.query(DATABASE_TABLE, columns, KEY_ROWID + "=" + l, null, null, null, null);
            if (c != null ){

                c.moveToFirst();
                String hotness = c.getString(2);
                return hotness;
            }
            return null;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-05T20:54:50.820

我有同样的问题，当我用谷歌搜索时找不到简单的答案。

这是我的代码，它来自我正在开发的游戏，它只有两列，但可以轻松添加更多列。行按最高分排序。

这是您看到高分的活动：

```
 public class Highscore extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.highscore);
        TextView tvname = (TextView) findViewById(R.id.tvName);
        TextView tvscore = (TextView) findViewById(R.id.tvScore);
        SQLScore info = new SQLScore(this);
        info.open();
        String name = info.getName();
        String score = info.getScore();
        info.close();
        tvname.setText(name);
        tvscore.setText(score);
        }
} 
```

这是它的 XML：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <TableLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:stretchColumns="*" >

        <TableRow>

            <TextView
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:text="Name" />

            <TextView
                android:id="@+id/textView2"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:text="Score" />
        </TableRow>

        <TableRow>

            <TextView
                android:id="@+id/tvName"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:text="Name" />

            <TextView
                android:id="@+id/tvScore"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:text="Score" />
        </TableRow>
    </TableLayout>

</LinearLayout> 
```

最后，我的 SQL 处理程序文件中的方法：

```
public String getName() {
    // TODO Auto-generated method stub
    String[] columns = new String[]{ KEY_ROWID, KEY_NAME, KEY_SCORE};
    Cursor c = ourDatabase.query(DATABASE_TABLE, columns, null, null, null,     null, KEY_SCORE + " DESC", "10");
    String result = "";

    int iName = c.getColumnIndex(KEY_NAME);

    for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()){
        result = result + c.getString(iName) + "\n";
    }

    return result;
}

public String getScore() {
    // TODO Auto-generated method stub
    String[] columns = new String[]{ KEY_ROWID, KEY_NAME, KEY_SCORE};
    Cursor c = ourDatabase.query(DATABASE_TABLE, columns, null, null, null, null, KEY_SCORE + " DESC", "10");
    String result = "";

    int iScore = c.getColumnIndex(KEY_SCORE);

    for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()){
        result = result + c.getString(iScore) + "\n";
    }

    return result;
} 
```

基本上，您正在获取行，但您需要一种方法从每一行中的每一列返回数据。我对android编程很陌生，所以我的解决方案可能并不完美，但这至少对我有用。

# c# - iso-8859-1 字符串到 Unicode 字符串

> ID：12438208
> 
> 赞同：0
> 
> 时间：2012-09-15T14:29:48.503
> 
> 标签：c#, unicode

我用这行代码得到页面的html源代码

```
WebClient client = new WebClient();
string sPage = client.DownloadString(url); 
```

页面代码包是iso-8859-1

但在 html 源代码中存在如下所示的 unicode 字符串

```
<span title="&#1590;&#1575;&#1601;&#1607;" 
```

如何在 c# 中将此代码转换为 Unicode 字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T14:37:23.010

```
 string s = HttpUtility.HtmlDecode(@"<span title=""&#1590;&#1575;&#1601;&#1607;"); 
```

# android - 处理android通知中的按钮

> ID：12438209
> 
> 赞同：15
> 
> 时间：2012-09-15T14:30:01.133
> 
> 标签：android, button, notifications, status

我在通知中添加了一个按钮

![](../Images/1ebf9dda4f6e999039051d2059461b26.png)

但我不知道如何让它在点击时调用一个函数。

我尝试了这样的方法[https://code.google.com/p/languagepickerwidget/source/browse/trunk/trunk/src/org/gnvo/langpicker/LangPicker.java](https://code.google.com/p/languagepickerwidget/source/browse/trunk/trunk/src/org/gnvo/langpicker/LangPicker.java)因为它也在使用 RemoteViews 对象但是什么时候没有发生我点击按钮。

这是我目前拥有的：

```
private void createNotification(){
    String ns = Context.NOTIFICATION_SERVICE;
    NotificationManager notificationManager = (NotificationManager) getSystemService(ns);

    Notification notification = new Notification(R.drawable.ic_launcher, null, System.currentTimeMillis());
    RemoteViews notificationView = new RemoteViews(getPackageName(), R.layout.notification_switch);

    //the intent that is started when the notification is clicked (works)
    Intent notificationIntent = new Intent(this, SettingsActivity.class);
    PendingIntent pendingNotificationIntent = PendingIntent.getActivity(this, 0, notificationIntent, 0);

    notification.contentView = notificationView;
    notification.contentIntent = pendingNotificationIntent;
    notification.flags |= Notification.FLAG_NO_CLEAR;

    //this is the intent that is supposed to be called when the button is clicked
    Intent switchIntent = new Intent(this, switchButtonListener.class);
    PendingIntent pendingSwitchIntent = PendingIntent.getBroadcast(this, 0, switchIntent, 0);

    notificationView.setOnClickPendingIntent(R.id.buttonswitch, pendingSwitchIntent);

    notificationManager.notify(1, notification);
}

public static class switchButtonListener extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        Log.d("TAG", "test");
    }

} 
```

我可以使用按钮启动一个活动，但我没有成功让它调用一个简单的函数。最好的方法是什么？

**编辑：** 我发现我必须在 AndroidManifest.xml 中注册“switchButtonListener”

```
<receiver android:name="SettingsActivity$switchButtonListener" /> 
```

来源：[没有 GUI 的 Android Activity](https://stackoverflow.com/questions/526074/android-activity-with-no-gui)

现在可以了。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-16T21:51:00.830

我发现我必须在 AndroidManifest.xml 中注册“switchButtonListener”

```
<receiver android:name="SettingsActivity$switchButtonListener" /> 
```

来源：[没有 GUI 的 Android Activity](https://stackoverflow.com/questions/526074/android-activity-with-no-gui)

* * *

后来我发现我也可以使用这样的代码来实现同样的事情，而无需修改清单。

```
switchButtonListener = new SwitchButtonListener();
registerReceiver(switchButtonListener, new IntentFilter(SWITCH_EVENT)); 
```

.

```
public class switchButtonListener extends BroadcastReceiver {
@Override
    public void onReceive(Context context, Intent intent) {
        Log.d("TAG", "test");
    }

} 
```

.

```
Intent switchIntent = new Intent(LangService.SWITCH_EVENT);
PendingIntent pendingSwitchIntent = PendingIntent.getBroadcast(context, 0, switchIntent, 0);

notificationView.setOnClickPendingIntent(R.id.buttonswitch, pendingSwitchIntent); 
```

请注意，这样我可以在没有静态属性的情况下声明 switchButtonListener 类（如果不是静态的，它会在前面的示例中崩溃）给我更多的灵活性。
不要忘记稍后调用 unregisterReceiver() 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-26T13:08:44.673

在 Kotlin 中，您可以使用匿名类注册接收器。

```
const val STOP_ALARM_ACTION = "STOP_ALARM"

class MainActivity : AppCompatActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        // ...
        registerReceiver(object : BroadcastReceiver() {
            override fun onReceive(p0: Context?, p1: Intent?) {
                stopAlarm();
            }
        }, IntentFilter(STOP_ALARM_ACTION))
    }
    private fun playAlarm() {
        ringtone.stop()
        val stopIntent = Intent(STOP_ALARM_ACTION)
        val stopPendingIntent = PendingIntent.getBroadcast(this, 0, stopIntent, 0)
        val notification = NotificationCompat.Builder(this, "Timer1_ALARM")
                // ...
                .addAction(android.R.drawable.ic_delete, "Stop", stopPendingIntent)
                .build()
        // ...
    }
    private fun stopAlarm() {
        ringtone.stop()
    }
} 
```

# html - 如何捕获在线音频流或获取其 url？

> ID：12438211
> 
> 赞同：0
> 
> 时间：2012-09-15T14:30:24.713
> 
> 标签：html, audio

访问网站时：

[http://www.macmillandictionary.com/dictionary/british/propensity](http://www.macmillandictionary.com/dictionary/british/propensity)

单击“发音”按钮，它将发音该单词。

但我无法从网页的页面源中找到音频文件的 url。

是否可以获取流文件的url？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T14:49:35.433

在第 237 行很容易找到：

[http://www.macmillandictionary.com/media/british/uk_pron/p/pro/prope/propensity_British_English_pronunciation.mp3](http://www.macmillandictionary.com/media/british/uk_pron/p/pro/prope/propensity_British_English_pronunciation.mp3)

但我很确定 Macmillan Publishers Limited 不会喜欢你复制他们的音频文件。他们拥有他们网站的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T14:50:09.577

那个映射到[http://www.macmillandictionary.com/media/british/uk_pron/p/pro/prope/propensity_British_English_pronunciation.mp3](http://www.macmillandictionary.com/media/british/uk_pron/p/pro/prope/propensity_British_English_pronunciation.mp3)。

您可以在您最喜欢的调试器（firebug、chrome 控制台等）的**Network**选项卡下找到它

# php - 您用于进入 PayPal 系统的链接无效。请查看链接并重试

> ID：12438212
> 
> 赞同：3
> 
> 时间：2012-09-15T14:30:28.080
> 
> 标签：php, paypal, paypal-sandbox, paypal-subscriptions

我正在尝试通过沙箱测试贝宝表单，并创建了一个预配置的测试帐户。

但是，当我通过我的贝宝表格并输入密码时，我继续出现此错误：

**“您用于进入支付宝系统的链接无效，请查看链接并重试。”**

我不确定这个错误是什么意思。我删除了我的电子邮件地址，我知道它在下面的示例中显示为 xxxxxxxx@gmail.com。

我的表格如下：

```
<form name "_xclick" action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="post">

SteamID: <input type="text" name="item_number" value="<?php echo $steamid;?>" size="45">
<br> <?php echo $possible;?>
<input type="hidden" name="item_name" value="Seriouspants Donation <?php echo $steamid;?>">
<input type="hidden" name="cmd" value="_xclick-subscriptions">
<input type="hidden" name="no_note" value="1">
<input type="hidden" name="business" value="xxxxxxxx@gmail.com">
<input type="hidden" name="currency_code" value="USD">
<input type="hidden" name="no_shipping" value="1">
<input type="hidden" name="return" value="http://seriouspants.net/customs/paypal/complete.php">
<input type="hidden" name="a3" value="5.00">
<input type="hidden" name="p3" value="1">
<input type="hidden" name="t3" value="M">
<input type="hidden" name="src" value="1">
<input type="hidden" name="sra" value="1">
<br /><br />
<input type="submit" name="Submit" value="Submit">

</form> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T22:22:29.937

用于接收付款的付款电子邮件可能在个人帐户上。将其升级为企业帐户。这对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-18T16:39:06.057

我的问题是我没有检查我的企业帐户。要获取包含测试帐户代码的电子邮件，您需要访问通知 ( [https://developer.paypal.com/developer/notifications/](https://developer.paypal.com/developer/notifications/) )

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-04-10T11:14:56.287

您需要在[https://developer.paypal.com](https://developer.paypal.com)（而不是在 sandbox.paypal.com）中创建单独的 Sandbox 帐户，您可以在其中创建多个带有假余额的测试帐户。

# ruby - 更优雅的方式来编写这个 ActiveRecord 查询？

> ID：12438215
> 
> 赞同：1
> 
> 时间：2012-09-15T14:31:40.917
> 
> 标签：ruby, activerecord

我有以下功能。它有效，但我不喜欢它的外观。

```
# in user.rb
def awarded_requests
  Request.joins('JOIN application ON application.request_id = request.id').where('accepted = true AND application.user_id = ?', self.id)
end 
```

然后我将它重构为显然是一种改进，但可能不是最简单的形式：

```
def awarded_requests
  Request.find(self.applications.accepted.map(&:request_id))
end 
```

这可以进一步简化吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T15:25:29.860

如果你设置了很多关系，你可以通过合并一个范围来过滤掉那些请求。

```
class User
  has_many :applications

  def awarded_requests
    Request.joins(:applications).merge(applications.accepted)
  end
end 
```

请注意，这`applications.accepted`不是记录数组，而是范围。这就是 Active Record 在内部表示 SQL 查询的一部分的方式，因此它可以巧妙地组合其中的一些。

# c - 连续声明的变量的内存地址顺序总是降序吗？

> ID：12438216
> 
> 赞同：6
> 
> 时间：2012-09-15T14:31:47.193
> 
> 标签：c, pointers, pointer-address

为什么返回的指针地址的十六进制值总是按降序排列？例如这里`int a`是之前声明`int d`的，所以它的地址总是大于`d`，并且相同`&b`，`&e`和`&c`，`&f`我想知道这是一个固定的行为还是这个编译器依赖？我正在使用`gcc version 4.4.5 (Ubuntu/Linaro 4.4.4-1`）

```
#include<stdio.h>

int main(void){
    int a=1;
    int d=1;
    char b='a' ;
    char e='a';
    float c=1.0;
    float f=1.0;
    printf("a=%p\nd=%p\nb=%p\ne=%p\nc=%p\nf=%p\n",&a,&d,&b,&e,&c,&f);
   if (&a>&d)
        printf("&a>&d\n");
    else
    {printf("&a<&d");
    }
   if (&a>&d && &b>&e && &c>&f)
       printf("addresses are in descending order");
   else{
       printf("false");
   }

  return 0;

} 
```

**输出：**

```
a=0xbfc6bd98         //a>d
d=0xbfc6bd94         
b=0xbfc6bd9f         //b>e
e=0xbfc6bd9e
c=0xbfc6bd90         //c>f
f=0xbfc6bd8c
&a>&d 
addresses are in descending order 
```

PS：我是c新手

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-15T15:13:08.167

[在Aleph One 的 Smashing The Stack For Fun And Profit](http://insecure.org/stf/smashstack.html)中找到了很好的解释。提取最相关的部分。

* * *

> ```
>  /------------------\  lower
>                          |                  |  memory
>                          |       Text       |  addresses
>                          |                  |
>                          |------------------|
>                          |   (Initialized)  |
>                          |        Data      |
>                          |  (Uninitialized) |
>                          |------------------|
>                          |                  |
>                          |       Stack      |  higher
>                          |                  |  memory
>                          \------------------/  addresses
> 
>                      Fig. 1 Process Memory Regions 
> ```

[...]

> ```
>  The stack consists of logical stack frames that are pushed when calling a
> function and popped when returning.  A stack frame contains the parameters to 
> a function, its local variables, and the data necessary to recover the 
> previous stack frame, including the value of the instruction pointer at the 
> time of the function call.
> 
>    Depending on the implementation the stack will either grow down (towards
> lower memory addresses), or up.  In our examples we'll use a stack that grows
> down.  This is the way the stack grows on many computers including the Intel, 
> Motorola, SPARC and MIPS processors. 
> ```

[...]

> ```
>  Let us see what the stack looks like in a simple example:
> 
> example1.c:
> ------------------------------------------------------------------------------
> void function(int a, int b, int c) {
>    char buffer1[5];
>    char buffer2[10];
> }
> 
> void main() {
>   function(1,2,3);
> }
> ------------------------------------------------------------------------------ 
> ```

[...]

> ```
> With that in mind our stack looks like this when function() is called (each
> space represents a byte):
> 
> bottom of                                                            top of
> memory                                                               memory
>            buffer2       buffer1   sfp   ret   a     b     c
> <------   [            ][        ][    ][    ][    ][    ][    ]
> 
> top of                                                            bottom of
> stack                                                                 stack 
> ```

* * *

如您所见，新的（局部）变量被压入堆栈顶部。根据架构的设计，堆栈会向更高的内存地址或更低的内存地址增长，在您的情况下是后者。

从 C 语言规范的角度来看，随后分配的变量的内存位置顺序是未指定的。因此，这取决于...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-15T14:34:31.123

你不能对此做出任何假设。对于*某些*编译器、*某些*体系结构和*某些*编译器开关，您*可能会*看到这种行为，即局部变量被分配到连续较低的堆栈地址，但优化和其他因素可以改变这种行为。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-15T14:36:03.007

您要比较其地址的变量都是分配在堆栈上的局部变量。现在堆栈增长的方式（向上或向下）取决于架构。看起来在您的情况下，堆栈正在向下增长，因此您看到的地址正在减少。

[更多关于这里](https://stackoverflow.com/questions/1677415/does-stack-grow-upward-or-downward)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T14:35:36.423

很多 ABI 定义了一个向下增长的堆栈。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-15T14:40:33.953

一个粗略和半准确的解释（忽略有关堆栈和堆差异的详细信息）是：您希望最小化内存中静态分配的内容与您需要动态分配的内容的冲突。当你的程序运行时，动态的东西通常会变大。为了最大化分配动态内容的容量，静态内容和动态内容通常分配在内存空间的两端，动态内容向静态内容增长。在您的特定情况下，您的编译器似乎将静态内容加载到内存中，并将动态内容从内存的末尾向内存的开头（在静态内容的方向）增长。

# php - 如何将值传递给 phpmyadmin 数据库？

> ID：12438221
> 
> 赞同：0
> 
> 时间：2012-09-15T14:32:04.337
> 
> 标签：php, iphone, objective-c, xcode, phpmyadmin

如题

这是我的代码

h.文件

```
#define kPostURL @"http://localhost/discuss.php"
#define kName @"name"
#define kMessage @"message"
#define kNum @"num"

@interface TestDisViewController : UIViewController{

IBOutlet UITextField *nameText;
IBOutlet UITextView *messageText;
NSURLConnection *postConnection;

UILabel *bbb;
}

@property(strong, nonatomic)IBOutlet UILabel *bbb;
-(IBAction)post:(id)sender;
@property(weak) NSString *aaa;

@end 
```

* * *

和 m.file

"aaa" 是从另一个视图控制器中分离出来的字符串

```
#import "TestDisViewController.h"
#import "EatDiscussViewController.h"
@implementation TestDisViewController

@synthesize aaa;
@synthesize bbb =bbb;

-(void) postMessage:(NSString*) message Name:(NSString *) name withNum:(NSString *) num{

if (name != nil && message != nil  && num != nil){

    NSMutableString *postString = [NSMutableString stringWithString:kPostURL];
    [postString appendString:[NSString stringWithFormat:@"?%@=%@", kName, name]];
    [postString appendString:[NSString stringWithFormat:@"&%@=%@", kMessage, message]];
    [postString appendString:[NSString stringWithFormat:@"#%@=%@", kNum, num]];
    [postString setString:[postString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:postString]];
    [request setHTTPMethod:@"POST"];
    postConnection = [[NSURLConnection alloc] initWithRequest:request delegate:self startImmediately:YES];

}

- (void)viewDidLoad
{
[super viewDidLoad];
NSLog(@"Taaaaaaaaab:%@",aaa);
self.bbb.text=aaa;
}

}

-(IBAction)post:(id)sender{

[self postMessage:messageText.text Name:nameText.text withNum:bbb.text];
[messageText resignFirstResponder];
messageText.text = nil;
nameText.text = nil;
bbb.text=nil;
[self.navigationController popViewControllerAnimated:YES];

}

@end 
```

* * *

我删除了一些不需要使用的代码~

最后是我的 php.code

* * *

```
@mysql_select_db($database) or die("Error");

$user_name = $_GET["name"];

$commentary = $_GET["message"];

$stores_num = $_GET["num"];

$query = "INSERT INTO comment VALUES ('', '$stores_num' , '$user_name' , '$commentary')";

mysql_query("SET NAMES 'utf8'");

mysql_query($query) or die (mysql_error("error"));

mysql_close(); 
```

* * *

我可以将两个值传递给数据库

但我不能传递三个值............

请帮帮我！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T06:55:21.317

错误：[postString appendString:[NSString stringWithFormat:@"#%@=%@", kNum, num]];

修复：[postString appendString:[NSString stringWithFormat:@"&%@=%@", kNum, num]];

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T14:48:34.637

```
$user_name = $_GET["name"]; 
$commentary = $_GET["message"]; 
$stores_num = $_GET["num"]; 

$query = "INSERT INTO comment VALUES ('', '$stores_num' , '$user_name' , '$commentary')" 
```

如果您未在查询中列出字段，则它们不一定按您期望的顺序添加；尝试显式添加字段名称：

```
$query = "INSERT INTO comment (num, stores_num, user_name, commentary) VALUES ('', '$stores_num' , '$user_name' , '$commentary')" 
```

如果 num 是一个自动增量字段，你甚至不需要它：

```
$query = "INSERT INTO comment (stores_num, user_name, commentary) VALUES ('$stores_num' , '$user_name' , '$commentary')" 
```

**然而**

您正在使用`mysql_*`函数，这些函数已被弃用。您应该考虑迁移到`PDO`or `mysqli_`- 它们都将帮助您编写更安全的代码。

# javascript - Amazon S3 REST API 大小不正确

> ID：12438222
> 
> 赞同：0
> 
> 时间：2012-09-15T14:32:25.697
> 
> 标签：javascript, rest, file-upload, amazon-s3, filereader

我正在尝试实现一个 HTML5 Amazon S3 上传器（通过使用 REST API），并偶然发现了以下问题：当尝试上传一个小的文本文件时，一切都像一个魅力。尝试上传二进制文件时，文件在 S3 上变大，并且显然已损坏。这就是我正在做的事情：

```
// multipart upload init / finish code hidden; if you need it, I'll add it
// file is read by using a file input
var blob = file.slice(start, end);
var reader = new FileReader();
reader.readAsBinaryString(blob);

// in reader.onloadend:
var path = "/" + settings.key;

path += "?partNumber=" + chunk + "&uploadId=" + u.upload_id;
var method = "PUT";
var authorization = "AWS " + settings.access_key + ":" + signature;

var xhr = new XMLHttpRequest();
xhr.open(method, settings.host + path, true);
xhr.setRequestHeader("x-amz-date", date);
xhr.setRequestHeader("Authorization", authorization);

// application/octet-stream used
xhr.setRequestHeader("Content-Type", settings.content_type); 
xhr.send(e.target.result); 
```

另外，我尝试创建一个包含文本的 10mb 文件（1000 万行 0123456789）并且该文件可以正常工作。

如果有人对此问题有解决方案或偶然发现它，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T14:43:07.143

似乎 StackOverflow 也适合自己解决问题——我在完成想法时已经修复了它。该`xhr.send()`方法似乎可以直接接收`file.slice()`blob，因此不需要`FileReader`.

我希望这可以帮助其他偶然发现这个问题的人。

# objective-c - 以编程方式设置 NSWindow 大小

> ID：12438224
> 
> 赞同：23
> 
> 时间：2012-09-15T14:32:37.710
> 
> 标签：objective-c, macos, window, size, nswindow

如何以编程方式设置窗口大小？我在 IB 中有一个窗口，我想在我的代码中设置它的大小以使其更大。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-15T14:59:34.857

用于`-setFrame:display:animate:`最大控制：

```
NSRect frame = [window frame];
frame.size = theSizeYouWant;
[window setFrame: frame display: YES animate: whetherYouWantAnimation]; 
```

请注意，窗口坐标与您可能习惯的坐标不同。在 OS X 的 Quartz/Cocoa 中，矩形的原点位于其左下角。要确保原点保持不变：

```
NSRect frame = [window frame];
frame.origin.y -= frame.size.height; // remove the old height
frame.origin.y += theSizeYouWant.height; // add the new height
frame.size = theSizeYouWant;
// continue as before 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-10-23T00:33:51.583

实际上似乎需要反转 +/- 以防止窗口在屏幕上移动：

```
NSRect frame = [window frame];
frame.origin.y += frame.size.height; // origin.y is top Y coordinate now
frame.origin.y -= theSizeYouWant.height; // new Y coordinate for the origin
frame.size = theSizeYouWant; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-08-15T05:39:54.913

斯威夫特版本

```
var frame = self.view.window?.frame
frame?.size = NSSize(width: 400, height:200)
self.view.window?.setFrame(frame!, display: true) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-15T14:58:19.213

利用[`setFrame:display:animate:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSWindow_Class/Reference/Reference.html#//apple_ref/occ/instm/NSWindow/setFrame%3adisplay%3aanimate%3a)

```
[window setFrame:NSMakeRect(0.f, 0.f, 200.f, 200.f) display:YES animate:YES]; 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-03-13T15:39:50.467

通常我想根据内容的**大小**（不包括标题栏）调整窗口大小：

```
var rect = window.contentRect(forFrameRect: window.frame)
rect.size = myKnownContentSize
let frame = window.frameRect(forContentRect: rect)
window.setFrame(frame, display: true, animate: true) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-13T07:56:00.973

swift 4.x 7 OSX 我的两分钱：

a) 不要调用 viewDidLoad b) 进入主队列... b) 等待一段时间... 例如使用：

```
private final func setSize(){
    if let w = self.view.window{
        var frame = w.frame
        frame.size = NSSize(width: 400, height: 800)
        w.setFrame(frame, display: true, animate: true)

    }
} 
```

# symfony - 带有 Backbone 变量的 Twig 路径

> ID：12438228
> 
> 赞同：0
> 
> 时间：2012-09-15T14:33:04.830
> 
> 标签：symfony, backbone.js, twig, underscore.js, symfony-2.1

我想知道如何在树枝中插入来自 Backbone / Underscore 函数的代码？

这是我的问题：

```
{{path('getArticle', {"id": <%= id %>})}} 
```

我需要更改此变量：`<%= id %>`

这不起作用，因为 Twig Parse 在 Backbone 代码之前。所以我不知道如何给这种类型的变量？

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T09:00:18.460

我想您在服务器端使用 Symfony 以及 TWIG。在这种情况下，您只需将 $id 变量发送到您的 TWIG 模板

```
public function callMyTwigAction($deskId)
{
    $id=whatIwant();
    return array('id' => $id);
} 
```

然后只需调用您的 TWIG 文件：

```
{{path('getArticle', {"id": id})}} 
```

看起来您的客户端模板和服务器模板不匹配。像[Underscore Template](http://underscorejs.org/#template)（或者更确切地说是[Mustache](http://mustache.github.com/)）这样的客户端模板正在将原始 Web 服务数据（JSON 或 XML）转换为 HTML，并且（可能）是用 Javascript 编写的。

服务器端模板通常将业务对象（Java/PHP 类）转换为 HTML，并使用 TWIG 或 Velocity 等引擎。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T19:31:48.997

对于更复杂的架构，我会提出三件事：

*   简化您的架构:) 可能有问题。
*   制作一个 Web 服务来获取给定 id 的路径（但这会使架构更加复杂）
*   在您的 javascript 中使用 Twig 创建一个路径数组。如果文章少于 200 篇并且此页面显示的频率不高，则可能没问题。

你在服务器端使用 TWIG 吗？你使用什么技术栈？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-09T22:51:29.637

使用 FOSJSRoutingBundle。它会生成所有公开的 TWIG 路线的地图，然后您可以在 Javascript 中使用它。

使路由组件全局化，或将其注入下划线模板。然后像在 TWIG 中那样简单地调用它，但使用 JS 表示法：

```
<a href="<%= Routing.generate('getArticle', {'id': id}) %>">Get Article <%= id %></a> 
```

# codeigniter - Codeigniter 中哪个是正确的重定向（'/'）或重定向（''）？

> ID：12438229
> 
> 赞同：0
> 
> 时间：2012-09-15T14:33:19.767
> 
> 标签：codeigniter

两者都在工作，但我问是否有任何区别，或者我可以使用 redirect(); ?

那么从这 3 个变体中，我应该坚持哪一个？

```
redirect('/'); 
```

或者

```
redirect(''); 
```

或者

```
redirect(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T14:41:40.397

如果您查看源代码，您会发现它将给定的 URL 附加到 site_url。

```
function redirect($uri = '', $method = 'location', $http_response_code = 302)
{
    if ( ! preg_match('#^https?://#i', $uri))
    {
        $uri = site_url($uri);
    }

    switch($method)
    {
        case 'refresh'  : header("Refresh:0;url=".$uri);
            break;
        default         : header("Location: ".$uri, TRUE, $http_response_code);
            break;
    }
    exit;
} 
```

所以就像你说的，所有这些选项都有效。但我个人建议使用：

```
redirect('/'); 
```

如果您与多个开发人员一起工作，这对于那些不熟悉 CodeIgniter 的人来说更容易理解，因为大多数开发人员都知道“/”指的是“根目录”。

# sql - 将 UNION 与 Sequel 一起使用

> ID：12438233
> 
> 赞同：5
> 
> 时间：2012-09-15T14:33:48.300
> 
> 标签：sql, ruby, union, sequel

我想定义一个这样的 SQL 命令：

```
SELECT * FROM WOMAN
UNION
SELECT * FROM MEN 
```

我尝试在 Ruby + Sequel 中使用以下代码序列来定义它：

```
require 'sequel'

DB = Sequel::Database.new()
sel = DB[:women].union(DB[:men])
puts sel.sql 
```

结果是（我在结果上做了一些漂亮的打印）：

```
SELECT * FROM (
    SELECT * FROM `women` 
    UNION 
    SELECT * FROM `men`
) AS 't1' 
```

还有一个额外的（多余的？）`SELECT`。

如果我`UNION`在此代码示例中定义多个类似

```
sel = DB[:women].union(DB[:men]).union(DB[:girls]).union(DB[:boys])
puts sel.sql 
```

我得到更多多余的选择。

```
SELECT * FROM (
  SELECT * FROM (
    SELECT * FROM (
      SELECT * FROM `women` 
      UNION 
      SELECT * FROM `men`
    ) AS 't1' 
    UNION 
    SELECT * FROM `girls`
  ) AS 't1' 
  UNION
  SELECT * FROM `boys`
) AS 't1' 
```

到目前为止我没有发现它有任何问题，结果似乎是一样的。

我的问题：

*   是否有额外`select`的 s 的原因（除了后续的内部程序）
*   我可以避免选择吗？
*   我会遇到这个额外选择的问题吗？（任何性能问题？）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-16T15:40:57.210

额外选择的原因是这样的代码可以`DB[:girls].union(DB[:boys]).where(:some_column=>1)`正常运行。[如文档](http://sequel.rubyforge.org/rdoc/classes/Sequel/Dataset.html#method-i-union "documentation")中所述，您可以使用`DB[:girls].union(DB[:boys], :from_self=>false)`它不将其包装在额外的 SELECT 中。

# android - Android Drawables 内存泄漏

> ID：12438235
> 
> 赞同：7
> 
> 时间：2012-09-15T14:33:58.780
> 
> 标签：android, memory-leaks, drawable

我使用了几个大型可绘制对象，但我不知道如何管理内存泄漏。我跟踪了我的应用程序的堆大小，它不会停止增长（作为分配的内存）。

尤其是“字节数组（byte[]）”类型，不断增长，永不减少。（在 Eclipse 的 DDMS 堆视图中）

我的应用程序由一个使用片段的活动组成。这些片段正在显示几个大图像。我尝试将drawables回调设置为null，将drawables设置为null，当我弹出一个片段但堆永远不会减少时，清除我的易失性缓存（这可以防止我的应用程序执行过多的磁盘IO）。

事实上，每次我调用： Drawable.createFromResourceStream(context.getResources(), value, new FileInputStream(f), f.getName(), opts); 堆长大了。我怎样才能释放内存？

谢谢 ！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-15T14:49:32.153

当 Java 在内存中发现您的代码引用的对象时会发生内存泄漏，这会阻止垃圾收集器释放此内存。Android 中的一个常见原因是引用 Activity 上下文而不是 Application 上下文。确保您的上下文引用了应用程序（即使用`getApplicationContext`而不是使用`this`。查看此[视频](http://m.youtube.com/#/watch?v=_CruQY55HOk&desktop_uri=/watch?v=_CruQY55HOk)以获取有关内存泄漏的解释并查看此[问题](https://stackoverflow.com/questions/3720334/android-sqlite-memory-leak)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-10T23:17:17.473

这个问题似乎得到了回答，但 Romain Guy 的帖子似乎与获取更多信息有关：[避免内存泄漏](http://android-developers.blogspot.com/2009/01/avoiding-memory-leaks.html)。

显然，如果您（例如）通过使用 setBackgroundDrawable* 将可绘制对象设置为文本视图的背景图像（从而将可绘制对象附加到视图）然后更改方向（破坏活动并重绘 UI），可绘制对象仍然具有访问旧活动（在旧活动销毁之后），从而造成内存泄漏。

*（作为旁注 - setBackgroundDrawable[自 API 级别 16 以来已被弃用](http://developer.android.com/reference/android/view/View.html#setBackgroundDrawable%28android.graphics.drawable.Drawable%29)）

# javascript - Javascript在使用localStorage重新加载时不保留div id？

> ID：12438237
> 
> 赞同：1
> 
> 时间：2012-09-15T14:34:29.277
> 
> 标签：javascript, jquery, local-storage

我正在尝试创建三个链接，当您单击它们时会显示一个 div。如果您再次单击这些链接，则会显示该链接的另一种类型。例如，如果我有链接`one`，点击它会产生 div `one`。再次点击它会产生 div `one1`。这样，每个元素都有一个唯一的 id，并且可以在以后将自定义样式应用于单个 div。

当用户单击其中一个`a`链接时，它会创建一个 localStorage 键，用于记录单击该类型 div 的次数。例如，如果我单击 div`one`的行`5`时间，localStorage 键将为 5。然后当页面重新加载时，我的脚本将 div 复制到页面上 5 次，并将第 1 部分的计数器设置为 5。这样，当您再次开始单击`a`链接时，它们不是从 1 开始，而是从 5 开始，因此它们不是任何冲突的 ID。

我遇到的问题是删除功能。假设用户重复`5`div `one`。这意味着它们`one1, one2, one3, one4, one5`都出现在屏幕上。如果用户重新加载页面，它们都还在那里。假设用户`div1`从页面中删除。它删除`div1`了所有与之相关的样式，并保留了其他 div 的机智......

**但是**，如果您重新加载页面，脚本会复制 div 的开头`1-4`（因为它们只有 4 个 div 保存到 localStorage 键），而不是复制 from `2-5`、 as`#1`或`div1`，被删除。

我意识到要阅读的内容很多，而且可能很难理解，因此我对其中的代码进行了修改。

[http://jsfiddle.net/charlescarver/bMzME/2/](http://jsfiddle.net/charlescarver/bMzME/2/)

要测试我在说什么，你必须显示一些 div，比如“一个”中的 5 个。您会注意到它们`#one1, #two1, and #three1`都有一个边框，以显示删除它们时会发生什么。当你复制 div 时，`div1`会有边框。如果您删除该 div，则页面上的其他 div 不会受到影响，直到您重新加载页面。重新加载后，您会注意到前者`div2`的 id 已更改为`div1`，而不是保持在`div2`.

有没有办法解决这个问题而不必重写整个脚本？我觉得可能有更快的方法来修复它，但我无法想象。

[PS，如果您阅读了以上所有内容，我真的很感激]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T16:41:54.153

我只是无法让你的代码工作，对不起。

然而，我确实设法大致实现了您所描述的：http: [//jsfiddle.net/bMzME/11/](http://jsfiddle.net/bMzME/11/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T18:13:38.110

我相信其中一个问题是您只是在计算#one、#two、#three 并使用它来动态创建 div ID。

您需要的是一个包含所有存在的数据`i`结构`div{i}`。可能会创建一个列表并将其映射到您的键 #one、#two、#three。然后你得到列表并遍历`$(".base")`for 循环中的元素。

现在，如果您有 5 个 div 并删除了第 5 个，您将拥有 one1、one2、one3、one4。如果现在我插入另一个 div**一个**，你想要 5 还是 6？如果你想在“5”，只需`max()`从你的列表中取出，否则使用一个单独的计数器，如下所示 - 请参阅 var: idx。然后将 idx 添加到您的列表中 - 我没有对列表进行编码。我会尝试我的解决方案，但需要一些时间——并不是所有人都熟悉 JS。但我相信这个想法应该可行。

```
$(".a").click(function() {
    var target = $(this).attr("href");
    var id = $(target).attr("id");
    var x = $("." + id).size();
    var click = $(target).data("clicked") || x;
    var idx = localStorage.getItem(target+"i");
    $(target).data("clicked", ++click);
    if (idx == null) {idx = 1;}
    var name = id + idx;
    alert(name);
    $(target).clone().attr("id", name).attr("class", "drag " + id).appendTo("body");
    localStorage.setItem(target, click);
    localStorage.setItem(target+"i", ++idx);
}); 
```

# iphone - 使用 uigesturerecognizer 时，如何区分新平底锅和第一个平底锅的延续？

> ID：12438245
> 
> 赞同：0
> 
> 时间：2012-09-15T14:35:26.300
> 
> 标签：iphone, ios, ipad, uigesturerecognizer

使用 uigesturerecognizer 时，如何区分新的平移手势和第一个手势的延续？是否有与我可以使用的每个平底锅相关联的唯一 ID？

# css - IE9 png和背景属性

> ID：12438248
> 
> 赞同：0
> 
> 时间：2012-09-15T14:36:08.363
> 
> 标签：css, internet-explorer-9, png

我在这里有一个问题，我正在开发一个在 Firefox 和 chrome 中正常工作的项目。现在我在 IE 中测试。我认为所有关于 IE9 的广告看起来都很棒，或者至少不会破坏任何东西。

我有几个问题：

我使用一些png图像。即使图像正在显示，我上面也有一个小红十字。我真的不明白为什么......你可以在这里看到它：http: [//www.hostingpics.net/viewer.php?id=173809Sanstitre.png](http://www.hostingpics.net/viewer.php?id=173809Sanstitre.png)

在同一张图片中，您可以看到属性 background-repeat : repeat-x 不起作用。有趣的是，一开始它正在工作，当页面完成加载时，它搞砸了一切：[http ://hpics.li/feebab4](http://hpics.li/feebab4)

有谁知道这可能是什么原因？谢谢

编辑：哦，有时 IE9 会在我的图像的内联中添加一些内容，例如：

style="width: 171px; height: 52px; filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='http://localhost/Sites/promenadeSteCatherine/wp-content/themes/promenadeSteCatherine/img/menuGauche/titre_projet1.png' , 尺寸方法='规模');" alt="projet" src="x.gif"

这可能是我在 wordpress 中使用的插件的问题，但我看不到哪个插件，这是我正在使用的插件：高级自定义字段联系人表单 tinyMCE 用户角色编辑器 wp-slidinglogindashboardpanel

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T14:40:57.113

IE9+ 完全支持这两个属性。您是否对 IE6 使用了任何 png“修复”，例如 JavaScript 替换或 DX 过滤器？他们可能互相干扰。

# html - CSS3过渡不影响其他元素？

> ID：12438249
> 
> 赞同：5
> 
> 时间：2012-09-15T14:36:14.757
> 
> 标签：html, css, positioning, css-transitions

是否可以进行不影响附近元素位置的高度过渡？

这种特殊情况涉及带有 float:left 的 div。

演示： [http ://ashleystewart.me/](http://ashleystewart.me/)

我希望悬停过渡位于您可以看到四处移动的元素之上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T18:51:56.333

给容器框相对定位和弹出细节框绝对定位。由于绝对定位元素已从布局中删除，因此不会干扰浮动。

演示：[http ://dabblet.com/gist/3729269](http://dabblet.com/gist/3729269)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T15:04:46.460

恐怕在您遵循的当前布局逻辑中，很难修复。

为什么？因为就像您`floats`在第一行中彼此相邻对齐一样，当上行中的框在 上展开时`:hover`，`float`底行中的 s 也将相对于该框重新定位。

以下是我将如何实现您的想法：

*   不要使用`float`ing，使用类似`display: inline-block;`.
*   您的语义`article`包装器在使用`inline-block;`. 要么摆脱它们（哎呀，可能对 SEO 不友好），或者确保你`overflow: hidden;` 在设计“盒子”时不依赖它们。

对不起，我不能提供更多帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T07:36:37.853

您可以使用`position`属性而不是使用`float`属性，您可以执行以下操作：

```
#idname {
   position:fixed;
   margin-right:100px;
   margin-left:100px;
   margin-top:100px;
   margin-bottom:100px; /* I had written 100px only for example you can adjust it according to your screen */
}

#idname:hover {
   -moz-transtion: /* adjust the setting here for Firefox */;
   -webkit-transition: /* adjust the setting here for chrome and safari */;
   -o-transition: /* adjust the setting here for Opera */;
} 
```

这将允许移动`div`并且其位置将被固定。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T07:49:04.397

您可以通过使用在变换上使用过渡。Transform 将更改元素而不影响布局。你会想用`transform: scaleY()`说你想把某物的高度加倍：

```
transform: scaleY(2);
-webkit-transform: scaleY(2);
-moz-transform: scaleY(2);
-o-transform: scaleY(2); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-19T12:44:15.963

把它`<div>`放在适当的位置。保持外侧的位置：固定，内侧的位置：绝对

或者另一种方法是使外部的最大高度固定，`<div>`内部`<div>`应保持最大变换高度等于外部的高度。这将有助于不让其他人`<div>`对交易产生影响

或者另一种方式是，使用块来显示内容，而不是使用浮动方式

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-04-19T12:32:27.233

您可以使用`position: absolute`代替`position: fixed`，这样当您打开 Web 开发人员工具时 div 不会移动。

# php - 先执行哪个

> ID：12438251
> 
> 赞同：1
> 
> 时间：2012-09-15T14:36:22.930
> 
> 标签：php, javascript, jquery, ajax

我有一个 php 中的 Web 应用程序，我不知道哪个会被称为先处理，

在我的 php 文件中，我还有一个 javascript 代码

`<script> $(document).ready(function(){}); </script>`

在我的 php 代码中，我会将一个数组对象发送到该 javascript 中。所以我想知道为什么首先执行 php 代码而不是 javascript ？这是否意味着所有服务器代码将始终在显示浏览器视图期间客户端脚本运行之前执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T14:38:29.077

首先执行服务器端代码，然后将服务器端生成的输出发送回执行客户端代码的客户端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T14:37:39.023

是的，通常情况下，整个服务器处理在页面交付给浏览器之前完成。此时，JavaScript 开始执行。

您可以使用 AJAX 添加 PHP 代码的延迟执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T14:39:06.243

当然，服务器代码（无论是 PHP、ASP、JSP 等）首先在服务器中运行，它会生成一个包含您的 javascript 代码的 html 页面，您的计算机接收此页面，在浏览器中呈现它并运行 javascript它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-17T14:58:46.370

如果您在单个文件中有 html、php、js，您应该只知道以下两件事：

1）你的文件扩展名必须是.php（因为php执行需要.php扩展名）

2）您将看到与您在文件中键入的顺序完全相同的输出。

```
<html>
<body>
<?php
 echo "i m php upper"."</br>";
?>
<p id="pg">i am html upper</br></p>
<script type="text/javascript">
document.write(" i am javascript upper</br>");
</script>
<?php
 echo "i m php bottem"."</br>";
?>
<script type="text/javascript">
document.write(" i am javascript bottom</br>");
</script>
<p id="pg">i am html bottem</br></p>
</body>
</html> 
```

**...输出看起来像这样...**

我是 php 上层

我是 html 上层

我是 javascript 上层

我是 php bottem

我是javascript底部

我是html bottem

# django - QuerySet 的 where 子句中的多个字段

> ID：12438254
> 
> 赞同：1
> 
> 时间：2012-09-15T14:37:06.200
> 
> 标签：django, django-queryset

在电子商店应用程序中，我有一个用于存储订单处理历史的模型：

```
class OrderStatusHistory(models.Model):
    order = models.ForeignKey(Order, related_name='status_history')
    status = models.IntegerField()
    date = models.DateTimeField(auto_now_add=True) 
```

现在我想获取每个订单的最新状态。在纯 SQL 中，我可以在单个查询中执行此操作：

```
select * from order_orderstatushistory where (order_id, date) in (select order_id, max(date) from order_orderstatushistory group by order_id) 
```

在 Django 中执行此操作的最佳方法是什么？

我有两个选择。第一个是：

```
# Get the most recent status change date for each order
v = Order.objects.annotate(Max('status_history__date')).values_list('id', 'status_history__date__max')

# Get OrderStatusHistory objects
hist = OrderStatusHistory.objects.extra(where=['(order_id, date) IN %s'], params=[tuple(v)]) 
```

第二个：

```
hist = OrderStatusHistory.objects.extra(where=['(order_id, date) IN (select order_id, max(date) from order_orderstatushistory group by order_id)']) 
```

第一个选项是纯 Django，但会导致 2 个数据库查询和从 Django 传递到数据库引擎的大量参数列表。

第二个选项需要将 SQL 代码直接放入我的应用程序中，但我想避免这种情况。

`where (order_id, date) in (select ...)`在 Django 中是否有等价物？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T08:15:03.560

您是否尝试过使用此查询

```
OrderStatusHistory.objects.order_by('order', '-date').distinct('order') 
```

# php - 当我只在 if 条件中放置单个 = 时 PHP 没有显示错误

> ID：12438264
> 
> 赞同：-5
> 
> 时间：2012-09-15T14:38:14.773
> 
> 标签：php, if-statement

我的代码如下：

```
if($_POST['user_id'] = ''){ 
  //some statement;
} 
```

在上述`if`情况下，我只放了 single `=`。PHP 没有显示任何错误，但我得到一个白色的空白页。有没有人有任何线索？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T14:41:54.820

`if($_POST['user_id'] = '')`方法：

`$_POST['user_id']` **变成**'' .. `if ('')`// 总是假的

`if($_POST['user_id'] == '')`方法：

`$_POST['user_id']` **比较** '' ..`if ( comparison)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T14:40:51.577

不确定是拖钓还是真正的问题...

您自己说的，您使用的是单个`=`. 您需要 2 来检查是否相等。

```
if($_POST['user_id'] == ''){ 
  //some statement;
} 
```

当您使用单个等号时，您基本上是“设置`$_POST['user_id']`为`''`，然后测试它是否为`true`)。由于`''`计算结果为`false`，因此您什么也得不到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T14:41:43.207

这个：

```
if($_POST['user_id'] = ''){ 
```

尝试将空字符串分配给`$_POST['user_id']`. 这个：

```
if($_POST['user_id'] == ''){ 
```

是一个比较。您几乎应该总是做第二个 - 第一个覆盖 $_POST 中的值，并返回分配的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T14:52:50.283

**试试看**

用它

```
$user_id = $_POST['user_id'];

if($user_id == ''){ 
  //some statement;
} 
```

插入的

```
if($user_id = ''){ 
  //some statement;
} 
```

**或者尝试另一个**

```
$user_id = $_POST['user_id'];

if(isset($user_id) && !empty($user_id)){ 
  //some statement;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-30T13:54:39.103

它不会触发任何错误，因为它是有效条件。

`if($_POST['user_id'] = '')`

等于

```
$_POST['user_id'] = '';
if($_POST['user_id']){
    //Boolean comparison of a string. Empty = false. Not empty = true.
} 
```

使用示例：

```
function division($var1, $var2){
    if($var2 > 0){
        return $var1/$var2;
    return false;
}

if($result = division(50,2)){
     //It returned 25 which is true!
}

if(!$result = division(50,0)){
    //Returned FALSE because you can't divide by zero!
} 
```

# c++ - 我们应该如何实现与 std::error_code 兼容的 API？

> ID：12438275
> 
> 赞同：6
> 
> 时间：2012-09-15T14:39:39.440
> 
> 标签：c++, error-handling, c++11

假设我们正在编写一个库，并且我们希望提供对错误和异常的细粒度控制：

```
void foo();
void foo(std::error_code&); 
```

如果我们实现`foo()`为抛出 a[`std::system_error`](http://en.cppreference.com/w/cpp/error/system_error)并让`foo(std::error_code&)`捕获所有异常并提取 error_code。

或者我们是否实现`foo(std::error_code&)`了一个永不抛出的函数，并`foo()`根据错误代码的存在抛出一个函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T14:50:04.517

`boost`库与异常一起工作`boost::system::error_code`，所以，我认为你可以定位这个库。例如[boost::asio::basic_stream_socket::connect](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_asio/reference/basic_stream_socket/connect.html)有两个版本

```
void connect(
    const endpoint_type & peer_endpoint); 
```

> boost::system::system_error 失败时抛出。

```
boost::system::error_code connect(
    const endpoint_type & peer_endpoint,
    boost::system::error_code & ec); 
```

> ec 设置以指示发生了什么错误（如果有）。

但这取决于什么`foo`，我也认为。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-09-15T14:42:58.237

更少的异常总是更好，所以你应该使用第二个。

# mysql - 审计 MySQL 中的状态变化

> ID：12438276
> 
> 赞同：0
> 
> 时间：2012-09-15T14:39:58.133
> 
> 标签：mysql, plugins, audit

假设一些传统的 LAMP 风格的应用程序使用 MySQL 作为后端来记录应用程序的“当前持久状态”。

我有兴趣在数据库级别建立转换的“审计” - 并将它们存储为日志。这个想法是 - 假设 MySQL 数据库在一天开始时已被“转储”，则可以针对备份“重放”事务以恢复工作日期间的任何状态......有点像MySQL 的时间机器——我猜。

我找到了一些关于“审计插件”的文档，这些文档看起来很相关，但给我留下的问题多于答案。

[http://dev.mysql.com/doc/refman/5.6/en/writing-audit-plugins.html](http://dev.mysql.com/doc/refman/5.6/en/writing-audit-plugins.html)

本质上，我想确定编写一个 MySQL 插件来实现我的目标是否可行——这样它就可以与现有的 MySQL 应用程序“无缝”工作？

我发现难以确定的主要细节是：当审计插件收到事件通知时，可以建立新数据以记录它的机制是什么？数据类型是如何编码的？例如，使用 mysqldump 针对“全系统备份”编写一个工具来“重播”该审计有多难？

是否有此类插件的现有示例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T14:41:03.563

# php - PHP、mysql内存泄漏

> ID：12438279
> 
> 赞同：3
> 
> 时间：2012-09-15T14:40:10.453
> 
> 标签：php, mysql, memory-leaks, pdo, mysqli

面对一个问题，我在使用数据库时找不到内存泄漏。该脚本从数据库中获取大量数据，因此内存泄漏至关重要。使用 mysqli、mysql 或 PDO 时会出现此问题。这是测试代码：

```
$link = mysqli_connect('localhost', 'root', '');
if (!$link) {
    die('Connection error: ' . mysql_error());
}
mysqli_select_db($link, 'coolstat.my') or die ('Can\'t use coolstat.my: ' . mysql_error());

for($ii=0; $ii<20000; $ii+=1000){
    $sql= "SELECT `codes_data`.* FROM `codes_data` INNER JOIN codes ON codes.siteid= 20     AND codes.codeid=codes_data.codeid LIMIT ".$ii.", ".($ii+1000)."";
    ///

    $data= array();
    $result = mysqli_query($link, $sql);
    while (($row = mysqli_fetch_array($result))){
        $data[]= $row;
    }
    mysqli_free_result($result);
    unset($result);
    unset($data);
    echo "Memory get_data usage: ".convert_memory_val(memory_get_peak_usage(true))."<br />\n";
}
mysqli_close($link);

function convert_memory_val($size){
    $unit = array('b', 'kb', 'mb', 'gb', 'tb', 'pb');
    return @round($size / pow(1024, ($i = floor(log($size, 1024)))), 2) . ' ' . $unit[$i];
} 
```

它输出：

```
Memory get_data usage: 3.25 mb
Memory get_data usage: 6 mb
Memory get_data usage: 9 mb
Memory get_data usage: 11.75 mb
Memory get_data usage: 14.75 mb
Memory get_data usage: 17.75 mb
Memory get_data usage: 20.5 mb
Memory get_data usage: 23.5 mb
Memory get_data usage: 26.5 mb
Memory get_data usage: 29.5 mb
Memory get_data usage: 32.25 mb
Memory get_data usage: 35.25 mb
Memory get_data usage: 38.25 mb
Memory get_data usage: 41.25 mb
Memory get_data usage: 44 mb
Memory get_data usage: 47 mb
Memory get_data usage: 50 mb
Memory get_data usage: 53 mb
Memory get_data usage: 56 mb
Memory get_data usage: 58.75 mb 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-18T03:35:48.430

您的错误出在 Limit 子句中：第二个数字应该是常数，例如。1000\. 你有什么查询将是

```
LIMIT 0, 1000
LIMIT 1000, 2000
LIMIT 2000, 3000
... 
```

这不是分页，您以越来越多的重叠块获取数据。所以增加内存使用是正确的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T16:54:45.633

> 当[垃圾收集器](http://www.php.net/manual/en/features.gc.collecting-cycles.php)打开时，只要根缓冲区满了，就会执行上述循环查找算法。根缓冲区的固定大小为 10,000 个可能的根 [...]
> 
> 即使可能的根缓冲区尚未满，也可以强制收集周期。为此，您可以使用[gc_collect_cycles()](http://www.php.net/manual/en/function.gc-collect-cycles.php)函数。此函数将返回算法收集了多少个周期。

所以..只是尝试在循环体结束时[强制垃圾收集：](http://www.php.net/manual/en/function.gc-collect-cycles.php)

```
for ($ii = 0; $ii < 20000; $ii += 1000) {
    // ...

    mysqli_free_result($result);
    unset($result);
    unset($data);
    echo "Memory before GC run: ".convert_memory_val(memory_get_peak_usage(true))."<br />\n";

    $n = gc_collect_cycles();
    echo "GC collected $n garbage cycles<br />\n";
    echo "Memory after GC run: ".convert_memory_val(memory_get_peak_usage(true))."<br />\n";
} 
```

# json - 什么是 BSON，它与 JSON 究竟有何不同？

> ID：12438280
> 
> 赞同：191
> 
> 时间：2012-09-15T14:40:28.683
> 
> 标签：json, mongodb, bson, nosql

我刚开始使用 MongoDB，我注意到的一件事是它使用[BSON](http://bsonspec.org/)在内部存储数据。然而，文档并不清楚 BSON 是什么以及它在 MongoDB 中的使用方式。有人可以向我解释一下吗？

* * *

## 回答 #1

> 赞同：184
> 
> 时间：2012-09-15T14:50:29.747

[BSON](http://bsonspec.org/)是 MongoDB 在将文档存储在集合中时使用的类 JSON 文档的二进制编码。它增加了对 JSON 中不支持的数据类型（如日期和二进制）的支持。

实际上，在使用 MongoDB 时，您不必对 BSON 了解太多，您只需要在构建文档时使用您的语言的本机类型及其驱动程序提供的类型（例如 ObjectId），它们将被映射到由驱动程序提供适当的 BSON 类型。

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2017-03-14T11:51:08.570

*   什么是**BSON**？

    > BSON [bee·sahn]，Binary JSON 的缩写，是类 JSON 文档的二进制编码序列化。

*   它与**JSON**有何不同？

    > BSON 旨在提高空间效率，但在某些情况下并不比 JSON 效率高多少。在某些情况下，BSON 使用的空间甚至比 JSON 还要多。这样做的原因是 BSON 的另一个设计目标：可遍历性。BSON 将一些“额外”信息添加到文档中，例如字符串和子对象的长度。这使得遍历更快。
    > 
    > BSON 还被设计为快速编码和解码。例如，整数存储为 32（或 64）位整数，因此不需要在文本之间进行解析。对于小整数，这比 JSON 使用更多空间，但解析速度要快得多。
    > 
    > 除了紧凑性之外，BSON 还添加了 JSON 中不可用的其他数据类型，特别是**BinData**和**Date**数据类型。

*资料来源：[http ://bsonspec.org/](http://bsonspec.org/)*

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2018-08-31T15:20:04.090

MongoDB以**二进制编码格式表示****JSON 文档**，因此我们将其称为**BSON 幕后**。

 ****BSON 扩展了 JSON 模型以提供**额外的数据类型，例如**JSON不**支持的**日期和二进制，还提供有序字段，以便在不同语言中高效地进行编码和解码。 

换句话说，我们可以说  **BSON 只是二进制 JSON**  （JSON 的超集，具有更多数据类型，最重要的是二进制字节数组）。

**Mongodb 使用 JSON 的序列化格式**包含**用于存储和访问文档的编码格式**。简单地说，BSON 是 JSON 数据的二进制编码格式。

更多 mongoDB 文章：[https ://om9x.com/blog/bson-vs-json/](https://om9x.com/blog/bson-vs-json/)

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2014-07-21T11:19:19.973

MongoDB 在后台以称为 BSON 的二进制编码格式表示 JSON 文档。BSON 扩展了 JSON 模型以提供额外的数据类型，并有效地在不同语言中进行编码和解码。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-01-12T15:50:48.513

通过在 JSON 上使用 BSON 编码，MongoDB 能够在原始格式的 JSON 文档中的值之上创建索引。这有助于运行高效的分析查询，因为 NoSQL 系统以不支持索引而闻名。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2019-10-23T18:18:22.850

这篇相对较短的文章对 BSON 和 JSON 进行了很好的解释：它讨论了 JSON 的一些问题，为什么发明 BSON，与 JSON 相比它解决了哪些问题以及它如何使您受益。

[https://www.compose.com/articles/from-json-to-bson-and-back/](https://www.compose.com/articles/from-json-to-bson-and-back/)

在我的用例中，那篇文章告诉我序列化为 JSON 对我有用，我不需要序列化为 BSON

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2020-08-13T22:56:46.867

严格遵守 OP 问题的范围：

1.  什么是 BSON？

BSON 是一组丰富的标量类型（int32、int64、十进制、日期等）以及可能出现在字节流中的容器（对象也称为映射和数组）的规范。BSON 没有“本机”字符串形式；它是一个字节 [] 规范。要使用此字节流，有许多可用的本地语言实现可以将字节流转换为适合该语言的实际类型。这些被称为编解码器。例如，`Document`从 MongoDB 到类的 BSON 编解码器的 Java 实现将对象转换为实现`java.util.Map`. 日期被解码为`java.util.Date`. 例如，在 Java 和 python 中传输 BSON 如下所示：

```
Java:
import org.bson.*;
MyObject  -->  get() from MyObject, set() into org.bson.Document --> org.bson.standardCodec.encode(Document) to byte[]

XMIT byte[]

python:
import bson
byte[] --> bson.decode(byte[]) to dict --> get from dict --> do something 
```

不涉及 to- 和 from- 字符串调用。没有解析器。没有关于空格、双引号和转义字符的内容。 在 Java 端捕获的 、 和 数组 在 python 中重新出现`Dates`为`BigDecimal`、和数组。`Long``datetime.datetime``Decimal``int`

相比之下，JSON 是一个字符串。JSON 没有编解码器。传输 JSON 如下所示：

```
MyObject --> convert to JSON (now you have a big string with quotes and braces and commas)

XMIT string

parse string to dict (or possibly a class via a framework) 
```

从表面上看，这看起来是一样的，但标量的 JSON 规范只有字符串和“数字”（省略了布尔值和空值等）。没有直接的方法可以在 JSON 中将 a`long`或 a`BigDecimal`从发送者发送到接收者；他们都只是“数字”。此外，JSON 没有纯字节数组的类型。所有非 ASCII 数据必须是 base64 或以其他方式编码以保护它并作为字符串发送。BSON 有一个字节数组类型。生产者设置它，消费者得到它。没有对字符串进行二次处理以将其转换回所需的类型。

2.  MongoDB 如何使用 BSON？

首先，它是内容的有线协议。它也是数据的磁盘格式。因为可变长度类型（最显着的是字符串）在 BSON 规范中携带长度信息，这允许 MongoDB 高效地遍历对象（从字段到字段的跳跃）。*在集合*中查找对象不仅仅是 BSON，包括索引的使用。****

# html - 内容的 HTML 5 元素？

> ID：12438300
> 
> 赞同：2
> 
> 时间：2012-09-15T14:43:41.723
> 
> 标签：html, semantic-markup

应该使用哪个新的 HTML5 元素来代替 div.container 和 div.content ？

```
<header>
  site header
</header>

<div class="container">

  <div class="content">

    <article>
      content
    </article>

    <article>
      content
    </article>

    <article>
      content
    </article>

  </div>

  <aside>
    sidebar
  <aside> 

</div>

<footer>
  site footer
</footer> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T14:46:12.573

`div.content`可能是一个`<section>`. `div.container`应该可能仍然是一个`div`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T14:46:22.790

它们都不是为此而生的。不过，我建议使用[ARIA](http://www.w3.org/WAI/intro/aria.php)角色。

```
<div class="container" role="document">

  <div class="content" role="main"> 
```

然后这些也可以在 CSS 中与选择器一起使用，例如`div[role='main']`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T15:30:04.327

我强烈建议阅读[HTML 5 DOCTOR](http://html5doctor.com/element-index/)`article`之间`section`的区别。

然后，您将能够对应该使用哪些分段元素以及何时以及何时不使用 div 做出明智的判断。

我从他们的博客中推测是：

> 文章：用于本身有意义的内容！
> 
> 部分：对于作为另一个部分或文章的逻辑部分的内容（可以嵌套这些）。
> 
> div：仍然用于容器或样式的钩子，这是不应该使用 html5 元素的东西。

最后，使用 html5 分段元素的决定通常可以通过它包含标题的事实来决定（尽管这不是硬性规定）。有几个有用的工具可以帮助做出这些决定。

[HTML5 大纲 - 在线](http://gsnedders.html5.org/outliner/)

[HTML5 Outliner - chrome 扩展](https://chrome.google.com/webstore/detail/afoibpobokebhgfnknfndkgemglggomo)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-15T17:32:45.193

要将这个问题视为建设性问题，需要将其解释为询问 HTML5 草案对此事的看法。那么答案就是W3C HTML5 草案中的4.13.1[部分内容的主要部分。](http://www.whatwg.org/specs/web-apps/current-work/multipage/common-idioms.html#the-main-part-of-the-content)简而言之，它表示通常您不需要任何特定标记：只需将内容放在那里即可。`div`显然，如果您需要将其视为 CSS 或脚本中的一个单元，您可以将其包装在一个元素中。

根据该部分，它可以被标记为`section`或`article`是否构成“更大作品的一部分，例如一章”或“人们可以想象独立联合的独立内容单元”。

这是编码风格的问题。没有通用软件（如浏览器或搜索引擎）在这里关心您的选择。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-15T19:41:47.757

你不能笼统地回答这个例子，这取决于页面的内容。

这里重要的是页面的轮廓。因此，您可以忽略所有`div`元素，因为它们不会影响轮廓。仅当您*需要*它们作为 CSS 或 JavaScript 的钩子时才使用它们。

第**一个问题**是：是`aside`与整个页面相关还是与“内容区域”相关？如果它与整个页面相关，则*不得*包含在另一个分节元素中。如果它与内容区域相关，则它*必须*包含在该分段元素中。这里我假设它与整个网页有关。

第二**个问题**：这三个`article`元素是否有一个共同的标题？例如：“我最喜欢的书”、“最新的博客文章”或“产品”。如果是这样，您应该使用对这三个元素进行分组的分段`article`元素。如果没有可能的标题，您可能不希望在此处使用分段元素，因此可以使用`div`或根本不使用元素。

第三**个问题**（如果第二个问题的回答是肯定的）：这个切片元素应该是一个元素`section`还是一个`article`元素？如果您选择将`article`元素用于这三个“事物”的选择是正确的，那么您*可能*（但*并非*不可避免！）`section`这里需要一个。再次使用是否正确`article`，取决于真实内容。所以你*可能*更愿意

```
<article> 
  <section></section>
  <section></section>
  <section></section>
</article> 
```

代替

```
<section> 
  <article></article>
  <article></article>
  <article></article>
</section> 
```

在这里，我假设您选择使用`article`三个“事物”是正确的。

所以最终版本可能看起来像：

```
<header>
  <!-- if this header applies to the whole page -->
</header>

<section>

  <!-- a h1 like "Latest blog posts" -->

    <article>
      content
    </article>

    <article>
      content
    </article>

    <article>
      content
    </article>

</section>

<aside>
    <!-- if this aside applies to the whole page -->
<aside> 

<footer>
  <!-- if this footer applies to the whole page -->
</footer> 
```

# .net - 在 WPF 应用程序中向 VSS 添加大量文件并创建项目

> ID：12438303
> 
> 赞同：0
> 
> 时间：2012-09-15T14:43:55.130
> 
> 标签：.net, wpf, wcf, visual-sourcesafe

我正在使用 VSS 互操作 DLL 和 .NET 创建一个新的子项目并在每个项目中保存许多 xml 文件。

基本上，该进程连接到同一域上的 VSS。它必须在主要定义的项目下创建超过 1000 个子项目，并且对于每个子项目，它都会从数据库中检索 xml 文件并将其写入临时位置的文件流并将其添加到 VSS 中。

*   子项目可能已经存在，因此它还会检查 VSSItem 是否已经存在，然后检查所有 VSSItem 以查看它是否具有我要保存的文件名。
    *   如果是，则将文件签出到临时位置，签入新文件，然后从签出临时位置删除文件
    *   否则，添加一个新文件
*   最后删除保存文件流的临时位置。

它必须对 1000 多个项目执行上述过程。整个过程大约需要 20 分钟。该进程是异步的，因此它在自己的线程中运行。

我在这里使用 WPF 和 WCF，所以有时我会收到一个 SendTimeout，我们可以通过增加 WPF 配置文件中的超时来阻止它。

**我的问题是**：VSS 处理总是这么慢，我们怎样才能加快速度？

我试图查看代码，但找不到改进它的方法。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T15:55:19.317

老实说，我在工作中使用 VSS，并用 c# 编写了一个应用程序来执行类似的过程，我得出的结论是它只是 VSS。我对您的问题的回答：VSS 很慢，因为它的主要目的是通过签入/签出功能来控制源代码，而且您的代码（据我所知）很可能没​​有什么可以改变的，以显着加快时间。Blam 提到的内容可能会为您争取一些时间，但不会将其减半。

# mysql - 选择列 LIKE 字典单词所在的行

> ID：12438304
> 
> 赞同：0
> 
> 时间：2012-09-15T14:43:58.533
> 
> 标签：mysql, sql

我有 2 张桌子：

*字典*- 包含大约 36,000 个单词

```
CREATE TABLE IF NOT EXISTS `dictionary` (
  `word` varchar(255) NOT NULL,
  PRIMARY KEY (`word`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

*数据*- 包含大约 100,000 行

```
CREATE TABLE IF NOT EXISTS `datas` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `hash` varchar(32) NOT NULL,
  `data` varchar(255) NOT NULL,
  `length` int(11) NOT NULL,
  `time` int(11) NOT NULL,
  PRIMARY KEY (`ID`),
  UNIQUE KEY `hash` (`hash`),
  KEY `data` (`data`),
  KEY `length` (`length`),
  KEY `time` (`time`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=105316 ; 
```

我想以某种方式选择`datas`该列`data`包含 1 个或多个单词的所有行。

我知道这是一个很大的问题，它需要以每种可能的组合将所有这些行匹配在一起，所以它需要最好的优化。

我已经尝试了以下查询，但它只是挂了很长时间：

```
SELECT      `datas`.*, `dictionary`.`word`
FROM        `datas`, `dictionary`
WHERE       `datas`.`data` LIKE CONCAT('%', `dictionary`.`word`, '%')
AND         LENGTH(`dictionary`.`word`) > 3
ORDER BY    `length` ASC
LIMIT       15 
```

我还尝试了与上述类似的方法，使用左连接和指定 like 语句的 on 子句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T15:27:13.243

这实际上不是一个简单的问题，您尝试执行的操作称为全文搜索，而关系数据库并不是完成此类任务的最佳工具。如果这是某种核心功能，请考虑使用专门用于此类操作的解决方案，例如[Sphinx Search Server](http://sphinxsearch.com/)。

如果这不是“关键任务”系统，您可以尝试其他方法。我可以看到 datas.data 列并不长，因此您可以创建一个专用于您的任务的结构并在操作使用期间继续维护它。例如，创建表：

```
dictionary_datas (
    datas_id FK (datas.id),
    word FK (dictionary.word)
) 
```

现在，每当您插入、删除或简单地修改数据或字典表时，您都会更新 dictionary_datas 并在那里放置哪些 datas_id 包含哪些单词的信息（基本上是多对多关系）。当然，它会降低您的性能，因此如果您的系统上的事务负载很高，则必须定期执行此操作。例如，放置一个每晚凌晨 03:00 运行的 Cron 作业并实现表。为了简化任务，您可以在 DATAS 表中添加一个标志 TO_CHECK，并仅为那些具有 1 的记录实现数据（在实现 dictionary_datas 后，您将值切换为 0）。请记住在更新 DICTIONARY 表后刷新整个 DATAS 表。就数据处理而言，36 000 和 100 000 并不是很大的数字。

一旦你有了这个表，你可以像这样查询它：

```
SELECT datas_id, count(*) AS words_num FROM dictionary_datas GROUP BY datas_id HAVING count(*) > 3; 
```

为了加快查询速度（同时减慢它的更新速度），您可以在其列 datas_id、word 上创建一个复合索引（完全按照该顺序）。如果您决定定期刷新数据，您应该在刷新之前删除索引，而不是刷新数据，并在刷新后最终创建索引 - 这种方式会更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T15:36:22.123

我不确定我是否理解您的问题，但我认为这可能是一个解决方案。另外，我认为人们不喜欢正则表达式，但这对我来说可以选择其值超过 1 个单词的列。

SELECT * FROM datas WHERE data REGEXP "([az] )+"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-03T06:08:40.837

你试过这个吗？

```
 select *
 from dictionary, datas
 where position(word,data) > 0 
 ; 
```

这是非常低效的，但对你来说可能已经足够了。[这是一个小提琴](http://sqlfiddle.com/#!2/9a70f/1)。

为了获得更好的性能，您可以尝试在您的文本列上放置一个[*文本搜索索引*](http://pic.dhe.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.admin.ts.doc/doc/c0051296.html)`DATA`，然后使用该`CONTAINS`函数而不是`POSITION`.

# php - 删除时未定义的索引模型名称

> ID：12438305
> 
> 赞同：0
> 
> 时间：2012-09-15T14:44:00.060
> 
> 标签：php, cakephp

在 Cakephp 应用程序中删除数据时出现以下错误：

```
Undefined index:  Image [CORE/cake/libs/model/model.php, line 1477]
Model::updateCounterCache() - CORE/cake/libs/model/model.php, line 1477
Model::delete() - CORE/cake/libs/model/model.php, line 1842
ImagesController::delete() - APP/controllers/images_controller.php, line 67
Dispatcher::_invoke() - CORE/cake/dispatcher.php, line 204
Dispatcher::dispatch() - CORE/cake/dispatcher.php, line 171
[main] - APP/webroot/index.php, line 86 
```

这是我的代码，它得到了这个错误：

```
$this->Image->delete($image_id); 
```

我已经确认 $image_id 不为空并且是正确的，还确认了此特定行触发了错误。我在 images_controller 里面。我正在使用 Cakephp 1.3。

这是我的图像模型代码：

```
 class Image extends AppModel {

    var $name = 'Image';

   var $belongsTo = "User";

    function afterFind($results) 
    {
       /*some custom afterfind work here */
    }
  } 
```

正在从数据库中删除图像，但我不断收到此错误。

======================================== 编辑
函数的完整代码：

```
function delete() {

            $this->checkAuth();

            $user_id = $user_id = $this->Auth->user('id');

            if(!empty($this->data))

            {

                $image_id = $this->data['Image']['id'];

                $image = $this->Image->find("first", array("conditions"=>array("Image.id"=>$image_id)));

                if($image) {

                    if($image['Image']['user_id']==$user_id){

                        $this->Image2->delete_image($image['Image']['image_path'],"upload");
                        //echo "image id:".$image_id;
                        $this->Image->delete(intval($image_id));

                        $this->set("success","1");

                        $this->set("msg","Image deleted successfully."); 

                    }

                    else {

                        $this->set("success","0");

                        $this->set("msg","You do not have permission to delete this image."); 

                    }

                }

                else {

                    $this->set("success","0");

                    $this->set("msg","Cannot find image."); 

                }

            }

            else

            {

                $this->set("success","0");

                $this->set("msg","No data posted"); 

            }

        } 
```

当我们从中输出 json 时，视图中没有任何内容。

# python - 为什么导入的类实例在 Web 应用程序中显示为不同的对象？

> ID：12438308
> 
> 赞同：1
> 
> 时间：2012-09-15T14:44:08.920
> 
> 标签：python, web-applications

我是[Learning Python the Hard Way 的 52 个示例，其中](http://learnpythonthehardway.org/book/ex52.html)包括创建基于文本的游戏。因此，我有两个重要的模块`map.py`和`app.py`一个`show_room.html`我正在研究的模块。

`map.py`包含一个房间“激光武器军械库”，用户必须在其中猜测 4 位代码。
我正在尝试引入一个可以显示代码的作弊码。这包括在`app.py`.

**地图.py**：

```
code=("%s%s%s%s"%(randint(0,9),randint(0,9),randint(0,9),randint(0,9))) 
class Room(object):

    def __init__(self, name, description):
        self.name = name
        self.description = description
        self.paths = {}

    def some_other_functions:
        ....

laser_weapon_armory = Room("Laser Weapon Armory",description) 
```

**app.py**（阅读重要部分）：

```
import web
from gothonweb import map

urls = ('/game', 'GameEngine',
       '/', 'Index',)
some_code

class GameEngine(object):
    def GET(self):
        if session.room:
            return render.show_room(room=session.room)

def POST(self):        
    form = web.input(action="")
    #Here is the important part:
    if session.room == map.laser_weapon_armory:
        if form.action == "you tell me":
            map.laser_weapon_armory.description+=map.code
        elif form.action != map.code:
            form.action ='*'

    if session.room and session.room.go(form.action):
        session.room = session.room.go(form.action)                   

    web.seeother("/game") 
```

重要部分的 if 子句永远不会得到验证。主要是因为当 'session.room' 等于 'laser_weapon_armory' 时，它会显示为不同的对象。
IE：

```
print(laser_weapon_armory) ##<gothonweb.map.Room object at 0x01FDE550> 
```

然而

```
print(session.room)  ##gives <gothonweb.map.Room object at 0x0205E230> 
```

为什么会发生这种情况，而其他导入给出相同的对象？

# apache - 使用 mod_rewrite 检测多个浏览器和版本

> ID：12438311
> 
> 赞同：1
> 
> 时间：2012-09-15T14:44:20.160
> 
> 标签：apache, mod-rewrite

我目前正在尝试将规则应用于几个现代浏览器。我的浏览器检测基本上是这样工作的（例如 Safari ≥ 5，这个工作）：

```
RewriteCond %{HTTP_USER_AGENT} Version/(\d).*Safari/
RewriteCond %1 >4
RewriteRule ... 
```

现在我想将这些检测中的多个链接在一起，如果其中任何一个匹配，则应用该规则。我试过这个：

```
RewriteCond %{HTTP_USER_AGENT} Version/(\d).*Safari/
RewriteCond %1 >4 [OR]
RewriteCond %{HTTP_USER_AGENT} Chrome/(\d\d)
RewriteCond %1 >22
RewriteRule ... 
```

这不起作用（我怀疑是因为 [OR] 仅适用于下一条规则，而不适用于接下来的两条）。有没有办法使这项工作，或者我必须为每个浏览器列出一次 RewriteRule ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T15:32:00.687

您不能将括号括在 RewriteCond 指令周围，因此您不能有一组条件来检查（（A 和 B）或（C 和 D））。因此，您需要为每个浏览器使用一对带有 RewriteRule 指令的测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T16:00:16.447

该`[OR]`指令不会影响链接在一起的多个条件。您需要分离 2 个条件链并复制规则：

```
RewriteCond %{HTTP_USER_AGENT} Version/(\d).*Safari/
RewriteCond %1 >4
RewriteRule ...

RewriteCond %{HTTP_USER_AGENT} Chrome/(\d\d)
RewriteCond %1 >22
RewriteRule ... 
```

# c++ - 询问有关结构的基本 C++

> ID：12438312
> 
> 赞同：1
> 
> 时间：2012-09-15T14:44:29.687
> 
> 标签：c++, struct

我正在为我的第一个学校作业创建一个基本的 C++ 代码，它只需要我创建一个程序，以小时、分钟和秒为单位请求时间，并将其转换为相当于以秒为单位的时间；非常基础。

我认为我得到的错误是因为我可能滥用了 struct 函数。

在多次尝试调整后得到相同的错误：“预期的主表达式在 â.â 标记之前”，我决定尝试没有结构的代码；只需用 float h,m,s,et 定义它们并用该名称调用它们：cin >> h >> m >> s;。它有效。这就是为什么我认为错误与我使用 struct 函数有关。

这是短代码：

```
#include <iostream>

using namespace std;

int main() {

struct time {
 int hour;
 int minute;
 int second;
 int elapsedTime;
};

cout << "Enter a Time in the Format: HH MM SS: ";

cin >> time.hour >> time.minute >> time.second;

time.elapsedTime = ((time.hour*360)+(time.minute*60)+time.second);

cout << "The Amount of Time Elasped is: " << time.elapsedTime << " seconds." << endl;

return 0;

} 
```

上述错误在代码的第 16 行出现了 3 次，在第 20 行出现了一次。

第 18 行的另一个错误是：“expected unqualified-id before â.â token”。

任何帮助将不胜感激。我拒绝看教授发布的答案。

感谢您的时间 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T14:47:42.363

和：

```
struct time {
 int hour;
 int minute;
 int second;
 int elapsedTime;
}; 
```

您刚刚*声明*了结构的结构。您必须*实例化*它的一个实例：

```
time mytime;
cin >> mytime.hour;
cin >> mytime.minute;
cin >> mytime.second; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T14:48:15.163

你不需要一个结构；只需将时间的三个组成部分放在单独的变量中并做一些算术运算。但是如果你**真的**想使用结构体，请记住结构体的定义会创建一个新类型。你的那部分代码很好。完成后，您需要创建该类型的变量：

```
time data; 
```

然后您可以访问字段，如`data.hour`, `data.minute`, `data.second`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T14:48:40.580

`struct time`是一种数据类型。您需要的是该类型的变量：

```
struct time t;

cin >> t.hour >> t.minute >> t.second; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T14:48:51.090

顺便说一句，一小时有3600秒

# rtf - 保存 rtf 源代码并显示渲染版本

> ID：12438314
> 
> 赞同：0
> 
> 时间：2012-09-15T14:45:04.197
> 
> 标签：rtf

如果我有 rtf 源代码，如何保存它以便正确呈现？就像现在一样——无论我如何保存它（rtf、txt 或 doc），它最终都只是源代码

# c# - 如何在 C# 中使文本框在边框内居中

> ID：12438315
> 
> 赞同：2
> 
> 时间：2012-09-15T14:45:27.880
> 
> 标签：c#, windows-phone-7

在我的`WP7`应用程序中，我正在创建一个`Textbox`内部`Border`. 如何`Textbox`在中心对齐`Border`？

```
 Border rectangleborder = new Border();
         rectangleborder.Background = new SolidColorBrush(Colors.Transparent);
         rectangleborder.BorderBrush = new SolidColorBrush(Colors.Black);
         rectangleborder.BorderThickness = new Thickness(2);
         rectangleborder.Width = width;
         rectangleborder.Height = width;
         TextBox textbox = new TextBox();
         textbox.Text = "1";
         textbox.Background = new SolidColorBrush(Colors.Transparent);
         textbox.Foreground = new SolidColorBrush(Colors.Yellow);
         textbox.BorderBrush = new SolidColorBrush(Colors.Transparent);
         this.canvas1.Children.Add(rectangleborder);
         rectangleborder.SetValue(Canvas.LeftProperty, 30 + (j - 1) * width);
         rectangleborder.SetValue(Canvas.TopProperty, 30 + (i - 1) * width);
         rectangleborder.Child = textbox; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T14:54:12.763

```
 TextBox textbox = new TextBox();
  textbox.HorizontalAlignment = HorizontalAlignment.Center;
  textbox.VerticalAlignment = VerticalAlignment.Center; 
```

您还可以使用以下方式对齐文本：-

```
 textBox.TextAlign = HorizontalAlignment.Center; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T14:51:56.987

您需要将 设置`HorizontalAlignment`为水平对齐，将设置`VerticalAlignment`为垂直对齐：

```
TextBox textbox = new TextBox();
textbox.HorizontalAlignment = HorizontalAlignment.Center;
textbox.VerticalAlignment = VerticalAlignment.Center; 
```

结果应该是这样的：

![在此处输入图像描述](../Images/196c20971ee3d1c6b97e70ed5f030fe1.png)

# javascript - 如何使用 javascript 或 html 下载 PDF 格式的填写表格

> ID：12438318
> 
> 赞同：3
> 
> 时间：2012-09-15T14:45:52.743
> 
> 标签：javascript, html

我有一个带有表单的 html 页面，只有几个输入字段、复选框、单选按钮。用户可以填写表格。

有什么办法，用户可以下载 pdf 格式的表格（带有填写的数据）？

还有1个问题，有什么方法可以使用java脚本代码或html代码将填写的表单保存为html格式或图像格式（当然文件->保存浏览器和屏幕截图），点击按钮？

我已经尝试过[http://code.google.com/p/jspdf/](http://code.google.com/p/jspdf/)，但无法通过它。

谢谢

[补充几点] 如果无法使用 JS/HTML 生成 pdf 文件，那么....

目前我正在使用 C# 应用程序创建服务器，当用户请求 html 页面时，我将其发送给用户。该 html 页面包含一个需要填写的表单，我希望用户将填写的表单保存为 pdf 格式。现在，我能够处理静态 html 表单 -> 转换为 pdf 并将下载提供给用户，

但无法让用户保存填写的表单。当用户按下提交按钮时，我可以使用 httpResponce 对象（GET/Post 方法）获取所有填写的数据！！，有没有办法可以使用这个 httpResponce 对象参数生成 pdf 文件？或者我可以通过任何方式发送当前的 html 页面内容（例如，使用 jquery/javascript 获取 div 中的所有内容）并在用户按下提交按钮时将其发送回来，这样我就可以在服务器端生成 pdf 文件和提供下载 - PDF 格式

请问，如果我无法描述我的问题！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T15:26:59.280

> jsPDF 是由我们的首席开发人员 James 编写的一个开源库，用于仅使用 Javascript 生成 PDF 文档。您可以在 Firefox 扩展、服务器端 Javascript 和某些浏览器中的数据 URI 中使用它。[http://snapshotmedia.co.uk/blog/jspdf](http://snapshotmedia.co.uk/blog/jspdf)

目前无法仅使用 javascript 生成 PDF。使用服务器端脚本，可以将数据发送到服务器并让服务器生成 PDF，然后将其发送给用户。

**（更新） ：使用 PHP，您可以使用**[dompdf - HTML 到 pdf 转换器](http://code.google.com/p/dompdf/)在服务器端生成 PDF 。这是一个演示：[http ://eclecticgeek.com/dompdf/docs_0-6-0/demo.php](http://eclecticgeek.com/dompdf/docs_0-6-0/demo.php)

在 Google Chrome 中，有一个“打印到 PDF”选项。如果您不想在服务器端进行任何编程，您可以只要求您的用户使用 Google Chrome 访问该页面。填写表格后，他们[将页面打印为 PDF](http://support.google.com/chrome/bin/answer.py?hl=en&answer=1379552)。

# intellij-idea - IntellijIDEA 11.1.3 中自定义的 Web 模块

> ID：12438321
> 
> 赞同：0
> 
> 时间：2012-09-15T14:46:13.353
> 
> 标签：intellij-idea

当我在上述 IDE 中创建新项目时，我可以选择`Web Module`然后`Web Module Type`（HTML5 Boilerplate、Twitter Bootstrap、Node.js）。

![在此处输入图像描述](../Images/917258995f21e7b6960a449a9da96073.png)

我想编写自定义 IntellijIDEA 插件来添加自定义`Web Module Type`.

我期望以下用户操作序列：

*   用户点击`File`——`New project`
*   然后选择选项`Create project from scratch`
*   创造新的`Web Module`
*   选择`Custom Scratch`网络模块类型
*   指定一些偏好（如上图）
*   点击次数`Finish`

假设我有 java 类，它接收很少的参数并在新项目文件夹中生成所有必要的文件。

如何创建一个接口来将一些参数传递给我的 java 类，这将完成所有其他操作？*因为它是为`Node.js Express App`.*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T15:14:23.850

与某些 IntelliJ 相关的文档采用“代码就是文档”的格式。当您想与仅在 Ultimate Edition 中可用的商业插件交互时，这有点困难。

对于开源集成，您应该能够下载社区版的源代码并导航到您心仪的内容。

对于商业插件集成，您需要找到该插件的 jar 文件并查看类/方法结构以了解您需要调用的内容。至于在 plugin.xml 文件中定义组件，您需要在插件的 plugin.xml 文件中查找扩展点并实现这些接口。IntelliJ 站点上的文档解释了如何定义扩展点并为其他插件定义扩展点的实现。

当我编写一个用于配置我工作的内部框架的插件时，我使用了这两种方法。

# linux - Linux - 查找不包含某些字符的文件

> ID：12438325
> 
> 赞同：1
> 
> 时间：2012-09-15T14:46:28.083
> 
> 标签：linux

我知道使用类似`[^a]*`的东西会输出所有不以`"a"`.

如果我想**回**显包含至少 5 个不以开头的字符`"abc"`（但可以包含`"abc"`在文件名中间）的文件，我应该怎么做？

我有

```
 echo [^abc]?????* 
```

但输出也删除了类似的文件`"123abc"`，我不太明白。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T14:58:11.080

您没有指出您的问题适用于哪个操作系统，但确定 Mac OS X 或 Linux 上匹配文件集的一种方法是：

```
find . -maxdepth 1 -type f -name "?????*" | egrep -v "./abc" 
```

请注意，这将仅列出当前目录中的文件。如果要在子目录中包含文件，则需要删除*maxdepth*参数。

另请注意，这些命令区分大小写。您需要使用*-iname*和*-i*使它们不区分大小写。

编辑：

如果您确实需要使用*echo*命令，以下将起作用：

```
echo `find . -maxdepth 1 -type f -name "?????*" | egrep -v "./abc"` 
```

# c++ - C++ Directx 11 渲染问题

> ID：12438327
> 
> 赞同：0
> 
> 时间：2012-09-15T14:46:44.710
> 
> 标签：c++, model, import, directx-11

我开发了一个 .obj 导入器，但是有一个小问题：

![一个露营车，真是搞砸了……](../Images/6b0dad3473f7f47852f657c4035b9f37.png)

现在，我尝试反转索引，并反转法线。但他们都没有奏效，扭转法线出现了令人难以置信的错误。

你们有什么可能出错的建议，我该怎么办？

谢谢你

PS。预期的输出，忽略颜色：

![在此处输入图像描述](../Images/6e3b13c0f162c6b69029c16282b72ef4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T09:36:39.813

可能来自 3 个不同的问题：1/面部剔除，尝试创建一个 D3D11_CULL_MODE 为 None、Front 和 Back 的光栅器并检查它是否有区别，也设置为线框可能有助于调试。

2/深度缓冲区可能设置不正确

3/您的进口商有问题，但需要查看代码以获得更多帮助。

# svg - svg 内的 svg 被光栅化，导致放大时结果模糊

> ID：12438332
> 
> 赞同：1
> 
> 时间：2012-09-15T14:47:37.423
> 
> 标签：svg, scale, blurry, rasterize

我想在`<svg>`标签中嵌入一个外部 SVG 图像文件。为此，我使用 SVG 的`<image>`标签如下：

```
<svg width="1000" height="1000"
 xmlns="http://www.w3.org/2000/svg"
 xmlns:xlink="http://www.w3.org/1999/xlink">

    <image x="0" y="0" width="48" height="48"
     xlink:href="http://static.micahcarrick.com/media/images/autotools-tutorial/hello-world.svg"
     transform="scale(5.0)" />

</svg> 
```

如您所见，我正在尝试通过添加`transform`属性将嵌套的 SVG 缩放 5.0。不幸的是，在 Firefox 和 Chrome 中，我有时会得到一个模糊的图像，因为它会在放大嵌套 SVG 之前对其进行光栅化。

注意：它有时在 Firefox 和 Chrome 中按预期工作（嵌套的 SVG 保持清晰），但并非总是如此（例如，如果我在 Chrome 中打开附加的 JSFiddle，它会变得模糊/损坏。如果我按 F5，它会变得清晰/工作）

**有什么方法可以确保嵌套的 SVG 在缩放之前永远不会被光栅化？**

谢谢 ：）

JSFiddle：http: [//jsfiddle.net/a9NRY/17/](http://jsfiddle.net/a9NRY/17/)

![丑陋的光栅化](../Images/ca8d1af5518b5a70b99be6d12b3860d1.png) ![完美的](../Images/623bee604585cc5654d1c87bb8784222.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T01:30:10.503

这是[Chrome 中的一个已知错误](http://code.google.com/p/chromium/issues/detail?id=119693)，由图像被缓存的事实引起。您无法从代码中修复此问题，因为这是浏览器错误，但您可以尝试在服务器端禁用该图像的缓存。

# xhtml - ...在 Google Docs 发布脚本中用作参数的JavaScript内容

> ID：12438335
> 
> 赞同：1
> 
> 时间：2012-09-15T14:47:47.800
> 
> 标签：xhtml, google-apps-script

> **可能重复：**
> [带有 src 和内容的脚本标签是什么意思？](https://stackoverflow.com/questions/6528325/what-does-a-script-tag-with-src-and-content-mean)

如果我在 Google Docs 电子表格中发布图表，我会得到以下代码来访问图像：

```
<script type="text/javascript"
src="//ajax.googleapis.com/ajax/static/modules/gviz/1.0/chart.js">
{"dataSourceUrl":"//docs.google.com/spreadsheet/tq?
key=...&transpose=0&headers=1&range=A1%3AC72&gid=0&pub=1","options":{"vAxes":...}}
</script> 
```

显然，javascript 程序将 ... 中的文本作为参数。

然而，在 HTML 定义（[http://www.w3.org/TR/html4/interact/scripts.html](http://www.w3.org/TR/html4/interact/scripts.html)）中：“如果 src 具有 URI 值，用户代理**必须忽略**元素的内容并通过 URI 检索脚本。”

（编辑：正如下面的评论中提到的，这已经被讨论并同意谷歌使用 DOM 来访问内容 - 这是不推荐的。）

但问题是：如何将参数转义为有效的 XHTML？谷歌似乎没有考虑到有人想在标签之间添加 CTYPE 定义。此代码不起作用：

```
<script type="text/javascript"
src="//ajax.googleapis.com/ajax/static/modules/gviz/1.0/chart.js">
<![CDATA[
{"dataSourceUrl":"//docs.google.com/spreadsheet/tq?
key=...&transpose=0&headers=1&range=A1%3AC72&gid=0&pub=1","options":{"vAxes":...}}
]]>
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T15:34:19.473

在脚本运行的时间点，该脚本元素将是页面上的最后一个元素。所以外部文件可以很容易地调用这样的东西：

```
var s = document.getElementsByTagName('script'); s = s[s.length-1];
var input = JSON.parse(s.textContent); 
```

# java - 为什么我们在 charAt(i) 旁边使用 -'0'？

> ID：12438336
> 
> 赞同：7
> 
> 时间：2012-09-15T14:47:55.973
> 
> 标签：java, string

我读了 Hello Android 书，我不理解这个函数的一段代码。

为什么我们在 charAt(i) 旁边使用 -'0'？

```
static protected int[] fromPuzzleString(String string) {
    int[] puz = new int[string.length()];
    for (int i = 0; i < puz.length; i++) {
        puz[i] = string.charAt(i) - '0' ;
    }
    return puz; 
 } 
```

谢谢。干杯。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-15T14:49:47.797

因为`string.charAt(i)`回报`char`. 但是`puz`是`int[]`。

所以`string.charAt(i) - '0'`将其转换为整数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-15T15:09:20.823

您要做的是一次读取一个字符，将其转换为 int 并将其存储在您的数组中。

0 的 ASCII 码是 48。因此，您实际上要做的是从该特定位置的*char*的 ASCII 值中*减去*该值，然后将数字结果存储在相应的索引中。

 *如果您尝试在循环中将其打印出来，您可以自己验证它，例如：

```
System.out.println((int)string.charAt(i));
System.out.println((int)'0'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-15T16:00:39.807

您最好使用[`Character.isDigit(char)`](http://docs.oracle.com/javase/7/docs/api/java/lang/Character.html#isDigit%28char%29)and[`Character.getNumericValue(char)`](http://docs.oracle.com/javase/7/docs/api/java/lang/Character.html#getNumericValue%28char%29)测试并将 char 转换为整数值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-15T14:53:13.290

字符串是一个数字。此代码会将字符串转换为整数数组。
`string.charAt(i)`将返回一个字符`string.charAt(i)- '0'`并将返回实际的整数值。
例如string="12345"，这个方法会返回一个整数数组[1,2,3,4,5]。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-15T14:54:39.267

我不知道这个特定操作的目的是什么，但是在 Java（以及许多编程语言）中，字符 ( `char`) 表示为一个整数值（在 java 中只有较小的 2 个字节）。您可以像这样将字符显式转换为整数：

```
int x = (int) 'a'; 
```

我认为这段代码做了类似的事情。该`String.charAt()`函数返回 a `char`，如果将其视为 int，则它的值类似于 120（仅作为示例）。'0' （作为 a `char`）也有一个值。如果你减去它们，你会得到一个整数值。*

# html - 如何在同一行中将文本左对齐和右对齐？

> ID：12438339
> 
> 赞同：124
> 
> 时间：2012-09-15T14:48:13.807
> 
> 标签：html, css

如何对齐文本，以便在同一行内，其中一些向左对齐，而另一些向右对齐？

```
<p>This text should be left-aligned. This text should be right aligned.</p> 
```

我可以将所有文本向左（或向右）对齐，可以直接内联，也可以使用样式表 -

```
<p style='text-align: left'>This text should be left-aligned. 
    This text should be right aligned.</p> 
```

如何将相应的文本左右对齐，同时保持在同一行？

* * *

## 回答 #1

> 赞同：216
> 
> 时间：2012-09-15T14:50:37.070

```
<p style="text-align:left;">
    This text is left aligned
    <span style="float:right;">
        This text is right aligned
    </span>
</p>
```

[https://jsfiddle.net/gionaf/5z3ec48r/](https://jsfiddle.net/gionaf/5z3ec48r/)

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-09-15T14:53:11.980

​HTML：

```
<span class="right">Right aligned</span><span class="left">Left aligned</span>​ 
```

CSS：

```
.right{
    float:right;
}

.left{
    float:left;
} 
```

演示：http:
[//jsfiddle.net/W3Pxv/1](http://jsfiddle.net/W3Pxv/1)

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2015-10-05T10:58:09.740

如果您不想使用浮动元素并希望确保两个块不重叠，请尝试：

```
<p style="text-align: left; width:49%; display: inline-block;">LEFT</p>
<p style="text-align: right; width:50%;  display: inline-block;">RIGHT</p> 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2020-12-16T12:12:47.790

使用 css flex 布局和 justify-content 的答案

```
p {
  display: flex;
  justify-content: space-between;
}
```

```
<p>
  <span>This text is left aligned</span>
  <span>This text is right aligned</span>
</p>
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2012-09-15T15:05:45.793

文件：

```
<div class='left'> Left Aligned </div> 
<div class='right'> Right Aligned </div> 
```

CSS文件：

```
.left
{
  float: left;
}

.right
{
  float: right;
} 
```

你完成了....

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2016-02-16T19:06:53.203

虽然这里的几个解决方案都可以工作，但没有一个处理能够很好地重叠并最终将一个项目移动到另一个项目的下方。如果您尝试布局将动态绑定的数据，直到运行时您才会知道它看起来很糟糕。

我喜欢做的只是创建一个单行表并在第二个单元格上应用正确的浮点数。无需在第一个上应用左对齐，这是默认情况下发生的。这可以通过自动换行完美地处理重叠。

**HTML**

```
<table style="width: 100%;">
  <tr><td>Left aligned stuff</td>
      <td class="alignRight">Right aligned stuff</td></tr>
</table> 
```

**CSS**

```
.alignRight {
  float: right;
} 
```

[https://jsfiddle.net/esoyke/7wddxks5/](https://jsfiddle.net/esoyke/7wddxks5/)

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2012-09-15T16:08:23.253

```
<h1> left <span> right </span></h1> 
```

CSS：

```
h1{text-align:left; width:400px; text-decoration:underline;}
span{float:right; text-decoration:underline;} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-11-06T21:04:12.657

在要左对齐或右对齐的每个或一组单词上添加跨度。然后在跨度上添加 id 或类，例如：

```
<h3>
<span id = "makeLeft"> Left Text</span>
<span id = "makeRight"> Right Text</span>
</h3> 
```

CSS-

```
#makeLeft{
float: left;
}

#makeRight{
float: right;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-03-19T19:23:13.377

如果您使用的是 Bootstrap，请尝试以下操作：

```
<div class="row">
    <div class="col" style="text-align:left">left align</div>
    <div class="col" style="text-align:right">right align</div>
</div> 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2012-09-15T15:42:09.407

如果您只想更改文本的对齐方式，只需创建一个类

```
.left {
text-align: left;
} 
```

并通过文本跨越该类

```
<span class='left'>aligned left</span> 
```

# windows-8 - 导航在 WinJS 中无法按预期工作

> ID：12438343
> 
> 赞同：4
> 
> 时间：2012-09-15T14:48:53.760
> 
> 标签：windows-8, windows-runtime, winjs

你好！

我有一个应用栏图标，在点击事件上 - 我添加了一个具有以下代码的函数：

```
function homePage() {

    WinJS.Navigation.navigate("/home/homePage.html");

} 
```

现在我有两个文件 - homePage.html 位于 /home/ 和 js 文件中。

id 为 NextPage 的 html 上有一个简单的按钮。

在 homePage.js 文件中，我有：

```
function () {
    "use strict";

    WinJS.UI.Pages.define("/home/homePage.html", {
        ready: function (element, options) {
           var button = document.getElementById("NextPage");
           button.addEventListener("click", GoToNextPage);
        }
    });
    function GoToNextPage() {
        WinJS.Navigation.navigate("/default.html");
    }

})(); 
```

但是当我点击应用栏图标时 - 什么也没有发生:(

所以我打算完成的是，当有人点击 default.html 上的 appbar 图标时——用户切换到 homePage.html（然后当我点击主页按钮时——它会返回）——但即使是初始页面传输也不会占用地方。

问这个问题很尴尬，但我不能只是双手合十等待神奇的事情发生。我已经为此工作了一个小时 - 阅读视频和示例，但它根本不起作用。

非常感谢帮助 - 我不知道出了什么问题。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-16T07:29:31.550

命名空间提供状态和历史`WinJS.Navigation`管理，但它本身并不实际进行导航。要从一个页面移动到另一个页面，您需要为命名空间中的一个事件定义一个处理函数——这使您能够以对您的应用程序有意义的方式`WinJS.Navigation`响应对该方法的调用。`WinJS.Navigation.navigate`

作为演示，这里有一个`homePage.html`文件，它有一个 NavBar，其中包含一个命令，该命令将成为导航的触发器。

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>NavProject</title>
    <link href="//Microsoft.WinJS.1.0/css/ui-dark.css" rel="stylesheet" />
    <script src="//Microsoft.WinJS.1.0/js/base.js"></script>
    <script src="//Microsoft.WinJS.1.0/js/ui.js"></script>
    <link href="/css/default.css" rel="stylesheet" />
    <script src="/js/homePage.js"></script>
</head>
<body>
     <div id="contentTarget">
            <h1>Select a page from the NavBar</h1>
    </div>
    <div id="navbar" data-win-control="WinJS.UI.AppBar" 
        data-win-options="{placement:'top'}">

        <button data-win-control="WinJS.UI.AppBarCommand"
            data-win-options="{id:'NextPage', label:'Next Page', 
                icon:'\u0031', section:'selection'}">
        </button>  
    </div>
</body>
</html> 
```

除了 NavBar，我还定义了is的`div`元素。这是我的内容中用户单击 NavBar 命令时将加载新文件的位置。`id``contentTarget`

澄清：您想要替换的所有内容都需要进入`contentTarget`元素。否则，您将混合显示新旧内容。

这是连接它的 JavaScript 文件（这是`homePage.js`我在上面的 HTML 文件中添加脚本元素的文件）：

```
(function () {
    "use strict";

    WinJS.Navigation.addEventListener("navigating", function (e) {
        var elem = document.getElementById("contentTarget");

        WinJS.UI.Animation.exitPage(elem.children).then(function () {
            WinJS.Utilities.empty(elem);
            WinJS.UI.Pages.render(e.detail.location, elem)
                .then(function () {
                    return WinJS.UI.Animation.enterPage(elem.children)
                });
        });
    });

    var app = WinJS.Application;
    var activation = Windows.ApplicationModel.Activation;

    app.onactivated = function (args) {
        args.setPromise(WinJS.UI.processAll());

        navbar.addEventListener("click", function (e) {
            if (e.target.id == "NextPage") {
                WinJS.Navigation.navigate("/nextPage.html");
            }
        }, true);

    };
    app.start();
})(); 
```

`WinJS.Navigation.navigating`请注意我是如何为事件添加处理函数的。此事件由对导航目标的调用触发，`WinJS.Navigation.navigate`导航目标的详细信息包含在`detail.location`事件对象的属性中。

在此示例中，我清除了目标元素中的所有内容并将其替换为目标文件的内容，并为从一个到另一个的过渡设置动画。

您只需为事件定义一个处理程序。这意味着如果我有`nextPage.html`将导致导航的元素，我只需要调用`WinJS.Navigation.navigate`而不需要创建新的事件处理程序，如下所示：

```
<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <script>
            WinJS.UI.Pages.define("/nextPage.html", {
                ready: function () {
                    back.addEventListener("click", function () {
                        WinJS.Navigation.navigate("/homePage.html");
                    });
                }
            });
        </script>
    </head>
    <body>
        This is next page.
        <button id="back">Back</button>
    </body>
</html> 
```

# jquery - jQuery .animate 问题，动画不会停止（动画堆叠？？）

> ID：12438344
> 
> 赞同：0
> 
> 时间：2012-09-15T14:49:26.770
> 
> 标签：jquery

我有 8 个缩略图，当您将鼠标悬停在该行的第一个缩略图上时，其他 7 个将动画设置为 50% 的透明度，鼠标移出时它会将它们恢复为 100%。其他拇指也一样。

问题是，当您从左到右快速开始鼠标悬停时，如果您将鼠标全部快速（从左到右或认为，从画廊的左侧到右侧），它们会动画并且不会停止。因此，如果我有 7 个缩略图，并且我将鼠标真正快速地悬停在它们上，那么它们将播放动画 7xs。如果我从左到右快速翻转，那就是 14 次翻转等....（动画堆栈）

关键是动画不会停止。我明白为什么但不知道如何解决它。我试过了，`.stop()`但这阻止了整个事情。我还尝试缩短动画时间，但它已经在 500 毫秒，所以任何更短的时间，它就像一个常规的开/关开关。我也试过 .delay(number here) 但好吧，没用，哈哈。

这是 Js Fiddle。[http://jsfiddle.net/somdow/y3vCP/](http://jsfiddle.net/somdow/y3vCP/)

以防万一，

此示例的 HTML（与 jsFiddle 相同）为：

```
 <div class="portThumbsL">
         <a href="images/sitePortThumbs/2882.png"><img src="images/sitePortThumbs/2882.png" alt="2882films"/></a>
        <div class="thumbTxtSmall">2882FILMS</div>
    </div>
    <div class="portThumbsL">
        <a href="images/sitePortThumbs/2882.png"><img src="images/sitePortThumbs/1tech.png" alt="1-tech"/></a>
         <div class="thumbTxtSmall">2882FILMS</div>
    </div>
    <div class="portThumbsL">
        <a href="images/sitePortThumbs/2882.png"><img src="images/sitePortThumbs/brazen.png" alt="brazen"/></a>
         <div class="thumbTxtSmall">2882FILMS</div>
    </div> 
```

​</p>

CSS是：

```
.portThumbsL{position:relative; width:245px; height:387px; float:left; background-color:#333; margin-right:14px;}
.portThumbsR{position:relative;width:245px; height:387px; float:right; background-color:#333; margin-left:px;}
.portThumbsL img, .portThumbsR img{display:block; margin:6px auto;} 
```

​</p>

jQuery是：

```
$('.portThumbsL ,  .portThumbsR').hover(function(){
    $(this).children('.portSecRollOver').css("display","block");
    $(this).find('.portSecInner').html("<h3 class='h34roll'>" + $(this).find('img').attr('alt') + "</h3>");
    //$('.portThumbsL,  .portThumbsR').not(this).css("opacity", .5);
    $('.portThumbsL,  .portThumbsR').not(this).animate({opacity:.5},500);
    }, 
    function(){
        $(this).children('.portSecRollOver').css("display","none");
    $('.portThumbsL,  .portThumbsR').not(this).animate({opacity:1},500);
    }); 
```

所以我的总体问题是，我怎样才能让它发挥应有的作用而不会发疯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T15:55:10.783

尝试使用 stop() 然后 clearQueue() ...

$('.portThumbsL, .portThumbsR').not(this) **.stop().clearQueue()** .animate({opacity: .5},500);

$('.portThumbsL, .portThumbsR').not(this) **.stop().clearQueue()** .animate({opacity: 1}, 500);

看这里... [http://jsfiddle.net/dZY7q/](http://jsfiddle.net/dZY7q/)

# c# - 如何识别图像中矩形内的矩形

> ID：12438351
> 
> 赞同：1
> 
> 时间：2012-09-15T14:50:22.320
> 
> 标签：c#, c, image-processing

> **可能重复：**
> [如何确定一个矩形是否完全包含在另一个矩形中？](https://stackoverflow.com/questions/4270541/how-can-i-determine-if-one-rectangle-is-completely-contained-within-another)

我如何识别外部矩形并确定哪些矩形在外部矩形内。就像这里有四个内矩形和一个外矩形 ![这是示例图像](../Images/44ebd34aeb891725c42b37a1aa60c711.png)

# c - C 套接字和 openssl (RSA)

> ID：12438352
> 
> 赞同：0
> 
> 时间：2012-09-15T14:50:29.077
> 
> 标签：c, sockets, unix, openssl

使用 RSA 在我的客户端/服务器套接字中有一些奇怪的东西。如果我在本地主机上测试它，一切都很好，但是如果我把客户端放在电脑上，服务器放在其他电脑上，就会出错。

客户端调用connect后，调用与服务器交换公钥的方法。这部分代码工作正常。在此之后，客户端向服务器发送请求：

```
strcpy(send_pack->op, "help\n");
RSA_public_encrypt(strlen(send_pack->op), send_pack->op, 
        encrypted_send->op, rsa_server, padding);

rw_value = write(server, encrypted_send, sizeof (encrypted_pack));
if (rw_value == -1) {
    stampa_errore(write_error);
    close(server);
    exit(1);
}
if (rw_value == 0) {
    stampa_errore(no_response);
    close(server);
    exit(1);
}
printf("---Help send, waiting for response\n");
set_alarm();
rw_value = read(server, encrypted_receive, sizeof (encrypted_pack));
alarm(0);
if (rw_value == -1) {
    stampa_errore(read_error);
    exit(1);
}
if (rw_value == 0) {
    stampa_errore(no_response);
    close(server);
    exit(1);
}
RSA_private_decrypt(RSA_size(rsa), encrypted_receive->message, 
        receive_pack->message, rsa, padding);
printf("%s\n", receive_pack->message);
return;
} 
```

但是当服务器尝试在服务器端解密接收消息时，“帮助”字符串不会出现。这只发生在网络上，在本地主机上，相同的代码工作正常......

编辑：

```
typedef struct pack1 {
unsigned char user[encrypted_size];
unsigned char password[encrypted_size];
unsigned char op[encrypted_size];
unsigned char obj[encrypted_size];
unsigned char message[encrypted_size];
int id;
}encrypted_pack; 
```

encrypted_size 是 512，使用的填充是 RSA_PKCS1_PADDING

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T21:35:57.870

You are assuming that you read the whole thing, ~~512~~ `sizeof (encrypted_pack)` bytes, in one go. This doesn't always happen. You can get less than that, so you should `read(2)` in a loop until you have your complete application message.

### Edit 0:

You are trying to decrypt not complete message. TCP is a *stream of bytes*, and you have to treat it as such. It doesn't know about your application message boundaries. You should be doing something like this:

```
char buffer[sizeof( encrypted_pack )];
size_t to_read = sizeof( encrypted_pack );
size_t offset = 0;

while ( true ) {
    ssize_t rb = ::read( fd, buffer + offset, to_read - offset );
    if ( rb == -1 ) { /* handle error */ }
    else if ( rb == 0 ) { /* handle EOF */ }
    else {
        offset += rb;
        to_read -= rb;
        if ( to_read == 0 ) break;
    }
}

// handle complete message in buffer 
```

You should do the same - write bytes into the socket in a loop - on the sending side too.

It "works" over loopback because MTU of that virtual interface is usually around 16K vs. 1500 for normal ethernet, so TCP transfers your data in one chunk. But you cannot rely on that.

# c# - XNA Sprite 帧不一致

> ID：12438354
> 
> 赞同：0
> 
> 时间：2012-09-15T14:50:34.330
> 
> 标签：c#, xna, sprite

我有一个爆炸精灵，有 16 帧。

每次玩家与小行星碰撞时，都会调用 loss() 函数。

在 lost() 函数中，这段代码绘制了动画 spritesheet，它贯穿了 16 帧动画。它应该始终从第 0 帧开始，但并非总是如此。

```
 expFrameID = 0;
        expFrameID += (int)(time * expFPS) % expFrameCount;
        Rectangle expRect = new Rectangle(expFrameID * expFrameWidth, 0, 63, 63);
        spriteBatch.Draw(explosion, shipLocation, expRect, Color.White, 0f, new Vector2(32, 32), 1.0f, pickupSpriteEffects, 0.1f);
        if (expFrameID == 15)
            expIsDrawn = true; 
```

时间变量如下，它获取总的游戏时间。

```
time = (float)gameTime.TotalGameTime.TotalSeconds; 
```

我认为问题在于 loss() 函数的以下行：

```
expFrameID += (int)(time * expFPS) % expFrameCount; 
```

它工作，它动画。但是它并不总是从第 0 帧开始。它从 0 到 16 之间的随机帧开始，但它仍然以每秒 16 帧的速度正确运行。

那么，如何让它始终从第 0 帧开始呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T17:00:41.867

在您的动画恶意类中，您可能希望在 draw 方法中像这样增加时间变量。

```
// This will increase time by the milliseconds between update calls.
time += (float)gameTime.ElapsedGameTime.Milliseconds; 
```

然后检查是否有足够的时间显示下一帧

```
if(time >= (1f / expFPS * 1000f) //converting frames per second to milliseconds per frame
{
    expFrameID++;
    //set the time to 0 to start counting for the next frame
    time = 0f;
} 
```

然后从精灵表中获取要绘制的矩形

```
Rectangle expRect = new Rectangle(expFrameID * expFrameWidth, 0, 63, 63); 
```

然后画出精灵

```
spriteBatch.Draw(explosion, shipLocation, expRect, Color.White, 0f, new Vector2(32, 32), 1.0f, pickupSpriteEffects, 0.1f); 
```

然后检查动画是否结束

```
if(expFrameID == 15)
{
    //set expFrameID to 0
    expFrameID = 0;
    expIsDrawn = true;
} 
```

# android - ArrayAdapter 的 getPositionForSection 和 getSectionForPosition 和 getSections 方法

> ID：12438356
> 
> 赞同：1
> 
> 时间：2012-09-15T14:50:52.840
> 
> 标签：android

解释一下和的用法`getPositionForSection(int)`和方法？`getSectionForPosition(int)``getSections()``ArrayAdapter`

我很好地解释了[ArrayAdapter 的 getViewTypeCount 和 getItemViewType 方法](https://stackoverflow.com/questions/5300962/getviewtypecount-and-getitemviewtype-methods-of-arrayadapter)。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-15T15:57:44.730

```
Charsequence alphabets = "ABCDEFGHIJKLMNOPQRSTUVWXYZ"; 
```

这里

```
A = 0
B = 1
C = 2
D = 3
E = 4
F = 5
.
.
.
Z = 25 
```

创建一个新的字母索引器

```
AlphabetIndexer alphabetIndexer = new AlphabetIndexer(cursor, sortedColumnIndex, alphabets); 
```

getSections() 检索提供给 alphabetIndexer 的字母的 String[]

```
String[] sections = (String[]) alphabetIndexer.getSections(); 
```

alphabetIndexer.getSectionForPosition(position) 检索当前位置的部分

考虑给定的情况

```
position  Data             getSectionForPosition(position)
________  _________            __________

   0      Ajdhfj j             0
   1      Aadf hdsf            0
   2      Ajfkldsahf           0
   3      Asdhfa df            0
   4      Badhf                1
   5      Bdfj sadif           1
   6      Bghoi ij             1
   7      Bjkojg o             1
   8      Cadj fkljsdf         2
   9      Cgjds kfja           2
   10     Cn khdfaj            2
   11     Cph iohsdf           2
   12     Czjfa sh             2
   13     Dfgoa hjoifaj        3
   14     Dzfjdak sfh          3
   15     Fhf adhf             5
   16     Zdfh ajdf            25 
```

获取该职位的部分

```
String section = sections[getSectionForPosition(position)]; 
```

alphabetIndexer.getPositionForSection(section) 检索数据从该部分开始的第一个位置

```
section      getPositionForSection(section)
_________    ____________________
0            0
1            4
2            8
3            13
4            13
5            15
6            15
7            15
8            15
.            .
.            .
.            .
23           15
24           15          
25           16 
```

希望这对您有所帮助。

使用alphabetIndexer的一个例子

```
public abstract class SectionedListAdapter extends ResourceCursorAdapter {

private SparseIntArray sections;
private SparseIntArray cursorPositions;
private Context mContext;
private int sortedColumnIndex;

private static final int NORMAL_LIST_VIEW = 0;
private static final int SECTION_LIST_VIEW = 1;
private static final int NULL_LIST_VIEW = 2;

public SectionedListAdapter(Context context, int layout, Cursor c,
                            boolean autoRequery, int sortedColumnIndex, int defaultBitmapResId) {
    super(context, layout, c, autoRequery);
    this.mContext = context;
    this.sortedColumnIndex = sortedColumnIndex;
    setSortedCursorColumn(c);
}

public void setSortedCursorColumn(Cursor cursor){
    if (cursor == null){
        return;
    }
    AlphabetIndexer alphabetIndexer = new AlphabetIndexer(cursor, sortedColumnIndex, "ABCDEFGHIJKLMNOPQRSTUVWXYZ");
    sections = new SparseIntArray();
    int m=0;
    int t = 'A';
    for (int i=0; i < 26; i++){
        if ((i+1) < 26) {
            int position = alphabetIndexer.getPositionForSection(i);
            int temp = alphabetIndexer.getPositionForSection(i + 1);
            if (temp != position){
                sections.put(position + m, t+i);
                m++;
            }
        } else {
            int position = alphabetIndexer.getPositionForSection(i);
            int temp = alphabetIndexer.getPositionForSection(i-1);
            if (position != temp){
                sections.put(position + m, t+i);
            }
        }
    }
    int temp = 0;
    cursorPositions = new SparseIntArray();
    for (int i=0; i<cursor.getCount() + sections.size(); i++){
        if (sections.get(i, -1) != -1){
            temp ++;
            cursorPositions.put(i, -1);
        } else {
            cursorPositions.put(i, i - temp);
        }
    }
}

@Override
public View getView(int position, View view, ViewGroup parent) {
    if (getItemViewType(position) == NORMAL_LIST_VIEW){
        if (view == null){
            view = newView(mContext, getCursor(), parent);
        }
        getCursor().moveToPosition(cursorPositions.get(position));
        bindView(view, mContext, getCursor(), position);
    } else if (getItemViewType(position) == SECTION_LIST_VIEW) {
        if (view == null){
            view = newSectionView(mContext, getCursor(), parent);
        }
        bindSectionView(view, mContext, (char)sections.get(position));
    } else {
        if (view == null){
        } else {
            view = new ViewStub(mContext);
        }
    }
    return view;
}

public abstract View newSectionView(Context context, Cursor cursor, ViewGroup parent);

public abstract void bindSectionView(View view, Context context, char text);

public abstract void bindView(View view, Context context, Cursor cursor, int position);

@Override
public boolean areAllItemsEnabled() {
    return false;
}

@Override
public boolean isEnabled(int position) {
    return cursorPositions.get(position) >= 0;
}

@Override
public int getItemViewType(int position) {
    if (cursorPositions.get(position) >= 0){
        return NORMAL_LIST_VIEW;
    }else if (cursorPositions.get(position) == -1){
        return SECTION_LIST_VIEW;
    } else {
        return NULL_LIST_VIEW;
    }
}

@Override
public int getViewTypeCount() {
    return 3;
}

private void putCursorExclusion(int position, boolean isActualPosition){
    if (isActualPosition) {
        cursorPositions.put(position, -cursorPositions.get(position));
    } else {
        int actualPosition = cursorPositions.keyAt(cursorPositions.indexOfValue(position));
        cursorPositions.put(actualPosition, -position);
    }
}

private void removeCursorExclusion(int position, boolean isActualPosition){
    if (isActualPosition){
        cursorPositions.put(position, -cursorPositions.get(position));
    } else {
        int actualPosition = cursorPositions.keyAt(cursorPositions.indexOfValue(-position));
        cursorPositions.put(actualPosition, position);
    }
}

@Override
public int getCount() {
    return cursorPositions == null ? 0 : cursorPositions.size();
}

public SparseIntArray getSections() {
    return sections;
}

public SparseIntArray getCursorPositions() {
    return cursorPositions;
}

@Override
public void bindView(View view, Context context, Cursor cursor) {
    //do nothing here
}

@Override
public Cursor swapCursor(Cursor newCursor) {
    return super.swapCursor(newCursor);
}

@Override
public void notifyDataSetChanged() {
    super.notifyDataSetChanged();
}

@Override
public void changeCursor(Cursor cursor) {
    setSortedCursorColumn(cursor);
    super.changeCursor(cursor);
}
} 
```

要使用它，只需创建一个新类扩展 SectionedListAdapter，然后提供所需的详细信息。

# jquery - jQuery自动完成延续而不是替换

> ID：12438359
> 
> 赞同：1
> 
> 时间：2012-09-15T14:51:18.610
> 
> 标签：jquery, jquery-ui, autocomplete, jquery-ui-autocomplete

我想知道如何在使用箭头移动或在 choie 上按 enter 而不是替换文本框中的整个文本时让 jquery 将自动完成选项附加到文本框？到目前为止，这是我的代码：

服务器端：

```
public ActionResult Autocomplete(string lang, string query)
        {
            try
            {
                var term = query.IndexOf(',') > 0 ? query.Substring(query.LastIndexOf(',') + 1).ToLower() : query.ToLower();
                if (!String.IsNullOrWhiteSpace(term))
                {
                    var data = context.Tags.Where(s => s.Name.StartsWith(term)).Select(x => x.Name).Take(5).ToArray();
                    return Json(data);
                }
                return Json(new string[] { });
            }
            catch
            {
                return Json(new string[] { });
            }
        } 
```

客户端：

```
 <script type="text/javascript">  
  var tagsautocomplete = '@("/" + Url.RequestContext.RouteData.Values["lang"])/pictures/autocomplete';
    </script>

 $("#submit_picture_tags").autocomplete({
        source: function (request, response) {
            $.ajax({
                url: tagsautocomplete, type: "POST", dataType: "json",
                data: { query: request.term },
                success: function (data) {
                    response($.map(data, function (item) {
                        return { label: item, value: item };
                    }))
                }
            })
        },
        minLength: 1,
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T15:14:27.493

您可以通过调整 jQueryUI 网站上的[多值](http://jqueryui.com/demos/autocomplete/#multiple)演示来做到这一点。

你可能会得到这样的结果：

```
function split(val) {
    return val.split(/@\s*/);
}

function extractLast(term) {
    return split(term).pop();
}

$("#submit_picture_tags").autocomplete({
    source: function (request, response) {
        var term = extractLast(request.term);
        $.ajax({
            url: tagsautocomplete, 
            type: "POST", 
            dataType: "json",
            data: { query: term },
            success: function (data) {
                response($.map(data, function (item) {
                    return item;
                }));
            }
        });
    },
    focus: function () {
        return false;
    },
    select: function (event, ui) {
        var terms = split(this.value);

        // remove the current input
        terms.pop();
        // add the selected item
        terms.push(ui.item.value);
        // add placeholder to get the comma-and-space at the end
        terms.push("");
        this.value = terms.join(", ");
        return false;
    },
    minLength: 1
}); 
```

我显然无法为您的数据源提供工作示例，但这里有一个类似的示例，其中包含可能有帮助的远程数据源：http: [//jsfiddle.net/RVkjV/](http://jsfiddle.net/RVkjV/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T14:56:10.233

我不确定这是否是您要查找的内容，但是 jquery ui 自动完成上有一个 appendTo 选项

[http://jqueryui.com/demos/autocomplete/#option-appendTo](http://jqueryui.com/demos/autocomplete/#option-appendTo)

# database - 在 Joomla 2.5 中获取十进制值的数据库查询

> ID：12438362
> 
> 赞同：1
> 
> 时间：2012-09-15T14:51:58.900
> 
> 标签：database, joomla2.5

我正在尝试对 Joomla 2.5 中的数据库进行查询。我有一个名为“example”的数据库，我正在尝试为 id 为 949 的用户获取名为“value”（非常原始）的某个值：

```
$db =& JFactory::getDBO();
$query = $db->getQuery(true);
$user = 949;
$db->setQuery( 'SELECT value FROM example WHERE user_id = ' . $user ); 
$result = $db->loadObjectList();
echo $result; 
```

但是，我只是得到“数组”作为结果（预期值是小数，例如 4.5）。

有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T09:05:40.847

```
$db =& JFactory::getDBO();
$query = $db->getQuery(true);
$user = 949;
$db->setQuery( "SELECT value FROM example WHERE user_id = '" . $user."'" ); 
$result = $db->loadObjectList();
echo $result; 
```

试试这个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T14:24:18.140

`$db->loadObjectList()`返回一个对象数组，回显无法显示。如果您只想从一行返回一个值，请`$db->loadResult()`改用 user。

# parsing - 读取 IPAddress 类型的 SNMP 对象索引

> ID：12438363
> 
> 赞同：2
> 
> 时间：2012-09-15T14:52:21.467
> 
> 标签：parsing, snmp, oid, mib

在一个简单的 SNMP 表（如`mib-2.interfaces.ifTable`）中，`ifIndex`是表的索引，因此您读取`ifIndex`.1（即从 的直接子节点读取值`ifIndex`）以获取表第一行的索引。很简单。

但它并不像`mib-2.ip.ipRouteTable`. 在这种情况下`ipRouteIfIndex`是索引列。就像以前一样，它被定义为 INTEGER `ifIndex`。但是，您不能读取直接子节点（即`ifIndex`.0 是直接子节点），而是需要读取`ifIndex.0.0.0.0`以获取值。那么，当它不是索引列的直接子级时，如何知道如何找到该值呢？

有一些我不理解的概念。（可能与 SNMP 对象由 . 分隔的事实有关，但 IP 地址也是如此，我不知道如何识别差异）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T16:17:29.513

请注意，在这种特殊情况下，您有一个包含多个索引的表。

事实是，您不能使用`snmp-get`service 直接读取表条目，因为索引是动态的（并且因此是 OID 地址）。但是您可以通过`snmp-get-next`(v1) 和`snmp-get-bulk`(v2) 服务发现这些价值。

例如，您可以读取索引（并存储它们以供以后查询表项）或直接读取表的项：

*   你要求 `snmp-get-next`IP *-MIB::ipAdEntNetMask*
*   回复将是*IP-MIB::ipAdEntNetMask.172.16.38.42 IPV4 255.255.0.0*
*   （所以：在这种情况下，第一个索引是 172.16.38.42！）
*   *您在IP-MIB::ipAdEntNetMask.172.16.38.42*之后迭代并询问下一个值
**   回复将是*IP-MIB::ipAdEntNetMask.172.16.11.43 IPV4 255.255.0.0**   等..直到没有其他值，或者该值不在同一棵树上*

 *该服务`snmp-get-bulk`将使您能够以这种方式直接查询 N 个值。

看看*Net-Snmp 的* `snmptable`表格做得很好：http: [//net-snmp.sourceforge.net/wiki/index.php/TUT :snmptable](http://net-snmp.sourceforge.net/wiki/index.php/TUT:snmptable)*

# menu - RCP 中的按视图命令状态？

> ID：12438365
> 
> 赞同：0
> 
> 时间：2012-09-15T14:52:48.287
> 
> 标签：menu, eclipse-rcp

我正在定义一个命令，该命令将在视图工具栏和/或上下文菜单中用于多个视图，其中一些可以有多个实例。该命令具有切换状态 ( `org.eclipse.ui.commands.toggleState`)。该文档似乎建议`org.eclipse.ui.handlers.RegistryToggleState`用作状态实现类，但这会存储每个命令的状态，而不是我需要的每个视图的每个命令。

我不需要会话之间的持久性。有没有一种简单/首选的方法来实现这一点，还是我应该实现自己的状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T15:46:13.847

我已经做到了。我在 Eclipse 中找不到任何标准 API，所以我最终为它编写了自己的东西。这是相对简单的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T04:39:43.397

AFAIK没有直接的方法。您可以按照以下步骤解决此问题

1.  实现你自己的`org.eclipse.ui.ISourceProvider`并添加一个扩展 org.eclipse.ui.services
2.  维护每个视图的状态并在其中填充状态信息`public Map getCurrentState();`

请查看以`WorkbenchSourceProvider`供参考。

# javascript - 为什么这在 IE 中的工作方式与在 Firefox 中的不同？

> ID：12438367
> 
> 赞同：0
> 
> 时间：2012-09-15T14:52:51.030
> 
> 标签：javascript, internet-explorer, firefox, internet-explorer-8

我在 html 页面中有以下代码：

```
<script type="text/javascript">      
    function industry(industryid)
    {
        if(industryid==0)
        {
            document.getElementById("SubIndustry").style.visibility="Hidden";
        }
        else
        {
            document.getElementById("SubIndustry").style.visibility="Visible";
        }
    }
</script> 
```

此处使用此代码：

```
<div class="Question">
             2\. What is the primary nature of your business?
        </div>

        <div class="Answer">
            <input type="radio" name="q2" class="Button" value="1-1" onchange='industry(0)' />
            Manufacturing/Logistics
            <br />
            <input type="radio" name="q2" class="Button" value="1-2" onchange='industry(0)' />
            Government/Schools
            <br />
            <input type="radio" name="q2" class="Button" value="1-3" onchange='industry(1)' />
            Commercial/Service/Medical/Retail/Other
        </div>

        <div id="SubIndustry">
            <div class="Question">
                Services Sub Industry
            </div>

            <div class="Answer">
                <input type="radio" name="q2-1" class="Button" value="135-55" />
                Healthcare
                <br />
                <input type="radio" name="q2-1" class="Button" value="135-56" />
                Other
            </div>

        </div> 
```

本质上这是应该发生的事情：`SubIndustry`div 开始时是不可见的，当有人选择第三个行业选项“商业/服务/医疗/零售/其他”时，`SubIndustry`div 就会出现。如果他们点击第三产业，它就会消失。

这就是它在 Firefox 中的工作方式，但在 IE8 中却不是。它表现得像是在后面“转弯”。所以当我点击第三个行业时，什么也没有发生，但如果我点击，那么 SubIndustry 就会出现。如果我然后单击它会再次消失。

那么，为什么这在 IE8 和 Firefox 中的工作方式不同呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T15:17:20.557

我认为这一定是一些错误，因为一旦您选择第三个选项，它就不会使 div 可见，但是当您**在其他地方**单击时，div 就会出现！！！！！！

我已经修改了代码并且它可以工作： -

```
<div class="Answer">
    <input type="radio" name="q2" class="Button" value="1-1" onclick="industry(0)" />
    Manufacturing/Logistics
    <br />
    <input type="radio" name="q2" class="Button" value="1-2" onclick="industry(0)" />
    Government/Schools
    <br />
    <input type="radio" name="q2" class="Button" value="1-3" onclick="industry(1)" />
    Commercial/Service/Medical/Retail/Other
</div> 
```

# html - css - 动画迭代计数总是无限的。渴望 1 次迭代

> ID：12438368
> 
> 赞同：1
> 
> 时间：2012-09-15T14:53:08.780
> 
> 标签：html, css

我有一个`div`标签覆盖了一个图像，该图像通过增加宽度和增加不透明度来进行动画处理。我只想要一次迭代（我知道这是默认值），但无论出于何种原因，它都会无限运行。我能得到一些关于如何完成单次迭代的反馈吗？先感谢您！

标记：

```
<div class="capback">
</div> 
```

CSS：

```
.capback {
background: #000;
opacity:0.7;
filter:alpha(opacity=40);
position: absolute;
height: 17px;
width: 465px;
top: 1px;
left: 1px;
color: #fff;
padding: 5 0 0 10px;
font-size: 12px;
 -moz-animation: fullexpand 25s ease-out;
 -moz-animation-iteration-count:1;
 -webkit-animation: fullexpand 25s ease-out;
 -webkit-animation-iteration-count:1;
 -o-animation: fullexpand 25s ease-out;
 -o-animation-iteration-count:1;
}

@-moz-keyframes fullexpand {

0%, 20%, 40%, 60%, 80%, 100% { width:0%; opacity:0; }

4%, 24%, 44%, 64%, 84% { width:0%; opacity:0.3; }

16%, 36%, 56%, 76%, 96% { width:465px; opacity:0.7; }

17%, 37%, 57%, 77%, 97% { width:465px; opacity:0.3; }

18%, 38%, 58%, 78%, 98% { width:465px; opacity:0; }

}

@-webkit-keyframes fullexpand {

0%, 20%, 40%, 60%, 80%, 100% { width:0%; opacity:0; }

4%, 24%, 44%, 64%, 84% { width:0%; opacity:0.3; }

16%, 36%, 56%, 76%, 96% { width:465px; opacity:0.7; }

17%, 37%, 57%, 77%, 97% { width:465px; opacity:0.3; }

18%, 38%, 58%, 78%, 98% { width:465px; opacity:0; } 

}

@-o-keyframes fullexpand {

0%, 20%, 40%, 60%, 80%, 100% { width:0%; opacity:0; }

4%, 24%, 44%, 64%, 84% { width:0%; opacity:0.3; }

16%, 36%, 56%, 76%, 96% { width:465px; opacity:0.7; }

17%, 37%, 57%, 77%, 97% { width:465px; opacity:0.3; }

18%, 38%, 58%, 78%, 98% { width:465px; opacity:0; } 

} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-15T23:59:48.900

俗话说，“问题往往出在键盘和椅子之间”。在这种情况下成立。:) 我用太多的关键帧给自己造成了麻烦。

# php - 从不同的 Excel 文件中删除重复项

> ID：12438373
> 
> 赞同：0
> 
> 时间：2012-09-15T14:53:30.477
> 
> 标签：php, mysql, excel

我在一个文件夹中有许多 excel 文件，我必须创建一个工具来读取这些文件并使用 PHP 和 MYSQL 删除文件之间的重复数据。

所以我尝试使用 Excel 阅读器读取数据并将它们存储在数据库中

*   我正在努力删除重复的字段

*   并将剩余数据导出到excel文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T09:01:32.163

试试这个，它可以帮助你复制[http://www.databasejournal.com/features/mysql/article.php/10897_2201621_2/Deleting-Duplicate-Rows-in-a-MySQL-Database.htm](http://www.databasejournal.com/features/mysql/article.php/10897_2201621_2/Deleting-Duplicate-Rows-in-a-MySQL-Database.htm)
如果你想导入使用php的数据点击[这里] [http://www.programmingfacts.com/export-mysql-data-into-excelcsv-via-php/](http://www.programmingfacts.com/export-mysql-data-into-excelcsv-via-php/)

# php - 上传文本时，列数与第 1 行的值数不匹配

> ID：12438375
> 
> 赞同：0
> 
> 时间：2012-09-15T14:53:38.790
> 
> 标签：php, mysql, text

我创建了一个文本上传功能。当我尝试将文本发布到数据库时，错误只是说：“列计数与第 1 行的值计数不匹配”。我的代码如下所示：

```
<?php

if (isset($_REQUEST['name']) && isset($_REQUEST['body']) && strlen($_REQUEST['name']) > 0 && strlen($_REQUEST['body']) > 0) {
    //get data
    $title = $_REQUEST['name'];
    $body = $_REQUEST['body'];

    mysql_connect("Server","username","password") or die(mysql_error());
    mysql_select_db("database") or die(mysql_error());

    $date = date("Y-m-d");

    //insert data
    $insert = mysql_query("INSERT INTO news VALUES ('','".mysql_real_escape_string($title)."','".mysql_real_escape_string($body)."','".mysql_real_escape_string($date)."')") or die(mysql_error());

    die("Your text has been posted!");
?> 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T14:58:00.463

您插入的字段少于或多于表中的实际字段数。为防止此类错误，最好在 sql 中明确指出您要插入的字段。像这样：

```
$insert = mysql_query("INSERT INTO news(field1, field2, field3) VALUES (... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T15:01:21.737

正如纳尔逊所说 - 你写错了字段。您的表格是结构化的：

```
id - int(11) title - varchar(100) body - varchar(1000) 
```

您正在添加：

```
id - ''
title - '".mysql_real_escape_string($title)."'
body - '".mysql_real_escape_string($body)."' 
date - '".mysql_real_escape_string($date)."' 
```

您需要将日期字段添加到表中，或将其从查询中删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T15:02:57.260

试试看：-

但请记住在插入查询中添加字段名称**（field1、field2、field3） 。**

在数据库表中使用**自动增量**id 字段设置**主键。**

 **```
<?php

$mytitle = $_REQUEST['name'];
$mybody = $_REQUEST['body'];

if (isset($mytitle) &&  strlen($mytitle) > 0  && isset($mybody) && strlen($mybody) > 0) {
    //get data

    mysql_connect("Server","username","password") or die(mysql_error());
    mysql_select_db("database") or die(mysql_error());

    $date = date("Y-m-d");

    //insert data
    $insert = mysql_query("INSERT INTO news (field1, field2, field3) VALUES ('".mysql_real_escape_string($mytitle)."','".mysql_real_escape_string($mybody)."','".mysql_real_escape_string($date)."')") or die(mysql_error());

    die("Your text has been posted!");
}    
?> 
```**

# php - 取消设置 cookie 时出现意外行为

> ID：12438377
> 
> 赞同：0
> 
> 时间：2012-09-15T14:53:46.927
> 
> 标签：php, cookies, setcookie

我在 php.ini 中取消设置 cookie 后遇到问题。这是我的代码

控制器.php

```
setcookie("alert",'String',time()+3600,'/');
header("Location: ../home.php"); 
```

主页.php

```
if(!empty($_COOKIE['alert']) && $_COOKIE['alert'] != ''){

    malert($_COOKIE['alert']);

    $_COOKIE['alert'] = '';
    setcookie('alert', '', time()-1000);
    setcookie('alert', '', time()-1000, '/');           
print_r($_COOKIE);

   } 
```

当主页加载该功能时`malert`。但我希望它在再次刷新页面时跳过 if 条件。问题是即使**再次刷新 home.php 后**，它也正在**进入 if**条件。我是否错过了有关 cookie 的页面刷新的任何信息。？

print_r 输出是

```
Array ( [PHPSESSID] => xxx [alert] => String )
Array ( [PHPSESSID] => xxx [alert] => ) 
```

**注意：**当我`.htpassword`在此文件夹中使用时，我无法使用`SESSION`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T15:52:13.563

您在 print_r() 之后调用 setcookie()。输出内容后不能调用 setcookie()，因为标头已经发送。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T14:58:23.500

你试一试`setcookie('alert', '', 1);`

# c++ - 使用 OpenSSL 库在 C++ 中将 BIO* 转换为 PKCS7*

> ID：12438379
> 
> 赞同：1
> 
> 时间：2012-09-15T14:53:57.173
> 
> 标签：c++, c, openssl, pkcs#7

我有一个关于 BIO* 到 PKCS7* 转换的问题。我想调用 PKCS7_decrypt() 函数来解密密文。在此之前，我有这段代码：

```
in = BIO_new_mem_buf(chEnc, iLength);
if (!in) {
    fprintf(stderr, "\nError in BIO_new_mem_buf in verifyEC. STDERR: ");
    ERR_print_errors_fp(stderr);
    return 0;
}

p7 = d2i_PKCS7_bio(in, NULL);
if (!p7) {
    fprintf(stderr, "Error in d2i_PKCS7_bio.\n");
    ERR_print_errors_fp(stderr);
    return 0;
} 
```

d2i_PKCS7_bio() 总是失败并返回此错误消息：

140172957116064:error:0D0680A8:asn1 编码例程:ASN1_CHECK_TLEN:错误标签:tasn_dec.c:1319:140172957116064:error:0D07803A:asn1 编码例程:ASN1_ITEM_EX_D2I:nested asn1 错误:tasn_dec.c:=PK38

知道如何解决吗？是因为编码的问题吗？还是转换问题？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:06:38.670

这可能是由于输入格式错误：d2i_PKCS7_bio 期望二进制 der PKCS7。

另一方面，如果您的输入是 pem 格式，则应改为调用 PEM_read_bio_PKCS7。

# c - 在 C 中格式化字符串

> ID：12438381
> 
> 赞同：0
> 
> 时间：2012-09-15T14:54:26.617
> 
> 标签：c, string-formatting

我想知道如何将 C printf 中的 print 语句格式化为在字母前有 4 个空格。其中空间位置由变量预先确定

```
int spaces = 4;
printf("Four spaces before the sentence gets printed") 
```

输出想

```
"    Four spaces before the sentence gets printed" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T14:59:03.253

`%s`格式说明符可以将宽度作为`int`值：

```
printf("%*s%s", 2, "", "Test"); 
```

印刷

```
 Test 
```

# php - 为什么在测试服务器上开发不好？

> ID：12438384
> 
> 赞同：3
> 
> 时间：2012-09-15T14:54:43.993
> 
> 标签：php, testing, xampp, environment

在我们当前的项目中，我们有 1\. 一个生产服务器，2\. 一个测试服务器和 3\. 几个在 Windows 下使用 xampp 的开发人员。Prod- 和 Testserver 由 UNIX 运行。

其他开发人员之一反复抱怨我们在 windows 下使用 xampp。他说我们应该在测试环境上创建一个 v-server 用于开发目的（也许每个开发人员一个 v-server，我不太清楚）。对我来说，这感觉非常错误。但我不能真正解释为什么，除了明显的原因，比如你必须连接到远程开发服务器等。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T14:59:24.463

这是我的做法。有4个阶段。

1) 本地服务器。在这里，您可以处理自己的更改、功能分支等。完成您的工作，确保它在您的机器上运行，然后请求将其拉入开发分支。

2) 开发服务器。这是开发分支中任何内容的抄本，旨在作为查看您的代码如何 a) 在实际环境中工作和 b) 与其他人的代码一起玩的一种手段。

3）“测试服务器”，这是应该进行质量检查的地方。此服务器上的设置应尽可能接近生产上的设置。并允许查看您一直在处理的所有错误修复、功能和改进，并予以解决或报告。

4) 生产。当代码出现在此处时，它应该已经稳定并可以使用了。这应该是客户的“最终产品”（即使您仍在修复错误/进行维护）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T15:25:53.923

如果环境的配置都尽可能相似，那么当您在环境之间移动（从开发到测试到实际运行）时，您不太可能会感到意外。

与在基于 Unix/Linux 的服务器上运行相比，通过 XAMPP 在 Windows 下运行 PHP 会导致行为上的细微差别。必须处理这些会给您的开发增加不必要的开销，并增加无法及时发现错误的风险。

在您的办公室运行虚拟服务器允许您继续使用 Windows 桌面，但即使您正在编写代码，也可以在生产服务器的准确模拟上运行您的代码。它还可以简化系统管理员的工作，因为当您需要升级 PHP、设置备份等时，他们不必管理大量单独的 PC。

至于不便之处，如果您使用“samba”，这没什么大不了的 - 开发服务器上的文件可以作为 Windows 文件共享访问，因此您可以继续编辑它们，就像它们在您自己的机器上一样. 几乎唯一需要直接（通过 SSH）连接到服务器的时候是当您更改 Apache 配置并需要重新启动/重新加载守护程序以使更改生效时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T15:12:08.440

管理专用开发环境的一个好处是您可以实施自动构建过程，定期重新部署开发服务器。这增加了在开发周期早期发现不兼容更改的可能性。

# ruby - 无法使用 CORS 将文件上传到 AWS S3 存储桶

> ID：12438386
> 
> 赞同：0
> 
> 时间：2012-09-15T14:55:17.713
> 
> 标签：ruby, amazon-s3, amazon-web-services, sinatra

我只是在尝试此博客中指定的示例，但我收到此错误“无法联系签名脚本。状态 = 404”。我遵循了博客中指定的所有步骤，还仔细更改了 AWS 管理控制台中的 CORS 配置。我无法弄清楚问题所在。请帮帮我。

这是博客链接[http://www.ioncannon.net/programming/1539/direct-browser-uploading-amazon-s3-cors-fileapi-xhr2-and-signed-puts/](http://www.ioncannon.net/programming/1539/direct-browser-uploading-amazon-s3-cors-fileapi-xhr2-and-signed-puts/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T21:13:58.117

我遇到了与您尝试遵循此博客文章中的示例相同的问题。我写了一篇文章，展示了我必须做的一切才能让它对我有用。

[https://blog.pjam.me/posts/direct-upload-to-s3/](https://blog.pjam.me/posts/direct-upload-to-s3/)

希望它对你有用。

# php - 如何添加或删除具有相同表单的电子邮件？

> ID：12438390
> 
> 赞同：0
> 
> 时间：2012-09-15T14:56:02.197
> 
> 标签：php, codeigniter

我现在使用codeigniter，我想根据复选框值添加或删除记录。

就像如果“发送零”然后删除，或者如果“发送一个”值然后添加。
这个任务怎么做？

```
 <!-- Mail Menu Start -->
    <div class="block">
        <div class="titleSmal"><img src="<?= base_url(); ?>global/site/images/mailMenu.png" alt="" /></div>
        <div class="content">
            <form action="<?= base_url(); ?>mailinglist/send" method="post">
                <fieldset class="form vote">
                    <legend>&nbsp;</legend>
                    <input id="e-mail" class="textBox med" name="ML_Email" value="<?= set_value('ML_Email')?>" /><span class="correct">accepted..</span><br />

                    <input id="subscription" type="radio" name="status" value="1" /><label for="answer1" class="label">subscription</label>
                    <input id="unsubscribe" type="radio" name="status" value="0" /><label for="answer2" class="label">unsubscribe</label><br />
                </fieldset>
                <input id="submit" type="submit" value="submit" class="button sml" />
            </form>
        </div>
    </div><!-- Mail Menu End --> 
```

控制器功能

```
 function send() {
        $this->form_validation->set_error_delimiters("<span class='incorrect'>", "</span>");
        $this->form_validation->set_rules('ML_Email', 'البريد الالكتروني', 'trim|required|xss_clean|valid_email');
        if ($this->form_validation->run() == false) {
            $this->view('site/sending_error');
        } else {
            if($this->input->post('status')==1)
            $this->mailinglist->send();
            echo $this->db->last_query();
            exit;
            $this->view('theme/msg', $data);
        }
    }

} 
```

模型函数

```
function send()
{
   $this->db->set('ML_Email', $this->input->post('ML_Email'));
   $this->db->set('status', $this->input->post('status'));
   $this->db->set('ML_Date',  date("l jS \o\F\ F Y H:i:s a"));
   $this->db->insert('d_mailinglist');
   return TRUE;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T15:06:26.290

只需检查状态是 1（插入）还是 0（删除）

**控制器**

```
function send() {

    $this->form_validation->set_error_delimiters("<span class='incorrect'>", "</span>");
    $this->form_validation->set_rules('ML_Email', 'البريد الالكتروني', 'trim|required|xss_clean|valid_email');

    if ($this->form_validation->run() == false) 
    {
        $this->view('site/sending_error');
    } 
    else 
    {
        $this->mailinglist->send($this->input->post('status'));
        $this->view('theme/msg', $data);
    }
} 
```

**模型**

```
function send($status = null)
{
    if( ! $status)
    {
        $this->db->where('ML_Email', $this->input->post('ML_Email'));
        return $this->db->delete('d_mailinglist');
    }
    else
    {
        $this->db->set('ML_Email', $this->input->post('ML_Email'));
        $this->db->set('status', $this->input->post('status'));
        $this->db->set('ML_Date',  date("l jS \o\F\ F Y H:i:s a"));
        return $this->db->insert('d_mailinglist');
    }

} 
```

# mysql - MySQL 左连接？

> ID：12438392
> 
> 赞同：0
> 
> 时间：2012-09-15T14:56:10.063
> 
> 标签：mysql, sql, join, left-join

我有一个`cars(id, name)`包含 20 行的表。另一个表`carLog(username, car, count)`包含计算玩家购买的汽车的行（如果他们没有购买汽车，则没有行）

我希望我的查询返回所有 20 辆车以及额外的连接信息，如果它们在`carLog`表中有一行但我无法让它工作。

```
SELECT * FROM cars LEFT JOIN carLog ON cars.id=carLog.car 
```

这将返回数百行，我希望它返回 20 行（每辆车一个），如果用户名购买了汽车，则该行中的额外信息：

```
WHERE carLog.username='Juddling' 
```

我不知道我是否打算使用 GROUP BY、WHERE 或其他类型的连接！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-15T15:02:59.770

将用户名条件从`WHERE`子句移动到`ON`子句。

```
SELECT *
FROM cars
LEFT JOIN carLog
  ON cars.id=carLog.car
     AND carLog.username='Juddling' 
```

当 JOIN 已经完成时，应用 WHERE 子句。这意味着，它将丢弃 LEFT JOIN 添加的 NULL 行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T15:02:02.610

当您从外部连接限制表时，您必须将条件放在 中`on`，而不是`where`：

```
select * from cars
left join carLog on cars.id = carLog.car and carlog.username = 'Juddling' 
```

# debugging - 通过 USB 连接到 PC 时强制使用蜂窝数据

> ID：12438394
> 
> 赞同：0
> 
> 时间：2012-09-15T14:56:19.810
> 
> 标签：debugging, windows-phone-7, cellular-network

我正在调试我的 Windows Phone 应用程序中的一些崩溃，我只能在使用蜂窝数据连接时重现这些崩溃。但是，当我将手机连接到 PC 以在 Visual Studio 中调试崩溃时，我的手机正在使用我的计算机（快速）Internet 连接，然后我无法重现崩溃。这可能与蜂窝数据连接速度慢或其他什么有关...

那么，即使手机通过 USB 连接到 PC，是否有办法强制应用使用蜂窝数据连接？

或者，当我在与 PC 断开连接的情况下对其进行测试时，我能否以某种方式从电话中获取一些堆栈跟踪？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T15:54:12.177

通常我只是关掉电脑和手机上的wifi。很简单的解决方案。:)

# php - 解析 XML 文件超时

> ID：12438397
> 
> 赞同：0
> 
> 时间：2012-09-15T14:56:46.740
> 
> 标签：php, xml

我在解析 1986 行的 XML 文件时遇到问题..它给了我执行超时！！

这是我的代码：

```
$XML_File = simplexml_load_file("EXTERNAL URL");

$projects = $XML_File->channel->item;
$i = 0;
while($projects)
{
    $title = $projects[$i]->title;
    $link = $projects[$i]->link;
    $description = $projects[$i]->description;
    $category = $projects[$i]->category;
    $i++;
} 
```

当我运行它时，它在 30 秒后超时，没有返回任何结果！！

当我将while更改为for循环时..最多4个它工作正常..有没有办法解析一个大文件？还是我应该转向创建桌面应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T15:03:15.170

```
$XML_File = simplexml_load_file("EXTERNAL URL"); 

$projects = $XML_File->channel->item; 
$i = 0; 
while($projects) 
{ 
    $title = $projects[$i]->title; 
    $link = $projects[$i]->link; 
    $description = $projects[$i]->description; 
    $category = $projects[$i]->category; 
    $i++; 
} 
```

我认为这永远不会结束。您只是在检查是否`$projects`存在。

也许这样的事情会起作用：

```
while(isset($projects[$i]))
.... 
```

# javascript - 如果不直接触发，jquery如何停止事件？

> ID：12438398
> 
> 赞同：0
> 
> 时间：2012-09-15T14:57:00.333
> 
> 标签：javascript, jquery, events, javascript-events

可以说有 a`textbox`和 a `button`。在单击按钮时执行功能，在`focusout`文本框上单击按钮。我想知道的是，有没有办法，我可以确定用户`clicked`按钮的天气，*或者*它是由`focusout`事件触发的`textbox`，这样我可以*在*`click`事件中做一些自定义工作，如果*它*是由文本框触发`focusout`的？

我可以写一些代码，但我什至不知道从哪里开始，我知道 jquery`event`和`event.which`属性，但我想知道它/它们在这种情况下是否有用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T15:03:31.310

您可以使用 event.target 来确定哪个 DOM 元素发起了事件，然后您可以检查这是按钮还是文本框。

查看更多信息：[http ://api.jquery.com/event.target/](http://api.jquery.com/event.target/)

从文档：

> ```
> event.target 
> ```
> 
> 目标属性可以是为事件注册的元素或它的后代。将 event.target 与 this 进行比较通常很有用，以确定是否由于事件冒泡而正在处理事件。当事件冒泡时，此属性在事件委托中非常有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T15:13:38.027

这取决于您如何从`textarea` `blur`事件触发函数，如果您只是`click`使用以下方法触发事件：

```
$('#btn').click(
    function(e){
        buttonActivation(e);
    });

$('#txt').blur(
    function(e){
        $('#btn').click();
    }); 
```

然后我建议评估该`originalEvent`对象以查看原始事件是什么（如果没有，`originalEvent`则该函数由程序`click`事件调用，使用 jQuery；而如果`originalEvent.type`评估为，`click`则必须单击该按钮。

```
function buttonActivation(e) {
    if (!e) {
        return false;
    }
    else {
        var oEvent = e.originalEvent;
        if (oEvent === undefined) {
            console.log('Programmatic event');
        }
        else if (oEvent.type == 'click') {
            console.log('User-initiated event');
        }
    }
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/CSej9/)。

但是，如果您使用的是以下内容（只需从不同的地方调用相同的函数）：

```
$('#btn').click(
    function(e){
        buttonActivation(e);
    });

$('#txt').blur(
    function(e){
        buttonActivation(e);
    }); 
```

然后我建议直接评估`e.target`或`e.type`：

```
function buttonActivation(e) {
    if (!e) {
        return false;
    }
    else {
        var oEvent = e.type;
        if (oEvent === 'blur') {
            console.log('Programmatically-triggered event, on ' + oEvent);
        }
        else if (oEvent == 'click') {
            console.log('User-initiated ' + oEvent + ' event');
        }
    }
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/CSej9/1/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T15:25:30.747

您可以在触发事件时[**传递附加参数**](http://jsfiddle.net/f0t0n/Qb92X/)并在事件处理程序中检查它们。

所以如果你写

`button$.trigger('click', 'hello');`

然后你可以像这样编写处理程序

```
button$.on('click', function(e, someStr) {
    console.log(someStr || 'Nothing passed');
    // Obviously if someStr is undefined, the user clicked the button,
    // otherwise the $.trigger() method has been called.
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T15:11:15.363

您可以使用`event.target`. 默认情况下，jquery 将事件提供给处理函数。这是一个例子：[jsfiddle](http://jsfiddle.net/dMq8R/1/)

# c# - C# 和 Moq - 如何断言未引发事件

> ID：12438400
> 
> 赞同：3
> 
> 时间：2012-09-15T14:57:45.550
> 
> 标签：c#, unit-testing, events, moq

我有一个应用程序，它根据 Sim 对象的状态引发事件。特别是，如果 Sim 的状态发生变化——即从 PinRequired 变为 Accessible——将引发 OnStatus 事件。事件通知新线程上的侦听器。

我在单元测试中使用 Moq 并且能够断言 OnStatus 是这样引发的：

```
 [Test]
    public void TestOnStatusIsRaised()
    {
        Sim sim = new Sim();

        sim.OnStatus += OnStatus;

        lock (this)
        {
            sim.UpdateSimInfo(new Info("a new status"));
            Monitor.Wait(this);
        }

        Assert.IsTrue(_onStatusCalled);
    }

    private void OnStatus(SimStatus obj)
    {
        lock (this)
        {
            _onStatusCalled = true;
            Monitor.Pulse(this);
        }
    } 
```

如您所见，使用 Monitor 类，我可以等到引发事件后再继续并断言 _onStatusCalled 标志已设置为 true。

当我想断言没有引发事件时，我的困难就出现了。我不能使用 Monitor 等待事件不被引发，因为测试会永远等待！我可以在等待中添加超时，但这似乎是一个肮脏的黑客行为。

我尝试了以下方法：

```
 [Test]
    public void TestOnStatusIsNotFired()
    {
        Sim sim = new Sim();
        sim.OnStatus += onStatus => Assert.Fail("OnStatus Was called");

        sim.UpdateSimInfo(new Info("the same status"));
    } 
```

但它不起作用 - 在修复代码以确保不引发事件之前，测试总是通过。我什至单步执行了代码，并观察到`Assert.Fail()`了 .

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T15:40:35.460

简而言之，您*不需要对*多线程代码进行单元测试。您将其拆分为单线程部分并分别测试每个部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T15:05:58.347

如果您也有 NoStatus 事件怎么办。

```
[Test]
public void TestOnStatusIsNotFired()
{
    Sim sim = new Sim();
    var mre = new ManualResetEvent(false);
    sim.OnStatus += onStatus => { mre.Set(); Assert.Fail("OnStatus Was called");}
    sim.NoStatus += () => { mre.Set();}

    sim.UpdateSimInfo(new Info("the same status"));
    mre.WaitOne()
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T15:40:07.413

如何使用类似的东西：

```
mock.Verify(foo => foo.Execute("ping"), Times.Never()); 
```

您还可以验证是否已通过以下方式调用 OnStatus：

```
mock.Verify(foo => foo.Execute("ping"), Times.AtLeastOnce()); 
```

试试这个链接以获得很多好的简短示例：[http ://code.google.com/p/moq/wiki/QuickStart](http://code.google.com/p/moq/wiki/QuickStart)

# php - 如何使用php domdocument回显包含html标签的节点内容

> ID：12438401
> 
> 赞同：3
> 
> 时间：2012-09-15T14:57:46.400
> 
> 标签：php, domdocument, dom-node

我有一个 html 节点的 Domnodelist，我想回显它，包括它们的 html 标签，以便我可以应用正则表达式。当我这样做时：

```
 foreach ($nodeList as $key => $node) {
               echo $node->nodeValue;
            } 
```

我只得到节点的文本部分，没有 html 标签。

当我尝试时：

回声$节点->保存HTML；

我收到错误：未定义的属性：DOMElement::$saveHTML

我怎样才能做到这一点？

提前致谢，

账单

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-15T15:00:00.067

[`saveHTML`](http://php.net/manual/en/domdocument.savehtml.php)是一个函数，所以你需要调用它（你错过了括号）。它也是一部分`DOMDocument`；该节点将作为参数传入。

所以正确的形式是：

```
echo $document->saveHTML($node); 
```

重要提示：`saveHTML`仅支持 PHP 5.3.6 以后的参数。

但是，人们`DOMDocument`专门使用它以便他们可以在*不*诉诸正则表达式的情况下对其进行处理。看来你在这里试图做相反的事情。如果是这样，请重新考虑您的方法——正则表达式是一种处理 HTML 的 hacky 方式，一旦您决定做任何不完全无关紧要的事情，就会带来麻烦。

# java - BaseAdapter with section, listview - 添加游标列表数据

> ID：12438404
> 
> 赞同：2
> 
> 时间：2012-09-15T14:58:00.057
> 
> 标签：java, android, android-layout

我是新来的，如果有人能帮助我解决我一直遇到的这个小危机，那就太好了。我一直在关注 Jeff Sharkeys 的独立列表适配器教程，该教程可以在[此处](http://jsharkey.org/blog/2008/08/18/separating-lists-with-headers-in-android-09/)找到，并且我已经按照他的解释方式进行了适当的操作。

我的问题是我有一个数据库，这是一个预制的数据库，它有一个表，我试图使用 Jeffs 适配器将提取的数据放入列表视图中。我需要根据 Category ID 列将这些数据放在不同的部分中。

我目前从中提取数据的表是 Food 表，它有 6 列，categoriID、menuID、Item、Description、price 和一个 PK _id

我的数据库在其他活动中正常工作，我使用 SimpleCursorAdapter 将数据绑定到列表视图。（来自其他表）

我在 Database Helper 类中使用以下方法来检索我需要的数据

```
public List<FoodModel> getData(String catid, String menuid) {
            List<FoodModel> FoodListModel = new ArrayList<FoodModel>();
    Cursor cursor = myDataBase.query(FOOD_TABLE, new String [] {FOODITEM_COLUMN, FOODITEMDESCRIPTION_COLUMN,FOODPRICE_COLUMN}, "catid = ? AND menuid = ?",
      new String[] { catid, menuid},null, null, null, null);   

    if (cursor.moveToFirst()){
    do{
        FoodModel FoodModel = new FoodModel();
            FoodModel.setItem(cursor.getString(0));
            FoodModel.setdescrription(cursor.getString(1));
            FoodModel.setprice(Double.parseDouble(cursor.getString(2)));
            FoodListModel.add(FoodModel);} while (cursor.moveToNext());
    }
return FoodListModel;
 } 
```

Food Model 类是存储游标数据的标准 get set 类。

这个公共方法在我的主要活动（jeffs ListSample.java）中相应地工作，我使用输出到日志猫所需的信息

```
 Log.d("Reading: ", "Testing Cursor");
            List<FoodModel> Data1 =  dba.getData("1", "1");
            for (FoodModel fd : Data1){
                String log = "Item: "+fd.getitem()+" ,Description: " + fd.getdescription() + " ,Price: " + fd.getprice(); 
                Log.d("Name: ", log); 
```

这会输出我需要放入 SeperateListAdapter 的 1 部分的所有数据的列表，但会输出到日志 cat

我试图输出到列表视图的三件事是项目、描述和价格。

我的问题是如何将此数据添加到正确部分下的列表视图中？

正如杰夫所示，反对手动插入它

```
 List<Map<String,?>> security = new LinkedList<Map<String,?>>();  
                    security.add(createItem("Remember passwords", "Save usernames and passwords for Web sites"));  
                    security.add(createItem("Clear passwords", "Save usernames and passwords for Web sites"));  
                    security.add(createItem("Show security warnings", "Show warning if there is a problem with a site's security")); 
```

我不想通过粘贴我所有的课程来开始我使用这个网站的第一次体验，因为这是我第一次使用这个网站，我的英语不是最好的，我花了一段时间来写这个我希望它是可以接受的作为一个问题，如果有人可以帮助我或指出我正确的方向，我会非常满意。

**编辑：** 很乐意发布我的其余代码只是不想用大量信息轰炸每个人

# php - 来自多个表的 PHP 对象 - 性能

> ID：12438408
> 
> 赞同：1
> 
> 时间：2012-09-15T14:58:19.910
> 
> 标签：php, mysql, object

我的老板给了我一个任务，那就是建造一个比我们目前拥有的更好的成型物体。在过去的几年里，公司一直在使用意大利面锅，我被请来清理它。

我正在尝试获取一个 PHP 用户类，以便在实例化时看起来像这样：

```
<?php
$user = new User();
$user->firstname;
$user->lastname;
$user->haircolor;
$user->eyecolor;
$user->homephone; 
```

等等等等。现在，如果它们都在一张表上，但为了获得所有这些数据，我将不得不查询几张表。当然可以。但是，如果我要定义一个类来获取所有用户信息，则必须在构造函数中调用多个查询或大量连接。正确的？

有一个更好的方法吗？目标是用最佳加载时间更好地组织代码。老板特别想要变量而不是函数。我不知道这背后的原因是什么，他只是让我这样做。

所以，我的具体问题是，有没有比调用多个查询和/或使用巨大的 JOIN 更简单、更快的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T15:17:28.743

```
class User  {
    public $id;
    public $firstname;
    public $lastname;
    public $email;
    public $creationdate;
    public $user_image;

    public static function find_all(){
        return self::find_by_sql("SELECT * FROM users");
    }

    public static function find_by_id($id=0){

        $result_array = self::find_by_sql("SELECT * FROM users WHERE id={$id} LIMIT 1");
        //$found=$database->fetch_array($result_set);
        return !empty($result_array)?array_shift($result_array):FALSE;
    }

    public static function find_by_sql($sql=""){
        global $database;
        $result_set=$database->query($sql);
        //return $result_set;

        $object_array=array();
        while($row=$database->fetch_array($result_set)){
            $object_array[]=self::instantiate($row);
        }
        return $object_array;

    }

    private static function instantiate($record){
        //long form
        $object=new self;

        //dynamic
        foreach ($record as $attribute=>$value){
            if($object->has_attribute($attribute)){
                $object->$attribute =$value;
            }
        }

        return $object;
    }

    private function has_attribute($attribute){
        //get_object_vars returns an associative array with all attributes
        $object_vars=get_object_vars($this);
        //we will return true or false
        return array_key_exists($attribute, $object_vars);
    }

        //dynamically add the public class variable and it will automatically assign the value
//if you are joining the queries than it will also work
//and your code will work here
//$user = new User();
//$user->firstname;
//$user->lastname;
//$user->haircolor;
//$user->eyecolor;
//$user->homephone;

}

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T15:22:27.157

除了我的评论之外，您还可以为您的数据库信息实现一种延迟加载。例如，假设您有一个用户，并且该用户可以作为朋友连接到其他用户。但是，如果您每次创建 User 对象时都不需要好友（这也允许您在对象上多次使用 getFriends() 但只从数据库中获取一次数据）：

```
class User {
    private $id;
    private $name;
    private $friends;

    public function __construct($id) {
        // If you have a caching solution, you can check the cache first
        // Load user from database, fetch and set id and name.
    }

    public function getFriends() {
        if ($this->friends != null) {
            return $this->friends;
        }

        // If you have a caching solution, you can check the cache first
        // Fetch friends from databse, set instance variable and return it
    }

    public function save() {
        // Save information to database and possibly cache
    }
} 
```

# internet-explorer-9 - IE9 开发人员工具破坏了我的浏览器（导致某种循环）

> ID：12438412
> 
> 赞同：1
> 
> 时间：2012-09-15T14:59:04.347
> 
> 标签：internet-explorer-9, developer-tools

每当我尝试将 IE9 与开发人员工具一起使用时，它都会导致页面不断刷新。见这里：[http ://screencast.com/t/OgFVYvwhlg](http://screencast.com/t/OgFVYvwhlg)

当开发工具窗口打开时，刷新开始发生，然后当窗口关闭时，它停止。

关于如何调试它的任何建议或想法？

# java - 为什么 void 关键字不用作方法参数？

> ID：12438419
> 
> 赞同：0
> 
> 时间：2012-09-15T14:59:55.207
> 
> 标签：java, language-design

关键字仅用作返回类型，`void`表示方法不返回值。但是为什么不能`void`在方法定义中作为形参来表示它不接受任何参数，比如：

```
void fun(void){
    ...
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-15T15:01:45.557

这是不必要的。如果方法没有参数，指定一个空参数 set *()*就足够了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-15T15:06:21.140

我相信C没有参数意味着它忽略了任何给定的参数，例如你可以写`int main()`或者`int main(int argc, char** argv)` 这意味着当你想清楚你真的意味着你不需要写任何参数`(void)`

在 Java 中，你必须`()`意味着没有参数，所以你不需要另一种说法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T15:11:17.607

在 Java 中，如果你想定义一个没有参数的方法，你只需要拥有`method()`. void 并不明确表示没有任何意义，它意味着没有返回值。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-15T18:25:24.570

int func(void) 是 Bjarne Stroustrup 在 C++ 中引入的一个组合，因为 int func() 在 C 中已经意味着任意数量的参数。这个问题在 Java 中不会出现，所以引入它是多余的。

# iphone - 在xcode中的设定区域内移动对象

> ID：12438422
> 
> 赞同：0
> 
> 时间：2012-09-15T15:00:00.023
> 
> 标签：iphone, objective-c, c, xcode, object

嗨，我有一个可以在触摸时移动的对象，但我需要它只能在设定的区域内移动，因此：

x 0 到 320 和 y 0 到 200

`player.center = [myTouch locationInView:self.view];`

有任何想法吗？

这样如果用户试图将其移出该区域，它只会挂在外边缘。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T15:07:01.223

你可能想做这样的事情：

```
CGRect validRect = CGRectMake(0.0, 0.0, 320.0, 200.0);
CGPoint touchPoint = [myTouch locationInView:self.view];
if(CGRectContainsPoint(validRect, touchPoint) {
    player.center = touchPoint;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T15:08:03.057

这里的代码其实很简单，就是想检测是否超出了边界，如果超出了，就纠正。假设`player.center`类似于`NSPoint`，代码可能类似于：

```
if(player.center.x <= 0){
    player.center.x = 0;
}else if(player.center.x >= 200){
    player.center.x = 200;
}
if(player.center.y <= 0){
    player.center.y = 0;
}else if(player.center.y >= 300){
    player.center.y = 300;
} 
```

如果您希望边缘不通过侧面，那么您可以执行以下操作：

```
if(player.center.x - player.xSize / 2 <= 0){
    player.center.x = 0 + player.xSize / 2;
} 
```

对于其他 x 界限和 y 界限也是如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T15:06:50.623

您可以使用 MIN 和 MAX 来约束一个值。

```
CGFloat minX = 0.0f;
CGFloat maxX = 320.0f;
CGFloat minY = 0.0f;
CGFloat maxY = 200.0f

CGPoint location = [myTouch locationInView:self.view];
CGPoint center = CGPointMake(MIN(minX, MAX(maxX, location.x)),
                             MIN(minY, MAX(maxY, location.y)));
player.center = center; 
```

# ios - Ccocs2d UIScrollView 停止触摸响应

> ID：12438424
> 
> 赞同：0
> 
> 时间：2012-09-15T15:00:06.817
> 
> 标签：ios, xcode, cocos2d-iphone

我在我的 cocos2d 项目中使用了 uiscrollview，使用了一些 cocos2d 文件的修改和我从 SO 链接获得的出色的 CCScrollView 类。它工作正常，但是当我移动到下一个场景时，新场景没有响应触摸（而之前它工作正常）。

我正在使用 iOS 5.1 和 cocos2d 2.x。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T15:46:32.270

好的，你需要这样做：

[aScrollView removeFromSuperview];

我不太清楚为什么在 CCScrollView 的 dealloc 中你有： [self removeFromSuperview];

我猜它以某种方式被保留？无论如何，它有效。

# php - 根据变量包含不同的内容

> ID：12438428
> 
> 赞同：3
> 
> 时间：2012-09-15T15:00:18.297
> 
> 标签：php

我正在使用此方法根据从上一页传递的变量显示不同的内容。

```
 <?php
    if (isset($_GET['click'])) {
        if($_GET['click'] == 'person'){
          file_put_contents('person.txt', ((int) file_get_contents('person.txt')) + 1);
          include 'resultperson.php';
        } elseif ($_GET['click'] == 'text'){
          file_put_contents('text.txt', ((int) file_get_contents('text.txt')) + 1);
          include 'resulttext.php';
        } elseif ($_GET['click'] == 'online'){
          file_put_contents('online.txt', ((int) file_get_contents('online.txt')) + 1);
          include 'resultonline.php';
        }
    } else {
        include 'resulttext.php';
    } 
    ?> 
```

问题是，当我点击刷新时，该`file_put_contents()`功能将再次执行。这只是我用来*跟踪*用户点击该按钮多少次的一种方式。

如何防止在刷新页面时注入整数的增量？

或者如果有一个更简单的方法来做这一切？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T15:09:21.760

使用会话可能是您最好的选择，除非您不介意当用户关闭浏览器并再次访问该页面时它会被触发。

```
// This will be set to true if the user has the session variable set
$clicked = isset($_SESSION['clicked']);

// Check if get variable 'click' is set, and that $clicked is false. 
// If 'click is set and $clicked if false, the variable $click is set to the 
// value of $_GET['click'] (for example 'person'). Other wise it will be set to false.
$click = (isset($_GET['click']) && !$clicked) ? $_GET['click'] : false;   

// Set the session variable 'clicked' if it isn't set so that the next time 
// the user visits, we'll know
if (!$clicked) {
    $_SESSION['clicked'] = 1;
}

if($click == 'person'){
    file_put_contents('person.txt', ((int) file_get_contents('person.txt')) + 1);
    include 'resultperson.php';
} elseif ($click == 'text'){
    file_put_contents('text.txt', ((int) file_get_contents('text.txt')) + 1);
    include 'resulttext.php';
} elseif ($click == 'online'){
    file_put_contents('online.txt', ((int) file_get_contents('online.txt')) + 1);
    include 'resultonline.php';
} else {
    include 'resulttext.php';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T15:08:23.867

要区分用户何时访问该页面与您之前的页面，而不是点击刷新，请查看`$_SERVER["HTTP_REFERER"]`变量。该变量将包含用户访问时上一页的 url，但~~在刷新的情况下，该变量将不存在，因为用户没有来自任何页面（他没有点击链接来访问您的页面）而是发送请求的浏览器~~。

如果您的上一页因此被称为“mypage.php”，请替换您的以下行：

```
if (isset($_GET['click'])) { 
```

对于这个：

```
if (isset($_GET['click']) && isset($_SERVER["HTTP_REFERER"]) && strpos($_SERVER["HTTP_REFERER"],'mypage.php')) { 
```

那应该做你想做的事。

**更新**：

上述解决方案将不起作用，因为在浏览器上点击刷新时，页面将保持相同的 Referer 值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T15:08:54.270

1.  您可以使用 ajax 调用来触发该操作。这样，网址就被称为“幕后”，而无需重新加载内容。我推荐这个选项；使用[JQuery ajax](http://api.jquery.com/jQuery.ajax/)它可以像编写一个 onClick 函数 `function clicked(){$.ajax("yourClickCounter.php");}`然后添加`<button ... onClick="clicked()">...</button>`到 html 一样简单。当然，您必须在单独的 PHP 文件中完成 clickCounting，但它的优点是每次单击按钮时都不会重新加载所有内容。

2.  您可以使用会话变量，例如`$_SESSION['has_clicked']`. 这要求您首先开始一个会话，使用`session_start()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T15:09:30.890

如果要跟踪用户来自哪里，可以使用 http 标头的 referer 字段。

如果这不是一个选项，您可以将单击链接指向注册单击的 php 页面，然后对`header("Location: x.php");`显示内容的页面执行 a。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-15T15:14:27.343

这应该可以工作，并且更简单，更容易扩展：

```
<?php
if (isset($_GET['click']) && isset($_SERVER["HTTP_REFERER"])) {
    $click = $_GET['click'];
    if (in_array($click, array('person', 'text', 'online')) {
      file_put_contents($click . '.txt', ((int) file_get_contents($click . '.txt')) + 1);
      include 'result' . $click . '.php';
    }
} else {
    include 'resulttext.php';
} 
?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-15T15:10:21.933

使用您的实际代码，您无法阻止页面刷新时整数的增量。

问题是：重要吗？您希望您的追踪器有多重要和准确？

有一种方法可以将增量附加到按钮单击上，即使用 AJAX。您可以将处理程序附加到按钮单击事件，从而对 PHP 脚本进行适当的 AJAX 调用。

这并不简单，但很简单。

此解决方案和您的实际解决方案都无法阻止恶意用户发出 HTTP 请求来调用您的 PHP 脚本，从而随意增加您的计数器......

# winforms - 在 c# Forms 中调用不同形式的按钮？

> ID：12438433
> 
> 赞同：0
> 
> 时间：2012-09-15T15:00:51.380
> 
> 标签：winforms, c#-4.0, button

我是 C# 新手，我正在创建一个应用程序，其中需要使用两种形式，一种是`Mainform`，另一种是`DialogForm`.

有`DialogForm`两个按钮`btnYes`和`btnNo`。

每当用户单击关闭按钮时，都会`FormClosing`调用我正在调用的事件`DialogForm`，如下所示：

```
DialogForm ex = new DialogForm();
ex.ShowDialog(this); 
```

现在我想给`e.cancel=false`for`btnYes`和`e.cancel=true`for `btnNo`。（这由我的先生解释，只是基础知识）

我知道如何为`Button`相同的 a 赋予功能，`Form`但如果不同，我不知道如何`Form`。

我已经浏览了一些[链接](https://stackoverflow.com/questions/8566/best-way-to-access-a-control-on-another-form-in-winforms)，但由于我是 c# 新手，所以我无法理解。如果您至少向我提供一些可以理解的链接。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T15:08:52.230

表单有一个属性`DialogResult`。您可以在按钮事件处理程序中设置它。

```
DialogResult = DialogResult.Yes;
// or
DialogResult = DialogResult.No; 
```

然后你可以像这样调用表格

```
if (ex.ShowDialog(this) == DialogResult.Yes) {
    // Do something
} else {
    // Do something else
} 
```

* * *

您还可以`CancelButton`在属性窗口中设置表单的属性。微软说：

> 获取或设置用户按 ESC 键时单击的按钮控件。

表单也有一个`AcceptButton`属性。微软说：

> 获取或设置用户按 ENTER 键时单击的窗体上的按钮。

# objective-c - 在应用启动之前从 JSON 文件填充 CoreData 数据模型

> ID：12438437
> 
> 赞同：3
> 
> 时间：2012-09-15T15:01:05.707
> 
> 标签：objective-c, ios, json, sqlite, core-data

我正在创建一个 iPad 应用程序，它以 JSON 格式显示从 API 获得的数据。我的核心数据模型有几个实体（国家、事件、谈话……）。对于每个实体，我都有一个 .json 文件，其中包含实体的所有实例及其属性以及关系。

我想在应用程序启动之前用这些实体填充我的核心数据数据模型（否则 iPad 需要大约 15 分钟才能使用工厂方法从多个 JSON 文件创建实体的所有实例）。

我目前正在将数据导入 CoreData，如下所示：

```
-(void)fetchDataIntoDocument:(UIManagedDocument *)document
{
dispatch_queue_t dataQ = dispatch_queue_create("Data import", NULL);
dispatch_async(dataQ, ^{
        //Fetching data from application bundle
    NSURL *countriesurl = [[NSBundle mainBundle] URLForResource:@"contries" withExtension:@"json"];
    NSURL *eventsurl = [[NSBundle mainBundle] URLForResource:@"events" withExtension:@"json"];

        //converting the JSON files to NSDictionaries
    NSError *error = nil;
    NSDictionary *countries = [NSJSONSerialization JSONObjectWithData:[NSData dataWithContentsOfURL:countriesurl] options:kNilOptions error:&error];
    countries = [countries objectForKey:@"countries"];
    NSDictionary *events = [NSJSONSerialization JSONObjectWithData:[NSData dataWithContentsOfURL:eventsurl] options:kNilOptions error:&error];
    events = [events objectForKey:@"events"];

        //creating entities using factory methods in NSManagedObject Subclasses (Country / Event)
    [document.managedObjectContext performBlock:^{
        NSLog(@"creating countries");
        for (NSDictionary *country in countries) {
            [Country countryWithCountryInfo:country inManagedObjectContext:document.managedObjectContext]; //creating Country entities
        }
        NSLog(@"creating events");
        for (NSDictionary *event in events) {
            [Event eventWithEventInfo:event inManagedObjectContext:document.managedObjectContext]; // creating Event entities
        }
        NSLog(@"done creating, saving document");
        [document saveToURL:document.fileURL forSaveOperation:UIDocumentSaveForOverwriting completionHandler:NULL];
    }];
});
dispatch_release(dataQ);
} 
```

这会将不同的 JSON 文件组合到一个 UIManagedDocument 中，然后我可以对其执行 fetchRequests 以填充 tableView、mapView 等。

我正在寻找一种在我的应用程序之外创建此文档并将其添加到 mainBundle 的方法。然后我可以将它复制一次到应用程序 DocumentsDirectory 并能够使用它（而不是在应用程序中从原始 JSON 文件创建文档）。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T15:36:22.280

看起来您的初始数据无论如何都是静态的。为什么不直接运行此代码，并在模拟器中创建数据库的副本，然后将该数据库包含在资源包中。

您可以将该数据库复制到生产数据库中，或者您可以使用第二个 PSC，甚至将您提供的数据库标记为只读。Apple 对用户未创建的文档中的内容不屑一顾，因此这有额外的好处。

# c# - C# 简单文件上传器无法输出流

> ID：12438438
> 
> 赞同：0
> 
> 时间：2012-09-15T15:01:11.407
> 
> 标签：c#, windows-phone-7, file-upload, webclient, isolatedstorage

我正在尝试在我的 WP7 应用程序中直接从独立存储实现文件上传。我基于这个优秀的例子[http://gregdoesit.com/2009/10/file-upload-in-silverlight-a-simple-solution/](http://gregdoesit.com/2009/10/file-upload-in-silverlight-a-simple-solution/)

我用来开始 UploadChunk() 调用链的代码是：

```
public void uploadPackage(String packagePath)
    {
        string[] pathSplit = packagePath.Split('\\');
        _fileName = pathSplit[1];
        IsolatedStorageFile isf = IsolatedStorageFile.GetUserStoreForApplication();
        IsolatedStorageFileStream packageFile = isf.OpenFile(packagePath,     System.IO.FileMode.Open, FileAccess.Read);

        _bytesUploaded = 0;
        _bytesTotal = packageFile.Length;
        _data = packageFile;

        try
        {
            UploadFileChunk();
        }
        catch (Exception ex)
        {
        }
    } 
```

在 wc_OpenWriteCompleted 事件发生之前，一切似乎都运行良好。它是这样实现的：

```
if (e.Error == null)
        {
            object[] objArr = e.UserState as object[];
            byte[] fileContent = objArr[0] as byte[];    // NullReferenceException
            int bytesRead = Convert.ToInt32(objArr[1]);
            Stream outputStream = e.Result;
            outputStream.Write(fileContent, 0, bytesRead);
            outputStream.Close();
        } 
```

第 3 行中的 objArr 无法分配，而 e.UserState 具有非空值。这会导致第 4 行中的 NullReferenceException，objArr 为空。

什么可能导致问题？我真的坚持这个，我真的很感激你的帮助。

# c - 使用字节数组创建 FILE 结构

> ID：12438440
> 
> 赞同：0
> 
> 时间：2012-09-15T15:01:23.330
> 
> 标签：c, arrays, file, byte, sdl

SDL_image API 允许您传入 FILE* 并获取 SDL_Surface*。

目前，我正在设计一个地图档案。其中一个文件是一个tileset。这将是一个 PNG 图像（具有无损压缩的出色格式）。

我正在从文件中读取所有字节并将它们放入缓冲区（字节数组）中。

我将如何从字节数组中创建 FILE*？我不在乎我是否必须修改 FILE 结构中的任何私有内容，这是我最初的方法，但我在弄清楚该结构的几个成员的用途时遇到了困难。（我指的是 _iobuf 结构）

**编辑**

您必须了解我使用的是 zlib，这意味着在从存档中的未压缩文件中读取时，我使用的是函数 unzReadCurrentFile。我不知道是否有办法在使用 zlib 时直接获取 FILE*。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T15:13:06.793

你不能。这是不可能的。A`FILE*`只是一个文件。对于 SDL API 使用 CI/O 并因此几乎与死鱼一样有用这一事实，您无能为力。

# django - Django 身份验证后端和自动登录

> ID：12438443
> 
> 赞同：1
> 
> 时间：2012-09-15T15:01:56.987
> 
> 标签：django, authentication, login, registration, backend

我试图让用户在注册后立即自动登录。他们刚刚输入了他们想要的用户名和两个匹配的密码，我想授予对网站的访问权限，而不会有更多的摩擦。但是我当前使用身份验证的用户对象进行身份验证的视图不起作用，即视图在注册后重定向到个人资料页面，但个人资料页面`@login_required`受装饰器保护，因此由于登录不成功而重定向。我已经广泛调试并环顾四周。

除了求助于第三方注册应用程序之外，我已经尝试了所有我能想到的方法。人们认为后端存在问题/特殊性或其他问题，但我就是不明白为什么我不能在一个视图中注册、验证和登录。

views.py（相关部分）

```
@login_required
def user(request, user_id):
    profile_user = User.objects.get(id=user_id) 
    context = RequestContext(request)    
    context['profile_user'] = profile_user
    return render_to_response('profile.html', context)

def register(request):
    if request.method == 'POST':
        form = UserCreationForm(request.POST)
        if form.is_valid():
            new_user = form.save()
            new_user = authenticate(username = request.POST['username'],
                                    password = request.POST['password1'])
            if new_user is not None:
                login(request, new_user)
                context = RequestContext(request)    
                context['user_id'] = new_user.id
                context['new_user'] = new_user
                url = '/user/%s/' % new_user.id      
                return HttpResponseRedirect(url)
    else:
        form = UserCreationForm()
    return render_to_response("registration/register.html", {'form': form},
                              context_instance=RequestContext(request)) 
```

你如何处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T15:21:18.347

您可以通过以下方式使其工作：

1.  通过简单视图重定向到一个中间模板，它会在客户端设置会话cookie，您可以显示类似“注册完成。登录...”的消息
2.  在 3-5 秒的小超时后重定向到个人资料页面。这个时候request会携带认证cookie，profile页面就可以访问了。

# asp.net - 为 asp.net 项目创建 setup.msi 打包

> ID：12438452
> 
> 赞同：2
> 
> 时间：2012-09-15T15:03:37.540
> 
> 标签：asp.net, visual-studio-2010, installation, web-deployment

我需要使用 VS2010 创建一个 asp.net setup.msi 包，按照此处的说明[使用 Web 部署和 Web 设置项目（MSI 安装程序）创建 ASP.NET 部署包](http://codeissue.com/articles/a04df930da62eb1/create-asp-net-deployment-package-using-web-deployment-and-web-setup-project)后， 我仍然无法创建 .msi 文件。我没有收到任何错误。

输出文件夹显示：

```
 Running aspnet_merge.exe.   Successfully merged '.\TempBuildDir'.
------ Skipped Build: Project: WebSetup1, Configuration: Release ------ Project not selected to build for this solution configuration 
========== Build: 7 succeeded or up-to-date, 0 failed, 1 skipped ========== 
```

但是，我在输出中没有看到 .msi 文件。
如何创建一个 msi 部署包？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T14:28:31.053

如果您不需要安装程序，则可以选择使用 VS 内置的“构建部署包”。它创建一个不包含源代码文件的 zip 文件。您需要做的就是解压缩文件并将其部署到适当的环境。我发现创建一个 msi 要容易得多。

# javascript - 从对象属性调用函数而不使用括号

> ID：12438454
> 
> 赞同：1
> 
> 时间：2012-09-15T15:04:29.483
> 
> 标签：javascript

虽然我的标题看起来有点不靠谱，但我试图准确地描述我正在尝试做的事情。假设我有一个对象：

```
function testObj(data) {
    this.id = data.id
    this.getObjFromId = function() {
        //Return some value from somewhere using the this.id
    }
    this.obj = this.getObjFromId();
} 
```

这样做的原因是我可以更新 this.id 属性，并且 this.obj 将始终使用更新后的 id 返回一些其他对象。现在它所做的是它最初使用原始 id 调用 getObjFromId 函数并将返回的值存储在 this.obj 中。如果我做这样的事情：

```
var testObj = new TestObj({id: 1});
alert(testObj.obj); //Returns Foo1
testObj.id = 5; //Update the object with a new id
alert(testObj.obj); //Returns Foo1, but should return Foo5 
```

如果我可以将 this.obj 函数调用为 this.obj() 之类的函数，这将很简单，但由于各种原因，这是不可能的（模板等），所以我需要能够获得动态通过简单地使用 this.obj 从 this.obj“函数”中获取值。

我希望这是有道理的。在我写作时，我理解它令人困惑，所以也许有更好的方法来做到这一点。尽管如此，我提出的功能需要在我可以从对象属性调用动态值的情况下工作。如果有人愿意更新，我的问题标题可能更适合描述我的问题，但我想不出更好的描述方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T15:09:40.700

您想为您的属性使用[getter 函数](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects#Defining_getters_and_setters)`obj`：

```
function TestObj(data) {
    this.id = data.id
    Object.defineProperty(this, "obj", {
        get: function() {
            //Return some value from somewhere using the this.id
        }
    });
} 
```

同样，您可以对属性使用 setter 函数，该函数仅在您设置 id 时才`id`更新属性。`obj`这对于缓存可能很有用。

```
function TestObj(data) {
    var id = data.id, obj;
    Object.defineProperty(this, "id", {
        get: function() { return id; },
        set: function(newval) {
            id = newval;
            obj = this.getObjFromId();
    });
    Object.defineProperty(this, "obj", {
        get: function() { return obj; }
    });
}
TestObj.prototype.getObjFromId = function() {
    //Return some value from somewhere using the this.id
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T15:17:41.407

你为什么不`getObjFromId`直接打电话喜欢

```
var testObj = new TestObj({id: 1});
alert(testObj.getObjFromId()); 
```

此外，您的代码不是最优的，因为它会为您创建`getObjFromId`的每个`TestObj`实例创建一个实例。您应该声明`getObjFromId`为 TestObj 原型的值：

```
function TestObj(data) {...}
TestObj.prototype.getObjFromId = function(){...} 
```

* * *

**编辑**

如果直接调用`getObjFromId`不是一个选项，那么我将创建另一个函数来更新对象的状态。而不是打电话

```
testObj.id = 'newId'; 
```

你会打电话给

```
testObj.update('newId');//internally, call getObjFromId and/or update id field 
```

# javascript - Phonegap/Cordova，安全存储/保护文件

> ID：12438457
> 
> 赞同：3
> 
> 时间：2012-09-15T15:04:46.243
> 
> 标签：javascript, android, iphone, cordova, cordova-2.0.0

我目前正在Phonegap/Cordova 中编写一个应用程序。

我正在编写的应用程序需要能够为几个不同的目的保存/操作文件，主要是；

1.  可下载的内容
2.  设置

现在，我不太喜欢将设置保存到文件系统的想法——但我可以处理。内容虽然我真的不想写入常规文件系统（无论如何都没有某种形式的加密）。

有什么方法可以安全地存储没有直接放在那里的内容吗？基本上为内容提供至少最低级别的保护？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T23:39:24.847

好吧，如果您谈论的是 Android，那么您可以考虑使用[Application Preferences 插件](https://github.com/phonegap/phonegap-plugins/tree/master/Android/AppPreferences)来存储设置。

对于可下载的内容，您可能希望将其存储在内部文件系统中。每个应用程序在 /data/data/{package name} 处都有自己的私有目录，其中 {package name} 特定于您的应用程序。

# android - 在 webview 中的原始输入之上呈现的虚假输入

> ID：12438459
> 
> 赞同：0
> 
> 时间：2012-09-15T15:05:04.280
> 
> 标签：android, android-webview

我在 Galaxy SIII(4.0.4) 和 HTC Desire HD (2.3.5) 等一些 android 设备上遇到了一个奇怪的问题。当我打开一个 webview 时，一个假输入会呈现在原始输入之上，就像附加的屏幕截图中一样。

有任何想法吗？

提前致谢。

编辑：

Java 代码：

```
final Dialog dialog = new Dialog(PreferencesActivity.this);
            dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
            dialog.setContentView(R.layout.some_dialog);
            dialog.setCancelable(true);

            final WebView premiumPurchasingView = (WebView) dialog.findViewById(R.id.purchaseWebView);
            WebSettings webSettings = premiumPurchasingView.getSettings();
            webSettings.setJavaScriptEnabled(true); 
            premiumPurchasingView.addJavascriptInterface(dialog, "Dialog");
            premiumPurchasingView.addJavascriptInterface(new JavascriptInterface(PreferencesActivity.this), "Android");
            premiumPurchasingView.addJavascriptInterface(PreferencesActivity.this, "Preferences");

            premiumPurchasingView.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);

            dialog.show();

            final ProgressDialog progressDialog = ProgressDialog.show(
                    PreferencesActivity.this, 
                    getResources().getString(R.string.preloader_title), 
                    getResources().getString(R.string.preloader_content)
            );  

            premiumPurchasingView.setWebViewClient(new WebViewClient() {

                @Override
                public void onPageFinished(WebView view, String url) {
                    if (progressDialog != null && progressDialog.isShowing()) {
                        progressDialog.dismiss();
                    }

                    super.onPageFinished(view, url);
                }

            });

            premiumPurchasingView.setWebChromeClient(new WebChromeClient() {           

                @Override
                public boolean onJsAlert(WebView view, String url, String message, final android.webkit.JsResult result) {
                      new AlertDialog.Builder(view.getContext())
                              .setTitle("alert")
                              .setMessage(message)
                              .setPositiveButton(android.R.string.ok,
                                      new AlertDialog.OnClickListener() {
                                          public void onClick(DialogInterface dialog,
                                                  int which) {
                                              result.confirm();
                                          }
                                      }).setCancelable(false).create().show();

                      return true;            
                      }
            });

            premiumPurchasingView.loadUrl("URL HERE"); 
```

HTML 代码：

```
<div id="redeemCode">
    <input placeholder="phone number"type="text" id="gsm_phone" size="10" onkeypress="if(this.value.length > 9) return false;" name="gsm_phone" style="margin-top:18px; padding:8px 0 9px; width:100%; background-color:#ececec;-webkit-border-radius: 3px;-moz-border-radius: 3px; border-radius: 3px; border:1px solid #cccccc;color:black;font-size:18px;" />
</div> 
```

![在此处输入图像描述](../Images/5d791db5cfabe2a668eea2730335a5fa.png)

# java - 易变变量和其他变量

> ID：12438464
> 
> 赞同：15
> 
> 时间：2012-09-15T15:05:51.873
> 
> 标签：java, multithreading, concurrency, volatile, memory-visibility

以下来自经典`Concurency in Practice`：

> 当线程 A 写入 volatile 变量并且随后线程 B 读取相同的变量时，在写入 volatile 变量之前对 A 可见 的*所有变量的值在读取 volatile 变量后对 B 可见。*

我不确定我是否能真正理解这句话。例如，在这种情况下*所有变量*的含义是什么？这是否意味着 using`volatile`对非易失性变量的使用也有副作用？
在我看来，这句话有一些我无法理解的微妙含义。
有什么帮助吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-16T10:26:09.297

您的问题的答案在[JLS #17.4.5](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4.5-320)中：

> 对 volatile 字段（第 8.3.1.4 节）的写入发生在对该字段的每次后续读取之前。

所以如果在一个线程中你有

```
aNonVolatileVariable = 2 //w1
aVolatileVariable = 5 //w2 
```

随后在另一个线程中：

```
someVariable = aVolatileVariable //r1
anotherOne = aNonVolatileVariable //r2 
```

`anotherOne`即使该变量不是易失性的，您也可以保证等于 2。所以是的，使用 volatile 对使用非易失性变量也有副作用。

更详细地说，这是由于 Java 内存模型 (JMM) 在同一部分中提供的另外两个保证：线程内顺序和传递性（*hb(x,y)*表示*x 发生在 y 之前*）：

> 如果 x 和 y 是同一线程的操作，并且 x 在程序顺序中位于 y 之前，*则为 hb(x, y)*。
> [...]
> 如果*hb(x, y)*和*hb(y, z)*，那么*hb(x, z)*。

在我的例子中：

*   *hb(w1, w2)*和*hb(r1, r2)*（线程内语义）
*   *hb(w2, r1)*因为 volatile 保证

所以你可以通过传递性得出*hb(w1, r2)的结论。*

并且 JMM 保证程序的所有执行将是顺序一致的（即看起来好像没有重新排序），如果它与发生前的关系正确同步。所以在这种特定情况下，非易失性读取保证看到非易失性写入的效果。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-15T15:08:14.040

这意味着如果您写入十个非易失性变量并写入一个易失性变量，则必须在易失性变量之前设置所有非易失性变量。

如果您阅读 volatile 变量和所有非易失性变量，您可以确定订单不会被交换。

# sql-server-2008 - 使用临时表中的默认值更新列

> ID：12438466
> 
> 赞同：0
> 
> 时间：2012-09-15T15:06:19.873
> 
> 标签：sql-server-2008, temp-tables

我在一个临时表上存储了一个结果集

```
Column_Name, Data_Type, Default_Value
Col1         varchar      abc
Col2         varchar      abc
Col3         int          999
Col4         decimal      0.0
Col5         datetime     20120101 
```

现在我必须构建一个语句，它将列名与表的列名进行比较，并根据临时表的数据类型，只要列值为 NULL，它将为其分配默认值。

我不知道该怎么做

这是我到目前为止所做的

```
 CREATE TABLE #ColumnData (Column_Name varchar(500), Data_Type varchar(20), 
```

Default_Value varchar(50))

```
 DECLARE @query1 NVARCHAR(MAX) = '' 
  DECLARE @SchemaName VARCHAR(20)
  DECLARE @TableName VARCHAR(50)

SET @SchemaName = 'dbo'
SET @TableName = 'tblCustomer'

     select @query1 = @query1 + 'UPDATE ' + @schemaName + '.' + @tableName + ' SET ' + 
     c.COLUMN_NAME + ' = ' + c.Default_Value+ ' WHERE ' +   c.COLUMN_NAME 
     + ' = ''NULL'';' FROM #ColumnData c  
     WHERE C.TABLE_NAME = @tableName     

      EXECUTE sp_executesql @query1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T15:31:30.503

这应该可以解决问题。在 SQL 2008 中对其进行了测试。

```
update t
set t.col1 = isnull(t.col1, tr.col1) 
    t.col2 = isnull(t.col1, tr.col2)
    etc.
from my_table t
cross join temp_table tr 
```

***更新：***

-- 像这样创建你的临时表，然后在一行中设置所有默认值（注意`_temp`临时表名称末尾的）。

```
select * into #MyTable_temp from dbo.MyTable where 1=1 
```

* * *

```
DECLARE @query NVARCHAR(MAX) = 'update t set ' 
DECLARE @SchemaName VARCHAR(20) 
DECLARE @TableName VARCHAR(50) 

SET @SchemaName = 'dbo' 
SET @TableName = 'MyTable' 

set @query = @query + ( 
        select stuff((
            select ', ' + c.column_name + ' = isnull(t.' + c.column_name + ', tt.' + c.column_name + ')'
            from INFORMATION_SCHEMA.COLUMNS c
            where c.TABLE_NAME = @TableName
            for xml path('')), 1, 2, ''))

set @query = @query + ' from ' + @SchemaName + '.' + @TableName + ' t cross join #' + @TableName + '_temp tt'

select @query 
```

您的查询应如下所示：

```
update t 
    set Col1 = isnull(t.Col1, tt.Col1), 
        Col2 = isnull(t.Col2, tt.Col2), 
        Col3 = isnull(t.Col3, tt.Col3), 
        Col4 = isnull(t.Col4, tt.Col4), 
        etc... 
from dbo.MyTable t 
cross join #MyTable_temp tt 
```

# java - 调用被覆盖的基类方法

> ID：12438468
> 
> 赞同：2
> 
> 时间：2012-09-15T15:06:25.507
> 
> 标签：java, inheritance

我在这个例子中说明了我的问题

```
class Car {
    public void start(){
        System.out.println("Car Started!!!");
    }
}

class Mercedes extends Car {
    public void start(){
        System.out.println("Mercedes Started!!!");
    }
} 
```

现在，在我的主程序中，我写

```
Mercedes m = new Mercedes();
m.start(); 
```

它打印：*梅赛德斯开始了！！！*

如何使用相同的对象调用类的`start()`方法，`Car`以便输出可以

*车开！！！*.

**编辑**：

> 其实这是在我参加的一次采访中被问到的。我给出了*超级*关键字的答案。但面试官否认了。他说他会给我一个提示并说虚拟功能。我不知道如何使用该提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T15:10:14.413

您的方法应该像调用超级实现一样。

```
public void start(){
    super.start();
    System.out.println("Mercedes Started!!!");
} 
```

或者它没有。在这种情况下，您说您已经替换了父级的实现。

虽然这不是一个好主意，但您可以通过添加一个方法来解决这个问题。

```
public void startCar(){
    super.start();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T15:07:37.937

该方法已在子类中被*覆盖*，因此它有效地替换了超类中的方法。

子类本身可以调用超类中的方法：

```
class Mercedes extends Car {
  public void startFromCar() {
    super.start();
  }
  public void start(){
    System.out.println("Mercedes Started!!!");
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T15:09:18.127

关键词`super`

```
class Car {
    public void start(){
        System.out.println("Car Started!!!");
    }
}
class Mercedes extends Car {
    public void start(){
        super.start();
    }
} 
```

编辑：

```
class Car {
    public void start(){
        System.out.println("Car Started!!!");
    }
}
class Mercedes extends Car {
} 
```

现在如果你打电话`new Mercedes().start();`，“汽车启动！！！” 被打印。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-15T15:18:13.557

您已经在子类中覆盖了父类的方法。要访问此类方法[`super`](http://java.sun.com/docs/books/tutorial/java/IandI/super.html)，使用关键字。

如此变化

```
class Mercedes extends Car {
public void start(){
    System.out.println("Mercedes Started!!!");
}

} 
```

至

```
class Mercedes extends Car {
public void start(){
    super.start();
    System.out.println("Mercedes Started!!!");
}

} 
```

将打印

```
Car Started!!!
Mercedes Started!!! 
```

或者如果您想单独访问而不更改给定函数，请尝试在`Mercedes`类中定义一个新方法。

```
public void startCar(){
    super.start();
} 
```

调用此函数将达到您的目的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-15T15:12:12.680

您必须在类中添加另一个方法来`Mercedes`调用超类的`start`方法：

```
public void superStart() { super.start(); } 
```

`super`关键字允许您访问要继承的类（超类）。更多关于它[的信息](http://docs.oracle.com/javase/tutorial/java/IandI/super.html)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-15T15:39:12.887

还有另一种选择

```
class Car {
    public void start(){
        System.out.println("Car Started!!!");
    }
 }
 Class Mercedes extends Car {
    //nothing here
 } 
```

然后打电话

```
Mercedes m = new Mercedes();
m.start(); 
```

将打印：

> 车子启动了！！！

如果你想要一个类似于梅赛德斯的对象打印其他东西而不是汽车启动！！！它应该看起来像这样

```
 class AlfaRomeo extends Car {.
        @override
        public void start(){
        System.out.println("Car Started!!!");  
        System.out.println("Its AlfaRomeo!!!");
        }
    } 
```

@override 告诉 java 使用子方法而不是父方法。

```
AlfaRomeo a = new AlfaRomeo();
 a.start(); 
```

所以打印将是：

> 车子启动了！！！
> 
> 它的阿尔法罗密欧！！！

# php - 按顺序导航 XML

> ID：12438474
> 
> 赞同：-1
> 
> 时间：2012-09-15T15:06:53.060
> 
> 标签：php, xml, simplexml

请教我如何使用 php 浏览 xml。

看看[http://laws-lois.justice.gc.ca/eng/XML/C-42.xml](http://laws-lois.justice.gc.ca/eng/XML/C-42.xml)。

我第一次尝试使用 simplexml_load_file，但它所做的是按标签对所有数据进行分组，这在较低级别非常有用，但我需要的是保持一些线性。

换句话说，一旦我进入，我需要知道哪个 Section 跟在哪个 Heading 之后，等等。

我该怎么做呢？

```
<?php
    $url="http://laws-lois.justice.gc.ca/eng/XML/C-42.xml";
    $xml=simplexml_load_file($url);

    echo $xml->Identification->LongTitle;
    echo "<br>";

    foreach ($xml->Body as $hd) {
           // WHAT DO I DO HERE?
    }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T15:11:13.713

[您可以使用方法](http://php.net/manual/en/simplexmlelement.children.php)遍历 SimpleXML 中元素的所有子[元素`->children()`](http://php.net/manual/en/simplexmlelement.children.php)。

`foreach ( $simple_xml_doc->children() as $tag ) { ... }`将为每个子元素提供一个 SimpleXML 对象，无论标签如何，按照它们在原始文件中出现的顺序。

# string - PowerShell Invoke-Expression 在命令字符串中带有与号

> ID：12438479
> 
> 赞同：7
> 
> 时间：2012-09-15T15:07:03.833
> 
> 标签：string, powershell, command

我正在尝试将带有与号的字符串的变量传递给 Invoke-Expression，它告诉我必须将其放在引号中并将其作为字符串传递。

我尝试了多种转义组合，并在变量中使用原始字符串和字符串以及“”和“”的组合，但无济于事。我该怎么做？

这是代码：

```
$streamout_calmedia01 = `
"rtmp://75.126.42.216/livepkgr/calmedialive01?adbe-live-event=liveevent&adbe-record-mode=record"

$streamcmd_calmedia01 = "C:\avconv\usr\bin\avconv.exe 'rtmp://75.126.42.211/transcoder/mobileingest live=1' -f flv -c:v libx264 -r 30 -g 120 -b:v 410000 -c:a aac -ar 22050 -b:a 64000 -strict experimental -y $streamout_calmedia01"

Invoke-Expression "$streamcmd_calmedia01" 
```

在输入变量之前，我尝试```在 & 符号前使用 a 并在 Invoke-Expression 前使用双引号，

我已经尝试（如图所示）使用 for Invoke-Expression 在变量周围加上引号，`-Command`并且还加上 '&' 和 "&" 并将 & 符号连接到字符串。

我需要其中的 & 符号，以便 Flash Media Server 从流名称中解析命令并在开始 HTTP 实时流分块之前刷新先前记录的数据。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-15T17:55:00.200

和号必须在 string*内*`"&"`用双引号引起来，所以你需要转义内部的双引号

```
$streamout_calmedia01 = "rtmp://...vent`"&`"adbe-record-mode=record" 
```

或将字符串放在单引号中

```
$streamout_calmedia01 = 'rtmp://...vent"&"adbe-record-mode=record' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T17:53:43.287

将 $streamout_calmedia01 更改为：

```
$streamout_calmedia01 = "rtmp://75.126.42.216/livepkgr/calmedialive01?adbe-live-event=liveevent```&adbe-record-mode=record" 
```

然后，您必须重新分配 $streamout_calmedia1（使用 $streamout_calmedia1 的新值），它应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T20:43:28.550

你根本不需要使用`Invoke-Expression`。避免使用它会排除这个问题。直接调用EXE文件工具即可：

```
$streamout_calmedia01 = "rtmp://75.126.42.216/livepkgr/calmedialive01?adbe-live-event=liveevent&adbe-record-mode=record"

C:\avconv\usr\bin\avconv.exe 'rtmp://75.126.42.211/transcoder/mobileingest live=1' -f flv -c:v libx264 -r 30 -g 120 -b:v 410000 -c:a aac -ar 22050 -b:a 64000 -strict experimental -y $streamout_calmedia01 
```

这避免了双重转义的所有复杂性，并且应该按照您的意图进行。

# c# - WCF 数据服务扩展为 Linq 语句

> ID：12438481
> 
> 赞同：0
> 
> 时间：2012-09-15T15:07:23.303
> 
> 标签：c#, wcf, linq, wcf-data-services, expand

目前我正在尝试使用 WCF 数据服务。现在我正在尝试使用 Include 语句查询我的 Servie 以获取类似于 EF 的一些对象（这是我的 Service 的数据源），以获取对象树。

我的陈述此时看起来像这样：

```
var query = this.Entities.Veranstaltung.Expand( "VeranstaltungMaterial/Material/Template" ).Expand( "Ort,Dozent" );

var k = query.Where( z => z.DauerTage > 5 && z.TemplateID == null ); 
```

是否可以通过 LINQ 编写 Expandstatement 以便自动翻译？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T19:20:34.957

我想您的问题是：我可以通过常规 linq 语句而不是 WCF-DS 特定`Expand`语句来访问导航属性吗？如果是这样，答案是“是的，我们可以”。

当然我不能使用你的例子，但如果我连接到 Northwind OData 服务¹我可以这样做：

```
Order_Details.Expand("Order/Customer").Expand("Product/Order_Details").Take (1) 
```

或者

```
Order_Details.Take(1).Select(o => 
                      new { o.Order.Customer, o.Product.Order_Details }) 
```

不完全等效（并且几乎没有用），但是可以。

在 URL 中，您会看到第二条语句也被翻译成`expand`。

* * *

1.  [http://services.odata.org/V3/Northwind/Northwind.svc/](http://services.odata.org/V3/Northwind/Northwind.svc/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T11:21:15.173

Gert 的回答是正确的，只是想对其进行扩展（并且不能将其放入评论中）：您甚至可以使用 LINQ 使用 Expand 来表达第一个查询：

```
Order_Details.Take(1).Select(od =>
    new Order_Detail
    {
        Order = new Order
        {
            Customer = od.Order.Customer
        },
        Product = new Product
        {
            Order_Details = od.Product.Order_Details
        },
    }); 
```

您可以对 m:n 关系进行类似的操作。此示例遵循 1:n 关系，但方向相反：

```
Customers.Select(c =>
    new Customer
    {
        Orders = c.Orders.Select(o =>
            new Order
            {
                Order_Details = o.Order_Details
            });
    }); 
```

这相当于 ~/Customers?$expand=Orders/Order_Details&$select=Orders/Order_Details。

# django - 使用 FastCGI 在 Hostmonster 上部署 django 项目

> ID：12438485
> 
> 赞同：3
> 
> 时间：2012-09-15T15:07:37.547
> 
> 标签：django, url, fastcgi, hostmonster

我觉得这可能是一个非常简单的问题，但我正在尝试学习使用 python/django 进行编码，这样我就可以为我的家人构建一些简单的博客网站，并且无法将我的网站部署在 Hostmonster 上。我想我已经接近了，但我遇到了以下错误：

> 使用 newproject.urls 中定义的 URLconf，Django 尝试了这些 URL 模式，顺序如下： ^admin/ 当前 URL 不匹配任何这些。

我花了很多时间弄清楚如何在我的共享 HostMonster 帐户上加载 python、django 等，并认为当我加载一个通用的、未修改的 django`newproject`并让 django “它工作！”时我已经弄清楚了。屏幕，但是一旦我取消注释 urls.py 和 settings.py 中的行以启用管理模块，我就会遇到上述错误。

这是我的`.htaccess`文件：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^(www.)?mysite.com$
RewriteCond %{REQUEST_URI} !^/mysite/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /mysite/$1
RewriteCond %{HTTP_HOST} ^(www.)?mysite.com$
RewriteRule ^(/)?$ /mysite/jarr.fcgi [QSA,L] 
```

这是我的`jarr.fcgi`文件：

```
#!/home3/usr/python/bin/python
import sys, os
sys.path.insert(0, "/home3/usr/django/django_projects/newproject")
sys.path.insert(0, "/home3/usr/python")
sys.path.insert(0, "/home3/usr/python/lib")
sys.path.insert(0, "/home3/usr/python/lib/python2.7")
sys.path.insert(0, "/home3/usr/python/lib/python2.7/site-packages")
sys.path.insert(0, "/home3/usr/django/django_src")
os.environ['DJANGO_SETTINGS_MODULE'] = "newproject.settings"
from django.core.servers.fastcgi import runfastcgi
runfastcgi(method="threaded", daemonize="false") 
```

最终得到“它成功了！”真是令人沮丧。经过数周的工作后，我从我的 hostmonster 帐户中提取，但是我什至无法启用管理员，更不用说构建一个实际的站点，这在我的本地计算机上非常容易。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T13:42:24.450

我为您创建了一个示例 django 项目，它可以轻松地托管在共享托管服务提供商上。您可以在 github - [https://github.com/psjinx/django-example-project-shared-hosting](https://github.com/psjinx/django-example-project-shared-hosting)上找到它。

我已经[回答了](https://stackoverflow.com/a/14398734/353550)[alok](https://stackoverflow.com/users/41284/alok)提出的一个[相关问题](https://stackoverflow.com/questions/14310086/django-on-shared-hosting-setup-issue-404-for-the-admin-url-urls-py-being-ignor)，您也可以研究一下。

如果您仍有一些问题，请在评论中发布。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T09:27:23.353

注意错误信息：

```
The current URL, , didn't match any of these.` 
```

这意味着 Django 没有得到任何 URI 信息。原因是这一行：

```
 RewriteRule ^(/)?$ mysite/jarr.fcgi [QSA,L] 
```

请注意，唯一可能导致`fcgi`调用脚本的是访问“索引”，即使这样也没有给出 URI 信息。你会希望你`RewriteRule`的东西像

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ mysite/jarr.fcgi/$1 [QSA,L] 
```

（重要的部分是`/$1`）

尝试将 移动`jarr.fgci`到您域的公共“根”（即，不在 下`mysite`）并将您的规则更改为：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ jarr.fcgi/$1 [QSA,L] 
```

您仍然可以将文件放在由 apache 直接提供服务的目录中。

# asp.net - 从 SVN 获取代码

> ID：12438488
> 
> 赞同：-1
> 
> 时间：2012-09-15T15:08:14.723
> 
> 标签：asp.net, svn, cruisecontrol.net

我正在使用巡航控制 .net 从 SVN 获取应用程序的代码。我想根据变更集来获取它，

下面是我需要的场景。

如果一个团队在构建 1，第二个团队在构建 2，并且他们定期在 SVN 上提交代码。现在我只想获取构建 1 的代码，而不是构建 2。如何使用巡航控制 .net 获取它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T15:15:31.243

我不确定 CC.net 可以做到，但您可以使用 Subversion 命令行手动使用 NAnt 来实现

# c - 无法理解令人困惑的 C 语法

> ID：12438491
> 
> 赞同：-1
> 
> 时间：2012-09-15T15:08:24.927
> 
> 标签：c, porting

我在处理一些 C 代码时遇到了一些麻烦。有人可以解释这种语法：

```
void some_function(Int16 omegaFlag[2][8])
{
    for(i = 0; i < 2; i++)
    {
        Int16 *Flag = omegaFlag[i] + 1;
        for(j = 0; j < k; j++)
        {
            // do some stuff
            *Flag++ = some_integer_value;
        }
    }
} 
```

**1.**为什么`Int16 omegaFlag[2][8]`传入的参数`some_function()`声明索引值？他们如何帮助代码（一般而言，不特定于此代码）？
**2** `*Flag++ = some_integer_value;` .：这条线是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T15:14:23.023

, 的第一个索引`omegaFlag[2][8]`不是必需的，编译器会忽略它。然而，第二个很重要，因为它告诉编译器这是一个二维数组，其中每行包含 8 个元素，因此推进指针将推进 8 个元素。

`omegaFlag[2][8]`等价于`omegaFlag[][8]`或`(*omegaFlag)[8]`。然而，它`**omegaFlag`与内存布局不同。`**omegaFlag`是一个指针数组，而`omegaFlag[2][8]`是一个数组数组——正好有 8 个元素的空间，或 16 个元素的总空间。

`*Flag++`做两件事，它取消对 Flag 的引用，然后还将其值增加 1。Flag 是一个指针，Int16 表示`i`矩阵 omegaFlag 的第 th 行中的第二个值。赋值给那个元素赋值，然后推进 Flag 指向下一个元素，该元素将在循环的下一次迭代中赋值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T15:14:34.503

`omegaFlag`使用指针修改数组。当然，当你可以这样写时，这是不必要的使用指针，这更容易阅读：

```
 for(i = 0; i < n; i++)
    {
        for(j = 1; j < k; j++)
        {
            // do some stuff
            OmegaFlag[i][j] = some_integer_value;
        }
    } 
```

当然，在数组边界之外访问是未定义的行为，即 n>2 或 k>7。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T15:16:24.550

1.  参数声明建议该函数将接收给定维度的 Int16 数组......更具体地说，是一个数组数组。

2.  * 符号表示*指针*或内存中的位置。*Flag的意思是“Flag的内容所指向的位置”，赋值的意思是“把这个值放到那个位置”。++ 表示 Flag 指向的位置在使用后应该加一，例如如果它指向内存位置 12345，那么它将指向位置 12346。数组可以通过这种方式通过指针引用，所以入站数组正在被这种语法修改......虽然它可能难以阅读:)

希望有帮助。

# windows-ce - 确定 Windows CE 可执行文件使用的 16 位 CRC/校验和算法的方法？

> ID：12438495
> 
> 赞同：5
> 
> 时间：2012-09-15T15:09:06.163
> 
> 标签：windows-ce, reverse-engineering, checksum, crc, disassembly

我需要对 Windows CE 可执行文件实现的 CRC/校验和算法进行逆向工程。作为专有协议，它没有说明 CRC/校验和算法。但是，有报告正确/计算校验和的控制台界面，如果消息协议正确，我可以用随机位构造自己的消息：

我观察到，

*   更改消息中的单个位会完全更改校验和字节。

*   算法似乎与位置有关，因为我在各种消息数据位置提供了一些单个 1 位消息，其余位为零，并且所有时间控制台都报告了不同的校验和。如果它是简单的附加校验和，校验和将是相同的。

我应用了常见的 XOR、LRC、加法校验和算法、常见的 CRC 多项式（Standerd、CCITT、X-modem）并完成了 [CRC 逆向工程论文][2]，但不幸的是我无法通过推导多项式，因为消息类型是固定的，所以无法创建单个 1 位消息。

我的问题：

1.  是否有任何 CRC/校验和算法属性，我可以针对消息进行测试以确定算法是校验和还是基于多项式的 CRC？

2.  有没有办法将程序反汇编中看到的错误消息与相应的汇编指令联系起来？

3.  当它在控制台上报告正确的校验和时，有哪些方法可以调试/查明反汇编代码？内存转储什么的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T18:02:36.423

试试[CRC RevEng](http://reveng.sourceforge.net/)。对您的数据进行的一些快速尝试没有结果，但我并没有很努力地尝试。考虑不仅尝试所有十个消息字节，还尝试最后八个和最后六个。

此外，您可以在同一站点上找到我所知道的[最全面的已知 CRC 列表。](http://reveng.sourceforge.net/crc-catalogue/)

*更新：*

这很可能是某种 CRC，或者至少是 GF(2) 上的线性运算。它具有 CRC 所具有的特性：如果两个序列具有相同的异或，那么它们的 CRC 也具有相同的异或。例如，从您的数据中（删除通用前缀，但请注意，包括前缀或其一部分不会改变结果）：

```
00000000000122b5 ^ 0000000000022421 = 0000000000030694
0447080a300130A1 ^ 0447080a30023635 = 0000000000030694 
```

和

```
0447080a300130A1 ^ 0447080a30043A36 = 0000000000050a97
00000000000122b5 ^ 0000000000042822 = 0000000000050a97 
```

鉴于这一事实，您可以构建一个例程来计算校验值，而无需确定它是 CRC 还是 CRC 参数是什么。

为所有单比特消息生成 16 位校验值，即在 6 个字节的消息数据中设置一个比特，其余的消息数据比特为零。这些消息是该线性场的一组完整的基向量。其中有 48 个。还为全零消息生成检查值。你已经有了一个开始，全零给出`2020`，最后一位设置给出`22b5`等等。互斥或全零的校验值 ( `2020`)。您现在有 49 个值，其中 48 个用于基向量，一个是零向量的校正（由于 CRC 和前缀字节的预处理和后置条件，可能非零）。例如，最后一位设置的基向量的值为`0295`。

现在您可以使用这 49 个值来计算任何六字节消息的校验值。在该消息中设置为 1 的所有相应位的值异或一起。异或校验值为零。结果将是该消息的检查值。

# c# - 通过覆盖基类的 Write() 和 Read() 方法将数据写入文件？

> ID：12438504
> 
> 赞同：0
> 
> 时间：2012-09-15T15:09:50.110
> 
> 标签：c#, serialization, persistence, deserialization, grasshopper

我正在尝试将数据写入文件，下面的代码包含一个`writer`允许覆盖`write()`基类方法的方法`GH_Component`。代码编译没有错误，但数据没有按计划写入。我究竟做错了什么？

```
 public class SettingsComponent : GH_Component

       {
            public SettingsComponent(): base("LoadSettings", "LoadSettings", "Loading ini", "Extra", "Silkworm") { }

            public override void CreateAttributes()
            {
                m_attributes = new SettingsComponentAttributes(this);
            }

            string m_settings_temp;
            string[] m_settings;

            public void ShowSettingsGui()
            {
                var dialog = new OpenFileDialog { Filter = "Data Sources (*.ini)|*.ini*|All Files|*.*" };
                if (dialog.ShowDialog() != DialogResult.OK) return;

                m_settings_temp = File.ReadAllText(dialog.FileName);
                m_settings = m_settings_temp.Split(new string[] { Environment.NewLine }, StringSplitOptions.None);
                ExpireSolution(true);
            }

            public override bool Read(GH_IO.Serialization.GH_IReader reader)
            {
                if (m_settings != null && m_settings.Length > 0)
                {
                    Int32 a = m_settings.Length;
                    reader.TryGetInt32("StringCount", ref a);
                    for (int i = 0; i < m_settings.Length; i++)
                    {
                        reader.TryGetString("String", i, ref m_settings[i]);
                    }
                }
                return base.Read(reader);
            }

            public override bool Write(GH_IO.Serialization.GH_IWriter writer)
            {
                if (m_settings != null && m_settings.Length > 0)
                {
                    writer.SetInt32("StringCount", m_settings.Length);
                    for (int i = 0; i < m_settings.Length; i++)
                    {
                        writer.SetString("String", i, m_settings[i]);
                    }
                }
                return base.Write(writer);
            }

            protected override void SolveInstance(IGH_DataAccess DA)
            {
                if (m_settings == null)
                {
                    AddRuntimeMessage(GH_RuntimeMessageLevel.Warning, "You must declare some valid settings");
                    return;
                }
                else
                {
                   DA.SetDataList(0, m_settings);
                }      
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T23:09:45.400

我需要覆盖 GH_Component 上的 Write() 和 Read() 方法：

```
 //deserializes the variable m_settings to make the data persistant
        public override bool Write(GH_IWriter writer)
        {
            if (m_settings != null && m_settings.Length > 0)
            {
                writer.SetInt32("StringCount", m_settings.Length);
                for (int i = 0; i < m_settings.Length; i++)
                {
                    writer.SetString("String", i, m_settings[i]);
                }
            }

            return base.Write(writer);
        }

        //deserializes the variable m_settings to make the data persistant
        public override bool Read(GH_IReader reader)
        {
            m_settings = null;

            int count = 0;
            reader.TryGetInt32("StringCount", ref count);
            if (count > 0)
            {
                System.Array.Resize(ref m_settings, count);
                for (int i = 0; i < count; i++)
                {
                    string line = null;
                    reader.TryGetString("String", i, ref line);
                    m_settings[i] = line;
                }
            }

            return base.Read(reader);
        } 
```

# css - 通过 Google Maps API 获得的地图隐藏了我的页脚

> ID：12438505
> 
> 赞同：1
> 
> 时间：2012-09-15T15:09:56.173
> 
> 标签：css, html, google-maps-api-3

我在我的网站上使用 Google Maps API，当我尝试减小窗口的宽度时，页脚被地图隐藏了。我的目标是在地图和页脚之间添加一个空白区域。

结果在一个大窗口中：![http://jaboste.dyndns.org/tmp/footer1.png](../Images/adb406f8fa642ccb72a603eb5b956f9d.png)

结果在一个较小的窗口中：![http://jaboste.dyndns.org/tmp/footer2.png](../Images/df6df9e22b75039ba31d8d2e1c9f4b48.png)

页面的html代码：

```
<section class="contact">
    <article class="contact">
        <h3>Lorem ipsum</h3>
        <p>Lorem ipsum dolor sit amet</p>
        <div class="carte">
            <div id="map_canvas" style="width: 100%; height: 100%; position: relative; background-color: rgb(229, 227, 223); overflow: hidden;">
                <div style="position: absolute; left: 0px; top: 0px; overflow: hidden; width: 100%; height: 100%; z-index: 0;">
                </div>
            </div>
            <p></p>
    </article>
</section>
<footer>
    <p class="align-droite">
        <span>Lorem ipsum</span>
        Dolor sit amet
    </p>
</footer>

</body>
</html> 
```

页面的css代码：

```
footer{
        width:100%;
        font-family:'karla';
        text-align:right;
        margin-top:1%;
}
.carte{
        height:95%;
        margin-bottom:3%;
} 
```

我尝试添加边距属性，但没有任何效果。有解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T14:32:08.950

有关页眉、页脚和正文的 css 框架，请参见[jsfiddle](http://jsfiddle.net/MSzut/)。CSS已被评论以提供帮助。Jsfiddle 允许您更改 css 值并使用运行按钮查看更改。

# mysql - 在 CakePHP 中使用数据库列名填充列表

> ID：12438513
> 
> 赞同：1
> 
> 时间：2012-09-15T15:11:31.073
> 
> 标签：mysql, cakephp-2.0

我需要使用数据库表的列名以我的一种形式填充列表。当我从帐户表中提取归档名称时，选项列表将如下所示：

```
<option value="NAME">Account Name</option>
<option value="OWNER">Account Owner</option> 
```

在表单列表中将显示如下：

```
Account Name 
Account Owner 
```

我可以使用直接获取列名的 CakePHP 函数来做到这一点吗？或者我是否需要保留数据库表的元数据及其列描述来实现这一点。

我对 CakePHP 很陌生。

任何想法/答案表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T20:46:32.407

您可以： A：从控制器操作中设置一个列表，在视图中使用，从 Model::schema() 方法中获取一个列表并“人性化”每个值 B：编写一个辅助方法来为您完成

可能有更好的方法，但在我找到它之前，让我为你唱一首我的 AppHelper 代码的歌曲：

```
<?php
class AppHelper extends Helper {
 /**
 * Returns and array of 'column_name' => 'Column Name' values from a model
 * 
 * @param string $modelName
 * @param type $includeModelName If true, prepends the model name to the field value
 * @return array Or false if Model is unavailable
 */
function getHumanFieldNames($modelName, $includeModelName = true){
    $model = ClassRegistry::init($modelName, true);
    if (!$model) return false;
    $schema = $model->schema();
    $return = array();
    foreach($schema as $field => $meta){
        $return[$field] = 
            ($includeModelName) ? 
                Inflector::humanize($modelName) . ' ' .Inflector::humanize($field) 
                : Inflector::humanize($field);
    }

    return $return;

}
}
?> 
```

现在您的所有助手都有一个 getHumanFieldNames 方法，因此要在您的视图中使用它，请使用以下内容：

```
<?php 
$accountFieldNames = $this->Form->getHumanFieldNames('account');
// returns array('owner' => 'Account Owner', 'name' => 'Account Name', 'bank_code' => 'Account Bank code')
//you can use any helper instead of $this->Form
//or better yet, you could write your own "utility" helper

echo $this->Form->select('database_column', $accountFieldNames);
// renders a select element with all 
// model column names as values and 
// human readable names as labels
?> 
```

为了您的方便，我添加了一个布尔标志作为第二个参数：

```
<?php
$this->Form->getHumanFieldNames('account', false);
//returns array('name' => 'Name', 'bank_code' => 'Bank Code')

$this->Form->getHumanFieldNames('account', true); // default is true
//returns array('name' => 'Account Name', 'bank_code' => 'Account Bank Code')
?> 
```

# android - Android SharedPreference

> ID：12438514
> 
> 赞同：2
> 
> 时间：2012-09-15T15:11:35.037
> 
> 标签：android, sharedpreferences

嗨，我正在制作一张显示 4 名玩家在游戏中得分的记分卡，当用户按下按钮时，将插入一个新行。我这样做：

```
 private void makeTag(String P1Score, String P2Score, String P3Score, String P4Score, String slot)
   {
      // originalQuery will be null if we're modifying an existing search
      String originalScore = SavedSlots.getString(slot, null);

      // get a SharedPreferences.Editor to store new slot/scores
      SharedPreferences.Editor preferencesEditor = SavedSlots.edit();
      preferencesEditor.putString(slot, P1Score, P2Score, P3Score, P4Score); // to store
      preferencesEditor.apply(); // store the updated preferences 
```

然后它在说下提示错误`putString`：

```
The method putString(String, String) in the type SharedPreferences.Editor is not  
applicable for the arguments (String, String, String, String, String). 
```

似乎一次只能存储2个变量？（即插槽和 P1Score）。

有 4 位玩家，我想保存他们各自的分数，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T15:25:36.077

`putString`只接受两个参数：

*   第一个参数取“关键”
*   第二个参数取值”

你应该使用：

```
private void makeTag(String P1Score, String P2Score, String P3Score, String P4Score, String slot)
{
    // originalQuery will be null if we're modifying an existing search

    //* For Save your score//

    SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
    SharedPreferences.Editor preferencesEditor = SavedSlots.edit();

    preferencesEditor.putString("slot1", "P1Score") // to store
    preferencesEditor.putString("slot2", "P2Score") // to store
    preferencesEditor.putString("slot3", "P3Score") // to store
    preferencesEditor.putString("slot4"," P4Score") // to store
    preferencesEditor.commit(); // store the updated preferences 
```

为了得到你的分数。

```
String  palyer1 = settings.getString("slot1", "notfound);
String  palyer2 = settings.getString("slot2", "notfound);
String  palyer3 = settings.getString("slot3", "notfound);
String  palyer4 = settings.getString("slot4", "notfound); 
```

欲了解更多信息：http: [//developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T15:21:34.650

`.putString()`只有 2 个参数。第一个是键，第二个是值。因此，您必须执行以下操作：

```
SharedPreferences.Editor preferencesEditor = SavedSlots.edit();
for(int i = 1; i<=4; i++){
      preferencesEditor.putString("player_" + i, HisScore);
}
preferencesEditor.apply(); // store the updated preferences 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T15:23:07.233

SharedPreferences 解决方案就像一张地图。一对一。`VALUE`_`KEY`

您可以通过将字符串与分隔符连接来解决此问题：

```
preferencesEditor.putString(slot, P1Score+"|"+P2Score+"|"+P3Score+"|"+P4Score); 
```

检索时：

```
String scoreString = preferences.getString(slot, "");
// each item in this array will be one score
String [] scores = scoreString.split("|");

String playerOneScore = scores[0];
String playerTwoScore = scores[1];
//... and so on... 
```

另请注意，您需要唯一的 KEY 来检索行。

但它真的很乱。您可以使用`SQLiteDatabase`，您可以根据需要向键（索引列）添加任意数量的值（列）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T15:23:09.230

方法 putString 不能像错误所说的那样使用...

“SharedPreferences.Editor 类型中的 putString(String, String) 方法
不适用于参数（字符串、字符串、字符串、字符串、字符串）。”

[SharedPreferences.Editor putString（字符串键，字符串值）](http://developer.android.com/reference/android/content/SharedPreferences.Editor.html#putString%28java.lang.String,%20java.lang.String%29)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-15T15:26:04.240

如果要存储 4 个分数，则需要调用 putString 方法 4 次。它应该是这样的：

```
preferencesEditor.putString("p1Score", score1);
preferencesEditor.putString("p2Score", score2);
preferencesEditor.putString("p3Score", score3);
preferencesEditor.putString("p4Score", score4); 
```

这是因为 putString 方法参数是键和值，而不是您尝试做的键和 4 个值。

另请注意，如果您将使用相同的密钥，下次您将应用分数时，它将覆盖现有的分数，我不确定您要达到什么目标，但它仅适用于 Last Score System 或类似的东西。

# php - 在不知道函数名称的情况下调用函数

> ID：12438521
> 
> 赞同：1
> 
> 时间：2012-09-15T15:12:25.750
> 
> 标签：php

我想在 PHP 中创建一个函数并在不知道函数名称的情况下调用它。

这可能吗？

例子：

```
<?php

     $functionName = "someName";
     $this->$functionName();
     function someName(){
         echo("Print Message");
     }
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T15:14:34.297

看起来像你想要[`call_user_func()`](http://php.net/manual/en/function.call-user-func.php)的。

```
$functionName = "someName";
call_user_func($functionName); //calls `someName()` 
```

可以像下面这样使用，其中输出是打印的消息“Hello, World!”：

```
function someName($val){
    return $val;
}

$functionName = "someName";
echo call_user_func($functionName, "Hello, World!"); 
```

[http://ideone.com/Kw5jp](http://ideone.com/Kw5jp)

**注意：**如果您使用的是较新版本的 PHP，您还可以使用 @J.Bruni 指出的可调用对象：

```
$functionName = "someName";
$functionName(); //also calls `someName()` 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-15T15:15:48.763

是的，这很简单：

```
$functionName(); 
```

然而，您还有其他几个选择，允许更复杂的东西。请检查：

[http://php.net/manual/en/language.types.callable.php](http://php.net/manual/en/language.types.callable.php)

示例集合：

```
function test() { echo 'hello 1'; }
class Something { function test() { echo 'hello 2'; } }
class Other { static function test() { echo 'hello 3'; } }

$functionName = 'test';
$object = new Something();
$className = 'Other';

// three ways to call function "test", showing how to pass parameters
$functionName($param1, $param2);
call_user_func($functionName, $param1, $param2);
call_user_func_array($functionName, array($param1, $param2));

// two ways to call "Something::test"
$object->$functionName();
call_user_func(array($object, $functionName));

// a way to call "Other::test"
call_user_func(array($className, $functionName)); 
```

重要提示：您需要在调用**之前**声明该函数。（在您的问题中，您在尝试调用该函数**后**声明了该函数。这不起作用。）

为避免错误，您可以[`is_callable`](http://php.net/is_callable)在实际调用之前使用该函数来验证函数/方法是否可调用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-15T15:15:38.343

call_user_func() 解决您的问题！

```
$function = 'myOwnFunction';
call_user_func( $functionname ); 
```

并且为了避免致命错误，您

```
function_exists($function); 
```

用它！

# c++ - 如何使用 portaudio 流式传输音频

> ID：12438522
> 
> 赞同：2
> 
> 时间：2012-09-15T15:12:35.843
> 
> 标签：c++, audio, libraries, portaudio

我遇到了新的麻烦。我使用的是Portaudio，我已经配置好并启动了流，但是我不知道如何播放声音，我不知道portaudio是否可以打开文件并流，我如何告诉portaudio播放什么？

谢谢

# android - ActionBarSherlock 选项卡 - 幻灯片

> ID：12438524
> 
> 赞同：3
> 
> 时间：2012-09-15T15:12:55.793
> 
> 标签：android, tabs, actionbarsherlock, slide

我正在使用 Jake Wharton 的 ActionBarSherlock；在我的一项活动中，我使用标签导航。而且，我有一个 ViewFlipper 来管理一些视图。

但是，我希望用户能够在选项卡之间滑动。

如果在显示的视图（因此，显示的 viewFlipper 的孩子）中有另一个视图，它是有效的，安全的。

例子 ：

```
<LinearLayout>
     <ViewFlipper>
          <LinearLayout> //First View

          </LinearLayout>
          <LinearLayout> //Second View

               <TextView/>

          </LinearLayout>
          <LinearLayout> //Third View

          </LinearLayout>
     </ViewFlipper>
</LinearLayout> 
```

如果我在第一个视图（或第三个）中，滑动效果很好；但不是在第二个。

1.  **为什么 ？**
2.  **如何解决？我应该将 Touch Listener 设置为所有“子视图”吗？**

*PS：*我将侦听器设置为包含 viewFlipper 的（根）LinearLayout。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:32:00.013

我理解了你问题的 40%。请在登顶之前校对您的问题。我真的对几件事感到困惑。#1 你使用的是视图还是片段？如果你使用标签，你应该使用片段！#2 您是通过 ViewFlipper、Swiping/Horizo​​ntal Paging、使用 Tabs 还是同时使用所有 3 个在 Fragments 之间切换。

针对您的第二个问题，如果您使用的是 ViewFlipper，则需要实现 OnClickListener，当用户点击 Flipper 时，应用程序将进入 onClick 方法。如果你实现 View.OnTouchListener，应用程序将进入方法 onTouch(View v, MotionEvent event)。注意 onTouch 的参数。您需要一个 MotionEvent。ViewFlipper 最适合短按。MotionEvent 最适合滑动。

为了激活 ViewFlipper，您需要：

1) `flippy = (ViewFlipper) findViewById(R.id.viewFlipper1);`
2) `flippy.setOnClickListener(this); //This is to make the ViewFlipper respond to clicks.`
3) `implements OnClickListener //This goes on top of your class (after “extends”).`
4) 那么当用户实际点击ViewFlipper时，程序会转到方法：

```
 public void onClick(View arg0) {flippy.showNext();} 
```

回答你的第一个问题。我猜你的问题是这样的：
1）为什么我不能使用 ViewFlipper 在两个以上的项目之间滑动？
就是这样。下面是一个名为 Flippering.java 的类的示例代码：

```
 import android.app.Activity;
    import android.os.Bundle;
    import android.view.View;
    import android.view.View.OnClickListener;
    import android.widget.ViewFlipper;

    public class Flippering extends Activity implements OnClickListener  {
        ViewFlipper flippy;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            // TODO Auto-generated method stub
            super.onCreate(savedInstanceState);
            setContentView(R.layout.h_swipe_neg_one);
            flippy = (ViewFlipper) findViewById(R.id.viewFlipper1);
            flippy.setOnClickListener(this);
        }

        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            flippy.showNext();
        }

    } 
```

这是相应的 XML 文档：

```
 <ViewFlipper
        android:id="@+id/viewFlipper1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" 
        android:onClick="Clicked">

        <ImageView
            android:id="@+id/imageView1a"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:src="@drawable/autumn_leaves" >
        </ImageView>

        <ImageView
            android:id="@+id/imageView2a"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:src="@drawable/azul" >
        </ImageView>

        <ImageView
            android:id="@+id/imageView3a"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:src="@drawable/big_mountain" >
        </ImageView>
    </ViewFlipper>

</LinearLayout> 
```

请注意，这`android:src="@drawable/big_mountain"`指的是我的 res/drawable-hdpi 文件夹中的图像。此外，`<ImageView>`您可以使用`<TextView>`. 例如：

```
<ViewFlipper>
   <TextView></TextView>
   <TextView></TextView>
   <TextView></TextView>
</ViewFlipper> 
```

此外，我非常怀疑您的问题与 ActionBarSherlock 有什么关系。

# ajax - 有哪些不同的上传机制

> ID：12438525
> 
> 赞同：0
> 
> 时间：2012-09-15T15:13:01.197
> 
> 标签：ajax, html, node.js, file-upload

有哪些不同类型的上传机制？

HTML 5 文件 API、表单、Ajax？后端实现有什么区别？

后端是用 node.js 编写的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T15:16:21.773

你有两个选择。第一个是使用表格，第二个是`xmlhttprequest`.

方法：您可以使用 iframe ，`form`这样您就可以上传“透明”文件（意味着用户不会看到页面刷新或类似内容）。

只有较新的`xmlhttprequest`浏览器才支持，因此您必须决定哪些浏览器能够上传文件...

也就是说，有一些 JavScript 可以为您完成所有工作（检测是否`xmlhttprequest`支持，如果支持，则使用它，如果不支持，则使用 iframe）。例如，请参阅[jQuery 文件上传](http://blueimp.github.com/jQuery-File-Upload/)。

# java - Java：时间分辨率

> ID：12438528
> 
> 赞同：2
> 
> 时间：2012-09-15T15:13:08.157
> 
> 标签：java, time

java se / java ee 中是否有任何内置类表示任意“时间分辨率”；例如每小时、每秒、全部 10 分钟等 ?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-15T15:22:55.713

查看[java.util.concurrent.TimeUnit](http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/TimeUnit.html)枚举，您可以使用此处的单位。

*不要重新发明轮子。*

对于更复杂的时间操作，我建议使用[Joda 时间](http://joda-time.sourceforge.net/)库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T15:18:31.740

您总是可以减少时间的分辨率，例如

```
long millis = System.currentTimeMillis();
long seconds = millis / 1000;
long minutes = seconds / 60;
long hours = minutes / 60; 
```

所以如果你想要半小时，你可以使用

```
long halfHour = System.currentTimeMillis() / (30 * 60 * 1000L) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-15T22:49:36.993

# 粒度单位

如果您的意思只是一种表示特定时间粒度的方法，例如小时、分钟和秒，那么[Kremser 接受的答案](https://stackoverflow.com/a/12438608/642706)是正确的。`TimeUnit`枚举正是这样。但是您还有另一种选择，它也内置在 Java 中。

## `ChronoUnit`

请注意，Java 8 及更高版本具有类似但更长的值列表 in[`java.time.temporal.ChronoUnit`](https://docs.oracle.com/javase/8/docs/api/java/time/temporal/ChronoUnit.html)与 7 相比`TimeUnit`：

*   永远
*   ERAS
*   千年
*   世纪
*   几十年
*   年
*   几个月
*   周数
*   天
*   HALF_DAYS
*   小时
*   分钟
*   秒
*   米利斯
*   微信
*   纳诺斯

两个枚举`TimeUnit`&`ChronoUnit`都很方便。单位之间的转换通过`TimeUnit`多种方法提供。用它的方法`ChronoUnit`计算经过的时间。[`between`](https://docs.oracle.com/javase/8/docs/api/java/time/temporal/ChronoUnit.html#between-java.time.temporal.Temporal-java.time.temporal.Temporal-)

# 时钟增量

如果您希望时钟以特定增量滴答作响，[`Clock`](https://docs.oracle.com/javase/8/docs/api/java/time/Clock.html)该类提供了替代实现。

*   [`Clock.tickSeconds`](https://docs.oracle.com/javase/8/docs/api/java/time/Clock.html#tickSeconds-java.time.ZoneId-)– 当前时间以整秒为单位递增。
*   [`Clock.tickMinutes`](https://docs.oracle.com/javase/8/docs/api/java/time/Clock.html#tickMinutes-java.time.ZoneId-)– 当前时间以整分钟为单位递增。
*   [`Clock.tick`](https://docs.oracle.com/javase/8/docs/api/java/time/Clock.html#tick-java.time.Clock-java.time.Duration-)– 当前时间以您指定的量递增

在许多 java.time 类中将您的替代`Clock`实现对象作为可选参数传递，以代替默认时钟。

# 截断值

如果您有一个日期时间值并且想要截断它以将较小的字段降为零，请查看[`truncatedTo`](https://docs.oracle.com/javase/8/docs/api/java/time/ZonedDateTime.html#truncatedTo-java.time.temporal.TemporalUnit-). 您使用接口指定粒度[`TemporalUnit`](https://docs.oracle.com/javase/8/docs/api/java/time/temporal/TemporalUnit.html)，实现在[`ChronoUnit`](https://docs.oracle.com/javase/8/docs/api/java/time/temporal/ChronoUnit.html).

例如，获取当前时刻，去掉小数秒和秒以获取整分钟的值。

```
ZoneId zoneId = ZoneId.of( "America/Montreal" );
ZonedDateTime now = ZonedDateTime.now( zoneId );
ZonedDateTime nowWholeMinutes = now.truncatedTo( ChronoUnit.MINUTES ); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-15T15:40:50.857

使用整数除法，很简单：

`long millis = System.currentTimeMillis();`

将以毫秒为单位为您提供当前时间。如果您想要一个值仅每`resolution`毫秒更改一次的时间（例如每 1000 毫秒），您可以使用整数除法：

```
long resolution = 1000;
long result = millis / resolution * resolution 
```

如果您将毫秒除以结果，则在此示例中您将获得秒数。`/`进行整数除法，因为`millis`和`resolution`都是整数变量。那将与`Math.floor(((float)millis) / ((float) resolution)))`. 如果现在乘以`resolution`，则只有达到新的分辨率单位时，结果才会改变。

示例：假设您想要一个时钟，其时间仅在到达新的 5 分钟块时才会更改，因此块是例如 0-4 分钟、5-9 分钟、10-15 分钟等。5 分钟是 1000 毫秒/ 秒 * 60 秒/分钟 * 5 分钟 = 300000 毫秒。因此，如果您设置`resolution = 300000`,`result`每 5 分钟块只会更改一次。对于毫秒 = 0-299999，结果 = 0。对于millis = 300000-599999，result = 5等。我猜你明白了。

# javascript - Javascript中的全局数组范围问题

> ID：12438529
> 
> 赞同：2
> 
> 时间：2012-09-15T15:13:18.447
> 
> 标签：javascript, jquery, asp.net-mvc, google-maps-api-3, scope

我目前正在处理一个页面，该页面最终会将一系列标记（它们的数据来自 JSON 对象）绘制到谷歌地图上。

我似乎无法配置出一种保持标记数组填充的方法。在 getJSON 调用范围之外，该数组为空。

```
 var markers = [];
   var map;
   var mapOptions = {
            center: new google.maps.LatLng(0.0, 0.0),
            zoom: 10,
            mapTypeId: google.maps.MapTypeId.ROADMAP
          }
   map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

   $.getJSON("Home/GetLocations", function (data) {
       for (index in data) addMarker(data[index]);

       function addMarker(_data) {
           var marker = new google.maps.Marker({
               position: new google.maps.LatLng(_data.lat, _data.lng),
               map: map,
               title: _data.name
           });
           markers.push(marker);

       }
       //markers = 3 at this point.
   });
   // markers = 0 at this point. 
```

我仍然需要填充数组的原因是我打算在页面上创建每个标记的超链接，以便可以单击它并且地图会缩放到正确的标记。理想情况下，这将是一个带有 javascript 函数调用的超链接，这个 javascript 函数将作为参数传递给选定的超链接的标记索引，允许我去例如

```
function zoomIn(selectedIndex) {
            map.setCenter(markers[selectedIndex].getPosition());
          } 
```

但是此时，标记数组是空白的，因此不再保存每个标记。

如果有人能指出我正确的方向，那就太好了。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T15:19:54.110

getJSON 调用中指定的函数将在 getJSON 完成时调用，这不一定是在使用标记数组的代码将运行时。我认为，如果您在 getJSON 调用中指定的函数中调用 zoomIn（或任何需要使用标记的方法），那么在使用它时将填充标记。关键是标记数组是异步填充的，因此您需要确保代码执行的顺序。

如果您在 getJSON 调用之后立即检查标记数组，请不要。检查正在使用的 zoomIn 函数中的标记数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T15:17:50.107

所有这些代码都在同一个范围内吗？您需要将它`var markers = [];`放在全局范围内，以便从所有功能中访问它。

所以做这样的事情：

```
var markers = [];
var map;
var mapOptions = {
        center: new google.maps.LatLng(0.0, 0.0),
        zoom: 10,
        mapTypeId: google.maps.MapTypeId.ROADMAP
      }
function init(){
    map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

   $.getJSON("Home/GetLocations", function (data) {
   for (index in data) addMarker(data[index]);

   function addMarker(_data) {
       var marker = new google.maps.Marker({
           position: new google.maps.LatLng(_data.lat, _data.lng),
           map: map,
           title: _data.name
       });
       markers.push(marker);

   }    
   });
}

function zoomIn(selectedIndex) {
        map.setCenter(markers[selectedIndex].getPosition());
      } 
```

然后该数组`markers`将在全局范围内可用。

# php - PDO 提取不返回任何结果

> ID：12438531
> 
> 赞同：1
> 
> 时间：2012-09-15T15:13:28.563
> 
> 标签：php, pdo

我正在尝试从数据库中获取结果，它没有返回任何错误，也没有返回任何结果。关于我做错了什么的任何想法？

```
try {
    $db_connection = new PDO("mysql:host = $hostname; dbname = $database", $username, $password);
    //$db_connection->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_SILENT );  
    $query = $db_connection->prepare("SELECT `id`, `code` FROM `mycodedatabase` WHERE 1");
    $query->execute();
    while ($row = $query->fetch(PDO::FETCH_ASSOC)) {
        echo $row['id'];
        echo $row['code'];
    }
    $db_connection = null;
}
catch(PDOException $e) {
    echo $e->getMessage();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T15:26:05.017

尽量避免将相同的变量用于不同的目的。使用 $query 和 $result。不要让你的代码复杂。我认为这将有助于调试并在逻辑看起来正确时避免错误。

```
<?php

$pdo = new PDO('mysql:host=localhost;dbname=$database', "user", "pass");
$pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

$query = "SELECT id,code FROM mycodebase";
$result = $pdo->prepare($query);
$result->execute();

while ($row = $result->fetch()) {
    echo $row['id'];
    echo $row['code'];
} 
```

不要忘记更改“用户”和“通过”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T15:17:34.530

您必须将错误模式设置为 PDO::ERRMODE_EXCEPTION 而不是 PDO::ERRMODE_SILENT （这是默认设置，因此不会引发异常）。

# c++ - Eclipse 中的 C++：更新后？：CDT 错误

> ID：12438532
> 
> 赞同：1
> 
> 时间：2012-09-15T15:13:29.117
> 
> 标签：c++, eclipse

从昨天开始，我的 Eclipse 不再适用于 c++ 项目（由于一般更新而重新启动计算机后）。我与 ubuntu 一起工作。重新安装并重新安装 download.eclipse.org/tools/cdt/releases/indigo 和 subclipse.tigris.org/update_1.8.x 或 ...1.6.x（参见[https://askubuntu.com /questions/119754/software-location-after-installing-via-ubuntu-software-center](https://askubuntu.com/questions/119754/software-location-after-installing-via-ubuntu-software-center)）没有帮助。我还卸载了没有帮助的 tzdata-java（比较[http://www.eclipse.org/forums/index.php/m/912544/](http://www.eclipse.org/forums/index.php/m/912544/)）。

我尝试执行以下[http://subclipse.tigris.org/wiki/JavaHL](http://subclipse.tigris.org/wiki/JavaHL)，但无法将 eclipse.ini 文件从只读更改为可写。

问题如下。如果我想为现有项目创建目标（创建），它会给出错误消息：“计算启动按钮工具提示”遇到问题。在详细信息下的“Compite launch button tooltip”**期间发生内部错误：“在“Compute launch button tooltip”期间发生内部错误。org/eclipse/cdt/core/model/CoreModel** ”。

另一个错误消息是（如果我想关闭项目）：“发生错误。有关详细信息，请参阅错误日志”在详细信息“**发生错误。有关更多详细信息，请参阅错误日志。org/eclipse/cdt/core/型号/ICElement** ”。

如果我想创建一个新的 c++ 项目，则会给出错误消息：问题打开向导无法启动所选向导。" 详细信息："**无法启动所选向导。插件 org.eclipse.cdt.ui 无法加载类 org.eclipse.cdt.ui.wizards.CCProjectWizard。自动激活捆绑包 org.eclipse.cdt.ui (229) 时出错。**"

我将整个现有文件夹复制到我的 macbook（到目前为止，我只是在这个文件夹上使用了 texlipse），但它不起作用。

我期待您的帮助和想法！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T14:08:09.263

这对你有用吗？

```
apt-get --reinstall install tzdata-java 
```

来源：[Eclipse：“Run as”不显示列表元素（如“Run as android application”）](https://stackoverflow.com/questions/12404216/elipse-run-as-does-not-display-the-list-elements-such-as-run-as-android-app)

（为我工作）

# jquery - jquery中方法的执行顺序？

> ID：12438535
> 
> 赞同：0
> 
> 时间：2012-09-15T15:13:49.587
> 
> 标签：jquery

我正在尝试找出 jquery 中方法执行的正确顺序。

这是示例脚本。

```
$(document).ready(function(){
    $("#start").click(function(){
        $("div").fadeOut(function(){
            console.log("i am no 1");
        }).fadeIn(function(){
            console.log("i am no 2");
        }).show('slow',function(){
            console.log('i am no 3');
        });
    });
}); 
```

因此，当我单击 id="start" 的按钮时。那么控制台中的 o/p 应该是

> 我不是1
> 
> 我不是2
> 
> 我不是3

但实际的o/p是

> 我不是1
> 
> 我不是3
> 
> 我不是2

所以，我想知道如何知道如何确定 jquery 脚本中方法的执行顺序？优先级的依据是什么？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T15:25:35.313

看看这个：[http ://api.jquery.com/queue/](http://api.jquery.com/queue/)

简而言之：

当你调用`fadeOut`你传入的函数时，效果完成**后会调用它，****然后**处理由 引起的效果`fadeIn`。

我相信你应该阅读一般的 Javascript 编程（回调、异步函数调用等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T10:59:17.097

感谢@jfriend00。我在 jsFiddle 和本地主机上尝试了相同的代码，我得到了预期的 o/p。

错误的 o/p 来自 W3schools.com 的试用部分。我在那里尝试了代码，但我得到了错误的 o/p 并让自己感到困惑。所以，我学到了 jsFiddle 比 w3schools 自己尝试要好得多的教训。谢谢大家。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T15:48:56.607

当使用早于 1.6.4 的 jQuery 版本时，我只能在[jsFiddle中重现此问题。](http://jsfiddle.net/jfriend00/tgraD/)如果您使用 1.6.4 或更高版本，jsFiddle 可以在我尝试过的所有浏览器中使用。

我的猜测是，您要么尝试使用直到 1.6 才实现的功能，要么遇到了直到 1.6 才修复的错误行为。

您可以使用 jQuery 1.8.0 在此处查看工作顺序：http: [//jsfiddle.net/jfriend00/tgraD/](http://jsfiddle.net/jfriend00/tgraD/)

您可以使用 jQuery 1.5.2 在此处查看失败的订单：http: [//jsfiddle.net/jfriend00/SJns7/](http://jsfiddle.net/jfriend00/SJns7/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-15T15:42:28.510

这是因为函数在完成第一个函数的执行之前执行。为了克服这个调用第二个函数在第一个成功回调中的第二个函数和第二个成功回调中的第三个函数。

# mpi - 如何识别 MPI 进程是否属于给定的 Communicator

> ID：12438537
> 
> 赞同：3
> 
> 时间：2012-09-15T15:14:01.853
> 
> 标签：mpi

我已经使用构造创建了一个通信器`MPI_Comm_split()`，然后我想在**MPI_Comm_World**级别和新通信器级别尝试一些发送/接收通信。创建了两个通信器（一个具有偶数进程等级，另一个具有奇数等级）。

**注意：**我只需要在包含 even-process-ranks 的新通信器中尝试通信（尽管进程的排名不是原来的，但我仍然关心这些进程在其内存空间中的内容）

我的代码如下，

```
 #include<stdio.h>
    #include "mpi.h"
    int main(int arg, char **argv){
    int rank,newrank,newrank2;
    int size, newSize,newSize2;
    int data;
    int recv;
    MPI_Comm newComm, newComm2;
    MPI_Status status, newStatus;
    MPI_Init(&arg,&argv);

    MPI_Comm_size(MPI_COMM_WORLD,&size);
    MPI_Comm_rank(MPI_COMM_WORLD,&rank);    
    //sample data
    data = rank * 100 + 1;

    printf("my rank in the WORLD is: %d\n", rank);
    fflush(stdout); 

    if(rank%2==0){
    MPI_Comm_split(MPI_COMM_WORLD,0,rank,&newComm);
    MPI_Comm_rank(newComm,&newrank);
    MPI_Comm_size(newComm,&newSize);    
    printf("my rank in the newComm1 is : %d\n", newrank);
    }else{      
            MPI_Comm_split(MPI_COMM_WORLD,1,rank,&newComm2);
            MPI_Comm_rank(newComm2,&newrank2);
            MPI_Comm_size(newComm2,&newSize2);        
    printf("my rank in the newComm2 is : %d\n", newrank2);
    }

    //Now try some communication at the newCommunicator and at the WORLD level
    if(rank == 0){
    //sending to process 1 wrt WOLD_Comm
    MPI_Send(&data,1,MPI_INT,1,99,MPI_COMM_WORLD);      
    }
    if(rank==1){
    //Receive from process at WORLD_Comm level. 
    MPI_Recv(&recv,1,MPI_INT,0,99,MPI_COMM_WORLD,&status);
    printf("Received at WORLD Level : %d \n\n",recv);
    }
    if(newSize > 2){
    if(newrank == 2){
        //send to process 1 wrt the newComm
        MPI_Send(&data,1,MPI_INT,1,0,newComm);
    }
    if(newrank==1){
        //Receive from process at newComm level.
        MPI_Recv(&recv,1,MPI_INT,2,0,newComm,&status);
        printf("Received at newComm Level : %d \n\n",recv);
    }
    }
    MPI_Finalize();
    return 0;
    } 
```

当我尝试在内部发送/接收数据时发生错误`new Communicator`。该错误是有道理的，因为不属于新通信器的进程（奇数级进程）不能使用新的通信器句柄（newComm）。

所以我的问题是如何检查给定进程是否属于新的通信器。
这样我就可以在进行任何沟通之前放置这个警卫。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T22:37:17.710

我会重新审视代码做`MPI_Comm_split`. 据我所知，您不需要两个单独的变量`newComm`和`newComm2`. 当您调用 时`MPI_Comm_split`，您可以考虑在全局范围内创建多个通信器：每个值对应一个`color`. 但是每个调用的进程`MPI_Comm_split`只获得一个对一个通信器的引用——它所属的那个。

`if`语句 with`MPI_Comm_split`可以替换为

```
MPI_Comm_split(MPI_COMM_WORLD, (rank % 2 == 0), rank, &newComm);
MPI_Comm_rank(newComm, &newrank);
MPI_Comm_size(newComm, &newSize); 
```

创建了两个通信器，但`newComm`在不同的进程中指代不同的通信器。

如果奇数进程根本不需要通信，您可以让它们`MPI_UNDEFINED`为`color`. 这将使他们获得`MPI_COMM_NULL`for的价值`newComm`：

```
MPI_Comm_split(MPI_COMM_WORLD, (rank % 2) ? MPI_UNDEFINED : 0, rank, &newComm); 
```

然后您的代码可以检查是否`(newcomm == MPI_COMM_NULL)`.

# xcode - 使从 plist 加载的文本滚动

> ID：12438547
> 
> 赞同：0
> 
> 时间：2012-09-15T15:14:51.990
> 
> 标签：xcode, load, scroll, plist

我是 iOS 新手，需要修复一些问题。

我有一堆标签的视图，这些标签被我在 plist 文件中的信息替换，一切正常，所有文本都按我的视图显示。

我唯一的问题是我用于描述的字符串，它是一个很长的文本，我需要它在我的视图中是可滚动的。这样我可以在字符串中有 2 个段落，它会加载到我需要的框中。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T15:28:38.727

UILabel 没有内置滚动条。

改用[UITextView](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UITextView_Class/)。

如果您想在尝试修改自己的代码之前查看它们的样子，为什么不下载[Apple 的“UICatalog”示例](http://developer.apple.com/library/ios/#samplecode/UICatalog/Introduction/Intro.html)（这是一个完整的项目——和代码——显示了 UIKit 框架中可用的许多视图）。

# c# - Visual Studio 2012 的增强滚动条？

> ID：12438557
> 
> 赞同：12
> 
> 时间：2012-09-15T15:15:54.567
> 
> 标签：c#, visual-studio, visual-studio-2012

如果您使用过 VS2010 生产力工具的增强滚动条，您就会知道没有它几乎是不可能工作的。Visual Studio 2012 不支持它。我用谷歌搜索但没有发现任何有趣的东西。也许您听说过一些适用于 Visual Studio 2012 的替代方案？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-08T09:53:53.987

最后，Productivity Power Tools 2012 昨天发布了：http: [//blogs.msdn.com/b/visualstudio/archive/2012/11/07/productivity-power-tools-2012.aspx](http://blogs.msdn.com/b/visualstudio/archive/2012/11/07/productivity-power-tools-2012.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T15:57:17.150

这是一个可供选择的选项 - 如果您是早期采用者:)

Visual Studio 库中的[ProgressiveScroll](http://visualstudiogallery.msdn.microsoft.com/873d4c86-7827-4d51-95e9-6eb44c0d3287)扩展。

2012 年 9 月 16 日，开发人员发布了：

> 该扩展**现在应该与 VS 2012 兼容**。不过，我并没有在 VS 2012 中积极测试它，所以如果你尝试它并发现任何错误，请务必让我知道。

# java - Java Swing：按钮的特定 id。如何在不使用 .getActionCommand 的侦听器中捕捉按下的按钮？

> ID：12438558
> 
> 赞同：0
> 
> 时间：2012-09-15T15:15:53.477
> 
> 标签：java, swing, jbutton, actionlistener, listeners

我必须为 JPanel 编写一个 ActionListener。

任务，取决于按下的按钮以引起所需的动作。我知道的唯一方法 - 使用`event.getActionCommand()`并依赖于该字符串从按钮获取标签以引起所需的操作。

但我认为绑定到标签是错误的方式，非常错误的方式。还有其他选择吗？

换句话说，我的问题是：如何确定按下的按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T15:25:31.703

我做过的一件事是这样的：

```
// Action Listener method
public void actionPerformed(ActionEvent e) {
    // Did somebody push my button?
    if (e.getSource() == myButton) {
        myCaller.doButton(myButton, myValue);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T15:24:02.727

Swing 是一种*事件驱动的架构*。因此，当您尝试与组件执行任何类型的交互时，理想情况下您将捕获或处理与组件关联的相应事件。

您需要做的是添加一个*ActionListener*，当执行一个动作（*在这种情况下按下按钮*）时，您将调用您在代码中谈论的方法（ *“必需的动作” ）。*如果您是 ActionListener 的新手，您可能会发现：[“How to Write an Action Listener”](http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html)会有所帮助

# mysql - 在 MySQL 中使用自定义排序功能

> ID：12438559
> 
> 赞同：0
> 
> 时间：2012-09-15T15:16:13.163
> 
> 标签：mysql, sorting, quicksort, radix-sort

MySQL`quicksort`在用户请求时对结果集进行排序。现在平均而言，`quicksort`效率为`O(Nlog N)`，这是可以接受的（即使它最坏的情况有时可能达到`O(N^2)`。现在对于大多数情况来说这很好，但想象一下我有一个列，比如说，pin-number，它总是有 6 位数字。并且一个特定的查询会获取数百万行并根据该键对它们进行排序。在这种情况下`radix-sort`，给出线性顺序不是更好的选择吗？有什么办法（也许写一个插件或其他东西）我可以引入一个新的MySQL 函数，比如说`myorderby`，它将通过我定义的自定义基数排序基于给定键对结果集进行排序？其次，这个调整是否值得？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T16:10:41.833

您可以获取 MySQL 源代码并注入您自己的排序功能。如果确实更快，您甚至可以将其提交给社区。

是否值得，取决于付出的努力。我认为通过这样的修改来运行 MySQL 是一项相当大的工作，而且您也希望能够轻松更新。因此，除非您真的需要速度增益和/或您能够将您的排序设置为未来版本的默认值，否则我认为这是不值得的。我从来没有经历过排序成为瓶颈。

# javascript - 返回 NaN 的函数

> ID：12438560
> 
> 赞同：0
> 
> 时间：2012-09-15T15:16:15.857
> 
> 标签：javascript, blackjack

不久前我问了一个关于同一批次代码的问题，但这次是一个不同的问题。使用我得到的关于那个不同问题的技巧，我试图解决这个问题，这是我在 JavaScript 二十一点游戏中的得分函数。当我在 Mozilla Scratchpad 上测试时，我的 score 函数不断打印出 NaN。我尝试调整返回值，合并两个 for 循环，甚至重命名我的 deal 函数中的变量，以确保它不会与其他变量混淆，但仍然没有。有人问了一个类似的问题，但它并没有解决我的问题。

```
function Card (s, n) {
    var suit = s;
    var number = n;
    this.getNumber = function () {
        return number;
    };
    this.getSuit = function () {
        return suit;
    };
    this.getValue = function () {
        if (number > 10) {
            return 10;
        } else if (number === 1) {
            return 11;
        } else {
            return number;
        }
    };
}

var cardNames = {1:"Ace", 2:"2", 3:"3", 4:"4", 5:"5", 6:"6", 7:"7", 8:"8", 9:"9", 10:"10", 11:"Joker", 12:"Queen", 13:"King"};
var suitNames = {1:"Clubs", 2:"Diamonds", 3:"Hearts", 4:"Spades"};

var deal = function () {
    var s = Math.floor(Math.random() * 4 + 1);
    var n = Math.floor(Math.random() * 13 + 1);
    return new Card(s, n);
};

function Hand(){
    var cards = [];
    var card1 = deal();
    var card2 = deal();
    cards = [card1, card2];
    this.getHand = function () {
        return cards;
    };
    this.score = function () {
        var points;
        for (i = 0; i < cards.length; i++) {
            points = points + cards[i].getValue();
        }
        for (i = 0; i < cards.length; i++) {
            if (points > 21 && cards[i].getValue() === 11) {
                points = points - 10;
            }
        } return points;
    };
    this.printHand = function () {
        for (i = 0; i < cards.length; i++) {
            var hand;
            if (i === 0) {
            hand = cardNames[cards[i].getNumber()] + " of " + suitNames[cards[i].getSuit()];
            } else {
            hand = hand + " and a " + cardNames[cards[i].getNumber()] + " of " + suitNames[cards[i].getSuit()];
            }
        } return hand;
    };
    this.hitMe = function () {
        cards.push(deal());
    };
}

var playAsDealer = function () {
    var playDealer = new Hand();
    while (playDealer.score() < 17) {
        playDealer.hitMe();
    }
    this.printHand = function () {
    return playDealer.printHand();
    };
    this.score = function () {
    return playDealer.score();
    };
    return playDealer;
};

var playAsUser = function () {
    var playUser = new Hand();
    var decision = confirm("Your hand is " + playUser.printHand() + ". Click OK to hit or Cancel to stand");
    for (i = 0; decision !== false; i++) {
        playUser.hitMe();
        decision = confirm("Your hand is " + playUser.printHand() + ". Click OK to hit or Cancel to stand");
    }
    this.printHand = function () {
    return playUser.printHand();
    };
    this.score = function () {
    return playUser.score();
    };
    return playUser;
};

var declareWinner = function (userHand, dealerHand) {
    if ((userHand.score < dealerHand.score) || userHand.score > 21) {
        alert("You lose.");
    } else if (userHand.score > dealerHand.score) {
        alert("You win.");
    } else {
        alert("You tied.");
    }
};

var playGame = function () {
    user = playAsUser();
    dealer = playAsDealer();
    declareWinner(user, dealer);
    alert("User got " + user.printHand() + " for a total score of " + user.score());
    alert("Dealer got " + dealer.printHand() + " for a total score of " + dealer.score());
};

playGame(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-15T15:22:14.727

您只需要在函数中初始化 的`points`值`score`。更改`var points;`为`var points = 0;`，你应该没问题。

**编辑：**由于我确定这将是您的下一个问题，因此您还需要实际调用`score`. `declareWinner`您正在使用`player.score`而不是`player.score()`在多个地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T15:28:27.327

当你声明它们时，你永远不会初始化它们。最初将它们初始化为一个数字，因为当您执行`points = points + cards[i].getValue()`javascript 所做的事情时，它会获取 LHS 和 RHS 的值，然后将它们转换为原语，使 points 成为 string `''`。也每当你想确保获得一个数字执行`parseInt(arg, base)`！

```
 var points = 0;
    for (i = 0; i < cards.length; i++) {
        points = points + cards[i].getValue();
    }
    for (i = 0; i < cards.length; i++) {
        if (points > 21 && cards[i].getValue() === 11) {
            points = points - 10;
        }
    } return points; 
```

# c# - SQLite 不保存我插入的数据

> ID：12438563
> 
> 赞同：1
> 
> 时间：2012-09-15T15:16:27.640
> 
> 标签：c#, sql, winforms, sqlite, sql-insert

我正在玩弄 SQL lite 并学习它。

我有一个名为 People 的表，我有一些方法可以连接到数据库并做一些事情，比如显示所有信息。

现在我正在尝试插入一些数据，这对我来说很奇怪。我有这个方法：

```
private void ExecuteQuery(string txtQuery)
{
    SetConnection();
    sql_con.Open();
    sql_cmd = sql_con.CreateCommand();
    sql_cmd.CommandText = txtQuery;
    sql_cmd.ExecuteNonQuery();
    sql_con.Close();
} 
```

并查看我拥有此方法的所有数据：

```
private void LoadData()
{
    SetConnection();
    sql_con.Open();
    sql_cmd = sql_con.CreateCommand();
    string CommandText = "SELECT * FROM People";
    DB = new SQLiteDataAdapter(CommandText, sql_con);
    DS.Reset();
    DB.Fill(DS);
    DT = DS.Tables[0];
    dataGridView1.DataSource = DT;
    sql_con.Close();
} 
```

当我插入一些数据并立即调用它时`LoadData()`，我可以看到我所做的所有更改。

在我关闭程序，然后再次打开它并调用`LoadData()`后，我看不到我之前插入的新信息。

我得到了一些我使用 SQL lite GUI 应用程序插入的数据，每次调用该`LoadData()`方法时我都可以看到这些数据，但不是我的。

我是否需要做其他事情来确保 SQL lite 保存所有数据？

**编辑：这就是我插入数据的方式，mybee 问题出在此处？**

```
string insetCommand = "INSERT INTO People Values(2,'" + textBox1.Text + "')"; 
```

**EDIT2：我的 connectionString 方法**

```
public static string connectionString
    {
        get
        {
            string database =
                //AppDomain.CurrentDomain.BaseDirectory + "..\\..\\Database\\ImageLib.s3db";
               AppDomain.CurrentDomain.BaseDirectory + "\\DataBase\\myTable2";
            string connectionString =
                @"Data Source=" + Path.GetFullPath(database) + ";Version=3;";
            return connectionString;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T18:12:16.287

您的问题看起来好像您的数据存储在临时数据库中。

请检查您`connectionString`是否实际使用过（如果文件名为空，SQLite 将使用临时数据库）。

要从应用程序内部检查数据库文件名，请[`PRAGMA database_list`](http://www.sqlite.org/pragma.html#pragma_database_list)像查询一样执行并检查结果的第三列是否包含您的文件名。示例输出：

```
> pragma database_list;
seq   name   file
----- ------ ----------
0     main   /tmp/test.db 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T16:29:54.563

尝试执行一个提交语句，我相信 SQLite 需要它！您也可以尝试将其全部包装在事务中！

# sql - 插入不工作

> ID：12438565
> 
> 赞同：0
> 
> 时间：2012-09-15T15:16:45.620
> 
> 标签：sql, parameters, sqlcommand, scalar

我已经搜索了 evreywhere 并尝试了所有建议，但在运行以下代码时仍然没有运气。请注意，某些代码已被注释掉。那只是我尝试不同的事情。

SqlConnection connection = new SqlConnection("数据源=URB900-PC\SQLEXPRESS；初始目录=usersSQL；集成安全=True");

```
 string password  = PasswordTextBox.Text;
        string email     = EmailTextBox.Text;
        string firstname = FirstNameTextBox.Text;
        string lastname  = SurnameTextBox.Text;

        //command.Parameters.AddWithValue("@UserName", username);
        //command.Parameters.AddWithValue("@Password", password);
        //command.Parameters.AddWithValue("@Email", email);
        //command.Parameters.AddWithValue("@FirstName", firstname);
        //command.Parameters.AddWithValue("@LastName", lastname);

        command.Parameters.Add("@UserName", SqlDbType.VarChar);
        command.Parameters["@UserName"].Value = username;

        command.Parameters.Add("@Password", SqlDbType.VarChar);
        command.Parameters["@Password"].Value = password;

        command.Parameters.Add("@Email", SqlDbType.VarChar);
        command.Parameters["@Email"].Value = email;

        command.Parameters.Add("@FirstName", SqlDbType.VarChar);
        command.Parameters["@FirstName"].Value = firstname;

        command.Parameters.Add("@LasttName", SqlDbType.VarChar);
        command.Parameters["@LasttName"].Value = lastname;

        SqlCommand command2 = new SqlCommand("INSERT INTO users (UserName, Password, UserEmail, FirstName, LastName)" +
        "values (@UserName, @Password, @Email, @FirstName, @LastName)", connection);

        connection.Open();
        command2.ExecuteNonQuery();
        //command2.ExecuteScalar();
        connection.Close(); 
```

当我运行它时，填写文本框并点击我得到的按钮......

必须声明标量变量“@UserName”。

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T15:41:50.500

这是因为您将参数附加到`command`然后执行不同的`command2`

# c# - 在 C# 中渲染 2D 网格

> ID：12438566
> 
> 赞同：1
> 
> 时间：2012-09-15T15:16:47.200
> 
> 标签：c#, xna, geometry, 2d, vertex

我正在使用带有 C# 的 XNA，并且我正在尝试创建一种基于顶点的图形系统。所以到目前为止我有以下代码

```
public class vertex {
    private Vector2 position;
    private Color color;

    public vertex(Vector2 position, Color color) {
        this.position = position;
        this.color = color;
    }

    public Vector2 Position {
        get { return position; }
        set { position = value; }
    }

    public Color Color {
        get { return color; }
        set { color = value; }
    }
}

public class mesh {
    private vertex[] vertecies;

    public mesh(int vertecies) {
        this.vertecies = new vertex[vertecies];
        for (int i = 0; i < vertecies; i++)
            this.vertecies[i] = new vertex(Vector2.Zero, Color.White);
    }

    public vertex[] Vertecies {
        get { return vertecies; }
        set { vertecies = value; }
    }
} 
```

然后我有这个功能可以在屏幕上呈现一个点

```
 private void RenderVertex(vertex v)
 {
     sb.Draw(world.blankTexture, v.Position, new Rectangle(1, 1, 2, 2), v.Color);
 } 
```

现在我要创建的是一个名为 RenderMesh(mesh m) 的函数，它使用 RenderVertex(vertex v) 函数将给定的网格从点（顶点）中渲染出来。所以基本上我想找到网格顶点之间的每个点并用点填充它。有算法吗？还是我应该采取完全不同的方法。因为我试图让我的系统呈现和处理动态形状。所以请帮忙。谢谢阅读 ：）

# java - Java 字节码 DUP

> ID：12438567
> 
> 赞同：10
> 
> 时间：2012-09-15T15:16:48.820
> 
> 标签：java, bytecode

我想知道为什么以下字节码中的异常（用于抛出异常）是重复的。

```
NEW java/lang/IllegalArgumentException
DUP
INVOKESPECIAL java/lang/IllegalArgumentException <init> ()V
ATHROW 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-15T15:23:54.410

我将逐行分析这一行，其中 [] = 使用该操作后的新堆栈：

1.  NEW 将一个新`IllegalArgumentException`的放入堆栈*[SomeIllegalArgumentException]*
2.  DUP 复制它*[SomeIllegalArgumentException, SomeIllegalArgumentException]*
3.  INVOKESPECIAL 从顶部弹出并通过调用它的 <init> 方法来初始化它*[SomeIllegalArgumentException]*（init 方法不会返回要放回堆栈的对象，因此必须首先复制对象以使其保留在堆栈中)
4.  ATHROW 抛出另一个（与我们初始化的那个重复）*[]*

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-15T15:22:48.147

在字节码中，对象首先由类创建，然后在该对象上调用构造函数。`V`构造函数的签名以for结尾，`void`因为它确实返回任何内容。这意味着对对象的原始引用的副本必须保存在堆栈中（或变量中），以便在调用构造函数后可以将其抛出。

顺便说一句，构造函数`<init>`的内部名称是，静态初始化代码的内部名称是`<clinit>`

# c - 预加载静态链接的 C 符号

> ID：12438568
> 
> 赞同：2
> 
> 时间：2012-09-15T15:17:01.073
> 
> 标签：c, preloading

是否可以预加载静态链接的符号？

在linux中，我可以使用

`LD_PRELOAD=libSomeLibrary.so ./anExecutableLinkedToAnOtherLibrary`

但这仅适用于动态链接符号的情况。现在我需要将一些符号注入到一个可执行文件中，其中这些符号静态链接到其他一些库。

我知道在一般情况下，这在理论上是不可能的，因为静态符号甚至可能已被内联。但是，如果我们有一个没有优化且包含完整调试符号的调试版本，理论上应该可以将我们的符号注入正确的位置。

我对 linux 和 windows 世界的答案都很感兴趣，但即使只是在 linux 中解决这个问题就足够了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T16:37:50.643

静态符号没有预加载机制，因为它们不使用 ld.so。操作系统只是将文件映射到内存中并开始执行它。

您也许可以修改二进制文件以包含新版本的库。一种方法是使用`objcopy`删除旧符号，然后`ld`链接新符号。

# php - 使用 PHP 在数据库中插入数千条记录

> ID：12438569
> 
> 赞同：0
> 
> 时间：2012-09-15T15:17:01.827
> 
> 标签：php, mysql

我正在生成这种数据：

```
INSERT INTO `mytable` (`idSample`, `postSampeId`, `title`, `link`, `description`, `date`, `views`, `clicks`, `isDeleted`) VALUES
    (41021, 121, 'Job Board Detox Tip #9: Attend a Networking Event for Non-Job Seekers', 'http://www.careerealism.com/job-board-detox-networking-event/', '<img src=''http://www.careerealism.com/home/jtodonnell/careerealism.com/wp-content/uploads/2012/08/Job-Board-Detox-Networking-Event-Featured.png'' style=''float:left;'' />\nToday&rsquo;s&nbsp;job board detox&nbsp;tip: Attend a networking event for non-job seekers.\nYes, your challenge today is to attend a networking event that is NOT targeted to job seekers. Why? Because it will help you to meet the target audience you ', '16 Aug 2012, 12:30 am', 523, 0, 0),
    (41026, 78, 'Olympic Sponsors Go For Gold Online [INFOGRAPHIC]', 'http://feeds.mashable.com/~r/Mashable/SocialMedia/~3/MPop6ENLC94/', '\n\n\n\nThe Olympics are over, and whether you were watching or not, you probably couldn''t avoid their sponsors'' ads. \nUnmetric, a service that tracks brands'' online presence, collected data leading up to the Games to see how sponsors stacked up against ', '16 Aug 2012, 12:58 am', 410, 0, 0),
    (41025, 75, 'Updated Google Play app reveals gift card support, wish list coming soon?', 'http://www.engadget.com/2012/08/16/google-play-wishlist-gift-card-leak/', '<img src=''http://www.blogcdn.com/www.engadget.com/media/2012/08/gplaywishlishgiftcardandroidpolice.jpg'' style=''float:left;'' />\n \n If the images and link settings Android Police has dug up from the most recent (v3.8.15) Google Play APK that''s rolling out are correct, we could see a coupe more features coming to the Android app and media store soon. First up are very fleshed ', '16 Aug 2012, 12:14 am', 436, 0, 0),
    (41028, 95, 'The Gadgets that Got Us Going, Back in 2002 [Gizmodo10]', 'http://feeds.gawker.com/~r/gizmodo/full/~3/9K9bDZpH58g/the-gadgets-the-got-us-going-back-in-2002', '<img src=''http://img.gawkerassets.com/img/17unbdb2iwfzmjpg/original.jpg'' style=''float:left;'' />\n\n                                                         \n                      \n                                  \n              Gizmodo is officially 10 years old! And, while we''ve been celebrating this all week, I thought it would be fun (and/or funny) to take a look back at the ancestor gadgets we would all be using if someone were to ', '16 Aug 2012, 12:00 am', 402, 0, 0),
    (41029, 95, 'US Suffers Another Blow in Its Case Against Kim Dotcom [Kim Dotcom]', 'http://feeds.gawker.com/~r/gizmodo/full/~3/RVKHECRt2eI/us-suffers-another-blow-in-its-case-against-kim-dotcom', '<img src=''http://img.gawkerassets.com/img/17w42we7bn5bgjpg/original.jpg'' style=''float:left;'' />\n\n                                                            \n                      \n                                  \n              Is it okay for me to say that I''m a little glad we''re doing so poorly in our case against Megaupload kingpin Kim Dotcom? I am. I am so glad. I miss Megaupload dearly and I''m truly pleased by this latest news: Ju', '16 Aug 2012, 1:00 am', 402, 0, 0),
    (41032, 66, 'Hanwha Chairman Gets 4-Year Sentence', 'http://online.wsj.com/article/SB10000872396390444508504577592203136561574.html?mod=pls_whats_news_us_business_f', 'A South Korean court sentenced the leader of one of the country''s largest business groups, Hanwha Group, to four years in prison for using corporate funds to pay his own debts. The group plans to appeal the sentence.', '16 Aug 2012, 1:21 am', 523, 0, 0),
    (41031, 98, 'Sunglass Holders, iCloud Dropbox, and Cable Storage [From The Tips Box]', 'http://feeds.gawker.com/~r/lifehacker/full/~3/QakmYYUdVck/', '<img src=''http://img.gawkerassets.com/img/17w305ddlru7zjpg/original.jpg'' style=''float:left;'' />\n\n                                                           \n                      \n                                  \n              Readers offer their best tips for storing your sunglasses in your car, making iCloud work like Dropbox, and storing your cables on-the-go.              More&nbsp;&raquo;\n             \n\n   \n\n\n', '15 Aug 2012, 7:00 pm', 426, 0, 0),
    (41041, 77, 'Dynamic Solar Gets NY-Sun Funding', 'http://feeds.importantmedia.org/~r/IM-cleantechnica/~3/ew8TEuGaQX4/', '<img src=''http://c1cleantechnicacom.wpengine.netdna-cdn.com/files/2012/08/Octagon-@-Roosevelt-Island.jpg'' style=''float:left;'' />\n&nbsp;Dynamic Solar&nbsp;was one of the lucky 16 recipients of the $30 million New York (NY)-Sun award on Wednesday.\nThe purpose of the NY-Sun program is to help businesses and other organizations get electricity from solar energy sources.\n\nThe awar', '16 Aug 2012, 2:01 am', 233, 0, 0),
    (41042, 68, 'Taylor Swift -- Crazy for Break-Up Songs', 'http://www.tmz.com/2012/08/16/taylor-swift-conor-kennedy-we-are-never-ever-getting-back-together-tmz-tv/', 'Taylor Swift has a habit of trashing exes in song ... including her new #1 hit -- so who''s crazier? Taylor or the dudes who keep dating her? Harvey is definitely leaning one way on this.Check out TMZ on TV -- click here to see your local listings!\n', '16 Aug 2012, 2:02 am', 231, 0, 0),
    (41035, 121, 'Ask Our Experts: What’s the Hardest Interview Question and How Do You Answer it?', 'http://www.careerealism.com/hardest-interview-questions-ask-our-experts/', '<img src=''http://www.careerealism.com/home/jtodonnell/careerealism.com/wp-content/uploads/2012/08/Hardest-Interview-Question-Featured.png'' style=''float:left;'' />\nEach week, we ask our experts to answer a&nbsp;career&nbsp;question on behalf of our readers.\nThis week&rsquo;s question is about the&nbsp;hardest interview questions:\n&ldquo;What&rsquo;s the hardest interview question to answer and what tips can yo', '16 Aug 2012, 1:00 am', 357, 0, 0),
    (41036, 121, 'Working as a Mechanic: No Degree, No Problem', 'http://www.careerealism.com/working-mechanic/', '<img src=''http://www.careerealism.com/home/jtodonnell/careerealism.com/wp-content/uploads/2012/08/Mechanic-Career-Featured.png'' style=''float:left;'' />\nThis is a true story as told to DiversityJobs Street Smarts, where you can find career interviews for the job you&rsquo;ve been looking for.&nbsp;Visit to find an interview in your desired field today.&nbsp;\nI am a mechanic at Walls Garage in Greenw', '16 Aug 2012, 1:30 am', 357, 0, 0),
    (41039, 75, 'Acer CloudMobile now available for pre-order in the UK, expected to be released on September 5th', 'http://www.engadget.com/2012/08/16/acer-cloudmobile-smartphone-pre-orders/', '<img src=''http://www.blogcdn.com/www.engadget.com/media/2012/08/acer-cloudmobile-1345036135.jpg'' style=''float:left;'' />\n \n Acer took the gadget world by surprise with its award-winning CloudMobile handset, and now it looks like the company''s finally ready to let consumers get their eager palms on that 4.3-inch, 720p slab. Per online retailer Expansys, Acer''s CloudMob', '16 Aug 2012, 1:00 am', 293, 0, 0),
    (41040, 75, 'Fujitsu''s Stylistic M532 quad-core tablet ships to the US with toughened body, dash of security', 'http://www.engadget.com/2012/08/16/fujitsu-stylistic-m532-quad-core-tablet-ships-to-the-us/', '<img src=''http://www.blogcdn.com/www.engadget.com/media/2012/08/fujitsu-stylistic-m532-launch.jpg'' style=''float:left;'' />\n \n Fujitsu''s Stylistic M532 has had a protracted development process that saw it appear on our radar as early as January; imagine our surprise after it ships to the US with barely more than a knock on the door. Now that it''s here, it looks to be on ', '16 Aug 2012, 1:39 am', 311, 0, 0),
    (41045, 42, 'Ex-Wife Sues Yogurt Mogul', 'http://www.inc.com/maeghan-ouimet/exwife-sues-chobani-ceo.html', '<img src=''http://www.inc.com/uploaded_files/image/100x100/chobanibucket_19761.jpg'' style=''float:left;'' />\nThe hottest brand in yogurt is in the center of a battle over who owns a majority stake in the company.\nHamdi Ulukaya, owner of Greek yogurt company Chobani, received sour news Tuesday: According to the New York Post, his ex-wife Ayse Giray has file', '16 Aug 2012, 1:00 am', 190, 0, 0),
    (41044, 68, 'Marion Jones -- Sells Tiny TX House ... Buys Not-So-Tiny House', 'http://www.tmz.com/2012/08/16/marion-jones-texas-home-gallery/', 'Things are looking up for Marion Jones -- who was infamously stripped of her Olympic gold medals -- because she just traded in her humble Texas home ... for a much nicer version. In case you didn''t already know ... in 2007 Marion -- who was&hellip;\n', '16 Aug 2012, 2:15 am', 220, 0, 0),
    (41051, 47, 'Celeb birthdays for the week of Aug. 19-25', 'http://news.yahoo.com/celeb-birthdays-week-aug-19-25-050243812.html', 'Aug. 19: Actress Diana Muldaur ("Star Trek: The Next Generation") is 74\. Drummer Ginger Baker (Cream, Blind Faith) is 73\. Singer Johnny Nash is 72\. Actress Jill St. John is 72\. Singer Billy J. Kramer is 69\. Country singer-songwriter Eddy Raven is 68.', '16 Aug 2012, 12:02 am', 119, 0, 0),
    (41052, 47, 'Kuwait drama on war unity contrasts current feuds', 'http://news.yahoo.com/kuwait-drama-war-unity-contrasts-current-feuds-071008420.html', '\nEach night for the past three weeks, families in Kuwait have been transfixed by a drama in which they already know the ending: Iraq forces will be driven out and the shattered Gulf nation will rebuild. But a 30-part television serial on Iraq''s 1990 ', '16 Aug 2012, 2:11 am', 119, 0, 0),
    (41049, 76, 'Because That’s Where The Content Is', 'http://feedproxy.google.com/~r/Techcrunch/~3/_RH5C6yRbqg/', '<img src=''http://tctechcrunch2011.files.wordpress.com/2012/08/chimera.jpeg?w=100&h=70&crop=1'' style=''float:left;'' />\nWhen asked why he robbed banks, legend has it that Willie Sutton said, &ldquo;because that&rsquo;s where the money is.&rdquo;\nI&rsquo;m reminded of this quote today when reading the reports that Apple is in talks with the cable operators about their', '16 Aug 2012, 2:32 am', 136, 0, 0),
    (41047, 75, 'Kobo app for iOS goes international with support for Dutch, French, German, Italian and Spanish', 'http://www.engadget.com/2012/08/16/kobo-app-for-ios-gains-international-support/', '<img src=''http://www.blogcdn.com/www.engadget.com/media/2012/08/kobo-ios.jpg'' style=''float:left;'' />\n \n Kobo''s Android app recently enjoyed a brief stint of global superiority, but that playing field has been leveled with the company''s latest update for iOS. Like the Android version, Kobo for iOS now includes support for Dutch, French, German, Ital', '16 Aug 2012, 2:21 am', 156, 0, 0),
    (41050, 95, 'Dish Network Is Planning Nationwide Satellite Broadband [Rumors]', 'http://feeds.gawker.com/~r/gizmodo/full/~3/OrDCXmlu0oA/dish-network-is-planning-nationwide-satellite-broadband', '<img src=''http://img.gawkerassets.com/img/17w4daw9gc9wjjpg/original.jpg'' style=''float:left;'' />\n\n                                                          \n                      \n                                  \n              People living in the sticks, rejoice! Bloomberg is reporting that Dish Network is planning to roll out a nationwide satellite broadband internet service &mdash;and promises speeds of between 5 and 15 megabits pe', '16 Aug 2012, 2:47 am', 138, 0, 0); 
```

我想用 PHP 运行这个。我知道这样做的一种方法是这样的：

```
$str = "
INSERT INTO `mytable` (`idSample`, `postSampeId`, `title`, `link`, `description`, `date`, `views`, `clicks`, `isDeleted`) VALUES
        (41021, 121, 'Job Board Detox Tip #9: Attend a Networking Event for Non-Job Seekers', 'http://www.careerealism.com/job-board-detox-networking-event/', '<img src=''http://www.careerealism.com/home/jtodonnell/careerealism.com/wp-content/uploads/2012/08/Job-Board-Detox-Networking-Event-Featured.png'' style=''float:left;'' />\nToday&rsquo;s&nbsp;job board detox&nbsp;tip: Attend a networking event for non-job seekers.\nYes, your challenge today is to attend a networking event that is NOT targeted to job seekers. Why? Because it will help you to meet the target audience you ', '16 Aug 2012, 12:30 am', 523, 0, 0),
        (41026, 78, 'Olympic Sponsors Go For Gold Online [INFOGRAPHIC]', 'http://feeds.mashable.com/~r/Mashable/SocialMedia/~3/MPop6ENLC94/', '\n\n\n\nThe Olympics are over, and whether you were watching or not, you probably couldn''t avoid their sponsors'' ads. \nUnmetric, a service that tracks brands'' online presence, collected data leading up to the Games to see how sponsors stacked up against ', '16 Aug 2012, 12:58 am', 410, 0, 0),
        (41025, 75, 'Updated Google Play app reveals gift card support, wish list coming soon?', 'http://www.engadget.com/2012/08/16/google-play-wishlist-gift-card-leak/', '<img src=''http://www.blogcdn.com/www.engadget.com/media/2012/08/gplaywishlishgiftcardandroidpolice.jpg'' style=''float:left;'' />\n \n If the images and link settings Android Police has dug up from the most recent (v3.8.15) Google Play APK that''s rolling out are correct, we could see a coupe more features coming to the Android app and media store soon. First up are very fleshed ', '16 Aug 2012, 12:14 am', 436, 0, 0),
        (41028, 95, 'The Gadgets that Got Us Going, Back in 2002 [Gizmodo10]', 'http://feeds.gawker.com/~r/gizmodo/full/~3/9K9bDZpH58g/the-gadgets-the-got-us-going-back-in-2002', '<img src=''http://img.gawkerassets.com/img/17unbdb2iwfzmjpg/original.jpg'' style=''float:left;'' />\n\n                                                         \n                      \n                                  \n              Gizmodo is officially 10 years old! And, while we''ve been celebrating this all week, I thought it would be fun (and/or funny) to take a look back at the ancestor gadgets we would all be using if someone were to ', '16 Aug 2012, 12:00 am', 402, 0, 0),
        (41029, 95, 'US Suffers Another Blow in Its Case Against Kim Dotcom [Kim Dotcom]', 'http://feeds.gawker.com/~r/gizmodo/full/~3/RVKHECRt2eI/us-suffers-another-blow-in-its-case-against-kim-dotcom', '<img src=''http://img.gawkerassets.com/img/17w42we7bn5bgjpg/original.jpg'' style=''float:left;'' />\n\n                                                            \n                      \n                                  \n              Is it okay for me to say that I''m a little glad we''re doing so poorly in our case against Megaupload kingpin Kim Dotcom? I am. I am so glad. I miss Megaupload dearly and I''m truly pleased by this latest news: Ju', '16 Aug 2012, 1:00 am', 402, 0, 0),
        (41032, 66, 'Hanwha Chairman Gets 4-Year Sentence', 'http://online.wsj.com/article/SB10000872396390444508504577592203136561574.html?mod=pls_whats_news_us_business_f', 'A South Korean court sentenced the leader of one of the country''s largest business groups, Hanwha Group, to four years in prison for using corporate funds to pay his own debts. The group plans to appeal the sentence.', '16 Aug 2012, 1:21 am', 523, 0, 0),
        (41031, 98, 'Sunglass Holders, iCloud Dropbox, and Cable Storage [From The Tips Box]', 'http://feeds.gawker.com/~r/lifehacker/full/~3/QakmYYUdVck/', '<img src=''http://img.gawkerassets.com/img/17w305ddlru7zjpg/original.jpg'' style=''float:left;'' />\n\n                                                           \n                      \n                                  \n              Readers offer their best tips for storing your sunglasses in your car, making iCloud work like Dropbox, and storing your cables on-the-go.              More&nbsp;&raquo;\n             \n\n   \n\n\n', '15 Aug 2012, 7:00 pm', 426, 0, 0),
        (41041, 77, 'Dynamic Solar Gets NY-Sun Funding', 'http://feeds.importantmedia.org/~r/IM-cleantechnica/~3/ew8TEuGaQX4/', '<img src=''http://c1cleantechnicacom.wpengine.netdna-cdn.com/files/2012/08/Octagon-@-Roosevelt-Island.jpg'' style=''float:left;'' />\n&nbsp;Dynamic Solar&nbsp;was one of the lucky 16 recipients of the $30 million New York (NY)-Sun award on Wednesday.\nThe purpose of the NY-Sun program is to help businesses and other organizations get electricity from solar energy sources.\n\nThe awar', '16 Aug 2012, 2:01 am', 233, 0, 0),
        (41042, 68, 'Taylor Swift -- Crazy for Break-Up Songs', 'http://www.tmz.com/2012/08/16/taylor-swift-conor-kennedy-we-are-never-ever-getting-back-together-tmz-tv/', 'Taylor Swift has a habit of trashing exes in song ... including her new #1 hit -- so who''s crazier? Taylor or the dudes who keep dating her? Harvey is definitely leaning one way on this.Check out TMZ on TV -- click here to see your local listings!\n', '16 Aug 2012, 2:02 am', 231, 0, 0),
        (41035, 121, 'Ask Our Experts: What’s the Hardest Interview Question and How Do You Answer it?', 'http://www.careerealism.com/hardest-interview-questions-ask-our-experts/', '<img src=''http://www.careerealism.com/home/jtodonnell/careerealism.com/wp-content/uploads/2012/08/Hardest-Interview-Question-Featured.png'' style=''float:left;'' />\nEach week, we ask our experts to answer a&nbsp;career&nbsp;question on behalf of our readers.\nThis week&rsquo;s question is about the&nbsp;hardest interview questions:\n&ldquo;What&rsquo;s the hardest interview question to answer and what tips can yo', '16 Aug 2012, 1:00 am', 357, 0, 0),
        (41036, 121, 'Working as a Mechanic: No Degree, No Problem', 'http://www.careerealism.com/working-mechanic/', '<img src=''http://www.careerealism.com/home/jtodonnell/careerealism.com/wp-content/uploads/2012/08/Mechanic-Career-Featured.png'' style=''float:left;'' />\nThis is a true story as told to DiversityJobs Street Smarts, where you can find career interviews for the job you&rsquo;ve been looking for.&nbsp;Visit to find an interview in your desired field today.&nbsp;\nI am a mechanic at Walls Garage in Greenw', '16 Aug 2012, 1:30 am', 357, 0, 0),
        (41039, 75, 'Acer CloudMobile now available for pre-order in the UK, expected to be released on September 5th', 'http://www.engadget.com/2012/08/16/acer-cloudmobile-smartphone-pre-orders/', '<img src=''http://www.blogcdn.com/www.engadget.com/media/2012/08/acer-cloudmobile-1345036135.jpg'' style=''float:left;'' />\n \n Acer took the gadget world by surprise with its award-winning CloudMobile handset, and now it looks like the company''s finally ready to let consumers get their eager palms on that 4.3-inch, 720p slab. Per online retailer Expansys, Acer''s CloudMob', '16 Aug 2012, 1:00 am', 293, 0, 0),
        (41040, 75, 'Fujitsu''s Stylistic M532 quad-core tablet ships to the US with toughened body, dash of security', 'http://www.engadget.com/2012/08/16/fujitsu-stylistic-m532-quad-core-tablet-ships-to-the-us/', '<img src=''http://www.blogcdn.com/www.engadget.com/media/2012/08/fujitsu-stylistic-m532-launch.jpg'' style=''float:left;'' />\n \n Fujitsu''s Stylistic M532 has had a protracted development process that saw it appear on our radar as early as January; imagine our surprise after it ships to the US with barely more than a knock on the door. Now that it''s here, it looks to be on ', '16 Aug 2012, 1:39 am', 311, 0, 0),
        (41045, 42, 'Ex-Wife Sues Yogurt Mogul', 'http://www.inc.com/maeghan-ouimet/exwife-sues-chobani-ceo.html', '<img src=''http://www.inc.com/uploaded_files/image/100x100/chobanibucket_19761.jpg'' style=''float:left;'' />\nThe hottest brand in yogurt is in the center of a battle over who owns a majority stake in the company.\nHamdi Ulukaya, owner of Greek yogurt company Chobani, received sour news Tuesday: According to the New York Post, his ex-wife Ayse Giray has file', '16 Aug 2012, 1:00 am', 190, 0, 0),
        (41044, 68, 'Marion Jones -- Sells Tiny TX House ... Buys Not-So-Tiny House', 'http://www.tmz.com/2012/08/16/marion-jones-texas-home-gallery/', 'Things are looking up for Marion Jones -- who was infamously stripped of her Olympic gold medals -- because she just traded in her humble Texas home ... for a much nicer version. In case you didn''t already know ... in 2007 Marion -- who was&hellip;\n', '16 Aug 2012, 2:15 am', 220, 0, 0),
        (41051, 47, 'Celeb birthdays for the week of Aug. 19-25', 'http://news.yahoo.com/celeb-birthdays-week-aug-19-25-050243812.html', 'Aug. 19: Actress Diana Muldaur ("Star Trek: The Next Generation") is 74\. Drummer Ginger Baker (Cream, Blind Faith) is 73\. Singer Johnny Nash is 72\. Actress Jill St. John is 72\. Singer Billy J. Kramer is 69\. Country singer-songwriter Eddy Raven is 68.', '16 Aug 2012, 12:02 am', 119, 0, 0),
        (41052, 47, 'Kuwait drama on war unity contrasts current feuds', 'http://news.yahoo.com/kuwait-drama-war-unity-contrasts-current-feuds-071008420.html', '\nEach night for the past three weeks, families in Kuwait have been transfixed by a drama in which they already know the ending: Iraq forces will be driven out and the shattered Gulf nation will rebuild. But a 30-part television serial on Iraq''s 1990 ', '16 Aug 2012, 2:11 am', 119, 0, 0),
        (41049, 76, 'Because That’s Where The Content Is', 'http://feedproxy.google.com/~r/Techcrunch/~3/_RH5C6yRbqg/', '<img src=''http://tctechcrunch2011.files.wordpress.com/2012/08/chimera.jpeg?w=100&h=70&crop=1'' style=''float:left;'' />\nWhen asked why he robbed banks, legend has it that Willie Sutton said, &ldquo;because that&rsquo;s where the money is.&rdquo;\nI&rsquo;m reminded of this quote today when reading the reports that Apple is in talks with the cable operators about their', '16 Aug 2012, 2:32 am', 136, 0, 0),
        (41047, 75, 'Kobo app for iOS goes international with support for Dutch, French, German, Italian and Spanish', 'http://www.engadget.com/2012/08/16/kobo-app-for-ios-gains-international-support/', '<img src=''http://www.blogcdn.com/www.engadget.com/media/2012/08/kobo-ios.jpg'' style=''float:left;'' />\n \n Kobo''s Android app recently enjoyed a brief stint of global superiority, but that playing field has been leveled with the company''s latest update for iOS. Like the Android version, Kobo for iOS now includes support for Dutch, French, German, Ital', '16 Aug 2012, 2:21 am', 156, 0, 0),
        (41050, 95, 'Dish Network Is Planning Nationwide Satellite Broadband [Rumors]', 'http://feeds.gawker.com/~r/gizmodo/full/~3/OrDCXmlu0oA/dish-network-is-planning-nationwide-satellite-broadband', '<img src=''http://img.gawkerassets.com/img/17w4daw9gc9wjjpg/original.jpg'' style=''float:left;'' />\n\n                                                          \n                      \n                                  \n              People living in the sticks, rejoice! Bloomberg is reporting that Dish Network is planning to roll out a nationwide satellite broadband internet service &mdash;and promises speeds of between 5 and 15 megabits pe', '16 Aug 2012, 2:47 am', 138, 0, 0);
";

mysql_query( $str ) or die( mysql_error() ); 
```

但是这里的问题是这里的一些单词/句子有双引号，有些有单引号，但我不想替换那个（比如将单引号替换为双引号，反之亦然）。我该怎么做呢？您的帮助将不胜感激和奖励。

谢谢！:)

**PS：这个数据是我在 phpmyadmin 中导出时生成的。我不想使用 phpmyadmin 插入/导入这些数据。我想要使​​用的是一个 php 代码，而无需修改 phpmyadmin 导出结果的任何内容。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:31:13.573

这个关于字符串文字的 php 页面讨论了一种称为 heredoc 的语法。 [http://php.net/manual/en/language.types.string.php](http://php.net/manual/en/language.types.string.php)

heredoc 定义的字符串类似于 php 双引号字符串文字，但它不是由双引号分隔而是由用户定义的标记分隔。因此，将内部双引号误解为 php 字符串值的结尾没有问题。

上面链接页面中给出的示例 heredoc 字符串文字是这样的：

```
$str = <<<EOS
these are my insert statements line 1
these are my insert statements line 2
...
EOS; 
```

在这种情况下，您可以更换

```
these are my insert statements 
```

与您的实际陈述文本。

这种语法将消除由于对双引号-" 字符的误解而导致的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T01:16:03.410

您不想自动化 mysql 转储文件，尤其是来自 phpmyadmin 的文件。phpmyadmin 可以生成带有错误的 sql 转储代码。您确实需要对 mysql 转储代码进行质量检查。一旦你有一个经过验证的转储过程，最好的办法是编写一个可以从 php 执行的 bash 转储脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T15:19:50.310

你不必**更换**它们，你必须**逃避**它们。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-15T15:27:09.653

您使用“创建了字符串 $str，因此您必须将“转义为 \”。

另一种解决方案是将生成的 SQL 放在一个文件中并使用[SOURCE](http://dev.mysql.com/doc/refman/5.6/en/mysql-commands.html)命令。要执行的 SQL 查询如下所示：

```
SOURCE filename.sql 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-09-15T15:28:14.077

尝试使用

1 - [Addslashes](http://php.net/addslashes) Whitch 在 str 中的每个引号上添加斜杠

2 - [mysql_real_escape_string](http://php.net/mysql_real_escape_string)转义并忽略引号

但作为建议尝试将此查询减少到多个

因为：**千次插入可以杀死数据库**

# java - 如何在 android 中向后兼容的同时使用新类？

> ID：12438571
> 
> 赞同：4
> 
> 时间：2012-09-15T15:17:20.137
> 
> 标签：java, android, backwards-compatibility

我需要为 9 或更高版本的设备使用 CookieManager 类。我的代码看起来像这样；

```
public class HttpUtils {
private static CookieManager cookie_manager = null;

@TargetApi(9)
    public static CookieManager getCookieManager() {
        if (cookie_manager == null) {
            cookie_manager = new CookieManager();
            CookieHandler.setDefault(cookie_manager);
        }
        return cookie_manager;
    }
} 
```

当我在 2.2 模拟器上运行它时；我有这个错误日志；

```
Could not find class 'java.net.CookieManager', referenced from method com.application.utils.HttpUtils.getCookieManager 
```

当我需要 CookieManager 时，我会通过检查操作系统版本来调用此方法；

```
if (Build.VERSION.SDK_INT >= 9)
  ... 
```

所以; 如果版本为 2.2 或更低，则在我的应用中；这个方法永远不会被调用。我的问题是为什么我会看到这个错误日志？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T19:30:47.183

如果我在 SDK 检查之外的调用 Activity 的代码中创建 HttpUtils 实例，我可以在 2.2 模拟器上复制它。例如：

```
HttpUtils utils = new HttpUtils();

if (Build.VERSION.SDK_INT >= 9)
{
    Object test = utils.getCookieManager();
} 
```

如果我直接调用静态方法，则不会发生：

```
if (Build.VERSION.SDK_INT >= 9)
{
    Object test = HttpUtils.getCookieManager();
} 
```

如果您的 HttpUtils 类中有其他非静态内容，则必须将 CookieManager 部分移动到不同的帮助程序类，并且仅静态调用它...或在 SDK 检查后实例化 HtppUtils：

```
 if (Build.VERSION.SDK_INT >= 9)
    {
        HttpUtils utils = new HttpUtils();
        Object test = utils.getCookieManager();
    } 
```

# c - 将字符串读入用户，直到“。” 用来

> ID：12438580
> 
> 赞同：0
> 
> 时间：2012-09-15T15:19:00.320
> 
> 标签：c, string, input, user-input, stdin

我对如何实现这部分代码有点困惑。

我需要从用户那里读入一个最多 256 个字符的字符串。如果用户输入，该字符串还应包含任何间距和换行符。当用户`"."`自己输入时，它会告诉程序输入完成。输入完成后，程序以相同的间距和换行符吐出完全相同的字符串。

例如：

> ```
> Please enter a string: This is just a test.
> The input has not ended yet.
> It will end when the user enters just a period.
> . 
> ```

程序回报：

> ```
> This is just a test.
> The input has not ended yet.
> It will end when the user enters just a period. 
> ```

到目前为止，我能想到的唯一方法是使用`fgets()`，但我不太确定如何在使用`"."`. 我在想可能是一个持续检查的while循环？

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T18:25:36.227

这个想法是使用一个缓冲区，每次有新数据进入时都会重新分配它，并跟踪它的大小：

```
char* data = NULL;
size_t size = 0; 
```

你的假设是正确的，你需要一个循环。像这样的东西：

```
int end = 0;
while (!end) {
    char buf[512];
    if (fgets(buf, sizeof buf, stdin) == NULL) {
        // an error occured, you probably should abort the program
    }
} 
```

您必须检查缓冲区是否实际上是您要结束数据输入的令牌：

```
if (strcmp(buf, ".\n") == 0) {
    // end loop
} 
```

如果找不到令牌，您将需要重新分配数据缓冲区，将其延长您刚刚读取的字符串的长度：

```
size_t len = strlen(buf);
char* tmp = realloc(data, size + len + 1);   // ... plus the null terminator
if (tmp == NULL) {
    // handle your allocation failure
} 
```

...并在最后复制新内容：

```
data = tmp;
memcpy(data + size, buf, len);
size += len;
data[size] = '\0';                           // don't forget the null terminator 
```

完成后，输出并清理：

```
printf("%s", data);
free(data); 
```

填空，组装，你就会有一个工作的、安全的程序，它可以满足你的要求。

# android - 主题未应用于自定义视图（Android）

> ID：12438583
> 
> 赞同：2
> 
> 时间：2012-09-15T15:19:32.117
> 
> 标签：android

我正在制作一个视图，我将用它作为各种其他视图的背景。它可以包含 TextView、Button、LinearLayout 等。

根据所选主题（应用程序允许您在运行时更改主题），此视图的背景图像应该不同。然而，似乎什么也没有发生。背景未设置。它适用于“本机”视图（如 TextView 或 Button）

查看（注意：我已经玩过并更改了几次超级类以使其正常工作）：

```
public class HorizontalContainerBar extends TextView
{
    public HorizontalContainerBar(Context context)
    {
        super(context);
    }

    public HorizontalContainerBar(Context context, AttributeSet attrs)
    {
        super(context, attrs);
    }

    public HorizontalContainerBar(Context context, AttributeSet attrs, int defStyle)
    {
        super(context, attrs, defStyle);
    }
} 
```

这是themes.xml 的一部分：

```
<style name="Theme" parent="android:style/Theme">`
        <item name="android:windowTitleSize">20dip</item>
        <item name="horizontalContainerBarStyle">@style/horizontal_container_bar_first</item>
</style>
<style name="Theme.First">
        <item name="horizontalContainerBarStyle">@style/horizontal_container_bar_first</item>
</style> 
```

这是styles.xml 的一部分：

```
<style name="horizontal_container_bar" parent="@android:style/Widget.Button">
    <item name="android:padding">10dp</item>
    <item name="android:textColor">#ffffff</item>
    <item name="android:gravity">center_vertical|left</item>
</style>

<style name="horizontal_container_bar_first" parent="@style/horizontal_container_bar">
    <item name="android:background">@drawable/panel_first</item>
</style> 
```

这是 attrs.xml 的一部分：

```
<attr name="horizontalContainerBarStyle" format="reference"/> 
```

（不在可声明样式的标签内 - 但它曾经是）

这是在我的布局文件中：

```
<com.myapp.views.HorizontalContainerBar android:layout_width="fill_parent" android:layout_height="wrap_content" android:orientation="horizontal" android:text="hello">
</com.myapp.views.HorizontalContainerBar> 
```

有谁知道我在这里做错了什么？

# scala - 与动物园管理员合作

> ID：12438584
> 
> 赞同：0
> 
> 时间：2012-09-15T15:19:35.160
> 
> 标签：scala, apache-zookeeper

这是我第一次使用 Zookeeper，我使用 Scala 作为我的编程语言。Zookeeper 支持 Scala 吗？如果没有，是否有任何解决方法？非常感谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-15T16:15:18.113

是的 - 它只是另一个 Java 库，而 Scala 通常与 Java 库兼容。我使用 Zookeeper 和 Scala 完成了一个项目，效果很好。我使用[Curator](https://github.com/Netflix/curator/wiki)作为我使用 Java 构建的客户端库，但也有 Twitter 的[scala-zookeeper-client](https://github.com/twitter/scala-zookeeper-client)。或者您可以直接使用 Zookeeper 客户端 API。

Kafka 是著名的 Scala 开源项目，使用 Zookeeper。

# hibernate - 我想检查数据库中的数据，如果找到，则一个按钮将处于活动状态，如果未找到，则另一个按钮将在 jsp 中处于活动状态

> ID：12438585
> 
> 赞同：1
> 
> 时间：2012-09-15T15:19:42.760
> 
> 标签：hibernate, jsp

对于我的课程项目，我正在为一个包含 jsp by net beans 的网站编写代码。在用户进入的页面中，如果找到，它将检查数据库中的数据，如果未找到，它将显示一个按钮，然后将显示另一个按钮。我正在使用`MySQL`数据库，`Hibernet ORM`框架。我怎么能这样做？这将是什么代码？

# c++ - OpenGL漫反射着色器，对象未显示

> ID：12438588
> 
> 赞同：0
> 
> 时间：2012-09-15T15:20:00.447
> 
> 标签：c++, opengl, shader, lighting, vertex

我有一个来自 Blender 的对象渲染到我的场景中，并且法线已正确加载。我正在使用 Gourrad 漫反射着色将 ModelViewProjectionMatrix (CameraToClip * ModelToCamera) 传递给着色器，并使用 3x3 版本的 ModelToCameraMatrix 与法线相乘。

但是，当我将输出颜色设置为 DiffuseColor * Angle 时，我的整个对象（在我的情况下是一个立方体）就会消失（甚至没有黑线，我的灰色背景上什么也没有出现）。当我将颜色输出替换为

```
theColor = Vec4(1.0f, 1.0f, 1.0f, 1.0f); 
```

它以白色显示我的 obj，没有任何阴影。我很好奇为什么我什么都没看到？我的着色器或我通过制服的方式有问题吗？

顶点着色器：

```
#version 330

layout(location = 0) in vec4 position;
layout(location = 1) in vec3 normal;

smooth out vec4 theColor;

uniform mat4 modelViewProjectionMatrix;

uniform vec3 lightDir;
uniform mat3 normalModelToCameraMatrix;

void main()
{
    gl_Position = modelViewProjectionMatrix * position;

    vec3 normCamSpace = normalize(normalModelToCameraMatrix * normal);

    vec4 diffuseColor = vec4(0.6f, 0.7f, 0.8f, 1.0f);

    float angle = dot(normCamSpace, lightDir);
    angle = clamp(angle, 0, 1);

    theColor = diffuseColor  * angle;
} 
```

渲染方法：

```
stack.Translate(glm::vec3(0.0f, 0.0f, 3.0f));

glm::vec4 lightDirCameraSpace = stack.Top() * glm::vec4(1.5f, 1.0f, 0.0f, 0.0f);
glUniform3fv(lightDirUnif, 1, glm::value_ptr(lightDirCameraSpace));
glm::mat3 normalMatrix(stack.Top());
glUniformMatrix3fv(normalModelToCameraMatrixUnif, 1, GL_FALSE, glm::value_ptr(normalMatrix));

// Draw Blender object
glBindVertexArray(this->load.vertexArrayOBject);

glm::mat4 modelViewProjectionMatrix = cameraToClipMatrix * stack.Top();
glUniformMatrix4fv(modelViewProjectionMatrixUnif, 1, GL_FALSE, glm::value_ptr(modelViewProjectionMatrix));

glDrawElements(GL_TRIANGLES, this->load.indicesVec.size(), GL_UNSIGNED_INT, 0); 
```

我看不出着色器和渲染部分有什么问题。

* * *

**更新** 使用 glGetError 时，我似乎不断收到错误代码 1285，这似乎与“内存不足”问题有关。但是，我没有使用任何类型的纹理，所以我有点困惑为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T16:09:54.480

我的猜测是你是：

1.  启用混合和/或 alpha 测试
2.  将你乘以`angle`Alpha 通道
3.  获得一个实际上不是您想要的角度值，对于所有重要的角度情况都以 0 结尾

所以 alpha=0，多边形都是透明的/alpha-tested。

你首先应该做的是确保 alpha 始终为 1.f，并且只调制 rgb。您也可以关闭混合/alpha 测试。

然后，根据需要修复实际计算角度变量的数学。

# php - 通过str_replacing输出缓冲区中的内容将php页面中的所有非ssl引用转换为ssl是一种好习惯吗？

> ID：12438589
> 
> 赞同：4
> 
> 时间：2012-09-15T15:20:03.557
> 
> 标签：php, ssl, output-buffering

我需要替换 php 的 html 输出中的所有非 ssl 引用。通过对输出缓冲区中的内容执行 str_replace 并将其刷新出来是一种好习惯吗？实际上，在 php 代码中有很多包含和要求，因此通过查找每个引用的位置来做到这一点真的很乏味。有什么硬而快的方法可以解决这个问题吗？这是我在做什么的粗略想法

```
<?php 
ob_start();

// does the logic to generate output html.

$mixedHtml = ob_end_clean();
ob_start();
$finalHtml = str_replace('http:','https:',$mixedHtml);
echo $finalHtml;
ob_end_flush(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T15:44:28.170

通过str_replacing输出缓冲区中的内容将php页面中的所有非ssl引用转换为ssl是一种好习惯吗？-->**没有**。

这是因为您的页面实际上可能需要提供包含“http://”的内容，并且它们不一定是链接。我只是说有时您可能需要输出这些内容，并且由于 str_replace()，您的页面将无法输出它。

我有三个建议：

1.  **输出正确的链接**。如果可能，请输出正确的链接（http 或 https），这样您就不需要替换它们。您可以通过使用返回是否应该使用 http 或 https 的常量或函数来做到这一点。
2.  **使用[preg_replace](http://php.net/preg_replace)**以便您只替换某些标签中的文本，例如`<a> <link> <img> <script>`.
3.  **依靠服务器重定向**。您可以将服务器设置为将所有 http 流量重定向到 https，这样您就不必担心更改链接。当他们访问 http 链接时，他们将被转发到 https 链接。您可以将以下内容放入**.htaccess**文件中：

.htaccess 文件：

```
RewriteEngine On
RewriteCond %{HTTPS} off
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} 
```

# ruby - Ruby 中的“->”运算符是什么意思？

> ID：12438593
> 
> 赞同：0
> 
> 时间：2012-09-15T15:20:40.450
> 
> 标签：ruby

> **可能重复：**
> [Ruby 中的 -> (stab) 运算符是什么？](https://stackoverflow.com/questions/9340117/what-is-the-stab-operator-in-ruby)

我正在尝试学习 Objects on Rails 书籍并找到问题以了解`->`操作员的意思。

代码是：

```
describe Blog do
   subject       { Blog.new(->{entries}) }
   let(:entries) { [] }

   it "has no entries" do
     subject.entries.must_be_empty
   end

   describe "#new_entry" do
     let(:new_post) { OpenStruct.new }

   before do
     subject.post_source = ->{ new_post }
   end

   it "returns a new post" do
     subject.new_post.must_equal new_post
   end
end 
```

我花了很多时间在任何文档中找到它，但找不到

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T15:21:51.237

这是[lambda 的新语法](http://pragdave.blogs.pragprog.com/pragdave/2008/05/new-lambda-synt.html)。你也可以这样写：

```
subject.post_source = lambda { new_post } 
```

以下是新旧版本的参数外观（感谢 Michael Kohl 的建议）：

```
v_old = lambda {|a, b| a + b}
v_new = ->(a, b) { a + b}

v_old.call(1, 2) # => 3
v_new.call(3, 4) # => 7 
```

# png - 黑白 Gnuplot 堆叠直方图

> ID：12438596
> 
> 赞同：5
> 
> 时间：2012-09-15T15:21:21.217
> 
> 标签：png, gnuplot, monochrome

我正在尝试将 gnuplot 中的堆叠直方图打印成黑白 png。我的意思是我希望栏中的每个区域都在旁边的图例旁边被孵化或检查；这样，当它被打印出来时，人们仍然可以识别这些区域。我已经尝试了以下方法，但它只给我留下了黑色的大斑点！

```
set term pngcairo mono   size 750, 300
set output \"pies/interesting.png\"
set style data histograms
set style histogram rowstacked
set boxwidth 1 relative
set style fill solid 1 border -1
set yrange [0:100]
set ytics 10
set datafile separator \",\"
plot './functions-$MODE.csv.t' using 1 t \"\", for [i=9:13] '' using (100.*column(i)/column(15)) ti column(i) 
```

如何让我的区域孵化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T15:38:34.807

很抱歉回答我自己的问题....我已经意识到堆叠直方图的行为就像一个正常的直方图：因此，如果我使用此页面上的样式：http: [//gnuplot.sourceforge.net/demo/fillstyle.html](http://gnuplot.sourceforge.net/demo/fillstyle.html)我可以自定义我想要的方式：设置“设置样式填充图案边框”：

```
set term pngcairo mono size 750, 300
set output \"pies/interesting.png\"
set style data histograms
set style histogram rowstacked
set boxwidth 1 relative
set style fill pattern border
set datafile separator \",\"
plot './functions-$MODE.csv.t' using 1 t \"\", for [i=9:13] '' using (100.*column(i)/column(15)) ti column(i) 
```

达到预期的效果。

# java - Netbeans 中的 JAXB：如何获取列表而不是向量？

> ID：12438599
> 
> 赞同：1
> 
> 时间：2012-09-15T15:21:44.470
> 
> 标签：java, netbeans, xsd, jaxb, netbeans-7

我正在使用 Netbeans 7.1.2 中包含的 Jaxb 版本将 Xml 模式 (Xsd) 解组为 Java 对象。

Jaxb 返回给我 Vectors，但我想要 Lists。我如何将 Jaxb/Netbeans 设置为具有列表而不是向量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T17:29:53.543

默认情况下，JAXB (JSR-222) 实现将生成类型属性`java.util.List`并`java.util.ArrayList`用作具体实例。您必须使用指定的配置文件`java.util.Vector`或不兼容的 JAXB 实现。

**了解更多信息**

*   [http://blog.bdoughan.com/2011/01/jaxb-and-choosing-list-implementation.html](http://blog.bdoughan.com/2011/01/jaxb-and-choosing-list-implementation.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T15:23:12.133

我认为您只需要更改生成的 POJOS 中的集合类型即可。

# mysql - SQL：将列的值匹配为行？

> ID：12438600
> 
> 赞同：1
> 
> 时间：2012-09-15T15:21:46.407
> 
> 标签：mysql, sql

我是 SQL 方面的菜鸟，我想在这里做点什么。我四处寻找，但没有找到办法，也许是因为我不知道如何解释它，因此也许我没有正确搜索。

这就是问题所在：我有一个包含 3 列的表，用作不同表的一组辅助属性（但这与问题无关）。

**是）我有的：**

```
--------------------------------------------
 listing_id  |  field_id  |  listing_value
--------------------------------------------
    1             Fruit        Apple
    1             Color        Red
    2             Fruit        Banana
    2             Color        Yellow
    3             Fruit        Grape
    3             Color        Purple 
```

**我想得到什么：**

```
----------------------------------------------------
 listing_id  |  listing_value_1  |  listing_value_2 
----------------------------------------------------
    1             Apple               Red
    2             Banana              Yellow
    3             Grape               Purple 
```

请记住，这一切都发生在同一张桌子上。这都是为了选择值，所以查询必须以`SELECT`

我已经尝试了这些`JOIN, GROUP and UNION`命令，但没有得到任何成功的结果。

另外，我正在尝试通过缺少一些命令的 phpMyAdmin 使其工作（例如，我无法使用`INTERSECT`，我可以使用`Select * FROM x`但似乎无法使用`SELECT x.*`）

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T15:54:26.760

您可以使用聚合函数和`CASE`：

```
select listing_id, 
  max(case when field_id = 'Fruit' then listing_value end) listing_value_1,
  max(case when field_id = 'Color' then listing_value end) listing_value_2
from yourtable
group by listing_id 
```

# 见[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/83ce7/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T15:37:59.800

试试这个

```
SELECT t1.listing_id , t1.listing_value as listing_value1 , t2.listing_value as listing_value2
  FROM table t1, table t2 where t1.listing_id = t2.listing_id AND t1.field_id = "Fruit" AND t2.field_id = "Color" 
```

# c++ - 在 map C++ 中使用数组作为键

> ID：12438602
> 
> 赞同：0
> 
> 时间：2012-09-15T15:22:07.357
> 
> 标签：c++, arrays, dictionary

基本上，我需要找到一个单词的所有匹配字谜。我正在做的是使用一个大小为 26 的数组来表示一个单词中的字母。前任：

```
abcdefg={1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}
aaaaaaa={7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0} 
```

这就是我创建数组的方式。

```
//stringtemp is a C++ string representing the word.
//letters is a size 26 int array representing all the letters in the string.
for(int i=0;i<stringtemp.length();i++)
{
    letters[stringtemp[i]-65]+=1;
} 
```

这就是我将数组存储在地图中的方式。

```
dictionary[letters].push_back(stringtemp); 
```

那么，我做错了什么还是在 C++ 中这是不可能的。在我找到的所有其他答案中，他们建议使用向量作为键，但这在我的情况下不起作用（我认为。）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-15T15:29:11.960

所有`std::array<T, 26>`,`std::string`和`std::vector<T>`都是 a 完全有效的键类型`std::map`，因为它们都定义了小于比较运算符。请注意，`std::array<T, 26>`它类似于`std::tuple<T, T, ..., T>`，并且比较是按字典顺序定义的，与字符串比较非常相似。

```
#include <array>
#include <map>

typedef std::array<unsigned int, 26> alphabet;

std::map<alphabet, std::string> dictionary;

dictionary[{{1, 0, ..., 8}}] = "hello"; 
```

通过更多的工作，您还可以为 生成所有这些类型的键`std::unordered_map`，尽管您必须添加一些来自 Boost 的样板代码（使用`hash_combine`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T15:29:49.273

[std::map](http://en.cppreference.com/w/cpp/container/map)允许您在构造函数中提供比较运算符。您可能需要提供这样的 Comparator 以便两个数组 {1,....} 和 {1,....} 匹配，因为它们可能是不同的实际对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T15:29:03.600

映射中的键类型必须`operator<`为其定义。您可以`operator<`为您的数组类型定义，但有一个更简单的方法：将每个单词中的字母按字母顺序排序，并使用该排序后的字符串作为键。

# c# - 确定使用哪个版本的 Excel 创建 .xls 或 .xlsx

> ID：12438605
> 
> 赞同：2
> 
> 时间：2012-09-15T15:22:46.547
> 
> 标签：c#, excel

我即将编写一个应用程序来使用用于创建这些文件的 Excel 版本启动 .xls、.xlsx 和 .xlsm。原因是它们包含许多在不同版本的 Excel 中工作方式不同的 VBA 脚本（感谢 Microsoft！）。我正在寻找一种方法来确定用于创建此类文件的版本。

我尝试过后期绑定 Excel 并读取`CalculationVersion`属性，但这仅向我显示了用于编辑文件的最后一个版本。.xlsx 中 app.xml 中的版本号相同。在编辑和保存文件后，文件二进制文件中的标记似乎也在发生变化，尽管我不确定所有这些标记都会发生变化。

有谁知道提供*创建*文件的版本的标记或属性？

如果它仅适用于 .xls 或仅适用于 .xlsx，请同时回答。这将使我更接近我的目标。

编辑：获取计算版本：

```
 private string CalculationVersion()

    {   //Variablen

        string version = String.Empty;

        object Object_Excel_Application = null;

        object Object_WorkBooks = null;

        object Object_WorkBook = null;

        object[] Parameters;

        Type Type_of_Programm;

        //Typ der Excel.Application bestimmen

        Type_of_Programm = Type.GetTypeFromProgID("Excel.Application");

        //Eine Excel instanz erstellen und in Object_Excel_Application speichern

        Object_Excel_Application = Activator.CreateInstance(Type_of_Programm);

        try //Versuche

        {

            //Excel unsichtbar machen

            Parameters = new Object[1];

            Parameters[0] = 0;

            Object_Excel_Application.GetType().InvokeMember("Visible", BindingFlags.SetProperty, null, Object_Excel_Application, Parameters);

            //Interaktion mit dem User unterbinden

            Parameters = new Object[1];

            Parameters[0] = 0;

            Object_Excel_Application.GetType().InvokeMember("Interactive", BindingFlags.SetProperty, null, Object_Excel_Application, Parameters);

            //Workbooks erstellen

            Object_WorkBooks = Object_Excel_Application.GetType().InvokeMember("Workbooks", BindingFlags.GetProperty, null, Object_Excel_Application, null);

            //Die angegebene Datei öffnen

            Parameters = new Object[15];

            Parameters[0] = dateiPfad;

            for(int i = 1; i <= 13; i++)

            {

                Parameters[i] = Missing.Value;

            }

            Parameters[14] = true;

            Object_WorkBook = Object_WorkBooks.GetType().InvokeMember("Open", BindingFlags.InvokeMethod, null, Object_WorkBooks, Parameters);

            //Letzte Calculations Version auslesen

            version = Object_WorkBook.GetType().InvokeMember("CalculationVersion", BindingFlags.GetProperty, null, Object_WorkBook, null).ToString();

            MessageBox.Show(version);

            //Wieder schließen

            //Workbook zumachen

            Parameters = new Object[3];

            Parameters[0] = true;

            Parameters[1] = Missing.Value;

            Parameters[2] = Missing.Value;

            Object_WorkBook.GetType().InvokeMember("Close", System.Reflection.BindingFlags.InvokeMethod, null, Object_WorkBook, Parameters);

            //Excel schließen

            Object_Excel_Application.GetType().InvokeMember("Quit", System.Reflection.BindingFlags.InvokeMethod, null, Object_Excel_Application, null);

            //Version in gekürtzter Form zurückgeben

            return version_long_to_version_short(version); //Die Hauptversionsnummer zurückgeben

        }//-try

        catch (Exception e) //bei Fehler

        {

            MessageBox.Show("Error: " + e.Message, "Error"); //Fehler anzeigen

            return String.Empty; //Leeren String zurückgeben

        }//-catch

        finally //Schlussendlich

        {

            //Die objecte wieder freigeben

            Object_freigeben(Object_WorkBook);

            Object_freigeben(Object_WorkBooks);

            Object_freigeben(Object_Excel_Application);

        }//-finally

    }//-CalculationVersion 
```

现在我正在尝试解决 Excel 97 文件似乎没有存储这个的问题，所以我有这个 C++ 用于确定文件的 bof 是否告诉我它是 Excel 97（输出 8）或任何其他版本（输出 0）。计划是执行这个，如果它给我一个`0`我会得到`CalculationVersion`，否则我知道它的 Excel 97\. `-1`, `-2`,`-3`是错误的。如果可行，下一步是尽可能将我的 C++“翻译”为 C#，并将其集成到我的程序中。

对不起德国人的评论，但我的英语不太好。

# maven - maven 仓库 eclipse 项目

> ID：12438607
> 
> 赞同：1
> 
> 时间：2012-09-15T15:22:51.570
> 
> 标签：maven, repository, tapestry

一个快速的问题。我是 pom 存储库的新手。

我添加了这个

```
<repository>
  <id>tapx</id>
  <name>howard lewisship snapshot repository</name>
  <url>http://howardlewisship.com/snapshot-repository/</url>
</repository> 
```

到 pom 文件以获取挂毯项目的这些文件。

sha1 左边和文件名在右边

```
7155233ba0dfbd99e19358f57e262ad484a440c6  tapx-core-1.1-20110620.210912-27.jar
822c300e6b6d93c53216d8d4fbb9b13217a7fb84  tapx-core-1.2-20110705.222421-4.jar
c11b3134128c3267f55dc4f8bfaab2f1f68ba711  tapx-datefield-1.1-20110617.214353-17.jar
ba2f05929baf2c01d22300953e983ac7a8f791b5  tapx-datefield-1.2-20110705.222544-4.jar 
```

当我在 Eclipse 中的依赖项搜索器上输入 sha1sum 时，在 Eclipse 中重建添加的项目存储库的索引，我得到 0 个结果。

请告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T15:46:53.707

[启用快照](http://maven.apache.org/pom.html#Repositories)；IIRC 默认情况下它们被禁用。

```
<repository>
  <id>tapx</id>
  <name>howard lewisship snapshot repository</name>
  <url>http://howardlewisship.com/snapshot-repository/</url>

  <snapshots>
    <enabled>true</enabled>
    <updatePolicy>never</updatePolicy>
    <checksumPolicy>fail</checksumPolicy>
  </snapshots>
</repository> 
```

[另请参阅此超级 POM 参考信息。](http://www.sonatype.com/books/mvnref-book/reference/pom-relationships-sect-pom.html#pom-relationships-sect-super-pom)

# facebook - Git heroku错误：推送heroku

> ID：12438612
> 
> 赞同：0
> 
> 时间：2012-09-15T15:23:10.363
> 
> 标签：facebook, git, heroku, github

我一直在开发一个 facebook 应用程序，现在我想更改所有文件，除了在尝试 git push heroku 时出现此错误：

```
C:\Users\amando96\deep-window-4782>git push heroku
Counting objects: 14, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (10/10), done.
Writing objects: 100% (11/11), 2.78 KiB, done.
Total 11 (delta 2), reused 0 (delta 0)

-----> Heroku receiving push
 !     Heroku push rejected, no Cedar-supported app detected

To git@heroku.com:deep-window-4782.git
 ! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:deep-window-4782.git'

C:\Users\amando96\deep-window-4782> 
```

而且它不会更新 git 存储库，因此应用程序也不会更新。

我错过了什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T17:21:32.697

我不确定为什么这以前可能对您有用 - 它不应该有。

对于在 Cedar 堆栈上托管静态网站的简单方法，使用他们的 PHP buildpack 获取 vanilla Apache 服务器，然后关闭 PHP 支持是一个很好的“技巧”。

见[http://kennethreitz.com/static-sites-on-heroku-cedar.html](http://kennethreitz.com/static-sites-on-heroku-cedar.html)

# php - Mysql Query 在编辑的 jTable 代码中不起作用，为什么？

> ID：12438616
> 
> 赞同：2
> 
> 时间：2012-09-15T15:23:55.377
> 
> 标签：php, jquery, mysql, ajax, jquery-jtable

**我正在使用这个例子：** [www.jtable.org](http://www.jtable.org)

我已经下载了 jTable PHP 版本。然后我编辑了脚本。jTable 简单版本**可以正常工作**，但我**编辑**的版本**不行**。

我可以创建一个列表，但我不能添加一行；此代码导致问题。但是，PHP 不显示任何错误消息。

```
else if($_GET["action"] == "create")
{
    //Insert record into database
    $result = mysql_query("INSERT INTO veriler(bolge, sehir, firma, adres, tel, web) VALUES('" . $_POST["bolge"] . "', '" . $_POST["sehir"] . "', '" . $_POST["firma"] . "', '" . $_POST["adres"] . "', '" . $_POST["tel"] . "', '" . $_POST["web"] . "'");

    //Get last inserted record (to return to jTable)
    $result = mysql_query("SELECT * FROM veriler WHERE id = LAST_INSERT_ID();");
    $row = mysql_fetch_array($result);

    //Return result to jTable
    $jTableResult = array();
    $jTableResult['Result'] = "OK";
    $jTableResult['Record'] = $row;

    print json_encode($jTableResult);
} 
```

问题是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-15T15:29:44.580

在这一行中，有一个问题：

```
$result = mysql_query("INSERT INTO veriler(bolge, sehir, firma, adres, tel, web) VALUES('" . $_POST["bolge"] . "', '" . $_POST["sehir"] . "', '" . $_POST["firma"] . "', '" . $_POST["adres"] . "', '" . $_POST["tel"] . "', '" . $_POST["web"] . "'"); 
```

INSERT 查询的格式为：

```
INSERT INTO table (column1, column2, etc) VALUES (value1, value2, etc); 
```

**您错过了 VALUES 部分的右括号。**

要改进您的代码，您可以执行以下操作：

```
$result = mysql_query("YOUR QUERY") or die('ERROR: '.mysql_error()); 
```

请阅读[SQL 注入](http://php.net/manual/en/security.database.sql-injection.php)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-15T15:25:24.067

这是你忘记的问题`)`

```
 $result = mysql_query("INSERT INTO veriler(bolge, sehir, firma, adres, tel, web) 
                       VALUES('" . $_POST["bolge"] . "', '" . $_POST["sehir"] . "', '" . $_POST["firma"] . "', '" . $_POST["adres"] . "', '" . $_POST["tel"] . "', '" . $_POST["web"] . "'"); 
```

利用

```
$result = mysql_query("INSERT INTO veriler(bolge, sehir, firma, adres, tel, web) VALUES
                         ('{$_POST["bolge"]}', '{$_POST["sehir"] }' , '{$_POST["firma"]}' , '{$_POST["adres"] }', '{$_POST["tel"]}', '{$_POST["web"]}' )" ) ; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-15T15:36:29.023

首先你可以减少一个查询`last_inset_id()`

```
else if($_GET["action"] == "create")
{
    //Insert record into database
    $result = mysql_query("INSERT INTO veriler(bolge, sehir, firma, adres, tel, web) VALUES('" . $_POST["bolge"] . "', '" . $_POST["sehir"] . "', '" . $_POST["firma"] . "', '" . $_POST["adres"] . "', '" . $_POST["tel"] . "', '" . $_POST["web"] . "'"));
//Get last inserted record (to return to jTable)
//check youe result query you are missing something here
$id=mysql_insert_id();
//this will automatically give you last id 

//Return result to jTable
$jTableResult = array();
$jTableResult['Result'] = "OK";
$jTableResult['id'] = $id;
$jTableResult['Record'] = $row;
$jTableResult['aderes'] = $_POST['adres'];
//and so on 
print json_encode($jTableResult); 
```

}

# php - 每个用户的 Amazon s3 文件夹

> ID：12438617
> 
> 赞同：0
> 
> 时间：2012-09-15T15:23:58.247
> 
> 标签：php, file-upload, amazon-s3

我刚刚开始使用 Amazon S3。我正在使用 s3 来允许我的应用用户上传图片。每个用户都可以上传一定数量的图像并且他们可以管理他们的图像（上传、删除、替换）。

我不确定哪个是 s3 的最佳方法。我应该将所有图像上传到我的存储桶中的一个目录并在我的数据库中保留有关图像上传者的记录，还是为我的存储桶中的每个用户创建一个文件夹？

请分享您对这项服务的体验。

![在此处输入图像描述](../Images/a5c80ce63e1678ed1e2553e56b90f1d7.png)

为每个用户存储上传内容时，哪种方法最有效？我可以使用的文件夹数量是否有限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T07:36:58.477

We had the similar decision to be made where users can upload multiple formats of videos and images and we created different folder for each user. It will have few benefits like 1\. It is easy to maintain. 2\. There will be no name conflicts between two different users uploading files with same name. 3\. Also, as mentioned by Brenda, bulk delete will be easy.

I would also recommend you to use s3fs fuse which will mount your s3 bucket as local directory. It will make few of your task very easy.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T15:30:33.640

答案实际上取决于完整的要求。

*   是否允许用户在一次操作中删除所有图像？
*   您是否有诊断或监控需求会受到您的存储桶结构的显着影响？

分析需求和支持它们的 AWS API 可能表明您需要以某种方式管理您的存储桶。

# java - 如何在摇摆游戏中通知多线程事件

> ID：12438619
> 
> 赞同：0
> 
> 时间：2012-09-15T15:24:13.317
> 
> 标签：java, multithreading, swing

我应该做一个小游戏模拟。在这个游戏中有三个按钮。当用户点击启动坦克和汽车将在 90 度关闭对方当用户点击关闭按钮坦克将向汽车投掷子弹。

我为此做了一个模拟。坦克向汽车投掷子弹，但当子弹撞击汽车时，我无法做到这一点。我只需要增加坦克撞车的次数。

这是源代码

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;

import javax.swing.JPanel;

public class Vehicle extends Thread {
    private JPanel box;

    private int XSIZE;

    private int YSIZE;

    private int time;

    private int x;

    private int y;

    private int dx = 5;

    private int dy = 5;

    private int dim;

    public Vehicle(JPanel b, int i) {
        box = b;
        this.dim = i;
        if (i == 0) {
            x = 0;
            y = 100;
            time = 1000;
            XSIZE = 9;
            YSIZE = 20;
        } else {
            time = 200;
            y = box.getSize().height;
            x = box.getSize().width / 2;
            XSIZE = 6;
            YSIZE = 10;
        }
    }

    public void draw() {
        Graphics g = box.getGraphics();
        g.fillOval(x, y, XSIZE, YSIZE);
        g.dispose();
    }

    public void moveHorizontal() {
        if (!box.isVisible())
            return;
        Graphics g = box.getGraphics();
        g.setColor(Color.BLUE);
        g.setXORMode(box.getBackground());
        g.fillOval(x, y, XSIZE, YSIZE);
        x += dx;

        Dimension d = box.getSize();
        if (x < 0) {
            x = 0;
            dx = -dx;
        }
        if (x + XSIZE >= d.width) {
            x = d.width - XSIZE;
            dx = -dx;
        }

        g.fillOval(x, y, XSIZE, YSIZE);
        g.dispose();
    }

    public JPanel getBox() {
        return box;
    }

    public void setBox(JPanel box) {
        this.box = box;
    }

    public void moveVertical() {
        if (!box.isVisible())
            return;
        Graphics g = box.getGraphics();
        g.setXORMode(box.getBackground());
        g.fillOval(x, y, XSIZE, YSIZE);
        y += dy;
        Dimension d = box.getSize();
        if (y < 0) {
            y = 0;
            dy = -dy;
        }
        if (y + YSIZE >= d.height) {
            y = d.height - YSIZE;
            dy = -dy;
        }

        g.fillOval(x, y, XSIZE, YSIZE);
        g.dispose();
    }

    public void move(int i) {

        if (i == 0) {

            moveHorizontal();
        } else {
            moveVertical();
        }
    }

    public int getYSIZE() {
        return YSIZE;
    }

    public void setYSIZE(int ySIZE) {
        YSIZE = ySIZE;
    }

    public int getX() {
        return x;
    }

    public void setX(int x) {
        this.x = x;
    }

    public int getY() {
        return y;
    }

    public int getXSIZE() {
        return XSIZE;
    }

    public void setXSIZE(int xSIZE) {
        XSIZE = xSIZE;
    }

    public void setY(int y) {
        this.y = y;
    }

    public void run() {
        try {
            draw();
            for (;;) {
                move(dim);
                sleep(time);
            }
        } catch (InterruptedException e) {
        }
    }

}

    import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;

import javax.swing.JPanel;

public class Bullet extends Thread {
    private JPanel box;

    private int XSIZE = 3;

    public int getXSIZE() {
        return XSIZE;
    }

    public void setXSIZE(int xSIZE) {
        XSIZE = xSIZE;
    }

    public int getX() {
        return x;
    }

    public void setX(int x) {
        this.x = x;
    }

    private int YSIZE = 1;

    private int x;

    private int y;

    private int dx = 3;

    public Bullet(JPanel b, Vehicle tank, Vehicle car) {
        box = b;

        x = tank.getX() + tank.getXSIZE();
        if (x >= tank.getBox().getSize().width / 2)
            dx = -dx;

        y = tank.getY() + tank.getYSIZE() / 2;
        ;

    }

    public void draw() {
        Graphics g = box.getGraphics();
        g.fillOval(x, y, XSIZE, YSIZE);
        g.dispose();
    }

    public void move() {
        if (!box.isVisible())
            return;
        Graphics g = box.getGraphics();
        g.setColor(Color.RED);
        g.setXORMode(box.getBackground());
        g.fillOval(x, y, XSIZE, YSIZE);
        x += dx;

        Dimension d = box.getSize();

        if (x < 0) {
            x = 0;

        }
        if (x + XSIZE >= d.width) {
            x = d.width - XSIZE;

        }
        g.fillOval(x, y, XSIZE, YSIZE);
        g.dispose();

    }

    public void run() {
        try {
            draw();
            for (;;) {
                move();

                sleep(20);
            }
        } catch (InterruptedException e) {
        }
    }

}

    import java.awt.Container;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JLabel;

@SuppressWarnings("serial")
public class Tank_Shut_Car_ThreadFrame extends JFrame {

    private JPanel canvas;
    private boolean isOn = false;
    private Vehicle tank;
    private Vehicle car;
    private JLabel score;
    public static int sc = 0;

    public Tank_Shut_Car_ThreadFrame() {
        setResizable(false);
        setSize(600, 400);
        setTitle("Tank Shut Car");
        addWindowListener(new WindowAdapter() {
            public void windowClosing(WindowEvent e) {
                System.exit(0);
            }
        });

        Container contentPane = getContentPane();
        canvas = new JPanel();
        contentPane.add(canvas, "Center");
        canvas.setLayout(null);

        score = new JLabel("0");
        score.setBounds(527, 11, 36, 14);
        canvas.add(score);

        JLabel lblScore = new JLabel("score");
        lblScore.setBounds(481, 11, 36, 14);
        canvas.add(lblScore);
        JPanel p = new JPanel();

        addButton(p, "Start", new ActionListener() {
            public void actionPerformed(ActionEvent evt) {

                if (!isOn) {
                    tank = new Vehicle(canvas, 0);
                    tank.start();
                    car = new Vehicle(canvas, 1);
                    car.start();
                    isOn = true;
                }
            }
        });

        addButton(p, "Shut", new ActionListener() {
            public void actionPerformed(ActionEvent evt) {

                if (isOn) {
                    Bullet bullet = new Bullet(canvas, tank, car);
                    bullet.start();
                    score.setText("" + sc);
                }

            }
        });
        addButton(p, "Close", new ActionListener() {
            public void actionPerformed(ActionEvent evt) {
                canvas.setVisible(false);
                System.exit(0);
            }
        });

        contentPane.add(p, "South");
    }

    public void addButton(Container c, String title, ActionListener a) {
        JButton button = new JButton(title);
        c.add(button);
        button.addActionListener(a);
    }

}

    import javax.swing.JFrame;

public class Test {
    public static void main(String[] args) {

        JFrame frame = new Tank_Shut_Car_ThreadFrame();
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T06:52:12.653

好的，所以我玩了这个（只是为了好玩） ![嘭嘭](../Images/c8141370be3927e94ed7823a6996d1a7.png)

现在，这远非一个“正确”或“完整”的游戏引擎，但它提供了一个基本概念，即如何将核心线程引擎与 UI 组件混合在一起。

我没有粘贴整个代码，而是将它的源代码上传到[Tank.zip](http://dl.dropbox.com/u/8411344/Tank.zip)

但基本引擎看起来像这样......

```
public class GameEngine extends Thread {

    public static final Object ASSET_LOCK = new Object();
    private List<GameAsset> lstAssets;
    private GameScreen screen;

    public GameEngine(GameScreen screen) {
        // Let the thread die when the JVM closes
        setDaemon(true);
        // Want to be below the UI thread (personal preference)
        setPriority(NORM_PRIORITY - 1);

        // A list of game assests
        lstAssets = new ArrayList<GameAsset>(25);
        // A reference to the screen
        this.screen = screen;
        // Add global key listener, this is simpler to the trying to attach a key listener
        // to the screen.
        Toolkit.getDefaultToolkit().addAWTEventListener(new EventHandler(), AWTEvent.KEY_EVENT_MASK);

    }

    public GameAsset[] getAssets() {
        synchronized (ASSET_LOCK) {
            return lstAssets.toArray(new GameAsset[lstAssets.size()]);
        }
    }

    /*
     * Allows for assets to be added
     */
    public void addAsset(GameAsset asset) {
        synchronized (ASSET_LOCK) {
            lstAssets.add(asset);
        }
    }

    @Override
    public void run() {

        while (true) {
            try {
                sleep(40);
            } catch (InterruptedException ex) {
            }

            synchronized (ASSET_LOCK) {
                GameAsset[] assets = lstAssets.toArray(new GameAsset[lstAssets.size()]);
                for (GameAsset asset : assets) {
                    if (lstAssets.contains(asset)) {
                        asset.update(this, screen);
                    }
                }
                screen.repaint(new ArrayList<GameAsset>(lstAssets));
            }
        }
    }

    /**
     * Allows the removal of an asset...
     */
    public void removeAsset(GameAsset asset) {
        synchronized (ASSET_LOCK) {
            lstAssets.remove(asset);
        }
    }

    /**
     * Key event handling...
     */
    protected class EventHandler implements AWTEventListener {

        @Override
        public void eventDispatched(AWTEvent event) {
            KeyEvent keyEvent = (KeyEvent) event;
            if (keyEvent.getID() == KeyEvent.KEY_PRESSED) {
                synchronized (ASSET_LOCK) {
                    GameAsset[] assets = lstAssets.toArray(new GameAsset[lstAssets.size()]);
                    for (GameAsset asset : assets) {
                        if (lstAssets.contains(asset)) {
                            asset.processKeyPressed(GameEngine.this, screen, keyEvent);
                        }
                    }
                }
            } else if (keyEvent.getID() == KeyEvent.KEY_RELEASED) {
                synchronized (ASSET_LOCK) {
                    GameAsset[] assets = lstAssets.toArray(new GameAsset[lstAssets.size()]);
                    for (GameAsset asset : lstAssets) {
                        if (lstAssets.contains(asset)) {
                            asset.processKeyReleased(GameEngine.this, screen, keyEvent);
                        }
                    }
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T15:41:40.877

Swing 不是线程安全的。事件应该在事件调度线程上触发。

[http://www.javamex.com/tutorials/threads/invokelater.shtml](http://www.javamex.com/tutorials/threads/invokelater.shtml)

# mediaelement.js - 悬停时仅显示播放按钮

> ID：12438620
> 
> 赞同：0
> 
> 时间：2012-09-15T15:24:15.530
> 
> 标签：mediaelement.js

我们希望使用类似于 Vimeo 播放器在某些情况下的工作方式的 mediaelement。如果用户将鼠标悬停在视频上，我们只想显示播放按钮。但是，当用户开始播放视频时，会出现剩余的控件。然后，如果用户停止视频，则只有播放按钮。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T08:54:46.717

当播放器启动时，您使用 jQuery 隐藏包含控件的 Div。这应该隐藏控件。

```
$('.mejs-controls').attr('style','visibility:hidden;'); 
```

# wordpress - Wordpress 添加 tinyMCE 插件

> ID：12438621
> 
> 赞同：2
> 
> 时间：2012-09-15T15:24:15.873
> 
> 标签：wordpress, plugins, tinymce

我正在使用 CKEditor 作为默认编辑器，我想为插件集成 TinyMCE 编辑器。这是我的代码：

```
function tiny_page() {
    add_options_page(‘tiny’, ‘tiny’, ‘manage_options’, __FILE__, ‘tiny_form’);
}

add_action(‘admin_menu’, ‘tiny_page’);

/* load the tiny editor*/
function editor_admin_init() {
    wp_enqueue_script(‘word-count’);
    wp_enqueue_script(‘post’);
    wp_enqueue_script(‘editor’);
    wp_enqueue_script(‘media-upload’);
}

function editor_admin_head() {
    wp_tiny_mce();
}

add_action(‘admin_init’, ‘editor_admin_init’);
add_action(‘admin_head’, ‘editor_admin_head’);

/* output the plugin page*/
function tiny_form() {
    $args = array(“textarea_rows” => 5, “textarea_name” => “editor_content_1?);
    wp_editor(“My editor content”, “my_editor_1?, $args);
} 
```

问题是输出插件编辑器是 CKEditor 而不是那个小...</p>

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T18:22:06.850

来自 Wordpress 的[WP 编辑器](http://codex.wordpress.org/Function_Reference/wp_editor)文档：

> 请注意，传递给 wp_editor() 函数的 ID 只能由小写字母组成。没有下划线，没有连字符。其他任何事情都会导致 WYSIWYG 编辑器出现故障。

尝试将“my_editor_1”更改为“mycustomeditor”或遵循文档标准的独特内容。

# php - 用PHP在数据库表中定位记录

> ID：12438622
> 
> 赞同：0
> 
> 时间：2012-09-15T15:24:21.713
> 
> 标签：php, mysql, position, records

假设我有一个名为“pages”的表，字段：id、name、content、position。当我在我的 cms 中显示所有页面时，我想放置“向下”和“向上”按钮来设置页面位置。我如何进行职位更新？**我怎么知道如何重新定位其他页面？**

例如：

```
id  name  content  position
1   Home  bla bla  1
2   Info  bla bla  4 
```

如果我为第二页（信息）单击“向上”，则位置需要更新为 1，并且第一页位置需要大于 1 - 例如 2。

我使用 MySQL 数据库，我需要 PHP 的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T15:52:34.890

由于您没有发布任何代码，因此我无法给出具体的解决方案，但我可以给您一个通用的解决方案。它会是这样的（未经测试）

减少页面的位置（假设它的名称是 in `$pageName`，并且表名称是`pages`），如下所示：

```
 mysql_query("UPDATE `pages` SET position=position-1 WHERE name=$pageName"); 
```

如果您不允许负排名，您可能需要首先检查排名是否 >0。增加现在与当前页面具有相同排名的页面的位置

```
 mysql_query("UPDATE `pages` SET position=position+1 
        WHERE position = (SELECT position FROM `pages` WHERE name=$pageName) 
        AND NOT name=".$pageName) 
```

这当然假设页面排名没有 UNIQUE 约束。如果有，请执行以下操作：

1.  选择您要编辑的页面的排名（比如说`$thisRank`
2.  选择具有 rank 的页面的 id `$thisRank-1`，即上面的那个（比如 to `$aboveId`）到一个未使用的排名。
3.  将页面的排名设置为`$thisRank-1`
4.  将等级设置`$aboveId`为`$thisRank`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T16:05:47.587

实现此目的的一种方法是在同一页面上提交。例如 position.php

如果您有 3 条记录，请考虑：

John bla bla（位置 1）
Mary bla bla（位置 2）
George bla bla（位置 3）

一开始你需要这样的链接

```
 <a href="position.php?position=<?=$position?>&id=<?=$id?>">up</a> 
```

如上所示，$position 是元素的当前位置，id 是表的 id。

当您单击该链接时

```
 $_GET['position'] and $_GET['id'] 
```

你有当前记录的位置和id。

因此，您可以执行以下操作

```
 <?php
         //connect to DB

         if(isset($_GET['position']) && isset($_GET['id'])){
           $line = $_GET['position'];    
          $id = $_GET['id'];
          //if line is not the first one    
         if($line!=1){       

        $query = "select id,position from pages where position<$line order by position   desc limit 0,1";
       $result = mysql_query($query);
       $row = mysql_fetch_array($result);
       $gotoLine = $row['position'];//line to go to
       $idLine = $row['id'];
       //one position up
       $queryUpdate = "update pages set position=$gotoLine where id=$id";
       mysql_query($queryUpdate);
       //one position down
       $queryUpdate2 = "update pages set position=$line where id=$idLine";
       mysql_query($queryUpdate2);

   }     
}

   $queryLinks = "select * from pages order by position";
   $resultLinks = mysql_query($queryLinks);
   while($rowLinks = mysql_fetch_array($resultLinks)){

   $name = $rowLinks['name'];
   $id = $rowLinks['id'];
   $position = $rowLinks['position'];

   echo "$name<a href='position.php?position=$position&id=$id'> up </a><br/>";

}    

?> 
```

# android - SurfaceView 上的逐帧动画

> ID：12438623
> 
> 赞同：0
> 
> 时间：2012-09-15T15:24:59.020
> 
> 标签：android

我想问，在surfaceview上做逐帧动画的正确方法是什么？

这是我到目前为止所做的......

```
class MySurfaceView extends SurfaceView implements Runnable{

Thread thread = null;
SurfaceHolder surfaceHolder;
volatile boolean running = false;
Bitmap bitMap;

int i = 1;

public MySurfaceView(Context context)
{
super(context);
surfaceHolder = getHolder();

bitMap = BitmapFactory.decodeResource(getResources(), R.drawable.y1);

final CountDownTimer t = new CountDownTimer(75000,50)
{

    @Override
    public void onFinish() {    
    }

    @Override
    public void onTick(long millisUntilFinished) {
        i++;
        if ( i >= 26 ) { i = 1; }

        if ( i == 1 ) { bitMap = BitmapFactory.decodeResource(getResources(), R.drawable.y1); }
        else if ( i == 2 ) { bitMap = BitmapFactory.decodeResource(getResources(), R.drawable.y2); }
        else if ( i == 3 ) { bitMap = BitmapFactory.decodeResource(getResources(), R.drawable.y3); }
        else if ( i == 4 ) { bitMap = BitmapFactory.decodeResource(getResources(), R.drawable.y4); }
        else if ( i == 5 ) { bitMap = BitmapFactory.decodeResource(getResources(), R.drawable.y5); }
        else if ( i == 6 ) { bitMap = BitmapFactory.decodeResource(getResources(), R.drawable.y6); }
        else if ( i == 7 ) { bitMap = BitmapFactory.decodeResource(getResources(), R.drawable.y7); }
        else if ( i == 8 ) { bitMap = BitmapFactory.decodeResource(getResources(), R.drawable.y8); }
        else if ( i == 9 ) { bitMap = BitmapFactory.decodeResource(getResources(), R.drawable.y9); }
        else if ( i == 10 ) { bitMap = BitmapFactory.decodeResource(getResources(), R.drawable.y10); }

        else if ( i == 11 ) { bitMap = BitmapFactory.decodeResource(getResources(), R.drawable.y11); }
        else if ( i == 12 ) { bitMap = BitmapFactory.decodeResource(getResources(), R.drawable.y12); }
        else if ( i == 13 ) { bitMap = BitmapFactory.decodeResource(getResources(), R.drawable.y13); }
        else if ( i == 14 ) { bitMap = BitmapFactory.decodeResource(getResources(), R.drawable.y14); }
        else if ( i == 15 ) { bitMap = BitmapFactory.decodeResource(getResources(), R.drawable.y15); }
        else if ( i == 16 ) { bitMap = BitmapFactory.decodeResource(getResources(), R.drawable.y16); }
        else if ( i == 17 ) { bitMap = BitmapFactory.decodeResource(getResources(), R.drawable.y17); }
        else if ( i == 18 ) { bitMap = BitmapFactory.decodeResource(getResources(), R.drawable.y18); }
        else if ( i == 19 ) { bitMap = BitmapFactory.decodeResource(getResources(), R.drawable.y19); }
        else if ( i == 20 ) { bitMap = BitmapFactory.decodeResource(getResources(), R.drawable.y20); }

        else if ( i == 21 ) { bitMap = BitmapFactory.decodeResource(getResources(), R.drawable.y21); }
        else if ( i == 22 ) { bitMap = BitmapFactory.decodeResource(getResources(), R.drawable.y22); }
        else if ( i == 23 ) { bitMap = BitmapFactory.decodeResource(getResources(), R.drawable.y23); }
        else if ( i == 24 ) { bitMap = BitmapFactory.decodeResource(getResources(), R.drawable.y24); }
        else if ( i == 25 ) { bitMap = BitmapFactory.decodeResource(getResources(), R.drawable.y25); }

    }

}.start();

running = true;
thread = new Thread(this);
thread.start();
}

//////////////////////////////////////////////////////////

public void run() {

while(running){

if( surfaceHolder.getSurface().isValid() ){

Canvas canvas = surfaceHolder.lockCanvas();

if ( canvas == null ) { Log.e("null","n"); } else
    {

    /////

    canvas.drawBitmap(bitMap, 0, 0, null);

    /////
    surfaceHolder.unlockCanvasAndPost(canvas);

    }

}
}
}

//////////////////////////////////////////////////////////
... 
```

至少它在播放时不会崩溃或超出 vm 缓冲区，但帧速率非常低，可能约为 5-10 fps。有没有办法加快速度？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T15:43:06.443

每帧加载图像非常耗时。一个更好的方法来做你想做的事情是让你的所有图像并排在一个图像中（称为你的图像图集或纹理图集更准确）并在启动时只将它加载到内存中一次。然后你`Canvas. drawBitmap (Bitmap bitmap, Rect src, Rect dst, Paint paint)`用来绘制每一帧作为你的地图集的一部分。这将显着提高帧速率。

# actionscript-3 - Flash 错误 #1063 参数计数不匹配 AS3

> ID：12438635
> 
> 赞同：1
> 
> 时间：2012-09-15T15:25:54.957
> 
> 标签：actionscript-3, flash, adobe-flash-cs3

我试图在一个游戏中混合两个教程。第 3 级以前在动作脚本文件中使用，但我将其转移到正常的 AS3 时间线中。

我收到此错误：

```
ArgumentError: Error #1063: Argument count mismatch on adventure_fla::MainTimeline/newObjects(). Expected 0, got 1.
at flash.events::EventDispatcher/flash.events:EventDispatcher::dispatchEventFunction()
at flash.events::EventDispatcher/dispatchEvent()
at flash.utils::Timer/flash.utils:Timer::tick() 
```

这是代码......如果它凌乱，对不起。

```
 const speed:Number = 5.0;
    var nextObject:Timer;
 // array of objects
    var objects:Array = new Array();

function initGame():void{
player.x=200;
player.y=400;
stage.addEventListener(MouseEvent.MOUSE_MOVE,movePlayer);
Mouse.hide();
player.gotoAndStop("arrow");
setGameTimer();
newObjects();
addEventListener(Event.ENTER_FRAME, moveObject);
}

    function movePlayer(e:MouseEvent):void{

    player.x=mouseX;
    e.updateAfterEvent();}

    function setGameTimer():void {
trace("GAME TIMER STARTED");
var gameTimer:Timer = new Timer(40000, 1);
gameTimer.addEventListener(TimerEvent.TIMER_COMPLETE, endGame);
gameTimer.start()
    }

    function endGame(e:Event):void {
    trace("Game Over");
    // remove all objects
    for (var i:int=objects.length-1; i>=0; i--) {
        removeChild(objects[i]);
        objects.splice(i, 1);
    }  }

    function setNextObject():void {
nextObject = new Timer(1000, 1);
nextObject.addEventListener(TimerEvent.TIMER_COMPLETE, newObjects);
nextObject.start();

    function newObjects():void{
//create next object
        // array of good and bad objects
        var badObjects:Array = ["Bad_1", "Bad_2"]
        var goodObjects:Array = ["Good_1", "Good_2"]
        // create random number
        if (Math.random() < .5 ) {
            //based of treat object length
            var r:int = Math.floor(Math.random()*goodObjects.length);
            // get the treat object by name and cast it as its own class in a temporary variable
            var classRef:Class = getDefinitionByName(goodObjects[r]) as Class;
            // now we can make a new version of the class
            var newObjects:MovieClip = new classRef();
            // dynamic var (because mc is an object) typestr it as good
            newObjects.typestr = "good";
        } else {
            //  for bad same as above
            r = Math.floor(Math.random()*badObjects.length);
            var classRef:Class = getDefinitionByName(badObjects[r]) as Class;
            var newObjects:MovieClip = new classRef();
            // typestr it bad
            newObjects.typestr = "bad";
        }
        // random pos
        newObjects.x = Math.random()* 500;
        newObjects.scaleX = newObjects.scaleY = .4;
        addChild(newObjects);
        // push it to array
        objects.push(newObjects);
        // create another one
        setNextObject();

    }

     function moveObject(e:Event):void {
    // cycle thru objects using a for loop
    for (var i:int=objects.length-1; i>=0; i--) {
        //move objects down based on speed
        objects[i].y += speed;
        objects[i].rotation += speed;
        // if objects leaves the stage
        if (objects[i].y > 400) {

            removeChild(objects[i]);

            objects.splice(i, 1);

        }
    }
  } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-15T16:03:54.513

newObjects 不接受任何参数，但它用作事件侦听器（这需要它接受事件对象）。

它应该看起来像`function newObjects(event:TimerEvent):void`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-16T03:30:06.063

用作事件侦听器的函数应接受一个 Event 类型的参数，具体取决于它侦听的事件类别。您正在侦听 TimerEvent 类的事件，所以是的，将参数声明为 TimerEvent。要添加一个不需要将参数作为事件侦听器传递给它的函数，请使用如下默认值构造：

```
function newObjects(event:TimerEvent=null):void {...} 
```

“=null”添加将允许您不向函数传递任何参数，并且声明的参数将允许您在将其作为事件处理程序调用时不会出现异常。

# c# - 在 SQL 中连接表时出错

> ID：12438636
> 
> 赞同：0
> 
> 时间：2012-09-15T15:25:58.180
> 
> 标签：c#, asp.net, sql

`UserName`我有两个与字段有关系的表。基于`UserName`列，我想`ID`从`CarReserve`表中获取。这是我的 SQL 语句：

```
SELECT CarReserve.ID 
FROM CarReserve 
 INNER JOIN aspnet_Users ON CarReserve.UserName = aspnet_Users.UserName 
WHERE UserName = @UserName 
```

不幸的是，我收到了这个警告：

> 不明确的列名“用户名”

谁能告诉我我的陈述有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T15:27:22.933

您忘记添加 aspnet_users。在 where 子句中的用户名之前。

我也可能建议为您的表使用别名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T15:27:43.803

`UserName`在in之前添加表名`WHERE UserName = @UserName`

您的查询应该是：

```
SELECT CarReserve.ID 
    FROM CarReserve 
    INNER JOIN aspnet_Users ON CarReserve.UserName = aspnet_Users.UserName 
    WHERE aspnet_Users.UserName = @UserName
    ------^-----------^---------------- 
```

或者

```
SELECT CarReserve.ID 
    FROM CarReserve 
    INNER JOIN aspnet_Users ON CarReserve.UserName = aspnet_Users.UserName 
    WHERE CarReserve.UserName = @UserName
    ------^---------^---------------- 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T15:28:21.763

`username`您必须为子句中的字段起别名`WHERE`才能明确限定：

```
SELECT CarReserve.ID 
FROM CarReserve 
INNER JOIN aspnet_Users ON CarReserve.UserName = aspnet_Users.UserName 
WHERE aspnet_Users.UserName = @UserName 
```

# database - 使用 ORM 进行数据验证

> ID：12438637
> 
> 赞同：2
> 
> 时间：2012-09-15T15:26:02.027
> 
> 标签：database, validation, grails, orm, mapping

我有一个 Grails 应用程序，它依赖于定期吸入的外部数据集。当数据进入数据库时​​，无法验证数据，因为吸入它的程序不是我们编写的。

有时，我们会在数据库中得到一条错误的数据。例如，数字是“5,5”而不是“5.5”。列上的数据类型（因为他们定义了表）是 VARCHAR，即使该字段应始终包含一个数字。我们的应用程序将此列映射到 ORM 层中的 FLOAT，因为这是我们所期望的。

我想确保在我们获取新数据时应用程序不会崩溃，但我不确定如何。我应该将该列映射到 VARCHAR，然后转换为瞬态 FLOAT 列或类似的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T17:00:50.790

短期，是的，将 VARCHAR 映射到域对象中的字符串而不是数字类型将解决问题。

在我看来，更好的解决方案是定期导入到不同的表中，并有一个仅将有效行移动到域表的过程。您可能还想将“坏”行放在某处，并通知某人手动修复它们。

# c# - 通过 WPF 应用程序收听网站

> ID：12438642
> 
> 赞同：0
> 
> 时间：2012-09-15T15:26:56.330
> 
> 标签：c#, wpf

我想制作一个在互联网上工作的简单聊天应用程序。我的应用程序首先将聊天字符串发布到网站。然后网站会将数据发送给第二个人。

我已经实现了发送阶段，但不知道如何从服务器接收数据。收听网站以使其能够随时异步接收数据的最佳方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T15:37:48.707

你可以使用：[SignalR](http://signalr.net/)

它甚至包含在 MVC 4 中

# javascript - 改变中间点击动作？

> ID：12438648
> 
> 赞同：-1
> 
> 时间：2012-09-15T15:27:29.907
> 
> 标签：javascript, html

我需要将右键单击和中键单击的动作更改为左键单击，这样当有人在页面内单击右键或中键单击（鼠标滚轮单击）时，它将始终充当左键单击。

这怎么可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T15:36:34.093

**需要jQuery**

```
 $(document).live('click', function(e) {
       if( e.which != 1 )
       {
        var target = e.target;
            target.click();
         e.preventDefault();
       }
    }); 
```

这是我对 Fiddle 的基本测试，希望它对你有用

[http://jsfiddle.net/GSXDJ/15/](http://jsfiddle.net/GSXDJ/15/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T15:31:27.780

您可以使用 event.which 属性 f.ex 检测单击了哪个按钮：

```
​document.onclick = function(e) {
    alert(e.which);
};​ 
```

[http://jsfiddle.net/R3LVW/](http://jsfiddle.net/R3LVW/)

1是左边，2和3是中间和右边。现在添加您自己的逻辑。如果您需要在浏览器之间进行规范化，我推荐使用 jQuery 处理事件。

# windows-phone-7 - Windows phone 闸机羽毛页面过渡

> ID：12438649
> 
> 赞同：3
> 
> 时间：2012-09-15T15:27:29.933
> 
> 标签：windows-phone-7

Silverlight 工具包只为我们提供了闸门过渡而不是闸门羽化。（windows phone 7 主屏幕上的一个，其中所有磁贴在所选磁贴之前翻转。）

我浏览了以下链接，但它们没有帮助我，所以我正在寻找此处未包含信息的答案：

1.  [http://www.windowsphonegeek.com/articles/wp7-transitions-in-depth--key-concepts-and-api](http://www.windowsphonegeek.com/articles/wp7-transitions-in-depth--key-concepts-and-api)
2.  [http://blogs.claritycon.com/blog/2010/10/wp7-page-transitions-sample/](http://blogs.claritycon.com/blog/2010/10/wp7-page-transitions-sample/)
3.  [http://www.scottlogic.co.uk/blog/colin/2011/03/metro-in-motion-part-2-peel-animations/](http://www.scottlogic.co.uk/blog/colin/2011/03/metro-in-motion-part-2-peel-animations/)
4.  [http://www.codeproject.com/Articles/117360/Windows-Phone-7-Turnstile-Control-for-Silverlight](http://www.codeproject.com/Articles/117360/Windows-Phone-7-Turnstile-Control-for-Silverlight)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T09:22:41.280

新的 Windows Phone 工具包支持`TurnstyleFeatherTransition`. [http://phone.codeplex.com/](http://phone.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-13T22:41:38.333

这是您如何实现它的方法。

第 1 步 => 首先转到 => App.xaml.cs 并将您的 RootFrame 更改为 Transition Frame。

```
RootFrame = new TransitionFrame(); 
```

第 2 步 => 转到您要在其上实现`TurnstyleFeatherTransition`动画的页面并添加启用 TurnstyleFeatherTransition 的动画代码。把它放在你的 RootGrid/Root 容器之前

```
 <toolkit:TransitionService.NavigationInTransition>
    <toolkit:NavigationInTransition>
        <toolkit:NavigationInTransition.Backward>
            <toolkit:TurnstileFeatherTransition Mode="BackwardIn"/>
        </toolkit:NavigationInTransition.Backward>
        <toolkit:NavigationInTransition.Forward>
            <toolkit:TurnstileFeatherTransition Mode="ForwardIn"/>
        </toolkit:NavigationInTransition.Forward>
    </toolkit:NavigationInTransition>
</toolkit:TransitionService.NavigationInTransition>
<toolkit:TransitionService.NavigationOutTransition>
    <toolkit:NavigationOutTransition>
        <toolkit:NavigationOutTransition.Backward>
            <toolkit:TurnstileFeatherTransition Mode="BackwardOut"/>
        </toolkit:NavigationOutTransition.Backward>
        <toolkit:NavigationOutTransition.Forward>
            <toolkit:TurnstileFeatherTransition Mode="ForwardOut"/>
        </toolkit:NavigationOutTransition.Forward>
    </toolkit:NavigationOutTransition>
</toolkit:TransitionService.NavigationOutTransition> 
```

第 3 步 => 为控件提供羽化索引。通过添加以下代码。

```
toolkit:TurnstileFeatherEffect.FeatheringIndex="0" 
```

例如 =>

`<Button toolkit:TurnstileFeatherEffect.FeatheringIndex="0" ></Button>`

你已准备好出发 ：）

# php - 多个值的连接语句

> ID：12438651
> 
> 赞同：0
> 
> 时间：2012-09-15T15:27:48.840
> 
> 标签：php, mysql, symfony-1.4, propel

这确实让我感到困扰，但首先是代码，然后是问题：

```
<?php
 public static function retrievePagerByTagArray($page, $limit, $tags) {

    $criteria = new Criteria();

    $criteria->addJoin(self::MASTER_ID, MasterPeer::MASTER_ID);

    foreach($tags as $tag) {
      $criteria->addOr(MasterHasTagPeer::TAG_ID, $tag->getPrimaryKey());
    }

    $criteria->add(self::IS_ACTIVE, 1);
    $criteria->addDescendingOrderByColumn(self::MASTER_ID);
    $pager = new sfPropelPager('Master');

    $pager->setCriteria($criteria);
    $pager->setPage($page);
    $pager->setMaxPerPage($limit);
    $pager->init();
    return $pager;
  } 
```

我想做的是：

我的标签是用 get 参数制作的，所以标签就像[http://example.com?filter=tag1%7tag2](http://example.com?filter=tag1%7tag2)等...我将这些标签转换为它们相应的 tagid 并希望将我的结果过滤为只有那些也有这些的东西参数含义：

master_has_tag 是一个仅存储 id 的 n:m 表。

我知道这`$criteria->addOr(MasterHasTagPeer::TAG_ID, $tag->getPrimaryKey());`不是我要找的，因为这给了我所有包含至少一个过滤器的条目

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T15:42:38.783

听起来您想使用`WHERE tag_id IN (1, 2, 3, 4...)`. 但是，我对 Symony 或 Propel 不熟悉，因此您需要找到相应的方法。

If`$tags`是一个 id 数组，您可以使用它[`implode()`](http://php.net/implode)来将这些 id 组合成一个逗号分隔的字符串。

```
$tag_ids = implode(',', $tags); 
```

如果`$tags`是一个对象数组，那么您可以使用它[`array_map()`](http://php.net/array_map)来制作相同的东西。

```
// create an array of tag ids
$tags = array_map(function($tag) {
  return $tag->getPrimaryKey();
}, $tags);

// create a comma-separated string of ids
$tag_ids = implode(',', $tags); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T08:57:07.273

我认为您应该使用多个内部联接创建 MasterQuery，因为您正在寻找具有 n 个标签的 Master：

```
$q = MasterQuery::create();
foreach ($tags as $tag) {
  $q->useMasterHasTagQuery('Tag'.$tag->getId(), 'inner join')
    ->filterByTagId($tag->getId())
  ->endUse()
}
$masters = $q->find(); 
```

有点。

# c# - 根据相机方向改变运动

> ID：12438652
> 
> 赞同：1
> 
> 时间：2012-09-15T15:28:00.307
> 
> 标签：c#, vector, 3d, xna, camera

再会。我正在开发一个 fps 游戏，但我的相机有问题，或者移动价格昂贵......因为它在执行移动时不会考虑相机位置......我试图用几种不同的方式修复它方式，但我想我只是不明白所需的数学:(

无论如何，这是代码：

```
 static public void UpdateCharacterPositionAndCamera(float time)
    {
        //mouse look update
        float rotationSpeed = 3f;
        if (Input.mouseState != Input.mouseStatePrevious)
        {
            float xDifference = Input.mouseState.X - Display.gd.Viewport.Width / 2;
            float yDifference = Input.mouseState.Y - Display.gd.Viewport.Height / 2;
            yRotation -= rotationSpeed * xDifference * time;
            xRotation -= rotationSpeed * yDifference * time;
            Mouse.SetPosition(Display.gd.Viewport.Width / 2, Display.gd.Viewport.Height / 2);
        }

        //camera
        Vector3 cameraPosition = playerPos;
        Vector3 cameraReference = new Vector3(0f, 0f, -1f);
        Matrix rotationMatrix = Matrix.CreateRotationY(MathHelper.ToRadians(yRotation)) * Matrix.CreateRotationX(MathHelper.ToRadians(xRotation));
        Vector3 transformedReference = Vector3.Transform(cameraReference, rotationMatrix);
        Vector3 cameraLookat = cameraPosition + transformedReference;
        viewMatrix = Matrix.CreateLookAt(cameraPosition, cameraLookat, new Vector3(0.0f, 1.0f, 0.0f));
        projectionMatrix = Matrix.CreatePerspectiveFieldOfView(MathHelper.PiOver4, Display.gd.Viewport.AspectRatio, 0.1f, 2500.0f);

        //movement
        float moveSpeed = 5.0f;
        Vector3 moveVector = new Vector3(0, 0, 0);
        if (Input.keyState.IsKeyDown(Keys.Up) || Input.keyState.IsKeyDown(Keys.W))
            moveVector += new Vector3(0, 0, -1);
        if (Input.keyState.IsKeyDown(Keys.Down) || Input.keyState.IsKeyDown(Keys.S))
            moveVector += new Vector3(0, 0, 1);
        if (Input.keyState.IsKeyDown(Keys.Right) || Input.keyState.IsKeyDown(Keys.D))
            moveVector += new Vector3(1, 0, 0);
        if (Input.keyState.IsKeyDown(Keys.Left) || Input.keyState.IsKeyDown(Keys.A))
            moveVector += new Vector3(-1, 0, 0);
        if (Input.keyState.IsKeyDown(Keys.Q))
            moveVector += new Vector3(0, 1, 0);
        if (Input.keyState.IsKeyDown(Keys.Z))
            moveVector += new Vector3(0, -1, 0);
        playerPos += moveVector * moveSpeed;
    } 
```

您能告诉我如何更改移动矢量，以便将相机方向考虑在内...？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T15:40:58.453

将移动向量乘以相机旋转矩阵，或其逆矩阵（我认为是逆矩阵）。它与视图矩阵相同，但没有平移。如果要将相机固定在平面上，则需要在之后将相应的组件归零，并可能对新向量进行归一化。我不熟悉 XNA API，所以我不能确切地告诉你使用哪些方法。您可能能够从视图矩阵中提取旋转矩阵，或者您可能需要查看与原点的差异（lookAt-positios）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T16:11:30.787

aere是我通常的做法：

```
 //movement 
    Matrix camWorld = Matrix.Invert(view);

    Vector3 moveVector = Vector3.Zero;
    ...
    if(...keys.Up... or ...keys.W...)
       moveVector += camWorld.Forward;
    if(... keys.right  or ... keys.D...)
       moveVector += camWorld.Right;
    ...
    moveVector.Normalize();
    PlayerPos += moveVector * moveSpeed; 
```

# c++ - 字符串转换错误：异常还是错误代码？

> ID：12438658
> 
> 赞同：1
> 
> 时间：2012-09-15T15:28:58.603
> 
> 标签：c++, exception, exception-handling

在编写一个函数来在不同编码的字符串之间进行转换（例如从 UTF-8 到 UTF-16），处理错误的最佳方法是什么（例如无效的输入 UTF-8 字节序列）？抛出**异常**或返回**错误代码**（甚至是`bool`）？

```
// Throws a C++ exception on error. 
std::wstring ConvertFromUtf8ToUtf16(const std::string& utf8);

// Returns true on success, false on error.
bool ConvertFromUtf8ToUtf16(std::wstring& utf16, const std::string& utf8); 
```

使用异常，可以进行链式函数调用（当函数返回值用作其他函数/方法的输入时）。

但我不确定在这种情况下使用异常是否好；我在想 Eric Lippert[在他的质量博客文章中](http://blogs.msdn.com/b/ericlippert/archive/2008/09/10/vexing-exceptions.aspx)所说的*令人烦恼的异常*（以及相关`Int32.Parse()/TryParse()`示例）。

例如，如果使用异常，则应强制调用者将函数调用包装在`try/catch`块中以检查无效 UTF-8 输入的大小写：

```
try
{
   wstring utf16 = ConvertFromUtf8ToUtf16(utf8);
}
catch(const Utf8ConversionException& e)
{
   // Bad UTF-8 byte sequence
   ...
} 
```

这对我来说似乎并不理想。

也许最好的办法是只提供*两个*重载（在非抛出重载中实现转换代码，在抛出重载中只调用非抛出版本，并在错误返回代码的情况下抛出异常）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T15:44:59.237

一个指导方针是考虑如果用户*忽略*或*不知道他们应该检查*您返回的错误代码会发生什么。

*   **如果代码理论上可以**在遇到错误时继续运行，则返回错误可能被认为是合理的。正如你提到的，代码看起来更干净。
*   **如果忽略错误可能会导致**以后出现非常糟糕的行为，那么抛出异常可能是一个更好的主意。
*   **第三种可能的选择**在某种程度上平衡了错误代码的简洁性并迫使程序员意识到潜在的错误是使函数需要对错误代码的引用。这在导出的库和不能有效处理异常的（大多数较旧的）编译器中也可以很好地工作。

    `StringConversionResult result; // Could be a "success" bool`

    `wstring utf16 = ConvertFromUtf8ToUtf16(utf8, result);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T15:49:07.623

如果此函数是从库中导出的，请使用返回码。当库和客户端使用不同的 C/C++ 运行时库构建时，从导出的函数中抛出异常可能会使程序崩溃。通常，这是未定义的行为。

对于内部使用，我相信异常是更好的选择。您正在谈论的情况，当调用者不使用 catch 块时，程序会立即崩溃（未处理的异常）。这样会更好，然后在将来的某个时间点继续执行未定义结果的程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T15:52:02.643

只有三个选择。第一个是“用错误代码点替换所有故障”——Unicode 标准提供了几个替换代码点。这在某些情况下很好。二是抛出异常。三是提供错误函数对象，失败时调用。例如，

```
bool fail = false;
std::u16string str = ConvertFromUTF8ToUTF16(utf8, [&] {
    return u16"default";
    // or
    throw std::runtime_error("fail");
    // or
    fail = true;
}); 
```

关键是，在任何情况下，您都不会依赖用户来检查故障——如果他什么都不做，那么要么他的函数不会继续，编译器会哭，要么函数可以继续。

返回错误代码不是一种选择——这很容易出错。

# c++ - Bloodshed Dev-C++ 编译器错误 *二叉树

> ID：12438661
> 
> 赞同：0
> 
> 时间：2012-09-15T15:29:14.473
> 
> 标签：c++, compiler-errors, binary-tree, dev-c++

我想对我的代码提供反馈。这是一个学校的作业，我们被要求编写一个交换左右二叉树的函数。我们的教授给我们上的课是 swapBinaryTrees，剩下的就交给我们了。我收到很多编译器错误，我不确定我的语法哪里出错了。当我像第 14 行预期的 init-declarator '<'token 参考行一样编译它时出现错误

```
void binaryTreeSearch<elemType>::swapSubtreeNodes() 
```

我对第 19 行有同样的错误，即

```
void binaryTreeSearch<elemType>::swapSubtreeNodes(nodeType<elemType> *p) 
```

对于上述两种情况，我还有另一个错误，说期待';' 在'<'令牌之前然后我在我的主函数中得到未声明的标识符

```
binaryTreeSearch<int> tree; 
```

我也在“int”和预期的';'之前得到预期的主要表达 在“int”之前它告诉我没有声明 cout 和 cin 我不知道干草堆在这里发生了什么。我将在下面发布我的整个代码，非常感谢任何帮助。

```
template <class elemType>
struct nodeType
{
       elemType info;
       nodeType<elemType> *lLink;
       nodeType<elemType> *rLink;
};
template <class elemType>
class swapSubtreeNodes
{

};
template <class elemType>
void binaryTreeSearch<elemType>::swapSubtreeNodes()
{
     swapSubtreeNodes(root);
}
template <class elemType>
void binaryTreeSearch<elemType>::swapSubtreeNodes(nodeType<elemType> *p)
{
    root = temp;
    nodeType<elemType> *root;
    nodeType<elemType> *temp;
    if (p == null)
    {
          return;
    }
    else
    {
        swapSubtreeNodes(p->lLink);
        swapSubtreeNodes(p->rLink);                                  
        temp = p->lLink;
        p->lLink = p->rLink;
        p->rLink = temp;
    }
}
int main()
{
    binaryTreeSearch<int> tree;
    int num;
    cout << "This is how we swap'em" << endl;
    cout << "Insert number (press enter after each one entered)." << endl;
    cout << "Enter -999 to complete" << endl;
    tree.insert(0);
    cin >> num;
    while (num != -999)
    {
          tree.insert(num);
          cin >> num;
    }
    cout << "Your swapped binary tree is " << endl;
         tree.swapSubtreeNodes();
         tree.printTree();
         cout << endl;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T15:33:04.393

你没有声明`binaryTreeSearch`类型。因此你不能为它实现成员函数。你的编译器告诉你它不知道你的意思是什么

```
template <class elemType>
void binaryTreeSearch<elemType>::swapSubtreeNodes() 
```

因为`<`它不明白你打算`binaryTreeSearch`成为一个班级。

* * *

当你写的时候你在做什么：

```
template <class elemType>
void binaryTreeSearch<elemType>::swapSubtreeNodes()
{
     swapSubtreeNodes(root);
} 
```

这是; 您正在告诉 C++，您打算实现一个类型的成员函数`swapSubTreeNodes`，该类型的成员函数`int ()()`属于使用一个参数模板化的名称的结构化类型（即 a`class`或 a ）。但是，您的编译器（实际上是任何编译器）都会抱怨，因为没有这种类型。你如何解决这个问题取决于你真正打算做什么。一种选择可能是声明该类型：`struct``binaryTreeSearch`

```
template <class elemType>
class binaryTreeSearch // I really recommend to write types Uppercase!
{
  private:
    nodeType<elemType>* root;
    //                  ^---- that's the variably you are trying to
    //                        access in your original post
  public:
    void swapSubtreeNodes();
    void swapSubtreeNodes(nodeType<elemType>*);
}; 
```

这不会修复所有错误，但可能是您打算做的。您可能还想添加适当的构造函数和析构函数。

# c# - 如何将两个for循环的数据保存在一个数组中？

> ID：12438663
> 
> 赞同：0
> 
> 时间：2012-09-15T15:29:18.117
> 
> 标签：c#, xna

我有两个 for 循环，我想将这些数据保存在一个数组中。第一个 for 循环将在数组中创建 5 个矩形。之后，第二个 for 循环将创建 5 个矩形并将它们添加到数组中。但是有些东西不起作用。我在代码的最后一行收到“索引超出数组范围”错误消​​息，我不知道要更改什么。

```
int framewidth = texture.Width / sourceRects.Length; 
int frameheight = texture.Height; 

private void vorrück(Rectangle[] sourceRects, int framewidth, int frameheight) 
    { 
        int doublelenght = sourceRects.Length * 2; 
        for (int i = 0; i < sourceRects.Length; i++) 
            sourceRects[i] = new Rectangle(i * framewidth, 0, framewidth, frameheight); 
        for (int normallenght = sourceRects.Length; normallenght < doublelenght; normallenght++) 
            sourceRects[normallenght] = new Rectangle((sourceRects.Length - 1 - normallenght) * framewidth, 0, framewidth, frameheight);      
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T15:34:48.670

您会收到此错误，因为 Rectangle[] 数组的大小小于 10。请记住，当您声明 Rectangle[] 数组时，您至少应该将其声明为 10。

```
Rectangle[] sourceRects = new Rectangle[10]; //(it will be from 0 to 9) 
```

然后，您将能够向其添加 10 个矩形。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T15:34:37.290

你需要一个更大的数组。

第二个循环非常清楚地写在边界之外，相关细节是：

```
for (int normallenght = sourceRects.Length; ...; ...) 
        sourceRects[normallenght] = ...;  //  normallenght >= sourceRects.Length 
```

作为一般解决方案，不要过多地使用数组。在这种情况下，a`List<Rectangle>`可能是首选的数据结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T15:45:16.393

您犯了 2 个错误（缺少调整大小和第二个错误）。看我修改后的代码：

```
 private void vorrück(ref Rectangle[] sourceRects, int framewidth, int frameheight)
    {
        int doublelenght = sourceRects.Length * 2;     
        for (int i = 0; i < sourceRects.Length; i++)
        { 
            sourceRects[i] = new Rectangle(i * framewidth, 0, framewidth, frameheight);
        }
        Array.Resize(ref sourceRects, doublelenght); 
        for (int normallenght = sourceRects.Length /2; normallenght < doublelenght; normallenght++)
        {
            sourceRects[normallenght] = new Rectangle((sourceRects.Length - 1 - normallenght) * framewidth, 0, framewidth, frameheight);
        }
    } 
```

此代码将调整大小并填充您的 sourceRects 数组。

您可以像这样使用此代码：

```
 Rectangle[] sourceRects = new Rectangle[2];
        vorrück(ref sourceRects,5,4); 
```

# xcode - iOS6条形码阅读器，使用ZBarSDK，我应该改变吗？

> ID：12438664
> 
> 赞同：3
> 
> 时间：2012-09-15T15:29:29.520
> 
> 标签：xcode, ios6

我在我的应用程序中使用 ZBarSDK 条形码阅读器，但它没有编译为在 arm7s 上运行。

我想知道我是否应该使用不同的库来扫描条形码。

我在使用 ZBarSDK 时遇到了一些问题，例如在某些设备上读取条形码的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T20:21:00.200

我最终支付了 SD 工具包条码扫描仪的费用，因为我不喜欢 ZBar 许可协议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T12:45:03.440

只需删除 ZBarSDK 上的“armv7s”，这将起作用:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-20T08:39:23.220

您可以使用 beta 版本 (1.3.1)，它与优化的 arm7 架构配合得很好。

# sql - 将某个 SQL 查询转换为关系代数

> ID：12438665
> 
> 赞同：2
> 
> 时间：2012-09-15T15:29:30.993
> 
> 标签：sql, database, relational-algebra

只是为我的数据库课程做作业，我只是想仔细检查一下我是否正确地围绕着关系代数。

SQL查询：

```
SELECT dato, SUM(pris*antall) AS total
FROM produkt, ordre
WHERE ordre.varenr = produkt.varenr
GROUP BY dato
HAVING total >= 10000 
```

关系代数：

```
σtotal >= 10000(
  ρR(dato, total)(
    σordre.varenr = produkt.varenr(
      datoℑSUM(pris*antall(produkt x ordre)))) 
```

这是正确的做法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T16:45:05.713

我不知道。其他人也不太可能知道。

RA 课程通常仅限于选择、投影和加入运算符。RA 课程通常不涵盖聚合。RA 甚至没有任何标准方法（据我所知）进行聚合。

您的课程定义的用于对关系进行聚合的运算符是什么？该运算符为其结果生成什么类型​​的值？关系？还有什么？如果还有其他问题，鉴于这些结果值不是关系，但限制仅适用于关系，您的课程如何解释对该结果进行关系限制？

在代数上，这种情况从自然连接开始（produkt x ordre）。

[结果] 这种自然连接受到聚合操作的影响。因此，这种自然连接将出现在您为聚合运算符指定关系输入参数的位置。指定聚合所需的其他规范是输出属性名称（总计），以及计算它们的方式（SUM(...)）。这些可能作为“注释”出现在聚合运算符符号旁边的下标中，就像投影上的属性列表和限制上的限制条件一样。但是关于这个运算符的任何事情都是特定于课程的，因为据我所知，没有任何公认的聚合标准表示法。

然后，如果您的聚合运算符被定义为返回一个关系，您可以将您的聚合结果指定为条件“total>=10000”的限制的输入参数。

# javascript - JavaScript中是否有“使用双加严格”？

> ID：12438673
> 
> 赞同：3
> 
> 时间：2012-09-15T15:30:07.683
> 
> 标签：javascript

我有时拼错变量名。
我想让 JavaScript 中止并说“X 未定义”，而不是将 undefined 的值分配给 X 继续沿着它快乐的方式。

问：有没有什么设置或什么可以让我更清楚地看到我拼错了变量名？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T15:32:11.197

（在 ES5 之外）不是在语言中，而是像[http://www.jslint.com/](http://www.jslint.com/)这样的验证工具会选择它，并且可以在“构建”时运行或集成到您的 IDE 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T15:32:57.640

它被称为[严格模式](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/Strict_mode)（从 ECMAScript 5 开始）。

```
"use strict"; 
```

在当前和所有包含的范围内启用它。

例子：

```
​"use strict";
x = 1;​​​​
>> Uncaught ReferenceError: x is not defined 
```

如果浏览器不支持它，它会简单地忽略“use strict”字符串。只需使用[支持严格模式的浏览器（在表格底部）](http://kangax.github.com/es5-compat-table/)进行开发，以更快地捕获错误。

# three.js - Three.js - 多材质平面

> ID：12438674
> 
> 赞同：5
> 
> 时间：2012-09-15T15:30:27.513
> 
> 标签：three.js, textures, terrain

我试图在一个平面上使用多种材质来制作一个简单的地形编辑器。所以我创建了几个材质，并尝试为平面中的每个顶点分配一个材质索引：

```
var materials = [];
materials.push(new THREE.MeshFaceMaterial( { color: 0xff0000 }));
materials.push(new THREE.MeshFaceMaterial( { color: 0x00ff00 }));
materials.push(new THREE.MeshFaceMaterial( { color: 0x0000ff }));
// Plane
var planegeo = new THREE.PlaneGeometry( 500, 500, 10, 10 );
planegeo.materials = materials;
for(var i = 0; i <  planegeo.faces.length; i++)
{
    planegeo.faces[i].materialIndex = (i%3);
}

planegeo.dynamic = true;
this.plane = THREE.SceneUtils.createMultiMaterialObject(planegeo, materials); 
```

但是我总是在着色器中得到一大堆错误，或者如果我使用`MeshBasicMaterial`而不是`FaceMaterial`. 我究竟做错了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-15T18:12:41.027

要获得具有三种颜色的棋盘图案，请执行以下操作：

```
// geometry
var geometry = new THREE.PlaneGeometry( 500, 500, 10, 10 );

// materials
var materials = [];
materials.push( new THREE.MeshBasicMaterial( { color: 0xff0000 }) );
materials.push( new THREE.MeshBasicMaterial( { color: 0x00ff00 }) );
materials.push( new THREE.MeshBasicMaterial( { color: 0x0000ff }) );

// assign a material to each face (each face is 2 triangles)
var l = geometry.faces.length / 2;
for( var i = 0; i < l; i ++ ) {
    var j = 2 * i;
    geometry.faces[ j ].materialIndex = i % 3;
    geometry.faces[ j + 1 ].materialIndex = i % 3;
}

// mesh
mesh = new THREE.Mesh( geometry, new THREE.MeshFaceMaterial( materials ) );
scene.add( mesh ); 
```

编辑：更新为three.js r.60

# java - 在其类之外获取制表符位置

> ID：12438676
> 
> 赞同：1
> 
> 时间：2012-09-15T15:30:49.853
> 
> 标签：java, android, tabs, actionbarsherlock

我有一个日历应用程序。我正在使用 ActionBarSherlock 和 Tabs。我还在操作栏中实现了选项菜单。我希望操作栏中的一个菜单项在选择选项卡时表现不同。

如何在`onOptionsItemSelected(MenuItem item)`方法中获取选项卡位置，以便可以相应地对菜单项进行编码？

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState); 

    ActionBar bar = getSupportActionBar();
    bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    ActionBar.Tab Tab1 = bar.newTab();
    ActionBar.Tab Tab2 = bar.newTab();

    Tab1.setText("Tab1");
    Tab2.setText("Tab2");

    Tab1.setTabListener(new MyTabListener());
    Tab2.setTabListener(new MyTabListener());

    bar.addTab(Tab1);
    bar.addTab(Tab2);

}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    Intent newActivity;
    // Handle item selection
    switch (item.getItemId()) {
        case android.R.id.home:
            // app icon in action bar clicked; go home
            newActivity = new Intent(this, Main.class);
            newActivity.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            startActivity(newActivity);
        return true;
        case R.id.menu_today_date:
                    //if condition here based on tabs selected
            CalendarFragment frag = new CalendarFragment();
            FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
            ft.replace(android.R.id.content, frag);
            ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
            ft.commit();

            return true;
        case R.id.menu_prefs:
            newActivity = new Intent(this, Settings.class);
            startActivityForResult(newActivity, requestCode);
            return true;
        default:
            return super.onOptionsItemSelected(item);
    }
}

private class MyTabListener implements ActionBar.TabListener
{
    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        if(tab.getPosition()==0)
        {
            CalendarFragment frag = new CalendarFragment();
            ft.replace(android.R.id.content, frag);
        }
        else
        {

            ConverterFragment frag = new ConverterFragment();
            ft.replace(android.R.id.content, frag);
        }
    }
    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        // TODO Auto-generated method stub
    }
    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {
        // TODO Auto-generated method stub
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T16:50:49.033

我无法获得制表符位置，但这就是我最终这样做的方式：

```
private int tabSelected = 0;

@Override
public void onTabSelected(Tab tab, FragmentTransaction ft) {
    if(tab.getPosition()==0)
    {
        tabSelected = 0;
        CalendarFragment frag = new CalendarFragment();
        ft.replace(android.R.id.content, frag);
    }
    else
    {
        tabSelected = 1;
        ConverterFragment frag = new ConverterFragment();
        ft.replace(android.R.id.content, frag);
    }
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    Intent newActivity;
    // Handle item selection
    switch (item.getItemId()) 
        case R.id.menu_today_date:
           FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
           if (tabSelected == 0){
                CalendarFragment frag = new CalendarFragment();
                ft.replace(android.R.id.content, frag);

           }
           else {
                ConverterFragment frag = new ConverterFragment();
                ft.replace(android.R.id.content, frag);
           }

           ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
           ft.commit();

        default:
            return super.onOptionsItemSelected(item);
    }
} 
```

# visual-studio-2010 - 为什么 CSS 编辑器不起作用？

> ID：12438683
> 
> 赞同：0
> 
> 时间：2012-09-15T15:32:37.390
> 
> 标签：visual-studio-2010, visual-studio, css, visual-web-developer-2010, css-editor

几个月前，我将 HTML5/CSS3 更新导入 Visual Web Developer 2010，更新结束后，我无法在 Visual Studio 编辑器中打开 CSS 文件。当我尝试时，我得到了错误：

```
The operation could not be completed. Unspecified error 
```

这是错误的图像：

![错误](../Images/92309d68d049dd57ec1f04d340c76aaa.png)

我已经在 Notepad++ 中成功打开了该文件，但是每次我需要编辑 CSS 或想要调试和切换窗口时，这样做会很麻烦。为什么会这样？我能做些什么呢？我的 CSS 编辑器坏了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T02:06:38.310

事实证明，自从我安装了[Visual Studio 2010 S1 的 Web 标准更新](http://visualstudiogallery.msdn.microsoft.com/a15c3ce9-f58f-42b7-8668-53f6cdc2cd83)后，它就不起作用了。我所要做的就是再次打开安装程序并修复更新。我现在可以再次打开 .css 文件了！

**编辑**

我使用的有用链接：http: [//social.msdn.microsoft.com/Forums/en/vssetup/thread/e505875a-0b74-4d46-987b-e376f958b9bc](http://social.msdn.microsoft.com/Forums/en/vssetup/thread/e505875a-0b74-4d46-987b-e376f958b9bc)

# css - 2 列固定宽度侧边栏，带有未正确对齐的流体内容

> ID：12438684
> 
> 赞同：1
> 
> 时间：2012-09-15T15:32:38.357
> 
> 标签：css, layout, css-float, positioning, sidebar

我在设置 2 列布局时遇到了这个问题，固定侧边栏浮动到右侧。我在内容容器上设置了一个边距，以便在您调整浏览器窗口大小时它会变得流畅。

然而，内容部分实际上是在侧边栏“上方”，因此新内容会将侧边栏推到页面下方。你可以在这里看到我为基本布局设置的[现场演示。](http://byjakewithlove.com/code/stack/2col/)

我知道解决此问题的唯一方法是将侧边栏移动到我的 HTML 标记中的内容上方。但这并不是真正的修复，老实说，我希望我的内容出现在侧边栏之前，因为这就是文档的结构。有没有办法让浮动侧边栏与内容区域在顶部对齐？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T18:32:51.350

看看媒体对象[http://www.stubbornella.org/content/2010/06/25/the-media-object-saves-hundreds-of-lines-of-code/](http://www.stubbornella.org/content/2010/06/25/the-media-object-saves-hundreds-of-lines-of-code/)

演示：[http ://dabblet.com/gist/3729182](http://dabblet.com/gist/3729182)

由于您没有提供列的宽度，我使用了我自己的百分比。一旦它变得太薄，您可以使用媒体查询来清除侧边栏。

# java - java并发实践16.7

> ID：12438687
> 
> 赞同：1
> 
> 时间：2012-09-15T15:32:59.590
> 
> 标签：java, multithreading, concurrency

此代码用于演示双重检查锁定反模式：

```
@NotThreadSafe
public class DoubleCheckedLocking {
    private static Resource resource;

    public static Resource getInstance() {
        if (resource == null) {
            synchronized (DoubleCheckedLocking.class) {
                if (resource == null)
                    resource = new Resource();
            }
        }
        return resource;
    }
} 
```

**我可以通过修改它来避免这个问题：**

```
@NotThreadSafe
public class DoubleCheckedLocking {
    private static Resource resource;

    public static Resource getInstance() {
        if (resource == null) {
            synchronized (DoubleCheckedLocking.class) {
                if (resource == null){
                    Resource r=new Resource();
                    resource = r;
                }
            }
        }
        return resource;
    }
} 
```

据我所知，

```
Resource r=new Resource();
resource = r; 
```

该编译器应该为此提供发生之前的关系。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T15:54:40.290

据我所知，唯一已知的双重检查锁定模式的实现（适用于 JDK5 及更高版本）使用了 'volatile' 关键字。[请参阅使用 Volatile 修复双重检查锁定](http://www.cs.umd.edu/~pugh/java/memoryModel/DoubleCheckedLocking.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T16:35:51.340

```
public static Resource getInstance() {
    if (resource == null) {
        synchronized (DoubleCheckedLocking.class) {
            if (resource == null){
                Resource r=new Resource();
                resource = r;
            }
        }
    }
    return resource;
} 
```

唯一能保证线程之间正确可见性的方法是通过同步（通过、...）创建*同步关系。*`synchronized``volatile`

如果您没有*同步*关系，则不需要一个线程来查看来自其他线程的修改。

在这种情况下，线程可以创建 a`Resource`并将对它的引用存储在`resource`. 然后第二个线程可能会进入`getInstance()`，并查看`resource != null`。第二个线程不能保证看到`resource`'s 构造的所有效果，因为它不与第一个线程*同步。*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-15T18:35:54.700

允许编译器优化：

```
Resource r=new Resource();
resource = r; 
```

到

```
resource=new Resource(); 
```

所以你的调整是无效的。

# javascript - 将绝对路径转换为相对路径

> ID：12438689
> 
> 赞同：17
> 
> 时间：2012-09-15T15:33:18.977
> 
> 标签：javascript, node.js

在 Node 中工作我需要将我的请求路径转换为相对路径，以便我可以将其放入一些具有不同文件夹结构的模板中。

基本上，如果我从路径“/foo/bar”开始，我需要我的相对路径是“..”如果它是“/foo/bar/baz”，我需要它是“../..”

我写了一对函数来做到这一点：

```
function splitPath(path) {
    return path.split('/').map(dots).slice(2).join('/');
}

function dots() {
    return '..';
} 
```

不确定这是否是最好的方法，或者是否可以使用 String.replace 中的正则表达式来做到这一点？

**编辑**

我应该指出，这样我就可以将所有内容呈现为静态 HTML，压缩整个项目，然后将其发送给无法访问 Web 服务器的人。请参阅我的第一条评论。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-09-15T15:53:51.647

如果我理解你的问题是正确的，你可以使用`path.relative(from, to)`

[**文档**](http://nodejs.org/api/path.html#path_path_relative_from_to)

**例子：**

```
var path = require('path');
console.log(path.relative('/foo/bar/baz', '/foo')); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-15T15:53:22.187

Node.js 有用于此目的的本地方法：[path.relative(from, to)](http://nodejs.org/api/path.html#path_path_relative_from_to)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T15:51:30.667

这可能需要一些调整，但它应该可以工作：

```
function getPathRelation(position, basePath, input) {
    var basePathR = basePath.split("/");
    var inputR = input.split("/");
    var output = "";
    for(c=0; c < inputR.length; c++) {
       if(c < position) continue;
       if(basePathR.length <= c) output = "../" + output;
       if(inputR[c] == basePathR[c]) output += inputR[c] + "/";
    }

    return output;
}

var basePath ="/foo"
var position = 2;
var input = "/foo";
console.log(getPathRelation(position,basePath,input));
var input = "/foo/bar";
console.log(getPathRelation(position,basePath,input));
var input = "/foo/bar/baz";
console.log(getPathRelation(position,basePath,input)); 
```

结果：

```
(an empty string)    
../    
../../ 
```

# iphone - 强制 Core Plot plotArea 填充更新

> ID：12438692
> 
> 赞同：-1
> 
> 时间：2012-09-15T15:33:36.923
> 
> 标签：iphone, ios, ipad, core-plot

我正在尝试打开和关闭**Core Plot绘图区域的填充。**当我在应用程序启动时设置填充时，一切正常。第一次切换效果很好。除非旋转显示，否则后续打开或关闭填充的切换不起作用。

```
-(void)layoutGraphPlotAreaFill{
    CPTFill *plotFill=nil;
    if (self.graphPlotAreaHasFill) {
        plotFill=self.graphPlotAreaFill;
    }else{
        plotFill=nil;
    }

    self.graph.plotAreaFrame.plotArea.fill=plotFill;
} 
```

我通过委托方法从设置视图控制器调用上述代码。 *上述方法中的NSLog*语句（已删除）表明该方法正在被调用，`graphPlotAreaHasFill`属性设置正确且`CPTFill`正确。它只是没有更新 plotArea 填充。同样，它只会在旋转显示器后更新。

使用**核心情节 1.0**。

关于如何强制更新填充区域而无需旋转的任何建议？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T16:18:38.933

在这里找到答案： [Calling setNeedsDisplay:YES on layer-hosting view does not redraw the view](https://stackoverflow.com/questions/3647914/calling-setneedsdisplayyes-on-layer-hosting-view-does-not-redraw-the-view)

原来因为填充是一个`CALayer`子类，我可以调用`setNeedsDisplay`它会刷新。更新代码如下：

```
-(void)layoutGraphPlotAreaFill{
    CPTFill *plotFill=nil;
    if (self.graphPlotAreaHasFill) {
       plotFill=self.graphPlotAreaFill;
    }else{
       plotFill=nil;
    }

    self.graph.plotAreaFrame.plotArea.fill=plotFill;
    [self.graph.plotAreaFrame.plotArea setNeedsDisplay];
} 
```

# ios - 新的 Apple SDK 会修补以前的版本吗？

> ID：12438696
> 
> 赞同：1
> 
> 时间：2012-09-15T15:34:44.207
> 
> 标签：ios, iphone, cocoa

新的 iPhone 将很快与新的 iOS 版本一起发布。迟早也会有一个 Xcode 升级与适用于 iOS 6 的 SDK

Apple 是否对以前的 SDK 进行了任何类型的错误修复，或者只是在新版本中解决了错误修复？

例如：带有 iCloud 的 Core Data 仍然存在一些问题，但随着时间的推移它正在变得更好。假设我有一个真正依赖于该组合的应用程序。我需要 iOS6，但并非所有用户都升级手机。理想情况下，如果目标设置为较旧的 iOS 版本，则使用较新 XCode 版本编译的应用程序可以修补以前 SDK 上的一些错误。

我是否应该期望使用未来的 SDK 版本编译的项目能够在运行旧 iOS 版本的设备上更好地工作？是否会向后移植一些 SDK 错误修复？

我知道如果没有客户端上的 iOS 更新，有些错误是无法修复的。此外，向后移植错误修复需要大量工作（而且不太可能）。我只是想知道苹果的正常发布政策是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T15:38:04.123

由于记录了新的常量或函数，新 SDK 可能会在旧 iOS 版本上启用一些新功能，但它不会修复任何问题。

在这一点上，您可以合理地确定永远不会有 iOS 5.2。错误会一直存在，除非它们是安全问题并且 Apple 决定发布安全版本。我怀疑他们会打扰，因为这次升级只放弃了最初的 iPad。

# c++ - C ++动态数组在分配时导致分段错误

> ID：12438700
> 
> 赞同：1
> 
> 时间：2012-09-15T15:35:11.227
> 
> 标签：c++, pointers, segmentation-fault

我正在做一个使用套接字的应用程序，所以我将套接字句柄保存在一个数组中。我有以下代码：

```
while(0 == 0){
    int * tx = (int*)(malloc((nr_con + 2) * sizeof(int)));
    if (conexiuni != NULL)
    {
        syslog(LOG_NOTICE,"Ajung la eliberare %d",nr_con);
        memcpy(&tx[0],&conexiuni[0],(sizeof(int) * (nr_con)));
        syslog(LOG_NOTICE,"Ajung la eliberare %d",nr_con);
        free(conexiuni);
    }
    conexiuni = tx;

    syslog(LOG_NOTICE,"Ajung la mama %d",nr_con);
    //The line bellow causes a segfault at second connection
    if ((conexiuni[nr_con] = accept(hsock,(sockaddr*)(&sadr),&addr_size)) != -1)
    {
        nr_con++;
        syslog(LOG_NOTICE,"Primesc de la %s",inet_ntoa(sadr.sin_addr));
        syslog(LOG_NOTICE,"kkt %d",conexiuni[nr_con - 1]);
        int * sz = (int*)malloc(sizeof(int));
        *sz = conexiuni[nr_con - 1];
        syslog(LOG_NOTICE,"after %d",*sz);
        pthread_create(&tidi,0,&ConexiuniHandler, sz);
    }
} 
```

当我分配数组时第二次连接时，程序崩溃。我究竟做错了什么？我在 Windows 上尝试了相同的代码，它运行良好，但在 Linux 上它崩溃了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T15:40:51.483

使用[`std::vector`](https://en.cppreference.com/w/cpp/container/vector).

> 封装动态大小数组的序列容器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T16:27:51.350

我假设您想要做的是拥有一个接受连接的服务器，然后当连接被接受时，您启动一​​个线程来处理该连接请求。因此，每次您执行接受时，您都希望启动一个线程并为其提供套接字句柄。您还要跟上数组中的所有套接字句柄，当您接受新的连接请求时，该句柄会动态增加。

以下是建议的方法。我没有做任何测试，也没有编译这个代码段，但它是一个开始的地方。我正在做的一件事是每次调整数组大小时，将套接字句柄数组增加 16 个块。我这样做是因为它可以使内存管理器的工作更容易一些，并通过减少对`malloc()`.

```
int nr_con = 0;      // we start off with no connections
int block_con = 16;  // number of blocks to allocate each time we increase the array
SOCKET  *conexiuni = malloc ((nr_con + block_con) * sizeof(SOCKET));
while(1) {
    syslog (LOG_NOTICE, "Ajung la mama %d", nr_con);

    // wait for a connection request to come in.  if it does, log the request
    // then create a thread to handle the request providing the socket to the thread.
    // we are keeping an array of the sockets that is dynamically increased so
    // we will allocate blocks of 16 at a time as we lengthen the array.
    if ((conexiuni[nr_con] = accept (hsock, (sockaddr*)(&sadr), &addr_size)) != -1)
    {
        block_con--;
        if (block_con < 1) {
        {
            // so lets add another block to our array by allocating the memory
            // then copying the current array to the new memory area then freeing
            // the old memory area which is no longer needed.
            block_con = 16;
            SOCKET *pTemp = malloc(nr_con + block_con) * sizeof(SOCKET));
            syslog (LOG_NOTICE, "Ajung la eliberare %d", nr_con);
            memcpy (pTemp, conexiuni, (sizeof(SOCKET) * (nr_con + 1)));
            syslog (LOG_NOTICE, "Ajung la eliberare %d", nr_con);
            free (conexiuni);
            conexiuni = pTemp;
        }
        syslog (LOG_NOTICE, "Primesc de la %s", inet_ntoa(sadr.sin_addr));
        syslog (LOG_NOTICE, "kkt %d", conexiuni[nr_con]);

        SOCKET  *sz = conexiumi + nr_con;
        syslog (LOG_NOTICE, "after %d", *sz);

        // start the thread which is to service this connection request.
        pthread_create (&tidi, 0, &ConexiuniHandler, sz);
        nr_con++;
    }
} 
```

但是，这样的事情有一些问题。`malloc()`首先，在上面的示例中，由于无法提供内存请求，我没有处理内存不足错误应该返回 NULL 指针。

第二个问题是在动态扩展数组之前线程可能不会访问指向套接字的指针，从而导致提供的指针无效，因为它在动态重新分配期间被释放。因此，如果您有很多连接很快进入，这可能是一个问题。至少，线程应该做的第一件事是制作套接字句柄的本地副本。

另一个问题是您将如何返回数组以确定哪些套接字仍然有效且打开，哪些套接字在连接关闭时是陈旧的。您是否只是在连接请求进入时动态分配空间，直到服务器启动并运行几天后内存不足？

而不是使用 int，你真的应该使用 SOCKET，因为它是实际的数据类型。我意识到在大多数情况下，SOCKET 实际上是一个 int，但是在这些问题上通常最好是精确的。

# android - 无法保存我的图片

> ID：12438704
> 
> 赞同：-3
> 
> 时间：2012-09-15T15:35:44.363
> 
> 标签：android, bitmap

我想保存我绘制的图像，但总是报告失败：

```
09-12 07:30:34.346: E / Panel (8003): IOEception
09-12 07:30:34.346: E / Panel (8003): java.io.IOException: Parent directory of file does not exist: / sdcard/anppp/2012Sep1273034.png
09-12 07:30:34.346: E / Panel (8003): at java.io.File.createNewFile (File.java: 1263)
09-12 07:30:34.346: E / Panel (8003): at aa.bb.cc.Panel.saveapp (Panel.java: 67)
09-12 07:30:34.346: E / Panel (8003): at aa.bb.cc.AndroidPaint.onOptionsItemSelected (AndroidPaint.java: 94)
09-12 07:30:34.346: E / Panel (8003): at android.app.Activity.onMenuItemSelected (Activity.java: 2170)
09-12 07:30:34.346: E / Panel (8003): at com.android.internal.policy.impl.PhoneWindow.onMenuItemSelected (PhoneWindow.java: 730)
09-12 07:30:34.346: E / Panel (8003): at com.android.internal.view.menu.MenuItemImpl.invoke (MenuItemImpl.java: 139)
09-12 07:30:34.346: E / Panel (8003): at com.android.internal.view.menu.MenuBuilder.performItemAction (MenuBuilder.java: 855)
09-12 07:30:34.346: E / Panel (8003): at com.android.internal.view.menu.ExpandedMenuView.invokeItem (ExpandedMenuView.java: 89)
09-12 07:30:34.346: E / Panel (8003): at com.android.internal.view.menu.ExpandedMenuView.onItemClick (ExpandedMenuView.java: 93)
09-12 07:30:34.346: E / Panel (8003): at android.widget.AdapterView.performItemClick (AdapterView.java: 284)
09-12 07:30:34.346: E / Panel (8003): at android.widget.ListView.performItemClick (ListView.java: 3285)
09-12 07:30:34.346: E / Panel (8003): at android.widget.AbsListView $ PerformClick.run (AbsListView.java: 1640)
09-12 07:30:34.346: E / Panel (8003): at android.os.Handler.handleCallback (Handler.java: 587)
09-12 07:30:34.346: E / Panel (8003): at android.os.Handler.dispatchMessage (Handler.java: 92)
09-12 07:30:34.346: E / Panel (8003): at android.os.Looper.loop (Looper.java: 123)
09-12 07:30:34.346: E / Panel (8003): at android.app.ActivityThread.main (ActivityThread.java: 4363)
09-12 07:30:34.346: E / Panel (8003): at java.lang.reflect.Method.invokeNative (Native Method)
09-12 07:30:34.346: E / Panel (8003): at java.lang.reflect.Method.invoke (Method.java: 521)
09-12 07:30:34.346: E / Panel (8003): at com.android.internal.os.ZygoteInit $ MethodAndArgsCaller.run (ZygoteInit.java: 860)
09-12 07:30:34.346: E / Panel (8003): at com.android.internal.os.ZygoteInit.main (ZygoteInit.java: 618)
09-12 07:30:34.346: E / Panel (8003): at dalvik.system.NativeStart.main (Native Method) 
```

我的代码：

```
private Bitmap mBitmap;
private Canvas mCanvas;
private Bitmap tmpBitmap;
private Canvas tmpCanvas;
private DrawHandler mDrawHandler;
private Canvas tCanvas;
private String mImagePath = Environment.getExternalStorageDirectory() + "/anppp";
private File file;

public void saveapp() {

    Calendar currentDate = Calendar.getInstance();
    SimpleDateFormat formatter= new SimpleDateFormat("yyyyMMMddHmmss");
    String dateNow = formatter.format(currentDate.getTime());
    file = new File(mImagePath + "/" + dateNow +".png");
    FileOutputStream fos;
    try {
        file.createNewFile();
        fos = new FileOutputStream(file);
        tmpBitmap.compress(Bitmap.CompressFormat.PNG, 100, fos);
        fos.close();
        } catch (FileNotFoundException e) {
        Log.e("Panel", "FileNotFoundException", e);
    }
    catch (IOException e) {
        Log.e("Panel", "IOEception", e);
    }
} 
```

就是这样..我不知道可能出了什么问题；（

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T15:44:14.900

我认为您的 SD 卡中没有名为 anppp 的文件夹。所以我建议你首先使用

```
File dirPath = new File(Environment.getExternalStorageDirectory().toString() + "/anppp");
dirPath.mkdirs(); 
```

现在执行您正在执行的任务。希望这可以帮助你

# iphone - 使用 segues 返回 viewController

> ID：12438705
> 
> 赞同：0
> 
> 时间：2012-09-15T15:35:52.623
> 
> 标签：iphone, objective-c, cocoa-touch, xcode4.2

这是我的层次结构

```
Navigation Controller  --> Login Controller View --- > Register Controller View
                       --> My Small Internal LeaderBoard View 
```

现在我习惯`segues (Push)`去`LoginControllerView`或者`LeaderBoardView`

一旦我打开`LoginControllerView`，然后`RegisterControllerView`我正在使用此代码

```
[self dismissViewControllerAnimated:YES completion:nil] 
```

然而，不是让`LoginControllerView`我回到它，而是让我回到`NavigationController`.

我怎样才能回到我的`LoginController`

我正在通过 PUSH segue 从 Login 过渡到 Register，并且我已将 segue 命名为“Register”

从登录到 RegisterController 我正在使用此代码

```
[self PerformSegueWithIdentifier:@"Register" sender:Self] 
```

但是，我可以从`RegisterView`连接检查器中看到它的 viewController 引用 StoryBoard Segue 是“Login”。我正在从 Login 过渡到使用`Register`Segue 注册，我的 RegisterController 如何将`Login`segue 作为参考？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T16:04:02.687

你没有说`RegisterControllerView`是如何呈现的。如果它被推送到导航控制器堆栈上，那么为什么不调用：

```
[self.navigationController popViewControllerAnimated:YES]; 
```

如果你正在做一些特别的事情，那么你需要说出你在做什么特别的事情。

另外，请注意，如果您发现视图控制器试图关闭自己的位置，那么您至少应该重新审视您的设计，看看这是否真的是最好的做法。视图控制器可能不知道它是如何呈现的，因此它也可能不知道关闭自己的最佳方式。

# javascript - 使用 Google Maps API 绘制文本位置的地图，而不是坐标

> ID：12438718
> 
> 赞同：0
> 
> 时间：2012-09-15T15:38:24.180
> 
> 标签：javascript, google-maps, google-maps-api-3, google-maps-markers

我知道如何将坐标传递给谷歌地图，如下所示：

```
var locations = [
  ['Bondi Beach', -33.890542, 151.274856, 4],
  ['Coogee Beach', -33.923036, 151.259052, 5],
  ['Cronulla Beach', -34.028249, 151.157507, 3],
  ['Manly Beach', -33.80010128657071, 151.28747820854187, 2],
  ['Maroubra Beach', -33.950198, 151.259302, 1]
]; 
```

我很想知道你是否必须有坐标。我有一个网站，有数百名进入自己城市的用户。我可以在不运行脚本为每个用户生成坐标的情况下映射这些用户吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T15:50:32.007

将地名映射到坐标的过程称为地理编码。有一个[可用的 Google 地理编码 API](https://developers.google.com/maps/documentation/geocoding/)。您还可以为您的城市名称动态调用此 API 以获取坐标 - 或者您运行后台脚本来一次查找您的城市的所有地理坐标。这两个选项都是可能的，几乎不需要更改其余的映射代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T15:51:03.037

该地图仅适用于经纬度设置中心或制造商，但您可以使用[**地理编码服务**](https://google-developers.appspot.com/maps/documentation/javascript/examples/geocoding-simple)来转换地名，并最终保存坐标。[**文档在这里。**](https://developers.google.com/maps/documentation/javascript/reference#Geocoder)

# xml - xml 属性到元素

> ID：12438719
> 
> 赞同：0
> 
> 时间：2012-09-15T15:38:26.553
> 
> 标签：xml, xslt

我有以下输入xml：

```
 <?xml version='1.0' encoding='UTF-8'?>
    <fde-request xmlns="http://xml-schemas.xxx.com/bb/xxx.xsd"
        xmlns:cbe="http://xml-schemas.xxx.com/bb/xxx.xsd"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://xml-schemas.xxx.com/bb/xxx.xsd xxx.xsd">

        <cbe:request-header
        user-id="mde"
        session-token="433"
        audit-id="9999"
        pearl-code="ca"
        interface-id="mf"
        system-name="sr"
        function-code="image"
        />

    <fde-parms
      function-code='b'
      sccf-serial='042463452400'
      type-process='H'>
    </fde-parms>
    </fde-request> 
```

我需要通过将属性复制到新元素值来获取以下输出 xml：

```
 <?xml version='1.0' encoding='UTF-8'?>
    <fde-request xmlns="http://xml-schemas.xxx.com/bb/xxx.xsd"
        xmlns:cbe="http://xml-schemas.xxx.com/bb/xxx.xsd"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://xml-schemas.xxx.com/bb/xxx.xsd xxx.xsd">

         <REQUEST-HEADER>
      <REQUEST-ID>mde</REQUEST-ID>
      <REQUEST-PEACODE>ca</REQUEST-PEACODE>
       </REQUEST-HEADER> 

    <fde-parms
      function-code='b'
      sccf-serial='042463452400'
      type-process='H'>
    </fde-parms>
    </fde-request> 
```

但是：我正在使用以下 xslt 获取此输出 xml：

```
 <xsl:template match="@*|node()">
      <xsl:copy>
        <xsl:apply-templates />
      </xsl:copy>
    </xsl:template>
        <xsl:template match="*[local-name(.)='request-header']">
        <xsl:variable name="sysname" select="@system-name"/>
        <xsl:variable name="peacode" select="@pearl-code"/>

    <REQUEST-HEADER>
    <REQUEST-ID><xsl:value-of select="$sysname"/></REQUEST-ID>
    <REQUEST-PEACODE><xsl:value-of select="$peacode"/></REQUEST-PEACODE>
    </REQUEST-HEADER>   
        </xsl:template> 
    </xsl:stylesheet> 
```

这会产生错误的输出：`xmlns=""`正在填充，这不是我想要的。

```
 <?xml version='1.0' encoding='UTF-8'?>
    <fde-request xmlns="http://xml-schemas.xxx.com/bb/xxx.xsd"
        xmlns:cbe="http://xml-schemas.xxx.com/bb/xxx.xsd"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://xml-schemas.xxx.com/bb/xxx.xsd xxx.xsd">

         <REQUEST-HEADER **xmlns=""**>
      <REQUEST-ID>mde</REQUEST-ID>
      <REQUEST-PEACODE>ca</REQUEST-PEACODE>
       </REQUEST-HEADER> 

    <fde-parms
      function-code='b'
      sccf-serial='042463452400'
      type-process='H'>
    </fde-parms>
    </fde-request> 
```

我需要删除这个不必要的空命名空间。
您将如何修改 xslt 以产生正确的输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T18:42:12.013

在 XSLT 1.0 中（我假设您正在使用它；您的示例样式表缺少开始标记），也`xsl:copy`总是[复制](http://www.w3.org/TR/xslt#copying)所有命名空间节点。

如果要避免复制命名空间，则需要使用[`xsl:element`](http://www.w3.org/TR/xslt#section-Creating-Elements-with-xsl%3aelement). 它的`namespace`属性是可选的。

# image - Youtube 图像在 Firefox 中被破坏

> ID：12438720
> 
> 赞同：0
> 
> 时间：2012-09-15T15:38:33.517
> 
> 标签：image, firefox, youtube

Youtube 图像在 Firefox 中损坏。当我使用 Web 开发人员扩展重新加载图像时，它们会短暂出现几秒钟，然后再次变为空白。视频工作正常，但许多按钮显示它们的 alt 属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T15:52:08.633

您是否尝试过清除浏览器的缓存/临时文件？

# javascript - 谷歌代码美化不会显示图像

> ID：12438723
> 
> 赞同：1
> 
> 时间：2012-09-15T15:39:07.263
> 
> 标签：javascript, html, prettify

我按照 google preffify 的说明进行操作，我得到的只是页面上一个没有任何内容的框。我哪里做错了？我得到 200 的费用。

```
 <link href="static/js/google-code-prettify/prettify.css" type="text/css" rel="stylesheet" />
<script type="text/javascript" src="static/js/google-code-prettify/prettify.js"></script>

<body onload="prettyPrint()">

        <pre class="prettyprint"><code class="language-html">
            <img src="http://cm.g.doubleclick.net/pixel?google_nid=tt&google_cm&avid=9000&tag=alaska&campaign_id=8002" /> 
        </code></pre>

        <pre class=prettyprint>
            <img src='http://cm.g.doubleclick.net/pixel?google_nid=tt&google_cm&avid=9000&tag=alaska&campaign_id=8002' /> 
        </pre>

</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T15:47:18.267

如果您期望`<img>`标签被美化，那是行不通的；浏览器将解释它们。

尝试逃避`<`等：

```
&lt;img src="http://cm.g.doubleclick.net/pixel?google_nid=tt&google_cm&avid=9000&tag=alaska&campaign_id=8002" /&gt; 
```

*编辑*——但是，该工具似乎没有 HTML 模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T15:52:35.813

转义“<”和“>”将使其工作

```
 <pre class="prettyprint"><code class="language-html">
        &lt;img src="http://cm.g.doubleclick.net/pixel?google_nid=tt&google_cm&avid=9000&tag=alaska&campaign_id=8002" /&gt;
    </code></pre>

    <pre class=prettyprint>
        &lt;img src='http://cm.g.doubleclick.net/pixel?google_nid=tt&google_cm&avid=9000&tag=alaska&campaign_id=8002' /&gt;
    </pre> 
```

# c - 分析数字处理代码：28% 的时间在 fegetexcept() 和最佳编译器标志中？

> ID：12438726
> 
> 赞同：3
> 
> 时间：2012-09-15T15:39:15.997
> 
> 标签：c, gcc, floating-point, profiling, clang

我正在运行涉及大量浮点数运算的 DNA 链模拟。完整代码在这里：[https ://github.com/RoaldFre/DNA](https://github.com/RoaldFre/DNA)

在使用 gcc 和 clang 编译后，我使用**google-perftools进行了一些分析。**在这两种情况下，google-perftools 都表示大约 28% 的时间花在了 fegetexcept() 中。这似乎是 C 库的一个函数，用于查询 CPU 的浮点异常标志。

请注意，我将 -ffast-math 与 gcc 一起使用，如果我没记错的话，它应该忽略（全部？）浮点异常！我也在使用 -O4 和 clang（是否有单独的标志来启用不安全的浮点指令？）。

**使用 clang 编译的二进制文件的分析输出：**

```
Total: 1561 samples
     438  28.1%  28.1%      438  28.1% fegetexcept
     263  16.8%  44.9%      263  16.8% cos
     224  14.3%  59.3%      224  14.3% Vdihedral
     131   8.4%  67.6%      131   8.4% nearestImageVector
     102   6.5%  74.2%      102   6.5% Fexclusion
      70   4.5%  78.7%       70   4.5% Fdihedral
      65   4.2%  82.8%       65   4.2% Fangle
      53   3.4%  86.2%       53   3.4% integratorTaskTick
      46   2.9%  89.2%       46   2.9% nearestImageDistance
      45   2.9%  92.1%       45   2.9% mutiallyExclusivePairForces
      32   2.0%  94.1%       32   2.0% FCoulomb
      24   1.5%  95.6%       24   1.5% forEveryPairD
      17   1.1%  96.7%       17   1.1% calculateForces
      14   0.9%  97.6%       14   0.9% atan2
       8   0.5%  98.1%        8   0.5% Fstack
       8   0.5%  98.7%        8   0.5% pairWrapper
       6   0.4%  99.0%        6   0.4% sin
       3   0.2%  99.2%        3   0.2% __finite
       3   0.2%  99.4%        3   0.2% _init
       2   0.1%  99.6%        2   0.1% acos
       2   0.1%  99.7%        2   0.1% exp
       2   0.1%  99.8%        2   0.1% log
       1   0.1%  99.9%        1   0.1% _IO_file_xsputn
       1   0.1%  99.9%        1   0.1% log2
       1   0.1% 100.0%        1   0.1% significand 
```

**使用 gcc 编译的二进制文件的分析输出：**

```
Total: 1561 samples
     438  28.1%  28.1%      438  28.1% fegetexcept
     352  22.5%  50.6%      352  22.5% nearestImageVector (inline)
     263  16.8%  67.5%      263  16.8% cos
     131   8.4%  75.8%      131   8.4% measurementTask
      52   3.3%  79.2%      331  21.2% Vbond.isra.1.part.2 (inline)
      50   3.2%  82.4%      562  36.0% dumpStatsSample.2372 (inline)
      46   2.9%  85.3%       46   2.9% nearestImageVector
      42   2.7%  88.0%       42   2.7% FdihedralParticle (inline)
      33   2.1%  90.1%       59   3.8% Vstack.isra.12.part.13 (inline)
      26   1.7%  91.8%       26   1.7% neighbourStackDistance2 (inline)
      16   1.0%  92.8%       16   1.0% die
      14   0.9%  93.7%       44   2.8% VangleP5SB (inline)
      14   0.9%  94.6%       14   0.9% atan2
      13   0.8%  95.5%       88   5.6% Vangle.isra.4.part.5 (inline)
      12   0.8%  96.2%      343  22.0% Vbond.isra.1 (inline)
       8   0.5%  96.7%        8   0.5% printUsage.3788
       6   0.4%  97.1%        6   0.4% Fangle.part.8 (inline)
       6   0.4%  97.5%        6   0.4% boxFromParticle (inline)
       6   0.4%  97.9%      279  17.9% nearestImageDistance (inline)
       6   0.4%  98.3%        6   0.4% sin
       3   0.2%  98.5%        3   0.2% Vdihedral.isra.9 (inline)
       3   0.2%  98.7%        3   0.2% __finite
       3   0.2%  98.8%        3   0.2% _init
       3   0.2%  99.0%        3   0.2% numParticles (inline)
       2   0.1%  99.2%        2   0.1% acos
       2   0.1%  99.3%        8   0.5% addToGrid
       2   0.1%  99.4%        2   0.1% exp
       2   0.1%  99.6%        2   0.1% getAngleBaseInfo (inline)
       2   0.1%  99.7%        2   0.1% log
       1   0.1%  99.7%        1   0.1% Fbond.part.6 (inline)
       1   0.1%  99.8%        1   0.1% _IO_file_xsputn
       1   0.1%  99.9%      563  36.1% dumpStatsSample.2372
       1   0.1%  99.9%        1   0.1% log2
       1   0.1% 100.0%        1   0.1% significand
       0   0.0% 100.0%        6   0.4% Fangle (inline)
       0   0.0% 100.0%        1   0.1% Fbond (inline)
       0   0.0% 100.0%       42   2.7% Fdihedral.part.11 (inline)
       0   0.0% 100.0%        4   0.3% Fstack.part.14 (inline)
       0   0.0% 100.0%       53   3.4% calculateForces.2880
       0   0.0% 100.0%        3   0.2% getKineticTemperature (inline)
       0   0.0% 100.0%        4   0.3% nearestImageDistance2 (inline) 
```

现在，我通过函数指针调用了相当多的函数，而 gcc 正在使用 lto 和 -O4 进行编译。我有理由相信这可能会导致 gcc 二进制文件的分析输出有些侥幸。例如，它说“die()”中有 16 个样本。但是，这是不可能的，因为该功能会立即停止程序！

无论哪种方式，两个二进制文件似乎都同意**在 fegetexcept() 中花费 28% 的时间。我可以摆脱所有这些检查吗？**

**其次**，我的完整编译器优化标志如下：

`gcc -march=core2 -O4 -flto -mmmx -msse -msse2 -msse3 -fexcess-precision=fast -ffast-math -finline-limit=2000 -fmerge-all-constants -fmodulo-sched -fmodulo-sched-allow-regmoves -fgcse-sm -fgcse-las -fgcse-after-reload -funsafe-loop-optimizations`

和

`clang -march=core2 -O4`

我可以添加一些东西来进一步提高性能吗？我不在乎编译时间是否飞快，我需要我能得到的每一点性能！（关于clang：我在那里找不到很多具体的性能标志，也许我应该手动去llvm字节码，然后给那里的llvm编译器标志？）

**TL;DR:**
(1) 代码在 fegetexcept() 中花费了 28% 的时间。可以通过选择“不安全的浮点代码”来避免这种情况吗？
(2) 我可以将哪些标志传递给 gcc 和 clang 以获得最大性能——即使这会发送编译时间通过屋顶？

# 编辑

我将 glibc 从 2.13-r2 更新到 2.15-r2，现在分析输出更改为：

铛：

```
Total: 1654 samples
     381  23.0%  23.0%      381  23.0% __asin_finite
     244  14.8%  37.8%      244  14.8% significand
     203  12.3%  50.1%      203  12.3% Vdihedral
     141   8.5%  58.6%      141   8.5% nearestImageVector
     116   7.0%  65.6%      116   7.0% Fexclusion
      81   4.9%  70.5%       81   4.9% integratorTaskTick
      70   4.2%  74.7%       70   4.2% Fangle
      63   3.8%  78.5%       63   3.8% FdihedralParticle
      56   3.4%  81.9%       56   3.4% mutiallyExclusivePairForces
      45   2.7%  84.6%       45   2.7% FCoulomb
      42   2.5%  87.2%       42   2.5% _init
      39   2.4%  89.5%       39   2.4% __isinf
      35   2.1%  91.7%       35   2.1% nearestImageDistance
      29   1.8%  93.4%       29   1.8% __lgamma_r_finite
      21   1.3%  94.7%       21   1.3% forEveryPairD
      16   1.0%  95.6%       16   1.0% Fbond
      13   0.8%  96.4%       13   0.8% __isnan
      11   0.7%  97.1%       11   0.7% __cosh_finite
      10   0.6%  97.7%       10   0.6% Fstack
      10   0.6%  98.3%       10   0.6% __acosh_finite
       9   0.5%  98.9%        9   0.5% pairWrapper
       6   0.4%  99.2%        6   0.4% atan2
       5   0.3%  99.5%        5   0.3% Fdihedral
       5   0.3%  99.8%        5   0.3% calculateForces
       2   0.1%  99.9%        2   0.1% GLIBC_2.15
       1   0.1% 100.0%        1   0.1% exp 
```

海湾合作委员会：

```
Total: 1768 samples
     385  21.8%  21.8%      385  21.8% __asin_finite
     275  15.6%  37.3%      275  15.6% significand
     252  14.3%  51.6%      252  14.3% nearestImageVector
     199  11.3%  62.8%      299  16.9% Vdihedral.isra.4.part.5.2808
      55   3.1%  66.0%      902  51.0% FdihedralParticle.2836
      47   2.7%  68.6%      150   8.5% Fexclusion.part.15 (inline)
      44   2.5%  71.1%       87   4.9% FCoulomb.part.16.2891
      36   2.0%  73.1%       36   2.0% _init
      33   1.9%  75.0%      236  13.3% mutiallyExclusivePairForces.2699
      30   1.7%  76.7%       30   1.7% __lgamma_r_finite
      29   1.6%  78.3%       29   1.6% isSaneNumber (inline)
      28   1.6%  79.9%       28   1.6% feelExclusion (inline)
      27   1.5%  81.4%       27   1.5% __isinf
      25   1.4%  82.9%       35   2.0% Fangle.part.11.2855
      22   1.2%  84.1%       40   2.3% Fangle.part.11 (inline)
      22   1.2%  85.4%       24   1.4% randNorm.part.1.3194
      20   1.1%  86.5%       20   1.1% __isnan
      19   1.1%  87.6%       23   1.3% nearestImageUnitVector (inline)
      19   1.1%  88.6%       19   1.1% pairWrapper.3570
      18   1.0%  89.6%      105   5.9% langevinBBKhelper.3161
      17   1.0%  90.6%       23   1.3% Fbond.part.10 (inline)
      15   0.8%  91.5%       20   1.1% Vdihedral.isra.4.part.5 (inline)
      14   0.8%  92.3%       14   0.8% length (inline)
      13   0.7%  93.0%       13   0.7% getBasePairInfo (inline)
      12   0.7%  93.7%      190  10.7% Fexclusion (inline)
      12   0.7%  94.3%       15   0.8% Fstack.part.13 (inline)
      12   0.7%  95.0%       12   0.7% __acosh_finite
      12   0.7%  95.7%       12   0.7% reboxParticles (inline)
       9   0.5%  96.2%       23   1.3% randNorm (inline)
       8   0.5%  96.7%        8   0.5% __cosh_finite
       8   0.5%  97.1%      221  12.5% visitNeighbours.part.1 (inline)
       7   0.4%  97.5%      360  20.4% forEveryPairD
       7   0.4%  97.9%        7   0.4% sincos
       6   0.3%  98.2%     1467  83.0% calculateForces
       5   0.3%  98.5%      943  53.3% Fdihedral.part.12 (inline)
       4   0.2%  98.8%       33   1.9% debugVectorSanity (inline)
       4   0.2%  99.0%       19   1.1% nearestImageDistance (inline)
       3   0.2%  99.2%      317  17.9% Vdihedral.isra.4 (inline)
       3   0.2%  99.3%        3   0.2% getAngleBaseInfo (inline)
       2   0.1%  99.4%        2   0.1% resetForce.2703
       2   0.1%  99.5%        2   0.1% tinymt64_generate_doubleOC (inline)
       2   0.1%  99.7%      223  12.6% visitNeighbours (inline)
       1   0.1%  99.7%       94   5.3% Fangle (inline)
       1   0.1%  99.8%        1   0.1% calcInvDebyeLength (inline)
       1   0.1%  99.8%        1   0.1% forEveryParticle
       1   0.1%  99.9%      131   7.4% forEveryParticleD
       1   0.1%  99.9%        1   0.1% munmap
       1   0.1% 100.0%        1   0.1% neighbourStackDistance2 (inline)
       0   0.0% 100.0%        1   0.1% 0x3e1341e250d56f1d
       0   0.0% 100.0%       23   1.3% Fbond (inline)
       0   0.0% 100.0%     1690  95.6% __libc_start_main
       0   0.0% 100.0%      380  21.5% forEveryPair (inline)
       0   0.0% 100.0%     1689  95.5% integratorTaskTick.3198
       0   0.0% 100.0%     1690  95.6% main
       0   0.0% 100.0%     1690  95.6% run (inline)
       0   0.0% 100.0%     1689  95.5% seqTick.2114
       0   0.0% 100.0%        1   0.1% taskStop (inline)
       0   0.0% 100.0%     1689  95.5% taskTick (inline) 
```

所以看起来 fegetexcept 可能只是一个错误的名称，它被 glibc 数学例程中的一些代码识别出来。我想这是 google-perftools 的缺点？

不过，我的问题的第 (2) 部分仍然存在：我可以将哪些标志传递给 gcc 和 clang 以获得最佳性能——即使这会使编译时间飞速发展？

# 编辑2

使用“perf”（例如参见[https://stackoverflow.com/a/10958510/153105](https://stackoverflow.com/a/10958510/153105)）可以提供不错的分析输出。貌似大部分时间都花在了atan2()和cos()上，使用的是sse2版本。为了完整起见，我将添加输出：

```
# Events: 17K cycles
#
# Overhead  Command         Shared Object                                                   Symbol
# ........  .......  ....................  .......................................................
#
    21.67%  hairpin  libm-2.15.so          [.] __ieee754_atan2_sse2                               
    14.12%  hairpin  hairpin               [.] nearestImageVector                                 
    13.94%  hairpin  libm-2.15.so          [.] __cos_sse2                                         
    11.94%  hairpin  hairpin               [.] Vdihedral.isra.4.part.5.2808                       
     8.27%  hairpin  hairpin               [.] mutiallyExclusivePairForces.2699                   
     4.81%  hairpin  hairpin               [.] calculateForces                                    
     4.45%  hairpin  hairpin               [.] FdihedralParticle.2836                             
     3.89%  hairpin  hairpin               [.] FCoulomb.part.16.2891                              
     2.17%  hairpin  hairpin               [.] langevinBBKhelper.3161                             
     1.85%  hairpin  hairpin               [.] Fangle.part.11.2855                                
     1.83%  hairpin  libc-2.15.so          [.] __isinf                                            
     1.64%  hairpin  hairpin               [.] randNorm.part.1.3194                               
     1.45%  hairpin  libm-2.15.so          [.] __ieee754_log_sse2                                 
     1.02%  hairpin  hairpin               [.] forEveryPairD                                      
     0.93%  hairpin  libm-2.15.so          [.] __ieee754_acos_sse2                                
     0.76%  hairpin  hairpin               [.] pairWrapper.3570                                   
     0.76%  hairpin  hairpin               [.] __isnan@plt                                        
     0.74%  hairpin  libc-2.15.so          [.] __isnan                                            
     0.68%  hairpin  hairpin               [.] __isinf@plt                                        
     0.59%  hairpin  libm-2.15.so          [.] __ieee754_exp_sse2                                 
     0.58%  hairpin  libm-2.15.so          [.] __sincos                                           
     0.55%  hairpin  hairpin               [.] integratorTaskTick.3198                            
     0.29%  hairpin  hairpin               [.] __atan2_finite@plt                                 
     0.23%  hairpin  hairpin               [.] cos@plt                                            
     0.19%  hairpin  libm-2.15.so          [.] csloww1                                            
     0.07%  hairpin  hairpin               [.] resetForce.2703                                    
     0.07%  hairpin  hairpin               [.] forEveryParticle                                   
     0.06%  hairpin  libm-2.15.so          [.] __dubcos                                           
     0.05%  hairpin  [kernel.kallsyms]     [k] mutex_unlock                                       
     0.02%  hairpin  hairpin               [.] __log_finite@plt                                   
     0.02%  hairpin  hairpin               [.] forEveryParticleD                                  
     0.02%  hairpin  [kernel.kallsyms]     [k] do_raw_spin_lock                                   
     0.02%  hairpin  hairpin               [.] __acos_finite@plt                                  
     0.02%  hairpin  [kernel.kallsyms]     [k] update_cpu_load                                    
     0.01%  hairpin  [kernel.kallsyms]     [k] tick_sched_timer                                   
     0.01%  hairpin  [kernel.kallsyms]     [k] ktime_get                                          
     0.01%  hairpin  hairpin               [.] __exp_finite@plt                                   
     0.01%  hairpin  [kernel.kallsyms]     [k] run_timer_softirq                                  
     0.01%  hairpin  [kernel.kallsyms]     [k] apic_timer_interrupt                               
     0.01%  hairpin  [kernel.kallsyms]     [k] __cycles_2_ns                                      
     0.01%  hairpin  [kernel.kallsyms]     [k] __local_bh_enable                                  
     0.01%  hairpin  [kernel.kallsyms]     [k] intel_pmu_disable_all                              
     0.01%  hairpin  [kernel.kallsyms]     [k] r100_mm_rreg                                       
     0.01%  hairpin  [kernel.kallsyms]     [k] perf_adjust_freq_unthr_context                     
     0.01%  hairpin  [kernel.kallsyms]     [k] update_stats_wait_end.clone.15                     
     0.01%  hairpin  [kernel.kallsyms]     [k] ttwu_do_activate.clone.50                          
     0.01%  hairpin  [kernel.kallsyms]     [k] do_signal                                          
     0.01%  hairpin  [kernel.kallsyms]     [k] tty_hung_up_p                                      
     0.01%  hairpin  hairpin               [.] main                                               
     0.01%  hairpin  [kernel.kallsyms]     [k] prepare_signal                                     
     0.01%  hairpin  libprofiler.so.0.3.0  [.] ProfileData::Evict(ProfileData::Entry const&)      
     0.01%  hairpin  [kernel.kallsyms]     [k] uhci_check_ports                                   
     0.01%  hairpin  [kernel.kallsyms]     [k] copy_siginfo_to_user                               
     0.01%  hairpin  [kernel.kallsyms]     [k] fxrstor_checking                                   
     0.01%  hairpin  [kernel.kallsyms]     [k] calc_global_load                                   
     0.01%  hairpin  [kernel.kallsyms]     [k] account_group_user_time                            
     0.01%  hairpin  [kernel.kallsyms]     [k] tg_load_down                                       
     0.01%  hairpin  [kernel.kallsyms]     [k] irq_enter                                          
     0.01%  hairpin  [kernel.kallsyms]     [k] __schedule                                         
     0.01%  hairpin  [kernel.kallsyms]     [k] n_tty_write                                        
     0.01%  hairpin  libprofiler.so.0.3.0  [.] ProfileHandler::SignalHandler(int, siginfo*, void*)
     0.01%  hairpin  [kernel.kallsyms]     [k] get_cycles                                         
     0.01%  hairpin  [kernel.kallsyms]     [k] enqueue_hrtimer                                    
     0.01%  hairpin  hairpin               [.] seqTick.2114                                       
     0.01%  hairpin  [kernel.kallsyms]     [k] idle_cpu                                           
     0.01%  hairpin  hairpin               [.] sincos@plt                                         
     0.01%  hairpin  [kernel.kallsyms]     [k] tick_program_event                                 
     0.01%  hairpin  [kernel.kallsyms]     [k] clear_page_c                                       
     0.01%  hairpin  [kernel.kallsyms]     [k] number.clone.1                                     
     0.01%  hairpin  [kernel.kallsyms]     [k] task_waking_fair                                   
     0.01%  hairpin  [kernel.kallsyms]     [k] save_i387_xstate                                   
     0.01%  hairpin  [kernel.kallsyms]     [k] __rcu_pending                                      
     0.01%  hairpin  [kernel.kallsyms]     [k] jiffies_to_timeval                                 
     0.01%  hairpin  [kernel.kallsyms]     [k] iowrite16                                          
     0.01%  hairpin  [kernel.kallsyms]     [k] hrtimer_interrupt                                  
     0.01%  hairpin  [kernel.kallsyms]     [k] finish_task_switch                                 
     0.01%  hairpin  [kernel.kallsyms]     [k] clockevents_program_event                          
     0.01%  hairpin  [kernel.kallsyms]     [k] ioread16                                           
     0.01%  hairpin  [kernel.kallsyms]     [k] lapic_next_event                                   
     0.00%  hairpin  [kernel.kallsyms]     [k] read_tsc                                           
     0.00%  hairpin  [kernel.kallsyms]     [k] __zone_watermark_ok                                
     0.00%  hairpin  libpthread-2.15.so    [.] __libc_read                                        
     0.00%  hairpin  [kernel.kallsyms]     [k] intel_pmu_enable_all 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-24T05:20:00.907

您应该使用 perf 和 Brendan Gregg 的脚本来创建火焰图，以便您可以很好地直观地表示时间的去向。火焰图可以清楚地显示哪些函数是 fegetexcept，因为它是一种可视化和汇总调用堆栈的方式：

[http://www.brendangregg.com/FlameGraphs/cpuflamegraphs.html](http://www.brendangregg.com/FlameGraphs/cpuflamegraphs.html)

没有调用堆栈的 CPU 采样通常是无用的。

确保为所有内容都安装了符号，因为许多分析器会将样本与*最近的*导出名称相关联，这可能会导致严重错误——这可以解释为什么“die”会显示一些样本。

您也可以尝试将程序加载到 gdb 并在 fegetexcept 上设置断点。如果您为 libc 安装了符号和源代码，那么您可以向上走调用堆栈并查看调用fegetexcept 的*原因。*我的猜测是您将超出范围的值传递给 acos 或类似的东西。

本文讨论如何为 libc 安装符号和源代码。

[https://randomascii.wordpress.com/2013/01/08/symbols-on-linux-part-one-g-library-symbols/](https://randomascii.wordpress.com/2013/01/08/symbols-on-linux-part-one-g-library-symbols/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T16:10:19.453

您的源不包含对 的任何调用`fegetexcept( )`，这意味着您使用的某些库函数正在调用它。可能是系统数学库中的一个或多个函数，以通过其余的采样数据来判断。

您可以尝试添加`-fno-math-errno`吗？在某些平台上，这将有助于避免不必要的 FP 环境操作。

# io - 使用 MPI_File_write_all 的 MPI-IO 死锁

> ID：12438727
> 
> 赞同：2
> 
> 时间：2012-09-15T15:40:00.613
> 
> 标签：io, mpi, deadlock

**当我在集群上的512 个**进程上运行此简单代码时，我的 MPI 代码死锁**。**我离内存限制还很远。如果我将进程数增加到**2048**，这对于这个问题来说太多了，代码会再次运行。死锁发生在包含.****`MPI_File_write_all`****

 ****有什么建议么？

```
int count = imax*jmax*kmax;

// CREATE THE SUBARRAY
MPI_Datatype subarray;
int totsize [3] = {kmax, jtot, itot};
int subsize [3] = {kmax, jmax, imax};
int substart[3] = {0, mpicoordy*jmax, mpicoordx*imax};
MPI_Type_create_subarray(3, totsize, subsize, substart, MPI_ORDER_C, MPI_DOUBLE, &subarray);
MPI_Type_commit(&subarray);

// SET THE VALUE OF THE GRID EQUAL TO THE PROCESS ID FOR CHECKING
if(mpiid == 0) std::printf("Setting the value of the array\n");
for(int i=0; i<count; i++)
  u[i] = (double)mpiid;

// WRITE THE FULL GRID USING MPI-IO
if(mpiid == 0) std::printf("Write the full array to disk\n");
char filename[] = "u.dump";
MPI_File fh;
if(MPI_File_open(commxy, filename, MPI_MODE_CREATE | MPI_MODE_WRONLY | MPI_MODE_EXCL, MPI_INFO_NULL, &fh))
  return 1;

// select noncontiguous part of 3d array to store the selected data
MPI_Offset fileoff = 0; // the offset within the file (header size)
char name[] = "native";

if(MPI_File_set_view(fh, fileoff, MPI_DOUBLE, subarray, name, MPI_INFO_NULL))
  return 1;

if(MPI_File_write_all(fh, u, count, MPI_DOUBLE, MPI_STATUS_IGNORE))
  return 1;

if(MPI_File_close(&fh))
  return 1; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T19:06:30.450

快速检查后，您的代码看起来正确。我建议您让您的 MPI-IO 库帮助您告诉您出了什么问题：您为什么不至少显示错误，而不是从错误中返回？以下是一些可能有帮助的代码：

```
 static void handle_error(int errcode, char *str)
{
        char msg[MPI_MAX_ERROR_STRING];
        int resultlen;
        MPI_Error_string(errcode, msg, &resultlen);
        fprintf(stderr, "%s: %s\n", str, msg);
        MPI_Abort(MPI_COMM_WORLD, 1);
} 
```

MPI_SUCCESS 是否保证为 0？我宁愿看

```
 errcode = MPI_File_routine();
 if (errcode != MPI_SUCCESS) handle_error(errcode, "MPI_File_open(1)"); 
```

把它放进去，如果你正在做一些棘手的事情，比如设置一个带有非单调非递减偏移量的文件视图，错误字符串可能会表明出了什么问题。****

# php - 在嵌套中向数组添加值

> ID：12438737
> 
> 赞同：0
> 
> 时间：2012-09-15T15:41:25.897
> 
> 标签：php, arrays, multidimensional-array, foreach

我正在尝试使用下面的代码向数组添加值，但它似乎只会导致 1 项（循环中的最后一项）被添加到数组中。

```
$awin_products = array();

foreach($awinprices as $value){
foreach($value as $obj){        
    $awin_products[name] = (string)$obj->sName;
    $awin_products[imageUrl] = (string)$obj->sAwThumbUrl;
    }
}
print_r($awin_products); 
```

这可能很容易解决，但到目前为止我还没有找到答案。

编辑：我正在寻找这个输出：

```
Array
(
    [0] => Array
        (
            [name] => Item 1 Name
            [imageUrl] => http://example.com/item1.jpg
        )
    [1] => Array
        (
            [name] => Item 2 Name
            [imageUrl] => http://example.com/item2.jpg
        )
    [2] => Array
        (
            [name] => Item 3 Name
            [imageUrl] => http://example.com/item3.jpg
        )
    [3] => Array
        (
            [name] => Item 4 Name
            [imageUrl] => http://example.com/item4.jpg
        )
) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T15:44:08.380

您在每次运行时都覆盖了相同的值：

```
foreach($value as $obj){         
    $awin_products[name] = (string)$obj->sName; 
    $awin_products[imageUrl] = (string)$obj->sAwThumbUrl; 
} 
```

你需要改变你写信的地方；也许是这样的：

```
$i = 0;
foreach($awinprices as $value){ 
    $awin_products[$i] = array();
    foreach($value as $obj){  
        $awin_products[$i][]['name'] = (string)$obj->sName; 
        $awin_products[$i][]['imageUrl'] = (string)$obj->sAwThumbUrl; 
    } 
    $i++;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T15:47:06.423

你需要关注

```
$awin_products = array();
$i = 0;
foreach($awinprices as $value){
    foreach($value as $obj){        
        $awin_products[$i]['name'] = (string)$obj->sName;
        $awin_products[$i]['imageUrl'] = (string)$obj->sAwThumbUrl;
        $i++;
    }
} 
```

然后你会得到这样的结构：

```
Array
(
            [0] => Array
                (
                    [name] => name
                    [imageUrl] => url
                )
            [1] => Array
                (
                    [name] => name1
                    [imageUrl] => url1
                )
) 
```

# php - 如何使用 PHP 或 VB6 在我的应用程序的另一个 Web 中捕获（导入）显示记录

> ID：12438740
> 
> 赞同：0
> 
> 时间：2012-09-15T15:41:56.743
> 
> 标签：php, vb6

我正在开发一个系统，我必须在其中捕获（和导入）显示在另一个网站上的记录。

问题场景是来自沙特阿拉伯和卡塔尔、尼泊尔的工人通过商人的网站发送消息。

我想从商人的网站上捕获这些消息，根据消息，应用程序可以在家中为他们的尼泊尔手机充电。

我的问题是如何使用 PHP 或 VB6 捕获数据？

# jquery - AJAX JQuery JSON 发布数据未到达控制器

> ID：12438741
> 
> 赞同：2
> 
> 时间：2012-09-15T15:42:07.113
> 
> 标签：jquery, ajax, json, post

```
var url =  base_url+"ajax/user/list_user_info/"+userId;
$.ajax({
        type: "POST",
        url: url,
        data:{user_id:userId},
        contentType: 'application/json',
        dataType: 'JSON',
        success: function(data) {

            if(data.redirect){
                window.location = data.redirect;    
            }
            else {
                $('#profile-main-content').html(data.html);
            }    
        }      
    }); 
```

现在，这是我的请求，一个非常标准的 AJAX 请求。我的问题是这个请求由于某种原因没有到达控制器。为了检查，我在数据库中执行了一个简单的测试插入，以检查控制器功能第一行的结果。但是没有插入测试。url 是正确的，因为我检查了 base_url 的声明。我知道我将“userId”作为参数并将其作为 POST 数据传递，但这只是我拼命尝试。请问有什么想法吗？如果我不清楚任何事情，请告诉我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T15:43:44.103

代替：

```
data:{user_id:userId} 
```

尝试：

```
data: JSON.stringify({user_id:userId}) 
```

原因是您指定了请求内容类型，`application/json`因此您需要发送 JSON。在您的代码中，您没有发送 JSON 请求 - 您正在发送一个简单的`application/x-www-form-urlencoded`POST 请求。而且由于您已经在 POST 正文中传递了 userId，因此您可能不需要在 url 中重复它。使用一种或另一种方法将此信息发送到您的服务器。

此外，为了更轻松地调试 javascript 错误，我强烈建议您使用[FireBug](http://getfirebug.com/)。在许多方面，它允许您查看在 AJAX 调用期间发送的确切请求/响应，并分析您从服务器获得的确切错误消息。它使调试问题变得更加容易。

# mysql - 将 SQL 数据库导出为 CSV 文件并与 WEKA 一起使用

> ID：12438743
> 
> 赞同：1
> 
> 时间：2012-09-15T15:42:08.677
> 
> 标签：mysql, sql, csv, weka

如何将查询结果从 .sql 数据库导出到 .csv 文件？我试过了

```
SELECT * 
FROM players 
  INTO OUTFILE 'players.csv' 
  FIELDS TERMINATED BY ',' 
  LINES TERMINATED BY ';';` 
```

我的 .csv 文件类似于：

```
p1,1,2,3
p2,1,4,5 
```

但它们不在单独的列中，都在 1 列中。

我尝试自己创建一个 .csv 文件只是为了尝试 WEKA，例如：

```
p1  1  2  3
p2  1  4  5 
```

但 WEKA 将其识别`p1 1 2 3`为单一属性。

那么：如何正确地将表从 sql db 导出到 csv 文件？以及如何将它与 WEKA 一起使用？

**编辑**

是否可以添加带有列名的标题行？我在网上读过一些东西，但我不能。

我正在使用 MySQL 5.5。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T21:35:49.603

您需要告知 weka 您的 csv 文件的格式。您可以在打开 csv 文件并调用选项对话框时执行此操作，请参见下图。此外，您需要使用“\n”而不是“;”来终止您的行。

![在此处输入图像描述](../Images/6bfcdae3305f262f1e53267bf3372fef.png) ![在此处输入图像描述](../Images/b32abe983e67fba4e6410cda9f1c6933.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-30T09:19:44.347

试试这个。

首先将 .sql 文件转换为 .csv 格式。例如：

```
SELECT orderNumber, status, orderDate, requiredDate, comments 
FROM orders
INTO OUTFILE 'C:/tmp/cancelled_orders.csv'
FIELDS ENCLOSED BY '"' TERMINATED BY ',' ESCAPED BY '"'
LINES TERMINATED BY '\r\n'; 
```

注意：Weka 工具需要 .csv 文件的属性以逗号结尾。如果您使用分号，它将不起作用。你会得到一个例外。

现在，这会将 .sql 格式转换为您可以在该`C:/tmp/cancelled_orders.csv`位置找到的 .csv 格式。

最后启动 weka 工具并获取这个数据集给它。

注意：将“文件类型”设为“CSV 数据文件”。

![在此处输入图像描述](../Images/e9831a4157e2a5481ccd5a2a6341dc47.png)

然后它将正常工作而不会出现任何异常。有用。

# node.js - Node.JS 通过 UDP 到 OSC

> ID：12438744
> 
> 赞同：3
> 
> 时间：2012-09-15T15:42:14.060
> 
> 标签：node.js, udp, osc

我安装了[Node.js](http://nodejs.org/)并集成[了 Socket.io](http://socket.io/)。

在一个名为“appudp.js”的文件中，我有以下代码：

```
var dgram = require('dgram');

var message = new Buffer("5656"); // Whatever the number could be...

var client = dgram.createSocket("udp4");

client.on("error", function (err) {

console.log("Socket error: " + err);

});

// At every second, send a message...

setInterval(function(){

client.send(message, 0, message.length, 1337, "127.0.0.1", function(err, bytes) {

  console.log("err : " + err + " | bytes : " + bytes + " | Message : " + message);

});

}, 1000); 
```

我进入命令提示符，输入“node app.js”。我每 1000 毫秒得到一次：

> 错误：空 | 字节：4 | 留言：5656

到目前为止一切都很好。

在 MaxMsp 中，我有这个非常简单的补丁：

![在此处输入图像描述](../Images/4055e1e96e4dc8936625b152ecc139a9.png)

然而，正如您在屏幕截图中看到的那样，它给了我错误：

> OSC 错误消息名称字符串：DataAfterAlignedString：不合理的长字符串丢弃整个消息。

对 MaxMsp 有点陌生，我最终完全迷路了。帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-24T16:12:47.013

看起来您不是在发送 OSC，而是在发送任意 UDP 数据包。请注意，正如 generalhenry 所建议的，udpreceive 对象需要 OSC 格式的数据包。

要将消息格式化为 OSC，您可以使用类似[https://github.com/termie/node-osc](https://github.com/termie/node-osc)的库。

# c# - Stream.Copy 是否通过管道传输？

> ID：12438746
> 
> 赞同：7
> 
> 时间：2012-09-15T15:42:19.220
> 
> 标签：c#, tcp, stream

假设我正在编写一个 tcp 代理代码。我正在从传入流中读取并写入输出流。我知道 Stream.Copy 使用缓冲区，但我的问题是：Stream.Copy 方法是在从输入流中获取下一个块的同时写入输出流还是像“从输入中读取块，将块写入输出”这样的循环，从输入中读取块等”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-15T22:17:55.293

这是`CopyTo`.NET 4.5 中的实现：

```
private void InternalCopyTo(Stream destination, int bufferSize)
{
    int num;
    byte[] buffer = new byte[bufferSize];
    while ((num = this.Read(buffer, 0, buffer.Length)) != 0)
    {
        destination.Write(buffer, 0, num);
    }
} 
```

如您所见，它从源读取，*然后*写入目标。这可能会得到改善；）

* * *

*编辑：*这是管道版本的可能实现：

```
public static void CopyToPiped(this Stream source, Stream destination, int bufferSize = 0x14000)
{
    byte[] readBuffer = new byte[bufferSize];
    byte[] writeBuffer = new byte[bufferSize];

    int bytesRead = source.Read(readBuffer, 0, bufferSize);
    while (bytesRead > 0)
    {
        Swap(ref readBuffer, ref writeBuffer);
        var iar = destination.BeginWrite(writeBuffer, 0, bytesRead, null, null);
        bytesRead = source.Read(readBuffer, 0, bufferSize);
        destination.EndWrite(iar);
    }
}

static void Swap<T>(ref T x, ref T y)
{
    T tmp = x;
    x = y;
    y = tmp;
} 
```

基本上，它同步读取一个块，开始异步将其复制到目标，然后读取下一个块并等待写入完成。

我进行了一些性能测试：

*   使用`MemoryStream`s，我没想到会有显着的改进，因为它不使用 IO 完成端口（AFAIK）；事实上，性能几乎相同
*   使用不同驱动器上的文件，我预计管道版本的性能会更好，但事实并非如此......它实际上稍微慢了一点（5% 到 10%）

所以它显然没有带来任何好处，这可能是它没有以这种方式实现的原因......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T15:51:33.283

根据Reflector，它没有。这种行为最好记录在案，因为它会引入并发性。一般来说，这样做是不安全的。因此，不“管道”的 API 设计是合理的。

所以这不仅仅是一个`Stream.Copy`或多或少聪明的问题。以并发方式复制不是实现细节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T17:54:33.243

Stream.Copy 是同步操作。我认为期望它使用异步读/写来进行同时读写是不合理的。

我希望异步版本（如[RandomAccessStream.CopyAsync](http://msdn.microsoft.com/en-us/library/windows/apps/br241747.aspx)）使用同时读写。

注意：在复制过程中使用多个线程是不受欢迎的行为，但是使用异步读写同时运行它们是可以的。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-15T15:46:53.690

在获取下一个块时写入输出流是不可能的（当使用一个缓冲区时），因为获取下一个块可能会在缓冲区用于输出时覆盖缓冲区。
您可以说使用双缓冲，但它与使用双倍大小的缓冲区几乎相同。

# jquery - 向 DOM 添加大量元素

> ID：12438759
> 
> 赞同：7
> 
> 时间：2012-09-15T15:44:53.057
> 
> 标签：jquery, dom

在我的 Web 应用程序中，我必须检索大量数据并使用数据创建一个表（大约 800 行 10 列的表）
当我通过`append()`方法直接添加元素时，浏览器暂时没有响应。

为了访问大量数据，我使用网络工作者进行 ajax 调用。
因为，我们不能从 web worker 操作 DOM，我该怎么办？
谢谢 ：）

***编辑***：
如果我想要一些像 hide() (jQuery hide) 这样的函数，innerHtml 会工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T15:50:22.660

**注意**：*使用 JavaScript 访问 DOM 元素的速度很慢，因此为了获得响应更快的页面。*

你可以这样做

```
var buffer = [];
setInterval(function(){ $("#div").html(buffer.join(""); buffer = []; }, 1000);

buffer.push("html");
buffer.push("html"); 
```

并检查此[链接的性能](http://quirksmode.org/dom/w3c_html.html#t03)

还检查此链接[加速您的网站的最佳实践](http://developer.yahoo.com/performance/rules.html#min_dom)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T15:52:16.493

您可能想要使用支持延迟插入 DOM 元素（即按需）的表格插件。[DataTables](http://datatables.net/)提供了丰富的功能，[包括这个](http://datatables.net/release-datatables/examples/ajax/defer_render.html)。它还将帮助您减少必须编写的代码的大小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T16:08:58.713

您可以使用一些 JavaScript 模板引擎来避免手动逐步添加元素或构建 innerHTML 字符串。

例如[http://ejohn.org/blog/javascript-micro-template](http://ejohn.org/blog/javascript-micro-templating)。

假设您的**HTML**中某处有一个模板：

```
<script type="text/html" id="user_rows_tpl">
    <% for(var y = 0, l = users.length; l > y; y++) { %>
        <tr id="user-row-<%=y%>">
            <td><%=users[y].name%></td>
            <td><%=users[y].surname%></td>
            <td><%=users[y].age%></td>       
        </tr>
    <% } %>
</script>​ 
```

然后你在你的**JavaScript**中使用这个模板来渲染你的对象：

```
<script type="text/javascript">
    var table = document.getElementById("userTable");
    table.innerHTML = tmpl("user_rows_tpl", {
        users: getUsers()
    });
</script> 
```

为了测试，我创建了 1000 个用户对象并将它们呈现在表中。
Google Chrome 的平均渲染时间约为 20-25ms。不错，不是吗？

**[演示](http://jsfiddle.net/f0t0n/XA8dG/)**

# sql - 在 WHERE 子句中使用带有 DATE 类型的 CASE

> ID：12438769
> 
> 赞同：0
> 
> 时间：2012-09-15T15:46:52.287
> 
> 标签：sql, sql-server, sql-server-2008, tsql, case

我想使用`CASE`DATE Type in`WHERE`子句，所以什么时候`@birthFrom`或`@birthTo`什么时候`NULL`返回所有记录。

```
DECLARE @birthFrom DATE= NULL --'19941012'
DECLARE @birthTo DATE= NULL --'20101012'

SELECT  *
FROM    dbo.bbmf
WHERE   birth BETWEEN ( CASE @birthFrom
                      WHEN NULL THEN birth
                      ELSE @birthFrom
                    END )
          AND     ( CASE @birthTo
                      WHEN NULL THEN birth
                      ELSE @birthTo
                    END ) 
```

**我的问题是：**当我执行上面的代码时没有选择记录

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T15:49:10.657

你`case`不工作的原因`null`是不等于`null`。表达式的`null = null`计算结果为`unknown`。例如：

```
select case null when null then 1 else 2 end
-->
2 
```

你可以让它像`case when x is null`. 请注意与`is`相对的使用`=`：

```
declare @x int = null
select case when @x is null then 1 else 2 end
-->
1 
```

有关更多详细信息，请参阅[有关三值逻辑的 Wikipedia 文章](http://en.wikipedia.org/wiki/Three-valued_logic)。

一种更简单的方法是完全省略这种情况：

```
where   (@birthFrom is null or @birthFrom <= birth)
        and (@birthTo is null or birth <= @birthTo) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T15:53:44.467

`CASE`您的陈述有一个错误，您已添加`@birthFrom`而不是`@birthTo`

```
WHERE   birth BETWEEN ( CASE @birthFrom
                      WHEN NULL THEN birth
                      ELSE @birthFrom
                    END )
          AND     ( CASE @birthFrom <----it should be @birthTo
-------------------------^^^^^^^^^^
                      WHEN NULL THEN birth
                      ELSE @birthTo
                    END ) 
```

# c - `clear` 导致未定义的引用错误

> ID：12438775
> 
> 赞同：1
> 
> 时间：2012-09-15T15:47:20.540
> 
> 标签：c, gcc, ubuntu, random, numbers

我似乎无法在下生成随机`C`数`Ubuntu 12.04`。

我写了下面的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <curses.h>
int main (int argc,char* argv[])
{
     int number;
     clear();

     number = rand() % 2; // want to get only 0 or 1

     printf("%d",number);
     getch();
     return 0;
} 
```

我将文件命名为“test_gcc.c”。

之后我编译它：

```
$ sudo gcc -o test_gcc test_gcc.c 
```

我收到以下消息：

```
/tmp/ccT0s12v.o: In function `main':
test_gcc.c:(.text+0xa): undefined reference to `stdscr'
test_gcc.c:(.text+0x12): undefined reference to `wclear'
test_gcc.c:(.text+0x44): undefined reference to `stdscr'
test_gcc.c:(.text+0x4c): undefined reference to `wgetch'
collect2: ld returned 1 exit status 
```

有人可以告诉我我做错了什么吗？

以及如何`C`在`Ubuntu 12.04`使用中生成随机数`gcc`？

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-15T15:50:24.007

这与随机数无关。问题是您在没有`curses`库的情况下进行链接。

您需要添加`-lncurses`到`gcc`命令行：

```
 $ gcc -o test_file test_file.c -lncurses 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T15:50:18.497

您没有播种随机数生成器。<-- 不是错误的原因

`srand(time(0));`调用前使用`rand()`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T15:55:17.043

每次运行可执行文件时使用`srand ( time(NULL) );`before获取不同的随机数。`number = rand() % 2;`

对于错误：

*   删除`clear()`并使用`getchar()`而不是，`getch()`然后它应该可以正常工作。

*   `getch()`在支持非缓冲输入的编译器中使用，但在 gcc 的情况下，它是缓冲输入，所以使用`getchar()`.

**代码：**

```
#include <stdio.h>
#include <stdlib.h>
#include <curses.h>
int main (int argc,char* argv[])
{
    int number;
    srand(time(NULL));
    number = rand() % 2; // want to get only 0 or 1
    printf("%d",number);
    getchar();
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T15:52:16.117

尝试 ：

```
 gcc -o test_gcc test_gcc.c -lncurses 
```

# octave - 在 Octave 中保存具有透明背景的绘图

> ID：12438777
> 
> 赞同：4
> 
> 时间：2012-09-15T15:48:03.930
> 
> 标签：octave

我使用 Octave 绘制了一些 GPS 轨迹和航向矢量。

我想将绘图覆盖在卫星图像上，但是当我保存绘图时，它具有白色背景。有没有办法用透明背景保存它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-23T08:36:43.223

我认为将 print 与“pngalpha”设备一起使用可以满足您的需求，例如：

```
print(gcf,'-dpngalpha', 'myplot.png'); 
```

不幸的是，这没有很好的记录。我广泛浏览了源代码以找到一种破解/修补 octave 的方法来做到这一点，只是发现这已经成为可能。

# deployment - PhpStorm 5 中的 SFTP 同步太慢

> ID：12438779
> 
> 赞同：7
> 
> 时间：2012-09-15T15:48:20.657
> 
> 标签：deployment, synchronization, sftp, phpstorm

我正在 Ubuntu 12.04 中测试新的 PhpStorm5。通过 sftp 同步可以正常工作，但是太慢了。我有一种感觉，phpStorm 仅通过一个连接进行同步，并且不会创建更多与 sftp 的并发连接。当我在 Krusader 同步插件中同步文件夹时，它使用 10 个并发连接并且工作得更快。任何想法如何强制 phpStorm 部署同步使用更多连接？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-15T15:52:52.227

不可能使用更多的连接，至少在[此请求](http://youtrack.jetbrains.com/issue/WI-5580)得到解决之前是这样。该请求是关于 FTP 的，但如果/当它实现时，它可以很容易地扩展到 SFTP 和其他传输。

有一个[限制并发连接](http://www.jetbrains.com/phpstorm/webhelp/advanced-options-dialog.html)的设置，但是同步的时候好像只用了一个连接。

# java - Try-finally 阻止 StackOverflowError

> ID：12438786
> 
> 赞同：335
> 
> 时间：2012-09-15T15:49:19.433
> 
> 标签：java, recursion, stack-overflow, try-finally

看看以下两种方法：

```
public static void foo() {
    try {
        foo();
    } finally {
        foo();
    }
}

public static void bar() {
    bar();
} 
```

* * *

清楚地运行会`bar()`导致 a `StackOverflowError`，但运行`foo()`不会（程序似乎无限期地运行）。*这是为什么？*

* * *

## 回答 #1

> 赞同：333
> 
> 时间：2012-09-15T16:25:23.507

它不会永远运行。每次堆栈溢出都会导致代码移动到 finally 块。问题是这将需要非常非常长的时间。时间顺序是 O(2^N)，其中 N 是最大堆栈深度。

想象一下最大深度是5

```
foo() calls
    foo() calls
       foo() calls
           foo() calls
              foo() which fails to call foo()
           finally calls
              foo() which fails to call foo()
       finally
           foo() calls
              foo() which fails to call foo()
           finally calls
              foo() which fails to call foo()
    finally calls
       foo() calls
           foo() calls
              foo() which fails to call foo()
           finally calls
              foo() which fails to call foo()
       finally
           foo() calls
              foo() which fails to call foo()
           finally calls
              foo() which fails to call foo()
finally calls
    foo() calls
       foo() calls
           foo() calls
              foo() which fails to call foo()
           finally calls
              foo() which fails to call foo()
       finally
           foo() calls
              foo() which fails to call foo()
           finally calls
              foo() which fails to call foo()
    finally calls
       foo() calls
           foo() calls
              foo() which fails to call foo()
           finally calls
              foo() which fails to call foo()
       finally
           foo() calls
              foo() which fails to call foo()
           finally calls
              foo() which fails to call foo() 
```

将每个级别工作到 finally 块中需要两倍的时间，堆栈深度可能是 10,000 或更多。如果您每秒可以进行 10,000,000 次调用，这将花费 10^3003 秒或比宇宙年龄更长的时间。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-09-15T15:53:18.617

`foo()`当您从内部的调用中获得异常时`try`，您将调用`foo()`from`finally`并再次开始递归。当这导致另一个异常时，您`foo()`将从另一个 inner调用`finally()`，依此类推，几乎*无穷无尽*。

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2012-09-15T15:54:39.177

尝试运行以下代码：

```
 try {
        throw new Exception("TEST!");
    } finally {
        System.out.println("Finally");
    } 
```

你会发现 finally 块在抛出异常到它上面的级别之前执行。（输出：

> 最后
> 
> 线程“主”java.lang.Exception 中的异常：测试！在 test.main(test.java:6)

这是有道理的，因为 finally 在退出方法之前被调用。然而，这意味着一旦你得到了 first `StackOverflowError`，它会尝试抛出它，但 finally 必须首先执行，所以它`foo()`再次运行，这会导致另一个堆栈溢出，因此 finally 再次运行。这会永远发生，因此实际上从未打印出异常。

但是，在您的 bar 方法中，一旦发生异常，它就会直接被抛出到上面的级别，并将被打印

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2012-09-16T05:50:24.290

为了提供合理的证据证明这将最终终止，我提供了以下相当无意义的代码。注意：Java 不是我的语言，无论是最生动的想象。我提出这个只是为了支持彼得的答案，这是问题*的*正确答案。

这试图模拟调用不能发生时发生的情况，因为它会引入堆栈溢出。在我看来，人们未能掌握的最困难的事情是调用不会发生，而它*不会*发生。

```
public class Main
{
    public static void main(String[] args)
    {
        try
        {   // invoke foo() with a simulated call depth
            Main.foo(1,5);
        }
        catch(Exception ex)
        {
            System.out.println(ex.toString());
        }
    }

    public static void foo(int n, int limit) throws Exception
    {
        try
        {   // simulate a depth limited call stack
            System.out.println(n + " - Try");
            if (n < limit)
                foo(n+1,limit);
            else
                throw new Exception("StackOverflow@try("+n+")");
        }
        finally
        {
            System.out.println(n + " - Finally");
            if (n < limit)
                foo(n+1,limit);
            else
                throw new Exception("StackOverflow@finally("+n+")");
        }
    }
} 
```

这个毫无意义的小东西的输出如下，实际捕获的异常可能会令人惊讶；哦，还有 32 次尝试调用 (2^5)，这完全是意料之中的：

```
1 - Try
2 - Try
3 - Try
4 - Try
5 - Try
5 - Finally
4 - Finally
5 - Try
5 - Finally
3 - Finally
4 - Try
5 - Try
5 - Finally
4 - Finally
5 - Try
5 - Finally
2 - Finally
3 - Try
4 - Try
5 - Try
5 - Finally
4 - Finally
5 - Try
5 - Finally
3 - Finally
4 - Try
5 - Try
5 - Finally
4 - Finally
5 - Try
5 - Finally
1 - Finally
2 - Try
3 - Try
4 - Try
5 - Try
5 - Finally
4 - Finally
5 - Try
5 - Finally
3 - Finally
4 - Try
5 - Try
5 - Finally
4 - Finally
5 - Try
5 - Finally
2 - Finally
3 - Try
4 - Try
5 - Try
5 - Finally
4 - Finally
5 - Try
5 - Finally
3 - Finally
4 - Try
5 - Try
5 - Finally
4 - Finally
5 - Try
5 - Finally
java.lang.Exception: StackOverflow@finally(5) 
```

* * *

## 回答 #5

> 赞同：23
> 
> 时间：2012-09-15T16:07:30.867

学习跟踪您的程序：

```
public static void foo(int x) {
    System.out.println("foo " + x);
    try {
        foo(x+1);
    } 
    finally {
        System.out.println("Finally " + x);
        foo(x+1);
    }
} 
```

这是我看到的输出：

```
[...]
foo 3439
foo 3440
foo 3441
foo 3442
foo 3443
foo 3444
Finally 3443
foo 3444
Finally 3442
foo 3443
foo 3444
Finally 3443
foo 3444
Finally 3441
foo 3442
foo 3443
foo 3444
[...] 
```

如您所见，StackOverFlow 在上面的某些层被抛出，因此您可以执行额外的递归步骤，直到遇到另一个异常，依此类推。这是一个无限的“循环”。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-04-11T00:08:28.113

该程序似乎永远运行；它实际上终止了，但是您拥有的堆栈空间越多，它所花费的时间就越多。为了证明它完成了，我写了一个程序，首先耗尽大部分可用的堆栈空间，然后调用`foo`，最后写下发生的事情的踪迹：

```
foo 1
  foo 2
    foo 3
    Finally 3
  Finally 2
    foo 3
    Finally 3
Finally 1
  foo 2
    foo 3
    Finally 3
  Finally 2
    foo 3
    Finally 3
Exception in thread "main" java.lang.StackOverflowError
    at Main.foo(Main.java:39)
    at Main.foo(Main.java:45)
    at Main.foo(Main.java:45)
    at Main.foo(Main.java:45)
    at Main.consumeAlmostAllStack(Main.java:26)
    at Main.consumeAlmostAllStack(Main.java:21)
    at Main.consumeAlmostAllStack(Main.java:21)
    ... 
```

编码：

```
import java.util.Arrays;
import java.util.Collections;
public class Main {
  static int[] orderOfOperations = new int[2048];
  static int operationsCount = 0;
  static StackOverflowError fooKiller;
  static Error wontReachHere = new Error("Won't reach here");
  static RuntimeException done = new RuntimeException();
  public static void main(String[] args) {
    try {
      consumeAlmostAllStack();
    } catch (RuntimeException e) {
      if (e != done) throw wontReachHere;
      printResults();
      throw fooKiller;
    }
    throw wontReachHere;
  }
  public static int consumeAlmostAllStack() {
    try {
      int stackDepthRemaining = consumeAlmostAllStack();
      if (stackDepthRemaining < 9) {
        return stackDepthRemaining + 1;
      } else {
        try {
          foo(1);
          throw wontReachHere;
        } catch (StackOverflowError e) {
          fooKiller = e;
          throw done; //not enough stack space to construct a new exception
        }
      }
    } catch (StackOverflowError e) {
      return 0;
    }
  }
  public static void foo(int depth) {
    //System.out.println("foo " + depth); Not enough stack space to do this...
    orderOfOperations[operationsCount++] = depth;
    try {
      foo(depth + 1);
    } finally {
      //System.out.println("Finally " + depth);
      orderOfOperations[operationsCount++] = -depth;
      foo(depth + 1);
    }
    throw wontReachHere;
  }
  public static String indent(int depth) {
    return String.join("", Collections.nCopies(depth, "  "));
  }
  public static void printResults() {
    Arrays.stream(orderOfOperations, 0, operationsCount).forEach(depth -> {
      if (depth > 0) {
        System.out.println(indent(depth - 1) + "foo " + depth);
      } else {
        System.out.println(indent(-depth - 1) + "Finally " + -depth);
      }
    });
  }
} 
```

You can [try it online!](https://tio.run/##lVVNb9pAEL3zK6a@1FbAkKqHVi6RojRVpaqNlBx6iDhs7SEsWe9au@vQqOK3k9n1AgabKPUFs/P13pvZ8ZI9sdGyeNxseFkpbWFJB2ltuUgvtWbPJht0DFdKCMwtV5KsVf1H8BxywYyBn4xL@DcAMJZZOuXS3s9A6QL1zfymQs18FExB4spbP0w@fpplBxGgdo5Xqqb/U5i0PO4syx9vnlDPhVpda600zJX6wQmTbrk1lpWS9hZZvviOGkNZb4mj30q@t6CdERZkjZJW9C3V5SVe/82xckigUHIbf2yLfWDQIcQ/KV5ASWrEd1Zz@UAqMP1gEi8OgNXP4Q0gJ551iZeiVMZeCuH5NTkB1pAzSwDjDiBMdhn4HGKEd1MPMgG70Gp1yDwLnhVhoVNTC2u2JSAEHIhIlQd7UyfXukPY9e0Ekx7Ozts461dis7hFpxSpRAK/qkZDtS/wC3ze6wHUVVtr2VviDM63ydaAwmArrA3RPSRJfL6r/Yoe23yhWT0jislx5kZsoozdAq6RGYzHUllAqeqHRcMFTMVyBKu8TlbXuQXmhxK3g7FHM2j/vhFbEG6yn4F1/2w7aVwXC6fuNn48vns2FstU1Tb1syZkHJErRKR745rBr5OkCkX8uUnT1Kfr7I37o81wdjYj/XzerDNjDqE3uZbvrtOcSybE3qsf8rfg1YId/N@IadQCdQLK/92vZo3QxSlQ2q7yoW@NV7pUtHiiaAitTZ3KK1VxNA2QIVGDKEmy0x0@3BWhTvNNSGn0kJVxR4whTIbH6ztJ50pfE7kgwejiYHE1hxcwaV@Qnp4E5iEHyUhaHo/WqXt9Ot3oMF@776OjpE3XgmLrwWbzAg) (Some runs might call `foo` more or fewer times than others)

# objective-c - MKMapView - 抚摸路径

> ID：12438802
> 
> 赞同：1
> 
> 时间：2012-09-15T15:50:46.280
> 
> 标签：objective-c, cgcontext, mapkit

我试图为 MapView 的覆盖视图描边并填充路径。现在填充工作，笔画不...从下面的代码看有什么想法吗？

```
- (void)drawMapRect:(MKMapRect)mapRect
          zoomScale:(MKZoomScale)zoomScale
          inContext:(CGContextRef)ctx
{    
    CGContextSetRGBStrokeColor(ctx, 1.0, 0.0, 0.0, 0.8);
    CGContextSetRGBFillColor(ctx, 0.0, 0.0, 0.8, 0.4);

    CGContextSetLineCap(ctx, kCGLineCapRound);
    CGContextSetLineWidth(ctx, 8.0);

    CGPoint pt;
    pt = [self pointForMapPoint:MKMapPointForCoordinate(CLLocationCoordinate2DMake(0, 0))];
    CGContextMoveToPoint(ctx, pt.x, pt.y);

    pt = [self pointForMapPoint:MKMapPointForCoordinate(CLLocationCoordinate2DMake(-2, 3))];
    CGContextAddLineToPoint(ctx, pt.x, pt.y);

    pt = [self pointForMapPoint:MKMapPointForCoordinate(CLLocationCoordinate2DMake(-2, 5))];
    CGContextAddLineToPoint(ctx, pt.x, pt.y);

    pt = [self pointForMapPoint:MKMapPointForCoordinate(CLLocationCoordinate2DMake(-4, 4))];
    CGContextAddLineToPoint(ctx, pt.x, pt.y);

    CGContextDrawPath(ctx, kCGPathFillStroke);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T16:56:33.280

这使它工作...

```
CGContextSetLineWidth(ctx, 1 * MKRoadWidthAtZoomScale(zoomScale)); 
```

# sql-server-2008 - 我无法更改数据库的兼容级别

> ID：12438804
> 
> 赞同：1
> 
> 时间：2012-09-15T15:51:20.043
> 
> 标签：sql-server-2008

我正在尝试在 SLQ Server 2008 中创建一个具有 DATE 类型属性的表，但我遇到了一个问题：

> 消息 102，级别 15，状态 1，第 2 行“100”附近的语法不正确。

当我进行搜索时，我发现我应该更改数据库的兼容级别，所以我这样做了，我写了这段代码

```
ALTER DATABASE Gestion_bib SET COMPATIBILITY_LEVEL = 100; 
```

我得到错误：

```
Incorrect syntax near '100'. 
```

# .net - 不支持 WmiSetBrightness 方法（.Net 4.0、Winforms、Windows 7）

> ID：12438805
> 
> 赞同：2
> 
> 时间：2012-09-15T15:51:30.150
> 
> 标签：.net, vb.net, winforms, windows-7

我正在尝试使用 WmiSetBrightness 方法调整显示器的亮度（不是伽马斜坡值），但系统在运行时抛出 ManagementException 说“不支持”。我见过很多人使用这个概念并成功运行。那我的有什么问题吗？是不是因为这在 Windows 7 Ultimate 中不受支持？我在哪个工作？我的代码如下：

```
Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1_Click
    Try
        Dim mclass As New ManagementClass("WmiMonitorBrightnessMethods")
        mclass.Scope = New ManagementScope("\\.\root\wmi")
        Dim instances As ManagementObjectCollection = mclass.GetInstances()

        For Each instance As ManagementObject In instances
            Dim brightness As Byte = 50 'In percent.
            Dim timeout As UInt64 = 1 'In seconds.
            Dim args As Object() = New Object() {brightness, timeout}
            instance.InvokeMethod("WmiSetBrightness", args) 'Only work on the first object.
            Exit For
        Next
    Catch ex As ManagementException
        MessageBox.Show(ex.Message)
    End Try
End Sub 
```

为了测试实例是否从字面上获得，我注释了 foreach 部分并尝试通过 MessageBox 使用 instance.Count.ToString() 打印实例的计数，但仍然抛出异常。

作为替代方案，我尝试使用 DeviceIOControl 和 IOCTL_VIDEO_SET_DISPLAY_BRIGHTNESS 但没有成功。代码如下：

```
Public Class Form1
    Private Declare Auto Function CreateFile Lib "kernel32" _
    (ByVal lpFileName As String, ByVal dwDesiredAccess As Int32, _
     ByVal dwShareMode As Int32, ByVal lpSecurityAttributes As IntPtr, _
     ByVal dwCreationDisposition As Int32, _
     ByVal dwFlagsAndAttributes As Int32, ByVal hTemplateFile As IntPtr) As IntPtr

    Const GENERIC_READ As Int32 = &H80000000%
    Const SHARE_ALL As Int32 = &H7%
    Const OPEN_EXISTING As Int32 = &H3%

    Const IOCTL_VIDEO_SET_DISPLAY_BRIGHTNESS As Integer = &H23049C%

    Private Structure BRIGHTNESS
        Public ucDisplayPolicy As Byte
        Public ucACBrightness As Byte
        Public ucDCBrightness As Byte
    End Structure

    Private Declare Auto Function DeviceIoControl Lib "kernel32" _
     (ByVal hDevice As IntPtr, ByVal dwIoControlCode As Int32, _
     ByRef lpInBuffer As BRIGHTNESS, ByVal nInBufferSize As Int32, _
     ByVal lpOutBuffer As IntPtr, ByVal nOutBufferSize As Int32, _
     ByRef lpBytesReturned As Int32, ByVal lpOverlapped As IntPtr) As Boolean

    Private Declare Auto Function CloseHandle Lib "kernel32" _
     (ByVal hObject As IntPtr) As Boolean

    ''' <summary>
    ''' Set the brightness of the screen.
    ''' </summary>
    ''' <param name="Brightness">The Screen Brightness.</param>
    Private Sub SetBrightness(ByRef Brightness As BRIGHTNESS)
        ' Get the display.
        Dim pDisplay As IntPtr = _
         CreateFile("\\.\LCD", GENERIC_READ, SHARE_ALL, IntPtr.Zero, OPEN_EXISTING, 0, IntPtr.Zero)

        ' Set the brightness.
        DeviceIoControl(pDisplay, IOCTL_VIDEO_SET_DISPLAY_BRIGHTNESS, _
        Brightness, Runtime.InteropServices.Marshal.SizeOf(Brightness), IntPtr.Zero, 0, Nothing, IntPtr.Zero)

        ' Close the handle.
        CloseHandle(pDisplay)
    End Sub

    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        Dim brightness As BRIGHTNESS

        ' The brightness on DC Power.
        brightness.ucDCBrightness = 100
        ' The Brightness on AC Power.
        brightness.ucACBrightness = 100

        ' Call the function.
        SetBrightness(brightness)
    End Sub
End Class 
```

由于某种原因，DeviceIoControl 总是返回 False。请协助整理这些。

顺便说一句，这不是关于使用 SetDeviceGammaRamp 修改伽马斜坡值，因为它会调整显示器的对比度；不是亮度。所以，关于这个问题的任何帖子都不会有太大帮助。

问候！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-28T14:51:36.277

对于 using `WmiMonitorBrightnessMethods`，args 的顺序不正确。应该是这样的：

```
Dim args As Object() = New Object() {timeout, brightness} 
```

这个对我有用。

# php - JPEG 文件过早结束

> ID：12438813
> 
> 赞同：5
> 
> 时间：2012-09-15T15:52:21.830
> 
> 标签：php, codeigniter, image-processing, image-resizing, plupload

在调整某些图像的大小时，我收到了这个 JPEG 文件过早结束的错误。有趣和奇怪的部分是，只有当我上传任何相机拍摄的图像时，我才会收到这个错误，比如从手机上，除了那些一切都很好。我认为这可能是因为 plupload 中使用的块大小。所以，我上传了更大尺寸的图像到有点像 3mb 来测试。适用于相机拍摄的图像以外的图像。所以，每当我上传相机照片时，我都会收到此错误。

对错误的进一步说明：php 函数 imagecreatefromjpeg 抛出错误“imgname.jpg 不是有效的 JPEG 文件”。

要调整图像大小，我正在使用 Codeigniter 的图像操作类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T16:06:22.317

根据你提供的情况，我只能给你我的扣除。

相机图像通常非常大。我建议您尝试调整相机图像的大小，看看它是否有效。

你的 PHP 版本是什么？有一个与此相关的错误：[https ://bugs.php.net/bug.php?id=29878](https://bugs.php.net/bug.php?id=29878)

另请检查您的 JPEG 文件是否为 RGB 格式。手册中的某处提到它无法为某些版本的 GD 库正确加载 CMYK。

您愿意使用其他课程吗？我使用[这个类](http://www.white-hat-web-design.co.uk/articles/php-image-resizing.php)来调整图像大小并且多年来没有遇到任何问题。

调整图像大小很简单：

```
<?php
   include('SimpleImage.php');
   $image = new SimpleImage();
   $image->load('picture.jpg');
   $image->resizeToHeight(500);
   $image->save('picture2.jpg');
   $image->resizeToHeight(200);
   $image->save('picture3.jpg');
?> 
```

如果所有建议都没有奏效，您可以尝试使用[ImageMagick](http://php.net/manual/en/book.imagick.php)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-04T09:06:47.180

如果图像内容不完整，“JPEG 文件过早结束”也是一般软件错误。软件通过最后一个像素的颜色来确定它。

我从 tesseract（开源 OCR 引擎）得到“JPEG 文件过早结束”，因为文件没有通过网络正确复制。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-03-04T03:18:51.720

您是否发现有时它会在 imagecreatefromjpeg() 在错误的 JPEG 上运行时挂起 php。我发现这是因为你使用的 JPEG 文件没有 EOI（图像结尾）FF D9 在你的 JPEG 结尾

JPEG 图像应以 0xFFD8 开头并以 0xFFD9 结尾

```
// this may help to fix the error
function check_jpeg($f, $fix=false )
{

    # check for jpeg file header and footer - also try to fix it
    if ( false !== (@$fd = fopen($f, 'r+b' )) ){
        if ( fread($fd,2)==chr(255).chr(216) ){
            fseek ( $fd, -2, SEEK_END );
            if ( fread($fd,2)==chr(255).chr(217) ){
                fclose($fd);
                return true;
            }else{
            if ( $fix && fwrite($fd,chr(255).chr(217)) ){return true;}
                fclose($fd);
                return false;
            }
        }else{fclose($fd); return false;}
    }else{
        return false;
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-02-04T16:58:29.247

您可以设置默认值 `gd.jpeg_ignore_warning=1`in`php.ini`

或者

`ini_set('gd.jpeg_ignore_warning', true);`您可以在调用之前在您的 PHP 脚本中 这样设置它`imagecreatefromjpeg()`

在实现上述任何一项后，GD 库将忽略它曾经失败的错误并 `imagecreatefromjpeg()` 返回一个`image resource identifier`.

注意：在`PHP 7.1.0`默认值`gd.jpeg_ignore_warning`已从 更改`0`为`1`。

**[参考](https://www.facebook.com/notes/php-tutors/php-gd-library-imagecreatefromjpeg-premature-end-of-jpeg-file-issue/721592434694661)**

# mysql - 满数据后对表添加检查约束

> ID：12438818
> 
> 赞同：1
> 
> 时间：2012-09-15T15:53:02.740
> 
> 标签：mysql, sql

我有一个表，我想在创建后添加一个检查约束。我做了一些谷歌搜索并找到了一些答案，但它们似乎不起作用。这是我尝试过的：

```
ALTER TABLE noise_table 
    ADD CONSTRAINT chk_level CHECK (noise_level >= 0 and noise_level <= 0.1); 
```

但是，运行此语句后，我仍然可以在检查间隔之外更新和插入，因此它似乎根本不起作用。我在这里想念什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T15:57:24.150

如[`ALTER TABLE`语法](http://dev.mysql.com/doc/en/alter-table.html)中所述：

> 该`CHECK`子句被所有存储引擎解析但忽略。

您可以改为定义`BEFORE INSERT`并`BEFORE UPDATE` [触发](http://dev.mysql.com/doc/en/triggers.html)在不满足您的条件时引发错误：

```
DELIMITER ;;

CREATE TRIGGER chk_insert_level BEFORE INSERT ON noise_table FOR EACH ROW
IF NOT (NEW.noise_level >= 0 AND NEW.noise_level <= 0.1) THEN
  CALL invalid_noise_level;  -- non-existent procedure, raises an error
END IF;;

CREATE TRIGGER chk_update_level BEFORE UPDATE ON noise_table FOR EACH ROW
IF NOT (NEW.noise_level >= 0 AND NEW.noise_level <= 0.1) THEN
  CALL invalid_noise_level;  -- non-existent procedure, raises an error
END IF;;

DELIMITER ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T15:57:36.323

MySQL 不支持检查约束。

相反，MySQL“默默地忽略”检查约束，因此它不会显示错误。

# javascript - 从 DOM 发布任意值（我猜没有表单/提交）

> ID：12438821
> 
> 赞同：0
> 
> 时间：2012-09-15T15:53:21.863
> 
> 标签：javascript, html

我想创建一个按钮/输入，当用户按下它时，它将调用一个 java 脚本函数，

从 DOM 收集一些值（例如使用 jQuery），可以是不同的值，由用户决定页面决策，然后将所有这些值发布/提交回服务器，

我知道我可以创建一个带有按钮的表单并在表单中创建隐藏的输入字段并在用户做出所需的决定时填写它们，但是我有几个问题，我不想一次又一次地做同样的事情......

我是 html/javascript 的新手，我确信有更优雅的方式.. :) 感谢所有帮助者！

杰克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T11:35:46.227

您可以使用 Ajax 进行发布或获取（默认）。这很简单：

```
$.ajax({
    type: 'POST',
    data: {
         'put': 'your',
         'form': 'values',
         'here': '!'
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T04:53:00.043

表单不是创建按钮的必要条件。可`<button>`用于任意创建按钮。

jQuery 可用于执行使用该`click()`方法的函数。例如：

```
<button id="foo">Bar.</button>

<script>
    $('#foo').click(function(){
        someFunction();
    });
</script> 
```

这是一个工作示例：http: [//jsfiddle.net/orzogen/Mgvr9/](http://jsfiddle.net/orzogen/Mgvr9/)

# c# - 下拉未从数据库中检索到的数据

> ID：12438822
> 
> 赞同：0
> 
> 时间：2012-09-15T15:53:22.780
> 
> 标签：c#, asp.net, sql

为什么下拉菜单不显示数据库中的 ID？我有登录页面。当用户输入他们的用户名和密码时，我将从他们创建一个会话。

```
 Session["username"] = Login1.UserName; 
```

我的数据库中有两个表。1 是 aspnet_Users（保留所有用户信息），另一个是 CarReserve 表（包含 ID、用户名和预订详细信息，均由管理员管理）

在用户页面中，当用户点击我的预订时，它会出现一个只有 ID（来自 CarReserve）的下拉菜单，然后用户从那里选择 ID 后，他们可以查看 CarReserve 中仅属于 ID 的所有详细信息。这是我从数据库中检索 ID 的代码：

```
 <asp:DropDownList ID="DropDownList1" runat="server" AutoPostBack="True" 
                DataSourceID="SqlDataSource1" DataTextField="ID" DataValueField="ID" 
                Height="21px" Width="147px">
            </asp:DropDownList>
            <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
                ConnectionString="<%$ ConnectionStrings:Connection %>" 
 SelectCommand="SELECT CarReserve.ID 
 FROM CarReserve 
 INNER JOIN aspnet_Users 
 ON CarReserve.UserName = aspnet_Users.UserName WHERE CarReserve.UserName = @UserName">
                <SelectParameters>
                    <asp:SessionParameter Name="UserName" 
                        SessionField="session[&quot;username&quot;]" />
                </SelectParameters>
            </asp:SqlDataSource> 
```

问题是下拉菜单没有显示当前登录用户的 ID。有人可以告诉我我的代码有什么问题吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T15:57:38.850

您的`SessionField`参数应为

```
SessionField="username" 
```

# .net - Thread.CurrentThread.CurrentCulture 和 ajax

> ID：12438823
> 
> 赞同：4
> 
> 时间：2012-09-15T15:53:30.163
> 
> 标签：.net, ajax

如果我`Thread.CurrentThread.CurrentCulture`在`PageLoad`调用代码隐藏方法时设置，我会找到我设置的文化`PageLoad`，但是如果我调用`[WebMethod]`with `$.ajax()`，文化是默认的，而不是我设置的`PageLoad`。

我想那是因为这两个调用在两个不同的线程中。

我想知道是否有办法设置文化，以便我发现它在两种情况下都设置好了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T16:24:49.530

如果不同的页面负载可以有不同的文化信息；那么你可能有问题。WebMethod 不知道哪个页面正在使用该方法（或者页面是否使用了它——它只是一个 Web 服务方法，任何人都可以调用它）。

我建议发回文化不变信息，然后让页面格式化它所知道的文化信息。

否则，您可能必须将文化信息传递给 web 方法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-06T11:29:29.900

在 WebMethod 开始时设置 Thread.CurrentThread.CurrentCulture 对我有用

# ios - 如何为 NSFetchedResultsChangeUpdate 使用 newIndexPath？

> ID：12438827
> 
> 赞同：7
> 
> 时间：2012-09-15T15:53:50.103
> 
> 标签：ios, uitableview, core-data, nsfetchedresultscontroller

我以为我[明白了](http://wangling.me/2011/09/bugs-of-nsfetchedresultscontrollerdelegate-template-code)。但是我在我的应用程序中发现的一个新的崩溃却不是这样。因此，任何人都知道`NSFetchedResultsChangeUpdate`当*newIndexPath*为非零且与*indexPath*中的 indexPath 不同时真正正确的代码`-controller:didChangeObject:atIndexPath:forChangeType:newIndexPath:`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-08-08T22:02:50.143

我刚刚在更新时遇到了崩溃，`newIndexPath`当索引路径与从表中检索单元格所需的索引路径不匹配时，它似乎作为索引路径提供到获取的结果控制器对象中。考虑以下：

1.  表视图在索引 0 处有一个包含 15 个项目的部分。
2.  索引 13 处的项目（倒数第二个项目）被删除
3.  索引 14 处的项目（最后一个项目）已更新

在上述情况下，假设您正在使用`[tableView beginUpdates]`和`[tableView endUpdates]`在适当的`controllerWill/DidChangeContent:`方法中，您将需要使用`indexPath`参数从表中检索要更新的单元格（将是第 0 节，索引 14）和`newIndexPath`检索对象的参数使用结果控制器（将是第 0 节，索引 13）配置单元格。

我认为它是这样工作的，因为就结果控制器而言，删除似乎已经发生，但在表视图中没有发生（由于`beginUpdates/endUpdates`调用包装了更新）。如果您考虑上述情况，这是有道理的，但似乎所有文档都没有考虑这种情况。

所以问题的答案是，您似乎应该使用`indexPath`参数从表格视图中检索单元格，并使用`newIndexPath`参数从获取的结果控制器中检索对象。请注意，如果没有插入或删除，则它似乎传递`nil`给`newIndexPath`，因此在这种情况下，您必须同时使用`indexPath`这两个目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-14T11:41:45.470

如果 NSFetchedResultsController 的对象在“同时”发生变化和移动，则`-controller:didChangeObject:atIndexPath:forChangeType:newIndexPath:`发送类型 `NSFetchedResultsChangeUpdate`（[请参见此处](https://developer.apple.com/library/iOS/releasenotes/iPhone/NSFetchedResultsChangeMoveReportedAsNSFetchedResultsChangeUpdate/index.html)）。

我的解决方案是每次更新类型并且 indexPath 不等于 newIndexPath 时更改类型以移动

```
- (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject atIndexPath:(NSIndexPath *)indexPath forChangeType:(NSFetchedResultsChangeType)type newIndexPath:(NSIndexPath *)newIndexPath
{
    UITableView *tableView;

    if (controller == self.fetchedResultsController) {
        tableView = self.tableView;
    }

    else {
        tableView = self.searchDisplayController.searchResultsTableView;
    }

    // type is "update" ---> should be "move"
    if (type == NSFetchedResultsChangeUpdate && [indexPath compare:newIndexPath] != NSOrderedSame && newIndexPath != nil) {
        type = NSFetchedResultsChangeMove;
    }

    switch(type) {
        case NSFetchedResultsChangeInsert:
            [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeDelete:
            [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeUpdate:
            [self fetchedResultsController:controller configureCell:(UITableViewCell*)[tableView cellForRowAtIndexPath:indexPath] atIndexPath:indexPath];
            break;

        case NSFetchedResultsChangeMove:
            [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationLeft];
            [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath]withRowAnimation:UITableViewRowAnimationRight];
            break;
    }
} 
```

之后您必须更新表格视图

```
- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller
{
[self.tableView endUpdates];

[self.tableView reloadData];
} 
```

我希望这是有帮助的！

# php - 如何在嵌入式 YouTube 播放器中播放视频 ID 列表？

> ID：12438829
> 
> 赞同：0
> 
> 时间：2012-09-15T15:54:01.190
> 
> 标签：php, javascript, jquery, youtube, playlist

我最近发现了这个[jQuery YouTube TubePlayer 插件](http://tikku.com/jquery-youtube-tubeplayer-plugin)，它可以让你控制播放器、加载和播放视频。

它允许您定义一个“ [onPlayerEnded](http://tikku.com/jquery-youtube-tubeplayer-plugin#tubeplayer_tutorial_3) ”操作（允许我通过其 ID 播放下一个视频），但我认为，在设置并且播放器已初始化后，无法更改此参数。因此，我的“播放列表”仅限于两个视频：初始视频和在初始视频结束后播放的视频。

我错了，有没有办法使用插件让它工作，还是我应该尝试不同的方法？

例如，YouTube API 提供了一个[loadPlaylist](https://developers.google.com/youtube/js_api_reference#loadPlaylist)函数，它接受一组视频 ID，但是当我尝试直接使用这个 API 时，我不知道从哪里开始。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T15:57:22.223

您可以在 ytplayer 上使用 loadVideoById

```
 if (ytplayer) {
        ytplayer.loadVideoById(id, 0, "default");//Replace id with the video id.
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T12:38:12.917

可嵌入播放器采用数组形式的播放列表参数：

```
<div id="ytapiplayer">
      You will need Flash 8 or better to view this content.
</div>

<script type="text/javascript">
          var params = { allowScriptAccess: "always" };
          var atts = { id: "myytplayer" };

          playlistids = new Array('_T8dw1nK7b0','aF4i2XXFqL0','a_lsWeGq-HM')

          swfobject.embedSWF("http://www.youtube.com/v/OQSNhk5ICTI&enablejsapi=1&playerapiid=ytplayer&version=3&playlist=" + playlistids, "ytapiplayer", "425", "365", "8", null, null, params, atts);

          function onYouTubePlayerReady(playerId) {
            ytplayer = document.getElementById("myytplayer");
          }
</script> 
```

这需要包含[swfobject](http://code.google.com/p/swfobject/)。

# php - Apache HTTP Server 已停止工作 - curl

> ID：12438832
> 
> 赞同：0
> 
> 时间：2012-09-15T15:54:25.540
> 
> 标签：php, apache, curl

我使用 curl 从页面获取数据

```
 $curl = curl_init();
    curl_setopt($curl, CURLOPT_URL, $page);     
    curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($curl, CURLOPT_CONNECTTIMEOUT, 10);
    $str = curl_exec($curl);
    curl_close($curl);
    $raw= str_get_html($str); 
```

`$page`页面的网址在哪里

它工作得很好但是当我尝试从大于正常的页面获取数据时，我的 apache 停止响应

这是apache日志：

```
[Sat Sep 15 10:17:36 2012] [notice] Apache/2.2.21 (Win32) PHP/5.3.9 configured -- resuming normal operations
[Sat Sep 15 10:17:36 2012] [notice] Server built: Sep 10 2011 11:34:11
[Sat Sep 15 10:17:36 2012] [notice] Parent: Created child process 3908
[Sat Sep 15 10:17:36 2012] [notice] Child 3908: Child process is running
[Sat Sep 15 10:17:36 2012] [notice] Child 3908: Acquired the start mutex.
[Sat Sep 15 10:17:36 2012] [notice] Child 3908: Starting 64 worker threads.
[Sat Sep 15 10:17:36 2012] [notice] Child 3908: Starting thread to listen on port 8080.
[Sat Sep 15 10:17:53 2012] [notice] Parent: child process exited with status 3221225477 -- Restarting. 
```

我认为页面大小是一个问题（不确定），有人可以确认吗？有没有办法解决这个问题？我试图在 php.ini 中增加 memory_alocation 但它没有帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T16:00:42.553

也许您的 php 页面会超​​时，因为获取页面持续时间很长，您可以使用[`set_time_limit()`](http://php.net/manual/en/function.set-time-limit.php)以下方法禁用超时：

```
set_time_limit(0); 
```

将该行放在脚本的开头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T15:59:02.223

您的 Web 应用程序是否在 Windows 上运行？如果是这样，这篇文章可能会有所帮助：[http ://www.java-samples.com/showtutorial.php?tutorialid=1050](http://www.java-samples.com/showtutorial.php?tutorialid=1050)

# cocoa - 如何替换 10.8 中已弃用的 FSFileOperationCreate？

> ID：12438835
> 
> 赞同：1
> 
> 时间：2012-09-15T15:54:26.543
> 
> 标签：cocoa, osx-mountain-lion

我正在编写特定于 MountainLion 的代码，因此我想尽量避免使用已弃用的 API。

我使用[FSFileOperationCreate](https://developer.apple.com/library/mac/documentation/Carbon/Reference/File_Manager/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/c/func/FSFileOperationCreate)来接收有关复制进度的信息（kFSOperationBytesCompleteKey、kFSOperationThroughputKey、kFSOperationTotalBytesKey），但文档说

> 创建一个表示异步文件操作的对象。（在 OS X v10.8 中已弃用。在 Foundation 层，请改用 copyItemAtURL:toURL:error:。在 POSIX/BSD 层，请改用 copyfile(3) OS X Developer Tools Manual Page。）

使用 copyItemAtURL:toURL:error 和[NSFileManagerDelegate](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSFileManagerDelegate_Protocol/Reference/Reference.html)似乎不可能获得相同的信息。

如何在不自己重写代码的情况下在 10.8 中获得相同的行为？

苹果现在知道做同样的事情很简单吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T02:15:08.107

可能不是您希望听到的答案[1]，而是`copyfile(3)`使用您自己的 Obj-C 包装器。您应该能够使用回调计算您需要的所有内容，尤其是进度之一。HTH。

[1] 这个一般领域的很多 API 已被弃用，虽然引入了一些新的 API，但它们似乎不完整。合理的猜测可能会在 10.9 中推出……

# java - JOptionPane showConfirmDialog 选项的值是多少？

> ID：12438838
> 
> 赞同：4
> 
> 时间：2012-09-15T15:54:50.127
> 
> 标签：java, swing, joptionpane

如果我有类似的问题

```
someMethod(JOptionPane.showConfirmDialog(null, "Are you enrolled in a University?")); 
```

我想将答案“是”或“否”传递给一个方法……该方法应该接受什么参数？我认为这将是布尔值（是的是真的，不是的是假的）但我想我错了，还有一点业余的想法。那么是和否的答案是否具有 int 值？

我希望我的问题是有道理的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-15T16:00:29.990

[JOptionPane.showConfirmDialog()](http://docs.oracle.com/javase/7/docs/api/javax/swing/JOptionPane.html#showConfirmDialog%28java.awt.Component,%20java.lang.Object%29)返回一个`int`值，该值被解释为预定义的值，例如`JOptionPane.YES_OPTION`和 `JOptionPane.NO_OPTION`。如果要直接使用结果，则必须使用以下方法：

```
void someMethod(int dialogResult) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-15T15:56:59.397

它将返回一个`int`代表按下了哪个按钮。在没有方法调用的情况下运行代码，并查看按钮的顺序（'Yes No Cancel' 或其他）。如果在该示例中单击“是”，它将返回 0，“否”将返回 1，而取消 2（关闭对话框返回 -1）。它只是返回从 0 开始的索引。

有关详细信息，请参阅[JavaDoc](http://docs.oracle.com/javase/7/docs/api/javax/swing/JOptionPane.html#showConfirmDialog%28java.awt.Component,%20java.lang.Object%29)。

# jquery-mobile - 在opera mobile中更改div的高度

> ID：12438845
> 
> 赞同：1
> 
> 时间：2012-09-15T15:56:03.010
> 
> 标签：jquery-mobile, opera

我在 Opera mobile 上更改 div 的高度时遇到问题，在其他浏览器上它工作正常。

我使用了一个简单的计划，`$('div').height(newheight)`但它没有改变，我相信这是一个错误，但必须有一个解决方法，因为 Jquery Mobile 正在调整整个页面的大小。

你知道这是什么解决方法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:48:53.470

我建立的所有网站都有类似的问题，并且确实认为这是移动浏览器中的错误。我发现修复它的唯一方法实际上是在 SMS 插件标记中使用宽度/高度，但不幸的是它会弄乱它在其他浏览器上的显示方式。

我找到了两个解决方案：选项一是等待，因为 Opera 正在切换到 web-kit，选项二是插入一个简单的警报 jQuery 脚本，该脚本检测用户是否正在使用 Opera 浏览，并通知他们使用支持的浏览器（即 Firefox、Safari）。它将与我用于 IE 9 以下的任何代码块相同：

```
 if ( $.browser.msie ){
if($.browser.version == '6.0')
{   
  // page redirect and alert for upgrade
  alert("... REQUIRES YOU TO UPGRADE YOUR WEB BROWSER For enhanced security and features on this website, please download Internet Explorer 9");
}
else if($.browser.version == '7.0')
{    
  // page redirect and alert for upgrade
  alert(".... REQUIRES YOU TO UPGRADE YOUR WEB BROWSER For enhanced security and features on this website, please download Internet Explorer 9");
}
else if($.browser.version == '8.0')
{   
  // page redirect and alert for upgrade
  alert("... REQUIRES YOU TO UPGRADE YOUR WEB BROWSER For enhanced security and features on this website, please download Internet Explorer 9");
} 
```

} });

抱歉，我没有您需要的确切代码匹配，我只是还没来得及做，但是您需要将*browser.msie*替换为 mO 的任何标记

# java - Swing : 改变jframe的图标

> ID：12438849
> 
> 赞同：2
> 
> 时间：2012-09-15T15:56:49.067
> 
> 标签：java, swing, jframe, bufferedimage, imageicon

```
import javax.swing.*;
import java.awt.image.*;
import javax.imageio.*;
import java.io.*;

class Two {
    public static void main(String args[]) throws IOException
    {
        BufferedImage img = ImageIO.read(new File("index.jpg"));
        JFrame frmOne = new JFrame("FACEBOOK");
        frmOne.setIconImage(img);
        frmOne.setExtendedState(JFrame.MAXIMIZED_BOTH);
        frmOne.setVisible(true);
    }
} 
```

在此代码中，显示的是 JPG 图像而不是`JFrame`图标。但是，我想知道 line 的功能`BufferedImage img = ImageIO.read(new File("index.jpg"));`。任何帮助将不胜感激，我是新手。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T16:09:49.197

该代码的`BufferedImage img = ImageIO.read(new File("index.jpg"));`工作原理如下：

1.  `BufferedImage img = ...`表示该行的其余部分应存储到变量中。

2.  `ImageIO.read(...`说从给定文件中读取图像

3.  `new File("index.jpg")`说找到名为的文件`"index.jpg"`

所以总的来说，它从 index.jpg 文件中加载一个图像，并将这个图像存储到`BufferedImage img`. 然后，您稍后只需调用`frmOne.setIconImage(img)`which 从文件中读取的图像，并将其设置为框架的图标。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-15T16:06:52.803

该方法在应用程序之间切换时`setIconImage`更改显示在左上角的图像图标。`JFrame`另一种选择是：

```
frame.setIconImage(new ImageIcon("filename").getImage()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T16:33:14.843

`BufferedImage img = ImageIO.read(new File("index.jpg"));`

分析：

*   `BufferedImage img`

这会创建一个`BufferedImage`名为 的变量`img`，我们可以将其视为一个对象，其中包含 java 显示图像所需的数据，`BufferedImage` [根据文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/image/BufferedImage.html)：

> 该`BufferedImage`子类描述了`Image`一个可访问的图像数据缓冲区。A`BufferedImage`由图像数据的 a`ColorModel`和 Raster 组成。

*   `ImageIO`

此类基本上包含帮助我们读取和写入图像的方法，而无需每次都编写我们自己的方法，[根据文档](http://docs.oracle.com/javase/1.4.2/docs/api/javax/imageio/ImageIO.html)：

> `ImageReaders`一个包含用于定位和`ImageWriters`以及执行简单编码和解码的静态便捷方法的类 。

*   `read(File input)`

这是一个`public` `static`内部方法，`ImageIO`因此可以在没有`new`关键字的情况下访问。它允许我们读取我们想要用作 a 的文件的数据，并[根据 docs](http://docs.oracle.com/javase/1.4.2/docs/api/javax/imageio/ImageIO.html#read%28java.io.File%29)`Image`返回它读取的数据（因此我们将其保存在变量中）：

> 返回一个 BufferedImage 作为使用从当前注册的那些中自动选择的 ImageReader 解码提供的文件的结果。该文件被包装在一个 ImageInputStream 中。
> 
> 参数： input - 要读取的文件。
> 
> 返回： 包含输入的解码内容的 BufferedImage，或 null。
> 
> 抛出： IllegalArgumentException - 如果输入为空。IOException - 如果在读取过程中发生错误。

*   `new File(String filename)`

是类[File](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/File.html)中的非静态方法，因此必须使用新创建的实例 ( `new`) 来访问。它允许我们创建对文件的引用，以便我们可以[按照文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/File.html#File%28java.lang.String%29)`File`对实例执行操作（即读写等）：

> 通过将给定的路径名​​字符串转换为抽象路径名来创建一个新的 File 实例。如果给定的字符串是空字符串，则结果是空的抽象路径名。
> 
> 参数： pathname - 路径名字符串
> 
> 抛出： NullPointerException - 如果路径名参数为空

现在，当您调用`setIconImage(img)`我们从文件中读取的所有数据（这是我们的图片并已转换为`BufferedImage`）时，将用于将图片显示为`JFrame`s 图标。

另一种方法是：

```
// Create frame
String title = "Frame Title";
JFrame frame = new JFrame(title);

// Set icon
Image icon = Toolkit.getDefaultToolkit().getImage("icon.gif");
frame.setIconImage(icon); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-13T17:39:12.770

需要提到的是，您必须处理异常。恕我直言，代码可能最好这样写：

```
BufferedImage img = null;  

try {
  img = ImageIO.read(new File("youricon.png"));   // get icon for JFrame
} catch (IOException e) {
  e.printStackTrace();
} 

frame.setIconImage(img);                          // set JFrame icon 
```

此外，当您阅读文档时，请注意 .ico 文件不是由 ImageIO() 处理的。使用 .jpg、.png、.bmp 或 .gif 文件。有关详细信息，请参阅[http://docs.oracle.com/javase/7/docs/api/javax/imageio/package-summary.html](http://docs.oracle.com/javase/7/docs/api/javax/imageio/package-summary.html)。

高温高压

# mysql - 创建符号链接以使用自动登录访问 MySQL

> ID：12438850
> 
> 赞同：0
> 
> 时间：2012-09-15T15:56:55.590
> 
> 标签：mysql, terminal, mamp, ln

我正在寻找一种更简单的方法来`MySQL`通过终端登录，而不必每次都输入我的用户名和密码。

我正在使用`MAMP`并访问我的数据库，我只需键入即可`mysql`访问它。为此，我只是创建了一个符号链接`ln -s /Applications/MAMP/Library/bin/mysql /bin`，但要能够创建数据库，因此我需要登录。我知道我可以通过打字来做到这一点，`mysql -uroot -ppassword`但每次打字有点痛苦。他们是一种使用符号链接的方式，比如添加属性吗？说像`ln -s /Applications/MAMP/Library/bin/mysql -uroot -ppassword`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T16:08:57.853

符号链接不能包含命令行选项。

您可以改为将您的凭据放在一个[选项文件](http://dev.mysql.com/doc/refman/5.5/en/option-files.html)中。如果存储在默认位置（例如`~/.my.cnf`），您甚至不需要告诉*`mysql`*您阅读它。

```
[client]
user=root
password=foobar 
```

请注意，尤其是在为 root 用户执行此操作时，任何对您的选项文件具有读取权限的人都可以以您的用户身份登录。

# c++ - 使用类的静态函数模板成员的链接器错误

> ID：12438852
> 
> 赞同：0
> 
> 时间：2012-09-15T15:57:06.450
> 
> 标签：c++, templates, vector, compiler-errors, cmake

我不明白为什么它没有正确编译，链接器报告缺少符号：

架构 x86_64 的未定义符号：“bool swinadventure::Utils::is_last<__gnu_cxx::__normal_iterator > >, std::vector > >(__gnu_cxx::__normal_iterator > >, std::vector > const&)”，引用自：swinadventure ::Inventory::get_item_list(std::string, std::string) 在 Inventory.cpp.o

因为在这个过程的早期我也看到了这个错误：`/usr/bin/ranlib: file: liblibswinadventure.a(Utils.cpp.o) has no symbols`我认为它由于某种原因没有正确编译 utils 文件。

作为参考，我在安装和链接大多数自制工具的 Mac OS X 10.7 系统上使用 CMake。

**实用程序.h**

```
#ifndef UTILS_H_
#define UTILS_H_

#include <vector>

namespace swinadventure {

/**
 * Static class for various utilities and helper functions
 */
class Utils {
public:
    template <typename Iter>
    static Iter next_iterator(Iter iter);
    template <typename Iter, typename Cont>
    static bool is_last(Iter iter, const Cont& cont);
};

} /* namespace swinadventure */
#endif /* UTILS_H_ */ 
```

**实用程序.cpp**

```
#include "Utils.h"

namespace swinadventure {

/**
 * Returns the next iterator
 * http://stackoverflow.com/questions/3516196/testing-whether-an-iterator-points-to-the-last-item
 * @param iter
 * @return
 */
template <typename Iter>
Iter Utils::next_iterator(Iter iter) {
    return ++iter;
}

/**
 * Checks if the iterator is the last of the vector array
 * http://stackoverflow.com/questions/3516196/testing-whether-an-iterator-points-to-the-last-item
 * @param iter  iterator
 * @param cont  vector array
 * @return
 */
template <typename Iter, typename Cont>
bool Utils::is_last(Iter iter, const Cont& cont)
{
    return (iter != cont.end()) && (next_iterator(iter) == cont.end());
}

} /* namespace swinadventure */ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T16:04:09.297

**将模板函数定义移动到标题。**

链接器告诉您，在编译`Inventory.cpp`时，需要一个特殊的实例化`Utils::is_last`，但无法创建它的定义。

在编译`Utils.cpp`时， 的定义`Utils::is_last`是可用的，但不需要实例化。

因此，两个源文件都无法在编译时创建该函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T16:17:02.723

当你声明一个模板时，<> 中的变量会成为传递的类型的替身，因此这些变量的使用方式与类相同，只需要声明一次。因此`template <typename Iter, typename Cont>`can 应该被视为一个类定义，并移到`class Utils {`定义之外。的其他实例也`template`应该被删除，尤其是在`Utils::func()`定义之前。就目前而言，您基本上是在告诉它“创建一个名为 Iter 的类。创建一个名为 Iter 的类。创建一个名为 Iter 的类，等等。” 一旦遇到“Iter”类型的变量，它就不知道应该使用哪个变量。这个网站应该有助于模板，值得一看：

[http://www.parashift.com/c++-faq/templates.html](http://www.parashift.com/c++-faq/templates.html)

# java - 使用 Scene Builder 创建 JavaFX TreeView

> ID：12438853
> 
> 赞同：3
> 
> 时间：2012-09-15T15:57:10.270
> 
> 标签：java, javafx, treeview

我开始使用 JavaFX 并希望使用新的树视图（因为您可以使用多个图标来表示您的数据 - 这是我希望利用的）。

我创建了一个基本的表单/场景，上面有一个树视图和一个按钮。按下此按钮时，我希望填充树视图。

现在，我查看的所有示例都是在代码中生成表单/场景的位置，并且树视图绑定到该控件....如何使用 Scene builder 获得预先设计的表单并从外部代码填充它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-21T20:58:14.890

您可以在控制器类中使用以下代码。在 FXML 文件中，您需要将 FXID 设置为 selectionTreeView。在 JDK 8u5 中测试，它工作。

```
@FXML
TreeView selectionTreeView;
@FXML
private void handleButtonAction(ActionEvent event) {
    createTree();
}

public void createTree(String... rootItems) {
    //create root
    TreeItem<String> root = new TreeItem<>("Root");
    //root.setExpanded(true);
    //create child
    TreeItem<String> itemChild = new TreeItem<>("Child");
    itemChild.setExpanded(false);
    //root is the parent of itemChild
    root.getChildren().add(itemChild);
    selectionTreeView.setRoot(root);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T16:34:07.700

在场景构建器中设置控件的根节点上的类名（包括包）。如果单击，则转到右侧的代码选项卡，它是顶部字段。

现在在控件中的 TreeView 上设置一个 ID。

现在在控制器对象中添加一个 TreeView 字段，变量名称应该与您在场景构建器中设置的 TreeView ID 相同。使用@FXML 对字段进行注释。

现在，当加载 FXML 时，将创建控制器并设置 TreeView 字段。

# php - 不能用函数更新数组？

> ID：12438855
> 
> 赞同：1
> 
> 时间：2012-09-15T15:57:21.387
> 
> 标签：php, arrays, function

```
$LEVELS = array();

function addLevel() {
    $LEVELS[1] = "test";
}

var_dump($LEVELS); 
```

它打印

```
array(0) {
} 
```

这让我很恼火。有什么帮助吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-15T15:59:35.620

```
$LEVELS = array();

function addLevel() {
    global $LEVELS;
    $LEVELS[1] = "test";
}

addLevel(); // CALL YOUR FUNCTION
var_dump($LEVELS); 
```

也就是说，这是一个更好的方法：

```
$LEVELS = array();

function addLevel(&$LEVELS) { // This is a pass by reference -- points to the same array
    $LEVELS[1] = "test";
}

addLevel($LEVELS); // CALL YOUR FUNCTION
var_dump($LEVELS); 
```

或者 ...

```
$LEVELS = array();

function addLevel($LEVELS) { // THis gets a copy of the array
    $LEVELS[1] = "test";
    return $LEVELS;          //and send it back
}

$LEVELS = addLevel($LEVELS); // CALL YOUR FUNCTION
var_dump($LEVELS); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T15:59:12.570

您需要首先调用您的函数以使其代码执行任何操作（并且您的代码中只有函数体 - 这并不意味着它将被执行）。你似乎没有这样做。但即使你解决了这个问题，它仍然无法工作，因为你正在处理函数**范围内**的变量（也就是局部变量）。您的函数中没有 $LEVELS 数组，内部不可见另一个数组。因此，您的行`$LEVELS[1] = "Test";`只需创建在功能范围内可见的**新数组。**

要解决您的问题，您应该通过**引用**将数组传递给函数：

```
function addLevel( &$myArray ) {
  $myArray[1] = "test";
} 
```

然后传递你的数组：

```
addLevel( $LEVELS ); 
```

你也可以使用`global`，但这是**错误**的，所以不要这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T15:59:26.693

如果您不想访问 $LEVEL 变量，请在函数中使用“全局”。

```
$LEVELS = array();
function addLevel() {
    global $LEVELS;
    $LEVELS[1] = "test";
}
addLevel();
var_dump($LEVELS); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-15T15:59:30.940

这是一个[变量范围](http://php.net/manual/en/language.variables.scope.php)问题。

您需要将变量作为参数传递：

```
// declare array in global scope
$LEVELS = array(); 
// define function that takes array as parameter     
function addLevel($LEVELS) { 
    $LEVELS[1] = "test";
    return $LEVELS;
}
// execute function, pass array to function scope using parameter
$LEVELS = addLevel($LEVELS);
// show contents
var_dump($LEVELS); 
```

或者将其声明为全局变量：

```
// declare array in global scope
$LEVELS = array(); 
// define function
function addLevel() { 
    // import array from global scope
    global $LEVELS;
    $LEVELS[1] = "test"; 
}
// execute function
addLevel();
// show contents
var_dump($LEVELS); 
```

为了清楚起见并尽可能保持全局变量空间为空，通常首选第一个示例（作为参数传递）。

# c# - 带天数部分的时间跨度正则表达式

> ID：12438861
> 
> 赞同：1
> 
> 时间：2012-09-15T15:57:43.557
> 
> 标签：c#, regex, timespan

我刚刚尝试了数百个（如果不是数千个......）正则表达式来获得我想要的......但它们都没有奏效。

我只是在寻找一个代表 TimeSpan 的正则表达式`days.hours:minutes:seconds`：7.00:00:00 代表“7 天”

可悲的是，这个不起作用：

`(\d\d).(\d\d):(([0-6][0])|([0-5][0-9])):(([0-6][0])|([0-5][1-9]))`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T16:09:24.847

这在技术上更正确，也可能更有效：

```
\d+\.((0?\d)|(1\d)|(2[0-3]))(:[0-5]\d){2} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-27T03:48:17.947

接受的答案似乎不适用于基本情况。

遵循[TimeSpan 解析规则](http://msdn.microsoft.com/en-us/library/3z48198e(v=vs.110).aspx)，我想出了这个模式。

`^((?:-?0*\d+\.)?(?:0*)(?:2[0-3]|1[0-9]|[0-9]))(?::0*([0-5]?[0-9]))?(?::0*((?:[0-5]?[0-9])(?:\.\d{0,7})?))?$`

**注意**此模式将传递`10.12`格式，而 MSDN 将其标记为无效格式。这应该是 IMO 的有效格式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T16:06:44.060

那是因为您的正则表达式模式需要 2 位数字，而您只有 1 位数字。只需使用 ? 将第一个数字设为可选？

```
(\d?\d)\.(\d\d):(60|([0-5][0-9])):(60|([0-5][0-9])) 
```

或者更好的是，只需使用 + 来匹配一个或多个，因为该模式仍然无法匹配 100 天

```
(\d+)\.(\d\d):(60|([0-5][0-9])):(60|([0-5][0-9])) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-07-13T15:00:54.323

下面的正则表达式识别“[-][[dd.]HH:]mm[:ss[.fffffff]]”模式并使用命名组：

```
(?:(?<ne>-))?(?:(?:(?<dd>0*[0-9]+)[.])?(?:(?<HH>0*[2][0-3]|0*[1][0-9]|0*[0-9])[:]))?(?<mm>(?<=:)0*[0-5]?[0-9]|0*[5-9]?[0-9](?=[:]))(?:[:](?<ss>0*[0-5]?[0-9](?:[.][0-9]{0,7})?))? 
```

C#代码：

```
/// <summary>Time Span Standard regular expression.</summary>
/// <remarks>
/// Minutes are mandatory with required colon from left or right.
/// Pattern: [-][[dd.]HH:](:mm|mm:)[:ss[.fffffff]]
/// </remarks>
public const string TimeSpanStandard =
    @"(?:(?<ne>-))?" +
    @"(?:(?:(?<dd>0*[0-9]+)[.])?(?:(?<HH>0*[2][0-3]|0*[1][0-9]|0*[0-9])[:]))?" +
    @"(?<mm>(?<=:)0*[0-5]?[0-9]|0*[5-9]?[0-9](?=[:]))" +
    @"(?:[:](?<ss>0*[0-5]?[0-9](?:[.][0-9]{0,7})?))?"; 
```

**注意**：此模式将 'dd.HH' 视为无效格式。这对我有用，因为我使用这个正则表达式来查找和替换 JSON 字符串中的 TimeSpan，并且对“dd.HH”格式的支持可能会错误地获取正常数字。

正则表达式值示例：

```
-01.23:59:30.999999 - ✔

    Match  1   0-19 -01.23:59:30.999999
    Group ne   0-1  -
    Group dd   1-3  01
    Group HH   4-6  23
    Group mm   7-9  59
    Group ss 10-19  30.999999

Regex Pass:

    01.02:03:04.05 - ✔
    01.02:03:04 - ✔
    01.02:03 - ✔
    02:03:04.05 - ✔
       03:04.05 - ✔
    02:03 - ✔
    02:03:04 - ✔

Regex Fail:

    1.03:04.05 - ✗
         04.05 - ✗ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-13T06:00:40.593

这个对我来说效果很好。

```
^(\d{1,2}|\d\.\d{2}):([0-5]\d):([0-5]\d)(\.\d+)?$ 
```

以下是不同输入的验证结果。

```
+-----------------------+-------+
| Input                 | Valid |
+-----------------------+-------+
| 1.10:14:15.1          | True  |
+-----------------------+-------+
| .10:14:15.1           | False |
+-----------------------+-------+
| 1.10:14:15\.           | False |
+-----------------------+-------+
| 1.10:14:15.123haha456 | False |
+-----------------------+-------+
| 10:14:15.1            | True  |
+-----------------------+-------+
| 100:14:15.1           | False |
+-----------------------+-------+
| 6:14:15.1             | True  |
+-----------------------+-------+
| :14:15.1              | False |
+-----------------------+-------+
| 00:14:15              | True  |
+-----------------------+-------+ 
```

# javascript - 为什么 window.foo 未定义而对 foo 的调用会引发错误？

> ID：12438863
> 
> 赞同：1
> 
> 时间：2012-09-15T15:57:54.080
> 
> 标签：javascript, window, undefined, literals

在我的理解中，定义一个没有 var 关键字的变量只是评估将此变量添加到窗口对象。另一方面，试图访问尚未定义的对象的成员，结果为未定义。所以我可以做这样的事情：

```
> foo = "bar";
"bar"
> window.foo;
"bar"
> window.bar;
undefined 
```

为什么直接访问时无法获得未定义的变量值（未定义）？

```
> bar;
ReferenceError: bar is not defined 
```

还有一件事我不太明白，我认为这可能是相关的。当我在控制台中输入一些文字时，它们总是对自己进行评估。1 计算为 1，[1] 计算为 [1]，依此类推。我一直认为函数也是字面量，因为它具有一些类似价值的品质（成为一等公民）。但是当我尝试评估一个匿名函数时，我得到一个语法错误。

```
> function() {}
SyntaxError: Unexpected token ( 
```

我知道我可以定义一个命名函数，但计算结果为未定义（它在某处定义函数而不是它本身）。那么为什么不是函数字面量呢？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T16:24:54.160

对于您问题的第一部分，请参阅[ReferenceError 和 global object](https://stackoverflow.com/questions/10102862/referenceerror-and-the-global-object)。基本上，显式引用对象不存在的属性将返回 undefined，因为在某些情况下您可能想要处理并恢复。但是，引用一个不存在的变量不应该发生，所以它会大声失败。

对于您问题的第二部分，您试图声明一个没有名称的函数，这是不可能的。函数声明和函数表达式之间存在细微差别。函数名可选的函数表达式只能作为表达式的一部分出现，不能作为语句的一部分出现。所以这些是合法的：

`var foo = function () { };`

`(function () { });`

但不是这个：

`function () { };`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T16:06:41.683

如果您只是访问“栏”，则范围不清楚。首先在本地范围内寻找该变量（如果您在函数内部）。如果没有找到它，则检查窗口对象。但是你在逻辑上得到的任何错误都是指本地范围内不存在的“条”。

如果您想显示这样的功能，您希望显示什么？一个函数没有价值，它的声明当然也没有。您可以期望控制台能够执行函数并返回结果，但这也很危险。你不仅可以有一个不返回值的函数，而且，函数可以包含修改其环境的代码，换句话说，在控制台中运行一个函数可以修改文档的当前状态和当前的 Javascript 状态在里面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T16:23:18.387

Javascript 已被编码，如果您尝试读取对象的属性，您会得到`undefined`.

但是，如果您尝试读取一个不存在的变量的值，而没有将其作为全局对象的属性进行引用，则会引发错误。

可以通过多种方式解释这种选择，但您必须采访其中一位原始设计师才能确切了解他们选择它的原因。好消息是，一旦你理解了行为，你可以根据你想要的行为以一种或另一种方式对其进行编码。如果您知道全局变量可能未定义，那么您可以在它前面加上`window.xxx`并检查未定义。

无论如何，如果你想测试一个全局变量是否存在，你可以这样做：

```
if (typeof bar !== "undefined") 
```

或者

```
if (window.bar !== undefined) 
```

此外，在假设控制台与真正的 javascript 执行完全相同时要非常小心，因为它在许多方面并不完全相同。如果您正在测试边界行为，最好在实际的 javascript 执行上下文中对其进行测试（我发现 jsFiddle 对此非常有用）。

# c++ - LD 似乎忽略了指定的库

> ID：12438864
> 
> 赞同：0
> 
> 时间：2012-09-15T15:57:54.960
> 
> 标签：c++, opengl, linker, glut, glew

> **可能重复：**
> [Opengl linux undefined reference to basic functions](https://stackoverflow.com/questions/10000925/opengl-linux-undefined-reference-to-basic-functions)

我正在尝试从大学课程链接示例 OpenGL 程序，这是调用：

```
$ g++ -o 测试 -lGLEW -lglut -lGL -lGLU -lCg main.cpp
```

尽管安装了这些库并且链接器确实找到了它们（它不会像我输入错误其中一个的名称那样抱怨），但对于所有使用的库函数，我都会收到链接器错误。这是输出（为简洁起见，它要长得多）：

```
$ g++ -o 测试 -lGLEW -lglut -lGL -lGLU -L/usr/lib main.cpp
/tmp/ccTo5FlN.o：在函数“init()”中：
main.cpp:(.text+0xa): 未定义的对 `glewInit' 的引用
main.cpp:(.text+0x14): 未定义对“glEnable”的引用
main.cpp:(.text+0x593): undefined reference to `gluLookAt'
main.cpp:(.text+0x718): 未定义对“cgGLDisableProfile”的引用
main.cpp:(.text+0x73b): undefined reference to `glutSwapBuffers'

```

附加诊断信息：

```
$ g++ --版本
g++ (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3
$ g++ -v -o 测试 -lGLEW -lglut -lGL -lGLU -lCg main.cpp
使用内置规范。
COLLECT_GCC=g++
COLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-linux-gnu/4.6/lto-wrapper
目标：x86_64-linux-gnu
配置：../src/configure -v --with-pkgversion='Ubuntu/Linaro 4.6.3-1ubuntu5' --with-bugurl=file:///usr/share/doc/gcc-4.6/README。错误 --enable-languages=c,c++,fortran,objc,obj-c++ --prefix=/usr --program-suffix=-4.6 --enable-shared --enable-linker-build-id --with- system-zlib --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --with-gxx-include-dir=/usr/include/c++/4.6 --libdir=/usr/ lib --enable-nls --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --enable-gnu-unique-object --enable-plugin --enable-objc-gc --disable-werror --with-arch-32=i686 --with-tune=generic --enable-checking=release --build=x86_64-linux-gnu --host=x86_64- linux-gnu --target=x86_64-linux-gnu
线程模型：posix
gcc 版本 4.6.3 (Ubuntu/Linaro 4.6.3-1ubuntu5)
COLLECT_GCC_OPTIONS='-v' '-o' 'test' '-shared-libgcc' '-mtune=generic' '-march=x86-64'
 /usr/lib/gcc/x86_64-linux-gnu/4.6/cc1plus -quiet -v -imultilib 。-imultiarch x86_64-linux-gnu -D_GNU_SOURCE main.cpp -quiet -dumpbase main.cpp -mtune=generic -march=x86-64 -auxbase main -version -fstack-protector -o /tmp/cc8sHxzT.s
GNU C++ (Ubuntu/Linaro 4.6.3-1ubuntu5) 版本 4.6.3 (x86_64-linux-gnu)
    由 GNU C 版本 4.6.3、GMP 版本 5.0.2、MPFR 版本 3.1.0-p3、MPC 版本 0.9 编译
GGC 启发式：--param ggc-min-expand=100 --param ggc-min-heapsize=131072
忽略不存在的目录“/usr/local/include/x86_64-linux-gnu”
忽略不存在的目录“/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../../x86_64-linux-gnu/include”
#include "..." 搜索从这里开始：
#include 搜索从这里开始：
 /usr/include/c++/4.6
 /usr/include/c++/4.6/x86_64-linux-gnu/.
 /usr/include/c++/4.6/backward
 /usr/lib/gcc/x86_64-linux-gnu/4.6/include
 /usr/local/包括
 /usr/lib/gcc/x86_64-linux-gnu/4.6/include-fixed
 /usr/include/x86_64-linux-gnu
 /usr/包括
搜索列表结束。
GNU C++ (Ubuntu/Linaro 4.6.3-1ubuntu5) 版本 4.6.3 (x86_64-linux-gnu)
    由 GNU C 版本 4.6.3、GMP 版本 5.0.2、MPFR 版本 3.1.0-p3、MPC 版本 0.9 编译
GGC 启发式：--param ggc-min-expand=100 --param ggc-min-heapsize=131072
编译器可执行校验和：65b5171ac1bd7b3f07dbea6bdb24be3d
COLLECT_GCC_OPTIONS='-v' '-o' 'test' '-shared-libgcc' '-mtune=generic' '-march=x86-64'
 如 --64 -o /tmp/ccIov0RZ.o /tmp/cc8sHxzT.s
COMPILER_PATH=/usr/lib/gcc/x86_64-linux-gnu/4.6/:/usr/lib/gcc/x86_64-linux-gnu/4.6/:/usr/lib/gcc/x86_64-linux-gnu/:/usr /lib/gcc/x86_64-linux-gnu/4.6/:/usr/lib/gcc/x86_64-linux-gnu/
LIBRARY_PATH=/usr/lib/gcc/x86_64-linux-gnu/4.6/:/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu/:/ usr/lib/gcc/x86_64-linux-gnu/4.6/../../../../lib/:/lib/x86_64-linux-gnu/:/lib/../lib/:/usr /lib/x86_64-linux-gnu/:/usr/lib/../lib/:/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../:/lib/: /usr/lib/
COLLECT_GCC_OPTIONS='-v' '-o' 'test' '-shared-libgcc' '-mtune=generic' '-march=x86-64'
 /usr/lib/gcc/x86_64-linux-gnu/4.6/collect2 --sysroot=/ --build-id --no-add-needed --as-needed --eh-frame-hdr -m elf_x86_64 -- hash-style=gnu -dynamic-linker /lib64/ld-linux-x86-64.so.2 -z relro -o test /usr/lib/gcc/x86_64-linux-gnu/4.6/../../ ../x86_64-linux-gnu/crt1.o /usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu/crti.o /usr/lib/ gcc/x86_64-linux-gnu/4.6/crtbegin.o -L/usr/lib/gcc/x86_64-linux-gnu/4.6 -L/usr/lib/gcc/x86_64-linux-gnu/4.6/../。 ./../x86_64-linux-gnu -L/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../../lib -L/lib/x86_64-linux-gnu -L/lib/../lib -L/usr/lib/x86_64-linux-gnu -L/usr/lib/../lib -L/usr/lib/gcc/x86_64-linux-gnu/4.6/. ./../.. -lGLEW -lglut -lGL -lGLU -lCg /tmp/ccIov0RZ.o -lstdc++ -lm -lgcc_s -lgcc -lc -lgcc_s -lgcc /usr/lib/gcc/x86_64-linux-gnu/ 4.6/crtend.o /usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu/crtn。○

```

这是一个 64 位的 Ubuntu 12.04 系统。可能是什么问题呢？

# file - XSLT 解释 cdata 并写入文件

> ID：12438865
> 
> 赞同：-2
> 
> 时间：2012-09-15T15:57:56.290
> 
> 标签：file, xslt, cdata

我有这样的情况：

```
<List>
     <Entry>
     <![CDATA[......]]>
     </Entry>
     <Entry>
     <![CDATA[......]]>
     </Entry>
     ...
</List> 
```

CDATA 部分包含编码字节。每个条目的 cdata 都有一个控制字作为第一个字，它描述了数据将进入文件的长度以及在该文件中查找的长度。例如：00060000abcdef 将暗示一个包含“abcdef”且长度为 6 的文件在 0 处搜索。输出应该是一个包含 abcdef 的文件。

XSLT 是否是以某种方式解释 CDATA 并写入文件的正确选择？

1.  我可以考虑在 Xalan 中使用 redirect:write
2.  使用某种自定义 XSLT 函数，该函数将分解为解析器处理程序来处理此问题：

    ```
    <xsl:MyFunc></xsl:MyFunc> 
    ```

3.  有没有办法使用 for、if 等将自定义 XSLT 函数编写为标签？

根据 Dimitre Novatchev 的反馈进行编辑：

感谢您的答复！我希望下面能澄清这个问题。对不起。

输入 XML 文件：

```
<File>
  <Chunk>
      <Offset>200</Offset>
      <Length>100</Length>
      <Data>
          <![CDATA[data bytes that can be greater than 100 too, but first 100 is valid.]]>
      </Data>
  </Chunk>
  ...
</File> 
```

输出应该是一个包含以下内容的 html 文件：

```
<html>
   <body>
       <a href="resulting_file">file</a>
   </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T16:29:41.823

好吧，对于 XSLT，您的 XML 输入是否有 CDATA 部分并不重要，XSLT 数据模型是一个节点树，因此会有`Entry`包含文本的单个子文本节点的元素（例如，您的示例

```
 <Entry>
 <![CDATA[......]]>
 </Entry> 
```

一个`Entry`元素将包含一个文本节点，其中包含一个换行符，然后是一些空格字符，`......`然后是一个换行符，然后是一些空格字符）。

然后，您可以使用 XSLT 和 XPath 字符串函数处理文本节点的字符串值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T18:31:10.783

> 1.  XSLT 是否是以某种方式解释 CDATA 并写入文件的正确选择？

1.  **是的，CDATA 只是文本节点的（一部分）**，并作为任何其他文本节点进行处理。

2.  **是的，XSLT 2.0`xsl:result-document`指令**用于写入（可能有许多不同的）文件。

> .2\. 使用某种自定义 XSLT 函数，该函数将分解为解析器处理程序来处理此问题：
> 
> `<xsl:MyFunc></xsl:MyFunc>`

**是的，这是使用标准 XSLT 2.0 指令完成的`xsl:function`**

```
3.Is there a way to write custom XSLT functions as tags using for, if etc.? 
```

**这个问题不清楚。XSLT 有很多这样的指令，例如** `xsl:for-each`, `xsl:if`, `xsl:choose`, `xsl:when`, `xsl:otherwise`, ... 等。

**XPath 2.0（在 XSLT 2.0 中使用）x 作为它自己的`for`, `if` `then` `else`,`return`子句**。

# sql - 简单的 SQL JOIN 问题

> ID：12438868
> 
> 赞同：1
> 
> 时间：2012-09-15T15:58:30.350
> 
> 标签：sql, sql-server-2005, join

我有一个简单`JOIN`的问题，我遇到了`SQL`以下问题。该语句返回 1 条记录，但如果我注释掉第 5 行，它不会返回任何记录。有任何想法吗？

```
SELECT A.district__c, b.annual_conference__c
FROM   Contact_UpdateDistricts A
JOIN   Contact B on a.id = b.id
WHERE  A.error NOT LIKE '%success%'
and a.id = '003Z000000C80tUIAR'
and A.district__c <> b.annual_conference__c 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T17:08:00.240

我最终选择了决议的最后一个条款：

```
SELECT A.district__c, b.annual_conference__c 
FROM Contact_UpdateDistricts A 
JOIN Contact B on a.id = b.id 
WHERE A.error NOT LIKE '%success%' 
and CAST(A.district__c AS VARCHAR(18)) <> CAST(b.annual_conference__c AS VARCHAR(18)) 
```

# jsf - 如何在 PhaseListener 中检索会话范围的托管 bean？

> ID：12438869
> 
> 赞同：1
> 
> 时间：2012-09-15T15:58:36.590
> 
> 标签：jsf, jsf-2, session-scope, phaselistener

我在设置授权侦听器（实现 PhaseListener）来管理身份验证和自动化时遇到了麻烦。

更具体地说，我设置了一个名为 SessionBean 的会话范围 bean：

```
@ManagedBean
@SessionScoped
public class SessionBean{

   private String loggedUser;

   public SessionBean(){
    logger.info("Sono nel costruttore di SessionBean()");
   }
   public String login(){
       ....
   }
   ...
} 
```

在我的 sun-web.xml 中：

```
 <managed-bean>
    <managed-bean-name>SessionBean</managed-bean-name>
    <managed-bean-class>it.uniroma3.acme.auction.bean.SessionBean</managed-bean-class>
    <managed-bean-scope>session</managed-bean-scope>
  </managed-bean> 
```

在 login() 中，我对用户名/密码进行控制，如果成功，我设置“loggedUser”。

我的 AuthorizationListener 是：

```
public class AuthorizationListener implements PhaseListener {

    private String currentUser;

    private SessionBean sessionBean;

    public void afterPhase(PhaseEvent event) {
        SessionBean sessionBean = (SessionBean)event.getFacesContext().getExternalContext().getSessionMap().get("SessionBean");
        String currentUser = sessionBean.getLoggedUser();

        if (sessionBean != null) {
            ...
               String currentUser = sessionBean.getLoggedUser();
        }
            else {
                 ...
            }
    }

    ...
} 
```

在 sun-web.xml 中：

```
 <!-- Authentication and authorization block starting -->
    <lifecycle>
        <phase-listener>AuthorizationListener</phase-listener>
    </lifecycle>
    <navigation-rule>
        <from-view-id>/*</from-view-id>
        <navigation-case>
            <from-outcome>loginPage</from-outcome>
            <to-view-id>login.jsf</to-view-id>
        </navigation-case>
    </navigation-rule>
  <!-- Authentication and authorization block ending --> 
```

但我收到一个空指针 sessionBean.getLoggedUser()。因此，当 AuthorizationListener 检查用户时，仍然没有创建 SessionBean。这就是为什么我添加了一个“如果 SessionBean 不存在，则创建它并将其放入 SessionMap”，但仍然无法正常工作的原因。

我没有被迫使用这种方法进行身份验证和授权，但我需要的是避免“session.setAttribute（“username”，username）。所以任何其他策略都会非常感激。谢谢，Andrea

编辑：正如 BalusC 所建议的，我编辑了 afterPhase 方法。始终为空的 SessionBean 仍然存在问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T17:30:13.197

`@ManagedProperty`仅在`@ManagedBean`课堂上工作。你`PhaseListener`的不是。

您需要从会话映射中手动获取它。

```
SessionBean sessionBean = (SessionBean) event.getFacesContext()
    .getExternalContext().getSessionMap().get("SessionBean"); 
```

请注意，它仍然可以`null`在第一个 HTTP 请求上。

然而，常见的方法是使用 servlet`Filter`来完成这项工作，而不是`PhaseListener`. 会话范围的托管 bean 可用作会话属性。

```
SessionBean sessionBean = (SessionBean) session.getAttribute("sessionBean"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T14:34:06.147

在您的代码中，在您的 phaseListener 中，您没有**确切**说明您将在哪个阶段实现代码，您应该调用您的托管 bean。您应该在覆盖方法的`RESTORE_VIEW`阶段中执行此操作。请参阅以下内容：`AuthorizationListener``getPhaseId()`

```
public PhaseId getPhaseId() {

        return PhaseId.RESTORE_VIEW;

    } 
```

如果您的托管 bean 仍然为空，请删除托管 bean 注释，将其注册到 中`faces_config`，并在阶段侦听器中使用此辅助方法来调用托管 bean：

```
public static Object resolveExpression(String expression) {
    FacesContext ctx = FacesContext.getCurrentInstance();
    Application app = ctx.getApplication();
    ValueBinding bind = app.createValueBinding(expression);
    return bind.getValue(ctx);
} 
```

要在后阶段方法中调用它，请使用：

```
public void afterPhase(PhaseEvent event) {

SessionBean sessionBean =(SessionBean)resolveExpression("#{SessionBean}");
String currentUser = sessionBean.getLoggedUser(); 
```

# java - 简单的数学 Java 程序，if 语句不起作用

> ID：12438870
> 
> 赞同：1
> 
> 时间：2012-09-15T15:58:53.390
> 
> 标签：java, math, if-statement

我无法让这个程序正常工作，它需要 2 个数字然后做你告诉它做的数学类型。我写这篇文章只是为了刷新我几个月没有使用 java 的记忆。这是代码：

```
import java.util.Scanner;
public class math {
    public static void main(String[] args){
        Scanner one = new Scanner(System.in);
        Scanner two = new Scanner(System.in);
        System.out.print("Enter a number: ");
        int n1 = one.nextInt();
        System.out.print("Enter a second number: ");
        int n2 = one.nextInt();
        System.out.print("Add, subtract, multiply, or divide? ");
        String f = two.nextLine();
        System.out.println(f);
        if (f=="add"){
            System.out.println(n1 + n2);
        }else if (f=="subtract") {
            if (n1>n2){
                System.out.println(n1 - n2);
            }else{
                System.out.println(n2 - n1);
            }
        }else if (f=="multiply"){
            System.out.println(n1 * n2);
        }else if (f=="divide"){
            if (n1>n2){
                System.out.println(n1 / n2);
            }else{
                System.out.println(n2 / n1);
            }
        }
    }
} 
```

编辑：谢谢大家，它适用于 f.equals()

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T16:00:43.773

```
if (f=="add") 
```

比较参考。你需要

```
if(f.equals("add")) 
```

因为java有很多对象，主要是==用于参考比较，除非你不是为原语做的。

如果你想检查它是否有一个字符串，

```
if(f.contains("asdas")) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-15T16:00:46.163

您将字符串与`==`,进行比较`f.equals("add")`（与其他比较相同）。一般来说，`==`应该只用于原始数据类型而不是对象（如`String`s）。

```
import java.util.Scanner;
public class math {
    public static void main(String[] args) {
        Scanner in = new Scanner(System.in);
        System.out.print("Enter a number: ");
        int n1 = in.nextInt();
        System.out.print("Enter a second number: ");
        int n2 = in.nextInt();
        System.out.print("Add, subtract, multiply, or divide? ");
        String f = in.nextLine();
        System.out.println(f);
        if (f.equals("add")) {
            System.out.println(n1 + n2);
        } else if (f.equals("subtract")) {
            if (n1 > n2){
                System.out.println(n1 - n2);
            } else {
                System.out.println(n2 - n1);
            }
        } else if (f.equals("multiply")) {
            System.out.println(n1 * n2);
        } else if (f.equals("divide")) {
            if (n1>n2) {
                System.out.println(n1 / n2);
            } else {
                System.out.println(n2 / n1);
            }
        }
    }
} 
```

此外，不需要使用两个`Scanner`实例，一个就足够了。顺便说一句，字符串也有一个`equalsIgnoreCase`方法可以测试相等但忽略字符的大小写。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-15T16:01:55.670

您的字符串比较需要更改为使用`String.equals()`，而不是`==`：

```
if (f=="add"){ 
```

到

```
if ("add".equals(f)){ 
```

和

```
 }else if (f=="subtract") { 
```

到

```
 }else if ("subtract".equals(f)) { 
```

等等

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-02T00:48:32.557

尽管

```
f.equals("add"); 
```

会起作用，如果我输入添加，它将不起作用。要解决此问题，您可以将 f.equals("word") 替换为

```
f.equalsIgnoreCase("add"); 
```

这允许任何情况下，AddD 将起作用，ADD 将起作用，aDD 将起作用，等等。

希望这可以帮助！

# linux - Ghostscript 无效字体错误

> ID：12438873
> 
> 赞同：1
> 
> 时间：2012-09-15T15:59:09.763
> 
> 标签：linux, pdf, gnuplot, fedora, ghostscript

我的系统中有 ghostscript 或字体问题。我正在使用 Fedora 17。我试图将 ps 文件转换为 pdf [http://krajniak.info/tmp/intro.ps](http://krajniak.info/tmp/intro.ps) 不幸的是我得到的是：

```
Error: /invalidfont in /findfont
Operand stack:
   Symbol-Oblique   Symbol
Execution stack:
   %interp_exit   .runexec2   --nostringval--   --nostringval--   --nostringval--   2   %stopped_push   --nostringval--   --nostringval--   --nostringval--   false   1   %stopped_push   1894   1   3   %oparray_pop   1893   1   3   %oparray_pop   --nostringval--   1877   1   3   %oparray_pop   1771   1   3   %oparray_pop   --nostringval--   %errorexec_pop   .runexec2   --nostringval--   --nostringval--   --nostringval--   2   %stopped_push   --nostringval--   1852   2   4   %oparray_pop
Dictionary stack:
   --dict:1160/1684(ro)(G)--   --dict:0/20(G)--   --dict:82/200(L)--   --dict:174/256(L)--
Current allocation mode is local
Last OS error: 2
Current file position is 15269
GPL Ghostscript 9.05: Unrecoverable error, exit code 1 
```

显示此文件时出现相同的错误：evince intro.ps

```
[teodor@lukrecja graphs]$ evince intro.ps 
invalidfont -10
invalidfont -10

(evince:5621): EvinceDocument-CRITICAL **: ev_document_misc_pixbuf_from_surface: assertion `surface' failed

(evince:5621): GLib-GObject-CRITICAL **: g_object_unref: assertion `G_IS_OBJECT (object)' failed
invalidfont -10

(evince:5621): EvinceDocument-CRITICAL **: ev_document_misc_pixbuf_from_surface: assertion `surface' failed

(evince:5621): GLib-GObject-CRITICAL **: g_object_unref: assertion `G_IS_OBJECT (object)' failed
invalidfont -10 
```

我尝试卸载 freetype-in​​finality，也尝试在 /etc/fonts/infinality/infinality.conf 中启用“Type 1”字体，但没有任何结果。

gs -v 的结果：

```
Search path:
   /usr/share/ghostscript/9.05/Resource/Init :
   /usr/share/ghostscript/9.05/lib :
   /usr/share/ghostscript/9.05/Resource/Font :
   /usr/share/ghostscript/fonts : /usr/share/fonts/default/ghostscript :
   /usr/share/fonts/default/Type1 : /usr/share/fonts/default/amspsfnt/pfb :
   /usr/share/fonts/default/cmpsfont/pfb : /usr/share/fonts :
   /usr/share/ghostscript/conf.d : /etc/ghostscript :
   /etc/ghostscript/9.05 : /usr/share/poppler/cMap/Adobe-CNS1 :
   /usr/share/poppler/cMap/Adobe-GB1 :
   /usr/share/poppler/cMap/Adobe-Japan1 :
   /usr/share/poppler/cMap/Adobe-Japan2 :
   /usr/share/poppler/cMap/Adobe-Korea1 
```

**解决** 了简单删除所有tex-{fonts}和wine-{fonts}，然后重新安装ghostscript。目前我的 /usr/share/fonts 包含这样的文件夹：

```
abattis-cantarell
cjkuni-uming
default
dejavu
google-droid
jomolhari
jsmath-fonts
khmeros
liberation
lklug
lohit-assamese
lohit-bengali
lohit-devanagari
lohit-gujarati
lohit-kannada
lohit-oriya
lohit-punjabi
lohit-tamil
lohit-telugu
nhn-nanum
opensymbol
paktype-naqsh
paratype-pt-sans
sil-abyssinica
sil-padauk
smc
stix
thai-scalable
vlgothic
wqy-zenhei 
```

也许有人有一些建议，我应该怎么做。再见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T16:12:13.600

看起来您的符号字体无效。此外，您的 Ghostscript 似乎没有使用内置字体（和 ROM 文件系统），而是专门或优先使用系统字体。

我的 Ghostscript 副本使用 GS 附带的字体，并内置在 ROM 文件系统中，您的文件可以完美运行。

# cocoa - 具有粘性顶部、左侧和底部“标题”的 NSScrollView

> ID：12438879
> 
> 赞同：2
> 
> 时间：2012-09-15T15:59:37.207
> 
> 标签：cocoa, nsview, drawrect, nsscrollview

我正在尝试在 Cocoa 中创建时间线控件。[这就是我想要达到的目标。](http://i.stack.imgur.com/UyC5E.png)它基本上是一个标准的时间线设计。

但是，我不知道该采取哪种方法。问题在于顶部标尺、左侧轨道列表和底部音频波形显示。这三个部分需要始终可见并“粘”在边缘。标尺和音频波形只能水平滚动，而左侧的轨道列表只能垂直滚动。

对于顶级标尺，NSRulerView 似乎很合适，因为它只是一个标尺。

对于左视图和底视图，我不知道该走哪条路线。[我已经使用宽垂直 NSRulerView 作为曲目列表。](http://i.stack.imgur.com/NvbKN.png)这可行，但会产生额外的问题。例如：顶部标尺出现在曲目列表上方。

到目前为止，我已经编写了四个选项：

1.  忘记 NSRulerView 并在文档视图中绘制所有自定义内容。这似乎可行，但在 NSRulerView 函数中构建了回避。另外，我需要找到一种方法来缩短滚动条，这样它们就不会与侧视图和顶视图重叠。

2.  将 NSRulerViews 用于顶部和左侧。然后可能会在文档视图中手动绘制底部。

3.  将左视图放在滚动视图之外，并通过将其链接到主滚动视图来手动上下滚动。顶部使用 NSRulerView，在文档视图中手动绘制音频波形。

4.  嵌入在另一个 NSScrollView 中的 NSScrollView。外部处理水平滚动，内部滚动视图处理垂直滚动。我认为可能，但它似乎很hacky。

所以我的问题归结为：走哪条路？任何人都可以阐明这个问题并指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T16:34:45.227

### 我的理解：

*   您想要一个 NSScrollView 左侧的视图，该视图与 NSScrollView 一起垂直滚动，同时忽略水平滚动。

*   你想要一个 NSScrollView 下面的视图，它与 NSScrollView 一起水平滚动，同时忽略垂直滚动。

*   你想要统治者。

### 要完成此任务：

*   使用 3 个不重叠且不相互继承的独立滚动视图。

*   在您希望它们出现的任何视图中激活标尺。

*   同步滚动视图（这样当一个滚动时，另一个相应地滚动）。

如何同步滚动视图在帮助中。请参阅用户体验 > 控件 > Mac 的滚动视图编程指南 > 同步滚动视图。这也间接链接在 NSScrollView 的帮助指南的标题中。

如果您希望三个滚动视图包含在 NSSplitView 中以简化调整大小，则必须添加第四个视图以使用未使用的角（放置控件的好地方）。由于 NSSplitView 只能垂直或水平拆分，因此您必须创建一个包含 2 个拆分视图的 NSSplitView，其中每个拆分视图包含您实际看到的 2 个视图（沿一个方向拆分，然后沿另一个方向拆分）。拆分视图的大小调整必须以类似于滚动同步的方式同步，以保持所有四个视图的直线交叉。

# ruby-on-rails - tinyMCE 不适用于 Chrome 中的 Active Admin

> ID：12438880
> 
> 赞同：1
> 
> 时间：2012-09-15T15:59:53.170
> 
> 标签：ruby-on-rails, tinymce, activeadmin, srware-iron

我使用本[指南](http://code.davemorro.com/post/7919233521/hacking-activeadmin-adding-a-javascript-text-editor)将 tinyMCE 集成到 Active Admin textarea 元素中。

我做了：

下载最新版本的 tinyMCE (tinymce_3.5.6.zip) 并将 tiny_mce 文件夹放到我的 puplic/javascripts 文件夹中。

添加了 app/assets/javascripts/active_admin.js：

```
tinyMCE.init({
  mode : "textareas",
  theme : "advanced",
  theme_advanced_buttons1 : "bold, italic, underline, strikethrough, |, bullist, numlist, blockquote, |, undo, redo, |, link, unlink, code",
  theme_advanced_buttons2 : "",
  theme_advanced_buttons3 : "",
  theme_advanced_toolbar_location : "top",
  theme_advanced_toolbar_align : "center",
  theme_advanced_resizing : false
}); 
```

编辑 config/initializers/active_admin.rb：

```
#...
  config.register_javascript '/javascripts/tiny_mce/tiny_mce.js'
  config.register_javascript 'active_admin.js'
end 
```

这导致在 chrome 中的活动管理员中没有集成 tinyMCE。Chrome 控制台的输出：

```
Uncaught ReferenceError: tinyMCE is not defined active_admin.js:1
  (anonymous function) active_admin.js:1
Load jQuery first! tiny_mce.js:1
Uncaught TypeError: Object #<Object> has no method 'extend' tiny_mce.js:1
c.create tiny_mce.js:1
  (anonymous function) tiny_mce.js:1
Uncaught TypeError: Object #<Object> has no method 'init' active_admin.js:1
  (anonymous function) active_admin.js:1 
```

虽然 tinyMCE 在 Safari 和 SRWare Iron 中运行良好。但是 SRWare Iron 控制台在控制台输出中仍然存在一些错误：

```
active_admin.js:1Uncaught ReferenceError: tinyMCE is not defined
(anonymous function)active_admin.js:1 
```

怎么修？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T15:59:53.170

我通过重命名解决了这个`app/assets/javascripts/active_admin.js`问题`app/assets/javascripts/active_admin_custom.js`。

我之所以来到这里，是因为在生成的带有 textarea 的 html 页面中发现了两个带有`active_admin.js`名称的 javascript... 这似乎是冲突。

# javascript - 使用 jQuery 更改 ShareThis 消息

> ID：12438882
> 
> 赞同：1
> 
> 时间：2012-09-15T16:00:03.840
> 
> 标签：javascript, jquery, asp.net, sharethis

我的 ASP.Net 应用程序中有一个 ShareThis 小部件，单击它会启动一个弹出窗口，用户可以键入一条消息，然后与许多服务共享它。我想设置一个更有用的与上下文相关的“罐头”消息，但我无法让它工作。我的代码和屏幕截图如下。

![在此处输入图像描述](../Images/37ed6543d11e52fd072d3b42bc3568ee.png)

```
<div id="ShareDiv"><span class='st_sharethis_large' displayText='ShareThis'></span>
        <span id="button_1" class='st_facebook_large' displayText='Facebook'></span>
        <span class='st_twitter_large' displayText='Tweet'></span>
        <span class='st_googleplus_large' displayText='Google +'></span>
        <span class='st_email_large' displayText='Email'></span></div>
    <script type="text/javascript"> var switchTo5x = true; </script>
    <script type="text/javascript" src="http://w.sharethis.com/button/buttons.js"> </script>
    <script type="text/javascript"> stLight.options({ publisher: "ur-ae96e1f4-e30b-b79b-fb91-                           54d133283702" }); </script>
    <script>
        $(document).ready(function(){
            $('#ShareDiv').click(
                function(){
                    $('textarea').val('Some useful canned message');
                });
        });

    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T00:15:47.033

你有没有试过这个：

只需将参数 st_msg（和 st_via，如果你愿意的话）添加到你的 span 标签中，类为“st_twitter_large”。

来自：http: [//support.sharethis.com/customer/portal/articles/517332](http://support.sharethis.com/customer/portal/articles/517332)

# java - 从超类字段继承 Java

> ID：12438883
> 
> 赞同：0
> 
> 时间：2012-09-15T16:00:04.790
> 
> 标签：java, inheritance

我在 Java 中创建了这两个类，我需要像这样定义我的结构：

```
class UnitType {
    Position myPos;
    public Position getPosition() {
        return myPos;
    }
}
class Unit extends UnitType {
    Position myPos;
    public Unit(Position myPos) {
        this.myPos = myPos;
    }
} 
```

我的问题，我可以这样做：

```
class UnitTest {
    private Unit testUnit;
    @Before
    public void setUp() {
        testUnit = new Unit(new Position(1,0));
    }
    @Test
    public void testPositionUnit() {
        assertEquals("Unit should be placed at (1,0)", new Position(1,0), testUnit.getPosition());
    }
} 
```

如果我能做到这一点，如果我更新了我的 Unit 类中的位置会发生什么。调用 getPosition() 时会看到错误的指针吗？

许多人想知道我的 Position 类的 .equals 方法，所以这里是：[https ://pastebin.com/Tfer1kqR](https://pastebin.com/Tfer1kqR)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T16:02:22.030

如果这样做，您将[**隐藏**](http://docs.oracle.com/javase/tutorial/java/IandI/hidevariables.html)超类的`myPos`字段`UnitType`。例如：

```
Unit u = new Unit(new Position(1, 0));
System.out.println(u.myPos);         // (1, 0) assuming toString() was overriden
System.out.println(u.getPosition()); // null
UnitType ut = u;
System.out.println(ut.myPos);        // null 
```

然后，即使您可以更新类的`myPos`字段`Unit`，`getPosition()`也将*始终*return `null`，因为它将返回`myPos`从未设置过的超类的字段。

此外，如果您想确定两个`Position`对象是否相同，请确保实现`.equals()`(and `.hashCode()`)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T18:25:46.907

为确保您正在查看正确的位置，请通过[超级构造函数设置位置](http://docs.oracle.com/javase/tutorial/java/IandI/super.html)

```
class UnitType {
    Position myPos;  // This could be private final.

    // Only needed for backwards compatibility if you do new UnitType().
    UnitType() { this(null); }  // this(...) delegates to another constructor.
    // sets the position field.
    UnitType(Position myPos) { this.myPos = myPos; }

    public void getPosition() {
        return myPos;
    }
}
class Unit extends UnitType {
    // No field definition here that masks the super-class one.
    public Unit(Position myPos) {
        super(myPos);  // Invoke UnitType(Position) to set the field
    }
} 
```

然后让你的单元测试工作，确保`Position`类覆盖`equals(Object)`，以便`assertEquals`测试等效性而不是检查它们是否是同一个对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T16:19:56.613

首先，你的方法`getPosition()`必须返回一些东西。在您的代码中它不返回任何内容，因为您已经指定了具有返回类型的方法`void`

其次，根据`Position`您使用的类（自己的类？，几何位置？，...），您可能需要`equals(Object o)`根据您想要实现的目标覆盖/编写该方法。

一般来说`testUnit.getPosition()`，`new Position(..)`不会返回相同的对象（尽管它们可能包含相同的值），从而使断言为假。

# javascript - jquery滑动菜单，默认折叠所有菜单

> ID：12438884
> 
> 赞同：0
> 
> 时间：2012-09-15T16:00:09.380
> 
> 标签：javascript, jquery, menu

我从一个允许 jquery 滑动菜单的[互联网](http://sarfraznawaz.wordpress.com/2010/03/09/creating-stylish-sliding-menu-with-jquery/)教程中偷了一个脚本。

菜单很好用，除了默认情况下第一个父链接是展开的。我希望默认关闭所有父菜单项。

这是javascript：

```
<script type="text/javascript">
$(function(){
    // hide all links except for the first
    $('ul.child:not(:first)').hide();
    $("a.slide:first").css("background-color","");
    // for image
    // $("a.slide:first").css("background-image","url('path')");

    $('ul.parent a.slide').click(function(){
        $('ul.parent a.slide').css("background-color","");

        $('ul.parent a.slide').hover(function(){
            $(this).css("background-color","");
        });

        $('ul.parent a.slide').mouseout(function(){
            $(this).css("background-color","");
        });

        $(this).mouseout(function(){
            $(this).css("background-color","");
        });

        $(this).css("background-color","");

        // slide all up
        $('ul.child').slideUp('slow');

        // show the links of current heading
        $(this).next().find('a').show();

        // slide down current heading
        $(this).next().slideDown('fast');

        // prevent default action
        return false;
    });
});

</script> 
```

完整的页面代码为：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>title</title>
<script type="text/javascript" src="jquery.js"></script>

<script type="text/javascript">
$(function(){
    // hide all links except for the first
    $('ul.child:not(:first)').hide();
    $("a.slide:first").css("background-color","");
    // for image
    // $("a.slide:first").css("background-image","url('path')");

    $('ul.parent a.slide').click(function(){
        $('ul.parent a.slide').css("background-color","");

        $('ul.parent a.slide').hover(function(){
            $(this).css("background-color","");
        });

        $('ul.parent a.slide').mouseout(function(){
            $(this).css("background-color","");
        });

        $(this).mouseout(function(){
            $(this).css("background-color","");
        });

        $(this).css("background-color","");

        // slide all up
        $('ul.child').slideUp('slow');

        // show the links of current heading
        $(this).next().find('a').show();

        // slide down current heading
        $(this).next().slideDown('fast');

        // prevent default action
        return false;
    });
});

</script>

<style type="text/css">

a
{
    //outline:none;
}

ul
{
    list-style:none;
}

ul.parent
{
    margin:0px;
}

ul.parent a
{
    display:block;
    //width:200px;
    //border-bottom:1px solid #336699;
    //background:#3399FF;
    //color:#FFFFFF;
    //font-weight:bold;
    //text-decoration:none;
    //padding:0px;
    //margin: 0;

}

ul.parent a:hover
{
    //color:#000000;
    //background:#66CC66
}

ul.child a
{
    //background:#333333;
    //color:#FFFFFF;
    //border-bottom:1px solid #f6f6f6;
    //font-weight:normal;
    //margin-left:-40px;
    //padding:7px;
    //width:200px;
    //display:block;
    //line-height:10px;
}

ul.child a:hover
{
    //color:#3333333;
    //background:#CCCCCC
}

</style>

</head>

<body>

    <ul class="parent">
        <li>
            <a href="#" class="slide"><img src="images/organisationbutton.png" border=0></a>            
            <ul class="child">
                <li><a href="#"><img src="images/personbutton2.png" border=0></a></li>
                <li><a href="#"><img src="images/jobsbutton2.png" border=0></a></li>

            </ul>

         </li>
    </ul>

    <ul class="parent">
        <li>
            <a href="#" class="slide"><img src="images/risksbutton.png" border=0></a>

            <ul class="child">
                <a href="#" class="slide"><img src="images/risksbutton3.png" border=0></a>
                <a href="#" class="slide"><img src="images/linkriskstojobsbutton.png" border=0></a>
                <a href="#" class="slide"><img src="images/linkhealthriskstopeople.png" border=0></a>
            </ul>

         </li>
    </ul>

    <ul class="parent">
        <li>
            <a href="#" class="slide"><img src="images/policiesbutton.png" border=0></a>

            <ul class="child">
                <a href="#" class="slide"><img src="images/trainingrequiredbylaw.png" border=0></a>
            </ul>

         </li>
    </ul>

    <ul class="parent">
        <li>
            <a href="#" class="slide"><img src="images/trainingbutton.png" border=0></a>

            <ul class="child">
                <a href="#" class="slide"><img src="images/trainingcoursesbutton.png" border=0></a>
                <a href="#" class="slide"><img src="images/medicalinterventionsbutton.png" border=0></a>
                <a href="#" class="slide"><img src="images/trainingdonebutton.png" border=0></a>
            </ul>

         </li>
    </ul>

    <ul class="parent">
        <li>
            <a href="#" class="slide"><img src="images/assessmentbutton.png" border=0></a>

            <ul class="child">
                <a href="#" class="slide"><img src="images/individualtrainingbutton.png" border=0></a>
                <a href="#" class="slide"><img src="images/departmentcompliancebutton.png" border=0></a>
            </ul>

         </li>
    </ul>

</body>
</html> 
```

任何帮助都会一如既往地受到赞赏，我相信有一个简单的解决方案，但我的 javascript 技能还处于起步阶段。

再次感谢，R

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T16:07:11.220

可能只需删除这两行就可以了：

```
// hide all links except for the first
$('ul.child:not(:first)').hide();
$("a.slide:first").css("background-color",""); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T16:07:59.570

只需更改此：

```
// hide all links except for the first
$('ul.child:not(:first)').hide(); 
```

有了这个：

```
// hide all links
$('ul.child').hide(); 
```

# javascript - 我正在使用 javascript 窗口对象函数在选项卡运行应用程序获得焦点时及时调用 rails 控制器？

> ID：12438887
> 
> 赞同：0
> 
> 时间：2012-09-15T16:00:19.240
> 
> 标签：javascript, jquery, ruby-on-rails, ajax, ruby-on-rails-3

在测试这段代码时，我发现它在使用 firefox 浏览器时工作得非常好，用 firebug 检查了它，但它不适用于 chrome 浏览器，这是我的代码：

```
<script type="text/javascript">
     window.onfocus = startCheck;
        var dualLogin;
            function startCheck() {
            dualLogin = setInterval(function () {
                checkTable();
            }, 20000);
        }
        function checkTable() {
            $.ajax({
                url:"<%= url_for :controller => 'xyz',:action => 'abc'%>",
                cache:false,
                dataType:'json',
                success:function (data) {
                    if (data.status=='dual')
                    {
                        logout();
                    }
                }
            })
        }
        window.onblur = stopCheck;
        function stopCheck() {
            window.clearInterval(dualLogin);
        }
        function logout(){
            alert('you are to be logged out');
            window.location.replace("/registeration_page");
        }                                       
    </script> 
```

任何人都可以帮助提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T16:54:31.627

我创建了一个[jsfiidle](http://jsfiddle.net/gryfC)。看一看。单击结果框以获得焦点，然后单击其他以获得模糊。

# javascript - 谷歌地图用phonegap放大

> ID：12438894
> 
> 赞同：0
> 
> 时间：2012-09-15T16:00:46.647
> 
> 标签：javascript, html, cordova, geolocation

我正在使用 phonegap 处理谷歌地图。我已经用下面的代码在我的屏幕上添加了地图。但问题是当我想用我的两根手指放大并拖动它们时它不会放大。如何添加此功能？

这是我的代码。

```
document.addEventListener("deviceready", onDeviceReady, false);

function onDeviceReady() {
onSuccess();
}

function onSuccess () {
var map = document.getElementById('map');
var mapOptions = {
    center : new google.maps.LatLng(37.7831, -122.4039),
    zoom : 12,
    mapTypeId : google.maps.MapTypeId.ROADMAP
};

var gmap = new google.maps.Map(map, mapOptions);

var markerOptions = {
    position : new google.maps.LatLng(37.7831, -122.4039)
};

var marker = new google.maps.Marker(markerOptions);
marker.setMap(gmap);

var infoWindowOptions = {
    content : 'Here I am'
};

var infoWindow = new google.maps.InfoWindow(infoWindowOptions);
google.maps.event.addEventListener(marker, 'click', function (e) {
    infoWindow.open(map, marker);
});

}

function onError (error) {
alert('code: ' + error.code     + '\n' +
    'message'+ error.message
);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T04:38:17.510

您应该考虑使用 mapkit 插件实现 Native。这会将捏合添加到缩放。 [https://github.com/phonegap/phonegap-plugins/tree/master/iOS/MapKit](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/MapKit)

但请注意：可能会随着 IOS6 的变化而改变

# java - 在 Spinner 上执行 click 事件以执行 onItemSelected 中的代码

> ID：12438895
> 
> 赞同：1
> 
> 时间：2012-09-15T16:00:58.283
> 
> 标签：java, android, android-layout, android-spinner

我想在我的活动完全加载后自动单击 Spinner 元素。

我使用此代码来设置微调器和适配器：

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_read_data);
        getActionBar().setDisplayHomeAsUpEnabled(true);

        mSpinnerDay = (Spinner) mTable.findViewById(R.id.spieltag_choice);
        mAdapterSpinnerDay = new ArrayAdapter<CharSequence>(this, R.layout.custom_spinner);
        mAdapterSpinnerDay.setDropDownViewResource(R.layout.custom_spinner);
        mSpinnerDay.setAdapter(mAdapterSpinnerDay);

}

    private void setUpSpinnerListener(final IGameData data) {
    mSpinnerDay.post(new Runnable() {
        public void run() {
        mSpinnerDay.setOnItemSelectedListener(new OnItemSelectedListener() {
            public void onItemSelected(AdapterView<?> adapterView, View view, int i, long l) {
            for (GameDayData d : data.getGameDay()) {
                if (d.getName().equals(adapterView.getSelectedItem().toString())) {
                TableRow row = (TableRow) mTable.findViewById(R.id.row_punkte_tag);
                TextView t = (TextView) row.findViewById(R.id.punkte_tag);
                t.setText("Punkte: " + d.getScore());
                TableRow row2 = (TableRow) mTable.findViewById(R.id.row_position_tag);
                TextView t2 = (TextView) row2.findViewById(R.id.position_tag);
                t2.setText("Position: " + d.getPosition());
                return;
                }
            }
            }

            public void onNothingSelected(AdapterView<?> adapterView) {
            return;
            }
        });
        }
    });
}

public void onTeamCheckReadComplete(IGameData data) {
    for (GameDayData d : data.getGameDay()) {
        mAdapterSpinnerDay.add(d.getName());
    }
} 
```

将适配器设置为微调器后，我尝试使用以下代码执行单击：

```
mSpinnerDay.setSelection(0, true);
    View view = (View)  mSpinnerDay.getChildAt(0);
    long id = mSpinnerDay.getAdapter().getItemId(0);
    mSpinnerDay.performItemClick(view, 0, id); 
```

但这不起作用。有人可以告诉我如何自动单击微调器元素吗？当我在应用程序中通过触摸事件选择微调器项目时，一切正常。

问候， 桑德罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T16:11:45.543

我不认为你是`setUpSpinnerListener`从你发布的代码中调用的。即使您正在调用它，我认为将可运行对象发布到 setuplistener 也没有好处。

将 runnable 中的所有代码移到后面`setAdapter`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T16:39:17.587

**更正的解决方案** 据我了解，您有一个带有项目 A、B、C 和 D 的微调器。您希望预先选择项目 A。您还希望用户能够选择 A、B、C 和 D 并基于此执行操作。

在 onCreate() 方法中：

```
mSpinner.setAdapter(myAdapter);
mSpinner.setOnItemSelectedListener(this); // have the activity implement
                                          // OnItemSelectedListener interface
doAction(0); 
```

然后像这样实现 onItemSelected 操作：

```
@Override
void onItemSelected(AdapterView<?> parent, View view, int position, long id) {
    doAction(position);
} 
```

您必须实现 doAction(int position) 方法来处理如何根据适配器中项目的位置更新您的活动。清除？

在此处阅读有关此项目的更多信息以及如何使用它：http: [//developer.android.com/reference/android/widget/AdapterView.OnItemSelectedListener.html](http://developer.android.com/reference/android/widget/AdapterView.OnItemSelectedListener.html)

# php - MySQL PDO fetchAll 作为具有整数索引的数组

> ID：12438896
> 
> 赞同：6
> 
> 时间：2012-09-15T16:01:12.287
> 
> 标签：php, pdo, pdostatement

我有一个有两列的表。表：`ctgtable`和列：`id`和`ctg`。由于我完全从以前的**`mysql_*`**功能转移到`PDO`，我面临一些~~愚蠢~~的错误（或者可能缺乏知识）。

# 问题

我想将整个表的`ctg`列（总共最多 20 行）选择为具有整数索引的数组。

# 我的方法

我认为最接近的可能解决方案是：

```
<?php
    $sth = $dbh->prepare("SELECT id, ctg FROM ctgtable");
    $sth->execute();
    /* Fetch all of the values of the second column */
    $result = $sth->fetchAll(PDO::FETCH_COLUMN, 1);
    var_dump($result);
?> 
```

对于相同的结果，还有其他更短/更好的选择吗？或者这是获取结果的最佳/唯一可能的方法。

# 样品表

```
id      ctg
01     movie
27       tv
64     sports 
```

等等

# 样本结果

```
Array( 1 => "tv",
    2 => "movie",
    3 => "anime",
    4 => "game",
    5 => "telugu"
); 
```

索引可能从 0 开始，也可能不从 0 开始。这对我来说并不重要。我尝试搜索这样一个可能的问题，但它们似乎都与我的问题无关。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T07:26:37.160

你的方法很好。虽然如果您不需要 ID，为什么需要查询它？

```
<?php
    $sth = $dbh->prepare("SELECT **ctg** FROM ctgtable");
    $sth->execute();
    /* Fetch all of the values in form of a numeric array */
    $result = $sth->fetchAll(**PDO::FETCH_ARRAY**);
    var_dump($result);
?>
```

对 MySQL 的约束越少，处理时间就越短，最终会产生更好的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T16:25:23.740

您可以简单地执行以下操作

```
 <?php
    //connect to db    

    $array = array();//define array

    $query = "SELECT * FROM ctgtable";    
    $result = $pdo->prepare($query);
    $result->execute();

   while ($row = $result->fetch()) {
      $id =  $row['id'];
      $ctg = $row['ctg'];        
      $array[$id] = $ctg;        
  }

 print_r($array);
 //close connection
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T16:39:56.050

您的解决方案没问题，您也可以调用[fetchColumn()](http://php.net/manual/en/pdostatement.fetchcolumn.php)而不是`fetchAll()`. 如果您链接调用，它将如下所示：

```
$entries = $dbh->query("SELECT ctg FROM fruit")->fetchColumn(); 
```

# c# - 需要命令/查询分离命令端结果

> ID：12438897
> 
> 赞同：5
> 
> 时间：2012-09-15T16:01:15.890
> 
> 标签：c#, asp.net-mvc-3, design-patterns, domain-driven-design, cqrs

我正在尝试使用以下**CQRS 模式创建一个****ASP.NET MVC**应用程序（这是我对 CQRS 的第一次尝试）。我知道*命令方面*没有任何结果。在[这个答案](https://stackoverflow.com/a/6704149/974276)中，[@Johannes Rudolph](https://stackoverflow.com/users/125407/johannes-rudolph)说如果我们需要命令端的结果，我们可以创建一个**事件**并订阅，以解决问题。现在，假设我们正在创建一个登录页面：

 *****```
public class AuthController : Controller {

    private ICommandHandler<LoginCommand> _handler;

    public AuthController(ICommandHandler<LoginCommand> handler) {
        _handler = handler;
    }

    public ActionResult Login(LoginModel model) {
        if(ModelState.IsValid) {
            var cmd = new LoginCommand(model.Username, model.Password);
            _handler.Handle(cmd);
            // how to notify about login success or failed?
        }
        return View(model);
    }
} 
```

如何通知登录命令成功或失败？我知道我可以在上面的方法中创建一个事件`LoginCommand`并订阅它。但是，我的订阅是一个单独的方法，不能返回（例如：）指定的视图。看：

```
 public ActionResult Login(LoginModel model) {
        if(ModelState.IsValid) {
            var result = true;
            var cmd = new LoginCommand(model.Username, model.Password);
            cmd.CommandCompleted += e => { result = e; };
            _handler.Handle(cmd);
            // is this correct?
            if(result)
                // redirect to ReturnUrl
            else
                // something else
        }
        return View(model);
    } 
```

这是真的？或者你有什么更好的主意吗？还是我错了？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-16T01:40:50.777

正如其他人所说，身份验证过程对于异步命令和一般的 CQRS 来说并不是一个很好的例子。实际上，同步请求/响应可能是一个更好的解决方案。

现在要使用异步命令执行此操作（或任何其他示例），您需要发送命令并**最终**查询该命令的结果。

发送命令的部分是“简单的”。我不会在控制器中注入处理程序，而是注入能够调度该命令的东西，例如允许您 .Send() 命令的总线。总线的实现是无关紧要的，可以从内存中的直接调度程序到处理程序再到实际的服务总线实现。为了跟踪命令，最好在构造函数中生成一个标识符（如 Guid.NewGuid()）并将其作为命令已成功发送的标志返回。

现在从命令的实际处理程序中，您需要发布一个事件，UserAuthenticated 或 AuthenticationFailed 包含 CommandId 和任何其他可能相关的数据，如用户名、用户角色等。

在 asp.net 应用程序中，您需要为这两个事件中的每一个都有一个订阅者。

在这里，您有两个选择：

1.  存储命令结果，等待js代码查询
2.  使用 SignalR 之类的东西来通知事件的客户端代码。

提交登录信息后，客户端代码会取回命令ID。根据您选择的选项，您可以每隔 X 秒从 javascript 中获取登录状态（选项 1）或等待 SignalR 等机制通知（选项 2）。

有时选项 1 更好，有时选项 2 更好。如果您可以估计一个足够快的池化间隔值并且在大多数情况下在第一次调用中返回结果，那么选项 1 是最好的。当在大多数情况下命令被认为是成功的（如订单提交）并且您只对命令失败的极少数情况感兴趣时，选项 2 通常是最好的。

这对于身份验证过程来说可能听起来很复杂，但确实如此，但一般来说，当您设计成功的过程和命令时，只有很少的失败命令，这实际上工作得很好。

对于其他情况，您可能需要结合使用这两个选项 - 使用选项 2 来获取命令已执行的通知，然后查询视图模型以获取相关数据。

还有一个涉及 AsyncController 的附加选项，您可以在其中发送命令并异步等待处理程序接收消息。我没有为此使用异步控制器，所以以下只是一个意见，但我只是觉得如果你需要使用异步控制器，你可能会更好地使用使用异步控制器的请求-响应实现来最小化影响在网络服务器上。

我必须警告你，我已经看到 CQRS 被滥用并强加于一个设计为同步请求响应的进程（如 CRUD 操作），结果是系统处理模式处理事件的实际基础设施处理，然后处理实际商业逻辑。

最后，我强烈推荐 Udi Dahan 关于 CQRS 和 SOA 主题的著作，尤其是他警告滥用 os CQRS 的那些。

希望这可以帮助您进入 CQRS 的伟大世界 :)

（这最终比预期的要长得多）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-17T06:50:55.747

CQRS 是一个不错的概念。但它非常空洞。很多东西都可以藏在它的壳下。所以要小心你放在那里的东西。明智地思考，不要害怕回到更简单的事情上。

根据您的问题，处理命令可以是同步的或异步的。我不建议将您的命令发送到总线作为您的基本架构。在大多数情况下，以同步方式处理命令更容易处理。通常你发送一个应该是有效的命令。（例如：StartDate 不得大于结束日期）。然后你到达你的命令处理程序，你可以在你的应用层的上下文中验证你的命令的有效性。（例如：应该存在的聚合根“House”确实存在吗？）最后，您的域处理此命令并根据域上下文检查其有效性，（例如，AR“House”可能正在执行复杂的事情，您的命令可能成为其中的一部分...）

你想从这个命令验证流程中得到什么。好吧，这取决于你。您可能有兴趣知道或不知道某些验证未能警告您的用户。或者抛出异常，因为这种情况甚至不应该由任何客户端处理。

如果你选择异步，这意味着 UI 不会意识到你的命令执行中的任何问题。可能有效，但在大多数情况下，您的客户填写表格并愿意现在知道其操作是否失败。

就我而言，我越是探索这些模式（或者你决定如何称呼它们），我就越认为异步应该被视为异常。您最好完全同步地进行命令处理和事件投影。和 async 需要异步特征的部分。您可以开始完全同步，并且在您发现这种方法不适合的地方，好吧，一切都准备好将东西放在总线上，然后进行异步。

我记得我的两便士值得，我正在自己玩它的路上，

[编辑]

通常，执行我的命令会返回：

```
public class CommandValidation 
{

    public List<ValidationMessage> Messages { get; private set; }
} 
```

CQRS 告诉我从我所做的方法中返回 void。每个聚合都有一个命令验证属性，该属性在命令执行期间被填充。在执行结束时，我可以将其返回给客户端。

[/编辑]

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-15T16:09:59.830

为什么要使用 CQRS 对用户管理和身份验证进行建模？这是一个已解决的问题，无需在这里重新发明轮子。

另外：身份验证是一个包含多个有界上下文的问题，非常不适合 CQRS。CQRS 旨在在有界上下文中实现，而不是在应用程序范围内实现。使用有效的登录机制，并将您的建模工作集中在域上，而不是基础设施上。

用 Rob Ashton 的话来说：如果您的解决方案比您的问题更复杂，那么您可能做错了什么。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-09-15T19:37:54.270

如其他地方所述，CQRS 可能不适用于简单的身份验证和用户管理。但是，如果您确实选择使用它，那么问题的核心可能是您试图使命令异步。我认为通常最好从返回成功或失败的同步命令开始。（注意：这仍然可能涉及任何给定提供程序中的“异步”代码，例如 AJAX 或 TPL 代码，但从概念上讲，调用者正在等待并期望执行命令的成功或失败结果。）

如果您发现确实需要多于“一点时间”的命令，例如多于几秒钟，您可能会发现您实际拥有的是一个由命令启动的长时间运行的进程。在这种情况下，命令仍然是同步的，但不是在完成整个过程时返回成功，而是返回成功，它已经*启动*了该过程。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-15T16:07:11.020

事件驱动模式不适用于 ASP.MVC。如果您正在执行大量 I/O 密集型工作以从 IO 完成端口中受益，则可以使用[异步控制器。](http://msdn.microsoft.com/en-us/library/ee728598%28v=vs.100%29.aspx)*****

# asp.net - 如何为特定文件夹设置启动页面？

> ID：12438899
> 
> 赞同：2
> 
> 时间：2012-09-15T16:01:44.533
> 
> 标签：asp.net, vb.net, iis-7.5

如何为特定文件夹设置启动页面？

![在此处输入图像描述](../Images/0f9b1769310bce8bddb7f6176a8887ed.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T16:18:07.710

首先，您必须在文件夹中添加 web.config 文件并`web.config`添加此规则

```
<defaultDocument enabled="true">
   <files>      
       <clear/>
       <add value="index.aspx"/>     
   </files>
</defaultDocument>

  <modules runAllManagedModulesForAllRequests="true"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T19:27:05.683

好的，我找到了解决方案。

```
<system.webServer>
<defaultDocument enabled="true">
  <files>
    <clear/>
    <add value="Pages/Default.aspx"/>
  </files>
</defaultDocument>
<modules runAllManagedModulesForAllRequests="true"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T16:03:23.537

只需将其命名为**default.aspx 即可**。

***更新：***

您可能会检查是否在 IIS 中将 default.aspx 定义为默认文档。

检查下面的链接。它将指导您检查 IIS 的设置是否正常。

[http://www.iis.net/learn/web-hosting/web-server-for-shared-hosting/default-documents](http://www.iis.net/learn/web-hosting/web-server-for-shared-hosting/default-documents)

[http://www.iis.net/configreference/system.webserver/defaultdocument](http://www.iis.net/configreference/system.webserver/defaultdocument)

[在 IIS 7.5 中设置默认网页](https://stackoverflow.com/questions/5623681/setting-default-webpage-in-iis-7-5)

希望能帮助到你

# java - 如何处理一般网页内容的 i18n，例如隐私政策文章？

> ID：12438902
> 
> 赞同：0
> 
> 时间：2012-09-15T16:02:00.043
> 
> 标签：java, internationalization, policy

为了让您了解这个问题，[http://www.google.com/intl/pl/policies/privacy/](http://www.google.com/intl/pl/policies/privacy/)是国际化的网络内容。

我知道 Spring 和 JSTL 消息中的资源包。这种类型的文本消息资源对于整个网页来说似乎是个坏主意（文本太多，难以管理）。是否有任何标准化的方法，比如带有 XSTL 的消息或 XML/HTML 片段，来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T17:23:22.527

你的意思是，除了谷歌处理它的方式？

*   指示“国际”的不同 URL：`*/intl`

*   URL 进一步用语言代码限定：`*/intl/pl`

*   各种路径上下文从特定语言的 URL 桥接到内容：`*/intl/pl/policies`

*   特定语言的网页，处理“文本太大”问题，由上述 URL 限定。

请注意，通过在此路径中首先放置国际化限定符，给定语言的翻译集有效地“组合在一起”。相反，可能会按主题（policy/intl/pl）分组——这是一个组织决策。

在考虑您提出这个问题时可能要达到的目的时，想到您可能希望将此类页面包装到动态页面表示技术（JSP、JSF、struts 等）中。请记住，“动态网页”和“静态网页”内容都有其目的，并且确实在网络生态系统中共存：选择最好的，并找到在两者之间架起桥梁的方法。在这种情况下，将静态策略页面的 URL 视为您的应用程序可以控制的动态元素，而不是页面内容。

# javascript - 从图像到图像轻轻羽化

> ID：12438904
> 
> 赞同：0
> 
> 时间：2012-09-15T16:02:06.297
> 
> 标签：javascript, jquery, image, css

我对自己提出了这样做的挑战：http: [//i.minus.com/iV4cpb8tkRjFn.jpg](http://i.minus.com/iV4cpb8tkRjFn.jpg)

全屏使用 CSS3 或 jQuery（或者，到目前为止，无论做什么）。我已经放弃了动态模糊的想法，因为它太重了。所以我制作了两张图片：一张正常，一张模糊。然后，我尝试使用一些 CSS3 魔法进行羽化（基本上是“将中心从未模糊图像羽化到模糊图像”），但它没有削减它。显然（至少现在）这个技巧只适用于 RGBa。

有没有其他人知道如何做到这一点？

# .net - MVVM 在 Windows 8 应用商店应用程序中死了吗？

> ID：12438908
> 
> 赞同：11
> 
> 时间：2012-09-15T16:02:35.873
> 
> 标签：.net, mvvm, microsoft-metro, mvvm-light

我已经开始了解 Windows 8 应用商店应用程序。

我记得之前从 Silverlight 和 WPF 编程中，人们适应了 MVVM 概念，现在我不确定是否应该使用我当时学到的东西。

我添加了对 GalaSoft.MvvmLight 的引用并创建了一个 ViewModel 并将其添加到我的 xaml 中，如下所示：

```
DataContext="{Binding Source={StaticResource Locator}, Path=Welcome}" 
```

看起来微软在 LayoutAwarePage 中包含了某种 ModelView 实现：

```
protected override void LoadState(Object navigationParameter, Dictionary<String, Object> pageState)
{
    // TODO: Assign a bindable collection of items to this.DefaultViewModel["Items"]
    //  DefaultViewModel["WelcomeTiles"] = WelcomeTiles;
} 
```

如果设置了以下数据上下文，则可以访问它。

```
<DataContext="{Binding DefaultViewModel, RelativeSource={RelativeSource Self}}" /> 
```

所以现在我不确定是否应该使用 MVVMLight 来创建我记得的 ModelView，或者只是将代码隐藏文件中的数据添加到 DefaultViewModel。

人们对两者都有什么体验？我刚刚开始，我的下一个目标是为在 GridView 中单击项目时添加处理程序 - 上述哪些路径可以轻松地做到这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-16T06:52:51.880

**不，MVVM 永远不会消亡！**

Model-View-ViewModel 是一种设计模式，因此它不依赖于特定的框架或实现。但是，它是一种最方便与支持数据绑定的 UI 框架一起使用的 UI 设计模式。

Windows 8 Metro 应用程序包括 XAML 和一个与 Silverlight 和 WPF 非常相似的绑定框架。因此，MVVM 是管理代码的绝佳选择。

[此博客文章](http://blog.davemdavis.net/2012/03/04/what-is-this-layoutawarepage-you-speak-of/)`LayoutAwarePage`中描述了您发现的代码。它试图通过提供各种存根实现来简化 Windows 8 Metro 应用程序的开发。此页面包含一个，它是一个可观察的字典。`DefaultViewModel`

就个人而言，我不会使用它！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-03T01:02:01.350

**不，MVVM 没有死，而且还活着！！！**

MVVM 的 ColinE 定义很好地恢复了它。事实上，MVVM 基本上是一种设计模式，不依赖于特定的框架。

使用 MVVM 不是教条……尽管大多数使用 XAML 应用程序编程 [WPF、Silverlight、WP 7 和 WinRT……] 工作的人都会同意 MVVM 真正促进了清晰的 SOC 关注点分离，在GUI 和后端逻辑。

我个人将 Nuget 的 Laurent Bugnion 的 MVVMLight 包与 WinRT 结合使用，尽管您可以随意使用任何其他 MVVM 包或您觉得放心的选项。

如果您需要更多示例参考，我会邀请您查看 Gill Cleeren 的“Windows 8 商店中的 MVVM”网络研讨会的以下记录

[http://www.silverlightshow.net/video/MVVM-in-Win8-Webinar.aspx](http://www.silverlightshow.net/video/MVVM-in-Win8-Webinar.aspx)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-15T18:21:03.930

MVVM 在 Windows 8 Metro 应用程序中并未消亡。

我们没有在我们的应用程序中使用 MvvmLight，但是您需要的基本组件，例如绑定到 ViewModel 属性、在 ViewModel 中使用 ICommands 和 INotifyPropertyChanged 都可以通过非常小的更改（如果有的话）获得。

微软最近发布了一个[不错的示例。](http://code.msdn.microsoft.com/windowsapps/Data-Binding-7b1d67b5/)它没有明确地说 MVVM，但它有你需要开始的东西。并且 Josh Smith 的[文章](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx#id0090055)当然还是有用的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-06T20:47:57.187

我推荐[http://stylemvvm.codeplex.com](http://stylemvvm.codeplex.com)，它是从头开始编写的，以支持 Metro 项目（C#、C++/CX、HTML/JS）。它包括一个完整的 IOC、ICommand 和附加命令行为的实现、Tiles、徽章、Toasts 和 Charms 的服务。它还包括一个很好的 Mediator 类，它可以感知调度程序。加上许多 Visual Studio 模板可帮助您入门。

注意：因为我写了它，我可能有偏见:)

# haskell - 在使用类型族限制 GADT 时摆脱“非详尽模式匹配”警告

> ID：12438909
> 
> 赞同：7
> 
> 时间：2012-09-15T16:02:37.760
> 
> 标签：haskell, pattern-matching, warnings, ghc, type-families

给定以下程序：

```
{-# LANGUAGE DataKinds, GADTs #-}
{-# LANGUAGE TypeFamilies #-}

data Foo = A | B
type family IsA (foo :: Foo) :: Bool

type instance IsA A = True
type instance IsA B = False

data Bar (foo :: Foo) where
    BarA :: (IsA foo ~ True) => Int -> Bar foo
    BarB :: (IsA foo ~ False) => String -> Bar foo

f :: Bar A -> Int
f bar = case bar of
    BarA x -> x 
```

用于上面定义`-fwarn-incomplete-patterns`的总功能时，我从 GHC 7.4.2 收到此警告：`f`

```
Warning: Pattern match(es) are non-exhaustive
         In a case alternative: Patterns not matched: BarB _ 
```

当然，即使尝试添加匹配项也是没有意义的`BarB`：

```
Couldn't match type `'False' with `'True'
Inaccessible code in
  a pattern with constructor
    BarB :: forall (foo :: Foo). IsA foo ~ 'False => String -> Bar foo,
  in a case alternative
In the pattern: BarB _
In a case alternative: BarB _ -> undefined
In the expression:
  case bar of {
    BarA x -> x
    BarB _ -> undefined } 
```

有没有办法说服 GHC`f`是完全的？另外，这是 GHC 的一个错误，还是只是一个已知的限制？或者实际上有一个很好的理由为什么没有办法看到模式匹配`f`是完整的？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-15T18:04:40.347

这很烦人，是的。GHC 假设类型族（和类）在其算法中是开放的。但是，您正在编写由封闭类型参数化的类型族。这种紧张关系解释了你和 GHC 之间的误解。我认为已经有一些关于如何处理封闭类型课程和家庭的想法，但这是一个棘手的领域。

同时，您可以避免类型族的开放性以说服整体检查器。

```
{-# LANGUAGE DataKinds, GADTs #-}
{-# LANGUAGE TypeFamilies #-}

data Foo = A | B

data Bar (foo :: Foo) where
    BarA :: Int    -> Bar A -- or BarA :: foo ~ A => Int    -> Bar foo
    BarB :: String -> Bar B -- or BarB :: foo ~ B => String -> Bar foo

f :: Bar A -> Int
f bar = case bar of
    BarA x -> x
-- or f (BarA x) = x 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T16:14:01.490

您始终可以使用`_`模式匹配任何内容作为案例的最后一个条件。

所以`_ -> undefined`代替`BarB _ -> undefined`.

这将使案例在其论点中变得完整。

还有一个由 Neil Mitchell 编写的[库](http://community.haskell.org/~ndm/catch/)，它检查非详尽模式以防止由于模式不匹配而导致运行时失败。

# php - PHP 在所有浏览器中都是通用的吗？

> ID：12438911
> 
> 赞同：3
> 
> 时间：2012-09-15T16:02:43.063
> 
> 标签：php, html

我将 PHP 用于使用`mail()`. 因为 PHP 是服务器端的，这是否意味着 PHP 在任何情况下都无法与计算机通信？

任何浏览器中是否有像 JavaScript 那样的“禁用 PHP”选项？我可以指望每个可以访问 Internet 的浏览器都能够（或至少“尽其所能”）与 PHP 服务器通信吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-15T16:04:09.773

是的，PHP 可以在所有浏览器中运行。

PHP 与浏览器无关，它是一种服务器端语言。PHP 代码在服务器上执行，生成 HTML，然后发送到客户端。客户端将收到运行该脚本的结果。

检查此链接[什么是 PHP？](http://php.net/manual/en/intro-whatis.php)

![在此处输入图像描述](../Images/55376581cd1fb757eaf0eef79a5f1664.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-15T16:06:24.793

简短的回答是 PHP 与所有浏览器兼容。浏览器不知道服务页面的架构，因此不能禁用它。

PHP 和 JavaScript 之间的区别在于 JavaScript 在浏览器中运行，因此可以被用户禁用。

也就是说，完全有可能从 PHP 生成特定浏览器可能存在问题的页面，但这不是 PHP 特有的问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-15T16:04:39.460

几乎是的，浏览器只呈现 html/css 和 javascript。在大多数情况下，您用来生成它的东西并不重要

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-15T16:04:22.673

简短的回答：是的，php 将在所有浏览器上“工作”。

客户端不与 php 服务器“通信”，它与 Web 服务器通信。您的客户端请求一个页面，Web 服务器返回一个。页面的生成方式（静态 html 文件或使用某种服务器端脚本语言，如 php）通常对浏览器没有影响。

Php 不会在客户端机器上“执行 php 代码”，它只是返回 html/css，有时还会返回指示浏览器显示什么的 javascript。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-15T16:06:48.443

正如您所指出的，PHP 是一种服务器端语言。访问者的 Web 浏览器永远不会看到 PHP 代码，只能看到由服务器运行的 PHP 脚本生成的 HTML 或 XHTML 或 XML。所以使用PHP不排除使用任何浏览器，但是PHP生成的产品可能不兼容。例如，如果您使用 PHP 脚本生成 HTML5，那么旧浏览器很可能无法很好地呈现页面。但是，如果您只是使用静态 HTML5 页面而不使用 PHP 生成它们，情况也是如此。

简而言之，您可以安全地使用 PHP，而不必担心它会导致浏览器兼容性问题。但是您确实需要考虑由您的 PHP 生成的产品会被发送到访问者的浏览器。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-15T16:05:58.623

Php 是一种服务器端编程语言，它在到达前端用户之前被解释。

这意味着用户不知道甚至有一个 php 脚本正在运行。

另一方面，Javascript 在客户端运行，来自网络浏览器，这就是用户可以决定将其关闭的原因。

# encryption - Adobe Air - 对 SQL 数据库或 EncryptedLocalStore 使用加密？

> ID：12438917
> 
> 赞同：0
> 
> 时间：2012-09-15T16:03:43.657
> 
> 标签：encryption, air

我需要使用 Adob​​e Air 2.5 存储 6 组密码和用户名我应该使用 SQL 数据库还是 EncryptedLocalStore？

谢谢。乌里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T16:43:01.860

这取决于如何获取和使用信息。如果它是应用程序用户提供的信息，然后被缓存以供将来使用，EncryptedLocalStore (ELS) 可能是一个很好的方法。有一些好处和限制：

*   ELS 旨在保存少量数据 - 您的 6 个用户/密码组合的示例符合条件。

*   ELS 数据可供特定用户访问的所有进程使用。因此，在一个应用程序中设置后，只要是操作系统认证的同一用户，就可以从同一发布者的其他 AIR 应用程序访问它。如果您不喜欢这种访问模型，则应该使用数据库。

*   ELS 数据不应被视为永久性数据 - 它可以通过多种方式删除。如果数据不再可用，您应该为用户提供重新输入数据的方法。

查看[http://goo.gl/Nd3gQ](http://goo.gl/Nd3gQ)上的文档，了解有关何时以及如何使用 ELS 的更多信息。

# stack - 当前线程终止后如何调度？

> ID：12438925
> 
> 赞同：0
> 
> 时间：2012-09-15T16:04:46.340
> 
> 标签：stack, scheduled-tasks, round-robin

我正在创建一个用户定义的线程库。我使用`Round-Robin`调度算法并使用该`context switching`方法。但是，当线程在分配的`time slot`. 该程序即将终止。我实际上想通过`schedule`在当前线程终止时调用函数来重新安排所有线程。

我找到了两种方法来克服这个问题。

1.  `thread_exit`通过在当前线程正在执行的函数末尾显式调用函数。
2.  通过更改使`stack contents`函数`thread_exit`在当前函数终止后执行的方式。

但我无法找到如何应用这些解决方案......任何人在那里......请帮助我......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T16:15:04.650

听起来你有点设计缺陷。如果我对您的理解正确，您正在尝试实现一个解决方案，您可以分配线程来执行某些任务，并且在任务完成后，线程空闲等待下一个任务。

如果这是真的，我想我会设计一个守护进程或服务来管理进入任务的队列，一个负责执行任务的线程池，控制器会监听新任务。

# google-app-engine - 将数据上传到 Appspot 部署“身份验证失败”

> ID：12438935
> 
> 赞同：1
> 
> 时间：2012-09-15T16:06:32.893
> 
> 标签：google-app-engine, openid, google-cloud-datastore

我使用 1.7.1 SDK 在我的本地应用程序引擎开发服务器上创建了一个 python 应用程序。我经常使用 appcfg.py 和 upload_data 以及 csv 数据文件和 remote_api 将数据加载到其中。（效果很好！）

我现在已将应用程序部署到 gmail 帐户下的 Google App Engine appspot.com，没有任何错误，并选择（联合）OpenID 用于最终用户登录。

但是，当我尝试使用 appcfg.py 将数据上传到已部署的应用程序时，我收到“[INFO] Authentication Failed”错误。

我已经用谷歌搜索了几天寻找解决方案，但我发现了相互矛盾的建议。尼克约翰逊在他的博客上有一个[旧的解决方法](http://blog.notdot.net/2010/06/Using-remote-api-with-OpenID-authentication)，但最近有人报告说它不起作用。SDK 的 appcfg.py 现在支持 --oauth2 选项，但我找不到关于如何从命令行批处理文件中使用它的简明说明——除了文档说它不适用于 upload_data。

我已[将此问题作为错误提交](http://code.google.com/p/googleappengine/issues/detail?id=8133&thanks=8133&ts=1347719082)给 Google App Engine 问题跟踪器。

我使用 --no_cookies 命令行选项。根据 Google 的建议，我在将我的应用从 OpenID 切换到 Google Accts API 后再次尝试，但也失败了。

有谁知道将 CSV 数据上传到已部署的 python 应用程序的当前和首选（工作！）方法？我不认为将数据上传到已部署的应用程序是“边缘案例”，是吗？！

# c - RSA_private_decrypt 错误代码：error0407106b: lib(4):funct:(113):reason(107)

> ID：12438936
> 
> 赞同：1
> 
> 时间：2012-09-15T16:06:35.297
> 
> 标签：c, unix, openssl, rsa

我使用 RSA_private_decrypt 发生了这个错误：

> 错误0407106b：库（4）：功能：（113）：原因（107）

这是什么意思？为什么我只有在网络上工作时才会出现此错误，而不是在本地主机上工作时才会出现此错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T16:11:20.370

您可以使用`ERR_error_string`来获取更具描述性的错误消息，如下所示：

```
ERR_load_crypto_strings();
ERR_error_string(ERR_get_error(), err);
fprintf(stderr, "%s\n", err); 
```

确保你也包括在内`<openssl/err.h>`。

# asp.net-mvc - WebAPI：带有 URL 字符串/URI 参数的 ApiController

> ID：12438938
> 
> 赞同：1
> 
> 时间：2012-09-15T16:06:40.783
> 
> 标签：asp.net-mvc, asp.net-web-api

我想要一个具有 URI 或 URL 参数的操作的 ApiController。

```
http://testserver/api/Controller?id=http://www.stackoverflow.com 
```

我实施了以下行动：

```
public bool Get(string id)
{
  ...
} 
```

或者

```
public bool Get(Uri id)
{
  ...
} 
```

但是：每当我按上述方式调用 URL 时，都会收到 400 - Error - Bad Request。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T16:14:10.993

我无法重现您描述的问题。这应该有效。以下是我尝试过的步骤：

1.  使用 Empty 模板创建一个新的 ASP.NET MVC 4 应用程序
2.  添加一个 Api 控制器：

    ```
    public class ValuesController : ApiController
    {
        public HttpResponseMessage Get(Uri id)
        {
            return Request.CreateResponse(HttpStatusCode.OK, id);
        }
    } 
    ```

3.  运行应用程序并导航到`/api/values/?id=http%3A%2F%2Fwww.stackoverflow.com`

4.  id 参数正确绑定到 Get 操作参数

那么您能否提供允许我们重现问题的步骤？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T16:42:54.293

The problem seems to be that I used "Cassini", the VS integrated webserver. As soon as I ran it in IIS Express, it worked.

# git - E: 无法找到包 git - EC2 上的 Ubuntu

> ID：12438946
> 
> 赞同：9
> 
> 时间：2012-09-15T16:07:08.457
> 
> 标签：git, ubuntu, amazon-ec2, packaging, apt

在我看来，Ubuntu EC2 镜像可能有问题。在一个新的 apt-get 更新之后，我看到了这个：

```
$ apt-get install -yq git
E: Unable to locate package git 
```

再过几次`apt-get`，往往会成功。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-20T11:21:36.033

更新`apt-get`软件包，运行以下命令：

```
$ apt-get update 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-24T19:20:43.877

镜子似乎仍然坏了，但我能够用一个愚蠢的循环解决这个问题：

```
# stupid loop to get around ubuntu package mirror problems
for attempt in 1 2 3; do
  if [ ! -z "`which git`" ]; then
    break
  fi
  echo "Trying to install git, attempt $attempt"
  sudo apt-get update -yq --fix-missing
  sudo apt-get install -yq git
done 
```

3 次尝试通常足以找到工作镜像。

# iphone - 如何显示 Nsdictionary 的键？

> ID：12438949
> 
> 赞同：1
> 
> 时间：2012-09-15T16:07:20.157
> 
> 标签：iphone, nsdictionary

我正在开发一个应用程序，在其中我将一些键放入字典中

并显示它，但它没有按照我所说的顺序出现。

我知道它以任意顺序显示，但有什么方法可以控制这个或任何其他方式。

请举个例子告诉我...

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T16:14:01.237

NSDictionary 条目没有排序。如果您想订购它们，您可以`sortIndex`为每个存储的对象添加自定义。使用此自定义整数对返回的数组进行排序：

```
NSArray *keys = [dictionary allKeys]; 
```

# spring - Spring MVC 列表值返回不变

> ID：12438951
> 
> 赞同：0
> 
> 时间：2012-09-15T16:07:33.377
> 
> 标签：spring, model-view-controller, list

我正在努力让我的 JSP 中更改的列表值返回到 MVC 控制器。这些值显示得很好，但是在提交表单时更改不会显示在 ModelAttribute 中（任何更改的非列表值都会在提交时显示）。以下是相关代码的缩略版：

JSP：

```
<c:forEach items="${poForm.poDetail}" varStatus="i">
...
<!-- Product Description -->
<td class="leftAlign"  >
  <form:input path="poDetail[${i.index}].description"  />
</td> 
```

支持表格：

```
public class POForm {
  private List<PurchaseOrderDetail> poDetail;
...
} 
```

采购订单详情：

```
public class PurchaseOrderDetail implements Comparable<PurchaseOrderDetail>{
    private String partNumber; // alpha-numeric part number (vendor's)
private String description; // Product name/description
... remaining properties are non-complex
} 
```

控制器：

```
@RequestMapping(value="/savePO",method=RequestMethod.POST)
public ModelAndView savePO(@ModelAttribute("poForm") POForm poForm, final       
     HttpServletRequest request) {
.... "examine the poForm here and items of poDetail are unchanged"
} 
```

有什么建议可以尝试吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T10:38:07.023

我记得我前段时间遇到过类似的问题。当我没记错时，将支持从's更改`List`为`array`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T15:14:53.683

感谢 Ralph，我发现 Spring MVC List 值没有被返回，因为我无意中提交了错误的表单。一旦我纠正了这一点，列表值就会按预期返回。

# memory-leaks - 内存泄漏的概念

> ID：12438957
> 
> 赞同：0
> 
> 时间：2012-09-15T16:08:32.427
> 
> 标签：memory-leaks, garbage-collection

我在 Java 教科书（SL-275）中读到了这个

> 当系统上没有内存可供分配时，不取消分配内存的程序最终可能会崩溃。据说这些程序存在*内存泄漏*。

为什么会*没有记忆*？系统通常有数百 GB 的内存，变量需要 2-8 字节的数据。假设我们有 1000 个未销毁的变量，那只有 8KB。那么为什么垃圾收集如此重要呢？

我尝试在网上搜索答案，甚至联系我的讲师，但找不到满意的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T16:12:18.833

如果程序使用完变量后系统无法回收内存，则属于内存泄漏。

这很重要，因为，

1.  你可能会说 8 个字节是一点点数据。但是，如果这 8 个字节在每分钟运行数百万次的紧密循环中泄漏怎么办？你会很快耗尽内存。
2.  较大的数据结构非常常见。示例：网络爬虫可能会泄漏 HTML 文档的表示形式，轻松达到 100 KB 甚至兆字节。
3.  尽管内存很便宜，但 100 GB 的 RAM 仍然很少见。你可能会想到磁盘空间，磁盘空间很慢。当您的 RAM 用完并且系统需要在磁盘和 RAM 之间交换内存以执行最简单的操作时，性能将在极端情况下下降。
4.  还要考虑内存非常有限的移动或嵌入式设备。

真实的战争故事：我曾经调试过一个内存泄漏很小的 ASP .NET 系统（我认为对于特定网页的每个请求大约需要 60 个字节）。但是该页面被*大量*访问，我们不得不每小时回收应用程序池以避免耗尽服务器上的 RAM。这是在一个非常规范的服务器上。它还表明泄漏甚至可能发生在垃圾收集环境中——我们应该始终注意内存消耗。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T16:13:15.063

变量可能只包含一两个数据字，但对于类型为某个 Java 对象的变量，该字实际上是指向垃圾收集数据的指针，即对象的状态。并且该对象状态可能反过来包含指向其他对象（或它们的数组）的指针，它们本身指向某个其他对象，或前一个对象（循环引用！）等。

垃圾收集器只有在确定没有引用链（来自本地或全局变量）指向它之后才会释放（即让 JVM 重用）内存。

我强烈建议至少仔细阅读关于[垃圾收集](http://en.wikipedia.org/wiki/Garbage_collection_%28computer_science%29)的维基百科页面，然后尽可能阅读[垃圾收集手册](http://gchandbook.org/)等教科书。您还可以阅读 Paul Wilson 1992 年的[GC 调查](ftp://ftp.cs.utexas.edu/pub/garbage/gcsurvey.ps)文章。

你应该关心RAM的使用；从应用程序的角度来看，访问硬盘需要很长时间（访问磁盘上的千字节块大约需要 10 毫秒。在 RAM 上访问它是几微秒，快几千倍；片上缓存是可在纳秒内访问。）。SSD 让这一点变得更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T16:13:26.780

首先，假设所有变量都是 2 到 8 个字节。有些可能是相当大的数据结构，在某些应用程序中可以达到兆字节。

其次，如果在循环运行数百万或数十亿次时，即使是 2 字节的变量泄漏也会造成严重破坏，尤其是在长期运行的程序中。

第三，您拥有的物理内存量可能与您的进程地址空间无关。例如，一个 32 位进程可能只能处理 4G，而不管您的机器有数百 GB。

最后，即使你*可以*处理泄漏，最好的编码风格是*没有*这些潜在的错误。其他任何事情都只是马虎:-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T16:14:35.553

假设您有一个 4Gb 内存的 Web 服务器。在此 Web 服务器上是一个存在少量内存泄漏的网站。

对于这个例子，假设他们每个人都消耗了一些需要 1Mb 内存的文件，并且在使用后不清理它。

也许有泄漏的页面每天被调用 100 次。突然间，我们的服务器每天损失 100mb。这是不好的。

内存泄漏可能很小，但您不希望每 30 天重新启动一次应用程序，因为它会占用您所有的内存。

# mongodb - 我可以删除默认的 MongoDB 索引吗？

> ID：12438958
> 
> 赞同：11
> 
> 时间：2012-09-15T16:08:39.163
> 
> 标签：mongodb, indexing, nosql

我有一个不需要任何索引的集合。我只存储用户搜索词和日期，所以我的收藏非常简单。

```
class UserSearch {

public string Term {get; set;}
pulic DateTime Date {get;set;}

} 
```

当我存储一个 UserSearch 项目时，我的集合上有 _id 和默认索引。

据我所知，这些“_id”字段将在 ram 中编制索引，因此我不想将 ram 内存用于收集，我只是存储并且每 12 小时计算一次。

我试图删除它，但我不能。

```
 var indexes = UserSearch(true).GetIndexes();

   //delete UserSearch Default Index
   if(UserSearch(true).IndexExistsByName("_id_"))
   {
     UserSearch(true).DropIndexByName("_id_");
   } 
```

有什么建议/解决方案吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-15T16:11:34.963

不，你不能删除它。

从[MongoDB 文档](http://api.mongodb.org/wiki/current/Indexes.html#Indexes-The%5CidIndex)中，强调我的；

> _id 索引
> 
> 对于除上限集合之外的所有集合，会自动为 _id 字段创建索引。这个索引是特殊的， ***不能删除***。_id 索引强制其键的唯一性（除了一些分片的情况）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-24T16:42:05.660

`_id`索引一旦创建就不能删除。但是，您可以通过将选项设置为使用来创建没有`_id`索引的集合，但如果没有索引，您将无法复制您的集合。`autoIndexId``false`[**`db.createCollection`**](http://docs.mongodb.org/manual/reference/method/db.createCollection/#db.createCollection)`_id`

# iphone - 如何使用 UIActionSheet 更改自定义 UITableViewCell 的颜色？

> ID：12438960
> 
> 赞同：1
> 
> 时间：2012-09-15T16:08:51.957
> 
> 标签：iphone, objective-c, ios, ipad

我有一个包含多行的 TableView。每行都有不同的自定义 UITableViewCell。我需要借助 UIActionSheet 更改此单元格的颜色。这意味着当我选择一行时，应该会弹出一个 Actionsheet，要求为单元格选择特定的颜色。另一个重要的事情是即使单元格离开屏幕，单元格也应该保留颜色。

这是我的代码。我的代码的问题是单元格没有实时更新。如果再次选择该行，则单元格的颜色会更新。另一个问题是，如果我向下滚动单元格颜色会更改为默认白色。

```
UIColor *cellColour;

-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];

    switch (indexPath.row)
       {
        case 0:
            [self displayActionSheet];
            cell.backgroundColor=cellColour;
            break;
        case 1:
            cell.backgroundColor=[UIColor yellowColor];
            break;
        default:
            break;
    }
}

-(void) displayActionSheet
{
    UIActionSheet *popupQuery = [[UIActionSheet alloc] initWithTitle:@"Select row colour"   delegate:self cancelButtonTitle:@"Cancel" destructiveButtonTitle:nil otherButtonTitles:@"Red",@"Green",nil];

    popupQuery.actionSheetStyle = UIActionSheetStyleDefault;

    [popupQuery showInView:self.view];

    [popupQuery release];
}

-(void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex
{
switch (buttonIndex)
    {
      case 0:
        NSLog(@"Red");
        cellColour=UIColor.redColor;
        break;
      case 1:
        NSLog(@"Green");
        cellColour=UIColor.greenColor;
        break;
      case 2:
        NSLog(@"Pressed Cancel");
        cellColour=nil;
        break;
      default:
        break;
    }   
} 
```

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T17:02:52.243

这很正常，因为`UIActionSheet`行为是异步的。

当您调用 时`displayActionSheet`，它会显示`UIActionSheet`屏幕然后继续代码（无需等待用户点击操作表的按钮）。然后稍后当用户点击操作表的按钮之一时，将`actionSheet: clickedButtonAtIndex:`调用委托方法。

你需要做的是：

*   在方法（在此处设置）中使用`cellColor`属性（我希望实际上它是`@property`您的类的一个，而不是像您问题中的代码那样的全局变量！！！），以便每次重用单元格时都使用颜色并显示在屏幕上`tableView:cellForRowAtIndexPath:``cell.backgroundColor = cellColour;`
*   当用户在您的操作表中选择一种颜色时，调用`[tableView reloadData]`您的`actionSheet:clickedButtonAtIndex:`委托方法以重新加载 tableView，以便更新单元格颜色。

# linux - 使用 Echo 确定目录长度

> ID：12438966
> 
> 赞同：1
> 
> 时间：2012-09-15T16:09:29.233
> 
> 标签：linux, shell, command-line, echo

我想使用 echo 显示列表（不是内容）中的所有目录，这些目录长度正好是 5 个字符，以“a”开头，后跟 4 个数字：

例如，如果我在一个目录中，内容为：a23 a5134 a2913 a2341s4 a2490.txt

我应该得到一个只有 a5134 和 a2913 的目录列表....有没有办法以 的形式做到这一点`echo globbingpattern`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T16:21:09.007

您可以在 中找到 glob 模式文档`man 7 glob`。

您可以`echo a[0-9][0-9][0-9][0-9]`在这种情况下使用。

# java - 如何在 Scala 类中覆盖 type() java 接口方法

> ID：12438972
> 
> 赞同：2
> 
> 时间：2012-09-15T16:10:01.210
> 
> 标签：java, scala, reserved-words

我有一个带有这样声明的方法的 java 接口`String type();`。我想在 scala 类中实现它，所以我想写：

```
override def type = { ... } 
```

但显然它是scala中的保留关键字，所以编译器抱怨：

```
 identifier expected but 'type' found. 
```

怎么可能实现它？是否有无需更改 Java 接口的解决方案？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-15T16:24:11.150

您可以使用反引号来克服保留字的问题：

```
override def `type` = { ... } 
```

请参阅：[Scala 互操作性常见问题解答](https://wiki.scala-lang.org/display/SYGN/Interoperability+FAQs)

# java - JTextArea 背景问题

> ID：12438974
> 
> 赞同：0
> 
> 时间：2012-09-15T16:10:17.813
> 
> 标签：java, swing, look-and-feel, nimbus

```
private JDialog dialog;
private JTextArea text;
private JPanel buttons, filler;
private JRadioButton questions, list;
private ButtonGroup group;
private JButton confirm;

dialog = new JDialog(Main.masterWindow, lang.getString("newTitle"), true);
dialog.getContentPane().setLayout(new BoxLayout(dialog.getContentPane(), BoxLayout.Y_AXIS));
dialog.setResizable(false);

text = new JTextArea();

//this works
text.setBackground(Color.RED);

//this both don't
text.setBackground((Color)UIManager.get("control");
text.setBackground(dialog.getContentPane().getBackground());

dialog.setVisible(true); 
```

我正在使用 Nimbus L&F，“控制”是我的对话框的背景颜色。如果我设置任何其他颜色（在此示例中为红色），它会显示，但如果我将其设置为这个颜色，它会保持白色。

我在默认（金属）L&F 上没有问题...

有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T16:12:28.590

尝试运行以下代码：

```
 System.out.println((Color)UIManager.get("control")); 
```

这将打印出您从 UIManager 获得的确切颜色。也许它实际上应该是白色的。告诉我打印的是什么

编辑：

```
//this both don't
//text.setBackground(dialog.getContentPane.getBackground()); 
```

好吧，首先，即使 getContentPane 是一种方法，您也没有 () 。尝试这样做：`text.setBackground(dialog.getContentPane().getBackground());`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T02:03:30.033

出于某种原因，它似乎不喜欢从调用`ColorUIResource`返回的对象。`UIManager.get`我不明白为什么，因为它来自`Color`.

如果你做类似的事情

```
JDialog dialog = new JDialog((JFrame) null, "Help", true);
dialog.getContentPane().setLayout(new BoxLayout(dialog.getContentPane(), BoxLayout.Y_AXIS));

JTextArea text = new JTextArea(10, 10);

Color color = new Color(UIManager.getColor("control").getRGB()); // <-- Create a new color

text.setBackground(bg);

dialog.add(text);
dialog.pack();
dialog.setLocationRelativeTo(null);
dialog.setVisible(true); 
```

这似乎有效。

如果你必须这样做。我不这么认为，但我尝试过的所有其他方法都不起作用

# wordpress-theming - wordpress 每页不同的帖子数量

> ID：12438978
> 
> 赞同：0
> 
> 时间：2012-09-15T16:10:41.690
> 
> 标签：wordpress-theming, wordpress

我`wordpress`在主页上显示最近的帖子。设置为每页 18 个帖子。如何制定一些规则以在第一页（如配置）上显示 18 个帖子，在第二页和后续页面上显示 8 个帖子？

```
<?php while ( have_posts() ) : the_post();  
    get_template_part( 'content', get_post_format() );
endwhile; ?> 
```

尝试了以下方法：

```
add_filter( 'pre_get_posts', 'my_get_posts' );
function my_get_posts( $query ) {
if ($query->is_main_query()){
    if (is_home()){
        $query->set('showposts', 18);
    }
    else {
        $query->set('showposts',7);
        $query->set('posts_per_page',7);
    }
}
return $query;
} 
```

没有效果 ：-（

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T08:43:59.153

您可以使用函数 is_home() 检查您的位置： [http ://codex.wordpress.org/Function_Reference/is_home](http://codex.wordpress.org/Function_Reference/is_home)

在您的 php 函数中，如果您不在家，您可以更改每页的帖子编号，但这可能会对您的导航功能造成一些问题。

你试过这个插件吗？ [http://wordpress.org/extend/plugins/custom-posts-per-page/](http://wordpress.org/extend/plugins/custom-posts-per-page/)

它可能包含一些有趣的代码来解决您的问题。

# javascript - 建立 Websocket 连接后向浏览器发送 8 个字节

> ID：12438979
> 
> 赞同：1
> 
> 时间：2012-09-15T16:10:48.930
> 
> 标签：javascript, c++, sockets, ubuntu, websocket

我已经开始用`WebSocket Server`C++ 编写一个小程序。我正在使用`Ubuntu`. 服务器侦听传入的连接。建立连接后，浏览器会向服务器发送一个 WebSocket 标头，包括`Sec-WebSocket-Key`带有的标头`SHA-1`，然后与标头的其余部分`base64 encoded`一样将其发送回浏览器。`Sec-WebSocket-Accept`这会导致浏览器和我的服务器之间打开 WebSocket 连接。

我已阅读有关数据框架的规范部分，并正在尝试将数据从我的服务器发送到浏览器。下面是我的代码：

```
cout << "sending data..." << endl;

uint8_t to_send[8];

to_send[0] = (uint8_t)129;  // 10000001
to_send[1] = (uint8_t)6;    // 00000110
to_send[2] = 'h';
to_send[3] = 'e';
to_send[4] = 'l';
to_send[5] = 'l';
to_send[6] = 'o';
to_send[7] = '\0';          // 00000000

int bytesSent = send(i, &to_send, 8, 0);
cout << "bytes sent: " << bytesSent << endl; 
```

'fin' 位、三个保留位和文本帧的操作码 '0001' 构成第一个字节。第二个字节是我发送的文本的长度——字符串“hello”后跟一个空转义字符。我用于调试的 JavaScript 代码是：

```
ws.onopen = function()
{
    alert("WebSocket connection open");
}

ws.onmessage = function(event)
{
    alert("Data has been received");
} 
```

在我的服务器发送 8 个字节后，我希望浏览器会发出警报，说已收到数据，但事实并非如此。我已经在 chrome 和 firefox 上进行了测试。

任何人都可以看到我要去哪里错了吗？

# python - 在 Python 中理解“自我”

> ID：12438980
> 
> 赞同：0
> 
> 时间：2012-09-15T16:10:52.607
> 
> 标签：python, oop, python-2.7, self

我从 udacity.com 看到了这个例子：

```
def say_hi():
    return 'hi!'

i = 789

class MyClass(object):

    i = 5

    def prepare(self):
        i = 10
        self.i = 123
        print i

    def say_hi(self):
        return 'Hi there!'

    def say_something(self):
        print say_hi()

    def say_something_else(self):
        print self.say_hi() 
```

**输出：**

```
>>> print say_hi()
hi!
>>> print i
789
>>> a = MyClass()
>>> a.say_something()
hi!
>>> a.say_something_else()
Hi there!
>>> print a.i
5
>>> a.prepare()
10
>>> print i
789
>>> print a.i
123 
```

我什么都懂，除了为什么`a.say_something()`equals`hi!`和 not `Hi there!`。这对我来说很奇怪，因为它在之后`say_something()`调用时调用的是类内部的`say_hi()`。我想我错过了一些重要的东西..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T16:15:37.210

在封闭范围中查找名称时不考虑类范围。您应该始终有资格`self.`从类范围中获取名称。

请参阅[类块中定义的名称范围不会扩展到方法块。这是为什么？](https://stackoverflow.com/questions/9505979/the-scope-of-names-defined-in-class-block-doesnt-extend-to-the-methods-blocks)有关此行为的更详细讨论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T16:38:43.230

考虑以下代码：

```
class X:
  def __init__(self, name):
    self.name = name
  def bound_method(self):
    print "I'm bound to", self.name
  @staticmethod
  def unbound_method():
    print "I have no self!"

x = X("Peter")
x.bound_method()   # prints: I'm bound to Peter
x.unbound_method() # prints: I have no self! 
```

Python 中的类成员和成员函数是*绑定到*类对象的变量和可调用对象。这些绑定方法接收调用它们的对象作为它们的第一个调用参数，通常命名为`self`。需要明确地引用绑定的方法和变量，如`x.bound_method()`. 该对象`x`因此变成了第一个函数参数`self`。如果要访问其成员，则需要`self`在函数内部进行查询。

Python 中也有类方法。这是不*绑定到*特定实例化但对类是静态的函数，请参阅`unbound_method()`示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T16:16:23.097

这是因为`a.say_something()`不调用类方法（它没有`self.`部分所以它调用全局函数）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T16:18:06.613

在python中调用内部类方法你应该写`self.`在方法名称之前，`self.`这意味着搜索这个方法的类，但是当你调用方法时你不使用self，这会导致调用`say_hi()`在类外声明的函数。 写这个来解决问题。`say_something``say_hi`

```
def say_something(self):
    print self.say_hi() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-15T16:28:04.983

它是`say_hi`从全局范围调用，而不是从类范围调用，因为在类范围内，没有这样的函数`say_hi`，只有`self.say_hi`

也许这会有所帮助：

```
name = 'John'
class Person()

    def __init__(self)
      name = 'Abraham'

    def printName(self)
      print name

>>> pers  = Person()
>>> pers.printName()
   'John'  # uses global name, rather than Abraham, 
           # because Abe is not a class instance variable. 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-15T16:42:01.747

也许这个例子会更有意义：

```
def global_scope_hi():
    return 'hi!'

class MyClass(object):

    def class_scope_hi(object_reference):
        return 'Hi there!'

    def say_something(object_reference):
        print global_scope_hi()

    def say_something_else(object_reference):
        print object_reference.class_scope_hi()

a = MyClass()
a.say_something()
a.say_something_else()

>>> hi!
>>> Hi there! 
```

# php - 使用自动加载模型的 Codeigniter

> ID：12438983
> 
> 赞同：-3
> 
> 时间：2012-09-15T16:11:31.473
> 
> 标签：php, codeigniter, models

我在自动加载文件中添加一个模型，如下所示：

```
$autoload['model'] = array('themodel'); 
```

我想知道如何在控制器中使用它，因为当我编写 $this 时，它会获取当前的控制器功能

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T16:15:14.920

采用`$this->themodel->some_function()`

我建议你[在 CodeIgniter 中对模型](http://codeigniter.com/user_guide/general/models.html)做功课。

# css - HTML 背景图像不会覆盖整个高度

> ID：12438985
> 
> 赞同：1
> 
> 时间：2012-09-15T16:11:35.410
> 
> 标签：css

我需要容器 div 中的背景图像来拉伸我网站的整个长度。

然而，此刻它在中途被切断了。宽度是完美的，我不能重复图像，因为图像包含一些内容。

我也试过`background-size:100%",height:100%`了，但没有帮助。

```
 <body>
<div id="container">
<div id="logo">
</div>
<div id="navigation">

    <ul id="nav">

        <li><a href="/">Home</a></li>
        <li><a href="#">About</a></li>
        <li>
            <a href="#">Recipes</a>
        </li>
        <li><a href="#">The Author</a></li>
<li><a href="#">Contact Us</a></li>
    </ul>

</div>

<div id="spoons">
</div>
<div id="shbox">
<div id="main">
<div id="center">

<div id="gallery">

</div>
</div>
<div style="clear:both"></div>

<div id ="aboutbox" class="shadow" >
<p style="padding: 20px; text-align:center;">Lorem ipsum </p>
</div>
</div>
</div>
<div id="footer">
<ul>
<li><a href="#">Home</a></li>
<li><a href="#">The Author</a></li>
<li><a href="#">Contact Us</a></li>
</ul>
</div>
<div id="clear">
</div>
</div>

</body> 
```

CSS

```
#container
{
    margin: 0 auto;

    background-image:url('backg.jpg');
    background-repeat:no-repeat;
       position:relative; z-index:1;
        width:990px; 

}
#logo
{
height:150px;
}
#navigation
{
    height:40px;
}
#main{
        padding: 50px;

}
#nav{

            list-style:none;
            margin:0;
            padding:0;
            text-align:center;
            z-index:10;

        }

#gallery
{
    width:860px;
    height:400px;
    background-color:#FFF;
    float:left;
    border-radius: 5px;
    padding:10px;

}
#aboutbox
{
    margin-top:30px;
    width:880px;
    background-color:#FFF;' 
    border-radius: 5px;
    clear:both;
}
#clear
{
    clear:both;
}
.shadow
{
    -moz-box-shadow:    3px 3px 5px 6px #ccc;
    -webkit-box-shadow: 3px 3px 5px 6px #ccc;
     box-shadow:         3px 3px 5px 6px #ccc;
}

        #fronttext
        {

             color:white;
            text-align:center;

        }

        #footer li{
            position:relative;
            display:inline;
            margin:0;
            padding:0;
        }

        #footer a{
            display:inline-block;
            padding:10px;
            color:white;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T16:33:43.560

使用`background-size:cover`如下：

```
#your-container-div{ 
    background: url(your_image.jpg) no-repeat center center fixed; 
    background-size: cover;
} 
```

# eclipse - 无法将 Eclipse EE 与 Tomcat 集成

> ID：12438989
> 
> 赞同：0
> 
> 时间：2012-09-15T16:11:50.540
> 
> 标签：eclipse, tomcat

我已经在我的 PC (Windows) 上成功设置了 Tomcat，它可以与示例 hello world servlet 一起使用。我正在使用 Tomcat 本机（我相信它有自己的内置 Web 服务器）。

我已经下载并安装了 Eclipse Java EE 并创建了一个简单的 servlet。

在首选项中，我添加了 Tomcat 服务器和安装目录的路径：D:\Program Files\Apache Software Foundation\Tomcat 7.0。

我还将 Tomcat 下载中的 servlet-api.jar 文件添加到项目 Java Build Path 作为外部 JAR。

错误：出现问题“在本地启动 Tomcat v7.0 服务器”遇到问题。本地主机上的 Tomcat v7.0 服务器所需的几个端口（8080、8009）已在使用中。服务器可能已经在运行...

服务器已经在运行，但是如果我停止服务并重新运行，则会出现同样的错误。如果当我开始在 Eclipse 中运行时 Tomcat 正在运行，那么它会停止 Tomcat ？？？

在 Eclipse 地址栏窗口中，我有 _http://localhost:8080/MyLittleDynamicWebProject/servlet/MyFirstServlet.MyFirstServlet

我看到网页 HTTP 状态 404 的视图 - 请求的资源不可用。

Eclipse 创建必要的文件夹结构会不会是个问题？

有人对如何解决这个问题有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T20:47:34.520

将 Tomcat 作为服务运行时，使用 eclipse 可能会出现问题。我在 youtube 上看到与 eclipse 集成的 tomcat 正在作为命令行应用程序启动。因此，我使用安装程序卸载了已安装在我的 Windows 机器上的 Tomcat。我删除了我以前的 Eclipse 工作区文件夹。

然后按照这些步骤。

1.  创建一个顶级文件夹（例如 java_web_programming）。
2.  将 eclipse 下载复制到此顶级文件夹下名为 eclipse 的文件夹中。
3.  同级复制tomcat 7下载。
4.  在服务器选项卡中启动 eclipse 创建了新服务器，指向 /tomcat-7 文件夹（在 java_web_programming 下）。

现在一切正常。

只是表明，只是按照过去的方式做事……并不总是有效。

# sql - 从时间戳在一定范围内的 postgres 中选择记录

> ID：12438990
> 
> 赞同：59
> 
> 时间：2012-09-15T16:12:08.807
> 
> 标签：sql, postgresql

我在表格预订中有时间戳类型的到达列（我正在使用 postgres ）。例如，我将如何选择今年内的所有日期？

我知道我可以做这样的事情：

```
select * FROM reservations WHERE extract(year from arrival) = 2012; 
```

但是我已经运行了**分析**，看起来它需要序列扫描。有更好的选择吗？

**PS 1 嗯。两种方式似乎都需要seq。扫描。但是wildplasser 的结果更快——为什么？**

```
cmm=# EXPLAIN ANALYZE select * FROM reservations WHERE extract(year from arrival) = 2010;
                                                  QUERY PLAN                                                   
---------------------------------------------------------------------------------------------------------------
 Seq Scan on vrreservations  (cost=0.00..165.78 rows=14 width=4960) (actual time=0.213..4.509 rows=49 loops=1)
   Filter: (date_part('year'::text, arrival) = 2010::double precision)
 Total runtime: 5.615 ms
(3 rows)

cmm=# EXPLAIN ANALYZE SELECT * from reservations WHERE arrival > '2010-01-01 00:00:00' AND arrival < '2011-01-01 00:00:00';
                                                                  QUERY PLAN                                                                   
-----------------------------------------------------------------------------------------------------------------------------------------------
 Seq Scan on reservations  (cost=0.00..165.78 rows=51 width=4960) (actual time=0.126..2.491 rows=49 loops=1)
   Filter: ((arrival > '2010-01-01 00:00:00'::timestamp without time zone) AND (arrival < '2011-01-01 00:00:00'::timestamp without time zone))
 Total runtime: 3.144 ms
(3 rows) 
```

** PS 2 - 在我在到达列上创建索引后，第二种方式变得更快 - 因为它看起来像查询使用索引。Mkey - 我想我会坚持这个。**

```
 QUERY PLAN                                                                        
---------------------------------------------------------------------------------------------------------------------------------------------------------
 Bitmap Heap Scan on reservations  (cost=4.77..101.27 rows=51 width=4960) (actual time=0.359..0.791 rows=49 loops=1)
   Recheck Cond: ((arrival > '2010-01-01 00:00:00'::timestamp without time zone) AND (arrival < '2011-01-01 00:00:00'::timestamp without time zone))
   ->  Bitmap Index Scan on arrival_idx  (cost=0.00..4.76 rows=51 width=0) (actual time=0.177..0.177 rows=49 loops=1)
         Index Cond: ((arrival > '2010-01-01 00:00:00'::timestamp without time zone) AND (arrival < '2011-01-01 00:00:00'::timestamp without time zone))
 Total runtime: 1.265 ms 
```

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-09-15T16:14:47.800

```
SELECT * 
FROM reservations 
WHERE arrival >= '2012-01-01'
AND arrival < '2013-01-01'
   ; 
```

顺便说一句，如果值的分布表明索引扫描不值得（例如，如果*所有*值都在 2012 年），优化器仍然可以选择全表扫描。YMMV。解释是你的朋友。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-15T19:40:36.503

使 PostgreSQL 为原始查询使用索引的另一个选项是在您正在使用的表达式上创建索引：

```
create index arrival_year on reservations ( extract(year from arrival) ); 
```

这将打开 PostgreSQL 并有可能使用索引

```
select * 
FROM reservations 
WHERE extract(year from arrival) = 2012; 
```

请注意，索引中的表达式必须与子句中使用的表达式**完全相同**`where`才能使其工作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-08-13T13:13:28.520

在 postgress 中搜索时间戳列的秒数

```
select * from "TableName" e
    where timestamp >= '2020-08-08T13:00:00' and timestamp < '2020-08-08T17:00:00'; 
```