# StackOverflow 问答 10264000-10264999

# java - 按名称实例化 jooq 字段<>

> ID：10264001
> 
> 赞同：10
> 
> 时间：2012-04-21T23:39:12.433
> 
> 标签：java, jooq

我正在尝试使用 jOOQ 在一些通用代码中构建 SQL 查询。我对使用 jOOQ 执行这些查询或检查结果不感兴趣。另外，这段代码是通用的，所以我不能使用 jOOQ 的代码生成。

我已经设法弄清楚了这么多：

```
List<org.jooq.Field<?>> fields = new ArrayList<org.jooq.Field<?>>();
Field<?> field = Factory.field("somefield");
fields.add(field);
field = Factory.field("someotherfield");
fields.add(field);

Field<Object> fieldPK = Factory.field("somePKField"); 
Condition condition = fieldPK.equal(123);

Factory factory = new Factory(connection, SQLDialect.POSTGRES);
SelectFinalStep step = factory.select(fields).from("sometable").where(condition);
String query = step.getQuery().getSQL(true); 
```

但是 Factory.field() 和 from() 采用通用 SQL 而不是实际的表或字段名称，因此没有引用（即使使用 RenderNameStyle.QUOTED 时）也没有针对 SQL 注入的保护。

有没有办法创建一个知道它们的名字的字段或表？理想情况下，我可以通过名称和父表指定一个字段，jOOQ 为我构建“sometable”。“somefield”字符串。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-22T10:12:36.997

jOOQ 知道对[`org.jooq.Name`](http://www.jooq.org/javadoc/latest/org/jooq/Name.html)标识符建模的类型。它可以用[`DSL.name(String...)`](http://www.jooq.org/javadoc/latest/org/jooq/impl/DSL.html#name-java.lang.String...-)字符串形式的完全限定名称构造，例如：

```
Name name1 = name("column");
Name name2 = name("table", "column");
Name name3 = name("schema", "table", "column");
Name name4 = name("catalog", "schema", "table", "column"); 
```

然后，您可以将这样的名称传递给[`DSL.field(Name)`](http://www.jooq.org/javadoc/latest/org/jooq/impl/DSL.html#field-org.jooq.Name-)构造函数，例如：

```
Field<Object> field1 = field(name("table", "column"));
Field<String> field2 = field(name("table", "column"), String.class); 
```

### 在 jOOQ 版本上

旁注：这个问题是在 jOOQ 2.x 的上下文中提出的，但很少有人仍在使用这个旧版本，这就是为什么这个答案假设使用 jOOQ 3.x

# c# - 如何接收客户端通过Socket发送的数据

> ID：10264005
> 
> 赞同：0
> 
> 时间：2012-04-21T23:40:05.433
> 
> 标签：c#, sockets

所以我想了解如何接收客户端发送的数据。我目前正在使用此代码进行连接：

```
 public void listen()
    {
        TcpListener server = new TcpListener(port);
        server.Start();

        while (true)
        {

            Socket client = server.AcceptSocket();

            connected++;

            client.Close();
        }
    } 
```

我将如何接收已转换为字节的 ASCII 数据，然后将这些字节重新转换为 ASCII？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T23:45:29.980

您必须创建一个线程，您将从连接流中读取数据（或者您可以使用异步套接字）。我已经实现了一个 tcp 库示例： [https](https://github.com/alekstheod/Promasi-V2/tree/master/org.promasi.network/src/org/promasi/network/tcp) ://github.com/alekstheod/Promasi-V2/tree/master/org.promasi.network/src/org/promasi/network/tcp 检查 tcp 客户端和服务器类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T23:55:57.593

您可以在使用接收数据时使用 TcpClient 而不是 Socket

```
TcpClient client = server.AcceptTcpClient(); 
```

MSDN 文章中提供的代码：http: [//msdn.microsoft.com/en-us/library/system.net.sockets.tcplistener (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcplistener(v=vs.71).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T00:03:53.000

您真的应该研究/阅读 .NET 中的 Sockets/Clients 交互。提取一个简单的服务器/客户端程序所需的代码比这里的任何一篇文章都多。

# android - 如何将联系人添加到联系人表

> ID：10264010
> 
> 赞同：0
> 
> 时间：2012-04-21T23:41:10.457
> 
> 标签：android, android-contacts

我正在尝试通过我的应用程序插入联系人，但我无法弄清楚应该是什么值，`accountType`如下`accountName`所示。

```
ContentValues values = new ContentValues();
values.put(RawContacts.ACCOUNT_TYPE, accountType);
values.put(RawContacts.ACCOUNT_NAME, accountName);
Uri rawContactUri = getContentResolver().insert(RawContacts.CONTENT_URI, values);
long rawContactId = ContentUris.parseId(rawContactUri);

values.clear();
values.put(Data.RAW_CONTACT_ID, rawContactId);
values.put(Data.MIMETYPE, StructuredName.CONTENT_ITEM_TYPE);
values.put(StructuredName.DISPLAY_NAME, "Mike Sullivan");
values.put(ContactsContract.CommonDataKinds.Phone.NUMBER,"1-800-111-411");
getContentResolver().insert(Data.CONTENT_URI, values); 
```

`accountType`此外，当我尝试在and中进行以下更改来执行此代码时`accountName`，我无法在联系人中看到它。

```
values.put(RawContacts.ACCOUNT_TYPE, "acc_type");
values.put(RawContacts.ACCOUNT_NAME, "acc_name"); 
```

但似乎在我搜索时插入了一些值，`"Mike Sullivan"`但没有电话号码。请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T03:02:58.360

下面是添加联系人数据库的代码，它还返回联系人是否被添加::::

```
//to save contact in Database
public boolean SaveContact(Activity _activity,String name,String number) {
    String MIMETYPE_RADUTOKEN   = "vnd.android.cursor.item/radutoken";
    String  szname = name,szMobile = number;
    //Create a new contact entry!
    String szToken = String.format("RADU_TOKEN_%d", System.currentTimeMillis());
    ArrayList<ContentProviderOperation> ops = new ArrayList<ContentProviderOperation>();
    int rawContactInsertIndex = ops.size();

    ops.add(ContentProviderOperation.newInsert(ContactsContract.RawContacts.CONTENT_URI).withValue(RawContacts.ACCOUNTTYPE, null).withValue(RawContacts.ACCOUNT_NAME, null).build());

    //INSERT NAME
    ops.add(ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI).withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID,rawContactInsertIndex).withValue(ContactsContract.Data.MIMETYPE,ContactsContract.CommonDataKinds.StructuredName.CONTENT_ITEM_TYPE).withValue(ContactsContract.CommonDataKinds.StructuredName.DISPLAY_NAME, szname).build());

    //INSERT PINLESSMAX MOBILE NUMBER
    ops.add(ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI).withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID,   rawContactInsertIndex).withValue(ContactsContract.Data.MIMETYPE, ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE).withValue(ContactsContract.CommonDataKinds.Phone.NUMBER, szMobile).withValue(ContactsContract.CommonDataKinds.Phone.TYPE, ContactsContract.CommonDataKinds.Phone.TYPE_CUSTOM).withValue(ContactsContract.Data.DATA3, "PinLessMax").build());

    // SAVE CONTACT IN BCR Structure
    Uri newContactUri = null;
    //PUSH EVERYTHING TO CONTACTS
    try{
       ContentProviderResult[] res = _activity.getContentResolver().applyBatch(ContactsContract.AUTHORITY,ops);
      if (res!=null && res[0]!=null) {
         newContactUri = res[0].uri;    
     }
    }catch (RemoteException e) { 
        // error
        newContactUri = null;
    }  catch (OperationApplicationException e)   {
        // error
         newContactUri = null;
    }  
    if (newContactUri == null) {
        return false;
     }
    boolean foundToken = false;

  // IDENTIFY Contact based on name and token
    String szLookupKey = "";
    Uri lkup = Uri.withAppendedPath(ContactsContract.Contacts.CONTENT_FILTER_URI, szname);
    ContentResolver cr = _activity.getContentResolver();
    Cursor idCursor = _activity.getContentResolver().query(lkup, null, null, null, null);
    // get all the names 
    while (idCursor.moveToNext()) {
        String szId = idCursor.getString(idCursor.getColumnIndex(ContactsContract.Contacts._ID));
        String szName = idCursor.getString(idCursor.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
        szLookupKey = idCursor.getString(idCursor.getColumnIndex(ContactsContract.Contacts.LOOKUP_KEY));
       // for this contact ID, search the custom field
       String tokenWhere = ContactsContract.Data.CONTACT_ID + " = ? AND " + ContactsContract.Data.MIMETYPE + " = ?"; 
      String[] tokenWhereParams = new String[]{szId, MIMETYPE_RADUTOKEN}; 
      Cursor tokenCur = cr.query(ContactsContract.Data.CONTENT_URI, null, tokenWhere, tokenWhereParams, null); 
      while (tokenCur.moveToNext()) {
         String token = tokenCur.getString(tokenCur.getColumnIndex(ContactsContract.Data.DATA1));
        // CHECK THE TOKEN!
        if (szToken.compareTo(token) == 0) {
          tokenCur.close();
          foundToken = true;
          break;
        }   
       } 
      tokenCur.close();
      if (foundToken) break;
  }
  idCursor.close();
  return true;
}//SaveContact() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T01:18:09.473

如果您不想在特定帐户下创建联系人，您可以为帐户类型和帐户名称提供空值

```
values.put(RawContacts.ACCOUNT_TYPE, null);
values.put(RawContacts.ACCOUNT_NAME, null); 
```

在大多数设备中，它创建为默认电话联系人。

如果您想知道设备中所有可用的帐户类型，可以使用以下代码

```
Account[] accountList = AccountManager.get(this).getAccounts();
for(int i = 0 ; i < accountList.length ; i++) {
  System.out.println(accountList[i].type);
} 
```

注意：不同的 OEM 对帐户类型使用不同的名称。

# android - 如何在 Box2D 中创建“圆圈”？

> ID：10264012
> 
> 赞同：0
> 
> 时间：2012-04-21T23:41:17.787
> 
> 标签：android, box2d, andengine

我想要视频中带有 box2d 的圆圈。 [http://goo.gl/39Ff3](http://goo.gl/39Ff3)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T23:44:51.620

你检查过[这个网站](http://www.kerp.net/box2d/)吗？好像教程很多。

并且不要忘记手册，尤其是[4.2 Circle Shapes](http://box2d.org/documentation/)。

> **圆形形状**
> 圆形形状具有位置和半径。圆圈是实心的。您不能使用圆形制作空心圆形。
> 
> ```
>  b2CircleShape circle;
>    circle.m_p.Set(2.0f, 3.0f);
>    circle.m_radius = 0.5f 
> ```

# php - Smarty 3 在模板中分配变量

> ID：10264014
> 
> 赞同：0
> 
> 时间：2012-04-21T23:41:57.317
> 
> 标签：php, templates, assign, smarty3

有点问题。试图在 smarty 3 模板文件中分配一个模板变量，但它似乎没有注册它。

我知道我可以在控制器中使用它：

```
$this->data['myVar'] = 'something'; 
```

不想用那个。我试过这个：

```
{assign var="myVar" value="something" noache} 
```

但由于某种原因，它似乎不起作用。

正在使用的模板正在扩展另一个模板。

我尝试将变量范围设置为全局。

另一件奇怪的事情是，即使我尝试分配一个变量，然后它只是在下面输出，它仍然返回空，就好像分配方法被一起破坏了一样。虽然没有错误。

我知道有些人可能认为在 smarty 中分配是不好的做法，但我的理由是它允许我在模板中指定我的元信息。这意味着在执行任何元调整时，它们可以在模板中完成，而不是有人进入我的控制器。

希望有人能解释一下

谢谢阅读。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-04-22T23:38:03.280

不知道为什么会出现问题，但最终还是使用了 Smarty 3 {block}{/block} 标签，因为我无论如何都在扩展主模板。这创建了所需的功能。

希望这对其他人有帮助。

# guid - 手动更改 GUID - 它有多糟糕？

> ID：10264017
> 
> 赞同：3
> 
> 时间：2012-04-21T23:42:13.167
> 
> 标签：guid

手动更改生成的 GUID 并使用它有多糟糕？碰撞的可能性仍然微不足道还是使用 GUID 进行操作是否危险？

有时我们只是更改之前生成的 GUID 的一些字母并使用它。我们应该停止这样做吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-05T06:10:28.013

这取决于 GUID 的版本以及进行更改的位置。让我们稍微剖析一下 GUID 的实际外观：

1.  **GUID 有一个版本。**   GUID 中的第 13 个十六进制数字标记其版本。当前的 GUID 通常是使用版本 4 生成的。如果向后更改版本，则可能会与已经存在的 GUID 发生冲突。向前更改它，您可能会与潜在的未来 GUID 发生冲突。

2.  **GUID 也有一个变体。**   GUID 中的第 17 个十六进制数字是变量字段。它的一些值是为向后兼容而保留的，一个值是为将来的扩展而保留的。因此，在此处更改某些内容意味着您可能会与以前生成的 GUID 或将来生成的 GUID 发生冲突。

3.  **GUID 的结构因版本而异。**   第 4 版 GUID 使用（在大多数情况下 - 除了第 17 个十六进制数字）真正随机或伪随机位（在大多数实现中是伪随机）。在那里改变一些东西，你的碰撞概率保持不变。

    对于使用哈希的第 3 版和第 5 版 GUID，它应该非常相似，尽管我不记得曾经在野外看到过。不过，对于版本 1 和 2 而言，情况并非如此。那些有一个结构，根据你改变的地方，你会让事情变得困难。

4.  **版本 1 GUID 包括时间戳**和计数器字段，如果在同一时钟间隔内生成两个 GUID（因此会导致相同的时间戳），则该字段会递增。如果更改时间戳，则可能会与同一台机器上早晚生成的 GUID 发生冲突。如果更改计数器，则可能会与同时生成的 GUID 发生冲突，因此需要将计数器作为“唯一性”。

5.  **第 2 版 GUID 在第 1 版的基础上扩展，还包括用户 ID。**   时间戳不太准确，并且包含用户或组 ID，而计数器的一部分用于指示是哪一个（但仅对生成机器有意义）。因此，随着这些部分的更改，您可能会与同一台机器上的另一个用户生成的 GUID 发生冲突。

6.  **版本 1 和 2 GUID 包括 MAC 地址。**   具体来说，生成它们的计算机的 MAC 地址。这确保了来自不同机器的 GUID 是不同的，即使是在同一时刻生成的。如果机器没有 MAC 地址但没有唯一性保证，则存在备用。MAC 地址也有一个结构，由“组织唯一标识符”（OUI；由本地管理或由 IEEE 分发）和网卡的唯一标识符组成。

    如果您在 OUI 中进行更改，您可能会与使用其他制造商的网卡的计算机中生成的 GUID 发生冲突。除非您进行更改，使第一个八位字节的次低有效位为 1，在这种情况下，您将切换到本地管理的 OUI，并且只会冒与在具有覆盖 MAC 地址的计算机上生成的 GUID 发生冲突的风险（这可能包括大多数具有虚拟网络硬件的 VM）。

    如果您偶然发现卡标识符，则可能会与同一制造商在具有其他网卡的计算机上生成的 GUID 发生冲突，或者再次与 MAC 地址被覆盖的那些计算机上生成的 GUID 发生冲突。

到目前为止还没有其他版本，但要点如下：**GUID 需要其所有部分来确保唯一性；如果您更改某些内容，您最终可能会得到一个不一定是唯一的 GUID。**所以你可能让它更像是一个 GID 或其他东西。最安全的更改可能是当前版本 4 GUID（这是 Windows 和 .NET 将生成的），因为它们并不能真正*保证*唯一性，而是使其*非常非常不可能*。

不过，通常我会说你最好生成一个新的 GUID。这也有助于阅读它们的人，因为如果它们看起来完全不同，您可以轻松地将两个 GUID 区分开来。如果它们仅在一个数字上有所不同，则人们可能会错过更改并假设 GUID 相同。

进一步阅读：

*   [维基百科：GUID](http://en.wikipedia.org/wiki/GUID)
*   [维基百科：UUID](http://en.wikipedia.org/wiki/UUID)
*   Eric Lippert：GUID 指南。[第 1](http://blogs.msdn.com/b/ericlippert/archive/2012/04/24/guid-guide-part-one.aspx)部分，[第 2 部分](http://blogs.msdn.com/b/ericlippert/archive/2012/04/30/guid-guide-part-two.aspx)，[第 3 部分](http://blogs.msdn.com/b/ericlippert/archive/2012/05/07/guid-guide-part-three.aspx)。（阅读它；这家伙可以很好地解释，而且恰好也在 SO 上）
*   [维基百科：MAC地址](http://en.wikipedia.org/wiki/MAC_address)
*   [RFC 4122：GUID 版本](https://www.rfc-editor.org/rfc/rfc4122#section-4.1.3)
*   [RFC 4122：变体字段](https://www.rfc-editor.org/rfc/rfc4122#section-4.1.1)
*   [DCE 1.1：身份验证和安全服务——版本 2 GUID 的描述](http://pubs.opengroup.org/onlinepubs/9696989899/chap5.htm#tagcjh_08_02_01_01)
*   [Raymond Chen：GUID 是全局唯一的，但 GUID 的子字符串不是](http://blogs.msdn.com/b/oldnewthing/archive/2008/06/27/8659071.aspx)
*   [Raymond Chen：GUID 的设计是独一无二的，而不是随机的](http://blogs.msdn.com/b/oldnewthing/archive/2012/05/23/10309199.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T23:54:35.063

我不知道这会如何影响 GUID 的唯一性，但这可能不是一个好主意。

Visual Studio 有一个内置的 GUID 生成器，它需要几秒钟来启动并创建一个新的 GUID。如果您不使用 VS，那么还有其他简单的方法可以创建一个新的。[此页面有 2 个脚本](http://www.somacon.com/p113.php)（VB 脚本和 PHP）可以完成这项工作，[这是一个 .net 版本](http://guid.codeplex.com/)

# xcode - Xcode：如何创建 GPS 强度信号条？

> ID：10264021
> 
> 赞同：2
> 
> 时间：2012-04-21T23:42:26.460
> 
> 标签：xcode, gps

我正在开发一个地图视图应用程序，我想放置 GPS 状态栏，所以无论如何可以根据 GPS 信号强度创建具有 3 种不同颜色的条形图甚至一个点？

提前致谢。

# r - R：多次对带有替换的向量进行采样

> ID：10264025
> 
> 赞同：12
> 
> 时间：2012-04-21T23:43:46.267
> 
> 标签：r

我想对长度为 7 的向量 x 进行替换采样，并对该向量进行 10 次单独采样。我尝试了类似以下的方法，但无法获得我正在寻找的 7x10 输出。这会产生一个 1x7 向量，但我无法计算出其他 9 个向量

```
x <- runif(7, 0, 1)
for(i in 1:10){
    samp <- sample(x, size = length(x), replace = T)
} 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-21T23:46:24.787

这是一种非常方便的方法：

```
replicate(10,sample(x,length(x),replace = TRUE)) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-21T23:53:42.100

由于您似乎想进行替换采样，因此您可以一次获取 7*10 个样本（这对于大尺寸更有效）：

```
x <- runif(7)
n <- 10
xn <- length(x)
matrix(x[sample.int(xn, xn*n, replace=TRUE)], nrow=xn)

# Or slightly shorter:
matrix(sample(x, length(x)*n, replace=TRUE), ncol=n) 
```

第二个版本`sample`直接使用，但有一些问题：如果`x`是一个长度为 1 的数字，就会发生不好的事情。`sample.int`更安全。

```
x <- c(pi, -pi)
sample(x, 5, replace=T) # OK
x <- pi
sample(x, 5, replace=T) # OOPS, interpreted as 1:3 instead of pi... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-22T00:01:04.313

看起来你得到了一个合适的答案，但这是一种类似于你第一次尝试的方法。不同之处在于我们定义`samp`了适当的维度，然后迭代地索引到该对象并一次填充一行：

```
samp <- matrix(NA, ncol = 7, nrow = 10)
for(i in 1:10){
  samp[i,] <- sample(x, size = length(x), replace = T)
} 
```

# android - 有没有办法在 GSM 手机上以编程方式在 Android 中启用呼叫转移？

> ID：10264029
> 
> 赞同：0
> 
> 时间：2012-04-21T23:44:36.863
> 
> 标签：android, phone-call, forwarding

我希望能够让我的应用程序在支持它的 GSM Android 手机上启用无应答和忙线呼叫转移。我的意思不是拨打 * 或 # 代码，我的意思是更改电话本身的呼叫转移设置，就像 Goolge Voice 能够做到的那样。

或者，如果无法更改该设置，我至少希望能够打开那些转发设置 cn 更改的设置屏幕

# perl - 使用 DBIx::Class::ResultSet 的 find_or_create 方法时如何避免竞争条件？

> ID：10264030
> 
> 赞同：5
> 
> 时间：2012-04-21T23:44:45.803
> 
> 标签：perl, postgresql, database, dbix-class

从文档中[`find_or_create`](http://search.cpan.org/~arodland/DBIx-Class-0.08196/lib/DBIx/Class/ResultSet.pm#find_or_create)：

> 注意：因为 find_or_create() 从数据库中读取，然后可能会根据结果进行插入，所以此方法受制于竞争条件。另一个进程可以在查找完成之后和创建开始之前在表中创建一条记录。为避免此问题，请在事务中使用 find_or_create()。

`find_or_create()`仅在 PostgreSQL 的事务中使用就足够了吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T00:05:53.297

不，文档不正确。单独使用事务并**不能**避免这个问题。它只保证在发生异常时回滚整个事务——这样就不会将不一致的状态持久化到数据库中。

为**避免**此问题，您必须在事务中锁定表，因为所有锁定都在事务结束时释放。就像是：

```
BEGIN;
LOCK TABLE mytbl IN SHARE MODE;

-- do your find_or_create here

COMMIT; 
```

但这并不是万能的灵丹妙药。它可能会成为性能问题，并且可能会出现*死锁*（并发事务相互尝试锁定对方已经锁定的资源）。PostgreSQL 将检测到这种情况并取消除一个竞争事务之外的所有事务。您必须准备好在失败时重试操作。

[关于锁的 PostgreSQL 手册。](http://www.postgresql.org/docs/current/interactive/sql-lock.html)

如果你没有很多并发，你也可以忽略这个问题。时隙非常小，因此实际上很少发生。如果您发现重复的密钥违规错误，这不会造成任何伤害，那么您也已经涵盖了这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T12:09:56.053

此实现`find_or_create`应防止竞争条件，如 OP 中所述：

```
eval {
    $row = $self->model->create( { ... } );
}
if($@ && $@ =~ /duplicate/i) {
   $row = $self->model->find( { ... } );
} 
```

在最好的情况下，它还简化`find_or_create()`为单个查询。

# drag-and-drop - 如何拖放到 QTableWidget 中？(PyQT)

> ID：10264040
> 
> 赞同：4
> 
> 时间：2012-04-21T23:46:13.633
> 
> 标签：drag-and-drop, pyqt, qtablewidget

我正在努力让拖放工作。我希望能够从 QPushButton 拖放到 QTableView 的单元格中。我在网上看了一些教程，但似乎停留在第一步。下面的例子是从惊人的 zetcode 教程改变而来的：http: [//zetcode.com/tutorials/pyqt4/dragdrop/](http://zetcode.com/tutorials/pyqt4/dragdrop/)

使用下面的代码，当我将按钮拖到 tableWidget 中时，dragEnterEvent 似乎被调用了，但是一旦我将鼠标悬停在表格上，我就会得到那个符号，我不允许将其放在表格上，所以永远不能参加 drop 事件:(

我不得不承认我对 pyqt 还很陌生，所以可能会遗漏一些非常简单的东西。非常感谢我能得到的任何帮助！干杯戴夫

```
import sys
from PyQt4 import QtGui
from PyQt4 import QtCore

class Button(QtGui.QPushButton):

    def __init__(self, title, parent):
        super(Button, self).__init__(title, parent)

    def mouseMoveEvent(self, e):
        if e.buttons() != QtCore.Qt.RightButton:
            return

        mimeData = QtCore.QMimeData()
        drag = QtGui.QDrag(self)
        drag.setMimeData(mimeData)
        drag.setHotSpot(e.pos() - self.rect().topLeft())

       dropAction = drag.start(QtCore.Qt.MoveAction)

    def mousePressEvent(self, e):

        QtGui.QPushButton.mousePressEvent(self, e)
        if e.button() == QtCore.Qt.LeftButton:
            print 'press'

class MyTable(QtGui.QTableWidget):

    def __init__(self, rows, columns, parent):
        super(MyTable, self).__init__(rows, columns, parent)
        self.setAcceptDrops(True)

    def dragEnterEvent(self, e):
        print e.accept()

    def dropEvent(self, e):
        print 'blah'

        position = e.pos()
        self.button.move(position)

        e.setDropAction(QtCore.Qt.MoveAction)

        e.accept()

class Example(QtGui.QWidget):

    def __init__(self):
        super(Example, self).__init__()
        self.initUI()

    def initUI(self):
        self.setAcceptDrops(True)
        self.button = Button('Button', self)

        self.table = MyTable(2,2,self)
        self.table.setAcceptDrops(True)
        self.table.setDragEnabled(True)

        self.setWindowTitle('Click or Move')

        self.setGeometry(300, 300, 280, 150)

        layout = QtGui.QVBoxLayout()
        layout.addWidget(self.button)
        layout.addWidget(self.table)
        self.setLayout(layout)

def main():

    app = QtGui.QApplication(sys.argv)
    ex = Example()
    ex.show()
    app.exec_()  

if __name__ == '__main__':

    main() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T23:36:48.490

因为您是在 QTableWidget 上设置拖放，所以您还需要重新实现它的`dragMoveEvent`. 根据[此处的文档](http://doc.qt.nokia.com/4.7-snapshot/dnd.html)：

> 子类化复杂小部件
> 某些标准 Qt 小部件提供自己的拖放支持。当子类化这些小部件时，除了 dragEnterEvent() 和 dropEvent() 之外，可能需要重新实现 dragMoveEvent() 以防止基类提供默认的拖放处理，并处理您感兴趣的任何特殊情况。

```
class MyTable(QtGui.QTableWidget):
    ...
    def dragMoveEvent(self, e):
        e.accept() 
```

另外，请注意，虽然原始教程显示了如何在没有任何布局的小部件中移动按钮，但您的示例现在具有由垂直布局管理的按钮。因此，您`self.button.move(position)`将无法按预期工作。虽然`dropEvent`应该正确触发，并且当它悬停在单元格上时，您应该得到“已接受”的拖动图标。

# php - 为什么几乎所有与php相关的电子商务网站都使用面向对象编程作为基础？

> ID：10264043
> 
> 赞同：-1
> 
> 时间：2012-04-21T23:46:29.687
> 
> 标签：php, oop, e-commerce

我只是浏览了很多关于 php 电子商务网站的书籍（例如，[Beginning PHP 和 MySQL E-Commerce](http://www.apress.com/9781590598641)），我意识到有很多人使用面向对象编程作为基础。我想了想，我意识到完全可以在不使用面向对象编程的情况下复制那些电子商务网站，那为什么它们都选择 OOP？

谢谢，

卢卡斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T00:07:38.537

问题实际上归结为“为什么大多数人使用 OOP？”。

简短的回答是因为我们可以 ;-) 较长的回答是：使用非 OOP 语言的优秀程序仍然会尝试将自己组织成与对象非常相似的合理块。例如，一个将不透明数据结构作为每个方法的第一个参数的 C 库。OOP 语言只是让它更容易做到。（即你不需要那些不透明的数据，因为“this”做同样的工作。

如果您使用的语言可以将您的代码组织成更小的部分，那么您会发现它比在一个巨大的 main() 中编写整个应用程序更容易维护[我不会深入整体为什么 OOP 更好]

任何 OOP 程序都可以写成非 OO - 早期的 C++ 编译器只是将 C++ 转换为 C 并编译它 - 但你为什么要这样做？

# haskell - 在 Haskell 中将整数输出到标准输出

> ID：10264044
> 
> 赞同：16
> 
> 时间：2012-04-21T23:46:30.583
> 
> 标签：haskell, io

我有一个简单的功能，例如：

```
nth :: Integer -> Integer 
```

我尝试按如下方式打印它的结果：

```
main = do
    n <- getLine
    result <- nth (read n :: Integer)
    print result 
```

生成以下错误：

```
Couldn't match expected type `IO t0' with actual type `Integer'
In the return type of a call of `nth'
In a stmt of a 'do' expression:
    result <- nth (read n :: Integer) 
```

还尝试`putStrLn`了很多其他组合，但没有运气。
我想不通，我需要一些帮助，因为我不完全理解这些东西是如何工作`IO`的。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-21T23:55:50.133

`nth`是一个函数，而不是一个`IO`动作：

```
main = do
  n <- getLine
  let result = nth (read n :: Integer)
  print result 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-22T05:45:51.527

`do`语法在 monad 中展开某些内容。箭头右侧的所有内容都必须位于 IO monad 中，否则不会检查类型。在你的`IO Integer`程序中会很好。`do`是更明确的函数的语法糖，可以写成如下：

回顾`(>>=) :: m a -> (a -> m b) -> m b`

```
main = getLine >>= (\x ->
       nth >>= (\y ->
       print y)) 
```

But`nth`不是一元值，所以应用 function 没有意义`(>>=)`，这需要 type 的东西`IO a`。

# javascript - 通过索引更改元素的值

> ID：10264045
> 
> 赞同：3
> 
> 时间：2012-04-21T23:46:45.553
> 
> 标签：javascript, jquery

我找不到以下问题的解决方案：当另一个元素已更改且具有相同索引时，该元素应更改：

```
 $("input[bez='sbd_texte']").eq(index).val() = "test"; 
```

“索引”变量没问题，但我不知道如何更改这个特定元素的值。

那么如何更改索引识别的特定元素的值呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-21T23:48:20.363

```
$("input[bez='sbd_texte']").eq(index).val("test"); 
```

jQuery 有一个很棒的文档站点，看看`val`文档：

`.val( value )` 返回：jQuery

> 描述：设置匹配元素集合中每个元素的值。

[文档](http://api.jquery.com/val/)

# c - 'unary *' 的无效类型参数（有 'int'）。基本上我在指针和结构的逻辑上遇到了麻烦

> ID：10264046
> 
> 赞同：0
> 
> 时间：2012-04-21T23:46:50.093
> 
> 标签：c, pointers, struct

我这里有这段代码，它给了我编译器错误，我知道这里还有许多其他问题，标题基本完全相同；我已经阅读了其中很多，但我的所有问题都没有得到解答。在过去的几天里，我在 stackoverflow 和教学网站上阅读了很多关于指针和结构的内容，又是几十个，我觉得我只需要在我面前的一个物理示例来剖析和解释。我觉得我知道大部分这些东西，但我对自己的不确定性比我想的要多得多。如果有人可以帮助我了解发生了什么。我在下面发布了一个编号列表，告诉你我认为正在发生的事情，并希望我在很大程度上是对的，更少解释你必须做的事情，哈哈，开个玩笑。那么这里是代码。

```
struct foo{
    int num;
    char  *word;
    struct foo *ptr;
};

void func1(struct foo*);
void func2(struct foo);

int main() {

    struct foo a;
    a.num = 20;
    a.word = "wordOne";
    func1(&a);
    printf("%d %s", a.num, a.word);       // refer to #3 below.

    a.ptr = &a;
    a.num = 55;
    a.word = "thirdToLastWord";
    func2(a);
    printf("%d %s\n", a.num, a.word);
}

void func1(struct foo *a)
{
    while(*(a->word) != '\0')
        {
            putchar(*(a->word));
            a->word++;
        }
    putchar('\n');
    if(a->num % 10 != 0)
        { a->num *= 2; }
    a->word--;
    printf("num equals %d\n", (*a).num);
}

void func2(struct foo a)
{
    if((*a).num == a->ptr->num)               //compiler error
        {(*a).num = (*((*a).ptr)).num +1; }   //compiler error
    else    {   a->num = 200;   }
    a->word = "wordsix";
    a->ptr->word = "wordseven";
    printf("function 2 %d %s\n", (*a).num, (*((*a).ptr)).word);}
} 
```

好的。所以我想我理解第一个功能。但是，如果我错了，或者我似乎对它为什么这样做有错误的理解，请在以下任何一个方面纠正我。

1）在 main func1 将结构“foo”声明为指针之前。当调用 func1 时，我们传入“a”的地址，这样我们就知道要指向哪个地址。

2) func1 中的所有内容都会改变原来的结构。当在 func1 之外打印出来时，该单词会递减以仅显示最后一个字母“e”。

3) 在我评论#3 的行上，它打印出原始结构 foo 的 .num 而不是指针版本（即使它们是相同的）。

我希望我到目前为止还没有搞砸。

4) 好的，所以 a.ptr = &a 设置 struct var "struct foo *ptr" 在原始 foo 结构中等于 a 的地址；这恰好是指针“struct foo *ptr”所在的确切结构。对吧？

5）我们将他称为（main/orig 结构）的成员，他已经被建立为 main 上方的指针。

6) 那么这是否会在结构中形成一个无限循环，这些结构通过自身内部的指针链接在一起？

我评论编译器错误的地方是我很肯定我遇到问题的地方。

7) 首先，在设置 a.ptr = &a; 之后 我们将带有初始化指针“ptr”的结构副本传递给函数func2，是吗？

8) 在第一个 if stmt 中，看起来我们正在将 a->word 与 a->ptr->num 进行比较。我假设的意思是说：IF {属于“a”指向的结构的成员“word”等于成员“num”，属于指针“ptr”指向的结构和“ptr是再次被指针“a”指向}这似乎是对的，但我不认为它是....

9）如果这是真的，那么下面的行说的是完全相同的事情，加上了+1。

10) 我想最后在 main 中的 printf 打印出 num 和 word 在它们进入 func2 之前是什么，或者 func2 中的某些指针已经改变了它们的值。

我将非常感谢您的所有反馈和建议，我应该如何将这个指针 && 结构 ptr->member 和/或 structure.member 东西根植在我的脑海中。

另外，我不确定这是否出现在我的问题中，但我对双指针也相当不稳定。如果不是太麻烦的话，有人可以告诉我双指针是如何在这里集成到我的代码中的吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T23:59:51.613

a 不是指针。您在很多场合都使用`->`运算符来访问非指针成员，这会给您带来错误。`struct`

您的代码中有很多错误。例如，您没有为`*word`. 但是在其中存储一个值：

```
a.word = "wordOne"; 
```

您应该`num`以`a.num`.

[这是一个关于使用指向结构](http://ee.hawaii.edu/~tep/EE160/Book/chap12/subsection2.1.1.4.html)的指针的教程，它可能会帮助您理解它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-16T02:07:40.117

这段代码确实有很多错误，为了清楚起见，我将尝试浏览您的列表。

1.) 是的，你可以在这里传递一个指针，但是在取消引用指针参数之前有必要检查 NULL。如果您现在养成这样做的习惯，您将节省无数时间来追踪分段错误的来源。

2.)`func1`不变`a->num`

```
if(a->num % 10 != 0)
    { a->num *= 2; }
// a->num % 10 = 20 % 10 = 0, and 0 != 0 is false 
```

此外，Blue Moon 是正确的`a->word`，这可以通过以下两种方式之一正确完成。

具有全局性：

```
const char *global = "wordOne";

int main(int argc, char *argv[]) {
  a.work = (char*)global;
  /*...*/
} 
```

或者 Blue Moon 所指的首选方式：

```
const char *global = "wordOne";

int main(int argc, char *argv[]) {
  size_t sz = sizeof(global);
  a.work = (char*)malloc(sz);
  for(int i = 0; i < sz; i++) { a.work[i] = global[i]; }
  /*...*/
} 
```

注意：使用第二种方法，您最终将需要`free()`该内存。

多读一点指针，你就会明白为什么

关于`func2()`，此函数不使用指针参数，因此取消引用它肯定会引发编译错误。

```
void func2(struct foo);
// struct foo is passed 'by value' 
```

我真的希望这有助于澄清事情！:-)

# c# - UPDATE 语句中 C# 中的 SQL 参数问题

> ID：10264048
> 
> 赞同：0
> 
> 时间：2012-04-21T23:47:47.387
> 
> 标签：c#, mysql, winforms, ado.net

我正在尝试更新数据。每当我使用参数化查询时，它都会给我错误`Fatal Error Encountered during command execution`。

这是我的代码：

```
public void updateAccount(Int32 cashierid, string cashieruser, string isadmin, string cashierfname, string cashiermname, string cashierlname, string cashierpass)
{
    con.ConnectionString = conString;     
    String sql = "UPDATE cashieraccount SET cashieruser = ?cashieruser, cashierpass = ?cashierpass, isadmin = ?isadmin, cashierfname = ?cashierfname, cashiermname = ?cashiermname, cashierlname = ?cashierlname";
    sql += "WHERE cashierid = ?cashierid";
    try
    {
        con.Open();
        MySqlCommand cmd = new MySqlCommand(sql, con);
        cmd.Parameters.AddWithValue("?cashieruser", cashieruser);
        cmd.Parameters.AddWithValue("?cashierpass", cashierpass);
        cmd.Parameters.AddWithValue("?isadmin", isadmin);
        cmd.Parameters.AddWithValue("?cashierfname", cashierfname);
        cmd.Parameters.AddWithValue("?cashiermname", cashiermname);
        cmd.Parameters.AddWithValue("?cashierlname", cashierlname);
        cmd.Parameters.AddWithValue("?cashierid", cashierid);
        cmd.ExecuteNonQuery(); **//Fatar Error Encountered during command execution**
    }
    finally
    {
        con.Close();
    }
} 
```

有没有人有什么建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T23:50:17.230

`where`在子句之前，我在参数后面缺少一个空格：

```
String sql = "UPDATE cashieraccount SET cashieruser = ?cashieruser, cashierpass = ?cashierpass, isadmin = ?isadmin, cashierfname = ?cashierfname, cashiermname = ?cashiermname, cashierlname = ?cashierlname";
sql += " WHERE cashierid = ?cashierid";
// here ^ 
```

# c# - 哈希函数的字节到字符串？

> ID：10264049
> 
> 赞同：2
> 
> 时间：2012-04-21T23:47:50.537
> 
> 标签：c#, linq, web-services, rest, hash

如何将密码哈希转换为字符串？

```
 public void AddStudent(Student student)
    {
        student.StudentID = (++eCount).ToString();
        byte[] passwordHash = Hash(student.Password, GenerateSalt());
        student.Password = passwordHash; //this line?
        student.TimeAdded = DateTime.Now;
        students.Add(student);
    } 
```

如果我尝试：

```
 public void AddStudent(Student student)
    {
        student.StudentID = (++eCount).ToString();
        byte[] passwordHash = Hash(student.Password, GenerateSalt());
        student.Password = Convert.ToString(passwordHash); //this line?
        student.TimeAdded = DateTime.Now;
        students.Add(student);
    } 
```

当我获取我的学生集合时，密码字段会显示 System.Byte[] 我想在哪里取回散列/加盐密码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T00:12:11.467

您可以使用[Convert.ToBase64String 方法](http://msdn.microsoft.com/en-us/library/dhx0d524.aspx)：

```
student.Password = Convert.ToBase64String(passwordHash); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T00:34:41.880

**字节序列可以以无限的方式表示为字符串，**因此您的问题没有一个有效的答案。

已经提供的使用 Convert.ToBase64String() 的解决方案是有效的，但不是您可以使用的唯一解决方案。

如果您查看[msdn 上 HashAlgorithm.ComputeHash 方法](http://msdn.microsoft.com/en-us/library/s02tk69a.aspx)的文档 ，字节数组将使用如下代码转换为十六进制表示：

```
 var sb = new StringBuilder();
        for (int i = 0; i < passwordHash.Length; i++)
            sb.Append(passwordHash[i].ToString("x2"));
        student.Password = sb.ToString(); 
```

这只是另一个例子。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-21T23:58:56.937

```
student.Password = Encoding.GetString(passwordHash); 
```

这会将字节数组转换为字符串。一个快速的谷歌搜索会告诉你关于操作字节数组等你需要知道的一切......

# java - 在Java while-loop条件中分配变量？

> ID：10264054
> 
> 赞同：20
> 
> 时间：2012-04-21T23:48:50.637
> 
> 标签：java, php, loops, variables, while-loop

我有一个方法可以进行大量检查和计算并返回一个自定义类returnMessage。returnMessage 有 2 个布尔值和一个字符串。我想要做的是在我的主类的 while 循环中运行此方法，并在 while 循环最后一次终止后访问 returnMessage 对象。

在php中，这将是一种情况

```
while ( $returned = myObject->myMethod()->finished )
{

}

if( $returned -> finished == FALSE)
{
...
} 
```

但是尝试像这样分配给我一个布尔预期的java错误（上面可能有php错误，已经晚了：D）

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-04-21T23:54:20.117

我们需要查看更多您的代码，但稍微猜测一下，我认为这样的事情会起作用：

```
ReturnMessage returned;
while (!(returned = myObject.myMethod()).finished) {

}
if (!returned.finished) {

} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-07-08T02:55:43.997

while 循环检查条件。这是另一个可以派上用场的例子：

```
public class test {
    public static void main(String[] args) {
        String line;
        while((line = readFromFile())!=null){
//do something with var 'line'
            System.out.println(line);
            break;
        }
    }

    static String readFromFile(){
       return "test string";
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-22T05:25:15.940

我猜虽然在 PHP 中是可以接受的（我不在 PHP 中编写代码），但在 Java 中的条件内进行赋值被认为是非常糟糕的形式。（这是因为它很容易出错并且很难发现，= 和 == 之间的区别在于大量代码的中间。这是基于多年 C 和 C++ 经验的深思熟虑的选择。）

事实上，我不能完全按照你的代码。你说“returnMessage 有 2 个布尔值和一个字符串”，但是我在 PHP 中理解的测试是`myObject->myMethod()->finished != null`并且`returned`被设置为 的值`finished`，但是你去测试`$returned -> finished`它与`myObject->myMethod()->finished->finished`. 对不起，如果我误解了 PHP 语法。

Java 中的一般建议更符合以下方面：

```
ReturnMessage returned = myObject.myMethod().getFinished();
while (returned != null) { 

    ...

    returned = myObject.myMethod().getFinished(); // or did you mean myObject.myMethod();   
}

if (!returned.finished) { // or, better: if (!returned.isFinished())
    ...
} 
```

如果我误解了 PHP，请告诉我，我将修复 Java 代码以匹配。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-21T23:54:00.407

这是可能的

```
while( (returned=myObject.myMethod()).isFinished()){

} 
```

或者更准确地说`(returned=myObject.myMethod())`，分配返回的对象`returned`，您可以像普通 var 一样使用它

# xml - Delphi XML 数据绑定错误：“未知数据类型”

> ID：10264057
> 
> 赞同：3
> 
> 时间：2012-04-21T23:49:46.297
> 
> 标签：xml, delphi, delphi-xe

我正在尝试从导入的架构中导入带有一些复杂文件的 XSD 文件。XML 数据绑定向导给了我一个“未知数据类型”错误。我在几个论坛中看到了这个问题，但看不到解决方案。

[这是](http://www.sii.cl/factura_electronica/schema_ic.zip)我要导入的文件。[这里](http://www.sii.cl/factura_electronica/schema_dte.zip)还有一些其他必需的文件。

是否有任何解决方法或替代工具来为 Delphi XE 生成 XML 类？

**编辑：** [这个问题](https://stackoverflow.com/questions/9020386/are-there-alternate-xml-schema-importers-available-for-delphi)可能与此重复，至少部分重复。第一次没发现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T23:19:47.693

好吧，XSD 文件包含以下内容：

```
 <xs:include schemaLocation="SiiTypes_v10.xsd"/> 
```

此文件包含与当前文件位于同一命名空间中的多个数据类型定义。我不确定这是否是原因，或者仅仅是向导不能包含外部文件，但我只是继续将所有类型定义放入文件中，它就成功了。

我已将文件放在我的源代码控制系统中，我祈祷这不会在不久的将来让我陷入困境。

除非有人知道更好的方法来完成这项工作，否则我会在几天内接受我自己的答案。

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T10:25:16.840

delphi 7中的XML Data Bindings有类似的问题如果您使用delphi 2010，则没有这样的问题。

# c++ - c ++错误：未在此范围内声明的对象

> ID：10264059
> 
> 赞同：0
> 
> 时间：2012-04-21T23:50:25.630
> 
> 标签：c++, g++

谁能解释我为什么会收到以下错误？

```
A.cpp: In member function ‘void A::NewObject(int)’:
A.cpp:11: error: ‘list_a’ was not declared in this scope 
```

我尝试在不同的地方声明 list_a。现在它在 prog.cpp 中，在 main() 中。我不明白为什么据称它不在范围内。

我的简化代码如下。我的想法是将（NewObject）类 A 的对象添加到列表（添加）中，同时另外执行在 A 类中定义的某种测试（比较）。

我是 C++ 初学者，所以我特别感谢详细的答案。提前致谢。以下是文件：

```
//A.h

#ifndef A_H
#define A_H

class A
{
private:
    int id;
    int Compare(int, int);
public:
    A()
    {
        id = 0;
    }
    A(int i)
    {
        id = i;
    }
    void NewObject(int i);
};
#endif

//A.cpp

#include "A.h"
#include "List.h"

void A::NewObject(int i)
{   
    list_a->Add(i);
}

int A::Compare(int a, int b)
{
    if ( a>b ) return 1;
    if ( a<b ) return -1;
    else return 0;
}

//List.h

#ifndef LIST_H
#define LIST_H

template<typename T>
class Node
{
public:
    T* dana;
    Node *nxt, *pre;
    Node()
    {
        nxt = pre = 0;
    }
    Node(const T el, Node *n = 0, Node *p = 0 )
    {
        dana = el; nxt = n; pre = p;
    }
};

template<typename T, typename U>
class List
{
public:
    List()
    {
        head = tail = 0;
    }
    void Add(const U);
protected:
    Node<T> *head,*tail;
};

#endif

//List.cpp

#include <iostream>
#include "List.h"

template<typename T, typename U>
void List<T,U>::Add(const U el)
{
    int i = 5;
    Node<T> *hlp = new Node<T>();
    head = hlp;
    if ( Compare(el,i) > i )
        std::cout << "Ok" << std::endl;
}

//prog.cpp
#include "List.h"
#include "A.h"

int main()
{
    int i = 5;
    List<class A, int> *list_a = new List<class A, int>();
    A obj;

    obj.NewObject(i);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T23:52:36.453

答案很简单：您从未在 A 类中声明过名为 list_a 的变量。就是这样。

这样做：

```
class A
{
private:
    List <int> list_a;
    int id;
    int Compare(int, int);
public:
    A()
    {
        id = 0;
    }
    A(int i)
    {
        id = i;
    }
    void NewObject(int i);
}; 
```

从列表类中删除 U 模板参数。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-12-02T16:27:26.740

When this type of error occurs, there might be a mismatch of class name in the `main` function. Check whether they are same. Only then, you will get an error like `not declared in this scope`, which means "they are not declared properly".

# android-spinner - 2 个 Spinner 一个在列表中有单选按钮，一个没有

> ID：10264060
> 
> 赞同：0
> 
> 时间：2012-04-21T23:50:31.353
> 
> 标签：android-spinner

我正在开发一个 Android 应用程序。我在带有其他一些 EditText 的 LinearLayout 中有 2 个微调器。顶部的 Spinner 显示列表中每个项目的单选按钮。第二个没有，第二个 Spinner 中的每一行都比第一个 Spinner 薄得多。这是我的xml代码。

```
<Spinner
    android:id="@+id/new_type"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:prompt="@string/list_prompt"
android:textColorHint="@android:color/white" />
<Spinner
android:id="@+id/new_course"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:prompt="@string/enter_course"
    android:textColorHint="@android:color/white" /> 
```

这是我的java代码。

```
Spinner spinner = (Spinner) findViewById(R.id.new_type);
ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this,
    R.array.type_array, android.R.layout.simple_spinner_item);
adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
spinner.setAdapter(adapter);

Spinner cSpinner = (Spinner) findViewById(R.id.new_course);
ArrayAdapter<CharSequence> cAdapter = ArrayAdapter.createFromResource(this, 
    R.array.course_array, android.R.layout.simple_spinner_item);
adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
cSpinner.setAdapter(cAdapter); 
```

2 个 Spinners 几乎相同，我不明白为什么 2 个 Spinners 之间有如此大的差异。非常感谢任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T18:05:05.380

您正在声明一个新`ArrayAdapter`的名称`cAdapter`，但下面的一行将下拉视图资源设置为前一个适配器。

要修复它，请更改此行：

```
adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
cSpinner.setAdapter(cAdapter); 
```

到

```
cAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
cSpinner.setAdapter(cAdapter); 
```

固定的 ：）

# sqlite - 打开受密码保护的 sqlite 数据库

> ID：10264063
> 
> 赞同：10
> 
> 时间：2012-04-21T23:50:46.547
> 
> 标签：sqlite

我创建了一个受密码保护的 sqlite 数据库。我希望能够查看数据库，以便在项目开发过程中检查是否正确插入了内容。我已经下载了 sqlite 数据库浏览器，但这似乎无法让您打开加密数据库。

有没有办法可以打开数据库文件。

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-27T15:08:43.413

The free [SQLite2009 Pro](http://osenxpsuite.net/?xp=3) browser will let you open SQLite databases which were encrypted with System.Data.SQLite.

When you open the file you get a warning saying that the file is encrypted or not a database, and are then prompted to select an encryption type, select "RSA".

Edit:

You may find [SQLite2009 Pro](http://osenxpsuite.net/?xp=3) is not as reliable as [sqliteadmin](http://sqliteadmin.orbmu2k.de/) (which does not open databases encrypted with System.Data.SQLite). I just found it crashed upon trying to open a database which had a problem with one of the views.

I ended up [removing the encryption](http://sqlite.phxsoftware.com/forums/p/130/452.aspx), and opening it with [sqliteadmin](http://sqliteadmin.orbmu2k.de/), which did not crash but instead put a little red cross over the view which had a problem. What a nice touch :-)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-07-02T09:48:14.830

[您可以使用SQLiteStudio](https://sqlitestudio.pl/index.rvt)打开并创建受密码保护的[sqlite](https://sqlite.org)数据库：

[![看打开图片](../Images/5dea2192697a92783cf1030ce545512d.png)](https://i.stack.imgur.com/QOuTH.png)

[![见创建图像](../Images/34fc958a2b09302ef4beabb01120c85a.png)](https://i.stack.imgur.com/jPPl5.png)

# php - 通过 PHP 更新数据库

> ID：10264064
> 
> 赞同：0
> 
> 时间：2012-04-21T23:51:07.890
> 
> 标签：php, sql

我正在尝试制作一个表格，以便我的站点成员可以编辑已经在数据库上制作的指南。

我对 php 和数据库还很陌生，但如果您能花点时间看看我的一些编码，我将不胜感激。

```
$id = $_GET['id'];
$guides = mysql_fetch_array(mysql_query("SELECT * FROM guides WHERE id = '$id'")); 
```

形式是：

```
<center>
<FORM ACTION="edit_guide.pro.phpid=$id" enctype="multipart/form-data" METHOD=POST>
<table width="446" border="0" cellspacing="0" cellpadding="0">
  <tr>
    <td colspan="2"><center>Edit a Guide</center></td>
  </tr>
  <tr>
    <td width="79">Made By:</td>
    <td width="367"><input type="text" name="madeby" value="$guides[username]"></td>
  </tr>
  <tr>
    <td>Name of Guide:</td>
    <td><input type="text" name="name" value="$guides[name]"></td>
  </tr>
<tr>
    <td>Filed Under:</td>
    <td><select name=filedunder>
               <option value=guides>Guides
        <option value=dailies>Dailies Guides

       <option value=gg#h>Game Guides # - H

        <option value=ggiq>Game Guides I - Q

        <option value=ggrz>Game Guides R - Z

        <option value=helpfulguides>Helpful Guides

        <option value=newbie>Newbie Guides
</select></td>
  </tr>
   <tr>
    <td valign="top">Content:</td>
    <td><textarea  name="coding" cols="50" rows="35" value="">$guides[coding]</textarea></td>
  </tr>
  <tr>
    <td>Key Word 1</td>
    <td><input type="text" name="key1" value="None"></td>
  </tr>
    <tr>
    <td>Key Word 2</td>
    <td><input type="text" name="key2" value="None"></td>
  </tr>
    <tr>
    <td>Key Word 3</td>
    <td><input type="text" name="key3" value="None"></td>
  </tr>
    <tr>
    <td>Key Word 4</td>
    <td><input type="text" name="key4" value="None"></td>
  </tr>
    <tr>
    <td>Key Word 5</td>
    <td><input type="text" name="key5" value="None"></td>
  </tr>
    <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td colspan="2"><center><font size="-1"><i>
      <input type=submit name=Submit value="Edit">
    </i></font></center></td>
  </tr>
</table></FORM>
<p>&nbsp;</p></center> 
```

但是，当我通过站点查看指南时，单击编辑（这会将您带到具有上述编码的页面）所有论坛区域都是空白的，就像您正在添加新指南一样。

edit_guides.pro.php 编码为：

```
$id=$_GET['id'];
$madeby = $_POST['madeby'];
$name = $_POST['name'];
$coding = $_POST['coding'];
$key1 = $_POST['key1'];
$key2 = $_POST['key2'];
$key3 = $_POST['key3'];
$key4 = $_POST['key4'];
$key5 = $_POST['key5'];
$filedunder = 'guides';
$filedunder2 = $_POST['filedunder'];

if ((!$madeby) OR (!$name) OR (!$coding) OR (!$filedunder2) OR (!$key1) OR (!$key2) OR (!$key3) OR (!$key4) OR (!$key5))

{

               die(header("Location: $baseurl/staff/edit_guides.php?id=$id&error=Please+do+not+leave+any+info+blank."));

}

else

{
mysql_query("UPDATE guides SET header = '$madeby' WHERE id = '$id'");
mysql_query("UPDATE guides SET header = '$name' WHERE id = '$id'");
mysql_query("UPDATE guides SET subheader = '$filedunder2' WHERE id = '$id'");
mysql_query("UPDATE guides SET news = '$coding' WHERE id = '$id'");
mysql_query("UPDATE guides SET header = '$key1' WHERE id = '$id'");
mysql_query("UPDATE guides SET header = '$key2' WHERE id = '$id'");
mysql_query("UPDATE guides SET header = '$key3' WHERE id = '$id'");
mysql_query("UPDATE guides SET header = '$key4' WHERE id = '$id'");
mysql_query("UPDATE guides SET header = '$key5' WHERE id = '$id'");
    header("Location: $baseurl/staff/index1.php?error=The+news+has+been+updated+:)"); 
```

我还不能进入这个页面，正如我上面所说的，Edit_guide 页面就像你在添加新的指南一样。

谁能看到它为什么这样做的问题？我哪里错了？

改变了

```
 $guides = mysql_fetch_array(mysql_query("SELECT * FROM guides WHERE id = '$id'")); 
```

至

```
$guides = mysql_escape_string(mysql_query("SELECT * FROM guides WHERE id = '$id'")); 
```

现在编辑指南，在表单中显示 R。所以你有了

制作人：R

名称：R

内容：R

# ruby-on-rails - 使用图像 ID 的 Rails Paperclip 图像 URL？

> ID：10264065
> 
> 赞同：0
> 
> 时间：2012-04-21T23:51:59.060
> 
> 标签：ruby-on-rails, paperclip

好吧，我又被困住了。而这一次，也许是因为我使用的工具不是为它设计的。

我将 Paperclip 用于图像附件，并将这些图像保存为模型的实例，您猜对了，Image。图片属于用户。用户有很多图像。

但是，我想指定一个用户的图像作为他们的默认图像。所以，我的大脑告诉我，我需要在 User 表中添加一个字段来保存我想要成为默认值的图像的 ID。

图像使用 has_attached_file。我不希望用户拥有自己的附加文件，我只希望用户模型能够引用具有可用 url 辅助方法的图像的特定实例。

当我尝试使用 ID 获取此图像的 URL 时，问题就出现了。要么我试图做的事情是不可能使用回形针，要么我没有正确设置我的关联。

基本上，我希望能够使用用户模型的实例在视图中访问该图像。所以：

```
<%= image_tag @user.image.url %> 
```

但这不起作用。我明白为什么它不起作用，但我不明白如何制作

```
@user.image 
```

是一个神奇的回形针对象的实例，该对象附加了用于检索 url 的方法。

基本上，如果我知道如何使用图像 ID 获取回形针图像的 URL，我会很高兴。有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T00:02:04.257

我想您可以从图像对象中获取回形针图像 URL？

如果是这样，请将其添加到您的用户模型中：

```
def image_url
  Image.find( self.image ).url
end 
```

当您现在拥有保存在用户模型“图像”列中的默认图片的 ID 和图像模型中的“url”列中的图像 url 时，您应该可以这样做：

```
@user.image_url 
```

这应该返回您的“默认”图像的网址

# mysql - 自定义字段解决方案的可扩展性

> ID：10264066
> 
> 赞同：1
> 
> 时间：2012-04-21T23:52:07.117
> 
> 标签：mysql, wordpress

我正在设计一个希望拥有大量用户的 Wordpress 应用程序，因此，虽然我接受重构是一项合理的未来活动，但我现在还需要至少意识到并根据性能和可扩展性考虑适当地采取行动。

我的担忧——我希望你们中的一些人会有意见——是关于自定义帖子类型 (CPT) 的性能特征，特别是附加到 CPT 的自定义字段 (CF)。在我的特定情况下，我正在考虑对内容和交易数据使用大量 CPT。对于高度结构化的事务数据，我使用了很多 CF。我并没有开始采取这种观点——无论对错——：

1.  对于内容相关的实体和“参考数据”……博客条目、主题定义、文章、公司信息、用户资料、产品等。我认为 WP CPT/CF 数据模型足够，SQL 性能应该还可以，即使有些查询有点长。

2.  对于事务数据——在我的例子中，这可能代表每个用户每天 5-10 个“事务”，这反过来可能会转化为数据库中的 50-100 个插入（每个 CF 是一个插入）——数据增长将很快使查询性能没有吸引力/不合适（这里更关心 SELECT 而不是 INSERT）。请记住，我的目标是成千上万的用户群，尽管我怀疑即使是 1,000 的用户群也会开始感到痛苦。

为了帮助说明这一点，让我以“胆固醇测试”为例。我稍微简化了数据要求，但假设您想要捕获总胆固醇、高密度脂蛋白、低密度脂蛋白和甘油三酯。然后你想向用户展示他们的测试历史。您的查询将类似于：

```
SELECT wp_posts.id, wp_posts.post_date
, MAX(CASE WHEN meta_key = 'wpcf-which-day' THEN meta_value END) AS which_day
, MAX(CASE WHEN meta_key = 'wpcf-biochem-lipids-total-cholestertol' THEN meta_value END) AS total_cholesterol
, MAX(CASE WHEN meta_key = 'wpcf-biochem-lipids-ldl' THEN meta_value END) AS LDL
, MAX(CASE WHEN meta_key = 'wpcf-biochem-lipids-hdl' THEN meta_value END) AS HDL
,    MAX(CASE WHEN meta_key = 'wpcf-biochem-lipids-triglycerides' THEN meta_value END) AS Tri
FROM wp_posts LEFT JOIN wp_postmeta ON ( wp_posts.ID = wp_postmeta.post_id )
WHERE   (wp_posts.post_status = 'publish' OR wp_posts.post_status = 'private')
AND post_type = "measurements"
GROUP BY wp_posts.ID
HAVING MAX(CASE WHEN meta_key = 'wpcf-measurement-type' THEN meta_value END) = '4'
ORDER BY MAX(CASE WHEN meta_key = 'wpcf-which-day' THEN meta_value END) DESC 
```

对于一个简单的要求来说相当混乱，对吧？无论如何，让我证明我不是 WP、mySQL 甚至数据库专家的事实，所以我不想不公平，而只是征求一些反馈意见。我公平吗？你会以不同的方式画线吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T10:32:46.380

我没有从社区得到答案，所以让我发布我的快速答案（我仍然很高兴听到其他意见）。

*   自定义字段是 Wordpress 的一个很好的补充
*   它们提供了一种简单的方法来扩展数据模型以满足大多数实际需求，并使人们从数据模型中抽象出来并需要 SQL
*   它们不允许在 CF 数据的数据库中存储 VarChar 数据以外的任何内容，这并不理想
*   在某些时候，高事务数据集可能需要超出此模型

在性能和灵活性之间的整体战斗中，我认为 CF 选择了一个适当的平衡点，但是一个有利于灵活性的平衡点，这意味着拥有大量数据的应用程序区域在某些时候可能会超过它的实用性。对于应该在哪里画线，我仍然没有任何经验法则。

# c# - 如何在 c# XNA 中设置光标的位置

> ID：10264068
> 
> 赞同：2
> 
> 时间：2012-04-21T23:52:34.470
> 
> 标签：c#, position, xna, mouse-cursor

所以我对 XNA 很陌生，但我已经知道如何创建一个相机对象并控制它。我想为我的相机提供一些更直观的控件，因为当光标使用以下代码击中屏幕边缘时，旋转停止。这有点不直观。

我希望能够将光标的位置重置到屏幕中间，我该怎么做？

```
MouseState mouseState = Mouse.GetState();

yaw -= (mouseState.X - oldx) / 600.0f;
pitch -= (mouseState.Y - oldy) / 600.0f;

oldx = mouseState.X;
oldy = mouseState.Y; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T00:02:52.923

要将鼠标位置设置为屏幕中间：

```
Mouse.SetPosition(GraphicsDevice.Viewport.Width / 2, GraphicsDevice.Viewport.Height / 2); 
```

您可以在[Riemers XNA 教程](http://www.riemers.net/eng/Tutorials/XNA/Csharp/Series4/Mouse_camera.php)中看到一个示例。

# php - Hadoop流式PHP环境变量

> ID：10264073
> 
> 赞同：-2
> 
> 时间：2012-04-21T23:53:59.167
> 
> 标签：php, hadoop

如何使用 php 在映射器中获取输入文件名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T10:55:53.940

如前所述[，](http://blog.mayflower.de/archives/562-An-introduction-to-Hadoop.html)对于 php，map-reduce 的模板是：

```
01  function map ($filename, $content) {
02      foreach (explode('', $content) as $word) {
03          collect($word, 1);
04      }
05  }
06   
07  function reduce($word, $values) {
08      $numWordCount = 0;
09   
10      foreach ($values as $value) {
11          $numWordCount += $value;
12      }
13   
14      collect($word, $numWordCount); 
```

现在，不能在[php 函数](http://php.net/manual/en/functions.arguments.php)`$filename`中打印的值 吗？

# android - 在 Android 中组织活动。状态。简单的？

> ID：10264078
> 
> 赞同：0
> 
> 时间：2012-04-21T23:54:30.803
> 
> 标签：android, android-activity

请看图：http: [//i.imgur.com/6FiGe.png](http://i.imgur.com/6FiGe.png)

我的应用程序架构遇到了一些问题。我有一些活动/状态，如果您到达它们，则不允许返回。这些是**K**、**A**和**X**，所以当你到达它们并按下返回按钮时，你将关闭我的应用程序。

**使用START** Activity非常容易。一旦我做一些工作来决定我是去**K**还是**A**，我只需运行**START** .finish() 这就是我想要的（在**K**或**A** Activity 中并按下后退按钮会关闭应用程序，因为**START** Activity 不再存在）。

问题从**X**状态开始。该应用程序就像您需要完成 3 个步骤，以便您完成：

[**开始**]->[ **A** <-> **B** <-> **C** ]->[ **X** ]

要求是在按下返回按钮时：

在**A**上：关闭应用程序

在**B**上：显示 A

在**C**上：显示 B

如果您最终完成某种向导（**A** -> **B** -> **C**），您将到达**X**，如果您只按下后退按钮，您将关闭应用程序。

**问题：我应该如何完成（）A，B，C以防止X返回按钮？我没有参考使用。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T00:40:34.237

实现此目的的一种方法是在活动 X 中，按下自定义事件的后退按钮触发。

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        backPressed();
        return true;
    }
    return super.onKeyDown(keyCode, event);
}

public void backPressed()
{
   Globals.finished = true;
   finish();
} 
```

你会注意到上面的方法有一行**Globals.finished = true;** 这指的是一个名为 Global 的类，它带有一个名为 finished 的静态（可以在类上调用静态，而无需实例化对象）布尔变量，该变量最初设置为 false，如下所示。在我自己的应用程序中，我经常使用 Globals 类来共享整个应用程序共有的东西。您还可以使用共享首选项来做类似的事情。

```
public class Globals
{
  public static finished = false;
} 
```

然后在所有活动的 onResume（或者可能是 onStart）生命周期方法中，您可以放置​​以下内容

```
if (Globals.finished == true)
    finish(); 
```

这将导致所有活动立即关闭，但只有在全局变量中的完成变量为真时才关闭。我以前做过这个，它工作得很好，将确保活动在关闭时调用它们的生命周期方法。

甚至比这更简单，您可以通过在 ActivityX 的 onClose 方法中设置 Globals.finished = true 来避免使用后退按钮事件处理程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T23:57:23.723

您需要`finish()`在要完成的活动中一路回调。使用**startActivityForResult**帮助您完成后退过程

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T02:51:07.400

你可以参考这个[链接](http://developer.android.com/guide/topics/manifest/activity-element.html)。

您可以在活动 A、B、C 的清单文件中添加 android:noHistory="true" ，即...

清单的示例代码看起来像

```
<activity android:label="string resource" android:name="activityA" android:noHistory="true" /> 
```

# python - Python C 扩展 - 为什么使用关键字参数的方法转换为 PyCFunction

> ID：10264080
> 
> 赞同：8
> 
> 时间：2012-04-21T23:54:56.127
> 
> 标签：python, python-c-extension

我正在学习 Python-C 扩展，并且对为什么必须将使用关键字参数的方法强制转换为 PyCFunctions 感到困惑。

我对 PyCFunction 的理解是它需要两个指向 PyObjects 的指针并返回一个指向 PyObject 的指针 - 例如

```
 PyObject* myFunc(PyObject* self, PyObject* args) 
```

如果我要使用一个使用关键字参数的函数，那么这个函数将采用三个指向 PyObjects 的指针并返回一个指向 PyObject 的指针 - 例如

```
 PyObject* myFunc(PyObject* self, PyObject* args, PyObject* keywordArgs) 
```

但是，当我创建模块函数数组时（对于名为“加法器”的函数）：

```
{ "adder", (PyCFunction)adder, METH_VARARGS | METH_KEYWORDS, "adder method" } 
```

工作正常。感觉就像我将浮点数转换为 int 并且仍然必须使用浮点数的非整数部分。如果我没有看到这项工作，我会认为它不会工作。我在这里不明白什么？

此外，我看到一些对 PyCFunctionWithKeywords 的引用，它似乎具有我认为我需要的函数签名，但我的编译器抱怨（发出警告）关于“不兼容的指针类型”。

PyCFunctionWithKeywords 是否已弃用？如果没有，是否有时间我应该/必须使用它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T01:47:03.390

如果您的函数处理关键字参数，则它必须对应于 PyCFunctionWithKeywords。但是，C 不进行重载，并且 PyMethodDef 构建的结构被定义为期望 PyCFunction，而不是完全未经检查的 void *。因此，您必须将 PyCFunctionWithKeywords 转换为 PyCFunction 以阻止编译器抱怨，仅此而已。

请记住，您还必须在标志中传递 METH_KEYWORDS 以告诉 Python 您的函数具有 PyCFunctionWithKeywords 的签名，而不是 PyCFunction。

# transactions - Sqlclient 事务和 .Commit()

> ID：10264081
> 
> 赞同：0
> 
> 时间：2012-04-21T23:55:20.930
> 
> 标签：transactions, transactionscope, sqlclient

在这段代码中，.commit() 之后的 SomeFunction() 是否会被视为事务的一部分？如果发生爆炸，它会回滚吗？在插入动态记录后，我需要做进一步的处理，并且更愿意一次性完成。

```
command.Transaction = transaction
Try
    command.CommandText = _
    "Insert into Region (RegionID, RegionDescription) VALUES (100, 'Description')"
    command.ExecuteNonQuery()
    transaction.Commit()
    'do a function call here
    SomeFunction()
Catch ex As Exception
    transaction.Rollback()
End Try 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T00:44:16.820

不，它不会回滚，因为到时候`Somefunction()`调用事务已经提交。

但是，如果`SomeFunction`抛出任何异常，您的 catch 块仍将在`transaction.Rollback()`方法中抛出异常，因为没有活动事务要回滚。

你应该把你的`Somefunction()`调用移到你的 Exception 块下面，如果可能的话，把它放在另一个 try catch 块中。

```
command.Transaction = transaction
Try
    command.CommandText = _
    "Insert into Region (RegionID, RegionDescription) VALUES (100, 'Description')"
    command.ExecuteNonQuery()
    transaction.Commit()

Catch ex As Exception
    transaction.Rollback()
End Try

    'do a function call here
    SomeFunction() 
```

# orchardcms - 创建内容错误 - 指定的演员表无效

> ID：10264089
> 
> 赞同：4
> 
> 时间：2012-04-21T23:57:02.223
> 
> 标签：orchardcms

我有一个自定义模块。Migrations.cs 看起来像这样。

```
 public int Create()
    {
        SchemaBuilder.CreateTable("MyModuleRecord", table => table
            .ContentPartRecord()
            ...
        );

        ContentDefinitionManager.AlterPartDefinition(
            typeof(MyModulePart).Name, cfg => cfg.Attachable());

        ContentDefinitionManager.AlterTypeDefinition("MyModule",
           cfg => cfg
                .WithPart("MyModulePart")
                .WithPart("CommonPart")
                .Creatable()
            );

        return 1;
    } 
```

这是我在控制器中的代码。

```
 var newcontent = _orchardServices.ContentManager.New<MyModulePart>("MyModule");
  ...
  _orchardServices.ContentManager.Create(newcontent); 
```

我从 Orchard.ContentManagement ContentCreateExtensions 中的这个新方法中得到了无效的转换错误。

```
 public static T New<T>(this IContentManager manager, string contentType) where T : class, IContent {
        var contentItem = manager.New(contentType);
        if (contentItem == null)
            return null;

        var part = contentItem.Get<T>();
        if (part == null)
            throw new InvalidCastException();

        return part;
    } 
```

知道我做错了什么吗？

谢谢。

这是处理程序。

```
public class MyModuleHandler : ContentHandler
{
    public MyModuleHandler(IRepository<MyModuleRecord> repository)
    {
        Filters.Add(StorageFilter.For(repository));
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T19:18:47.367

您收到了，`InvalidCastException`因为内容项似乎没有您的`MyModulePart`附件。

如果有适合您的驱动程序，那么在某处有一个隐式链接允许您的部分显示在内容项上（我不确定这是如何完成的，也许其他人可以详细说明 - 但这是要做的事情Orchard 核心深处的形状表是如何收获和拾取形状的）。

但是，由于您没有驱动程序，因此将一个添加 `ActivatingFilter`到您的部件的处理程序类将使链接显式：

```
public MyModulePartHandler : ContentHandler {
    public MyModulePartHandler() {
        Filters.Add(StorageFilter.For(repository));
        Filters.Add(new ActivatingFilter<MyModulePart>("MyModule");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T02:59:42.107

您的零件表名称错误。尝试将其重命名为（因此“记录”之前的部分与您的部分型号名称完全匹配）：

```
 SchemaBuilder.CreateTable("MyModulePartRecord", table => table
        .ContentPartRecord()
        ...
    ); 
```

# c# - 如何在 MVC 应用程序中搜索多个表？

> ID：10264095
> 
> 赞同：0
> 
> 时间：2012-04-21T23:58:08.667
> 
> 标签：c#, asp.net-mvc, linq, entity-framework, join

我在 MVC 应用程序中有 2 个表 (`Topics`和`Comments`)。我想查询`comments`表，还要`title`从`topic`表中返回。

我相信我正在使用 EF。我会使用 SQL，但我不确定这是否适用于 MVC 应用程序。

使用 SQL 我将执行以下操作：

```
SELECT c.Id, c.Comment, t.Title 
FROM Comments c INNER JOIN Topics t
ON c.TopicId = t.Id 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T00:28:32.270

这是使用 LINQ 编写 sql 查询的方式：

```
var query = _db.Comments.Join(
    _db.Topics,
    c => c.TopicId,
    t => t.Id,
    (comment, topic) =>
       new
       {
           Comment = comment,
           Topic = topic
       }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T00:29:17.010

使用 LINQ 和 EF 很容易。它看起来像这样：

```
Dim Comments = Comments.
    Where(function(x) x.Topic.Id = ???).
    Select(function(x) New with {
        .Comment = x.Comment,
        .Title = x.Topic.Title
    }) 
```

返回一个`IQueryable(Of Anonymous Type)`

然后对于每个条目，您可以像使用其他任何属性一样使用属性... Dim A = Item.Comment Dim B = Item.Title

# c# - 将类的实例保存到 ApplicationSettings 时出现序列化异常

> ID：10264102
> 
> 赞同：1
> 
> 时间：2012-04-21T23:59:29.803
> 
> 标签：c#, windows-phone-7

我有一个带有很多属性的自定义类，当我创建这个类的一个实例时，我将它添加到隔离存储中，以便以后可以检索它，但是一旦我保存了一个，如果我尝试保存另一个，我就会得到这个异常：

`System.Windows.Media.SolidColorBrush`不需要带有数据合同名称的类型`SolidColorBrush(http://schemas.datacontract.org/2004/07/System.Windows.Media)`。将任何静态未知的类型添加到已知类型列表中 - 例如，通过使用`KnownTypeAttribute`属性或将它们添加到传递给的已知类型列表中`DataContractSerializer`。

我的一个属性是 Brush 但是我最初并没有在此处设置此属性，那么为什么只有在我保存第二个实例时才会出现异常？

任何帮助都会非常感谢:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T11:58:54.690

您想要保存到隔离存储（使用[IsolatedStorageSettings](http://msdn.microsoft.com/en-us/library/system.io.isolatedstorage.isolatedstoragesettings%28v=vs.95%29.aspx)类）的任何对象都必须使用[DataContractSerializer](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datacontractserializer%28v=vs.95%29.aspx)进行序列化。

[SolidColorBrush](http://msdn.microsoft.com/en-us/library/system.windows.media.solidcolorbrush%28v=vs.95%29.aspx)（以及任何与此相关的[Brush](http://msdn.microsoft.com/en-us/library/system.windows.media.brush%28v=vs.95%29.aspx)）不是可序列化的市场，所以这就是问题所在！

为了解决这个问题，我建议您只保存画笔的颜色（而不是实际的 Brush 对象），然后检索它并创建一个新的 SolicColorBrush 对象。

# wordpress - 带有 Compass Sass 的 Wordpress 中的相对文件夹

> ID：10264103
> 
> 赞同：0
> 
> 时间：2012-04-21T23:59:35.467
> 
> 标签：wordpress, sass, path, relative-path, compass-sass

我在指南针中的路径有问题，我正在使用这种结构开发一个带有 sass-compass 的 wordpress 主题：

```
theme-name/  
               /css/style.css  
               /sass/style.scss  
               /images  
               /fonts 
```

我想尊重这种结构，因为样式表已经使用如下路径编写：

```
h1 { background-image: url('images/sprite.png'); } 
```

因此，由于样式表位于指南针创建的 css 文件夹中，因此我必须将所有图像路径重命名为`url('../images/sprite.png')`或将图像文件夹放置在 css 文件夹中，这样才能在不修改的情况下工作，但在这种情况下这不是最佳选择，我需要找到一种在不修改样式表的情况下使其工作的方法，我尝试了`config.rb`但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T00:25:33.723

WordPress 有一些特定的规则，即 style.css 必须在主题根目录中才能使主题正常工作。所以你必须在 sass 之前尊重 WordPress。

另一种方法是创建一个资产文件夹。

/theme
style.css
/assets/morestylesheets.css
/assets/images
等

# php - 显示订单的 PHP 购物车

> ID：10264105
> 
> 赞同：1
> 
> 时间：2012-04-21T23:59:48.493
> 
> 标签：php, mysql, multidimensional-array, pdo, shop

嗨，

我正在为培训目的创建一个 PHP 商店。我希望用户能够查看他下的最后一个订单 - 但我很难实现这一点。

我的数据库中有这些表：

**客户**(kid, name, address,...)
**products** (pid, product_name, product_description, price)
**orders** --> oid, Kid,payment, address, status
**order_detail** --> oid, date, pid, quantity)

好的，我创建了一个函数，查询从数据库中获取所需的数据

```
function showOrder($kid)
{
$db = database();
$orders = $db->query ("SELECT * FROM orders
    INNER JOIN order_detail on orders.oid=order_detail.oid
    INNER JOIN products on order_detail.pid = products.pid
    WHERE kid='$kid' ");

$orders = $orders->fetchAll();

$lastoid = 0;
foreach($orders as $i){

    while($lastoid != $i['oid']) {
        $lastoid = $i['oid'];
        echo "Ordernr: ".$lastoid."<br/>";
        echo "Produktname: ".$i['product_name']."<br>";
        echo "Menge: ".$i['quantity']."<br/>";
        echo "Preis: ".$i['price']."<br/>";
        echo "Status: ".$i['status']."<br/>";
        echo "<br/><br/><hr/>";    
    }
}
} 
```

我想要做的：在表格中列出单个订单（--> oderid | 产品名称 | 数量 | 价格 | 状态）如果订单只包含一种产品，它就可以工作，但是如果订单变大（2 种产品），只显示第一个。

$database 看起来像这样：

```
Array
(
[0] => Array
    (
        [oid] => 1
        [0] => 1
        [kid] => 1
        [1] => 1
        [2] => 1
        [date] => 2012-04-17
        [3] => 2012-04-17
        [pid] => 1
        [4] => 1
        [quantity] => 2
        [5] => 2
        [payment] => Nachnahme
        [6] => Nachnahme
        [street] => teststraße
        [7] => teststraße
        [number] => 2
        [8] => 2
        [zip] => 2222
        [9] => 2222
        [city] => Teststadt
        [10] => Teststadt
        [status] => in Bearbeitung
        [11] => in Bearbeitung
        [12] => 1
        [product_name] => Acer Laptop
        [13] => Acer Laptop
        [price] => 29.00
        [14] => 29.00
        [details] => blabla
        [15] => blabla
        [category] => Laptop
        [16] => Laptop
        [date_added] => 2012-04-05
        [17] => 2012-04-05
    )

[1] => Array
    (
        [oid] => 1
        [0] => 1
        [kid] => 1
        [1] => 1
        [2] => 1
        [date] => 2012-04-17
        [3] => 2012-04-17
        [pid] => 2
        [4] => 2
        [quantity] => 2
        [5] => 2
        [payment] => Nachnahme
        [6] => Nachnahme
        [street] => teststraße
        [7] => teststraße
        [number] => 2
        [8] => 2
        [zip] => 2222
        [9] => 2222
        [city] => Teststadt
        [10] => Teststadt
        [status] => in Bearbeitung
        [11] => in Bearbeitung
        [12] => 2
        [product_name] => Grundig TV
        [13] => Grundig TV
        [price] => 22.00
        [14] => 22.00
        [details] => blabla

        [15] => blabla
        [category] => TV
        [16] => TV
        [date_added] => 2012-04-05
        [17] => 2012-04-05
    )

[2] => Array
    (
        [oid] => 1
        [0] => 1
        [kid] => 1
        [1] => 1
        [2] => 1
        [date] => 2012-04-17
        [3] => 2012-04-17
        [pid] => 7
        [4] => 7
        [quantity] => 1
        [5] => 1
        [payment] => Nachnahme
        [6] => Nachnahme
        [street] => teststraße
        [7] => teststraße
        [number] => 2
        [8] => 2
        [zip] => 2222
        [9] => 2222
        [city] => Teststadt
        [10] => Teststadt
        [status] => in Bearbeitung
        [11] => in Bearbeitung
        [12] => 7
        [product_name] => Nokia Handy
        [13] => Nokia Handy
        [price] => 69.00
        [14] => 69.00
        [details] => blabla
        [15] => blabla
        [category] => Handy
        [16] => Handy
        [date_added] => 2012-04-06
        [17] => 2012-04-06
    )

[3] => Array
    (
        [oid] => 2
        [0] => 2
        [kid] => 1
        [1] => 1
        [2] => 2
        [date] => 2012-04-17
        [3] => 2012-04-17
        [pid] => 8
        [4] => 8
        [quantity] => 1
        [5] => 1
        [payment] => Vorauskasse
        [6] => Vorauskasse
        [street] => musterstraße
        [7] => musterstraße
        [number] => 1
        [8] => 1
        [zip] => 1111
        [9] => 1111
        [city] => stadt
        [10] => stadt
        [status] => in Bearbeitung
        [11] => in Bearbeitung
        [12] => 8
        [product_name] => PC groß
        [13] => PC groß
        [price] => 66.00
        [14] => 66.00
        [details] => blabla
        [15] => blabla
        [category] => Computer
        [16] => Computer
        [date_added] => 2012-04-06
        [17] => 2012-04-06
    )
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T01:20:41.780

问题是您没有从产品表中选择。您的 select 查询只是`orders.*`，无非是 . 下的所有列`orders table`。解决方案是将产品列添加到您的选择查询中。我不太确定您为什么要明确使用内部联接，我的会是这样的：

```
select orders.*, products.* from orders,order_detail,products where 
orders.oid=order_detail.oid and order_detail.pid=products.pid and orders.kid=1 
```

这是我得到的结果：

```
| oid | kid | pid | product_name |
|  1  |  1  |  1  | camera       |
|  1  |  1  |  2  | pants        | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-13T11:49:23.837

您的代码进入 while 循环

```
$lastoid = 0; 
```

它将运行第一个 while 循环，因为 $lastoid 不等于 $i['oid']。一个是零，另一个是一。在下一行中，您将 $i['oid'] 的值分配给 $lastoid。这使它们相等，您的 while 循环将停止。如果循环不会中断，那么您将拥有无穷无尽的相同信息行。在 while 循环中没有对下一个顺序的引用。

改成这样

```
$lastoid = 1;
foreach($orders as $key => $value){

    if($lastoid == $value[$key]['oid']) {
        echo "Ordernr: ".$lastoid."<br/>";
        echo "Produktname: ".$i['product_name']."<br>";
        echo "Menge: ".$i['quantity']."<br/>";
        echo "Preis: ".$i['price']."<br/>";
        echo "Status: ".$i['status']."<br/>";
        echo "<br/><br/><hr/>";    
    } else {
        $lastoid = $value[$key+1]['oid'];
    }
} 
```

# objective-c - 在 Objective-C 中使用 gdata 检索和查看谷歌文档

> ID：10264111
> 
> 赞同：0
> 
> 时间：2012-04-22T00:01:46.857
> 
> 标签：objective-c, google-docs, gdata, google-docs-api

一段时间以来，我一直试图为此寻找答案，但我还没有遇到可以解释它是否可能的东西：

我在 Google Docs 中有一堆文档，我正在使用 gdata 库检索它们的列表。当我从列表中选择一个时，我尝试了多种不同的方法来显示/打开一个，但我无法找到要执行的请求或随请求发送的 url。

文件是公开的，共享设置设置为公开，但不会显示。

谁能帮我弄清楚如何在 UIWebView 或本机应用程序中打开 Google Docs 文档（任何文件格式）？

**编辑**好的，我认为这个问题有点混乱。我有一个来自用户提要的文档列表，其中我将文档的资源 ID 存储在我的数据库中。这些文件是公开的，因此应允许他人打开和查看。假设另一个用户进来并想要查看另一个人的文档。我将 resourceID 调用到查看器 url 中，它仍然说它需要授权。我想，由于该文档是公开的，因此尚未登录的用户（因此没有身份验证令牌）应该仍然可以查看该文档。就像谷歌文档一样有效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T21:43:30.343

Objective-C 库中包含的 DocsSampleWindowController 包含一个方法，该方法显示如何使用其 HTML 链接打开文档：

```
- (IBAction)viewSelectedDocClicked:(id)sender {
  NSURL *docURL = [[[self selectedDoc] HTMLLink] URL];
  if (docURL) {
    [[NSWorkspace sharedWorkspace] openURL:docURL];
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T07:22:51.013

我对Objective-C一无所知，但我可以笼统地告诉你..只需在以下uri发送一个经过身份验证的请求：确保将**YourDocument'sResourceID**替换为您要阅读的文档的资源ID..

```
https://docs.google.com/feeds/download/documents/export/Export?id=**YourDocument'sResourceID**&exportFormat=txt&format=txt 
```

你也可以在上面的uri中使用变量格式。txt给你简单的文本，没有样式。

# javascript - 客户端 XMLHttpRequest 问题

> ID：10264112
> 
> 赞同：0
> 
> 时间：2012-04-22T00:01:57.887
> 
> 标签：javascript, xml, ajax, xmlhttprequest

我正在尝试使用 XMLHttpRequest 方法使用 AJAX 调用一个简单的 XML 文件，但它一直在遇到 catch 块。该方法将首先对正确的电子邮件条目进行客户端验证，然后检查外部 XML 文件中的“禁止”电子邮件地址。有人可以解释一下为什么它失败了这是代码，谢谢！

```
function validateEmail() {

var email = document.forms["feedback"]["email"].value;
var atpos = email.indexOf("@");
var dotpos  = email.lastIndexOf(".");
var url = "ajaxtest.xml";

// validates the format of the email address
    if (atpos < 1 ||
    dotpos < atpos + 2 || 
    dotpos + 2 >= email.length){

    document.getElementById('emailmsg').innerHTML = "Gotta get this right!";
    document.forms["feedback"]["email"].focus();
    return false;
    } else {
    getXML(url)  
    } 
}
function getXML(url)  {

    try {
var request = new XMLHttpRequest();

    request.onreadystatechange = processRequest();
    request.open('GET', url, true);
    request.send(null);

}
catch ( e )
    {
    alert( 'Request Failed' );
    } 
} 
function processRequest() {

    if (request.readyState == 4 && request.status == 200) { 

    var XMLobject = request.responseXML;
var emails = XMLobject.getElementsByTagName("email");

  for (var i = 0; i < emails.length; i++)  {

      var badEmails = emails.item( i );
      var badEmail = badEmails.value;

        if (badEmail == email) {

        document.getElementById('emailmsg').innerHTML = "You are a bad man!";
        } else  {
        alert("not on the naughty list");
        }
      }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T00:05:23.553

你`processRequest()`马上打电话。您希望将其分配给 `onreadystatechange`以便稍后调用它。为此，请删除括号：

```
request.onreadystatechange = processRequest; 
```

# git - git pull 后隐藏某些文件/目录的列表？

> ID：10264113
> 
> 赞同：1
> 
> 时间：2012-04-22T00:02:00.893
> 
> 标签：git, shell, terminal

通常，当我从项目中提取时，会有部分或文件对我的工作没有影响，只会让我的终端窗口膨胀：

```
计数对象：100，完成。
远程：压缩对象：100% (2/2)，完成。
远程：总共 3 个（增量 29），重复使用 72 个（增量 19）
拆包对象：100% (3/3)，完成。
来自 github.com:Foo/bar
 * 分支主 -> FETCH_HEAD
通过递归进行合并。
/js/i_care_about_this_file.js | 2 +-
/php/i_care_about_this_also.php | 4 +-
/flash/some_project/file_i_dont_care_about.swf | Bin 0 -> 904 字节
46 个文件更改，22 个插入（+），64 个删除（-）
创建模式 100188 /flash/some_project/file_i_dont_care_about.swf

```

显然，这是一个非常简短的示例 — 通常有数百个 SWF 文件，我不想在拉取时显示这些文件。

有没有我可以传递给`git pull`或的标志`git merge`？或者我可以在 git 或我的 shell 中设置一些配置参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T00:08:27.987

显然 git 不知道你关心什么和不关心什么，但是你可以通过传递`--quiet`.

此外，git 并非真正设计用于处理 SWF 等二进制文件。你为什么要检查他们？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T00:09:26.487

你可以使用`-q`开关：

```
 -q, --quiet
       This is passed to both underlying git-fetch to squelch reporting of during transfer, and underlying git-merge to squelch output during
       merging. 
```

或者我猜你想要更多`-n`

```
 --stat, -n, --no-stat
       Show a diffstat at the end of the merge. The diffstat is also controlled by the configuration option merge.stat.

       With -n or --no-stat do not show a diffstat at the end of the merge. 
```

您是否只想隐藏`.swf`文件我猜您必须将`git pull`输出通过管道传输到`sed`or `grep`，例如：

```
$ git pull <remote> | grep -v ".swf " 
```

# c++ - 如何从 C++ 中的派生类调用基类方法？

> ID：10264119
> 
> 赞同：0
> 
> 时间：2012-04-22T00:03:06.090
> 
> 标签：c++

> **可能重复：**
> [有没有办法调用被覆盖的对象的基类方法？(C++)](https://stackoverflow.com/questions/1619769/is-there-a-way-to-call-an-objects-base-class-method-thats-overriden-c)

第一个问题是在 java 中调用 super() 构造函数，就像在 c++ 中首先初始化超类构造函数一样。

```
sub() : super(){} 
```

有没有办法像在java中一样在c ++中调用超类方法

前任。

```
public sub(){
super.someMethod(); 
```

}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T00:05:20.927

要调用类的基本构造函数，您可以将其称为`BaseClassName(args)`. 例如：

```
class A
{
public:
    A() { }
    virtual void Foo() { std::cout << "A's foo" << std::endl; }
};

class B : public A
{
public:
    B() : A() { }
    void Foo();
}; 
```

要调用方法的基类版本，您可以`BaseClassName::MethodName`：

```
void B::Foo()
{
    std::cout << "B's foo" << std::endl;
    A::Foo();
} 
```

# mysql - MySQL 5.5 从 table2 中为 table1 中的每个唯一 ID 选择 MAX

> ID：10264120
> 
> 赞同：1
> 
> 时间：2012-04-22T00:03:19.040
> 
> 标签：mysql

我有两张桌子：

```
table1        table2
column id     column id   column value
1             1           count_20
2             1           count_30
3             2           count_20
4             2           count_50
...           2           count_200
              3           count_30
              3           count_50
              3           count_200
              4           count_130
              ...         ... 
```

我想构建一个查询，该查询将从中选择每一行`table1, column id`并`MAX`从相应的`column value`from中选择值，并在列 中`table2`做一个`DESC`短的。`int``value`

所以输出应该是：

```
table1.id     value
2             count_200  
3             count_200  
4             count_130  
1             count_30  
...           ... 
```

我已经尝试过了`JOIN`，但是对于每一个我从.`value` `(count_%)``table2``id``table1`

```
SELECT table1.id, table2.id, table2.value FROM table1
LEFT JOIN table2
ON table2.id=table1.id
WHERE table1.id<'100'
ORDER BY
CASE value
  WHEN 'count_20' THEN '20' 
END DESC,
CASE value
  WHEN 'count_30' THEN '30' 
END DESC,
CASE value
  WHEN 'count_50' THEN '50' 
END DESC,
CASE value
  WHEN 'count_130' THEN '130' 
END DESC,
CASE value
  WHEN 'count_200' THEN '200' 
END DESC; 
```

输出：

```
table1.id   table2.id   value
2           2           count_200  
3           3           count_200  
4           4           count_130  
2           2           count_50  
3           3           count_50  
1           1           count_30  
3           3           count_30  
1           1           count_20  
2           2           count_20  
...         ... 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T02:37:15.597

试试这个：

```
select t2.id, 
'count_' + cast(max(cast(replace(t2.value, 'count_', '') as int)) varchar) intValue
from table1 t1
join table2 t2 on t1.id = t2.id
group by t2.id
order by max(cast(replace(t2.value, 'count_', '') as int)) desc 
```

这导致：

```
+----+------------+
| 身份证 | 价值 |
+----+------------+
| 2 | count_200 |
| 3 | count_200 |
| 4 | count_130 |
| 1 | count_30 |
+----+------------+

```

[在这里](http://sqlfiddle.com/#!3/58b2c/1)拉小提琴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T01:33:29.963

[http://www.w3schools.com/sql/sql_distinct.asp](http://www.w3schools.com/sql/sql_distinct.asp) 看看这个。这只会显示一次值。

# java - java-OutOfMemoryError 与 -Xms1000M -Xmx4000M -mx1000m

> ID：10264123
> 
> 赞同：1
> 
> 时间：2012-04-22T00:04:13.110
> 
> 标签：java

使用：-Xms1000M -Xmx4000M -mx1000m 我仍然得到 java.lang.OutOfMemoryError: Java heap space

如果我尝试增加这些数字中的任何一个，我会收到以下 JVM 错误：

> 初始化虚拟机时出错
> 
> 无法为对象堆保留足够的空间
> 
> 无法创建Java虚拟机。

我该如何解决这个 OutOfMemoryError 问题？（即使我需要在磁盘上缓存内存）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T01:15:41.547

你的系统有多少内存？你在运行windows吗？您不能使用 32 位 Windows JVM 创建超过 1G 的堆。如果您的 Xms 设置大于此限制，则 JVM 将无法初始化。

JPEG 图像被压缩。一个 100M 的 JPEG 非常大，一旦被 image io lib 解压缩，它会变得更大。1G堆的OOM是可以想象的。

巴里

# javascript - 根据 DOM-inspector，FORM 看起来是空的

> ID：10264126
> 
> 赞同：0
> 
> 时间：2012-04-22T00:04:35.217
> 
> 标签：javascript, html

我正在使用的网络应用程序有问题。表单中的输入字段由 jQuery 添加。我的表单在 HTML 编辑器中如下所示：

```
<form id="profile" method="post" action="Profile/UpdateProfile">
        <tr><td><b>Namn:</b></td><td><parameter name="Name" class="transform">@ViewBag.Name</parameter></td></tr>
        <tr><td><b>Address:</b></td><td><parameter name="Address" class="transform">@ViewBag.Address</parameter></td></tr>
        <tr><td><b>Postaddress:</b></td><td><parameter name="ZIP" class="transform">@ViewBag.ZIP</parameter></td></tr>
        <tr><td><b>Personnummer:</b></td><td><parameter name="Pnumber" class="transform">@ViewBag.Pnumber</parameter></td></tr>
    </form> 
```

但它在 DOM-inspector 中看起来像这样：

```
<form id="profile" method="post" action="Profile/UpdateProfile"></form>
<tbody><tr><td><b>Namn:</b></td><td><parameter name="Name" class="transform">Anton Gildebrand</parameter></td></tr>
        <tr><td><b>Address:</b></td><td><parameter name="Address" class="transform"></parameter></td></tr>
        <tr><td><b>Postaddress:</b></td><td><parameter name="ZIP" class="transform">0</parameter></td></tr>
        <tr><td><b>Personnummer:</b></td><td><parameter name="Pnumber" class="transform"></parameter></td></tr>

</tbody> 
```

我没有输入可能看起来很奇怪，但是当用户按下编辑按钮时，“参数”标签会使用以下 javascript 转换为文本输入：

```
$('#' + id + ' .transform').each(function (index) {
         var val = $(this).html();
         $(this).html('');
         var tag = $(this).parent().html();
         var newTag = tag.replace('<parameter', '<input type="text" value="' + val + '"');
         newTag = newTag.replace('</parameter', '</input');
         $(this).parent().html(newTag);
     }); 
```

正如您所看到的，“参数”-标签没有被 DOM 检查器中的表单包裹，并且没有任何内容（我使用 Fiddler 调试）发布到服务器。我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T00:06:06.633

将表格包裹在整个表格周围。

您不能将表单放在表格元素内，而是放在表格单元格之外。如果浏览器尝试执行错误恢复，您会看到结果。[使用验证器](http://validator.w3.org/)通常是一个好主意（尽管如果您使用 JS 生成它，则需要在要生成的标记上运行它）。

（另外，[使用 css 进行布局](https://www.google.co.uk/search?sugexp=chrome,mod=12&ix=nh&sourceid=chrome&ie=UTF-8&q=css+forms)并使用[标签元素](https://developer.mozilla.org/en/HTML/Element/label)而不是粗体元素）。

# objective-c - 在 Objective-C 中扩展与子类化，哪个更适合创建稍后要扩展的计算器类？

> ID：10264134
> 
> 赞同：0
> 
> 时间：2012-04-22T00:06:04.997
> 
> 标签：objective-c, ios, design-patterns

我正在创建一个计算器类，我希望将来能够扩展它。我无法决定是否应该让未来的类将其子类化，或者是否应该让每个扩展成为一个新类别。哪个是更好的选择？

如果我想在将来添加它，我无法决定扩展这个计算器类的最佳方式。我应该让每个用户将其子类化，还是添加他们想要添加的一类方法。

我想做的是，如果用户想要定义一个新操作，比如“+*”，他们可以在一个新类别中定义它并给我一个选择器，这样我就可以将所有操作存储在 Dictionary 中并选择要计算的方法结果。

例如，

`SEL method = NSSelectorFromString ( @"plusTimesWithArgA:andArgB:"; );`

`[self performSelector:@selector(method) withObject:operandA withObject:operandB];`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T01:21:21.097

我建议使用[访客](http://en.wikipedia.org/wiki/Visitor_pattern)模式。子类化是最紧密的耦合形式。扩展类会带来覆盖现有方法的风险并产生大量耦合。

使用 Visitor 模式，您可以拥有一个方法，该方法采用应该具有“操作”方法的对象的 id。只要它接受输入并返回结果，它就可以以任何方式操作。这意味着您可以在不了解计算器类的其余部分的情况下实现无限的操作。

# c++ - 调用 STL 向量的析构函数时发生奇怪的崩溃

> ID：10264136
> 
> 赞同：4
> 
> 时间：2012-04-22T00:06:48.453
> 
> 标签：c++, stl, mingw

我有一个程序从 mysql 数据库中获取一些数据，调用一个函数来处理该数据，然后退出。运行它时出现奇怪的错误...当函数返回值时程序崩溃。正如我怀疑这是我的一个类的析构函数的问题。该类包含两个向量（一个是双精度，另一个是我自己编写的日期类）。当双打向量被破坏时程序崩溃。

手动擦除析构函数中的向量不会做任何事情。

当我手动调用析构函数时，我没有收到此错误。仅当我从函数返回值时才会发生这种情况。逐行崩溃发生在 stl_vector.h 中

`{ _M_deallocate(this->_M_impl._M_start, this->_M_impl._M_end_of_storage - this->_M_impl._M_start); }`

谷歌搜索并不是很有帮助......我发现分配一个超出向量大小的值可能会触发这样的事情，但我已经检查了我的代码并确保不会发生这种情况。

错误：

```
Program received signal SIGTRAP, Trace/breakpoint trap.
In ntdll!DbgUiConnectToDbg () (C:\WINDOWS\system32\ntdll.dll) 
```

调用堆栈：

```
#0 7C90120F ntdll!DbgUiConnectToDbg() (C:\WINDOWS\system32\ntdll.dll:??)
#1 7C96EE31 ntdll!RtlpNtMakeTemporaryKey() (C:\WINDOWS\system32\ntdll.dll:??)
#2 7C96F26E ntdll!RtlpNtMakeTemporaryKey() (C:\WINDOWS\system32\ntdll.dll:??)
#3 7C970456 ntdll!RtlpNtMakeTemporaryKey() (C:\WINDOWS\system32\ntdll.dll:??)
#4 7C94BAFC ntdll!LdrFindEntryForAddress() (C:\WINDOWS\system32\ntdll.dll:??)
#5 00000000 0x006b0000 in ??() (??:??)
#6 00000000 0x50000061 in ??() (??:??)
#7 00000000 0x00f57008 in ??() (??:??)
#8 00000000 0x006b0000 in ??() (??:??)
#9 00000000 0x00f57008 in ??() (??:??)
#10 00000000    0x40000060 in ??() (??:??)
#11 00000000    0x00f60558 in ??() (??:??)
#12 00000000    0x002240b0 in ??() (??:??)
#13 00000000    0x00223804 in ??() (??:??)
#14 7C96F2D7    ntdll!RtlpNtMakeTemporaryKey() (C:\WINDOWS\system32\ntdll.dll:??)
#15 7C91A1BA    ntdll!RtlpUnWaitCriticalSection() (C:\WINDOWS\system32\ntdll.dll:??)
#16 77C2C2DE    msvcrt!free() (C:\WINDOWS\system32\msvcrt.dll:??)
#17 00000000    0x006b0000 in ??() (??:??)
#18 00000000    0x00000000 in ??() (??:??) 
```

在 Winxp 上的 Code::Blocks 中使用 MinGW。有很多代码，因为我真的不知道哪里出错了，所以我不知道这里应该包括什么......

谢谢您的帮助。

**编辑：**

一堆可能相关也可能不相关的代码：

获取数据，初始化 dated_observations 对象（其中的向量导致崩溃）并将数据添加到它们（请注意，从此时开始直到函数终止，我只从这些对象中读取值......没有添加任何元素、修改或删除）：

```
query_ss << "SELECT * FROM stock_data WHERE stock_id = " << stock1_id;
mysql_query(connect,query_ss.str().c_str());
query_ss.str("");
res_set = mysql_store_result(connect);
numrows = mysql_num_rows(res_set);

dated_observations s1_p(numrows);
dated_observations s1_r(numrows);

for(i = 0; i < numrows; i++) {
    row = mysql_fetch_row(res_set);
    s1_p.my_insert(row[2], std::atof(row[3]));
    s1_r.my_insert(row[2], std::atof(row[4]));
} 
```

过时的班级：

```
#ifndef _DATED_H_
#define _DATED_H_

#include <vector>
#include "date.h"       // my date class

template <class T> class dated {
private:
    int counter;
public:
    vector<date> dates_;
    vector<T> elements_;
    //dated<T>();
    dated<T>(const int&);
    dated<T>(const dated<T>&);
    dated<T> operator= (const dated<T>&);
    ~dated() { clear(); };
    void clear();                     // erasing
    void insert(const date&, const T&); // insert somewhere
    void my_insert(const date&, const T&); // insert at the end

    bool empty() const ;
    int  size() const ;
    bool contains(const date& d) const ;
    date date_at(const int& t) const ; // accessing elements, here dates
    T element_at(const int& t) const ;  // index directly
    T element_at(const date& d) const ; // index indirectly, specify what date

    //date last_date() const ;
    //T last_element() const;

    // next: the element either on date d, if d is here, else the last observation before d.
    T current_element_at(const date& d) const ;

    vector<T> elements() const; // all elements as vector<T>
    vector<date> dates() const;  // all dates as vector<date>

    date first_date() const;  // simple queries
    date last_date() const;
    T first_element() const;
    T last_element() const;

    void set_counter(int cnt);
    int get_counter() const;

    int index_of_date(const date& d) const; // when searching in the data,
    int index_of_last_date_before(const date& d) const; // these are useful functions
    int index_of_first_date_after(const date& d) const;

    int no_observations_between(const date&first, const date& last) const;

    void remove(const date&);         // removing one or more elements
    void remove_between_including_end_points(const date&, const date&);
    void remove_between(const date&, const date&);
    void remove_before(const date&);
    void remove_after(const date&);
};

#include "dated_main.h"
#include "dated_search.h"
#include "dated_remove.h"

template<class T> dated<T> observations_between(const dated<T>& obs,const date&first, const date& last);
template<class T> dated<T> observations_after(const dated<T>& obs, const date& first);
template<class T> dated<T> observations_before(const dated<T>& obs, const date& last);
template<class T> dated<T> end_of_year_observations(const dated<T>&);
template<class T> dated<T> beginning_of_month_observations(const dated<T>&);
template<class T> dated<T> end_of_month_observations(const dated<T>&);
template<class T> dated<T> observations_matching_dates(const dated<T>& obs, const vector<date>& dates);

#include "dated_util.h"
#endif 
```

过时类的一些方法：

```
//template<class T> dated<T>::dated(){;};   // not necessary to do anything,

template<class T>dated<T>::dated(const int& init_size = 0) {
    // for speed, initialize first with correct size and then copy
    counter = 0;
    if(init_size > 0) {
        dates_=vector<date>(init_size);
        elements_=vector<T>(init_size);
    }
};

template<class T>dated<T>::dated(const dated<T>& dobs) {
    // for speed, initialize first with correct size and then copy
    counter = 0;
    dates_=vector<date>(dobs.size());
    elements_=vector<T>(dobs.size());
    for (int t=0;t<dobs.size();++t){
        dates_[t]      = dobs.date_at(t);
        elements_[t]   = dobs.element_at(t);
    };
};

template<class T> dated<T> dated<T>::operator= (const dated<T>& dobs) {
    counter = 0;
    if (this==&dobs) return *this; // check against self assignment;
    clear();
    dates_=vector<date>(dobs.size());
    elements_=vector<T>(dobs.size());
    for (int t=0;t<dobs.size();++t){
        dates_[t]        = dobs.date_at(t);
        elements_[t]     = dobs.element_at(t);
    };
    return *this;
};

template<class T> dated<T>::~dated();

template<class T> bool dated<T>::empty() const { return (dates_.size()<1); };

template<class T> int  dated<T>::size() const { return dates_.size(); };

template<class T> date dated<T>::date_at(const int& t) const { // accessing with bounds checking
   if ( (t>=0) && (t<size()) ) return dates_[t];
   return date();
};

template<class T> T dated<T>::element_at(const int& t) const {  // accessing with bounds checking
   if ( (t>=0) && (t<size()) ) return elements_[t];
   return T();
};

template<class T> void dated<T>::set_counter(int cntr){
    counter = cntr;
}

template<class T> int dated<T>::get_counter() const {
    return counter;
}

template<class T> T dated<T>::element_at(const date& d) const {
   if (!contains(d)) return T();
   return elements_[index_of_date(d)];
};

template <class T> void dated<T>::my_insert(const date& d, const T& obs) {
    if (!d.valid()) return;
    elements_[counter] = obs;
    dates_[counter] = d;
    counter++;
};

template<class T> void dated<T>::clear() {
   dates_    .erase(dates_    .begin(),dates_    .end());
   elements_ .erase(elements_ .begin(),elements_ .end());
}; 
```

dated_observations 类：

```
#ifndef _DATED_OBS_H_
#define _DATED_OBS_H_

#include "dated.h"      // templated dated<> class
#include <string>     // ANSI string class

class dated_observations : public dated<double>{
   private:
      string         title_;
   public:
      dated_observations(const dated_observations& dobs); //copy constructor
      dated_observations(const int& init_size = 0) : dated<double>(init_size) {;}

      void clear();
      ~dated_observations() { clear(); };

      void set_title(string s); // title
      string title() const;

      int no_obs() const;
      int no_obs_between(const date& d1, const date& d2) const;
      int no_obs_before(const date& d) const;
      int no_obs_after(const date& d) const;
};

///// io
ostream& operator << (ostream&, const dated_observations& );
void print_dated_observations(ostream& of, const dated_observations& d, int precision=3);

//// mischellaneous utilities
double max_obs(dated_observations& dobs);
double min_obs(dated_observations& dobs);
bool dates_match(const dated_observations& obs1, const dated_observations& obs2);

///// picking subsets.
dated_observations observations_between(const dated_observations& obs,const date& first,const date& last);
dated_observations observations_after(const dated_observations& obs, const date& first);
dated_observations observations_before(const dated_observations& obs, const date& last);
dated_observations observations_matching_dates(const dated_observations& obs, const vector<date>& dates);

///// picking periodic elements
dated_observations beginning_of_month_observations(const dated_observations&);
dated_observations end_of_month_observations(const dated_observations&);
dated_observations end_of_year_observations(const dated_observations&);
dated_observations end_of_year_current_observations(const dated_observations&);

#endif 
```

一些 dated_observations 方法：

```
dated_observations::dated_observations(const dated_observations& dobs) {
    elements_ = dobs.elements_;
    dates_ = dobs.dates_;
    set_counter(dobs.get_counter());
}

void dated_observations::set_title(string s) { title_ = s; };

void dated_observations::clear() {
   title_ = string();
   dated<double>::clear();
   set_counter(0);
}; 
```

**另一个编辑：**

删除 s1_p & s1_r 初始化和结束之间的所有代码实际上消除了错误。可能试图读取或复制超出向量大小的值会导致这种情况吗？

# iphone - iOS iPhone 在空间中显示用户方向和方向，就像 MKMapView 上的指南针应用程序一样

> ID：10264137
> 
> 赞同：5
> 
> 时间：2012-04-22T00:07:11.317
> 
> 标签：iphone, objective-c, mkmapview, cllocationmanager, compass-geolocation

当指南针应用程序使用地图视图显示其位置时，会有一个小圆锥显示手机指向的方向。但是，我无法使用显示用户位置的 MKMapView 重现它。开发人员是否可以使用此视锥角功能，还是我必须自己实现一个？

![iPhone指南针地图应用](../Images/d5f9d8813a209836686a0792a47fbd92.png)

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-03T02:51:08.790

这对 MapKit 来说就像小菜一碟一样简单。这称为用户跟踪模式。您只需要写下一行代码就可以让地图变得“类似指南针”：

```
 [mapView setUserTrackingMode:MKUserTrackingModeFollowWithHeading animated:YES]; 
```

此外，大约有 3 种 UserTrackingMode：

```
- MKUserTrackingModeNone (free scrolling map)
- MKUserTrackingModeFollow (center the user's location)
- MKUserTrackingModeFollowWithHeading (center user's location and track user's heading (direction)). 
```

如果您处于两种跟踪（非免费）模式之一，然后滚动地图，该模式将自动更改为免费模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T01:05:58.977

以下是您可以用于此问题的相关框架：

[http://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLHeading_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40008772](http://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLHeading_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40008772)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T07:14:45.303

我遇到了类似的情况。我认为我们没有库或设置来在蓝色图标上显示方向（至少我的搜索不成功）。

然而，使用 CLHeading 创建我们自己的方向指示器并不难（参考 TommyG 的答案）。

我所做的是显示地图中的蓝色图标，并在不同的视图中提供一个小箭头来指示方向。

希望这在某种程度上有所帮助

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-31T20:26:43.910

MTLocation 包含大量图像，包括您所追求的锥体： [https ://github.com/myell0w/MTLocation/tree/master/Resources/MTLocation.bundle](https://github.com/myell0w/MTLocation/tree/master/Resources/MTLocation.bundle)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-03-14T20:52:39.343

假设您有一个名为“imageTexture.jpg”的临时图像保存在缓存目录中。最喜欢的“FavoritePhoto.jpg”保存在文档目录中。要覆盖文档目录中最喜欢的一个，您可以这样做。

```
 NSError *errorDesc;

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *statesDescriptionPath = [documentsDirectory stringByAppendingPathComponent:@"FavoritePhoto.jpg"];

    NSFileManager *fileManager = [NSFileManager defaultManager];

    NSString *cacheDirectory = [NSFileManager getCacheDirectory];
    NSString *temporaryPath = [cacheDirectory stringByAppendingPathComponent:@"imageTexture.jpg"];

    NSURL *originalURL = [NSURL fileURLWithPath:statesDescriptionPath];
    [fileManager replaceItemAtURL:originalURL withItemAtURL:[NSURL fileURLWithPath:temporaryPath] backupItemName:nil options:NSFileManagerItemReplacementUsingNewMetadataOnly resultingItemURL:&originalURL error:&errorDesc];

    if (errorDesc)
    {
        NSLog(@"there was an error overwriting the favorite photo: %@", errorDesc.description);
    } 
```

我正在使用 NSFileManager 类别来获取缓存目录

这是 NSFileManager+Powertools.h 的代码

```
#import <Foundation/Foundation.h>
@interface NSFileManager (Powertools)
+ (NSString *)getCacheDirectory;
@end 
```

在这里你可以看到 NSFileManager+Powertools.m 的代码

```
#import "NSFileManager+Powertools.h"

@implementation NSFileManager (Powertools)

+ (NSString *)getCacheDirectory
{
    NSString *path = nil;
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
        if ([paths count])
        {
            NSString *bundleName =
            [[[NSBundle mainBundle] infoDictionary] objectForKey:@"CFBundleIdentifier"];
            path = [[paths objectAtIndex:0] stringByAppendingPathComponent:bundleName];
        }
        return path;
}
@end 
```

# assembly - 汇编代码和“lea”中的地址

> ID：10264142
> 
> 赞同：1
> 
> 时间：2012-04-22T00:08:18.537
> 
> 标签：assembly, x86, addressing-mode

如果我说：

```
lea (%eax,%eax,2), %edx 
```

我被教导它本质上意味着：

```
edx = eax + eax * 2 
```

这个格式是如何工作的？

我想这会导致第二个问题。如果我有这样的事情：

```
add -0x4(%esi, %ebx, 4), %eax 
```

我知道第一个操作数被添加到第二个操作数，然后存储在第二个操作数中，但同样，我不明白的是第一个操作数的符号。另一个例子是如果我有：

```
cmp %eax, (%esi, %ebx, 4) 
```

...，这是否意味着正在将 %eax 的值与以下值进行比较：

```
esi + ebx * 4 
```

...？我尝试搜索了很多这样的东西，但我想我没有使用正确的词来找到有意义的答案，所以我决定在这里发帖。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T00:14:03.777

用 计算值`lea`让人想起该操作更快（因为它是由进行地址计算的电路计算的）或代码大小更小。请注意，只需一个操作，您就可以一步完成加法和乘法运算。当前的处理器可能会更快地执行此操作，而不是`add`后跟 a `mul`，但考虑到推测执行、算术单元复制等，尚不清楚。

至于以下说明，只要您看到括号就意味着您正在取消引用该地址，因此：

```
add -0x4(%esi, %ebx, 4), %eax 
```

意味着将`%eax`它的内容放入由 给出的地址中`-4 + esi + ebx*4`，因此它意味着访问内存中的该位置并将存储在那里的内容分配给`%eax`.

# java - 获取双向集合时如何避免 Hibernate 中的无限循环？

> ID：10264143
> 
> 赞同：4
> 
> 时间：2012-04-22T00:08:26.230
> 
> 标签：java, hibernate, struts2

我试图在一个非常简单的 Hibernate 示例中填充一些实体对象。我的数据库由两个表组成，“Departments”（Id，Name）和“Employees”（Id，DepartmentsId，FirstName，LastName）。我的 SQL 查询只是员工到部门的左连接。

[我已经按照Hibernate 文档](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch07.html#collections-bidirectional)中的说明设置了注释，但是每当我尝试序列化实体时，Hibernate 都会进入无限循环并最终引发 StackOverFlowError 异常。回答我的另一个问题的人能够确定堆栈溢出正在发生，因为“部门”对象包含一组“员工”对象，每个对象都包含一个“部门”对象，其中包含一组员工对象等。等等

根据上面链接的文档，这种类型的双向关系应该是合法的（Department 中的“mappedBy”参数应该提示 Hibernate；我还尝试使用在下面的代码中注释掉的“joinColumn”注释） ，以及我读过的其他内容表明 Hibernate*应该*足够聪明，不会在这种情况下进入无限循环，但它不适用于我的示例。如果我通过从 Employee 类中删除 Department 对象将双向关系更改为单向关系，一切正常，但显然这会导致很多功能的丢失。

我也尝试过为较旧的 xml 映射文件设置注释并为子表设置“反向”参数，但它仍然产生相同的问题。我怎样才能让这种双向关系按照它应该的方式工作？

部门：

```
package com.test.model;

import java.util.HashSet;
import java.util.Set;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.FetchType;
import javax.persistence.GeneratedValue;
import javax.persistence.JoinTable;

import static javax.persistence.GenerationType.IDENTITY;
import javax.persistence.Id;
import javax.persistence.OneToMany;
import javax.persistence.Table;
import javax.persistence.JoinColumn;

import org.hibernate.Hibernate;
import org.hibernate.proxy.HibernateProxy;

@Entity
@Table(name="Departments"
,catalog="test"
)
public class Department implements java.io.Serializable {

 private Integer id;
 private String name;
 public Set<Employee> employees = new HashSet<Employee>(0);

public Department() {
}

public Department(String name) {
    this.name = name;
}
public Department(String name, Set employees) {
   this.name = name;
   this.employees = employees;
}

 @Id @GeneratedValue(strategy=IDENTITY)

@Column(name="Id", unique=true, nullable=false)
public Integer getId() {
    return this.id;
}

public void setId(Integer id) {
    this.id = id;
}

@Column(name="Name", nullable=false)
public String getName() {
    return this.name;
}

public void setName(String name) {
    this.name = name;
}

@OneToMany(fetch=FetchType.LAZY, mappedBy="department")
/*@OneToMany
@JoinColumn(name="DepartmentsId")*/
public Set<Employee> getEmployees() {
    return this.employees;
}

public void setEmployees(Set employees) {
    this.employees = employees;
}
} 
```

员工：

```
package com.test.model;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.FetchType;
import javax.persistence.GeneratedValue;
import javax.persistence.JoinTable;

import static javax.persistence.GenerationType.IDENTITY;
import javax.persistence.Id;
import javax.persistence.JoinColumn;
import javax.persistence.ManyToOne;
import javax.persistence.Table;

@Entity
@Table(name="Employees"
,catalog="test"
)
public class Employee  implements java.io.Serializable {

 private Integer id;
 private Department department;
 private String firstName;
 private String lastName;

public Employee() {
}

public Employee(Department department, String firstName, String lastName) {
   this.department = department;
   this.firstName = firstName;
   this.lastName = lastName;
}

 @Id @GeneratedValue(strategy=IDENTITY)

@Column(name="Id", unique=true, nullable=false)
public Integer getId() {
    return this.id;
}

public void setId(Integer id) {
    this.id = id;
}

@ManyToOne
@JoinColumn(name="DepartmentsId", nullable=false, insertable=false, updatable=false)
public Department getDepartment() {
    return this.department;
}

public void setDepartment(Department department) {
    this.department = department;
}

@Column(name="FirstName", nullable=false)
public String getFirstName() {
    return this.firstName;
}

public void setFirstName(String firstName) {
    this.firstName = firstName;
}

@Column(name="LastName", nullable=false)
public String getLastName() {
    return this.lastName;
}

public void setLastName(String lastName) {
    this.lastName = lastName;
}
} 
```

部门经理（包含 HQL 查询）：

```
package com.test.controller;

import java.util.Collections;
import java.util.List;

import java.util.Iterator;

import org.hibernate.Criteria;
import org.hibernate.Hibernate;
import org.hibernate.HibernateException;
import org.hibernate.Query;
import org.hibernate.Session;

import com.test.model.Department;
import com.test.util.HibernateUtil;

public class DepartmentManager extends HibernateUtil {
public List<Department> list() {
    Session session = HibernateUtil.getSessionFactory().getCurrentSession();
    session.beginTransaction();
    List<Department> set = null;
    try {
        Query q = session.createQuery("FROM Department d JOIN FETCH d.employees e");
        q.setResultTransformer(Criteria.DISTINCT_ROOT_ENTITY);
        set = (List<Department>) q.list();
    } catch (HibernateException e) {
        e.printStackTrace();
        session.getTransaction().rollback();
    }
    session.getTransaction().commit();
    return set;
}
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-22T08:22:29.757

通常，您不应该序列化您的实体。循环依赖和代理使这变得困难。相反，您应该手动将需要发送的数据传输到 DTO（一个新的纯数据类），然后将其序列化。它不会有惰性集合、代理和诸如此类的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-29T13:53:49.707

为了补充顶部响应，我做了一个通用转换谁为我做这项工作，将实体值传输到 DTO 对象，您只需使您的 dto 字段与映射实体中的名称相同。

这是源代码。

/** * Atribui os valores de campos通讯员de um objeto para um outro objeto de destino。Os * campos do objeto de destino que ja estiverem preenchidos nao serao substituidos * * @param objetoOrigem * @param objetoDestino * @return * @throws NegocioException */

```
public static <T1, T2> T2  convertEntity(T1 objetoOrigem, T2 objetoDestino) throws NegocioException {

    if (objetoOrigem != null && objetoDestino != null) {
        Class<? extends Object> classe = objetoOrigem.getClass();
        Class<? extends Object> classeDestino = objetoDestino.getClass();

        Field[] listaCampos = classe.getDeclaredFields();
        for (int i = 0; i < listaCampos.length; i++) {
            Field campo = listaCampos[i];
            try {
                Field campoDestino = classeDestino.getDeclaredField(campo.getName());
                campo.setAccessible(true);
                campoDestino.setAccessible(true);
                atribuiValorAoDestino(objetoOrigem, objetoDestino, campo, campoDestino);
            } catch (NoSuchFieldException e) {
                LOGGER.log(Logger.Level.TRACE, (Object) e);
                continue;
            } catch (IllegalArgumentException | IllegalAccessException e) {
                LOGGER.error(e.getMessage(), e);
                throw new NegocioException(e.getMessage(), EnumTypeException.ERROR);
            }
        }
    }
    return objetoDestino;
} 
```

# image-processing - SIFT关键点位置

> ID：10264145
> 
> 赞同：6
> 
> 时间：2012-04-22T00:08:42.517
> 
> 标签：image-processing, sift, hessian-matrix

我目前在**SIFT**工作，我已经生成了高斯和极值图像层的差异。谁能向我解释如何使用 Hessian 矩阵来消除低对比度关键点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T06:45:07.237

一个*好的*关键点是一个角落。这首先来自 Harris 的角工作和*Good features to track* (KLT) 论文，然后由[Mikolajczyk 和 Schmid 论文](http://citeseerx.ist.psu.edu/search?q=A%20Performance%20Evaluation%20of%20Local%20Descriptors.)强调。

直观地说，角是一个很好的特征，因为它是两条线的交点，而单个线段可以沿其方向移动，从而导致定位精度降低。线段是一条边，即一阶导数（梯度）。角是突然改变其方向的边缘。这是通过二阶导数测量的，因此使用包含方向二阶导数的值的 Hessian 矩阵。

# android - 将通知设置为在 Android 中的特定时间触发

> ID：10264146
> 
> 赞同：1
> 
> 时间：2012-04-22T00:08:57.817
> 
> 标签：android, android-notifications, notificationmanager

我正在尝试获取在特定时间触发的通知。我突然想到我不必使用警报管理器，因为我有设置时间的“alCal”变量。是否可以将 alCal 转换为 Long 并将其`System.currentTimeMillis();`用作 fireTime 变量？如果是这样，我将如何将 alCal 转换为 Long？这是我当前的代码：

```
 //---use the AlarmManager to trigger an alarm---
        AlarmManager aMan = (AlarmManager) getSystemService(ALARM_SERVICE);

            //---get current date and time---
        Calendar alCal = Calendar.getInstance();
        //---sets the time for the alarm to trigger---                       
        alCal.set(Calendar.HOUR_OF_DAY, 23);            
        alCal.set(Calendar.MINUTE, 41);                
        alCal.set(Calendar.SECOND, 00);

        Intent noteIntent = new Intent(this, Splash.class);
        PendingIntent pendI = PendingIntent.getActivity(this, 0, noteIntent, 0);
        long fireTime = System.currentTimeMillis();
        String noteBody = "notification body";
        String noteTitle = "notification title";
        Notification note = new Notification(R.drawable.noteicon, noteTitle, fireTime);
        note.setLatestEventInfo(this, noteTitle, noteBody, pendI);
        note.defaults = Notification.DEFAULT_SOUND;
        noteman.notify(uniqueID, note);
        //---sets the alarm to trigger--- 
        aMan.set(AlarmManager.RTC_WAKEUP, alCal.getTimeInMillis(), pendI); 
        finish(); 
```

好的，看起来我无法将 alCal 转换为 long，所以我想我必须使用 AlarmManager。那么给定上面的代码，我该如何修改它以便AlarmManger在指定的时间触发通知？我是 Android 和 Java 的新手，所以我并没有真正看到这个问题。我认为 alCal 必须在新的 Notification 调用中的某个地方调用，但我不知道该怎么做。Eclipse 说我不能将 fireTime 换成 alCal，所以我不知道接下来要尝试什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T10:38:53.070

> 我突然想到我不必使用警报管理器

是的，你会的。

> 因为我有设置时间的“alCal”变量。

那是一个`java.util.Calendar`对象。就其本身而言，它不会`Notification`在特定时间执行您的代码（例如显示 a ）。

> 是否可以将 alCal 转换为 Long 并使用它而不是 System.currentTimeMillis(); 作为 fireTime 变量？如果是这样，我将如何将 alCal 转换为 Long？

打电话[`getTimeInMillis()`](http://developer.android.com/reference/java/util/Calendar.html#getTimeInMillis%28%29)。

请记住，您的代码不是“将通知设置为在 Android 中的特定时间触发”。它将`Notification`立即显示，并设置警报以在将来的某个时间调用活动。

# c - linux内核+条件语句

> ID：10264149
> 
> 赞同：0
> 
> 时间：2012-04-22T00:09:32.920
> 
> 标签：c, linux, linux-kernel, system-calls

我基本上在我正在编写的系统调用中遇到了一个非常奇怪的情况。我想检查一些值是否相同，返回 -2 表示发生了某种类型的错误。我正在使用 printk() 在我的“else if”之前打印变量的值，它说它们彼此相等，但条件没有被执行（即我们不输入 else if）我我对在内核中工作还很陌生，但这对我来说似乎很离谱，我想知道在内核中工作是否有一些我不知道的细微差别，所以如果有人可以冒险猜测为什么我知道我的值条件不会执行的变量我非常感谢您的帮助

//----------------------------------------------------//

```
/*  sys_receiveMsg421()
     Description:
    - Copies the first message in the mailbox into <msg>
*/
asmlinkage long sys_receiveMsg421(unsigned long mbxID, char *msg, unsigned long N)
{

int result = 0;
int mboxIndex = checkBoxId(mbxID);
int msgIndex = 0;

//acquire the lock
down_interruptible(&sem);

//check to make sure the mailbox with <mbxID> exists
if(!mboxIndex)
{
    //free our lock
    up(&sem);
    return -1;
}

else
    mboxIndex--;

printk("<1>mboxIndex = %d\nNumber of messages = %dCurrent Msg = %d\n",mboxIndex, groupBox.boxes[mboxIndex].numMessages, groupBox.boxes[mboxIndex].currentMsg );

//check to make sure we have a message to recieve

-----------CODE NOT EXECUTING HERE------------------------------------------------
if(groupBox.boxes[mboxIndex].numMessages == groupBox.boxes[mboxIndex].currentMsg)
{
    //free our lock
    up(&sem);   
    return -2;
}
//retrieve the message
else
{
     //check to make sure the msg is a valid pointer before continuing
    if(!access_ok(VERIFY_READ, msg, N * sizeof(char)))
    {
        printk("<1>Access has been denied for %lu\n", mbxID);
        //free our lock
        up(&sem);
        return -1;
    }
    else
    {
        //calculate the index of the message to be retrieved            
        msgIndex = groupBox.boxes[mboxIndex].currentMsg;    

        //copy from kernel to user variable     
        result = copy_to_user(msg, groupBox.boxes[mboxIndex].messages[msgIndex], N);

        //increment message position
        groupBox.boxes[mboxIndex].currentMsg++;

        //free our lock
        up(&sem);

        //return number of bytes copied
        return (N - result);
    }
}
} 
```

更新：通过将返回值更改为其他值解决了我的问题，但它工作得很好很奇怪

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T00:42:01.407

请记住使用标点符号；我不喜欢在阅读问题时气喘吁吁。

您确定没有输入 if 块吗？那里的 printk（以及相应的 else 块中的另一个）会让您更进一步，不是吗？

至于问题：不，没有任何特定于内核代码的东西会使它不起作用。

而且您似乎也涵盖了同步。虽然：我看到你在`mboxIndex`关键部分之外获得。这会导致问题吗？很难从这个片段中分辨出来，它甚至没有`groupBox`声明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T04:39:29.983

也许`numMessages`和/或被`currentMsg`定义为`long`？
如果是这样，`printk`使用的 your`%d`将仅打印一些位，因此您可能认为它们相等，而实际上它们不相等。

# python - sessionmaker 出错

> ID：10264150
> 
> 赞同：9
> 
> 时间：2012-04-22T00:09:55.223
> 
> 标签：python, class, sqlalchemy

我可以从这个问题中看到[Why are session methods unbound in sqlalchemy using sqlite?](https://stackoverflow.com/questions/3221814/why-are-session-methods-unbound-in-sqlalchemy-using-sqlite) 我需要为 sessionmaker 实例化类。

我得到了同样的错误，我认为“修复”会起作用，只是我不知道如何“实例化类”

我的设置代码是根据链接的问题。

从这个问题[如何在python中实例化一个类](https://stackoverflow.com/questions/396856/how-to-instantiate-a-class-in-python)我可以看到我需要调用类对象，我的错误假设是：

```
session = sessionmaker(bind=engine) 
```

行是实例化。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-22T01:03:08.357

您的问题与您发布的第一个问题完全相同，并且解决方案应与从同一问题中选择的答案相同。

该函数`sessionmaker`返回一个**类**，绑定在`bind`参数中传递的引擎。

所以，在创建类之后，你必须实例化它（还没有实例化它）：

```
Session = sessionmaker(bind=engine)
# Session is a class
session = Session()
# now session is a instance of the class Session
session.execute(...) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-22T01:01:01.273

该行创建了 Session 类。你仍然需要实例化它。

```
Session = sessionmaker(bind=engine)
session = Session() 
```

# eclipse - 如何使用 EGit 克隆创建 Eclipse 项目

> ID：10264152
> 
> 赞同：3
> 
> 时间：2012-04-22T00:10:03.403
> 
> 标签：eclipse, egit, gitolite, gitlab

在使用 SVN 十年后，我终于开始尝试使用 Git。我已经在服务器上设置了 Git、Gitolite 和 GitLab，并已成功地将代码添加到我的本地存储库、提交、克隆存储库并将代码推送回存储库。到目前为止，一切都很好。现在进入EGit...

我已经使用 Git Repository Exploring 视图使用以下路径语法克隆了一个存储库：

```
ssh://dexter:vaultanalyser.git 
```

（在 GitLab 中，存储库被称为项目，所以我*假设*每个 Eclipse 项目应该有一个存储库？而不是包含多个项目的 SVN 样式的单父存储库？）

这会将存储库导入：

```
/Users/mattpainter/git/vaultanalyser 
```

我期待这一步会自动为我创建一个包含**所有源代码**的 Eclipse 项目，但事实并非如此。我尝试伪造目标目录，使其在我的工作区中，但这也不起作用。

如何在 Eclipse 中获取可用的克隆源？[这个网站](http://blog.msbbc.co.uk/2009/11/get-eclipse-egit-and-github-all-working.html)暗示如果你创建一个与存储库同名的项目，这一切都会神奇地工作，但事实并非如此（是的，我知道这篇文章是关于 Github，而不是 GitLab，但我认为两者很接近足以完成手头的任务）。

然后我尝试在 Eclipse 中创建一个项目并共享它——但是整个项目在存储库中显示为一个子文件夹。如果存储库确实类似于项目，那么这并不是我真正想要的。

我查看了其他看起来相关的 StackOverflow 主题，但我担心我仍然缺少一个关于它应该如何工作的关键理解，并且到目前为止看起来非常复杂。

帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T08:13:16.370

为了扩展@VonC 的答案，让 EGit 和 Eclipse 正常运行的步骤是：

1.  从 EGit 中选择“克隆 Git 存储库”，接受所有默认值。`git`这将在您工作区之外的某个父文件夹中创建一个文件夹。

2.  创建一个新的 Eclipse 项目。我正在使用 Java，但我认为其他语言也有类似的步骤。在第一个对话框中，取消选中“使用默认位置”，然后选择在步骤 1 中创建的存储库文件夹。接受所有默认值。

3.  `Team > Share Project...`从您的新项目中选择。选择 Git，然后勾选“在项目的父文件夹中使用或创建存储库”。

现在，您可以从 Eclipse 中将代码和 Eclipse 点文件推送到您的 git 存储库。

（我的原始问题因服务器文件夹中的无效权限而复杂化`.git/objects`- 在文件夹上运行 a`chmod git:git -R *`解决了问题）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T00:35:51.223

> 在 GitLab 中，存储库被称为项目，所以我假设每个 Eclipse 项目应该有一个存储库？

是的，但 GitLab“项目”不一定是 Eclipse 项目。
它不必遵循 SVN 结构，如“ [Eclipse 项目目录外但存储库内的 Eclipse 参考目录](https://stackoverflow.com/questions/7073627/eclipse-reference-directory-outside-eclipse-project-directory-but-within-reposit/7074255#7074255)”中所示。

您需要做的就是创建一个 Eclipse 项目，指定源目录*不在*默认路径（Eclipse 工作区）中，而是在您克隆存储库的任何位置（如“ [Eclipse + EGit 入门 - 混淆](https://stackoverflow.com/questions/6320423/getting-started-with-eclipse-egit-confused)”中所述）。
这样，您刚刚声明的 Eclipse 项目（并在 Eclipse 工作区中引用）在 Git 存储库的根目录中具有其文件 (`.project`和)。 然后 Egit 可以很好地管理该项目。 或者你可以直接用 Egit 导入：“ [Eclipse + EGit: clone project into workspace](https://stackoverflow.com/questions/6396349/eclipse-egit-clone-project-into-workspace/6396416#6396416) ”。`.classpath`

* * *

正如[OP nullpainter](https://stackoverflow.com/users/1239406/nullpainter)报告如下：

> 原始问题因`.git/objects`服务器上文件夹中的无效权限而复杂化。
> 在文件夹上运行 a`chmod git:git -R *`解决了这个问题

他在下面详细介绍了正确的设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T00:32:19.027

我用命令行检查它——然后在此基础上构建我的项目。事实上，我最终使用命令行 git 进行了大多数操作。EGit 对于查看差异很有用，但我发现命令行有更多的权力和控制力。Git 主要是为开发人员提供大量的权力和控制权。

# design-patterns - Strategy for Dynamic Tags in MongoDB

> ID：10264157
> 
> 赞同：1
> 
> 时间：2012-04-22T00:11:43.810
> 
> 标签：design-patterns, mongodb, tags

On Facebook statues, you can start typing an @ and tag a user in a status. This question is not about the frontend, but rather how to store the data for that feature. What is the best way to achieve this functionality in a generic way for representing any mongodb entity in a string in a dynamic way. The goal being if the entity changes, it representation in the stored string also changes. For example one idea I had was this:

```
Post: {
    _id: "48ajsdlfhsdjfkjsljsd"
    name: "Post One",
    text: "@user is the best for liking @thing, and @thing"
    tags: [user:1234, thing:456, thing:789]
} 
```

So I would load this post, then look at the tags, load the models for each tag type and id, then rewrite the string to be: "Chris is the best for liking StackOverflow, and Mongo". This seems inefficient, any better ideas?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T23:53:43.930

Your answer works Geoff, but I was looking for something a little more efficient. What I have done is store a document in Mongo like this

```
{
    _id: "4bdslakjghjdgkjsh123",
    title: "Post One",
    text: "@ is cool for liking @",
    tags: ["user:4bcasdkasd89", "product:4basfkjafkjlfl"]
} 
```

And the code to translate the tags is run after loading a message. It basically uses the tag to know which type of model to use, and the id to load it. Then it creates an array of values using the as_tag method of a model, or to_s. This array is then substituted into the original string in order replacing the @ signs. A lot like sprintf. So it translates to "Chris is cool for liking bicycles"

```
def after_initialize
    tags = self.collect_tags
    tags.each do |value|
      self.text.sub!(/@/, value)
    end
end

def collect_tags
    self.tags.collect do |tag|
        model, id = tag.split(':')
        model[0] = model[0,1].upcase
        m = Models.const_get(model).find(id)
        if(m.respond_to? 'as_tag')
            m.as_tag
        else
            m.to_s
        end
    end
end 
```

Any way to improve the efficiency here?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T02:22:30.703

Whilst not being quite sure what you are trying to do, I suggest the following:

1.  Create a document that acts as your mapping between the "@" tags in the string and fields within the MongoDB document.

2.  Modify your Post document, so that the tags array contains standardized documents that both identify the _id values of the documents in which the real data is stored, and the field from which the data should be taken in these documents.

3.  (Optionally) Modify your Post document, to explicitly contain the mapping document _id. If there is a global mapping document this would be unnecessary, but

In your example, the mapping document might look like:

```
Mapping: { _id: "abc..", maps: [{tag:"user", field:"user.person.nickname"}, {tag:"thing", field:"object.name"}] } 
```

And the post document would look like:

```
Post: { _id: "48ajsdlfhsdjfkjsljsd",
  name: "Post One",
  text: "@user is the best for liking @thing, and @thing",
  tags: [{tag:"user", docId:"pqr..."}, {tag:"thing", docId:"xzy..."}, {tag:"thing", docId:"mno..."}],
  mapping: "abc..."
} 
```

You will then need to do the following to return the text string:

1.  Load the Post document
2.  Extract and load the Mapping document (if this mapping is global, this step is not required)
3.  Load all the documents corresponding to underlying data in one load:

    db.posts.find( { _id: { $in : [ "pqr...", "xyz...", "mno..." ] } })

4.  Retrieve the value from required document field from each of the located documents

5.  Replace the tag with the field value

This approach allows you to both change the meaning of the tag in the string (by changing the Mapping document - for example you could change @user from nickname to realname), and the value of the tag (by changing the docIds stored in the tags list within the Post document), but there are still a minimum of 4 steps to the string generation.

The approach does not handle the conditions where the Mapping document does not contain the tag, or when the tags list is not the same size as the number of tags in the text string.

# html - Internet Explorer 检测的条件 HTML 语句

> ID：10264162
> 
> 赞同：0
> 
> 时间：2012-04-22T00:12:44.200
> 
> 标签：html, css, internet-explorer

让我的 html 条件语句正确提取 IE 特定的 CSS 样式表时遇到问题。有人可以看看我的代码的顶部，看看我的语法是否正确吗？

```
<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <head>
    <title>Cherokee Cat Clinic</title>
  <link rel="stylesheet" type="text/css" href="styles/cherokee.css" />

    <!--[if IE]>
      <link rel="stylesheet" type="text/css" href="styles/ie/cherokee_ie.css" />
    <![endif]-->
    <!--[if IE 9]>
      <link rel="stylesheet" type="text/css" href="styles/ie/cherokee_ie.css" />
    <![endif]-->
    <!--[if IE 8]>
      <link rel="stylesheet" type="text/css" href="styles/ie/cherokee_ie.css" />
    <![endif]-->
    <!--[if IE 7]>
      <link rel="stylesheet" type="text/css" href="styles/ie/cherokee_ie.css" />
    <![endif]-->
    <!--[if lte IE 6]>
      <link rel="stylesheet" type="text/css" href="styles/ie/cherokee_ie.css" />
    <![endif]-->
    <style type="text/css"> 
```

此外，我对为不同版本的 IE 重新构建站点的过程非常陌生。我已经看过 Quirks Mode 的属性表，但是有没有什么 CSS 选择器是 /wonky/ 在哪个版本的 IE 中的一个很好的纲要？甚至是 Stack Overflow 文章的一个很好的参考线程，关于在为 IE7 和 8 设计时要注意什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T00:34:21.270

就 if 语句而言，代码看起来不错，但在最顶部放置 xml 声明会使 IE 处于怪癖模式，因此这可能会导致一些问题，如果不是的话，将证明会在未来添加一些问题。可能想从头开始，看看是否有帮助。

关于为每个版本的 IE 构建，不要。恩典退化是游戏的名称。对我来说，它的表现是这样的：IE8 和 9 应该在功能上表现得很好，并且在设计方面几乎如此（取决于你在设计和代码中引入了多少小技巧）。IE7 应该可以工作，而不是看起来一团糟。IE6可以吸。

如果您的客户**特别**要求浏览器的完全兼容性，那么这显然是另一回事。

关于在 IE 中需要注意和轻松规避的事情，您可以查看类似这样的帖子，以帮助关注那些常见问题：[http ://css-tricks.com/ie-css-bugs-thatll-每次都能得到你/](http://css-tricks.com/ie-css-bugs-thatll-get-you-every-time/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T19:41:23.177

你的代码：

```
<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
.... 
```

问题在于上面的行。

语法没有问题，但旧版本的 IE 存在问题，如果`DOCTYPE`不是代码中的第一件事，它们就会陷入 Quirks 模式。（即使在文档类型上方有评论也会触发这个不幸的错误）

可以将`<?xml>`编码行删除或移动到 Doctype 下方，这将解决旧版本 IE 的布局 gremlin 问题。

如果您选择`<?xml>`完全删除该行，它将默认为 UTF-8 编码。这通常被认为是一种更好的编码类型；无论如何，它都是编码的超集`iso-8859-1`，所以你不应该注意到任何区别。

# php - 有没有办法使用 mcrypt_cbc 函数创建 http auth 密码？

> ID：10264167
> 
> 赞同：-1
> 
> 时间：2012-04-22T00:14:48.050
> 
> 标签：php, http, authentication

我总是使用 crypt 函数来创建 http auth 密码，但我无法解密它，但使用 mcrypt_cbc 我可以解密它，有没有办法使用 mcrypt_cbc 创建密码？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T00:22:28.150

crypt() 用于 php 中的散列，这就是为什么它不打算被“解密”。mcrypt 函数可以访问本机块密码，它们不用于一般意义上的散列，所以简短的回答是否定的。

mcrypt 函数采用模式标志；

加密；

```
$ciphertext = mcrypt_cbc(MCRYPT_SERPENT_256, $secret_key, $plaintext, MCRYPT_ENCRYPT); 
```

并解密；

```
$plaintext = mcrypt_cbc(MCRYPT_SERPENT_256, $secret_key, $ciphertext, MCRYPT_DECRYPT); 
```

**但是，您几乎不应该在任何情况下加密或解密密码！**

# android - 安卓 SDK。HTTP POST 双变量

> ID：10264168
> 
> 赞同：1
> 
> 时间：2012-04-22T00:15:21.373
> 
> 标签：android, variables, web, http-post, android-2.2-froyo

我正在尝试通过 http 请求发送 GPS 数据。

问题是 GPS 数据是双格式的，并且`nameValuePair.add(new BasicNameValuePair(String, String)`

不允许双值。

如何发送双精度值或将双精度值转换为字符串？

谢谢，

```
httpclient client = new defaulthttpclient();
httppost post = new httppost("web address");
post.setEntity(new UrlencodedFormEntity(nameValuePairs));
httpresponse response = client.execute(post); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T03:38:53.070

您可能需要使用两个 nameValuePairs 分别发送纬度和经度：

```
double latitude = currentLocation.getLatitude();
double longitude = currentLocation.getLongitude();
nameValuePairs.add(new BasicNameValuePair("latitude",Double.toString(latitude)));
nameValuePairs.add(new BasicNameValuePair("longitude",Double.toString(longitude))); 
```

# java - 将 ArrayLists 实现到表模型

> ID：10264169
> 
> 赞同：2
> 
> 时间：2012-04-22T00:15:43.043
> 
> 标签：java, swing, arraylist, jtable, abstracttablemodel

嗨，我有一个我创建的名为 Pets 的类的数组列表，其中包含以下变量

```
private String name;
private String species;
private int age; 
```

我想将此数组列表显示到 jTable 中，我通过使用 defaultTableModel 并调用 setModel() 成功地做到了。

但是我需要为 Jtable 添加一个排序和过滤功能。我查看了 Java 教程，他们正在创建 AbstractTableModel 的子类以进行排序和过滤。然而，他们使用数组来存储数据。所以我尝试修改代码以使用 arraylist istead 但我坚持使用这种方法

```
public Object getValueAt(int row, int col) {
    return data[row][col];
} 
```

如何从数组列表中获取一个对象的所有值？

任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T00:25:26.750

你可以试试这个：

```
public Object getValueAt(int row, int col) {
    switch(col) {
        case 0:
           return ((Pets)data.get(row)).getName();
        case 1:
           return ((Pets)data.get(row)).getSpecies();
        case 2:
           return ((Pets)data.get(row)).getAge();          
    }
    return null;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T00:28:47.400

你的 ArrayList 是否有一行是它自己的对象类型？如果是这样，并且如果您的 ArrayList 是通用的`ArrayList<RowItem>`，那么您可以执行以下操作：

```
@Override
public Object getValueAt(int row, int col) {
  if (row > getRowCount()) {
     // throw an exception
  }
  RowItem rowItem = rowItemList.get(row);
  switch (col) {
  case 0:
     return rowItem.getName();
  case 1:
     return rowItem.getLastSpecies();
  case 2:
     return rowItem.getAge();
  }
  return null; // or throw an exception
} 
```

# jquery - jquery 谷歌电子表格 csv

> ID：10264172
> 
> 赞同：1
> 
> 时间：2012-04-22T00:16:25.773
> 
> 标签：jquery, csv, google-sheets

我使用 jQuery 脚本在 html 表中显示 csv 文件（来自 google 电子表格）。当我使用“test.csv”时——将 csv 文件与脚本放在同一文件夹中——它可以工作，但是当我从谷歌电子表格中添加 url 时，它会停止工作。

```
<script>
$(function() {
    $.get('https://docs.google.com/spreadsheet/pub?key=(key)&single=true&gid=8&range=A12%3AB34&output=csv', function(data) {
        $('#CSVSource').html('<pre>' + data + '</pre>');
    });
    $('#CSVTable').CSVToTable('https://docs.google.com/spreadsheet/pub?key=(key)&single=true&gid=8&range=A12%3AB34&output=csv', { loadingImage: 'images/loading.gif', startLine: 0 });
    $.get('test.tsv', function(data) {
        $('#TSVSource').html('<pre>' + data + '</pre>');
    });
(...) 
```

该脚本来自[http://code.google.com/p/jquerycsvtotable/](http://code.google.com/p/jquerycsvtotable/) （我在 Google App Engine (Java) 上使用此脚本）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T07:38:07.213

您在这里提出跨域请求。据我所知，这是不允许的（还没有？）：电子表格 API 的响应中没有[CORS](http://www.w3.org/TR/cors/)标头。

您必须将此部分移动到您的服务器/后端的某个地方。

如果您只需要在表格中显示工作表数据，还有其他方法可以直接从电子表格（使用图表）中完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T06:06:43.600

使用 JSONP 获取允许跨域的 java 脚本。我编写了一个简单的库来处理它。在[Gsheet2json中查看](http://rumal.github.com/Gsheet2json/)

# html - 在 Google App Engine 中添加图片

> ID：10264173
> 
> 赞同：4
> 
> 时间：2012-04-22T00:16:29.640
> 
> 标签：html, google-app-engine

我的 Google 应用引擎项目中有一个 html 页面。我在项目文件夹下名为“images”的文件夹下存储了一个名为“image.jpg”的图像。

我正在尝试使用以下代码在我的 html 代码中加载图像：

```
<img width=150 src="~/images/image.jpg"> 
```

但是，我收到以下警告，并且图像未显示在页面上：

> 警告：找不到文件：/~/images/image.jpg

我该如何解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T01:12:01.267

在您的 app.yaml 文件中，您需要一个图像处理程序

```
handlers:
- url: /images
  static_dir: images 
```

接着`<img width=150 src="/images/image.jpg">`

前提是您使用的是 python 而不是 java 或 go

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-06T12:43:15.073

这也有效：

```
handlers:
- url: /(.*\.(gif|png|jpg|ico|js|css|php|xml))
static_files: \1
upload: (.*\.(gif|png|jpg|ico|js|css|php|xml)) 
```

在 img 中添加“alt”属性也是一个好主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-31T22:15:50.180

我有 2 个处理程序：一个用于主应用程序，一个用于图像目录：

```
handlers:
- url: /.*
  script: login.app
- url: /(.*.(gif|png|jpg|ico|js|css|php|xml))
  static_files: \1
  upload: (.*.(gif|png|jpg|ico|js|css|php|xml)) 
```

在第二个处理程序（url：/。*）之上编写图像处理程序似乎使图像工作：*

```
*`handlers:
- url:/(.`*`.(gif|png|jpg|ico|js|css|php|xml))
  static_files: \1
  upload: (.*.(gif|png|jpg|ico|js|css|php|xml))
- url: /.*
  script: login.app` 
```

`*图像处理程序取自[@kataku](https://stackoverflow.com/users/2751123/kataku)的回答
干杯！`

# ios - 视图分层如何影响视图定位？

> ID：10264175
> 
> 赞同：0
> 
> 时间：2012-04-22T00:17:20.903
> 
> 标签：ios, uitableview, view, uiview, uiviewcontroller

这个问题已被重新编写，因为我认为它与视图和图层的关系比原来的“寻找表格视图的中心”更多。也希望能找到另一个答案。

有问题的是一组 4 个视图，用于在表格视图中的选项卡栏中显示活动。

![首次展示](../Images/2fd5f4e769112e133759ef576f247a52.png)

的代码：

```
NSLog(@"view.center: %@", self.view.center);
NSLog(@"view.frame: %@", self.view.frame); 
```

在第一次显示“加载”时产生：

```
view.center: {160, 250}
view.frame: {{0, 20}, {320, 460}} 
```

对于第二个（及后续）显示：（在弹出日期选择器之后）

```
view.center: {160, 205.5}
view.frame: {{0, 0}, {320, 411}} 
```

Self (ListViewController) 是 UITableViewController 的子类。**因此，视图（或表格视图）框架的高度正在发生变化。为什么？**

我一直在探索并在调试器中找到了这个信息，这似乎很相关。

```
--- Before ---
[self parentViewController]:
              <UITabBarController: 0x6e115a0>
[[self parentViewController] view]:
              <UILayoutContainerView: 0x6e1b750; frame = (0 0; 320 480); autoresize = W+H; layer = <CALayer: 0x6e0c8f0>>
self:         <ListsViewController: 0x6e13730>
[self tableView]: 
              <UITableView: 0x71e4000; frame = (0 20; 320 460); clipsToBounds = YES; opaque = NO; autoresize = W+H; layer = <CALayer: 0x6834db0>; contentOffset: {0, 0}>
[[self view] subviews]:  (array)
              <UIImageView: 0x6825e30; frame = (0 453; 320 7); alpha = 0; opaque = NO; autoresize = TM; userInteractionEnabled = NO; layer = <CALayer: 0x6835a90>>,
              <UIImageView: 0x68314e0; frame = (313 411; 7 20); alpha = 0; opaque = NO; autoresize = LM; userInteractionEnabled = NO; layer = <CALayer: 0x683d120>>,
              <UIView: 0x6a054f0; frame = (0 0; 320 460); alpha = 0.4; tag = 12; layer = <CALayer: 0x6a07840>>,
              <UIView: 0x6a04c60; frame = (110 155.5; 100 100); alpha = 0.6; tag = 13; layer = <CALayer: 0x6a073c0>>,
              <UILabel: 0x6a07480; frame = (110 200.5; 100 50); text = 'Loading ...'; clipsToBounds = YES; userInteractionEnabled = NO; tag = 14; layer = <CALayer: 0x6a065b0>>,
              <UIActivityIndicatorView: 0x6a07a80; frame = (140 167.5; 40 40); tag = 15; layer = <CALayer: 0x6a07b40>>

--- After datepicker ---
[self parentViewController]:
              <UITabBarController: 0x6e115a0>
[self parentViewController] view]:
              <UILayoutContainerView: 0x6e1b750; frame = (0 0; 320 480); autoresize = W+H; layer = <CALayer: 0x6e0c8f0>> 
self:         <ListsViewController: 0x6e13730>
[self tableView]:
              <UITableView: 0x71e4000; frame = (0 0; 320 411); clipsToBounds = YES; opaque = NO; autoresize = W+H; layer = <CALayer: 0x6834db0>; contentOffset: {0, 0}>
[[self view] subviews]:
              <DetailTableViewCell: 0xb642120; baseClass = UITableViewCell; frame = (0 369; 320 44); autoresize = W; layer = <CALayer: 0xb642230>>,
              <DetailTableViewCell: 0xb643850; baseClass = UITableViewCell; frame = (0 325; 320 44); autoresize = W; layer = <CALayer: 0xb643960>>,
              <DetailTableViewCell: 0xb6435c0; baseClass = UITableViewCell; frame = (0 281; 320 44); autoresize = W; layer = <CALayer: 0xb6436d0>>,
              <DetailTableViewCell: 0xb63cf30; baseClass = UITableViewCell; frame = (0 237; 320 44); autoresize = W; layer = <CALayer: 0xb63d130>>,
              <DetailTableViewCell: 0x6a14050; baseClass = UITableViewCell; frame = (0 193; 320 44); autoresize = W; layer = <CALayer: 0x6a16fb0>>,
              <DetailTableViewCell: 0x6a13760; baseClass = UITableViewCell; frame = (0 149; 320 44); autoresize = W; layer = <CALayer: 0x6a13870>>,
              <DetailTableViewCell: 0x6a10920; baseClass = UITableViewCell; frame = (0 105; 320 44); autoresize = W; layer = <CALayer: 0x6a10010>>,
              <DetailTableViewCell: 0xb63ce20; baseClass = UITableViewCell; frame = (0 60; 320 45); autoresize = W; layer = <CALayer: 0xb63c3e0>>,
              <UIImageView: 0x6825e30; frame = (0 404; 320 7); alpha = 0; opaque = NO; autoresize = TM; userInteractionEnabled = NO; layer = <CALayer: 0x6835a90>>,
              <UIView: 0xb6477f0; frame = (0 0; 320 60); autoresize = W; layer = <CALayer: 0xb647820>>,
              <UIImageView: 0x68314e0; frame = (313 411; 7 20); alpha = 0; opaque = NO; autoresize = LM; userInteractionEnabled = NO; layer = <CALayer: 0x683d120>>,
              <UIView: 0x6a098a0; frame = (0 0; 320 411); alpha = 0; tag = 9; animations = { opacity <CABasicAnimation: 0xb6279f0>; }; layer = <CALayer: 0x6a154b0>>,
              <UIDatePicker: 0x6a23350; frame = (0 455; 320 216); tag = 10; animations = { position <CABasicAnimation: 0xb63bd40>; }; layer = <CALayer: 0x6a20590>>,
              <UIToolbar: 0x6843f60; frame = (0 411; 320 44); opaque = NO; tag = 11; animations = { position=<CABasicAnimation: 0xb645f80>; }; layer = <CALayer: 0x6844a20>>,
              <UIView: 0xb60baa0; frame = (0 0; 320 411); alpha = 0.4; tag = 12; layer = <CALayer: 0xb626af0>>,
              <UIView: 0xb626b20; frame = (110 155.5; 100 100); alpha = 0.6; tag = 13; layer = <CALayer: 0xb626930>>,
              <UILabel: 0xb60cfb0; frame = (110 200.5; 100 50); text = 'Loading ...'; clipsToBounds = YES; userInteractionEnabled = NO; tag = 14; layer = <CALayer: 0xb60d020>>,
              <UIActivityIndicatorView: 0xb649e20; frame = (140 167.5; 40 40); tag = 15; layer = <CALayer: 0xb626960>> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T09:07:17.923

您可以使用 tableview.frame 访问原点及其尺寸。您可以使用 tablview.center 这是一个 CGPoint ，它为您提供对象的中心点。

# php - 下面的php脚本中的php代码放在哪里

> ID：10264177
> 
> 赞同：0
> 
> 时间：2012-04-22T00:17:41.030
> 
> 标签：php, javascript, jquery

我在下面有一个 javascript 变量，它应该 `$_SESSION['imagename']`从 imageupload.php （一个单独的页面）中检索

```
var imagename = <?php echo json_encode(isset($_SESSION['imagename']) ? $_SESSION['imagename'] : null); ?>; 
```

但是我的问题是我应该把这段代码放在 php 脚本中的什么地方，以便会话变量包含文件的名称并能够被上面的变量检索？

```
if (isset($_POST['fileImage'])) { // fileImage is the name of the file input
  $_SESSION['imagename'] =  $_FILES['fileImage']['name'];
}

$_SESSION['fileImage']['name'] = $_FILES['fileImage']['name']; 
```

下面是php脚本：

```
$result = 0;

if( file_exists("ImageFiles/".$_FILES['fileImage']['name'])) {  

    $parts = explode(".",$_FILES['fileImage']['name']);
    $ext = array_pop($parts);
    $base = implode(".",$parts);
    $n = 2;

    while( file_exists("ImageFiles/".$base."_".$n.".".$ext)) $n++;
    $_FILES['fileImage']['name'] = $base."_".$n.".".$ext;

    move_uploaded_file($_FILES["fileImage"]["tmp_name"], 
    "ImageFiles/" . $_FILES["fileImage"]["name"]);
    $result = 1;

}
    else
      {
      move_uploaded_file($_FILES["fileImage"]["tmp_name"],
      "ImageFiles/" . $_FILES["fileImage"]["name"]);
      $result = 1;

      }

?>

<script language="javascript" type="text/javascript">
window.top.stopImageUpload(<?php echo "'$result'";?>); // call backs javascript function
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T00:42:44.143

```
 $result = 0;

    if (isset($_POST['fileImage']) && ((($_FILES["file"]["type"] == "image/gif")
|| ($_FILES["file"]["type"] == "image/jpeg")
|| ($_FILES["file"]["type"] == "image/pjpeg"))
&& ($_FILES["file"]["size"] < 20000))){
          //you must check for file type, else your website could be hacked.
       if( file_exists("ImageFiles/".$_FILES['fileImage']['name'])) { 
          //... 
       }
       else{
          //...
       }
    }

    $_SESSION['fileImage']['name'] = $_FILES['fileImage']['name']; 
```

# android - 你如何在Android Google Maps中从前一点到当前点画一条线？

> ID：10264178
> 
> 赞同：0
> 
> 时间：2012-04-22T00:17:48.203
> 
> 标签：android, maps, line, draw

我正在尝试创建一个 GPS 跟踪应用程序，并且一直坚持如何从前一点到当前点画一条线。我试过使用 Overlay，但它不显示...我在 Java 上不是很好，所以请像我 4 岁一样跟我说话...

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);

    initMapView();
    initMyLocation();

    TabHost.TabSpec spec;

    TabHost th = (TabHost)findViewById(R.id.tabhost);
    th.setup();
    spec = th.newTabSpec("tag1");
    spec.setContent(R.id.mapTab);
    spec.setIndicator("Map");
    th.addTab(spec);

    spec = th.newTabSpec("tag2");
    spec.setContent(R.id.logTab);
    spec.setIndicator("Log");
    th.addTab(spec);

    spec = th.newTabSpec("tag3");
    spec.setContent(R.id.detailsTab);
    spec.setIndicator("Details");
    th.addTab(spec);

}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}

//Map and Controls
private void initMapView() {
    map = (MapView) findViewById(R.id.mvMain);
    controller = map.getController();
    map.setSatellite(true);
    //map.setStreetView(true);
    map.setBuiltInZoomControls(true);
}

//Creates an Overlay that marks current position
private void initMyLocation() {
    final MyLocationOverlay overlay = new MyLocationOverlay(this, map);
    overlay.enableMyLocation();
    overlay.enableCompass();
    overlay.runOnFirstFix(new Runnable() {
        public void run() {
            controller.setZoom(17);
            controller.animateTo(overlay.getMyLocation());
            map.getOverlays().add(overlay);
        }

    });

}
//Experiment
public class detailsTab extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.id.detailsTab);

        LocationManager locationManager;
        String context = Context.LOCATION_SERVICE;
        locationManager = (LocationManager)getSystemService(context);

        String provider = LocationManager.GPS_PROVIDER;
        Location location = locationManager.getLastKnownLocation(provider);
        updateWithNewLocation(location);
    }

    private void updateWithNewLocation(Location location) {
        String latLongString;
        TextView myLocationText;
        myLocationText = (TextView)findViewById(R.id.detailsText);
        if(location != null){
            double lat = location.getLatitude();
            double lng = location.getLongitude();
            latLongString = "Lat:" + lat + "\nLong" + lng;
        }
        else {
            latLongString = "No Location Found";
        }
        myLocationText.setText("Your current position is: \n" + latLongString);
    }
}

public class NewOverlay extends Overlay {
    @Override
    public void draw(Canvas canvas, MapView mapView, boolean shadow) {
        Projection projection = mapView.getProjection();

        Double lat = lati *1E6;
        Double lng = longi *1E6;

        GeoPoint geoPoint = new GeoPoint(lat.intValue(), lng.intValue());

        if (shadow == false) {
            Point myPoint = new Point();
            projection.toPixels(geoPoint, myPoint);

            //Creating and setting up the paint brush
            Paint paint = new Paint();
            paint.setARGB(250, 255, 0, 0);
            paint.setAntiAlias(true);
            paint.setFakeBoldText(true);

            //Create circle
            int rad = 25;
            RectF oval = new RectF(myPoint.x-rad, myPoint.y-rad, myPoint.x+rad, myPoint.y+rad);

            canvas.drawOval(oval, paint);
            canvas.drawText("Red Circle", myPoint.x+rad, myPoint.y, paint);

        }

    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T01:46:13.030

我这样做，内部`draw()`方法，

```
 int x1 = -1, y1 = -1, x2 = -1, y2 = -1;
            Paint paint = new Paint();
            paint.setColor(Color.rgb(0x7b, 0x7b, 0xff));
            paint.setStyle(Paint.Style.STROKE);
            paint.setStrokeWidth(5);
            if(mPoints!=null || mPoints.size()<2)
            {
            for (int i = 0; i < mPoints.size(); i++) {
                    Point point = new Point();
                    mv.getProjection().toPixels(mPoints.get(i), point);
                    Point loc = new Point();
                    mv.getProjection().toPixels(new GeoPoint((int) (location.getLatitude()*1.0E6),(int) (location.getLongitude()*1.0E6)), loc);
                    x2 = point.x;
                    y2 = point.y;
                    if (i == 0)
                    {
                        x2 = loc.x;
                        y2 = loc.y;
                    }
                    if (i > 0) {
                        canvas.drawLine(x1, y1, x2, y2, paint);
                    }
                    x1 = x2;
                    y1 = y2;

            }
            } 
```

这段代码将为我绘制一条完整的路线，是我想要绘制它们`mPoints`的数组。`GeoPoint`这应该对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T02:19:43.890

```
public void draw(Canvas canvas, MapView mapv, boolean shadow){
    super.draw(canvas, mapv, shadow);
    Projection projection = mapv.getProjection();
    Path p = new Path();
    for (int i = 0; i < geoPointsArray.size(); i++) {
        if (i == geoPointsArray.size() - 1) {
            break;
        }
        Point from = new Point();
        Point to = new Point();
        projection.toPixels(geoPointsArray.get(i), from);
        projection.toPixels(geoPointsArray.get(i + 1), to);
        p.moveTo(from.x, from.y);
        p.lineTo(to.x, to.y);
    }
    Paint mPaint = new Paint();
    mPaint.setStyle(Style.STROKE);
    mPaint.setColor(Color.GREEN);
    mPaint.setAntiAlias(true);
    mPaint.setStrokeWidth(5);
    canvas.drawPath(p, mPaint);
    mapv.invalidate();
    super.draw(canvas, mapv, shadow);
}//draw() 
```

我们可以使用上述方法绘制路线，因为我们移动一个地方到另一个地方。其中 geoPointsArray 是接收到的位置数组。在您的 onCreate() 中，您需要调用 mapv.invalidate(); 不断地画路线

# cocoa - 如何在不导出的情况下更新电影

> ID：10264181
> 
> 赞同：2
> 
> 时间：2012-04-22T00:18:27.567
> 
> 标签：cocoa, avfoundation

前段时间我已经问过一个类似的问题，但现在我可以更具体了。是否可以更新电影文件的元数据而无需重写它？我的意思是，Quicktime/QTKit 有一种`updateMovieFile`方法可以做到这一点，我不敢相信 AVFoundation 没有类似的东西。

目前我必须复制电影，`AVAssetExportPresetPassthrough`但它既慢又不方便（我只是在更改元数据！！），尤其是在执行批处理时。

当您编辑电影信息时，iTunes 如何更新电影的数据库？我确定它使用 AVFoundation 但据我所知它不会重写电影文件。

我将不胜感激任何指导。

仅供参考，使用旧的 Quicktime 方法似乎不再有效。添加到 iTunes 时不会更改电影元数据。我不知道为什么，但我想这是由于 iTunes 从 Quicktime 转移到 AVFoundation。

提前致谢。

里卡多

# hadoop - 当集群总共有 5 个节点时，为什么 Nutch 只在一个 Hadoop 节点上运行 fetch 步骤？

> ID：10264183
> 
> 赞同：4
> 
> 时间：2012-04-22T00:19:16.460
> 
> 标签：hadoop, nutch, elastic-map-reduce

我在具有 3 个工作节点的 Elastic MapReduce 上运行 Nutch。我正在使用 Nutch 1.4，它附带的默认配置（在添加用户代理之后）。

但是，即使我正在爬取包含 30,000 个域的列表，但获取步骤仅从一个工作节点运行，即使解析步骤在所有三个节点上都运行。

如何让它从所有三个节点运行 fetch 步骤？

*编辑* 问题是我需要将 mapred.map.tasks 属性设置为我的 Hadoop 集群的大小。[您可以在此处](http://wiki.apache.org/nutch/NutchHadoopTutorial)找到此文档

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T09:27:50.487

默认情况下，nutch 根据其主机对 url 进行分区。中对应的属性`nutch-default.xml`为：

```
<property>
  <name>partition.url.mode</name>
  <value>byHost</value>
  <description>Determines how to partition URLs. Default value is 'byHost', 
  also takes 'byDomain' or 'byIP'. 
  </description>
</property> 
```

请验证您的设置中的值。

我认为您的问题可以通过获得以下问题的答案来诊断：

1.  **为获取作业创建了**多少映射器？有可能产生了多个映射器，并且所有映射器都提前完成，除了一个。
2.  生成命令中使用的**topN 值是多少？**如果这个值很低，那么尽管有 30K 页面，但发送到获取阶段的页面将非常少。
3.  您是否在生成命令中使用了**numFetchers 选项？**这控制为获取作业创建的地图数量。
4.  **为 generate-partition 作业生成了多少个 reduce**？如果该值为 1，则在 fetch 阶段只会创建一个映射。生成分区的输出被提供给获取阶段。generate（即生成的 reducers）创建的零件文件数等于为 fetch 作业创建的映射数。
5.  你的 hadoop 上 mapred.map.tasks 的设置是什么？reduce 的对应值是多少？

# html - 在某些网站中按下 hash(#) 链接时，不会在 url 中添加 hash？

> ID：10264184
> 
> 赞同：0
> 
> 时间：2012-04-22T00:19:31.417
> 
> 标签：html, hyperlink

我在自己的网站中有哈希（#）链接，我意识到当我点击它们时，一个哈希符号总是会出现在我的网址末尾。但是在我正在摆弄的其他网页中，无论我单击多少次具有“#”来源的链接，它都不会在我的 URL 末尾添加一个哈希。为什么是这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T00:29:31.047

他们可能将 javascript 附加到阻止链接操作启动的链接。

一个简单的

```
return false; 
```

会这样做

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T00:35:58.697

这是锚链接的正常行为。如果您单击带有 href like 的链接`something#anchor`，您将被重定向到 url `something`（如果您还没有在上面）`#anchor`并附加到 url。这个锚点是指页面的某些部分。单“#”号只是空锚。

为避免此符号出现在 url 中，您应该`href`完全删除属性（但有时在此操作之后您需要修复样式表，因为链接的外观取决于 href 属性的存在）。或者，如果您使用的是单击事件的 javascript 处理程序，则应将它们更改为返回 false。

# c# - 如何使用 WCF 服务在 Silverlight 数据网格中显示 GIF 图像？

> ID：10264186
> 
> 赞同：0
> 
> 时间：2012-04-22T00:20:33.537
> 
> 标签：c#, wcf, silverlight, xaml, gif

我正在尝试根据天气 WCF 在预测中分配给当天的天气 ID 显示天气图标的图像。我正在数据网格中显示数据，并希望添加一个带有图标的新列。不幸的是，这些图标是我知道 Silverlight 不支持的 gif，所以如果有人可以提供帮助，那就太好了！

```
 public partial class MainPage : UserControl
{ 
```

创建与它们关联的图像和 ID 的数组。

```
 private WeatherDescription[] weatherInformation;

    WeatherSoapClient weatherClient = new WeatherSoapClient();
    public MainPage()
    {
        InitializeComponent();

        weatherClient.GetCityForecastByZIPCompleted += new EventHandler<GetCityForecastByZIPCompletedEventArgs>(weatherClient_GetCityForecastByZIPCompleted);
        weatherClient.GetCityWeatherByZIPCompleted += new EventHandler<GetCityWeatherByZIPCompletedEventArgs>(weatherClient_GetCityWeatherByZIPCompleted);
        weatherClient.GetWeatherInformationCompleted += new EventHandler<GetWeatherInformationCompletedEventArgs>(weatherClient_GetWeatherInformationCompleted);
        weatherClient.GetWeatherInformationAsync();
    } 
```

这是我将 WCF 调用的结果设置为数组的地方。

```
 void weatherClient_GetWeatherInformationCompleted(object sender, GetWeatherInformationCompletedEventArgs e)
    {
        weatherInformation = e.Result;
    }

    void weatherClient_GetCityForecastByZIPCompleted(object sender, GetCityForecastByZIPCompletedEventArgs e)
    {
        this.dataGrid1.ItemsSource = e.Result.ForecastResult;
        for (int i = 0; i < e.Result.ForecastResult.Length; i++)
        {
            if (i == 0)
            {
                e.Result.ForecastResult[i].Temperatures.DaytimeHigh += "°F";
                e.Result.ForecastResult[i].ProbabilityOfPrecipiation.Daytime += "%";
            }
            else
            {
                e.Result.ForecastResult[i].Temperatures.DaytimeHigh += "°F";
                e.Result.ForecastResult[i].Temperatures.MorningLow += "°F";
                e.Result.ForecastResult[i].ProbabilityOfPrecipiation.Daytime += "%";
                e.Result.ForecastResult[i].ProbabilityOfPrecipiation.Nighttime += "%";
            } 
        }
    }

    void weatherClient_GetCityWeatherByZIPCompleted(object sender, GetCityWeatherByZIPCompletedEventArgs e)
    {
        this.textBlock1.Text = "City: " + e.Result.City + "\n";
        this.textBlock1.Text += "State: " + e.Result.State + "\n";
        this.textBlock1.Text += "Weather ID: " + e.Result.WeatherID + "\n";
        this.textBlock1.Text += "Weather Station: " + e.Result.WeatherStationCity + "\n";
        this.textBlock1.Text += "Temperature: " + e.Result.Temperature + "°F \n";
        this.textBlock1.Text += "Description: " + e.Result.Description + "\n";
        this.textBlock1.Text += "Pressure: " + e.Result.Pressure + "\n";
        this.textBlock1.Text += "Relative Humidity: " + e.Result.RelativeHumidity + "% \n";
    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        weatherClient.GetCityWeatherByZIPAsync(inputZip.Text);
        weatherClient.GetCityForecastByZIPAsync(inputZip.Text);
    }
}
} 
```

然后，如果它有帮助，这就是我对 dataGrid 的标记。

```
<sdk:DataGrid AutoGenerateColumns="False" Height="310" Margin="12,131,407,0" Name="dataGrid1" VerticalAlignment="Top" AlternatingRowBackground="#00010000">
        <sdk:DataGrid.Columns>
            <sdk:DataGridTextColumn Header="Date" Binding="{Binding Date}" />
            <sdk:DataGridTextColumn Header="ID" Binding="{Binding WeatherID}" />
            <sdk:DataGridTextColumn Header="Description" Binding="{Binding Desciption}" />
            <sdk:DataGridTemplateColumn Header="Temperature">
                <sdk:DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <StackPanel>
                            <TextBlock Text="{Binding Temperatures.DaytimeHigh}" Name="DaytimeHigh" />
                            <TextBlock Text="{Binding Temperatures.MorningLow}" Name="MorningLow"/>
                        </StackPanel>
                    </DataTemplate>
                </sdk:DataGridTemplateColumn.CellTemplate>
            </sdk:DataGridTemplateColumn>
            <sdk:DataGridTemplateColumn Header="Probability of Precipitation">
                <sdk:DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <StackPanel>
                            <TextBlock Text="{Binding ProbabilityOfPrecipiation.Daytime}" Name="Daytime"/>
                            <TextBlock Text="{Binding ProbabilityOfPrecipiation.Nighttime}" Name="Nighttime"/>
                        </StackPanel>
                    </DataTemplate>
                </sdk:DataGridTemplateColumn.CellTemplate>
            </sdk:DataGridTemplateColumn>
        </sdk:DataGrid.Columns>
    </sdk:DataGrid> 
```

如果您需要有关它的更多信息，请告诉我。我希望有人能够提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T15:43:49.097

Silverlight 不支持 GIF，因此您必须将它们转换为 jpg 或 png。我建议你只做一次服务器端。

然后，您可以使用相对路径在模板列中的数据网格中显示您的图像。

```
<Image x:Name="myImage" Source="../someImage.jpg" /> 
```

您的图像存储在哪里？您提到通过 id 引用它们。它们是否存储在数据库中？然后，您可以编写一个 HTTP 处理程序来加载图像或通过您的服务加载它们。

# android - Android webview布局 - 何时设置位置？

> ID：10264187
> 
> 赞同：0
> 
> 时间：2012-04-22T00:20:40.090
> 
> 标签：android, layout, view

我有以下 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout android:id="@+id/rl"
    android:background="@color/red"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent"
    xmlns:android="http://schemas.android.com/apk/res/android">
    <WebView xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/webview"
        android:layout_width="10dp"
        android:layout_height="10dp" />
</RelativeLayout> 
```

当我打电话时：

```
view.layout(50, 50, 1024 - 50, 600 - 50); 
```

从 onCreate() 和 onStart() 开始，它没有效果。但是，当我向 shouldOverrideKeyEvent() 添加相同的调用并按下一个键时，它就可以工作了。我认为这是因为我的设置被 XML 的设置所覆盖。所以，问题是：我什么时候应该尽快调用 layout()，但是在 android:layout_width="10dp" 和 android:layout_height="10dp" 已经应用之后。

**更新**

我使用 blessenm 的解决方案。

```
private class LayoutListener implements OnGlobalLayoutListener
{
    public void onGlobalLayout()
    {
        Display display = getWindowManager().getDefaultDisplay();
        int screenWidth = display.getWidth();
        int screenHeight = display.getHeight();

        // Workaround for a 'fill_parent' bug on my tablet (Kindle Fire).
        _WebView.layout(0, 0, screenWidth, screenHeight);
        _WebView.loadUrl("http://192.168.1.2");
        //_Layout.getViewTreeObserver().removeGlobalOnLayoutListener(this); 
    }
} 
```

如果我将 removeGlobalOnLayoutListener() 注释掉，它就会停止工作。调试器显示它被调用了两次，所以我猜第二次调用实际上只设置了大小。所以，我决定不删除监听器（如果它被调用 2 次，那不是性能杀手）。似乎没问题，直到我意识到每当我单击永久底部栏时都会调用它，从而导致工具栏出现。而且由于我在设置布局后加载了一个站点，因此每次都会重新加载它。而且我必须仅在视图大小正确时才加载站点，因为服务器会发送内容，专门针对给定大小进行了优化。

这就是为什么我不能离开听众并应该删除它的原因。但当？只数到2？它适用于所有设备/Android 版本吗？为什么它适用于第二个电话，但不适用于第一个电话？

问候，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T02:25:50.297

```
WebView webview = (WebView)findViewById(R.id.webview);
MarginLayoutParams marginsParams = new MarginLayoutParams(webview.getLayoutParams());
marginsParams.setMargins(50, 50,1024-50, 600-50);
RelativeLayout.LayoutParams lp = new LayoutParams(marginsParams);
webview.setLayoutParams(lp); 
```

试试这个代码::::

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T01:56:00.420

我认为这是因为在 onCreate 事件中尚未绘制或测量布局。因此，如果您尝试在该事件中调用布局，则不会产生影响。尝试将您的代码放在 viewtreeobserver 中，它可能会起作用。

将此添加到您的活动的 onCreate

```
ViewTreeObserver vto        =   layout.getViewTreeObserver(); 
    vto.addOnGlobalLayoutListener(new OnGlobalLayoutListener() { 
    @Override 
    public void onGlobalLayout() { 
        view.layout(50, 50, 1024 - 50, 600 - 50);
        layout.getViewTreeObserver().removeGlobalOnLayoutListener(this); 
    } 
}); 
```

其中布局可以是您的父布局或外部布局。

# python - 如何确保第一个随机值总是大于第二个？

> ID：10264188
> 
> 赞同：0
> 
> 时间：2012-04-22T00:20:50.320
> 
> 标签：python

代码：

```
def Division():

    print "************************\n""********DIVISION********\n""************************"
    counter = 0
    import random
    x = random.randint(1,10)
    y = random.randint(1,10)
    answer = x/y
    print "What will be the result of " + str(x) + '/' + str(y) + " ?"
    print "\n"
    userAnswer = input ("Enter result: ")
    if userAnswer == answer:
        print ("Well done!")
        print "\n"
        userInput = raw_input ("Do you want to continue? \n Enter 'y' for yes or 'n' for no.")
        if userInput == "y":
            print "\n"
            Division()
        else:
            print "\n"
            Menu()
    else:
        while userAnswer != answer:
            counter += 1
            print "Try again"
            userAnswer = input ("Enter result: ")
            if counter == 3: break
        userInput = raw_input ("Do you want to continue? \n Enter 'y' for yes or 'n' for no.")
        if userInput == "y":
            print "\n"
            Division()
        else:
            print "\n"
            Menu() 
```

在这种情况下，我希望`x`价值总是大于`y`价值。我该怎么做？减法代码类似，问题保持不变，目标是避免负结果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T00:24:01.103

您可以检查是否`x < y`并交换它们，例如

```
if x < y:
    x, y = y, x 
```

请注意，在 python 中，您可以交换两个变量而无需临时变量。

您甚至可以通过使用 bultin 来采取进一步的捷径，`min`并`max`在一行中完成，例如

```
x, y = max(x,y), min(x,y) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T00:38:22.113

除了 Anrag Uniyal 的回答，你也可以试试这个：

```
y,x = sorted([x,y]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T01:08:25.620

您可以在 x 和 10 之间进行 randint 以获得大于 x 的数字：

```
x = random.randint(1,10)
y = random.randint(x,10) 
```

# java - Web 服务用户身份验证和会话管理的最佳实践

> ID：10264189
> 
> 赞同：3
> 
> 时间：2012-04-22T00:21:07.660
> 
> 标签：java, jakarta-ee, authentication, architecture, session-management

根据标题，我想知道 Web 服务用户身份验证和会话管理的一些最佳实践，**主要用于后端实现**，尤其是使用 Java (J2EE)。

有没有人发表过关于这个主题的文章？使用用户身份验证时应牢记哪些安全注意事项？什么样的设计模式是相关的？应如何管理会话？精心设计的架构是什么样的？

是否存在可以用作好例子甚至坏例子的现有系统？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T02:14:33.127

由于 Web 服务的 Java EE 规范实际上包括将无状态会话 bean 公开为 Web 服务，因此如果没有“自制”解决方案（例如在每个请求中包含用户令牌），您将无法实现会话管理.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T13:03:34.123

不是专门针对 REST，但我们对标准 Web 服务使用与任何其他 Web 容器请求相同的身份验证机制。表示将基本身份验证数据发送到后端。通过 SSL。从来没有任何问题。

# python - 如何在 BeautifulSoup 中获取子元素的 HTML 表示？

> ID：10264190
> 
> 赞同：3
> 
> 时间：2012-04-22T00:21:20.903
> 
> 标签：python, beautifulsoup

假设我的 HTML 是：

```
<html><body><span>This is my text</span></body></html> 
```

如何获得里面包含的内容的字符串表示，即：

```
<span>This is my text</span> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-22T01:38:56.530

要获取元素的 html 表示，只需使用内置`str`函数：

```
soup = BeautifulSoup("<html><body><span>This is my text</span></body></html>")
span = soup.find('span')
str(span) # Outputs '<span>This is my text</span>' 
```

# javascript - 如何使用点击方法在元素内添加点击方法？

> ID：10264192
> 
> 赞同：1
> 
> 时间：2012-04-22T00:21:39.967
> 
> 标签：javascript, jquery, html

假设我有：

```
 <div id="outer" onclick="thingsHappen()">
      <div id="inner"></div>
   </div> 
```

当我单击*外部*或*内部*div 时，会执行 thingsHappen()。这是显而易见的。

现在我需要为*内部*div 定义不同的方法。例如

```
$("#inner").click(function() {
    doThings();
}); 
```

当我单击*内部*时， thingsHappen() 和 doThings() 都会执行。当我单击内部 div 而不执行 thingsHappen() 时如何执行 doThings()？

我试图从#inner 中取消绑定单击方法，但它不起作用。PS。我无法更改 HTML 的结构。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T00:26:10.347

[停止事件的传播](http://api.jquery.com/event.stopPropagation/)：

```
$("#inner").click(function(e) {
    doThings();
    e.stopPropagation();
}); 
```

**示例：http:** [//jsfiddle.net/QNt76/](http://jsfiddle.net/QNt76/)

JavaScript 事件会在 DOM 树中冒泡，除非您阻止它们传播。这就是导致父事件处理程序收到通知的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T00:26:32.970

你想要`Event.stopPropagation()`：

```
$("#inner").click(function(e) {
    doThings();
    e.stopPropagation();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T00:26:24.470

```
$("#inner").click(function(e) {
    e.stopPropagation();
    doThings();
});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T00:26:56.820

您必须停止传播到文档树：

```
$("#inner").click(function(event) {
    doThings();
    event.stopPropagation();
}); 
```

见：[http ://api.jquery.com/event.stopPropagation/](http://api.jquery.com/event.stopPropagation/)

> 防止事件在 DOM 树中冒泡，防止任何父处理程序收到事件通知。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-22T00:34:30.490

除非像这样停止传播，否则与子元素有关的事件会冒泡到 DOM 中的父元素：

```
$("#inner").click(function(event) {
    doThings();
    event.stopPropagation();
}); 
```

这是关于捕获/冒泡和 Javascript 事件的好读物。[http://www.quirksmode.org/js/events_order.html](http://www.quirksmode.org/js/events_order.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-22T00:43:39.393

您要做的是阻止事件（单击）“冒泡”。在这种情况下，您可能希望在冒泡阶段停止事件的传播。如果您使用的是 jquery，则可以使用此功能：

**HTML**

```
<div id="outer" onclick="thingsHappenOuter()"> 
    <div id="inner">
    </div> 
</div> 
```

**JS**

```
$("#inner").click(function(event) {       
    event.stopPropagation();
    // do something     
}); 
```

请参阅：http : [//api.jquery.com/event.stopPropagation/](http://api.jquery.com/event.stopPropagation/)了解更多信息。

# java - 使用二维数组时出现 NullPointerException

> ID：10264198
> 
> 赞同：-2
> 
> 时间：2012-04-22T00:24:42.960
> 
> 标签：java, multidimensional-array, nullpointerexception

我的目标是使用堆栈穿越迷宫，但我无法走得很远。

我有一个二维`Room`对象数组，我总是从位置 1,1 开始。我相信我已经正确设置了一切。但是，`NullPointerException`每当我尝试访问存储在我的数组中的数据时，我都会得到一个。

任何可以为我指明正确方向的帮助将不胜感激。

这是我的房间类：

```
import java.awt.Point;

public class Room {
private Room up;
private Room down;
private Room left;
private Room right;
private char value;
private boolean blocked;
private boolean visited = false;
private Point p;

public void setCord(int row, int column) {
p = new Point(row, column);
}

public void setUp(Room [][] r, int row, int column) {
up = r[row][column];    
}

public void setDown(Room[][] r, int row, int column) {
down = r[row][column];

}

public void setRight(Room[][] r, int row, int column) {

right = r[row][column];
}

public void setLeft(Room[][] r, int row, int column) {

left = r[row][column];
}

public void setValue(char c) {

value = c;
}

public void setVisited(boolean b) {
visited = b;
} 
public void setBlocked(boolean b) {
blocked = b;
}

public Point getCord() {
return p;
}

public Room getUp() {
return up;  
}

public Room getDown() {
return down;
}

public Room getRight() {

return right;
}

public Room getLeft() {

return left;
}

public char getValue() {

return value;
}
public boolean getVisited() {
return visited;
} 

public boolean getBlocked() {
return blocked;
}

} 
```

这是我的迷宫课：

```
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.PrintWriter;
import java.util.*;

import javax.swing.JOptionPane;

public class Maze {
String inFile,              // Name of file to be used as input
       outFile,             // Name of file to output completed maze to
       line;                // Current line being read by scanner
    char [][] mazeContent;  
    Room [][] rooms;// Holds the values that create maze
    Room [] theStack;
    Room current = new Room();
    ArrayList<Room> al;
    int rows, columns;
    int tos = 0;
    char [][] mazeC;

    public static void main(String []args) throws Exception {
    Maze m = new Maze();
    }

    public Maze() throws FileNotFoundException {
        // Prompts user for the name of the file they wish to use as the input file.
        inFile = JOptionPane.showInputDialog(null, "Please enter the name of the file you wish to read, including " +
        "the file path:");
        //if(inFile.equals("")) inFile = "C:\Java\JavaFiles\maze1.txt;
        // Prompts user to enter the name they wish to save the file under.
        outFile = JOptionPane.showInputDialog(null, "Please enter the filename you wish to save the data to:");
        // Creates a scanner object to read in the input file.
        Scanner readFile = new Scanner(new FileReader(inFile));
        PrintWriter output = new PrintWriter(outFile);  
        rows = readFile.nextInt();
        columns = readFile.nextInt();
        readFile.nextLine();
        theStack = new Room[1000];
        mazeContent = new char [rows][columns];
        rooms = new Room [rows][columns];
        theStack = new Room[1000];

        for(int i = 0; i < rows; i++) {
        line = readFile.nextLine();
        for(int j = 0; j< line.length(); j++) {
        mazeContent[i][j]  = line.charAt(j);        
        }
        }

        createRooms();
        findPath();
    }

    private void findPath() {
    Room start = rooms[1][1];
    push(start);
        while(!isEmpty()) { 
    current = pop();
    //System.out.println("The value is " + current.getValue());
    if(current.getValue() == '$') {
        System.out.println("Success");
    }
    else if(current.getBlocked() != true && current.getVisited() != true) {
                current.setVisited(true);
                push(current.getRight());
                push(current.getLeft());
                push(current.getUp());
                push(current.getDown());
    }
    }
    }

    public void createRooms() {
    for(int i = 1; i < rows - 1; i++) {
    for(int j = 1; j < columns -1; j++) {
                Room r = new Room();
                r.setCord(i,j);
                r.setValue(mazeContent[i][j]);
                r.setUp(rooms, i-1, j);
                r.setDown(rooms, i+1, j);
                r.setRight(rooms, i, j+1);
                r.setLeft(rooms, i, j-1);
                if(mazeContent[i][j] == '*')
                    r.setBlocked(true);
                else
                    r.setBlocked(false);
                rooms[i][j] = r;
    }
    }
    }

    private Room pop() {
    return theStack[--tos];
    }

    private boolean isEmpty() {
    // TODO Auto-generated method stub
    return tos == 0;
    }

    private void push(Room item) {
    if (isFull()) {
    System.out.println("The stack is full!");

    }
    else 
        theStack[tos++] = item;
    }

    private boolean isFull() {

    return tos == theStack.length-1;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T00:36:55.997

NullPointerException 最可能的根本原因是您没有（完全）初始化某些东西。也许你的一个对象的一个​​领域。也许你的数组中的一个元素。然后，当您尝试使用此未初始化的字段或数组元素时，您实际上是在尝试对`null`引用执行操作......这会导致异常。

* * *

如果异常被抛出

```
 if(current.getValue() == '$') 
```

那么这意味着那`current`是`null`。这意味着您`null`从堆栈中“弹出” a 。乍一看，你的堆栈操作的实现看起来不错，所以我猜是你在某个地方推送了一个`null`.

我的建议是在`push`尝试 push 时在引发异常的方法中添加一个测试`null`。（或者尝试使用调试器进行跟踪。）然后继续向后工作以找出`null`来源。

# php - 查询结果不会被回显

> ID：10264199
> 
> 赞同：0
> 
> 时间：2012-04-22T00:25:08.887
> 
> 标签：php, mysql, function, mysqli, echo

我有一个功能。在那个函数中有一个选择查询。另一个查询应该返回第一个查询中的结果数。我有这个代码：

```
 function name ($f){  
     global $db;
     ...
     $results = "SELECT `a` FROM `b` WHERE $where"; 
     $results_num = ($query = mysqli_query($db, $results)) ? mysqli_num_rows($results) : 0; 

     echo $results;
     echo $results_num;
    } 
```

将回显：

```
SELECT `a` FROM `b` WHERE `keywords` LIKE '%abc%'0 
```

什么只是`$results`而不是`$results_num`？我不明白为什么`echo $results_num`不会显示以及为什么`0`最后有一个，`$results`所以如果有人可以给我建议解决这个问题，我真的很感激。多谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T00:30:20.940

$results_num 为 0。$results 为 - SELECT `a`FROM `b`WHERE `keywords`LIKE '%abc%' 试试这个

```
echo "Results is $results <br />";
echo "Results_num is $results_num <br />"; 
```

一切都会显露出来:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T00:37:35.283

首先，`$results_num`为零并且正在输出（这就是输出`0`末尾有 a 的原因）。那是因为这段代码是错误的：

```
$results_num = ($query = mysqli_query($db, $results)) ? mysqli_num_rows($results) : 0; 
```

打破它一点：

```
$query = mysqli_query($db, $results);
$results_num = $query ? mysqli_num_rows($results) : 0; 
```

第二行实际上应该是：

```
$results_num = $query ? mysqli_num_rows($query) : 0; 
```

您需要将查询句柄传递给`mysqli_num_rows()`，而不是 SQL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T00:35:03.970

`$results`是您的查询字符串。你不能`mysqli_num_rows()`像你正在做的那样传递一个字符串，它需要一个返回的结果集标识符`mysqli_query()`。在您的情况下`$query`（顺便说一句，您可能想更改变量名以使其更有意义）。

# javascript - jquery .animate() 在循环中使用完整的索引：

> ID：10264211
> 
> 赞同：0
> 
> 时间：2012-04-22T00:28:10.243
> 
> 标签：javascript, jquery

我正在编写一个同时运行多个动画的脚本，并且根据新动画的开始时间，当前动画的其余元素必须 .stop() 并移动到另一个位置（这是有效的）。所以我构建了一个动画数组，当添加一个新动画时，它会被 .animate() 编辑，当每个动画完成时，我需要将它从数组中删除。这是我尝试使用的代码：

```
for (var i = 0; i < animations[key].length; i++) {
animations[key][i].object.animate({
    top: animations[key][i].endCoords.top,
    left: animations[key][i].endCoords.left
}, {
    duration: 800,
    complete: function() {
        console.log(i);
        animations[key].splice(i, 1);
        console.log(animations);
    }
});
} 
```

问题是当完成时：运行，`i`设置为动画[key].length。我很确定我理解它为什么这样做，因为 for 循环在动画完成之前继续（这很好，因为它确实允许我一次运行多个动画），但是有没有办法编写代码所以完成后：运行它有正确的索引来做拼接？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T00:44:30.127

为每次迭代使用/分配不同的变量应该这样做：

```
for (var i = animations[key].length-1; i >= 0; i--) {
    var id = i;
    animations[key][id].object.animate({
        top: animations[key][id].endCoords.top,
        left: animations[key][id].endCoords.left
    }, {
        duration: 800,
        complete: function() {
            console.log(id);
            animations[key].splice(id, 1);
            console.log(animations);
        }
    });
} 
```

否则你`animations[key].splice(animations[key].length, 1)`每次都会调用（因为循环在任何动画有时间完成之前执行）。

即便如此，您可能需要重新考虑您的方法：除非动画以与它们开始时完全相同的顺序完成，否则您可能仍然会遇到麻烦！

*编辑：*反转循环方向（见下面的注释） - 这具有以相反顺序启动动画的副作用

# iphone - 当 UITabBarController 加载而不是 ViewController 时添加徽章

> ID：10264212
> 
> 赞同：2
> 
> 时间：2012-04-22T00:28:10.320
> 
> 标签：iphone, ios, xcode

也许这是一个简单的问题......

我有一个带有 3 个标签栏项目的 UITabBarController，它有 3 个 ViewController。

我可以将徽章（通过使用 setBadgeValue）添加到选项卡栏项，但只是在 ViewController 上，但我想在加载 UITabBarController 时添加它......

任何的想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T01:22:34.353

您可以从 AppDelegate 或应用程序中的任何其他位置将其添加到所需的 UITabBarItem。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T07:16:12.683

您可以`AppDelegate.m`在设置 tabBarController 之后添加它。

```
self.tabBarController.viewControllers = [NSArray arrayWithObjects:vc1,vc2,vc3,vc4, nil];
NSArray *items = self.tabBarController.tabBar.items;
if (items && [items count]>2) {
    UITabBarItem *item = [items objectAtIndex:1];
    item.badgeValue = @"New";
} 
```

# ruby - 在 Ruby 中编写真假条件的首选方式

> ID：10264213
> 
> 赞同：1
> 
> 时间：2012-04-22T00:28:20.680
> 
> 标签：ruby, coding-style, logic

如果这个问题在某个地方得到了回答，我深表歉意，但我不确定我的措辞是否适合谷歌，而且我还没有在任何风格指南中看到它。

由于 Ruby 有多种方法可以在条件中显示否定性，那么编写检查一部分为真另一部分为假的条件的首选方法是什么？例子：

```
if array && !array.include?('Bob')
  #do stuff! 
```

但你也可以说：

```
if array
  #do stuff! unless array.include?('Bob') 
```

或者：

```
if array && not array.include?('Bob')
  #do stuff 
```

或者：

```
if !array.nil? && !array.include?('Bob') 
```

或者一个古怪的双人，除非：

```
unless array.nil?
  #do stuff unless array.include?('Bob') 
```

还有其他几个。有什么想法被认为是最 Rubyish 的吗？支持您观点的来源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T01:24:38.243

就文档指南而言，我唯一能想到的是谷歌指南，它告诫“不要使用`and`and `or`；总是使用`&&`and`||`来代替。”。

除此之外，它在某种程度上取决于上下文。如果您所拥有的只是在一个条件为真而另一个条件为假时要执行的代码，那么我肯定会将它们放在一个 if with 中`&& !`：

```
if array && !array.include?('Bob')
  #do stuff! 
```

另一方面，如果第一个条件为真，即使第二个条件也为真，您可能还会执行其他代码；在这种情况下，嵌套的`unless`or`if`是有意义的：

```
if array 
    do stuff! unless array.include? 'Bob'
    do other stuff anyway
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T09:37:31.903

不会提高可读性，但仍然很有趣。

如果你使用 Rails，你可以[`try`](http://guides.rubyonrails.org/active_support_core_extensions.html#try)像这样使用 ActiveSupport 扩展：

```
if array.try(:include?, 'Bob')
  # Do stuff 
```

# django - 在 Django 中查看错误的有效方法是什么？

> ID：10264214
> 
> 赞同：1
> 
> 时间：2012-04-22T00:28:23.733
> 
> 标签：django

我正在尝试在我的 Django 应用程序中添加一个新的中间件。但是，我的应用程序现在在被访问时停止。最终，在很长一段时间后，出现了 500 个错误。

Django 服务器上的任何地方是否有错误日志？我想看看错误是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T15:46:09.043

通常，日志记录将取决于您如何为 django 提供服务（modwsgi、gunicorn、passenger 等）、您如何配置[django 日志记录](https://docs.djangoproject.com/en/dev/topics/logging/)以及错误发生的位置，即错误是否发生在 django 处理请求之前/之后.

如果您配置了邮件主机和日志记录，django 可以向您发送错误消息。如果错误发生并且 django 没有处理它，它通常会显示在您的服务器日志中。

就个人而言，我认为查看 django 错误的最佳方法之一是使用带有哨兵的[raven](https://github.com/dcramer/raven)，无论是自托管还是在[getsentry](https://www.getsentry.com/)上。它甚至带有一个[wsgi 中间件](http://raven.readthedocs.org/en/latest/config/django.html#wsgi-middleware)来捕获 wsgi 层上的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T08:44:18.867

看起来您遇到了超时错误，您可以查看您的网络服务器日志，但它可能不会显示任何有趣的内容，我想您在新的中间件中做的事情太繁重，需要太长时间，然后请求超时。

我真的建议你重新检查你的中间件代码（也许你可以在这里添加代码）

# google-gadget - 带开放社交小工具的动态高度调整

> ID：10264215
> 
> 赞同：2
> 
> 时间：2012-04-22T00:28:26.447
> 
> 标签：google-gadget

我有一个小工具，它是一个包含许多不同页面的词汇表。用户可以将新词上传到数据源，这些词将通过 AJAX 调用被拉入词汇表。

每次调整窗口大小或选择新字母并且页面高度发生变化（即小工具 html 块高度）时，我都想调整小工具窗口的大小。

谷歌开发者已经在他们的网站上发布了[这个。](https://developers.google.com/gadgets/docs/ui#Dyn_Height)但是，这显然对我不起作用。调整窗口大小时，滚动未在 iframe 上注册，并且高度未调整。

这是我的 ModulePrefs

```
title="Climate Policy and Science Glossary"
  description="Paragraph format"
  height="300"
  scrolling="true">
<Require feature="dynamic-height"/>
<Require feature="opensocial-0.8" /> 
```

这是小工具的脚本，告诉它进行调整：

```
 window.onresize = adjust;
    function adjust() {
        var wndwH = gadgets.window.getViewportDimensions().height, 
            wgtH = $('#_glossary').closest('html').height,
            h = Math.min(wndwH, wgtH);
       gadgets.window.adjustHeight(h);
    }
    gadgets.util.registerOnLoadHandler(adjust); 
```

这是怎么回事？我做错了什么还是有其他人对谷歌的动态高度有问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T00:38:39.550

调整功能真的只需要：

```
function adjust() {
   gadgets.window.adjustHeight();
} 
```

那应该自动适合所有内容。

# jquery - 从类中删除 ul（ul 没有 id）元素 - Jquery

> ID：10264218
> 
> 赞同：2
> 
> 时间：2012-04-22T00:28:39.153
> 
> 标签：jquery

我正在尝试开发一个从站点中删除栏的油脂猴子脚本，到目前为止，我已经删除了类本身，但我无法删除 div 中的内容。我可以删除整个站点中的所有 ul 元素，但我只需要删除与“bar” div 类关联的所有特定元素，并且里面的 ul 没有 ID，所以我无法通过 JQuery 对其进行跟踪。如何删除元素？

```
<div class="bar"> <ul>
                    <a href="..." onclick=""/>
    <span class="title">Title 1</span>
    </a>

     <a href="..." onclick=""/>
    <span class="title">Title 2</span>
    </a></ul></div> 
```

这就是我到目前为止在 JQuery 中所拥有的

```
$(".bar").removeClass('bar'); 
```

我已经尝试过了，但它会删除整个页面中的所有 UL 元素，我不希望这样

```
$('ul:not(:first):not(:last)').remove(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T00:31:23.917

你要这个：

```
$(".bar ul").remove(); 
```

`jQuery('ancestor descendant')` [**文档**](http://api.jquery.com/descendant-selector/)

> 描述：选择作为给定祖先的后代的所有元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T00:31:07.520

这应该有效：

```
$(".bar > ul").remove(); 
```

* * *

没关系，`$(".bar ul").remove();`也能正常工作。

# ios - Objective-c 中 CoreData 的自动索引

> ID：10264224
> 
> 赞同：0
> 
> 时间：2012-04-22T00:29:18.363
> 
> 标签：ios, sqlite, core-data, indexing

我必须为每个核心数据记录生成一个唯一的 id，有没有办法在核心数据中设置自动增量索引？这样我们纯sqlite！如果没有，管理此问题的最佳策略是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T04:20:23.253

有 NSManagedObjectID

```
NSManagedObjectID *moID = [managedObject objectID]; 
```

但为什么不只是搜索呢？ [在 iPhone 上为 Core Data 程序创建一个唯一的 id](https://stackoverflow.com/questions/1351998/creating-a-unique-id-for-a-core-data-program-on-the-iphone)

# java - 有什么选项可以为 Android 构建您自己的基于 Java 的 youtube html5 视频播放器？

> ID：10264229
> 
> 赞同：0
> 
> 时间：2012-04-22T00:30:27.497
> 
> 标签：java, android

我需要在 android 中构建一个可以播放 youtube HTML5 视频 (www.youtube.com/html5) 的视频播放器，也可以将播放器嵌入到我构建的 android 应用程序中。

我正在为其构建此应用程序的平板电脑根本无法使用闪存（这就是我需要自己构建的原因）。

这最终会成为一个儿童应用程序，所以我真的只想在播放器上给他们 4 个选项：播放、回复、暂停、退出

我仍然有点困惑，我是否会使用 rtsp:// 或 m.youtube.com H.264 在我的自定义应用程序（使用我制作的自定义视频播放器）中播放这个嵌入视频

在此先感谢，感谢所有帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T02:04:37.670

来自 GIthub 的这些项目可能会帮助您入门。

[vivdub / 安卓媒体播放器](https://github.com/vivdub/AndroidMediaplayer)

[joelbinn / 媒体播放器](https://github.com/joelbinn/media-player)

[lxz2003 / 媒体播放器](https://github.com/lxz2003/mediaplayer)

# javascript - 我无法让我的 RegEx 表达式在 JavaScript 中工作

> ID：10264232
> 
> 赞同：0
> 
> 时间：2012-04-22T00:30:47.277
> 
> 标签：javascript, regex, replace

我在我的网站上使用以下内容：

`$('body').html($('body').html().replace(>> ?(\d+)/g, '<b>$&</b>'));`

（我正在使用 jQuery）

我使用的正则表达式是`>> ?(\d+)/g`. 下面的粗体显示它*应该*替换的内容：

> 这段文字**>>124949200**包含了两个稍微**>>20993910**不同的正则表达式。

现在，我在这里使用了这个工具： [http](http://regexpal.com/) : //regexpal.com/ 我的 RegEx 工作正常。但是，当我实际实施它时，它不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T00:38:35.620

JQuery 的`html()`函数似乎正在输出`>>`编码字符：`&gt;&gt;`. 只需将您的正则表达式更改为：

```
$('body').html($('body').html().replace(/&gt;&gt; ?(\d+)/g, '<b>$&</b>')); 
```

# javascript - 即时 CSS 样式切换器/滚轮？

> ID：10264233
> 
> 赞同：-5
> 
> 时间：2012-04-22T00:30:52.880
> 
> 标签：javascript, jquery, css, styleswitching

我正在寻找一个允许更改 CSS 颜色（例如背景等）的色轮。我在哪里可以找到这样的脚本？你们中的一些人正在使用它。

它们中的大多数都在控制面板的左侧站点上使用。有人知道我在哪里可以找到一个好的脚本吗？

我真的需要它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T00:35:20.730

将事件附加到 javascript 函数，并使用 jQuery 根据需要更改 css，例如；

```
<a href="#" onclick="make_red(); return false;">Make the background red!</a>

<script type="text/javascript">
    function make_red() {
        $('body').css("background","red");
    }
</script> 
```

# javascript - 确定元素是否在排序数组中的最快方法

> ID：10264239
> 
> 赞同：7
> 
> 时间：2012-04-22T00:32:22.427
> 
> 标签：javascript, arrays, sorted

我有一个具有 1,000 个或更多值（可能高达 5000+）的已排序整数数组。我需要编写一个函数，它接收一个 int 并根据数组中的元素返回一个 bool。我知道我可以编写一个带中断的 for 循环，我知道我可以使用 jquery .InArray。

实现这一点的最佳方法是什么，知道数组已排序。

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-22T00:33:58.120

知道数组已排序，二进制搜索将是最好的方法。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-22T00:49:30.640

我认为您想使用二进制搜索例程。二进制搜索例程是![在此处输入图像描述](../Images/c986075ad53eb059c2645cc106e4ce58.png)，而线性搜索平均而言是![在此处输入图像描述](../Images/896a935b62aa35b2232e8ea4513d297f.png).

选择形式有很多变化。这是我在[这篇文章](http://www.nczonline.net/blog/2009/09/01/computer-science-in-javascript-binary-search/)中找到的一个：

```
function binarySearch(items, value){

    var startIndex  = 0,
        stopIndex   = items.length - 1,
        middle      = Math.floor((stopIndex + startIndex)/2);

    while(items[middle] != value && startIndex < stopIndex){

        //adjust search area
        if (value < items[middle]){
            stopIndex = middle - 1;
        } else if (value > items[middle]){
            startIndex = middle + 1;
        }

        //recalculate middle
        middle = Math.floor((stopIndex + startIndex)/2);
    }

    //make sure it's the right value
    return (items[middle] != value) ? -1 : middle;
} 
```

或者这篇[文章](http://rosettacode.org/wiki/Binary_search)中这个看起来更简单的版本，它具有无数种不同语言的二进制搜索功能。

```
function binary_search_iterative(a, value) {
    var lo = 0, hi = a.length - 1, mid;
    while (lo <= hi) {
        mid = Math.floor((lo+hi)/2);
        if (a[mid] > value)
            hi = mid - 1;
        else if (a[mid] < value)
            lo = mid + 1;
        else
            return mid;
    }
    return null;
} 
```

Google 闭包中还有一个二分搜索，[这里](http://closure-library.googlecode.com/svn/docs/closure_goog_array_array.js.source.html#line881)的代码。

并且，很好地描述了二进制搜索算法在[Wikipedia](http://en.wikipedia.org/wiki/Binary_search)上的工作原理。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-22T00:34:58.087

如果数组已排序，则答案已排序 - 使用二进制印章。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-26T20:39:02.983

如果进行多次查找，请迁移到类似地图的对象。

```
var fastLookup = {};
mySortedArray.forEach(function(i){fastLookup[i]=true)});

//Each time:
  if (fastLookup[key]===true){ //do thing
  }
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-05-07T17:15:25.930

许多语言已经实现了这个，例如在 java 中你可以使用 CollectionsCollections.binarySearch(List> list, T key) 方法，我很确定 C# 也有某种 BinarySearch 方法。

# python-3.x - 在 Python 中将字符串转换为类对象

> ID：10264241
> 
> 赞同：0
> 
> 时间：2012-04-22T00:32:55.857
> 
> 标签：python-3.x

我有一个字符串列表。列表的每个字符串具有相同的格式。我想将每个字符串转换为一个类对象（如果这是最好的选择），所以我可以对类对象列表进行一些分析。

举个例子，

我有以下列表

```
ls_list = ['-rw-r--r-- 1 ahmed None 0 Apr 21 17:10 bar1',
'-rw-r--r-- 1 ahmed None 0 Apr 21 17:10 bar2',
'-rw-r--r-- 1 ahmed None 0 Apr 21 17:10 foo1',
'-rw-r--r-- 1 ahmed None 0 Apr 21 17:10 foo2'] 
```

我想将上述每个字符串转换为一个有九个成员（烫发等）的类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T01:44:37.820

[你不想那样做。](http://mywiki.wooledge.org/ParsingLs)使用[`os.listdir()`](http://docs.python.org/library/os.html#os.listdir)和[`os.stat()`](http://docs.python.org/library/os.html#os.stat)获取您想要的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T05:18:04.163

你这样做是这样的：

```
import os

data = {}
for file in os.listdir('.'):
    data[file] = os.stat(file) 
```

这会按照您的要求为您提供当前目录中所有文件的信息，作为对象。然后可以检查这些，您可以使用其他功能来找出您获得的用户 ID 的用户名等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T01:06:03.807

这是执行您所要求的一种方法，但正如其他人所指出的，不要使用它来解析 ls 的输出。此外，它假设输入字符串中只有 8 个空格区域分隔数据。如果任何数据子字符串也包含空格，则此代码将失败：

```
class FileAttribs(object):

  ORDERED_ATTRIB_NAMES = ["permissions", "links", "owner", 
      "groups", "size", "month", "day", "time", "name"]

  def __init__(self, lsString):
    for (attrib, s) in zip(self.ORDERED_ATTRIB_NAMES, lsString.split()):
      setattr(self, attrib, s)

if __name__ == '__main__':
    ls_list = ['-rw-r--r-- 1 ahmed None 0 Apr 21 17:10 bar1', 
               '-rw-r--r-- 1 ahmed None 0 Apr 21 17:10 bar2', 
               '-rw-r--r-- 1 ahmed None 0 Apr 21 17:10 foo1', 
               '-rw-r--r-- 1 ahmed None 0 Apr 21 17:10 foo2']

    files = []
    for s in ls_list:
      files.append(FileAttribs(s))

    #do stuff with files, e.g.

    for f in files:
      print f.permissions, f.name 
```

# c++ - 在接受连接 C++ 之前获取套接字的 IP 地址

> ID：10264243
> 
> 赞同：2
> 
> 时间：2012-04-22T00:33:57.823
> 
> 标签：c++, c, sockets, winsock2

我需要获取连接的 IP 地址以查看它之前是否已连接（检查 ips 列表，如果它之前已连接但不再连接，它将显示脱机）。（使用非阻塞套接字）

我如何在不先接受 IP 的情况下获得 IP。

///

```
 case FD_ACCEPT:
        int W;
        for(W = 0;W <= ListView_GetItemCount(GetDlgItem(HwND,IDC_IPLIST));W++){ 
```

因此，我将根据列表视图检查 IP 以查看它之前是否已连接。如果有，我想使用上次使用的相同套接字号。

这就是我现在接受连接的方式

```
 case FD_ACCEPT: 
        while(Client[F] != NULL)
        {
        F++;
        }
        Client[F]=accept(wParam,(LPSOCKADDR)&ServAdr,&AdrLen);
        break; 
```

所以要把它分解...

我想根据以前连接的 IP 列表检查传入连接。此列表将包含 IP 及其是否在线/离线（已连接/未连接）。如果它在我希望它在我接受新连接时显示在线之前已经连接，并使用它上次使用的相同套接字号，而不是一起使用一个新的。如果没有，我希望将其添加到列表中。（列表将有套接字号）

如果这没有多大意义，我会尝试澄清更多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T04:07:33.663

你所要求的不能用`accept()`. `SOCKET`在连接被接受并分配新句柄之前，您无法访问连接的信息。要获得连接信息预接受，您必须改用回调功能`WSAAccept()`。

无论哪种方式，都无法`SOCKET`为新连接重用现有句柄。每个接受的连接都必须有自己唯一的`SOCKET`句柄。不过，您当然可以将来自先前看到的 IP 的新连接与 ListView 中的现有插槽相关联。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T01:37:49.167

我不确定实现您想要的东西是否可能也不是有效的规范。我会：

1.  接受任何连接，然后检查 IP 地址，断开不在列表中的连接

2.  （这可能不适合您）配置上游防火墙，以便只允许允许的 IP 地址通过。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T03:54:23.717

如果通过**套接字编号**表示由 返回的数字`accept()`，则根本不能依赖它的值。我的意思是，如果远程主机断开连接并再次连接，则返回的值`accept()`很可能会有所不同。依赖这个数字是没有意义的。

如果通过**套接字编号**表示数组中的位置，则可以将返回的值分配`accept()`给临时变量：

```
SOCKET tmpSock;
sockaddr_in tmpAddr;
int namelen;
typedef struct { /*...*/ } TClient;
TClient Client[MAX_CLIENTS];
/*...*/
tmpSock = accept(/*...*/);
namelen = sizeof(tmpAddr);
getpeername(tmpSock, (sockaddr*)&tmpAddr,&namelen);
/*...*/
//looking for tmpAddr.sin_addr in your list and calculating
//the list position - F
/*...*/
Client[F].Socket = tmpSock;
Client[F].IsConnected = true;
Client[F].Address = tmpAddr.sin_addr; 
```

请记住，在`listen()`调用之后，操作系统内核将接受到您设置的端口/本地 IP 的所有传入连接。这意味着`connect()`无论您是否调用远程主机都会成功返回`accept()`（前提是您在侦听队列中有空间）。调用`accept()`将只允许您与套接字交互。它不会改变远程主机看到的连接状态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T05:25:20.117

如果您绑定到通配符地址 ( `INADDR_ANY`)，则在连接到来之前不会确定用于通信的 IP 地址（它将来自数据包通过的接口）。同一个侦听套接字可能会导致在多个 IP 地址上接受连接。

如果您绑定到特定地址，那么您已经知道您绑定的地址。

# ios - 适用于 iOS 的艺术品

> ID：10264245
> 
> 赞同：0
> 
> 时间：2012-04-22T00:34:11.300
> 
> 标签：ios, artwork

这可能是一个古老而微不足道的问题，但我一直在努力找出应该使用哪种工具来为我的 iOS 应用程序创建艺术品（图标、图像、徽标等）？有人可以在这里分享他们的第一手经验并建议一些工具（最好是免费的）来完成这项工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T00:36:49.817

我个人使用 Inkscape 和 GIMP，它们是 Illustrator 和 Photoshop 的开源等价物，尽管它们不是那么等价。

Inkscape 可以生成适合 IOS 开发的 PNG 文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T00:51:19.107

无论你是最舒服的。iOS 可以处理 PNG、JPEG、GIF...

如果您想以专业的方式进行操作和/或计划与项目中的其他专业人员进行交互，那么标准是使用 Photoshop 并将 UI 资源导出为 PNG 文件。

如果你想以更实惠的价格寻找类似的东西，Pixelmator 是一个很受欢迎的工具，里面有很多教程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T18:37:43.867

无论你使用什么工具，一定要使用矢量设计你的作品——iOS 需要各种尺寸的图形资源，你不想设计一个应用程序图标，然后意识到你需要一个更大的图标，但是重做你的图标，因为你的来源不是矢量。毕竟，您永远不知道 Apple 何时可能需要新尺寸（例如，新的 iPad 和视网膜尺寸的闪屏）。

就个人而言，我使用 Photoshop 来做我的图形工作——主要是因为它是一个标准，尽管只要你的工具可以生成 png 和 jpg，你应该没问题。请确保它可以处理缩放/缩放大图像，因为 iPad 视网膜屏幕截图是 2048x1536，并且您的显示器不太可能在本机显示它。

# ruby - 无法从 Jekyll 插件获取页面数据

> ID：10264249
> 
> 赞同：6
> 
> 时间：2012-04-22T00:34:50.753
> 
> 标签：ruby, jekyll, liquid

我正在尝试为 Jekyll 编写一个自定义标签插件，它将输出网站上所有页面（不是帖子）的分层导航树。我基本上想要一堆嵌套`<ul>`的带有链接（以页面标题作为链接文本）到当前页面由某个 CSS 类记录的页面。

我对红宝石非常缺乏经验。我是一个 PHP 人。

我想我会首先尝试遍历所有页面并输出一个一维列表，以确保我至少可以做到这一点。这是我到目前为止所拥有的：

```
module Jekyll

  class NavTree < Liquid::Tag
    def initialize(tag_name, text, tokens)
      super
    end

    def render(context)
      site = context.registers[:site]
      output = '<ul>'
      site.pages.each do |page|
        output += '<li><a href="'+page.url+'">'+page.title+'</a></li>'
      end
      output += '<ul>'

      output
    end
  end

end

Liquid::Template.register_tag('nav_tree', Jekyll::NavTree) 
```

我通过 将它插入到我的液体模板中`{% nav_tree %}`。

问题是`page`上面代码中的变量没有您期望的所有数据。`page.title`是未定义的，`page.url`只是前面带有正斜杠的基本名称（例如 for `/a/b/c.html`，它只是给 me `/c.html`）。

我究竟做错了什么？

**旁注：**我已经尝试过使用纯 Liquid 标记来执行此操作，但我最终放弃了。`site.pages`我可以轻松地使用 Liquid进行迭代，但我无法找到适当嵌套列表的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T09:26:03.497

尝试：

```
module Jekyll

  # Add accessor for directory
  class Page
          attr_reader :dir
  end

  class NavTree < Liquid::Tag
    def initialize(tag_name, text, tokens)
      super
    end

    def render(context)
      site = context.registers[:site]
      output = '<ul>'
      site.pages.each do |page|
        output += '<li><a href="'+page.dir+page.url+'">'+(page.data['title'] || page.url) +'</a></li>'
      end
        output += '<ul>'

      output
    end
  end

end

Liquid::Template.register_tag('nav_tree', Jekyll::NavTree) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-04T06:39:31.603

`page.title`并不总是被定义（例如：）`atom.xml`。您必须检查它是否已定义。然后你可以接受`page.name`或不处理条目......

```
def render(context)
  site = context.registers[:site]
  output = '<ul>'
  site.pages.each do |page|
    unless page.data['title'].nil?
      t = page.data['title']
    else
      t = page.name
    end
    output += "<li><a href="'+page.dir+page.url+'">'+t+'</a></li>"
  end
  output += '<ul>'
  output
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-14T15:08:03.153

最近我遇到了一个类似的问题，错误“无法将 nill 转换为字符串”让我大吃一惊。我的 config.yml 文件包含类似这样的行“ **baseurl：/paradocs/jekyll/out/** ”现在这是我的本地服务器我需要将该 beseurl 设为空并且错误开始出现在构建时所以最后我有制作“ **baseurl：/** ” ..这就是我的工作。

# css - CSS 选择器（或语句、容器、分隔符等）

> ID：10264255
> 
> 赞同：1
> 
> 时间：2012-04-22T00:35:21.533
> 
> 标签：css, css-selectors, containers, separator

有 CSS 选择器的容器吗？

我只是好奇是否有更优雅的方法可以做到这一点而无需重复上课：

```
#div1 .divClass, #div2 .divClass { color:cyan; } 
```

这是我的想法，但我认为没有办法做到这一点。

```
#div1,#div2 > .divClass { }
[#div1,#div2] .divClass { } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T00:58:03.163

简短的回答：没有。

似乎您可以为两个 div 添加一个类。

```
<div id="div1" class="sharedClass"></div>
<div id="div2" class="sharedClass"></div>

.sharedClass > .divClass { color: cyan; } 
```

无论如何，这个问题可以有多个答案。考虑查看[LESS](http://lesscss.org/)，它扩展了 CSS 功能。然后你可以做一些很棒的事情：

```
.divClass {
    /* ... */
}

#div1 {
    color: red;
    border: 1px solid blue;
    .divClass;
}

#div2 {
    color: cyan;
    border: 1px solid green;
    .divClass;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T00:45:09.173

听起来您正在寻找类似[LESS](http://lesscss.org/#-nested-rules)的东西，这是一种可以编译成普通 CSS 的样式表语言。在您的特定情况下，它可能无法完全满足您的需求（但话又说回来，它可能，我没有尝试过），但听起来它对您很有用。

# ruby - 在控制台中向左移动一个字符

> ID：10264261
> 
> 赞同：6
> 
> 时间：2012-04-22T00:37:05.543
> 
> 标签：ruby, console

在控制台中，您可以`"\b"`像这样打印以擦除光标左侧的字符（退格）

```
print "the last char is going to be erased\b" # the last char is going to be erased 
```

如何只向左移动一个位置而不是擦除（左箭头）？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-22T01:07:53.277

这取决于终端类型和连接，但您通常可以假设 ANSI 光标移动，因此光标左侧是 ESC + '[' + 'D'：

```
print "The cursor should be between the arrows: -> <-\e[D\e[D\e[D"
readline 
```

有关详细信息，请参阅[http://ascii-table.com/ansi-escape-sequences.php](http://ascii-table.com/ansi-escape-sequences.php)。

# java - Java 在不可编辑的 JTextArea 中插入退格键

> ID：10264266
> 
> 赞同：3
> 
> 时间：2012-04-22T00:38:15.933
> 
> 标签：java, swing, jtextarea, key-bindings, backspace

我有一个在特定设置下不可编辑的 JTextArea。但是，在此设置下，用户仍然可以使用空格键和退格键。为了容纳空间，我有以下代码，

```
if (e.getKeyChar() == KeyEvent.VK_SPACE) {
    editor.insert(" ", editor.getCaretPosition());
} 
```

不过，我遇到了退格问题。这个我试过了

```
if (e.getKeyChar() == KeyEvent.VK_BACK_SPACE) {
    editor.insert("\b", editor.getCaretPosition());
} 
```

当按下退格键时，这似乎增加了一个很小的空间。没有空格那么大，按一次几乎看不出来。但这绝对不是退格键。更糟糕的情况是，我必须将所有字符复制到插入符号位置 - 1 并将它们附加到插入符号位置之后的所有字符，但我不喜欢这种解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T01:06:14.320

使用键绑定允许空格键和退格键具有关联的操作，然后在按下退格键时从 JTextArea 的文档中删除一个字符。

例如，

```
import java.awt.event.ActionEvent;
import java.awt.event.KeyEvent;

import javax.swing.*;
import javax.swing.text.BadLocationException;
import javax.swing.text.PlainDocument;

@SuppressWarnings("serial")
public class TextAreaFun extends JPanel {
   public static final String SPACE = "space";
   public static final String BACK_SPACE = "back space";
   private JTextArea textArea = new JTextArea(15, 50);

   public TextAreaFun() {
      // create our key bindings
      // only allow key presses to initiate an action if the JTextArea has focus
      int condition = JComponent.WHEN_FOCUSED;
      InputMap taInputMap = textArea.getInputMap(condition);
      ActionMap taActionMap = textArea.getActionMap();

      taInputMap.put(KeyStroke.getKeyStroke(KeyEvent.VK_SPACE, 0), SPACE);
      taInputMap.put(KeyStroke.getKeyStroke(KeyEvent.VK_BACK_SPACE, 0),
            BACK_SPACE);
      taActionMap.put(SPACE, new KeyAction(textArea, SPACE));
      taActionMap.put(BACK_SPACE, new KeyAction(textArea, BACK_SPACE));

      // checkbox that stops all editing except for that specified in the 
      // key bindings above
      JCheckBox chkBox = new JCheckBox(new AbstractAction("Prevent Editing") {
         {
            putValue(SELECTED_KEY, Boolean.FALSE); // default to unchecked
            putValue(MNEMONIC_KEY, KeyEvent.VK_P);
         }

         @Override
         public void actionPerformed(ActionEvent evt) {
            boolean selection = (Boolean) getValue(SELECTED_KEY);
            textArea.setEditable(!selection);
         }
      });
      JPanel bottomPanel = new JPanel();
      bottomPanel.add(chkBox);

      setLayout(new BoxLayout(this, BoxLayout.PAGE_AXIS));
      add(new JScrollPane(textArea));
      add(Box.createVerticalStrut(10));
      add(bottomPanel);
   }

   private static void createAndShowGui() {
      TextAreaFun mainPanel = new TextAreaFun();

      JFrame frame = new JFrame("TextAreaFun");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(mainPanel);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
}

@SuppressWarnings("serial")
// action to be initiated by key bindings
class KeyAction extends AbstractAction {
   private PlainDocument textAreaDocument;
   private String title;

   public KeyAction(JTextArea textArea, String title) {
      this.textAreaDocument = (PlainDocument) textArea.getDocument();
      this.title = title;
   }

   @Override
   public void actionPerformed(ActionEvent e) {
      if (title.equals(TextAreaFun.SPACE)) {
         try {
            textAreaDocument.insertString(textAreaDocument.getLength(), " ",
                  null);
         } catch (BadLocationException e1) {
            e1.printStackTrace();
         }
      } else if (title.equals(TextAreaFun.BACK_SPACE)) {
         if (textAreaDocument.getLength() == 0) {
            return;
         }
         try {
            textAreaDocument.remove(textAreaDocument.getLength() - 1, 1);
         } catch (BadLocationException e1) {
            e1.printStackTrace();
         }
      }
   }
} 
```

# c - 混乱解决程序在运行时崩溃

> ID：10264270
> 
> 赞同：0
> 
> 时间：2012-04-22T00:38:49.723
> 
> 标签：c, arrays, struct, io

我正在为我的 C 入门课程编写一个程序，该程序要求我根据教授给我们的字典文本文件编写一个程序来解决混乱的谜题（你知道，你在报纸上看到的那些字谜谜题）。它将字典中的单词按字母顺序排列，从文本文件（称为“jumble.txt”）中获取混乱，按字母顺序排列，然后运行字符串比较以找到匹配项。我已经编写了所有代码，但是当我尝试运行它时它立即崩溃，我不知道为什么。我想也许 Stackoverflow 用户可以在这里帮助我。

这是我的代码：

```
#include <stdio.h>
#include <strings.h>
#define MAX_WORD_LEN 6
#define MAX_NUM_WORDS 30000

typedef struct {
    char word[MAX_WORD_LEN+1];
    char sort[MAX_WORD_LEN+1];
} jumble_type;

void bubblesort(char letters[], int length);

int main () {
    int words, jumbles;
    int j, q;
    jumble_type list[MAX_NUM_WORDS];
    jumble_type list2[MAX_NUM_WORDS];

// Creating file pointers
FILE *ifp;
FILE *ifp2;

//Opens Jumble and dictionary files and reads the info from them
ifp = fopen("jumbledct.txt", "r");
ifp2 = fopen("jumble.txt", "r");

//Assigns the value of "words" to the first line of jumbledct.txt
fscanf(ifp, "%d", words);

//Assigns the value of "jumbles" to the first line of jumble.txt
fscanf(ifp2, "%d", jumbles);

// Reads the words from the dictionary into the "word" section of our
// list structure.
int i;
for (i = 0; i < words; i++){
    fscanf(ifp, "%s", &list[i].word);
    strcpy(list[i].sort, list[i].word);
    bubblesort(list[i].sort, strlen(list[i].sort));
    printf("%s\n", list[i].sort);
    }

//Reads from Jumble.txt
for (i = 0; i < jumbles; i++){
    fscanf (ifp2, "%s", &list2[i].word);
    strcpy(list2[i].sort, list2[i].word);
    bubblesort(list2[i].sort, strlen(list2[i].sort));
    //printf("%s\n", list2[i].sort);
    }

for(j=0;j<jumbles; j++){
        printf("JUMBLE PUZZLE # %d: %s\n", j+1, list2[j].word);

    int x=0;

for (q = 0; q < words; q++){

        if(strcmp(list2[j].sort, list[q].sort)==0){

            printf("%s\n", list[q].word);
            x++;
        }
}
 if (x == 0){
            printf("Sorry, this puzzle has no solutions. \n\n");
        }
        printf("\n");

}

return 0;
}

void bubblesort(char letters[], int length) {
char temp;
    int x, y;
    for(x = 0; x < length; x++){
        for (y = x; y < length; y++){
            if (letters[x] > letters[y]){
                temp = letters[y];
                letters[y] = letters[x];
            letters[x] = temp;
        }
    }
}
} 
```

提前感谢您的所有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T01:01:25.157

我的 C 有点生疏了，但 fscanf 函数的第三个参数不应该是地址（如 &words 和 &jumbles）吗？

# r - R cbind xts 对象导致添加/重复行

> ID：10264273
> 
> 赞同：2
> 
> 时间：2012-04-22T00:39:06.623
> 
> 标签：r, merge, duplicates, xts

我想将三个 xts 对象合并在一起`cbind`：

```
> OIH.tmp <-
structure(c(NA, 7.7, 5.1, -6.9, -2.6), index = structure(c(1325221200, 
1327986000, 1330491600, 1333080000, 1334894400), tzone = "", tclass = "yearmon"),
tclass = "Date", tzone = "", src = "yahoo", updated = structure(1335041586.83363,
class = c("POSIXct", "POSIXt")), .indexTZ = "", .indexCLASS = "yearmon",
.Dim = c(5L, 1L), .Dimnames = list(NULL, "OIH"), class = c("xts", "zoo"))

> SMH.tmp <-
structure(c(NA, 9.3, 2.9, 3.7, -5), index = structure(c(1325134800, 
1327986000, 1330491600, 1333080000, 1334894400), tzone = "", tclass = "yearmon"),
tclass = "Date", tzone = "", src = "yahoo", updated = structure(1335041596.41175,
class = c("POSIXct", "POSIXt")), .indexTZ = "", .indexCLASS = "yearmon",
.Dim = c(5L, 1L), .Dimnames = list(NULL, "SMH"), class = c("xts", "zoo"))

> SU.tmp <-
structure(c(NA, -9.4, -6.9, -2.3, -18.1, -22.6, 22.7, -6.1, -4, 
18, 4.1, -9.4, -4.7), index = structure(c(1304049600, 1306814400, 
1309406400, 1311912000, 1314763200, 1317355200, 1320033600, 1322629200, 
1325221200, 1327986000, 1330491600, 1333080000, 1334894400), tzone = "",
tclass = "yearmon"), tclass = "Date", tzone = "", src = "yahoo", 
updated = structure(1335041613.0055, class = c("POSIXct", "POSIXt")),
.indexTZ = "", .indexCLASS = "yearmon", .Dim = c(13L, 1L),
.Dimnames = list(NULL, "SU"), class = c("xts", "zoo"))

> cbind(OIH.tmp, SU.tmp, SMH.tmp)
          OIH    SU  SMH
Apr 2011   NA    NA   NA
May 2011   NA  -9.4   NA
Jun 2011   NA  -6.9   NA
Jul 2011   NA  -2.3   NA
Aug 2011   NA -18.1   NA
Sep 2011   NA -22.6   NA
Oct 2011   NA  22.7   NA
Nov 2011   NA  -6.1   NA
Dec 2011   NA    NA   NA
Dec 2011   NA  -4.0   NA
Jan 2012  7.7  18.0  9.3
Feb 2012  5.1   4.1  2.9
Mar 2012 -6.9  -9.4  3.7
Apr 2012 -2.6  -4.7 -5.0 
```

请注意，2011 年 12 月有一个额外的/重复的行，这是我不想要的。我可以想出一些杂乱无章的方法来实现我的最终目标（[这里](https://stackoverflow.com/questions/3699405/how-to-cbind-or-rbind-different-lengths-vectors-without-repeating-the-elements-o)），但我确信一定有更简单/优雅的东西——也许通过一个对象的索引合并。这看起来很简单，但我已经阅读了 cbind 和 merge 的文档，但没有找到简单的解决方案。

我实际上有一系列我想要组合/合并的对象。我只是用你在这里看到的 3 来说明问题。我实际上使用以下命令来构造返回系列：

```
oneMonthReturn <- do.call(merge, lapply(tickers.tmp, function(x) 
  round(ROC(Cl(to.monthly(get(x, myEnv))),1) * 100, 1) ))

> dput(tickers.tmp)
c("DJI", "GSPC", "IXIC", "GSPTSE", "XLE", "OIH", "XOP", "XLI", 
"XLB", "XLF", "XRT", "XLK", "SMH", "XLY", "XLP", "XLU", "XLV", 
"PPH", "MOO", "GLD", "SLV", "GDX", "TLT", "X", "SU", "TCK", "ACHN", 
"IDIX", "AGU")

> dput(oneMonthReturn)
structure(c(NA, -1.9, -1.2, -2.2, -4.5, -6.2, 9.1, 0.8, NA, 1.4, 
3.3, 2.5, 2, -1.4, NA, -1.4, -1.8, -2.2, -5.8, -7.4, 10.2, -0.5, 
NA, 0.8, 4.3, 4, 3.1, -2.1, NA, -1.3, -2.2, -0.6, -6.6, -6.6, 
10.6, -2.4, NA, -0.6, 7.7, 5.3, 4.1, -3, NA, -1, -3.7, -2.7, 
-1.4, -9.4, 5.3, -0.4, NA, -2.1, 4.1, 1.5, -2, -2, NA, -4.3, 
-2.3, 1.4, -10.8, -16, 17.5, 1.7, NA, -2.5, 2.2, 5.8, -4.3, -4, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 7.7, 5.1, -6.9, -2.6, 
NA, -4.5, -3.5, 5.7, -14.8, -22.5, 22.8, 2.4, NA, -4.6, 3.5, 
8.3, -4.1, -7.7, NA, -2.8, -1, -7.1, -6.8, -10.3, 13.4, 1.4, 
NA, -0.4, 7.1, 2.8, 0.5, -1.8, NA, -2.8, -1, -3.5, -7.3, -18.5, 
16, 0.2, NA, -3, 10.4, -0.6, 0, -1.3, NA, -3.4, -3.1, -3.6, -10.1, 
-12.5, 13.4, -5.2, NA, 1.5, 7.8, 4.9, 6.8, -3.9, NA, 1.5, -1.4, 
-0.2, -7.1, -7.1, 12.9, -1.3, NA, 1.3, 4.8, 6.5, 3.9, -0.5, NA, 
-1.1, -2.9, 0.4, -5.5, -3.5, 9.7, -1.5, NA, -0.7, 6, 6.9, 4.1, 
-3, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 9.3, 2.9, 3.7, -5, 
NA, -0.3, -0.6, -1.4, -5.4, -7.5, 11.3, -0.7, NA, 0.7, 5.7, 4.4, 
4.3, -1, NA, 2.5, -3.4, -1.3, 0.2, -4.1, 4.5, 2.7, NA, 1.8, -1.4, 
3.7, 2.5, 0.7, NA, 2.1, -1.2, -0.9, 2.1, -0.8, 3.6, 1, NA, 2.2, 
-3.7, 0.6, 0.4, -0.1, NA, 2.4, -1.6, -4, -2.1, -5.1, 5.6, 0.9, 
NA, 2.4, 3.1, 1.1, 3.9, -0.9, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, 0, 2.5, 3, 0.2, NA, -2.4, -3.1, 0.6, -3.6, -18.9, 14.6, 
-1.6, NA, -4.4, 8.5, 2.5, 0.4, -1.5, NA, -1.8, -2.5, 8.1, 11.6, 
-11.7, 5.7, 1.7, NA, -11.3, 10.8, -3, -1.3, -1.6, NA, -22.1, 
-10.5, 13.8, 4, -33.6, 14.6, -4.4, NA, -17.2, 18.1, 3.9, -6.7, 
-2, NA, -6.7, -6.3, 4.1, 9.9, -12.9, 6.4, 2.7, NA, -16.1, 9.3, 
-1.9, -11.2, -7.2, NA, 2.9, -2.7, 4, 8.9, 12.1, -4.2, 1.7, NA, 
2.8, -0.3, -2.9, -4.6, 4.2, NA, -3.4, -0.2, -14.1, -28.4, -31.3, 
14.2, 7.4, NA, -3.1, 13.2, -10.4, 7.6, -1.3, NA, -9.4, -6.9, 
-2.3, -18.1, -22.6, 22.7, -6.1, NA, -4, 18, 4.1, -9.4, -4.7, 
NA, -3.1, -3.5, -2.6, -10.9, -41.8, 31.8, -9.4, NA, -3.6, 18.4, 
-5.7, -11.4, 3.5, NA, 29.4, -0.7, -0.4, -18.8, -26.3, 29.2, 5.1, 
NA, 13.6, 37.5, -5.5, -9.2, -14.6, NA, -6.7, 5.1, 29, -14, -15.2, 
18.4, 23.6, NA, -2, 58.6, -12.8, -18.5, -16.9, NA, -2.7, -0.3, 
-0.4, -1.6, -25.4, 21.1, -16.2, NA, -4.2, 17.9, 5.9, 1.4, 0.2
), .Dim = c(14L, 29L), .Dimnames = list(NULL, c("DJI", "GSPC", 
"IXIC", "GSPTSE", "XLE", "OIH", "XOP", "XLI", "XLB", "XLF", "XRT", 
"XLK", "SMH", "XLY", "XLP", "XLU", "XLV", "PPH", "MOO", "GLD", 
"SLV", "GDX", "TLT", "X", "SU", "TCK", "ACHN", "IDIX", "AGU")), index = structure(c(1304049600, 
1306814400, 1309406400, 1311912000, 1314763200, 1317355200, 1320033600, 
1322629200, 1325134800, 1325221200, 1327986000, 1330491600, 1333080000, 
1334894400), tzone = "", tclass = "yearmon"), .indexTZ = "", .indexCLASS = "yearmon", tclass = c("POSIXct", 
"POSIXt"), tzone = "", src = "yahoo", updated = structure(1335041583.80238, class = c("POSIXct", 
"POSIXt")), class = c("xts", "zoo")) 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T01:00:04.470

这应该这样做（在更简单的一天，因为你没有发布`dput()`你的数据）：

```
 newvar <- merge(merge(OIH.tmp, SU.tmp), SMH.tmp) 
```

`merge.xts()`只需要两个参数，所以你必须重复调用它。默认聚合在这里“做正确的事”：

```
R> OIH <- xts(c(NA, 1:4), 
+             order.by=seq(as.Date("2011-12-01"), by="1 month", length=5))
R> SMH <- xts(c(NA, 1:4), 
+             order.by=seq(as.Date("2011-12-01"), by="1 month", length=5))
R> SU <- xts(c(NA, 1:12), 
+            order.by=seq(as.Date("2011-04-01"), by="1 month", length=13))
R> merge(OIH, merge(SU, SMH))
           OIH SU SMH
2011-04-01  NA NA  NA
2011-05-01  NA  1  NA
2011-06-01  NA  2  NA
2011-07-01  NA  3  NA
2011-08-01  NA  4  NA
2011-09-01  NA  5  NA
2011-10-01  NA  6  NA
2011-11-01  NA  7  NA
2011-12-01  NA  8  NA
2012-01-01   1  9   1
2012-02-01   2 10   2
2012-03-01   3 11   3
2012-04-01   4 12   4
R> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T13:04:01.820

您致电的问题`to.monthly`，而不是`merge.xts`（正如我最初认为的那样）。此解决方案不适用于 CRAN 上当前的 xts 版本，但适用于 R-forge 的 613 或更高版本。

问题的出现是因为`to.monthly`该系列在实际指数中的最后一次对齐，而不是该期间的理论最后一次；并且默认情况下不会删除索引的时间分量。在您的情况下，2011-12 的最后一次是 2011-12-29`SMH`和 2011-12-30 其他两个对象。

如果您设置`drop.time=TRUE`（同样，这仅适用于 xts 的 R-forge 版本），结果如您所料：

```
oneMonthReturn <- do.call(merge, lapply(tickers.tmp, function(x) 
  round(ROC(Cl(to.monthly(get(x, myEnv),drop.time=TRUE)),1) * 100, 1) )) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T02:20:08.067

对于具有多列的多重合并（使用 Dirk 的数据），您可以使用该`Reduce`函数。我将用法封装在一个函数中，您可以对其进行调整以满足您的需求。正确回答这个问题的功劳应该归功于 Dirk，因为他已经正确回答了，这只是一种替代方法，因为我在星期六晚上很无聊 :) 射击，我什至不知道 xts 是干什么用的。

```
multi.xts.merge <- function(listOguys) {
    dat <- Reduce(function(x, y) {merge.xts(x, y)}, listOguys)
    names(dat) <- as.character(substitute(listOguys))[-1]
    return(dat)
}

multi.xts.merge(list(OIH, SU, SMH)) 
```

请注意，您必须为此函数提供一个列表

# android - Viewpager 滚动完成事件

> ID：10264277
> 
> 赞同：8
> 
> 时间：2012-04-22T00:40:17.633
> 
> 标签：android

我有一个显示文本视图的 viewpager。我上面有标题布局。我想要的是在用户单击屏幕时隐藏或显示此标题。但不是在滚动发生时。我尝试了 ViewPager.onPageChangeListener。但没有成功。我需要的是如何知道页面之间的交换何时完成。onPageScrollStateChange 没有帮助我创建一个实例变量来保存状态并在此方法调用时不断更新它，因此如果页面正在滚动但没有成功，我可以在我的 onclick 侦听器中使用它到现在

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2017-01-27T09:34:53.013

```
 mViewPager.addOnPageChangeListener(new ViewPager.OnPageChangeListener() {
        @Override
        public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
        }
        @Override
        public void onPageSelected(int position) {
        }
        @Override
        public void onPageScrollStateChanged(int state) {
            if(ViewPager.SCROLL_STATE_IDLE == state){
                //Scrolling finished. Do something.
            }
        }
    }); 
```

# objective-c - NSNumber 如何在磁盘上表示？

> ID：10264280
> 
> 赞同：3
> 
> 时间：2012-04-22T00:40:52.687
> 
> 标签：objective-c

不知道为什么 Objective-C 决定使用 NSNumber 而不是 float、double 等。这种类型在磁盘上是如何表示的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-22T01:30:48.967

`NSNumber`与[免费](http://developer.apple.com/library/ios/#documentation/CoreFoundation/Conceptual/CFDesignConcepts/Articles/tollFreeBridgedTypes.html)`CFNumber`桥接。在最近的 Core Foundation 实现中，`CFNumber`是一个标记指针。这使它可以被视为一个对象，但没有对象的所有开销。相反，该值被编码在对象指针中（实际上不是指针）。

请参阅[Lion 中的标记指针和快速路径 CFNumber 整数](http://objectivistc.tumblr.com/post/7872364181/tagged-pointers-and-fast-pathed-cfnumber-integers-in)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-22T00:49:51.820

`NSNumber`是 的后代`NSObject`，所以它可以去任何一个`id`可以去的地方：`NSarray`, `NSDictionary`, 等等。诸如`int`and之类的原语`double`不能进入这些类，因为它们不继承自`NSObject`，因此不能参与集合等。

如果我猜测`NSNumber`. 我会说这是一个联合和一个类型选择器字段。然而，封装之美让我在`NSNumber`不知道关于其表示的第一件事的情况下成功编程（并且不会错过这些知识）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T04:53:08.133

要记住的一件事是，Objective-C 是 C 的超集，因此他们没有决定使用原始类型（浮点、双精度等）来代替它们，而是`NSNumber` **在****它们之外**使用。如果您不需要 的功能`NSNumber`，则只需使用原始类型并节省创建/销毁对象的开销。iOS 中的许多函数（尤其是数组类型函数）**仅**适用于**对象**（ 的后代`NSObject`）。因此，如果您想将某种类型的数字传递给这些函数之一，您需要它的对象表示。这就是`NSNumber`进来的地方。

引用文档`NSNumber`：

> NSNumber 是 NSValue 的子类，它提供任何 C 标量（数字）类型的值。它定义了一组专门用于将值设置和访问为有符号或无符号 char、short int、int、long int、long long int、float 或 double 或作为 BOOL 的方法。（请注意，number 对象不一定保留创建它们的类型。）它还定义了一个 compare: 方法来确定两个 NSNumber 对象的顺序。

请注意，实际值在内部存储为整数或浮点数（在 Jay 描述的标记指针或对象中的联合中），具体取决于您存储的值。了解这一点很重要，因为如果您尝试存储“32.1”之类的数字，它将存储为浮点数，当您检索它时，您很可能会得到“32.09999999999999”之类的内容。

至于将其存储到磁盘，如果您需要这样做，那么您通常将其存储`encodeWithCoder`并检索它，`initWithEncoder`然后将其转换为旨在保存到磁盘并稍后读回的格式。

# java - java中的im2bw matlab？

> ID：10264285
> 
> 赞同：0
> 
> 时间：2012-04-22T00:42:27.537
> 
> 标签：java, matlab, image-processing

java中的im2bw matlab？

因为我可以在 java **matlab**函数中执行此操作，因为我可以创建一个函数来执行此过程，或者是否已经执行此过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T05:26:11.097

im2bw 只做一个简单的阈值处理，因此除非您已经有一个正在使用的库，否则您可以编写几行代码来比导入库更快。

代码看起来类似于我在下面编写的代码，并进行了修改以处理您用于存储数据的任何结构。

```
public static final int WIDTH = 640;
public static final int HEIGHT = 480;
public static final int THRESHOLD = 0.5;

public static void main(String args[])
{
  float imInput[][] = new float[WIDTH][HEIGHT];
  boolean imThresh[][]; 
  imThresh = im2bw(imInput);
}

public static boolean[][] im2bw(float input[][])
{
  boolean output[][] = new boolean[WIDTH][HEIGHT];

  for(int i = 0; i < WIDTH; i++){
    for(int j = 0; j < HEIGHT; j++){
      output[i][j] = input[i][j] > THRESHOLD;
    }
  }
  return(output);
} 
```

# java - 来自多线程程序的随机调用百分比

> ID：10264290
> 
> 赞同：-2
> 
> 时间：2012-04-22T00:43:02.457
> 
> 标签：java, multithreading

下面是我的文本文件 test1.txt。

```
AutoRefreshStoreCategories  70%  1  16  2060    10053   10106   10111
CrossPromoEditItemRule      20%  1  10107   10108   10109
CrossPromoManageRules       10%  1  10107   10108   10109 
```

我想编写一个多线程程序，它可以逐行读取文件并通过在空格上拆分来打印一行中的每个数字（我已经完成了这部分）。在上面的文件中，我在命令名称旁边指定了一些百分比，第一行的示例，它在**AutoRefreshStoreCategories**旁边有 70% 。所以我希望 70% 的随机调用都转到第一行。以同样的方式第二行有 20%，所以 20% 的随机调用转到第二行。最后，对于第三行，10% 的随机调用转到第三行。对于每一行，基本上我想打印它们在每一行中的数字。

所以我在下面写了一个多线程程序，但那个程序只是打印每一行的数字，它没有考虑随机调用的百分比。我不确定我可以有什么逻辑，以便通过使用该多线程程序，我可以指定这么多百分比的随机调用转到第一行、第二行或第三行。任何帮助将不胜感激。

```
 public class ExcelRead {

    private static Integer threadSize = 4;

    public static void main(String[] args) {

        for (int i = 1; i <= threadSize; i++) {
            new Thread(new ThreadTask(i)).start();
        }
    }
}

class ThreadTask implements Runnable {
    private int id;

    public ThreadTask(int id) {
        this.id = id;
    }

    public synchronized void run() {
        BufferedReader br = null;

        try {
            String sCurrentLine;

            br = new BufferedReader(new FileReader("C:\\testing\\test1.txt"));

            while ((sCurrentLine = br.readLine()) != null) {
                String[] s = sCurrentLine.split("\\s+");
                for (String split : s) {
                if(split.matches("\\d*"))
                System.out.println(split);
            }
        }

        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            try {
                if (br != null)br.close();
            } catch (IOException ex) {
                ex.printStackTrace();
            }
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T01:00:01.930

> 我不确定我可以有什么逻辑，以便通过使用该多线程程序，我可以指定这么多百分比的随机调用转到第一行、第二行或第三行。任何帮助将不胜感激。

因为，这似乎是家庭作业（或自学），我建议您**考虑一下**如果您假装自己是计算机，您将如何做到这一点。一部分是阅读`Random`该类的 javadoc，并找出如何映射随机`int`值以适应您的百分比范围。

* * *

作为一个脚注，我对您通过使其成为多线程程序来实现的目标感到困惑。也许你可以解释一下。在我看来，它（目前）只是让一个简单的任务变得更复杂......没有性能优势。

# java - 请求的资源 (/) 不可用

> ID：10264291
> 
> 赞同：0
> 
> 时间：2012-04-22T00:43:18.210
> 
> 标签：java, spring-mvc

我刚刚开始学习 Spring MVC 3，我一开始就遇到了运行简单的 hello world 程序的问题

我正在尝试启动并运行[它](http://blog.springsource.org/2011/01/04/green-beans-getting-started-with-spring-mvc/)，但由于某种原因我不能

我经常收到这个错误

```
type Status report

message /

description The requested resource (/) is not available. 
```

这是我的`servlet-context.xml`文件

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <!-- DispatcherServlet Context: defines this servlet's request-processing infrastructure -->

    <!-- Enables the Spring MVC @Controller programming model -->
    <annotation-driven />   

    <!-- Handles HTTP GET requests for /resources/** by efficiently serving up static resources in the ${webappRoot}/resources directory -->
    <resources mapping="/resources/**" location="/resources/" />

    <!-- Resolves views selected for rendering by @Controllers to .jsp resources in the /WEB-INF/views directory -->
    <beans:bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <beans:property name="prefix" value="/WEB-INF/views/" />
        <beans:property name="suffix" value=".jsp" />
    </beans:bean>

    <context:component-scan base-package="com.test.test" />

</beans:beans> 
```

`web.xml`文件

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

    <!-- The definition of the Root Spring Container shared by all Servlets and Filters -->
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/root-context.xml</param-value>
    </context-param>

    <!-- Creates the Spring Container shared by all Servlets and Filters -->
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <!-- Processes application requests -->
    <servlet>
        <servlet-name>appServlet</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/spring/appServlet/servlet-context.xml</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>appServlet</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

</web-app> 
```

家庭控制器.java

包 com.test.test；

```
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;

@Controller
public class HomeController {

    @RequestMapping(value = "/")
    public String home() {      
        return "WEB-INF/views/home.jsp";
    }

} 
```

我正在使用Tomcat 7。

有谁知道这个错误是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T01:09:26.777

@Tenelope 您不需要返回，`"WEB-INF/views/home.jsp";`您可以`"home"`在 servlet-context 中配置它时返回：

```
 <beans:bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <beans:property name="prefix" value="/WEB-INF/views/" />
        <beans:property name="suffix" value=".jsp" />
    </beans:bean> 
```

我对您的建议是下载 spring 源代码（Eclipse 之类的 IDE）：

[http://www.springsource.org/springsource-tool-suite-download](http://www.springsource.org/springsource-tool-suite-download)

下载后，你可以简单地去`File > New > Spring Template Project > Spring MVC project`

完成创建项目后，将为您创建工作模板项目（结构化项目、示例控制器文件、示例视图、pom.xml 等）。包括`"/"`您正在谈论的示例。您可以构建它并将其部署到 tomcat 或其他任何东西。

这样你已经得到了工作示例，你可以从那里获取它。

顺便提一句。看一下这个 ：

[https://github.com/SpringSource/spring-mvc-showcase/blob/master/MasteringSpringMVC3.pdf?raw=true](https://github.com/SpringSource/spring-mvc-showcase/blob/master/MasteringSpringMVC3.pdf?raw=true)

足以让您开始使用 Spring MVC。

# osx-lion - MonoDevelop 2.8“显示完成窗口”不再可靠地工作。怎么了？

> ID：10264292
> 
> 赞同：0
> 
> 时间：2012-04-22T00:43:20.250
> 
> 标签：osx-lion, intellisense, monodevelop

我在 Lion 上运行 MonoDevelop 2.8。

今天代码完成突然停止工作。过了一会儿，我发现它不再可靠地工作了。

当我键入一个点时，通常会出现该对象的可用方法，但大多数情况下不会再出现这种情况。但是当我在一行的开头键入对象名称时，代码完成会再次工作一分钟左右。

IE

```
string s = "Hello world."
string t = s. 
```

此时应该会出现完成窗口，但不会出现。但是，当而不是字符串 t = s.etc。我以“s”开始一行。出现代码完成窗口。

```
string s = "Whatever"
s. 
```

当我按下键盘快捷键（ctrl-space）来完成代码时，我注意到编辑菜单会变成蓝色一秒钟，因此显然 MonoDevelop 收到了实际命令，但没有做任何事情。

我将 MonoDevelop 从 2.8.6（我认为）更新到 2.8.8，但行为没有改变。前几天不是这样的，今天才开始发生。

有任何想法吗？

更新：我刚刚尝试在同一台计算机上使用新创建的帐户运行 MonoDevelop，并且代码完成工作。必须是特定于用户的配置文件中的内容。我看看能不能把他们全都追下来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T20:36:49.853

尝试清除所有 pidb 文件。它们位于您的项目目录以及您的主目录中。

$HOME/Library/Caches/MonoDevelop-2.8/CodeCompletionData/

# php - 传递 crontab 一个变量并从 PHP 中读取它？

> ID：10264296
> 
> 赞同：8
> 
> 时间：2012-04-22T00:44:11.517
> 
> 标签：php, cron

我创建了一个 crontab 规则：

`* * * * * php /my/directory/file.php`

我想从这个 crontab 传递一个要在 file.php 中使用的变量。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-22T00:49:28.097

请记住，从 shell 运行 PHP 与在 Web 服务器环境中运行它是完全不同的。如果您以前没有做过命令行编程，您可能会遇到一些意外。

也就是说，将信息传递到命令中的常用方法是将其放在命令行上。如果你这样做：

```
 php /my/directory/file.php "some value" "some other value" 
```

然后在您的脚本中，`$argv[1]`将设置为`"some value"`并将`$argv[2]`设置为`"some other value"`. （`$argv[0]`将设置为`"/my/directory/file.php"`）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-22T00:49:32.557

当您从命令行执行 PHP 脚本时，您可以访问变量 count`$argc`和数组中的实际值`$argv`。一个简单的例子。

考虑**test.php**

```
<?php
printf("%d arguments given:\n", $argc);
print_r($argv); 
```

执行此使用`php test.php a b c`：

```
4 arguments given:
Array
(
    [0] => test.php
    [1] => a
    [2] => b
    [3] => c
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T00:58:16.500

我可以添加`$argv`您可能想要使用的更复杂的命令行参数处理的答案`getopt()`：[http ://www.php.net/manual/en/function.getopt.php](http://www.php.net/manual/en/function.getopt.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-19T10:20:12.960

以上两种方法都不适合我。我在主机的共享服务器上运行 cron。cron 任务是使用类似 cPanel 的界面创建的。命令行调用 PHP 并传递脚本名称和几个参数。

这就是 cron 命令行的外观：

`php7.2 /server/path/to/my/script/my-script.php "test.tst" "folder=0"`

上面的答案都不`$argv`适用于我的情况。

没有人告诉您必须`$argv`在访问 CLI 参数之前声明为全局的。这在官方 PHP 手册中都没有提到。

好吧，可能必须为`$argv`与服务器一起运行的脚本声明全局唯一。也许在本地环境中，在 CLI 中运行脚本`$argv`不需要被声明为全局的。当我测试它时，我在这里发布。

但就我而言，工作配置是：

```
global $argv;
echo "argv0: $argv[0]\n\r"; // echoes: argv0: /server/path/to/my/script/my-script.php
echo "argv1: $argv[1]\n\r"; // echoes: argv1: test.tst
echo "argv2: $argv[2]\n\r"; // echoes: argv2: folder=0 
```

我用`$_SERVER['argv']`超全局数组得到了相同的结果。可以像这样使用它：

```
 $myargv = $_SERVER['argv'];
 echo $myargv[1]; // echoes: test.tst 
```

希望对某人有所帮助。

# php - 为什么我的 wordpress 管理员无法在本地工作

> ID：10264302
> 
> 赞同：0
> 
> 时间：2012-04-22T00:44:40.940
> 
> 标签：php, wordpress

我将我的 Wordpress 网站从它的实时位置移动到我的本地服务器，并确保在数据库中正确更改了 URL。

该站点运行顺利，我可以很好地浏览所有页面，但是当我尝试访问管理页面时，屏幕完全空白。我可以进入登录页面，它会读取我的凭据，但是当它尝试让我登录时，什么也没有出现。

有什么我想念的吗？

我正在使用 MAMP，在 Apache 上运行。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T00:50:41.263

一定是发生了某种 PHP 错误；检查您的日志或在站点的根目录中创建一个空白文件，`PHP_errors.log`并将以下内容添加到您的`.htaccess`文件中

```
# enable PHP error logging
php_flag  log_errors on
php_value error_log  /path/to/your/site/PHP_errors.log 
```

然后刷新导致问题的页面并检查该日志现在是否有内容。可能仍有一个 URL 指向实时服务器，而不是您的本地服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T08:54:59.033

如果您的 Wordpress 文件中有 PHP 错误，您可以转到 wp-config 并打开调试模式。然后，这将为您显示所有 PHP 错误。

搜索

定义（'WP_DEBUG'，假）；

注释掉这一行并将其替换为。

定义（'WP_DEBUG'，真）；定义（'WP_DEBUG_LOG'，真）；

# asp.net-mvc - smtp4dev - 从远程计算机访问

> ID：10264304
> 
> 赞同：2
> 
> 时间：2012-04-22T00:45:00.753
> 
> 标签：asp.net-mvc, email, smtpclient

是否可以从远程计算机访问 smtp4dev。我在本地使用 smtp4dev 进行开发，以便在我的 ASP.NET MVC 3 应用程序发送电子邮件时查看电子邮件。如果能够在测试服务器上做同样的事情，让我或同事能够查看远程测试服务器上生成的消息，那就太好了。

如果 smtp4dev 做不到，还有其他工具可以吗？我知道可以通过 ASP.NET 配置将文件输出到共享，但我发现 smtp4dev 是一种更加用户友好的体验......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T01:30:17.577

听起来您需要从项目的托管实例访问本地 smtp4dev 服务。你有几个选择：

1.  就个人而言，我使用 gmail 帐户来执行此操作 - 您每天限制为 100 封电子邮件。

2.  端口转发您的本地 smtp4dev 服务 - 找到它正在运行的计算机的 IP 地址、服务运行的端口（SMTP 端口），转到您的路由器并添加端口转发规则/虚拟服务器。可能 smtp4dev 只绑定到 loopback 接口，在这种情况下端口转发将不起作用。您还应该确保为端口或程序添加了防火墙例外。

3.  您的主机可能已经有您可以使用的 SMTP 服务器

4.  您可以使用公共 SMTP 服务器 - mail.{someisp}.com

无论如何，如果您更具体一些，我们将能够为您提供进一步的帮助。

# c# - C# 错误：“非静态字段、方法或属性需要对象引用”

> ID：10264308
> 
> 赞同：42
> 
> 时间：2012-04-22T00:46:01.157
> 
> 标签：c#, non-static

我有两个类，一个用于定义算法参数，另一个用于实现算法：

**第一类（算法参数）：**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace VM_Placement
{
    public static class AlgorithmParameters
    {
        public static int pop_size = 100;
        public static double crossover_rate = 0.7;
        public static double mutation_rate = 0.001;

        public static int chromo_length = 300;
        public static int gene_length = 4;
        public static int max_allowable_generations = 400;

        static Random rand = new Random();
        public static double random_num = rand.NextDouble();
    }
} 
```

**第 2 类（实现算法）：**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace VM_Placement
{
    public class Program
    {
        public struct chromo_typ
        {
            public string   bits;
            public float    fitness;

            //public chromo_typ(){
            // bits = "";
            // fitness = 0.0f;
            //}
            chromo_typ(string bts, float ftns)
            {
                bits = bts;
                fitness = ftns;
            }
        };

        public static int GetRandomSeed()
        {
            byte[] bytes = new byte[4];
            System.Security.Cryptography.RNGCryptoServiceProvider rng =
              new System.Security.Cryptography.RNGCryptoServiceProvider();
            rng.GetBytes(bytes);
            return BitConverter.ToInt32(bytes, 0);
        }

        public string GetRandomBits()
        {
            string bits="";

            for (int i = 0; i < VM_Placement.AlgorithmParameters.chromo_length; i++)
            {
                if (VM_Placement.AlgorithmParameters.random_num > 0.5f)
                    bits += "1";
                else
                    bits += "0";
            }
            return bits;
        }

        public static void Main(string[] args)
        {
            Random rnd = new Random(GetRandomSeed());

            while (true)
            {
                chromo_typ[] Population = new chromo_typ[VM_Placement.AlgorithmParameters.pop_size];
                double Target;

                Console.WriteLine("\n Input a target number");
                Target = Convert.ToDouble(Console.ReadLine());

                for (int i = 0; i < VM_Placement.AlgorithmParameters.pop_size; i++)
                {
                    Population[i].bits = GetRandomBits();
                    Population[i].fitness = 0.0f;
                }
            }
        }
    }
} 
```

我`Population[i].bits = GetRandomBits();`在`Main()`.

错误是：

> 非静态字段、方法或属性“VM_Placement.Program.GetRandomBits()”需要对象引用

我错过了什么吗？

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-04-22T00:52:56.703

该`Main`方法是静态的。您不能从静态方法调用非静态方法。

```
GetRandomBits() 
```

不是静态方法。要么你必须创建一个实例`Program`

```
Program p = new Program();
p.GetRandomBits(); 
```

或制作

`GetRandomBits()`静止的。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-22T00:49:14.710

看起来你想要：

```
public static string GetRandomBits() 
```

如果没有`static`，您将需要一个对象才能调用该`GetRandomBits()`方法。但是，由于 的实现`GetRandomBits()`不依赖于任何`Program`对象的状态，因此最好声明它`static`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-22T00:50:00.217

该`Main`方法在类内部是静态的`Program`。您不能从静态方法内部调用实例方法，这就是您收到错误的原因。

要修复它，您只需要将您的`GetRandomBits()`方法也设为静态。

# php - PHP 子目录

> ID：10264311
> 
> 赞同：-2
> 
> 时间：2012-04-22T00:47:46.553
> 
> 标签：php, subdirectory

我在目录中有我的 php `/srv/www/site`，它解析为`www.domain.com/site`.

我怎样才能拉出`site/`来做一个类型的`BASE_URL`？

我想做类似的事情：`BASE_URL to == "http://www.domain.com/site"`。

我知道怎么做`define`，那不是问题。问题是我希望我的脚本安装在站点上的任何文件夹中，并且知道它是基本文件夹。

**更新**

这个脚本基本上会被调用`http://www.anyonesdomain.com/any/possible/sub/directory/index.php`，在这种情况下，`BASE_URL`将是`http://www.anyonesdomain.com/any/possible/sub/directory`.

希望这更有意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T01:26:07.957

解析**PHP_SELF**服务器变量，例如：

```
$SCRIPT_LOCATION = substr($_SERVER['PHP_SELF'], 0, strrpos($_SERVER['PHP_SELF'], "/")); 
```

# java - Java - 如果语句 A 等于 B 加或减 2

> ID：10264313
> 
> 赞同：9
> 
> 时间：2012-04-22T00:48:37.810
> 
> 标签：java, if-statement

我有一个似乎很容易解决的问题，但是我不确定语法。

我需要运行 if/else 语句，但我不确定如何正确设置条件。

错误代码：

```
if (float_a = float_b or is within +-2 of it) {
    do this
}
else {
    do that
} 
```

完成此任务的最简单方法是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-22T00:51:35.253

您可以使用`Math.abs`：

```
if (Math.abs(float_a-float_b) <= 2) { ... } 
```

这意味着*“如果 a 和 b 之间的绝对差在 2 以内……”*。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-22T00:52:36.643

```
if(Math.abs(float_a - float_b) <= 2) {
    //do this
}
else {
    //do that
} 
```

# css - 如何使用列表样式对齐？

> ID：10264317
> 
> 赞同：0
> 
> 时间：2012-04-22T00:49:28.310
> 
> 标签：css, alignment

嘿，我正在尝试将事物彼此相邻并在彼此下方对齐

这是我正在使用的CSS。

```
/* title styles */
#wpp-post-title {
 float:right;
 width:100px 

 }

 /* thumbnail styles */
 #wpp-thumbnail {
    float:left;
    width:80px;
 } 
```

它显示为这样

![在此处输入图像描述](../Images/972f060dc9400fea2c6c4cec8464031c.png)

但我希望它像这样显示

![在此处输入图像描述](../Images/49f2de5e932af4726d7d1ee9fd52396e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T00:54:54.007

使用类而不是 id 并查看 clear 属性[http://www.w3schools.com/cssref/pr_class_clear.asp](http://www.w3schools.com/cssref/pr_class_clear.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T01:04:42.037

像这样的东西可以工作：

**jsFiddle 演示**：http: [//jsfiddle.net/vPvbn/](http://jsfiddle.net/vPvbn/)

**CSS**：

```
ul {
    margin: 0;
    padding: 0;
    list-style-type: none;
}
li {
    display: block;
    height: 80px;
    margin: 10px 0;
    padding: 20px 0 0 85px;
} 
```

**HTML**：

```
<ul>
    <li style="background: url(http://i.imgur.com/9M7yb.jpg) no-repeat 0 0; padding-right: 10px;">LEAKED: The Winner of RuPaul's Drag Race Season 4 Is...</li>
    <li  style="background: url(http://i.imgur.com/eJxiy.jpg) no-repeat 0 0; padding-right: 10px;">WATCH: Rihanna's 'Battlefield' Movie Trailer.</li> 
</ul> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T00:54:46.957

```
/* title styles */
#wpp-post-title {
 width:100px 
 display: inline-block;
 .display: inline;
 .zoom:1;

 }

 /* thumbnail styles */
 #wpp-thumbnail {
     display: inline-block;
     .display: inline;
     .zoom:1;
    width:80px;
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T00:55:03.910

没有看到你的 HTML，我只能猜测，但我最好的猜测是在你的 CSS 中添加以下样式：

```
/* You will probably need to change "li" to something more specific, lest it
   break your existing list styles. */
li {
    overflow:hidden;
} 
```

这将强制列表项将自身包裹在您的浮动位周围。浮动的元素不会改变父容器的高度，所以因为里面的所有东西`<li>`都是浮动的，所以你的`<li>`元素的高度是 0px，你会看到你看到的奇怪行为。`overflow: hidden`通过强制 确认 和 的高度来解决此`<li>`问题。`#wpp-thumbnail``#wpp-post-title`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-22T00:57:25.407

给出`#wpp-post-title`一个等于缩略图的高度应该可以解决问题，此时浏览器会根据其中的文本自动确定 div 的高度。

另外，确保两个 div 都被赋予了`display: inline-block`属性

# python - 为什么阅读 Python 中的一行不能只给我该行的内容？

> ID：10264320
> 
> 赞同：0
> 
> 时间：2012-04-22T00:49:44.790
> 
> 标签：python

我无法理解函数`correct`中的变量。如果变量没有被索引`next_block(the_file)`，程序将无法正常工作。`correct`因此，`correct[0]`。所以我的问题是，如果它没有被索引，为什么它不能正常工作，如果一个整数不可下标，为什么它甚至可以被索引。

它使用的文本文件是这样的：

```
An Episode You Can't Refuse
On the Run With a Mammal
Let's say you turn state's evidence and need to "get on the lamb." /If you wait too long, what will happen?
You'll end up on the sheep
You'll end up on the cow
You'll end up on the goat
You'll end up on the emu
1
A lamb is just a young sheep.
The Godfather Will Get Down With You Now
Let's say you have an audience with the Godfather of Soul. /How would it be smart to address him?
Mr. Richard
Mr. Domino
Mr. Brown
Mr. Checker
3
James Brown is the Godfather of Soul. 
```

这是代码：

```
# Trivia Time
# Trivia game that reads a plain text file

def open_file(file_name, mode):
    """Open a file."""
    try:
        the_file = open(file_name, mode)
    except(IOError), e:
        print "Unable to open the file", file_name, "Ending program.\n", e
        raw_input("\n\nPress enter to exit..")
        sys.exit()
    else:
        return the_file

def next_line(the_file):
    """Return the next line from the trivia file, formatted."""
    line = the_file.readline()
    line = line.replace("/", "\n")
    return line

def next_block(the_file):
    """Return the next block of data from the trivia file."""
    category = next_line(the_file)

    question = next_line(the_file)

    answers = []
    for j in range(4):
        answers.append(next_line(the_file))

    correct = next_line(the_file)
    if correct:
        correct = correct[0]

    explanation = next_line(the_file)

    return category, question, answers, correct, explanation

def welcome(title):
    """Welcome the player and get his/her name."""
    print "Welcome to Trivia Challenge!\n"
    print title, "\n"

def main():
    trivia_file = open_file("trivia.txt", "r")
    title = next_line(trivia_file)
    welcome(title)
    score = 0
    # get first block
    category, question, answers, correct, explanation = next_block(trivia_file)
    while category:
        # ask a question
        print category
        print question
        for j in range(4):
            print j + 1, "-", answers[j]
        # get answer
        answer = raw_input("What's your answer?: ")
        # check answer
        if answer == correct:
            print "\nRight!",
            score = score + 1
        else:
            print "\nWrong.",
            print explanation
            print "Score:", score, "\n\n"
        # get next block
        category, question, answers, correct, explanation = next_block(trivia_file)
    trivia_file.close()
    print "That was the last question!"
    print "Your final score is:", score

main()
raw_input("\n\nPress the enter key to exit.") 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T00:54:44.927

之后`correct = next_line(the_file)`，`correct`是一个字符串之类的`'1\n'`。`correct[0]`然后为您获取一个类似 的字符串`'1'`，稍后您将其与 的结果进行比较，该结果`raw_input`不包括 a `\n`。所以你需要做`[0]`的是让第一个字符出来。

使用它可能会更好`.strip()`，因为那样它可能适用于不是单个字符的答案（如果您将游戏更改为支持 10 多个答案，或者具有不同名称的答案），它会是更明显的是发生了什么，它会忽略末端的空格，这在文件或用户的输入中绝对无关紧要。

# c# - 如何解析 XML 数据以检索子节点值？

> ID：10264323
> 
> 赞同：2
> 
> 时间：2012-04-22T00:49:55.820
> 
> 标签：c#, xml, silverlight, xml-parsing

我确实有一个 xml 文件位于：[http ://api.wunderground.com/api/adaebe40743a9ca6/geolookup/conditions/forecast/q/India/Pilani.xml](http://api.wunderground.com/api/adaebe40743a9ca6/geolookup/conditions/forecast/q/India/Pilani.xml)

现在我想在`temp_c, relative_humidity, wind_string`.

为此，我创建了一个类 WeatherReader.cs 作为

```
using System;
using System.Net;
using System.Collections.Generic;
using System.Linq;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Ink;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;
using System.Xml;

namespace CNGS
{
    public class WeatherReader
    {   public int Temp;
        public string Humidity;
        public string Wind;
        public string place;

        private void PopulateWeatherData()
        {
            XmlReader reader = XmlReader.Create("http://api.wunderground.com/api/adaebe40743a9ca6/geolookup/conditions/forecast/q/India/Pilani.xml");

            reader.MoveToContent();            

            while (reader.Read())
            {
                if (reader.LocalName == "temp_c")
                {
                    Temp = Convert.ToInt32(reader.Value);
                }
if (reader.LocalName == "relative_humidity")
                {
                    Humidity=reader.Value;
                }
if (reader.LocalName == "wind_string")
                {
                    Wind= reader.Value;
                }

            }

            reader.Close();
        }
    }
} 
```

**是否正确，它会获取所需的值吗？**

现在，因为我想在 silverlight 页面中显示此信息。我试图创建类weatherreader的对象

```
WeatherReader Weath = new WeatherReader(); 
```

*但我不知道如何获取温度、风值等？没有什么像`int tmp = Weath.Temp`在工作。*

请帮忙

我想获取天气数据，然后在 MainPage 上的 silverlight 控件中使用它，以显示实时天气报告。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T01:24:40.357

不，这不是您使用 an`XmlReader`来阅读文档的方式。它比这复杂得多，事实上……太复杂了。

为此，您最好使用 LINQ to XML，因为它会简单得多。

```
var xml = "http://api.wunderground.com/api/adaebe40743a9ca6/geolookup/conditions/forecast/q/India/Pilani.xml";
var doc = XDocument.Load(xml);
var currentObservation = doc.Element("response").Element("current_observation");
var temp = (int)currentObservation.Element("temp_c");
var humidity = (string)currentObservation.Element("relative_humidity");
var wind = (string)currentObservation.Element("wind_string"); 
```

如果您想使用`XmlReader`，那么您必须执行以下操作：

```
var xml = "http://api.wunderground.com/api/adaebe40743a9ca6/geolookup/conditions/forecast/q/India/Pilani.xml";
using (var reader = XmlReader.Create(xml))
{
    var temp = default(int);
    var humidity = default(string);
    var wind = default(string);

    string elementName = null;
    while (reader.Read())
    {
        switch (reader.NodeType)
        {
        case XmlNodeType.Element:
            elementName = reader.Name;
            break;
        case XmlNodeType.Text:
            switch (elementName)
            {
            case "temp_c":
                temp = reader.ReadContentAsInt();
                break;
            case "relative_humidity":
                humidity = reader.ReadContentAsString();
                break;
            case "wind_string":
                wind = reader.ReadContentAsString();
                break;
            }
            elementName = null;
            break;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T03:54:27.570

这将是我的版本：

```
XDocument doc = XDocument.Load("http://api.wunderground.com/api/adaebe40743a9ca6/geolookup/conditions/forecast/q/India/Pilani.xml");
var v = from d in doc.Element("response").Elements("current_observation") select new { Temp = d.Element("temp_c").Value, Humedity = d.Element("relative_humidity").Value, Wind = d.Element("wind_string").Value };
foreach (var c in v)
{
    Console.WriteLine(c.Temp);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T04:27:20.343

请试试这个，它不是最优雅的解决方案，但应该可以。

```
using System;
using System.Net;
using System.Collections.Generic;
using System.Linq;
using System.Xml;

namespace CNGS
{
    public class WeatherReader
    {
        public int Temp;
        public string Humidity;
        public string Wind;
        public string place;

        public void PopulateWeatherData()
        {
            XmlReader reader = XmlReader.Create("http://api.wunderground.com/api/adaebe40743a9ca6/geolookup/conditions/forecast/q/India/Pilani.xml");

            bool IsNextTemp = false;
            bool IsHumidityTemp = false;
            bool IsWindTemp = false;

            reader.MoveToContent();

            while (reader.Read())
            {
                switch (reader.NodeType)
                {
                    case XmlNodeType.Element: // The node is an element.
                        if (reader.Name == "temp_c")
                        {
                            IsHumidityTemp = false;
                            IsWindTemp = false;
                            IsNextTemp = true;
                        }
                        else if (reader.Name == "relative_humidity")
                        {
                            IsHumidityTemp = true;
                            IsWindTemp = false;
                            IsNextTemp = false;
                        }
                        else if (reader.Name == "wind_string")
                        {
                            IsHumidityTemp = false;
                            IsWindTemp = true;
                            IsNextTemp = false;
                        }
                        else
                        {
                            IsHumidityTemp = false;
                            IsWindTemp = false;
                            IsNextTemp = false;
                        }
                        break;
                    case XmlNodeType.Text: //Display the text in each element.
                        if (IsHumidityTemp)
                            this.Humidity = reader.Value;
                        else if (IsNextTemp)
                            this.Temp = int.Parse(reader.Value);
                        else if (IsWindTemp)
                            this.Wind = reader.Value;
                        break;
                }

            }

            reader.Close();
        }
    }
} 
```

# javascript - button.click() 和 button.fireEvent('click') 的区别

> ID：10264328
> 
> 赞同：-1
> 
> 时间：2012-04-22T00:50:27.673
> 
> 标签：javascript

> **可能重复：**
> [为什么 .fireEvent() 在 IE9 中不起作用？](https://stackoverflow.com/questions/9714527/why-does-fireevent-not-work-in-ie9)

为什么这两个陈述不是同义词？this.button.click(); 和 this.button.fireEvent('click');

当我执行第一条语句时，它在内部调用第二条语句。但是当我执行第二条语句时，它不会在内部调用第一条语句。为什么是这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T03:16:44.310

你不能让他们互相打电话。否则，您将陷入无限循环，他们不断互相调用

# debugging - 调试器中无法访问 Fortran 模块变量

> ID：10264329
> 
> 赞同：11
> 
> 时间：2012-04-22T00:50:36.483
> 
> 标签：debugging, module, fortran

我使用 gfortran 4.4 和 intel 11.1 编译了一个包含多个模块的 Fortran 代码，随后尝试使用 gdb 和 DDT 对其进行调试。在所有情况下，我都看不到模块中声明的任何变量的值。这些全局变量具有值，因为代码仍然可以正确运行，但我看不到调试器中的值。局部变量很好。我在网上其他地方找不到解决这个问题的方法，所以也许没有直接的解决方案，但是如果我看不到任何全局变量的值，调试我的代码将非常困难。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T09:50:26.813

使用较新的 GDB（如果我没记错的话是 7.2），调试模块很简单。采取以下程序：

```
module modname
  integer :: var1 = 1 , var2 = 2
end module modname

use modname, only: newvar => var2
newvar = 7
end 
```

您现在可以运行：

```
$ gfortran -g -o mytest test.f90; gdb --quiet ./mytest
Reading symbols from /dev/shm/mytest...done.
(gdb) b 6
Breakpoint 1 at 0x4006a0: file test.f90, line 6.
(gdb) run
Starting program: /dev/shm/mytest
Breakpoint 1, MAIN__ () at test.f90:6
6       newvar = 7
(gdb) p newvar
$1 = 2
(gdb) p var1
No symbol "var1" in current context.
(gdb) p modname::var1
$2 = 1
(gdb) p modname::var2
$3 = 2
(gdb) n
7       end
(gdb) p modname::var2
$4 = 7
(gdb) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T02:03:38.077

在 gdb 中，尝试使用 __ *modulename* __ *variablename之类的名称引用全局变量*

您可以使用 nm 和 grep 检查这是否是正确的修改方案，以在程序的符号中找到您的全局变量之一。

如果这不起作用，请确保您使用的是最新版本的 gdb。

这是关于这个问题的一个线程：http: [//gcc.gnu.org/ml/fortran/2005-04/msg00064.html](http://gcc.gnu.org/ml/fortran/2005-04/msg00064.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-25T12:01:54.973

我有同样的问题（GNU gdb 7.9 与 MPI 并行运行）。对我有用的是以下内容：

> p __modname_mod_var

即：双下划线，模块名，下划线，mod，变量名。

使用 -gstabs+ 而不是 -g 编译也可以解决一些问题（但不是现在的问题）。

# android - 在 Android 中创建自定义应用程序

> ID：10264331
> 
> 赞同：0
> 
> 时间：2012-04-22T00:50:49.153
> 
> 标签：android, android-layout, android-listview, android-activity

我是 Java 和 Android 的新手，所以请不要介意我的问题是否缺少正确的编程术语或不够详细！

我正在尝试创建一个应用程序，它将具有：

*   ActivityArtists - 它将包含艺术家姓名及其图片的列表！用户将自己添加艺术家和他们的照片！他可以添加他想要的人和他想要的人！

现在是导致我出现问题的部分：

*   当他点击他之前创建的艺术家时，我希望另一个活动（ActivityAlbums）与另一个列表一起显示，用户可以在其中添加该艺术家的专辑和专辑封面！我感到困惑的是我怎样才能制作（或我可以制作）仍然不存在的东西以他自己的另一种布局开始另一个活动？请帮忙！

*   欢迎任何链接、方式、想法或建议我如何制作这样的东西！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T00:58:36.343

您打算如何存储这些信息？你打算使用 SQLite 数据库吗？如果您选择一个艺术家，您可以使用一个意图将该艺术家信息捆绑到另一个活动，并从 SQLite 数据库中提取专辑信息。如果没有为该艺术家保存专辑，请举杯，以便用户知道尚未为该艺术家存储任何信息。我可以举一个例子，说明我在将信息从一个活动传递到另一个活动时使用的一些代码。

```
lvProjects.setOnItemClickListener(new OnItemClickListener(){
        public void onItemClick(AdapterView<?> a, View v, int position, long id){
            Project project = (Project) lvProjects.getItemAtPosition(position);
            Bundle projectBundle = new Bundle();
            projectBundle.putSerializable("project", project);
            Intent evmListIntent = new Intent(v.getContext(), EVMListActivity.class);
            evmListIntent.putExtras(projectBundle);
            v.getContext().startActivity(evmListIntent);
        }
    }); 
```

在这段代码中，从列表视图中选择一个项目，捆绑，放入一个意图，然后调用下一个活动。然后，您必须在下一个活动中从捆绑包中获取信息

```
//get the bundle of project data
    Bundle projectBundle = this.getIntent().getExtras();
    final Project project = (Project) projectBundle.getSerializable("project"); 
```

希望这可以帮助...

# php - ctype_alpha 在换行时返回 FALSE

> ID：10264333
> 
> 赞同：0
> 
> 时间：2012-04-22T00:50:57.720
> 
> 标签：php

我想使用 ctype_alpha 通过 textarea 字段提交数据，数据应该完全是字母，没有特殊字符。`FALSE`虽然在换行时返回时我如何仍然使用它？

这是 HTML 代码：

```
<?php
include_once('../../header.php');
include_once('../../model/contribution/create_new_tag_script.php');
?>

<form action="" method="post">
    <input type="text" name="tag_name" value="" />
    <textarea maxlength="60" type="text"  name="tag_description" value=""></textarea>
    <input type="submit" name="tag_name_submit" value="Submit the New Tag" />
</form>

<?php
include_once('../../footer.php');
?> 
```

这是PHP代码：

```
<?php
# This script does get included into the document create_new_tag_from.php

    if(isset($_POST['tag_name_submit'])){
    $tag_name_submit = $_POST['tag_name_submit'];
    }

    if(!empty($_POST['tag_name'])){
    $tag_name = strip_tags($_POST['tag_name']);
    }

    if(!empty($_POST['tag_description'])){
    $tag_description = strip_tags($_POST['tag_description']);
    }

if(isset($tag_name_submit)){

    # The Validation of User Entered Data
    # Do validate for solely alphabetic characters with ctype_alpha

    # ctype_alpha($tag_name) && 
    if(ctype_alpha($tag_description)){
        $tag_name = strtolower($tag_name);
        $tag_description = strtolower($tag_description);

    # The Insertion Into the Database
    $db_connect = mysqli_connect(DB_HOST, DB_USER, DB_PASSWORD, DB_NAME);

    $sql_query = sprintf(

            "set @newid = convert(

              ( select 
               max(convert( (substring(tag_id, 2)) , unsigned integer))+1
               from tags), char(10) );

                set @newid = if(length(@newid) = 1, concat('0', @newid), @newid);
                set @newid = concat('c', @newid);

                INSERT INTO tags (tag_id, tag_name, tag_description, added_by_user_id,
                                creation_date, last_edited)
                VALUES (@newid, '%s', '%s', 7, now(), '0')",

                mysqli_real_escape_string($db_connect, $tag_name),
                mysqli_real_escape_string($db_connect, $tag_description)

            );

    $sql_query_run = mysqli_multi_query($db_connect, $sql_query);

    # Print Test to See If It Works
    echo "works_ ";
    echo $tag_name . "_ ";
    echo $tag_description . "_ ";

        } else { # End of the Validation
            echo "The entered data must be in alphabetic characters.";
        }

}

?> 
```

# c - 为什么在 char 变量中存储 255 在 C 中给出它的值 -1？

> ID：10264344
> 
> 赞同：4
> 
> 时间：2012-04-22T00:52:57.717
> 
> 标签：c, char, signed

我在看一本C书，有一段作者提到的文字：

“ `if ch (a char variable) is a signed type, then storing 255 in the ch variable gives it the value -1`”。

任何人都可以详细说明吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-22T00:58:20.073

假设 8-bit `char`s，这实际上是实现定义的行为。值 255 不能表示为带符号的 8 位整数。

但是，大多数实现只是存储位模式，对于 255 是`0xFF`. 使用二进制补码解释，作为有符号 8 位整数，即`-1`. 在一个罕见的补码架构上，这将是负零的位模式或陷阱表示，具有符号和大小，它将是`-127`.

如果两个假设（有符号和 8 位`char`s）中的任何一个不成立，则该值将是¹ 255，因为 255 可表示为无符号 8 位整数或超过 8 位的有符号（或无符号）整数.

¹ 标准保证`CHAR_BIT`至少为 8，它可能更大。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T00:57:35.910

用十进制试试。假设我们只能有 3 位数字。所以我们的无符号范围是 0 - 999。

让我们看看 999 是否真的可以表现为 -1（有符号）：

```
42 + 999 = 1041 
```

因为我们只能有 3 位数字，所以我们去掉了最高位（进位）：

```
041 = 42 - 1 
```

这是适用于任何数基的一般规则。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-22T00:54:59.917

这就是二进制补码的工作原理。[在这里](http://en.wikipedia.org/wiki/Two%27s_complement)阅读所有相关信息。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-22T01:03:15.560

这不是保证的行为。引用 ANSI/ISO/IEC 9899:1999 §6.3.1.3（有符号和无符号整数之间的转换）第 3 条：

> ```
> Otherwise, the new type is signed and the value cannot be represented in it;
> either the result is implementation-deﬁned or an implementation-deﬁned signal
> is raised. 
> ```

我将把按位/2 的补码解释留给其他答案，但符合标准的`signed char`s 甚至不能保证太小而不能容纳 255；他们可能工作得很好（给出值 255。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-22T02:54:22.090

您在其他消息中有经典解释。我给你一个规则：

> 在大小为 n 的有符号类型中，MSB 的存在设置为 1，必须解释为 -2^(n-1)。

对于这个具体问题，假设 char 的大小为 8 位长度（1 个字节），255 到二进制等于：

```
1*2^(7) +  
1*2^(6) + 
1*2^(5) + 
1*2^(4) + 
1*2^(3) + 
1*2^(2) + 
1*2^(1) + 
1*2^(0) = 255

255 equivalent to 1 1 1 1 1 1 1 1. 
```

对于 unsigned char，您得到 255，但如果您正在处理 char（与 signed char 相同），则 MSB 表示负数：

```
-1*2^(7) +  
1*2^(6) + 
1*2^(5) + 
1*2^(4) + 
1*2^(3) + 
1*2^(2) + 
1*2^(1) + 
1*2^(0) = -1 
```

# c# - WCF 从 Basic 到 wsHttpBinding

> ID：10264346
> 
> 赞同：0
> 
> 时间：2012-04-22T00:53:15.117
> 
> 标签：c#, wcf, web-config, wshttpbinding

我现在已经让我的配置正常工作，实际文件结构和 Visual Studio 中的项目结构不匹配。愚蠢的错误:)

但是，现在我遇到了从 basicHttpBinding 过渡到 WsHttpBinding 的问题。这是网络配置。如您所见，我已将第一个端点更改为 wsHttpBinding 类型。

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <connectionStrings>
    <add name="RENTIT05ConnectionString" connectionString="Data Source=rentit.itu.dk;Initial Catalog=RENTIT05;Persist Security Info=True;User ID=Rentit05db;Password=omitted" providerName="System.Data.SqlClient" />
    <add name="RENTIT05Entities" connectionString="metadata=res://*/RentIt.csdl|res://*/RentIt.ssdl|res://*/RentIt.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=rentit.itu.dk;Initial Catalog=RENTIT05;Persist Security Info=True;User ID=Rentit05db;Password=omitted;MultipleActiveResultSets=True&quot;" providerName="System.Data.EntityClient" />
  </connectionStrings>
  <system.web>
    <httpRuntime executionTimeout="3600" maxRequestLength="10000000"/>
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
      </assemblies>
    </compilation>
    <customErrors mode="Off" />
  </system.web>

  <system.serviceModel>
    <services>
      <service name="RentIt05.Services.Service" behaviorConfiguration="ServiceBehavior">
        <endpoint address="RentIt05.Services.AgeRatingService" binding="wsHttpBinding" bindingConfiguration="wsHttpBinding" contract="RentIt05.Interfaces.IAgeRatingService"></endpoint>
        <endpoint address="RentIt05.Services.CommentService" binding="basicHttpBinding" bindingConfiguration="RentItBinding"  contract="RentIt05.Interfaces.ICommentService"></endpoint>
        <endpoint address="RentIt05.Services.ItemService" binding="basicHttpBinding" bindingConfiguration="RentItBinding"  contract="RentIt05.Interfaces.IItemService"></endpoint>
        <endpoint address="RentIt05.Services.ItemTypeService" binding="basicHttpBinding" bindingConfiguration="RentItBinding"  contract="RentIt05.Interfaces.IItemTypeService"></endpoint>
        <endpoint address="RentIt05.Services.LabelService" binding="basicHttpBinding" bindingConfiguration="RentItBinding"  contract="RentIt05.Interfaces.ILabelService"></endpoint>
        <endpoint address="RentIt05.Services.LoginService" binding="basicHttpBinding" bindingConfiguration="RentItBinding"  contract="RentIt05.Interfaces.ILoginService"></endpoint>
        <endpoint address="RentIt05.Services.RatingService" binding="basicHttpBinding" bindingConfiguration="RentItBinding"  contract="RentIt05.Interfaces.IRatingService"></endpoint>
        <endpoint address="RentIt05.Services.SectionService" binding="basicHttpBinding" bindingConfiguration="RentItBinding"  contract="RentIt05.Interfaces.ISectionService"></endpoint>
        <endpoint address="RentIt05.Services.StateLogService" binding="basicHttpBinding" bindingConfiguration="RentItBinding"  contract="RentIt05.Interfaces.IStateLogService"></endpoint>
        <endpoint address="RentIt05.Services.StateService" binding="basicHttpBinding" bindingConfiguration="RentItBinding"  contract="RentIt05.Interfaces.IStateService"></endpoint>
        <endpoint address="RentIt05.Services.UserGroupService" binding="basicHttpBinding" bindingConfiguration="RentItBinding"  contract="RentIt05.Interfaces.IUserGroupService"></endpoint>
        <endpoint address="RentIt05.Services.UserService" binding="basicHttpBinding" bindingConfiguration="RentItBinding"  contract="RentIt05.Interfaces.IUserService"></endpoint>
        <endpoint address="RentIt05.Services.TransferService" binding="basicHttpBinding" bindingConfiguration="RentItBinding"  contract="RentIt05.Interfaces.ITransferService"></endpoint>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="ServiceBehavior">
          <serviceThrottling maxConcurrentCalls="1000" maxConcurrentSessions="1000" maxConcurrentInstances="1000"/>
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
     <bindings>
       <basicHttpBinding>
         <binding name="RentItBinding" maxReceivedMessageSize="2147483647" maxBufferSize="2147483647" transferMode="StreamedRequest">
           <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
         </binding>
       </basicHttpBinding>
      <wsHttpBinding>
        <binding name="wsHttpBinding">
          <security mode="Transport">
            <transport clientCredentialType="None" />
          </security>
        </binding>
      </wsHttpBinding>
    </bindings>
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true" />
  </system.webServer>
</configuration> 
```

当我尝试在本地主机上运行它时，我收到以下错误消息：

```
Could not find a base address that matches scheme https for the endpoint with binding WSHttpBinding. Registered base address schemes are [http].. 
```

我发现一些关于 IIS 解析多个基地址的文章，但这是本地的，所以我不知道为什么它不起作用。

我在这里缺少什么吗？只要我只使用basicHttpBindings，配置文件就可以正常工作。

任何帮助将不胜感激，tyvm！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T18:11:35.983

您需要启用安全性吗？您在 wsHttpBinding 上启用了传输安全性，它将寻找 ssl。您的 basicHttpBinding 没有使用任何。如果您设置，错误将消失

```
 <binding name="wsHttpBinding">
      <security mode="None">

      </security>
    </binding> 
```

另一种选择是在 IIS 上设置 ssl。

# sql - 如何编写 SQL 查询以显示 Wordpress 网站最近 30 天内最常用标签的列表

> ID：10264347
> 
> 赞同：4
> 
> 时间：2012-04-22T00:53:39.700
> 
> 标签：sql, wordpress

我正在寻找一种方法来在我的棒球博客上显示过去 30 天内最常用的标签，该博客基于 Wordpress。我不是编码员，但我想出了这个 mashup 来显示最常用的 28 个标签的列表（首选适合我的主题）。在我的一生中，我无法弄清楚如何将标签限制为过去 30 天内最常用的标签。

这是我所拥有的：

```
<ul id="footer-tags">
<?php
global $wpdb;
$term_ids = $wpdb->get_col("
   SELECT DISTINCT term_taxonomy_id FROM $wpdb->term_relationships
      INNER JOIN $wpdb->posts ON $wpdb->posts.ID = object_id
      WHERE DATE_SUB(CURDATE(), INTERVAL 30 DAY) <= $wpdb->posts.post_date");

if(count($term_ids) > 0){

  $tags = get_tags(array(
    'orderby' => 'count',
    'order'   => 'DESC',
    'number'  => 28,
    'include' => $term_ids,
  ));
foreach ( (array) $tags as $tag ) {
echo '<li><a href="' . get_tag_link ($tag->term_id) . '" rel="tag">' . $tag->name . '</a></li>';
}
}
?>
</ul> 
```

该网站的创建时间略短于约 4 周，因此为了进行测试，我更改`INTERVAL 30 DAY`为`INTERVAL 3 DAY`，返回的标签似乎是随机的，有些已超过 2 周未使用，并且仅使用过一次。同样，仅显示了 8 个标签，而更多标签已被使用。

为了检查是否查询了正确的天数，我执行了以下操作：

完全删除垃圾箱中的所有帖子和页面项目，我没有任何自定义帖子类型。

对草稿做了同样的事情。

在 phpmyadmin 中运行查询以删除所有帖子修订 -`DELETE FROM wp_posts WHERE post_type = "revision";`

在 phpmyadmin 中运行查询以检查结果是否是过去 3 天的帖子 -`SELECT * from wp_posts WHERE DATE_SUB(CURDATE(), INTERVAL 3 DAY) <= post_date`

phpmyadmin 查询的结果实际上是最近 3 天的帖子，但前端显示没有改变。

# 更新

这是一些屏幕截图。也许屏幕截图可以帮助找到我的代码错误的地方。

**带有类别和标签的博客文章**

![博文图片](../Images/57188345796451be90b2ef6749db8613.png)

**`wp_posts`与`ID`上述职位的职位表**

![wp_posts](../Images/e0113f9f0769ec62e56356a716599a36.png)

**`wp_terms`带有所`term_id`用标签的表**

![wp_terms](../Images/4222b9c3e46f95876f35b3be737bd36b.png)

**`wp_term_taxonomy`标签`term_id`为`term_taxonomy_id`**

![wp_term_taxonomy](../Images/cc0705e222114ae60c0aed1670e704b2.png)

**`wp_term_relationships`分配`term_taxonomy_id`为发布为`object_id`**

![wp_term_relationships](../Images/aaf3143fdc11e6e4daa7a60d431f0806.png)

# 更新 2

我想我找到了问题所在，但不知道如何解决。

SQL 查询获取`term_taxonomy_id`，而不是实际的标签 ID 并`get_tag_link`使用`term_id`

# 更新 3

我最近创建了一个插件来显示最近使用的最流行的标签 - [https://wordpress.org/plugins/recent-popular-tags/](https://wordpress.org/plugins/recent-popular-tags/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T17:43:52.550

您在 SQL 字符串中插入的 PHP 变量是*PHP 对象*，可用于*从 PHP*中访问 WordPress 表；而您在*从 SQL*中访问数据的表和列的名称之后。

你想要：

```
"SELECT DISTINCT term_taxonomy_id FROM wp_term_relationships
  INNER JOIN wp_posts ON wp_posts.ID = wp_term_relationships.object_id
  WHERE DATE_SUB(CURDATE(), INTERVAL 30 DAY) <= wp_posts.post_date" 
```

顺便说一句：如果您需要将 PHP 变量的值插入到 SQL 语句中，请务必[先将其转义，以防止注入任何恶意代码](https://stackoverflow.com/questions/60174/best-way-to-stop-sql-injection-in-php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T05:33:52.360

问题是 SQL 查询代码获取的是`term_taxonomy_id`，而不是实际的标签 ID。

我使用该表添加了一个额外的 INNER JOIN`term_taxonomy`来获取`term_id`. 这似乎有效，但如果一个模组可以改善这一点，请做！

```
<ul id="footer-tags">
<?php $wpdb->show_errors(); ?> 
<?php
global $wpdb;
$term_ids = $wpdb->get_col("
    SELECT term_id FROM $wpdb->term_taxonomy
    INNER JOIN $wpdb->term_relationships ON $wpdb->term_taxonomy.term_taxonomy_id=$wpdb->term_relationships.term_taxonomy_id
    INNER JOIN $wpdb->posts ON $wpdb->posts.ID = $wpdb->term_relationships.object_id
    WHERE DATE_SUB(CURDATE(), INTERVAL 30 DAY) <= $wpdb->posts.post_date");

if(count($term_ids) > 0){

  $tags = get_tags(array(
    'orderby' => 'count',
    'order'   => 'DESC',
    'number'  => 28,
    'include' => $term_ids,
  ));
foreach ( (array) $tags as $tag ) {
echo '<li><a href="' . get_tag_link ($tag->term_id) . '" rel="tag">' . $tag->name . '</a></li>';
}
}
?>
</ul> 
```

**更新**

我最近创建了一个插件来显示最近使用的最流行的标签 - [https://wordpress.org/plugins/recent-popular-tags/](https://wordpress.org/plugins/recent-popular-tags/)

# c++ - 如何在 C++ 中返回一个数组

> ID：10264355
> 
> 赞同：0
> 
> 时间：2012-04-22T00:55:49.650
> 
> 标签：c++

我应该如何从函数返回数组？我的代码是

```
float ClassArray::arr_sub(float a[100][100], float b[100][100]) {
    int i,j;
    for(i = 1; i < 10; i++) {
        for(j = 1; j < 10; j++){
            f[i][j]=b[i][j]-a[i][j];
        }
    }
    return f;
} 
```

并且从此函数返回的 f 应分配给在其他类中声明的另一个数组 g 。

```
float g[100][100];
g= cm.arr_sub(T,W); 
```

但是在构建课程时，它说`incompatible type assignment of float to float[100][100]`。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-22T01:01:57.493

我对另一个关于数组的问题的回答[解释](https://stackoverflow.com/a/10253277/365496)了为什么你不想使用数组。

正如我在那个答案中所说，你不能像你尝试的那样分配一个数组：

```
float g[100];
g = foo(); // illegal, assigning to arrays is not allowed 
```

数组的另一个奇怪的限制是你不能从函数中返回它们：

```
float foo()[100]; // illegal, returning an array from a function is not allowed 
```

另请注意，当您声明一个函数时，`float arr_sub(float a[100][100])`您可能会认为您正在按值传递一个数组，但实际上这会调用另一个为数组生成的奇怪异常。在 C 和 C++ 中，每当您将函数的形式参数声明为数组时，类型就会从“数组”调整为“指向数组元素类型的指针”。

* * *

由于数组的行为不像应有的那样，因此您应该改用 std::array 或 std::vector：

```
std::array<float,100> foo(); // works

std::array<float,100> g;
g = foo(); // works 
```

要执行多维数组，您可以使用：

```
std::array<std::array<float,100>,100> g; 
```

虽然这有点麻烦，所以你可以 typedef 它：

```
typedef std::array<std::array<float,100>,100> Matrix;

Matrix ClassArray::arr_sub(Matrix a, Matrix b) {
    ...
}

Matrix g;
g = cm.arr_sub(T,W); 
```

如果你有一个支持 C++11 的编译器，你甚至可以做一个模板类型别名：

```
template<typename T,int Rows,int Columns>
using Matrix2d = std::array<std::array<T,Columns>,Rows>;

Matrix2d<float,100,100> g; 
```

* * *

### 性能说明

您可能不想按值返回 std::array 的原因之一。如果数组很大，那么将数据从返回值复制到您分配给它的变量中可能会产生显着的性能成本。如果这对您来说是个问题，那么 std::array 的解决方案与其他大型类型的解决方案相同；使用“out”参数而不是按值返回。

```
void arr_sub(Matrix a, Matrix b, Matrix &result);

Matrix g;
arr_sub(T,W,g); 
```

这不适用于 std::vector 因为 std::vector 可以利用移动语义来避免复制其所有元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T01:02:59.233

如果您坚持使用“普通 C”2D 数组，最好的办法是将指向结果的指针与两个输入参数一起传递，而不是像您那样按值传递数组。

但是，在 C++ 中最好的做法是使用`vector<vector<float> >`它，并通过引用传递它。

```
void ClassArray::arr_sub(
    const vector<vector<float> > &a
,   const vector<vector<float> > &b
,   vector<vector<float> > &res)
{
    for(int i=0 ; i != a.size() ; i++)
        for(int j=0 ; j != b.size() ; j++)
            res[i][j] = b[i][j] - a[i][j];
}

void main() {
    vector<vector<float> > a(100, vector<float>(100, 12.345));
    vector<vector<float> > b(100, vector<float>(100, 98.765));
    vector<vector<float> > res(100, vector<float>(100, 0));
    arr_sub(a, b, res);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T02:33:47.117

如果您真的希望返回一个数组以及如何在 main() 中使用它，最有效的方法是将返回的数组声明为动态的。这样您将避免丢失指向这个新数组的指针，因为它将在堆中而不是在堆栈中分配。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T01:05:05.547

最好的方法是将所有内容包装到一个类中。从事物的外观来看，它是一个矩阵。

可能已经有一百个 Matrix 类了，所以再写一个真的没有意义。

但是，如果这是一个学习练习，它可能是值得的。

要回答您提出的问题，请为您的函数添加第三个参数：`float result[100][100]`. 在您的函数内部，将结果写入结果数组。

这是因为在 C 和 C++ 中，数组总是通过引用而不是值传递。这是因为 C++ 只传递指向数组开头的指针。

# php - 如何使用 AJAX 或 JSON 将数据发送到 PHP 电子邮件脚本

> ID：10264356
> 
> 赞同：2
> 
> 时间：2012-04-22T00:56:26.407
> 
> 标签：php, jquery, html, ajax, json

我完全迷失在这里。我想在不离开我的页面的情况下使用 PHP 发送电子邮件。但我不知道如何将数据获取到 PHP 文件以通过电子邮件发送。当我真的到达那里时，我会迷路的。所以任何关于 PHP 文件应该是什么样子的帮助也会很棒。这是表格。

```
<table id="dialog">
        <tr><td><input type="text" id="name" name="name" placeholder="Your Name" size="20" class="tbow" /></td></tr>
        <tr><td><input type="text" id="email" name="email" placeholder="Your Email" size="20" class="tbow" /></td></tr>
        <tr><td><input type="text" id="number" name="number" placeholder="Your Phone Number" size="20" class="tbow" /></td></tr>
        <tr><td><textarea id="message" name="message" rows="5" cols="25" class="tbow" placeholder="Your Message"></textarea></td></tr>
        <tr><td><input type="button" value="Send!" onclick="senem();" id="sender" /></td></tr>
</table> 
```

我试过这个......

```
function senem(){
        var name = document.getElementById("name").value;
        var email = document.getElementById("email").value;
        var number = document.getElementById("number").value;
        var message = document.getElementById("message").value;
        $.ajax({
            type: "POST",
            url: "mmaa.php",
            data: "name=" + name + "&email=" + email + "&number=" + number = "&message=" + message,
            success: alert("It works!!!");
        });
 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T01:03:41.377

不打算作为复制和粘贴工作，但应该为您提供自己编写的构建块：

你的javascript函数；

```
function senem() {
    jQuery.ajax({
        type: "POST",
        url: "http://location/of/script.php",
        data: { var1: "foo", var2: "bar" },
    });
} 
```

并在php中；

```
<?php
    $var1 = $_POST['var1'];
    $var2 = $_POST['var2']; //do something interesting with these

    $to = "john@example.com";
    $subject = "Wooo Email!";
    $message = "Sorry John, you're fired.";

    mail($to, $subject, $message, "From: system@yourdomain.com\r\n");
?> 
```

var1 和 var2 的值您可能希望使用 jQuery 分配客户端（例如 $("#name").val(); ），并且您还需要在 Apache 旁边安装和配置 SMTP 服务器（使用 Exim 和找一个友好的极客来帮助你）。

PS：\r\n 是因为 SMTP 与 HTTP 共享一些语法，这并不重要，但如果没有它们，mail 命令可能无法工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T01:06:08.643

我将从按钮中删除 onlick 事件并以[不显眼](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)的方式进行

```
<input type="button" value="Send!" id="sender" /> 
```

脚本

```
$(function(){

 $("#sender").click(function(){
    $.post("yourserver.php", 
                          { name: $("#name").val(),
                            email:$("#email").val(),
                            number : $("#number").val(), 
                            message=$("#message").val()
                          },
                         function(result){
                            //Show the result from server page to the user. 
                            alert(result)
                         });    
  });
}); 
```

让您的 php 页面接受此值，然后在正确验证后发送电子邮件。您可以回复一些消息（“例如：已发送电子邮件”），这些消息将在`result`变量中可用。

确保您已将 jQuery 库加载到您的页面。

阅读此页面以更好地了解 jQuery post 的工作原理[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

# jquery - 在 CSS/CSS3 中选择单个导航元素

> ID：10264360
> 
> 赞同：1
> 
> 时间：2012-04-22T00:57:13.160
> 
> 标签：jquery, html, css

如何在 CSS3 中选择导航元素？

我希望能够制作一个导航元素 - 当悬停时 - 更改为我想要的颜色。

如

```
<nav>
    <a href="#mainpage">first</a>  // i want to make this word, when hovered, into #555
    <a href="#secondpage">second</a>  // i want to make this word, when hovered, into #444
    <a href="#thirdpage">third</a>  //i want to make this word, when hovered, into #643312
    <a href="#fourthpage">fourth</a>  //i want to make this word, when hovered, into #444
    <a href="#fifthpage">fifth</a>  // i want to make this word, when hovered, into #666
</nav> 
```

我该怎么做呢？

我正在阅读有关 CSS3 选择器的信息，但我没有看到任何解决方案（至少现在还没有），所以我想我会在 Stack Overflow 上得到更快的答案。我会继续搜索，看看是否有任何结果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T00:58:25.317

检查这个：

[点击这里](http://www.w3schools.com/cssref/sel_nth-child.asp)

你想要这个吗 ？

```
nav a:nth-child(2),
nav a:nth-child(4),
nav a:nth-child(6){

....something

}

nav a:nth-child(2)
{
background:#ff0000;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T00:59:56.470

也许您正在寻找`when hovered`：（不确定您的问题不是很具描述性）

```
nav a:nth-child(1):hover
{
    color: #555
}
nav a:nth-child(2):hover
{
    color: #444
}
nav a:nth-child(3):hover
{
    color: #643312
}
nav a:nth-child(4):hover
{
    color: #444
}
nav a:nth-child(5):hover
{
    color: #666
} 
```

[JsFiddle.net 示例](http://jsfiddle.net/PGqUK/)​</p>

**更新**

如果您想知道每个**N**是如何工作的：

```
<style>
nav a:nth-child(3n+0):hover {
  background-color: #f00;
}
nav a:nth-child(3n+1):hover {
  background-color: #0f0;
}
nav a:nth-child(3n+2):hover {
  background-color: #0f0;
}
<style>

<nav>
 <a href="#mainpage">first</a> 
 <a href="#secondpage">second</a> 
 <a href="#thirdpage">third</a>  
 <a href="#fourthpage">fourth</a> 
 <a href="#fifthpage">fifth</a>  
 <a href="#sixthpage">sixth</a>  
</nav> ​ 
```

[JsFiddle.net 示例](http://jsfiddle.net/RmytA/)

元素（0、3、6、9 等）将为绿色 (#f00)。

元素（1、4、7、10 等）将为蓝色 (#0f0)。

元素（2、5、8、11 等）将为红色 (#00f)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T15:38:01.870

有一个 CSS 2.1 解决方案:)

如果您想为第一个链接设置样式，您可以使用`nav a:first-child`选择器，对于第二个链接，您可以使用兄弟选择器，如下所示：

```
nav a:first-child + a{
    color: red; //coloring the second link
}
nav a:first-child + a + a{
    color: green; //coloring the third link
}
nav a:first-child + a + a + a{
    color: black; //coloring the fourth link
}
nav a:first-child + a + a + a + a{
    color: yellow; //coloring the fifth link
} 
```

这样的解决方案将从 IE7 开始工作。

# xcode - 未知选项字符“f”在：-fno-objc-arc

> ID：10264379
> 
> 赞同：4
> 
> 时间：2012-04-22T01:01:03.173
> 
> 标签：xcode, automatic-ref-counting

我在 xcode 4.3.2 上，我正在编译 zmqobj [https://github.com/jeremy-w/objc-zmq.git](https://github.com/jeremy-w/objc-zmq.git)。项目中包含的原始目标是针对 os x 的，但我正在尝试为 ios 添加一个新目标。

对于新目标，它给了我 ARC 投诉（因为代码不是 ARC）。但是，在为原始 os x 目标编译时，它不会给我这些警告。

添加 -fno-objc-arc 给我：

```
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/libtool: unknown option character `f' in: -fno-objc-arc 
```

我一定是把目标设置错了，但我不知道它有什么问题。帮助表示赞赏，谢谢。

编辑：

我在目标-> 构建阶段-> 编译源中添加标志。我以前为我自己创建的项目做过这个并且它有效。但对于这个项目，它没有意识到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T10:03:10.713

将名为 libarclite_iphoneos.a 的静态库添加到您的项目中。这个问题几乎要了我的命。

[https://devforums.apple.com/message/605259](https://devforums.apple.com/message/605259) “如果您有一个使用 ARC 的静态库包含在不使用它的项目中，请将此文件添加到项目中：

> /Developer/Platforms/iPhoneOS.platform/Developer/usr/lib/arc/libarclite_iphoneos.a

（假设 /Developer 是您的 ARC 兼容开发工具所在的位置）这将让您在 iOS 4 上运行二进制文件而不会出现类似的错误

> 未找到符号：_objc_autoreleasePoolPush

或其他人。”

# python - 在谷歌应用引擎（python）中检索 javascript cookie

> ID：10264384
> 
> 赞同：0
> 
> 时间：2012-04-22T01:02:24.003
> 
> 标签：python, google-app-engine

有谁知道如何在 gae python 中检索 javascript cookie？我在网上看到过复杂的例子，比如 cookiejar，但我认为这个模块对于我的简单网站来说太多了。我只是想制作一个购物车，它将接受 js cookie，将其发送到服务器端代码（python）进行验证，然后将数据发布到谷歌结帐。

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T01:57:35.287

希望此代码对您的问题有所帮助，[带有有用的链接](https://developers.google.com/appengine/docs/python/tools/webapp/requestclass)：

```
from google.appengine.ext import webapp

class MyRequestHandler(webapp.RequestHandler):
    def get(self):
        self.response.out.write(self.request.cookies.get('cookiename')) 
```

如果你有点困惑 JS cookie 和 HTTP cookie 是一样的。请参阅[这篇文章](http://www.nczonline.net/blog/2009/05/05/http-cookies-explained/)以获得更清晰的解释。Cookie`server`始终`client`在`HTTP header`. 在这段代码中，我们只是`Set-cookie`在服务器中客户端的请求中使用“”标头。是一个里面有 cookie`request.cookies`的 Python 。`dict`

# android - 如何将 ImageView 添加到 ListFragment？

> ID：10264385
> 
> 赞同：1
> 
> 时间：2012-04-22T01:02:26.187
> 
> 标签：android, android-fragments, android-listfragment

通常使用 ListView 将图像和文本添加到 ListView 项目是直截了当的。您可以使用自定义适配器创建和适配器以及 setListAdapter(adapter)。

我想创建一个片段应用程序，其中包含与 ImageView 相同的列表。我已经搜索了一个示例，但找不到任何具有图像的示例。有人可以指点我一个例子，这样我就可以看到它是如何完成的？

它是在布局领域的 XML 中完成的吗？例如，您将如何使用以下 xml 声明它。

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="match_parent" android:layout_height="match_parent">

    <fragment class="com.demo.android.FragmentLayout$ArticleFragment"
            android:id="@+id/article" android:layout_weight="1"
            android:layout_width="0px" android:layout_height="match_parent" />

    <FrameLayout android:id="@+id/details" android:layout_weight="1"
            android:layout_width="0px" android:layout_height="match_parent"
            android:background="?android:attr/detailsElementBackground" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T01:22:52.807

您只需要创建一个扩展类`Fragment`或类`ListFragment`，然后扩展包含您的布局`ListView`并设置您的`Adapter`.

**示例`ListFragment`：**

```
public class Example extends ListFragment {

// Adapter
private YourListAdapter mAdapter;

// ListView
private ListView mListView;

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    // Adapter
    mListView.setAdapter(mAdapter);
    super.onActivityCreated(savedInstanceState);
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.listview, container, false);
    mListView = (ListView)view.findViewById(android.R.id.list);
    return view;
    }
} 
```

# php - 如何正确回显来自谷歌新闻的 rss xml 内容，如我页面中的原始 xml？

> ID：10264387
> 
> 赞同：0
> 
> 时间：2012-04-22T01:02:46.113
> 
> 标签：php, xml, xml-parsing

我使用此代码在我的网站中显示新闻，但我总是为它显示的每条新闻得到这个，我不知道为什么会这样，有人可以帮忙吗？

```
$xml = simplexml_load_file('https://news.google.com.mx/news/feeds?hl=es&gl=mx&q=realmadrid&um=1&ie=UTF-8&output=rss');
print_r($xml);
foreach ($xml as $status) {

$description = $status->item->description;

echo "$description <br> ";

} 
```

在显示每条新闻后我总是得到这个，我知道我正在使用 print_r，但没有 print_r 它只是显示第一条新闻，请帮助：

```
SimpleXMLElement Object ( [@attributes] => Array ( [version] => 2.0 ) [channel] => SimpleXMLElement Object ( [generator] => NFE/1.0 [title] => realmadrid: Google Noticias [link] => http://news.google.com.mx/news?gl=mx&pz=1&ned=es_mx&hl=es&q=realmadrid [language] => es [webMaster] => news-feedback@google.com [copyright] => ©2012 Google [pubDate] => Sun, 22 Apr 2012 01:00:21 GMT [lastBuildDate] => Sun, 22 Apr 2012 01:00:21 GMT [image] => SimpleXMLElement Object ( [title] => realmadrid: Google Noticias [url] => https://ssl.gstatic.com/news/img/logo/es_mx/news.gif [link] => http://news.google.com.mx/news?gl=mx&pz=1&ned=es_mx&hl=es&q=realmadrid ) [item] => Array ( [0] => SimpleXMLElement Object ( [title] => El Real Madrid apuntilla al Barça en el Camp Nou (1-2) - Republica.com (blog) [link] => http://news.google.com/news/url?sa=t&fd=R&usg=AFQjCNGDpztvnga7JP035sqyCqZUrp_Elw&url=http://www.republica.com/2012/04/20/barca-realmadrid-2_482059/ [guid] => tag:news.google.com,2005:cluster=http://www.republica.com/2012/04/20/barca-realmadrid-2_482059/ [pubDate] => Sat, 21 Apr 2012 21:19:44 GMT [description] => 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T03:09:09.090

您必须解析项目标签..

```
$data = file_get_contents('https://news.google.com.mx/news/feeds?hl=es&gl=mx&q=realmadrid&um=1&ie=UTF-8&output=rss');
 $xml_data = simplexml_load_string($data);
 $items = $xml_data->xpath('channel/item');
foreach ($items as $item) {
   echo "title" . $item->title;
} 
```

这是快速编码，所以如果有任何问题，请给我回信；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T23:22:35.603

我在检查所有代码后得到如果有人帮助是这样的：

```
$data = file_get_contents('https://news.google.com.mx/news/feeds?hl=es&gl=mx&q=realmadrid&um=1&ie=UTF-8&output=rss');

$xml = new SimpleXMLElement($data);
$channel = array();
$channel['title']       = $xml->channel->title;

foreach ($xml->channel->item as $item)
{

    //echo $article['title'] = $item->title;
    //echo $article['link'] = $item->link;
    echo $article['pubDate'] = $item->pubDate;
    echo $article['description'] = (string) trim($item->description);

} 
```

# php - 使用 cURL 发送 POST - 空数组

> ID：10264395
> 
> 赞同：3
> 
> 时间：2012-04-22T01:03:51.950
> 
> 标签：php, post, curl

我正在尝试使用 cURL 发送 POST 请求，但不幸的是我只收到一个空字符串。

卷曲：

```
<?php
echo "ID: " . $_POST["id"]; // here ID is not empty

$fields = array(
    'id' => urlencode($_POST["id"]),
    'name' => urlencode($_POST["name"])
);

$connection = curl_init();
curl_setopt($connection, CURLOPT_URL, "http://www.example.de/remote.php");
curl_setopt ($connection, CURLOPT_POST, true);
curl_setopt($connection, CURLOPT_POSTFIELDS, count($fields));
curl_setopt($connection, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($connection, CURLOPT_HEADER, 0);
$response = curl_exec($connection);
?> 
```

远程服务器：

```
<?php
   var_dump($_POST); // shows an empty array
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T01:07:14.890

您需要删除`count($fields)`，而只是使用`$fields`

```
curl_setopt($connection, CURLOPT_POSTFIELDS, $fields); 
```

您实际上没有在任何地方设置 cURL 选项来发送字段

# windows - 从 Windows7 中的命令行开始的 Grails 2.0.3 错误

> ID：10264397
> 
> 赞同：11
> 
> 时间：2012-04-22T01:04:21.520
> 
> 标签：windows, grails

希望有志同道合的人可以帮助解决这个奇怪的窗户问题

我正在尝试在 Windows 上运行 grails 应用程序，但无法启动 grails。

我都从 grails.org 下载了 2.0.3 发行版，并从 github 拉取并构建了源代码。

我收到的错误如下：

```
Error: Could not find or load main class 
       org.codehaus.groovy.grails.cli.support.GrailsStarter 
```

我为找到这个问题的解决方案（有些人已经遇到过）所做的搜索没有产生任何帮助：我发现的只是我的环境变量设置不正确的建议。（例如[这里](http://grails.1312388.n4.nabble.com/Grails-2-0-Milestone-1-Released-td3704476.html)）

不过，我觉得我在设置变量时非常小心。我在系统变量下配置了以下内容：

```
JAVA_HOME C:\java\jdk7
GRAILS_HOME C:\grails\2.0.3  // also set it to C:\grails\source\grails-core when dlded from source
GROOVY_HOME C:\groovy\1.8.6
PATH %JAVA_HOME%\bin;%GRAILS_HOME%\bin;%GROOVY_HOME%\bin;$PATH 
```

在下载 groovy 并设置该环境变量之前和之后，我都尝试过，恐怕我现在很迷茫。Groovy 启动很好，java 启动很好，但是 grails 无法启动。

Windows 中的其他人是否对最新的 grails 版本有此问题？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-24T00:52:10.840

我觉得自己像个傻瓜不尝试这个，但是......

Grails 作为来自 Windows DOS 提示符 (cmd) 的命令运行。它不适用于我在 Windows 上使用的 bash（git bash，出于方便和对 linux cmds 的熟悉）。

对于那些发现自己处于这种情况的人，请确保您也在 Windows cmd 提示符下尝试此操作。（那些对为什么这在 DOS 提示符下有效但在自定义的类似 linux 的 bash 中无效的人有任何见解，请权衡一下，我会用我遇到的任何发现来更新这个答案！）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-21T18:21:25.877

我在 DOS CMD shell 中遇到了这个错误消息。结果，我将 GRAILS_HOME 设置为 2.2.0，但我的 PATH 指向 Grails-2.2.1\bin。一旦我修复了这种不匹配，错误就消失了，一切正常。建议在您的 CMD shell 中使用“set”来查看您的环境实际设置为什么。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-21T07:29:27.647

我在 msysgit 控制台中遇到了同样的问题，可以通过将环境变量 $GRAILS_HOME 设置为 unix 格式来解决这个问题：

```
export GRAILS_HOME=/c/grails/2.0.3 
```

这修复了上述错误，但在执行“grails run-app”时会导致一个新错误：

```
$ grails run-app
Error opening zip file or JAR manifest missing : /d/Programme/grails-2.2.4/lib/org.springsource.springloaded/springloaded-core/jars/springloaded-core-1.1.3.jar
Error occurred during initialization of VM
agent library failed to init: instrument 
```

jar 可以在记录的路径下找到，所以我不知道为什么它不起作用。我仍在尝试解决此错误。

我希望上述解决方案可以帮助任何人。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-04-22T17:18:44.037

Grails 2.3.7、Win7、Java7、msysgit：

默认情况下，grails 无法从 msysgit 启动。

修复`cygpath.exe`从 cygwin 到 msysgit/bin 的副本。并修改 startGrails

在该部分`# For Cygwin, ensure paths are in UNIX format before anything is touched`

代替

```
 if $cygwin ; then 
```

和

```
 if [ $cygwin -o $mingw ] ; then 
```

或者只是在 grails/bin/startGrails 中以 unix 样式设置 GRAILS_HOME，例如

```
$GRAILS_HOME=/c/program/grails-2.3.7 
```

ps

关于 cygpath.exe 的有用[链接](https://stackoverflow.com/questions/12015348/msys-path-conversion-or-cygpath-for-msys)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-22T07:31:57.327

您的设置应该按原样工作。我会验证我的 grails 安装没有损坏。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-25T14:05:11.000

我遇到了这个问题，我意识到我在路径中有 groovy 2.1.7。我从路径中删除了这个 groovy，Grails 工作了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-09-07T14:54:23.290

正如用户“sfitts”在他的评论中指出的那样（我还不能附加），这个问题在[http://jira.grails.org/browse/GRAILS-8271](http://jira.grails.org/browse/GRAILS-8271)得到了解决/修复。此修复程序已包含在我的 Grails 2.3.11 安装中。

但是，我还必须在 Windows 中取消定义我的 GRAILS_HOME 环境变量才能使其正常工作（启动脚本会自动检测并设置此变量）。

# android - Android：更新更多小部件的警报

> ID：10264399
> 
> 赞同：0
> 
> 时间：2012-04-22T01:04:38.110
> 
> 标签：android, widget, alarm

我使用 AlarmManager 每秒更新一个小部件，但是当添加更多小部件时，仅更新最后一个小部件。我不明白为什么...

这是代码...

```
public class widget extends AppWidgetProvider {

    @Override
    public void onUpdate(Context context, AppWidgetManager appWidgetManager,int[] appWidgetIds) {
        SharedPreferences preference = context.getSharedPreferences("MY_PREFERENCE", Context.MODE_PRIVATE);
        Intent intent = new Intent(context,vampireServiceWidget.class);
        context.startService(intent);
        for(int i=0; i<appWidgetIds.length;i++){        
            if(preference.getLong("countdown", 0)!=0){
                //Parte il countdown
                Intent in = new Intent().setAction("it.android.dev.thevampirediaries.UPDATE_COUNTDOWN");
                in.putExtra("id_widget", appWidgetIds[i]);
                in.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                PendingIntent pi = PendingIntent.getBroadcast(context, 0, in, PendingIntent.FLAG_UPDATE_CURRENT);
                AlarmManager alarm = (AlarmManager)context.getSystemService(Context.ALARM_SERVICE);
                alarm.setRepeating(AlarmManager.ELAPSED_REALTIME, SystemClock.elapsedRealtime(), 1000, pi); 

                    }       }

} 
```

进入广播这个代码

```
 AppWidgetManager manager = AppWidgetManager.getInstance(context);
            RemoteViews remoteView = new RemoteViews(context.getPackageName(),R.layout.widgett);
         thisWidget=intent.getIntExtra("id_widget", 0)
            SimpleTimeFormat tf = new SimpleTimeFormat("$dd$ : $HH$: $mm$: $ss$");    
            String risultato = tf.format(countdown_data_fine - new Date().getTime()); // arg0 tempo
            remoteView.setTextViewText(R.id.textView1, titolo_puntata);
            remoteView.setTextViewText(R.id.textView2, risultato);
            manager.updateAppWidget(thisWidget, remoteView); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T04:30:11.197

注释掉 for 循环，不要发送小部件 ID。使用[public void updateAppWidget (ComponentName provider, RemoteViews 视图) 来更新小部件](http://developer.android.com/reference/android/appwidget/AppWidgetManager.html#updateAppWidget%28android.content.ComponentName,%20android.widget.RemoteViews%29)。

试试这个

```
public class widget extends AppWidgetProvider {

    @Override
    public void onUpdate(Context context, AppWidgetManager appWidgetManager,int[] appWidgetIds) {
        SharedPreferences preference = context.getSharedPreferences("MY_PREFERENCE", Context.MODE_PRIVATE);
        Intent intent = new Intent(context,vampireServiceWidget.class);
        context.startService(intent);
        //for(int i=0; i<appWidgetIds.length;i++){        
            if(preference.getLong("countdown", 0)!=0){
                //Parte il countdown
                Intent in = new   Intent().setAction("it.android.dev.thevampirediaries.UPDATE_COUNTDOWN");
                in.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                PendingIntent pi = PendingIntent.getBroadcast(context, 0, in, PendingIntent.FLAG_UPDATE_CURRENT);
                AlarmManager alarm = (AlarmManager)context.getSystemService(Context.ALARM_SERVICE);
                alarm.setRepeating(AlarmManager.ELAPSED_REALTIME, SystemClock.elapsedRealtime(), 1000, pi); 

             }     
       } 
```

// }

=================================================

```
 AppWidgetManager manager = AppWidgetManager.getInstance(context);
                RemoteViews remoteView = new RemoteViews(context.getPackageName(),R.layout.widgett);
ComponentName thisWidget = new ComponentName(context, widget.class);
    SimpleTimeFormat tf = new SimpleTimeFormat("$dd$ : $HH$: $mm$: $ss$");    
                String risultato = tf.format(countdown_data_fine - new Date().getTime());
                remoteView.setTextViewText(R.id.textView1, titolo_puntata);
                remoteView.setTextViewText(R.id.textView2, risultato);
                manager.updateAppWidget(thisWidget, remoteView); 
```

# ruby - 关于在 heroku 平台上不断更新 postgres 中的数据有什么建议吗？

> ID：10264403
> 
> 赞同：0
> 
> 时间：2012-04-22T01:05:50.007
> 
> 标签：ruby, database, postgresql, heroku, sinatra

使用 Sinatra Ruby Web 服务器，我无法弄清楚如何让我的 postgres 服务器中的某些字段每隔 X 时间更新一次。

任何人都对每 X 分钟更改一次数据同时仍处理正常 http 请求的方法有任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T01:27:26.503

使用 Heroku 调度程序插件？它允许您每 10 分钟安排一次 rake 任务。

[https://devcenter.heroku.com/articles/scheduler](https://devcenter.heroku.com/articles/scheduler)

# java - 使用 videojs 在播放框架中流式传输视频

> ID：10264416
> 
> 赞同：0
> 
> 时间：2012-04-22T01:09:46.287
> 
> 标签：java, playframework, video-streaming

最近我一直在和我的朋友一起在 play framework 1.2.4 中开发一个 web 应用程序，我们试图使用 videojs 播放器流式传输存储在项目的 /public 目录中的视频。该视频采用 .mp4 格式，但我想这与这个问题无关。我们直接访问视频而不使用任何服务器端脚本。我们在测试中发现了 2 个问题。

1.  视频从未一直缓冲到最后。只有几秒钟的时间总是存储在缓冲区中。

2.  在播放视频时，如果我们按下暂停再播放，视频的播放将完全中断。有时它会永远缓冲视频，有时它看起来会继续播放视频，但它只会显示黑屏而没有声音。

当我们在不是存储在 Web 应用程序中而是从其他一些服务器提供的文件上尝试相同的 videojs 脚本时，它可以完美地工作。即使另一台服务器只是在同一台计算机上运行的 tomcat。因此，我建议这一定是服务器播放用于运行其应用程序的问题。我们使用“play run”命令和默认配置运行应用程序。谁能解释这种奇怪的行为？是否需要在配置中设置一些东西，或者这只是一个错误？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T09:26:18.367

我认为netty / 播放控制器处理公用文件夹中的**范围支持存在问题。**（[http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.35](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.35)）

您应该可以使用 curl 进行测试。例如，如本文所述 [http://linuxandfriends.com/2008/11/01/curl-split-a-file-and-download-simultaneously-from-multiple-locations /](http://linuxandfriends.com/2008/11/01/curl-split-a-file-and-download-simultaneously-from-multiple-locations/)

但是，在**生产**中，您通常会使用 lighttpd/ **nginx**（以允许绑定端口 80）进行游戏，因此公用文件夹中的文件将由 play 以外的其他东西提供服务……那么您应该没有问题。

# google-maps-api-3 - 谷歌地图——在点击事件期间检测元键状态？

> ID：10264418
> 
> 赞同：2
> 
> 时间：2012-04-22T01:09:51.753
> 
> 标签：google-maps-api-3, mouseevent

我正在使用 javascript API 为 Google Maps 开发。我想知道在鼠标单击期间是否按下了 Command 键（在 Mac 上）。但是，我似乎无权访问此类信息：

```
https://developers.google.com/maps/documentation/javascript/reference#MouseEvent 
```

有没有办法解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T01:52:38.047

我认为有可能通过 hack：我没有 Mac，所以我无法测试。我所做的只是替换`ctrlKey`为`metaKey`. 在 JSFiddle 中有一个我无法解决的错误，第一次单击或 meta+click 将始终注册为常规单击。它在 JSFiddle 之外运行良好。

Meta-click 应该打印 latLng。请试一试：

[http://jsfiddle.net/ThraL/5/](http://jsfiddle.net/ThraL/5/)

Windows 版本 (ctrl)

[http://jsfiddle.net/ThraL/4/](http://jsfiddle.net/ThraL/4/)

（看起来你可以写`metaKey || ctrlKey`，但因为我无法测试，所以我会把它们分开）。

```
<!DOCTYPE html>
<html>
  <head>
    <style type="text/css">
      html, body, #map_canvas { margin: 0; padding: 0; height: 100% }
    </style>
    <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript">
      var map;
      var mapOptions = { center: new google.maps.LatLng(0.0, 0.0), zoom: 2,
        mapTypeId: google.maps.MapTypeId.ROADMAP };

      function initialize() {
        map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

      var metadown;
      var clicks = 0;

      $(window).keydown(function(evtobj) {
        if(evtobj.metaKey) { 
          metadown = true;
        } 
        $(window).one("keyup",function(evtobj) {
          metadown = false;
        });
      });

      google.maps.event.addListener(map, 'click', function(event) {
        if(metadown) {
          $("#console").val(event.latLng);
          metadown = false; 
        }
        else {
          $("#console").val("meta not down (" + clicks + ")\n");  
          clicks++;
        }
      });

      }
      google.maps.event.addDomListener(window, 'load', initialize);
    </script>
  </head>
  <body>
<div id="display">
    <textarea id="console" rows="2" cols="30"></textarea>
</div>
    <div id="map_canvas"></div>
  </body>
</html> 
```

# web2py - Web2py - 多选项复选框实现

> ID：10264419
> 
> 赞同：2
> 
> 时间：2012-04-22T01:10:45.880
> 
> 标签：web2py

我正在尝试实现一个表单，其中每个字段都有多个选项，并且必须是复选框行。我想在行标题中显示此表单，并在相应行中显示复选框选项。我还需要数据库表实现方面的帮助。任何帮助将不胜感激。我是 web2py 的新手。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T15:40:44.383

你试过什么了？听起来您想要一个带有布尔值的数据模型：

（在 models/???.py 中——确保它在 db.py 之后执行并且你已经定义了一个 DB）

```
db.define_table('table_name', 
   Field('SomeFieldA', 'boolean')
   Field('SomeFieldB', 'boolean')
   Field('SomeFieldC', 'boolean')
   Field('SomeFieldD', 'boolean')
   ... etc ...
) 
```

您可能必须实现一个自定义表单来获得您想要的布局，因为我想不出一种开箱即用的方式来做到这一点。

在此处阅读有关[自定义表单的信息](http://web2py.com/books/default/chapter/29/7#Custom-forms "自定义表格")。

您需要从以下内容开始：

```
<table>
{{=form.custom.begin}}
  <thead>
    <tr>
    {{ #loop over form field labels... something like:
      for field in form.fields: }}
      <th>{{=field.label}}</th>
    {{ pass }}
    </tr>
  </thead>

  <tbody>
    <tr>
    {{for field in form.fields: }}
      <td>{{  =form.custom.widget[field]  }}</td>
      {{ # or directly access it without a loop with form.custom.widget.SomeFieldA }}
    {{ pass }}
    </tr>
  </tbody>      

  {{=form.custom.submit}}
{{=form.custom.end}} 
</table> 
```

请注意，我没有测试过任何这段代码，我可能会错误地访问表单字段和标签。如果您需要预先填充表单，请在控制器中执行此操作。上面的自定义表单链接也讨论了预填充。

# java - 如何保存 AsyncTask 中生成的数据？

> ID：10264422
> 
> 赞同：0
> 
> 时间：2012-04-22T01:11:52.327
> 
> 标签：java, android, android-asynctask

我正在研究 Android AsyncTask，我希望在我的程序加载期间制作一个进度条。这是我的制作方法。

```
A class is declared here...
private ArrayList<String> result1 = new ArrayList<String>(); //class variable

onCreate()
{
    Some stuff here...
    new ATask().execute();
     for (int i = 0; i <result1.size();i++)
    {
        output = output +result1.get(i) + "\n\n";
    }
    textView.setText(output);
}
private void do0()
{
    ArrayList<Sentence> result = new ArrayList<Sentence>();
    ArrayList<String> result2 = new ArrayList<String>();
    result = do1("link", true); //just some function I am working
    result1 = do2(result,10);//do2 return ArrayList<String>
}
private class ATask extends AsyncTask<String, Void, String>{
    private ProgressDialog progress = null;
    @Override
    protected String doInBackground(String... params) {
        do0();
        return null;
    }

    @Override
    protected void onCancelled() {
        super.onCancelled();
    }

    @Override
    protected void onPostExecute(String result) {
        progress.dismiss();

        //adapter.notifyDataSetChanged();

        super.onPostExecute(result);
    }

    @Override
    protected void onPreExecute() {
        progress = new ProgressDialog(ReadWebPage.this);

        progress.setMessage("Doing...");
        progress.setProgressStyle(ProgressDialog.STYLE_SPINNER);
        progress.show();

        super.onPreExecute();
    }

    @Override
    protected void onProgressUpdate(Void... values) {
        super.onProgressUpdate(values);
    }
}; 
```

我的意图是，在加载进度条时，它会完成`do0()`并修改`result1`，然后我`oncreate`可以用它`result1`来显示在它的`TextView`. 但是`TextView`，在此设置中，我的始终是空的。所以我移动

```
 for (int i = 0; i <result1.size();i++)
    {
        output = output +result1.get(i) + "\n\n";
    }
    textView.setText(output); 
```

进入`do0()`（在 之后`result1 = do2()`），但随后程序将崩溃。我对这些线程设置不熟悉，提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T01:49:18.880

问题在于代码的设计。 `AsyncTask`异步发生，因此只要您调用 execute ，`AsyncTask`其余部分`onCreate`将立即执行。 `AsyncTask`本质上将在一个新线程上运行并与您的`Activity`.

我认为你想要的是在你`TextView`的`onPostExecute`方法中设置你的`AsyncTask`. `onPostExecute`完成后被调用`doInBackground`。

此外，请务必记住，这`doInBackground`发生在后台线程上，因此您无法从其中的代码更改`Activity's`UI。 `onPre/PostExecute`在 UI 线程上运行，因此您可以在那里进行 UI 更改，但这些方法中的任何代码也会阻塞 UI。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T02:33:00.307

`Handler`拥有在主线程上初始化的对象的线程会更好地为您服务。使用处理程序，您可以`post()`在主线程上执行一些小片段——比如更新进度条。您可以从 AsyncTask 执行相同的处理程序技巧，但恕我直言，线程更干净。

所述片段应实现为`Runnable`s. 随意使用嵌套匿名类单线。

# php - intval(...) == floatval(...) 在本地主机上为 FALSE，但在实时 PHP 服务器上为 TRUE

> ID：10264425
> 
> 赞同：0
> 
> 时间：2012-04-22T01:12:59.503
> 
> 标签：php

下面的代码应该检查输入的数字是否是 26 的幂。在 localhost 上，比较在应该为真时评估为假，但是当它在实时 php 服务器上运行时，它按预期工作。

```
#there is an html text input
$foo = $_POST['someval'];

if(intval(log($foo, 26)) == floatval(log($foo, 26))) {
   echo 'yup, that there number is a power of 26';
}
else {
   echo 'nope, definitely not a power of 26';
} 
```

我应该注意，在本地主机上，“如果”有时会评估为真。每隔 26 次幂就会发生这种情况（例如，26 为真，676（26 平方）为假，17576（26 立方）为真）。但是，当它在实时服务器上运行时，一切都按预期工作，并且“if”对于 26 的每个幂都为真。

我无法弄清楚是什么导致了这种差异。实时服务器正在运行 PHP 5.3.8 我尝试了两个不同的本地堆栈（mamp 和 ampps），它们分别运行 PHP 5.3.6 和 5.3.10，并且两者都发生了同样的事情。

我也尝试过编写代码，以便在“if”语句之外完成数学运算，也没有运气。

这不是一个高优先级的问题，因为代码在它应该（活）的地方工作，但它让我觉得存在差异。如果您知道发生了什么，或者您是否有更好的方法来检查一个数字是否是 26 的幂，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T01:18:30.580

由于浮点舍入问题，并且缺乏对准确性的承诺（`log($foo, 26)`可能在内部计算为`log($foo)/log(26)`，这涉及浮点除法），这听起来根本不是您应该指望的事情，更不用说跨越不同的系统。我建议这样做：

```
$foo == pow(26, (int)round(log($foo, 26))) 
```

只要`$foo`适合 PHP 整数类型，它就应该总是准确的。PHP`pow`承诺如果两个参数都是整数并且结果在整数范围内，则结果将是整数。通过找到 的以 26 为底的对数`$foo`，四舍五入，然后将 26 提高到那个幂，这段代码基本上找到了26 的*最接近*的幂`$foo`，然后可以直接比较那个幂`$foo`，看看它们是否相等。

# javascript - IE 会降低超过 6-8 FPS 的动画 GIF 的速度。是否有修复或跨浏览器替代方案（Flash 除外）？

> ID：10264435
> 
> 赞同：3
> 
> 时间：2012-04-22T01:14:53.123
> 
> 标签：javascript, internet-explorer, animation, gif, animated-gif

老实说，直到现在我才注意到，但 IE 实际上会减慢 6-8 FPS（12-16ms/帧）以上的动画 GIF。例如，在 IE 和 Chrome 中打开这个 GIF - 你会看到不同之处：

[http://netanimations.net/Moving-picture-winged-dragon-animated-gif.gif](http://netanimations.net/Moving-picture-winged-dragon-animated-gif.gif)

我的问题是：有没有办法解决这个问题，比如说用javascript？或者是否有所有主要浏览器都支持的替代方案？除了闪光灯。

编辑：我知道 APNG 和 MNG，但支持不是人们所期望的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-22T21:04:46.790

这是一个与浏览器如何实现小 GIF 文件动画延迟有关的老问题。

这里有一篇更好的文章[http://humpy77.deviantart.com/journal/Frame-Delay-Times-for-Animated-GIFs-240992090](http://humpy77.deviantart.com/journal/Frame-Delay-Times-for-Animated-GIFs-240992090)

那篇文章的总结是：不要使用0-1（百分之一秒）的延迟，如果您喜欢IE用户，请避免使用2-5。0.06 秒是第一个跨浏览器安全延迟。

替代方案包括 Flash、SVG、Canvas 和稍微复杂但更跨平台兼容的方法，基于用户代理发送不同的 gif。

这种行为在 IE10 中也有所改变，它现在将显示高达 50FPS（百分之二秒）的 GIF，我相信这使它与其他浏览器保持一致。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T21:42:00.967

Silverlight 是另一种选择。

# django - Django - 禁止（未设置 CSRF cookie。）

> ID：10264437
> 
> 赞同：5
> 
> 时间：2012-04-22T01:15:21.227
> 
> 标签：django, django-forms, django-csrf

我有一个中等流量的 Django 网站（每天大约 4000/5000 次访问）。今天我在settings.py上配置了“LOGGING”选项来发送一封带有“Info”级别的邮件，只要检查是否一切正常...

令我惊讶的是，我收到以下错误：[Django] WARNING (EXTERNAL IP): Forbidden (CSRF cookie not set.)

```
No stack trace available

<WSGIRequest
path:/cadastro/usuario/,
GET:<QueryDict: {}>,
POST:<QueryDict: {**xxxxxxx (some varibles....) and**: u'csrfmiddlewaretoken': [u'4wqRKQXZsTmXJaOkCsGobWyG1rzihc8x'], }>,
COOKIES:{},
META:{'CONTENT_LENGTH': '381',
 'CONTENT_TYPE': 'application/x-www-form-urlencoded',
 'CSRF_COOKIE': 'qzc4i7JdHoQLJ8N5aI9MTlamOZMOKmP0',
 'DOCUMENT_ROOT': '/opt/nginx/html',
 'HTTP_ACCEPT': 'text/html, application/xhtml+xml, */*',
 'HTTP_ACCEPT_ENCODING': 'gzip, deflate',
 'HTTP_ACCEPT_LANGUAGE': 'pt-BR',
 'HTTP_CACHE_CONTROL': 'no-cache',
 'HTTP_CONNECTION': 'Keep-Alive',
 'HTTP_CONTENT_LENGTH': '381',
 'HTTP_CONTENT_TYPE': 'application/x-www-form-urlencoded',
 'HTTP_HOST': 'xxxxxx',
 'HTTP_REFERER': 'http://xxxx/y/z',
 'HTTP_USER_AGENT': 'Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Trident/5.0)',
 'PATH_INFO': u'/y/z',
 'QUERY_STRING': '',
 'REMOTE_ADDR': '187.27.35.123',
 'REMOTE_PORT': '54221',
 'REQUEST_METHOD': 'POST',
 'REQUEST_URI': 'y/z',
 'SCRIPT_NAME': u'',
 'SERVER_NAME': 'xxxxxxx',
 'SERVER_PORT': '80',
 'SERVER_PROTOCOL': 'HTTP/1.1',
 'uwsgi.version': '0.9.6.5',
 'wsgi.errors': <open file 'wsgi_input', mode 'w' at 0xa126338>,
 'wsgi.file_wrapper': <built-in function uwsgi_sendfile>,
 'wsgi.input': <open file 'wsgi_input', mode 'r' at 0xa126a70>,

 'wsgi.multiprocess': True,
 'wsgi.multithread': False,
 'wsgi.run_once': False,
 'wsgi.url_scheme': 'http',
 'wsgi.version': (1, 0)}> 
```

我试图重现这个错误，但我不能。我在 Firefox 和 Chrome 上进行了测试，清理了所有 cookie ......一切都很好。但是我收到这个错误十几次，总是使用不同的 IP，所以我想这不是攻击......我所有的表单都有**{% csrf_token %}** 和**django.middleware.csrf.CsrfViewMiddleware**配置在 MIDDLEWARE_CLASSES .

上面的日志信息很清楚**CSRF_COOKIE**不是空的。我正在使用 Django 1.4。

[更新] 我认为这些用户没有启用 cookie ......所以......问题是：如何将 CSRF 与没有启用 cookie 的用户一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T00:08:49.617

正如我在主要评论中提到的，当由于 CSRF 失败而引发 403 时，您会看到该错误。

您不必担心尝试处理针对未启用 cookie 的用户的 CSRF 保护。CSRF 攻击的本质要求使用浏览器 cookie。如果不使用它们，受 CSRF 保护的请求将失败（如您所见）。因此，您仍然受到保护。

Django 允许您设置特定视图以在 CSRF 失败的情况下用于客户端：[https ://docs.djangoproject.com/en/dev/ref/settings/#std%3asetting-CSRF_FAILURE_VIEW](https://docs.djangoproject.com/en/dev/ref/settings/#std%3asetting-CSRF_FAILURE_VIEW)

真的，除了注意有些请求正试图以无效的方式 POST 到您的服务器之外，您不需要做任何事情。

# xcode - 同一工作区中两个项目之间的目标依赖关系

> ID：10264440
> 
> 赞同：12
> 
> 时间：2012-04-22T01:16:28.613
> 
> 标签：xcode, macos, build, linker

我正在使用 Xcode 4.3 为 OS X 创建一个框架。我创建了一个工作区和一个项目（带有框架目标）以进入该工作区。

现在，我想包含和链接第三方框架，我也添加到**同一个工作区**（但不在我的项目中）。我在“ **Link Binary With Libraries**`+` ”构建阶段单击了按钮，第三方框架简单地出现在可用库列表中。

 **链接的框架在项目导航器中显示为红色，因为尚未构建第三方库（但令人困惑的是，我的项目成功构建了——尽管我还没有尝试*使用*第三方框架）：

![](../Images/a8b6e4875a18dcda0d3d667d02bcaec4.png)

我打算通过将其添加为目标依赖项来解决此问题，但是当我单击`+`“目标依赖项”构建阶段时，第三方目标不会显示在列表中。

**我应该如何正确配置/解决这种依赖关系？**另外，我是否需要创建一个 Copy Files 构建阶段以确保将框架复制到目标的 Frameworks 目录中？我将如何正确设置它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-22T14:02:04.037

我遇到了类似的东西，但使用了静态库。

*   做你为构建框架所做的事情，构建你的应用程序（即使它失败了，框架也应该构建）
*   在应用目标的链接构建阶段删除对框架的引用
*   在 Finder 中找到构建的框架（由您的应用工作区构建的框架）。
*   将其拖放到使用它的应用程序项目中。请注意，这次它显示为黑色（不是红色）
*   单击它，并确保 Xcode 检查器显示“相对于已构建产品”（您可能需要更改它的引用类型），并且路径只是 myframework.framework。
*   检查它是否已添加到应用程序链接阶段（应该）
*   那是您可以在复制/构建阶段使用的那个。**

# html - 表格不是 100% 的 Div 元素宽度

> ID：10264442
> 
> 赞同：2
> 
> 时间：2012-04-22T01:16:40.133
> 
> 标签：html, css, html-table

我正在尝试让表格的宽度为 div 的 100%...

但是当我使用 width=100% 时，它会扩展到边界之外……在不同的设备上使用时……

所以我只是喜欢这张桌子，全宽 - 并且 N/A 按钮右对齐......

似乎它总是在不同的设备上超越边界......

```
 <div class=flist>
<table cellpadding=2 border=1>
<tr>
<td valign=middle>
      <img src="images/plus.png" height=14 width=14 border=0 align=middle> <b>General Stuff</b>
</td>
<td align=right>
      <input type="button" name="CheckAll" value="All N/A" class=verd8></td>
<td>&nbsp;</td>
</tr>
</table>    
 </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T01:21:25.273

举个例子：

```
<html>
<body>
<head>
<style>
.flist{
border:1px solid red;
padding:5px;
width:500px;
}
table{
width:100%;
border:1px solid;
}
</style>
</head>
<div class="flist">
<table cellpadding="2" border="1">
<tr>
<td valign=middle>
     <b>General Stuff</b>
</td>
<td align=right>
      <input type="button" name="CheckAll" value="All N/A" class=verd8></td>
<td>&nbsp;</td>
</tr>
</table>    
 </div>
</body>
</html> 
```

只是一个内联 css 示例，但如果您更改`.flist`表格宽度更改宽度，它会起作用，请注意表格的红色`.flist`与黑色。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T01:20:02.137

```
div.flist{width:500px;}
div.flist table{width:100%;} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T02:36:00.353

这在大多数情况下应该有效。如果您需要移动设备，请改用媒体查询。每边添加 1% = 20px，所以只需减去表格宽度。1% = 10 像素；

```
*{
  box-sizing:border-box;
  -moz-box-sizing:border-box;
  -webkit-box-sizing:border-box;
 }
table{
  width: 100%;
  border-spacing: 0;
  border-collapse: collapse;
  empty-cells:show;
}
table.bordered{
  border-collapse:separate;
  border:1px solid #ccc;
  border-radius:4px;
}
th,td{
  vertical-align:top;
  padding:0.5em;
}
tr:nth-child(2n){
  background-color:#f5f5f5;
} 
```

-

```
<table class="bordered">
    <tbody></tbody>
</table> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-17T16:34:13.773

像这样写表标签

```
<table width=100%></table> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-22T15:37:55.563

这可能有效

将此也添加到 table style="table-layout:fixed"

```
.flist { 
font-family: Verdana; font-size: 13pt; font-weight: bold;
overflow: hidden; 
position: relative;
background-color: #e9e9e9;
padding: 5px;
margin-top: 5px;
margin-left: 1%;
margin-right: 1%;
border: 1px solid #000;
}

.flist > table 
{ 
width: 100%; 
} 

<div class=flist>
<table cellpadding=2 border=0 style="table-layout:fixed">
<tr>
<td valign=middle>
<b>General</b>
</td>
<td align=right>input type="button" name="CheckAll" value="All N/A" class=verd8></td>
</tr>
</table>    
</div> 
```

# version-control - Mercurial：从未知的不同“分支”合并

> ID：10264446
> 
> 赞同：0
> 
> 时间：2012-04-22T01:18:15.337
> 
> 标签：version-control, mercurial, repository

我正在尝试在一个名为 NS-3 的项目上做一些工作，但我的问题不是特定于项目的，所以我想我会在这里以及相关的邮件列表中询问。

基本上，制作了当时当前项目代码的副本，并用该代码制作了一个新的 repo。在“分叉”版本和主干上都完成了工作。

所以克隆了分叉的源， cd in 和`hg pull <latest-dev>`, `hg merge`，虽然它不是一个完美的合并，但不可合并的更改都与一个库更改有关，因此很容易修复（理论上）。自然，这种乐观的尝试未能建立。

现在我不完全确定从这里去哪里，我是 DCVS 的新手，所以请；针对 5 岁儿童的想法！

**我如何找出分叉版本的哪个变更集最后与 dev-trunk 合并，因为它们是独立但相关的存储库？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T02:29:49.570

**您从副本而不是克隆开始的情况：**

如果发生这种情况：

1.  项目存在
2.  制作项目的副本（不是克隆）
3.  `hg init`在每个单独的副本中运行，创建两个*不相关*的存储库
4.  工作在两个副本中完成

然后要合并它们，您希望在两个*不相关*的存储库中的最新执行此操作：

1.  `hg update 0`，它将存储库跳回到它的最早点——它最后一次看起来与另一个相同的点
2.  *从另一个*存储库复制工作目录的内容
3.  `hg commit`，这会创建一个新的头部
4.  `hg merge`，它合并了两个头，还提供了一个*基础*修订，这有助于合并过程。

如果可能，关键是要进行基本修订。DVCS 系统带来的 CVS 和 SVN 所没有的是每次合并都是两个头和最近的共同祖先之间的 3 路合并。通过在两个 repos 看起来相同（副本中的修订版 0）的最后一点创建新头来伪造该共同祖先，从而模拟基本修订版。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T02:36:55.737

**您从克隆而不是副本开始的案例**

这是经典的 DVCS 案例，您不需要做太多事情。只需从另一个克隆进入其中一个`hg pull`并关闭`hg merge`. 如果合并需要输入，您将使用`hg resolve`它来提供它，并且当您完成时`hg commit`。

如果此时您的代码没有构建/运行，那么您只需开始调试。用于`hg blame`查看无法编译的行附近正在执行的操作，并尝试了解正在执行的操作以及如何处理它。

**合并过程越频繁，**合并过程就越容易。每天而不是每月引入上游更改。

您可以打开[GraphLog](http://mercurial.selenic.com/wiki/GraphlogExtension)扩展并使用`hg log -G`命令查看两条开发线的分歧点，但最终合并*是*开发，您只需像处理任何其他软件缺陷一样进行非构建合并.

# java - Java 最佳实践 - 在类变量之前声明构造函数是一件坏事吗？

> ID：10264447
> 
> 赞同：14
> 
> 时间：2012-04-22T01:18:18.240
> 
> 标签：java, coding-style

我正在对一位同事（另一位学生）的 Java 代码进行“静态”代码演练

对我来说，这没有意义。从上到下读取这些“组件”对象在声明之前被实例化（然后在构造函数中使用）。但是，代码可以愉快地编译和运行。这是不好的做法吗？

```
Public Class theObject {

    private static final long aVariable = 123123123123123;

    public theObject(...){

        componentOne = new Component(...);
        componentTwo = new Component(...);

        ...
        ...
        componentOne.doSomething(...);
    }

    private Component componentOne;
    private Component componentTwo;
} 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-04-22T01:28:26.403

Sun Microsystems（现在由 Oracle 接管）于 1998 年发布了其[Java 编码风格指南](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.443.7443&rep=rep1&type=pdf)，其中他们推荐了一个特定的组织来分类声明：

1.  静态变量字段声明
2.  实例变量字段声明
3.  静态初始化器
4.  静态成员内部类声明 [*]
5.  静态方法声明
6.  实例初始化器
7.  实例构造函数声明
8.  实例成员内部类声明 [*]
9.  实例方法声明

请注意，这会将数据声明放在文件的顶部。（[1997 年的早期 Sun 出版物](http://www.oracle.com/technetwork/java/codeconventions-150003.pdf)并未涵盖上述列表中的所有内容。）唯一重要的顺序是在静态字段和实例字段内，并且仅当字段包含引用其他字段的初始化程序时。在初始化之前，您不能在初始化程序中使用字段。类似地，初始化器（第 3 项或第 6 项）不能对字段进行前向引用，除非作为赋值的目标。（有关此类前向引用的更多信息，请参阅[Java 语言规范的第 8.3.3 节](https://docs.oracle.com/javase/specs/jls/se8/html/jls-8.html#jls-8.3.3)。）据我所知，顺序无关紧要。

[*] 上面列表中的术语（从 1998 年指南逐字记录）对于第 4 和第 8 项已经过时。具体来说，来自[Java 嵌套类教程](https://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)：

> **术语：**嵌套类分为两类：静态和非静态。声明的嵌套类`static`称为*静态嵌套类*。非静态嵌套类称为*内部类*。

在现代用法中，没有“静态成员内部类”之类的东西。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-09-01T07:41:18.733

java中的一般声明顺序，（参考：[Java Coding Style Guide](http://www.oracle.com/technetwork/java/javase/documentation/codeconventions-137946.html#182)）

```
 public class DeclarationOrder {

        // Class (static) variables
        public static int publicClassVariable;
        protected static int protectedClassVariable;
        static int defaultClassVariable;
        private static int privateClassVariable;

        // Instance variables
        public int publicInstanceVariable;
        protected int protectedInstanceVariable;
        int defaultInstanceVariable;
        private int privateInstanceVariable;

        // Constructors
        public DeclarationOrder() {
            // Public Constructor
        }
        protected DeclarationOrder(int var) {
            // Protected Constructor
        }
        DeclarationOrder(String var) {
            // Default Constructor
        }
        private DeclarationOrder(Double var) {
            // private Constructor
        }

        // Class (static) Methods
        public static void publicClassMethod(){}
        protected static void protectedStaticMethod(){}
        static void defaultStaticMethod() {}
        private static void privateStaticMethod(){}

        // Instance Methods
        public void publicInstaceMethod() {}
        protected void protectedInstanceMethod() {}
        void defaultInstanceMethod() {}
        private void privateInstanceMethod() {}
    } 
```

每组内的顺序应该是，

1.  上市
2.  受保护
3.  包级别（无访问修饰符）
4.  私人的

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-04-22T01:23:43.777

对此没有真正的共识。大多数人会在类实现的顶部声明类变量，然后是方法，但这不是必需的。一些像 Code Complete 这样的书建议在第一次使用时尽可能地声明变量。这有助于将变量的范围缩小到最小。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-22T01:24:21.013

不，它们在声明之前没有被实例化。*初始化的顺序在 Java 中是固定的，*在代码中放置声明和构造函数的位置无关紧要。

至于约定，这实际上取决于您对什么感到满意。虽然事实上惯例是先声明文件，然后是构造函数，但您的方法与其他方法一样有效，只要它不违反您的性质或公司规定。

此外，在代码中放入更多危险的东西会降低可读性，例如单字母变量或广泛使用不太常见的结构（例如，用于复杂条件的三元运算符）。组织代码是次要问题之一，因为任何体面的 IDE 都可以通过您放置的任何设置重新组织代码。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-04-22T01:21:13.070

声明类成员（方法、属性）的*顺序无关紧要。*按照惯例，通常首先声明所有属性和常量，然后声明方法。

例如，在您的代码中：可以在构造函数中初始化属性*然后*声明属性，这仅仅是因为编译类时将考虑所有属性声明，然后当实际*调用*构造函数时，属性会被发现。请注意，在编译时不会访问构造函数中的属性，这就是它们不会产生错误的原因；它们只能在运行时访问。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-22T01:26:36.643

它违反了正常的约定，并且（因此）对于那些期望遵循正常约定的人来说，它使代码的可读性降低了……即大多数 Java 程序员。

另一方面，如果代码始终如一地执行此操作，并且遵循商定的本地编码约定，那么读者就会习惯它。

*因此， “这是不好的做法吗？”这个*问题的答案。是它取决于您同意的编码约定，以及它对此的说法。

但元答案是，在没有商定的编码约定的情况下进行代码审查是一个非常糟糕的主意。如果没有编码约定，就没有审查代码风格的客观依据。你很可能会得到一个糟糕的结果。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-04-25T09:08:08.237

主要 Java 语言规范在第 8.1.1、8.3.1 和 8.4.3 节中定义了我们必须使用的以下流程：

1.  上市
2.  受保护
3.  私人的
4.  抽象的
5.  静止的
6.  最终的
7.  短暂的
8.  易挥发的
9.  同步的
10.  本国的
11.  严格的fp

**当我们用 Java 编写代码时，我们必须使用这个顺序；）**

[链接到 Java 语言规范](http://docs.oracle.com/javase/specs/jls/se8/html/jls-8.html)

# ios - 如何在动态 Bing 地图上绘制/指定路线（使用 Bing Maps iOS SDK）

> ID：10264448
> 
> 赞同：0
> 
> 时间：2012-04-22T01:18:28.037
> 
> 标签：ios, bing-maps

我已经寻找了几个小时似乎*应该*是一项微不足道的任务。我只是想通过一系列航点（我有地址字符串和地理坐标）绘制一条路线。

Imagery API 让我可以查询静态地图，这似乎是一种常见的解决方案，但我希望在 Bing Maps iOS SDK 提供的动态交互式地图上绘制路线。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T08:56:06.540

“在 iOS SDK 提供的动态、交互式地图上绘制路线。” 这是说你想在 iPhone 上使用 MapKit 吗？

如果是这样的话，那么你可以看看这个：http: [//iphonegeeksworld.wordpress.com/2010/09/08/drawing-routes-onto-mkmapview-using-unofficial-google-maps-directions-api/](http://iphonegeeksworld.wordpress.com/2010/09/08/drawing-routes-onto-mkmapview-using-unofficial-google-maps-directions-api/)

唯一的问题是您需要解码折线，您可以通过跟踪该链接中的链接并修改该代码以适合自己来完成。

# vb.net - 多选文件到数组 VB.Net

> ID：10264450
> 
> 赞同：0
> 
> 时间：2012-04-22T01:18:31.670
> 
> 标签：vb.net, openfiledialog

我正在开发一个程序，我需要用户从 OpenFileDialog 中选择两个文件。我不想将文件名或路径硬编码到程序中。我需要将这些文件的内容显示在列表框中的两列中。

到目前为止，我有以下代码：

```
OpenFileDialog.ShowDialog()
    OpenFileDialog.Filter = "Text Files(.txt)|*.txt"
    OpenFileDialog.Title = "Open A Text File"
    OpenFileDialog.Multiselect = True

    Dim FileArray(1) As String

    Dim objreader As New System.IO.StreamReader(OpenFileDialog.FileName)
    Dim i = 0
    ListBox1.Items.Clear()

    ListBox1.Items.Add("Name" & Space$(40) & "ID Number")

    Do While objreader.Peek() <> -1
        If OpenFileDialog.FileNames.Length = 5 Then
            FileArray(0) = objreader.ReadLine & vbCr
        Else
            FileArray(1) = objreader.ReadLine & vbCr
        End If
        ListBox1.Items.Add(FileArray(0) & Space$(40) & FileArray(1))
    Loop 
```

我认为正在发生的是第一个选择的文件，“Names.txt”被输入 FileArray(0)（因为文件名的长度是 5 个字符），然后被填充到列表框中的正确列中。

但是，当它第二次循环时，第二个文件“IDNumbers.txt”被读取并填充到 FileArray(1) 中（因为它未能通过“If”）并**覆盖**列表框中的第一个数组。

我的问题是如何将每个文件加载到我的 FileArray(1) 中自己的元素中，这样我就可以将它们正确加载到 ListBox 中，然后再操作数据？

# windows-runtime - Metro 风格的应用程序能否安装在市场框架之外？

> ID：10264451
> 
> 赞同：11
> 
> 时间：2012-04-22T01:19:16.710
> 
> 标签：windows-runtime, microsoft-metro, sideloading

我可以开发我的自定义私有[Metro](http://en.wikipedia.org/wiki/Metro_%28design_language%29)风格应用程序并将它们直接部署给我的客户，绕过市场吗？

我能否为我的客户提供 Metro 风格的定制应用程序？

例如，在 Android 中，您可以传输[APK](http://en.wikipedia.org/wiki/APK_%28file_format%29)文件。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-22T04:58:48.647

在 Technet 上有[一篇关于旁加载](http://technet.microsoft.com/en-us/library/hh852635.aspx)Metro 风格应用程序的文章。基本上，要求如下：

*   应用程序必须经过加密签名。
*   将安装它的计算机必须信任签名证书。
*   必须启用*允许所有受信任*的应用程序安装组策略设置。
*   要运行应用程序，计算机必须加入域。

只要您的客户处于企业环境中，这些要求就不成问题。在企业环境之外，您需要通过 Windows 商店分发您的应用程序。

至少对于 Windows 8 的消费者预览版，侧载也适用于具有有效开发人员许可证的机器。我找不到任何官方信息，但这可能会在最终版本中保持不变，以便测试应用程序。

编辑：一些附加信息刚刚[发布](http://blogs.msdn.com/b/windowsstore/archive/2012/04/25/deploying-metro-style-apps-to-businesses.aspx)。关键点：

*   旁加载将在 Windows 8 Enterprise Edition 和 Windows 8 Server 版本中启用。它目前也在 Windows 8 Consumer Preview 和 Windows Server 8 Beta 中启用。
*   在其他版本的 Windows 8 中，需要激活特殊的产品密钥才能启用旁加载。在这种情况下，计算机可能不需要加入域。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-22T01:24:30.067

有点……不是真的。

Windows 8 企业版将能够侧载 Metro 风格的应用程序。这个想法是您可以将内部应用程序部署到您的企业。这意味着您的消费者/零售 PC 或平板电脑随附的非企业版可能不支持 Metro 风格应用程序的侧面加载。

见*[不得逃离商店的平民！](http://channel9.msdn.com/Forums/Coffeehouse/No-escape-from-the-store-for-the-plebs)*.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-22T01:24:54.460

我不明白为什么不。我在 Windows 8 上使用过 Visual Studio 11 测试版，其中一个模板用于 Metro 应用程序。它只是一个 .NET 可执行文件。因此，只要您可以像今天一样将其部署到您的机器上，就应该没有问题。

# javascript - 是否可以从 javascript 中调用 rails helper 方法？

> ID：10264453
> 
> 赞同：2
> 
> 时间：2012-04-22T01:19:32.160
> 
> 标签：javascript, ruby-on-rails, helper

我的 application.html.erb [查看文件] 中有一个 javascript 代码块，它接收来自外部 api 的事件。我想做的就是当在javascript代码块中收到事件时，我需要在[application_helper.rb]中执行一个辅助方法。

我已经浏览了这里的大部分堆栈，但找不到任何相关的答案。

javascript 代码块如下所示：

```
var pusher = new Pusher('b00c9657a0a896f3ec26');
var channel = pusher.subscribe('NewOrders');
channel.bind('NewOrderArrived', function(data) {

    [ I NEED TO CALL THE RAILS HELPER METHOD HERE ]

console.log("got u")
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T01:38:31.570

不直接，不。正如 Dave Newton 在评论中所说，Ruby 在服务器上执行，JS 在客户端上执行。你想要做的是这样的：

```
var pusher = new Pusher('b00c9657a0a896f3ec26');
var channel = pusher.subscribe('NewOrders');
channel.bind('NewOrderArrived', function(data) {
  $.get('<%= url_for :some_controller_method_that_calls_helper %>', function(response){
    // the response variable will contain the output of the controller method
  });
  console.log("got u")
}); 
```

# spring-mvc - LDAP CRUD 与 Spring Roo

> ID：10264454
> 
> 赞同：0
> 
> 时间：2012-04-22T01:19:50.520
> 
> 标签：spring-mvc, spring-security, spring-roo, spring-ldap

目前正在使用 Spring Roo 构建系统。可以使用带有 Spring Security 的 LDAP 服务器登录。但无法理解如何使用 Spring Roo 配置 LDAP CRUD。

Roo 自动生成 MVC。从这里开始，我想得修改contoller，applicationContext.xml，Entity classes roo 自动生成。如果有人知道，请告诉我。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T12:42:37.553

Spring Roo（据我所知）不会从 LDAP 存储库生成域对象。也就是说，您必须自己对 LDAP 数据库进行“CRUD”操作。

您仍然可以通过[Spring LDAP](http://static.springsource.org/spring-ldap/docs/1.3.x/reference/html/)使用 Spring 来执行此操作。

您可能还想看看：[https ://stackoverflow.com/questions/389746/ldap-java-library](https://stackoverflow.com/questions/389746/ldap-java-library)

恕我直言，我发现 LDAP Java 库和 LDAP 通常过于混乱。所以提前同情你的痛苦。

# javascript - Facebook Share 仅在用户登录后才有效？

> ID：10264457
> 
> 赞同：3
> 
> 时间：2012-04-22T01:20:37.160
> 
> 标签：javascript, facebook, facebook-sharer

我希望这不是重复的，但我以前没有看到过这个解释。我有一个非常基本的 Facebook Share 实现，我正在尝试使用：

`<a name="fb_share" type="button" share_url="http://www.google.com"></a> <script src="http://static.ak.fbcdn.net/connect.php/js/FB.Share" type="text/javascript"> </script>`

**问题是**：我第一次点击“分享”按钮时，它提示我登录 Facebook。当我登录时，它直接将我带到我的新闻提要，并且不显示我试图分享的链接。但是如果我登录，关闭窗口，然后重新单击我的“共享”按钮，它会显示我正在尝试共享的链接。

我的代码中是否缺少某些内容？如果这有所作为，我正在使用 IE9。

**编辑：**它似乎在 Chrome 中运行良好，但在 Safari 中也不起作用。

**编辑 2**：在尝试将 Juicy Scripter 的解决方案与 Feed 对话框一起使用后，我现在遇到了以下代码的问题。在提示我登录 Facebook 后，我收到一条红色错误消息，上面写着“发生错误，请稍后再试”。谁能看到我对以下代码可能做错了什么？此外，是否有“最佳实践”让我的链接成为实际的 Facebook 按钮（就像共享选项一样？）

`<a onclick='postToFacebook(); return false;'>FB post</a>`

```
 <script type="text/javascript">
        function postToFacebook() {
            FB.init();
            FB.ui({ method: 'feed', link: "http://www.google.com" });
        }
    </script>` 
```

提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T02:48:37.650

我尝试了调用该共享对话框的替代方法：使用`FB.ui({"method": "stream.share", "u": "http://www.google.com"});`和通过直接 url `https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.google.com`。

他们都给了我糟糕的用户体验，让我在 Safari 中登录 Facebook 后将我带到我的新闻提要（我手边没有 IE9，但我认为它是一样的）。

我认为您对此无能为力。

此外，Facebook 已弃用分享按钮，取而代之的是点赞按钮。请参阅[https://developers.facebook.com/docs/share/](https://developers.facebook.com/docs/share/)：

> Share 按钮已被弃用，取而代之的是 Like 按钮，并且将不再受支持。请尽可能使用“赞”按钮为您的应用带来最大流量。

我在 Safari 中测试了注销的 Like 按钮体验。我单击“赞”，它会打开一个弹出窗口以登录 Facebook，登录后弹出窗口关闭，但我必须再次单击“赞”按钮才能计数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T07:11:27.497

正如其他答案已经指出的那样，[共享按钮](https://developers.facebook.com/docs/share/)已被弃用，因此最好避免使用它。

使用[提要对话框](https://developers.facebook.com/docs/reference/dialogs/feed)在用户提要上发布内容。出于一般目的，下一个代码可用于共享当前页面链接（有关其他参数，请参阅[文档）：](https://developers.facebook.com/docs/reference/dialogs/feed)

```
FB.ui({method: 'feed', link: document.location.href}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T19:10:08.553

我有同样的问题。这是 Safari 在用户登录后不会使用内容预先填充对话框。我使用了 FB 提要对话框的**Direct URL**方法，现在一切似乎都在 Safari 中工作。

更多信息[在这里](https://developers.facebook.com/docs/reference/dialogs/feed/)。

感谢上面所有回答的人。

# python - Python 中的递归生成器

> ID：10264459
> 
> 赞同：9
> 
> 时间：2012-04-22T01:20:43.103
> 
> 标签：python, recursion, generator, bioinformatics

我编写了一个函数来返回一个生成器，该生成器包含给定长度的子字符串的每个唯一组合，其中包含来自主字符串的 n 个以上元素。

举例说明：

如果我有 'abcdefghi' 和长度为 2 的探针，以及每个列表 4 个元素的阈值，我想得到：

```
['ab', 'cd', 'ef', 'gh']
['ab', 'de', 'fg', 'hi']
['bc', 'de', 'fg', 'hi'] 
```

我对这个问题的第一次尝试涉及返回一个列表列表。这最终溢出了计算机的内存。作为粗略的辅助解决方案，我创建了一个执行类似操作的生成器。问题是我创建了一个调用自身的嵌套生成器。当我运行这个函数时，它似乎只是在内部 for 循环中循环，而实际上并没有再次调用它自己。我认为生成器会根据需要在递归漏洞之前尽可能远，直到它遇到 yield 语句。任何线索发生了什么？

```
def get_next_probe(self, current_probe_list, probes, unit_length):
    if isinstance(current_probe_list, list):
        last_probe=current_probe_list[-1]
        available_probes = [candidate for candidate in probes if candidate.start>last_probe.end]
    else:
        available_probes = [candidate for candidate in probes if candidate.start<unit_length]

    if available_probes:

        max_position=min([probe.end for probe in available_probes])
        available_probes2=[probe for probe in available_probes if max_position+1>probe.start]

        for new_last_probe in available_probes2:
            new_list=list(current_probe_list)
            new_list.append(new_last_probe)
            self.get_next_probe(new_list, probes, unit_length)

    else:
        if len(current_probe_list)>=self.num_units:
            yield current_probe_list 
```

如果将产量更改为打印，则效果很好！我会很感激我能得到的任何帮助。我意识到这不是此类搜索问题的最佳实现，似乎从 get_next_probe 的最后一次调用中返回找到的位置列表并过滤此列表以查找不重叠 new_last_probe.end 的元素会更有效率...但这对我来说写起来容易得多。任何算法输入仍然会受到赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-22T02:00:03.600

> 我认为生成器会根据需要在递归漏洞之前尽可能远，直到它遇到 yield 语句

它会很好地递归，但是要让`yield`ed 值向外传播，您需要明确地执行它 - 就像它是 a 一样`return`，您需要明确地`return`每次递归的结果。所以，而不是：

```
 self.get_next_probe(new_list, probes, unit_length) 
```

你会做这样的事情：

```
 for val in self.get_next_probe(new_list, probes, unit_length):
     yield val 
```

或者，如果您使用的是 Python 3.3 或更新版本，您也可以这样做：

```
yield from self.get_next_probe(new_list, probes, unit_length) 
```

# python - 在python中读取文件中的下一个单词

> ID：10264460
> 
> 赞同：9
> 
> 时间：2012-04-22T01:20:54.323
> 
> 标签：python

我在 python 的文件中寻找一些单词。找到每个单词后，我需要从文件中读取接下来的两个单词。我一直在寻找一些解决方案，但我找不到只阅读接下来的单词。

```
# offsetFile - file pointer
# searchTerms - list of words

for line in offsetFile:
    for word in searchTerms:
        if word in line:
           # here get the next two terms after the word 
```

感谢您的时间。

更新：只需要第一次出现。实际上，在这种情况下，该词只可能出现一次。

文件：

```
accept 42 2820 access 183 3145 accid 1 4589 algebra 153 16272 algem 4 17439 algol 202 6530 
```

词：['访问'，'代数']

当我遇到“访问”和“代数”时搜索文件，我分别需要 183 3145 和 153 16272 的值。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-22T01:37:27.420

解决这个问题的一种简单方法是使用生成器读取文件，该生成器一次从文件中生成一个单词。

```
def words(fileobj):
    for line in fileobj:
        for word in line.split():
            yield word 
```

然后找到您感兴趣的单词并阅读接下来的两个单词：

```
with open("offsetfile.txt") as wordfile:
    wordgen = words(wordfile)
    for word in wordgen:
        if word in searchterms:   # searchterms should be a set() to make this fast
            break
    else:
        word = None               # makes sure word is None if the word wasn't found

    foundwords = [word, next(wordgen, None), next(wordgen, None)] 
```

现在`foundwords[0]`是您找到的单词，`foundwords[1]`是之后的单词，`foundwords[2]`是之后的第二个单词。如果没有足够的单词，则列表的一个或多个元素将是`None`.

*如果您想强制*它仅在一行内匹配，这会稍微复杂一些，但通常您可以将文件视为只是一个单词序列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T11:49:19.140

```
 def searchTerm(offsetFile, searchTerms):
            # remove any found words from this list; if empty we can exit
            searchThese = searchTerms[:]
            for line in offsetFile:
                    words_in_line = line.split()
                    # Use this list comprehension if always two numbers continue a word.
                    # Else use words_in_line.
                    for word in [w for i, w in enumerate(words_in_line) if i % 3 == 0]:
                            # No more words to search.
                            if not searchThese:
                                    return
                            # Search remaining words.
                            if word in searchThese:
                                    searchThese.remove(word)
                                    i = words_in_line.index(word)
                                    print words_in_line[i:i+3] 
```

对于“访问”、“代数”，我得到以下结果：

['访问'，'183'，'3145']
['代数'，'153'，'16272']

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T01:40:04.390

如果您只需要检索前两个单词，只需执行以下操作：

```
offsetFile.readline().split()[:2]

```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-22T01:47:42.747

```
word = '3' #Your word
delim = ',' #Your delim

with open('test_file.txt') as f:
    for line in f:
        if word in line:
            s_line = line.strip().split(delim)
            two_words = (s_line[s_line.index(word) + 1],\
            s_line[s_line.index(word) + 2])
            break 
```

# html - 可以将 figcaption 限制为响应大小的图像的宽度吗？

> ID：10264463
> 
> 赞同：20
> 
> 时间：2012-04-22T01:21:17.117
> 
> 标签：html, css

假设我有以下 HTML：

```
<figure>
<img alt="Sun" src="sun.gif" width="256" height="256" />
<figcaption>The Sun - a sinister and destructive force. Image from
the SOHO research facility.</figcaption>
</figure> 
```

如果我想让文本换行到图像的宽度，我需要这个 CSS：

```
figure {
    display: table;
    width: 1px;
} 
```

如果我希望图像是“响应式的”——也就是说，不大于视口——我也需要这个 CSS：

```
img {
    max-width: 100%;
} 
```

但是将这两者结合起来会导致一团糟！现在`img`' 的父级有一个明确的宽度集，这`max-width`会导致整个图形非常非常小（虽然不完全是`1px`）。

那么是否可以使用 CSS（2 或 3）来实现图像标题包装**到**不比图像宽，以及图像不比视口宽？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-11-13T15:19:27.730

我遇到了同样的问题，并且受此启发，提出了[一个](https://github.com/milohuang/reverie/pull/81)相当[简洁的解决方案](http://jsfiddle.net/cherryflavourpez/ya913c3t/)。

HTML：

```
<figure>
   <img src="http://www.placehold.it/300x150" alt="" />
   <figcaption>Make me as long as you like</figcaption>
</figure>​ 
```

CSS：

```
figure {
   display: table;
   padding: 5px;
   background-color: #fff;
   font-size: .875em;

}

figure img {
   display: block;
   max-width: 100%;
}

figcaption {
   display: table-caption;
   caption-side: bottom;
   background: #fff;
   padding: 0 5px 5px;
}​ 
```

这可确保`figcaption`不超过 的宽度`figure`，同时允许您保留`max-width`图像。适用于所有优秀的浏览器和 IE8+。

图形的宽度将是图像的原始宽度，除非该宽度以其他方式受到限制。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-05T10:25:36.443

> 那么是否可以使用 CSS（2 或 3）来实现图像标题包装到不比图像宽，以及图像不比视口宽？

是的。只需在`img`-`max-width: 100vw;`而不是 % -上使用视口单位`max-width: 100%;`

## [演示](http://jsfiddle.net/danield770/x20vc1n4/5/)

**只是为了完整性：**

还有其他 2 种技术可以让文本换行到图像的宽度：

1) 设置`display: table-caption;`在`figcaption`

## [演示](http://jsfiddle.net/danield770/x20vc1n4/6/)

2) 设置`width: min-content`在`figure`

## [演示](http://jsfiddle.net/danield770/x20vc1n4/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T01:39:19.880

图像缩放重要吗？如果没有，请考虑使用背景图像。

**纯 CSS**：

```
<figure>
<div class="caption">
<figcaption>The Sun - a sinister and destructive force. Image from
the SOHO research facility.</figcaption>
</div>
</figure>
<style type="text/css">
figure{display:table;width:1px;position:relative;}
figure div.caption{
background:url(sun.gif) no-repeat 0 0 scroll;
width:256px;
height:256px;
position:absolute;
}
</style> 
```

**带内联样式的 CSS：**

```
<figure>
<div class="caption" style="background:url(sun.gif) no-repeat 0 0 scroll;width:256px;height:256px;">
<figcaption>The Sun - a sinister and destructive force. Image from
the SOHO research facility.</figcaption>
</div>
</figure>
<style type="text/css">
figure{display:table;width:1px;position:relative;}
figure div.caption{position:absolute;}
</style> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-04T12:39:18.177

超级老问题，但我目前处于同样的情况，我想我找到了一个非常简单的解决方案。诚然，我只在最新版本中对此进行了测试，目前是：IE 11 FF 37 Chrome 40

```
<figure>
   <img>
   <figcaption>
</figure>

figure {
   display: table;
   width: 50px; /* Set this to the minimum caption width */
} 
```

就是这样。我不知道这是否是将来会修复的怪癖，但它现在运行良好。如果图片大于 50px，figure 和 figcaption 会自动调整大小。如果小于50px，则标题保持50px；

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-03T22:39:03.480

因为我们今天有 flexbox，所以这可能也适用。以下将根据图像宽度自动调整，因此不要在样式表中设置硬编码值。（Yuk！）一定要遵循今天的最佳实践，并确保图像同时具有高度和宽度属性。

```
figure {
float: left;
margin-right: 1em;
margin-bottom: 1em;
display: inline-flex;
flex-wrap: wrap;
}

figcaption {
width: min-content;
flex: 1; 
}

figure > img {
flex: 1 0 100%;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-14T22:49:43.990

如果使用 Bootstrap，您可以通过设置断点宽度来轻松解决问题，例如 class="col-12 col-md-6 col-lg-5 col-xl-4"。图像及其标题都将很好地适应给定的尺寸，如果标题对于其图像宽度来说太长，它将适当地换行。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-08-30T13:08:07.550

> 如果我想让文本换行到图像的宽度，我需要这个 CSS：[...]

而不是硬编码大小使用`min-content`.

```
figure {
    display: block;
    border: 1px dotted blue;
    margin: 3px;
}
figure>figure {
    display: inline-block;
    border: 2px solid red;
    width: min-content;
}
```

```
<figure>
	<figure>
	 <img src="https://dummyimage.com/200x100" alt="An image of a bunny rabbit."/>
		<figcaption>Lorem ipsum  </figcaption>
	</figure>
	<figure>
	 <img src="https://dummyimage.com/200x100"  alt="An image of a bunny rabbit." />
		<figcaption>Lorem ipsum dolor sit amet, consectetur</figcaption>
	</figure>
	<figure>
	 <img src="https://dummyimage.com/200x100" alt="An image of a bunny rabbit."/>
		<figcaption>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Repellat, molestiae, similique ullam labore soluta autem </figcaption>
	</figure>
	<figure>
		 <img src="https://dummyimage.com/200x100" alt="An image of a bunny rabbit."/>
		<figcaption>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Repellat, molestiae, similique ullam labore soluta autem placeat officia </figcaption>
	</figure>
</figure>
```

# visual-studio - Visual Studio - 禁止 web.config 警告

> ID：10264468
> 
> 赞同：2
> 
> 时间：2012-04-22T01:22:56.620
> 
> 标签：visual-studio, web-config, compiler-warnings, suppress-warnings

我的 Visual Studio 错误列表中出现了以下相当烦人的警告：

`The element 'behavior' has invalid child element 'silverlightFaults'. List of possible elements expected: 'clientVia, callbackDebug, callbackTimeouts, clear, clientCredentials, transactedBatching, dataContractSerializer, dispatcherSynchronization, remove, synchronousReceive, enableWebScript, webHttp, endpointDiscovery, soapProcessing'.`

它源自 web.config。应用程序编译得很好，我只想抑制错误。

什么不起作用：

*   右键单击 > 抑制（这不是 fxcop 错误）
*   在构建窗口中找到警告 ID 并通过项目属性对话框将其抑制（警告不会显示在构建窗口中）。

有什么办法可以隐藏这个警告，还是我必须忍受它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T02:07:07.020

找到解决方案。您可以更新模式文件 VS 再次验证以消除警告。它仅适用于您的本地电脑，但如果您对像我这样的警告保持警惕，那么它是值得的。

*   在位于以下位置的 Visual Studio 中打开架构文件：

`C:\Program Files (x86)\Microsoft Visual Studio 10.0\Xml\Schemas\DotNetConfig.xsd`

*   单击链接以打开 XML 模式资源管理器

*   找到节点 system.serviceModel\behaviors\endpointBehaviors\behavior 并双击它。

![XML 模式资源管理器](../Images/afd17b7dbb5bb04a4d45473c0a318b54.png)

这会将您带到架构文件中的违规区域，该区域以：

`<xs:element name="behavior" vs:help="configuration/system.serviceModel/behaviors/endpointBehaviors/behavior">`

下面两行，你会看到：

`<xs:choice minOccurs="0" maxOccurs="unbounded">`

在该节点内是您要添加违规元素的位置。就我而言，我添加了以下内容： `<xs:element name="silverlightFaults"> </xs:element>`

*   保存文件，导航回 web.config 并查看警告已消失。

当然，请确保在执行此操作之前对文件进行备份，以防出现任何问题。

# java - 复合 JTree 节点允许事件传递到下面的对象

> ID：10264469
> 
> 赞同：3
> 
> 时间：2012-04-22T01:23:05.973
> 
> 标签：java, swing, jtree, renderer

我正在尝试创建一个 JTree，其中一些节点是包含 JLabel 和 JButton 的复合对象。Node 代表 JLabel 显示的服务器和端口，JButton 将使用 Desktop API 打开默认浏览器并转到 URL。

我已经阅读了以下内容，并尽可能密切关注它们。节点以我想要的方式显示（主要是 - 我可以稍后处理它）但是当我尝试单击按钮时，JTree 正在响应事件，而不是按钮。

[java swing：将自定义图形按钮添加到 JTree 项](https://stackoverflow.com/questions/3510253/java-swing-add-custom-graphical-button-to-jtree-item)

[http://www.java2s.com/Code/Java/Swing-JFC/TreeCellRenderer.htm](http://www.java2s.com/Code/Java/Swing-JFC/TreeCellRenderer.htm)

[https://stackoverflow.com/a/3769158/1344282](https://stackoverflow.com/a/3769158/1344282)

我需要知道如何允许事件通过 JTree，以便它们由下面的对象处理 - JButton 或 JLabel。

这是我的 TreeCellEditor：

```
public class UrlValidationCellEditor extends DefaultTreeCellEditor
{
    public UrlValidationCellEditor(JTree tree, DefaultTreeCellRenderer renderer)
    {
        super(tree, renderer);
    }

    @Override
    public Component getTreeCellEditorComponent(JTree tree, Object value,
            boolean isSelected, boolean expanded, boolean leaf, int row)
    {
        return renderer.getTreeCellRendererComponent(tree, value, true, expanded, leaf, row, true);
    }

    @Override
    public boolean isCellEditable(EventObject anEvent)
    {
        return true; // Or make this conditional depending on the node
    }
} 
```

这是 TreeCellRenderer：

```
public class UrlValidationRenderer extends DefaultTreeCellRenderer implements TreeCellRenderer
{
    JLabel titleLabel;
    UrlGoButton goButton;

    JPanel renderer;

    DefaultTreeCellRenderer defaultRenderer = new DefaultTreeCellRenderer();

    public UrlValidationRenderer()
    {
        renderer = new JPanel(new GridLayout(1, 2));
        titleLabel = new JLabel(" ");
        titleLabel.setForeground(Color.blue);
        renderer.add(titleLabel);
        goButton = new UrlGoButton();
        renderer.add(goButton);
        renderer.setBorder(BorderFactory.createLineBorder(Color.black));
        backgroundSelectionColor = defaultRenderer
            .getBackgroundSelectionColor();
        backgroundNonSelectionColor = defaultRenderer
            .getBackgroundNonSelectionColor();
    }

    @Override
    public Component getTreeCellRendererComponent(JTree tree, Object value,
      boolean selected, boolean expanded, boolean leaf, int row,
      boolean hasFocus)
    {
        Component returnValue = null;
        if ((value != null) && (value instanceof DefaultMutableTreeNode))
        {
          Object userObject = ((DefaultMutableTreeNode) value)
              .getUserObject();
          if (userObject instanceof UrlValidation)
          {
                UrlValidation validationResult = (UrlValidation) userObject;
                titleLabel.setText(validationResult.getServer()+":"+validationResult.getPort());
                goButton.setUrl(validationResult.getUrl());

                if (selected) {
                  renderer.setBackground(backgroundSelectionColor);
                } else {
                  renderer.setBackground(backgroundNonSelectionColor);
                }
                renderer.setEnabled(tree.isEnabled());
                returnValue = renderer;
          }
        }
        if (returnValue == null)
        {
          returnValue = defaultRenderer.getTreeCellRendererComponent(tree,
              value, selected, expanded, leaf, row, hasFocus);
        }
        return returnValue;
    }

} 
```

我将不胜感激任何见解或建议。谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-22T01:41:48.320

渲染器不能以这种方式工作。它们被用作橡皮图章，这意味着实际上只有一个渲染器实例在绘制 JList 时被绘制在整个地方。所以它不能处理鼠标输入，因为对象并不真正存在——它们只是被绘制出来的。

为了将鼠标事件传递给下面的对象，您需要实现一个单元格编辑器。有时，编辑器看起来与渲染器不同（例如，字符串渲染器是标签，编辑器是文本字段）。按照这个逻辑，编辑器必须使用组件的另一个实例来实现。

现在您将渲染按钮并使用它们进行操作（即编辑）。编辑器必须是另一个 JButton 实例，与渲染器不同。将按钮实现为渲染器很容易，但棘手的部分是作为编辑器来实现。您需要扩展 AbstractCellEditor 并实现 TreeCellEditor**和 ActionListener**。该按钮是编辑器类的一个字段。在编辑器类的构造函数中，初始化按钮**并将其添加*为*按钮的新动作侦听器**。在 getTreeCellEditorComponent 方法中，您只需返回按钮。在 actionPerformed 中，您调用按钮按下时需要执行的任何代码**，然后调用 stopCellEditing()**。

这种方式对我有用。

我制作了一个 SSCCE 来演示字符串树的用法

```
public class Start
{
    public static class ButtonCellEditor extends AbstractCellEditor implements TreeCellEditor, ActionListener, MouseListener
    {
        private JButton button;
        private JLabel label;
        private JPanel panel;
        private Object value;

        public ButtonCellEditor(){
            panel = new JPanel(new BorderLayout());
            button = new JButton("Press me!");
            button.addActionListener(this);
            label = new JLabel();
            label.addMouseListener(this);
            panel.add(button, BorderLayout.EAST);
            panel.add(label);
        }

        @Override public Object getCellEditorValue(){
            return value.toString();
        }

        @Override public void actionPerformed(ActionEvent e){
            String val = value.toString();
            System.out.println("Pressed: " + val);
            stopCellEditing();
        }

        @Override public Component getTreeCellEditorComponent(JTree tree, Object value, boolean isSelected, boolean expanded, boolean leaf, int row){
            this.value = value;
            label.setText(value.toString());
            return panel;
        }

        @Override public void mouseClicked(MouseEvent e){
        }

        @Override public void mousePressed(MouseEvent e){
            String val = value.toString();
            System.out.println("Clicked: " + val);
            stopCellEditing();
        }

        @Override public void mouseReleased(MouseEvent e){
        }

        @Override public void mouseEntered(MouseEvent e){
        }

        @Override public void mouseExited(MouseEvent e){
        }

    }

    public static class ButtonCellRenderer extends JPanel implements TreeCellRenderer
    {
        JButton button;
        JLabel label;

        ButtonCellRenderer(){
            super(new BorderLayout());
            button = new JButton("Press me!");
            label = new JLabel();
            add(button, BorderLayout.EAST);
            add(label);
        }

        @Override public Component getTreeCellRendererComponent(JTree tree, Object value, boolean selected, boolean expanded, boolean leaf, int row, boolean hasFocus){
            label.setText(value.toString());
            return this;
        }

    }

    public static void main(String[] args){
        JTree tree = new JTree();
        tree.setEditable(true);
        tree.setCellRenderer(new ButtonCellRenderer());
        tree.setCellEditor(new ButtonCellEditor());

        JFrame test = new JFrame();
        test.add(new JScrollPane(tree));
        test.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        test.setSize(500, 500);
        test.setLocationRelativeTo(null);
        test.setVisible(true);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T15:09:57.300

> 该节点应该有两个部分，一个标签和一个按钮。当用户单击标签时，有关节点的一些详细信息应出现在 GUI 的不同部分。当用户单击按钮时，它应该会打开一个浏览器窗口。..

不要那样做。相反，只有树中的标签。将按钮添加到显示“有关节点的详细信息”的同一 GUI。

# java - 尝试乘法和显示双打时出现错误android

> ID：10264475
> 
> 赞同：0
> 
> 时间：2012-04-22T01:24:13.523
> 
> 标签：java, android, logcat, android-logcat

在尝试将 textviews 文本设置为数字时，由于某种原因，我总是遇到问题。在下面的代码中，我试图制作一个小费计算器，但是当我运行应用程序时，它会强制关闭。当我删除 OnClick 侦听器中的项目时，该应用程序运行良好。我将在代码之后发布 logcat。请告诉我任何其他有用的信息，我可以发布以提高我的问题得到回答的机会。

```
billAmount = (EditText) findViewById(R.id.billAmount);
    tipPercent = (EditText) findViewById(R.id.tipPercent); 
```

这些是editTexts。

```
 @Override
public void onClick(View v) {
    switch (v.getId()) {
    case R.id.calculateTip:
        double billAmt = Double.parseDouble(billAmount.toString());
        double tipAmt = Double.parseDouble(tipPercent.toString());
        double billtip = (billAmt * tipAmt) / 100;
        totalTip.setText("" + Double.toString(billtip));
        break;
    }
} 
```

这是日志猫

```
04-22 01:20:20.104: W/KeyCharacterMap(589): No keyboard for id 0
04-22 01:20:20.104: W/KeyCharacterMap(589): Using default keymap:           /system/usr/keychars/qwerty.kcm.bin
04-22 01:20:24.174: D/AndroidRuntime(589): Shutting down VM
04-22 01:20:24.174: W/dalvikvm(589): threadid=1: thread exiting with uncaught exception     (group=0x4001d800)
04-22 01:20:24.195: E/AndroidRuntime(589): FATAL EXCEPTION: main
04-22 01:20:24.195: E/AndroidRuntime(589): java.lang.NumberFormatException:     android.widget.EditText@44f54a78
04-22 01:20:24.195: E/AndroidRuntime(589):  at     org.apache.harmony.luni.util.FloatingPointParser.initialParse(FloatingPointParser.java:130)
04-22 01:20:24.195: E/AndroidRuntime(589):  at     org.apache.harmony.luni.util.FloatingPointParser.parseDouble(FloatingPointParser.java:281)
04-22 01:20:24.195: E/AndroidRuntime(589):  at     java.lang.Double.parseDouble(Double.java:287)
04-22 01:20:24.195: E/AndroidRuntime(589):  at     com.tool.TipCalculator.onClick(TipCalculator.java:38)
04-22 01:20:24.195: E/AndroidRuntime(589):  at     android.view.View.performClick(View.java:2408)
04-22 01:20:24.195: E/AndroidRuntime(589):  at     android.view.View$PerformClick.run(View.java:8816)
04-22 01:20:24.195: E/AndroidRuntime(589):  at     android.os.Handler.handleCallback(Handler.java:587)
04-22 01:20:24.195: E/AndroidRuntime(589):  at     android.os.Handler.dispatchMessage(Handler.java:92)
04-22 01:20:24.195: E/AndroidRuntime(589):  at android.os.Looper.loop(Looper.java:123)
04-22 01:20:24.195: E/AndroidRuntime(589):  at     android.app.ActivityThread.main(ActivityThread.java:4627)
04-22 01:20:24.195: E/AndroidRuntime(589):  at     java.lang.reflect.Method.invokeNative(Native Method)
04-22 01:20:24.195: E/AndroidRuntime(589):  at     java.lang.reflect.Method.invoke(Method.java:521)
04-22 01:20:24.195: E/AndroidRuntime(589):  at     com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-22 01:20:24.195: E/AndroidRuntime(589):  at     com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-22 01:20:24.195: E/AndroidRuntime(589):  at dalvik.system.NativeStart.main(Native     Method) 
```

我很确定我已经解决了这个问题。只是在做

```
Double.parseDouble(editText.toString(); 
```

不工作。我需要添加

```
Double.parseDouble(editText.getText().toString(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T01:37:38.480

使用`billAmount.getText().toString();`代替`billAmount.toString();`

和同样的`tipPercent`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T01:37:27.997

您需要检查 EditText 字段是否具有合法的双精度值。例外是试图解析看起来不像双精度的东西。

# iphone - 全局布尔变量。这是 iPhone 上的最佳实践吗？

> ID：10264477
> 
> 赞同：0
> 
> 时间：2012-04-22T01:24:24.443
> 
> 标签：iphone, objective-c, uinavigationcontroller, global-variables

我想跟踪我何时从一个视图移动到另一个视图。

所以我创建了一个全局布尔值来跟踪这一点。

这行得通，但这是最佳做法吗？我应该把它变成财产吗？

谢谢！

```
bool didNavigateToFullWebView; 

    viewDidAppear: (BOOL) animated {
     if(didNavigateToFullWebView) {
          //Load differently depending on the last view visited.
      } 
    }

    - (void) tableView: (UITableView*) tableView didSelectRowAtIndexPath: (NSIndexPath*) indexPath {  
     didNavigateToFullWebView = YES; 
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T01:50:08.780

一种常见的做法是将所有状态放在*模型*类中（如“模型 - 视图 - 控制器”模式），并使模型成为单例。然后所有全局变量作为属性进入模型类，或者隐藏在公开可用的方法后面。这比分散的全局变量要好，因为代码的读者需要在一个地方查看应用程序的所有状态信息。这是一个带有相关讨论[的堆栈溢出问题。](https://stackoverflow.com/a/9736559/335858)

# wpf - 在单击按钮时将删除线添加到 ListView 中的选定行

> ID：10264483
> 
> 赞同：3
> 
> 时间：2012-04-22T01:25:52.540
> 
> 标签：wpf, listview, gridview, text-decorations

我试图弄清楚当按下按钮时如何在我的 ListView 中删除选定的行。里面有一个带有多列的 GridView。这些列绑定到我创建的类中的字段，该类被发送到 ObservableCollection，后者填充我的 ListView 中的数据。

最好，在单击按钮后，整个选定的行都会有一条红线，尽管此时我什至会很高兴只敲击每个单元格的文本。

我尝试过各种各样的事情。我得到的最接近的是，我能够通过将预订类中的 Notes 字段更改为 TextBlock，然后添加这样的 TextDecoration 来获得工具提示以显示带有删除线的文本：

```
Reservation selected = (Reservation)shuttleView.SelectedItem;
TextDecoration td = new TextDecoration(TextDecorationLocation.Strikethrough, new Pen(Brushes.Black, 1), 0, TextDecorationUnit.FontRecommended, TextDecorationUnit.FontRecommended);
selected.Notes.TextDecorations.Add(td); 
```

但是，这只会将装饰放在工具提示上，而不是在 ListView 中......

我在下面发布了我的列表视图和课程：

```
<ListView Height="287" HorizontalAlignment="Left" Margin="148,12,0,0" Name="shuttleView" VerticalAlignment="Top" Width="720" >
        <ListView.ItemContainerStyle>
            <Style TargetType="{x:Type ListViewItem}">
                <Setter Property="ToolTip" Value="{Binding Notes}" />
            </Style>
        </ListView.ItemContainerStyle>
        <ListView.View>
            <GridView>
                <GridViewColumn Width="50" Header="Time"
                                DisplayMemberBinding="{Binding Time}" />
                <GridViewColumn Width="50" Header="DO/PU"
                                DisplayMemberBinding="{Binding DropPickup}" />
                <GridViewColumn Width="100" Header="# People"
                                DisplayMemberBinding="{Binding People}" />
                <GridViewColumn Width="100" Header="Room #"
                                DisplayMemberBinding="{Binding Room}" />
                <GridViewColumn Width="100" Header="Hotel"
                                DisplayMemberBinding="{Binding Hotel}" />
                <GridViewColumn Width="112" Header="Location"
                                DisplayMemberBinding="{Binding Location}" />
                <GridViewColumn Width="198" Header="Notes"
                                DisplayMemberBinding="{Binding Notes}" />
            </GridView>
        </ListView.View>
    </ListView>

class Reservation
{
    public string ResID { get; set; }
    public string Time { get; set; }
    public string DropPickup { get; set; }
    public string People { get; set; }
    public string Room { get; set; }
    public string Hotel { get; set; }
    public string Location { get; set; }
    public string Notes { get; set; }

    public Reservation(string ResID, string Time, string DropPickup, string People, string Room, string Hotel, string Location, string Notes)
    {
        this.ResID = ResID;
        this.Time = Time;
        this.DropPickup = DropPickup;
        this.People = People;
        this.Room = Room;
        this.Hotel = Hotel;
        this.Location = Location;
        this.Notes = Notes;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T08:40:00.120

您可以修改此[ListViewItem ControlTemplate 示例](http://msdn.microsoft.com/en-us/library/ms788717%28v=vs.90%29.aspx)并添加一个细矩形以贯穿整个列表视图项：

```
<ListView>
    <ListView.ItemContainerStyle>
        <Style TargetType="ListViewItem">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ListViewItem">
                        <Grid>
                            <Border Name="Border" Padding="2" SnapsToDevicePixels="true" Background="Transparent">
                                <GridViewRowPresenter VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                            </Border>
                            <Rectangle Name="StrikeThrough" HorizontalAlignment="Stretch" VerticalAlignment="Center"
                                       Height="1" StrokeThickness="1" Stroke="Transparent"/>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsSelected" Value="true">
                                <Setter TargetName="Border" Property="Background" Value="LightBlue"/>
                                <Setter TargetName="StrikeThrough" Property="Stroke" Value="Red"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </ListView.ItemContainerStyle>
    ...
</ListView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-15T00:55:08.277

这是一个对我有用的例子。TextDecoration 是数据绑定的，因此它依赖于 IValueConverter 返回“删除线”。

```
<Style  x:Key="z3r0_Style_ListBoxItem_Default" TargetType="{x:Type ListBoxItem}">
<Setter Property="FocusVisualStyle" Value="{x:Null}"/>
<Setter Property="SnapsToDevicePixels" Value="true"/>
<Setter Property="OverridesDefaultStyle" Value="true"/>
<Setter Property="FontSize" Value="11"/>
<Setter Property="FontFamily" Value="Consolas"/>                        
<Setter Property="Template">
    <Setter.Value>
        <ControlTemplate TargetType="{x:Type ListBoxItem}">
            <Grid>
                <Border Name="Border" Padding="2" SnapsToDevicePixels="true" Background="Transparent">                                
                </Border>
                <TextBlock Name ="_Text" Padding ="3"  IsHitTestVisible="false" TextDecorations="None" Text="{Binding}"/>                                                    
            </Grid>

            <ControlTemplate.Triggers>
                <Trigger Property="IsSelected" Value="true">
                    <Setter TargetName="_Text" Property="Foreground" Value= "{Binding Converter={StaticResource m_Converter_ListBoxItem_Foreground_Selected}}"/>
                    <Setter TargetName="_Text" Property="TextDecorations" Value = "{Binding Converter={StaticResource m_Converter_ListBoxItem_TextDecoration}}"/>
                    <Setter TargetName="Border" Property="Background" Value="{StaticResource z3r0_SolidColorBrush_Green}"/>
                </Trigger>
                <Trigger Property="IsSelected" Value="false">
                    <Setter TargetName="_Text" Property="Foreground" Value= "{Binding Converter={StaticResource m_Converter_ListBoxItem_Foreground_Unselected}}"/>
                    <Setter TargetName="_Text" Property="TextDecorations" Value = "{Binding Converter={StaticResource m_Converter_ListBoxItem_TextDecoration}}"/>                                
                    <Setter TargetName="Border" Property="Background" Value="Transparent"/>
                </Trigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>
    </Setter.Value>
</Setter> 
```

![在此处输入图像描述](../Images/50e4615e880a7b0e1dc761b81bc33b57.png)

# mysql - mysql - 如何获取每月发布或评论的唯一活跃用户数？

> ID：10264484
> 
> 赞同：2
> 
> 时间：2012-04-22T01:25:52.757
> 
> 标签：mysql, sql

我有以下表格：

**内容**：content_id、user_id、post_date

**评论**：comment_id、user_id、comment_date

如何获取按月和年分组的活跃唯一用户数？活跃意味着用户在该给定月份发布或评论。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T01:44:34.403

```
SELECT
  T.action_year,
  T.action_month,
  COUNT(T.user_id) active_users
FROM
  (
  SELECT DISTINCT user_id, YEAR(post_date) action_year, MONTH(post_date) action_month FROM content
  UNION
  SELECT DISTINCT user_id, YEAR(comment_date) action_year, MONTH(comment_date) action_date FROM comment
  ) T
GROUP BY
  T.action_year,
  T.action_month
ORDER BY
  T.action_year ASC,
  T.action_month ASC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T01:38:52.190

这未经测试。

```
select count(table1.user_id), table1.user_id
from table1 table2 
where table1.user_id = table2.user_id
And table2.comment_date like 'may' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-05T05:10:28.577

试试这个

```
select TO_CHAR(order_dt,'MON-YYYY'), count(distinct User_ID ) cnt from [orders] 
where User_ID  in 
(select User_ID from
 (select a.User_ID from  [orders] a,
(select a.User_ID,count (a.order_dt) from [orders] a 
where a.order_dt > (select max(b.order_dt)-365 from [orders] b where a.User_ID=b.User_ID)
group by a.User_ID
having count(order_dt)>1) b
where a.User_ID=b.User_ID) a
)
group by TO_CHAR(order_dt,'MON-YYYY'); 
```

# visual-studio - vs2011 beta 显示挂起

> ID：10264485
> 
> 赞同：1
> 
> 时间：2012-04-22T01:26:02.747
> 
> 标签：visual-studio

我安装了 Visual Studio 2011 测试版，除了显示严重滞后开始控制输入之外，它似乎安装得很好，显示没有刷新，我需要像蚀刻草图一样将鼠标悬停在代码编辑器窗口上。顺便说一句，我尝试调整所有显示设置：i5/GeForce 415M，单/双显示器。刷新是60hz。

任何想法表示赞赏。

编辑：

更新：这是我的解决方法 - 右键单击​​ VS 启动器，运行使用 -> 集成显卡。

# eclipse - 如何使用 IDE（Netbeans、Eclipse）中的 optirun（Bumblebee）使用图形驱动程序运行构建？

> ID：10264487
> 
> 赞同：1
> 
> 时间：2012-04-22T01:26:08.860
> 
> 标签：eclipse, netbeans, opencl, video-card

有谁知道如何通过在 IDE 中调用 optirun (bumblebee) 来使 eclipse 或 netbeans 在 Optimus 笔记本电脑中使用显卡，这样人们就可以使用 IDE 中的运行按钮在 IDE 中的显卡中运行程序。

以最简单的形式，我只希望 IDE 执行相当于`optirun ./javaproject`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T17:59:39.997

只需使用 optirun 启动 IDE。例如，`optirun eclipse`或`optirun netbeans`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T02:27:52.367

我在 Eclipse 中这样做的方式是首先启动 Java 调试器*jdwp*并监听一个端口。然后启动 JVM`optirun java ...`并使用 jdwp 连接到这个端口。通过在*调试配置*设置（运行 -> 调试配置）中创建*启动组*，可以在 Eclipse 中同时启动这两个任务。详细地：

 *1.  *使用“标准（套接字侦听）”连接类型*和一些任意端口（例如56789）创建*远程 Java 应用程序*调试配置。这会将端口 56789 上的 Java 调试器*jdwp*附加到在该端口接受调试连接的虚拟机。
***   现在我们需要使用*optirun*启动一个 JVM 。这可以通过*外部工具配置*（运行 -> 外部工具 -> 外部工具配置）来完成。在“外部工具配置”窗口的左侧创建一个新的*程序配置。*您可以直接从`optirun java <additional arguments>`填写必填字段开始。但是，我决定使用一个可被不同项目重用的 shell 脚本（如下所示，缺少一个部分以使其完全可重用。我很高兴从更有经验的 Eclipse 用户那里获得任何帮助......） . 因此，*Location*字段指向这个 shell 脚本。脚本本身接受三个参数：*类路径*对于项目，Java 可执行文件的名称和端口号。这些参数可以传递给*主选项卡的**参数*字段中的脚本，例如

     **   ${project_classpath:${selected_resource_name}}
    *   执行名称
    *   56789

    假设 optirun 在您的 PATH 中，shell 脚本如下所示：

    ```
    #!/bin/sh
    CLASS_PATH=${1}
    JAVA_EXECUTABLE=${2}
    PORT=${3}
    # TODO: fix this java library path: pass it as an argument as well. Is there an Eclipse variable which stores this?
    JAVA_LIBRARY_PATH=/usr/local/share/OpenCV/java
    #------------------------------------------------------------------------------
    optirun ${JAVA_BIN} -agentlib:jdwp=transport=dt_socket,suspend=y,address=localhost:${PORT} -Djava.library.path=${JAVA_LIBRARY_PATH} -Dfile.encoding=UTF-8 -classpath ${CLASS_PATH} ${JAVA_EXECUTABLE}
    #------------------------------------------------------------------------------ 
    ```* **   最后，将这两个部分放在“*调试配置*”窗口（运行 -> 调试配置）中的*启动组*中。创建一个新的启动组并通过单击*启动*选项卡中的*添加*并选择适当的配置来添加两个先前生成的调试配置。请注意，由于步骤 2 中的 classpath 变量（即），需要在*Package Explorer*中选择适当的包，然后单击运行调试配置按钮（确保选择了 Launch Group）。***`${project_classpath:${selected_resource_name}}`******

 ***这个解决方案非常适合我：我可以在 Eclipse 中调试 Java 代码，该代码调用涉及 CUDA 优化的本机代码，并且 Bumblebee 仅在必要时激活独立显卡。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T10:04:01.510

我在 Netbeans ( `F11`) 中构建项目并在终端中运行以下命令：

```
optirun java -jar path/to/javaproject/dist/javaproject.jar 
```

请注意，如果您的项目中有任何 java 参数，则需要手动添加。我的工作流程是这样的：

从项目中找到 Java 选项，打开*Project* -> *Properties*，*Run*。在*VM 选项*中，我看到了`-Djava.library.path=lwjgl/native/windows;:lwjgl/native/linux`. 我还有一些要传递给的参数`main(String[])`。有了这些信息，我打开一个终端并运行：

```
cd path/to/javaproject
optirun java -Djava.library.path=lwjgl/native/windows;:lwjgl/native/linux \
    -jar dist/javaproject.jar some paremeters 
```

另一个提示，如果您必须频繁打开和关闭程序，请`optirun bash`在不同的选项卡中运行，以便准备使用显卡变得更快。或者，您可以运行`optirun netbeans`，但这意味着即使您正在编程，nvidia 卡也将始终打开，这会增加功耗并增加热量。

**重要提示**：如果您在 64 位机器上使用 32 位 JVM 或 Java 库，您还需要安装 32 位驱动程序和库。对于 Ubuntu，nvidia 软件包已经包含 32 位驱动程序，请参阅[此答案](https://askubuntu.com/a/36936/6969)。对于其他发行版，您可能需要`lib32-*`为 Mesa、VirtualGL 和 nvidia-utils 安装软件包。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-11T17:30:49.323

您还可以将 java 重命名为 java_real 并将这部分代码用作您的 java 命令：

```
#!/bin/bash

path=$(dirname $(readlink -f $0))
args=""
runner="$path/java_real"
for var in "$@"
do
    if [ "$var" = "-3d" ]; then
    runner="primusrun $runner"
  else
    args="$args $var"
  fi
done

$runner $args 
```

注意：我必须在 /usr/lib/jvm/java-7-openjdk-amd64/jre/bin 中执行此操作，而不是在 /usr/bin 中才能使其与 Eclipse 一起使用。

在 Eclipse 中，只需在程序参数中添加“-3d”就可以了！****

# android - Android 图库视图：一次查看一张图片？

> ID：10264495
> 
> 赞同：1
> 
> 时间：2012-04-22T01:27:55.237
> 
> 标签：android, gallery, android-gallery, galleryview

有没有办法设置画廊视图，以便一次只能看到一个图像？我创建了一个带有图像缩略图的画廊视图。当用户单击图像时，我想启动一个新活动，该活动在新的画廊视图中显示实际选择的图像。现在，当用户滑动手指时，他可以看到随后的图像。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T07:04:36.253

在网上搜索时找到了替代解决方案。更简单的解决方案是继承 Gallery 类，并将 onFling 设置为始终返回 false。以下是解决方案的参考：

[如何将 Android 图库中的投掷限制为每次投掷仅一项？](https://stackoverflow.com/questions/4311854/how-can-i-limit-fling-in-android-gallery-to-just-one-item-per-fling)

这是我根据上面链接中列出的用户“Someone Somewhere”和“vmihalca”的输入的组合实现：

```
public class SlowGallery extends Gallery {

    public SlowGallery(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    public SlowGallery(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public SlowGallery(Context context) {
        super(context);
    }

    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
         return false;
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T04:37:42.247

我遇到了同样的问题，我做了一个小技巧。在我的情况下，图像是静态的，所以我使用批量重命名将图像编号为 0-100。对相应的缩略图做了同样的事情。我创建了两个活动，一个是 gridview （您可以使用galleryview）用galleryview保存拇指和另一个我为gridview设置onclicklistener以获取单击的拇指的id并将其传递给带有galleryview的活动作为额外的意图。galleryview抓取id 并跳转到具有给定 id 的图像。检查这个

[答案](https://stackoverflow.com/a/4971962/1093490)和本[教程](http://saigeethamn.blogspot.com/2010/05/gallery-view-android-developer-tutorial.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T03:20:37.180

您可以将“自定义适配器”用于带有图像视图的图库视图，并在 **getView(int position, View convertView, ViewGroup parent)**方法中将“match_parent”或“fill_parent”用于自定义适配器中图像视图的“LayoutParams”。

```
public View getView(int position, View convertView, ViewGroup parent) {

    imageView.setLayoutParams(...);

    return imageView;
} 
```

参考：
[developer.android](http://developer.android.com/reference/android/view/View.html#setLayoutParams%28android.view.ViewGroup.LayoutParams%29)
[developer.android](http://developer.android.com/reference/android/view/ViewGroup.LayoutParams.html)
[developer.android](http://developer.android.com/resources/tutorials/views/hello-gallery.html)

# javascript - 防止javascript超出数组

> ID：10264496
> 
> 赞同：1
> 
> 时间：2012-04-22T01:28:20.980
> 
> 标签：javascript, arrays

如果我尝试进入不存在的数组索引，有什么方法可以防止 javascript 出错？

示例：`array[-1]`将返回错误并最终破坏我的所有代码。我怎样才能让它只返回“未定义”并让我的脚本继续执行？我可以在检查数组之前实现一个 if 语句（这样，如果索引小于零或大于数组大小，它将跳过它）但这将非常乏味！

这是我的代码：

```
if (grid[j-1][i])
n++;
if (grid[j+1][i])
n++;
if (grid[j][i+1])
n++;
if (grid[j][i-1])
n++;
if (grid[j-1][i-1])
n++;
if (grid[j+1][i+1])
n++;
if (grid[j-1][i+1])
n++;
if (grid[j+1][i-1])
n++; 
```

它在两个循环中，两个循环都看到 J 和 I 从零开始。我不想更改它们，也不想写另一个 if 语句（如您所见，它们已经太多了！）。有什么解决办法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T01:59:16.613

如果您知道网格的度量，则可以在其周围放置“哨兵单元”。

如果将 -1st 索引添加到数组`x`中，则不计入`x.length`. 将额外的最后一个元素放入列表中会增加`x.length`.

我敢说使用前哨细胞结合 d_inevitable 提到的算术计数算法将是最快的解决方案，因为它不会涉及分支。您甚至可以省略`!!`因为将在均衡中`true`计算为 1 和0。`false`

### 更新：

**不要**使用索引 -1。它比普通数组索引慢得多。请参阅[http://jsperf.com/index-1](http://jsperf.com/index-1)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T01:33:00.667

您可以使用`||`，它可以消除错误，例如：

```
(grid[j-1] || [])[i] || false 
```

（我还没有测试过，但它应该可以工作）

编辑：根据我不是我的建议更新

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T01:36:32.317

仍然使用 ifs 的一种不那么乏味的方法是检查第一个索引是否已定义：

```
if (typeof grid[j-1] != "undefined" && grid[j-1][i]) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T01:38:39.167

您可以创建一个函数来进行检查：

```
function getArrayValue(arr,key) {
    if( key < 0 || key >= arr.length) return null;
    return arr[key];
} 
```

但实际上你应该避免越界键。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-22T01:45:05.847

这对你的解决方案怎么样？

```
for (dj = -1; dj <= 1; ++dj) {
  for (di = -1; di <= 1; ++di) {
    if ((dj || di) && grid[j+dj] && grid[j+dj][i+di]) {
        n++;
    }
  }
} 
```

如果您将所有这些`if`s 重构为像上面这样的单个循环，那么必须执行额外的条件并不是那么糟糕。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-22T01:48:31.623

我会这样做：

```
for(m = Math.max(j-1,0) ; m <= Math.min(j+1,grid.length-1) ; m++)
  for (p = Math.max(i-1,0) ; p <= Math.min(i+1, grid[m].length-1) ; p++)
     n += !(m == j && p == i) && !!grid[m][p]; 
```

# assembly - 基指针和栈指针

> ID：10264512
> 
> 赞同：34
> 
> 时间：2012-04-22T01:32:51.523
> 
> 标签：assembly, x86, nasm, stack-pointer

鉴于这段代码：

```
 swap:

            push ebp ; back up the base pointer,
            mov ebp, esp
            ; push the context of the registers on the stack

            push eax
            push ebx
            push ecx
            push edx

            mov eax, [ebp+8] ; address of the first parameter
            mov ebx, [ebp+12] ; address of the second parameter
            mov dl, [eax]
            mov cl, [ebx]

            mov [eax], cl

            mov [ebx], dl

            ; restore the context of the registers from the stack

            pop edx
            pop ecx  
            pop ebx
            pop eax
            ; restore the ebp
            pop ebp
            ret 
```

（这只是方法。之前我们将第一个和第二个参数压入堆栈。）

我的问题是：为什么我们将 8 添加到 Base Pointer 以获取第一个参数的地址，然后 12 ？

我知道它们是双字，所以它们每个都是 4 个字节..所以从 ebp + 8 到 ebp + 12 是有意义的。但是为什么第一个是 ebp + 8 ？因为如果ESP指向栈顶，mov ebp,esp表示EBP指向栈顶。然后我们将 4 个值压入堆栈：eax、ebx、ecx 和 edx。为什么 EBP + 8 指向第一个参数？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-04-22T01:41:29.210

调用该函数时，堆栈如下所示：

```
+-------------+
| Parameter 2 |
+-------------+
| Parameter 1 |
+-------------+
| Return Addr |  <-- esp
+-------------+ 
```

然后在“堆栈框架”设置后：

```
+-------------+
| Parameter 2 | <-- [ebp + 12]
+-------------+
| Parameter 1 | <-- [ebp + 8]
+-------------+
| Return Addr |  
+-------------+    
| saved ebp   | <-- ebp
+-------------+ <-- esp 
```

现在保存上下文：

```
+-------------+
| Parameter 2 | <-- [ebp + 12]
+-------------+
| Parameter 1 | <-- [ebp + 8]
+-------------+
| Return Addr |  
+-------------+    
| saved ebp   | <-- ebp
+-------------+ 
| saved eax   |  
+-------------+    
| saved ebx   |  
+-------------+    
| saved ecx   |  
+-------------+    
| saved edx   | <-- esp
+-------------+ 
```

不要忘记，在许多系统上堆栈是向下增长的（x86 系列肯定是这样），所以堆栈的顶部将具有最低的内存地址。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-22T01:41:54.067

因为堆栈上还有另外两个项目；前一个 ebp，您在此例程的开头推送，以及返回地址，通过对例程的调用将其放入堆栈。

# c++ - 创建临时 char* 并打印到它的正确方法是什么？

> ID：10264516
> 
> 赞同：1
> 
> 时间：2012-04-22T01:33:50.180
> 
> 标签：c++, string, pointers

我有一个辅助函数，它接受一个固定长度的 unsigned char 数组，并将其作为格式化的 char * 返回。但是，我遇到了一些问题。

我试过

```
char* byteArrayToString(unsigned char byte[6]) {
    char t[18] = {""};
    char* str = t;
    sprintf(str, "%02X:%02X:%02X:%02X:%02X:%02X", byte[0], byte[1], byte[2], byte[3], byte[4], byte[5]);
    return str;
} 
```

和

```
char* byteArrayToString(unsigned char byte[6]) {
    std::string t = "";
    char* str = t;
    sprintf(str, "%02X:%02X:%02X:%02X:%02X:%02X", byte[0], byte[1], byte[2], byte[3], byte[4], byte[5]);
    return str;
} 
```

和

```
char* byteArrayToString(unsigned char byte[6]) {
    char* str = new char();
    sprintf(str, "%02X:%02X:%02X:%02X:%02X:%02X", byte[0], byte[1], byte[2], byte[3], byte[4], byte[5]);
    return str;
} 
```

第二个导致该字符串的值被更改的一些副作用。第一个最终给了我垃圾值和最后一个段错误（但我不知道为什么）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T01:37:14.110

正确的方法是返回`std::string`为：

```
#include <sstream>   //for std::ostringstream
#include <string>    //for std::string
#include <iomanip>   //for std::setw, std::setfill

std::string byteArrayToString(unsigned char byte[6]) 
{
    std::ostringstream ss;
    for(size_t i = 0 ; i < 5 ; ++i)
         ss << "0X" << std::hex << std::setw(2) << std::setfill('0') << (int) byte[i] << ":";
    ss << "0X" << std::hex << std::setw(2) << std::setfill('0') << (int) byte[5];
    return ss.str();
} 
```

[在线演示](http://ideone.com/RHRHW)

在呼叫站点上，您可以获得`const char*`：

```
std::string s = byteArrayToString(bytes);
const char *str = s.c_str(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T01:57:06.190

您的第一个问题不在于印刷，而在于退货。您正在返回一个指向已回收数组的指针（因为它是一个自动变量，它的生命周期在函数返回时结束）。

而是尝试：

```
string byteArrayToString(const unsigned char* const byte)
{
    char t[18] = {""};
    sprintf(t, "%02X:%02X:%02X:%02X:%02X:%02X", byte[0], byte[1], byte[2], byte[3], byte[4], byte[5]);
    return t;
} 
```

# php - iPhone 将图像发布到 Web 服务器 - 仍在工作？

> ID：10264530
> 
> 赞同：-1
> 
> 时间：2012-04-22T01:38:22.847
> 
> 标签：php, iphone, xcode, post, uiimagepickercontroller

我知道有很多关于将图像发布到 Web 服务器的问题，并且很多问题都已得到解答。本教程：http: [//zcentric.com/2008/08/29/post-a-uiimage-to-the-web/](http://zcentric.com/2008/08/29/post-a-uiimage-to-the-web/)经常被引用。

谁能帮我确认本教程代码仍然适用于 Xcode 4.3？我似乎在“NSLog(returnString);”上收到“格式字符串不是字符串文字”警告。此外，控制台告诉我在服务器上找不到 /test-upload.php ... 是出了什么问题，还是上传脚本被教程的创建者简单地删除了？

也就是说，假设它确实有效，我可以只使用他的代码（在教程的开头）来发布一个 php 脚本来处理复制文件吗？

谢谢！亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T03:02:47.953

它仍然有效，因为我在 appstore 上的应用程序中使用它。NSLog 没什么大不了的。这只是内存管理的东西，它告诉你它可能是内存泄漏。NSLog 通常喜欢接收这样的字符串：

```
 NSLog(@"%@", myNSString); 
```

而且他的服务器上的 php 脚本也丢失了，不用担心错误，但如果你要将应用程序放在应用程序商店中，请确保摆脱 NSLog 代码片段，以实现良好的内存管理。如果你不这样做，你不会遇到太多麻烦，但这只会带来不便。

# javascript - 按键和鼠标单击后将函数变量转换为全局变量

> ID：10264532
> 
> 赞同：0
> 
> 时间：2012-04-22T01:38:39.023
> 
> 标签：javascript, jquery, global-variables, jquery-events, serialscroll

我已经更新了我的问题，因为我认为我有解决原始问题的方法。我想将 转换为可用于计算另一个函数`$margins`的全局变量。`$offset`我需要在（箭头）按键、鼠标点击和可能的鼠标滚轮操作之后更新变量。有一个简单的解决方案吗？

这是我的代码：

```
$(document).keydown(function(e){  //keyboard bind   
    if( e.keyCode == 39 ){//right (->)
        if($('.selectstyle').hasClass("selectstyle")){
            $margins = -180;
        } else ($(".select" ).hasClass("select")){
            $margins = 0;
        }
    }
});
$offset = (-220 + $margins), 
```

我提出的代码可能不适合我的解决方案。我正在处理的网站是[http://lastnighti.co.uk/](http://lastnighti.co.uk/)我希望用户主要使用 serialscroll 插件通过箭头键来浏览该网站。我遇到的问题是，如果用户通过按向下箭头突出显示图像，然后继续按向右箭头键以继续到下一个图像，则由于 serialscroll 考虑了边距宽度，它会被过度拍摄。

这让我伤心了一个多星期。我尝试过排队和`setTimout`函数，但它们破坏了 UI 的流畅性。基本上我上面的问题是更改`$offset`变量以说明何时和图像在`.selectstyle`类中突出显示。我将不胜感激上述问题的任何解决方案以动态控制`$offset`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T01:44:10.327

制作一个全局变量是通过以下方式完成的`window`：

```
window.varName = "foo"; 
```

所以你想要这个：

```
$(document).keydown(function(e){  //keyboard bind   
    if( e.keyCode == 39 ){//right (->)
        if($('.selectstyle').hasClass("selectstyle")){
            window.$margins = -180;
        } else ($(".select" ).hasClass("select")){
            window.$margins = 0;
        }
    }
});
$offset = (-220 + $margins), 
```

请注意，可能有更好的方法来做你想做的事。

也许您可以这样做：

```
var $margins;

$(document).keydown(function(e){  //keyboard bind   
    if( e.keyCode == 39 ){//right (->)
        if($('.selectstyle').hasClass("selectstyle")){
            $margins = -180;
        } else ($(".select" ).hasClass("select")){
            var $margins = 0;
        }
    }
});

$offset = (-220 + $margins), 
```

# python - Python：如何在 numpy 中使用函数？

> ID：10264536
> 
> 赞同：2
> 
> 时间：2012-04-22T01:39:16.293
> 
> 标签：python, function, numpy, call

我是 Python 编程的新手，所以请耐心等待我刚提出的问题。

如果我们想在 numpy 中使用某个函数，比如说`func`，我们是否**只**需要导入一次 numpy，然后调用该函数，如下所示：

```
import numpy
np.func 
```

**或者，在调用任何函数之前，我们是否还需要导入 numpy 的特定子模块？**谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T01:40:55.560

几乎，如果你想使用`numpy`，`np`你必须像这样导入它：

```
import numpy as np 
```

除此之外，您可以使用类似的功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T01:41:23.533

与现有的*所有其他 fricking 模块一样*，您使用导入它的名称。

```
import numpy
numpy.func 
```

...

```
import numpy as np
np.func 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-22T01:53:40.187

如果你想使用`linalg`你必须这样做：

```
numpy.linalg 
```

例如，如果你想计算 x 的行列式，你会做

```
import numpy

x = numpy.array([[1,2],[5,7]])
det_x = numpy.linalg.det(x)

#or

import numpy as np

x = np.array([[1,2],[5,7]])
det_x = np.linalg.det(x) 
```

# delphi - 如何在服务器端获取kbmMW客户端查询语句？

> ID：10264538
> 
> 赞同：0
> 
> 时间：2012-04-22T01:39:24.793
> 
> 标签：delphi, sockets, indy, 3-tier

我找到了“OnQueryStatement”方法：

```
procedure TkbmMWQueryService2.kbmMWQueryServiceQueryStatement(Sender: TObject;
Place: TkbmMWQueryOperationType; var NamedQueryName, Statement: string);
begin
   Form1.Memo1.Lines.Add(Statement);//show the query statement
end; 
```

这个方法可以得到客户端的查询语句，但是所有的客户端查询都会触发这个事件两次！（如截图）！为什么？如何正确获取客户端查询语句？

提前致谢！:)

![ps Form1 是服务器端，form3 是客户端](../Images/c5efc9e4f0da48b15f48ced9d9faa609.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T10:13:10.967

它在服务器上调用了两次（实际上在最远的情况下，对于服务器上的相同查询可以调用 3 次）。

检查 Place 参数以了解其调用的情况。它可以是 mwqotDefinition、mwqotQuery、mwqotExecute、mwqotResolve、mwqotMoreData、mwqotMetaData

打开查询时多次调用它的原因是数据集首先喜欢获取定义（此查询将导致哪些字段和参数），然后是数据本身。

服务器和客户端默认都是这样操作的。因此，在客户端上打开查询会导致客户端向服务器询问定义，然后客户端询问数据，而在服务器上可能会导致服务器本身询问定义，然后询问数据。请记住，服务器是无状态的，默认情况下对以前的调用一无所知。

有很多方法可以优化这个：

*   为元数据（定义）启用缓存。这将导致使用缓存结果而不是服务器向数据库询问定义，并且也在客户端上启用缓存，导致客户端除了第一次之外不必向服务器询问定义。

*   将查询上的 AutoFieldDefs 属性设置为 mwafoWithData。然后数据实际上将与定义同时返回，并且将跳过第 2 次数据获取调用。

# compiler-construction - 什么是 clang 工具链？

> ID：10264543
> 
> 赞同：2
> 
> 时间：2012-04-22T01:40:32.920
> 
> 标签：compiler-construction, llvm

当我使用：

```
clang test.c -o test 
```

其中 test.c 是一个简单（且正确）的 C 文件。Clang 使用什么工具来生成可执行文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T12:31:54.033

它取决于主机和目标系统。我使用 clang/LLVM 来定位来自 Linux x86 主机的多个嵌入式目标。我使用 GNU binutils 和 GDB 来完成工具链、NetBSD 标准 C 库和 QEMU 来为各种目标运行测试可执行文件。[http://ellcc.org](http://ellcc.org)

默认情况下，clang 使用主机汇编器、库和链接器来生成本机可执行文件。一些 LLVM 目标可以直接生成目标代码并避免使用汇编程序。

# gcc - GCC 生成的 ASM 简化了 x86 ASM？如何映射？

> ID：10264544
> 
> 赞同：1
> 
> 时间：2012-04-22T01:40:44.700
> 
> 标签：gcc, assembly, x86

当我在 cygwin 上的 GCC 中将以下代码编译为 asm 时：

```
int scheme_entry() {
  return 42;
} 
```

使用：

```
gcc -O3 --omit-frame-pointer -S test1.c 
```

我得到以下“ASM”生成：

```
 .file   "test1.c"
    .text
    .p2align 4,,15
.globl _scheme_entry
    .def    _scheme_entry;  .scl    2;  .type   32; .endef
_scheme_entry:
    movl    $42, %eax
    ret 
```

但“MOVL”命令实际上并不是 x86 ASM。通过查看以下列表：

[http://ref.x86asm.net/geek.html#x0FA0](http://ref.x86asm.net/geek.html#x0FA0)

[http://en.wikipedia.org/wiki/X86_instruction_listings](http://en.wikipedia.org/wiki/X86_instruction_listings)

没有 MOVL 命令，但是有

```
CMOVL
CMOVLE
MOVLPS
MOVLPD
MOVLHPS 
```

我的问题是 - gcc ASM 是“简化的 ASM”吗？如果是这样 - 我如何将其映射到“真正的 ASM”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T01:44:00.213

GCC 使用 AT&T 语法。区别之一是可以使用指令后缀指定操作数大小，并且编译器将始终使用这些后缀。这实际上是一条`mov`带后缀的指令`l`，表示 32 位操作数大小。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T01:50:01.743

正如 ughoavgfhw 所提到的，GCC 默认输出 AT&T 语法，这与您似乎期望的 Intel 风格的语法不同。但是，此行为是可配置的：您可以请求它输出 Intel 样式，如下所示：

```
gcc -masm=intel -O3 --omit-frame-pointer -S test1.c 
```

关键参数是`-masm=intel`.

使用这个命令行，我得到的汇编输出（为了简洁而删掉了一些不必要的行）如下：

```
scheme_entry:
    mov eax, 42
    ret 
```

# eclipse - Visual Studio 变量/方法大纲和下拉选项？

> ID：10264553
> 
> 赞同：0
> 
> 时间：2012-04-22T01:44:00.993
> 
> 标签：eclipse, visual-studio, visual-studio-2010

Eclipse 有类似这样的东西，向您展示方法声明、导入、变量的概要......

![大纲](../Images/19879be7275a0d4a18ded168b0400554.png)

Visual Studio 2010 中有类似的东西吗？我似乎找不到它。

另一件事是上下文菜单下拉菜单。

在 Visual Studio 中，我必须单击带下划线的单词：

![在此处输入图像描述](../Images/1595ea59397d0a3b199ad5a3a8911a5a.png)

等待那个蓝色的小下划线弹出然后我必须小心地将鼠标悬停在它上面，如下所示：

![在此处输入图像描述](../Images/ca6acb1156cd625922e3882a00244eda.png)

用于弹出下拉菜单。然后我必须单击它以显示选项。

在 Eclipse 中，我可以将鼠标悬停在带下划线的单词上并在大约半秒后获取选项，或者将鼠标悬停在它上面并立即按 F2 以获取选项。

有谁知道VS2010中是否有这些功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T02:24:16.913

对于您的第一个问题，有一个名为“Class View”的窗口可能与您想要的类似。您可以通过 访问它`Ctrl``W``C`。

对于您的第二个问题，如果您的光标位于带下划线的标识符上，您可以键入以下任一命令以打开相同的上下文菜单：

*   `Ctrl``.` *（这是句号或点）*
*   `Alt``Shift``F10`

# sql-server - 如何执行长动态查询（大于 4000 个）字符 - 再次

> ID：10264558
> 
> 赞同：3
> 
> 时间：2012-04-22T01:45:25.803
> 
> 标签：sql-server, dynamic, sql-server-2008-r2, exec

注意：我在 SQL Server 2008 R2 下运行...

我花时间阅读了该站点和其他站点上有关如何执行查询超过 4000 个字符的动态 SQL 的数十篇文章。我已经尝试了十几种提出的解决方案。共识似乎是将查询拆分为 4000 个字符的变量，然后执行以下操作：

```
EXEC (@SQLQuery1 + @SQLQuery2) 
```

这对我不起作用 - 查询在@SQLQuery1 末尾被截断。

现在，我已经看到了人们如何通过使用 REPLICATE 一堆空格等来“强制”进行长查询的示例，但这是一个真正的查询 - 但它比这更复杂一些。

我有名为“Company_A_ItemView”的 SQL 视图。

我有 10 家公司，我想用不同的名称创建完全相同的视图，例如“Company_B_ItemView”“Company_C_ItemView”等。

如果你提供帮助，请不要问为什么会有多个视图——只要接受我需要这样做，好吗？

每个公司都有自己的一组表，CREATE VIEW 语句按名称引用多个表。这是简要示例，但请记住，查询的总长度约为 6000 个字符：

```
CREATE view [dbo].[Company_A_ItemView] as  
select  
WE.[Item No_],  
WE.[Location Code],   
    LOC.[Bin Number],  
[..more fields, etc.]  
from  
[Company_A_Warehouse_Entry] WE  
left join  
[Company_A_Location] LOC 
```

...你明白了

所以，我目前正在做的是：

一个。将 CREATE VIEW 语句的内容拉入 2 个声明的变量中，例如

```
Set @SQLQuery1 = (select text 
                  from syscomments 
                  where ID = 1382894081 and colid = 1)  
Set @SQLQuery2 = (select 
                  from syscomments 
                  where ID = 1382894081 and colid = 2) 
```

请注意，这是 SQL 存储长定义的方式 - 当您创建视图时，它将文本存储到多个 syscomments 记录中。在我的例子中，视图被分成 3591 个字符的文本块到第一个 syscomment 记录中，其余文本在第二个记录中。我不知道为什么 SQL 不使用 syscomment 字段中的所有 4000 个字符。并且语句在一个单词的中间被打破。

请注意，在我的所有示例中，所有 @SQLQueryxxx 变量都声明为 varchar(max)。我还尝试将它们声明为 nvarchar(max) 和 varchar(8000) 和 nvarchar(8000) ，结果相同。

湾。然后我对“Company_A”进行“搜索和替换”并将其替换为“Company_B”。在下面的代码中，变量“@CompanyID”首先设置为“Company_B”：

```
SET @SQLQueryNew1 = @SQLQuery1   
SET @SQLQueryNew1 = REPLACE(@SQLQueryNew1, 'Company_A', @CompanyID)  
SET @SQLQueryNew2  = @SQLQuery2   
SET @SQLQueryNew2 = REPLACE(@SQLQueryNew2, 'Company_A',@CompanyID) 
```

C。然后我尝试：

```
EXEC (@SQLQueryNew1 + @SQLQueryNew2) 
```

返回的消息表明它正在尝试执行在@SQLQueryNew1 末尾被截断的语句，例如查询文本的80%（大约）。

我已经尝试将最终结果转换为新的 varchar(max) 和 nvarchar(max) - 不走运 我已经尝试将原始查询转换为新的 varchar(max) 和 nvarchar(max) - 不走运

我查看了检索原始 CREATE VIEW 语句的结果，这很好。

我尝试了各种其他方法来检索原始 CREATE VIEW 语句，例如：

```
Set @SQLQuery1 = (select VIEW_DEFINITION) 
                  FROM [MY_DATABASE].[INFORMATION_SCHEMA].[VIEWS] 
                  where TABLE_NAME = 'Company_A_ItemView')` 
```

这个只返回 CREATE VIEW 的前 4000 个字符

```
Set @SQLQuery1 = (SELECT (OBJECT_DEFINITION(@ObjectID)) 
```

如果我做一个

```
SELECT LEN(OBJECT_DEFINITION(@ObjectID)) 
```

它返回查询的正确长度（例如 5191），但是如果我查看@SQLQuery1，或者尝试

```
EXEC(@SQLQuery1), the statement is still truncated. 
```

C。有一些参考资料指出，由于我在检索查询文本后对其进行操作，因此结果变量随后被截断为 4000 个字符。我尝试在执行 REPLACE 时对结果进行 CAST，例如

```
SET @SQLQueryNew1 = SELECT (CAST(REPLACE(@SQLQueryNew1, 
                                 'Company_A', 
                                 @CompanyID) AS varchar(max)) 
```

结果相同。

我知道还有其他方法，例如创建用于创建视图的存储过程。但是视图正在开发中，并且有些“不断变化”，因此将 CREATE VIEW 的文本放在存储过程中是很麻烦的。我的目标是能够获取 Company_A 的视图并准确复制它 - 多次，除了引用 Company_B 的视图名称和表名称、Company_C 的视图名称和表名称等。

我想知道是否有人对长 SQL“CREATE VIEW”语句进行了这种类型的操作并尝试执行它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T20:17:15.610

只需使用**VARCHAR(MAX)**或**NVARCHAR(MAX)**。它们适用于**EXEC(string)**。

* * *

供参考，

> 请注意，这是 SQL 存储长定义的方式 - 当您创建视图时，它将文本存储到多个 syscomments 记录中。

这是不正确的。这是*过去在 SQL Server 2000 上完成的方式。从 SQL Server 2005 及更高版本开始，它们在***sys.sql_modules**的单个条目中保存为 NVARCHAR(MAX) 。

**syscomments**仍然存在，但它保留为只读只是为了兼容。

* * *

所以你需要做的就是改变你的@SQLQuery1,2等。变量到单个 NVARCHAR(MAX) 变量，并从 sys.sql_modules 表的 [definition] 列中提取您的视图代码。

请注意，您应该小心您的字符串操作，因为如果所有输入参数都不是 (N)VARCHAR(MAX)，则某些函数将恢复为 (N)VARCHAR(4000) 输出。（对不起，我不知道是哪一个，但 REPLACE() 可能是其中一个）。事实上，这可能是在您的测试中造成如此多混乱的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-12T10:09:13.047

声明您的 sql 变量 (@SQLQuery1...)，`nvarchar(4000)` 确保每个 sql 部分不超过 4000 字节（将每个部分复制到文本文件并测试文件大小（以字节为单位））

# c++ - _BLOCK_TYPE_IS_VALID error on boost::scoped_array

> ID：10264561
> 
> 赞同：2
> 
> 时间：2012-04-22T01:46:39.777
> 
> 标签：c++, boost, smart-pointers, scoped-ptr

After a huge amount of digging and searching I found the root of my problem. In essence this code is executed and, in its own project it causes the same error. I see that I cannot reset a smart pointer to a new string...but why? Also is there a simple way around this?

```
scoped_array<char> sptr;
char* nptr = "Hello";

sptr.reset("");
sptr.reset(nptr); 
```

EDIT -

I think I've figured it out. While resetting, the smart pointer tries to delete and empty character array ("") which, because the new operator was not used, was not allocated on the heap (ahem !!?!!?!???!?!). Therefore this program will break miserably when it tries to deallocate the memory. So correct me if I'm wrong but would the string itself be stored in the program's executable byte stream itself? If so, just for future reference, is there a way to force the allocation of a new string?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T04:43:41.750

You're correct in identifying the error. `scoped_array` will call `delete[]` on the object it's holding; that is, after all, the sole purpose of its existence. You can't `delete[]` something that wasn't `new[]'d`, or you get undefined behavior.

However, you should just use `std::string` if you want a dynamic string. Anything you try to create to allow `scoped_array<char>` to act like a string is just going to end up as a shoddy version of `std::string`. Then it's as simple as: `std::string s; s = ""; s = "Hello"`.

# javascript - django jquery .load 对象值

> ID：10264564
> 
> 赞同：0
> 
> 时间：2012-04-22T01:47:19.467
> 
> 标签：javascript, jquery, django, load

我正在对一组对象进行分页，每个对象都有一个按钮，按下该按钮会打开一个隐藏的 div 并将 div 弹出所有内容。我想做的是在弹出的窗口中列出该对象的属性，但我不知道如何从 javascript 代码中获取该对象。

这是javascript：

```
<script type="text/javascript">
    $(document).ready(function(){
        $("#create").click(function(){
            $("#popupContact").load("/cookbook/createrecipe #createform");
        });
        $("#button1").click(function(){
            $("#popupContact").load(load object information for button1);
        });
        $("#button2").click(function(){
            $("#popupContact").load(load object information for button2);
        });
    });
</script> 
```

这是模板：

```
{% block content %}
    {% autopaginate object_list 6 %}
    <div id="object_cont">
            {% for object in object_list %}
        <div id="object">
            <div id="button{{ forloop.counter }}">      
            <h4>{{ object.name }}</h4>
            <h5>{{ object.author }}</h5>
            <h5>Prep Time: {{ object.prep_time }} minutes</h5>
            </div>
        </div>
    {% endfor %}
    </div>
    <div id="popupContact" class="popup">
    <a id="popupContactClose" style="cursor:pointer;float:right;">x</a>
    </div>
    <div id="backgroundPopup">
    </div>  
    {% paginate %}
{% endblock %} 
```

基本上我需要一种方法来获取嵌套在按钮 div 中的对象

谢谢，小鱼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T05:28:07.260

首先，您的标记将导致重复的 id 参数“object”，它不是有效的 HTML。但是，无需为每个按钮编写单独的单击处理程序：

```
$('.button').click(function(){
    /* Do whatever with content */
}); 
```

jQuery 的 load 方法发出一个 GET 请求。因此，如果您需要动态调用 URL，我建议在按钮 div 中的某处添加一个锚标记，以保存要加载的 URL。

```
{% for object in object_list %}
    <div class="object">
        <div class="button{{ forloop.counter }}">
            <a href="{% url my_view object.property %}" style="display: none;"></a>   
            <h4>{{ object.name }}</h4>
            <h5>{{ object.author }}</h5>
            <h5>Prep Time: {{ object.prep_time }} minutes</h5>
        </div>
    </div>
{% endfor %}

$('.button').click(function(){
    var content = $.load($(this).children('a:first').attr('href'));
    /* Do whatever with content */
}); 
```

要记住的另一件事是不要在不需要的地方使用标题标签，只是为了获得您想要的演示文稿，这就是 span 标签和 CSS 的用途:)

希望对您有所帮助。

# java - 循环尝试连接到 JDBC

> ID：10264567
> 
> 赞同：0
> 
> 时间：2012-04-22T01:47:57.703
> 
> 标签：java, mysql, jsp, servlets

我正在尝试创建一个用于签入和签出设备的应用程序。到目前为止，我已经取得了成功，但我试图让名为 index.jsp 的主页面显示一条消息，如“正在连接”，直到可以实际建立与数据库的连接，然后显示实际的登录表单。所以有点大意。

```
Connection con = null;
String driver = "com.mysql.jdbc.Driver";
Class.forName(driver).newInstance();
boolean connected = false;

while(!connected) {
    try{
        String url = "jdbc:mysql://localhost:3306/test";
        con = DriverManager.getConnection(url,"username","password");
        connected = true;

        //Display form allowing user to authenticate login

    } catch(Exception e) {
        //Display Message "Attempting to connect to database"
    }
} 
```

我遇到的问题是相同的消息会在网页上一遍又一遍地重复，但我只想让它显示一次并留在那里直到找到连接，然后将其删除并替换为登录表单。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T08:58:55.973

我建议您使用**`connection pooling`**.... 管理连接非常容易，并且会减少开销，从而使您的应用程序高效。

**请参阅以下内容**：

*   [在基于 MVC 的 jsp/servlets 应用程序中设置连接池？](https://stackoverflow.com/questions/10104749/setup-connection-pooling-in-jsp-servlets-application-based-on-mvc/10107894#10107894)

*   [我在使用 JDBC 连接池吗？](https://stackoverflow.com/questions/7592056/am-i-using-jdbc-connection-pooling)

*   [在基于 MVC 的 jsp/servlets 应用程序中设置连接池？](https://stackoverflow.com/questions/10104749/setup-connection-pooling-in-jsp-servlets-application-based-on-mvc/10107894#10107894)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T02:57:11.077

> 有什么想法吗？

是的。

您需要了解如何向用户显示内容。正常的模型是浏览器向服务器发送一个 HTTP 请求，服务器创建一个由 HTML 页面组成的响应，然后浏览器显示该页面。在此模型中，如果您希望用户看到结果，服务器必须完成并发送响应。在此之前，用户会看到一个空白屏幕（或他/她之前所在的页面）。

因此，要获得更新的页面，您有两种选择：

*   您可以创建一个页面，其中包含一个`<meta>`请求浏览器在固定延迟后重新发送请求的标签；见[http://en.wikipedia.org/wiki/Meta_refresh](http://en.wikipedia.org/wiki/Meta_refresh)

*   您可以在页面中嵌入 javascript 以向服务器发送 AJAX 请求，请求更新。收到响应后，javascript 需要使用新信息**修改**显示页面的 DOM。

但无论哪种情况，您都应该清楚，您不能在对单个 JSP 的单个调用中执行此操作。因此，您不希望在 JSP 或分派到 JSP 的控制器中出现 while 循环。循环必须发生在浏览器端。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T02:58:36.677

以这种方式更改您的代码

```
Connection con = null;
String driver = "com.mysql.jdbc.Driver";
Class.forName(driver).newInstance();
boolean connected = false;
int errors = 0;

while(!connected) {
    try{
        String url = "jdbc:mysql://localhost:3306/test";
        con = DriverManager.getConnection(url,"root","ikkakumon");
        connected = true;

        //Display form allowing user to authenticate login

    } catch(Exception e) {

        if (errors == 0) {
            //Display Message "Attempting to connect to database"
        }
        ++errors;

        Thread.sleep(1000); // wait a little before the next attempts
    }
} 
```

所以你只在第一次显示错误信息。然后在一次尝试和另一次尝试之间等待。

然而，循环不是管理连接的常用方法。为什么选择这个解决方案？你收到什么样的例外？

# html - 如何设置退出链接？

> ID：10264576
> 
> 赞同：0
> 
> 时间：2012-04-22T01:51:06.007
> 
> 标签：html, dns

单击另一个链接时如何设置传出链接。域 A 到域 B，但域 A 仍然保留在前面。

示例访问 rojadirecta

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T02:10:00.837

由于您的问题非常不清楚，因此我将在黑暗中进行尝试。

我猜你想在新窗口/标签中打开一个链接？

```
<a href="your-link.com" target="_blank">Your link</a> 
```

这告诉浏览器您想在新窗口中打开链接，同时保持当前页面不变。

# coldfusion - ColdFusion DirectoryList () - 是否可以只获取目录？

> ID：10264579
> 
> 赞同：3
> 
> 时间：2012-04-22T01:51:57.130
> 
> 标签：coldfusion, cfdirectory

我以前`<cfdirectory>`只获取目录，但我需要在用 cfscript 编写的 UDF 中执行此操作，因此我需要使用 DirectoryList()。看来我需要获取所有内容，然后手动访问结果过滤目录。但是，有一个过滤器参数......它可以用来只过滤目录吗？如果是这样，过滤器是什么？

我还没有找到只返回目录的示例，并且文档不清楚可以过滤的内容（*.txt 除外）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T15:35:35.787

`<cfdirectory action="list"...>`(and `DirectoryList(path [,recurse] [,listInfo="query"]...)`) 返回一个查询对象。您没有理由不能这样做，然后立即对 TYPE 列进行查询过滤。

Mark Kruger 提醒我，我可能应该包含代码：

```
<cffunction name="DirectoryList2" returntype="query">
  <cfargument name="dirPath" type="string" required="true">
  <cfif directoryExists(arguments.dirPath)>
    <cfdirectory directory="#arguments.dirPath" name="local.DirQuery" action="LIST">
    <cfquery name="local.DirQuery" dbtype="query">
    SELECT * FROM local.DirQuery WHERE TYPE = 'dir'
    </cfquery>
    <cfreturn local.DirQuery>
  <cfelse>
    <cfthrow message="No such directory">
  </cfif>
</cffunction> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T02:30:41.397

很不幸的是，不行。与 cfdirectory 的`type`属性不同，过滤器仅适用于文件/目录*名称*。所以我认为不可能只使用`filter`查找目录。请记住，您始终可以将 cfdirectory 包装在一个函数中，然后从您的 UDF 中调用它。这就是cflib.org 上旧的[DirectoryList函数所做的。](http://www.cflib.org/udf/DirectoryList)

> 文档不清楚可以过滤的内容（*.txt 除外）。

您只能搜索名称。`filter`支持部分模式（如查找包含“xxx”的文件），按文件扩展名搜索，或者您可以使用多个模式应用`"|"`：

```
*test*        // partial pattern. names containing the word "test"
*.xls         // find Excel files
*test*|*.xls  // find names containing "test" OR Excel files 
```

但是，由于该模式仅适用于名称，因此不能用于可靠地识别目录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T14:23:11.937

Leigh 的答案是正确的（像往常一样 :) 但我想我会把这段代码作为一个非常简单的解决方法。

```
<cfdirectory directory="c:\blah" name="myDirQuery" action="LIST"/>

<Cfquery name="myDirQuery" dbtype="query">
  SELECT * FROM myDirQuery where type = 'dir'
</cfquery> 
```

你可以很容易地将它包装在你自己的函数中。尽管有过滤的限制，这可以让你得到你想要的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-02-03T19:10:14.727

我过去用过这个。

```
var = dirList(directory_path, false, "query")

// var is now a query record
dirArray = []; // create an array

for(i = 1;i LTE var.recordcount; i++){ 
   if(var.type[i] IS "dir") dirArray.append(var.name[i]);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-07-17T19:52:40.843

从 CF11 开始，现在可以按名称过滤目录。该版本增强了[DirectoryList()](https://helpx.adobe.com/coldfusion/cfml-reference/coldfusion-functions/functions-c-d/DirectoryList.html)以添加对“类型”属性的支持。例如，要搜索包含“docs”的目录名称：

**CF2018+**（使用命名参数）

```
result = DirectoryList(path="c:\path",filter="*docs*", type="dir"); 
```

**CF2016 及更早版本**

```
result = DirectoryList("c:\path", false, "query", "*docs*", "asc", "dir" ); 
```

# java - 创建文件并写入

> ID：10264583
> 
> 赞同：0
> 
> 时间：2012-04-22T01:52:40.187
> 
> 标签：java

我创建了一个名为“test.txt”的文件，然后从用户那里获取输入以将输入写入文件。一切运行良好。该程序根本没有显示任何错误。该文件已创建并且程序从用户那里获取输入，但是当我检查文件的内容时，它是空的。谁能弄清楚我的代码有什么问题？代码如下。

```
package InputOutput;

import java.io.*;

public class CharacterFileReaderAndFileWriter{

private BufferedReader br = null;
private BufferedWriter bw = null;
private PrintWriter pw = new PrintWriter(System.out, true);

public File createFile() throws IOException{
    File f = new File("test.txt");
    return f;
}

public void writeToFile() throws IOException{
    try{
        bw = new BufferedWriter(new FileWriter(createFile()));
    }
    catch(FileNotFoundException ex){
        ex.printStackTrace();
    }

    //take input from the console (user)
    br = new BufferedReader(new InputStreamReader(System.in));
    String s;

    pw.println("Please enter something");
    pw.println("To stop the program, enter 'stop'");

    do{
        s = br.readLine();
        if(s.compareTo("stop")==0)
            break;
        s+= "\r\n";//adding an new line to the string s         
        bw.write(s);            
    }
    while(s.compareTo("stop")!=0);

    br.close();
    bw.close();

}

public static void main(String[] args) throws IOException{

    CharacterFileReaderAndFileWriter cfr = new CharacterFileReaderAndFileWriter();
    cfr.writeToFile();
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T01:55:46.597

大多数示例程序表明您必须`.flush()`在. 这不应该是必需的，应该自动调用，但它不会受到伤害。此外，您还应该以相反的顺序调用所有/ objects方法，再次正确编写的类应该调用它们包装的所有对象，但无论如何这样做并没有什么坏处。`BufferedWriter``.close()``.close()``.flush()``Stream``Writer``.close()``.close()`

其他可能会在以后引起您注意的事情：

```
if(s.compareTo("stop")==0) 
```

应该

```
if ("stop".equalsIgnoreCase(s)) 
```

它更高效，消除了`NullPointerException`on的可能性`s`，处理任何*停止*的情况，最重要的是比使用更惯用的 Java`.compareTo()`

```
 s+= "\r\n";//adding an new line to the string s         
    bw.write(s); 
```

应该

```
 bw.write(System.getProperty("line.separator"));        
    bw.write(s); 
```

`s+=`创建需要收集的中间对象和垃圾。硬编码行结尾也很糟糕。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-22T01:56:34.290

您需要关闭输出流。文件.close();

# haskell - 在特定位置将和标记更改为 " 对

> ID：10264587
> 
> 赞同：2
> 
> 时间：2012-04-22T01:53:22.840
> 
> 标签：haskell, filter, pandoc

我正在使用工具链将 Markdown 转换为 HMTL5，使用[Pandoc](http://johnmacfarlane.net/pandoc/index.html)作为 HTML 内容插入 WordPress 的可视化编辑器。

在插入图像时，WordPress 将所谓的 a`shortcode`形式

```
[caption id="attachment_100" align="aligncenter" width="300" caption="This is an image caption"] 
```

到 HTML 文本中。这并不是真正的降价，而是由 Pandoc 解释的，它将每一`" ... "`对转换`<q> ... </q>`为 HTML 输出对。这在 WordPress 中无法正常工作。

我需要*防止*转换`" ... "`那些出现在明确定义的`[caption ... ]`方括号内的内容，这些方括号专门由 WordPress 放入，并且不能与我放入的其他内容混淆。

[我对Pandoc API](http://johnmacfarlane.net/pandoc/doc/pandoc/)或[Haskell](http://www.haskell.org/haskellwiki/Haskell)的了解还不够，无法编写一个内联的 paseser/filter 来免除这个文本片段的 Pandoc 处理。鉴于我对 Pandoc 和 Haskell 不熟悉，到目前为止，我在 pandoc 邮件列表上收到的建议已经超出了我的想象。

我曾想过编写一个 Perl 过滤器，但出于非常充分的理由强烈反对使用正则表达式。

我在这里询问是否有一种可靠的方法可以在通过 pandoc 运行块后，将`<q> ... </q>`标签反向替换为`" ... "`仅用于块内的文本，作为后处理步骤。`[caption ... ]`

有人可以建议我怎么做吗？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T20:20:40.847

你想要这样的东西吗？

```
import Data.List
import System.IO

main = do
   inh  <- openFile "input.txt"  ReadMode
   outh <- openFile "output.txt" WriteMode
   str <- hGetContents inh
   hPutStrLn outh (outsideCaption str) 
   hClose inh
   hClose outh

outsideCaption::String->String
outsideCaption [] = []
outsideCaption str@(x:xs)
    | isPrefixOf "[caption" str = insideCaption str
    | otherwise                 = x:outsideCaption xs

insideCaption::String->String
insideCaption []       = []
insideCaption (']':xs) = ']':outsideCaption xs
insideCaption str@(x:xs)
    | (isPrefixOf "<q>"  str) = '\"':insideCaption (drop 3 str)
    | (isPrefixOf "</q>" str) = '\"':insideCaption (drop 4 str)
    |  otherwise              = x   :insideCaption         xs 
```

这段代码读取一个名为“input.txt”的文件，执行您描述的替换并将结果打印到“output.txt”。

将当前的 main 替换为：

```
main = interact outsideCaption 
```

使其从标准输入读取到标准输出，例如：

```
[rothesay]Ygfijj: echo "testing <q> [caption<q></q>]" | ./test 
testing <q> [caption""] 
```

# javascript - 使用 jquery 使类活跃

> ID：10264588
> 
> 赞同：4
> 
> 时间：2012-04-22T01:53:30.843
> 
> 标签：javascript, jquery, html, css, hide

```
<div class="tabs">
    <ul id="tab" class="nav nav-tabs">
        <li class="active">
            <a href="#feed" data-toggle="tab">Feed</a>
        </li>
        <li>
            <a href="#dashboard" data-toggle="tab">Dashboard</a>
        </li>
    </ul>
</div> 
```

当用户点击下面的链接时。我想将#dashboard li 更改为活动，并从#feed li 中删除活动。我该怎么做呢？

```
<a href=".showfollowers" onclick='load_followers();' data-toggle="tab">See All</a> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T01:55:49.460

你最好使用不显眼的javascript：

```
<a href=".showfollowers" id="foo" data-toggle="tab">See All</a> 
```

**代码：**

```
$('#foo').click(function(){
        $('#dashboard').addClass('active');
        $('#feed').removeClass('active');
        load_followers();
        return false; // if needed.
    }); 
```

虽然可以使用内联脚本来完成，但内联代码已被弃用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T01:56:50.000

```
<div class="tabs">
              <ul id="tab" class="nav nav-tabs">
              <li class="active"><a href="#feed" data-toggle="tab">Feed</a></li>
              <li><a href="dashboard" data-toggle="tab">Dashboard</a></li>
              </ul>
          </div>

<a href="showfollowers" onclick='load_followers();' data-toggle="tab">See All</a>

$('.showfollowers').click(function(){
  $(#tab li).removeClass('active');
  $('#dashboard').parent().addClass('active');

}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T02:29:26.670

一种方法是：

```
$("#tab li").removeClass("active");
$("#dashboard").parent().addClass("active"); 
```

这将首先删除所有“li”元素的“活动”类，然后将其添加到#dashboard 选项卡的 li 元素中。

另一种方法是使用兄弟() 函数。

```
var dashboard = $("#dashboard").parent(),
    siblings = dashboard.siblings();
siblings.removeClass("active");
dashboard.addClass("active") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-22T03:31:03.060

这可以帮助你...找到更多关于切换类[http://api.jquery.com/toggleClass/](http://api.jquery.com/toggleClass/)

```
$("[href='showfollowers']").click(function(event){
   event.preventDefault(); 
   $("#tab li").toggleClass("active");
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T16:33:53.727

我发现上面的解决方案只对我部分有效。该选项卡变为活动状态，但未显示新内容。这就是我最终得到的结果：

```
$('.ext-butt-class').click(function(e){
    e.preventDefault();
    $(".nav-tabs li").removeClass("active");
    $("[href='#requiredtab']").parent().addClass("active");
}); 
```

.where`.ext-butt-class`被添加到触发切换的链接中，并且`#requiredtab`是我们尝试定位的选项卡的名称。

希望可以帮助其他人使用 Roots Wordpress 框架和/或 Twitter Bootstrap。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-22T01:59:29.843

我会添加`id`到元素中，以便轻松识别元素。

```
<div class="tabs">
   <ul id="tab" class="nav nav-tabs">
     <li id="liFeed" class="active"><a href="#feed" data-toggle="tab">Feed</a></li>
     <li id="lidashboard""><a href="#dashboard" data-toggle="tab">Dashboard</a></li>
   </ul>
</div>
<a href="#" data-toggle="tab" id="aSeeAll" >See All</a> 
```

脚本

```
$(function(){
  $("#aSeeAll").click(function(e){
    e.preventDefault();
    $("#tab li").removeClass("active");
    $("#lidashboard").addClass("active");
  });    
}); 
```

工作样本：http: [//jsfiddle.net/H2BBn/2/](http://jsfiddle.net/H2BBn/2/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-22T02:01:11.700

```
$("div.tabs li").eq(1).addClass("active").siblings().removeClass("active"); 
```

# jquery - jquery总是触发mouseenter

> ID：10264589
> 
> 赞同：0
> 
> 时间：2012-04-22T01:53:31.997
> 
> 标签：jquery, jquery-ui, jquery-effects

我无法让 Javascript 工作。每次我进入 div （鼠标向上元素） jQuery 连续触发。

jQuery

```
jQuery(document).ready(function($) {
    $('#banner-roxo .text').hide();

    $('#roxo-um').mouseenter(function() {
        $(this).children('.image').hide().effect('drop', {direction: "down"}, 1000, function() {
            $(this).parent().children('.text').show().effect('drop', {direction: "up"}, 1000);
        })
    }).mouseleave(function() {
        $(this).children('.text').hide().effect('drop', {direction: "down"}, 1000, function() {
            $(this).parent().children('.image').show().effect('drop', {direction: "up"}, 1000);
        })
    })
}); 
```

HTML：

```
<div id="banner-roxo">
    <div id="roxo-um">
        <div class="image">
            <img src="http://www.d1digital.com.br/clientes/audiolab/wp-content/themes/d1Digital/images/roxo_1.png" height="181px" width="181px" border="0px" />
        </div>
        <div class="text">
            Imergimos na marca, seu universo e aspirações; extraímos os conceitos que definem a sua identidade sonora.
        </div>
    </div>
</div> 
```

**我想要的：** 当用户悬停`#roxo-um`时，`.image`需要用 Jquery UI 拖放效果隐藏并`.text`以相同的效果显示，向上滑动。当用户离开时`#roxo-um`，做同样的事情，但隐藏`.text`和显示`.image`。

我怎么能做到这一点，因为我当前的脚本连续触发？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T02:20:37.677

看起来随着 div#roxo-um 的高度变化，进入和离开事件会偶尔触发。

请参阅此处的示例：http: [//jsfiddle.net/NGtrS/](http://jsfiddle.net/NGtrS/)（删除高度并观察差异）

# objective-c - 精灵不会在屏幕边缘向右移动

> ID：10264592
> 
> 赞同：0
> 
> 时间：2012-04-22T01:54:53.063
> 
> 标签：objective-c, cocos2d-iphone

在我目前正在开发的 cocos2d 游戏中，我在屏幕右侧创建了某些精灵，以固定的速度向左移动，然后在它们离开屏幕后被移除。

这很好用。但是当图像到达屏幕的左侧时，它会跳过一个节拍，然后完美地继续。

这真的很明显，因为我的游戏中的一个元素就是 2d 程序地形。我的游戏生成了无限长的山丘，并且它以相当小的块进行。这些块一个接一个地放置，并一起在屏幕上移动。但是当一个块的左边缘碰到屏幕的左边缘时，它会延迟几个像素，并导致难看的重叠。

我使用以下代码来移动块：

```
Chunk.position = CGPointMake(Chunk.position.x - panSpeed, Chunk.position.y); 
```

为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T02:50:51.783

看起来您没有考虑更新中的时间增量。查看`CCMoveTo`操作代码：

```
-(void) update: (ccTime) t
{   
    [target_ setPosition: ccp( (startPosition.x + delta.x * t ), (startPosition.y + delta.y * t ) )];
} 
```

# iphone - 枚举的布尔比较

> ID：10264597
> 
> 赞同：1
> 
> 时间：2012-04-22T01:55:59.187
> 
> 标签：iphone, objective-c, enums, boolean, typedef

只是想知道 - 鉴于我有一个带有有效元素“蓝色”的 typedef 枚举“颜色”（和同名的属性），为什么这样可以：

```
 BOOL isBlue;

 if (color == blue){
     isBlue = YES;
 } 
```

但这不是：

```
BOOL isBlue;

isBlue = (color == blue); 
```

我刚刚开始使用枚举，所以也许我错过了一些简单的东西？

编辑 - 如前所述，“蓝色”是枚举的有效元素之一，而不是 BOOL 本身，即：

```
typedef enum { Blue, Red, Yellow } color; 
```

和

```
@property color color; 
```

编辑 2 - 这是我的实际代码，根据要求。我对矛盾的评论/答案有点困惑。我应该期望它编译（它没有）吗？

。H

```
typedef enum { AddRecipes, ManageRecipes, RemoveRecipes } mode;

<snip>

@property mode mode; 
```

.m

```
 @synthesize mode;

 <snip>

 BOOL modeIsAddRecipe = (mode == AddRecipes); 
```

编辑 3 - 为了后代，我应该提到我的错误是微不足道且无关的。下面的讨论证明很有启发性，非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T02:50:30.253

这`BOOL`是一个简单的 typedef `signed char`（不要与`bool`类型混淆）

```
typedef signed char     BOOL; 
#define YES             (BOOL)1
#define NO              (BOOL)0 
```

这意味着 BOOL 值可以是`YES`，`NO`或其他任何值。例如，如果您尝试

```
BOOL testBool = 9;
NSLog(@"%d", testBool); 
```

它将打印`9`. 不涉及编译器魔法或运行时魔法。在某些程序员编写一些愚蠢的布尔比较（例如`if (testBool == YES)`，而不是`if (testBool)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T02:02:43.103

我猜这`BOOL`也是一个枚举。枚举的目的是枚举可以存储在该类型变量中的值。

因此，如果您的`BOOL`枚举具有值`YES`and `NO`，那么这些是*唯一*可以分配给 a 的值`BOOL`。您不能分配任何其他值，即使它们的计算结果与 和`YES`相同`NO`。

`==`运算符返回`1`或（`0`或`true`或`false`，取决于语言）。但是编译器不允许您将*任何*这些值分配给 a `BOOL`，因为它们*都不*是`YES`or `NO`。

您*可以*做的是使用三元运算符：

```
isBlue = (color == blue) ? YES : NO; 
```

这会评估条件并返回`YES`它是真还是`NO`假。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T03:34:21.057

正如@tia 已经告诉你的那样，`BOOL`定义为`signed char`，`YES`和`NO`分别定义为`(BOOL)1`和`(BOOL)0`。

正是由于这个原因，您在问题中显示的*两个代码示例都可以正常工作。*在后一个片段中，等式表达式的计算结果为 1 或 0。您可以自由地将这些整数值分配给`BOOL`( `signed char`) 值。

代码将成功编译和运行，既没有错误也没有不当行为。

如果您看到不同的内容，请编辑您的问题以包含您的*实际*代码及其产生的错误，因为您提供的代码可以正常工作。

编辑（现在您已经提供了实际代码）：我认为它*应该可以*工作，但它目前不能（从 Xcode 4.3.1 开始）因为 Clang 将“<code>mode”解释为类型`mode`，而不是实例变量`mode`。如果您将类型重命名为`RecipeMode`或更改表达式以显式引用实例变量 ( `self->mode`) 或使用属性 ( `self.mode`)，则编译正常。

所以，恭喜。您实际上（在我看来）发现了一个编译器错误！我建议[报告它](https://bugreport.apple.com/)。

# java - 为什么所有枚举都扩展枚举

> ID：10264600
> 
> 赞同：1
> 
> 时间：2012-04-22T01:56:18.570
> 
> 标签：java, enums

用未定义的类型参数扩展泛型类型不是不可能的吗：

```
class Foo extends enum<E> 
```

他们如何扩展它？

**编辑：**还有 values() 方法定义在哪里？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T02:07:20.507

使用未定义的类型参数扩展泛型类型确实是非法的。但是，枚举不这样做。如果您正在反编译一些 java 代码并在`<E>`那里看到一个（并且您的枚举类型未命名`E`），那么您的反编译器没有正确处理泛型。

枚举隐式扩展`Enum<YourEnumType>`。也就是说，编译器隐式生成一个`class YourEnumType extends Enum<YourEnumType>`. 通过传递自己的类型，它允许`Enum`'`compareTo`和`valueOf`函数拒绝来自不同类型`enum`s 的值。

# wix - 配置 Wix 为 firebreath 插件添加依赖 dll

> ID：10264607
> 
> 赞同：0
> 
> 时间：2012-04-22T01:58:44.677
> 
> 标签：wix, windows-installer, wix3.5, firebreath

将 firebreath 生成的 Wix 文件配置为接受其他文件，但没有成功

```
 <!-- Put Additional files here: -->
  <!-- example:-->
   <Component Id="test" Guid="{104ca7b7-f654-481f9f6a-9a5b5a39c93b}">
        <File Id="test" KeyPath="yes" Source="C:\location\test.dll" />
    </Component>

    <Feature Id="MainPluginFeature" Title="${FBSTRING_ProductName}" Level="1">
      <ComponentRef Id="InstallDirComp"/>
      <ComponentRef Id="PluginNameDirComp"/>
      <ComponentRef Id="CompanyDirComp"/>
      <ComponentGroupRef Id="PluginDLLGroup"/>          
      <ComponentRef Id="test"/>
    </Feature> 
```

> 错误：错误 8 错误 LGHT0204：ICE38：组件测试安装到用户配置文件。它必须使用 HKCU 下的注册表项作为其 KeyPath，而不是文件。

我尝试了以下方法，但最终出现错误，

*   将 GUID 改回 *
*   将 directory=INSTALLDIR 添加到组件
*   将组件移出目录

我尝试阅读各种论坛，但 Wix 文档并没有多大帮助。我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T02:44:25.550

要解决 ICE38，您需要添加一个虚拟注册表项并设置您的文件`KeyPath="no"`：

```
<Component Id="test" Guid="{104ca7b7-f654-481f9f6a-9a5b5a39c93b}">
   <File Id="test" KeyPath="no" Source="C:\location\test.dll" />
   <Registry Root=”HKCU” KeyPath=”yes” … />
</Component> 
```

# java - 实现一个用于 JavaFx2.0 游戏框架的简单状态机

> ID：10264609
> 
> 赞同：0
> 
> 时间：2012-04-22T01:58:56.333
> 
> 标签：java, javascript, state-machine

我正在使用 JavaFx 2 构建一个简单的游戏框架。过去，使用 AS3 和 javascript，我可以简单地定义我的常量并编写如下代码（伪代码）：

```
const BEGIN_STATE;
const END_STATE;
const PLAY_STATE; 
```

然后在我的游戏循环中根据需要使用逻辑来更改状态...当常量被传递给 switchSystemState(stateConst) 函数时，BEGIN_STATE 可能会变为 PLAY_STATE。

```
switchSystemState 
```

由于函数不能像 Java 中的变量一样传递，我真的不知道从哪里开始。

所以希望有人可以让我对这个问题有所了解。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T02:29:46.747

从基本编码的角度来看，虽然 Java 确实不允许将函数作为第一类对象传递（如在 JavaScript 中），但它只是传递对包含该成员的对象实例的引用的问题你想调用的函数。

很难从描述中完全可视化您想要实现的目标，但我认为您可能想要定义一个静态函数，因为静态函数是在运行时环境中定义的一次，然后可能对所有可能需要调用静态函数的其他代码部分。

如果您可以提供更多详细信息或更结构化的描述来说明您要实现的目标，则可以更轻松地为您提供具体的答案或建议的前进道路。

# java - 如何根据它们在java中的扩展名从csv文件中的索引'n'开始读取字段扩展名

> ID：10264615
> 
> 赞同：0
> 
> 时间：2012-04-22T02:01:39.300
> 
> 标签：java

我有一个要求，我想在以下代码中测试从索引 10 开始的字段的文件扩展名：

```
Sunset.jpg;REF;Title;DESC;10;1;11;21;31;Bluehills.jpg;Winter.ppt;Moonfit.xls... 
```

在上面的代码中，我想读取从 inedx 10（Bluehills.jpg 和很快）开始的字段的扩展，以检查它是否是有效的扩展。

非常感谢任何帮助。

谢谢，

拉吉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T02:15:45.213

*   读取文件并将行解析为字符串
*   从索引 n 到 string.length() 创建一个子字符串。
*   使用带有“;”的 split() 函数拆分字符串 ArrayList 中的文件名 作为分隔符。
*   使用以下函数检索文件扩展名

    ```
    public static String getExtension(File f) {
        String ext = null;
        String s = f.getName();
        int i = s.lastIndexOf('.');

        if (i > 0 &&  i < s.length() - 1) {
            ext = s.substring(i+1).toLowerCase();
        }
        return ext;
     } 
    ```

# python - 在python中转换unicode字符串

> ID：10264618
> 
> 赞同：6
> 
> 时间：2012-04-22T02:03:43.880
> 
> 标签：python, unicode, dictionary

```
{u'Status': u'OK', u'City': u'Ciri\xe8', u'TimezoneName': '', u'ZipPostalCode': '', u'CountryCode': u'IT', u'Dstoffset': u'0', u'Ip': u'x.x.x.x', u'Longitude': u'7.6', u'CountryName': u'Italy', u'RegionCode': u'12', u'Latitude': u'45.2333', u'Isdst': '', u'Gmtoffset': u'0', u'RegionName': u'Piemonte'} 
```

这是我的对象的输出。我想访问 City 但它已编码。如何读取所有参数并对其进行解码

```
>>> data['City']
u'Ciri\xe8'

>>>data['City'].decode('utf-8')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/encodings/utf_8.py", line 16, in decode
    return codecs.utf_8_decode(input, errors, True)
UnicodeEncodeError: 'ascii' codec can't encode character u'\xe8' in position 4: ordinal not in range(128) 
```

我想要纯文本而不是 unicode 字符串。谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-22T02:22:55.020

你想要什么不清楚。如果“纯文本”是指删除重音，请尝试以下操作：

```
>>> s = u'Ciri\xe8'
>>> from unicodedata import normalize
>>> normalize('NFKD', s).encode('ASCII', 'ignore')
'Cirie' 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-22T03:15:41.793

阅读： http: [//nedbatchelder.com/text/unipain.html](http://nedbatchelder.com/text/unipain.html)

然后打印它：

```
>>> data = {u'City':u'Ciri\xe8'}
>>> data['City']
u'Ciri\xe8'
>>> print data['City']
Ciriè 
```

如果你不打印它，Python 会打印出字符串的安全表示，表明它是 Unicode 文本`u''`，并且它包含一个非 ASCII 字符`\xe8`。 `print`尝试通过在终端编码中编码 Unicode 字符串来显示非 ASCII 字符。如果字符串包含终端编码不支持的字符，它可能会失败：

```
>>> print u'\xe8'
è
>>> print u'\x81'
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "d:\dev\Python27\lib\encodings\cp437.py", line 12, in encode
    return codecs.charmap_encode(input,errors,encoding_map)
UnicodeEncodeError: 'charmap' codec can't encode character u'\x81' in position 0: character maps to <undefined> 
```

在上面的示例中，[代码页 437](http://en.wikipedia.org/wiki/Code_page_437)支持 Unicode 字符 U+00E8，但不支持 U+0081。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T02:10:16.417

明文，我想你的意思是ascii。为此，您可以使用：

```
data['City'].encode('ascii','ignore') 
```

这将剥离 unicode 字符并返回

```
Ciri 
```

有关更多信息，请参阅此链接：http: [//docs.python.org/howto/unicode.html](http://docs.python.org/howto/unicode.html)

# opengl - 如何在 OpenGL 中为金属（如银）设置材质？

> ID：10264624
> 
> 赞同：2
> 
> 时间：2012-04-22T02:06:27.060
> 
> 标签：opengl, lighting

如何在 OpenGL 中为金属（如银）设置材质？有谁知道？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-22T06:34:43.853

> 如何在 OpenGL 中为金属（如银）设置材质？有谁知道？

如果您希望您的材质有时看起来“有点”像金属，您需要设置相应的漫反射、环境光、镜面反射和“光泽”参数。[您可以调查现有的 3d 编辑器（如blender](http://en.wikibooks.org/wiki/Blender_3D:_Noob_to_Pro/Every_Material_Known_to_Man/Realistic_Silver)）的材质库，看看他们是如何做到的。这很便宜，但看起来也很便宜。通常具有低 GL_SHININESS 值的材料（我认为是 3..12？）看起来“有点”像金属表面。

如果您希望您的材质看起来更像金属，但在某些光照条件下，您需要编写像素着色器，该着色器将使用银的照片级真实纹理，以及控制镜面反射颜色和强度的附加纹理贴图。只要仔细选择照明条件，好的纹理可以让您摆脱可怕而简单的着色器。这需要具有 GLSL 知识的程序员和优秀的美术师来制作纹理，而美术师会更重要——即使是像 per-pixel phong 这样的非金属着色器也可以手动微调，使其看起来像你想要的那样（进动可能很无聊且乏味）。着色器本身只需要具有镜面反射（任何镜面反射）、法线贴图支持和环境反射贴图（具有菲涅耳项支持）的逐像素光照。对弱反射抛光表面使用 HDR 也会有所帮助。

如果您想要真正和完美的白银，那么您就有麻烦了，应该重新考虑。金属表面具有“模糊”反射，快速实施可能会很痛苦，具体取决于您的硬件。另一个问题是你必须对金属本身进行大量研究，检查那里存在的每个金属表面演示，阅读 GDC 论文等。即进行研究，这可能需要大量时间/精力并且不会最终得到回报，因为最终结果很可能会有糟糕的表现。重要的是你不需要模拟真实的材料来让它看起来正确——你需要让观众误以为这是银。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-22T05:47:41.963

如果您查看[此站点](http://devernay.free.fr/cours/opengl/materials.html)，您可以找到一系列不同的材料设置，这些设置旨在模仿各种材料，包括银。但是，正如其他人在评论中所说，请记住 Phong 着色（OpenGL 使用此类材质设置来执行的操作）很难以逼真的方式渲染某些现实世界的物质，尤其是像银这样的反射性物质。但是该站点的材料设置应该给你一些银一样的东西，至少初步近似。（确保你在最后看到关于将光泽度乘以 128 的注释）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-29T18:23:52.823

正如 Solaraeus 所说，您可以创建一个“材质”类来定义材质对象，例如：

```
#ifndef _MATERIAL
#define _MATERIAL
#include <GL/gl.h>

class material{

  private:

    GLfloat ambient_r;
    GLfloat ambient_g;
    GLfloat ambient_b;

    GLfloat diffuse_r;
    GLfloat diffuse_g;
    GLfloat diffuse_b;

    GLfloat specular_r;
    GLfloat specular_g;
    GLfloat specular_b;

public:

    material(GLfloat ar, GLfloat ag, GLfloat ab, GLfloat dr, GLfloat dg, GLfloat db, GLfloat sr, GLfloat sg, GLfloat sb){
        ambient_r=ar;   ambient_g=ag;   ambient_b=ab;
        diffuse_r=dr;   diffuse_g=dg;   diffuse_b=db;
        specular_r=sr;  specular_g=sg;  specular_b=sb;
    }

    void active(){
        GLfloat ambient[]={ambient_r, ambient_g, ambient_b, 1.0};
        glMaterialfv(GL_FRONT, GL_AMBIENT, ambient);
        GLfloat diffuse[]={diffuse_r, diffuse_g, diffuse_b};
        glMaterialfv(GL_FRONT, GL_DIFFUSE, diffuse);
        GLfloat specular[]={specular_r, specular_g, specular_b};
        glMaterialfv(GL_FRONT, GL_SPECULAR, specular);
    }
};

#endif 
```

之后您可以定义一个包含多种材料的文件 .h 以供以后使用，例如：

```
#ifndef _MATERIALS
#define _MATERIALS
#include "material.h"

                        // ### specification of materials ### //

material turquesa(0.1, 0.18725, 0.1745, 0.396, 0.74151, 0.69102, 0.297254, 0.30829, 0.306678);
material esmeralda(0.0215, 0.1745, 0.0215, 0.07568, 0.61424, 0.07568, 0.633, 0.727811, 0.633);
material jade(0.135, 0.2225, 0.1575, 0.54, 0.89, 0.63, 0.316228, 0.316228, 0.316228);
material obsidian(0.05375, 0.05, 0.06625, 0.18275, 0.17, 0.22525, 0.332741, 0.328634, 0.346435);
//more and more... 
```

＃万一

因此，您可以在任何地方使用它们，包括在需要时激活材料的 materials.h：

例子：

```
#include "materials.h"
...
...
turquesa.active();

        glBegin(GL_TRIANGLES);
            for(unsigned i=0; i<faces.size(); i++){
                glNormal3f(x, y, z); 
                glVertex3f(x, y, z);
                glVertex3f(x, y, z);
                glVertex3f(x, y, z); 
            }
        glEnd();
...
... 
```

如果您考虑对象，则更容易。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-02T21:23:46.813

使用 PBR（基于物理的渲染）技术可以获得高质量的金属外观。基本上，PBR 使用着色器和以下纹理输入：

*   反照率（漫反射）颜色；
*   法线贴图；
*   粗糙度 - 映射表面粗糙度/光滑度；
*   metalness - 金属/非金属区域的地图表面；

网上有很多关于 PBR 的文章。[可能的最爱之一](https://www.marmoset.co/posts/pbr-texture-conversion/)是这个。

此外，结合环境效果（立方体贴图或其他反射技术）突出金属效果。

# c - 如何在 C 中获取 gtk 窗口的 gdk 窗口？

> ID：10264625
> 
> 赞同：14
> 
> 时间：2012-04-22T02:07:05.757
> 
> 标签：c, gtk, gdk, mouse-cursor

我正在尝试将光标设置为手表。问题是 gdk_set_cursor() 需要一个 gdk_window。

如何在 C 中获取 gtk_window 的 gdk_window？我看过 gtkmm 和 pygtk 的例子，但我找不到相应的 C 函数。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-22T09:25:40.173

```
GdkWindow *gdk_window = gtk_widget_get_window(GTK_WIDGET(gtk_window)); 
```

或者，在 GTK 2.14 之前，但现在不允许：

```
GdkWindow *gdk_window = gtk_window->window; 
```

# python - Python四叉树

> ID：10264631
> 
> 赞同：1
> 
> 时间：2012-04-22T02:07:40.617
> 
> 标签：python, pygame, quadtree

我将 2 个对象添加到 QuadTree，但是当我查看整个对象列表时，我只能找到 1 个对象。为什么会这样，我能做些什么来解决它？

```
from pygame import draw

class QuadTree(object):
    def __init__(self, box, current_level, max_level=3):# box (top_left_x, top_left_y, size_x, size_y)
        self.location = (box[0], box[1])
        self.size = (box[2], box[3])
        self.current_level = current_level
        self.max_level = max_level

        self.objects = []
        self.__setupchirldren__()

    def __setupchirldren__(self):
        self.top_right =        None
        self.top_left =         None
        self.bottom_right =     None
        self.bottom_left =      None

    def elements(self):
        if self.current_level == self.max_level:
            for x in self.objects:
                print x, x.rect
        else:
            if self.bottom_left != None:
                self.bottom_left.elements()
            if self.bottom_right != None:
                self.bottom_right.elements()
            if self.top_left != None:
                self.top_left.elements()
            if self.top_right != None:
                self.top_right.elements()

    def add_object(self, new_object, rect):
        if self.current_level == self.max_level:
            #print new_object, rect
            self.objects.append(new_object)
            #print self.objects
        else:
            half_size = (self.size[0]/2, self.size[1]/2)
            if rect.colliderect(self.location, half_size):
                self.top_left =         QuadTree((self.location[0], self.location[1], half_size[0], half_size[1]), self.current_level+1, self.max_level)
                self.top_left.add_object(new_object, rect)
            if rect.colliderect((self.location[0]+half_size[0], self.location[1]), half_size):
                self.top_right =        QuadTree((self.location[0]+half_size[0], self.location[1], half_size[0], half_size[1]), self.current_level+1, self.max_level)
                self.top_right.add_object(new_object, rect)
            if rect.colliderect((self.location[0], self.location[1]+half_size[1]), half_size):
                self.bottom_left =      QuadTree((self.location[0], self.location[1]+half_size[1], half_size[0], half_size[1]), self.current_level+1, self.max_level)
                self.bottom_left.add_object(new_object, rect)
            if rect.colliderect((self.location[0]+half_size[0], self.location[1]+half_size[1]), half_size):
                self.bottom_right =     QuadTree((self.location[0]+half_size[0], self.location[1]+half_size[1], half_size[0], half_size[1] ), self.current_level+1, self.max_level)
                self.bottom_right.add_object(new_object, rect)

    def draw(self, screen):
        #if self.current_level == self.max_level:
        draw.line(screen, (255, 0, 0), self.location, (self.location[0]+self.size[0], self.location[1]))
        draw.line(screen, (255, 0, 0), self.location, (self.location[0], self.location[1]+self.size[1]))
        draw.line(screen, (255, 0, 0), (self.location[0]+self.size[0], self.location[1]+self.size[1]), (self.location[0]+self.size[0], self.location[1]))
        draw.line(screen, (255, 0, 0), (self.location[0]+self.size[0], self.location[1]+self.size[1]), (self.location[0], self.location[1]+self.size[1]))
        if self.current_level != self.max_level:
            if self.bottom_left != None:
                self.bottom_left.draw(screen)
            if self.bottom_right != None:
                self.bottom_right.draw(screen)
            if self.top_left != None:
                self.top_left.draw(screen)
            if self.top_right != None:
                self.top_right.draw(screen)

    def get_elements(self, rect):
        #ret = self.objects
        if self.current_level == self.max_level:
            #print self.objects
            return self.objects
        else:
            half_size = (self.size[0]/2, self.size[1]/2)
            if self.top_left!= None and rect.colliderect((self.location, half_size)):
                return self.top_left.get_elements(rect)
                #for x in self.top_left.get_elements(rect):
                #   ret.append(x)
            if self.top_right!= None and rect.colliderect(((self.location[0]+self.size[0]/2, self.location[1]), half_size)):
                return self.top_right.get_elements(rect)
                #for x in self.top_right.get_elements(rect):
                #   ret.append(x)
            if self.bottom_left!= None and rect.colliderect(((self.location[0], self.location[1]+self.size[1]/2), half_size)):
                return self.bottom_left.get_elements(rect)
                #for x in self.bottom_left.get_elements(rect):
                #   ret.append(x)
            if self.bottom_right!= None and rect.colliderect(((self.location[0]+self.size[0]/2, self.location[1]+self.size[1]/2), half_size)):
                return self.bottom_right.get_elements(rect)
                #for x in self.bottom_right.get_elements(rect):
                #   ret.append(x)
            #print ret
        return [] 
```

当我插入对象时，它会打印出来

> platform.Platforms 对象位于 0x0236F950 platform.Platforms 对象位于 0x0236F950 platform.Platforms 对象位于 0x0236F950 platform.Platforms 对象位于 0x0236F950 platform.Platforms 对象位于 0x0236FAB0 platform.Platforms 对象位于 0x0236FAB0 对象 platform.FAB0236 平台对象位于 0x023P6

这很好我想要可变树中有两个不同的对象但是当我调用它时它只有列表中的第二个

所以我做了一个函数

```
def elements(self):
    if self.current_level == self.max_level:
        for x in self.objects:
            print x, x.rect
    else:
        if self.bottom_left != None:
            self.bottom_left.elements()
        if self.bottom_right != None:
            self.bottom_right.elements()
        if self.top_left != None:
            self.top_left.elements()
        if self.top_right != None:
            self.top_right.elements() 
```

打印出来

> platform.Platforms 对象位于 0x02320A70 rect(350, 630, 110, 110) platform.Platforms 对象位于 0x02320A70 rect(350, 630, 110, 110) platform.Platforms 对象位于 0x02320A70 rect(350, 630, 110, 110) 平台。平台对象位于 0x02320A70 rect(350, 630, 110, 110)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T03:18:55.280

您的`add_object`班级每次都会创建一个新的较低级别的四叉树，即使那里已经有一个。

我打算在你之前的四叉树问题上提出这个建议（很确定是你），但你在我有机会之前就删除了它：如果 QuadTree 类有一个找到或创建适当的方法的方法，你可能会更好给定位置的子树（您`rect`在`add_objects`和中调用的内容`get_elements`）。请注意，这假设每个对象都完全存在于一个子树中，这对于点是正确的，但对于任意矩形则不然。（最明显的情况是一个非常大的矩形——一个覆盖整个字段的矩形——占据了任何给定级别四叉树的所有*四个*子树。）

假设 in 中的逻辑`get_elements`基本上是正确的，例如，您可以定义如下内容：

```
def find_or_create(self, rect, create = False):
    "find or create the sub-tree that contains the given point"
    if self.current_level == self.max_level:
        return self # we contain it
    half_size = (self.size[0]/2, self.size[1]/2)
    if rect.collide_rect((self.location, half_size)):
        name = 'top_left'
        location = self.location
    else if rect.collide_rect(...):
        name = 'top_right'
        location = ... # top right location
    else ... [as before, each time setting name and location]
    # now, after deciding which sub-quadrant applies...
    quad = getattr(self, name)
    # if the sub-quadrant already exists, recurse
    if quad:
        return quad.find_or_create(rect, create)
    # otherwise, if we are supposed to create it, do that
    if create:
        quad = QuadTree(...) # this is why you also have to compute "location"
        setattr(self, name, quad)
    return quad # return the new quadtree, or None, as appropriate 
```

这为您提供了一种查找包含四叉树的方法（如果不存在则返回 None），或者，为了添加对象，创建它（返回现有的最大级别四叉树，或在适当的象限中创建一个新的最大级别四叉树）。

和操作让您可以使用您计算的来获取`getattr`和设置 self.top_left、self.top_right 等。`setattr``name`

然后添加一个对象非常简单：

```
 quad = self.find_or_create(rect, True)
    quad.objects.append(new_object) 
```

还有一种更好的方法来处理位置计算和测试，但我把它留作练习。（当然，如果`rect`s 可以跨越多个子树（如果它们不是点），则您需要计算所有适当子树的列表，而不是单个适当的 top-left / top-right /左下/右下子树。）

# compiler-construction - 编译器输出语言 - LLVM IR vs C

> ID：10264635
> 
> 赞同：13
> 
> 时间：2012-04-22T02:08:28.137
> 
> 标签：compiler-construction, code-generation, llvm, llvm-ir

对于编写编译器，将 LLVM IR 与 C 用于目标语言的优缺点是什么？我知道两者都被使用了，我想如果我使用 clang 编译 C，最终的机器代码会是相似的。那么还有什么其他的事情需要考虑呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-22T12:24:30.557

我已经将 LLVM IR 用于一些编译器后端，并使用过使用 C 作为后端的编译器。我发现给 LLVM IR 带来优势的一件事是它是有类型的。在不从 LLVM 库中获取错误的情况下，很难做出完全格式错误的输出。

在我看来，保持源代码和 IR 之间的密切关联以进行调试也更容易。

此外，您还可以获得所有很酷的 LLVM 命令行工具来分析和处理前端发出的 IR。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T13:19:51.123

我怀疑您在以 C 为目标时能否为您的语言实现适当的调试支持。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-23T11:43:41.727

LLVM 优势：

1.  JIT - 您可以动态编译和运行代码。当然，C 语言也可以（例如，使用嵌入式`tcc`），但它的健壮性和可移植性要差得多。
2.  您可以在生成的 IR 上运行自己的优化过程。
3.  免费反射 - 使用 LLVM 检查生成的代码要容易得多。
4.  LLVM 库不像大多数 C 编译器那么大（`tcc`当然不算在内）。

LLVM 的缺点：

1.  代码不可移植，你必须根据你的目标稍微改变它。LLVM 有一个可移植的子集，但它仍然是一种狡猾的做法。
2.  对 C++ 库的运行时依赖可能有点问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-22T09:51:23.970

明显没有 CLANG 或处于实验状态的架构和操作系统。

C 被更广泛地接受，但 LLVM IR 允许你用勺子喂 LLVM 引擎。并非所有通向 IR 的路径都是平等的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-07-22T13:24:47.280

我将使用 LLVM 来指代框架，并使用 LLVM IR 来指代目标语言。

**C 优势**

1.  跨平台
2.  调试（请阅读下文。部分与第 4 点有关。）
3.  互操作性
4.  便于使用

**LLVM IR 优势**

1.  表现
2.  自定义选项
3.  内存占用
4.  强打字/安全

**C**

1.  尽管 LLVM 最近获得了更多目标，但存在适用于各种嵌入式系统的 C 编译器。可以说，在这个类别中，C 比 LLVM IR（中间表示）略有优势。

2.  针对 C 而不是 LLVM 的主要优点是生成的代码与 LLVM 相比处于更高级别。使用诸如 GDB 之类的标准化调试器，可以说更容易推理生成代码的行为。使用 GDB 等调试器也更容易为编译为 C 的语言构建调试器。

3.  第三点。互操作性更麻烦。但是，C 具有标准化的应用程序二进制接口。因此更容易编写库并将这些库与用 C 和/或 C+ 编写的其他程序接口。尽管如此，许多语言（例如 Java）仍为 C 提供标准化接口。

4.  可以说，通过以 C 为目标更容易上手并获得一些工作

**LLVM**

1.  C 是一种相当高级的语言，如果不编写它，按照惯用方式，性能可能会降低（取决于目标编译器，以及所述编译器所做的假设）。有一些论文，例如[An llVM backend for GHC](https://dl.acm.org/doi/abs/10.1145/1863523.1863538) ，说明了 C 的一些缺点和 LLVM IR 作为目标语言的优点。

2.  由于 LLVM（框架）是作为可重用单元的集合构建的，因此很容易为您的特定目标语言编写特定于目标语言的传递。编写自定义 GC 也更容易（[截至 2020 年，对此有一些支持](https://llvm.org/docs/GarbageCollection.html)）。在 C 的情况下也是可能的，并且有一些垃圾收集器，例如[Boehm GC](https://www.hboehm.info/gc/)。但是，C 并非设计为中间语言。

3.  内存占用。与 LLVM 位码相比，生成的 C 代码具有更大的内存占用。如果您正在编译和链接一个大型系统，您可能会获得针对 LLVM 的编译时间优势。

4.  而 C 是弱类型语言。LLVM IR 是一种强类型。因此，可以说以 LLVM IR 为目标更安全。

# ios - 如何循环遍历 UITableView 中尚未可见的单元格？

> ID：10264639
> 
> 赞同：2
> 
> 时间：2012-04-22T02:08:58.493
> 
> 标签：ios, uitableview, first-responder

我正在尝试将第一响应者状态赋予动态生成的表格的下一个表格单元格，并通过迭代标签来做到这一点。这很好用，除非我遇到尚未可见的单元格，因此没有在 tableView:cellForRowAtIndexPath: 中分配标签。

关于如何为他们分配标签或以任何其他方式为他们提供第一响应者状态的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T02:57:54.943

UITableViewCell 对象应该被重用。UITableViewCell 对象不会重新分配，但内容会被新数据换出。您可以向数据添加功能，以确定它们是否已放入单元格中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T12:06:17.230

由于您知道目标单元格的索引路径，因此您可以调用`scrollToRowAtIndexPath:atScrollPosition:animated:`将您的单元格带入视图。然后`UITableViewCell`将以通常的方式创建 - 通过委托。

# php - Plupload 显示成功，但图片不在上传目录中

> ID：10264644
> 
> 赞同：1
> 
> 时间：2012-04-22T02:10:08.260
> 
> 标签：php, javascript, plupload

我正在为我的网站构建一个图像上传功能，而不是浪费时间滚动我自己的上传器，我决定使用 pluploader。我以前用过这个上传器，它开箱即用，但这次我不能让它工作。
我的上传页面代码：

```
<script type="text/javascript">
$(function() {
$("#uploader").plupload({
    // General settings
    runtimes : 'html5,gears,flash,silverlight,browserplus',
    url : '/plupload/examples/upload.php',
    max_file_size : '10mb',
    chunk_size : '1mb',

    // Specify what files to browse for
    filters : [
        {title : "Image files", extensions : "jpg,gif,png"},
    ],

    // Flash settings
    flash_swf_url : '/plupload/js/plupload.flash.swf',

    // Silverlight settings
    silverlight_xap_url : '/plupload/js/plupload.silverlight.xap'

});
    // Client side form validation
$('form').submit(function(e) {
    var uploader = $('#uploader').plupload('getUploader');

    // Files in queue upload them first
    if (uploader.files.length > 0) {
        // When all files are uploaded submit form
        uploader.bind('StateChanged', function() {
            if (uploader.files.length === (uploader.total.uploaded + uploader.total.failed)) {
                $('form')[0].submit();
            }
        });

        uploader.start();
    } else
        alert('You must at least upload one file.');

    return false;
});

});
</script> 
```

然后我的上传文件：

```
 <?php
/**
 * upload.php
 *
 * Copyright 2009, Moxiecode Systems AB
 * Released under GPL License.
 *
 * License: http://www.plupload.com/license
 * Contributing: http://www.plupload.com/contributing
 */

// HTTP headers for no cache etc
header("Expires: Mon, 26 Jul 1997 05:00:00 GMT");
header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT");
header("Cache-Control: no-store, no-cache, must-revalidate");
header("Cache-Control: post-check=0, pre-check=0", false);
header("Pragma: no-cache");

// Settings
//$targetDir = ini_get("upload_tmp_dir") . DIRECTORY_SEPARATOR . "plupload";
$targetDir = 'imgs' . DIRECTORY_SEPARATOR . 'uploads';

$cleanupTargetDir = false; // Remove old files
$maxFileAge = 5 * 3600; // Temp file age in seconds

// 5 minutes execution time
@set_time_limit(5 * 60);

// Uncomment this one to fake upload time
// usleep(5000);

// Get parameters
$chunk = isset($_REQUEST["chunk"]) ? intval($_REQUEST["chunk"]) : 0;
$chunks = isset($_REQUEST["chunks"]) ? intval($_REQUEST["chunks"]) : 0;
$fileName = isset($_REQUEST["name"]) ? $_REQUEST["name"] : '';

// Clean the fileName for security reasons
$fileName = preg_replace('/[^\w\._]+/', '_', $fileName);

// Make sure the fileName is unique but only if chunking is disabled
if ($chunks < 2 && file_exists($targetDir . DIRECTORY_SEPARATOR . $fileName)) {
    $ext = strrpos($fileName, '.');
    $fileName_a = substr($fileName, 0, $ext);
    $fileName_b = substr($fileName, $ext);

    $count = 1;
    while (file_exists($targetDir . DIRECTORY_SEPARATOR . $fileName_a . '_' . $count . $fileName_b))
        $count++;

    $fileName = $fileName_a . '_' . $count . $fileName_b;
}

$filePath = $targetDir . DIRECTORY_SEPARATOR . $fileName;

// Create target dir
if (!file_exists($targetDir))
    @mkdir($targetDir);

// Remove old temp files    
if ($cleanupTargetDir && is_dir($targetDir) && ($dir = opendir($targetDir))) {
    while (($file = readdir($dir)) !== false) {
        $tmpfilePath = $targetDir . DIRECTORY_SEPARATOR . $file;

        // Remove temp file if it is older than the max age and is not the current file
        if (preg_match('/\.part$/', $file) && (filemtime($tmpfilePath) < time() - $maxFileAge) && ($tmpfilePath != "{$filePath}.part")) {
            @unlink($tmpfilePath);
        }
    }

    closedir($dir);
} else
    die('{"jsonrpc" : "2.0", "error" : {"code": 100, "message": "Failed to open temp directory."}, "id" : "id"}');

// Look for the content type header
if (isset($_SERVER["HTTP_CONTENT_TYPE"]))
    $contentType = $_SERVER["HTTP_CONTENT_TYPE"];

if (isset($_SERVER["CONTENT_TYPE"]))
    $contentType = $_SERVER["CONTENT_TYPE"];

// Handle non multipart uploads older WebKit versions didn't support multipart in HTML5
if (strpos($contentType, "multipart") !== false) {
    if (isset($_FILES['file']['tmp_name']) && is_uploaded_file($_FILES['file']['tmp_name'])) {
        // Open temp file
        $out = fopen("{$filePath}.part", $chunk == 0 ? "wb" : "ab");
        if ($out) {
            // Read binary input stream and append it to temp file
            $in = fopen($_FILES['file']['tmp_name'], "rb");

            if ($in) {
                while ($buff = fread($in, 4096))
                    fwrite($out, $buff);
            } else
                die('{"jsonrpc" : "2.0", "error" : {"code": 101, "message": "Failed to open input stream."}, "id" : "id"}');
            fclose($in);
            fclose($out);
            @unlink($_FILES['file']['tmp_name']);
        } else
            die('{"jsonrpc" : "2.0", "error" : {"code": 102, "message": "Failed to open output stream."}, "id" : "id"}');
    } else
        die('{"jsonrpc" : "2.0", "error" : {"code": 103, "message": "Failed to move uploaded file."}, "id" : "id"}');
} else {
    // Open temp file
    $out = fopen("{$filePath}.part", $chunk == 0 ? "wb" : "ab");
    if ($out) {
        // Read binary input stream and append it to temp file
        $in = fopen("php://input", "rb");

        if ($in) {
            while ($buff = fread($in, 4096))
                fwrite($out, $buff);
        } else
            die('{"jsonrpc" : "2.0", "error" : {"code": 101, "message": "Failed to open input stream."}, "id" : "id"}');

        fclose($in);
        fclose($out);
    } else
        die('{"jsonrpc" : "2.0", "error" : {"code": 102, "message": "Failed to open output stream."}, "id" : "id"}');
}

// Check if file has been uploaded
if (!$chunks || $chunk == $chunks - 1) {
    // Strip the temp .part suffix off 
    rename("{$filePath}.part", $filePath);
}

// Return JSON-RPC response
die('{"jsonrpc" : "2.0", "result" : null, "id" : "id"}');

?> 
```

我脑子里有所有这些：

```
 <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.9/themes/base/jquery-ui.css" type="text/css" />
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js" type="text/javascript"></script>
    <script src=" https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.9/jquery-ui.min.js"></script>

    <!-- Load plupload and all it's runtimes and finally the UI widget -->
    <link rel="stylesheet" href="/plupload/js/jquery.ui.plupload/css/jquery.ui.plupload.css" type="text/css" />

    <script type="text/javascript" src="/plupload/js/plupload.js"></script>
    <script type="text/javascript" src="/plupload/js/plupload.gears.js"></script>
    <script type="text/javascript" src="/plupload/js/plupload.silverlight.js"></script>
    <script type="text/javascript" src="/plupload/js/plupload.flash.js"></script>
    <script type="text/javascript" src="/plupload/js/plupload.browserplus.js"></script>
    <script type="text/javascript" src="/plupload/js/plupload.html4.js"></script>
    <script type="text/javascript" src="/plupload/js/plupload.html5.js"></script>
    <script type="text/javascript" src="/plupload/js/jquery.ui.plupload/jquery.ui.plupload.js"></script> 
```

它可以工作，就像我看到花哨的上传框一样，可以选择文件，点击上传，然后运行百分比，然后说上传。但后来我到了我的上传目录，那里什么也没有。我已经尝试了多个位置来上传图片，但它们都不起作用。我已经在整个主机目录中搜索了图像，但它们尚未上传。
有任何想法吗？

编辑：
我已经把它上传到临时目录，但是第二次我用其他东西替换临时目录，它开始发送错误代码 100 无法打开临时目录。还是不知道该怎么办。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T03:37:38.717

Plupload Show 成功并不意味着你应该完成你想要完成的事情。这仅意味着您的图片上传到服务器完成。之后，仍然会发生一些异常，例如您的 dir 无法成功或 fwrite 返回错误状态。

您可以使用firebug或其他东西来调试代码，看看服务器代码的响应是什么，然后您应该打开error_report，然后您就可以看到真相了。

愿这对你有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T10:46:32.147

是的，PLUpload 小部件的进度条仅仅意味着它正在成功地将文件*发送*到服务器。这并不意味着您的上传服务器正在正确处理接收到的数据！

[根据我在http://www.plupload.com/punbb/viewtopic.php?id=1985](http://www.plupload.com/punbb/viewtopic.php?id=1985)的帖子，这可能与 PHP 服务器设置有关

# javascript - 默认按钮颜色

> ID：10264648
> 
> 赞同：0
> 
> 时间：2012-04-22T02:12:26.807
> 
> 标签：javascript, html

发现表单上输入的默认按钮是第一种`submit`类型。这行得通，但是我要为按钮指定什么以使其看起来像默认按钮，即突出显示的按钮。如果我设置背景颜色，这会改变标准按钮外观的按钮外观。

这是表单 HTML。

```
<form id="login_user_id" name="login_user_form"> 

<input type="hidden" name="id" id="id" value="add" /> 
<input type="hidden" name="edit_user" id="edit_user" value="y" />
<table cellspacing="0px"> <tr><td>Username or email:</td></tr><tr><td>
<input type="text" name="username_email" id="username_email" size="30" value="" class="inline_input"/></td> </tr> <tr><td>Password:</td></tr><tr><td>
<input type="password" name="user_passwd" id="user_passwd" size="30" class="inline_input"/></td> </tr> </table></td></tr> </table> 
<button id="login" type="submit" onclick="login_user(); return false;" style="width: 63px;">Login</button> 
<button id="cancel" onclick="cancel_login(); return false;" style="width: 63px; float: right; margin-right:8px; position: relative; top: -22px;">Cancel</button> 

</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T04:45:10.527

声明“如果我设置背景颜色，这会改变标准按钮外观的按钮外观”几乎总结了这些限制。您可以为按钮设置样式，但许多类型的样式会根据系统默认设置剥夺按钮所具有的功能。浏览器使用一些内置例程来呈现按钮，但许多 CSS 设置使它们偏离了这一点。一般无法模仿常见的按钮样式，部分是因为它因系统而异，部分是因为它具有当前定义和实现的 CSS 无法描述的渲染功能。

所以让按钮看起来像按钮。如果你不能做到这一点，请以某种统一的方式设置*所有按钮的样式；*让非默认按钮看起来像普通按钮而默认按钮看起来像其他东西会产生误导。

如果您只是删除另一个按钮，则实际上不需要将其中一个按钮指示为默认按钮。（请参阅[被认为有害的重置/取消按钮](http://www.useit.com/alertbox/20000416.html)。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T04:53:17.763

默认情况下，按钮由操作系统绘制，浏览器不控制它们的外观。如果您开始更改按钮的 CSS 属性，浏览器会接管并以自己的方式绘制按钮。如果您正在寻找一种简单的方法来获得具有不同颜色的漂亮按钮，请尝试 bootstrap。这是一个**非常**好的 CSS 样式表，尤其是在构建美观的表单时。

[http://twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/)

# php - 如何从其他网站获取信息

> ID：10264650
> 
> 赞同：0
> 
> 时间：2012-04-22T02:13:06.710
> 
> 标签：php, javascript, ajax, json

我希望能够从他们的页面获取个人最近的推文。无论如何我可以做到这一点吗？如果这不是足够的信息，我很抱歉，但我什至不知道从哪里开始，我在网上找不到任何其他帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T02:24:22.540

您正在寻找[Twitter API](http://dev.twitter.com)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T02:16:33.843

要获取推文客户端，您必须使用跨域 AJAX。请参阅：[带有 jquery 的 jsonp](https://stackoverflow.com/questions/2681466/jsonp-with-jquery)（第一个答案实际上有 twitter 特定的加载代码）。

或者，您可以通过（例如）使用[`file_get_contents`](http://php.net/manual/en/function.file-get-contents.php)下载他们的推文流，然后根据您的选择对其进行解析，从而在服务器端获取推文。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T02:19:49.333

通常，要从带有程序的网站获取信息，您必须“抓取”该网站（在 Google 上搜索如何做到这一点）。但有时它是非法的，因此您可能需要检查隐私条款和其他内容。那只是一般性的，而不是具体的推文。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T06:05:06.167

为什么不在推特上将他们添加为朋友？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-22T02:29:20.960

Tanner Ellis，你在软件行业，你总是有东西要学。即使是有经验的人也必须多学习才能了解新事物。无论如何，您可以使用比 file_get_contents 更快的 curl。大多数浏览器/站点都不允许跨域 ajax。如果该站点提供，您可以使用 api。

# visual-studio - 如何在 Visual Studio 2008 的左侧显示“文件窗口”？

> ID：10264651
> 
> 赞同：1
> 
> 时间：2012-04-22T02:13:19.973
> 
> 标签：visual-studio

我是 Visual Studio 的新手，我正在使用 VS 2008。我想知道如何显示通常位于左侧的窗口。它包含一种组织树，带有项目名称，以及“头文件”、“资源文件”等，以及包含所有文件的文件夹。您可以右键单击这些文件夹以创建新文件。这只是一个简单的窗口，可以帮助我跟踪项目中的文件，我关闭了它，不知道如何打开它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T02:18:38.880

可以通过查看 -> 解决方案资源管理器来启用解决方案资源管理器。

# python - 如何在 Tkinter 中使用条目小部件

> ID：10264654
> 
> 赞同：3
> 
> 时间：2012-04-22T02:14:44.233
> 
> 标签：python, tkinter

我正在尝试在 Tkinter 中制作一个需要使用入口小部件的程序。我查看了不同的网站，但没有一个网站清楚地解释了如何使用 Entry 小部件及其功能。有人请解释一下或给我一个很好的链接吗？

关于如何从小部件获取信息的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-22T02:38:43.597

这似乎是一个非常笼统的问题，但这是一个非常详细[的](http://effbot.org/tkinterbook/entry.htm)网站，这是一个非常简单的通用示例：

```
import Tkinter as tk

class application:
    def __init__(self,window):
        """ Initalize the Application """
        self.myentrybox = tk.Entry(window)
        self.myentrybox.pack()
        self.myentrybox.insert(0,"some default value")
        self.myentrybox.bind("<Return>",self.Enter)

    def Enter(self,event):
        """ Someone Pressed Enter """
        print "You entered >> %s" % (self.myentrybox.get())

root=tk.Tk()
myapp = application(root)
root.mainloop() 
```

希望您可以推断出您特别需要了解的内容...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-24T10:04:57.110

```
from tkinter import*

root = Tk()

a = Entry(root)
a.insert(0,"Enter a Text")
a.pack()

def game():
    print(a.get())

enter = Button(root,text="Enter",command=game)
enter.pack()
enter.bind("<Return>",game)

root.mainloop() 
```

我认为这是最简单的方法。

# c++ - std::cout 字符串崩溃

> ID：10264656
> 
> 赞同：1
> 
> 时间：2012-04-22T02:15:42.470
> 
> 标签：c++, string, crash

当我尝试执行一个 cout 是一个字符串对象的简单程序时，我在运行时遇到了崩溃，我正在使用带有以下代码的 Borland C++ 编译器 5.5 版：

```
#include <iostream>
#include <string> // Usaremos as funcoes mais modernas de String em C++
#include <conio.h>

using namespace std;

// <Prototipos >

int MenuPrincipal(void);

void DesenharCentralizado(string String, int CoordY);

// </Prototipos>

int main() {
    while(MenuPrincipal() != 0); // Para sair, ele deve retornar 0
    return 0;
}

int MenuPrincipal(void) {
    string Titulo = "Agenda";

    clrscr();

    DesenharCentralizado(Titulo, 4);
    getch();
    return 0;
}

void DesenharCentralizado(string Frase, int CoordY) {
    int PosX=wherex(), PosY=wherey();

    gotoxy((80-Frase.length())/2, CoordY);
    cout << Frase; // XXX CRASH
    gotoxy(PosX, PosY);
} 
```

PS：请不要抱怨使用旧的 conio.h 和这些东西，这些是我的 C++ 课，我的老师正在教我们先使用它......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T02:35:16.457

如果您注释掉文件中的所有内容并将其替换为

```
#include <iostream>
int main() { std::cout << "Hello, world!"; } 
```

那样有用吗？如果是，那么试试

```
#include <iostream>
#include <string>
int main() { std::cout << std::string( "Hello, world!" ); } 
```

通过删除`<conio.h>`和调用它的函数，你的程序很简单，可以指示一个损坏的工具链，并且一次添加一个功能可能有助于追踪损坏的地方。这可能是错误的运行时库版本，或者是 Borland 安装或项目文件中的某种损坏。

通过一步一步地重新创建项目，您将追查原因，或者最终得到一个工作项目，此时您可以忘记问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T07:14:11.607

宝兰 5.5。仅*部分*支持`std::string`.

`std::string`在这种特殊情况下，您的代码很可能是罪魁祸首，但即便如此，尝试与该编译器一起使用时，您将一事无成（而且您将一事无成） 。

如果您的老师要求您使用 Borland 5.5，那么您的老师正在尝试教他或她自己，因为他/她正在教您。这种方法有时还可以，但请把你的老师送到这里。现在，**对队长的老师：**

*Borland 5.5 是一个坏掉的工具。它不仅仅是预先标准：它已经被打破了。学生不会从使用它中学到任何积极的东西，就像试图在严重走调的钢琴上学习弹钢琴一样。*

*如果您必须支持 15 年（或更早）的计算机，则可能使用 g++ 2.95 或 Visual C++ 6.0。否则，请使用免费的现代工具，例如（截至 2012 年）MinGW g++ 4.6 或更高版本，或 Visual C++ 10.0 或更高版本。新的编译器（尽管不是 Visual Studio Express IDE）即使在只有 265 MB RAM 的计算机上也能很好地运行，截至 2012 年包括大约十年前的 PC。Code::Blocks 是旧 Windows 计算机的一个很好的 IDE。*

# graphics - SVG：我可以引用相同的元素/组/路径而不是多次复制它吗？

> ID：10264659
> 
> 赞同：15
> 
> 时间：2012-04-22T02:15:53.780
> 
> 标签：graphics, svg

我正在为一个小游戏制作一些图形。图形将是 SVG，并且主要是基于图块的（想想塞尔达传说：SNES 的过去链接）。我画了一个小草砖，想在整个领域复制这个 NxM 次。在 Inkscape 或其他 GUI SVG 编辑工具中执行此操作会生成超过 3.5MB 的文件，大于相同尺寸的 32 位位图。

我想知道是否可以定义某种“草砖”对象，而不是将其复制到我领域中的每个位置，只需使用适当的坐标引用它即可。我意识到这仍然会导致场景在加载时占用相同数量的内存，但这意味着磁盘上存储的文件要小得多，希望这意味着更容易编辑，因为在这种情况下，如果我想更改，例如，我的草的颜色，我只需要更改我的原型对象而不是进行更改，然后在整个字段上重新复制新图块。

我已经对我认为可能有帮助的各种关键字进行了大约六次不同的搜索，但似乎没有什么能满足我的要求。我想使用'xlink：href'属性，因为我看到它在标签中首先用于定义调色板，然后稍后在包含转换数据的单独标签中引用它。

我尝试使用类似的东西：

`<path id="grassyPatch" d="M 3.3310392e-7,608 31.993091,624 63.986183,608 31.993091,592 z" style="..." />`

然后用类似的东西复制它：

`<path id="grass-copy1" xlink:href="#grassyPatch" transform="translate(32,-32)" />` `<path id="grass-copy2" xlink:href="#grassyPatch" transform="translate(32,-64)" />`

等，以便将其多次复制到新位置。感谢是否有人可以让我知道这是否可能。到目前为止我还没有抱希望，所以如果你也知道这是*不可能*的，请也告诉我，这样我就可以停止浪费我的时间了。

谢谢！

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-04-22T08:34:13.117

你快到了，你正在寻找复制/克隆的元素是`<use>`

`<use xlink:href="#grassyPatch" transform="translate(32,-32)" />`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T03:06:51.017

你提到想要使用 GUI 工具来完成这个，所以我想让你知道这在 Inkscape 中是可能的。您需要使用复制工具旁边工具栏上的克隆工具，或者您可以按 Ctrl-D。当您使用它时，克隆将直接放置在它正在克隆的对象之上。只需使用移动工具将其放置在您想要的位置。

Inkscape 在“保存”对话框的文件类型下拉列表中还有一个“优化的 SVG”选项，它允许您通过删除无关信息以及可选地降低精度来减小 SVG 的文件大小。

# php - 如何从源代码中获取 PHP 版本？

> ID：10264661
> 
> 赞同：3
> 
> 时间：2012-04-22T02:16:49.600
> 
> 标签：php, shell

我正在尝试创建一个 bash 脚本，它[从 Github](https://github.com/php/php-src/)（主分支）下载最新版本的 PHP 并安装它。

我想用我正在下载的版本创建一个文件夹（例如 /path/to/php/5.4.0），但我在源代码中找不到任何文件说“嘿，我是 PHP 的 XXX 版本”。请看下面我的简单代码的作用：

```
url="https://github.com/php/php-src/tarball/master"
curl -L $url > php-temp.tar.gz
tar -zxf php-temp.tar.gz
cd php-php-src* 
```

我想知道 cat|grep 一些 VERSION 或 README 文件，但我在其中找不到任何对 PHP 版本的引用。

有人知道哪里有这个信息的文件吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T02:21:36.070

该文件`main/php_version.h`包含您要查找的信息：

例如（[https://github.com/php/php-src/blob/master/main/php_version.h](https://github.com/php/php-src/blob/master/main/php_version.h)）：

```
/* automatically generated by configure */
/* edit configure.in to change version number */
#define PHP_MAJOR_VERSION 5
#define PHP_MINOR_VERSION 5
#define PHP_RELEASE_VERSION 0
#define PHP_EXTRA_VERSION "-dev"
#define PHP_VERSION "5.5.0-dev"
#define PHP_VERSION_ID 50500 
```

# node.js - Everyauth - 连接 Foursquare

> ID：10264662
> 
> 赞同：0
> 
> 时间：2012-04-22T02:16:52.500
> 
> 标签：node.js, foursquare, everyauth

我正在尝试构建一个 Foursquare 应用程序，并且我选择了 Everyauth 模块来实现身份验证（与 Foursquare 连接）。

我收到错误

```
Error: Step getAccessToken of `foursquare` module timed out. 
```

在用户允许该应用程序后。这是我正在使用的代码：

```
var express = require('express'),
        util = require('util'),
        helper = require('./helper'),
        settings = require('./settings').appSettings,
        everyauth = require('everyauth');

everyauth.foursquare
  .entryPath('/auth/foursquare')
  .callbackPath('/auth/foursquare/callback');

//everyauth.everymodule.moduleTimeout(-1);

everyauth.foursquare
  .appId(settings.appId)
  .appSecret(settings.appSecret)
  .findOrCreateUser( function (session, accessToken, accessTokenExtra, foursquareUserMetadata) {
    util.inspect(arguments);
    return {};
  })
  .redirectPath('/');

  var app = express.createServer(
      express.bodyParser()
    , express.static(__dirname + "/public")
    , express.favicon()
    , express.cookieParser()
    , express.session({ secret: '*****'})
    , everyauth.middleware()
  );

app.get('/', function (req, res) {
    res.writeHead(200, {'Content-Type': 'text/html'});
    res.end('<html><head></head><body><a href="' + helper.getAuthUrl() + '">Connect with Foursquare</a></body></html>');
});

everyauth.helpExpress(app);

app.listen(4040); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T22:35:36.233

我的错误是，我将用户重定向到 Foursquare 文档中描述的应用身份验证 url。如果我将用户重定向到/auth/foursquare/，它会起作用，因为everyauth 处理重定向到oauth 提供程序。

# ruby-on-rails - 警告：无法批量分配受保护的属性：课程

> ID：10264663
> 
> 赞同：0
> 
> 时间：2012-04-22T02:17:04.187
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在使用 Rails，但我似乎无法克服这个错误。一个课程有很多笔记，一个笔记属于课程。

我得到的错误是：

> 无法批量分配受保护的属性：`course`

这是我的`course.rb`

```
class Course < ActiveRecord::Base
belongs_to :semester
has_many :notes, :dependent => :destroy

attr_accessible :course_name, :course_number, :instructor, :instructor_email, :class_meets, 
                :class_starts, :semester_id
end 
```

`note.rb`

```
class Note < ActiveRecord::Base
belongs_to :course
attr_accessor :course_name, :course_id
attr_accessible :title, :date, :body, :extra, :course_name, :course_id 
end 
```

`notes/_form.html.erb`（用户可以选择课程并创建笔记）

```
<%= f.select("course", Course.find(:all).collect {|c| [c.course_name, c.id]})%> 
```

有没有办法解决这个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T02:31:15.677

你需要添加

`attr_accessible :course`

在你的里面`Note.rb`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-13T11:33:32.647

由于您使用的是小于 rails 4 的 rails 版本，因此您必须明确传递要访问的参数。这是出于安全原因。但是，如果您默认使用 rails 4，rails 会为您处理这个问题。它被称为强参数。

所以你必须告诉你的模型让我的控制器和视图访问这个属性。

```
 attr_accessible :course 
```

# iphone - UIScrollView 不能正确滚动

> ID：10264667
> 
> 赞同：0
> 
> 时间：2012-04-22T02:17:35.743
> 
> 标签：iphone, ios, uiscrollview

这就是我到目前为止所拥有的，我有一个滚动条和两个按钮，我想在滚动条上，但我无法到达第二个按钮，因为它不会滚动到它。如果有人能在我的代码中看到错误，我将不胜感激。

```
 UIScrollView *mainScroll = [[UIScrollView alloc]initWithFrame:CGRectMake(0, 65, 320, 4000)];
mainScroll.contentSize = CGSizeMake(320, 4000);
mainScroll.showsHorizontalScrollIndicator = YES;
[self.view addSubview:mainScroll];
[mainScroll setScrollEnabled:YES];

UIButton *mainCreateGame = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[mainCreateGame addTarget:self
                   action:@selector(goToCreateGameViewController)
         forControlEvents:UIControlEventTouchUpInside];
[mainScroll addSubview:mainCreateGame];
mainCreateGame.frame = CGRectMake(75, 10, 170, 60);

UIButton *anotherButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[anotherButton addTarget:self
                  action:@selector(goFuckOffApple)
        forControlEvents:UIControlEventTouchUpInside];
[mainScroll addSubview: anotherButton];
anotherButton.frame = CGRectMake(75, 3000, 170, 60); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T02:20:49.130

好吧，除了有趣的方法名称（goF**kOffApple，LOL），您将滚动视图的框架设置为与其内容相同的大小。框架和内容大小是不同的动物。试试这个：

```
 UIScrollView *mainScroll = [[UIScrollView alloc]initWithFrame:CGRectMake(0, 65, 320, 395)];
mainScroll.contentSize = CGSizeMake(320, 4000);
mainScroll.showsVerticalScrollIndicator = YES;
[self.view addSubview:mainScroll];
[mainScroll setScrollEnabled:YES];

UIButton *mainCreateGame = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[mainCreateGame addTarget:self
                   action:@selector(goToCreateGameViewController)
         forControlEvents:UIControlEventTouchUpInside];
[mainScroll addSubview:mainCreateGame];
mainCreateGame.frame = CGRectMake(75, 10, 170, 60);

UIButton *anotherButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[anotherButton addTarget:self
                  action:@selector(goFuckOffApple)
        forControlEvents:UIControlEventTouchUpInside];
[mainScroll addSubview: anotherButton];
anotherButton.frame = CGRectMake(75, 3000, 170, 60); 
```

# ssh - 多个用户通过 ssh 编辑网站

> ID：10264675
> 
> 赞同：1
> 
> 时间：2012-04-22T02:20:11.857
> 
> 标签：ssh, web

我已经使用我的帐户设置了一个服务器作为 html 文件的所有者。我用 vim over ssh 编辑文件。我想让 DevB 和 DevC 也可以通过 ssh 编辑文件。据我了解 linux 权限，这意味着我需要将拥有文件的组设置为我们都使用的组，并允许该组写入权限。这是最好的方法还是真的很糟糕？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T02:36:44.643

您的想法与我设置网络服务器时的想法相同：

每个项目（网站、源代码树）都有一个用户帐户（用于自动 shell 脚本等）以及一个用户组。然后所有应该被允许编辑项目的开发者都被添加到同一个用户组中。然后只需确保组标志为 6 或 7。

虽然这是我喜欢的一种方法，但它有其局限性：当一个编码员搞砸了，他会为其他人这样做。您可能想研究以 git、SVN、CVS 或任何其他形式的颠覆。

# c - 从 C 中的函数返回多个参数

> ID：10264681
> 
> 赞同：0
> 
> 时间：2012-04-22T02:22:13.883
> 
> 标签：c

我一直在尝试找出可以从 C 中的函数返回多个值的方法。

比如说我有

```
int compute(int a, int b)
{
int c;
// do some computation on a,b,c
// return a,b,c
} 
```

现在我可以在数组中返回这些值，我试图这样做，然后我意识到数组需要是动态的，因此它也可以在 main() 中引用。

另一种方法可能是我创建一个结构，然后只返回结构变量。

除了上述解决方法之外，是否有任何简单而强大的方法来做到这一点？我必须从一个方法返回大约 25 个彼此独立的不同计算值，而且我的代码中已经有很多结构。

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T02:38:37.997

您不能轻易返回多个变量，例如带有`return (a,b,c)`. 但是，您可以传递设置为其他“返回值”的指针或使用结构。

## 空间不足

如果您希望函数实际返回单独的值而不修改其参数，一种简单的方法是传递额外的指针（您也可以使用结构）。例如，此函数将计算一对数字的和和差：

```
int add_sub(int a, int b, int* ret2) {
   if (ret2) *ret2 = a - b;
   return a + b;
} 
```

`if (ret1)`允许您安全地作为指针参数传递，`NULL`以便您可以忽略该返回值。你像这样使用它：

```
int add, sub;
add = add_sub(10, 3, &sub);
// add == 13, sub == 7

int just_add;
just_add = add_sub(15, 5, NULL);
// just_add == 20 
```

（注意，如果你两次传递相同的参数，这种技术可能会导致令人困惑的行为，例如`a = add_sub(a, b, &b)`不给你想要的东西。）

# 到位

如果你想修改函数的参数，你可以将它们作为指针传递。例如，这个函数将增加它的两个参数，然后返回它们的总和：

```
int increment_and_sum(int* a, int* b) {
     (*a)++;
     (*b)++;
     return a + b
} 
```

您使用的是：

```
int a = 10, b = 3, sum;
sum = increment_and_sum(&a, &b);
// a == 11, b == 4, sum == 15 
```

（请注意，您不能在 中使用文字`increment_and_sum`，也就是说，您不能使用`increment_and_sum(3, 4)`or `increment_and_sum(&3, &4)`。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-22T02:28:19.977

如果这些值在逻辑上都是相关的，那么将它们放入一个结构中是有意义的。但是，如果您只更改几个不紧密耦合的值，则可以将它们作为指针传递，如下所示：

```
int swap(int *a, int *b) {
  int tmp;

  if (a == b) { // Pointers are equal, so there's nothing to do!
    return -1;  // Indicate the values haven't changed.
  }

  tmp = *a;
  *a = *b;
  *b = tmp;
  return 0;  // Indicate the swap was successful.
}

void main(...) {
  int first = 12;
  int second = 34;

  if (swap(&first, &second) == -1) {
    printf("Didn't swap: %d, %\n", first, second);
  } else {
    printf("Swapped: %d, %d\n", first, second);
  }
} 
```

这是一种相当标准的技术，将数据放入函数参数中，并让函数返回一个值来指示成功/失败或其他一些条件。\

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-22T02:30:11.847

您不可能必须将指针传递给变量并在您的方法中设置它们。像这样：

```
void get_some_values()
{
    int a=0, b=0, c=0;
    compute(&a, &b, &c);

    // after call to compute a=1, b=2, c=3;
}

void compute(int *a, int *b, int c*)
{
    *a = 1;
    *b = 2;
    *c = 3;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-22T02:36:05.157

正常的方法是使用指针参数。如果您需要返回可变数量的事物，您可以使用指向数据的指针和指向整数“事物数量”的指针。另一种方法是指针对指针，并让您的函数根据需要分配内存。这使得调用者负责释放它。

例子：

```
int make_numbers(int **numbers, int *count)
{
  /* work out how many numbers we want to generate */
  *count = howmany;
  *numbers = malloc(*count * sizeof(int));
  /* fill *numbers array here */
  return 0; /* success */
}

void caller(void)
{
  int *numbers;
  int count;
  if (0 == make_numbers(&numbers, &count)) {
    /* use the numbers */
    free(numbers);
  }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-22T02:31:24.237

*从技术*上讲，一个函数只返回一个值。否则，它就不是一个函数（还记得数学函数吗？这里的原理相同。）。

你可以做的是：

*   如果元素相关，则将它们放在结构中并返回结构。可能是最简单和最清晰的方法。
*   将它们放在一个数组中并返回该数组。就像结构一样简单，但可能不那么清楚。
*   （仅限数值）您可以使用一种自行设计的映射将它们转换为一个整数（a = 100 * a，b = 10 * b，c = c）。

涉及数组的示例：

```
int* coords(int x, int y) {
    int *a = calloc(sizeof(int), 2);
    a[0] = x;
    a[1] = y;
    return a;
} 

int main() {

    int* vals = coords(47, -121);
    printf("vals = {%d, %d}\n", vals[0], vals[1]);
    return 0;
}

vals = {47, -121} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-22T02:31:00.867

不，你不能，但另一个更 c++ish 的替代解决方案是创建一个结构然后返回它。

```
 struct RET_TYPE
    {
        int a;
        int b;
    };

    struct RET_TYPE foo()
    {
         ...

         return RET_TYPE();
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-11-14T18:28:26.667

您也可以使用指针返回数组，这里是演示。 [http://www.tutorialspoint.com/cprogramming/c_return_arrays_from_function.htm](http://www.tutorialspoint.com/cprogramming/c_return_arrays_from_function.htm)

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-04-22T02:30:53.410

如果你不想要结构，你只能通过引用传递。需要好的文档，甚至可能需要声明式编程。

```
void compute(int& a, int& b, int& c) { ... }
void compute(int* a, int* b, int* c) { ... } 
```

# c# - 在 XAML 中找不到 WPF 类

> ID：10264682
> 
> 赞同：2
> 
> 时间：2012-04-22T02:22:15.540
> 
> 标签：c#, wpf, xaml

我正在尝试为要在 XAML 中使用的类创建一个密钥，但 Visual Studio 11 说不存在这样的类。

脚步：

我在我的程序命名空间中创建了一个类：

```
namespace Test {
    public class PointCollectionConverter : System.Windows.Data.IValueConverter.... 
```

我在 MainWindow.xaml 中添加了一个本地命名空间引用

```
xmlns:local="clr-namespace:GeometryTest" 
```

我尝试将类添加为资源：

```
<Window.Resources>
      <local:PointCollectionConverter x:Key="pointCollectionConverter"/>
</Window.Resources> 
```

重新编译后修复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T02:23:44.930

命名空间是`Test`，你使用`GeometryTest`? 这里有点不对劲。

怎么样：

```
xmlns:local="clr-namespace:Test" 
```

# objective-c - 带有 Storyboard 的 UITabBarController 自定义操作

> ID：10264683
> 
> 赞同：0
> 
> 时间：2012-04-22T02:22:18.487
> 
> 标签：objective-c, ios, ios5, uitabbarcontroller, storyboard

当用户按下标签栏控制器中的某个标签栏项目时，我想提示用户使用 UIAlertView 登录。

这个标签栏控制器存在于情节提要中，因此我不确定在哪里可以做到这一点。苹果声称 UITabBarController 不应该被子类化，这进一步增加了我的困惑。此外，我知道 UITabBarController 的委托模式，但我不知道我可以将它连接到哪个视图控制器 注意：我的 UITabBarController 是从 UIViewController 的模态 segue 生成的。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T12:27:53.140

在回答我自己的另一个问题时，我[在这里找到了答案。](https://stackoverflow.com/a/10344863/828859)

我使用了 uitabbarcontrollerdelegate 并将其设置在根控制器中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T02:57:29.297

您可以在显示所选视图控制器时显示警报视图...假设您`LoginViewController`在标签栏中有一个。在该类中创建一个方法

```
- (void)viewDidAppear:(BOOL)animated; 
```

显示警报视图

还要看看 UITabBarDelegate

```
- (void)tabBar:(UITabBar *)tabBar didSelectItem:(UITabBarItem *)item; 
```

# php - 使用 PHP 在存档中查找特定文件

> ID：10264693
> 
> 赞同：0
> 
> 时间：2012-04-22T02:25:14.993
> 
> 标签：php, recursion, zip, archive

我有一个存档（压缩）文件。用户将其存档，因此没有遵循的标准。该文件中有几个文件夹和文件。但我只对一个文件' **FOI.zip** '感兴趣。FOI.zip 是 zip 文件中的存档。

例如：主文件是我拥有并且需要搜索的内容.. Main.zip 中的可能结构

```
1.
/Main.zip
 /A
  /FOI.zip
 /B
 /C

2.
/Main.zip
 /A
  /a.zip
   /FOI.zip
 /B
 /C
3.
/Main.zip
 /XYZ
  /A
   /FOI.zip
  /B
  /C 
```

在 PHP 中，我想递归搜索 FOI.zip 并获取 FOI.zip 的路径。我非常感谢任何帮助。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T02:56:48.317

如果我理解得很好，您需要在存档中找到一个 FOI.zip，对吗？

如果是，你有这个解决方案：

```
<?php 
system('unzip' . $zip file);
system('find . | grep FOI.zip', $relative_path);

// $relative_path is a where FOI.zip is, if it's empty - means no FOI.zip found.
?> 
```

# perl - 开始 Perl

> ID：10264695
> 
> 赞同：5
> 
> 时间：2012-04-22T02:25:21.453
> 
> 标签：perl

这是一个非常简单且非关键的问题。我很久以前就有一些编程背景（从 FORTRAN 开始，那是很久以前的事了），并且正在使用 Simon Cozen 的*Beginning Perl 学习一些 Perl 编码的基础知识。*第 2 章的作业包括编写一个简单的程序来解释整数项 ( `<STDIN>`) 并打印等于该数字的十进制整数。我有 Windows 7。当输入整数时，程序输出警告

```
 Illegal hexadecimal digit '
 ' ignored at [path] line [the line containing the print instruction], <STDIN> line 1 
```

然后它会打印正确的十六进制数。

代码是

```
$number = <STDIN>;
print hex($number), "\n"; 
```

当我将程序更改为输出八进制时，我没有收到警告。

警告说非法数字出现在打印行，即使它引用了 STDIN 行。和回车键有关系吗？如果是这样，为什么同一程序的oct版本没有问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-22T02:28:39.280

问题是`$number`它仍然有行终止符；用于`chomp`删除它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T05:23:25.333

与 hex 函数不同，oct 函数去除非数字。来自文档“在没有警告的情况下忽略前导空格，任何尾随非数字也是如此”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-22T21:16:08.617

你不必使用chomp吗？

```
$number = <STDIN>;
chomp $number; # Line added in by me
print hex($number), "\n"; 
```

或者你可以像这样在变量周围加上括号：

```
chomp ($number); # With parenthesis 
```

# php - jquery 告诉我某些内容已添加到表中，但不是

> ID：10264698
> 
> 赞同：0
> 
> 时间：2012-04-22T02:26:13.657
> 
> 标签：php, jquery, mysql

我有一个表单，当您单击按钮时应该将数据添加到表中，然后弹出一个窗口，告诉您它已添加或出现问题。用户可以将数据放入文本区域并单击速率框会出现并告诉您它已添加但当我查看表格时它尚未添加。浏览完代码后，我看不到任何突然出现的东西。

这是表格

```
 <script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
<form id="add-rateing">
 <input type="text" name="MOVIE_ID">
  <input type="text" name="USER_ID">
<input type="submit" value="rate">
</form>
<script type="text/javascript">
$("#add-rateing").submit(function(){
event.preventDefault()

    addrateing();

   });

function addrateing()
{
var movie_id_s    = $("#add-rateing [name='MOVIE_ID']").val();
var user_id_s   = $("#add-rateing [name='USER_ID']").val();
var errors  = '';

$.ajax({
    type    : "GET",
    url     : "movie_watched.php",
    data    : { movie  : movie_id_s,
                user : user_id_s, },
    cache   : false, timeout: 10000,

    success  : function() {
        alert("added");
    },
    error    : function() {
        alert("there is a problom");
    },
    complete : function() {
    }

});
};
</script>
</body>
</html> 
```

这是movie_watched.php

```
 <?php
include"scripts/connect.php" ;
mysql_connect('localhost',$username,$password);
@mysql_select_db($database) or die( "Unable to select database");

$movie = mysql_real_escape_string($_POST['MOVIE_ID']);
$user = mysql_real_escape_string($_POST['USER_ID']);
$error = '';

$query=mysql_query"INSERT INTO rateing (movie_id, user_id) VALUES ('".$movie."', '".$user."')";

if (!mysql_query($query, $conn))
{
$error = mysql_error();
$return['error'] = $error;
echo json_encode($return);
mysql_close($conn);
}
else
{
$success = "Thank you for playing";
$return['mysql'] = $success;
echo json_encode($return);
mysql_close($conn);
}

?> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T02:37:42.863

```
$query=mysql_query"INSERT INTO rateing (movie_id, user_id) VALUES ('".$movie."', '".$user."')"; 
```

应该：

```
$query=mysql_query("INSERT INTO rateing (movie_id, user_id) VALUES ('".$movie."', '".$user."')"); 
```

看起来好像你忘记了左括号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T02:34:12.510

我认为问题在于您在通话中存在误解 `error`。仅表示您的 ajax 调用成功完成。您现在需要做的是检查您是否有错误。`success``$.ajax``success`

```
$.ajax({
    type    : "GET",
    url     : "movie_watched.php",
    data    : { movie  : movie_id_s,
                user : user_id_s, },
    cache   : false, timeout: 10000,

    dataType : 'json',
    success  : function(json) {
        if (json.error){
            // your php call returned successfully, but set an error code
            alert('failed : ' + json.error);
        } else {
            alert("added");
        }
    },
    error    : function() {
        alert("there is a problom");
    },
    complete : function() {
    }
}); 
```

# c# - C# 中所有数据类型的下拉列表

> ID：10264699
> 
> 赞同：0
> 
> 时间：2012-04-22T02:26:28.253
> 
> 标签：c#, drop-down-menu

我如何做下拉列表以包含 C# 中的所有数据类型

System.Int32,System.string

所以我可以从这个下拉列表中选择变量类型

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T02:31:55.780

如果你只是在寻找原始类型的列表，你可以在这里找到一个：

[http://msdn.microsoft.com/en-us/library/hfa3fa08%28v=vs.110%29.aspx](http://msdn.microsoft.com/en-us/library/hfa3fa08%28v=vs.110%29.aspx)

或者，如果你想要一个返回原始类型列表的方法，试试这个：

```
public List<Type> GetTypes(){
        return typeof(int).Assembly.GetTypes().Where(t => t.IsPrimitive).ToList();
    } 
```

由于它使用 Linq，您将需要：

`using System.Linq;`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T06:57:02.727

最后，

```
Enum.GetNames(typeof(System.TypeCode)) 
```

这就是我所说的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T02:37:06.530

您可以使用[此处](https://stackoverflow.com/questions/1615723/declaring-a-list-of-types)`List<Type>`概述的 a 。将此列表用作您的.`ComboBox`

如果您需要自动获取所有类型，请参阅[此](https://stackoverflow.com/questions/1315665/c-list-all-classes-in-assembly)答案

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T02:44:40.460

如果您想遍历程序集并获取所有类型的名称。

```
private List<string> GetTypes()
{
    List<string> typeNames = new List<string>();

    /// or AppDomain.CurrentDomain.GetAssemblies() or loop through the folder with assemblies
    Assembly assembly = System.Reflection.Assembly.GetExecutingAssembly();
    foreach (AssemblyName an in assembly.GetReferencedAssemblies() )
    {
        foreach (Type type in an.GetTypes())
        {
            typeNames.add(type.Name);
        }  
    }
    return typeNames;
} 
```

如果您只想列出基本类型，请转到 C# 规范并编辑组合框。

# android - 使用 JNI 向函数发送 android.content.Context 参数

> ID：10264701
> 
> 赞同：15
> 
> 时间：2012-04-12T12:32:28.490
> 
> 标签：android, cocos2d-x, java-native-interface

我正在尝试创建一种方法来检查需要 Context 参数的 Internet 连接。JNIHelper 允许我调用带参数的静态函数，但我不知道如何“检索” Cocos2d-x Activity 类以将其用作参数。

```
public static boolean isNetworkAvailable(Context context) {
    boolean haveConnectedWifi = false;
    boolean haveConnectedMobile = false;
    ConnectivityManager cm =
        (ConnectivityManager) context.getSystemService(
    Context.CONNECTIVITY_SERVICE);
    NetworkInfo[] netInfo = cm.getAllNetworkInfo();
    for (NetworkInfo ni : netInfo) {
        if (ni.getTypeName().equalsIgnoreCase("WIFI"))
            if (ni.isConnected())
                haveConnectedWifi = true;
        if (ni.getTypeName().equalsIgnoreCase("MOBILE"))
            if (ni.isConnected())
                haveConnectedMobile = true;
    }
    return haveConnectedWifi || haveConnectedMobile;
} 
```

而C++代码是

```
JniMethodInfo methodInfo;
if ( !JniHelper::getStaticMethodInfo( methodInfo,
    "my/app/TestApp", "isNetworkAvailable", "(Landroid/content/Context;)Z")) {
        //error
        return;
}
CCLog( "Method found and loaded!");
methodInfo.env->CallStaticBooleanMethod( methodInfo.classID,
methodInfo.methodID);
methodInfo.env->DeleteLocalRef( methodInfo.classID); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T06:33:41.147

Cocos2dxActivity.java: Add this line to Cocos2dxActivity: `private static Activity me = null;` Remove this line from onCreate:

```
Cocos2dxActivity.context = getApplicationContext(); 
```

In its place put: `me = this;`

use :

```
(ConnectivityManager) me.getSystemService(
    Context.CONNECTIVITY_SERVICE); 
```

Now you don't need to pass the context from your Jni... I know this is not the solution but for your case you don't need to worry about context from Jni.. You can simply do your work.

Hope this helps.. I used this way to send mail from android in my game. :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T11:18:09.923

您可以使用以下方法将 Context 对象传递给 JNI：

```
extern "C" {
JNIEXPORT jboolean JNICALL
Java_yournamespace_yourclassname_methodname( JNIEnv* env, jobject thiz, jobject p_context);
} 
```

在您的 java 类上使用以下声明：

```
public native static boolean methodname(Context p_context); 
```

现在您可以从您的 java 代码中调用本机函数并传递一个上下文参数。

至于获取您的应用程序类并使用它，我将使用以下代码（在 C++ 部分中）：

```
jclass yourAppClass = env->FindClass("my/app/TestApp");
jmethodID someMethodId = env->GetStaticMethodID(yourAppClass , "methodName", "(Landroid/content/Context;)Z");
jboolean retval = env->CallStaticObjectMethod(yourAppClass , someMethodId , p_context); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T13:24:29.157

我看到的第一个错误是您试图错误地获取该方法。

`"(android/content/Context;)V"`意味着您正在要求一种方法，该方法`Context`作为参数接收并返回`void`，这不是您的情况。

你的电话应该是这样的：

```
jclass aClass = env->FindClass("my/app/TestApp");
env->GetMethodID(aClass, "isNetworkAvailable", "(android/content/Context;)Z"); 
```

我不完全确定如何在不破坏事物或确保它会起作用的情况下传递 a `Context`to 。`JNI`但是您可以调用`getApplication()`它并将其用作`Context`.

# php - 使用 jquery 进行图像裁剪

> ID：10264705
> 
> 赞同：0
> 
> 时间：2012-04-22T02:27:40.610
> 
> 标签：php, jquery, ajax, image, crop

我希望用户上传图片，然后将其裁剪为设定的尺寸。我想要发生的基本上是一个设置为特定裁剪大小的 div 和该框内的图像。然后，用户将能够四处滑动图像，该 div 中可见的任何内容都是图像将被裁剪的内容。

我遇到的所有 jquery 插件都只是让用户在整个图像周围移动一个选择框，而不是将图像移动到选择框后面。这种事情是否存在，我只是错过了那个插件吗？

基本上，它就像 Facebook 中的缩略图编辑器，您可以在其中将图像拖到缩略图大小的框中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-08T00:41:20.787

我会推荐“断头台”：http: [//github.com/matiasgagliano/guillotine](http://github.com/matiasgagliano/guillotine)

这是一个 jQuery 插件，可以满足您的要求，它还可以进行旋转和缩放。

它支持触摸设备并且反应灵敏。

查看演示： http: [//matiasgagliano.github.io/guillotine](http://matiasgagliano.github.io/guillotine)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T02:45:54.440

你真的不需要插件。这可以通过 vanilla jQuery 和 CSS 通过设置 background-position 值来完成。

```
<div id="CroppedImageDiv"></div>
<script type="text/javascript">
    function cropImage(imgUrl, cropWidth, cropHeight, cropStartX, cropStartY) {
        var bgPos = cropStartX + "px " + cropStartY + "px";
        $('#CroppedImageDiv').width(cropWidth).height(cropheight).css('background-position', bgPos);
        $('#CroppedImageDiv').css('background-url', imgUrl);
    }
</script> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-22T03:40:40.947

您可以使用 JCrop 插件。

[Jcrop 插件](http://deepliquid.com/content/Jcrop_Download.html)

# android - 优化用于发送网络数据的 Android 线程

> ID：10264706
> 
> 赞同：0
> 
> 时间：2012-04-22T02:27:56.723
> 
> 标签：android, multithreading, networking, optimization

我正在使用一个使用两个线程来读取数据并将数据发送到服务器的应用程序。每个线程运行一个while循环；一个 que 包含一组命令，这些命令被发送到服务器。这样我就可以将大量的命令排成队列并一一发送到服务器。

命令发送者是这样的

```
 class writeThread extends AsyncTask<Object, Object, Object>
 {
    byte[] buffer;
    LittleEndianDataOutputStream outputStream;
    @Override
    protected void onPreExecute() 
    {

    }
    @Override
    protected Object doInBackground(Object... params) 
    {
        try
        {
            buffer = new byte[4096];
            outputStream = new LittleEndianDataOutputStream(dataHolder.connection.getOutputStream());

            try
            {
                dataHolder.flags latestFlag;
                while (true)
                {
                    try 
                    {
                        latestFlag = dataHolder.sendFlags.remove();
                        ByteBuffer sendBytes = ByteBuffer.allocate(128);
                        sendBytes.order(ByteOrder.LITTLE_ENDIAN);
                        switch (latestFlag) 
                        {
                            case sendDataRequest:
                                sendBytes.putInt(20);
                                outputStream.write(sendBytes.array());
                                break;
                            case getSelectedData:
                                sendBytes.putInt(21);
                                sendBytes.put(dataHolder.latestSelected.getBytes());
                                outputStream.write(sendBytes.array());
                                break;
                            case disconnect:
                                sendBytes.putInt(254);
                                sendBytes.put(dataHolder.latestSelected.getBytes());
                                outputStream.write(sendBytes.array());
                                break;                                    

                        }

                    }
                    catch (NoSuchElementException ex){}
                }
            }
            catch (IOException ex) {}

        }
        catch (Exception ex){};
        return null;

    }

} 
```

读取循环看起来像这样

```
 while (inputStream.read() > -1) 
```

结果，该应用程序最终占用了手机 50% 的处理能力。关于如何优化套接字侦听和数据发送有什么建议吗？

注意：是的，我知道我正在对队列使用 try catch 而不是 if 语句来检查队列是否为空。我确信抛出错误无助于优化，但我认为它不会将处理器推到 50%。如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T03:02:45.723

你的实现的问题是你基本上是在忙着等待——如果没有要发送的东西，它会立即转到异常处理程序并再次尝试——从而占用了该核心上的所有 cpu。

相反，您想要的是一种等待事件可用的方法。我建议您创建一个[HandlerThread](http://developer.android.com/reference/android/os/HandlerThread.html)，并使用与该线程关联的 Handler 来处理对数据流的写入。

```
HandlerThread handlerThread = new HandlerThread("blah");
handlerThread.start();
Handler handler = new Handler(handlerThread.getLooper()) {
    public boolean HandleMessage(Message msg) {
        switch (msg.what) {
            case sendDataRequest:
               ...
            case getSelectedData:
               ...
            case disconnect:
               ...
        }
    }
} 
```

[然后您将创建具有适当 id 和数据的消息，并使用handler.sendMessage()](http://developer.android.com/reference/android/os/Handler.html#sendMessage%28android.os.Message%29)将它们发送到处理程序

或者（也许更简单），如果您将 dataHolder.sendFlags 集合设为 ArrayBlockingQueue，而不是当前的任何内容（我猜是 ArrayList 或类似的？），那么当您使用[ArrayBlockingQueue.take删除下一个元素时()](http://developer.android.com/reference/java/util/concurrent/ArrayBlockingQueue.html#take%28%29)，它会一直等到有东西可用（*不*执行占用所有可用 cpu 时间的繁忙等待）

# php - 如何防止非法提交请求？

> ID：10264724
> 
> 赞同：0
> 
> 时间：2012-04-22T02:32:06.043
> 
> 标签：php, forms, validation, isset

我是 PHP 新手，所以当我学习时，我发现您可以直接转到 domain.com/process.php 之类的页面，并且该页面仍然可以运行。

如何防止用户直接访问该页面并确保他们在提交表单后访问了 process.php？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T02:34:36.750

也许你正在寻找这个？也许有另一种或更好的方法可以做到这一点，但我不确定。

```
 if(isset($_POST['submit']))
 {
     ///process form
 } 
```

在大多数情况下，这应该可以工作，尽管在某些情况下可能不会，在这种情况下，您可以添加一个隐藏字段：

```
<input type='hidden' name='submit' /> 
```

应始终提交隐藏字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T02:41:26.590

简单地说，使用这个代码：

```
<?php
if(!isset($_POST['submit']))
{
echo 'Try accessing this page by pressing submit button'. '<br />';
echo "<a href='form.html'>Goto Form Page</a>";
exit();
}
?>

// here 'submit' is the name attribute within your input tag for submit button
/*
It simply means if submit button is not pressed, echo the following message and 
exit don't run anything else. You can also use die('Your message here') 
instead of exit();
*/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T02:40:25.160

使用 session 防止用户直接访问`process.php`. 就像在`index.php`使用`session_start(); $_SESSION['access']="true";`和`process.php`页面中一样，

```
session_start(); 
<?php
if(isset($_SESSION['access'])){
?>
<form >.....your process form here....
<?php
}else{
echo "Direct access deny";
die;
} 
```

即使这可以自动化，首先进入索引页面然后自动处理页面，您可以使用验证码来避免它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T03:42:48.623

以下是 2 个示例，说明如何使用设置会话和检查请求是否为 POST 的组合来阻止 process.php 运行（其他人提到只是`submit`设置了检查，但机器人只需要将该值添加到其参数，但是通过使用随机密钥，机器人必须访问表单页面并至少获取一次密钥，另外为了一些额外的安全性，您可以取消设置会话变量，以便 process.php 在每个表单视图中只运行一次，这将减慢（但不停止）蛮力或垃圾邮件发送者）：

**表单页面**

```
<?php 
session_start();
$_SESSION['process_key']=md5(microtime(true));
?>
<p>Form</p>
<form method="POST" action="process.php">
  <input type="hidden" name="key" value="<?=$_SESSION['process_key'];?>">
  <p><input type="submit" value="Submit" name="submit"></p>
</form> 
```

**进程.php**

```
<?php
session_start();

if($_SERVER['REQUEST_METHOD'] =='POST' && isset($_SESSION['process_key']) && $_POST['key'] == $_SESSION['process_key']){
    //process form
   ...
   ...
 unset($_SESSION['process_key']);
}else{
    header('Location: ./index.php');
    die;
}
?> 
```

或者另一种方法是将表单发布回脚本并包含 process.php。

```
<?php 
//Form Page
session_start();
define('RUN',true);
if($_SERVER['REQUEST_METHOD'] =='POST' && isset($_SESSION['process_key']) && $_POST['key'] == $_SESSION['process_key']){
    //process form
    include('process.php');
    die;
}else{
$_SESSION['process_key']=md5(microtime(true));  
//echo form
?>
<p>Form</p>
<form method="POST" action="">
  <input type="hidden" name="key" value="<?=$_SESSION['process_key'];?>">
  <p><input type="submit" value="Submit" name="submit"></p>
</form>
<?php
} ?> 
```

然后在 process.php 的顶部，如果它不包含在另一个文件中，则它不能运行：

`<?php if (!defined("RUN")){header ("Location: ./index.php");} ?>`

# asp.net - 对我自己的表使用表单身份验证

> ID：10264726
> 
> 赞同：3
> 
> 时间：2012-04-22T02:32:45.377
> 
> 标签：asp.net, .net-4.0, forms-authentication

我有一个小数据库，没什么特别的，只有 5 张桌子。我想使用表单身份验证，但它会创建自己的数据库来完成它的工作。我不需要任何花哨的东西，当然也不需要额外的基础设施，但我想要安全表单身份验证提供的。我有一个人员表，其中包含登录名和密码字段。我怎样才能让表单使用这些字段并返回我的用户 ID？这甚至可以用表格吗？如果没有，我怎样才能使表单在我的数据库上创建它的基础设施，以便我可以将我的表与需要工作的表单合并？

我知道这可能很简单，但经过数小时的研究，我在网上没有找到任何东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T05:39:47.350

实际上，我不确定为什么这里的答案暗示表单身份验证**必须**以某种方式与 ASP.Net Membership 或它的 ASP.Net 基础结构（提供程序等）一起使用。

您当然可以**在没有**任何表单身份验证的情况下使用它们并使用现有的用户表（与 ASP.Net Membership 或任何提供程序无关）。

这取自[MSDN](http://msdn.microsoft.com/en-us/library/xdt4thhy.aspx)：

```
<script runat="server">
  void Logon_Click(object sender, EventArgs e)
  {
    if ((UserEmail.Text == "jchen@contoso.com") && 
        (UserPass.Text == "37Yj*99Ps"))
      {
          FormsAuthentication.RedirectFromLoginPage 
             (UserEmail.Text, Persist.Checked);
      }
    else
      {
          Msg.Text = "Invalid credentials. Please try again.";
      }
  }
</script> 
```

虽然以上是（过度）简化的，但您可以看到在哪里可以用 db 查找查询替换代码......

更新：修改链接（更正它指向 MSDN）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T02:59:19.407

如果您想使用自己的表，那么您将不得不[实现自己的 MembershipProvider](http://wiki.asp.net/page.aspx/780/creating-a-custom-membership-provider/)。这使您可以使用自己的表和存储过程，但仍然可以连接到表单身份验证结构。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-22T02:36:54.447

您正在寻找的工具称为 aspnet_regsql：http: [//msdn.microsoft.com/en-us/library/ms229862.aspx](http://msdn.microsoft.com/en-us/library/ms229862.aspx)

这是一个比我更全面的答案：[https ://stackoverflow.com/a/4030700/44372](https://stackoverflow.com/a/4030700/44372)

# while-loop - Mysqli 循环内部查询

> ID：10264727
> 
> 赞同：0
> 
> 时间：2012-04-22T02:32:48.823
> 
> 标签：while-loop, mysqli

```
$dungeon = 0;
if($stmt->prepare("SELECT id,name FROM `dungeons` WHERE id > ?")) {
$stmt->bind_param('i',$dungeon);
$stmt->execute();
$stmt->store_result();
$stmt->bind_result($id,$name);
$stmt2=$stmt;
while($stmt->fetch()) {
    echo "<th>".$name."</th>";
    $query = "SELECT COUNT(id),AVG(dungeon_percent),MAX(dungeon_percent) FROM `users` WHERE dungeon_current = ?"; $what=$id;
    $stmt2->prepare($query);
    $stmt2->bind_param('i',$what);
    $stmt2->execute();
    $stmt2->store_result();
    $stmt2->bind_result($howmany,$avg,$max);
    $stmt2->fetch(); 
    echo "<td align='center'>".$howmany."</td><td align='center'>".round($avg)."%</td><td align='center'>".$max."%</td></tr>";
    }
} 
```

是我所拥有的。然而，当实际上有 4 行时，它只循环一次？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T05:55:48.730

您是否尝试过创建一个新语句，例如：

```
 while($stmt->fetch()) {
      $query = "SELECT COUNT(id),AVG(dungeon_percent),MAX(dungeon_percent) 
                FROM `users`
                WHERE dungeon_current = ?"; 
      $what=$id;
      // prepare your new statement using the connection
      $stmt2 = $your_db->prepare($query);
      $stmt2->bind_param('i',$what);
      $stmt2->execute();
      $stmt2->store_result();
      $stmt2->bind_result($howmany,$avg,$max);
      $stmt2->fetch(); 
      echo "<td align='center'>".$howmany.
           "</td><td align='center'>".round($avg).
          "%</td><td align='center'>".$max."%</td></tr>";
  } 
```

我认为一个好主意是在循环之外准备第二个查询。您还应该能够在循环之外调用`bind_param()`和`bind_result()`然后简单地执行它多次。

这是实现相同目标的更有效方法：

```
 $query = "SELECT COUNT(id), AVG(dungeon_percent), MAX(dungeon_percent) 
           FROM `users`
           WHERE dungeon_current = ?"; 

 $stmt2 = $your_db->prepare($query);
 $stmt2->bind_param('i', $id);
 $stmt2->bind_result($howmany, $avg, $max);

 while($stmt->fetch()) {
      $stmt2->execute();
      $stmt2->store_result();
      $stmt2->fetch(); 
      echo "<td align='center'>".$howmany.
           "</td><td align='center'>".round($avg).
          "%</td><td align='center'>".$max."%</td></tr>";
  } 
```

# wcf - WCF 上传文件远程服务器返回错误：（413）请求实体太大

> ID：10264731
> 
> 赞同：4
> 
> 时间：2012-04-22T02:33:22.740
> 
> 标签：wcf, file-upload

我到处寻找并尝试了很多修复来解决这个问题，但我很茫然，也许它只是我看不到的东西。我有一个带有 WCF 服务的 ASP.NET 网站，用于上传文件，我可以上传小文件（虽然 16kb 在另一端变成了 977）但是当我上传更大的文件（150kb）时，我得到一个错误远程服务器返回错误：（413）请求实体太大。我增加了可以上传的内容的最大大小，但据我所知，这就是我需要做的一切。所以我想你有两个问题：

1.  为什么传输后文件变大了？
2.  为什么我不能发送更大的文件而不会出现此错误？

我的 Web 服务很好，但为了它，这里是代码：

```
[OperationContract]
[WebInvoke(Method = "POST", UriTemplate = "FileUpload/{fileName}")]
void FileUpload(string fileName, Stream fileStream);

    public void FileUpload(string fileName, Stream fileStream)   
     {   
                 FileStream fileToupload = new FileStream("C:\\" + fileName, FileMode.Create);

        byte[] bytearray = new byte[1000000];
        int bytesRead, totalBytesRead = 0;
        do
        {
            bytesRead = fileStream.Read(bytearray, 0, bytearray.Length);
            totalBytesRead += bytesRead;
        } while (bytesRead > 0);

        fileToupload.Write(bytearray, 0, bytearray.Length);
        fileToupload.Close();
        fileToupload.Dispose();
     } 
```

我的 web.config 文件如下

```
<system.serviceModel>
<bindings>
    <basicHttpBinding>
        <binding name="uploadfilebinding" closeTimeout="10:01:00"
          maxBufferSize="204857600" maxBufferPoolSize="204857600"
          maxReceivedMessageSize="104857600" openTimeout="10:01:00"
          receiveTimeout="10:10:00" sendTimeout="10:01:00"
          messageEncoding="Mtom" transferMode="StreamedRequest">
            <readerQuotas maxDepth="204857600" maxStringContentLength="204857600"
                          maxArrayLength="204857600" maxBytesPerRead="204857600"
                          maxNameTableCharCount="204857600" />
        </binding>
    </basicHttpBinding>
</bindings>
<services>
    <service name="sUploadFile.UploadFile"
             behaviorConfiguration="uploadfilebehavior">
        <endpoint
              address=""
              binding="basicHttpBinding"
              bindingConfiguration="uploadfilebinding"
              contract="sUploadFile.UploadFile">
            <identity>
                <dns value="localhost" />
            </identity>
        </endpoint>
        <endpoint
              address="mex"
              binding="mexHttpBinding" contract="IMetadataExchange" />
    </service>
</services>

<behaviors>
        <serviceBehaviors>
            <behavior name="">
                <serviceMetadata httpGetEnabled="true"/>
                <serviceDebug includeExceptionDetailInFaults="false"/>
            </behavior>
        <behavior name="uploadfilebehavior">
            <serviceMetadata httpGetEnabled="true"/>
            <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>

    </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true"/>
</system.serviceModel> 
```

我这样称呼它：

```
string baseServiceAddress = "http://" + Environment.MachineName + ":8000/suploadfile.svc/FileUpload";
ServiceHost host = new ServiceHost(typeof(sUploadFile), new Uri(baseServiceAddress));
host.AddServiceEndpoint(typeof(IsUploadFile), new WebHttpBinding(), "").Behaviors.Add(new WebHttpBehavior());
host.Open();

 byte[] bytearray=null ;
      string name = "";
    //throw new NotImplementedException();
    if (FileUpload1.HasFile)
    {
         name = FileUpload1.FileName;
        Stream stream = FileUpload1.FileContent;
        stream.Seek(0, SeekOrigin.Begin);
        bytearray = new byte[stream.Length];
        int count = 0;
        while (count < stream.Length)
        {
            bytearray[count++] = Convert.ToByte(stream.ReadByte());
        }

    }

    string baseAddress = "http://" + Environment.MachineName + ":8000/suploadfile.svc/FileUpload/";
    HttpWebRequest request = (HttpWebRequest) HttpWebRequest.Create(baseAddress+name);          
    request.Method = "POST";
    request.ContentType = "text/plain";
    try
    {
        Stream serverStream = request.GetRequestStream();
        serverStream.Write(bytearray, 0, bytearray.Length);
        serverStream.Close();
        using (HttpWebResponse response = request.GetResponse() as HttpWebResponse)
        {
            int statusCode = (int)response.StatusCode;
            StreamReader reader = new StreamReader(response.GetResponseStream());

        }
    }
    catch (Exception ess)
    {
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T16:31:11.840

改变

```
byte[] bytearray = new byte[1000000]; 
```

到：

```
byte[] bytearray = new byte[fileSize+1]; 
```

# json - 查找用户最近的推文

> ID：10264732
> 
> 赞同：-2
> 
> 时间：2012-04-22T02:33:46.763
> 
> 标签：json, twitter

我想知道有没有办法做这样的事情来获取用户最近的推文？因此，用户将输入他们的推特名称，这可以获得他们最近的帖子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T02:40:16.890

尝试使用这个（PHP）：

```
$username="user"; // set user name
$format="json"; // set format
$tweet=json_decode(file_get_contents("http://api.twitter.com/1/statuses/user_timeline/$username.$format")); // get tweets and decode them into a variable

echo $tweet[0]->text; // show latest tweet 
```

有关更多信息，请查看[此](http://webhole.net/2010/03/16/get-last-tweet-with-php-or-jquery/)。

jQuery 示例：

```
$.getJSON("http://twitter.com/statuses/user_timeline/username.json?callback=?", function(data) {
     $("#twitter").html(data[0].text);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T02:39:54.820

您正在寻找[Twitter API](https://dev.twitter.com/docs/api/1/get/users/show)。

# python - 使用 numpy 读取 csv 文件的主要内存问题

> ID：10264739
> 
> 赞同：9
> 
> 时间：2012-04-22T02:35:06.523
> 
> 标签：python, r, pandas, numpy, kaggle

我从 Kaggle 获取了 KDD track1 数据集，并决定在我的 16GB 高内存 EC2 实例上将一个约 2.5GB 的 3 列 CSV 文件加载到内存中：

```
data = np.loadtxt('rec_log_train.txt') 
```

python 会话占用了我所有的内存（100%），然后被杀死了。

然后我使用 R（通过 read.table）读取了同一个文件，它使用了不到 5GB 的内存，在我调用垃圾收集器后它崩溃到不到 2GB。

我的问题是为什么这会在 numpy 下失败，以及将文件读入内存的正确方法是什么。是的，我可以使用生成器来避免问题，但这不是目标。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T16:38:34.677

```
import pandas, re, numpy as np

def load_file(filename, num_cols, delimiter='\t'):
    data = None
    try:
        data = np.load(filename + '.npy')
    except:
        splitter = re.compile(delimiter)

        def items(infile):
            for line in infile:
                for item in splitter.split(line):
                    yield item

        with open(filename, 'r') as infile:
            data = np.fromiter(items(infile), float64, -1)
            data = data.reshape((-1, num_cols))
            np.save(filename, data)

    return pandas.DataFrame(data) 
```

这会读入 2.5GB 文件，并序列化输出矩阵。输入文件是“懒惰地”读取的，因此不会构建中间数据结构并且使用最少的内存。初始加载需要很长时间，但每次后续加载（序列化文件）都很快。如果您有提示，请告诉我！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T21:53:55.380

现在试试 recfile：[http](http://code.google.com/p/recfile/) ://code.google.com/p/recfile/ 。我知道有一些努力可以为 NumPy 制作一个快速的 C/C++ 文件阅读器；它在我的 pandas 短待办事项列表中，因为它会导致此类问题。Warren Weckesser 在这里也有一个项目：[https](https://github.com/WarrenWeckesser/textreader) ://github.com/WarrenWeckesser/textreader 。不知道哪个更好，两个都试试？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T03:06:47.873

你可以试试`numpy.fromfile`

[http://docs.scipy.org/doc/numpy/reference/generated/numpy.fromfile.html](http://docs.scipy.org/doc/numpy/reference/generated/numpy.fromfile.html)

# ruby-on-rails - 我对用于测试 Rails 应用程序的工具数量感到不知所措，我应该从哪里开始？

> ID：10264744
> 
> 赞同：3
> 
> 时间：2012-04-22T02:36:22.850
> 
> 标签：ruby-on-rails, ruby-on-rails-3, unit-testing, testing, rubygems

我从不为测试而烦恼，因为我的应用程序相对简单，我想专注于学习 ruby​​ 和 rails，以及开发功能。我想要一些使用起来相对简单的工具/宝石。理想情况下，我想做：

*   模型测试
*   辅助测试
*   集成测试（我不会直接测试我的视图或控制器）
*   查看测试覆盖率
*   自动化（用一个命令运行我所有的测试）

我正在考虑前两个的 MiniTest（或 RSpec？），添加 Capybara 进行集成测试，我不知道后两个。

我在用着：

*   OSX 10.7.3
*   红宝石 1.9.3-p194
*   导轨 3.2.3

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T02:55:18.127

为了为每项任务找到合适的工具，我推荐[ruby​​-toolbox.com](https://www.ruby-toolbox.com)并按类别搜索，在您的情况下是“代码度量”和“持续测试”。这样，可能的解决方案就会按 ruby​​ 社区中的受欢迎程度和使用率排序。

对于那些特定的任务，我分别使用 SimpleCov 和 Guard。

关于你提到的测试，无意冒犯，但你知道什么是 BDD（行为驱动开发）吗？和 TDD（测试驱动开发）的区别？

如果是，我很抱歉，但我提到它以防万一。如果不只是快速进行谷歌搜索，然后决定您想要哪种测试范式，以及出于何种目的。

我个人尝试在我的项目中应用 BDD 概念，我使用 Cucumber 作为功能，同时使用 RSpec 作为规范。

顺便说一句，“The RSpec Book”是一本关于它的优秀书籍，它涵盖了 RSpec、Cucumber、Webrat（非常类似于 capybara，现在最流行）和 Selenium。

希望这有帮助，如果不是太多的信息.​​.....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T02:47:47.557

从模型测试开始。它最容易理解和编码。
它将帮助您尝试将业务逻辑集中在模型中以及编写通过 API 运行的 RESTful 代码。

然后转到控制器测试，我们更接近于测试最终用户真正在做什么的实际流程。

Next 助手测试通常相当容易。

最后，您可能想要进行实际的视图测试，但我现在暂缓。

绝对立即使用[rspec](https://github.com/rspec/rspec)并节省以后切换的时间。

您可以使用一个命令运行所有测试，也可以单独运行它们。

在构建套件时，您应该考虑将[Guard](https://github.com/guard/guard)用于持续集成测试环境。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T10:26:34.560

这是我对[另一个问题的回答的副本](https://stackoverflow.com/questions/3673041/what-testing-frameworks-are-used-for-rails/6252982#6252982)

有许多工具可以从许多不同方面测试 rails 和其他 web 应用程序。但是，如果您是测试新手，**我强烈建议您先学习 Rails 自己的测试框架**，然后再开始使用其他工具。

学习并随后掌握一个测试框架可以使将来更容易理解其他框架的优缺点，并使它们协同工作。

您可以从测试以下内容开始：

*   单元测试你的模型
*   控制器的功能测试
*   了解 Fixtures 以及如何加载测试数据

我见过许多失败的测试工作，但我从未见过他们因为选择了错误的工具/框架而失败。他们失败是因为他们不知道如何掌握他们使用的工具，并且对测试的基础知识了解不够。

在此处阅读有关 Rails 测试的更多信息。
[http://guides.rubyonrails.org/testing.html](http://guides.rubyonrails.org/testing.html)

# html - HTML 按钮：单击并使用 Get 方法重定向到服务器上的另一个链接

> ID：10264745
> 
> 赞同：0
> 
> 时间：2012-04-22T02:36:32.587
> 
> 标签：html, button

我有这个简单的代码，例如：

```
<form method="GET" action="test1.do">
  <input type="SUBMIT" value="test 1">
</form>
<form method="GET" action="test2.do">
  <input type="SUBMIT" value="test 2">
</form> 
```

`tes1.do`并且`test2.do`是服务器上的任何东西，就我而言，这些是 servlet。

我想通过创建一个按钮来更简单。但是，我不知道当用户点击时，它会使用“GET”方法重定向，因为按钮没有 GET 属性。

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T05:36:38.850

你应该尝试在那里添加名称。最重要的是，如果用户单击测试 2，它应该带您进入测试 2。

# java - 如何创建“开盘”和“收盘”指标？

> ID：10264752
> 
> 赞同：0
> 
> 时间：2012-04-22T02:37:16.983
> 
> 标签：java, android

我有一个地图视图。在这个 MapView 中，我有 MapOverlays。MapOverlays 在地图上绘制了两个图标。有一种绿色和一种红色。我想把这些变成 OPEN 和 CLOSED 指标。

我想读取我设置的“时间”（例如 myTime），并使用 SystemTime 检查它是打开还是关闭。

伪代码：IF myTime == SystemTime { 店铺指标变成绿色标记 } ELSE { 店铺指标变成红色市场 }。

我有两个要添加到 MapView 的商店的时间。

我怎么写这个？

这是一张图片以供澄清：

![在此处输入图像描述](../Images/f5f554a1c3d14d9837b57d76d2428369.png)

```
public void mapOverlayItems() {

    // Creates a marker based on lat/long values on MapView

            // DIVIDER markerGREEN
    MapView mapView = (MapView) findViewById(R.id.mapView);
    mapOverlays = mapView.getOverlays();
    Drawable drawableBar = getResources().getDrawable(
            R.drawable.markergreen);
    mapOverlayBar = new MapOverlayActivity(drawableBar, mapView);

    GeoPoint sirius = new GeoPoint((int) (52.63274 * 1E6),
            (int) (-1.13145 * 1E6));
    OverlayItem siriusbaricon = new OverlayItem(sirius, "Sirius", "Bar");
    mapOverlayBar.addOverlay(siriusbaricon);

    mapOverlays.add(mapOverlayBar);
    mapView.invalidate();

  //DIVIDER markerRed

Drawable drawableBank = getResources()
            .getDrawable(R.drawable.markerred);
    mapOverlayBanks = new MapOverlayActivity(drawableBank, mapView);
    GeoPoint natwest = new GeoPoint((int) (52.63440 * 1E6),
            (int) (-1.1314 * 1E6));
    OverlayItem natwesticon = new OverlayItem(natwest, "Natwest", "Bank");
    mapOverlayBanks.addOverlay(natwesticon);
    mapOverlays.add(mapOverlayBanks);
    mapView.invalidate();
} 
```

感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T02:48:11.987

您可以使用以下代码为地图上的任何点设置标记。

```
int lat = some number;
int lng = some number;

GeoPoint point = new GeoPoint(lat, lng);

MapView map = (MapView) findViewById(R.id.mapView);
List<Overlay> overlays = map.getOverlays();
overlays.add(new DrawableMapOverlay(this, point, R.drawable.mapmarker)); 
```

最后一行实际上将标记放在地图上。我会将最后一行包装在“if/else”语句中，以便您可以选择自定义可绘制对象。希望这可以帮助。

# python - 如何为交互式 python 设置默认 PS1 值？

> ID：10264760
> 
> 赞同：2
> 
> 时间：2012-04-22T02:39:59.620
> 
> 标签：python, interactive, prompt

我正在尝试为我的 python 解释器着色，以帮助在视觉上分离文本噪音。因此，如果我启动交互式 python，它会给我纯文本。我可以做这个：

```
import sys

sys.ps1 = "\033[0;34m>>> \033[0m"
sys.ps2 = "\033[1;34m... \033[0m" 
```

但是，如果我退出解释器并返回值恢复为默认值，这一点也不奇怪。我的问题是如何保存这些值并将它们用作默认值？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-22T02:46:41.113

`PYTHONSTARTUP`如果在 Python 启动时（以交互模式）定义了环境变量，Python 将读取并执行该文件。查看[本文档](http://docs.python.org/using/cmdline.html)`ENVIRONMENT VARIABLES`的部分以获取更多信息。

因此，如果您将`sys.ps1`命令放入`~/.pythonrc.py`并指向`PYTHONSTARTUP`该文件...

```
export PYTHONSTARTUP=~/.pythonrc.py 
```

...你会一切准备就绪。

您可能还想查看[ipython](http://ipython.org/)，它是一个 Python 交互式解释器，具有各种奇特的功能和定制的可能性。

# php - PHP 检查密码脚本不适用于一个以上的用户

> ID：10264763
> 
> 赞同：1
> 
> 时间：2012-04-22T02:40:26.677
> 
> 标签：php, mysql

我正在尝试创建一个简单的登录凭据检查器（带有会话变量）。

这是我到目前为止所拥有的：

```
<?php
include("dbconnect.php");
$u_name = mysql_real_escape_string($_POST['uname']);
$p_word = mysql_real_escape_string($_POST['pword']);
# *** querying all records ***
$query = mysql_query("SELECT valid_username, valid_password FROM notes_users");
while($rst = mysql_fetch_array($query)) {

//echo $rst[valid_username] . ", ";
//echo $u_name . " || ";
//echo ($rst[valid_username] == $u_name) . " || ";
//echo $rst[valid_password] . ", ";
//echo $p_word . " || ";
//echo ($rst[valid_password] == $p_word) . " || ";
//echo (($rst[valid_username] == $u_name) AND ($rst[valid_password] == $p_word));
//echo "<br/>";

if (($rst[valid_username] == $u_name) AND ($rst[valid_password] == $p_word)) {
    session_start();
    $_SESSION['login'] = "1";
    header('Location: main.php') ;
} else {
    session_start();
    $_SESSION['login'] = '';
    header('Location: badlogin.php') ;
}

}

?> 
```

这是问题所在：如果 MySQL 表的列表中有多个用户，则检查会中断。只有**表中最后输入的用户**才有权访问。最后输入的用户上方的任何人都会被撞到不正确的登录屏幕 - 即使凭据是正确的。为什么会这样？任何人都可以建议一个代码修复或更好的代码来实现这个登录检查吗？

编辑：评论代码测试以查看提供的凭据是否与记录的凭据匹配。脚本的那部分工作正常。

问题解决了！谢谢你们。对于将来看到此内容的任何人，请务必加密您的密码，我的密码是纯文本，因为这是一个本地测试应用程序，甚至不会看到上传到网络。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T02:44:56.697

无需遍历所有用户记录。想象一下，如果您有一个包含 1000000 个用户的数据库，您只需要尝试获取与提供的用户名和密码对应的记录。将您的查询更新为如下内容：

```
$query = mysql_query("SELECT * FROM notes_users 
                      WHERE 
                      valid_password = '$p_word' && 
                      valid_username = '$u_name'"); 
```

然后你会做类似的事情：

```
if (($row = mysql_fetch_array($query)) {
   // valid user
} else {
   // invalid password or username
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T02:45:40.147

首先，不要以纯文本形式存储密码！请改用 md5/sha1 哈希。

其次，获取数据库中所有用户的列表并不是一个好主意。SQL 查询中的 WHERE 子句 - 这也将解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T02:47:27.230

您应该检查特定用户的登录详细信息。

```
$query = mysql_query("SELECT valid_username, valid_password FROM notes_users WHERE valid_password = '$p_word' && valid_username = '$u_name' "); 
```

这将返回唯一要检查的一行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T02:47:31.193

为什么不直接查询用户的凭据？例如：

```
$statement = mysql_query("SELECT valid_username FROM notes_users WHERE \
valid_username = '{$u_name}' and valid_password = '{$p_word}' LIMIT 1;");

if ( mysql_num_rows($statement) > 0 ) { /* log user in */ }
else { /* bad log in */ 
```

哦，为什么不使用 === 运算符进行字符串比较？看了一下，比较实用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-22T02:47:51.323

这是糟糕的代码，

```
$query = mysql_query("SELECT valid_username, valid_password FROM notes_users"); 
```

使用以下代码：

```
$postedUsername=mysql_real_escape_string($_POST['uname']));
$postedPass=mysql_real_escape_string($_POST['pass']));
$query = mysql_query("SELECT valid_username, valid_password FROM notes_users where username='$postedUsername' and password='$postedPass'"); 
```

# ms-access - MS Access VBA ADODB Recordset.Open table OK 但 SQL 失败

> ID：10264764
> 
> 赞同：2
> 
> 时间：2012-04-22T02:40:37.110
> 
> 标签：ms-access, vba

![在此处输入图像描述](../Images/ef7d31127c38a8ca4486f3b185d6aac2.png)

我有一个 MS Access 2007 表：

列是 DB、Module、CommentID 和 Comment

我有一个 SQL 查询，它在 MS Access 查询设计中返回正确的记录。

我已经在即时窗口中确认，在 Ms Access Query Design 和 VBA 模块“Module1”中的 sql 是相同的。

我调用函数如下：

```
?LookupComment(currentproject.Name,Application.VBE.ActiveCodePane.CodeModule,"1") 
```

随后函数中的 strSQL 在即时窗口中被确认为

```
Select * from tblComments where DB='db1.accdb' AND Module='Module1' AND CommentID='1' 
```

如果我用“tblComments”替换“strSQ”，则函数返回正常。

但是我在使用 strSQL 的 rst.open 时遇到错误

*对象“_Recordset”的方法“打开”失败*

```
Public Function LookupComment(theDB, theModule, theCommentID As String) As String

Dim cn As ADODB.Connection
Dim rst As ADODB.Recordset
Dim strSQL As String

Set cn = CurrentProject.Connection
Set rst = New ADODB.Recordset

strSQL = "Select * from tblComments where DB='" & theDB & "' AND " _
    & "Module='" & theModule & "' AND CommentID='" & theCommentID & "'"
rst.Open strSQL, cn, adOpenDynamic, adLockReadOnly

' rst.Open "tblComments", cn, adOpenDynamic, adLockReadOnly

If rst.EOF = False Or rst.BOF = False Then
    rst.MoveFirst
    LookupComment = rst!Comment
End If

Set rst = Nothing
Set cn = Nothing

End Function 
```

想法？

TIA

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T06:38:28.147

使用此更改测试您的功能：

```
strSQL = "Select * from tblComments where DB='" & theDB & "' AND " _
    & "[Module]='" & theModule & "' AND CommentID='" & theCommentID & "'" 
```

我`Module`用方括号括起来，因为它是 Jet 保留字。请参阅[Access 中的问题名称和保留字](http://allenbrowne.com/AppIssueBadWord.html#M)。

带有那个不带括号的名称的 SELECT 语句会导致 ADO 记录集`.Open`方法失败。正如您所报告的，当相同的 SELECT 语句用于在查询设计器中打开的查询时，它会成功。无论我是否`Module`用括号括起来，Igor 的 DAO 记录集建议也对我有用；我不明白为什么它对你失败了。

当使用保留字作为数据库对象名称时，很难准确预测会咬你的屁股。完全避免使用它们会更安全。如果您无法避免它们，请在查询中将这些名称括在方括号中，以减少混淆数据库引擎的可能性。

您可以下载 Allen Browne 的免费[数据库问题检查器实用程序](http://allenbrowne.com/AppIssueChecker.html)，并使用它来检查您的数据库中的保留字。它还会警告您有关数据库的其他潜在问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T04:38:42.760

改用 DAO 记录集：

```
Public Function LookupComment(theDB, theModule, theCommentID As String) As String

Dim rst As Recordset
Dim strSQL As String

strSQL = "Select * from tblComments where DB='" & theDB & "' AND " _
    & "Module='" & theModule & "' AND CommentID='" & theCommentID & "'"

Set rst = CurrentDb.OpenRecordset(strSQL, dbOpenDynaset)

If rst.EOF = False Or rst.BOF = False Then
    rst.MoveFirst
    LookupComment = rst!Comment
End If

Set rst = Nothing

End Function 
```

在旁注中，您确定需要 CommentID 作为字符串/文本类型吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T02:45:17.433

我认为您在查询末尾缺少分号。

# sql - 使用联接的一个选择语句中的多个计数？

> ID：10264766
> 
> 赞同：-1
> 
> 时间：2012-04-22T02:41:50.473
> 
> 标签：sql, sql-server, sql-server-2008

`Table`这将返回&复合中的行数的计数`Table2`，但我想只返回 的计数`Table2`，最好在 ONE select 语句中返回。

```
 SELECT Table.Name, Count(Table2.Active) FROM Table
 LEFT JOIN Table2 ON Table2.Active = 1 
```

建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T03:14:53.110

为什么要为第一个表中的每一行从第二个表中提取一次计数？这是非常低效的。更好的做法：

```
DECLARE @c INT;
SELECT @c = COUNT(*) FROM dbo.Table2;
SELECT Name, @c FROM dbo.Table; 
```

不，这不符合您对“单一语句”的要求，但我很好奇为什么您认为这是一个良好或有效查询的衡量标准。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T02:46:06.780

在`SELECT`子句中编写查询：

```
SELECT Table.Name, (SELECT Count(Active) FROM Table2) 
FROM Table
 LEFT JOIN Table2 ON Table2.Active = 1 
```

我没有改变你的表“加入”，但这没有任何意义。

# algorithm - 有效地删除一组数字中的空格

> ID：10264767
> 
> 赞同：3
> 
> 时间：2012-04-22T02:41:52.773
> 
> 标签：algorithm, packing

我将使用 Python 语法和对象来表示问题，但实际上它是用于 SQL 数据库中的模型，带有 Python API 和 ORM。

我有一个这样的数字列表：

```
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10] 
```

有时，会删除一些数字并保留空空格：

```
[0, 1, 2, None, None, 5, 6, None, None, None, 10] 
```

我需要做的是在定期执行的维护步骤中有效地打包这组数字，以有序和无序的方式，这样数字之间就没有空空格：

因此，以有序的方式，我需要该列表变为：

```
[0, 1, 2, 5, 6, 10, None, None, None, None, None] 
```

当无序时，每个数字的去向并不重要，只要它们之间没有空格即可。

数字可以在连续的块中移动，将它们向左或向右移动任意数量的成本相同，但是存在设置和拆卸成本，这使得移动更大的块并在尽可能少的更新中实现它变得更加有效.

现在我正在使用最简单的解决方案，查找连续数字块并将它们一次移动一个块到最近的左侧，直到它被打包。因此，在示例中，5、6 在一次更新中向左移动了 2 个块，然后在另一个更新中将 10 向左移动了 5 个块。

```
[0, 1, 2, None, None, 5, 6, None, None, None, 10]

[0, 1, 2, 5, 6, None, None, None, None, None, 10]

[0, 1, 2, 5, 6, 10, None, None, None, None, None] 
```

当订单很重要时，这种简单的方法似乎是最有效的，但实际上我的大部分操作都是无序的，我认为应该有更好的方法。例如，在这种情况下，可以通过在 6 和 10 之间移动 0、1、2 块来将列表打包到单个更新中：

```
[None, None, None, None, None, 5, 6, 0, 1, 2, 10] 
```

实际上会有数千个块，但我事先知道每个块的大小和每个间隙。与它们的大小和间隙之间的组合计算所需的计算相比，移动块也非常昂贵，因此找到最佳解决方案是理想的。

这似乎是一种装箱问题，但我真的不知道如何接近它以找到最佳解决方案。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T04:06:25.227

对于无序的情况，假设有人告诉你最后的连续块应该填充哪些空间。然后一个启发式方法是假设如果您首先将该区域之外的最大块移入该区域，那么一切都会适合并且您不必分解任何块。正如评论中所建议的，您可以使用它运行 A* （或分支和绑定）。然后你的第一个决定是最终的连续块应该在哪里，但这只是 A*/branch and bound 的另一个级别——事实上，在这种启发式下，最有希望的最终连续区域将是当前拥有最多填充数的区域在子区域中，因为您假设您只需要在此之外的子区域中移动。

如果您确实发现这太昂贵了，那么以获得较差答案为代价来加速分支和绑定的一种方法是丢弃可能的答案，对于某些 X，这些答案可能会使迄今为止找到的最佳答案仅提高 X%。

实际上，我认为您可以获得比这更好的下限 - 最大值（目标区域中单独连续间隙的数量，要从源区域移入的单独连续区域的数量）应该稍微好一点，因为一次移动最多可以移动在单个连续的数字区域中并填充目标区域中的单个空白。

获得下限的一种简单方法是忽略对问题的足够约束以使其变得容易。假设未知的正确答案仍然是一个可行的解决方案，这必须给你一个下限，因为弱化问题的最佳解决方案必须至少与未知的正确答案一样好。您可以假装两个更新永远不会相互冲突，从而将其应用于您的更新问题。给定一个指定的目标区域，计算这种启发式方法相当于找到一种将源区域切割成块的最佳方法，每个块都适合目标区域。您可以使用动态程序解决此问题：通过考虑在源区域的最后 k 个单元中复制的所有可能方式，您可以为源区域的前 n+1 个单元计算出最佳答案，然后添加复制源区域的前 n+1-k 个单元的成本，您已经计算过了。不幸的是，我不知道这种启发式方法是否足够强大以至于有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T20:00:56.957

您描述的问题称为[压缩问题](http://dx.doi.org.mutex.gmu.edu/10.1006/jagm.1993.1019)。在经典的压缩问题（有序和无序变体）中，数据移动的成本并不那么高。因此，可以通过使用辅助存储并在一次线性扫描中将非空条目复制到辅助存储中来轻松解决。新的压缩存储可以简单地替换原始存储或复制到原始存储，具体取决于上下文。现在，所有这些都可以在线性时间内完成，并且只使用线性附加存储。因此，从装箱的意义上说，它不被认为是一个难题。对于豆类包装，无论您是否允许线性数量的额外存储，都绝对没有简单的解决方案。所以，很明显我们在这里处理的不是装箱。

当数据移动成本高昂时，现在有一个额外的限制是最小化非连续数据块的移动次数。可以将此问题视为以下两个问题之一的一个实例：

1.  **二进制数组的就地排序**。在这里，您将数组建模为仅包含两种数据——0 和 1。这可以在您的情况下使用谓词 isNull(a) 轻松实现，该谓词对于空数据条目返回 1，对于非空数据条目返回 0。我能想到的最简单的解决方案是使用[选择排序](http://en.wikipedia.org/wiki/Selection_sort) 对二进制数组进行排序。在最坏的情况下，它永远不会超过*O(n)*的数据移动，即使它可以进行*O(n ² )*次比较，但您不介意，因为您只想最小化数据移动的数量. 如果没有要移动的数据，它不会做任何事情！一些使事情复杂化的改进可能是：

    *   交换块而不是单个条目。我的意思是，只有当零块更大时，才能交换两个块（一个零，另一个）。您还可以使用贪婪启发式，即下一次交换始终是最小化这两者的绝对差异的交换，即 abs(len(zeroBlock) - len(oneBlock))。这仅适用于您的问题的无序实例。
    *   另外两个优化是做一个预处理来决定天气是升序还是降序。
    *   此外，您可能希望排除列表的连续末端。
2.  **[垃圾压缩](http://benediktmeurer.de/files/fast-garbage-compaction-with-interior-pointers.pdf)**。本质上，这个想法是将空闲空间视为内存中需要进行垃圾收集的已释放空间。为此，让我向您推荐这个有趣的[SO 讨论线程](https://stackoverflow.com/questions/130227/what-is-a-good-algorithm-for-compacting-records-in-a-blocked-file)和[这个](https://stackoverflow.com/questions/2663292/how-does-heap-compaction-work-quickly)。您可能还会发现这篇[研究论文](http://www.cs.purdue.edu/homes/hosking/690M/p532-cohen.pdf)或[这篇](http://benediktmeurer.de/files/fast-garbage-compaction-with-interior-pointers.pdf)论文很有用。

祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T21:37:31.000

```
#include <stdio.h>
#include <string.h>

#define IS_EMPTY(c) ((c) <= '@')

unsigned moverup(char buff[], unsigned size)
{
unsigned src,dst,cnt;

for (src=dst=cnt=0; src < size; src++ ) {
        if (!IS_EMPTY(buff[src])) { cnt++; continue; }
        if (!cnt) continue;
ugly:
        memmove(buff+dst, buff+src-cnt, cnt );
        dst += cnt;
        cnt = 0;
        }
if (cnt) goto ugly;
return dst;
}

int main(void)
{
unsigned result;
char array[] = "qwe@rty@ui#op";

printf("Before:%s\n", array );

result = moverup (array, strlen (array) );

printf("result:%u\n", result );
// entries beyond result will contain garbage now.
// array[result] = 0;
printf("After:%s\n", array );

return 0;
} 
```

# android - ANDROID：在 SqliteDatabase 中查找单个表的大小

> ID：10264769
> 
> 赞同：5
> 
> 时间：2012-04-22T02:42:05.440
> 
> 标签：android, size, sqlite

我正在尝试按照以下方式做一些事情：

```
SELECT bytes from user_segments where segment_name = 'TABLE_NAME'; 
```

我知道我可以通过

```
mDb = SQLiteDatabase;
long size = new File(mDb.getPath()).length(); 
```

是否可以获得单个表在 Android 的 SQLiteDatabase 中的存储空间？

编辑 -

由于缺乏响应，我想 SQLite 不可能。我目前正在使用一种 hack-ish 方式来计算表中的行数并估计单行占用多少空间（基于给定的表模式）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T15:02:33.907

如果您主要将二进制或字符串数​​据存储在单个列中，则可以使用聚合查询：

```
SELECT SUM(LENGTH(the_column)) FROM the_table 
```

即使每行的大小变化很大（例如，如果您将图片存储在数据库中），这也可以为您提供合理的估计。但是，如果您有许多列，每列中的数据量很少，那么您的方法（估计每行的固定大小）会更好。

在 Android 上，您可以像下面这样实现它：

```
SQLiteDatabase database = ... // your database
// you can cache the statement below if you're using it multiple times
SQLiteStatement byteStatement = database.compileStatement("SELECT SUM(LENGTH(the_column)) FROM the_table");
long bytes = byteStatement.simpleQueryForLong(); 
```

# c# - 使用本机 C# 创建 ECC 私钥/公钥

> ID：10264770
> 
> 赞同：5
> 
> 时间：2012-04-22T02:43:01.027
> 
> 标签：c#, cryptography, elliptic-curve

我已经在 Google 和 Microsoft 的 Crypto API 上寻找了几个小时，了解如何生成公钥和私钥 ECC 密钥对。该类`ECDiffieHellmanCng`（[http://msdn.microsoft.com/en-us/library/system.security.cryptography.ecdiffiehellmancng.aspx#Y3081](http://msdn.microsoft.com/en-us/library/system.security.cryptography.ecdiffiehellmancng.aspx#Y3081)）列出了一个示例，但我不知道如何直接访问私钥。

对于该程序的一些背景知识，它是一个 C# 控制台应用程序，用于管理 TrueCrypt 会话、AES 预共享密钥加密和 ECDH/AES 加密。我需要一个函数来仅创建一个公钥/私钥对以保存到文件中，然后记录如何在包装的 AES 加密文件中使用这些生成的密钥（而不是像示例所示在运行时生成它）。此外，我知道将文件保存到硬盘驱动器时出现的所有漏洞，但我并不担心这个程序，我正在考虑 2 台客户端计算机是安全的。

另请注意，我不想使用 BouncyCastle API。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-03-25T14:30:03.047

我相信这就是你要找的？如果是，请标记为（我的第一个！）答案:-)

其中大部分与 CngKey 相关，可以在许多变体中使用。

```
 static void test1()
    {
        CngKey k;

        if (CngKey.Exists("myECDH", CngProvider.MicrosoftSoftwareKeyStorageProvider, CngKeyOpenOptions.MachineKey))
        {
            k = CngKey.Open("myECDH", CngProvider.MicrosoftSoftwareKeyStorageProvider, CngKeyOpenOptions.MachineKey);
        }
        else
        {
            k = CngKey.Create(CngAlgorithm.ECDiffieHellmanP256, "myECDH", new CngKeyCreationParameters
        {
            ExportPolicy = CngExportPolicies.AllowPlaintextExport,
            KeyCreationOptions = CngKeyCreationOptions.MachineKey,
            KeyUsage = CngKeyUsages.AllUsages,
            Provider = CngProvider.MicrosoftSoftwareKeyStorageProvider,
            UIPolicy = new CngUIPolicy(CngUIProtectionLevels.None)
        });
        }

        byte[] privateBytes = k.Export(CngKeyBlobFormat.EccPrivateBlob);
        byte[] publicBytes = k.Export(CngKeyBlobFormat.EccPublicBlob);

        //This:
        var privateTester1 =
            new ECDiffieHellmanCng(CngKey.Import(privateBytes, CngKeyBlobFormat.EccPrivateBlob,
                CngProvider.MicrosoftSoftwareKeyStorageProvider));

        //Or that:
        var privateTester2 = new ECDiffieHellmanCng(k);
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T02:52:22.257

[Elliptic Curve DiffieHellman](http://en.wikipedia.org/wiki/Elliptic_curve_Diffie%E2%80%93Hellman)不是一种加密算法，它是一种[密钥协商](http://en.wikipedia.org/wiki/Key_agreement)协议。通过不安全的渠道，它为您和另一方提供了一个共同的共享秘密。这通常用于说 AES 密钥以进行安全通信。

[给定另一方的公钥，您可以通过此](http://msdn.microsoft.com/en-us/library/bb361100.aspx)api 调用获取派生的共享密钥材料。请注意，根据备注[部分](http://msdn.microsoft.com/en-us/library/system.security.cryptography.ecdiffiehellmancng.aspx#remarksToggle)，CNG APi 会对派生的秘密进行一些后处理，因此它可能与 true-crypt 生成的内容一致，也可能不一致。

要获取实际的私钥（不是共享密钥），您可以使用以下内容。您可能需要不同的导出格式，它们在[此处列出](http://msdn.microsoft.com/en-us/library/system.security.cryptography.cngkeyblobformat.pkcs8privateblob.aspx)

```
using (ECDiffieHellmanCng alice = new ECDiffieHellmanCng())
    { 
    // Any  code you have  specifies the key your using or generates  one 
    var privatekey = alice.Key.Export(CngKeyBlobFormat.Pkcs8PrivateBlob)
    } 
```

请注意，您可能会收到一条错误消息，指出导出策略不允许导出私钥。在这种情况下，您需要使用允许导出的策略创建和使用密钥

# python - UnicodeDecodeError：“ascii”编解码器无法解码位置 10 中的字节 0x96：序数不在范围内（128）

> ID：10264774
> 
> 赞同：1
> 
> 时间：2012-04-22T02:43:43.003
> 
> 标签：python, mysql, utf-8, decode

如何在不出现 UnicodeDecodeError 的情况下从 UTF-8 编码的 MySQL 数据库中获取数据？我正在使用 Python 和 HTML 模板制作网站。这是我用来从数据库中获取内容的代码，在我将数据库的编码切换为 UTF-8 之前，它似乎工作正常：

```
@app.route("/songs")
def content_database_song():
  c = connect_db()
  c.execute("
  SELECT * FROM Tracks
  JOIN Artists USING (ArtistID)
  JOIN Albums USING (AlbumID)
  JOIN Songs USING (SongID)
  ORDER BY UPPER(SoName), UPPER(AlTitle)
  ")
  songslist = []
  rows = c.fetchall()
  for row in rows:
    songslist.append(row)
  return render_template("/song-index.html", songslist = songslist) 
```

这是完整的回溯：

```
UnicodeDecodeError
UnicodeDecodeError: 'ascii' codec can't decode byte 0x96 in position 10: ordinal not in range(128) 
```

* * *

## Traceback（最近一次通话最后一次）

```
File "/Library/Python/2.7/site-packages/Flask-0.7.2-py2.7.egg/flask/app.py", line 1306, in __call__
return self.wsgi_app(environ, start_response)
File "/Library/Python/2.7/site-packages/Flask-0.7.2-py2.7.egg/flask/app.py", line 1294, in wsgi_app
response = self.make_response(self.handle_exception(e))
File "/Library/Python/2.7/site-packages/Flask-0.7.2-py2.7.egg/flask/app.py", line 1292, in wsgi_app
response = self.full_dispatch_request()
File "/Library/Python/2.7/site-packages/Flask-0.7.2-py2.7.egg/flask/app.py", line 1062, in full_dispatch_request
rv = self.handle_user_exception(e)
File "/Library/Python/2.7/site-packages/Flask-0.7.2-py2.7.egg/flask/app.py", line 1060, in full_dispatch_request
rv = self.dispatch_request()
File "/Library/Python/2.7/site-packages/Flask-0.7.2-py2.7.egg/flask/app.py", line 1047, in dispatch_request
return self.view_functions[rule.endpoint](**req.view_args)
File "/Users/samuelbradshaw/Sites/praises/index.py", line 59, in content_database_song
return render_template("/song-index.html", songslist = songslist)
File "/Library/Python/2.7/site-packages/Flask-0.7.2-py2.7.egg/flask/templating.py", line 121, in render_template
context, ctx.app)
File "/Library/Python/2.7/site-packages/Flask-0.7.2-py2.7.egg/flask/templating.py", line 105, in _render
rv = template.render(context)
File "/Library/Python/2.7/site-packages/Jinja2-2.6-py2.7.egg/jinja2/environment.py", line 894, in render
return self.environment.handle_exception(exc_info, True)
File "/Users/samuelbradshaw/Sites/praises/templates/song-index.html", line 1, in top-level template code
{% extends "database-nav.html" %}
File "/Users/samuelbradshaw/Sites/praises/templates/database-nav.html", line 1, in top-level template code
{% extends "layout.html" %}
File "/Users/samuelbradshaw/Sites/praises/templates/layout.html", line 26, in top-level template code
{% block content %}{% endblock %}
File "/Users/samuelbradshaw/Sites/praises/templates/database-nav.html", line 13, in block "content"
{% block subcontent %}
File "/Users/samuelbradshaw/Sites/praises/templates/song-index.html", line 47, in block "subcontent"
<strong>Related Scriptures:</strong> {% if song.SoRelatedScriptures != "" %}{{song.SoRelatedScriptures}}{% else %}None{% endif %}<br>
File "/Library/Python/2.7/site-packages/Jinja2-2.6-py2.7.egg/jinja2/_markupsafe/_native.py", line 21, in escape
return Markup(unicode(s)
UnicodeDecodeError: 'ascii' codec can't decode byte 0x96 in position 10: ordinal not in range(128) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T03:47:10.337

我只需要调整代码的一部分——它在`connect_db()`上面发布的代码片段中引用的方法中。我改变了这个：

```
def connect_db():
  global conn
  conn = mdb.connect(dbinfo.server, dbinfo.username, dbinfo.password, dbinfo.database)
  return conn.cursor(mdb.cursors.DictCursor) 
```

对此：

```
def connect_db():
  global conn
  conn = mdb.connect(dbinfo.server, dbinfo.username, dbinfo.password, dbinfo.database, charset='utf8', use_unicode=True)
  return conn.cursor(mdb.cursors.DictCursor) 
```

连接时注意`charset='utf8', use_unicode=True`。这就是我在将数据库切换到 Unicode 后必须更改的全部内容！:)

# mysql - 左连接重复列

> ID：10264780
> 
> 赞同：1
> 
> 时间：2012-04-22T02:44:54.547
> 
> 标签：mysql

我在数据库中有两个表。一种用于产品，另一种用于产品图像。我正在加入表格，以便通过一个查询获取产品图像和信息：

```
SELECT * 
from items left join images 
     on items.item_id = images.item_id and 
        items.display_items = '1' and items.active = '1' 
order by items.item_year desc, items.fullname desc, images.position asc 
```

但是，我注意到所有产品都没有出现。有些产品没有任何图像，而那些是没有出现的。我在 Sequel Pro 中运行查询，发现该列`item_id`出现了两次，一次是 id，一次是`NULL`. 如何修复我的查询以获取所有产品？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T02:56:17.317

我会修改您的查询以在结果中指定您想要的确切列，而不是使用“select *”。在这种情况下，您可能在 2 个表中有同名的列（例如“item_id”），这可能会导致“select *”出现问题。

另外，我会将您的 ON 语句的第二行放在 WHERE 子句中。“items.display_items = '1' and items.active = '1'”不适用于您的加入，而是适用于您想要的项目集。

修改后的查询：

```
SELECT --explicit list of columns 
from items 
    left join images 
    on items.item_id = images.item_id  
WHERE items.display_items = '1' and items.active = '1' 
order by items.item_year desc, items.fullname desc, images.position asc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T02:57:22.200

您缺少 WHERE 子句。假设您只想要来自 的数据`items`，请尝试以下操作：

```
SELECT it.* 
FROM items it
LEFT JOIN images im 
ON it.item_id = im.item_id
WHERE it.display_items = '1' and it.active = '1' 
ORDER BY it.item_year desc, it.fullname desc, im.position asc 
```

# objective-c - 使用自动引用计数释放 self 的新模式是什么？

> ID：10264790
> 
> 赞同：7
> 
> 时间：2012-04-22T02:46:49.150
> 
> 标签：objective-c, memory-management, automatic-ref-counting, nscoder

以 NSObject 方法`-(id)awakeAfterUsingCoder:(NSCoder *)decoder`为例，文档说：

> 允许一个对象在被解码后，用另一个对象代替它自己。例如，表示字体的对象可能在被解码后释放自身并返回与自身具有相同字体描述的现有对象。这样，可以消除多余的对象。

通常你会做

```
[self release];
return substitutedObject; 
```

使用 ARC，您必须将这条线排除在外。这不会泄露吗？还是我应该相信 NSCoder 对象会为我释放原始对象？如果是这样，为什么您必须首先使用非 ARC 代码显式释放 self ？

`self = nil`鉴于编译器文档对自我的说法，我认为这是不正确的：http: [//clang.llvm.org/docs/AutomaticReferenceCounting.html#misc.self](http://clang.llvm.org/docs/AutomaticReferenceCounting.html#misc.self)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T14:19:13.720

A similar issue arises in the context of NIB top-level objects on Mac OS X. The [Resource Programming Guide](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/LoadingResources/CocoaNibs/CocoaNibs.html#//apple_ref/doc/uid/10000051i-CH4-SW10) says:

> *If the File’s Owner is not an instance of `NSWindowController` or `NSViewController`*, then you need to decrement the reference count of the top level objects yourself. With manual reference counting, it was possible to achieve this by sending top-level objects a `release` message. You cannot do this with ARC. Instead, you cast references to top-level objects to a Core Foundation type and use `CFRelease`.

So, that technique can presumably be used in this situation, too. `CFRelease((__bridge CFTypeRef)self);`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T06:32:22.190

如前所述，您不能编写`[self release];`. 此外，`awakeAfterUsingCoder:`它*不是初始化器*——您不能重新分配`self`.

> 这不会泄露吗？

是的。在下面的程序中证明。

> 还是我应该相信 NSCoder 对象会为我释放原始对象？

不。

One approach to avoid the leak exists below -- I would not call it "the new pattern", just the first approach that came to mind. It involves an explicit release of `self` and in this case an explicit **retain** of the result:

```
#import <Foundation/Foundation.h>

@interface MONBoolean : NSObject < NSCoding >

- (id)initWithBool:(bool)pBool;

- (bool)isTrue;
- (bool)isFalse;

@end

static NSString * const MONBoolean_KEY_value = @"MONBoolean_KEY_value";

@implementation MONBoolean
{
    bool value;
}

- (id)initWithBool:(bool)pBool
{
    self = [super init];
    if (0 != self) {
        value = pBool;
    }
    return self;
}

- (bool)isTrue
{
    return true == value;
}

- (bool)isFalse
{
    return false == value;
}

- (NSString *)description
{
    return [[NSString alloc] initWithFormat:@"<%s:%p> : %s", object_getClassName(self), self, self.isTrue ? "true" : "false"];
}

- (void)encodeWithCoder:(NSCoder *)aCoder
{
    [aCoder encodeBool:value forKey:MONBoolean_KEY_value];
}

- (id)initWithCoder:(NSCoder *)aDecoder
{
    self = [super init];
    if (0 != self) {
        value = [aDecoder decodeBoolForKey:MONBoolean_KEY_value];
    }
    return self;
}

- (id)awakeAfterUsingCoder:(NSCoder *)aDecoder
{
    const bool b = value;
    // cannot reassign self outside of an initializer.
    // if not released, will result in a leak:
    CFRelease((__bridge const void*)self);
    MONBoolean * result = [[MONBoolean alloc] initWithBool:b];
    // now we have to retain explicitly because this is
    // an autoreleasing method:
    CFRetain((__bridge const void*)result);
    return result;
}

@end

int main(int argc, const char * argv[])
{
    @autoreleasepool {
        MONBoolean * a = [[MONBoolean alloc] initWithBool:true];
        NSData * data = [NSKeyedArchiver archivedDataWithRootObject:a];
        MONBoolean * b = [NSKeyedUnarchiver unarchiveObjectWithData:data];
        NSLog(@"%@", b);
    }
    system("leaks NAME_OF_PROCESS_HERE");
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T02:56:18.907

我相信 ARC 足够聪明，可以跟踪所有对象。因此，您应该能够对内存不说任何内容，并且应用程序将在不再使用该对象时释放该对象。以防万一，通过泄漏分析器运行它，但应该没问题。

# image-processing - 减去两个图像时的奇怪问题

> ID：10264796
> 
> 赞同：2
> 
> 时间：2012-04-22T02:48:14.100
> 
> 标签：image-processing, opencv

[这些问题是对这个](https://stackoverflow.com/questions/10255013/how-to-use-opencv-to-remove-non-text-areas-from-a-business-card)问题的后续，我有一张我想从中删除徽标的图像，我已经侵蚀了图像，直到所有小文本都消失了，只剩下徽标，现在我有两张图像，原始图像和仅带有徽标的图像，现在当我尝试减去这两个图像以形成第三个仅包含文本的图像时，发生了奇怪的事情，徽标没有被删除，但已被概述

代码：

```
cv::Mat final;
cv::Mat greyMat = [self.imageView.image CVGrayscaleMat];
cv::Mat bwMat,erodedMat;
cv::threshold(greyMat, bwMat, 128, 255, CV_THRESH_BINARY);
cv::bitwise_not(bwMat, bwMat);
cv::Mat element = cv::getStructuringElement(cv::MORPH_RECT, cv::Size(20, 12));
cv::erode(bwMat, erodedMat, element);
cv::dilate(bwMat, erodedMat, bwMat);//I used this to restore all the missed components of    the logo  during erosion,bwMat in the last argument acts as a mask, i didn't sure of this
std::vector<cv::Point>points;
cv::Mat_<uchar>::iterator it=bwMat.begin<uchar>();
cv::Mat_<uchar>::iterator end=bwMat.end<uchar>();
for (; it!=end; ++it) 
    if (*it) 
        points.push_back(it.pos());
final=bwMat-erodedMat; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T09:30:47.990

我认为这是因为当您侵蚀图像时，白色区域会缩小。这会擦除你的字母，同时它也会缩小白色方块的区域。

所以当你减去时，你是从原始正方形中减去一个缩小的正方形，留下你的边界。

所以在这种情况下，你必须做与腐蚀相反的功能，即膨胀。它扩大了白色区域。它不会带回您的信件，因为它们已经被删除。

但我认为你不能完全擦除白色方块，因为膨胀不会给出确切的方块。你可以比你的问题更好，仅此而已。

检查下面的这些图像。原图：

![在此处输入图像描述](../Images/45c7479e204eff7f03076843b58ca24e.png)

下面是先腐蚀后膨胀的结果：

![在此处输入图像描述](../Images/1ba213b7993b9e147df165245d2e6fc5.png)

它们永远不会相同。因此，当您减去它们时，就会出现伪影。

我在回答您的第一个问题时解释了另一种方法：[如何使用 opencv 检测大量白色像素的区域？](https://stackoverflow.com/questions/10262600/how-to-detect-region-of-large-of-white-pixels-using-opencv/10266717#10266717)

# php - 找不到意外的 T_STRING

> ID：10264797
> 
> 赞同：0
> 
> 时间：2012-04-22T02:48:29.867
> 
> 标签：php, mysql, syntax

通常，T_String 错误是在有额外引号时，或者至少我认为是这样。今晚我收到了这个错误

```
Parse error: syntax error, unexpected T_STRING in /var/www/html/registerBackend.php on line 118 
```

这是第 118+119 行的代码

```
$query = "INSERT INTO User (Name,Email,Password,Port) VALUES ('$name', '$email','$password','$port')";
mysql_query($query) or die('Error, insert query failed'); 
```

如果有帮助，这里还有一些代码

```
 $conn = mysql_connect($dbhost, $dbuser, $dbpass) or die ('Error connecting to mysql');

 $dbname ='hidden';
mysql_select_db($dbname);

//Check if Username has been used before
$query = "SELECT * FROM User where Name='$name'";
$result=mysql_query($query) or die('Error, insert query failed');
$countName=mysql_num_rows($result);

//Check if email has been used before
$query = "SELECT * FROM User where Email='$email'";
$result=mysql_query($query) or die('Error, insert query failed');
$countEmail=mysql_num_rows($result);

if($countName < 1 && $countEmail < 1){

//Assign their port number
$query  = "SELECT *  FROM login;
$countPort=mysql_num_rows($result);
$port = 20000 + $countPort;

$query = "INSERT INTO User (Name,Email,Password,Port) VALUES ('$name', '$email','$password','$port')";
mysql_query($query) or die('Error, insert query failed');

$query  = "SELECT username, password FROM login WHERE username = '$username' AND password = '$password'";
$result = mysql_query($query);

print "<center><div id=newAREA>You have been signed up!<br>";
while($row = mysql_fetch_array($result, MYSQL_ASSOC)){
  echo "Minecraft Username:{$row['Name']} <br>" .
       "Email:{$row['Email']} <br>" .
       "Password:{$row['Password']} <br>".
       "Port:{$row['Port']} <br>";

}
} elseif ($countName > 1) {
print "Someone has already used this Minecraft IGN! E-mail Stolen@freeminecrafthost.com   to prove it is yours!";
} elseif ($countEmail > 1) {
print "Email has been used before!";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T02:57:30.907

尝试

```
$query = "INSERT INTO User (Name,Email,Password,Port) VALUES ('" . mysql_real_escape_string($name) . "', '" . mysql_real_escape_string($email) . "','" . mysql_real_escape_string($password) . "','" . mysql_real_escape_string($port) . "')";
mysql_query($query) or die('Error, insert query failed'); 
```

**更新**

这条线

```
$query  = "SELECT *  FROM login; 
```

应该

```
$query  = "SELECT *  FROM login"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T02:59:34.243

```
//Assign their port number
$query  = "SELECT *  FROM login;
$countPort=mysql_num_rows($result);
$port = 20000 + $countPort; 
```

您在 之后缺少报价`login`。

```
$query  = "SELECT *  FROM login"; 
```

赞美，语法高亮！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T02:58:15.723

在线的：

```
$query  = "SELECT *  FROM login; 
```

你需要有：

```
$query  = "SELECT *  FROM login"; 
```

但肯定也需要对这些问题提出一些热爱。

# java - 线程 java 的基准测试

> ID：10264799
> 
> 赞同：0
> 
> 时间：2012-04-22T02:48:40.330
> 
> 标签：java, concurrency

我正在寻找基准来比较访问同步映射的多个线程与不访问同步映射的线程之间的差异，当线程共享映射时损失了多少速度，而不是单独复制和操作它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T08:56:16.133

我已经完成了比较[同步与锁定性能的测试](http://vanillajava.blogspot.co.uk/2011/07/synchronized-vs-lock-performance.html)

如果您担心访问同一个 Map 的多个线程的性能，我会使用 ConcurrentHashMap 或 ConcurrentSkipListMap。

# java - 为什么握手失败？

> ID：10264801
> 
> 赞同：1
> 
> 时间：2012-04-22T02:49:36.667
> 
> 标签：java, websocket

我正在使用 websocket4j 库，并查看了有关如何在服务器应用程序中使用它的示例。我从那里获取代码并将其实施到我当前使用原始套接字的当前项目中。无论我使用哪个客户端，我似乎都会收到一个 IOExcpetion 说握手失败。我不知道出了什么问题，因为我从示例服务器中获取了代码（这显然应该可以工作），并且我使用了一个 javascript 示例客户端来确保它不是客户端的错。这是主要方法。

```
 public static void main(String args[]){
        BufferedReader b=new BufferedReader(new InputStreamReader(System.in));
        System.out.print("PORT ( default - 1000 ): ");
        int port=1000;
        try{
            port=Integer.parseInt(b.readLine());
        }
        catch(Exception e){
            System.out.println("Wrong format. Using 1000 instead");
            port=1000;
        }
        System.out.println("Server Started. Waiting for connections");
        try{
            WebServerSocket listener=new WebServerSocket(port);
            while(true){
                WebSocket server=listener.accept();
                U413ChatServer connection=new U413ChatServer(server);
                Thread t=new Thread(connection); 
                t.start();
            }
        }
        catch(Exception e){ e.printStackTrace();
        }
    } 
```

这是屏幕上出现的内容

```
Server Started. Waiting for connections
java.io.IOException: Handshake failed
        at websocket4j.AbstractWebSocket.<init>(Unknown Source)
        at websocket4j.server.WebSocket.<init>(Unknown Source)
        at websocket4j.server.WebServerSocket.accept(Unknown Source)
        at U413ChatServer.main(U413ChatServer.java:55)
Caused by: java.io.IOException: Unexpected header field: Sec-WebSocket-Key: yfOg
xCbblVyY8ARVFyMtOw==
        at websocket4j.server.WebSocket.handshake(Unknown Source)
        at websocket4j.AbstractWebSocket$HandshakeRunner.run(Unknown Source)
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:47
1)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
        at java.util.concurrent.FutureTask.run(FutureTask.java:166)
        at java.lang.Thread.run(Thread.java:722) 
```

第 55 行是：

```
WebSocket server=listener.accept(); 
```

任何帮助将非常感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T05:00:51.300

您的客户端使用的 WebSocket 协议与服务器的协议版本不兼容。

服务器实现过时的（过期：2011 年 2 月 17 日）[WebSocket 协议 draft-ietf-hybi-thewebsocketprotocol-latest](http://www.whatwg.org/specs/web-socket-protocol/) ，而您的客户端可能会实现类似[RFC6455](https://www.rfc-editor.org/rfc/rfc6455)（标准）的东西。

你应该看看其他的实现，比如[Netty 或 Jetty WebSocketServer](https://stackoverflow.com/questions/4278456/websockets-production-ready-server-in-java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T02:33:54.453

是的 assylias 是对的。您使用的 websocket4j 套件确实已经过时，需要两个键和令牌值才能做出响应，由于数字除以零异常或流异常结束而失败。

# c# - Winforms 如何编写代码来调整窗口大小（并同时移动）？

> ID：10264802
> 
> 赞同：0
> 
> 时间：2012-04-22T02:49:54.153
> 
> 标签：c#, winforms, user-interface, user-controls, window

我正在制作一个自定义窗口。当您从左侧或顶部调整窗口大小时，从技术上讲，窗口会同时移动和调整大小。我需要创造这种效果。我没有发布我的代码，因为它甚至没有关闭，窗口只是在屏幕上快速跳跃......但这是我用于调整大小和移动的代码：

```
private void SetMousePosition(MouseEventArgs Position) {
    MousePos = Position.Location;
}
private void SetRightPosition(MouseEventArgs Position) {
    MouseDif = new Point(PointToClient(MousePosition).X - this.Width, PointToClient(MousePosition).Y - this.Height);
}
private void StartDrag(MouseEventArgs e) {
    if (e.Button == MouseButtons.Left) {
        int x = this.Left + e.X - MousePos.X;
        int y = this.Top + e.Y - MousePos.Y;
        this.Location = new Point(x, y);
    }
}
private void StartRightResize(MouseEventArgs e) {
    if (e.Button == MouseButtons.Left)
    {
        title.Text = PointToClient(MousePosition).X.ToString();
        int x = PointToClient(MousePosition).X - MouseDif.X;
        if (x < 60) x = 60;
        this.Width = x;
    }
} 
```

这是我仅用于拖动的代码，仅用于从右边框调整大小。我只需要能够使用左边框来调整大小...我还需要它才能与用户控件和自定义窗口一起使用，但我不知道 id 是否有意义...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T03:46:42.643

您是否尝试过[`SetBounds`](http://msdn.microsoft.com/en-us/library/z0tayb1b.aspx)允许您在一次操作中更改大小和位置的方法？这应该可以防止控件经常重绘。

当然，您可能需要制作控件的图片`BitBlt`（

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T03:22:38.647

看看这个：

[在 Windows 窗体中绘制自定义边框](http://geekswithblogs.net/kobush/articles/CustomBorderForms3.aspx)

# java - 读取文件内容并写入控制台

> ID：10264803
> 
> 赞同：1
> 
> 时间：2012-04-22T02:50:16.243
> 
> 标签：java

我有一个程序，它从文件中读取内容并将其打印在屏幕上。但是程序每隔一行打印一次，即跳过每隔一行。包输入输出；

```
import java.io.*;

public class CharacterFileReaderAndFileWriter{

    private BufferedReader br = null;

    private PrintWriter pw = new PrintWriter(System.out, true);

    /* Read from file and print to console */
    public void readFromFile() throws IOException{

        try{
            br = new BufferedReader(new FileReader("E:\\Programming\\Class files\\practice\\src\\InputOutput\\test.txt"));
        }
        catch(FileNotFoundException ex){
            ex.printStackTrace();
        }

        String s = null;
        do{
            s = br.readLine();
            pw.println(s);
        }
        while((s = br.readLine())!=null);

        br.close();
    }

    /* Main method */
    public static void main(String[] args) throws IOException{

        CharacterFileReaderAndFileWriter cfr = new CharacterFileReaderAndFileWriter();

        cfr.readFromFile();
    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T02:53:36.117

你为什么要做`s=br.readline()`两次..你可以这样。

```
String s = null;
 while((s = br.readLine())!=null)
{
   pw.println(s);
} 
```

`readline()`每次调用时都会读取一行，然后转到下一行。所以当你调用它两次时，显然你正在跳过一行。使用此代码，它将起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T02:53:56.367

你循环是错误的：

```
String s = null;
do{
    s = br.readLine();
    pw.println(s);
}
while((s = br.readLine())!=null); 
```

应该：

```
String s = null;
while((s = br.readLine())!=null) {
    pw.println(s);
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T02:54:11.187

反转`do/while`循环以避免调用`readline`两次并丢弃所有其他结果：

```
String s = null;
while((s = br.readLine())!=null) {
    pw.println(s);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T02:52:24.607

**删除do**循环的第一行。您正在调用 readLine() 两次。

IE：

```
String s = null;
while((s = br.readLine())!=null) {
    pw.println(s);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-22T02:56:11.670

如果您想使用 do-while，则需要修改您的 do-while 循环，然后请按如下方式对其进行编码。

```
String s = null;
do{        
    pw.println(s);
}
while((s = br.readLine())!=null);

br.close(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-22T03:01:00.627

通过以下方式更改：

```
 for(String s; (s = br.readLine()) != null;) {
        pw.println(s);
  } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-07-03T04:40:57.997

您正在使用 br.readLine() 两次。

```
String s = null;
    do{
        s = br.readLine();  //here it read first line 
        pw.println(s);      //here it prints first line    
    }
    while((s = br.readLine())!=null); //here s read second line
                                      //note that it is not printing that line

String s = null;
    do{
        s = br.readLine();  //this time it read third line
        pw.println(s);      //now it prints third line
    }
    while((s = br.readLine())!=null);   // this time it reads fourth line 
```

所以，这个过程会继续下去，你的程序会一个接一个地打印行

# c# - 如何在 C# 中呈现 Zalgo 文本

> ID：10264805
> 
> 赞同：2
> 
> 时间：2012-04-22T02:50:47.127
> 
> 标签：c#, .net, unicode, fonts, zalgo

GDI+ 的 DrawString 似乎无法呈现 Unicode 上标和/或下标。它将它们显示为正方形并且不堆叠。

**使用 DrawString 绘制**

![由 GDI 绘制](../Images/338241782ff259e32c699704c6dfc596.png)

```
private void Form1_Paint(object sender, PaintEventArgs e)
{
    String text = "ă̡͈̘̠͕̺̯̖̤̺͇̫̗͓̗̤̩̜̩̯̝ͥͪ̍ͯͥ͒ͫ͛ͮ̿ͥ͛́́̈͒ͯ͊̇̿ͪ̓́̋ͨ̌͗̀̾̃ͧ̋͗ͣͦ̑̈̆̚҉̶̸̶̶̷̷̶̸̨̧̧̨̛̛̕͘͘̕͘͜͟͜͜͡͞͠͠͠͏̴̷̴̡̢̀͟͝͠s̸̢̨̥͚̲̝̝̗̤͇͓̫̝͍̥͓̳͕̰̰̙͖̅̾ͨ͗̈́͌̽̋̇ͦ̃͌͌͌̎̃̒̂̆̌ͤ͗̌͂̿̃̋̈́ͦ͂͋͂̽ͪͣ͂ͩ̓̈͆̀͢͜͟͡͠͠͝҉̶̶̧̨̡̧̧̛́́́́̀͘͘̕͢͜͢͢͠͞͠҉́̕͢͝d̵̴̡̡̢̛͙̞̭̲̺̖̯̳̙̞͇͓̖͙̩̩̗̝̮̉̿ͦ͒̓̑̉ͫ̇͒̓̎ͨ̎ͪ̂ͨͨ̿͛͊͛͛͂͐ͭ̄͑̔̄̋̆ͪ̀ͫ͌̉̍́̚̚͘͘͘͟͢͢͞͠͠ͅ҉̴̷̶̶̸̧̢̧̡̢̧̨̛̕͘͘͘͘͘͢͟͡҉f̸̶̵̤̮͚͔̟̮̗̺͖͉̪͔̫͎͓̱̟̰̹̩̈̊ͮͦͯ̅̊ͨ́͊̔ͪ̐ͤ͌̑͋̈́̐͆ͦ̿͌̐̓͐̌͂̅ͩ̄͊͐ͨ̄̄̈́̆̚̚͜͏͏̵̸̧̧̛̛͞͡͡͏̡͘͟͠͏̸̶͏͟͡͞͏̸̡͝͏͠͞͏̴͡͏̢͝";
    e.Graphics.DrawString(text, new Font("Arial Unicode MS", 12), Brushes.Black, 30, 30);
} 
```

**使用 TextRenderer 绘制**

![由 TextRendere.DrawText 绘制](../Images/bae21d16f773b7fe87f0324dc59282c7.png)

```
TextRenderer.DrawText(e.Graphics, text, new Font("Arial Unicode MS", 12), new Point(30, 30), Color.Black); 
```

**火狐绘制的**

![在此处输入图像描述](../Images/85eac94df659505cdf46e3846c67f455.png)

FireFox 是如何正确绘制的？

我正在使用的数据 - [http://pastebin.com/p5Cp3qUM](http://pastebin.com/p5Cp3qUM)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T02:52:22.327

试着打电话`TextRenderer.DrawText`。

# ajax - mvc ajax 刷新以保留搜索结果

> ID：10264831
> 
> 赞同：1
> 
> 时间：2012-04-22T02:55:19.113
> 
> 标签：ajax, asp.net-mvc

我正在学习制作一个 mvc3 + jquery.ajax 产品搜索页面。它接受搜索关键字和下拉类别过滤器并返回产品的数据网格作为结果，还有一个 ajax 导航面包屑链接，如 Home>Electronics>LG>BD&DVD Players ... 在搜索结果顶部，因为人们进一步过滤到结果。但是，一旦我按下 F5（刷新）按钮，它们就消失了，就像我第一次来到搜索页面一样。

我在互联网上找不到好的教程。在 ajax+mvc3 中保持页面当前状态的推荐方法是什么？你能给我一个例子，或者一个好的教程的链接吗？

非常感谢。

编辑：这些是 GET 数据，一种解决方案可能是添加像 #Home_Electronics_LG_BD_DVD_Players 这样的哈希。如果我想要 POST 数据，或者当我要填写运输表格时怎么办。在这种情况下，哈希 # 似乎不是一个解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T03:31:48.763

我相信您所描述的是“单页应用程序”架构。正确地做 SPA 是相当困难的，所以要为漫长的学习曲线做好准备。

此页面可能对您有所帮助。它包括一个演示 SPA 应用程序和一个完整的教程。

[http://addyosmani.com/blog/building-spas-jquerys-best-friends/](http://addyosmani.com/blog/building-spas-jquerys-best-friends/)

它使用 PHP 而不是 .Net，但它可能对某些概念有所帮助。

值得注意的是，MVC4 引入了一个新的 SPA 框架，可能值得研究：

[http://www.asp.net/single-page-application](http://www.asp.net/single-page-application)

# emacs - Emacs / Slime / Clojure / 浏览器树

> ID：10264834
> 
> 赞同：2
> 
> 时间：2012-04-22T02:56:00.000
> 
> 标签：emacs, ide, clojure, slime

我最近在玩 CounterClockwise（Eclipse 的 Clojure 插件）。我真正喜欢 CounterClockwise 的一件事是：

*   中心面板 = 代码
*   左面板 = 文件系统树
*   右面板 = 显示当前文件的所有 defns/defs 列表

我目前正在使用 Emacs/Slime。问题：是否有提供类似设置的东西？我希望左/右面板/缓冲区是“永久的”，即即使我按下 Cx 1 也仍然活着。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T08:04:58.527

[您可以使用ECB](http://ecb.sourceforge.net/)实现类似的 Windows 设置，但[CEDET](http://cedet.sf.net)目前缺乏 Clojure 支持，因此不会显示任何标签 :-(

# android - 使用片段处理 setDisplayHomeAsUpEnabled

> ID：10264838
> 
> 赞同：3
> 
> 时间：2012-04-22T02:56:28.300
> 
> 标签：android, android-intent, android-fragments, android-actionbar

我有一个基于片段的布局，其中包含两个 ListFragments（A 和 B），它们都包含在一个活动中（称为 ListingActivity 1）。当应用程序启动时，ListingActivity 1 被调用，根据设备是纵向还是横向，要么只显示 ListFragment A，要么显示两个 ListFragment。

当您单击 Fragment A 的 ListView 中的某个项目时，会显示 Fragment B 的 ListView。当您单击 Fragment B 的 ListView 中的一个项目时，它会转到一个新活动（活动 1）。

我正在使用此代码（称为 ListingActivity 2）来确定是单独显示 ListFragment B 还是与 ListFragment A 一起显示：

```
public class ListingActivity extends SherlockFragmentActivity  
{
    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE) {
            // If the screen is now in landscape mode, we can show the
            // dialog in-line so we don't need this activity.
            finish();
            return;
        }

        if (savedInstanceState == null) {
            // During initial setup, plug in the details fragment.
            final ListingFragment details = new ListingFragment();
            details.setArguments(getIntent().getExtras());

            getSupportFragmentManager().beginTransaction().add(android.R.id.content, details).commit();
        }
    }
} 
```

在活动 1 中，我使用`setDisplayHomeAsUpEnabled`将 Actionbar 徽标启用为后退按钮，但我不确定如何处理主页意图。当设备处于纵向模式时，用户应该返回到 ListingActivity 2，但如果他们处于横向模式，他们应该返回到 ListingActivity 1。

我打算做这样的事情，但它似乎真的很hacky：

```
@Override
public boolean onOptionsItemSelected(final MenuItem item) 
{
    if (item.getItemId() == android.R.id.home) 
    {
        final Intent intent;

        if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE)
            intent = new Intent(this, ListingActivity1.class);
        else
            intent = new Intent(this, ListingActivity2.class);

        intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_NEW_TASK);
        startActivity(intent);
        return true;
    } else {
        return super.onOptionsItemSelected(item);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T10:02:31.983

老实说，我认为您的解决方案是实现所描述行为的正确方法。它遵守所有关于向上导航的 Android 标准（在这种情况下，它应该像“后退”按钮一样，我相信）。我唯一要重新考虑的是你对`Intent.FLAG_ACTIVITY_NEW_TASK`旗帜的使用。来自 Android 文档：

> 任务是用户为完成目标而遵循的一系列活动。

在这种情况下，您似乎并没有开始一项新任务。

# wordpress - 如何更改登录表单在 wordpress 中的外观

> ID：10264840
> 
> 赞同：2
> 
> 时间：2012-04-22T02:56:37.940
> 
> 标签：wordpress

我正在为客户构建一个 wordpress 网站，但我的客户希望登录屏幕具有不同的外观，所以我的问题是如何更改默认 wordpress 登录表单的外观。我不想更改任何核心文件，有没有办法在不更改核心文件的情况下更改登录表单的外观。任何形式的帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T03:02:04.443

您可以在不更改核心文件的情况下使用 hook `login_head`，只需将这些代码添加到您的`functions.php`文件中即可完成

```
function custom_login_logo() {
    echo '<style type="text/css">
        h1 a { background-image:url('.get_bloginfo('template_directory').'/yourImageFolder/login_logo.png) !important; }
    </style>';
}
add_action('login_head', 'custom_login_logo'); 
```

**更新：**还要将徽标的链接更改为当前站点，请使用以下代码段

```
function custom_login_url() {
    return get_bloginfo( 'siteurl' );
}
add_filter( 'login_headerurl', 'custom_login_url' ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T03:00:35.147

您可以通过覆盖 css 来做到这一点。您可以通过将以下内容添加到您的 functions.php 来覆盖 css

```
/**
 * Login theme branding.
 */
function rt_login_css() 
{
    echo '<link type="text/css" rel="stylesheet" href="' . get_bloginfo('template_directory') . '/css/login.css" />';
}
add_action('login_head', 'rt_login_css'); 
```

徽标使用 css 图片背景，因此可以被 css 覆盖。

基本上，login_head, 钩子是用于登录页面的，我所做的只是将链接回显到我的登录 css 文件。

从那里，我使用 firebug 来检查正在使用的样式。

缺点是你不能在这里完全控制，只是你可以用 css 和可能的 javascript 做任何事情。

这里也是我的css文件的一个例子：

```
h1 a { 
   background-image: url('/app/images/logo.png') !important; 
   width:330px; 
   height: 69px; 
   margin-bottom:0px; 
}

#login { 
   margin: 5em auto; 
} 
```

我所做的只是改变标志，所以很简单。通常，您必须进行调整以正确对齐和间隔徽标，这就是其他 css 的用途。

* * *

此外，您可以考虑创建自己的登录页面并使用各种 wordpress 功能处理身份验证。这是更多的工作，但您可以完全控制登录表单的外观。

缺点是它的工作量更大，而且如果用户被重定向到常规的 WP 管理员登录页面。所以对于后者，我想你必须同时做这两件事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T08:51:34.693

我发现这个插件[http://wordpress.org/extend/plugins/wp-custom-login-page/](http://wordpress.org/extend/plugins/wp-custom-login-page/)它似乎做你想做的事。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T06:53:18.143

我正在使用插件[BM Custom Login](http://wordpress.org/extend/plugins/bm-custom-login/)来快速轻松地自定义 wordpress 登录框。通过使用此插件，您可以：

1.  用您的自定义图像替换 wordpress 徽标。
2.  可以为登录页面添加背景颜色/图像。
3.  可以编辑文本/链接的阴影/颜色选项。
4.  您可以更改管理页脚文本。（登录时显示在管理页面的底部。）

这个插件不会改变任何核心文件

# asp.net - 在 MVC3 应用程序中上传图像控制器在部署后不起作用

> ID：10264842
> 
> 赞同：0
> 
> 时间：2012-04-22T02:56:54.337
> 
> 标签：asp.net, asp.net-mvc-3

标题有点说明了一切。当我在 localhost 中运行它时，一切正常，今天我部署运行一些测试和 BAM！不工作。而且我由于某种原因无法显示错误，所以我不确定出了什么问题，或者真的如何调试它..

这是控制器：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using DarkRobot.Models;
using System.Web.Helpers;
using System.IO;

namespace DarkRobot.Controllers
{
[Authorize]
public class UploadController : Controller
{
    //
    // GET: /Upload/
    private DarkRobotEntities1 db = new DarkRobotEntities1();

    public ActionResult Index()
    {
        return View();
    }
    [HttpPost]
    public ActionResult Index(HttpPostedFileBase file, string name)
    {
        if (file != null && file.ContentLength > 0)
        {
            var fileName = Path.GetFileName(file.FileName);
            var path = Path.Combine(Server.MapPath("/Images"), fileName);
            file.SaveAs(path);

            Image image = new Image();
            image.RelativeLocation = "/Images/" + file.FileName;
            image.Title = name;
            db.Images.Add(image);
            db.SaveChanges();

        }
        return RedirectToAction("Confirm");
    }

    public ActionResult Confirm()
    {
        return View();
    }
}
} 
```

这是索引

```
@using (Html.BeginForm("Index", "Upload", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
<input type="file" name="file" />
<br />
<input type="text" name="name" />
<br />
<input type="submit" value="OK" />
} 
```

如果您还有其他需要尝试解决的问题，我很乐意更新问题。我对 MVC 相当陌生..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T03:01:09.127

如果相同的代码在您的开发中有效，我坚信这是一个**权限**问题。确保您尝试上传到的目录有足够的权限向该目录写入文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T03:03:11.600

你还没有发布错误，你得到什么样的错误。但是，如果它在本地工作，则服务器上唯一剩下的就是**文件夹权限**。你应该有足够的权限

# entity-framework - EF Power Tools Beta 2 预生成视图（EF 代码优先）

> ID：10264845
> 
> 赞同：3
> 
> 时间：2012-04-22T02:57:12.277
> 
> 标签：entity-framework, code-first

任何成功使用 Entity Framework Power Tools Beta 2 通过 EF Code First 预生成视图的人？

我收到“序列不包含匹配元素”错误。

我的设置是这样的：

*   VS 2010 终极版
*   英孚 4.2
*   MVC 3（剃刀）
*   SQL 速成 2008

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T00:30:19.400

我有同样的问题并解决了它。

确保将 MVC Web 项目设置为启动项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T00:35:00.173

> 我遇到了同样的问题（使用 Beta 3 - 和 .NET 4/2010/EF5 等） - 解决方案相对简单。
> **我刚刚将项目从“解决方案目录”移到解决方案的根目录中**。

有关如何使用**“生成的视图”**的更多详细信息，请参阅我的另一篇文章。

[使用 EF 5 Code First 将视图映射到实体](https://stackoverflow.com/questions/15774566/mapping-view-to-entity-using-ef-5-code-first/15791197#15791197)

[为什么当我想使用 EF Power 工具查看我的模型时出现错误？](https://stackoverflow.com/questions/14586061/why-when-i-want-use-ef-power-tools-for-view-my-model-i-get-error/15792960#15792960)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T02:37:44.533

我只是使用包管理器卸载并重新安装了 EF 4.2.0.0。自定义 DbContext 文件仍在解决方案文件夹中。生成视图应该在 VS 窗口的左下方显示一条消息——“*完成 EDM 视图预编译：`<yourDbContext>`！查看文件：`<yourDbContext>.Views.cs`* ”

# iphone - 从 UIWindow 中删除 UIView

> ID：10264851
> 
> 赞同：3
> 
> 时间：2012-04-22T02:57:58.083
> 
> 标签：iphone, objective-c, ios, uikit

我有一个`UIViewController`谁的视图被添加到我的`UIWindow`. 但是，如果我删除视图，我将无法点击它所在位置下方的任何内容。我的代码如下：

```
-(void)createFullAd{
    UIViewController *viewController = [UIViewController new];
    self.fullAd = [MobclixFullScreenAdViewController new];
    self.fullAd.delegate = self;
    [self.fullAd requestAndDisplayAdFromViewController:viewController];
    viewController.view.tag = 999999;
    [[[[UIApplication sharedApplication] delegate]window] addSubview:viewController.view];
}

- (void)fullScreenAdViewControllerDidDismissAd:(MobclixFullScreenAdViewController*)fullScreenAdViewController{
    NSLog(@"Dismissed");
    [[[[[UIApplication sharedApplication] delegate] window] viewWithTag:999999]removeFromSuperview];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T12:45:24.260

@dasblinkenlight 给了我这个想法，如果他回帖，我会将答案奖励给他。

这很混乱，但它是唯一有效的方法：

```
-(void)displayAd {
    self.fullAd = [MobclixFullScreenAdViewController new];
    self.fullAd.delegate = self;
    self.adController = [UIViewController new];
    [self.fullAd requestAndDisplayAdFromViewController:self.adController];
    [[[[UIApplication sharedApplication] delegate]window] addSubview:self.adController.view];
}
- (void)fullScreenAdViewControllerDidDismissAd:(MobclixFullScreenAdViewController*)fullScreenAdViewController{
    [fullScreenAdViewController.view removeFromSuperview];
    [[[[UIApplication sharedApplication] delegate]window] setNeedsLayout];
    self.adController = nil;

} 
```

`setNeedsLayout`是关键，但我在窗口而不是 adController 的超级视图上调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T04:57:51.940

我认为这不是正确的视图层次结构。如果您的构建目标是 iOS 5.0+，我认为您应该考虑使用`[viewController1 addChildViewController:viewController2]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T07:01:59.007

可以试试这个：

```
-(void)fullScreenAdViewControllerDidDismissAd(MobclixFullScreenAdViewController*)fullScreenAdViewController
{
    NSLog(@"Dismissed");
    [fullScreenAdViewController.view removeFromSuperview];
} 
```

# c++ - 带有访问修饰符的 C++ 继承

> ID：10264873
> 
> 赞同：1
> 
> 时间：2012-04-22T03:03:15.983
> 
> 标签：c++

我有这个代码片段

```
 #include <iostream>
    using namespace std;
    class Polygon
    {
        public:
            int publicmemberPolygon;
        private:
            int privatememberPolygon;
        protected:
            int protectedmemberPolygon;
   };

    class Square : public Polygon
    {
    public:
        int Getter();
     };
    int Square::Getter()
    {
    return privatememberPolygon;
    }

    int main()
    {
    } 
```

问题是，为什么 privatememberPolygon 无法访问？不是吗，当你有一个派生类时，它的所有成员/函数都被复制了吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T03:05:11.697

不，当您从基类公开派生时，派生类只能访问其`public`和`protected`成员。您也可以阅读此[常见问题解答](http://www.parashift.com/c++-faq-lite/basics-of-inheritance.html#faq-19.6)。

看这个例子：

```
class Base
{

public:
    void setPrivate(int p) 
    {
        m_private = p;
    }

public:
    int m_public;
protected:
    int m_protected;
private:
    int m_private;
};

class Derived : public Base
{
public:
    void f()
    {
        m_public = 0; // Can access public member of base class
        m_protected = 0; //Can access protected member of base class
        m_private = 0; //Compiler error- Can not access private member of base class
    }
};

int main() {

    Derived d;
    d.setPrivate(10); //m_private is still part of the derived class. Hence can call setPrivate
    return 0;

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T03:05:29.290

当您公开继承时，只有公共和受保护的数据成员才能在继承中访问。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-22T03:33:55.177

成员不会“复制”到派生类。派生类包含基类的一个子对象，几乎就像你有一个成员变量一样。

事实上，组合和非公共继承通常被认为是解决同一问题的两条路径。

与非公共继承的一个微不足道的区别是，基本子对象的成员不必由对象名称限定即可找到它们，它们是其中的一部分（除非您有菱形继承，哎呀！）。使用公共继承，还有从派生类的指针或引用到基类的指针或成员的隐式转换。

更大的区别是继承允许覆盖虚函数，而组合不允许。

`protected`归根结底，成员（和基地）实际上是无用的，因为它们抑制了组合，却没有提供真正的好处`virtual`。有时在虚函数已经使继承成为必要时使用它们。

# python - Python：减少字典的内存使用

> ID：10264874
> 
> 赞同：52
> 
> 时间：2012-04-22T03:03:18.627
> 
> 标签：python, memory, dictionary, compression, n-gram

我正在尝试将几个文件加载到内存中。这些文件具有以下 3 种格式之一：

*   字符串制表符 int
*   字符串制表符浮动
*   int 制表符浮动。

实际上，它们是 ngram 静态文件，以防这有助于解决方案。例如：

```
i_love TAB 10
love_you TAB 12 
```

目前，我现在正在做的伪代码是

```
loadData(file):
     data = {}
     for line in file:
        first, second = line.split('\t')
        data[first] = int(second) #or float(second)

     return data 
```

令我惊讶的是，虽然磁盘中文件的总大小约为 21 mb，但当加载到内存中时，该进程占用了 120 - 180 mb 的内存！（整个 python 应用程序不会将任何其他数据加载到内存中）。

文件少于 10 个，大多数会保持稳定在 50-80k 行左右，除了一个文件目前有数百万行。

所以我想要求一种技术/数据结构来减少内存消耗：

*   对压缩技术有什么建议吗？
*   如果我仍然使用dict，有什么办法可以减少内存？是否可以像在 Java 中为 Python dict 设置“负载因子”？
*   如果你有一些其他的数据结构，'我也愿意牺牲一些速度来减少内存。然而，这是一个时间敏感的应用程序，所以一旦用户输入他们的查询，我认为花费超过几秒钟的时间来返回结果是不太合理的。关于这一点，我仍然对谷歌如此迅速地完成谷歌翻译感到惊讶：他们一定是使用了很多技术+大量服务器的力量？

非常感谢你。我期待您的建议。

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-04-22T05:11:57.347

我无法提供有助于改善内存占用的完整策略，但我相信它可能有助于分析究竟是什么占用了这么多内存。

如果您查看字典的**Python 实现**（这是哈希表的相对直接的实现），以及内置字符串和整数数据类型的实现，例如[这里](https://svn.python.org/projects/python/trunk/Include/)（特别是 object.h、intobject .h、stringobject.h 和 dictobject.h，以及 ../Objects 中对应的 *.c 文件），您可以准确地计算出预期的空间需求：

1.  整数是一个固定大小的对象，即它包含一个引用计数、一个类型指针和实际的整数，总共通常**在**32 位系统上**至少 12 个****字节，在 64 位系统上至少 24 个字节**，不考虑可能的额外空间通过对齐丢失。

2.  字符串**对象**是可变大小的，这意味着它包含

*   参考计数

*   类型指针

*   尺寸信息

*   延迟计算的哈希码的空间

*   状态信息（例如用于*内部字符串*）

*   指向动态内容的指针

    总共**至少 24 字节**在 32 位或**60 字节**在 64 位，**不包括字符串本身的空间。**

1.  **字典**本身由许多桶组成，每个桶包含

*   当前存储的对象的哈希码（由于使用的冲突解决策略，无法从桶的位置预测）

*   指向关键对象的指针

*   指向值对象的指针

    在32 位上总共**至少 12 个**字节，在 64 位上总共至少**24 个字节。**

1.  字典从**8 个空桶**开始，每当达到其容量时，**通过将条目数加倍**来调整大小。

**我使用 46,461 个唯一字符串（337,670 字节串联字符串大小）的列表进行了测试**，每个字符串都与一个整数相关联 — 类似于您在 32 位机器上的设置。根据上面的计算，我预计最小内存占用为

*   字符串/整数组合的 46,461 * (24+12) 字节 = 1.6 MB
*   337,670 = 0.3 MB 用于字符串内容
*   65,536 * 12 字节 = 1.6 MB 用于哈希桶（调整大小 13 次后）

总共 2.65 MB。（对于 64 位系统，相应的计算产生 5.5 MB。）

当运行 Python 解释器空闲时，根据`ps`-tool 其占用空间为 4.6 MB。因此，创建字典后的预期总内存消耗约为 4.6 + 2.65 = **7.25 MB。**在我的测试中，**真正的内存占用（根据`ps`）是****7.6 MB。**我猜额外的约。通过 Python 的内存分配策略（用于内存领域等）产生的开销消耗了 0.35 MB

当然，现在很多人会指出，我使用`ps`来测量内存占用是不准确的，而且我对 32 位和 64 位系统上指针类型和整数大小的假设在许多特定系统上可能是错误的。的确。

但是，我相信，**关键结论是：**

*   Python**字典实现**消耗的内存非常**少**
*   **但是许多int**和（特别是）**字符串对象**占用的空间，用于引用计数、预先计算的哈希码等，比你最初想象的要多
*   几乎**没有办法避免内存开销**，只要您使用 Python 并希望将字符串和整数表示为单个对象 - 至少我不知道如何做到这一点
*   寻找（或自己实现）一个**Python-C 扩展**可能是值得的，它实现了一个将键和值存储为 C 指针（而不是 Python 对象）的哈希。我不知道那是否存在；但我相信这是可以做到的，并且可以将内存占用减少一半以上。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-08-22T14:56:27.710

1) 内存中的 SQLite 听起来是一个很好的解决方案，它可以让您在加载数据后更轻松地查询数据，这是一种乐趣

sqlite3.connect(':memory:')

2）您可能想要一个命名元组 - 我很确定它们比字典更轻，您可以使用点表示法访问属性（无论如何我都有审美偏好）。

[http://docs.python.org/dev/library/collections](http://docs.python.org/dev/library/collections)

3）你可能想看看 Redis： [https ://github.com/andymccurdy/redis-py](https://github.com/andymccurdy/redis-py)

它速度很快，可以让你轻松地坚持下去，这意味着你不必在每次想要使用它时都加载整个集合。

4) trie 听起来是个好主意，但在工作结束时会增加一些理论上的复杂性。您可以使用 Redis 来实现和存储它，这将进一步提高您的速度。

但总的来说，命名元组可能是这里的诀窍。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-22T03:31:11.280

在磁盘中你只有字符串，当加载到 Python 时，解释器必须为每个字符串和每个字典创建一个完整的结构，除了字符串本身。

没有办法减少 dicts 使用的内存，但是还有其他方法可以解决这个问题。如果您愿意以速度换取内存，您应该考虑从 SQLite 文件存储和查询字符串，而不是将所有内容加载到内存中的字典中。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-22T05:53:00.913

听起来像 Trie ( [http://en.m.wikipedia.org/wiki/Trie](http://en.m.wikipedia.org/wiki/Trie) ) 数据结构可能更适合您对内存效率的需求。

更新：python dict 的内存效率已被提出作为一个问题，尽管考虑到第三方库的可用性，它被标准库拒绝。见：[http ://bugs.python.org/issue9520](http://bugs.python.org/issue9520)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-10-29T18:47:17.533

您可以将 dict 替换为[blist.sorteddict](https://pypi.python.org/pypi/blist/)以进行 log(n) 访问，而不会产生内存开销。它很方便，因为它的行为与字典完全一样，即它实现了它的所有方法，因此您只需更改初始类型。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-12-01T17:10:12.610

**如果您试图将数字数据紧凑地存储在内存中的 python 中，那么您最好的解决方案可能是 Numpy。**

Numpy ( [http://numpy.org](http://numpy.org) ) 使用原生 C 结构分配数据结构。它的大多数数据结构都假定您存储的是单一数据类型，所以这并不适用于所有情况（您可能需要存储 null 等），但它可以非常、非常、非常快，并且与你可以要求。很多科学都用它完成了（另见：SciPy）。

当然，还有另一种选择： **zlib**，如果你有：

*   充足的 CPU 周期，以及
*   大量无法放入内存的数据

您可以将数据的“页面”（无论您想要多大）声明为一个数组，读入数据，将其存储在数组中，压缩它，然后读入更多数据，直到您将所有数据都保存在内存中想。

然后，遍历页面，解压缩，转换回数组，并根据需要进行操作。例如：

```
def arrayToBlob(self, inArray):
    a = array.array('f', inArray)
    return a.tostring()

def blobToArray(self, blob, suppressWarning=False):
    try:
        out = array.array('f', [])
        out.fromstring(blob)
    except Exception, e:
        if not suppressWarning:
            msg = "Exception: blob2array, err: %s, in: %s" % (e, blob)
            self.log.warning(msg)
            raise Exception, msg
    return out 
```

将数据作为 blob 后，您可以将此 blob 传递给**zlib**并压缩数据。如果你有很多重复的值，这个 blob 可以被大大压缩。

当然，它比保持全部未压缩要慢，但是如果您无法将其放入内存中，那么您的选择一开始就受到限制。

即使使用压缩，它也可能无法全部放入内存，此时您可能必须将压缩页面写成字符串或泡菜等。

祝你好运！

# php - 条件语句仅在与上一条记录不同时显示信息 - PHP - MYSQL

> ID：10264875
> 
> 赞同：0
> 
> 时间：2012-04-22T03:03:59.280
> 
> 标签：php, mysql, if-statement

我有一张表格，里面装满了以下形式的数据

value_id value_name value_timestamp

前 5 列具有相同的值名称（具有不同的 id 和时间戳）

我将如何生成一个条件语句，该语句通过并且只显示具有相同值的名字。即我只想显示第 1 行，而不是 5 行。然后我想将第 6 行的名称显示为不同的

我试过了，但没有运气-

```
 $sql = mysql_query("SELECT * FROM Films_Info") 
 or die(mysql_error()); 

while ($row = mysql_fetch_assoc($sql)) {
$name = $row['value_name'];  
if ("same as previous"($name)) {
    echo $name;
    }
    else 
    {
     //do nothing 
     }

} 
```

多谢你们

表结果 -

```
film_id   film_name   film_date
1         example     Thursday
2         example1    Thursday
3         example3    Thursday
4         example4    Friday 
```

所以我想显示film_id 1及其日期，但跳过2和3（film_id），然后显示示例4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T03:06:13.007

将您的 sql 语句更改为具体的。

`$sql = mysql_query("SELECT * FROM Films_Info WHERE name='{$name}'") or die(mysql_error());`

更新：经过一些聊天讨论，这是你应该做的：

```
while ($row = mysql_fetch_assoc($sql)) {
    $grouping = $row['film_date'];  
    $movies[$grouping][] = $row
} 
```

这会将您的同一日期电影分组到一个数组中供您操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T03:13:12.737

不知道这会有多大帮助，但我过去所做的是创建一个临时 mysql 表，其格式与上一个包含数据的表完全相同，然后使用 SELECT *FROM temptable WHERE condition = preferredCondition

然后在使用代码后运行 DROP TABLE temptable 命令删除表本身。

# java - 何时动态更新 值改变了

> ID：10264876
> 
> 赞同：-1
> 
> 时间：2012-04-22T03:04:12.567
> 
> 标签：java, javascript, jsp

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T03:19:16.480

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T03:34:19.873

如果可能的话，您可以使用 jquery 将 href 元素替换为具有更新 url 的全新元素，基于从 dorp 向下的选择。

# asp.net-mvc-3 - 客户端数据注释不适用于部分视图

> ID：10264877
> 
> 赞同：1
> 
> 时间：2012-04-22T03:04:18.390
> 
> 标签：asp.net-mvc-3, data-annotations

我在我的 asp.net mvc3 应用程序中面临一个普遍问题，即**所有部分视图都不会显示我使用数据注释定义的客户端验证错误，**例如，我定义了以下数据注释：-

```
public class Country_Validation
    {
        [Required(ErrorMessage="{0} is required.")]
        [StringLength(30, ErrorMessage="{0} is too long.",MinimumLength=1)]
        public string Description { get; set; }
    } 
```

我有以下将被调用的操作方法，`ajax.beginform`然后它将返回一个局部视图以创建一个新`Country`对象：-

```
public ActionResult Create()
        {
            Country c = new Country();
            return PartialView("_Create",c);
        } 
```

这将返回以下`_Create`部分视图：-

```
@model Medical.Models.Country

<div id = "partialWrapper">
@using (Ajax.BeginForm("Create", "Country", new AjaxOptions
{
    HttpMethod = "Post",
    InsertionMode = InsertionMode.InsertBefore,
    UpdateTargetId = "Countrytable",
    OnSuccess = "clearform"
}))
{
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Country</legend>
        <div class="editor-label">
        <strong>Country Name:-</strong>
            @Html.EditorFor(model => model.Description)
            @Html.ValidationMessageFor(model => model.Description)
        </div>
            <input type="submit" value="Create" />
    </fieldset>
 }
 </div> 
```

但是如果我尝试`country`在字段为空的情况下添加一个新对象`Description`，则不会显示客户端验证错误，而如果我返回常规视图（不是部分），那么所有客户端验证错误都可以正常工作吗？那么可能是什么问题呢？BR

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T03:09:05.370

我最近遇到了类似的事情。解决方案是在我的内容之前（但在我声明我的模型类型和任何 using 语句之后）将以下内容添加到我的部分视图中：

```
@{
    ViewContext.FormContext = new FormContext();   
} 
```

您可能还想查看以下链接，该链接涉及为新添加的内容启用验证的 javascript 方面：

[http://xhalent.wordpress.com/2011/01/24/applying-unobtrusive-validation-to-dynamic-content/](http://xhalent.wordpress.com/2011/01/24/applying-unobtrusive-validation-to-dynamic-content/)

# if-statement - Prolog 中带有 If-Else 语句的递归函数

> ID：10264878
> 
> 赞同：1
> 
> 时间：2012-04-22T03:04:20.790
> 
> 标签：if-statement, recursion, prolog, iso-prolog

我正在尝试在 prolog 中编写一个递归函数，该函数在`R = (2*X + Y)^N`不使用指数运算符的情况下进行计算。我用 if-else 语句编写了一个递归函数，但出现错误：`) or operator expected`. 在我看来，我的语法是正确的，但我一定遗漏了一些东西。代码如下。

```
expbar(R, X, Y, N) :-
    (X =:= Y =:= N =:= 0 -> 
        write("No two variables can equal 0 at the same time.");
        (N =:= 0 ->
            R is 2 * X + Y;
            R is (2 * X + Y) * expbar(R, X, Y, N-1)
        )
    ). 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T13:46:47.867

你一直在使用这个表达式`2*X+Y`。为什么不**先**计算它，然后使用该结果进行实际计算呢？也许你错过了问题陈述中的一些东西？

为什么要排除`X`和都是 0`Y`的情况？`N`...虽然你不排除这种情况`N < 0`？

## 参数顺序

Prolog 中通常将结果放在**相应**的输入参数之后。这条规则也有例外，`(is)/2`是最常见的例子，但它被写成中缀运算符。

## 错误信号

对于无法正确处理的情况，Prolog 中有两个选项。要么你默默地失败，要么你发出一个干净的错误。（还有第三种——循环，虽然不理想，但总比成功好。）目前，你写出一段文字，然后你就成功了。因此，您假设有人会阅读您的消息。但是程序经常在无人看管的情况下运行并且消息被忽略。

想象一下，我想用你的定义来证明你的定义是答案的*问题*：

```
?- expbar(42, 0, 0, 0)。

```

这是我在重写`X =:= Y =:= N =:= 0`为`X =:= 0, Y =:= 0, N =:= 0`.

```
?- expbar(42, 0, 0, 0)。
[78,111,32,116,119,111,32,118,97,114,105,97,98,108,101,115,32,99,97,110,32,101,113,117,97,108,32,48,32,97,116,32,116,104,101,32,115,97,109,101,32,116,105,109,101,46]
真的。

```

它说`true.`！而上面的这些数字肯定是来自如此高度复杂的计算的一些进度信息......所以很容易误读你的信息。如果您使用单引号会更容易一些。[更多关于单引号和双引号](https://stackoverflow.com/a/8269897/772868)。但即使有更易读的消息，也很容易跳过它。

处理这种情况的正确方法是发出错误：

```
    抛出（错误（Error_term，_More_info））

```

以这种方式，计算被中止，错误由顶层（或`catch/3`处理它的下一个地方）处理。这降低了错误被误解的可能性。

理想情况下，`Error_term`应该是现有误差项之一。这是[ISO Prolog 中错误的完整列表](http://www.complang.tuwien.ac.at/ulrich/iso-prolog/error_k#error_classes)。在您的情况下，它可能`evaluation_error(undefined)`类似于[exponentiation 的定义](http://www.complang.tuwien.ac.at/ulrich/iso-prolog/dtc2#9.3.10)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T07:35:51.913

您应该在初始条件下遇到语法错误。添加到 joel76 答案：

```
expbar(R, X, Y, N) :-
    (   ( X =:= 0, Y =:= 0 ; X =:= 0, N =:= 0 ; Y =:= 0, N =:= 0 )
    ->  write("No two variables can equal 0 at the same time.")
    ;   (   N =:= 0
        ->  R is 2 * X + Y
        ;   N1 is N - 1,
            expbar(R1, X, Y, N1),
            R is (2 * X + Y) * R1
        )
    ). 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T07:00:13.857

expbar 不是函数。正确的是

```
expbar(R, X, Y, N) :-
(X =:= Y =:= N =:= 0 -> 
    write("No two variables can equal 0 at the same time.");
    (N =:= 0 ->
        R is 2 * X + Y;
        N1 is N - 1,
        expbar(R1, X, Y, N1)
        R is (2 * X + Y) * R1
    )
). 
```

# python - 修改python程序（python 2.7）

> ID：10264880
> 
> 赞同：0
> 
> 时间：2012-04-22T03:04:29.730
> 
> 标签：python

我有一个关于在 python 中编写家庭作业的问题，但我需要首先提到我以前从未使用 python 编写过代码。该作业应该让我们习惯基础知识，所以提前为缺乏知识（以及很长的帖子）道歉。

我们的工作是修改 randline.py 文件（此处以其独创性给出）：

```
import random, sys
from optparse import OptionParser

class randline:
    def __init__(self, filename):
        f = open(filename, 'r')
        self.lines = f.readlines()
        f.close()

    def chooseline(self):
        return random.choice(self.lines)

def main():
    version_msg = "%prog 2.0"
    usage_msg = """%prog [OPTION]... FILE

Output randomly selected lines from FILE."""

    parser = OptionParser(version=version_msg,
                          usage=usage_msg)
    parser.add_option("-n", "--numlines",
                      action="store", dest="numlines", default=1,
                      help="output NUMLINES lines (default 1)")
    options, args = parser.parse_args(sys.argv[1:])

    try:
        numlines = int(options.numlines)
    except:
        parser.error("invalid NUMLINES: {0}".
                     format(options.numlines))
    if numlines < 0:
        parser.error("negative count: {0}".
                     format(numlines))
    if len(args) != 1:
        parser.error("wrong number of operands")
    input_file = args[0]

    try:
        generator = randline(input_file)
        for index in range(numlines):
            sys.stdout.write(generator.chooseline())
    except IOError as (errno, strerror):
        parser.error("I/O error({0}): {1}".
                     format(errno, strerror))

if __name__ == "__main__":
    main() 
```

我们需要使程序可以接收多个文件，而不仅仅是一个，但程序仍然必须将所有文件视为一个大文件。此外，如果其中一个文件没有以新行结尾，我们必须追加一个新行。我试过这个，但问题是这会在每个文件的末尾添加一个新行，无论它最初是否以新行结尾。另外，我的语法一开始就是错误的。每次尝试运行修改后的程序时都会出错。

而且我还必须添加新选项。我有独特的工作，但我应该做的另一个选择是没有替换，这使得每个输出行只出现在它作为输入出现的最大次数（如果我们不使用 -u选项，输出可以是重复的唯一时间是如果它在输入文件中是重复的）。我知道我的方法是错误的，因为集合会自动删除所有重复项，而我只想要它以便输出行无需替换即可写入。但我不知道我还能用什么。

```
import random, sys, string
from optparse import OptionParser

version_msg = "%prog 2.0"
usage_msg = """%prog [OPTION]... FILE

Output randomly selected lines from FILE"""
parser = OptionParser(version=version_msg,
                      usage=usage_msg)
parser.add_option("-n", "--numlines",
                  action="store", dest="numlines", default=1,
                  help="output NUMLINES lines (default 1)")
parser.add_option("-u", "--unique", action="store_true",
                  dest="unique", default=False,
                  help="ignores duplicate lines in a file")
parser.add_option("-w", "--without-replacement", action="store_true",
                  dest="without", default=False,
                  help="prints lines without replacement")
options, args = parser.parse_args(sys.argv[1:])

without = bool(options.without)
unique = bool(options.unique)
try:
    numlines = int(options.numlines)
except:
    parser.error("invalid NUMLINES: {0}".
         format(options.numlines))

def main():
    if numlines < 0:
        parser.error("negative count: {0}".
                     format(numlines))

    ##Here is one of the major changes
    input_file = args[0]
    count = 0
    while (count < len(args)-1):
        input_file = input_file + '\n' + args[count + 1]
        count = count + 1

    ##And here
    try:
        generator = randline(input_file)
        for index in range(numlines):
            if options.without:
                line = generator.chooseline()
                if line not in no_repeat:
                    sys.stdout.write(line)
                    no_repeat.add(line)
            else:
                sys.stdout.write(generator.chooseline())
    except IOError as (errno, strerror):
        parser.error("I/O error({0}): {1}".
                     format(errno, strerror))

class randline:
    def __init__(self, filename):
    if unique:
        uniquelines = set(open(filename).readlines())
        f = open(filename, 'w').writelines(set(uniquelines))
        f = open(filename, 'r')
    if without:
        countlines = len(f.readlines())
        if (countlines < numlines):
        parser.error("too few lines in input".
                 format(without))
        self.lines = f.readlines()
        f.close()

    def chooseline(self):
        return random.choice(self.lines)

if __name__ == "__main__":
    main() 
```

总而言之，我无法让它正确读取多个文件（同时仍将所有文件视为一个长文件），并且无替换选项也无法正常工作。

编辑：啊，我意识到，因为我在参数列表中传递文件名，所以即使它们只是文本文件，它们也不会被视为字符串。我试图改变它，但它仍然不能完全正常工作：

```
input_file = args[0]
count = 0
content = open(args[0]).read()
while (count < len(args) - 1):
content = content  + open(args[count + 1]).read()
    count = count + 1
open(input_file, 'wb').write(content)
try:
    generator = randline(input_file) 
```

它不断在两个文件之间添加一个额外的换行符。我想要逐行加入的文件，但是在第一个文件结束的位置和第二个文件的开始位置之间出现了一个空白行。

编辑 2.0：哦，等等，明白了。哎呀。我只需要关于无替换选项的帮助。我想我应该逐行拆分并将其存储在列表中以便每次检查？有没有更高效的方法（只用我已经写好的模块，别的什么都不能用）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T04:04:23.263

首先，您需要读取第一个输入文件。因此，您还需要 open() 您读取的第一个输入文件。要添加换行符，请修改 while 循环以检查文件（在您 open() 之后）是否在末尾有一个新行，如果没有，则放一个。

为了实现无替换选项，您需要一些方法来检查您是否已经阅读了一行。为了按行拆分您读入的文件，只需使用

```
input.split('\n') 
```

您的 randline 构造函数正在传递文件的内容，因此它在构造函数中尝试执行的操作没有意义。

对不起，如果这个答案似乎没有意义；我已经经历过并试图指出您需要解决的不同问题。我不能对东西发表评论，因为我没有声誉，所以我必须发布一个答案：。让我知道这是否有帮助！

* * *

如果没有替换，我会制作一个字典，将字符串作为键，将整数作为值。循环遍历所有输入文本，每次看到一行时，将其添加到字典中并增加相关的整数。然后，当您调用 chooseline 时，检查以确保您从随机行中获得的字符串的字典中的值大于 0。如果是，则减少相关值，然后返回您选择的字符串。否则，选择一个新行。

* * *

回复编辑 2.0：你可以这样做。然后，每次选择随机行时，都会将其从列表中删除。我认为那会奏效。

# nginx - PHP 5.4 + Nginx + APC = 502 网关错误？

> ID：10264881
> 
> 赞同：3
> 
> 时间：2012-04-22T03:04:45.707
> 
> 标签：nginx, apc, php

我最近升级到 PHP 5.4，一个月前，APC 不兼容，所以我降级回 PHP 5.3，一切正常，花花公子。但是，我想利用 PHP 5.4 的新功能，但我似乎无法让它与我当前的设置一起使用。据说，APC 现在与其最新的 beta 版本“兼容”，但是我收到以下错误：

[21-Apr-2012 22:56:53] 警告：[pool www] 子 12245 在信号 11 (SIGSEGV) 上退出 61.544928 秒后开始

[2012 年 4 月 21 日 22:56:51] 警告：[pool www] 子 12250 在信号 11 (SIGSEGV) 上退出 43.367441 秒后开始

等等等等

我的设置是：通过 php-fpm 加上 APC 的 nginx + php 5.4。如果我禁用 APC，一切正常（虽然速度很慢哈哈）。

我已经安装了 beta 版和主干版，但似乎都不起作用。我只是在所有页面上都收到 502 Bad Gateway 错误，除了 phpinfo(); 页面，效果很好。

我能做些什么？我到处都用谷歌搜索过。

# python - Python pairSum 函数与字典

> ID：10264883
> 
> 赞同：0
> 
> 时间：2012-04-22T03:05:06.810
> 
> 标签：python, class, function, sum, dictionary

我正在尝试编写一个函数pairSum（data，value），其中如果列表“data”包含两个总和等于“value”的不同数字，则该函数返回true。我使用列表完成了此操作，但有没有更有效的方法可以使用字典编写此函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T03:13:22.737

你可以试试用一套。

```
def pairSum(data, value):
  s = set()
  for i in data:
    if (value - i) in s:
      return True
    else:
      s.add(i)
  else:
    return False 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T03:18:17.563

```
from itertools import combinations

pairSum = lambda data, value: any(sum(i) == value for i in combinations(data, 2)) 
```

**编辑** Pedro Werneck 指出，对 a 的成员资格测试`set()`可能更有效：

```
pairSum = lambda data, value: value in set(sum(i) for i in combinations(data, 2)) 
```

**进一步编辑** 我接受了 Ignacio 的建议，并使用`timeit`. 结果如下：

对于所有测试，测试的功能与我在原始答案（上图）中发布的功能相同。

timeit 执行次数为 10,000

`data = range(100)`

```
测试值发电机组
```

```
         1 0.02824 10.84905
```

```
       101 0.66934 10.77293
```

```
       197 11.07062 10.73978
```

因此，结论似乎是生成器平均运行得更快，集合和生成器的最坏情况时间大致相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T03:23:29.400

不是字典，但您可以构建所有组合并检查您的值是否在该集合中。

```
import itertools

def pairSum(data, value):
    return value in set(map(sum, itertools.combinations(data, 2))) 
```

如果您的列表不包含零或负值，您可以只保留低于列表中目标的值，因为将相等或更高的值与列表中的任何其他值相加将不匹配：

```
import itertools

def pairSum(data, value):
    data = [v for v in data if v < value]
    return value in set(map(sum, itertools.combinations(data, 2))) 
```

# playframework - 如何在特定日期从模型中获取信息？

> ID：10264889
> 
> 赞同：-5
> 
> 时间：2012-04-22T03:06:00.587
> 
> 标签：playframework, playframework-1.x

我有一个 Book 模型，其中包含每本书的出版日期。我需要找到那些出版日期比今天早 1 个月的书。有什么办法吗？我写了下面的代码，但它把所有的书都拿给了我。有什么方法可以让我的代码在特定日期取书吗？

```
List<Book> book = Book.find("order by publishDate desc").fetch(); 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T07:26:39.030

由于您提供的信息很少，假设您的模型类称为提醒。

```
// Get date 1 month ago
Calendar calendar = Calendar.getInstance();
calendar.add( Calendar.MONTH ,  -1 );

List<Reminder> list = Reminder.find("lastupdate <= ?", calendar.getTime()); 
```

# c# - 将函数应用于类中的每个字段

> ID：10264891
> 
> 赞同：0
> 
> 时间：2012-04-22T03:06:27.080
> 
> 标签：c#

这是一个有趣的概念，我不知道如何实现。（它与我需要部署装饰器模式的大学作业有关）。

我在下面编写了粗略的 C# 代码，但是它不会编译，假设我有一个类

```
Class A {
   public int A { get; set; }
   public string B { get; set; }
   public float C { get; set; }

   public string concatFields() {
       string sample = null;
       foreach (Field f in this) {
           sample += f.ToString();
       }
       return sample;
   }
} 
```

你将如何实现 concatFields 方法？有没有办法遍历类的字段（不知道字段的名称）并在每个字段上调用 ​​ToString() 。

在示例 B 场景中，如果所有字段的类型相同，您将如何对它们应用相同的方法。

欢呼伙计们的帮助，我已经用 C# 标记了这个，但不确定可以应用哪些其他标记

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T03:17:55.187

您可以使用[反射](http://msdn.microsoft.com/en-us/library/ms173183%28v=vs.80%29.aspx)，遍历类的元数据，并通过反射 API 提取字段。显然，这是有代价的：使用反射比直接访问字段要慢；有时，相当多。但是，您当然可以做到。这是一个例子：

```
MyClass obj = new MyClass();
// Set fields in the obj...
var fields = typeof(MyClass).GetFields(System.Reflection.BindingFlags.GetField);
StringBuilder res = new StringBuilder();
foreach (FieldInfo f in fields) {
    var val = f.GetValue(obj);
    if (val != null) res.Append(val.ToString());
}
Console.WriteLine(res.ToString()); 
```

[`FieldInfo`](http://msdn.microsoft.com/en-us/library/system.reflection.fieldinfo.aspx)类公开了许多有用的属性，例如`Name`and `Type`，让您可以选择要在处理中包含哪些字段，以及要忽略哪些字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T03:11:58.433

将您的“字段”放入字典中。

以下是迭代字典的方法：[在 C# 中迭代​​字典的最佳方法是什么？](https://stackoverflow.com/questions/141088/what-is-the-best-way-to-iterate-over-a-dictionary-in-c)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T03:24:33.810

对于 .NET/C#，类型自省是通过[System.Reflection](http://msdn.microsoft.com/en-us/library/system.reflection.aspx)命名空间处理的。这允许您检索有关类型的信息，并动态调用编译时未知的方法。

> 你将如何实现 concatFields 方法？有没有办法遍历类的字段（不知道字段的名称）并在每个字段上调用 ​​ToString() 。

```
public string concatFields() {
   string sample = null; // a StringBuilder would be a better choice here
   foreach (FieldInfo f in this.GetType().GetFields()) {
       obj fieldValue = f.GetValue();
       if (fieldValue != null) sample += fieldValue.ToString();
   }
   return sample;
} 
```

> 在示例 B 场景中，如果所有字段的类型相同，您将如何对它们应用相同的方法。

如果您在编译时知道类型，则可以强制转换为：

```
foreach (FieldInfo f in this.GetType().GetFields()) {
    MyType myType = (MyType)f.GetValue();
    myType.MyMethod();
} 
```

或者，您可以通过反射动态调用：

```
foreach (FieldInfo f in this.GetType().GetFields()) {
    object fieldValue = f.GetValue();
    MethodInfo mi = fieldValue.GetType().GetMethod("MyMethod");
    mi.Invoke(fieldValue, null); // no parameters to MyMethod
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T03:30:41.983

我会这样做：

```
class A

{
    public int A { get; set; }
    public string B { get; set; }
    public float C { get; set; }

    public string[] concatFields()
    {
        var v = from f in this.GetType().GetFields() select f;
        IList<string> fields = new List<string>();
        foreach (var f in v)
        {
            fields.Add(f.GetValue(this).ToString());
        }
        return fields.ToArray<string>();
    }
} 
```

# jquery - jqueryUI悬停（幻灯片）一遍又一遍地重复

> ID：10264893
> 
> 赞同：0
> 
> 时间：2012-04-22T03:06:37.983
> 
> 标签：jquery, jquery-ui, slider, slide

我早些时候发布了一个关于让一些 div 变得可见并像纸一样向上滑动的问题，并且我在让我的 JQuery 代码始终如一地工作（或根本不工作）时遇到了问题。

我现在已经克服了这些问题，并且更多地进入了调整阶段。

我有一系列看起来像文件夹分隔符的 div。当悬停在每个单独的 div 上时，我想要一个单独的 div 像一张纸一样滑出。我在 JQueryUI 中使用了“幻灯片”功能来实现这种效果。在我的第一个版本中，我只有一张幻灯片，我发现即使将光标移开后，新的 div 仍然可见。然后我使用“隐藏”（首先是“显示”）添加了“幻灯片”功能的重复，以使工作表再次消失。这是我的代码：

```
 $("#artwork").hover(function () {
    $("#artwork-sheet").show("slide", { direction: "down" }, 1000);
    $("#artwork-sheet").hide("slide", { direction: "down" }, 1000);
});
$("#websites").hover(function () {
    $("#websites-sheet").show("slide", { direction: "down" }, 1000);
    $("#websites-sheet").hide("slide", { direction: "down" }, 1000);
});
$("#threedmodels").hover(function () {
    $("#threedmodels-sheet").show("slide", { direction: "down" }, 1000);
    $("#threedmodels-sheet").hide("slide", { direction: "down" }, 1000);
});
$("#games").hover(function () {
    $("#games-sheet").show("slide", { direction: "down" }, 1000);
    $("#games-sheet").hide("slide", { direction: "down" }, 1000);
});
$("#movies").hover(function () {
    $("#movies-sheet").show("slide", { direction: "down" }, 1000);
    $("#movies-sheet").hide("slide", { direction: "down" }, 1000);
});
$("#flash").hover(function () {
    $("#flash-sheet").show("slide", { direction: "down" }, 1000);
    $("#flash-sheet").hide("slide", { direction: "down" }, 1000);
});
$("#info").hover(function () {
    $("#info-sheet").show("slide", { direction: "down" }, 1000);
    $("#info-sheet").hide("slide", { direction: "down" }, 1000);
}); 
```

初始行为是正确的；但是，无论我的光标是在 div 上还是继续移动（激活后），工作表似乎都会随机出现和消失很多次。

我的猜测是，有一种更好的方法可以让 div 在悬停事件之后隐藏自己。有人可以帮助或指出正确的方向吗？

如果您想查看更多内容，请查看原始问题： [jquery slideUp/Down 函数仅适用于带有 firebug 的 firefox；另外，悬停功能似乎不起作用](https://stackoverflow.com/questions/10260022/jquery-slideup-down-functions-only-work-in-firefox-with-firebug-also-hover-fun/)

谢谢，

艾伦

* * *

“评论”块内没有足够的空间来提供有用的回复。

（回复＃1）对不起，这对我不起作用。slideDown 正是我不想要的——我希望元素看起来是从下往上暴露的，而 slideDown 让它看起来是从上到下的。此外，速记根本不起作用。在悬停状态期间没有任何变化。这与我在第一个发布的问题中所述的问题类型相同。

然后我尝试使用带有逗号的“正确”语法，这似乎有效（呸，在我完成这篇文章/评论之前发现了一个错字）。

关于为什么速记版本不起作用的任何想法？

我刚刚剪切并粘贴到我的文档中并注释掉了原件，但响应为零。

谢谢大家的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T04:10:25.923

首先，无需一遍又一遍地不断重复，将所有这些简化为一个 jQuery 选择变量，然后将“-sheet”添加到它。接下来，您将显示和隐藏在同一个函数中，使用 .hover 语法正确，两个函数用逗号分隔。也使用 .slideDown() 因为它是更干净的 jQuery。:)

```
$(function(){
    var $hoverbuttons = $('#artwork, #websites, #threedmodels, #games, #movies, #flash, #info')
    $hoverbuttons.hover(function(){
        $(this + '-sheet').slideDown(1000);
    },function(){
        $(this + '-sheet').slideDown(1000);
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T04:26:15.790

请参阅此处的悬停语法[http://api.jquery.com/hover/](http://api.jquery.com/hover/)您需要在两个操作之间添加逗号（，），最好将它们写在官方文档中给出的函数中

# sql-server - 在 Windows 7 Professional 上安装期间，Sql Server 2005 报告服务被禁用

> ID：10264896
> 
> 赞同：0
> 
> 时间：2012-04-22T03:07:04.060
> 
> 标签：sql-server, sql-server-2005

对于我们的项目，我们需要 sql server 2005 报告服务。当我尝试安装 sql server 2005 时，我可以看到报告服务，但它被禁用了。

我尝试了所有设置，例如在“打开/关闭 Windows 功能”中启用某些组件

1）互联网信息服务。

2）开放万维网服务。

3) 应用程序开发功能。

4) ASP.NET

由于我的系统是 64 位的，所以我也执行了这个脚本

cscript %SYSTEMDRIVE%\inetpub\adminscripts\adsutil.vbs SET W3SVC/AppPools/Enable32bitAppOnWin64 0

尽管报告服务仍处于禁用状态

请帮忙，我需要做任何其他设置吗

我发现 sql server 2008 报告服务在我的系统中运行良好，但是我们现有的项目模块被配置为在 IIS 上寻找一些 sql server 2005 报告文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T07:34:14.223

我终于找到了解决方案，

由于我需要首先在我的系统上安装 32 位报告服务，我们需要删除已安装在系统中的现有 64 位报告服务。

“卸载同一台计算机上的任何 64 位报表服务器实例。在 64 位计算机上，您无法运行 64 位和 32 位 Reporting Services 实例。如果您有现有的 64 位 Reporting Services 安装，运行安装程序将其卸载。”

一旦完成

运行这个脚本

cscript %SystemDrive%\inetpub\AdminScripts\adsutil.vbs 设置 w3svc/AppPools/Enable32bitAppOnWin64 1

然后去IIS（即inetmgr）

选择 ApplicationPool 并在右侧选择“SetDefaultApppoolDefaults”并将“Enable32bitApplication 设置为 True”

现在您可以在安装过程中看到报告服务选项

我遇到了问题，因为我的系统中已经存在 sqlserver2008 报告服务，因为它是 64 位的，我不允许我安装 2005 32 位报告服务

谢谢

# mysql - 对设置 SQL 感到困惑

> ID：10264897
> 
> 赞同：-2
> 
> 时间：2012-04-22T03:07:21.333
> 
> 标签：mysql, sql, xampp

我需要为课堂作业运行一些基本的 SQL 代码，但在设置工作环境时遇到了麻烦。我在我的 Ubuntu 机器上下载了 xampp，但我还需要下载什么才能使其工作？如何创建 SQL 文档并实际运行它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T03:15:53.790

您可以使用 **phpMyAdmin**进行练习。在那里创建数据库并练习。

您可以通过在浏览器中输入**http://localhost/phpmyadmin来访问它**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T03:20:41.660

您可以针对一些在线数据库编写 SQL 并对其进行测试，而无需设置本地环境。

[http://sqlzoo.net/](http://sqlzoo.net/)

[http://www.w3schools.com/sql/sql_tryit.asp](http://www.w3schools.com/sql/sql_tryit.asp)

# android - Android NDK 适用于 Android 或需要自定义 android

> ID：10264898
> 
> 赞同：0
> 
> 时间：2012-04-22T03:07:48.493
> 
> 标签：android, android-ndk

我对 NDK 的功能有点困惑，我是否必须用我的 NDK 代码重新打包 android，或者使用 Android sdk 开发的任何代码都可以使用 NDK 扩展自身，这意味着代码可以编译并且可以在任何合适的平台上运行（取决于 sdk 的 api) android 设备。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T03:16:09.417

您将本机代码添加到使用 SDK 开发的现有应用程序中。您使用 NDK 构建本机代码，然后使用 SDK 构建整个应用程序 - 这将打包并包含 NDK 构建的库。

然后，该应用程序可以在与其兼容的任何设备上使用，就 Android API 级别或您为其编译本机代码的架构而言。

# apache - 如何在一个ip地址下在apache上设置多个主机

> ID：10264900
> 
> 赞同：0
> 
> 时间：2012-04-22T03:08:37.603
> 
> 标签：apache, ip, host

我想知道是否可以在 apache 服务器（在我的 centOs 服务器上运行）的一个 IP 地址下设置多个主机（网站）。问题是，我还没有域名，只能使用一个 IP 地址。

我尝试使用“在不同的端口上运行不同的站点”。此处发布的示例（http://httpd.apache.org/docs/2.0/vhosts/examples.html），但不知何故它不起作用（返回“页面加载时与服务器的连接已重置。” on我的火狐）。

这是我的虚拟主机配置：

听 80

听8080

名称虚拟主机 216.244.92.76:80

名称虚拟主机 216.244.92.76:8080

```
<VirtualHost 216.244.92.76:80>

  DocumentRoot "/home/web/shop"
  ServerName my.cellphone.com

  <Directory "/home/web/shop">
     Options All
     AllowOverride All
     Order deny,allow
  </Directory>

</VirtualHost>

<VirtualHost 216.244.92.76:8080>
  DocumentRoot "/home/web/pelangi"
  ServerName my.pinkie.com

  <Directory "/home/web/pelangi">
     Options All
     AllowOverride All
     Order deny,allow
  </Directory>
</VirtualHost> 
```

我在这里做错了吗？还是无法通过使用不同的端口在一个 IP 地址下设置多个主机（注意我还没有域名）？

任何帮助是极大的赞赏。

非常感谢。

最良好的问候，

汤米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T03:24:45.157

正如您所描述的，它可以使用不同的主机名或 IP:PORT 来完成。我看不出你的虚拟主机设置有什么问题。但是，我的问题是关于 a.) 防火墙，b:) ISP 端口阻塞等。您是否尝试过使用[http://localhost](http://localhost)和[http://localhost:8080](http://localhost:8080)而不是您的 IP 地址？

另外，您是否有一个正在转发这些端口的路由器？它适用于一个而不是另一个？有时这是我们忽略的非常简单的事情。

麦克风

# python - 在 Flask 中捕获错误，但正常继续请求

> ID：10264905
> 
> 赞同：2
> 
> 时间：2012-04-22T03:10:04.810
> 
> 标签：python, flask

我已经阅读了文档并用谷歌搜索了我的问题，但我似乎无法找到一种方法来处理 Flask 中的错误，而无需终止请求并显示错误页面。

我要处理的错误是`werkzeug.exceptions.RequestEntityTooLarge`文件上传超过指定限制时引发的错误。理想情况下，我希望能够在`flask.request.files`字典中添加一个元素，指示上传的文件超过了最大上传大小。然后可以在原始表单中显示错误，以便用户可以重试。

这在 Flask 中是否可行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T15:36:39.993

我想这可能是不可能的。

服务器不可能接收整个请求，因为一旦超过 max_content_length 阈值，它就必须终止连接，丢弃文件上传后发送的任何其他表单数据。服务器使用 HTTP 413 状态代码重置连接。虽然看起来可以注册一个函数来处理 HTTP 413 错误（并且可能返回一个自定义错误页面），但这在 Flask 中不起作用。我认为这是一个错误。

# c# - wpf中的swf动画

> ID：10264909
> 
> 赞同：1
> 
> 时间：2012-04-22T03:11:35.713
> 
> 标签：c#, wpf, animation, flash

我有一个 swf 动画，我想在 wpf 应用程序中使用它。我知道我可以使用 webBrowser 控件，但该控件具有白色背景。结果，如果我将该动画放在图像顶部，例如会出现白色背景。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T03:36:14.490

我不知道你的 SWF 有多复杂，但你可以试试[这个](http://www.mikeswanson.com/swf2xaml/)SWF 到 WPF 转换器。根据示例，它似乎工作得很好，它可以让您完全避免使用 a 的需要`WebBrowser`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T03:16:52.317

简短的回答是，`WebBrowser`控件本质上是您唯一的选择。不过，我怀疑您是否能够使用它来实现您想要的结果，因为该`WebBrowser`控件实际上是托管在 GDI 层上的 Winforms 控件，因此 WPF 效果（例如透明度）将不可用。

# javascript - 延迟 Internet Explorer 注意到 location.hash 的变化

> ID：10264911
> 
> 赞同：3
> 
> 时间：2012-04-22T03:11:53.410
> 
> 标签：javascript, internet-explorer

这可能是常识，但我似乎无法找到有关该问题的任何信息。这里有一点背景：

我有一些使用 Bootstrap 的标签系统的页面。在`$(document).ready()`这些页面的函数中，有一些基本代码可以根据 URL 中的哈希值激活选项卡，还有一个附加到选项卡显示的函数的简短函数，该函数用`location.replace`. 结果是您可以链接到特定标签，并且刷新页面也可以让您保持在当前选项卡上。这在除 Internet Explorer 之外的所有内容中都可以正常工作。

在 Internet Explorer 中（我一直在使用 IE9 进行测试），在 IE 识别位置哈希已更改之前似乎有延迟（大约 10-15 秒）。当在地址栏中手动输入哈希并加载页面时，也会发生类似的事情——需要几次刷新才能识别。单击其中嵌入哈希的链接似乎可以正常加载。

我假设这是某种故障。我想我可以将一个 cookie 附加到处理持久选项卡状态的代码中，但是有没有其他人找到一种更优雅的方式来处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T17:00:10.027

我不熟悉或不知道 Bootstrap 的选项卡系统有任何延迟，您可能需要验证问题不是由于您的特定用途或计算机造成的。我无法在我熟悉的任何浏览器上使用 jQuery hashchange 插件产生任何延迟。

至于处理基于哈希的导航的其他方法，我编写了以下内容以使用 jQuery hashchange 插件更改 hashchange 事件的内容/页面；主要是为了干净地支持带有哈希的后退/前进/链接。我关注的是我正在使用的精简版本。

该示例提供了一个锚链接，并使用 onclick 事件生成。首选使用 onclick 事件，因为如果用户单击当前活动的选项卡，页面仍会重新加载。跟踪页面加载时间以确保页面在 100 毫秒内未加载两次。

jQuery 哈希插件：[http ://benalman.com/projects/jquery-hashchange-plugin/](http://benalman.com/projects/jquery-hashchange-plugin/)

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="http://benalman.com/code/projects/jquery-hashchange/jquery.ba-hashchange.js"></script>
<script>
var hashUris = [];
var tabSet;
var actPage = '';
// bare tab array (use to populate tab html and hash array)
tabSet = [{hash: 'page1', pageId:1, id: 1}, {hash: 'page10', pageId:10, id:2 }, {hash: 'page20' , pageId: 20, id: 3}];

// handles the hash events
$(function() {
    // loop all tab array, add items to hash array, determine primary page and active page
    $.each(tabSet, function(i, tab) {
        // using tabIndex to prevent looping hash array later
        tab.tabIndex = i;
        // first tab is primary by default
        if (typeof priTabId == 'undefined') priTabId = tab.id;
        // add tabs/page info to hash array
        hashUris.push({hash: tab.hash, pageId: tab.pageId, tabIndex: i, tabId: tab.id, priActive: priTabId == tab.id});
        // initial page to be loaded
        if (priTabId == tab.id) priTabIndex = i;
        // current hash
        if (location.hash && '#'+tab.hash == location.hash) activeTabIndex = i;
    });
    if (!location.hash && !actPage && typeof priTabIndex != 'undefined') {
        // page load, load primary tab
        loadTabPage(priTabIndex);
    } else if (location.hash && !actPage && typeof activeTabIndex != 'undefined') {
        // page refresh
        loadTabPage(activeTabIndex);
    }
    $(window).hashchange( function(){
        if (location.hash) {
            $.each(hashUris, function(index, hashUri) {
                if ('#'+hashUri.hash == location.hash && actPage != hashUri.pageId + '#' + hashUri.hash) {
                    // found matching tab/page
                    loadTabPage(hashUri.tabIndex);
                }
            });
        } else if (actPage) {
            // navigated to empty space, attempt to find a primary active page
            $.each(hashUris, function(index, hashUri) {
                if (hashUri.priActive) loadTabPage(hashUri.tabIndex);
            });
        }
    });
});
function loadTabPage(tabIndex) {
    if (typeof tabSet[tabIndex] == 'undefined') return;

    // track when the page was loaded
    lastLoad = tabSet[tabIndex].lastLoad;
    tabSet[tabIndex].lastLoad = new Date().getTime();
    // load only once in 1ms-100ms
    if (tabSet[tabIndex].lastLoad - lastLoad < 100) return;

    // load page content/do actions here
    alert(tabSet[tabIndex].pageId);
    //$("#content").load('?pageId='+tabSet[tabIndex].pageId);

    // active page checked against hash during hashchange
    actPage = tabSet[tabIndex].pageId + '#' + tabSet[tabIndex].hash;
};
// user code to create tabs 
$(function() {
    // use tabs array to display some tabs
    // this depends on the above code to set .tabIndex on the tabSet array
    tabsObj = $('<div/>');
    $.each(tabSet, function(i, tab) {
        if (!tab.hash) return true;
        tmpObj = $('<span>'+tab.hash+'</span>');
        tmpObj.data('tabIndex', tab.tabIndex);

        // use an onclick event to change the page
        tmpObj.bind('click', function(e) {
            if (typeof $(this).data('tabIndex') == 'undefined' || typeof tabSet[$(this).data('tabIndex')] == 'undefined') return;

            // load page directly if active hash, otherwise change to clicked hash
            if ('#'+tabSet[$(this).data('tabIndex')].hash == location.hash) {
                loadTabPage($(this).data('tabIndex'));
            } else {
                location.hash = tabSet[$(this).data('tabIndex')].hash;
            }
            e.stopPropagation();
            return false;
        });
        tmpObj.appendTo(tabsObj);
        delete tmpObj;
    });
    tabsObj.appendTo($("#tabs"));
    delete tabsObj;
});
</script>
<div id="tabs"><a href="#page1" >Link to Hash</a></div>
<div id="content"></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-24T13:16:38.657

一些运行 IE8 的客户刚刚遇到这个问题。我们有一个运行 sammy.js + knockout 和 bootstrap 的网页。每条路线（带有哈希的链接）大约需要 800-900 毫秒才能导航到。但是，当我从页面中删除所有 css/样式时，每个路线导航需要大约 30 毫秒。

# asp.net-mvc - 在 MVC 3 中首先使用实体 框架代码

> ID：10264913
> 
> 赞同：1
> 
> 时间：2012-04-22T03:12:57.787
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework, code-first

我对此很陌生，我真的很想在这个问题上得到一些帮助：

首先我已经有一个数据库，比如说我在这个数据库中有 3 个表：User、UserMapping、UserRole。我生成了一个具有 3 类的模型，如下所示：

```
public  class user
{
        public int UserID { get; set; }
        public string UserName { get; set; }

        public virtual ICollection<UserMapping> UserMappings { get; set; }
}

   public class UserMapping
    {
        public int UserMappingID { get; set; }
        public int UserID { get; set; }
        public int UserRoleID { get; set; }

        public virtual User User { get; set; }
        public virtual UserRole UserRole { get; set; }

    }

  public class UserRole
    {
        public int UserRoleID { get; set; }
        public string RoleName { get; set; }

        public virtual ICollection<UserMapping> UserMappings { get; set; }

    } 
```

我想创建一个新用户，并为新用户添加一个用户角色。用户和用户角色没有直接关系。我想创建一个视图来创建一个新用户，使用具有强类型的用户模型类。如何在此视图中为用户创建用户角色？

请帮忙...！非常感谢您提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T03:26:25.590

您不需要自己创建 UserMapping 实体。因为当您指定 User 和 UserRole 之间的多对多关系时，EF 会自动`UserUserRole`为您创建关系表关系表。

```
 public  class User
     {
        public int UserID { get; set; }
        public string UserName { get; set; }

        public virtual ICollection<UserRole> UserRoles{ get; set; }
     }

  public class UserRole
    {
        public int UserRoleID { get; set; }
        public string RoleName { get; set; }

        public virtual ICollection<User> Users { get; set; }

    } 
```

然后你可以将关系表映射到现有的，

```
protected override void OnModelCreating(ModelBuilder modelBuilder)
{

modelBuilder.Entity<User>().HasMany(u => u.UserRoles)
            .WithMany(r => r.Users )
            .Map(m =>
            {
                m.MapLeftKey("UserID");
                m.MapRightKey("UserRoleID");
                m.ToTable("YourExistinegTableName");
            });

} 
```

# mysql - mysql复杂加入

> ID：10264918
> 
> 赞同：0
> 
> 时间：2012-04-22T03:14:11.350
> 
> 标签：mysql

我有一个由 7 个表组合而成的 select 语句

```
SELECT * (//instead of * i put in my code the proper columns i need from the selected tabls)
FROM 
ev_events_eve
LEFT JOIN ev_events_multilang_evmulti ON ev_events_multilang_evmulti.event_evmulti = ev_events_eve.id_eve
LEFT JOIN ev_schedule_sch ON ev_schedule_sch.event_id_sch = ev_events_eve.id_eve
LEFT JOIN ev_events_type_et ON ev_schedule_sch.event_type_id_sch = ev_events_type_et.id_et
LEFT JOIN ev_events_type_multilang_etmulti ON ev_events_type_multilang_etmulti.idevent_type_etmulti = ev_events_type_et.id_et
LEFT JOIN ev_schedule_multilang_schmulti ON ev_schedule_multilang_schmulti.id_schedule_schmulti = ev_schedule_sch.id_sch
LEFT JOIN ev_timetable_tt ON ev_timetable_tt.schedule_id_tt = ev_schedule_sch.id_sch AND ev_timetable_tt.event_id_tt = ev_events_eve.id_eve
WHERE (ev_events_eve.active_eve = 1 AND ev_schedule_multilang_schmulti.iso_code_lang_schmulti = '{$current_language}' AND ev_schedule_sch.active_sch = 1) AND
ev_timetable_tt.end_date_tt > CURDATE() OR (ev_timetable_tt.weekday_tt = DAYNAME(CURDATE()) AND ev_timetable_tt.end_date_tt > CURDATE()) OR ev_timetable_tt.specific_date_tt > CURDATE()
ORDER BY ev_timetable_tt.start_date_tt ASC LIMIT 3 
```

该语句忽略where子句的问题，每次我使用mysql时，我都使用创建示例sql语句由两个或三个具有正常左连接或内连接的表组成，我需要有人与我讨论这个问题，它可能会让我进一步查看我的代码中没有提到的东西，但是我知道上面的代码不足以让任何人与我一起处理这个问题，但我需要有人可以与我讨论

**我用以下信息更新了问题**

主要业务规则：

*   该项目适用于多语言网站

*   这些表格是：
    *   `ev_events_eve`（整个事件的事件实体，如 id、徽标、标语、开始和结束日期）
        *   `ev_events_multilang_evmulti`（主事件表的多语言表，如名称（en、fr、gr .. 等）、描述...等）
        *   `ev_schedule_sch`（调度实体，如 id，事件表的外键）
        *   `ev_schedule_multilang_schmulti`（主日程表的多语言表）
        *   `ev_timetable_tt`（存储与 ev_schedule_sch 表相关的开始和结束日期和时间）

*   每个表都被复制到两个表中，其中一个用于存储实体，另一个用于存储多语言数据

*   表之间的关系
    *   主表是 ev_events_eve
    *   `ev_events_multilang_evmulti`通过外键与主表相关
    *   `ev_schedule_sch related`通过外键到主表
    *   `ev_schedule_multilang_schmulti``ev_schedule_sch`通过外键与表相关
    *   `ev_timetable_tt``ev_schedule_sch`通过外键关联

我需要编写一个语句来从事件表中检索传入的 3 行（假设我需要检索最新的 3 行，因为您没有所有字段的完整架构，稍后我们可以在 WHERE 子句中讨论： ) ) 加上这 3 行还从日程表中检索 6 行，这些行与事件表中的每一行相关所以估计结果必须是这样的假设我有 4 个事件

*   **第一个被称为：事件#1**
    *   *此事件在时间表相关表中有 3 行（因此检索
        所有这些行）*

*   **第二个被称为：事件#2**
    *   *这在计划相关表中有 11 行（仅从中检索 6 行）*

*   **第三个被称为：事件#3**
    *   *此事件在日程相关表中没有任何与其相关的行*

*   **第 4 个被称为：事件#4**
    *   *此事件在日程相关表中只有 1 行与之相关*

**如上所述，我只需要检索日程表中的前 3 个事件和相关事件**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T12:27:00.127

我只是猜测问题出在查询的`OR`部分。我只是在查询中更改了这一部分：

```
AND ( 
ev_timetable_tt.end_date_tt > CURDATE() 
OR (ev_timetable_tt.weekday_tt = DAYNAME(CURDATE()) AND ev_timetable_tt.end_date_tt > CURDATE()) 
OR ev_timetable_tt.specific_date_tt > CURDATE()
) 
```

可能您想这样做：（我给出了别名以使其更具可读性）

```
SELECT * 
FROM ev_events_eve e
LEFT JOIN ev_events_multilang_evmulti eml ON eml.event_evmulti = e.id_eve
LEFT JOIN ev_schedule_sch es ON es.event_id_sch = e.id_eve
LEFT JOIN ev_events_type_et et ON es.event_type_id_sch = et.id_et
LEFT JOIN ev_events_type_multilang_etmulti emel ON emel.idevent_type_etmulti = et.id_et
LEFT JOIN ev_schedule_multilang_schmulti ems ON ems.id_schedule_schmulti = es.id_sch
LEFT JOIN ev_timetable_tt ett ON ett.schedule_id_tt = es.id_sch AND ett.event_id_tt = e.id_eve
WHERE (e.active_eve = 1 AND ems.iso_code_lang_schmulti = '{$current_language}' AND es.active_sch = 1) 
AND 
(
    ett.end_date_tt > CURDATE() 
OR (ett.weekday_tt = DAYNAME(CURDATE()) AND ett.end_date_tt > CURDATE()) 
OR ett.specific_date_tt > CURDATE()
)
ORDER BY ett.start_date_tt ASC
LIMIT 3 
```

如果您更喜欢语法（没有表别名）：

```
SELECT * (//instead of * i put in my code the proper columns i need from the selected tabls)
FROM 
ev_events_eve
LEFT JOIN ev_events_multilang_evmulti ON ev_events_multilang_evmulti.event_evmulti = ev_events_eve.id_eve
LEFT JOIN ev_schedule_sch ON ev_schedule_sch.event_id_sch = ev_events_eve.id_eve
LEFT JOIN ev_events_type_et ON ev_schedule_sch.event_type_id_sch = ev_events_type_et.id_et
LEFT JOIN ev_events_type_multilang_etmulti ON ev_events_type_multilang_etmulti.idevent_type_etmulti = ev_events_type_et.id_et
LEFT JOIN ev_schedule_multilang_schmulti ON ev_schedule_multilang_schmulti.id_schedule_schmulti = ev_schedule_sch.id_sch
LEFT JOIN ev_timetable_tt ON ev_timetable_tt.schedule_id_tt = ev_schedule_sch.id_sch AND ev_timetable_tt.event_id_tt = ev_events_eve.id_eve
WHERE (ev_events_eve.active_eve = 1 AND ev_schedule_multilang_schmulti.iso_code_lang_schmulti = '{$current_language}' AND ev_schedule_sch.active_sch = 1) 
AND ( 
ev_timetable_tt.end_date_tt > CURDATE() 
OR (ev_timetable_tt.weekday_tt = DAYNAME(CURDATE()) AND ev_timetable_tt.end_date_tt > CURDATE()) 
OR ev_timetable_tt.specific_date_tt > CURDATE()
)
ORDER BY ev_timetable_tt.start_date_tt ASC LIMIT 3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T12:38:40.583

将`LEFT JOIN`s 与需要在ed的那些表中`WHERE`的非值的条件结合使用，违背了使用 a 的目的。您要么必须在条件中指定值可以是，要么使条件成为.`NULL``LEFT JOIN``LEFT JOIN``WHERE``[whatever] OR NULL``WHERE``ON``JOIN`

例如：

```
... WHERE ... (ev_schedule_sch.active_sch = 1 OR ev_schedule_sch.active_sch IS NULL) ... 
```

或者

```
... LEFT JOIN ev_schedule_sch ON ev_schedule_sch.event_id_sch = ev_events_eve.id_eve AND ev_schedule_sch.active_sch = 1 ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T13:06:43.743

首先，我也相信你在 where 子句中的日期标准应该被包装起来以封装它。如果不是，则应用第一部分，然后在第一个“OR”合格后立即完全忽略它。下一个。您有许多 LEFT JOIN，这意味着只要左侧的记录是合格的，右侧表中的记录只有 OPTIONAL。但是，一旦您将条件添加到 WHERE 子句中针对所述右侧表，它就会抛出“LEFT”资格。您应该将该条件移动到 LEFT JOIN 条件而不是 where 子句中（正如我已调整的那样）。

您的原始查询略微清理，使用别名并更正日期条件的括号，这样您就不会得到错误的结果，但通过 WHERE 子句将其转换为 NORMAL INNER 连接显示为隐含。

```
SELECT *
   FROM 
      ev_events_eve EE

         LEFT JOIN ev_events_multilang_evmulti ELANG 
            ON EE.id_eve = ELANG.event_evmulti

         LEFT JOIN ev_schedule_sch SCHED 
            ON EE.id_eve = SCHED.event_id_sch

            LEFT JOIN ev_events_type_et ETYPE
               ON SCHED.event_type_id_sch = ETYPE.id_et

               LEFT JOIN ev_events_type_multilang_etmulti ETMLANG 
                  ON ETYPE.id_et = ETMLANG.idevent_type_etmulti

            LEFT JOIN ev_schedule_multilang_schmulti SMS 
               ON SCHED.id_sch = SMS.id_schedule_schmulti

            LEFT JOIN ev_timetable_tt TIMET 
               ON SCHED.id_sch  = TIMET.schedule_id_tt
              AND EE.id_eve = TIMET.event_id_tt

   WHERE 
          (   EE.active_eve = 1 
          AND SMS.iso_code_lang_schmulti = '{$current_language}' 
          AND SCHED.active_sch = 1 ) 
      AND (      TIMET.end_date_tt > CURDATE() 
            OR (    TIMET.weekday_tt = DAYNAME(CURDATE()) 
                AND TIMET.end_date_tt > CURDATE()) 
            OR TIMET.specific_date_tt > CURDATE() )
   ORDER BY 
      TIMET.start_date_tt ASC LIMIT 3 
```

这是调整后的查询以保留各自的 LEFT JOIN，请注意放置条件的位置的差异。

```
SELECT *
   FROM 
      ev_events_eve EE

         LEFT JOIN ev_events_multilang_evmulti ELANG 
            ON EE.id_eve = ELANG.event_evmulti

         LEFT JOIN ev_schedule_sch SCHED 
            ON EE.id_eve = SCHED.event_id_sch
           AND SCHED.active_sch = 1

            LEFT JOIN ev_events_type_et ETYPE
               ON SCHED.event_type_id_sch = ETYPE.id_et

               LEFT JOIN ev_events_type_multilang_etmulti ETMLANG 
                  ON ETYPE.id_et = ETMLANG.idevent_type_etmulti

            LEFT JOIN ev_schedule_multilang_schmulti SMS 
               ON SCHED.id_sch = SMS.id_schedule_schmulti
              AND SMS.iso_code_lang_schmulti = '{$current_language}' 

            LEFT JOIN ev_timetable_tt TIMET 
               ON SCHED.id_sch  = TIMET.schedule_id_tt
              AND EE.id_eve = TIMET.event_id_tt
              AND (      TIMET.end_date_tt > CURDATE() 
                    OR (    TIMET.weekday_tt = DAYNAME( CURDATE() ) 
                        AND TIMET.end_date_tt > CURDATE() ) 
                    OR TIMET.specific_date_tt > CURDATE()    )
   WHERE 
      EE.active_eve = 1 
   ORDER BY 
      TIMET.start_date_tt ASC LIMIT 3 
```

最后一点。您的 ORDER BY 引用了“ev_TimeTable_tt”（别名为 TIMET）表，这对我来说意味着您总是希望在此表中只找到明确的匹配项。如果是这样，这实际上应该是 INNER JOIN 而不是 LEFT JOIN。

由于进入“EV_TIMETABLE_TT”表需要从调度表中查找，我希望这也是 INNER JOIN 要求。

因此，随着 LEFT vs INNER join 的澄清，您可能需要调整这些组合。不知道你的数据，我真的无法进一步指导。

# jquery - jQuery AJAX 成功

> ID：10264929
> 
> 赞同：15
> 
> 时间：2012-04-22T03:16:54.547
> 
> 标签：jquery, ajax

我正在使用 jQuery 的`$.ajax`函数来提交一个表单，这很有效，但成功是我遇到问题的地方。这是我的代码：

```
$("#form").submit(function () {
        $.ajax({
            type: "POST",
            url: '/login/spam',
            data: formData,
            success: function (dataCheck) {
                if (dataCheck == 'value') {
                     //Do stuff
                }
            }
        });
        return false;
    }); 
```

我遇到的问题是`if`函数一直说 dataCheck 不等于*value*。我知道确实如此，因为当我删除页面时，按预期`return false;`显示*value 。*另外，我以前使用过几乎相同的代码，它可以工作。有人可以给我一些建议吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-22T03:18:52.710

如何自己找到答案：

放置调试代码以查看您从服务器获得的内容。

```
$("#form").submit(function () {
        $.ajax({
            type: "POST",
            url: '/login/spam',
            data: formData,
            success: function (dataCheck) {
                console.log(dataCheck); // <==============================
                if (dataCheck == 'value') {
                     //Do stuff
                }
            }
        });
        return false;
    }); 
```

它的格式可能与您想象的不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T03:24:16.857

如果您想阻止默认行为（在这种情况下是正常的表单提交），请使用[preventDefault](http://api.jquery.com/event.preventDefault/) over `return false`；即使在上面 return false 语句的脚本中存在问题，preventDefault 也会起作用。

下面的代码应该可以正常工作。

```
$("#form").submit(function(e) {
   e.preventDefault();
    $.ajax({
        type: "POST",
        url: '/login/spam',
        data: formData,
        success: function (dataCheck) {
            if (dataCheck == 'value') {
                 //Do stuff
            }
        }
    });    
}); 
```

正如 gdoron 提到的，使用 console.debug/alert 来查看变量中的值。使用 firebug Net tab / fiddler 将帮助您了解您从服务器页面获得的响应。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T03:25:59.273

真奇怪。我的建议是你可以在 firefox 或其他东西（例如 chrome 中的开发工具）中使用 firebug 来查看 xhr 响应。

而且我认为错误的结果可能是由错误类型的 xhr 响应（例如带有 html 标记的 '749afa42e6621f10bae17ee00cb1f4de' 信封）或未修剪的某些空间引起的。

可以帮助你:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-11T11:56:43.510

我知道可能已经晚了，但是我今天遇到了同样的问题，问题是正确的字符串返回成功，但是由于某种原因，它前面有一个额外的换行符。在本地这并没有发生，但是当我把它放到网上时，总是在返回的字符串中添加一个换行符（在你的情况下是 dataCheck）。我使用 substr() 函数在最后去掉了换行符，从那以后它工作得很好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-16T06:53:53.487

if(response.indexOf("success")!=-1){ } 试试这个方法 indexOf()

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-21T12:26:39.597

我想那`dataCheck`是一个**String**。然后使用`localeCompare()`

```
if (dataCheck.localeCompare('value') == 0) {
    //Do stuff
} 
```

*   如果 str1 在之前排序，则返回**-1**`str2`
*   如果两个字符串相等则返回**0**
*   如果排序后返回**1**`str1``str2`

# python - 使用带有口音和不同字符的美丽汤

> ID：10264937
> 
> 赞同：4
> 
> 时间：2012-04-22T03:18:48.913
> 
> 标签：python, unicode, beautifulsoup, python-2.7

我正在使用 Beautiful Soup 来吸引过去奥运会的奖牌获得者。在某些赛事和运动员姓名中使用口音会让人感到不安。我在网上看到过类似的问题，但我是 Python 新手，无法将它们应用到我的代码中。

如果我打印我的汤，口音看起来很好。但是当我开始解析汤（并将其写入 CSV 文件）时，重音字符会变得乱码。'Louis Perrée' 变成 'Louis Perr√©e'

```
from BeautifulSoup import BeautifulSoup
import urllib2

response = urllib2.urlopen('http://www.databaseolympics.com/sport/sportevent.htm?sp=FEN&enum=130')
html = response.read()
soup = BeautifulSoup(html)

g = open('fencing_medalists.csv','w"')
t = soup.findAll("table", {'class' : 'pt8'})

for table in t:
    rows = table.findAll('tr')
    for tr in rows:
        cols = tr.findAll('td')
        for td in cols:
            theText=str(td.find(text=True))
            #theText=str(td.find(text=True)).encode("utf-8")
            if theText!="None":
                g.write(theText)
            else: 
                g.write("")
            g.write(",")
        g.write("\n") 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T04:58:47.463

如果您正在处理 unicode，请始终将从磁盘或网络读取的响应视为字节包而不是字符串。

CSV 文件中的文本可能是 utf-8 编码的，应该先解码。

```
import codecs
# ...
content = response.read()
html = codecs.decode(content, 'utf-8') 
```

您还需要将 unicode 文本编码为 utf-8，然后再将其写入输出文件。用于`codecs.open`打开输出文件，指定编码。它将透明地为您处理输出编码。

```
g = codecs.open('fencing_medalists.csv', 'wb', encoding='utf-8') 
```

并对字符串编写代码进行以下更改：

```
 theText = td.find(text=True)
    if theText is not None:
        g.write(unicode(theText)) 
```

**编辑：** BeautifulSoup 可能会[自动进行 unicode 解码](https://stackoverflow.com/a/7873585/1897)，因此您可以跳过`codecs.decode`on 响应。

# recursion - Clojure 从递归调用返回值

> ID：10264941
> 
> 赞同：0
> 
> 时间：2012-04-22T03:19:55.107
> 
> 标签：recursion, clojure

我正在研究 Clojure 算法来解决这里提出的问题：http: [//spin.atomicobject.com/2011/05/31/use-clojure-to-move-drugs-a-programming-challenge/](http://spin.atomicobject.com/2011/05/31/use-clojure-to-move-drugs-a-programming-challenge/)我'我遇到了麻烦。

我正在使用递归算法（可能不是开始的正确选择），遍历按最高到最低价值重量比排序的“娃娃”结构向量。相关代码为：

```
(defn get-carryable-dolls 
  [dolls carryable-dolls]
  (def doll (first dolls)) ;initializing for use in multiple places
  (def rest-dolls (rest dolls)) ;initializing for use in multiple places
  (
    if (will-fit? doll (get-weight-sum carryable-dolls)) 
    ( ;will fit
      (
        if 
        (= carryable-dolls {})
        (def new-doll-set [doll]) ;First trip, get rid of empty set by initializing new
        (def new-doll-set (flatten [doll carryable-dolls])) ;otherwise, flatten set into vector of structs
      )
      ;tests to see if we have any more dolls to test, and if so, recurses. Otherwise, should pass the resultant vector
      ;up the stack. it appears to be the "else" potion of this if statement that is giving me problems.
      (if (not= () rest-dolls) (get-carryable-dolls rest-dolls new-doll-set) (vec new-dolls))
    )
    ( ;will not fit
      ;gets the rest of the dolls, and sends them on without modifying the vector of structs
      ;it appears to be the "else" potion of this if statement that is giving me problems.
      (if (not= () rest-dolls) (get-carryable-dolls rest-dolls carryable-dolls) (vec carryable-dolls))
    )
  )
) 
```

该代码工作正常；returnable-dolls 包含要作为解决方案返回的娃娃结构的所需向量。不幸的是，当我尝试将 returnable-dolls 向量返回到调用位置时，我收到以下错误：

```
CompilerException clojure.lang.ArityException: Wrong number of args (0) passed to: PersistentVector,compiling:(drugmover\tests.clj:83) 
```

第 82-83 行内容如下：

```
(def empty-dolls {})
(def designated-dolls (get-carryable-dolls sorted-values empty-dolls)) 
```

我对可能导致编译器错误的问题感到困惑，并且由于 Clojure 似乎更喜欢简洁的错误消息而不是堆栈跟踪（或者至少 Clooj 中的 REPL 功能确实如此），我不知道如何要解决这个问题。如果有人有任何建议，我将不胜感激！

提前致谢。

**编辑：**

我已经用答案和评论中的人建议的修复修改了代码，并提供了一些评论来帮助说明正在进行的流控制。希望通过说明我的想法，有人能够告诉我我哪里出错了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T11:58:36.610

以下代码包含您在其他答案和其他答案中已经收到的大部分建议，即：

*   去掉多余的（和错误的）括号
*   以更惯用的方式格式化代码
*   使用`loop`/`let`而不是`def`本地名称绑定
*   用于`seq`检查空列表
*   `carryable-dolls`在添加元素之前删除对空序列的不必要检查

如果没有您拥有的辅助功能的定义（例如），我无法对其进行测试`will-fit?`，但至少应该解决几个问题（并使代码以更易读的形式出现）：

```
(defn get-carryable-dolls 
  [dolls carryable-dolls]
  (loop [doll (first dolls)
         rest-dolls (rest dolls)]
    (if (will-fit? doll (get-weight-sum carryable-dolls))
      (let [new-doll-set (if (seq carryable-dolls)
                           (cons doll carryable-dolls)
                           [doll])]
        (if (seq rest-dolls)
          (recur rest-dolls new-doll-set)
          (vec new-dolls)))
      (if (seq rest-dolls)
        (recur rest-dolls carryable-dolls)
        (vec carryable-dolls))))) 
```

以下是代码的完整重构，它利用标准`reduce`函数并定义了一个函数，该函数提供核心决策逻辑是否必须在结果中包含玩偶：

```
(defn add-if-fits [dolls doll]
  (if (will-fit? doll (get-weighted-sum dolls))
    (cons doll carryable-dolls)
    carryable-dolls))

(defn get-carryable-dolls [dolls carryable-dolls]
  (reduce add-if-fits carryable-dolls dolls)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T04:04:29.207

这段代码中有太多的括号，它们会导致问题。我强烈建议您像其他人一样格式化您的代码，这会使这样的错误很容易脱颖而出。我什至无法猜测您要做什么，所以我无法重写整个代码段，但需要注意的相关事项是 for 的语法`if`是：

```
(if test then else) 
```

这些东西周围不允许有额外的括号：`(if true 1 2)`例如，很好，但`(if (true) 1 2)`会尝试`true`作为函数调用，并且因为它是布尔值而失败。如果您想将表达式“组合”在一起并评估它们的副作用，您需要`(do expr1 expr2)`，而不是`(expr1 expr2)`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-22T05:49:00.570

您的`if`代码周围有额外的括号，这就是该错误的原因：

下面的代码将产生相同的错误，因为它有额外的括号（当调用 else 部分来创建向量时，你的 if 情况相同：

```
((vec {:a 10 :b 100})) 
```

尝试在 REPL 中执行此操作，您将看到相同的异常：

```
java.lang.IllegalArgumentException: Wrong number of args (0) passed to: PersistentVector (NO_SOURCE_FILE:0) 
```

# java - 在 achartengine 上使用数据库中的远程数据生成图形

> ID：10264943
> 
> 赞同：1
> 
> 时间：2012-04-22T03:20:23.143
> 
> 标签：java, android, graph, achartengine

我正在尝试使用 achartengine 生成图表，该图表从数据库中提取数据并使用数据填充图表。以下是填充图表的代码。所有的数据都存储在

“数据数组列表”。此代码将数据填充到图表中

```
 CategorySeries series = new CategorySeries("Bar Graph");     //"series" = graph
        for(int i=0; i< size; i++)
        {
            series.add("Bar"+(i+1), dataArraylist.get(i));                      //add each of the value to the series i.e graph
        }

        XYMultipleSeriesDataset dataset= new XYMultipleSeriesDataset(); 
        dataset.addSeries(series.toXYSeries());                                       //add the graph into a dataset

        // customisation for the first line
        XYSeriesRenderer renderer = new XYSeriesRenderer();
        renderer.setDisplayChartValues(true);
        renderer.setChartValuesSpacing((float) 0.5);
        renderer.setColor(Color.WHITE);

        XYMultipleSeriesRenderer mRenderer = new XYMultipleSeriesRenderer(); //create a new renderer.
        mRenderer.addSeriesRenderer(renderer); //renderer lets one to change the proerties of the graph i.e line colour etc
        mRenderer.setXTitle("X VALUES");
        mRenderer.setXTitle("Y VALUES");

        mRenderer.setChartTitle("This is title");

        Intent intent = ChartFactory.getBarChartIntent(context, dataset, mRenderer,Type.DEFAULT, "Title"); //package the whole chart together

        return intent; 
```

但是，当我尝试编译它时，我得到 Null Exception 错误，以下是 null 异常后收到的错误：

```
 04-07 21:09:31.713: E/AndroidRuntime(4091): java.lang.IllegalStateException: Could not execute method of the activity 
```

我在将数据从一个活动传递到图形活动时也遇到了问题。一个答案将不胜感激

完整的日志是：

```
 04-07 21:09:31.674: D/AndroidRuntime(4091): Shutting down VM
04-07 21:09:31.674: W/dalvikvm(4091): threadid=1: thread exiting with uncaught exception (group=0x40015560)
04-07 21:09:31.713: E/AndroidRuntime(4091): FATAL EXCEPTION: main
04-07 21:09:31.713: E/AndroidRuntime(4091): java.lang.IllegalStateException: Could not execute method of the activity
04-07 21:09:31.713: E/AndroidRuntime(4091):     at android.view.View$1.onClick(View.java:2144)
04-07 21:09:31.713: E/AndroidRuntime(4091):     at android.view.View.performClick(View.java:2485)
04-07 21:09:31.713: E/AndroidRuntime(4091):     at android.view.View$PerformClick.run(View.java:9080)
04-07 21:09:31.713: E/AndroidRuntime(4091):     at android.os.Handler.handleCallback(Handler.java:587)
04-07 21:09:31.713: E/AndroidRuntime(4091):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-07 21:09:31.713: E/AndroidRuntime(4091):     at android.os.Looper.loop(Looper.java:123)
04-07 21:09:31.713: E/AndroidRuntime(4091):     at android.app.ActivityThread.main(ActivityThread.java:3683)
04-07 21:09:31.713: E/AndroidRuntime(4091):     at java.lang.reflect.Method.invokeNative(Native Method)
04-07 21:09:31.713: E/AndroidRuntime(4091):     at java.lang.reflect.Method.invoke(Method.java:507)
04-07 21:09:31.713: E/AndroidRuntime(4091):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-07 21:09:31.713: E/AndroidRuntime(4091):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-07 21:09:31.713: E/AndroidRuntime(4091):     at dalvik.system.NativeStart.main(Native Method)
04-07 21:09:31.713: E/AndroidRuntime(4091): Caused by: java.lang.reflect.InvocationTargetException
04-07 21:09:31.713: E/AndroidRuntime(4091):     at java.lang.reflect.Method.invokeNative(Native Method)
04-07 21:09:31.713: E/AndroidRuntime(4091):     at java.lang.reflect.Method.invoke(Method.java:507)
04-07 21:09:31.713: E/AndroidRuntime(4091):     at android.view.View$1.onClick(View.java:2139)
04-07 21:09:31.713: E/AndroidRuntime(4091):     ... 11 more
04-07 21:09:31.713: E/AndroidRuntime(4091): Caused by: java.lang.NullPointerException
04-07 21:09:31.713: E/AndroidRuntime(4091):     at hudds.fc.coach.ReadinessGraph.getIntent(ReadinessGraph.java:45)
04-07 21:09:31.713: E/AndroidRuntime(4091):     at hudds.fc.coach.Overview.generateGraph(Overview.java:101)
04-07 21:09:31.713: E/AndroidRuntime(4091):     ... 14 more
04-07 21:09:34.746: I/Process(4091): Sending signal. PID: 4091 SIG: 9 
```

以下代码从数据库下载数据：

```
 try {
        if (json.getString(KEY_SUCCESS) != null) {

            String getsize=json.getString("size");
            size = Integer.parseInt(getsize);

            for (int i = 0; i < size; i++) { 
            String getRating=json.getJSONArray("number").getJSONObject(i).getString("rating_number");
            int rating = Integer.parseInt(getRating);

            readinessRatng.add(rating);
            String printratings=readinessRatng.toString();
            Log.e("ratings are", printratings);
            }

        }

    else{

                     }
        }

    catch (JSONException e) {
        e.printStackTrace();
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T03:58:40.753

请参阅此[链接](http://code.google.com/p/achartengine/)以获取 chartengine

```
 public XYMultipleSeriesRenderer getBarDemoRenderer() {
    XYMultipleSeriesRenderer renderer = new XYMultipleSeriesRenderer();
    renderer.setAxisTitleTextSize(16);
    renderer.setChartTitleTextSize(20);
    renderer.setLabelsTextSize(15);
    renderer.setLegendTextSize(15);
    renderer.setMargins(new int[] {20, 30, 15, 0});
    SimpleSeriesRenderer r = new SimpleSeriesRenderer();
    r.setColor(Color.BLUE);
    renderer.addSeriesRenderer(r);
    r = new SimpleSeriesRenderer();
    r.setColor(Color.GREEN);
    renderer.addSeriesRenderer(r);
    return renderer;
  }

 private XYMultipleSeriesDataset getBarDemoDataset() {
    XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();
    final int nr = 10;
    Random r = new Random();
    for (int i = 0; i < SERIES_NR; i++) {
      CategorySeries series = new CategorySeries("Demo series " + (i + 1));
      for (int k = 0; k < nr; k++) {
        series.add(100 + r.nextInt() % 100);
      }
      dataset.addSeries(series.toXYSeries());
    }
    return dataset;
  }

private void setChartSettings(XYMultipleSeriesRenderer renderer) {
    renderer.setChartTitle("Chart demo");
    renderer.setXTitle("x values");
    renderer.setYTitle("y values");
    renderer.setXAxisMin(0);
    renderer.setXAxisMax(5);
    renderer.setYAxisMin(0);
    renderer.setYAxisMax(250);
  } 
```

添加上述方法并从您的 oncreate 方法中调用以下行

```
XYMultipleSeriesRenderer renderer = getBarDemoRenderer();
setChartSettings(renderer);
Intent intent = ChartFactory.getBarChartIntent(this, getBarDemoDataset(), renderer, Type.DEFAULT);
startActivity(intent); 
```

# security - 阻止 Chrome 扩展程序在我的网站上运行

> ID：10264947
> 
> 赞同：10
> 
> 时间：2012-04-22T03:20:41.770
> 
> 标签：security, google-chrome-extension

作为一名网络开发人员，有什么方法可以防止用户的 Chrome 扩展程序被应用到我的网站上？即标题，元标记，什么？此外，如果有，是否还有办法将特定扩展名列入白名单？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-22T04:12:35.403

这是不可能的。在 Web 服务器端，您只能控制浏览器允许您控制的内容。简单来说，这意味着您可以控制发回给它的数据（HTML、javascript、标题等）。就是这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-18T16:34:52.757

您不能创建内容安全策略 (CSP) 并阻止内联 javascript 并且只允许来自特定域的 javascript 吗？您甚至可以在仅报告模式下创建 CSP，并通过[https://report-uri.io/之类的方式收集违规报告](https://report-uri.io/)

# opengl - GLSL gl_FragCoord.z 计算和设置 gl_FragDepth

> ID：10264949
> 
> 赞同：24
> 
> 时间：2012-04-22T03:21:51.520
> 
> 标签：opengl, glsl, shader

所以，我有一个冒名顶替者（真正的几何体是一个立方体，可能被剪裁了，冒名顶替者几何体是门格尔海绵），我需要计算它的深度。

我可以很容易地计算出在世界空间中的偏移量。不幸的是，我花了好几个小时都没有用它来扰乱深度。

我能得到的唯一正确结果是我去的时候：

```
gl_FragDepth = gl_FragCoord.z 
```

基本上，我需要知道 gl_FragCoord.z 是如何计算的，以便我可以：

*   从 gl_FragCoord.z 到眼睛空间的逆变换
*   添加深度扰动
*   将此扰动的深度转换回与原始 gl_FragCoord.z 相同的空间。

如果这似乎是一个重复的问题，我深表歉意；这里还有许多其他帖子解决了类似的问题。但是，在实现所有这些之后，没有一个可以正常工作。在这一点上，我不是试图选择一个来获得帮助，而是要求提供完整的代码来完成它。它应该只是几行。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-15T21:11:40.617

为了将来参考，关键代码是：

```
float far=gl_DepthRange.far; float near=gl_DepthRange.near;

vec4 eye_space_pos = gl_ModelViewMatrix * /*something*/
vec4 clip_space_pos = gl_ProjectionMatrix * eye_space_pos;

float ndc_depth = clip_space_pos.z / clip_space_pos.w;

float depth = (((far-near) * ndc_depth) + near + far) / 2.0;
gl_FragDepth = depth; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-04-01T17:40:18.880

作为未来的另一个参考，这与 imallett 给出的公式相同，它在 OpenGL 4.0 应用程序中为我工作：

```
vec4 v_clip_coord = modelview_projection * vec4(v_position, 1.0);
float f_ndc_depth = v_clip_coord.z / v_clip_coord.w;
gl_FragDepth = (1.0 - 0.0) * 0.5 * f_ndc_depth + (1.0 + 0.0) * 0.5; 
```

这里，`modelview_projection`是 4x4 模型视图投影矩阵，`v_position`是被渲染像素的对象空间位置（在我的例子中，由 raymarcher 计算）。

该等式来自[本手册的](http://www.songho.ca/opengl/gl_transform.html)[窗口坐标](http://www.songho.ca/opengl/gl_transform.html)部分。请注意，在我的代码中，near is和 far is是 的默认值。请注意，**这与**[透视投影矩阵](http://www.songho.ca/opengl/gl_projectionmatrix.html)公式中的近/远距离不同！唯一的技巧是使用and （或者如果你真的需要改变它），我已经在另一个深度范围内挣扎了一个小时 - 但这已经在我的（透视）投影矩阵中“烘焙”了。`0.0``1.0``gl_DepthRange``gl_DepthRange`**`0.0``1.0``gl_DepthRange`**

 **请注意，这样，方程实际上只包含一个常数乘以 ( `(far - near) / 2`) 和另一个常数 ( ) 的一个加法`(far + near) / 2`。将其与 imallett 代码中所需的乘法、加法和除法（可能通过优化编译器转换为乘法）进行比较。**

# database - 向数据库插入数据时如何避免异常

> ID：10264950
> 
> 赞同：1
> 
> 时间：2012-04-22T03:22:05.883
> 
> 标签：database, exception

我使用数据集的 Insert() 方法将数据插入数据库。如：

```
 public void InsertData()
 {
    ATableAdapter a = new ATableAdapter();
    a.Insert(//some parameters);  //step 1: OK
    BTableAdapter b = new BTableAdapter();
    b.Insert(//some parameters); //step 2: throw exception
    ....
 } 
```

运行第 2 步时，程序抛出异常并停止运行以下函数，但在数据库中，有第 1 步生成的虚拟记录，我该如何避免这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T03:23:37.350

将这两个步骤包装在一个事务中。

请参阅[事务范围](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx)。

您将需要在事务中登记命令。

# java - 这是否违反了“依赖倒置原则”？

> ID：10264951
> 
> 赞同：-1
> 
> 时间：2012-04-22T03:22:14.810
> 
> 标签：java, design-patterns, dependency-inversion

```
public class Connection {
public Connection(){

}

public String description() {
    return "Generic";
} 
```

}

```
public class SqlServerConnection extends Connection{

public SqlServerConnection(){

}

public String description(){
    return "SQL Server";
} 
```

}

```
public class OracleConnection extends Connection{
public OracleConnection(){

}

public String description(){
    return "Oracle";
} 
```

}

```
public class MySqlConnection extends Connection{
public MySqlConnection(){

}

public String description(){
    return "MySQL";
} 
```

}

```
public class FirstFactory {
String type;

public FirstFactory(String t){
    type = t;
}

public Connection createConnection(){
    if(type.equals("Oracle")){
        return new OracleConnection();
    }else if(type.equals("SQL Server")){
        return new SqlServerConnection();
    }else{
        return new MySqlConnection();
    }
} 
```

}

```
public class TestConnection {
public static void main(String[] args) {
        FirstFactory factory;

        factory = new FirstFactory("Oracle");

        Connection connection = factory.createConnection(); //createConnection return concrete implementation not an abstraction

        System.out.println("You're connection with " + connection.description());
} 
```

}

这是来自 VTC 设计模式视频教程我的问题是这个例子是否违反了依赖倒置原则？

因为 TestConnection 类依赖于具体实现，因为 factory.createConnection() 返回具体实现而不是抽象。

我可以通过这样做来解决这个问题吗？

```
public Connection createConnection(){

Connection connection = null;

if(type.equals("Oracle")){
    connection = new OracleConnection();
}else if(type.equals("SQL Server")){
    connection = new SqlServerConnection();
}else{
    connection = new MySqlServerConnection();
}
return connection; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T03:41:25.723

理想情况下，您会将工厂注入 TestConnection（即，它将通过接口将 ConnectionFactory 作为参数），而不是调用“new”来获取工厂。这样，TestConnection 既不依赖于 Factory 的具体实现，也不依赖于 Connection 的具体实现。

工厂返回 Connection 的具体实现很好 - 事实上，如果您想实际使用连接，这是必要的。您不依赖于*特定*的具体实现，因为工厂将其作为 Connection （即作为接口）返回。某个地方的某个人确实必须实际实例化 Connection 实现——这是工厂的工作。

例如，如果 OracleConnection 具有其他连接没有的某些方法，并且调用类依赖于这些方法，那将是一种违规行为。不是这里的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T06:37:27.843

虽然可以说您的通用架构不是实现数据库连接的最佳方式，但我将跳过它，因为我理解这个问题更多地是关于依赖反转而不是数据库实现。要实现完全的依赖倒置：

*   `Connection`应该是一个接口，而不是一个具体的类。
*   `ConnectionFactory`应该是一个接口，而不是一个具体的类，它定义了一个`createConnection()`返回`Connection`. 它不应该在其构造函数中需要参数。
*   对于每个数据库，您将有一个不同的具体类来实现`ConnectionFactory`并返回实现`Connection`.

以上更好地满足了依赖倒置原则，因为现在 TestConnection 只指定了它需要从服务提供者那里得到什么，并且不耦合到任何具体的实现。任何具体的实现都可以被创建和使用，只要它满足为 TestConnection 定义的接口所指定的要求，并且接口指定的只是 TestConnection 真正需要的。

特别是，另一个包中的另一个供应商可以创建一个新的`Factory`实现`Connection`，您可以将其插入代码中（如果您遵循上述架构）并且您的`TestConnection`类不需要任何类型的修改。

这支持许多将具体服务与服务客户端关联的运行时范例。例如，在典型的启动时依赖注入场景中，您将注入一个具体实现`ConnectionFactory`into `TestConnection`，然后它看起来像：

```
public class TestConnection {
    private ConnectionFactory connectionFactory;
    public setConnectionFactory(ConnectionFactory connectionFactory) {
        this.connectionFactory = connectionFactory;
    }

    public static void main(String[] args) {

        //
        // Perform dependency injection here
        //

        // after dependency injection

        Connection connection = connectionFactory.createConnection(); //createConnection return concrete implementation not an abstraction

        System.out.println("You're connection with " + connection.description());
    }
} 
```

这将 TestConnection 与对任何数据库的任何依赖完全分开，并且只需注入一个`ConnectionFactory`. 或者，您可以进行服务查找，而不是“执行依赖注入”。J2EE/J3EE 广泛使用它，例如`DataSource`从 JNDI`Context`对象中获取 ConnectionFactory （或更典型的是 a ）。这些超出了问题的范围，仅作为示例提供了您为什么要这样做以及检查您是否满足该原则的一种方法。 `TestConnection`对于来自外部源（例如数据库驱动程序）的任何内容，应该只引用接口，而不是类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T06:38:03.770

依赖倒置原则原则是

A - 高级模块不应依赖于低级模块。两者都应该依赖于抽象。

在您的情况下，您已经抽象了 Connection，这很好。在我看来，工厂模式的使用也很好。

B - 抽象不应依赖于细节。细节应该取决于抽象。

您的 Connection 不依赖于较低的实现，并且继承的类可能使用 Connection 的方法/变量（如果示例更复杂，他们可能会）

顺便说一句，我倾向于使 Connection 成为一个抽象类，如果您稍后要向它添加更多功能，而不是为您制作的默认构造函数而烦恼

```
public class Connection {
  public abstract String description();
} 
```

或者只是让它成为一个界面

```
public interface Connection {
  String description();
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-22T03:27:29.853

您提出的两种`createConnection`实现是等效的；方向返回连接与将连接存储在变量中并返回之间没有功能差异。

至于是否存在一些违反依赖倒置的情况，我会说工厂有点好，这取决于它打算如何使用。您想要的是类将 a`Connection`作为参数，而不是拥有一个直接调用以获取连接的工厂。

# javascript - 使用 javascript 更改元素的 style.color 失败

> ID：10264961
> 
> 赞同：5
> 
> 时间：2012-04-22T03:24:26.433
> 
> 标签：javascript, html, css

以下代码在 FF 中有效，但在 IE9 中无效：

```
 // turn on the 'image file upload' field and its label
    document.getElementById('itemImageId').disabled = false;
    document.getElementById('labelForImageUploadID').style.color = "black"; 
```

这是带有标签和文件输入的 HTML：

```
 <label for="itemImageId" style="color: silver" id="labelForImageUploadID">Item image
            (select to change the item's current image)</label>
    <input type="file" size="100px" id="itemImageId" disabled="disabled"
                     name="theFileUpload"></input> 
```

** 编辑 ** 上面的标签和文件上传标签嵌套在下面的**div**中——我添加了这个，这样你就可以看到鼠标点击是如何处理的。handleRowClick **()**函数具有上述 Javascript 代码，它试图将文本变为黑色：

```
 <div class="itemlistRowContainer" id="topmostDiv_ID" onclick="handleRowClick(this);"
         onmouseover="handleMouseOver(this);" onmouseout="handleMouseOut(this);"
         ondblclick="handleDblClick(this);"> 
```

所以当这个标签第一次出现在页面上时，它的颜色是正确的——由于内联颜色样式，它是银色的。

然后上面的 Javascript 代码在鼠标点击时执行。

在 Firefox 中，Javascript 代码将标签文本变为黑色，并启用文件上传控制。

但是在 IE9 中，标签的文本保持灰色。

IE9 不支持**style.color = "somecolor"** 动态控制**标签**标签的颜色吗？

我查看了其他一些帖子，我发现唯一的怪癖是，如果您动态启用/禁用，请确保标签在 IE9 中已启用，然后再尝试更改其颜色。

这不是一个因素，因为代码永远不会禁用**标签**标签。

不仅仅是这个**标签**标签——页面上的所有**标签**标签都无法变黑，但仅在 IE9 中——在 FF 中一切正常。

有没有我错过的“陷阱”或技巧？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T16:39:34.360

我解决了这个问题。

最初的问题是——当我将文本颜色从银色更改为黑色时，我的**标签**标签不会在 IE 中重绘/刷新——下面的代码失败但仅在 Internet Explorer 中失败——下面的代码在 Firefox 等中运行良好：

```
 // turn on the 'image file upload' label
document.getElementById('labelForImageUploadID').style.color = "black"; 
```

**症状和线索**

我知道上面的代码实际上是在 IE中将**标签的文本更改为黑色吗？**是的。**但是要在执行上述代码后查看页面上标签**标签上的文本颜色变化，我必须：

*   调整 IE 浏览器窗口的大小——然后 BAM 将**标签**文本更改为黑色

*   或者双击IE浏览器窗口的空白区域——同样的效果，**标签**文本会显示上述代码的效果，文本会变黑。

所以我知道将颜色更改为黑色在代码中起作用，并且我了解到问题“一定是 IE9 浏览器窗口在颜色更改后没有刷新**标签标签”。**

以下是我尝试过的一些没有效果的事情：

*   通过将*zoom:1添加到***标签**的样式及其父**div使 'hasLayout' 为真**

*   **为标签**及其父**div**添加了固定像素宽度

 **这 2 次尝试基于我在**[这里阅读的内容](http://www.bennadel.com/blog/1354-The-Power-Of-ZOOM-Fixing-CSS-Issues-In-Internet-Explorer.htm)**

那些东西没有帮助。此外，我已经为**label**的父**div**设置了 'display:inline-block'， 这也（据说）强制 'hasLayout' 解决 IE 问题。

**这是解决方案**

```
 // THIS DID NOT WORK IN IE BUT WAS FINE IN Firefox:
       // document.getElementById('labelForImageUploadID').style.color = "black";

    // THIS WORKS IN IE and IN FIREFOX
    var imageUploadLabel = document.getElementById('labelForImageUploadID');
    imageUploadLabel.style.color = "black";
    imageUploadLabel.style.display = "none";
    imageUploadLabel.style.display = "inline-block" 
```

多么笨拙的一段代码。

我确信可能有一种更优雅的方式（我认为*hasLayout*， *zoom:1*等会起作用，但对我来说没有这样的运气）。

在我在这里写我的解决方案时，没有人（还）用一种更优雅的方式来强制 IE 在我更改它们的文本颜色时重新绘制我的**标签**标签——也许在看到我的解决方法之后，有人会提供更优雅的当文本颜色发生变化时强制 IE 重绘**标签标签的方法。**

我要补充的一件事：也许是我的 DOCTYPE 导致了这个问题——如果你认为是的话，请加入。这是我在页面上使用的 DOCTYPE：

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T03:28:59.627

代码工作正常：

[http://jsfiddle.net/AlienWebguy/HKhjs/](http://jsfiddle.net/AlienWebguy/HKhjs/)

我的假设是您`addEventlistener()`仅依赖于 JavaScript。IE 使用它自己的风格，称为 JScript，它使用`attachEvent`.

```
object.attachEvent(event, callback) 
```**

# bash - 如何删除包含某些单词的所有行，但包含某些单词的行除外？

> ID：10264966
> 
> 赞同：2
> 
> 时间：2012-04-22T03:25:54.830
> 
> 标签：bash, sed

我有一个名为`file1.txt`. 我想删除包含“中心”、“农场”或“中间”等字样的每一行，但包含“①”或“城市”的行除外。

*   删除和例外的列表很长。
*   这些文件采用 UTF-8 格式。

如何删除至少包含其中一个单词的每一行，但不删除那些有一些例外的行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T07:15:53.240

这可能对您有用：

```
sed -i '/center of\|farm\|middle of/{/①\|city/!d}' file1.txt 
```

或者

```
sed -i '/center of/ba
        /farm/ba
        /middle of/ba
        b 
        :a
        /①/b
        /city/b
        d' file1.txt 
```

如果你有一个`words.txt`和`exceptions.txt`文件，使用这个：

```
sed '/\*exceptions\*/{h;s/.*/:a/p;d}
    x
    /./{x;s|.*|/&/b|p;$!d;s/.*/d/;q}
    x
    s|.*|/&/ba|' words.txt - <<<"*exceptions*" exceptions.txt > file.sed
sed -i -f file.sed file1.txt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T03:31:00.577

```
sed -r '/①|city/{p;d};/center of|farm|middle of/d' file1.txt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T12:49:13.993

```
sed '/blacklist/{/whitelist/p;d}' file 
```

删除黑名单，除非它在白名单中：

```
echo -e "a b\nb c\nc d\nd e\ne f" | sed '/c\|d/{/a\|b/p;d}' 
```

印刷

```
a b
b c
e f 
```

即每一行，不包含 c 或 d，只有包含 a 或 b 时才包含 c 或 d 的行。

# linux - Bash：如何远程运行脚本

> ID：10264969
> 
> 赞同：4
> 
> 时间：2012-04-22T03:26:47.840
> 
> 标签：linux, bash, shell

我有一个脚本（比如说`run.py`），我想将它 scp 到远程机器（比如说`10.1.100.100`），cd 到该远程机器的目录中，然后`run.py`在该目录中执行。

如何将上述过程包装在一个 bash 脚本中？我不知道如何让 bash 在另一台机器上远程执行命令。

`run.py`希望我能在终端中看到那个标准输出。但如果我只能重定向它，那也没关系。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T03:36:05.317

```
chmod +x ./run.py
scp -pq  ./run.py 10.1.100.100:'/home/myremotedirectory/run.py'
ssh 10.1.100.100     'cd /somedirectory  &&  /home/myremotedirectory/run.py' 
```

看看有没有帮助

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-10T10:21:27.603

# 如何通过 SSH 运行本地脚本

## 概要：

通过 SSH 执行脚本，无需复制脚本文件。您需要一个简单的 SSH 连接和一个本地脚本。

## 代码：

```
#!/bin/sh
print_usage() {
        echo -e "`basename $0` ssh_connexion local_script"
        echo -e "Remote executes local_script on ssh server"
        echo -e "For convinient use, use ssh public key for remote connexion"
        exit 0
}

[ $# -eq "2" ] && [ $1 != "-h" ] && [ $1 != "--help" ] || print_usage

INTERPRETER=$(head -n 1 $2 | sed -e 's/#!//')

cat $2 | grep -v "#" | ssh -t $1 $INTERPRETER 
```

## 例子：

```
 - ssh-remote-exec root@server1 myLocalScript.sh #for Bash
 - ssh-remote-exec root@server1 myLocalScript.py #for Python
 - ssh-remote-exec root@server1 myLocalScript.pl #for Perl
 - ssh-remote-exec root@server1 myLocalScript.rb #for Ruby 
```

## 一步一步的解释

该脚本执行以下操作： 1° 捕获第一行 #! 要获得解释器（即：Perl、Python、Ruby、Bash 解释器），2° 通过 SSH 启动远程解释器，3° 通过 SSH 发送所有脚本主体。

## 本地脚本：

本地脚本必须以 #!/path/to/interpreter 开头

```
- #!/bin/sh for Bash script
 - #!/usr/bin/perl for Perl script
 - #!/usr/bin/python for Python script
 - #!/usr/bin/ruby for Ruby script 
```

该脚本不是基于本地脚本扩展，而是基于 #! 信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T11:43:28.177

你可以这样做：

```
ssh -l yourid 10.1.100.100 << DONE
cd /your/dir/
./run.py
DONE 
```

上面已经编辑过了，我不记得原来是什么了，如果我想在一个连接中做，我会这样做。

```
ssh -l yourid 10.1.100.100 python < <(
echo "import os"
echo "os.chdir('/yourdir')"
echo "print(os.getcwd())"
cat yourscript.py
) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-09T15:29:11.100

请记住，这不是规则，您必须 cd 到请求的目录。

访问远程机器后，只需键入此文件的相对路径，无需使用 cd：

```
/some_folder/./run.py 
```

# c - 结构中动态分配的指针数组

> ID：10264972
> 
> 赞同：2
> 
> 时间：2012-04-22T03:27:19.097
> 
> 标签：c, pointers, struct

我想做这样的事情。

```
typedef struct Test{
  int value;
  struct Test* parent;
  struct Test** children;
}Test; 
```

所以我想要一个指向另一个父结构的节点。然后我想要一个指向子节点的动态分配的数组。我的问题是我不知道这在语法上是如何工作的。

例如，

```
Test* first;
Test* second;
Test* third;
(*third).value = 1;
(*first).parent = second;
(*first).child[0] = third;
printf("%d\n",(*first).(*child[0]).value); 
```

不编译。我假设我需要用 malloc 做一些事情来为指针数组分配空间，但我不确定。此外，我不确定如何访问父目录和子目录的“值”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T03:33:26.737

编辑：我在末尾添加了一个 ideone 链接，它为您实现了所有概念。

很抱歉这个答案很简洁，我希望它会告诉你如何正确地做到这一点。

```
Test* first = (Test *)malloc(sizeof(Test));  // malloc(sizeof(Test)) allocates enough memory to hold a Test struct
Test* second = (Test *)malloc(sizeof(Test));
first->value = 1; // -> is the proper way to dereference pointers in this situation (sorry wrong term? I am up late) but I suppose your style can work, it just gets a bit confusing IMO
first->*child = (Test *)malloc(intptr_t * number_of_children); // intptr_t will make sure you have the right size of a pointer, you could also use sizeof(Test *) instead. i.e. malloc(sizeof(Test *));
first->child[0] = second; // The array-style subscript is just more readable IMO
printf("%d\n",first->child[0]->value); // child[0]-> will handle the dereferencing in a nice way 
```

但我要向你展示一个让你的生活更轻松的小窍门

```
typedef Test* test_array;

// ...later, in the struct...
test_array* child;

// ...later, in the malloc place...

first->child = (test_array *)malloc(sizeof(test_array *) * number_of_children); 
```

其他一切都保持不变，您只会更容易理解 IMO 的语法。帮助处理那些棘手的双星。

编辑：这是链接 - [http://ideone.com/TvSSB](http://ideone.com/TvSSB)

# c# - 如何根据 if 条件以编程方式声明不同的 WCF 绑定类型？

> ID：10264978
> 
> 赞同：2
> 
> 时间：2012-04-22T03:28:42.520
> 
> 标签：c#, wcf, wcf-binding

我有一个以编程方式连接到 WCF 服务的 WinForms 客户端。这就是连接变量的声明方式...

```
var myBinding = new NetTcpBinding(); 
var myEndpoint = new EndpointAddress(myURI); 
var myChannelFactory = new ChannelFactory<IService>(myBinding, myEndpoint); 
```

但是，我想更改它，以便我可以根据 if 语句的结果使用不同的类（不仅仅是 NetTcpBinding）来定义“myBinding”（相同的变量名）。

这就是我想要的（我知道它不起作用，但请尝试理解我的意图）

```
if (bindingType == "BasicHttpBinding") { var myBinding = new BasicHttpBinding(); }
if (bindingType == "NetTcpBinding") { var myBinding = new NetTcpBinding(); }
if (bindingType == "WSHttpBinding") { var myBinding = new WSHttpBinding(); } 
```

谁能告诉我如何使用有效的方法达到相同的结果？同样，我想要的是能够根据 if 语句的结果定义“myBinding”。我也愿意考虑其他建议。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T03:46:45.530

我不能保证这会起作用，但请尝试声明`myBinding`为[base class](http://msdn.microsoft.com/en-us/library/system.servicemodel.channels.binding.aspx)。

```
string bindingType = "BasicHttpBinding";
System.ServiceModel.Channels.Binding myBinding;

if (bindingType == "BasicHttpBinding") { myBinding = new BasicHttpBinding(); }
if (bindingType == "NetTcpBinding") { myBinding = new NetTcpBinding(); }
if (bindingType == "WSHttpBinding") { myBinding = new WSHttpBinding(); } 
```

# android - 如何在所有平台上测试 Android 应用

> ID：10264987
> 
> 赞同：0
> 
> 时间：2012-04-22T03:31:24.303
> 
> 标签：android

我不得不接受 Android 应用程序的退货，因为用户告诉我它不适用于他的摩托罗拉 Xoom。（音频播放有一些混响）

这不是一个超大容量的应用程序，所以我不打算出去买几十个安卓来测试它！

此外，它是一个录音机应用程序，因此在模拟器中效果不佳。我如何在 Xoom 以及实际上所有其他平台上诊断和纠正问题，而无需投入少量资金！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T03:53:53.110

如果您不反对生根，您可以做的一件事是在您的设备上安装不同的 ROM。这至少会让你有机会在一些不同版本的 Android 和不同的 UI 皮肤上进行测试（有多少可用取决于你的设备）。

我还阅读了有关在不同设备上为您测试您的应用程序的服务，但我不确定这些费用是多少。

# python - 如何在需要的基本 Django 用户模型中获取电子邮件字段？

> ID：10264988
> 
> 赞同：0
> 
> 时间：2012-04-22T03:31:35.227
> 
> 标签：python, django, django-forms, modelform

我试图强制用户在注册时输入他们的电子邮件。我了解如何将表单字段与 ModelForms 一起使用。但是，我无法弄清楚如何强制要求现有字段。

我有以下 ModelForm：

```
class RegistrationForm(UserCreationForm):
    """Provide a view for creating users with only the requisite fields."""

    class Meta:
        model = User
        # Note that password is taken care of for us by auth's UserCreationForm.
        fields = ('username', 'email') 
```

我正在使用以下视图来处理我的数据。我不确定它的相关性如何，但值得一提的是，其他字段（用户名、密码）正在正确加载并出现错误。但是，用户模型已经根据需要设置了这些字段。

```
def register(request):
    """Use a RegistrationForm to render a form that can be used to register a
    new user. If there is POST data, the user has tried to submit data.
    Therefore, validate and either redirect (success) or reload with errors
    (failure). Otherwise, load a blank creation form.
    """
    if request.method == "POST":
        form = RegistrationForm(request.POST)
        if form.is_valid():
            form.save()
            # @NOTE This can go in once I'm using the messages framework.
            # messages.info(request, "Thank you for registering! You are now logged in.")
            new_user = authenticate(username=request.POST['username'], 
                password=request.POST['password1'])
            login(request, new_user)
            return HttpResponseRedirect(reverse('home'))
    else:
        form = RegistrationForm()
    # By now, the form is either invalid, or a blank for is rendered. If
    # invalid, the form will sent errors to render and the old POST data.
    return render_to_response('registration/join.html', { 'form':form }, 
        context_instance=RequestContext(request)) 
```

我曾尝试在 RegistrationForm 中创建一个电子邮件字段，但这似乎没有效果。我是否需要扩展用户模型并覆盖电子邮件字段？还有其他选择吗？

谢谢，

典范RG

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T04:31:19.020

只需覆盖`__init__`以使电子邮件字段成为必填项：

```
class RegistrationForm(UserCreationForm):
    """Provide a view for creating users with only the requisite fields."""

    class Meta:
        model = User
        # Note that password is taken care of for us by auth's UserCreationForm.
        fields = ('username', 'email')

    def __init__(self, *args, **kwargs):
        super(RegistrationForm, self).__init__(*args, **kwargs)
        self.fields['email'].required = True 
```

这样，您不必完全重新定义字段，而只需更改属性即可。希望对您有所帮助。

# android - invalidate() 不会立即更改自定义视图的内容

> ID：10264990
> 
> 赞同：1
> 
> 时间：2012-04-22T03:31:55.243
> 
> 标签：android, canvas, dialog, invalidation, custom-view

我有一个包含自定义视图的 xml 布局：

```
<LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="0dip"
        android:orientation="vertical"
        android:layout_weight="50" 
    >
        <org.example.sudoku.PuzzleView
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:background="@drawable/puzzlebackground"
            android:id="@+id/puzzleId"/>

    </LinearLayout> 
```

我有一个将此布局设置为其内容的活动，调用一个对话框用于用户输入，该对话框又调用 PuzzleView 中的一个函数以最终更改 PuzzleView 的内容。问题是，在 Dialog 关闭后没有重新绘制更改。相反，它会在用户的下一个其他输入上重新绘制。以下是一些可能对您有所帮助的代码片段：

游戏.java：

```
// ...
public void showKeypadOrError(int x, int y)
{
    int tiles[] = getUsedTiles(x,y);
    if (tiles.length == 9)
    {
        Toast toast = Toast.makeText(this, R.string.no_moves_label, Toast.LENGTH_SHORT);
        toast.setGravity(Gravity.CENTER, 0, 0);
        toast.show();
    }else
    {
        Log.d(TAG, "showKeypad: used=" + toPuzzleString(tiles));
        Dialog v = new Keypad(this, this.puzzleView, x, y);
        v.show();
    }
}
public void setTile(int x, int y, int value) {
    puzzle[y * 9 + x] = value;
} 
```

键盘.java：

```
private void setListeners()
{
    for (int i = 0; i < keys.length; i++)
    {
        final int t = i + 1;
        keys[i].setOnClickListener(new View.OnClickListener() { 
            public void onClick(View v) 
            {
                returnResult(t);
            }
        });
    }
}

private void returnResult(int tile)
{   
    puzzleView.setSelectedTile(selX, selY, tile);
    puzzleView.invalidate();
    dismiss();
} 
```

最后，PuzzleView.java

```
public void setSelectedTile(int X, int Y, int tile) {
    game.setTile(X, Y, tile);
    //this.invalidate();// may change hints
} 
```

我发现了一个与我的问题相似的问题，但我无法弄清楚解决方案是什么：

[如何在从对话框返回时使（）无效？](https://stackoverflow.com/questions/4888481/how-to-invalidate-on-return-from-a-dialog)

非常感谢您的帮助！编辑：添加更多代码-希望对您有所帮助：PuzzleView.java

```
// Handle input in touch mode
@Override
public boolean onTouchEvent(MotionEvent event) {
    if (event.getAction() != MotionEvent.ACTION_DOWN) {
        return super.onTouchEvent(event);
    }

    // Allow player to choose the tile that defined by game
    // But only allow the user to modify the tiles that are blank
    select((int) (event.getX() / width),
            (int) (event.getY() / height));

    int[] predefined = new int[81];
    // Get the tile that are not blank (predefined by game)
    predefined = game.getPredefinedTileFromPuzzle();
    // Check if the selected tile is whether predefined or not
    if (predefined[selY * 9 + selX] == 1) {
        return true;
    }
    //Call the Dialog input from Game.java
    game.showKeypadOrError(selX, selY);
    Log.i(TAG, "Right before terminate onTouchEvent()");
    return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T04:53:44.407

您应该在对话框关闭后失效。

实现接口并在回调中`DialogInterface.OnDismissListener`失效。`OnDismiss`

```
 Dialog v = new Keypad(this, this.puzzleView, x, y);

    v.setOnDismissListener(new OnDismissListener() {
    @Override
        public void onDismiss(final DialogInterface arg0) {
            puzzleView.postInvalidate ();
        }
    });

     v.show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-16T17:10:32.627

做就是了`puzzleView.requestLayout();`

# ruby-on-rails-3 - 页面上显示的 Rails ActiveRecord 哈希

> ID：10264991
> 
> 赞同：0
> 
> 时间：2012-04-22T03:32:19.157
> 
> 标签：ruby-on-rails-3, activerecord

我正在使用此处找到的 railscast 从我的数据库中创建一个可排序的项目列表：[http ://railscasts.com/episodes/228-sortable-table-columns](http://railscasts.com/episodes/228-sortable-table-columns)

排序工作正常，但是当页面显示时，它似乎根据数字项在表格上方打印出某种散列。每个单元看起来像这样：

```
#<ActiveRecord::Relation:0x00000006f9a500> 
```

我检查了 html 代码，里面没有任何东西可以打印任何东西。这是某种调试语句吗？如何让它停止打印？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T03:36:06.473

您正在打印对象，但您只需要一个属性。做这样的事情：

```
<%= your_object.YOUT_ATTRIBUTE %> 
```

# drupal - 设置视图字段以使用完整 HTML

> ID：10264992
> 
> 赞同：0
> 
> 时间：2012-04-22T03:32:45.040
> 
> 标签：drupal, drupal-views, field

好的，所以我似乎在 Drupal 论坛上没有得到太多帮助，所以我想我可以在这里试试。这是我的场景。我已经构建了一个连接到数据库并检索数据的 drupal 模块。这部分已经成功完成。我可以从这个数据库中获取我需要的每一条数据。我正在检索的字段之一包含 HTML 代码。所以很自然地，我希望这段代码在拉取数据时正确显示在我的视图字段中。

我在 drupal 论坛上提出了问题，有人建议我使用下面的处理程序。

**我的 Drupal 模块的一部分，需要实现完整的 HTML**

```
//This is breaking the site.
$data['Jobs']['JobHTML'] = array(
  'title' => t('Job HTML'),
  'help' => t('A pre-formatted job.'),
  'field' => array(
  'handler' => 'views_handler_area_text',
   ),
); 
```

但是，此处理程序会中断并引发以下异常。

```
An AJAX HTTP error occurred.
HTTP Result Code: 200
Debug...
Path...
StatusText: OK
ResponseText: Fatal error: Call to undefined method 
views_handler_area_text::pre_render() 
in sites\all\modules\views\includes\view.inc 
on line 1162 
```

如果有人对 Drupal 观点有任何见解，请告诉我，因为我已经为此苦苦挣扎了一段时间。请记住，我的模块正在工作，我正在从中提取和显示数据。我只需要在数据通过时正确格式化数据。

**编辑**

'handler' => 'views_handler_area_text' 的字段示例

```
ID    Title             ActivityHTML

1111  MyCustomActivity  <p>This has test content in it. <br /> Here is another line of content</p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T21:03:05.893

您正在使用`area handler`一个字段。改为使用`views_handler_field_text`。

# django - 按字段顺序在页面顶部显示错误

> ID：10264994
> 
> 赞同：0
> 
> 时间：2012-04-22T03:33:11.793
> 
> 标签：django

有了这个简单的模型

```
class Publisher(models.Model):
    name = models.CharField(max_length = 40)
    website = models.URLField()

    def __unicode__(self):
        return self.name 
```

和模型形式

```
class PublisherForm(ModelForm):

    class Meta:
        model = Publisher 
```

**更新模型**

```
class PublisherForm(ModelForm):
    error_css_class = "error"   #class is applied if the field throws an error.
    required_css_class = "required" #outputs the cell with the class if the field is required

    def __init__(self, *args, **kwargs):
        super(PublisherForm, self).__init__(*args, **kwargs)
        self.fields.keyOrder = ['name', 'website']

    class Meta:
        model = Publisher 
```

self.fields.keyOrder 对错误消息的顺序没有影响。它只会更改字段的顺序。

form.as_table 生成的字段的顺序是按照在模型中声明的顺序

我在 shell 中运行了这段代码

```
from booksapp import models
>>> f = models.PublisherForm({})
>>> f.is_valid()
False
>>> f.as_table()
u'<tr class="required error"><th><label for="id_name">Name:</label></th><td><ul class="errorlist"><li>This field is required.</li></ul><input id="id_name" type="text" name="name" maxlength="40" /></td></tr>\n<tr class="required error"><th><label for="id_website">Website:</label></th><td><ul class="errorlist"><li>This field is required.</li></ul><input id="id_website" type="text" name="website" maxlength="200" /></td></tr>'
>>> f.errors
{'website': [u'This field is required.'], 'name': [u'This field is required.']}
>>> 
```

根据模型，这里 html 的顺序是正确的，但错误的顺序不是。我认为名字应该放在第一位。

如果我需要在表单上方而不是内联输出错误，这将是一个问题。

如何使错误消息的顺序与模型中的字段相同？如果您必须在顶部显示错误消息，您会怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T03:37:39.777

您需要[通过表单的数据来获取字段 order](https://stackoverflow.com/questions/350799/how-does-django-know-the-order-to-render-form-fields)，然后访问错误字典的相应元素。

# iphone - 你能用故事板制作高级用户界面吗？

> ID：10264996
> 
> 赞同：5
> 
> 时间：2012-04-22T03:33:27.267
> 
> 标签：iphone, objective-c, ios, ipad

是否可以使用情节提要制作高级 UI，例如 iPad 的 twitter 应用程序？我对他们来说是新手，我在故事板上所做的所有阅读都让他们看起来相当简单。你能用带有故事板的笔尖做大部分你能做的事情吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T03:36:38.140

故事板与一组 .xib 没有太大区别。它们提供的优势是您可以看到不同视图控制器之间的关系。所以当然——你可以用 .xib 做的任何事情，你也可以用故事板做。

# ruby-on-rails - 如何使用rails 3禁用表单上的所有元素？

> ID：10264998
> 
> 赞同：0
> 
> 时间：2012-04-22T03:33:52.840
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个包含表单的部分，我有两个不同的实例，我想使用这个表单，一个用于编辑，另一个用于查看，我想在第二种情况下禁用所有字段。有没有什么快速的方法可以在rails中做到这一点？我知道我可以用 jquery 做到这一点，但我更喜欢在 rails 中做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T04:05:14.740

您可以将所有元素包装在`with_options :disabled => 'disabled' do`方法中。