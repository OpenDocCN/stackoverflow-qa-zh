# StackOverflow 问答 10956000-10956999

# vbscript - VBS shell.run 中断

> ID：10956014
> 
> 赞同：1
> 
> 时间：2012-06-08T21:03:29.493
> 
> 标签：vbscript, batch-file, minecraft

我的 minecraft 服务器经常崩溃，所以我编写了一个脚本来检查我的 minecraft 服务器，如果它启动它什么也不做，如果它关闭它执行以下代码：

```
Set oShell= CreateObject("WScript.Shell") 
strProcess = "cmd.exe" 
oShell.Run "TaskKill /im " & strProcess & " /f /t", , True
WScript.sleep 1000
oShell.Run "c:\minecraft_launch.bat"
Set oShell = Nothing 
```

基本上我杀死任何当前正在运行的服务器（cmd，因为它是从批处理文件运行的），然后我重新启动它。此检查通过任务调度程序每 5 分钟运行一次。

这是批处理文件的内容：

```
@echo off
"C:\Program Files\Java\jre6\bin\java.exe" -Xmx1024M -Xms1024M -jar "%appdata%\- minecraft_server\minecraft_server.jar" >> "%appdata%\- minecraft_server\s.log" 
```

当我运行它时，它可以工作。每次，但是......当它自动运行时，它停止工作。我不知道它会工作多少次，直到它退出。发生的事情是我注意到它已关闭，所以我检查了我的计算机。没有服务器运行，没有进程运行，没有 javaw.exe 或 cmd.exe 运行。没什么，但是当我尝试启动服务器时，它不会启动。我必须重新启动整个机器才能启动服务器。我想我在这里遗漏了一些愚蠢的简单东西。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T09:58:58.580

问题可能是超时时间太短，因此您尝试在它仍处于关闭状态时启动它。无论如何，vbscript 本身可以通过更多控制检查和终止进程。有关监视和停止进程的简短脚本，请参见[http://www.activexperts.com/activmonitor/windowsmanagement/adminscripts/processes/](http://www.activexperts.com/activmonitor/windowsmanagement/adminscripts/processes/)。这是来自 Rob Van der woude 的脚本，它通常是可靠的，它监控 Outlook.exe，所以我猜你会监控 javaw.exe

```
KillProc "outlook.exe"

Sub KillProc( myProcess )
'Authors: Denis St-Pierre and Rob van der Woude
'Purpose: Kills a process and waits until it is truly dead

    Dim blnRunning, colProcesses, objProcess
    blnRunning = False

    Set colProcesses = GetObject( _
                       "winmgmts:{impersonationLevel=impersonate}" _
                       ).ExecQuery( "Select * From Win32_Process", , 48 )
    For Each objProcess in colProcesses
        If LCase( myProcess ) = LCase( objProcess.Name ) Then
            ' Confirm that the process was actually running
            blnRunning = True
            ' Get exact case for the actual process name
            myProcess  = objProcess.Name
            ' Kill all instances of the process
            objProcess.Terminate()
        End If
    Next

    If blnRunning Then
        ' Wait and make sure the process is terminated.
        ' Routine written by Denis St-Pierre.
        Do Until Not blnRunning
            Set colProcesses = GetObject( _
                               "winmgmts:{impersonationLevel=impersonate}" _
                               ).ExecQuery( "Select * From Win32_Process Where Name = '" _
                             & myProcess & "'" )
            WScript.Sleep 100 'Wait for 100 MilliSeconds
            If colProcesses.Count = 0 Then 'If no more processes are running, exit loop
                blnRunning = False
            End If
        Loop
        ' Display a message
        WScript.Echo myProcess & " was terminated"
    Else
        WScript.Echo "Process """ & myProcess & """ not found"
    End If
End Sub 
```

# rabbitmq - RabbitMQ：简单的测试程序可能存在网络问题

> ID：10956019
> 
> 赞同：3
> 
> 时间：2012-06-08T21:04:33.537
> 
> 标签：rabbitmq

我有一个简单的 RabbitMQ 测试程序，它向 RabbitMQ 服务器发送然后接收消息。我有两台计算机，我发现我的代码是否有效取决于哪台计算机托管 RabbitMQ 服务器。这是我的情况（请原谅我的 MS Paint）：

![在此处输入图像描述](../Images/2b90c2f2c439f2a224fd35f7ad6dd98d.png)

1.  如果计算机 A 托管服务器并运行代码，将消息从 A 发送到 A，它就可以工作。
2.  如果计算机 A 托管服务器并且我的代码在计算机 B 上运行，将消息从 B 发送到 A，它就可以工作。
3.  如果计算机 B 托管服务器并且我的代码在计算机 A 上运行，将消息从 A 发送到 B，我会收到一个异常，提示“指定的端点均不可访问”。
4.  如果计算机 B 托管服务器并运行代码，将消息从 B 发送到 B，它就可以工作。

我不明白为什么场景 #3 对我不起作用。

*   我不认为这是代码，因为我的三个场景完全按照我的预期工作。
*   我认为这不是防火墙问题，因为我在两台计算机上都关闭防火墙的情况下运行了这些测试。
*   我不认为计算机 B 上的 RabbitMQ 服务器有问题，因为它能够很好地与自身通信（场景 #4）。
*   在尝试场景 #3 后，我检查了计算机 B 上的 RabbitMQ 日志文件，但我没有看到任何关于尝试连接的内容。我认为计算机 A 在发送请求时根本无法看到计算机 B。

我的问题通常是，我应该寻找哪些可能指向我的问题的东西？必须有一些设置在计算机 A 上被选中，但在计算机 B 上没有被选中。计算机 B 具有 Erlang 和 RabbitMQ 的默认安装。我很确定计算机 A 也设置为默认值（我最近没有安装它）。

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T03:48:57.680

该问题仅在 A 尝试连接到 B 时才明显，因此：

*   检查 A 是否可以将 B 的主机名解析为 IP 地址。用于`nslookup b`此。
*   检查 A 是否可以到达 B。跑步`ping b`会对此有所帮助。
*   使用 telnet 从 A 连接到 B 的 RabbitMQ 端口（可能是 5672）`telnet b 5672`：. 如果您得到一个空白屏幕，则表示连接已被接受。我打赌你会得到某种错误。首先使用 b 的 IP 地址尝试此技巧，然后如果可行，请尝试使用 b 的主机名以确保它可以解析。

总之，只需将其剥离为纯网络检查（不涉及 RabbitMQ）并从那里开始工作。

# magento - Magento，在管理员编辑表单上填充复选框字段

> ID：10956024
> 
> 赞同：4
> 
> 时间：2012-06-08T21:04:54.193
> 
> 标签：magento

我有一个正在使用的表单页面

```
$form->addField('name', 'checkboxes', array('label' => 'check', 'name' => 'name[]',
    'values' => array(
        array('value'=>'1', 'label'=>'1'),
        array('value'=>'2', 'label'=>'2'),
        array('value'=>'3', 'label'=>'3'),
        array('value'=>'4', 'label'=>'4'),
        array('value'=>'5', 'label'=>'5'),
    )
)); 
```

创建复选框列表。

问题是我不知道如何在编辑时让它们填充。谁能告诉我该怎么做？

我正在使用复选框类型，因此它们显示为列表而不是表单中的单独行。如果有办法将它们创建为单独的字段但都在一行中，我很想知道如何。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-08T22:44:34.277

```
$form->addField('name', 'checkboxes', array('label' => 'check', 'name' => 'name[]',
    'values' => array(
        array('value'=>'1', 'label'=>'1'),
        array('value'=>'2', 'label'=>'2'),
        array('value'=>'3', 'label'=>'3'),
        array('value'=>'4', 'label'=>'4'),
        array('value'=>'5', 'label'=>'5'),
    ),
    'value' => array('1', '5'),
    // or 
    // 'checked' => array('1', '5')
)); 
```

然后将检查值为“1”和“5”的复选框。有关更多详细信息，您可以查看 lib/Varien/Data/Form/Element/Checkboxes.php

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-14T08:46:44.720

我还附上了代码，或者您可以按照以下链接获取更多帮助
[http://pastebin.com/hKMmryE9](http://pastebin.com/hKMmryE9)

```
Magento, populating checkboxes fields on an admin edit form
$form->addField('name', 'checkboxes', array('label' => 'check', 'name' => 'name[]',
    'values' => array(
        array('value'=>'1', 'label'=>'1'),
        array('value'=>'2', 'label'=>'2'),
        array('value'=>'3', 'label'=>'3'),
        array('value'=>'4', 'label'=>'4'),
        array('value'=>'5', 'label'=>'5'),
    )
));

$form->addField('name', 'checkboxes', array('label' => 'check', 'name' => 'name[]',
    'values' => array(
        array('value'=>'1', 'label'=>'1'),
        array('value'=>'2', 'label'=>'2'),
        array('value'=>'3', 'label'=>'3'),
        array('value'=>'4', 'label'=>'4'),
        array('value'=>'5', 'label'=>'5'),
    ),
    'value' => array('1', '5'),
    // or
    // 'checked' => array('1', '5')
)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-17T13:21:40.777

很少改进和验证：

```
$fieldset->addField('payment_methods', 'checkboxes', array('label' => 'Payment Methods', 'name' => 'payment_methods[]',
'values' => array(
    array('value'=>'1', 'label'=>'Cash'),
    array('value'=>'2', 'label'=>'Paypal'),
    array('value'=>'3', 'label'=>'Authorize.Net'),
    array('value'=>'4', 'label'=>'Square'),
),
        'required' => true,
        'checked' => array('1','4'),
        'disabled' => array('1'), ////if you want
)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-17T05:46:11.823

```
Create $array like below
Array
(
    [0] => Array
        (
            [value] => 1
            [label] => Value 1
        )
    [1] => Array
        (
            [value] => 2
            [label] => Value 2
        )
    [2] => Array
        (
            [value] => 3
            [label] => Value 3
        )
    [3] => Array
        (
            [value] => 4
            [label] => Value 4
        )
    [4] => Array
        (
            [value] => 5
            [label] => Value 5
        )
)
$fieldset->addField('checkboxes', 'checkboxes', array(

 'label'     => 'Select Value',
                          'name'      => 'checkboxes[]',
                          'values' => $array,
                          'onclick' => "",
                          'onchange' => "",
                          'disabled' => false,
                          'after_element_html' => '',
                          'tabindex' => 1
                        )); 
```

# asp.net - 带有 HttpResponse Asp.Net pre-4.5 的异步 IO

> ID：10956026
> 
> 赞同：0
> 
> 时间：2012-06-08T21:05:02.853
> 
> 标签：asp.net, asp.net-mvc, asp.net-4.0, evented-io

特别是，我在使用 I/O 完成端口的 Asp.NET 4.5 中引入与[Response.BeginFlush类似的功能。](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.beginflush%28v=vs.110%29.aspx)

我担心这可能是不可能的，因为 .NET 4 之前的版本似乎并没有暴露足够的内容来使用 HttpResponse 实现异步 IO。[IHttpAsyncHander](http://msdn.microsoft.com/en-us/library/system.web.ihttpasynchandler.aspx)就目前公开的情况而言。集成 HttpListener 似乎没有太大希望。

我还研究了带有 Asp.NET 的[SignalR](https://github.com/SignalR/SignalR)，它似乎依赖于 .NET 4.5。

我到底有多烂？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T00:59:38.777

好像是不可能的。Asp.NET 只是将 HttpResponse/HttpRequest 暴露给 IHttpHandlers，这确实是它允许的最大控制。写入 IO 流时可以添加过滤器，但.NET 4.5 之前的[Stream](http://msdn.microsoft.com/en-us/library/system.io.stream.aspx)不支持异步刷新。而且我不认为 Asp 允许自定义实现 Streams。

编辑：Asp.NET 不允许支持异步写入。

# jsf-2 - IllegalStateException：JBAS014531：缓存条目 [...] 未使用？

> ID：10956028
> 
> 赞同：2
> 
> 时间：2012-06-08T21:05:18.770
> 
> 标签：jsf-2, primefaces, cdi, jboss7.x

我遇到了一些与[此类](https://stackoverflow.com/questions/9426193/cache-entry-not-in-use)似的异常，但我认为就我而言，这只是另一个问题的结果。

环境：JBoss AS 7、JSF (Mojarrah + Primefaces 3.2)、JPA 2 (Hibernate)、EJB 3.1、CDI

我有四个结构非常相似的视图。其中三个工作正常，最后一个有这个问题。它由一个`p:inputText`(p=Primefaces) 和一个`p:dataTable`组件组成。

```
<p:inputText id="barcode" label="Barcode" value="#{testBean.barcode}"
 required="true" validator="#{testBean.validateBarcode}">
    <p:ajax process="@this" update="@form" />
</p:inputText>
<p:message for="barcode" />

<p:dataTable [...]/> 
```

`Enter`我希望当用户输入条形码（通过按键或离开文本字段）时通过 Ajax 提交表单。我的支持 bean 是`@Named @ViewScoped @Stateful`并且正在使用`EntityManager`扩展模式（如其中一个[答案](https://stackoverflow.com/questions/9426193/cache-entry-not-in-use)中所述）。

**问题：**显然表单同时提交了两次：

1.  作为 Ajax POST 请求 -> 在线程 #5 上
2.  作为普通的 POST 请求（非 Ajax）-> 在线程 #6

我的日志文件指出：

```
21:58:09,294 Information [net.svv.servlet.RequestLogger] (http--127.0.0.1-7080-5) POST /tat/tat/test.jsf
21:58:09,302 Information [net.svv.servlet.RequestLogger] (http--127.0.0.1-7080-6) POST /tat/tat/test.jsf 
```

导致以下异常：

```
21:58:09,334 WARN  [com.arjuna.ats.jta] (http--127.0.0.1-7080-6) ARJUNA016029: SynchronizationImple.afterCompletion - failed for org.jboss.as.ejb3.component.stateful.StatefulSessionSynchronizationInterceptor$StatefulSessionSynchronization@67dc20fd with exception: java.lang.IllegalStateException: JBAS014531: Cache entry {[-106, 108, 121, 57, -117, -54, 77, -75, -66, 78, -95, 39, 21, -84, -2, 118]} is not in use 
```

几次，有时甚至〜20次。

然后是 HTTP 响应：

```
21:58:11,892 Information [net.svv.servlet.RequestLogger] (http--127.0.0.1-7080-5) response: 200 text/xml;charset=UTF-8 (2598 msec)
21:58:11,924 Information [net.svv.servlet.RequestLogger] (http--127.0.0.1-7080-6) response: 200 text/html;charset=UTF-8 (2622 msec) 
```

据我了解，视图在同一个会话中被请求两次，导致异常。所以我的问题是，为什么我按键的时候表单提交了两次`Enter`？为什么这种行为只发生在四个视图之一上？（其他的具有相同`<p:inputText />`的条码组件）

ps：我知道`Enter`使用JavaScript检查关键事件的可能性，所以这不是如何避免它的问题，而是*为什么*表单提交两次的问题。另外：我们使用的一些条形码扫描仪发送`Enter`字符来提交数据。

pps：我只希望 Ajax 表单提交以避免在按下时重新提交`F5`。

感谢您有兴趣阅读整个故事；）

* * *

完整的堆栈跟踪：

```
1:58:09,334 WARN  [com.arjuna.ats.jta] (http--127.0.0.1-7080-6) ARJUNA016029: SynchronizationImple.afterCompletion - failed for org.jboss.as.ejb3.component.stateful.StatefulSessionSynchronizationInterceptor$StatefulSessionSynchronization@67dc20fd with exception: java.lang.IllegalStateException: JBAS014531: Cache entry {[-106, 108, 121, 57, -117, -54, 77, -75, -66, 78, -95, 39, 21, -84, -2, 118]} is not in use
at org.jboss.as.ejb3.cache.impl.backing.NonPassivatingBackingCacheImpl.release(NonPassivatingBackingCacheImpl.java:134) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.as.ejb3.cache.impl.backing.NonPassivatingBackingCacheImpl.release(NonPassivatingBackingCacheImpl.java:56) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.as.ejb3.cache.spi.impl.AbstractCache.release(AbstractCache.java:76) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.as.ejb3.cache.spi.impl.AbstractCache.release(AbstractCache.java:39) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.as.ejb3.component.stateful.StatefulSessionSynchronizationInterceptor.releaseInstance(StatefulSessionSynchronizationInterceptor.java:197) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.as.ejb3.component.stateful.StatefulSessionSynchronizationInterceptor.access$200(StatefulSessionSynchronizationInterceptor.java:50) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.as.ejb3.component.stateful.StatefulSessionSynchronizationInterceptor$StatefulSessionSynchronization.afterCompletion(StatefulSessionSynchronizationInterceptor.java:271) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
at com.arjuna.ats.internal.jta.resources.arjunacore.SynchronizationImple.afterCompletion(SynchronizationImple.java:96)
at com.arjuna.ats.arjuna.coordinator.TwoPhaseCoordinator.afterCompletion(TwoPhaseCoordinator.java:402)
at com.arjuna.ats.arjuna.coordinator.TwoPhaseCoordinator.end(TwoPhaseCoordinator.java:103)
at com.arjuna.ats.arjuna.AtomicAction.commit(AtomicAction.java:164)
at com.arjuna.ats.internal.jta.transaction.arjunacore.TransactionImple.commitAndDisassociate(TransactionImple.java:1165)
at com.arjuna.ats.internal.jta.transaction.arjunacore.BaseTransaction.commit(BaseTransaction.java:117)
at com.arjuna.ats.jbossatx.BaseTransactionManagerDelegate.commit(BaseTransactionManagerDelegate.java:75)
at org.jboss.as.ejb3.tx.CMTTxInterceptor.endTransaction(CMTTxInterceptor.java:92) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.as.ejb3.tx.CMTTxInterceptor.invokeInOurTx(CMTTxInterceptor.java:232) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.as.ejb3.tx.CMTTxInterceptor.required(CMTTxInterceptor.java:304) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.as.ejb3.tx.CMTTxInterceptor.processInvocation(CMTTxInterceptor.java:190) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
at org.jboss.as.ejb3.component.interceptors.CurrentInvocationContextInterceptor.processInvocation(CurrentInvocationContextInterceptor.java:41) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
at org.jboss.as.ejb3.component.interceptors.LoggingInterceptor.processInvocation(LoggingInterceptor.java:59) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
at org.jboss.as.ee.component.NamespaceContextInterceptor.processInvocation(NamespaceContextInterceptor.java:50) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
at org.jboss.as.ejb3.component.interceptors.AdditionalSetupInterceptor.processInvocation(AdditionalSetupInterceptor.java:32) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
at org.jboss.as.ee.component.TCCLInterceptor.processInvocation(TCCLInterceptor.java:45) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
at org.jboss.as.ee.component.ViewService$View.invoke(ViewService.java:165) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.as.ee.component.ViewDescription$1.processInvocation(ViewDescription.java:173) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
at org.jboss.as.ejb3.component.stateful.StatefulComponentIdInterceptor.processInvocation(StatefulComponentIdInterceptor.java:52) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
at org.jboss.as.ee.component.ProxyInvocationHandler.invoke(ProxyInvocationHandler.java:72) [jboss-as-ee-7.1.1.Final.jar:7.1.1.Final]
at net.svv.tat.TestBean$$$view341.getTableModel(Unknown Source) [classes:]
at sun.reflect.GeneratedMethodAccessor1928.invoke(Unknown Source) [:1.7.0_04]
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.7.0_04]
at java.lang.reflect.Method.invoke(Method.java:601) [rt.jar:1.7.0_04]
at org.jboss.weld.util.reflection.SecureReflections$13.work(SecureReflections.java:264) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.util.reflection.SecureReflectionAccess.run(SecureReflectionAccess.java:52) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.util.reflection.SecureReflectionAccess.runAsInvocation(SecureReflectionAccess.java:137) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.util.reflection.SecureReflections.invoke(SecureReflections.java:260) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.bean.proxy.EnterpriseBeanProxyMethodHandler.invoke(EnterpriseBeanProxyMethodHandler.java:111) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.bean.proxy.EnterpriseTargetBeanInstance.invoke(EnterpriseTargetBeanInstance.java:56) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.jboss.weld.bean.proxy.ProxyMethodHandler.invoke(ProxyMethodHandler.java:105) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at net.svv.tat.TestBean$Proxy$_$$_Weld$Proxy$.getTableModel(TestBean$Proxy$_$$_Weld$Proxy$.java) [classes:]
at net.svv.tat.TestBean$Proxy$_$$_WeldClientProxy.getTableModel(TestBean$Proxy$_$$_WeldClientProxy.java) [classes:]
at sun.reflect.GeneratedMethodAccessor1930.invoke(Unknown Source) [:1.7.0_04]
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.7.0_04]
at java.lang.reflect.Method.invoke(Method.java:601) [rt.jar:1.7.0_04]
at javax.el.BeanELResolver.getValue(BeanELResolver.java:302) [jboss-el-api_2.2_spec-1.0.0.Final.jar:1.0.0.Final]
at com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176) [jsf-impl-2.1.7-jbossorg-2.jar:]
at com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203) [jsf-impl-2.1.7-jbossorg-2.jar:]
at org.apache.el.parser.AstValue.getValue(AstValue.java:169) [jbossweb-7.0.13.Final.jar:]
at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:189) [jbossweb-7.0.13.Final.jar:]
at org.jboss.weld.el.WeldValueExpression.getValue(WeldValueExpression.java:50) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:109) [jsf-impl-2.1.7-jbossorg-2.jar:]
at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:194) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:182) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
at javax.faces.component.UIData.getValue(UIData.java:731) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
at org.primefaces.component.datatable.DataTable.getValue(DataTable.java:786) [primefaces-3.2.jar:]
at javax.faces.component.UIData.getDataModel(UIData.java:1798) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
at javax.faces.component.UIData.setRowIndexWithoutRowStatePreserved(UIData.java:484) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
at javax.faces.component.UIData.setRowIndex(UIData.java:473) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
at javax.faces.component.UIData.visitTree(UIData.java:1401) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
at javax.faces.component.UINamingContainer.visitTree(UINamingContainer.java:163) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
at javax.faces.component.UIForm.visitTree(UIForm.java:362) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
at com.sun.faces.application.view.StateManagementStrategyImpl.findComponent(StateManagementStrategyImpl.java:440) [jsf-impl-2.1.7-jbossorg-2.jar:]
at com.sun.faces.application.view.StateManagementStrategyImpl.restoreDynamicAdd(StateManagementStrategyImpl.java:363) [jsf-impl-2.1.7-jbossorg-2.jar:]
at com.sun.faces.application.view.StateManagementStrategyImpl.restoreDynamicActions(StateManagementStrategyImpl.java:314) [jsf-impl-2.1.7-jbossorg-2.jar:]
at com.sun.faces.application.view.StateManagementStrategyImpl.restoreView(StateManagementStrategyImpl.java:281) [jsf-impl-2.1.7-jbossorg-2.jar:]
at com.sun.faces.application.StateManagerImpl.restoreView(StateManagerImpl.java:188) [jsf-impl-2.1.7-jbossorg-2.jar:]
at com.sun.faces.application.view.ViewHandlingStrategy.restoreView(ViewHandlingStrategy.java:123) [jsf-impl-2.1.7-jbossorg-2.jar:]
at com.sun.faces.application.view.FaceletViewHandlingStrategy.restoreView(FaceletViewHandlingStrategy.java:453) [jsf-impl-2.1.7-jbossorg-2.jar:]
at com.sun.faces.application.view.MultiViewHandler.restoreView(MultiViewHandler.java:142) [jsf-impl-2.1.7-jbossorg-2.jar:]
at javax.faces.application.ViewHandlerWrapper.restoreView(ViewHandlerWrapper.java:303) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
at javax.faces.application.ViewHandlerWrapper.restoreView(ViewHandlerWrapper.java:303) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
at com.sun.faces.lifecycle.RestoreViewPhase.execute(RestoreViewPhase.java:192) [jsf-impl-2.1.7-jbossorg-2.jar:]
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101) [jsf-impl-2.1.7-jbossorg-2.jar:]
at com.sun.faces.lifecycle.RestoreViewPhase.doPhase(RestoreViewPhase.java:116) [jsf-impl-2.1.7-jbossorg-2.jar:]
at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118) [jsf-impl-2.1.7-jbossorg-2.jar:]
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
at org.jboss.weld.servlet.ConversationPropagationFilter.doFilter(ConversationPropagationFilter.java:62) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
at net.svv.servlet.RequestLogger.doFilter(RequestLogger.java:81) [classes:]
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:489) [jbossweb-7.0.13.Final.jar:]
at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_04] 
```

# java - 适用于 Android 的数据矩阵生成器

> ID：10956034
> 
> 赞同：-2
> 
> 时间：2012-06-08T21:05:41.517
> 
> 标签：java, android, barcode

我知道该`zxing`库是生成条形码的最佳库，但它们不支持 Data Matrix 条形码。

我找到了一些替代方案，但没有一个适合我的需求：

*   我发现了一些商业且相当昂贵的
*   我发现`barcode4j`，这很好，但似乎不适用于 Android。

更多关于barcode4j：[http ://barcode4j.sourceforge.net/2.1/](http://barcode4j.sourceforge.net/2.1/)

它列出了生成条形码的几个选项（SAXON、Servlet 等），我认为这些选项都不适用于标准的 android 应用程序。我可能错了，但是否可以使用以下任何解决方案：

*   撒克逊
*   小服务程序
*   夏兰
*   FOP
*   蚂蚁
*   JavaBean

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T21:09:05.380

如果您查看下载附带的演示，您应该能够使“嵌入”示例在 Android 中工作。

# c# - asp.net 导出到 Access

> ID：10956038
> 
> 赞同：0
> 
> 时间：2012-06-08T21:05:52.400
> 
> 标签：c#, asp.net

我想通过执行以下操作导出我的通用列表。

我想在 .net 中使用 Access 对象模型并在内存流中创建一个 Access 数据库，用我的列表填充它，然后单击一个按钮将其发送以供下载。

那可能吗？这会在重负载下工作吗？更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T21:35:15.303

本文应该可以帮助您入门：[如何在 C# 中运行时创建 Access 数据库](https://stackoverflow.com/questions/1388971/how-i-create-access-database-at-runtime-in-c)。

它描述了如何动态创建一个 MS Access 数据库，您将向其中添加数据。

虽然上述方法看起来比较复杂，但我可能会建议您提供一些更灵活的方法，例如逗号分隔文件 (.csv)。然后，用户可以选择将其导入到 excel、access 或任何其他支持导入 .csv 的应用程序（有很多）。

# ios - 如何使高级控制器加载视图控制器

> ID：10956040
> 
> 赞同：0
> 
> 时间：2012-06-08T21:06:05.523
> 
> 标签：ios

我有一个高级控制器类，负责管理多个类并驱动状态机。

状态逻辑的一部分涉及几个不同屏幕的临时显示，每个屏幕都有一个专用的视图控制器，高级控制器创建这些其他控制器类，并根据需要将它们呈现为模态视图控制器。

然而，其中一个视图控制器非常简单，它有一个按钮和一些文本，这些文本可以随着状态的进展而改变。高级控制器是知道在什么阶段显示什么文本以及它需要知道何时按下按钮的类。

因此，视图控制器需要提供一个 API，高级控制器可以调用该 API 来设置文本，并且高级控制器需要是视图控制器的委托，以便在按下按钮时可以回调它。这似乎是我想移除的不必要的管道。

所以我可以将视图控制器中的出口和动作移动到高级控制器中，这样就不需要这种管道了。但是视图控制器中什么都没有了（它是从一个笔尖实例化的）。所以我想完全摆脱它。

然后，一旦它消失了，我就计​​划在高级控制器中使用它：

```
UIViewController *vc = [[UIViewController alloc] initWithNibName:@"TheNib" bundle:nil];

or should it be:
UIViewController *vc = [[UIViewController alloc] init];
[[NSBundle mainBundle] loadNibNamed:@"TheNib" owner:vc options:nil];

[[UIApplication sharedApplication].delegate.window.rootViewController presentViewController: self.vc animated: NO completion:nil]; 
```

但是应该如何设置 IB 以实现这一点 - 具体来说 a) 文件所有者应该设置为什么？b) IB 内的视图可以设置为什么？

请注意，高级控制器已经从另一个类继承，因此我无法从 UIViewController 派生它，因此它没有视图属性来连接到 IB 中的视图。

有没有一种简单的方法可以将 xib 内容连接到在高级视图控制器中创建的 UIViewController？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T21:39:20.990

您可以尝试更改文件所有者或将类对象添加到您的 NIB...</p>

![在此处输入图像描述](../Images/406c2291f6da9a80d143211afdc5ca9b.png)

只需将“对象”拖到对象列表中并设置正确的类。然后，您可以使用连接到此对象的 IBactions。

也许我提出（并回答）的这个问题可以帮助你：[Coordinating Controller design pattern in Cocoa Touch](https://stackoverflow.com/questions/10834826/coordinating-controller-design-pattern-in-cocoa-touch/10931366#10931366)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T21:39:29.590

视图及其控制器是“模块化元素”因此，如果视图有一个按钮，那么视图的控制器，而不是父级，应该是按钮的目标。视图的控制器，认为父母/其他人会对按钮事件感兴趣，应该定义父母/其他人可以参与的委托接口或通知接口。

在您的情况下，通过“移除不必要的管道”，您是 1）远离“模块化元素”和 2）造成困难，导致您提出与移除管道相关的问题。

最好只使用标准模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T21:47:56.350

如果您的所有视图都在显示一些文本和按钮，为什么不将其替换为 UIAlertView？这是一个简单的控件，用于显示一些文本和一个或两个按钮，具有明确定义的界面，用于获取按下回哪个按钮。

当然，这可能不适合您的设计，因为 UIAlertView 无法真正自定义，除非您使用第 3 方替换（即[http://cocoacontrols.com/platforms/ios/controls/tweetbot-like-uialertview-and-uiactionsheet-replacement](http://cocoacontrols.com/platforms/ios/controls/tweetbot-like-uialertview-and-uiactionsheet-replacement)）。

# c# - C# web请求问题

> ID：10956044
> 
> 赞同：1
> 
> 时间：2012-06-08T21:06:51.933
> 
> 标签：c#, windows-phone-7

我在尝试为 Windows Phone 7 创建 WebRequest 时遇到了一些问题。

当我尝试遵循 MSDN 中的代码示例时，它一直说要这样做：

```
Stream data = response.GetRequesteStream; 
```

但是当我在 Visual Studio 2010 Express for Windows Phone 中输入它时，我得到一条红色波浪线和一条错误消息，指出：

```
System.Net.WebRequest does not contain a reference for "GetRequestStream" 
and no extention method "GetRequestStream" accepting a first argument of 
type 'System.Net.WebRequest' could be found 
```

关于发生了什么的任何想法？好像我错过了一个实际的方法......但我不知道为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T21:08:40.420

Windows Phone 不支持许多（大多数）同步 API。您必须使用异步[`BeginGetRequestStream`](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.begingetrequeststream%28v=VS.95%29.aspx)方法。

网上可能还有很多，但[可以在此处找到](http://alpascual.com/post/my-first-windows-phone-7-application.aspx)电话的一个使用示例。

# vb.net - WinAPI 单击确定远程桌面仅在窗口处于活动状态时有效

> ID：10956048
> 
> 赞同：1
> 
> 时间：2012-06-08T21:07:08.640
> 
> 标签：vb.net, winforms, winapi

我在 winforms 中有一个计时器，用于在我的服务器上查找特定的确定对话框（它在内存不足的第三方应用程序上单击确定，然后重新启动它——没有其他解决方法）。因此，当我远程桌面时，服务器和远程桌面窗口处于活动状态（实际的远程桌面窗口处于活动状态，而不是必须单击 OK 的实际窗口。我可以有一个与好的，它可以工作），程序可以正常工作。它找到OK的窗口，然后点击OK按钮就好了。当我不在远程桌面时，或者当远程桌面窗口未激活（或选择）时，它会找到窗口并找到确定按钮，但无法单击确定按钮。

所以这是我在计时器中使用的点击确定：

```
Private Sub TimerCloseOK_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles TimerCloseOK.Tick
    Dim dialogBoxText As String = "My Program - Application Error"
    Dim hwnd As IntPtr = FindWindow("#32770", dialogBoxText)
    Dim WindowID As String = hwnd.ToString
    Dim buttonTitle As String
    buttonTitle = "OK"
    Dim dialogButtonHandle As IntPtr = FindWindowEx(hwnd, IntPtr.Zero, "Button", "OK")
    If Len(WindowID) > 0 And Integer.Parse(WindowID) <> 0 Then
        'CLICK OK
        SendMessage(dialogButtonHandle, BM_CLICK, 1, 0)
        mbCounter = mbCounter + 1
        Application.DoEvents()
        lCount.Text = mbCounter
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T09:56:25.027

那这个呢？

```
dim control1 as Control = Control.FromHandle(hwnd)
dim button1 as Button = TryCast(control1, Button)
If button1 IsNot Nothing Then button1.PerformClick() 
```

编辑：假设您要在属于您的项目的 Windows.Forms.Button 上执行 ButtonClick（否则`Control.FromHandle`即使对于有效句柄也不会返回任何内容）。

# windows-phone-7 - 在 Windows Phone 应用程序上更改 appdata 数据库文件中的数据

> ID：10956049
> 
> 赞同：1
> 
> 时间：2012-06-08T21:07:16.000
> 
> 标签：windows-phone-7

我有一个使用本地数据库的应用程序（我已经用数据填充了它）并将其部署到模拟器。初始化应用程序时，我将 db 从安装文件夹复制到隔离存储容器的根目录。这很好用，我可以使用所有数据。但我需要更改（插入、更新和删除）一些数据，并希望将这些更改保存到安装文件夹中的 appdata 文件中，以便下次运行模拟器时可以看到更改。

什么是最好的解决方案？

谢谢。

# hibernate - JPA 注释不保留 BigDecimal 精度

> ID：10956050
> 
> 赞同：8
> 
> 时间：2012-06-08T21:07:35.133
> 
> 标签：hibernate, jpa, oracle11g, precision, bigdecimal

我正在使用 javax.persistence API 和 Hibernate 在 Oracle 11g Express 数据库中创建注释和持久化实体及其属性。

我在实体中有以下属性：

```
@Column(precision = 12, scale = 9)
private BigDecimal weightedScore; 
```

目标是保留一个最多 12 位的十进制值，并且在小数点右侧最多保留 9 位。

计算后`weightedScore`，结果是0.1234，但是一旦我用Oracle数据库提交实体，值显示为0.12。

我可以通过使用 EntityManager 对象来查询条目或直接在 Web 浏览器的 Oracle Application Express (Apex) 界面中查看它来查看这一点。

我应该如何注释我的 BigDecimal 属性，以便正确地保持精度？

`@Column`注意：我们使用内存中的 HSQL 数据库来运行我们的单元测试，无论有没有注释，它都不会遇到精度不足的问题。

更新：

查看表描述，`weightedScore`列的定义是`NUMBER(19, 2)`. 我现在也尝试将注释更改为`@Column(columnDefinition="Number(12, 9)")`，但这没有效果。有谁知道为什么 Oracle 对这些注释没有响应？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T14:40:38.600

我找到了答案。嘘！

我尝试通过 Oracle Apex 界面执行以下查询：

`alter table NODE modify (WEIGHTEDSCORE NUMBER(12, 9));`

我收到一条错误消息，指出无法将包含数据的列修改为具有较低的精度或较小的比例。这是我的问题！

因为我试图用现有数据更改表，所以我需要删除表并重新初始化它，或者更改列以仅具有更高的精度和规模。

我成功地尝试了以下查询：

`alter table NODE modify (WEIGHTEDSCORE NUMBER(26, 9));`

原因是我想在小数点右边增加 7 位精度，所以我在整体精度上增加 7 以补偿比例的增加。这样，该列可以将所有现有精度保留在小数点左侧，同时在右侧添加精度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T08:52:55.503

看来你不是唯一一个遇到这个问题的人：http: [//www.eclipse.org/forums/index.php/m/716826/](http://www.eclipse.org/forums/index.php/m/716826/)

# ajax - 如何使用ajax跨域上传文件？

> ID：10956052
> 
> 赞同：0
> 
> 时间：2012-06-08T21:08:01.133
> 
> 标签：ajax, file-upload, cross-domain

我正在从 foo.bar 上的表单上传文件。我正在使用 jquery.form.js 因为我不希望浏览器离开。

```
var ref = this;
var options ={ 
    success: onSuccess,
    beforeSubmit: onBeforeSubmit
};
$("form#file-upload).ajaxForm( options ); 
```

当“action”属性设置为同一个域时，它可以工作。但如果“操作”在不同的域上（例如 api.foo.bar ），我会收到错误消息

> 不安全的 JavaScript 尝试 从 URL [http://foo.bar/index.php的框架访问具有 URL](http://foo.bar/index.php) [http://api.foo.bar/file/](http://api.foo.bar/file/)的框架。域、协议和端口必须匹配。

我知道 jquery.form 插件正在创建一个 iframe 并在那里发布请求。

**有没有办法避免错误？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T21:10:15.390

设置`dataType:"jsonp"`。见这里：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

以下是有关 jsonp 的更多信息：

[http://en.wikipedia.org/wiki/JSONP](http://en.wikipedia.org/wiki/JSONP)

[http://remysharp.com/2007/10/08/what-is-jsonp/](http://remysharp.com/2007/10/08/what-is-jsonp/)

# php - 使用 Google Plus API 将流数据存储在 MYSQL 数据库中

> ID：10956056
> 
> 赞同：1
> 
> 时间：2012-06-08T21:08:13.910
> 
> 标签：php, mysql, cron, google-plus

我一直在玩 Google+ API PHP starterkit。我的最终目标是在我的服务器上运行一个 cron 作业，该作业使用 Google+ API 来获取活动数据，然后将其存储在 MYSQL 数据库中——然后我可以在其中动态更新网站上类似 twitter 的提要。

这是挖掘 Google+ 个人资料的公开信息流的一种可能/实用的方法吗？如果不是，您有什么好的选择？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T23:43:22.990

对我来说听起来是个好方法。

不过，您必须记住的一件事是，在将活动添加到数据库后，没有简单的方法可以检查活动是否已被删除。您必须检查`$plus->activities->get($activityId)`要显示的每个活动是否仍然存在（当然，除非您不介意它们出现在您的网站上）。

除此之外，您的解决方案将正常工作。

# galleria - Galleria 幻灯片控件：将画廊图像从 varbinary 数据库字段加载到 ASP.NET 页面

> ID：10956057
> 
> 赞同：0
> 
> 时间：2012-06-08T21:08:16.537
> 
> 标签：galleria

我正在尝试从 SQL Server 数据库加载 Galleria 幻灯片控件[http://galleria.io/](http://galleria.io/)的图库图像。我已将 Galleria 控件放置在 ASPX 页面中。

我正在尝试旧帖子中推荐的 ListView 解决方案：[Using Galleria jQuery plugin with an asp.net ListView](https://stackoverflow.com/questions/6719236/using-galleria-jquery-plugin-with-an-asp-net-listview) 但它不起作用。有谁知道是否确实可以将图像从数据库加载到 Galleria 控件？如果是这样，图像字段需要具有什么数据类型？我尝试了 varbinary （实际图像）和 nvarchar （只是图像的路径），这些都不起作用。页面刚刚挂起。

这是我的 ASPX 代码：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Aircraftpedia_GalleriaDB.aspx.cs" 
Inherits="Library_Aircraftpedia_GalleriaDB" %> 

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0   Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"> 
    <head runat="server"> 
    <title></title> 
    <script type="text/javascript" src="../_js/slider_jQueryUI/jquery-1.6.2.min.js"></script> 
    <script type="text/javascript" src="../_js/galleria/galleria-1.2.7.min.js"></script> 
    </head> 
    <body> 
<asp:SqlDataSource ID="dsSelectAllAircraftpedia" runat="server" ConnectionString="<%$    ConnectionStrings:MYDB%>" 
SelectCommand="cda_Aircraftpedia_SelectAll" SelectCommandType="StoredProcedure" 
ProviderName="<%$ ConnectionStrings:MYDB.ProviderName %>"></asp:SqlDataSource> 
<asp:ListView runat="server" ID="lvw"> 
<LayoutTemplate> 
    <div id="gallery"> 
        <asp:PlaceHolder ID="itemPlaceholder" runat="server"></asp:PlaceHolder> 
    </div> 
</LayoutTemplate> 
<ItemTemplate> 
    <img id="photoAlbumPhotos" src='<%# Eval("AcImage") %>' alt="Image Not Found"     class="photoAlbumPhotos" /> 
</ItemTemplate> 
</asp:ListView> 
<script type="text/javascript"> 
$(document).ready(function () { 
    Galleria.loadTheme('../_js/galleria/themes/classic/galleria.classic.min.js'); 
    $("#gallery").galleria({ 
        width: 700, 
        height: 500 
    }); 
});          
</script> 
</body> 
</html> 
```

还有我的 C# 代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    this.lvw.DataSource = this.dsSelectAllAircraftpedia;
    this.lvw.DataBind();
} 
```

如果您对如何使此代码正常工作有任何想法，或者您有其他解决方案可以推荐，请告诉我。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T18:12:36.333

我是作者，所以这肯定有偏见，但我认为您应该查看[http://imageresizing.net/](http://imageresizing.net/)项目。它提供了一个 SQL 集成插件，可以让您通过磁盘缓存非常有效地为 SQL blob 提供服务，并且只需几分钟即可完成设置。

作为奖励，它可以让您轻松调整所有图像的大小以适应一组特定的约束，这非常方便。

# mysql - 基于多个标准的mysql索引/排序数据

> ID：10956060
> 
> 赞同：2
> 
> 时间：2012-06-08T21:08:28.530
> 
> 标签：mysql, database, indexing

我有一个简单的表“t1”，其中包含：

```
word VARCHAR(16)
id INT
importance SMALLINT 
```

word 和 id 一起是唯一的，但都不是唯一的。

我添加了一个`UNIQUE INDEX(word, id)`

我的查询看起来像这样：

```
SELECT id FROM t1 WHERE word = "something" ORDER BY importance DESC 
```

但它需要 0.0002 秒来执行说：

```
SELECT id FROM t1 WHERE word = "something" 
```

但是执行`ORDER BY importance DESC`.

我的问题是，我怎样才能索引/重新排序我的表，以便它首先按单词组织，然后按重要性进行组织，而不必即时进行排序？

我可以重新排序静态数据，以便`word, importance DESC`默认排序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T21:11:10.057

要加快查询速度，请在`(word, importance DESC, id)`.

您可以在一张表上拥有多个索引，因此如果您不想删除现有索引，则无需删除。

# c++ - 在 C 回调中在 C++ 中引发异常，可能跨越动态库边界......它安全吗？

> ID：10956062
> 
> 赞同：16
> 
> 时间：2012-06-08T21:08:42.037
> 
> 标签：c++, c, libjpeg

我现在正在使用[libjpeg](http://www.ijg.org/)来保存 JPEG 图像。如果出现错误，libjpeg 的默认行为是调用`exit()`，我想避免这种情况，因为这对我的程序来说不是致命错误。libjpeg[允许您使用自己的错误管理器](http://apodeline.free.fr/DOC/libjpeg/libjpeg-3.html#ss3.4)，并规定如果您使用自己的`error_exit()`函数（`exit()`默认调用），则**不得**将控制权返回给调用者。libjpeg 建议使用[setjmp.h](http://en.wikipedia.org/wiki/Setjmp.h)而不是程序来满足此要求`exit()`。

但是，我正在编写一个 C++ 程序，并且可以访问异常。[这个问题的答案](https://stackoverflow.com/questions/3177028/can-i-throw-c-exceptions-from-legacy-c-callbacks)表明从回调中抛出异常是安全的（就像在明确定义的行为中一样）。但它没有提到动态库，并且有一个一般的经验法则，即不要跨动态库边界抛出异常。

这是一个例子：

```
#include <iostream>
#include <jpeglib.h>
#include <cstdio>
#include <stdexcept>

static void handleLibJpegFatalError(j_common_ptr cinfo)
{
  (*cinfo->err->output_message)(cinfo);
  throw std::runtime_error("error in libjpeg, check stderr");
}

int main()
{
  struct jpeg_compress_struct cinfo;
  struct jpeg_error_mgr jerr;
  FILE* file = std::fopen("out.jpeg", "wb"); // assume this doesn't fail for this example

  try
    {
      cinfo.err = jpeg_std_error(&jerr);
      jerr.error_exit = handleLibJpegFatalError;

      // let's say this triggers a fatal error in libjpeg and handleLibJpegFatalError() is called
      // by libjpeg
      jpeg_create_compress(&cinfo);
    }
  catch (...)
    {
      std::cerr << "Error saving the JPEG!\n";
    }

  jpeg_destroy_compress(&cinfo);
  std::fclose(file);
} 
```

**我想知道的是：即使 libjpeg 被编译为动态库，我是否可以从此回调中抛出异常并将其捕获回我的应用程序中？**libjpeg 可能是静态库或动态库，如果它是动态库，则可能使用不同的编译器构建。但是，抛出和捕获异常的代码肯定会在同一个编译单元中。**上面的代码安全吗？**

仅供参考，我正在为 OS X 和 Windows 开发（并牢记 Linux 的未来可能性），所以我更感兴趣的是，这是否被认为是一般定义明确的行为，而不是针对特定平台/编译器。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T22:42:14.757

另一个答案在这里适用。展开堆栈时，没有任何东西会被丢弃。库是否在内部使用了一些疯狂的调用约定甚至都没有关系，只要它没有特别混淆您的 C++ 实现的异常处理结构（它不会作为 C 程序）。我所知道的任何 C++ 实现都没有通过弹出堆栈帧来找到 catch 块（这将使优化成为一场噩梦），它们都维护用于异常处理的内部结构。只要调用链中较低的调用不会与这些结构混淆，堆栈展开将非常适合您的所有个人代码。现在，一般来说，这很可能会使库内部状态混乱，因为您永远不会将执行返回到库进行清理，

在这种情况下，我会去做。一般来说，我只会从 C 回调中抛出致命异常。

希望有帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-08T23:06:10.970

这不安全。根据相关非 C++ 库代码的编译方式，可能不存在必要的展开表。这只是它可能失败的一个*实际*原因；概念上的原因是它只是未定义的行为。

您应该遵循文档并使用`setjmp`/来获取对 libjpeg 代码的调用之外，然后如果您想使用异常`longjmp`，则立即在正文中抛出异常。`if (setjmp(...)) { ... }`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-22T17:29:38.497

正如其他答案中所讨论的，只要您控制所有模块并且它们将由相同的工具链（包括静态链接）构建，它就应该是安全的。

**但**我想在这里添加一个警告，[一些工具链需要打开此支持](https://stackoverflow.com/a/24242183/560648)，因为 libjpeg 的功能已标记`extern "C"`。默认情况下，Visual Studio 假定此类函数不会传播异常。

如果你不打开它，预计会很痛苦。在我意识到这一点之前，我花了几个小时在一个几乎与你相同的测试用例上。

# java - Java io 句柄无效异常

> ID：10956072
> 
> 赞同：0
> 
> 时间：2012-06-08T21:09:54.227
> 
> 标签：java, io, bufferedreader

我有一个使用 readPassword() 从控制台读取的函数。在一个程序迭代中多次调用此函数。但是，一旦到达 readPassword() 行，我就会不断收到 java io 异常。我注意到当我从 finally 子句中删除 close() 语句时，此错误消失了。为什么会发生这种情况，我应该何时正确关闭阅读器？

```
public void Func()
{
        Console console = System.console();
        BufferedReader reader = new BufferedReader(new InputStreamReader(System.in));

        if (console == null)
            System.out.println("Error!");

        try 
        {
           char[] pwd = console.readPassword();
           String password = new String(pwd);
           System.out.println("PW: " + password);

           String input = reader.readLine();
           System.out.println("UserNm: " + input);
        } catch (IOException e) {
            System.out.println("IO EXCEPTION");
        } finally {
            if (reader != null)
            {
                try
                {
                    reader.close();
                }
                catch (IOException e)
                {
                    System.out.println("error");
                }
            }
        }
        return null;
} 
```

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T21:14:11.227

只有一个控制台，而且只有一个`System.in`. 如果您关闭它，那么您将无法再读取它！你不需要关闭它`BufferedReader`，你也不应该。整个`finally`街区可以而且应该消失。

仔细阅读后，我什至不明白你为什么要首先*创建*`BufferedReader`- 它似乎没有任何功能。只需删除所有处理它的代码！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T21:17:22.737

您在这里不需要任何阅读器，只需使用`Console`实例即可。

```
public String Func() {
        Console console = System.console();
        if (console == null)
            throw new IllegalStateException("No console available");

        try {
           String username = console.readLine("Username: ");
           String pwd = new String(console.readPassword("Password: "));
           return pwd;
        } catch (IOException e) {
            e.printStackTrace();
            return null;
        }
} 
```

使用您的问题编辑进行编辑。只需使用 Console 类，它可以读取/写入，您不需要任何读取器/写入器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T21:16:56.347

你不应该关闭你的`Console`. 保持打开状态，直到您的程序不再需要从中读取。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-08T21:21:02.023

改用 java.util.Scanner 之类的东西，正如其他人所说，不要担心尝试关闭 system.in。

干净多了：

```
Scanner in = new Scanner(System.in);
String password  = in.nextLine(); 
String username  = in.nextLine(); 
```

无需整理/异常处理。

# heroku - 在 Heroku 上扩展 Meteor 应用程序

> ID：10956085
> 
> 赞同：14
> 
> 时间：2012-06-08T21:11:05.050
> 
> 标签：heroku, meteor

在另一个[问题](https://stackoverflow.com/questions/10103603/scalability-of-a-meteor-app)的回答中，注意到“使用 'meteor deploy' 部署到托管服务器的应用程序还没有任何关于扩展的保证或 SLA。” 因此，如果我想确保现在可以完全扩展，就排除了使用他们托管服务器的可能性。

答案进一步指出“使用'meteor bundle'生成的服务器包基本上是一个单进程应用程序。它取决于您将其连接到多个实例，或者您想要实现自动缩放。”

读完之后，我对缩放问题仍然很不清楚。在 Heroku 上，我假设我可以在 dynos 中运行“meteor bundle”单进程应用程序。但是，如果我使用许多 dyno，每个都运行一个 Meteor 服务器捆绑包，Meteor 是否设计为可以将它们连接起来，以便它们都与相同的数据同步（即使存在延迟）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T21:45:40.607

在回答我自己的问题时，Meteor 团队宣布了包含可扩展性计划的[路线](https://trello.com/card/multitier-server-architecture-support-very-large-numbers-of-simultaneous-clients/508721606e02bb9d570016ae/46)图，以包含在 Meteor 1.0 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T18:50:59.580

Meteor还是很年轻的平台。在可扩展性之前，我个人会提出安全问题，因为 Meteor 目前在公开发布中没有安全模型。Meteor 文档中也没有提到安全性，但 Meteor 团队已经确认他们正在研究它，未来的版本将会有它。看看这里：[https ://stackoverflow.com/questions/10100813/when-can-we-expect-data-validation-and-security-in-meteor](https://stackoverflow.com/questions/10100813/when-can-we-expect-data-validation-and-security-in-meteor)

所以我认为你和我（为了安全实施）必须等待更多版本，也许在内部处理 1.0 可扩展性之前，或者至少他们应该有文档解释如何做到这一点。

为了了解如何处理可扩展性并更好地了解它，我认为来自流星团队的人应该回答有关可扩展性的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-02T18:08:10.273

您可以将流星应用程序部署到 Heroku，但您需要坚持使用 1 个 dyno。因为 Heroku 不支持 WebSockets 或 Sticky Sessions。

所以你需要找到另一个 PAAS 提供商。Nodejitsu 是一个不错的选择。如果你不想扩展到多个实例，你需要找到一种方法来同步实例之间的写操作。

然后你需要[Meteor Cluster](http://goo.gl/2aHJ2) - [http://goo.gl/2aHJ2](http://goo.gl/2aHJ2)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-10T18:22:38.537

我最近问了一个类似的问题（[哪种 PaaS 最适合需要可扩展的 Meteor JS 应用程序？](https://stackoverflow.com/questions/16467938/which-paas-would-be-best-for-a-meteor-js-app-that-needs-to-be-scalable)），其中一个答案很好地解释了 Heroku 的情况（我认为）——请参阅[https://stackoverflow.com/一个/16468418/2311632](https://stackoverflow.com/a/16468418/2311632)。还指出（[https://stackoverflow.com/a/16468609/2311632](https://stackoverflow.com/a/16468609/2311632)) 可以部署在meteor.com 上。虽然扩展仍在路线图上，但可能他们已经或正在“内部”解决一些扩展问题，或者可以将他们的服务保持在 Meteor 应用程序扩展的最前沿。否则，您可以使用 EC2 并垂直扩展（增强单个实例的能力），直到 Meteor 使用官方扩展解决方案达到目标。设置 EC2 对我来说是新的，但这个答案 ( [https://stackoverflow.com/a/16468826/2311632](https://stackoverflow.com/a/16468826/2311632) ) 看起来是一个很好的起点。我还没有尝试过，但可能很快就会。

# node.js - Nodejs 模板系统文档

> ID：10956086
> 
> 赞同：1
> 
> 时间：2012-06-08T21:11:06.903
> 
> 标签：node.js, templates, dsl, templating-engine, unsupervised-learning

我想为 node.js 创建自己的模板系统（仅用于教育目的），但我找不到任何有用的信息。有什么好的教程可以帮助我吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T20:51:12.637

[Jison](http://zaach.github.com/jison/docs/) docs 将是一个很好的起点。详细了解如何使用它来构建CoffeeScript[语法](https://stackoverflow.com/questions/8467150/1113772)[解析器](http://coffeescript.org/v1/annotated-source/grammar.html)[可能](http://ajaxian.com/archives/jison-build-parsers-in-javascript)有助于了解全局。

**参考**

*   [npm：rfc 6570 的 UriTemplate 实现](https://www.npmjs.com/package/uritemplate)

# css - 固定侧边栏流动内容，“清除两者”问题

> ID：10956092
> 
> 赞同：0
> 
> 时间：2012-06-08T21:11:28.433
> 
> 标签：css, fixed, sidebar, fluid-layout

在此处检查代码：http: [//jsfiddle.net/rahim701/jnU3W/](http://jsfiddle.net/rahim701/jnU3W/)

这里我们有一个左侧边栏（固定宽度）和右侧内容框（流体宽度）问题是，我想在内容框处使用 css clear。但是如果我使用“清除两者”，它也会抓住左侧边栏来清除。请检查代码以确定。清除后我在那里写了“Bangladesh”。但在完成左侧边栏之后，它就在那里。

有什么解决办法吗？

我看到其他一些标题几乎相同的帖子，但没有找到任何答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T21:31:02.693

不确定我是否理解正确，但据我所知，一个简单的 clear:right 会做到的

# linux - bash脚本的格式输出

> ID：10956096
> 
> 赞同：2
> 
> 时间：2012-06-08T21:11:42.383
> 
> 标签：linux, bash, scripting

我正在尝试使用 bash 脚本显示某些详细信息，但 bash 脚本的输出与终端的输出不同。

**终端输出：**

```
ubuntu@ubuntu:~/ubin$ cat schedule.text  | grep 09/06/12
Sat 09/06/12 Russia           00:15 Czech Republic   A
Sat 09/06/12 Netherlands      21:30 Denmark          B
ubuntu@ubuntu:~/ubin$ 
```

**Bash 脚本输出：**

```
ubuntu@ubuntu:~/ubin$ bash fixture.sh 
Sat 09/06/12 Russia 00:15 Czech Republic A Sat 09/06/12 Netherlands 21:30 Denmark B
ubuntu@ubuntu:~/ubin$ 
```

如您所见，bash 脚本的输出与终端的输出不同。我的 bash 脚本输出在一行中包含所有内容。

**夹具.sh：**

```
A=$(date +%d/%m/%y) #get today's date in dd/mm/yy fmt
fixture=$(cat /home/ubuntu/ubin/schedule.text | grep $A)
echo $fixture 
```

所以，我的问题是如何使我的 bash 脚本输出类似于终端输出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T21:14:45.003

使用双引号：

```
echo "$fixture" 
```

当变量fixture 嵌入了换行符并且没有被引用时，bash 将它拆分为不同的参数来回显。为简化起见，假设fixture 是字符串“a\nb”。如果没有引号，bash 将两个参数传递给 echo:`a`和`b`. 使用引号，bash 只传递一个参数并且不丢弃换行符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T21:23:40.420

你不需要`echo`，或`cat`：

```
A=$(date +%d/%m/%y) #get today's date in dd/mm/yy fmt
grep $A /home/ubuntu/ubin/schedule.text 
```

或者，如果您更喜欢单线：

```
grep $(date +%d/%m/%y) /home/ubuntu/ubin/schedule.text 
```

# javascript - 使用 jQuery 更改使用 JSF 创建的表格的单元格

> ID：10956102
> 
> 赞同：1
> 
> 时间：2012-06-08T21:12:23.087
> 
> 标签：javascript, jquery, jsf, xhtml

在`xhtml`使用 JSF 创建的页面中，我需要使用 JavaScript / jQuery 来更改表格单元格的内容。我知道如何为`div`包含表和`tbody`. 我还可以为`div`自身和目标列分配唯一的类名。目标行由`data-rk`属性标识。

```
<div id="tabForm:centerTabView:personsTable" class="ui-datatable ui-widget personsTable">
    <table role="grid">
        <tbody id="tabForm:centerTabView:personsTable_data" >
            <tr data-rk="2" >
                <td ... />
                <td class="lastNameCol" role="gridcell">
                    <div> To Be Edited </div>
                </td>
                <td ... />
            </tr>
            <tr ... />
        </tbody>
    </table>
</div> 
```

我尝试了许多不同 jQuery 选择器的组合，但我真的迷路了。我需要在该特定 div 或该特定表内搜索我的目标行和目标列，因为 xhtml 页面可能包含具有不同唯一 ID 的其他表（并且意外地具有相同的行和列 ID）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T01:23:46.763

像这样的东西？

```
$("#tabForm\\:centerTabView\\:personsTable tr[data-rk=2] td.lastNameCol div").text("edited"); 
```

或者如果`personsTable`在当前视图中足够独特

```
$("[id$=personsTable] tr[data-rk=2] td.lastNameCol div").text("edited"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T21:17:40.210

请检查此小提琴以获取您的新 html 代码

[没有冒号的小提琴](http://jsfiddle.net/c26uv/4/)

[摆弄结肠](http://jsfiddle.net/c26uv/3/)

# c++ - 如何结合模板方法模式和多重继承？

> ID：10956107
> 
> 赞同：4
> 
> 时间：2012-06-08T21:12:38.680
> 
> 标签：c++, inheritance, design-patterns, template-method-pattern

我可以更改此代码以使其正常工作吗？是否可以结合模板方法模式和多重继承？在不同的类中实现不同的算法似乎很方便。谢谢你。

```
class TBase {
public:
    virtual void Do1() const = 0;
    virtual void Do2() const = 0;

    void Do() const {
        Do1();
        Do2();
    }
};

class TFirstAlgorithm {
public:
    void Do1() const {}
};

class TSecondAlgorithm {
public:
    void Do2() const {}
};

class TAlgorithm
    : public TBase
    , public TFirstAlgorithm
    , public TSecondAlgorithm
{}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T21:26:50.453

从根本上说，您的问题是`TFirstAlgorith::Do1`与`TBase::Do1`（同样`TSecondAlgorithm::Do2`与`TBase::Do2`.

解决此问题的一种可能方法是使它们相关：

```
class TBase {
public:
    virtual void Do1() const = 0;
    virtual void Do2() const = 0;

    void Do() const {
        Do1();
        Do2();
    }
};

class TFirstAlgorithm : public virtual TBase {
public:
    void Do1() const { }
};

class TSecondAlgorithm : public virtual TBase {
public:
    void Do2() const { }
};

class TAlgorithm
    : public TFirstAlgorithm
    , public TSecondAlgorithm
{}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T21:17:39.553

您可以使用 Do1 和 Do2 的实现并在其中调用适当的算法。

```
 class TBase {
    public:
        virtual void Do1() const = 0;
        virtual void Do2() const = 0;

    void Do() const {
        Do1();
        Do2();
    }
};

class TFirstAlgorithm {
public:
    void Do1() const {}
};

class TSecondAlgorithm {
public:
    void Do2() const {}
};

class TAlgorithm
    : public TBase
    , public TFirstAlgorithm
    , public TSecondAlgorithm
{
   virtual void Do1() const { TFirstAlgorithm::Do1() ; }
   virtual void Do2() const { TSecondAlgorithm::Do2() ; }  
}; 
```

# codeigniter - CodeIgniter 使日期助手输出 12 小时格式

> ID：10956112
> 
> 赞同：0
> 
> 时间：2012-06-08T21:13:00.587
> 
> 标签：codeigniter

使用 Ci 日期助手，我如何将 '06/08/2012 17:10pm' 转换为 12 小时格式？

```
date('m/d/Y H:ia ', strtotime($row->entryCreationDateTime)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T21:23:23.707

该代码与 CodeIgniter 无关，它只是 PHP 函数。有关日期功能的信息，请参阅[手册页](http://php.net/manual/en/function.date.php)。

small chatacter`h`将小时设置为 12 小时格式，而 capital chatacter`H`将小时设置为 24 小时格式。

将代码更改为：

```
date('m/d/Y h:ia ', strtotime($row->entryCreationDateTime)) 
```

# layout - BlackBerry 6/7 Table Layout with ColSpan - Number Selection Widget

> ID：10956120
> 
> 赞同：1
> 
> 时间：2012-06-08T21:14:15.613
> 
> 标签：layout, blackberry

尝试为 BlackBerry 6/7 制作一个简单的数字点击器控件，如下所示：

![在此处输入图像描述](../Images/8d12453d2c9ccd138970558b603cd852.png)

从本质上讲，它只是一个文本字段和两个按钮，并带有一个 Manager 将它们隔开。

我知道不支持的附加 TableManager，但它不支持列扫描。而且，我发现使用深度嵌套的管理器的概念......令人不安。

而且，这会出现多次，所以我想要一个简单的、可重用的组件。

因此，我构建了一个简单的管理器来包含这三个组件，甚至允许您出于风格原因提供自己的文本字段或按钮。代码附在下面。显然比它需要的更漂亮，但工作都是在子布局中完成的。

实际发生的是 3 个组件中的每一个的右上角都出现在正确的位置，但是 3 个组件被“收缩包装”到显示其内容所需的最小尺寸，忽略了请求的 USE_ALL_WIDTH 和 USE_ALL_HEIGHT。这可能是一个小问题，但我怎样才能让这些组件真正使用所有宽度和使用所有高度？我在 USE_ALL_* 上尝试了几种变体，但还没有找到获胜的变体。当然，任何其他改进也将受到欢迎。

谢谢。

```
package layout;

import net.rim.device.api.system.Display;
import net.rim.device.api.ui.Field;
import net.rim.device.api.ui.Manager;
import net.rim.device.api.ui.XYEdges;
import net.rim.device.api.ui.component.ButtonField;
import net.rim.device.api.ui.component.EditField;

/**
 * XXX BROKEN DO NOT USE YET - layout fail, components get shrink-wrapped.
 * 
 * NumberClicker Makes a layout with three components, like this:
 * <pre>
 * +-------------------+ +-------------------+
 * |                   | |          +        |
 * |         3         | |-------------------|
 * |                   | |-------------------|
 * |                   | |          -        |
 * |-------------------| |-------------------|
 * </pre>
 * Note that by default, the buttons are set to increment and decrement the number in the textfield!
 * @author Ian Darwin
 */
public class NumberClicker extends Manager {

    private static final long SUBCOMPONENT_STYLE = Field.USE_ALL_HEIGHT | Field.USE_ALL_WIDTH;
    private static final long MANAGER_STYLE = Field.FIELD_HCENTER | Field.FIELD_VCENTER;

    final XYEdges MARGINS = new XYEdges(10,10,10,10);

    EditField number = new EditField(SUBCOMPONENT_STYLE);
    ButtonField plus = new ButtonField("+", SUBCOMPONENT_STYLE);
    ButtonField minus = new ButtonField("-", SUBCOMPONENT_STYLE);

    public NumberClicker() {
        this(MANAGER_STYLE);
    }
    public NumberClicker(long style) 
    {
        this(null, null, null, style);
    }

    /** Constructor allows you to provide your own three fields */
    public NumberClicker(EditField number, ButtonField plus, ButtonField minus) { 
        this(number, plus, minus, MANAGER_STYLE);
    }

    /** Constructor allows you to provide your own three fields ANd override style.
     * If any of the fields is null, the default value is used.
     */
    public NumberClicker(EditField number, ButtonField plus, ButtonField minus, long style) {
        super(style);
        if (number != null) {
            this.number = number;
        } else {
            this.number.setMargin(MARGINS); // set margins on our default, constructed above.
        }
        setValue(1);
        add(this.number); // Nulls allowed, so must be careful to use "this." throughout this method.

        if (plus != null) {
            this.plus = plus;
        } else {
            this.plus.setMargin(MARGINS);
        }
        add(this.plus);

        if (minus != null) {
            this.minus = minus;
        } else {
            this.minus.setMargin(MARGINS);
        }
        add(this.minus);

        this.plus.setRunnable(new Runnable() {
            public void run() {
                increment();
            }           
        });
        this.minus.setRunnable(new Runnable() {
            public void run() {
                decrement();
            }           
        });
    }

    public void increment() {
        number.setText(Integer.toString(Integer.parseInt(number.getText().trim()) + 1));
    }

    public void decrement() {
        number.setText(Integer.toString(Integer.parseInt(number.getText().trim()) - 1));
    }

    /** Return the integer value of the clicker. Do not call if you are re-using this as a three-component layout manager! */
    public int getValue() {
        return Integer.parseInt(number.getText().trim());
    }

    public void setValue(int value) {
        number.setText(Integer.toString(value));
    }

    /** 
     * Compute sizes and positions of subfields.
     * 
     * Required by Manager 
     */
    public void sublayout(int width, int height)  {
        int layoutWidth = width;
        int layoutHeight = Math.min(height, Display.getHeight()); // no scrolling here
System.err.println("Display:" + Display.getWidth() + "x" + Display.getHeight());

        int halfX = layoutWidth / 2;
        int halfY = layoutHeight / 2;
System.err.println("sublayout:" + width + "," + height + "; " + halfX + "," + halfY);

        int numberWidth = halfX - number.getMarginLeft() - number.getMarginRight();
        int numberHeight = layoutHeight - number.getMarginTop() - number.getMarginBottom();
        layoutChild(number, numberWidth, numberHeight);
        setPositionChild(number, 0 + number.getMarginLeft(), 0 + number.getMarginTop());
System.err.println(number + " " + numberWidth + "," + numberHeight + " " +number.getMarginLeft());

        int plusWidth = halfX - plus.getMarginLeft() - plus.getMarginRight();
        int plusHeight = halfY - plus.getMarginTop() - plus.getMarginBottom();
        layoutChild(plus, plusWidth, plusHeight);
        setPositionChild( plus, halfX + plus.getMarginLeft(), plus.getMarginTop());

        int minusWidth = halfX - minus.getMarginLeft() - minus.getMarginRight();
        int minusHeight = halfY - minus.getMarginTop() - minus.getMarginBottom();
        layoutChild(minus, minusWidth, minusHeight);
        // Use plus.getMarginHeight() for better alignment.
        setPositionChild( minus, halfX + plus.getMarginLeft(), halfY + minus.getMarginTop() );

        //setVirtualExtent(layoutWidth, height);
        setExtent(layoutWidth, height);
    }

    public EditField getNumberField() {
        return number;
    }
    public void setNumberField(EditField number) {
        this.number = number;
    }
    public ButtonField getPlusField() {
        return plus;
    }
    public void setPlusField(ButtonField plus) {
        this.plus = plus;
    }
    public Field getMinusField() {
        return minus;
    }
    public void setMinusField(ButtonField minus) {
        this.minus = minus;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T10:29:30.063

最接近您想要实现的目标是

![在此处输入图像描述](../Images/587be54e151b46c4b65d23ac2bd0f05e.png)

几点注意事项：

1.  `EditField`总是使用`USE_ALL_WIDTH`. 无论您是否请求它都没有关系。因此，如果你想限制它的宽度，你必须重写它的`layout()`方法。在我的代码片段中，它的宽度受到该字段值允许的最大字符数的限制（请参阅 参考资料`CustomEditField`）。

2.  `ButtonField`忽略`USE_ALL_WIDTH`和`USE_ALL_HEIGHT`。它的范围仅取决于按钮内的文本。为了达到 的效果`USE_ALL_WIDTH`，您必须为其添加水平填充。

3.  不幸的是，如果你想达到 USE_ALL_HEIGHT 效果，填充技巧将不起作用。当您向按钮添加垂直填充时，在某个阶段它会垂直重复其背景。如果需要，您必须为其编写自定义按钮字段。

[还可以在此页面](http://supportforums.blackberry.com/t5/Java-Development/Implement-advanced-buttons-fields-and-managers/ta-p/488276)查看**BlackBerry 的高级 UI 组件** 。

这是代码：

```
import net.rim.device.api.ui.Font;
import net.rim.device.api.ui.FontMetrics;
import net.rim.device.api.ui.Manager;
import net.rim.device.api.ui.UiApplication;
import net.rim.device.api.ui.XYEdges;
import net.rim.device.api.ui.component.ButtonField;
import net.rim.device.api.ui.component.EditField;
import net.rim.device.api.ui.decor.Border;
import net.rim.device.api.ui.decor.BorderFactory;
import net.rim.device.api.ui.text.NumericTextFilter;

public class NumberClicker extends Manager {

    private class CustomEditField extends EditField {
        public int getPreferredWidth() {
            FontMetrics fontMetrics = new FontMetrics();
            getFont().getMetrics(fontMetrics);
            return getMaxSize()*fontMetrics.getMaxCharWidth();
        };

        public int getPreferredHeight() {
            // forcing the field to be single lined
            return getFont().getHeight();
        }

        protected void layout(int width, int height) {
            super.layout(
                Math.min(width, getPreferredWidth()),
                Math.min(height, getPreferredHeight())
            );
        }
    }

    final XYEdges MARGINS = new XYEdges(2,2,2,2);

    EditField _number;
    Manager _numberManager;

    ButtonField _plus;
    ButtonField _minus;

    public NumberClicker() {
        super(0);

        Font font = getFont();
        font = font.derive(Font.BOLD, font.getHeight() + 10);
        _number = new CustomEditField();
        _number.setFilter(new NumericTextFilter());
        _number.setMaxSize(1);
        _number.setFont(font);
        setValue(1);

        _numberManager = new Manager(0) {
            protected void sublayout(int width, int height) {           
                layoutChild(_number, width, height);
                setPositionChild(_number, 
                    Math.max(0, (width - _number.getWidth())/2), 
                    Math.max(0, (height - _number.getHeight())/2)
                );
                setExtent(width, height);
            }
        };

        _numberManager.setBorder(BorderFactory.createRoundedBorder(new XYEdges()));
        _numberManager.setMargin(MARGINS);
        _numberManager.add(_number);
        add(_numberManager);

        _plus = new ButtonField("+", 0);
        _plus.setMargin(MARGINS);
        add(_plus);

        _minus = new ButtonField("-");
        _minus.setMargin(MARGINS);
        add(_minus);

        _plus.setRunnable(new Runnable() {
            public void run() {
                increment();
            }           
        });

        _minus.setRunnable(new Runnable() {
            public void run() {
                decrement();
            }           
        });
    }

    private void increment() {
        synchronized (UiApplication.getEventLock()) { //probably not needed here. overkill.
            _number.setText(Integer.toString(Integer.parseInt(_number.getText().trim()) + 1));
        }
    }

    private void decrement() {
        if (Integer.parseInt(_number.getText()) <= 0) {
            return;
        }

        synchronized (UiApplication.getEventLock()) { //probably not needed here. overkill.
            _number.setText(Integer.toString(Integer.parseInt(_number.getText().trim()) - 1));
        }
    }

    public void setValue(int value) {
        if (value < 0) {
            return;
        }

        synchronized (UiApplication.getEventLock()) { // MUST. can be called from non UI thread.
            _number.setText(Integer.toString(value));
        }
    }

    /** 
     * Compute sizes and positions of subfields.
     */
    public void sublayout(int width, int height)  {
        int heightUsed = 0;
        int halfX = width / 2;

        Border border = _plus.getBorder();
        int plusWidth = halfX - _plus.getMarginLeft() - _plus.getMarginRight();
        int plusHeight = height - _plus.getMarginTop() - _plus.getMarginBottom();

        // calculate horizontal padding so the button will look like USE_ALL_WIDTH
        int plusHPadding = (Math.max(0, plusWidth - _plus.getPreferredWidth() - border.getLeft() - border.getRight()))/2;
        _plus.setPadding(0, plusHPadding, 0, plusHPadding);

        layoutChild(_plus, plusWidth, plusHeight);
        setPositionChild( _plus, halfX + _plus.getMarginLeft(), _plus.getMarginTop());
        heightUsed += _plus.getHeight() + _plus.getMarginTop() + _plus.getMarginBottom();

        border = _minus.getBorder();
        int minusWidth = halfX - _minus.getMarginLeft() - _minus.getMarginRight();
        int minusHeight = height - _plus.getHeight() - _minus.getMarginTop() - _minus.getMarginBottom();

        // calculate horizontal padding so the button will look like USE_ALL_WIDTH
        int minusHPadding = (Math.max(0, minusWidth - _minus.getPreferredWidth() - border.getLeft() - border.getRight()))/2; 
        _minus.setPadding(0, minusHPadding, 0, minusHPadding);

        layoutChild(_minus, minusWidth, minusHeight);
        setPositionChild( _minus, halfX + _plus.getMarginLeft(), heightUsed + _minus.getMarginTop());
        heightUsed += _minus.getHeight() + _minus.getMarginTop() + _minus.getMarginBottom();

        int numberWidth = halfX - _numberManager.getMarginLeft() - _numberManager.getMarginRight();
        int numberHeight = heightUsed - _numberManager.getMarginTop() - _numberManager.getMarginBottom();
        layoutChild(_numberManager, numberWidth, numberHeight);
        setPositionChild(_numberManager, _numberManager.getMarginLeft(), _numberManager.getMarginTop());

        setExtent(width, heightUsed);
    }
} 
```

# php - 我在 phpADmin 中指定什么路径

> ID：10956132
> 
> 赞同：0
> 
> 时间：2012-06-08T21:15:43.990
> 
> 标签：php, mysql

我的数据文件在我的桌面上，当我运行时：

```
CREATE TABLE A....

LOAD DATA LOCAL INFILE '~/blah.txt'
INTO TABLE
A
FIELDS TERMINATED BY ','
ENCLOSED BY '"'
(l1,l2,l3,l4,l5,444,4444); 
```

我得到一个错误。在 Mysql 系统中我可以很容易地做到这一点，但我如何用 phpmyadmin 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T09:28:43.060

将该文件复制到 phpmyadmin 文件夹并运行此查询

将数据本地 INFILE 'blah.txt' 加载到`tb_name`由 ',' 终止的表字段中 '\n'# 受影响的行：1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T21:19:51.380

phpmyadmin 不像你那样运行。它以网络服务器用户或其他用户身份运行，因此`~`指的是该用户的主文件夹。只需使用绝对路径，例如：

```
LOAD DATA LOCAL INFILE '/home/yourname/blah.txt' 
```

# c++ - 未初始化的引用成员

> ID：10956139
> 
> 赞同：19
> 
> 时间：2012-06-08T21:17:25.843
> 
> 标签：c++

基本上我想要做的是将精灵的活动动画的引用存储为 Actor 类中的私有成员。我想使用参考，所以我不必多次实际创建动画，但我一直收到错误。

演员类声明：

```
class Actor
{
public:
        Actor();
        ~Actor();
        void setActiveAnimation(Animation anim);
        void draw(sf::RenderWindow& win);

private:
        sf::Sprite sprite;
        MaJR::Animation& activeAnimation;
}; 
```

演员类实现：

```
Actor::Actor()
{
    // constructor
}

Actor::~Actor()
{
    // destructor
}

void Actor::setActiveAnimation(Animation anim)
{
    activeAnimation = anim;
    activeAnimation.gotoStart();
}

void Actor::draw(sf::RenderWindow& win)
{
    sprite.setTexture(activeAnimation.getActiveFrame());
    win.draw(sprite);
    activeAnimation.nextFrame();
} 
```

构建输出：

```
/home/mike/MaJR Game Engine/src/Actor.cpp||In constructor 'MaJR::Actor::Actor()':|
/home/mike/MaJR Game Engine/src/Actor.cpp|8|error: uninitialized reference member 'MaJR::Actor::activeAnimation' [-fpermissive]|
||=== Build finished: 1 errors, 0 warnings ===| 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-08T21:19:37.610

不能*重新分配*引用，因此必须在*member-initialization-list 中*对其进行初始化。但是，您打算重新分配它，因此您想要的不是参考。更重要的是，在您的`setActiveAnimation`函数中，您将此类引用设置为作为参数传递的值的副本，当代码退出函数时，这会给您留下无效的引用。也许指针会适合你？

在类体内：

```
MaJR::Animation* activeAnimation; 
```

和`setActiveAnimation`功能：

```
void Actor::setActiveAnimation(Animation* anim)
{
    activeAnimation = anim;
    activeAnimation->gotoStart();
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-08T21:20:36.113

当您的类中有一个成员是引用时，您必须在构造函数中对其进行初始化。一旦它被初始化，你就不能再改变它了（你可以改变它的值，但不能改变它所指的地方）。

将 activeAnimation 改为指针。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-08T21:21:44.657

您不能声明未初始化的引用。这意味着您需要在从类创建对象时初始化引用，`Actor`或者您不能使用引用。如果您需要动态更改它，那么您可以使用指针，或者可能更好的是*智能指针*（例如，[std::unique_ptr](http://en.cppreference.com/w/cpp/memory/unique_ptr)、[shared_ptr](http://en.cppreference.com/w/cpp/memory/shared_ptr)）。如果您不能使用 C++11，请查看 Boost 中的[智能指针](http://www.boost.org/doc/libs/1_49_0/libs/smart_ptr/smart_ptr.htm)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-08T21:19:59.467

您需要在定义时绑定引用。对于成员引用，这意味着在构造函数的初始化列表中。此外，绑定不能在声明后重新分配。

如果您在对象的实例化时没有对象（获取引用）`Actor`，那么您的下一个最佳选择是使用稍后可以根据需要重新分配的指针。

# c# - 当所有成员都被显式释放时，一个类是否需要实现 IDisposable？

> ID：10956140
> 
> 赞同：2
> 
> 时间：2012-06-08T21:17:27.047
> 
> 标签：c#, .net-2.0, idisposable

尝试了解何时需要实施 IDisposable：

我写了一个小例子。

```
 public class FileManager
  {
    private FileStream fileStream;
    public void OpenFile(string path)
    {
       this.fileStream = File.Open(path, FileMode.Open, FileAccess.Read);
    }
    public void CloseFile(string path)
    {
      if ( this.fileStream != null && this.fileStream.CanRead)
      {
        this.fileStream.Close();          
      }
      this.fileStream.Dispose();
    }
  }

// client
var manager = new FileManager();
manager.Open("path");
manager.Close("path"); 
```

这个类是否需要实现 IDisposable，因为它有一个托管资源 (FileStream)，它持有一个非托管资源（一个文件）？或者我不必实现 IDisposable 因为我在课堂上进行清理？

使困惑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T21:37:19.403

对于任何类型的每个实例，它实现`IDisposable`并可能以一种非平凡的方式实现，它必须在每一刻都可以识别该实例将如何被`Dispose`d。在大多数情况下，这意味着每个`IDisposable`实例都有一个定义明确的所有者，负责调用`Dispose`. 在`FileStream`类创建的实例的情况下，您的类是所有者，因为没有其他东西可以做到`Dispose`这一点。

*具有引用它们拥有的*`IDisposable`实例的字段的类几乎总是应该实现，并将它们的方法用于它们拥有的对象。你的班级有这样一个领域；它应该因此实现。*`IDisposable``Dispose``Dispose``IDisposable``IDisposable`*

 *只要有可能，应该设计一个需要清理的类，以便调用`IDisposable.Dispose`它就足以执行任何可能需要的清理。在某些情况下，不使用其他方法执行清理可能是不切实际的，但这种情况非常罕见。如果可以设计一个类`Dispose`来处理所有必要的清理工作，那么就应该这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T21:23:51.720

如果您（或其他开发人员）使用 FileManager 类并忘记关闭它，您可能希望实现 IDisposable。请注意[IDisposable](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)`Dispose(false)`的示例如何在终结器中调用 to 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T21:23:55.863

为什么要将路径传递给 close 方法？在您的情况下，您的经理似乎可以在打开另一个文件之前打开不同的文件，因此您不想处理该对象。

恕我直言，我更愿意以这种方式实现它：

```
public class FileManager : IDisposable
{
    private string path;
    private FileStream fileStream;
    public FileManager(string path) 
    {
       this.path = path;
    }
    public void OpenFile()
    {
       this.fileStream = File.Open(path, FileMode.Open, FileAccess.Read);
    }
    public void CloseFile()
    {
      if ( this.fileStream != null && this.fileStream.CanRead)
      {
        this.fileStream.Close();
        this.fileStream.Dispose();
      }
    }

    public void Dispose(){
        this.CloseFile();
    }
}

// client
var manager = new FileManager("path")){
manager.OpenFile();
//Do other stuff
manager.CloseFile() 
```

或者

```
using( var manager = new FileManager("path")){
    manager.OpenFile();
    //Do other stuff
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-08T21:24:41.120

如果你调用你的`Close`方法，你不需要单独处理。但是，在这种情况下，一般做法是实现`IDisposable`，因为不能保证该类的使用者会调用`Close`.

只有在创建资源然后在同一方法中处理资源时，您才能可靠地省略`IDisposable`，因为这是您可以确保资源在使用后被明确处理的唯一方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-08T21:31:10.317

您应该实现 IDisposable。

想象：

```
var manager = new FileManager();
manager.Open("path"); // <- throws for some reason
manager.Close(); // <- then this never gets called 
```

当然，您现在可以像这样尝试/最终解决它：

```
try {
  var manager = new FileManager();
  manager.Open("path");
}
finally {
  manager.Close();
} 
```

...但这正是 using 和 IDisposable 的发明目的，您可以轻松地编写：

```
using (var manager = new Manager()) {
  manager.OpenFile("path");
} // and CloseFile will automagically be called here. 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-08T21:22:41.747

如果不是声明性的，在这里实施也看不到任何*真正的*好处。`IDisposable`如果有人看到你的类实现`IDisposable`，他就会明白有些地方需要在使用后清理资源。它只是像这样声明类型的内置`.net`约定。

如果您不使用该模式，则可以自由地这样做，但是您违反了建议的并且主要遵循社区指南的`.net`类型声明。*

# .net - 设置程序集以进行调试

> ID：10956141
> 
> 赞同：3
> 
> 时间：2012-06-08T21:17:29.380
> 
> 标签：.net, debugging, .net-assembly, visual-studio-debugging, pdb

.Net 程序集具有用于调试的 pdb 文件。PDB 文件指向确切的源位置以及其他详细信息。如果我正在构建程序集并在本地调试它，这很好。当您需要在其他计算机上部署程序集时，问题就开始了。在这种情况下进行调试可以通过多种方式完成；1.您可以将源放在共享位置并在 VS 请求时指向该位置 2.您可以使用源服务器并指向源控制并配置 VS 以使用该位置

Java 有源 jar，可以与实际 jar 本身一起部署并使用它进行调试。这似乎是一个更简单、更整洁的解决方案。我们可以用 .Net 做到这一点吗（我知道 sourcepack 提供了类似的功能）？或者有更好/更简单的解决方案选项吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:13:20.500

.NET 程序集实际上不需要 PDB！PDB 文件不指向确切的源位置，它只包含相关源文件的 GUID！

查看有关[如何链接 PDB 和源文件的更多详细信息](http://www.codeproject.com/Articles/37456/How-To-Inspect-the-Content-of-a-Program-Database-P)

有关更多信息，请参阅[约翰·罗宾斯](https://stackoverflow.com/questions/2859226/generate-pdb-from-net-dll-file)....

> .NET PDB 仅包含两条信息，源文件名及其行和局部变量名。所有其他信息都已在 .NET 元数据中，因此无需在 PDB 文件中复制相同的信息。

# zend-framework - Zend 布局问题

> ID：10956144
> 
> 赞同：0
> 
> 时间：2012-06-08T21:17:33.210
> 
> 标签：zend-framework, layout

我有一个主布局，我在这个布局中调用我的登录表单。这个登录表单留在页面的标题中，因为我不能把它放在视图中。

如果用户错误您的电子邮件或密码，将被重定向到尝试页面。在此页面中，我需要**在标题中删除此登录表单，并在视图中调用登录表单。**

但我对为此创建另一个布局不感兴趣，有人知道我该怎么做吗？

我的主页：

![在此处输入图像描述](../Images/9d698d931d6e086e705f75578fed3f91.png)

尝试页面：

![在此处输入图像描述](../Images/c88436e8068c2fc3ee1e7eb8c3baa0e2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T04:26:24.123

使用 zend 视图占位符助手

在你的 layout.phtml

```
<?php if(!$this->placeholder('hide_login_form')) :?>
<?php echo new My_Login_Form(); ?>
<?endif:?> 
```

现在在您要呈现整页表单的登录操作中

```
public function loginAction()
{
 $this->view->placeholder('hide_login_form')->set(true);
} 
```

# dns - 如何获取我的网站的短网址？

> ID：10956150
> 
> 赞同：0
> 
> 时间：2012-06-08T21:18:03.127
> 
> 标签：dns, short-url

这些天来，我看到很多网站使用`Short URLs`他们的整个网站而不是单个页面引用。例子：

```
http://bo.lt
http://ge.tt 
```

只是想知道如何为我的网站获取这些类型的自定义 URL。谁能让我知道这是如何工作的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T21:24:00.177

两个字母的高级域名，例如 .lt 和 .tt，属于各个国家。.lt 是立陶宛，.tt 是特立尼达和多巴哥。要获取这些高级国家域下的域，只需 google 为该国家的域名注册商并像注册 .com、.net、.org 等一样注册它。

# windows-phone-7 - 禁用自动大写 Windows Phone 7

> ID：10956152
> 
> 赞同：1
> 
> 时间：2012-06-08T21:18:24.240
> 
> 标签：windows-phone-7

当我的用户不希望代码中的单词自动大写时，如何使用键盘禁用 Windows Phone 7 中的自动大写？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T11:38:23.173

此行为由`InputScope`TextBox 的 决定。

您可以通过将其设置为符合需要的行为，将其更改为不具有您不想要的行为的东西。

请参阅：http:
[//msdn.microsoft.com/en-us/library/gg521152](http://msdn.microsoft.com/en-us/library/gg521152(v=vs.92).aspx)
(v=vs.92).aspx 和
[http://msdn.microsoft.com/en-us/library/ff426929(VS.95 ).aspx](http://msdn.microsoft.com/en-us/library/ff426929(VS.95).aspx)

# java - Xstream 创建类并导致痛苦的 permgen 集合

> ID：10956154
> 
> 赞同：2
> 
> 时间：2012-06-08T21:18:27.740
> 
> 标签：java, garbage-collection, xstream, permgen

我遇到了一个问题，即由 Xstreams xstream.fromXML(xmlString) 方法生成的类导致我们的 Web 容器从 permgen 填充中经历痛苦的​​垃圾收集。它导致我们的其中一个树脂 3.2.1 服务器变得无响应，从而强制重新启动。

我尝试使用不同的 Xstream 驱动程序，例如 jdom、dom4j、DomDriver、xpp 和 jettison，但没有成功。

生成的类的名称类似于 sun.reflect.GeneratedSerializationConstructorAccessor23

任何人都知道是否可以避免这种情况，或者这是当前 Xstream 实现（1.4.2）的不可避免的副作用？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T19:19:34.227

问题是我们为每个请求创建了一个新的 XStream 实例。它被设计为多线程并缓存生成的类。将其转换为静态实例修复了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T14:24:03.607

如果您使用 CMS 收集器，您可以使用`-XX:+CMSClassUnloadingEnabled`选项启用 perm gen 的后台收集。也增加烫发大小应该是有帮助`-XX:MaxPermSize=N`的。[您可以在此备忘单](http://blog.ragozin.info/2011/09/hotspot-jvm-garbage-collection-options.html)中找到更多与 GC 相关的选项。

虽然是 JVM GC 的调优，但不是修复 XStream 的问题。

# objective-c - 如果我打算稍后针对并发进行优化，我应该如何在 Cocoa 中设计通知？

> ID：10956155
> 
> 赞同：0
> 
> 时间：2012-06-08T21:18:27.977
> 
> 标签：objective-c, multithreading, cocoa, concurrency, notifications

在我的应用程序中，我想创建一个类来接收某种类型的通知，开始它的工作并在完成后发送通知。我认为稍后我可能需要使用并发来优化应用程序——因此该类所做的这项工作是在单独的线程中完成的——但现在我没有任何使用并发的知识或经验，我不想花时间在过早的优化上。但是，如果我理解正确，通知的默认用法并不能很好地与并发混合。

有没有一种方法可以让我现在只需遵循一些简单的通知规则，而无需深入并发，并避免以后重写所有代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T21:31:54.140

是的，您可以避免重写。

我会在块内编写您的工作/背景任务并使用 GCD（Grand Central Dispatch）。这可以正常工作，并且在非并行情况下易于使用，但也可以让您以后轻松地并行化您的工作。

我会调查`NSBlockOperation`和`NSOperationQueue`/或`dispatch_async()`

# javascript - 触发错误/Chrome 控制台以手动调用函数

> ID：10956156
> 
> 赞同：0
> 
> 时间：2012-06-08T21:18:35.207
> 
> 标签：javascript, html, google-chrome, firebug, firebug-lite

我有一个包含许多按钮的页面，我必须单击每个按钮来激活用户，这需要很长时间。我想知道是否可以通过 Firefox/Chrome 控制台调用链接？

例如假设有一个类

```
<a class="Button" href="#" link="/info.php?code=379645838760724 id="uqyiqh_25">
<span class="ButtonText">Click Here to activate user Greg</span></a> 
```

我想在控制台的帮助下触发标签的链接部分？我可以使用控制台选择此 ID 并调用链接吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T21:26:31.947

```
var elements = document.getElementsByClassName('Button');
for (var i = 0; i < elements.length; i++) {  
  var request = new XMLHttpRequest();  
  request.open('GET', elements[i].href, true);
  request.send();
} 
```

# html - HTML img 标签不显示图像

> ID：10956159
> 
> 赞同：-1
> 
> 时间：2012-06-08T21:18:50.317
> 
> 标签：html, image

我的代码中有一个 img 标签：

```
<img src="P:\MY DOCUMENTS\Visual Studio 2010\Projects\WebApp\Trends\GreenUp.jpeg" /> 
```

但是图像没有显示。标签的语法正确，路径正确，GreenUp.jpeg 存在，我想不出还有什么要检查的。我在 Firefox 中显示网页，发现一些文章说 FF 在 .jpeg 文件方面存在问题——但这里似乎并非如此。

任何建议表示赞赏。

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T21:24:57.023

尝试使用`file:///`前缀：

```
<img src="file:///P:\MY DOCUMENTS\Visual Studio 2010\Projects\WebApp\Trends\GreenUp.jpeg" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T21:48:06.257

这毕竟是 Firefox 的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-26T05:39:37.380

你可以试试这个：这对我有用......

```
<img src="P:\MY DOCUMENTS\Visual Studio 2010\Projects\WebApp\Trends\GreenUp.jpg" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-16T03:55:36.447

如果您使用的是 Visual Studio，则 IDE 可能在您的标签左侧显示了一个“灯泡”。单击它并选择“以base64编码”

此问题特定于 Visual Studio，因为无论使用何种浏览器，相同的代码都可以在记事本中完美运行。

# php - AJAX 之后的 jQuery UI 选项卡

> ID：10956162
> 
> 赞同：0
> 
> 时间：2012-06-08T21:19:06.313
> 
> 标签：php, jquery, ajax, jquery-ui, jquery-ui-tabs

我有一个项目 A 的列表，每个项目 A 都有一些项目 B。 A 中项目 B 的视图就像使用 jQuery UI 选项卡的选项卡。我正在使用控制器在页面中加载项目 A 的列表，并且相应项目 A 的每个项目 B 由 AJAX 加载（因为它们位于数据库的另一个表中，我需要传递项目 A 的每个 ID）。如果您使用 AJAX 加载 html 内容显然无法应用 UI 选项卡，所以我在 $(document).ready 中放置了一个 setTimout 来修复它。问题是，如果我在列表中有很多项目 A，我需要更多时间在 setTimeout 中，我会尝试在 AJAX 调用之后放置（之前使用 fancybox 插件解决了一些问题），并且所有选项卡都显示但他们不工作。

注意：我有多个标签组。

我在每个项目 A 中调用的函数用于显示项目 B 的列表，如选项卡。

```
 <script type="text/javascript">
        function cargar(id) {
            jQuery.ajax({
                url: "index.php?controller=trabajo",
                data: "id="+id,
                dataType: "HTML",
                type: "POST",
                success: function(datos) {
                    $('#orden-'+id).html(datos);                
                }
            });
        }
    </script> 
```

就绪函数：

```
 <script type="text/javascript">
    $(document).ready(function() {
        setTimeout(
            function() {        
                var $tabs= $('.tabs')
                    .tabs({ 
                        collapsible: true,
                        selected: -1                        
                    })
                    .scrollabletab({
                        'closable':true,
                    });
                $('#addTab').click(function(){

                });

                $('.ui-tabs-close').click(function(){

                });
            },
            500 //This time must be more big if there is more content.
        );
    });     
    </script> 
```

太感谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T21:28:44.443

我认为你做了很多不完全正确的假设。

首先，在我看来，整个问题都可以用更好的 SQL 来解决。当您说“在我从 A 获得 ID 之前我无法获得 B”时，这听起来像是连接查询的主要情况。这本身可以使整个问题变得容易得多。

所以：

```
Select ITEMS FROM TableA INNER JOIN TableB ON TableA.id = TableB.Aid 
```

至于设置超时问题，您是对的，您无法在不存在的 DOM 上加载选项卡。但是 Ajax 调用本身有一个更简单的解决方案 - 只需在 ajax 成功时实例化选项卡，您就可以在其中获取选项卡本身的内容：

```
jQuery.ajax({
            url: "index.php?controller=trabajo",
            data: "id="+id,
            dataType: "HTML",
            type: "POST",
            success: function(datos) {
                $('#orden-'+id).html(datos);  
                $('.tabs').tabs();   /*  This is where you'd instantiate the tabs */              
            }
        }); 
```

类似地，如果您必须执行两个单独的查询，您可以嵌套 ajax 调用....所以您将 A 中的数据作为 Ajax 调用进行查询，然后在 A 成功时您对 B 进行另一个 Ajax 调用。同样，在我看来，首选的方法是简单地在数据库级别获取数据进行连接（更少的开销），但如果需要，您当然可以堆叠 ajax 调用。

# scala - 在使用泛型的特征中初始化 val 时是否可以访问 Manifest？

> ID：10956163
> 
> 赞同：0
> 
> 时间：2012-06-08T21:19:17.687
> 
> 标签：scala, manifest, implicit

我正在尝试做什么（这是一个简化的示例，但包含我需要的所有内容）

```
trait MyTrait[T] {

  val name = Somefunction(simpleName)

  def simpleName(implicit m:Manifest[T]) = m.erasure.getSimpleName

} 
```

但是我在 simpleName 的 val 初始化时收到“没有可用于 T 的清单”编译器错误。

正在做

```
val name = Somefunction(implicitly[Manifest[T]].erasure.getSimpleName) 
```

做同样的事情

Somefunction 返回一个创建成本很高的对象，所以我只想创建一次。

我让它工作的唯一方法是使用一个函数来检查对象是否已经创建，如果是，则返回它，否则先创建它然后返回它。

**编辑——添加了我如何让它工作的例子**

例子

```
trait MyTrait[T] {
  var n:MyClass = null
  def name(implicit m:Manifest[T]) = {
    if(n == null) n = Somefunction(implicitly[Manifest[T]].erasure.getSimpleName)
    n
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T21:35:31.023

您不能将 a 的类型参数声明`trait`为具有`Manifest`上下文绑定，因为它等效于需要构造函数参数（特征不能具有）。我知道允许这样做是计划在某些未来版本的 scala 中使用的。

此外， a`val`不能有参数，因此根本不可能实例化 a`val`依赖于`Manifest[T]`我可以看到的实例。但是你说过你有这个工作：如何？

# windows-phone-7 - 如何禁用自动键盘正确 Windows Phone 7？

> ID：10956164
> 
> 赞同：1
> 
> 时间：2012-06-08T21:19:24.990
> 
> 标签：windows-phone-7

当用户在我的应用程序中输入时，如果他们选择了一个选项，我该如何禁用自动更正？我想通过代码来做到这一点。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T21:28:57.147

我相信您只需添加：

```
autoText="false" 
```

如果您使用的是`AutoCompleteBox`您设置的

```
IsTextCompletionEnable = false; 
```

# visual-studio-2005 - Visual Studio 2005：\a 转义序列出现在字符串中但无法删除

> ID：10956166
> 
> 赞同：0
> 
> 时间：2012-06-08T21:19:31.260
> 
> 标签：visual-studio-2005, escaping, j#

我在 J# 中使用 Excel 互操作从 MS Word 中提取文本。现在我遇到了从单元格中提取文本的问题。单元格是行标题，可见文本是“Total”，但提取的字符串是“Total\r\a”。我想删除转义序列，但 VS 不会检测或删除 \a。

```
cellText = cellText.Replace("\r", ""); //works

cellText = cellText.Replace("\a", ""); //error: unrecognized escape sequence
cellText = cellText.Replace("\\a", ""); //doesn't remove the sequence
cellText.Contains("\\a") returns false. 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T21:50:59.800

> ```
> cellText = cellText.Replace("\a", ""); //error: unrecognized escape sequence 
> ```

嗯，`\a`是警报（铃）字符的类 C 语言的标准转义序列，如果发送到控制台通常会发出声音。但是Java不支持它（尽管其他大多数都可以）。但是，您可以使用十六进制转义：

```
cellText = cellText.Replace("\u0007", ""); 
```

或八进制转义：

```
cellText = cellText.Replace("\007", ""); 
```

或者，如果您迫切希望避免邪恶的转义序列：

```
char bell = 7;
cellText = cellText.Replace(bell.toString(), ""); 
```

# r - 将数据框接收到 .txt 文件

> ID：10956170
> 
> 赞同：1
> 
> 时间：2012-06-08T21:20:01.853
> 
> 标签：r

我有一个名为 mytable 的 4 列数据框，其中包含数百行。看起来像

```
id         name                   count        rate
234     uert e@3 erwafrw23 weq    34           2
324     awrt%rw-fref-sfr-32 eq    78           4
329     jiowerfhguy qwhrb         90           8
123     234huib|f|wer fwfqwasgre  54           3 
```

如图所示，名称包含空格和特殊字符。所以我不能使用 write.table 来保存 data.frame。我试过了

```
sink('myfile.txt')
print(mytable,right=F)
sink() 
```

但是我遇到了一个问题，有时名字太长，四列不能一起显示在同一个页面中，即第三列或第四列可能会跑到下一页。

有什么方法可以调整下沉到 .txt 文件的表格的宽度吗？或者除了 sink() 之外，还有其他代码可以用来将数据框保存到 .txt 文件吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T21:36:32.127

看起来`write.table()`应该没问题。只需指定一个分隔符，例如`","`，或其他未出现在您的`name`列中的内容：

```
 my.df <- data.frame(ID=c(234,324,329,123), 
      name = c("uert e@3 erwafrw23 weq"," awrt%rw-fref-sfr-32 eq","jiowerfhguy qwhrb","234huib|f|wer fwfqwasgre"),
      count = c(34,78,90,54), rate = c(2,4,8,3))

    write.table(my.df, file = "my.df.txt", sep = ",", col.names = colnames(my.df))

    # read it back in
    my.df2 <- read.table(file = "my.df.txt",sep = ",", header = TRUE, stringsAsFactors = FALSE) 

    all(my.df == my.df2) 
    TRUE 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T22:45:30.673

您似乎对文件和控制台输出之间的区别感到困惑。带有 的线条的宽度没有限制`write.table`，至少在正常使用中不会接近。`options(width=72)`您可以使用和使用来控制控制台屏幕宽度，`capture.output(print(mytable))`以便输出满足您可能拥有的任何未说明的宽度要求。

# c# - wpf 命令控制可见性

> ID：10956172
> 
> 赞同：2
> 
> 时间：2012-06-08T21:20:16.253
> 
> 标签：c#, .net, wpf, xaml, command

我有一个自定义命令：

```
public static class CommandLibrary
{
    private static RoutedUICommand cmdMyCommand = new RoutedUICommand("My command", "MyCommand", typeof(CommandLibrary));
    public static RoutedUICommand MyCommand{ get { return cmdMyCommand ; } }
} 
```

我注册了一个这样的绑定

```
CommandManager.RegisterClassCommandBinding(typeof(SomeClass), new CommandBinding(CommandLibrary.MyCommand, new ExecutedRoutedEventHandler(myCommandExecuteHandler), new CanExecuteRoutedEventHandler(myCommandCanExecuteHandler))); 
```

在 generic.xaml 我有一个带有 Command 属性集的按钮。该按钮正在根据 myCommandCanExecuteHandler 中的逻辑正确启用/禁用。

但现在我还想控制这个按钮的可见性（独立于映射到 IsEnabled 的 CanExecute）。我该如何解决这个问题？

在这里可以找到关于同一问题的讨论：[http](http://social.msdn.microsoft.com/forums/en-US/wpf/thread/c20782f8-2d04-49d3-b822-f77b4b87c27a/) ://social.msdn.microsoft.com/forums/en-US/wpf/thread/c20782f8-2d04-49d3-b822-f77b4b87c27a/，但不知何故 CanBeSeen 是RoutedUICommand 派生类的一个属性对我没有吸引力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T12:00:00.400

您可以将 xaml 中的可见性属性绑定到决定按钮可见性的值

```
<Button Content="Button" Height="23" Visibility="{Binding someclass, Converter={Binding VisibitlityConverter}}"/> 
```

并使用转换器将 bool 值转换为 callpsed 或 visible

```
class visibilityConverter : IValueConverter
{
    #region IValueConverter Members

    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        return (bool)value == true? Visibility.Visible : Visibility.Collapsed;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }

    #endregion
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T06:49:28.683

你想让按钮在启用/禁用按钮时可见...如果你必须使用布尔到可见性转换器将 IsEnabled 属性绑定到可见性属性...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-16T12:36:42.870

我今天遇到了一个非常相似的问题。

当可见性转换器将按钮的可见性设置为折叠状态时，“有时”会忽略 CanExecute 绑定。我说“有时”是因为，如果我在可见性转换器中放置一个断点，它会改变行为。

当可见性更改为可见时 - CanExecute 不再被调用。在 UI 上的任意位置单击鼠标会刷新 CanExecute 绑定，使其按预期工作。

我通过将 Button IsEnabled 属性直接绑定到我的视图模型上的一个属性来解决这个问题，这反映了我的 CanExecute 所做的事情。

# exception - 在g ++的catch（...）中查找异常类型的非便携式方法

> ID：10956174
> 
> 赞同：1
> 
> 时间：2012-06-08T21:20:37.947
> 
> 标签：exception, g++

相关问题：

*   [捕获异常后确定异常类型？](https://stackoverflow.com/questions/561997/determining-exception-type-after-the-exception-is-caught)
*   [如何确定 catch (...) 块中的当前异常？](https://stackoverflow.com/questions/2320380/how-can-i-determine-the-current-exception-in-a-catch-block)

这个问题有所不同，因为我不关心可移植性。我对专门用于 g++ 甚至特定版本的 g++ (4.6.3) 的代码感兴趣。它不会在生产中使用。

我正在处理具有数千个 throw 语句以及可能有数百个抛出类型的遗留代码。这段代码在近 1000 台机器上运行，每天捕获大约 40 次抛出。这是不可重复的。

在外层，我可以尝试一下 { / *...* / } catch (...) { /* catch it */ } 并看到抛出了异常。但是我一直无法找到异常的类型，更不用说抛出它的位置了。

我相信这些信息必须是可用的，因为像下面这样的代码可以工作并打印“Y”：

```
#include <iostream>
using namespace std;
struct X {};
struct Y {};
struct Z {};
int main(int, char **) {
    try {
        //...
        throw Y();
        //...
    } catch (...) {
        cout << "Caught unknown" << endl;
        try {
            throw;
        } catch (const X &x) {
            cout << "X" << endl;
        } catch (const Y &y) {
            cout << "Y" << endl;
        } catch (const Z &z) {
            cout << "Z" << endl;
        }
    }
} 
```

是否有任何 [non-portable|dirty|nasty|ugly]* 技巧可以在 catch (...) 中识别 g++ 下的异常类型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T21:48:07.413

这是我使用的：

```
#include <cxxabi.h>

using std::string;
string deMangle(const char* const name)
{
  int status = -1;
  char* const dem = __cxxabiv1::__cxa_demangle(name, 0, 0, &status);

  const string ret = status == 0 ? dem : name;

  if (status == 0)
    free(dem);

  return ret;
}

string getGenericExceptionInfo()
{
  const std::type_info* t = __cxxabiv1::__cxa_current_exception_type();
  char const* name = t->name();

  return deMangle(name);
} 
```

用法：

```
catch (...)
  {
    std::cerr << "caught: " << getGenericExceptionInfo() << std::endl;
  } 
```

# python - 文件太大 python

> ID：10956175
> 
> 赞同：5
> 
> 时间：2012-06-08T21:20:38.927
> 
> 标签：python, ubuntu, file-io

我正在使用 python 写入文件。脚本突然停止运行并抛出“IOError: [Errno 27] File too large” 允许您使用程序创建的文件大小是否有限制？有没有其他人遇到过这个问题？停止时文件大小接近 4.3Gb（有点大）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-08T21:22:09.803

此[Python 错误报告](http://bugs.python.org/issue9271)表明操作系统是此错误消息的来源，而不是 Python。

由于您正在写入 FAT 分区，并且 FAT 32 ( [LinuxFilesystemsExplained](https://help.ubuntu.com/community/LinuxFilesystemsExplained) ) 的最大文件大小限制为 4GB，这很可能是您的问题的原因。在具有不同文件系统的系统或分区上运行您的程序肯定会告诉您。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-08-06T15:57:54.203

当我在一个目录中有太多文件时，我也会收到此错误。我`64435`在一个目录中有文件，每个文件的名称中都有 10 位数字 + '.json'，随后任何将新文件写入目录的尝试都会引发错误（例如）`OSError: [Errno 27] File too large: 'ngrams/0/0/0/0000029503.json'`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T21:25:00.550

当文件变得太大时，寻址就成为一个问题。通常你会得到 32 位，这意味着最大大小约为 4 GB。

# web-services - 如何发布和发现 Java Web 服务

> ID：10956176
> 
> 赞同：2
> 
> 时间：2012-06-08T21:20:39.613
> 
> 标签：web-services, rest, jax-ws, uddi, juddi

我是使用 java 开发 Web 服务的新手。我有一个学术项目，我需要在其中进行动态服务组合。为此，我不能直接为特定服务创建服务客户端，因为如果我这样做，那么该客户端将只调用该特定服务。客户端需要搜索各种 Web 服务，然后在运行时从这些服务中选择任何一个，并在运行时调用该服务。

我能够使用 Eclipse（靛蓝）开发 Web 服务（JAX-WS），我还为该 Web 服务创建了客户端，并且一切正常。现在我的问题是，在创建客户端时，我对客户端进行硬编码以仅调用该特定 Web 服务（因为我正在使用服务的 WSDL 文件创建客户端）。但是我实际上需要调用任何一个搜索到的服务，但为此我需要在某个地方发布该服务，然后发现它然后调用它。

我尝试将服务发布到 juddiv3。但是在 juddiv3 上，我只能发布 juddiv3 提供的示例服务。当我尝试发布我创建的服务时，它不会显示在已发布的服务组中。

是否有任何其他 UDDI 服务器可以安装在我的本地计算机上，然后从中发布和发现服务。此外，我无法弄清楚如何创建一个客户端，该客户端将在运行时修改自身以从各种搜索到的服务中调用任何一项服务。

请提供必要的步骤和代码。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T10:14:26.130

您可以使用 jUDDI ( [http://juddi.apache.org/](http://juddi.apache.org/) )。

**juddi**基于**UDDI v2.0, v 3.0**。

在这里，您可以发布和发现您的 Web 服务。

对于集成，您必须制作一些与**jUDDI**集成的应用程序。

但我认为对于您的学术项目和**您的目的**，jUDDI 最适合！(:))

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-13T04:36:48.370

您不能直接在 jUDDI 上发布。您还需要在 jUDDI 服务器中创建发布者实体。您将在独立服务器的 juddi 应用程序的“Classes”文件夹中找到 Rename4Sales 和 Rename4Marketing 示例。使用这些 XML 作为您的基础并创建您自己的实体。您还需要配置服务器的登录凭据。

我建议您按照 jUDDI 博客上的教程进行操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-26T02:36:23.807

jUDDI 在源代码主干中有大量示例。您可能想检查一下。从您提供的少量信息中很难猜出问题出在哪里。考虑联系 jUDDI 团队以获得进一步的帮助。[http://svn.apache.org/repos/asf/juddi/trunk/juddi-examples/](http://svn.apache.org/repos/asf/juddi/trunk/juddi-examples/)。在 jUDDI 用户指南中还有关于使用 UDDI 的附加文档，该指南位于 jUDDI 网站

# javascript - xhr 响应：连接已关闭

> ID：10956178
> 
> 赞同：3
> 
> 时间：2012-06-08T21:21:02.897
> 
> 标签：javascript, ajax, json, xmlhttprequest, jsonp

我编写了一个 Flickr 搜索引擎，它根据选定的下拉框调用公共提要或 FlickrApi。返回的 JSONP 函数调用示例：

一种）`jsonFlickrApi({"photos":{"page":1, "pages":201, "perpage":100, "total":"20042", "photo":[{"id":"5101738723"...`

b) `jsonFlickrFeed({ "title": "Recent Uploads tagged red","link": "http://www.flickr.com/photos/tags/red/","description": "", ....`

**奇怪的是**，在我的本地安装（`xampp`）中，两者都可以正常工作，并且我可以返回图像但是当我在上述域上托管完全相同的代码时，它就`jsonFlickrApi`不起作用了。我注意到（通过查看 Firebug）是`jsonFlickrApi`响应 Header 说`Connection close`

此外，`Response`当我向`jsonFlickrApi`

这是代码：

```
function makeCall(uri)
{
    xmlhttp = new XMLHttpRequest();
    xmlhttp.onreadystatechange = callback;
    xmlhttp.open("GET", "jsonget.php?url="+uri, true);
    xmlhttp.send();
}

function jsonFlickrApi(response)
{ 
  var data= response.photos.photo ;
  var output = "";
  output += "<img src=http://farm" + data[4].farm + ".static.flickr.com/" + data[1].server + "/" + data[4].id + "_" + data[4].secret + ".jpg>";
  document.getElementById("cell-0").innerHTML = output ;
}

//Public Feed
function jsonFlickrFeed(response)
{
  var data= response.items[0].media.m ;
  alert(data);
  var output = "";
  output += "<img src=" + data+ ">";
  document.getElementById("cell-0").innerHTML = output ;
}

function callback()
{
    //console.log("Ready State: " + xmlhttp.readyState + "\nStatus" + xmlhttp.status);
    if(xmlhttp.readyState==4 && xmlhttp.status==200)
    {
                var jsonResponse = xmlhttp.responseText; 
        jsonResponse = eval(jsonResponse);
    }
} 
```

调用示例：

一种）

```
http://flickr.com/services/rest/?method=flickr.photos.search&api_key=75564008a468bf8a284dc94bbd176dd8&tags=red&content_type=1&is_getty=true&text=red&format=json&timestamp=1339189838017 
```

b)

```
http://api.flickr.com/services/feeds/photos_public.gne?tags=red&format=json&timestamp=1339190039407 
```

**问题：**为什么我的连接关闭？为什么它在 localhost 而不是在实际域上工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T02:56:46.673

查看 HTTP 响应标头

[http://flickr.com/services/rest/?method=flickr.photos.search&api_key=75564008a468bf8a284dc94bbd176dd8&tags=red&content_type=1&is_getty=true&text=red&format=json×tamp=1339189838017](http://flickr.com/services/rest/?method=flickr.photos.search&api_key=75564008a468bf8a284dc94bbd176dd8&tags=red&content_type=1&is_getty=true&text=red&format=json&timestamp=1339189838017)

我得到一个带有位置的 302

[http://www.flickr.com/services/rest/?method=flickr.photos.search&api_key=75564008a468bf8a284dc94bbd176dd8&tags=red&content_type=1&is_getty=true&text=red&format=json×tamp=1339189838017](http://www.flickr.com/services/rest/?method=flickr.photos.search&api_key=75564008a468bf8a284dc94bbd176dd8&tags=red&content_type=1&is_getty=true&text=red&format=json&timestamp=1339189838017)

所以，flicker 想要告诉你的是“使用 www.flicker.com 而不是 flicker.com！”。通过这个 URL，我得到了内容。

# php - 在侧边栏 Wordpress 小部件之间放置文本

> ID：10956183
> 
> 赞同：0
> 
> 时间：2012-06-08T21:21:41.760
> 
> 标签：php, css, wordpress, widget

我在哪里可以在我的两个 WP 侧边栏小部件之间添加“或”的代码？我知道我可以轻松地添加一个文本小部件并将“OR”一词放在那里。但是，当我这样做时，我的侧边栏小部件的 CSS 样式具有背景色和边框。我不希望“OR”具有相同的样式。基本上我只想要我网站上的两个小部件之间的文本。

我们可以只放置一次“或”，以防添加更多小部件吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T06:20:52.263

您可以使用插件[Magic Widgets](http://wordpress.org/extend/plugins/magic-widgets/)。它提供了一个名为**Unfiltered Text**的小部件，它的功能与名称完全相同：它只打印您放入其中的内容。
它不使用`before_widget`and`after_widget`参数，因此您可以使用它来创建具有完全控制权的任何内容。

披露：我是插件的作者。

# .htaccess - 在子目录的 .htaccess 中禁用 .htaccess

> ID：10956186
> 
> 赞同：0
> 
> 时间：2012-06-08T21:21:53.693
> 
> 标签：.htaccess

我有一个 /public 文件夹，其中有一个带有很多重写规则的 .htaccess 文件。

我们在 /public/news 创建一个新文件夹，第一个 .htaccess 文件的规则也适用于该文件夹，这是不可取的。

我无权访问服务器的虚拟主机定义，因此我唯一的其他选择是在 /public/.htaccess 中的每个重写规则中放置异常，这是不可取的。

我想知道是否可以在 /public/news 中放置一个新的 .htaccess 文件，以便它禁用第一个 .htaccess 的所有效果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T02:19:49.910

将此添加到您`/public/.htaccess`的顶部（在其他规则之前，之后`RewriteEngine On`）：

`RewriteRule ^news(.*)$ - [L]`

由于 , 它不会在任何地方重写`-`，并且`[L]`会导致当前`.htaccess`停止处理更多规则（`last`标志）。然后就`/public/news/.htaccess`可以生效了。

[Apache Mod_Rewrite 文档](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T02:51:25.630

上面建议的答案有效，但我希望找到一种方法，这样我就不必修改 /public/.htaccess

解决方案是把

```
 RewriteEngine off 
```

在 /public/news/.htaccess

# mysql - JOIN 和 GROUP_CONCAT 与三个表

> ID：10956188
> 
> 赞同：13
> 
> 时间：2012-06-08T21:22:10.087
> 
> 标签：mysql, sql, join, group-concat

我有三张桌子：

```
users:        sports:           user_sports:

id | name     id | name         id_user | id_sport | pref
---+--------  ---+------------  --------+----------+------
 1 | Peter     1 | Tennis             1 |        1 |    0
 2 | Alice     2 | Football           1 |        2 |    1
 3 | Bob       3 | Basketball         2 |        3 |    0
                                      3 |        1 |    2
                                      3 |        3 |    1
                                      3 |        2 |    0 
```

该表`user_sports`链接`users`并按`sports`优先顺序 ( `pref`)。

我需要做一个返回这个的查询：

```
id | name  | sport_ids | sport_names
---+-------+-----------+----------------------------
 1 | Peter | 1,2       | Tennis,Football
 2 | Alice | 3         | Basketball
 3 | Bob   | 2,3,1     | Football,Basketball,Tennis 
```

我试过了`JOIN`，`GROUP_CONCAT`但我得到了奇怪的结果。
我需要做一个嵌套查询吗？
有任何想法吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-08T21:37:05.050

它不是特别困难。

1.  使用 JOIN 子句连接三个表。
2.  在您感兴趣的字段上使用 Group_concat。
3.  不要忘记未连接的字段上的 GROUP BY 子句，否则[会发生奇怪的事情](http://sqlfiddle.com/#!2/3ca6e/1)

```
SELECT u.id, 
       u.Name, 
       Group_concat(us.id_sport order by pref) sport_ids, 
       Group_concat(s.name order by pref)      sport_names 
FROM   users u 
       LEFT JOIN User_Sports us 
               ON u.id = us.id_user 
       LEFT  JOIN sports s 
               ON US.id_sport = s.id 
GROUP  BY u.id, 
          u.Name 
```

[演示](http://sqlfiddle.com/#!2/4d402/5)

*根据评论，当用户在 User_Sports 中没有条目时*更新LEFT JOIN**

 ** * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-08T21:36:23.993

我认为这只是一个简单的连接和聚合：

```
select u.id, u.name, group_concat(s.name order by pref separator ',')
from user_sports us join
     users u
     on us.id_user = u.id join
     sports s
     on us.id_sport = s.id
group by u.id, u.name 
```*

# mysql - 这个sql查询可以简化吗？

> ID：10956190
> 
> 赞同：1
> 
> 时间：2012-06-08T21:22:23.320
> 
> 标签：mysql

我有 2 张桌子。mysql

用户：A_ID，名称事件：B_ID，A_ID，cat_id，日期

现在我想获取在给定时间段内参与活动较多的所有用户，也需要根据类别添加。我正在做这样的事情：

```
select name from users ,
 (select A_id, count(*) 
  from   event 
  where date<=givendate
 group by A_id
 order by count(*) desc ) e
 where users.A_id=e.a_id
 limit 0,5 
```

是否有任何简单而专业的方法来编写该脚本？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T21:27:42.310

除了几个小问题外，您的查询看起来还不错：

*   您的`ORDER BY`and`LIMIT`应该在外部选择中，否则结果的顺序是不确定的。
*   使用`JOIN`关键字连接两个表。

尝试这个：

```
SELECT u.name
FROM users AS u
JOIN
(
    SELECT A_id, COUNT(*) AS cnt
    FROM event
    WHERE date <= givendate
    AND cat_id = 42
    GROUP BY A_id
) AS e
USING (A_id)
ORDER BY e.cnt DESC
LIMIT 5 
```

# mysql - MySQL 错误：#1142 - SELECT 命令拒绝用户

> ID：10956195
> 
> 赞同：43
> 
> 时间：2012-06-08T21:22:48.110
> 
> 标签：mysql, select, command

我的一台服务器上的某个查询遇到问题。在我测试过的所有其他地方，它完全可以正常工作，但在我想使用它的服务器上却无法正常工作。

这是关于以下SQL：

```
SELECT facturen.id            AS fid, 
       projecten.id           AS pid, 
       titel, 
       facturen.totaal_bedrag AS totaal, 
       betaald, 
       datum 
FROM   facturen, 
       projecten 
WHERE  facturen.project_id = projecten.id 
       AND projecten.eigenaar = '1' 
ORDER  BY datum DESC 
```

这是我从中得到的错误代码：

`SELECT command denied to user 'marco'@'localhost' for table 'projecten'`

表格：

```
CREATE TABLE IF NOT EXISTS `facturen` (
  `id` int(11) NOT NULL auto_increment,
  `project_id` int(11) NOT NULL,
  `datum` int(11) NOT NULL,
  `lever_datum` int(11) NOT NULL,
  `totaal_bedrag` decimal(9,2) NOT NULL,
  `btw` decimal(9,2) NOT NULL,
  `bedrijf` varchar(40) NOT NULL,
  `contactpersoon` varchar(60) NOT NULL,
  `adres` varchar(60) NOT NULL,
  `postcode` varchar(7) NOT NULL,
  `plaats` varchar(30) NOT NULL,
  `betaald` int(11) NOT NULL,
  PRIMARY KEY  (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=201200006 ; 
```

投影：

```
CREATE TABLE IF NOT EXISTS `projecten` (
  `id` int(11) NOT NULL auto_increment,
  `titel` varchar(80) NOT NULL,
  `eigenaar` int(11) NOT NULL,
  `creatie_datum` int(11) NOT NULL,
  `eind_datum` int(11) NOT NULL,
  `totaal_bedrag` decimal(9,2) NOT NULL,
  `btw` decimal(9,2) NOT NULL,
  PRIMARY KEY  (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=201200004 ; 
```

奇怪的是，“projecten”表和“facturen”表上的所有其他查询都可以正常工作，这个查询在我的另外两台服务器上也可以正常工作。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2015-08-19T09:38:30.263

我遇到了同样的情况，但有趣的是，错误的原因是由于使用了不正确的数据库或模式名称。

确实，多个问题可能会导致您提到的错误。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-06-08T21:35:35.970

您需要向连接到 MySQL 的 MySQL 用户授予 SELECT 权限

与此处相同的问题[错误：选择命令拒绝用户 '<userid>'@'<ip-address>' for table '<table-name>'](https://stackoverflow.com/questions/4767055/error-select-command-denied-to-user-useridip-address-for-table-table)

查看链接的答案；）

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-04-04T06:59:30.323

**由于表名别名而发生的语法错误也会出现此错误。**

例如，当执行下面的查询时，

> 从 a.table1、b.table2 中选择 *，其中 a.table1= b.table2

发生以下错误：

> MySQL 错误：#1142。响应来自数据库。表“table1”拒绝用户“username@ip”的 SELECT 命令

**解决方案**：应正确使用别名表名的语法，上述实例的语法解决方案：

> select * from table1 a, table2 b where a.table1= b.table2

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-05-27T12:16:19.820

我也遇到了这个问题，对我来说，问题是我搬到了一个新的服务器上，我试图用我的 PHP 代码连接的数据库从“my_Database”更改为“my_database”。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-03T11:57:15.917

这是您的数据库用户中的特权问题。首先在 localhost 中检查并授予用户“marco”权限

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-01-23T00:04:42.210

所以我遇到的问题是……我用来授予权限的应用程序将 Schema.TableName 转换为错误表中的单个 DB 语句，所以授予确实是错误的，但是当我们执行 SHOW GRANTS 时看起来是正确的FOR UserName，如果您没有非常关注 GRANT SELECT 与 GRANT TABLE SELECT。手动更正 Table 上的 Grant Select 并正确转义`Schema`. `Table`解决了我的问题。

可能无关，但我可以想象如果一个客户做错了，另一个客户也可能这样做。

希望这会有所帮助。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-08-11T06:08:51.677

我也遇到了这个问题，我的情况是不正确的命名。我正在从本地服务器迁移到在线服务器。我的 SQL 命令具有“ **database.tablename.column** ”结构。在线服务器中的数据库名称不同。例如，我的代码是“ **pet.item.name** ”，而它需要是“ **pet_app.item.name** ”，更改数据库名称解决了我的问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-08-21T07:52:07.737

当我导入具有无效定义器的视图时，此错误发生在我的服务器上。

删除错误视图修复了错误。

错误消息没有说明有关视图的任何内容，而是“抱怨”视图中使用的其中一个表。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-07-14T18:17:56.643

我刚刚清空了我的会话数据，然后它又工作了。您可以在此处找到该按钮：

![](../Images/34ec87902cf4857bea9ff4ea28357b66.png)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-11-11T07:49:12.623

您需要通过给出命令 mysql> GRANT ALL PRIVILEGES 来为特定用户授予权限*。*到“用户名”@“本地主机”；然后给予 FLUSH PRIVILEGES；命令。然后它不会给出这个错误..，希望对您有帮助谢谢..！

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-03-20T10:32:11.693

如果您使用/连接多个数据库，那么您应该对所有数据库使用相同的 DB_USERNAME

我通过对所有数据库使用相同的 DB_USERNAME 解决了同样的问题，因为我在同一个项目中使用/连接多个数据库并且每个数据库 DB_USERNAME 都是不同的，所以当我从多个数据库运行查询选择、更新、删除等时得到这个错误。

因为如果您在查询中使用多个表并且数据库 DB_USERNAME 不同，您将收到此错误。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-09-04T11:37:55.203

我有这个错误，因为我从 localhost 复制了存储过程，并且数据库名称与我想使用它的服务器上的不同。我花了几个小时才弄清楚，为什么我没有执行该过程的权限...请检查您的数据库名称：D 希望有人觉得这很有用...

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2022-02-24T00:14:58.603

我试图`SELECT * FROM information_schema.INNODB_METRICS;`在所谓的“预算主机”上发布。我得到 1142 因为读取该特定系统表需要`PROCESS`特权而用户没有它。我不得不四处游荡才能弄清楚它是`PROCESS`不是缺失的其他特权。

（不，“预算主机”不会将该权限授予用户。他们可能不希望他们的客户看到他们的服务器超载得多么荒谬。因为 MySQL 许可证是费用……等等，不，他们是自由。）

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2021-01-15T10:43:19.203

你应该只需要清除会话数据就可以了

* * *

## 回答 #15

> 赞同：-3
> 
> 时间：2014-12-07T11:07:57.863

在 MySQL 查询浏览器中，转到“工具”选项卡 >“MySQL 管理员”>“用户管理”，然后将权限授予用户。

# android - 如何从 Android Activity 中获取数据？

> ID：10956197
> 
> 赞同：0
> 
> 时间：2012-06-08T21:23:07.367
> 
> 标签：android

我需要 Activity A 从 Activity B 中的 textview 检索字符串值。问题是我不希望 Activity B 发送数据，我只想让 Activity A 伸出手并从 B 获取数据。我了解 Bundles和意图，但我遇到的问题是每次访问活动 B 时，它都会将捆绑的意图发送给 A。我不希望这种情况发生，我只想让活动 A 随时从活动 B 的文本视图中获取字符串访问活动 A。我正在使用 Android 2.2 和 SDK 8。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T21:30:28.770

如果我理解正确，您的问题是活动 A 和活动 B 没有说话，因此您需要在不涉及 B 的情况下从 A 访问某些数据。

恕我直言，您可以解决此问题，将数据保存在两个活动共享的位置。您可以使用“数据存储”一章中列出的选项之一：

[http://developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)

如果它只是一个简单的字符串，我会使用共享首选项。

也就是说，目前还不清楚你想要什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T21:32:35.653

```
 public class A extends Activity {

   public static TextView textView = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

     textView=(TextView)findViewById(R.id.textView);

}
} 
```

公共类 B 扩展 Activity {

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

                //Thats how you can get the data from Activity A UI Control
        //A.textView.getText().toString() 
     Log.i("Activity A TextView Data" , A.textView.getText().toString());

}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T21:33:18.087

将 Activity B 的 textview 字符串保存为持久存储。

[http://developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T23:57:48.073

问题是当活动 A 处于活动状态时，您不能假设活动 B 的任何视图都可用。事实上，Android 可以在后台对 Activity B 进行垃圾收集。活动不像“窗户”；他们更加独立。

但是，我很确定您可以通过实现两个*片段*来做到这一点。

# telnet - Windows 上的远程控制台

> ID：10956207
> 
> 赞同：-1
> 
> 时间：2012-06-08T21:24:09.473
> 
> 标签：telnet, remote-desktop, remote-access, windows-shell

我需要在 windows 服务器上打开一个远程终端，我必须做一个 ssh 隧道来连接，我可以从我的 windows 计算机上打开一个图形远程桌面，如下所示：

```
localhost:3260 
```

但是，我需要使用本地计算机在远程服务器上获取远程终端。我已经使用 java 库完成了 ssh 隧道，所以最后一步是获取远程终端，我尝试使用 telnet，但是当我输入 localhost 时，telnet 尝试连接到我的计算机。

我试图使用远程服务器的主机名，但什么也没有。我做的另一件事是将 psexec 实用程序与 sintaxix 一起使用：

```
psexec \\hostname-server cmd
psexec \\localhost:3260 cmd 
```

但我有错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:55:33.530

如果您`psexec`从 Microsoft SystemInternals 使用，则可以使用最低公分母，即使用远程主机的 IP 地址和 Windows 控制台的完整命令路径。因此，如果您的远程主机的 IP 地址是 `172.20.5.10`，您的命令需要是：

```
psexec \\172.20.5.10  c:\\windows\system32\cmd 
```

# app-store - 使用另一台 Mac 更新 appstore 上的应用程序，而无需转移身份？

> ID：10956209
> 
> 赞同：0
> 
> 时间：2012-06-08T21:24:26.843
> 
> 标签：app-store, certificate

我有一个关于在 appstore 上更新应用程序的问题：

我必须更新**另一个开发人员**发布的应用程序。我已获得开发人员门户的 id/mdp，因此我可以下载证书和配置文件以进行分发。

但是，我知道要使用这些签名，我必须使用以前开发人员使用的身份：

根据苹果：

> **转移您的身份**
> 
> 一旦您设置了健康的工作代码签名配置，建议您按照 Xcode 4 用户指南的将您的开发人员配置文件传输到另一台计算机部分中的步骤创建它们的备份。备份可用于从硬件故障中恢复您的工作代码签名配置，或在您选择的其他 Mac、分区或 OS X 用户帐户**上启用代码签名。**

**我联系不上之前的开发者...**

所以这是我的问题:) 如果我生成新证书并发布更新：

*   首先，可能吗？^^
*   其次，如果可能的话，它会不会看起来像一个正常的更新（应用商店更新选项卡中的通知，只是一个更新的点击？） -*我担心这是不可能的，因为不同的签名并且用户必须重新安装应用程序*

如果有人有答案，我真的很感谢你。

美好的一天，

杰尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T00:55:35.310

如果您是之前提交该应用程序的同一 iOS 开发人员帐户的管理员或团队负责人，那么您可以撤销并重新生成提交该应用程序更新所需的所有证书和配置文件。

# tomcat - Tomcat 导入 web.xml 文件

> ID：10956211
> 
> 赞同：0
> 
> 时间：2012-06-08T21:24:43.093
> 
> 标签：tomcat, web.xml

我有多个项目要一起托管在 Tomcat 容器中，因为它们可以通信和共享资源。每个项目都是单独开发的，有自己的web.xml

有没有一种方法可以将单个项目 Web 应用程序部署描述符 (project-web.xml) 导入到一个 web.xml 中并进行部署。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T08:44:35.140

如果您使用的是 Tomcat 7.0.x，您可以尝试创建一个包含所有共享类的通用 JAR 文件并将一个添加`META-INF/web-fragment.xml`到存档中。这是一个类似于文件的`web.xml`文件，您可以使用它来添加通用过滤器、servlet 等...

```
<?xml version="1.0" encoding="UTF-8"?>
<web-fragment xmlns="http://java.sun.com/xml/ns/javaee" 
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-fragment_3_0.xsd"
    version="3.0">

  <!-- content like web.xml -->

</web-fragment> 
```

# javascript - 使用 Javascript If/Else 语句更改 CSS 值

> ID：10956214
> 
> 赞同：0
> 
> 时间：2012-06-08T21:25:02.330
> 
> 标签：javascript, css

我对 Javascript 基本上一无所知，因此不胜感激。

当用户使用手机时，我希望弹出一个 div，其中包含指向我的移动网站的链接。自然，我不希望当用户在他们的桌面上时显示弹出窗口。

我的问题是我无法让 javascript 应用 css。

这是我正在使用的javascript。

```
<script type="text/javascript">
var isMobile = navigator.userAgent.match(/(iPhone|iPod|blackberry|android 0.5|htc|lg|midp|mmp|mobile|nokia|opera mini|palm|pocket|psp|sgh|smartphone|symbian|treo mini|Playstation Portable|SonyEricsson|Samsung|MobileExplorer|PalmSource|Benq|Windows Phone|Windows Mobile|IEMobile|Windows CE|Nintendo Wii)/i);

if(isMobile){
document.getElementById('mobile').style.display = 'block';
}
else{
document.getElementById('mobile').style.display = 'none';
}
;

</script> 
```

这是div：

```
<div id="mobile" style="left:116px; position: absolute; top: 106px;">
If you would like to visit our mobile website optimized for your device, click <a href="http://m.website.org">here</a>.</div> 
```

任何帮助表示赞赏。我试过自己弄清楚，但我遇到了障碍。

如果您有更好的、完全独立的解决方案，也欢迎您这样做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T21:34:52.373

您需要在 DOM 加载后应用样式。我建议为此使用[jQuery 。`ready()`](http://api.jquery.com/ready/)

```
$(document).ready(function() {
  // Code here
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T21:36:09.103

我认为你的问题是在加载 DOM（HTML）并准备好操作之前执行 javascript。该代码必须在窗口`onload`事件触发后触发。像往常一样，我建议使用 jQuery 库，但我将给出一个不使用它的示例，这样您就不需要包含它 - 您只需要注意没有其他 javascript 需要事件触发时运行；它很容易意外地覆盖它。

另外，我建议默认隐藏 div，并在需要时使用 JS 显示它。

在这里查看 [http://jsfiddle.net/vmuX8/1/](http://jsfiddle.net/vmuX8/1/)

此脚本可以安全地与同一页面上的其他脚本一起使用。

在我的示例中，我声明了一个匿名（无名）函数，该函数在声明后立即运行。那就是对其中的变量进行限定，这样就不会影响全局变量（window.onload 函数除外）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T21:39:07.733

您需要确保调用脚本 onDOMReady / onLoad 或将其放在 div 之后，否则调用脚本时 div 可能不存在。

例如。

```
<script type="text/javascript">

    function add_e_handler(obj, e, func){
        //test if func exists - prevents problems in IE
        if(typeof func != "undefined"){     
            if(obj.attachEvent){
                 obj.attachEvent('on' + e, func);
            }else if(obj.addEventListener){
                obj.addEventListener(e, func, false);
            }else{
                obj['on' + e] = func;
            }
       }
    }

    add_e_handler(window,'load'function(){
        var isMobile = navigator.userAgent.match(/(iPhone|iPod|blackberry|android 0.5|htc|lg|midp|mmp|mobile|nokia|opera mini|palm|pocket|psp|sgh|smartphone|symbian|treo mini|Playstation Portable|SonyEricsson|Samsung|MobileExplorer|PalmSource|Benq|Windows Phone|Windows Mobile|IEMobile|Windows CE|Nintendo Wii)/i);

        if(isMobile){
            document.getElementById('mobile').style.display = 'block';
        }else{
            document.getElementById('mobile').style.display = 'none';
        }
    });

</script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-08T21:43:16.283

虽然搜索特定的用户代理可能会让您暂时实现目标，但出于以下原因，我建议您不要这样做：

1.  不同的设备可能共享相同的用户代理（例如，Blackberry、Android、HTC 等），这可能意味着不同的屏幕分辨率和比例
2.  即使在具有一致浏览器的一致设备上，横向和纵向之间的差异也会影响站点的布局
3.  没有手动更新就无法解决未来的设备和浏览器技术

所有这些都可能导致提供不适合该设备的网站。

我建议使用媒体查询根据视口大小而不是用户字符串调整页面上的元素。这通常被称为自适应设计（你可以说它也包含[响应式设计](http://www.alistapart.com/articles/responsive-web-design/)）。

你使用 CSS 来做这件事；它看起来像这样：

```
@media screen and (min-width: 0px) and (max-width: 480px) {
    #mobile {
        display: none;
    }
} 
```

基本上，如果屏幕尺寸在 0px 到 480px 之间，id 为 mobile 的元素是隐藏的；否则它是可见的。

以下是针对各种移动设备的一些标准化媒体查询：http: [//css-tricks.com/snippets/css/media-queries-for-standard-devices/](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)

这里有大量使用这种方法的网站：http: [//mediaqueri.es/](http://mediaqueri.es/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-08T21:32:30.587

您是否尝试通过 document.write() 或其他方式检查您的检测是否正确？

我建议您使用 categorizr 库来检测设备是否是移动设备：[https ://github.com/skookum/categorizr.js#readme](https://github.com/skookum/categorizr.js#readme)

# c# - 河豚最后一个块在解密中不完整

> ID：10956218
> 
> 赞同：1
> 
> 时间：2012-06-08T21:25:37.300
> 
> 标签：c#, bouncycastle, encryption, blowfish

我有一个例外，最后一个块在解密中不完整，只有解密，加密它的工作完美。如何解决这个问题？

我用充气城堡。

这是我在[这里找到的代码](http://elian.co.uk/post/2009/07/29/Bouncy-Castle-CSharp.aspx)

```
 namespace BlowFishCS

  {
     public class BCEngine
    {
    private readonly Encoding _encoding;
    private readonly IBlockCipher _blockCipher;
    private PaddedBufferedBlockCipher _cipher;
    private IBlockCipherPadding _padding;

    public BCEngine(IBlockCipher blockCipher, Encoding encoding)
    {
        _blockCipher = blockCipher;
        _encoding = encoding;
    }

    public BCEngine()
    {
        // TODO: Complete member initialization
    }

    public void SetPadding(IBlockCipherPadding padding)
    {
        if (padding != null)
            _padding = padding;
    }

    public string Encrypt(string plain, string key)
    {
        byte[] result = BouncyCastleCrypto(true, _encoding.GetBytes(plain), key);
        return Convert.ToBase64String(result);
    }

    public string Decrypt(string cipher, string key)
    {
        //cipher = cipher.Replace(' ', '+');
        byte[] result = BouncyCastleCrypto(false, Convert.FromBase64String(cipher), key);
        return _encoding.GetString(result);
    }

    /// <summary>
    /// 
    /// </summary>
    /// <param name="forEncrypt"></param>
    /// <param name="input"></param>
    /// <param name="key"></param>
    /// <returns></returns>
    /// <exception cref="CryptoException"></exception>

    private byte[] BouncyCastleCrypto(bool forEncrypt, byte[] input, string key)
    {

        try
        {

            _cipher = _padding == null ?
        new PaddedBufferedBlockCipher(_blockCipher) :
        new PaddedBufferedBlockCipher(_blockCipher, _padding);

            // this line will make sure keyByte is 16 bytes long
            byte[] keyByte = _encoding.GetBytes(key);

            _cipher.Init(forEncrypt, new KeyParameter(keyByte));

            return _cipher.DoFinal(input);
        }
        catch (Org.BouncyCastle.Crypto.CryptoException ex)
        {
            throw new CryptoException(ex.Message); <here is exception last block incomplete in decryption
        }
    }
}

} 
```

我使用这种编码和功能。

```
 static Encoding _encoding = Encoding.ASCII; 
    static Pkcs7Padding pkcs = new Pkcs7Padding();
    static IBlockCipherPadding _padding = pkcs;

public static string Encryption(string plain, string key, bool fips)
  {
      BCEngine bcEngine = new BCEngine(new BlowfishEngine(), _encoding);
      bcEngine.SetPadding(_padding);
      return bcEngine.Encrypt(plain, key);
  }

    public static string Decryption(string cipher, string key, bool fips)
  {
      BCEngine bcEngine = new BCEngine(new BlowfishEngine(), _encoding);
      bcEngine.SetPadding(_padding);
      return bcEngine.Decrypt(cipher, key);
  } 
```

例外：

```
Org.BouncyCastle.Crypto.CryptoException was unhandled
    Message=last block incomplete in decryption
   Source=ID_Serwer
   StackTrace:
        at BlowFishCS.BCEngine.BouncyCastleCrypto(Boolean forEncrypt, Byte[] input, String  key) in C:\Documents and Settings\WirtualOS\Pulpit\serever\ID_Serwer\Blowfish.cs:line 96
       at BlowFishCS.BCEngine.Decrypt(String cipher, String key) in C:\Documents and Settings\WirtualOS\Pulpit\serever\ID_Serwer\Blowfish.cs:line 60
       at ID_Serwer.ID_Serv_Main.Decryption(String cipher, String key, Boolean fips) in C:\Documents and Settings\WirtualOS\Pulpit\serever\ID_Serwer\ID_Serv_Main.cs:line 154
       at ID_Serwer.ID_Serv_Main.process_cmd(String cmd) in C:\Documents and Settings\WirtualOS\Pulpit\serever\ID_Serwer\ID_Serv_Main.cs:line 163
       at ID_Serwer.ID_Serv_Main.Main(String[] args) in C:\Documents and Settings\WirtualOS\Pulpit\serever\ID_Serwer\ID_Serv_Main.cs:line 137
       at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: 
```

解密后显示 Exeption("test", "HjcWtqDOBMo=", true)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T22:16:04.113

```
static Encoding _encoding = Encoding.ASCII;

return Convert.ToBase64String(result); 
```

您应该在加密和解密中使用相同的编码。

更新：用于`System.Text.Encoding.Unicode`不支持 ASCII 字符。

# regex - 我的 Regex/htaccess 语法是否正确？

> ID：10956220
> 
> 赞同：2
> 
> 时间：2012-06-08T21:25:41.097
> 
> 标签：regex, .htaccess, mod-rewrite

我终于决定深入研究正则表达式的美妙世界。

基本上我的目标是

**浏览器发送**：

```
http://example.com/search/Bombay 
```

**Apache 翻译成这样**：

```
http://example.com/search/?city=Bombay 
```

我的规则尝试是这样的：

```
RewriteRule ^search/([^/.]+)/?$ search/?city=$1 
```

这是正确的方法吗？有什么好的地方可以了解更多关于 Regex 的信息吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T06:11:58.937

You are trying to match too much in that regex. I would go for

```
RewriteRule ^search/([^/]+)/?$ search/?city=$1 [NC,L] 
```

Also notice that I have added the `NC` non-case-sensitive flag and the `L` last flag this means if a user types in the URL in mixed or upper case then it will still match also once it matches it will stop accessing the htaccess file and go with what you have currently matched.

Try to learn about them here [http://www.regular-expressions.info/](http://www.regular-expressions.info/) or get a decent book.

Also really you should try these things before posting here.

# asp.net - Asp.Net，从继承页面类中获取对象？

> ID：10956221
> 
> 赞同：3
> 
> 时间：2012-06-08T21:25:50.420
> 
> 标签：asp.net, inheritance, master-pages

我有 baslik.aspx 页面，它使用母版页。我创建了一个 Worker.cs 文件相同的库，我想从 Worker.cs 访问 baslik.aspx 文字对象。它说空对象引用！

我的 baslik.aspx：

```
<%@ Page Async="true" EnableEventValidation="true" Title="" Language="C#" MasterPageFile="~/Site.Master" AutoEventWireup="true" CodeBehind="Baslik.aspx.cs" Inherits="F8.Imza.Baslik" %>

<asp:Content ID="Content1" ContentPlaceHolderID="HeadContent" runat="server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
..
..
<asp:Literal runat="server" id="myBaslikLiteral">
..
</asp:Content> 
```

baslik.aspx.cs ：

```
namespace F8.Imza
{
    public partial class Baslik : System.Web.UI.Page
    {
      ...
      ...
      ...
    } 
} 
```

我想从 Worker.cs 访问页面（运行）上的任何对象：所以我尝试...：

```
public partial class Worker : Baslik
{
   public void ActionStart()
    { 
       this.myBaslikLiteral.Text = "Bla bla bla";
       //i can see my literal name but it is null.
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T23:09:58.207

在 .Net 1.1 天，事情变得更简单了；正如[这个](https://stackoverflow.com/a/9361071/1073107)答案所提到的，控件过去是在定义明确的地方创建的，其方式类似于在 InitializeComponent 中实例化 Windows 窗体控件的方式。

.Net 2.0 时代改变了这一切；不再需要所有这些样板代码 - 相反，框架将根据 page.designer 中声明的控件在第一次运行时（或在站点预编译之前）生成所有必要的接线。 cs 文件。

不幸的是，当您从标准 ASPX 页面继承时，只会自动创建在 childs child.designer.cs 文件中声明的控件；父属性在父控件上可用，它们只是永远不会自动初始化（正如链接的答案所建议的那样，查看生成的代码非常有启发性）。

相反，人们将他们的基本页面封装在一个独立的类中是很常见的。此类以编程方式构建必要的控件，例如，在基类中的 CreateControlsMethod 或类似中，在[页面生命周期](http://msdn.microsoft.com/en-us/library/ms178472.aspx)的早期调用（如 Page_Init）。但是，还要注意有多少人只是将通用页面功能放在 BasePage 中（请参见[此处](http://chrissoe.tumblr.com/post/419640799/asp-net-basepage-class)的典型示例），因为创建整个基本控件树非常繁琐，并且使更改布局变得困难（几乎无法维护，因为您必须有效地创建整个页面在后面的代码中）。

但是，在页面中封装功能区域（如常见表单字段）的更简单方法是创建[UserControls](http://msdn.microsoft.com/en-us/library/y6wb1a0e.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T21:35:09.090

不完全确定我是否理解这个问题，但如果你尝试：

```
this.FindControl("myBaslikLiteral").Text = "Bla bla bla"; 
```

如果这不起作用，您可能必须枚举页面上的控件，然后找到子控件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T21:35:33.693

我认为这`myBaslikLiteral`是由设计师从内部生成的私有字段`Baslik.aspx`。

一种方法是通过以下受保护或公共财产公开此文件`Baslik.cs`：

```
public Literal myPublicBaslikLiteral { get { return myBaslikLiteral; } } 
```

然后`Worker.cs`你可以使用这个属性，如：

```
this.myPublicBaslikLiteral.Text = "Bla bla bla"; 
```

# javascript - 在 geochart 上选择标记

> ID：10956228
> 
> 赞同：1
> 
> 时间：2012-06-08T21:26:47.660
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3, google-visualization

我在 Geochart 上绘制了几个城市，我试图简单地让用户点击一个标记来选择他们的位置。目前，我只是使用警报框进行测试。

现在我只列出城市名称，没有附加人口、大小、面积或数字。

**edit-this 在 jsFiddle 中运行，但是我无法让它在它自己的页面上运行。有人看到我看不到的东西吗？**

```
<html>
<head>
<script type='text/javascript' src='https://www.google.com/jsapi'></script>
<script type = "text/javascript">

google.load('visualization', '1', {
'packages': ['geochart']
});
google.setOnLoadCallback(drawMarkersMap);

function drawMarkersMap() {

   var newInfo = google.visualization.arrayToDataTable([
     ['City'],
     ['Rome'],
     ['Truth or Consequences'],
     ['Ann Arbor'],
     ['Chico'],
     ['Los Angeles'],
     ['Seattle'],
     ['Chicago'],
     ['Lubbock']
     ]);

var chart = new google.visualization.GeoChart(document.getElementById('geoChart'));

chart.draw(newInfo, {
    width: 667,
    height: 416,
    datalessRegionColor: '#3FADD1',
    tooltip: {
        textStyle: {
            color: 'blue'
        },
        showColorCode: false
    },
    displayMode: 'markers',
    region: 'US',
    resolution: 'provinces'
   });

google.visualization.events.addListener(chart, 'select', function() {
    var selection = chart.getSelection();

    // if same city is clicked twice in a row
    // it is "unselected", and selection = []
    if(typeof selection[0] !== "undefined") {
      var value = newInfo.getValue(selection[0].row, 0);
      alert('City is: ' + value);
    }
});

};​
</script>
</head>
<body>
  <div id="geoChart" style="width: 250px; height: 400px;"></div>
</body>​
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T23:00:00.187

不确定我是否完全理解您想要什么，尽管我得到了以下演示来显示城市并且可以点击。响应是带有城市名称的警报框。

[http://jsfiddle.net/Mep7R/4/](http://jsfiddle.net/Mep7R/4/)

以下是相关代码：

```
function drawMarkersMap() {

var newInfo = google.visualization.arrayToDataTable([
    ['City'],
    ['Rome'],
    ['Truth or Consequences'],
    ['Ann Arbor'],
    ['Chico'],
    ['Los Angeles'],
    ['Seattle'],
    ['Chicago'],
    ['Lubbock']
    ]);

var chart = new google.visualization.GeoChart(document.getElementById('geoChart'));

chart.draw(newInfo, {
    width: 667,
    height: 416,
    datalessRegionColor: '#3FADD1',
    tooltip: {
        textStyle: {
            color: 'blue'
        },
        showColorCode: false
    },
    displayMode: 'markers',
    region: 'US',
    resolution: 'provinces'
});

google.visualization.events.addListener(chart, 'select', function() {
    var selection = chart.getSelection();

    // if same city is clicked twice in a row
    // it is "unselected", and selection = []
    if(typeof selection[0] !== "undefined") {
      var value = newInfo.getValue(selection[0].row, 0);
      alert('City is: ' + value);
    }
});

} 
```

# php - 在代码点火器中的库之前加载配置文件

> ID：10956233
> 
> 赞同：0
> 
> 时间：2012-06-08T21:27:09.647
> 
> 标签：php, codeigniter, google-api, app-config

我正在我的 codeigniter 项目中加载 google-api-php-client 库（用于 oauth 2.0 使用）。我想在配置文件中定义一系列配置值，以便它们可以与这个库一起使用。但是，我注意到库的配置信息是在我定义的配置文件之前加载的。

例如，在 中`autoload.php`，我将配置自动加载设置如下：

```
$autoload['config'] = array('my_config_file'); 
```

在`my_config_file.php`我有一系列`define`语句来设置配置值：

```
define('GOOGLE_OAUTH_APPLICATION_NAME','My Application Name');
define('GOOGLE_OAUTH_CLIENT_ID','My App Client ID');
define('GOOGLE_OAUTH_CLIENT_SECRET','My App Client Secret'); 
```

我想在 google-api-php-client 库的配置中使用这些：

```
global $apiConfig;
$apiConfig = array(
    'application_name' => GOOGLE_OAUTH_APPLICATION_NAME,
    'oauth2_client_id' => GOOGLE_OAUTH_CLIENT_ID,
    'oauth2_client_secret' => GOOGLE_OAUTH_CLIENT_SECRET
); 
```

在这样做（和一些调试）之后，我确定库的配置文件在自动加载的配置文件之前执行。我得到的错误进一步表明了这一点：

```
Notice: Use of undefined constant GOOGLE_OAUTH_APPLICATION_NAME ...
Notice: Use of undefined constant GOOGLE_OAUTH_CLIENT_ID ...
Notice: Use of undefined constant GOOGLE_OAUTH_CLIENT_SECRET ... 
```

如何获取它以便在加载库配置之前定义这些全局配置常量（从而解决此问题）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T07:04:40.180

最佳实践是为库创建一个单独的配置文件；说`application/config/oauth.php`。

该配置文件使用`$this->config->load('oauth');`. 当然，您也可以只将其包含在自动加载数组中。

然后在您的库中调用配置项：

```
$apiConfig = array(
    'application_name' => $this->config->item('google_oauth_application_name', 'oauth'),
    'oauth2_client_id' => $this->config->item('oauth2_client_id', 'oauth'),
    'oauth2_client_secret' => $this->config->item('oauth2_client_secret', 'oauth')
); 
```

干杯。

# linux - mktemp 的问题

> ID：10956234
> 
> 赞同：0
> 
> 时间：2012-06-08T21:27:24.123
> 
> 标签：linux, bash, unix

我在使用 mktemp 时遇到问题。我写了一个脚本：

```
tempdir=$(mktemp -t -d mytemp.XXXXXX)

mv ~/Desktop/File_Converted/* "$tempdir"

cd $tempdir

for f in *; do

    Some stuff...

done 
```

当我运行它时，我得到：

```
$ ~/Desktop/script.sh 
mv: rename /Users/user/Desktop/File_Converted/* to /var/folders/xE/xEV9UA-AFpOdJkN2IrTAArI6Gs/-Tmp-/-d.eiXRhaHY\nmytemp.caNEzp: No such file or directory
/Users/user/Desktop/script.sh: line 21: cd: /var/folders/xE/xEV9UA-AFpOdJkN2IrTAArI6Gs+/-Tmp-/-d.eiXRhaHY: Not a directory 
```

我似乎找不到我做错了什么。请问有什么帮助吗？

谢谢！

担

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T21:33:28.093

你把你的`-t`和你的`-d`搞混了。

mktemp的`-t`参数需要一个参数，在你的情况下它需要`-d`. 因此，您得到的是文件名而不是目录，并且`mv`失败了。

该错误更加令人困惑，因为 mktemp 正在使用您想要的模板 ( `mytemp.XXXXXX`)，并且*还*基于它生成一个临时名称。这就是为什么您`\n`在错误消息中有一个原因，mktemp 的输出实际上是两行长。

相关文档：

> mktemp [ **-d** ] [ **-q** ] [ **-t** *前缀*] [ **-u** ] 模板 ...
> 
> **-d** 创建目录而不是文件。
> 
> **-t** *prefix*
> 生成一个模板（使用提供的前缀和 TMPDIR 如果设置）来创建一个文件名模板。

根据您的评论，
对于调试，我建议打印 的值`$tempdir`并查看它是否符合您的预期。您似乎仍然遇到两个 mv 错误，这向我表明出了点问题。

在遇到错误后导致脚本停止的`set -e`bash 命令也可以非常方便地跟踪此类问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T21:54:32.653

根据您的第一个错误 ( `mv: rename /Users/user/Desktop/File_Converted/* to ...`)，它看起来`/Users/user/Desktop/File_Converted`可能是空的，因此 glob 不是扩展为文件列表，而是被视为文字字符串。

编辑：在下面查看您的评论，我注意到您的 tiff 文件名称中有一个空格：

```
Dan-Dows-MacBook-Pro:tmp ddow$ ls ~/Desktop/File_Converted/ inbox.tiff 
```

这会引起问题。用这个替换你的单曲`mv`：

```
files_to_move=(~/Desktop/File_Converted/*)
mv "${files_to_move[@]}" $tempdir. 
```

第一行创建一个数组变量，其中每个元素都是来自 的文件名`File_Converted`，并且每个文件名中的空格都被正确保留。在第二行中，我们使用引号中的参数扩展来扩展为文件名列表（同样，在分词后正确保留文件名中的空格），然后将其移动到`$tempdir`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T21:58:07.947

我认为`mktemp`在 OSX 上工作有点不同。它正在尝试使用前缀创建您的临时目录`$TMPDIR`，如果您这样做，`echo $TMPDIR`您会看到`/var/folders/...`

例如，您只需要使用`mktemp /tmp/mytemp.XXXXXX`

# xml - xld 架构：如何强制使用默认值

> ID：10956236
> 
> 赞同：0
> 
> 时间：2012-06-08T21:27:49.433
> 
> 标签：xml, xsd

我已经定义了以下 xsd 类型：

```
<xs:complexType name="parentType">
  <xs:sequence>
    <xs:element name="att" type="xs:string" />
  </xs:sequence>
</xs:complexType>

<xs:complexType name="childType">
  <xs:complexContent>
    <xs:extension base="parentType">
      <xs:sequence>
        <xs:element name="att" type="xs:string" default="foo" minOccurs="0" />
      </xs:sequence>
    </xs:extension>
  </xs:complexContent>
</xs:complexType> 
```

你可以猜到，我想通过给一个默认值'foo'并改变它的出现范围来覆盖一个类型的元素（就像我在java中做的那样）。

不幸的是，在编写时`<childType />`，我应该有一个带有 a 的元素`att="foo"`，但是我的 XML 验证器说：`The content of element 'childType' is not complete. One of '{att}' is expected.`似乎元素定义的覆盖不起作用。

我错过了什么？你知道如何覆盖 XSD 中的元素定义吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T22:16:02.967

看看你对“扩展”做了什么：

![XSD 图](../Images/37c1ec98d27580975c226c782e316663.png)

限制可能会起作用，但它可能与您设置默认值的原因背道而驰 - 这可能与您的期望不同（请参阅[SO](https://stackoverflow.com/questions/1060190/xml-schema-setting-a-default-value-for-a-complextype)上的这篇文章以获得解释）。

```
<xs:complexType name="childType"> 
    <xs:complexContent> 
        <xs:restriction base="parentType"> 
            <xs:sequence> 
                <xs:element name="att" type="xs:string" default="foo" /> 
            </xs:sequence> 
        </xs:restriction> 
    </xs:complexContent> 
</xs:complexType> 
```

问题是，您不能在限制中使元素可选。默认设置仍然有效；空元素的差异将被视为 foo。

你可能有这样的东西：

```
<xs:complexType name="parentType"> 
    <xs:sequence> 
        <xs:element name="att" type="xs:string" minOccurs="0"/> 
    </xs:sequence> 
</xs:complexType> 
<xs:complexType name="childType"> 
    <xs:complexContent> 
        <xs:restriction base="parentType"> 
            <xs:sequence> 
                <xs:element name="att" type="xs:string" default="foo" /> 
            </xs:sequence> 
        </xs:restriction> 
    </xs:complexContent> 
</xs:complexType> 
```

如果需要，您可以将默认值移至父级 - 这完全取决于您在这里真正想要实现的目标。我真的认为您对元素的**默认工作方式感到困惑；**似乎您期望它更像属性的工作方式。

# android - 以 CSV 格式导出数据库 android

> ID：10956239
> 
> 赞同：0
> 
> 时间：2012-06-08T21:28:01.807
> 
> 标签：android, sqlite

我搜索了很多地方，包括这个资源，以找到如何以 CSV 格式导出我的数据库表的任何示例。请有任何想法或建议。我想通过代码而不是 shell 脚本来做到这一点。我已经有将数据库导出为备份的代码，现在我想导出表格内容，以便可以在电子表格应用程序中查看它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T23:23:12.113

没有直接的方法可以做到这一点。

您需要查询表（例如，“SELECT * FROM MY_TABLE”），然后使用 的`getColumnNames()`方法`Cursor`获取`String[]`列名，然后您可以将其与 a`StringBuilder`一起用于创建 csv 文件的第一行，例如。 ..

`column1,column2,column3`

然后，您在列名数组中移动`Cursor`并循环并获取每列的值...

`getString(getColumnIndex(columnNames[x]));`

...并将返回的字符串传递给 a`StringBuilder`以连接要写入文件的值...

`value1,value2,value3`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T21:34:48.157

我认为这已经在这里得到了回答：[Export from sqlite to csv using shell script](https://stackoverflow.com/questions/5776660/export-from-sqlite-to-csv-using-shell-script)

如果这不起作用，请尝试将问题编辑得更具体。

# ruby - 在Ruby中以这种格式YYYYMM获取当前年份和月份（以及下个月）

> ID：10956240
> 
> 赞同：21
> 
> 时间：2012-06-08T21:28:03.490
> 
> 标签：ruby, date, time

如何以特定格式获取 Ruby 中的当前日期和月份？

如果今天是 2012 年 6 月 8 日，我想得到`201206`.

**而且，考虑到在201212**中，下个月将是**201301**，我希望能够从我们所在的那个得到下个月。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-08T22:31:30.827

我会这样做：

```
require 'date'
Date.today.strftime("%Y%m")
#=> "201206"
(Date.today>>1).strftime("%Y%m")
#=> "201207" 
```

[Date#>>](http://ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/Date.html#method-i-3E-3E)的优点是它会自动为您处理某些事情：

```
Date.new(2012,12,12)>>1
#=> #<Date: 2013-01-12 ((2456305j,0s,0n),+0s,2299161j)> 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-06-08T21:35:48.197

这个月：

```
date = Time.now.strftime("%Y%m") 
```

下个月：

```
if Time.now.month == 12
  date = Time.now.year.next.to_s + "01"
else
  date = Time.now.strftime("%Y%m").to_i + 1
end 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-07-11T22:16:49.287

从 Ruby 2 开始，“next_month”是 Date 上的一个方法：

```
require "Date"

Date.today.strftime("%Y%m")
# => "201407"

Date.today.next_month.strftime("%Y%m")
# => "201408" 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-09-04T10:52:35.433

```
require 'date'
d=Date.today                    #current date
d.strftime("%Y%m")              #current date in format
d.next_month.strftime("%Y%m")   #next month in format 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-08T21:36:53.253

使用[http://strfti.me/](http://strfti.me/)那种东西

```
strftime "%Y%m" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-15T11:43:20.833

Ruby 2 Plus 和 rails 4 plus。

通过使用以下功能，您可以找到所需的结果。

```
Time.now #current time according to server timezone
Date.today.strftime("%Y%m") # => "201803"

Date.today.next_month.strftime("%Y%m") # => "201804" 
```

# jquery - 如何制作平滑的fadeIn() jQuery

> ID：10956243
> 
> 赞同：0
> 
> 时间：2012-06-08T21:28:42.550
> 
> 标签：jquery, html, css

**问题**淡入和淡出是零星的。理想情况下，我希望*fadeIn() 一个一个发生；同时，fadeOut() 一下子就完成了。这对我来说任何组合都可以。*

**背景：**我编写了一个快速过滤器来隐藏和显示我的作品集。连同一些动画交互来支持它。问题是我的交互有点不和谐，所以我想在它们之间添加一个过渡。问题是，简单的 fadeIn() fadeOut() 真的很不稳定。这是它的古怪示例：

**[单击此处实时演示](http://designobvio.us/ie/#)**（我仅将此过渡应用于*打印导航按钮*）

**更新**

我已经用这个脚本解决了我的问题

```
$(".box").find('.video, .print, .web').closest('.box').show();  
$(".box").find('.web, .video, .print').closest('.box').fadeOut('fast');
$(".box").find('.print').closest('.box').each(function(index) { 
$(this).delay(400*index).fadeIn(300);   
}); 
```

**精简脚本**( [script.js](http://designobvio.us/ie/asset/js/script.js) )

```
 if( id == 'printInteract'){
        //used for muliple click to refresh the boxes
        $(".box").find('.video, .print, .web').closest('.box').show();
       //finds the classes then filters them out
        $(".box").find('.web, .video').closest('.box').fadeOut()
           //fades in the .box(s) for print
        $(".box").find('.print').closest('.box').fadeIn();  
    } 
```

**框 HTML**

```
<div class="box">
<h1 title="Light me up"></h1>
  <div class="innerbox">
    <figure><img src="http://4.bp.blogspot.com/-FtykQCyUHtg/T51fiRiRE-I/AAAAAAAADTo/mUiItl6lG0Q/s400/inspirational-animated-photography-awesome-4.gif" /></figure>
    <ul class="categorySelect">
<!-- this example has 3 tags so all buttons will show it -->        
      <li class="print"></li>
      <li class="video"></li>
      <li class="web"></li>
    </ul>
  </div>
</div>
<!--end of box--> 
```

**转换触发器 HTML**

```
<li id="printInteract" class="navCenter"><a id="activePrint" class="navBg" href="#"><div class="relativeCenter"><img src="asset/img/print.gif" /><h3 class="print">print</h3></div></a></li> 
```

**最后**谁能解释为什么这些盒子如此随机？是加载时间吗？它只是我的脚本层次结构（我知道我的脚本写得不好） 关于修复的注释会非常受欢迎，因为我对 jQuery 脚本编写很陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T22:09:42.893

传递一个回调函数并搜索其上的隐藏框。

像这样的东西：

```
function showNextBox() {
    $('.box:hidden').first().fadeIn('slow', function(){
         showNextBox();
     });
}
$(function(){
     showNextBox();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T22:01:50.233

您可以只使用`show('slow')`或`fadeIn('slow')`或时间（以毫秒为单位）`fadeIn(500)`

查看文档以获取更多信息。添加层次结构使用函数作为第二个参数：

```
$(".box").find('.video, .print, .web').closest('.box').show("slow", function () {
    $(".box").find('.web, .video').closest('.box').fadeOut();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T04:30:48.427

这是关于如何制作动画的不同看法。被移除的框被动画化为零宽度。正在添加的框从零宽度动画到它们的正常宽度。这给出了事物生长到位的效果。删除所有框，然后按顺序添加。你可以在这里看到它的工作：

[http://jsfiddle.net/jfriend00/wEZmw/](http://jsfiddle.net/jfriend00/wEZmw/)

代码的核心部分是几个 jquery 附加方法，可让您按顺序进行淡入淡出。还对 CSS 进行了调整，以帮助动画看起来更流畅。

```
jQuery.fn.fadeInSequence = function(t, fn) {
    if (typeof t == "function") {
        fn = t;
        t = 1000;
    }
    t = t || 1000;
    var pos = 0;
    var self = this;
    function fadeInNext() {
        if (pos < self.length) {
            var item = self.eq(pos++);
            if (item.is(":hidden")) {
                item.css({width: 0, overflow: "hidden"});
                item.show().animate({width: "25%"}, t, fadeInNext);
            } else {
                fadeInNext();
            }
        } else {
            if (fn) {
                fn.call(self);
            }
        }
    }
    fadeInNext();
    return(self);
}

jQuery.fn.fadeOutSequence = function(t, fn) {
    if (typeof t == "function") {
        fn = t;
        t = 1000;
    }
    t = t || 1000;
    var pos = 0;
    var self = this;
    function fadeOutNext() {
        if (pos < self.length) {
            var item = self.eq(pos++);
            if (item.is(":visible")) {
                item.css("overflow", "hidden").animate({width: "0"}, t, function() {
                    item.hide();
                    fadeOutNext();
                });
            } else {
                fadeOutNext();
            }
        } else {
            if (fn) {
                fn.call(self);
            }
        }
    }
    fadeOutNext();
    return(self);

}

function doFadeInOut(outSelector, inSelector, hideSelector) {
    var hideItems = $(hideSelector).hide();
    var outItems = $(".box").find(outSelector).closest(".box");
    var inItems = $(".box").find(inSelector).closest(".box");
    outItems.not(inItems).fadeOutSequence(function() {
        inItems.fadeInSequence(function() {
            hideItems.fadeIn(500);
        });
    });
} 
```

而且，这是我删除了很多复制代码（DRY）的版本，因此一个通用代码块可以处理所有四次点击：http: [//jsfiddle.net/jfriend00/XCVy9/](http://jsfiddle.net/jfriend00/XCVy9/)

# c - 学习 Linux 内核

> ID：10956245
> 
> 赞同：3
> 
> 时间：2012-06-08T21:28:48.750
> 
> 标签：c, linux, linux-kernel, kernel

好的，我想了解操作系统内核的工作原理，并且想阅读 Linux 内核代码。但是，我以前从来没有做过这种事情，并且想知道是否有特定的方式我应该通过代码.. 谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-08T21:32:05.023

我将从[kernelnewbies](http://kernelnewbies.org/KernelHacking)或一个非常简单的入门[学习 linux 内核开始](http://www.learninglinuxkernel.com/)

也就是说，如果您想具体了解 Linux 内核。但是 20 年后，Linux 内核现在是一个非常庞大和复杂的项目，因此可能不是简单 Unix 内核如何工作的最佳介绍

有一个非常有趣的项目可以[在 python 中实现内核，](https://launchpad.net/pycorn)如果您只是想知道内核是如何工作**的，这可能是一个更容易的开始**

ps 如果您更喜欢纸质版，可以使用[O'Reilly 的书](http://shop.oreilly.com/product/9780596005658.do)- 它有点过时，但涵盖了 2.6 内核。这个版本我没看过，不知道好不好。

# php - 使用 smarty 引擎读取变量

> ID：10956252
> 
> 赞同：0
> 
> 时间：2012-06-08T21:29:25.077
> 
> 标签：php, class, smarty

我对 Smarty 很陌生，遇到了一些麻烦。我有一个 PHP 类，我们称之为`A`. 在`A`中，有一个方法，调用它`M`，我想在其中获取一个变量（`$var`取整数值`1`或`2`），并在 HTML 页面上使用它，调用它`mypage.html`，它是另一个 HTML 页面的一部分，调用它`MyPage.html`。

在相同的方法中，我将我的 HTML 代码分配给 smarty 分配，如下所示：

```
$this->mySmarty->assign('content', $this->fetch('mypage.html')); 
```

然后我显示：

```
$this->display('MyPage.html'); 
```

但奇怪的是，当我将 smarty 变量分配`var`给我的 PHP 变量时，`var`如下所示：

```
$this->mySmarty->assign('var', $var); 
```

...该页面`MyPage.html`无法识别以下内容：

```
{if $var==1}<span>blabla<span>{/if} 
```

有谁知道问题是什么？这是不正确的聪明语法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T22:02:58.870

在你的代码中，你似乎做

```
$this->mySmarty->assign('content', $this->mySmarty->fetch('mypage.html')); 
```

在分配变量之前。你应该试试

```
$this->mySmarty->assign('var', $var);
$this->mySmarty->assign('content', $this->mySmarty->fetch('mypage.html'));
$this->mySmarty->display('MyPage.html'); 
```

但是预渲染模板然后将其分配给变量感觉有些不自然。检查@ddlshack 解决方案以获得更聪明的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T22:04:57.267

最好使用[Smarty 的 include](http://www.smarty.net/docsv2/en/language.function.include.tpl)函数，而不是渲染模板然后将其分配给变量。

```
$this->mySmarty->assign('contentTemplate', 'myPage.html'); 
```

然后

```
{include file="$contentTemplate"} 
```

* * *

关于你的问题，代码是正确的，所以 $var 的值一定不是你所期望的。

```
var_dump($var); 
```

# django - modelformset_factory 和 on_delete=models.PROTECT

> ID：10956253
> 
> 赞同：1
> 
> 时间：2012-06-08T21:29:28.250
> 
> 标签：django, validation

我的模型`on_delete=models.PROTECT`在外键中有一个约束。当我尝试通过 modelformset_factory 程序崩溃删除引用模型时：

> u'("无法删除模型 \'Zona\' 的某些实例，因为它们是通过受保护的外键引用的：\'Camping.zonaTarifaria\'", [])'

我希望 modelformset_factory 像其他验证一样处理验证错误，但不是。有没有神奇的解决方案？

我试图以这种方式将错误移动到 ValidationError （当然是在引用模型中）：

```
class Zona(models.Model):
    codi = models.CharField(u'Codi', 
    ...

    def delete(self, *args, **kwargs):
        try:
            super(Zona, self).delete( *args, **kwargs)
        except Exception, e:
            raise ValidationError( e ) 
```

但似乎 modelformset_factory 在来自 delete 方法时不会提交验证错误。

# hadoop - hadoop reduce功能没有执行？

> ID：10956254
> 
> 赞同：2
> 
> 时间：2012-06-08T21:29:33.683
> 
> 标签：hadoop, reducers

我正在运行mapreduce程序，但我意识到虽然我写了一个reduce函数，但mapreduce并没有执行它。然后我尝试添加`@Override`，错误说reduce函数没有覆盖任何超级方法。

作业配置信息如下

```
 preProcess.setJobName("GeneProcessing program for 100 SNP");

        preProcess.setMapperClass(PreprocessMapper.class);
        preProcess.setReducerClass(PreprocessReducer.class);

        preProcess.setInputFormatClass(TextInputFormat.class);
        //setInputFormat(TextInputFormat.class);
    preProcess.setOutputFormatClass(TextOutputFormat.class);

    preProcess.setMapOutputKeyClass(Text.class);
    preProcess.setMapOutputValueClass(Text.class);  

        preProcess.setOutputKeyClass(NullWritable.class);
    preProcess.setOutputValueClass(Text.class);

    //preProcess.setNumMapTasks(4);
    preProcess.setNumReduceTasks(4);
    FileInputFormat.setInputPaths(preProcess, preprocessInputPath);
    FileOutputFormat.setOutputPath(preProcess, preprocessOutputPath);
    //JobClient.runJob(preProcess);
        preProcess.waitForCompletion(true); 
```

减少代码如下

```
import java.io.*;
import java.util.*;

import org.apache.hadoop.io.*;
import org.apache.hadoop.mapreduce.Reducer;
    public class PreprocessReducer extends Reducer<Text, Text, NullWritable, Text> 
    {
        public Text newKey = new Text("");

            //no enter the reduce task
            @Override
        protected void reduce(Text key, Iterator<Text> values, Context output)                 
             throws IOException, InterruptedException                
            {

            do something here

        }

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T22:32:31.513

您对 reduce 方法的签名是错误的 - 第二个参数应该是`Iterable<Text>`而不是`Iterator<Text>`：

```
@Override
protected void reduce(Text arg0, Iterable<Text> arg1,
         Context arg2)
         throws IOException, InterruptedException {

} 
```

你用的是什么IDE？Eclipse 有一个 Source -> Override / Implement 方法菜单选项，这使得签名正确变得更加容易。我确信 Netbeans 具有类似的功能。

# python - Python 克服了 Windows 255 路径+文件名限制并归档目录

> ID：10956257
> 
> 赞同：4
> 
> 时间：2012-06-08T21:29:45.190
> 
> 标签：python, unicode, archive

我将使用 Python 备份位于 Windows 7 机器中的目录。我需要尽可能地压缩它。我还没有决定采用哪种压缩方式。

主要问题是目录包含数百个级联文件/目录，因此在路径+文件名的总共 255 个字符之后我看不到里面。此目录结构由第 3 方软件创建。

只是为了快速测试，我为文件夹生成（模拟）编写了以下内容；

```
 start = time.time()
    end = time.time() - start
    root_dir = 'C:\test'
    os.chdir("C:\test")
    iterate = "ABCDEFGHIJKLMNOPQRSTUVWXYZ"
    while (end<1):                
            end = time.time() - start   
            os.system("mkdir " + str(iterate))
            os.chdir(root_dir + "\\" + str(iterate))
            root_dir = os.getcwd() 
```

结果在这个;

```
 The filename or extension is too long.
    Traceback (most recent call last):
      File "folder_generate.py", line 21, in <module>
        os.chdir(root_dir + "\\" + str(iterate))
    WindowsError: [Error 2] The system cannot find the file specified: 'c:\\Python27
    \\ABCDEFGHIJKLMNOPQRSTUVWXYZ\\ABCDEFGHIJKLMNOPQRSTUVWXYZ\\ABCDEFGHIJKLMNOPQRSTUV
    WXYZ\\ABCDEFGHIJKLMNOPQRSTUVWXYZ\\ABCDEFGHIJKLMNOPQRSTUVWXYZ\\ABCDEFGHIJKLMNOPQR
    STUVWXYZ\\ABCDEFGHIJKLMNOPQRSTUVWXYZ\\ABCDEFGHIJKLMNOPQRSTUVWXYZ\\ABCDEFGHIJKLMN
    OPQRSTUVWXYZ' 
```

正如在另一个问题中指出的那样，但没有明确回答。

我有一个快速测试代码，用于浏览目录内容；

```
 fileList = []
    fileSize = 0
    folderCount = 0
    rootdir = "c:\\test"

    for root, subFolders, files in os.walk(rootdir):
        folderCount += len(subFolders)
        for file in files:
            f = os.path.join(root,file)
            fileSize = fileSize + os.path.getsize(f)
            fileList.append(f)

    print("Total Size is {0} bytes".format(fileSize))
    print("Total Files ", len(fileList))
    print("Total Folders", folderCount) 
```

结果是 ;

```
 Total Size is 0 bytes
     ('Total Files ', 0)
     ('Total Folders', 9) 
```

无论测试文件夹中有多少个文件夹。有趣的是我可以通过资源管理器无缝浏览和创建 9.folder 之后的新文件夹。

我不太喜欢wind0z，因此如果有经验的用户能帮助我克服这个问题，我将不胜感激。

只需归档一个很长的目录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T22:58:27.583

如果这是主要问题，则可以通过使用***subst来超越限制。***

看看这个：

如何在 Python 中进行 unicode（它谈到 255 个限制） - [http://docs.python.org/release/3.1.5/howto/unicode.html](http://docs.python.org/release/3.1.5/howto/unicode.html)

[http://msdn.microsoft.com/en-us/library/aa365247(VS.85).aspx](http://msdn.microsoft.com/en-us/library/aa365247(VS.85).aspx) - 注意 Unicode 部分......它解释了 Windows API 的 Unicode 版本有更高的限制 - 以及如何启用它.

看看这个： [http ://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/subst.mspx?mfr=true](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/subst.mspx?mfr=true)

看看这个讨论 - [http://forums.v3.co.uk/showthread.php?t=223343](http://forums.v3.co.uk/showthread.php?t=223343)

除此之外，如果工作是你必须完成的事情，而这不是为了你自己纯粹的学习和娱乐，我可以告诉你，有更好的解决方案来备份你需要的东西，而不是你从头开始创建自己的东西.

# vim - 如何将 vim 记录宏键从“q”重新映射到“Q”？

> ID：10956261
> 
> 赞同：11
> 
> 时间：2012-06-08T21:30:59.217
> 
> 标签：vim

有时我按 'q' 不小心进入了 vim 的录制宏模式（我通常再按两次 q 就退出了。）

更改键绑定以开始将宏从“q”录制为“Q”的命令是什么？

我可以通过设置来阻止“q”做任何事情

```
nnoremap q <Nop> 
```

但我不确定如何让“Q”成为录制宏的快捷方式。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-08T21:34:31.867

您可以在两个命令行中将 Q 重新映射为 quit 并将 q 重新映射为 no 命令，如下所示：

```
nnoremap Q q
nnoremap q <Nop> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-18T09:51:43.857

我更喜欢这个变体 - `,q`，关键在`,`哪里`Leader`：

```
noremap <Leader>q q
noremap q <Nop> 
```

`Q`在正常模式下执行标准功能，切换到“Ex”模式。

# joomla - 在数据库中手动注册 Joomla 2.5 组件

> ID：10956264
> 
> 赞同：2
> 
> 时间：2012-06-08T21:31:04.800
> 
> 标签：joomla, joomla2.5, joomla-component

如何在数据库中手动注册 Joomla 2.5 组件？因为表结构不同于 1.5 版本。在 1.5 中可以将组件添加到 jos_components 表中。现在，似乎prefix_extensions 表。谁能告诉参数是什么？或者如果我不正确，正确的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T02:46:35.910

此 SQL 查询执行您想要的操作（只需插入您自己的值，不要忘记更改表前缀 '#_'）：

```
INSERT INTO `#__extensions`
(`extension_id`, `name`, `type`, `element`, `folder`, `client_id`, `enabled`)
VALUES (0, 'My Great App', 'component', 'com_mygreatapp', '', 1, 1 ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T13:26:31.350

您无需在 SQL 中手动注册组件，它们会在安装时添加到数据库中。只需通过 Joomla 后端的扩展管理器安装组件，并确保它们与 Joomla 2.5 兼容。

# python - 在 Python 3 中使用 AES 和 PyCrypto 加密文件

> ID：10956274
> 
> 赞同：5
> 
> 时间：2012-06-08T21:32:25.173
> 
> 标签：python, python-3.x, pycrypto

我正在使用 PyCrypto 在 CBC 模式下使用 AES 加密二进制文件（Python 3.2.3 64 位和 PyCrypto 2.6）。使用以下代码：[http ://eli.thegreenplace.net/2010/06/25/aes-encryption-of-files-in-python-with-pycrypto/](http://eli.thegreenplace.net/2010/06/25/aes-encryption-of-files-in-python-with-pycrypto/)

但遇到以下错误：ValueError: IV must be 16 bytes long。

这是代码：

```
def encryptFile(key, in_filename, out_filename=None, chunksize=64*1024):
""" Encrypts a file using AES (CBC mode) with the
    given key.

    key:
        The encryption key - a string that must be
        either 16, 24 or 32 bytes long. Longer keys
        are more secure.

    in_file:
        Input file

    out_file:
        If None, a StringIO will be returned.

    chunksize:
        Sets the size of the chunk which the function
        uses to read and encrypt the file. Larger chunk
        sizes can be faster for some files and machines.
        chunksize must be divisible by 16.
"""
if not out_filename:
    out_filename = in_filename + '.enc'

iv = ''.join(chr(random.randint(0, 0xFF)) for i in range(16))
encryptor = AES.new(key, AES.MODE_CBC, iv)
filesize = os.path.getsize(in_filename)

with open(in_filename, 'rb') as infile:
    with open(out_filename, 'wb') as outfile:
        outfile.write(struct.pack('<Q', filesize))
        outfile.write(iv)

        while True:
            chunk = infile.read(chunksize)
            if len(chunk) == 0:
                break
            elif len(chunk) % 16 != 0:
                chunk += ' ' * (16 - len(chunk) % 16)

            outfile.write(encryptor.encrypt(chunk)) 
```

我已经尝试过搜索和试验，但似乎无法让它发挥作用。Python 对我来说很新，加密也是。任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-09T08:59:48.257

正如 PyCrypto API 所说，IV[必须是字节字符串](https://www.dlitz.net/software/pycrypto/api/current/Crypto.Cipher.AES-module.html#new)，而不是*文本*字符串。

您的代码在 Python 2 中可以正常工作，因为它们是相同的（也就是说，它们都是 class `str`，除非您处理 Unicode 文本）。在 Python 3 中，它们是两种完全不同的类型：`bytes`和`str`.

因此，代码应为：

```
iv = bytes([ random.randint(0,0xFF) for i in range(16)] ) 
```

不过，这样的代码（除了 Federico 指出的那样不具有密码安全性）在 Python 2 中将无法正常工作。以下替代方案在这两种情况下都可以正常工作，它安全**且更**有效：

```
iv = Random.new().read(16) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T14:00:43.410

我想我为时已晚，但是[simple-crypt](http://pypi.python.org/pypi/simple-crypt)提供了一个简单的 pycrypto 包装器，它（1）可以解决您的问题，（2）包括密钥扩展和用于检测修改的 hmac（它使用 AES256 CTR 模式）。

# sql - SQL Server SYS 消息

> ID：10956280
> 
> 赞同：1
> 
> 时间：2012-06-08T21:32:41.570
> 
> 标签：sql, sql-server-2008, sql-server-2008-r2

碰巧检查了不同版本的 MS SQL Server 中的 sysmessages，我观察到文本中的差异。

消息编号：2627

在其中一个版本（SQL Server 2008 R2 RTM）中，文本是：违反 %ls 约束“%.*ls”。无法在对象 '%.*ls' 中插入重复键。

在另一个（SQL Server 2008 R2 Service Pack 1 (SP1)）中，文本是：违反 %ls 约束 '%.*ls'。无法在对象 '%.*ls' 中插入重复键。重复键值为 %ls。--> 这一篇给出了更多的细节。

是否有任何可用的特定文档可以告诉我在不同版本的 SQL 中对系统消息进行了哪些更改。

请指教。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T21:39:24.567

为什么不在两个系统上运行这个查询：

```
select * from master.dbo.sysmessages 
where msglangid = 1033
order by error 
```

然后将这两个结果与 WinMerge 或任何其他差异工具进行比较？您还可以将结果导入电子表格并使用公式来查找和/或过滤差异。

这是 SQL Server 2005 和 2008 R2 的 WinMerge Diff 的快速屏幕截图：

![sql server 2005 和 2008 R2 的 WinMerge Diff](../Images/20131bc065b3d70bf3e92710e6679b0c.png)

从橙色的数量可以看出，这两个版本之间有很多变化。对您的特定版本执行此操作应该会产生更少的更改。

# coding-style - 如何以更优雅的方式解决这个 Python 难题？

> ID：10956286
> 
> 赞同：1
> 
> 时间：2012-06-08T21:33:23.770
> 
> 标签：coding-style, python

我正在处理 CoderByte 的“Python”问题。时间至关重要，因此代码可能不是真正可读但非常简单。我会对你的方法感兴趣。我的代码适用于某些单词，但使用“句子”进行测试给了我不同的结果，即我们所说的调试。请评论我的想法！

**问题 ：**

让函数 LetterChanges(str) 获取传递的 str 参数并使用以下算法对其进行修改。将字符串中的每个字母替换为字母表中紧随其后的字母（即，c 变为 d，z 变为 a）。然后将这个新字符串中的每个元音（a、e、i、o、u）大写，最后返回这个修改后的字符串。使用下面框中的参数测试功能使用不同的参数测试您的代码。不要在代码中修改函数名。不要将任何代码放在函数之外，并使用 return 关键字从函数内返回您的答案。

**我的代码：**

```
def LetterChanges(str): 
    a = map(chr, range(97, 123))
    b = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z']
    b.remove('a')
    b.append('a')
    c = dict(zip(a,b))
    v = ['a', 'e', 'i', 'o', 'u']

    k = str
    for i in range(len(str)):
        if str[i] in a:
            k = k.replace(str[i], c[str[i]])

    l = k
    for i in range(len(k)):
        if k[i] in v:
            l = l.replace(k[i], k[i].upper())

    print l

# this call is needed to test your function
# keep this when you submit your code
LetterChanges(str) 
```

**输出 ：**

```
zddzst -> AEEAUU {wrong}!
sentence -> UfOUfOdf {wrong}! 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-08T21:44:21.737

我会用[`str.translate()`](http://docs.python.org/library/stdtypes.html#str.translate)这个，它可能看起来像这样：

```
import string

def LetterChanges(s):
    orig = string.letters
    new = string.ascii_lowercase[1:] + 'a' + string.ascii_uppercase[1:] + 'A'
    for vowel in 'aeiou':
        new = new.replace(vowel, vowel.upper())

    table = string.maketrans(orig, new)
    return s.translate(table) 
```

例子：

```
>>> LetterChanges('sentence')
'tfOUfOdf' 
```

为了提高效率，我会将创建移到`table`函数之外，以便只计算一次，而不是在每次函数调用时计算。`orig`或者，只需硬编码and的最终值`new`，如下所示：

```
import string

def LetterChanges(s):
    t = string.maketrans('abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ',
                         'bcdEfghIjklmnOpqrstUvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZA')
    return s.translate(t) 
```

**编辑：**这是一个应该与 coderbytes 限制一起使用的版本：

```
def LetterChanges(s):
    orig = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'
    new = 'bcdEfghIjklmnOpqrstUvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZA'
    result = ''
    for c in s:
        if c in orig:
            c = new[orig.index(c)]
        result += c
    return result 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T01:11:10.733

只是另一种解决方案

```
def LetterChanges(letters):
    """
    >>> LetterChanges('abcd')
    'bcdE'

    >>> LetterChanges('ABCD')
    'BCDE'

    >>> LetterChanges('sentence')
    'tfOUfOdf'
    """
    letter_map = {}
    changed_letters = []
    for old_letter in letters:
        if old_letter in letter_map:
            new_letter = letter_map[old_letter]
        else:
            ordinal = ord(old_letter)
            if 65 <= ordinal <= 90:    # ord('A'), ord('Z')
                new_letter = chr((ordinal - 64) % 26 + 65)
            elif 97 <= ordinal <= 122:    # ord('a'), ord('z')
                new_letter = chr((ordinal - 96) % 26 + 97)
            else:
                new_letter = old_letter

            if new_letter in 'aeiou':
                new_letter = new_letter.upper()
            letter_map[old_letter] = new_letter
        changed_letters.append(new_letter)
    return ''.join(changed_letters) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T22:47:54.210

您可以尝试以下方法：

```
sentence = <your sentence>
c = <your alphabet mapping>
v = <vowels>

def letterMap(x):
    letter = c[x]
    if letter in v:
        return letter.upper()
    else:
        return letter

letterList = map(letterMap, sentence)
answer = "".join(letterList) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-22T04:07:57.593

这是我的解决方案，通过了所有案例。主要部分是使用 chr 和 ord 来回转换字母和数字，以便将当前字母替换为下一个字母。

```
def LetterChanges(strParam):

  # code goes here
  result = ''
  for letter in strParam:
    if letter.isalpha():
        if letter != 'z':
            letter = chr(ord(letter)+1)
        else:
            letter = 'a'
    result+=letter

  result = ''.join(c.upper() if c in 'aeiou' else c for c in result)
  return result 
```

# azure - 天蓝色网站的最大大小是多少？

> ID：10956290
> 
> 赞同：4
> 
> 时间：2012-06-08T21:34:05.783
> 
> 标签：azure, azure-web-app-service

我正在将我的 asp 网站移植到新的 azure 网站。我的网站有大量的静态内容，所以我现在应该担心 azure 网站的大小限制。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-08T21:49:20.213

Windows Azure 网站存储在内容共享中，可从场中的所有“Web 服务器”访问。

我刚刚收集的信息是，在这次预览期间，每个订阅在内容共享中最多有 1GB 的存储空间，订阅用户可以分成 10 个网站。

根据您的要求，您可以为 1 个网站消耗整个 1GB，也可以将其分配给其他 10 个（或更少）网站。但是，您不能超过 1GB 大小限制和总共 10 个网站。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T21:42:50.697

不确定我是否知道最大大小的答案，但是......在谈论静态内容时，您可以做的一件事是将静态内容存储在 blob 存储中，而不是存储在网站中。我意识到这会增加您网站的成本，但是……大约 0.12 美元/GB/月（如果您仅使用本地复制，则为 0.09 美元），存储一大堆静态内容相当便宜。此外，这意味着静态内容是通过 Blob 存储而不是通过网站（和 IIS）提供的，这可能会为您的网站带来更好的性能。您只需要修改您的 URL 链接（用于公共内容）以指向 blob 存储中的 url。

哦，如果您认为这是一条适合您的好方法，您可以更进一步，为您的存储帐户启用 CDN。

# java - Spring Prototype Beans 和 Spring 的好处

> ID：10956292
> 
> 赞同：8
> 
> 时间：2012-06-08T21:34:12.567
> 
> 标签：java, spring, architecture, garbage-collection

我已经逐渐掌握了 Spring 一段时间，并且认为我对这些概念有一个合理的想法，但是我在另一个线程中遇到了信息，这让我的事情发生了翻天覆地的变化......

> “...尽管在所有对象上调用初始化生命周期回调方法而不考虑范围，但在原型的情况下，不会调用配置的销毁生命周期回调。客户端代码必须清理原型范围的对象并释放原型 bean 的昂贵资源(s) 正在持有。要让 Spring 容器释放原型范围 bean 持有的资源，请尝试使用自定义 bean 后处理器，它包含对需要清理的 bean 的引用。

这让我想到我有真正的用例，我想使用原型 bean，例如，每个请求我需要一个“新”bean 实例。然而，根据我对这个片段的理解（来自 Spring 3 文档），Spring 保留对需要清理的 bean 的引用（引用本身意味着垃圾收集器不会自动清除 bean）。此外，我认为原型 bean 持有的资源必须手动清理。

有人可以让我知道这是否正确吗？如果是这样，是否有用于处理此问题的典型模式？我很欣赏一个可以描述 Spring 以这种方式实现原型 bean 的架构原因的答案。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-08T21:42:26.890

> Spring 保留对需要清理的 bean 的引用（引用本身意味着垃圾收集器不会自动清除 bean）。

是的，但容器不包含对原型范围 bean 的引用。这就是为什么不调用销毁回调的原因：Spring 创建 bean 实例，连接它并调用构造回调。它给出了一个实例并忘记了那个 bean。

您可以安全地为每个请求创建原型范围的 bean。Spring 会给你一个实例，当你没有对该 bean 的任何引用时（Spring 没有保留一个！），它将被垃圾收集。但是由于 Spring 在创建 bean 后对它一无所知 - 它不能调用任何销毁回调。事实上，这归结为一个问题：为什么 Java 没有析构函数。

那么如何清理原型范围的 bean？好吧，就像你在 Java 中清理任何其他资源一样——明确地。提供`close()`,或您喜欢`destroy()`的`stop()`任何名称（考虑实现[`Closeable`](http://docs.oracle.com/javase/7/docs/api/java/io/Closeable.html)。请注意，通常不需要此类方法。垃圾收集器将释放整个对象图，而持久性资源（如数据库连接）将在整个关闭时`DataSource`关闭。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-08T21:43:55.100

您误读了文档。它明确地说：

> 要让 Spring 容器释放原型范围的 bean 持有的资源，请尝试使用自定义 bean 后处理器，它包含对需要清理的 bean 的引用。

所以 Spring 没有对它创建的原型 bean 进行任何引用。如果需要，您可以创建一个 bean 后处理器来保存对这些 bean 的引用。

此外，原型 bean 很少有必须清理的资源。例如，连接池（需要在关闭时正确销毁）通常是单例 bean。把它做成原型没有多大意义。由于原型 bean 经常使用很短的时间，创建它的客户端可以在不再使用它时显式地释放它的资源。就像你创建一个新的流或连接，并在 finally 块中关闭它一样。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-08T21:46:24.430

Spring 不知道使用原型范围创建的所有实例。它将简单地实例化和配置原型范围的 bean，然后按照文档中的说明将其交给客户端。

> Spring 不管理原型 bean 的完整生命周期：容器实例化、配置、装饰和以其他方式组装原型对象，将其交给客户端，然后不再了解该原型实例。

[http://static.springsource.org/spring/docs/3.0.0.M3/spring-framework-reference/html/ch04s04.html#beans-factory-scopes-prototype](http://static.springsource.org/spring/docs/3.0.0.M3/spring-framework-reference/html/ch04s04.html#beans-factory-scopes-prototype)

# r - R中的分组和排序

> ID：10956300
> 
> 赞同：-2
> 
> 时间：2012-06-08T21:35:08.653
> 
> 标签：r

我是一名 Excel 用户，试图将我的一些日常数据报告任务转换为 R。Excel 中最强大的功能之一是能够对数据进行透视和排序。我知道这些函数也是 R 中的特性，但我不确定如何编写代码来解决这个特定的分组和排序问题。

基本上，使用 RI 需要一个如下所示的数据集：

![简单数据集](../Images/4cd99972710b1edc9c1ba76ec66db6a0.png)

并将其转换为如下所示：

![透视数据集](../Images/aa54dfcc9216d14cdfef2ca7b8754afd.png)

请注意，决赛桌按团队对分数进行分组，然后按得分对汇总数据进行排序。学习如何在 R 中执行此操作将节省大量时间。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T22:16:42.813

你将需要的两个函数......一旦你有一个例子......是`xtabs`和`ftable`。首先，我们将现有表转换为数据框，然后注意计数现在位于名为“Freq”的变量中。然后我们重新制表到更少的维度：

```
> Tdf <- as.data.frame(Titanic, stringsAsFactors=FALSE)
> str(Tdf)
'data.frame':   32 obs. of  6 variables:
 $ Class   : chr  "1st" "2nd" "3rd" "Crew" ...
 $ Sex     : chr  "Male" "Male" "Male" "Male" ...
 $ Age     : chr  "Child" "Child" "Child" "Child" ...
 $ Survived: chr  "No" "No" "No" "No" ...
 $ Freq    : num  0 0 35 0 0 0 17 0 118 154 ...

> ftable( xtabs(Freq ~ Class+Sex, Tdf) , row.vars=c("Class", "Sex") )
Class Sex        
1st   Female  145
      Male    180
2nd   Female  106
      Male    179
3rd   Female  196
      Male    510
Crew  Female   23
      Male    862 
```

我没有得到很多积分，但我曾经演示过如何进行小计和总计：

[R：计算列总和和行总和作为数据帧的聚合](https://stackoverflow.com/questions/5982546/r-calculating-column-sums-row-sums-as-an-aggregation-from-a-dataframe/5982943#5982943)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T21:49:12.263

首先，欢迎来到 R 和 SO。如果您遵循此处发布问题的指南，您会发现您会得到更好的答案：

[如何制作一个出色的 R 可重现示例？](https://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example)

您可以通过多种方式完成您的要求。

首先，您需要对`sum`由`c(Team,Player)`. 有几种方法可以做到这一点：

*   `by`在基础 R 中，加上`as.data.frame.by`在`taRifx`包中
*   `ddply`在`plyr`包装中

然后获取结果输出并对其进行排序（同样，有很多方法可以做到这一点）：

*   `sort`在`taRifx`包装中
*   `arrange`在`plyr`包装中

由于听起来您会经常这样做，因此我强烈建议您创建自己的函数，该函数以您想要的方式自动执行这两个步骤。然后，您可以将该功能放在您的`.Rprofile`或包中，以便它始终可用。

# playframework - 使用 play framework 1.2.3 在模板中渲染地图

> ID：10956304
> 
> 赞同：1
> 
> 时间：2012-06-08T21:35:31.990
> 
> 标签：playframework

我有一个映射，其中键是字符串，但值是用户定义的具有多个字段的类型/对象。我正在使用 play framework 1.2.3（使用 groovy 模板）。任何人都可以分享迭代映射值的确切语法（我可以在其中获取对象中用作映射值的字段）。

这适用于字符串值 - 我需要对象字段的语法：

```
#{list amount, as:'Amt'} 
${Amt.value} 
#{/} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T08:50:02.050

获取地图的值并作为普通列表遍历它们或遍历键并获取相应的地图值。

```
#{list mymap.value(), as:'myval'} 
 ${myval.property} 
#{/}
    or
#{list items:mymap.keySet(), as:'key'}
   ${mymap.get(key)}        
#{/list} 
```

# jquery - jQuery not submitting a custom value

> ID：10956309
> 
> 赞同：0
> 
> 时间：2012-06-08T21:35:47.223
> 
> 标签：jquery

I have a field that must be created based on other fields in a form, so I added a modal confirmation to the submit event handler but even though the value appears in the modal correctly, it is not posting to the handler. Is there something I have to do special to insert a value into the $_POST object?

Here's my submit function:

```
$('form').submit( function(e){
    var occ = $('input:radio:[name=isDoubleOccupancy]:checked').val(),
          numBeds = $('select[name=numBeds]').val(),
          numBaths = $('select[name=numBaths]').val(),
          fpImage = '';

    if( parseInt(occ) == 1){
        fpImage = fpImage + 'do';
    } else if( parseInt(occ) == 2){
        fpImage = fpImage + 'to';
    } else {
        fpImage = fpImage + '';
    } // end if

    fpImage = fpImage + numBeds + "X" + numBaths + ".png";
    $('input[name=fpImage]').val( fpImage );

    if ( !confirm("Please request floor plan graphics named " + fpImage + " from the development team.")) { 
        return false;
    } // end if
}); // end form submit 
```

The dump of an example POST:

```
Array (
[id] =>
[fpName] => Efficiency
[fpBullets] => Private bedroom with private bathroom; Approximately 1,399 square feet; Spacious walk-in closets
[fpSubBullets] =>
[numBeds] => 1
[numBaths] => 4
[isDoubleOccupancy] => 0
[fpRate] => 1600
[payPeriod] => Monthly
[numInstallments] => 12
[fpSpecial] => 0
[fpSpecialText] =>
[showHome] =>
[fpImage] =>
[fpSpecialURL] =>
[isSoldOut] =>
) 
```

You can see that [fpImage] is posting NULL. I have looked for hours on Google, etc and the code seems right. Firebug shows no errors. I am officially frustrated.

Thanks in advance for your help.

Here's the HTML:

```
<div id="theEditor">
    <h2>EDIT FLOOR PLAN</h2>

    <form action="http://www.edrpo.com/WEBdev/index.php/conn/create_ind_floor_plan"
    method="post" accept-charset="utf-8">
      <label for="fpName">Floor Plan Name</label> <input type="text" name="fpName" value=
      "" /><br />
      <br />
      <label for="fpBullets">Floor Plan Main Bullets</label> 
      <textarea name="fpBullets" cols="40" rows="10">
</textarea><br />
      <span class="emphasisTxt">The following will display as a bulleted list. To enter,
      separate each bullet with a semicolon. Do not put a semicolon after the last
      bullet.<br />
      DO NOT USE THE ENTER OR RETURN KEY!</span><br />
      <br />
      <label for="fpSubBullets">Floor Plan Optional Bullets</label> 
      <textarea name="fpSubBullets" cols="40" rows="10">
</textarea><br />
      <span class="emphasisTxt">The optional bullets will display as a bulleted list at
      the bottom of the Floor Plans Info page. Use these to add temporary or suplemental
      information such as seasonal rates, etc. To enter, separate each bullet with a
      semicolon. Do not put a semicolon after the last bullet.<br />
      DO NOT USE THE ENTER OR RETURN KEY!</span><br />
      <br />
      <label for="numBeds">Number of Bedrooms</label> <select name="numBeds">
        <option value="">
          Please Select ...
        </option>

        <option value="0">
          Efficiency
        </option>

        <option value="1">
          One
        </option>

        <option value="2">
          Two
        </option>

        <option value="3">
          Three
        </option>

        <option value="4">
          Four
        </option>

        <option value="6">
          Dorm-style
        </option>
      </select><br />
      <br />
      <label for="numBaths">Number of Bathrooms</label> <select name="numBaths">
        <option value="">
          Please Select ...
        </option>

        <option value="1">
          One
        </option>

        <option value="2">
          Two
        </option>

        <option value="3">
          Three
        </option>

        <option value="4">
          Four
        </option>

        <option value="0">
          Dorm-style
        </option>
      </select><br />
      <br />
      <label for="isDoubleOccupancy">Unit Type</label> <input type="radio" name=
      "isDoubleOccupancy" value="0" checked="checked" id="isDoubleOccupancy" style=
      "margin:10px" />&nbsp;&nbsp;<span class='likeLabel'>Single-Occupancy</span>
      <input type="radio" name="isDoubleOccupancy" value="1" id="isDoubleOccupancy"
      style="margin:10px" />&nbsp;&nbsp;<span class='likeLabel'>Double-Occupancy</span>
      <input type="radio" name="isDoubleOccupancy" value="2" id="isDoubleOccupancy"
      style="margin:10px" />&nbsp;&nbsp;<span class=
      'likeLabel'>Triple-Occupancy</span><br />
      <br />
      <label for="fpRate">Rate</label> <input type="text" name="fpRate" value="" style=
      "width:80px;" /><br />
      <br />
      <label for="payPeriod">Pay Period</label> <select name="payPeriod">
        <option value="">
          Please Select ...
        </option>

        <option value="Monthly">
          Monthly
        </option>

        <option value="Semester">
          Semester
        </option>

        <option value="Biannual">
          Biannual
        </option>

        <option value="Annual">
          Annual
        </option>
      </select><br />
      <br />
      <label for="numInstallments">Number of Installments</label> <input type="text"
      name="numInstallments" value="" style="width:80px;" /><br />
      <br />
      <input type="radio" name="fpSpecial" value="1" id="fpSpecial" style=
      "margin:10px" />&nbsp;&nbsp;<span class='likeLabel'>Floor Plan Special ON</span>
      <input type="radio" name="fpSpecial" value="0" checked="checked" id="fpSpecial"
      style="margin:10px" />&nbsp;&nbsp;<span class='likeLabel'>Floor Plan Special
      OFF</span><br />
      <br />
      <label for="fpSpecialText">Floor Plan Special Text</label> 
      <textarea name="fpSpecialText" cols="40" rows="10">
</textarea><br />
      <span class="emphasisTxt">Floor Plan Special Text will display on the Floor Plans
      Info page for this floor plan.</span><br />
      <br />
      <label for="fpImage">Floor Plan Image</label> <input type="text" name="fpImage"
      value="" disabled="disabled" style="width:80px;" /><br />
      <br />

      <p style='text-align:center;'><input type="image" name="submit" value="" src=
      "http://www.edrpo.com/WEBdev/assets/images/update.png" /></p>
    </form>

    <p><br /></p>
  </div><!-- END theEditor DIV --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T11:44:33.717

Your HTML markup is showing duplicate ID's and has other issues.

```
<label for="isDoubleOccupancy">Unit Type</label>

<input type="radio" name="isDoubleOccupancy" value="0" checked="checked" id="isDoubleOccupancy" style="margin:10px" />&nbsp;&nbsp;

<span class='likeLabel'>Single-Occupancy</span>

<input type="radio" name="isDoubleOccupancy" value="1" id="isDoubleOccupancy" style="margin:10px" />&nbsp;&nbsp;

<span class='likeLabel'>Double-Occupancy</span>

<input type="radio" name="isDoubleOccupancy" value="2" id="isDoubleOccupancy" style="margin:10px" />&nbsp;&nbsp;

<span class='likeLabel'>Triple-Occupancy</span> 
```

To be sure, any ID can only be used once. Ditto for `id="fpSpecial"` and any other ID used.

**EDIT:** Per you message in my comment section:

This also applies to your `name attributes`.

They too are all the same and when your function sets the variable for `var occ = $('input:radio:[name=isDoubleOccupancy]:checked').val()` it will not function correctly since that value is always `0`.

Because it's always `0`, the custom value will **never** be submitted. My answer describes why you have this issue since `fpImage = fpImage + '';` will always be the case, hence no image.

**Solution:** Use unique `id` and `name` attributes and modify your script accordingly.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T11:38:54.590

You need a domready function so that all elements and changes can be found:

```
$(function() {//domready
    $('#form').submit(function() {
        // DO STUFF
        return true; // return false to cancel form action
    });
}); 
```

# objective-c - project.xcworkspace 文件重要吗？

> ID：10956312
> 
> 赞同：77
> 
> 时间：2012-06-08T21:35:54.567
> 
> 标签：objective-c, xcode, xcodebuild

我正在使用 shell 脚本执行命令行 xcodebuild。我的问题是，如果我打开和关闭`xx.xcodeproj`文件一次，然后使用该命令它运行良好。

不知何故，如果我深入研究文件更改，这`project.xcworkspace`是唯一已更改的文件。这个文件有效吗？我应该把它检查到版本控制中吗？这会导致任何问题吗？

我听说这很重要`.pbxproj`：这是真的吗？

我找不到任何有效的文档来讨论 xcode 项目文件中各种文件的角色和职责。请提供有助于我理解的链接。

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2012-06-09T10:43:24.300

`project.xcworkspace`是描述工作空间或项目的文件目录。尽管这里的一些答案表明它是不必要的并且应该被忽略以进行源代码控制，但我不同意，但这将高度依赖于您如何使用您的环境。通常，`project.xcworkspace`目录的内容包含`contents.xcworkspacedata`文件，其中列出了作为顶级实体包含在您的项目中的项目，一个`xcuserdata`目录，其中包含每个用户的设置（对于源代码控制应该被忽略），以及`xcshareddata`，它是数据由共享项目的用户共享，并且应该受到源代码控制。

在您不共享工作区或使用简单工作区的环境中，您也可以忽略这些，但是在您将相关项目放在同一个工作区并共享该配置的环境中，您可能希望保留这些。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-10-15T08:16:21.620

我认为将`project.xcworkspace`under`xx.xcodeproj`添加到 SCM 中并不重要，因为如果您删除它，Xcode 可以自动重新创建它。实际上它与 Cocoapods 无关。

如果你创建一个名为的工作区，**同时**`x.xcworkspace`创建一个名为的项目`y.xcodeproj`并添加该项目；然后你会发现目录下没有created 。`x.xcworkspace` **`project.xcworkspace``y.xcodeproj`**

 **但是，如果你`y.xcodeproj`用 Xcode 打开，Xcode`project.xcworkspace`会自动在`y.xcodeproj`文件夹下创建。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-08-19T03:00:38.237

如果您有一个应用程序的项目以及您在该位置添加的想法、实现和其他内容，这是一个帮助**

# mdm - 将应用程序发布到 MobileIron 或 AirWatch

> ID：10956313
> 
> 赞同：1
> 
> 时间：2012-06-08T21:35:55.377
> 
> 标签：mdm

我在一家软件公司工作，该公司目前正在考虑与 MobileIron 或 AirWatch 合作。基本上，我的公司正在构建一个允许人们创建应用程序的工具，我们希望让用户能够“一键发布”到 MobileIron 和 AirWatch 等 MDM 产品。我想知道是否有办法连接这两个系统来实现这一点。例如，我们是否需要将特定数据与应用程序文件一起发送到 Mobile Iron 或 AirWatch？

一个用例是：

1.  我在我的创建工具中创建我的应用程序。
2.  完成后，我单击“发布”按钮。
3.  该应用程序会自动保存到 MDM。
4.  MDM 管理员可以使用该 MDM 的正常流程将其部署给用户。

请问几句？非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T14:27:48.860

我不知道像 MobileIron 或 AirWatch 这样的 MDM 是否正在做这种链接。

我正在开发一种产品[Appaloosa-Store](http://www.appaloosa-store.com)，它提供了一种将应用程序轻松分发给用户的方法。它更像 MAM 而不是 MDM，但我们提供安全功能。

我们提供 Jenkins 插件和 API 来自动将您的应用程序部署到您自己的私有商店。此外，我们可以讨论您的服务与我们的服务之间的自定义链接。

一个用例是：

1.  创建应用程序
2.  提供您的商店令牌（来自 Appaloosa-Store）
3.  点击发布
4.  该应用程序会自动在 Appaloosa-Store 上发布
5.  管理员可以使用正常流程将其部署给用户

如果您需要更多信息，请随时[创建一个帐户并与我们联系。](http://www.appaloosa-store.com)

Chris 开发人员 - [Appaloosa 团队](http://www.appaloosa-store.com/about_us)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T20:09:39.967

MobileIron 是一个向导形式的管理员上传界面。遗憾的是，今天没有可用于将文件放入正确区域的 API。不过，您的想法很有趣，我将在 MobileIron 中提出。

我现在能想到的几个问题会破坏模型：

这些应用程序针对不同的用途 - 开发人员总是知道要针对谁吗？这就是巫师发挥作用的地方。如果答案是否定的 - 如果有一个“暂存”区域可以放置应用程序并且管理员以用户为目标，那可以吗？

与现有的上传向导相比，使用 API 有什么好处？

如果您可以澄清，这将有助于将此请求添加到未来的功能列表中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-14T21:37:25.593

可能会或可能不会，取决于您的应用程序的复杂性。

实际上，您需要一些适配代码让您的应用程序分别与 MobileIron 或 AirWatch 一起工作。例如，您需要使用 AirWatch 的 SDK 在设备上获取应用程序的授权状态以确保企业移动性管理，在 MobileIron 的应用程序变体中包含此类代码可能不合适。

我想您需要为 public、AirWatch 和 MobileIron 生成 3 个应用程序变体以满足不同的使用情况，然后您可以

1.  将 AirWatch 应用程序变体添加到 AiwWatch 管理控制台以发布它，
2.  在 MobileIron 在线支持站点上打包 MobileIron 应用程序变体，并将其发布在 MobileIron 管理控制台上。

需要考虑的另一件事是用户角色，因为您将 MobileIron 变体包装为“开发人员”角色，但“企业管理员”角色是在企业内部发布应用程序的角色。

# python - Python - 是否有更好/更有效的方法来查找树中的节点？

> ID：10956315
> 
> 赞同：1
> 
> 时间：2012-06-08T21:36:18.700
> 
> 标签：python, tree, find, traversal

我有一个定义如下的节点数据结构，并且不确定 find_matching_node 方法是pythonic还是有效的。我不太熟悉生成器，但认为使用它们可能会有更好的解决方案。有任何想法吗？

```
class HierarchyNode():

    def __init__(self, nodeId):
        self.nodeId = nodeId
        self.children = {} # opted for dictionary to help reduce lookup time

    def addOrGetChild(self, childNode):
        return self.children.setdefault(childNode.nodeId,childNode)

    def find_matching_node(self, node):
        '''
        look for the node in the immediate children of the current node.
        if not found recursively look for it in the children nodes until 
        gone through all nodes
        '''
        matching_node = self.children.get(node.nodeId)
        if matching_node:
            return matching_node
        else:
            for child in self.children.itervalues():
                matching_node = child.find_matching_node(node)
                if matching_node:
                    return matching_node
            return None 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T21:46:24.727

根据您在树上需要的其他操作，以及您需要执行此递归的频率，您可以将所有后代节点存储在节点上的字典中，因此整个递归函数可以是单个字典查找。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T22:36:06.697

FWIW，您最好使用可重用的树数据结构，而不是重新发明轮子。根据运行时和工作负载，我见过的 CPython 最好的描述如下：http: [//stromberg.dnsalias.org/~strombrg/python-tree-and-heap-comparison/](http://stromberg.dnsalias.org/~strombrg/python-tree-and-heap-comparison/)

...但简而言之，我看到的最好的是splay树、AVL树和treap。

# matlab - 如何在图中动态显示 N 个变量的演变？

> ID：10956318
> 
> 赞同：0
> 
> 时间：2012-06-08T21:36:30.893
> 
> 标签：matlab, matrix, plot

我在函数中有一个带有浮点值的`NxM`矩阵。`W`

我希望能够在图中显示`X`每列迭代的演变。

伪代码将是：

```
- open a window to show all values of column 1 of W..
- open a window to show all values of column 2 of W..
... 
- open a window to show all values of column M of W

    for iterations=1 to X
    <here some updates on values in W are made>
    {
     for i=1:M {
       for j=1:N {
           update value of W(i,j) in window j (without re-opening the window)
       }
    }

    } 
```

我知道这样做的方法是使用`plot`函数，但即使在阅读官方文档后我也不太了解。

**编辑 3 这是我现在拥有的代码**

```
 [~:X] = size(W);   
   for i=1:X
    plot(W(:,i));
    end 
```

**有用。但是如何设置“仅打印点”？以及如何设置人物的位置（我的意思是，我希望人物不会出现在另一个之上？**

我**的确切**目标如下：假设 W 是一个 10*3 矩阵。

我想要3个数字。

在每个图中，应打印（并更新一定次数）列 i 中所有值的值。这些值应该打印为点（不像每个点都与其他点链接的函数）。

每个 POINT 代表一个元素 W(i,j)。更准确地说，该图应该是 ND SPACE 的二维空间中的表示，其中 N = W 的行数。

有什么进一步的建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T00:37:14.503

你正在尝试这个：

```
[~,X] = size(W);   
for i=1:X
    plot(W(:,i),[0:0.5:20],'none');
end 
```

这不起作用，因为每列`W`有 10 行，并且`[0:.5:20]`有 40 个元素。您需要具有匹配长度的向量才能使其起作用，而您不需要。

From your description, I think you might be looking for [subplot](http://www.mathworks.com/help/techdoc/ref/subplot.html), which has multiple sets of contained within a single "figure window":

```
figure;
[R,C] = size(W); 
for i=1:C
    subplot(C,1,i); #% creates axes for each column
    plot(W(:,i),1:R,'.k'); #% has appropriate x values
                #%   ^---- '.k' indicates unconnected dots (.), colored black (k)
end 
```

From the comments below, the question-asker is looking for a way to create figure windows so that each one contains a maximum of 4 subplots. There are many ways to do this; I've included one option below.

```
num_subplots = 4;
[R,C] = size(W); 
for i=1:C
    this_subplot_position = mod(i,num_subplots) + 1;
    if this_subplot_position == 1
        figure;
    end
    subplot(num_subplots,1,this_subplot_position); #% creates axes for each column
    plot(W(:,i),1:R,'.k'); #% has appropriate x values
                #%   ^---- '.k' indicates unconnected dots (.), colored black (k)
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T22:12:48.403

通过窗口，我希望你的意思是数字。你能澄清一下吗？你有一个二维数组，你想在单独的图中逐列绘制该列？

```
figure(i);
plot(W(:,i),[0:0.5:20],linespecs); %to plot ith column on y axis, and x axis as ur [0:0.5:20] 
```

对于更新，只需更改值，它应该相应地更改数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T07:18:51.543

Matlab includes a command called `refreshdata` that makes problems like this a bit easier. In the example below we plot every column of `W` only once, but we set the `YDataSource` property so the plots automatically update when we later call `refreshdata`. The `YDataSource` property is a string containing a valid variable or command; here, it's `W(:, 1)` for the first plot, `W(:, 2)` for the second plot, etc.

```
for i_plot = 1:M
    subplot(M, 1, i_plot);
    plot(W(:, i_plot), '.', 'YDataSource', ['W(:, ' num2str(i_plot) ')']);
end

for i_plot = 1:M
    for i_point = 1:N
        W(i_point, i_plot) = rand;
        refreshdata;
        pause(0.1);
    end
end 
```

# c# - 某处有有趣的边缘吗？

> ID：10956323
> 
> 赞同：1
> 
> 时间：2012-06-08T21:37:06.797
> 
> 标签：c#, visual-studio, windows-phone-7, xaml

我正在尝试创建自己的图形控件，但是 x 线存在一些问题。

我创建了一个新控件并将其添加到一个空的 WP7 项目中。该控件具有一个`StackPanel`名称`Canvas`和设置`Height`为`Width`400。

刚开始我写了一些代码来看看：

```
 double yStepping = Canvas.Height/5;
            double y = 0;

            // generate x lines
            for (int k = 0; k < 3; k++)
            {
                y += 10;

                Line l = new Line()
                {
                    Stroke = new SolidColorBrush(Colors.White),
                    StrokeThickness = 2,

                    X1 = 10,
                    Y1 = y,

                    X2 = 100,
                    Y2 = y
                };

                Canvas.Children.Add(l);
            } 
```

我认为这会创建均匀间隔的线条，但事实并非如此。对于每一行，间距都会增加。这是为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T22:02:23.557

堆栈面板堆叠您的行。由于其笔划粗细，每条线的高度至少为 2。此外，每条线的 Y 值会添加到其高度（更准确地说：添加到从中得出高度的边界框）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T22:13:48.463

您可以使用 Snoop for WPF 等效于 Silverlight，例如[Silverlight Spy](http://firstfloorsoftware.com/silverlightspy/)来检查可视化树并查看哪些元素增加了与内部控件相比的宽度和高度，或者即使该控件由于意外绑定而具有错误的设置。

# paypal - 需要贝宝授权（沙盒）数字商品交易，贝宝支持没有回答我

> ID：10956325
> 
> 赞同：3
> 
> 时间：2012-06-08T21:37:24.600
> 
> 标签：paypal, paypal-sandbox

我正在尝试在我的应用程序上实现 Paypal 的数字商品支付，经过一些研究和编码，我几乎所有东西都启动并运行了，唯一的问题是这个错误：

> SetExpressCheckout API 调用失败。详细的错误消息：您没有注册接受数字交付商品的付款。简短的错误消息：由于参数无效，交易被拒绝。有关详细信息，请参阅其他错误消息。错误代码：10004 错误严重性代码：错误

经过一番谷歌搜索，似乎我需要某种授权才能使用数字商品 API，即使在沙盒上也是如此（如果你问我，这很愚蠢）。我尝试在 x.com 上发帖，在 x.com 上发私人消息 paypal 员工以及在 paypal.com 上通常的支持渠道，但绝对没有得到任何答复（我发送这些邮件已经 1 周了）。有人知道如何获得授权吗？我的项目已经停滞了一周，因为我需要整合贝宝才能继续。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T21:48:42.170

您的问题似乎是如何从贝宝获得客户支持以向您发送授权。但是，我不相信您使用的是正确的频道。

尝试通过为商家保留的[https://ppmts.custhelp.com/](https://ppmts.custhelp.com/)向他们发送消息。如果您将紧迫性设置为“一些业务影响”（确实如此），他们可能会很快做出反应。我在大约 24 小时内解决了相关服务的类似问题。

# c# - 为命名空间指定程序集

> ID：10956326
> 
> 赞同：12
> 
> 时间：2012-06-08T21:37:29.967
> 
> 标签：c#, wpf, xaml, namespaces, .net-assembly

无论如何在 C# 中指定程序集以及命名空间？

例如，如果您在项目中同时引用两者`PresentationFramework.Aero`，`PresentationFramework.Luna`您可能会注意到它们在同一个命名空间中共享相同的控件，但实现不同。

举个`ButtonChrome`例子。它存在于命名空间下的两个程序集中`Microsoft.Windows.Themes`。

在 XAML 中，您将程序集与命名空间一起包含在内，所以在这里没问题

```
xmlns:aeroTheme="clr-namespace:Microsoft.Windows.Themes;assembly=PresentationFramework.Aero"
xmlns:lunaTheme="clr-namespace:Microsoft.Windows.Themes;assembly=PresentationFramework.Luna"

<aeroTheme:ButtonChrome ../>
<lunaTheme:ButtonChrome ../> 
```

但是在后面的 C# 代码中，我无论如何都找不到创建`ButtonChrome`in的实例`PresentationFramework.Aero`。

以下代码在编译时给了我**错误 CS0433**

```
using Microsoft.Windows.Themes;
// ...
ButtonChrome buttonChrome = new ButtonChrome(); 
```

> **错误 CS0433**：“Microsoft.Windows.Themes.ButtonChrome”类型存在于
> “c:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETFramework\v4.0\Profile\Client\PresentationFramework.Aero.dll”中
> 和
> 'c:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETFramework\v4.0\Profile\Client\PresentationFramework.Luna.dll'

这很容易理解，编译器无法知道`ButtonChrome`选择哪个，因为我没有告诉它。我能以某种方式做到这一点吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-08T21:39:30.030

您需要为程序集引用指定别名，然后通过别名导入：

```
extern alias thealias; 
```

有关参考，请参阅属性窗口。

假设您将 aero 组件别名为“aero”，将 luna 组件别名为“luna”。然后，您可以在同一个文件中使用这两种类型，如下所示：

```
extern alias aero;
extern alias luna;

using lunatheme=luna::Microsoft.Windows.Themes;
using aerotheme=aero::Microsoft.Windows.Themes;

...

var lunaButtonChrome = new lunatheme.ButtonChrome();
var aeroButtonChrome = new aerotheme.ButtonChrome(); 
```

有关详细信息，请参阅[外部别名](http://msdn.microsoft.com/en-us/library/ms173212%28v=vs.80%29.aspx)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-08T21:49:54.720

救援的外部别名，请参阅[此处](http://msdn.microsoft.com/en-us/library/ms173212.aspx)的文档。添加了程序集引用并在各自的引用属性中创建了别名 Luna 和 Aero，您可以尝试以下示例代码：

```
extern alias Aero;
extern alias Luna;

using System.Windows;

namespace WpfApplication1
{
  /// <summary>
  /// Interaction logic for MainWindow.xaml
  /// </summary>
  public partial class MainWindow: Window
  {
    public MainWindow()
    {
      InitializeComponent();

      var chrome1 = new Luna::Microsoft.Windows.Themes.ButtonChrome();
      var chrome2 = new Aero::Microsoft.Windows.Themes.ButtonChrome();
      MessageBox.Show(chrome1.GetType().AssemblyQualifiedName);
      MessageBox.Show(chrome2.GetType().AssemblyQualifiedName);
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-06T11:36:57.333

我在引用 Microsoft.Scripting 程序集时遇到了关于**System.NonSerializedAttribute**的类似错误，该程序集还定义了此属性（在服务引用生成的 Reference.cs 文件中发现冲突）。解决这个问题的最简单方法与定义别名非常相似，但没有编译头痛：

在 Visual Studio 中，转到项目的引用，选择产生冲突的程序集之一，转到属性并用不等于**global**的值填充 Aliases 值。

# objective-c - iOS Core-Graphics：使用 CGContext setter 渲染清晰的 pdf

> ID：10956329
> 
> 赞同：0
> 
> 时间：2012-06-08T21:37:53.767
> 
> 标签：objective-c, ios, pdf, core-graphics

我正在使用 ios 中的 cgpdf 和 catiledlayer 开发 pdf 渲染器，一切都很好，除了某些字体，就好像矢量要靠在一起，我得到一种模糊的外观，就像我没有戴眼镜一样。我正在研究并且希望得到一些帮助的解决方案是使边缘附近的灰色像素变成黑色。我猜这可以通过 CGContextSet"Whatever"() 方法实现。这是一张照片来说明。

* * *

目前渲染为... ![当前的](../Images/35c367e738b1f1465db5539331fa8e83.png)

* * *

Adobe 阅读器应用程序呈现为...

![土坯](../Images/3018ea1314ce10dd344d6589b75aeae6.png)

并且看起来非常锋利，所以如果你知道它使用的方法（或如何获得相似），那么我会欣喜若狂

* * *

但我试图做的是将所有灰色像素变成黑色。就像是... ![美好的](../Images/a8a2e602a2bf9a3ead87194ad549b056.png)

* * *

我再次使用 cgcontext setter 方法并注意到更改，但并非所有文档都清楚说明每个方法的作用，因此感谢您对解决方案的任何解释或洞察。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T05:32:38.087

看起来 Adob​​e 的渲染器正在将字形的底部与整个像素对齐，但您的不是。

Quartz-Dev 邮件列表中的这两条消息（[一](http://lists.apple.com/archives/quartz-dev/2011/Jan/msg00004.html)、[二](http://lists.apple.com/archives/quartz-dev/2011/Jan/msg00003.html)）建议您尝试使用以下函数更改亚像素定位和亚像素量化的设置：

```
CGContextSetAllowsFontSubpixelPositioning
CGContextSetShouldSubpixelPositionFonts
CGContextSetAllowsFontSubpixelQuantization
CGContextSetShouldSubpixelQuantizeFonts 
```

要么完全关闭亚像素定位，要么同时开启亚像素定位和亚像素量化。你必须进行实验。

正如您所展示的，后处理 Quartz 的渲染不太可能看起来非常好。

# virtualenv - 如何让 virtualenv 与鱼壳一起工作？

> ID：10956335
> 
> 赞同：103
> 
> 时间：2012-06-08T21:38:44.427
> 
> 标签：virtualenv, fish

我正在尝试让 virtualenv 与鱼壳一起使用。我安装了 virtualenv，它与 bash 和 zsh 一起工作得很好。但是，运行以下命令会返回`fish: Unknown command 'source'`：

```
$ source ~/path/to/bin/activate 
```

有谁知道如何让 virtualenv 和 fish shell 一起工作？

* * *

## 回答 #1

> 赞同：226
> 
> 时间：2012-06-09T16:23:54.790

您无需激活即可使用 virtualenv，这很方便。您可以直接使用 virtualenv：

```
virtualenv venv
./venv/bin/pip install foo 
```

* * *

您是否尝试过使用以下方法从鱼中获取：

```
. venv/bin/activate.fish 
```

它可能不像 bash 那样广泛使用，因此可能存在问题 - 查看提交历史记录显示最近的修复：

[https://github.com/pypa/virtualenv/blob/master/virtualenv_embedded/activate.fish](https://github.com/pypa/virtualenv/blob/master/virtualenv_embedded/activate.fish)

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2018-12-25T13:33:03.337

对于 virtualenv，fish 在 bin 目录下有一个单独的激活文件，`.fish`扩展名为。

所以你必须这样做：

`$ source ~/path/to/bin/activate.fish`

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2013-12-29T20:49:48.720

你也可以使用这个：[https ://github.com/adambrenecki/virtualfish](https://github.com/adambrenecki/virtualfish)

它允许您通过键入以下内容来激活 virtualenv：

```
vf activate <my_env> 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-01-14T16:12:09.827

您可以使用虚拟鱼。

> Ian Bicking 的 virtualenv 的 Fish Shell 包装器，有点松散地基于 Doug Hellman 的用于 Bourne 兼容 shell 的 virtualenvwrapper。

来源： [https ://github.com/adambrenecki/virtualfish](https://github.com/adambrenecki/virtualfish)

文档：http: [//virtualfish.readthedocs.org/en/latest/](http://virtualfish.readthedocs.org/en/latest/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-01T13:25:26.733

如果你不能使用`activate.fish`，你可以将`bin`目录添加到你的`PATH`：

```
set -gx PATH /path/to/virtualenv/bin $PATH 
```

这几乎是所有的`activate.fish`（嗯，不完全是，它也取消`PYTHONHOME`设置，（当我尝试它时没有预先设置，YMMV）；它试图弄乱你的`fish_prompt`）。

或者：我是一名前 Bash 用户，开始使用 Fish 并怀念 Doug Hellman 的`virtualenvwrapper`，所以我今天才开始研究[一个名为 virtualfish 的替代品](https://github.com/adambrenecki/virtualfish)——它有一些你可能会觉得有用的方便快捷方式，尽管它远不及完整维维。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-08-23T03:38:15.983

（这个线程似乎接近关闭，但我找到了解决方案:)

要使用 venv 环境输入新的鱼壳：

```
begin; set -lx PATH (realpath ./venv)/bin $PATH; fish; end 
```

当 venv 目录为`./venv`.

要停用，只需 ctrl-d 或`exit`.

* * *

另一种解决方案，它不调用子外壳。

创建并输入一个 venv 环境：

```
python3 -m venv ./venv
set -lx PATH (realpath ./venv)/bin $PATH 
```

退出环境：

```
set -lx PATH $PATH[2..-1] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-08-11T11:32:53.700

如果它是一个 env 文件，试试这个*.env/bin/activate.fish* 确保你的 env 文件在你的项目文件中，在我的例子中它是一个 django 项目。Tt为我工作

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-12-02T10:58:37.630

您可以使用**命令**-`set VIRTUAL_ENV 'path to the virtual env directory'` 示例 -`set VIRTUAL_ENV '/home/aman/Desktop/test/venv'`

# c# - Asp.net 验证控件和服务器端验证

> ID：10956344
> 
> 赞同：0
> 
> 时间：2012-06-08T21:39:56.817
> 
> 标签：c#, asp.net, validation

我最近发现您需要在服务器端代码中执行一些检查以检查页面是否有效。我之前的假设是，当验证器发现不正确的输入时，执行会自动停止。

我将以下代码放在需要验证的事件上：

```
 if (!Page.IsValid)
        return; 
```

这是正确的方法吗？

另外，如果我的页面有两个验证组，那么正确的组会自动在服务器上运行（由按钮触发的那个）还是我需要使用它来调用它`Page.Validate("groupName")`？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T21:45:35.647

最好同时检查客户端和服务器。客户端部分应该为您自动完成，但在服务器上检查它是一种防御措施，以防有人使用任何方式绕过您的 UI。

您可以为您的按钮分配一个 ValidationGroup，它应该与您分配给验证器的 ValidationGroup 的值相同。单击您的按钮时，它可能会在同一组上执行客户端验证，并且正如您所提到的，它将停止执行（防止回发）。

在服务器端，您将完全按照您提到的那样做：

```
Page.Validate("WhateverGroup");
if (!Page.IsValid)
   return; //Didn't pass validation
else
   //Do whatever 
```

如果您有多个组，那么您应该检查每个组（如果适用）（根据某些条件，某些组可能不适用，这就是您通常使用组的原因）。

**编辑**

针对您的问题：

选中的“默认”组由发布页面的控件确定。也就是说，如果发布页面的控件将“WhateverGroup”作为其验证组，那么只有具有“WhateverGroup”的验证器才会被验证。

`Page.IsValid`只应在调用该方法 *后检查。*只是一个标志，在您调用 Page.Validate 的任何时候都会触发并且某些内容不会验证，无论您是否使用组调用它。`Page.Validate``Page.IsValid`

参考：

*   [Page.IsValid](http://msdn.microsoft.com/en-us/library/system.web.ui.page.isvalid.aspx)
*   [Page.Validate()](http://msdn.microsoft.com/en-us/library/0ke7bxeh.aspx)
*   [Page.Validate(字符串)](http://msdn.microsoft.com/en-us/library/dwzxc386.aspx)

# ruby-on-rails - rails form_for 从不调用创建控制器操作来使用 redirect_to

> ID：10956346
> 
> 赞同：1
> 
> 时间：2012-06-08T21:40:01.790
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在使用 Rails 3，并且在 StatusController 中有一个 form_for。当我点击提交按钮时，我的 create 方法永远不会被调用。我的 create 方法有一个 redirect_to :index，但是当我点击提交时，所有信息都保留在表单中，并且页面不会重定向。但是，该对象确实正确保存在数据库中。

什么会导致这种情况？

控制器：

```
class StatusController < ApplicationController
  def new
    @status = Status.new
  end
  def create
    @status = Status.new(params[:status])
    @status.date_added = Time.now
    if @status.save
    else
      render 'new'
    end
  end 
```

看法：

```
.well
  =form_for @status do |f|
    =f.label :user_email
    =f.text_field :user_email

    =f.label :added_by
    =f.text_field :added_by

    =f.label :comments
    =f.text_area :comments
    %br
    %br
    =f.submit 
```

我已经对此进行了代码调整，现在数据在提交时从表单中消失了，但是该对象永远不会被保存，因为从未调用过“创建”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-29T14:48:20.387

你的控制器看起来有点奇怪......我假设你有 Rails 3.2 或更高版本。

```
class StatusController < ApplicationController
  respond_to :html

  def new
    @status = Status.new
  end
  def create
    @status = Status.new(params[:status])

    @status.date_added = Time.now
    @status.save
    respond_with(@status)
  end
end 
```

`respond_with`是为你做所有的事情。如果保存失败，它会呈现动作，如果保存成功，它会`new`重定向到。`status_path(@status)`如果您想更改重定向行为，您可以使用（否则未记录的）`:location`属性来阐明您想要重定向用户的位置，或者您可以通过传递带有一个参数（格式）的块来覆盖默认的“成功”行为。有关更多信息，请参阅[其文档](http://apidock.com/rails/ActionController/MimeResponds/respond_with)。

顺便说一句，如果您`t.timestamp`在状态的迁移中使用 s ，那么您已经拥有`created_at`字段并且它由`save`/`update_attributes`方法自动处理，因此您不需要`date_added`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T22:07:00.353

我只是在这里学习 Ruby，所以我可能是错的，但如果状态保存正确，看起来你永远不会重定向。

```
 class StatusController < ApplicationController
  def new
    @status = Status.new
  end
  def create
    @status = Status.new(params[:status])
    @status.date_added = Time.now
    if @status.save
      format.html { redirect_to @status } # Or :index if you want to redirect to index
    else
      render 'new'
    end
  end 
```

当然，请确保您也创建了这些控制器方法和视图。

# c# - NServiceBus 处理程序单元测试的依赖注入

> ID：10956347
> 
> 赞同：6
> 
> 时间：2012-06-08T21:40:02.740
> 
> 标签：c#, unit-testing, dependency-injection, nservicebus

这就是您应该为 NServiceBus 处理程序注入依赖项以对其进行测试的方式：

```
Test.Handler<YourMessageHandler>()
  .WithExternalDependencies(h => h.Dependency = yourObj) 
```

( [http://nservicebus.com/UnitTesting.aspx](http://nservicebus.com/UnitTesting.aspx) )

然而，这意味着我的依赖对象引用应该是公开的，我不太喜欢。有什么方法可以让它保持私有只读并在构造函数中分配它，以便实现应该只通过处理程序构造函数传递？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T21:48:07.250

您可以使用以下语法来使用构造函数注入：

```
 Test.Handler<YourMessageHandler>(bus => new YourMessageHandler(dep1, dep2)) 
```

dep1 和 dep2 很可能只是您的模拟框架为您准备的一些存根或模拟。

-- Udi Dahan 从这里更新：

您可以通过 Test.Bus 访问模拟的总线实例。

# android - android中的HTTP正文发布

> ID：10956351
> 
> 赞同：0
> 
> 时间：2012-06-08T21:40:43.960
> 
> 标签：android, http-post, http-request

我是android开发的新手。在我的应用程序中，我必须使用 HTTP 正文帖子。但我遇到了一个错误。

这是我的代码：

```
HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost("http://67.64.238.61:8182/websearch");

try {
    StringEntity se = new StringEntity( "<Search><Login><User>test</User><Password>test</Password></Login><SearchWord>1234567890</SearchWord><NextToken></NextToken></Search>", HTTP.UTF_8);
    se.setContentType("text/xml");
    httppost.setEntity(se);

    //HttpResponse httpresponse = httpclient.execute(httppost);
    BasicHttpResponse httpResponse = (BasicHttpResponse) httpclient .execute(httppost);
    HttpEntity resEntity = httpResponse.getEntity();
    String str = EntityUtils.toString(resEntity);
    System.out.println("==="+str);
    //tvData.setText(EntityUtils.toString(resEntity));

} catch (ClientProtocolException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

我收到这种错误：

```
06-08 16:25:38.665: WARN/System.err(12122): org.apache.http.client.ClientProtocolException
06-08 16:25:38.665: WARN/System.err(12122):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:557)
06-08 16:25:38.665: WARN/System.err(12122):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
06-08 16:25:38.675: WARN/System.err(12122):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
06-08 16:25:38.675: WARN/System.err(12122):     at com.texas.book.Search.search(Search.java:225)
06-08 16:25:38.675: WARN/System.err(12122):     at com.texas.book.Search$Progress.doInBackground(Search.java:196)
06-08 16:25:38.675: WARN/System.err(12122):     at com.texas.book.Search$Progress.doInBackground(Search.java:1)
06-08 16:25:38.675: WARN/System.err(12122):     at android.os.AsyncTask$2.call(AsyncTask.java:185)
06-08 16:25:38.675: WARN/System.err(12122):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
06-08 16:25:38.675: WARN/System.err(12122):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
06-08 16:25:38.675: WARN/System.err(12122):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
06-08 16:25:38.685: WARN/System.err(12122):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
06-08 16:25:38.685: WARN/System.err(12122):     at java.lang.Thread.run(Thread.java:1096)
06-08 16:25:38.685: WARN/System.err(12122): Caused by: org.apache.http.ProtocolException: Unable to parse status code from status line: HTTP/1.1 ñðð@Ã£¤
06-08 16:25:38.685: WARN/System.err(12122):     at org.apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java:176)
06-08 16:25:38.685: WARN/System.err(12122):     at org.apache.http.impl.AbstractHttpClientConnection.receiveResponseHeader(AbstractHttpClientConnection.java:179)
06-08 16:25:38.685: WARN/System.err(12122):     at org.apache.http.impl.conn.DefaultClientConnection.receiveResponseHeader(DefaultClientConnection.java:235)
06-08 16:25:38.695: WARN/System.err(12122):     at org.apache.http.impl.conn.AbstractClientConnAdapter.receiveResponseHeader(AbstractClientConnAdapter.java:259)
06-08 16:25:38.695: WARN/System.err(12122):     at org.apache.http.protocol.HttpRequestExecutor.doSendRequest(HttpRequestExecutor.java:219)
06-08 16:25:38.695: WARN/System.err(12122):     at org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:119)
06-08 16:25:38.695: WARN/System.err(12122):     at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:410)
06-08 16:25:38.695: WARN/System.err(12122):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
06-08 16:25:38.695: WARN/System.err(12122): Caused by: org.apache.http.ParseException: Unable to parse status code from status line: HTTP/1.1 ñðð@Ã£¤
06-08 16:25:38.715: WARN/System.err(12122):     at org.apache.http.message.BasicLineParser.parseStatusLine(BasicLineParser.java:424)
06-08 16:25:38.715: WARN/System.err(12122):     at org.apache.http.impl.conn.DefaultResponseParser.parseHead(DefaultResponseParser.java:99)
06-08 16:25:38.715: WARN/System.err(12122):     at org.apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java:174)
06-08 16:25:38.715: WARN/System.err(12122):     ... 18 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T21:49:08.097

服务器返回了您无法处理的响应。好吧，您确实在响应时处理它`ClientProtocolException`

很可能您需要使用该函数为您的`HttpPost`对象设置一些标头信息。`setHeader`

这是您尝试连接的服务器的问题，根本不接受您发送的内容。

# twitter-bootstrap - 搜索表单中的按钮下拉菜单

> ID：10956354
> 
> 赞同：1
> 
> 时间：2012-06-08T21:41:15.043
> 
> 标签：twitter-bootstrap

使用 twitter 引导程序，我知道您可以将按钮添加到文本输入中。我可以添加一个按钮*下拉菜单*吗？

这是 twitter 引导表单输入文档：http: [//twitter.github.com/bootstrap/base-css.html#forms](http://twitter.github.com/bootstrap/base-css.html#forms)

这是按钮下拉列表的部分：http: [//twitter.github.com/bootstrap/components.html#buttonDropdowns](http://twitter.github.com/bootstrap/components.html#buttonDropdowns)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T22:46:23.597

我想到了。您所要做的就是确保按钮下拉组的外部 div与其兄弟（文本输入和任何其他按钮）具有相同的显示属性（在我的情况下为`inline-block`）和相同的垂直对齐方式（在我的情况下为 ） `middle`.

# java - XStream NoClassDefFoundError

> ID：10956358
> 
> 赞同：3
> 
> 时间：2012-06-08T21:42:15.103
> 
> 标签：java, android, xstream

在这一天的大部分时间里，我一直在用头撞墙。我将 xstream-1.4.2 添加到 java 构建路径并从我的代码中调用它没有问题：

```
XStream yyz = new XStream();
String str_xml = yyz.toXML(ld_data); 
```

一切都会编译，但是当执行到达上面的第一行（XStream 实例化）时，我在下面的堆栈跟踪中看到了错误。在我看来，该错误表明它找不到 XStream 对象，但它确实是智能感知和编译是 gtg。我在 Eclipse 中添加外部文件的步骤是：

右键单击项目>构建路径>配置构建路径。

在右侧的左侧 Java Build Path 中选择 Libraries 选项卡。

在右键单击 Add External jar's 然后浏览到 XStream 文件并添加它。点击确定并遇到错误？？

致命异常：主要 java.lang.NoClassDefFoundError: com.thoughtworks.xstream.XStream 在 org.gpgvm.ironmike.IcyArmActivity.onOptionsItemSelected (IcyArmActivity.java:166) 在 android.app.Activity.onMenuItemSelected(Activity.java:2205) 在com.android.internal.policy.impl.PhoneWindow.onMenuItemSelected (PhoneWindow.java:748) 在 com.android.internal.view.menu.MenuItemImpl.invoke (MenuItemImpl.java:143) 在 com.android.internal.view。 menu.MenuBuilder.performItemAction (MenuBuilder.java:855) 在 com.android.internal.view.menu.IconMenuView.invokeItem (IconMenuView.java:532) 在 com.android.internal.view.menu.IconMenuItemView.performClick (IconMenuItemView. java:122) 在 android.os.Handler.handleCallback(Handler.java:587) 在 android.os.Handler.dispatchMessage(Handler.run) 的 android.view.View$PerformClick.run(View.java:9080)java:92) 在 android.os.Looper.loop(Looper.java:123) 在 android.app.ActivityThread.main(ActivityThread.java:3683) 在 java.lang.reflect.Method.invokeNative(Native Method) 在 java .lang.reflect.Method.invoke(Method.java:507) 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run (ZygoteInit.java:839) 在 com.android.internal.os.ZygoteInit.main(ZygoteInit .java:597) 在 dalvik.system.NativeStart.main(Native Method)NativeStart.main（本机方法）NativeStart.main（本机方法）

* * *

引起：java.lang.ClassNotFoundException：com.thoughtworks.xstream.XStream

* * *

在加载器 dalvik.system.PathClassLoader[/data/app/org.gpgvm.ironmike-2.apk] 在 dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240) 在 java.lang.ClassLoader.loadClass(ClassLoader.java :551) 在 java.lang.ClassLoader.loadClass(ClassLoader.java:511) ... 17 更多

关于我缺少什么的任何想法？JB

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T00:11:27.580

在这里找到了答案。那里有很多不完整和不好的信息，但这篇文章是完整的。

[将库/JAR 添加到 Eclipse Android 项目](https://stackoverflow.com/questions/3642928/adding-a-library-jar-to-an-eclipse-android-project)

# c++ - 当前时间 = UTC +/-（UTC +/- 区域中的当前时间）

> ID：10956364
> 
> 赞同：0
> 
> 时间：2012-06-08T21:42:51.963
> 
> 标签：c++, timezone, strftime

我正在解决一个问题，以防止使用其首字母缩写词指定时区，而是使用 4 位偏移格式来表示。（UTC-6 代表 CST）。这怎么能用 strftime(parameters) 来表示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T22:34:51.733

`UTC%z`非常接近您的要求。例如，这给了我“UTC-0600”。我不认为你可以用 strftime 做得更好，但你总是可以修改`%z`自己的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-24T15:06:02.033

我建议直接使用`%z`并忘记“UTC-6”格式。这种格式不适合具有亚小时偏移的时区。例如，您将如何表示 4:30 的偏移量？如果您可以使用已经存在的标准格式，最好不要发明另一种偏移格式。

# javascript - Slidedown div未出现在表单提交上

> ID：10956376
> 
> 赞同：1
> 
> 时间：2012-06-08T21:43:36.963
> 
> 标签：javascript, jquery, html, css

当用户从用户单击提交的表单中选择他们的选项时，我想在 div 中输出值，但 div 最初是隐藏的，如果满足某些条件，则在提交时会向下滑动。下面是我的代码，因此您可以看到我的设置和我尝试过的内容。

我有一个表格：

```
<form id="toBeTranslatedForm" action="fun-translator.php" method="POST" >
      <textarea id="toBeTranslatedTextArea"></textarea>
      <select id="translationOptions"></select>
      <input type="submit" value="Translate" />
</form> 
```

我在该表单下方有一个 div：

```
<div id="translatedArea">
       <h2>Translated Text</h2>
       <div id="translatedText"></div>
</div> 
```

我的 javascript 是：

```
var __submitted = false;

function populateTranslationOptions() {
    var translationOptions = ["Egyptian Hieroglyphs",
                             "Al Bhed (Final Fantasy X)", 
                             "Futurama"];

    $.each(translationOptions, function(index, value) {
        $("#translationOptions")
            .append($("<option></option>")
                    .attr("value", value)
                    .text(value));
    });
}

function getFormValues()
{
    $('#toBeTranslatedForm').submit(function() {
        __submitted = true;
        var textAreaValue = $('#toBeTranslatedTextArea').val();
        var selectValue = $('#translationOptions').val();
        outputTranslated();
    });
}

function outputTranslated()
{
    $('#translatedArea').slideDown();
}

$(document).ready(function() {
    populateTranslationOptions();
    getFormValues();
    //outputTranslated();
}); 
```

要在提交时显示的 div 的 css 是：

```
#translatedArea
{
    display: none;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T22:14:42.287

不确定您打算如何处理翻译部分，但只是添加 `return false;` 到末尾：

```
 function getFormValues()
    {
         $('#toBeTranslatedForm').submit(function() {
        __submitted = true;
        var textAreaValue = $('#toBeTranslatedTextArea').val();
        var selectValue = $('#translationOptions').val();
       outputTranslated();
        return false;
    });
 } 
```

似乎有效 - 我把它放在 jsfiddle 中，这是我所做的唯一修改。我注意到它`translatedArea`已经在向下滑动，但是在你看到它工作之前页面就变成了 404。

# git - GIT 基础项目代码

> ID：10956377
> 
> 赞同：0
> 
> 时间：2012-06-08T21:43:39.767
> 
> 标签：git, extjs, frameworks, base

我刚刚为我的大部分项目开发了一个 ExtJS 基础框架。

我现在遇到的问题是我不知道如何使用 GIT，如何集中框架代码以便每个项目都可以共享该代码。

我想要的是所有特定项目都可以反映对框架基础代码所做的更改。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T06:19:06.583

您可以使框架成为自己的存储库，然后让其他项目存储库将框架存储库添加为子模块。Git 子模块允许将 Git 存储库嵌套在其他 Git 存储库中。

这个系统有很多优点。首先，框架作为自己的存储库保留，这意味着它可以作为子模块添加到您想要的任意数量的其他项目存储库中。其次，作为自己的存储库，它可以单独更新和版本化，使框架与使用它的项目分开。

这里有关于 Git 子模块的更多信息：http: [//git-scm.com/book/en/Git-Tools-Submodules](http://git-scm.com/book/en/Git-Tools-Submodules)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T06:37:51.313

根据您的问题，我不确定您的项目是否*使用*（未修改）该框架（即您的项目依赖于该框架并将其用作库）或该框架是否用作您的项目的*基础*（即您的所有项目具有相同的结构，并且您想重用它）。

如果是第一个（框架是库），请参阅[ilollars answer](https://stackoverflow.com/a/10958894/1347968)。

如果是第二个（框架是基础结构），您可以执行以下操作：将您的框架放在（中央）存储库中。当您开始一个新项目时，克隆您的框架存储库。您现在可以在这个新存储库中自由地做项目特定的事情。当您需要更改框架时，首先在您的框架存储库中执行此操作，然后将此更改合并到每个项目存储库。这里有一个例子：

```
cd framework
git init
# do your framework development
git add .
git commit 
```

现在你有了你的第一个框架版本。然后从框架当前版本开始你的第一个项目：

```
cd ..
git clone framework project1
cd project1
# do work on your project
git commit 
```

现在您需要更改框架中的某些内容：

```
cd ../framework
# do the changes
git commit 
```

要将您的项目更新到新的框架版本：

```
cd ../project1
git pull 
```

您现在拥有当前的框架版本，其中包含项目特定的更改 :-)

# wordpress - wordpress 中的另一个数据库连接

> ID：10956378
> 
> 赞同：2
> 
> 时间：2012-06-08T21:43:44.833
> 
> 标签：wordpress

所以我的主题布局的一部分需要查询一个数据库，而不是为 wordpress 制作的数据库。我想我会像往常一样查询其他数据库。我写了一个快速函数来处理它：

```
function my_function() {
  $con = mysql_connect("localhost", "user", "password");
  mysql_select_db("database", $con);
  $result = mysql_query("my query");
  mysql_close($con);
  $all = array();

  while ($all[] = mysql_fetch_assoc($result)) {}
  return $all;
} 
```

我在标题中引用了该函数，并意识到它破坏了我侧边栏中的类别。这是怎么回事？我关闭了我认为的连接。我究竟做错了什么？我得到的类别错误是这样的：

警告：mysql_error(): 14 不是第 1098 行 /blog/wp-includes/wp-db.php 中的有效 MySQL-Link 资源

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-08T23:23:28.140

您的自定义数据库与 wordpress 数据库在同一个 mysql 上吗？然后你仍然可以使用 $wpdb 对象：

```
global $wpdb;
$wpdb->get_results( "SELECT * FROM brian_db.brian_table" ); 
```

即使你不能这样做，为了保持一致性，我仍然建议使用 Wordpress 数据库类，你可以在该函数中建立一个新连接：

```
$wpdb_b = new wpdb( "user", "password", "brian_db", "localhost" );
$wpdb_b->get_results( "SELECT * FROM brian_table" ); 
```

**更新：更正了“全球”**

# c# - 临时数据包装器

> ID：10956380
> 
> 赞同：5
> 
> 时间：2012-06-08T21:43:59.957
> 
> 标签：c#, .net, asp.net-mvc-3, tempdata

因为我一遍又一遍地为 TempData 使用相同的键，所以我想让跟踪这些键更容易。如果最终我能写出这样的东西，那就太好了：

```
MyTempData.Message = "my message"; 
```

代替

```
TempData["Message"] = "my message"; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T21:48:32.583

听起来你想要一个强类型的 TempData。一种方法是在 Controller 上编写一个扩展方法来做到这一点：

```
public static class ControllerExtensions
{
  public string GetMessage(this Controller instance)
  {
    string result = instance.TempData["Message"] as string;
    if (result == null)
    {
      result = "some default value or throw null argument exception";  
    }
    return result;
  }

  public void SetMessage(this Controller instance, string value)
  {
    instance.TempData["Message"] = value;
  }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-09T07:53:08.033

技术含量很低的选项，但是如果您只想跟踪正在使用的键，则可以创建一些常量：

```
public static class TempDataKeys
{
    public const string Message = "Message";
    public const string Warning = "Warning";
    public const string Error = "Error";
    // etc
} 
```

然后：

```
TempData[TempDataKeys.Message] = "Some message"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T06:12:09.767

很难说您希望临时数据保留在什么级别。我的解释是，听起来您希望能够在所有 ViewModel 上拥有一组共享的属性。

为此，请从通用 ViewModel 类继承。

```
public class BaseViewModel
{
   public string Message{get;set;}
}

public class MyModel : BaseViewModel
{
   public string MyUniquePropety{get;set;}
} 
```

如果事实证明您希望数据在会话中持久存在，那么实现一个单例，并记住在您的视图中添加一个 @using 语句以引用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-09T07:00:40.880

你可以模仿什么`ViewBag`。

首先，它使用一个名为`DynamicViewDataDictionary`. 基本上，我只是要为 TempData 制作一个版本。然后，我们可以使用扩展方法使其在`Controller`,`WebViewPage`等中可用。

```
public sealed class DynamicTempDataDictionary : DynamicObject
{
    private readonly Func<TempDataDictionary> _tempDataThunk;

    public DynamicTempDataDictionary(Func<TempDataDictionary> viewDataThunk)
    {
        _tempDataThunk = viewDataThunk;
    }

    private TempDataDictionary ViewData
    {
        get { return _tempDataThunk(); }
    }

    public override IEnumerable<string> GetDynamicMemberNames()
    {
        return ViewData.Keys;
    }

    public override bool TryGetMember(GetMemberBinder binder, out object result)
    {
        result = ViewData[binder.Name];
        return true;
    }

    public override bool TrySetMember(SetMemberBinder binder, object value)
    {
        ViewData[binder.Name] = value;
        return true;
    }
}

public static class TempBagExtensions
{
    private const string TempBagKey = "__CurrentTempBagDictionary";

    public static dynamic TempBag(this ControllerBase controller)
    {
        return GetCurrentDictionary(controller.ControllerContext);
    }

    public static dynamic TempBag(this WebViewPage viewPage)
    {
        return GetCurrentDictionary(viewPage.ViewContext.Controller.ControllerContext);
    }

    private static DynamicTempDataDictionary GetCurrentDictionary(ControllerContext context)
    {
        var dictionary = context.HttpContext.Items[TempBagKey] as DynamicTempDataDictionary;

        if (dictionary == null)
        {
            dictionary = new DynamicTempDataDictionary(() => context.Controller.TempData);
            context.HttpContext.Items[TempBagKey] = dictionary;
        }

        return dictionary;
    }
} 
```

在您的控制器中：

```
this.TempBag().SomeValue = "Test"; 
```

在你的剃刀视图中：

```
@this.TempBag().SomeValue 
```

如果您认为扩展方法不够简洁，您可以创建自己的 Controller 基类，以及使用简洁明了的属性 ala 的剃刀视图的基类`ViewBag`。

# c++ - STL 正确生成和删除项目

> ID：10956382
> 
> 赞同：0
> 
> 时间：2012-06-08T21:44:36.200
> 
> 标签：c++, list, stl, lambda, bind

1.  我想知道，如果用这个概念正确删除了用“new”生成的对象。
2.  我没有使用“bind”而不是“bind2nd”。我该怎么做呢？
3.  最后一个问题：我如何使用 lambda 项而不是命名函数来做同样的事情？

为什么我使用列表？我决定使用列表而不是向量，因为我的对象没有排序。最后，我想为面向对象带来一些“瀑布式”代码，主要是因为性能问题（你会在[这里](http://sqar.net/blog/wordpress-3.2.1/wordpress/brentsqar/)看到问题），所以我需要一个概念，我可以快速访问容器层次结构中的对象和让他们互相交流，也很快。也许想想模块化合成器。

```
class Layer {
    private:
    string name;
    bool active;
    public:
    Layer();
    Layer(string m_name, bool m_active);
    bool isName(string m_name);
};

// ... constructors

bool Layer::isName(string m_name) {
return name == m_name;
}

class Stack {
    public:
    list<Layer*> layer;
    list<Layer*>::iterator iter;
};

int main() {
Stack stack;
stack.layer.push_back(new Layer);
stack.layer.push_back(new Layer("snail", true));
stack.layer.push_back(new Layer("squirrel", false));

string search = "snail";
stack.layer.remove_if(bind2nd(mem_fun(&Layer::isName), search));

return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-08T21:57:16.480

不，您没有正确管理内存。除非您需要这样做，否则我会从代码中删除大部分（如果不是全部）指针：

```
class Stack {
    public:
    list<Layer> layer;
    list<Layer>::iterator iter;
}; 
```

然后内存管理变得非常自动化：

```
Stack stack;
stack.layer.push_back(Layer("snail", true));
stack.layer.push_back(Layer("squirrel", false)); 
```

如果你有一个足够新的编译器，你可能想要替换`push_back`为`emplace_back`。

对于这样的事情，一个 lambda 几乎肯定比`std::bind`：

```
stack.layer.remove_if([](Layer const &s) { return s.isName(search); } 
```

顺便说一句，您可能还想更改`isName`为引用 const 字符串而不是字符串（保存每次调用都复制字符串）。

从您所展示的内容来看，我也会考虑使用`std::map`而不是`std:list`. 它将更直接地支持查找（一方面）。

编辑：我应该提到的另一点是，在这种情况下，您几乎可以肯定会一直使用一个字段作为“键”（在这种情况下是名称），您可能想要重载`operator<`, `operator==`,等，在该关键领域工作：

```
class Layer { 
    // ...
    bool operator<(Layer const &other) { return name < other.name; }
    bool operator==(Layer const &other) { return name == other.name; }
}; 
```

有了这个，排序，删除等操作变得更加简单。上面的变成了：

```
 stack.layer.remove(search); 
```

# jquery - css / jQuery覆盖div在多个li ie7上

> ID：10956384
> 
> 赞同：1
> 
> 时间：2012-06-08T21:44:49.903
> 
> 标签：jquery, css

这是代码：http: [//jsfiddle.net/pfaUZ/5/](http://jsfiddle.net/pfaUZ/5/)

当我单击 li 时，pop div 显示完全覆盖两个 li（例如：li 宽度 100px，pop 宽度 200px；）但是如果你在 ie7 中测试它不起作用：

看：![在此处输入图像描述](../Images/1f70dfde5429d60cb34cddea27d73153.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T22:59:46.620

**见：http:** [//jsfiddle.net/thirtydot/pfaUZ/11/](http://jsfiddle.net/thirtydot/pfaUZ/11/)

您可以通过确保只有“活动”具有以下内容来修复[此 IE7 错误](https://stackoverflow.com/questions/6229184/ie7-z-index-issue-context-menu/6229309#6229309)：`li``position: relative`

```
$('li').click(function() {
    $('.pop').hide();
    $(this).find('.pop').show();

    $('li').css('position', 'static');
    $(this).css('position', 'relative');
}); 
```

我也改成[`.hide()`](http://api.jquery.com/hide/)and [`.show()`](http://api.jquery.com/show/)。这些方法等同于您使用的方法。

*可能*有一个纯 CSS 修复，这会更可取，但我找不到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T22:22:47.433

试试这样

```
$('li').click(function() {
    $(this).addClass('active').siblings().removeClass('active');
}); 
```

并使用活动 css 而不是使用 2 个元素。在这里预览：http: [//jsfiddle.net/acrashik/pfaUZ/9/](http://jsfiddle.net/acrashik/pfaUZ/9/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T10:35:07.547

在您的`.pop`班级中，只需将宽度设置为 100，即可解决问题：

```
.pop {
    display: none;
    position: absolute;
    left: 0;
    top: 0;
    height: 100px;
    width: 100px; /* <-- this one */
    background: #333;
    z-index: 9999;
} 
```

# azure - Windows azure：在子文件夹中安装 wordpress

> ID：10956385
> 
> 赞同：1
> 
> 时间：2012-06-08T21:44:59.803
> 
> 标签：azure, azure-web-app-service

我正在使用昨天发布的新 Windows Azure，我想在同一网站[http://testwebsite.azurewebsites.net/blog/下创建一个 Umbraco 网站](http://testwebsite.azurewebsites.net/blog/)[http://testwebsite.azurewebsites.net和一个 wordpress 博客/](http://testwebsite.azurewebsites.net)

但是现在当我创建它时，我只能为新网站做。

当前的网站实施是否可行？还是我必须做一些手动更改？

也许我可以更改一些 CNAME 记录...我需要一些简单的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T02:59:45.957

如果您将使用 Gallery 来创建 Widows Azure 网站，那么您将可以选择将一种包与一个网站一起使用。您无法直接从基于门户的图库中将两个软件包混合在一个网站中。所以你所看到的经验是值得期待的。要回答您的问题，不可能直接从门户网站/将两个图库包设置到一个网站

此外，对于 Windows Azure 网站（共享），您不能设置 CNAME 记录。使用 CNAME 记录的设置仅适用于 Windows Azure 网站（保留）。

最后。我希望您知道 Umbraco 是基于 ASP.NET 的，而 Wordpress 是基于 PHP 的网站包。那么，您确定要将基于 PHP 的 CMS 站点与基于 ASP.NET 的 CMS 结合起来吗？

# node.js - node.js 控制台有多宽？

> ID：10956386
> 
> 赞同：25
> 
> 时间：2012-06-08T21:45:01.803
> 
> 标签：node.js, console

在 node.js 中，如何获取控制台窗口和/或缓冲区的当前宽度？

.net 中的模拟是[Console.BufferWidth](http://msdn.microsoft.com/en-us/library/system.console.bufferwidth.aspx)和/或[Console.WindowWidth](http://msdn.microsoft.com/en-us/library/system.console.windowwidth.aspx)。

我想对换行进行更多控制。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-04-06T19:04:03.200

看起来目前最好的方法是这个属性：

```
process.stdout.columns 
```

对于高度（行）：

```
process.stdout.rows 
```

另请注意，有一个“调整大小”事件，它可能会派上用场：

```
process.stdout.on('resize', function() {
  console.log('screen size has changed!');
  console.log(process.stdout.columns + 'x' + process.stdout.rows);
}); 
```

此处的文档： [http ://nodejs.org/api/tty.html#tty_tty](http://nodejs.org/api/tty.html#tty_tty)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-06-08T22:05:59.120

```
if (process.stdout.isTTY) {
  console.log("The console size is:", process.stdout.getWindowSize());
} else {
  console.log("stdout is not a console");
} 
```

# c++-cli - 在 Dropbox API 中指定搜索查询

> ID：10956389
> 
> 赞同：0
> 
> 时间：2012-06-08T21:45:20.930
> 
> 标签：c++-cli, dropbox-api, spring-social

我已经成功设置了一个保管箱 API（使用 Spring.Social.DropBox），并且正在尝试以编程方式搜索我的保管箱文件夹。如何指定可以返回多种文件类型的查询？

```
DropboxServiceProvider ^dropboxServiceProvider = gcnew Spring::Social::Dropbox::Connect::DropboxServiceProvider(appKey, appSecret, Spring::Social::Dropbox::Api::AccessLevel::AppFolder);
IDropbox ^dropboxApi = dropboxServiceProvider->GetApi(myAccessToken, myAccessSecret);

System::String ^pth = "TestFolder";
System::String ^qry = ".txt";
System::Collections::Generic::IList<Spring::Social::Dropbox::Api::Entry^> ^results = dropboxApi->Search(pth, qry); 
```

当查询仅指定一种文件类型（.txt、.png）时，上述代码有效。但是如何构造一个查询来检索多种文件类型呢？我试过了

```
System::String ^qry = ".txt;.png";
System::String ^qry = ".{txt|png}";
System::String ^qry = ".txt?.png"; 
```

知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T17:02:43.690

Dropbox API 目前不支持正则表达式查询或任何类型的布尔运算符，因此目前无法实现。您可以通过单独搜索相应的名称或类型来获取具有给定名称的任何类型的所有文件，或给定类型的所有文件，但您不能在一次调用中搜索多个值。（一种解决方法可能是进行相关调用并将结果组合在一起。）

# c++ - gcc 预处理器：我可以只解析#if[def]s，而不影响其他指令吗？

> ID：10956393
> 
> 赞同：4
> 
> 时间：2012-06-08T21:45:51.403
> 
> 标签：c++, c, gcc

我正在对一些由大量#ifs 和#ifdefs 配置的旧代码进行逆向工程。我目前正在通过在编辑器中进行替换来查看各种配置。这既乏味又（我怀疑）容易出错。

是否有一些 gcc 预处理器选项可以预处理 #if[def]s 但保持其他预处理器指令（例如 #define）不变？这仅用于逆向工程；我不需要编译或以其他方式使用预处理代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T21:52:13.280

我不知道 gcc 的预处理器中有任何此类功能。并且取决于你想要做什么，它甚至可能是不可能的。如果`#ifdef`指令引用了指令先前定义（或未定义）的宏`#define`，而您忽略了`#define`指令，那么这显然行不通。

但是[unifdef](http://freecode.com/projects/unifdef)命令很可能就是您要找的。我刚刚将它安装在我的 Ubuntu 系统上`sudo apt-get install unifdef`；应该有类似的方法将其安装在其他系统上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T21:50:01.787

如果不需要编译，可以使用 IDE 理解 ifdefs 的能力。在 Eclipse 中，前往*Project > Preferences > C/C++ Build > Paths and Symbols*，然后定义所需的符号。然后，Eclipse 将忽略任何未定义符号的 ifdef。

# php - 调用 strstr 函数时参数计数错误

> ID：10956395
> 
> 赞同：2
> 
> 时间：2012-06-08T21:46:24.087
> 
> 标签：php

我正进入（状态

```
Severity: Warning

Message: Wrong parameter count for strstr() 
```

对于以下代码

```
$ext = strrev(strstr(strrev($file), ".", TRUE)); 
```

我该怎么办？

**更新**

代替`$ext = strrev(strstr(strrev($file), ".", TRUE));`

我用过这个。

```
$ext = strrev(substr(strrev($file)), 0 ,strpos(strrev($file), ":")); 
```

仍然得到相同的错误`substr`和`strrev`

这有点奇怪。和版本问题有关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T21:47:51.947

根据[文档](http://us3.php.net/strstr)，您需要更新 PHP 版本`>= 5.3.0`以获取`[, bool $before_needle = false ]`参数。它被添加到`5.3.0`.

如果您只是想获取文件的扩展名，则应使用`pathinfo`，如下所示：

```
$ext = pathinfo( $file, PATHINFO_EXTENSION); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T21:48:58.370

[http://php.net/manual/en/function.strstr.php](http://php.net/manual/en/function.strstr.php)

```
$user = strstr($email, '@', true); // As of PHP 5.3.0 
```

检查您的 php 版本。'before_needle' 参数仅在 php 版本 5.3.0 中添加

也许您需要升级或者您将不得不删除该参数。

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T22:16:20.523

正如其他人所指出的，strstr 的第三个参数只出现在 PHP 5.3.0 中。也许你想做的只是

```
$ext = substr($file, strrpos($file, '.') + 1); 
```

或更好

```
$dotpos = strrpos($file, '.');
if ($dotpos === false) {
   $ext = ''; // or other special handling like, e.g., $ext = false;
} else {
   $ext = substr($file, $dotpos + 1);
} 
```

这将让您分别处理丢失和尾随点的情况（`pathinfo()`在两种情况下都返回一个空字符串），并且还避免了所有中间字符串（只是为了不浪费 CPU 时间）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-06T14:21:34.057

**试试这个简单的功能：**

```
<?php

function my_strstr($haystack, $needle, $before_needle = false)
{
    $output        = false;
    $before_needle = $before_needle === true ? true : false;
    if (is_string($haystack) && is_string($needle) && is_bool($before_needle)) {
        switch ($before_needle) {
            case true:
                $output = substr($haystack, 0, strpos($haystack, $needle));
                break;
            case false:
                $output = strstr($haystack, $needle);
                break;
        }
    }
    return $output;
} 
```

# c# - GetDirectoryName(@"C:\") 返回 null - 为什么？

> ID：10956398
> 
> 赞同：1
> 
> 时间：2012-06-08T21:46:36.123
> 
> 标签：c#, .net

> **可能重复：**
> [为什么 GetDirectoryName 为 C:\ 返回 null？](https://stackoverflow.com/questions/1672236/why-does-getdirectoryname-return-null-for-c)

逐步完成并注意“文件夹”将为空。核心库中是否有我可以使用/添加的内容来确保我可以“获取”C:\ 作为目录，以便以后可以将其与另一个目录结合使用？这很重要，因为它“C:\”是我试图满足的要求的有效数据

使用 System.IO；

```
 string folder = @"C:\";
    folder = Path.GetDirectoryName(folder);
    string folder2 = Path.Combine(folder, "IWantToCombineThisFolderButIGetException"); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-08T21:49:08.373

从[文档](http://msdn.microsoft.com/en-us/library/system.io.path.getdirectoryname.aspx)：

> 返回值
> 
> 类型：System.String
> 
> path 的目录信息，如果 path 表示根目录或为 null，则为 null。

如果您需要它不为空，只需将返回值强制为您想要的值，例如`\`：

```
folder = Path.GetDirectoryName(folder) ?? "\\"; 
```

# php - 在地图上填充颜色 - PHP

> ID：10956401
> 
> 赞同：0
> 
> 时间：2012-06-08T21:47:22.090
> 
> 标签：php, mysql

我正在尝试确定如何在地图上填充颜色 - 例如“风险”棋盘游戏地图。

我之前使用 HTML 表完成了此操作，方法是从 SQL 表中提取 HTML 颜色代码，然后使用它来填充单元格我想要的颜色。

但是对于非方形地图，我不确定在哪里看。

我创建了一个非常简单的两色地图 - 它的白色和黑色边框。我想要的结果是根据 sql 表中的数据（就像 Paint 中的“填充”按钮），在地图上用颜色着色“区域”。

这看起来像我需要的：http: [//php.net/manual/en/function.imagefilltoborder.php](http://php.net/manual/en/function.imagefilltoborder.php) 现在..如何定义边界...

目前我什么都没尝试，因为问题是：我如何让 PHP 填充图像的一部分？我曾尝试在 Paint 中制作图像，然后挠头想知道如何填充其中的一部分。

偶然发现了一个链接，让我更加关注这一点：

看来，使用 imagefilltoborder，我可以将图像放在我的服务器上，也许是一个看起来像 RISK 地图的黑白版本的图像 - 黑色边框和白色其他所有内容。一些问题：

1.  'border' 变量应该使用我的边框颜色（无论黑色是什么值）是否正确，以便代码可以“看到”边框在哪里？
2.  我只需要弄清楚 X，Y 坐标就可以开始填充，这是否正确？
3.  如果我在地图上有 10 个不同的地点要填写，这是否可行？我可以使用代码中的不同颜色或从 SQL 中提取不同的颜色来为这 10 个点分配不同的颜色，并使用 10 个不同的 X、Y 坐标来获取它们吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T22:36:18.767

您可以尝试使用 HTML 地图数组，例如 HTML 代码示例：

```
<img src ="germany.gif" width="145" height="126" alt="germany" usemap ="#germany" />
<map name="germany">
  <area shape="circle" coords="124,58,8" href="venus.htm" alt="Venus" />
</map> 
```

如果您使用的是 PHP 代码，您是否正在尝试使用多边形？[http://www.php.net/manual/en/function.imagefilledpolygon.php](http://www.php.net/manual/en/function.imagefilledpolygon.php)

# java - 在运行期间使用 JAXB 为 X3D 格式编写 XML

> ID：10956403
> 
> 赞同：0
> 
> 时间：2012-06-08T21:47:28.533
> 
> 标签：java, xml, jaxb, x3d

我有一个 2D 模拟，他们希望将 X3D 添加到其中，方法是保存它然后加载到查看器中进行演示。从模拟的角度来看，我拥有所需的一切（即布局、对象等）。我现在需要做的是输出兼容 X3D 的 XML，可以将其加载到 FreeWRL 之类的东西中并查看。我过去使用过 JAXB，但仅用于简单的标签。X3D 有复杂的标签，标签本身和标签之间都有字符串。有没有人有任何示例/教程/课程/等，他们可以指出我，这将帮助我正确获取 XML 编写器部分，以便我可以专注于确保我们在 3D 世界中可视化所有 2D 模拟组件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T21:58:20.327

您可以使用 .xsd 模式来生成映射到该模式的 java 类。从那里生成java对象并让jaxb序列化它们是一个问题。 [http://www.javaworld.com/javaworld/jw-06-2006/jw-0626-jaxb.html](http://www.javaworld.com/javaworld/jw-06-2006/jw-0626-jaxb.html)

# java - 使用 JavaCompiler 编译目录

> ID：10956404
> 
> 赞同：0
> 
> 时间：2012-06-08T21:47:36.070
> 
> 标签：java, file, java-compiler-api

我有以下哪些代码用于使用 JavaCompiler 编译单个文件：

```
JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();
DiagnosticCollector<JavaFileObject> diagnostics = new DiagnosticCollector<JavaFileObject>();
StandardJavaFileManager fileManager = compiler.getStandardFileManager(diagnostics, null, null);
Iterable<? extends JavaFileObject> compilationUnits = fileManager.getJavaFileObjectsFromStrings(Arrays.asList(file.getAbsolutePath()));
JavaCompiler.CompilationTask task = compiler.getTask(null, fileManager, diagnostics, null, null, compilationUnits);
boolean success = task.call();
fileManager.close(); 
```

我的问题是：如何更改它以编译特定目录中的所有源文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T21:56:53.920

Get all the files from the directory (using [directory.listFiles()](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#listFiles%28%29)), and pass the resulting array to [getJavaFileObject(File...)](http://docs.oracle.com/javase/6/docs/api/javax/tools/StandardJavaFileManager.html#getJavaFileObjects%28java.io.File...%29)

# windows - 在 Windows 中显示内存中 MHTML 的 ActiveX 组件

> ID：10956405
> 
> 赞同：3
> 
> 时间：2012-06-08T21:47:41.007
> 
> 标签：windows, winapi, activex, mhtml

我正在创建一个小型 Windows 应用程序（C++），它创建一些窗口（[CreateWindowEx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632680%28v=vs.85%29.aspx)等）。在一个窗口中，我想添加一个显示从内存加载的[MHTML](http://en.wikipedia.org/wiki/Mhtml)的控件，即整个 MHTML 内容在一个字符串中，而不是在一个文件中。

我已经尝试过该`Shell.Explorer`组件，但是除了 HTML 之外，我找不到向它注入任何内容的方法（请参阅[AtlAxCreateControl](http://msdn.microsoft.com/en-us/library/da181h29.aspx)）。

是否可以使用 Shell.Explorer 组件或任何其他组件来显示内存中的 MHTML？
也就是说，无需将内容写入文件然后给出文件路径。那行得通，但它不是最佳选择，如果我不能以任何其他方式做到这一点，它必须是最后的选择。

PS：如果这可以在 C#、JS、VBS、WSH、HTA 等其他语言或环境中完成，我也很乐意。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-11-03T06:31:05.897

回答有点晚了，但仍然 - 有一种方法可以做到：使用 Microsoft 的 WebBrowser 控件（COM 组件，也可以在 .Net 应用程序中使用）。

看看这里提出的解决方案是什么 -[如何将 mht 从流/字符串加载到 WebBrowser 控件中？](https://stackoverflow.com/questions/4705139/how-to-load-mht-from-stream-string-into-a-webbrowser-control)在这里 -[如何将字符串 html 内容显示到 webbrowser 控件中？](https://stackoverflow.com/questions/5362591/how-to-display-the-string-html-contents-into-webbrowser-control). 其中一些引用了 mhtml 内容，但这些解决方案也适用于普通的 html 文件。

祝你好运。

# linq - 如何将 LINQ nvarchar 转换为双精度

> ID：10956411
> 
> 赞同：0
> 
> 时间：2012-06-08T21:48:10.743
> 
> 标签：linq, linq-to-sql

我正在尝试对列进行排序，但该值在数据库中存储为 nvarchar，如何将其转换为双精度以便在此处排序？我试图做 Convert.ToDouble(t.PressureChange)，但它没有用......

```
 if (column == "PressureChange")
    {
        if (sortDirection == "ascending")
            testResults = testResults.OrderBy(t => t.PressureChange);
        else
            testResults = testResults.OrderByDescending(t => t.PressureChange);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T21:53:42.357

你可以*试试*

```
if (column == "PressureChange")
{
    if (sortDirection == "ascending")
    {
        testResults = testResults.OrderBy(t => double.Parse(t.PressureChange));
    }
    else
    {
        testResults = testResults.OrderByDescending
            (t => double.Parse(t.PressureChange));
    }
} 
```

...但这取决于 LINQ to SQL 是否支持该方法。老实说，您的设计听起来好像遇到了更大的问题：如果您试图`double`在数据库中存储一个值，那么您不应该从使用`varchar`字段开始。如果可能，请修复您的架构。

编辑：请注意，根据[此页面上有关 LINQ to SQL 的信息，`Convert.*`](http://msdn.microsoft.com/en-us/library/bb882655.aspx)它看起来`Convert.ToDouble` *应该可以*工作，因此请向我们提供有关您尝试它时发生的情况的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T21:55:49.957

Rather use TryParse to avoid exceptions. In this code I used 0.0 as a default value if it could not parse the string.

```
double temp = 0.0;
if (column == "PressureChange")
{
    if (sortDirection == "ascending")
        testResults = testResults.OrderBy(t => (double.TryParse(t.PressureChange.toString(), out temp) ? temp : 0.0)).ToList();
    else
        testResults = testResults.OrderByDescending(t => (double.TryParse(t.PressureChange.toString(), out temp) ? temp : 0.0)).ToList();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T22:11:52.630

我还没有测试过，但你可以使用这样的扩展方法：

```
public class StringRealComparer : IComparer<string>
{
 public int Compare(string s1, string s2)
 {
  double d1;
  double d2;
  double.tryParse(s1, out d1);
  double.TryParse(s2, out d2);
  return double.Compare(d1, d2);
 }
} 
```

# linux - 在期望脚本中检查和修改变量的格式

> ID：10956415
> 
> 赞同：1
> 
> 时间：2012-06-08T21:48:34.020
> 
> 标签：linux, tcl, expect

我正在尝试验证变量的格式是否为数字，并且在期望脚本中至少有 10 位数字，前导零。

在 bash 脚本中，它看起来像这样：

```
[[ "$var" != +([0-9]) ]] && echo "bad input" && exit
while [[ $(echo -n ${var} | wc -c) -lt 10 ]] ; do var="0${var}" ; done 
```

对于以下输入：

> 16

我正在尝试实现以下输出：

> 0000000016

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T22:20:31.790

检查变量是否只有数字的最简单方法是使用正则表达式。Expect 的正则表达式完全可以胜任：

```
if {![regexp {^\d+$} $var]} {
    puts "bad input"
    exit
} 
```

最好通过格式化值来填充零；如果您知道 C's `printf()`，您将识别格式：

```
set var [format "%010d" $var] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T22:18:06.453

Expect 实际上只是 TCL 的一个扩展，因此您可以使用 TCL 提供的任何工具。TCL 是一门不寻常的语言，但做你想做的并不难。

```
# Set a test string.
set testvar 1234567890

# Store the match (if any) in matchvar.
regexp {\d{10,}} $testvar matchvar
puts $matchvar

# Test that matchvar holds an integer.
string is integer $matchvar 
```

[string is](http://tmml.sourceforge.net/doc/tcl/string.html) command 相对较新，因此如果您的 TCL 解释器不支持它，您可能不得不依赖 regexp 的返回值。

# java - 获取 XML 文件 JSP-Java 的网站 URL

> ID：10956418
> 
> 赞同：0
> 
> 时间：2012-06-08T21:48:46.477
> 
> 标签：java, html, xml, file, jsp

假设我已经创建了文件

```
String path = application.getRealPath("userSearchFolder");
String name = path + "/" + (String) session.getAttribute("username") + ".xml";
File file = new File(name); 
```

稍后我想将其作为链接提供，例如

```
 <a href"<%=file.toURI()%>">File</a> 
```

会发生什么是我得到目录路径而不是 url 路径 ->

```
file:/D:/Documents/NetBeansProjects/2012/GATE_Project/build/web/userSearchFolder/mjoraid.txt.xml 
```

当它到达 Firefox 时，我将鼠标悬停在链接上，我看到的是

```
file:///D:/Documents/NetBeansProjects/2012/GATE_Project/build/web/userSearchFolder/mjoraid.xml 
```

当我右键单击并选择复制链接位置并将其粘贴到 URL 中时，会打开 xml 文件，但是当我单击链接时，没有任何反应。

我怎么能得到这样的链接

```
http://localhost:8080/GATE_Project/somepage/somepage/mjoraid.xml 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T21:57:15.570

The `getRealPath` will give a **File** system path (hence "real"), as opposed to web app path. So you cannot make it a href.

The following should suffice.

```
<a href="/userSearchFolder/${userName}.xml"> 
```

*(Of course you are risking data mining for such public accessible XML files.)*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T12:08:18.660

好的，我是手动完成的，类似于我以前在 php 中的操作，创建一个包含网站主目录的变量。

```
 String searchFolderURL = "http://localhost:8080/GATE_Project/userSearchFolder/"; 
```

接着

```
 <a href="<%=searchFolderURL + file.getName()%>" target="_blank"  >See original txt File </a> 
```

谢谢顺便说一句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T22:08:06.450

您可以使用 servlet 来提供文件。

本[教程](http://www.avajava.com/tutorials/lessons/how-do-i-serve-up-a-pdf-from-a-servlet.html)展示了如何提供 pdf 文件（！）

理论是一样的：

*   您在 servlet 中加载文件
*   设置任何必需的标题
*   将数据写入响应

ContentType 应该是“application/xml”。

# haskell - 为什么不是 Haskell 中 Eq 的每种类型的一部分？

> ID：10956419
> 
> 赞同：16
> 
> 时间：2012-06-08T21:48:50.213
> 
> 标签：haskell, typeclass

或者更确切地说，为什么不能`(==)`在每种数据类型上使用？为什么我们必须推导出我们自己`Eq`？在其他语言中，例如 Python、C++，当然还有其他语言，它对所有内容都有默认实现！我想不出无法比较的类型。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-06-09T00:30:23.943

在 Python 中，默认的相等实现比较的是*标识*，而不是值。这对于用户定义的类很有用，默认情况下这些类是可变的，并且不必具有明确定义的“值”概念。`is`但即使在这种情况下，使用运算符直接比较可变对象的身份更为正常。

由于 Haskell 的不变性和共享这种“身份”的概念没有多大意义。如果您可以按身份比较两个术语，则可以确定它们是否共享，但是通常是否共享可能共享的两个术语通常取决于实现，因此此类信息不应影响程序（除非您**喜欢**在不同编译器优化策略下改变其行为的程序）。

所以 Haskell 中的平等总是*价值*平等；它告诉您两个术语是否表示相同的值（不一定它们是否具有相同的结构；如果您使用无序列表实现一个集合，那么具有不同结构的两个列表可以*表示*同一个集合）。

几乎所有的内置类型都是`Eq`已经的成员；最大的例外是函数类型。函数值相等的唯一真正明智的概念是外延相等（它们是否为每个输入返回相同的输出）。很容易说我们将使用它并让编译器访问函数定义的表示来计算它，但不幸的是，确定两个任意算法（此处以 Haskell 语法编码）是否总是产生相同的输出是一个已知的不可计算的问题；如果编译器真的能做到这一点，它就可以解决停机问题，我们就不必忍受底部值是每种类型的成员。

不幸的是，函数*不能*成为成员的事实`Eq`意味着许多其他东西也不能成为成员。可以比较整数列表是否相等，但函数列表不能，当它包含函数时，对于所有其他 conatiner-ish 类型也是如此。这也适用于您编写的 ADT，除非您可以为不依赖于所包含函数的相等性的类型定义一个合理的相等概念（也许该函数只是实现中的一种方便，以及*哪个*函数它不会影响您使用 ADT 表示的值）。

因此，有 (1) 类型已经是 的成员`Eq`，(2) 类型*不能*是 的成员`Eq`，(3) 可以`Eq`明显地成为成员的类型，(4)*可以*是成员的类型`Eq`但仅以非显而易见的方式，以及 (5) 可以以`Eq`明显方式成为成员的类型，但程序员更喜欢另一种方式。我认为 Haskell 处理这些情况的方式实际上是正确的方式。(1) 和 (2) 不需要您提供任何东西，并且 (4) 和 (5) 总是需要明确的实例声明。编译器可以为您提供更多帮助的唯一情况是 (3)，它可能会为您节省 12 个打字字符（如果您已经是`deriving`其他字符，则为 4 个字符）。

我认为这将是一个相当小的成本胜利。编译器必须*尝试*构造所有事物的实例，并假定任何失败的事物都不应该有`Eq`实例。目前，如果您想派生一个`Eq`实例并且不小心编写了一个不起作用的类型，编译器会立即告诉您存在问题。使用建议的“隐式地尽你所能”策略，在您**使用**假定实例`Eq`时，此错误将显示为无法解释的“无`Eq`实例”错误。这也意味着，如果我将类型视为表示*不存在合理等式关系的值****简单的结构相等（上面的情况（5）；还记得由无序列表表示的集合吗？），并且我忘记编写自己的`Eq`实例，那么编译器可能会自动为我生成*错误* `Eq`的实例。`Eq`当我去使用它时，我宁愿被告知“你还没有编写实例”，而不是让程序在编译器引入的错误的情况下编译和运行！***

 **** * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-06-08T21:55:43.237

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-06-10T03:25:01.087

您可能不想派生 Eq - 您可能想编写自己的实例。

例如，想象一个二叉树数据结构中的数据：

```
data Tree a = Branch (Tree a) (Tree a)
            | Leaf a 
```

您的`Leaf`s 中可以有相同的数据，但平衡不同。例如：

```
balanced = Branch (Branch (Leaf 1) 
                          (Leaf 2)) 
                  (Branch (Leaf 3) 
                          (Leaf 4))

unbalanced = Branch (Branch (Branch (Leaf 1) 
                                    (Leaf 2)) 
                            (Leaf 3)) 
                    (Leaf 4)

shuffled = Branch (Branch (Leaf 4) 
                          (Leaf 2)) 
                  (Branch (Leaf 3) 
                          (Leaf 1)) 
```

数据存储在树中的事实可能只是为了提高遍历效率，在这种情况下，您可能想说`balanced == unbalanced`. 你甚至可能想说`balanced == shuffled`。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-06-09T04:41:31.370

> 我想不出无法比较的类型。

```
let infiniteLoop = infiniteLoop

let iSolvedTheHaltingProblem f = f == infiniteLoop
-- Oops! 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-06-09T09:30:49.323

考虑以下 Python 示例：

```
>>> 2 == 2
True
>> {} == {}
True
>>> set() == set()
True
>>> [1,2,3] == [1,2,3]
True
>>> (lambda x: x) == (lambda x: x)
False 
```

错误的？o_O 如果您意识到 Python == 比较指针值，这当然是有道理的，除非它不比较。

```
>>> f = (lambda x: x)
>>> f == f
True 
```

Haskell 鼓励`==`始终*表示*结构相等（如果您使用`deriving Eq`.`Eq`存储函数的数据结构不能是`Eq`.

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-06-08T23:33:53.137

你如何比较功能？还是存在类型？还是 MVar？

有无与伦比的类型。

* * *

编辑：MVar 在 Eq 中！

```
instance Eq (MVar a) where
        (MVar mvar1#) == (MVar mvar2#) = sameMVar# mvar1# mvar2# 
```

但它需要一个神奇的primop才能做到这一点。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-06-08T21:51:30.100

因为比较值的方式可能是自定义的。例如，某些“字段”可能会被排除在比较之外。

或者考虑一种表示不区分大小写的字符串的类型。这种类型不想比较它包含的字符的身份。***

# wpf - 在托管代码中编写核心操作系统组件有哪些困难？

> ID：10956420
> 
> 赞同：1
> 
> 时间：2012-06-08T21:48:55.633
> 
> 标签：wpf, windows, winapi, windows-vista, managed

我知道一些 Microsoft 员工是 StackOverflow 的成员，例如著名的 Raymond Chen 和 Larry Osterman（Vista 的音频堆栈和每个应用程序声音控制机制的工程师），我们知道 Jeff Atwood 也在这里。所以也许我们可以直接从马的嘴里学到一些关于核心 Windows 组件中托管代码的经验。

我已经下载了所有泄露的 Windows Longhorn 版本（来自“显而易见的”来源），并使用“dotPeek”和“.net OR not”等工具四处寻找托管代码。我发现在 2004 年 8 月的“longhorn 重置”之后，托管代码在每次构建中都在下降。但我什至发现用托管代码编写的“Windows 电影制作者”。

那么，问题来了：在托管代码中编写核心操作系统组件有哪些困难？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T00:59:57.847

我敢肯定还有其他考虑因素，但这是一个相当明显的考虑因素：

托管代码组件需要特定版本的托管运行时，并且，IIRC，一个进程中只能有一个托管运行时实例。马上，这排除了对*共享*组件使用托管代码 - 因为一个应用程序及其一个或多个组件可能需要不同版本的运行时，并将其使用限制为应用程序样式的组件。

还要记住，Windows 的更多部分实际上是“共享组件”，而不是显而易见的。虽然您可能将资源管理器视为一种应用程序，但一旦应用程序打开文件/打开通用对话框，它现在就会在其中包含一堆资源管理器组件，列出可用的文件和目录。

# jquery - jQuery 在我的 Drupal 页面上不起作用

> ID：10956424
> 
> 赞同：1
> 
> 时间：2012-06-08T21:49:06.523
> 
> 标签：jquery, jquery-ui, drupal, drupal-7

这是我试图在我的 Drupal 网站上实现的实时页面：

[工作页面](http://www.crm-newsletter.com/website/mortgagePlannerCRM.html)

该页面运行良好，并且使用 Drupal 7 使用的相同版本的 jQuery 和 jQueryUI。

现在，当我将此内容放到位于此处的 Drupal 站点时：

[Drupal 页面 - 不工作](http://mpc.demosite.us/mortgageplannercrm.html)

jQueryUI 似乎无法正常工作。然而，jQuery Rotate 工作正常。

我一直在寻找答案并实现了几种方法，所有这些方法都失败了，包括在这段代码中包装我的 jQuery 的方法：

```
(function($) {

})(jQuery); 
```

尽快提供任何帮助将是惊人的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T21:53:09.103

这就是您正在做的事情（根据我在您的 html 代码中看到的内容）

```
jQuery(document).ready(function($) {
...
})(jQuery); 
```

这是不正确的。试试这个

```
(function($) {
    $(function() {
    ...
    });
})(jQuery); 
```

检查[这个](https://stackoverflow.com/questions/4484289/id-like-to-understand-the-jquery-plugin-syntax/4484317#4484317)流行的问题，以获得有关正确语法的更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T23:37:07.180

解决方案非常晦涩难懂。我的代码调用了 jquery 1.7，所以这就是我加载的内容。凭直觉，我把它改回 Drupal 的默认 jQuery 1.5 并且它起作用了。

# java - 按经纬度搜索 geo_point 位置 - Java Query

> ID：10956436
> 
> 赞同：3
> 
> 时间：2012-06-08T21:50:33.120
> 
> 标签：java, geolocation, elasticsearch

尝试使用 Java 查询按纬度/经度对搜索位置：

（位置索引为`geo_point`，`lat_lon`设置为 true）

```
SearchResponse response = client.prepareSearch("index1").setTypes("pin").setQuery((filteredQuery(matchAllQuery(), geoDistanceFilter("location").distance("1km").point(latitude, longitude)))).execute().actionGet(); 
```

这个查询工作正常，但是它需要在过滤器中指定一个“距离”，我的索引中的位置应该是唯一的，所以我正在寻找另一个选项来构造一个只给定纬度和经度作为输入的查询，结果是一个或没有。

我想知道指定距离是否会产生不止一个点。

# mysql - 在mySQL中提取一列的中间部分

> ID：10956437
> 
> 赞同：3
> 
> 时间：2012-06-08T21:50:35.720
> 
> 标签：mysql, extract, server-side

我所有的零件编号在“part_no”列中都被格式化为“00-00000-00”

我需要创建一个仅提取中间部分的新列，即零件编号的“00”和“-00”之间的五个字符。

通过 php 创建记录时是否可以创建此结果？

谢谢

埃里克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T21:53:05.373

```
select substring(part_no, 4, 5) as middle_part
from your_table 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T22:11:13.097

首先，您必须创建列来保存该数据，然后您必须这样做：

```
UPDATE tableName SET newColumnName = SUBSTR(part_number,4,5); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T21:53:24.040

```
$new = mb_substr($old, 3, -3); 
```

[http://php.net/manual/en/function.mb-substr.php](http://php.net/manual/en/function.mb-substr.php)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-08T22:02:22.447

```
 $result = "00-00000-00";
    $answer = substr($result, 3, 5); 
```

# c# - Telerik 折线图在 IE9 上不显示折线

> ID：10956440
> 
> 赞同：0
> 
> 时间：2012-06-08T21:51:06.170
> 
> 标签：c#, asp.net-mvc, telerik, telerik-mvc

我一直在将 Telerik Charts 与 Asp.net mvc 一起使用，但遇到了一些奇怪的问题。我无法让折线图上的线条显示在 IE9 上。它适用于所有其他浏览器（Chrome、Firefox、Safari 甚至 IE 7 和 8）。我以前从未遇到过这样的问题。任何帮助，将不胜感激。这就是我的代码的样子

```
<%= Html.Telerik().Chart<AllStars.Models.Charts.MyChart>()
       .Name("chart1")
       .Legend(legend => legend
           .Position(ChartLegendPosition.Bottom)
       )
       .Series(series => {
            series.Line(s => s.value1).Name("Value1").Color("#26a0db");
            series.Line(s => s.value2).Name("Value2").Color("#009900");
            series.Line(s => s.value3).Name("Value3").Color("#E4814F");
        })
       .CategoryAxis(axis => axis
            .Categories(o => o.title)
            .Labels(l => l.Rotation(-45))
       )
       .ValueAxis(axis => axis
            .Numeric().Labels(labels => labels.Format("{0:#,##0}%"))
       )
       .Tooltip(tooltip => tooltip
            .Visible(true)
            .Template("<#= series.name #> : <#= value #>")
       )
       .DataBinding(dataBinding => dataBinding
            .Ajax().Select("DrawChart", "Charts")
       )
       .HtmlAttributes(new {style = "width: 840px; height: 400px;"})
%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T16:21:15.767

K发现了问题。由于我在 tabstrip 中有网格，telerik 有一些奇怪的事情，当它在 tabstrip 中时，它不会显示带有过渡的线条。这绝对是一个 Telerik 错误，但禁用转换会使线条再次出现。

# ruby-on-rails - ruby on rails has_many 通过关系

> ID：10956441
> 
> 赞同：0
> 
> 时间：2012-06-08T21:51:14.673
> 
> 标签：ruby-on-rails, database-design, rails-activerecord, has-many-through

嗨，我的应用程序的 has_many through 关系遇到了一点麻烦，希望能找到一些帮助。所以我有用户和讲座。讲座由一位用户创建，但随后其他用户可以“加入”已创建的讲座。用户有他们自己创建的讲座的个人资料提要，也有朋友创建的讲座的提要。然而，这个问题不是关于创建讲座，而是“加入”已经创建的讲座。我创建了一个“lecturerelationships”模型和控制器来处理 Lectures 和已加入的用户（我称之为“actives”）之间的这种关系。用户还必须“退出”讲座（通过单击“退出”或导航到标题导航链接之一）。

我有： Users.rb 模型 Lectures.rb 模型 Users_controller Lectures_controller

然后是以下模型

讲师关系.rb

```
class lecturerelationship < ActiveRecord::Base
  attr_accessible :active_id, :joinedlecture_id

  belongs_to :active, :class_name => "User"
  belongs_to :joinedlecture, :class_name => "Lecture"

  validates :active_id, :presence => true
  validates :joinedlecture_id, :presence => true

end 
```

LectureRelationships_controller.rb

```
class LecturerelationshipsController < ApplicationController
  before_filter :signed_in_user

  def create
   @lecture = Lecture.find(params[:lecturerelationship][:joinedlecture_id])
   current_user.join!(@lecture)
   redirect_to @lecture
  end

 def destroy
  @lecture = Lecturerelationship.find(params[:id]).joinedlecture
  current_user.exit!(@user)
  redirect_to @user
 end

end 
```

已（由朋友）创建的讲座显示在以下文件中的用户提要中

_activity_item.html.erb

```
<li id="<%= activity_item.id %>">
  <%= link_to gravatar_for(activity_item.user, :size => 200), activity_item.user %><br   clear="all">
  <%= render :partial => 'shared/join', :locals => {:activity_item => activity_item} %>
  <span class="title"><%= link_to activity_item.title, lecture_url(activity_item)  %></span><br clear="all">
  <span class="user">
   Joined by <%= link_to activity_item.user.name, activity_item.user %>
  </span><br clear="all">
  <span class="timestamp">
   <%= time_ago_in_words(activity_item.created_at) %> ago.
  </span>
  <% if current_user?(activity_item.user) %>
    <%= link_to "delete", activity_item, :method => :delete,
                                     :confirm => "Are you sure?",
                                     :title => activity_item.content %>
  <% end %>
</li> 
```

然后你会看到我链接到上面的“共享/加入”部分，可以在下面的文件中看到

_join.html.erb

```
<%= form_for(current_user.lecturerelationships.build(:joinedlecture_id =>  activity_item.id)) do |f| %>
  <div>
   <%= f.hidden_field :joinedlecture_id %>
  </div>
  <%= f.submit "Join", :class => "btn btn-large btn-info" %>
<% end %> 
```

可能需要的更多文件：

配置/路由.rb

```
SampleApp::Application.routes.draw do
  resources :users do
    member do
    get :following, :followers, :joined_lectures
  end
end

resources :sessions, :only => [:new, :create, :destroy]
resources :lectures, :only  => [:create, :destroy, :show]
resources :relationships, :only => [:create, :destroy] #for users following each other
resources :lecturerelationships, :only => [:create, :destroy] #users joining existing lectures 
```

所以会发生什么是讲座出现在我的activity_feed中，底部有一个加入按钮选项......这应该创建一个“活动”和“joinedlecture”的讲座关系（显然应该来自用户和讲座课程。但是当我点击加入按钮时我得到的错误如下：

```
ActiveRecord::StatementInvalid in LecturerelationshipsController#create

SQLite3::ConstraintException: constraint failed: INSERT INTO "lecturerelationships"     ("active_id", "created_at", "joinedlecture_id", "updated_at") VALUES (?, ?, ?, ?) 
```

我还包括了我的用户模型（似乎错误指的是它）user.rb

```
class User < ActiveRecord::Base
  attr_accessible :email, :name, :password, :password_confirmation
  has_secure_password
  has_many :lectures, :dependent => :destroy

  has_many :lecturerelationships, :foreign_key => "active_id", :dependent => :destroy
  has_many :joined_lectures, :through => :lecturerelationships, :source =>    :joinedlecture

  before_save { |user| user.email = email.downcase }
  before_save :create_remember_token

  validates :name, :presence => true, :length => { :maximum => 50 }
  VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
  validates :email, :presence => true,
        :format => { :with => VALID_EMAIL_REGEX },
        :uniqueness => { :case_sensitive => false }
  validates :password, :presence => true, :length => { :minimum => 6 }
  validates :password_confirmation, :presence => true

  def activity
    # This feed is for "My Activity" - basically lectures i've started
    Lecture.where("user_id = ?", id)
  end

  def friendactivity
     Lecture.from_users_followed_by(self)
  end

  # lECTURE TO USER (JOINING) RELATIONSHIPS
  def joined?(selected_lecture)
    lecturerelationships.find_by_joinedlecture_id(selected_lecture.id)
  end

  def join!(selected_lecture)
    lecturerelationships.create!(:joinedlecture_id => selected_lecture.id)
  end

  def exit!(selected_lecture)
   lecturerelationships.find_by_joinedlecture_id(selected_lecture.id).destroy
  end

end 
```

感谢您提供的所有帮助 - 我会在这里待一段时间，所以如前所述，我非常感谢可能有时间与我一起解决问题的人......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T22:36:22.120

我将从以下模型开始，对成员资格表使用 Enrollment。
类命名对此至关重要。

```
class User < ActiveRecord::Base
  has_many :enrollments
  has_many :users, :through => :enrollments
end

class Lecture < ActiveRecord::Base
  has_many enrollments
  has_many users, :through => :enrollments
end

class Enrollment < ActiveRecord::Base
  belongs_to :user
  belongs_to :lecture
end 
```

rails 的主要技巧是使用正确的名称并遵循约定并让框架为您完成大部分工作。走出这条路，错误可能无穷无尽，代码很快就会变得混乱:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T22:14:07.357

看起来你的 _join.html.erb 用来`build`形成一个新的`lecturerelationships`关联，然后`join!`调用用来`create`在同一个对象上建立另一个。我的猜测是第二个调用中断了由第一个调用启动的事务，这就是您收到`database is locked: commit transaction`错误的原因。

我认为将此类代码排除在您的视图之外是一种很好的做法。

# opengl - 使用 DevIL 读取图像

> ID：10956442
> 
> 赞同：1
> 
> 时间：2012-06-08T21:51:17.293
> 
> 标签：opengl, devil

我在使用 DevIL 1.7.8 读取图像时遇到问题。到目前为止，我知道以下代码段应该可以工作：

```
ilInit();
ILuint ImageName;
ilGenImages(1, &ImageName);
ilBindImage(ImageName);
wchar_t* imgFilename = L"..\\..\\resources\\textures\\red.png"; 
ilLoadImage(imgFilename);
ILubyte* texture = ilGetData(); 
```

当我检查第一个像素时

```
for (int i=0; i<64; i++) cout << (int)texture[i] << endl; 
```

我得到一个非常随机的输出。图片实际上是完全红色的。

我也尝试使用 ilut

```
ilutRenderer(ILUT_OPENGL);
GLuint t = ilutGLLoadImage(L"..\\..\\resources\\textures\\red.png"); 
```

但实际上我什至不能包含相应的头文件，因为在该头文件中链接了 il.h，它应该位于不存在的文件夹 (\IL) 中。即使我创建此文件夹并将所需的头文件复制到其中，我也会遇到编译错误。

任何人都可以帮助我使用 DevIL 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-02T23:47:43.473

我正在阅读这样的图像和绑定纹理：

```
ilEnable(IL_ORIGIN_SET);
ilOriginFunc(IL_ORIGIN_LOWER_LEFT); // set [0,0] of texture to bottom left corner

ilImage image;
GLuint ind;
glGenTextures(1, &ind);
glBindTexture(GL_TEXTURE_2D, ind);
image.Load(L"<path>");//  or just name.format  be sure to have image in correct folder. 
```

渲染时，需要先绑定正确的纹理：

```
glBindTexture(GL_TEXTURE_2D, ind); 
```

然后将纹理的 UV 坐标分配给顶点：

```
glTexCoord2f(x1, y1);               
glVertex3f(x, y, z); 
```

不要忘记启用 GL_TEXTURE_2D 或您正在使用的任何类型。

# android - Android：一旦 webview 完成滚动，就使按钮可见

> ID：10956443
> 
> 赞同：5
> 
> 时间：2012-06-08T21:51:20.227
> 
> 标签：android, delegates, scroll, android-webview

我有一个显示 html 文件的 webview。当用户在 webview 中滚动到这个文件的底部时，我想要一个以前隐藏的按钮显示出来，然后用户可以按下它来做一些活动

我在 iOS 中做了类似的事情，我只是将委托设置为 ViewController 并将按钮设置为可见。我如何在 Android 上做类似的事情？我注意到没有像 iOS 那样的回调方法。

编辑：现在，我有一个包含 2 个对象的活动：一个包含我的文本的 web 视图和一个当前不可见的按钮。我希望我的活动在 webview 文本滚动到底部时收到一条消息，并使按钮可见

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-27T23:15:38.533

I had to do this myself, in order to display an "I Agree" button once the user has scrolled to the bottom of a EULA. Lawyers, huh?

In fact when you override the WebView (rather than the ScrollView as in the answer from @JackTurky) you can call computeVerticalScrollRange() to get the height of the content, rather than getBottom() which returns the visible bottom and is not useful.

This is my comprehensive solution. As far as I can see this is all API Level 1 stuff, so it should work anywhere.

```
public class EulaWebView extends WebView {
    public EulaWebView(Context context) 
    {
        this(context, null);
    }

    public EulaWebView(Context context, AttributeSet attrs) 
    {
        this(context, attrs, 0);
    }

    public EulaWebView(Context context, AttributeSet attrs, int defStyle) 
    {
        super(context, attrs, defStyle);
    }

    public OnBottomReachedListener mOnBottomReachedListener = null;
    private int mMinDistance = 0;

    /**
     * Set the listener which will be called when the WebView is scrolled to within some
     * margin of the bottom.
     * @param bottomReachedListener
     * @param allowedDifference
     */
    public void setOnBottomReachedListener(OnBottomReachedListener bottomReachedListener, int allowedDifference ) {
        mOnBottomReachedListener = bottomReachedListener;
        mMinDistance = allowedDifference;
    }

    /**
     * Implement this interface if you want to be notified when the WebView has scrolled to the bottom.
     */
    public interface OnBottomReachedListener {
        void onBottomReached(View v);
    }

    @Override
    protected void onScrollChanged(int left, int top, int oldLeft, int oldTop) {
        if ( mOnBottomReachedListener != null ) {
            if ( (computeVerticalScrollRange() - (top + getHeight())) <= mMinDistance )
                mOnBottomReachedListener.onBottomReached(this);
        }
        super.onScrollChanged(left, top, oldLeft, oldTop);
    }

} 
```

I use this to display an "I Agree" button once the user has scrolled to the bottom of the WebView, where I call it like this (in a class which "implements OnBottomReachedListener":

```
EulaWebView mEulaContent;
Button mEulaAgreed;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.eula);
    mEulaContent = (EulaWebView) findViewById(R.id.eula_content);
    StaticHelpers.loadWebView(this, mEulaContent, R.raw.stylesheet, StaticHelpers.readRawTextFile(this, R.raw.eula), null);
    mEulaContent.setVerticalScrollBarEnabled(true);
    mEulaContent.setOnBottomReachedListener(this, 50);

    mEulaAgreed = (Button) findViewById(R.id.eula_agreed);
    mEulaAgreed.setOnClickListener(this);
    mEulaAgreed.setVisibility(View.GONE);
}

@Override
public void onBottomReached(View v) {
    mEulaAgreed.setVisibility(View.VISIBLE);
} 
```

So when the bottom is reached (or in this case, when they get within 50 pixels of it) the "I Agree" button appears.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-11-03T08:55:01.963

*[我无法对答案发表评论，因此将我的评论留在这里作为新答案]*

karora 的答案（第一个）效果很好，除了在

```
protected void onScrollChanged(int left, int top, int oldLeft, int oldTop) 
```

方法，调用

```
getContentHeight() 
```

对我来说非常不准确。它报告的值太小了，所以当用户仅向下滚动 WebView 的三分之一时调用了我的侦听器。我用了

```
computeVerticalScrollRange() 
```

相反，这是完美的。感谢[这篇文章](https://stackoverflow.com/questions/36281875/getting-webview-content-height-once-its-loaded-android)的有用提示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-17T11:35:41.673

仅当 webview 到达/滚动到底部时加载/可见按钮。

创建 JavaScript 类：

```
public class JavaScriptInterface {

  @android.webkit.JavascriptInterface
  public void didScrollToBottom() {
    Log.d(TAG, "Scroll to Bottom");
    myHandler.post(new Runnable() {
      @Override
      public void run() {
         btnAccept.setVisibility(View.VISIBLE);

          }
       });
      }
    } 
```

在 onCreate() ：

```
final JavaScriptInterface jsInterface = new JavaScriptInterface();
myWebView.addJavascriptInterface(jsInterface, "AndroidFunction"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T22:41:25.987

尝试这个：

```
@Override
protected void onScrollChanged(int l, int t, int oldl, int oldt) {
        View view = (View) getChildAt(getChildCount()-1);
        int diff = (view.getBottom()-(getHeight()+getScrollY()));// Calculate the scrolldiff
        if( diff == 0 ){  // if diff is zero, then the bottom has been reached
            Log.d(ScrollTest.LOG_TAG, "MyScrollView: Bottom has been reached" );
            yourButton.setVisible(true);
        }
        super.onScrollChanged(l, t, oldl, oldt);
} 
```

要实现这一点，请扩展 ScrollView，然后重写 onScrollChanged 方法（继承自 View）。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-10-08T12:16:38.820

对于类似的问题，上述解决方案对我来说并不完全有效（滚动 webView 时隐藏按钮，滚动结束后显示）。我希望它在滚动时隐藏的原因是因为我想隐藏的按钮是为了跳到 webview 的最底部，当它只在 webview 是静态的时候才对我有用，但在视图仍然存在时没有跳到底部滚动。所以我做了以下事情：

为覆盖的 webView 添加了一个 onScrollChanged 回调，就像附近建议的那样：

```
private OnScrollChangedCallback mOnScrollChangedCallback;

public OnScrollChangedCallback getOnScrollChangedCallback() {
    return mOnScrollChangedCallback;
}

public void setOnScrollChangedCallback(
        final OnScrollChangedCallback onScrollChangedCallback) {
    mOnScrollChangedCallback = onScrollChangedCallback;
}

@Override
protected void onScrollChanged(final int l, final int t, final int oldl,
        final int oldt) {
    super.onScrollChanged(l, t, oldl, oldt);
    if (mOnScrollChangedCallback != null){
        mOnScrollChangedCallback.onScrollChanged(l, t);
    }
}

/**
 * Implement in the activity/fragment/view that you want to listen to the
 * webview
 */
public static interface OnScrollChangedCallback {
    public void onScrollChanged(int l, int t);
} 
```

在我实现 OnScrollChangedCallback 的活动类中

**更新：**

```
Timer timer2showJumpButton;
private long lastScrollEventTimestamp;
public final static int HIDING_JUMP_BUTTON_ON_SCROLL_DELAY  = 500;

    public void onScrollChanged(int l, int t) {

    // showing button when scrolling starts
    if (btnJumpToBottom != null) {
        btnJumpToBottom.setVisibility(View.VISIBLE);
    }

    if (btnJumpToTop!= null) {
        btnJumpToTop.setVisibility(View.VISIBLE);
    }

    if (timer2showJumpButton == null) {

        final Runnable r2 = new Runnable() {

            @Override
            public void run() {
                if (btnJumpToBottom != null) {
                    btnJumpToBottom.setVisibility(View.GONE);
                }
                if (btnJumpToTop!= null) {
                    btnJumpToTop.setVisibility(View.GONE);
                }

            }
        };

        TimerTask timerTask = new TimerTask() {
            @Override
            public void run() {
                if (btnJumpToTop.getVisibility() == View.VISIBLE || btnJumpToBottom.getVisibility() == View.VISIBLE){
                    long currentTimestamp = System.currentTimeMillis();

                    if (currentTimestamp - lastScrollEventTimestamp > HIDING_JUMP_BUTTON_ON_SCROLL_DELAY1 ){                        
                        webView.postDelayed(r2, HIDING_JUMP_BUTTON_ON_SCROLL_DELAY);
                    }else{
                        //too soon
                    }
                }
            }
        };

        try {
            timer2showJumpButton = new Timer();
            timer2showJumpButton.schedule(timerTask, 500, 500);
        } catch (IllegalStateException e) {
            logger.warn(TAG + "/onScrollChanged/" + e.getMessage());

        }   
    }

    // adding runnable which will hide button back
    long currentTimestamp = System.currentTimeMillis();

    lastScrollEventTimestamp = currentTimestamp;
} 
```

# android - Android R.anim，找不到摇晃

> ID：10956454
> 
> 赞同：2
> 
> 时间：2012-06-08T21:53:16.083
> 
> 标签：android, animation, button

我已按照以下教程进行操作：

[http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/view/Animation1.html](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/view/Animation1.html)

代码很好，直到我得到：

```
Animation shake = AnimationUtils.loadAnimation(this, R.anim.shake); 
```

似乎 R.anim 不存在，eclipse 建议在 R 类型中创建一个字段或在 R 类型中创建一个常量。如果我错了，请纠正我，但我不相信这两者都是解决方案。

我正在运行 Google API、平台 2.2、API 8 - 我尝试了更高级别，但没有任何区别。我想要完成的只是单击时摇动按钮...

任何反馈表示赞赏，

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T23:21:06.000

您需要创建摇动动画 xml 文件。它将驻留在

> /res/anim/shake.xml

它看起来像这样：

```
<translate xmlns:android="http://schemas.android.com/apk/res/android"
 android:fromXDelta="0" android:toXDelta="10" android:duration="1000"
 android:interpolator="@anim/cycle_7" /> 
```

然后，您还需要插值器（cycle_7.xml）：

```
 <cycleInterpolator xmlns:android="http://schemas.android.com/apk/res/android" 
 android:cycles="7" /> 
```

这些文件都可以在

> /path/to/android_sdk/samples/android-15/ApiDemos/res/anim

# c - pthread - 设置调度器参数

> ID：10956459
> 
> 赞同：0
> 
> 时间：2012-06-08T21:53:45.257
> 
> 标签：c, linux, pthreads

我想以某种方式使用 pthread 库中的读写器锁，即作者优先于读者。我在手册页中读到

> 如果支持 Thread Execution Scheduling 选项，并且锁中涉及的线程正在使用调度策略 SCHED_FIFO 或 SCHED_RR 执行，则如果写入者持有锁或更高或相等优先级的写入者被阻塞，则调用线程不应获取锁在锁上；否则，调用线程将获取锁。

所以我写了一个小函数来设置线程调度选项。

```
void thread_set_up(int _thread)
{
 struct sched_param *_param=malloc(sizeof (struct sched_param));
 int *c=malloc(sizeof(int));
 *c=sched_get_priority_min(SCHED_FIFO)+1;
 _param->__sched_priority=*c;
 long *a=malloc(sizeof(long));
 *a=syscall(SYS_gettid);
 int *b=malloc(sizeof(int));
 *b=SCHED_FIFO;
 if (pthread_setschedparam(*a,*b,_param) == -1)
 {
    //depending on which thread calls this functions, few thing can happen
    if (_thread == MAIN_THREAD)
        client_cleanup();
    else if (_thread==ACCEPT_THREAD)
    {
        pthread_kill(params.main_thread_id,SIGINT);
        pthread_exit(NULL);
    }
} 
```

}

对不起那些`a,b,c`，但我尝试了`malloc`一切，我仍然`SIGSEGV`接到电话`pthread_setschedparam`，我想知道为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T00:11:18.407

我不知道这些是否是您问题的确切原因，但它们应该可以帮助您解决问题。

(1)`pthread_setschedparam`成功返回 0，否则返回正数。所以

```
if (pthread_setschedparam(*a,*b,_param) == -1) 
```

永远不会执行。它应该是这样的：

```
if ((ret = pthread_setschedparam(*a, *b, _param)) != 0)
{ //yada yada 
} 
```

顺便说一句，并不是 100% 清楚你在做什么，但`pthread_kill`看起来尽可能丑陋。

(2)`syscall(SYS_gettid)`获取操作系统threadID。 `pthread__setschedparam`期望*pthreads 线程 id*，这是不同的。pthreads 线程 id 由 datatype 返回`pthread_create`并`pthread_self`在其中返回`pthread_t`。更改`pthread__setschedparam`为使用此类型和适当的值，看看情况是否有所改善。

(3) 您需要以特权用户身份运行才能更改时间表。尝试以 root 或 sudo 或其他方式运行该程序。

# wpf - 具有数据绑定计算值的 TextBlock 未更新

> ID：10956460
> 
> 赞同：0
> 
> 时间：2012-06-08T21:53:55.713
> 
> 标签：wpf, data-binding, observablecollection, textblock, updatesourcetrigger

我有一个文本块，它绑定到我的 JobItem 类中名为“AdminTime”的双重属性。AdminTime 计算在名为 TimeLog 的 observablecollection 中的总管理时间。我使用文本框将这些管理时间添加到 JobItem 类中。这是按比例缩小的代码：

```
<TextBlock Style="{StaticResource TextBlockStyle}" Grid.Row="1" Grid.Column="1" Name="adminHrs" Text="{Binding Path=AdminTime, UpdateSourceTrigger=Explicit, Mode=OneWay, StringFormat={}{0:0.00}}" />
<TextBox Style="{StaticResource textBoundStyle}" Name="adminTimeTxtBox" Grid.Row="3" Grid.Column="1"  />
<Button Style="{StaticResource addTimeStyle}" Name="addAdBtn" Grid.Column="1" Grid.Row="3" Click="addAdBtn_Click" />
<Button Style="{StaticResource subTimeStyle}" Name="subAdBtn" Grid.Column="1" Grid.Row="3" Click="subAdBtn_Click" /> 
```

对于后面的代码，我有 addTime 按钮单击处理程序。请注意，我知道我的 UpdateSourceTrigger 已经是显式的，我不应该更新我的源代码，但我只是在检查它是否有助于解决我的问题：

```
public static readonly DependencyProperty AdminTimeProperty =
        DependencyProperty.Register("AdminTime", typeof(double),
        typeof(UpdateJobDialog));
private void addAdBtn_Click(object sender, RoutedEventArgs e)
    {
        AddHours();
    }

    private void AddHours()
    {
        item.AddTime(emp.UserType, emp.UserId, DateTime.Now, double.Parse(adminTimeTxtBox.Text));
        BindingExpression adHr = adminHrs.GetBindingExpression(TextBlock.TextProperty);
        adHr.UpdateSource();
    } 
```

在我的 JobItem 类中，我有以下代码：

```
public double AdminTime
    {
        get
        {
            double newTime = 0.00;
            if (TimeLog != null)
            {
                foreach (HoursWorked hw in TimeLog)
                {
                    if (hw.EmployeeType == "Admin")
                        newTime += hw.Hours;
                }
            }
            adminTime = newTime;
            return adminTime;
        }

        set 
        {
            if (AdminTime != value)
            {
                adminTime = value;
                OnPropertyChanged("AdminTime");
            }
        }
    }

public void AddTime(string employeeType, string userId, DateTime datePosted, double hours)
    {
        HoursWorked newLog;
        newLog = new HoursWorked(employeeType, userId, datePosted, hours);
        TimeLog.Add(newLog);

    }

public ObservableCollection<HoursWorked> TimeLog
    {
        get { return timeLog; }
        set
        {
            if (!TimeLog.Equals(value))
            {
                timeLog = value;
                OnPropertyChanged("TimeLog");
            }
        }

    } 
```

当我退出窗口然后重新打开它时，我的文本块确实绑定了，我想要的是在单击 addAdBtn 后更新我的文本块。我不想打开对话框才能看到我的管理时间文本块和按钮，添加时间，关闭对话框，然后再次重新打开以查看更新的文本块。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T22:19:52.943

我实际上想通了，我只需要将我的 updatesourcetrigger 更改为 twoway。

# asp.net-mvc - 文件下载 asp.net mvc

> ID：10956461
> 
> 赞同：3
> 
> 时间：2012-06-08T21:54:27.270
> 
> 标签：asp.net-mvc, model-view-controller, download

我正在按照教程从服务器下载文件。但是遇到了一些麻烦。我一定是在做一些愚蠢的错误..!!

这是我关注的链接：http: [//haacked.com/archive/2008/05/10/writing-a-custom-file-download-action-result-for-asp.net-mvc.aspx](http://haacked.com/archive/2008/05/10/writing-a-custom-file-download-action-result-for-asp.net-mvc.aspx)

要求是；用户将单击一个链接，该站点会将他们带到详细信息页面。在该详细信息页面上，将有一个下载链接。当用户单击该下载链接时，将下载该文件。

问题是，当我点击下载链接时，它没有下载原始文件。而是下载一个 HTML 文件。如果我单击 HTML 文件，它会显示垃圾。

这是我的代码：

行动：

```
public ActionResult Download(string path,string name)
    {
        return new DownloadResult { VirtualPath = path, FileDownloadName = name };
    } 
```

下载结果类

```
public class DownloadResult : ActionResult
{

    public DownloadResult()
    {
    }

    public DownloadResult(string virtualPath)
    {
        this.VirtualPath = virtualPath;
    }

    public string VirtualPath
    {
        get;
        set;
    }

    public string FileDownloadName
    {
        get;
        set;
    }

    public override void ExecuteResult(ControllerContext context) 
    {
        if (!String.IsNullOrEmpty(FileDownloadName)) 
        {
            context.HttpContext.Response.AddHeader("content-disposition", "attachment; filename=" + this.FileDownloadName);
        }

        string filePath = this.VirtualPath; //context.HttpContext.Server.MapPath(this.VirtualPath);
        context.HttpContext.Response.TransmitFile(filePath);
    }
} 
```

与教程和我的代码的唯一区别是我使用的是实际的服务器路径。

任何的想法？？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-08T22:07:20.403

如果您需要向客户端发送文件并且您知道路径，请使用[FilePathResult](http://msdn.microsoft.com/en-us/library/system.web.mvc.filepathresult.aspx)：

```
public ActionResult Download(string path, string name)
{
    return new FilePathResult(path, contentType) {
         FileDownloadName = name
    }
} 
```

请注意，您需要知道内容类型。如果您真的不知道，您可以使用`application/octet-stream`which 使浏览器将其视为二进制文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T22:07:00.390

你读过这个吗？

> 新更新：不再需要此自定义 ActionResult，因为 ASP.NET MVC 现在在框中包含一个。

使用 FileContentResult， http: [//msdn.microsoft.com/en-us/library/system.web.mvc.filecontentresult.aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.filecontentresult.aspx)获取数据

# javascript - 更改页面功能

> ID：10956465
> 
> 赞同：-1
> 
> 时间：2012-06-08T21:55:26.777
> 
> 标签：javascript, html, function

我试图绕过通过更改控制它的功能弹出的确认窗口。

它应该返回 true，这将自动确认。

函数是'confirmTrade()'

```
iframe.contentWindow.confirmTrade() = function(){return true;}; 
```

这就是我所拥有的，但脚本停在那里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T22:04:24.333

假设您对该函数有正确的对象引用……</p>

您需要将新函数分配给该属性——而不是*调用*原始函数并尝试为返回值分配一些东西——摆脱`()`.

```
iframe.contentWindow.confirmTrade = function(){return true;}; 
```

只编辑原始文档会更简单，而不是尝试使用 JavaScript 动态更改它。如果您采用这种方法的原因是因为您不控制该文档，那么可能会应用[相同的来源策略](http://en.wikipedia.org/wiki/Same_origin_policy)。

# xcode - FirstResponder 缺少一些功能

> ID：10956466
> 
> 赞同：0
> 
> 时间：2012-06-08T21:55:31.503
> 
> 标签：xcode, cocoa, first-responder

出于某种原因，我的 FirstResponder 中缺少某些功能。

在我的 MainMenu 中，我有重做菜单项，在我的其他应用程序中，它链接到第一响应者中的“重做”功能，但是我的新应用程序中缺少它吗？

有谁知道如何解决这一问题？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-08T22:00:23.493

FirstResponder 中的功能取决于您正在构建的应用程序的类型。您当前的应用程序不支持撤消，因此 FirstResponder 的生成类型没有该方法。

# mysql - Mysql 触发器：结果包含多于一行

> ID：10956468
> 
> 赞同：0
> 
> 时间：2012-06-08T21:55:40.520
> 
> 标签：mysql, triggers, row

我有 3 张桌子：

模块：

```
id_module   | name
--------------------
1             users
2             roles
... 
```

轮廓：

```
id_profile   | name
--------------------
1             admin
2             promoter 
```

和许可

```
id   | id_profile  | id_module | read | write | modify | delete
--------------------------------------------------------------- 
```

我想要的是一个触发器，每次我插入一个新模块时都填充表权限......但对于每个现有的配置文件。

因此：

```
INSERT INTO `module` (`name`) VALUES
    ('user'),
    ('roles'); 
```

现有的配置文件**管理员**和**发起人**权限表将以这种方式填充：

```
id   | id_profile  | id_module | read | write | modify | delete
---------------------------------------------------------------
1      1             1           0      0       0        0
2      1             2           0      0       0        0
3      2             1           0      0       0        0
4      2             2           0      0       0        0 
```

为此，我创建了以下触发器：

```
CREATE TRIGGER `create_permission` AFTER INSERT ON `module`
    FOR EACH ROW
    BEGIN
    DECLARE `my_profile` INT(11) ;

    SELECT id_profile INTO `my_profile` FROM profile WHERE state <>3;

    INSERT INTO `permission` (`id_profile`, `id_module`, `read`, `write`, `modify`, `delete`) VALUES(`my_profile`, NEW.`id_module `,0,0,0,0);

END; 
```

当有配置文件时效果很好......当我返回“*结果包含多行*”时有多个

我读到当你声明一个支持单个值的变量时会出现这个问题......你可以为表配置文件的每个 id 插入记录吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T22:09:26.653

正如您所发现的，您只能将标量值分配给变量。

要遍历`SELECT`查询的许多结果，您需要使用[`CURSOR`](http://dev.mysql.com/doc/refman/5.1/en/cursors.html).

我个人不喜欢繁琐的`CURSOR`语法。在您的特定情况下，我会建议更简单的[`INSERT INTO...SELECT`](http://dev.mysql.com/doc/refman/5.1/en/insert-select.html)技巧：

```
INSERT INTO permission (id_profile, id_module, read, write, modify, delete)
SELECT id_profile, NEW.id_module,0,0,0,0 FROM profile WHERE state <> 3; 
```

# javascript - 关闭浏览器后保持时间值并再次调用它 - Javascript？

> ID：10956471
> 
> 赞同：1
> 
> 时间：2012-06-08T21:55:51.457
> 
> 标签：javascript, html, timer, counter

我昨天问过在浏览器关闭时保存计时器值，然后在用户打开它时再次开始计数。我发现使用 cookie 一定是一个很好的解决方案，所以我添加了 set 和 getcookie 函数，但我仍然无法获取我的计时器值。这可能很容易，但我看不出有什么问题，因为我在 javascript 中仍然太菜鸟。有人知道我在做什么错吗？谢谢你！！这是我到目前为止的代码：

```
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head>
    <title>Test</title>
    <script type="text/javascript">
var sec = 0;
var min =  0;
var hr = 0;
var dias = 0;
var bool = true;
function stopwatch() {
        sec++;
        if (sec == 60) {
            sec = 0;
            min += 1;
        }

        if (min == 60) {
            min = 0;
            hr += 1;
        }

        if (hr == 24) {
            hr = 0;
            dias += 1;
        }

        totalTime = ((dias<=9) ? "0" + dias : dias) + "d, " + ((hr<=9) ? "0" + hr : hr) + " : " + ((min<=9) ? "0" + min : min) + " : " + ((sec<=9) ? "0" + sec : sec);
        document.getElementById("timer").innerHTML = totalTime;
        if (bool == true) {
        start = setTimeout("stopwatch()", 1000);

        }
    }

function setCookie(name, value, expires) {
document.cookie = name + "=" + escape(value) + "; path=/" + ((expires == null) ? "" : "; expires=" + expires.toGMTString());
}

function getCookie (name) {
    var cname = name + "=";               
    var dc = document.cookie;

    if (dc.length > 0) {              
        begin = dc.indexOf(cname);       
            if (begin != -1) {           
            begin += cname.length;       
            end = dc.indexOf(";", begin);
                if (end == -1) end = dc.length;
                return unescape(dc.substring(begin, end));
            } 
        }
    return null;
}

var exp = new Date();                                  
exp.setTime(exp.getTime() + (1000 * 60 * 60 * 24 * 30));

    </script>
</head>
<body onload="stopwatch()">
    <div id="timer" name="timer"> </div>
  <button onclick="bool = false"; > pause </button>
  <button onclick="bool = true;stopwatch();" > resume </button>

    <form>
      <input type="button" value="Set a Cookie" onClick="setCookie('myCookie',timer.value, exp)">
    </form>
<form>
<input type="button" value="Get Cookie Value" onClick="this.form.tf.value = getCookie('myCookie')">
<input type="text" name="tf" size="30">
</form>

 </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T22:23:56.720

首先，您的代码有几个问题：

*   不应在`setTimeout`s中使用字符串
*   您的变量应初始化为整数，而不是字符串。

* * *

回到您的问题，当用户关闭页面时，使用 unload 事件将 cookie 保存为当前时间。然后当用户再次打开页面时，检测 cookie 并从您离开的地方继续。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T22:14:59.613

如果您不知道如何暂停它，那么在浏览器关闭时获取日期然后在再次打开时获取日期怎么样。计算差值并将其从计时器的值中减去。

我只是在那里抛出一个一般的想法！:D

# database - Explicit locking mechanism in SQLite

> ID：10956475
> 
> 赞同：13
> 
> 时间：2012-06-08T21:56:15.943
> 
> 标签：database, sqlite

I did not find explicit sqlite locking commands before inserting or updating rows into the table. Does sqlite handle the locking mechanism on it own? The pager module described in [http://sqlite.org/lockingv3.html](http://sqlite.org/lockingv3.html) handles the locking mechanism. But I am not sure if there are any commands that the user can use to explicitly lock the tables. Please advice.

Thanks

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-08T22:13:37.747

据我所知，没有专门的 sqlite 命令来控制锁定。但是，您可以让 sqlite 使用[create transaction](https://sqlite.org/lang_transaction.html)锁定数据库。例如：

```
BEGIN IMMEDIATE TRANSACTION;
...
COMMIT TRANSACTION;

BEGIN EXCLUSIVE TRANSACTION;
...
COMMIT TRANSACTION; 
```

`IMMEDIATE`如果您阅读了我链接的文档，您应该对&`EXCLUSIVE`交易之间的区别有一个更好的了解。

可能值得注意的是，sqlite 中的锁适用于整个数据库，而不仅仅是单个表，这与`LOCK TABLE`其他 sql 数据库中的语句不同。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-08T22:14:00.243

SQLite 执行任何必要的锁定以实现您的 SQL 语句描述的事务方案。特别是，如果您不描述任何内容，那么您将获得自动提交行为，在每个语句的持续时间内持有一个锁，然后在语句完成时删除。`BEGIN TRANSACTION`如果您需要更长的事务（通常是真的！），那么您可以使用（通常缩写为`BEGIN`）明确要求它们并使用`COMMIT TRANSACTION`（或`ROLLBACK TRANSACTION`）结束。事务处理通常由您的语言接口为您包装（因为这使得正确处理变得相当容易，将事务生命周期耦合到代码块或方法调用）但在基本级别，它归结为`BEGIN`/ `COMMIT`/ `ROLLBACK`。

简而言之，你有交易。锁用于*实现*事务。您没有原始锁（这是一件好事；它们比您乍一看可能想的更难正确）。

# r - 在 R 中使用 XML 包时出错

> ID：10956480
> 
> 赞同：0
> 
> 时间：2012-06-08T21:56:55.387
> 
> 标签：r, xml-parsing, html-parsing, web-scraping

我正在收集有关不同大学的数据，并且在执行以下代码后我对跟随错误有疑问。问题是使用 htmlParse()

代码：

url1 <-“http://nces.ed.gov/collegenavigator/?id=165015”

网页1<- 获取URL(url1)

doc1 <- htmlParse(webpage1)

输出：

htmlParse(webpage1) 中的错误：文件

!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 过渡//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"

html xmlns="http://www.w3.org/1999/xhtml" head id="ctl00_hd"meta http-equiv="Content-type" content="text/html;charset=UTF-8" /title

```
 College Navigator - National Center for Education Statistics 
```

/titlelink href="css/md0.css" type="text/css" rel="stylesheet" meta name="keywords" content="大学导航器，大学搜索，中学后教育，中学后统计，NCES，IPEDS，大学定位器"/meta meta name="description" content="College Navigator 是一款免费的消费者信息工具，旨在帮助学生、家长、高中辅导员和其他人获取有关美国 7,000 多个高等教育机构的信息 - 例如提供的课程、保留率和毕业率、价格、可用援助、授予的学位、校园安全和认证。"meta>meta name="robots" content="index,nofollow"/metalink

在使用这个包之前，我有网页抓取页面，我从来没有遇到过问题。name="robots" 和它有什么关系吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T22:25:40.380

[http://validator.w3.org/check?verbose=1&uri=http%3A%2F%2Fnces.ed.gov%2Fcollegenavigator%2F%3Fid%3D165015](http://validator.w3.org/check?verbose=1&uri=http%3A%2F%2Fnces.ed.gov%2Fcollegenavigator%2F%3Fid%3D165015) 表示网页格式错误。您的浏览器可以对此进行补偿，但您的 R 包有问题。

如果您使用的是 windows，您可以让 IE 浏览器为您修复它，如下所示：

```
library(rcom)
library(XML)
ie = comCreateObject('InternetExplorer.Application')
ie[["visible"]]=T # true for debugging
comInvoke(ie,"Navigate2","http://nces.ed.gov/collegenavigator/?id=165015")
while(comGetProperty(ie,"busy")||comGetProperty(ie,"ReadyState")<4){
 Sys.sleep(1)
 print(comGetProperty(ie,"ReadyState"))
}
myDoc<-comGetProperty(ie,"Document")
webpage1<-myDoc$getElementsByTagName('html')[[0]][['innerHTML']]
ie$Quit()
doc1 <- htmlParse(webpage1) 
```

# performance - web app deployed on jboss suddenly extremely slow

> ID：10956481
> 
> 赞同：0
> 
> 时间：2012-06-08T21:57:01.263
> 
> 标签：performance, jboss, web

I have a Web App deployed on JBoss App Server 7.0.2 on Windows XP

It had been running fine for the past 6 months then suddenly, it is painfully slow when launching in Internet Explorer 7

The Web App uses java, facelets, and hibernate. Any suggestions how I can begin to locate the problem? I don't know where I should start.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T21:59:44.820

从查看内存开始。

下载 Visual VM 1.3.3，安装所有插件，并将其附加到您的 JBOSS PID。它将向您展示所有代的堆、CPU、线程、哪些对象消耗最多的内存等。

信息和洞察力是您所需要的。任何没有数据的东西都只是猜测。

另一个需要问的问题：什么“突然”改变了？我会开始询问该服务器上的更改：软件升级，安装的其他应用程序，补丁，一切。

您还应该查看依赖项。数据库服务器日志呢？

# php - Merge two arrays, but not like array_merge

> ID：10956485
> 
> 赞同：0
> 
> 时间：2012-06-08T21:57:15.793
> 
> 标签：php

I have two arrays in php, both have a date value with 7 days. The same in each. The rest of the content of the array differs. They look a little like this:

Array #1:

```
 [0]
    [date] => 2012-05-01
    [value 1] => 3 
```

Array #2:

```
 [0]
    [date] => 2012-05-01
    [value 2] => 3 
```

I'd like to merge them to get this:

```
 [0]
    [date] => 2012-05-01
    [value 1] => 3
    [value 2] => 3 
```

Right now I'm using this slop:

```
$i = 0;
$full_array = array();
foreach ($array_1 as $a) {
    foreach ($array_2 as $b) {
        if ($a['date'] == $b['date']) {
            $full_array[$i] = $a;
            $full_array[$i] += $b;
            $i++;
        }
    }
} 
```

I can turn that guy into a function but before I do I figured I'd check to see if there was a better way. Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T22:09:10.790

正如评论中提到的，您可以使用`array_merge()`它。但是您将循环外部数组以使其工作，最好使用`for`循环来完成，因此您可以同时引用两者：

```
for ($i = 0, $len = count($array_1), $full_array = array(); $i < $len; $i++) {
  $full_array[$i] = array_merge($array_1[$i], $array_2[$i]);
} 
```

# android - Android intent reception and rotation

> ID：10956487
> 
> 赞同：4
> 
> 时间：2012-06-08T21:57:25.837
> 
> 标签：android, rotation, screen-orientation, intentfilter

I'm using an Intent Filter in my activity to retrive an url clicked on by the user.

In my activity onCreate method I have the following code

```
 Intent intent = getIntent();
    if (Intent.ACTION_VIEW.equals(intent.getAction())) {
        url = intent.getDataString();
        showDialog(DIALOG_ID);          
    } 
```

It works great except when I rotate my phone. Even if tha dialog was closed prior to the rotation, it reopen every time I change the phone orientation. I can I avoir that.

For your information I don't want to lock the orientation

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T00:54:19.577

另一个不需要自己处理配置更改的解决方案可能是在显示对话框之前简单地检查 onCreate 中的 savedInstanceState Bundle 参数是否为空。

如果您查看 onCreate 的文档，您会发现在重新创建活动时（例如由于配置更改），savedInstanceState 将为非空，因此当活动重新运行时将为空。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-07T13:25:54.460

您通常会调用`setIntent(null)`以删除用于调用活动的意图。然而，在实践中，它并不总是有效。显然，[一种常见的解决方法](https://stackoverflow.com/questions/3148418/how-to-clear-intent-that-started-activity)是将意图的操作或数据或两者都设置为 null，具体取决于您在代码中使用的内容。在您的情况下，显示对话框后，我可能会选择`intent.setAction(null)`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T22:00:34.420

这是一个非常简单的修复。在清单文件中，找到活动并添加以下内容：

```
android:configChanges="keyboardHidden|orientation" 
```

这将阻止您在 onCreate 中的逻辑再次触发（或者我相信）

[从这里](http://developer.android.com/reference/android/app/Activity.html#ConfigurationChanges)引用：

> 在某些特殊情况下，您可能希望根据一种或多种类型的配置更改绕过重新启动活动。这是通过清单中的 android:configChanges 属性完成的。对于您说您在那里处理的任何类型的配置更改，您将收到对当前活动的 onConfigurationChanged(Configuration) 方法的调用，而不是重新启动。但是，如果配置更改涉及您未处理的任何内容，则活动仍将重新启动，并且不会调用 onConfigurationChanged(Configuration)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-26T23:16:47.060

直到今天我才看到这个问题。我做到了`getIntent().setAction("");`，并解决了它。不再有脑损伤:)

# authentication - Cross-domain login using JSONP and cookies

> ID：10956488
> 
> 赞同：10
> 
> 时间：2012-06-08T21:57:39.003
> 
> 标签：authentication, cookies, login, cross-domain, jsonp

How can I allow users to log into one domain and automatically be logged into my other domains without them having to submit a form on each domain?

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-08T21:57:39.627

We all know that cookies are not accessible cross-domain as this presents a security risk. However, using some trickery, there are ways around this. Basically we are setting a cookie for the user on a central domain, checking for that cookie's existence using a script, then using a JSON-P callback to copy that cookie onto the other domains. In more detail:

## Logging In

**Step 1**

The `<form>` displayed on `mydomain.com` (or `myotherdomain.com`, etc) should POST to `central.com/login`

**Step 2**

On `central.com/login`, the username and password are verified and a cookie is set on the `central.com` domain containing a unique value for that user. The user is then redirected back to `mydomain.com`

```
SELECT unique_value FROM users WHERE username = $username
set cookie on central.com containing unique_value 
```

**Step 3**

Back on `mydomain.com` we embed a javascript call to `central.com/check`.

```
<script type="text/javascript" src="http://central.com/check"></script> 
```

**Step 4**

On `central.com/check` we check if the unique cookie is set for the user. Then we embed a JavaScript callback (JSON-P) that informs `mydomain.com` that the user is logged in. No sensitive user data is included, otherwise `hacker.com` could embed this script and get the user's information. (Setting appropriate Access-Control headers to only allow verified domains can alleviate this risk.) Instead, we create a disposable hash based on the timestamp, so that `mydomain.com` can verify the authentication.

```
if cookie on central.com is valid
    user_data = array(
       'success' => true,
       'uid'     => $uid,
       'time'    => time_stamp,
       'hash'    => disposable_salted_hash( $uid, time_stamp )
    )
    echo 'setDomainCookie(' . json_encode(user_data) . ')' 
```

**Step 5**

The callback function is then executed, setting the cookie on `mydomain.com`. Finally, we can either refresh the page or just alert the user using JavaScript that they are logged in (preferably both).

```
function setDomainCookie( user_data ) {
    if( user_data.success ) {
        $.post('/setcookie', user_data, function() {
            location.reload(true);
        }
    }
} 
```

`mydomain.com/setcookie` is similar to **Step 2**. Of course this assumes both sites have access to the same database (and code)

```
if hash = disposable_salted_hash( $uid, time_stamp )
    SELECT unique_value FROM users WHERE uid = $uid
    set cookie on mydomain.com containing unique_value 
```

**Step 6**

The next time the user refreshes the page, we can bypass the JSON-P callback

```
if cookie on mydomain.com is valid
    loggedin = true
else
    delete cookie on mydomain.com
    proceed to Step 3 
```

## Logging Out

**Step 7**

The link on `mydomain.com` should go to `central.com/logout`

**Step 8**

On `central.com/logout`, not only is the cookie deleted, but the unique value for that user is reset. The user is redirected back to `mydomain.com`

```
delete cookie on central.com
UPDATE users SET unique_value = new_random_value() WHERE username = $username 
```

**Step 9**

Now that the unique value is reset, **Step 6** from above fails, the cookie is also deleted from `mydomain.com`, and the user is effectively logged out.

## Notes

1.  It is critical that `central.com/check` from **Step 4** has the correct headers set so that it is not cached.

2.  Steps 3-5 when the user is logging in may cause a slight delay. It's wise to both refresh *and* show some kind of JavaScript alert that they are logged in. It's also important for the script from **Step 3** to be as close to the top of the page as possible.

3.  In **Step 5**, you can optionally store a unique cookie value on each domain.

4.  The separate `central.com` domain is not really necessary; you can just use one of the other domains as the central domain if you wish. The logic for that domain would obviously be different.

5.  For this to work on Internet Explorer you will need a P3P policy attached to your cookies.

6.  As IvanGusev points out in the comments, one flaw of this approach is that if the user logs out of device A, it will also log them out of every other device.

7.  Hope this is helpful to people. I'd be very interested to receive feedback, especially if there are any security flaws from this method. I think the worst a hacker could do is replicate Steps 3-5 and log you in to `mydomain.com` without you knowing, but that would be harmless.

# c# - 构建我的应用程序，创建可执行文件和安装程序

> ID：10956493
> 
> 赞同：2
> 
> 时间：2012-06-08T21:58:20.110
> 
> 标签：c#, wpf, entity-framework

我创建了一个 WPF C# 应用程序并使用实体框架连接到 SQL 数据库，并对其进行读写数据。

我的应用程序有多个库项目和包含 UI 的主项目。

我想构建应用程序以便出售它。我想要一个类似于普通应用程序的东西，你有一个主要的 exe 可执行文件和代表其他项目和使用的库的 .dll 文件。

我还需要一个设置文件，该文件将像普通应用程序一样设置应用程序。

1.  我怎样才能做到这一点？

2.  我是否必须对 SQL 数据库做一些事情才能与项目一起构建，还是自动完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T22:10:08.713

如果您有 VS2010，您可以使用基于 VS2010 的“安装和部署”项目模板来创建安装项目，并选择任何给定类型，即带有 Setup.exe 或 MSI 的 CAB 或适合您的分发的 Web 部署。用户界面如下：

![在此处输入图像描述](../Images/dd38299e3e4423acff52b501081f60ef.png)

您也可以尝试 3 方安装项目，即 InstallShield 等。

对于 SQL DB，有不同的方法来分发数据库。如果您有 SQL Express 或 SQL CE，那么您可以将其打包并与主项目一起提供，如此[处](http://msdn.microsoft.com/en-US/library/bb264562%28v=SQL.90%29.aspx)所述。但是对于 SQL Server，您只需要首先创建一个数据库部署脚本和有关您的数据库的文档，然后将其与主分发包一起打包。或者可以单独进行。

# playframework - 播放框架：使用列表/地图填充 groovy 模板中的下拉列表

> ID：10956501
> 
> 赞同：1
> 
> 时间：2012-06-08T21:59:01.997
> 
> 标签：playframework

我正在使用播放框架 1.2.3。如何使用 groovy 模板使用列表/地图中的值填充下拉列表（语法）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T22:06:51.353

我正在使用 CRUD，它会自动执行。但是当你想自己做时，我在`modules\crud\app\views\tags\crud\relationField.html`

```
%{ pName = 'object.' + _name + '.' + play.db.Model.Manager.factoryFor(_field.property.relationType).keyName() }%

#{field 'object.' + _name}
    <label for="${field.id}">
        &{_name}
    </label>

        <input type="hidden" name="${pName}" value="" />
        <select id="${field.id}" name="${pName}" multiple="yes">
            %{ _field.choices.each() { }%
            %{
                selected = false;
                if(field.error?.message != 'validation.required') {
                    if(params[pName]) {
                        selected = params.getAll(${pName}).contains(it._key().toString())
                    } else {
                        for (it2 in _value) {
                            if(it2._key() == it._key()) {
                                selected = true;
                            }
                        }
                    }
                }
            }%
            <option value="${it._key()}" ${selected ? 'selected="true"'.raw() : ''}>${it}</option>
            %{ } }%
        </select> 
```

我不确定这是否会立即起作用，因为您的控制器没有扩展 CRUD。但也许它有效，或者你必须编辑一些东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T00:15:30.920

这有效 - 希望它有所帮助。

控制器：渲染（项目）；

模板：#{list items, as:'item'} ${item.value} #{/}

# moodle - 将用户 ID 从 Moodle 传递到外部 URL

> ID：10956503
> 
> 赞同：2
> 
> 时间：2012-06-08T21:59:19.803
> 
> 标签：moodle

我希望在每个 Moodle 课程中包含指向外部站点的 URL。我想将用户 ID 和课程 ID 作为 URL 中的 GET 参数传递给其他站点。moodle 中是否有将替换为 userid 或 courseid 的宏或变量？

一个例子 - 我想包括一个像

[http://www.example.com/cgi-bin/index.cgi?userid=](http://www.example.com/cgi-bin/index.cgi?userid=) &courseid=

我希望有一种方法可以让上面的 URL 中的 courseid 和用户正确地由moodle 自动填充。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T08:22:57.760

您可以通过 URL 资源中的设置来执行此操作，请参阅： http://moodle.org/mod/forum/discuss.php?d= [199526#p872867](http://moodle.org/mod/forum/discuss.php?d=199526#p872867)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T15:34:01.313

如果你想用moodle代码来做：你有对象`$course`，`$user`你只需要写`$course->id`，`$user->id`就是这样！

# eclipse - Eclipse基本快捷键——赋值助手、提取变量

> ID：10956506
> 
> 赞同：2
> 
> 时间：2012-06-08T21:59:34.487
> 
> 标签：eclipse, shortcut

有一些非常基本的任务，我怀疑如何在 Eclipse IDE 中有效地完成它：

1.  内容辅助变量声明/赋值：想象一下你必须写这样的东西`DateFormat df = new SimpleDateFormat();`。如何有效地打字？一个猜测就像`DateFormat df = new` 加一些快`Ctrl+Space`，不是很，很长`SimpleDateFormat`。但这不起作用，它将显示类路径中完全无用的按字母排序的类型，通常无法分配给`DateFormat`.

2.  提取变量：有什么方法可以像提取变量一样提取变量`Alt+Shift+L`，但不需要操纵鼠标来选择表达式或整行？就像在光标下提取内容一样？或者有什么方法可以选择行（这仅适用于独立表达但比鼠标更好）？

3.  提取字段：以比执行 2 更方便的方式提取字段的任何方法。然后是另一个魔术 - 将变量转换为字段？

我每 1-5 分钟做一次提到的组合，在我看来，编辑器完全无法用于严肃的工作。（如果不是`Ray Manzarek`）你是如何在 Eclipse 中输入的？请注意，我更喜欢默认设置，没有在第一次升级或终端更改后停止工作的微调。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T22:09:33.457

对于您的第一个问题，我是这样做的：

```
DateF<ctrl-space><Enter> df = new SDF<ctrl-space><Enter> 
```

对于您的第二个问题，我只需使用 ctrl-shift-left_or_right_arrow 选择我想要的文本。

对于你的第三个问题，不知道。我不记得有很长时间将局部变量转换为字段。也许我只是事先知道给定课程需要哪些字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T22:13:40.710

对于第一个，我发现我只需要键入`DateF` `Alt-\` `Enter` `df = new Sim` `Alt-\` `Enter` `;`，这对我来说似乎并不算太​​糟糕。

对于您的第二个问题`Shift-Option-Right`，一次将选择向右扩展一个单词，然后`Shift-Option-Left`向左扩展；结合您提到的键盘快捷键，应该可以做您想做的事情（当然，这些是 Mac 键，但我确信有 Windows 等价物；我知道有些人实际上是在 Windows 上开发软件。）

第三点：不这么认为。你可以编写自己的插件来很容易地做到这一点。

# php - 用空格连接字符串mysql php

> ID：10956508
> 
> 赞同：0
> 
> 时间：2012-06-08T21:59:46.417
> 
> 标签：php, sql, concatenation, htmlspecialchars

```
$menunaam = "Lazy Dog" 
$resultmenus = mysqli_query($dbc,"SELECT menunaam FROM prijslijst WHERE menunaam='$menunaam'");
$row = mysqli_fetch_array($resultmenus,MYSQLI_ASSOC);
echo "<input type=\"hidden\" class=\"mnu\" name=\"mnnm\" value=".htmlspecialchars($row["menunaam"]).">"; 
```

这输出

```
<input class="mnu" type="hidden" Dog="" value="Lazy" name="mnnm"> 
```

然后，当我像这样更改它时，它可以正常工作（添加了额外的单引号）：

```
echo "<input type=\"hidden\" class=\"mnu\" name=\"mnnm\" value='".htmlspecialchars($row["menunaam"])."'>"; 
```

然后我遇到了一个新问题。当我使用带有内容的变量时：$menunaam=“lazy's”

```
<input class="mnu" type="hidden" s'="" value="lazy" name="mnnm"> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T22:05:00.060

有什么问题：

```
echo '<input type="hidden" class="mnu" name="mnnm" value="'.htmlspecialchars($row["menunaam"]).'">'; 
```

或者更好：

```
printf('<input type="hidden" class="mnu" name="mnnm" value="%s">', htmlspecialchars($row["menunaam"])); 
```

# c++ - 在 C++ 中的地图中插入

> ID：10956511
> 
> 赞同：0
> 
> 时间：2012-06-08T22:00:28.370
> 
> 标签：c++, maps

```
map<string ,vector<string> > hashes;

hashes.insert(pair<string,vector<string> > (a,b ));  //error coming 
```

当我在 C++ 中使用上述语句时会出现什么问题，其中 a 和 b 是字符串？在这种类型的关联容器（即一个容器包含多个容器）中，插入是如何发生的？

很多很多提前谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T22:03:42.010

你可能想要

```
hashes[a].push_back(b) 
```

那就是如果您希望将 b 附加到当前向量。如果要替换它，请使用

```
hashes[a].assign(1, b) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T22:03:14.260

您正在尝试在需要字符串向量的地方使用字符串。您需要插入`b`向量，然后将 (a, your_vector) 插入地图。

或者，使用 a`multimap<string, string>`以您可能会发现更容易使用的方式获得相同的基本效果。这将允许您的`insert(pair<...>(a, b))`.

还可以考虑使用`std::make_pair`而不是直接实例化`std::pair`。它会推断出参数的类型，因此您无需显式填写它们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T22:03:14.890

只需遵循定义：

```
vector<string> v;
v.push_back("mystring");

hashes.insert(std::make_pair("key", v)); 
```

请注意 to 的第二个参数如何`make_pair`是 a `vector<string>`。这将永远不会失败。如果第二个参数是字符串，它将失败。

# python - Python：“NoneType”对象不可订阅：imaplib

> ID：10956512
> 
> 赞同：0
> 
> 时间：2012-06-08T22:00:32.783
> 
> 标签：python, gmail-imap

这在 SO 中有广泛的介绍，所以我提前道歉......但是，我已经浏览了这些帖子并且无法让它发挥作用。

**目标**
想要从 gmail 获取符合特定条件的电子邮件，保存附件，然后删除它们。

**ISSUE**
所以，除了删除电子邮件之外，我可以让一切正常工作。它删除了一些然后我收到此错误：

> 回溯（最后一次调用）：文件“get_overdues.py”，第 22 行，在 email_body = data[0][1] TypeError: 'NoneType' object is unsubscriptable

每次我运行它时，它都会删除更多电子邮件，然后以相同的错误退出。这必须在 cronjob 上运行并且不能作为保姆。

我究竟做错了什么？

```
m = imaplib.IMAP4_SSL("imap.gmail.com")
m.login(user,word)
m.select("INBOX")

searchString = "(SUBJECT \"Daily Mail Notices\")"

resp, items = m.search(None,searchString)
items = items[0].split()

for emailid in items:
    print emailid
    resp, data = m.fetch(emailid, "(RFC822)")
    email_body = data[0][1]
    mail = email.message_from_string(email_body)

    if mail.get_content_maintype() != 'multipart':
        continue

    print "["+mail["From"]+"] :" + mail["Subject"] + mail["Date"]

    sub_dir = re.sub('[,:\- ]','', mail["Date"])

    for part in mail.walk():
        if part.get_content_maintype() == 'multipart':
            continue

        if part.get('Content-Disposition') is None:
            continue

        message_dir = os.path.join(dump_dir, sub_dir)

        if not os.path.exists(message_dir):
            os.makedirs(message_dir)

        filename = part.get_filename()

        counter = 1 
        if not filename:
            filename = 'overdues-%s' % counter
            counter += 1

        att_path = os.path.join(dump_dir, message_dir, filename)

        if not os.path.isfile(att_path) :
            fp = open(att_path, 'wb')
            fp.write(part.get_payload(decode=True))
            fp.close()

    m.store(emailid, '+FLAGS', r'(\Deleted)')
    m.expunge()

m.close()
m.logout() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T22:13:33.380

您的问题显然在于`fetch`：

```
resp, data = m.fetch(emailid, "(RFC822)")
email_body = data[0][1] 
```

它返回 NoneType`data`或者，不太可能， for `data[0]`，并且`None`显然不可下标。您可能需要仔细检查结果，`m.fetch`看看它是否以您期望的形式出现。

这可能是因为这封电子邮件已被删除（而不是删除）。

# actionscript-3 - 减少动作脚本中的图像像素大小？

> ID：10956515
> 
> 赞同：0
> 
> 时间：2012-06-08T22:01:04.810
> 
> 标签：actionscript-3, apache-flex, image-processing

我想将 480 X 480 位图图像大小减小到 30 X 30 像素大小，但保持整个高度和宽度不变。（我不想缩放或使用高度/宽度属性！）

所以如果我除以 480/16 = 30。所以我需要取 30 个像素元素的平均像素值并将其放入新图像中。

如何在 actionscript 3.0 中取平均值？我查看了 getpixels() 方法，他们有任何简单的方法/方法来实现这一点吗？

让我用更简单的方式 - 我试图将位图图像中的像素从 480 X 480 减少到 30 X 30，高度和宽度保持不变，我希望在将图像转换为 30 X 30 后会有一些失真。

我做了缩放，但它减少了宽度和高度，如果我再次增加宽度和高度，它只会恢复正常像素。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T06:28:50.770

为什么不简单地在代码中制作整个图像的副本，而是使用简单的缩放来缩放副本，并且只将其呈现给用户。还可以从 Stack Overflow 中查看

[如何将动态加载的图像调整为闪存（as3）](https://stackoverflow.com/questions/3792979/how-to-resize-dynamically-loaded-image-into-flash-as3)

# objective-c - Cocoa Mac 取消后台进程

> ID：10956516
> 
> 赞同：0
> 
> 时间：2012-06-08T22:01:08.907
> 
> 标签：objective-c, xcode, cocoa

我有一个名为“startTask”的无效方法。

单击按钮时，我在后台启动“startTask”，如下所示：

```
[self performSelectorInBackground:@selector(startTask) withObject:nil]; 
```

我想在单击按钮时取消此过程，但是我不知道如何执行此操作，有人可以帮忙吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T22:05:36.050

我会使用 NSOperation 和 NSOperationQueue。这些允许取消。线程需要更多的工作才能获得信号。

编辑——例如

创建一个继承 NSOperation 的简单类

在您的实现中实现一个`-(void)main(){ }`方法。执行操作时会调用此方法。

在要启动它的文件中，创建 NSOperationQueue 的成员变量。

当您要启动任务时，请创建操作并将其添加到队列中。它将异步运行，您可以取消它。

[这是 iOS 的一个问题，但我相信iPhone 上的 Cocoa NSOperation](https://stackoverflow.com/questions/830218/nsoperation-on-the-iphone)应该是一样的

# algorithm - 刚体几何中位数

> ID：10956523
> 
> 赞同：0
> 
> 时间：2012-06-08T22:02:17.573
> 
> 标签：algorithm, geometry, mathematical-optimization, rigid-bodies

我需要实现适用于刚体的“几何中值”型算法，这意味着它不仅会找到一个点，使与一组点的距离最小化，而且还会考虑到身体的方向。我在任何地方都没有找到此类问题的解决方案，而对于几何中位数（或 Weber 或 Fermat-Torricelli 问题，或设施位置问题），有很多可用信息，包括 Weiszfeld 算法（以及现代改进）。我希望有人能参考可能的解决方案。我原以为这是注册中相对常见的问题，但也许我只是没有找到合适的词来搜索......

我的问题可以表述如下：假设我有一个具有 3 个非共线点（三角形）的“参考”刚体，并且我多次测量 3 个点的坐标（有一些错误，或者对象是移动一点）。我想找到一个好的“中心位置”，它将最小化每个测量点与其对应的中心定位对象点之间的距离总和（不是平方距离）。这等效于“多设施位置问题”，但对“设施”之间的固定距离有额外的限制，并且每个点都预先分配给一个设施（不一定是最近的一个）。

实际上，我在考虑的不是最小化所有点的总和，而是每次测量时只保留 3 个点的最大距离。（这就是所谓的“极小极大”吗？）但我认为这不会对我必须使用的算法类型产生很大影响。

与几何中位数相比，一个可能的困难可能是随着旋转自由度的增加，最小化的数量不再是凸的（不是 100% 肯定，但我认为）。我希望我仍然可以使用与 Weiszfeld 类似的算法（这是一种次梯度方法），并且希望之前已经对此进行了研究。谢谢你的帮助！

PS 我将在 Matlab 中执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T22:56:35.557

我找不到关于这个主题的任何研究。我要做的第一件事是使用没有刚性约束的 Weiszfeld 算法来找到各个点的几何中值，定义与对象边缘与预期值的偏差相对应的拉格朗日乘数，并使用梯度下降来找到受约束的局部最小值。我无法证明它会一直有效，但直观地说，只要偏差足够小，它就应该有效。

# unix - 如何在其生命周期内获得 unix 进程的最大虚拟集大小？

> ID：10956528
> 
> 赞同：0
> 
> 时间：2012-06-08T22:02:40.200
> 
> 标签：unix, process

该`time`命令包含一个格式参数“M”，根据`time`Linux 上的手册页，该参数用于以下用途：

```
Maximum resident set size of the process during its lifetime, in Kilobytes. 
```

但是，它看起来`time`无法测量进程在其生命周期内的最大虚拟集大小。如何在 Linux 上实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T23:21:51.070

编辑：删除了一个没有被问到的问题的答案。

看起来这样做的方法是`VmPeak`从`/prod/[pid]/status`. 参见[过程（5）](http://www.kernel.org/doc/man-pages/online/pages/man5/proc.5.html)

# iphone - 三角计算

> ID：10956529
> 
> 赞同：1
> 
> 时间：2012-06-08T22:02:57.370
> 
> 标签：iphone, math, trigonometry

我认为这将是一个基本问题，但是我缺乏数学技能。

我正在开发一款 iPhone 游戏，人们在其中绘制自己的平台来弹起鸡蛋。

游戏由一个连接 2 个节点的平台组成，每个节点都有一个 x 和 y 值，这个平台可以是任何角度，这取决于用户如何绘制它，当有东西撞击这个平台时，我需要它垂直撞击。我知道我需要多少总功率，我将如何在 X 和 Y 之间分解它。我画了一张图片来更好地解释......

![我的问题的两个示例，每个示例针对不同的方向](../Images/91335be9568b8446236d0039ad537c75.png)

这是两个示例，我对问题的了解是节点的 X 和 Y 坐标，以及虚线垂直线的长度。我需要找到的是 X 和 Y 线的长度，以及 X 是朝正方向还是负方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T22:13:42.287

如果您有两个节点 N1 和 N2，线长为 L，则：

```
ndx = N1.x - N2.x
ndy = N1.y - N2.y
ndist = sqrt(ndx*ndx + ndy*ndy)
x = ndy * L / ndist
y = ndx * L / ndist 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T23:55:00.293

如果您的两个点是`A`和`B`，并且您的线的长度是`L`，您首先需要找到`AB`相对于 x 轴的角度：

```
theta = atan( (B.x - A.x) / (B.y - A.y) ) 
```

有了这个，你可以弄清楚`x`，`y`因此：

```
x = L * cos( theta )
y = L * sin( theta ) 
```

您必须考虑的唯一边缘情况是水平线（在这种情况下，由于在计算 theta 时除以零，计算将失败）。在水平线的情况下，`x=0`并且`y=L`。

# jsf - JSF SelectOneMenu 选定项

> ID：10956532
> 
> 赞同：1
> 
> 时间：2012-06-08T22:03:11.943
> 
> 标签：jsf, selectonemenu

我无法从 SelectOneMenu 中获取所选项目。我为菜单提供了一个 ArrayList，并希望用户选择其中一个。我将菜单放入一个表单中，所以我有一个我打算用来执行选择的命令按钮。这个实现给了我这个错误：当我从菜单“user3”中选择时，无法将 java.lang.String 类型的 user3 转换为 java.util.ArrayList 类，因此它实际上正确地执行了选择。错误指的是这一行

```
<h:selectOneMenu value="#{user.myUsers}" 
```

这是我的 xhtml 生成 selectOneMenu 的部分。

```
 <h:panelGrid columns="3">

                    <h:form>
                    <h:selectOneMenu value="#{user.myUsers}">
                        <f:selectItems value="#{user.myUsers }"/>
                    </h:selectOneMenu>
                    <h:commandButton value="#{msgs.remove_user}" action="#{user.select }" ></h:commandButton>
                    </h:form>
                    <h:outputText value="#{ user.select}"></h:outputText>
            </h:panelGrid> 
```

这是我的 UserBean：

```
 @ManagedBean(name="user")
 @SessionScoped
public class UserBean implements Serializable {

private String selected;

public ArrayList<String> getMyUsers()throws Exception
{
    ArrayList<String> ret;
    MySQLConnection conn = new MySQLConnection();
    try{
        ret = conn.getMyUsers(name);
    }finally
    {
        conn.closeConnection();
    }
    return ret;
}

public String getSelect() throws Exception
{
     if (this.selected==null) return this.getMyUsers().get(0);

     return this.selected;  
}

public void setSelect(String s)
{
    this.selected = s;
}
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-08T23:36:58.483

您的数组列表映射到

```
<f:selectItems value="#{user.myUsers}"/>, 
```

选择后，您尝试将所选值放入同一列表中：

```
<h:selectOneMenu value="#{user.myUsers}"> 
```

`managed bean`您的视图中应该有一些对象（或在您的情况下为字符串），并用`myUsers`. 例如：

```
private String selectedUser; // + appropriate getter and setter 
```

应该`<h:selectOneMenu>`看起来像：

```
<h:selectOneMenu value="#{user.selectedUser}"> 
```

选定的项目将被存储`selectedUser`到 jsf 生命周期结束

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-05T11:11:42.453

```
<table class="tableClass" id="productDescriptionTable">
    <thead>
        <tr class="trPDClass">
            <th class="thPDClass"></th>
            <th class="thPDClass">Feature</th>
            <th class="thPDClass">SubFeature</th>
            `enter code here`<th class="thPDClass">Type</th>
            <th class="thPDClass">Sub-Feature Value</th>
            `enter code here`<th class="thPDClass">Is Active</th>
            <th class="thPDClass">Deleted</th>
        </tr>
    </thead>
    <tbody>
        <tr class="trPDClass">
            <td class="tdPDClass" style="width: 30;" ><input type="checkbox" /></td>
            <td class="tdPDClass"><input type="text" id="0PDfeature" name="PDfeature" /></td>
            <td class="tdPDClass"><input type="text" id="0PDsubFeature" name="PDsubFeature" /></td>
            <td class="tdPDClass"><input type="text" id="0PDtype" name="PDtype" /></td>
            <td class="tdPDClass">
                <div id="0PDsubFeatureValueDiv" name="PDsubFeatureValueDiv"></div>
            </td>
            <td class="tdPDClass">
                <table class="radioClass">
                    <tr>
                        <td width="24%"><input type="radio" name="PDisActive" id="PDisActiveY" value="Y"  /></td>
                        <td width="40%">Yes</td>
                        <td width="20%"><input type="radio" name="PDisActive" id="PDisActiveN" value="N"  /></td>
                        <td width="16%">No</td>
                    </tr>
                </table>
            </td>
            <td class="tdPDClass">
                <table class="radioClass">
                    <tr>
                        <td width="24%"><input type="radio" name="PDdeleted" id="0PDdeletedY" value="Y"  /></td>
                        <td width="40%">Yes</td>
                        <td width="20%"><input type="radio" name="PDdeleted" id="0PDdeletedN" value="N"  /></td>
                        <td width="16%">No</td>
                    </tr>
                </table>
            </td>
        </tr>
    </tbody>
</table> 
```

# sql-server - 如何确保 select 语句为特定列返回空值？

> ID：10956536
> 
> 赞同：2
> 
> 时间：2012-06-08T22:03:32.557
> 
> 标签：sql-server

这可能听起来有点奇怪，但我有一个连接两个表的查询。我正在使用指示返回什么的 IF 语句。一个路径按原样运行查询/连接，另一个需要从第一列返回所有数据，但只返回具有空值的列名。这是我现在的查询：

```
declare @Date DATE = '06/07/2012'
IF @DATE >= GETDATE()    
    BEGIN
        SELECT DisplayName, '' [RegularHours], ''[OvertimeHours] 
        FROM Sites
        ORDER BY DisplayName
    END
    ELSE 
        SELECT sites.DisplayName, hrs.SiteDate, hrs.RegularHrs, hrs.OverTimeHrs
        FROM Sites sites
        left join SiteHours hrs on sites.SiteID = hrs.SiteID
        ORDER BY DisplayName 
```

让我紧张的是，第二列和第三列根本没有值，甚至没有 NULL。我担心这会在以后造成问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T22:07:07.343

如果我正确理解了这个问题，我认为您可以这样做：

```
SELECT DisplayName, NULL as 'RegularHours', NULL as 'OvertimeHours' 
```

# eclipse - 使用maven构建后如何运行项目

> ID：10956538
> 
> 赞同：6
> 
> 时间：2012-06-08T22:03:49.180
> 
> 标签：eclipse, maven, glassfish

我是新手。所以我有一个带有 pom.xml 文件的项目。所以我用maven运行它并且构建成功。我有玻璃鱼。Glassfish 已经单独运行。那么现在用 Glassfish 运行项目的下一步是什么？我的IDE是eclipse。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T22:13:34.483

你必须首先告诉 Maven 构建 WAR，查看这个插件：[http](http://maven.apache.org/plugins/maven-war-plugin/) ://maven.apache.org/plugins/maven-war-plugin/ 。

然后你需要告诉 maven 如何部署到 glassfish，你可以配置一个 Maven 执行插件来做到这一点（见这里：[https](https://www.mojohaus.org/exec-maven-plugin/) ://www.mojohaus.org/exec-maven-plugin/ ）。或者您可以四处寻找专门用于将 maven 与 glassfish 集成的自定义插件。这个看起来很有希望，但我没有使用它： http: [//maven-glassfish-plugin.java.net/](http://maven-glassfish-plugin.java.net/)。

Maven 提供了很多开箱即用的基本功能，但大多数具有构建自动化功能的更酷的东西都是通过插件完成的。

**更新**

只需更新以添加一个非常简单的 Pom 来进行自动部署。注意：如果你只是运行“mvn clean install”，打包设置为“war”，maven 将为你构建 .war 文件并将其放置在 target/ 文件夹中。如果您只是想开始使用，可以手动将其部署到 glassfish。

下面是一个非常简单的 pom 的一部分，它使用 Maven 执行插件作为构建功能自动部署到 glassfish：

```
<build>
  <plugins>
    <plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>exec-maven-plugin</artifactId>
    <executions>
        <execution>
        <goals>
              <goal>exec</goal>
        </goals>
        <phase>install</phase>
        </execution>
    </executions>
    <configuration>
        <executable>${path-to-asadmin-util}</executable>
        <arguments>
            <argument>deploy</argument>
            <argument>--user=${username}]</argument>
            <argument>--passwordfile=${password-file}</argument>
            <argument>--host=localhost</argument>
            <argument>--port=4848</argument>
            <argument>target/${project.name}</argument>
        </arguments>
    </configuration>
 </plugin>
 </plugins>
 </build> 
```

这基本上只是调用 glassfish asadmin 实用程序 [1] 上的部署命令。您需要填写以下变量：

*   `${path-to-asadmin-util}`--> 这是您的 asadmin 实用程序的路径（通常在 glassfish_home/bin 中）
*   `${username}`--> glassfish 管理员用户名
*   `${password-file}`--> 登录 glassfish 管理员的密码文件[2]
*   `${project.name}`--> 你的战争名称

如果你想变得更复杂，我建议看看这个线程：[GlassFish v3 和 glassfish-maven-plugin (Mac)](https://stackoverflow.com/questions/1935137/glassfish-v3-and-glassfish-maven-plugin-mac)。

[1] - [http://docs.oracle.com/cd/E18930_01/html/821-2433/deploy-1.html#SJSASEEREFMANdeploy-1](http://docs.oracle.com/cd/E18930_01/html/821-2433/deploy-1.html#SJSASEEREFMANdeploy-1)

[2] - [http://docs.oracle.com/cd/E18930_01/html/821-2435/ghgrp.html#ghytn](http://docs.oracle.com/cd/E18930_01/html/821-2435/ghgrp.html#ghytn)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-09T13:00:14.967

另外，你应该看看这个 StackOverflow 线程，处理 glassifsh 中的 maven 部署：[https](https://stackoverflow.com/a/1836691/1047365) ://stackoverflow.com/a/1836691/1047365 。

为了进一步了解 Maven，您应该真正阅读这本（免费）书： http: [//www.sonatype.com/books/mvnref-book/reference/](http://www.sonatype.com/books/mvnref-book/reference/)。这是 Maven 的参考。

我们可以向您解释 Maven 正在做什么、生产等等……但是 Sonatype 做出了出色的工作，您可能会通过阅读它学到比我们做不到的更多！

问候。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T23:38:19.760

我发现本教程很有用： http: [//tshikatshikaaa.blogspot.com/2012/05/introduction-to-maven-concepts-crash.html](http://tshikatshikaaa.blogspot.com/2012/05/introduction-to-maven-concepts-crash.html)

# php - 使用mysql文件名更新的php文件上传

> ID：10956539
> 
> 赞同：0
> 
> 时间：2012-06-08T22:03:51.620
> 
> 标签：php, mysql, upload

我正在尝试将这两个脚本（文件上传）和（mysql 更新）结合起来，以便将图像文件都上传到正确的文件夹，然后在 mysql 数据库中更新文件路径。我知道 $sql 更新查询是错误的，这就是我的麻烦所在。任何帮助都会很棒。

```
//db connection
require "connect.db.php";

if ((($_FILES["file"]["type"] == "image/gif")
|| ($_FILES["file"]["type"] == "image/jpeg")
|| ($_FILES["file"]["type"] == "image/pjpeg"))
&& ($_FILES["file"]["size"] < 20000))
  {
  if ($_FILES["file"]["error"] > 0)
    {
    echo "Return Code: " . $_FILES["file"]["error"] . "<br />";
    }
  else
    {
    echo "Upload: " . $_FILES["file"]["name"] . "<br />";
    echo "Type: " . $_FILES["file"]["type"] . "<br />";
    echo "Size: " . ($_FILES["file"]["size"] / 1024) . " Kb<br />";
    echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br />";

    if (file_exists("upload/" . $_FILES["file"]["name"]))
      {
      echo $_FILES["file"]["name"] . " already exists. ";
      }
    else
      {
      move_uploaded_file($_FILES["file"]["tmp_name"],
      "upload/" . $_FILES["file"]["name"]);
      echo "Stored in: " . "upload/" . $_FILES["file"]["name"];
      }
    }
  }
else
  {
  echo "Invalid file";
  }

// update data in mysql database
$sql="UPDATE `characters` SET ch_image='/upload/$_FILES["file"]["name"]' WHERE ID='$id'";
$result=mysql_query($sql);

// if successfully updated.
if($result){
echo "Successful";
echo "<BR>";
echo "<a href='test.html'>View result</a>";
touch('../file.html');
clearstatcache();
}

else {
echo "Whoops: " . mysql_error(); ;
}
mysql_close();
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T22:08:55.890

改成`$sql`这个

```
$sql="UPDATE `characters` SET ch_image='/upload/" . $_FILES['file']['name'] . "' WHERE ID='$id'"; 
```

# process - Heroku Scheduler 任务需要花钱吗？

> ID：10956540
> 
> 赞同：29
> 
> 时间：2012-06-08T22:03:59.187
> 
> 标签：process, heroku, scheduler

我一直在阅读 Heroku 的文档，但发现它很混乱。我有一个应用程序，它有一个基于 Web 的前端（带有 Web 进程）和一个由 Heroku Scheduler 设置为每天午夜运行的任务（显示`heroku ps`为`run.1`）。

所以，我的`heroku ps`样子是这样的：

```
Process  State       Command
-------  ----------  ------------------------------------
run.1    up for 21h  python webpage/listings.py
web.1    up for 8m   python ./manage.py runserver 0.0.0.. 
```

我想弄清楚的是，这是否被认为是两个测功机？该`run`任务是否被视为后台任务？

**主要问题：这会花钱吗？**

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-06-08T22:50:41.940

是的，[Heroku 调度程序](https://addons.heroku.com/scheduler)会累积使用量，并且如果您每个应用程序每个月超过[750 个免费测功小时，则需要付费。](https://devcenter.heroku.com/articles/usage-and-billing#750-free-dyno-hours-per-app)只要您保持在该限制范围内，您就不会被收费。

[调度程序运行一次性 dynos](https://devcenter.heroku.com/articles/scheduler#dyno-hour-costs)，它会像常规 dynos 一样累积使用量。它们将在您的 Heroku 发票中显示为“调度程序”测功机类型。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-12T03:34:14.507

有 750 小时的空闲时间。

在计费中，dynos 分为四组：worker（后台 dynos）、web dynos、rake 和一次性进程（当执行“heroku run”时，例如由调度程序使用）。

更多信息请访问[https://devcenter.heroku.com/articles/usage-and-billing](https://devcenter.heroku.com/articles/usage-and-billing)

# functional-programming - “绑定”可以在 List monad 上做一个 reduce 吗？

> ID：10956541
> 
> 赞同：4
> 
> 时间：2012-06-08T22:04:09.780
> 
> 标签：functional-programming, monads

我知道如何使用仅使用“绑定”操作的 list monad来执行与 Scheme（或 Python）`map`和函数等效的操作。`filter`

这里有一些 Scala 来说明：

```
scala> // map
scala> List(1,2,3,4,5,6).flatMap {x => List(x * x)}                        
res20: List[Int] = List(1, 4, 9, 16, 25, 36)

scala> // filter    
scala> List(1,2,3,4,5,6).flatMap {x => if (x % 2 == 0) List() else List(x)}
res21: List[Int] = List(1, 3, 5) 
```

在 Haskell 中也是一样的：

```
Prelude> -- map
Prelude> [1, 2, 3, 4, 5, 6] >>= (\x -> [x * x])
[1,4,9,16,25,36]

Prelude> -- filter
Prelude> [1, 2, 3, 4, 5, 6] >>= (\x -> if (mod x 2 == 0) then [] else [x])
[1,3,5] 
```

Scheme 和 Python 也有一个经常与和`reduce`组合的函数。该函数使用提供的二元函数组合列表的前两个元素，然后将结果组合到下一个元素，依此类推。计算值列表的总和或乘积的常见用途。这里有一些 Python 来说明：`map``filter``reduce`

```
>>> reduce(lambda x, y: x + y, [1,2,3,4,5,6])
21
>>> (((((1+2)+3)+4)+5)+6)
21 
```

有什么方法可以`reduce`仅使用列表单子上的绑定操作来完成此操作？如果 bind 不能自行执行此操作，那么执行此操作的最“单子”方式是什么？

如果可能，请在回答时限制/避免使用语法糖（即：`do`Haskell 中的符号或 Scala 中的序列理解）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T22:43:49.697

绑定操作的定义属性之一是结果仍然在 monad¹“内部”。因此，当您对列表执行绑定时，结果将再次成为列表。由于reduce操作²通常会导致列表以外的内容，因此不能用绑定操作来表示。

除此之外，列表上的绑定操作（即 concatMap/flatMap）一次只查看一个元素，并且无法重用前面步骤的结果。因此，即使我们可以将结果包装在单元素列表中，也无法仅使用 monad 操作来做到这一点。

* * *

¹因此，如果您的类型允许您对其执行除由 monad 类型类定义的操作之外的任何操作，则您永远无法“突破” monad。这就是使 IO monad 起作用的原因。

² 顺便说一句，在 Haskell 和 Scala 中称为 fold。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-09T21:39:28.503

> 如果 bind 不能自行执行此操作，那么执行此操作的最“单子”方式是什么？

虽然@sepp2k 给出的答案是正确的，但有一种方法可以`reduce`对列表进行类似操作，但使用 product 或“writer” monad 和对应于将*product monad**分布*在*列表 functor*上的操作。

 **定义是：

```
import Control.Monad.Writer.Lazy
import Data.Monoid

reduce :: Monoid a => [a] -> a
reduce xs = snd . runWriter . sequence $ map tell xs 
```

让我打开包装：

*   `Writer`monad 有一个数据类型`Writer w a`，它基本上是一个值`a`和“写入”值的元组（乘积） `w`。写入值的类型`w`必须是*monoid*，其中 monad 的*绑定*操作`Writer`定义如下：

    ```
     (w, a) >>= f = let (w', b) = f a in (mappend w w', b) 
    ```

    即获取传入的写入值和结果写入值，并使用幺半群的二元运算将它们组合起来。

*   该`tell`操作写入一个值，`tell :: w -> Writer w ()`。因此`map tell`具有类型`[a] -> [Writer a ()]`，即一元值列表，其中原始列表的每个元素都已“写入”到单子中。

*   `sequence :: Monad m => [m a] -> m [a]`对应于列表和 monad 之间的*分配法则*，即在列表类型上分配 monad 类型；`sequence`可以根据绑定定义为：

    ```
    sequence [] = return []
    sequnece (x:xs) = x >>= (\x' -> (sequence xs) >>= (\xs' -> return $ x':xs')) 
    ```

    （[实际上是在`Prelude`uses`foldr`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/src/Control-Monad.html#sequence)中的实现，是类归约用法的线索）

    因此，`sequence $ map tell xs`有类型`Writer a [()]`

*   该`runWriter`操作解包`Writer`类型 ,`runWriter :: Writer w a -> (a, w)`在这里组成`snd`以投影出累积值。

s列表的一个示例用法`Int`是使用 monoid 实例：

```
 instance Monoid Int where
              mappend = (+)
              mempty = 0 
```

然后：

```
 > reduce ([1,2,3,4]::[Int])
  10 
```**

# c++ - C ++ sans cmath库中的GCD函数

> ID：10956543
> 
> 赞同：25
> 
> 时间：2012-06-08T22:04:20.743
> 
> 标签：c++, greatest-common-divisor

我正在编写一个混合数字类，需要一个快速简单的“最大公约数”函数。谁能给我代码或代码链接？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-12-18T17:05:28.200

libstdc++ 算法库有一个隐藏的 gcd 函数（我使用的是 g++ 4.6.3）。

```
#include <iostream>
#include <algorithm>

int main()
{
  cout << std::__gcd(100,24);
  return 0;
} 
```

不客气 ：）

更新：正如@chema989 所指出的，在 C++17 中，头文件`std::gcd()`提供了可用的功能。`<numeric>`

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2012-06-08T22:10:37.783

我很想投票结束——似乎很难相信很难找到一个实现，但谁知道呢。

```
template <typename Number>
Number GCD(Number u, Number v) {
    while (v != 0) {
        Number r = u % v;
        u = v;
        v = r;
    }
    return u;
} 
```

在 C++ 17 或更高版本中，您可以`#include <numeric>`使用 , 和使用`std::gcd`（如果您关心 gcd，那么您很有可能也会对`std::lcm`添加的内容感兴趣）。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-06-08T22:13:51.273

快速递归版本：

```
unsigned int gcd (unsigned int n1, unsigned int n2) {
    return (n2 == 0) ? n1 : gcd (n2, n1 % n2);
} 
```

或等效的迭代版本，如果您强烈反对递归^((a))：

```
unsigned int gcd (unsigned int n1, unsigned int n2) {
    unsigned int tmp;
    while (n2 != 0) {
        tmp = n1;
        n1 = n2;
        n2 = tmp % n2;
    }
    return n1;
} 
```

只需用您自己的数据类型、零比较、赋值和取模方法替换（例如，如果您使用一些非基本类型`bignum`，例如类）。

这个函数实际上来自[我的一个较早的答案，](https://stackoverflow.com/questions/1186414/whats-the-algorithm-to-calculate-aspect-ratio-i-need-an-output-like-43-169/1186465#1186465)用于计算屏幕尺寸的整数纵横比，但原始来源是我很久以前学习的欧几里得算法，如果你想知道它背后的数学，请[在 Wikipedia 上详细说明。](http://en.wikipedia.org/wiki/Euclidean_algorithm)

* * *

^((a))一些递归解决方案的问题在于，它们接近答案的速度如此之慢，以至于在到达那里之前往往会用完堆栈空间，例如经过深思熟虑的想法（伪代码）：

```
def sum (a:unsigned, b:unsigned):
    if b == 0: return a
    return sum (a + 1, b - 1) 
```

`sum (1, 1000000000)`当您（尝试）使用十亿左右的堆栈帧时，您会发现这非常昂贵。递归的理想用例类似于二进制搜索，每次迭代将解决方案空间减少一半。最大公约数也是解决方案空间迅速减少的公约数，因此对大量堆栈使用的担忧是没有根据的。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-04-28T23:54:53.117

对于 C++17，您可以使用`std::gcd`在 header 中定义`<numeric>`：

```
auto res = std::gcd(10, 20); 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-06-08T22:16:25.873

[欧几里得](http://en.wikipedia.org/wiki/Euclidean_algorithm#Description)算法很容易用 C 语言编写。

```
int gcd(int a, int b) {
  while (b != 0)  {
    int t = b;
    b = a % b;
    a = t;
  }
  return a;
} 
```

# c - C-ares 获取 ns 记录

> ID：10956547
> 
> 赞同：3
> 
> 时间：2012-06-08T22:04:36.143
> 
> 标签：c, dns, c-ares

我正在使用[c-ares](http://c-ares.haxx.se/)进行**DNS**查询。问题是，我不知道如何获得**NS**值。我没有找到任何示例，文档对我来说还不够:(

[ares_parse_ns_reply](http://c-ares.haxx.se/ares_parse_ns_reply.html)的手册页仅提供函数描述。我已经创建了我的频道并弄清楚如何进行**gethostbyname**查询：

```
 // ...
    status = ares_init_options(&channel, &options, optmask);
    if (status != ARES_SUCCESS) {
        printf("ares_init_options: %s\n", ares_strerror(status));
        return EXIT_FAILURE;
    }
    // ...
    ares_gethostbyname(channel, "stackoverflow.com", AF_INET, callback, NULL);
    // ... 
```

但是接下来我该怎么做才能获得 MX/NS/AAAA 记录？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-10T16:59:57.323

几个小时后：

```
static void callback_ns(void *arg, int status, int timeouts, unsigned char *abuf, int alen)
{
   struct hostent *host = NULL;
   ares_parse_ns_reply(abuf, alen, &host)
   // your result now in "host" variable
}

ares_query(channel, "stackoverflow.com", ns_c_in, ns_t_ns, callback_ns, NULL); 
```

# jquery - jquery-in-footer 代码优化（理论）

> ID：10956556
> 
> 赞同：5
> 
> 时间：2012-06-08T22:05:36.927
> 
> 标签：jquery, optimization, footer

我正在使用各种 jquery 插件，包括延迟加载、scrollTo、图像效果以及从阅读本网站上人们的帖子中收集的各种片段。现在，所有这些效果都会从页脚触发，就像发生了延迟一样。效果就像，犹豫不决，或神经质，或不顺畅。

我已经尝试过使用文档就绪与窗口加载，并且我在标题中有一个片段来防止 FOUC，但我感觉那里存在排队问题，或者内存过载或其他问题。（这就像当您尝试使用运行太多程序的笔记本电脑时，一切都感觉又重又慢。）

尤其是在歌剧中。出于某种原因，就像 Opera 无法处理我的网站一样。

对我来说，一些 jquery 效果会造成这样的问题是没有意义的。人们玩激烈的电子游戏，没问题，但一个具有淡入淡出效果的网站突然让计算机无法处理？我的页脚代码一定有问题。

所以关于我的理论问题 -

有没有我需要开始遵循的标准做法，以确保所有这些 jquery 效果运行更顺畅，占用更少的内存，不相互冲突，或者其他什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T22:11:49.960

那么首先你需要弄清楚是**你**的JavaScript/jQuery 代码减慢了网页还是插件。换句话说，[分析](http://getfirebug.com/wiki/index.php/Profiler)您的代码。

完成后，您就可以开始优化了。有很多文章讨论优化 jQuery。

*   [http://24ways.org/2011/your-jquery-now-with-less-suck](http://24ways.org/2011/your-jquery-now-with-less-suck)
*   [http://hungred.com/useful-information/jquery-optimization-tips-and-tricks/](http://hungred.com/useful-information/jquery-optimization-tips-and-tricks/)
*   [http://addyosmani.com/blog/8-jquery-performance-tips/](http://addyosmani.com/blog/8-jquery-performance-tips/)

一些技巧：

*   ID 选择器本身很快，因为它们被委托给`getElementById()`，这由浏览器进行了大量优化。
*   缓存 jQuery 选择器。也就是说，不要`$('.class1 #id2 > child3')`连续调用 10 次。将其保存在变量上，例如`var $mytd`

如果问题出在插件上，那么您的选择将更加有限。但是你可以尝试一些事情：

*   确保它们被缩小以便它们快速加载（传输文件不仅需要时间，而且还需要读取，因为它们没有被编译）
*   寻找轻量级的替代品。例如，如果您只需要淡入淡出效果，请不要包含完整的 50 kb jQuery 库。

Opera 应该非常快，至少从我听到的情况来看是这样。但是，如果您使用 IE 进行测试，预计它会很慢。他们的 JavaScript 引擎不是很好。

# android - 升级我从 assets 文件夹中复制的 sqlite 数据库（Android）

> ID：10956557
> 
> 赞同：7
> 
> 时间：2012-06-08T22:05:47.327
> 
> 标签：android, sqlite

我使用本教程： [教程自定义数据库](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)

我从资产文件夹复制数据库并将其复制到我的设备（或模拟器）。一切都是正确的。我从 DDMS 的角度来看我的数据库。但我有时也想升级我的数据库，所以我做了：

```
super(context, DB_NAME, null, 2); //changed version from 1 to 2 
```

并修改 onUpgrade 方法：

```
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    if(newVersion > oldVersion){
        this.myContext.deleteDatabase(DB_NAME);
        try {
            this.copyDataBase();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

但运行后，我的设备上仍有旧版本的数据库。如何删除旧版本的数据库并复制新版本。DB_NAME 是我的数据库名称（带格式，但不带路径）， copyDataBase() 是将数据库复制到设备的方法（它可以工作）。

我粘贴我的所有代码：

```
public class DataBaseHelper extends SQLiteOpenHelper{

    private static String DB_PATH = "/data/data/sitcom.quiz/databases/";

    private static String DB_NAME = "sitcoms.sqlite";

    private SQLiteDatabase myDataBase; 

    private final Context myContext;

    public DataBaseHelper(Context context) {

        super(context, DB_NAME, null, 4);
        this.myContext = context;
    }   

    public void createDataBase() throws IOException{

        boolean dbExist = checkDataBase();

        if(dbExist){
            //do nothing - database already exist
        }else{

            this.getReadableDatabase();

            try {

                copyDataBase();

            } catch (IOException e) {

                throw new Error("Error copying database");

            }
        }

    }

    private boolean checkDataBase(){

        SQLiteDatabase checkDB = null;

        try{
            String myPath = DB_PATH + DB_NAME;
            checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

        }catch(SQLiteException e){
            //database does't exist yet.
        }

        if(checkDB != null){
            checkDB.close();
        }

        return checkDB != null ? true : false;
    }

    private void copyDataBase() throws IOException{

        //Open your local db as the input stream
        InputStream myInput = myContext.getAssets().open(DB_NAME);

        // Path to the just created empty db
        String outFileName = DB_PATH + DB_NAME;

        //Open the empty db as the output stream
        OutputStream myOutput = new FileOutputStream(outFileName);

        //transfer bytes from the inputfile to the outputfile
        byte[] buffer = new byte[1024];
        int length;
        while ((length = myInput.read(buffer))>0){
            myOutput.write(buffer, 0, length);
        }

        //Close the streams
        myOutput.flush();
        myOutput.close();
        myInput.close();

    }

    public void openDataBase() throws SQLException{

        //Open the database
        String myPath = DB_PATH + DB_NAME;
        myDataBase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

    }

    @Override
    public synchronized void close() {

            if(myDataBase != null)
                myDataBase.close();

            super.close();

    }

    @Override
    public void onCreate(SQLiteDatabase db) {

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        Log.d("adas", "dasd");

        if(newVersion > oldVersion){
            String myPath = DB_PATH + DB_NAME;
            this.myContext.deleteDatabase(myPath);
            try {
                this.copyDataBase();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }

} 
```

和我的活动：

```
DataBaseHelper myDbHelper = new DataBaseHelper(this);
        myDbHelper = new DataBaseHelper(this);

        try {
            myDbHelper.createDataBase();
        } catch (IOException ioe) {
            throw new Error("Unable to create database");
        }
        try {
            myDbHelper.openDataBase();
        }catch(SQLException sqle){
            throw sqle;
        } 
```

谢谢，如果你能给我理由或只是暗示为什么这不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T23:36:23.623

调用函数 onUpgrade() 时，android 已经打开了数据库。我认为目前无法删除它。检查日志以获取更多信息。如果你想这样做，你需要将删除和复制代码移动到数据库尚未打开的地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T13:06:36.673

试试这个代码......我认为它会解决你的问题。

```
public void onUpgrade(SQLiteDatabase database, int oldVersion,
        int newVersion) {
    Log.w(DatabaseHelper.class.getName(),
            "Upgrading database from version " + oldVersion  + " to "
                    + newVersion + ", which will destroy all old data");
    database.execSQL("DROP TABLE IF EXISTS " + DATABASE_NAME);
    onCreate(database);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-27T06:29:31.330

从资产复制数据库时，默认版本为 0。在从资产复制数据库的方法中，使用`setVersion(int version)`数据库对象的方法设置其版本。如果 db 存在，则通过`getVersion()`数据库对象上的方法检查其版本。现在自己处理它的 onUpgrade ，即如果 db evrsion 已更新 noe，则升级数据库，然后`setVersion(int new dbVersion)`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T06:59:52.870

您可以在升级数据库之前删除旧数据库。

```
 if(dbExist){
                Log.v("com.db","db exists");
                myContext.deleteDatabase(DB_NAME);`enter code here`
                //openDataBase();
                //do nothing - database already exist
            }else{
                Log.v("com.db","dbnot exists");
                //By calling this method and empty database will be created into the default system path
                   //of your application so we are gonna be able to overwrite that database with our database.
                this.getReadableDatabase();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-20T23:18:10.090

只是一个补充：

在 createDataBase() 中有以下检查；

this.getReadableDatabase();

这将检查是否已经存在具有所提供名称的数据库，如果没有，则创建一个空数据库，以便可以用 assets 文件夹中的数据库覆盖它。在较新的设备上，这可以完美运行，但在某些设备上这不起作用。主要是旧设备。我不知道确切原因，但似乎 getReadableDatabase() 函数不仅获取数据库而且还打开它。如果您随后从 assets 文件夹中复制数据库，它仍然具有指向空数据库的指针，您将收到 table does not exist 错误。

因此，为了使其适用于所有设备，您应该将其修改为以下几行：

```
SQLiteDatabase db = this.getReadableDatabase();
if (db.isOpen()){
    db.close();
} 
```

即使在检查中打开了数据库，之后也关闭了，也不会给你带来任何麻烦。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-05T02:42:34.647

主要思想是您应该在创建新数据库时使用**SharedPreferences**来存储数据库版本。
之后，当您创建数据库时，您必须检查数据库是否有新版本，然后删除旧数据库并创建新数据库
此代码适用于我

```
private static class DatabaseHelper extends SQLiteOpenHelper {

        private static final String DATABASE_NAME = "database.name";
        private static final int DATABASE_VERSION = 1;
        private static final String KEY_DB_VER = "database_version";
        private final Context mContext;

        public DatabaseHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
            mContext = context;
            initialize();
        }

        /**
         * Initializes database. Creates database if doesn't exist.
         */
        private void initialize() {
            if (databaseExists()) {
                SharedPreferences prefs = PreferenceManager
                        .getDefaultSharedPreferences(mContext);
                int dbVersion = prefs.getInt(KEY_DB_VER, 1);
                //
                if (DATABASE_VERSION != dbVersion) {
                    File dbFile = mContext.getDatabasePath(DATABASE_NAME);
                    // delete the old databse   
                    if (!dbFile.delete()) {
                        Log.w(TAG, "Unable to update database");
                    }
                }
            }
            // create database if needed
            if (!databaseExists()) {
                createDatabase();
            }
        }

        /**
         * Returns true if database file exists, false otherwise.
         * @return
         */
        private boolean databaseExists() {
            File dbFile = mContext.getDatabasePath(DATABASE_NAME);
            return dbFile.exists();
        }

        public void createDataBase() throws IOException {
            // If database not exists copy it from the assets
            boolean mDataBaseExist = databaseExists();

            if (!mDataBaseExist) {
                this.getReadableDatabase();
                this.close();
                try {
                    // Copy the database from assests
                    copyDataBase();

                    //**save the database version by SharedPreferences**

                    SharedPreferences prefs = PreferenceManager
                            .getDefaultSharedPreferences(mContext);
                    SharedPreferences.Editor editor = prefs.edit();
                    editor.putInt(KEY_DB_VER, DATABASE_VERSION);
                    editor.commit();

                    Log.e(TAG, "createDatabase database created");

                } catch (IOException mIOException) {
                    throw new Error("ErrorCopyingDataBase");
                }
            }
        }

        // Copy the database from assets
        private void copyDataBase() throws IOException {
            Log.i("TAG", "copy database");
            InputStream mInput = mContext.getAssets().open(DB_NAME);
            String outFileName = DB_PATH + DB_NAME;
            OutputStream mOutput = new FileOutputStream(outFileName);
            byte[] mBuffer = new byte[1024];
            int mLength;
            while ((mLength = mInput.read(mBuffer)) > 0) {
                mOutput.write(mBuffer, 0, mLength);
            }
            mOutput.flush();
            mOutput.close();
            mInput.close();
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion,
                int newVersion) {
        }
    } 
```

# python - OS X 蓝牙编程

> ID：10956563
> 
> 赞同：3
> 
> 时间：2012-06-08T22:06:47.467
> 
> 标签：python, objective-c, macos, bluetooth, mindstorms

我想创建 OS X 应用程序以通过蓝牙与 Lego Mindstorms NXT 2.0 一起使用。

我尝试使用 Objective C 和 Python 来实现，但是两者都有一些问题。

关于目标 C：

我只找到[了这个](https://developer.apple.com/library/mac/#documentation/DeviceDrivers/Conceptual/Bluetooth/BT_Intro/BT_Intro.html)文档。有关于使用 plist-file 进行配置的说明，但没有提供此类 plist 文件的示例，只有图中的一些数据。在哪里得到它？也许我做错了什么？此外，还有一些对 /Developer 目录的引用，该目录不存在。

关于 Python：

我找到[了 nxt-python](http://code.google.com/p/nxt-python/)，但它不适用于 10.7。我尝试安装[lightblue](http://lightblue.sourceforge.net/)，按照 10.6 的说明执行所有操作，它在运行 setup.py 时停止输出：

```
running install
running build
running build_py
running install_lib
running install_egg_info
Removing /Library/Python/2.7/site-packages/lightblue-0.4-py2.7.egg-info
Writing /Library/Python/2.7/site-packages/lightblue-0.4-py2.7.egg-info 
```

PyBluez 也是如此。

你能推荐什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-04-18T22:59:39.323

pyobjc [-framework-CoreBluetooth](https://pypi.org/project/pyobjc-framework-CoreBluetooth/)包应该允许您通过 Python 与 macOS CoreBluetooth 模块进行交互。

另一种选择是使用完全独立于平台的蓝牙 LE 堆栈，例如[Bluegiga BLED112 加密狗](https://www.silabs.com/products/wireless/bluetooth/bluetooth-low-energy-modules/bled112-bluetooth-smart-dongle)上提供的堆栈，并使用[pygatt](https://pypi.org/project/pygatt/3.2.0/)包与之交互。

# c# - 上传后图片损坏

> ID：10956569
> 
> 赞同：0
> 
> 时间：2012-06-08T22:07:17.360
> 
> 标签：c#, asp.net, file-upload

我的图像保存方法遇到了一个非常奇怪的问题。首先，方法如下：

```
 public static void uploadImageToServer(string savePath, HttpPostedFile imageToUpload, bool overwrite)
        {
                byte[] myData = new Byte[imageToUpload.ContentLength];
                imageToUpload.InputStream.Read(myData, 0, imageToUpload.ContentLength);

                FileStream newFile = new FileStream(savePath, FileMode.Create);
                newFile.Write(myData, 0, myData.Length);
                newFile.Close();
} 
```

从输入参数可以看出，此方法与 FileUpload 控件结合使用。现在我在两个都有 FileUpload 控件的页面中使用这个方法。在一个页面上，图像上传文件，在另一页面上，它导致文件损坏。

我真的不知道为什么图像被破坏了。我使用相同的图像、相同的方法和相同的输入控件。

有什么办法可以调试吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T22:15:13.553

要窃取alexn的答案<_<

你太复杂了。只需使用为您提供的内置[FileUpload::SaveAs(save_path)](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.fileupload.saveas.aspx)。

您可以使用该`Server.MapPath()`方法帮助您获得根目录的动态路径，从那里开始并将文件名附加到它。
不知道你为什么会收到这个错误。我最好的猜测是你`savePath`的坏了（或附加的文件名/扩展名），或者字节没有被完美地读取/写入。无论如何，你不应该使用我描述的方法得到那个错误（考虑到你不不要弄乱文件扩展名:)。

# javascript - 为什么我的动态添加的边框在 IE8 中不显示？

> ID：10956570
> 
> 赞同：0
> 
> 时间：2012-06-08T22:07:18.107
> 
> 标签：javascript, dhtml

我[在 jsfiddle 上](http://jsfiddle.net/GYBNy/1/)使用此代码向表格动态添加边框，它适用于 FF 和 Chrome，但在 IE8 中不起作用（或抛出任何错误）。谁能告诉我怎么了？

[编辑] 这不完全是对特定问题的答案，但我真正问题的最佳解决方案是动态设置（添加）一个 css 类 - 这适用于我关心的所有浏览器：

CSS：

```
td.bleft {
border-left:2px solid black;
} 
```

JS 代码（其中“cell”指的是一个 td 元素）：

```
cell.className += " bleft"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T22:10:23.487

作为猜测，我会尝试`style.borderRight`而不是`style['border-right']`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T22:11:02.713

您必须按各个部分更新复合“便利”样式。[你的小提琴，更新了。](http://jsfiddle.net/GYBNy/3/)

这是代码：

```
for (var i = 0; i < tbl.rows.length; i++) {
    tbl.rows[i].cells[0].style["borderRightWidth"] = "2px";
    tbl.rows[i].cells[0].style["borderRightColor"] = "black";
    tbl.rows[i].cells[0].style["borderRightStyle"] = "solid";
} 
```

你的对我来说在 Firefox 中不起作用（直到我改变它）。

# .net - .NET - 合并表不覆盖

> ID：10956571
> 
> 赞同：0
> 
> 时间：2012-06-08T22:07:19.510
> 
> 标签：.net, merge, datatable, overwrite

在我的 winform 应用程序中，我使用以下代码合并两个表：

```
 ldtDestinationData.Merge(ldtSourceData, False, MissingSchemaAction.Add) 
```

但问题是我的 SourceData 表的 RowState 已添加，我的 DestinationTable 的行状态已修改；因此它不会覆盖目标表中的值。

下面是一个参考，我从 msdn 得到，它证明了我上面所说的：

> 如果传入行的 RowState 为已添加，并且现有行的 RowState 为未更改、已修改或已删除，则现有行的 RowState 设置为已修改。此外，现有行的原始行版本中的数据不会被传入行中的数据覆盖，因为传入行没有原始行版本。

有没有办法以某种方式覆盖目标表中的更改，或者是否有办法更改源表的行状态，以便可以覆盖目标表中的更改？

请建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T22:30:06.957

没关系.. 我得到了解决方案，即 AcceptChanges 提交对表所做的更改并将行状态更改为未更改，这使得覆盖目标表中的更改成为可能。

# actionscript-3 - 使用 Air as3 flash 压缩许多文件

> ID：10956573
> 
> 赞同：0
> 
> 时间：2012-06-08T22:07:39.963
> 
> 标签：actionscript-3, flash, air, zip, zipfile

好的 。我相当有能力，但仍在学习。这是针对我在 AIR 中编写的程序。基本上我需要从给定文件夹中获取混合类型和内容的文件并将它们压缩。

这是我放在一起的代码，它有点工作。我遇到的问题是 zip 中的文件都包含零字节。实际上是空的。我错过了什么或做错了什么？

```
import flash.filesystem.File;
import flash.events.Event;
import deng.fzip.*;

var directory:File = File.desktopDirectory.resolvePath("FOLDER/");

var zip:FZip = new FZip(); 
var files:Array = directory.getDirectoryListing();
for(var i:uint = 0; i < files.length; i++)
{
    zip.addFile(files[i].name, files[i].data);
    trace(files[i].name);
}

var ba:ByteArray = new ByteArray(); 
zip.serialize(ba); 
ba.position = 0; 
var finalZIP:File = File.desktopDirectory.resolvePath("TEST.zip"); 
var fs:FileStream = new FileStream(); 
fs.open(finalZIP, FileMode.WRITE); 
fs.writeBytes(ba); 
fs.close(); 
```

EDIT=：运行代码时，我在错误面板中注意到了这一点。

```
 ....app\scripts_classes\deng\fzip\FZipFile.as, Line 362   Warning: 1106: Empty statement found where block of code expected. Did you type ';'     accidentally? 
```

从我所看到的似乎很好，但是我没有编写 Fzip 脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T01:53:03.163

[`File.data`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/FileReference.html#data)仅在调用 后填充`File.load`。

对于字节的同步加载，请查看`FileStream`. [这些文档](http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118666ade46-7dc2.html)给出了概要。

# javascript - 为什么 XMLHttpRequest ProgressEvent.lengthComputable 可能为假？

> ID：10956574
> 
> 赞同：13
> 
> 时间：2012-06-08T22:07:45.657
> 
> 标签：javascript, ajax, xmlhttprequest

我正在尝试通过使用 XMLHttpRequest level 2 对进度事件的支持以 HTML5 方式实现上传进度条。

在您看到的每个示例中，方法是将事件侦听器添加到进度事件，如下所示：

```
req.addEventListener("progress", function(event) {
    if (event.lengthComputable) {
        var percentComplete = Math.round(event.loaded * 100 / event.total);
        console.log(percentComplete);
    }
}, false); 
```

这样的例子似乎总是假设 event.lengthComputable 为真。毕竟，浏览器肯定知道它发送的请求的长度吗？

无论我做什么，event.lengthComputable 都是错误的。我已经在 OSX 上的 Safari 5.1.7 和 Firefox 12 中对此进行了测试。

我的网站是使用 Django 构建的，我在开发和生产设置中遇到了同样的问题。

我用来生成表单上传的完整代码如下所示（使用 jQuery）：

```
form.submit(function() {
    // Compile the data.
    var data = form.serializeArray();
    data.splice(0, 0, {
        name: "file",
        value: form.find("#id_file").get(0).files[0]
    });
    // Create the form data.
    var fd = new FormData();
    $.each(data, function(_, item) {
        fd.append(item.name, item.value);
    });
    // Submit the data.
    var req = new XMLHttpRequest();
    req.addEventListener("progress", function(event) {
        if (event.lengthComputable) {
            var percentComplete = Math.round(event.loaded * 100 / event.total);
            console.log(percentComplete);
        }
    }, false);
    req.addEventListener("load", function(event) {
        if (req.status == 200) {
            var data = $.parseJSON(event.target.responseText);
            if (data.success) {
                console.log("It worked!")
            } else {
                console.log("It failed!")
            }
        } else {
            console.log("It went really wrong!")
        }
    }, false);
    req.addEventListener("error", function() {
        console.log("It went really really wrong!")
    }, false);
    req.open("POST", "/my-bar/media/add/");
    req.setRequestHeader("X-Requested-With", "XMLHttpRequest");
    req.send(fd);
    // Don't really submit!
    return false;
}); 
```

我已经为此扯了几个小时的头发。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-07-05T12:03:57.793

嘿，我从@ComFreek找到[了答案：](https://stackoverflow.com/a/9707877/41948)

我犯了同样的错误。

我写的那一行是：

```
xhr.onprogress = uploadProgress; 
```

正确的应该是

```
xhr.upload.onprogress = uploadProgress; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-08T10:25:21.433

看看这个： [https ://developer.mozilla.org/en-US/docs/Using_files_from_web_applications](https://developer.mozilla.org/en-US/docs/Using_files_from_web_applications)

xhr.upload.addEventListener('progress',function(e){}) 也可以。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-09T14:24:45.760

我也有使用 AJAX (xmlhttprequest) 发送多个大文件的问题。

找到了一个解决方案，这是我使用的整个脚本。您只需要在 HTML 页面中放置下一行：

```
<input type="file" multiple name="file" id="upload_file" onchange="handleFiles(this)"> 
```

并使用下一个脚本：

```
<script type="text/javacript">
    var filesArray;
    function sendFile(file)
    {
        var uri = "<URL TO PHP FILE>";
        var xhr = new XMLHttpRequest();
        var fd = new FormData();

        var self = this;

        xhr.upload.onprogress = updateProgress;
        xhr.addEventListener("load", transferComplete, false);
        xhr.addEventListener("error", transferFailed, false);
        xhr.addEventListener("abort", transferCanceled, false);
        xhr.open("POST", uri, true);
        xhr.onreadystatechange = function() {
            if (xhr.readyState == 4 && xhr.status == 200) {
                alert(xhr.responseText); // handle response.
            }
        };
        fd.append('myFile', file);
        // Initiate a multipart/form-data upload
        xhr.send(fd);
    }
    function updateProgress (oEvent)
    {
        if (oEvent.lengthComputable)
        {
            var percentComplete = oEvent.loaded / oEvent.total;
            console.log(Math.round(percentComplete*100) + "%");
        } else {
            // Unable to compute progress information since the total size is unknown
            console.log("Total size is unknown...");
        }
    }

    function transferComplete(evt)
    {
        alert("The transfer is complete.");
    }

    function transferFailed(evt)
    {
        alert("An error occurred while transferring the file.");
    }

    function transferCanceled(evt)
    {
        alert("The transfer has been canceled by the user.");
    }
    function handleFiles(element)
    {
        filesArray = element.files;
        if (filesArray.length > 0)
        {
            for (var i=0; i<filesArray.length; i++)
            {
                sendFile(filesArray[i]);
            }
            filesArray = '';
        }
    }
    </script> 
```

您的结果将在控制台中

# database-design - 在有夏令时的地方，UTC 和本地时间是否可以互换？

> ID：10956576
> 
> 赞同：0
> 
> 时间：2012-06-08T22:08:06.413
> 
> 标签：database-design, datetime, timezone, utc, localtime

我知道我们应该在我们的数据库中以 UTC 格式存储时间，但是由于以下原因，我很难从我的团队那里获得支持来采用它：

*   我们从不处理内部时间戳
*   我们有夏令时，但我们总是显示本地时间，无需以 UTC 存储
*   由于现在需要转换，因此数据磨损室的负担很大
*   我们使用外部数据并且它们不是UTC，这会给其他人带来额外的工作
*   我们的业务用户从未问过

我在这里有两个问题。

*   如果我们将现有的本地时间转换为 UTC，那是否总是会产生有效的日期时间戳？我听说从 UTC 到当地时间的转换总是有效的。但是从本地时间转换为 UTC 可能不会。
*   我想不出任何其他支持 UTC 的论点，除非这是正确的做法并且 UTC 时间始终有效。

在大多数情况下，这些时间将用于显示目的并运行报告（开始日期和结束日期）。一些业务用户也可以直接读取它们（他们喜欢当地时间）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T22:13:37.433

> 如果我们将现有的本地时间转换为 UTC，那是有效的转换吗？

定义“有效”。

一方面，它并不总是明确的。给定的本地时间可以映射到 0、1 或 2 个 UTC 时间：

*   如果跳过本地时间，则为 0 个映射，例如，由于 DST 转换“向前跳”，本地时间从凌晨 1 点变为凌晨 2 点时为 1.30。当然，如果它应该是*有效*的当地时间，则不应该发生这种情况，但如果您有类似每周活动的活动，您可能会无意中得到无效的当地时间。
*   如果不涉及 DST 转换，则为 1 个映射
*   如果当地时间不明确，则为 2 个映射，例如，由于 DST 转换“回退”，当地时间从凌晨 2 点回到凌晨 1 点时为 1.30

从根本上说，当您需要考虑 DST 转换时，本地时间更难推断。例如，12.30am + 1 小时并不总是 1.30am。

就我个人而言，我认为您应该尝试对您*真正*代表的时间进行建模。有时这是与 UTC 有特定偏移的当地时间；有时它根本不是人类时间，而是具有任意比例和时代的时间戳。我在[Noda Time 用户指南](http://noda-time.googlecode.com/hg/docs/userguide/type-choices.html)中写了一些关于此的内容。

你还没有真正告诉我们你需要在这些时间*做什么。*你需要执行任何类型的算术吗？比较？复发？向用户展示？可能向其他时区的用户显示？如果没有这类信息，很难提出任何具体的建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-27T14:32:50.890

将时间存储为 UTC 是最安全的方法。如果您想存储本地时间，您可以这样做，如果您还存储 UTC 偏移量 (2012-05-20 05:34 UTC−06:00)。

现在我评论的神奇中心句：“时区是 UTC 偏移量！”

通常人们倾向于认为时区是地理定义的，但我们的时区与 DST 切换。例如，欧洲在冬季使用中欧时间 (CET)，在夏季使用中欧夏令时 (CEST)。纳米比亚与欧洲在同一经度上，它们看起来使用相同的时区并且都使用 DST。但是纳米比亚和欧洲永远不会有相同的当地时间，因为纳米比亚在南边，反之亦然。

# visual-studio - Dreamspark Visual Studio 2012 RC

> ID：10956577
> 
> 赞同：3
> 
> 时间：2012-06-08T22:08:08.393
> 
> 标签：visual-studio, msdn

[我们会在Dreamspark](https://www.dreamspark.com/Default.aspx)（MSDN 的学生版）上看到 VS2012 RC 的发布吗？

目前 Dreamspark 只有测试版。这是您需要向 Microsoft 提出请求的类型吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T21:01:22.827

[我从这里](http://www.microsoft.com/visualstudio/11/en-us/downloads#professional)卸载了 Dreamspark 副本并安装了 2012 RC 版。

这样做似乎没有不利影响。它确实有一个超时/定时炸弹，但我希望在那之前它会在dreamspark上可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T16:50:05.297

如果其他人正在阅读它，只是为了更新这个线程，Dreamspark 已更新到 RC。

*2012 年 8 月 28 日更新*：发布版本现已在 dreamSpark 上提供

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T21:18:12.493

> 我们会在 Dreamspark（MSDN 的学生版）上看到 VS2012 RC 的发布吗？

问微软。这是极有可能的，你知道的。

> 这是您需要向 Microsoft 提出请求的类型吗？

没有。DreamSpark 只发布了软件，它包含了开发工具。因此，2012 年的到来是很自然的——毕竟，2012 年将重新使用旧的开发工具——但不是现在。

你是一个走进比萨店并抱怨他饿了，因为他还没有吃东西的人。您至少应该等到 2012 年发布 - 并且可供全额付费用户使用 - 然后才认为它应该出现在 DreamSpark 上。为什么 MS 应该维护两个不同的版本——每个 poliy 都有定时炸弹，而且都是免费的？没有意义。一旦发布，99% 的机会将归于 DreamSpark。

# c# - C# - iTunes 引导程序

> ID：10956579
> 
> 赞同：2
> 
> 时间：2012-06-08T22:08:23.210
> 
> 标签：c#, api, com, itunes

我正在制作一个通过 COM Api 监听 iTunes 事件的 DLL，但我想知道如何在 iTunes 启动时加载这个 DLL，就像 Windows Media Player 使用它的插件一样。

我尝试添加`ComVisible(true)`到主应用程序类，以查看 iTunes 是否检测到它并通过 初始化它，但`ctor`没有结果。

有人有什么想法吗？

# bash - 替换参数中的关键字 - bash 脚本

> ID：10956581
> 
> 赞同：1
> 
> 时间：2012-06-08T22:08:32.493
> 
> 标签：bash, sed

我有一个将路径作为参数的文件：

```
./<filename> /path/to/file... 
```

我想要做的是将 /path/to/... 部分替换为 /another/file/...

我试图以下列方式 sed 论点：

```
CUR_PATH=$1
OLD_PATH="\/path\/to\/"
NEW_PATH="\/another\/file\/"
sed "s/$OLD_PATH/$NEW_PATH/" $CUR_PATH 
```

但这不起作用，因为 sed 试图实际修改 CUR_PATH 处的文件，而不是 CUR_PATH 的实际语句。我该如何解决？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T22:13:08.430

你不需要`sed`。`bash`变量的内置替换。您可以使用：

```
NEW_PATH=${OLD_PATH/\/path\/to\//\/another\/file\/} 
```

注意 的反斜杠`/`，因为表达式是`${variable/old/new}`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T22:21:20.463

您可以按照 Diego 的建议使用 bash 的替换，但对于这种特殊情况，这样做可能更干净：

```
NEW_PATH="/another/file/${OLD_PATH##*/}" 
```

它将用字符串“/another/file/”替换 OLD_PATH 的整个前导路径。请注意，仅当 OLD_PATH 可能包含空格时才需要双引号。

如果您确实想使用 sed，您可以简单地将 OLD_PATH 回显到管道中。而且，当使用 sed 处理文件名时，使用不同的分隔符很方便。例如：

```
NEW_PATH=$( echo $OLD_PATH | sed s@/path/to/my@/another/file@ ) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T22:29:22.230

另一种可能性是使用 here 字符串：

```
CUR_PATH=$1
OLD_PATH="/path/to/"
NEW_PATH="/another/file/"
sed "s|$OLD_PATH|$NEW_PATH|" <<< $CUR_PATH 
```

另请注意，您可以更改 sed 中替换的分隔符，这样您就不必转义路径变量中的斜杠。

# r - 如何在我的 R 饼图上添加更多信息？

> ID：10956582
> 
> 赞同：2
> 
> 时间：2012-06-08T22:08:34.330
> 
> 标签：r, pie-chart

我有以下简单的 R 代码。

```
vect <- c(a = 4, b = 7, c = 5)
pie(vect, labels = c("A", "B", "C"), col = c("#999999", "#6F6F6F", "#000000")) 
```

打印以下饼图

![在此处输入图像描述](../Images/3655190be2b2dc4e7983925a6eb46bfb.png)

如何修改上面的代码以在我的饼图上打印更多细节，使其看起来像另一个？

![在此处输入图像描述](../Images/50c7a8d0bd2a04fdeddaf128e5eafac0.png)

感谢您的回复！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T23:17:21.430

[我上面的评论](https://stackoverflow.com/questions/10956582/how-to-put-more-information-on-my-r-pie-chart#comment14303146_10956582)详细：

1.  为示例创建一个虚拟数据框：

    ```
    vect <- data.frame(v=c(rep('a', 25), rep('b', 30), rep('c', 45))) 
    ```

2.  调用基于[手册](http://had.co.nz/ggplot2/coord_polar.html)`ggplot`的饼图（ ） ：`coord_polar`

    ```
    p <- ggplot(vect, aes(x=factor(1), fill = factor(v))) + geom_bar(width = 1) + coord_polar(theta="y") 
    ```

3.  调整它：

    ```
    p + opts(title = "Decision tree") + xlab('') + ylab('') + 
    theme_bw() + scale_fill_grey(name = "Rankings") 
    ```

导致：

![在此处输入图像描述](../Images/8f3f3554a01433397ba110753934eb86.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T22:16:05.217

我会推荐您使用 plot 方法深入研究的几个属性。对于绘图标题，请参阅`main`属性和`legend`添加彩色调色板的属性。

您也可以在这里参考一个简单的绘图教程：[http ://www.harding.edu/fmccown/r/#piecharts](http://www.harding.edu/fmccown/r/#piecharts)

# android - Android 使用 SurfaceView 和 Thread 绘制

> ID：10956583
> 
> 赞同：10
> 
> 时间：2012-06-08T22:08:55.500
> 
> 标签：android, surfaceview, ondraw

我正在尝试使用 3 个类在我的屏幕上画一个球。我已经阅读了一些关于此的内容，并且发现了一个代码片段，该代码片段可以在一个页面上使用 3 个类，[在 Android 中使用图形](https://web.archive.org/web/20121204020009/http://www.droidnova.com/playing-with-graphics-in-android-part-ii,160.html)

我更改了代码，这样我就有了一个在撞墙时会移动并改变方向的球，如下图所示**（这是使用链接中的代码）**。

![移动球截图](../Images/6d7137d5442da988ffd161a429dc70f9.png)

现在我喜欢将这些类分成 3 个不同的页面，以免让所有内容变得如此拥挤，所有内容都以相同的方式设置。

**这是我的 3 节课。**

1.  BallActivity.java
2.  Ball.java
3.  BallThread.java

* * *

```
package com.brick.breaker;
import android.app.Activity;
import android.os.Bundle;
import android.view.Window;
import android.view.WindowManager;

public class BallActivity extends Activity {

private Ball ball;

@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);

    ball = new Ball(this);
    setContentView(ball);
}

@Override
protected void onPause() {

    super.onPause();

    setContentView(null);
    ball = null;

    finish();
}

} 
```

* * *

```
package com.brick.breaker;

import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.view.SurfaceHolder;
import android.view.SurfaceView;

public class Ball extends SurfaceView implements SurfaceHolder.Callback {

private BallThread ballThread = null;

private Bitmap bitmap;

private float x, y;
private float vx, vy;

public Ball(Context context) {
    super(context);

    bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.ball);

    x = 50.0f;
    y = 50.0f;

    vx = 10.0f;
    vy = 10.0f;

    getHolder().addCallback(this);
    ballThread = new BallThread(getHolder(), this);
}

protected void onDraw(Canvas canvas) {

    update(canvas);

    canvas.drawBitmap(bitmap, x, y, null);
}

public void update(Canvas canvas) {

    checkCollisions(canvas);

    x += vx;
    y += vy;
}

public void checkCollisions(Canvas canvas) {

    if(x - vx < 0) {

        vx = Math.abs(vx);

    } else if(x + vx > canvas.getWidth() - getBitmapWidth()) {

        vx = -Math.abs(vx);
    }

    if(y - vy < 0) {

        vy = Math.abs(vy);

    } else if(y + vy > canvas.getHeight() - getBitmapHeight()) {

        vy = -Math.abs(vy);
    }
}

public int getBitmapWidth() {

    if(bitmap != null) {

        return bitmap.getWidth();

    } else {

        return 0;
    }
}

public int getBitmapHeight() {

    if(bitmap != null) {

        return bitmap.getHeight();

    } else {

        return 0;
    }
}

public void surfaceChanged(SurfaceHolder holder, int format, int width,
        int height) {

}

public void surfaceCreated(SurfaceHolder holder) {

    ballThread.setRunnable(true);
    ballThread.start();

}

public void surfaceDestroyed(SurfaceHolder holder) {

    boolean retry = true;
    ballThread.setRunnable(false);

    while(retry) {

        try {

            ballThread.join();
            retry = false;

        } catch(InterruptedException ie) {

            //Try again and again and again
        }

        break;
    }

    ballThread = null;

}

} 
```

* * *

```
package com.brick.breaker;

import android.graphics.Canvas;
import android.view.SurfaceHolder;

public class BallThread extends Thread {

private SurfaceHolder sh;
private Ball ball;

private Canvas canvas;

private boolean run = false;

public BallThread(SurfaceHolder _holder,Ball _ball) {

    sh = _holder;
    ball = _ball;
}

public void setRunnable(boolean _run) {

    run = _run;
}

public void run() {

    while(run) {

        canvas = null;

        try {

            canvas = sh.lockCanvas(null);

            synchronized(sh) {

                ball.onDraw(canvas);
            }

        } finally {

            if(canvas != null) {

                sh.unlockCanvasAndPost(canvas);
            }

        }

    }
}

public Canvas getCanvas() {

    if(canvas != null) {

        return canvas;

    } else {

        return null;
    }
}
} 
```

* * *

**这是一张显示这些课程结果的图片。**

![在此处输入图像描述](../Images/57d2f5250ffc3bf40cadc8f300e1cd89.png)

我试图弄清楚这一点，但由于我对 Android 开发还很陌生，所以我想我可以寻求帮助。

有谁知道是什么导致球被这样画？该代码与链接中的代码几乎相同，我试图尝试找到解决方案，但没有运气。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-08T22:46:13.047

好吧，正如你在图像上看到的，你只画了球。相反，您需要在每次绘制球之前重新绘制黑色背景（或任何您想要的）。

或者，您可以只在前一个位置绘制一个黑色区域，但是当您使用更多对象时，您可能会遇到问题。

[这是一个很好的示例](http://android-journey.blogspot.co.il/2010/02/android-2d-simple-example.html)，类似于您所做的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T08:58:33.987

把这个

```
public void onDraw(Canvas canvas){
   canvas.drawColor(Color.BLACK);

.....

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T22:38:17.270

快速浏览一下，我不得不说你只是在同一个表面上绘图，并且从不要求你的表面视图重绘自己。在 finally 块的末尾，在 IF 语句中使用：`postInvalidate();` 那应该会导致表面视图重绘自身。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-08T05:32:30.777

看看我是如何在 [http://som-itsolutions.blogspot.in/2012/06/android-graphics-and-animation-pendulum.html上完成钟摆模拟的](http://som-itsolutions.blogspot.in/2012/06/android-graphics-and-animation-pendulum.html)

[您可以从https://github.com/sommukhopadhyay/pendulumsimulation](https://github.com/sommukhopadhyay/pendulumsimulation)克隆该项目的源代码

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-07-24T18:23:11.710

[编辑]答案是错误的，但评论很有帮助，所以我会留下这个答案：

不是你问的问题，而是你的代码有问题。在 Android 中，您只能在 UI 线程中写入屏幕。这是运行所有活动回调等的线程。通过从 BallThread 写入屏幕，您将面临程序中出现许多奇怪故障的风险。

# silverlight - 使用 EF Reverse Engineer Code First 向导，安装 Silverlight 5 后出现错误

> ID：10956585
> 
> 赞同：2
> 
> 时间：2012-06-08T22:08:59.747
> 
> 标签：silverlight, entity-framework, code-first

我上周使用了一次向导，没有任何问题。现在，安装 Silverlight 5 后，我得到：

c:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\Extensions\Microsoft\Entity Framework Tools\Templates\Includes\EF.Utility.CS.ttinclude(1024,76)：错误 CS0433：编译转换：类型“System.Xml.XmlReader”存在于“c:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\Silverlight\v5.0\System.Xml.dll”和“c:\Windows\Microsoft.NET”中\assembly\GAC_MSIL\System.Xml\v4.0_4.0.0.0__b77a5c561934e089\System.XML.dll'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T23:03:16.770

我知道你很久以前就问过这个问题，但我碰巧找到了一个对我有用的解决方案......

这实际上是他们正在积极处理的 EF Power Tools 中的一个错误......

如果你编辑

C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\Extensions\Microsoft\Entity Framework Tools\Templates\Includes\EF.Utility.CS.ttinclude

或 EF.Utility.VB.ttinclude 如果您使用的是 VB

将包含 XML 程序集的装配线更改为明确不使用 SL 库，然后它开始工作

所以把它们改成

```
<#@ assembly name="System.Xml, Version=4.0.0.0, Culture=neutral" #>
<#@ assembly name="System.Xml.Linq, Version=4.0.0.0, Culture=neutral"#> 
```

然后它应该开始工作

# linux - 如何为服务器上的文件创建可下载的公共链接

> ID：10956587
> 
> 赞同：20
> 
> 时间：2012-06-08T22:09:32.457
> 
> 标签：linux, http, ftp

恐怕我的问题可能很愚蠢，而且是重复的。但是在这个网站上寻找一些类似的问题后，我没有找到我想要的东西。

我的问题很简单，我的 Ubuntu 服务器上有一个大文件，即 1GB，我想与其他用户共享这个文件。如何为公共用户创建一个 URL 地址，换句话说，当一个用户单击此 URL 时，下载将自动开始，无需用户名和密码，就像我们在找到可用的时候下载很多东西（pdf、音乐）一样网址与谷歌。

有人建议我设置一个匿名 ftp。我认为这是一个可能的解决方案，但我没有成功完成它。有人可以给我更多详细信息如何实现我的目标（有或没有 ftp 都可以）。

感谢您的帮助，我非常感谢一些示例或一些教程！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-08T22:18:35.390

安装 Apache2

```
sudo apt-get install apache2 
```

将您的文件放入 /var/www/ 目录（可能需要 root 权限）

```
sudo cp yourfile /var/www/yourfile 
```

使用以下链接访问该文件：

```
http://your-ip-address/yourfile 
```

如果您在路由器或防火墙下运行，您可能必须打开端口 80 并将其转发到您的电脑。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T22:13:55.800

假设您的文件名是`foobar.iso`.

您可以将其放在您的网络根目录中，然后将链接`example.com/foobar.iso`提供给人们。这将下载文件。

（可选）将其放在目录`downloads`中。然后下载链接将是`example.com/downloads/foobar.iso`.

# iphone - MPMoviePlayerController 存在黑色背景

> ID：10956589
> 
> 赞同：3
> 
> 时间：2012-06-08T22:09:36.083
> 
> 标签：iphone, objective-c, ios, xcode

我制作 iOS 应用程序。

我使用 MPMoviePlayerController，但这显示黑色背景。

我认为这个问题可以通过这个 URL 解决，但我无法理解使用方式。
[MPMoviePlayerController 背景颜色不会粘](https://stackoverflow.com/questions/7974349/mpmovieplayercontroller-background-color-wont-stick)

我的代码是这样的。

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"movie_files" ofType:@"m4v"];
NSURL *videoURL = [NSURL fileURLWithPath:path];

moviePlayer =  [[MPMoviePlayerController alloc]
                initWithContentURL:videoURL];

//setting
moviePlayer.scalingMode =MPMovieScalingModeAspectFit;
moviePlayer.controlStyle=MPMovieControlStyleDefault;
moviePlayer.shouldAutoplay=NO;
[moviePlayer.view setFrame:CGRectMake(20, 20, 280, 200)];    

//notification
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(moviePlayBackDidFinish:)
                                             name:MPMoviePlayerPlaybackDidFinishNotification
                                           object:moviePlayer];

//clearColor
UIView *subV =[[UIView alloc]init];
for(subV in moviePlayer.backgroundView.subviews) {
    subV.backgroundColor = [UIColor clearColor];
}
[moviePlayer.view addSubview:subV];    
[self.view addSubview:moviePlayer.view];
//show white screen 
```

请告诉清晰的背景方式。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-27T14:10:39.510

您需要将其更改为：

```
moviePlayer.backgroundView.backgroundColor = [UIColor clearColor];
for(UIView *aSubView in moviePlayer.view.subviews) {
    aSubView.backgroundColor = [UIColor clearColor];
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-05-10T05:56:28.537

单独设置背景视图的颜色对我不起作用。

我认为视图背景颜色也应该改变。我又添加了一行代码，现在一切正常。整个视频背景现在是透明的。:) 谢谢@Jordi

```
moviePlayer.backgroundView.backgroundColor = [UIColor clearColor];

moviePlayer.view.backgroundColor = [UIColor clearColor];

for(UIView *aSubView in moviePlayer.view.subviews) {
    aSubView.backgroundColor = [UIColor clearColor];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-18T22:18:31.467

另一种选择是隐藏视频播放器，然后在准备好显示时显示它

警告需要 IO6>= 我相信：

[https://stackoverflow.com/a/19459855/401896](https://stackoverflow.com/a/19459855/401896)

# javascript - 在 ASP.NET 页面中内联编码 SVG 会导致 SVG javascript createSVGPoint(); 打破的功能

> ID：10956592
> 
> 赞同：0
> 
> 时间：2012-06-08T22:10:06.437
> 
> 标签：javascript, asp.net, svg

我需要在我创建的 SVG 中使用 ASP.NET 服务器端代码。为此，我创建了一个 .aspx 文件并插入了 SVG 代码，如下所示：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="MyPage.aspx.cs"
Inherits="MyApp.MyPage" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
width="700px" height="700px" onload="initialize()"> 
<script type="text/ecmascript">
<![CDATA[
    SCRIPT HERE 
    <% SERVER CODE %>       
]]>
</script>   
<defs>
    <style type="text/css">
    <![CDATA[     
    SVG STYLES
    ]]>
    </style>
</defs>
    SVG CODE    
    <% SERVER CODE %>
</svg> 
```

这很好用，我可以使用 <% %> 并将服务器端逻辑添加到我的 SVG 中。但是，我需要使用隐藏字段从 JavaScript 中获取信息。

一旦我将此代码包装在html中并添加表单等；SVG 特定的 JavaScript 将中断，即 createSVGPoint() 函数。SVG 仍然可以正确渲染...

有谁知道解决方法或将服务器端逻辑添加到 SVG 的更好方法？

编辑：更新示例

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>Test</title>
    <script type="text/ecmascript" language="ecmascript">
    var root;
    var svgRoot;
    var xmlns = "http://www.w3.org/2000/svg";

    var mousePoint;
    var transformedPoint;

    function initialize() {
        root = document;
        svgRoot = document.documentElement;
        //alert("hello"); --Works
        mousePoint = svgRoot.createSVGPoint();
        transformedPoint = svgRoot.createSVGPoint();
        alert("hello"); -- Broken            
    }            
</script>
<style type="text/css">    
    .Interactable
    {
        cursor:pointer;
    }
</style>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <svg id="mySVG" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
        width="700px" height="700px" onload="initialize()">        
            <g id="WorkSpace" transform="matrix(1, 0, 0, -1, 350, 350)">
            </g>
        </svg>
    </div>
    </form>
</body>
</html> 
```

另外，尝试在 pageLoad() 中添加内容类型

```
Response.ContentType = "image/svg+xml";
Response.ContentType = "application/xhtml+xml"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T11:56:55.287

如果您的 SVG 包装在 HTML 页面中，那么将 JS 嵌入 HTML 而不是 SVG 可能更有意义。给你的 SVG 元素一个 ID，这样你就可以轻松地访问它，瞧。脚本完全一样。

我怀疑 createSVGPoint 的用处，但你最好使用自己的 Point 原型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T01:22:10.770

如果 HTML 文档破坏了 SVG 命名空间，请使用[对象](https://stackoverflow.com/questions/9545280/trying-to-embed-an-svg-object-every-which-way-possible-but-browser-prompts-to-s)或[图像](https://stackoverflow.com/questions/5451135/embed-svg-in-svg)元素将 SVG 作为 XHTML 文档的外部实体加载。

# emacs - 防止来自 Emacs 的不需要的命令被加载到完成和帮助缓冲区中

> ID：10956600
> 
> 赞同：1
> 
> 时间：2012-06-08T22:10:40.937
> 
> 标签：emacs

我开始开发自己的 Emacs 环境，我有一个自定义的 init.el（如下所示），它从我的用户目录加载库并忽略已安装的目录。我没有在 User 目录中放置任何 Amusement 或 Mail lisp 库，但它们仍然出现在自动完成列表中。这是因为它们被定义为自动加载功能。如何防止创建这些自动加载功能？我不想单独删除每个不需要的功能，因为这既麻烦又浪费。

关于不需要的功能的帮助信息；

```
5x5 is an interactive autoloaded Lisp function.

It is bound to <menu-bar> <tools> <games> <5x5>. 
```

我的 init.el;

```
(setq inhibit-defaul-init 1)

(setq load-path (list 
     (expand-file-name "~/.emacs.d/")
     (expand-file-name "~/.emacs.d/lisp/")
     (expand-file-name "~/.emacs.d/lisp/emacs-lisp/")
     (expand-file-name "~/.emacs.d/lisp/eshell/")
     (expand-file-name "~/.emacs.d/lisp/net/")
     (expand-file-name "~/.emacs.d/lisp/nxml")
     (expand-file-name "~/.emacs.d/lisp/org")        
     (expand-file-name "~/.emacs.d/lisp/term")
     (expand-file-name "~/.emacs.d/lisp/textmodes")
     (expand-file-name "~/.emacs.d/lisp/usrl")
     (expand-file-name "~/.emacs.d/lisp/")
    )
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T02:17:30.480

您可以像取消绑定普通函数一样取消绑定自动加载的函数，这样您就可以有效地`5x5`从正在运行的系统中删除和其他不需要的自动加载函数，如下所示：

```
(mapc
 (lambda (func) (fmakunbound func))
 '(5x5 5x5-crack-randomly 5x5-crack-mutating-current 5x5-crack-mutating-best 5x5-crack-xor-mutate 5x5-crack)) 
```

对于自动加载的变量，您可以使用`makunbound`而不是`fmakunbound`.

要获取可能的嫌疑人列表，您可以使用

*   `M-x` `find-library` `RET` `loaddefs` `RET`
*   `M-x` `occur` `RET` `^(autoload` `RET`

图书馆`loadhist`也可能很有趣。

**编辑：**

实际上，检查自动加载文件似乎是确定您是否要消除某些东西的一种*相当安全的方法。*但是，我相信这仅可用于功能；据我所知，其他类型的自动加载对象只是由 loaddefs 立即定义的。您可以根据符号名称做出假设，但我不推荐它（但我不会这样做，所以 YMMV）。

```
(defvar my-unwanted-libraries
  '("5x5" "snake" "hanoi" "tetris")
  "Unbind all autoloaded functions for these libraries.")

(defun my-unbind-unwanted-autoload-functions ()
  "Unbind all unwanted autoloaded functions."
  (interactive)
  (do-symbols (symbol)
    (let* ((function (and (fboundp symbol)
                          (symbol-function symbol)))
           (file (and function
                      (consp function)
                      (eq (car function) 'autoload)
                      (cadr function))))
      (when (and file (member file my-unwanted-libraries))
        (fmakunbound symbol))))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T23:08:44.853

由于大部分 Emacs 是用 Emacs Lisp 编写的，并且尽可能多地是自动加载的，因此您不能轻易删除为自动加载设置的函数。例如，`c++-mode`是一个自动加载的函数，因此删除所有自动加载的函数会阻止您使用`c++-mode`（除非您添加了自己的副本）。

完成您所要求的事情的最佳方法可能是构建您自己的 Emacs 可执行文件，并限制放入 Emacs 可执行文件本身的内容。这[在此处](http://www.gnu.org/software/emacs/manual/html_node/elisp/Building-Emacs.html)记录。您可以简单地删除您不想要的目录/库，然后重建。新生成的自动加载文件将不包含对这些库中函数的引用，并且您已经准备就绪。

*注意：*您可能无意中删除了 Emacs 使用的您没有意识到的库。例如，`M-x report-emacs-bug`使用电子邮件...

您是否有特殊原因要删除这些自动加载的功能？如果您觉得它们使补全变得混乱，那么您可以使用许多补全库来自定义您所看到的内容。

# jquery - JQuery Animate Down And Scroll If Needed

> ID：10956619
> 
> 赞同：1
> 
> 时间：2012-06-08T22:13:44.270
> 
> 标签：jquery, jquery-ui

but only find scrolling solutions.

What I'm trying to do is move a circle across the screen using animate (left or right), then of course up / down, which I can do.

The issue is when I want the browser to scroll with the circle up / down if needed, in a nice smooth manner.

This is some simple quick dirty code I wrote just to mess around

```
$('#circle').animate({'left': (start)+'px'},'slow').fadeIn('slow', function(){
        $(this).animate({'left': '+='+(stopRight)+'px'}, 2000, function(){
            $(this).animate({'top': '+='+(downRight)+'px'}, 2000, function(){
                $(this).animate({'left': '-='+(leftRight)+'px'}, 2000, function(){
                });
            });
        });
    }); 
```

Where / how would i make it scroll, Any suggestions tip, I plan on getting ride of the code I have below anyways.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T00:07:10.233

This is a working solution, based on your animation sequence:

**See this** [working Fiddle](http://jsfiddle.net/zuul/ytDPf/) Example!

**HTML**

```
<div id="circle"></div> 
```

**CSS** ^(normalized on the Fiddle, but not relevant)

```
html, body {
  width: 100%;
  height: 100%;
}
#circle {
  width: 20px;
  height: 20px;
  background-color: #444;
  border: 1px solid #212121;
  border-radius: 10px;
  position: absolute;
  top: 300px;
  left: 300px;
} 
```

**jQuery** ^(You will need the plug-in `.watch()`, see link below)

```
// initial values to your variables
var start     = 0,
    stopRight = 1000,
    downRight = 300,
    leftRight = 300;

// your code as it was
$('#circle').animate({'left': (start)+'px'},'slow').fadeIn('slow', function(){
  $(this).animate({'left': '+='+(stopRight)+'px'}, 2000, function(){
    $(this).animate({'top': '+='+(downRight)+'px'}, 2000, function(){
      $(this).animate({'left': '-='+(leftRight)+'px'}, 2000, function(){});
    });
  });
});

// the code to make it all happen!
$('#circle').watch("left,top", function() {
    $("html, body").animate({
        scrollTop  : $('#circle').offset().top,
        scrollLeft : $('#circle').offset().left,
    }, 20);
}, 100); 
```

**Plug-in used**

[jQuery CSS Property Monitoring Plug-in](http://www.west-wind.com/weblog/posts/2008/Sep/12/jQuery-CSS-Property-Monitoring-Plugin-updated)

* * *

What this does is to track the element movement and manipulate the scrollbars to keep it visible at all times.

The jQuery [.scrollTop()](http://api.jquery.com/scrollTop/) ^(Get the current vertical position of the scroll bar for the first element in the set of matched elements.)

The jQuery [.scrollLeft()](http://api.jquery.com/scrollLeft/) ^(Get the current horizontal position of the scroll bar for the first element in the set of matched elements.)

The jQuery [.offset()](http://api.jquery.com/offset/) ^(Get the current coordinates of the first element in the set of matched elements, relative to the document.)

# c# - 从后台线程更新时，UI 略微冻结

> ID：10956629
> 
> 赞同：4
> 
> 时间：2012-06-08T22:14:04.933
> 
> 标签：c#, multithreading, user-interface, delegates

我有一个带有 4 个 PictureBox 控件的 Winform，每个控件将包含一个不同的图像。过程是：

引发了一个事件 x，该事件的 eventargs 包含每个图像的文件名 (4)，依此类推（文件存在等）。然后，我必须更新 UI。

我通常使用调用：

```
Invoke((ThreadStart)delegate()
{
    picBig.Image = new Bitmap(strImageBig);
    picLittle1.Image = new Bitmap(saLittle[0]);
    picLittle2.Image = new Bitmap(saLittle[1]);
    picLittle3.Image = new Bitmap(saLittle[2]);
});

// saLittle[] is a string array, contains, filenames: "image1.jpg" 
```

但是当它执行时，表单会冻结一段时间，大约 500 毫秒，我知道这是一个很小的间隔，但很明显，然后应用程序会正常继续。

我试图找出“UI 冻结”的原因，然后，经过研究，我找到了 BeginInvoke。现在我的代码如下所示：

```
BeginInvoke((MethodInvoker)delegate
{
    picBig.Image = new Bitmap(strImageBig);
    picLittle1.Image = new Bitmap(saLittle[0]);
    picLittle2.Image = new Bitmap(saLittle[1]);
    picLittle3.Image = new Bitmap(saLittle[2]);
}); 
```

这有点快。但是 UI 仍然冻结了 200~300ms。

在我读过的文章中，他们说 BeginInvoke 比 Invoke 更好。

代码工作正常，逻辑或其他任何问题都没有问题。我只是想知道为什么会这样。我不想让这个疑问不清楚。该项目已经完成。希望这对其他人有用。

也许这不是正确的方法。我知道有很多方法可以从后台线程更新 UI，但是还有另一种方法可以**更快**地更新吗？

或者，您认为图像加载是原因吗？还有其他方法可以更快地加载图像吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T23:00:25.563

这是因为您实际上是在 UI 线程上从磁盘加载图像以及设置控件的内容。使用文件路径调用`Bitmap`构造函数将转到硬盘驱动器并将图像加载到内存中。

`Invoke`并将*在创建控件的线程上*`BeginInvoke`运行您提供的委托，该线程很可能是 UI 线程。

 *> ...但是还有其他方法可以更快地进行更新吗？

在后台线程上加载图像，当它们实际加载时，调用并将图像设置到控件中。

```
 var big = new Bitmap(strImageBig);
                    var little1 = new Bitmap(saLittle[0]);
                    var little2 = new Bitmap(saLittle[1]);
                    var little3 = new Bitmap(saLittle[2]);

                    Invoke((ThreadStart)delegate()
                    {
                        picBig.Image = big;
                        picLittle1.Image = little1;
                        picLittle2.Image = little2;
                        picLittle3.Image = little3;
                    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T22:22:30.213

> 但是当它执行时，表单会冻结一段时间，大约 500 毫秒，我知道这是一个很小的间隔，但很明显，然后应用程序会正常继续。

最终，UI 线程需要实际更新图像。在 UI 线程上生成和更新图像时，这将导致（短）延迟。*

# php - 在 XSL 中存储变量

> ID：10956632
> 
> 赞同：0
> 
> 时间：2012-06-08T22:14:23.160
> 
> 标签：php, xml, xslt, variables, store

我正在编写一个程序来从 xsl 调用 php，但我需要存储一个 xsl 变量，以便我可以将它发送到 php 函数 php:functionString()

```
<xsl:template match="atom:entry">

 <xsl:if test="position() &lt;= 10">
   <table border="0" width="55"  cellpadding="2" cellspacing="4" style="float:left;">
      <tr >
         <td width="55">

    <a href="?page_id=9#anchor-{ atom:id }" >
    <img id="icon">
<xsl:attribute name="src">

<xsl:value-of select="./im:image[1]"/>

</xsl:attribute>
</img></a>
</td>
</tr>

         <tr> <td width="35" style="font-family:Arial; font-size:10px; color:black; font-weight:bold;">
             <xsl:value-of select="atom:category/@label"/> </td></tr>
          <tr> <td width="35" style="font-family:Arial; font-size:10px; color:black;">   <xsl:value-of select="./im:price"/>
         </td>
     </tr>
     <tr> <td>Rating: <xsl:value-of select="php:functionString('PD::parseData','$id')" disable-output-escaping="yes"/></td>
     </tr>
     </table>
     </xsl:if>
   </xsl:template> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T22:52:50.297

**不要使用**：

```
<xsl:value-of select="php:functionString('PD::parseData','$id')" disable-output-escaping="yes"/> 
```

**使用**：

```
<xsl:value-of select="php:functionString('PD::parseData', $id)"/> 
```

**前者将*字符串* `"$id"`而不是变量作为参数传递`$id`。**

# css - 如何在保持纵横比和可伸缩性的同时使用 SVG Sprite Sheet 作为 CSS 背景图像

> ID：10956636
> 
> 赞同：28
> 
> 时间：2012-06-08T22:14:44.070
> 
> 标签：css, svg

TL;DR：我想使用平铺在 SVG 精灵表中的几个图标作为 CSS 背景图像，它们保持它们的纵横比并自动缩放以填充父元素，只使用 SVG 和 CSS。请不要使用 JavaScript。

* * *

所以我有一个 SVG 格式的 spritesheet，我结合了[SVG-Edit](http://svg-edit.googlecode.com)和一些在 Notepad++ 中的手工编码。这是源代码：

```
<svg version="1.1"
  xmlns:svg="http://www.w3.org/2000/svg"
  xmlns="http://www.w3.org/2000/svg"
  width="600"
  height="400"
  viewBox="0 0 600 400">
  <!-- Created with SVG-edit - http://svg-edit.googlecode.com/ -->
  <title>chosen_sprite</title>
  <g>
    <title>Add</title>
    <rect fill="none" stroke-width="10" stroke-dasharray="null" stroke-linejoin="null" stroke-linecap="null" x="5" y="5" width="90" height="90" id="svg_1" stroke="#dcdcdc"/>
    <line id="svg_2" y2="50" x2="70" y1="50" x1="30" stroke-linecap="round" stroke-linejoin="null" stroke-dasharray="null" stroke-width="12" stroke="#00a00c" fill="none"/>
    <line id="svg_3" y2="30" x2="50" y1="70" x1="50" stroke-linecap="round" stroke-linejoin="null" stroke-dasharray="null" stroke-width="12" stroke="#00a00c" fill="none"/>
  </g>
  <g>
    <title>Delete</title>
    <rect fill="none" stroke-width="10" stroke-dasharray="null" stroke-linejoin="null" stroke-linecap="null" x="105" y="5" width="90" height="90" id="svg_1" stroke="#dcdcdc"/>
    <line id="svg_2" y2="70" x2="170" y1="30" x1="130" stroke-linecap="round" stroke-linejoin="null" stroke-dasharray="null" stroke-width="12" stroke="#ff0000" fill="none"/>
    <line id="svg_3" y2="30" x2="170" y1="70" x1="130" stroke-linecap="round" stroke-linejoin="null" stroke-dasharray="null" stroke-width="12" stroke="#ff0000" fill="none"/>
  </g>
  <g>
    <title>Expand Dark</title>
    <rect stroke="#505050" id="svg_1" height="90" width="90" y="5" x="205" stroke-linecap="null" stroke-linejoin="null" stroke-dasharray="null" stroke-width="10" fill="none"/>
    <line fill="none" stroke="#000000" stroke-width="12" stroke-dasharray="null" stroke-linejoin="null" stroke-linecap="round" x1="250" y1="65" x2="280" y2="35" id="svg_2"/>
    <line fill="none" stroke="#000000" stroke-width="12" stroke-dasharray="null" stroke-linejoin="null" stroke-linecap="round" x1="220" y1="35" x2="250" y2="65" id="svg_3"/>
  </g>
  <g>
    <title>Collapse Dark</title>
    <rect stroke="#505050" height="90" width="90" y="5" x="305" stroke-linecap="null" stroke-linejoin="null" stroke-dasharray="null" stroke-width="10" fill="none" id="svg_4"/>
    <line fill="none" stroke="#000000" stroke-width="12" stroke-dasharray="null" stroke-linejoin="null" stroke-linecap="round" x1="350" y1="35" x2="380" y2="65" id="svg_5"/>
    <line fill="none" stroke="#000000" stroke-width="12" stroke-dasharray="null" stroke-linejoin="null" stroke-linecap="round" x1="320" y1="65" x2="350" y2="35" id="svg_6"/>
  </g>
  <g>
    <title>Expand Green</title>
    <rect fill="none" stroke-width="10" stroke-dasharray="null" stroke-linejoin="null" stroke-linecap="null" x="405" y="5" width="90" height="90" id="svg_1" stroke="#dcdcdc"/>
    <line id="svg_2" y2="35" x2="480" y1="65" x1="450" stroke-linecap="round" stroke-linejoin="null" stroke-dasharray="null" stroke-width="12" stroke="#00a00c" fill="none"/>
    <line id="svg_3" y2="65" x2="450" y1="35" x1="420" stroke-linecap="round" stroke-linejoin="null" stroke-dasharray="null" stroke-width="12" stroke="#00a00c" fill="none"/>
  </g>
  <g>
    <title>Collapse Green</title>
    <rect fill="none" stroke-width="10" stroke-dasharray="null" stroke-linejoin="null" stroke-linecap="null" x="505" y="5" width="90" height="90" id="svg_1" stroke="#dcdcdc"/>
    <line id="svg_2" y2="65" x2="580" y1="35" x1="550" stroke-linecap="round" stroke-linejoin="null" stroke-dasharray="null" stroke-width="12" stroke="#00a00c" fill="none"/>
    <line id="svg_3" y2="35" x2="550" y1="65" x1="520" stroke-linecap="round" stroke-linejoin="null" stroke-dasharray="null" stroke-width="12" stroke="#00a00c" fill="none"/>
  </g>
  <g>
    <title>Search</title>
    <circle id="svg_9" r="32" cy="140" cx="60" stroke-width="8" stroke="#000000" fill="none"/>
    <line id="svg_11" y2="167.5" x2="32.5" y1="190" x1="10" stroke-linecap="round" stroke-linejoin="null" stroke-dasharray="null" stroke-width="12" stroke="#000000" fill="none"/>
  </g>
  <g>
    <title>Search 2</title>
    <rect id="svg_10" stroke="#505050" height="90" width="90" y="105" x="105" stroke-linecap="null" stroke-linejoin="null" stroke-dasharray="null" stroke-width="10" fill="none"/>
    <circle r="25" cy="142.5" cx="157.5" stroke-width="8" stroke="#000000" fill="none" id="svg_7"/>
    <line y2="165" x2="135" y1="180" x1="120" stroke-linecap="round" stroke-linejoin="null" stroke-dasharray="null" stroke-width="12" stroke="#000000" fill="none" id="svg_8"/>
  </g>
</svg> 
```

它工作正常，看起来像我想要的那样。

问题是CSS。在 spritesheet 中定义单元格比我希望的要复杂一些。这是我在其中显示这些图标的页面：

```
<!DOCTYPE html>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<html>
<head>
<style>

* {padding: 0px; margin: 0px; outline: 1px solid rgba(0,0,0,0.1);}

html {width: 100%; height: 100%;}

body {width: 100%; height: 100%;}

.svgSprite {
    background-image: url('./svgicons/form_icons_sprite.svg');
    background-repeat: no-repeat;
    background-size: 600%;
}

.svgSprite.add {
    background-position: 0px 0px;
    width: 12px;
    height: 12px;
}

.svgSprite.delete {
    background-position: -16px 0px;
    width: 16px;
    height: 16px;
}

.svgSprite.expandDark {
    background-position: -24px 0px;
    width: 12px;
    height: 12px;
}

.svgSprite.collapseDark {
    background-position: -36px 0px;
    width: 12px;
    height: 12px;
}

.svgSprite.expandGreen {
    background-position: -48px 0px;
    width: 12px;
    height: 12px;
}

.svgSprite.collapseGreen {
    background-position: -60px 0px;
    width: 12px;
    height: 12px;
}

.svgSprite.search {
    background-position: 0px -12px;
    width: 12px;
    height: 12px;
}

.svgSprite.search2 {
    background-position: -16px -16px;
    width: 16px;
    height: 16px;
}

</style>
</head>

<body>
<div class="svgSprite add"></div>
<div class="svgSprite delete"></div>
<div class="svgSprite expandDark"></div>
<div class="svgSprite collapseDark"></div>
<div class="svgSprite expandGreen"></div>
<div class="svgSprite collapseGreen"></div>
<div class="svgSprite search"></div>
<div class="svgSprite search2"></div>
</body>

</html> 
```

基本上，我想知道是否有更简单的方法来定义 spritesheet 中的单元格并简化我用来告诉每个 div 从 spritesheet 显示哪个图标的 CSS。

我更希望这个解决方案是严格的 SVG 和 CSS；我对使用 JavaScript 库不感兴趣。我的目标是让它达到一个点，我可以简单地定义单元格并让我想要的特定图标自动缩放以适应其容器，同时保持其纵横比。目前，为了使图标适合其父容器，需要明确定义其宽度和高度，并与父容器的宽度和高度相匹配。如果我更改父容器的宽度和高度，我也需要更改背景位置的大小。

然后是缩放问题。使用此设置，SVG 会缩放到要在屏幕上绘制的适当大小，但如果我决定使用浏览器的缩放进行缩放，它会像素化。这不是 SVG 应该如何工作的。

我想我可以将每个图标放在它自己的文件中，因为这看起来效果很好，但我真的很喜欢使用精灵；它不仅为我节省了几个服务器请求，而且很酷。

我知道[SVG Icon Loader](http://code.google.com/p/svg-icon-loader/)。这很酷，但它是我不想依赖的另一个 JavaScript 文件。

我已经阅读了 w3 SVG 文档、MDN SVG 文档以及关于 SO 的以下主题：

[SVG 和精灵表](https://stackoverflow.com/questions/9414207/svg-spritesheets)

[使 <svg> 适合 <object> 容器的大小](https://stackoverflow.com/questions/4737243/fit-svg-to-the-size-of-object-container)

[使用 SVG 作为背景图片](https://stackoverflow.com/questions/9185434/using-svg-as-background-image)

......但即使如此，我还没有设法找到解决方案。

编辑：我忘了提，这需要在 IE9 中工作。我敢肯定，这有点问题，但 IE9 的 SVG 支持不错，这就是我为这个项目选择 SVG 的原因。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-05-05T10:09:14.237

如果您的图标大小相同，您可以执行以下操作：

1.  将您的图标水平打包到 sprite 中（如果图标位于单独的文件中，请使用[svg-sprite ）。](https://github.com/jkphl/svg-sprite)
2.  `background-size: auto 100%;`为您的目标选择器设置。
3.  设置您的目标元素' `width`，`height`或`font-size`为比例。

```
.icon {
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="64" height="16" viewBox="0 0 64 16"> <circle fill="blue" cx="8" cy="8" r="8"/> <circle fill="red" cx="24" cy="8" r="8"/> <circle fill="yellow" cx="40" cy="8" r="8"/> <circle fill="green" cx="56" cy="8" r="8"/> </svg>');
    background-repeat: no-repeat;
    background-size: auto 100%;
    display: inline-block;
}
.icon.small {
    height: 1em;
    width: 1em;
}
.icon.medium {
    height: 2em;
    width: 2em;
}
.icon.large {
    height: 4em;
    width: 4em;
}
.icon_1 {
    background-position: 0 0;
}
.icon_2 {
    background-position: 33.33% 0;
}
.icon_3 {
    background-position: 66.67% 0;
}
.icon_4 {
    background-position: 100% 0;
}
```

```
<span class="icon icon_1 small"></span>
<span class="icon icon_1 medium"></span>
<span class="icon icon_2 large"></span>
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-04T22:12:53.557

> 基本上，我想知道是否有更简单的方法来定义 spritesheet 中的单元格并简化我用来告诉每个 div 从 spritesheet 显示哪个图标的 CSS。

~~不，你不能更容易。~~

试试[这篇文章](http://dev.webonomic.nl/unleash-the-power-of-svg-sprites)

> 然后是缩放问题。使用此设置，SVG 会缩放到要在屏幕上绘制的适当大小，但如果我决定使用浏览器的缩放进行缩放，它会像素化。这不是 SVG 应该如何工作的。

在 Chromium 18 中，它看起来相当不错 - 根本没有像素化。

在我的测试浏览器列表（FF3.6 Opera 9.2 IE6）中，我没有看到我在 Chromium 中看到的内容

关于IE9，可能是[引擎问题](https://stackoverflow.com/questions/6111785/inline-svg-content-not-displaying-in-ie-screenshot)

# javascript - JavaScript onTouch 不起作用

> ID：10956637
> 
> 赞同：5
> 
> 时间：2012-06-08T22:14:44.577
> 
> 标签：javascript, touch

谁能告诉我为什么这个 onTouch 处理程序没有触发。

```
var myDiv = document.getElementById('existingContent');
var myButton = '<a href="#" onClick="logOut();" ontouch="logOut()">log out</a>';
myDiv.appendChild(myButton);

function logOut() {
  alert('hello');
} 
```

我正在使用 iPad 1。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-08T22:47:10.427

我的建议与MDN 上提出[的](https://developer.mozilla.org/en/DOM/Touch_events)建议相同：

```
var el = document.getElementsByTagName("canvas");  
el.addEventListener("touchstart", handleStart, false); 
```

我对 ontouch 属性的犹豫是跨设备支持。为此，您可能会考虑特征检测。

[Modernizr](http://modernizr.com/)是一种流行的方法来确定是否在运行时启用了触摸。

如果启用了上面的事件，那么 touch 或 no-touch 类将被添加到 html 元素中，并用于确定上面的代码是否应该运行。

编辑：

在随后的几天里，我遇到了[这个](http://www.queness.com/post/11755/11-multi-touch-and-touch-events-javascript-libraries)描述触摸事件的文档。与许多技术一样，它还有更多...

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-12-18T00:01:46.043

根本没有`"touch"`事件。您可以找到`touchstart`、和事件，`touchend`如此[链接](http://www.w3.org/TR/touch-events/#dfn-touchcancel)所示。我认为您必须在 HTML 中使用：`touchmove``touchcancel``touchstart`

```
ontouchstart="logOut()" 
```

另请参阅此[网页](https://developer.apple.com/library/ios/documentation/AppleApplications/Reference/SafariWebContent/HandlingEvents/HandlingEvents.html)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-08-10T11:58:35.187

尝试使用**onfocus="logOut()"**而不是 ontouch="logOut()"

# python - Python：如何访问字典中的元组值

> ID：10956645
> 
> 赞同：4
> 
> 时间：2012-06-08T22:15:37.667
> 
> 标签：python

我有一个字典设置如下：

```
from collections import namedtuple

Point = namedtuple('Point', 'r w')
mydict= {
    'user1': {'item1': Point(2.5,0.1),'item2': Point(3.5,0.6)},
    'user2': {'item1': Point(3.0,0.3), 'item3': Point(3.5,0.8)},
    'user3': {'item1': Point(2.0,0.4),'item3': Point(0.5,0.1), 'item4': Point(1.5,0.7)}
} 
```

我想找到一种有效的方法来获取 Point 中的值的平均值。即我想获得'item3'的r点值（point.r）的平均值，即（3.5 + 0.5）/ 2

谢谢，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-08T22:19:32.877

你可以这样做：

```
r_vals = [u['item3'].r for u in mydict.itervalues() if 'item3' in u]
if r_vals:
   r_avg = sum(r_vals)/len(r_vals)
else:
   r_avg = 0   # ??? 
```

# php - 从 MySql 中获取当前日期在开始日期和结束日期之间的行（检查当前日期是否在开始日期和结束日期之间）

> ID：10956646
> 
> 赞同：3
> 
> 时间：2012-06-08T22:15:56.030
> 
> 标签：php, mysql, date, calendar

我正在尝试从数据库中进行选择以获取日期为当月的“活动”。到目前为止，我已经成功地抓取了在当月内开始或结束的行。我现在需要做的是选择从一个月开始到几个月结束的行（**例如：** *这是一年中的第三个月，并且有一个从第一个月到第五个月的“活动”。*其他示例*有一个从 2012 年到 2013 年运行的“活动”*）

我希望有某种方法可以通过 MySql 选择所有可能运行 capaign 的行。如果不是，我应该抓取数据库中的所有数据，只显示当月运行的数据。

我已经制作了一个函数，可以显示数组中每个日期之间的所有天数，称为“dateRange”。我还创建了另一个显示活动运行了多少天，称为“runTime”。

**全选** *（显然）*

```
$result = mysql_query("SELECT * FROM campaign"); 
```

**选择本月开始**

```
$result = mysql_query("SELECT * FROM campaign WHERE YEAR( START ) = YEAR( CURDATE( ) ) AND MONTH( START ) = MONTH( CURDATE( ) )"); 
```

**选择本月结束**

```
$result = mysql_query("SELECT * FROM campaign WHERE YEAR( END ) = YEAR( CURDATE( ) ) AND MONTH( END ) = MONTH( CURDATE( ) ) LIMIT 0 , 30"); 
```

**代码示例**

```
while($row = mysql_fetch_array($result))
{
$dateArray = dateRange($row['start'], $row['end']);

echo "<h3>" . $row['campname'] . "</h3> Start " . $row['start'] . "<br /> End " . $row['end'];
echo runTime($row['start'], $row['end']);
print_r($dateArray);
} 
```

关于日期，MySql 数据库只保存活动的开始日期和结束日期。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T22:21:01.043

要检测日期/时间的重叠，您可以执行以下操作：

```
//range of dates to get overlap. means if any row in the database has
//a day in its start/end range that falls between these days
$startDate = '2012-06-01';
$endDate = '2012-06-30';

$sql = "SELECT *
    FROM campaign
    WHERE
        `start` < '$endDate'
        AND `end` > '$startDate'"; 
```

这将从活动中找到任何一天介于 $startDate 和 $endDate 之间的任何行。这也适用于所有发生的活动......：

1.  在 $startDate 之前开始并在 $endDate 之前结束（日期范围之间的结束日期）
2.  在 $startDate 之后开始并在 $endDate 之前结束（在日期范围之间开始和结束）
3.  在 $startDate 之前开始并在 $endDate 之后结束（开始和结束包含日期范围）
4.  在 $startDate 之后开始并在 $endDate 之后结束（日期范围之间的开始日期）

此外，这个查询本身具有 $startDate 和 $endDate 作为独占。这意味着如果某件事从 5 月 31 日开始（基于上面的示例日期）并在 6 月 1 日结束，则不会包括在内。如果您希望日期包含在内，您可以将 and 更改为`>`and`<`以`>=`包含`<=`开始和结束日期。

# list - Erlang 位索引

> ID：10956653
> 
> 赞同：1
> 
> 时间：2012-06-08T22:16:30.427
> 
> 标签：list, binary, erlang, bitmask, bitstring

我目前正在尝试学习erlang，我想做的是对存储在位数组或int中的数组的特定索引执行操作。如果某个位置有 0，则不使用该位置的数组索引。

因此，设想以下内容：

```
Example the array is: [1, 3, 5, 42, 23]
My bit array is: 21 = 10101 in binary
so I'm using indicies 1,3,5
so I'm calling a function on [1, 5, 23] 
```

我的功能是形式

```
my_function(Array, BitArray) ->
    SubArray = get_subarray_from_bitarray(Array, BitArray),
    process_subarray(SubArray). 
```

我需要有关 get_subarray_from_bitarray() 的帮助。我知道 erlang 对位字符串有特殊的语法（类似于 <<>>），所以有没有一种有效的方法来索引位数组以获取索引？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T03:19:51.280

大多数时候，Erlang 使用列表和递归，所以我认为单独遍历每个位而不是尝试以迭代方式索引每个位是惯用的。

[关于如何使用位串的文档在这里。](http://www.erlang.org/doc/programming_examples/bit_syntax.html) 为了从数字 21 创建一个位串，我们可以写`<<21>>`. 由于二进制成员的默认类型是整数，而整数的默认大小是 8，它将产生一个看起来像`00010101`. 如果要专门获取一个值的最后 N 个字节是`<<Value:N>>`. 为了得到 21 的最后 5 位，我们可以说`<<21:5>>`哪个会产生`10101`.

我写了以下模块来做你想做的事：

```
-module(bitmask).
-export([get_subarray_from_bitarray/2]).

get_subarray_from_bitarray(Bitstring, List) ->
  get_subarray_from_bitarray_loop(Bitstring, List, []).

get_subarray_from_bitarray_loop(_Bits, [], Gathered) ->
  io:format("End of list~n", []),
  lists:reverse(Gathered);
get_subarray_from_bitarray_loop(<<>>, _Others, Gathered) ->
  io:format("End of bitstring~n", []),
  lists:reverse(Gathered);
get_subarray_from_bitarray_loop(<<Bit:1, Rest/bitstring>>, [Item | Others], Gathered) ->
  io:format("Bit: ~w ~n", [Bit]),
  case Bit of
    1 -> get_subarray_from_bitarray_loop(Rest, Others, [Item | Gathered]);
    0 -> get_subarray_from_bitarray_loop(Rest, Others, Gathered)
  end. 
```

当列表中的位或项用完时，前 2 个子句将返回最终列表。重要的位语法在最后一个子句的开头，`<<Bit:1, Rest/bitstring>>`. 这将值设置为`Bit`位串中第一位的值，以及位串`Rest`的其余部分。根据 Bit 的值，我们决定是否将当前项目添加到列表中。

下面的示例调用：

```
> bitmask:get_subarray_from_bitarray(<<21:5>>, [1, 3, 5, 42, 23]).   
Bit: 1 
Bit: 0 
Bit: 1 
Bit: 0 
Bit: 1 
End of list
[1,5,23]
> bitmask:get_subarray_from_bitarray(<<31>>, [1, 3, 5, 42, 23]).  
Bit: 0 
Bit: 0 
Bit: 0 
Bit: 1 
Bit: 1 
End of list
[42,23]
> bitmask:get_subarray_from_bitarray(<<5:3>>, [1, 3, 5, 42, 23]). 
Bit: 1 
Bit: 0 
Bit: 1 
End of bitstring
[1,5] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T22:36:56.650

该功能的可能实现`get_subarray_from_bitarray/2`可能是：

```
get_subarray_from_bitarray(Array, BitArray) ->
    gsb(Array, BitArray, []).

gsb(_, 0, R) -> lists:reverse(R);
gsb([A1|A2], B, R) ->
  NextR = if B band 1 /= 0 ->
     [A1|R];
  true ->
     R
  end,
  gsb(A2, B div 2, NextR). 
```

我很确定列表理解也会非常好。留给读者作为练习:)

# javascript - jQuery - 在 XML 树中获取某些标签

> ID：10956658
> 
> 赞同：0
> 
> 时间：2012-06-08T22:17:38.077
> 
> 标签：javascript, jquery, xml

假设我有`XML`这样的：[http ://ws.audioscrobbler.com/2.0/?method=track.getInfo&api_key=b25b959554ed76058ac220b7b2e0a026&track=Just%20for%20Me&artist=Hinoi%20Team](http://ws.audioscrobbler.com/2.0/?method=track.getInfo&api_key=b25b959554ed76058ac220b7b2e0a026&track=Just%20for%20Me&artist=Hinoi%20Team)

我想进入分支的`<name>`内部。`<artist>`然而，还有其他以`<name>`XML 命名的标签。我如何`<artist>`专门针对里面的那个？

这是我正在使用的：

```
$.ajax({
        type: "GET",
        url: "http://ws.audioscrobbler.com/2.0/?method=track.getInfo&api_key=b25b959554ed76058ac220b7b2e0a026&track="+yourTrack+"&artist="+yourArtist,
        dataType: "xml",
        success: function(xml) {
          $(".loading").css("display", "none");
            $(xml).find('track').each(function(){
                var id = $(this).attr('id');
                console.log("Success!");
                var name = $(this).find('name').text();
                $("#more").append("Listing results...\n");
                $("#more").append("Name: " + name);
            });
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T22:19:59.547

由于`name`是 的直接子代`artist`，您可以使用`>`来获取子代：

```
var name = $(this).find('artist > name').text(); 
```

`name`或者，因为在中没有其他内容`artist`：

```
var name = $(this).find('artist name').text(); 
```

# sql-server-2008 - 在开发大型 Web 应用程序时是否会使用被认为是不好的做法的实体框架

> ID：10956662
> 
> 赞同：0
> 
> 时间：2012-06-08T22:18:27.323
> 
> 标签：sql-server-2008, entity-framework

在开发 asp.net mvc3 Web 应用程序时，我已经使用实体框架大约 1.5 年了，但是最近在与一些客户的一些会议中，他们提到在实体框架案例中使用面向对象代码和关系数据库之间的桥梁有大型应用程序中的性能问题或服务器功能不是很充足；**因为实体框架在与数据库交互时会添加额外的查询以检索相关数据，如果我直接在我的应用程序中编写 Sql 查询，则可以避免这种情况。所以我应该考虑直接在我的 mvc 应用程序中编写 sql 查询以直接与我的 Sql 数据库交互，而无需通过 EF 执行此操作。** 此致

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T22:33:17.850

这是时间和精力的问题。使用实体框架进行开发会比使用 SQL 语句更快。

1.  让它工作，因此易于维护
2.  如果存在性能问题，则 Profile，***然后***优化您的代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T06:57:16.557

自过去 2 年以来，我一直在使用实体框架，到目前为止，即使在大型应用程序中，我们也没有遇到任何大麻烦。

正如@Jim Barrows 所说

*   使用实体框架非常简单快捷
*   如果它给您带来性能问题，那么只需优化您的代码。

# php - 在附加到电子邮件之前将 vCard 文件保存到临时位置

> ID：10956666
> 
> 赞同：1
> 
> 时间：2012-06-08T22:19:12.120
> 
> 标签：php, email, email-attachments, vcf-vcard, temporary-files

是否可以将从数据库中的信息动态生成的 vcf 文件保存到临时位置，然后自动将临时文件附加到电子邮件（在将临时文件附加到电子邮件之前重命名）

PS：是的，我在重新问我以前的问题，你可以在[这里](https://stackoverflow.com/questions/10875464/send-email-in-php-with-attached-file-that-is-generated-from-database)找到，但我的问题有一个新的替代解决方案

# python - 从 __init__.py 中导入类以制作更短的导入语句有什么问题吗？

> ID：10956667
> 
> 赞同：1
> 
> 时间：2012-06-08T22:19:13.423
> 
> 标签：python

为了组织起见，我将每个班级都保存在自己的文件中。我还有用于将 GUI 对象与常规对象分开的文件夹。我正在考虑从模块的**init** .py 中导入类以使导入更整洁。

例如，而不是：

```
from myapp.widgets.preferencesdialog import PreferencesDialog 
```

我会改为`PreferencesDialog`从内部导入，`widgets/__init__.py`以便应用程序的其余部分只需要执行以下操作：

```
from myapp.widgets import PreferencesDialog 
```

我会遇到这种方法的任何问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T22:22:14.393

只要您没有在尝试放入其名称空间`PreferencesDialog`的单独文件中调用多个类，这种方法就没有错。`myapp.widgets`

只是避免`from preferencesdialog import *`inside `myapp.widgets`，您将需要显式地将任何新项目添加到`myapp.widgets`名称空间，但您将避免所有与`from ... import *`.

# linux - 添加文件时运行 shell 命令

> ID：10956668
> 
> 赞同：13
> 
> 时间：2012-06-08T22:19:28.263
> 
> 标签：linux, bash, shell, cron

我的 linux 机器上有一个名为 images 的文件夹。此文件夹已连接到网站，并且该网站的管理员可以向该网站添加图片。但是，当添加图片时，我想要一个命令来调整目录中所有图片的大小。

简而言之，我想知道如何在将新文件添加到特定位置时使服务器运行特定命令。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-09T03:27:09.983

我不知道人们如何将内容上传到此文件夹，但您可能希望使用比使用 inotify 监视目录更低技术的东西。

如果协议是 FTP 并且您可以访问 FTP 服务器的日志，我建议跟踪该日志以观察是否成功上传。这种事件触发的方法比使用传统 cron 的轮询方法更快、更可靠、负载更少，并且比使用 inotify 的方法更便携和更容易调试。

您处理此问题的方式当然取决于您的 FTP 服务器。我有一个正在运行的[vsftpd](https://security.appspot.com/vsftpd.html)，其日志包括如下行：

```
Fri May 25 07:36:02 2012 [pid 94378] [joe] OK LOGIN: Client "10.8.7.16"
Fri May 25 07:36:12 2012 [pid 94380] [joe] OK UPLOAD: Client "10.8.7.16", "/path/to/file.zip", 8395136 bytes, 845.75Kbyte/sec
Fri May 25 07:36:12 2012 [pid 94380] [joe] OK CHMOD: Client "10.8.7.16", "/path/to/file.zip 644" 
```

`UPLOAD`仅当 vsftpd 成功保存文件时才添加该行。您可以在这样的 shell 脚本中解析它：

```
#!/bin/sh

tail -F /var/log/vsftpd.log | while read line; do
  if echo "$line" | grep -q 'OK UPLOAD:'; then
    filename=$(echo "$line" | cut -d, -f2)
    if [ -s "$filename" ]; then
      # do something with $filename
    fi
  fi
done 
```

如果您使用的是 HTTP 上传工具，请查看该工具是否具有用于记录传入文件的文本日志文件。如果它不考虑向其添加某种记录器功能，那么它将生成您可以使用的日志`tail`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-09T02:05:13.033

正如 John 所说，`inotify`API 是一个起点，但是您可能对使用此 API 执行文件通知任务的一些工具感兴趣：

例如[**incron**](http://inotify.aiken.cz/?section=incron&page=about&lang=en)可用于在检测到文件或目录更改时运行类似 cron 的任务。

或者[**inotify-tools**](https://github.com/rvoicilas/inotify-tools/wiki/)，它是一组命令行工具，可用于构建自己的文件通知 shell 脚本。

[如果您查看 Wiki pake for inotify-tools 的底部，您将看到对更多工具的引用以及对 Python、Perl 或Ruby](https://github.com/aredridel/ruby-inotify)等高级语言的支持（[示例代码](https://github.com/aredridel/ruby-inotify/blob/master/examples/watcher.rb)）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-08T22:23:58.900

你可能想看看[`inotify`](http://linux.die.net/man/7/inotify)

> inotify API 提供了一种监控文件系统事件的机制。Inotify 可用于监视单个文件或监视目录。监视目录时，inotify 将为目录本身以及目录中的文件返回事件。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-06-22T12:11:58.173

```
#!/bin/bash

tail -F -n0 /var/log/vsftpd.log | while read line; do
  if echo "$line" | grep -q 'OK UPLOAD:'; then
    filename=$(echo $line | cut -d, -f2 |awk '{print $1}')
    filename="${filename%\"}"
    filename="${filename#\"}"
    #sleep 1s
    if [ -s $filename ]; then
      # do something with $filename
      echo $filename
    fi
  fi
done 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-09-06T20:47:54.953

使用 ghotis 工作

这是我为获得用户可用空间所做的工作：

```
#!/bin/bash

tail -F -n 1 /var/log/vsftpd.log | while read line; do
  if echo "$line" | grep -q 'OK LOGIN:'; then
    pid=$(sed 's/.*\[\([^]]*\)\].*/\1/g' <<< "$line")
    #the operator '<<<' doesnt exist in dash so use bash
    if [[ $pid != *"pid"* ]]; then
      echo -e "Disk 1: Contains Games:\n" > /home/vftp/"$pid"/FreeSpace.txt; df -h /media/Disk1/ >> /home/vftp/"$pid"/FreeSpace.txt
      echo -e "\r\n\r\nIn order to read this properly you need to use a text editor that can read *nix format files" >> /home/vftp/"$pid"/FreeSpace.txt
    fi
echo "checked"
#  awk '{ sub("\r$", ""); print }' /home/vftp/"$pid"/FreeSpace.txt > /home/vftp/"$pid"/FreeSpace.txt
  fi
done 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-13T20:56:52.363

如果文件是通过 HTTP 上传添加的，并且您的服务器是 apache，您可能需要检查 mod_security。

它使您能够为通过 HTTP POST 进行的每次上传运行脚本。

# php - 应用聊天中的 iOS

> ID：10956674
> 
> 赞同：-1
> 
> 时间：2012-06-08T22:20:04.180
> 
> 标签：php, iphone, mysql

所以我有一个包含点对点聊天的应用程序，一次只能在两个用户之间进行。我现在正在做的是当用户输入一条新消息时，它调用一个 PHP 脚本，将消息插入到一个 mysql 表中。然后每 5 秒代码调用一个下载所有消息的 php 脚本。所以消息之间最多有 10 秒的间隔。所以我的问题是，是否有更好的方式来进行点对点聊天。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T22:24:20.353

您可以将服务器用作媒人 - 仅用于查找另一部手机。您提供 IP 地址，以便一部电话可以联系另一部电话并启动连接。其中一部手机充当聊天服务器。

您可以在此处阅读有关使用 Cocoa 进行套接字编程的信息：http: [//cocoawithlove.com/2009/07/simple-extensible-http-server-in-cocoa.html](http://cocoawithlove.com/2009/07/simple-extensible-http-server-in-cocoa.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-30T00:01:31.023

您可以查看诸如使用 Twilio 的 IP 消息传递之类的内容。

在 iOS 快速入门 ( [https://www.twilio.com/docs/api/ip-messaging/guides/quickstart-ios](https://www.twilio.com/docs/api/ip-messaging/guides/quickstart-ios) ) 中，您可以在 Objective-C 或 Swift 中试用。

那里的服务器端应用程序（在 PHP 中）管理应用程序的身份和访问令牌，您最终得到的简单/示例 UI 是这样的：

[![简单 UI 中的最终产品](../Images/7c154f3e095ea81ec577a65686a4532a.png)](https://i.stack.imgur.com/yMOut.png)

[*注意：我为 Twilio 工作*]

# java - 如果我在调用 JVM 时多次指定系统属性，使用哪个值？

> ID：10956676
> 
> 赞同：23
> 
> 时间：2012-06-08T22:20:11.383
> 
> 标签：java, jvm, system-properties

如果我在调用 JVM 时多次指定系统属性，当我检索该属性时我将实际获得哪个值？例如

```
java -Dprop=A -Dprop=B -jar my.jar 
```

当我打电话时会有什么结果`System.getProperty("prop");`？

[Java 文档](http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html)在这方面并没有真正告诉我任何有用的信息。

在我对运行不同 JVM 的几台机器进行的非科学测试中，似乎最后一个值是返回的值（这实际上是我需要的行为），但我想知道这种行为是否实际上是在任何地方正式定义的，或者它是否会在 JVM 之间有所不同?

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-09T03:35:42.867

没有什么比编写一个小类来看看它是如何工作的更重要的了。

```
public class PropTest {

  public static void main(String[] args) {
    System.out.println(System.getProperty("prop"));
  }

} 
```

使用命令行编译和运行时

```
java -Dprop=A -Dprop=B -Dprop=C PropTest 
```

产生输出

```
C 
```

这意味着将值从左到右放入表中，最后一个值覆盖以前的值。

只是为了记下环境，Fedora 16, Linux 3.3.7, 64 bit

```
> java -version

java version "1.6.0_24"
OpenJDK Runtime Environment (IcedTea6 1.11.1) (fedora-65.1.11.1.fc16-x86_64)
OpenJDK 64-Bit Server VM (build 20.0-b12, mixed mode) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-09T02:36:54.563

java.util.System 类由一个 Properties 类支持，它只是 Hashtable 的一个扩展。假设在作为参数传递给 JVM 时按顺序读取值，那么最后分配的值将是最终值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-11-04T11:30:09.470

我不确定是否有任何有关 Oracle 的文档。

根据[IBM JRE 文件](https://www.ibm.com/support/knowledgecenter/en/SSB23S_1.1.0.15/com.ibm.java.vm.80.doc/docs/cmdline_specifying.html)：

命令行上 Java 选项的顺序定义了启动期间哪些选项优先。最右边的选项优先于最左边的选项。

# python - Python 或 Java 中的 Ruby on Rails 前端和服务器端处理。如何，什么，嗯？

> ID：10956683
> 
> 赞同：0
> 
> 时间：2012-06-08T22:21:34.060
> 
> 标签：python, ruby-on-rails, server-side

我是一名数据科学家和数据库老手，但在 Web 开发方面完全是新手，并且刚刚完成了我的第一个 Ruby On Rails 应用程序的开发。这个应用程序接受来自用户向我的前端网页提交数据的数据，并返回提交数据的统计信息。一些用户已经提交了太多的数据 - 它变得越来越慢，我认为我最好将数据处理推送到支持的 python 或 java 应用程序，而不是数据库。我什至不知道从哪里开始。关于如何最好地构建这个应用程序的任何想法？工作流程是 > 从前端应用程序提交的数据将其推送到 > 后端供我的服务器应用程序处理并 > 发送回我的 Ruby on Rails 页面。有什么好的教程可以涵盖这个吗？请帮忙！

我应该读什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T00:21:28.563

我看起来你不需要另一个应用程序，而是需要一种不同的处理数据的方法。后台处理怎么样？有[几个宝石](https://www.ruby-toolbox.com/categories/Background_Jobs)可以做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-23T13:07:17.730

您确定您的数据库维护良好且高效（良好的索引、规范化、干净等）

或者你可以不使用消息队列，所以你保留你的 rails crud 应用程序，然后将作业添加到队列中。后端（或不同机器）上的 Python 脚本从队列中读取，处理然后插入回数据库或将结果添加到结果队列或您想从中读取它们的任何位置

# java - ActionListener 似乎不起作用？

> ID：10956684
> 
> 赞同：1
> 
> 时间：2012-06-08T22:21:38.327
> 
> 标签：java, swing, graphics, actionlistener, paintcomponent

我想做一个2D游戏。我开始制作绘画课，但遇到了一个问题：这`ActionListener`行不通。它不会绘制或输出我的信息来说明它正在工作。这是代码：

```
public class Drawing extends JPanel implements ActionListener {

    private int count = 0;

    public void actionPerformed(ActionEvent e) {
        count++;
        repaint();
    }

    @Override
    protected void paintComponent(Graphics g) {
        System.out.println("Hi");
        g.setColor(Color.black);
        g.clearRect(0, 0, Boot.WIDTH, Boot.HEIGHT);
        g.fillRect(0, 0, Boot.WIDTH, Boot.HEIGHT);

        g.setColor(Color.white);
        g.drawString("Path count: " + count, 50, 50);
    }
} 
```

我认为这会起作用，因为我在其他项目中使用了这种绘图方式。什么会导致这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T22:30:26.010

您不应该保留对 Graphics 对象的引用并`paint()`直接调用。您应该调用`repaint()`并等待 Swing 调用该`paintComponent()`方法，您应该重写该方法以在 Swing 作为参数传递给该方法的 Graphics 对象上执行您的自定义绘画。

有关详细信息，请参阅[http://java.sun.com/products/jfc/tsc/articles/painting/index.html](http://java.sun.com/products/jfc/tsc/articles/painting/index.html)。

```
public class Drawing extends JPanel implements ActionListener {

    private int count = 0;

    public void actionPerformed(ActionEvent e) {
        count++;
        repaint();
    }

    @Override
    protected void paintComponent(Graphics g) {
        System.out.println("Hi");
        g.setColor(Color.black);
        g.clearRect(0, 0, Boot.WIDTH, Boot.HEIGHT);
        g.fillRect(0, 0, Boot.WIDTH, Boot.HEIGHT);

        g.setColor(Color.white);
        g.drawString("Path count: " + count, 50, 50);
    }
} 
```

# python - Matplotlib 动画太慢（~3 fps）

> ID：10956685
> 
> 赞同：3
> 
> 时间：2012-06-08T22:21:39.363
> 
> 标签：python, matplotlib

我需要对数据进行动画处理，因为它们带有 2D histogram2d （也许以后是 3D，但我听说 mayavi 更好）。

这是代码：

```
import numpy as np
import numpy.random
import matplotlib.pyplot as plt
import time, matplotlib

plt.ion()

# Generate some test data
x = np.random.randn(50)
y = np.random.randn(50)

heatmap, xedges, yedges = np.histogram2d(x, y, bins=5)
extent = [xedges[0], xedges[-1], yedges[0], yedges[-1]]

# start counting for FPS
tstart = time.time()

for i in range(10):

    x = np.random.randn(50)
    y = np.random.randn(50)

    heatmap, xedges, yedges = np.histogram2d(x, y, bins=5)

    plt.clf()
    plt.imshow(heatmap, extent=extent)
    plt.draw()

# calculate and print FPS
print 'FPS:' , 20/(time.time()-tstart) 
```

它返回 3 fps，显然太慢了。是在每次迭代中使用 numpy.random 吗？我应该使用 blit 吗？如果有怎么办？

文档有一些很好的例子，但对我来说，我需要了解一切都是做什么的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-30T15:31:58.570

感谢@Chris，我再次查看了这些示例，并在这里发现[了这篇](https://stackoverflow.com/questions/10429556/animate-quadratic-grid-changes-matshow)非常有用的帖子。

正如@bmu 在他的回答（见帖子）中所说，使用动画。FuncAnimation 是我的方式。

```
import numpy as np
import matplotlib.pyplot as plt 
import matplotlib.animation as animation

def generate_data():
    # do calculations and stuff here
    return # an array reshaped(cols,rows) you want the color map to be  

def update(data):
    mat.set_data(data)
    return mat 

def data_gen():
    while True:
        yield generate_data()

fig, ax = plt.subplots()
mat = ax.matshow(generate_data())
plt.colorbar(mat)
ani = animation.FuncAnimation(fig, update, data_gen, interval=500,
                              save_count=50)
plt.show() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T12:18:47.570

我怀疑它是`np.histogram2d`在每个循环迭代中使用的。或者在循环的每个循环迭代中，`for`您正在清除并绘制一个新图形。为了加快速度，您应该创建一次图形，然后在循环中更新图形的属性和数据。查看[matplotlib 动画示例](http://matplotlib.sourceforge.net/examples/index.html)以获取有关如何执行此操作的一些指示。通常它涉及`matplotlib.pyploy.plot`在循环中调用 then ，调用`axes.set_xdata`and `axes.set_ydata`。

但是，在您的情况下，请查看 matplotlib 动画示例[动态图像 2](http://matplotlib.sourceforge.net/examples/animation/dynamic_image2.html)。在此示例中，数据的生成与数据的动画分离（如果您有大量数据，这可能不是一个好方法）。通过将这两个部分分开，您可以看到哪个导致了瓶颈，`numpy.histrogram2d`或者`imshow`（`time.time()`在每个部分周围使用）。

Ps`np.random.randn`是一个伪随机数生成器。这些往往是简单的线性生成器，每秒可以生成数百万个（伪）随机数，因此这几乎肯定不是您的瓶颈 - 绘制到屏幕几乎总是比任何数字运算都慢的过程。

# java - 精确表示为浮点数的数字是否可能不能精确表示为双精度数？

> ID：10956688
> 
> 赞同：3
> 
> 时间：2012-06-08T22:22:15.720
> 
> 标签：java, floating-point, double

我有一个问题来自另一个关于浮点数精度的问题。

现在，我知道浮点数不能总是准确地表示，因此它们被存储为可以表示的最接近的浮点数。

我的问题实际上是关于 和 的表示形式的`float`差异`double`。

**这个问题从何而来？**

假设我这样做：

```
System.out.println(.475d+.075d); 
```

那么输出不会是`0.55`但是`0.549999`（在我的机器上）

但是，当我这样做时：

```
System.out.println(.475f+.075f); 
```

我得到了正确的答案，即`0.55`（对我来说有点意外）

到目前为止，我的印象是`double`精度更高（*双精度更高，小数位数更长*）`float`。因此，如果一个 double 不能精确表示，那么它的等效浮点表示也将不准确地存储。

然而，我得到的结果对我来说有点令人不安。如果出现以下情况，我会感到困惑：

1.  我对什么`precision`意思有不正确的理解？
2.  `float`并且`double`表示方式不同，除了 double 具有更多位的事实之外？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T22:32:57.017

可以表示为 a 的数字`float`也可以表示为`double`。

你读到的只是*格式化的*输出，你没有读到实际的二进制表示。

```
System.out.println(Long.toBinaryString(Double.doubleToRawLongBits(.475d + .075d)));
// 11111111100001100110011001100110011001100110011001100110011001
System.out.println(Integer.toBinaryString(Float.floatToRawIntBits(.475f + .075f)));
// 111111000011001100110011001101

double d = .475d + .075d;
System.out.println(d);
// 0.5499999999999999
System.out.println((float)d);
// 0.55 (as expected)
System.out.println((double)(float)d);
// 0.550000011920929

System.out.println( .475f + .075f == 0.550000011920929d);
// true 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-08T22:23:56.977

精度只是意味着更多的位。不能表示为 a 的数字`float` *可能*具有作为 a 的精确表示`double`，但这些案例的数量相对于可能案例的总数是无限小的。

对于像这样的简单情况`0.1`，无论可用的位数是多少，它都不能表示为固定长度的浮点数。这与说诸如 1/7 之类的小数不能用十进制精确表示是一样的，无论您允许使用多少位数（只要位数是有限的）。您可以将其近似为 0.142857142857142857... 一遍又一遍地重复，但无论您持续多久，您都永远无法准确地写出它。

相反，如果一个数字可以精确地表示为 a `float`，那么它也可以精确地表示为 a `double`。双精度数具有更大的指数范围和更多的尾数位。

对于您的示例，明显差异的原因是`float`0.475 与其浮点表示之间的差异在“正确”方向，因此当发生截断时，它会按照您的预期进行。当增加可用的精度时，表示“更接近”0.475，但现在在相反的一侧。作为一个粗略的例子，假设最接近的可能浮点数是 0.475006，但在双精度中，最接近的可能值是 0.474999。这会给你你看到的结果。

编辑：这是一个快速实验的结果：

```
public class Test {

    public static void main(String[] args)
    {
        float  f = 0.475f;
        double d = 0.475d;

        System.out.printf("%20.16f", f);
        System.out.printf("%20.16f", d);
    }
} 
```

输出：

```
 0.4749999940395355  0.4750000000000000 
```

这意味着数字 0.475 的浮点表示，如果你有大量的位，将只比 0.475 小一点。这可以在双重表示中看到。然而，第一个“错误”位出现在右边，当被截断以适应 a 时`float`，它恰好是 0.475。这纯粹是个意外。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T22:53:56.213

如果有人认为浮点类型实际上代表值的范围，而不是离散值（例如`0.1f`，不代表 13421773/134217728，而是“介于 13421772.5/134217728 和 13421773.5/134217728 之间的某个值”），从`double`to 的转换`float`通常是准确的, 而从`float`to 的转换`double`通常不会。不幸的是，Java 允许隐式执行通常不准确的转换，同时需要在通常准确的方向上进行类型转换。

对于 type 的每个值，都`float`存在一个 type 的值，其范围以's 范围`double`的中心为中心。`float`这并不意味着它`double`是浮点值的准确表示。例如，转换`0.1f`为`double`产生一个值，意思是“介于 13421772.9999999/134217728 和 13421773.0000001/134217728 之间”，该值偏离隐含公差超过一百万倍。

对于几乎每个 type 值`double`，都存在一个 type 值，`float`其范围完全包括`double`. 唯一的例外是其范围恰好位于两个值之间的边界上的`float`值。将这些值转换为`float`需要系统选择一个范围或另一个范围；如果系统在实际表示低于其范围中心的数字时四舍五入`double`，反之亦然，则 的范围`float`不会完全包含的范围`double`。但实际上，这不是问题，因为这意味着不是`float`从`double`代表一个范围，例如（13421772.5/134217728 到 13421773.5/134217728），它将代表一个范围，例如（13421772.4999999/134217728 到 13421773.5000001/134217728）。与 a `float`to `double`cast 造成的可怕的不精确相比，那微小的不精确不算什么。

顺便说一句，返回到您正在使用的特定数字，当您以浮点数进行计算时，计算结果为：

```
0.075f = 20132660±½ / 268435456
0.475f = 31876710±½ / 67108864
总和 = 18454938±½ / 33554432

```

换句话说，总和表示大约在 0.54999999701 和 0.55000002682 之间的某个数字。最自然的表示是 0.55（因为实际值可能大于或小于该值，所以额外的数字将毫无意义）。

# r - getURL，用德语特殊字符解析网站

> ID：10956689
> 
> 赞同：1
> 
> 时间：2012-06-08T22:22:15.857
> 
> 标签：r, geturl

我正在使用 getURL() 和 htmlParse() - 如何使带有特殊字符的网站内容正确显示？

```
 library(RCurl); library(XML)
        script <- getURL("http://www.floraweb.de/pflanzenarten/foto.xsql?suchnr=814")
        doc <- htmlParse(script, encoding = "UTF-8")
        xpathSApply(doc, "//div[@id='content']//p", xmlValue)[2]
        [1] "Bellis perennis L., GÃ¤nseblÃ¼mchen"
        # should say:
        [1] "Bellis perennis L., Gänseblümchen"

        > sessionInfo()
    R version 2.14.1 (2011-12-22)
    Platform: i386-pc-mingw32/i386 (32-bit)

    locale:
    [1] LC_COLLATE=German_Austria.1252  LC_CTYPE=German_Austria.1252    LC_MONETARY=German_Austria.1252 LC_NUMERIC=C                   
    [5] LC_TIME=German_Austria.1252    

    attached base packages:
    [1] stats     graphics  grDevices utils     datasets  methods   base     

    other attached packages:
    [1] jpeg_0.1-2     RCurl_1.9-5.1  bitops_1.0-4.1 XML_3.9-1.1   

    loaded via a namespace (and not attached):
    [1] tools_2.14.1

options("encoding")
$encoding
[1] "native.enc" 
```

# c++ - 在 .cpp 中，有没有办法从它的 .h 中自动实现所有功能？

> ID：10956690
> 
> 赞同：10
> 
> 时间：2012-06-08T22:22:24.857
> 
> 标签：c++, netbeans

我认为这会提高开发时的生活质量，但谷歌什么也没想到，我在 Netbeans 内部也找不到任何具体的东西。

我想要的是从这个标题开始：

```
class bla
{
public:
    static void gfg(somearg asd);
}; 
```

然后我打开空白的 bla.cpp 并按下“自动实现”。之后，它看起来像这样：

```
#include "bla.h"

static void bla::gfg(somearg asd)
{
    //TODO: implement
    throw unimplemented("void bla::gfg(somearg) is unimplemented");
} 
```

有人知道这样的工具吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T23:06:48.500

我找到了[http://www.radwin.org/michael/projects/stubgen/](http://www.radwin.org/michael/projects/stubgen/)

“stubgen 是一个 C++ 开发工具，它使代码文件与其关联的头文件保持同步。当它在没有相应实现的头文件中找到成员函数声明时，它会创建一个带有描述性注释头的空骨架。”

这看起来就像你想要它做的那样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-27T10:20:26.277

一段时间过去了，与此同时，请求的功能似乎已经在 netbeans 中实现了。参考[https://netbeans.org/bugzilla/show_bug.cgi?id=213811](https://netbeans.org/bugzilla/show_bug.cgi?id=213811)，其中还给出了如何使用它的描述：

> 注意：
> 实现了 CTRL+SPACE。
> 如果按下 CTRL+SPACE，IDE 建议实现类方法：
> - 内部文件已经至少有一个方法定义
> - 在方法声明之间

# mysql - IDE 中的 SQL 组件连接问题

> ID：10956696
> 
> 赞同：1
> 
> 时间：2012-06-08T22:23:36.743
> 
> 标签：mysql, delphi, delphi-xe2, firemonkey, dbexpress

晚上好，伙计们。

我目前正在尝试开始开发一个项目，以使我自己的生活更轻松一些。本质上，我想连接到`MySQL`在远程服务器上运行的数据库，然后从那里开始使用一些不同的选项。有问题的数据库用于`Joomla!`安装，我的重点将主要是管理来自桌面应用程序的文章（而不是使用网站上的管理员后端）。

我已经允许我自己的主机访问远程服务器（通过`CPanel`我的托管服务提供商使用的 Web 界面），并确保它`LIBMYSQL.dll`在`RAD Studio\9.0\bin`文件夹内，并再次在我的可执行文件文件夹内（以避免任何与无法相关的问题初始化。驱动程序）。我已经通过使用成功连接到服务器`MySQL Workbench`并且可以自由查询表。现在，进入问题。

**这是我的第一个数据库应用程序，因此请理解可能需要简化或过多的解释**

我在设计时设置一些组件属性时遇到问题。我有一个`TSQLConnection`组件，一个`TSQLDataSet`组件和一个`TSQLTable`组件。我已经设置了服务器属性`TSQLConnection`以使用我的服务器。

但是，如果我尝试从`Delphi XE2`IDE 内的数据库中检索任何内容（即出现登录提示），例如将`Active`属性更改为 true，则会出现`Can't connect to MySQL server on 'xxx.xxx.xxx.xxx' (10061)`错误（其中“x”与我的服务器 IP 的一部分相关）。

如果我自己运行应用程序，然后单击界面上的“连接”按钮，它连接良好，没有错误。我在 、 和 事件中添加了例程，以`ShowMessage`验证它实际上正在经历，并且所有这些例程都按我预期的方式运行，成功时。由于我没有为它编写代码来做除此之外的任何事情（由于仍在学习基础知识），因此界面上没有可见的数据可供我使用，但至少似乎存在连接。`AfterConnect``AfterDisconnect``OnLogin``TSQLConnection`

澄清一下，我可以从我开发的应用程序（以及从`MySQL Workbench`，但不能从 Delphi IDE 本身内部）连接。

那么，我在哪里错了？

我猜这可能是我自己的一些疏忽，因为我对数据库主题缺乏了解，但我非常热衷于扩展桌面环境并开始与 IT 世界的更多领域合作（不会失去我非常喜欢的事物的发展方面）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T21:34:43.523

正如@SertacAkyuz 在原始评论中指出的那样，这确实是与我的连接有关的问题，特别是防火墙设置。我曾假设“连接被拒绝”与正在进行的连接尝试有关，但被远程服务器主动拒绝。你知道的越多。

# python - Python - 从列表中删除字符

> ID：10956702
> 
> 赞同：0
> 
> 时间：2012-06-08T22:24:10.520
> 
> 标签：python, list

我有这样的元素列表：

```
['1:{test}', '2:{test}', '4:{1989}', '9:{test}', ''] 
```

我的问题是：

如何从此列表的元素中删除特定字符？

结果我想要：

```
['test', 'test', '1989', 'test', ''] 
```

任何建议，解决方案？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T22:27:01.207

```
>>> re.findall(r'\{(.*)\}', '1:{test}')
['test'] 
```

用它做一个循环：

```
[(re.findall(r'\{(.*)\}', i) or [''])[0] for i in your_list] 
```

或许：

```
[''.join(re.findall(r'\{(.*)\}', i)) for i in your_list] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T22:26:20.250

您可以使用正则表达式，如下所示：

```
import re

s = re.compile("\d+:{(.*)}")

data = ['1:{test}', '2:{test}', '4:{1989}', '9:{test}', '']

result = [s.match(d).group(1) if s.match(d) else d for d in data] 
```

结果是

```
['test', 'test', '1989', 'test', ''] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T22:26:40.423

Python 的[`strip()`](http://docs.python.org/library/stdtypes.html#str.strip)函数正是这样做的——从字符串的末尾删除特定字符——但可能有更好的方法来做你想做的事。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T22:29:53.793

您还没有确切地说出模式是什么，或者如果没有大括号，您想要什么，但这将适用于您的示例：

```
stripped = []
for x in my_data:
    m = re.search("{.*}", x)
    stripped.append(m.group if m else x) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-08T22:31:16.210

```
t = ['1:{test}', '2:{test}', '4:{1989}', '9:{test}', '']
map(lambda string: re.search(r'(?<=\{).+(?=\})', string).group(0), t) 
```

当然，这不是格式最正确或最容易阅读的答案。这映射了一个匿名函数，该函数查找括号内的内容并将其返回到列表的每个元素，从而返回整个列表。

`(?<=...)`意思是“只匹配开头有这个的，但不包含在结果中

`(?=...)`意思是“只匹配最后有这个的，但不要把它包含在结果中

`.+`意思是“至少一个任何种类的字符”

# java - 为什么程序会意外停止？

> ID：10956703
> 
> 赞同：1
> 
> 时间：2012-06-08T22:24:15.687
> 
> 标签：java, android

我正在编写一个非常基本的程序，旨在让文本视图在屏幕上按下按钮后显示短语“Hello”，但无法弄清楚为什么每次运行它时，它都会说应用程序已意外停止。

这是我写的程序：

```
public class EtudeActivityActivity extends Activity{
  TextView tvResponse;

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    final TextView tvResponse = (TextView)  findViewById (R.id.tvResponse);
  }

  public void updateTV(View v) {
    tvResponse.setText("Hello");
  }
} 
```

`android:onClick = "updateTV"`另外，我在我的 main.xml 文件中插入了一个按钮。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T22:29:23.000

这是因为您没有设置`tvResponse`成员变量。相反，您使用相同的名称设置一个新的局部变量。所以当你打电话时`setText()`，你正在访问一个无效的引用

你需要改变

```
final TextView tvResponse = (TextView)  findViewById (R.id.tvResponse); 
```

至

```
tvResponse = (TextView)  findViewById (R.id.tvResponse); 
```

`updateTV()`设置成员变量，以便稍后（调用时）具有有效引用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T22:27:30.173

我怀疑您有一个名为的*实例*变量`tvResponse`，您没有向我们展示 - 这就是该`updateTV`方法将引用的内容。这与您在内部声明的*局部* 变量完全不同。我怀疑如果您将最后一行从局部变量声明更改为对变量的简单赋值，它可能会起作用。否则，如果没有为实例变量赋值，它将具有默认值，从而导致in 。`tvResponse``onCreate``onCreate``tvResponse``tvResponse``null``NullPointerException``updateTV`

# javascript - 怪癖模式和文档类型

> ID：10956708
> 
> 赞同：1
> 
> 时间：2012-06-08T22:24:36.453
> 
> 标签：javascript, css, doctype, quirks-mode

我正在开发一个网站： http: [//parkoura.tk/ashkon/blog.php](http://parkoura.tk/ashkon/blog.php)

我从来没有尝试过开发像这样复杂的东西，由于我没有经验，我遇到了以下问题：

在 quirks 模式 (Gecko/Webkit) 中，当没有声明 DTD 时，网页渲染得很好。

当我添加 doctype（4.1 过渡或 HTML5）以使页面开始在 IE 中工作时，页面右侧的滚动条停止工作。

如果没有神奇的修复，我将不得不重建网站——但我想知道在我这样做之前你是否对我有任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T22:34:12.930

首先验证代码，这将显示标记中存在一些错误：

[http://validator.w3.org/check?uri=http%3A%2F%2Fparkoura.tk%2Fashkon%2Fblog.php&charset=%28detect+automatically%29&doctype=Inline&group=0](http://validator.w3.org/check?uri=http%3A%2F%2Fparkoura.tk%2Fashkon%2Fblog.php&charset=%28detect+automatically%29&doctype=Inline&group=0)

例如，您使用`<header>`了而不是`<head>`，您有不匹配的标签，您已经转义了很多引号。

修复最严重的错误可能会使页面也与 doctype 一起工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T22:32:52.437

从这里开始：[validator.w3.org](http://validator.w3.org/check?uri=http://parkoura.tk/ashkon/blog.php&charset=%28detect%20automatically%29&doctype=Inline&group=0)。一旦你解决了这些错误/警告，你应该处于良好状态。专注于创建有效的 HTML 文档，您不必重建您的网站。

# java - 正则表达式变化

> ID：10956710
> 
> 赞同：0
> 
> 时间：2012-06-08T22:25:09.087
> 
> 标签：java, regex

我不太擅长正则表达式..

我如何在这个正则表达式模式中添加“.tile”（不带引号）：

```
private static final Pattern JSP_PathPattern = Pattern.compile("(.+\\/)(\\w+)(\\.(jsp|.?htm.?|.?xslt,.?xsl))$", Pattern.CASE_INSENSITIVE); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T22:28:10.437

```
private static final Pattern JSP_PathPattern = Pattern.compile("(.+\\/)(\\w+)(\\.(jsp|.?htm.?|.?xslt,.?xsl|tile))$", Pattern.CASE_INSENSITIVE); 
```

但是，根据我对代码的理解（检查文件扩展名），这个正则表达式在几个方面存在缺陷：

*   额外的，非文字的`.`（匹配*任何东西*，因此允许类似的东西`xhtmy`）
*   错误`,`的`xlt`
*   无需进行文件名检查。

因此，我推荐以下表达式：

```
private static final Pattern JSP_PathPattern = Pattern.compile("(\\.(jsp|html?|xslt?|tile))$", Pattern.CASE_INSENSITIVE); 
```

公平地说，您不需要使用正则表达式。`.`您可以在最后一个元素上进行字符串拆分并测试。

无论哪种方式，我都鼓励你[学习正则表达式](http://www.regular-expressions.info/)。

# iphone - iOS 智能卡接口

> ID：10956711
> 
> 赞同：2
> 
> 时间：2012-06-08T22:25:27.760
> 
> 标签：iphone, objective-c, linker, xcode4.3, smartcard-reader

我试图编写代码来访问读卡器。我已经在我的项目中包含了框架但无法解决链接问题？你对此有什么意见吗？

> “_OBJC_CLASS_$_EAAccessoryManager”，引用自：iSmartSDK中的objc-class-ref“_EAAccessoryDidConnectNotification”，引用自：-iSmartSDK中的[iSmart init]-iSmartSDK中的[iSmart dealloc]“_OBJC_CLASS_$_EASession”，引用自：objc-class-参考 iSmartSDK

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-08T22:28:39.860

在我看来，好像您没有链接到 ExternalAccessory 框架。

# c# - ASP.NET MVC 3 Razor：将数据从视图传递到控制器

> ID：10956721
> 
> 赞同：10
> 
> 时间：2012-06-08T22:26:22.927
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor

我对.NET 的所有东西都是全新的。我有一个带有 HTML 表单的非常基本的网页。我希望“onsubmit”将表单数据从视图发送到控制器。我看过与此类似的帖子，但没有一个答案涉及新的 Razor 语法。我如何处理“onsubmit”，以及如何从 Controller 访问数据？谢谢！！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-08T22:41:44.657

您可以包装您想要在 Html.Beginform 中传递的视图控件。

例如：

```
@using (Html.BeginForm("ActionMethodName","ControllerName"))
{
 ... your input, labels, textboxes and other html controls go here

 <input class="button" id="submit" type="submit" value="Submit" />

} 
```

当按下提交按钮时，Beginform 中的所有内容都将提交给“ControllerName”控制器的“ActionMethodName”方法。

在控制器端，您可以像这样访问从视图中接收到的所有数据：

```
public ActionResult ActionMethodName(FormCollection collection)
{
 string userName = collection.Get("username-input");

} 
```

上面的集合对象将包含我们从表单提交的所有输入条目。您可以像访问任何数组一样按名称访问它们：collection["blah"] 或 collection.Get("blah")

您也可以直接将参数传递给您的控制器，而无需使用 FormCollection 发送整个页面：

```
@using (Html.BeginForm("ActionMethodName","ControllerName",new {id = param1, name = param2}))
{
 ... your input, labels, textboxes and other html controls go here

 <input class="button" id="submit" type="submit" value="Submit" />

}

public ActionResult ActionMethodName(string id,string name)
{
 string myId = id;
 string myName = name;

} 
```

或者，您可以将这两种方法结合起来，并将特定参数与 Formcollection 一起传递。由你决定。

希望能帮助到你。

编辑：当我在写其他用户时，其他用户也向您推荐了一些有用的链接。看一看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T22:38:08.637

通过以下方式定义表单：

`@using (Html.BeginForm("ControllerMethod", "ControllerName", FormMethod.Post))`

将调用控制器“ControllerName”中的方法“ControllerMethod”。在该方法中，您可以接受模型或其他数据类型作为输入。有关使用表单和 razor mvc 的示例，请参阅[本](http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-5)教程。

# c# - 将画笔保存到独立存储

> ID：10956723
> 
> 赞同：1
> 
> 时间：2012-06-08T22:26:33.697
> 
> 标签：c#, wpf, isolatedstorage

我曾经使用这种[方法](http://www.dotnetfunda.com/articles/article955-using-isolatedstoragefile-to-store-data-in-wpf-application-class-events.aspx)来保存我的 WPF 应用程序的`IsolatedStorage`窗口位置（`Windows.Top`和） 。`Window.Left`

现在我想保存，总是在 IsolatedStorage 中，一个`Brush`. 它可以是一个`SolidColorBrush`或一个`LinearGradientBrush`基于用户的选择。

对于 a`SolidColorBrush`我可以只保存 RGB 颜色的 3 个值，但是如何处理 a`LinearGradientBrush`呢？

我认为可以序列化一个`Brush`对象，但我真的被卡住了。

现在我的问题是：有可能将 Brush 保存在`IsolatedStorage`?

我选择使用`IsolatedStorage`是因为我的应用程序需要是单个 exe，无需安装（它通过自定义软件分发程序分发给客户端），通常从桌面执行。该应用程序向用户提供有关 Active Directory 用户的正确凭据信息。

编辑：

欢迎提供任何其他用于保存用户自定义的解决方案！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-09T08:43:28.560

首先，我不会使用独立存储，而是使用用户范围的设置来存储此类信息。其次，如果您不能序列化画笔，您可以保存用户输入的任何信息以选择或创建画笔：如果他们只是从现有资源中选择画笔，则保存这些资源的键，如果他们可以输入 rgb 值选择一种颜色，保存 rgb 值，无论他们做什么来定义一个 LinearGradientBrush，只需保存他们的输入值。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-08T23:19:38.663

画笔和其他半原生绘图对象不可序列化。因此，您将无法将它们存储在任何持久性或进程外存储中。

由于看起来您的对象集有限，因此应该很容易获取所有属性并手动存储它们。创建可以存储在 Stream 中并充当相应类型的工厂的可序列化帮助器/包装器类可能是一种选择。

# javascript - 无法在谷歌地图 v3 中标记的信息窗口中显示来自 mysql 的所有内容

> ID：10956728
> 
> 赞同：0
> 
> 时间：2012-06-08T22:27:32.870
> 
> 标签：javascript, arrays, google-maps-api-3, infowindow

我有 Google Maps v3 的项目。而且我在多个标记的信息窗口中显示数据时遇到问题。当我尝试为每个标记制作信息窗口时，地图根本不显示。我确定我错过了一些东西，但我不知道该怎么做。所以这是我的代码：

```
...
<script type="text/javascript">
        var pinImage = new google.maps.MarkerImage ("http://chart.apis.google.com/chart?chst=d_map_xpin_letter_withshadow&chld=pin_star|%E2%80%A2|CC3300|000000|FF9900",
        new google.maps.Size (70, 83),
        new google.maps.Point (0,0),
        new google.maps.Point (10,34));
    var pinShadow = new google.maps.MarkerImage ("http://chart.apis.google.com/chart?chst=d_map_pin_shadow",
        new google.maps.Size (89, 85),
        new google.maps.Point (0, 0),
        new google.maps.point (12, 35));
        var map;
    function initialize() {
    var myLatlng = new google.maps.LatLng(41.258531,-96.012599);
    var myOptions = {
    zoom: 2,
    center: myLatlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
    var infoWindow = new google.maps.InfoWindow;
    <?php
    $posisi = array();
    $keterangan = array();
    foreach ($integer as $lokasi) {
    $query = "SELECT cl.locId, cl.country as country, cl.region as region, cl.city as city, cl.postalCode as postalCode, cl.latitude as latitude, cl.longitude as longitude, cl.metroCode as metroCode, cl.areaCode as areaCode
    FROM (SELECT locId as idcihuy FROM cityblocks WHERE $lokasi BETWEEN startIpNum AND endIpNum) cb, citylocation cl WHERE cb.idcihuy = cl.locId";
    $result = mysql_query($query);
    while ($location = @mysql_fetch_assoc($result)){
    $posisi[]= 'new google.maps.LatLng(' . $location['latitude'] . ', ' . $location['longitude'] . ')';
    $keterangan[]= '(' . $location['country'] . ', ' . $location['region'] . ', ' . $location['city'] . ')';
    }
    }
    ?>
     var keterangan = new Array();
 var point = [<?php echo implode(',', $posisi) ?>];
 var lokasi = [<?php echo implode(',', $keterangan) ?>];
 var icon = pinImage;
 for (var i = 0; i < point.length; i++) {
 var html = "<b>" + lokasi[i] + "</b> <br/>" + point[i];
     var marker = new google.maps.Marker({
        map: map,
        position: point[i],
        icon: pinImage,
        shadow: pinShadow
        });
        bindInfoWindow(marker, map, infoWindow, html);
        }
        }
    function bindInfoWindow(marker, map, infoWindow, html) {
      google.maps.event.addListener(marker, 'click', function() {
        infoWindow.setContent(html);
        infoWindow.open(map, marker);
      });
    }
    </script> 
```

这是 HTML 代码（浏览器输出）：

```
...
var pinImage = new google.maps.MarkerImage ("http://chart.apis.google.com/chart?chst=d_map_xpin_letter_withshadow&chld=pin_star|%E2%80%A2|CC3300|000000|FF9900",

        new google.maps.Size (70, 83),

        new google.maps.Point (0,0),

        new google.maps.Point (10,34));

    var pinShadow = new google.maps.MarkerImage ("http://chart.apis.google.com/chart?chst=d_map_pin_shadow",

        new google.maps.Size (89, 85),

        new google.maps.Point (0, 0),

        new google.maps.point (12, 35));

        var map;

    function initialize() {

    var myLatlng = new google.maps.LatLng(41.258531,-96.012599);

    var myOptions = {

    zoom: 2,

    center: myLatlng,

    mapTypeId: google.maps.MapTypeId.ROADMAP

    }

    var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

    var infoWindow = new google.maps.InfoWindow;

         var keterangan = new Array();

     var point = [new google.maps.LatLng(20.0000, 77.0000),new google.maps.LatLng(20.0000, 77.0000),new google.maps.LatLng(38.0000, -97.0000),new google.maps.LatLng(51.7500, -1.2500)];

     var lokasi = [(IN, , ),(IN, , ),(US, , ),(GB, K2, Oxford)];

     var icon = pinImage;

     for (var i = 0; i < point.length; i++) {

      var html = "<b>" + lokasi[i] + "</b> <br/>" + point[i];

     var marker = new google.maps.Marker({

        map: map,

        position: point[i],

        icon: pinImage,

        shadow: pinShadow

        });

        bindInfoWindow(marker, map, infoWindow, html);

        }

        }

    function bindInfoWindow(marker, map, infoWindow, html) {

      google.maps.event.addListener(marker, 'click', function() {

        infoWindow.setContent(html);

        infoWindow.open(map, marker);

      });

    }

    </script> 
```

请帮我解决这个问题。我真的很需要帮助。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T23:51:43.843

在这一行大写指向`Point`：（阴影）`new google.maps.Point (12, 35));`

现在您在 JavaScript 中缺少引号`lokasi`，因为它不是正确的数组。所以 html 永远不会被构建。

我相信PHP中的这一行

```
$keterangan[]= '(' . $location['country'] . ', ' . $location['region'] . ', ' . $location['city'] . ')'; 
```

应该更像这样（注意括号旁边添加的“）

```
$keterangan[]= '"(' . $location['country'] . ', ' . $location['region'] . ', ' . $location['city'] . ')"'; 
```

使 Javascript 看起来像这样

```
var lokasi = ["(IN, , )","(IN, , )","(US, , )","(GB, K2, Oxford)"]; 
```

# php - 在 php 循环中显示表单

> ID：10956732
> 
> 赞同：1
> 
> 时间：2012-06-08T22:27:46.310
> 
> 标签：php, html, forms, loops, while-loop

我正在使用一个看起来像这样的简单循环：

```
$query = "SELECT * FROM $username"; 
$result = mysql_query($query) or die(mysql_error());
    while($row = mysql_fetch_array($result)){
        echo $row['id']. " - ". $row['file'];
        echo "<br />";
                echo "<form method="post" action="" style="width: 80px">
            <input name="Checkbox1" type="checkbox" /><input name="Submit1" type="submit"               value="submit" /></form>"; 
```

当我像这样运行它时，我收到一个错误，即 < 是意外的。我相信我可能做错了什么。是否有其他方法可以在 php 循环中输出表格。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-08T22:29:42.637

看到这一行：

```
echo "<form method="post" action="" style="width: 80px">
     ^             ^
     |             End of string
     Start of string 
```

`\"`用相同类型的引号分隔的字符串中的转义引号 ( )。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-08T22:32:46.057

引号中有引号。他们应该使用`\`.

```
echo "<form method=\"post\" action=\"\" style=\"width: 80px\">..."; 
```

您还可以使用单引号：

```
echo '<form method="post" action="" style="width: 80px">...'; 
```

单引号和双引号的区别在于单引号不显示变量：

```
<?php
$a = 'b';
echo '$a'; // output: $a
echo "$a"; // output: b
echo $a; // output b 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T22:31:14.217

我不知道这是否是唯一的问题，但您必须转义双引号：

```
echo "<form method=\"post\" action=\"\" style=\"width: 80px\">
        <input name=\"Checkbox1\" type=\"checkbox\" />
        <input name=\"Submit1\" type=\"submit\" value=\"submit\" />
      </form>"; 
```

您还可以使用简单的引号来分隔您的字符串：

```
echo '<form method="post" action="" style="width: 80px">
        <input name="Checkbox1" type="checkbox" />
        <input name="Submit1" type="submit" value="submit" />
      </form>'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T22:34:55.757

您应该使用双引号或只使用单引号作为 echo 语句。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-08T22:35:04.013

在没有反斜杠的双引号语句中，您不能使用双引号 ( `"`) 来指定字符串。你有三个选择：`echo "<div id="pong" >;``\"`

1.  改变你的第一个和最后`"`一个`'`
2.  在代码中添加反斜杠。
3.  连接字符串，如：echo`"<form method="."post".">"`

# iphone - 应用程序进入后台时的内存占用

> ID：10956733
> 
> 赞同：2
> 
> 时间：2012-06-08T22:28:00.487
> 
> 标签：iphone, objective-c, ios, memory, instruments

在我的应用程序中，用户可以选择在屏幕上显示任意数量的对象。显示的每一个都必须从文件中取消归档，放入内存，然后显示。通常，如果显示允许的最大对象数，我的应用程序的总内存消耗会上升到大约 15 MB。如果我按下主页按钮并暂停应用程序然后返回应用程序，消耗的内存将下降到大约 6 MB！一切仍然正常；对象仍在内存中。这怎么可能？我正在真实设备上对此进行测试。这是 Instruments 的问题，还是导航控制器在应用程序进入后台时被释放的某种缓存？任何能说明这一点的东西都会受到欢迎。

编辑：

我现在才意识到 Instruments 中两个“分配”工具的区别。当您分析应用程序时，您可以选择“泄漏”或“分配”。通过选择泄漏，我可以看到我的内存占用量的一个度量，峰值约为 20 MB。通过选择分配，我看到了我的内存占用量的另一个衡量标准，它达到了惊人的 230 MB！显然，每个人测量的内容都存在一些差异。我应该看哪个？我一直关注“泄漏”分配测量。

* * *

以下是在应用程序中同一时间拍摄的两个最近的个人资料：

通过“泄漏”，我得到了这个结果：

![泄漏](../Images/72cea368092ed6203852092d297a2d36.png)

使用“分配”我得到了这个结果：

![分配](../Images/e0400d5ab0e5f4c2f60c43fdfba2dd66.png)

有人可以向我解释这种差异背后的含义吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T13:11:07.657

据我了解，分配向您显示了总共分配的内存量，但并没有摆脱被释放的位。泄漏向您显示泄漏的内存量，即已分配但未释放的内存量。您必须始终以零为目标。为避免内存泄漏，请在项目中使用 ARC 或确保正确*保留*和*释放*所有内容。

如果您想测量应用程序消耗的内存量，我会选择 Instruments 中的 Activity Monitor，它应该会显示实际数量。

# zend-framework - 在子目录主机上部署模块化 zend 项目

> ID：10956735
> 
> 赞同：4
> 
> 时间：2012-06-08T22:28:21.327
> 
> 标签：zend-framework, .htaccess, php, web-deployment-project, subdirectory

我正在将一个 zend 项目`myproject`从本地主机部署到子目录 www.subdirectory.com/~username/ `myproject`，即使我已经读到从本地部署 zend 项目时没有太多需要更改，我也面临很多问题主机到子目录我已经尝试过[这个](http://www.alberton.info/zend_framework_mod_rewrite_shared_hosting.html) 我从答案中得到的，但它没有用。

问题是当我将链接放在打开项目目录的文件树上方时，当我单击公共时，它会将我重定向到默认模块的索引页面。我不能去任何其他页面

我无法控制 apache2 服务器。有没有办法部署项目，这是我下面的代码，`.htaccess`任何答案或指导都会有帮助`index.php``application.ini`

.htaccess

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

索引.php

```
// Define path to application directory
defined('APPLICATION_PATH')
        || define('APPLICATION_PATH', realpath(dirname(__FILE__) . '/../application'));

// Define path to application directory
defined('PUBLIC_PATH')
        || define('PUBLIC_PATH', realpath(dirname(__FILE__)));

// Define application environment
defined('APPLICATION_ENV')
        || define('APPLICATION_ENV', (getenv('APPLICATION_ENV') ? getenv('APPLICATION_ENV') : 'production'));

$paths = array(realpath(dirname(_FILE_) . '/../library'), '.');
set_include_path(implode(PATH_SEPARATOR, $paths));
/* Define the base URL */
define('URL_ADDRESS', "http://" . $_SERVER['HTTP_HOST']);

/** Zend_Application */
require_once 'Zend/Application.php';

// Create application, bootstrap, and run
$application = new Zend_Application(
                APPLICATION_ENV,
                APPLICATION_PATH . '/configs/application.ini'
);

$application->bootstrap()
        ->run(); 
```

应用程序.ini

```
[production]
phpSettings.display_startup_errors = 1
phpSettings.display_errors = 1    
includePaths.library = APPLICATION_PATH "/../library"
appnamespace = "Application"
resources.frontController.params.displayExceptions = 1
resources.layout.layoutPath = APPLICATION_PATH "/layouts/scripts/"
resources.view[] =
resources.frontController.moduleDirectory = APPLICATION_PATH "/modules"
resources.modules[] = ""
resources.layout.layoutPath = APPLICATION_PATH "/layouts/scripts/"
bootstrap.path = APPLICATION_PATH "/Bootstrap.php"
bootstrap.class = "Bootstrap"
resources.layout.layout = default    
resources.frontController.moduleDirectory = APPLICATION_PATH "/modules"
resources.modules[] =    
autoloaderNamespaces.Hyderlib = "Hyderlib_"
resources.layout.pluginClass= "Hyderlib_Controller_Plugin_ModuleLayout"
resources.view[] = 

[staging : production]

[testing : production]
phpSettings.display_startup_errors = 1
phpSettings.display_errors = 1

[development : production]
phpSettings.display_startup_errors = 1
phpSettings.display_errors = 1
resources.frontController.params.displayExceptions = 1

resources.db.adapter = "pdo_mysql"
resources.db.params.host = "password"
resources.db.params.username = "password"
resources.db.params.password = "password"
resources.db.params.dbname = "password"
resources.db.isDefaultTableAdapter = true 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T10:20:20.333

看看这个：[.htaccess RewriteRule not working in subdirectory](https://stackoverflow.com/questions/5494921/htaccess-rewriterule-not-working-in-subdirectory?rq=1)

我怀疑您必须编辑 .htaccess 以通过不在同一目录中的 index.php 转发除 image/css/js 以外的请求。

如果网络服务器根目录是 ~/username/ 然后将 .htaccess 放在那里并更改

```
RewriteRule ^.*$ index.php [NC,L] 
```

至

```
RewriteRule ^.*$ myproject/index.php [NC,L] 
```

可能需要进行更多更改来处理静态内容（其他重写）。

# wxpython - wxWidgets wxPython 的 GUI 构建器

> ID：10956736
> 
> 赞同：3
> 
> 时间：2012-06-08T22:28:21.403
> 
> 标签：wxpython, wxwidgets

wxPython 的最佳拖放 GUI 构建器？我已经尝试过 wxGlade 但它不是拖放，发现它很难理解，你必须使用 sizer。我更喜欢像 VisualTinker 一样完全拖放和拖动的应用程序，但对于 wxpython

男生/女生有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T14:16:51.827

wxFormBuilder、DialogBlocks 和 wxPython 附带的 XRCed 实用程序都有这个。

顺便说一句，这个问题可能是一个[好的 wxpython GUI builder 的欺骗？](https://stackoverflow.com/questions/4079866/a-good-wxpython-gui-builder)

# c# - 使用 C# 写入二进制文件

> ID：10956739
> 
> 赞同：0
> 
> 时间：2012-06-08T22:28:53.743
> 
> 标签：c#, .net

我正在尝试加密字符串并将其写入二进制文件。我想反过来做这个过程。这是我拥有的代码，但它不起作用。

```
FileStream stream = new FileStream(saveFileDialog1.OpenFile().ToString(),   FileMode.Create);
BinaryWriter writer = new BinaryWriter(stream);
String temp = "";
serialList.ForEach(delegate(record p)
{ 
    temp = String.Format("{0},{1}#", p.serial, p.option);
    byte[] dataB = System.Text.Encoding.Unicode.GetBytes(String.Format("{0},{1}#", p.serial, p.option));
    byte[] enc = Encrypt(dataB, "gio!");
    writer.Write(enc);
});
writer.Write('1');
writer.Close();
stream.Close(); 
```

它有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T22:35:00.683

[`SaveFileDialog.OpenFile`](http://msdn.microsoft.com/en-us/library/system.windows.forms.savefiledialog.openfile.aspx)已经返回您的 Stream 对象。您不需要`.ToString()`可能会或可能不会给您文件名/完整文件路径的奇怪调用。

本质上，您的代码创建了 2 个流：一个位于 FileOpenDialog 中指定的位置，另一个位于相对路径的某个位置，文件名等于“Stream.ToString()”的结果。第一个流（您可能正在查看的流）将是空的，因为您没有向其写入任何内容。

注意：考虑使用`using(...)`而不是手动`.Close`调用，因为它会创建更安全的代码（如果发生异常，您不会让流未处理）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T22:33:02.947

在关闭流之前，像这样刷新它。

```
writer.Flush();
writer.Close(); 
```

或者，您可以`writer.AutoFlush`在开始编写之前设置为 true，但这可能会稍微慢一些。

# javascript - 在文件夹中查找最新修改的文 件

> ID：10956740
> 
> 赞同：2
> 
> 时间：2012-06-08T22:28:53.700
> 
> 标签：javascript, node.js

如何浏览文件夹并找出最新创建/修改的文件并将其完整路径作为字符串放入 var 中？

还没有真正弄清楚 io/io 的最佳实践

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T22:44:22.843

看看[http://nodejs.org/api/fs.html#fs_class_fs_stats](http://nodejs.org/api/fs.html#fs_class_fs_stats)

查看`ctime`或`mtime`查找创建和修改时间。

像这样的东西：

```
var fs = require('fs');

fs.readdir(".",function(err, list){
    list.forEach(function(file){
        console.log(file);
        stats = fs.statSync(file);
        console.log(stats.mtime);
        console.log(stats.ctime);
    })
}) 
```

循环当前目录 (.) 并记录文件名，获取文件统计信息并记录修改时间 (mtime) 和创建时间 (ctime)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-03-05T00:56:02.387

当文件位于同一目录中时，Brad 的代码片段可以正常工作（并且很棒，谢谢），但是如果您正在检查另一个文件夹，则需要解析`statSync`参数的路径：

```
const fs = require('fs');
const {resolve, join} = require('path');

fs.readdir(resolve('folder/inside'),function(err, list){
    list.forEach(function(file){
       console.log(file);
       stats = fs.statSync(resolve(join('folder/inside', file)));
       console.log(stats.mtime);
       console.log(stats.ctime);
    })
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-08T15:04:43.287

假设您想要获取目录中的最新文件并将其发送给想要获取文件夹中不存在的文件的客户端。例如，如果您的静态中间件无法提供文件并自动调用 next() 函数。

您可以使用 glob 模块获取要搜索的文件列表，然后在函数中减少它们；

```
// handle non-existent files in a fallthrough middleware
app.use('/path_to_folder/', function (req, res) {
    // search for the latest png image in the folder and send to the client
    glob("./www/path_to_folder/*.png", function(err, files) {
        if (!err) {

            let recentFile = files.reduce((last, current) => {

                let currentFileDate = new Date(fs.statSync(current).mtime);
                let lastFileDate = new Date(fs.statSync(last).mtime);

                return ( currentFileDate.getTime() > lastFileDate.getTime() ) ? current: last;
            });

            res.set("Content-Type", "image/png");
            res.set("Transfer-Encoding", "chunked");
            res.sendFile(path.join(__dirname, recentFile));
        }
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-05T15:28:01.723

为了根据名称和其他东西下载最新的文件：

```
//this function runs a script
//this script exports db data
// and saves into a directory named reports
router.post("/download", function (req, res) {

//run the script
  var yourscript = exec("./export.sh", (error, stdout, stderr) => {
    console.log(stdout);
    console.log(stderr);
  }); 
```

```
//download latest file
  function downloadLatestFile() { 
```

```
//set the path
    const dirPath = "/Users/tarekhabche/Desktop/awsTest/reports"; 
```

```
//get the latest created file
    const lastFile = JSON.stringify(getMostRecentFile(dirPath)); 
```

```
//parse the files name since it contains a date

    fileDate = lastFile.substr(14, 19);
    console.log(fileDate); 
```

```
//download the file
    const fileToDownload = `reports/info.${fileDate}.csv`;
    console.log(fileToDownload);
    res.download(fileToDownload);
  } 
```

```
// download after exporting the db since export takes more time
  setTimeout(function () {
    downloadLatestFile();
  }, 1000);
}); 
```

```
//gets the last file in a directory

const getMostRecentFile = (dir) => {
  const files = orderRecentFiles(dir);
  return files.length ? files[0] : undefined;
}; 
```

```
//orders files accroding to date of creation
const orderRecentFiles = (dir) => {
  return fs
    .readdirSync(dir)
    .filter((file) => fs.lstatSync(path.join(dir, file)).isFile())
    .map((file) => ({ file, mtime: fs.lstatSync(path.join(dir, file)).mtime }))
    .sort((a, b) => b.mtime.getTime() - a.mtime.getTime());
}; 
```

```
const dirPath = "reports";
getMostRecentFile(dirPath); 
```

# mysql - 加入 3 个 mysql 表，中间有查询

> ID：10956746
> 
> 赞同：0
> 
> 时间：2012-06-08T22:29:36.450
> 
> 标签：mysql, join, left-join

我正在尝试加入 3 个表 - `e`, `wp`,`l`

位置为 l ：`name | id | workplace_id`

作为 wp 的工作场所：`name | id`

雇员为 e ：`name | id | location_id | coordinator`

我想： **如果工作场所在任何位置都有协调员（协调员 = 1），则获取该工作场所的所有位置**

这似乎不起作用 - 它正在返回具有协调器 = 1 的工作场所的所有位置，但如果任何工作场所位置具有协调器 = 1，我需要工作场所的所有位置。

```
select distinct w.* 
from workplaces as w, 
    (select distinct l.* 
     from locations as l, employees as e 
     where e.location_id = l.id and e.coordinator = 1) as tmp 
where tmp.workplace_id = w.id 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-08T22:54:00.233

```
select distinct l.* 
from locations as l, workplaces as w, 
    (select distinct l.* 
     from locations as l, employees as e 
     where e.location_id = l.id and e.coordinator = 1) as tmp 
where l.workplace_id = w.id
and tmp.workplace_id = w.id 
```

那是你要找的吗？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-08T22:56:49.023

首先，子查询是一个非常糟糕的主意，要进行连接，您应该使用以下任何一种：内连接、左连接或右连接。然后你可以有这样的东西：

```
SELECT l.* FROM locations as l
INNER JOIN workplaces w ON l.workplace_id = w.id
INNER JOIN employees e ON l.id = e.location_id
WHERE e.coordinator = 1; 
```

# php - PHP Pear Mail - 包含路径

> ID：10956751
> 
> 赞同：1
> 
> 时间：2012-06-08T22:30:13.540
> 
> 标签：php, email, pear

我正在开发一个使用 PHP 内置邮件功能的 PHP 项目。我正在添加使用 Pear 邮件的选项。

似乎在大多数托管环境中，使用：

```
require_once('Mail.php') 
```

不起作用，这是我能找到的所有示例所显示的。将包含路径编写为：

```
require_once('/path/to/pear/Mail.php') 
```

似乎也不起作用。但是，将包含路径设置为：

```
set_include_path('/path/to/pear/')
require_once('Mail.php') 
```

确实有效。因为我的应用程序中有一个配置文件存储在其中，并且我的大多数页面都使用了该配置（与电子邮件无关），所以我不确定这是否是个好主意。我的配置文件现在有这样存储的值：

```
// pear smtp mail settings
set_include_path('/path/to/pear/');
define('PEAR_INCLUDE_PATH', 'Mail.php');
define('SMTP_HOST', 'ssl://smtp.gmail.com');
define('SMTP_PORT', '465');
define('SMTP_USER', 'username@gmail.com');
define('SMTP_PASS', 'password'); 
```

这会给我带来麻烦吗？我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T22:33:42.017

你的 pear 包含路径应​​该在你的 php.ini 文件中全局设置——如果没有，你有一个损坏的 pear/php 安装。

但是，如果您想变得更加偏执，您可以提供 pear 的 Mail 和 Net_SMTP 模块的本地副本。

# mysql - 在 JOIN 中过滤订单，仅通过复选框选择我选择的项目

> ID：10956760
> 
> 赞同：0
> 
> 时间：2012-06-08T22:32:16.347
> 
> 标签：mysql, join, checkbox, filter

MYSQL

我想根据表单复选框中的项目过滤“订单”。

例如，我检查了 ITEM A + ITEM B ，但没有检查 ITEM C

# 订单 1

项目 A

# 订单 2

项目 B

# 订单 3

项目 A

项目 B

项目 C

# 订单 4

项目 A

项目 B

我想要的是：

ORDER 1 & ORDER 2 & ORDER 4，但不是 ORDER 3，因为这也有 C 项

我这样的查询

```
SELECT
P.id as product_id,P.name as product_name,
O.id as order_id,O.group_id,O.payment_date,O.payment_type_id,I.quantity,
M.name,M.surname,M.email
FROM tbl_orders O
LEFT JOIN tbl_order_items I on I.order_id = O.id
LEFT JOIN tbl_products P on P.id = I.product_id
LEFT JOIN tbl_members M on M.id = O.member_id
WHERE
     I.product_id in (1044,1129,20976,16775)
AND
     O.status_id = 311 and O.payment_status_id = 349 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T23:01:46.670

我猜核心问题是您想要排除具有任何未检查值的订单，并包含至少具有一个已检查值的订单。

```
SELECT
P.id as product_id,P.name as product_name,
O.id as order_id,O.group_id,O.payment_date,O.payment_type_id,I.quantity,
M.name,M.surname,M.email
FROM tbl_orders O -- start with orders

-- add in the items, but use INNER to avoid orders that do not have
-- at least one order_item whose id was checked
INNER JOIN tbl_order_items I on I.order_id = O.id
           AND I.product_id in (1044,1129,20976,16775)
-- left join in the items which were NOT checked.  If there are any, the
-- rows will have bad product ids in them.
-- But if there ARE NOT any bad items in the order, 
-- then there will only be one row with NULL for BADITEMS.product_id
LEFT JOIN tbl_order_items BADITEMS on BADITEMS.order_id = O.id
           AND BADITEMS.product_id NOT in (1044,1129,20976,16775)
-- Pull in the product information
INNER JOIN tbl_products P on P.id = I.product_id
-- Pull in member information
LEFT JOIN tbl_members M on M.id = O.member_id
WHERE
     -- the inner join has already insured that we only get orders
     -- that have checked items.
     -- To remove the orders that ALSO had unchecked items,
     -- We take only rows where the BADITEMS join failed.
     BADITEMS.product_id IS NULL
AND
     O.status_id = 311 and O.payment_status_id = 349 
```

# c# - 如何在内存中引用方法？

> ID：10956768
> 
> 赞同：1
> 
> 时间：2012-06-08T22:33:09.187
> 
> 标签：c#

在 C# 中，我了解静态变量是在内存中创建的，并且只要 AppDomain 存在，它就会存在。静态方法如何在内存中得到处理？方法是否像变量一样在堆栈/堆上创建？有没有方法GC之类的东西？这与调用堆栈有什么关系？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T22:43:17.793

方法存在于代码段中，既不在堆中，也不在堆栈中。代码只是加载到内存中，只要 AppDomain 存在，它就会一直存在。

静态方法和非虚拟方法只有一个地址，代码调用方法时直接使用地址。

虚方法也有地址，但不是直接使用的。在与该类关联的虚方法表中有一个指向该方法的指针，因此代码从表中获取该指针以查找该方法。

调用堆栈只是堆栈的另一个术语。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T22:41:05.073

方法不在堆上，它们是代码的一部分——静态或实例方法。

# objective-c - 将 NSColor 存储为字符串

> ID：10956777
> 
> 赞同：0
> 
> 时间：2012-06-08T22:34:38.490
> 
> 标签：objective-c, core-data

我目前有一个存储数据的核心数据数据库，我还希望将 NSColor 存储到其中，但它不接受 NSColor 作为对象。我的解决方案是将其作为字符串存储在数据库中，并在加载时将其读入 NSColor。我该怎么做？

例如，如果我有一种颜色，`[NSColor redColor]`我将如何将它存储在数据库中（作为字符串）然后检索它。这是一个基本示例，最终将是更复杂的 RGB 颜色。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T22:44:37.870

您应该考虑使用 NSData 作为在 Core Data 中存储不受支持的数据类型的容器。要将 NSColor 作为 NSData 访问，您需要将属性标记为可转换并创建可逆的 NSValueTransformer 类以将 NSColor 转换为 NSData。

有用[的链接：非标准持久属性](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdNSAttributes.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T23:25:53.443

我同意建议使用 NSData 在核心数据存储中存储颜色的答案。也就是说，有时将颜色存储在字符串中可能很有用，而且这当然不难做到。我建议在 NSColor 上创建一个类别：

```
@interface NSColor (NSString)
- (NSString*)stringRepresentation;
+ (NSColor*)colorFromString:(NSString*)string forColorSpace:(NSColorSpace*)colorSpace;
@end

@implementation NSColor (NSString)

- (NSString*)stringRepresentation
{
    CGFloat components[10];

    [self getComponents:components];
    NSMutableString *string = [NSMutableString string];
    for (int i = 0; i < [self numberOfComponents]; i++) {
        [string appendFormat:@"%f ", components[i]];
    }
    [string deleteCharactersInRange:NSMakeRange([string length]-1, 1)]; // trim the trailing space
    return string;
}

+ (NSColor*)colorFromString:(NSString*)string forColorSpace:(NSColorSpace*)colorSpace
{
    CGFloat components[10];    // doubt any color spaces need more than 10 components
    NSArray *componentStrings = [string componentsSeparatedByString:@" "];
    int count = [componentStrings count];
    NSColor *color = nil;
    if (count <= 10) {
        for (int i = 0; i < count; i++) {
            components[i] = [[componentStrings objectAtIndex:i] floatValue];
        }
        color = [NSColor colorWithColorSpace:colorSpace components:components count:count];
    }
    return color;
}

@end 
```

我已经检查了上面的代码是否按照宣传的方式编译和工作。一个小示例程序会产生适当的输出：

```
int main(int argc, const char * argv[])
{
    @autoreleasepool {
        NSLog(@"Red is: %@", [[NSColor redColor] stringRepresentation]);
        NSLog(@"Cyan is: %@", [[NSColor cyanColor] stringRepresentation]);
        NSLog(@"Read in: %@", [NSColor colorFromString:[[NSColor redColor] stringRepresentation]
                                         forColorSpace:[NSColorSpace deviceRGBColorSpace]]);
    }
    return 0;
} 
```

输出：

```
Red is: 1.000000 0.000000 0.000000 1.000000
Cyan is: 0.000000 1.000000 1.000000 1.000000
Read in: NSCustomColorSpace Generic RGB colorspace 1 0 0 1 
```

将颜色空间存储在字符串中可能是有意义的，因此当您从字符串转到颜色时不必指定它。再说一次，如果您只是要存储这些字符串并再次读取它们，那么无论如何您都应该使用 NSData 。如果您需要将颜色写入某种人类可读的文件，或者可能作为调试辅助，使用字符串会更有意义。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T22:43:29.743

`NSColor`支持[`NSCoding`协议](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSCoding_Protocol/Reference/Reference.html)，因此您可以使用该`-encodeWithCoder:`方法将其保存到存档中，您可以使用`-initWithCoder:`从存档中加载它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T22:46:10.023

属性列表不存储颜色，Apple 建议您将它们存储为 NSData 而不是 NSString，您可能应该这样做。[请在此处](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DrawColor/Tasks/StoringNSColorInDefaults.html#//apple_ref/doc/uid/20001693)查看 Apple 的说明。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-18T06:48:05.820

以下是用于将 a 转换`NSColor`为 和从`NSString`. 此示例假设我们使用的是 RGB 颜色空间，但它可以很容易地适应其他颜色空间。例如，`NSStringFromColor()`可以在字符串中包含颜色空间，并在转换回`NSColorFromString()`.

用法：

```
NSString *theColorString = NSStringFromColor(theColor);
NSColor *theColor = NSColorFromString(theColorString); 
```

功能：

```
NSString *NSStringFromColor(NSColor *theColor)
{
    CGFloat red, green, blue, alpha;
    [theColor getRed:&red green:&green blue:&blue alpha:&alpha]; // assumes RGB color space
    NSString *theColorString = [NSString stringWithFormat:@"%f %f %f %f",red,green,blue,alpha];
    return theColorString;
}

NSColor *NSColorFromString(NSString *theColorString)
{
    if ( theColorString.length == 0 ) {
        theColorString = @"0.9 0.9 0.95 1.0"; // a default color
    }
    NSArray <NSString *> *theColors = [theColorString componentsSeparatedByString:@" "];
    if ( theColors.count == 4 ) { // sanity
        // unpack the color
        NSColor *theColor = [NSColor colorWithSRGBRed:theColors[0].floatValue
                                                green:theColors[1].floatValue
                                                 blue:theColors[2].floatValue
                                                alpha:theColors[3].floatValue];
        return theColor;
    }
    return nil; // theColorString format error
} 
```

# windows-8 - Windows 8 中的 Metro 应用程序引用和类型

> ID：10956778
> 
> 赞同：1
> 
> 时间：2012-06-08T22:34:44.697
> 
> 标签：windows-8, microsoft-metro

我正在开发 C#\XAML metro-ui 应用程序。我需要一些未包含在`.NET for Metro style apps`或`Windows`引用中的 .NET 类型（例如位于 中的[HttpUtility](http://msdn.microsoft.com/en-us/library/system.web.httputility.aspx)`System.Web`）。我无法`System.Web`通过装配列表找到。同时我可以通过浏览来参考它。但据我所知，这不是好方法，我应该避免这种情况，是吗？

接下来我找到了关于[装配](http://msdn.microsoft.com/en-us/library/windows/apps/system.reflection.assembly%28v=vs.110%29.aspx)类的描述。在`Version Information`部分页面底部，我可以看到它受`Portable Class Library`. 在示例中，我看到了下一个代码

`Assembly assem = Assembly.GetExecutingAssembly();`

但是在我的项目`Assembly`中没有`GetExecutingAssembly`方法。文档是否已过时？还是我想念什么？

我使用 Windows 8 Release Candidate 和 VS 2012

EDIT0：而不是`HttpUtility`我应该使用`WebUtility`我知道它。但我选择这种类型只是为了举例。

EDIT1：我`public static System.Reflection.Assembly GetExecutingAssembly()`通过对象浏览器看到但无法访问它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T23:42:12.283

Metro 风格应用只能调用 .NET Core 配置文件中的方法。您可以在 Windows 8 RP 机器上查看 Core Profile 参考程序集...

```
C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETCore\v4.5 
```

您可以使用 ILDasm 或 ILSpy 来查看它们。请参阅Build[中的 .NET 开发人员对 Windows 8 应用程序开发视频的看法。](http://channel9.msdn.com/Events/BUILD/BUILD2011/TOOL-930C)他更多地谈到了核心配置文件以及为什么删除了一些类、方法和接口。

# java - 在 Java 中生成简单的图形

> ID：10956780
> 
> 赞同：0
> 
> 时间：2012-06-08T22:34:50.483
> 
> 标签：java, android, image, gradient

我即将开始移植我的 iPhone 应用程序 Android，但我发现很难掌握它。

现在，我正试图在开始后端之前让基本屏幕看起来正确，但是在整个灵活的布局中遇到了障碍。

我正在尝试生成一个带有半透明白色高亮和黑色底部边框的简单渐变，以在整个应用程序中使用，但是因为该项目将多次用于具有多种颜色的许多应用程序，所以我想这样做在代码而不是 Photoshop 中。

这在 OBJ-C 中很容易实现，但在我现在开始之前，我已经碰壁了。

这是我要实现的目标的示例。

![尝试示例](../Images/d5c357ef60271f2b804ccebdc36292d4.png)

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T23:08:32.263

用 a 声明一个 xml`shape`并将其保存在您的 drawables 文件夹中。然后将该可绘制对象应用到您的视图中，就像任何其他可绘制对象/图像一样。

**图形.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
    <gradient
        android:startColor="#fa8c5e"
        android:endColor="#ee9e6a"
        android:angle="90"/>
    <stroke
        android:width="1dip"
        android:color="#000000" />
</shape> 
```

[在这里](http://developer.android.com/guide/topics/resources/drawable-resource.html#Shape)，您可以查看调整形状的语法。

# android - Android、Webview、后台任务、线程

> ID：10956788
> 
> 赞同：0
> 
> 时间：2012-06-08T22:35:38.653
> 
> 标签：android, webview, task

我有一个在后台运行的任务。我希望这个后台任务使用 Webview。后台任务通过新 Intent 创建一个新活动 Web。所有的 webview 活动（例如加载 url、返回等）都在 Web 中的方法中。这些方法是从后台任务中的方法调用的。此过程在某些设备中运行良好。

我现在看到某些设备崩溃并显示以下消息：

“android.view.ViewRoot$CalledFromWrongThreadException：只有创建视图层次结构的原始线程才能触摸它的视图。”

Web中后台调用goback()方法后。

显然，Web 运行在与后台任务不同的线程中。我能做些什么呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T22:52:54.823

好吧，每当您从任何后台任务更新 UI 时，您都必须使用 runOnUIThread ( [http://developer.android.com/reference/android/app/Activity.html#runOnUiThread(java.lang.Runnable](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread(java.lang.Runnable) ) )。

# delphi - 将任何记录转换为字符串并返回？

> ID：10956790
> 
> 赞同：9
> 
> 时间：2012-06-08T22:35:48.783
> 
> 标签：delphi, serialization, type-conversion, delphi-xe2, record

如何将任何`record`类型转换为单一类型`String`并返回？也许将记录加载到流中并将其作为字符串读取？我使用的记录不会包含任何特殊类型——它们只是使用简单的东西，比如`String`, `Integer`, `PChar`, `DWORD`, and`Array of [String]`等，而不是类或函数。

该字符串将进一步保存到各个位置，例如平面文本文件、数据库记录、通过网络发送等。字符串内容可以通过其他方式在每个位置之间传输，例如从文本文件中复制字符串并将其保存到数据库记录中。一般的想法是字符串将足够兼容以保存在任何地方、移动它并将其加载回其原始状态。我明白我需要能够识别它是什么*类型*的记录并相应地分配它，而我不需要帮助的那部分。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T23:17:31.457

您可以使用 RTTI 序列化您的记录，从这里您可以使用 XML、JSON 或其他格式来保存记录数据。

如果您不想编写自己的方法来序列化记录，请尝试这些替代方法。

*   [超级对象（使用TSuperRttiContext](http://code.google.com/p/superobject/)类，您可以将记录序列化为 JSON）
*   [TKB动态](https://code.google.com/p/kblib/)
*   [Synopse](http://blog.synopse.info/post/2011/03/12/TDynArray-and-Record-compare/load/save-using-fast-RTTI)的 SynCommons 单元。
*   [来自 Robert Love 的XmlSerial](http://code.google.com/p/robstechcorner/source/browse/trunk/Delphi/rtti/xmlserial.pas)单元（对象和记录序列化和反序列化到 XML）

# return - ulimit -a 每半小时返回旧值

> ID：10956791
> 
> 赞同：0
> 
> 时间：2012-06-08T22:35:52.000
> 
> 标签：return, ram, ulimit

ulimit -a 每半小时返回旧值的问题

每次我把它改成

```
core file size          (blocks, -c) unlimited
data seg size           (kbytes, -d) unlimited
scheduling priority             (-e) 0
file size               (blocks, -f) unlimited
pending signals                 (-i) unlimited
max locked memory       (kbytes, -l) unlimited
max memory size         (kbytes, -m) 1048576
open files                      (-n) 2000000
pipe size            (512 bytes, -p) 8
POSIX message queues     (bytes, -q) unlimited
real-time priority              (-r) 0
stack size              (kbytes, -s) unlimited
cpu time               (seconds, -t) unlimited
max user processes              (-u) unlimited
virtual memory          (kbytes, -v) unlimited
file locks                      (-x) unlimited 
```

再次返回默认值

如何永远保存它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T07:17:25.720

首先，您确定将这些设置添加到：

> /etc/security/limits.conf
> 
> ```
> * hard nofile 2000000
> * soft nofile 2000000 
> ```

二、检查每个用户的crontab使用情况

> crontab -e

也不要忘记检查

> /etc/crontab

检查每个运行的 *.sh 使用

> ps辅助| grep .sh

也许这些 crontab 和 shell 脚本会自动更改 ulimit。

希望这可以帮助:)

# django - 无法通过 django shell 删除 heroku 表

> ID：10956792
> 
> 赞同：3
> 
> 时间：2012-06-08T22:35:56.547
> 
> 标签：django, heroku

我正在尝试删除在 heroku 中托管的表。因为它在共享数据库中，所以我无法直接连接到 postgres 执行语句。我通过 django shell 执行删除。问题是表名是大写的，由于未知原因，django 尝试以小写形式删除它：

```
>>> sql = '''drop table campings_horesEntrega cascade;    <---see uppercases
...          drop table campings_horesRecollida; '''
>>> 
>>> from django.db import connections, transaction
>>> cursor = connections['default'].cursor()
>>> cursor.execute(sql)
Traceback (most recent call last):
  File "<console>", line 1, in <module>
  File "/app/.heroku/venv/lib/python2.7/site-packages/django/db/backends/util.py", line 40, in execute
    return self.cursor.execute(sql, params)
  File "/app/.heroku/venv/lib/python2.7/site-packages/django/db/backends/postgresql_psycopg2/base.py", line 52, in execute
    return self.cursor.execute(query, args)
DatabaseError: table "campings_horesentrega" does not exist   <--- see lowercases 
```

有人对我的问题有解决方法吗？

多谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T00:07:55.927

如果您希望 postgres 尊重大小写，则需要将表名括在引号中。

```
DROP TABLE "campings_horesEntrega" CASCADE; 
```

# vb.net - FxCop 对私有构造函数 CA1823 和 CA1053 发出警告

> ID：10956796
> 
> 赞同：2
> 
> 时间：2012-06-08T22:36:34.557
> 
> 标签：vb.net, visual-studio-2010, optimization, fxcop

我有一个如下所示的类：

```
Public Class Utilities
    Public Shared Function blah(userCode As String) As String
        'doing some stuff
    End Function
End Class 
```

我在上面运行 FxCop 10，它说：

```
"Because type 'Utilities' contains only 'static' (
'Shared' in Visual Basic) members, add a default private 
constructor to prevent the compiler from adding a default 
public constructor." 
```

好的，FxCop 先生，你是对的，我将添加一个私有构造函数：

```
Private Utilities() 
```

现在我有：

```
"It appears that field 'Utilities.Utilities' is 
never used or is only ever assigned to. Use this field 
or remove it." 
```

关于我应该怎么做才能摆脱这两个警告的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T22:41:59.657

在 C# 中，这个问题将通过将类标记为静态来处理，例如

```
public static class Utilities
{
   ...
} 
```

静态类只能包含静态（在 VB 中共享）成员。

我相信 VB.NET 中的等价物是使用模块。

请参阅[在 VB.NET 中将类标记为静态](https://stackoverflow.com/questions/135841/marking-a-class-static-in-vb-net)。

# grails - 增加 grails 应用程序的内存

> ID：10956798
> 
> 赞同：0
> 
> 时间：2012-06-08T22:36:47.503
> 
> 标签：grails

我的 grails 应用程序创建了许多消息驱动的 bean。如何增加内存以防止烫发宝石？我的 tomcat 有可用内存：886.10 MB 总内存：1237.18 MB 最大内存：8888.93 MB。但是应用程序的内存是分开的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T22:39:54.327

您需要在 tomcat 配置中指定 permgen 最大分配，例如 -XX:MaxPermSize=256M。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T04:30:09.233

如果你在一个独立的应用服务器中运行一个战争，设置 JAVA_OPTS，tomcat 接它。如果您使用 grails run-app 运行，请设置 GRAILS_OPTS 来影响它。

```
export JAVA_OPTS="-XX:MaxPermSize=1024m" 
```

# file - Bash：检查文件是否在脚本中使用后被修改

> ID：10956799
> 
> 赞同：0
> 
> 时间：2012-06-08T22:36:52.903
> 
> 标签：file, bash, shell, compare

如果文件在我阅读后被修改，我需要签入脚本（另一个应用程序可以在两者之间修改它）。根据 bash 手册，有一个“-N”测试应该报告自上次读取以来文件是否被修改。我在一个小脚本中尝试过，但它似乎不起作用。

```
#!/bin/bash
file="test.txt"
echo "test" > $file
cat $file;
if [ -N $file ];
    then echo "modified since read";
else
    echo "not modified since read";
fi 
```

我还尝试了另一种方法，方法是触摸另一个文件并使用

```
if [ "file1" -nt "file2 ]; 
```

但这仅适用于秒精度，在极少数情况下可能还不够。是否有任何其他 bash 内置解决方案可以解决此问题，或者我确实需要使用 diff 或 md5sum？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T04:34:50.453

比较文件哈希 (md5/sha1) 可能是了解（和审核）文件更改的唯一可靠方法，以免有人[试图绕过](https://stackoverflow.com/questions/8095415/update-file-but-not-alter-file-modify-date-can-it-be-done)您检测文件修改的尝试。此外，除了（或除了）定期轮询之外，您还可以实现某种文件更改通知：请参阅[此 su question](https://superuser.com/questions/181517/how-to-execute-a-command-whenever-a-file-changes)以获取建议（例如，使用[inotifywait](http://inotify-tools.sourceforge.net/)）。

但是，如果您的脚本似乎逐渐在修订控制系统上收敛，只需将这些文件放在 git 存储库中，让 git 为您检测和管理更改。

（编辑：我刚刚注意到这些是监视日志文件的脚本（我以为您正在监视文件更改的实际脚本），在这种情况下，将它们置于版本控制之下确实不合适。）

# php - 用类定义的 array_map 函数

> ID：10956801
> 
> 赞同：0
> 
> 时间：2012-06-08T22:37:07.407
> 
> 标签：php

我正在阅读代码并遇到了以下语法：

```
$customerIDs = array_map(function(Customer $customer) { return $customer->id; }, $customers); 
```

`$customers`数组在哪里。

我的困惑在于试图理解`function(Customer $customer)`。我看到这`Customer`是一个类，但那是什么`$customer`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T22:39:21.913

这部分：

```
function(Customer $customer) { return $customer->id; } 
```

是一个匿名函数。这是 PHP 5.3 中的一个“新”特性。它几乎等同于：

```
function someFunction(Customer $customer) {
    return $customer->id;
}

$customerIDs = array_map('someFunction', $customers); 
```

至于这`Customer $customer`部分，那只是一个类型约束的参数。如果传递的参数不是 type ，则会引发错误`Customer`。

[您可以在 php.net 文档](http://ca3.php.net/manual/en/functions.anonymous.php)中阅读有关匿名函数的更多信息。

# java - 在 Java 中使用 BufferedReader 编辑字符串

> ID：10956806
> 
> 赞同：0
> 
> 时间：2012-06-08T22:37:30.237
> 
> 标签：java

除了异常处理，我使用以下代码在 Java 中输入一行文本：

```
BufferedReader strin = new BufferedReader(new InputStreamReader(System.in));
String txt = null;
txt = strin.readLine(); 
```

但是，我希望能够编辑现有的字符串，这样如果 txt 被初始化为“hello”而不是 null，那么 readLine() 将在缓冲区中有“hello”文本供我编辑。

我看不出该怎么做。任何帮助，将不胜感激。

# android - 如何抑制 Kindle Fire 菜单/操作栏上的搜索图标

> ID：10956808
> 
> 赞同：3
> 
> 时间：2012-06-08T22:37:42.967
> 
> 标签：android, kindle, kindle-fire

一个搜索图标出现在 Kindle 页脚区域（我认为它是一种操作栏）。它总是出现在我的所有活动中，但我没有在每项活动中都有搜索功能。我该如何摆脱它？请注意，我认为有一种方法，因为我看到没有在每个屏幕的页脚菜单/操作栏中进行搜索的应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T12:12:30.250

根据 Kindle Fire[用户指南](http://kindle.s3.amazonaws.com/Kindle_Fire_Users_Guide.pdf)第 8 页内容栏部分，搜索按钮帮助用户搜索他们的内容库，而不是在当前应用程序中搜索。

您可以通过使您的应用全屏显示来部分隐藏整个内容栏，但您不能完全隐藏它，因为它取代了非 Kindle android 设备上的主页和返回按钮的功能。[Amazon Developers 博客](http://www.amazonappstoredev.com/)上没有记录如何从软键栏中删除单个按钮的方法。

# android - Android：展开 ListView 以填充两个项目之间的空间

> ID：10956809
> 
> 赞同：0
> 
> 时间：2012-06-08T22:37:47.780
> 
> 标签：android, listview

我有一个 ListView 夹在两个按钮之间。整个画面处于一个`ScrollView`

```
 <Button
        android:text="Take a Picture"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/btnPicture"
        android:layout_marginRight="3dp"
        android:layout_marginLeft="3dp"
        android:layout_marginTop="5dp"
        android:textSize="25dp"/>
    <ListView
        android:minWidth="25px"
        android:minHeight="25px"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/lstPhotos"
        android:visibility="gone" />
    <Button
        android:text="Location Type"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/btnLocationType"
        android:layout_marginRight="3dp"
        android:layout_marginLeft="3dp"
        android:layout_marginTop="5dp"
        android:textSize="25dp" /> 
```

当我在代码中将项目添加到列表视图时，如何让列表视图占用足够的空间以使其可见。它确实扩展为显示 1 个项目，但在我添加第二个项目后它不再扩展。

在我向列表视图添加第二个图片行后，您可以在此处看到，它不可见。

![在此处输入图像描述](../Images/1b94c84cd87749e06a329972ec96b6b7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T23:31:06.013

您永远不应该将列表视图放在滚动视图中！例如，请参见此处：[如何将 ListView 放入 ScrollView 而不会折叠？](https://stackoverflow.com/questions/3495890/how-can-i-put-a-listview-into-a-scrollview-without-it-collapsing)

# jquery - 使用 jquery 和 json 获取 reddit 评论

> ID：10956813
> 
> 赞同：1
> 
> 时间：2012-06-08T22:38:45.837
> 
> 标签：jquery, json, jsonp

谁能告诉我为什么：

**获取 reddit 帖子**：http: [//jsfiddle.net/U7Wv6/2/](http://jsfiddle.net/U7Wv6/2/)这有效

**获得 reddit 评论**： http: [//jsfiddle.net/U7Wv6/7/](http://jsfiddle.net/U7Wv6/7/)这不是吗？

json 输出格式看起来非常相似。我好难过。任何帮助表示赞赏...我只是想获得第一个/前 10 条评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T06:35:55.737

这有效[http://jsfiddle.net/U7Wv6/8/](http://jsfiddle.net/U7Wv6/8/)
注释返回一个对象数组，因此您需要选择数组中的第一个元素

```
 results[0].data 
```

# regex - sed 问题 - 从文件中提取特定单词

> ID：10956817
> 
> 赞同：3
> 
> 时间：2012-06-08T22:39:23.550
> 
> 标签：regex, linux, sed

我想获得一些有关 SED 的帮助。

我正在尝试从文件中提取一些文件，我需要的所有单词都是这样开始的。

```
39;,bugs.pr~%3D~&#39;TEXT23 
```

例如，我需要获取 TEXT23。

我做了什么，首先，将 39;,bugs.pr~%3D~' 更改为我的标志 IDEX，然后搜索 IDEX 并从该单词中提取 8 个字符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T06:55:47.857

以下 sed 命令可能会消除除您想要的所有文本。

```
sed 's/^39;,bugs.pr~%3D~&#39;//p;d' file 
```

# google-maps - 如何使用 GDAL 从 tiff 和 4 个角的纬度和经度创建 geotiff

> ID：10956818
> 
> 赞同：10
> 
> 时间：2012-06-08T22:39:25.817
> 
> 标签：google-maps, gis, gdal, geotiff

我有一张没有 TIFF 格式的地理数据的图像（地图）。
我需要从我的图像中获取 GeoTIFF 文件。我的地图每个角落都有纬度和经度。如何将我的地理数据添加到 Google 空间参考中的图像以获取 geotiff？我知道GDAL可以帮助我。谁能帮我建立一个命令

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-10T15:55:22.717

您的回答有正确的想法，但请允许我扩展。你是对的，你需要使用 gdal_translate 工具来设置地面控制点 (gcps) 来地理参考图像。但是命令行参数应该是这样的：

```
gdal_translate -of GTiff -a_srs EPSG:4326 -gcp [pixel line easting northing] -gcp [pixel line easting northing] -gcp [pixel line easting northing] sourcefile outpulfile 
```

您不一定要输出到 VRT，如果您想对文件执行其他算法，向文件添加更多数据集，最终将其输出为 KML，则 VRT 很有用 - 您可以在此处阅读其他内容（[http ://www.gdal.org/gdal_vrttut.html](http://www.gdal.org/gdal_vrttut.html)）。但为此目的，设置`-of`为 GTiff 是理想的。

```
-a_srs EPSG:4326 
```

接下来，在空间参考中你是正确的，它应该参考谷歌地球使用的坐标系 WGS84，但是我们指定它使用`EPSG:4326`- 这只是地理信息学委员会同意识别全球坐标系的编码方案（[http：/ /www.epsg.org/](http://www.epsg.org/)）。

```
-gcp [pixel line easting northing] 
```

地面控制点可能是命令行参数中最棘手的部分。前 2 个数字代表实际图像的像素和线坐标，例如 (0,0) 表示图像的最左上角。应遵循的第二组数字是您的图像应参考的相应纬度/经度坐标。现在，您只需要其中的 3 个，`-gcps`因为如果您的图像是正方形/矩形，则将确定第 4 个。

```
sourcefile outputfile 
```

这部分应该是不言自明的，只要记住它们都是 *.tif 文件。

现在，如果您需要做最后一件事来完成您的任务。您必须将图像实际投影到坐标系才能对齐。这是使用`gdalwarp`命令（[http://www.gdal.org/gdalwarp.html](http://www.gdal.org/gdalwarp.html)）关闭的。

```
gdalwarp -t_srs EPSG:4326 sourcefile outputfile 
```

如果它应该是 GeoTiff 以外的其他东西，则必须指定一个`-of`（输出文件格式） - 但默认格式是 GTiff，因此您不需要指定它。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-09T11:51:58.473

```
gdal_translate -of VRT -a_srs WGS84 -a_ullr 55.7254060 37.5516230 55.7248920 37.5569120 source image destination image 

gdal_translate -of VRT -a_srs "spacial reference" -a_ullr "left top lat/long" "right bottom lat/long" source image destination image 
```

# html - 在 Objective-C 中从 HTML 中解析图片

> ID：10956819
> 
> 赞同：0
> 
> 时间：2012-06-08T22:39:32.103
> 
> 标签：html, objective-c, image, parsing

我正在尝试从此 html 数据中检索图像：

```
<div class="image">
 <a href="http://www.website.com/en/105/News/10217/">
   <img src="/images/cache/105x110/crop/images%7Ccms-image-000005554.gif" 
        width="105" height="110" alt="kollsge (photo: author)" />
 </a>
</div> 
```

这是我的代码：

```
HTMLNode *bodyNode = [parser body];

NSArray *imageNodes = [bodyNode findChildTags:@"div"];

for (HTMLNode *imageNode in imageNodes) {
    if ([[imageNode getAttributeNamed:@"class"] isEqualToString:@"image"]) {
        NSLog(@"%@", [imageNode getAttributeNamed:@"img src"]);
    } 
} 
```

帮助将不胜感激。

我通过以下代码解决了它：

```
 for (HTMLNode *imageNode in imageNodes) {
        if ([[imageNode getAttributeNamed:@"class"] isEqualToString:@"image"]) {
            HTMLNode *aNode = [imageNode firstChild];
            HTMLNode *imgNode = [aNode nextSibling];
            HTMLNode *imNode = [imgNode firstChild];
            NSLog(@"%@", [imNode getAttributeNamed:@"src"]);
        } 
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T02:51:55.290

你没有正确地穿过树。您正试图在您的**div上找到一个名为****img src**的属性。看起来像这样：

 **```
<div class="image" img src="whatever"> 
```

一方面，这不是有效的 HTML，但更重要的问题是您想要查看*children*。您要查找的内容嵌套在 div 中，而不是属性。由于您的 div 只有一个孩子，因此快速查看您在评论中提供的项目让我相信以下内容会起作用：

```
HTMLNode *bodyNode = [parser body];

NSArray *imageNodes = [bodyNode findChildTags:@"div"];

for (HTMLNode *imageNode in imageNodes) {
    if ([[imageNode getAttributeNamed:@"class"] isEqualToString:@"image"]) {
        HTMLNode *aNode = [imageNode firstChild];
        HTMLNode *imgNode = [aNode nextSibling];
        NSLog(@"%@", [imgNode getAttributeNamed:@"src"]);
    } 
} 
```**

# android - AndroidHttpClient 和 Cookie

> ID：10956820
> 
> 赞同：0
> 
> 时间：2012-06-08T22:39:48.387
> 
> 标签：android, cookies, httpclient, httpcontext

使用带有 cookie 的 AndroidHttpClient 会给我混合 200 ok 和 403 禁止响应。我不确定我做错了什么。

我以以下方式使用 AndroidHttpClient ：

我有几个后台线程类，每个类都执行以下操作：

```
HttpGet get...
HttpClient client = AndroidHttpClient.newInstance("Android");
HttpContext http_context = HttpSupport.getHttpContextInstance(); 
CookieStore cookie_store = HttpSupport.getCookieStoreInstance();
http_context.setAttribute(ClientContext.COOKIE_STORE, cookie_store);
client.execute( 
```

HttpSupport 是一个有两个静态字段的类；一个 CookieStore 和一个 HttpContext：

```
public class HttpSupport {

private static HttpContext _context;
private static CookieStore _cookieStore;

public static synchronized HttpContext getHttpContextInstance() {
    if (_context == null) {
        _context = new BasicHttpContext();
    }
    return _context;
}

public static synchronized CookieStore getCookieStoreInstance() {
    if (_cookieStore == null) {
        _cookieStore = new BasicCookieStore();
    }
    return _cookieStore;
}

} 
```

可以在应用程序中有多个 AndroidHttpClient 实例吗？我是否正确存储了 cookie？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T21:41:01.940

我建议使用[Android 异步 HTTP 客户端](http://loopj.com/android-async-http/)

它实现了自己的持久 cookie 存储（PersistentCookieStore），非常易于使用。事实上，如果您不想使用该库的异步功能，您可以将它用于它提供的 Persistent Cookie Store。但是它的异步功能非常值得一试。

因此，要将它与您当前的课程一起使用，您可以简单地在您的 HttpSupport 类中进行更改

```
public static synchronized CookieStore getCookieStoreInstance(Context context) {
    if (_cookieStore == null) {
        _cookieStore = new PersistentCookieStore(context);
    }
    return _cookieStore;
} 
```

请注意，您必须将上下文添加到方法中，因为 PersistentCookieStore 需要它才能工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T21:29:09.207

HttpClient 自动存储我找到的 cookie，你真的应该在异步任务中完成所有这些工作（至于 Android 3.0> 要求）。

200 响应是当所有内容都已通过正确发送并且您想要的文件对您可用时，这不是问题。

403 错误非常明显，该服务器是否需要某种类型的登录才能获取文件或网页？这就是您应该调查的内容，确定如何登录的一种方法是使用谷歌浏览器之类的东西，右键单击网页，检查元素，然后观察网络文件通过，登录，观察发布请求. 了解网站的运作方式。

在这里查看异步任务：[HTTP POST request ANDROID 4 (working in 2.3)?](https://stackoverflow.com/questions/10245731/http-post-request-android-4-working-in-2-3/10245840#10245840)

我相信您可以拥有多个 HttpClient 实例，但是要使用相同的 cookie，您应该为所有连接的内容使用一个

例如：

你应该有一个 HttpClient 来登录，然后使用 get 请求一个页面，做你需要做的事情等等。

* * *

抱歉，我认为您使用的是 AndriodHttpClient 而不是 HttpClient，AndroidHttpClient 默认不存储 cookie，所以是的，您为什么使用 AndroidHttpClient 而不是 HttpClient？

# jquery - Jquery 动态创建的表单不在 FireFox 中发布

> ID：10956822
> 
> 赞同：1
> 
> 时间：2012-06-08T22:40:03.060
> 
> 标签：jquery, asp.net-mvc

我正在为列表中的每个行项目创建一个表单。此 html 通过 ajax 加载并设置为模态

```
 <%foreach (var item in group.GroupItems){%>
       <form id="bomItemForm<%=item.BomPartNumber %>" >
           <%-- ... form fields --%>
           <input type="submit" value="Add"  />
       </form>
 <%} %> 
```

然后我的jQuery有这个

```
$(document).on("submit", "[id^='bomItemForm']", function() {
    alert("hit it");
}); 
```

这适用于 IE 和 Chrome，但不适用于 Firefox。什么都没有发生。我已经尝试使用 .live 并且只使用选择器。有什么想法可以让火狐不这样吗？为简单起见，我省略了表单字段。我只是想拦截表单帖子。如前所述，在 IE 和 Chrome 中效果很好。不在火狐中。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T23:09:38.843

“提交”怎么样？

```
$("[id^='bomItemForm']").submit(function(event) {
  alert('hit it'+$(this).attr('id'));
}); 
```

# mono - 我的单声道安装坏了吗？

> ID：10956823
> 
> 赞同：0
> 
> 时间：2012-06-08T22:40:07.430
> 
> 标签：mono, automapper

我在 openSUSE 12.1 上运行单声道 2.10.6。/usr/lib/mono/4.0 或 /usr/lib/mono/2.0 中不应该有 System.Data.dll 吗？

我正在测试在 Windows 上编译的 .NET 应用程序。该应用程序引用了 automapper，当我尝试运行该应用程序时出现以下错误：

```
Unhandled Exception: System.TypeInitializationException: An exception  
was thrown by the type initializer for AutoMapper.Mappers.DataReaderMapper --->
System.IO.FileNotFoundException: Could not load file or assembly 'System.Data,
Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' or one of its
dependencies.

File name: 'System.Data, Version=4.0.0.0, Culture=neutral, 
PublicKeyToken=b77a5c561934e089' 
```

这是 mono --version 的输出：

```
linux-19xt:~ # mono --version
Mono JIT compiler version 2.10.6 (tarball Sat Oct 29 18:16:09 UTC 2011)
Copyright (C) 2002-2011 Novell, Inc, Xamarin, Inc and Contributors. www.mono-project.com
    TLS:           __thread
    SIGSEGV:       altstack
    Notifications: epoll
    Architecture:  amd64
    Disabled:      none
    Misc:          debugger softdebug
    LLVM:          supported, not enabled.
    GC:            Included Boehm (with typed GC and Parallel Mark) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T08:37:09.123

Mono 的程序集没有 Microsoft 的相同 PublicKeyToken，因为 Microsoft 不会与 Mono 团队共享密钥，因此您需要配置 AutoMapper 以忽略 PublicKeyToken。

但是，我不确定 AutoMapper 是否可以配置为与 Mono 一起使用，因为任何地方都没有官方公告，并且在 GitHub 上打开了一个问题，

[https://github.com/AutoMapper/AutoMapper/issues/217](https://github.com/AutoMapper/AutoMapper/issues/217)

还有一个关于这个的邮件线程，

[http://groups.google.com/group/automapper-users/browse_thread/thread/773193330f7d12ef?pli=1](http://groups.google.com/group/automapper-users/browse_thread/thread/773193330f7d12ef?pli=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T17:15:48.407

安装“mono-complete”或“monodevelop”，您应该不会再看到这个问题。在 unbuntu 上，命令是...

```
sudo apt-get install mono-complete 
```

或者对于monodevelop ide（也安装了mono-complete）

```
sudo apt-get install monodevelop 
```

我有 3 个虚拟机（1 个仅安装了 mono 运行时，1 个安装了 monodevelop ide，1 个安装了 mono-complete）都运行完全相同的可执行文件，但只有一个看到您描述的问题的是只有 mono运行时安装。运行上面的“mono-complete”命令解决了这个问题。

# javascript - 如何从内存中删除动态创建的 div？

> ID：10956824
> 
> 赞同：2
> 
> 时间：2012-06-08T22:40:15.643
> 
> 标签：javascript, jquery

我在使用 javascript 时遇到问题，它会在页面上随机创建背景 div（在我的网站背景上创建这些浮动圆圈）。该脚本按时间间隔运行：

```
var floatInterval = window.setInterval(createFloaters, 10000);
function createFloaters()
            {
                lastHeight = 0;
                pageOffset = $('#logo').offset();
                for(j = 0; j<10; j++)
                {
                    randomSize = j * Math.random()*20;
                    randomTop = Math.random()*randomSize + lastHeight + Math.random()*10 + 10;
                    plusOrMinus = [-1,1][Math.random()*2|0];
                    randomColorNum = Math.floor(Math.random()*colArr.length);
                    randomColor = colArr[randomColorNum];
                    randomLeft = Math.random()*990 + pageOffset.left;
                    randomOpacity = Math.random()*.5;

                    $('#floatContainer').append('<div class="circle d' + j + '" style="width:' + randomSize + 'px; height:' + randomSize + 'px; position: absolute; top:' + eval((randomTop - Math.random()*500)*plusOrMinus) + 'px; left:' + eval((randomLeft + Math.random()*200)*plusOrMinus) + 'px; border-radius:' + randomSize + 'px; background:' + randomColor + '"></div>');
                    lastHeight += randomSize;
                    $('.d' + j).delay(Math.random()*500).animate({top: randomTop, left: randomLeft, opacity: randomOpacity}, Math.random()*5000 + 5000).fadeOut().queue(function(){

                    $(this).remove();

                    });
                }

                console.log('FLOAT LENGTH: ' + $('#floatContainer div.circle').length);
            } 
```

创建浮动圆圈后，它会进行动画处理，然后将其移除。似乎 div 没有被完全删除。

当我在关注选项卡时追踪正在创建的 div 的数量时，我得到了一些正常的东西。

```
Number of Divs: 13
Number of Divs: 21
Number of Divs: 13
Number of Divs: 21
Number of Divs: 13
Number of Divs: 21 
```

然后我切换标签，坐在那里几分钟，回到原来的标签，这就是我看到的：

```
Number of Divs: 187
Number of Divs: 197
Number of Divs: 207
Number of Divs: 13
Number of Divs: 21
Number of Divs: 13
Number of Divs: 21
Number of Divs: 13
Number of Divs: 21 
```

我能做些什么来纠正这个问题？如何从内存中永久删除动态创建的 div？我检查了活动监视器，页面运行的时间越长，它就会继续占用内存。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T22:59:03.280

您使用的队列错误。只需在fadeOut 中添加一个回调。

```
.fadeOut(function(){$(this).remove();}); 
```

# objective-c - NSTimer 应该从通知调用的方法内部触发

> ID：10956825
> 
> 赞同：0
> 
> 时间：2012-06-08T22:40:25.930
> 
> 标签：objective-c, core-data, nstimer, icloud

在我的 iOS 应用程序中，我已将 AppDelegate 注册为 CoreData 更改的通知侦听器。使用这段代码：

```
[[NSNotificationCenter defaultCenter] addObserver:self
    selector:@selector(mergeChangesFromContextDidSaveNotification:)
        name:NSPersistentStoreDidImportUbiquitousContentChangesNotification
      object:[self persistentStoreCoordinator]]; 
```

并且每次有更新时都会正确调用 mergeChangesFromContextDidSaveNotification 方法。

但是在这个方法中，我试图调用一个 NSTimer 来做另一个操作：

```
- (void)mergeChangesFromContextDidSaveNotification:(NSNotification *)notification {

        NSTimer *t =[NSTimer scheduledTimerWithTimeInterval:10.0
                                                           target:self 
                                                         selector:@selector(mergeCoreDataFromCloud:)
                                                         userInfo:nil 
                                                          repeats:NO];

    }
} 
```

关键是永远不会调用应由计时器触发的mergeCoreDataFromCloud：。这是签名：

```
-(void)mergeCoreDataFromCloud:(NSTimer*)timer {
  // never called...
} 
```

请注意，我处于开发的早期阶段，代码并不完美，我只想知道为什么计时器没有启动。我想它与线程有关，但我不知道......

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T23:11:10.470

关于线程问题，您可能是正确的-就是这种情况，然后我认为您必须使用计划外的计时器并将其手动添加到运行循环中。试试这个，看看它是否有效：

```
NSTimer *t = [NSTimer timerWithTimeInterval:10 target:self selector:@selector(mergeCoreDataFromCloud:) userInfo:nil repeats:NO];
NSRunLoop *runLoop = [NSRunLoop currentRunLoop];
[runLoop addTimer:t forMode:NSDefaultRunLoopMode]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T02:51:42.517

计时器依赖于运行循环在它被调度的模式下运行。

在 Cocoa 应用程序中，主线程自动运行其运行循环。但是，不能依赖其他线程来自动运行其运行循环。

所以，通常你想在主线程上安排定时器。您还可以将它们安排在您创建和控制的线程上，从而以适当的模式运行其运行循环。

您的问题中没有足够的信息来了解调用此代码的线程。

# tags - 使用 wxpython 标记像 facebook 这样的图像

> ID：10956827
> 
> 赞同：0
> 
> 时间：2012-06-08T22:40:54.447
> 
> 标签：tags, wxpython

我该如何创建类似于 facebook 的标记图像功能？我的想法是我希望用户能够单击图像的区域以对其进行标记。我也想存储用户点击的坐标。我将 wxWidgets 与 Python2.7.2 一起使用。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T13:40:18.223

您将需要使用 wx.GetMousePosition 之类的东西来获取坐标。我可能会绑定到 wx.EVT_LEFT_DOWN 或 wx.EVT_LEFT_UP。wxPython 站点上有一个[wiki 页面，其中包含更多信息。](http://wiki.wxpython.org/ClientCoordinates)或者您可能会发现阅读[文档](http://wxpython.org/docs/api/wx.MouseEvent-class.html)很有帮助。

# c++ - 将另一个命令行程序的输出加载到我的

> ID：10956832
> 
> 赞同：0
> 
> 时间：2012-06-08T22:41:33.870
> 
> 标签：c++, command-line, input

好的，假设我有一个程序（在 Windows 中是一个 .exe 文件），当我运行它时，它会输出一些信息......现在我正在编写另一个程序（在 c++ 中），我需要它来自动运行那个 .exe 文件和阅读输出，以便它可以处理该信息以进行进一步的操作...

我该怎么办 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T22:44:18.830

在 Windows 上使用`popen`或（根据评论）`_popen`。基本上它作为 in 背后的东西`|`起作用`some program | thing`。

通常我反对发布完整的代码，但我今天确实写了这个并且手头有它，所以，给你。据我了解，C++ 没有一个*很好*的替代接口，`popen`但是如果你在那个层引入了 boost 库或其他东西，那么就有解决方案。

注意我使用`char[10]`是因为在我的应用程序中我知道输出会很短。

```
 PopenWrapper(const std::string& command) {

            fd = popen(command.c_str(), "r");
            if(fd == NULL) {
                    throw PopenException("Failed to open command: " + command);
            }
    }

    std::string get() {
            char line[10];
            fgets(line, sizeof(line), fd);
            return std::string(line);
    }

    ~PopenWrapper() {
            if(fd != NULL) {
                    pclose(fd);
            }
    } 
```

# android-emulator - 无法创建 AVD，因为 ARM EABI 找不到“userdata.img”文件

> ID：10956835
> 
> 赞同：0
> 
> 时间：2012-06-08T22:42:04.843
> 
> 标签：android-emulator

我安装了 Android 4.0.3、jdk 和 ADT。我尝试制作 AVD，但错误消息显示“找不到 userdata.img 文件。” 我在 SDK 管理器中安装了 ARM EABI v7a 系统映像，但仍然收到相同的错误消息。我读了一篇文章，上面写着“即使你下载了 Eclipse 外部的 AVD Manager 并说你已经安装了它，你也必须使用 AVD 插件进入 Eclipse 并重新安装它。必须做两次。 " 我也这样做了两次，但我仍然无法创建 AVD。我不知道还能做什么。

我只是一个初学者，所以请有人帮助我！

感谢您的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T03:07:21.553

我有同样的问题，我已经安装了“ARM EABI v7a”。以下对我有用：

1.  使用 Eclipse 的“SDK Manager”安装 Android 4.0 (API 14)
2.  使用 Eclipse 的“AVD Manager”创建一个 Android 4.0 虚拟设备
3.  现在，尝试创建一个 Android 4.0.3 (API 15) 虚拟设备。这一次，它应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T02:32:06.943

请记住在创建 AVD 时将 CPU/ABI 字段设置为“ARM (armeabi-v7a)”。

![在此处输入图像描述](../Images/971ac41d74de72dfa0af672d2636fe3e.png)

# php - PHP/MySQL：临时插入行

> ID：10956837
> 
> 赞同：1
> 
> 时间：2012-06-08T22:42:21.107
> 
> 标签：php, mysql, rows, temporary

我正在开发一个用 PHP 和 Mysqli 编写的复杂数据库应用程序。对于大型数据库操作，我正在使用后台工作的守护程序（也是 PHP）。在这些可能需要几分钟的操作期间，我想阻止用户访问受影响的数据并改为向他们显示消息。

我考虑过创建一个 Mysql 表并在每次发生特定的守护程序操作时插入一行。然后我总是能够检查在尝试访问数据时是否发生了某个操作。

但是，当然重要的是记录不要留在数据库中，如果守护进程因任何原因终止（从控制台终止，丢失数据库连接，拔掉插头等）我不认为 Mysql 事务 /回滚能够做到这一点，因为必须提交才能使更改公开，并且如果终止，记录将保留在数据库中。

如果进程终止，有没有办法确保记录被删除？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T22:57:22.847

这是一个有趣的问题，我实际上是在几年前为大学课程实施的。

我使用的技巧是使用事务隔离。如果您的守护进程创建了表明它们正在进行中的记录，但没有提交它，那么您说其他客户端不会看到该记录是正确的。但是，如果您将该客户端的隔离级别设置为 READ UNCOMMITTED，您将看到记录表明它正在进行中 - 因为 READ UNCOMMITTED 将向您显示来自尚未提交的其他客户端的更改。（守护程序将保留默认隔离级别）。

您应该将客户端的隔离级别设置为仅针对该守护程序检查读取未提交，而不是针对它的其他工作，因为它可能非常危险。

如果守护进程崩溃，事务就会中止并且记录会消失。如果成功，它可以在数据库中将其标记为完成或删除记录等，然后提交。这真的很好，因为如果守护进程因任何原因失败，它所做的所有更改都会被反转并且可以重试。

如果您需要更多解释或代码，我也许可以在某处找到我的作业:)

[事务隔离级别参考](http://dev.mysql.com/doc/refman/5.5/en/dynindex-isolevel.html "隔离级别参考")

请注意，这一切都需要 InnoDB 或任何好的事务数据库。

# grails - grails（特别是控制器）中的通用方法拦截

> ID：10956841
> 
> 赞同：2
> 
> 时间：2012-06-08T22:42:48.743
> 
> 标签：grails, groovy

我正在尝试在 grails 中创建一个通用函数，它允许我指定一个类和函数名，并根据该标准拦截任何函数调用：

```
getSomeClass().metaClass.invokeMethod = { String methodName, args ->
    MetaMethod someAction =  getSomeClass().metaClass.getMetaMethod(methodName, args)
    def result = someAction.invoke(delegate, args)
    if (methodName==getSomeMethodName())
        intercept(args, result)
    return result
} 
```

这适用于 POGO 和域类，但似乎不适用于控制器类。虽然我完全知道 Grails 中有可用的控制器拦截器和过滤器，但它们并没有真正集中我想要实现的目标，而是试图为一些集中的行为创建一个简单的通用函数

任何关于为什么这在控制器上不起作用的指导将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T09:47:22.590

您的方法适用于通过 Groovy 元类机制进行的方法调用，但在 Grails 2 中，这不适用于控制器操作 - 它们是使用普通 Java 反射 ( `java.lang.reflect.Method.invoke`) 调用的，因此您的自定义`invokeMethod`被绕过。

如果您想要一种适用于来自 Java 和 Groovy 的调用的 AOP 机制，您可能必须使用 AspectJ 加载时编织之类的东西。Spring 的基于代理的 AOP 可能工作，但 Grails 2 控制器系统依赖于具有特定`@Action`注释的操作方法（在编译时由 AST 转换添加），我不知道 Spring AOP 代理是否保留来自目标的方法注释生成的代理方法上的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T19:50:08.153

会不会`MyController.metaClass.invokeMethod`是在你定义之后被grails框架覆盖了？

您是否尝试过`MyController.metaClass.invokeMethod`通过反射检查内容？

# sql-server - sproc 中的条件提示

> ID：10956843
> 
> 赞同：0
> 
> 时间：2012-06-08T22:43:08.760
> 
> 标签：sql-server

除了在 sproc 中复制查询之外，有没有办法根据 sproc 参数指定提示？例如，使用 parameter `@waitForLock`，如果它设置为 0 我想使用`READPAST`提示，否则等待/阻塞直到另一个事务完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T23:01:50.513

总的来说，我喜欢这个`OPTION RECOMPILE`建议，尽管这意味着它每次都会重新编译，即使 stats 或你的参数没有改变。这通常是为了阻止参数嗅探，对于想要避免或不避免锁定的情况没有帮助。

一种想法是使用动态 SQL（这也可能是有益的，具体取决于您的“针对临时工作负载进行优化”设置以及使用一个参数或另一个参数运行的频率）。

```
CREATE PROCEDURE dbo.whatever
    @waitForLock BIT = 1
AS
BEGIN
   SET NOCOUNT ON;

   DECLARE @sql NVARCHAR(MAX);

   SET @sql = 'SELECT something FROM dbo.somewhere';

   IF @waitForLock = 0
      SET @sql = @sql + ' WITH (READPAST)';

   SET @sql = ' WHERE <some condition> ...';

   EXEC sp_executesql @sql;
END
GO 
```

# apache - htaccess canonical url with slugs

> ID：10956845
> 
> 赞同：0
> 
> 时间：2012-06-08T22:43:20.370
> 
> 标签：apache, .htaccess, mod-rewrite

Trying to figure out how to write my httaccess to let me have it so my urls are 'www' free and allow me to have a slug style setup for 'friendly' urls. I seem to keep writing myself into an internal 500 error though. That or it doesn't seem to carry over the extra stuff. extra stuf being anything from .com/ over ie mydomain.com/hello/world

```
RewriteEngine On
Options +FollowSymlinks -MultiViews
RewriteBase /
RewriteCond %{HTTP_HOST} ^www.mydomain.com [NC]
RewriteRule ^(.*)/?$ http://mydomain.com/index.php?r=$1 
```

Overall goal take URL in either of these 2 fashions

[http://mydomain.com/hello/world](http://mydomain.com/hello/world)

[http://www.mydomain.com/hello/world](http://www.mydomain.com/hello/world)

and have it translate to

[http://mydomain.com/hello/world](http://mydomain.com/hello/world) to the front end but on the backend be the equivalent to [http://mydomain.com/index.php?r=hello/world](http://mydomain.com/index.php?r=hello/world)

also I would like to apply conditions where if a file exists, or folder exists, or whatever exists stop the rewrite cold. I know this is possible well without the removal of the www part, not sure with that part, as I used to once have an htaccess file that I could do this with, but I have lost that file and its been far to long since ive played with htaccess to remember how i did it in the first place.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T22:56:51.833

This will forward www to non-www site. Also take care of the index.php.

```
RewriteCond %{HTTP_HOST} ^www\.domain\.com$
RewriteRule ^(.*)$ http://domain.com/$1 [R=301,L]
RewriteRule ^(.*)$ index.php?r=$1 [QSA,L] 
```

You can also add the following two lines. Like this if you have any css or images it will not rewrite them to index.php:

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ index.php?r=$1 [QSA,L] 
```

This is not tested but a general guidance.

# delphi - 文本 DFM 上下文菜单选项是什么意思？

> ID：10956850
> 
> 赞同：10
> 
> 时间：2012-06-08T22:43:52.360
> 
> 标签：delphi, contextmenu, dfm

当您右键单击 Delphi 表单时，您会得到弹出的上下文菜单。底部选项是**Text DFM**。此选项可以选中或不选中。选中或取消选中此选项是什么意思？

![在此处输入图像描述](../Images/c779745b57bf21eb07f94d8889771f72.png)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-08T22:48:46.137

此选项用于选择用于保存表单的格式（二进制或文本格式）。

如果您使用文本 DFM 选项，表单（dfm 文件）将以文本格式存储，如下所示

```
object Form1: TForm1
  Left = 451
  Top = 290
  Caption = 'Form38'
  ClientHeight = 300
  ClientWidth = 635
  Color = clBtnFace
  Font.Charset = DEFAULT_CHARSET
  Font.Color = clWindowText
  Font.Height = -11
  Font.Name = 'Tahoma'
  Font.Style = []
  OldCreateOrder = False
  PixelsPerInch = 96
  TextHeight = 13
end 
```

# iphone - 如何在 AVAudioPlayer 播放器对象中继承或存储额外信息

> ID：10956855
> 
> 赞同：1
> 
> 时间：2012-06-08T22:44:33.400
> 
> 标签：iphone, objective-c, ios, avaudioplayer, subclassing

我需要创建一个新的 NSNumber 或整数属性，称为`primaryKey`包含在我创建的所有[AVAudioPlayer](http://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVAudioPlayerClassReference/Reference/Reference.html)对象中，以便我可以在`audioPlayerDidFinishPlaying`回调中读取该属性的值并确切知道播放了哪个数据库记录。

我需要这样做的原因是：我不能使用播放器[URL 属性](http://developer.apple.com/library/mac/documentation/AVFoundation/Reference/AVAudioPlayerClassReference/Reference/Reference.html#//apple_ref/occ/instp/AVAudioPlayer/url)来确定它是哪个数据库记录，因为可以在播放列表中多次使用同一个声音文件。

如何向这样的现有 iOS 类添加新属性？

* * *

例子：

```
AVAudioPlayer *newAudio = [[AVAudioPlayer alloc] initWithContentsOfURL:soundFileURL error:nil];  

self.theAudio = newAudio; // automatically retain audio and dealloc old file if new file is loaded
if (theAudio != nil) [audioPlayers addObject:theAudio];

[newAudio release];

[theAudio setDelegate: theDelegate];
[theAudio setNumberOfLoops: 0];
[theAudio setVolume: callVolume];

// This is the new property that I want to add
[theAudio setPrimaryKey: thePrimaryKey];

[theAudio play]; 
```

然后我会像这样在回调中检索它：

```
- (void) audioPlayerDidFinishPlaying:(AVAudioPlayer *)player successfully:(BOOL)flag 
{    
   NSNumber *finishedSound = [NSNumber numberWithInt:[player primaryKey]];

   // Do something with this information now...
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T23:00:22.397

您可以创建一个子类并添加您的属性，就像对任何东西进行子类化一样。

## 界面

```
@interface MyAudioPlayer : AVAudioPlayer

@property (nonatomic) int primaryKey;

@end 
```

## 执行

```
@implementation MyAudioPlayer

@synthesize primaryKey = _primaryKey;

@end 
```

## 创造

```
MyAudioPlayer *player = [[MyAudioPlayer alloc] initWithContentsOfURL:soundFileURL error:nil];
player.primaryKey = thePrimaryKey;
... 
```

## 代表

```
- (void)audioPlayerDidFinishPlaying:(AVAudioPlayer *)player successfully:(BOOL)flag {
    if ([player isKindOfClass:[MyAudioPlayer class]]) {
        MyAudioPlayer *myPlayer = (MyAudioPlayer *)player;
        NSNumber *primaryKeyObject = [NSNumber numberWithInt:myPlayer.primaryKey];
        ...
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T22:58:02.697

一种简单的方法可能是创建一个 NSMutableDictionary 并使用您创建的 AVAudioPlayers 作为 KEYS，并将主键（或整个字典）作为相应的 VALUE。然后，当玩家停止播放（或错误）时，您可以在字典中查找并恢复您喜欢的任何内容。

# apache-flex - Flex 4 AIR APP卸载模块的正确方法

> ID：10956857
> 
> 赞同：0
> 
> 时间：2012-06-08T22:44:36.227
> 
> 标签：apache-flex, module

我一直在谷歌上寻找这个，但我找不到一个好的答案。我正在使用 flex 4 并使用模块构建一个空中应用程序（会有很多模块，因为这是一个大项目）。我设法在popupmanager调用的titlewindow中加载模块，但是当titlewindow关闭时，模块没有被卸载（垃圾）——我使用flasbuilder中的分析器检查了这一点。

这是我的代码，在深入项目之前，我需要知道使用模块是否朝着正确的方向前进。

谢谢大家

```
Main APP: MXML

<s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009"
                   xmlns:s="library://ns.adobe.com/flex/spark"
                   xmlns:mx="library://ns.adobe.com/flex/mx"
                   xmlns:tblusersservice="services.tblusersservice.*"
                   xmlns:valueObjects="valueObjects.*"
                   xmlns:tbluserservice="services.tbluserservice.*"
                   width="100%" height="100%" applicationComplete="checkForUpdate()" preinitialize="nativeWindow.maximize();" currentState="login">

<fx:Script source="includes/_loadtracker.as"/>

<s:Panel id="panelmain" includeIn="mainmenu" left="5" width="100%" height="100%" resizeEffect="Resize" title="Main menu">

    <s:Image id="companymenu" right="15" top="130" width="118" height="93" buttonMode="true"
             click="loadmodule('mod_company', 'Company Information', 931, 446);" source="assets/company.png" useHandCursor="true"/>

</s:Panel>

</s:WindowedApplication>

_loadtracker.as:

// ActionScript file
import flash.filesystem.*;
import flash.events.ErrorEvent;
import flash.events.MouseEvent;
import flash.events.Event;
import flash.display.*;
import air.update.ApplicationUpdaterUI;
import air.update.events.UpdateEvent;
import mx.controls.Alert;       
import mx.managers.PopUpManager;
import mx.rpc.events.ResultEvent;
import spark.components.TitleWindow;
import valueObjects.*;
import flash.desktop.NativeApplication;

// Open the pop-up window.
private function loadmodule(modname:String, modtitle:String, modwidth:int, modheight:int):void {
// Create a non-modal TitleWindow container.
settings.moduletoload = modname;
var titleWindow:TitleWindow=
    PopUpManager.createPopUp(this, showmodules, true) as TitleWindow;
titleWindow.title = modtitle;
titleWindow.width = modwidth;
titleWindow.height = modheight + 35;
    PopUpManager.centerPopUp(titleWindow);
}

showmodules.mxml

<s:TitleWindow xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" width="400" height="400"  creationComplete="initModule()" close="handleCloseEvent()">

<fx:Script>
    <![CDATA[

        import mx.controls.Alert;
        import mx.core.IVisualElement;
        import mx.events.ModuleEvent;
        import mx.managers.PopUpManager;
        import mx.modules.IModuleInfo;
        import mx.modules.ModuleManager;
        import mx.rpc.events.ResultEvent;
        import services.tbluserservice.*;

        public var info:IModuleInfo;
        public var modclosed:Boolean = false;

        private function initModule():void {
            this.addEventListener("foobar", handleCloseEventmodule);

            info = ModuleManager.getModule("/modules/"+settings.moduletoload+".swf");
            info.addEventListener(ModuleEvent.READY, modEventHandler);           

            info.load(null, null, null, moduleFactory);
        }

        /* Add an instance of the module's class to the display list. */        
        private function modEventHandler(e:ModuleEvent):void {

            this.addElement(info.factory.create() as IVisualElement);
        }

        // Handle the close button and Cancel button.
        public function handleCloseEvent():void {

                PopUpManager.removePopUp(this);
                info.unload();
                info.release();
                info = null;

        }

    ]]>
</fx:Script>

<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>
</s:TitleWindow>

mod_company.mxml

<s:Module xmlns:fx="http://ns.adobe.com/mxml/2009"
      xmlns:s="library://ns.adobe.com/flex/spark"
      xmlns:mx="library://ns.adobe.com/flex/mx"
      xmlns:tblcompanyservice="services.tblcompanyservice.*"
      xmlns:valueObjects="valueObjects.*"
      width="931" height="446"
      creationComplete="LoadData()">
<fx:Script>
    <![CDATA[
        import mx.events.FlexEvent;

        protected function dataGrid_creationCompleteHandler(event:FlexEvent):void
        {
            getAllTblcompanyResult.token = tblcompanyService.getAllTblcompany();
        }

    ]]>
</fx:Script>

<fx:Script source="../includes/_company.as"/>

<fx:Declarations>
    <tblcompanyservice:TblcompanyService id="tblcompanyService"
                                         fault="Alert.show(event.fault.faultString + '\n' + event.fault.faultDetail)"
                                         showBusyCursor="true"/>
    <s:CallResponder id="getTblcompanyByIDResult" fault="Alert.show(event.fault.faultString + '\n' + event.fault.faultDetail)"
                     result="tblcompany = getTblcompanyByIDResult.lastResult as Tblcompany"/>
    <valueObjects:Tblcompany id="tblcompany"/>
    <s:CallResponder id="updateTblcompanyResult"/>
    <s:CallResponder id="getAllTblcompanyResult"/>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>
<s:Label x="81" y="41" text="COMPANY NAME"/>
<s:Label x="81" y="71" text="ADDRESS"/>
<s:Label x="83" y="131" text="CITY"/>
<s:Label x="83" y="161" text="STATE"/>
<s:Label x="83" y="191" text="ZIP"/>
<s:Label x="83" y="221" text="COUNTRY"/>
<s:Label x="582" y="41" text="TELEPHONE"/>
<s:Label x="582" y="71" text="FAX"/>
<s:Label x="582" y="102" text="WATTS"/>
<s:Label x="83" y="276" text="OWNER"/>
<s:Label x="83" y="324" text="LOGO PATH"/>
<s:TextInput id="fNameTextInput" x="185" y="32" width="323" text="{tblcompany.fName}"/>
<s:TextInput id="faddressTextInput" x="185" y="62" width="256" text="{tblcompany.faddress}"/>
<s:TextInput id="faddress2TextInput" x="185" y="92" width="256" text="{tblcompany.faddress2}"/>
<s:TextInput id="fcityTextInput" x="185" y="122" width="256" text="{tblcompany.fcity}" textAlign="left"/>
<s:TextInput id="fstateTextInput" x="185" y="152" width="256" text="{tblcompany.fstate}"/>
<s:TextInput id="fzipTextInput" x="185" y="182" width="81" text="{tblcompany.fzip}"/>
<s:TextInput id="fcountryTextInput" x="185" y="212" width="256" text="{tblcompany.fcountry}"/>
<s:TextInput id="ftelTextInput" x="701" y="32" text="{tblcompany.ftel}"/>
<s:TextInput id="ffaxTextInput" x="701" y="62" text="{tblcompany.ffax}"/>
<s:TextInput id="fwattsTextInput" x="701" y="92" text="{tblcompany.fwatts}"/>
<s:TextInput id="fownerTextInput" x="185" y="266" width="418" text="{tblcompany.fowner}"/>
<s:TextInput id="flogopathTextInput" x="185" y="314" width="644" text="{tblcompany.flogopath}"/>
<s:TextInput id="fidTextInput" x="224" y="379" text="{tblcompany.fid}" visible="false"/>
<s:Button id="button" x="79" y="379" label="Save" click="button_clickHandler(event)"/>
<s:DataGrid id="dataGrid" x="158" y="242"
            creationComplete="dataGrid_creationCompleteHandler(event)" requestedRowCount="4">
    <s:columns>
        <s:ArrayList>
            <s:GridColumn dataField="fid" headerText="fid"></s:GridColumn>
            <s:GridColumn dataField="fName" headerText="fName"></s:GridColumn>
            <s:GridColumn dataField="fowner" headerText="fowner"></s:GridColumn>
            <s:GridColumn dataField="faddress" headerText="faddress"></s:GridColumn>
            <s:GridColumn dataField="faddress2" headerText="faddress2"></s:GridColumn>
            <s:GridColumn dataField="fcity" headerText="fcity"></s:GridColumn>
            <s:GridColumn dataField="fzip" headerText="fzip"></s:GridColumn>
            <s:GridColumn dataField="fstate" headerText="fstate"></s:GridColumn>
            <s:GridColumn dataField="fcountry" headerText="fcountry"></s:GridColumn>
            <s:GridColumn dataField="ftel" headerText="ftel"></s:GridColumn>
            <s:GridColumn dataField="ffax" headerText="ffax"></s:GridColumn>
            <s:GridColumn dataField="fwatts" headerText="fwatts"></s:GridColumn>
            <s:GridColumn dataField="flogopath" headerText="flogopath"></s:GridColumn>
            <s:GridColumn dataField="femail" headerText="femail"></s:GridColumn>
        </s:ArrayList>
    </s:columns>
    <s:typicalItem>
        <fx:Object faddress="faddress1" faddress2="faddress21" fcity="fcity1"
                   fcountry="fcountry1" femail="femail1" ffax="ffax1" fid="fid1"
                   flogopath="flogopath1" fName="fName1" fowner="fowner1" fstate="fstate1"
                   ftel="ftel1" fwatts="fwatts1" fzip="fzip1"></fx:Object>
    </s:typicalItem>
    <s:AsyncListView list="{getAllTblcompanyResult.lastResult}"/>
</s:DataGrid>
</s:Module>

_company.as

// ActionScript file
//import flash.desktop.NativeApplication;
import flash.events.MouseEvent;
import flash.events.Event;
import mx.controls.Alert;
//import mx.core.Application;
//import mx.core.mx_internal;
import services.tblcompanyservice.*;
import valueObjects.*;

protected function LoadData():void {
getTblcompanyByIDResult.token = tblcompanyService.getTblcompanyByID(parseInt("1"));
}

protected function button_clickHandler(event:MouseEvent):void {
tblcompany.fid = parseInt(fidTextInput.text);

tblcompany.fName = fNameTextInput.text;
tblcompany.fowner = fownerTextInput.text;
tblcompany.faddress = faddressTextInput.text;
tblcompany.faddress2 = faddress2TextInput.text;
tblcompany.fcity = fcityTextInput.text;
tblcompany.fzip = fzipTextInput.text;
tblcompany.fstate = fstateTextInput.text;
tblcompany.fcountry = fcountryTextInput.text;
tblcompany.ftel = ftelTextInput.text;
tblcompany.ffax = ffaxTextInput.text;
tblcompany.fwatts = fwattsTextInput.text;
tblcompany.flogopath = flogopathTextInput.text;
tblcompany.femail = "";
updateTblcompanyResult.token = tblcompanyService.updateTblcompany(tblcompany);
//Alert.show("Modifications saved");
//this.dispatchEvent(new Event("foobar", true));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T23:04:40.393

卸载 Flex 模块在[历史上一直存在问题](http://blogs.adobe.com/aharui/2009/08/what_we_know_about_unloading_m.html)。Flex 4 和我认为 4.5 开始解决根本问题，让我们的生活更轻松。

当您的主应用程序中的某些内容维护对模块中对象的引用时，它将阻止您的模块卸载。有很多方法可以发生这种情况。由于其工作方式，Flex 可能仍会导致其中一些问题。但是主要的头痛问题已经得到缓解（不过我会确保您使用的是 Flex 4.5）。

你现在考虑这个绝对是明智的。不是关于是否使用模块的选择，而是确保它们正在卸载。

我链接到的文章是来自 Flex SDK 开发人员的旧帖子，虽然其中一些问题可能不再存在，但这些概念应该具有启发性。

**编辑**

在进一步回顾中，我觉得只有一件事情值得一看：

*   模块中的脚本标签可能会遇到样式可能引入的相同问题（也可能是红鲱鱼）。这个想法是，使用该脚本的第一个类**可能**会在 Flex 内部与该脚本永久关联。如果该类是一个模块，它将永远不会卸载。作为测试，您也可以尝试在`WindowedApplication`类中声明脚本标记（即使它没有被使用）。

我想到的另一件事是您认为的可绑定变量。但经过进一步审查，我看不出这些是如何导致内存泄漏的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T02:04:13.980

我认为问题在于您每次都在创建一个新的 TitleWindow，并且 TitleWindow 向通过模块加载器加载的模块添加了一个事件侦听器，并且[从不删除它](http://www.developria.com/2010/08/rethinking-addeventlistener-an.html)。理论上， PopupManager.removePopup 也应该每次都取消引用您的 TitleWindow ，但是，老实说，可能无法信任将此功能编写为全局/静态类的人在其他地方遵守良好实践，因此您可能应该使用F3 查看 PopupManager 上的代码，并确保它正在删除它添加的任何事件侦听器并将对标题窗口的引用归零。因为它是一个静态类，一旦有东西与它对话，如果它没有正确地取消引用，它们将在你的应用程序的生命周期内一直存在。

接下来，您将手动创建 Module 的实例，即使您已经加载了一个实例。你做了一些事情（没有删除你的事件监听器）来尝试释放加载器，但你永远不会释放手动创建的实例。为了简化一点，尝试只添加加载的模块而不是创建一个额外的模块。

另一个建议是*不要*使用 View 元素来代替数据存储。所以，当你得到它时，不是绑定到 VO，而是从中填充你的字段。当有任何变化时，根据 VO 的值更新 VO。这会产生更多代码，但一方面，您始终知道您的数据是最新的。另一方面，如果需要，数据可以独立于视图传播。但这是可以帮助您消除绑定将 VO 保存在内存中的可能性的一件事。

还有一些你做的事情会在你的代码周围产生一种微弱的谷仓气味，这些也可能是问题的根源。例如，您的标题窗口子类似乎有对设置的引用，即使您没有给它一个。这表明设置实际上是一个静态类，并且您忽略了类应该以大写开头的命名约定。更重要的是，如果您在像这样的后台通道中进行通信，则无法查看您的代码并确定您没有发生任何事情，您以某种方式为设置提供了对它所持有的东西的引用上。

您还有一个似乎是未声明的变量 modulefactory，但我认为这可能是一个名称错误的类，它与您的 TitleWindow 位于同一个包中（因此没有它的导入语句）。简短的建议：如果您想在论坛上获得帮助，遵循命名约定将使希望帮助您了解您所做工作的人更容易。在这种情况下，您可能会在某些地方使用“非法”功能回避最佳实践 OOP 通信，并且由于您命名事物的方式，它们不容易识别。

但最终，我认为如果您只使用模块的一个副本并删除事件侦听器，您应该能够放开您的模块，这应该可以让您释放 VO。

# c# - Socket.Receive() 返回不正确的数据量

> ID：10956859
> 
> 赞同：0
> 
> 时间：2012-06-08T22:44:39.150
> 
> 标签：c#, file, sockets, upload, send

作为学校项目，我正在创建一个 FileSharing 应用程序。我将所有我想要的消息发送到服务器，一切都很好，但是当谈到将文件上传到服务器时，文件永远不会是它应该的样子。我调试了应用程序，发现 Socket 没有返回正确的字节数。我不知道这是否应该是正确的方式，但我认为这是错误的。例如，当我上传一个小的 .txt 文件并使用 Notepad++ 打开它时，我看到文件末尾有很多空字符，这意味着我写的比应该写的多。我在互联网上搜索了它，并在 codeplex 找到了一个与我正在做的相同的应用程序，但是套接字返回了正确的数据量，[http://srf.codeplex.com/](http://srf.codeplex.com/)。

如果有人可以帮助我，我将不胜感激。对不起，如果英语很烂，那不是我的母语。

处理第一条消息并确实接收 clint 连接的服务器函数：

```
 public void Brodcast()
    {
        tcpListener.Start();
        while (true)
        {
            try
            {
                ClientSocket = tcpListener.AcceptSocket();
                MessageReceiving();
            }
            catch { }
        }
    }

    public void MessageReceiving()
    {
        if (ClientSocket.Connected)
        {
            OpenPackage.MessageTypeToBytes RSMessage = new OpenPackage.MessageTypeToBytes();
            ClientSocket.Receive(RSMessage.MessageBytes, 512, SocketFlags.None);
            if (RSMessage.TypeOfMessage == MessageType.Login)
                DoLogin();
            else if (RSMessage.TypeOfMessage == MessageType.Download)
                SendFile();
            else if (RSMessage.TypeOfMessage == MessageType.Upload)
                ReceiveFile();
            else if (RSMessage.TypeOfMessage == MessageType.NConta)
                NewAccount();
            else if (RSMessage.TypeOfMessage == MessageType.Search)
                SearchResult();
            else if (RSMessage.TypeOfMessage == MessageType.Apagar)
                DeleteFile();
        }
    } 
```

服务器：

```
 public void ReceiveFile()
    {
        try
        {
            byte[] MessageBytes = new byte[512];
            ClientSocket.Receive(MessageBytes, 512, SocketFlags.None);
            string Nickname = Encoding.ASCII.GetString(MessageBytes);
            string[] CNickFich = Nickname.Split('$');
            FileHandler Handler = new FileHandler();
            long DirectorySize = Handler.GetDirectorySize("C:\\" + CNickFich[0]);
            long FileSize = long.Parse(CNickFich[2]);
            bool Subs = false;
            if ((FileSize + DirectorySize) < MaxFolderSize && MaxFileSize > FileSize)
            {
                if (!Directory.Exists("C:\\" + CNickFich[0]))
                    Directory.CreateDirectory("C:\\" + CNickFich[0]);
                if (File.Exists("C:\\" + CNickFich[0] + "\\" + CNickFich[1]))
                {
                    File.Delete("C:\\" + CNickFich[0] + "\\" + CNickFich[1]);
                    Subs = true;
                }
                MessageTypeToBytes MessageInBytes = new MessageTypeToBytes() { TypeOfMessage = MessageType.OK };
                ClientSocket.Send(MessageInBytes.MessageBytes, 512, SocketFlags.None);

                int qtdReceived = 0;
                long CurrentSize = 0;
                byte[] FileBuffer = new byte[BufferSize];
                FileStream FileStr = new FileStream("C:\\" + CNickFich[0] + "\\" + CNickFich[1], FileMode.CreateNew, FileAccess.Write);
                BufferedStream BufferStr = new BufferedStream(FileStr);
                while (CurrentSize < FileSize)
                {
                    qtdReceived = ClientSocket.Receive(FileBuffer, 0, FileBuffer.Length, 0);
                    CurrentSize += qtdReceived;
                    BufferStr.Write(FileBuffer, 0, qtdReceived);
                    BufferStr.Flush();
                }
                BufferStr.Close();
                FileStr.Close();
                SqlDataAdapter data = new SqlDataAdapter("SELECT COD_CONTA FROM CONTAS WHERE NICKNAME='"
                + CNickFich[0] + "'", OConn);
                DataTable dt = new DataTable();
                data.Fill(dt);
                if (NFicheiro(Handler.MD5HashFromFile("C:\\" + CNickFich[0] + "\\" + CNickFich[1]), "C:\\" + CNickFich[0] + "\\" + CNickFich[1], Subs,
                    int.Parse(dt.Rows[0][0].ToString()), CNickFich[3]))
                    MessageInBytes.TypeOfMessage = MessageType.OK;
                else
                    MessageInBytes.TypeOfMessage = MessageType.Erro;
                ClientSocket.Send(MessageInBytes.MessageBytes, 512, SocketFlags.None);
                //NFicheiro(new FileHandler().MD5HashFromFile("C:\\" + CNickFich[0] + "\\" + CNickFich[1]), "C:\\" + CNickFich[0], false, 1, );
            }
            else
            {
                MessageTypeToBytes MessageInBytes = new MessageTypeToBytes() { TypeOfMessage = MessageType.Erro };
                ClientSocket.Send(MessageInBytes.MessageBytes, 512, SocketFlags.None);
            }
        }
        catch
        {
            MessageTypeToBytes MessageInBytes = new MessageTypeToBytes() { TypeOfMessage = MessageType.Erro };
            ClientSocket.Send(MessageInBytes.MessageBytes, 512, SocketFlags.None);
        }
    } 
```

客户：

```
 private void UploadWork_DoWork(object sender, DoWorkEventArgs e)
    {
        FileStream FileStr = null;
        BufferedStream BufferStr = null;
        Stopwatch Counter = new Stopwatch();
        try
        {
            int CurrentProgress = 0;
            Program.CTasks.ClientSocket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
            Program.CTasks.ClientSocket.ReceiveTimeout = 60000;
            Program.CTasks.ClientSocket.SendTimeout = 60000;
            Program.CTasks.ClientSocket.Connect(IPAddress.Parse(Program.CTasks.HostName), Program.CTasks.Port);
            MessageTypeToBytes MessageInBytes = new MessageTypeToBytes() { TypeOfMessage = MessageType.Upload };
            Program.CTasks.ClientSocket.Send(MessageInBytes.MessageBytes, 512, SocketFlags.None);
            FileInfo FileNFO = new FileInfo(Open.FileName);
            byte[] NickPath = new byte[512];
            byte[] UNickPath = Encoding.ASCII.GetBytes(Program.Nickname + "$" + Open.FileName.Substring(Open.FileName.LastIndexOf('\\') + 1) + "$" + FileNFO.Length.ToString() + "$");
            byte[] TagCollectionBytes = Encoding.ASCII.GetBytes(TagCollection + "$");
            UNickPath.CopyTo(NickPath, 0);
            TagCollectionBytes.CopyTo(NickPath, UNickPath.Length);
            Program.CTasks.ClientSocket.Send(NickPath, 512, SocketFlags.None);
            Program.CTasks.ClientSocket.Receive(MessageInBytes.MessageBytes, 512, SocketFlags.None);
            if (MessageInBytes.TypeOfMessage == MessageType.OK)
            {
                long FileSize = FileNFO.Length;
                long CurrentFileSize = 0;
                long qtdRead = 0;
                byte[] FileBytes = new byte[BufferSizer];
                FileStr = new FileStream(Open.FileName, FileMode.Open, FileAccess.Read);
                BufferStr = new BufferedStream(FileStr);
                Counter.Start();
                while ((qtdRead = BufferStr.Read(FileBytes, 0, FileBytes.Length)) > 0)
                {
                    Program.CTasks.ClientSocket.Send(FileBytes, 0, FileBytes.Length, 0);
                    CurrentFileSize += qtdRead;
                    CurrentProgress = (int)((CurrentFileSize * 100) / FileSize);
                    UploadSpeed = ((double)CurrentFileSize / (Counter.Elapsed.TotalMilliseconds / 100));
                    UploadWork.ReportProgress(CurrentProgress);
                }
                FileStr.Close();
                Counter.Stop();
                Program.CTasks.ClientSocket.Receive(MessageInBytes.MessageBytes, 512, SocketFlags.None);
                Program.CTasks.ClientSocket.Close();
            }
        }
        catch
        {
            try
            {
                Counter.Stop();
                FileStr.Close();
                Program.CTasks.ClientSocket.Close();
            }
            catch { }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T22:47:59.520

您发送的数据过多......文件末尾`FileBytes`将不再完全充满，您应该只发送`qtdRead`字节。

代替

```
Program.CTasks.ClientSocket.Send(FileBytes, 0, FileBytes.Length, 0); 
```

和

```
Program.CTasks.ClientSocket.Send(FileBytes, 0, qtdRead, 0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T22:47:47.353

您使用的是缓冲区长度，而不是发送时读取的长度。

# r - 随机对行中的值求和并将它们分配给 R 中的 2 列

> ID：10956863
> 
> 赞同：1
> 
> 时间：2012-06-08T22:44:56.510
> 
> 标签：r, random, sum, dataframe

我有一个 8 列的 data.frame。一个是主题列表（每个主题一行），其他 7 行是 1 或 0 的分数。这是数据的样子：

```
>head(splitkscores)
  subject block3 block4 block5 block6 block7 block8 block9
1   40002      0      0      1      0      0      0      0
2   40002      0      0      1      0      0      1      1
3   40002      1      1      1      1      1      1      1
4   40002      1      1      0      0      0      1      0
5   40002      0      1      0      0      0      1      1
6   40002      0      1      1      0      1      1      1 
```

我想创建一个包含 3 列的 data.frame。主题一栏。在另外两列中，一列必须具有从我的 data.frame 的每一行（主题除外）中随机选择的 3 或 4 个数字的总和，另一列必须具有第一列中未选择的剩余值的总和随机抽样。

非常感谢您的帮助。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T22:55:14.500

我认为可以这样做：[根据其他响应更改了读取数据的方式，因为我犯了一个手动错误...]

```
 splitkscores <- read.table(text = "  subject block3 block4 block5 block6 block7 block8 block9
1   40002      0      0      1      0      0      0      0
2   40002      0      0      1      0      0      1      1
3   40002      1      1      1      1      1      1      1
4   40002      1      1      0      0      0      1      0
5   40002      0      1      0      0      0      1      1
6   40002      0      1      1      0      1      1      1", header = TRUE)

   df2 <- data.frame(subject = splitkscores$subject, sum3or4 = NA, leftover = NA)
   df2$sum3or4 <- apply(splitkscores[,2:ncol(splitkscores)], 1, function(x){
       sum(sample(x, sample(c(3,4),1), replace = FALSE))
     })
   df2$leftover <- rowSums(splitkscores[,2:ncol(splitkscores)]) - df2$sum3or4

   df2
     subject sum3or4 leftover
   1   40002       1        0
   2   40002       2        1
   3   40002       3        4
   4   40002       1        2
   5   40002       2        1
   6   40002       1        4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T23:34:17.930

这是一个整洁的解决方案，没有不必要的复杂性（假设输入被调用`df`）：

```
chosen=sort(sample(setdiff(colnames(df),"subject"),sample(c(3,4),1)))
notchosen=setdiff(colnames(df),c("subject",chosen))
out=data.frame(subject=df$subject,
               sum1=apply(df[,chosen],1,sum),sum2=apply(df[,notchosen],1,sum)) 
```

用简单的英语：从“主题”以外的列名中采样，选择样本大小为 3 或 4，然后调用这些列名`chosen`；定义`notchosen`为其他列（显然，再次排除“主题”）；然后返回一个数据框，其中包含主题列表、所选列的总和以及未选择列的总和。完毕。

# android - setAutoCommit() 什么都不做

> ID：10956868
> 
> 赞同：0
> 
> 时间：2012-06-08T22:46:10.730
> 
> 标签：android, ormlite

我按照[如何使用 Dao.setAutoCommit() 中的说明进行操作？](https://stackoverflow.com/questions/10542413/how-to-use-dao-setautocommit)尝试禁用自动提交，以便我可以批量运行提交。

每当我实际尝试运行代码时，我的程序都会跟踪我在 DAO 上调用了多少次 create 和类似操作，当它大于批量大小时，将调用 dao.commit()... 和然后我会收到此错误（SaveJsonParser 是带有代码的类的名称）：

06-08 17:18:50.866: E/AndroidRuntime(30993): java.lang.Runtime

```
Exception: An error occured while executing doInBackground()
06-08 17:18:50.866: E/AndroidRuntime(30993):    at android.os.AsyncTask$3.done(AsyncTask.java:200)
06-08 17:18:50.866: E/AndroidRuntime(30993):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
06-08 17:18:50.866: E/AndroidRuntime(30993):    at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
06-08 17:18:50.866: E/AndroidRuntime(30993):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
06-08 17:18:50.866: E/AndroidRuntime(30993):    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
06-08 17:18:50.866: E/AndroidRuntime(30993):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
06-08 17:18:50.866: E/AndroidRuntime(30993):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
06-08 17:18:50.866: E/AndroidRuntime(30993):    at java.lang.Thread.run(Thread.java:1019)
06-08 17:18:50.866: E/AndroidRuntime(30993): Caused by: java.lang.IllegalStateException: no transaction pending
06-08 17:18:50.866: E/AndroidRuntime(30993):    at android.database.sqlite.SQLiteDatabase.setTransactionSuccessful(SQLiteDatabase.java:673)
06-08 17:18:50.866: E/AndroidRuntime(30993):    at com.j256.ormlite.android.AndroidDatabaseConnection.commit(AndroidDatabaseConnection.java:77)
06-08 17:18:50.866: E/AndroidRuntime(30993):    at com.j256.ormlite.dao.BaseDaoImpl.commit(BaseDaoImpl.java:811)
06-08 17:18:50.866: E/AndroidRuntime(30993):    at com.visitsanantonio.save.data.SaveJsonParser.commitCategories(SaveJsonParser.java:412)
06-08 17:18:50.866: E/AndroidRuntime(30993):    at com.visitsanantonio.save.data.SaveJsonParser.parseDeal(SaveJsonParser.java:278)
06-08 17:18:50.866: E/AndroidRuntime(30993):    at com.visitsanantonio.save.data.SaveJsonParser.parseNewUpdatedDeals(SaveJsonParser.java:233)
06-08 17:18:50.866: E/AndroidRuntime(30993):    at com.visitsanantonio.save.data.SaveJsonParser$JsonParsingTask.doInBackground(SaveJsonParser.java:479)
06-08 17:18:50.866: E/AndroidRuntime(30993):    at com.visitsanantonio.save.data.SaveJsonParser$JsonParsingTask.doInBackground(SaveJsonParser.java:1)
06-08 17:18:50.866: E/AndroidRuntime(30993):    at android.os.AsyncTask$2.call(AsyncTask.java:185)
06-08 17:18:50.866: E/AndroidRuntime(30993):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
06-08 17:18:50.866: E/AndroidRuntime(30993):    ... 4 more 
```

经过一些实验，看起来我的代码实际上并没有禁用 autoCommit，正如在后台线程中运行的经过清理、截断的示例所示：

```
conn = dao.startThreadConnection();
Log.e(TAG, "dao auto commit: " + dao.isAutoCommit(conn));
dao.setAutoCommit(conn, false);
Log.e(TAG, "dao auto commit: " + dao.isAutoCommit(conn)); 
```

检查日志，我看到两个日志行都显示为“true”。我实际上并没有改变它是否自动提交。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T16:33:16.643

基于格雷的解决方案和方法...

```
accountDao.callBatchTasks(connectionSource,
  new Callable<Void>() {
    public Void call() throws SQLException {
        // insert a number of accounts at once
        for (Account account : accountsToInsert) {
           // update our account object
           accountDao.create(account);
        }
        return null;
    }
}); 
```

我写了一个静态方法作为通用版本：

```
public static <T, K> void batchCommit(final List<T> objectsToCommit, final Dao<T, K> dao) throws Exception {
    dao.callBatchTasks(new Callable<Void>() {

        @Override
        public Void call() throws Exception {
            for (T obj : objectsToCommit) {
                dao.create(obj);
            }
            return null;
        }
    });
} 
```

可以这样调用：

```
'DaoUtil'.batchCommit(accountsToinsert, accountDao); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T22:58:05.623

除了（可能）没有[阅读`setAutoCommit()`](http://ormlite.com/javadoc/ormlite-core/com/j256/ormlite/dao/Dao.html#setAutoCommit%28com.j256.ormlite.support.DatabaseConnection,%20boolean%29). 它指出：

> 这可能不受所有数据库类型的支持。

和。

> **警告：**除非您知道自己在做什么，否则您应该使用 dao.callBatchTasks(Callable) 而不是此方法。

不幸的是，不支持自动提交的数据库类型之一是 Android 下的 SQLite。在 Android 数据库连接中，代码是无操作的。我是故意这样做的，但我会回去验证[ORMLite](http://ormlite.com/)是正确的，并且 Android 不支持它。

如果您想以批处理模式运行许多命令，我建议您改用该[`dao.callBatchTasks(...)`方法](http://ormlite.com/docs/batch)。我将更新 javadocs 以更好地解释这一点并进行测试以确保当前的 ORMlite 代码在 Android 下不使用自动提交是正确的。就像是：

```
accountDao.callBatchTasks(connectionSource,
  new Callable<Void>() {
    public Void call() throws SQLException {
        // insert a number of accounts at once
        for (Account account : accountsToInsert) {
           // update our account object
           accountDao.create(account);
        }
        return null;
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T21:05:51.070

这是我最终想出的批量处理数据库请求的净化版本。这种方法不会崩溃，并且希望它实际上适用于批量处理数据库请求（而不是单独提交每个对象或尝试为单个提交累积非常大的事务）。

```
final static Integer BATCH_SIZE = 100;

int index = 0;

public int processInBatch(final Collection objectsToProcess)
            throws java.sql.SQLException {

    final int len = objectsToProcess.length();

    Callable<Void> callable = new Callable<Void>() {
        @Override
        public Void call() throws Exception {
            int endIndex = index + BATCH_SIZE;
            if (endIndex > len) {
                endIndex = len;
            }
            for (; index < endIndex; index++) {
                MyObject o = objectsToProcess.get(index);
                try {
                    dao.createOrUpdate(o);
                } catch (java.sql.SQLException se) {
                    Log.e(TAG, "error while attempting to add or update myobject with id of " + o.getId(), se);
                }
            }
        return null;
        }
    };

    ConnectionSource source = databaseHelper.getConnectionSource();
    while (index < len) {
        TransactionManager.callInTransaction(source, callable);
    }
} 
```

# r - 在R中使用apply时如何打印当前行的名称？

> ID：10956873
> 
> 赞同：5
> 
> 时间：2012-06-08T22:46:36.867
> 
> 标签：r, statistics

例如，我有一个矩阵`k`

```
> k
  d e
a 1 3
b 2 4 
```

我想在 k 上应用一个函数

```
> apply(k,MARGIN=1,function(p) {p+1})
a b
d 2 3
e 4 5 
```

但是，我还想打印该`rowname`行的 ，`apply`以便我可以知道该函数当时应用于哪一行。

它可能看起来像这样：

```
apply(k,MARGIN=1,function(p) {print(rowname(p)); p+1}) 
```

但我真的不知道如何在 R 中做到这一点。有人知道吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-09T06:50:45.830

这是我认为您要问的一个巧妙的解决方案。（为了清楚起见，我将输入矩阵称为输入矩阵- 在此示例中，有 2 列和 10 行，并且行被命名为 abc1 到 abc10。`mat`）`k``mat`

在下面的代码中，结果`out1`是您想要计算的东西（apply 命令的结果）。结果与它`out2`相同，`out1`只是它打印出它正在处理的行名（我每行设置了 0.3 秒的延迟，所以你可以看到它确实这样做了 - 当你希望代码运行完整时将其删除速度明显！）

我想出的技巧是将行号（1 到 n）cbind 到`mat`（以创建一个带有一个附加列的矩阵）的左侧，然后使用它来引用`mat`. 注意`x = y[-1]`表示函数内的实际计算（这里加 1）忽略行号的第一列的行，这意味着它与为`out1`. 无论您想对行执行什么类型的计算，都可以通过这种方式完成 - 只需假装`y`从未存在，然后使用`x`. 希望这可以帮助。

```
set.seed(1234)
mat = as.matrix(data.frame(x = rpois(10,4), y = rpois(10,4)))
rownames(mat) = paste("abc", 1:nrow(mat), sep="")
out1 = apply(mat,1,function(x) {x+1})
out2 = apply(cbind(seq_len(nrow(mat)),mat),1,
             function(y) {
                           x = y[-1]
                           cat("Doing row:",rownames(mat)[y[1]],"\n")
                           Sys.sleep(0.3)
                           x+1
                          }
            )

identical(out1,out2) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-09T00:15:01.107

您可以在 apply 调用之外使用变量来跟踪行索引并将行名称作为额外参数传递给您的函数：

```
idx <- 1
apply(k, 1, function(p, rn) {print(rn[idx]); idx <<- idx + 1; p + 1}, rownames(k)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T23:02:41.950

这应该有效。该`cat()`函数是您在评估函数期间打印结果时要使用的函数。`paste()`，相反，只返回一个字符向量，但不将其发送到命令窗口。

下面的解决方案使用一个作为闭包创建的计数器，允许它“记住”该函数之前运行了多少次。注意全局 assign 的使用`<<-`。如果您真的想了解这里发生了什么，我建议您阅读此 wiki [https://github.com/hadley/devtools/wiki/](https://github.com/hadley/devtools/wiki/)

请注意，可能有更简单的方法可以做到这一点；我的解决方案假定无法使用 apply 函数中的典型方式访问当前行的行号或行名。如前所述，这在循环中是没有问题的。

```
k <- matrix(c(1,2,3,4),ncol=2)
rownames(k) <- c("a","b")
colnames(k) <- c("d","e")

make.counter <- function(x){
    i <- 0
    function(){
        i <<- i+1
        i   
    }
}

counter1 <- make.counter()

apply(k,MARGIN=1,function(p){
    current.row <- rownames(k)[counter1()]
    cat(current.row,"\n")
    return(p+1)
}) 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-06-08T22:55:59.287

据我所知，你不能用 来做到这一点`apply`，但你可以遍历`rownames`你的数据框。蹩脚的例子：

```
lapply(rownames(mtcars), function(x) sprintf('The mpg of %s is %s.', x, mtcars[x, 1])) 
```

# ruby-on-rails - 仅将验证模块应用于某些控制器中的模型

> ID：10956875
> 
> 赞同：0
> 
> 时间：2012-06-08T22:46:54.967
> 
> 标签：ruby-on-rails, module, controller, extend, mixins

我有一个可以由两种不同类型的用户编辑的模型。第一个具有登录名并具有特殊权限（我们称他们为“用户”）。第二个只是一些没有登录权限的随机用户（我们称他们为“访客”）。

来宾仅通过一个控制器真正与模型交互，我们希望某些验证仅适用于这种情况。我们要应用的验证存在于一个模块中。

我尝试在控制器操作中做这样的事情，但它似乎没有用：

```
@object = Model.find(params[:object_id])
@object.extend SpecialValidations 
```

然后我们将检查对象的有效性（可能直接或在更新属性时），然后显示验证产生的任何错误。

有一个更好的方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T22:56:54.973

一种替代方法是在您的模型中包含以下内容：

```
attr_accessor :guest

def run_special_validations?
    guest
end

validate :special_validation1, if: run_special_validations?
validate :special_validation2, if: run_special_validations? 
```

然后，通过设置控制器`@object.guest = true`，您将告诉对象运行条件验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T01:06:05.937

您可以在没有任何条件的情况下保留验证，并在`user`控制器中跳过它（`update_attribute`例如，通过使用方法）。

# entity-framework-4 - 在实体框架中仅使用外键保存引用属性

> ID：10956880
> 
> 赞同：1
> 
> 时间：2012-06-08T22:47:34.163
> 
> 标签：entity-framework-4, ef-code-first

我确定这个问题之前已经被问过，所以我提前道歉，但我不确定在我的搜索中包含正确的关键字......

当对象的一个​​属性是断开连接的环境（如网站）中其他属性的集合时，我无法理解更新（甚至插入）对象的正确模式。我的问题与 Web 应用程序仅返回 id 集合而不是完整对象的想法有关。我认为解释这一点的最好方法是使用代码片段。

给定以下对象

```
Public Class User
  Public Property UserId As Integer
  Public Property Username As String
  Public Property Roles As ICollection(Of Role)
End Class

Public Class Role
  Public Property RoleId As Integer
  Public Property RoleName As String
  Public Property Users As ICollection(OF User)
End Class

Public Class EFDbContext
  Inherits Entity.DbContext

  Public Property Users As Entity.DbSet(Of User)
  Public Property Roles As Entity.DbSet(Of Role)
End Class 
```

使用 3 个表创建一个数据库 - 用户、角色和角色用户。

我知道我可以轻松地做到以下几点

```
Dim db = New EFDbContext()

Dim r1 = New Role() With { .RoleName = "User" }
Dim r2 = New Role() With { .RoleName = "Admin" }

db.Roles.Add(r1)
db.Roles.Add(r2)

Dim u1 = New User() With { .UserName = "test1", .Roles = New List(Of Role) }
u1.Roles.Add(r1)

db.Users.Add(u1)

db.SaveChanges() 
```

它会将两个新角色保存到数据库中（分别为它们的 RoleId 值 1 和 2）、一个新用户（给它一个 UserId 值 1）和一个具有 RoleId 1 和 UserId 1 的新 Role-User 条目。

然而，在处理像网站这样的断开连接的场景时，大多数人都会有一个视图模型来表示来自用户的输入，然后将其映射回实体。此外，对于表示角色的值，返回的数据很可能只包含表示角色的唯一键。例如，

```
Public Class UpdatedUserViewModel
  Public Property UserId As Integer
  Public Property Username As String
  Public Property RoleIds As ICollection(Of Integer)
End Class

...
...

Dim userEntity = db.Users.Find(user.Values.UserId)
AutoMapper.Mapper.Map(userValues, userEntity) 
```

因此，虽然 userEntity.Roles 集合可能包含单个项目，但映射器可能只是添加了类似的条目

```
ForMember(Function(u) u.Roles, Sub(m) m.MapFrom(Function(su) su.RoleIds.Select(Function(r) New Role() With {.RoleId = r}))) 
```

现在我们遇到了问题，当`SaveChanges()`调用该方法时，EF 会抛出一个验证错误，因为 .RoleName 属性是 Nothing。

这种情况如何处理？我们是否应该手动遍历角色并从数据库中获取每个角色？我们可以不使用绘图工具吗？我是否为“缺失”属性提供虚假值，然后遍历并将它们标记为未更改？

我知道这很长，但我认为演练会有所帮助......

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T23:10:17.530

你可以使用这个算法

*   从根实体开始。
    *   对于每个根实体，例如 A 类型的 a，设置 a 的属性，除了导航属性（至少所有必需的属性（不可为空））
    *   将 As 添加到上下文中。
*   接下来准备子实体（必须恰好有 1 个 A 的实体），例如 B 类型的 b。
    *   设置 b 的属性（除了导航，至少所有不可为空）。
    *   对于每个 b，将 b 添加到其 a (egaChildren.Add(b))。
*   继续上面的子实体

    **...**

*   保存并应用更改

如果您有一个实体具有不可为空的导航，该实体已存在于 DB 中并且尚未通过上下文访问，您可以通过 ID 设置关系（假设您已将 FK 映射到模型中的属性）而不是设置实体本身。

如果您的 ID 不是商店生成的，请确保您也设置了它们。如果是，请确保将它们定义为在 EDMX 中生成的存储。

如果数据库中有 FK，请确保 EDMX 知道它们，以便插入以正确的顺序发生（或者如果使用 Oracle，如果需要，您可以尝试使用延迟约束）。

# css - 重叠 CSS 中的

> ID：10956888
> 
> 赞同：0
> 
> 时间：2012-06-08T22:49:23.757
> 
> 标签：css

所以，我已经看到了很多关于这个的问题，但我想要一个个人的例子。我对编程很陌生，所以我可能有点愚蠢......

无论如何，我有两个`<div>`s，一个带有 id `bg`，另一个带有 class `player`。

这是它的样子：

![它看起来像什么](../Images/746cd5e830f616dc361293cd5a2b6904.png)

红框为播放器，大图为bg。

我需要玩家从背景中心开始。

背景为 640 像素 X 640 像素。

这是我目前在我的 CSS 文件中的代码：

```
#bg {
    width: 640px;
    height: 640px;
    top: 0;
    left: 0;
}

.player {
    position:relative;
    background-color:#FF0000;
    width: 32px;
    height: 32px;
    top: 0px;
    left: 0px;    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T22:52:48.247

尝试将样式表更改为：

```
#bg {
    width: 640px;
    height: 640px;
    top: 0;
    left: 0;
    position: relative;
}

.player {
    position: absolute;
    background-color: #FF0000;
    width: 32px;
    height: 32px;
    top: 320px;
    left: 320px;    
    z-index: 1;
} 
```

您的 HTML 应如下所示：

```
<div id="bg">
    <!-- your bd code here -->
    <div class="player"></div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T22:58:23.720

`position: relative`是相对于对象正常放置的位置。在您的示例中，它通常位于第一个 div 下方，因此它将保留在此处。（换句话说`position: relative`，与定位一起使用`0`不会将对象移动到任何地方。）

您可以添加`top: -320px; left: 320px`. 这会将它定位在第一个 div 的空间中。但是 maxksbd19 的答案可能是您最终目标的更好解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T03:44:05.123

我尝试避免绝对定位，因为它不适应容器大小，并且对容器的更改需要您通过 css 并更改所有绝对值。

我会做以下事情

CSS：

```
#bg {
            overflow: auto; /* stops the .player from from moving #bg down */
            width: 640px;
            height: 640px;
            background-color: blue;
            text-align: center; /* center child div in IE */
        }

        .player {
            background-color: White;
            width: 32px;
            height: 32px;
            margin: 0 auto; /* center div in parent for non IE browsers */
            margin-top: 304px; /* 50% from top minus div size */
        } 
```

HTML：

```
<div id="bg">
    <div class="player"></div>
</div> 
```

现在您只需要跟踪子容器的上边距。

# jquery - jQuery 动画：移动对象

> ID：10956889
> 
> 赞同：1
> 
> 时间：2012-06-08T22:49:44.153
> 
> 标签：jquery, animation

此 jquery 代码将对象从上到下移动：

```
case
'slideToTop':
  $a.data('t',$a.css('top'));
  $a.stop().animate({'top': $a.height()+20 + 'px'},300,function(){
  $a.css('top',0-$a.height()-20 + 'px');
  $curr.removeClass('sh').hide();
  $next.addClass('sh').show();
  $a.animate({'top': $a.data('t')},300); }); 
break; 
```

我将如何改变它以将对象从底部移动到顶部？

我尝试修改这些行：

```
$a.stop().animate({'top': $a.height()+20 + 'px'},300,function()
$a.css('top',0-$a.height()-20 + 'px'); 
```

对此：

```
$a.stop().animate({'top': 0-$a.height()-20 + 'px'},300,function(){
$a.css('top',$a.height()+20 + 'px'); 
```

没用。有人知道吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T23:07:40.120

摆脱“px”

```
$a.stop().animate({'top': $a.height()+20},300,function(){$a.css('top',0-$a.height()-20 + 'px'); 
```

# c - 通过 BSD 套接字在本地网络上获取我的计算机的 IP 地址？

> ID：10956890
> 
> 赞同：1
> 
> 时间：2012-06-08T22:50:10.710
> 
> 标签：c, sockets

由于 BSD 套接字中没有获取 IP 地址的功能，因此我执行了客户端/服务器程序来建立连接。每个线程一个：服务器和客户端。

从带有 localhost 的“inet_ntoa”返回的 IP 地址是 127.0.0.1。
但是网络说我的电脑是这个 10.0.0.7，这个地址是有效的。

如何获得 10.0.0.7 地址？谢谢

这是我的代码：

```
DWORD WINAPI CIpAddressDlg::Thread_TcpServer(LPVOID iValue)
{
      CIpAddressDlg *pp = (CIpAddressDlg*)iValue;
      CString c;
      char buffer[128]; 
      int sinlen;
      struct sockaddr_in sin; 
      int s, h; 

      sin.sin_family = AF_INET; 
      sin.sin_addr.s_addr = INADDR_ANY;
      sin.sin_port = htons(4000);   // Port 

      s = socket(AF_INET, SOCK_STREAM,0);
      bind(s,(struct sockaddr*)&sin,sizeof(sin));
      listen(s,1);
      sinlen = sizeof(sin);      
      h=accept(s,(struct sockaddr*)&sin,&sinlen );

      //get IP address
      int len = sizeof sin;
      if(::getsockname(h,(struct sockaddr*)&sin,&len) == -1)
            pp->MessageBox("Error local host ip");

      c.Format("%d\nlocal addr %s:%u\n  errno: %d", sin.sin_addr, inet_ntoa(sin.sin_addr),ntohs(sin.sin_port), errno);
      pp->MessageBox(c);

      //verification of send
      recv(h,buffer,sizeof(buffer),0);
      pp->MessageBox(buffer);
      send(h,buffer,strlen(buffer),0);

      ::closesocket(s);
    return 0;
} 
```

* * *

```
DWORD WINAPI CIpAddressDlg::Thread_TcpClient(LPVOID iValue)
{
    CIpAddressDlg *pp = (CIpAddressDlg*)iValue;
    CString c;
      char buffer[128]= "Hello world"; 
      struct sockaddr_in sin; 
      struct hostent *host; 
      int s; 

      host = gethostbyname("localhost");  

      memcpy(&(sin.sin_addr), host->h_addr,host->h_length); 
      sin.sin_family = host->h_addrtype; 
      sin.sin_port = htons(4000);

      s = socket(AF_INET, SOCK_STREAM,0);                       
      connect(s,  (struct sockaddr*)&sin,sizeof(sin));     

      send(s,buffer,strlen(buffer)+1,0); 
      recv(s,buffer,sizeof(buffer),0);

      ::closesocket(s);     

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T23:51:41.713

尽管该概念具有直观的吸引力，并且就此而言，人们普遍相信该概念，但计算机没有 IP 地址。

*接口*具有 IP 地址。

您可以获得接口列表并选择第一个。不幸的是，获取大多数语言的接口列表取决于系统。

通常的方法是只使用`0.0.0.0`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T23:45:45.720

有更简单的方法可以获取运行程序的机器的“私有”/“LAN”IP。不过，您的解决方案非常*巧妙*。

我认为最直接的可能是[`GetAdaptersAddresses`](http://msdn.microsoft.com/en-us/library/aa365915.aspx)。MSDN 页面上的示例代码看起来相当详尽。

但如果这需要更新的编译器版本，请考虑[`GetAdaptersInfo`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365917%28v=vs.85%29.aspx). 请参阅此处的[“方法三”和此处](http://www.codeguru.com/cpp/i-n/network/networkinformation/article.php/c5451/Three-ways-to-get-your-MAC-address.htm)的[一些示例代码](https://stackoverflow.com/questions/1070351/getadaptersinfo-and-getadaptersaddressess-bufferlength-param)。

此外，您似乎还可以通过 WinSock API 访问 IP 地址。请参阅[此示例](http://suite101.com/article/socket-programming-gethostbyname-a19557)。

最后，作为旁注，BSD 套接字中有一个函数可以完全做到这一点（`getifaddrs()`），它只是没有移植到 Windows。

# c# - C#向上转换泛型类型到接口

> ID：10956891
> 
> 赞同：2
> 
> 时间：2012-06-08T22:50:17.493
> 
> 标签：c#, generics, interface, polymorphism

这类似于我最近发布的另一个主题，但也许这可能更简单明了：

我想完成以下（或非常相似的事情）......

```
IManageableEntryDao<IManageableEntry> dao = new CompanyNameDao(); 
```

...具有以下课程：

```
public interface IManageableEntry {
    string Name { get; set; }
}

public class CompanyName : IManageableEntry {
    public string Name { get; set; }
}

public interface IManageableEntryDao<T> where T : IManageableEntry {
}

public class CompanyNameDao : IManageableEntryDao<CompanyName> {
} 
```

如果我尝试进行 cast `as IManageableEntryDao<IManageableEntry>`，我会得到一个空值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T22:54:08.067

我相信你需要[协方差](http://msdn.microsoft.com/en-us/library/ee207183.aspx)才能工作。此功能仅在 C# 4.0 中可用。你需要做什么：

```
public interface IManageableEntryDao<out T> where T : IManageableEntry { } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T22:54:43.877

请参阅[泛型接口中的差异](http://msdn.microsoft.com/en-us/library/dd233059)。将接口更改为`IManageableEntryDao<out T>`它应该可以工作（除非接口以使其无效的方式使用它）。

# jquery - 脚本不等待ajax返回？

> ID：10956892
> 
> 赞同：1
> 
> 时间：2012-06-08T22:50:30.043
> 
> 标签：jquery, ajax

所以我在 jquery 中有这个长函数，其中包括 jquery ajax 调用、一些 css 更改和重新定位 div。这是我的代码：

```
$('.editable').click(function(e) {
    //assign the attributes for the ajax call                         
    $('#employeelist span').html("job: " + $(this).attr("editjob") + "<br />date: " + $(this).attr("editdate").substr(5));
    $('#employeelist').attr("editjob", $(this).attr("editjob"));
    $('#employeelist').attr("editdate", $(this).attr("editdate"));  
    //update the employee list with AJAX
    $.get("getDaySchedule.php", 
        {'job': $('#employeelist').attr("editjob"), 'date': $('#employeelist').attr("editdate")},
        function(responsetext){$('#employeelist ul').html(responsetext);},
        "html"
    );
    //show the employee list
    $('#employeelist').show()
    .css('top',$(this).offset().top+25)
    .css('left',($(this).offset().left+130))
    .css('visibility', "visible")
    .removeClass()
    .addClass($(this).attr('class'));
    //adjust the employee list if it goes outside the viewable area:
    if ($('#employeelist').height() + $('#employeelist').offset().top > $(window).height()) {
        newtop = ($('#employeelist').height() + $('#employeelist').offset().top) - $(window).height();
        newtop = $('#employeelist').offset().top - newtop;
        $('#employeelist').css('top',newtop);
    };
    if ($('#employeelist').width() + $('#employeelist').offset().left > $(window).width()) {
        newleft = $('#employeelist').offset().left - 260;
        $('#employeelist').css('left',newleft);
    };
}); 
```

我遇到的问题是，在完成 ajax 调用之前，它似乎正在运行最后一段代码（如果它在可视区域之外，它将重新定位 div）。所以基本上 div 的高度很短，因为它还没有得到响应文本。这会导致 div 太高并超出可视区域，因为它没有重新定位到正确的高度。希望这是有道理的。我在代码中遗漏了什么吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T22:59:52.370

默认情况下，Ajax 是异步的，这意味着一旦调用它，下面的代码就会运行，而无需等待 ajax 调用返回；因此，当您的以下代码运行时，它并不完整。您需要在 ajax 成功内移动您的代码。

```
$('.editable').click(function(e) {
    var $editable = $(this);
    var $employeeList = $('#employeelist');

    //assign the attributes for the ajax call                         
    $('#employeelist span').html("job: " + $editable.attr("editjob") + "<br />date: " + $editable.attr("editdate").substr(5));
    $employeeList.attr("editjob", $editable.attr("editjob"));
    $employeeList.attr("editdate", $editable.attr("editdate"));  

    //update the employee list with AJAX
    $.get("getDaySchedule.php", 
        {'job': $employeeList.attr("editjob"), 'date': $employeeList.attr("editdate")},
        function(responsetext){
            $('#employeelist ul').html(responsetext);

            //show the employee list
            $employeeList.show()
                .css('top', $editable.offset().top+25)
                .css('left', ($editable.offset().left+130))
                .css('visibility', "visible")
                .removeClass()
                .addClass($editable.attr('class'));

            //adjust the employee list if it goes outside the viewable area:
            if ($employeeList.height() + $employeeList.offset().top > $(window).height()) {
                newtop = ($employeeList.height() + $employeeList.offset().top) - $(window).height();
                newtop = $employeeList.offset().top - newtop;
                $employeeList.css('top',newtop);
            }

            if ($employeeList.width() + $employeeList.offset().left > $(window).width()) {
                newleft = $employeeList.offset().left - 260;
                $employeeList.css('left',newleft);
            }
        }
    );    
}); 
```

**编辑**：

我已更新代码以解决您遇到的问题。注意我还缓存了最常用的 jquery 选择器。多次缓存选择器以提高代码性能总是一个好主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T22:55:14.323

您需要在 AJAX 回调函数中移动重新定位代码，因此您有：

```
 function(responsetext){$('#employeelist ul').html(responsetext);} 
```

在该函数中，您需要进行所有重新定位。

# java - Can an Error be handled in the same way as an Exception

> ID：10956896
> 
> 赞同：1
> 
> 时间：2012-06-08T22:52:39.597
> 
> 标签：java, exception

I want to know whether an error can be handled or not in Java in the similar way to exceptions. I have seen errors that can't be handled such as AssertionError and I've also tried throwing an error inside a program and tried handling using catch, It worked and also the next part of code did execute(This is contradictory to the part where the program supposed to be exited whenever an error is encountered). Is it like few errors can be handled and few others cannot be. I'm confused with this, can anyone clear this doubt of mine and state the difference between errors and exceptions?

```
package package1;

public class Class1 
{   
public static void main(String[] args)
{
    Class1 cl1=new Class1();
    int x=2;
    String s = null;
    //assert(x<0):"x is not less than zero";
    try
    {
        cl1.workonExceptions();
    }
    catch (Error e)     
    {
        e.printStackTrace();
    }
    System.out.println("Not Terminated yet");
}
public void workonExceptions() throws Error 
{                                               
    try                                         
    {
        throw new Exception("Exception");
    }
    catch (Exception e) 
    {
        throw new Error("Exception Again");         }
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T22:57:36.070

Some background on [`Error`](http://docs.oracle.com/javase/7/docs/api/java/lang/Error.html): It's not intended to be catchable; it only comes up when *something goes* ***really*** *wrong*. An exception is *meant* to be caught and handled, since it's something that may come up on occasion, but shouldn't interrupt or interfere severely with the running of your program, such as dividing by zero.

As for it working inside of a `try...catch` statement, the reason is that this is a property of the [`Throwable`](http://docs.oracle.com/javase/7/docs/api/java/lang/Throwable.html) class.

> Only objects that are instances of this class (or one of its subclasses) are thrown by the Java Virtual Machine or can be thrown by the Java throw statement. Similarly, only this class or one of its subclasses can be the argument type in a catch clause.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T23:02:41.593

Exceptions, if thrown from a method, are required by the compiler to be caught by callers of that method.

Errors, even if thrown from a method, are not required by the compiler to be caught by callers of the method.

Both Exceptions and Errors CAN be caught by callers, and behave the same way when they are. If you have code that illustrates "continues to execute", I'd be interested in seeing it. If you throw either of these (both derived from Throwable), execution of the method from which they are thrown ceases at that point (absent finally clauses, an (ahem) exception to the rule I'd rather not try to cover in this post).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T23:05:27.530

All errors in Java are catchable, including `AssertionError`, although it is not recommended to catch them, and it is not guaranteed that the JVM is in consistent enough state to continue execution after an `Error`. So what you see is completely normal.

Differently from C#, even `ThreadDeath` is handled pretty much the same as any other `Throwable` (that is, it can be caught and consumed).

The main difference between errors and exceptions is that methods can throw any errors regardless of their exception specifiers.

# file - 文件仍在使用中 错误 32 如何释放它？

> ID：10956900
> 
> 赞同：2
> 
> 时间：2012-06-08T22:53:07.700
> 
> 标签：file, delphi, delphi-2009, file-in-use

我正在通过以下代码上传文件。

成功上传后，我尝试删除文件，但收到 32 - File in use 错误。

谁能告诉我如何解决这个文件使用中的错误？以下代码正在上传文件，但完成后不释放它..

```
var
  HTTP: TidHTTP;
  SSLIOHandler: TIdSSLIOHandlerSocketOpenSSL;
  PostData: TIdMultiPartFormDataStream;
  ResponseStream: TStringStream;
  Delete : Boolean;

begin
  ResponseStream := TStringStream.Create('');
  HTTP := TidHTTP.Create(nil);
  SSLIOHandler := TIdSSLIOHandlerSocketOpenSSL.Create(nil);

  try
    SSLIOHandler.SSLOptions.Method := sslvSSLv3;
    HTTP.ReadTimeout := 30000; //30 seconds
    HTTP.ConnectTimeout := 30000; //30 seconds
    HTTP.IOHandler := SSLIOHandler;
    HTTP.HTTPOptions := [hoKeepOrigProtocol];
    HTTP.ProtocolVersion := pv1_1;
    PostData := TIdMultiPartFormDataStream.Create;

    PostData.AddFormField('username', 'demo');
    PostData.AddFormField('password', 'demo');
    PostData.AddFormField('action', 'upload');
    PostData.AddFormField('accountno', 'demo');

  PostData.AddFile('uploadedfile', FileName, GetMIMETypeFromFile(FileName));

  HTTP.Request.ContentType := PostData.RequestContentType;
  HTTP.Post('http://uploadsite.com/ex/exampleAPI.asmx/Process', PostData, ResponseStream);

  if AnsiContainsStr(ResponseStream.DataString, 'Done') then
    Delete := True;

finally
  SSLIOHandler.Free;
  HTTP.Free;
  ResponseStream.Free;
end;

if Delete then
  if DeleteFile(BFlashFileName) then
    ShowMessage('Deleted')
  else ShowMessage(BFlashFileName+' not deleted, error = '+
               IntToStr(GetLastError)); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T23:35:06.683

在尝试删除文件之前调用实例的`Clear`方法。`TIdMultiPartFormDataStream`如果您不再需要它，释放它也将等同于（即`PostData.Free`）。目前，您似乎正在泄漏`PostData`变量。

在`TIdMultiPartFormDataStream`清除其 Fields 集合时，该`AddFile`方法创建的文件流将在关闭文件句柄时被销毁。

# namespaces - VS 2012 RC 0 与 .NET 4.5 - 无法找到命名空间

> ID：10956901
> 
> 赞同：0
> 
> 时间：2012-06-08T22:53:33.357
> 
> 标签：namespaces, .net-4.5, visual-studio-2012

这对你们来说可能是一个简单的问题......我在我的解决方案中添加了一个新项目，我正在尝试添加 System.Web.Security 命名空间的引用，但我找不到它？我去添加一个参考并查看框架和扩展列表，它根本不存在。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-08T23:27:35.557

那是愚蠢的。System 是参考，它允许我访问 System.Web，但我必须添加 System.Web 才能获得 System.Web.Security。有时我在想....

# iphone - 更改视图时黑屏

> ID：10956902
> 
> 赞同：1
> 
> 时间：2012-06-08T22:53:37.630
> 
> 标签：iphone, ios, xcode

我在 Xcode 中创建了一个游戏，现在我决定给它添加一个菜单，菜单是第一个加载视图，所以我改变了

```
self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController" bundle:nil] autorelease]; 
```

到：

```
self.viewController = [[[MenuViewController alloc] initWithNibName:@"MenuViewController" bundle:nil] autorelease]; 
```

现在我的游戏所在的视图是： ViewController.m 并从我去那里的菜单中：

```
-(IBAction)gogame:(id)sender {
UIViewController *Game = [[UIViewController alloc] initWithNibName:nil bundle:nil];
[self presentModalViewController:Game animated:YES];} 
```

因为我需要给我在 .h 和 .m 中更改的 ViewController.ma 名称：

@interface ViewController 到 .h 中的 @interface GameViewController

和@implementation ViewController 到.m 中的@implementation GameViewController

现在我让菜单“gogame”中的按钮运行它，当我单击该按钮时，它从菜单进入黑屏，它不会崩溃或任何东西它只显示状态栏和黑屏。xCode 给我的唯一问题是应用程序委托：从“MenuViewController *”分配给“GameViewController *”的指针类型不兼容。

我不知道为什么这不起作用我希望有人可以解释我并告诉我如何解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T23:04:01.107

单独的 UIViewController 没有什么用，它提供了添加行为，所以在你的方法中：

这是此方法的版本：

```
-(IBAction)gogame:(id)sender {
    UIViewController *Game = [[UIViewController alloc] initWithNibName:nil bundle:nil];
    [self presentModalViewController:Game animated:YES];
} 
```

它正在做你告诉它的事情，呈现一个框架提供的 UIViewController。您没有添加任何额外的行为或自定义视图。

我无法完全解释您当前的代码设置，但听起来您的新类 GameViewController 是您想要显示的，因此将其更改为：

```
-(IBAction)gogame:(id)sender {
    GameViewController *Game = [[[GameViewController alloc] initWithNibName:@"GameViewController" bundle:nil] autorelease];
    [self presentModalViewController:Game animated:YES];
} 
```

根据您对类名的重命名/重构，我不确定控制器的 xib 文件的名称是什么。它是原始的“ViewController”还是您也将其更新为“GameViewController”（就像您应该的那样）？

关于警告，您在哪里创建和分配 GameViewController？

# python - 如何在python中使用matplotlib制作空心方形标记

> ID：10956903
> 
> 赞同：28
> 
> 时间：2012-06-08T22:53:40.520
> 
> 标签：python, matplotlib

下图中的黑线是使用以下 matplotlib python 命令绘制的

```
pylab.semilogy(xaxis, pq_averages, 'ks-',color='black', label='DCTCP-PQ47.5') 
```

所以'ks-'部分表示带有方形黑色标记的实线。所以它有用于绘制点的实心方块。这些方块可以做成空心的吗？

![在此处输入图像描述](../Images/7fbc94e56f329c2916ecdc0bc2d87f20.png)

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-06-08T23:20:00.223

尝试`markerfacecolor`像这样添加：

```
pylab.semilogy(xaxis, pq_averages, 'ks-', markerfacecolor='none', label='DCTCP-PQ47.5') 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-11-17T19:39:54.680

设置`markerfacecolor='white'`实际上并没有使它们空心，而是使它们变白。为了使它们空心，您需要设置`markerfacecolor='none'`. 此外，您需要设置`markeredgecolor`为您想要的颜色。所以：

```
pylab.semilogy(xaxis, pq_averages, 'ks-',color='black',
       label='DCTCP-PQ47.5', markerfacecolor='none', markeredgecolor='black') 
```

将为您完成工作。

# vb.net - 一种在 vb.net 中估计测试框大小的内存占用较少的方法

> ID：10956907
> 
> 赞同：0
> 
> 时间：2012-06-08T22:54:15.653
> 
> 标签：vb.net

我目前正在使用以下代码来估计文本框的大小：

```
 Dim i As Integer, j As Integer, pGr As Graphics, sz As SizeF
    For i = 1 To pNumRows
        For j = 1 To pWidth
            sb.Append("W")
        Next
        If pNumRows > 1 Then
            sb.Append(vbCrLf)
        End If
    Next
    pGr = txtTextBox.CreateGraphics
    sz = pGr.MeasureString(sb.ToString, pTextFont, New SizeF(10000, 10000))
    pGr.Dispose()
    txtTextBox.SetSize(CInt(sz.Width), CInt(sz.Height) + 80)
    txtTextBox.Size = New Size(CInt(sz.Width) + 20, CInt(sz.Height) + 100) 
```

我想知道是否有任何方法可以删除 for 循环并完全取消 pGr (textbox.CreateGraphics) 方法并仍然正确估计文本框的大小。任何帮助将不胜感激。

如果你想知道为什么我（实际上是编写代码的人）循环遍历所有的“W”，那是因为（我认为）“W”在整个字符集中具有最大的宽度和高度，所以这个人（谁编写了代码）试图猜测所需的最大面积。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T04:23:01.923

这消除了您的循环（并用它们替换框架中的循环，希望更快）。不确定性能。

```
Dim i As Integer, j As Integer, pGr As Graphics, sz As SizeF
sb.Append(new String("W", pWidth))

If pNumRows > 1 Then
     sb.Append(new String(vbLf, pWidth)) ' may want to use vbCR instead
End If

pGr = txtTextBox.CreateGraphics
sz = pGr.MeasureString(sb.ToString, pTextFont, New SizeF(10000, 10000))
pGr.Dispose()
txtTextBox.SetSize(CInt(sz.Width), CInt(sz.Height) + 80)
txtTextBox.Size = New Size(CInt(sz.Width) + 20, CInt(sz.Height) + 100) 
```

# java - Java - Eclipse 项目设置某处导致 FileNotFound 错误

> ID：10956914
> 
> 赞同：2
> 
> 时间：2012-06-08T22:55:38.367
> 
> 标签：java, eclipse, resources, intellij-idea, filenotfoundexception

我使用 IntelliJ 在一台计算机上启动了一个项目，然后将该项目复制到另一台计算机上，并使用 Eclipse 进行设置。我在项目的 src 目录中读取了一个名为“map.txt”的文件，一切正常。

但是，当我在 Eclipse 中创建了一个新项目并做了几乎完全相同的事情时，它就不起作用了。我得到文件未找到异常。我使用 Eclipse 的 IDE 创建了该文件。我尝试过刷新和清理项目，但没有任何效果。

我有一种感觉 eclipse 对当前目录的位置有一些奇怪的项目设置。除非这是因为第一个项目是 JApplet 而第二个项目是 JFrame？

你们知道我该如何解决这个问题吗？不，我不接受绝对路径目录作为答案。

# google-chrome-extension - Firefox 和 Chrome 的快速更新周期如何影响附加组件和扩展的开发（如果有的话）？

> ID：10956915
> 
> 赞同：1
> 
> 时间：2012-06-08T22:55:54.267
> 
> 标签：google-chrome-extension, firefox-addon, browser-addons

开发人员是否明智地在每次发布时检查其扩展功能是否正常，或者是否有更有效的方法？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T06:16:18.730

我不太确定 Chrome，但 Mozilla 有一个自动更新检查系统，可以检查你的插件，看看它是否与新的 Firefox 版本兼容。您会收到一封电子邮件，告诉您您的插件是否通过了测试。更多信息在这里：[http ://blog.mozilla.org/addons/2011/04/19/add-on-compatibility-rapid-releases/](http://blog.mozilla.org/addons/2011/04/19/add-on-compatibility-rapid-releases/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T06:22:37.367

Chrome 具有可用于扩展的特定 API，而 Firefox 可让您访问几乎所有浏览器内部。这意味着您很可能会使用 Mozilla 从未想过您会使用的 API 编写 Firefox 扩展，因此当 Firefox 更新时，您的扩展会中断。尽管正如 Yansky 所说，Mozilla 在检测问题和警告您方面做得很好。由于 Chrome 具有您可以使用的特定 API，因此我认为这永远不会成为问题，除非他们弃用其中一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T12:20:00.277

我肯定会建议任何 Firefox 插件开发人员安装所有当前版本的 Firefox（Nightly、Aurora、Beta 和 Release），并至少进行基本检查以确保他们的插件在所有这些版本的 Firefox 上都可以运行。事情仍然会破裂，有时会以最预期的方式发生。

此外，Mozilla 还提供资源让插件开发人员了解未来版本中的内容，以便我们做好准备。他们是博客文章：

[http://blog.mozilla.org/addons/2012/05/11/compatibility-for-firefox-13/](http://blog.mozilla.org/addons/2012/05/11/compatibility-for-firefox-13/)

MDN 上还有更多的 through 页面：

[https://developer.mozilla.org/en/Firefox_13_for_developers](https://developer.mozilla.org/en/Firefox_13_for_developers) https://developer.mozilla.org/en/Firefox_14_for_developers [https://developer.mozilla.org/en/Firefox_15_for_developers](https://developer.mozilla.org/en/Firefox_15_for_developers)

# c - 嵌套 if 语句：输入末尾的预期声明或语句

> ID：10956916
> 
> 赞同：0
> 
> 时间：2012-06-08T22:55:58.617
> 
> 标签：c, if-statement

我们老师的作业是创建一个程序，要求输入两个整数`x`和`y`一个字符`z`。输入的字母`z`可能是`a`，它将添加两个整数，`s`将它们相减，`m`相乘和相除`d`。

老师试图在课堂上解释多个“if”“else”语句；但是，恐怕我无法确定丢失的“{”在哪里。如果能更好地理解这一点的人可以解释为什么以及缺少“{”的位置，那将不胜感激。

```
#include <stdio.h>

int main(void)
{
char let;
int x;
int y;
int a;
int s;
int m;
int d;

printf("Enter command letter \n");
scanf("%c", &let);

printf("Enter both integers \n");
scanf("%d%d%c", &x, &y);

if (let==a)
{
    a=x+y;
    printf("x+y is %d \n", a);
}

else
{
    if (let==s)
    {
            s=x-y;
            printf("x-y is %d \n", s);
    }

    else
    {
             if (let==m)
            {
                    m=x*y;
                    printf("x*y is %d \n", m);
            }

    else
    {
                    d=x/y;
                    printf("x/y is %d \n", d);
    }
}

return(0);

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T23:02:05.860

这是典型的缩进问题。

您肯定知道的一件事是，同一个 IF 不能有两个 'else'。如果你按照你的代码，你会看到：

```
 if (let==s)
    {
            s=x-y;
            printf("x-y is %d \n", s);
    }

    else
    {
             if (let==m)
            {
                    m=x*y;
                    printf("x*y is %d \n", m);
            }

    else
    {
                    d=x/y;
                    printf("x/y is %d \n", d);
    } 
```

这是错误的。

现在是修正版

```
 if (let==s)
    {
            s=x-y;
            printf("x-y is %d \n", s);
    }

    else
    {
             if (let==m)
            {
                    m=x*y;
                    printf("x*y is %d \n", m);
            }

            else //REINDENTED THIS ELSE, AND THE ERROR BECOMES VISIBLE
            {
                    d=x/y;
                    printf("x/y is %d \n", d);
            }

     }//THIS IS THE ONE MISSING 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T23:00:53.813

你有两个`} else {`块。

您只需要*一个* `} else {`块，仅当每个块`if (...) {`都`} else if (...) {` 没有运行时才执行。

例如：

```
int x = 4;

if (x == 1) {
  // Do stuff
} else if (x == 2) {
  // Do stuff because x isn't 1
} else if (x == 3) {
  // Do stuff because x isn't 1 or 2
} else {
  // Do stuff because x isn't 1, 2 or 3
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T23:01:01.680

最后一个`else`属于

```
if (let==m) 
```

所以下一个`}`关闭前一个else，并且`main()`缺少它的关闭`}`

通常最好将`if`/`else`对的缩进保持在同一级别以避免这些错误

# php - 如何使用 zen cart 在自定义脚本中查询 db？

> ID：10956918
> 
> 赞同：1
> 
> 时间：2012-06-08T22:56:00.930
> 
> 标签：php, mysql, zen-cart

嗨，我有一个自定义脚本，我用 ajax 调用它来检索一些数据库信息，但由于某种原因，它不允许我从这个文件进行调用。然而，当我将代码放在模板目录中的页面中时，可以说 tpl_products_all_default.php 他们运行良好。我需要做什么才能从自定义脚本运行查询？

```
$sql = "select products_model from products where products_model = :productMdel:"; 
$sql = $db->bindVars($sql, ':productMdel:', 'C021', 'string'); 
$result = $db->Execute($sql); 

if ($result->RecordCount() > 0) { 
  echo 'Model number = ' . $result->fields['products_model']; 
} else { 
  echo 'Sorry, no record found for product number ' . $theProductId; 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T02:31:19.910

我可能会为您提供答案，但我承认这不是最佳设置，因为它需要将您的自定义文件放置到根目录中。

如果您的自定义文件被放置在根目录 (/your_custom_file.php) 中，您可以使用以下 require 语句执行以下操作以访问 $db：

```
require('includes/application_top.php'); 
```

这将初始化所有全局变量，并调用includes/initsystem.php，它将通过自动加载器中的值旋转并包含每个脚本。auto_loader 可以在 includes/auto_loaders/config.core.php 中查看。在 v1.5 中，您可以看到它最终包含第 81-82 行的 init_database.php 脚本。init_database.php 文件最终初始化 $db。

我最初遇到了与您相同的问题，并且几乎错过了此设置，因为我最初将自定义文件添加到 /my_module_extensions/my_file.php 之类的自定义目录中失败了。似乎 application_top.php 使用相对路径加载所有内容，因此在根目录以外的目录下执行时，它会失败。

我希望这有帮助！

编辑：最初以为您在谈论管理员自定义。我将其改写为与公共方面有关。如果您需要扩展管理控制台，这也适用于管理方面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-17T22:07:24.757

不正确，您可以在任何地方使用包含。如：require_once('inc/php/application_top.php'); 或 require_once(' [http://example.com/inc/php/application_top.php](http://example.com/inc/php/application_top.php) ');

# rspec2 - 在工作 Rails 代码上获取 Rspec2 错误

> ID：10956919
> 
> 赞同：0
> 
> 时间：2012-06-08T22:56:13.357
> 
> 标签：rspec2, ruby-on-rails-3.2, factory-bot

我刚刚想出了如何从模型用户上的国家 ID 号显示国家名称。这是我在控制器和两个视图中使用的基本代码，用于在通过 id 找到用户后显示名称：

```
@country_name = Country.find(@user.country_id).name 
```

我正在使用 Factory Girl 来模拟用户记录，其中 country_id 的默认值为美国的 1。在我添加这个逻辑之前，我的 Rspec2 测试是干净的。现在我在运行测试时收到以下错误。在视图或控制器中具有相似逻辑的每个测试都会产生错误。

```
ActiveRecord::RecordNotFound:
   Couldn't find Country with id=1 
```

这是我正在做的两个 Rspec2 测试：

```
describe "profile page" do
  let(:user) { FactoryGirl.create(:user) }
  before { visit user_path(user) }

  it { should have_selector('span',    text: user.first_name+' '+user.last_name) }
  it { should have_selector('title', text: user.first_name+' '+user.last_name) }
end 
```

个人资料页面引用如上所述设置的@country_name。国家名称按预期显示在屏幕上。

我在想我需要以某种方式在 Rspec2 测试中添加一些东西。我不知道在哪里做这个。由于@country_name 是一个与用户无关的实例变量，我觉得也许我需要直接在我的 Rspec2 文件中做一些事情。

任何帮助，将不胜感激。到目前为止我还没有找到这样的东西，但我会继续寻找。

更新 2012 年 6 月 8 日下午 7:27 CDT

这是我的用户控制器逻辑。在此处添加第二行会产生 RSpec2 错误。我在 RSpec2 测试中没有做任何改变。@country_name 在 show.html.erb 中被引用。

```
def show
  @user = User.find(params[:id])
  @country_name = Country.find(@user.country_id).name
end 
```

我决定试试这个，但得到了同样的错误：

```
describe "profile page" do
  let(:user) { FactoryGirl.create(:user) }
  let(:country) { FactoryGirl.create(:country) }
  before { visit user_path(user) }

  it { should have_selector('span',    text: user.first_name+' '+user.last_name) }
  it { should have_selector('title', text: user.first_name+' '+user.last_name) }
end 
```

我将以下内容添加到与用户工厂分开的 factory.rb 中。

```
factory :country do
  id 1
  name "CountryName"
  iso "CN"
end 
```

我的国名应用程序逻辑再次运行良好。

更新 2012 年 6 月 11 日上午 9:09 CDT

这是我的 factory.db 文件。country_id 在 User 中的默认值为 1。我尝试使用如下定义的 country_id 并且没有声明 country_id。我也有没有身份证的乡村工厂。我仍然得到描述的错误。我在这里提交我的问题之前尝试过这个。

```
FactoryGirl.define do

  factory :user do
    sequence(:first_name)  { |n| "First Name #{n}" }
    sequence(:last_name)  { |n| "Last Name #{n}" }
    sequence(:username)  { |n| "Username#{n}" }
    sequence(:email) { |n| "person_#{n}@example.com" }   
    password "foobar"
    password_confirmation "foobar"
    sequence(:city) { |n| "City #{n}" } 
    sequence(:state_province) { |n| "State/Province #{n}" } 
    active_user "1"
    country_id 1

    factory :admin do
      admin true
      active_user "3"
    end

    factory :blocked do
      active_user "1"
    end

    factory :rejected do
      active_user "2"
    end

    factory :not_visible do
      active_user "3"
      visible false
    end

    factory :visible do
      active_user "3"
      visible true
    end
  end

  factory :country do
    id 1
    name "CountryName"
    iso "CN"
  end

end 
```

更新 2012 年 6 月 11 日下午 5:37 CDT

经过几个小时的继续搜索并完全重新启动我的计算机（叹气），我终于能够让测试正常工作。我在用户工厂用 user.association :country 替换了国家。我把我原来的两个语句放在描述“个人资料页面”做语句后面。通过建议的更改，我现在没有错误。我猜该协会将在 Country 中创建相应的行。

非常感谢所有的帮助。将收到的帮助与解决此问题的一项修改相结合。

弄清楚如何检查更改的值.......

更新 2012 年 6 月 12 日上午 10:55

看起来通过所有代码更正，我可以毫无错误地使用@user.country.name。我将更改我的代码以使用此流线型编码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T00:49:19.767

让我们更多地设置用于测试的变量，如果您使用数据库清理器或类似的东西，这些可能会在每次测试运行时在数据库中被破坏。您应该在 before 块中设置您的工厂：

编辑：我刚刚意识到这可能是因为您试图通过显式输入 id 来匹配记录。这不起作用（数据库会自动设置 ID），但 Factory Girl 应该处理您的关联，看看当您像这样设置 before 块时会发生什么：

```
before(:each) do
    country = FactoryGirl.create(:country)
    user = FactoryGirl.create(:user, country: country)
    visit user_path(user)
end 
```

我也会删除

```
id 1 
```

来自您所在国家/地区工厂的线路，以及在用户工厂中将 country_id 设置为 1 的线路。

编辑 2：您需要告诉 Factory Girl 您的关联，不要尝试通过显式设置 id 字段来设置它们，因为这不起作用。

消除

```
country_id 1 
```

来自用户工厂

```
id 1 
```

从国家工厂，并将这一行添加到用户工厂：

```
country 
```

（是的，只是国家本身——只要工厂和协会的名称相同，工厂女孩就足够聪明地弄清楚发生了什么）

顺便说一句，你可以改变这个：

```
@country_name = Country.find(@user.country_id).name 
```

到

```
@country_name = @user.country.name 
```

它在这里无济于事，但它更清洁。

# android - 创建 android 数据库表

> ID：10956927
> 
> 赞同：1
> 
> 时间：2012-06-08T22:57:49.447
> 
> 标签：android, mysql, database, sqlite, debugging

我是安卓新手。我正在尝试使用以下代码在数据库中创建一个表，但出现了一些错误

```
db.beginTransaction();
    try {

        db.execSQL("CREATE TABLE IF NOT EXISTS `book` (`id` int(11) NOT NULL AUTO_INCREMENT,`title` varchar(100) NOT NULL,`author_name` varchar(100) NOT NULL,`text_b` text NOT NULL, PRIMARY KEY (`id`)) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;");
        db.setTransactionSuccessful();
    } catch (SQLiteException e) {
        Log.d("Maaz", "Exception 2 : SQL Exception 2 " + e.getMessage());
    } finally {
        db.endTransaction();
    } 
```

上面的代码给了我以下错误

```
Failure 1 (near "AUTO_INCREMENT": syntax error)
on 0x23c510 when preparing 'CREATE TABLE IF NOT EXISTS `book` (`id` int(11) NOT NULL AUTO_INCREMENT,`title` varchar(100) NOT NULL,`author_name` varchar(100) NOT NULL,`text_b` text NOT NULL, PRIMARY KEY (`id`)) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;'. 
```

请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T23:05:36.540

更改`AUTO_INCREMENT`为`AUTOINCREMENT`。

## 编辑：

试试这个，

```
CREATE TABLE IF NOT EXISTS book (
    _id INTEGER PRIMARY KEY AUTOINCREMENT, 
    title varchar(100) NOT NULL, 
    author_name varchar(100) NOT NULL, 
    text_b TEXT NOT NULL
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T23:01:31.520

什么样的数据库，它对 SQL 语法有影响。您应该首先尝试在控制台编辑器中创建数据库表，然后您可以将该语法粘贴到您的代码中。使用通用 execSQL 从代码创建表通常也不是一个好主意。您应该为此使用 ORM 或数据库库或框架。除非您在客户端的 android 设备上创建它，否则持续集成服务器也可以创建此表。Hibernate 非常适合将凌乱的 SQL 排除在代码之外。

你能告诉我们什么样的数据库吗？

你也可以看看这篇文章：

[http://androidforbeginners.blogspot.com/2010/01/creating-multiple-sqlite-database.html](http://androidforbeginners.blogspot.com/2010/01/creating-multiple-sqlite-database.html)

如果您使用 SQLite，语法非常接近

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T23:23:54.957

这在我的情况下终于奏效了。

## 回答 ：

```
CREATE TABLE IF NOT EXISTS book (
   _id Integer PRIMARY KEY AUTOINCREMENT,
   title varchar(100) NOT NULL,
   author_name varchar(100) NOT NULL,
   text_b TEXT NOT NULL); 
```

删除引擎，默认字符集为我工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-09T03:41:53.033

似乎您在标识符（即`books`）周围有引号。删除它们。

# rules - 用于形态分析的 Drools

> ID：10956931
> 
> 赞同：0
> 
> 时间：2012-06-08T22:58:03.077
> 
> 标签：rules, drools, stemming, rule-engine, pos-tagger

Drools 是否适合为词干和/或 POS 标记编写规则？欢迎提出更好的规则语言的建议。我阅读了该领域的许多使用基于规则的方法的论文，但没有一篇提到使用什么库或框架来编写规则。

我的规则如下：

```
if (length = 3 & first_letter in group1 and second_letter in group2) then ...
if (length = 3 & first_letter in group1 and second_letter not_in group2) then ...
if (length = 3 & first_letter not_in group1 and second_letter in group2) then ...
if (length = 3 & first_letter not_in group1 and second_letter not_in group2) then ...
if (length = 4... 
```

... 等等。

问题是这些规则太多而无法处理。想象一下有十个字母组，每个组中的每个字母都有一个大小写。我可以轻松地拥有一千多个规则来正确分类单词。我用纯 C# 代码编写了其中的 30 条规则，这足以让我看到这种方法的效率有多低。我已经把我的规则组织成纸上的树。我只需要正确的框架来插入、表示、调整和测试它们。

我希望我的问题很清楚。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T16:13:19.217

您当然可以为此使用 Drools。Drools 可以处理数千条规则（我见过具有 30k+ 条规则的 kbase），比您在上面介绍的规则复杂得多，而且毫不费力。

我看到的主要问题不是运行时，而是您的规则的维护。由于您的用例，手动执行此操作似乎需要做很多工作，无论您选择哪种语言/引擎都无关紧要。也许您可以使用决策表来定义您的规则，因为这通常会少很多“打字”？或者也许你可以让一个脚本为你生成所有规则？Drools 两者都支持。

# php - 选择计数，使用 PHP PDO 求和

> ID：10956934
> 
> 赞同：3
> 
> 时间：2012-06-08T22:58:09.953
> 
> 标签：php, mysql, select, count, pdo

如何使用 PHP PDO 获取 count(*) 或 SUM(col1)

我用过

```
$STH_SELECT = $dbh->prepare("SELECT count(*) FROM Table");
$STH_SELECT->execute;
$result = $STH_SELECT->fetchAll;
$Count = $result[0][0]; 
```

这是正确的吗？有更好的方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T23:04:18.587

当您没有在查询中输入任何数据时，您不需要使用准备好的语句。

```
$STH_SELECT = $dbh->query("SELECT count(*) FROM Table");
$Count = $STH_SELECT->fetchColumn(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T22:59:39.237

```
echo $STH_SELECT->fetchColumn();// first row, first col 
```

[http://www.php.net/manual/en/pdostatement.fetchcolumn.php](http://www.php.net/manual/en/pdostatement.fetchcolumn.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-07T12:01:14.843

我在用

```
$Count = $dbh->query("SELECT count(*) FROM Table")->fetchColumn(); 
```

有点短？

# mysql - 如何将记录复制到表中，但如果它们已经存在则不行

> ID：10956937
> 
> 赞同：0
> 
> 时间：2012-06-08T22:58:41.883
> 
> 标签：mysql, copy, duplicates

我有 3 个表用作培训文档的归档机制，一个文档表 (a30)，一个培训手册表，用于存储不同培训手册 (a36trnman) 的标题和 id，以及一个存储 id 的表与不同手册相关联的文件 (a31)。

在我的应用程序中，我允许用户复制培训手册及其相关文档并将其设为自己的。但是，我遇到了一个问题，因为不同的培训手册可能包含相同的文档，然后他们的培训手册中现在会有该文档的副本（他们可能已经修改，并且希望保留）。因此，我需要一个重复的培训手册查询，以检查该用户是否已经存在正在复制的手册中的文档，如果存在，则将其保留在原处，并在表`a31`中创建与现有关联的新记录（旧）包含刚刚添加的培训手册的文件。

我的文件

```
CREATE TABLE `a30` (
  `docname` varchar(250) NOT NULL,
  `docfile` varchar(300) NOT NULL,
  `docfilepdf` varchar(300) NOT NULL,
  `ctgry` int(8) unsigned zerofill NOT NULL,
  `subctgry` int(8) unsigned zerofill NOT NULL,
  `id` int(8) unsigned zerofill NOT NULL auto_increment,
  `creator` int(8) unsigned zerofill NOT NULL,
  `smmry` varchar(60) NOT NULL,
  PRIMARY KEY  (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COMMENT='haha!! training materials!' AUTO_INCREMENT=17 ;

CREATE TABLE `a31` (
  `pntryid` int(8) unsigned zerofill NOT NULL auto_increment,
  `pdocid` int(8) unsigned zerofill NOT NULL,
  `trnmannum` int(8) unsigned zerofill NOT NULL,
  PRIMARY KEY  (`pntryid`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COMMENT='document pantry' AUTO_INCREMENT=43 ;

CREATE TABLE `a36trnman` (
  `unik` int(8) NOT NULL auto_increment,
  `user` int(8) NOT NULL,
  `ctgryname` char(60) NOT NULL,
  PRIMARY KEY  (`unik`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=88 ; 
```

我当前的查询是 1\. 复制培训手册，2\. 存储培训手册 id，3\. 然后将相关文档 id 的列表复制到表 a31，4\. 将文档复制到表 a30。如何对 a30 中的现有重复项进行查询检查并保留它们，但仍然参考新的培训手册向 a31 添加条目？

```
SET @userid =  <code type="user" />;

CREATE TEMPORARY TABLE `a1t` ENGINE=MEMORY SELECT * FROM `a36trnman` WHERE `unik` =  '<input     name="unik" hidden="y" />';
  UPDATE a1t SET `unik` = NULL;
  INSERT INTO `a36trnman` (SELECT * FROM `a1t`);
  DROP TABLE `a1t`;
SET @lastid := LAST_INSERT_ID();

CREATE TEMPORARY TABLE `a1t` ENGINE=MEMORY SELECT * FROM `a31` WHERE `trnmannum` =  '<input     name="unik" hidden="y" />';
  UPDATE a1t SET `pntryid` = NULL, `trnmannum` = @lastid;
  INSERT INTO `a31` (SELECT * FROM `a1t`);
  DROP TABLE `a1t`;

CREATE TEMPORARY TABLE `a30t` ENGINE=MyISAM SELECT docname, docfile, docfilepdf, ctgry, subctgry, id, creator, smmry FROM `a30` LEFT JOIN `a31` ON a30.id = a31.pdocid WHERE `trnmannum` = @lastid;
  UPDATE a30t SET `id` = null, `creator` = @userid;
  INSERT INTO `a30` (SELECT * FROM `a30t`);
  DROP TABLE `a30t`; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T00:40:37.290

不要认为你可以用你当前的模式

理想的方法是在文档表中添加另一列并使用唯一 ID 填充它。然后更改您的文档链接表以使用它而不是自动 inc id。

然后，您可以根据新标识符仅插入那些尚不存在的文档，因为它永远不会改变，而您的自动增量 ID 必须如此。

链接表就像您使用新的不可变密钥一样工作。

因此，基本上文档将有两个唯一标识符，一个是 auto inc，另一个是 mysql 的 guid 等价物。

# javascript - jQuery - 让某些 XML 不工作

> ID：10956941
> 
> 赞同：0
> 
> 时间：2012-06-08T22:59:23.300
> 
> 标签：javascript, jquery, xml

假设我有一个`XML`这样的：[http ://ws.audioscrobbler.com/2.0/?method=track.getInfo&api_key=b25b959554ed76058ac220b7b2e0a026&track=Just%20for%20Me&artist=Hinoi%20Team](http://ws.audioscrobbler.com/2.0/?method=track.getInfo&api_key=b25b959554ed76058ac220b7b2e0a026&track=Just%20for%20Me&artist=Hinoi%20Team)

我正在尝试获取`name`of`track`并且它不起作用：我这样做：

```
$.ajax({
        type: "GET",
        url: "http://ws.audioscrobbler.com/2.0/?method=track.getInfo&api_key=b25b959554ed76058ac220b7b2e0a026&track="+yourTrack+"&artist="+yourArtist,
        dataType: "xml",
        success: function(xml) {
          $(".loading").css("display", "none");
            $(xml).find('track').each(function(){
                var id = $(this).find('id').text();
                console.log("Success!");

                var song = $(this).find('track > name').text();
                var name = $(this).find('artist name').text();
                var album = $(this).find('album title').text();

                $("#more").append("\nSong: " + song);
                $("#more").append("\nArtist: " + name);
                $("#more").append("\nAlbum: " + album);

                $("#more").append("\n\nlast.fm ID: " + id);

            });
        }
    }); 
```

结果是这样的：

```
Song: 
Artist: Hinoi Team
Album: Super Euro Party

last.fm ID: 43135480 
```

帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T23:04:12.973

此行中的选择器不正确：

```
var song = $(this).find('track > name').text(); 
```

`$(this)`是一个`<track>`元素。您正在其中寻找另一个`<track>`元素，这不是您所需要的。您正在寻找`<name>`，因此请改用它：

```
var song = $('> name', this).text(); 
```

# ios - iOS：找不到属性“tableView”

> ID：10956943
> 
> 赞同：1
> 
> 时间：2012-06-08T22:59:29.450
> 
> 标签：ios, xcode, tableview, reloaddata

我的功能`[ViewController.tableView reloadData]`不起作用，尽管我`@class ViewController`在 .h 文件中实现并`#import "ViewController.h"`在 .m 文件中导入。

我究竟做错了什么？？

- - 编辑 - -

这是我的 .h 文件：

```
@class XMLAppDelegate, XMLProductDetailView;

@interface XMLViewController : UITableViewController <UIScrollViewDelegate, XMLImageDownloaderDelegate> {

    NSMutableDictionary *imageDownloadsInProgress; 

    XMLAppDelegate *appDelegate;
    XMLProductDetailView *productDetailView;
    IBOutlet UISearchBar *searchBar;
    IBOutlet UITableView *tableView;
}

@property (nonatomic, retain) NSMutableDictionary *imageDownloadsInProgress;
@property (nonatomic, retain) IBOutlet UISearchBar *searchBar;
@property (nonatomic, retain) IBOutlet UITableView *tableView;

- (void)imageDidLoad:(NSIndexPath *)indexPath;

@end 
```

但请注意：当我包含时`IBOutlet UITableView *tableView;`，它隐藏了一个实例变量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T23:14:25.070

UITableViewController 已经有一个名为 tableView 的属性。将您的属性重命名为 myTableView 之类的名称，您应该没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T23:06:21.550

ViewController 它是类名。你应该初始化这个类的实例变量

```
ViewController *vc = [[ViewController  alloc] init]; 
```

然后将其推到导航控制器上（如果存在）

```
vc.myDataForTable = [NSArray .....]; //for example

[self.navigationController pushViewController:vc animated:YES]; 
```

如果不使用 arc 则释放 vc

```
[vc release]; 
```

# php - 如何在 Apache 1.335 上安装 PHP5

> ID：10956944
> 
> 赞同：0
> 
> 时间：2012-06-08T22:59:32.037
> 
> 标签：php, apache, windows-xp, apache-1.3

自从我安装 PHP 或 Apache 以来已经有很长一段时间了，可能有 10 年了。现在我下载了 PHP5，但我无法让它在我的 Apache 1.335 版本上运行。我不想更改我的 Apache 版本，因为我尝试过，但我只是安装失败，我过去也尝试过很多次，但不知何故，我每次都失败了。我工作的唯一版本是 1.335，所以我已经坚持了很多年。我可能在一个月前尝试安装最新的 apache，但我又失败了。花了我 3 个小时，然后……失败了。我浏览了整个互联网以查看指南，但它们都以某种方式被破坏了。

所以，现在当我将这些行放在 Apache 中“httpd.conf”文件的末尾时：

```
ScriptAlias /php/ "d:/php543/"
Action application/x-httpd-php "/php543/php.exe"

LoadModule php5_module "d:/php543/php5apache2_2.dll" #<-- line 1054
AddType application/x-httpd-php .php
AddType application/x-httpd-php-source .phps 
```

它说当我执行 Apache 时：

```
Syntax error on line 1054 of d:/apache1335/conf/httpd.conf:
Cannot load d:/php543/php5apache2_2.dll into server: (126) file not found 
```

但该文件存在。我已将 php5ts.dll 复制到“windows/system32”文件夹中，将 php.ini 复制到“windows”文件夹中。

我过去曾尝试过“EasyPHP”，但我真的很讨厌那个东西，它只会让事情变得更难。我过去也尝试过更新的 Apache 版本，但是我开始工作的那些，有一些烦人的东西，不记得到底是什么，但如果新版本没问题，为什么我会坚持使用旧版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T23:14:54.243

您正在尝试将 apache 2.2 模块加载到 apache 1 中。该操作成功的可能性非常低。

我建议你升级，apache 1.335 可能也有很多错误。如果您无法让新版本正常工作，那么您不太可能让旧版本正常工作，因为安装过程没有太大变化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T15:33:54.080

如果您在安装 apache 时遇到问题，我可以建议使用[http://www.wampserver.com/en/](http://www.wampserver.com/en/) 或 [http://www.apachefriends.org/en/xampp.html](http://www.apachefriends.org/en/xampp.html) 我没有使用 XAMPP 但 WAMP 有PHP、Apache、MySQL 都捆绑在一个简单的安装程序中。它直接开箱即用，无需更改配置，尽管您当然希望更改某些配置.. 它提供了一个漂亮的系统托盘图标以方便配置（对于最常用的配置选项，您可以直接在系统托盘图标中更改它，甚至无需打开配置文件）

我喜欢 WAMP 的一个功能是它预先安装并配置了开箱即用的 xDebug，我记得我第一次尝试手动设置它，它是一个 PITA

最终，您可能想要安装各个组件，但作为入门套件，它们确实是不错的选择。

# http - JBoss AS 7：如何修改 http 响应标头中的服务器横幅

> ID：10956945
> 
> 赞同：0
> 
> 时间：2012-06-08T22:59:36.553
> 
> 标签：http, jboss, header, response

我有一个在以下两种设置中运行的 Web 应用程序：1）在 Windows7 上运行的 JBoss 和 2）在 CentOS 上使用 apache httpd 反向代理运行的 JBoss。

为了使用 org.jboss.web.tomcat.filters.ReplyHeaderFilter 类，我下载并添加了 jbossWebService.jar 到 WEB-INF/lib 目录。以下是我的过滤器配置。

```
<filter>

<filter-name>CommonHeadersFilter</filter-name>

<filter-class>

org.jboss.web.tomcat.filters.ReplyHeaderFilter</filter-class>

<init-param>

<param-name>X-Powered-By</param-name>

<param-value>MyWeb</param-value>

</init-param>

<init-param>

     <param-name>Server</param-name>

     <param-value>MyServer</param-value>

</init-param>

</filter> 
```

在 apache httpd conf 文件中，我有以下内容，修改其中没有任何效果。

```
ServerTokens ProductOnly 
ServerSignature Off 
```

**我在浏览器中看到的：**

没有 apache httpd 的 JBoss 显示如下：

X-Powered-By: MyWeb, JSP/2.2

服务器：Apache-Coyote/1.1，MyServer

使用 apache 作为反向代理的 JBoss 显示如下：

X-Powered-By: MyWeb, JSP/2.2

服务器：Apache-Coyote/1.1

**我想要的是：**

Apache-Coyote/1.1 和 JSP/2.2 离开了。apache httpd 后面的那个甚至没有将 MyServer 显示为服务器横幅。我希望它出现，但这不是必需的。

任何帮助表示赞赏。

谢谢。

普拉杰什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:54:33.233

设置系统属性 org.apache.coyote.http11.Http11Protocol.SERVER 似乎在 JBoss AS 7.1.1.Final 中有效

```
<system-properties>
<property name="org.apache.coyote.http11.Http11Protocol.SERVER" value="secretserver"/>
</system-properties> 
```

尽管警告上面提到的系统属性（'org.apache.coyote.http11.Http11Protocol.SERVER'）在最新版本的 JBoss Web 的 sys 属性文档中不存在，所以如果设置该属性不起作用，那么可能是您正在使用的 JBoss Web 版本中缺少，编写自定义过滤器可能是唯一的选择:(

[http://docs.jboss.org/jbossweb/latest/sysprops.html](http://docs.jboss.org/jbossweb/latest/sysprops.html)

# java - 在没有 BouncyCastle 的 Java 中使用 RSA 加密

> ID：10956956
> 
> 赞同：3
> 
> 时间：2012-06-08T23:00:48.847
> 
> 标签：java, encryption, rsa

在我的程序中，我尝试使用以下代码使用 RSA 加密一些明文：

```
static String RSAEncrypt(String pubkey, String plain){
    return encrypt(pubkey,plain,"RSA");
}
static String encrypt(String stringKey, String plain, String algo){
    String enc="failed";
    try{
    byte[] byteKey  = new BASE64Decoder().decodeBuffer(stringKey);
    Key key = new SecretKeySpec(byteKey,algo);

    byte[] data = plain.getBytes();
    Cipher c = Cipher.getInstance(algo);
    c.init(Cipher.ENCRYPT_MODE, key);
    byte[] encVal = c.doFinal(data);
    enc = new BASE64Encoder().encode(encVal);
    }catch(Exception e){e.printStackTrace();}

    return enc;
} 
```

但是，当它运行时，它会显示以下错误：

```
java.security.InvalidKeyException: No installed provider supports this key: javax.crypto.spec.SecretKeySpec
at javax.crypto.Cipher.chooseProvider(Cipher.java:877)
at javax.crypto.Cipher.init(Cipher.java:1212)
at javax.crypto.Cipher.init(Cipher.java:1152)
at Crypto.encrypt(Crypto.java:37)
at Crypto.RSAEncrypt(Crypto.java:62) 
```

我尝试将其更改为 RSA/None/PKCS1Padding 和 RSA/ECB/PKCS1Padding 无济于事。我知道安装 BouncyCastle 可能会有所帮助，但我想避免它（我想避免更多的依赖关系，我已经无论如何安装它时遇到了一些问题）。提前感谢您的任何想法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-09T03:28:22.863

正如评论中所说，`SecretKeySpec`仅适用于对称算法。您提到您`byte[]`通过调用`getEncoded`.

有两种可能性和两种结果格式：

### RSA PrivateKey 的编码

调用`PrivateKey#getEncoded`RSA 私钥的实例将导致私钥的 PKCS#8 编码，并且可以在[PKCS8EncodedKeySpec](http://docs.oracle.com/javase/7/docs/api/java/security/spec/PKCS8EncodedKeySpec.html)的帮助下恢复。

### RSA PublicKey 的编码

`PublicKey#getEncoded`在 RSA 公钥上生成通用 X.509 公钥编码，并且可以使用[X509EncodedKeySpec](http://docs.oracle.com/javase/7/docs/api/java/security/spec/X509EncodedKeySpec.html)恢复。

### 示例用法

```
byte[] data = "test".getBytes("UTF8");
KeyPairGenerator kpg = KeyPairGenerator.getInstance("RSA");
kpg.initialize(512);
KeyPair keyPair = kpg.genKeyPair();

byte[] pk = keyPair.getPublic().getEncoded();
X509EncodedKeySpec spec = new X509EncodedKeySpec(pk);
KeyFactory keyFactory = KeyFactory.getInstance("RSA");
PublicKey pubKey = keyFactory.generatePublic(spec);
Cipher cipher = Cipher.getInstance("RSA/ECB/PKCS1Padding");
cipher.init(Cipher.ENCRYPT_MODE, pubKey);
byte[] encrypted = cipher.doFinal(data);

byte[] priv = keyPair.getPrivate().getEncoded();
PKCS8EncodedKeySpec spec2 = new PKCS8EncodedKeySpec(priv);
PrivateKey privKey = keyFactory.generatePrivate(spec2);
cipher.init(Cipher.DECRYPT_MODE, privKey);
byte[] plain = cipher.doFinal(encrypted);

System.out.println(new String(plain, "UTF8")); //=> "test" 
```

# c# - 如何在 C# 中以编程方式按值选择下拉列表项并将其传递给整数？

> ID：10956961
> 
> 赞同：-2
> 
> 时间：2012-06-08T23:01:27.030
> 
> 标签：c#, asp.net, sql

```
 public DataTable selectcat(int catid)
{
    SqlConnection con = new SqlConnection(DBHelper.connection);
    SqlCommand com = new SqlCommand();
    com.Connection = con;
    con.Open();
    com.CommandType = CommandType.StoredProcedure;
    com.CommandText = "selectcatalog";
    com.Parameters.AddWithValue("@catid", catid);
    SqlDataReader dr = com.ExecuteReader();
    DataTable dt = new DataTable();  
        dt.Load(dr);
        con.Close();
        return dt;
} 
```

然后我在下拉列表事件（SelectedIndexChanged）中调用该函数

```
 protected void catselectddl_SelectedIndexChanged(object sender, EventArgs e)
{
   DataTable dt;

    DAcatagory obj = new DAcatagory();
    dt = obj.selectcat(catselectddl.SelectedValue);
    DataRow dr = dt.Rows[0];
    catnametxt.Text = dr["catname"].ToString();
    catdestxt.Text = dr["catdescription"].ToString();
} 
```

但它在`dt = obj.selectcat(catselectddl.SelectedValue);` PS 处给了我无效的参数错误：下拉列表显示他的显示和数据库中的值

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T23:04:38.193

只需将其转换为 int：

```
dt = obj.selectcat(Convert.ToInt32(catselectddl.SelectedValue)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T23:05:55.510

尝试更换

```
 dt = obj.selectcat(catselectddl.SelectedValue); 
```

和

```
 dt = selectcat(catselectdd1.SelectedValue); 
```

在调试模式下，还要检查 ddl 发送到数据库的实际值

而且，如果数据库期望一个 int 作为值，则将其转换为 int32 ，就像其他答案一样。

# javascript - 在 JavaScript 中通过引用返回？

> ID：10956970
> 
> 赞同：14
> 
> 时间：2012-06-08T23:02:55.587
> 
> 标签：javascript

JavaScript 函数是否通过引用返回布尔值和数字以外的对象？

当这些对象在它们所属的函数终止时被销毁时，这怎么可能呢？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-08T23:05:06.367

*直到所有*对它们的引用都消失并收集垃圾后，对象才会被销毁。当对象被返回时，调用代码获得对它的引用，并且对象不会被垃圾回收。

从技术上讲，被调用函数的堆栈帧在返回时被销毁。但是，对象不在堆栈上，而是在堆上。函数对对象的本地引用在堆栈上，因此被销毁，但调用代码的引用直到一段时间后才被销毁。

作为旁注，它如何返回并不重要，因为函数在返回后无论如何都不能使用该对象。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-08T23:05:08.127

> JavaScript 函数是否通过引用返回布尔值和数字以外的对象？

确实，JavaScript 中的对象**总是**通过引用传递

> 当那些对象所属的函数终止时这些对象被销毁时，怎么可能呢？

只有引用被破坏，而不是值本身。并且只要没有剩下的引用，该对象就是垃圾收集的候选对象。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-08T23:18:06.687

那里有两个很好的答案，但只是想我应该补充一点，它很容易测试：

```
function modify(arg) {
    arg.modified = true;
}
test = 4;
modify(test);
console.log(test.modified); // undefined
test = {};
modify(test);
console.log(test.modified); // true
test = "";
modify(test);
console.log(test.modified); // undefined 
```

其中 undefined 表示它已被复制而不是通过引用传递。请注意，字符串也不是通过引用传递的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-18T19:03:22.610

参数（包括对象）按值发送到函数。参数对象的属性可用且可更改，其行为类似于引用。看下面的例子：

```
function changeObj(obj){obj.a *= 10; return true;}
function killObj(obj){obj = null; return true;}
function changeAndKillObj(obj){obj.a += 1; obj = null; return true;}
var a = {a:1, b:'test'};
console.log(a); //Object {a:1, b:'test'}
changeObj(a);
console.log(a); //Object {a:10, b:'test'}
killObj(a);
console.log(a); //Object {a:10, b:'test'}
changeAndKillObj(a); //Object {a:11, b:'test'} 
```

底线：你可以对对象的属性做任何你想做的事情，但不能对对象本身做任何事情。对参数的任何赋值都使其成为不同的对象并与初始对象取消链接。

# osgi - 如何将 Spring 和 Hibernate jar 添加到 OSGi 项目？

> ID：10956971
> 
> 赞同：2
> 
> 时间：2012-06-08T23:02:58.250
> 
> 标签：osgi

我们有一个需要 spring 和 hibernate 功能的 OSGi 项目。我尝试将它们单独添加为捆绑包，但它们对运行时环境不可见。下面是我们项目的截图（更好的图片[http://i.stack.imgur.com/d6gV9.png](https://i.stack.imgur.com/d6gV9.png)）。在图片中，插件以 spring 开头，hibernate 包含 jars，我将它们添加到所需包中的导入包中。我还附上了一个示例清单。任何帮助表示赞赏。我总是得到春季课程的classnotfoundexceptions。

我使用 Eclipse 的创建插件来创建 jar 包。在向导中，我选择它们作为标准 OSGi 插件（不确定这是否正确）。我正在通过 IBM RAD (Aries) 构建项目。

![在此处输入图像描述](../Images/cf7c11ed0bbab1d00853a2947b1f1a9b.png)

```
 Manifest-Version: 1.0
Bundle-ManifestVersion: 2
Bundle-Name: org.xxx.scar.web1
Bundle-SymbolicName: org.xxx.scar.web1
Bundle-Version: 1.0.0.qualifier
Bundle-ClassPath: WEB-INF/classes
Bundle-RequiredExecutionEnvironment: JavaSE-1.6
Web-ContextPath: /org.frb.scar.web1
Import-Package: javax.el;version="2.0";resolution:=optional,
 javax.faces,
 javax.faces.application,
 javax.faces.component,
 javax.faces.component.html,
 javax.faces.context,
 javax.faces.convert,
 javax.faces.el,
 javax.faces.event,
 javax.faces.lifecycle,
 javax.faces.model,
 javax.faces.render,
 javax.faces.validator,
 javax.faces.webapp,
 javax.servlet;version="2.5",
 javax.servlet.annotation;resolution:=optional,
 javax.servlet.http;version="2.5",
 javax.servlet.jsp;version="2.0",
 javax.servlet.jsp.el;version="2.0",
 javax.servlet.jsp.tagext;version="2.0",
 org.frb.scar.entity,
 org.frb.scar.manager,
 org.frb.scar.services,
 org.frb.scar.utils,
 org.springframework.beans,
 org.springframework.beans.annotation,
 org.springframework.beans.factory,
 org.springframework.beans.factory.access,
 org.springframework.beans.factory.access.el,
 org.springframework.beans.factory.annotation,
 org.springframework.beans.factory.config,
 org.springframework.beans.factory.parsing,
 org.springframework.beans.factory.serviceloader,
 org.springframework.beans.factory.support,
 org.springframework.beans.factory.wiring,
 org.springframework.beans.factory.xml,
 org.springframework.beans.propertyeditors,
 org.springframework.beans.support 
```

和更多的弹簧罐，直到网络。

**错误**

*   java.lang.ClassNotFoundException：org.springframework.web.context.request.RequestContextListener
*   java.lang.ClassNotFoundException: org.springframework.web.context.ContextLoaderListener 和许多....

谢谢，巴布。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T04:23:27.757

答案在错误信息中：ClassNotFoundException: org.springframework.web.context.request.RequestContextListener。

包`org.springframework.web.context.request`未在您的包的导入中列出。

# eclipse - 在 OSX 上安装 PyDev Eclipse 失败

> ID：10956972
> 
> 赞同：0
> 
> 时间：2012-06-08T23:02:58.527
> 
> 标签：eclipse, pydev

我遇到了与早期问题之一类似的问题，但没有任何建议解决了这个问题。尝试在 Eclipse 中安装 PyDev 总是无法读取必要的文件。我有最新版本的 Eclipse（更新），我尝试了多个 PyDev 链接，包括每晚构建，并尝试安装 Aptana。所有都将失败，并出现相同类型的未能读取错误。会发布图片，但不能作为新用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T03:40:47.973

所以看起来我的防火墙正在中断安装，以至于它刚刚超时。没有任何迹象表明这种情况正在发生，但安装在不安全的网络（热点）上运行良好，但在公司防火墙后始终失败。一旦我再次进入防火墙后，我重新测试，并复制了失败。我在多个最终没有得到回答的问题中看到了同样的超时错误，所以只想包括我的案例的解决方案。

# c++ - 如何在阻塞 send() 时模拟 WSAEWOULDBLOCK？

> ID：10956974
> 
> 赞同：0
> 
> 时间：2012-06-08T23:03:30.877
> 
> 标签：c++, sockets, winsock, send

我正在尝试通过将内部 Winsock 发送缓冲区减少到一个非常小的值和 2 个线程同时发送来模拟 WSAEWOULDBLOCK 阻塞 send() 与 setsockopt...

通过拔下网线或在防火墙中阻止连接来断开连接不足以填满内部发送缓冲区并返回 WSAEWOULDBLOCK ？

我怎样才能做到这一点 ？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T23:54:54.517

接受远程端的连接，但在该位置进行[tarpit 。](https://en.wikipedia.org/wiki/Tarpit_%28networking%29)继续尝试在本地发送，您应该能够填满用于传出流量的数据缓冲区。

# plot - Matlab contourf() 在全局地图上绘制数据

> ID：10956975
> 
> 赞同：3
> 
> 时间：2012-06-08T23:03:32.777
> 
> 标签：plot, maps, gis, matlab

我一直在使用 Matlab 2011b 和 contourf/contourfm 在北美地图上绘制 2D 数据。我从 mathworks 网站上的 contourfm 帮助页面开始，如果您使用名为“geoid”的默认数据和参考向量“geoidrefvec”，它会非常有用。

以下是一些适用于预设数据的简单[代码](https://dl.dropbox.com/u/8058705/plot_test.m)：

```
figure
axesm('MapProjection','lambert','maplo',[-175 -45],'mapla',[10 75]);
framem; gridm; axis off; tightmap

load geoid
%geoidrefvec=[1 90 0];

load 'TECvars.mat'
%contourfm(ITEC, geoidrefvec, -120:20:100, 'LineStyle', 'none');
contourfm(geoid, geoidrefvec, -120:20:100, 'LineStyle', 'none');

coast = load('coast');
geoshow(coast.lat, coast.long, 'Color', 'black')
whitebg('w')
title(sprintf('Total Electron Content Units x 10^1^6 m^-^2'),'Fontsize',14,'Color','black')
%axis([-3    -1   0    1.0]);
contourcbar 
```

当我尝试使用我的数据时，问题就出现了。我很确定参考向量决定了数据应该在地球上绘制的位置，但我找不到任何关于该向量如何工作或如何创建一个以处理不同数据的文档。

[这是一个包含我的数据](https://dl.dropbox.com/u/8058705/TECvars.mat)的 .mat 文件。ITEC 是要绘制的值矩阵。关于网格相对于地球的位置信息可以在称为 RT 的单元阵列中找到，但基本思想是。ITEC(1,1) 指的是 Lat=11 Long=-180，ITEC(58,39) 指的是 Lat = 72.5 Long = -53，数据间隔均匀。

有谁知道参考向量如何定义数据在地图上的放置位置？或者也许还有另一种方法可以做到这一点？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T00:31:19.653

好的。所以我想通了。我意识到，鉴于向量中只有三个维度，纬度数据之间的度数必须与经度数据之间的度数相同。也就是说，每个水平数据点之间的间距必须与每个垂直点之间的间距相同。比如1度。

参考向量中的第一个值是每个数据点之间的距离（以度为单位）（我认为......这在我的情况下有效），向量中的两个第二个值分别是最小纬度和最小经度。

在我的情况下，数据在每个方向上的间距相等，但垂直和水平的间距不同。我只是将数据插值到 1x1 网格密度，并将向量中的第一个值设置为 1。

希望这会帮助有同样问题的人。

不过快速提问，既然我回答了自己的问题，我会得到赏金吗？我不想失去 50 个“有价值”的声望点哈哈

# ios - Apple In App Purchase - 购买定制内容

> ID：10956977
> 
> 赞同：0
> 
> 时间：2012-06-08T23:03:54.400
> 
> 标签：ios, in-app-purchase

我有一个应用程序，我想在其中提供支付数字格式问题答案的能力。即，用户将提交一个问题，并购买一个我将构建并发送回应用程序的答案。这是允许的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T23:08:01.353

我不确定是否允许直接购买未知问题的答案，但我敢肯定你可以简单地出售可以提供 x 个请求的“积分”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T23:08:41.907

是的，这是允许的。请参阅此处的 iOS 应用审查指南第 11 节[，需要登录](https://developer.apple.com/appstore/resources/approval/guidelines.html)。

# javascript - 从 Javascript 函数调用 Html Helper 方法

> ID：10956979
> 
> 赞同：1
> 
> 时间：2012-06-08T23:04:04.667
> 
> 标签：javascript, razor, jqgrid, html-helper

我正在尝试调用我从 jqGrid 使用的 javascript 函数编写的自定义 Html 帮助器方法，以返回单元格的格式化文本，在本例中为链接：

```
function formatGroupPlanEditLink(cellValue, options, rowObject) {
        //var cellHtml = "<a href='/Insurance/GroupPlanEdit/?id=" + rowObject[0] + "'>" + rowObject[1] + "</a>";
    var functionArgs = rowObject[1] + ',Url.Action("GroupPlan", "Insurance", new { id = ' + rowObject[0] + ' }),String.Format("Edit {0}", ' + rowObject[1] + '), listId,Url.Action("GroupPlanList", "Insurance"),false';
    var cellHtml = '@Html.DialogFormLink(' + functionArgs + ')';
    return cellHtml;
} 
```

我遇到的问题是在执行助手之前我无法连接整个字符串。所以浏览器正在尝试执行“@Html.DialogFormLink(”——这当然会导致错误。我想一定有更好的方法来解决这个问题。我真的希望仍然能够像我一样使用 Html 辅助方法在其他地方使用它，它可以很好地满足我的要求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T00:20:12.997

我对 Razor 不是很熟悉，但是 @Html 助手周围的引号看起来很可疑。

var cellHtml = **'@Html.DialogFormLink('** + functionArgs + ')';

浏览器不执行@Html.DialogFormLink；服务器对其进行评估。我怀疑服务器正在将文字“@Html.DialogFormLink”注入到您的 js 中。

# javascript - Backbone：从服务器获取数据到 JQGrid

> ID：10956983
> 
> 赞同：0
> 
> 时间：2012-06-08T23:04:25.680
> 
> 标签：javascript, jqgrid, backbone.js

我有一个当前使用 JQGrid 的 Web 应用程序，但我正在尝试引入 Backbone.js 来改进代码组织。我想要做的是使用集合从服务器获取数据，然后将 JSON 信息添加到我定义的 JQGrid 中，但我无法让它工作。我的 JQGrid 是这样定义的：

```
var tareasHumanasTable = $("#grillaTH").jqGrid({
        datatype: 'local',
        height: 'auto',
        colNames:[ colNames...],
        colModel:[ colModel...]
} 
```

我的模型和集合是这样定义的：

```
window.TareaHumana = Backbone.Model.extend();

window.TareaHumanaCollection = Backbone.Collection.extend({
    model:  TareaHumana,
    url: "bandejaTareas/buscarTH"
}); 
```

我有一个按钮，单击该按钮可启动服务器通信。现在正在这样做：

```
$(function(){
    $("#botonBuscar").bind('click',function(){
        var tareaHumanaList = new TareaHumanaCollection();
        tareaHumanaList.fetch({data: $("#formBandejaTareas").serializeObject()});
        //alert("tareaHumanaList.toJSON(): " + tareaHumanaList.toJSON());
        tareaHumanaList.each(function(tareaHumana, i){
            //alert("tareaHumana.toJSON(): " + tareaHumana.toJSON());
            tareasHumanasTable.jqGrid('addRowData', (i + 1), tareaHumana.toJSON());
        }); 
```

该代码根本不起作用。使用 Firebug，我验证了服务器以正确的格式发送数据，但代码不起作用。最奇怪的是，当我取消注释“alert(...)”行时，一切都开始工作了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T00:53:16.513

关键是`fetch`异步的。因此，如果您在它`each`之后立即调用，`fetch`您的集合可能不会被填充。你应该使用`success`回调。例如看看[这个答案](https://stackoverflow.com/a/6048665/1248256)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T12:52:30.583

尝试使用 datatype:jsonstring 并在集合上创建一个格式函数以向 jqgrid 提供正确的数据格式。

# php - PHP SECURITY 在每次登录或哈希系统更改时动态生成用户哈希密码

> ID：10956989
> 
> 赞同：-1
> 
> 时间：2012-06-08T23:05:20.123
> 
> 标签：php, security, model-view-controller, passwords, salt

我知道这个网站[http://www.openwall.com/phpass/](http://www.openwall.com/phpass/)，但想法主要是系统上的盐。

例如，ZEND 使用 system('uname -a') 并将其散列到 md5() 以使用 ROW LEVEL 用户 SALT 加密。这是用户密码、用户登录名/电子邮件地址和服务器名称的组合，如 sha1/md5/...

但是，我的想法是生成**动态盐**而不是静态盐，例如 system('uname -a')。例如，每次用户登录时，SALT 都已更改，但用户密码未更改。

出于更多安全原因，我需要每天动态更改数据库或外部文件上的盐，或者使用第三方，例如检查来自另一台服务器的数据是否加盐？

什么是保护用户数据库表和当前登录的用户敏感数据的最佳方法。Cookie 对我来说也是非常糟糕的安全选项。它必须有效，例如 PayPal API Tokenize 和用户 ID ...

我正在使用当前：

1.  每个用户的盐
2.  来自系统哈希的盐
3.  用户密码、用户盐和系统盐的哈希组合
4.  SHA-512 crypt() 或 bcrpyt() 类
5.  动态加盐？主意？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T10:04:55.947

你这样做是不对的。

我认为您缺少有关重新散列密码的关键事实。为此，您必须以*可恢复的形式*存储它。因此，如果系统受到威胁，则会产生更大的安全风险。

这是我要做的：

*   使密码在 60 天内过期（或者，您可以选择其他数字，但不要太频繁）。
*   每次用户设置**新密码**时，您都会生成一个随机盐
*   `crypt()`使用、使用`CRYPT_SHA512`或`CRYPT_BLOWFISH`散列算法构建散列
*   设置更高的回合数.. 20'000 应该足够了
*   `crypt()`将返回的整个结果存储`hash`在 db 中的字段中。

您也可能受益于阅读：[Properly Salting Passwords, The Case Against Pepper](http://blog.ircmaxell.com/2012/04/properly-salting-passwords-case-against.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T23:22:18.917

改变盐并没有改善任何东西。

关键是：您总是需要将盐和散列一起存储在某个地方，因为当您将密码输入与散列进行比较时，您需要对输入进行散列 - 很明显，对吧？

所以这就是重点：即使您在每次登录后更改盐并对密码进行一些奇怪的重新散列，它也不会改变任何事情，因为一旦攻击者获得数据库，他就同时拥有散列和盐（如果它存储在一起，如果您总是为每个用户使用不同的盐，这是必要的，这是您应该做的）。

一个更好的方法是通过使用 1000-10000 轮散列以及长盐来扩展散列（你可以轻松地使用 512 字节的盐）。这些是比做一些重新散列更好的提示。

但无论如何：如果你真的想改进你的 PHP 应用程序，你应该专注于避免 SQL 注入、XSS、CSRF、RFI、LFI、文件泄露、RCE 等安全问题——如果攻击者可以访问服务器，他可以简单地后门每次有人尝试登录时，登录脚本都会向他发送一封包含明文凭据的电子邮件。[（好吧，如果您使用在 JavaScript 中实现的质询-响应身份验证，例如 CRAM-MD5 http://en.wikipedia.org/wiki/Challenge-response_authentication](http://en.wikipedia.org/wiki/Challenge-response_authentication)或使用 RSA（也在 JS 中实现）安全发送，您也可以避免这种情况登录数据）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T00:02:00.557

Salt仅用于防止预计算攻击，例如彩虹表。因此，如果有人想暴力破解哈希，他们实际上必须在运行时一次计算一个。（而不仅仅是在预先计算的散列值的数据库中查找）

目前还不清楚您要解决的问题是什么。你只是说：

“出于更多安全原因，我需要动态更改盐”

如果该问题是预计算攻击，那么只需使用普通盐即可。如果不是预计算攻击，那么 salt 几乎肯定是错误的解决方案。

# c# - 对比 在泛型

> ID：10956993
> 
> 赞同：232
> 
> 时间：2012-06-08T23:05:42.947
> 
> 标签：c#, generics, covariance

`<out T>`和 和有什么不一样`<T>`？例如：

```
public interface IExample<out T>
{
    ...
} 
```

对比

```
public interface IExample<T>
{
    ...
} 
```

* * *

## 回答 #1

> 赞同：246
> 
> 时间：2012-06-08T23:11:15.947

泛型中的`out`关键字用于表示接口中的类型 T 是协变的。有关详细信息，请参阅[协变和逆变](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/concepts/covariance-contravariance/index)。

经典的例子是`IEnumerable<out T>`。由于`IEnumerable<out T>`是协变的，因此您可以执行以下操作：

```
IEnumerable<string> strings = new List<string>();
IEnumerable<object> objects = strings; 
```

如果这不是协变的，那么上面的第二行将失败，即使在逻辑上它应该工作，因为 string 派生自 object。在将[泛型接口的差异](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/concepts/covariance-contravariance/variance-in-generic-interfaces)添加到 C# 和 VB.NET（在带有 VS 2010 的 .NET 4 中）之前，这是一个编译时错误。

在 .NET 4 之后，`IEnumerable<T>`被标记为协变，并成为`IEnumerable<out T>`. 由于`IEnumerable<out T>`只使用其中的元素，并且从不添加/更改它们，因此将可枚举的字符串集合视为可枚举的对象集合是安全的，这意味着它是*covariant*。

这不适用于像这样的类型`IList<T>`，因为`IList<T>`有一个`Add`方法。假设这是允许的：

```
IList<string> strings = new List<string>();
IList<object> objects = strings;  // NOTE: Fails at compile time 
```

然后你可以打电话：

```
objects.Add(new Image()); // This should work, since IList<object> should let us add **any** object 
```

当然，这会失败 - 因此`IList<T>`不能标记为协变。

顺便说一句，还有一个选项`in`- 用于比较接口之类的东西。 `IComparer<in T>`，例如，以相反的方式工作。您可以直接使用具体`IComparer<Foo>`作为`IComparer<Bar>`if`Bar`的子类`Foo`，因为`IComparer<in T>`接口是*逆变*的。

* * *

## 回答 #2

> 赞同：77
> 
> 时间：2015-01-09T09:39:28.637

为了容易记住`in`and`out`关键字的用法（也是协变和逆变），我们可以将继承想象成包装：

```
String : Object
Bar : Foo 
```

![进出](../Images/87c96b0f96736b452ae07f94ed3e1a19.png)

* * *

## 回答 #3

> 赞同：60
> 
> 时间：2013-12-18T14:34:28.650

考虑，

```
class Fruit {}

class Banana : Fruit {}

interface ICovariantSkinned<out T> {}

interface ISkinned<T> {} 
```

和功能，

```
void Peel(ISkinned<Fruit> skinned) { }

void Peel(ICovariantSkinned<Fruit> skinned) { } 
```

接受的函数`ICovariantSkinned<Fruit>`将能够接受`ICovariantSkinned<Fruit>`或`ICovariantSkinned<Banana>`因为`ICovariantSkinned<T>`是协变接口并且`Banana`是`Fruit`,

接受的函数`ISkinned<Fruit>`只能接受`ISkinned<Fruit>`。

* * *

## 回答 #4

> 赞同：50
> 
> 时间：2012-06-08T23:16:06.530

“ `out T`”表示类型`T`是“协变的”。这限制`T`在泛型类、接口或方法的方法中仅作为返回（出站）值出现。这意味着您可以将类型/接口/方法转换为具有`T`.
例如`ICovariant<out Dog>`可以强制转换为`ICovariant<Animal>`.

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-06-08T23:11:02.233

从您发布的链接中......

> 对于泛型类型参数，**out 关键字指定类型参数是 covariant**。

**编辑**：再次，从您发布的链接

> 有关详细信息，请参阅协变和逆变（C# 和 Visual Basic）。[http://msdn.microsoft.com/en-us/library/ee207183.aspx](http://msdn.microsoft.com/en-us/library/ee207183.aspx)

# c# - 在 DataGridView 中为单元格着色时尊重交替行着色

> ID：10956995
> 
> 赞同：0
> 
> 时间：2012-06-08T23:05:59.053
> 
> 标签：c#, datagridview, colors, rows, alternating

与[此问题](https://stackoverflow.com/questions/1999331/c-sharp-coloring-the-same-values-in-row-of-datagridview)类似，我正在尝试在 c# 中为 DataGridView 中的单个单元格着色。我想支持交替行的着色。我的视图确实切换了行可见性并允许排序，所以我不能只使用 Index mod 2 来确定使用哪种颜色。有没有办法做到这一点？

此外，这是针对 MS Project 的 VSTO 插件，所以我不相信（非常好的）css 解决方案适用。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T23:19:02.270

css 是最好的方法。

设置 CssClass="gridview"

然后在css中

```
 .gridview td :even
  {
  background-color: #CCC;
   }

    .gridview td :odd
   {
     background-color: #fff;
     } 
```

# windows-phone-7 - 不允许对 IsolatedStorageFileStream 进行操作

> ID：10956997
> 
> 赞同：0
> 
> 时间：2012-06-08T23:06:15.180
> 
> 标签：windows-phone-7, isolatedstorage

我正在从 Internet 读取 XML 文件。我正在将它写入隔离存储，然后我喜欢阅读它。这是代码

```
 IsolatedStorageFile isf=IsolatedStorageFile.GetUserStoreForApplication();
    private void findNearestButton_Click(object sender, RoutedEventArgs e)
    {

        findCity(isf);
    }

  private void findCity(IsolatedStorageFile isf)
    {
       filePath = AppResource.exchangeOfficesFile;

            if (!isf.FileExists(filePath.ToString()))
            {
                takeXMLOnLine(isf,filePath);
            }
            parseXMLfile(isf,filePath);

    }

 private void takeXMLOnLine(IsolatedStorageFile isf, string filePath)
    {
        System.Uri targetUri = new System.Uri(AppResource.exchangeOfficesURI);
        WebClient client = new WebClient();
        client.DownloadStringAsync(targetUri);
        client.DownloadStringCompleted += new DownloadStringCompletedEventHandler(client_DownloadStringCompleted);

    }

void client_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
    {
        using (IsolatedStorageFileStream rawStream = isf.OpenFile(filePath, FileMode.Create))
        {
            XmlWriterSettings settings = new XmlWriterSettings();
            settings.ConformanceLevel = ConformanceLevel.Auto;
            using (XmlWriter writer = XmlWriter.Create(rawStream, settings))
            {
                string xmlResponse = e.Result.ToString();
                xmlResponse = xmlResponse.Replace("&lt;", "<");
                xmlResponse = xmlResponse.Replace("&gt;", ">");
                writer.WriteString(xmlResponse);
                // Write the XML to the file.
                writer.Flush();
            }

        }
    }

 private void parseXMLfile(IsolatedStorageFile isf, string filePath)
    {

            using (IsolatedStorageFileStream str = isf.OpenFile(filePath, FileMode.Open, FileAccess.Read))
            {
                StreamReader reader = new StreamReader(str);
                string line;

                while ((line = reader.ReadLine()) != null)
                {

                    MessageBox.Show(line);

                }
                reader.Close();
            } 
```

}

当我运行代码时，在此行出现 Operation not allow on IsolatedStoreageFileStream 错误

```
 using (IsolatedStorageFileStream str = isf.OpenFile(filePath, FileMode.Open, FileAccess.Read)) 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T01:34:08.260

如果文件路径有子目录，查看该目录是否存在。这可能会导致这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T00:58:15.720

尝试这样的事情：

```
using (IsolatedStorageFile rootStore = IsolatedStorageFile.GetUserStoreForApplication())
{
    using (IsolatedStorageFileStream fs = new IsolatedStorageFileStream(filePath,
                    System.IO.FileMode.Open, rootStore))
    {
        ... whatever you do with the file goes here
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T15:44:44.557

当您尝试读取文件时该文件是否存在？看起来如果文件不存在，您开始下载过程（但不要等待完成）然后尝试读取它。

所以取而代之的是：

```
private void findCity(IsolatedStorageFile isf)
{
    filePath = AppResource.exchangeOfficesFile;

    if (!isf.FileExists(filePath.ToString()))
    {
        takeXMLOnLine(isf,filePath);
    }
    else
    {
        parseXMLfile(isf,filePath);
    }
}

void client_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
{
    using (IsolatedStorageFileStream rawStream = isf.OpenFile(filePath, FileMode.Create))
    {
        XmlWriterSettings settings = new XmlWriterSettings();
        settings.ConformanceLevel = ConformanceLevel.Auto;
        using (XmlWriter writer = XmlWriter.Create(rawStream, settings))
        {
            string xmlResponse = e.Result.ToString();
            xmlResponse = xmlResponse.Replace("&lt;", "<");
            xmlResponse = xmlResponse.Replace("&gt;", ">");
            writer.WriteString(xmlResponse);
            // Write the XML to the file.
            writer.Flush();
        }
    }

    parseXMLfile(isf,filePath);
} 
```